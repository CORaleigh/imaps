import{aq as m,as as h,I as M,au as c}from"./index-84d82762.js";function l(e,n){return n?"xoffset"in n&&n.xoffset?Math.max(e,Math.abs(n.xoffset)):"yoffset"in n&&n.yoffset?Math.max(e,Math.abs(n.yoffset||0)):e:e}function b(e){let n=0,t=0;for(let s=0;s<e.length;s++){const r=e[s].size;typeof r=="number"&&(n+=r,t++)}return n/t}function p(e,n){return typeof e=="number"?e:e&&e.stops&&e.stops.length?b(e.stops):n}function v(e,n){if(!n)return e;const t=n.filter(a=>a.type==="size").map(a=>{const{maxSize:i,minSize:f}=a;return(p(i,e)+p(f,e))/2});let s=0;const r=t.length;if(r===0)return e;for(let a=0;a<r;a++)s+=t[a];const o=Math.floor(s/r);return Math.max(o,e)}function d(e){var r;const n=e&&e.renderer,t=(e&&e.event&&e.event.pointerType)==="touch"?9:6;if(!n)return t;const s="visualVariables"in n?v(t,n.visualVariables):t;if(n.type==="simple")return l(s,n.symbol);if(n.type==="unique-value"){let o=s;return(r=n.uniqueValueInfos)==null||r.forEach(a=>{o=l(o,a.symbol)}),o}if(n.type==="class-breaks"){let o=s;return n.classBreakInfos.forEach(a=>{o=l(o,a.symbol)}),o}return n.type==="dot-density"||n.type,s}function z(e,n,t,s=new m){let r=0;if(t.type==="2d")r=n*(t.resolution??0);else if(t.type==="3d"){const x=t.overlayPixelSizeInMapUnits(e),u=t.basemapSpatialReference;r=M(u)&&!u.equals(t.spatialReference)?c(u)/c(t.spatialReference):n*x}const o=e.x-r,a=e.y-r,i=e.x+r,f=e.y+r,{spatialReference:y}=t;return s.xmin=Math.min(o,i),s.ymin=Math.min(a,f),s.xmax=Math.max(o,i),s.ymax=Math.max(a,f),s.spatialReference=y,s}function I(e,n,t){const s=t.toMap(e);return h(s)?!1:z(s,d(),t,R).intersects(n)}const R=new m;export{z as a,I as o,d as s};
