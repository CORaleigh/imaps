import{hd as m,he as p,g as d,S as l,r,R as u,k as f}from"./index-7753bab1.js";import{intersects as g}from"./geometryEngine-05918b10.js";import"./geometryEngineBase-e1a33b0a.js";import"./hydrated-169f90fe.js";let n,s;const h=(e,t)=>{const a=new m({basemap:t.map.basemap}),o=new p({map:a,container:e,navigation:{mouseWheelZoomEnabled:!1,browserTouchPanEnabled:!1,momentumEnabled:!1}});return o.ui.remove("zoom"),o.ui.remove("attribution"),t.when(()=>{o.extent=t.extent.clone().expand(2),c(t,o),t.ui.find("overview").watch("expanded",i=>{i?c(t,o):(n==null||n.remove(),s==null||s.remove())})}),x(o),o},c=(e,t)=>{n=e.watch("stationary",()=>{e.stationary&&t.goTo({target:e.extent.center,zoom:e.zoom-4},{easing:"ease-out"})}),e.map.watch("basemap",a=>t.map.basemap=a),s=e.watch("extent",()=>{t.graphics.removeAll(),t.graphics.add(new d({geometry:e.extent,symbol:new l({color:[0,0,0,.25],style:"solid",outline:{width:1,color:[255,255,255,1]}})})),g(t.extent,e.extent)||t.goTo({target:e.extent.center,zoom:e.zoom-4},{easing:"ease-out"})})},x=e=>{e.on("key-down",t=>{const a=["+","-","Shift","_","="],o=t.key;a.indexOf(o)!==-1&&t.stopPropagation()}),e.on("mouse-wheel",t=>{t.stopPropagation()}),e.on("double-click",t=>{t.stopPropagation()}),e.on("double-click",["Control"],t=>{t.stopPropagation()}),e.on("drag",t=>{t.stopPropagation()}),e.on("drag",["Shift"],t=>{t.stopPropagation()}),e.on("drag",["Shift","Control"],t=>{t.stopPropagation()})},b=e=>{const t=r.useRef(),a=r.useRef(!1);let o;return r.useEffect(()=>(!a.current&&e.view&&(a.current=!0,o=h(t.current,e.view)),()=>{o&&o.destroy()}),[]),{ref:t}};function y(e){const{ref:t}=b(e);return f.jsx("div",{id:"overview-map",ref:t})}const R=u.memo(y);export{R as default};
