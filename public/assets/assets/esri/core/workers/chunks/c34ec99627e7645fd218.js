"use strict";(self.webpackChunkRemoteClient=self.webpackChunkRemoteClient||[]).push([[2818],{42818:(e,t,n)=>{n.r(t),n.d(t,{loadGLTFMesh:()=>I});var r=n(44728),o=n(2600),l=n(86916),s=n(53648),u=n(77556),a=n(68612),c=n(62484),i=n(37008),f=n(43912),m=n(70492),p=n(7192),d=n(56160),g=n(82384),x=n(71004),y=n(48952),T=n(92160),b=n(98132);Object.freeze(Object.defineProperty({__proto__:null,copy:function(e,t,n){const r=e.typedBuffer,o=e.typedBufferStride,l=t.typedBuffer,s=t.typedBufferStride,u=n?n.count:t.count;let a=(n?.dstIndex??0)*o,c=(n?.srcIndex??0)*s;for(let e=0;e<u;++e){for(let e=0;e<9;++e)r[a+e]=l[c+e];a+=o,c+=s}}},Symbol.toStringTag,{value:"Module"})),Object.freeze(Object.defineProperty({__proto__:null,copy:function(e,t,n){const r=e.typedBuffer,o=e.typedBufferStride,l=t.typedBuffer,s=t.typedBufferStride,u=n?n.count:t.count;let a=(n?.dstIndex??0)*o,c=(n?.srcIndex??0)*s;for(let e=0;e<u;++e){for(let e=0;e<16;++e)r[a+e]=l[c+e];a+=o,c+=s}}},Symbol.toStringTag,{value:"Module"})),n(89880);var v=n(12240),w=n(88340),h=n(74960);function C(e,t){return new e(new ArrayBuffer(t*e.ElementCount*(0,b.Ad)(e.ElementType)))}var B=n(54828),S=n(57792),A=n(68268),E=n(2888),M=n(5472),R=n(44875),_=n(77800);async function I(e,t,n){const l=new S.k(function(e){const t=e?.resolveFile;return t?{busy:!1,request:async(e,n,r)=>{const l=t?.(e)??e,s="image"===n?"image":"binary"===n?"array-buffer":"json";return(await(0,o.c)(l,{responseType:s,signal:null!=r?r.signal:null})).data}}:null}(n)),u=(await(0,A.G)(l,t,n,!0)).model,a=u.lods.shift(),f=new Map,x=new Map;u.textures.forEach(((e,t)=>f.set(t,function(e){return new p.c({data:((0,M.e6)(e.data),e.data),wrap:F(e.parameters.wrap)})}(e)))),u.materials.forEach(((e,t)=>x.set(t,function(e,t){const n=new r.c(function(e,t){return(0,i.WK)(N(e[0]),N(e[1]),N(e[2]),t)}(e.color,e.opacity)),o=e.emissiveFactor?new r.c(function(e){return(0,c.WK)(N(e[0]),N(e[1]),N(e[2]))}(e.emissiveFactor)):null,l=e=>e?new d.c({scale:e.scale?[e.scale[0],e.scale[1]]:[1,1],rotation:(0,s.UB)(e.rotation??0),offset:e.offset?[e.offset[0],e.offset[1]]:[0,0]}):null;return new m.c({color:n,colorTexture:t.get(e.textureColor),normalTexture:t.get(e.textureNormal),emissiveColor:o,emissiveTexture:t.get(e.textureEmissive),occlusionTexture:t.get(e.textureOcclusion),alphaMode:z(e.alphaMode),alphaCutoff:e.alphaCutoff,doubleSided:e.doubleSided,metallic:e.metallicFactor,roughness:e.roughnessFactor,metallicRoughnessTexture:t.get(e.textureMetallicRoughness),colorTextureTransform:l(e.colorTextureTransform),normalTextureTransform:l(e.normalTextureTransform),occlusionTextureTransform:l(e.occlusionTextureTransform),emissiveTextureTransform:l(e.emissiveTextureTransform),metallicRoughnessTextureTransform:l(e.metallicRoughnessTextureTransform)})}(e,f))));const y=j(a);for(const e of y.parts)k(y,e,x);const{position:T,normal:b,tangent:v,color:w,texCoord0:h}=y.vertexAttributes,C={position:T.typedBuffer,normal:null!=b?b.typedBuffer:null,tangent:null!=v?v.typedBuffer:null,uv:null!=h?h.typedBuffer:null,color:null!=w?w.typedBuffer:null},E=(0,B.EX)(C,e,n);return{transform:E.transform,vertexSpace:E.vertexSpace,components:y.components,spatialReference:e.spatialReference,vertexAttributes:new g.s({position:E.vertexAttributes.position,normal:E.vertexAttributes.normal,tangent:E.vertexAttributes.tangent,color:C.color,uv:C.uv})}}function O(e,t){if(null==e)return"-";const n=e.typedBuffer;return`${(0,l.wJ)(t,n.buffer,(()=>t.size))}/${n.byteOffset}/${n.byteLength}`}function $(e){return null!=e?e.toString():"-"}function j(e){let t=0;const n={color:!1,tangent:!1,normal:!1,texCoord0:!1},r=new Map,o=new Map,s=[];for(const u of e.parts){const{attributes:{position:e,normal:a,color:c,tangent:i,texCoord0:f}}=u,m=`\n      ${O(e,r)}/\n      ${O(a,r)}/\n      ${O(c,r)}/\n      ${O(i,r)}/\n      ${O(f,r)}/\n      ${$(u.transform)}\n    `;let p=!1;const d=(0,l.wJ)(o,m,(()=>(p=!0,{start:t,length:e.count})));p&&(t+=e.count),a&&(n.normal=!0),c&&(n.color=!0),i&&(n.tangent=!0),f&&(n.texCoord0=!0),s.push({gltf:u,writeVertices:p,region:d})}return{vertexAttributes:{position:C(x.Ax,t),normal:n.normal?C(x.Yj,t):null,tangent:n.tangent?C(x._5,t):null,color:n.color?C(x.sb,t):null,texCoord0:n.texCoord0?C(x.U7,t):null},parts:s,components:[]}}function k(e,t,n){t.writeVertices&&function(e,t){const{position:n,normal:r,tangent:o,color:l,texCoord0:c}=e.vertexAttributes,i=t.region.start,{attributes:f,transform:m}=t.gltf,p=f.position.count;if((0,y.d)(n.slice(i,p),f.position,m),null!=f.normal&&null!=r){const e=(0,u.yy)((0,a.Su)(),m),t=r.slice(i,p);(0,y.c)(t,f.normal,e),(0,s.ig)(e)&&(0,y.e)(t,t)}else null!=r&&(0,w.f)(r,0,0,1,{dstIndex:i,count:p});if(null!=f.tangent&&null!=o){const e=(0,u.yy)((0,a.Su)(),m),t=o.slice(i,p);(0,T.a)(t,f.tangent,e),(0,s.ig)(e)&&(0,T.n)(t,t)}else null!=o&&(0,h.f)(o,0,0,1,1,{dstIndex:i,count:p});if(null!=f.texCoord0&&null!=c?(0,v.a)(c.slice(i,p),f.texCoord0):null!=c&&(0,v.f)(c,0,0,{dstIndex:i,count:p}),null!=f.color&&null!=l){const e=f.color,t=l.slice(i,p);if(4===e.elementCount)e instanceof x._5?(0,T.b)(t,e,255):e instanceof x.sb?(0,h.a)(t,e):e instanceof x.Ig&&(0,T.b)(t,e,1/256);else{(0,h.f)(t,255,255,255,255);const n=x.IN.fromTypedArray(t.typedBuffer,t.typedBufferStride);e instanceof x.Yj?(0,y.f)(n,e,255):e instanceof x.IN?(0,w.a)(n,e):e instanceof x.k5&&(0,y.f)(n,e,1/256)}}else null!=l&&(0,h.f)(l.slice(i,p),255,255,255,255)}(e,t);const{indices:r,attributes:o,primitiveType:l,material:c}=t.gltf;let i=(0,E.y)(r||o.position.count,l);const m=t.region.start;if(m){const e=new Uint32Array(i);for(let t=0;t<i.length;t++)e[t]+=m;i=e}e.components.push(new f.c({name:t.gltf.name,faces:i,material:n.get(c),shading:o.normal?"source":"flat",trustSourceNormals:!0}))}function z(e){switch(e){case"OPAQUE":return"opaque";case"MASK":return"mask";case"BLEND":return"blend"}}function F(e){return{horizontal:P(e.s),vertical:P(e.t)}}function P(e){switch(e){case _.Qz.CLAMP_TO_EDGE:return"clamp";case _.Qz.MIRRORED_REPEAT:return"mirror";case _.Qz.REPEAT:return"repeat"}}function N(e){return e**(1/R.g)*255}}}]);