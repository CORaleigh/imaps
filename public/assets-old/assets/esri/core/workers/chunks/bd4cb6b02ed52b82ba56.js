"use strict";(self.webpackChunkRemoteClient=self.webpackChunkRemoteClient||[]).push([[5468],{34888:(e,t,r)=>{r.d(t,{ED:()=>o,_M:()=>n});class n{constructor(e=null,t={},r,n){this.geometry=e,this.attributes=t,this.centroid=r,this.objectId=n,this.displayId=0,this.geohashX=0,this.geohashY=0}weakClone(){const e=new n(this.geometry,this.attributes,this.centroid,this.objectId);return e.displayId=this.displayId,e.geohashX=this.geohashX,e.geohashY=this.geohashY,e}clone(){const e=this.geometry?.clone(),t=new n(e,{...this.attributes},this.centroid?.clone(),this.objectId);return t.displayId=this.displayId,t.geohashX=this.geohashX,t.geohashY=this.geohashY,t}}function o(e){return!!e.geometry?.coords?.length}},90412:(e,t,r)=>{r.d(t,{c:()=>n});class n{constructor(){this.objectIdFieldName=null,this.globalIdFieldName=null,this.geohashFieldName=null,this.geometryProperties=null,this.geometryType=null,this.spatialReference=null,this.hasZ=!1,this.hasM=!1,this.features=[],this.fields=[],this.transform=null,this.exceededTransferLimit=!1,this.uniqueIdField=null,this.queryGeometryType=null,this.queryGeometry=null}weakClone(){const e=new n;return e.objectIdFieldName=this.objectIdFieldName,e.globalIdFieldName=this.globalIdFieldName,e.geohashFieldName=this.geohashFieldName,e.geometryProperties=this.geometryProperties,e.geometryType=this.geometryType,e.spatialReference=this.spatialReference,e.hasZ=this.hasZ,e.hasM=this.hasM,e.features=this.features,e.fields=this.fields,e.transform=this.transform,e.exceededTransferLimit=this.exceededTransferLimit,e.uniqueIdField=this.uniqueIdField,e.queryGeometry=this.queryGeometry,e.queryGeometryType=this.queryGeometryType,e}}},85152:(e,t,r)=>{r.d(t,{c:()=>n});class n{constructor(e=[],t=[],r=!1){this.lengths=e??[],this.coords=t??[],this.hasIndeterminateRingOrder=r}static fromRect(e){const[t,r,o,s]=e,i=o-t,a=s-r;return new n([5],[t,r,i,0,0,a,-i,0,0,-a])}get isPoint(){return 0===this.lengths.length}get maxLength(){return Math.max(...this.lengths)}get size(){return this.lengths.reduce(((e,t)=>e+t))}forEachVertex(e){let t=0;this.lengths.length||e(this.coords[0],this.coords[1]);for(let r=0;r<this.lengths.length;r++){const n=this.lengths[r];for(let r=0;r<n;r++)e(this.coords[2*(r+t)],this.coords[2*(r+t)+1]);t+=n}}deltaDecode(){const e=this.clone(),{coords:t,lengths:r}=e;let n=0;for(const e of r){for(let r=1;r<e;r++)t[2*(n+r)]+=t[2*(n+r)-2],t[2*(n+r)+1]+=t[2*(n+r)-1];n+=e}return e}clone(e){if(0===this.lengths.length)return new n([],[this.coords[0],this.coords[1]]);const t=2*(0===this.lengths.length?1:this.lengths.reduce(((e,t)=>e+t))),r=this.coords.slice(0,t);return e?(e.set(r),new n(this.lengths,e,this.hasIndeterminateRingOrder)):new n(Array.from(this.lengths),Array.from(r),this.hasIndeterminateRingOrder)}}},97088:(e,t,r)=>{r.d(t,{C:()=>E,C_:()=>re,G0:()=>U,GE:()=>Z,Ij:()=>ne,M$:()=>D,Oo:()=>ie,Sk:()=>oe,Uh:()=>V,WY:()=>H,Y5:()=>j,a:()=>x,i:()=>R,i6:()=>B,iC:()=>K,m:()=>W,mk:()=>F,od:()=>z,qw:()=>Q,uY:()=>w,ui:()=>J,w3:()=>$,ye:()=>L});var n=r(20744),o=r(66360),s=r(70680),i=r(77048),a=r(83372),u=r(6704),c=r(34888),l=r(90412),h=r(85152);function d(e,t){return e?t?4:3:t?3:2}const f=()=>o.c.getLogger("esri.layers.graphics.featureConversionUtils"),m={esriGeometryPoint:0,esriGeometryPolyline:2,esriGeometryPolygon:3,esriGeometryMultipoint:0,esriGeometryEnvelope:0},y=(e,t,r,n,o,s)=>{e[r]=o,e[r+1]=s},p=(e,t,r,n,o,s)=>{e[r]=o,e[r+1]=s,e[r+2]=t[n+2]},g=(e,t,r,n,o,s)=>{e[r]=o,e[r+1]=s,e[r+2]=t[n+3]},_=(e,t,r,n,o,s)=>{e[r]=o,e[r+1]=s,e[r+2]=t[n+2],e[r+3]=t[n+3]};function b(e,t,r,n){if(e){if(r)return t&&n?_:p;if(t&&n)return g}else if(t&&n)return p;return y}function w({scale:e,translate:t},r){return Math.round((r-t[0])/e[0])}function F({scale:e,translate:t},r){return Math.round((t[1]-r)/e[1])}function I({scale:e,translate:t},r,n){return r*e[n]+t[n]}function x(e,t,r){return e?t?r?q(e):M(e):r?C(e):G(e):null}function G(e){const t=e.coords;return{x:t[0],y:t[1]}}function P(e,t){return e.coords[0]=t.x,e.coords[1]=t.y,e}function M(e){const t=e.coords;return{x:t[0],y:t[1],z:t[2]}}function S(e,t){return e.coords[0]=t.x,e.coords[1]=t.y,e.coords[2]=t.z,e}function C(e){const t=e.coords;return{x:t[0],y:t[1],m:t[2]}}function T(e,t){return e.coords[0]=t.x,e.coords[1]=t.y,e.coords[2]=t.m,e}function q(e){const t=e.coords;return{x:t[0],y:t[1],z:t[2],m:t[3]}}function v(e,t){return e.coords[0]=t.x,e.coords[1]=t.y,e.coords[2]=t.z,e.coords[3]=t.m,e}function N(e,t){return e&&t?v:e?S:t?T:P}function D(e,t,r=N(null!=t.z,null!=t.m)){return r(e,t)}function R(e,t,r){if(null==e)return null;const n=d(t,r),o=[];for(let t=0;t<e.coords.length;t+=n){const r=[];for(let o=0;o<n;o++)r.push(e.coords[t+o]);o.push(r)}return t?r?{points:o,hasZ:t,hasM:r}:{points:o,hasZ:t}:r?{points:o,hasM:r}:{points:o}}function O(e,t,r=d(t.hasZ,t.hasM)){e.lengths[0]=t.points.length;const n=e.coords;let o=0;for(const e of t.points)for(let t=0;t<r;t++)n[o++]=e[t];return e}function Z(e,t,r){if(!e)return null;const n=d(t,r),{coords:o,lengths:s}=e,i=[];let a=0;for(const e of s){const t=[];for(let r=0;r<e;r++){const e=[];for(let t=0;t<n;t++)e.push(o[a++]);t.push(e)}i.push(t)}return t?r?{paths:i,hasZ:t,hasM:r}:{paths:i,hasZ:t}:r?{paths:i,hasM:r}:{paths:i}}function k(e,t,r=d(t.hasZ,t.hasM)){const{lengths:n,coords:o}=e;let s=0;for(const e of t.paths){for(const t of e)for(let e=0;e<r;e++)o[s++]=t[e];n.push(e.length)}return e}function j(e,t,r){if(!e)return null;const n=d(t,r),{coords:o,lengths:s}=e,i=[];let a=0;for(const e of s){const t=[];for(let r=0;r<e;r++){const e=[];for(let t=0;t<n;t++)e.push(o[a++]);t.push(e)}i.push(t)}return t?r?{rings:i,hasZ:t,hasM:r}:{rings:i,hasZ:t}:r?{rings:i,hasM:r}:{rings:i}}function V(e,t,r=t.hasZ,n=t.hasM){return function(e,t,r,n){const o=d(r,n),{lengths:s,coords:i}=e;let a=0;ae(e);for(const e of t){for(const t of e)for(let e=0;e<o;e++)i[a++]=t[e];s.push(e.length)}return e}(e,t.rings,r,n)}const Y=[],A=[];function L(e,t,r,n,o){Y[0]=e;const[s]=z(A,Y,t,r,n,o);return ue(Y),ue(A),s}function z(e,t,r,o,s,i){if(ue(e),!r){for(const r of t){const t=i?r.attributes[i]:void 0;e.push(new c._M(null,r.attributes,null,t))}return e}switch(r){case"esriGeometryPoint":return function(e,t,r,n,o){const s=N(r,n);for(const{geometry:r,attributes:n}of t){const t=null!=r?s(new h.c,r):null;e.push(new c._M(t,n,null,o?n[o]:void 0))}return e}(e,t,o,s,i);case"esriGeometryMultipoint":return function(e,t,r,n,o){const s=d(r,n);for(const{geometry:r,attributes:n}of t){const t=null!=r?O(new h.c,r,s):null;e.push(new c._M(t,n,null,o?n[o]:void 0))}return e}(e,t,o,s,i);case"esriGeometryPolyline":return function(e,t,r,n,o){const s=d(r,n);for(const{geometry:r,attributes:n,centroid:i}of t){const t=null!=r?k(new h.c,r,s):null,a=null!=i?D(new h.c,i):null;e.push(new c._M(t,n,a,o?n[o]:void 0))}return e}(e,t,o,s,i);case"esriGeometryPolygon":return function(e,t,r,n,o){for(const{geometry:s,centroid:i,attributes:a}of t){const t=null!=s?V(new h.c,s,r,n):null,u=o?a[o]:void 0;null!=i?e.push(new c._M(t,a,P(new h.c,i),u)):e.push(new c._M(t,a,null,u))}return e}(e,t,o,s,i);default:f().error("convertToFeatureSet:unknown-geometry",new n.c(`Unable to parse unknown geometry type '${r}'`)),ue(e)}return e}function U(e,t,r,n){A[0]=e,X(Y,A,t,r,n);const o=Y[0];return ue(Y),ue(A),o}function E(e,t,r){if(null==e)return null;const o=new h.c;return"hasZ"in e&&null==t&&(t=e.hasZ),"hasM"in e&&null==r&&(r=e.hasM),(0,u._x)(e)?N(null!=t?t:null!=e.z,null!=r?r:null!=e.m)(o,e):(0,u.Cs)(e)?V(o,e,t,r):(0,u.cZ)(e)?k(o,e,d(t,r)):(0,u._)(e)?O(o,e,d(t,r)):void f().error("convertFromGeometry:unknown-geometry",new n.c(`Unable to parse unknown geometry type '${e}'`))}function Q(e,t,r,o){const s=e&&("coords"in e?e:e.geometry);if(null==s)return null;switch(t){case"esriGeometryPoint":{let e=G;return r&&o?e=q:r?e=M:o&&(e=C),e(s)}case"esriGeometryMultipoint":return R(s,r,o);case"esriGeometryPolyline":return Z(s,r,o);case"esriGeometryPolygon":return j(s,r,o);default:return f().error("convertToGeometry:unknown-geometry",new n.c(`Unable to parse unknown geometry type '${t}'`)),null}}function X(e,t,r,o,s){if(ue(e),null==r)return function(e,t){for(const r of t)e.push({attributes:r.attributes});return e}(e,t);switch(r){case"esriGeometryPoint":return function(e,t,r,n){let o=G;r&&n?o=q:r?o=M:n&&(o=C);for(const r of t){const{geometry:t,attributes:n}=r,s=null!=t?o(t):null;e.push({attributes:n,geometry:s})}return e}(e,t,o,s);case"esriGeometryMultipoint":return function(e,t,r,n){for(const{geometry:o,attributes:s}of t)e.push({attributes:s,geometry:null!=o?R(o,r,n):null});return e}(e,t,o,s);case"esriGeometryPolyline":return function(e,t,r,n){for(const{geometry:o,attributes:s}of t)e.push({attributes:s,geometry:null!=o?Z(o,r,n):null});return e}(e,t,o,s);case"esriGeometryPolygon":return function(e,t,r,n){for(const{geometry:o,attributes:s,centroid:i}of t){const t=null!=o?j(o,r,n):null;if(null!=i){const r=G(i);e.push({attributes:s,centroid:r,geometry:t})}else e.push({attributes:s,geometry:t})}return e}(e,t,o,s);default:f().error("convertToFeatureSet:unknown-geometry",new n.c(`Unable to parse unknown geometry type '${r}'`))}return e}function B(e){const{objectIdFieldName:t,spatialReference:r,transform:n,fields:o,hasM:s,hasZ:i,features:a,geometryType:u,exceededTransferLimit:c,uniqueIdField:l,queryGeometry:h,queryGeometryType:d}=e,f={features:X([],a,u,i,s),fields:o,geometryType:u,objectIdFieldName:t,spatialReference:r,uniqueIdField:l,queryGeometry:Q(h,d,!1,!1)};return n&&(f.transform=n),c&&(f.exceededTransferLimit=c),s&&(f.hasM=s),i&&(f.hasZ=i),f}function J(e,t){const r=new l.c,{hasM:o,hasZ:s,features:i,objectIdFieldName:a,spatialReference:u,geometryType:c,exceededTransferLimit:h,transform:d,fields:m}=e;return m&&(r.fields=m),r.geometryType=c??null,r.objectIdFieldName=a??t??null,r.spatialReference=u??null,r.objectIdFieldName?(i&&z(r.features,i,c,s,o,r.objectIdFieldName),h&&(r.exceededTransferLimit=h),o&&(r.hasM=o),s&&(r.hasZ=s),d&&(r.transform=d),r):(f().error(new n.c("optimized-features:invalid-objectIdFieldName","objectIdFieldName is missing")),r)}function $(e){const{transform:t,features:r,hasM:n,hasZ:o}=e;if(!t)return e;for(const e of r)null!=e.geometry&&ne(e.geometry,e.geometry,n,o,t),null!=e.centroid&&ne(e.centroid,e.centroid,n,o,t);return e.transform=null,e}function W(e,t){const{geometryType:r,features:n,hasM:o,hasZ:s}=t;if(!e)return t;for(let t=0;t<n.length;t++){const i=n[t],a=i.weakClone();a.geometry=new h.c,K(a.geometry,i.geometry,o,s,r,e),i.centroid&&(a.centroid=new h.c,K(a.centroid,i.centroid,o,s,"esriGeometryPoint",e)),n[t]=a}return t.transform=e,t}function K(e,t,r,n,o,s,i=r,a=n){if(ae(e),!t?.coords.length)return null;const u=m[o],{coords:c,lengths:l}=t,h=d(r,n),f=d(r&&i,n&&a),y=b(r,n,i,a);if(!l.length)return y(e.coords,c,0,0,w(s,c[0]),F(s,c[1])),ae(e,h,0),e;let p,g,_,I,x=0,G=0,P=G;for(const t of l){if(t<u)continue;let r=0;G=P,_=p=w(s,c[x]),I=g=F(s,c[x+1]),y(e.coords,c,G,x,_,I),r++,x+=h,G+=f;for(let n=1;n<t;n++,x+=h)_=w(s,c[x]),I=F(s,c[x+1]),_===p&&I===g||(y(e.coords,c,G,x,_-p,I-g),G+=f,r++,p=_,g=I);r>=u&&(e.lengths.push(r),P=G)}return ue(e.coords,P),e.coords.length?e:null}function H(e,t,r,n,o,s,i=r,a=n){if(ae(e),!t?.coords.length)return null;const u=m[o],{coords:c,lengths:l}=t,h=d(r,n),f=d(r&&i,n&&a),y=b(r,n,i,a);if(!l.length)return y(e.coords,c,0,0,c[0],c[1]),ae(e,h,0),e;let p=0;const g=s*s;for(const t of l){if(t<u){p+=t*h;continue}const r=e.coords.length/f,n=p,o=p+(t-1)*h;y(e.coords,c,e.coords.length,n,c[n],c[n+1]),te(e.coords,c,h,g,y,n,o),y(e.coords,c,e.coords.length,o,c[o],c[o+1]);const s=e.coords.length/f-r;s>=u?e.lengths.push(s):ue(e.coords,r*f),p+=t*h}return e.coords.length?e:null}function ee(e,t,r,n){const o=e[t],s=e[t+1],i=e[r],a=e[r+1],u=e[n],c=e[n+1];let l=i,h=a,d=u-l,f=c-h;if(0!==d||0!==f){const e=((o-l)*d+(s-h)*f)/(d*d+f*f);e>1?(l=u,h=c):e>0&&(l+=d*e,h+=f*e)}return d=o-l,f=s-h,d*d+f*f}function te(e,t,r,n,o,s,i){let a,u=n,c=0;for(let e=s+r;e<i;e+=r)a=ee(t,e,s,i),a>u&&(c=e,u=a);u>n&&(c-s>r&&te(e,t,r,n,o,s,c),o(e,t,e.length,c,t[c],t[c+1]),i-c>r&&te(e,t,r,n,o,c,i))}function re(e,t,r,n){if(!t?.coords?.length)return null;const o=d(r,n);let s=Number.POSITIVE_INFINITY,u=Number.POSITIVE_INFINITY,c=Number.NEGATIVE_INFINITY,l=Number.NEGATIVE_INFINITY;if(t&&t.coords){const e=t.coords;for(let t=0;t<e.length;t+=o){const r=e[t],n=e[t+1];s=Math.min(s,r),c=Math.max(c,r),u=Math.min(u,n),l=Math.max(l,n)}}return(0,i.is)(e)?(0,i.qy)(e,s,u,c,l):(0,a.WK)(s,u,c,l,e),e}function ne(e,t,r,n,o){const{coords:i,lengths:a}=t,u=d(r,n);if(!i.length)return e!==t&&ae(e),e;(0,s.EN)(o);const{originPosition:c,scale:l,translate:h}=o,f=ce;f.originPosition=c;const m=f.scale;m[0]=l[0]??1,m[1]=-(l[1]??1),m[2]=l[2]??1,m[3]=l[3]??1;const y=f.translate;if(y[0]=h[0]??0,y[1]=h[1]??0,y[2]=h[2]??0,y[3]=h[3]??0,!a.length){for(let t=0;t<u;++t)e.coords[t]=I(f,i[t],t);return e!==t&&ae(e,u,0),e}let p=0;for(let t=0;t<a.length;t++){const r=a[t];e.lengths[t]=r;for(let t=0;t<u;++t)e.coords[p+t]=I(f,i[p+t],t);let n=e.coords[p],o=e.coords[p+1];p+=u;for(let t=1;t<r;t++,p+=u){n+=i[p]*m[0],o+=i[p+1]*m[1],e.coords[p]=n,e.coords[p+1]=o;for(let t=2;t<u;++t)e.coords[p+t]=I(f,i[p+t],t)}}return e!==t&&ae(e,i.length,a.length),e}function oe(e,t,r,n,o,s){if(ae(e),e.lengths.push(...t.lengths),r===o&&n===s)for(let r=0;r<t.coords.length;r++)e.coords.push(t.coords[r]);else{const i=d(r,n),a=b(r,n,o,s),u=t.coords;for(let t=0;t<u.length;t+=i)a(e.coords,u,e.coords.length,t,u[t],u[t+1])}return e}function se(e,t,r,n){let o=0,s=e[n*t],i=e[n*(t+1)];for(let a=1;a<r;a++){const r=s+e[n*(t+a)],u=i+e[n*(t+a)+1],c=(r-s)*(u+i);s=r,i=u,o+=c}return.5*o}function ie(e,t){const{coords:r,lengths:n}=e;let o=0,s=0;for(let e=0;e<n.length;e++){const i=n[e];s+=se(r,o,i,t),o+=i}return Math.abs(s)}function ae(e,t=0,r=0){ue(e.lengths,r),ue(e.coords,t)}function ue(e,t=0){e.length!==t&&(e.length=t)}const ce={originPosition:"lowerLeft",scale:[1,1,1,1],translate:[0,0,0,0]}},95468:(e,t,r)=>{r.d(t,{c:()=>x});var n=r(41948),o=r(43780),s=r(20744),i=r(9456),a=r(10860),u=r(28176),c=r(1580),l=(r(66360),r(72052),r(12552)),h=r(4048),d=r(88204),f=r(21980),m=r(46788),y=(r(60708),r(32848)),p=r(95776),g=r(95247),_=r(819),b=r(99944),w=r(49132),F=r(59500);let I=class extends o.c{constructor(e){super(e),this.dynamicDataSource=null,this.fieldsIndex=null,this.gdbVersion=null,this.infoFor3D=null,this.pbfSupported=!1,this.queryAttachmentsSupported=!1,this.sourceSpatialReference=null,this.url=null}get parsedUrl(){return(0,u.as)(this.url)}async execute(e,t){const r=await this.executeJSON(e,t);return this.featureSetFromJSON(e,r,t)}async executeJSON(e,t){const r=this._normalizeQuery(e),n=null!=e.outStatistics?.[0],o=(0,i.c)("featurelayer-pbf-statistics"),s=!n||o;let a;if(this.pbfSupported&&s)try{a=await(0,w.S)(this.url,r,t)}catch(e){if("query:parsing-pbf"!==e.name)throw e;this.pbfSupported=!1}return this.pbfSupported&&s||(a=await(0,b.E)(this.url,r,t)),this._normalizeFields(a.fields),a}async featureSetFromJSON(e,t,n){if(!this._queryIs3DObjectFormat(e)||null==this.infoFor3D||!t.features)return F.c.fromJSON(t);const{meshFeatureSetFromJSON:o}=await(0,a.Yv)(Promise.all([r.e(8624),r.e(3180),r.e(7424),r.e(9780),r.e(456)]).then(r.bind(r,12784)),n);return o(e,this.infoFor3D,t)}executeForCount(e,t){return(0,m._)(this.url,this._normalizeQuery(e),t)}executeForExtent(e,t){return async function(e,t,r){const n=(0,f.UX)(e),o=await(0,y.A7)(n,p.c.from(t),{...r}),s=o.data.extent;return!s||isNaN(s.xmin)||isNaN(s.ymin)||isNaN(s.xmax)||isNaN(s.ymax)?{count:o.data.count,extent:null}:{count:o.data.count,extent:g.c.fromJSON(s)}}(this.url,this._normalizeQuery(e),t)}executeForIds(e,t){return(0,_.g)(this.url,this._normalizeQuery(e),t)}async executeRelationshipQuery(e,t){const[{default:n},{executeRelationshipQuery:o}]=await(0,a.Yv)(Promise.all([r.e(8648).then(r.bind(r,18648)),r.e(1644).then(r.bind(r,1644))]),t);return e=n.from(e),(this.gdbVersion||this.dynamicDataSource)&&((e=e.clone()).gdbVersion=e.gdbVersion||this.gdbVersion,e.dynamicDataSource=e.dynamicDataSource||this.dynamicDataSource),o(this.url,e,t)}async executeRelationshipQueryForCount(e,t){const[{default:n},{executeRelationshipQueryForCount:o}]=await(0,a.Yv)(Promise.all([r.e(8648).then(r.bind(r,18648)),r.e(1644).then(r.bind(r,1644))]),t);return e=n.from(e),(this.gdbVersion||this.dynamicDataSource)&&((e=e.clone()).gdbVersion=e.gdbVersion||this.gdbVersion,e.dynamicDataSource=e.dynamicDataSource||this.dynamicDataSource),o(this.url,e,t)}async executeAttachmentQuery(e,t){const{executeAttachmentQuery:n,fetchAttachments:o,processAttachmentQueryResult:s}=await(0,a.Yv)(r.e(2024).then(r.bind(r,82024)),t),i=(0,f.UX)(this.url);return s(i,await(this.queryAttachmentsSupported?n(i,e,t):o(i,e,t)))}async executeTopFeaturesQuery(e,t){const{executeTopFeaturesQuery:n}=await(0,a.Yv)(r.e(3395).then(r.bind(r,93395)),t);return n(this.parsedUrl,e,this.sourceSpatialReference,t)}async executeForTopIds(e,t){const{executeForTopIds:n}=await(0,a.Yv)(r.e(4296).then(r.bind(r,84296)),t);return n(this.parsedUrl,e,t)}async executeForTopExtents(e,t){const{executeForTopExtents:n}=await(0,a.Yv)(r.e(2008).then(r.bind(r,22008)),t);return n(this.parsedUrl,e,t)}async executeForTopCount(e,t){const{executeForTopCount:n}=await(0,a.Yv)(r.e(6796).then(r.bind(r,76796)),t);return n(this.parsedUrl,e,t)}_normalizeQuery(e){let t=p.c.from(e);t.sourceSpatialReference=t.sourceSpatialReference||this.sourceSpatialReference,(this.gdbVersion||this.dynamicDataSource)&&(t=t===e?t.clone():t,t.gdbVersion=e.gdbVersion||this.gdbVersion,t.dynamicDataSource=e.dynamicDataSource?d.U.from(e.dynamicDataSource):this.dynamicDataSource);const{infoFor3D:r}=this;if(null!=r&&this._queryIs3DObjectFormat(e)){t=t===e?t.clone():t,t.formatOf3DObjects=null;const{supportedFormats:n,queryFormats:o}=r,i=(0,h.me)("model/gltf-binary",n)??(0,h.If)("glb",n),a=(0,h.me)("model/gltf+json",n)??(0,h.If)("gltf",n);for(const e of o){if(e===i){t.formatOf3DObjects=e;break}e!==a||t.formatOf3DObjects||(t.formatOf3DObjects=e)}if(!t.formatOf3DObjects)throw new s.c("query:unsupported-3d-query-formats","Could not find any supported 3D object query format. Only supported formats are 3D_glb and 3D_gltf");if(null==t.outFields||!t.outFields.includes("*")){t=t===e?t.clone():t,null==t.outFields&&(t.outFields=[]);const{originX:n,originY:o,originZ:s,translationX:i,translationY:a,translationZ:u,scaleX:c,scaleY:l,scaleZ:h,rotationX:d,rotationY:f,rotationZ:m,rotationDeg:y}=r.transformFieldRoles;t.outFields.push(n,o,s,i,a,u,c,l,h,d,f,m,y)}}return t}_normalizeFields(e){if(null!=this.fieldsIndex&&null!=e)for(const t of e){const e=this.fieldsIndex.get(t.name);e&&Object.assign(t,e.toJSON())}}_queryIs3DObjectFormat(e){return null!=this.infoFor3D&&!0===e.returnGeometry&&"xyFootprint"!==e.multipatchOption&&!e.outStatistics}};(0,n._)([(0,c.qq)({type:d.U})],I.prototype,"dynamicDataSource",void 0),(0,n._)([(0,c.qq)()],I.prototype,"fieldsIndex",void 0),(0,n._)([(0,c.qq)()],I.prototype,"gdbVersion",void 0),(0,n._)([(0,c.qq)()],I.prototype,"infoFor3D",void 0),(0,n._)([(0,c.qq)({readOnly:!0})],I.prototype,"parsedUrl",null),(0,n._)([(0,c.qq)()],I.prototype,"pbfSupported",void 0),(0,n._)([(0,c.qq)()],I.prototype,"queryAttachmentsSupported",void 0),(0,n._)([(0,c.qq)()],I.prototype,"sourceSpatialReference",void 0),(0,n._)([(0,c.qq)({type:String})],I.prototype,"url",void 0),I=(0,n._)([(0,l.c)("esri.tasks.QueryTask")],I);const x=I},4048:(e,t,r)=>{r.d(t,{If:()=>a,K0:()=>c,Mn:()=>m,kD:()=>s,me:()=>i,sz:()=>o,w$:()=>u});const n=[["binary","application/octet-stream","bin",""]];function o(e,t){return null!=h(t.name,e?.supportedFormats??[])}function s(e,t){if(!e)return!1;const r=c(t,e.supportedFormats??[]);return null!=r&&e.editFormats.includes(r)}function i(e,t){return d(function(e,t){const r=e.toLowerCase();return l(t).find((e=>f(e)===r))}(e,t))}function a(e,t){return d(h(e,t))}function u(e,t){return f(function(e,t){return l(t).find((t=>d(t)===e))}(e,t))}function c(e,t){return a(e.name,t)??i(e.type,t)}function l(e){return[...n,...e]}function h(e,t){const r=e.toLowerCase();return l(t).find((e=>function(e){return e?.[2].split(",").map((e=>e.toLowerCase()))??[]}(e).some((e=>r.endsWith(e)))))}function d(e){return e?.[0]}function f(e){return e?.[1].toLowerCase()}function m(e){return e.tables?.find((e=>"assetMaps"===e.role))}},46788:(e,t,r)=>{r.d(t,{_:()=>i});var n=r(21980),o=r(32848),s=r(95776);async function i(e,t,r){const i=(0,n.UX)(e);return(0,o.WE)(i,s.c.from(t),{...r}).then((e=>e.data.count))}},819:(e,t,r)=>{r.d(t,{g:()=>i});var n=r(21980),o=r(32848),s=r(95776);async function i(e,t,r){const i=(0,n.UX)(e);return(0,o.Qn)(i,s.c.from(t),{...r}).then((e=>e.data.objectIds))}},99944:(e,t,r)=>{r.d(t,{E:()=>u,c:()=>a});var n=r(21980),o=r(32848),s=r(59500),i=r(95776);async function a(e,t,r){const n=await u(e,t,r);return s.c.fromJSON(n)}async function u(e,t,r){const s=(0,n.UX)(e),a={...r},u=i.c.from(t),{data:c}=await(0,o.EL)(s,u,u.sourceSpatialReference,a);return c}},49132:(e,t,r)=>{r.d(t,{S:()=>p});var n=r(21980),o=r(70680),s=r(37924),i=r(97088);function a(e,t){return t}function u(e,t,r,n){switch(r){case 0:return d(e,t+n,0);case 1:return"lowerLeft"===e.originPosition?d(e,t+n,1):function({translate:e,scale:t},r,n){return e[n]-r*t[n]}(e,t+n,1)}}function c(e,t,r,n){return 2===r?d(e,t,2):u(e,t,r,n)}function l(e,t,r,n){return 2===r?0===t?0:d(e,t,3):u(e,t,r,n)}function h(e,t,r,n){return 3===r?0===t?0:d(e,t,3):c(e,t,r,n)}function d({translate:e,scale:t},r,n){return e[n]+r*t[n]}class f{constructor(e){this._options=e,this.geometryTypes=["esriGeometryPoint","esriGeometryMultipoint","esriGeometryPolyline","esriGeometryPolygon"],this._previousCoordinate=[0,0],this._transform=null,this._applyTransform=a,this._lengths=[],this._currentLengthIndex=0,this._toAddInCurrentPath=0,this._vertexDimension=0,this._mValueOffset=null,this._coordinateBuffer=null,this._coordinateBufferPtr=0,this._attributesConstructor=class{}}createFeatureResult(){return{fields:[],features:[]}}finishFeatureResult(e){if(this._options.applyTransform&&(e.transform=null),this._attributesConstructor=class{},this._coordinateBuffer=null,this._lengths.length=0,!e.hasZ)return;const t=(0,s.O)(e.geometryType,this._options.sourceSpatialReference,e.spatialReference);if(null!=t)for(const r of e.features)t(r.geometry)}createSpatialReference(){return{}}addField(e,t){const r=e.fields;(0,o.EN)(r),r.push(t);const n=r.map((e=>e.name));this._attributesConstructor=function(){for(const e of n)this[e]=null}}addFeature(e,t){e.features.push(t)}prepareFeatures(e){switch(this._transform=e.transform,this._options.applyTransform&&e.transform&&(this._applyTransform=this._deriveApplyTransform(e)),this._mValueOffset=null,this._vertexDimension=2,e.hasZ&&this._vertexDimension++,e.hasM&&(this._mValueOffset=this._vertexDimension,this._vertexDimension++),e.geometryType){case"esriGeometryPoint":this.addCoordinate=(e,t,r)=>this.addCoordinatePoint(e,t,r),this.createGeometry=e=>this.createPointGeometry(e);break;case"esriGeometryPolygon":this.addCoordinate=(e,t,r)=>this._addCoordinatePolygon(e,t,r),this.createGeometry=e=>this._createPolygonGeometry(e);break;case"esriGeometryPolyline":this.addCoordinate=(e,t,r)=>this._addCoordinatePolyline(e,t,r),this.createGeometry=e=>this._createPolylineGeometry(e);break;case"esriGeometryMultipoint":this.addCoordinate=(e,t,r)=>this._addCoordinateMultipoint(e,t,r),this.createGeometry=e=>this._createMultipointGeometry(e)}}createFeature(){return this._lengths.length=0,this._currentLengthIndex=0,this._previousCoordinate[0]=0,this._previousCoordinate[1]=0,this._coordinateBuffer=null,this._coordinateBufferPtr=0,{attributes:new this._attributesConstructor}}allocateCoordinates(){}addLength(e,t,r){0===this._lengths.length&&(this._toAddInCurrentPath=t),this._lengths.push(t)}addQueryGeometry(e,t){const{queryGeometry:r,queryGeometryType:n}=t,o=(0,i.Ij)(r.clone(),r,!1,!1,this._transform),s=(0,i.qw)(o,n,!1,!1);e.queryGeometryType=n,e.queryGeometry={...s}}createPointGeometry(e){const t={x:0,y:0,spatialReference:e.spatialReference};return e.hasZ&&(t.z=0),e.hasM&&(t.m=0),t}addCoordinatePoint(e,t,r){const n=this._transform;switch(t=this._applyTransform(n,t,r,0),r){case 0:e.x=t;break;case 1:e.y=t;break;case 2:"z"in e?e.z=t:e.m=t;break;case 3:e.m=t}}_transformPathLikeValue(e,t){let r=0;t<=1&&(r=this._previousCoordinate[t],this._previousCoordinate[t]+=e);const n=this._transform;return null===this._mValueOffset||0!==e||t%this._mValueOffset?this._applyTransform(n,e,t,r):0}_addCoordinatePolyline(e,t,r){this._dehydratedAddPointsCoordinate(e.paths,t,r)}_addCoordinatePolygon(e,t,r){this._dehydratedAddPointsCoordinate(e.rings,t,r)}_addCoordinateMultipoint(e,t,r){0===r&&e.points.push([]);const n=this._transformPathLikeValue(t,r);e.points[e.points.length-1].push(n)}_createPolygonGeometry(e){return{rings:[[]],spatialReference:e.spatialReference,hasZ:!!e.hasZ,hasM:!!e.hasM}}_createPolylineGeometry(e){return{paths:[[]],spatialReference:e.spatialReference,hasZ:!!e.hasZ,hasM:!!e.hasM}}_createMultipointGeometry(e){return{points:[],spatialReference:e.spatialReference,hasZ:!!e.hasZ,hasM:!!e.hasM}}_dehydratedAddPointsCoordinate(e,t,r){0===r&&0==this._toAddInCurrentPath--&&(e.push([]),this._toAddInCurrentPath=this._lengths[++this._currentLengthIndex]-1,this._previousCoordinate[0]=0,this._previousCoordinate[1]=0);const n=this._transformPathLikeValue(t,r),o=e[e.length-1];0===r&&(this._coordinateBufferPtr=0,this._coordinateBuffer=new Array(this._vertexDimension),o.push(this._coordinateBuffer)),this._coordinateBuffer[this._coordinateBufferPtr++]=n}_deriveApplyTransform(e){const{hasZ:t,hasM:r}=e;return t&&r?h:t?c:r?l:u}}var m=r(32848),y=(r(59500),r(95776));async function p(e,t,r){const o=(0,n.UX)(e),s={...r},i=y.c.from(t),a=!i.quantizationParameters,{data:u}=await(0,m.aA)(o,i,new f({sourceSpatialReference:i.sourceSpatialReference,applyTransform:a}),s);return u}}}]);