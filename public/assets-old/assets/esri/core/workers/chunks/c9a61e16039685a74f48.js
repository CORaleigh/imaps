"use strict";(self.webpackChunkRemoteClient=self.webpackChunkRemoteClient||[]).push([[1792],{11792:(e,t,r)=>{r.r(t),r.d(t,{registerFunctions:()=>T});var n=r(6220),o=(r(60708),r(17288)),i=r(8736),a=r(82344),s=r(96680),c=r(5752),u=r(50853),l=r(60074),p=r(29120),f=r(54872),d=r(9764),y=r(2600),h=r(53368),m=r(6704),w=r(21980),g=r(81976),q=r(41948),v=r(40504),S=r(1580),R=(r(9456),r(66360),r(72052),r(12552)),_=r(60544);let G=class extends v.am{constructor(e){super(e),this.geometries=[],this.outSpatialReference=null,this.transformation=null,this.transformForward=null}toJSON(){const e=this.geometries.map((e=>e.toJSON())),t=this.geometries[0],r={};return r.outSR=(0,_.um)(this.outSpatialReference),r.inSR=(0,_.um)(t.spatialReference),r.geometries=JSON.stringify({geometryType:(0,m.Ce)(t),geometries:e}),this.transformation&&(r.transformation=this.transformation.wkid||JSON.stringify(this.transformation)),null!=this.transformForward&&(r.transformForward=this.transformForward),r}};(0,q._)([(0,S.qq)()],G.prototype,"geometries",void 0),(0,q._)([(0,S.qq)({json:{read:{source:"outSR"}}})],G.prototype,"outSpatialReference",void 0),(0,q._)([(0,S.qq)()],G.prototype,"transformation",void 0),(0,q._)([(0,S.qq)()],G.prototype,"transformForward",void 0),G=(0,q._)([(0,R.c)("esri.rest.support.ProjectParameters")],G);const b=G,j=(0,h.ey)(b);var x=r(8808),N=r(27504),k=r(59940),O=r(87987),P=r(88812),J=r(56156);let I=null;async function Q(e){const t=n.default.geometryServiceUrl??"";if(!t){(0,l.isLoaded)()||await(0,l.load)();for(const t of e)t.container[t.indexer]=(0,l.project)(t.container[t.indexer],J.c.WGS84);return}const r=e.map((e=>e.container[e.indexer])),o=new b({geometries:r,outSpatialReference:J.c.WGS84}),i=await async function(e,t,r){t=j(t);const n=(0,w.UX)(e),o={...n.query,f:"json",...t.toJSON()},i=t.outSpatialReference,a=(0,m.Ce)(t.geometries[0]),s=(0,w.sR)(o,void 0);return(0,y.c)(n.path+"/project",s).then((({data:{geometries:e}})=>(0,g.Q)(e,a,i)))}(t,o);for(let t=0;t<i.length;t++){const r=e[t];r.container[r.indexer]=i[t]}}async function C(e,t){const n=new d.default({portal:e,id:t});return await n.load(),null===I&&(I=await r.e(6680).then(r.bind(r,6680))),await I.fetchKnowledgeGraph(n.url)}function U(e,t,r,n,o){if(null===e)return null;if((0,s.c)(e)||(0,s.b)(e))return e;if((0,s.k)(e))return e.toJSDate();if((0,s.k)(e))return e.toJSDate();if((0,s.m)(e))return e.toStorageFormat();if((0,s.n)(e))return e.toStorageString();if((0,s.v)(e)){const i={};for(const a of e.keys())i[a]=U(e.field(a),t,r,n,o),i[a]instanceof u.c&&o.push({container:i,indexer:a});return i}if((0,s.o)(e)){const i=e.map((e=>U(e,t,r,n,o)));for(let e=0;e<i.length;e++)i[e]instanceof u.c&&o.push({container:i,indexer:e});return i}if((0,s.p)(e)){if(e.spatialReference.isWGS84)return e;if(e.spatialReference.isWebMercator&&t)return(0,p.aq)(e);if(!t||!r)return e;throw new a.w7(n,a.iU.WrongSpatialReference,null)}}function W(e,t){if(!e)return null;const r={};for(const n in e)r[n]=F(e[n],t);return r}function F(e,t){return null===e?null:(0,s.o)(e)?e.map((e=>F(e,t))):e instanceof x.c?{graphTypeName:e.typeName,id:e.id,graphType:"entity",properties:W(e.properties,t)}:e instanceof k.c?{graphType:"object",properties:W(e.properties,t)}:e instanceof P.c?{graphTypeName:e.typeName,id:e.id,graphType:"relationship",originId:e.originId??null,destinationId:e.destinationId??null,properties:W(e.properties,t)}:e instanceof O.c?{graphType:"path",path:e.path?e.path.map((e=>F(e,t))):null}:(0,s.p)(e)?function(e,t){if(!e)return e;if(e.spatialReference.isWGS84&&t.spatialReference.isWebMercator)return(0,p.w7)(e);if(e.spatialReference.equals(t.spatialReference))return e;throw new a.w7(t,a.iU.WrongSpatialReference,null)}(e,t):(0,s.c)(e)||(0,s.b)(e)||(0,s.a7)(e)?e:null}function T(e){"async"===e.mode&&(e.functions.knowledgegraphbyportalitem=function(t,r){return e.standardFunctionAsync(t,r,((e,n,i)=>{if((0,s.H)(i,2,2,t,r),null===i[0])throw new a.w7(t,a.iU.PortalRequired,r);if(i[0]instanceof o.c){const e=(0,s.j)(i[1]);let r=null;return r=t.services?.portal?t.services.portal:f.c.getDefault(),C((0,c.q)(i[0],r),e)}if(!1===(0,s.c)(i[0]))throw new a.w7(t,a.iU.InvalidParameter,r);const u=(0,s.j)(i[0]);return C(t.services?.portal??f.c.getDefault(),u)}))},e.signatures.push({name:"knowledgegraphbyportalitem",min:2,max:2}),e.functions.querygraph=function(t,n){return e.standardFunctionAsync(t,n,(async(e,o,c)=>{(0,s.H)(c,2,4,t,n);const u=c[0];if(!(0,s.w)(u))throw new a.w7(t,a.iU.InvalidParameter,n);const l=c[1];if(!(0,s.c)(l))throw new a.w7(t,a.iU.InvalidParameter,n);null===I&&(I=await r.e(6680).then(r.bind(r,6680)));let p=null;const f=(0,s.K)(c[2],null);if(!(f instanceof i.c||null===f))throw new a.w7(t,a.iU.InvalidParameter,n);if(f){let e=[];p=U(f,!0,!1,t,e),e=e.filter((e=>!e.container[e.indexer].spatialReference.isWGS84)),e.length>0&&await Q(e)}const d=new N.c({openCypherQuery:l,bindParameters:p});(u?.serviceDefinition?.currentVersion??11.3)>11.2&&(d.outputSpatialReference=t.spatialReference);const y=(await I.executeQueryStreaming(u,d)).resultRowsStream.getReader(),h=[];try{for(;;){const{done:e,value:r}=await y.read();if(e)break;if((0,s.o)(r))for(const e of r)h.push(F(e,t));else{const e=[];for(const n of r)e.push(F(r[n],t));h.push(e)}}}catch(e){throw e}return i.c.convertJsonToArcade(h,(0,s.N)(t),!1,!0)}))},e.signatures.push({name:"querygraph",min:2,max:4}))}},5752:(e,t,r)=>{r.d(t,{q:()=>o});var n=r(54872);function o(e,t){return null===e?t:new n.c({url:e.field("url")})}},81976:(e,t,r)=>{r.d(t,{Q:()=>i,y:()=>o});var n=r(6704);function o(e){return{geometryType:(0,n.Ce)(e[0]),geometries:e.map((e=>e.toJSON()))}}function i(e,t,r){const o=(0,n.uG)(t);return e.map((e=>{const t=o.fromJSON(e);return t.spatialReference=r,t}))}},8808:(e,t,r)=>{r.d(t,{c:()=>u});var n=r(41948),o=(r(60708),r(1580)),i=(r(9456),r(66360),r(72052),r(12552)),a=r(35332),s=r(67776);let c=class extends a.c{constructor(e){super(e),this.layoutGeometry=null}};(0,n._)([(0,o.qq)({type:s.c,json:{write:!0}})],c.prototype,"layoutGeometry",void 0),c=(0,n._)([(0,i.c)("esri.rest.knowledgeGraph.Entity")],c);const u=c},35332:(e,t,r)=>{r.d(t,{c:()=>c});var n=r(41948),o=r(1580),i=(r(9456),r(66360),r(72052),r(12552)),a=r(14080);let s=class extends a.c{constructor(e){super(e),this.typeName=null,this.id=null}};(0,n._)([(0,o.qq)({type:String,json:{write:!0}})],s.prototype,"typeName",void 0),(0,n._)([(0,o.qq)({type:String,json:{write:!0}})],s.prototype,"id",void 0),s=(0,n._)([(0,i.c)("esri.rest.knowledgeGraph.GraphNamedObject")],s);const c=s},14080:(e,t,r)=>{r.d(t,{c:()=>c});var n=r(41948),o=r(40504),i=r(1580),a=(r(9456),r(66360),r(72052),r(12552));let s=class extends o.am{constructor(e){super(e),this.properties=null}};(0,n._)([(0,i.qq)({json:{write:!0}})],s.prototype,"properties",void 0),s=(0,n._)([(0,a.c)("esri.rest.knowledgeGraph.GraphObject")],s);const c=s},27504:(e,t,r)=>{r.d(t,{c:()=>l});var n=r(41948),o=r(1580),i=(r(9456),r(66360),r(72052),r(12552)),a=r(43780);let s=class extends a.c{constructor(e){super(e),this.openCypherQuery=""}};(0,n._)([(0,o.qq)()],s.prototype,"openCypherQuery",void 0),s=(0,n._)([(0,i.c)("esri.rest.knowledgeGraph.GraphQuery")],s);const c=s;let u=class extends c{constructor(e){super(e),this.bindParameters=null,this.bindGeometryQuantizationParameters=null,this.outputQuantizationParameters=null,this.outputSpatialReference=null}};(0,n._)([(0,o.qq)()],u.prototype,"bindParameters",void 0),(0,n._)([(0,o.qq)()],u.prototype,"bindGeometryQuantizationParameters",void 0),(0,n._)([(0,o.qq)()],u.prototype,"outputQuantizationParameters",void 0),(0,n._)([(0,o.qq)()],u.prototype,"outputSpatialReference",void 0),u=(0,n._)([(0,i.c)("esri.rest.knowledgeGraph.GraphQueryStreaming")],u);const l=u},59940:(e,t,r)=>{r.d(t,{c:()=>s});var n=r(41948),o=(r(66360),r(9456),r(72052),r(20744),r(12552)),i=r(14080);let a=class extends i.c{constructor(e){super(e)}};a=(0,n._)([(0,o.c)("esri.rest.knowledgeGraph.ObjectValue")],a);const s=a},87987:(e,t,r)=>{r.d(t,{c:()=>u});var n=r(41948),o=r(40504),i=r(1580),a=(r(9456),r(66360),r(72052),r(12552)),s=r(14080);let c=class extends o.am{constructor(e){super(e),this.path=null}};(0,n._)([(0,i.qq)({type:[s.c],json:{write:!0}})],c.prototype,"path",void 0),c=(0,n._)([(0,a.c)("esri.rest.knowledgeGraph.Path")],c);const u=c},88812:(e,t,r)=>{r.d(t,{c:()=>u});var n=r(41948),o=(r(60708),r(1580)),i=(r(9456),r(66360),r(72052),r(12552)),a=r(35332),s=r(48516);let c=class extends a.c{constructor(e){super(e),this.originId=null,this.destinationId=null,this.layoutGeometry=null}};(0,n._)([(0,o.qq)({type:String,json:{write:!0}})],c.prototype,"originId",void 0),(0,n._)([(0,o.qq)({type:String,json:{write:!0}})],c.prototype,"destinationId",void 0),(0,n._)([(0,o.qq)({type:s.c,json:{write:!0}})],c.prototype,"layoutGeometry",void 0),c=(0,n._)([(0,i.c)("esri.rest.Relationship.Relationship")],c);const u=c},21980:(e,t,r)=>{r.d(t,{OW:()=>s,UX:()=>a,sR:()=>i}),r(6220),r(47620);var n=r(62088),o=r(28176);function i(e,t){return t?{...t,query:{...e??{},...t.query}}:{query:e}}function a(e){return"string"==typeof e?(0,o.as)(e):(0,n.ct)(e)}function s(e,t,r){const n={};for(const o in e){if("declaredClass"===o)continue;const i=e[o];if(null!=i&&"function"!=typeof i)if(Array.isArray(i))n[o]=i.map((e=>s({item:e},t,r).item));else if("object"==typeof i)if(i.toJSON){const e=i.toJSON(r?.[o]);n[o]=t?e:JSON.stringify(e)}else n[o]=t?i:JSON.stringify(i);else n[o]=i}return n}r(20572)}}]);