(this.webpackJsonpimaps=this.webpackJsonpimaps||[]).push([[97,273,274],{102:function(e,t,i){"use strict";function r(){return[0,0,0]}function s(e){return[e[0],e[1],e[2]]}function n(e,t,i){return[e,t,i]}function a(e){const t=[0,0,0],i=Math.min(3,e.length);for(let r=0;r<i;++r)t[r]=e[r];return t}function o(e,t){return new Float64Array(e,t,3)}function c(){return[0,0,0]}function u(){return n(1,1,1)}function l(){return n(1,0,0)}function h(){return n(0,1,0)}function d(){return n(0,0,1)}i.d(t,"a",(function(){return f})),i.d(t,"b",(function(){return p})),i.d(t,"c",(function(){return o})),i.d(t,"d",(function(){return s})),i.d(t,"e",(function(){return r})),i.d(t,"f",(function(){return a})),i.d(t,"g",(function(){return n}));const p=[0,0,0],f=u(),b=l(),m=h(),y=d();Object.freeze({__proto__:null,create:r,clone:s,fromValues:n,fromArray:a,createView:o,zeros:c,ones:u,unitX:l,unitY:h,unitZ:d,ZEROS:p,ONES:f,UNIT_X:b,UNIT_Y:m,UNIT_Z:y})},109:function(e,t,i){"use strict";i.d(t,"a",(function(){return h})),i.d(t,"b",(function(){return p})),i.d(t,"c",(function(){return _})),i.d(t,"d",(function(){return d})),i.d(t,"e",(function(){return c})),i.d(t,"f",(function(){return O})),i.d(t,"g",(function(){return j})),i.d(t,"h",(function(){return v})),i.d(t,"i",(function(){return u})),i.d(t,"j",(function(){return a})),i.d(t,"k",(function(){return b})),i.d(t,"l",(function(){return S})),i.d(t,"m",(function(){return z})),i.d(t,"n",(function(){return f})),i.d(t,"o",(function(){return n})),i.d(t,"p",(function(){return M})),i.d(t,"q",(function(){return g})),i.d(t,"r",(function(){return m})),i.d(t,"s",(function(){return y})),i.d(t,"t",(function(){return x})),i.d(t,"u",(function(){return I})),i.d(t,"v",(function(){return o})),i.d(t,"w",(function(){return w})),i.d(t,"x",(function(){return k})),i.d(t,"y",(function(){return C})),i.d(t,"z",(function(){return E}));var r=i(102),s=i(181);function n(e){const t=e[0],i=e[1],r=e[2];return Math.sqrt(t*t+i*i+r*r)}function a(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}function o(e,t,i,r){return e[0]=t,e[1]=i,e[2]=r,e}function c(e,t,i){return e[0]=t[0]+i[0],e[1]=t[1]+i[1],e[2]=t[2]+i[2],e}function u(e,t,i){return e[0]=t[0]-i[0],e[1]=t[1]-i[1],e[2]=t[2]-i[2],e}function l(e,t,i){return e[0]=t[0]*i[0],e[1]=t[1]*i[1],e[2]=t[2]*i[2],e}function h(e,t,i){return e[0]=t[0]/i[0],e[1]=t[1]/i[1],e[2]=t[2]/i[2],e}function d(e,t,i){return e[0]=t[0]*i,e[1]=t[1]*i,e[2]=t[2]*i,e}function p(e,t,i,r){return e[0]=t[0]+i[0]*r,e[1]=t[1]+i[1]*r,e[2]=t[2]+i[2]*r,e}function f(e,t){const i=t[0]-e[0],r=t[1]-e[1],s=t[2]-e[2];return Math.sqrt(i*i+r*r+s*s)}function b(e,t){const i=t[0]-e[0],r=t[1]-e[1],s=t[2]-e[2];return i*i+r*r+s*s}function m(e){const t=e[0],i=e[1],r=e[2];return t*t+i*i+r*r}function y(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e}function g(e,t){const i=t[0],r=t[1],s=t[2];let n=i*i+r*r+s*s;return n>0&&(n=1/Math.sqrt(n),e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n),e}function j(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function O(e,t,i){const r=t[0],s=t[1],n=t[2],a=i[0],o=i[1],c=i[2];return e[0]=s*c-n*o,e[1]=n*a-r*c,e[2]=r*o-s*a,e}function v(e,t,i,r){const s=t[0],n=t[1],a=t[2];return e[0]=s+r*(i[0]-s),e[1]=n+r*(i[1]-n),e[2]=a+r*(i[2]-a),e}function S(e,t,i){const r=t[0],s=t[1],n=t[2];return e[0]=i[0]*r+i[4]*s+i[8]*n+i[12],e[1]=i[1]*r+i[5]*s+i[9]*n+i[13],e[2]=i[2]*r+i[6]*s+i[10]*n+i[14],e}function w(e,t,i){const r=t[0],s=t[1],n=t[2];return e[0]=r*i[0]+s*i[3]+n*i[6],e[1]=r*i[1]+s*i[4]+n*i[7],e[2]=r*i[2]+s*i[5]+n*i[8],e}function x(e,t,i){const r=i[0],s=i[1],n=i[2],a=i[3],o=t[0],c=t[1],u=t[2];let l=s*u-n*c,h=n*o-r*u,d=r*c-s*o,p=s*d-n*h,f=n*l-r*d,b=r*h-s*l;const m=2*a;return l*=m,h*=m,d*=m,p*=2,f*=2,b*=2,e[0]=o+l+p,e[1]=c+h+f,e[2]=u+d+b,e}function _(e,t,i,r){const s=[],n=[];return s[0]=t[0]-i[0],s[1]=t[1]-i[1],s[2]=t[2]-i[2],n[0]=s[0]*Math.cos(r)-s[1]*Math.sin(r),n[1]=s[0]*Math.sin(r)+s[1]*Math.cos(r),n[2]=s[2],e[0]=n[0]+i[0],e[1]=n[1]+i[1],e[2]=n[2]+i[2],e}const T=Object(r.e)(),F=Object(r.e)();function M(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]}const I=u,R=l,P=h,E=f,C=b,z=n,k=m;Object.freeze({__proto__:null,length:n,copy:a,set:o,add:c,subtract:u,multiply:l,divide:h,ceil:function(e,t){return e[0]=Math.ceil(t[0]),e[1]=Math.ceil(t[1]),e[2]=Math.ceil(t[2]),e},floor:function(e,t){return e[0]=Math.floor(t[0]),e[1]=Math.floor(t[1]),e[2]=Math.floor(t[2]),e},min:function(e,t,i){return e[0]=Math.min(t[0],i[0]),e[1]=Math.min(t[1],i[1]),e[2]=Math.min(t[2],i[2]),e},max:function(e,t,i){return e[0]=Math.max(t[0],i[0]),e[1]=Math.max(t[1],i[1]),e[2]=Math.max(t[2],i[2]),e},round:function(e,t){return e[0]=Math.round(t[0]),e[1]=Math.round(t[1]),e[2]=Math.round(t[2]),e},scale:d,scaleAndAdd:p,distance:f,squaredDistance:b,squaredLength:m,negate:y,inverse:function(e,t){return e[0]=1/t[0],e[1]=1/t[1],e[2]=1/t[2],e},normalize:g,dot:j,cross:O,lerp:v,hermite:function(e,t,i,r,s,n){const a=n*n,o=a*(2*n-3)+1,c=a*(n-2)+n,u=a*(n-1),l=a*(3-2*n);return e[0]=t[0]*o+i[0]*c+r[0]*u+s[0]*l,e[1]=t[1]*o+i[1]*c+r[1]*u+s[1]*l,e[2]=t[2]*o+i[2]*c+r[2]*u+s[2]*l,e},bezier:function(e,t,i,r,s,n){const a=1-n,o=a*a,c=n*n,u=o*a,l=3*n*o,h=3*c*a,d=c*n;return e[0]=t[0]*u+i[0]*l+r[0]*h+s[0]*d,e[1]=t[1]*u+i[1]*l+r[1]*h+s[1]*d,e[2]=t[2]*u+i[2]*l+r[2]*h+s[2]*d,e},random:function(e,t){t=t||1;const i=2*Object(s.b)()*Math.PI,r=2*Object(s.b)()-1,n=Math.sqrt(1-r*r)*t;return e[0]=Math.cos(i)*n,e[1]=Math.sin(i)*n,e[2]=r*t,e},transformMat4:S,transformMat3:w,transformQuat:x,rotateX:function(e,t,i,r){const s=[],n=[];return s[0]=t[0]-i[0],s[1]=t[1]-i[1],s[2]=t[2]-i[2],n[0]=s[0],n[1]=s[1]*Math.cos(r)-s[2]*Math.sin(r),n[2]=s[1]*Math.sin(r)+s[2]*Math.cos(r),e[0]=n[0]+i[0],e[1]=n[1]+i[1],e[2]=n[2]+i[2],e},rotateY:function(e,t,i,r){const s=[],n=[];return s[0]=t[0]-i[0],s[1]=t[1]-i[1],s[2]=t[2]-i[2],n[0]=s[2]*Math.sin(r)+s[0]*Math.cos(r),n[1]=s[1],n[2]=s[2]*Math.cos(r)-s[0]*Math.sin(r),e[0]=n[0]+i[0],e[1]=n[1]+i[1],e[2]=n[2]+i[2],e},rotateZ:_,angle:function(e,t){a(T,e),a(F,t),g(T,T),g(F,F);const i=j(T,F);return i>1?0:i<-1?Math.PI:Math.acos(i)},str:function(e){return"vec3("+e[0]+", "+e[1]+", "+e[2]+")"},exactEquals:M,equals:function(e,t){const i=e[0],r=e[1],n=e[2],a=t[0],o=t[1],c=t[2];return Math.abs(i-a)<=s.a*Math.max(1,Math.abs(i),Math.abs(a))&&Math.abs(r-o)<=s.a*Math.max(1,Math.abs(r),Math.abs(o))&&Math.abs(n-c)<=s.a*Math.max(1,Math.abs(n),Math.abs(c))},sub:I,mul:R,div:P,dist:E,sqrDist:C,len:z,sqrLen:k})},113:function(e,t,i){"use strict";var r=i(81),s=i(88),n=i(84),a=i(83),o=i(95),c=i(105);let u=class extends o.a{constructor(e){super(e),this._groups=new Map}destroy(){this.removeAll()}get size(){let e=0;return this._groups.forEach((t=>{e+=t.length})),e}add(e,t){if(!this._isHandle(e)&&!Array.isArray(e)&&!c.a.isCollection(e))return this;const i=this._getOrCreateGroup(t);return Array.isArray(e)||c.a.isCollection(e)?e.forEach((e=>this._isHandle(e)&&i.push(e))):i.push(e),this.notifyChange("size"),this}forEach(e,t){if("function"==typeof e)this._groups.forEach((t=>t.forEach(e)));else{const i=this._getGroup(e);i&&t&&i.forEach(t)}}has(e){return this._groups.has(this._ensureGroupKey(e))}remove(e){if(Array.isArray(e)||c.a.isCollection(e))return e.forEach(this.remove,this),this;if(!this.has(e))return this;const t=this._getGroup(e);for(let i=0;i<t.length;i++)t[i].remove();return this._deleteGroup(e),this.notifyChange("size"),this}removeAll(){return this._groups.forEach((e=>{for(let t=0;t<e.length;t++)e[t].remove()})),this._groups.clear(),this.notifyChange("size"),this}_isHandle(e){return e&&!!e.remove}_getOrCreateGroup(e){if(this.has(e))return this._getGroup(e);const t=[];return this._groups.set(this._ensureGroupKey(e),t),t}_getGroup(e){return Object(s.d)(this._groups.get(this._ensureGroupKey(e)))}_deleteGroup(e){return this._groups.delete(this._ensureGroupKey(e))}_ensureGroupKey(e){return e||"_default_"}};Object(r.a)([Object(n.b)({readOnly:!0})],u.prototype,"size",null),u=Object(r.a)([Object(a.a)("esri.core.Handles")],u);var l=u;t.a=l},115:function(e,t,i){"use strict";i.d(t,"a",(function(){return H})),i.d(t,"b",(function(){return x})),i.d(t,"c",(function(){return T})),i.d(t,"d",(function(){return U})),i.d(t,"e",(function(){return D})),i.d(t,"f",(function(){return q})),i.d(t,"g",(function(){return k})),i.d(t,"h",(function(){return N})),i.d(t,"i",(function(){return A})),i.d(t,"j",(function(){return u})),i.d(t,"k",(function(){return _})),i.d(t,"l",(function(){return S})),i.d(t,"m",(function(){return C})),i.d(t,"n",(function(){return G})),i.d(t,"o",(function(){return w})),i.d(t,"p",(function(){return O})),i.d(t,"q",(function(){return v})),i.d(t,"r",(function(){return E})),i.d(t,"s",(function(){return I})),i.d(t,"t",(function(){return R})),i.d(t,"u",(function(){return P})),i.d(t,"v",(function(){return F})),i.d(t,"w",(function(){return M})),i.d(t,"x",(function(){return z}));i(79);var r=i(93),s=i(254),n=i(110),a=i(97),o=i(136),c=i(170);const u=39.37,l=o.a.radius*Math.PI/200,h=/UNIT\[([^\]]+)\]\]$/i,d=s.a,p=/UNIT\[([^\]]+)\]/i,f=new Set([4261,4305,4807,4810,4811,4812,4816,4819,4821,4901,4902,37225,104139,104140]),b=Object(r.b)()({meter:"meters",foot:"feet",foot_us:"us-feet",foot_clarke:"clarke-feet",yard_clarke:"clarke-yards",link_clarke:"clarke-links",yard_sears:"sears-yards",foot_sears:"sears-feet",chain_sears:"sears-chains",chain_benoit_1895_b:"benoit-1895-b-chains",yard_indian:"indian-yards",yard_indian_1937:"indian-1937-yards",foot_gold_coast:"gold-coast-feet",chain_sears_1922_truncated:"sears-1922-truncated-chains","50_kilometers":"50-kilometers","150_kilometers":"150-kilometers"}),m=e=>e*e,y=e=>e*e*e,g={length:{baseUnit:"meters",units:{millimeters:{inBaseUnits:.001},centimeters:{inBaseUnits:.01},decimeters:{inBaseUnits:.1},meters:{inBaseUnits:1},kilometers:{inBaseUnits:1e3},inches:{inBaseUnits:.0254},feet:{inBaseUnits:.3048},yards:{inBaseUnits:.9144},miles:{inBaseUnits:1609.344},"nautical-miles":{inBaseUnits:1852},"us-feet":{inBaseUnits:1200/3937}}},area:{baseUnit:"square-meters",units:{"square-millimeters":{inBaseUnits:m(.001)},"square-centimeters":{inBaseUnits:m(.01)},"square-decimeters":{inBaseUnits:m(.1)},"square-meters":{inBaseUnits:1},"square-kilometers":{inBaseUnits:m(1e3)},"square-inches":{inBaseUnits:m(.0254)},"square-feet":{inBaseUnits:m(.3048)},"square-yards":{inBaseUnits:m(.9144)},"square-miles":{inBaseUnits:m(1609.344)},"square-us-feet":{inBaseUnits:m(1200/3937)},acres:{inBaseUnits:.0015625*m(1609.344)},ares:{inBaseUnits:100},hectares:{inBaseUnits:1e4}}},volume:{baseUnit:"liters",units:{liters:{inBaseUnits:1},"cubic-millimeters":{inBaseUnits:1e3*y(.001)},"cubic-centimeters":{inBaseUnits:1e3*y(.01)},"cubic-decimeters":{inBaseUnits:1e3*y(.1)},"cubic-meters":{inBaseUnits:1e3},"cubic-kilometers":{inBaseUnits:1e3*y(1e3)},"cubic-inches":{inBaseUnits:1e3*y(.0254)},"cubic-feet":{inBaseUnits:1e3*y(.3048)},"cubic-yards":{inBaseUnits:1e3*y(.9144)},"cubic-miles":{inBaseUnits:1e3*y(1609.344)}}},angle:{baseUnit:"radians",units:{radians:{inBaseUnits:1},degrees:{inBaseUnits:Math.PI/180}}}},j=function(){const e={};for(const t in g)for(const i in g[t].units)e[i]=t;return e}();const O=["metric","imperial","square-inches","square-feet","square-yards","square-miles","square-us-feet","square-meters","square-kilometers","acres","ares","hectares"],v=["metric","imperial","inches","feet","yards","miles","nautical-miles","us-feet","meters","kilometers"];function S(e){return"imperial"===e||"metric"===e}function w(e){const t=j[e];if(t)return t;throw new Error("unknown measure")}function x(e){return function(e){return g[e].baseUnit}(w(e))}function _(e,t=null){return t=t||w(e),g[t].baseUnit===e}function T(e,t,i){if(t===i)return e;const r=w(t);if(r!==w(i))throw new Error("incompatible units");const s=_(t,r)?e:function(e,t,i){return e*g[i].units[t].inBaseUnits}(e,t,r);return _(i,r)?s:function(e,t,i){return e/g[i].units[t].inBaseUnits}(s,i,r)}function F(e,t){return T(e,t,"meters")<3e3?"meters":"kilometers"}function M(e,t){return T(e,t,"meters")<1e5?"meters":"kilometers"}function I(e,t){return T(e,t,"feet")<1e3?"feet":"miles"}function R(e,t){return T(e,t,"feet")<1e5?"feet":"miles"}function P(e,t){return T(e,t,"square-meters")<3e6?"square-meters":"square-kilometers"}function E(e,t){return T(e,t,"square-feet")<1e6?"square-feet":"square-miles"}function C(e,t,i){return T(e,t,"meters")/(i*Math.PI/180)}function z(e){return b.fromJSON(e.toLowerCase())||null}function k(e){if(e&&"object"==typeof e&&!Object(n.e)(e))return 1;const t=q(e);return t>1e5?1:t}function A(e){return q(e)>=(e instanceof a.a?Object(c.e)(e).metersPerDegree:1e5)?"meters":N(e)}function q(e,t=o.a.metersPerDegree){return D(e,!0)||t}function D(e,t=!1){let i,r,s=null;if(null!=e&&("object"==typeof e?(i=e.wkid,r=e.wkt):"number"==typeof e?i=e:"string"==typeof e&&(r=e)),i){if(Object(n.k)(i))return o.b.metersPerDegree;if(Object(n.l)(i))return o.c.metersPerDegree;s=d.values[d[i]],!s&&t&&f.has(i)&&(s=l)}else if(r)if(-1!==r.search(/^PROJCS/i)){const e=h.exec(r);e&&e[1]&&(s=parseFloat(e[1].split(",")[1]))}else if(-1!==r.search(/^GEOCCS/i)){const e=p.exec(r);e&&e[1]&&(s=parseFloat(e[1].split(",")[1]))}return s}function N(e){let t,i,r=null;if(null!=e&&("object"==typeof e?(t=e.wkid,i=e.wkt):"number"==typeof e?t=e:"string"==typeof e&&(i=e)),t)r=d.units[d[t]];else if(i&&-1!==i.search(/^PROJCS/i)){let e=h.exec(i);e&&e[1]&&(e=/[\\"\\']{1}([^\\"\\']+)/.exec(e[1]),r=e&&e[1])}return r?z(r):null}function U(e){if(!e)return null;switch(N(e)){case"feet":case"us-feet":case"clarke-feet":case"clarke-yards":case"clarke-links":case"sears-yards":case"sears-feet":case"sears-chains":case"benoit-1895-b-chains":case"indian-yards":case"indian-1937-yards":case"gold-coast-feet":case"sears-1922-truncated-chains":return"imperial";case"50-kilometers":case"150-kilometers":case"meters":return"metric";case null:case void 0:return null}return null}const B={esriAcres:"acres",esriAres:"ares",esriHectares:"hectares",esriSquareCentimeters:"square-centimeters",esriSquareDecimeters:"square-decimeters",esriSquareFeet:"square-feet",esriSquareInches:"square-inches",esriSquareKilometers:"square-kilometers",esriSquareMeters:"square-meters",esriSquareMiles:"square-miles",esriSquareMillimeters:"square-millimeters",esriSquareUsFeet:"square-us-feet",esriSquareYards:"square-yards"},L={esriCentimeters:"centimeters",esriDecimeters:"decimeters",esriFeet:"feet",esriInches:"inches",esriKilometers:"kilometers",esriMeters:"meters",esriMiles:"miles",esriMillimeters:"millimeters",esriNauticalMiles:"nautical-miles",esriYards:"yards"},H=Object(r.b)()(B),G=Object(r.b)()(L);Object(r.b)()({...B,...L})},122:function(e,t,i){"use strict";i.d(t,"a",(function(){return w})),i.d(t,"b",(function(){return p})),i.d(t,"c",(function(){return n})),i.d(t,"d",(function(){return j})),i.d(t,"e",(function(){return f})),i.d(t,"f",(function(){return b})),i.d(t,"g",(function(){return y})),i.d(t,"h",(function(){return m})),i.d(t,"i",(function(){return s})),i.d(t,"j",(function(){return v})),i.d(t,"k",(function(){return u})),i.d(t,"l",(function(){return l})),i.d(t,"m",(function(){return o})),i.d(t,"n",(function(){return a})),i.d(t,"o",(function(){return d})),i.d(t,"p",(function(){return g})),i.d(t,"q",(function(){return O})),i.d(t,"r",(function(){return c})),i.d(t,"s",(function(){return h}));i(79),i(88);var r=i(101);function s(e=x){return[e[0],e[1],e[2],e[3]]}function n(e){return[e[0],e[1],e[2],e[3]]}function a(e,t,i,r,n=s()){return n[0]=e,n[1]=t,n[2]=i,n[3]=r,n}function o(e,t=s()){return t[0]=e.xmin,t[1]=e.ymin,t[2]=e.xmax,t[3]=e.ymax,t}function c(e,t){return new r.a({xmin:e[0],ymin:e[1],xmax:e[2],ymax:e[3],spatialReference:t})}function u(e,t,i=e){if("length"in t)S(t)?(i[0]=Math.min(e[0],t[0]),i[1]=Math.min(e[1],t[1]),i[2]=Math.max(e[2],t[2]),i[3]=Math.max(e[3],t[3])):2!==t.length&&3!==t.length||(i[0]=Math.min(e[0],t[0]),i[1]=Math.min(e[1],t[1]),i[2]=Math.max(e[2],t[0]),i[3]=Math.max(e[3],t[1]));else switch(t.type){case"extent":i[0]=Math.min(e[0],t.xmin),i[1]=Math.min(e[1],t.ymin),i[2]=Math.max(e[2],t.xmax),i[3]=Math.max(e[3],t.ymax);break;case"point":i[0]=Math.min(e[0],t.x),i[1]=Math.min(e[1],t.y),i[2]=Math.max(e[2],t.x),i[3]=Math.max(e[3],t.y)}return i}function l(e,t,i=e){const r=t.length;let s=e[0],n=e[1],a=e[2],o=e[3];for(let c=0;c<r;c++){const e=t[c];s=Math.min(s,e[0]),n=Math.min(n,e[1]),a=Math.max(a,e[0]),o=Math.max(o,e[1])}return i[0]=s,i[1]=n,i[2]=a,i[3]=o,i}function h(e){return e[0]>=e[2]?0:e[2]-e[0]}function d(e){return e[1]>=e[3]?0:e[3]-e[1]}function p(e){return h(e)*d(e)}function f(e,t){return m(e,t[0],t[1])}function b(e,t){return m(e,t.x,t.y)}function m(e,t,i){return t>=e[0]&&i>=e[1]&&t<=e[2]&&i<=e[3]}function y(e,t,i){return t[0]>=e[0]-i&&t[1]>=e[1]-i&&t[0]<=e[2]+i&&t[1]<=e[3]+i}function g(e,t){return Math.max(t[0],e[0])<=Math.min(t[2],e[2])&&Math.max(t[1],e[1])<=Math.min(t[3],e[3])}function j(e,t){return t[0]>=e[0]&&t[2]<=e[2]&&t[1]>=e[1]&&t[3]<=e[3]}function O(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e}function v(e){return e?O(e,w):s(w)}function S(e){return 4===e.length}const w=[1/0,1/0,-1/0,-1/0],x=[0,0,0,0]},1233:function(e,t,i){"use strict";i.r(t),i.d(t,"FeatureServiceSnappingSourceWorker",(function(){return Q}));var r=i(81),s=(i(79),i(88)),n=i(80),a=(i(87),i(84)),o=i(83),c=(i(82),i(85),i(86),i(92)),u=i(97),l=i(128),h=i(113),d=i(106),p=i(236),f=i(129),b=i(294),m=i(333),y=i(873),g=i(763),j=i(214),O=i(206),v=i(101),S=i(122),w=i(165),x=i(369),_=i(187),T=i(95);let F=class extends T.a{constructor(){super(...arguments),this.updating=!1,this.pending=[]}push(e,t){this.pending.push({promise:e,callback:t}),1===this.pending.length&&this.process()}process(){if(!this.pending.length)return void(this.updating=!1);this.updating=!0;const e=this.pending[0];e.promise.then((t=>e.callback(t))).catch((()=>{})).then((()=>{this.pending.shift(),this.process()}))}};Object(r.a)([Object(a.b)()],F.prototype,"updating",void 0),F=Object(r.a)([Object(o.a)("esri.core.AsyncSequence")],F);var M=i(164),I=i(198);class R{constructor(e,t){this.data=e,this.resolution=t,this.state={type:0},this.alive=!0}process(e){switch(this.state.type){case 0:return this.state=this.gotoFetchCount(this.state,e),this.state.task.promise.then(e.resume,e.resume);case 1:break;case 2:return this.state=this.gotoFetchFeatures(this.state,e),this.state.task.promise.then(e.resume,e.resume);case 3:break;case 4:this.state=this.goToDone(this.state,e)}return null}get debugInfo(){return{data:this.data,featureCount:this.featureCount,state:this.stateToString}}get featureCount(){switch(this.state.type){case 0:case 1:return 0;case 2:return this.state.featureCount;case 3:return this.state.previous.featureCount;case 4:return this.state.features.length;case 5:return this.state.previous.features.length}}get stateToString(){switch(this.state.type){case 0:return"created";case 1:return"fetch-count";case 2:return"fetched-count";case 3:return"fetch-features";case 4:return"fetched-features";case 5:return"done"}}gotoFetchCount(e,t){return{type:1,previous:e,task:Object(c.h)((async e=>{const i=await Object(I.d)(t.fetchCount(this,e));1===this.state.type&&(this.state=this.gotoFetchedCount(this.state,i.ok?i.value:1/0))}))}}gotoFetchedCount(e,t){return{type:2,featureCount:t,previous:e}}gotoFetchFeatures(e,t){return{type:3,previous:e,task:Object(c.h)((async i=>{const r=await Object(I.d)(t.fetchFeatures(this,e.featureCount,i));3===this.state.type&&(this.state=this.gotoFetchedFeatures(this.state,r.ok?r.value:[]))}))}}gotoFetchedFeatures(e,t){return{type:4,previous:e,features:t}}goToDone(e,t){return t.finish(this,e.features),{type:5,previous:e}}reset(){const e=this.state;switch(this.state={type:0},e.type){case 0:case 2:case 4:case 5:break;case 1:case 3:e.task.abort()}}intersects(e){return!(!Object(s.j)(e)&&this.data.extent)||(Object(S.m)(e,P),Object(S.p)(this.data.extent,P))}}const P=Object(S.i)(),E=n.a.getLogger("esri.views.interactive.snapping.featureSources.featureServiceSource.FeatureServiceTiledFetcher");let C=class extends M.a{constructor(e){super(e),this.tilesOfInterest=[],this.availability=0,this.pendingTiles=new Map,this.pendingEdits=new F,this.pendingEditsAbortController=Object(c.d)()}get minimumVerticesPerFeature(){var e;switch(null==(e=this.store)?void 0:e.featureStore.geometryType){case"esriGeometryPoint":case"esriGeometryMultipoint":return 1;case"esriGeometryPolygon":return 4;case"esriGeometryPolyline":return 2}}set filter(e){const t=this._get("filter"),i=this.filterProperties(e);JSON.stringify(t)!==JSON.stringify(i)&&this._set("filter",i)}set customParameters(e){const t=this._get("customParameters");JSON.stringify(t)!==JSON.stringify(e)&&this._set("customParameters",e)}get configuration(){return{filter:this.filter,customParameters:this.customParameters,tileInfo:this.tileInfo,tileSize:this.tileSize}}set tileInfo(e){const t=this._get("tileInfo");t!==e&&(Object(s.k)(e)&&Object(s.k)(t)&&JSON.stringify(e)===JSON.stringify(t)||(this._set("tileInfo",e),this.store.tileInfo=e))}set tileSize(e){this._get("tileSize")!==e&&this._set("tileSize",e)}get updating(){return this.updatingHandles.updating||this.pendingEdits.updating}initialize(){this.initializeFetchExtent(),this.updatingHandles.add(this,"configuration",(()=>this.refresh())),this.updatingHandles.add(this,"tilesOfInterest",((e,t)=>{Object(O.c)(e,t,(({id:e},{id:t})=>e===t))||this.process()}),1)}destroy(){this.pendingTiles.forEach((e=>this.deletePendingTile(e))),this.pendingTiles.clear(),this.store.destroy(),this.tilesOfInterest.length=0,this.pendingEditsAbortController.abort(),this.pendingEditsAbortController=null}refresh(){this.store.refresh(),this.pendingTiles.forEach((e=>this.deletePendingTile(e))),this.process()}applyEdits(e){this.pendingEdits.push(e,(async e=>{if(0!==e.addedFeatures.length||0!==e.updatedFeatures.length||0!==e.deletedFeatures.length){for(const[,e]of this.pendingTiles)e.reset();await this.updatingHandles.addPromise(this.store.processEdits(e,((e,t)=>this.queryFeaturesById(e,t)),this.pendingEditsAbortController.signal)),this.processPendingTiles()}}))}initializeFetchExtent(){if(!this.capabilities.query.supportsExtent)return;const e=Object(c.h)((async e=>{try{var t;const i=await Object(_.executeQueryForExtent)(this.url,new f.a({where:"1=1",outSpatialReference:this.spatialReference,cacheHint:!!this.capabilities.query.supportsCacheHint||void 0}),{query:this.configuration.customParameters,signal:e});this.store.extent=v.a.fromJSON(null==(t=i.data)?void 0:t.extent)}catch(i){Object(c.t)(i),E.error("Failed to fetch data extent",i)}}));this.updatingHandles.addPromise(e.promise.then((()=>this.process()))),this.handles.add(Object(j.c)((()=>e.abort()))),this.fetchExtentTask=e}get debugInfo(){return{numberOfFeatures:this.store.featureStore.numFeatures,tilesOfInterest:this.tilesOfInterest,pendingTiles:Array.from(this.pendingTiles.values()).map((e=>e.debugInfo)),storedTiles:this.store.debugInfo}}process(){!Object(s.k)(this.fetchExtentTask)||this.fetchExtentTask.finished?(this.markTilesNotAlive(),this.createPendingTiles(),this.deletePendingTiles(),this.processPendingTiles()):this.setAvailability(0)}markTilesNotAlive(){for(const[,e]of this.pendingTiles)e.alive=!1}createPendingTiles(){const e=this.collectMissingTilesInfo();if(this.setAvailability(Object(s.j)(e)?1:e.coveredArea/e.fullArea),!Object(s.j)(e))for(const{data:t,resolution:i}of e.missingTiles){const e=this.pendingTiles.get(t.id);e?(e.resolution=i,e.alive=!0):this.createPendingTile(t,i)}}collectMissingTilesInfo(){let e=null;for(let t=this.tilesOfInterest.length-1;t>=0;t--){const i=this.tilesOfInterest[t],r=this.store.process(i,((e,t)=>this.verifyTileComplexity(e,t)));Object(s.j)(e)?e=r:e.prepend(r)}return e}deletePendingTiles(){for(const[,e]of this.pendingTiles)e.alive||this.deletePendingTile(e)}processPendingTiles(){const e={fetchCount:(e,t)=>this.fetchCount(e,t),fetchFeatures:(e,t,i)=>this.fetchFeatures(e,t,i),finish:(e,t)=>this.finishPendingTile(e,t),resume:()=>this.processPendingTiles()};if(this.ensureFetchAllCounts(e))for(const[,t]of this.pendingTiles)this.verifyTileComplexity(this.store.getFeatureCount(t.data),t.resolution)&&this.updatingHandles.addPromise(t.process(e))}verifyTileComplexity(e,t){return this.verifyVertexComplexity(e)&&this.verifyFeatureDensity(e,t)}verifyVertexComplexity(e){return e*this.minimumVerticesPerFeature<A}verifyFeatureDensity(e,t){if(Object(s.j)(this.tileInfo))return!1;const i=this.tileSize*t;return e*(q/(i*i))<D}ensureFetchAllCounts(e){let t=!0;for(const[,i]of this.pendingTiles)i.state.type<2&&this.updatingHandles.addPromise(i.process(e)),i.state.type<=1&&(t=!1);return t}finishPendingTile(e,t){this.store.add(e.data,t),this.deletePendingTile(e),this.updateAvailability()}updateAvailability(){const e=this.collectMissingTilesInfo();this.setAvailability(Object(s.j)(e)?1:e.coveredArea/e.fullArea)}setAvailability(e){this._set("availability",e)}createPendingTile(e,t){const i=new R(e,t);return this.pendingTiles.set(e.id,i),i}deletePendingTile(e){e.reset(),this.pendingTiles.delete(e.data.id)}async fetchCount(e,t){return this.store.fetchCount(e.data,this.url,this.createCountQuery(e),{query:this.customParameters,timeout:k,signal:t})}async fetchFeatures(e,t,i){let r,n=0,a=0,o=t;for(;;){const c=this.createFeaturesQuery(e),u=this.setPagingParameters(c,n,o),{features:l,exceededTransferLimit:h}=await this.queryFeatures(c,i);if(u&&(n+=Object(s.q)(c.num)),a+=l.length,r=r?r.concat(l):l,o=t-a,!u||!h||o<=0)return r}}filterProperties(e){return Object(s.j)(e)?{where:"1=1",gdbVersion:void 0,timeExtent:void 0}:{where:e.where||"1=1",timeExtent:e.timeExtent,gdbVersion:e.gdbVersion}}queryFeaturesById(e,t){const i=this.createFeaturesQuery(null);return i.objectIds=e,this.queryFeatures(i,t)}queryFeatures(e,t){return this.capabilities.query.supportsFormatPBF?this.queryFeaturesPBF(e,t):this.queryFeaturesJSON(e,t)}async queryFeaturesPBF(e,t){const{sourceSpatialReference:i}=this,{data:r}=await Object(_.executeQueryPBF)(this.url,e,new x.b({sourceSpatialReference:i}),{query:this.configuration.customParameters,timeout:k,signal:t});return Object(w.y)(r)}async queryFeaturesJSON(e,t){const{sourceSpatialReference:i}=this,{data:r}=await Object(_.executeQuery)(this.url,e,i,{query:this.configuration.customParameters,timeout:k,signal:t});return Object(w.b)(r,this.objectIdField)}createCountQuery(e){const t=this.createBaseQuery(e);return this.capabilities.query.supportsCacheHint&&(t.cacheHint=!0),t}createFeaturesQuery(e){const t=this.createBaseQuery(e);return t.outFields=[this.objectIdField],t.returnGeometry=!0,Object(s.k)(e)&&(this.capabilities.query.supportsResultType?t.resultType="tile":this.capabilities.query.supportsCacheHint&&(t.cacheHint=!0)),t}createBaseQuery(e){const t=new f.a({returnZ:!1,returnM:!1,geometry:Object(s.k)(this.tileInfo)&&Object(s.k)(e)?Object(S.r)(e.data.extent,this.tileInfo.spatialReference):void 0}),i=this.configuration.filter;return Object(s.k)(i)&&(t.where=i.where,t.gdbVersion=i.gdbVersion,t.timeExtent=i.timeExtent),t.outSpatialReference=this.spatialReference,t}setPagingParameters(e,t,i){if(!this.capabilities.query.supportsPagination)return!1;const{supportsMaxRecordCountFactor:r,supportsCacheHint:s,tileMaxRecordCount:n,maxRecordCount:a,supportsResultType:o}=this.capabilities.query,c=r?f.a.MAX_MAX_RECORD_COUNT_FACTOR:1,u=c*((o||s)&&n?n:a||z);return e.start=t,r?(e.maxRecordCountFactor=Math.min(c,Math.ceil(i/u)),e.num=Math.min(i,e.maxRecordCountFactor*u)):e.num=Math.min(i,u),!0}};Object(r.a)([Object(a.b)({constructOnly:!0})],C.prototype,"url",void 0),Object(r.a)([Object(a.b)({constructOnly:!0})],C.prototype,"objectIdField",void 0),Object(r.a)([Object(a.b)({constructOnly:!0})],C.prototype,"capabilities",void 0),Object(r.a)([Object(a.b)({constructOnly:!0})],C.prototype,"sourceSpatialReference",void 0),Object(r.a)([Object(a.b)({constructOnly:!0})],C.prototype,"spatialReference",void 0),Object(r.a)([Object(a.b)({constructOnly:!0})],C.prototype,"store",void 0),Object(r.a)([Object(a.b)({readOnly:!0})],C.prototype,"minimumVerticesPerFeature",null),Object(r.a)([Object(a.b)()],C.prototype,"filter",null),Object(r.a)([Object(a.b)()],C.prototype,"customParameters",null),Object(r.a)([Object(a.b)({readOnly:!0})],C.prototype,"configuration",null),Object(r.a)([Object(a.b)()],C.prototype,"tileInfo",null),Object(r.a)([Object(a.b)()],C.prototype,"tileSize",null),Object(r.a)([Object(a.b)()],C.prototype,"tilesOfInterest",void 0),Object(r.a)([Object(a.b)({readOnly:!0})],C.prototype,"updating",null),Object(r.a)([Object(a.b)({readOnly:!0})],C.prototype,"availability",void 0),C=Object(r.a)([Object(o.a)("esri.views.interactive.snapping.featureSources.featureServiceSource.FeatureServiceTiledFetcher")],C);const z=2e3,k=6e5,A=1e6,q=25,D=1;var N=i(595),U=i(1079);class B{constructor(){this._store=new Map,this._byteSize=0}set(e,t){this.delete(e),this._store.set(e,t),this._byteSize+=t.byteSize}delete(e){const t=this._store.get(e);return!!this._store.delete(e)&&(this._byteSize-=t.byteSize,!0)}get(e){return this.used(e),this._store.get(e)}has(e){return this.used(e),this._store.has(e)}clear(){this._store.clear()}applyByteSizeLimit(e,t){for(const[i,r]of this._store){if(this._byteSize<=e)break;this.delete(i),t(r)}}values(){return this._store.values()}[Symbol.iterator](){return this._store[Symbol.iterator]()}used(e){const t=this._store.get(e);t&&(this._store.delete(e),this._store.set(e,t))}}let L=class extends T.a{constructor(e){super(e),this.tileInfo=null,this.extent=null,this.maximumByteSize=10485760,this.tileBounds=new U.a,this.tiles=new B,this.refCounts=new Map,this.tileFeatureCounts=new Map,this.tmpBoundingRect=Object(S.i)()}add(e,t){const i=[];for(const r of t)0===this.referenceFeature(r.objectId)&&i.push(r);this.addTileStorage(e,new Set(t.map((({objectId:e})=>e))),this.byteSizeOfFeatures(t)),this.featureStore.addMany(i),this.tiles.applyByteSizeLimit(this.maximumByteSize,(e=>this.removeTileStorage(e)))}destroy(){this.clear(),this.tileFeatureCounts.clear()}clear(){this.featureStore.clear(),this.tileBounds.clear(),this.tiles.clear(),this.refCounts.clear()}refresh(){this.clear(),this.tileFeatureCounts.clear()}processEdits(e,t,i){return this.processEditsDelete(e.deletedFeatures.concat(e.updatedFeatures)),this.processEditsRefetch(e.addedFeatures.concat(e.updatedFeatures),t,i)}addTileStorage(e,t,i){this.tiles.set(e.id,new H(e,t,i)),this.tileBounds.set(e.id,e.extent),this.tileFeatureCounts.set(e.id,t.size)}remove({id:e}){const t=this.tiles.get(e);t&&this.removeTileStorage(t)}removeTileStorage(e){const t=[];for(const r of e.objectIds)1===this.unreferenceFeature(r)&&t.push(r);this.featureStore.removeManyById(t);const i=e.data.id;this.tiles.delete(i),this.tileBounds.delete(i)}processEditsDelete(e){this.featureStore.removeManyById(e);for(const[,t]of this.tiles){for(const i of e)t.objectIds.delete(i);this.tileFeatureCounts.set(t.data.id,t.objectIds.size)}for(const t of e)this.refCounts.delete(t)}async processEditsRefetch(e,t,i){const r=(await t(e,i)).features,{hasZ:s,hasM:n}=this.featureStore;for(const a of r){const e=Object(w.r)(this.tmpBoundingRect,a.geometry,s,n);this.tileBounds.forEachInBounds(e,(e=>{const t=this.tiles.get(e);this.featureStore.add(a),t.objectIds.has(a.objectId)||(t.objectIds.add(a.objectId),this.referenceFeature(a.objectId),this.tileFeatureCounts.set(t.data.id,t.objectIds.size))}))}}process(e,t=(()=>!0)){if(Object(s.j)(this.tileInfo)||!e.extent||Object(s.k)(this.extent)&&!Object(S.p)(Object(S.m)(this.extent,this.tmpBoundingRect),e.extent))return new V(e);if(this.tiles.has(e.id))return new V(e);const i=this.createTileTree(e,this.tileInfo);return this.simplify(i,t,null,0,1),this.collectMissingTiles(e,i,this.tileInfo)}get debugInfo(){return Array.from(this.tiles.values()).map((({data:e})=>({data:e,featureCount:this.tileFeatureCounts.get(e.id)||0})))}getFeatureCount(e){const t=this.tileFeatureCounts.get(e.id);return null!=t?t:0}async fetchCount(e,t,i,r){const s=this.tileFeatureCounts.get(e.id);if(null!=s)return s;const n=await Object(_.executeQueryForCount)(t,i,r);return this.tileFeatureCounts.set(e.id,n.data.count),n.data.count}createTileTree(e,t){const i=new G(e.level,e.row,e.col);return t.updateTileInfo(i,1),this.tileBounds.forEachInBounds(e.extent,(r=>{const s=this.tiles.get(r).data;this.tilesAreRelated(e,s)&&this.populateChildren(i,s,t,this.tileFeatureCounts.get(s.id)||0)})),i}tilesAreRelated(e,t){if(!e||!t)return!1;if(e.level===t.level)return e.row===t.row&&e.col===t.col;const i=e.level<t.level,r=i?e:t,s=i?t:e,n=1<<s.level-r.level;return Math.floor(s.row/n)===r.row&&Math.floor(s.col/n)===r.col}populateChildren(e,t,i,r){const n=t.level-e.level-1;if(n<0)return void(e.isLeaf=!0);const a=t.row>>n,o=t.col>>n,c=e.row<<1,u=o-(e.col<<1)+(a-c<<1),l=e.children[u];if(Object(s.k)(l))this.populateChildren(l,t,i,r);else{const s=new G(e.level+1,a,o);i.updateTileInfo(s,1),e.children[u]=s,this.populateChildren(s,t,i,r)}}simplify(e,t,i,r,n){const a=n*n;if(e.isLeaf)return t(this.getFeatureCount(e),n)?0:(this.remove(e),Object(s.k)(i)&&(i.children[r]=null),a);const o=n/2,c=o*o;let u=0;for(let l=0;l<e.children.length;l++){const i=e.children[l];u+=Object(s.k)(i)?this.simplify(i,t,e,l,o):c}return 0===u?this.mergeChildren(e):1-u/a<Y&&(this.purge(e),Object(s.k)(i)&&(i.children[r]=null),u=a),u}mergeChildren(e){const t=new Set;let i=0;this.forEachLeaf(e,(e=>{const r=this.tiles.get(e.id);if(r){i+=r.byteSize;for(const e of r.objectIds)t.has(e)||(t.add(e),this.referenceFeature(e));this.remove(e)}})),this.addTileStorage(e,t,i),e.isLeaf=!0,e.children[0]=e.children[1]=e.children[2]=e.children[3]=null,this.tileFeatureCounts.set(e.id,t.size)}forEachLeaf(e,t){for(const i of e.children)Object(s.j)(i)||(i.isLeaf?t(i):this.forEachLeaf(i,t))}purge(e){if(!Object(s.j)(e))if(e.isLeaf)this.remove(e);else for(let t=0;t<e.children.length;t++){const i=e.children[t];this.purge(i),e.children[t]=null}}collectMissingTiles(e,t,i){const r=new J(i,e,this.extent);return this.collectMissingTilesRecurse(t,r,1),r.info}collectMissingTilesRecurse(e,t,i){if(e.isLeaf)return;if(!e.hasChildren)return void t.addMissing(e.level,e.row,e.col,i);const r=i/2;for(let n=0;n<e.children.length;n++){const i=e.children[n];Object(s.j)(i)?t.addMissing(e.level+1,(e.row<<1)+((2&n)>>1),(e.col<<1)+(1&n),r):this.collectMissingTilesRecurse(i,t,r)}}referenceFeature(e){const t=(this.refCounts.get(e)||0)+1;return this.refCounts.set(e,t),1===t?0:2}unreferenceFeature(e){const t=(this.refCounts.get(e)||0)-1;return 0===t?(this.refCounts.delete(e),1):(t>0&&this.refCounts.set(e,t),2)}byteSizeOfFeatures(e){let t=0;for(const i of e)t+=this.byteSizeOfFeature(i);return t}byteSizeOfFeature(e){return 32+this.byteSizeOfGeometry(e.geometry)+Object(N.a)(e.attributes)}byteSizeOfGeometry(e){if(!e)return 0;const t=Object(N.b)(e.lengths,4);return 32+Object(N.b)(e.coords,8)+t}get test(){return{tiles:Array.from(this.tiles.values()).map((e=>`${e.data.id}:[${Array.from(e.objectIds)}]`)),featureReferences:Array.from(this.refCounts.keys()).map((e=>`${e}:${this.refCounts.get(e)}`))}}};Object(r.a)([Object(a.b)({constructOnly:!0})],L.prototype,"featureStore",void 0),Object(r.a)([Object(a.b)()],L.prototype,"tileInfo",void 0),Object(r.a)([Object(a.b)()],L.prototype,"extent",void 0),Object(r.a)([Object(a.b)()],L.prototype,"maximumByteSize",void 0),L=Object(r.a)([Object(o.a)("esri.views.interactive.snapping.featureSources.featureServiceSource.FeatureServiceTileStore")],L);class H{constructor(e,t,i){this.data=e,this.objectIds=t,this.byteSize=i}}class G{constructor(e,t,i){this.level=e,this.row=t,this.col=i,this.isLeaf=!1,this.extent=null,this.children=[null,null,null,null]}get hasChildren(){return!this.isLeaf&&(Object(s.k)(this.children[0])||Object(s.k)(this.children[1])||Object(s.k)(this.children[2])||Object(s.k)(this.children[3]))}}class V{constructor(e,t=[]){this.missingTiles=t,this.fullArea=0,this.coveredArea=0,this.fullArea=Object(S.b)(e.extent),this.coveredArea=this.fullArea}prepend(e){this.missingTiles=e.missingTiles.concat(this.missingTiles),this.coveredArea+=e.coveredArea,this.fullArea+=e.fullArea}}class J{constructor(e,t,i){this.tileInfo=e,this.extent=null,this.info=new V(t),Object(s.k)(i)&&(this.extent=Object(S.m)(i))}addMissing(e,t,i,r){const n={id:null,level:e,row:t,col:i};this.tileInfo.updateTileInfo(n,1),!Object(s.k)(n.extent)||Object(s.k)(this.extent)&&!Object(S.p)(this.extent,n.extent)||(this.info.missingTiles.push({data:n,resolution:r}),this.info.coveredArea-=Object(S.b)(n.extent))}}const Y=.18751;let Q=class extends l.a.EventedAccessor{constructor(){super(...arguments),this.isInitializing=!0,this.whenSetup=Object(c.f)(),this.handles=new h.a,this.updatingHandles=new b.a,this.pendingApplyEdits=new Map}get updating(){return this.featureFetcher.updating||this.isInitializing||this.updatingHandles.updating}destroy(){this.featureFetcher.destroy(),this.queryEngine.destroy(),this.featureStore.clear(),this.handles.destroy()}async setup(e){const{geometryType:t,objectIdField:i,timeInfo:r,fields:s}=e.serviceInfo;return this.featureStore=new y.a({...e.serviceInfo,hasZ:!1,hasM:!1}),this.queryEngine=new g.a({spatialReference:e.spatialReference,featureStore:this.featureStore,geometryType:t,fields:s,hasZ:!1,hasM:!1,objectIdField:i,timeInfo:r?p.a.fromJSON(r):null}),this.featureFetcher=new C({store:new L({featureStore:this.featureStore}),url:e.serviceInfo.url,objectIdField:e.serviceInfo.objectIdField,capabilities:e.serviceInfo.capabilities,spatialReference:u.a.fromJSON(e.spatialReference),sourceSpatialReference:u.a.fromJSON(e.serviceInfo.spatialReference)}),this.handles.add([this.featureFetcher.watch("availability",(e=>this.emit("notify-availability",{availability:e})),!0),this.watch("updating",(()=>this.notifyUpdating()))]),this.whenSetup.resolve(),this.isInitializing=!1,this.configure(e.configuration)}async configure(e){return await this.updatingHandles.addPromise(this.whenSetup.promise),this.updateFeatureFetcherConfiguration(e),{result:{}}}async fetchCandidates(e,t){return await this.whenSetup.promise,Object(c.u)(t),{result:await this.queryEngine.executeQueryForSnapping({point:e.point,distance:e.distance,types:e.types,query:Object(s.k)(e.filter)?e.filter:{where:"1=1"}},Object(s.k)(t)?t.signal:null)}}async updateTiles(e,t){return await this.updatingHandles.addPromise(this.whenSetup.promise),Object(c.u)(t),this.featureFetcher.tileSize=e.tileSize,this.featureFetcher.tilesOfInterest=e.tiles,this.featureFetcher.tileInfo=Object(s.k)(e.tileInfo)?m.a.fromJSON(e.tileInfo):null,{result:{}}}async refresh(e,t){return await this.updatingHandles.addPromise(this.whenSetup.promise),Object(c.u)(t),this.featureFetcher.refresh(),{result:{}}}async whenNotUpdating(e,t){return await this.updatingHandles.addPromise(this.whenSetup.promise),Object(c.u)(t),await Object(c.x)(Object(d.i)(this,"updating"),t),{result:{}}}async getDebugInfo(e,t){return Object(c.u)(t),{result:this.featureFetcher.debugInfo}}async beginApplyEdits(e,t){this.updatingHandles.addPromise(this.whenSetup.promise),Object(c.u)(t);const i=Object(c.f)();return this.pendingApplyEdits.set(e.id,i),this.featureFetcher.applyEdits(i.promise),this.updatingHandles.addPromise(i.promise),{result:{}}}async endApplyEdits(e,t){const i=this.pendingApplyEdits.get(e.id);return i&&i.resolve(e.edits),Object(c.u)(t),{result:{}}}updateFeatureFetcherConfiguration(e){this.featureFetcher.filter=Object(s.k)(e.filter)?f.a.fromJSON(e.filter):null,this.featureFetcher.customParameters=e.customParameters}notifyUpdating(){this.emit("notify-updating",{updating:this.updating})}};Object(r.a)([Object(a.b)({readOnly:!0})],Q.prototype,"updating",null),Object(r.a)([Object(a.b)()],Q.prototype,"isInitializing",void 0),Q=Object(r.a)([Object(o.a)("esri.views.interactive.snapping.featureSources.featureServiceSource.FeatureServiceSnappingSourceWorker")],Q);t.default=function(){return new Q}},129:function(e,t,i){"use strict";var r,s=i(81),n=(i(79),i(90)),a=i(88),o=(i(80),i(87)),c=i(84),u=i(114),l=i(93),h=i(83),d=i(94),p=(i(82),i(85),i(86),i(89)),f=i(97),b=i(111),m=i(98),y=i(99),g=i(147),j=i(167),O=i(247),v=i(243);const S=new l.a({esriSpatialRelIntersects:"intersects",esriSpatialRelContains:"contains",esriSpatialRelCrosses:"crosses",esriSpatialRelDisjoint:"disjoint",esriSpatialRelEnvelopeIntersects:"envelope-intersects",esriSpatialRelIndexIntersects:"index-intersects",esriSpatialRelOverlaps:"overlaps",esriSpatialRelTouches:"touches",esriSpatialRelWithin:"within",esriSpatialRelRelation:"relation"}),w=new l.a({esriSRUnit_Meter:"meters",esriSRUnit_Kilometer:"kilometers",esriSRUnit_Foot:"feet",esriSRUnit_StatuteMile:"miles",esriSRUnit_NauticalMile:"nautical-miles",esriSRUnit_USNauticalMile:"us-nautical-miles"});let x=r=class extends p.a{constructor(e){super(e),this.aggregateIds=null,this.cacheHint=void 0,this.datumTransformation=null,this.distance=void 0,this.dynamicDataSource=void 0,this.gdbVersion=null,this.geometry=null,this.geometryPrecision=void 0,this.groupByFieldsForStatistics=null,this.having=null,this.historicMoment=null,this.maxAllowableOffset=void 0,this.maxRecordCountFactor=1,this.multipatchOption=null,this.num=void 0,this.objectIds=null,this.orderByFields=null,this.outFields=null,this.outSpatialReference=null,this.outStatistics=null,this.parameterValues=null,this.pixelSize=null,this.quantizationParameters=null,this.rangeValues=null,this.relationParameter=null,this.resultType=null,this.returnCentroid=!1,this.returnDistinctValues=!1,this.returnExceededLimitFeatures=!0,this.returnGeometry=!1,this.returnQueryGeometry=!1,this.returnM=void 0,this.returnZ=void 0,this.sourceSpatialReference=null,this.spatialRelationship="intersects",this.start=void 0,this.sqlFormat=null,this.text=null,this.timeExtent=null,this.units=null,this.where=null}static from(e){return Object(o.d)(r,e)}castDatumTransformation(e){return"number"==typeof e||"object"==typeof e?e:null}writeHistoricMoment(e,t){t.historicMoment=e&&e.getTime()}writeParameterValues(e,t){if(e){const i={};for(const t in e){const r=e[t];Array.isArray(r)?i[t]=r.map((e=>e instanceof Date?e.getTime():e)):r instanceof Date?i[t]=r.getTime():i[t]=r}t.parameterValues=i}}writeStart(e,t){t.resultOffset=this.start,t.resultRecordCount=this.num||10,t.where="1=1"}writeWhere(e,t){t.where=e||"1=1"}clone(){return new r(Object(n.a)({aggregateIds:this.aggregateIds,cacheHint:this.cacheHint,datumTransformation:this.datumTransformation,distance:this.distance,gdbVersion:this.gdbVersion,geometry:this.geometry,geometryPrecision:this.geometryPrecision,groupByFieldsForStatistics:this.groupByFieldsForStatistics,having:this.having,historicMoment:Object(a.k)(this.historicMoment)?new Date(this.historicMoment.getTime()):null,maxAllowableOffset:this.maxAllowableOffset,maxRecordCountFactor:this.maxRecordCountFactor,multipatchOption:this.multipatchOption,num:this.num,objectIds:this.objectIds,orderByFields:this.orderByFields,outFields:this.outFields,outSpatialReference:this.outSpatialReference,outStatistics:this.outStatistics,parameterValues:this.parameterValues,pixelSize:this.pixelSize,quantizationParameters:this.quantizationParameters,rangeValues:this.rangeValues,relationParameter:this.relationParameter,resultType:this.resultType,returnDistinctValues:this.returnDistinctValues,returnGeometry:this.returnGeometry,returnCentroid:this.returnCentroid,returnExceededLimitFeatures:this.returnExceededLimitFeatures,returnQueryGeometry:this.returnQueryGeometry,returnM:this.returnM,returnZ:this.returnZ,dynamicDataSource:this.dynamicDataSource,sourceSpatialReference:this.sourceSpatialReference,spatialRelationship:this.spatialRelationship,start:this.start,sqlFormat:this.sqlFormat,text:this.text,timeExtent:this.timeExtent,units:this.units,where:this.where}))}};x.MAX_MAX_RECORD_COUNT_FACTOR=5,Object(s.a)([Object(c.b)({json:{write:!0}})],x.prototype,"aggregateIds",void 0),Object(s.a)([Object(c.b)({type:Boolean,json:{write:{writer:(e,t)=>{null!=e&&(t.cacheHint=e)}}}})],x.prototype,"cacheHint",void 0),Object(s.a)([Object(c.b)({json:{write:!0}})],x.prototype,"datumTransformation",void 0),Object(s.a)([Object(u.a)("datumTransformation")],x.prototype,"castDatumTransformation",null),Object(s.a)([Object(c.b)({type:Number,json:{write:{overridePolicy:e=>({enabled:e>0})}}})],x.prototype,"distance",void 0),Object(s.a)([Object(c.b)({type:j.a,json:{write:!0}})],x.prototype,"dynamicDataSource",void 0),Object(s.a)([Object(c.b)({type:String,json:{write:!0}})],x.prototype,"gdbVersion",void 0),Object(s.a)([Object(c.b)({types:y.a,json:{read:m.a,write:!0}})],x.prototype,"geometry",void 0),Object(s.a)([Object(c.b)({type:Number,json:{write:!0}})],x.prototype,"geometryPrecision",void 0),Object(s.a)([Object(c.b)({type:[String],json:{write:!0}})],x.prototype,"groupByFieldsForStatistics",void 0),Object(s.a)([Object(c.b)({type:String,json:{write:!0}})],x.prototype,"having",void 0),Object(s.a)([Object(c.b)({type:Date})],x.prototype,"historicMoment",void 0),Object(s.a)([Object(d.a)("historicMoment")],x.prototype,"writeHistoricMoment",null),Object(s.a)([Object(c.b)({type:Number,json:{write:!0}})],x.prototype,"maxAllowableOffset",void 0),Object(s.a)([Object(c.b)({type:Number,cast:e=>e<1?1:e>r.MAX_MAX_RECORD_COUNT_FACTOR?r.MAX_MAX_RECORD_COUNT_FACTOR:e,json:{write:{overridePolicy:e=>({enabled:e>1})}}})],x.prototype,"maxRecordCountFactor",void 0),Object(s.a)([Object(c.b)({type:String,json:{write:!0}})],x.prototype,"multipatchOption",void 0),Object(s.a)([Object(c.b)({type:Number,json:{read:{source:"resultRecordCount"}}})],x.prototype,"num",void 0),Object(s.a)([Object(c.b)({json:{write:!0}})],x.prototype,"objectIds",void 0),Object(s.a)([Object(c.b)({type:[String],json:{write:!0}})],x.prototype,"orderByFields",void 0),Object(s.a)([Object(c.b)({type:[String],json:{write:!0}})],x.prototype,"outFields",void 0),Object(s.a)([Object(c.b)({type:f.a,json:{read:{source:"outSR"},write:{target:"outSR"}}})],x.prototype,"outSpatialReference",void 0),Object(s.a)([Object(c.b)({type:[v.a],json:{write:{enabled:!0,overridePolicy(){return{enabled:Object(a.k)(this.outStatistics)&&this.outStatistics.length>0}}}}})],x.prototype,"outStatistics",void 0),Object(s.a)([Object(c.b)({json:{write:!0}})],x.prototype,"parameterValues",void 0),Object(s.a)([Object(d.a)("parameterValues")],x.prototype,"writeParameterValues",null),Object(s.a)([Object(c.b)({type:b.a,json:{write:!0}})],x.prototype,"pixelSize",void 0),Object(s.a)([Object(c.b)({type:O.a,json:{write:!0}})],x.prototype,"quantizationParameters",void 0),Object(s.a)([Object(c.b)({type:[Object],json:{write:!0}})],x.prototype,"rangeValues",void 0),Object(s.a)([Object(c.b)({type:String,json:{read:{source:"relationParam"},write:{target:"relationParam",overridePolicy(){return{enabled:"relation"===this.spatialRelationship}}}}})],x.prototype,"relationParameter",void 0),Object(s.a)([Object(c.b)({type:String,json:{write:!0}})],x.prototype,"resultType",void 0),Object(s.a)([Object(c.b)({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],x.prototype,"returnCentroid",void 0),Object(s.a)([Object(c.b)({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],x.prototype,"returnDistinctValues",void 0),Object(s.a)([Object(c.b)({type:Boolean,json:{write:{overridePolicy:e=>({enabled:!e})}}})],x.prototype,"returnExceededLimitFeatures",void 0),Object(s.a)([Object(c.b)({type:Boolean,json:{write:!0}})],x.prototype,"returnGeometry",void 0),Object(s.a)([Object(c.b)({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],x.prototype,"returnQueryGeometry",void 0),Object(s.a)([Object(c.b)({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],x.prototype,"returnM",void 0),Object(s.a)([Object(c.b)({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],x.prototype,"returnZ",void 0),Object(s.a)([Object(c.b)({type:f.a,json:{write:!0}})],x.prototype,"sourceSpatialReference",void 0),Object(s.a)([Object(c.b)({type:String,json:{read:{source:"spatialRel",reader:S.read},write:{target:"spatialRel",writer:S.write}}})],x.prototype,"spatialRelationship",void 0),Object(s.a)([Object(c.b)({type:Number,json:{read:{source:"resultOffset"}}})],x.prototype,"start",void 0),Object(s.a)([Object(d.a)("start"),Object(d.a)("num")],x.prototype,"writeStart",null),Object(s.a)([Object(c.b)({type:String,json:{write:!0}})],x.prototype,"sqlFormat",void 0),Object(s.a)([Object(c.b)({type:String,json:{write:!0}})],x.prototype,"text",void 0),Object(s.a)([Object(c.b)({type:g.a,json:{write:!0}})],x.prototype,"timeExtent",void 0),Object(s.a)([Object(c.b)({type:String,json:{read:w.read,write:{writer:w.write,overridePolicy(e){return{enabled:e&&this.distance>0}}}}})],x.prototype,"units",void 0),Object(s.a)([Object(c.b)({type:String,json:{write:{overridePolicy(e){return{enabled:null!=e||this.start>0}}}}})],x.prototype,"where",void 0),Object(s.a)([Object(d.a)("where")],x.prototype,"writeWhere",null),x=r=Object(s.a)([Object(h.a)("esri.tasks.support.Query")],x);var _=x;t.a=_},130:function(e,t,i){"use strict";(function(e){i.d(t,"a",(function(){return n})),i.d(t,"b",(function(){return s})),i.d(t,"c",(function(){return r}));"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof e||"undefined"!=typeof self&&self;function r(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function s(e,t,i){return e(i={path:t,exports:{},require:function(e,t){return n(null==t&&i.path)}},i.exports),i.exports}function n(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}}).call(this,i(169))},137:function(e,t,i){"use strict";i.d(t,"a",(function(){return s})),i.d(t,"b",(function(){return c})),i.d(t,"c",(function(){return o})),i.d(t,"d",(function(){return a})),i.d(t,"e",(function(){return u}));i(79);var r=i(93);function s(e){return e}const n={milliseconds:{getter:"getMilliseconds",setter:"setMilliseconds",multiplier:1},seconds:{getter:"getSeconds",setter:"setSeconds",multiplier:1},minutes:{getter:"getMinutes",setter:"setMinutes",multiplier:1},hours:{getter:"getHours",setter:"setHours",multiplier:1},days:{getter:"getDate",setter:"setDate",multiplier:1},weeks:{getter:"getDate",setter:"setDate",multiplier:7},months:{getter:"getMonth",setter:"setMonth",multiplier:1},years:{getter:"getFullYear",setter:"setFullYear",multiplier:1},decades:{getter:"getFullYear",setter:"setFullYear",multiplier:10},centuries:{getter:"getFullYear",setter:"setFullYear",multiplier:100}},a=Object(r.b)()({esriTimeUnitsMilliseconds:"milliseconds",esriTimeUnitsSeconds:"seconds",esriTimeUnitsMinutes:"minutes",esriTimeUnitsHours:"hours",esriTimeUnitsDays:"days",esriTimeUnitsWeeks:"weeks",esriTimeUnitsMonths:"months",esriTimeUnitsYears:"years",esriTimeUnitsDecades:"decades",esriTimeUnitsCenturies:"centuries",esriTimeUnitsUnknown:null});function o(e,t,i){const r=new Date(e.getTime());if(t&&i){const e=n[i],{getter:s,setter:a,multiplier:o}=e;r[a](r[s]()+t*o)}return r}const c={milliseconds:1,seconds:1e3,minutes:6e4,hours:36e5,days:864e5,weeks:6048e5,months:26784e5,years:31536e6,decades:31536e7,centuries:31536e8};function u(e,t){switch(t){case"milliseconds":return new Date(e.getTime());case"seconds":return new Date(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds());case"minutes":return new Date(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes());case"hours":return new Date(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours());case"days":return new Date(e.getFullYear(),e.getMonth(),e.getDate());case"weeks":return new Date(e.getFullYear(),e.getMonth(),e.getDate()-e.getDay());case"months":return new Date(e.getFullYear(),e.getMonth(),1);case"years":return new Date(e.getFullYear(),0,1);case"decades":return new Date(e.getFullYear()-e.getFullYear()%10,0,1);case"centuries":return new Date(e.getFullYear()-e.getFullYear()%100,0,1);default:return null}}},147:function(e,t,i){"use strict";var r,s=i(81),n=(i(79),i(80),i(87),i(84)),a=i(96),o=i(83),c=i(94),u=(i(82),i(85),i(86),i(89)),l=i(137);let h=r=class extends u.a{constructor(e){super(e),this.end=null,this.start=null}static get allTime(){return d}static get empty(){return p}readEnd(e,t){return null!=t.end?new Date(t.end):null}writeEnd(e,t){t.end=e?e.getTime():null}get isAllTime(){return this.equals(r.allTime)}get isEmpty(){return this.equals(r.empty)}readStart(e,t){return null!=t.start?new Date(t.start):null}writeStart(e,t){t.start=e?e.getTime():null}clone(){return new r({end:this.end,start:this.start})}expandTo(e){if(this.isEmpty||this.isAllTime)return this.clone();const t=this.start?Object(l.e)(this.start,e):null,i=this.end?Object(l.c)(Object(l.e)(this.end,e),1,e):null;return new r({start:t,end:i})}intersection(e){var t,i,s,n,a,o,c,u;if(!e)return this.clone();if(this.isEmpty||e.isEmpty)return r.empty;if(this.isAllTime)return e.clone();if(e.isAllTime)return this.clone();const l=null!=(t=null==(i=this.start)?void 0:i.getTime())?t:-1/0,h=null!=(s=null==(n=this.end)?void 0:n.getTime())?s:1/0,d=null!=(a=null==(o=e.start)?void 0:o.getTime())?a:-1/0,p=null!=(c=null==(u=e.end)?void 0:u.getTime())?c:1/0;let f,b;if(d>=l&&d<=h?f=d:l>=d&&l<=p&&(f=l),h>=d&&h<=p?b=h:p>=l&&p<=h&&(b=p),!isNaN(f)&&!isNaN(b)){const e=new r;return e.start=f===-1/0?null:new Date(f),e.end=b===1/0?null:new Date(b),e}return r.empty}offset(e,t){if(this.isEmpty||this.isAllTime)return this.clone();const i=new r,{start:s,end:n}=this;return s&&(i.start=Object(l.c)(s,e,t)),n&&(i.end=Object(l.c)(n,e,t)),i}equals(e){if(!e)return!1;const t=this.start?this.start.getTime():this.start,i=this.end?this.end.getTime():this.end,r=e.start?e.start.getTime():e.start,s=e.end?e.end.getTime():e.end;return t===r&&i===s}union(e){if(!e||e.isEmpty)return this.clone();if(this.isEmpty)return e.clone();if(this.isAllTime||e.isAllTime)return d.clone();const t=this.start&&e.start?new Date(Math.min(this.start.getTime(),e.start.getTime())):null,i=this.end&&e.end?new Date(Math.max(this.end.getTime(),e.end.getTime())):null;return new r({start:t,end:i})}};Object(s.a)([Object(n.b)({type:Date,json:{write:{allowNull:!0}}})],h.prototype,"end",void 0),Object(s.a)([Object(a.a)("end")],h.prototype,"readEnd",null),Object(s.a)([Object(c.a)("end")],h.prototype,"writeEnd",null),Object(s.a)([Object(n.b)({readOnly:!0,json:{read:!1}})],h.prototype,"isAllTime",null),Object(s.a)([Object(n.b)({readOnly:!0,json:{read:!1}})],h.prototype,"isEmpty",null),Object(s.a)([Object(n.b)({type:Date,json:{write:{allowNull:!0}}})],h.prototype,"start",void 0),Object(s.a)([Object(a.a)("start")],h.prototype,"readStart",null),Object(s.a)([Object(c.a)("start")],h.prototype,"writeStart",null),h=r=Object(s.a)([Object(o.a)("esri.TimeExtent")],h);const d=new h,p=new h({start:void 0,end:void 0});var f=h;t.a=f},164:function(e,t,i){"use strict";i.d(t,"a",(function(){return l})),i.d(t,"b",(function(){return u}));var r=i(81),s=i(84),n=i(83),a=i(95),o=i(113),c=i(294);const u=e=>{let t=class extends e{destroy(){this.destroyed||(this.handles.destroy(),this.updatingHandles.destroy())}get handles(){return this._get("handles")||new o.a}get updatingHandles(){return this._get("updatingHandles")||new c.a}};return Object(r.a)([Object(s.b)({readOnly:!0})],t.prototype,"handles",null),Object(r.a)([Object(s.b)({readOnly:!0})],t.prototype,"updatingHandles",null),t=Object(r.a)([Object(n.a)("esri.core.HandleOwner")],t),t};let l=class extends(u(a.a)){};l=Object(r.a)([Object(n.a)("esri.core.HandleOwner")],l)},167:function(e,t,i){"use strict";i.d(t,"a",(function(){return E}));var r,s=i(81),n=(i(79),i(80),i(87)),a=i(84),o=i(114),c=i(93),u=i(100),l=i(96),h=i(185),d=i(83),p=(i(82),i(85),i(86),i(89)),f=i(152),b=i(259),m=i(97),y=i(180);i(99);let g=r=class extends p.a{constructor(e){super(e),this.type="query-table"}clone(){var e;const{workspaceId:t,query:i,oidFields:s,spatialReference:n,geometryType:a}=this,o={workspaceId:t,query:i,oidFields:s,spatialReference:null!=(e=null==n?void 0:n.clone())?e:void 0,geometryType:a};return new r(o)}};var j;Object(s.a)([Object(u.a)({queryTable:"query-table"})],g.prototype,"type",void 0),Object(s.a)([Object(a.b)({type:String,json:{write:!0}})],g.prototype,"workspaceId",void 0),Object(s.a)([Object(a.b)({type:String,json:{write:!0}})],g.prototype,"query",void 0),Object(s.a)([Object(a.b)({type:String,json:{write:!0}})],g.prototype,"oidFields",void 0),Object(s.a)([Object(a.b)({type:m.a,json:{write:!0}})],g.prototype,"spatialReference",void 0),Object(s.a)([Object(u.a)(y.a)],g.prototype,"geometryType",void 0),g=r=Object(s.a)([Object(d.a)("esri.layers.support.source.QueryTableDataSource")],g);let O=j=class extends p.a{constructor(e){super(e),this.type="raster"}clone(){const{workspaceId:e,dataSourceName:t}=this;return new j({workspaceId:e,dataSourceName:t})}};var v;Object(s.a)([Object(u.a)({raster:"raster"})],O.prototype,"type",void 0),Object(s.a)([Object(a.b)({type:String,json:{write:!0}})],O.prototype,"dataSourceName",void 0),Object(s.a)([Object(a.b)({type:String,json:{write:!0}})],O.prototype,"workspaceId",void 0),O=j=Object(s.a)([Object(d.a)("esri.layers.support.source.RasterDataSource")],O);let S=v=class extends p.a{constructor(e){super(e),this.type="table"}clone(){const{workspaceId:e,gdbVersion:t,dataSourceName:i}=this;return new v({workspaceId:e,gdbVersion:t,dataSourceName:i})}};var w,x;Object(s.a)([Object(u.a)({table:"table"})],S.prototype,"type",void 0),Object(s.a)([Object(a.b)({type:String,json:{write:!0}})],S.prototype,"workspaceId",void 0),Object(s.a)([Object(a.b)({type:String,json:{write:!0}})],S.prototype,"gdbVersion",void 0),Object(s.a)([Object(a.b)({type:String,json:{write:!0}})],S.prototype,"dataSourceName",void 0),S=v=Object(s.a)([Object(d.a)("esri.layers.support.source.TableDataSource")],S);const _=Object(c.b)()({esriLeftInnerJoin:"left-inner-join",esriLeftOuterJoin:"left-outer-join"});let T=w=class extends p.a{constructor(e){super(e),this.type="join-table"}readLeftTableSource(e,t,i){return M()(e,t,i)}castLeftTableSource(e){return Object(n.k)(R(),e)}readRightTableSource(e,t,i){return M()(e,t,i)}castRightTableSource(e){return Object(n.k)(R(),e)}clone(){var e,t;const{leftTableKey:i,rightTableKey:r,leftTableSource:s,rightTableSource:n,joinType:a}=this,o={leftTableKey:i,rightTableKey:r,leftTableSource:null!=(e=null==s?void 0:s.clone())?e:void 0,rightTableSource:null!=(t=null==n?void 0:n.clone())?t:void 0,joinType:a};return new w(o)}};Object(s.a)([Object(u.a)({joinTable:"join-table"})],T.prototype,"type",void 0),Object(s.a)([Object(a.b)({type:String,json:{write:!0}})],T.prototype,"leftTableKey",void 0),Object(s.a)([Object(a.b)({type:String,json:{write:!0}})],T.prototype,"rightTableKey",void 0),Object(s.a)([Object(a.b)({json:{write:!0}})],T.prototype,"leftTableSource",void 0),Object(s.a)([Object(l.a)("leftTableSource")],T.prototype,"readLeftTableSource",null),Object(s.a)([Object(o.a)("leftTableSource")],T.prototype,"castLeftTableSource",null),Object(s.a)([Object(a.b)({json:{write:!0}})],T.prototype,"rightTableSource",void 0),Object(s.a)([Object(l.a)("rightTableSource")],T.prototype,"readRightTableSource",null),Object(s.a)([Object(o.a)("rightTableSource")],T.prototype,"castRightTableSource",null),Object(s.a)([Object(u.a)(_)],T.prototype,"joinType",void 0),T=w=Object(s.a)([Object(d.a)("esri.layers.support.source.JoinTableDataSource")],T);let F=null;function M(){return F||(F=Object(h.b)({types:R()})),F}let I=null;function R(){return I||(I={key:"type",base:null,typeMap:{"data-layer":E,"map-layer":b.a}}),I}const P={key:"type",base:null,typeMap:{"join-table":T,"query-table":g,raster:O,table:S}};let E=x=class extends p.a{constructor(e){super(e),this.type="data-layer"}clone(){const{fields:e,dataSource:t}=this;return new x({fields:e,dataSource:t})}};Object(s.a)([Object(u.a)({dataLayer:"data-layer"})],E.prototype,"type",void 0),Object(s.a)([Object(a.b)({type:[f.a],json:{write:!0}})],E.prototype,"fields",void 0),Object(s.a)([Object(a.b)({types:P,json:{write:!0}})],E.prototype,"dataSource",void 0),E=x=Object(s.a)([Object(d.a)("esri.layers.support.source.DataLayerSource")],E),E.from=Object(n.m)(E)},170:function(e,t,i){"use strict";i.d(t,"a",(function(){return o})),i.d(t,"b",(function(){return c})),i.d(t,"c",(function(){return u})),i.d(t,"d",(function(){return l})),i.d(t,"e",(function(){return d})),i.d(t,"f",(function(){return p})),i.d(t,"g",(function(){return h}));var r=i(110),s=i(97),n=i(136);function a(e){return new s.a({wkt:`GEOCCS["Spherical geocentric",\n    DATUM["Not specified",\n      SPHEROID["Sphere",${e.radius},0]],\n    PRIMEM["Greenwich",0.0,\n      AUTHORITY["EPSG","8901"]],\n    UNIT["m",1.0],\n    AXIS["Geocentric X",OTHER],\n    AXIS["Geocentric Y",EAST],\n    AXIS["Geocentric Z",NORTH]\n  ]`})}const o=a(n.a),c=a(n.b),u=a(n.c),l=new s.a({wkt:`GEOCCS["WGS 84",\n  DATUM["WGS_1984",\n    SPHEROID["WGS 84",${n.a.radius},298.257223563,\n      AUTHORITY["EPSG","7030"]],\n    AUTHORITY["EPSG","6326"]],\n  PRIMEM["Greenwich",0,\n    AUTHORITY["EPSG","8901"]],\n  UNIT["m",1.0,\n    AUTHORITY["EPSG","9001"]],\n  AXIS["Geocentric X",OTHER],\n  AXIS["Geocentric Y",OTHER],\n  AXIS["Geocentric Z",NORTH],\n  AUTHORITY["EPSG","4978"]\n]`});function h(e){return e&&(Object(r.g)(e)||e===c)?c:e&&(Object(r.h)(e)||e===u)?u:o}function d(e){return e&&(Object(r.g)(e)||e===c)?n.b:e&&(Object(r.h)(e)||e===u)?n.c:n.a}function p(e){return Object(r.k)(e)?n.b:Object(r.l)(e)?n.c:n.a}},181:function(e,t,i){"use strict";i.d(t,"a",(function(){return r})),i.d(t,"b",(function(){return s})),i.d(t,"c",(function(){return c})),i.d(t,"d",(function(){return o}));const r=1e-6,s=Math.random,n=Math.PI/180,a=180/Math.PI;function o(e){return e*n}function c(e){return e*a}Object.freeze({__proto__:null,EPSILON:r,RANDOM:s,toRadian:o,toDegree:c,equals:function(e,t){return Math.abs(e-t)<=r*Math.max(1,Math.abs(e),Math.abs(t))}})},187:function(e,t,i){"use strict";i.r(t),i.d(t,"executeQuery",(function(){return p})),i.d(t,"executeQueryForCount",(function(){return y})),i.d(t,"executeQueryForExtent",(function(){return g})),i.d(t,"executeQueryForIds",(function(){return m})),i.d(t,"executeQueryPBF",(function(){return f})),i.d(t,"executeQueryPBFBuffer",(function(){return b})),i.d(t,"queryToQueryStringParameters",(function(){return d})),i.d(t,"runQuery",(function(){return j}));var r=i(88),s=i(82),n=i(98),a=i(104),o=i(233),c=i(267),u=i(266),l=i(383);const h="Layer does not support extent calculation.";function d(e,t){const i=e.geometry,s=e.toJSON(),a=s;if(Object(r.k)(i)&&(a.geometry=JSON.stringify(i),a.geometryType=Object(n.c)(i),a.inSR=i.spatialReference.wkid||JSON.stringify(i.spatialReference)),s.groupByFieldsForStatistics&&(a.groupByFieldsForStatistics=s.groupByFieldsForStatistics.join(",")),s.objectIds&&(a.objectIds=s.objectIds.join(",")),s.orderByFields&&(a.orderByFields=s.orderByFields.join(",")),!s.outFields||!s.returnDistinctValues&&(null!=t&&t.returnCountOnly||null!=t&&t.returnExtentOnly||null!=t&&t.returnIdsOnly)?delete a.outFields:-1!==s.outFields.indexOf("*")?a.outFields="*":a.outFields=s.outFields.join(","),s.outSR?a.outSR=s.outSR.wkid||JSON.stringify(s.outSR):i&&(s.returnGeometry||s.returnCentroid)&&(a.outSR=a.inSR),s.returnGeometry&&delete s.returnGeometry,s.outStatistics&&(a.outStatistics=JSON.stringify(s.outStatistics)),s.pixelSize&&(a.pixelSize=JSON.stringify(s.pixelSize)),s.quantizationParameters&&(a.quantizationParameters=JSON.stringify(s.quantizationParameters)),s.parameterValues&&(a.parameterValues=JSON.stringify(s.parameterValues)),s.rangeValues&&(a.rangeValues=JSON.stringify(s.rangeValues)),s.dynamicDataSource&&(a.layer=JSON.stringify({source:s.dynamicDataSource}),delete s.dynamicDataSource),s.timeExtent){const e=s.timeExtent,{start:t,end:i}=e;null==t&&null==i||(a.time=t===i?t:`${null==t?"null":t},${null==i?"null":i}`),delete s.timeExtent}return a}async function p(e,t,i,s){const n=Object(r.k)(t.timeExtent)&&t.timeExtent.isEmpty?{data:{features:[]}}:await j(e,t,"json",s);return Object(c.a)(t,i,n.data),n}async function f(e,t,i,s){if(Object(r.k)(t.timeExtent)&&t.timeExtent.isEmpty)return Promise.resolve({data:i.createFeatureResult()});const n=await b(e,t,s),a=n;return a.data=Object(l.a)(n.data,i),a}function b(e,t,i){return j(e,t,"pbf",i)}function m(e,t,i){return Object(r.k)(t.timeExtent)&&t.timeExtent.isEmpty?Promise.resolve({data:{objectIds:[]}}):j(e,t,"json",i,{returnIdsOnly:!0})}function y(e,t,i){return Object(r.k)(t.timeExtent)&&t.timeExtent.isEmpty?Promise.resolve({data:{count:0}}):j(e,t,"json",i,{returnIdsOnly:!0,returnCountOnly:!0})}function g(e,t,i){return Object(r.k)(t.timeExtent)&&t.timeExtent.isEmpty?Promise.resolve({data:{count:0,extent:null}}):j(e,t,"json",i,{returnExtentOnly:!0,returnCountOnly:!0}).then((e=>{const t=e.data;if(t.hasOwnProperty("extent"))return e;if(t.features)throw new Error(h);if(t.hasOwnProperty("count"))throw new Error(h);return e}))}function j(e,t,i,n={},c={}){const l="string"==typeof e?Object(s.J)(e):e,h=t.geometry?[t.geometry]:[];return n.responseType="pbf"===i?"array-buffer":"json",Object(o.a)(h,null,n).then((e=>{const o=e&&e[0];Object(r.k)(o)&&((t=t.clone()).geometry=o);const h=Object(u.a)({...l.query,f:i,...c,...d(t,c)});return Object(a.default)(Object(s.y)(l.path,"query"),{...n,query:{...h,...n.query}})}))}},198:function(e,t,i){"use strict";i.d(t,"a",(function(){return s})),i.d(t,"b",(function(){return n})),i.d(t,"c",(function(){return a})),i.d(t,"d",(function(){return o}));var r=i(92);function s(e,t,i){return Object(r.j)(e.map(((e,r)=>t.apply(i,[e,r]))))}function n(e,t,i){return Object(r.j)(e.map(((e,r)=>t.apply(i,[e,r])))).then((e=>e.map((e=>e.value))))}function a(e){return e.then((e=>({ok:!0,value:e}))).catch((e=>({ok:!1,error:e})))}function o(e){return e.then((e=>({ok:!0,value:e}))).catch((e=>(Object(r.t)(e),{ok:!1,error:e})))}},204:function(e,t,i){"use strict";function r(e){return"date"===e.type||"esriFieldTypeDate"===e.type}function s(e){return e.toLowerCase().trim()}t.a=class{constructor(e){if(this.fields=e,this._fieldsMap=new Map,this._dateFieldsSet=new Set,this.dateFields=[],!e)return;const t=[];for(const i of e){const e=i&&i.name;if(e){const n=s(e);this._fieldsMap.set(e,i),this._fieldsMap.set(n,i),t.push(n),r(i)&&(this.dateFields.push(i),this._dateFieldsSet.add(i))}}t.sort(),this.uid=t.join(",")}destroy(){this._fieldsMap.clear()}has(e){return null!=this.get(e)}get(e){return null!=e?this._fieldsMap.get(e)||this._fieldsMap.get(s(e)):void 0}isDateField(e){return this._dateFieldsSet.has(this.get(e))}normalizeFieldName(e){const t=this.get(e);if(t)return t.name}}},210:function(e,t,i){"use strict";i.d(t,"a",(function(){return s})),i.d(t,"b",(function(){return n}));var r=i(173);class s{constructor(e,t,i){this._namespace=e,this._storage=t,this._removeFunc=!1,this._hit=0,this._miss=0,this._storage.register(this),this._namespace+=":",i&&(this._storage.registerRemoveFunc(this._namespace,i),this._removeFunc=!0)}destroy(){this._storage.clear(this._namespace),this._removeFunc&&this._storage.deregisterRemoveFunc(this._namespace),this._storage.deregister(this),this._storage=null}get namespace(){return this._namespace.slice(0,-1)}get hitRate(){return this._hit/(this._hit+this._miss)}get size(){return this._storage.size}get maxSize(){return this._storage.maxSize}resetHitRate(){this._hit=this._miss=0}put(e,t,i,r=0){this._storage.put(this._namespace+e,t,i,r)}get(e){const t=this._storage.get(this._namespace+e);return void 0===t?++this._miss:++this._hit,t}pop(e){const t=this._storage.pop(this._namespace+e);return void 0===t?++this._miss:++this._hit,t}updateSize(e,t,i){this._storage.updateSize(this._namespace+e,t,i)}clear(){this._storage.clear(this._namespace)}clearAll(){this._storage.clearAll()}getStats(){return this._storage.getStats()}resetStats(){this._storage.resetStats()}}class n{constructor(e=10485760){this._maxSize=e,this._db=new Map,this._size=0,this._hit=0,this._miss=0,this._removeFuncs=new r.a,this._users=new r.a}destroy(){this.clearAll(),this._removeFuncs.clear(),this._users.clear(),this._db=null}register(e){this._users.push(e)}deregister(e){this._users.removeUnordered(e)}registerRemoveFunc(e,t){this._removeFuncs.push([e,t])}deregisterRemoveFunc(e){this._removeFuncs.filterInPlace((t=>t[0]!==e))}get size(){return this._size}get maxSize(){return this._maxSize}set maxSize(e){this._maxSize=Math.max(e,0),this._checkSizeLimit()}put(e,t,i,r){const s=this._db.get(e);if(s&&(this._size-=s.size,this._db.delete(e),s.entry!==t&&this._notifyRemoved(e,s.entry)),i>this._maxSize)return void this._notifyRemoved(e,t);if(void 0===t)return void console.warn("Refusing to cache undefined entry ");if(!i||i<0)return void console.warn("Refusing to cache entry with invalid size "+i);const n=1+Math.max(r,-3)- -3;this._db.set(e,{entry:t,size:i,lifetime:n,lives:n}),this._size+=i,this._checkSizeLimit()}updateSize(e,t,i){const r=this._db.get(e);if(r&&r.entry===t){if(this._size-=r.size,i>this._maxSize)return this._db.delete(e),void this._notifyRemoved(e,t);r.size=i,this._size+=i,this._checkSizeLimit()}}pop(e){const t=this._db.get(e);if(t)return this._size-=t.size,this._db.delete(e),++this._hit,t.entry;++this._miss}get(e){const t=this._db.get(e);if(void 0!==t)return this._db.delete(e),t.lives=t.lifetime,this._db.set(e,t),++this._hit,t.entry;++this._miss}getStats(){const e={Size:Math.round(this._size/1048576)+"/"+Math.round(this._maxSize/1048576)+"MB","Hit rate":Math.round(100*this._getHitRate())+"%",Entries:this._db.size.toString()},t={},i=new Array;this._db.forEach(((e,r)=>{const s=e.lifetime;i[s]=(i[s]||0)+e.size,this._users.forAll((i=>{const s=i.namespace;if(r.startsWith(s)){const i=t[s]||0;t[s]=i+e.size}}))}));const r={};this._users.forAll((e=>{const i=e.namespace;if(!isNaN(e.hitRate)&&e.hitRate>0){const s=t[i]||0;t[i]=s,r[i]=Math.round(100*e.hitRate)+"%"}else r[i]="0%"}));const s=Object.keys(t);s.forEach((e=>t[e]=t[e]/this._size*100)),s.sort(((e,i)=>t[i]-t[e])),s.forEach((i=>e[i]=Math.round(t[i])+"% / "+r[i]));for(let n=i.length-1;n>=0;--n){const t=i[n];t&&(e["Priority "+(n+-3-1)]=Math.round(t/this.size*100)+"%")}return e}resetStats(){this._hit=this._miss=0,this._users.forAll((e=>e.resetHitRate()))}clear(e){this._db.forEach(((t,i)=>{i.startsWith(e)&&(this._size-=t.size,this._db.delete(i),this._notifyRemoved(i,t.entry))}))}clearAll(){this._db.forEach(((e,t)=>this._notifyRemoved(t,e.entry))),this._size=0,this._db.clear()}_getHitRate(){return this._hit/(this._hit+this._miss)}_notifyRemoved(e,t){this._removeFuncs.forAll((i=>{e.startsWith(i[0])&&i[1](t)}))}_checkSizeLimit(){if(!(this._size<=this._maxSize))for(const[e,t]of this._db)if(this._db.delete(e),t.lives<=1?(this._size-=t.size,this._notifyRemoved(e,t.entry)):(--t.lives,this._db.set(e,t)),this._size<=.9*this.maxSize)return}}},219:function(e,t,i){"use strict";var r,s=i(81),n=(i(79),i(80),i(87),i(84)),a=i(83),o=(i(82),i(85),i(86),i(89)),c=i(137);let u=r=class extends o.a{constructor(e){super(e),this.value=0,this.unit="milliseconds"}toMilliseconds(){return this.value*c.b[this.unit]}clone(){return new r({value:this.value,unit:this.unit})}};Object(s.a)([Object(n.b)({type:Number,json:{write:!0},nonNullable:!0})],u.prototype,"value",void 0),Object(s.a)([Object(n.b)({type:c.d.apiValues,json:{type:c.d.jsonValues,read:c.d.read,write:c.d.write},nonNullable:!0})],u.prototype,"unit",void 0),u=r=Object(s.a)([Object(a.a)("esri.TimeInterval")],u);var l=u;t.a=l},233:function(e,t,i){"use strict";i.d(t,"a",(function(){return S})),i.d(t,"b",(function(){return w})),i.d(t,"c",(function(){return j}));var r=i(156),s=i(88),n=i(80),a=i(91),o=i(110),c=i(158),u=i(127),l=i(138),h=i(240),d=i(82),p=i(98),f=(i(99),i(104));async function b(e,t,i){const r="string"==typeof e?Object(d.J)(e):e,s=t[0].spatialReference,n=Object(p.c)(t[0]),a={...i,query:{...r.query,f:"json",sr:s.wkid?s.wkid:JSON.stringify(s),geometries:JSON.stringify((o=t,{geometryType:Object(p.c)(o[0]),geometries:o.map((e=>e.toJSON()))}))}};var o;return function(e,t,i){const r=Object(p.b)(t);return e.map((e=>{const t=r.fromJSON(e);return t.spatialReference=i,t}))}((await Object(f.default)(r.path+"/simplify",a)).data,n,s)}const m=n.a.getLogger("esri.geometry.support.normalizeUtils");function y(e){return"polygon"===e[0].type}function g(e){return"polyline"===e[0].type}function j(e,t){if(!(e instanceof l.a||e instanceof u.a)){const e="straightLineDensify: the input geometry is neither polyline nor polygon";throw m.error(e),new a.a(e)}const i=Object(h.b)(e),r=[];for(const s of i){const e=[];r.push(e),e.push([s[0][0],s[0][1]]);for(let i=0;i<s.length-1;i++){const r=s[i][0],n=s[i][1],a=s[i+1][0],o=s[i+1][1],c=Math.sqrt((a-r)*(a-r)+(o-n)*(o-n)),u=(o-n)/c,l=(a-r)/c,h=c/t;if(h>1){for(let o=1;o<=h-1;o++){const i=o*t,s=l*i+r,a=u*i+n;e.push([s,a])}const i=(c+Math.floor(h-1)*t)/2,s=l*i+r,a=u*i+n;e.push([s,a])}e.push([a,o])}}return function(e){return"polygon"===e.type}(e)?new u.a({rings:r,spatialReference:e.spatialReference}):new l.a({paths:r,spatialReference:e.spatialReference})}function O(e,t,i){if(t){const t=j(e,1e6);e=Object(c.e)(t,!0)}return i&&(e=Object(h.e)(e,i)),e}function v(e,t,i){if(Array.isArray(e)){const r=e[0];if(r>t){const i=Object(h.d)(r,t);e[0]=r+i*(-2*t)}else if(r<i){const t=Object(h.d)(r,i);e[0]=r+t*(-2*i)}}else{const r=e.x;if(r>t){const i=Object(h.d)(r,t);e=e.clone().offset(i*(-2*t),0)}else if(r<i){const t=Object(h.d)(r,i);e=e.clone().offset(t*(-2*i),0)}}return e}async function S(e,t,i){if(!Array.isArray(e))return S([e],t);const n=t?t.url:r.a.geometryServiceUrl;let a,m,j,w,x,_,T,F,M=0;const I=[],R=[];for(const r of e)if(Object(s.j)(r))R.push(r);else if(a||(a=r.spatialReference,m=Object(o.d)(a),j=a.isWebMercator,_=j?102100:4326,w=h.a[_].maxX,x=h.a[_].minX,T=h.a[_].plus180Line,F=h.a[_].minus180Line),m)if("mesh"===r.type)R.push(r);else if("point"===r.type)R.push(v(r.clone(),w,x));else if("multipoint"===r.type){const e=r.clone();e.points=e.points.map((e=>v(e,w,x))),R.push(e)}else if("extent"===r.type){const e=r.clone()._normalize(!1,!1,m);R.push(e.rings?new u.a(e):e)}else if(r.extent){const e=r.extent,t=Object(h.d)(e.xmin,x)*(2*w);let i=0===t?r.clone():Object(h.e)(r.clone(),t);e.offset(t,0),e.intersects(T)&&e.xmax!==w?(M=e.xmax>M?e.xmax:M,i=O(i,j),I.push(i),R.push("cut")):e.intersects(F)&&e.xmin!==x?(M=e.xmax*(2*w)>M?e.xmax*(2*w):M,i=O(i,j,360),I.push(i),R.push("cut")):R.push(i)}else R.push(r.clone());else R.push(r);let P=Object(h.d)(M,w),E=-90;const C=P,z=new l.a;for(;P>0;){const e=360*P-180;z.addPath([[e,E],[e,-1*E]]),E*=-1,P--}if(I.length>0&&C>0){const t=function(e,t){let i=-1;for(let r=0;r<t.cutIndexes.length;r++){const s=t.cutIndexes[r],n=t.geometries[r],a=Object(h.b)(n);for(let e=0;e<a.length;e++){const t=a[e];t.some((i=>{if(i[0]<180)return!0;{let i=0;for(let e=0;e<t.length;e++){const r=t[e][0];i=r>i?r:i}i=Number(i.toFixed(9));const r=-360*Object(h.d)(i,180);for(let s=0;s<t.length;s++){const t=n.getPoint(e,s);n.setPoint(e,s,t.clone().offset(r,0))}return!0}}))}if(s===i){if(y(e))for(const t of Object(h.b)(n))e[s]=e[s].addRing(t);else if(g(e))for(const t of Object(h.b)(n))e[s]=e[s].addPath(t)}else i=s,e[s]=n}return e}(I,await async function(e,t,i,r){const s="string"==typeof e?Object(d.J)(e):e,n=t[0].spatialReference,a={...r,query:{...s.query,f:"json",sr:JSON.stringify(n),target:JSON.stringify({geometryType:Object(p.c)(t[0]),geometries:t}),cutter:JSON.stringify(i)}},o=await Object(f.default)(s.path+"/cut",a),{cutIndexes:c,geometries:u=[]}=o.data;return{cutIndexes:c,geometries:u.map((e=>{const t=Object(p.a)(e);return t.spatialReference=n,t}))}}(n,I,z,i)),r=[],a=[];for(let i=0;i<R.length;i++){const n=R[i];if("cut"!==n)a.push(n);else{const n=t.shift(),o=e[i];Object(s.k)(o)&&"polygon"===o.type&&o.rings&&o.rings.length>1&&n.rings.length>=o.rings.length?(r.push(n),a.push("simplify")):a.push(j?Object(c.b)(n):n)}}if(!r.length)return a;const o=await b(n,r,i),u=[];for(let e=0;e<a.length;e++){const t=a[e];"simplify"!==t?u.push(t):u.push(j?Object(c.b)(o.shift()):o.shift())}return u}const k=[];for(let r=0;r<R.length;r++){const e=R[r];if("cut"!==e)k.push(e);else{const e=I.shift();k.push(!0===j?Object(c.b)(e):e)}}return Promise.resolve(k)}function w(e,t){const i=Object(o.d)(t);if(i){const[t,r]=i.valid,s=r-t;if(e<t)for(;e<t;)e+=s;if(e>r)for(;e>r;)e-=s}return e}},236:function(e,t,i){"use strict";var r,s=i(81),n=(i(79),i(90)),a=(i(80),i(87),i(84)),o=i(96),c=i(83),u=i(94),l=(i(82),i(85),i(86),i(89)),h=i(137),d=i(147),p=i(219);let f=r=class extends l.a{constructor(e){super(e),this.respectsDaylightSaving=!1,this.timezone=null}readRespectsDaylightSaving(e,t){return void 0!==t.respectsDaylightSaving?t.respectsDaylightSaving:void 0!==t.respectDaylightSaving&&t.respectDaylightSaving}clone(){const{respectsDaylightSaving:e,timezone:t}=this;return new r({respectsDaylightSaving:e,timezone:t})}};Object(s.a)([Object(a.b)({type:Boolean,json:{write:!0}})],f.prototype,"respectsDaylightSaving",void 0),Object(s.a)([Object(o.a)("respectsDaylightSaving",["respectsDaylightSaving","respectDaylightSaving"])],f.prototype,"readRespectsDaylightSaving",null),Object(s.a)([Object(a.b)({type:String,json:{read:{source:"timeZone"},write:{target:"timeZone"}}})],f.prototype,"timezone",void 0),f=r=Object(s.a)([Object(c.a)("esri.layers.support.TimeReference")],f);var b,m=f;let y=b=class extends l.a{constructor(e){super(e),this.cumulative=!1,this.endField=null,this.fullTimeExtent=null,this.hasLiveData=!1,this.interval=null,this.startField=null,this.timeReference=null,this.trackIdField=null,this.useTime=!0}readFullTimeExtent(e,t){if(!t.timeExtent||!Array.isArray(t.timeExtent)||2!==t.timeExtent.length)return null;const i=new Date(t.timeExtent[0]),r=new Date(t.timeExtent[1]);return new d.a({start:i,end:r})}writeFullTimeExtent(e,t){e&&e.start&&e.end?t.timeExtent=[e.start.getTime(),e.end.getTime()]:t.timeExtent=null}readInterval(e,t){return t.timeInterval&&t.timeIntervalUnits?new p.a({value:t.timeInterval,unit:h.d.fromJSON(t.timeIntervalUnits)}):t.defaultTimeInterval&&t.defaultTimeIntervalUnits?new p.a({value:t.defaultTimeInterval,unit:h.d.fromJSON(t.defaultTimeIntervalUnits)}):null}writeInterval(e,t){if(e){const i=e.toJSON();t.timeInterval=i.value,t.timeIntervalUnits=i.unit}else t.timeInterval=null,t.timeIntervalUnits=null}clone(){const{cumulative:e,endField:t,hasLiveData:i,interval:r,startField:s,timeReference:a,fullTimeExtent:o,trackIdField:c,useTime:u}=this;return new b({cumulative:e,endField:t,hasLiveData:i,interval:r,startField:s,timeReference:Object(n.a)(a),fullTimeExtent:Object(n.a)(o),trackIdField:c,useTime:u})}};Object(s.a)([Object(a.b)({type:Boolean,json:{read:{source:"exportOptions.timeDataCumulative"},write:{target:"exportOptions.timeDataCumulative"}}})],y.prototype,"cumulative",void 0),Object(s.a)([Object(a.b)({type:String,json:{read:{source:"endTimeField"},write:{target:"endTimeField",allowNull:!0}}})],y.prototype,"endField",void 0),Object(s.a)([Object(a.b)({type:d.a,json:{write:{enabled:!0,allowNull:!0}}})],y.prototype,"fullTimeExtent",void 0),Object(s.a)([Object(o.a)("fullTimeExtent",["timeExtent"])],y.prototype,"readFullTimeExtent",null),Object(s.a)([Object(u.a)("fullTimeExtent")],y.prototype,"writeFullTimeExtent",null),Object(s.a)([Object(a.b)({type:Boolean,json:{write:!0}})],y.prototype,"hasLiveData",void 0),Object(s.a)([Object(a.b)({type:p.a,json:{write:{enabled:!0,allowNull:!0}}})],y.prototype,"interval",void 0),Object(s.a)([Object(o.a)("interval",["timeInterval","timeIntervalUnits","defaultTimeInterval","defaultTimeIntervalUnits"])],y.prototype,"readInterval",null),Object(s.a)([Object(u.a)("interval")],y.prototype,"writeInterval",null),Object(s.a)([Object(a.b)({type:String,json:{read:{source:"startTimeField"},write:{target:"startTimeField",allowNull:!0}}})],y.prototype,"startField",void 0),Object(s.a)([Object(a.b)({type:m,json:{write:{enabled:!0,allowNull:!0}}})],y.prototype,"timeReference",void 0),Object(s.a)([Object(a.b)({type:String,json:{write:{enabled:!0,allowNull:!0}}})],y.prototype,"trackIdField",void 0),Object(s.a)([Object(a.b)({type:Boolean,json:{read:{source:"exportOptions.useTime"},write:{target:"exportOptions.useTime"}}})],y.prototype,"useTime",void 0),y=b=Object(s.a)([Object(c.a)("esri.layers.support.TimeInfo")],y);var g=y;t.a=g},240:function(e,t,i){"use strict";i.d(t,"a",(function(){return a})),i.d(t,"b",(function(){return u})),i.d(t,"c",(function(){return l})),i.d(t,"d",(function(){return o})),i.d(t,"e",(function(){return c}));var r=i(97),s=i(138),n=i(98);const a={102100:{maxX:20037508.342788905,minX:-20037508.342788905,plus180Line:new s.a({paths:[[[20037508.342788905,-20037508.342788905],[20037508.342788905,20037508.342788905]]],spatialReference:r.a.WebMercator}),minus180Line:new s.a({paths:[[[-20037508.342788905,-20037508.342788905],[-20037508.342788905,20037508.342788905]]],spatialReference:r.a.WebMercator})},4326:{maxX:180,minX:-180,plus180Line:new s.a({paths:[[[180,-180],[180,180]]],spatialReference:r.a.WGS84}),minus180Line:new s.a({paths:[[[-180,-180],[-180,180]]],spatialReference:r.a.WGS84})}};function o(e,t){return Math.ceil((e-t)/(2*t))}function c(e,t){const i=u(e);for(const r of i)for(const e of r)e[0]+=t;return e}function u(e){return Object(n.g)(e)?e.rings:e.paths}function l(e){const t=(null==e?void 0:e.isWebMercator)?102100:4326;return[a[t].minX,a[t].maxX]}},243:function(e,t,i){"use strict";var r,s=i(81),n=(i(79),i(90)),a=(i(80),i(87),i(84)),o=i(93),c=i(83),u=i(94),l=(i(82),i(85),i(86),i(89));const h=new o.a({count:"count",sum:"sum",min:"min",max:"max",avg:"avg",stddev:"stddev",var:"var",exceedslimit:"exceedslimit",percentile_cont:"percentile-continuous",percentile_disc:"percentile-discrete"});let d=r=class extends l.a{constructor(e){super(e),this.maxPointCount=void 0,this.maxRecordCount=void 0,this.maxVertexCount=void 0,this.onStatisticField=null,this.outStatisticFieldName=null,this.statisticType=null,this.statisticParameters=null}writeStatisticParameters(e,t){"percentile-continuous"!==this.statisticType&&"percentile-discrete"!==this.statisticType||(t.statisticParameters=Object(n.a)(e))}clone(){return new r({maxPointCount:this.maxPointCount,maxRecordCount:this.maxRecordCount,maxVertexCount:this.maxVertexCount,onStatisticField:this.onStatisticField,outStatisticFieldName:this.outStatisticFieldName,statisticType:this.statisticType,statisticParameters:Object(n.a)(this.statisticParameters)})}};Object(s.a)([Object(a.b)({type:Number,json:{write:!0}})],d.prototype,"maxPointCount",void 0),Object(s.a)([Object(a.b)({type:Number,json:{write:!0}})],d.prototype,"maxRecordCount",void 0),Object(s.a)([Object(a.b)({type:Number,json:{write:!0}})],d.prototype,"maxVertexCount",void 0),Object(s.a)([Object(a.b)({type:String,json:{write:!0}})],d.prototype,"onStatisticField",void 0),Object(s.a)([Object(a.b)({type:String,json:{write:!0}})],d.prototype,"outStatisticFieldName",void 0),Object(s.a)([Object(a.b)({type:String,json:{read:{source:"statisticType",reader:h.read},write:{target:"statisticType",writer:h.write}}})],d.prototype,"statisticType",void 0),Object(s.a)([Object(a.b)({type:Object})],d.prototype,"statisticParameters",void 0),Object(s.a)([Object(u.a)("statisticParameters")],d.prototype,"writeStatisticParameters",null),d=r=Object(s.a)([Object(c.a)("esri.tasks.support.StatisticDefinition")],d);var p=d;t.a=p},247:function(e,t,i){"use strict";var r,s=i(81),n=(i(79),i(90)),a=(i(80),i(87),i(84)),o=i(93),c=i(83),u=(i(82),i(85),i(86),i(89)),l=i(101);i(99);const h=new o.a({upperLeft:"upper-left",lowerLeft:"lower-left"});let d=r=class extends u.a{constructor(e){super(e),this.extent=null,this.mode="view",this.originPosition="upper-left",this.tolerance=1}clone(){return new r(Object(n.a)({extent:this.extent,mode:this.mode,originPosition:this.originPosition,tolerance:this.tolerance}))}};Object(s.a)([Object(a.b)({type:l.a,json:{write:{overridePolicy(){return{enabled:"view"===this.mode}}}}})],d.prototype,"extent",void 0),Object(s.a)([Object(a.b)({type:["view","edit"],json:{write:!0}})],d.prototype,"mode",void 0),Object(s.a)([Object(a.b)({type:String,json:{read:h.read,write:h.write}})],d.prototype,"originPosition",void 0),Object(s.a)([Object(a.b)({type:Number,json:{write:{overridePolicy(){return{enabled:"view"===this.mode}}}}})],d.prototype,"tolerance",void 0),d=r=Object(s.a)([Object(c.a)("esri.tasks.support.QuantizationParameters")],d);var p=d;t.a=p},259:function(e,t,i){"use strict";i.d(t,"a",(function(){return l}));var r,s=i(81),n=(i(79),i(80),i(87)),a=i(84),o=i(100),c=i(83),u=(i(82),i(85),i(86),i(89));let l=r=class extends u.a{constructor(e){super(e),this.type="map-layer"}clone(){const{mapLayerId:e,gdbVersion:t}=this;return new r({mapLayerId:e,gdbVersion:t})}};Object(s.a)([Object(o.a)({mapLayer:"map-layer"})],l.prototype,"type",void 0),Object(s.a)([Object(a.b)({type:n.a,json:{write:!0}})],l.prototype,"mapLayerId",void 0),Object(s.a)([Object(a.b)({type:String,json:{write:!0}})],l.prototype,"gdbVersion",void 0),l=r=Object(s.a)([Object(c.a)("esri.layers.support.source.MapLayerSource")],l)},266:function(e,t,i){"use strict";function r(e){const t={};for(const i in e){if("declaredClass"===i)continue;const s=e[i];if(null!=s&&"function"!=typeof s)if(Array.isArray(s)){t[i]=[];for(let e=0;e<s.length;e++)t[i][e]=r(s[e])}else"object"==typeof s?s.toJSON&&(t[i]=JSON.stringify(s)):t[i]=s}return t}i.d(t,"a",(function(){return r}))},267:function(e,t,i){"use strict";i.d(t,"a",(function(){return s}));var r=i(209);function s(e,t,i){if(!i||!i.features||!i.hasZ)return;const s=Object(r.a)(i.geometryType,t,e.outSpatialReference);if(s)for(const r of i.features)s(r.geometry)}},294:function(e,t,i){"use strict";i.d(t,"a",(function(){return p}));var r=i(81),s=i(88),n=i(237),a=i(84),o=i(83),c=i(238),u=i(341),l=i(95),h=i(113),d=i(106);let p=class extends l.a{constructor(){super(...arguments),this.updating=!1,this.handleId=0,this.handles=new h.a,this.scheduleHandleId=0,this.pendingPromises=new Set}destroy(){this.removeAll(),this.handles.destroy()}add(e,t,i,r=0){const s=0!=(1&r),n=++this.handleId;s||this.installSyncUpdatingWatch(e,t,n);const a=0!=(2&r)?Object(d.a)(e,t,i,s):e.watch(t,i,s);return this.handles.add(a,n),{remove:()=>{this.handles.remove(n)}}}addOnCollectionPropertyChange(e,t,i,r=0){const s=0!=(2&r),n=++this.handleId;return this.handles.add([Object(d.b)(e,t,"after-changes",this.createSyncUpdatingCallback()),Object(d.b)(e,t,"change",i,s?e=>{i({added:e.items,removed:[],moved:[],target:e})}:void 0)],n),{remove:()=>{this.handles.remove(n)}}}addOnCollectionChange(e,t,i=0){const r=0!=(2&i),s=++this.handleId;return this.handles.add([e.on("after-changes",this.createSyncUpdatingCallback()),e.on("change",t)],s),r&&t({added:e.items,removed:[],moved:[],target:e}),{remove:()=>{this.handles.remove(s)}}}addPromise(e){if(Object(s.j)(e))return e;const t=++this.handleId;this.handles.add({remove:()=>{this.pendingPromises.delete(e)&&(0!==this.pendingPromises.size||this.handles.has(f)||this._set("updating",!1))}},t),this.pendingPromises.add(e),this._set("updating",!0);const i=()=>this.handles.remove(t);return e.then(i,i),e}removeAll(){this.pendingPromises.clear(),this.handles.removeAll(),this._set("updating",!1)}installSyncUpdatingWatch(e,t,i){const r=this.createSyncUpdatingCallback(),s=Object(u.a)((()=>Object(n.c)(e,t)),r);return this.handles.add(s,i),s}createSyncUpdatingCallback(){return()=>{this.handles.remove(f),++this.scheduleHandleId;const e=this.scheduleHandleId;this._get("updating")||this._set("updating",!0),this.handles.add(Object(c.b)((()=>{e===this.scheduleHandleId&&(this._set("updating",this.pendingPromises.size>0),this.handles.remove(f))})),f)}}};Object(r.a)([Object(a.b)({readOnly:!0})],p.prototype,"updating",void 0),p=Object(r.a)([Object(o.a)("esri.views.support.WatchUpdatingTracking")],p);const f=-42},333:function(e,t,i){"use strict";var r,s=i(81),n=(i(79),i(80),i(87)),a=i(84),o=i(93),c=i(96),u=i(83),l=i(94),h=(i(82),i(85),i(86),i(89)),d=i(110),p=i(97),f=i(158),b=i(111),m=(i(99),i(115)),y=i(122),g=i(457);const j=new o.a({PNG:"png",PNG8:"png8",PNG24:"png24",PNG32:"png32",JPEG:"jpg",JPG:"jpg",DIB:"dib",TIFF:"tiff",EMF:"emf",PS:"ps",PDF:"pdf",GIF:"gif",SVG:"svg",SVGZ:"svgz",Mixed:"mixed",MIXED:"mixed",LERC:"lerc",LERC2D:"lerc2d",RAW:"raw",pbf:"pbf"});let O=r=class extends h.a{constructor(e){super(e),this.dpi=96,this.format=null,this.origin=null,this.minScale=0,this.maxScale=0,this.size=null,this.spatialReference=null}static create(e={size:256,spatialReference:p.a.WebMercator}){const t=e.resolutionFactor||1,i=e.scales,s=e.size||256,n=e.spatialReference||p.a.WebMercator;if(!Object(d.i)(n)){const e=[];if(i)for(let t=0;t<i.length;t++){const r=i[t];e.push({level:t,scale:r,resolution:r})}else{let t=5e-4;for(let i=23;i>=0;i--)e.unshift({level:i,scale:t,resolution:t}),t*=2}return new r({dpi:96,lods:e,origin:new b.a(0,0,n),size:[s,s],spatialReference:n})}const a=Object(d.d)(n),o=e.origin?new b.a({x:e.origin.x,y:e.origin.y,spatialReference:n}):new b.a(a?{x:a.origin[0],y:a.origin[1],spatialReference:n}:{x:0,y:0,spatialReference:n}),c=1/(39.37*Object(m.f)(n)*96),u=[];if(i)for(let r=0;r<i.length;r++){const e=i[r],t=e*c;u.push({level:r,scale:e,resolution:t})}else{let e=Object(d.f)(n)?512/s*591657527.5917094:256/s*591657527.591555;const i=Math.ceil(24/t);u.push({level:0,scale:e,resolution:e*c});for(let r=1;r<i;r++){const i=e/2**t,s=i*c;u.push({level:r,scale:i,resolution:s}),e=i}}return new r({dpi:96,lods:u,origin:o,size:[s,s],spatialReference:n})}get isWrappable(){const{spatialReference:e,origin:t}=this;if(e&&t){const i=Object(d.d)(e);return e.isWrappable&&Math.abs(i.origin[0]-t.x)<=i.dx}return!1}readOrigin(e,t){return b.a.fromJSON({spatialReference:t.spatialReference,...e})}set lods(e){let t=0,i=0;const r=[];this._levelToLOD={},e&&(t=-1/0,i=1/0,e.forEach((e=>{r.push(e.scale),t=e.scale>t?e.scale:t,i=e.scale<i?e.scale:i,this._levelToLOD[e.level]=e}))),this._set("scales",r),this._set("minScale",t),this._set("maxScale",i),this._set("lods",e),this._initializeUpsampleLevels()}readSize(e,t){return[t.cols,t.rows]}writeSize(e,t){t.cols=e[0],t.rows=e[0]}zoomToScale(e){const t=this.scales;if(e<=0)return t[0];if(e>=t.length)return t[t.length-1];{const i=Math.round(e-.5),r=Math.round(e);return t[r]+(r-e)*(t[i]-t[r])}}scaleToZoom(e){const t=this.scales,i=t.length-1;let r=0;for(;r<i;r++){const i=t[r],s=t[r+1];if(i<=e)return r;if(s===e)return r+1;if(i>e&&s<e)return r+1-(e-s)/(i-s)}return r}snapScale(e,t=.95){const i=this.scaleToZoom(e);return i%Math.floor(i)>=t?this.zoomToScale(Math.ceil(i)):this.zoomToScale(Math.floor(i))}tileAt(e,t,i,r){const s=this.lodAt(e);if(!s)return null;let n,a;if("number"==typeof t)n=t,a=i;else if(Object(d.c)(t.spatialReference,this.spatialReference))n=t.x,a=t.y,r=i;else{const e=Object(f.d)(t,this.spatialReference);if(!e)return null;n=e.x,a=e.y,r=i}const o=s.resolution*this.size[0],c=s.resolution*this.size[1];return r||(r={id:null,level:0,row:0,col:0,extent:Object(y.i)()}),r.level=e,r.row=Math.floor((this.origin.y-a)/c+.001),r.col=Math.floor((n-this.origin.x)/o+.001),this.updateTileInfo(r),r}updateTileInfo(e,t=0){let i=this.lodAt(e.level);if(!i&&1===t){const t=this.lods[this.lods.length-1];t.level<e.level&&(i=t)}if(!i)return;const r=e.level-i.level,s=i.resolution*this.size[0]/2**r,n=i.resolution*this.size[1]/2**r;e.id=`${e.level}/${e.row}/${e.col}`,e.extent||(e.extent=Object(y.i)()),e.extent[0]=this.origin.x+e.col*s,e.extent[1]=this.origin.y-(e.row+1)*n,e.extent[2]=e.extent[0]+s,e.extent[3]=e.extent[1]+n}upsampleTile(e){const t=this._upsampleLevels[e.level];return!(!t||-1===t.parentLevel)&&(e.level=t.parentLevel,e.row=Math.floor(e.row/t.factor+.001),e.col=Math.floor(e.col/t.factor+.001),this.updateTileInfo(e),!0)}getTileBounds(e,t){const{resolution:i}=this.lodAt(t.level),r=i*this.size[0],s=i*this.size[1];return e[0]=this.origin.x+t.col*r,e[1]=this.origin.y-(t.row+1)*s,e[2]=e[0]+r,e[3]=e[1]+s,e}lodAt(e){return this._levelToLOD&&this._levelToLOD[e]||null}clone(){return r.fromJSON(this.write({}))}_initializeUpsampleLevels(){const e=this.lods;this._upsampleLevels=[];let t=null;for(let i=0;i<e.length;i++){const r=e[i];this._upsampleLevels[r.level]={parentLevel:t?t.level:-1,factor:t?t.resolution/r.resolution:0},t=r}}};Object(s.a)([Object(a.b)({type:Number,json:{write:!0}})],O.prototype,"compressionQuality",void 0),Object(s.a)([Object(a.b)({type:Number,json:{write:!0}})],O.prototype,"dpi",void 0),Object(s.a)([Object(a.b)({type:String,json:{read:j.read,write:j.write,origins:{"web-scene":{read:!1,write:!1}}}})],O.prototype,"format",void 0),Object(s.a)([Object(a.b)({readOnly:!0})],O.prototype,"isWrappable",null),Object(s.a)([Object(a.b)({type:b.a,json:{write:!0}})],O.prototype,"origin",void 0),Object(s.a)([Object(c.a)("origin")],O.prototype,"readOrigin",null),Object(s.a)([Object(a.b)({type:[g.a],value:null,json:{write:!0}})],O.prototype,"lods",null),Object(s.a)([Object(a.b)({readOnly:!0})],O.prototype,"minScale",void 0),Object(s.a)([Object(a.b)({readOnly:!0})],O.prototype,"maxScale",void 0),Object(s.a)([Object(a.b)({readOnly:!0})],O.prototype,"scales",void 0),Object(s.a)([Object(a.b)({cast:e=>Array.isArray(e)?e:"number"==typeof e?[e,e]:[256,256]})],O.prototype,"size",void 0),Object(s.a)([Object(c.a)("size",["rows","cols"])],O.prototype,"readSize",null),Object(s.a)([Object(l.a)("size",{cols:{type:n.a},rows:{type:n.a}})],O.prototype,"writeSize",null),Object(s.a)([Object(a.b)({type:p.a,json:{write:!0}})],O.prototype,"spatialReference",void 0),O=r=Object(s.a)([Object(u.a)("esri.layers.support.TileInfo")],O);var v=O;t.a=v},400:function(e,t,i){"use strict";var r=i(210);t.a=class{constructor(e,t){this._storage=new r.b,this._storage.maxSize=e,t&&this._storage.registerRemoveFunc("",t)}put(e,t){this._storage.put(e,t,1,1)}pop(e){return this._storage.pop(e)}get(e){return this._storage.get(e)}clear(){this._storage.clearAll()}destroy(){this._storage.destroy()}}},457:function(e,t,i){"use strict";var r,s=i(81),n=(i(79),i(80),i(87)),a=i(84),o=i(83),c=(i(82),i(85),i(86),i(89));let u=r=class extends c.a{constructor(e){super(e),this.level=0,this.levelValue=null,this.resolution=0,this.scale=0}clone(){return new r({level:this.level,levelValue:this.levelValue,resolution:this.resolution,scale:this.scale})}};Object(s.a)([Object(a.b)({type:n.a,json:{write:!0}})],u.prototype,"level",void 0),Object(s.a)([Object(a.b)({type:String,json:{write:!0}})],u.prototype,"levelValue",void 0),Object(s.a)([Object(a.b)({type:Number,json:{write:!0}})],u.prototype,"resolution",void 0),Object(s.a)([Object(a.b)({type:Number,json:{write:!0}})],u.prototype,"scale",void 0),u=r=Object(s.a)([Object(o.a)("esri.layers.support.LOD")],u);var l=u;t.a=l}}]);
//# sourceMappingURL=97.37bca7be.chunk.js.map