(this.webpackJsonpimaps=this.webpackJsonpimaps||[]).push([[17],{153:function(t,e,i){"use strict";i.d(e,"a",(function(){return x})),i.d(e,"b",(function(){return v})),i.d(e,"c",(function(){return n})),i.d(e,"d",(function(){return u})),i.d(e,"e",(function(){return p})),i.d(e,"f",(function(){return m})),i.d(e,"g",(function(){return g})),i.d(e,"h",(function(){return _})),i.d(e,"i",(function(){return f})),i.d(e,"j",(function(){return d}));var s=i(92),r=i(100),a=i(284);function n(t){var e,i=Object(s.a)(t);return(e=i)&&(Object(r.g)(e)?c(e.rings):Object(r.h)(e)?c(e.paths):Object(r.e)(e)&&l(e.points)),i}function h(t){if(t)for(var e=t.length-1;e>0;--e)t[e][0]-=t[e-1][0],t[e][1]-=t[e-1][1]}function o(t){if(t)for(var e of t)h(e)}function l(t){if(t)for(var e=t.length,i=1;i<e;++i)t[i][0]+=t[i-1][0],t[i][1]+=t[i-1][1]}function c(t){if(t)for(var e of t)l(e)}function u(t){t&&(Object(r.g)(t)?o(t.rings):Object(r.h)(t)?o(t.paths):Object(r.e)(t)&&h(t.points))}function _(t){if(t)for(var e of t)f(e)}function f(t){t&&t.reverse()}function p(t,e,i){return[t[0]+(e[0]-t[0])*i,t[1]+(e[1]-t[1])*i]}function g(t){return!(!t||0===t.length)&&t[0][0]===t[t.length-1][0]&&t[0][1]===t[t.length-1][1]}function m(t){return t[4]}function d(t,e){t[4]=e}class v{constructor(t,e,i,s){this.acceptPolygon=e,this.acceptPolyline=i,this.geomUnitsPerPoint=s,this.pathCount=-1,this.pathIndex=-1,this.iteratePath=!1,t&&(Object(r.g)(t)?e&&(this.multiPath=t.rings,this.isClosed=!0):Object(r.h)(t)?i&&(this.multiPath=t.paths,this.isClosed=!1):Object(r.d)(t)&&e&&(this.multiPath=y(t).rings,this.isClosed=!0),this.multiPath&&(this.pathCount=this.multiPath.length)),this.internalPlacement=new a.a}next(){if(!this.multiPath)return null;for(;this.iteratePath||this.pathIndex<this.pathCount-1;){this.iteratePath||this.pathIndex++;var t=this.processPath(this.multiPath[this.pathIndex]);if(t)return t}return this.pathCount=-1,this.pathIndex=-1,this.multiPath=null,null}}class x{constructor(t,e,i,s){this.inputGeometries=t,this.acceptPolygon=e,this.acceptPolyline=i,this.geomUnitsPerPoint=s,this.pathCount=-1,this.pathIndex=-1,this.iteratePath=!1}next(){for(;;){if(!this.multiPath){for(var t=this.inputGeometries.next();t;){if(Object(r.g)(t)?this.acceptPolygon&&(this.multiPath=t.rings,this.isClosed=!0):Object(r.h)(t)?this.acceptPolyline&&(this.multiPath=t.paths,this.isClosed=!1):Object(r.d)(t)&&this.acceptPolygon&&(this.multiPath=y(t).rings,this.isClosed=!0),this.multiPath){this.pathCount=this.multiPath.length,this.pathIndex=-1;break}t=this.inputGeometries.next()}if(!this.multiPath)return null}for(;this.iteratePath||this.pathIndex<this.pathCount-1;){this.iteratePath||this.pathIndex++;var e=this.processPath(this.multiPath[this.pathIndex]);if(e)return e}this.pathCount=-1,this.pathIndex=-1,this.multiPath=null}}}function y(t){return{rings:[[[t.xmin,t.ymin],[t.xmin,t.ymax],[t.xmax,t.ymax],[t.xmax,t.ymin],[t.xmin,t.ymin]]]}}},284:function(t,e,i){"use strict";i.d(e,"a",(function(){return s}));class s{constructor(){this.setIdentity()}getAngle(){return(null==this.rz||0===this.rz&&1!==this.rz_c&&0!==this.rz_s)&&(this.rz=Math.atan2(this.rz_s,this.rz_c)),this.rz}setIdentity(){this.tx=0,this.ty=0,this.tz=0,this.s=1,this.rx=0,this.ry=0,this.rz=0,this.rz_c=1,this.rz_s=0}setTranslate(t,e){this.tx=t,this.ty=e}setTranslateZ(t){this.tz=t}setRotateCS(t,e){this.rz=void 0,this.rz_c=t,this.rz_s=e}setRotate(t){this.rz=t,this.rz_c=void 0,this.rz_s=void 0}setRotateY(t){this.ry=t}setScale(t){this.s=t}setMeasure(t){this.m=t}}},350:function(t,e,i){"use strict";e.a=class{constructor(t=0,e=0,i=0,s=0){this.x=t,this.y=e,this.width=i,this.height=s}get isEmpty(){return this.width<=0||this.height<=0}union(t){this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.width=Math.max(this.width,t.width),this.height=Math.max(this.height,t.height)}}},352:function(t,e,i){"use strict";i.d(e,"a",(function(){return S})),i.d(e,"b",(function(){return k})),i.d(e,"c",(function(){return w}));var s=i(91),r=i(81),a=i(110),n=i(109),h=i(284),o=i(210),l=i(100),c=i(125),u=i(445),_=i(369),f=i(350),p=Math.PI/180,g=r.a.getLogger("esri.symbols.cim.CIMSymbolDrawHelper");class m{constructor(t){this._t=t}static createIdentity(){return new m([1,0,0,0,1,0])}clone(){var t=this._t;return new m(t.slice())}transform(t){var e=this._t;return[e[0]*t[0]+e[1]*t[1]+e[2],e[3]*t[0]+e[4]*t[1]+e[5]]}static createScale(t,e){return new m([t,0,0,0,e,0])}scale(t,e){var i=this._t;return i[0]*=t,i[1]*=t,i[2]*=t,i[3]*=e,i[4]*=e,i[5]*=e,this}scaleRatio(){return Math.sqrt(this._t[0]*this._t[0]+this._t[1]*this._t[1])}static createTranslate(t,e){return new m([0,0,t,0,0,e])}translate(t,e){var i=this._t;return i[2]+=t,i[5]+=e,this}static createRotate(t){var e=Math.cos(t),i=Math.sin(t);return new m([e,-i,0,i,e,0])}rotate(t){return this.multiply(m.createRotate(t))}multiply(t){var e=this._t,i=t._t,s=e[0]*i[0]+e[3]*i[1],r=e[1]*i[0]+e[4]*i[1],a=e[2]*i[0]+e[5]*i[1]+i[2],n=e[0]*i[3]+e[3]*i[4],h=e[1]*i[3]+e[4]*i[4],o=e[2]*i[3]+e[5]*i[4]+i[5];return e[0]=s,e[1]=r,e[2]=a,e[3]=n,e[4]=h,e[5]=o,this}}class d{constructor(t){this._transfos=[],this._sizeTransfos=[],this._transfos.push(t||m.createIdentity()),this._sizeTransfos.push(t?t.scaleRatio():1)}transformPt(t){return this._transfos[this._transfos.length-1].transform(t)}transformSize(t){return t*this._sizeTransfos[this._sizeTransfos.length-1]}back(){return this._transfos[this._transfos.length-1]}push(t,e){var i=e?t.scaleRatio():1;t.multiply(this.back()),this._transfos.push(t),this._sizeTransfos.push(this._sizeTransfos[this._sizeTransfos.length-1]*i)}pop(){this._transfos.splice(-1,1),this._sizeTransfos.splice(-1,1)}drawSymbol(t,e){if(t)switch(t.type){case"CIMPointSymbol":case"CIMLineSymbol":case"CIMPolygonSymbol":this.drawMultiLayerSymbol(t,e)}}drawMultiLayerSymbol(t,e){if(t){var i=t.symbolLayers;if(i){var s=t.effects;if(s){var r=this.executeEffects(s,e);if(r)for(var a=r.next();a;)this.drawSymbolLayers(i,a),a=r.next()}else this.drawSymbolLayers(i,e)}}}executeEffects(t,e){var i=new u.a(e);for(var s of t){var r=Object(_.a)(s);r&&(i=r.execute(i,s,1))}return i}drawSymbolLayers(t,e){for(var i=t.length;i--;){var s=t[i];if(s&&!1!==s.enable){var r=s.effects;if(r){var a=this.executeEffects(r,e);if(a)for(var n=a.next();n;)this.drawSymbolLayer(s,n),n=a.next()}else this.drawSymbolLayer(s,e)}}}drawSymbolLayer(t,e){switch(t.type){case"CIMSolidFill":this.drawSolidFill(e,t.color);break;case"CIMHatchFill":this.drawHatchFill(t,e);break;case"CIMSolidStroke":this.drawSolidStroke(e,t.color,t.width,t.capStyle,t.joinStyle,t.miterLimit);break;case"CIMCharacterMarker":case"CIMPictureMarker":case"CIMVectorMarker":this.drawMarkerLayer(t,e)}}drawHatchFill(t,e){var i=this._buildHatchPolyline(t,e,1);i&&(this.pushClipPath(e),this.drawMultiLayerSymbol(t.lineSymbol,i),this.popClipPath())}drawMarkerLayer(t,e){var i=t.markerPlacement;if(i){var s=Object(_.b)(i);if(s){var r="CIMMarkerPlacementInsidePolygon"===i.type;r&&this.pushClipPath(e);var a=s.execute(e,i,1);if(a)for(var n=a.next();n;)this.drawMarker(t,n),n=a.next();r&&this.popClipPath()}}else{var o=new h.a;o.tx=e.x,o.ty=e.y,this.drawMarker(t,o)}}drawMarker(t,e){switch(t.type){case"CIMCharacterMarker":case"CIMPictureMarker":this.drawPictureMarker(t,e);break;case"CIMVectorMarker":this.drawVectorMarker(t,e)}}drawPictureMarker(t,e){if(t){var i=t.size||10,s=m.createIdentity(),r=t.anchorPoint;if(r){var a=r.x,n=r.y;"Absolute"!==t.anchorPointUnits&&(a*=i,n*=i),s.translate(-a,-n)}t.rotation&&s.rotate(t.rotation*p),s.translate(t.offsetX||0,t.offsetY||0),s.translate(e.tx,e.ty),this.push(s,!1),this.drawImage(t.url,i,t.scaleX),this.pop()}}drawVectorMarker(t,e){if(t){var i=t.markerGraphics;if(i){var s=t.size,r=t.frame,a=r?r.ymax-r.ymin:0,n=s&&a?s/a:1,h=m.createIdentity();r&&h.translate(.5*-(r.xmax+r.xmin),.5*-(r.ymax+r.ymin));var o=t.anchorPoint;if(o){var l=o.x,c=o.y;"Absolute"!==t.anchorPointUnits&&r&&(l*=r.xmax-r.xmin,c*=r.ymax-r.ymin),h.translate(-l,-c)}for(var u of(1!==n&&h.scale(n,n),t.rotation&&h.rotate(t.rotation*p),h.translate(t.offsetX||0,t.offsetY||0),h.translate(e.tx,e.ty),this.push(h,t.scaleSymbolsProportionally),i))u&&u.symbol&&u.geometry||g.error("Invalid marker graphic",u),this.drawSymbol(u.symbol,u.geometry);this.pop()}}}_buildHatchPolyline(t,e,i){var s=(void 0!==t.separation?t.separation:4)*i,r=void 0!==t.rotation?t.rotation:0;if(0===s)return null;s<0&&(s=-s);for(var a=0,n=.5*s;a>n;)a-=s;for(;a<-n;)a+=s;var h=Object(c.i)();Object(o.a)(h,e),h[0]-=n,h[1]-=n,h[2]+=n,h[3]+=n;for(var l=[[h[0],h[1]],[h[0],h[3]],[h[2],h[3]],[h[2],h[1]]];r>180;)r-=180;for(;r<0;)r+=180;var u,_,f,g,m=Math.cos(r*p),d=Math.sin(r*p),v=-s*d,x=s*m;for(var y of(a=(void 0!==t.offsetX?t.offsetX*i:0)*d-(void 0!==t.offsetY?t.offsetY*i:0)*m,u=f=Number.MAX_VALUE,_=g=-Number.MAX_VALUE,l)){var P=y[0],b=y[1],M=m*P+d*b,C=-d*P+m*b;u=Math.min(u,M),f=Math.min(f,C),_=Math.max(_,M),g=Math.max(g,C)}for(var S=m*u-d*(f=Math.floor(f/s)*s)-v*a/s,w=d*u+m*f-x*a/s,k=m*_-d*f-v*a/s,L=d*_+m*f-x*a/s,I=1+Math.round((g-f)/s),O=[],A=0;A<I;A++)S+=v,w+=x,k+=v,L+=x,O.push([[S,w],[k,L]]);return{paths:O}}}class v extends d{constructor(){super(),this.reset()}reset(){this._xmin=this._ymin=1/0,this._xmax=this._ymax=-1/0,this._clipCount=0}envelope(){return new f.a(this._xmin,this._ymin,this._xmax-this._xmin,this._ymax-this._ymin)}drawSolidFill(t){!t||this._clipCount>0||(Object(l.g)(t)?this._processPath(t.rings,0):Object(l.h)(t)&&this._processPath(t.paths,0))}drawSolidStroke(t,e,i){if(t&&!(this._clipCount>0)){var s=.5*this.transformSize(i);Object(l.g)(t)?this._processPath(t.rings,s):Object(l.h)(t)&&this._processPath(t.paths,s)}}pushClipPath(t){this.drawSolidFill(t),++this._clipCount}popClipPath(){--this._clipCount}drawImage(t,e,i){var s=e/2;this._merge(this.transformPt([0,0]),s)}_processPath(t,e){if(t)for(var i of t){var s=i?i.length:0;if(s>1){this._merge(this.transformPt(i[0]),e);for(var r=1;r<s;++r)this._merge(this.transformPt(i[r]),e)}}}_merge(t,e){t[0]-e<this._xmin&&(this._xmin=t[0]-e),t[0]+e>this._xmax&&(this._xmax=t[0]+e),t[1]-e<this._ymin&&(this._ymin=t[1]-e),t[1]+e>this._ymax&&(this._ymax=t[1]+e)}}class x extends d{constructor(t,e){super(e),this._ctx=t}drawSolidFill(t,e){if(t){if(Object(l.g)(t))this._buildPath(t.rings,!0);else{if(!Object(l.h)(t))return;this._buildPath(t.paths,!0)}var i=this._ctx;i.fillStyle="string"==typeof e?e:"rgba("+Math.round(e[0])+","+Math.round(e[1])+","+Math.round(e[2])+","+e[3]/255+")",i.fill("evenodd")}}drawSolidStroke(t,e,i,s,r,a){if(t&&e&&0!==i){if(Object(l.g)(t))this._buildPath(t.rings,!0);else{if(!Object(l.h)(t))return;this._buildPath(t.paths,!1)}var n=this._ctx;n.strokeStyle="string"==typeof e?e:"rgba("+Math.round(e[0])+","+Math.round(e[1])+","+Math.round(e[2])+","+e[3]/255+")",n.lineWidth=this.transformSize(i)+.5,this._setCapStyle(s),this._setJoinStyle(r),n.miterLimit=a,n.stroke()}}pushClipPath(t){this._ctx.save(),Object(l.g)(t)?this._buildPath(t.rings,!0):Object(l.h)(t)&&this._buildPath(t.paths,!0),this._ctx.clip("evenodd")}popClipPath(){this._ctx.restore()}drawImage(t,e,i){}_buildPath(t,e){var i=this._ctx;if(i.beginPath(),t)for(var s of t){var r=s?s.length:0;if(r>1){var a=this.transformPt(s[0]);i.moveTo(a[0],a[1]);for(var n=1;n<r;++n)a=this.transformPt(s[n]),i.lineTo(a[0],a[1]);e&&i.closePath()}}}_setCapStyle(t){switch(t){case"Butt":this._ctx.lineCap="butt";break;case"Round":this._ctx.lineCap="round";break;case"Square":this._ctx.lineCap="square"}}_setJoinStyle(t){switch(t){case"Bevel":this._ctx.lineJoin="bevel";break;case"Round":this._ctx.lineJoin="round";break;case"Miter":this._ctx.lineJoin="miter"}}}var y=i(427),P=Math.PI,b=P/2,M=r.a.getLogger("esri.symbols.cim.CIMSymbolHelper");function C(t,e){switch(e.type){case"CIMSymbolReference":t.drawSymbol(e.symbol,{type:"point",x:0,y:0});break;case"CIMPointSymbol":t.drawSymbol(e,{type:"point",x:0,y:0});break;case"CIMTextSymbol":break;case"CIMVectorMarker":var i=new h.a;t.drawMarker(e,i)}return t.envelope()}class S{static getEnvelope(t){var e=new v;if(Array.isArray(t)){var i;for(var s of t)i?i.union(C(e,s)):i=C(e,s);return i}return C(e,t)}static getTextureAnchor(t){var e=this.getEnvelope(t);if(!e||e.width<=0||e.height<=0)return[0,0,0];var i=96/72,s=(e.x+.5*e.width)*i,r=-(e.y+.5*e.height)*i,a=e.width*i+2,n=e.height*i+2;return[s/a,r/n,n]}static rasterize(t,e,i,s=!0){var r=i||this.getEnvelope(e);if(!r||r.width<=0||r.height<=0)return[null,0,0,0,0];var a=96/72,n=(r.x+.5*r.width)*a,o=(r.y+.5*r.height)*a;t.width=r.width*a,t.height=r.height*a,i||(t.width+=2,t.height+=2);var l=t.getContext("2d"),c=m.createScale(a,-a);c.translate(.5*t.width-n,.5*t.height+o);var u=new x(l,c);switch(e.type){case"CIMPointSymbol":u.drawSymbol(e,{type:"point",x:0,y:0});break;case"CIMVectorMarker":var _=new h.a;u.drawMarker(e,_)}var f=l.getImageData(0,0,t.width,t.height),p=new Uint8Array(f.data);if(s)for(var g,d=0;d<p.length;d+=4)g=p[d+3]/255,p[d]=p[d]*g,p[d+1]=p[d+1]*g,p[d+2]=p[d+2]*g;return[p,t.width,t.height,-n/t.width,-o/t.height]}static fromSimpleMarker(t){var e,i,s,r=50,a=t.style;if("circle"===a||"esriSMSCircle"===a){var n=Math.acos(.995),h=Math.ceil(P/n/4);0===h&&(h=1),n=b/h,h*=4;var o=[];o.push([r,0]);for(var l=1;l<h;l++)o.push([r*Math.cos(l*n),-r*Math.sin(l*n)]);o.push([r,0]),e={rings:[o]},i={xmin:-r,ymin:-r,xmax:r,ymax:r}}else if("cross"===a||"esriSMSCross"===a){e={rings:[[[0,r],[0,0],[r,0],[r,-0],[0,-0],[0,-r],[-0,-r],[-0,-0],[-r,-0],[-r,0],[-0,0],[-0,r],[0,r]]]},i={xmin:-r,ymin:-r,xmax:r,ymax:r}}else if("diamond"===a||"esriSMSDiamond"===a)e={rings:[[[-r,0],[0,r],[r,0],[0,-r],[-r,0]]]},i={xmin:-r,ymin:-r,xmax:r,ymax:r};else if("square"===a||"esriSMSSquare"===a)e={rings:[[[-r,-r],[-r,r],[r,r],[r,-r],[-r,-r]]]},i={xmin:-r,ymin:-r,xmax:r,ymax:r};else if("x"===a||"esriSMSX"===a){e={rings:[[[0,0],[50,r],[r,50],[0,0],[r,-50],[50,-r],[0,-0],[-50,-r],[-r,-50],[-0,0],[-r,50],[-50,r],[0,0]]]},i={xmin:-r,ymin:-r,xmax:r,ymax:r}}else if("triangle"===a||"esriSMSTriangle"===a){var c=57.735026918962575,u=-c,_=2/3*100,f=_-100;e={rings:[[[u,f],[0,_],[c,f],[u,f]]]},i={xmin:u,ymin:f,xmax:c,ymax:_}}else"arrow"!==a&&"esriSMSArrow"!==a||(e={rings:[[[-50,50],[50,0],[-50,-50],[-33,-20],[-33,20],[-50,50]]]},i={xmin:-r,ymin:-r,xmax:r,ymax:r});if(e&&i){var p=[{type:"CIMSolidFill",enable:!0,color:t.color}];t.outline&&p.push({type:"CIMSolidStroke",enable:!0,width:t.outline.width,color:t.outline.color});var g={type:"CIMPolygonSymbol",symbolLayers:p};s={type:"CIMPointSymbol",symbolLayers:[{type:"CIMVectorMarker",enable:!0,rotation:t.angle,size:t.size,offsetX:t.xoffset,offsetY:t.yoffset,frame:i,markerGraphics:[{type:"CIMMarkerGraphic",geometry:e,symbol:g}]}]}}return s}static fromCIMHatchFill(t){for(var e=void 0!==t.separation?t.separation:4,i=e/2,s=this._getLineSymbolPeriod(t.lineSymbol)||4;s<4;)s*=2;var r=s/2;return{type:"CIMVectorMarker",frame:{xmin:-r,xmax:r,ymin:-i,ymax:i},markerGraphics:[{type:"CIMMarkerGraphic",geometry:{paths:[[[-r,0],[r,0]]]},symbol:t.lineSymbol}],size:e}}static _getLineSymbolPeriod(t){if(t){var e=this._getEffectsRepeat(t.effects);if(e)return e;if(t.symbolLayers)for(var i of t.symbolLayers){var s=this._getEffectsRepeat(i.effects);if(s)return s;if(i){var r=this._getPlacementRepeat(i.markerPlacement);if(r)return r}}}return 0}static _getEffectsRepeat(t){if(t)for(var e of t)if(e)switch(e.type){case"CIMGeometricEffectDashes":var i=e.dashTemplate;if(i&&i.length){var s=0;for(var r of i)s+=r;return 1&i.length&&(s*=2),s}break;case"CIMGeometricEffectWave":return e.period;default:M.error("unsupported geometric effect type ".concat(e.type))}return 0}static _getPlacementRepeat(t){if(t)switch(t.type){case"CIMMarkerPlacementAlongLineSameSize":case"CIMMarkerPlacementAlongLineRandomSize":case"CIMMarkerPlacementAlongLineVariableSize":var e=t.placementTemplate;if(e&&e.length){var i=0;for(var s of e)i+=s;return 1&e.length&&(i*=2),i}}return 0}static fromCIMInsidePolygon(t){var e,i,r,a,n=t.markerPlacement,h=Object(s.a)({type:t.type},t);return h.markerPlacement=null,h.anchorPoint=null,!0===n.shiftOddRows?(i=n.stepX/2,r=n.stepY,a=2*n.stepY,e=[{x:-i,y:0},{x:i,y:0},{x:0,y:r},{x:0,y:-r}].map((t=>({type:"CIMMarkerGraphic",geometry:t,symbol:{type:"CIMPointSymbol",symbolLayers:[h]}})))):(i=n.stepX/2,r=n.stepY/2,a=n.stepY,e=[{type:"CIMMarkerGraphic",geometry:{x:0,y:0},symbol:{type:"CIMPointSymbol",symbolLayers:[h]}}]),{type:"CIMVectorMarker",frame:{xmin:-i,xmax:i,ymin:-r,ymax:r},markerGraphics:e,size:a}}static getFillColor(t){if(!t)return null;switch(t.type){case"CIMPolygonSymbol":if(t.symbolLayers)for(var e of t.symbolLayers){var i=S.getFillColor(e);if(null!=i)return i}break;case"CIMTextSymbol":return S.getFillColor(t.symbol);case"CIMSolidFill":return t.color}}static getStrokeColor(t){if(t)switch(t.type){case"CIMPolygonSymbol":case"CIMLineSymbol":if(t.symbolLayers)for(var e of t.symbolLayers){var i=S.getStrokeColor(e);if(void 0!==i)return i}break;case"CIMTextSymbol":return S.getStrokeColor(t.symbol);case"CIMSolidStroke":return t.color}}static getStrokeWidth(t){if(t)switch(t.type){case"CIMPolygonSymbol":case"CIMLineSymbol":if(t.symbolLayers)for(var e of t.symbolLayers){var i=S.getStrokeWidth(e);if(void 0!==i)return i}break;case"CIMTextSymbol":return S.getStrokeWidth(t.symbol);case"CIMSolidStroke":case"CIMGradientStroke":case"CIMPictureStroke":return t.width}}static getSize(t){if(t)switch(t.type){case"CIMPointSymbol":case"CIMLineSymbol":case"CIMPolygonSymbol":var e=0;if(t.symbolLayers)for(var i of t.symbolLayers){var s=S.getSize(i);s>e&&(e=s)}return e;case"CIMSolidStroke":case"CIMPictureStroke":case"CIMGradientStroke":return t.width;case"CIMCharacterMarker":case"CIMPictureMarker":case"CIMVectorMarker":return t.size}}static getMarkerScaleRatio(t){if(t)switch(t.type){case"CIMVectorMarker":if(!1!==t.scaleSymbolsProportionally&&t.frame){var e=t.frame.ymax-t.frame.ymin;return t.size/e}}return 1}}class w{static rasterizeSimpleFill(t,e,i){"solid"!==e&&"none"!==e&&"esriSFSSolid"!==e&&"esriSFSNull"!==e||console.error("Unexpected: style does not require rasterization");var s=Object(a.p)(Math.ceil(i)),r=this._isHorizontalOrVertical(e)?8*s:16*s,n=2*s;t.width=r,t.height=r;var h=t.getContext("2d");h.strokeStyle="#FFFFFF",h.lineWidth=s,h.beginPath(),"vertical"!==e&&"cross"!==e&&"esriSFSCross"!==e&&"esriSFSVertical"!==e||(h.moveTo(r/2,-n),h.lineTo(r/2,r+n)),"horizontal"!==e&&"cross"!==e&&"esriSFSCross"!==e&&"esriSFSHorizontal"!==e||(h.moveTo(-n,r/2),h.lineTo(r+n,r/2)),"forward-diagonal"!==e&&"diagonal-cross"!==e&&"esriSFSDiagonalCross"!==e&&"esriSFSForwardDiagonal"!==e||(h.moveTo(-n,-n),h.lineTo(r+n,r+n),h.moveTo(r-n,-n),h.lineTo(r+n,n),h.moveTo(-n,r-n),h.lineTo(n,r+n)),"backward-diagonal"!==e&&"diagonal-cross"!==e&&"esriSFSBackwardDiagonal"!==e&&"esriSFSDiagonalCross"!==e||(h.moveTo(r+n,-n),h.lineTo(-n,r+n),h.moveTo(n,-n),h.lineTo(-n,n),h.moveTo(r+n,r-n),h.lineTo(r-n,r+n)),h.stroke();for(var o,l=h.getImageData(0,0,t.width,t.height),c=new Uint8Array(l.data),u=0;u<c.length;u+=4)o=c[u+3]/255,c[u]=c[u]*o,c[u+1]=c[u+1]*o,c[u+2]=c[u+2]*o;return[c,t.width,t.height]}static rasterizeSimpleLine(t,e){var i;switch(e){case"butt":i="Butt";break;case"square":i="Square";break;default:i="Round"}var s,r="Butt"===i;switch(t){case"dash":case"esriSLSDash":s=r?[4,3]:[3,4];break;case"dash-dot":case"esriSLSDashDot":s=r?[4,3,1,3]:[3,4,0,4];break;case"dot":case"esriSLSDot":s=r?[1,3]:[0,4];break;case"long-dash":case"esriSLSLongDash":s=r?[8,3]:[7,4];break;case"long-dash-dot":case"esriSLSLongDashDot":s=r?[8,3,1,3]:[7,4,0,4];break;case"long-dash-dot-dot":case"esriSLSDashDotDot":s=r?[8,3,1,3,1,3]:[7,4,0,4,0,4];break;case"short-dash":case"esriSLSShortDash":s=r?[4,1]:[3,2];break;case"short-dash-dot":case"esriSLSShortDashDot":s=r?[4,1,1,1]:[3,2,0,2];break;case"short-dash-dot-dot":case"esriSLSShortDashDotDot":s=r?[4,1,1,1,1,1]:[3,2,0,2,0,2];break;case"short-dot":case"esriSLSShortDot":s=r?[1,1]:[0,2];break;case"solid":case"esriSLSSolid":case"none":M.error("Unexpected: style does not require rasterization"),s=[0,0];break;default:M.error("Tried to rasterize SLS, but found an unexpected style: ".concat(t,"!")),s=[0,0]}return this.rasterizeDash(s,i)}static rasterizeDash(t,e){var i="Butt"===e,s="Square"===e,r=!i&&!s,a=15,n=0;for(var h of t)n+=h;for(var o=n*a,l=31*o,c=new Float32Array(l),u=r?225:a,_=0;_<l;++_)c[_]=u;var f=7.5,p=0,g=0,m=!0;for(var d of t){p=g,g+=d*a;for(var v=p;v<g;){for(var x=0;x<31;){var P=x*o+v,b=r?(x-15)*(x-15):Math.abs(x-15);c[P]=m?i?Math.max(Math.max(p+f-v,b),Math.max(v-g+f,b)):b:r?Math.min((v-p)*(v-p)+b,(v-g)*(v-g)+b):s?Math.min(Math.max(v-p,b),Math.max(g-v,b)):Math.min(Math.max(v-p+f,b),Math.max(g+f-v,b)),x++}v++}m=!m}for(var M=c.length,C=new Uint8Array(4*M),S=0;S<M;++S){var w=(r?Math.sqrt(c[S]):c[S])/a;Object(y.a)(w,C,4*S)}return[C,o,31]}static _isHorizontalOrVertical(t){return"vertical"===t||"horizontal"===t||"cross"===t||"esriSFSCross"===t||"esriSFSVertical"===t||"esriSFSHorizontal"===t}}class k{static findApplicableOverrides(t,e,i){if(e){if(t.primitiveName){var s=!1;for(var r of i)if(r.primitiveName===t.primitiveName){s=!0;break}if(!s)for(var a of e)a.primitiveName===t.primitiveName&&i.push(a)}switch(t.type){case"CIMPointSymbol":case"CIMLineSymbol":case"CIMPolygonSymbol":if(t.effects)for(var n of t.effects)k.findApplicableOverrides(n,e,i);if(t.symbolLayers)for(var h of t.symbolLayers)k.findApplicableOverrides(h,e,i);break;case"CIMTextSymbol":break;case"CIMSolidStroke":case"CIMPictureStroke":case"CIMGradientStroke":case"CIMSolidFill":case"CIMPictureFill":case"CIMHatchFill":case"CIMGradientFill":case"CIMVectorMarker":case"CIMCharacterMarker":case"CIMPictureMarker":if(t.effects)for(var o of t.effects)k.findApplicableOverrides(o,e,i);if(t.markerPlacement&&k.findApplicableOverrides(t.markerPlacement,e,i),"CIMVectorMarker"===t.type){if(t.markerGraphics)for(var l of t.markerGraphics)k.findApplicableOverrides(l,e,i),k.findApplicableOverrides(l.symbol,e,i)}else"CIMCharacterMarker"===t.type?k.findApplicableOverrides(t.symbol,e,i):"CIMHatchFill"===t.type&&k.findApplicableOverrides(t.lineSymbol,e,i)}}}static applyOverrides(t,e,i,s){if(e){var r=t=>t?t.charAt(0).toLowerCase()+t.substr(1):t;if(t.primitiveName)for(var a of e)if(a.primitiveName===t.primitiveName){var n=r(a.propertyName);if(s&&s.push({cim:t,nocapPropertyName:n,value:t[n]}),a.expression&&(a.value=k.toValue(a.propertyName,a.expression)),i){var h=!1;for(var o of i)o.primitiveName===t.primitiveName&&(h=!0);h||i.push(a)}t[n]=a.value}switch(t.type){case"CIMPointSymbol":case"CIMLineSymbol":case"CIMPolygonSymbol":if(t.effects)for(var l of t.effects)k.applyOverrides(l,e,i,s);if(t.symbolLayers)for(var c of t.symbolLayers)k.applyOverrides(c,e,i,s);break;case"CIMTextSymbol":break;case"CIMSolidStroke":case"CIMSolidFill":case"CIMVectorMarker":if(t.effects)for(var u of t.effects)k.applyOverrides(u,e,i,s);if("CIMVectorMarker"===t.type&&t.markerGraphics)for(var _ of t.markerGraphics)k.applyOverrides(_,e,i,s),k.applyOverrides(_.symbol,e,i,s)}}}static restoreOverrides(t){for(var e of t)e.cim[e.nocapPropertyName]=e.value}static buildOverrideKey(t){var e="";for(var i of t)void 0!==i.value&&(e+="".concat(i.primitiveName).concat(i.propertyName).concat(JSON.stringify(i.value)));return e}static toValue(t,e){if("DashTemplate"===t)return e.split(" ").map((t=>Number(t)));if("Color"===t){var i=new n.a(e).toRgba();return i[3]*=255,i}return e}}},369:function(t,e,i){"use strict";i.d(e,"a",(function(){return at})),i.d(e,"b",(function(){return nt}));var s=i(92),r=i(100),a=i(153);class n{static local(){return null===n.instance&&(n.instance=new n),n.instance}execute(t,e,i){return new h(t,e,i)}}n.instance=null;class h{constructor(t,e,i){this._inputGeometries=t,this._angleTolerance=void 0!==e.angleTolerance?e.angleTolerance:120,this._maxCosAngle=Math.cos((1-Math.abs(this._angleTolerance)/180)*Math.PI)}next(){for(var t=this._inputGeometries.next();t;){if(Object(r.g)(t)){this._isClosed=!0;var e=Object(s.a)(t);return this._processMultipath(e.rings),e}if(Object(r.h)(t)){this._isClosed=!1;var i=Object(s.a)(t);return this._processMultipath(i.paths),i}if(Object(r.d)(t)){if(this._maxCosAngle)return t;this._isClosed=!0;var a=[[t.xmin,t.ymin],[t.xmin,t.ymax],[t.xmax,t.ymax],[t.xmax,t.ymin],[t.xmin,t.ymin]];return this._processPath(a),{rings:[a]}}t=this._inputGeometries.next()}return null}_processMultipath(t){if(t)for(var e of t)this._processPath(e)}_processPath(t){if(t){var e,i,s,r,n,h,o=t.length,l=t[0];this._isClosed&&++o;for(var c=1;c<o;++c){var u,_=(u=this._isClosed&&c===o-1?t[0]:t[c])[0]-l[0],f=u[1]-l[1],p=Math.sqrt(_*_+f*f);c>1&&p>0&&s>0&&(e*_+i*f)/p/s<=this._maxCosAngle&&Object(a.j)(l,1),1===c&&(r=_,n=f,h=p),p>0&&(l=u,e=_,i=f,s=p)}this._isClosed&&s>0&&h>0&&(e*r+i*n)/h/s<=this._maxCosAngle&&Object(a.j)(t[0],1)}}}var o=.03;class l{constructor(){this._path=[]}path(){return this._path}addPath(t,e){e||t.reverse(),Array.prototype.push.apply(this._path,t),e||t.reverse()}static mergePath(t,e){e&&Array.prototype.push.apply(t,e)}startPath(t){this._path.push(t)}lineTo(t){this._path.push(t)}close(){var t=this._path;t.length>1&&(t[0][0]===t[t.length-1][0]&&t[0][1]===t[t.length-1][1]||t.push([t[0][0],t[0][1]]))}}class c{constructor(t=0,e=!1){}normalize(t){var e=Math.sqrt(t[0]*t[0]+t[1]*t[1]);t[0]/=e,t[1]/=e}calculateLength(t,e){var i=e[0]-t[0],s=e[1]-t[1];return Math.sqrt(i*i+s*s)}calculateSegLength(t,e){return this.calculateLength(t[e],t[e+1])}calculatePathLength(t){for(var e=0,i=t?t.length:0,s=0;s<i-1;++s)e+=this.calculateSegLength(t,s);return e}calculatePathArea(t){for(var e=0,i=t?t.length:0,s=0;s<i-1;++s)e+=(t[s+1][0]-t[s][0])*(t[s+1][1]+t[s][1]);return e/2}getCoord2D(t,e,i){return[t[0]+(e[0]-t[0])*i,t[1]+(e[1]-t[1])*i]}getSegCoord2D(t,e,i){return this.getCoord2D(t[e],t[e+1],i)}getAngle(t,e,i){var s=e[0]-t[0],r=e[1]-t[1];return Math.atan2(r,s)}getSegAngle(t,e,i){return this.getAngle(t[e],t[e+1],i)}getAngleCS(t,e,i){var s=e[0]-t[0],r=e[1]-t[1],a=Math.sqrt(s*s+r*r);return a>0?[s/a,r/a]:[1,0]}getSegAngleCS(t,e,i){return this.getAngleCS(t[e],t[e+1],i)}cut(t,e,i,s){return[i<=0?t[e]:this.getSegCoord2D(t,e,i),s>=1?t[e+1]:this.getSegCoord2D(t,e,s)]}addSegment(t,e,i){i&&t.push(e[0]),t.push(e[1])}getSubCurve(t,e,i){var s=[];return this.appendSubCurve(s,t,e,i)?s:null}appendSubCurve(t,e,i,s){for(var r=e?e.length-1:0,a=0,n=!0,h=0;h<r;){var o=this.calculateSegLength(e,h);if(0!==o){if(n){if(a+o>i){var l=(i-a)/o,c=1,u=!1;a+o>=s&&(c=(s-a)/o,u=!0);var _=this.cut(e,h,l,c);if(_&&this.addSegment(t,_,n),u)break;n=!1}}else{if(a+o>s){var f=this.cut(e,h,0,(s-a)/o);f&&this.addSegment(t,f,n);break}this.addSegment(t,[e[h],e[h+1]],n)}a+=o,++h}else++h}return!0}getCIMPointAlong(t,e){for(var i=t?t.length-1:0,s=0,r=-1;r<i;){++r;var a=this.calculateSegLength(t,r);if(0!==a){if(s+a>e){var n=(e-s)/a;return this.getCoord2D(t[r],t[r+1],n)}s+=a}}return null}isEmpty(t,e){if(!t||t.length<=1)return!0;for(var i=t?t.length-1:0,s=-1;s<i;){if(t[++s+1][0]!==t[s][0]||t[s+1][1]!==t[s][1])return!1;if(e&&t[s+1][2]!==t[s][2])return!1}return!0}offset(t,e,i,s,r){if(!t||t.length<2)return null;var a=t.length,n=t[0][0]===t[a-1][0]&&t[0][1]===t[a-1][1];if(n){if(t.length<3)return null;--a}for(var h=[],o=n?t[a-1]:null,l=t[0],c=0;c<a;c++){var u=c===a-1?n?t[0]:null:t[c+1];if(o)if(u){var _=[u[0]-l[0],u[1]-l[1]];this.normalize(_);var f=[l[0]-o[0],l[1]-o[1]];this.normalize(f);var p=f[0]*_[1]-f[1]*_[0],g=f[0]*_[0]+f[1]*_[1];if(p>=0==e<=0){var m=[_[0]-f[0],_[1]-f[1]];this.normalize(m);var d=Math.sqrt((1+g)/2),v=-Math.abs(e)/d;h.push([l[0]-m[0]*v,l[1]-m[1]*v])}else switch(i){case"Mitered":var x=Math.sqrt((1+g)/2);if(x>0&&1/x<s){var y=[_[0]-f[0],_[1]-f[1]];this.normalize(y);var P=Math.abs(e)/x;h.push([l[0]-y[0]*P,l[1]-y[1]*P]);break}case"Bevelled":h.push([l[0]+f[1]*e,l[1]-f[0]*e]),h.push([l[0]+_[1]*e,l[1]-_[0]*e]);break;case"Rounded":h.push([l[0]+f[1]*e,l[1]-f[0]*e]);for(var b=.2,M=1;M<5;M++,b+=.2){var C=[f[1]*(1-b)+_[1]*b,-f[0]*(1-b)-_[0]*b];this.normalize(C),h.push([l[0]+C[0]*e,l[1]+C[1]*e])}h.push([l[0]+_[1]*e,l[1]-_[0]*e]);break;case"Square":default:if(p<0)h.push([l[0]+(f[1]+f[0])*e,l[1]+(f[1]-f[0])*e]),h.push([l[0]+(_[1]-_[0])*e,l[1]-(_[0]+_[1])*e]);else{var S=Math.sqrt((1+Math.abs(g))/2),w=[_[0]-f[0],_[1]-f[1]];this.normalize(w);var k=e/S;h.push([l[0]-w[0]*k,l[1]-w[1]*k])}}}else{var L=[l[0]-o[0],l[1]-o[1]];this.normalize(L),h.push([l[0]+L[1]*e,l[1]-L[0]*e])}else{var I=[u[0]-l[0],u[1]-l[1]];this.normalize(I),h.push([l[0]+I[1]*e,l[1]-I[0]*e])}o=l,l=u}return n&&h.push([h[0][0],h[0][1]]),h}}var u=1.7320508075688772;class _{static local(){return null===_.instance&&(_.instance=new _),_.instance}execute(t,e,i){return new f(t,e,i)}}_.instance=null;class f extends a.a{constructor(t,e,i){super(t,!1,!0),this._curveHelper=new c,this._width=(void 0!==e.width?e.width:5)*i,this._arrowType=void 0!==e.geometricEffectArrowType?e.geometricEffectArrowType:"OpenEnded",this._offsetFlattenError=o*i}processPath(t){switch(this._arrowType){case"OpenEnded":default:return this._constructSimpleArrow(t,!0);case"Block":return this._constructSimpleArrow(t,!1);case"Crossed":return this._constructCrossedArrow(t)}}_constructSimpleArrow(t,e){var i=this._curveHelper.calculatePathLength(t),s=this._width;i<2*s&&(s=i/2);var r=this._curveHelper.getSubCurve(t,0,i-s);if(!r)return null;var a=s/2;if(this._curveHelper.isEmpty(r,!1))return null;var n=this._constructOffset(r,-a);if(!n)return null;var h=this._constructOffset(r,a);if(!h)return null;var o=this._constructArrowBasePoint(n,-a/2);if(!o)return null;var c=this._constructArrowBasePoint(h,a/2);if(!c)return null;var u=t[t.length-1];e||(this._makeControlPoint(h,!0),this._makeControlPoint(n,!0));var _=new l;return _.addPath(h,!0),_.lineTo(c),this._makeControlPoint(_.path()),_.lineTo(u),this._makeControlPoint(_.path()),_.lineTo(o),this._makeControlPoint(_.path()),_.addPath(n,!1),e?{paths:[_.path()]}:(_.close(),{rings:[_.path()]})}_constructCrossedArrow(t){var e=this._curveHelper.calculatePathLength(t),i=this._width;e<3.732050807568877*i&&(i=e/3.732050807568877);var s=this._curveHelper.getSubCurve(t,0,e-i*(1+u));if(!s)return null;var r=i/2;if(this._curveHelper.isEmpty(s,!1))return null;var a=this._constructOffset(s,r);if(!a)return null;var n=this._constructOffset(s,-r);if(!n)return null;var h=this._curveHelper.getSubCurve(t,0,e-i);if(!h)return null;if(this._curveHelper.isEmpty(h,!1))return null;var o=this._constructOffset(h,r);if(!o)return null;var c=this._constructOffset(h,-r);if(!c)return null;var _=o[o.length-1],f=this._constructArrowBasePoint(o,r/2);if(!f)return null;var p=c[c.length-1],g=this._constructArrowBasePoint(c,-r/2);if(!g)return null;var m=t[t.length-1];this._makeControlPoint(a,!1),this._makeControlPoint(n,!1);var d=new l;return d.addPath(a,!0),this._makeControlPoint(d.path()),d.lineTo(p),d.lineTo(g),this._makeControlPoint(d.path()),d.lineTo(m),this._makeControlPoint(d.path()),d.lineTo(f),this._makeControlPoint(d.path()),d.lineTo(_),this._makeControlPoint(d.path()),d.addPath(n,!1),{paths:[d.path()]}}_constructOffset(t,e){return this._curveHelper.offset(t,e,"Rounded",4,this._offsetFlattenError)}_constructArrowBasePoint(t,e){if(!t||t.length<2)return null;var i=t[t.length-2],s=t[t.length-1],r=[s[0]-i[0],s[1]-i[1]];return this._curveHelper.normalize(r),[s[0]+r[1]*e,s[1]-r[0]*e]}_makeControlPoint(t,e=!1){Object(a.j)(e?t[0]:t[t.length-1],1)}}class p{static local(){return null===p.instance&&(p.instance=new p),p.instance}execute(t,e,i){return new g(t,e,i)}}p.instance=null;class g{constructor(t,e,i){this._inputGeometries=t,this._curveHelper=new c,this._size=(void 0!==e.size?e.size:1)*i,this._offsetFlattenError=o*i}next(){for(var t=this._inputGeometries.next();t;){if(Object(r.d)(t))if(this._size>0){var e=[[t.xmin,t.ymin],[t.xmin,t.ymax],[t.xmax,t.ymax],[t.xmax,t.ymin],[t.xmin,t.ymin]],i=this._curveHelper.offset(e,this._size,"Rounded",4,this._offsetFlattenError);if(i)return{rings:[i]}}else{if(!(this._size<0))return t;if(Math.min(t.xmax-t.xmin,t.ymax-t.ymin)+2*this._size>0)return{xmin:t.xmin-this._size,xmax:t.xmax+this._size,ymin:t.ymin-this._size,ymax:t.ymax+this._size}}if(Object(r.g)(t)){if(0===this._size)return t;var s=[];for(var a of t.rings){var n=this._curveHelper.offset(a,this._size,"Rounded",4,this._offsetFlattenError);n&&s.push(n)}if(s.length)return{rings:s}}if(Object(r.h)(t)&&this._size>0){var h=[];for(var o of t.paths)if(o&&o.length>1){var l=this._curveHelper.offset(o,this._size,"Rounded",4,this._offsetFlattenError),c=this._curveHelper.offset(o,-this._size,"Rounded",4,this._offsetFlattenError);if(l&&c){for(var u=c.length-1;u>=0;u--)l.push(c[u]);l.push([l[0][0],l[0][1]]),h.push(l)}}if(h.length)return{rings:h}}Object(r.f)(t)&&this._size,t=this._inputGeometries.next()}return null}}class m{static local(){return null===m.instance&&(m.instance=new m),m.instance}execute(t,e,i){return new d(t,e,i)}}m.instance=null;class d extends a.a{constructor(t,e,i){super(t,!0,!0),this._curveHelper=new c,this._beginCut=(void 0!==e.beginCut?e.beginCut:1)*i,this._endCut=(void 0!==e.endCut?e.endCut:1)*i,this._middleCut=(void 0!==e.middleCut?e.middleCut:0)*i,this._invert=void 0!==e.invert&&e.invert,this._beginCut<0&&(this._beginCut=0),this._endCut<0&&(this._endCut=0),this._middleCut<0&&(this._middleCut=0)}processPath(t){var e=this._beginCut,i=this._endCut,s=this._middleCut,r=this._curveHelper.calculatePathLength(t),a=[];if(this._invert)if(0===e&&0===i&&0===s);else if(e+i+s>=r)a.push(t);else{var n=this._curveHelper.getSubCurve(t,0,e);n&&a.push(n),(n=this._curveHelper.getSubCurve(t,.5*(r-s),.5*(r+s)))&&a.push(n),(n=this._curveHelper.getSubCurve(t,r-i,i))&&a.push(n)}else if(0===e&&0===i&&0===s)a.push(t);else if(e+i+s>=r);else if(0===s){var h=this._curveHelper.getSubCurve(t,e,r-i);h&&a.push(h)}else{var o=this._curveHelper.getSubCurve(t,e,.5*(r-s));o&&a.push(o),(o=this._curveHelper.getSubCurve(t,.5*(r+s),r-i))&&a.push(o)}return 0===a.length?null:{paths:a}}}class v{constructor(){this._values=[],this.extPtGap=0,this.ctrlPtGap=0,this._length=0,this._currentValue=0}isEmpty(){return 0===this._values.length}size(){return this._values.length}init(t,e,i=!0){if(this._setEmpty(),!t||0===t.length)return!1;for(var s=0;s<t.length;s++){var r=Math.abs(t[s]);i&&r<1e-7&&(r=1e-7),this._values.push(r),this._length+=r}return e&&1&t.length&&(this._length*=2),0!==this._length&&(this.ctrlPtGap=this.extPtGap=0,this._currentValue=-1,!0)}scale(t){for(var e=this._values?this._values.length:0,i=0;i<e;++i)this._values[i]*=t;this._length*=t,this.extPtGap*=t,this.ctrlPtGap*=t}addValue(t){this._length+=t,this._values.push(t)}firstValue(){return this._values[0]}lastValue(){return this._values[this._values.length-1]}nextValue(){return this._currentValue++,this._currentValue===this._values.length&&(this._currentValue=0),this._values[this._currentValue]}reset(){this._currentValue=-1}length(){return this._length}_setEmpty(){this.extPtGap=this.ctrlPtGap=this._length=0,this._currentValue=-1,this._values.length=0}}class x{constructor(){this.reset()}reset(){this.segment=-1,this.segmentLength=0,this.abscissa=0,this.isPathEnd=!1,this.isPartEnd=!1}isValid(){return-1!==this.segment}copyTo(t){t.segment=this.segment,t.segmentLength=this.segmentLength,t.abscissa=this.abscissa,t.isPathEnd=this.isPathEnd,t.isPartEnd=this.isPartEnd}}class y extends c{constructor(t=0,e=!1){super(t,e),this._tolerance=o,this._currentPosition=new x}updateTolerance(t){this._tolerance=o*t}init(t,e,i=!0){return i?(this._patternLength=e.length(),this._partExtPtGap=e.extPtGap,this._partCtrlPtGap=e.ctrlPtGap):(this._patternLength=0,this._partExtPtGap=0,this._partCtrlPtGap=0),this._currentPosition.reset(),this._partSegCount=0,this._path=t,this._seg=-1,this.setPosAtNextPart()}curPositionIsValid(){return this._currentPosition.isValid()}nextPosition(t,e=0){var i=new x;return!!this._nextPosition(t,i,null,e)&&(i.copyTo(this._currentPosition),!0)}curPointAndAngle(t){t.pt=this._getPoint(this._currentPosition);var[e,i]=this._getAngle(this._currentPosition);t.ca=e,t.sa=i}nextPointAndAngle(t,e,i=0){var s=new x;if(!this._nextPosition(t,s,null,i))return!1;s.copyTo(this._currentPosition),e.pt=this._getPoint(s);var[r,a]=this._getAngle(s);return e.ca=r,e.sa=a,!0}nextCurve(t){if(0===t)return null;var e=[],i=new x;return this._nextPosition(t,i,e,1)?(i.copyTo(this._currentPosition),e):null}isPathEnd(){return this._currentPosition.isPathEnd}getPathEnd(){if(-1===this._currentPosition.segment)throw new Error("missing segment");return this._path[this._currentPosition.segment+1]}_nextPosition(t,e,i,s){if(this._currentPosition.isPathEnd)return!1;var r=this._currentPosition.abscissa;for(this._currentPosition.segmentLength>0&&(r/=this._currentPosition.segmentLength),this._currentPosition.copyTo(e);e.abscissa+t*this._partLengthRatio>e.segmentLength+this._tolerance;){if(i){if(0===i.length)if(0===r){var a=this._path[e.segment];i.push([a[0],a[1]])}else i.push(this.getSegCoord2D(this._path,e.segment,r));var n=this._path[e.segment+1];i.push([n[0],n[1]])}if(r=0,t-=(e.segmentLength-e.abscissa)/this._partLengthRatio,this._partSegCount)e.segment=this.nextSegment(),e.segmentLength=this.calculateSegLength(this._path,e.segment),e.abscissa=0,this._partSegCount--;else{if(!this.setPosAtNextPart())return 0!==s&&(e.segmentLength=this.calculateSegLength(this._path,e.segment),e.isPartEnd=!0,1===s?(e.abscissa=e.segmentLength,e.isPathEnd=!0):e.abscissa=e.segmentLength+t,!0);this._currentPosition.copyTo(e)}}if(e.abscissa+=t*this._partLengthRatio,i){if(0===i.length)if(0===r){var h=this._path[e.segment];i.push([h[0],h[1]])}else i.push(this.getSegCoord2D(this._path,e.segment,r));var o=e.abscissa/e.segmentLength;if(1===o){var l=this._path[e.segment+1];i.push([l[0],l[1]])}else i.push(this.getSegCoord2D(this._path,e.segment,o))}return this._partSegCount||Math.abs(e.abscissa-e.segmentLength)<this._tolerance&&(e.isPathEnd=this._partIsLast,e.isPartEnd=!0),!0}_getPoint(t){if(-1===t.segment)throw new Error("missing segment");var e=t.segmentLength<=0?0:t.abscissa/t.segmentLength;return this.getSegCoord2D(this._path,t.segment,e)}_getAngle(t){if(-1===t.segment)throw new Error("missing segment");var e=t.segmentLength<=0?0:t.abscissa/t.segmentLength;return this.getSegAngleCS(this._path,t.segment,e)}setPosAtNextPart(){for(;this._partSegCount;)this.hasNextSegment()&&this.nextSegment(),this._partSegCount--;if(!this.hasNextSegment())return!1;for(this._partLength=0,this._partIsLast=!0,this._partSegCount=0;this.hasNextSegment();)if(this._partLength+=this.calculateSegLength(this._path,this.nextSegment()),this._partSegCount++,1===Object(a.f)(this._path[this.getEndPointIndex()])){this._partIsLast=!this.hasNextSegment();break}for(var t=this._partSegCount;t;)this.previousSegment(),--t;this._currentPosition.segment=this.nextSegment(),this._currentPosition.segmentLength=this.calculateSegLength(this._path,this._currentPosition.segment),this._currentPosition.abscissa=0,this._currentPosition.isPathEnd=this._currentPosition.isPartEnd=!1,--this._partSegCount;var e=this.getStartPointIndex();this._ctrlPtBegin=1===Object(a.f)(this._path[e]);var i=e+this._partSegCount+1;if(i>=this._path.length&&(i=0),this._ctrlPtEnd=1===Object(a.f)(this._path[i]),this._patternLength>0){var s=this._ctrlPtBegin?this._partCtrlPtGap:this._partExtPtGap,r=this._ctrlPtEnd?this._partCtrlPtGap:this._partExtPtGap,n=Math.round((this._partLength-(s+r))/this._patternLength);n<=0&&(n=s+r>0?0:1),this._partLengthRatio=this._partLength/(s+r+n*this._patternLength),this._partLengthRatio<.01&&(this._partLengthRatio=1)}else this._partLengthRatio=1;return!0}hasNextSegment(){return this._seg<this._path.length-2}previousSegment(){return--this._seg}nextSegment(){return++this._seg}getStartPointIndex(){return this._seg}getEndPointIndex(){return this._seg+1}}class P{static local(){return null===P.instance&&(P.instance=new P),P.instance}execute(t,e,i){return new b(t,e,i)}}P.instance=null;class b extends a.a{constructor(t,e,i){super(t,!0,!0),this._walker=new y,this._walker.updateTolerance(i),this._endings=e.lineDashEnding,this._customDashPos=void 0!==e.offsetAlongLine?e.offsetAlongLine*i:0,this._offsetAtEnd=void 0!==e.customEndingOffset?e.customEndingOffset*i:0,this._pattern=new v,this._pattern.init(e.dashTemplate,!0),this._pattern.scale(i)}processPath(t){if(0===this._pattern.length())return this.iteratePath=!1,{paths:[t]};if(!this.iteratePath){var e=!0;switch(this._endings){case"HalfPattern":case"HalfGap":default:this._pattern.extPtGap=0;break;case"FullPattern":this.isClosed||(this._pattern.extPtGap=.5*this._pattern.firstValue());break;case"FullGap":this.isClosed||(this._pattern.extPtGap=.5*this._pattern.lastValue());break;case"NoConstraint":this.isClosed||(e=!1);break;case"Custom":this.isClosed||(this._pattern.extPtGap=.5*this._offsetAtEnd)}var i=this._walker.calculatePathLength(t);if(this._pattern.isEmpty()||i<.1*this._pattern.length())return{paths:[t]};if(!this._walker.init(t,this._pattern,e))return{paths:[t]}}var s;if(this.iteratePath)s=this._pattern.nextValue();else{var r;switch(this._endings){case"HalfPattern":default:r=.5*this._pattern.firstValue();break;case"HalfGap":r=.5*-this._pattern.lastValue();break;case"FullGap":r=-this._pattern.lastValue();break;case"FullPattern":r=0;break;case"NoConstraint":case"Custom":r=-this._customDashPos}var a=r/this._pattern.length();r=(a-=Math.floor(a))*this._pattern.length(),this._pattern.reset(),s=this._pattern.nextValue();for(var n=!1;r>=s;)r-=s,s=this._pattern.nextValue(),n=!n;s-=r,n?(this._walker.nextPosition(s),s=this._pattern.nextValue()):this.isClosed&&(this._firstCurve=this._walker.nextCurve(s),s=this._pattern.nextValue(),this._walker.nextPosition(s),s=this._pattern.nextValue())}var h=this._walker.nextCurve(s);return h?this._walker.isPathEnd()?(this.iteratePath=!1,this._firstCurve&&(this._firstCurve.splice(0,1),l.mergePath(h,this._firstCurve),this._firstCurve=null)):(s=this._pattern.nextValue(),!this._walker.nextPosition(s)||this._walker.isPathEnd()?(this.iteratePath=!1,this._firstCurve&&(h=this._firstCurve,this._firstCurve=null)):this.iteratePath=!0):(this.iteratePath=!1,h=this._firstCurve,this._firstCurve=null),{paths:[h]}}}class M{static local(){return null===M.instance&&(M.instance=new M),M.instance}execute(t,e,i){return new C(t,e,i)}}M.instance=null;class C{constructor(t,e,i){switch(this._inputGeometries=t,this._curveHelper=new c,this._width=(void 0!==e.width?e.width:2)*i,e.method){case"Mitered":default:this._method="Mitered";break;case"Bevelled":this._method="Bevelled";break;case"Rounded":case"TrueBuffer":this._method="Rounded";break;case"Square":this._method="Square"}this._option=e.option,this._offsetFlattenError=o*i}next(){for(var t=this._inputGeometries.next();t;){if(Object(r.d)(t)&&this._width>0){if(Math.min(t.xmax-t.xmin,t.ymax-t.ymin)-2*this._width<0)return t;var e=[];return e.push([[t.xmin,t.ymin],[t.xmin,t.ymax],[t.xmax,t.ymax],[t.xmax,t.ymin],[t.xmin,t.ymin]]),e.push([[t.xmin+this._width,t.ymin+this._width],[t.xmax-this._width,t.ymin+this._width],[t.xmax-this._width,t.ymax-this._width],[t.xmin+this._width,t.ymax-this._width],[t.xmin+this._width,t.ymin+this._width]]),{rings:e}}if(Object(r.g)(t)&&this._width>0){var i=[];for(var s of t.rings){var a=this._curveHelper.calculatePathLength(s),n=this._curveHelper.offset(s,this._width,this._method,4,this._offsetFlattenError);n&&(a<0&&n.reverse(),i.push(n))}if(i.length)return{rings:i}}t=this._inputGeometries.next()}return null}}class S{static local(){return null===S.instance&&(S.instance=new S),S.instance}execute(t,e,i){return new w(t,e,i)}}S.instance=null;class w extends a.a{constructor(t,e,i){super(t,!1,!0),this._curveHelper=new c,this._length=(void 0!==e.length?e.length:20)*i,this._angle=void 0!==e.angle?e.angle:225,this._position=void 0!==e.position?e.position:50,this._length<0&&(this._length=-this._length),this._position<20&&(this._position=20),this._position>80&&(this._position=80),this._mirror=!1}processPath(t){if(this._curveHelper.isEmpty(t,!1))return null;var e=t[0],i=t[t.length-1],s=[i[0]-e[0],i[1]-e[1]];this._curveHelper.normalize(s);var r=[e[0]+(i[0]-e[0])*this._position/100,e[1]+(i[1]-e[1])*this._position/100],a=Math.cos((90-this._angle)/180*Math.PI),n=Math.sin((90-this._angle)/180*Math.PI);return this._mirror&&(n=-n),this._mirror=!this._mirror,{paths:[[e,[r[0]-this._length/2*a,r[1]-this._length/2*n],[r[0]+this._length/2*a,r[1]+this._length/2*n],i]]}}}class k{static local(){return null===k.instance&&(k.instance=new k),k.instance}execute(t,e,i){return new L(t,e,i)}}k.instance=null;class L{constructor(t,e,i){this._inputGeometries=t,this._offsetX=void 0!==e.offsetX?e.offsetX*i:0,this._offsetY=void 0!==e.offsetY?-e.offsetY*i:0}next(){for(var t=this._inputGeometries.next();t;){if(Object(r.d)(t))return{xmin:t.xmin+this._offsetX,xmax:t.xmax+this._offsetX,ymin:t.ymin+this._offsetY,ymax:t.ymax+this._offsetY};if(Object(r.g)(t)){var e=Object(s.a)(t);return this._moveMultipath(e.rings,this._offsetX,this._offsetY),e}if(Object(r.h)(t)){var i=Object(s.a)(t);return this._moveMultipath(i.paths,this._offsetX,this._offsetY),i}if(Object(r.e)(t)){var a=Object(s.a)(t);return this._movePath(a.points,this._offsetX,this._offsetY),a}if(Object(r.f)(t))return{x:t.x+this._offsetX,y:t.y+this._offsetY};t=this._inputGeometries.next()}return null}_moveMultipath(t,e,i){if(t)for(var s of t)this._movePath(s,e,i)}_movePath(t,e,i){if(t)for(var s of t)s[0]+=e,s[1]+=i}}class I{static local(){return null===I.instance&&(I.instance=new I),I.instance}execute(t,e,i){return new O(t,e,i)}}I.instance=null;class O{constructor(t,e,i){this._inputGeometries=t,this._curveHelper=new c,this._offset=(void 0!==e.offset?e.offset:1)*i,this._method=e.method,this._option=e.option,this._offsetFlattenError=o*i}next(){for(var t=this._inputGeometries.next();t;){if(0===this._offset)return t;if(Object(r.d)(t)){if("Rounded"===this._method&&this._offset>0){var e=[[t.xmin,t.ymin],[t.xmin,t.ymax],[t.xmax,t.ymax],[t.xmax,t.ymin],[t.xmin,t.ymin]],i=this._curveHelper.offset(e,this._offset,this._method,4,this._offsetFlattenError);return i?{rings:[i]}:null}if(Math.min(t.xmax-t.xmin,t.ymax-t.ymin)+2*this._offset>0)return{xmin:t.xmin-this._offset,xmax:t.xmax+this._offset,ymin:t.ymin-this._offset,ymax:t.ymax+this._offset}}if(Object(r.g)(t)){var s=[];for(var a of t.rings){var n=this._curveHelper.offset(a,this._offset,this._method,4,this._offsetFlattenError);n&&s.push(n)}if(s.length)return{rings:s}}if(Object(r.h)(t)){var h=[];for(var o of t.paths){var l=this._curveHelper.offset(o,this._offset,this._method,4,this._offsetFlattenError);l&&h.push(l)}if(h.length)return{paths:h}}t=this._inputGeometries.next()}return null}}class A{static local(){return null===A.instance&&(A.instance=new A),A.instance}execute(t,e,i){return new T(t,e,i)}}A.instance=null;class T{constructor(t,e,i){this._inputGeometries=t,this._reverse=void 0===e.reverse||e.reverse}next(){for(var t=this._inputGeometries.next();t;){if(!this._reverse)return t;if(Object(r.h)(t)){var e=Object(s.a)(t);return Object(a.h)(e.paths),e}t=this._inputGeometries.next()}return null}}var E,G,j=i(210),z=i(125);class F{static local(){return null===F.instance&&(F.instance=new F),F.instance}execute(t,e,i){return new V(t,e,i)}}F.instance=null;class V{constructor(t,e,i){this._inputGeometries=t,this._rotateAngle=void 0!==e.angle?-e.angle*Math.PI/180:0}next(){for(var t=this._inputGeometries.next();t;){if(0===this._rotateAngle)return t;var e=Object(z.i)();Object(j.a)(e,t);var i=(e[2]+e[0])/2,a=(e[3]+e[1])/2;if(Object(r.d)(t)){var n={rings:[[[t.xmin,t.ymin],[t.xmin,t.ymax],[t.xmax,t.ymax],[t.xmax,t.ymin],[t.xmin,t.ymin]]]};return this._rotateMultipath(n.rings,i,a),n}if(Object(r.g)(t)){var h=Object(s.a)(t);return this._rotateMultipath(h.rings,i,a),h}if(Object(r.h)(t)){var o=Object(s.a)(t);return this._rotateMultipath(o.paths,i,a),o}if(Object(r.e)(t)){var l=Object(s.a)(t);return this._rotatePath(l.points,i,a),l}if(Object(r.f)(t))return t;t=this._inputGeometries.next()}return null}_rotateMultipath(t,e,i){if(t)for(var s of t)this._rotatePath(s,e,i)}_rotatePath(t,e,i){if(t){var s=Math.cos(this._rotateAngle),r=Math.sin(this._rotateAngle);for(var a of t){var n=a[0]-e,h=a[1]-i;a[0]=e+n*s-h*r,a[1]=i+n*r+h*s}}}}class H{static local(){return null===H.instance&&(H.instance=new H),H.instance}execute(t,e,i){return new X(t,e,i)}}H.instance=null;class X{constructor(t,e,i){this._inputGeometries=t,this._xFactor=void 0!==e.xScaleFactor?e.xScaleFactor:1.15,this._yFactor=void 0!==e.yScaleFactor?e.yScaleFactor:1.15}next(){for(var t=this._inputGeometries.next();t;){if(1===this._xFactor&&1===this._yFactor)return t;var e=Object(z.i)();Object(j.a)(e,t);var i=(e[2]+e[0])/2,a=(e[3]+e[1])/2;if(Object(r.d)(t)){var n={rings:[[[t.xmin,t.ymin],[t.xmin,t.ymax],[t.xmax,t.ymax],[t.xmax,t.ymin],[t.xmin,t.ymin]]]};return this._scaleMultipath(n.rings,i,a),n}if(Object(r.g)(t)){var h=Object(s.a)(t);return this._scaleMultipath(h.rings,i,a),h}if(Object(r.h)(t)){var o=Object(s.a)(t);return this._scaleMultipath(o.paths,i,a),o}if(Object(r.e)(t)){var l=Object(s.a)(t);return this._scalePath(l.points,i,a),l}if(Object(r.f)(t))return t;t=this._inputGeometries.next()}return null}_scaleMultipath(t,e,i){if(t)for(var s of t)this._scalePath(s,e,i)}_scalePath(t,e,i){if(t)for(var s of t){var r=(s[0]-e)*this._xFactor,a=(s[1]-i)*this._yFactor;s[0]=e+r,s[1]=i+a}}}class Y{static local(){return null===Y.instance&&(Y.instance=new Y),Y.instance}execute(t,e,i){return new R(t,e,i)}}Y.instance=null;class R{constructor(t,e,i){this._inputGeometries=t,this._height=(void 0!==e.amplitude?e.amplitude:2)*i,this._period=(void 0!==e.period?e.period:3)*i,this._style=e.waveform,this._height<=0&&(this._height=Math.abs(this._height)),this._period<=0&&(this._period=Math.abs(this._period)),this._pattern=new v,this._pattern.addValue(this._period),this._pattern.addValue(this._period),this._walker=new y,this._walker.updateTolerance(i)}next(){for(var t=this._inputGeometries.next();t;){if(0===this._height||0===this._period)return t;if(Object(r.h)(t)){var e=this._processGeom(t.paths);if(e.length)return{paths:e}}if(Object(r.g)(t)){var i=this._processGeom(t.rings);if(i.length)return{rings:i}}t=this._inputGeometries.next()}return null}_processGeom(t){var e=[];for(var i of t)if(this._walker.init(i,this._pattern))switch(this._style){case"Sinus":default:e.push(this._constructCurve(i,!1));break;case"Square":e.push(this._constructSquare(i));break;case"Triangle":e.push(this._constructTriangle(i));break;case"Random":e.push(this._constructCurve(i,!0))}else e.push(i);return e}_constructCurve(t,e){var i=new l,s=this._walker.calculatePathLength(t),r=Math.round(s/this._period);0===r&&(r=1);var a=16*r+1,n=s/r,h=this._period/16,o=1/a,c=2*Math.PI*s/n,u=2*Math.PI*Math.random(),_=2*Math.PI*Math.random(),f=2*Math.PI*Math.random(),p=.75-Math.random()/2,g=.75-Math.random()/2,m={};this._walker.curPointAndAngle(m),i.startPath(m.pt);for(var d=0;;){if(!this._walker.nextPointAndAngle(h,m)){i.lineTo(t[t.length-1]);break}var v=d,x=void 0;if(d+=o,e){var y=this._height/2*(1+.3*Math.sin(p*c*v+u));x=y*Math.sin(c*v+_),x+=y*Math.sin(g*c*v+f),x/=2}else x=.5*this._height*Math.sin(.5*c*v);i.lineTo([m.pt[0]-x*m.sa,m.pt[1]+x*m.ca])}return i.path()}_constructSquare(t){var e=new l,i=this._walker.calculatePathLength(t),s=Math.round(i/this._period);0===s&&(s=1);for(var r=!0;;){var a=!1;if(this._walker.curPositionIsValid()){var n={};this._walker.curPointAndAngle(n);var h={};if(this._walker.nextPointAndAngle(this._period,h)){var o={};this._walker.nextPointAndAngle(this._period,o)&&(r?(e.startPath(n.pt),r=!1):e.lineTo(n.pt),e.lineTo([n.pt[0]-this._height/2*n.sa,n.pt[1]+this._height/2*n.ca]),e.lineTo([h.pt[0]-this._height/2*h.sa,h.pt[1]+this._height/2*h.ca]),e.lineTo([h.pt[0]+this._height/2*h.sa,h.pt[1]-this._height/2*h.ca]),e.lineTo([o.pt[0]+this._height/2*o.sa,o.pt[1]-this._height/2*o.ca]),a=!0)}}if(!a){e.lineTo(this._walker.getPathEnd());break}}return e.path()}_constructTriangle(t){var e=new l,i=this._walker.calculatePathLength(t),s=Math.round(i/this._period);0===s&&(s=1);for(var r=!0;;){var a=!1;if(this._walker.curPositionIsValid()){var n={};this._walker.curPointAndAngle(n);var h={};if(this._walker.nextPointAndAngle(this._period/2,h)){var o={};this._walker.nextPointAndAngle(this._period,o)&&(this._walker.nextPosition(this._period/2)&&(r?(e.startPath(n.pt),r=!1):e.lineTo(n.pt),e.lineTo([h.pt[0]-this._height/2*h.sa,h.pt[1]+this._height/2*h.ca]),e.lineTo([o.pt[0]+this._height/2*o.sa,o.pt[1]-this._height/2*o.ca])),a=!0)}}if(!a){e.lineTo(this._walker.getPathEnd());break}}return e.path()}}(G=E||(E={})).NoConstraint="NoConstraint",G.WithMarkers="WithMarkers",G.WithFullGap="WithFullGap",G.WithHalfGap="WithHalfGap",G.Custom="Custom";class D{static local(){return null===D.instance&&(D.instance=new D),D.instance}execute(t,e,i){return new N(t,e,i)}}D.instance=null;class N extends a.b{constructor(t,e,i){super(t,!0,!0),this._grometryWalker=new y,this._grometryWalker.updateTolerance(i),this._angleToLine=void 0===e.angleToLine||e.angleToLine,this._offset=void 0!==e.offset?e.offset*i:0,this._originalEndings=e.endings,this._offsetAtEnd=void 0!==e.customEndingOffset?e.customEndingOffset*i:0,this._position=void 0!==e.offsetAlongLine?e.offsetAlongLine*i:0,this._pattern=new v,this._pattern.init(e.placementTemplate,!1),this._pattern.scale(i),this._endings=this._originalEndings}processPath(t){if(this._pattern.isEmpty())return null;var e;if(this.iteratePath)e=this._pattern.nextValue();else{this._originalEndings===E.WithFullGap&&this.isClosed?this._endings=E.WithMarkers:this._endings=this._originalEndings,this._pattern.extPtGap=0;var i,s=!0;switch(this._endings){case E.NoConstraint:i=-this._position,i=this._adjustPosition(i),s=!1;break;case E.WithHalfGap:default:i=-this._pattern.lastValue()/2;break;case E.WithFullGap:i=-this._pattern.lastValue(),this._pattern.extPtGap=this._pattern.lastValue();break;case E.WithMarkers:i=0;break;case E.Custom:i=-this._position,i=this._adjustPosition(i),this._pattern.extPtGap=.5*this._offsetAtEnd}if(!this._grometryWalker.init(t,this._pattern,s))return null;this._pattern.reset();for(var r=0;i>r;)i-=r,r=this._pattern.nextValue();e=r-=i,this.iteratePath=!0}var a={};return this._grometryWalker.nextPointAndAngle(e,a)?this._endings===E.WithFullGap&&this._grometryWalker.isPathEnd()?(this.iteratePath=!1,null):this._endings===E.WithMarkers&&this._grometryWalker.isPathEnd()&&(this.iteratePath=!1,this.isClosed)?null:(this.internalPlacement.setTranslate(a.pt[0]+this._offset*a.sa,a.pt[1]-this._offset*a.ca),this._angleToLine&&this.internalPlacement.setRotateCS(a.ca,a.sa),this.internalPlacement):(this.iteratePath=!1,null)}_adjustPosition(t){var e=t/this._pattern.length();return(e-=Math.floor(e))*this._pattern.length()}}class W{static local(){return null===W.instance&&(W.instance=new W),W.instance}execute(t,e,i){return new q(t,e,i)}}W.instance=null;class q extends a.b{constructor(t,e,i){super(t,!1,!0),this._curveHelper=new c,this._angleToLine=void 0===e.angleToLine||e.angleToLine,this._offset=void 0!==e.offset?e.offset*i:0,this._type=e.extremityPlacement,this._position=void 0!==e.offsetAlongLine?e.offsetAlongLine*i:0,this._beginProcessed=!1}processPath(t){var e;switch(this._type){case"Both":default:this._beginProcessed?(e=this._atExtremities(t,this._position,!1),this._beginProcessed=!1,this.iteratePath=!1):(e=this._atExtremities(t,this._position,!0),this._beginProcessed=!0,this.iteratePath=!0);break;case"JustBegin":e=this._atExtremities(t,this._position,!0);break;case"JustEnd":e=this._atExtremities(t,this._position,!1);break;case"None":}return e}_atExtremities(t,e,i){var s=t.length;if(s<2)return null;for(var r,n=i?1:s-2,h=i?s:-1,o=i?1:-1,l=0,c=i?t[0]:t[s-1],u=n;u!==h;u+=o){r=c,c=t[u];var _=this._curveHelper.calculateLength(r,c);if(l+_>e){var f=(e-l)/_,[p,g]=this._curveHelper.getAngleCS(r,c,f),m=Object(a.e)(r,c,f);return this.internalPlacement.setTranslate(m[0]-this._offset*g,m[1]+this._offset*p),this._angleToLine&&this.internalPlacement.setRotateCS(-p,-g),this.internalPlacement}l+=_}return null}}class B{static local(){return null===B.instance&&(B.instance=new B),B.instance}execute(t,e,i){return new U(t,e,i)}}B.instance=null;class U extends a.b{constructor(t,e,i){super(t,!0,!0),this._walker=new y,this._walker.updateTolerance(i),this._angleToLine=void 0===e.angleToLine||e.angleToLine,this._offset=void 0!==e.offset?e.offset*i:0,this._beginGap=void 0!==e.beginPosition?e.beginPosition*i:0,this._endGap=void 0!==e.endPosition?e.endPosition*i:0,this._flipFirst=void 0===e.flipFirst||e.flipFirst,this._pattern=new v,this._pattern.init(e.positionArray,!1,!1),this._subPathLen=0,this._posCount=this._pattern.size(),this._isFirst=!0,this._prevPos=0}processPath(t){if(this._pattern.isEmpty())return null;var e;if(this.iteratePath){var i=this._pattern.nextValue()*this._subPathLen,s=this._beginGap+i;e=s-this._prevPos,this._prevPos=s}else{if(this._posCount=this._pattern.size(),this._isFirst=!0,this._prevPos=0,this._subPathLen=this._walker.calculatePathLength(t)-this._beginGap-this._endGap,this._subPathLen<0)return this.iteratePath=!1,null;if(!this._walker.init(t,this._pattern,!1))return null;this._pattern.reset();var r=this._pattern.nextValue()*this._subPathLen,a=this._beginGap+r;e=a-this._prevPos,this._prevPos=a,this.iteratePath=!0}var n={};if(!this._walker.nextPointAndAngle(e,n,1))return this.iteratePath=!1,null;this.internalPlacement.setTranslate(n.pt[0]+this._offset*n.sa,n.pt[1]-this._offset*n.ca);var h,o,l=this._isFirst&&this._flipFirst;return this._angleToLine?(h=n.ca,o=n.sa):(h=1,o=0),l&&(h=-h,o=-o),this.internalPlacement.setRotateCS(h,o),this._isFirst=!1,this._posCount--,0===this._posCount&&(this.iteratePath=!1),this.internalPlacement}}var J=i(284);class K{static local(){return null===K.instance&&(K.instance=new K),K.instance}execute(t,e,i){return new Z(t,e,i)}}K.instance=null;class Z{constructor(t,e,i){if(this._xMin=0,this._xMax=0,this._yMin=0,this._yMax=0,this._currentX=0,this._currentY=0,this._stepX=(void 0!==e.stepX?Math.abs(e.stepX):16)*i,this._stepY=(void 0!==e.stepY?Math.abs(e.stepY):16)*i,0!==this._stepX&&0!==this._stepY&&t&&function(t){return void 0!==t.rings}(t)&&t.rings){if(this._gridType=void 0!==e.gridType?e.gridType:"Fixed","Random"===this._gridType)this._randomness=void 0!==e.randomness?e.randomness/100:1,this._gridAngle=0,this._shiftOddRows=!1,this._cosAngle=1,this._sinAngle=0,this._offsetX=0,this._offsetY=0;else{if(this._randomness=0,this._gridAngle=void 0!==e.gridAngle?e.gridAngle:0,this._shiftOddRows=void 0!==e.shiftOddRows&&e.shiftOddRows,this._offsetX=void 0!==e.offsetX?e.offsetX*i:0,this._offsetY=void 0!==e.offsetY?e.offsetY*i:0,this._cosAngle=Math.cos(this._gridAngle/180*Math.PI),this._sinAngle=-Math.sin(this._gridAngle/180*Math.PI),this._stepX)if(this._offsetX<0)for(;this._offsetX<-.5*this._stepX;)this._offsetX+=this._stepX;else for(;this._offsetX>=.5*this._stepX;)this._offsetX-=this._stepX;if(this._stepY)if(this._offsetY<0)for(;this._offsetY<-.5*this._stepY;)this._offsetY+=this._stepY;else for(;this._offsetY>=.5*this._stepY;)this._offsetY-=this._stepY}this._graphicOriginX=0,this._graphicOriginY=0,this._internalPlacement=new J.a,this._calculateMinMax(t),this._geometry=t}}next(){return this._geometry?this._nextInside():null}_calculateMinMax(t){var e,i,s,r,a,n,h,o;for(var l of(this._xMin=0,this._xMax=0,this._yMin=0,this._yMax=0,a=n=Number.MAX_VALUE,h=o=-Number.MAX_VALUE,t.rings))for(var c=l?l.length:0,u=0;u<c;++u)e=l[u][0]-this._graphicOriginX-this._offsetX,i=l[u][1]-this._graphicOriginY-this._offsetY,s=this._cosAngle*e-this._sinAngle*i,r=this._sinAngle*e+this._cosAngle*i,a=Math.min(a,s),h=Math.max(h,s),n=Math.min(n,r),o=Math.max(o,r);a+=this._graphicOriginX,h+=this._graphicOriginX,n+=this._graphicOriginY,o+=this._graphicOriginY,this._xMin=Math.round(a/this._stepX),this._xMax=Math.round(h/this._stepX),this._yMin=Math.round(n/this._stepY),this._yMax=Math.round(o/this._stepY),this._currentX=this._xMax+1,this._currentY=this._yMin-1}_nextInside(){for(;;){if(this._currentX>this._xMax){if(this._currentY++,this._currentY>this._yMax)return null;this._currentX=this._xMin,this._shiftOddRows&&this._currentY%2&&this._currentX--}var t=this._currentX*this._stepX+this._offsetX;this._shiftOddRows&&this._currentY%2&&(t+=.5*this._stepX);var e=this._currentY*this._stepY+this._offsetY,i=void 0,s=void 0;return this._currentX++,"Random"===this._gridType?(i=this._graphicOriginX+t+this._stepX*this._randomness*(.5-Math.random())*2/3,s=this._graphicOriginY+e+this._stepY*this._randomness*(.5-Math.random())*2/3):(i=this._graphicOriginX+this._cosAngle*t+this._sinAngle*e,s=this._graphicOriginY-this._sinAngle*t+this._cosAngle*e),this._internalPlacement.setTranslate(i,s),this._internalPlacement}}}class Q{static local(){return null===Q.instance&&(Q.instance=new Q),Q.instance}execute(t,e,i){return new $(t,e,i)}}Q.instance=null;class $ extends a.b{constructor(t,e,i){super(t,!0,!0),this._curveHelper=new c,this._angleToLine=void 0===e.angleToLine||e.angleToLine,this._offset=void 0!==e.offset?e.offset*i:0,this._relativeTo=e.relativeTo,this._position=void 0!==e.startPointOffset?e.startPointOffset*i:0,this._epsilon=.001*i}processPath(t){var e=this._position;if("SegmentMidpoint"===this._relativeTo){for(this.iteratePath||(this._segmentCount=t.length,this._curSegment=1,this.iteratePath=!0);this._curSegment<this._segmentCount;){var i=this._curSegment;this._curSegment++;var s=t[i-1],r=t[i],n=this._curveHelper.calculateLength(s,r);if(!(n<this._epsilon)){var h=.5+this._position/n,[o,l]=this._curveHelper.getAngleCS(s,r,h),c=Object(a.e)(s,r,h);return this.internalPlacement.setTranslate(c[0]-this._offset*l,c[1]+this._offset*o),this._angleToLine&&this.internalPlacement.setRotateCS(o,l),this.internalPlacement}}return this.iteratePath=!1,null}"LineEnd"===this._relativeTo&&Object(a.i)(t);var u=this.onLine(t,e);return"LineEnd"===this._relativeTo&&Object(a.i)(t),u}onLine(t,e){var i,s=!1;switch(this._relativeTo){case"LineMiddle":default:i=this._curveHelper.calculatePathLength(t)/2+e;break;case"LineBeginning":i=e;break;case"LineEnd":i=e,s=!0}for(var r,n=t.length,h=0,o=t[0],l=1;l<n;++l){r=o,o=t[l];var c=this._curveHelper.calculateLength(r,o);if(h+c>i){var u=(i-h)/c,[_,f]=this._curveHelper.getAngleCS(r,o,u),p=Object(a.e)(r,o,u),g=s?this._offset:-this._offset;return this.internalPlacement.setTranslate(p[0]-g*f,p[1]+g*_),this._angleToLine&&(s?this.internalPlacement.setRotateCS(-_,-f):this.internalPlacement.setRotateCS(_,f)),this.internalPlacement}h+=c}return null}}class tt{static local(){return null===tt.instance&&(tt.instance=new tt),tt.instance}execute(t,e,i){return new et(t,e,i)}}tt.instance=null;class et extends a.b{constructor(t,e,i){super(t,!0,!0),this._curveHelper=new c,this._angleToLine=void 0===e.angleToLine||e.angleToLine,this._offset=void 0!==e.offset?e.offset*i:0,this._endPoints=void 0===e.placeOnEndPoints||e.placeOnEndPoints,this._controlPoints=void 0===e.placeOnControlPoints||e.placeOnControlPoints,this._regularVertices=void 0===e.placeOnRegularVertices||e.placeOnRegularVertices,this._tags=[],this._tagIterator=0}processPath(t){if(this.iteratePath||(this._preparePath(t),this.iteratePath=!0),this._tagIterator>=this._tags.length)return this._tags.length=0,this._tagIterator=0,this.iteratePath=!1,null;var e=this._tags[this._tagIterator];this._angleToLine&&this.internalPlacement.setRotate(e[2]);var i=e[0],s=e[1];if(0!==this._offset){var r=Math.cos(e[2]),a=Math.sin(e[2]);i-=this._offset*a,s+=this._offset*r}return this.internalPlacement.setTranslate(i,s),this._tagIterator++,this.internalPlacement}_preparePath(t){this._tags.length=0,this._tagIterator=0;for(var e,i,s=Object(a.g)(t),r=t.length-1,n=0,h=0,o=0,l=0,c=0;n<r;){e=t[++n-1],i=t[n];var u=Object(a.f)(e),_=Object(a.f)(i);(this._angleToLine||0!==this._offset)&&(l=this._curveHelper.getAngle(e,i,0)),1===n?s?(h=l,o=u):this._endPoints&&this._tags.push([e[0],e[1],l]):1===u?this._controlPoints&&this._tags.push([e[0],e[1],it(c,l)]):this._regularVertices&&this._tags.push([e[0],e[1],it(c,l)]),(this._angleToLine||0!==this._offset)&&(c=this._curveHelper.getAngle(e,i,1)),n===r&&(s?1===_||1===o?this._controlPoints&&this._tags.push([i[0],i[1],it(c,h)]):this._regularVertices&&this._tags.push([i[0],i[1],it(c,h)]):this._endPoints&&this._tags.push([i[0],i[1],c]))}this._tagIterator=0}}function it(t,e){for(var i=Math.PI;Math.abs(e-t)>i+2e-15;)e-t>i?e-=2*i:e+=2*i;return(t+e)/2}class st{static local(){return null===st.instance&&(st.instance=new st),st.instance}execute(t,e,i){return new rt(t,e,i)}}st.instance=null;class rt{constructor(t,e,i){this._geometry=t,this._offsetX=void 0!==e.offsetX?e.offsetX*i:0,this._offsetY=void 0!==e.offsetY?e.offsetY*i:0,this._method=void 0!==e.method?e.method:"OnPolygon",this._internalPlacement=new J.a}next(){var t=this._geometry;return this._geometry=null,t&&function(t){return void 0!==t.rings}(t)?this._polygonCenter(t):null}_polygonCenter(t){var e=!1;switch(this._method){case"OnPolygon":default:case"CenterOfMass":case"BoundingBoxCenter":var i=Object(z.i)();Object(j.a)(i,t),this._internalPlacement.setTranslate((i[2]+i[0])/2+this._offsetX,(i[3]+i[1])/2-this._offsetY),e=!0}return e?this._internalPlacement:null}}function at(t){if(!t)return null;switch(t.type){case"CIMGeometricEffectAddControlPoints":return n.local();case"CIMGeometricEffectArrow":return _.local();case"CIMGeometricEffectBuffer":return p.local();case"CIMGeometricEffectCut":return m.local();case"CIMGeometricEffectDashes":return P.local();case"CIMGeometricEffectDonut":return M.local();case"CIMGeometricEffectJog":return S.local();case"CIMGeometricEffectMove":return k.local();case"CIMGeometricEffectOffset":return I.local();case"CIMGeometricEffectReverse":return A.local();case"CIMGeometricEffectRotate":return F.local();case"CIMGeometricEffectScale":return H.local();case"CIMGeometricEffectWave":return Y.local()}return null}function nt(t){if(!t)return null;switch(t.type){case"CIMMarkerPlacementAlongLineSameSize":return D.local();case"CIMMarkerPlacementAtExtremities":return W.local();case"CIMMarkerPlacementAtRatioPositions":return B.local();case"CIMMarkerPlacementInsidePolygon":return K.local();case"CIMMarkerPlacementOnLine":return Q.local();case"CIMMarkerPlacementOnVertices":return tt.local();case"CIMMarkerPlacementPolygonCenter":return st.local()}return null}},427:function(t,e,i){"use strict";i.d(e,"a",(function(){return n}));var s=[1,256,65536,16777216],r=[1/256,1/65536,1/16777216,1/4294967296],a=function(t,e=0){for(var i=0,s=0;s<4;s++)i+=t[e+s]*r[s];return i}(new Uint8ClampedArray([255,255,255,255]));function n(t,e,i=0){for(var r=function(t,e,i){return t<e?e:t>i?i:t}(t,0,a),n=0;n<4;n++)e[i+n]=Math.floor(256*h(r*s[n]))}function h(t){return t-Math.floor(t)}},445:function(t,e,i){"use strict";i.d(e,"a",(function(){return s}));i(92);class s{constructor(t){this._geometry=t}next(){var t=this._geometry;return this._geometry=null,t}}}}]);
//# sourceMappingURL=17.3b17c1dd.chunk.js.map