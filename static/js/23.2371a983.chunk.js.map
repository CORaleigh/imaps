{"version":3,"sources":["../node_modules/@arcgis/core/AggregateGraphic.js","../node_modules/@arcgis/core/views/2d/layers/support/FeatureCommandQueue.js","../node_modules/@arcgis/core/views/2d/layers/support/FeatureLayerProxy.js","../node_modules/@arcgis/core/views/2d/tiling/TileManager.js","../node_modules/@arcgis/core/views/layers/support/FeatureEffect.js","../node_modules/@arcgis/core/views/layers/FeatureLayerView.js","../node_modules/@arcgis/core/views/2d/layers/FeatureLayerView2D.js","../node_modules/@arcgis/core/views/2d/layers/features/tileRenderers.js","../node_modules/@arcgis/core/views/layers/LayerView.js","../node_modules/@arcgis/core/views/layers/support/ClipArea.js","../node_modules/@arcgis/core/views/layers/support/ClipRect.js","../node_modules/@arcgis/core/views/layers/support/Geometry.js","../node_modules/@arcgis/core/views/layers/support/Path.js","../node_modules/@arcgis/core/views/2d/layers/LayerView2D.js","../node_modules/@arcgis/core/views/2d/engine/webgl/visualVariablesUtils.js","../node_modules/@arcgis/core/renderers/support/clickToleranceUtils.js","../node_modules/@arcgis/core/views/support/drapedUtils.js","../node_modules/@arcgis/core/views/support/floorFilterUtils.js","../node_modules/@arcgis/core/views/layers/RefreshableLayerView.js","../node_modules/@arcgis/core/views/layers/support/popupUtils.js","../node_modules/@arcgis/core/views/layers/support/FeatureFilter.js"],"names":["p","s","r","constructor","super","arguments","this","isAggregate","getEffectivePopupTemplate","e","popupTemplate","sourceLayer","featureReduction","popupEnabled","getObjectId","objectId","clone","cloneProperties","t","type","Boolean","prototype","Number","json","read","o","c","d","some","globalId","n","filter","error","map","a","Set","values","add","i","delete","u","_hasGlobalIds","_queueProcessor","concurrency","process","destroy","clear","updating","length","push","last","finally","notifyChange","popLast","_mergeEdits","addedFeatures","deletedFeatures","updatedFeatures","edits","addOrModified","removed","l","f","h","Array","from","readOnly","_startupResolver","isReady","initialize","_controller","addResolvingPromise","_startWorker","signal","abort","_connection","close","tileRenderer","client","closed","when","isArray","source","transferList","service","config","tileInfo","toJSON","tiles","invoke","resolve","_set","promise","query","params","name","value","strategy","_tiles","Map","buffer","acquireTile","releaseTile","tileInfoView","forEach","_releaseTile","tileKeys","update","getTileCoverage","state","spans","lodInfo","level","row","colFrom","colTo","getId","normalizeCol","getWorldForColumn","_getOrAcquireTile","visible","key","_addPlaceholders","has","id","pool","release","hasMissingTiles","size","added","set","get","_getTile","_addPlaceholderChildren","Math","abs","_addPlaceholderParent","_addPlaceholderChild","hasData","contains","getParentKey","patchCount","includedEffect","excludedEffect","excludedLabelsVisible","write","_","getLogger","P","_updatingRequiredFieldsPromise","effect","timeExtent","layer","requiredFields","view","_handleRequiredFieldsChange","availableFields","fieldsIndex","outFields","m","maximumNumberOfFeatures","maximumNumberOfFeaturesExceeded","highlight","Error","createQuery","returnGeometry","outSpatialReference","spatialReference","b","R","where","intersection","queryFeatures","queryObjectIds","queryFeatureCount","queryExtent","_loadArcadeModules","E","_updateRequiredFields","then","objectIdField","renderer","orderBy","collectRequiredFields","y","F","timeInfo","w","startField","endField","floorInfo","floorField","g","subtypeField","sublayers","Promise","all","displayField","sort","validateFetchPopupFeatures","clientGraphics","q","createPopupQuery","arcadeUtils","hasGeometryOperations","x","objectIds","attributes","concat","features","catch","geometryType","I","returnZ","returnM","canResume","isEmpty","v","j","K","W","X","H","k","U","J","_pipelineIsUpdating","_commandsQueue","_doEdit","_doRefresh","_doUpdate","_visibilityOverrides","_effect","_highlightIds","_lastPixelBuffer","_updateHighlight","async","_proxy","setHighlight","keys","_uploadsLocked","_needsClusterSizeUpdate","effectLists","included","excluded","_updateClusterSizeTask","remove","_initProxy","_initServiceOptions","handles","on","valueRanges","isTable","_createClientOptions","V","_createServiceOptions","orderByFields","_serviceOptions","labelsVisible","items","suspended","labelingInfo","enabled","enable","effects","queryMode","renderingConfigHash","floors","definitionExpression","gdbVersion","historicMoment","getTime","JSON","stringify","customParameters","apiKey","geometryDefinition","clips","reduce","sublayerHash","filterHash","effectHash","streamFilter","clipsHash","hasEffects","isCollection","getAttribute","toArray","_addHighlight","_removeHighlight","hasHighlight","hitTest","_hitTest","getAggregates","fromJSON","queryStatistics","valueExpression","viewInfoParams","viewingMode","scale","querySummaryStatistics","_cleanUpQuery","queryFeaturesJSON","_setLayersForFeature","count","extent","M","setVisibility","_update","_tileStrategy","updateTiles","requestUpdate","attach","timeline","record","title","N","_acquireTile","featuresTilingScheme","_edit","detach","container","removeAllChildren","uninstall","_tileRendererHash","moveStart","viewChange","moveEnd","popup","defaultPopupTemplateEnabled","fetchClientPopupFeatures","_fetchServicePopupFeatures","event","geometry","createFetchPopupFeaturesQueryGeometry","$","isUpdating","console","log","setUpdating","emitEvent","emit","capabilities","supportsPagination","operations","supportsEditing","mode","featureCount","fullExtent","width","height","warn","fields","L","globalIdField","getFeatureDefinition","openPorts","parsedUrl","dynamicDataSource","datesInUnknownTimezone","_detectQueryMode","field","timeReferenceUnknownClient","maxRecordCount","tileMaxRecordCount","S","_validateEdit","includes","destroyed","_hasRequiredSupport","_getEffectiveRenderer","_createSchemaConfig","_createConfiguration","max","schema","pixelBuffer","_createTileRendererHash","_initTileRenderer","onConfigUpdate","startup","_onceTilesUpdated","mesh","targets","aggregate","_lockGPUUploads","applyUpdate","_unlockGPUUploads","_updateClusterSizeVariable","_forceAttributeTextureUpload","invalidateLabels","onEdits","refresh","_effectiveRenderer","_createUpdateClusterSizeTask","watch","_updateClusterEffectiveRendererSizeVariable","dynamicClusterSize","visualVariables","T","indexOf","C","_aggregateValueRanges","aggregateFields","once","default","O","layerView","install","_createFeatureDataHash","getAttributeHash","hasFilter","_injectOverrides","_addFloorFilterClause","z","hiddenIds","viewAllLevelIds","replace","join","RegExp","trim","B","devicePixelRatio","window","filters","supportsTextureFloat","maxTextureSize","lockGPUUploads","unlockGPUUploads","forceAttributeTextureUpload","token","_createHittestResult","D","getFeature","getAggregate","referenceId","A","Y","EventedMixin","parent","declaredClass","fullOpacity","suspendInfo","getSuspendInfo","legendEnabled","updatingHandles","updatingProgress","_override","_clearOverride","ready","viewNotReady","loaded","layerNotLoaded","layerInvisible","left","right","top","bottom","version","_get","String","base","typeMap","polygon","types","path","ofType","rect","moving","attached","lastUpdateId","updateRequested","fadeTransitionEnabled","opacity","blendMode","whenLayerView","isVisibleAtScale","minScale","maxScale","processUpdate","isFulfilled","isResolved","isRendering","minDataValue","maxDataValue","minSize","maxSize","SIZE_MINMAX_VALUE","expression","stops","SIZE_SCALE_STOPS","levels","SIZE_FIELD_STOPS","valueUnit","SIZE_UNIT_VALUE","NONE","xoffset","yoffset","floor","pointerType","symbol","uniqueValueInfos","classBreakInfos","resolution","overlayPixelSizeInMapUnits","basemapSpatialReference","equals","xmin","min","ymin","xmax","ymax","toMap","intersects","doRefresh","getRequiredFields","lastEditInfoEnabled","typeIdField","relationships","keyField","defaultPopupTemplate","esriSpatialRelIntersects","esriSpatialRelContains","esriSpatialRelCrosses","esriSpatialRelDisjoint","esriSpatialRelEnvelopeIntersects","esriSpatialRelIndexIntersects","esriSpatialRelOverlaps","esriSpatialRelTouches","esriSpatialRelWithin","esriSpatialRelRelation","esriSRUnit_Meter","esriSRUnit_Kilometer","esriSRUnit_Foot","esriSRUnit_StatuteMile","esriSRUnit_NauticalMile","esriSRUnit_USNauticalMile","spatialRelationship","distance","units","writeWhere","reader","target","writer","overridePolicy"],"mappings":"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","file":"static/js/23.2371a983.chunk.js","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"./chunks/tslib.es6.js\";import r from\"./Graphic.js\";import{property as t}from\"./core/accessorSupport/decorators/property.js\";import\"./core/has.js\";import\"./core/accessorSupport/ensureType.js\";import\"./core/Logger.js\";import{subclass as o}from\"./core/accessorSupport/decorators/subclass.js\";var p;let s=p=class extends r{constructor(){super(...arguments),this.isAggregate=!0}getEffectivePopupTemplate(e=!1){if(this.popupTemplate)return this.popupTemplate;const r=this.sourceLayer&&this.sourceLayer.featureReduction;return r&&\"popupTemplate\"in r&&r.popupEnabled?r.popupTemplate:null}getObjectId(){return this.objectId}clone(){return new p({objectId:this.objectId,...this.cloneProperties()})}};e([t({type:Boolean})],s.prototype,\"isAggregate\",void 0),e([t({type:Number,json:{read:!0}})],s.prototype,\"objectId\",void 0),s=p=e([o(\"esri.AggregateGraphic\")],s);var c=s;export{c as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../../chunks/tslib.es6.js\";import r from\"../../../../core/Accessor.js\";import{property as s}from\"../../../../core/accessorSupport/decorators/property.js\";import\"../../../../core/has.js\";import\"../../../../core/accessorSupport/ensureType.js\";import\"../../../../core/Logger.js\";import{subclass as t}from\"../../../../core/accessorSupport/decorators/subclass.js\";import{QueueProcessor as o}from\"../../../support/QueueProcessor.js\";function d(e){return e.some((e=>e.globalId))}function n(e){return e.filter((e=>!e.error)).map((e=>{var r;return null!=(r=e.objectId)?r:e.globalId}))}function a(e,r){const s=new Set(e);for(const t of r.values())s.add(t);return s}function i(e,r){const s=new Set(e);for(const t of r.values())s.delete(t);return s}let u=class extends r{constructor(e){super(),this._hasGlobalIds=!1,this._queueProcessor=new o({concurrency:1,process:e.process})}destroy(){this._queueProcessor.clear()}get updating(){return this._queueProcessor.length>0}push(e){const r=this._queueProcessor,s=r.last();switch(e.type){case\"update\":case\"refresh\":if((null==s?void 0:s.type)===e.type)return;r.push(e).finally((()=>this.notifyChange(\"updating\")));break;case\"edit\":{const t=\"processed-edit\"===(null==s?void 0:s.type)?s:null;t&&r.popLast();const o=this._mergeEdits(t,e);for(const e of o)r.push(e).finally((()=>this.notifyChange(\"updating\")));break}}this.notifyChange(\"updating\")}_mergeEdits(e,r){var s,t;const{addedFeatures:o,deletedFeatures:u,updatedFeatures:c}=r.edits;if(this._hasGlobalIds=this._hasGlobalIds||d(o)||d(c)||d(u),this._hasGlobalIds){return[e,{type:\"processed-edit\",edits:{addOrModified:[...o,...c],removed:u}}]}const p=new Set(n(null!=(s=null==e?void 0:e.edits.addOrModified)?s:[])),l=new Set(n(null!=(t=null==e?void 0:e.edits.removed)?t:[])),f=new Set([...n(o),...n(c)]),h=new Set(n(u));return[{type:\"processed-edit\",edits:{addOrModified:Array.from(a(i(p,h),f)).map((e=>({objectId:e}))),removed:Array.from(a(i(l,f),h)).map((e=>({objectId:e})))}}]}};e([s({readOnly:!0})],u.prototype,\"updating\",null),u=e([t(\"esri.views.2d.layers.support.FeatureCommandQueue\")],u);var c=u;export{c as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport{_ as t}from\"../../../../chunks/tslib.es6.js\";import{EsriPromise as e}from\"../../../../core/Promise.js\";import{createResolver as r,createAbortController as s,ignoreAbortErrors as o,throwIfNotAbortError as i}from\"../../../../core/promiseUtils.js\";import{open as n}from\"../../../../core/workers/workers.js\";import{property as a}from\"../../../../core/accessorSupport/decorators/property.js\";import\"../../../../core/has.js\";import\"../../../../core/accessorSupport/ensureType.js\";import\"../../../../core/Logger.js\";import{subclass as c}from\"../../../../core/accessorSupport/decorators/subclass.js\";function l(t){return Array.isArray(t)}let u=class extends e{constructor(t){super(t),this._startupResolver=r(),this.isReady=!1}initialize(){this._controller=s(),this.addResolvingPromise(this._startWorker(this._controller.signal))}destroy(){this._controller.abort(),this._connection&&this._connection.close()}set tileRenderer(t){this.client.tileRenderer=t}get closed(){return this._connection.closed}async startup(t,e,r,s){await this.when();const o=this._controller.signal,i=l(r.source)?{transferList:r.source,signal:o}:void 0,n={service:r,config:e,tileInfo:t.tileInfo.toJSON(),tiles:s};await this._connection.invoke(\"startup\",n,i),this._startupResolver.resolve(),this._set(\"isReady\",!0)}async updateTiles(t){return await this._startupResolver.promise,o(this._connection.invoke(\"updateTiles\",t))}async update(t){const e={config:t};return await this._startupResolver.promise,this._connection.invoke(\"update\",e)}async applyUpdate(t){return await this._startupResolver.promise,this._connection.invoke(\"applyUpdate\",t)}async setHighlight(t){return await this._startupResolver.promise,o(this._connection.invoke(\"controller.setHighlight\",t))}async refresh(){return await this._startupResolver.promise,o(this._connection.invoke(\"controller.refresh\"))}async querySummaryStatistics(t,e,r){return await this._startupResolver.promise,this._connection.invoke(\"controller.querySummaryStatistics\",{query:t.toJSON(),params:e},r)}async queryFeatures(t,e){return await this._startupResolver.promise,this._connection.invoke(\"controller.queryFeatures\",t.toJSON(),e)}async queryObjectIds(t,e){return await this._startupResolver.promise,this._connection.invoke(\"controller.queryObjectIds\",t.toJSON(),e)}async queryFeatureCount(t,e){return await this._startupResolver.promise,this._connection.invoke(\"controller.queryFeatureCount\",t.toJSON(),e)}async queryExtent(t,e){return this._connection.invoke(\"controller.queryExtent\",t.toJSON(),e)}async queryLatestObservations(t,e){return await this._startupResolver.promise,this._connection.invoke(\"controller.queryLatestObservations\",t.toJSON(),e)}async queryStatistics(t){return await this._startupResolver.promise,this._connection.invoke(\"controller.queryStatistics\",t)}async getObjectId(t){return await this._startupResolver.promise,this._connection.invoke(\"controller.getObjectId\",t)}async getDisplayId(t){return await this._startupResolver.promise,this._connection.invoke(\"controller.getDisplayId\",t)}async getFeature(t){return await this._startupResolver.promise,this._connection.invoke(\"controller.getFeature\",t)}async getAggregate(t){return await this._startupResolver.promise,this._connection.invoke(\"controller.getAggregate\",t)}async getAggregates(){return await this._startupResolver.promise,this._connection.invoke(\"controller.getAggregates\")}async getAggregateValueRanges(){return await this._startupResolver.promise,this._connection.invoke(\"controller.getAggregateValueRanges\")}async mapValidDisplayIds(t){return await this._startupResolver.promise,this._connection.invoke(\"controller.mapValidDisplayIds\",t)}async onEdits(t){return await this._startupResolver.promise,o(this._connection.invoke(\"controller.onEdits\",t))}async enableEvent(t,e){return await this._startupResolver.promise,o(this._connection.invoke(\"controller.enableEvent\",{name:t,value:e}))}async _startWorker(t){try{this._connection=await n(\"Pipeline\",{client:this.client,strategy:\"dedicated\",signal:t})}catch(e){i(e)}}};t([a()],u.prototype,\"isReady\",void 0),t([a()],u.prototype,\"client\",void 0),t([a()],u.prototype,\"tileRenderer\",null),u=t([c(\"esri.views.2d.layers.support.FeatureLayerProxy\")],u);var p=u;export{p as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport{isSome as e}from\"../../../core/maybe.js\";import i from\"./TileCoverage.js\";import t from\"./TileKey.js\";const l=1e-6;class s{constructor(e){this._tiles=new Map,this.buffer=0,this.acquireTile=e.acquireTile,this.releaseTile=e.releaseTile,this.tileInfoView=e.tileInfoView,this.buffer=e.buffer}destroy(){}clear(){this._tiles.forEach((e=>this._releaseTile(e)))}tileKeys(){const e=[];return this._tiles.forEach(((i,t)=>e.push(t))),e}update(e){const l=this.tileInfoView.getTileCoverage(e.state,this.buffer,\"closest\"),{spans:s,lodInfo:r}=l,{level:a}=r,o=[],d=[],h=new Set,n=new Set;for(const{row:i,colFrom:c,colTo:f}of s)for(let e=c;e<=f;e++){const l=t.getId(a,i,r.normalizeCol(e),r.getWorldForColumn(e)),s=this._getOrAcquireTile(o,l);h.add(l),s.isReady?s.visible=!0:n.add(s.key)}n.forEach((e=>this._addPlaceholders(h,e))),this._tiles.forEach((e=>{h.has(e.key.id)||(d.push(e.key.id),this._releaseTile(e))})),i.pool.release(l);return{hasMissingTiles:n.size>0,added:o,removed:d}}_getOrAcquireTile(e,i){if(!this._tiles.has(i)){const l=this.acquireTile(new t(i));e.push(i),this._tiles.set(i,l),l.visible=!1}return this._tiles.get(i)}_getTile(e){return this._tiles.get(e)}_releaseTile(e){this._tiles.delete(e.key.id),this.releaseTile(e)}_addPlaceholders(e,i){const t=this._addPlaceholderChildren(e,i);if(!(Math.abs(1-t)<l)){if(!this._addPlaceholderParent(e,i)){this._getTile(i.id).visible=!0}}}_addPlaceholderChildren(e,i){let t=0;return this._tiles.forEach((l=>{t+=this._addPlaceholderChild(e,l,i)})),t}_addPlaceholderChild(e,i,t){if(i.key.level<=t.level||!i.hasData||!t.contains(i.key))return 0;i.visible=!0,e.add(i.key.id);return 1/(1<<2*(i.key.level-t.level))}_addPlaceholderParent(i,t){let l=t.getParentKey(),s=0,r=null;for(;e(l);){if(i.has(l.id))return!0;const e=this._getTile(l.id);if(null!=e&&e.isReady)return e.visible=!0,i.add(e.key.id),!0;null!=e&&e.hasData&&e.patchCount>s&&(s=e.patchCount,r=e),l=l.getParentKey()}return!!r&&(r.visible=!0,i.add(r.key.id),!0)}}export{s as TileManager};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../chunks/tslib.es6.js\";import{JSONSupport as t}from\"../../../core/JSONSupport.js\";import{property as r}from\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/has.js\";import\"../../../core/accessorSupport/ensureType.js\";import\"../../../core/Logger.js\";import{subclass as o}from\"../../../core/accessorSupport/decorators/subclass.js\";import s from\"./FeatureFilter.js\";var i;let c=i=class extends t{constructor(){super(...arguments),this.filter=null,this.includedEffect=null,this.excludedEffect=null,this.excludedLabelsVisible=!1}clone(){return new i({filter:this.filter&&this.filter.clone(),includedEffect:this.includedEffect,excludedEffect:this.excludedEffect,excludedLabelsVisible:this.excludedLabelsVisible})}};e([r({type:s,json:{write:!0}})],c.prototype,\"filter\",void 0),e([r({json:{write:!0}})],c.prototype,\"includedEffect\",void 0),e([r({json:{write:!0}})],c.prototype,\"excludedEffect\",void 0),e([r({type:Boolean,json:{write:!0}})],c.prototype,\"excludedLabelsVisible\",void 0),c=i=e([o(\"esri.views.layers.support.FeatureEffect\")],c);var l=c;export{l as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../chunks/tslib.es6.js\";import t from\"../../core/Error.js\";import r from\"../../core/Logger.js\";import{isSome as i,isNone as s}from\"../../core/maybe.js\";import{eachAlways as o}from\"../../core/promiseUtils.js\";import{init as n,on as l}from\"../../core/watchUtils.js\";import{property as a}from\"../../core/accessorSupport/decorators/property.js\";import\"../../core/has.js\";import\"../../core/accessorSupport/ensureType.js\";import{subclass as u}from\"../../core/accessorSupport/decorators/subclass.js\";import{combinedViewLayerTimeExtentProperty as p}from\"../../layers/support/commonProperties.js\";import{fixFields as d,unpackFieldNames as m,collectLabelingFields as c,collectElevationFields as f,collectFilterFields as y,collectFeatureReductionFields as h,collectOrderByInfos as F,collectFields as w,collectField as g,featureHasFields as x}from\"../../layers/support/fieldUtils.js\";import b from\"../../rest/support/Query.js\";import{loadArcade as E}from\"../../support/arcadeOnDemand.js\";import v from\"./support/FeatureEffect.js\";import j from\"./support/FeatureFilter.js\";import{getFetchPopupTemplate as q,getRequiredFields as I}from\"./support/popupUtils.js\";import{getFloorFilterClause as R}from\"../support/floorFilterUtils.js\";const _=r.getLogger(\"esri.views.layers.FeatureLayerView\"),P=r=>{let P=class extends r{constructor(...e){super(...e),this._updatingRequiredFieldsPromise=null,this.effect=null,this.filter=null,this.timeExtent=null,this.layer=null,this.requiredFields=[],this.view=null}initialize(){n(this,[\"layer.renderer\",\"layer.labelingInfo\",\"layer.elevationInfo.featureExpressionInfo\",\"layer.displayField\",\"filter\",\"effect\",\"layer.timeInfo\",\"layer.floorInfo\",\"timeExtent\"],(()=>this._handleRequiredFieldsChange()),!0),l(this,\"view.floors\",\"change\",(()=>this._handleRequiredFieldsChange())),l(this,\"layer.sublayer\",\"change\",(()=>this._handleRequiredFieldsChange()))}get availableFields(){const{layer:e,layer:{fieldsIndex:t},requiredFields:r}=this;return\"outFields\"in e&&e.outFields?d(t,[...m(t,e.outFields),...r]):d(t,r)}get maximumNumberOfFeatures(){return 0}set maximumNumberOfFeatures(e){_.error(\"#maximumNumberOfFeatures=\",\"Setting maximum number of features is not supported\")}get maximumNumberOfFeaturesExceeded(){return!1}highlight(e){throw new Error(\"missing implementation\")}createQuery(){const e={outFields:[\"*\"],returnGeometry:!0,outSpatialReference:this.view.spatialReference},t=i(this.filter)?this.filter.createQuery(e):new b(e);if(\"feature\"===this.layer.type){const e=R(this);i(e)&&(t.where=t.where?`(${t.where}) AND (${e})`:e)}return i(this.timeExtent)&&(t.timeExtent=i(t.timeExtent)?t.timeExtent.intersection(this.timeExtent):this.timeExtent.clone()),t}queryFeatures(e,t){throw new Error(\"missing implementation\")}queryObjectIds(e,t){throw new Error(\"missing implementation\")}queryFeatureCount(e,t){throw new Error(\"missing implementation\")}queryExtent(e,t){throw new Error(\"missing implementation\")}_loadArcadeModules(e){if(e.get(\"expressionInfos.length\"))return E()}_handleRequiredFieldsChange(){const e=this._updateRequiredFields();this._set(\"_updatingRequiredFieldsPromise\",e),e.then((()=>{this._updatingRequiredFieldsPromise===e&&this._set(\"_updatingRequiredFieldsPromise\",null)}))}async _updateRequiredFields(){if(!this.layer||!this.view)return;const e=\"3d\"===this.view.type,{layer:t,layer:{fieldsIndex:r,objectIdField:s}}=this,n=\"renderer\"in t&&t.renderer,l=\"orderBy\"in t&&t.orderBy,a=t.featureReduction,u=new Set,p=await o([n?n.collectRequiredFields(u,r):null,c(u,t),e?f(u,t):null,i(this.filter)?y(u,t,this.filter):null,this.effect?y(u,t,this.effect.filter):null,a?h(u,t,a):null,l?F(u,t,l):null]);if(t.timeInfo&&this.timeExtent&&w(u,t.fieldsIndex,[t.timeInfo.startField,t.timeInfo.endField]),\"feature\"===t.type&&t.floorInfo&&w(u,t.fieldsIndex,[t.floorInfo.floorField]),\"subtype-group\"===t.type){g(u,r,t.subtypeField);const e=t.sublayers.map((e=>{var t;return Promise.all([null==(t=e.renderer)?void 0:t.collectRequiredFields(u,r),c(u,e)])}));await o(e)}for(const i of p)i.error&&_.error(i.error);g(u,r,s),e&&\"displayField\"in t&&t.displayField&&g(u,r,t.displayField);const d=Array.from(u).sort();this._set(\"requiredFields\",d)}validateFetchPopupFeatures(e){if(s(e))return null;for(const r of e.clientGraphics){const i=r.layer;if(\"popupEnabled\"in i&&!i.popupEnabled)return new t(\"featurelayerview:fetchPopupFeatures\",\"Popups are disabled\",{layer:i});if(\"popupTemplate\"in i){if(!q(i,e))return new t(\"featurelayerview:fetchPopupFeatures\",\"Layer does not define a popup template\",{layer:i})}}}async fetchClientPopupFeatures(e){const t=i(e)?e.clientGraphics:null;if(!t||0===t.length)return Promise.resolve([]);const r=[],s=[],o=await this.createPopupQuery(e);for(const n of t){const{layer:t}=n;if(!(\"popupEnabled\"in t))continue;const l=m(this.layer.fieldsIndex,o.outFields),a=q(t,e);if(!i(a))continue;const u=await this._loadArcadeModules(a);u&&u.arcadeUtils.hasGeometryOperations(a)||!x(l,n)?s.push(n):r.push(n)}return\"stream\"===this.layer.type||0===s.length?Promise.resolve(r):(o.objectIds=s.map((e=>e.attributes[this.layer.objectIdField])),this.layer.queryFeatures(o).then((e=>r.concat(e.features))).catch((()=>s)))}async createPopupQuery(e){const t=this.layer.createQuery(),r=new Set;let s=!1;const o=i(e)&&e.clientGraphics?e.clientGraphics.map((e=>e.layer)):[this.layer];for(const n of o){if(!(\"popupEnabled\"in n))continue;const t=q(n,e);if(!i(t))continue;const o=await this._loadArcadeModules(t),l=o&&o.arcadeUtils.hasGeometryOperations(t);s=!(\"point\"!==this.layer.geometryType&&!l);const a=await I(this.layer,t);for(const e of a)r.add(e)}if(t.returnGeometry=s,t.returnZ=s,t.returnM=s,t.outFields=Array.from(r),t.outSpatialReference=this.view.spatialReference,\"feature\"===this.layer.type){const e=R(this);i(e)&&(t.where=t.where?`(${t.where}) AND (${e})`:e)}return t}canResume(){return!!super.canResume()&&(!i(this.timeExtent)||!this.timeExtent.isEmpty)}};return e([a()],P.prototype,\"_updatingRequiredFieldsPromise\",void 0),e([a({readOnly:!0})],P.prototype,\"availableFields\",null),e([a({type:v})],P.prototype,\"effect\",void 0),e([a({type:j})],P.prototype,\"filter\",void 0),e([a(p)],P.prototype,\"timeExtent\",void 0),e([a()],P.prototype,\"layer\",void 0),e([a({type:Number})],P.prototype,\"maximumNumberOfFeatures\",null),e([a({readOnly:!0,type:Boolean})],P.prototype,\"maximumNumberOfFeaturesExceeded\",null),e([a({readOnly:!0})],P.prototype,\"requiredFields\",void 0),e([a()],P.prototype,\"suspended\",void 0),e([a()],P.prototype,\"view\",void 0),P=e([u(\"esri.views.layers.FeatureLayerView\")],P),P};export{P as FeatureLayerView,P as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../chunks/tslib.es6.js\";import t from\"../../../AggregateGraphic.js\";import\"../../../geometry.js\";import i from\"../../../Graphic.js\";import{flatten as r}from\"../../../core/arrayUtils.js\";import s from\"../../../core/Collection.js\";import a from\"../../../core/Error.js\";import n from\"../../../core/has.js\";import{clone as l}from\"../../../core/lang.js\";import o from\"../../../core/Logger.js\";import{andThen as h,unwrapOr as u,isSome as d,isNone as p}from\"../../../core/maybe.js\";import{debounce as c,eachAlwaysValues as y,isAbortError as f,after as g}from\"../../../core/promiseUtils.js\";import{init as m,whenFalseOnce as _}from\"../../../core/watchUtils.js\";import{property as v}from\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/accessorSupport/ensureType.js\";import{subclass as b}from\"../../../core/accessorSupport/decorators/subclass.js\";import R from\"../../../layers/effects/EffectList.js\";import{calculateTolerance as x}from\"../../../renderers/support/clickToleranceUtils.js\";import w from\"../../../rest/support/FeatureSet.js\";import S from\"../../../rest/support/Query.js\";import{MAX_FILTERS as F}from\"../engine/webgl/definitions.js\";import{LayerView2DMixin as U}from\"./LayerView2D.js\";import{createSchema as I}from\"./features/schemaUtils.js\";import{createOrReuseTileRenderer as O}from\"./features/tileRenderers.js\";import{computePxBuffer as E}from\"./features/support/pixelBuffering.js\";import{findSizeVV as T,createClusterCountSizeVariable as C,isClusterCompatibleRenderer as j,createClusterRenderer as P}from\"./support/clusterUtils.js\";import q from\"./support/FeatureCommandQueue.js\";import V from\"./support/FeatureLayerProxy.js\";import{toJSONGeometryType as L}from\"./support/util.js\";import{TileManager as N}from\"../tiling/TileManager.js\";import{FeatureLayerView as H}from\"../../layers/FeatureLayerView.js\";import J from\"../../layers/LayerView.js\";import{RefreshableLayerView as k}from\"../../layers/RefreshableLayerView.js\";import z from\"../../layers/support/FeatureFilter.js\";import A from\"../../layers/support/FeatureEffect.js\";import{createQueryGeometry as $}from\"../../support/drapedUtils.js\";import B from\"../../webgl/capabilities.js\";import M from\"../../../geometry/Extent.js\";const Q=2147483648,G=1,D=e=>(e&Q)>>>31===G;function K(e){return e&&\"openPorts\"in e}const W=o.getLogger(\"esri.views.2d.layers.FeatureLayerView2D\");let X=class extends(H(k(U(J)))){constructor(){super(...arguments),this._pipelineIsUpdating=!0,this._commandsQueue=new q({process:e=>{switch(e.type){case\"processed-edit\":return this._doEdit(e);case\"refresh\":return this._doRefresh();case\"update\":return this._doUpdate()}}}),this._visibilityOverrides=new Set,this._effect=null,this._highlightIds=new Map,this._lastPixelBuffer=0,this._updateHighlight=c((async()=>this._proxy.setHighlight(Array.from(this._highlightIds.keys())))),this._uploadsLocked=!1,this._needsClusterSizeUpdate=!1,this.filter=null,this.effectLists={included:new R,excluded:new R}}destroy(){var e,t;h(this._updateClusterSizeTask,(e=>e.remove())),null==(e=this._proxy)||e.destroy(),null==(t=this.tileRenderer)||t.destroy(),this._commandsQueue.destroy()}initialize(){this.addResolvingPromise(Promise.all([this._initProxy(),this._initServiceOptions()])),this.handles.add([this.on(\"valueRangesChanged\",(e=>{this._set(\"_aggregateValueRanges\",e.valueRanges)})),m(this,\"effect\",(e=>{this.effectLists.included.effect=null==e?void 0:e.includedEffect})),m(this,\"effect\",(e=>{this.effectLists.excluded.effect=null==e?void 0:e.excludedEffect}))])}async _initProxy(){if(\"isTable\"in this.layer&&this.layer.isTable)throw new a(\"featurelayerview:table-not-supported\",\"table feature layer can't be displayed\",{layer:this.layer});this._proxy&&this._proxy.destroy();const e=this._createClientOptions();return this._set(\"_proxy\",new V({client:e})),this._proxy.when()}async _initServiceOptions(){this._set(\"_serviceOptions\",await this._createServiceOptions())}get orderByFields(){return\"stream\"!==this._serviceOptions.type&&this._serviceOptions.orderByFields}get labelsVisible(){const e=\"subtype-group\"===this.layer.type?this.layer.sublayers.items:[this.layer];return!this.suspended&&e.some((e=>e.labelingInfo&&e.labelsVisible))}get effect(){return u(this._effect,null)}set effect(e){const t=this._effect;d(t)&&d(t.filter)&&t.filter.enabled&&d(e)&&d(e.filter)&&e.filter.enable(),this._effect=e,this.notifyChange(\"effect\")}get effects(){return this.effect&&[this.effect]||[]}get queryMode(){return this._serviceOptions.type}get renderingConfigHash(){if(!this.layer)return null;const e=this.availableFields,t=this.layer,i=this.view.floors,{definitionExpression:r}=t,s=\"subtype-group\"!==this.layer.type&&this.layer.labelsVisible&&this.layer.labelingInfo,a=\"renderer\"in t&&t.renderer,n=\"feature\"===t.type?t.gdbVersion:void 0,l=\"feature\"===t.type&&t.historicMoment?t.historicMoment.getTime():void 0,{timeExtent:o}=this,h=\"customParameters\"in t?JSON.stringify(t.customParameters):void 0,u=\"apiKey\"in t?t.apiKey:void 0,p=\"stream\"===t.type?`${JSON.stringify(t.geometryDefinition)}${t.definitionExpression}`:null,c=JSON.stringify(this.clips),y=t.featureReduction&&t.featureReduction.toJSON(),f=\"orderBy\"in this.layer&&JSON.stringify(this.layer.orderBy),g=\"sublayers\"in this.layer&&this.layer.sublayers.items.reduce(((e,t)=>e+`${t.visible?1:0}.${JSON.stringify(t.renderer)}.${t.labelsVisible}\\n.${JSON.stringify(t.labelingInfo)}`),\"\");return JSON.stringify({orderBy:f,sublayerHash:g,filterHash:d(this.filter)&&this.filter.toJSON(),effectHash:d(this.effect)&&this.effect.toJSON(),streamFilter:p,gdbVersion:n,definitionExpression:r,historicMoment:l,availableFields:e,renderer:a,labelingInfo:s,timeExtent:o,floors:i,clipsHash:c,featureReduction:y,customParameters:h,apiKey:u})}get hasEffects(){return this.effectLists.included.hasEffects||this.effectLists.excluded.hasEffects}highlight(e){let t;return e instanceof i?t=[e.getObjectId()]:\"number\"==typeof e||\"string\"==typeof e?t=[e]:s.isCollection(e)?t=e.map((e=>e&&e.getAttribute(this.layer.objectIdField))).toArray():Array.isArray(e)&&e.length>0&&(t=\"number\"==typeof e[0]||\"string\"==typeof e[0]?e:e.map((e=>e&&e.getAttribute(this.layer.objectIdField)))),t&&t.length?(t=t.filter((e=>null!=e)),this._addHighlight(t),{remove:()=>this._removeHighlight(t)}):{remove:()=>{}}}hasHighlight(){return!!this._highlightIds.size}hitTest(e,t){return this._hitTest(e,t)}async queryAggregates(){return(await this._proxy.getAggregates()).map((e=>t.fromJSON(e)))}queryStatistics(){return this._proxy.queryStatistics()}async querySummaryStatistics(e,t,i){const r={...t};var s;t.valueExpression&&(r.viewInfoParams={viewingMode:\"map\",scale:this.view.scale,spatialReference:null==(s=this.view.spatialReference)?void 0:s.toJSON()});return this._proxy.querySummaryStatistics(this._cleanUpQuery(e),r,i)}queryFeatures(e,t){return this.queryFeaturesJSON(e,t).then((e=>{const t=w.fromJSON(e);return t.features.forEach((e=>this._setLayersForFeature(e))),t}))}queryFeaturesJSON(e,t){return this._proxy.queryFeatures(this._cleanUpQuery(e),t)}queryObjectIds(e,t){return this._proxy.queryObjectIds(this._cleanUpQuery(e),t)}queryFeatureCount(e,t){return this._proxy.queryFeatureCount(this._cleanUpQuery(e),t)}queryExtent(e,t){return this._proxy.queryExtent(this._cleanUpQuery(e),t).then((e=>({count:e.count,extent:M.fromJSON(e.extent)})))}setVisibility(e,t){t?this._visibilityOverrides.delete(e):this._visibilityOverrides.add(e),this._update()}update(e){if(!this._tileStrategy||!this.tileRenderer)return;const{hasMissingTiles:t,added:i,removed:r}=this._tileStrategy.update(e);(i.length||r.length)&&this._proxy.updateTiles({added:i,removed:r}),t&&this.requestUpdate(),this.notifyChange(\"updating\")}attach(){this.view.timeline.record(`${this.layer.title} (FeatureLayer) Attach`),this._tileStrategy=new N({acquireTile:e=>this._acquireTile(e),releaseTile:e=>this._releaseTile(e),tileInfoView:this.view.featuresTilingScheme,buffer:0}),this.handles.add(m(this,\"renderingConfigHash\",(()=>this._update())),\"attach\"),\"stream\"!==this.layer.type&&this.handles.add(this.layer.on(\"edits\",(e=>this._edit(e))),\"attach\")}detach(){this.container.removeAllChildren(),this.handles.remove(\"attach\"),this.tileRenderer&&(this.tileRenderer.uninstall(this.container),this.tileRenderer=null),this._tileStrategy&&(this._tileStrategy.destroy(),this._tileStrategy=null),this._tileRendererHash=null}moveStart(){this.requestUpdate()}viewChange(){this.requestUpdate()}moveEnd(){this.requestUpdate()}async fetchPopupFeatures(e,i){if(d(i)&&i.clientGraphics.length){const e=i.clientGraphics[0];if(e instanceof t)return[e];i.clientGraphics=i.clientGraphics.filter((e=>{const{layer:t}=e,i=\"popupEnabled\"in t&&t.popupEnabled,r=\"popupTemplate\"in t&&t.popupTemplate,s=this.view.popup.defaultPopupTemplateEnabled;return i&&(r||s)}))}const s=this.validateFetchPopupFeatures(i);if(s)throw s;if(d(i)&&0===i.clientGraphics.length)return[];const a=this.fetchClientPopupFeatures(i);if(!e)return a;const n=this._fetchServicePopupFeatures(e,i);return y([a,n]).then(r)}async _fetchServicePopupFeatures(e,t){if(\"stream\"===this.layer.type||\"ogc-feature\"===this.layer.type)return[];const i=await this.createPopupQuery(t),{layer:r}=this,s=\"renderer\"in r&&r.renderer,a=d(t)?t.event:null,n=x({renderer:s,event:a});i.geometry=this.createFetchPopupFeaturesQueryGeometry(e,n);const l=new Set,{objectIdField:o}=r,h=d(t)?t.clientGraphics:null;if(h)for(const u of h)l.add(u.attributes[o]);return r.queryFeatures(i).then((e=>e.features.filter((e=>!l.has(e.attributes[o])))))}createFetchPopupFeaturesQueryGeometry(e,t){return $(e,t,this.view)}isUpdating(){var e;const t=\"renderer\"in this.layer&&null!=this.layer.renderer,i=this._commandsQueue.updating,r=null!=this._updatingRequiredFieldsPromise,s=!this._proxy||!this._proxy.isReady,a=this._pipelineIsUpdating,l=null===this.tileRenderer||(null==(e=this.tileRenderer)?void 0:e.updating),o=t&&(i||r||s||a||l);return n(\"esri-2d-log-updating\")&&console.log(`Updating FLV2D: ${o}\\n  -> hasRenderer ${t}\\n  -> hasPendingCommand ${i}\\n  -> updatingRequiredFields ${r}\\n  -> updatingProxy ${s}\\n  -> updatingPipeline ${a}\\n  -> updatingTileRenderer ${l}\\n`),o}_createClientOptions(){return{setUpdating:e=>{this._set(\"_pipelineIsUpdating\",e)},emitEvent:e=>{this.emit(e.name,e.event)}}}async _detectQueryMode(e){if(\"path\"in e&&(\"feature\"===this.layer.type||\"subtype-group\"===this.layer.type)&&\"point\"===this.layer.geometryType&&this.layer.capabilities.query.supportsPagination&&!this.layer.capabilities.operations.supportsEditing&&n(\"featurelayer-snapshot-enabled\"))try{const e=await this.layer.queryFeatureCount();if(e<=n(\"featurelayer-snapshot-point-min-threshold\"))return{mode:\"snapshot\",featureCount:e};const t=n(\"featurelayer-snapshot-point-max-threshold\"),i=n(\"featurelayer-snapshot-point-coverage\"),r=this.view.extent,s=this.layer.fullExtent,a=null==s?void 0:s.clone().intersection(r),l=d(a)?a.width*a.height:0,o=(null==s?void 0:s.width)*(null==s?void 0:s.height),h=0===o?0:l/o;if(e<=t&&h>=i)return{mode:\"snapshot\",featureCount:e}}catch(t){W.warn(\"mapview-feature-layer\",\"Encountered an error when querying for featureCount\",{error:t})}return{mode:\"on-demand\"}}async _createServiceOptions(){var e;const t=this.layer;if(\"stream\"===t.type)return null;const{capabilities:i,objectIdField:r}=t,s=t.fields.map((e=>e.toJSON())),a=t.fullExtent&&t.fullExtent.toJSON(),n=L(t.geometryType),o=t.timeInfo&&t.timeInfo.toJSON()||null,h=t.spatialReference?t.spatialReference.toJSON():null,u=\"feature\"===t.type?t.globalIdField:null;let p;\"ogc-feature\"===t.type?p=t.source.getFeatureDefinition():K(t.source)?p=await t.source.openPorts():t.parsedUrl&&(p=l(t.parsedUrl),\"dynamicDataSource\"in t&&t.dynamicDataSource&&(p.query={layer:JSON.stringify({source:t.dynamicDataSource})}));const c=\"datesInUnknownTimezone\"in this.layer&&this.layer.datesInUnknownTimezone,y=null!=(e=\"subtypeField\"in this.layer&&this.layer.subtypeField)?e:null,{mode:f,featureCount:g}=await this._detectQueryMode(p);let m=this.layer.objectIdField;if(\"feature\"===this.layer.type&&d(this.layer.orderBy)&&this.layer.orderBy.length){const e=!this.layer.orderBy[0].valueExpression&&this.layer.orderBy[0].field;e&&(m=e)}return{type:f,timeReferenceUnknownClient:c,subtypeField:y,featureCount:g,globalIdField:u,maxRecordCount:i.query.maxRecordCount,tileMaxRecordCount:i.query.tileMaxRecordCount,capabilities:i,fields:s,fullExtent:a,geometryType:n,objectIdField:r,source:p,timeInfo:o,spatialReference:h,orderByFields:m}}async _createMemoryServiceOptions(e){const t=await e.openPorts();return{...this._createServiceOptions(),type:\"memory\",source:t}}_cleanUpQuery(e){const t=S.from(e)||this.createQuery();return t.outSpatialReference||(t.outSpatialReference=this.view.spatialReference),t}async _update(){return this._commandsQueue.push({type:\"update\"})}async _edit(e){if(this._validateEdit(e))return this._commandsQueue.push({type:\"edit\",edits:e})}async doRefresh(){return this._commandsQueue.push({type:\"refresh\"})}_validateEdit(e){const t=\"globalIdField\"in this.layer&&this.layer.globalIdField,i=e.deletedFeatures.some((e=>-1===e.objectId||!e.objectId)),r=t&&this.availableFields.includes(t);return i&&!r?(W.error(new a(\"mapview-apply-edits\",`Editing the specified service requires the layer's globalIdField, ${t} to be included the layer's outFields for updates to be reflected on the map`)),null):e}async _doUpdate(){try{if(this.destroyed||!this._hasRequiredSupport(this.layer)||!this._tileStrategy)return;const{effect:t,filter:i}=this;await this._updateRequiredFields();const{renderer:r}=this._getEffectiveRenderer();this._set(\"_effectiveRenderer\",r);const s=this._createSchemaConfig(),a=L(this.layer.geometryType),n=await E(r,a,this.layer.featureReduction),l=this._createConfiguration(s,i,t);this._lastPixelBuffer=0===n?0:Math.max(n,this._lastPixelBuffer),l.schema.source.pixelBuffer=this._lastPixelBuffer;const o=this._createTileRendererHash(r);if(o!==this._tileRendererHash){await this._initTileRenderer(r);const e=this._serviceOptions;this.effects.forEach((e=>d(e)&&d(e.filter)&&e.filter.enable())),this.tileRenderer.onConfigUpdate(r);const t={added:this._tileStrategy.tileKeys(),removed:[]},i=this.layer;\"stream\"!==i.type&&K(i.source)&&(e.source=await i.source.openPorts()),\"stream\"===i.type&&await this._initServiceOptions(),await this._proxy.startup(this.view.featuresTilingScheme,l,e,t),this.hasHighlight()&&await this._proxy.setHighlight(Array.from(this._highlightIds.keys())),await this._onceTilesUpdated(),this.tileRenderer.onConfigUpdate(r)}else{const t=await this._proxy.update(l);(t.mesh||t.targets.aggregate)&&this._lockGPUUploads();try{await this._proxy.applyUpdate(t)}catch(e){f(e)||W.error(e)}(t.mesh||t.targets.aggregate)&&this._unlockGPUUploads(),this.effects.forEach((e=>d(e)&&d(e.filter)&&e.filter.enable())),this.tileRenderer.onConfigUpdate(r),this._updateClusterSizeVariable(),this._forceAttributeTextureUpload()}this._tileRendererHash=o,this.tileRenderer.invalidateLabels(),this.requestUpdate()}catch(e){}}async _doEdit(e){try{await this._proxy.onEdits(e)}catch(t){f(t),0}}async _doRefresh(){this._lockGPUUploads();try{await this._proxy.refresh()}catch(e){f(e),0}this._unlockGPUUploads()}_updateClusterSizeVariable(){this._needsClusterSizeUpdate&&(this.tileRenderer.onConfigUpdate(this._effectiveRenderer),this._needsClusterSizeUpdate=!1)}_createUpdateClusterSizeTask(e,t){return this.watch(\"_aggregateValueRanges\",(async i=>{this._updateClusterEffectiveRendererSizeVariable(e,t,i),this._needsClusterSizeUpdate=!0,this._uploadsLocked||this._updateClusterSizeVariable()}))}async _updateClusterEffectiveRendererSizeVariable(e,t,i){if(e.dynamicClusterSize&&\"visualVariables\"in e&&e.visualVariables){const r=T(e.visualVariables);if(d(r)&&\"cluster_count\"===r.field){const s=e.visualVariables.indexOf(r);e.visualVariables[s]=C(t,i);const a=e.clone();a.dynamicClusterSize=!0,this._set(\"_effectiveRenderer\",a)}}}_getEffectiveRenderer(){const e=\"renderer\"in this.layer&&this.layer.renderer,t=this.layer.featureReduction;if(d(this._updateClusterSizeTask)&&(this._updateClusterSizeTask.remove(),this._updateClusterSizeTask=null),t&&\"cluster\"===t.type&&j(e)){const i=t,r=[],s=P(r,e,i,this._aggregateValueRanges);return h(this._updateClusterSizeTask,(e=>e.remove())),this._updateClusterSizeTask=this._createUpdateClusterSizeTask(s,i),{renderer:s,aggregateFields:r,featureReduction:t}}return{renderer:e,aggregateFields:[],featureReduction:null}}_acquireTile(e){const t=this.tileRenderer.acquireTile(e);return t.once(\"attach\",(()=>{this.requestUpdate()})),t}_releaseTile(e){this.tileRenderer.releaseTile(e)}async _initTileRenderer(e){const t=await O(e,{layerView:this,tileInfoView:this.view.featuresTilingScheme,layer:this.layer});return this.tileRenderer&&(this._tileStrategy.clear(),this.tileRenderer.uninstall(this.container),this.tileRenderer.destroy(),this.tileRenderer=null),this.destroyed?null:(this._proxy.tileRenderer=t,this._set(\"tileRenderer\",t),this.tileRenderer.install(this.container),this.tileRenderer.onConfigUpdate(e),this.requestUpdate(),this.tileRenderer)}_createTileRendererHash(e){return`${\"heatmap\"===e.type?\"heatmap\":\"symbol\"}.${\"dot-density\"===e.type}`}_createFeatureDataHash(e,t,i){const r=e.getAttributeHash(),s=JSON.stringify(t),a=d(i)&&JSON.stringify(i.filter),n=JSON.stringify(this.timeExtent);let l=\"\";return this._visibilityOverrides.forEach((e=>l+=e)),`${r}.${s}.${a}.${n}.${l}`}get hasFilter(){const e=!!(\"floorInfo\"in this.layer&&this.layer.floorInfo&&this.view.floors&&this.view.floors.length);return!!this.filter||e||!!this._visibilityOverrides.size||!!this.timeExtent}_injectOverrides(e){const t=d(e)?e.timeExtent:null,i=d(this.timeExtent)&&d(t)?this.timeExtent.intersection(t):this.timeExtent||t;let r=null;const s=\"floorInfo\"in this.layer&&this.layer.floorInfo;if(s){const t=d(e)&&e.where;r=this._addFloorFilterClause(t)}if(!this._visibilityOverrides.size&&!i&&!s)return e;const a=d(e)&&e.clone()||new z;return a.hiddenIds=this._visibilityOverrides,a.timeExtent=i,r&&(a.where=r),a}_addFloorFilterClause(e){const t=this.layer;let i=e||\"\";if(\"floorInfo\"in t&&t.floorInfo){var r;let e=this.view.floors;if(!e||!e.length)return i;null!=(r=t.floorInfo.viewAllLevelIds)&&r.length&&(e=t.floorInfo.viewAllLevelIds);const s=e.filter((e=>\"\"!==e)).map((e=>\"'\"+e+\"'\"));s.push(\"''\");const a=t.floorInfo.floorField;let n=\"(\"+a+\" IN ({ids}) OR \"+a+\" IS NULL)\";if(n=n.replace(\"{ids}\",s.join(\", \")),d(i)&&i.includes(a)){let e=new RegExp(\"AND \\\\(\"+a+\".*NULL\\\\)\",\"g\");i=i.replace(e,\"\"),e=new RegExp(\"\\\\(\"+a+\".*NULL\\\\)\",\"g\"),i=i.replace(e,\"\"),i=i.replace(/\\s+/g,\" \").trim()}i=\"\"!==i?\"(\"+i+\") AND \"+n:n}return\"\"!==i?i:null}_createConfiguration(e,t,i){const r=\"feature\"===this.layer.type&&this.layer.historicMoment?this.layer.historicMoment.getTime():void 0,s=\"feature\"===this.layer.type?this.layer.gdbVersion:void 0,a=new Array(F),n=this._injectOverrides(t);a[0]=d(n)?n.toJSON():null,a[1]=d(i)&&i.filter?i.filter.toJSON():null;const l=I(e);if(p(l))return null;const o=B();return{definitionExpression:this.layer.definitionExpression,availableFields:this.availableFields,gdbVersion:s,historicMoment:r,devicePixelRatio:window.devicePixelRatio||1,filters:a,schema:l,supportsTextureFloat:o.supportsTextureFloat,maxTextureSize:o.maxTextureSize}}_hasRequiredSupport(e){var t;return!(\"renderer\"in e&&\"dot-density\"===(null==(t=e.renderer)?void 0:t.type)&&!B().supportsTextureFloat)||(W.error(new a(\"webgl-missing-extension\",\"Missing WebGL extension OES_Texture_Float which is required for DotDensity\")),!1)}_onceTilesUpdated(){return this.requestUpdate(),_(this,\"_pipelineIsUpdating\",!1)}_lockGPUUploads(){this.tileRenderer&&(this._uploadsLocked=!0,this.tileRenderer.lockGPUUploads())}_unlockGPUUploads(){this.tileRenderer&&(this._uploadsLocked=!1,this.tileRenderer.unlockGPUUploads())}_forceAttributeTextureUpload(){this.tileRenderer&&this.tileRenderer.forceAttributeTextureUpload()}_createSchemaConfig(){const e=\"feature\"===this.layer.type?this.layer.historicMoment:null,t=\"feature\"===this.layer.type?this.layer.gdbVersion:null;return{renderer:\"renderer\"in this.layer&&this.layer.renderer,spatialReference:this.layer.spatialReference,timeExtent:this.layer.timeExtent,definitionExpression:this.layer.definitionExpression,featureReduction:this.layer.featureReduction,fields:this.layer.fields,geometryType:this.layer.geometryType,historicMoment:e,labelsVisible:\"labelsVisible\"in this.layer&&this.layer.labelsVisible,labelingInfo:\"labelingInfo\"in this.layer&&this.layer.labelingInfo,availableFields:this.availableFields,effect:this.effect,filter:this.filter,gdbVersion:t,pixelBuffer:0,orderBy:\"orderBy\"in this.layer&&this.layer.orderBy?this.layer.orderBy:null,customParameters:{...\"customParameters\"in this.layer?this.layer.customParameters:void 0,token:\"apiKey\"in this.layer?this.layer.apiKey:void 0}}}_addHighlight(e){for(const t of e)if(this._highlightIds.has(t)){const e=this._highlightIds.get(t);this._highlightIds.set(t,e+1)}else this._highlightIds.set(t,1);this._updateHighlight().catch((e=>{f(e)||W.error(e)}))}_removeHighlight(e){for(const t of e)if(this._highlightIds.has(t)){const e=this._highlightIds.get(t)-1;0===e?this._highlightIds.delete(t):this._highlightIds.set(t,e)}this._updateHighlight().catch((e=>{f(e)||W.error(e)}))}_setLayersForFeature(e){const t=this.layer;e.layer=t,e.sourceLayer=t}_createHittestResult(e){return this._setLayersForFeature(e),d(e.geometry)&&(e.geometry.spatialReference=this.view.spatialReference),e}async _hitTest(e,r){if(this.suspended||!this.tileRenderer)return null;const s=await this.tileRenderer.hitTest(e,r);if(0===s.length)return await g(1),null;const a=s[0];if(!D(a)){const e=await this._proxy.getFeature(a);return h(e,(e=>this._createHittestResult(i.fromJSON(e))))}const n=await this._proxy.getAggregate(a);if(p(n))return null;if(d(n.referenceId)){const e=await this._proxy.getFeature(n.referenceId);return h(e,(e=>this._createHittestResult(i.fromJSON(e))))}return this._createHittestResult(t.fromJSON(n))}};e([v()],X.prototype,\"_serviceOptions\",void 0),e([v()],X.prototype,\"_proxy\",void 0),e([v()],X.prototype,\"_pipelineIsUpdating\",void 0),e([v()],X.prototype,\"_effectiveRenderer\",void 0),e([v()],X.prototype,\"_aggregateValueRanges\",void 0),e([v()],X.prototype,\"_commandsQueue\",void 0),e([v()],X.prototype,\"labelsVisible\",null),e([v({type:z})],X.prototype,\"filter\",void 0),e([v({type:A})],X.prototype,\"effect\",null),e([v({readOnly:!0})],X.prototype,\"effects\",null),e([v({readOnly:!0})],X.prototype,\"queryMode\",null),e([v()],X.prototype,\"renderingConfigHash\",null),e([v()],X.prototype,\"tileRenderer\",void 0),e([v()],X.prototype,\"updating\",void 0),X=e([b(\"esri.views.2d.layers.FeatureLayerView2D\")],X);var Y=X;export{Y as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nasync function e(e,a){if(!e)return null;switch(e.type){case\"class-breaks\":case\"simple\":case\"unique-value\":case\"dot-density\":case\"dictionary\":return new((await import(\"./tileRenderers/SymbolTileRenderer.js\")).default)(a);case\"heatmap\":return new((await import(\"./tileRenderers/HeatmapTileRenderer.js\")).default)(a)}}export{e as createOrReuseTileRenderer};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../chunks/tslib.es6.js\";import t from\"../../core/Accessor.js\";import r from\"../../core/Evented.js\";import{HandleOwnerMixin as s}from\"../../core/HandleOwner.js\";import{IdentifiableMixin as i}from\"../../core/Identifiable.js\";import o from\"../../core/Logger.js\";import{unwrapOr as n}from\"../../core/maybe.js\";import{EsriPromiseMixin as l}from\"../../core/Promise.js\";import{property as a}from\"../../core/accessorSupport/decorators/property.js\";import\"../../core/has.js\";import\"../../core/accessorSupport/ensureType.js\";import{subclass as p}from\"../../core/accessorSupport/decorators/subclass.js\";let d=class extends(s(i(l(r.EventedMixin(t))))){constructor(e){super(e),this.layer=null,this.parent=null}initialize(){this.when().catch((e=>{if(\"layerview:create-error\"!==e.name){const t=this.layer&&this.layer.id||\"no id\",r=this.layer&&this.layer.title||\"no title\";throw o.getLogger(this.declaredClass).error(\"#resolve()\",`Failed to resolve layer view (layer title: '${r}', id: '${t}')`,e),e}}))}get fullOpacity(){return n(this.get(\"layer.opacity\"),1)*n(this.get(\"parent.fullOpacity\"),1)}get suspended(){return!this.canResume()}get suspendInfo(){return this.getSuspendInfo()}get legendEnabled(){return!this.suspended&&!0===this.layer.legendEnabled}get updating(){return!!(this.updatingHandles&&this.updatingHandles.updating||this.isUpdating())}get updatingProgress(){return this.updating?0:1}get visible(){return!0===this.get(\"layer.visible\")}set visible(e){void 0!==e?this._override(\"visible\",e):this._clearOverride(\"visible\")}canResume(){return!this.get(\"parent.suspended\")&&this.get(\"view.ready\")&&this.get(\"layer.loaded\")&&this.visible||!1}getSuspendInfo(){const e=this.parent&&this.parent.suspended?this.parent.suspendInfo:{},t=this;return t.view&&t.view.ready||(e.viewNotReady=!0),this.layer&&this.layer.loaded||(e.layerNotLoaded=!0),this.visible||(e.layerInvisible=!0),e}isUpdating(){return!1}};e([a()],d.prototype,\"fullOpacity\",null),e([a()],d.prototype,\"layer\",void 0),e([a()],d.prototype,\"parent\",void 0),e([a({readOnly:!0})],d.prototype,\"suspended\",null),e([a({readOnly:!0})],d.prototype,\"suspendInfo\",null),e([a({readOnly:!0})],d.prototype,\"legendEnabled\",null),e([a({type:Boolean,readOnly:!0})],d.prototype,\"updating\",null),e([a({readOnly:!0})],d.prototype,\"updatingProgress\",null),e([a()],d.prototype,\"visible\",null),d=e([p(\"esri.views.layers.LayerView\")],d);var u=d;export{u as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport{_ as r}from\"../../../chunks/tslib.es6.js\";import{JSONSupport as s}from\"../../../core/JSONSupport.js\";import\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/has.js\";import\"../../../core/accessorSupport/ensureType.js\";import\"../../../core/Logger.js\";import{subclass as o}from\"../../../core/accessorSupport/decorators/subclass.js\";let e=class extends s{};e=r([o(\"esri.views.layers.support.ClipArea\")],e);var p=e;export{p as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport{_ as t}from\"../../../chunks/tslib.es6.js\";import{property as r}from\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/has.js\";import\"../../../core/accessorSupport/ensureType.js\";import\"../../../core/Logger.js\";import{subclass as o}from\"../../../core/accessorSupport/decorators/subclass.js\";import e from\"./ClipArea.js\";var s;let i=s=class extends e{constructor(){super(...arguments),this.type=\"rect\",this.left=null,this.right=null,this.top=null,this.bottom=null}clone(){return new s({left:this.left,right:this.right,top:this.top,bottom:this.bottom})}get version(){return(this._get(\"version\")||0)+1}};t([r({type:[Number,String],json:{write:!0}})],i.prototype,\"left\",void 0),t([r({type:[Number,String],json:{write:!0}})],i.prototype,\"right\",void 0),t([r({type:[Number,String],json:{write:!0}})],i.prototype,\"top\",void 0),t([r({type:[Number,String],json:{write:!0}})],i.prototype,\"bottom\",void 0),t([r({readOnly:!0})],i.prototype,\"version\",null),i=s=t([o(\"esri.views.layers.support.ClipRect\")],i);var p=i;export{p as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../chunks/tslib.es6.js\";import\"../../../geometry.js\";import{property as r}from\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/has.js\";import\"../../../core/accessorSupport/ensureType.js\";import\"../../../core/Logger.js\";import{subclass as o}from\"../../../core/accessorSupport/decorators/subclass.js\";import t from\"../../../geometry/Geometry.js\";import{fromJSON as s}from\"../../../geometry/support/jsonUtils.js\";import p from\"./ClipArea.js\";import m from\"../../../geometry/Extent.js\";import i from\"../../../geometry/Polygon.js\";var y;const n={base:t,key:\"type\",typeMap:{extent:m,polygon:i}};let c=y=class extends p{constructor(){super(...arguments),this.type=\"geometry\",this.geometry=null}get version(){return(this._get(\"version\")||0)+1}clone(){return new y({geometry:this.geometry.clone()})}};e([r({types:n,json:{read:s,write:!0}})],c.prototype,\"geometry\",void 0),e([r({readOnly:!0})],c.prototype,\"version\",null),c=y=e([o(\"esri.views.layers.support.Geometry\")],c);var a=c;export{a as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport{_ as r}from\"../../../chunks/tslib.es6.js\";import{property as o}from\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/has.js\";import\"../../../core/accessorSupport/ensureType.js\";import\"../../../core/Logger.js\";import{subclass as s}from\"../../../core/accessorSupport/decorators/subclass.js\";import e from\"./ClipArea.js\";let t=class extends e{constructor(){super(...arguments),this.type=\"path\",this.path=[]}get version(){return(this._get(\"version\")||0)+1}};r([o({type:[[[Number]]],json:{write:!0}})],t.prototype,\"path\",void 0),r([o({readOnly:!0})],t.prototype,\"version\",null),t=r([s(\"esri.views.layers.support.Path\")],t);var p=t;export{p as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport{_ as t}from\"../../../chunks/tslib.es6.js\";import e from\"../../../core/Collection.js\";import{referenceSetter as s}from\"../../../core/collectionUtils.js\";import{init as i}from\"../../../core/watchUtils.js\";import{property as r}from\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/has.js\";import\"../../../core/accessorSupport/ensureType.js\";import\"../../../core/Logger.js\";import{subclass as o}from\"../../../core/accessorSupport/decorators/subclass.js\";import{Container as a}from\"../engine/Container.js\";import p from\"../../layers/support/ClipArea.js\";import h from\"../../layers/support/ClipRect.js\";import n from\"../../layers/support/Geometry.js\";import d from\"../../layers/support/Path.js\";const c=e.ofType({key:\"type\",base:p,typeMap:{rect:h,path:d,geometry:n}}),l=e=>{let p=class extends e{constructor(){super(...arguments),this.clips=new c,this.moving=!1,this.attached=!1,this.lastUpdateId=-1,this.updateRequested=!1}initialize(){var t;this.container||(this.container=new a),this.container.fadeTransitionEnabled=!0,this.container.opacity=0,this.container.clips=this.clips,this.handles.add([i(this,\"suspended\",(t=>{this.container&&(this.container.visible=!t),this.view&&!t&&this.updateRequested&&this.view.requestUpdate()}),!0),i(this,[\"layer.opacity\",\"container\"],(()=>{var t,e;this.container&&(this.container.opacity=null!=(t=null==(e=this.layer)?void 0:e.opacity)?t:1)}),!0),i(this,[\"layer.blendMode\"],(t=>{this.container&&(this.container.blendMode=t)}),!0),i(this,[\"layer.effect\"],(t=>{this.container&&(this.container.effect=t)}),!0),this.clips.on(\"change\",(()=>{this.container.clips=this.clips,this.notifyChange(\"clips\")}))]),null!=(t=this.view)&&t.whenLayerView?this.view.whenLayerView(this.layer).then((t=>{t!==this||this.attached||this.destroyed||(this.attach(),this.requestUpdate(),this.attached=!0)}),(()=>{})):this.when().then((()=>{this.attached||this.destroyed||(this.attach(),this.requestUpdate(),this.attached=!0)}),(()=>{}))}destroy(){this.attached&&(this.detach(),this.attached=!1),this.handles.remove(\"initialize\"),this.updateRequested=!1}get updating(){return!this.attached||!this.suspended&&(this.updateRequested||this.isUpdating())}isVisibleAtScale(t){let e=!0;const s=this.layer,i=s.minScale,r=s.maxScale;if(null!=i&&null!=r){let s=!i,o=!r;!s&&t<=i&&(s=!0),!o&&t>=r&&(o=!0),e=s&&o}return e}requestUpdate(){this.destroyed||this.updateRequested||(this.updateRequested=!0,this.suspended||this.view.requestUpdate())}processUpdate(t){!this.isFulfilled()||this.isResolved()?(this._set(\"updateParameters\",t),this.updateRequested&&!this.suspended&&(this.updateRequested=!1,this.update(t))):this.updateRequested=!1}isUpdating(){return!1}isRendering(){return!1}canResume(){return!!super.canResume()&&this.isVisibleAtScale(this.view.scale)}};return t([r({type:c,set(t){const e=s(t,this._get(\"clips\"),c);this._set(\"clips\",e)}})],p.prototype,\"clips\",void 0),t([r()],p.prototype,\"moving\",void 0),t([r()],p.prototype,\"attached\",void 0),t([r()],p.prototype,\"container\",void 0),t([r()],p.prototype,\"suspended\",void 0),t([r({readOnly:!0})],p.prototype,\"updateParameters\",void 0),t([r()],p.prototype,\"updateRequested\",void 0),t([r()],p.prototype,\"updating\",null),t([r()],p.prototype,\"view\",void 0),p=t([o(\"esri.views.2d.layers.LayerView2D\")],p),p};export{l as LayerView2DMixin};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport e from\"../../../../core/Error.js\";import s from\"../../../../core/Logger.js\";import{WGLVVFlag as i}from\"./enums.js\";import{isNumber as r}from\"./Utils.js\";const l=s.getLogger(\"esri.views.2d.engine.webgl\");function o(s){return r(s.minDataValue)&&r(s.maxDataValue)&&null!=s.minSize&&null!=s.maxSize?i.SIZE_MINMAX_VALUE:(s.expression&&\"view.scale\"===s.expression||s.valueExpression&&\"$view.scale\"===s.valueExpression)&&Array.isArray(s.stops)?i.SIZE_SCALE_STOPS:(null!=s.field||s.expression&&\"view.scale\"!==s.expression||s.valueExpression&&\"$view.scale\"!==s.valueExpression)&&(Array.isArray(s.stops)||\"levels\"in s&&s.levels)?i.SIZE_FIELD_STOPS:(null!=s.field||s.expression&&\"view.scale\"!==s.expression||s.valueExpression&&\"$view.scale\"!==s.valueExpression)&&null!=s.valueUnit?i.SIZE_UNIT_VALUE:(l.error(new e(\"mapview-bad-type\",\"Found invalid size VisualVariable\",s)),i.NONE)}export{o as getTypeOfSizeVisualVariable};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nfunction t(t,e){return e?\"xoffset\"in e&&e.xoffset?Math.max(t,Math.abs(e.xoffset)):\"yoffset\"in e&&e.yoffset?Math.max(t,Math.abs(e.yoffset||0)):t:t}function e(t){let e=0,n=0;for(let r=0;r<t.length;r++){const s=t[r].size;\"number\"==typeof s&&(e+=s,n++)}return e/n}function n(t,n){return\"number\"==typeof t?t:t&&t.stops&&t.stops.length?e(t.stops):n}function r(t,e){if(!e)return t;const r=e.filter((t=>\"size\"===t.type)).map((e=>{const{maxSize:r,minSize:s}=e;return(n(r,t)+n(s,t))/2}));let s=0;const o=r.length;if(0===o)return t;for(let n=0;n<o;n++)s+=r[n];const f=Math.floor(s/o);return Math.max(f,t)}function s(e){const n=e&&e.renderer,s=\"touch\"===(e&&e.event&&e.event.pointerType)?9:6;if(!n)return s;const o=\"visualVariables\"in n?r(s,n.visualVariables):s;if(\"simple\"===n.type)return t(o,n.symbol);if(\"unique-value\"===n.type){let e=o;return n.uniqueValueInfos.forEach((n=>{e=t(e,n.symbol)})),e}if(\"class-breaks\"===n.type){let e=o;return n.classBreakInfos.forEach((n=>{e=t(e,n.symbol)})),e}return n.type,o}export{s as calculateTolerance};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport\"../../geometry.js\";import{isSome as e,isNone as t}from\"../../core/maybe.js\";import{getMetersPerUnitForSR as r}from\"../../core/unitUtils.js\";import{calculateTolerance as n}from\"../../renderers/support/clickToleranceUtils.js\";import i from\"../../geometry/Extent.js\";function a(t,n,a,o=new i){let s;if(\"2d\"===a.type)s=n*a.resolution;else if(\"3d\"===a.type){const i=a.overlayPixelSizeInMapUnits(t),o=a.basemapSpatialReference;s=e(o)&&!o.equals(a.spatialReference)?r(o)/r(a.spatialReference):n*i}const m=t.x-s,p=t.y-s,c=t.x+s,l=t.y+s,{spatialReference:f}=a;return o.xmin=Math.min(m,c),o.ymin=Math.min(p,l),o.xmax=Math.max(m,c),o.ymax=Math.max(p,l),o.spatialReference=f,o}function o(e,r,i){const o=i.toMap(e);if(t(o))return!1;return a(o,n(),i,s).intersects(r)}const s=new i;export{a as createQueryGeometry,o as intersectsDrapedGeometry};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nfunction o(o){var n;const l=o.layer;if(\"floorInfo\"in l&&null!=(n=l.floorInfo)&&n.floorField&&\"floors\"in o.view){return r(o.view.floors,l.floorInfo.floorField)}return null}function n(o,n){var l;return\"floorInfo\"in n&&null!=(l=n.floorInfo)&&l.floorField?r(o,n.floorInfo.floorField):null}function l(o,n){const{definitionExpression:l}=n;return o?l?`(${l}) AND (${o})`:o:l}function r(o,n){if(null==o||!o.length)return null;const l=o.filter((o=>\"\"!==o)).map((o=>`'${o}'`));return l.push(\"''\"),`${n} IN (${l.join(\",\")}) OR ${n} IS NULL`}export{l as combineFloorsDefinitionExpression,o as getFloorFilterClause,n as getLayerFloorFilterClause};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport{_ as r}from\"../../chunks/tslib.es6.js\";import e from\"../../core/Logger.js\";import{isAbortError as s}from\"../../core/promiseUtils.js\";import{on as o}from\"../../core/watchUtils.js\";import{property as t}from\"../../core/accessorSupport/decorators/property.js\";import\"../../core/has.js\";import\"../../core/accessorSupport/ensureType.js\";import{subclass as i}from\"../../core/accessorSupport/decorators/subclass.js\";const a=a=>{let c=class extends a{initialize(){this.handles.add(o(this,\"layer\",\"refresh\",(()=>{this.doRefresh().catch((r=>{s(r)||e.getLogger(this.declaredClass).error(r)}))})),\"RefreshableLayerView\")}};return r([t()],c.prototype,\"layer\",void 0),c=r([i(\"esri.layers.mixins.RefreshableLayerView\")],c),c};export{a as RefreshableLayerView,a as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport{isSome as e}from\"../../../core/maybe.js\";import{getFeatureEditFields as p,fixFields as l}from\"../../../layers/support/fieldUtils.js\";async function t(t,d=t.popupTemplate){if(!e(d))return[];const i=await d.getRequiredFields(t.fieldsIndex),{lastEditInfoEnabled:n}=d,{objectIdField:s,typeIdField:a,globalIdField:o,relationships:u}=t;if(i.includes(\"*\"))return[\"*\"];const f=n?await p(t):[],r=l(t.fieldsIndex,[...i,...f]);return a&&r.push(a),r&&s&&t.fieldsIndex.has(s)&&-1===r.indexOf(s)&&r.push(s),r&&o&&t.fieldsIndex.has(o)&&-1===r.indexOf(o)&&r.push(o),u&&u.forEach((e=>{const{keyField:p}=e;r&&p&&t.fieldsIndex.has(p)&&-1===r.indexOf(p)&&r.push(p)})),r}function d(p,l){return p.popupTemplate?p.popupTemplate:e(l)&&l.defaultPopupTemplateEnabled&&e(p.defaultPopupTemplate)?p.defaultPopupTemplate:null}export{d as getFetchPopupTemplate,t as getRequiredFields};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../chunks/tslib.es6.js\";import{geometryTypes as t}from\"../../../geometry.js\";import r from\"../../../TimeExtent.js\";import{JSONMap as i}from\"../../../core/jsonMap.js\";import{JSONSupport as s}from\"../../../core/JSONSupport.js\";import{clone as o}from\"../../../core/lang.js\";import{property as n}from\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/accessorSupport/ensureType.js\";import\"../../../core/has.js\";import\"../../../core/Logger.js\";import{subclass as a}from\"../../../core/accessorSupport/decorators/subclass.js\";import{writer as p}from\"../../../core/accessorSupport/decorators/writer.js\";import{fromJSON as l}from\"../../../geometry/support/jsonUtils.js\";import c from\"../../../rest/support/Query.js\";var d;const m=new i({esriSpatialRelIntersects:\"intersects\",esriSpatialRelContains:\"contains\",esriSpatialRelCrosses:\"crosses\",esriSpatialRelDisjoint:\"disjoint\",esriSpatialRelEnvelopeIntersects:\"envelope-intersects\",esriSpatialRelIndexIntersects:\"index-intersects\",esriSpatialRelOverlaps:\"overlaps\",esriSpatialRelTouches:\"touches\",esriSpatialRelWithin:\"within\",esriSpatialRelRelation:\"relation\"}),u=new i({esriSRUnit_Meter:\"meters\",esriSRUnit_Kilometer:\"kilometers\",esriSRUnit_Foot:\"feet\",esriSRUnit_StatuteMile:\"miles\",esriSRUnit_NauticalMile:\"nautical-miles\",esriSRUnit_USNauticalMile:\"us-nautical-miles\"});let h=d=class extends s{constructor(e){super(e),this.where=null,this.geometry=null,this.spatialRelationship=\"intersects\",this.hiddenIds=new Set,this.distance=void 0,this.objectIds=null,this.units=null,this.timeExtent=null,this.enabled=!1}writeWhere(e,t){t.where=e||\"1=1\"}enable(){this._set(\"enabled\",!0)}createQuery(e={}){const{where:t,geometry:r,spatialRelationship:i,timeExtent:s,objectIds:n,units:a,distance:p}=this;return new c({geometry:o(r),objectIds:o(n),spatialRelationship:i,timeExtent:o(s),where:t,units:a,distance:p,...e})}clone(){const{where:e,geometry:t,spatialRelationship:r,hiddenIds:i,timeExtent:s,objectIds:n,units:a,distance:p}=this,l=new Set;return i.forEach((e=>l.add(e))),new d({geometry:o(t),hiddenIds:l,objectIds:o(n),spatialRelationship:r,timeExtent:o(s),where:e,units:a,distance:p})}};e([n({type:String})],h.prototype,\"where\",void 0),e([p(\"where\")],h.prototype,\"writeWhere\",null),e([n({types:t,json:{read:l,write:!0}})],h.prototype,\"geometry\",void 0),e([n({type:String,json:{read:{source:\"spatialRel\",reader:m.read},write:{target:\"spatialRel\",writer:m.write}}})],h.prototype,\"spatialRelationship\",void 0),e([n({json:{write:(e,t,r)=>t[r]=Array.from(e),read:e=>new Set(e)}})],h.prototype,\"hiddenIds\",void 0),e([n({type:Number,json:{write:{overridePolicy:e=>({enabled:e>0})}}})],h.prototype,\"distance\",void 0),e([n({type:[Number],json:{write:!0}})],h.prototype,\"objectIds\",void 0),e([n({type:String,json:{read:u.read,write:{writer:u.write,overridePolicy(e){return{enabled:e&&this.distance>0}}}}})],h.prototype,\"units\",void 0),e([n({type:r,json:{write:!0}})],h.prototype,\"timeExtent\",void 0),e([n({readOnly:!0})],h.prototype,\"enabled\",void 0),h=d=e([a(\"esri.views.layers.support.FeatureFilter\")],h);var y=h;export{y as default};\n"],"sourceRoot":""}