{"version":3,"sources":["../node_modules/@arcgis/core/views/interactive/snapping/featureSources/GraphicsSnappingSource.js","../node_modules/@arcgis/core/geometry/support/normalizeUtilsSync.js","../node_modules/@arcgis/core/views/interactive/snapping/hints/PointSnappingHint.js","../node_modules/@arcgis/core/core/libs/rbush/PooledRBush.js","../node_modules/@arcgis/core/layers/graphics/data/FeatureStore.js","../node_modules/@arcgis/core/layers/graphics/data/optimizedFeatureQueryEngineAdapter.js","../node_modules/@arcgis/core/layers/graphics/data/BoundsStore.js","../node_modules/@arcgis/core/views/interactive/snapping/candidates/VertexSnappingCandidate.js","../node_modules/@arcgis/core/views/interactive/snapping/featureSources/queryEngineUtils.js"],"names":["k","s","t","constructor","e","super","this","availability","sources","multipoint","point","polygon","polyline","loadedWkids","Set","loadedWkts","pendingAdds","updating","updatingHandles","layer","layerSource","destroy","length","task","abort","mapSources","destroySource","initialize","handles","add","on","onGraphicUpdate","addOnCollectionChange","graphics","onGraphicsChanged","addMany","toArray","a","r","queryEngine","executeQueryForSnapping","coordinateHelper","vectorToPoint","toJSON","distance","types","query","o","filter","createQuery","where","then","candidates","flat","map","v","w","refresh","property","remove","graphic","removed","added","Map","i","geometry","needsInitializeProjection","spatialReference","push","set","uid","createPendingAdd","n","async","h","source","dest","signal","markLoadedSpatialReferences","addPromise","promise","wkid","wkt","visible","type","c","fromExtent","ensureSource","createOptimizedFeature","featureStore","has","l","u","m","f","g","O","createSource","y","S","geometryType","hasZ","hasM","j","fields","name","alias","objectIdField","scheduler","view","resourceController","removeFromSource","delete","size","removeById","p","constructOnly","prototype","readOnly","d","isWebMercator","I","maxX","minX","b","plus180Line","minus180Line","J","N","points","x","M","xmin","ymin","xmax","ymax","cut","valid","frameId","extent","frameIds","rings","Array","isArray","Math","ceil","abs","closed","minPts","paths","equals","compareMinX","compareMinY","toBBox","_maxEntries","max","_minEntries","_initFormat","clear","prune","X","Y","B","all","_all","data","search","children","leaf","pop","collides","load","insert","_build","slice","height","_splitRoot","_insert","indexHint","splice","_condense","fromJSON","pushArray","log","sqrt","min","_chooseSubtree","_split","_adjustParentBBoxes","_chooseSplitAxis","_chooseSplitIndex","console","_allDistMargin","sort","Function","join","minY","maxY","deallocator","arguments","geometryInfo","_boundsStore","_featuresById","_markedIds","events","featureAdapter","numFeatures","fullBounds","forEach","get","objectId","storeStatistics","coords","featureCount","vertexCount","_add","_emitChanged","_remove","removeManyById","invalidateIndex","forEachBounds","getFeature","forEachInBounds","startMarkingUsedFeatures","sweep","emit","getLogger","error","feature","displayId","onFeatureAdd","onFeatureRemove","getObjectId","getAttributes","attributes","getAttribute","cloneWithGeometry","getGeometry","getCentroid","centroid","_indexInvalid","_boundsToLoad","_boundsById","_idByBounds","_index","_loadIndex","constraint","targetPoint","hints","edgeStart","pointToVector","start","edgeEnd","end","target"],"mappings":"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","file":"static/js/141.271af72a.chunk.js","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../../chunks/tslib.es6.js\";import t from\"../../../../core/Accessor.js\";import{removeUnordered as r}from\"../../../../core/arrayUtils.js\";import{HandleOwnerMixin as s}from\"../../../../core/HandleOwner.js\";import{isSome as o,isNone as i}from\"../../../../core/maybe.js\";import{eachAlwaysValues as a,createTask as n}from\"../../../../core/promiseUtils.js\";import{property as p}from\"../../../../core/accessorSupport/decorators/property.js\";import\"../../../../core/has.js\";import\"../../../../core/accessorSupport/ensureType.js\";import\"../../../../core/Logger.js\";import{subclass as d}from\"../../../../core/accessorSupport/decorators/subclass.js\";import c from\"../../../../geometry/Polygon.js\";import{canProjectWithoutEngine as l,project as u,initializeProjection as h}from\"../../../../geometry/projection.js\";import{normalizeCentralMeridianSync as m}from\"../../../../geometry/support/normalizeUtilsSync.js\";import{featureGeometryTypeKebabDictionary as y}from\"../../../../geometry/support/typeUtils.js\";import{convertFromGeometry as g}from\"../../../../layers/graphics/featureConversionUtils.js\";import f from\"../../../../layers/graphics/OptimizedFeature.js\";import S from\"../../../../layers/graphics/data/FeatureStore.js\";import j from\"../../../../layers/graphics/data/QueryEngine.js\";import{sortCandidatesInPlace as w}from\"../snappingUtils.js\";import{convertSnappingCandidate as v}from\"./queryEngineUtils.js\";let k=class extends(s(t)){constructor(e){super(e),this.availability=1,this.sources={multipoint:null,point:null,polygon:null,polyline:null},this.loadedWkids=new Set,this.loadedWkts=new Set,this.pendingAdds=[]}get updating(){return this.updatingHandles.updating}get layer(){return this.layerSource.layer}destroy(){const e=this.pendingAdds;this.pendingAdds.length=0;for(const t of e)t.task.abort();this.mapSources((e=>this.destroySource(e)))}initialize(){this.handles.add([this.layer.on(\"graphic-update\",(e=>this.onGraphicUpdate(e))),this.updatingHandles.addOnCollectionChange(this.layer.graphics,(e=>this.onGraphicsChanged(e)))]),this.addMany(this.layer.graphics.toArray())}async fetchCandidates(e,t){const r=await a(this.mapSources((r=>r.queryEngine.executeQueryForSnapping({point:e.coordinateHelper.vectorToPoint(e.point).toJSON(),distance:e.distance,types:e.types,query:o(e.filter)?e.filter.createQuery().toJSON():{where:\"1=1\"}},t).then((({candidates:e})=>e))))),s=r.flat().map((t=>v(t,e.coordinateHelper)));return w(e.point,s),s}refresh(){}onGraphicUpdate(e){switch(e.property){case\"geometry\":case\"visible\":this.remove(e.graphic),this.addMany([e.graphic])}}onGraphicsChanged(e){for(const t of e.removed)this.remove(t);this.addMany(e.added)}addMany(e){const t=[],r=new Map;for(const s of e)i(s.geometry)||(this.needsInitializeProjection(s.geometry.spatialReference)?(t.push(s.geometry.spatialReference),r.set(s.uid,s)):this.add(s));this.createPendingAdd(t,r)}createPendingAdd(e,t){if(!e.length)return;const s=n((async r=>{await h(e.map((e=>({source:e,dest:this.spatialReference}))),{signal:r}),this.markLoadedSpatialReferences(e);for(const[,e]of t)this.add(e)}));this.updatingHandles.addPromise(s.promise);const o={task:s,graphics:t},i=()=>r(this.pendingAdds,o);s.promise.then(i,i),this.pendingAdds.push(o)}markLoadedSpatialReferences(e){for(const t of e)null!=t.wkid&&this.loadedWkids.add(t.wkid),null!=t.wkt&&this.loadedWkts.add(t.wkt)}add(e){if(i(e.geometry)||!e.visible)return;let t=e.geometry;if(\"mesh\"===t.type)return;\"extent\"===t.type&&(t=c.fromExtent(t));const r=this.ensureSource(t.type);if(i(r))return;const s=this.createOptimizedFeature(e.uid,t);o(s)&&r.featureStore.add(s)}needsInitializeProjection(e){return(null==e.wkid||!this.loadedWkids.has(e.wkid))&&((null==e.wkt||!this.loadedWkts.has(e.wkt))&&!l(e,this.spatialReference))}createOptimizedFeature(e,t){const r=u(m(t),this.spatialReference);return r?new f(g(r,!1,!1),{[O]:e},null,e):null}ensureSource(e){const t=this.sources[e];if(o(t))return t;const r=this.createSource(e);return this.sources[e]=r,r}createSource(e){const t=y.toJSON(e),r=new S({geometryType:t,hasZ:!1,hasM:!1});return{featureStore:r,queryEngine:new j({featureStore:r,fields:[{name:O,type:\"esriFieldTypeOID\",alias:O}],geometryType:t,hasM:!1,hasZ:!1,objectIdField:O,spatialReference:this.spatialReference,scheduler:o(this.view)&&\"3d\"===this.view.type?this.view.resourceController.scheduler:null}),type:e}}remove(e){this.mapSources((t=>this.removeFromSource(t,e)));for(const t of this.pendingAdds)t.graphics.delete(e.uid),0===t.graphics.size&&t.task.abort()}removeFromSource(e,t){const r=t.uid;e.featureStore.has(r)&&e.featureStore.removeById(t.uid)}destroySource(e){e.queryEngine.destroy(),this.sources[e.type]=null}mapSources(e){const{point:t,polygon:r,polyline:s,multipoint:i}=this.sources,a=[];return o(t)&&a.push(e(t)),o(r)&&a.push(e(r)),o(s)&&a.push(e(s)),o(i)&&a.push(e(i)),a}};e([p({constructOnly:!0})],k.prototype,\"spatialReference\",void 0),e([p({constructOnly:!0})],k.prototype,\"layerSource\",void 0),e([p({constructOnly:!0})],k.prototype,\"view\",void 0),e([p({readOnly:!0})],k.prototype,\"updating\",null),e([p({readOnly:!0})],k.prototype,\"availability\",void 0),k=e([d(\"esri.views.interactive.snapping.featureSources.GraphicsSnappingSource\")],k);const O=\"OBJECTID\";export{k as GraphicsSnappingSource};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport{create as n}from\"./aaBoundingRect.js\";import{getBoundsXY as t}from\"./boundsUtils.js\";import{extentIntersectsPolyline as i}from\"./intersectsBase.js\";import{isPoint as s,isMultipoint as m,isExtent as e,isPolygon as x,isPolyline as o}from\"./jsonUtils.js\";import{cutParams as r,getGeometryParts as a,offsetMagnitude as f}from\"./normalizeUtilsCommon.js\";import{getInfo as c}from\"./spatialReferenceUtils.js\";function l(n){if(!n)return null;if(\"mesh\"===n.type)return n.toJSON();let a=null;const l=n.spatialReference,h=c(l);if(!h)return n.toJSON();const d=l.isWebMercator?102100:4326,I=r[d].maxX,g=r[d].minX,b=r[d].plus180Line,v=r[d].minus180Line;let J;const N=n.toJSON();if(s(N))J=y(N,I,g);else if(m(N))N.points=N.points.map((n=>y(n,I,g))),J=N;else if(e(N))J=p(N,h);else if(x(N)||o(N)){const n=M;t(n,N);const s={xmin:n[0],ymin:n[1],xmax:n[2],ymax:n[3]},m=f(s.xmin,g)*(2*I),e=0===m?N:u(N,m);s.xmin+=m,s.xmax+=m,i(s,b)&&s.xmax!==I||i(s,v)&&s.xmin!==g?a=e:J=e}else J=n.toJSON();if(null!==a){return(new j).cut(a,I)}return J}function u(n,t){const i=a(n);for(const s of i)for(const n of s)n[0]+=t;return n}function p(n,t){if(!t)return n;const i=h(n,t).map((n=>n.extent));return i.length<2?i[0]||n:i.length>2?(n.xmin=t.valid[0],n.xmax=t.valid[1],n):{rings:i.map((n=>[[n.xmin,n.ymin],[n.xmin,n.ymax],[n.xmax,n.ymax],[n.xmax,n.ymin],[n.xmin,n.ymin]]))}}function y(n,t,i){if(Array.isArray(n)){const s=n[0];if(s>t){const i=f(s,t);n[0]=s+i*(-2*t)}else if(s<i){const t=f(s,i);n[0]=s+t*(-2*i)}}else{const s=n.x;if(s>t){const i=f(s,t);n.x+=i*(-2*t)}else if(s<i){const t=f(s,i);n.x+=t*(-2*i)}}return n}function h(n,t){const i=[],{ymin:s,ymax:m}=n,e=n.xmax-n.xmin,x=n.xmin,o=n.xmax;let r;const[a,f]=t.valid;r=d(n.xmin,t);const c=r.x,l=r.frameId;r=d(n.xmax,t);const u=r.x,p=r.frameId,y=c===u&&e>0;if(e>2*f){const n={xmin:x<o?c:u,ymin:s,xmax:f,ymax:m},t={xmin:a,ymin:s,xmax:x<o?u:c,ymax:m},e={xmin:0,ymin:s,xmax:f,ymax:m},r={xmin:a,ymin:s,xmax:0,ymax:m},y=[],h=[];I(n,e)&&y.push(l),I(n,r)&&h.push(l),I(t,e)&&y.push(p),I(t,r)&&h.push(p);for(let i=l+1;i<p;i++)y.push(i),h.push(i);i.push({extent:n,frameIds:[l]},{extent:t,frameIds:[p]},{extent:e,frameIds:y},{extent:r,frameIds:h})}else c>u||y?i.push({extent:{xmin:c,ymin:s,xmax:f,ymax:m},frameIds:[l]},{extent:{xmin:a,ymin:s,xmax:u,ymax:m},frameIds:[p]}):i.push({extent:{xmin:c,ymin:s,xmax:u,ymax:m},frameIds:[l]});return i}function d(n,t){const[i,s]=t.valid,m=2*s;let e,x=0;return n>s?(e=Math.ceil(Math.abs(n-s)/m),n-=e*m,x=e):n<i&&(e=Math.ceil(Math.abs(n-i)/m),n+=e*m,x=-e),{x:n,frameId:x}}function I(n,t){const{xmin:i,ymin:s,xmax:m,ymax:e}=t;return g(n,i,s)&&g(n,i,e)&&g(n,m,e)&&g(n,m,s)}function g(n,t,i){return t>=n.xmin&&t<=n.xmax&&i>=n.ymin&&i<=n.ymax}class j{cut(n,t){let i;if(n.rings)this.closed=!0,i=n.rings,this.minPts=4;else{if(!n.paths)return null;this.closed=!1,i=n.paths,this.minPts=2}const s=i.length,m=-2*t;for(let e=0;e<s;e++){const n=i[e];if(n&&n.length>=this.minPts){const t=[];for(const i of n)t.push([i[0]+m,i[1]]);i.push(t)}}return this.closed?n.rings=i:n.paths=i,n}}const M=n();export{l as normalizeCentralMeridianSync};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport{objectEqual as t}from\"../snappingUtils.js\";import{SnappingHint as n}from\"./SnappingHint.js\";class s extends n{constructor(t){super(),this.point=t}equals(n){return n instanceof s&&t(this.point,n.point)}}export{s as PointSnappingHint};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport{indexOf as t,PositionHint as i}from\"../../arrayUtils.js\";import{assumeNonNull as n}from\"../../maybe.js\";import e from\"../../PooledArray.js\";import{q as s}from\"../../../chunks/quickselect.js\";class h{constructor(t=9,i){this.compareMinX=l,this.compareMinY=c,this.toBBox=function(t){return t},this._maxEntries=Math.max(4,t||9),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),i&&(\"function\"==typeof i?this.toBBox=i:this._initFormat(i)),this.clear()}destroy(){this.clear(),M.prune(),X.prune(),Y.prune(),B.prune()}all(t){this._all(this.data,t)}search(t,i){let n=this.data;const e=this.toBBox;if(p(t,n))for(M.clear();n;){for(let s=0,h=n.children.length;s<h;s++){const h=n.children[s],a=n.leaf?e(h):h;p(t,a)&&(n.leaf?i(h):x(t,a)?this._all(h,i):M.push(h))}n=M.pop()}}collides(t){let i=this.data;const n=this.toBBox;if(!p(t,i))return!1;for(M.clear();i;){for(let e=0,s=i.children.length;e<s;e++){const s=i.children[e],h=i.leaf?n(s):s;if(p(t,h)){if(i.leaf||x(t,h))return!0;M.push(s)}}i=M.pop()}return!1}load(t){if(!t.length)return this;if(t.length<this._minEntries){for(let i=0,n=t.length;i<n;i++)this.insert(t[i]);return this}let i=this._build(t.slice(0,t.length),0,t.length-1,0);if(this.data.children.length)if(this.data.height===i.height)this._splitRoot(this.data,i);else{if(this.data.height<i.height){const t=this.data;this.data=i,i=t}this._insert(i,this.data.height-i.height-1,!0)}else this.data=i;return this}insert(t){return t&&this._insert(t,this.data.height-1),this}clear(){return this.data=new b([]),this}remove(i){if(!i)return this;let e,s=this.data,h=null,a=0,r=!1;const o=this.toBBox(i);for(Y.clear(),B.clear();s||Y.length>0;){var l;if(!s)s=n(Y.pop()),h=Y.data[Y.length-1],a=null!=(l=B.pop())?l:0,r=!0;if(s.leaf&&(e=t(s.children,i,s.children.length,s.indexHint),-1!==e))return s.children.splice(e,1),Y.push(s),this._condense(Y),this;r||s.leaf||!x(s,o)?h?(a++,s=h.children[a],r=!1):s=null:(Y.push(s),B.push(a),a=0,h=s,s=s.children[0])}return this}toJSON(){return this.data}fromJSON(t){return this.data=t,this}_all(t,i){let n=t;for(X.clear();n;){var e;if(!0===n.leaf)for(const t of n.children)i(t);else X.pushArray(n.children);n=null!=(e=X.pop())?e:null}}_build(t,i,n,e){const s=n-i+1;let h=this._maxEntries;if(s<=h){const e=new b(t.slice(i,n+1));return a(e,this.toBBox),e}e||(e=Math.ceil(Math.log(s)/Math.log(h)),h=Math.ceil(s/h**(e-1)));const r=new j([]);r.height=e;const o=Math.ceil(s/h),l=o*Math.ceil(Math.sqrt(h));g(t,i,n,l,this.compareMinX);for(let a=i;a<=n;a+=l){const i=Math.min(a+l-1,n);g(t,a,i,o,this.compareMinY);for(let n=a;n<=i;n+=o){const s=Math.min(n+o-1,i);r.children.push(this._build(t,n,s,e-1))}}return a(r,this.toBBox),r}_chooseSubtree(t,i,n,e){for(;e.push(i),!0!==i.leaf&&e.length-1!==n;){let n,e=1/0,s=1/0;for(let h=0,a=i.children.length;h<a;h++){const a=i.children[h],r=m(a),o=d(t,a)-r;o<s?(s=o,e=r<e?r:e,n=a):o===s&&r<e&&(e=r,n=a)}i=n||i.children[0]}return i}_insert(t,i,n){const e=this.toBBox,s=n?t:e(t);Y.clear();const h=this._chooseSubtree(s,this.data,i,Y);for(h.children.push(t),o(h,s);i>=0&&Y.data[i].children.length>this._maxEntries;)this._split(Y,i),i--;this._adjustParentBBoxes(s,Y,i)}_split(t,i){const n=t.data[i],e=n.children.length,s=this._minEntries;this._chooseSplitAxis(n,s,e);const h=this._chooseSplitIndex(n,s,e);if(!h)return void console.log(\"  Error: assertion failed at PooledRBush._split: no valid split index\");const r=n.children.splice(h,n.children.length-h),o=n.leaf?new b(r):new j(r);o.height=n.height,a(n,this.toBBox),a(o,this.toBBox),i?t.data[i-1].children.push(o):this._splitRoot(n,o)}_splitRoot(t,i){this.data=new j([t,i]),this.data.height=t.height+1,a(this.data,this.toBBox)}_chooseSplitIndex(t,i,n){let e,s,h;e=s=1/0;for(let a=i;a<=n-i;a++){const i=r(t,0,a,this.toBBox),o=r(t,a,n,this.toBBox),l=f(i,o),c=m(i)+m(o);l<e?(e=l,h=a,s=c<s?c:s):l===e&&c<s&&(s=c,h=a)}return h}_chooseSplitAxis(t,i,n){const e=t.leaf?this.compareMinX:l,s=t.leaf?this.compareMinY:c;this._allDistMargin(t,i,n,e)<this._allDistMargin(t,i,n,s)&&t.children.sort(e)}_allDistMargin(t,i,n,e){t.children.sort(e);const s=this.toBBox,h=r(t,0,i,s),a=r(t,n-i,n,s);let l=u(h)+u(a);for(let r=i;r<n-i;r++){const i=t.children[r];o(h,t.leaf?s(i):i),l+=u(h)}for(let r=n-i-1;r>=i;r--){const i=t.children[r];o(a,t.leaf?s(i):i),l+=u(a)}return l}_adjustParentBBoxes(t,i,n){for(let e=n;e>=0;e--)o(i.data[e],t)}_condense(i){for(let n=i.length-1;n>=0;n--){const e=i.data[n];if(0===e.children.length)if(n>0){const s=i.data[n-1],h=s.children;h.splice(t(h,e,h.length,s.indexHint),1)}else this.clear();else a(e,this.toBBox)}}_initFormat(t){const i=[\"return a\",\" - b\",\";\"];this.compareMinX=new Function(\"a\",\"b\",i.join(t[0])),this.compareMinY=new Function(\"a\",\"b\",i.join(t[1])),this.toBBox=new Function(\"a\",\"return {minX: a\"+t[0]+\", minY: a\"+t[1]+\", maxX: a\"+t[2]+\", maxY: a\"+t[3]+\"};\")}}function a(t,i){r(t,0,t.children.length,i,t)}function r(t,i,n,e,s){s||(s=new b([])),s.minX=1/0,s.minY=1/0,s.maxX=-1/0,s.maxY=-1/0;for(let h,a=i;a<n;a++)h=t.children[a],o(s,t.leaf?e(h):h);return s}function o(t,i){t.minX=Math.min(t.minX,i.minX),t.minY=Math.min(t.minY,i.minY),t.maxX=Math.max(t.maxX,i.maxX),t.maxY=Math.max(t.maxY,i.maxY)}function l(t,i){return t.minX-i.minX}function c(t,i){return t.minY-i.minY}function m(t){return(t.maxX-t.minX)*(t.maxY-t.minY)}function u(t){return t.maxX-t.minX+(t.maxY-t.minY)}function d(t,i){return(Math.max(i.maxX,t.maxX)-Math.min(i.minX,t.minX))*(Math.max(i.maxY,t.maxY)-Math.min(i.minY,t.minY))}function f(t,i){const n=Math.max(t.minX,i.minX),e=Math.max(t.minY,i.minY),s=Math.min(t.maxX,i.maxX),h=Math.min(t.maxY,i.maxY);return Math.max(0,s-n)*Math.max(0,h-e)}function x(t,i){return t.minX<=i.minX&&t.minY<=i.minY&&i.maxX<=t.maxX&&i.maxY<=t.maxY}function p(t,i){return i.minX<=t.maxX&&i.minY<=t.maxY&&i.maxX>=t.minX&&i.maxY>=t.minY}function g(t,i,e,h,a){const r=[i,e];for(;r.length;){const i=n(r.pop()),e=n(r.pop());if(i-e<=h)continue;const o=e+Math.ceil((i-e)/h/2)*h;s(t,o,e,i,a),r.push(e,o,o,i)}}const M=new e,X=new e,Y=new e,B=new e({deallocator:void 0});class _{constructor(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0}}class w extends _{constructor(){super(...arguments),this.height=1,this.indexHint=new i}}class b extends w{constructor(t){super(),this.children=t,this.leaf=!0}}class j extends w{constructor(t){super(),this.children=t,this.leaf=!1}}export{_ as BBox,h as PooledRBush,h as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport e from\"../../../core/Error.js\";import t from\"../../../core/Evented.js\";import r from\"../../../core/Logger.js\";import{isSome as s,isNone as o}from\"../../../core/maybe.js\";import{fromRect as i}from\"../../../geometry/support/aaBoundingBox.js\";import{create as a,NEGATIVE_INFINITY as d}from\"../../../geometry/support/aaBoundingRect.js\";import{getBoundsOptimizedGeometry as n}from\"../featureConversionUtils.js\";import{BoundsStore as h}from\"./BoundsStore.js\";import{optimizedFeatureQueryEngineAdapter as u}from\"./optimizedFeatureQueryEngineAdapter.js\";class m{constructor(e){this.geometryInfo=e,this._boundsStore=new h,this._featuresById=new Map,this._markedIds=new Set,this.events=new t,this.featureAdapter=u}get geometryType(){return this.geometryInfo.geometryType}get hasM(){return this.geometryInfo.hasM}get hasZ(){return this.geometryInfo.hasZ}get numFeatures(){return this._featuresById.size}get fullBounds(){if(!this.numFeatures)return null;const e=a(d);return this._featuresById.forEach((t=>{const r=this._boundsStore.get(t.objectId);r&&(e[0]=Math.min(r[0],e[0]),e[1]=Math.min(r[1],e[1]),e[2]=Math.max(r[2],e[2]),e[3]=Math.max(r[3],e[3]))})),e}get storeStatistics(){let e=0;return this._featuresById.forEach((t=>{s(t.geometry)&&t.geometry.coords&&(e+=t.geometry.coords.length)})),{featureCount:this._featuresById.size,vertexCount:e/(this.hasZ?this.hasM?4:3:this.hasM?3:2)}}add(e){this._add(e),this._emitChanged()}addMany(e){for(const t of e)this._add(t);this._emitChanged()}clear(){this._featuresById.clear(),this._boundsStore.clear(),this._emitChanged()}removeById(e){const t=this._featuresById.get(e);return t?(this._remove(t),this._emitChanged(),t):null}removeManyById(e){this._boundsStore.invalidateIndex();for(const t of e){const e=this._featuresById.get(t);e&&this._remove(e)}this._emitChanged()}forEachBounds(e,t,r){for(const s of e){const e=this._boundsStore.get(s.objectId);e&&t(i(r,e))}}getFeature(e){return this._featuresById.get(e)}has(e){return this._featuresById.has(e)}forEach(e){this._featuresById.forEach((t=>e(t)))}forEachInBounds(e,t){this._boundsStore.forEachInBounds(e,(e=>{t(this._featuresById.get(e))}))}startMarkingUsedFeatures(){this._boundsStore.invalidateIndex(),this._markedIds.clear()}sweep(){let e=!1;this._featuresById.forEach(((t,r)=>{this._markedIds.has(r)||(e=!0,this._remove(t))})),this._markedIds.clear(),e&&this._emitChanged()}_emitChanged(){this.events.emit(\"changed\",void 0)}_add(t){if(!t)return;const i=t.objectId;if(null==i)return void r.getLogger(\"esri.layers.graphics.data.FeatureStore\").error(new e(\"featurestore:invalid-feature\",\"feature id is missing\",{feature:t}));const d=this._featuresById.get(i);let h;if(this._markedIds.add(i),d?(t.displayId=d.displayId,h=this._boundsStore.get(i),this._boundsStore.delete(i)):s(this.onFeatureAdd)&&this.onFeatureAdd(t),o(t.geometry)||!t.geometry.coords||!t.geometry.coords.length)return this._boundsStore.set(i,null),void this._featuresById.set(i,t);h=n(s(h)?h:a(),t.geometry,this.geometryInfo.hasZ,this.geometryInfo.hasM),s(h)&&this._boundsStore.set(i,h),this._featuresById.set(i,t)}_remove(e){return s(this.onFeatureRemove)&&this.onFeatureRemove(e),this._markedIds.delete(e.objectId),this._boundsStore.delete(e.objectId),this._featuresById.delete(e.objectId),e}}export{m as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport{getCentroidOptimizedGeometry as t}from\"../centroid.js\";import e from\"../OptimizedFeature.js\";import r from\"../OptimizedGeometry.js\";const o={getObjectId:t=>t.objectId,getAttributes:t=>t.attributes,getAttribute:(t,e)=>t.attributes[e],cloneWithGeometry:(t,r)=>new e(r,t.attributes,null,t.objectId),getGeometry:t=>t.geometry,getCentroid:(e,o)=>(e.centroid||(e.centroid=t(new r,e.geometry,o.hasZ,o.hasM)),e.centroid)};export{o as default,o as optimizedFeatureQueryEngineAdapter};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport i from\"../../../core/has.js\";import{PooledRBush as s}from\"../../../core/libs/rbush/PooledRBush.js\";const d=5e4,n={minX:0,minY:0,maxX:0,maxY:0};function t(i,s,d){n.minX=s[0],n.minY=s[1],n.maxX=s[2],n.maxY=s[3],i.search(n,d)}class e{constructor(){this._indexInvalid=!1,this._boundsToLoad=[],this._boundsById=new Map,this._idByBounds=new Map,this._index=new s(9,i(\"csp-restrictions\")?i=>({minX:i[0],minY:i[1],maxX:i[2],maxY:i[3]}):[\"[0]\",\"[1]\",\"[2]\",\"[3]\"]),this._loadIndex=()=>{if(this._indexInvalid){const i=new Array(this._idByBounds.size);let s=0;this._idByBounds.forEach(((d,n)=>{i[s++]=n})),this._indexInvalid=!1,this._index.clear(),this._index.load(i)}else this._boundsToLoad.length&&(this._index.load(this._boundsToLoad.filter((i=>this._idByBounds.has(i)))),this._boundsToLoad.length=0)}}clear(){this._indexInvalid=!1,this._boundsToLoad.length=0,this._boundsById.clear(),this._idByBounds.clear(),this._index.clear()}delete(i){const s=this._boundsById.get(i);this._boundsById.delete(i),s&&(this._idByBounds.delete(s),this._indexInvalid||this._index.remove(s))}forEachInBounds(i,s){this._loadIndex(),t(this._index,i,(i=>s(this._idByBounds.get(i))))}get(i){return this._boundsById.get(i)}has(i){return this._boundsById.has(i)}invalidateIndex(){this._indexInvalid||(this._indexInvalid=!0,this._boundsToLoad.length=0)}set(i,s){if(!this._indexInvalid){const s=this._boundsById.get(i);s&&(this._index.remove(s),this._idByBounds.delete(s))}this._boundsById.set(i,s),s&&(this._idByBounds.set(s,i),this._indexInvalid||(this._boundsToLoad.push(s),this._boundsToLoad.length>d&&this._loadIndex()))}}export{e as BoundsStore};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport{PointConstraint as t}from\"../SnappingConstraint.js\";import{FeatureSnappingCandidate as n}from\"./FeatureSnappingCandidate.js\";import{PointSnappingHint as r}from\"../hints/PointSnappingHint.js\";class i extends n{constructor(n){super({...n,constraint:new t(n.coordinateHelper,n.targetPoint)})}get hints(){return[new r(this.targetPoint)]}}export{i as VertexSnappingCandidate};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport{EdgeSnappingCandidate as e}from\"../candidates/EdgeSnappingCandidate.js\";import{VertexSnappingCandidate as t}from\"../candidates/VertexSnappingCandidate.js\";function o(o,r){switch(o.type){case\"edge\":return new e({coordinateHelper:r,edgeStart:r.pointToVector(o.start),edgeEnd:r.pointToVector(o.end),targetPoint:r.pointToVector(o.target),objectId:o.objectId});case\"vertex\":return new t({coordinateHelper:r,targetPoint:r.pointToVector(o.target),objectId:o.objectId})}}export{o as convertSnappingCandidate};\n"],"sourceRoot":""}