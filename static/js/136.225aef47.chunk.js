(this.webpackJsonpimaps=this.webpackJsonpimaps||[]).push([[136],{1060:function(e,t,i){"use strict";i.d(t,"a",(function(){return O}));var s=i(81),n=i(106),a=i(125),r=i(120),l=i(91),o=i(110),c=i(83),d=(i(79),i(84),i(80),i(82)),h=i(968),u=i(750);const b="view",p="view-layers",y="map-layers",g="layer-views",m="layer-list-mode",v=n.a.ofType(h.a);let _=class extends a.a.EventedAccessor{constructor(e){super(e),this._handles=new r.a,this.listItemCreatedFunction=null,this.operationalItems=new v,this.view=null,this._callListItemsCreatedDebounced=Object(l.i)((async()=>this._callListItemsCreated()),300)}initialize(){this._handles.add(Object(o.a)(this,["view","view.ready"],(()=>this._viewHandles())),b)}destroy(){this._handles.destroy(),this._handles=null,this.view=null,this.operationalItems.removeAll()}get state(){const e=this.get("view");return this.get("view.ready")?"ready":e?"loading":"disabled"}triggerAction(e,t){e&&!e.disabled&&this.emit("trigger-action",{action:e,item:t})}moveListItem(e,t,i,s){var n,a;const r=null==e?void 0:e.layer;if(!r)return;const l=null==(n=this.view)||null==(a=n.map)?void 0:a.layers,o=t?Object(u.f)(t):l,c=i?Object(u.f)(i):l;if(!o||!c)return;const{operationalItems:d}=this,h=(null==t?void 0:t.children)||d,b=(null==i?void 0:i.children)||d,p=c.length-s;e.parent=i||null,h.includes(e)&&h.remove(e),o.includes(r)&&o.remove(r),b.includes(e)||b.add(e,p),c.includes(r)||c.add(r,p)}_createLayerViewHandles(e){const{_handles:t}=this;t.remove(g),this._compileList(),e&&t.add(e.on("change",(()=>this._compileList())),g)}_createMapLayerHandles(e){const{_handles:t}=this;t.remove(y),this._compileList(),e&&t.add(e.on("change",(()=>this._compileList())),y)}_watchItemProperties(e){this._handles.add([e.children.on("change",(()=>{this._callListItemCreatedChildren(e.children)}))],`children-change-${e.uid}`)}_callListItemCreatedChildren(e){e.forEach((e=>this._callListItemCreated(e)))}_callListItemCreated(e){if("function"==typeof this.listItemCreatedFunction){const t={item:e};this.listItemCreatedFunction.call(null,t)}this._callListItemCreatedChildren(e.children)}_createListItem(e){const{view:t}=this,i=new h.a({layer:e,view:t});return this._watchItemProperties(i),i}_removeAllItems(){const{_handles:e,operationalItems:t}=this;t.forEach((t=>{e.remove(`children-change-${t.uid}`)})),t.removeAll()}_getViewableLayers(e){if(e)return e.filter((e=>"hide"!==Object(u.c)(e)))}_watchLayersListMode(e){const{_handles:t}=this;t.remove(m),e&&e.forEach((e=>{t.add(Object(o.d)(e,"listMode",(()=>this._compileList())),m)}))}_compileList(){const e=this.get("view.map.layers");this._watchLayersListMode(e);const t=this._getViewableLayers(e);t&&t.length?(this._createNewItems(t),this._removeItems(t),this._sortItems(t),this._beforeCallListItemsCreated()):this._removeAllItems()}async _beforeCallListItemsCreated(){return this._callListItemsCreatedDebounced().catch(l.w)}async _callListItemsCreated(){var e;await(null==(e=this.view)?void 0:e.when()),this.operationalItems.forEach((e=>this._callListItemCreated(e)))}_createNewItems(e){const{operationalItems:t}=this;e.forEach((e=>{t.find((t=>t.layer===e))||t.add(this._createListItem(e))}))}_removeItems(e){const{_handles:t,operationalItems:i}=this,s=[];i.forEach((i=>{i&&e&&e.find((e=>i.layer===e))||(t.remove(`children-change-${i.uid}`),s.push(i))})),i.removeMany(s)}_sortItems(e){const{operationalItems:t}=this;t.sort(((t,i)=>{const s=e.indexOf(t.layer),n=e.indexOf(i.layer);return s>n?-1:s<n?1:0}))}_viewHandles(){const{_handles:e,view:t}=this;e.remove([y,g,p]),this._compileList(),t&&t.ready&&e.add([Object(o.a)(this,"view.map.allLayers",(e=>this._createMapLayerHandles(e))),Object(o.a)(this,"view.allLayerViews",(e=>this._createLayerViewHandles(e))),Object(o.a)(this,"listItemCreatedFunction",(()=>this._compileList()))],p)}};Object(s.a)([Object(c.b)()],_.prototype,"listItemCreatedFunction",void 0),Object(s.a)([Object(c.b)({type:v})],_.prototype,"operationalItems",void 0),Object(s.a)([Object(c.b)({readOnly:!0})],_.prototype,"state",null),Object(s.a)([Object(c.b)()],_.prototype,"view",void 0),_=Object(s.a)([Object(d.a)("esri.widgets.LayerList.LayerListViewModel")],_);var O=_},1147:function(e,t,i){"use strict";i.d(t,"a",(function(){return Te}));var s=i(81),n=i(106),a=i(193),r=i(120),l=i(79),o=i(110),c=i(146),d=i(102),h=(i(80),i(83)),u=i(82),b=i(162),p=i(1060),y=i(968),g=i(750),m=i(296),v=i(177),_=i(339),O=i(129),j=(i(109),i(1125));function f(e,t,i){e.splice(i,0,e.splice(t,1)[0])}const w=n.a.ofType(y.a),I="data-sort-filter",C="data-layer-uid",L="esri-layer-list esri-widget esri-widget--panel",A="esri-layer-list--new-ui",S="esri-layer-list__no-items",k="esri-layer-list__list",E="esri-layer-list__list--root",x="esri-layer-list__list--exclusive",M="esri-layer-list__list--inherited",N="esri-layer-list__list--independent",V="esri-layer-list__item",P="esri-layer-list__item--error",T="esri-layer-list__item--invisible",$="esri-layer-list__item--invisible-at-scale",U="esri-layer-list__item--updating",R="esri-layer-list__item--has-children",F="esri-layer-list__item--selectable",B="esri-layer-list__item-container",H="esri-layer-list__item-actions-menu",z="esri-layer-list__item-actions-menu-item",D="esri-layer-list__item-actions-menu-item--active",W="esri-layer-list__item-actions",K="esri-layer-list__item-actions-list",J="esri-layer-list__item-action",q="esri-layer-list__item-action-icon",G="esri-layer-list__item-action-image",Q="esri-layer-list__item-action-title",X="esri-layer-list__action-toggle",Y="esri-layer-list__action-toggle--on",Z="esri-layer-list__item-label",ee="esri-layer-list__item-error-message",te="esri-layer-list__item-title",ie="esri-layer-list__item-toggle",se="esri-layer-list__item-toggle-icon",ne="esri-layer-list__item-toggle-icon",ae="esri-layer-list__item-radio-icon",re="esri-layer-list__child-toggle",le="esri-layer-list__child-toggle--open",oe="esri-layer-list__child-toggle-icon--opened",ce="esri-layer-list__child-toggle-icon--closed",de="esri-layer-list__child-toggle-icon--closed-rtl",he="esri-layer-list--chosen",ue="esri-disabled",be="esri-disabled-element",pe="esri-hidden",ye="esri-rotating",ge="esri-icon-handle-horizontal",me="esri-icon-visible",ve="esri-icon-non-visible",_e="esri-icon-radio-checked",Oe="esri-icon-radio-unchecked",je="esri-icon-notice-triangle",fe="esri-icon-down-arrow",we="esri-icon-right-triangle-arrow",Ie="esri-icon-left-triangle-arrow",Ce="esri-icon-loading-indicator",Le="esri-icon-default-action",Ae="esri-icon-layers",Se="actions",ke="action-section",Ee="items",xe={exclusive:"exclusive",inherited:"inherited",independent:"independent"};function Me(e){const{actionsOpen:t,children:i}=e;t&&(e.actionsOpen=!1),i.forEach((e=>Me(e)))}const Ne="root",Ve={statusIndicators:!0};let Pe=class extends b.a{constructor(e,t){super(e,t),this._handles=new r.a,this._sortableNodes=new Map,this._sortableMap=new Map,this._focusSortUid=null,this._newUI=Object(l.a)("esri-layerlist-new-ui"),this.visibleItems=null,this.iconClass=Ae,this.label=void 0,this.listItemCreatedFunction=null,this.messages=null,this.messagesCommon=null,this.multipleSelectionEnabled=!1,this.operationalItems=null,this.selectionEnabled=!1,this.selectedItems=new w,this.view=null,this.viewModel=new p.a,this.visibleElements={...Ve},this._onSortableSort=({to:e,from:t,item:i,newIndex:s})=>{t&&e&&(t===e?this._sortLayers(this._sortableMap.get(t.dataset.group)):this._moveLayerFromChildList({to:e,from:t,item:i,newIndex:s}))},this._sortableCanPut=(e,t,i)=>{var s,n;const a=e.el.dataset.group,r=t.el.dataset.group,l=e.el["data-item"],o=i["data-item"],c=null==o||null==(s=o.layer)?void 0:s.type,d=null==l||null==(n=l.layer)?void 0:n.type;return a&&r&&c&&!("group"===d&&"group"===c)},this._sortableCanPull=(e,t,i)=>{var s;const n=e.el.dataset.group,a=t.el.dataset.group,r=i["data-item"],l=null==r||null==(s=r.layer)?void 0:s.type;return n&&a&&!!l},this._onSortableEnd=({oldIndex:e,from:t,to:i,item:s})=>{t!==i&&t.insertBefore(s,t.children[e])}}initialize(){const e=this.operationalItems;this._setVisibleItems(e),this.own(Object(o.b)(this,"operationalItems","change",(()=>this._itemsChanged(e))),Object(o.a)(this,"selectionEnabled",(()=>this._toggleAllSorting())))}destroy(){this._destroySortables(),this._handles.destroy(),this._handles=null}castVisibleElements(e){return{...Ve,...e}}triggerAction(e,t){this.viewModel.triggerAction(e,t)}render(){var e;const{visibleItems:t,_newUI:i}=this,s=null==(e=this.viewModel)?void 0:e.state,n={[A]:i,[pe]:"loading"===s,[ue]:"disabled"===s};return Object(O.a)("div",{class:this.classes(L,n)},null!=t&&t.length?this.renderItems():this.renderNoItems())}renderNoItems(){return Object(O.a)("div",{class:S},this.messages.noItemsToDisplay)}renderItems(){const{visibleItems:e,selectionEnabled:t,messages:i}=this;return Object(O.a)("ul",{"aria-label":i.widgetLabel,role:t?"listbox":void 0,afterCreate:this._sortNodeCreated,afterUpdate:this._sortNodeCreated,afterRemoved:this._sortNodeRemoved,"data-group":Ne,bind:this,class:this.classes(k,E,N)},null==e?void 0:e.map((e=>this.renderItem(e,null))).toArray())}renderActionsMenuIcon(e,t){const{messagesCommon:i}=this,s={[D]:e.actionsOpen};return Object(O.a)("div",{key:"actions-menu-toggle","data-item":e,bind:this,onclick:this._toggleActionsOpen,onkeydown:this._toggleActionsOpen,class:this.classes(z,s),tabindex:"0",role:"button","aria-controls":t,"aria-label":i.options,title:i.options},Object(O.a)("span",{"aria-hidden":"true",class:ge}))}renderActionsMenu(e,t,i,s){const{panel:n}=e,a=n&&n.visible?this.renderPanelButton(n):null,r=1===i&&this._getSingleActionButton(t),l=r?this.renderAction({item:e,action:r,singleAction:!0}):null,o=!r&&i?this.renderActionsMenuIcon(e,s):null;return o||a||r?Object(O.a)("div",{key:"actions-menu",class:H},a,l,o):null}renderChildList(e,t){var i;const{selectionEnabled:s}=this,{visibilityMode:n,children:a}=e,r=!!e.error,l=!!a.length&&!r,o=!l&&s&&"group"===(null==(i=e.layer)?void 0:i.type),{exclusive:c,inherited:d}=xe,h={[x]:n===c,[M]:n===d,[N]:n!==d&&n!==c};return l||o?Object(O.a)("ul",{bind:this,key:"list-items",id:t,"data-group":e.uid,"data-item":e,afterCreate:this._sortNodeCreated,afterUpdate:this._sortNodeCreated,afterRemoved:this._sortNodeRemoved,class:this.classes(k,h),"aria-expanded":e.open?"true":"false",role:s?"listbox":n===c?"radiogroup":"group",hidden:!e.open&&!o||null},null==a?void 0:a.map((t=>this.renderItem(t,e))).toArray()):null}renderChildrenToggle(e,t){const{messagesCommon:i}=this,{children:s}=e,n=!!e.error,a=!!s.length&&!n,r={[le]:e.open},l=e.open?i.collapse:i.expand;return a?Object(O.a)("span",{onclick:this._toggleChildrenClick,onkeydown:this._toggleChildrenClick,"data-item":e,key:"toggle-children",class:this.classes(re,r),tabindex:"0",role:"button","aria-controls":t,"aria-label":l,title:l},Object(O.a)("span",{"aria-hidden":"true",class:this.classes(ce,we)}),Object(O.a)("span",{"aria-hidden":"true",class:this.classes(oe,fe)}),Object(O.a)("span",{"aria-hidden":"true",class:this.classes(de,Ie)})):null}renderError(e){return e.error?Object(O.a)("div",{key:"esri-layer-list__error",class:ee,role:"alert"},Object(O.a)("span",null,this.messages.layerError)):null}renderItemContent(e,t,i){const{id:s}=this,n=`${s}_${e.uid}`,a=`${n}_actions`,r=`${n}__list`,{panel:l}=e,o=this._filterActions(e.actionsSections),c=this._countActions(o);return[Object(O.a)("div",{key:"list-item-container",class:B},this.renderChildrenToggle(e,r),this.renderLabel(e,t,i),this.renderActionsMenu(e,o,c,a)),this.renderError(e),c?this.renderActionsSections(e,o,a):null,l&&l.open?l.render():null,this.renderChildList(e,r)]}renderItem(e,t){const{_newUI:i,id:s,selectionEnabled:n,selectedItems:a,visibleElements:r}=this,{children:l}=e,o=`${s}_${e.uid}__title`,c=!!e.error,d=!!l.length&&!c,h={[R]:d,[P]:!!c,[U]:e.updating&&!t&&r.statusIndicators,[T]:i&&!e.visible,[$]:!e.visibleAtCurrentScale,[F]:n};if(n){var u;const i={[C]:null==(u=e.layer)?void 0:u.uid,[I]:(!e.sortable).toString()};return Object(O.a)("li",{key:`item-with-selection-${e.uid}`,bind:this,afterCreate:this._focusListItem,afterUpdate:this._focusListItem,class:this.classes(V,h),"aria-labelledby":o,onclick:this._toggleSelection,onkeydown:this._selectionKeydown,"data-item":e,"data-group":t?t.uid:Ne,tabIndex:0,"aria-selected":Object(g.e)(e,a)?"true":"false",role:"option",...i},this.renderItemContent(e,t,o))}return Object(O.a)("li",{key:`item-no-selection-${e.uid}`,bind:this,afterCreate:this._focusListItem,afterUpdate:this._focusListItem,class:this.classes(V,h),"aria-labelledby":o},this.renderItemContent(e,t,o))}renderItemTitle(e,t){const{messages:i}=this,s=e.title||i.untitledLayer,n=e.visibleAtCurrentScale?s:`${s} (${i.layerInvisibleAtScale})`;return Object(O.a)("span",{key:"layer-title-container",id:t,title:n,"aria-label":n,class:te},s)}renderItemToggleIcon(e,t){const{_newUI:i}=this,{exclusive:s}=xe,n=t&&t.visibilityMode,a={[se]:i,[ne]:i&&n!==s,[ae]:i&&n===s,[_e]:n===s&&e.visible,[Oe]:n===s&&!e.visible,[me]:n!==s&&e.visible,[ve]:n!==s&&!e.visible};return Object(O.a)("span",{key:"item-toggle-icon",class:this.classes(a),"aria-hidden":"true"})}renderItemToggle(e,t,i){const{selectionEnabled:s,messages:n}=this,{exclusive:a}=xe,r=t&&t.visibilityMode,l=r===a?"radio":"switch";return Object(O.a)("span",s?{key:"item-toggle-selection-enabled",class:ie,bind:this,onclick:this._toggleVisibility,onkeydown:this._toggleVisibility,"data-item":e,"data-parent-visibility":r,tabIndex:0,title:e.visible?n.hideLayer:n.showLayer,"aria-checked":e.visible?"true":"false",role:l,"aria-labelledby":i}:{key:"item-toggle",class:ie},this.renderItemToggleIcon(e,t))}renderItemError(e){return e.error?Object(O.a)("span",{key:"notice-triangle","aria-hidden":"true",class:je}):null}renderLabel(e,t,i){const{selectionEnabled:s,_newUI:n,messages:a}=this,{inherited:r,exclusive:l}=xe,o=null==t?void 0:t.visibilityMode,c=o===l?"radio":"switch",d=[this.renderItemToggle(e,t,i),this.renderItemTitle(e,i)];n&&d.reverse();const h=Object(O.a)("div",s?{key:`item-label-no-selection-${e.uid}`,class:Z}:{key:`item-label-with-selection-${e.uid}`,class:Z,bind:this,onclick:this._toggleVisibility,onkeydown:this._toggleVisibility,"data-item":e,"data-parent-visibility":o,tabIndex:0,"aria-checked":e.visible?"true":"false",title:e.visible?a.hideLayer:a.showLayer,role:c,"aria-labelledby":i},d);return o===r||e.error?Object(O.a)("div",{key:`item-label-container-${e.uid}`,class:Z},this.renderItemError(e),this.renderItemTitle(e,i)):h}renderPanelButton(e){const{className:t,open:i,title:s,image:n}=e,a=n||t?t:Le,r=this._getIconImageStyles(e),l={[D]:i},o={[G]:!!r["background-image"]};return a&&(o[a]=!!a),Object(O.a)("div",{key:`panel-${e.uid}`,bind:this,"data-panel":e,onclick:this._triggerPanel,onkeydown:this._triggerPanel,class:this.classes(z,l),role:"button",tabindex:"0",title:s,"aria-label":s},Object(O.a)("span",{class:this.classes(o),styles:r}))}renderActionsSections(e,t,i){const s=t.toArray().map(((t,i)=>Object(O.a)("ul",{key:`${e}-action-section-${i}`,class:K},this.renderActionSection(e,t))));return Object(O.a)("div",{role:"group","aria-expanded":e.actionsOpen?"true":"false",key:"actions-section",id:i,class:W,hidden:!e.actionsOpen||null},s)}renderActionSection(e,t){return(t&&t.toArray()).map((t=>this.renderAction({item:e,action:t})))}renderActionIcon(e){const{active:t,className:i}=e,s=this._getIconImageStyles(e),n="button"!==e.type||e.image||i?i:Le,a={[G]:!t&&!!s["background-image"],[Ce]:t,[ye]:t};return n&&!t&&(a[n]=!0),Object(O.a)("span",{key:"action-icon","aria-hidden":"true",class:this.classes(q,a),styles:s})}renderActionTitle(e,t){return t?null:Object(O.a)("span",{key:"action-title",class:Q},e)}renderAction(e){const{item:t,action:i,singleAction:s}=e,{active:n,disabled:a,title:r}=i,l={[z]:s&&"button"===i.type,[J]:n||!s&&"toggle"!==i.type,[X]:!n&&"toggle"===i.type,[Y]:!n&&"toggle"===i.type&&i.value,[be]:a},o=[this.renderActionIcon(i),this.renderActionTitle(r,s)];return s?Object(O.a)("div",{bind:this,"data-item":t,"data-action":i,role:"button",key:`single-action-${i.uid}`,onclick:this._triggerAction,onkeydown:this._triggerAction,classes:l,tabindex:"0",title:r,"aria-label":r},o):Object(O.a)("li",{bind:this,"data-item":t,"data-action":i,key:`action-${i.uid}`,onclick:this._triggerAction,onkeydown:this._triggerAction,classes:l,tabindex:"0",role:"button",title:r,"aria-label":r},o)}_sortNodeRemoved(e){const{_sortableMap:t}=this,i=e.dataset.group,s=t.get(i);s&&s.destroy(),t.delete(i)}_destroySortables(){const{_sortableMap:e,_sortableNodes:t}=this;e.forEach((e=>e&&e.destroy())),e.clear(),t.clear()}_moveLayerFromChildList({to:e,from:t,item:i,newIndex:s}){const n=i["data-item"],a=e["data-item"],r=t["data-item"];this.viewModel.moveListItem(n,r,a,s)}_sortLayers(e){if(!e)return;const t=e.el["data-item"],i=e.toArray();var s,n;t?Object(g.i)(t,i):Object(g.j)(null==(s=this.view)||null==(n=s.map)?void 0:n.layers,i)}_toggleSorting(e,t){const{_sortableMap:i,selectionEnabled:s}=this,n=i.get(t),a=e["data-item"],r=(t===Ne||a.childrenSortable&&Object(g.b)(a))&&s;if(n)n.option("disabled",!r);else if(r){const s=j.a.create(e,{dataIdAttr:C,group:{name:t,pull:this._sortableCanPull,put:this._sortableCanPut},filter:`[${I}="true"]`,fallbackTolerance:4,onSort:this._onSortableSort,onEnd:this._onSortableEnd,disabled:!r,chosenClass:he});i.set(t,s)}}_toggleAllSorting(){this._sortableNodes.forEach(((e,t)=>this._toggleSorting(e,t)))}_sortNodeCreated(e){const t=e.dataset.group;t&&(this._sortableNodes.set(t,e),this._toggleSorting(e,t))}_setVisibleItems(e){this.visibleItems=null==e?void 0:e.filter((e=>this.errorsVisible||!e.error))}_getSingleActionButton(e){return e.reduce((e=>e)).filter((e=>e&&"button"===e.type)).getItemAt(0)}_focusListItem(e){var t;const{_focusSortUid:i}=this;e&&i&&(null==(t=e["data-item"].layer)?void 0:t.uid)===i&&(e.focus(),this._focusSortUid=null)}_watchActionSectionChanges(e,t){const i=ke+t;this._handles.add(e.on("change",this.scheduleRender.bind(this)),i),e.forEach((e=>this._renderOnActionChanges(e,t)))}_renderOnActionChanges(e,t){const i=Se+t;"toggle"!==e.type?"slider"!==e.type?this._handles.add([Object(o.a)(e,["className","image","id","title","visible"],(()=>this.scheduleRender()))],i):this._handles.add([Object(o.a)(e,["className","id","title","visible","value","displayValueEnabled","max","min","step"],(()=>this.scheduleRender()))],i):this._handles.add([Object(o.a)(e,["className","image","id","title","visible","value"],(()=>this.scheduleRender()))],i)}_renderOnItemChanges(e){const t=e.uid,i=Ee+t;this._handles.add([Object(o.a)(e,["actionsOpen","visible","open","updating","title","visibleAtCurrentScale","error","visibilityMode","panel","panel.title","panel.content","panel.className","sortable","childrenSortable"],(()=>this.scheduleRender())),e.actionsSections.on("change",(()=>this.scheduleRender())),e.children.on("change",(()=>this.scheduleRender()))],i),e.children.forEach((e=>this._renderOnItemChanges(e))),e.actionsSections.forEach((e=>this._watchActionSectionChanges(e,t)))}_itemsChanged(e){this._handles.removeAll(),e.forEach((e=>this._renderOnItemChanges(e))),this._setVisibleItems(e),this.scheduleRender()}_filterActions(e){return e.map((e=>e.filter((e=>e.visible))))}_countActions(e){return e.reduce(((e,t)=>e+t.length),0)}_getIconImageStyles(e){const t="esri.widgets.LayerList.ListItemPanel"===e.declaredClass||"esri.support.Action.ActionButton"===e.declaredClass||"esri.support.Action.ActionToggle"===e.declaredClass?e.image:null;return{"background-image":t?`url("${t}")`:null}}_selectionKeydown(e){const t=Object(a.a)(e);if(-1===["ArrowDown","ArrowUp"].indexOf(t))return void this._toggleSelection(e);e.stopPropagation();const i=e.currentTarget,s=i["data-item"],{_sortableMap:n,selectedItems:r}=this,l=i.dataset.group,o=n.get(l);if(!o)return;const c=Object(g.e)(s,r),d=o.toArray(),h=e.target,u=d.indexOf(h.dataset.layerUid);if(-1!==u){if("ArrowDown"===t){const e=u+1;if(e>=d.length)return;var b,p;c?(f(d,u,e),o.sort(d),this._sortLayers(o),this._focusSortUid=null==(b=s.layer)?void 0:b.uid):(this._focusSortUid=null==(p=s.layer)?void 0:p.uid,this.scheduleRender())}if("ArrowUp"===t){const e=u-1;if(e<=-1)return;var y,m;c?(f(d,u,e),o.sort(d),this._sortLayers(o),this._focusSortUid=null==(y=s.layer)?void 0:y.uid):(this._focusSortUid=null==(m=s.layer)?void 0:m.uid,this.scheduleRender())}}}_toggleActionsOpen(e){const t=e.currentTarget["data-item"],{actionsOpen:i}=t,s=!i;s&&this.operationalItems.forEach((e=>Me(e))),t.actionsOpen=s,e.stopPropagation()}_triggerPanel(e){const t=e.currentTarget["data-panel"];t&&(t.open=!t.open),e.stopPropagation()}_triggerAction(e){const t=e.currentTarget,i=t["data-action"],s=t["data-item"];"toggle"===i.type&&(i.value=!i.value),this.triggerAction(i,s),e.stopPropagation()}_toggleVisibility(e){const t=e.currentTarget,i=t.getAttribute("data-parent-visibility"),s=t["data-item"];i===xe.exclusive&&s.visible||(s.visible=!s.visible),e.stopPropagation()}_toggleChildrenClick(e){const t=e.currentTarget["data-item"];t.open=!t.open,e.stopPropagation()}_toggleSelection(e){e.stopPropagation();const{multipleSelectionEnabled:t,selectedItems:i}=this,s=e.currentTarget["data-item"],n=Object(g.e)(s,i),{length:a}=i;if(!t)return!a||n&&1===a?void(n?null==i.remove||i.remove(n):i.add(s)):(i.removeAll(),void i.add(s));n?null==i.remove||i.remove(n):i.add(s)}};Object(s.a)([Object(h.b)()],Pe.prototype,"visibleItems",void 0),Object(s.a)([Object(h.b)()],Pe.prototype,"iconClass",void 0),Object(s.a)([Object(h.b)()],Pe.prototype,"errorsVisible",void 0),Object(s.a)([Object(h.b)({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],Pe.prototype,"label",void 0),Object(s.a)([Object(c.a)("viewModel.listItemCreatedFunction")],Pe.prototype,"listItemCreatedFunction",void 0),Object(s.a)([Object(h.b)(),Object(v.a)("esri/widgets/LayerList/t9n/LayerList")],Pe.prototype,"messages",void 0),Object(s.a)([Object(h.b)(),Object(v.a)("esri/t9n/common")],Pe.prototype,"messagesCommon",void 0),Object(s.a)([Object(h.b)()],Pe.prototype,"multipleSelectionEnabled",void 0),Object(s.a)([Object(c.a)("viewModel.operationalItems")],Pe.prototype,"operationalItems",void 0),Object(s.a)([Object(h.b)()],Pe.prototype,"selectionEnabled",void 0),Object(s.a)([Object(h.b)()],Pe.prototype,"selectedItems",void 0),Object(s.a)([Object(c.a)("viewModel.view")],Pe.prototype,"view",void 0),Object(s.a)([Object(_.a)("trigger-action"),Object(h.b)({type:p.a})],Pe.prototype,"viewModel",void 0),Object(s.a)([Object(h.b)()],Pe.prototype,"visibleElements",void 0),Object(s.a)([Object(d.a)("visibleElements")],Pe.prototype,"castVisibleElements",null),Object(s.a)([Object(c.a)("viewModel.triggerAction")],Pe.prototype,"triggerAction",null),Object(s.a)([Object(m.a)()],Pe.prototype,"_toggleActionsOpen",null),Object(s.a)([Object(m.a)()],Pe.prototype,"_triggerPanel",null),Object(s.a)([Object(m.a)()],Pe.prototype,"_triggerAction",null),Object(s.a)([Object(m.a)()],Pe.prototype,"_toggleVisibility",null),Object(s.a)([Object(m.a)()],Pe.prototype,"_toggleChildrenClick",null),Object(s.a)([Object(m.a)()],Pe.prototype,"_toggleSelection",null),Pe=Object(s.a)([Object(u.a)("esri.widgets.LayerList")],Pe);var Te=Pe},186:function(e,t,i){"use strict";i.d(t,"a",(function(){return d}));var s,n=i(81),a=i(96),r=i(144),l=i(83),o=(i(79),i(84),i(80),i(82));let c=s=class extends(Object(r.a)(a.a)){constructor(e){super(e),this.active=!1,this.className=null,this.disabled=!1,this.id=null,this.indicator=!1,this.title=null,this.type=null,this.visible=!0}clone(){return new s({active:this.active,className:this.className,disabled:this.disabled,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible})}};Object(n.a)([Object(l.b)()],c.prototype,"active",void 0),Object(n.a)([Object(l.b)()],c.prototype,"className",void 0),Object(n.a)([Object(l.b)()],c.prototype,"disabled",void 0),Object(n.a)([Object(l.b)()],c.prototype,"id",void 0),Object(n.a)([Object(l.b)()],c.prototype,"indicator",void 0),Object(n.a)([Object(l.b)()],c.prototype,"title",void 0),Object(n.a)([Object(l.b)()],c.prototype,"type",void 0),Object(n.a)([Object(l.b)()],c.prototype,"visible",void 0),c=s=Object(n.a)([Object(o.a)("esri.support.actions.ActionBase")],c);var d=c},296:function(e,t,i){"use strict";i.d(t,"a",(function(){return n}));var s=i(109);function n(){return function(e,t){if(!e[t])throw new TypeError(`Cannot auto bind undefined function '${t}'`);return{value:a(e[t])}}}function a(e){return function(t,...i){!function(e){const{type:t}=e;return e instanceof KeyboardEvent||"keyup"===t||"keydown"===t||"keypress"===t}(t)?e.call(this,t,...i):Object(s.g)(t.key)&&(t.preventDefault(),t.stopPropagation(),t.target.click())}}},334:function(e,t,i){"use strict";i.d(t,"a",(function(){return c}));var s,n=i(81),a=i(83),r=(i(79),i(84),i(80),i(82)),l=i(186);let o=s=class extends l.a{constructor(e){super(e),this.image=null,this.type="button"}clone(){return new s({active:this.active,className:this.className,disabled:this.disabled,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible,image:this.image})}};Object(n.a)([Object(a.b)()],o.prototype,"image",void 0),o=s=Object(n.a)([Object(r.a)("esri.support.Action.ActionButton")],o);var c=o},358:function(e,t,i){"use strict";i.d(t,"a",(function(){return c}));var s,n=i(81),a=i(83),r=(i(79),i(84),i(80),i(82)),l=i(186);let o=s=class extends l.a{constructor(e){super(e),this.image=null,this.type="toggle",this.value=!1}clone(){return new s({active:this.active,className:this.className,disabled:this.disabled,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible,image:this.image,value:this.value})}};Object(n.a)([Object(a.b)()],o.prototype,"image",void 0),Object(n.a)([Object(a.b)()],o.prototype,"value",void 0),o=s=Object(n.a)([Object(r.a)("esri.support.Action.ActionToggle")],o);var c=o},413:function(e,t,i){"use strict";i.d(t,"a",(function(){return n})),i.d(t,"b",(function(){return s}));i(296),i(177),i(310),i(79),i(80);i(339),i(129),i(109);function s(e){return e&&"function"==typeof e.render}function n(e){return e&&"function"==typeof e.postMixInProperties&&"function"==typeof e.buildRendering&&"function"==typeof e.postCreate&&"function"==typeof e.startup}},750:function(e,t,i){"use strict";i.d(t,"a",(function(){return c})),i.d(t,"b",(function(){return o})),i.d(t,"c",(function(){return a})),i.d(t,"d",(function(){return r})),i.d(t,"e",(function(){return p})),i.d(t,"f",(function(){return b})),i.d(t,"g",(function(){return l})),i.d(t,"h",(function(){return d})),i.d(t,"i",(function(){return u})),i.d(t,"j",(function(){return h}));const s="hide",n="hide-children";function a(e){if(e)return null!=e.listMode?e.listMode:void 0}function r(e){if(!e)return"inherited";const t=e.get("layer.capabilities.exportMap.supportsSublayerVisibility");if("boolean"==typeof t)return t?"independent":"inherited";const i=e.get("capabilities.exportMap.supportsSublayerVisibility");return"boolean"==typeof i?i?"independent":"inherited":null!=e.visibilityMode?e.visibilityMode:"independent"}function l(e){if(e)return e.listMode===n||"wmts"===e.type?void 0:"group"===e.type?"layers":"sublayers"}function o(e){const t=e&&(e.get("layer.layer")||e.layer);if(!t)return!1;const i=t.get("capabilities.exportMap.supportsDynamicLayers");return"boolean"!=typeof i||i}function c(e){return a(e)!==s}function d(e,t){if(!e||isNaN(t))return!1;const i=function(e){if(e)return null!=e.minScale?e.minScale:void 0}(e),s=function(e){if(e)return null!=e.maxScale?e.maxScale:void 0}(e),n=!isNaN(i)&&i>0&&t>i,a=!isNaN(s)&&s>0&&t<s;return n||a}function h(e,t){e&&e.sort(((e,i)=>{const s=t.indexOf(e.uid),n=t.indexOf(i.uid);return s>n?-1:s<n?1:0}))}function u(e,t){const i=null==e?void 0:e.layer;if(!i)return;const s=l(i);s&&h(i.get(s),t)}function b(e){const t=null==e?void 0:e.layer;return t&&"group"===t.type?t.layers:null}function p(e,t){var i;const s=null==(i=e.layer)?void 0:i.uid;return s&&t.find((e=>{var t;return(null==(t=e.layer)?void 0:t.uid)===s}))}},968:function(e,t,i){"use strict";i.d(t,"a",(function(){return U}));var s,n=i(81),a=i(96),r=i(106),l=i(158),o=i(144),c=i(110),d=i(146),h=(i(79),i(102)),u=(i(80),i(83)),b=i(82),p=i(186),y=i(334);i(84);let g=s=class extends p.a{constructor(e){super(e),this.displayValueEnabled=!1,this.max=1,this.min=0,this.step=.1,this.type="slider",this.value=null}clone(){return new s({active:this.active,className:this.className,disabled:this.disabled,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible,displayValueEnabled:this.displayValueEnabled,max:this.max,min:this.min,step:this.step,value:this.value})}};Object(n.a)([Object(u.b)()],g.prototype,"displayValueEnabled",void 0),Object(n.a)([Object(u.b)()],g.prototype,"max",void 0),Object(n.a)([Object(u.b)()],g.prototype,"min",void 0),Object(n.a)([Object(u.b)()],g.prototype,"step",void 0),Object(n.a)([Object(u.b)()],g.prototype,"value",void 0),g=s=Object(n.a)([Object(b.a)("esri.support.Action.ActionSlider")],g);var m=g,v=i(358),_=i(120),O=i(162),j=i(413),f=i(129);const w="esri-layer-list-panel",I="esri-layer-list-panel__content",C="esri-layer-list-panel__content--legend",L="esri-layer-list-panel__content--string",A="esri-layer-list-panel__content--html-element",S="esri-layer-list-panel__content--widget";let k=class extends(Object(o.a)(O.a)){constructor(e,t){super(e,t),this._legend=null,this._handles=new _.a,this.content=null,this.image=null,this.listItem=null,this.open=!1,this.visible=!0}initialize(){this.own([Object(c.a)(this,"content",(e=>this._createLegend(e)))])}destroy(){const{_legend:e}=this;e&&e.destroy(),this._legend=null}get className(){const{image:e}=this,t=this._getFirstWidget();return this._get("className")||!e&&t?t.iconClass:""}set className(e){void 0!==e?this._override("className",e):this._clearOverride("className")}get title(){const e=this._getFirstWidget();return this._get("title")||e?e.label:""}set title(e){void 0!==e?this._override("title",e):this._clearOverride("title")}render(){return Object(f.a)("div",{class:w},this._renderContents())}_renderContent(e){const{_legend:t,listItem:i}=this;return e?"legend"===e?i&&i.view&&i.layer&&t?Object(f.a)("div",{class:this.classes(I,C),key:t},t.render()):null:"string"==typeof e?Object(f.a)("div",{class:this.classes(I,L),key:e,innerHTML:e}):Object(j.b)(e)?Object(f.a)("div",{class:this.classes(I,S),key:e},e.render()):e instanceof HTMLElement?Object(f.a)("div",{class:this.classes(I,A),key:e,bind:e,afterCreate:this._attachToNode}):null:null}_renderContents(){const{content:e}=this;return Array.isArray(e)?e.map((e=>this._renderContent(e))):this._renderContent(e)}_getLegendOptions(e){if(!e)return;const{layer:t,view:i}=e;return t&&i?{view:i,layerInfos:[{layer:t,title:""}]}:void 0}_createLegend(e){this._hasLegend(e)&&!this._legend&&Promise.all([i.e(3),i.e(4),i.e(17),i.e(32),i.e(98)]).then(i.bind(null,1134)).then((({default:e})=>{const{_handles:t,listItem:i}=this,s=new e(this._getLegendOptions(i));this._legend=s,this.notifyChange("className"),this.notifyChange("title");const n=Object(c.a)(this,["listItem.view","listItem.layer"],(()=>this._updateLegend(s)));t.add(n,"legends"),this.scheduleRender()}))}_hasLegend(e){const t="legend";return e===t||!!Array.isArray(e)&&e.some((e=>e===t))}_attachToNode(e){e.appendChild(this)}_updateLegend(e){const{listItem:t}=this;if(!t)return;const{layer:i,view:s}=t;e.view=s,e.layerInfos=[{layer:i,title:null}],this.scheduleRender()}_getWidget(e){return"legend"===e?this._legend:Object(j.b)(e)?e:null}_getFirstWidget(){const{content:e}=this;if(Array.isArray(e)){let t=null;return e.some((e=>{const i=this._getWidget(e);return i&&(t=i),!!i})),t}return this._getWidget(e)}};Object(n.a)([Object(u.b)()],k.prototype,"className",null),Object(n.a)([Object(u.b)()],k.prototype,"content",void 0),Object(n.a)([Object(u.b)()],k.prototype,"image",void 0),Object(n.a)([Object(u.b)()],k.prototype,"listItem",void 0),Object(n.a)([Object(u.b)()],k.prototype,"title",null),Object(n.a)([Object(u.b)()],k.prototype,"open",void 0),Object(n.a)([Object(u.b)()],k.prototype,"visible",void 0),k=Object(n.a)([Object(b.a)("esri.widgets.LayerList.ListItemPanel")],k);var E,x=k,M=i(750);const N=r.a.ofType({key:"type",defaultKeyValue:"button",base:p.a,typeMap:{button:y.a,toggle:v.a,slider:m}}),V=r.a.ofType(N),P="layer",T="child-list-mode";let $=E=class extends(Object(o.a)(Object(l.b)(a.a))){constructor(e){super(e),this.actionsSections=new V,this.actionsOpen=!1,this.children=new(r.a.ofType(E)),this.childrenSortable=!0,this.error=null,this.layer=null,this.layerView=null,this.open=!1,this.panel=null,this.parent=null,this.sortable=!0,this.view=null,this.visible=null}initialize(){this.handles.add([Object(c.a)(this,"layer",(e=>this._watchLayerProperties(e))),Object(c.a)(this,"view",(e=>this._updateChildren(e))),Object(c.a)(this,"panel",(e=>this._setListItemOnPanel(e))),Object(c.a)(this,["layer","view"],(()=>this._getLayerView()))])}destroy(){this.view=null}castPanel(e){return this.get("panel.open")&&!e.hasOwnProperty("open")&&(e.open=!0),e?new x(e):null}get title(){const e=this.get("layer.layer");return(!e||e&&this.get("layer.layer.loaded"))&&this.get("layer.title")||this.get("layer.attributes.title")||""}set title(e){void 0!==e?this._override("title",e):this._clearOverride("title")}get updating(){const e=this.layerView;return e?e.updating:this._isLayerUpdating(this.layer)}get visibleAtCurrentScale(){return!Object(M.h)(this.layer,this.get("view.scale"))}get visibilityMode(){return Object(M.d)(this.layer)}clone(){return new E({actionsSections:this.actionsSections.clone(),actionsOpen:this.actionsOpen,children:this.children.clone(),layer:this.layer,open:this.open,panel:this.panel,title:this.title,view:this.view,visible:this.visible})}_setListItemOnPanel(e){e&&(e.listItem=this)}_updateChildren(e){const t=this.children;t&&t.forEach((t=>t.view=e))}_addChildren(e){if(this.handles.remove(T),this.children.removeAll(),!e)return;e.forEach((t=>{this.handles.add(Object(c.d)(t,"listMode",(()=>this._addChildren(e))),T)}));const t=e.filter((e=>"hide"!==Object(M.c)(e)));this.children.addMany(this._makeChildren(t))}_watchSublayerChanges(e){e&&this.handles.add(e.on("change",(()=>{this._addChildren(e)})),P)}_initializeChildLayers(e){this._addChildren(e),this._watchSublayerChanges(e)}_makeChildren(e){return e.map((e=>Object(M.a)(e)?new E({layer:e,parent:this,view:this.view}):null)).reverse()}_watchLayerProperties(e){if(!this.handles)return;if(this.handles.remove(P),this.handles.remove(T),!e)return;if(this.handles.add(Object(c.d)(e,"listMode",(()=>this._watchLayerProperties(e))),P),"hide-children"===Object(M.c)(e))return void this.children.removeAll();const t=Object(M.g)(e);t&&this.handles.add(Object(c.a)(e,t,(()=>{e.hasOwnProperty(t)&&this._initializeChildLayers(e[t])})),P)}async _getLayerView(){const{layer:e,view:t}=this;if(e&&t)try{const i=await t.whenLayerView(e);if(i.layer!==this.layer)return;this._set("layerView",i)}catch{}}_isLayerUpdating(e){return e&&"loading"===e.loadStatus}};Object(n.a)([Object(u.b)({type:V})],$.prototype,"actionsSections",void 0),Object(n.a)([Object(u.b)()],$.prototype,"actionsOpen",void 0),Object(n.a)([Object(u.b)({type:r.a})],$.prototype,"children",void 0),Object(n.a)([Object(u.b)()],$.prototype,"childrenSortable",void 0),Object(n.a)([Object(d.a)("layer.loadError?")],$.prototype,"error",void 0),Object(n.a)([Object(u.b)()],$.prototype,"layer",void 0),Object(n.a)([Object(u.b)({readOnly:!0})],$.prototype,"layerView",void 0),Object(n.a)([Object(u.b)()],$.prototype,"open",void 0),Object(n.a)([Object(u.b)({type:x})],$.prototype,"panel",void 0),Object(n.a)([Object(h.a)("panel")],$.prototype,"castPanel",null),Object(n.a)([Object(u.b)()],$.prototype,"parent",void 0),Object(n.a)([Object(u.b)()],$.prototype,"sortable",void 0),Object(n.a)([Object(u.b)()],$.prototype,"title",null),Object(n.a)([Object(u.b)({readOnly:!0})],$.prototype,"updating",null),Object(n.a)([Object(u.b)({value:null})],$.prototype,"view",void 0),Object(n.a)([Object(d.a)("layer.visible")],$.prototype,"visible",void 0),Object(n.a)([Object(u.b)({readOnly:!0})],$.prototype,"visibleAtCurrentScale",null),Object(n.a)([Object(u.b)({readOnly:!0})],$.prototype,"visibilityMode",null),$=E=Object(n.a)([Object(b.a)("esri.widgets.LayerList.ListItem")],$);var U=$}}]);
//# sourceMappingURL=136.225aef47.chunk.js.map