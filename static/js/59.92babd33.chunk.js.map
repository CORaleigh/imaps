{"version":3,"sources":["../node_modules/@arcgis/core/widgets/AreaMeasurement2D/AreaMeasurement2DTool.js","../node_modules/@arcgis/core/widgets/AreaMeasurement2D/AreaMeasurement2DViewModel.js","../node_modules/@arcgis/core/widgets/AreaMeasurement2D.js","../node_modules/@arcgis/core/renderers/support/clickToleranceUtils.js","../node_modules/@arcgis/core/views/support/drapedUtils.js","../node_modules/@arcgis/core/views/interactive/GraphicManipulator.js","../node_modules/@arcgis/core/layers/GroupLayer.js","../node_modules/@arcgis/core/widgets/support/InteractiveToolViewModel.js"],"names":["N","J","arguments","_drawActive","_handles","y","_graphicsLayer","U","_manipulatorLayer","_groupLayer","E","layers","listMode","visible","_vertices","deferCreation","geodesicDistanceThreshold","measurement","measurementLabel","c","then","e","messages","this","add","n","a","detach","_draw","destroy","_set","reset","length","_startSketch","view","B","map","focus","_","_updateGraphics","X","v","w","create","remove","removeAll","_updateSketch","type","_updateCursor","mode","on","vertices","_stopSketch","manipulators","forEach","manipulator","interactive","complete","spatialReference","t","pop","manipulatorId","l","r","s","o","i","p","style","color","handleColor","size","handleWidth","outline","width","d","geometry","symbol","H","layer","graphic","focusedSymbol","K","x","palette","z","next","P","F","coord","push","findById","id","cursor","paths","isGeographic","q","A","g","WGS84","isWebMercator","R","D","fillGeometry","outlineGeometry","m","rings","h","M","W","C","T","I","area","perimeter","Q","S","L","f","j","Z","k","G","Y","unit","fillColor","pathColor","pathWidth","centroid","u","font","family","haloColor","haloSize","text","addMany","O","isWGS84","prototype","value","Number","readOnly","constructOnly","$","getLogger","supportedViewType","tool","isDisabled","b","active","_validateUnit","defaultUnit","_override","_clearOverride","_validateUnits","createTool","removeTool","toolConstructor","constructorArguments","error","unitOptions","indexOf","filter","slice","aliasOf","String","buttonDisabled","widgetIcon","base","container","hint","hintText","panelError","measurementItem","measurementItemDisabled","measurementItemTitle","measurementItemValue","settings","units","unitsLabel","unitsSelect","unitsSelectWrapper","actionSection","newMeasurementButton","iconClass","label","messagesUnits","viewModel","isSupported","state","key","class","unsupported","classes","for","onchange","_changeUnit","bind","systems","pluralCapitalized","disabled","onclick","_newMeasurement","title","newMeasurement","start","target","options","selectedIndex","source","overridable","xoffset","Math","max","abs","yoffset","stops","maxSize","minSize","floor","renderer","event","pointerType","visualVariables","uniqueValueInfos","classBreakInfos","resolution","overlayPixelSizeInMapUnits","basemapSpatialReference","equals","xmin","min","ymin","xmax","ymax","toMap","intersects","selectable","grabbable","dragging","events","EventEmitter","_circleCollisionCache","_graphicSymbolChangedHandle","_originalSymbol","attachSymbolChanged","elevationInfo","offset","_get","_updateGraphicSymbol","emit","action","detachSymbolChanged","_resetGraphicSymbol","_intersectDistance2D","_intersectDistance3D","watch","_focused","originalPoint","clone","mapPoint","radiusPx","toScreen","include","renderSpatialReference","camera","eye","nonNullable","_visibilityHandles","fullExtent","operationalLayerType","_visibilityWatcher","_enforceVisibility","visibilityMode","_visibleWatcher","webmap","getLayerJSONFromResourceInfo","layerType","addResolvingPromise","loadFromPortal","supportedTypes","Promise","resolve","_turnOffOtherLayers","uid","initialized","find","getItemAt","_isAnyLayerVisible","some","json","read","write","ignoreOrigin","origins","_baseHandles","_loggedUnsupportedErrorOnce","_creationAbortController","ready","logUnsupportedError","tools","removed","destroyed","abort","reject","createToolParams","AbortController","signal","Boolean"],"mappings":"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","file":"static/js/59.92babd33.chunk.js","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../chunks/tslib.es6.js\";import\"../../core/has.js\";import\"../../core/Logger.js\";import\"../../core/accessorSupport/ensureType.js\";import{property as t}from\"../../core/accessorSupport/decorators/property.js\";import{subclass as r}from\"../../core/accessorSupport/decorators/subclass.js\";import\"../../core/urlUtils.js\";import\"../../core/uuid.js\";import\"../../portal/support/resourceExtension.js\";import s from\"../../geometry/SpatialReference.js\";import i from\"../../geometry/Point.js\";import o from\"../../geometry/Polygon.js\";import a from\"../../geometry/Polyline.js\";import\"../../geometry.js\";import{onLocaleChange as n}from\"../../intl/locale.js\";import l from\"../../symbols/SimpleLineSymbol.js\";import m from\"../../symbols/Font.js\";import{fetchMessageBundle as c}from\"../../intl/messages.js\";import\"../../intl.js\";import h from\"../../symbols/SimpleFillSymbol.js\";import p from\"../../symbols/SimpleMarkerSymbol.js\";import u from\"../../symbols/TextSymbol.js\";import\"../../symbols.js\";import d from\"../../Graphic.js\";import y from\"../../core/Handles.js\";import{convertUnit as f}from\"../../core/unitUtils.js\";import{init as _}from\"../../core/watchUtils.js\";import{isLoaded as v,load as w,project as g,isSupported as b}from\"../../geometry/projection.js\";import{formatDecimal as j,formatImperialArea as L,formatMetricArea as S,formatImperialLength as G,formatMetricLength as k}from\"../../core/unitFormatUtils.js\";import{isSupported as q,geodesicDensify as A,geodesicLengths as x,geodesicAreas as W}from\"../../geometry/support/geodesicUtils.js\";import{geodesicDensify as R,planarLength as D,simplify as M,geodesicLength as C,geodesicArea as T,planarArea as I}from\"../../geometry/geometryEngine.js\";import U from\"../../layers/GraphicsLayer.js\";import E from\"../../layers/GroupLayer.js\";import{createManipulatorDragEventPipeline as z,screenToMap as P,dragGraphic as F}from\"../../views/interactive/dragEventPipeline.js\";import{InteractiveToolBase as O}from\"../../views/interactive/InteractiveToolBase.js\";import B from\"../../views/draw/Draw.js\";import{GraphicManipulator as H}from\"../../views/interactive/GraphicManipulator.js\";const N=1e5;let J=class extends O{constructor(){super(...arguments),this._drawActive=!1,this._handles=new y,this._graphicsLayer=new U,this._manipulatorLayer=new U,this._groupLayer=new E({layers:[this._graphicsLayer,this._manipulatorLayer],listMode:\"hide\",visible:!1}),this._vertices=[],this.deferCreation=!0,this.geodesicDistanceThreshold=1e5,this.measurement=null,this.measurementLabel=null}initialize(){c(\"esri/core/t9n/Units\").then((e=>{this.messages=e})),this._handles.add(n((async()=>{this.messages=await c(\"esri/core/t9n/Units\")})))}destroy(){this.detach(),this._draw&&(this._draw.destroy(),this._draw=null),this._handles&&(this._handles.destroy(),this._handles=null),this._graphicsLayer&&(this._graphicsLayer.destroy(),this._graphicsLayer=null),this._manipulatorLayer&&(this._manipulatorLayer.destroy(),this._manipulatorLayer=null)}set editable(e){this._set(\"editable\",e),e||this._draw.reset()}activate(){this._drawActive||0!==this._vertices.length||this._startSketch()}onAttach(){const e=this.view;this._draw=new B({view:e}),e.map.add(this._groupLayer),e.focus(),this._handles.add([_(this,[\"unit\",\"geodesicDistanceThreshold\",\"palette\",\"messages\"],(()=>{this._vertices.length>0&&this._updateGraphics()})),_(this,\"view.spatialReference\",(e=>{X(e)&&!v()&&w()}))]),this.create()}onDetach(){const{map:e}=this.view;this._draw.view=null,this._draw.destroy(),this._draw=null,e.remove(this._groupLayer),this._handles.removeAll(),this._graphicsLayer.removeAll(),this._manipulatorLayer.removeAll(),this._set(\"measurement\",null),this._set(\"measurementLabel\",null)}onShow(){this._groupLayer.visible=!0}onHide(){this._groupLayer.visible=!1}reset(){this._vertices=[],this._graphicsLayer.removeAll(),this._set(\"measurement\",null),this._set(\"measurementLabel\",null),this._draw.reset(),this._drawActive=!1,this._updateSketch([])}onInputEvent(e){\"pointer-move\"===e.type&&this._updateCursor()}_startSketch(){this._drawActive=!0;const e=this._draw.create(\"polyline\",{mode:\"click\"});e.on([\"vertex-add\",\"vertex-update\",\"vertex-remove\",\"cursor-update\",\"undo\",\"redo\"],(e=>this._updateSketch(e.vertices))),e.on(\"draw-complete\",(()=>this._stopSketch()))}_stopSketch(){if(this._vertices.length<3)return this.reset(),void this._startSketch();this.manipulators.forEach((e=>{e.manipulator.interactive=!0})),this._drawActive=!1,this.complete()}_updateSketch(e){if(X(this.view.spatialReference)&&!v())return;if(e.length<2)return this._vertices=[],this.manipulators.removeAll(),void this._graphicsLayer.removeAll();this.create();const t=this.view.spatialReference;for(;this._vertices.length>e.length;){const{manipulatorId:e}=this._vertices.pop();this.manipulators.remove(e)}for(let l=this._vertices.length;l<e.length;l++){const[r,s]=e[l],o=K(new i({x:r,y:s,spatialReference:t}),this.view,this._manipulatorLayer,this.palette),a=this.manipulators.add(o);z(o,((e,t)=>{t.next(P(this.view)).next(F(e.graphic)).next((()=>{const t=e.graphic.geometry;this._vertices[l].coord=[t.x,t.y],this._updateGraphics()}))})),this._vertices.push({manipulatorId:a,coord:[r,s]})}const r=this._vertices.length-1,s=this._vertices[r],[o,a]=e[r];if(s.coord[0]!==o||s.coord[1]!==a){s.coord=[o,a];const e=new i({x:o,y:a,spatialReference:t});this.manipulators.findById(s.manipulatorId).graphic.geometry=e}const n=this._drawActive?this._vertices[r].manipulatorId:null;this.manipulators.forEach((e=>{e.manipulator.interactive=null==n||e.id!==n})),this._updateGraphics()}_updateCursor(){this.cursor=this._drawActive?\"crosshair\":null}_updateGraphics(){this._graphicsLayer.removeAll();const e=Q(this._vertices.map((e=>e.coord)),this.view.spatialReference,this.geodesicDistanceThreshold);if(!e)return;const{measurement:t,fillGeometry:r,outlineGeometry:s}=e;this._set(\"measurement\",t);const i=t?Y(this.messages,t,this.unit):null;if(this._set(\"measurementLabel\",i),!r&&!s)return;const{fillColor:o,pathColor:a,pathWidth:n}=this.palette,c=[];r&&c.push(new d({geometry:r,symbol:new h({color:o,outline:new l({width:0})})})),s&&c.push(new d({geometry:s,symbol:new l({color:a,width:n})})),r&&i&&c.push(new d({geometry:r.centroid,symbol:new u({color:[255,255,255,1],font:new m({size:14,family:\"sans-serif\"}),haloColor:[0,0,0,.5],haloSize:2,text:i.area})})),this._graphicsLayer.addMany(c)}};function K(e,t,r,s){const i=new p({style:\"circle\",color:s.handleColor,size:s.handleWidth,outline:{type:\"simple-line\",width:0}}),o=new p({style:\"circle\",color:s.handleColor,size:1.5*s.handleWidth,outline:{type:\"simple-line\",width:0}}),a=new d({geometry:e,symbol:i});return new H({view:t,layer:r,graphic:a,focusedSymbol:o})}function Q(e,t,r){if(2===e.length){const i=new a({paths:e,spatialReference:t});let o;if(t.isGeographic)if(q(t))o=A(i,N);else{const e=g(i,s.WGS84),r=A(e,N);o=g(r,t)}else if(t.isWebMercator)o=R(i,N,\"meters\");else{if(D(i,\"meters\")>=r){const e=g(i,s.WGS84),r=A(e,N);o=g(r,t)}else o=i}return{measurement:null,fillGeometry:null,outlineGeometry:o}}e.push(e[0]);const i=new a({paths:[e],spatialReference:t}),n=new o({rings:[e],spatialReference:t});let l,m,c=null,h=null;if(t.isGeographic)if(q(t)){if(c=A(i,N),h=A(n,N),h=M(h),!h)return null;l=x([i],\"meters\")[0],m=W([h],\"square-meters\")[0]}else{const e=s.WGS84,r=g(i,e),o=g(n,e);if(c=A(r,N),h=A(o,N),h=M(h),!h)return null;l=x([r],\"meters\")[0],m=W([h],\"square-meters\")[0],c=g(c,t),h=g(h,t)}else if(t.isWebMercator){if(c=R(i,N,\"meters\"),h=R(n,N,\"meters\"),h=M(h),!h)return null;l=C(i,\"meters\"),m=T(h,\"square-meters\")}else{const e=D(i,\"meters\");if(e>=r){const e=s.WGS84,r=g(i,e),o=g(n,e);if(c=A(r,N),h=A(o,N),h=M(h),!h)return null;l=x([r],\"meters\")[0],m=W([h],\"square-meters\")[0],c=g(c,t),h=g(h,t)}else{if(c=i,h=M(n),!h)return null;l=e,m=I(h,\"square-meters\")}}return{measurement:{geometry:h,area:m,perimeter:l},fillGeometry:h,outlineGeometry:c}}function V(e){return null!=e&&(!X(e)||b())}function X(e){if(!e)return!1;const{isGeographic:t,isWebMercator:r,isWGS84:s}=e;return t&&!s&&!q(e)||!t&&!r}function Y(e,t,r){if(!t||!e)return null;const s={area:null,perimeter:null},{area:i,perimeter:o}=t;switch(r){case\"metric\":s.area=S(e,i,\"square-meters\");break;case\"imperial\":s.area=L(e,i,\"square-meters\");break;default:{const t=f(i,\"square-meters\",r);s.area=j(e,t,r);break}}const a=Z(r);if(a)switch(a){case\"metric\":s.perimeter=k(e,o,\"meters\");break;case\"imperial\":s.perimeter=G(e,o,\"meters\");break;default:{const t=f(o,\"meters\",a);s.perimeter=j(e,t,a);break}}else s.perimeter=\"\";return s}function Z(e){switch(e){case\"metric\":return\"metric\";case\"imperial\":return\"imperial\";case\"square-inches\":return\"inches\";case\"square-feet\":return\"feet\";case\"square-yards\":return\"yards\";case\"square-miles\":return\"miles\";case\"square-us-feet\":return\"us-feet\";case\"square-meters\":return\"meters\";case\"square-kilometers\":return\"kilometers\";case\"acres\":return\"imperial\";case\"ares\":case\"hectares\":return\"metric\";case\"square-millimeters\":return\"millimeters\";case\"square-centimeters\":return\"centimeters\";case\"square-decimeters\":return\"decimeters\";default:return null}}e([t()],J.prototype,\"cursor\",void 0),e([t({value:!0})],J.prototype,\"editable\",null),e([t({type:Number})],J.prototype,\"geodesicDistanceThreshold\",void 0),e([t({readOnly:!0})],J.prototype,\"measurement\",void 0),e([t({readOnly:!0})],J.prototype,\"measurementLabel\",void 0),e([t()],J.prototype,\"messages\",void 0),e([t()],J.prototype,\"palette\",void 0),e([t()],J.prototype,\"unit\",void 0),e([t({constructOnly:!0})],J.prototype,\"view\",void 0),J=e([r(\"esri.widgets.AreaMeasurement2D.AreaMeasurement2DTool\")],J);var $=J;export default $;export{Q as createAreaMeasurementInfo2D,Y as createAreaMeasurementLabel,V as isSupported};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{_ as t}from\"../../chunks/tslib.es6.js\";import\"../../core/has.js\";import e from\"../../core/Logger.js\";import\"../../core/accessorSupport/ensureType.js\";import{property as r}from\"../../core/accessorSupport/decorators/property.js\";import{subclass as o}from\"../../core/accessorSupport/decorators/subclass.js\";import\"../../core/urlUtils.js\";import\"../../core/uuid.js\";import\"../../portal/support/resourceExtension.js\";import i from\"../../core/Handles.js\";import{measurementAreaUnits as s}from\"../../core/unitUtils.js\";import{init as n}from\"../../core/watchUtils.js\";import a,{isSupported as l}from\"./AreaMeasurement2DTool.js\";import{defaultUnitPropertyMetadata as p}from\"../support/commonProperties.js\";import{InteractiveToolViewModel as d}from\"../support/InteractiveToolViewModel.js\";const u={handleWidth:8,handleColor:[255,128,0,.5],pathWidth:2,pathColor:[255,128,0,1],fillColor:[255,128,0,.3]},h=e.getLogger(\"esri.widgets.AreaMeasurement2D.AreaMeasurement2DViewModel\");let m=class extends d{constructor(t){super(t),this.supportedViewType=\"2d\",this._handles=new i,this.geodesicDistanceThreshold=1e5,this.measurement=null,this.measurementLabel=null,this.palette=u,this.tool=null}initialize(){this._handles.add([n(this,[\"unit\",\"palette\",\"geodesicDistanceThreshold\"],((t,e,r)=>{this.tool&&(this.tool[r]=t)}))])}destroy(){this._handles&&(this._handles.destroy(),this._handles=null)}get state(){var t;return this.isDisabled?\"disabled\":l(null==(t=this.view)?void 0:t.spatialReference)?this.tool&&this.tool.measurement?this.tool.active?\"measuring\":\"measured\":\"ready\":\"disabled\"}get unit(){return this._validateUnit(this.defaultUnit)}set unit(t){void 0!==t?this._override(\"unit\",this._validateUnit(t)):this._clearOverride(\"unit\")}get unitOptions(){return s}set unitOptions(t){void 0!==t?this._override(\"unitOptions\",this._validateUnits(t)):this._clearOverride(\"unitOptions\")}start(){return this.createTool()}clear(){this.removeTool()}createToolParams(){return{toolConstructor:a,constructorArguments:()=>({geodesicDistanceThreshold:this.geodesicDistanceThreshold,palette:this.palette,unit:this.unit})}}logUnsupportedError(){h.error(\"AreaMeasurement2D widget is not implemented for SceneView\")}logError(...t){h.error(...t)}_validateUnit(t){return-1!==this.unitOptions.indexOf(t)?t:-1!==this.unitOptions.indexOf(this.defaultUnit)?this.defaultUnit:this.unitOptions[0]}_validateUnits(t=[]){const e=t.filter((t=>-1!==s.indexOf(t)));return 0===e.length?s.slice():e}};t([r(p)],m.prototype,\"defaultUnit\",void 0),t([r({type:Number})],m.prototype,\"geodesicDistanceThreshold\",void 0),t([r({readOnly:!0,aliasOf:\"tool.measurement\"})],m.prototype,\"measurement\",void 0),t([r({readOnly:!0,aliasOf:\"tool.measurementLabel\"})],m.prototype,\"measurementLabel\",void 0),t([r()],m.prototype,\"palette\",void 0),t([r({readOnly:!0})],m.prototype,\"state\",null),t([r({constructOnly:!0,readOnly:!0})],m.prototype,\"tool\",void 0),t([r({type:String})],m.prototype,\"unit\",null),t([r({type:[String]})],m.prototype,\"unitOptions\",null),m=t([o(\"esri.widgets.AreaMeasurement2D.AreaMeasurement2DViewModel\")],m);var c=m;export default c;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../chunks/tslib.es6.js\";import\"../core/has.js\";import\"../core/Logger.js\";import\"../core/accessorSupport/ensureType.js\";import{property as t}from\"../core/accessorSupport/decorators/property.js\";import{aliasOf as s}from\"../core/accessorSupport/decorators/aliasOf.js\";import{subclass as i}from\"../core/accessorSupport/decorators/subclass.js\";import\"../core/urlUtils.js\";import\"../core/uuid.js\";import\"../portal/support/resourceExtension.js\";import{ignoreAbortErrors as r}from\"../core/promiseUtils.js\";import{isMeasurementSystem as n}from\"../core/unitUtils.js\";import\"./support/widgetUtils.js\";import{accessibleHandler as a}from\"./support/decorators/accessibleHandler.js\";import{messageBundle as o}from\"./support/decorators/messageBundle.js\";import{j as l}from\"../chunks/index.js\";import u from\"./Widget.js\";import m from\"./AreaMeasurement2D/AreaMeasurement2DViewModel.js\";const p=\"esri-area-measurement-2d\",c={buttonDisabled:\"esri-button--disabled\",widgetIcon:\"esri-icon-measure-area\",base:`${p} esri-widget esri-widget--panel`,container:`${p}__container`,hint:`${p}__hint`,hintText:`${p}__hint-text`,panelError:`${p}__panel--error`,measurement:`${p}__measurement`,measurementItem:`${p}__measurement-item`,measurementItemDisabled:`${p}__measurement-item--disabled`,measurementItemTitle:`${p}__measurement-item-title`,measurementItemValue:`${p}__measurement-item-value`,settings:`${p}__settings`,units:`${p}__units`,unitsLabel:`${p}__units-label`,unitsSelect:`${p}__units-select esri-select`,unitsSelectWrapper:`${p}__units-select-wrapper`,actionSection:`${p}__actions`,newMeasurementButton:`${p}__clear-button esri-button esri-button--primary`};let d=class extends u{constructor(e,t){super(e,t),this.active=null,this.iconClass=c.widgetIcon,this.label=void 0,this.messages=null,this.messagesUnits=null,this.unit=null,this.unitOptions=null,this.view=null,this.viewModel=new m}render(){const{id:e,viewModel:t,visible:s}=this,{active:i,isSupported:r,measurementLabel:a,state:o,unit:u,unitOptions:m}=t,p=\"disabled\"===o,d=\"ready\"===o,v=\"measuring\"===o||\"measured\"===o,{messages:_,messagesUnits:b}=this,h=i&&d?l(\"section\",{key:\"hint\",class:c.hint},l(\"p\",{class:c.hintText},_.hint)):null,w=r?null:l(\"section\",{key:\"unsupported\",class:c.panelError},l(\"p\",null,_.unsupported)),g=(e,t,s)=>t?l(\"div\",{key:`${s}-enabled`,class:c.measurementItem},l(\"span\",{class:c.measurementItemTitle},e),l(\"span\",{class:c.measurementItemValue},t)):l(\"div\",{key:`${s}-disabled`,class:this.classes(c.measurementItem,c.measurementItemDisabled),\"aria-disabled\":\"true\"},l(\"span\",{class:c.measurementItemTitle},e)),y=v?l(\"section\",{key:\"measurement\",class:c.measurement},g(_.area,a.area,\"area\"),g(_.perimeter,a.perimeter,\"perimeter\")):null,M=`${e}__units`,$=l(\"section\",{key:\"units\",class:c.units},l(\"label\",{class:c.unitsLabel,for:M},_.unit),l(\"div\",{class:c.unitsSelectWrapper},l(\"select\",{class:c.unitsSelect,id:M,onchange:this._changeUnit,bind:this,value:u},m.map((e=>{var t;return l(\"option\",{key:e,value:e},n(e)?b.systems[e]:null==(t=b.units[e])?void 0:t.pluralCapitalized)}))))),j=v?l(\"div\",{key:\"settings\",class:c.settings},$):null,f=!r||i&&!v?null:l(\"div\",{class:c.actionSection},l(\"button\",{disabled:p,class:this.classes(c.newMeasurementButton,p&&c.buttonDisabled),bind:this,onclick:this._newMeasurement,title:_.newMeasurement,type:\"button\",\"aria-label\":_.newMeasurement},_.newMeasurement)),I=s?l(\"div\",{class:c.container},w,h,j,y,f):null;return l(\"div\",{class:c.base},I)}_newMeasurement(){r(this.viewModel.start())}_changeUnit(e){const t=e.target,s=t.options[t.selectedIndex];s&&(this.viewModel.unit=s.value)}};e([s(\"viewModel.active\")],d.prototype,\"active\",void 0),e([t()],d.prototype,\"iconClass\",void 0),e([t({aliasOf:{source:\"messages.widgetLabel\",overridable:!0}})],d.prototype,\"label\",void 0),e([t(),o(\"esri/widgets/AreaMeasurement2D/t9n/AreaMeasurement2D\")],d.prototype,\"messages\",void 0),e([t(),o(\"esri/core/t9n/Units\")],d.prototype,\"messagesUnits\",void 0),e([s(\"viewModel.unit\")],d.prototype,\"unit\",void 0),e([s(\"viewModel.unitOptions\")],d.prototype,\"unitOptions\",void 0),e([s(\"viewModel.view\")],d.prototype,\"view\",void 0),e([t({type:m})],d.prototype,\"viewModel\",void 0),e([s(\"viewModel.visible\")],d.prototype,\"visible\",void 0),e([a()],d.prototype,\"_newMeasurement\",null),e([a()],d.prototype,\"_changeUnit\",null),d=e([i(\"esri.widgets.AreaMeasurement2D\")],d);var v=d;export default v;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nfunction t(t,e){return e?\"xoffset\"in e&&e.xoffset?Math.max(t,Math.abs(e.xoffset)):\"yoffset\"in e&&e.yoffset?Math.max(t,Math.abs(e.yoffset||0)):t:t}function e(t){let e=0,n=0;for(let r=0;r<t.length;r++){const s=t[r].size;\"number\"==typeof s&&(e+=s,n++)}return e/n}function n(t,n){return\"number\"==typeof t?t:t&&t.stops&&t.stops.length?e(t.stops):n}function r(t,e){if(!e)return t;const r=e.filter((t=>\"size\"===t.type)).map((e=>{const{maxSize:r,minSize:s}=e;return(n(r,t)+n(s,t))/2}));let s=0;const o=r.length;if(0===o)return t;for(let n=0;n<o;n++)s+=r[n];const f=Math.floor(s/o);return Math.max(f,t)}function s(e){const n=e&&e.renderer,s=\"touch\"===(e&&e.event&&e.event.pointerType)?9:6;if(!n)return s;const o=\"visualVariables\"in n?r(s,n.visualVariables):s;if(\"simple\"===n.type)return t(o,n.symbol);if(\"unique-value\"===n.type){let e=o;return n.uniqueValueInfos.forEach((n=>{e=t(e,n.symbol)})),e}if(\"class-breaks\"===n.type){let e=o;return n.classBreakInfos.forEach((n=>{e=t(e,n.symbol)})),e}return n.type,o}export{s as calculateTolerance};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{isSome as e,isNone as t}from\"../../core/maybe.js\";import r from\"../../geometry/Extent.js\";import\"../../geometry.js\";import{getMetersPerUnitForSR as n}from\"../../core/unitUtils.js\";import{calculateTolerance as i}from\"../../renderers/support/clickToleranceUtils.js\";function a(t,i,a,o=new r){let s;if(\"2d\"===a.type)s=i*a.resolution;else if(\"3d\"===a.type){const r=a.overlayPixelSizeInMapUnits(t),o=a.basemapSpatialReference;s=e(o)&&!o.equals(a.spatialReference)?n(o)/n(a.spatialReference):i*r}const m=t.x-s,p=t.y-s,c=t.x+s,l=t.y+s,{spatialReference:f}=a;return o.xmin=Math.min(m,c),o.ymin=Math.min(p,l),o.xmax=Math.max(m,c),o.ymax=Math.max(p,l),o.spatialReference=f,o}function o(e,r,n){const o=n.toMap(e);if(t(o))return!1;return a(o,i(),n,s).intersects(r)}const s=new r;export{a as createQueryGeometry,o as intersectsDrapedGeometry};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../chunks/tslib.es6.js\";import\"../../core/has.js\";import{get as t,isNone as o,isSome as i}from\"../../core/maybe.js\";import s from\"../../core/Logger.js\";import\"../../core/accessorSupport/ensureType.js\";import{property as r}from\"../../core/accessorSupport/decorators/property.js\";import{subclass as l}from\"../../core/accessorSupport/decorators/subclass.js\";import\"../../core/urlUtils.js\";import\"../../core/uuid.js\";import\"../../portal/support/resourceExtension.js\";import a from\"../../core/Accessor.js\";import n from\"../../core/Evented.js\";import{pt2px as c,screenPointObjectToArray as h,createScreenPointArray as p}from\"../../core/screenUtils.js\";import{c as m}from\"../../chunks/vec3f64.js\";import{k as u}from\"../../chunks/vec3.js\";import{canProjectWithoutEngine as y,project as g,projectPointToVector as d}from\"../../geometry/projection.js\";import b from\"../../symbols/support/ElevationInfo.js\";import{getDefaultSymbol2D as f}from\"../../symbols/support/defaults.js\";import{j as _}from\"../../chunks/vec2.js\";import{getGraphicEffectiveElevationMode as v}from\"../../support/elevationInfoUtils.js\";import{intersectsDrapedGeometry as S}from\"../support/drapedUtils.js\";const j=s.getLogger(\"esri.views.interactive.GraphicManipulator\");let C=class extends a{constructor(e){super(e),this.layer=null,this.interactive=!0,this.selectable=!1,this.grabbable=!0,this.dragging=!1,this.cursor=null,this.events=new n.EventEmitter,this._circleCollisionCache=null,this._graphicSymbolChangedHandle=null,this._originalSymbol=null}set graphic(e){\"mesh\"!==t(e.geometry,\"type\")?(this._circleCollisionCache=null,this._originalSymbol=e.symbol,this._set(\"graphic\",e),this.attachSymbolChanged()):j.error(\"Mesh geometries are not supported\")}get elevationInfo(){const e=\"elevationInfo\"in this.graphic.layer&&this.graphic.layer.elevationInfo,t=v(this.graphic),o=e?e.offset:0;return new b({mode:t,offset:o})}set focusedSymbol(e){e!==this._get(\"focusedSymbol\")&&(this._set(\"focusedSymbol\",e),this._updateGraphicSymbol(),this._circleCollisionCache=null)}grabbableForEvent(){return!0}set grabbing(e){e!==this._get(\"grabbing\")&&(this._set(\"grabbing\",e),this._updateGraphicSymbol())}set hovering(e){e!==this._get(\"hovering\")&&(this._set(\"hovering\",e),this._updateGraphicSymbol())}set selected(e){e!==this._get(\"selected\")&&(this._set(\"selected\",e),this._updateGraphicSymbol(),this.events.emit(\"select-changed\",{action:e?\"select\":\"deselect\"}))}get _focused(){return this._get(\"hovering\")||this._get(\"grabbing\")}destroy(){this.detachSymbolChanged(),this._resetGraphicSymbol(),this._set(\"view\",null)}intersectionDistance(e){const t=this.graphic;if(!1===t.visible)return null;const s=t.geometry;if(o(s))return null;const r=this._get(\"focusedSymbol\"),l=i(r)?r:t.symbol;return\"2d\"===this.view.type?this._intersectDistance2D(this.view,e,s,l):this._intersectDistance3D(this.view,e,t)}attach(){this.attachSymbolChanged(),i(this.layer)&&this.layer.add(this.graphic)}detach(){this.detachSymbolChanged(),this._resetGraphicSymbol(),i(this.layer)&&this.layer.remove(this.graphic)}attachSymbolChanged(){this.detachSymbolChanged(),this._graphicSymbolChangedHandle=this.graphic.watch(\"symbol\",(e=>{i(e)&&e!==this.focusedSymbol&&e!==this._originalSymbol&&(this._originalSymbol=e,this._focused&&i(this.focusedSymbol)&&(this.graphic.symbol=this.focusedSymbol))}),!0)}detachSymbolChanged(){i(this._graphicSymbolChangedHandle)&&(this._graphicSymbolChangedHandle.remove(),this._graphicSymbolChangedHandle=null)}_updateGraphicSymbol(){this.graphic.symbol=this._focused&&i(this.focusedSymbol)?this.focusedSymbol:this._originalSymbol}_resetGraphicSymbol(){this.graphic.symbol=this._originalSymbol}_intersectDistance2D(e,t,s,r){if(r=r||f(s),o(r))return null;const l=1;let a=this._circleCollisionCache;if(\"point\"!==s.type||\"simple-marker\"!==r.type)return S(t,s,e)?l:null;if(o(a)||!a.originalPoint.equals(s)){const t=s,o=e.spatialReference;if(y(t.spatialReference,o)){const e=g(t,o);a={originalPoint:t.clone(),mapPoint:e,radiusPx:c(r.size)},this._circleCollisionCache=a}}if(i(a)){const o=h(t,G),i=e.toScreen(a.mapPoint),s=a.radiusPx,n=i.x+c(r.xoffset),p=i.y-c(r.yoffset);return _(o,[n,p])<s*s?l:null}return null}_intersectDistance3D(e,t,o){const i=e.toMap(t,{include:[o]});return i&&d(i,w,e.renderSpatialReference)?u(w,e.state.camera.eye):null}};e([r({constructOnly:!0,nonNullable:!0})],C.prototype,\"graphic\",null),e([r({readOnly:!0})],C.prototype,\"elevationInfo\",null),e([r({constructOnly:!0,nonNullable:!0})],C.prototype,\"view\",void 0),e([r({value:null})],C.prototype,\"focusedSymbol\",null),e([r({constructOnly:!0})],C.prototype,\"layer\",void 0),e([r()],C.prototype,\"interactive\",void 0),e([r()],C.prototype,\"selectable\",void 0),e([r()],C.prototype,\"grabbable\",void 0),e([r({value:!1})],C.prototype,\"grabbing\",null),e([r()],C.prototype,\"dragging\",void 0),e([r()],C.prototype,\"hovering\",null),e([r({value:!1})],C.prototype,\"selected\",null),e([r()],C.prototype,\"cursor\",void 0),C=e([l(\"esri.views.interactive.GraphicManipulator\")],C);const w=m(),G=p();export{C as GraphicManipulator};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{_ as i}from\"../chunks/tslib.es6.js\";import\"../core/has.js\";import{isSome as e}from\"../core/maybe.js\";import\"../core/Logger.js\";import\"../core/accessorSupport/ensureType.js\";import{getProperties as t}from\"../core/accessorSupport/utils.js\";import{property as s}from\"../core/accessorSupport/decorators/property.js\";import{subclass as r}from\"../core/accessorSupport/decorators/subclass.js\";import{writer as o}from\"../core/accessorSupport/decorators/writer.js\";import\"../core/urlUtils.js\";import\"../core/uuid.js\";import\"../portal/support/resourceExtension.js\";import{loadAll as l}from\"../core/loadAll.js\";import{getLayerJSON as a}from\"../webdoc/support/writeUtils.js\";import p from\"./Layer.js\";import{LayersMixin as n}from\"../support/LayersMixin.js\";import{TablesMixin as y}from\"../support/TablesMixin.js\";import{MultiOriginJSONMixin as c}from\"../core/MultiOriginJSONSupport.js\";import{OperationalLayer as h}from\"./mixins/OperationalLayer.js\";import{BlendLayer as d}from\"./mixins/BlendLayer.js\";import{PortalLayer as m}from\"./mixins/PortalLayer.js\";import{ScaleRangeLayer as u}from\"./mixins/ScaleRangeLayer.js\";let v=class extends(d(u(h(m(y(n(c(p)))))))){constructor(i){super(i),this._visibilityHandles={},this.fullExtent=void 0,this.operationalLayerType=\"GroupLayer\",this.spatialReference=void 0,this.type=\"group\",this._visibilityWatcher=this._visibilityWatcher.bind(this)}initialize(){this._enforceVisibility(this.visibilityMode,this.visible),this.watch(\"visible\",this._visibleWatcher.bind(this),!0)}_writeLayers(i,t,s,r){const o=[];if(!i)return o;i.forEach((i=>{const t=a(i,r.webmap?r.webmap.getLayerJSONFromResourceInfo(i):null,r);e(t)&&t.layerType&&o.push(t)})),t.layers=o}set portalItem(i){this._set(\"portalItem\",i)}set visibilityMode(i){const e=this._get(\"visibilityMode\")!==i;this._set(\"visibilityMode\",i),e&&this._enforceVisibility(i,this.visible)}load(i){return this.addResolvingPromise(this.loadFromPortal({supportedTypes:[\"Feature Service\",\"Feature Collection\",\"Scene Service\"]},i)),Promise.resolve(this)}loadAll(){return l(this,(i=>{i(this.layers)}))}layerAdded(i){i.visible&&\"exclusive\"===this.visibilityMode?this._turnOffOtherLayers(i):\"inherited\"===this.visibilityMode&&(i.visible=this.visible),this._visibilityHandles[i.uid]=i.watch(\"visible\",this._visibilityWatcher,!0)}layerRemoved(i){const e=this._visibilityHandles[i.uid];e&&(e.remove(),delete this._visibilityHandles[i.uid]),this._enforceVisibility(this.visibilityMode,this.visible)}_turnOffOtherLayers(i){this.layers.forEach((e=>{e!==i&&(e.visible=!1)}))}_enforceVisibility(i,e){if(!t(this).initialized)return;const s=this.layers;let r=s.find((i=>i.visible));switch(i){case\"exclusive\":s.length&&!r&&(r=s.getItemAt(0),r.visible=!0),this._turnOffOtherLayers(r);break;case\"inherited\":s.forEach((i=>{i.visible=e}))}}_visibleWatcher(i){\"inherited\"===this.visibilityMode&&this.layers.forEach((e=>{e.visible=i}))}_visibilityWatcher(i,e,t,s){const r=s;switch(this.visibilityMode){case\"exclusive\":i?this._turnOffOtherLayers(r):this._isAnyLayerVisible()||(r.visible=!0);break;case\"inherited\":r.visible=this.visible}}_isAnyLayerVisible(){return this.layers.some((i=>i.visible))}};i([s()],v.prototype,\"fullExtent\",void 0),i([s({json:{read:!1,write:{ignoreOrigin:!0}}})],v.prototype,\"layers\",void 0),i([o(\"layers\")],v.prototype,\"_writeLayers\",null),i([s({type:[\"GroupLayer\"]})],v.prototype,\"operationalLayerType\",void 0),i([s({json:{origins:{\"web-document\":{read:!1,write:!1}}}})],v.prototype,\"portalItem\",null),i([s()],v.prototype,\"spatialReference\",void 0),i([s({json:{read:!1},readOnly:!0,value:\"group\"})],v.prototype,\"type\",void 0),i([s({type:[\"independent\",\"inherited\",\"exclusive\"],value:\"independent\",json:{write:!0,origins:{\"web-map\":{read:!1,write:!1}}}})],v.prototype,\"visibilityMode\",null),v=i([r(\"esri.layers.GroupLayer\")],v);var b=v;export default b;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{_ as t}from\"../../chunks/tslib.es6.js\";import\"../../core/has.js\";import\"../../core/Logger.js\";import\"../../core/accessorSupport/ensureType.js\";import{property as o}from\"../../core/accessorSupport/decorators/property.js\";import{subclass as e}from\"../../core/accessorSupport/decorators/subclass.js\";import r from\"../../core/Error.js\";import\"../../core/urlUtils.js\";import\"../../core/uuid.js\";import\"../../portal/support/resourceExtension.js\";import s from\"../../core/Accessor.js\";import i from\"../../core/Handles.js\";import{init as l}from\"../../core/watchUtils.js\";import{evaluateToolConstructorArguments as n}from\"../../views/interactive/interactiveToolUtils.js\";let p=class extends s{constructor(t){super(t),this.tool=null,this._baseHandles=new i,this._loggedUnsupportedErrorOnce=!1,this._creationAbortController=null,t&&null!=t.visible&&(this.visible=t.visible)}initialize(){this._baseHandles.add(l(this,[\"view.ready\",\"isSupported\"],(()=>{this.view&&this.view.ready&&!this.isSupported?this._loggedUnsupportedErrorOnce||(this.logUnsupportedError(),this._loggedUnsupportedErrorOnce=!0):this._loggedUnsupportedErrorOnce=!1})))}destroy(){this.removeTool(),this.view=null,this._baseHandles.destroy(),this._baseHandles=null}get isSupported(){return!this.view||this.view.type===this.supportedViewType}get view(){return this._get(\"view\")}set view(t){if(t===this.view)return;this.removeTool(),this._set(\"view\",t);const o=\"tools\";this._baseHandles.remove(o),t&&this._baseHandles.add(t.tools.on(\"change\",(t=>{if(this.tool)for(const o of t.removed)if(this.tool===o){o.destroyed||o.destroy(),this._set(\"tool\",null);break}})),o)}set visible(t){this._set(\"visible\",t),this.tool&&(this.tool.visible=t),!t&&this._creationAbortController&&(this._creationAbortController.abort(),this._creationAbortController=null)}get active(){return null!=this._creationAbortController||null!=this.tool&&this.tool.active}get isDisabled(){return!this.view||!this.view.ready||!this.isSupported}get creatingTool(){return!!this._creationAbortController}async createTool(){if(this.removeTool(),!this.isSupported)return Promise.reject(new r(\"tool:create\",\"The view does not support the tool\"));const t=this.createToolParams(),o=()=>{const o=n(t.constructorArguments);return{visible:this.visible,...o}},e=new AbortController,s=e.signal;this._creationAbortController=e;const i=()=>{e===this._creationAbortController&&(this._creationAbortController=null)};try{const e=await this.view.createTool(t.toolConstructor,o,{signal:s});this._set(\"tool\",e),i()}catch(l){throw i(),l}}removeTool(){this._creationAbortController&&this._creationAbortController.abort(),this._creationAbortController=null;const t=this.tool;t&&(this.view&&this.view.tools&&this.view.tools.remove(t),t.destroyed||t.destroy(),this._set(\"tool\",null))}};t([o({constructOnly:!0})],p.prototype,\"tool\",void 0),t([o()],p.prototype,\"isSupported\",null),t([o({value:null})],p.prototype,\"view\",null),t([o({type:Boolean,value:!0})],p.prototype,\"visible\",null),t([o()],p.prototype,\"active\",null),t([o()],p.prototype,\"isDisabled\",null),t([o()],p.prototype,\"_creationAbortController\",void 0),t([o({readOnly:!0})],p.prototype,\"creatingTool\",null),p=t([e(\"esri.widgets.support.InteractiveToolViewModel\")],p);export{p as InteractiveToolViewModel};\n"],"sourceRoot":""}