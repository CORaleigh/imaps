"use strict";(globalThis.webpackChunkimaps=globalThis.webpackChunkimaps||[]).push([[1639],{29691:(t,e,r)=>{r.d(e,{GG:()=>i,rS:()=>l,wY:()=>u});var o=r(83448),s=r(78952),n=r(92975);const i=new s.Z(o.kU),a=new s.Z(o.JL),p=new s.Z(o.mM),u=new s.Z(o.pn);function l(t){return t&&((0,n.BZ)(t)||(0,n.fS)(t,a))?a:t&&((0,n.V2)(t)||(0,n.fS)(t,p))?p:i}},34785:(t,e,r)=>{r.d(e,{W:()=>l});var o=r(19545),s=r(76200),n=r(92026),i=r(66978),a=r(64326),p=r(70032),u=r(98995);class l{constructor(t,e,r,o){this._parsedUrl=t,this._portalItem=e,this._apiKey=r,this.signal=o,this._rootDocument=null;const s=this._parsedUrl?.path.match(/^(.*)\/SceneServer\/layers\/([\d]*)\/?$/i);s&&(this._urlParts={root:s[1],layerId:parseInt(s[2],10)})}async fetch(){if(!this._urlParts)return null;const t=this._portalItem??await this._portalItemFromServiceItemId();if((0,n.Wi)(t))return this._loadFromUrl();const e=await this._findAndLoadRelatedPortalItem(t);return(0,n.Wi)(e)?null:this._loadFeatureLayerFromPortalItem(e)}async fetchPortalItem(){if(!this._urlParts)return null;const t=this._portalItem??await this._portalItemFromServiceItemId();return(0,n.Wi)(t)?null:this._findAndLoadRelatedPortalItem(t)}async _fetchRootDocument(){if((0,n.pC)(this._rootDocument))return this._rootDocument;if((0,n.Wi)(this._urlParts))return this._rootDocument={},{};const t={query:{f:"json",token:this._apiKey},responseType:"json",signal:this.signal},e=`${this._urlParts.root}/SceneServer`;try{const r=await(0,s.default)(e,t);this._rootDocument=r.data}catch{this._rootDocument={}}return this._rootDocument}async _fetchServiceOwningPortalUrl(){const t=this._parsedUrl?.path,e=t?o.id?.findServerInfo(t):null;if(e?.owningSystemUrl)return e.owningSystemUrl;const r=t?t.replace(/(.*\/rest)\/.*/i,"$1")+"/info":null;try{const t=(await(0,s.default)(r,{query:{f:"json"},responseType:"json",signal:this.signal})).data.owningSystemUrl;if(t)return t}catch(n){(0,i.r9)(n)}return null}async _findAndLoadRelatedPortalItem(t){try{return(await t.fetchRelatedItems({relationshipType:"Service2Service",direction:"reverse"},{signal:this.signal})).find((t=>"Feature Service"===t.type))||null}catch(e){return(0,i.r9)(e),null}}async _loadFeatureLayerFromPortalItem(t){await t.load({signal:this.signal});const e=await this._findMatchingAssociatedSublayerUrl(t.url??"");return new a.default({url:e,portalItem:t}).load({signal:this.signal})}async _loadFromUrl(){const t=await this._findMatchingAssociatedSublayerUrl(`${this._urlParts?.root}/FeatureServer`);return new a.default({url:t}).load({signal:this.signal})}async _findMatchingAssociatedSublayerUrl(t){const e=t.replace(/^(.*FeatureServer)(\/[\d]*\/?)?$/i,"$1"),r={query:{f:"json"},responseType:"json",authMode:"no-prompt",signal:this.signal},o=this._urlParts?.layerId,n=this._fetchRootDocument(),i=(0,s.default)(e,r),[a,p]=await Promise.all([i,n]),u=p&&p.layers,l=a.data&&a.data.layers;if(!Array.isArray(l))throw new Error("expected layers array");if(Array.isArray(u)){for(let s=0;s<Math.min(u.length,l.length);s++)if(u[s].id===o)return`${e}/${l[s].id}`}else if(null!=o&&o<l.length)return`${e}/${l[o].id}`;throw new Error("could not find matching associated sublayer")}async _portalItemFromServiceItemId(){const t=(await this._fetchRootDocument()).serviceItemId;if(!t)return null;const e=new u.default({id:t,apiKey:this._apiKey}),r=await this._fetchServiceOwningPortalUrl();(0,n.pC)(r)&&(e.portal=new p.Z({url:r}));try{return e.load({signal:this.signal})}catch(o){return(0,i.r9)(o),null}}}},34207:(t,e,r)=>{r.d(e,{H3:()=>_,QI:()=>c,U4:()=>p,Yh:()=>y});var o=r(27366),s=r(46784),n=r(49861),i=(r(25243),r(63780),r(27135)),a=r(69912);let p=class extends s.wq{constructor(){super(...arguments),this.nodesPerPage=null,this.rootIndex=0,this.lodSelectionMetricType=null}};(0,o._)([(0,n.Cb)({type:Number})],p.prototype,"nodesPerPage",void 0),(0,o._)([(0,n.Cb)({type:Number})],p.prototype,"rootIndex",void 0),(0,o._)([(0,n.Cb)({type:String})],p.prototype,"lodSelectionMetricType",void 0),p=(0,o._)([(0,a.j)("esri.layer.support.I3SNodePageDefinition")],p);let u=class extends s.wq{constructor(){super(...arguments),this.factor=1}};(0,o._)([(0,n.Cb)({type:Number,json:{read:{source:"textureSetDefinitionId"}}})],u.prototype,"id",void 0),(0,o._)([(0,n.Cb)({type:Number})],u.prototype,"factor",void 0),u=(0,o._)([(0,a.j)("esri.layer.support.I3SMaterialTexture")],u);let l=class extends s.wq{constructor(){super(...arguments),this.baseColorFactor=[1,1,1,1],this.baseColorTexture=null,this.metallicRoughnessTexture=null,this.metallicFactor=1,this.roughnessFactor=1}};(0,o._)([(0,n.Cb)({type:[Number]})],l.prototype,"baseColorFactor",void 0),(0,o._)([(0,n.Cb)({type:u})],l.prototype,"baseColorTexture",void 0),(0,o._)([(0,n.Cb)({type:u})],l.prototype,"metallicRoughnessTexture",void 0),(0,o._)([(0,n.Cb)({type:Number})],l.prototype,"metallicFactor",void 0),(0,o._)([(0,n.Cb)({type:Number})],l.prototype,"roughnessFactor",void 0),l=(0,o._)([(0,a.j)("esri.layer.support.I3SMaterialPBRMetallicRoughness")],l);let c=class extends s.wq{constructor(){super(...arguments),this.alphaMode="opaque",this.alphaCutoff=.25,this.doubleSided=!1,this.cullFace="none",this.normalTexture=null,this.occlusionTexture=null,this.emissiveTexture=null,this.emissiveFactor=null,this.pbrMetallicRoughness=null}};(0,o._)([(0,i.J)({opaque:"opaque",mask:"mask",blend:"blend"})],c.prototype,"alphaMode",void 0),(0,o._)([(0,n.Cb)({type:Number})],c.prototype,"alphaCutoff",void 0),(0,o._)([(0,n.Cb)({type:Boolean})],c.prototype,"doubleSided",void 0),(0,o._)([(0,i.J)({none:"none",back:"back",front:"front"})],c.prototype,"cullFace",void 0),(0,o._)([(0,n.Cb)({type:u})],c.prototype,"normalTexture",void 0),(0,o._)([(0,n.Cb)({type:u})],c.prototype,"occlusionTexture",void 0),(0,o._)([(0,n.Cb)({type:u})],c.prototype,"emissiveTexture",void 0),(0,o._)([(0,n.Cb)({type:[Number]})],c.prototype,"emissiveFactor",void 0),(0,o._)([(0,n.Cb)({type:l})],c.prototype,"pbrMetallicRoughness",void 0),c=(0,o._)([(0,a.j)("esri.layer.support.I3SMaterialDefinition")],c);let d=class extends s.wq{};(0,o._)([(0,n.Cb)({type:String,json:{read:{source:["name","index"],reader:(t,e)=>null!=t?t:`${e.index}`}}})],d.prototype,"name",void 0),(0,o._)([(0,i.J)({jpg:"jpg",png:"png",dds:"dds","ktx-etc2":"ktx-etc2",ktx2:"ktx2",basis:"basis"})],d.prototype,"format",void 0),d=(0,o._)([(0,a.j)("esri.layer.support.I3STextureFormat")],d);let y=class extends s.wq{constructor(){super(...arguments),this.atlas=!1}};(0,o._)([(0,n.Cb)({type:[d]})],y.prototype,"formats",void 0),(0,o._)([(0,n.Cb)({type:Boolean})],y.prototype,"atlas",void 0),y=(0,o._)([(0,a.j)("esri.layer.support.I3STextureSetDefinition")],y);let h=class extends s.wq{};(0,o._)([(0,i.J)({Float32:"Float32",UInt64:"UInt64",UInt32:"UInt32",UInt16:"UInt16",UInt8:"UInt8"})],h.prototype,"type",void 0),(0,o._)([(0,n.Cb)({type:Number})],h.prototype,"component",void 0),h=(0,o._)([(0,a.j)("esri.layer.support.I3SGeometryAttribute")],h);let f=class extends s.wq{};(0,o._)([(0,i.J)({draco:"draco"})],f.prototype,"encoding",void 0),(0,o._)([(0,n.Cb)({type:[String]})],f.prototype,"attributes",void 0),f=(0,o._)([(0,a.j)("esri.layer.support.I3SGeometryCompressedAttributes")],f);let m=class extends s.wq{constructor(){super(...arguments),this.offset=0}};(0,o._)([(0,n.Cb)({type:Number})],m.prototype,"offset",void 0),(0,o._)([(0,n.Cb)({type:h})],m.prototype,"position",void 0),(0,o._)([(0,n.Cb)({type:h})],m.prototype,"normal",void 0),(0,o._)([(0,n.Cb)({type:h})],m.prototype,"uv0",void 0),(0,o._)([(0,n.Cb)({type:h})],m.prototype,"color",void 0),(0,o._)([(0,n.Cb)({type:h})],m.prototype,"uvRegion",void 0),(0,o._)([(0,n.Cb)({type:h})],m.prototype,"featureId",void 0),(0,o._)([(0,n.Cb)({type:h})],m.prototype,"faceRange",void 0),(0,o._)([(0,n.Cb)({type:f})],m.prototype,"compressedAttributes",void 0),m=(0,o._)([(0,a.j)("esri.layer.support.I3SGeometryBuffer")],m);let _=class extends s.wq{};(0,o._)([(0,i.J)({triangle:"triangle"})],_.prototype,"topology",void 0),(0,o._)([(0,n.Cb)()],_.prototype,"geometryBuffers",void 0),_=(0,o._)([(0,a.j)("esri.layer.support.I3SGeometryDefinition")],_)},96978:(t,e,r)=>{r.d(e,{C:()=>o});const o={analytics:{supportsCacheHint:!1},attachment:{supportsContentType:!1,supportsExifInfo:!1,supportsKeywords:!1,supportsName:!1,supportsSize:!1,supportsCacheHint:!1,supportsResize:!1},data:{isVersioned:!1,supportsAttachment:!1,supportsM:!1,supportsZ:!1},editing:{supportsDeleteByAnonymous:!1,supportsDeleteByOthers:!1,supportsGeometryUpdate:!1,supportsGlobalId:!1,supportsReturnServiceEditsInSourceSpatialReference:!1,supportsRollbackOnFailure:!1,supportsUpdateByAnonymous:!1,supportsUpdateByOthers:!1,supportsUpdateWithoutM:!1,supportsUploadWithItemId:!1},metadata:{supportsAdvancedFieldProperties:!1},operations:{supportsCalculate:!1,supportsTruncate:!1,supportsValidateSql:!1,supportsAdd:!1,supportsDelete:!1,supportsEditing:!1,supportsChangeTracking:!1,supportsQuery:!1,supportsQueryAnalytics:!1,supportsQueryAttachments:!1,supportsQueryTopFeatures:!1,supportsResizeAttachments:!1,supportsSync:!1,supportsUpdate:!1,supportsExceedsLimitStatistics:!1},queryRelated:{supportsCount:!1,supportsOrderBy:!1,supportsPagination:!1,supportsCacheHint:!1},queryTopFeatures:{supportsCacheHint:!1},query:{maxRecordCount:0,maxRecordCountFactor:0,standardMaxRecordCount:0,supportsCacheHint:!1,supportsCentroid:!1,supportsCompactGeometry:!1,supportsDefaultSpatialReference:!1,supportsFullTextSearch:!1,supportsDisjointSpatialRelationship:!1,supportsDistance:!1,supportsDistinct:!1,supportsExtent:!1,supportsFormatPBF:!1,supportsGeometryProperties:!1,supportsHavingClause:!1,supportsHistoricMoment:!1,supportsMaxRecordCountFactor:!1,supportsOrderBy:!1,supportsPagination:!1,supportsPercentileStatistics:!1,supportsQuantization:!1,supportsQuantizationEditMode:!1,supportsQueryByOthers:!1,supportsQueryGeometry:!1,supportsResultType:!1,supportsSqlExpression:!1,supportsStandardizedQueriesOnly:!1,supportsTopFeaturesQuery:!1,supportsSpatialAggregationStatistics:!1,supportedSpatialAggregationStatistics:{envelope:!1,centroid:!1,convexHull:!1},supportsStatistics:!1,tileMaxRecordCount:0}}},26145:(t,e,r)=>{r.d(e,{xe:()=>I});var o=r(76200),s=(r(63780),r(10064),r(93169),r(66978)),n=r(18722),i=(r(22753),r(11873)),a=(r(14226),r(81949)),p=(r(48976),r(4582)),u=(r(11186),r(71353)),l=(r(83448),r(79803),r(78952),r(29691),r(65156)),c=(r(92975),r(21149),r(28278));var d=r(97689),y=(r(49420),r(98131)),h=r(8229),f=(r(90045),r(67077));r(41414),r(55652),r(50951);(0,y.a)(),(0,u.c)(),(0,u.c)(),(0,f.c)(),(0,i.c)();function m(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[0,0,0],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[-1,-1,-1],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:(0,y.a)();return{center:(0,u.a)(t),halfSize:(0,h.b)(e),quaternion:(0,p.b)(r)}}(()=>{const t=new Int8Array(162);let e=0;const r=r=>{for(let o=0;o<r.length;o++)t[e+o]=r[o];e+=6};r([6,2,3,1,5,4]),r([0,2,3,1,5,4]),r([0,2,3,7,5,4]),r([0,1,3,2,6,4]),r([0,1,3,2,0,0]),r([0,1,5,7,3,2]),r([0,1,3,7,6,4]),r([0,1,3,7,6,2]),r([0,1,5,7,6,2]),r([0,1,5,4,6,2]),r([0,1,5,4,0,0]),r([0,1,3,7,5,4]),r([0,2,6,4,0,0]),r([0,0,0,0,0,0]),r([1,3,7,5,0,0]),r([2,3,7,6,4,0]),r([2,3,7,6,0,0]),r([2,3,1,5,7,6]),r([0,1,5,7,6,2]),r([0,1,5,7,6,4]),r([0,1,3,7,6,4]),r([4,5,7,6,2,0]),r([4,5,7,6,0,0]),r([4,5,1,3,7,6]),r([0,2,3,7,5,4]),r([6,2,3,7,5,4]),r([6,2,3,1,5,4])})();(0,u.c)(),(0,u.c)(),(0,u.c)(),(0,y.a)();var _=r(91526);(0,l.Ue)();var g;function I(t,e,r,n,i){const a=[];for(const o of e)if(o&&i.includes(o.name)){const e=`${t}/nodes/${r}/attributes/${o.key}/0`;a.push({url:e,storageInfo:o})}return(0,s.as)(a.map((t=>(0,o.default)(t.url,{responseType:"array-buffer"}).then((e=>(0,c.qM)(t.storageInfo,e.data)))))).then((t=>{const e=[];for(const r of n){const o={};for(let e=0;e<t.length;e++){const s=t[e].value;null!=s&&(o[a[e].storageInfo.name]=v(s,r))}e.push(o)}return e}))}!function(t){t[t.OUTSIDE=0]="OUTSIDE",t[t.INTERSECTS_CENTER_OUTSIDE=1]="INTERSECTS_CENTER_OUTSIDE",t[t.INTERSECTS_CENTER_INSIDE=2]="INTERSECTS_CENTER_INSIDE",t[t.INSIDE=3]="INSIDE"}(g||(g={}));function v(t,e){if(!t)return null;const r=t[e];return(0,n.z3)(t)?-32768===r?null:r:(0,n.Hx)(t)?-2147483648===r?null:r:r!=r?null:r}(0,d.$s)({color:[0,0,0,0],opacity:0});const b=new Array(24);new _.a(b,3,!0),(0,u.c)(),(0,u.c)(),(0,i.c)();(0,a.c)(),(0,p.c)(),(0,l.Ue)(),(0,l.Ue)(),m(),(0,u.c)(),new Array(72),(0,a.c)()},97689:(t,e,r)=>{r.d(e,{hM:()=>u,$s:()=>l,eU:()=>p});var o=r(51995),s=(r(93169),r(92026)),n=r(17842),i=r(67077);var a=r(77958);function p(t){return t&&t.enabled&&(function(t){return"extrude"===t.type}(t)||function(t){return"fill"===t.type}(t))&&(0,s.pC)(t.edges)}function u(t,e){return function(t,e){if((0,s.Wi)(t))return null;const r=(0,s.pC)(t.color)?(0,i.b)(o.Z.toUnitRGBA(t.color)):(0,i.f)(0,0,0,0),a=(0,n.F2)(t.size),p=(0,n.F2)(t.extensionLength);switch(t.type){case"solid":return l({color:r,size:a,extensionLength:p,...e});case"sketch":return function(t){return{...d,...t,type:"sketch"}}({color:r,size:a,extensionLength:p,...e});default:return}}(function(t){return t&&t.enabled&&t.edges||null}(t),e)}function l(t){return{...c,...t,type:"solid"}}const c={color:(0,i.f)(0,0,0,.2),size:1,extensionLength:0,opacity:1,objectTransparency:a.i.OPAQUE,hasSlicePlane:!1},d={color:(0,i.f)(0,0,0,.2),size:1,extensionLength:0,opacity:1,objectTransparency:a.i.OPAQUE,hasSlicePlane:!1}},49420:(t,e,r)=>{r.d(e,{F5:()=>i,HB:()=>a,a9:()=>o});var o,s=r(16889),n=r(92026);function i(t){switch(t){case"multiply":default:return o.Multiply;case"ignore":return o.Ignore;case"replace":return o.Replace;case"tint":return o.Tint}}function a(t,e,r){if((0,n.Wi)(t)||e===o.Ignore)return r[0]=255,r[1]=255,r[2]=255,void(r[3]=255);const i=(0,s.uZ)(Math.round(t[3]*u),0,u),a=0===i||e===o.Tint?0:e===o.Replace?l:c;r[0]=(0,s.uZ)(Math.round(t[0]*p),0,p),r[1]=(0,s.uZ)(Math.round(t[1]*p),0,p),r[2]=(0,s.uZ)(Math.round(t[2]*p),0,p),r[3]=i+a}!function(t){t[t.Multiply=1]="Multiply",t[t.Ignore=2]="Ignore",t[t.Replace=3]="Replace",t[t.Tint=4]="Tint"}(o||(o={}));const p=255,u=85,l=u,c=2*u},91526:(t,e,r)=>{r.d(e,{a:()=>o});class o{constructor(t,e){let r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e;this.data=t,this.size=e,this.exclusive=r,this.stride=o}}},77958:(t,e,r)=>{var o;r.d(e,{i:()=>o}),function(t){t[t.INVISIBLE=0]="INVISIBLE",t[t.TRANSPARENT=1]="TRANSPARENT",t[t.OPAQUE=2]="OPAQUE"}(o||(o={}))},24405:(t,e,r)=>{r.d(e,{V:()=>i,e:()=>n});var o=r(92026),s=r(37270);async function n(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t.popupTemplate;if((0,o.Wi)(e))return[];const r=await e.getRequiredFields(t.fieldsIndex),{lastEditInfoEnabled:n}=e,{objectIdField:i,typeIdField:a,globalIdField:p,relationships:u}=t;if(r.includes("*"))return["*"];const l=n?await(0,s.CH)(t):[],c=(0,s.Q0)(t.fieldsIndex,[...r,...l]);return a&&c.push(a),c&&i&&t.fieldsIndex?.has(i)&&!c.includes(i)&&c.push(i),c&&p&&t.fieldsIndex?.has(p)&&!c.includes(p)&&c.push(p),u&&u.forEach((e=>{const{keyField:r}=e;c&&r&&t.fieldsIndex?.has(r)&&!c.includes(r)&&c.push(r)})),c}function i(t,e){return t.popupTemplate?t.popupTemplate:(0,o.pC)(e)&&e.defaultPopupTemplateEnabled&&(0,o.pC)(t.defaultPopupTemplate)?t.defaultPopupTemplate:null}}}]);
//# sourceMappingURL=1639.f79a22a8.chunk.js.map