(this.webpackJsonpimaps=this.webpackJsonpimaps||[]).push([[111,58,240],{118:function(t,e,n){"use strict";n.d(e,"a",(function(){return F})),n.d(e,"b",(function(){return m})),n.d(e,"c",(function(){return y})),n.d(e,"d",(function(){return b})),n.d(e,"e",(function(){return o})),n.d(e,"f",(function(){return j})),n.d(e,"g",(function(){return _})),n.d(e,"h",(function(){return x})),n.d(e,"i",(function(){return O})),n.d(e,"j",(function(){return M})),n.d(e,"k",(function(){return a})),n.d(e,"l",(function(){return s})),n.d(e,"m",(function(){return S})),n.d(e,"n",(function(){return f})),n.d(e,"o",(function(){return h})),n.d(e,"p",(function(){return d})),n.d(e,"q",(function(){return c})),n.d(e,"r",(function(){return u})),n.d(e,"s",(function(){return g})),n.d(e,"t",(function(){return w})),n.d(e,"u",(function(){return I})),n.d(e,"v",(function(){return l})),n.d(e,"w",(function(){return p}));n(82),n(113);var r=n(85),i=n(96);function s(t=N){return[t[0],t[1],t[2],t[3]]}function o(t){return[t[0],t[1],t[2],t[3]]}function a(t,e){return t!==e&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3]),t}function u(t,e,n,r,i=s()){return i[0]=t,i[1]=e,i[2]=n,i[3]=r,i}function c(t,e=s()){return e[0]=t.xmin,e[1]=t.ymin,e[2]=t.xmax,e[3]=t.ymax,e}function l(t,e){return new i.a({xmin:t[0],ymin:t[1],xmax:t[2],ymax:t[3],spatialReference:e})}function h(t,e){e[0]<t[0]&&(t[0]=e[0]),e[0]>t[2]&&(t[2]=e[0]),e[1]<t[1]&&(t[1]=e[1]),e[1]>t[3]&&(t[3]=e[1])}function f(t,e,n){if(Object(r.k)(e))a(n,t);else if("length"in e)v(e)?(n[0]=Math.min(t[0],e[0]),n[1]=Math.min(t[1],e[1]),n[2]=Math.max(t[2],e[2]),n[3]=Math.max(t[3],e[3])):2!==e.length&&3!==e.length||(n[0]=Math.min(t[0],e[0]),n[1]=Math.min(t[1],e[1]),n[2]=Math.max(t[2],e[0]),n[3]=Math.max(t[3],e[1]));else switch(e.type){case"extent":n[0]=Math.min(t[0],e.xmin),n[1]=Math.min(t[1],e.ymin),n[2]=Math.max(t[2],e.xmax),n[3]=Math.max(t[3],e.ymax);break;case"point":n[0]=Math.min(t[0],e.x),n[1]=Math.min(t[1],e.y),n[2]=Math.max(t[2],e.x),n[3]=Math.max(t[3],e.y)}}function d(t,e,n=t){const r=e.length;let i=t[0],s=t[1],o=t[2],a=t[3];for(let u=0;u<r;u++){const t=e[u];i=Math.min(i,t[0]),s=Math.min(s,t[1]),o=Math.max(o,t[0]),a=Math.max(a,t[1])}return n[0]=i,n[1]=s,n[2]=o,n[3]=a,n}function m(t){for(let e=0;e<4;e++)if(!isFinite(t[e]))return!1;return!0}function p(t){return Object(r.k)(t)||t[0]>=t[2]?0:t[2]-t[0]}function g(t){return t[1]>=t[3]?0:t[3]-t[1]}function y(t){return p(t)*g(t)}function b(t,e=[0,0]){return e[0]=(t[0]+t[2])/2,e[1]=(t[1]+t[3])/2,e}function _(t,e){return M(t,e[0],e[1])}function x(t,e){return M(t,e.x,e.y)}function M(t,e,n){return e>=t[0]&&n>=t[1]&&e<=t[2]&&n<=t[3]}function O(t,e,n){return e[0]>=t[0]-n&&e[1]>=t[1]-n&&e[0]<=t[2]+n&&e[1]<=t[3]+n}function w(t,e){return Math.max(e[0],t[0])<=Math.min(e[2],t[2])&&Math.max(e[1],t[1])<=Math.min(e[3],t[3])}function j(t,e){return e[0]>=t[0]&&e[2]<=t[2]&&e[1]>=t[1]&&e[3]<=t[3]}function I(t,e,n,r=t){return r[0]=t[0]+e,r[1]=t[1]+n,r[2]=t[2]+e,r[3]=t[3]+n,r}function S(t){return t?a(t,F):s(F)}function v(t){return null!=t&&4===t.length}const F=[1/0,1/0,-1/0,-1/0],N=[0,0,0,0]},149:function(t,e,n){"use strict";n.d(e,"a",(function(){return x})),n.d(e,"b",(function(){return h})),n.d(e,"c",(function(){return c})),n.d(e,"d",(function(){return s})),n.d(e,"e",(function(){return m})),n.d(e,"f",(function(){return d})),n.d(e,"g",(function(){return f})),n.d(e,"h",(function(){return w})),n.d(e,"i",(function(){return j})),n.d(e,"j",(function(){return a})),n.d(e,"k",(function(){return p})),n.d(e,"l",(function(){return T})),n.d(e,"m",(function(){return S})),n.d(e,"n",(function(){return l})),n.d(e,"o",(function(){return N})),n.d(e,"p",(function(){return I})),n.d(e,"q",(function(){return F})),n.d(e,"r",(function(){return g})),n.d(e,"s",(function(){return o})),n.d(e,"t",(function(){return u})),n.d(e,"u",(function(){return _})),n.d(e,"v",(function(){return y})),n.d(e,"w",(function(){return b}));var r=n(106),i=n(176);function s(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function o(t,e,n,r,i,s,o,a,u,c,l,h,f,d,m,p,g){return t[0]=e,t[1]=n,t[2]=r,t[3]=i,t[4]=s,t[5]=o,t[6]=a,t[7]=u,t[8]=c,t[9]=l,t[10]=h,t[11]=f,t[12]=d,t[13]=m,t[14]=p,t[15]=g,t}function a(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function u(t,e){if(t===e){const n=e[1],r=e[2],i=e[3],s=e[6],o=e[7],a=e[11];t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=n,t[6]=e[9],t[7]=e[13],t[8]=r,t[9]=s,t[11]=e[14],t[12]=i,t[13]=o,t[14]=a}else t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=e[1],t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=e[2],t[9]=e[6],t[10]=e[10],t[11]=e[14],t[12]=e[3],t[13]=e[7],t[14]=e[11],t[15]=e[15];return t}function c(t,e){const n=e[0],r=e[1],i=e[2],s=e[3],o=e[4],a=e[5],u=e[6],c=e[7],l=e[8],h=e[9],f=e[10],d=e[11],m=e[12],p=e[13],g=e[14],y=e[15],b=n*a-r*o,_=n*u-i*o,x=n*c-s*o,M=r*u-i*a,O=r*c-s*a,w=i*c-s*u,j=l*p-h*m,I=l*g-f*m,S=l*y-d*m,v=h*g-f*p,F=h*y-d*p,N=f*y-d*g;let T=b*N-_*F+x*v+M*S-O*I+w*j;return T?(T=1/T,t[0]=(a*N-u*F+c*v)*T,t[1]=(i*F-r*N-s*v)*T,t[2]=(p*w-g*O+y*M)*T,t[3]=(f*O-h*w-d*M)*T,t[4]=(u*S-o*N-c*I)*T,t[5]=(n*N-i*S+s*I)*T,t[6]=(g*x-m*w-y*_)*T,t[7]=(l*w-f*x+d*_)*T,t[8]=(o*F-a*S+c*j)*T,t[9]=(r*S-n*F-s*j)*T,t[10]=(m*O-p*x+y*b)*T,t[11]=(h*x-l*O-d*b)*T,t[12]=(a*I-o*v-u*j)*T,t[13]=(n*v-r*I+i*j)*T,t[14]=(p*_-m*M-g*b)*T,t[15]=(l*M-h*_+f*b)*T,t):null}function l(t,e,n){const r=e[0],i=e[1],s=e[2],o=e[3],a=e[4],u=e[5],c=e[6],l=e[7],h=e[8],f=e[9],d=e[10],m=e[11],p=e[12],g=e[13],y=e[14],b=e[15];let _=n[0],x=n[1],M=n[2],O=n[3];return t[0]=_*r+x*a+M*h+O*p,t[1]=_*i+x*u+M*f+O*g,t[2]=_*s+x*c+M*d+O*y,t[3]=_*o+x*l+M*m+O*b,_=n[4],x=n[5],M=n[6],O=n[7],t[4]=_*r+x*a+M*h+O*p,t[5]=_*i+x*u+M*f+O*g,t[6]=_*s+x*c+M*d+O*y,t[7]=_*o+x*l+M*m+O*b,_=n[8],x=n[9],M=n[10],O=n[11],t[8]=_*r+x*a+M*h+O*p,t[9]=_*i+x*u+M*f+O*g,t[10]=_*s+x*c+M*d+O*y,t[11]=_*o+x*l+M*m+O*b,_=n[12],x=n[13],M=n[14],O=n[15],t[12]=_*r+x*a+M*h+O*p,t[13]=_*i+x*u+M*f+O*g,t[14]=_*s+x*c+M*d+O*y,t[15]=_*o+x*l+M*m+O*b,t}function h(t,e,n){const r=n[0],i=n[1],s=n[2];let o,a,u,c,l,h,f,d,m,p,g,y;return e===t?(t[12]=e[0]*r+e[4]*i+e[8]*s+e[12],t[13]=e[1]*r+e[5]*i+e[9]*s+e[13],t[14]=e[2]*r+e[6]*i+e[10]*s+e[14],t[15]=e[3]*r+e[7]*i+e[11]*s+e[15]):(o=e[0],a=e[1],u=e[2],c=e[3],l=e[4],h=e[5],f=e[6],d=e[7],m=e[8],p=e[9],g=e[10],y=e[11],t[0]=o,t[1]=a,t[2]=u,t[3]=c,t[4]=l,t[5]=h,t[6]=f,t[7]=d,t[8]=m,t[9]=p,t[10]=g,t[11]=y,t[12]=o*r+l*i+m*s+e[12],t[13]=a*r+h*i+p*s+e[13],t[14]=u*r+f*i+g*s+e[14],t[15]=c*r+d*i+y*s+e[15]),t}function f(t,e,n){const r=n[0],i=n[1],s=n[2];return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t[4]=e[4]*i,t[5]=e[5]*i,t[6]=e[6]*i,t[7]=e[7]*i,t[8]=e[8]*s,t[9]=e[9]*s,t[10]=e[10]*s,t[11]=e[11]*s,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function d(t,e,n,r){let s,o,a,u,c,l,h,f,d,m,p,g,y,b,_,x,M,O,w,j,I,S,v,F,N=r[0],T=r[1],B=r[2],E=Math.sqrt(N*N+T*T+B*B);return E<i.a?null:(E=1/E,N*=E,T*=E,B*=E,s=Math.sin(n),o=Math.cos(n),a=1-o,u=e[0],c=e[1],l=e[2],h=e[3],f=e[4],d=e[5],m=e[6],p=e[7],g=e[8],y=e[9],b=e[10],_=e[11],x=N*N*a+o,M=T*N*a+B*s,O=B*N*a-T*s,w=N*T*a-B*s,j=T*T*a+o,I=B*T*a+N*s,S=N*B*a+T*s,v=T*B*a-N*s,F=B*B*a+o,t[0]=u*x+f*M+g*O,t[1]=c*x+d*M+y*O,t[2]=l*x+m*M+b*O,t[3]=h*x+p*M+_*O,t[4]=u*w+f*j+g*I,t[5]=c*w+d*j+y*I,t[6]=l*w+m*j+b*I,t[7]=h*w+p*j+_*I,t[8]=u*S+f*v+g*F,t[9]=c*S+d*v+y*F,t[10]=l*S+m*v+b*F,t[11]=h*S+p*v+_*F,e!==t&&(t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t)}function m(t,e,n){const r=Math.sin(n),i=Math.cos(n),s=e[4],o=e[5],a=e[6],u=e[7],c=e[8],l=e[9],h=e[10],f=e[11];return e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=s*i+c*r,t[5]=o*i+l*r,t[6]=a*i+h*r,t[7]=u*i+f*r,t[8]=c*i-s*r,t[9]=l*i-o*r,t[10]=h*i-a*r,t[11]=f*i-u*r,t}function p(t,e,n){const r=Math.sin(n),i=Math.cos(n),s=e[0],o=e[1],a=e[2],u=e[3],c=e[8],l=e[9],h=e[10],f=e[11];return e!==t&&(t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=s*i-c*r,t[1]=o*i-l*r,t[2]=a*i-h*r,t[3]=u*i-f*r,t[8]=s*r+c*i,t[9]=o*r+l*i,t[10]=a*r+h*i,t[11]=u*r+f*i,t}function g(t,e,n){const r=Math.sin(n),i=Math.cos(n),s=e[0],o=e[1],a=e[2],u=e[3],c=e[4],l=e[5],h=e[6],f=e[7];return e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=s*i+c*r,t[1]=o*i+l*r,t[2]=a*i+h*r,t[3]=u*i+f*r,t[4]=c*i-s*r,t[5]=l*i-o*r,t[6]=h*i-a*r,t[7]=f*i-u*r,t}function y(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=e[0],t[13]=e[1],t[14]=e[2],t[15]=1,t}function b(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=e[2],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function _(t,e){const n=Math.sin(e),r=Math.cos(e);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=r,t[6]=n,t[7]=0,t[8]=0,t[9]=-n,t[10]=r,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function x(t,e){const n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=n,t[2]=0,t[3]=0,t[4]=-n,t[5]=r,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function M(t,e,n){const r=e[0],i=e[1],s=e[2],o=e[3],a=r+r,u=i+i,c=s+s,l=r*a,h=r*u,f=r*c,d=i*u,m=i*c,p=s*c,g=o*a,y=o*u,b=o*c;return t[0]=1-(d+p),t[1]=h+b,t[2]=f-y,t[3]=0,t[4]=h-b,t[5]=1-(l+p),t[6]=m+g,t[7]=0,t[8]=f+y,t[9]=m-g,t[10]=1-(l+d),t[11]=0,t[12]=n[0],t[13]=n[1],t[14]=n[2],t[15]=1,t}const O=Object(r.f)();function w(t,e){const n=e[0],r=e[1],i=e[2],s=e[3],o=n+n,a=r+r,u=i+i,c=n*o,l=r*o,h=r*a,f=i*o,d=i*a,m=i*u,p=s*o,g=s*a,y=s*u;return t[0]=1-h-m,t[1]=l+y,t[2]=f-g,t[3]=0,t[4]=l-y,t[5]=1-c-m,t[6]=d+p,t[7]=0,t[8]=f+g,t[9]=d-p,t[10]=1-c-h,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function j(t,e,n,r,i,s,o){const a=1/(n-e),u=1/(i-r),c=1/(s-o);return t[0]=2*s*a,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=2*s*u,t[6]=0,t[7]=0,t[8]=(n+e)*a,t[9]=(i+r)*u,t[10]=(o+s)*c,t[11]=-1,t[12]=0,t[13]=0,t[14]=o*s*2*c,t[15]=0,t}function I(t,e,n,r,i,s,o){const a=1/(e-n),u=1/(r-i),c=1/(s-o);return t[0]=-2*a,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*u,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*c,t[11]=0,t[12]=(e+n)*a,t[13]=(i+r)*u,t[14]=(o+s)*c,t[15]=1,t}function S(t,e,n,r){let s,o,u,c,l,h,f,d,m,p;const g=e[0],y=e[1],b=e[2],_=r[0],x=r[1],M=r[2],O=n[0],w=n[1],j=n[2];return Math.abs(g-O)<i.a&&Math.abs(y-w)<i.a&&Math.abs(b-j)<i.a?a(t):(f=g-O,d=y-w,m=b-j,p=1/Math.sqrt(f*f+d*d+m*m),f*=p,d*=p,m*=p,s=x*m-M*d,o=M*f-_*m,u=_*d-x*f,p=Math.sqrt(s*s+o*o+u*u),p?(p=1/p,s*=p,o*=p,u*=p):(s=0,o=0,u=0),c=d*u-m*o,l=m*s-f*u,h=f*o-d*s,p=Math.sqrt(c*c+l*l+h*h),p?(p=1/p,c*=p,l*=p,h*=p):(c=0,l=0,h=0),t[0]=s,t[1]=c,t[2]=f,t[3]=0,t[4]=o,t[5]=l,t[6]=d,t[7]=0,t[8]=u,t[9]=h,t[10]=m,t[11]=0,t[12]=-(s*g+o*y+u*b),t[13]=-(c*g+l*y+h*b),t[14]=-(f*g+d*y+m*b),t[15]=1,t)}function v(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t[4]=e[4]-n[4],t[5]=e[5]-n[5],t[6]=e[6]-n[6],t[7]=e[7]-n[7],t[8]=e[8]-n[8],t[9]=e[9]-n[9],t[10]=e[10]-n[10],t[11]=e[11]-n[11],t[12]=e[12]-n[12],t[13]=e[13]-n[13],t[14]=e[14]-n[14],t[15]=e[15]-n[15],t}function F(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]&&t[9]===e[9]&&t[10]===e[10]&&t[11]===e[11]&&t[12]===e[12]&&t[13]===e[13]&&t[14]===e[14]&&t[15]===e[15]}function N(t,e){if(t===e)return!0;const n=t[0],r=t[1],s=t[2],o=t[3],a=t[4],u=t[5],c=t[6],l=t[7],h=t[8],f=t[9],d=t[10],m=t[11],p=t[12],g=t[13],y=t[14],b=t[15],_=e[0],x=e[1],M=e[2],O=e[3],w=e[4],j=e[5],I=e[6],S=e[7],v=e[8],F=e[9],N=e[10],T=e[11],B=e[12],E=e[13],k=e[14],z=e[15];return Math.abs(n-_)<=i.a*Math.max(1,Math.abs(n),Math.abs(_))&&Math.abs(r-x)<=i.a*Math.max(1,Math.abs(r),Math.abs(x))&&Math.abs(s-M)<=i.a*Math.max(1,Math.abs(s),Math.abs(M))&&Math.abs(o-O)<=i.a*Math.max(1,Math.abs(o),Math.abs(O))&&Math.abs(a-w)<=i.a*Math.max(1,Math.abs(a),Math.abs(w))&&Math.abs(u-j)<=i.a*Math.max(1,Math.abs(u),Math.abs(j))&&Math.abs(c-I)<=i.a*Math.max(1,Math.abs(c),Math.abs(I))&&Math.abs(l-S)<=i.a*Math.max(1,Math.abs(l),Math.abs(S))&&Math.abs(h-v)<=i.a*Math.max(1,Math.abs(h),Math.abs(v))&&Math.abs(f-F)<=i.a*Math.max(1,Math.abs(f),Math.abs(F))&&Math.abs(d-N)<=i.a*Math.max(1,Math.abs(d),Math.abs(N))&&Math.abs(m-T)<=i.a*Math.max(1,Math.abs(m),Math.abs(T))&&Math.abs(p-B)<=i.a*Math.max(1,Math.abs(p),Math.abs(B))&&Math.abs(g-E)<=i.a*Math.max(1,Math.abs(g),Math.abs(E))&&Math.abs(y-k)<=i.a*Math.max(1,Math.abs(y),Math.abs(k))&&Math.abs(b-z)<=i.a*Math.max(1,Math.abs(b),Math.abs(z))}function T(t){const e=i.a,n=t[0],r=t[1],s=t[2],o=t[4],a=t[5],u=t[6],c=t[8],l=t[9],h=t[10];return Math.abs(1-(n*n+o*o+c*c))<=e&&Math.abs(1-(r*r+a*a+l*l))<=e&&Math.abs(1-(s*s+u*u+h*h))<=e}const B=l,E=v;Object.freeze({__proto__:null,copy:s,set:o,identity:a,transpose:u,invert:c,adjoint:function(t,e){const n=e[0],r=e[1],i=e[2],s=e[3],o=e[4],a=e[5],u=e[6],c=e[7],l=e[8],h=e[9],f=e[10],d=e[11],m=e[12],p=e[13],g=e[14],y=e[15];return t[0]=a*(f*y-d*g)-h*(u*y-c*g)+p*(u*d-c*f),t[1]=-(r*(f*y-d*g)-h*(i*y-s*g)+p*(i*d-s*f)),t[2]=r*(u*y-c*g)-a*(i*y-s*g)+p*(i*c-s*u),t[3]=-(r*(u*d-c*f)-a*(i*d-s*f)+h*(i*c-s*u)),t[4]=-(o*(f*y-d*g)-l*(u*y-c*g)+m*(u*d-c*f)),t[5]=n*(f*y-d*g)-l*(i*y-s*g)+m*(i*d-s*f),t[6]=-(n*(u*y-c*g)-o*(i*y-s*g)+m*(i*c-s*u)),t[7]=n*(u*d-c*f)-o*(i*d-s*f)+l*(i*c-s*u),t[8]=o*(h*y-d*p)-l*(a*y-c*p)+m*(a*d-c*h),t[9]=-(n*(h*y-d*p)-l*(r*y-s*p)+m*(r*d-s*h)),t[10]=n*(a*y-c*p)-o*(r*y-s*p)+m*(r*c-s*a),t[11]=-(n*(a*d-c*h)-o*(r*d-s*h)+l*(r*c-s*a)),t[12]=-(o*(h*g-f*p)-l*(a*g-u*p)+m*(a*f-u*h)),t[13]=n*(h*g-f*p)-l*(r*g-i*p)+m*(r*f-i*h),t[14]=-(n*(a*g-u*p)-o*(r*g-i*p)+m*(r*u-i*a)),t[15]=n*(a*f-u*h)-o*(r*f-i*h)+l*(r*u-i*a),t},determinant:function(t){const e=t[0],n=t[1],r=t[2],i=t[3],s=t[4],o=t[5],a=t[6],u=t[7],c=t[8],l=t[9],h=t[10],f=t[11],d=t[12],m=t[13],p=t[14],g=t[15];return(e*o-n*s)*(h*g-f*p)-(e*a-r*s)*(l*g-f*m)+(e*u-i*s)*(l*p-h*m)+(n*a-r*o)*(c*g-f*d)-(n*u-i*o)*(c*p-h*d)+(r*u-i*a)*(c*m-l*d)},multiply:l,translate:h,scale:f,rotate:d,rotateX:m,rotateY:p,rotateZ:g,fromTranslation:y,fromScaling:b,fromRotation:function(t,e,n){let r,s,o,a=n[0],u=n[1],c=n[2],l=Math.sqrt(a*a+u*u+c*c);return l<i.a?null:(l=1/l,a*=l,u*=l,c*=l,r=Math.sin(e),s=Math.cos(e),o=1-s,t[0]=a*a*o+s,t[1]=u*a*o+c*r,t[2]=c*a*o-u*r,t[3]=0,t[4]=a*u*o-c*r,t[5]=u*u*o+s,t[6]=c*u*o+a*r,t[7]=0,t[8]=a*c*o+u*r,t[9]=u*c*o-a*r,t[10]=c*c*o+s,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t)},fromXRotation:_,fromYRotation:function(t,e){const n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=0,t[2]=-n,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=n,t[9]=0,t[10]=r,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},fromZRotation:x,fromRotationTranslation:M,fromQuat2:function(t,e){const n=O,r=-e[0],i=-e[1],s=-e[2],o=e[3],a=e[4],u=e[5],c=e[6],l=e[7],h=r*r+i*i+s*s+o*o;return h>0?(n[0]=2*(a*o+l*r+u*s-c*i)/h,n[1]=2*(u*o+l*i+c*r-a*s)/h,n[2]=2*(c*o+l*s+a*i-u*r)/h):(n[0]=2*(a*o+l*r+u*s-c*i),n[1]=2*(u*o+l*i+c*r-a*s),n[2]=2*(c*o+l*s+a*i-u*r)),M(t,e,n),t},getTranslation:function(t,e){return t[0]=e[12],t[1]=e[13],t[2]=e[14],t},getScaling:function(t,e){const n=e[0],r=e[1],i=e[2],s=e[4],o=e[5],a=e[6],u=e[8],c=e[9],l=e[10];return t[0]=Math.sqrt(n*n+r*r+i*i),t[1]=Math.sqrt(s*s+o*o+a*a),t[2]=Math.sqrt(u*u+c*c+l*l),t},getRotation:function(t,e){const n=e[0]+e[5]+e[10];let r=0;return n>0?(r=2*Math.sqrt(n+1),t[3]=.25*r,t[0]=(e[6]-e[9])/r,t[1]=(e[8]-e[2])/r,t[2]=(e[1]-e[4])/r):e[0]>e[5]&&e[0]>e[10]?(r=2*Math.sqrt(1+e[0]-e[5]-e[10]),t[3]=(e[6]-e[9])/r,t[0]=.25*r,t[1]=(e[1]+e[4])/r,t[2]=(e[8]+e[2])/r):e[5]>e[10]?(r=2*Math.sqrt(1+e[5]-e[0]-e[10]),t[3]=(e[8]-e[2])/r,t[0]=(e[1]+e[4])/r,t[1]=.25*r,t[2]=(e[6]+e[9])/r):(r=2*Math.sqrt(1+e[10]-e[0]-e[5]),t[3]=(e[1]-e[4])/r,t[0]=(e[8]+e[2])/r,t[1]=(e[6]+e[9])/r,t[2]=.25*r),t},fromRotationTranslationScale:function(t,e,n,r){const i=e[0],s=e[1],o=e[2],a=e[3],u=i+i,c=s+s,l=o+o,h=i*u,f=i*c,d=i*l,m=s*c,p=s*l,g=o*l,y=a*u,b=a*c,_=a*l,x=r[0],M=r[1],O=r[2];return t[0]=(1-(m+g))*x,t[1]=(f+_)*x,t[2]=(d-b)*x,t[3]=0,t[4]=(f-_)*M,t[5]=(1-(h+g))*M,t[6]=(p+y)*M,t[7]=0,t[8]=(d+b)*O,t[9]=(p-y)*O,t[10]=(1-(h+m))*O,t[11]=0,t[12]=n[0],t[13]=n[1],t[14]=n[2],t[15]=1,t},fromRotationTranslationScaleOrigin:function(t,e,n,r,i){const s=e[0],o=e[1],a=e[2],u=e[3],c=s+s,l=o+o,h=a+a,f=s*c,d=s*l,m=s*h,p=o*l,g=o*h,y=a*h,b=u*c,_=u*l,x=u*h,M=r[0],O=r[1],w=r[2],j=i[0],I=i[1],S=i[2],v=(1-(p+y))*M,F=(d+x)*M,N=(m-_)*M,T=(d-x)*O,B=(1-(f+y))*O,E=(g+b)*O,k=(m+_)*w,z=(g-b)*w,R=(1-(f+p))*w;return t[0]=v,t[1]=F,t[2]=N,t[3]=0,t[4]=T,t[5]=B,t[6]=E,t[7]=0,t[8]=k,t[9]=z,t[10]=R,t[11]=0,t[12]=n[0]+j-(v*j+T*I+k*S),t[13]=n[1]+I-(F*j+B*I+z*S),t[14]=n[2]+S-(N*j+E*I+R*S),t[15]=1,t},fromQuat:w,frustum:j,perspective:function(t,e,n,r,i){const s=1/Math.tan(e/2);let o;return t[0]=s/n,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=s,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=i&&i!==1/0?(o=1/(r-i),t[10]=(i+r)*o,t[14]=2*i*r*o):(t[10]=-1,t[14]=-2*r),t},perspectiveFromFieldOfView:function(t,e,n,r){const i=Math.tan(e.upDegrees*Math.PI/180),s=Math.tan(e.downDegrees*Math.PI/180),o=Math.tan(e.leftDegrees*Math.PI/180),a=Math.tan(e.rightDegrees*Math.PI/180),u=2/(o+a),c=2/(i+s);return t[0]=u,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=c,t[6]=0,t[7]=0,t[8]=-(o-a)*u*.5,t[9]=(i-s)*c*.5,t[10]=r/(n-r),t[11]=-1,t[12]=0,t[13]=0,t[14]=r*n/(n-r),t[15]=0,t},ortho:I,lookAt:S,targetTo:function(t,e,n,r){const i=e[0],s=e[1],o=e[2],a=r[0],u=r[1],c=r[2];let l=i-n[0],h=s-n[1],f=o-n[2],d=l*l+h*h+f*f;d>0&&(d=1/Math.sqrt(d),l*=d,h*=d,f*=d);let m=u*f-c*h,p=c*l-a*f,g=a*h-u*l;return d=m*m+p*p+g*g,d>0&&(d=1/Math.sqrt(d),m*=d,p*=d,g*=d),t[0]=m,t[1]=p,t[2]=g,t[3]=0,t[4]=h*g-f*p,t[5]=f*m-l*g,t[6]=l*p-h*m,t[7]=0,t[8]=l,t[9]=h,t[10]=f,t[11]=0,t[12]=i,t[13]=s,t[14]=o,t[15]=1,t},str:function(t){return"mat4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+", "+t[9]+", "+t[10]+", "+t[11]+", "+t[12]+", "+t[13]+", "+t[14]+", "+t[15]+")"},frob:function(t){return Math.sqrt(t[0]**2+t[1]**2+t[2]**2+t[3]**2+t[4]**2+t[5]**2+t[6]**2+t[7]**2+t[8]**2+t[9]**2+t[10]**2+t[11]**2+t[12]**2+t[13]**2+t[14]**2+t[15]**2)},add:function(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t[4]=e[4]+n[4],t[5]=e[5]+n[5],t[6]=e[6]+n[6],t[7]=e[7]+n[7],t[8]=e[8]+n[8],t[9]=e[9]+n[9],t[10]=e[10]+n[10],t[11]=e[11]+n[11],t[12]=e[12]+n[12],t[13]=e[13]+n[13],t[14]=e[14]+n[14],t[15]=e[15]+n[15],t},subtract:v,multiplyScalar:function(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*n,t[5]=e[5]*n,t[6]=e[6]*n,t[7]=e[7]*n,t[8]=e[8]*n,t[9]=e[9]*n,t[10]=e[10]*n,t[11]=e[11]*n,t[12]=e[12]*n,t[13]=e[13]*n,t[14]=e[14]*n,t[15]=e[15]*n,t},multiplyScalarAndAdd:function(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t[3]=e[3]+n[3]*r,t[4]=e[4]+n[4]*r,t[5]=e[5]+n[5]*r,t[6]=e[6]+n[6]*r,t[7]=e[7]+n[7]*r,t[8]=e[8]+n[8]*r,t[9]=e[9]+n[9]*r,t[10]=e[10]+n[10]*r,t[11]=e[11]+n[11]*r,t[12]=e[12]+n[12]*r,t[13]=e[13]+n[13]*r,t[14]=e[14]+n[14]*r,t[15]=e[15]+n[15]*r,t},exactEquals:F,equals:N,isOrthoNormal:T,mul:B,sub:E})},163:function(t,e,n){"use strict";n.d(e,"a",(function(){return u}));var r=n(79),i=n(86),s=n(81),o=(n(84),n(82),n(83),n(80));let a=class extends i.a{constructor(t){super(t),this.type=null}};Object(r.a)([Object(s.b)({readOnly:!0,json:{read:!1,write:!0}})],a.prototype,"type",void 0),a=Object(r.a)([Object(o.a)("esri.rest.support.ColorRamp")],a);const u=a},180:function(t,e,n){"use strict";n.d(e,"a",(function(){return Z})),n.d(e,"b",(function(){return K})),n.d(e,"c",(function(){return V})),n.d(e,"d",(function(){return W})),n.d(e,"e",(function(){return J})),n.d(e,"f",(function(){return L})),n.d(e,"g",(function(){return X})),n.d(e,"h",(function(){return C})),n.d(e,"i",(function(){return U})),n.d(e,"j",(function(){return H})),n.d(e,"k",(function(){return $})),n.d(e,"l",(function(){return k})),n.d(e,"m",(function(){return O})),n.d(e,"n",(function(){return Y})),n.d(e,"o",(function(){return q})),n.d(e,"p",(function(){return ht})),n.d(e,"q",(function(){return rt})),n.d(e,"r",(function(){return ot})),n.d(e,"s",(function(){return lt})),n.d(e,"t",(function(){return et})),n.d(e,"u",(function(){return nt})),n.d(e,"v",(function(){return b})),n.d(e,"w",(function(){return _})),n.d(e,"x",(function(){return ut})),n.d(e,"y",(function(){return tt})),n.d(e,"z",(function(){return at}));var r=n(88),i=n(87),s=n(85),o=n(98),a=n(261),u=n(334),c=n(188);function l(t,e){return t?e?4:3:e?3:2}const h=i.a.getLogger("esri.tasks.support.optimizedFeatureSet"),f={esriGeometryPoint:0,esriGeometryPolyline:2,esriGeometryPolygon:3,esriGeometryMultipoint:0},d=(t,e,n,r,i,s)=>{t[n]=i,t[n+1]=s},m=(t,e,n,r,i,s)=>{t[n]=i,t[n+1]=s,t[n+2]=e[r+2]},p=(t,e,n,r,i,s)=>{t[n]=i,t[n+1]=s,t[n+2]=e[r+3]},g=(t,e,n,r,i,s)=>{t[n]=i,t[n+1]=s,t[n+2]=e[r+2],t[n+3]=e[r+3]};function y(t,e,n,r){if(t){if(n)return e&&r?g:m;if(e&&r)return p}else if(e&&r)return m;return d}function b({scale:t,translate:e},n){return Math.round((n-e[0])/t[0])}function _({scale:t,translate:e},n){return Math.round((e[1]-n)/t[1])}function x({scale:t,translate:e},n){return n*t[0]+e[0]}function M({scale:t,translate:e},n){return e[1]-n*t[1]}function O(t,e,n){return t?e?n?N(t):I(t):n?v(t):w(t):null}function w(t){const e=t.coords;return{x:e[0],y:e[1]}}function j(t,e){return t.coords[0]=e.x,t.coords[1]=e.y,t}function I(t){const e=t.coords;return{x:e[0],y:e[1],z:e[2]}}function S(t,e){return t.coords[0]=e.x,t.coords[1]=e.y,t.coords[2]=e.z,t}function v(t){const e=t.coords;return{x:e[0],y:e[1],m:e[2]}}function F(t,e){return t.coords[0]=e.x,t.coords[1]=e.y,t.coords[2]=e.m,t}function N(t){const e=t.coords;return{x:e[0],y:e[1],z:e[2],m:e[3]}}function T(t,e){return t.coords[0]=e.x,t.coords[1]=e.y,t.coords[2]=e.z,t.coords[3]=e.m,t}function B(t,e){return t&&e?T:t?S:e?F:j}function E(t,e,n,r,i){const s=B(n,r);for(const o of e){const{geometry:e,attributes:n}=o;let r;e&&(r=s(new c.a,e)),t.push(new a.b(r,n,null,n[i]))}return t}function k(t,e,n){if(Object(s.k)(t))return null;const r=l(e,n),i=[];for(let s=0;s<t.coords.length;s+=r){const e=[];for(let n=0;n<r;n++)e.push(t.coords[s+n]);i.push(e)}return e?n?{points:i,hasZ:e,hasM:n}:{points:i,hasZ:e}:n?{points:i,hasM:n}:{points:i}}function z(t,e,n,r,i){const s=l(n,r);for(const o of e){const e=o.geometry,n=o.attributes;let r;e&&(r=R(new c.a,e,s)),t.push(new a.b(r,n,null,n[i]))}return t}function R(t,e,n=l(e.hasZ,e.hasM)){t.lengths[0]=e.points.length;const r=t.coords;let i=0;for(const s of e.points)for(let t=0;t<n;t++)r[i++]=s[t];return t}function q(t,e,n){if(!t)return null;const r=l(e,n),{coords:i,lengths:s}=t,o=[];let a=0;for(const u of s){const t=[];for(let e=0;e<u;e++){const e=[];for(let t=0;t<r;t++)e.push(i[a++]);t.push(e)}o.push(t)}return e?n?{paths:o,hasZ:e,hasM:n}:{paths:o,hasZ:e}:n?{paths:o,hasM:n}:{paths:o}}function P(t,e,n,r,i){const s=l(n,r);for(const o of e){const e=o.geometry,n=o.attributes;let r;e&&(r=C(new c.a,e,s)),t.push(new a.b(r,n,null,n[i]))}return t}function C(t,e,n=l(e.hasZ,e.hasM)){const{lengths:r,coords:i}=t;let s=0;for(const o of e.paths){for(const t of o)for(let e=0;e<n;e++)i[s++]=t[e];r.push(o.length)}return t}function Y(t,e,n){if(!t)return null;const r=l(e,n),{coords:i,lengths:s}=t,o=[];let a=0;for(const u of s){const t=[];for(let e=0;e<u;e++){const e=[];for(let t=0;t<r;t++)e.push(i[a++]);t.push(e)}o.push(t)}return e?n?{rings:o,hasZ:e,hasM:n}:{rings:o,hasZ:e}:n?{rings:o,hasM:n}:{rings:o}}function G(t,e,n,r,i){for(const o of e){const e=o.geometry,u=o.centroid,l=o.attributes;let h;e&&(h=X(new c.a,e,n,r)),Object(s.l)(u)?t.push(new a.b(h,l,j(new c.a,u),l[i])):t.push(new a.b(h,l,null,l[i]))}return t}function X(t,e,n=e.hasZ,r=e.hasM){return L(t,e.rings,n,r),t}function L(t,e,n,r){const i=l(n,r),{lengths:s,coords:o}=t;let a=0;s.length=o.length=0;for(const u of e){for(const t of u)for(let e=0;e<i;e++)o[a++]=t[e];s.push(u.length)}return t}const A=[],D=[];function Z(t,e,n,r,i){A[0]=t;const[s]=V(D,A,e,n,r,i);return A.length=D.length=0,s}function V(t,e,n,i,s,o){if(t.length=0,!n){for(const n of e){const e=n.attributes[o];t.push(new a.b(null,n.attributes,null,e))}return t}switch(n){case"esriGeometryPoint":return E(t,e,i,s,o);case"esriGeometryMultipoint":return z(t,e,i,s,o);case"esriGeometryPolyline":return P(t,e,i,s,o);case"esriGeometryPolygon":return G(t,e,i,s,o);default:h.error("convertToFeatureSet:unknown-geometry",new r.a(`Unable to parse unknown geometry type '${n}'`)),t.length=0}return t}function J(t,e,n,i,s,o){const a=t.length;switch(n){case"esriGeometryPoint":E(t,e,i,s,o);break;case"esriGeometryMultipoint":z(t,e,i,s,o);break;case"esriGeometryPolyline":P(t,e,i,s,o);break;case"esriGeometryPolygon":G(t,e,i,s,o);break;default:h.error("convertToFeatureSet:unknown-geometry",new r.a(`Unable to parse unknown geometry type '${n}'`))}for(let r=0;r<e.length;r++)t[r+a].geometryType=n,t[r+a].insertAfter=e[r].insertAfter,t[r+a].groupId=e[r].groupId;return t}function U(t,e,n,r){D[0]=t,Q(A,D,e,n,r);const i=A[0];return A.length=D.length=0,i}function W(t,e,n){if(Object(s.k)(t))return null;const i=new c.a;return"hasZ"in t&&null==e&&(e=t.hasZ),"hasM"in t&&null==n&&(n=t.hasM),Object(o.f)(t)?B(null!=e?e:null!=t.z,null!=n?n:null!=t.m)(i,t):Object(o.g)(t)?X(i,t,e,n):Object(o.h)(t)?C(i,t,l(e,n)):Object(o.e)(t)?R(i,t,l(e,n)):void h.error("convertFromGeometry:unknown-geometry",new r.a(`Unable to parse unknown geometry type '${t}'`))}function $(t,e,n,i){const o=t&&("coords"in t?t:t.geometry);if(Object(s.k)(o))return null;switch(e){case"esriGeometryPoint":{let t=w;return n&&i?t=N:n?t=I:i&&(t=v),t(o)}case"esriGeometryMultipoint":return k(o,n,i);case"esriGeometryPolyline":return q(o,n,i);case"esriGeometryPolygon":return Y(o,n,i);default:return void h.error("convertToGeometry:unknown-geometry",new r.a(`Unable to parse unknown geometry type '${e}'`))}}function Q(t,e,n,i,o){if(t.length=0,Object(s.k)(n))return function(t,e){for(const n of e)t.push({attributes:n.attributes});return t}(t,e);switch(n){case"esriGeometryPoint":return function(t,e,n,r){let i=w;n&&r?i=N:n?i=I:r&&(i=v);for(const o of e){const{geometry:e,attributes:n}=o,r=Object(s.l)(e)?i(e):null;t.push({attributes:n,geometry:r})}return t}(t,e,i,o);case"esriGeometryMultipoint":return function(t,e,n,r){for(const i of e){const{geometry:e,attributes:s}=i;let o;e&&(o=k(e,n,r)),t.push({attributes:s,geometry:o})}return t}(t,e,i,o);case"esriGeometryPolyline":return function(t,e,n,r){for(const i of e){const{geometry:e,attributes:o}=i;let a;Object(s.l)(e)&&(a=q(e,n,r)),t.push({attributes:o,geometry:a})}return t}(t,e,i,o);case"esriGeometryPolygon":return function(t,e,n,r){for(const i of e){const{geometry:e,attributes:o,centroid:a}=i;let u;if(Object(s.l)(e)&&(u=Y(e,n,r)),a){const e=w(a);t.push({attributes:o,centroid:e,geometry:u})}else t.push({attributes:o,geometry:u})}return t}(t,e,i,o);default:h.error("convertToFeatureSet:unknown-geometry",new r.a(`Unable to parse unknown geometry type '${n}'`))}return t}function H(t){const{objectIdFieldName:e,spatialReference:n,transform:r,fields:i,hasM:s,hasZ:o,features:a,geometryType:u,exceededTransferLimit:c,uniqueIdField:l,queryGeometry:h,queryGeometryType:f}=t,d={features:Q([],a,u,o,s),fields:i,geometryType:u,objectIdFieldName:e,spatialReference:n,uniqueIdField:l,queryGeometry:$(h,f,!1,!1)};return r&&(d.transform=r),c&&(d.exceededTransferLimit=c),s&&(d.hasM=s),o&&(d.hasZ=o),d}function K(t,e){const n=new u.a,{hasM:i,hasZ:s,features:o,objectIdFieldName:a,spatialReference:c,geometryType:l,exceededTransferLimit:f,transform:d,fields:m}=t;return m&&(n.fields=m),n.geometryType=l,n.objectIdFieldName=a||e,n.spatialReference=c,n.objectIdFieldName?(o&&V(n.features,o,l,s,i,n.objectIdFieldName),f&&(n.exceededTransferLimit=f),i&&(n.hasM=i),s&&(n.hasZ=s),d&&(n.transform=d),n):(h.error(new r.a("optimized-features:invalid-objectIdFieldName","objectIdFieldName is missing")),n)}function tt(t){const{transform:e,features:n,hasM:r,hasZ:i}=t;if(!e)return t;for(const o of n)Object(s.l)(o.geometry)&&at(o.geometry,o.geometry,r,i,e),o.centroid&&at(o.centroid,o.centroid,r,i,e);return t.transform=null,t}function et(t,e){const{geometryType:n,features:r,hasM:i,hasZ:s}=e;if(!t)return e;for(let o=0;o<r.length;o++){const e=r[o],a=e.weakClone();a.geometry=new c.a,nt(a.geometry,e.geometry,i,s,n,t),e.centroid&&(a.centroid=new c.a,nt(a.centroid,e.centroid,i,s,"esriGeometryPoint",t)),r[o]=a}return e.transform=t,e}function nt(t,e,n,r,i,o,a=n,u=r){if(t.lengths.length&&(t.lengths.length=0),t.coords.length&&(t.coords.length=0),Object(s.k)(e)||!e.coords.length)return null;const c=f[i],{coords:h,lengths:d}=e,m=l(n,r),p=l(n&&a,r&&u),g=y(n,r,a,u);if(!d.length)return g(t.coords,h,0,0,b(o,h[0]),_(o,h[1])),t.lengths.length&&(t.lengths.length=0),t.coords.length=m,t;let x,M,O,w,j=0,I=0,S=I;for(const s of d){if(s<c)continue;let e=0;I=S,O=x=b(o,h[j]),w=M=_(o,h[j+1]),g(t.coords,h,I,j,O,w),e++,j+=m,I+=p;for(let n=1;n<s;n++,j+=m)O=b(o,h[j]),w=_(o,h[j+1]),O===x&&w===M||(g(t.coords,h,I,j,O-x,w-M),I+=p,e++,x=O,M=w);e>=c&&(t.lengths.push(e),S=I)}return t.coords.length=S,t.coords.length?t:null}function rt(t,e,n,r,i,s,o=n,a=r){if(t.lengths.length&&(t.lengths.length=0),t.coords.length&&(t.coords.length=0),!e||!e.coords.length)return null;const u=f[i],{coords:c,lengths:h}=e,d=l(n,r),m=l(n&&o,r&&a),p=y(n,r,o,a);if(!h.length)return p(t.coords,c,0,0,c[0],c[1]),t.lengths.length&&(t.lengths.length=0),t.coords.length=d,t;let g=0;const b=s*s;for(const l of h){if(l<u){g+=l*d;continue}const e=t.coords.length/m,n=g,r=g+(l-1)*d;p(t.coords,c,t.coords.length,n,c[n],c[n+1]),st(t.coords,c,d,b,p,n,r),p(t.coords,c,t.coords.length,r,c[r],c[r+1]);const i=t.coords.length/m-e;i>=u?t.lengths.push(i):t.coords.length=e*m,g+=l*d}return t.coords.length?t:null}function it(t,e,n,r){const i=t[e],s=t[e+1],o=t[n],a=t[n+1],u=t[r],c=t[r+1];let l=o,h=a,f=u-l,d=c-h;if(0!==f||0!==d){const t=((i-l)*f+(s-h)*d)/(f*f+d*d);t>1?(l=u,h=c):t>0&&(l+=f*t,h+=d*t)}return f=i-l,d=s-h,f*f+d*d}function st(t,e,n,r,i,s,o){let a,u=r,c=0;for(let l=s+n;l<o;l+=n)a=it(e,l,s,o),a>u&&(c=l,u=a);u>r&&(c-s>n&&st(t,e,n,r,i,s,c),i(t,e,t.length,c,e[c],e[c+1]),o-c>n&&st(t,e,n,r,i,c,o))}function ot(t,e,n,r){if(Object(s.k)(e)||!e.coords||!e.coords.length)return null;const i=l(n,r);let o=Number.POSITIVE_INFINITY,a=Number.POSITIVE_INFINITY,u=Number.NEGATIVE_INFINITY,c=Number.NEGATIVE_INFINITY;if(e&&e.coords){const t=e.coords;for(let e=0;e<t.length;e+=i){const n=t[e],r=t[e+1];o=Math.min(o,n),u=Math.max(u,n),a=Math.min(a,r),c=Math.max(c,r)}}return t[0]=o,t[1]=a,t[2]=u,t[3]=c,t}function at(t,e,n,r,i){const{coords:s,lengths:o}=e,a=n?r?g:m:r?m:d,u=l(n,r);if(!s.length)return t!==e&&(t.lengths.length=0,t.coords.length=0),t;if(!o.length)return a(t.coords,s,0,0,x(i,s[0]),M(i,s[1])),t!==e&&(t.lengths.length=0,t.coords.length=u),t;const[c,h]=i.scale;let f=0;for(let l=0;l<o.length;l++){const e=o[l];t.lengths[l]=e;let n=x(i,s[f]),r=M(i,s[f+1]);a(t.coords,s,f,f,n,r),f+=u;for(let i=1;i<e;i++,f+=u)n+=s[f]*c,r-=s[f+1]*h,a(t.coords,s,f,f,n,r)}return t!==e&&(t.lengths.length=o.length,t.coords.length=s.length),t}function ut(t,e,n,r,i,s){const o=l(n,r),a=y(n,r,i,s),u=e.coords;t.coords.length=0,t.lengths.length=0,t.lengths.push(...e.lengths);for(let c=0;c<u.length;c+=o)a(t.coords,u,t.coords.length,c,u[c],u[c+1]);return t}function ct(t,e,n,r){let i=0,s=t[r*e],o=t[r*(e+1)];for(let a=1;a<n;a++){const n=s+t[r*(e+a)],u=o+t[r*(e+a)+1],c=(n-s)*(u+o);s=n,o=u,i+=c}return.5*i}function lt(t,e){const{coords:n,lengths:r}=t;let i=0,s=0;for(let o=0;o<r.length;o++)s+=ct(n,i,r[o],e),i+=o;return Math.abs(s)}function ht(t,e){if(Object(s.k)(t))return null;const n=t.clone(),r=t.coords,i=t.lengths;let o=0;for(let s=0;s<i.length;s++){const t=i[s];let a=r[e*o],u=r[e*o+1];for(let i=1;i<t;i++){const t=a+r[e*(o+i)],s=u+r[e*(o+i)+1];n.coords[e*(o+i)]=t,n.coords[e*(o+i)+1]=s,a=t,u=s}o+=t}return n}},188:function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));class r{constructor(t=[],e=[],n=!1){this.lengths=null!=t?t:[],this.coords=null!=e?e:[],this.hasIndeterminateRingOrder=n}get isPoint(){return 0===this.lengths.length}get maxLength(){return Math.max(...this.lengths)}get size(){return this.lengths.reduce(((t,e)=>t+e))}forEachVertex(t){let e=0;this.lengths.length||t(this.coords[0],this.coords[1]);for(let n=0;n<this.lengths.length;n++){const r=this.lengths[n];for(let n=0;n<r;n++)t(this.coords[2*(n+e)],this.coords[2*(n+e)+1]);e+=r}}clone(t){return t?(t.set(this.coords),new r(this.lengths.slice(),t,this.hasIndeterminateRingOrder)):new r(this.lengths.slice(),this.coords.slice(),this.hasIndeterminateRingOrder)}}},194:function(t,e){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(r){"object"===typeof window&&(n=window)}t.exports=n},200:function(t,e,n){"use strict";n.d(e,"a",(function(){return d}));var r,i=n(79),s=n(103),o=n(89),a=n(81),u=n(83),c=n(95),l=n(80),h=n(163);let f=r=class extends h.a{constructor(t){super(t),this.algorithm=null,this.fromColor=null,this.toColor=null,this.type="algorithmic"}clone(){return new r({fromColor:Object(o.a)(this.fromColor),toColor:Object(o.a)(this.toColor),algorithm:this.algorithm})}};Object(i.a)([Object(c.a)({esriCIELabAlgorithm:"cie-lab",esriHSVAlgorithm:"hsv",esriLabLChAlgorithm:"lab-lch"})],f.prototype,"algorithm",void 0),Object(i.a)([Object(a.b)({type:s.a,json:{type:[u.a],write:!0}})],f.prototype,"fromColor",void 0),Object(i.a)([Object(a.b)({type:s.a,json:{type:[u.a],write:!0}})],f.prototype,"toColor",void 0),Object(i.a)([Object(a.b)({type:["algorithmic"]})],f.prototype,"type",void 0),f=r=Object(i.a)([Object(l.a)("esri.rest.support.AlgorithmicColorRamp")],f);const d=f},212:function(t,e,n){"use strict";n.d(e,"a",(function(){return h})),n.d(e,"b",(function(){return s})),n.d(e,"c",(function(){return o})),n.d(e,"d",(function(){return l})),n.d(e,"e",(function(){return f}));n(201),n(162);var r=n(85),i=n(217);n(168);function s(t,e,n={}){return a(t,e,n,u)}function o(t,e,n={}){return a(t,e,n,c)}function a(t,e,n={},s){let o=null;const a=n.once?(t,n)=>{s(t)&&(Object(r.s)(o),e(t,n))}:(t,n)=>{s(t)&&e(t,n)};if(o=Object(i.e)(t,a,n.sync,n.equals),n.initial){const e=t();a(e,e)}return o}function u(t){return!0}function c(t){return!!t}const l={sync:!0},h={initial:!0},f={sync:!0,initial:!0}},221:function(t,e,n){"use strict";(function(t){n.d(e,"a",(function(){return s})),n.d(e,"b",(function(){return r})),n.d(e,"c",(function(){return i}));var r="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof t?t:"undefined"!=typeof self?self:{};function i(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function s(t){throw new Error('Could not dynamically require "'+t+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}}).call(this,n(194))},223:function(t,e,n){"use strict";n.d(e,"a",(function(){return z})),n.d(e,"b",(function(){return R})),n.d(e,"c",(function(){return f})),n.d(e,"d",(function(){return y})),n.d(e,"e",(function(){return x})),n.d(e,"f",(function(){return s})),n.d(e,"g",(function(){return g})),n.d(e,"h",(function(){return F})),n.d(e,"i",(function(){return k})),n.d(e,"j",(function(){return a})),n.d(e,"k",(function(){return l})),n.d(e,"l",(function(){return h})),n.d(e,"m",(function(){return u})),n.d(e,"n",(function(){return c})),n.d(e,"o",(function(){return T})),n.d(e,"p",(function(){return o})),n.d(e,"q",(function(){return j})),n.d(e,"r",(function(){return M})),n.d(e,"s",(function(){return E})),n.d(e,"t",(function(){return _})),n.d(e,"u",(function(){return O})),n.d(e,"v",(function(){return w})),n.d(e,"w",(function(){return v})),n.d(e,"x",(function(){return S})),n.d(e,"y",(function(){return I})),n.d(e,"z",(function(){return b})),n.d(e,"A",(function(){return N}));var r=n(85),i=(n(96),n(118));function s(t=R){return[t[0],t[1],t[2],t[3],t[4],t[5]]}function o(t,e,n,r,i,o,a=s()){return a[0]=t,a[1]=e,a[2]=n,a[3]=r,a[4]=i,a[5]=o,a}function a(t,e){t[0]=Math.min(t[0],e[0]),t[1]=Math.min(t[1],e[1]),t[2]=Math.min(t[2],e[2]),t[3]=Math.max(t[3],e[3]),t[4]=Math.max(t[4],e[4]),t[5]=Math.max(t[5],e[5])}function u(t,e){t[0]=Math.min(t[0],e[0]),t[1]=Math.min(t[1],e[1]),t[3]=Math.max(t[3],e[2]),t[4]=Math.max(t[4],e[3])}function c(t,e){t[0]=Math.min(t[0],e[0]),t[1]=Math.min(t[1],e[1]),t[2]=Math.min(t[2],e[2]),t[3]=Math.max(t[3],e[0]),t[4]=Math.max(t[4],e[1]),t[5]=Math.max(t[5],e[2])}function l(t,e,n=0,r=e.length/3){let i=t[0],s=t[1],o=t[2],a=t[3],u=t[4],c=t[5];for(let l=0;l<r;l++)i=Math.min(i,e[n+3*l]),s=Math.min(s,e[n+3*l+1]),o=Math.min(o,e[n+3*l+2]),a=Math.max(a,e[n+3*l]),u=Math.max(u,e[n+3*l+1]),c=Math.max(c,e[n+3*l+2]);t[0]=i,t[1]=s,t[2]=o,t[3]=a,t[4]=u,t[5]=c}function h(t,e,n){const r=e.length;let i=t[0],s=t[1],o=t[2],a=t[3],u=t[4],c=t[5];if(n)for(let l=0;l<r;l++){const t=e[l];i=Math.min(i,t[0]),s=Math.min(s,t[1]),o=Math.min(o,t[2]),a=Math.max(a,t[0]),u=Math.max(u,t[1]),c=Math.max(c,t[2])}else for(let l=0;l<r;l++){const t=e[l];i=Math.min(i,t[0]),s=Math.min(s,t[1]),a=Math.max(a,t[0]),u=Math.max(u,t[1])}t[0]=i,t[1]=s,t[2]=o,t[3]=a,t[4]=u,t[5]=c}function f(t){for(let e=0;e<6;e++)if(!isFinite(t[e]))return!1;return!0}function d(t){return t[0]>=t[3]?0:t[3]-t[0]}function m(t){return t[1]>=t[4]?0:t[4]-t[1]}function p(t){return t[2]>=t[5]?0:t[5]-t[2]}function g(t){const e=d(t),n=p(t),r=m(t);return Math.sqrt(e*e+n*n+r*r)}function y(t,e=[0,0,0]){return e[0]=t[0]+d(t)/2,e[1]=t[1]+m(t)/2,e[2]=t[2]+p(t)/2,e}function b(t,e=[0,0,0]){return e[0]=d(t),e[1]=m(t),e[2]=p(t),e}function _(t){return Math.max(d(t),p(t),m(t))}function x(t,e){return e[0]>=t[0]&&e[1]>=t[1]&&e[2]>=t[2]&&e[0]<=t[3]&&e[1]<=t[4]&&e[2]<=t[5]}function M(t,e){return!!Object(r.k)(e)||function(t,e){return Math.max(e[0],t[0])<=Math.min(e[3],t[3])&&Math.max(e[1],t[1])<=Math.min(e[4],t[4])&&Math.max(e[2],t[2])<=Math.min(e[5],t[5])}(t,e)}function O(t,e,n,r,i=t){return i[0]=t[0]+e,i[1]=t[1]+n,i[2]=t[2]+r,i[3]=t[3]+e,i[4]=t[4]+n,i[5]=t[5]+r,i}function w(t,e,n=t){const r=t[0]+d(t)/2,i=t[1]+m(t)/2,s=t[2]+p(t)/2;return n[0]=r+(t[0]-r)*e,n[1]=i+(t[1]-i)*e,n[2]=s+(t[2]-s)*e,n[3]=r+(t[3]-r)*e,n[4]=i+(t[4]-i)*e,n[5]=s+(t[5]-s)*e,n}function j(t,e){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}function I(t,e,n=t){return n[0]=e[0],n[1]=e[1],n[2]=e[2],n!==t&&(n[3]=t[3],n[4]=t[4],n[5]=t[5]),n}function S(t,e,n=t){return n[3]=e[0],n[4]=e[1],n[5]=e[2],n!==t&&(n[0]=t[0],n[1]=t[1],n[2]=t[2]),t}function v(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t}function F(t){return t?v(t,z):s(z)}function N(t,e){return e||(e=Object(i.l)()),e[0]=t[0],e[1]=t[1],e[2]=t[3],e[3]=t[4],e}function T(t,e){return t[0]=e[0],t[1]=e[1],t[2]=Number.NEGATIVE_INFINITY,t[3]=e[2],t[4]=e[3],t[5]=Number.POSITIVE_INFINITY,t}function B(t){return 6===t.length}function E(t){return 0===d(t)&&0===m(t)&&0===p(t)}function k(t,e,n){if(Object(r.k)(t)||Object(r.k)(e))return t===e;if(!B(t)||!B(e))return!1;if(n){for(let r=0;r<t.length;r++)if(!n(t[r],e[r]))return!1}else for(let r=0;r<t.length;r++)if(t[r]!==e[r])return!1;return!0}const z=[1/0,1/0,1/0,-1/0,-1/0,-1/0],R=[0,0,0,0,0,0];s()},239:function(t,e,n){"use strict";n.d(e,"a",(function(){return s})),n.d(e,"b",(function(){return o})),n.d(e,"c",(function(){return a}));var r=n(85),i=n(215);const s=-3;class o{constructor(t,e,n){this._namespace=t,this._storage=e,this._removeFunc=!1,this._hit=0,this._miss=0,this._storage.register(this),this._namespace+=":",n&&(this._storage.registerRemoveFunc(this._namespace,n),this._removeFunc=!0)}destroy(){this._storage.clear(this._namespace),this._removeFunc&&this._storage.deregisterRemoveFunc(this._namespace),this._storage.deregister(this),this._storage=null}get namespace(){return this._namespace.slice(0,-1)}get hitRate(){return this._hit/(this._hit+this._miss)}get size(){return this._storage.size}get maxSize(){return this._storage.maxSize}resetHitRate(){this._hit=this._miss=0}put(t,e,n,r=0){this._storage.put(this._namespace+t,e,n,r)}get(t){const e=this._storage.get(this._namespace+t);return void 0===e?++this._miss:++this._hit,e}pop(t){const e=this._storage.pop(this._namespace+t);return void 0===e?++this._miss:++this._hit,e}updateSize(t,e,n){this._storage.updateSize(this._namespace+t,e,n)}clear(){this._storage.clear(this._namespace)}clearAll(){this._storage.clearAll()}getStats(){return this._storage.getStats()}resetStats(){this._storage.resetStats()}}class a{constructor(t=10485760){this._maxSize=t,this._db=new Map,this._size=0,this._hit=0,this._miss=0,this._removeFuncs=new i.a,this._users=new i.a}destroy(){this.clearAll(),this._removeFuncs.clear(),this._users.clear(),this._db=null}register(t){this._users.push(t)}deregister(t){this._users.removeUnordered(t)}registerRemoveFunc(t,e){this._removeFuncs.push([t,e])}deregisterRemoveFunc(t){this._removeFuncs.filterInPlace((e=>e[0]!==t))}get size(){return this._size}get maxSize(){return this._maxSize}set maxSize(t){this._maxSize=Math.max(t,0),this._checkSizeLimit()}put(t,e,n,r){const i=this._db.get(t);if(i&&(this._size-=i.size,this._db.delete(t),i.entry!==e&&this._notifyRemove(t,i.entry,0)),n>this._maxSize)return void this._notifyRemove(t,e,0);if(void 0===e)return void console.warn("Refusing to cache undefined entry ");if(!n||n<0)return void console.warn("Refusing to cache entry with invalid size "+n);const o=1+Math.max(r,s)-s;this._db.set(t,{entry:e,size:n,lifetime:o,lives:o}),this._size+=n,this._checkSizeLimit()}updateSize(t,e,n){const i=this._db.get(t);if(i&&i.entry===e){for(this._size-=i.size;n>this._maxSize;){const i=this._notifyRemove(t,e,1);if(!(Object(r.l)(i)&&i>0))return void this._db.delete(t);n=i}i.size=n,this._size+=n,this._checkSizeLimit()}}pop(t){const e=this._db.get(t);if(e)return this._size-=e.size,this._db.delete(t),++this._hit,e.entry;++this._miss}get(t){const e=this._db.get(t);if(void 0!==e)return this._db.delete(t),e.lives=e.lifetime,this._db.set(t,e),++this._hit,e.entry;++this._miss}getStats(){const t={Size:Math.round(this._size/1048576)+"/"+Math.round(this._maxSize/1048576)+"MB","Hit rate":Math.round(100*this._getHitRate())+"%",Entries:this._db.size.toString()},e={},n=new Array;this._db.forEach(((t,r)=>{const i=t.lifetime;n[i]=(n[i]||0)+t.size,this._users.forAll((n=>{const i=n.namespace;if(r.startsWith(i)){const n=e[i]||0;e[i]=n+t.size}}))}));const r={};this._users.forAll((t=>{const n=t.namespace;if(!isNaN(t.hitRate)&&t.hitRate>0){const i=e[n]||0;e[n]=i,r[n]=Math.round(100*t.hitRate)+"%"}else r[n]="0%"}));const i=Object.keys(e);i.sort(((t,n)=>e[n]-e[t])),i.forEach((n=>t[n]=Math.round(e[n]/2**20)+"MB / "+r[n]));for(let o=n.length-1;o>=0;--o){const e=n[o];e&&(t["Priority "+(o+s-1)]=Math.round(e/this.size*100)+"%")}return t}resetStats(){this._hit=this._miss=0,this._users.forAll((t=>t.resetHitRate()))}clear(t){this._db.forEach(((e,n)=>{n.startsWith(t)&&(this._size-=e.size,this._db.delete(n),this._notifyRemove(n,e.entry,0))}))}clearAll(){this._db.forEach(((t,e)=>this._notifyRemove(e,t.entry,0))),this._size=0,this._db.clear()}_getHitRate(){return this._hit/(this._hit+this._miss)}_notifyRemove(t,e,n){let r;return this._removeFuncs.some((i=>{if(t.startsWith(i[0])){const t=i[1](e,n);return"number"==typeof t&&(r=t),!0}return!1})),r}_checkSizeLimit(){if(!(this._size<=this._maxSize))for(const[t,e]of this._db){if(this._db.delete(t),e.lives<=1){this._size-=e.size;const n=this._notifyRemove(t,e.entry,1);Object(r.l)(n)&&n>0&&(this._size+=n,e.lives=e.lifetime,e.size=n,this._db.set(t,e))}else--e.lives,this._db.set(t,e);if(this._size<=.9*this.maxSize)return}}}},244:function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));var r=n(105);function i(t){return"oid"===t.type||"esriFieldTypeOID"===t.type}function s(t){return"global-id"===t.type||"esriFieldTypeGlobalID"===t.type}class o{constructor(t){if(this.fields=t,this._fieldsMap=new Map,this._dateFieldsSet=new Set,this._numericFieldsSet=new Set,this.dateFields=[],this.numericFields=[],this._requiredFields=null,!t)return;const e=[];for(const o of t){const t=o&&o.name;if(t){const u=a(t);this._fieldsMap.set(t,o),this._fieldsMap.set(u,o),e.push(u),"date"===(n=o).type||"esriFieldTypeDate"===n.type?(this.dateFields.push(o),this._dateFieldsSet.add(o)):Object(r.u)(o)&&(this._numericFieldsSet.add(o),this.numericFields.push(o)),i(o)||s(o)||(o.editable=null==o.editable||!!o.editable,o.nullable=null==o.nullable||!!o.nullable)}}var n;e.sort(),this.uid=e.join(",")}destroy(){this._fieldsMap.clear()}get requiredFields(){if(!this._requiredFields){this._requiredFields=[];for(const t of this.fields)i(t)||s(t)||t.nullable||void 0!==Object(r.r)(t)||this._requiredFields.push(t)}return this._requiredFields}has(t){return null!=this.get(t)}get(t){return null!=t?this._fieldsMap.get(t)||this._fieldsMap.get(a(t)):void 0}isDateField(t){return this._dateFieldsSet.has(this.get(t))}isNumericField(t){return this._numericFieldsSet.has(this.get(t))}normalizeFieldName(t){const e=this.get(t);if(e)return e.name}}function a(t){return t.toLowerCase().trim()}},247:function(t,e,n){"use strict";n.d(e,"a",(function(){return d}));var r=n(79),i=n(103),s=n(90),o=n(86),a=n(81),u=(n(84),n(82),n(83),n(93)),c=n(80);const l=new s.a({esriSMS:"simple-marker",esriPMS:"picture-marker",esriSLS:"simple-line",esriSFS:"simple-fill",esriPFS:"picture-fill",esriTS:"text",esriSHD:"shield-label-symbol",PointSymbol3D:"point-3d",LineSymbol3D:"line-3d",PolygonSymbol3D:"polygon-3d",WebStyleSymbol:"web-style",MeshSymbol3D:"mesh-3d",LabelSymbol3D:"label-3d",CIMSymbolReference:"cim"});let h=0,f=class extends o.a{constructor(t){super(t),this.id="sym"+h++,this.type=null}set color(t){this._set("color",t)}readColor(t){return t&&null!=t[0]?[t[0],t[1],t[2],t[3]/255]:t}async collectRequiredFields(t,e){}hash(){return JSON.stringify(this.toJSON())}clone(){}};Object(r.a)([Object(a.b)({type:l.apiValues,readOnly:!0,json:{read:!1,write:{ignoreOrigin:!0,writer:l.write}}})],f.prototype,"type",void 0),Object(r.a)([Object(a.b)({type:i.a,value:new i.a([0,0,0,1]),json:{write:{allowNull:!0}}})],f.prototype,"color",null),Object(r.a)([Object(u.a)("color")],f.prototype,"readColor",null),f=Object(r.a)([Object(c.a)("esri.symbols.Symbol")],f);const d=f},258:function(t,e,n){"use strict";n.d(e,"a",(function(){return O})),n.d(e,"b",(function(){return w})),n.d(e,"c",(function(){return _}));var r=n(146),i=n(88),s=n(87),o=n(85),a=n(125),u=n(134),c=n(266),l=n(110),h=n(164),f=(n(97),n(102)),d=n(100),m=n(98);async function p(t,e,n){const r="string"==typeof t?Object(d.K)(t):t,i=e[0].spatialReference,s=Object(m.c)(e[0]),o={...n,query:{...r.query,f:"json",sr:i.wkid?i.wkid:JSON.stringify(i),geometries:JSON.stringify((a=e,{geometryType:Object(m.c)(a[0]),geometries:a.map((t=>t.toJSON()))}))}};var a;return function(t,e,n){const r=Object(m.b)(e);return t.map((t=>{const e=r.fromJSON(t);return e.spatialReference=n,e}))}((await Object(f.default)(r.path+"/simplify",o)).data,s,i)}const g=s.a.getLogger("esri.geometry.support.normalizeUtils");function y(t){return"polygon"===t[0].type}function b(t){return"polyline"===t[0].type}function _(t,e){if(!(t instanceof u.a||t instanceof a.a)){const t="straightLineDensify: the input geometry is neither polyline nor polygon";throw g.error(t),new i.a(t)}const n=Object(c.b)(t),r=[];for(const i of n){const t=[];r.push(t),t.push([i[0][0],i[0][1]]);for(let n=0;n<i.length-1;n++){const r=i[n][0],s=i[n][1],o=i[n+1][0],a=i[n+1][1],u=Math.sqrt((o-r)*(o-r)+(a-s)*(a-s)),c=(a-s)/u,l=(o-r)/u,h=u/e;if(h>1){for(let a=1;a<=h-1;a++){const n=a*e,i=l*n+r,o=c*n+s;t.push([i,o])}const n=(u+Math.floor(h-1)*e)/2,i=l*n+r,o=c*n+s;t.push([i,o])}t.push([o,a])}}return function(t){return"polygon"===t.type}(t)?new a.a({rings:r,spatialReference:t.spatialReference}):new u.a({paths:r,spatialReference:t.spatialReference})}function x(t,e,n){if(e){const e=_(t,1e6);t=Object(h.e)(e,!0)}return n&&(t=Object(c.e)(t,n)),t}function M(t,e,n){if(Array.isArray(t)){const r=t[0];if(r>e){const n=Object(c.d)(r,e);t[0]=r+n*(-2*e)}else if(r<n){const e=Object(c.d)(r,n);t[0]=r+e*(-2*n)}}else{const r=t.x;if(r>e){const n=Object(c.d)(r,e);t=t.clone().offset(n*(-2*e),0)}else if(r<n){const e=Object(c.d)(r,n);t=t.clone().offset(e*(-2*n),0)}}return t}async function O(t,e,n){var i;if(!Array.isArray(t))return O([t],e);const s=null!=(i=null==e?void 0:e.url)?i:r.a.geometryServiceUrl;let g,_,w,j,I,S,v,F,N=0;const T=[],B=[];for(const r of t)if(Object(o.k)(r))B.push(r);else if(g||(g=r.spatialReference,_=Object(l.e)(g),w=g.isWebMercator,S=w?102100:4326,j=c.a[S].maxX,I=c.a[S].minX,v=c.a[S].plus180Line,F=c.a[S].minus180Line),_)if("mesh"===r.type)B.push(r);else if("point"===r.type)B.push(M(r.clone(),j,I));else if("multipoint"===r.type){const t=r.clone();t.points=t.points.map((t=>M(t,j,I))),B.push(t)}else if("extent"===r.type){const t=r.clone()._normalize(!1,!1,_);B.push(t.rings?new a.a(t):t)}else if(r.extent){const t=r.extent,e=Object(c.d)(t.xmin,I)*(2*j);let n=0===e?r.clone():Object(c.e)(r.clone(),e);t.offset(e,0),t.intersects(v)&&t.xmax!==j?(N=t.xmax>N?t.xmax:N,n=x(n,w),T.push(n),B.push("cut")):t.intersects(F)&&t.xmin!==I?(N=t.xmax*(2*j)>N?t.xmax*(2*j):N,n=x(n,w,360),T.push(n),B.push("cut")):B.push(n)}else B.push(r.clone());else B.push(r);let E=Object(c.d)(N,j),k=-90;const z=E,R=new u.a;for(;E>0;){const t=360*E-180;R.addPath([[t,k],[t,-1*k]]),k*=-1,E--}if(T.length>0&&z>0){const e=function(t,e){let n=-1;for(let r=0;r<e.cutIndexes.length;r++){const i=e.cutIndexes[r],s=e.geometries[r],o=Object(c.b)(s);for(let t=0;t<o.length;t++){const e=o[t];e.some((n=>{if(n[0]<180)return!0;{let n=0;for(let t=0;t<e.length;t++){const r=e[t][0];n=r>n?r:n}n=Number(n.toFixed(9));const r=-360*Object(c.d)(n,180);for(let i=0;i<e.length;i++){const e=s.getPoint(t,i);s.setPoint(t,i,e.clone().offset(r,0))}return!0}}))}if(i===n){if(y(t))for(const e of Object(c.b)(s))t[i]=t[i].addRing(e);else if(b(t))for(const e of Object(c.b)(s))t[i]=t[i].addPath(e)}else n=i,t[i]=s}return t}(T,await async function(t,e,n,r){const i="string"==typeof t?Object(d.K)(t):t,s=e[0].spatialReference,o={...r,query:{...i.query,f:"json",sr:JSON.stringify(s),target:JSON.stringify({geometryType:Object(m.c)(e[0]),geometries:e}),cutter:JSON.stringify(n)}},a=await Object(f.default)(i.path+"/cut",o),{cutIndexes:u,geometries:c=[]}=a.data;return{cutIndexes:u,geometries:c.map((t=>{const e=Object(m.a)(t);return e.spatialReference=s,e}))}}(s,T,R,n)),r=[],i=[];for(let n=0;n<B.length;n++){const s=B[n];if("cut"!==s)i.push(s);else{const s=e.shift(),a=t[n];Object(o.l)(a)&&"polygon"===a.type&&a.rings&&a.rings.length>1&&s.rings.length>=a.rings.length?(r.push(s),i.push("simplify")):i.push(w?Object(h.b)(s):s)}}if(!r.length)return i;const a=await p(s,r,n),u=[];for(let t=0;t<i.length;t++){const e=i[t];"simplify"!==e?u.push(e):u.push(w?Object(h.b)(a.shift()):a.shift())}return u}const q=[];for(let r=0;r<B.length;r++){const t=B[r];if("cut"!==t)q.push(t);else{const t=T.shift();q.push(!0===w?Object(h.b)(t):t)}}return Promise.resolve(q)}function w(t,e){const n=Object(l.e)(e);if(n){const[e,r]=n.valid,i=r-e;if(t<e)for(;t<e;)t+=i;if(t>r)for(;t>r;)t-=i}return t}},261:function(t,e,n){"use strict";n.d(e,"a",(function(){return o})),n.d(e,"b",(function(){return i})),n.d(e,"c",(function(){return s}));var r=n(85);class i{constructor(t=null,e={},n,r){this.geometry=t,this.attributes=e,this.centroid=n,this.objectId=r,this.displayId=0,this.geohashX=0,this.geohashY=0}weakClone(){const t=new i(this.geometry,this.attributes,this.centroid,this.objectId);return t.displayId=this.displayId,t.geohashX=this.geohashX,t.geohashY=this.geohashY,t}}function s(t){return!(Object(r.k)(t.geometry)||!t.geometry.coords||!t.geometry.coords.length)}class o extends i{}},266:function(t,e,n){"use strict";n.d(e,"a",(function(){return o})),n.d(e,"b",(function(){return c})),n.d(e,"c",(function(){return l})),n.d(e,"d",(function(){return a})),n.d(e,"e",(function(){return u}));var r=n(134),i=n(94),s=n(98);const o={102100:{maxX:20037508.342788905,minX:-20037508.342788905,plus180Line:new r.a({paths:[[[20037508.342788905,-20037508.342788905],[20037508.342788905,20037508.342788905]]],spatialReference:i.a.WebMercator}),minus180Line:new r.a({paths:[[[-20037508.342788905,-20037508.342788905],[-20037508.342788905,20037508.342788905]]],spatialReference:i.a.WebMercator})},4326:{maxX:180,minX:-180,plus180Line:new r.a({paths:[[[180,-180],[180,180]]],spatialReference:i.a.WGS84}),minus180Line:new r.a({paths:[[[-180,-180],[-180,180]]],spatialReference:i.a.WGS84})}};function a(t,e){return Math.ceil((t-e)/(2*e))}function u(t,e){const n=c(t);for(const r of n)for(const t of r)t[0]+=e;return t}function c(t){return Object(s.g)(t)?t.rings:t.paths}function l(t){const e=(null==t?void 0:t.isWebMercator)?102100:4326;return[o[e].minX,o[e].maxX]}},269:function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));var r=n(85),i=n(114),s=n(110);function o(t,e,n){if(Object(r.k)(e)||Object(r.k)(n)||n.vcsWkid||Object(s.d)(e,n))return null;const o=Object(i.f)(e)/Object(i.f)(n);if(1===o)return null;switch(t){case"point":case"esriGeometryPoint":return t=>function(t,e){t&&null!=t.z&&(t.z*=e)}(t,o);case"polyline":case"esriGeometryPolyline":return t=>function(t,e){if(t)for(const n of t.paths)for(const t of n)t.length>2&&(t[2]*=e)}(t,o);case"polygon":case"esriGeometryPolygon":return t=>function(t,e){if(t)for(const n of t.rings)for(const t of n)t.length>2&&(t[2]*=e)}(t,o);case"multipoint":case"esriGeometryMultipoint":return t=>function(t,e){if(t)for(const n of t.points)n.length>2&&(n[2]*=e)}(t,o);case"extent":case"esriGeometryExtent":return t=>function(t,e){t&&null!=t.zmin&&null!=t.zmax&&(t.zmin*=e,t.zmax*=e)}(t,o);default:return null}}},274:function(t,e,n){"use strict";n.d(e,"a",(function(){return r})),n.d(e,"b",(function(){return i})),n.d(e,"c",(function(){return s})),n.d(e,"d",(function(){return a})),n.d(e,"e",(function(){return o})),n.d(e,"f",(function(){return u})),n.d(e,"g",(function(){return c})),n.d(e,"h",(function(){return h})),n.d(e,"i",(function(){return l}));const r=[252,146,31,255],i=[153,153,153,255],s={type:"esriSMS",style:"esriSMSCircle",size:6,color:r,outline:{type:"esriSLS",style:"esriSLSSolid",width:.75,color:[153,153,153,255]}},o={type:"esriSLS",style:"esriSLSSolid",width:.75,color:r},a={type:"esriSFS",style:"esriSFSSolid",color:[252,146,31,196],outline:{type:"esriSLS",style:"esriSLSSolid",width:.75,color:[255,255,255,191]}},u={type:"esriTS",color:[255,255,255,255],font:{family:"arial-unicode-ms",size:10,weight:"bold"},horizontalAlignment:"center",kerning:!0,haloColor:[0,0,0,255],haloSize:1,rotated:!1,text:"",xoffset:0,yoffset:0,angle:0},c={type:"esriSMS",style:"esriSMSCircle",color:[0,0,0,255],outline:null,size:10.5},l={type:"esriSLS",style:"esriSLSSolid",color:[0,0,0,255],width:1.5},h={type:"esriSFS",style:"esriSFSSolid",color:[0,0,0,255],outline:null}},278:function(t,e,n){"use strict";n.d(e,"a",(function(){return h}));var r,i=n(79),s=n(89),o=n(81),a=(n(83),n(80)),u=n(200),c=n(163);let l=r=class extends c.a{constructor(t){super(t),this.colorRamps=null,this.type="multipart"}clone(){return new r({colorRamps:Object(s.a)(this.colorRamps)})}};Object(i.a)([Object(o.b)({type:[u.a],json:{write:!0}})],l.prototype,"colorRamps",void 0),Object(i.a)([Object(o.b)({type:["multipart"]})],l.prototype,"type",void 0),l=r=Object(i.a)([Object(a.a)("esri.rest.support.MultipartColorRamp")],l);const h=l},288:function(t,e,n){"use strict";n.d(e,"a",(function(){return a})),n.d(e,"b",(function(){return o}));var r=n(200),i=n(163),s=n(278);const o={key:"type",base:i.a,typeMap:{algorithmic:r.a,multipart:s.a}};function a(t){return t&&t.type?"algorithmic"===t.type?r.a.fromJSON(t):"multipart"===t.type?s.a.fromJSON(t):null:null}},334:function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));class r{constructor(){this.objectIdFieldName=null,this.globalIdFieldName=null,this.geohashFieldName=null,this.geometryProperties=null,this.geometryType=null,this.spatialReference=null,this.hasZ=!1,this.hasM=!1,this.features=[],this.fields=[],this.transform=null,this.exceededTransferLimit=!1,this.uniqueIdField=null,this.queryGeometryType=null,this.queryGeometry=null}weakClone(){const t=new r;return t.objectIdFieldName=this.objectIdFieldName,t.globalIdFieldName=this.globalIdFieldName,t.geohashFieldName=this.geohashFieldName,t.geometryProperties=this.geometryProperties,t.geometryType=this.geometryType,t.spatialReference=this.spatialReference,t.hasZ=this.hasZ,t.hasM=this.hasM,t.features=this.features,t.fields=this.fields,t.transform=this.transform,t.exceededTransferLimit=this.exceededTransferLimit,t.uniqueIdField=this.uniqueIdField,t.queryGeometry=this.queryGeometry,t.queryGeometryType=this.queryGeometryType,t}}},435:function(t,e,n){"use strict";n.d(e,"a",(function(){return s})),n.d(e,"b",(function(){return u})),n.d(e,"c",(function(){return c})),n.d(e,"d",(function(){return i}));var r=n(138);const i=Math.PI/180,s=/SPHEROID\[([^\]]+)]/i,o=r.a.radius,a=r.a.eccentricitySquared,u={a1:o*a,a2:o*a*o*a,a3:o*a*a/2,a4:o*a*o*a*2.5,a5:o*a+o*a*a/2,a6:1-a},c={4267:{a:6378206.4,f:1/294.9786982},4269:{a:6378137,f:1/298.257222101},4326:{a:r.a.radius,f:r.a.flattening},104900:{a:2439700,f:0},104901:{a:6051e3,f:0},104902:{a:6051800,f:0},104903:{a:r.c.radius,f:r.c.flattening},104904:{a:3393400,f:1/192.0430107526882},104905:{a:r.b.radius,f:r.b.flattening},104906:{a:6200,f:0},104907:{a:11100,f:0},104908:{a:71492e3,f:.06487439154031222},104909:{a:8200,f:0},104910:{a:83500,f:0},104911:{a:1e4,f:0},104912:{a:2409300,f:0},104913:{a:15e3,f:0},104914:{a:4e4,f:0},104915:{a:1562090,f:0},104916:{a:2632345,f:0},104917:{a:85e3,f:0},104918:{a:1821460,f:0},104919:{a:5e3,f:0},104920:{a:12e3,f:0},104921:{a:3e4,f:3},104922:{a:18e3,f:0},104923:{a:14e3,f:0},104924:{a:49300,f:0},104925:{a:60268e3,f:1/10.2079945799458},104926:{a:16e3,f:0},104927:{a:9500,f:0},104928:{a:56e4,f:0},104929:{a:249400,f:0},104930:{a:59500,f:0},104931:{a:16e3,f:0},104932:{a:133e3,f:0},104933:{a:718e3,f:0},104934:{a:888e3,f:0},104935:{a:1986300,f:0},104936:{a:1e4,f:0},104937:{a:41900,f:0},104938:{a:11e4,f:0},104939:{a:50100,f:0},104940:{a:764e3,f:0},104941:{a:11e3,f:0},104942:{a:529800,f:0},104943:{a:2575e3,f:0},104944:{a:25559e3,f:1/43.61604095563141},104945:{a:578900,f:0},104946:{a:33e3,f:0},104947:{a:21e3,f:0},104948:{a:13e3,f:0},104949:{a:31e3,f:0},104950:{a:27e3,f:0},104951:{a:42e3,f:0},104952:{a:235800,f:0},104953:{a:761400,f:0},104954:{a:15e3,f:0},104955:{a:54e3,f:0},104956:{a:77e3,f:0},104957:{a:27e3,f:0},104958:{a:788900,f:0},104959:{a:584700,f:0},104960:{a:24764e3,f:.01708124697141011},104961:{a:74e3,f:0},104962:{a:79e3,f:0},104963:{a:104e3,f:.14423076923076922},104964:{a:29e3,f:0},104965:{a:17e4,f:0},104966:{a:208e3,f:0},104967:{a:4e4,f:0},104968:{a:1352600,f:0},104969:{a:1195e3,f:0},104970:{a:593e3,f:0},104971:{a:r.b.radius,f:0},104972:{a:47e4,f:0},104973:{a:255e3,f:0},104974:{a:2439400,f:0}}},473:function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var r=n(239);class i{constructor(t,e){this._storage=new r.c,this._storage.maxSize=t,e&&this._storage.registerRemoveFunc("",e)}put(t,e){this._storage.put(t,e,1,1)}pop(t){return this._storage.pop(t)}get(t){return this._storage.get(t)}clear(){this._storage.clearAll()}destroy(){this._storage.destroy()}}},538:function(t,e,n){"use strict";n.r(e),n.d(e,"default",(function(){return z})),n.d(e,"inferFieldType",(function(){return Y})),n.d(e,"inferFields",(function(){return C})),n.d(e,"inferLocationInfo",(function(){return P}));n(97);var r=n(102),i=n(88),s=n(87),o=n(572),a=n(91),u=n(100),c=n(207),l=n(513),h=n(110),f=n(164),d=n(261),m=n(188),p=n(768),g=n(477),y=n(870);const b=/^\s*"([\S\s]*)"\s*$/,_=/""/g,x=[","," ",";","|","\t"];function*M(t,e,n){let r=0;for(;r<=t.length;){const i=t.indexOf(e,r),s=t.substring(r,i>-1?i:void 0);r+=s.length+e.length,n&&!s.trim()||(yield s)}}function O(t){const e=t.includes("\r\n")?"\r\n":"\n";return M(t,e,!0)}function w(t,e){return M(t,e,!1)}function*j(t,e,n,r=(()=>Object.create(null))){let i="",s="",o=0,a=r(),u=0;t:for(const c of t){const t=w(c,n);for(const c of t)if(i+=s+c,s="",o+=I(c),o%2==0){if(o>0){const t=b.exec(i);if(!t){a=r(),u=0,i="",o=0;continue t}a[e[u]]=t[1].replace(_,'"'),u++}else a[e[u]]=i,u++;i="",o=0}else s=n;0===o?(yield a,a=r(),u=0):s="\n"}}function I(t){let e=0,n=0;for(n=t.indexOf('"',n);n>=0;)e++,n=t.indexOf('"',n+1);return e}var S=n(618),v=n(244),F=n(105),N=n(94);const T=Object(S.d)("esriGeometryPoint"),B=["csv"],E=[0,0];class k{constructor(t,e){this.x=t,this.y=e}}class z{constructor(){this._queryEngine=null,this._snapshotFeatures=async t=>{const e=await this._fetch(t);return this._createFeatures(e)}}destroy(){var t;null==(t=this._queryEngine)||t.destroy(),this._queryEngine=null}async load(t,e={}){var n;this.loadOptions=t;const[r]=await Promise.all([this._fetch(e.signal),this._checkProjection(null==t||null==(n=t.parsingOptions)?void 0:n.spatialReference)]),s=function(t,e){const n=e.parsingOptions||{},r={delimiter:n.delimiter,layerDefinition:null,locationInfo:{latitudeFieldName:n.latitudeField,longitudeFieldName:n.longitudeField}},s=O(t);let o=s.next().value;if(!o)throw new i.a("csv-layer:empty-csv","CSV is empty",{csv:t});if(o=o.trim(),!n.delimiter){const t=function(t){const e=t.trim();let n=0,r="";for(const i of x){const t=e.split(i).length;t>n&&(n=t,r=i)}return""===r?null:r}(o);if(!t)throw new i.a("csv-layer:invalid-delimiter","Unable to detect the delimiter from CSV");r.delimiter=t}const a=o.split(r.delimiter).filter((t=>!!t)),c=r.layerDefinition={name:Object(u.k)(e.url,B)||"csv",drawingInfo:T,geometryType:"esriGeometryPoint",objectIdField:null,fields:[],timeInfo:n.timeInfo,extent:{xmin:Number.POSITIVE_INFINITY,ymin:Number.POSITIVE_INFINITY,xmax:Number.NEGATIVE_INFINITY,ymax:Number.NEGATIVE_INFINITY,spatialReference:n.spatialReference||{wkid:102100}}};if(!n.latitudeField||!n.longitudeField){const t=P(a);if(!n.longitudeField&&!t.longitudeFieldName||!n.latitudeField&&!t.latitudeFieldName)throw new i.a("csv-layer:location-fields-not-found","Unable to identify latitude and longitude fields from the CSV file");r.locationInfo={longitudeFieldName:n.longitudeField||t.longitudeFieldName,latitudeFieldName:n.latitudeField||t.latitudeFieldName}}const l=C(s,r.delimiter,a,r.locationInfo);if(n.fields&&n.fields.length){const t=new Map;for(const e of n.fields)t.set(e.name.toLowerCase(),e);for(const e of l){const n=t.get(e.name.toLowerCase());if(n){const t=e.name;Object.assign(e,n),e.name=t}}}if(c.fields=l,!c.fields.some((t=>"esriFieldTypeOID"===t.type&&(c.objectIdField=t.name,!0)))){const t={name:"__OBJECTID",alias:"__OBJECTID",type:"esriFieldTypeOID",editable:!1,nullable:!1};c.objectIdField=t.name,c.fields.unshift(t)}if(c.timeInfo){const t=new v.a(c.fields),e=c.timeInfo;if(e.startTimeField){const n=t.get(e.startTimeField);n?(e.startTimeField=n.name,n.type="esriFieldTypeDate"):e.startTimeField=null}if(e.endTimeField){const n=t.get(e.endTimeField);n?(e.endTimeField=n.name,n.type="esriFieldTypeDate"):e.endTimeField=null}if(e.trackIdField){const n=t.get(e.trackIdField);e.trackIdField=n?n.name:null}e.startTimeField||e.endTimeField||(c.timeInfo=null)}return r}(r,t);this.locationInfo=s.locationInfo,this.delimiter=s.delimiter,this._queryEngine=this._createQueryEngine(s);const o=await this._createFeatures(r);if(this._queryEngine.featureStore.addMany(o),s.layerDefinition.extent=this._queryEngine.fullExtent,s.layerDefinition.timeInfo){const{start:t,end:e}=this._queryEngine.timeExtent;s.layerDefinition.timeInfo.timeExtent=[t,e]}return s}async applyEdits(){throw new i.a("csv-layer:editing-not-supported","applyEdits() is not supported on CSVLayer")}async queryFeatures(t={},e={}){return await this._waitSnapshotComplete(),this._queryEngine.executeQuery(t,e.signal)}async queryFeatureCount(t={},e={}){return await this._waitSnapshotComplete(),this._queryEngine.executeQueryForCount(t,e.signal)}async queryObjectIds(t={},e={}){return await this._waitSnapshotComplete(),this._queryEngine.executeQueryForIds(t,e.signal)}async queryExtent(t={},e={}){return await this._waitSnapshotComplete(),this._queryEngine.executeQueryForExtent(t,e.signal)}async querySnapping(t,e={}){return await this._waitSnapshotComplete(),this._queryEngine.executeQueryForSnapping(t,e.signal)}async refresh(t){var e;return this.loadOptions.customParameters=t,null==(e=this._snapshotTask)||e.abort(),this._snapshotTask=Object(a.g)(this._snapshotFeatures),this._snapshotTask.promise.then((t=>{this._queryEngine.featureStore.clear(),t&&this._queryEngine.featureStore.addMany(t)}),(t=>{this._queryEngine.featureStore.clear(),Object(a.l)(t)||s.a.getLogger("esri.layers.CSVLayer").error(new i.a("csv-layer:refresh","An error occurred during refresh",{error:t}))})),await this._waitSnapshotComplete(),{extent:this._queryEngine.fullExtent,timeExtent:this._queryEngine.timeExtent}}async _waitSnapshotComplete(){if(this._snapshotTask&&!this._snapshotTask.finished){try{await this._snapshotTask.promise}catch{}return this._waitSnapshotComplete()}}async _fetch(t){const{url:e,customParameters:n}=this.loadOptions;if(!e)throw new i.a("csv-layer:invalid-source","url not defined");const s=Object(u.K)(e);return(await Object(r.default)(s.path,{query:{...s.query,...n},responseType:"text",signal:t})).data}_createQueryEngine(t){const{objectIdField:e,fields:n,extent:r,timeInfo:i}=t.layerDefinition,s=new p.a({geometryType:"esriGeometryPoint",hasM:!1,hasZ:!1});return new y.a({fields:n,geometryType:"esriGeometryPoint",hasM:!1,hasZ:!1,timeInfo:i,objectIdField:e,spatialReference:r.spatialReference||{wkid:4326},cacheSpatialQueries:!0,featureStore:s})}async _createFeatures(t){const{latitudeFieldName:e,longitudeFieldName:n}=this.locationInfo,{objectIdField:r,fieldsIndex:i,spatialReference:s}=this._queryEngine;let o=[];const a=[],u=i.fields.filter((t=>t.name!==r)).map((t=>t.name));let p=0;const g=O(t);g.next();const y={};for(const c of i.fields)if("esriFieldTypeOID"!==c.type&&"esriFieldTypeGlobalID"!==c.type){const t=Object(F.r)(c);void 0!==t&&(y[c.name]=t)}const b=j(g,u,this.delimiter,Object(S.b)(y,r));for(const c of b){const t=this._parseCoordinateValue(c[e]),s=this._parseCoordinateValue(c[n]);if(null!=s&&null!=t&&!isNaN(t)&&!isNaN(s)){c[e]=t,c[n]=s;for(const t in c)if(t!==e&&t!==n)if(i.isDateField(t)){const e=new Date(c[t]);c[t]=L(e,c[t])?e.getTime():null}else if(i.isNumericField(t)){const e=A(c[t]);isNaN(e)?c[t]=null:c[t]=e}c[r]=p,p++,o.push(new k(s,t)),a.push(c)}}if(!Object(h.d)({wkid:4326},s))if(Object(h.p)(s))for(const c of o)[c.x,c.y]=Object(f.c)(c.x,c.y,E);else o=Object(c.m)(l.a,o,N.a.WGS84,s,null);const _=[];for(let c=0;c<o.length;c++){const{x:t,y:e}=o[c],n=a[c];n[r]=c+1,_.push(new d.b(new m.a([],[t,e]),n,null,n[r]))}return _}_parseCoordinateValue(t){if(null==t||""===t)return null;let e=A(t);return(isNaN(e)||Math.abs(e)>181)&&(e=parseFloat(t)),e}async _checkProjection(t){try{await Object(g.a)(h.b,t)}catch{throw new i.a("csv-layer:projection-not-supported","Projection not supported")}}}const R=["lat","latitude","latitude83","latdecdeg","lat_dd","y","ycenter","point-y"],q=["lon","lng","long","longitude","longitude83","longdecdeg","long_dd","x","xcenter","point-x"];function P(t){const e=t.map((t=>t.toLowerCase()));return{longitudeFieldName:t[e.indexOf(q.find((t=>e.includes(t))))],latitudeFieldName:t[e.indexOf(R.find((t=>e.includes(t))))]}}function C(t,e,n,r){const i=[],s=j(t,n,e),o=[];for(const a of s){if(10===o.length)break;o.push(a)}for(const a of n)if(a===r.longitudeFieldName||a===r.latitudeFieldName)i.push({name:a,type:"esriFieldTypeDouble",alias:a});else{const t=Y(o.map((t=>t[a]))),e={name:a,type:null,alias:a};switch(t){case"integer":e.type="esriFieldTypeInteger";break;case"double":e.type="esriFieldTypeDouble";break;case"date":e.type="esriFieldTypeDate",e.length=36;break;default:e.type="esriFieldTypeString",e.length=255}i.push(e)}return i}function Y(t){if(!t.length)return"string";const e=/[^+-.,0-9]/;return t.map((t=>{let n=!1;if(""!==t){if(e.test(t))n=!0;else{let e=A(t);if(!isNaN(e))return/[.,]/.test(t)||!Number.isInteger(e)||e>214783647||e<-214783648?"double":"integer";if(-1===t.indexOf("E"))n=!0;else{if(e=Number(t),!isNaN(e))return"double";if(-1===t.indexOf(","))n=!0;else{if(t=t.replace(",","."),e=Number(t),!isNaN(e))return"double";n=!0}}}return n?/^[-]?\d*[.,]?\d*$/.test(t)?"string":L(new Date(t),t)?"date":"string":"string"}})).reduce(((t,e)=>void 0===t||t===e?e:"string"===t||"string"===e?"string":"double"===t||"double"===e?"double":void 0))}const G=/^((jan(uary)?)|(feb(ruary)?)|(mar(ch)?)|(apr(il)?)|(may)|(jun(e)?)|(jul(y)?)|(aug(ust)?)|(sep(tember)?)|(oct(ober)?)|(nov(ember)?)|(dec(ember)?)|(am)|(pm)|(gmt)|(utc))$/i,X=Number.isNaN(new Date("technology 10").getTime());function L(t,e){if(!t||"[object Date]"!==Object.prototype.toString.call(t)||isNaN(t.getTime()))return!1;let n=!0;if(!X&&/\d+\W*$/.test(e)){const t=e.match(/[a-zA-Z]{2,}/);if(t){let e=!1,r=0;for(;!e&&r<=t.length;)e=!G.test(t[r]),r++;n=!e}}return n}const A=function(){const t=Object(o.a)(),e=new RegExp("^"+t.regexp+"$"),n=new RegExp("["+t.group+"\\s\\xa0]","g"),r=t.factor;return function(i){const s=e.exec(i);if(t.factor=r,!s)return NaN;let o=s[1];if(!s[1]){if(!s[2])return NaN;o=s[2],t.factor*=-1}return o=o.replace(n,"").replace(t.decimal,"."),+o*t.factor}}()},572:function(t,e,n){"use strict";n.d(e,"a",(function(){return c})),n.d(e,"b",(function(){return a})),n.d(e,"c",(function(){return o})),n.d(e,"d",(function(){return l}));var r=n(144),i=n(119);const s={ar:[".",","],bg:[",","\xa0"],bs:[",","."],ca:[",","."],cs:[",","\xa0"],da:[",","."],de:[",","."],"de-ch":[".","\u2019"],el:[",","."],en:[".",","],"en-au":[".",","],es:[",","."],"es-mx":[".",","],et:[",","\xa0"],fi:[",","\xa0"],fr:[",","\u202f"],"fr-ch":[",","\u202f"],he:[".",","],hi:[".",",","#,##,##0.###"],hr:[",","."],hu:[",","\xa0"],id:[",","."],it:[",","."],"it-ch":[".","\u2019"],ja:[".",","],ko:[".",","],lt:[",","\xa0"],lv:[",","\xa0"],mk:[",","."],nb:[",","\xa0"],nl:[",","."],pl:[",","\xa0"],pt:[",","."],"pt-pt":[",","\xa0"],ro:[",","."],ru:[",","\xa0"],sk:[",","\xa0"],sl:[",","."],sr:[",","."],sv:[",","\xa0"],th:[".",","],tr:[",","."],uk:[",","\xa0"],vi:[",","."],zh:[".",","]};function o(t){t||(t=Object(i.b)());let e=t in s;if(!e){const n=t.split("-");n.length>1&&n[0]in s&&(t=n[0],e=!0),e||(t="en")}const[n,r,o="#,##0.###"]=s[t];return{decimal:n,group:r,pattern:o}}function a(t,e){const n=o((e={...e}).locale);e.customs=n;const r=e.pattern||n.pattern;return isNaN(t)||Math.abs(t)===1/0?null:function(t,e,n){const r=(n=n||{}).customs.group,i=n.customs.decimal,s=e.split(";"),o=s[0];if(-1!==(e=s[t<0?1:0]||"-"+o).indexOf("%"))t*=100;else if(-1!==e.indexOf("\u2030"))t*=1e3;else{if(-1!==e.indexOf("\xa4"))throw new Error("currency notation not supported");if(-1!==e.indexOf("E"))throw new Error("exponential notation not supported")}const a=u,c=o.match(a);if(!c)throw new Error("unable to find a number expression in pattern: "+e);return!1===n.fractional&&(n.places=0),e.replace(a,function(t,e,n){!0===(n=n||{}).places&&(n.places=0),n.places===1/0&&(n.places=6);const r=e.split("."),i="string"==typeof n.places&&n.places.indexOf(",");let s=n.places;i?s=n.places.substring(i+1):s>=0||(s=(r[1]||[]).length),n.round<0||(t=Number(t.toFixed(Number(s))));const o=String(Math.abs(t)).split("."),a=o[1]||"";if(r[1]||n.places){i&&(n.places=n.places.substring(0,i));const t=void 0!==n.places?n.places:r[1]&&r[1].lastIndexOf("0")+1;t>a.length&&(o[1]=a.padEnd(Number(t),"0")),s<a.length&&(o[1]=a.substr(0,Number(s)))}else o[1]&&o.pop();const u=r[0].replace(",","");let c=u.indexOf("0");-1!==c&&(c=u.length-c,c>o[0].length&&(o[0]=o[0].padStart(c,"0")),-1===u.indexOf("#")&&(o[0]=o[0].substr(o[0].length-c)));let l,h,f=r[0].lastIndexOf(",");if(-1!==f){l=r[0].length-f-1;const t=r[0].substr(0,f);f=t.lastIndexOf(","),-1!==f&&(h=t.length-f-1)}const d=[];for(let m=o[0];m;){const t=m.length-l;d.push(t>0?m.substr(t):m),m=t>0?m.slice(0,t):"",h&&(l=h,h=void 0)}return o[0]=d.reverse().join(n.group||","),o.join(n.decimal||".")}(t,c[0],{decimal:i,group:r,places:n.places,round:n.round}))}(t,r,e)}const u=/[#0,]*[#0](?:\.0*#*)?/;function c(t){const e=o((t=t||{}).locale),n=t.pattern||e.pattern,i=e.group,s=e.decimal;let a=1;if(-1!==n.indexOf("%"))a/=100;else if(-1!==n.indexOf("\u2030"))a/=1e3;else if(-1!==n.indexOf("\xa4"))throw new Error("currency notation not supported");const c=n.split(";");1===c.length&&c.push("-"+c[0]);const l=f(c,(function(e){return(e="(?:"+Object(r.a)(e,".")+")").replace(u,(function(e){const n={signed:!1,separator:t.strict?i:[i,""],fractional:t.fractional,decimal:s,exponent:!1},r=e.split(".");let o=t.places;1===r.length&&1!==a&&(r[1]="###"),1===r.length||0===o?n.fractional=!1:(void 0===o&&(o=t.pattern?r[1].lastIndexOf("0")+1:1/0),o&&null==t.fractional&&(n.fractional=!0),!t.places&&o<r[1].length&&(o+=","+r[1].length),n.places=o);const u=r[0].split(",");return u.length>1&&(n.groupSize=u.pop().length,u.length>1&&(n.groupSize2=u.pop().length)),"("+function(t){"places"in(t=t||{})||(t.places=1/0),"string"!=typeof t.decimal&&(t.decimal="."),"fractional"in t&&!/^0/.test(String(t.places))||(t.fractional=[!0,!1]),"exponent"in t||(t.exponent=[!0,!1]),"eSigned"in t||(t.eSigned=[!0,!1]);const e=h(t),n=f(t.fractional,(function(e){let n="";return e&&0!==t.places&&(n="\\"+t.decimal,t.places===1/0?n="(?:"+n+"\\d+)?":n+="\\d{"+t.places+"}"),n}),!0);let r=e+n;return n&&(r="(?:(?:"+r+")|(?:"+n+"))"),r+f(t.exponent,(function(e){return e?"([eE]"+h({signed:t.eSigned})+")":""}))}(n)+")"}))}),!0);return{regexp:l.replace(/[\xa0 ]/g,"[\\s\\xa0]"),group:i,decimal:s,factor:a}}function l(t,e){const n=c(e),r=new RegExp("^"+n.regexp+"$").exec(t);if(!r)return NaN;let i=r[1];if(!r[1]){if(!r[2])return NaN;i=r[2],n.factor*=-1}return i=i.replace(new RegExp("["+n.group+"\\s\\xa0]","g"),"").replace(n.decimal,"."),Number(i)*n.factor}function h(t){return"signed"in(t=t||{})||(t.signed=[!0,!1]),"separator"in t?"groupSize"in t||(t.groupSize=3):t.separator="",f(t.signed,(function(t){return t?"[-+]":""}),!0)+f(t.separator,(function(e){if(!e)return"(?:\\d+)";" "===(e=Object(r.a)(e))?e="\\s":"\xa0"===e&&(e="\\s\\xa0");const n=t.groupSize,i=t.groupSize2;if(i){const t="(?:0|[1-9]\\d{0,"+(i-1)+"}(?:["+e+"]\\d{"+i+"})*["+e+"]\\d{"+n+"})";return n-i>0?"(?:"+t+"|(?:0|[1-9]\\d{0,"+(n-1)+"}))":t}return"(?:0|[1-9]\\d{0,"+(n-1)+"}(?:["+e+"]\\d{"+n+"})*)"}),!0)}const f=function(t,e,n){if(!(t instanceof Array))return e(t);const r=[];for(let i=0;i<t.length;i++)r.push(e(t[i]));return d(r.join("|"),n)},d=function(t,e){return"("+(e?"?:":"")+t+")"}},618:function(t,e,n){"use strict";n.d(e,"a",(function(){return l})),n.d(e,"b",(function(){return u})),n.d(e,"c",(function(){return c})),n.d(e,"d",(function(){return a}));var r=n(82),i=n(89),s=n(647),o=n(274);function a(t){return{renderer:{type:"simple",symbol:"esriGeometryPoint"===t||"esriGeometryMultipoint"===t?o.c:"esriGeometryPolyline"===t?o.e:o.d}}}function u(t,e){if(Object(r.a)("esri-csp-restrictions"))return()=>({[e]:null,...t});try{let n=`this.${e} = null;`;for(const e in t)n+=`this${e.includes(".")?`["${e}"]`:`.${e}`} = ${JSON.stringify(t[e])};`;const r=new Function(n);return()=>new r}catch(n){return()=>({[e]:null,...t})}}function c(t={}){return[{name:"New Feature",description:"",prototype:{attributes:Object(i.a)(t)}}]}function l(t,e){return{attachment:null,data:{isVersioned:!1,supportsAttachment:!1,supportsM:!1,supportsZ:t},metadata:{supportsAdvancedFieldProperties:!1},operations:{supportsCalculate:!1,supportsTruncate:!1,supportsValidateSql:!1,supportsAdd:e,supportsDelete:e,supportsEditing:e,supportsChangeTracking:!1,supportsQuery:!0,supportsQueryAttachments:!1,supportsResizeAttachments:!1,supportsSync:!1,supportsUpdate:e,supportsExceedsLimitStatistics:!0},query:s.a,queryRelated:{supportsCount:!0,supportsOrderBy:!0,supportsPagination:!0},editing:{supportsGeometryUpdate:e,supportsGlobalId:!1,supportsReturnServiceEditsInSourceSpatialReference:!1,supportsRollbackOnFailure:!1,supportsUpdateWithoutM:!1,supportsUploadWithItemId:!1,supportsDeleteByAnonymous:!1,supportsDeleteByOthers:!1,supportsUpdateByAnonymous:!1,supportsUpdateByOthers:!1}}}},703:function(t,e,n){"use strict";n.d(e,"a",(function(){return a}));var r=n(84),i=n(85),s=n(215),o=n(698);class a{constructor(t=9,e){this.compareMinX=h,this.compareMinY=f,this.toBBox=function(t){return t},this._maxEntries=Math.max(4,t||9),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),e&&("function"==typeof e?this.toBBox=e:this._initFormat(e)),this.clear()}destroy(){this.clear(),x.prune(),M.prune(),O.prune(),w.prune()}all(t){this._all(this.data,t)}search(t,e){let n=this.data;const r=this.toBBox;if(b(t,n))for(x.clear();n;){for(let i=0,s=n.children.length;i<s;i++){const s=n.children[i],o=n.leaf?r(s):s;b(t,o)&&(n.leaf?e(s):y(t,o)?this._all(s,e):x.push(s))}n=x.pop()}}collides(t){let e=this.data;const n=this.toBBox;if(!b(t,e))return!1;for(x.clear();e;){for(let r=0,i=e.children.length;r<i;r++){const i=e.children[r],s=e.leaf?n(i):i;if(b(t,s)){if(e.leaf||y(t,s))return!0;x.push(i)}}e=x.pop()}return!1}load(t){if(!t.length)return this;if(t.length<this._minEntries){for(let e=0,n=t.length;e<n;e++)this.insert(t[e]);return this}let e=this._build(t.slice(0,t.length),0,t.length-1,0);if(this.data.children.length)if(this.data.height===e.height)this._splitRoot(this.data,e);else{if(this.data.height<e.height){const t=this.data;this.data=e,e=t}this._insert(e,this.data.height-e.height-1,!0)}else this.data=e;return this}insert(t){return t&&this._insert(t,this.data.height-1),this}clear(){return this.data=new I([]),this}remove(t){if(!t)return this;let e,n=this.data,s=null,o=0,a=!1;const u=this.toBBox(t);for(O.clear(),w.clear();n||O.length>0;){var c;if(n||(n=Object(i.d)(O.pop()),s=O.data[O.length-1],o=null!=(c=w.pop())?c:0,a=!0),n.leaf&&(e=Object(r.e)(n.children,t,n.children.length,n.indexHint),-1!==e))return n.children.splice(e,1),O.push(n),this._condense(O),this;a||n.leaf||!y(n,u)?s?(o++,n=s.children[o],a=!1):n=null:(O.push(n),w.push(o),o=0,s=n,n=n.children[0])}return this}toJSON(){return this.data}fromJSON(t){return this.data=t,this}_all(t,e){let n=t;for(M.clear();n;){var r;if(!0===n.leaf)for(const t of n.children)e(t);else M.pushArray(n.children);n=null!=(r=M.pop())?r:null}}_build(t,e,n,r){const i=n-e+1;let s=this._maxEntries;if(i<=s){const r=new I(t.slice(e,n+1));return u(r,this.toBBox),r}r||(r=Math.ceil(Math.log(i)/Math.log(s)),s=Math.ceil(i/s**(r-1)));const o=new S([]);o.height=r;const a=Math.ceil(i/s),c=a*Math.ceil(Math.sqrt(s));_(t,e,n,c,this.compareMinX);for(let u=e;u<=n;u+=c){const e=Math.min(u+c-1,n);_(t,u,e,a,this.compareMinY);for(let n=u;n<=e;n+=a){const i=Math.min(n+a-1,e);o.children.push(this._build(t,n,i,r-1))}}return u(o,this.toBBox),o}_chooseSubtree(t,e,n,r){for(;r.push(e),!0!==e.leaf&&r.length-1!==n;){let n,r=1/0,i=1/0;for(let s=0,o=e.children.length;s<o;s++){const o=e.children[s],a=d(o),u=p(t,o)-a;u<i?(i=u,r=a<r?a:r,n=o):u===i&&a<r&&(r=a,n=o)}e=n||e.children[0]}return e}_insert(t,e,n){const r=this.toBBox,i=n?t:r(t);O.clear();const s=this._chooseSubtree(i,this.data,e,O);for(s.children.push(t),l(s,i);e>=0&&O.data[e].children.length>this._maxEntries;)this._split(O,e),e--;this._adjustParentBBoxes(i,O,e)}_split(t,e){const n=t.data[e],r=n.children.length,i=this._minEntries;this._chooseSplitAxis(n,i,r);const s=this._chooseSplitIndex(n,i,r);if(!s)return void console.log("  Error: assertion failed at PooledRBush._split: no valid split index");const o=n.children.splice(s,n.children.length-s),a=n.leaf?new I(o):new S(o);a.height=n.height,u(n,this.toBBox),u(a,this.toBBox),e?t.data[e-1].children.push(a):this._splitRoot(n,a)}_splitRoot(t,e){this.data=new S([t,e]),this.data.height=t.height+1,u(this.data,this.toBBox)}_chooseSplitIndex(t,e,n){let r,i,s;r=i=1/0;for(let o=e;o<=n-e;o++){const e=c(t,0,o,this.toBBox),a=c(t,o,n,this.toBBox),u=g(e,a),l=d(e)+d(a);u<r?(r=u,s=o,i=l<i?l:i):u===r&&l<i&&(i=l,s=o)}return s}_chooseSplitAxis(t,e,n){const r=t.leaf?this.compareMinX:h,i=t.leaf?this.compareMinY:f;this._allDistMargin(t,e,n,r)<this._allDistMargin(t,e,n,i)&&t.children.sort(r)}_allDistMargin(t,e,n,r){t.children.sort(r);const i=this.toBBox,s=c(t,0,e,i),o=c(t,n-e,n,i);let a=m(s)+m(o);for(let u=e;u<n-e;u++){const e=t.children[u];l(s,t.leaf?i(e):e),a+=m(s)}for(let u=n-e-1;u>=e;u--){const e=t.children[u];l(o,t.leaf?i(e):e),a+=m(o)}return a}_adjustParentBBoxes(t,e,n){for(let r=n;r>=0;r--)l(e.data[r],t)}_condense(t){for(let e=t.length-1;e>=0;e--){const n=t.data[e];if(0===n.children.length)if(e>0){const i=t.data[e-1],s=i.children;s.splice(Object(r.e)(s,n,s.length,i.indexHint),1)}else this.clear();else u(n,this.toBBox)}}_initFormat(t){const e=["return a"," - b",";"];this.compareMinX=new Function("a","b",e.join(t[0])),this.compareMinY=new Function("a","b",e.join(t[1])),this.toBBox=new Function("a","return {minX: a"+t[0]+", minY: a"+t[1]+", maxX: a"+t[2]+", maxY: a"+t[3]+"};")}}function u(t,e){c(t,0,t.children.length,e,t)}function c(t,e,n,r,i){i||(i=new I([])),i.minX=1/0,i.minY=1/0,i.maxX=-1/0,i.maxY=-1/0;for(let s,o=e;o<n;o++)s=t.children[o],l(i,t.leaf?r(s):s);return i}function l(t,e){t.minX=Math.min(t.minX,e.minX),t.minY=Math.min(t.minY,e.minY),t.maxX=Math.max(t.maxX,e.maxX),t.maxY=Math.max(t.maxY,e.maxY)}function h(t,e){return t.minX-e.minX}function f(t,e){return t.minY-e.minY}function d(t){return(t.maxX-t.minX)*(t.maxY-t.minY)}function m(t){return t.maxX-t.minX+(t.maxY-t.minY)}function p(t,e){return(Math.max(e.maxX,t.maxX)-Math.min(e.minX,t.minX))*(Math.max(e.maxY,t.maxY)-Math.min(e.minY,t.minY))}function g(t,e){const n=Math.max(t.minX,e.minX),r=Math.max(t.minY,e.minY),i=Math.min(t.maxX,e.maxX),s=Math.min(t.maxY,e.maxY);return Math.max(0,i-n)*Math.max(0,s-r)}function y(t,e){return t.minX<=e.minX&&t.minY<=e.minY&&e.maxX<=t.maxX&&e.maxY<=t.maxY}function b(t,e){return e.minX<=t.maxX&&e.minY<=t.maxY&&e.maxX>=t.minX&&e.maxY>=t.minY}function _(t,e,n,r,s){const a=[e,n];for(;a.length;){const e=Object(i.d)(a.pop()),n=Object(i.d)(a.pop());if(e-n<=r)continue;const u=n+Math.ceil((e-n)/r/2)*r;Object(o.a)(t,u,n,e,s),a.push(n,u,u,e)}}const x=new s.a,M=new s.a,O=new s.a,w=new s.a({deallocator:void 0});class j extends class{constructor(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0}}{constructor(){super(...arguments),this.height=1,this.indexHint=new r.a}}class I extends j{constructor(t){super(),this.children=t,this.leaf=!0}}class S extends j{constructor(t){super(),this.children=t,this.leaf=!1}}},768:function(t,e,n){"use strict";n.d(e,"a",(function(){return f}));var r=n(88),i=n(129),s=n(87),o=n(85),a=n(223),u=n(118),c=n(180),l=n(800),h=n(769);class f{constructor(t){this.geometryInfo=t,this._boundsStore=new l.a,this._featuresById=new Map,this._markedIds=new Set,this.events=new i.a,this.featureAdapter=h.a}get geometryType(){return this.geometryInfo.geometryType}get hasM(){return this.geometryInfo.hasM}get hasZ(){return this.geometryInfo.hasZ}get numFeatures(){return this._featuresById.size}get fullBounds(){if(!this.numFeatures)return null;const t=Object(u.l)(u.a);return this._featuresById.forEach((e=>{const n=this._boundsStore.get(e.objectId);n&&(t[0]=Math.min(n[0],t[0]),t[1]=Math.min(n[1],t[1]),t[2]=Math.max(n[2],t[2]),t[3]=Math.max(n[3],t[3]))})),t}get storeStatistics(){let t=0;return this._featuresById.forEach((e=>{Object(o.l)(e.geometry)&&e.geometry.coords&&(t+=e.geometry.coords.length)})),{featureCount:this._featuresById.size,vertexCount:t/(this.hasZ?this.hasM?4:3:this.hasM?3:2)}}add(t){this._add(t),this._emitChanged()}addMany(t){for(const e of t)this._add(e);this._emitChanged()}clear(){this._featuresById.clear(),this._boundsStore.clear(),this._emitChanged()}removeById(t){const e=this._featuresById.get(t);return e?(this._remove(e),this._emitChanged(),e):null}removeManyById(t){this._boundsStore.invalidateIndex();for(const e of t){const t=this._featuresById.get(e);t&&this._remove(t)}this._emitChanged()}forEachBounds(t,e,n){for(const r of t){const t=this._boundsStore.get(r.objectId);t&&e(Object(a.o)(n,t))}}getFeature(t){return this._featuresById.get(t)}has(t){return this._featuresById.has(t)}forEach(t){this._featuresById.forEach((e=>t(e)))}forEachInBounds(t,e){this._boundsStore.forEachInBounds(t,(t=>{e(this._featuresById.get(t))}))}startMarkingUsedFeatures(){this._boundsStore.invalidateIndex(),this._markedIds.clear()}sweep(){let t=!1;this._featuresById.forEach(((e,n)=>{this._markedIds.has(n)||(t=!0,this._remove(e))})),this._markedIds.clear(),t&&this._emitChanged()}_emitChanged(){this.events.emit("changed",void 0)}_add(t){if(!t)return;const e=t.objectId;if(null==e)return void s.a.getLogger("esri.layers.graphics.data.FeatureStore").error(new r.a("featurestore:invalid-feature","feature id is missing",{feature:t}));const n=this._featuresById.get(e);let i;if(this._markedIds.add(e),n?(t.displayId=n.displayId,i=this._boundsStore.get(e),this._boundsStore.delete(e)):Object(o.l)(this.onFeatureAdd)&&this.onFeatureAdd(t),Object(o.k)(t.geometry)||!t.geometry.coords||!t.geometry.coords.length)return this._boundsStore.set(e,null),void this._featuresById.set(e,t);i=Object(c.r)(Object(o.l)(i)?i:Object(u.l)(),t.geometry,this.geometryInfo.hasZ,this.geometryInfo.hasM),Object(o.l)(i)&&this._boundsStore.set(e,i),this._featuresById.set(e,t)}_remove(t){return Object(o.l)(this.onFeatureRemove)&&this.onFeatureRemove(t),this._markedIds.delete(t.objectId),this._boundsStore.delete(t.objectId),this._featuresById.delete(t.objectId),t}}},769:function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));var r=n(480),i=n(261),s=n(188);const o={getObjectId:t=>t.objectId,getAttributes:t=>t.attributes,getAttribute:(t,e)=>t.attributes[e],cloneWithGeometry:(t,e)=>new i.b(e,t.attributes,null,t.objectId),getGeometry:t=>t.geometry,getCentroid:(t,e)=>(t.centroid||(t.centroid=Object(r.a)(new s.a,t.geometry,e.hasZ,e.hasM)),t.centroid)}},800:function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));var r=n(82),i=n(703);const s={minX:0,minY:0,maxX:0,maxY:0};class o{constructor(){this._indexInvalid=!1,this._boundsToLoad=[],this._boundsById=new Map,this._idByBounds=new Map,this._index=new i.a(9,Object(r.a)("esri-csp-restrictions")?t=>({minX:t[0],minY:t[1],maxX:t[2],maxY:t[3]}):["[0]","[1]","[2]","[3]"]),this._loadIndex=()=>{if(this._indexInvalid){const t=new Array(this._idByBounds.size);let e=0;this._idByBounds.forEach(((n,r)=>{t[e++]=r})),this._indexInvalid=!1,this._index.clear(),this._index.load(t)}else this._boundsToLoad.length&&(this._index.load(this._boundsToLoad.filter((t=>this._idByBounds.has(t)))),this._boundsToLoad.length=0)}}clear(){this._indexInvalid=!1,this._boundsToLoad.length=0,this._boundsById.clear(),this._idByBounds.clear(),this._index.clear()}delete(t){const e=this._boundsById.get(t);this._boundsById.delete(t),e&&(this._idByBounds.delete(e),this._indexInvalid||this._index.remove(e))}forEachInBounds(t,e){this._loadIndex(),function(t,e,n){s.minX=e[0],s.minY=e[1],s.maxX=e[2],s.maxY=e[3],t.search(s,n)}(this._index,t,(t=>e(this._idByBounds.get(t))))}get(t){return this._boundsById.get(t)}has(t){return this._boundsById.has(t)}invalidateIndex(){this._indexInvalid||(this._indexInvalid=!0,this._boundsToLoad.length=0)}set(t,e){if(!this._indexInvalid){const e=this._boundsById.get(t);e&&(this._index.remove(e),this._idByBounds.delete(e))}this._boundsById.set(t,e),e&&(this._idByBounds.set(e,t),this._indexInvalid||(this._boundsToLoad.push(e),this._boundsToLoad.length>5e4&&this._loadIndex()))}}},95:function(t,e,n){"use strict";n.d(e,"a",(function(){return s}));var r=n(90),i=n(81);function s(t,e={}){var n;const s=t instanceof r.a?t:new r.a(t,e),o={type:null==(n=null==e?void 0:e.ignoreUnknown)||n?s.apiValues:String,readOnly:null==e?void 0:e.readOnly,json:{type:s.jsonValues,read:(null==e||!e.readOnly)&&{reader:s.read},write:{writer:s.write}}};return void 0!==(null==e?void 0:e.default)&&(o.json.default=e.default),void 0!==(null==e?void 0:e.name)&&(o.json.name=e.name),Object(i.b)(o)}}}]);
//# sourceMappingURL=111.05aabe06.chunk.js.map