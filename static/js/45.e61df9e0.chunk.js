(this.webpackJsonpimaps=this.webpackJsonpimaps||[]).push([[45],{310:function(e,r,a){"use strict";a.d(r,"a",(function(){return l}));var t=a(7),n=a(175),i=a(94),u=a(201);function l(e,r,a){return y.apply(this,arguments)}function y(){return(y=Object(t.a)((function*(e,r,a){var t=e&&e.getAtOrigin&&e.getAtOrigin("renderer",r.origin);if(t&&"unique-value"===t.type&&t.styleOrigin){var l=yield Object(u.c)(t.populateFromStyle());if(Object(i.u)(a),!1===l.ok){var y=l.error;r&&r.messages&&r.messages.push(new n.a("renderer:style-reference","Failed to create unique value renderer from style reference: ".concat(y.message),{error:y,context:r})),e.clear("renderer",r.origin)}}}))).apply(this,arguments)}},571:function(e,r,a){"use strict";a.r(r),a.d(r,"fromItem",(function(){return s})),a.d(r,"selectLayerClassPath",(function(){return p}));var t=a(7),n=a(91),i=a(89),u=a(93),l=a(106),y=a(314),c=a(657),o=a(648);function s(e){return!e.portalItem||e.portalItem instanceof y.default||(e=Object(n.a)(Object(n.a)({},e),{},{portalItem:new y.default(e.portalItem)})),function(e){return e.load().then(p).then(f)}(e.portalItem).then((r=>{var a=Object(n.a)({portalItem:e.portalItem},r.properties),t=r.constructor;return Promise.resolve(new t(a))}))}function p(e){switch(e.type){case"Map Service":return function(e){return function(e){return b(e.url).then((e=>e.tileInfo))}(e).then((e=>e?{className:"TileLayer"}:{className:"MapImageLayer"}))}(e);case"Feature Service":return function(e){return m(e).then((e=>{if("object"==typeof e){var r={};return null!=e.id&&(r.layerId=e.id),{className:"FeatureLayer",properties:r}}return{className:"GroupLayer"}}))}(e);case"Feature Collection":return function(e){return d.apply(this,arguments)}(e);case"Scene Service":return function(e){return m(e).then((r=>{if("object"==typeof r){var a,t={};if(null!=r.id?(t.layerId=r.id,a="".concat(e.url,"/layers/").concat(r.id)):a=e.url,Array.isArray(e.typeKeywords)&&e.typeKeywords.length>0){var n={IntegratedMesh:"IntegratedMeshLayer","3DObject":"SceneLayer",Point:"SceneLayer",PointCloud:"PointCloudLayer",Building:"BuildingSceneLayer"};for(var i of Object.keys(n))if(-1!==e.typeKeywords.indexOf(i))return{className:n[i]}}return b(a).then((e=>{var r="SceneLayer",a={Point:"SceneLayer","3DObject":"SceneLayer",IntegratedMesh:"IntegratedMeshLayer",PointCloud:"PointCloudLayer",Building:"BuildingSceneLayer"};return e&&e.layerType&&a[e.layerType]&&(r=a[e.layerType]),{className:r,properties:t}}))}return{className:"GroupLayer"}}))}(e);case"Image Service":return function(e){return L.apply(this,arguments)}(e);case"Stream Service":return{className:"StreamLayer"};case"Vector Tile Service":return{className:"VectorTileLayer"};case"KML":return{className:"KMLLayer"};case"WMTS":return{className:"WMTSLayer"};case"WMS":return{className:"WMSLayer"};default:return Promise.reject(new u.a("portal:unknown-item-type","Unknown item type '${type}'",{type:e.type}))}}function f(e){return(0,o.a[e.className])().then((r=>({constructor:r,properties:e.properties})))}function d(){return(d=Object(t.a)((function*(e){return yield e.load(),Object(c.b)(e,"Map Notes")?{className:"MapNotesLayer"}:Object(c.b)(e,"Route Layer")?{className:"RouteLayer"}:1===S(yield e.fetchData())?{className:"FeatureLayer"}:{className:"GroupLayer"}}))).apply(this,arguments)}function L(){return(L=Object(t.a)((function*(e){var r,a,t;yield e.load();var n=null!=(r=null==(a=e.typeKeywords)?void 0:a.map((e=>e.toLowerCase())))?r:[];if(n.indexOf("elevation 3d layer")>-1)return{className:"ElevationLayer"};if(n.indexOf("tiled imagery")>-1)return{className:"ImageryTileLayer"};var i=yield e.fetchData(),u=null==i?void 0:i.layerType;return"ArcGISTiledImageServiceLayer"===u?{className:"ImageryTileLayer"}:"ArcGISImageServiceLayer"===u?{className:"ImageryLayer"}:"map"===(null==(t=(yield b(e.url)).cacheType)?void 0:t.toLowerCase())?{className:"ImageryTileLayer"}:{className:"ImageryLayer"}}))).apply(this,arguments)}function m(e){return!e.url||e.url.match(/\/\d+$/)?Promise.resolve({}):e.load().then((()=>e.fetchData())).then((r=>S(r)>0?h(r):b(e.url).then(h)))}function h(e){return 1===S(e)&&{id:Object(i.q)(v(e))}}function v(e){var r=e.layers;if(r&&r.length)return r[0].id;var a=e.tables;return a&&a.length?a[0].id:null}function S(e){var r,a,t,n;return(null!=(r=null==e||null==(a=e.layers)?void 0:a.length)?r:0)+(null!=(t=null==e||null==(n=e.tables)?void 0:n.length)?t:0)}function b(e){return Object(l.default)(e,{responseType:"json",query:{f:"json"}}).then((e=>e.data))}},648:function(e,r,a){"use strict";a.d(r,"a",(function(){return n}));var t=a(7),n={BingMapsLayer:function(){var e=Object(t.a)((function*(){return(yield a.e(99).then(a.bind(null,871))).default}));return function(){return e.apply(this,arguments)}}(),BuildingSceneLayer:function(){var e=Object(t.a)((function*(){return(yield Promise.all([a.e(1),a.e(2),a.e(4),a.e(3),a.e(72)]).then(a.bind(null,859))).default}));return function(){return e.apply(this,arguments)}}(),CSVLayer:function(){var e=Object(t.a)((function*(){return(yield Promise.all([a.e(1),a.e(2),a.e(4),a.e(3),a.e(80)]).then(a.bind(null,872))).default}));return function(){return e.apply(this,arguments)}}(),ElevationLayer:function(){var e=Object(t.a)((function*(){return(yield Promise.all([a.e(3),a.e(12),a.e(24),a.e(46)]).then(a.bind(null,768))).default}));return function(){return e.apply(this,arguments)}}(),FeatureLayer:function(){var e=Object(t.a)((function*(){return(yield Promise.all([a.e(1),a.e(2),a.e(4),a.e(3),a.e(82)]).then(a.bind(null,271))).default}));return function(){return e.apply(this,arguments)}}(),GroupLayer:function(){var e=Object(t.a)((function*(){return(yield Promise.all([a.e(37),a.e(110)]).then(a.bind(null,671))).default}));return function(){return e.apply(this,arguments)}}(),GeoRSSLayer:function(){var e=Object(t.a)((function*(){return(yield Promise.all([a.e(1),a.e(100)]).then(a.bind(null,846))).default}));return function(){return e.apply(this,arguments)}}(),ImageryLayer:function(){var e=Object(t.a)((function*(){return(yield Promise.all([a.e(1),a.e(2),a.e(4),a.e(3),a.e(68)]).then(a.bind(null,860))).default}));return function(){return e.apply(this,arguments)}}(),ImageryTileLayer:function(){var e=Object(t.a)((function*(){return(yield Promise.all([a.e(1),a.e(2),a.e(4),a.e(10),a.e(71)]).then(a.bind(null,858))).default}));return function(){return e.apply(this,arguments)}}(),IntegratedMeshLayer:function(){var e=Object(t.a)((function*(){return(yield Promise.all([a.e(3),a.e(10),a.e(32),a.e(121)]).then(a.bind(null,865))).default}));return function(){return e.apply(this,arguments)}}(),KMLLayer:function(){var e=Object(t.a)((function*(){return(yield Promise.all([a.e(1),a.e(2),a.e(4),a.e(94)]).then(a.bind(null,873))).default}));return function(){return e.apply(this,arguments)}}(),MapImageLayer:function(){var e=Object(t.a)((function*(){return(yield Promise.all([a.e(1),a.e(2),a.e(4),a.e(3),a.e(87)]).then(a.bind(null,789))).default}));return function(){return e.apply(this,arguments)}}(),MapNotesLayer:function(){var e=Object(t.a)((function*(){return(yield Promise.all([a.e(1),a.e(2),a.e(4),a.e(3),a.e(70)]).then(a.bind(null,751))).default}));return function(){return e.apply(this,arguments)}}(),OpenStreetMapLayer:function(){var e=Object(t.a)((function*(){return(yield Promise.all([a.e(23),a.e(277)]).then(a.bind(null,847))).default}));return function(){return e.apply(this,arguments)}}(),PointCloudLayer:function(){var e=Object(t.a)((function*(){return(yield Promise.all([a.e(2),a.e(3),a.e(32),a.e(117)]).then(a.bind(null,861))).default}));return function(){return e.apply(this,arguments)}}(),RouteLayer:function(){var e=Object(t.a)((function*(){return(yield Promise.all([a.e(1),a.e(2),a.e(4),a.e(3),a.e(81)]).then(a.bind(null,848))).default}));return function(){return e.apply(this,arguments)}}(),SceneLayer:function(){var e=Object(t.a)((function*(){return(yield Promise.all([a.e(1),a.e(2),a.e(4),a.e(3),a.e(73)]).then(a.bind(null,874))).default}));return function(){return e.apply(this,arguments)}}(),StreamLayer:function(){var e=Object(t.a)((function*(){return(yield Promise.all([a.e(1),a.e(2),a.e(4),a.e(3),a.e(91)]).then(a.bind(null,875))).default}));return function(){return e.apply(this,arguments)}}(),TileLayer:function(){var e=Object(t.a)((function*(){return(yield Promise.all([a.e(1),a.e(2),a.e(4),a.e(3),a.e(88)]).then(a.bind(null,746))).default}));return function(){return e.apply(this,arguments)}}(),UnknownLayer:function(){var e=Object(t.a)((function*(){return(yield a.e(147).then(a.bind(null,849))).default}));return function(){return e.apply(this,arguments)}}(),UnsupportedLayer:function(){var e=Object(t.a)((function*(){return(yield a.e(148).then(a.bind(null,850))).default}));return function(){return e.apply(this,arguments)}}(),VectorTileLayer:function(){var e=Object(t.a)((function*(){return(yield Promise.all([a.e(3),a.e(24),a.e(42),a.e(119)]).then(a.bind(null,765))).default}));return function(){return e.apply(this,arguments)}}(),WebTileLayer:function(){var e=Object(t.a)((function*(){return(yield a.e(23).then(a.bind(null,761))).default}));return function(){return e.apply(this,arguments)}}(),WMSLayer:function(){var e=Object(t.a)((function*(){return(yield Promise.all([a.e(1),a.e(2),a.e(96)]).then(a.bind(null,866))).default}));return function(){return e.apply(this,arguments)}}(),WMTSLayer:function(){var e=Object(t.a)((function*(){return(yield Promise.all([a.e(23),a.e(262)]).then(a.bind(null,863))).default}));return function(){return e.apply(this,arguments)}}()}},800:function(e,r,a){"use strict";a.r(r),a.d(r,"populateOperationalLayers",(function(){return L}));var t=a(7),n=(a(80),a(94)),i=a(107),u=a(314),l=a(310),y=a(648),c=a(657);function o(e,r){return p(e,r,"notes","Map Notes")}function s(e,r){return p(e,r,"route","Route Layer")}function p(e,r,a,t){return f.apply(this,arguments)}function f(){return(f=Object(t.a)((function*(e,r,a,t){if(!e.layerType||"ArcGISFeatureLayer"!==e.layerType)return!1;if(e.url)return!1;if(e.featureCollectionType&&e.featureCollectionType===a)return!0;if(e.itemId){var n=new u.default({id:e.itemId,portal:r});return yield n.load(),"Feature Collection"===n.type&&Object(c.b)(n,t)}return!1}))).apply(this,arguments)}var d=a(571);function L(e,r,a){return m.apply(this,arguments)}function m(){return(m=Object(t.a)((function*(e,r,a){if(r){var t=[];for(var i of r){var u=T(i,a);"GroupLayer"===i.layerType?t.push(C(u,i,a)):t.push(u)}var l=yield Object(n.j)(t);for(var y of l)!y.value||a.filter&&!a.filter(y.value)||e.add(y.value)}}))).apply(this,arguments)}var h={ArcGISFeatureLayer:"FeatureLayer",ArcGISImageServiceLayer:"ImageryLayer",ArcGISMapServiceLayer:"MapImageLayer",PointCloudLayer:"PointCloudLayer",ArcGISSceneServiceLayer:"SceneLayer",IntegratedMeshLayer:"IntegratedMeshLayer",BuildingSceneLayer:"BuildingSceneLayer",ArcGISTiledElevationServiceLayer:"ElevationLayer",ArcGISTiledImageServiceLayer:"ImageryTileLayer",ArcGISTiledMapServiceLayer:"TileLayer",GroupLayer:"GroupLayer",WebTiledLayer:"WebTileLayer",CSV:"CSVLayer",VectorTileLayer:"VectorTileLayer",WMS:"WMSLayer",DefaultTileLayer:"TileLayer",KML:"KMLLayer",RasterDataLayer:"UnsupportedLayer"},v={ArcGISTiledElevationServiceLayer:"ElevationLayer",DefaultTileLayer:"ElevationLayer",RasterDataElevationLayer:"UnsupportedLayer"},S={ArcGISTiledMapServiceLayer:"TileLayer",ArcGISTiledImageServiceLayer:"ImageryTileLayer",OpenStreetMap:"OpenStreetMapLayer",WebTiledLayer:"WebTileLayer",VectorTileLayer:"VectorTileLayer",ArcGISImageServiceLayer:"UnsupportedLayer",WMS:"UnsupportedLayer",ArcGISMapServiceLayer:"UnsupportedLayer",DefaultTileLayer:"TileLayer"},b={ArcGISFeatureLayer:"FeatureLayer",ArcGISImageServiceLayer:"ImageryLayer",ArcGISImageServiceVectorLayer:"ImageryLayer",ArcGISMapServiceLayer:"MapImageLayer",ArcGISStreamLayer:"StreamLayer",ArcGISTiledImageServiceLayer:"ImageryTileLayer",ArcGISTiledMapServiceLayer:"TileLayer",VectorTileLayer:"VectorTileLayer",GroupLayer:"GroupLayer",WebTiledLayer:"WebTileLayer",CSV:"CSVLayer",GeoRSS:"GeoRSSLayer",KML:"KMLLayer",WFS:"UnsupportedLayer",SubtypeGroupLayer:"UnsupportedLayer",WMS:"WMSLayer",BingMapsAerial:"BingMapsLayer",BingMapsRoad:"BingMapsLayer",BingMapsHybrid:"BingMapsLayer",DefaultTileLayer:"TileLayer"},I={ArcGISFeatureLayer:"FeatureLayer"},g={ArcGISImageServiceLayer:"ImageryLayer",ArcGISImageServiceVectorLayer:"ImageryLayer",ArcGISMapServiceLayer:"MapImageLayer",ArcGISTiledImageServiceLayer:"ImageryTileLayer",ArcGISTiledMapServiceLayer:"TileLayer",OpenStreetMap:"OpenStreetMapLayer",VectorTileLayer:"VectorTileLayer",WebTiledLayer:"WebTileLayer",BingMapsAerial:"BingMapsLayer",BingMapsRoad:"BingMapsLayer",BingMapsHybrid:"BingMapsLayer",WMS:"WMSLayer",DefaultTileLayer:"TileLayer"};function T(e,r){return M.apply(this,arguments)}function M(){return(M=Object(t.a)((function*(e,r){return O(yield G(e,r),e,r)}))).apply(this,arguments)}function O(e,r,a){return j.apply(this,arguments)}function j(){return(j=Object(t.a)((function*(e,r,a){var t=new e;return t.read(r,a.context),"group"===t.type&&P(r)&&(yield B(t,r,a.context)),yield Object(l.a)(t,a.context),t}))).apply(this,arguments)}function G(e,r){return A.apply(this,arguments)}function A(){return(A=Object(t.a)((function*(e,r){var a=r.context,t=N(a),n=e.layerType||e.type;!n&&r&&r.defaultLayerType&&(n=r.defaultLayerType);var i=t[n],l=i?y.a[i]:y.a.UnknownLayer,c=a&&a.portal;if(w(e)){if(e.itemId){var p=new u.default({id:e.itemId,portal:c});yield p.load();var f=(yield Object(d.selectLayerClassPath)(p)).className||"UnknownLayer";l=y.a[f]}}else"ArcGISFeatureLayer"===n&&((yield o(e,c))?l=y.a.MapNotesLayer:(yield s(e,c))?l=y.a.RouteLayer:P(e)&&(l=y.a.GroupLayer));return e.wmtsInfo&&e.wmtsInfo.url&&e.wmtsInfo.layerIdentifier&&(l=y.a.WMTSLayer),l()}))).apply(this,arguments)}function P(e){if("ArcGISFeatureLayer"!==e.layerType||w(e))return!1;var r=e.featureCollection;return!!(r&&r.layers&&r.layers.length>1)}function w(e){return"Feature Collection"===e.type}function N(e){var r;switch(e.origin){case"web-scene":switch(e.layerContainerType){case"basemap":r=S;break;case"ground":r=v;break;default:r=h}break;default:switch(e.layerContainerType){case"basemap":r=g;break;case"tables":r=I;break;default:r=b}}return r}function C(e,r,a){return W.apply(this,arguments)}function W(){return(W=Object(t.a)((function*(e,r,a){var t=new i.a,n=L(t,Array.isArray(r.layers)?r.layers:[],a),u=yield e;if(yield n,"group"===u.type)return u.layers.addMany(t),u}))).apply(this,arguments)}function B(e,r,a){return F.apply(this,arguments)}function F(){return(F=Object(t.a)((function*(e,r,a){var t=y.a.FeatureLayer,n=yield t(),i=r.featureCollection,u=i.showLegend,l=i.layers.map((e=>{var r=new n;return r.read(e,a),null!=u&&r.read({showLegend:u},a),r}));e.layers.addMany(l)}))).apply(this,arguments)}}}]);
//# sourceMappingURL=45.e61df9e0.chunk.js.map