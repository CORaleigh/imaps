(this.webpackJsonpimaps=this.webpackJsonpimaps||[]).push([[102,54,262,263,264,275,284],{1111:function(e,t,r){"use strict";var i=r(76),o=r(121),n=r(917),a=r(575),s=r(171),l=r(99),c=r(83),u=r(172),d=r(439),p=r(75),b=r(80),h=r(257),m=r(231),y=r(84),f=r(92),O=r(105),j=r(78),g=(r(74),r(79)),v=r(87),w=r(77),k=r(86),_=r(689),S=r(339),x=r(88),I=r(150),T=r(194),E=r(95),C=r(94);const N=p.a.getLogger("esri.networks.Network");let A=class extends(Object(h.a)(u.a)){constructor(e){super(e),this.id=null,this.title=null,this.layerUrl=null,this.dataElement=null,this.fullExtent=null,this.spatialReference=null,this.type=null}initialize(){this.when().catch((e=>{var t,r;Object(y.m)(e)||N.error("#load()",`Failed to load layer (title: '${null!=(t=this.title)?t:"no title"}', id: '${null!=(r=this.id)?r:"no id"}')`,{error:e})}))}get datasetName(){var e;return null==(e=this.dataElement)?void 0:e.name}get owner(){var e;return null==(e=this.dataElement)?void 0:e.userIdentity}get schemaGeneration(){var e;return null==(e=this.dataElement)?void 0:e.schemaGeneration}get parsedUrl(){const e=this.layerUrl;return e?Object(f.K)(e):null}get featureServiceUrl(){const e=this.parsedUrl&&Object(T.f)(this.parsedUrl.path);return Object(b.k)(e)?e.url.path:null}get networkServiceUrl(){return this.featureServiceUrl?this.featureServiceUrl.replace(/\/FeatureServer/i,"/UtilityNetworkServer"):null}get layerId(){const e=this.parsedUrl&&Object(T.f)(this.parsedUrl.path);return Object(b.k)(e)?e.sublayer:null}async load(e){return this.addResolvingPromise(this._fetchDataElement(this.featureServiceUrl,this.layerId.toString(),e)),this.addResolvingPromise(this._fetchLayerMetaData(this.layerUrl,e)),this}getLayerIdBySourceId(e){if(this.dataElement){const t=this.dataElement.domainNetworks;for(const r of t){for(const t of r.edgeSources?r.edgeSources:[])if(t.sourceId===e)return t.layerId;for(const t of r.junctionSources?r.junctionSources:[])if(t.sourceId===e)return t.layerId}return null}return null}async _fetchLayerMetaData(e,t){const r=await Object(E.default)(e,{responseType:"json",query:{f:"json"},...t});this.read(r.data,{origin:"service"})}async _fetchDataElement(e,t,r){if(this.dataElement)return;const i=await Object(E.default)(`${e}/queryDataElements`,{responseType:"json",query:{layers:JSON.stringify([t]),f:"json"},...r}).then((e=>{var t;return null==(t=e.data.layerDataElements)?void 0:t[0]}));i&&this.read(i,{origin:"service"})}};Object(i.a)([Object(j.b)({type:String,nonNullable:!0,json:{origins:{"web-map":{read:!0,write:{isRequired:!0}}},read:!1}})],A.prototype,"id",void 0),Object(i.a)([Object(j.b)({type:String,nonNullable:!0,json:{origins:{"web-map":{read:!0,write:{isRequired:!0}}},read:!1}})],A.prototype,"title",void 0),Object(i.a)([Object(j.b)({type:String,nonNullable:!0,json:{origins:{"web-map":{read:{source:"url"},write:{target:"url",isRequired:!0}}},read:!1}})],A.prototype,"layerUrl",void 0),Object(i.a)([Object(j.b)({type:Object,json:{origins:{service:{read:!0}},read:!1}})],A.prototype,"dataElement",void 0),Object(i.a)([Object(j.b)({type:C.a,json:{origins:{service:{read:{source:"extent"}}},read:!1}})],A.prototype,"fullExtent",void 0),Object(i.a)([Object(j.b)({type:x.a,json:{origins:{service:{read:{source:"extent.spatialReference"}}},read:!1}})],A.prototype,"spatialReference",void 0),Object(i.a)([Object(j.b)({type:["utility","trace"],readOnly:!0,json:{read:!1,write:!1}})],A.prototype,"type",void 0),Object(i.a)([Object(j.b)({readOnly:!0})],A.prototype,"datasetName",null),Object(i.a)([Object(j.b)({readOnly:!0})],A.prototype,"owner",null),Object(i.a)([Object(j.b)({readOnly:!0})],A.prototype,"schemaGeneration",null),Object(i.a)([Object(j.b)({readOnly:!0})],A.prototype,"parsedUrl",null),Object(i.a)([Object(j.b)({readOnly:!0})],A.prototype,"featureServiceUrl",null),Object(i.a)([Object(j.b)({readOnly:!0})],A.prototype,"networkServiceUrl",null),Object(i.a)([Object(j.b)({readOnly:!0})],A.prototype,"layerId",null),A=Object(i.a)([Object(w.a)("esri.networks.Network")],A);var B=A,M=r(85);const L=new M.a({connected:"connected",upstream:"upstream",downstream:"downstream",shortestPath:"shortest-path",subnetwork:"subnetwork","subnetwork controllers":"subnetwork-controllers",loops:"loops",isolation:"isolation"});let U=class extends h.b{constructor(e){super(e),this.globalId=null,this.title=null,this.traceConfiguration=null,this.creationDate=null,this.creator=null,this.description=null,this.minStartingPoints=null,this.resultTypes=[],this.tags=[],this.traceType=null}};Object(i.a)([Object(j.b)({type:String,nonNullable:!0,json:{origins:{"web-map":{read:{source:"id"},write:{target:"id",isRequired:!0}},service:{read:{source:"globalId"}}},read:!1}})],U.prototype,"globalId",void 0),Object(i.a)([Object(j.b)({type:String,nonNullable:!0,json:{origins:{"web-map":{read:{source:"title"},write:{target:"title",isRequired:!0}},service:{read:{source:"name"}}},read:!1}})],U.prototype,"title",void 0),Object(i.a)([Object(j.b)({type:Object,json:{origins:{service:{read:!0}},read:!1}})],U.prototype,"traceConfiguration",void 0),Object(i.a)([Object(j.b)({type:Date,json:{origins:{service:{read:!0}},read:!1}})],U.prototype,"creationDate",void 0),Object(i.a)([Object(j.b)({type:String,json:{origins:{service:{read:!0}},read:!1}})],U.prototype,"creator",void 0),Object(i.a)([Object(j.b)({type:String,json:{origins:{service:{read:!0}},read:!1}})],U.prototype,"description",void 0),Object(i.a)([Object(j.b)({type:["none","one","many"],json:{origins:{service:{read:{source:"minNumStartingPoints"}}},read:!1}})],U.prototype,"minStartingPoints",void 0),Object(i.a)([Object(j.b)({type:[Object],json:{origins:{service:{read:!0}},read:!1}})],U.prototype,"resultTypes",void 0),Object(i.a)([Object(j.b)({type:[String],json:{origins:{service:{read:!0}},read:!1}})],U.prototype,"tags",void 0),Object(i.a)([Object(j.b)({type:L.apiValues,json:{type:L.jsonValues,origins:{service:{read:L.read}},read:!1}})],U.prototype,"traceType",void 0),U=Object(i.a)([Object(w.a)("esri.networks.support.NamedTraceConfiguration")],U);var F=U,R=r(81);let P=class extends R.a{constructor(e){super(e),this.id=null,this.name=null}};Object(i.a)([Object(j.b)({type:Number,json:{read:{source:"terminalId"},write:{target:"terminalId"}}})],P.prototype,"id",void 0),Object(i.a)([Object(j.b)({type:String,json:{read:{source:"terminalName"},write:{target:"terminalName"}}})],P.prototype,"name",void 0),Object(i.a)([Object(j.b)({type:Boolean,json:{write:!0}})],P.prototype,"isUpstreamTerminal",void 0),P=Object(i.a)([Object(w.a)("esri.networks.support.Terminal")],P);var D=P;const q=new M.a({esriUNTMBidirectional:"bidirectional",esriUNTMDirectional:"directional"});let V=class extends R.a{constructor(e){super(e),this.defaultConfiguration=null,this.id=null,this.name=null,this.terminals=[],this.traversabilityModel=null}};Object(i.a)([Object(j.b)({type:String,json:{write:!0}})],V.prototype,"defaultConfiguration",void 0),Object(i.a)([Object(j.b)({type:Number,json:{read:{source:"terminalConfigurationId"},write:{target:"terminalConfigurationId"}}})],V.prototype,"id",void 0),Object(i.a)([Object(j.b)({type:String,json:{read:{source:"terminalConfigurationName"},write:{target:"terminalConfigurationName"}}})],V.prototype,"name",void 0),Object(i.a)([Object(j.b)({type:[D],json:{write:!0}})],V.prototype,"terminals",void 0),Object(i.a)([Object(j.b)({type:q.apiValues,json:{type:q.jsonValues,read:q.read,write:q.write}})],V.prototype,"traversabilityModel",void 0),V=Object(i.a)([Object(w.a)("esri.networks.support.TerminalConfiguration")],V);var J=V;let G=class extends B{constructor(e){super(e),this.sharedNamedTraceConfigurations=[],this.type="utility"}get serviceTerritoryFeatureLayerId(){var e;return null==(e=this.dataElement)?void 0:e.serviceTerritoryFeatureLayerId}get terminalConfigurations(){var e;return null==(e=this.dataElement)?void 0:e.terminalConfigurations.map((e=>J.fromJSON(e)))}async load(e){return this.addResolvingPromise(super.load(e)),this.addResolvingPromise(this._loadNamedTraceConfigurationsFromNetwork(e)),this}getTerminalConfiguration(e){let t=null,r=null;const i=e.layer;let o=null;if("feature"!==(null==i?void 0:i.type))return null;if(o=i.layerId,null===o)return null;const n=e.attributes;if(null==n)return null;for(const d of Object.keys(n))"ASSETGROUP"===d.toUpperCase()&&(t=e.getAttribute(d)),"ASSETTYPE"===d.toUpperCase()&&(r=e.getAttribute(d));if(!this.dataElement)return null;let a=null;const s=this.dataElement.domainNetworks;for(const d of s){var l;const e=null==(l=d.junctionSources)?void 0:l.find((e=>e.layerId===o));if(e){var c;const i=null==(c=e.assetGroups)?void 0:c.find((e=>e.assetGroupCode===t));if(i){var u;const e=null==(u=i.assetTypes)?void 0:u.find((e=>e.assetTypeCode===r));if(e){a=e.terminalConfigurationId;break}}}}if(null!=a){const e=this.dataElement.terminalConfigurations,t=null==e?void 0:e.find((e=>e.terminalConfigurationId===a));return t?J.fromJSON(t):null}return null}async _loadNamedTraceConfigurationsFromNetwork(e){var t;if(0===(null==(t=this.sharedNamedTraceConfigurations)?void 0:t.length))return;const r=this.sharedNamedTraceConfigurations.map((e=>e.globalId)),i=await this._fetchTraceConfigData(this.networkServiceUrl,r,e);for(const o of this.sharedNamedTraceConfigurations){const e=null==i?void 0:i.find((e=>e.globalId===o.globalId));e&&o.read(e,{origin:"service"})}}_fetchTraceConfigData(e,t,r){return Object(E.default)(`${e}/traceConfigurations/query`,{responseType:"json",query:{globalIds:JSON.stringify(t),f:"json"},...r}).then((e=>e.data.traceConfigurations))}};Object(i.a)([Object(j.b)({type:[F],json:{origins:{"web-map":{read:{source:"traceConfigurations"},write:{target:"traceConfigurations"}},service:{read:{source:"traceConfigurations"}}},read:!1}})],G.prototype,"sharedNamedTraceConfigurations",void 0),Object(i.a)([Object(j.b)({type:["utility"],readOnly:!0,json:{read:!1,write:!1}})],G.prototype,"type",void 0),Object(i.a)([Object(j.b)({readOnly:!0})],G.prototype,"serviceTerritoryFeatureLayerId",null),Object(i.a)([Object(j.b)({readOnly:!0})],G.prototype,"terminalConfigurations",null),G=Object(i.a)([Object(w.a)("esri.networks.UtilityNetwork")],G);var $=G,W=r(174),K=r(221),z=r(664),H=r(522),Y=r(561);let Q=class extends R.a{constructor(e){super(e),this.layerId=null,this.facilityIdField=null,this.siteIdField=null,this.nameField=null}};Object(i.a)([Object(j.b)({type:String,json:{write:!0}})],Q.prototype,"layerId",void 0),Object(i.a)([Object(j.b)({type:String,json:{write:!0}})],Q.prototype,"facilityIdField",void 0),Object(i.a)([Object(j.b)({type:String,json:{write:!0}})],Q.prototype,"siteIdField",void 0),Object(i.a)([Object(j.b)({type:String,json:{write:!0}})],Q.prototype,"nameField",void 0),Q=Object(i.a)([Object(w.a)("esri.layers.support.FacilityLayerInfo")],Q);var X=Q;let Z=class extends R.a{constructor(e){super(e),this.layerId=null,this.levelIdField=null,this.facilityIdField=null,this.longNameField=null,this.shortNameField=null,this.levelNumberField=null,this.verticalOrderField=null}};Object(i.a)([Object(j.b)({type:String,json:{write:!0}})],Z.prototype,"layerId",void 0),Object(i.a)([Object(j.b)({type:String,json:{write:!0}})],Z.prototype,"levelIdField",void 0),Object(i.a)([Object(j.b)({type:String,json:{write:!0}})],Z.prototype,"facilityIdField",void 0),Object(i.a)([Object(j.b)({type:String,json:{write:!0}})],Z.prototype,"longNameField",void 0),Object(i.a)([Object(j.b)({type:String,json:{write:!0}})],Z.prototype,"shortNameField",void 0),Object(i.a)([Object(j.b)({type:String,json:{write:!0}})],Z.prototype,"levelNumberField",void 0),Object(i.a)([Object(j.b)({type:String,json:{write:!0}})],Z.prototype,"verticalOrderField",void 0),Z=Object(i.a)([Object(w.a)("esri.layers.support.LevelLayerInfo")],Z);var ee=Z;let te=class extends R.a{constructor(e){super(e),this.layerId=null,this.siteIdField=null,this.nameField=null}};Object(i.a)([Object(j.b)({type:String,json:{write:!0}})],te.prototype,"layerId",void 0),Object(i.a)([Object(j.b)({type:String,json:{write:!0}})],te.prototype,"siteIdField",void 0),Object(i.a)([Object(j.b)({type:String,json:{write:!0}})],te.prototype,"nameField",void 0),te=Object(i.a)([Object(w.a)("esri.layers.support.SiteLayerInfo")],te);var re=te;let ie=class extends R.a{constructor(e){super(e),this.levelLayer=null,this.facilityLayer=null,this.siteLayer=null}};Object(i.a)([Object(j.b)({type:ee,json:{write:!0}})],ie.prototype,"levelLayer",void 0),Object(i.a)([Object(j.b)({type:X,json:{write:!0}})],ie.prototype,"facilityLayer",void 0),Object(i.a)([Object(j.b)({type:re,json:{write:!0}})],ie.prototype,"siteLayer",void 0),ie=Object(i.a)([Object(w.a)("esri.support.MapFloorInfo")],ie);var oe,ne=ie,ae=r(82);let se=oe=class extends R.a{constructor(e){super(e),this.activeRange=null,this.currentRangeExtent=null,this.fullRangeExtent=null}clone(){return new oe(Object(ae.a)({activeRange:this.activeRange,currentRangeExtent:this.currentRangeExtent,fullRangeExtent:this.fullRangeExtent}))}};Object(i.a)([Object(j.b)({type:String,nonNullable:!0,json:{read:{source:"activeRangeName"},write:{target:"activeRangeName",isRequired:!0}}})],se.prototype,"activeRange",void 0),Object(i.a)([Object(j.b)({type:[Number],json:{write:!0}})],se.prototype,"currentRangeExtent",void 0),Object(i.a)([Object(j.b)({type:[Number],json:{write:!0}})],se.prototype,"fullRangeExtent",void 0),se=oe=Object(i.a)([Object(w.a)("esri.webdoc.RangeInfo")],se);var le,ce=se;let ue=le=class extends R.a{constructor(e){super(e),this.enabled=!1,this.longNames=!1,this.minimized=!1,this.pinnedLevels=!1,this.site=null,this.facility=null,this.level=null}clone(){return new le(Object(ae.a)({enabled:this.enabled,longNames:this.longNames,minimized:this.minimized,pinnedLevels:this.pinnedLevels,site:this.site,facility:this.facility,level:this.level}))}};Object(i.a)([Object(j.b)({type:Boolean,json:{read:{source:"enabled"},write:{target:"enabled"}}})],ue.prototype,"enabled",void 0),Object(i.a)([Object(j.b)({type:Boolean,json:{read:{source:"longNames"},write:{target:"longNames"}}})],ue.prototype,"longNames",void 0),Object(i.a)([Object(j.b)({type:Boolean,json:{read:{source:"minimized"},write:{target:"minimized"}}})],ue.prototype,"minimized",void 0),Object(i.a)([Object(j.b)({type:Boolean,json:{read:{source:"pinnedLevels"},write:{target:"pinnedLevels"}}})],ue.prototype,"pinnedLevels",void 0),Object(i.a)([Object(j.b)({type:String,json:{read:{source:"site"},write:{target:"site"}}})],ue.prototype,"site",void 0),Object(i.a)([Object(j.b)({type:String,json:{read:{source:"facility"},write:{target:"facility"}}})],ue.prototype,"facility",void 0),Object(i.a)([Object(j.b)({type:String,json:{read:{source:"level"},write:{target:"level"}}})],ue.prototype,"level",void 0),ue=le=Object(i.a)([Object(w.a)("esri.webdoc.widgets.FloorFilter")],ue);var de,pe=ue;const be=new M.a({slider:"slider",picker:"picker"});let he=de=class extends R.a{constructor(e){super(e),this.interactionMode=null,this.numStops=null,this.stopInterval=null}clone(){return new de({interactionMode:this.interactionMode,numStops:this.numStops,stopInterval:this.stopInterval})}};Object(i.a)([Object(j.b)({type:be.apiValues,nonNullable:!0,json:{type:be.jsonValues,default:null,read:{reader:be.read},write:{isRequired:!0,writer:be.write}}})],he.prototype,"interactionMode",void 0),Object(i.a)([Object(j.b)({type:Number,json:{read:{source:"numberOfStops"},write:{target:"numberOfStops",overridePolicy(){const e=null!=this.stopInterval;return{enabled:!e,isRequired:!e}}}}})],he.prototype,"numStops",void 0),Object(i.a)([Object(j.b)({type:Number,json:{write:{overridePolicy(){return{isRequired:null==this.numStops}}}}})],he.prototype,"stopInterval",void 0),he=de=Object(i.a)([Object(w.a)("esri.webdoc.widgets.Range")],he);var me,ye=he,fe=r(129),Oe=r(219),je=r(114);let ge=me=class extends R.a{constructor(e){super(e),this.currentTimeExtent=null,this.fullTimeExtent=null,this.loop=!1,this.numStops=null,this.numThumbs=null,this.stopDelay=null,this.stopInterval=null,this.stops=null}readCurrentTimeExtent(e){if(!e)return;const t=null!=e[0]?new Date(e[0]):null,r=null!=e[1]?new Date(e[1]):null;return new fe.a({start:t,end:r})}writeCurrentTimeExtent(e,t,r){e&&Object(je.c)(r,[Object(b.k)(e.start)?e.start.getTime():null,Object(b.k)(e.end)?e.end.getTime():null],t)}readFullTimeExtent(e,t){const r=t.properties;if(!r)return;const i=null!=r.endTime?new Date(r.endTime):null,o=null!=r.startTime?new Date(r.startTime):null;return new fe.a({start:o,end:i})}writeFullTimeExtent(e,t){if(!e)return;const r=t.properties=t.properties||{},i=e.end,o=e.start;i&&(r.endTime=Object(b.k)(i)?i.getTime():null),o&&(r.startTime=Object(b.k)(o)?o.getTime():null)}readStopInterval(e,t,r){return e?Oe.a.fromJSON({value:e.interval,unit:e.units},r):null}writeStopInterval(e,t,r,i){if(!e)return;const o=e.toJSON(i);Object(je.c)(r,{interval:o.value,units:o.unit},t)}readStops(e){return e&&e.length?e.map((e=>new Date(e))):null}writeStops(e,t,r){e&&e.length&&Object(je.c)(r,e.map((e=>e.getTime())),t)}clone(){return new me(Object(ae.a)({currentTimeExtent:this.currentTimeExtent,fullTimeExtent:this.fullTimeExtent,loop:this.loop,numStops:this.numStops,numThumbs:this.numThumbs,stopDelay:this.stopDelay,stopInterval:this.stopInterval,stops:this.stops}))}};Object(i.a)([Object(j.b)({type:fe.a,json:{read:{source:"properties.currentTimeExtent"},write:{target:"properties.currentTimeExtent"}}})],ge.prototype,"currentTimeExtent",void 0),Object(i.a)([Object(v.a)("currentTimeExtent")],ge.prototype,"readCurrentTimeExtent",null),Object(i.a)([Object(k.a)("currentTimeExtent")],ge.prototype,"writeCurrentTimeExtent",null),Object(i.a)([Object(j.b)({type:fe.a,json:{read:{source:["properties.endTime","properties.startTime"]},write:{target:{"properties.endTime":{type:Number},"properties.startTime":{type:Number}}}}})],ge.prototype,"fullTimeExtent",void 0),Object(i.a)([Object(v.a)("fullTimeExtent")],ge.prototype,"readFullTimeExtent",null),Object(i.a)([Object(k.a)("fullTimeExtent")],ge.prototype,"writeFullTimeExtent",null),Object(i.a)([Object(j.b)({type:Boolean,nonNullable:!0,json:{default:!1,read:{source:"properties.loop"},write:{target:"properties.loop"}}})],ge.prototype,"loop",void 0),Object(i.a)([Object(j.b)({type:Number,json:{read:{source:"properties.numberOfStops"},write:{target:"properties.numberOfStops",overridePolicy(){var e;const t=!!this.stopInterval,r=!(null==(e=this.stops)||!e.length),i=!(t||r);return{enabled:i,isRequired:i}}}}})],ge.prototype,"numStops",void 0),Object(i.a)([Object(j.b)({type:[1,2],nonNullable:!0,json:{read:{source:"properties.thumbCount"},write:{target:"properties.thumbCount",isRequired:!0}}})],ge.prototype,"numThumbs",void 0),Object(i.a)([Object(j.b)({type:Number,nonNullable:!0,json:{read:{source:"properties.thumbMovingRate"},write:{target:"properties.thumbMovingRate",isRequired:!0}}})],ge.prototype,"stopDelay",void 0),Object(i.a)([Object(j.b)({type:Oe.a,json:{read:{source:"properties.timeStopInterval"},write:{target:"properties.timeStopInterval",overridePolicy(){var e;const t=null!=this.numStops,r=!(null==(e=this.stops)||!e.length);return{enabled:!r,isRequired:!(t||r)}}}}})],ge.prototype,"stopInterval",void 0),Object(i.a)([Object(v.a)("stopInterval")],ge.prototype,"readStopInterval",null),Object(i.a)([Object(k.a)("stopInterval")],ge.prototype,"writeStopInterval",null),Object(i.a)([Object(j.b)({type:[Date],json:{read:{source:"properties.stops"},write:{target:"properties.stops",overridePolicy(){return{isRequired:null==this.numStops&&!this.stopInterval}}}}})],ge.prototype,"stops",void 0),Object(i.a)([Object(v.a)("stops")],ge.prototype,"readStops",null),Object(i.a)([Object(k.a)("stops")],ge.prototype,"writeStops",null),ge=me=Object(i.a)([Object(w.a)("esri.webdoc.widgets.TimeSlider")],ge);var ve,we=ge;let ke=ve=class extends R.a{constructor(e){super(e),this.range=null,this.timeSlider=null,this.floorFilter=null}clone(){return new ve(Object(ae.a)({range:this.range,timeSlider:this.timeSlider,floorFilter:this.floorFilter}))}};Object(i.a)([Object(j.b)({type:ye,json:{write:!0}})],ke.prototype,"range",void 0),Object(i.a)([Object(j.b)({type:we,json:{write:!0}})],ke.prototype,"timeSlider",void 0),Object(i.a)([Object(j.b)({type:pe,json:{write:!0}})],ke.prototype,"floorFilter",void 0),ke=ve=Object(i.a)([Object(w.a)("esri.webdoc.Widgets")],ke);var _e=ke;const Se={width:600,height:400},xe=1.5;var Ie=r(560);function Te(e){return{enabled:!(null==e||!e.length)}}var Ee,Ce=r(90),Ne=r(236);let Ae=Ee=class extends R.a{constructor(e){super(e),this.exactMatch=!1,this.name=null,this.type=null}clone(){return new Ee({exactMatch:this.exactMatch,type:this.type,name:this.name})}};Object(i.a)([Object(j.b)({type:Boolean,json:{write:!0}})],Ae.prototype,"exactMatch",void 0),Object(i.a)([Object(j.b)({type:String,json:{write:!0}})],Ae.prototype,"name",void 0),Object(i.a)([Object(Ce.a)(Ne.a)],Ae.prototype,"type",void 0),Ae=Ee=Object(i.a)([Object(w.a)("esri.webdoc.applicationProperties.SearchLayerField")],Ae);var Be,Me=Ae;let Le=Be=class extends R.a{constructor(e){super(e),this.field=null,this.id=null,this.subLayer=null}clone(){return new Be(Object(ae.a)({field:this.field,id:this.id,subLayer:this.subLayer}))}};Object(i.a)([Object(j.b)({type:Me,json:{write:{isRequired:!0}}})],Le.prototype,"field",void 0),Object(i.a)([Object(j.b)({type:String,json:{write:{isRequired:!0}}})],Le.prototype,"id",void 0),Object(i.a)([Object(j.b)({type:g.a,json:{write:!0}})],Le.prototype,"subLayer",void 0),Le=Be=Object(i.a)([Object(w.a)("esri.webdoc.applicationProperties.SearchLayer")],Le);var Ue,Fe=Le;let Re=Ue=class extends R.a{constructor(e){super(e),this.exactMatch=!1,this.name=null,this.type=null}clone(){return new Ue({exactMatch:this.exactMatch,type:this.type,name:this.name})}};Object(i.a)([Object(j.b)({type:Boolean,json:{write:!0}})],Re.prototype,"exactMatch",void 0),Object(i.a)([Object(j.b)({type:String,json:{write:!0}})],Re.prototype,"name",void 0),Object(i.a)([Object(Ce.a)(Ne.a)],Re.prototype,"type",void 0),Re=Ue=Object(i.a)([Object(w.a)("esri.webdoc.applicationProperties.SearchTableField")],Re);var Pe,De=Re;let qe=Pe=class extends R.a{constructor(e){super(e),this.field=null,this.id=null}clone(){return new Pe(Object(ae.a)({field:this.field,id:this.id}))}};Object(i.a)([Object(j.b)({type:De,json:{write:{isRequired:!0}}})],qe.prototype,"field",void 0),Object(i.a)([Object(j.b)({type:String,json:{write:{isRequired:!0}}})],qe.prototype,"id",void 0),qe=Pe=Object(i.a)([Object(w.a)("esri.webdoc.applicationProperties.SearchTable")],qe);var Ve,Je=qe;const Ge=l.a.ofType(Fe),$e=l.a.ofType(Je);let We=Ve=class extends R.a{constructor(e){super(e),this.addressSearchEnabled=!0,this.enabled=!0,this.hintText=null,this.layers=new Ge,this.tables=new $e}readAddressSearchEnabled(e){return!e}writeAddressSearchEnabled(e,t,r){t[r]=!e}clone(){return new Ve(Object(ae.a)({addressSearchEnabled:this.addressSearchEnabled,enabled:this.enabled,hintText:this.hintText,layers:this.layers,tables:this.tables}))}};Object(i.a)([Object(j.b)({type:Boolean,nonNullable:!0,json:{read:{source:"disablePlaceFinder"},write:{target:"disablePlaceFinder",isRequired:!0},origins:{"web-scene":{read:!1,write:!1}}}})],We.prototype,"addressSearchEnabled",void 0),Object(i.a)([Object(v.a)("addressSearchEnabled")],We.prototype,"readAddressSearchEnabled",null),Object(i.a)([Object(k.a)("addressSearchEnabled")],We.prototype,"writeAddressSearchEnabled",null),Object(i.a)([Object(j.b)({type:Boolean,nonNullable:!0,json:{write:!0,origins:{"web-map":{write:{isRequired:!0}},"web-scene":{default:!0,write:!0}}}})],We.prototype,"enabled",void 0),Object(i.a)([Object(j.b)({type:String,json:{write:!0}})],We.prototype,"hintText",void 0),Object(i.a)([Object(j.b)({type:Ge,json:{write:{overridePolicy:Te},origins:{"web-scene":{write:{isRequired:!0}}}}})],We.prototype,"layers",void 0),Object(i.a)([Object(j.b)({type:$e,json:{read:!0,write:{overridePolicy:Te},origins:{"web-scene":{read:!1,write:!1}}}})],We.prototype,"tables",void 0),We=Ve=Object(i.a)([Object(w.a)("esri.webdoc.applicationProperties.Search")],We);var Ke,ze=We;let He=Ke=class extends R.a{constructor(e){super(e),this.search=null}clone(){return new Ke(Object(ae.a)({search:this.search}))}};Object(i.a)([Object(j.b)({type:ze,json:{write:!0}})],He.prototype,"search",void 0),He=Ke=Object(i.a)([Object(w.a)("esri.webdoc.applicationProperties.Viewing")],He);var Ye,Qe=He;let Xe=Ye=class extends R.a{constructor(e){super(e),this.editing=null,this.offline=null,this.viewing=null}clone(){return new Ye(Object(ae.a)({editing:this.editing,offline:this.offline,viewing:this.viewing}))}};Object(i.a)([Object(j.b)({json:{write:!0}})],Xe.prototype,"editing",void 0),Object(i.a)([Object(j.b)({json:{write:!0}})],Xe.prototype,"offline",void 0),Object(i.a)([Object(j.b)({type:Qe,json:{write:!0}})],Xe.prototype,"viewing",void 0),Xe=Ye=Object(i.a)([Object(w.a)("esri.webmap.ApplicationProperties")],Xe);var Ze,et=Xe,tt=r(936),rt=r(89),it=r(805);let ot=Ze=class extends rt.a{constructor(e){super(e),this.background=null,this.rangeInfo=null,this.spatialReference=null,this.viewpoint=null}clone(){return new Ze(Object(ae.a)({background:this.background,rangeInfo:this.rangeInfo,spatialReference:this.spatialReference,viewpoint:this.viewpoint}))}};Object(i.a)([Object(j.b)({type:it.a})],ot.prototype,"background",void 0),Object(i.a)([Object(j.b)({type:ce})],ot.prototype,"rangeInfo",void 0),Object(i.a)([Object(j.b)({type:x.a})],ot.prototype,"spatialReference",void 0),Object(i.a)([Object(j.b)({type:a.a})],ot.prototype,"viewpoint",void 0),ot=Ze=Object(i.a)([Object(w.a)("esri.webmap.InitialViewProperties")],ot);var nt=ot,at=r(635);class st extends at.a{constructor(e,t){super(e,t,"webmap")}}const lt=new st(2,20),ct="Web Map",ut=l.a.ofType(tt.a),dt=l.a.ofType($),pt=p.a.getLogger("esri.WebMap"),bt=new Map;bt.set("image/jpeg","jpeg"),bt.set("image/jpg","jpg"),bt.set("image/png","png"),bt.set("image/gif","gif");const ht="ArcGIS API for JavaScript",mt="CollectorDisabled",yt="Collector",ft="Data Editing",Ot="OfflineDisabled",jt="Offline",gt="Workforce Project",vt="Workforce Worker",wt="Workforce Dispatcher",kt="DeveloperBasemap",_t=["NatGeo_World_Map","Ocean_Basemap","USA_Topo_Maps","World_Imagery","World_Street_Map","World_Terrain_Base","World_Topo_Map","World_Hillshade","Canvas/World_Light_Gray_Base","Canvas/World_Light_Gray_Reference","Canvas/World_Dark_Gray_Base","Canvas/World_Dark_Gray_Reference","Ocean/World_Ocean_Base","Ocean/World_Ocean_Reference","Reference/World_Boundaries_and_Places","Reference/World_Reference_Overlay","Reference/World_Transportation"].map((e=>e.toLowerCase()));let St=class extends(Object(h.a)(u.a.LoadableMixin(Object(m.b)(n.a)))){constructor(e){super(e),this.applicationProperties=null,this.bookmarks=new ut,this.floorInfo=null,this.initialViewProperties=new nt,this.portalItem=null,this.presentation=null,this.sourceVersion=null,this.widgets=null,this.utilityNetworks=null,this.authoringApp=this.authoringAppVersion=null,this._isAuthoringAppSetByUser=this._isAuthoringAppVersionSetByUser=!1}destroy(){const e=this.portalItem;this.portalItem=null,null==e||e.destroy()}initialize(){if(this.when().catch((e=>{pt.error("#load()","Failed to load web map",e)})),this.resourceInfo){let t;try{t=this._validateJSON(this.resourceInfo)}catch(e){return void this.addResolvingPromise(Promise.reject(e))}this.read(t)}}set authoringApp(e){this._isAuthoringAppSetByUser=!0,this._set("authoringApp",e)}writeAuthoringApp(e,t){e&&this._isAuthoringAppSetByUser?t.authoringApp=e:t.authoringApp=ht}set authoringAppVersion(e){this._isAuthoringAppVersionSetByUser=!0,this._set("authoringAppVersion",e)}writeAuthoringAppVersion(e,t){e&&this._isAuthoringAppVersionSetByUser?t.authoringAppVersion=e:t.authoringAppVersion=o.d}readInitialViewProperties(e,t){var r;const i=new nt;t.background&&(i.background=it.a.fromJSON(t.background));const o=null==(r=t.initialState)?void 0:r.viewpoint;return o&&(o.rotation&&st.parse(t.version||"","webmap").lessThan(2,20)&&"ArcGIS Pro"===t.authoringApp&&(o.rotation*=-1),i.viewpoint=a.a.fromJSON(o)),t.mapRangeInfo&&(i.rangeInfo=ce.fromJSON(t.mapRangeInfo)),t.spatialReference&&(i.spatialReference=x.a.fromJSON(t.spatialReference)),i}writeInitialViewProperties(e,t,r,i){if(!e)return;const o=e.background;o&&o.color&&(t.background=o.write(null,i)),e.viewpoint&&(t.initialState={viewpoint:e.viewpoint.write(null,i)}),e.rangeInfo&&(t.mapRangeInfo=e.rangeInfo.toJSON(i)),e.spatialReference&&(t.spatialReference=e.spatialReference.write(null,i))}writeLayers(e,t,r,i){t[r]=this._writeLayers(e,i,"operational-layers")}readSourceVersion(e,t){const[r,i]=t.version.split(".");return new st(parseInt(r,10),parseInt(i,10))}writeSourceVersion(e,t,r){t[r]=`${lt.major}.${lt.minor}`}writeTables(e,t,r,i){const o=this._writeLayers(e,i,"tables");o.length&&(t[r]=o)}get thumbnailUrl(){return this.portalItem&&this.portalItem.thumbnailUrl||null}set thumbnailUrl(e){e?(this._override("thumbnailUrl",e),this._thumbnailFilename=this._generateCustomThumbnailFilename(e)):this._clearThumbnailOverride()}load(e){return this.addResolvingPromise(this._loadFromSource()),Promise.resolve(this)}loadAll(){return Object(d.a)(this,(e=>{e(this.ground,this.basemap,this.layers,this.tables)}))}read(e,t){t={...t,origin:"web-map"};const r=this._getAuthoringPropsState();Object(S.b)(this,e,(t=>super.read(e,t)),t),this._restoreAuthoringPropsFromState(r)}write(e,t){if("loaded"!==this.loadStatus){const e=new c.a("webmap:not-loaded","Web map must be loaded before it can be serialized");throw pt.error("#toJSON()","Web map must be loaded before it can be serialized",this.loadError||this.loadStatus),e}return this._removeDanglingLayerRefs(),t={...t,origin:"web-map",restrictedWebMapWriting:!0,webmap:this},super.write(e,t)}async save(e){e=e||{},this._validateItem(),await this._updateFromPromise,await this.load(),await this._loadLayerContainers(),await this._beforeSave(),this._validateMap();const t=this.portalItem,r={origin:"web-map",messages:[],writtenProperties:[],url:t.itemUrl&&Object(f.K)(t.itemUrl),portal:t.portal||W.a.getDefault()},i=this.write(null,r);return this._validateJSONForWriting(r,e),await this._updateItemProperties(t),await this._updateItem(t,i,r),await this._updateItemThumbnail(),t}async saveAs(e,t){t=t||{};const r=this._getPortalItem(e);await this._updateFromPromise,await this.load(),await this._loadLayerContainers(),await this._beforeSave(),this._validateMap();const i={origin:"web-map",messages:[],writtenProperties:[],url:null,portal:r.portal},o=this.write(null,i);this._validateJSONForWriting(i,t),await this._updateItemPropertiesForSaveAs(r);const n=this._getThumbnailState();return await this._createItem(r,o,i,t),this._restoreThumbnailFromState(n),await this._updateItemThumbnail(),r}async updateFrom(e,t){const r=this._updateFromInternal(e,t);this._updateFromPromise=r,await r,r===this._updateFromPromise&&(this._updateFromPromise=null)}getLayerJSONFromResourceInfo(e){var t,r,i,o;const n=this.resourceInfo;return this._collectAllLayersJSON(Object(s.d)([null==n||null==(t=n.baseMap)?void 0:t.baseMapLayers,null==n?void 0:n.operationalLayers,null==(r=this.basemap)||null==(i=r.resourceInfo)||null==(o=i.data)?void 0:o.baseMapLayers])).find((t=>t.id===e.id))}_collectAllLayersJSON(e){return e.reduce(((e,t)=>(e.push(t),"GroupLayer"===t.layerType&&(e=e.concat(this._collectAllLayersJSON(t.layers||[]))),e)),[])}_writeLayers(e,t,r){return t={...t,layerContainerType:r},e.map((e=>Object(b.s)(Object(Ie.a)(e,"tables"===r?null:this.getLayerJSONFromResourceInfo(e),t)))).filter(Boolean).toArray()}_loadFromSource(){return this.resourceInfo?this._loadFromJSON(this.resourceInfo,{origin:"web-map"}):this.portalItem&&this.portalItem.id?this._loadFromItem(this.portalItem):Promise.resolve(null)}_loadFromItem(e){return e.load().catch((e=>{throw new c.a("webmap:load-portal-item","Failed to load portal item",{error:e})})).then((()=>{if("Web Map"!==e.type)throw new c.a("webmap:invalid-portal-item","Invalid portal item type '${type}', expected 'Web Map'",{type:e.type})})).then((()=>e.fetchData())).then((t=>(this.resourceInfo=t,this._readAndLoadFromJSON(t,{origin:"web-map",portal:e.portal||W.a.getDefault()})))).then((()=>this._computeInitialViewpoint()))}_readAndLoadFromJSON(e,t){const r=this._validateJSON(e);return this.read(r,t),this._loadFromJSON(r,t)}_validateJSON(e){const t=st.parse(e.version||"","webmap");return lt.validate(t),e.version=`${t.major}.${t.minor}`,e}_loadFromJSON(e,t){const i={context:{...t,layerContainerType:"operational-layers"}};return this.portalItem&&(i.context.portal=this.portalItem.portal||W.a.getDefault()),r.e(45).then(r.bind(null,923)).then((({populateOperationalLayers:t})=>{const r=[],o=e.operationalLayers;o&&o.length&&r.push(t(this.layers,o,i));const n={...i,context:{...i.context,layerContainerType:"tables"},defaultLayerType:"ArcGISFeatureLayer"},a=e.tables;return a&&a.length&&r.push(t(this.tables,a,n)),Object(y.j)(r).then((()=>{}))}))}async _computeInitialViewpoint(){var e,t;let r=this.initialViewProperties;if(null==(e=r)||null==(t=e.viewpoint)?void 0:t.targetGeometry)return;const i=await this._getExtentFromItem();i&&(r=r?r.clone():new nt,r.viewpoint=new a.a,r.viewpoint.targetGeometry=i,this.initialViewProperties=r)}async _getExtentFromItem(){var e,t;const i=null==(e=this.initialViewProperties)?void 0:e.spatialReference,o=null==(t=this.portalItem)?void 0:t.extent;return i&&o?i.isWGS84?o.clone():i.isWebMercator?Object(I.b)(o):(await r.e(31).then(r.bind(null,955))).create(this.portalItem).then((e=>{const t=new H.a;return t.geometries=[o],t.outSpatialReference=i,e.project(t)})).then((e=>e[0])).catch((e=>(pt.error("Error projecting item's extent:",e),null))):null}_removeDanglingLayerRefs(){const e=this.applicationProperties,t=e&&e.viewing&&e.viewing.search,r=e=>!!this.allLayers.find((t=>t.id===e));t&&t.layers&&(t.layers=t.layers.filter((e=>r(e.id)))),t&&t.tables&&(t.tables=t.tables.filter((e=>!!this.tables.find((t=>t.id===e.id)))));const i=e&&e.editing&&e.editing.locationTracking;i&&i.info&&!r(i.info.layerId)&&(e.editing=null);const o=this.presentation&&this.presentation.slides;o&&o.forEach((e=>{e.visibleLayers&&(e.visibleLayers=e.visibleLayers.filter((e=>r(e.id))))}))}_validateMap(){if(!this.basemap||!this.basemap.baseLayers.length)throw new c.a("webmap:save","Map does not have a valid basemap with a base layer.")}_validateItem(){if(!this.portalItem)throw pt.error("save: requires the portalItem property to be set"),new c.a("webmap:portal-item-not-set","Portal item to save to has not been set on the WebMap");this._validateItemType(this.portalItem)}_validateItemType(e){if(e.type!==ct)throw new c.a("webmap:portal-item-wrong-type",`Portal item needs to have type "${ct}"`)}_loadLayerContainers(){const e=[];return this.basemap&&e.push(this.basemap.load()),this.ground&&e.push(this.ground.load()),Object(y.j)(e).then((()=>{}))}async _beforeSave(){const e=[];for(const t of this.allLayers)if("beforeSave"in t&&"function"==typeof t.beforeSave){const r=t.beforeSave();r&&e.push(r)}await Object(y.j)(e)}_loadAllLayers(){const e=this._getAllLayersAndTables().map((e=>e.load()));return Object(y.j)(e).then((()=>{}))}_getAllLayersAndTables(){return this.allLayers.concat(this.allTables)}_validateJSONForWriting(e,t){let r=e.messages.filter((e=>"error"===e.type)).map((e=>new c.a(e.name,e.message,e.details)));if(t.ignoreUnsupported&&(r=r.filter((e=>"layer:unsupported"!==e.name&&"symbol:unsupported"!==e.name&&"symbol-layer:unsupported"!==e.name&&"property:unsupported"!==e.name&&"url:unsupported"!==e.name))),r.length>0)throw new c.a("webmap:save","Failed to save webmap due to unsupported or invalid content. See 'details.errors' for more detailed information",{errors:r})}async _updateItemProperties(e){e.extent=await this._getWGS84Extent(this.initialViewProperties.viewpoint.targetGeometry),await this._updateTypeKeywords(e)}async _updateItemPropertiesForSaveAs(e){Object(z.c)(e,mt),Object(z.c)(e,Ot),Object(z.c)(e,gt),Object(z.c)(e,vt),Object(z.c)(e,wt),Object(z.c)(e,"Offline Map Areas"),Object(z.c)(e,"FieldMapsDisabled"),await this._updateItemProperties(e)}async _getWGS84Extent(e){const t=e.clone().normalize();let r;if(t.length>1)for(const i of t)r?i.width>r.width&&(r=i):r=i;else r=t[0];return this._projectToWGS84(r)}async _projectToWGS84(e){const t=e.spatialReference;if(t.isWGS84)return e.clone();if(t.isWebMercator)return Object(I.e)(e);const i=await r.e(31).then(r.bind(null,955)),o=await i.create(this.portalItem),n=new H.a;return n.geometries=[e],n.outSpatialReference=x.a.WGS84,(await o.project(n))[0]}async _updateTypeKeywords(e){Object(z.a)(e,ht),await this._loadAllLayers(),this._evalCollectorKeyword(e),this._evalDataEditingKeyword(e),this._evalOfflineKeyword(e),this._evalDeveloperBasemapKeyword(e),e.typeKeywords&&(e.typeKeywords=e.typeKeywords.filter(((e,t,r)=>r.indexOf(e)===t)))}_evalCollectorKeyword(e){Object(z.b)(e,mt)||Object(z.b)(e,gt)||Object(z.b)(e,vt)||Object(z.b)(e,wt)||!this._hasEditableFeatureLayer()?Object(z.c)(e,yt):Object(z.a)(e,yt)}_evalDataEditingKeyword(e){this._hasEditableFeatureLayer()?Object(z.a)(e,ft):Object(z.c)(e,ft)}_evalOfflineKeyword(e){!Object(z.b)(e,Ot)&&this._isOfflineCapableMap()?Object(z.a)(e,jt):Object(z.c)(e,jt)}_evalDeveloperBasemapKeyword(e){Object(Y.f)(this.basemap)?Object(z.a)(e,kt):Object(z.c)(e,kt)}_hasEditableFeatureLayer(){return this._getAllLayersAndTables().some((e=>e.loaded&&this._isFeatureServiceLayer(e)&&e.capabilities.operations.supportsEditing&&e.editingEnabled))}_isFeatureServiceLayer(e){return!("feature"!==e.type||!e.source||"feature-layer"!==e.source.type)}_isOfflineCapableMap(){return this._getAllLayersAndTables().filter((e=>"group"!==e.type)).every((e=>e.loaded&&this._isOfflineCapableLayer(e)))}_isOfflineCapableLayer(e){return this._isFeatureServiceLayer(e)&&e.capabilities.operations.supportsSync||("tile"===e.type||"vector-tile"===e.type)&&(e.capabilities.operations.supportsExportTiles||this._isExportableAGOLTileLayer(e)||Object(Y.g)(e))&&e.spatialReference.equals(this.initialViewProperties.spatialReference)}_isExportableAGOLTileLayer(e){return"tile"===e.type&&Object(T.d)(e.url)&&_t.some((t=>e.url.toLowerCase().indexOf("/"+t+"/")>-1))}async _updateItem(e,t,r){await e.update({data:t}),this._syncUpInstanceWithItem(e,t,r)}async _createItem(e,t,r,i){const o=this.portalItem,n=!!(o&&o.id&&o.portal.user),a=e.portal;if(await a._signIn(),!await this._canCopyItem(o,n,a))throw new c.a("webmap:save-as-copy-not-allowed","Owner of this map does not allow others to save a copy");await a.user.addItem({item:e,folder:i.folder,data:t}),this.portalItem=e,this._syncUpInstanceWithItem(e,t,r)}async _canCopyItem(e,t,r){return!(Object(b.k)(e)&&e.id&&e.typeKeywords&&e.typeKeywords.indexOf("useOnly")>-1)||e.portal.portalHostname===r.portalHostname&&(t||await e.reload(),"admin"===e.itemControl||"update"===e.itemControl)}_syncUpInstanceWithItem(e,t,r){h.b.prototype.read.call(this,{version:t.version,authoringApp:t.authoringApp,authoringAppVersion:t.authoringAppVersion},{origin:"web-map",ignoreDefaults:!0,url:e.itemUrl&&Object(f.K)(e.itemUrl)}),Object(_.a)(r),this.resourceInfo=t}async _updateItemThumbnail(){this.thumbnailUrl&&this._isOverridden("thumbnailUrl")&&(await this.portalItem.updateThumbnail({thumbnail:this.thumbnailUrl,filename:this._thumbnailFilename}),this._clearThumbnailOverride())}_getPortalItem(e){let t=K.default.from(e);return t.id&&(t=t.clone(),t.id=null),t.type||(t.type=ct),t.portal||(t.portal=W.a.getDefault()),this._validateItemType(t),t}async _updateFromInternal(e,t){t=t||{},await Object(O.l)(e,"ready"),this._updateInitialViewProperties(e,t),await this._updateThumbnailUrl(e,t)}_updateInitialViewProperties(e,t){var r;if(t.backgroundExcluded||(this.initialViewProperties.background=null==(r=e.background)?void 0:r.clone()),this.initialViewProperties.spatialReference=e.spatialReference.clone(),t.viewpointExcluded||(this.initialViewProperties.viewpoint=new a.a({rotation:e.rotation,scale:t.scalePreserved?e.scale:null,targetGeometry:this._getViewExtent(e)})),!t.widgetsExcluded)for(const i of e.persistableViewModels)i.updateWebDocument(this)}_getViewExtent(e){const t=e.center.clone().normalize(),r=e.extent.clone(),i=r.width/2;return r.xmin=t.x-i,r.xmax=t.x+i,r}async _updateThumbnailUrl(e,t){if(t.thumbnailExcluded)return;const r=function(e,t){t=t||Se;let{width:r,height:i}=t;const o=r/i;return o<xe?i=r/xe:o>xe&&(r=i*xe),r>e.width&&(i*=e.width/r,r=e.width),i>e.height&&(r*=e.height/i,i=e.height),{width:Math.round(r),height:Math.round(i)}}(e,t.thumbnailSize),i=await e.takeScreenshot({format:"png",width:r.width,height:r.height});this._setAutoGeneratedThumbnail(i.dataUrl)}_setAutoGeneratedThumbnail(e){this.thumbnailUrl=e,this._thumbnailFilename=null}_clearThumbnailOverride(){this._clearOverride("thumbnailUrl"),this.clear("thumbnailUrl","user"),this._thumbnailFilename=null}_generateCustomThumbnailFilename(e){if(Object(f.u)(e)){const t=Object(f.i)(e),r=t&&t.mediaType,i=r&&bt.get(r.toLowerCase())||null,o=`thumbnail${Date.now()}`;return i?`${o}.${i}`:o}return null}_getThumbnailState(){let e=this.thumbnailUrl;return e&&(e=this._isOverridden("thumbnailUrl")?e:Object(f.d)(e,"w","8192")),{thumbnailUrl:e,filename:this._thumbnailFilename}}_restoreThumbnailFromState(e){this.thumbnailUrl=e.thumbnailUrl,this._thumbnailFilename=e.filename}_getAuthoringPropsState(){return{authoringApp:this.authoringApp,authoringAppVersion:this.authoringAppVersion,isAuthoringAppSetByUser:this._isAuthoringAppSetByUser,isAuthoringAppVersionSetByUser:this._isAuthoringAppVersionSetByUser}}_restoreAuthoringPropsFromState(e){e.isAuthoringAppSetByUser?this.authoringApp=e.authoringApp:this._isAuthoringAppSetByUser=!1,e.isAuthoringAppVersionSetByUser?this.authoringAppVersion=e.authoringAppVersion:this._isAuthoringAppVersionSetByUser=!1}static fromJSON(e){const t=e;if(!t)throw new c.a("webmap:empty-resource","Expected a JSON resource but got nothing");return new this({resourceInfo:t})}};St.VERSION=lt,Object(i.a)([Object(j.b)({type:et,json:{write:!0}})],St.prototype,"applicationProperties",void 0),Object(i.a)([Object(j.b)({type:String,json:{write:{allowNull:!0,ignoreOrigin:!0}}})],St.prototype,"authoringApp",null),Object(i.a)([Object(k.a)("authoringApp")],St.prototype,"writeAuthoringApp",null),Object(i.a)([Object(j.b)({type:String,json:{write:{allowNull:!0,ignoreOrigin:!0}}})],St.prototype,"authoringAppVersion",null),Object(i.a)([Object(k.a)("authoringAppVersion")],St.prototype,"writeAuthoringAppVersion",null),Object(i.a)([Object(j.b)({json:{read:{source:"baseMap"},write:{target:"baseMap"}}})],St.prototype,"basemap",void 0),Object(i.a)([Object(j.b)({type:ut,json:{write:{overridePolicy:e=>({enabled:!!(e&&e.length>0),ignoreOrigin:!0})}}})],St.prototype,"bookmarks",void 0),Object(i.a)([Object(j.b)({type:ne,json:{read:{source:"mapFloorInfo"},write:{target:"mapFloorInfo"}}})],St.prototype,"floorInfo",void 0),Object(i.a)([Object(j.b)({type:nt,nonNullable:!0,json:{read:{source:["background","initialState.viewpoint","mapRangeInfo","spatialReference"]},write:{ignoreOrigin:!0,target:{background:{type:it.a},"initialState.viewpoint":{type:a.a},mapRangeInfo:{type:ce},spatialReference:{type:x.a}}}}})],St.prototype,"initialViewProperties",void 0),Object(i.a)([Object(v.a)("initialViewProperties")],St.prototype,"readInitialViewProperties",null),Object(i.a)([Object(k.a)("initialViewProperties")],St.prototype,"writeInitialViewProperties",null),Object(i.a)([Object(j.b)({json:{read:!1,write:{target:"operationalLayers",ignoreOrigin:!0}}})],St.prototype,"layers",void 0),Object(i.a)([Object(k.a)("layers")],St.prototype,"writeLayers",null),Object(i.a)([Object(j.b)({type:K.default})],St.prototype,"portalItem",void 0),Object(i.a)([Object(j.b)({json:{write:!0}})],St.prototype,"presentation",void 0),Object(i.a)([Object(j.b)()],St.prototype,"resourceInfo",void 0),Object(i.a)([Object(j.b)({readOnly:!0,type:st,json:{read:{source:"version"},write:{allowNull:!0,ignoreOrigin:!0,target:"version",isRequired:!0}}})],St.prototype,"sourceVersion",void 0),Object(i.a)([Object(v.a)("sourceVersion")],St.prototype,"readSourceVersion",null),Object(i.a)([Object(k.a)("sourceVersion")],St.prototype,"writeSourceVersion",null),Object(i.a)([Object(j.b)({json:{read:!1,write:{ignoreOrigin:!0}}})],St.prototype,"tables",void 0),Object(i.a)([Object(k.a)("tables")],St.prototype,"writeTables",null),Object(i.a)([Object(j.b)()],St.prototype,"thumbnailUrl",null),Object(i.a)([Object(j.b)({type:_e,json:{write:!0}})],St.prototype,"widgets",void 0),Object(i.a)([Object(j.b)({type:dt,json:{read:!0,write:!0}})],St.prototype,"utilityNetworks",void 0),St=Object(i.a)([Object(w.a)("esri.WebMap")],St);var xt=St;t.a=xt},129:function(e,t,r){"use strict";var i,o=r(76),n=r(81),a=r(80),s=r(166),l=r(78),c=(r(74),r(79),r(75),r(87)),u=r(77),d=r(86);let p=i=class extends n.a{constructor(e){super(e),this.end=null,this.start=null}static get allTime(){return b}static get empty(){return h}readEnd(e,t){return null!=t.end?new Date(t.end):null}writeEnd(e,t){t.end=e?e.getTime():null}get isAllTime(){return this.equals(i.allTime)}get isEmpty(){return this.equals(i.empty)}readStart(e,t){return null!=t.start?new Date(t.start):null}writeStart(e,t){t.start=e?e.getTime():null}clone(){return new i({end:this.end,start:this.start})}expandTo(e){if(this.isEmpty||this.isAllTime)return this.clone();const t=Object(a.b)(this.start,(t=>Object(s.c)(t,e))),r=Object(a.b)(this.end,(t=>Object(s.b)(Object(s.c)(t,e),1,e)));return new i({start:t,end:r})}intersection(e){if(!e)return this.clone();if(this.isEmpty||e.isEmpty)return i.empty;if(this.isAllTime)return e.clone();if(e.isAllTime)return this.clone();const t=Object(a.n)(this.start,-1/0,(e=>e.getTime())),r=Object(a.n)(this.end,1/0,(e=>e.getTime())),o=Object(a.n)(e.start,-1/0,(e=>e.getTime())),n=Object(a.n)(e.end,1/0,(e=>e.getTime()));let s,l;if(o>=t&&o<=r?s=o:t>=o&&t<=n&&(s=t),r>=o&&r<=n?l=r:n>=t&&n<=r&&(l=n),!isNaN(s)&&!isNaN(l)){const e=new i;return e.start=s===-1/0?null:new Date(s),e.end=l===1/0?null:new Date(l),e}return i.empty}offset(e,t){if(this.isEmpty||this.isAllTime)return this.clone();const r=new i,{start:o,end:n}=this;return Object(a.k)(o)&&(r.start=Object(s.b)(o,e,t)),Object(a.k)(n)&&(r.end=Object(s.b)(n,e,t)),r}equals(e){if(!e)return!1;const t=Object(a.k)(this.start)?this.start.getTime():this.start,r=Object(a.k)(this.end)?this.end.getTime():this.end,i=Object(a.k)(e.start)?e.start.getTime():e.start,o=Object(a.k)(e.end)?e.end.getTime():e.end;return t===i&&r===o}union(e){if(!e||e.isEmpty)return this.clone();if(this.isEmpty)return e.clone();if(this.isAllTime||e.isAllTime)return b.clone();const t=Object(a.k)(this.start)&&Object(a.k)(e.start)?new Date(Math.min(this.start.getTime(),e.start.getTime())):null,r=Object(a.k)(this.end)&&Object(a.k)(e.end)?new Date(Math.max(this.end.getTime(),e.end.getTime())):null;return new i({start:t,end:r})}};Object(o.a)([Object(l.b)({type:Date,json:{write:{allowNull:!0}}})],p.prototype,"end",void 0),Object(o.a)([Object(c.a)("end")],p.prototype,"readEnd",null),Object(o.a)([Object(d.a)("end")],p.prototype,"writeEnd",null),Object(o.a)([Object(l.b)({readOnly:!0,json:{read:!1}})],p.prototype,"isAllTime",null),Object(o.a)([Object(l.b)({readOnly:!0,json:{read:!1}})],p.prototype,"isEmpty",null),Object(o.a)([Object(l.b)({type:Date,json:{write:{allowNull:!0}}})],p.prototype,"start",void 0),Object(o.a)([Object(c.a)("start")],p.prototype,"readStart",null),Object(o.a)([Object(d.a)("start")],p.prototype,"writeStart",null),p=i=Object(o.a)([Object(u.a)("esri.TimeExtent")],p);const b=new p,h=new p({start:void 0,end:void 0});var m=p;t.a=m},1315:function(e,t,r){"use strict";r.r(t),r.d(t,"Bookmarks",(function(){return Je}));var i=r(1),o=r(76),n=r(292),a=r(176),s=r(109),l=r(75),c=r(105),u=r(137),d=(r(74),r(106)),p=r(78),b=r(77),h=r(860),m=r(149),y=r(89);r(79);let f=class extends y.a{constructor(e){super(e)}get editedBookmark(){const{bookmark:e}=this;return e?this._get("editedBookmark")||e.clone():null}get state(){return this._get("state")}set state(e){this.validationState=void 0,this.loading=void 0,this._set("state",e)}};Object(o.a)([Object(p.b)()],f.prototype,"bookmark",void 0),Object(o.a)([Object(p.b)({readOnly:!0})],f.prototype,"editedBookmark",null),Object(o.a)([Object(p.b)()],f.prototype,"state",null),Object(o.a)([Object(p.b)()],f.prototype,"validationState",void 0),Object(o.a)([Object(p.b)()],f.prototype,"loading",void 0),f=Object(o.a)([Object(b.a)("esri.widgets.Bookmarks.UserState")],f);var O=f,j=r(575),g=r(99),v=r(83),w=r(119),k=r(936),_=r(513);const S="esri.widgets.Bookmarks.BookmarksViewModel",x=l.a.getLogger(S),I=g.a.ofType(k.a),T={width:128,height:128,format:"png"},E={takeScreenshot:!0,captureViewpoint:!0,captureRotation:!0,captureScale:!0};let C=class extends(Object(_.a)(w.a.EventedAccessor)){constructor(e){super(e),this.activeBookmark=null}destroy(){this.view=null,this._set("activeBookmark",null)}set bookmarks(e){void 0!==e?this._override("bookmarks",e):this._clearOverride("bookmarks")}get bookmarks(){return this.get("view.map.bookmarks")||new I}set defaultCreateOptions(e){this._set("defaultCreateOptions",{...E,...e})}get defaultCreateOptions(){return E}set defaultEditOptions(e){this._set("defaultEditOptions",{...E,...e})}get defaultEditOptions(){return E}get state(){const e=this.get("view");return e&&!e.ready?"loading":"ready"}get view(){return this._get("view")}set view(e){e&&"2d"!==e.type&&x.error(new v.a("view:invalid-view","SceneView is not supported",{view:e})),this._set("view",e)}async createBookmark(e){const{view:t,defaultCreateOptions:r}=this;if(!t){const e=new v.a("create-bookmark:invalid-view","Cannot create a bookmark without a view.");return x.error(e),Promise.reject(e)}const{takeScreenshot:i,screenshotSettings:o,captureViewpoint:n,captureRotation:a,captureScale:s}={...r,...e},l=i?await this._createThumbnail(o):void 0;return new k.a({...l&&{thumbnail:l},...n&&{viewpoint:this._createViewpoint({view:t,captureScale:s,captureRotation:a})}})}async editBookmark(e,t){const{view:r,defaultEditOptions:i}=this;if(!r){const e=new v.a("edit-bookmark:invalid-view","Cannot edit a bookmark without a view.");return x.error(e),Promise.reject(e)}const{takeScreenshot:o,screenshotSettings:n,captureViewpoint:a,captureRotation:s,captureScale:l}={...i,...t},c=o?await this._createThumbnail(n):void 0;return c&&(e.thumbnail=c),a&&(e.viewpoint=this._createViewpoint({view:r,captureScale:l,captureRotation:s})),this.emit("bookmark-edit",{bookmark:e}),e}goTo(e){const{view:t}=this;if(!t){const e=new v.a("go-to:invalid-view","Cannot go to a bookmark without a view");return x.error(e),Promise.reject(e)}const r=null==e?void 0:e.viewpoint;if(!r){const t=new v.a("go-to:invalid-bookmark","Cannot go to a bookmark that does not contain a 'viewpoint'.",{bookmark:e});return x.error(t),Promise.reject(t)}this._set("activeBookmark",e);const i={target:r},o=this.callGoTo(i);return this.emit("bookmark-select",{bookmark:e}),o.catch((()=>{})).then((()=>this._set("activeBookmark",null))),o}async _createThumbnail(e){const t=await this.view.takeScreenshot({...T,...e});return new h.a({url:t.dataUrl})}_createViewpoint({view:e,captureRotation:t,captureScale:r}){var i,o;const n=null==(i=e.viewpoint)?void 0:i.clone();return new j.a({targetGeometry:null==(o=e.extent)?void 0:o.clone(),rotation:t&&(null==n?void 0:n.rotation)||0,scale:r&&(null==n?void 0:n.scale)||0})}};Object(o.a)([Object(p.b)({readOnly:!0})],C.prototype,"activeBookmark",void 0),Object(o.a)([Object(p.b)({type:I})],C.prototype,"bookmarks",null),Object(o.a)([Object(p.b)()],C.prototype,"defaultCreateOptions",null),Object(o.a)([Object(p.b)()],C.prototype,"defaultEditOptions",null),Object(o.a)([Object(p.b)({readOnly:!0})],C.prototype,"state",null),Object(o.a)([Object(p.b)({value:null})],C.prototype,"view",null),C=Object(o.a)([Object(b.a)(S)],C);var N=C,A=r(802),B=r(705),M=r(331),L=r(102),U=r(164),F=r(314),R=r(118),P=r(1140);const D="data-bookmark-uid",q="esri-bookmarks esri-widget--panel",V="esri-bookmarks__loader-container",J="esri-bookmarks__loader",G="esri-bookmarks__list",$="esri-bookmarks__list--sortable",W="esri-bookmarks__bookmark",K="esri-bookmarks__bookmark-button",z="esri-bookmarks__bookmark-image-container",H="esri-bookmarks__bookmark-edit-button",Y="esri-bookmarks_bookmark-drag-handle",Q="esri-bookmarks_bookmark-drag-handle-icon",X="esri-bookmarks__bookmark-icon",Z="esri-bookmarks__image",ee="esri-bookmarks__bookmark-name",te="esri-bookmarks__bookmark--active",re="esri-widget__content--empty",ie="esri-bookmarks__no-bookmarks-heading",oe="esri-widget__no-bookmark-icon",ne="esri-bookmarks__no-bookmarks-description",ae="esri-bookmarks__adding-bookmark",se="esri-bookmarks__add-bookmark",le="esri-bookmarks__add-bookmark-button",ce="esri-bookmarks__add-bookmark-icon",ue="esri-bookmarks__authoring-card",de="esri-bookmarks__authoring-container",pe="esri-bookmarks__authoring-form",be="esri-bookmarks__authoring-label",he="esri-bookmarks__authoring-actions",me="esri-bookmarks__authoring-input--invalid",ye="esri-bookmarks__authoring-delete-button",fe="esri-bookmarks__authoring-cancel-button",Oe="esri-widget",je="esri-widget--disabled",ge="esri-button",ve="esri-button--tertiary",we="esri-input",ke="esri-icon-handle-vertical",_e="esri-icon-plus",Se="esri-icon-edit",xe="esri-icon-handle-horizontal",Ie="esri-icon-refresh",Te="esri-icon-link",Ee="esri-icon-erase",Ce="esri-icon-bookmark",Ne="esri-widget__heading",Ae="esri-icon-loading-indicator",Be="esri-rotating",Me={addBookmark:!0,thumbnail:!0},Le=/^https:\/\/.*/i,Ue="esri.widgets.Bookmarks",Fe=l.a.getLogger(Ue);let Re=class extends m.a{constructor(e,t){super(e,t),this._handles=new s.a,this._addInputNode=null,this._editInputNode=null,this._urlEditInputNode=null,this._addBookmarkButtonNode=null,this._focusAddBookmarkButton=!1,this._focusEditInputBox=!1,this._focusAddInputBox=!1,this._focusUrlEditInputBox=!1,this._sortable=null,this._sortableNode=null,this._focusSortUid=null,this._selectedSortUid=null,this._sortableSavedItems=null,this._userState=null,this.defaultCreateOptions=null,this.defaultEditOptions=null,this.bookmarks=null,this.disabled=!1,this.editingEnabled=!1,this.headingLevel=2,this.goToOverride=null,this.iconClass=Ce,this.label=void 0,this.messages=null,this.messagesCommon=null,this.messagesUnits=null,this.view=null,this.viewModel=new N,this.visibleElements={...Me}}initialize(){this.own([Object(c.a)(this,"viewModel.bookmarks",(()=>this._bookmarksInitialized())),Object(c.a)(this,"editingEnabled",(()=>this._toggleSorting()))])}destroy(){this._destroySortable(),this._handles.destroy(),this._handles=null,this._editMenu.destroy()}get _editMenuItems(){var e,t;const{messages:r,_userState:i}=this,o=null==i||null==(e=i.editedBookmark)||null==(t=e.thumbnail)?void 0:t.url;return[new B.a({label:null==r?void 0:r.menu.refreshThumbnail,iconClass:Ie,clickFunction:()=>this._refreshThumbnail()}),new B.a({label:Le.test(o)?null==r?void 0:r.menu.editImageUrl:null==r?void 0:r.menu.useImageUrl,iconClass:Te,clickFunction:()=>this._startUseImageUrl()}),o?new B.a({label:null==r?void 0:r.menu.removeThumbnail,iconClass:Ee,clickFunction:()=>this._removeThumbnail()}):null].filter(Boolean)}get _editMenu(){const{_editMenuItems:e,messages:t}=this,r=this._get("_editMenu");r&&r.destroy();const i=new A.a({iconClass:xe,label:null==t?void 0:t.menu.label});return i.items=e,i}get bookmarkCreationOptions(){return Object(n.d)(Fe,"bookmarkCreationOptions",{replacement:"defaultCreateOptions",version:"4.18"}),this.viewModel.defaultCreateOptions}set bookmarkCreationOptions(e){Object(n.d)(Fe,"bookmarkCreationOptions",{replacement:"defaultCreateOptions",version:"4.18"}),this.viewModel.defaultCreateOptions=e}castVisibleElements(e){return{...Me,...e}}endAddBookmark(){this._userState=null}goTo(e){return this.viewModel.goTo(e)}render(){const{state:e}=this.viewModel,t="loading"===e?this.renderLoading():this.renderBookmarks();return Object(R.a)("div",{class:this.classes(q,Oe,{[je]:this.disabled})},t)}startAddBookmark(){this._userState=new O({state:"add"}),this._focusAddInputBox=!0,this.scheduleRender()}renderLoading(){return Object(R.a)("div",{class:V,key:"loader"},Object(R.a)("div",{class:J}))}renderNoBookmarksContainer(){const{messages:e}=this;return Object(R.a)("div",{class:re,key:"no-bookmarks"},Object(R.a)("span",{"aria-hidden":"true",class:this.classes(oe,Ce)}),Object(R.a)(M.a,{level:this.headingLevel,class:this.classes(Ne,ie)},null==e?void 0:e.noBookmarksHeading),Object(R.a)("p",{class:ne},null==e?void 0:e.noBookmarksDescription))}renderAddBookmarkLoading(){var e;return Object(R.a)("div",{key:"adding-bookmark",class:ae},Object(R.a)("span",{"aria-hidden":"true",class:this.classes(Ae,Be)}),null==(e=this.messages)?void 0:e.addingBookmark)}renderBookmarkItems(e){if(!e)return null;const{_userState:t,editingEnabled:r}=this;return e.map((e=>r&&e&&t&&("edit"===t.state||"edit-thumbnail"===t.state)&&t.bookmark===e?"edit-thumbnail"===t.state?this.renderEditingBookmarkUrl(t.editedBookmark):this.renderEditingBookmark(t.editedBookmark):this.renderBookmark(e))).toArray()}renderBookmarksContainer(e){var t;const{_userState:r,editingEnabled:i}=this,o="add"===(null==r?void 0:r.state),n=i&&!o?this.renderAddBookmarkButton():null,a=i?o&&r.loading?this.renderAddBookmarkLoading():"add"===(null==r?void 0:r.state)?this.renderAddingBookmark():null:null;return[Object(R.a)("ul",{key:"bookmark-list","aria-label":null==(t=this.messages)?void 0:t.widgetLabel,class:this.classes(G,{[$]:this.editingEnabled}),afterCreate:this._sortNodeCreated,afterRemoved:this._destroySortable,"data-node-ref":"_sortableNode",bind:this},this.renderBookmarkItems(e)),n,a]}renderAddBookmarkButton(){var e;return this.visibleElements.addBookmark?Object(R.a)("div",{key:"add-bookmark-item",class:se},Object(R.a)("button",{class:this.classes(ge,ve,le),onclick:this.startAddBookmark,afterCreate:this._storeAddBookmarkButton,afterUpdate:this._storeAddBookmarkButton,"data-node-ref":"_addBookmarkButtonNode",bind:this,type:"button"},Object(R.a)("span",{"aria-hidden":"true",class:this.classes(ce,_e)}),null==(e=this.messages)?void 0:e.addBookmark)):null}renderBookmarks(){const{bookmarks:e}=this.viewModel,t=e&&e.filter(Boolean),r=t&&t.length,i=r||this.editingEnabled?this.renderBookmarksContainer(t):null;return[r?null:this.renderNoBookmarksContainer(),i]}renderEditContainer(e){const{messagesCommon:t}=this;return Object(R.a)("div",{key:"edit-container"},Object(R.a)("button",{title:null==t?void 0:t.edit,"aria-label":null==t?void 0:t.edit,"data-bookmark":e,onclick:this._showEditBookmarkForm,bind:this,class:H,type:"button"},Object(R.a)("span",{"aria-hidden":"true",class:Se})))}renderDragHandle(e){const{messagesCommon:t}=this,r={[D]:e.uid};return Object(R.a)("div",{role:"button",tabIndex:0,key:"drag-handle",bind:this,class:Y,onkeydown:this._dragHandleKeydown,afterCreate:this._focusDragHandle,afterUpdate:this._focusDragHandle,onblur:this._dragHandleBlur,"aria-pressed":this._selectedSortUid===e.uid?"true":"false","aria-label":null==t?void 0:t.dragHandleLabel,title:null==t?void 0:t.dragHandleTitle,...r},Object(R.a)("span",{"aria-hidden":"true",class:this.classes(Q,ke)}))}renderBookmarkImageIcon(){return Object(R.a)("span",{"aria-hidden":"true",class:this.classes(X,Ce)})}renderBookmarkImage(e){const{visibleElements:t}=this,{thumbnail:r}=e,i=r&&r.url||"";return t.thumbnail&&i?Object(R.a)("img",{src:i,alt:"",class:Z}):null}renderBookmarkButton(e){const{messagesCommon:t}=this,{name:r}=e,i=r||(null==t?void 0:t.untitled),o=Object(R.a)("div",{class:z},this.renderBookmarkImage(e)||this.renderBookmarkImageIcon());return Object(R.a)("button",{key:"bookmark-button",class:K,bind:this,"data-bookmark":e,onclick:this._goToBookmark,type:"button"},o,Object(R.a)("span",{class:ee},i))}renderBookmark(e){const{activeBookmark:t}=this.viewModel,r={[te]:t===e},i=this.editingEnabled?this.renderEditContainer(e):null,o={[D]:e.uid},n=this.editingEnabled?this.renderDragHandle(e):null;return Object(R.a)("li",{key:e,class:this.classes(W,r),...o},n,this.renderBookmarkButton(e),i)}renderEditingBookmarkName(e){const{messages:t,_userState:r}=this,i="name-required"===r.validationState;return Object(R.a)("label",{class:be},null==t?void 0:t.title,i?Object(R.a)("strong",null,null==t?void 0:t.invalidTitle):null,Object(R.a)("input",{required:!0,bind:this,class:this.classes(we,i?me:null),type:"text",value:e.name,afterCreate:this._storeEditInput,afterUpdate:this._focusEditInput,"data-bookmark":e,"data-node-ref":"_editInputNode",placeholder:null==t?void 0:t.titlePlaceholder}))}renderEditingBookmarkUrlActions(){const{messagesCommon:e}=this;return Object(R.a)("div",{class:he},Object(R.a)("input",{type:"button",value:null==e?void 0:e.back,class:this.classes(ge,ve),onclick:this._closeUrlEditBookmarkForm,bind:this}),Object(R.a)("input",{class:ge,type:"submit",value:null==e?void 0:e.add}))}renderEditingBookmarkActions(){const{messagesCommon:e}=this,{bookmark:t}=this._userState;return Object(R.a)("div",{class:he},Object(R.a)("input",{type:"button",value:null==e?void 0:e.delete,class:this.classes(ge,ve,ye),"data-bookmark":t,onclick:this._deleteBookmark,bind:this}),Object(R.a)("input",{type:"button",value:null==e?void 0:e.cancel,class:this.classes(ge,ve),onclick:this._closeEditBookmarkForm,bind:this}),Object(R.a)("input",{class:ge,type:"submit",value:null==e?void 0:e.save}))}renderEditingBookmarkUrlInput(e){var t;const{messages:r,_userState:i}=this,o=null==(t=e.thumbnail)?void 0:t.url,n=Le.test(o)?o:null,a="absolute-url-required"===i.validationState;return Object(R.a)("label",{class:be},a?Object(R.a)("strong",null,null==r?void 0:r.invalidImageUrl):null,Object(R.a)("input",{required:!0,bind:this,class:this.classes(we,a?me:null),type:"text",value:n,afterCreate:this._storeUrlEditInput,afterUpdate:this._focusUrlEditInput,"data-bookmark":e,"data-node-ref":"_urlEditInputNode",title:null==r?void 0:r.imageUrlTooltip,placeholder:null==r?void 0:r.imageUrlPlaceholder}))}renderEditingBookmarkUrl(e){const t={[D]:e.uid};return Object(R.a)("li",{key:"edit-bookmark-url-form",class:ue,...t},Object(R.a)("form",{class:pe,onsubmit:this._editBookmarkUrlSubmit,bind:this},this.renderEditingBookmarkUrlInput(e),this.renderEditingBookmarkUrlActions()))}renderEditingBookmark(e){const t={[D]:e.uid};return Object(R.a)("li",{key:"edit-bookmark-form",class:ue,...t},Object(R.a)("form",{class:pe,onsubmit:this._editBookmarkSubmit,bind:this},Object(R.a)("div",{class:de},Object(R.a)("div",{class:z},this.renderBookmarkImage(e),this._editMenu.render()),this.renderEditingBookmarkName(e)),this.renderEditingBookmarkActions()))}renderAddingBookmarkName(){const{_userState:e,messages:t}=this,r="name-required"===e.validationState;return Object(R.a)("label",{class:be},null==t?void 0:t.title,r?Object(R.a)("strong",null,null==t?void 0:t.invalidTitle):null,Object(R.a)("input",{required:!0,bind:this,class:this.classes(we,r?me:null),type:"text",afterCreate:this._storeAddInput,afterUpdate:this._focusAddInput,"data-node-ref":"_addInputNode",value:"",placeholder:null==t?void 0:t.titlePlaceholder}))}renderAddingBookmarkActions(){const{messagesCommon:e}=this;return Object(R.a)("div",{class:this.classes(he)},Object(R.a)("input",{type:"button",value:null==e?void 0:e.cancel,class:this.classes(ge,ve,fe),onclick:this._endAddBookmark.bind(this),bind:this}),Object(R.a)("input",{class:ge,type:"submit",value:null==e?void 0:e.add}))}renderAddingBookmark(){return Object(R.a)("div",{key:"add-bookmark-form",class:ue},Object(R.a)("form",{class:pe,onsubmit:this._addBookmarkSubmit,bind:this},this.renderAddingBookmarkName(),this.renderAddingBookmarkActions()))}_dragHandleBlur(){this._selectedSortUid=null,this.scheduleRender()}_dragHandleKeydown(e){const{_sortableSavedItems:t}=this,r=Object(a.a)(e);if(-1===["ArrowDown","ArrowUp","Escape","Tab"," ","Enter"].indexOf(r))return;const{_sortable:i,_selectedSortUid:o}=this,n=i.toArray(),s=e.target.getAttribute(D),l=n.indexOf(s);if(Object(L.f)(r)){const e=o&&o===s;return this._selectedSortUid=e?null:s,this._sortableSavedItems=e?null:this._sortable.toArray(),void this.scheduleRender()}if("Tab"===r)return this._selectedSortUid=null,void this.scheduleRender();if("Escape"===r&&t)return e.stopPropagation(),this._selectedSortUid=null,this._updateSortItems(t,i,s),void this.scheduleRender();if(-1===l||!o)return;const c="ArrowUp"===r?l-1:l+1;c>=n.length||c<=-1||(function(e,t,r){e.splice(r,0,e.splice(t,1)[0])}(n,l,c),this._updateSortItems(n,i,s))}_updateSortItems(e,t,r){t.sort(e),this._sortBookmarks(t),this._focusSortUid=r,this._selectedSortUid=r}_focusDragHandle(e){const{_focusSortUid:t}=this;e&&t&&e.getAttribute(D)===t&&(e.focus(),this._focusSortUid=null)}_toggleSorting(){const{_sortable:e,_sortableNode:t,editingEnabled:r}=this;if(t)if(e)e.option("disabled",!r);else{const e=P.a.create(t,{dataIdAttr:D,handle:`.${Y}`,group:"bookmarks",disabled:!r,onSort:()=>this._sortBookmarks(e)});this._sortable=e}}_sortNodeCreated(e){this._sortableNode=e,this._toggleSorting()}_sortBookmarks(e){const{bookmarks:t}=this.viewModel;if(!t)return;const r=e.toArray();t.sort(((e,t)=>{const i=r.indexOf(e.uid),o=r.indexOf(t.uid);return i>o?1:i<o?-1:0}))}_destroySortable(){const{_sortable:e}=this;e&&e.destroy(),this._sortable=null}_endAddBookmark(){this._focusAddBookmarkButton=!0,this.endAddBookmark()}_bookmarksInitialized(){const e="bookmarks-init",{_handles:t}=this;t.remove(e),t.add(Object(c.b)(this,"viewModel.bookmarks","change",(()=>this._bookmarksChanged())),e)}_bookmarksChanged(){const e="bookmarks-change",{bookmarks:t}=this.viewModel,{_handles:r}=this;r.remove(e);const i=t.map((e=>Object(c.d)(e,["active","name","thumbnail.url"],(()=>this.scheduleRender()))));r.add(i,e),this.scheduleRender()}_showEditBookmarkForm(e){const t=e.currentTarget["data-bookmark"];this._focusEditInputBox=!0,this._userState=new O({bookmark:t,state:"edit"}),this.viewModel.goTo(t),this.scheduleRender()}_closeUrlEditBookmarkForm(){this._focusEditInputBox=!0,this._userState.state="edit"}_closeEditBookmarkForm(){this._userState=null}_addBookmarkSubmit(e){e.preventDefault();const{_addInputNode:t,_userState:r}=this,i=t&&t.value.trim();i?(r.loading=!0,this.viewModel.createBookmark().then((e=>{e.name=i,this.viewModel.bookmarks.add(e),this._endAddBookmark()}))):r.validationState="name-required"}async _editBookmarkAndClose(e,t){await this.viewModel.editBookmark(e,t),this._closeEditBookmarkForm()}_editBookmarkSubmit(e){e.preventDefault();const{_editInputNode:t,_userState:r}=this,i=t&&t.value.trim();i?(r.bookmark.name=i,r.bookmark.thumbnail=r.editedBookmark.thumbnail,this._editBookmarkAndClose(r.bookmark,{takeScreenshot:!1})):r.validationState="name-required"}_storeAddBookmarkButton(e){this._addBookmarkButtonNode=e,this._focusAddBookmark()}_storeEditInput(e){this._editInputNode=e,this._focusEditInput()}_storeAddInput(e){this._addInputNode=e,this._focusAddInput()}_storeUrlEditInput(e){this._urlEditInputNode=e,this._focusUrlEditInput()}_focusUrlEditInput(){this._urlEditInputNode&&this._focusUrlEditInputBox&&(this._focusUrlEditInputBox=!1,this._urlEditInputNode.focus())}_focusAddInput(){this._addInputNode&&this._focusAddInputBox&&(this._focusAddInputBox=!1,this._addInputNode.focus())}_focusAddBookmark(){this._addBookmarkButtonNode&&this._focusAddBookmarkButton&&(this._focusAddBookmarkButton=!1,this._addBookmarkButtonNode.focus())}_focusEditInput(){this._editInputNode&&this._focusEditInputBox&&(this._focusEditInputBox=!1,this._editInputNode.focus())}_deleteBookmark(e){const t=e.currentTarget["data-bookmark"];this.viewModel.bookmarks.remove(t)}_goToBookmark(e){const t=e.currentTarget["data-bookmark"];this.endAddBookmark(),this._closeEditBookmarkForm(),this.viewModel.goTo(t)}async _refreshThumbnail(){const{_userState:e,_editMenu:t,viewModel:r}=this;e.validationState=void 0,await r.editBookmark(this._userState.editedBookmark,{takeScreenshot:!0,captureViewpoint:!1,captureRotation:!1,captureScale:!1}),t.open=!1,this._focusEditInputBox=!0,this.scheduleRender()}_removeThumbnail(){const{_userState:e,_editMenu:t}=this;e.editedBookmark.thumbnail=null,e.validationState=void 0,t.open=!1,this._focusEditInputBox=!0,this.scheduleRender()}_startUseImageUrl(){this._userState.state="edit-thumbnail",this._editMenu.open=!1,this._focusUrlEditInputBox=!0,this.scheduleRender()}_editBookmarkUrlSubmit(e){e.preventDefault();const{_urlEditInputNode:t,_userState:r}=this,i=t.value;Le.test(i)?(i&&(r.editedBookmark.thumbnail=new h.a({url:i})),this._closeUrlEditBookmarkForm()):r.validationState="absolute-url-required"}};Object(o.a)([Object(p.b)({type:O})],Re.prototype,"_userState",void 0),Object(o.a)([Object(p.b)({readOnly:!0})],Re.prototype,"_editMenuItems",null),Object(o.a)([Object(p.b)({readOnly:!0})],Re.prototype,"_editMenu",null),Object(o.a)([Object(p.b)()],Re.prototype,"bookmarkCreationOptions",null),Object(o.a)([Object(u.a)("viewModel.defaultCreateOptions")],Re.prototype,"defaultCreateOptions",void 0),Object(o.a)([Object(u.a)("viewModel.defaultEditOptions")],Re.prototype,"defaultEditOptions",void 0),Object(o.a)([Object(u.a)("viewModel.bookmarks")],Re.prototype,"bookmarks",void 0),Object(o.a)([Object(p.b)()],Re.prototype,"disabled",void 0),Object(o.a)([Object(p.b)()],Re.prototype,"editingEnabled",void 0),Object(o.a)([Object(p.b)()],Re.prototype,"headingLevel",void 0),Object(o.a)([Object(u.a)("viewModel.goToOverride")],Re.prototype,"goToOverride",void 0),Object(o.a)([Object(p.b)()],Re.prototype,"iconClass",void 0),Object(o.a)([Object(p.b)({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],Re.prototype,"label",void 0),Object(o.a)([Object(p.b)()],Re.prototype,"localeStrings",void 0),Object(o.a)([Object(p.b)(),Object(U.a)("esri/widgets/Bookmarks/t9n/Bookmarks")],Re.prototype,"messages",void 0),Object(o.a)([Object(p.b)(),Object(U.a)("esri/t9n/common")],Re.prototype,"messagesCommon",void 0),Object(o.a)([Object(p.b)(),Object(U.a)("esri/core/t9n/Units")],Re.prototype,"messagesUnits",void 0),Object(o.a)([Object(u.a)("viewModel.view")],Re.prototype,"view",void 0),Object(o.a)([Object(p.b)({type:N}),Object(F.a)(["select-bookmark","bookmark-edit","bookmark-select"])],Re.prototype,"viewModel",void 0),Object(o.a)([Object(p.b)()],Re.prototype,"visibleElements",void 0),Object(o.a)([Object(d.a)("visibleElements")],Re.prototype,"castVisibleElements",null),Object(o.a)([Object(p.b)()],Re.prototype,"endAddBookmark",null),Object(o.a)([Object(p.b)()],Re.prototype,"startAddBookmark",null),Re=Object(o.a)([Object(b.a)(Ue)],Re);var Pe=Re,De=r(1111),qe=r(84),Ve=r(0);const Je=e=>{const t=Object(i.useRef)(null);return Object(i.useEffect)((()=>{const r=new Pe({container:t.current,view:e.view,editingEnabled:!0});return qe.c((e=>{if(window.localStorage.getItem("imaps")){const t=De.a.fromJSON(JSON.parse(window.localStorage.getItem("imaps")));t.load().then((()=>{e(t.bookmarks)}))}})).then((e=>{r.bookmarks.removeAll(),r.bookmarks.addMany(e)})),()=>{r&&r.destroy()}}),[e.id]),Object(Ve.jsx)("div",{ref:t})};t.default=Je},156:function(e,t,r){"use strict";r.d(t,"a",(function(){return n})),r.d(t,"b",(function(){return a})),r.d(t,"c",(function(){return s})),r.d(t,"d",(function(){return l}));var i=r(80),o=r(84);function n(e,t,r){return Object(o.j)(e.map(((e,i)=>t.apply(r,[e,i]))))}function a(e,t,r){return Object(o.j)(e.map(((e,i)=>t.apply(r,[e,i])))).then((e=>e.map((e=>e.value))))}function s(e){return Object(i.j)(e)?Object(o.t)():e.then((e=>({ok:!0,value:e}))).catch((e=>({ok:!1,error:e})))}function l(e){return e.then((e=>({ok:!0,value:e}))).catch((e=>(Object(o.u)(e),{ok:!1,error:e})))}},166:function(e,t,r){"use strict";r.d(t,"a",(function(){return s})),r.d(t,"b",(function(){return n})),r.d(t,"c",(function(){return a}));r(74);const i={milliseconds:1,seconds:1e3,minutes:6e4,hours:36e5,days:864e5,weeks:6048e5,months:26784e5,years:31536e6,decades:31536e7,centuries:31536e8},o={milliseconds:{getter:"getMilliseconds",setter:"setMilliseconds",multiplier:1},seconds:{getter:"getSeconds",setter:"setSeconds",multiplier:1},minutes:{getter:"getMinutes",setter:"setMinutes",multiplier:1},hours:{getter:"getHours",setter:"setHours",multiplier:1},days:{getter:"getDate",setter:"setDate",multiplier:1},weeks:{getter:"getDate",setter:"setDate",multiplier:7},months:{getter:"getMonth",setter:"setMonth",multiplier:1},years:{getter:"getFullYear",setter:"setFullYear",multiplier:1},decades:{getter:"getFullYear",setter:"setFullYear",multiplier:10},centuries:{getter:"getFullYear",setter:"setFullYear",multiplier:100}};function n(e,t,r){const i=new Date(e.getTime());if(t&&r){const e=o[r],{getter:n,setter:a,multiplier:s}=e;i[a](i[n]()+t*s)}return i}function a(e,t){switch(t){case"milliseconds":return new Date(e.getTime());case"seconds":return new Date(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds());case"minutes":return new Date(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes());case"hours":return new Date(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours());case"days":return new Date(e.getFullYear(),e.getMonth(),e.getDate());case"weeks":return new Date(e.getFullYear(),e.getMonth(),e.getDate()-e.getDay());case"months":return new Date(e.getFullYear(),e.getMonth(),1);case"years":return new Date(e.getFullYear(),0,1);case"decades":return new Date(e.getFullYear()-e.getFullYear()%10,0,1);case"centuries":return new Date(e.getFullYear()-e.getFullYear()%100,0,1);default:return new Date}}function s(e,t,r){return 0===e?0:e*i[t]/i[r]}},175:function(e,t,r){"use strict";r.d(t,"a",(function(){return o}));var i=r(85);const o=Object(i.b)()({esriTimeUnitsMilliseconds:"milliseconds",esriTimeUnitsSeconds:"seconds",esriTimeUnitsMinutes:"minutes",esriTimeUnitsHours:"hours",esriTimeUnitsDays:"days",esriTimeUnitsWeeks:"weeks",esriTimeUnitsMonths:"months",esriTimeUnitsYears:"years",esriTimeUnitsDecades:"decades",esriTimeUnitsCenturies:"centuries",esriTimeUnitsUnknown:void 0})},179:function(e,t,r){"use strict";r.d(t,"a",(function(){return i})),r.d(t,"b",(function(){return o}));r(74);function i(e){}function o(e){return()=>e}},194:function(e,t,r){"use strict";r.d(t,"a",(function(){return b})),r.d(t,"b",(function(){return u})),r.d(t,"c",(function(){return m})),r.d(t,"d",(function(){return g})),r.d(t,"e",(function(){return j})),r.d(t,"f",(function(){return d})),r.d(t,"g",(function(){return p})),r.d(t,"h",(function(){return y})),r.d(t,"i",(function(){return f})),r.d(t,"j",(function(){return h})),r.d(t,"k",(function(){return O}));var i=r(80),o=r(92),n=r(262);const a=["MapServer","ImageServer","FeatureServer","SceneServer","StreamServer","VectorTileServer"],s=new RegExp(`^((?:https?:)?\\/\\/\\S+?\\/rest\\/services\\/(.+?)\\/(${a.join("|")}))(?:\\/(?:layers\\/)?(\\d+))?`,"i"),l=new RegExp(`^((?:https?:)?\\/\\/\\S+?\\/([^\\/\\n]+)\\/(${a.join("|")}))(?:\\/(?:layers\\/)?(\\d+))?`,"i"),c=/(.*?)\/(?:layers\/)?(\d+)\/?$/i;function u(e){return!!s.test(e)}function d(e){const t=Object(o.K)(e),r=t.path.match(s)||t.path.match(l);if(!r)return null;const[,i,n,a,c]=r,u=n.indexOf("/");return{title:b(-1!==u?n.slice(u+1):n),serverType:a,sublayer:null!=c&&""!==c?parseInt(c,10):null,url:{path:i}}}function p(e){const t=Object(o.K)(e).path.match(c);return t?{serviceUrl:t[1],sublayerId:Number(t[2])}:null}function b(e){return(e=e.replace(/\s*[/_]+\s*/g," "))[0].toUpperCase()+e.slice(1)}function h(e,t){const r=[];if(e){const t=d(e);Object(i.k)(t)&&t.title&&r.push(t.title)}if(t){const e=b(t);r.push(e)}if(2===r.length){if(-1!==r[0].toLowerCase().indexOf(r[1].toLowerCase()))return r[0];if(-1!==r[1].toLowerCase().indexOf(r[0].toLowerCase()))return r[1]}return r.join(" - ")}function m(e){if(!e)return!1;const t=-1!==(e=e.toLowerCase()).indexOf(".arcgis.com/"),r=-1!==e.indexOf("//services")||-1!==e.indexOf("//tiles")||-1!==e.indexOf("//features");return t&&r}function y(e,t){return e?Object(o.I)(Object(o.H)(e,t)):e}function f(e){let{url:t}=e;if(!t)return{url:t};t=Object(o.H)(t,e.logger);const r=Object(o.K)(t),n=d(r.path);let a;if(Object(i.k)(n))null!=n.sublayer&&null==e.layer.layerId&&(a=n.sublayer),t=n.url.path;else if(e.nonStandardUrlAllowed){const e=p(r.path);Object(i.k)(e)&&(t=e.serviceUrl,a=e.sublayerId)}return{url:Object(o.I)(t),layerId:a}}function O(e,t,r,i,a){Object(n.f)(t,i,"url",a),i.url&&null!=e.layerId&&(i.url=Object(o.z)(i.url,r,e.layerId.toString()))}function j(e){if(!e)return!1;const t=e.toLowerCase(),r=-1!==t.indexOf("/services/"),i=-1!==t.indexOf("/mapserver/wmsserver"),o=-1!==t.indexOf("/imageserver/wmsserver"),n=-1!==t.indexOf("/wmsserver");return r&&(i||o||n)}function g(e){if(!e)return!1;const t=new o.a(Object(o.A)(e)).authority.toLowerCase();return"server.arcgisonline.com"===t||"services.arcgisonline.com"===t}},219:function(e,t,r){"use strict";var i,o=r(76),n=r(81),a=r(166),s=r(78),l=(r(74),r(79),r(75),r(77)),c=r(175);let u=i=class extends n.a{constructor(e){super(e),this.value=0,this.unit="milliseconds"}toMilliseconds(){return Object(a.a)(this.value,this.unit,"milliseconds")}clone(){return new i({value:this.value,unit:this.unit})}};Object(o.a)([Object(s.b)({type:Number,json:{write:!0},nonNullable:!0})],u.prototype,"value",void 0),Object(o.a)([Object(s.b)({type:c.a.apiValues,json:{type:c.a.jsonValues,read:c.a.read,write:c.a.write},nonNullable:!0})],u.prototype,"unit",void 0),u=i=Object(o.a)([Object(l.a)("esri.TimeInterval")],u);var d=u;t.a=d},221:function(e,t,r){"use strict";r.r(t);var i=r(76),o=r(138),n=r(83),a=r(81),s=r(82),l=r(172),c=r(80),u=r(92),d=r(78),p=r(79),b=(r(74),r(75)),h=r(87),m=r(77),y=r(94),f=r(174),O=r(89),j=r(106);const g=b.a.getLogger("esri.portal.PortalItemResource");let v=class extends O.a{constructor(e){super(e),this.portalItem=null}normalizeCtorArgs(e){return e&&e.portalItem&&e.path?{...e,path:this.normalizePath(e.path,e.portalItem)}:e}set path(e){Object(c.k)(e)&&Object(u.s)(e)?g.error("portalitemresource:invalid-path","A portal item resource path must be relative"):this._set("path",e)}_castPath(e){return this.normalizePath(e,this.portalItem)}get url(){return this.portalItem&&this.path?`${this.portalItem.itemUrl}/resources/${this.path}`:null}get itemRelativeUrl(){return this.portalItem&&this.path?`./resources/${this.path}`:null}fetch(e="json",t){const r=this.url;if(Object(c.j)(r))throw new n.a("portal-item-resource:fetch","Portal item resource does not refer to a valid item or path");return this.portalItem.portal._request(r,{responseType:e,query:{token:this.portalItem.apiKey},signal:Object(c.i)(t,"signal")})}async update(e,t){return(await r.e(20).then(r.bind(null,821))).addOrUpdateResource(this,"update",e,t)}hasPath(){return Object(c.k)(this.path)}normalizePath(e,t){return Object(c.j)(e)?e:(e=e.replace(/^\/+/,""),Object(c.k)(t)&&Object(u.s)(e)&&(e=Object(u.C)(e,t.itemUrl)),e.replace(/^\/+/,"").replace(/^(\.\/)?resources\//,""))}};Object(i.a)([Object(d.b)()],v.prototype,"portalItem",void 0),Object(i.a)([Object(d.b)({type:String,value:null})],v.prototype,"path",null),Object(i.a)([Object(j.a)("path")],v.prototype,"_castPath",null),Object(i.a)([Object(d.b)({type:String,readOnly:!0})],v.prototype,"url",null),Object(i.a)([Object(d.b)({type:String,readOnly:!0})],v.prototype,"itemRelativeUrl",null),v=Object(i.a)([Object(m.a)("esri.portal.PortalItemResource")],v);var w=v;let k=class extends O.a{constructor(e){super(e),this.created=null,this.rating=null}};Object(i.a)([Object(d.b)()],k.prototype,"created",void 0),Object(i.a)([Object(d.b)()],k.prototype,"rating",void 0),k=Object(i.a)([Object(m.a)("esri.portal.PortalRating")],k);var _,S=k;let x=_=class extends(Object(a.b)(l.a)){constructor(e){super(e),this.access=null,this.accessInformation=null,this.apiKey=null,this.applicationProxies=null,this.avgRating=null,this.categories=null,this.created=null,this.culture=null,this.description=null,this.extent=null,this.groupCategories=null,this.id=null,this.itemControl=null,this.licenseInfo=null,this.modified=null,this.name=null,this.numComments=null,this.numRatings=null,this.numViews=null,this.owner=null,this.ownerFolder=null,this.portal=null,this.screenshots=null,this.size=null,this.snippet=null,this.sourceJSON=null,this.tags=null,this.title=null,this.type=null,this.typeKeywords=null,this.url=null}static from(e){return Object(p.d)(_,e)}destroy(){this.portal=null}get displayName(){const e=this.type,t=this.typeKeywords||[];let r=e;return"Feature Service"===e||"Feature Collection"===e?r=t.indexOf("Table")>-1?"Table":t.indexOf("Route Layer")>-1?"Route Layer":t.indexOf("Markup")>-1?"Markup":"Feature Layer":"Image Service"===e?r=t.indexOf("Elevation 3D Layer")>-1?"Elevation Layer":t.indexOf("Tiled Imagery")>-1?"Tiled Imagery Layer":"Imagery Layer":"Scene Service"===e?r="Scene Layer":"Scene Package"===e?r="Scene Layer Package":"Stream Service"===e?r="Feature Layer":"Geoprocessing Service"===e&&this.portal&&this.portal.isPortal?r=t.indexOf("Web Tool")>-1?"Tool":"Geoprocessing Service":"Geocoding Service"===e?r="Locator":"Geoenrichment Service"===e?r="GeoEnrichment Service":"Microsoft Powerpoint"===e?r="Microsoft PowerPoint":"GeoJson"===e?r="GeoJSON":"Globe Service"===e?r="Globe Layer":"Vector Tile Service"===e?r="Tile Layer":"netCDF"===e?r="NetCDF":"Map Service"===e?r=-1===t.indexOf("Spatiotemporal")&&(t.indexOf("Hosted Service")>-1||t.indexOf("Tiled")>-1)&&-1===t.indexOf("Relational")?"Tile Layer":"Map Image Layer":e&&e.toLowerCase().indexOf("add in")>-1?r=e.replace(/(add in)/gi,"Add-In"):"datastore catalog service"===e?r="Big Data File Share":"Compact Tile Package"===e?r="Tile Package (tpkx)":"OGCFeatureServer"===e&&(r="OGC Feature Layer"),r}readExtent(e){return e&&e.length?new y.a(e[0][0],e[0][1],e[1][0],e[1][1]):null}get iconUrl(){const e=this.type&&this.type.toLowerCase()||"",t=this.typeKeywords||[];let r,i=!1,n=!1,a=!1,s=!1,l=!1,c=!1;return e.indexOf("service")>0||"feature collection"===e||"kml"===e||"wms"===e||"wmts"===e||"wfs"===e?(i=t.indexOf("Hosted Service")>-1,"feature service"===e||"feature collection"===e||"kml"===e||"wfs"===e?(n=t.indexOf("Table")>-1,a=t.indexOf("Route Layer")>-1,s=t.indexOf("Markup")>-1,l=-1!==t.indexOf("Spatiotemporal"),c=-1!==t.indexOf("UtilityNetwork"),r=l&&n?"spatiotemporaltable":n?"table":a?"routelayer":s?"markup":l?"spatiotemporal":i?"featureshosted":c?"utilitynetwork":"features"):r="map service"===e||"wms"===e||"wmts"===e?i||t.indexOf("Tiled")>-1||"wmts"===e?"maptiles":"mapimages":"scene service"===e?t.indexOf("Line")>-1?"sceneweblayerline":t.indexOf("3DObject")>-1?"sceneweblayermultipatch":t.indexOf("Point")>-1?"sceneweblayerpoint":t.indexOf("IntegratedMesh")>-1?"sceneweblayermesh":t.indexOf("PointCloud")>-1?"sceneweblayerpointcloud":t.indexOf("Polygon")>-1?"sceneweblayerpolygon":t.indexOf("Building")>-1?"sceneweblayerbuilding":t.indexOf("Voxel")>-1?"sceneweblayervoxel":"sceneweblayer":"image service"===e?t.indexOf("Elevation 3D Layer")>-1?"elevationlayer":t.indexOf("Tiled Imagery")>-1?"tiledimagerylayer":"imagery":"stream service"===e?"streamlayer":"vector tile service"===e?"vectortile":"datastore catalog service"===e?"datastorecollection":"geocoding service"===e?"geocodeservice":"geoprocessing service"===e&&t.indexOf("Web Tool")>-1&&this.portal&&this.portal.isPortal?"tool":"layers"):r="web map"===e||"cityengine web scene"===e?"maps":"web scene"===e?t.indexOf("ViewingMode-Local")>-1?"webscenelocal":"websceneglobal":"web mapping application"===e||"mobile application"===e||"application"===e||"operation view"===e||"desktop application"===e?"apps":"map document"===e||"map package"===e||"published map"===e||"scene document"===e||"globe document"===e||"basemap package"===e||"mobile basemap package"===e||"mobile map package"===e||"project package"===e||"project template"===e||"pro map"===e||"layout"===e||"layer"===e&&t.indexOf("ArcGIS Pro")>-1||"explorer map"===e&&t.indexOf("Explorer Document")?"mapsgray":"service definition"===e||"csv"===e||"shapefile"===e||"cad drawing"===e||"geojson"===e||"360 vr experience"===e||"netcdf"===e||"administrative report"===e?"datafiles":"explorer add in"===e||"desktop add in"===e||"windows viewer add in"===e||"windows viewer configuration"===e?"appsgray":"arcgis pro add in"===e||"arcgis pro configuration"===e?"addindesktop":"rule package"===e||"file geodatabase"===e||"sqlite geodatabase"===e||"csv collection"===e||"kml collection"===e||"windows mobile package"===e||"map template"===e||"desktop application template"===e||"gml"===e||"arcpad package"===e||"code sample"===e||"form"===e||"document link"===e||"earth configuration"===e||"operations dashboard add in"===e||"rules package"===e||"image"===e||"workflow manager package"===e||"explorer map"===e&&t.indexOf("Explorer Mapping Application")>-1||t.indexOf("Document")>-1?"datafilesgray":"network analysis service"===e||"geoprocessing service"===e||"geodata service"===e||"geometry service"===e||"geoprocessing package"===e||"locator package"===e||"geoprocessing sample"===e||"workflow manager service"===e?"toolsgray":"layer"===e||"layer package"===e||"explorer layer"===e?"layersgray":"scene package"===e?"scenepackage":"mobile scene package"===e?"mobilescenepackage":"tile package"===e||"compact tile package"===e?"tilepackage":"task file"===e?"taskfile":"report template"===e?"report-template":"statistical data collection"===e?"statisticaldatacollection":"insights workbook"===e?"workbook":"insights model"===e?"insightsmodel":"insights page"===e?"insightspage":"insights theme"===e?"insightstheme":"hub initiative"===e?"hubinitiative":"hubpage"===e?"hubpage":"hub event"===e?"hubevent":"hub site application"===e?"hubsite":"relational database connection"===e?"relationaldatabaseconnection":"big data file share"===e?"datastorecollection":"image collection"===e?"imagecollection":"style"===e?"style":"desktop style"===e?"desktopstyle":"dashboard"===e?"dashboard":"raster function template"===e?"rasterprocessingtemplate":"vector tile package"===e?"vectortilepackage":"ortho mapping project"===e?"orthomappingproject":"ortho mapping template"===e?"orthomappingtemplate":"solution"===e?"solutions":"geopackage"===e?"geopackage":"deep learning package"===e?"deeplearningpackage":"real time analytic"===e?"realtimeanalytics":"big data analytic"===e?"bigdataanalytics":"feed"===e?"feed":"excalibur imagery project"===e?"excaliburimageryproject":"notebook"===e?"notebook":"storymap"===e?"storymap":"survey123 add in"===e?"survey123addin":"mission"===e?"mission":"mission report"===e?"missionreport":"quickcapture project"===e?"quickcaptureproject":"pro report"===e?"proreport":"urban model"===e?"urbanmodel":"web experience"===e?"experiencebuilder":"web experience template"===e?"webexperiencetemplate":"workflow"===e?"workflow":"insights script"===e?"insightsscript":"kernel gateway connection"===e?"kernelgatewayconnection":"hub initiative template"===e?"hubinitiativetemplate":"storymap theme"===e?"storymaptheme":"knowledge graph"===e?"knowledgegraph":"native application"===e?"nativeapp":"native application installer"===e?"nativeappinstaller":"link chart"===e?"linkchart":"investigation"===e?"investigation":"ogcfeatureserver"===e?"features":"pro project"===e?"proproject":"insights workbook package"===e?"insightsworkbookpackage":"maps",r?Object(o.a)("esri/images/portal/"+r+"16.png"):null}get isLayer(){return["Map Service","Feature Service","Feature Collection","Scene Service","Image Service","Stream Service","Vector Tile Service","WMTS","WMS"].indexOf(this.type)>-1}get itemUrl(){const e=this.get("portal.restUrl");return e?e+"/content/items/"+this.id:null}get thumbnailUrl(){const e=this.itemUrl,t=this.thumbnail;return e&&t?this.portal._normalizeUrl(`${e}/info/${t}?f=json`):null}get userItemUrl(){const e=this.get("portal.restUrl");if(!e)return null;const t=this.owner||this.get("portal.user.username");return t?`${e}/content/users/${this.ownerFolder?`${t}/${this.ownerFolder}`:t}/items/${this.id}`:null}load(e){this.portal||(this.portal=f.a.getDefault());const t=this.portal.load(e).then((()=>this.sourceJSON?this.sourceJSON:this.id&&this.itemUrl?this.portal._request(this.itemUrl,{signal:Object(c.k)(e)?e.signal:null,query:{token:this.apiKey}}):{})).then((e=>{this.sourceJSON=e,this.read(e)}));return this.addResolvingPromise(t),Promise.resolve(this)}addRating(e){const t={method:"post",query:{}};return e instanceof S&&(e=e.rating),isNaN(e)||"number"!=typeof e||(t.query.rating=e),this.portal._request(this.itemUrl+"/addRating",t).then((()=>new S({rating:e,created:new Date})))}clone(){const e={access:this.access,accessInformation:this.accessInformation,applicationProxies:Object(s.a)(this.applicationProxies),avgRating:this.avgRating,categories:Object(s.a)(this.categories),created:Object(s.a)(this.created),culture:this.culture,description:this.description,extent:Object(s.a)(this.extent),groupCategories:Object(s.a)(this.groupCategories),id:this.id,itemControl:this.itemControl,licenseInfo:this.licenseInfo,modified:Object(s.a)(this.modified),name:this.name,numComments:this.numComments,numRatings:this.numRatings,numViews:this.numViews,owner:this.owner,ownerFolder:this.ownerFolder,portal:this.portal,screenshots:Object(s.a)(this.screenshots),size:this.size,snippet:this.snippet,tags:Object(s.a)(this.tags),thumbnail:this.thumbnail,title:this.title,type:this.type,typeKeywords:Object(s.a)(this.typeKeywords),url:this.url};return this.loaded&&(e.loadStatus="loaded"),new _({sourceJSON:this.sourceJSON}).set(e)}createPostQuery(){const e=this.toJSON();for(const t in e)"tags"===t&&null!==e[t]&&(e[t]=e[t].join(", ")),"typeKeywords"===t&&null!==e[t]&&(e[t]=e[t].join(", ")),"extent"===t&&e[t]&&(e[t]=JSON.stringify(e[t]));return e}deleteRating(){return this.portal._request(this.itemUrl+"/deleteRating",{method:"post"}).then((()=>{}))}fetchData(e="json",t){return this.portal._request(this.itemUrl+"/data",{responseType:e,...t,query:{token:this.apiKey}})}fetchRating(e){return this.portal._request(this.itemUrl+"/rating",{query:{token:this.apiKey},...e}).then((e=>null!=e.rating?(e.created=new Date(e.created),new S(e)):null))}fetchRelatedItems(e,t){return this.portal._requestToTypedArray(this.itemUrl+"/relatedItems",{query:{...e,token:this.apiKey},...t},_)}getThumbnailUrl(e){let t=this.thumbnailUrl;return t&&e&&(t+=`&w=${e}`),t}reload(){return this.portal._request(this.itemUrl,{cacheBust:!0,query:{token:this.apiKey}}).then((e=>(this.sourceJSON=e,this.read(e),this)))}update(e){return this.id?this.load().then((()=>this.portal._signIn())).then((()=>{const t=e&&e.data,r={method:"post"};r.query=this.createPostQuery();for(const e in r.query)null===r.query[e]&&(r.query[e]="");return r.query.clearEmptyFields=!0,null!=t&&("string"==typeof t?r.query.text=t:"object"==typeof t&&(r.query.text=JSON.stringify(t))),this.portal._request(`${this.userItemUrl}/update`,r).then((()=>this.reload()))})):Promise.reject(new n.a("portal:item-does-not-exist","The item does not exist yet and cannot be updated"))}updateThumbnail(e){return this.id?this.load().then((()=>this.portal._signIn())).then((()=>{const t=e.thumbnail,r=e.filename,i={method:"post"};if("string"==typeof t)Object(u.u)(t)?i.query={data:t}:i.query={url:Object(u.A)(t)},Object(c.k)(r)&&(i.query.filename=r);else{const e=new FormData;Object(c.k)(r)?e.append("file",t,r):e.append("file",t),i.body=e}return this.portal._request(`${this.userItemUrl}/updateThumbnail`,i).then((()=>this.reload()))})):Promise.reject(new n.a("portal:item-does-not-exist","The item does not exist yet and cannot be updated"))}async fetchResources(e={},t){return(await r.e(20).then(r.bind(null,821))).fetchResources(this,e,t)}async addResource(e,t,i){const o=await r.e(20).then(r.bind(null,821));return e.portalItem=this,o.addOrUpdateResource(e,"add",t,i)}async removeResource(e,t){const i=await r.e(20).then(r.bind(null,821));if(e.portalItem&&e.portalItem.itemUrl!==this.itemUrl)throw new n.a("removeresource:portal-item-mismatch","The portal item associated with the provided resource does not match the item");return i.removeResource(this,e,t)}async removeAllResources(e){return(await r.e(20).then(r.bind(null,821))).removeAllResources(this,e)}resourceFromPath(e){return new w({portalItem:this,path:e})}toJSON(){const e=this.extent,t={created:this.created&&this.created.getTime(),description:this.description,extent:e&&[[e.xmin,e.ymin],[e.xmax,e.ymax]],id:this.id,modified:this.modified&&this.modified.getTime(),name:this.name,owner:this.owner,ownerFolder:this.ownerFolder,snippet:this.snippet,tags:this.tags,thumbnail:this.thumbnail,title:this.title,type:this.type,typeKeywords:this.typeKeywords,url:this.url};return Object(s.c)(t)}static fromJSON(e){if(!e)return null;if(e.declaredClass)throw new Error("JSON object is already hydrated");return new _({sourceJSON:e})}_getPostQuery(){const e=this.toJSON();for(const t in e)"tags"===t&&null!==e[t]&&(e[t]=e[t].join(", ")),"typeKeywords"===t&&null!==e[t]&&(e[t]=e[t].join(", ")),"extent"===t&&e[t]&&(e[t]=JSON.stringify(e[t]));return e}};Object(i.a)([Object(d.b)({type:["private","shared","org","public"]})],x.prototype,"access",void 0),Object(i.a)([Object(d.b)()],x.prototype,"accessInformation",void 0),Object(i.a)([Object(d.b)({type:String})],x.prototype,"apiKey",void 0),Object(i.a)([Object(d.b)({json:{read:{source:"appProxies"}}})],x.prototype,"applicationProxies",void 0),Object(i.a)([Object(d.b)()],x.prototype,"avgRating",void 0),Object(i.a)([Object(d.b)()],x.prototype,"categories",void 0),Object(i.a)([Object(d.b)({type:Date})],x.prototype,"created",void 0),Object(i.a)([Object(d.b)()],x.prototype,"culture",void 0),Object(i.a)([Object(d.b)()],x.prototype,"description",void 0),Object(i.a)([Object(d.b)({readOnly:!0})],x.prototype,"displayName",null),Object(i.a)([Object(d.b)({type:y.a})],x.prototype,"extent",void 0),Object(i.a)([Object(h.a)("extent")],x.prototype,"readExtent",null),Object(i.a)([Object(d.b)()],x.prototype,"groupCategories",void 0),Object(i.a)([Object(d.b)({readOnly:!0})],x.prototype,"iconUrl",null),Object(i.a)([Object(d.b)()],x.prototype,"id",void 0),Object(i.a)([Object(d.b)({readOnly:!0})],x.prototype,"isLayer",null),Object(i.a)([Object(d.b)()],x.prototype,"itemControl",void 0),Object(i.a)([Object(d.b)({readOnly:!0})],x.prototype,"itemUrl",null),Object(i.a)([Object(d.b)()],x.prototype,"licenseInfo",void 0),Object(i.a)([Object(d.b)({type:Date})],x.prototype,"modified",void 0),Object(i.a)([Object(d.b)()],x.prototype,"name",void 0),Object(i.a)([Object(d.b)()],x.prototype,"numComments",void 0),Object(i.a)([Object(d.b)()],x.prototype,"numRatings",void 0),Object(i.a)([Object(d.b)()],x.prototype,"numViews",void 0),Object(i.a)([Object(d.b)()],x.prototype,"owner",void 0),Object(i.a)([Object(d.b)()],x.prototype,"ownerFolder",void 0),Object(i.a)([Object(d.b)({type:f.a})],x.prototype,"portal",void 0),Object(i.a)([Object(d.b)()],x.prototype,"screenshots",void 0),Object(i.a)([Object(d.b)()],x.prototype,"size",void 0),Object(i.a)([Object(d.b)()],x.prototype,"snippet",void 0),Object(i.a)([Object(d.b)()],x.prototype,"sourceJSON",void 0),Object(i.a)([Object(d.b)()],x.prototype,"tags",void 0),Object(i.a)([Object(d.b)()],x.prototype,"thumbnail",void 0),Object(i.a)([Object(d.b)({readOnly:!0})],x.prototype,"thumbnailUrl",null),Object(i.a)([Object(d.b)()],x.prototype,"title",void 0),Object(i.a)([Object(d.b)()],x.prototype,"type",void 0),Object(i.a)([Object(d.b)()],x.prototype,"typeKeywords",void 0),Object(i.a)([Object(d.b)()],x.prototype,"url",void 0),Object(i.a)([Object(d.b)({readOnly:!0})],x.prototype,"userItemUrl",null),x=_=Object(i.a)([Object(m.a)("esri.portal.PortalItem")],x);var I=x;t.default=I},224:function(e,t,r){"use strict";var i=r(76),o=r(140),n=(r(91),r(95)),a=r(83),s=r(119),l=r(160),c=r(172),u=r(75),d=r(84),p=r(92),b=r(78),h=(r(74),r(79),r(77)),m=r(94),y=r(88);let f=0;const O=u.a.getLogger("esri.layers.Layer");let j=class extends(s.a.EventedMixin(Object(l.a)(c.a))){constructor(){super(...arguments),this.attributionDataUrl=null,this.fullExtent=new m.a(-180,-90,180,90,y.a.WGS84),this.id=Date.now().toString(16)+"-layer-"+f++,this.legendEnabled=!0,this.listMode="show",this.opacity=1,this.parent=null,this.popupEnabled=!0,this.attributionVisible=!0,this.spatialReference=y.a.WGS84,this.title=null,this.type=null,this.url=null,this.visible=!0}static async fromArcGISServerUrl(e){const t="string"==typeof e?{url:e}:e,i=await r.e(163).then(r.bind(null,707));try{return await i.fromUrl(t)}catch(o){throw O.error("#fromArcGISServerUrl({ url: '"+t.url+"'})","Failed to create layer from arcgis server url",o),o}}static async fromPortalItem(e){const t="portalItem"in e?e:{portalItem:e},i=await r.e(138).then(r.bind(null,629));try{return await i.fromItem(t)}catch(n){const e=t&&t.portalItem,r=e&&e.id||"unset",i=e&&e.portal&&e.portal.url||o.a.portalUrl;throw O.error("#fromPortalItem()","Failed to create layer from portal item (portal: '"+i+"', id: '"+r+"')",n),n}}initialize(){this.when().catch((e=>{var t,r;Object(d.m)(e)||u.a.getLogger(this.declaredClass).error("#load()",`Failed to load layer (title: '${null!=(t=this.title)?t:"no title"}', id: '${null!=(r=this.id)?r:"no id"}')`,{error:e})}))}destroy(){if(this.parent){const e=this,t=this.parent;"layers"in t&&t.layers.includes(e)?t.layers.remove(e):"tables"in t&&t.tables.includes(e)?t.tables.remove(e):"baseLayers"in t&&t.baseLayers.includes(e)?t.baseLayers.remove(e):"baseLayers"in t&&t.referenceLayers.includes(e)&&t.referenceLayers.remove(e)}}get hasAttributionData(){return null!=this.attributionDataUrl}get parsedUrl(){const e=this.url;return e?Object(p.K)(e):null}async fetchAttributionData(){const e=this.attributionDataUrl;if(this.hasAttributionData&&e)return(await Object(n.default)(e,{query:{f:"json"},responseType:"json"})).data;throw new a.a("layer:no-attribution-data","Layer does not have attribution data")}};Object(i.a)([Object(b.b)({type:String})],j.prototype,"attributionDataUrl",void 0),Object(i.a)([Object(b.b)({type:m.a})],j.prototype,"fullExtent",void 0),Object(i.a)([Object(b.b)({readOnly:!0})],j.prototype,"hasAttributionData",null),Object(i.a)([Object(b.b)({type:String})],j.prototype,"id",void 0),Object(i.a)([Object(b.b)({type:Boolean,nonNullable:!0})],j.prototype,"legendEnabled",void 0),Object(i.a)([Object(b.b)({type:["show","hide","hide-children"]})],j.prototype,"listMode",void 0),Object(i.a)([Object(b.b)({type:Number,range:{min:0,max:1},nonNullable:!0})],j.prototype,"opacity",void 0),Object(i.a)([Object(b.b)()],j.prototype,"parent",void 0),Object(i.a)([Object(b.b)({readOnly:!0})],j.prototype,"parsedUrl",null),Object(i.a)([Object(b.b)({type:Boolean})],j.prototype,"popupEnabled",void 0),Object(i.a)([Object(b.b)({type:Boolean})],j.prototype,"attributionVisible",void 0),Object(i.a)([Object(b.b)({type:y.a})],j.prototype,"spatialReference",void 0),Object(i.a)([Object(b.b)({type:String})],j.prototype,"title",void 0),Object(i.a)([Object(b.b)({type:String,readOnly:!0,json:{read:!1}})],j.prototype,"type",void 0),Object(i.a)([Object(b.b)()],j.prototype,"url",void 0),Object(i.a)([Object(b.b)({type:Boolean,nonNullable:!0})],j.prototype,"visible",void 0),j=Object(i.a)([Object(h.a)("esri.layers.Layer")],j);var g=j;t.a=g},236:function(e,t,r){"use strict";r.d(t,"a",(function(){return i}));const i=new(r(85).a)({esriFieldTypeSmallInteger:"small-integer",esriFieldTypeInteger:"integer",esriFieldTypeSingle:"single",esriFieldTypeDouble:"double",esriFieldTypeLong:"long",esriFieldTypeString:"string",esriFieldTypeDate:"date",esriFieldTypeOID:"oid",esriFieldTypeGeometry:"geometry",esriFieldTypeBlob:"blob",esriFieldTypeRaster:"raster",esriFieldTypeGUID:"guid",esriFieldTypeGlobalID:"global-id",esriFieldTypeXML:"xml"})},257:function(e,t,r){"use strict";r.d(t,"a",(function(){return j})),r.d(t,"b",(function(){return g}));var i=r(76),o=r(89),n=r(80),a=r(82),s=r(238);class l{constructor(){this._propertyOriginMap=new Map,this._originStores=new Array(s.a),this._values=new Map}clone(e){const t=new l,r=this._originStores[0];r&&r.forEach(((e,r)=>{t.set(r,Object(a.a)(e),0)}));for(let i=2;i<s.a;i++){const r=this._originStores[i];r&&r.forEach(((r,o)=>{e&&e.has(o)||t.set(o,Object(a.a)(r),i)}))}return t}get(e,t){const r=void 0===t?this._values:this._originStores[t];return r?r.get(e):void 0}keys(e){const t=null==e?this._values:this._originStores[e];return t?[...t.keys()]:[]}set(e,t,r=6){let i=this._originStores[r];if(i||(i=new Map,this._originStores[r]=i),i.set(e,t),!this._values.has(e)||Object(n.d)(this._propertyOriginMap.get(e))<=r){const i=this._values.get(e);return this._values.set(e,t),this._propertyOriginMap.set(e,r),i!==t}return!1}delete(e,t=6){const r=this._originStores[t];if(!r)return;const i=r.get(e);if(r.delete(e),this._values.has(e)&&this._propertyOriginMap.get(e)===t){this._values.delete(e);for(let r=t-1;r>=0;r--){const t=this._originStores[r];if(t&&t.has(e)){this._values.set(e,t.get(e)),this._propertyOriginMap.set(e,r);break}}}return i}has(e,t){const r=void 0===t?this._values:this._originStores[t];return!!r&&r.has(e)}revert(e,t){for(;t>0&&!this.has(e,t);)--t;const r=this._originStores[t],i=r&&r.get(e),o=this._values.get(e);return this._values.set(e,i),this._propertyOriginMap.set(e,t),o!==i}originOf(e){return this._propertyOriginMap.get(e)||0}forEach(e){this._values.forEach(e)}}var c=l,u=r(339),d=r(130),p=r(77);const b=e=>{let t=class extends e{constructor(...e){super(...e);const t=Object(n.d)(Object(d.a)(this)),r=t.metadatas,i=t.store,o=new c;t.store=o,i.keys().forEach((e=>{o.set(e,i.get(e),0)})),Object.keys(r).forEach((e=>{t.internalGet(e)&&o.set(e,t.internalGet(e),0)}))}read(e,t){Object(u.a)(this,e,t)}getAtOrigin(e,t){const r=h(this),i=Object(s.d)(t);if("string"==typeof e)return r.get(e,i);const o={};return e.forEach((e=>{o[e]=r.get(e,i)})),o}originOf(e){return Object(s.b)(this.originIdOf(e))}originIdOf(e){return h(this).originOf(e)}revert(e,t){const r=h(this),i=Object(s.d)(t),o=Object(d.a)(this);let n;n="string"==typeof e?"*"===e?r.keys(i):[e]:e,n.forEach((e=>{o.invalidate(e),r.revert(e,i),o.commit(e)}))}};return t=Object(i.a)([Object(p.a)("esri.core.ReadOnlyMultiOriginJSONSupport")],t),t};function h(e){return Object(d.a)(e).store}let m=class extends(b(o.a)){};m=Object(i.a)([Object(p.a)("esri.core.ReadOnlyMultiOriginJSONSupport")],m);var y=r(346);const f=e=>{let t=class extends e{constructor(...e){super(...e)}clear(e,t="user"){return O(this).delete(e,Object(s.d)(t))}write(e={},t){return Object(y.b)(this,e=e||{},t),e}setAtOrigin(e,t,r){Object(d.a)(this).setAtOrigin(e,t,Object(s.d)(r))}removeOrigin(e){const t=O(this),r=Object(s.d)(e),i=t.keys(r);for(const o of i)t.originOf(o)===r&&t.set(o,t.get(o,r),6)}updateOrigin(e,t){const r=O(this),i=Object(s.d)(t),o=this.get(e);for(let n=i+1;n<s.a;++n)r.delete(e,n);r.set(e,o,i)}toJSON(e){return this.write({},e)}};return t=Object(i.a)([Object(p.a)("esri.core.WriteableMultiOriginJSONSupport")],t),t.prototype.toJSON.isDefaultToJSON=!0,t};function O(e){return Object(d.a)(e).store}const j=e=>{let t=class extends(f(b(e))){constructor(...e){super(...e)}};return t=Object(i.a)([Object(p.a)("esri.core.MultiOriginJSONSupport")],t),t};let g=class extends(j(o.a)){};g=Object(i.a)([Object(p.a)("esri.core.MultiOriginJSONSupport")],g)},262:function(e,t,r){"use strict";r.d(t,"a",(function(){return n})),r.d(t,"b",(function(){return d})),r.d(t,"c",(function(){return b})),r.d(t,"d",(function(){return s})),r.d(t,"e",(function(){return a})),r.d(t,"f",(function(){return l}));var i=r(80),o=r(92);function n(e,t){const r=t&&t.url&&t.url.path;if(e&&r&&(e=Object(o.A)(e,r,{preserveProtocolRelative:!0}),t.portalItem&&t.readResourcePaths)){const r=Object(o.C)(e,t.portalItem.itemUrl);u.test(r)&&t.readResourcePaths.push(t.portalItem.resourceFromPath(r).path)}return p(e,t&&t.portal)}function a(e,t,r=0){if(!e)return e;!Object(o.s)(e)&&t&&t.blockedRelativeUrls&&t.blockedRelativeUrls.push(e);let i=Object(o.A)(e);if(t){const r=t.verifyItemRelativeUrls&&t.verifyItemRelativeUrls.rootPath||t.url&&t.url.path;if(r){const n=p(r,t.portal);i=Object(o.C)(p(i,t.portal),n,n),i!==e&&t.verifyItemRelativeUrls&&t.verifyItemRelativeUrls.writtenUrls.push(i)}}return i=function(e,t){return t&&!t.isPortal&&t.urlKey&&t.customBaseUrl?Object(o.h)(e,`${t.urlKey}.${t.customBaseUrl}`,t.portalHostname):e}(i,t&&t.portal),Object(o.s)(i)&&(i=Object(o.D)(i)),null!=t&&t.resources&&null!=t&&t.portalItem&&!Object(o.s)(i)&&!Object(o.u)(i)&&0===r&&t.resources.toKeep.push({resource:t.portalItem.resourceFromPath(i)}),i}function s(e,t,r){return n(e,r)}function l(e,t,r,i){const o=a(e,i);void 0!==o&&(t[r]=o)}const c=/\/items\/([^\/]+)\/resources\//,u=/^\.\/resources\//;function d(e){const t=Object(i.k)(e)?e.match(c):null;return Object(i.k)(t)?t[1]:null}function p(e,t){if(!t||t.isPortal||!t.urlKey||!t.customBaseUrl)return e;const r=`${t.urlKey}.${t.customBaseUrl}`;return Object(o.q)(o.g,`${o.g.scheme}://${r}`)?Object(o.h)(e,t.portalHostname,r):Object(o.h)(e,r,t.portalHostname)}var b=Object.freeze({__proto__:null,fromJSON:n,toJSON:a,read:s,write:l,itemIdFromResourceUrl:d})},331:function(e,t,r){"use strict";r.d(t,"a",(function(){return s}));var i=r(103),o=r(102),n=(r(74),r(75),r(118));const a="esri-widget__heading";function s(e,t){const r=`h${Object(i.e)(Math.ceil(e.level),1,6)}`;return delete e.level,Object(n.a)(r,{...e,class:Object(o.a)(a,e.class)},t)}},459:function(e,t,r){"use strict";r.d(t,"a",(function(){return O})),r.d(t,"b",(function(){return f})),r.d(t,"c",(function(){return l})),r.d(t,"d",(function(){return a})),r.d(t,"e",(function(){return b})),r.d(t,"f",(function(){return s})),r.d(t,"g",(function(){return u})),r.d(t,"h",(function(){return d})),r.d(t,"i",(function(){return c}));var i=r(103),o=r(98),n=r(96);function a(e){const t=e[0]*e[0]+e[4]*e[4]+e[8]*e[8],r=e[1]*e[1]+e[5]*e[5]+e[9]*e[9],i=e[2]*e[2]+e[6]*e[6]+e[10]*e[10];return Math.sqrt(Math.max(t,r,i))}function s(e,t){const r=Math.sqrt(t[0]*t[0]+t[4]*t[4]+t[8]*t[8]),i=Math.sqrt(t[1]*t[1]+t[5]*t[5]+t[9]*t[9]),n=Math.sqrt(t[2]*t[2]+t[6]*t[6]+t[10]*t[10]);return Object(o.w)(e,r,i,n),e}function l(e,t,r){r=r||e;const i=Object(o.h)(e,t);Object(o.w)(r,e[0]-i*t[0],e[1]-i*t[1],e[2]-i*t[2]),Object(o.r)(r,r)}function c(e,t,r){Math.abs(e[0])>Math.abs(e[1])?Object(o.w)(t,0,1,0):Object(o.w)(t,1,0,0),Object(o.g)(r,e,t),Object(o.r)(t,t),Object(o.g)(t,r,e),Object(o.r)(r,r)}function u(e,t,r,i=Object(n.e)()){const a=Object(o.p)(e),s=Object(o.p)(t),l=Object(o.h)(e,t)/(a*s);if(l<.9999999999999999){const n=Math.acos(l),c=((1-r)*a+r*s)/Math.sin(n),u=c/a*Math.sin((1-r)*n),d=c/s*Math.sin(r*n);return Object(o.e)(j,e,u),Object(o.e)(g,t,d),Object(o.f)(i,j,g)}return Object(o.i)(i,e,t,r)}function d(e,t,r,i=Object(n.e)(),a=Object(n.e)()){const s=Object(o.p)(e),l=Object(o.p)(t),c=Object(o.h)(e,t)/(s*l);if(c<.9999999999999999){const n=Math.acos(c),u=Math.sin(n),d=Math.sin(r*n),p=Math.sin((1-r)*n),b=(1-r)*s+r*l;{const r=b/u,n=r/l*d;Object(o.e)(j,e,r/s*p),Object(o.e)(g,t,n),Object(o.f)(i,j,g)}{const i=1/s*(-Math.cos((1-r)*n)*n*b+p*(-s+l));Object(o.e)(j,e,i);const c=1/l*(Math.cos(r*n)*n*b+d*(-s+l));Object(o.e)(g,t,c),Object(o.f)(a,j,g),Object(o.e)(a,a,1/u)}return a}return Object(o.i)(i,e,t,r),Object(o.j)(a,t,e),Object(o.r)(a,a),a}class p{constructor(e,t){this.min=e,this.max=t,this.range=t-e}ndiff(e,t=0){return Math.ceil((e-t)/this.range)*this.range+t}_normalize(e,t,r,i=0,o=!1){return(r-=i)<e?r+=this.ndiff(e-r):r>t&&(r-=this.ndiff(r-t)),o&&r===t&&(r=e),r+i}normalize(e,t=0,r=!1){return this._normalize(this.min,this.max,e,t,r)}clamp(e,t=0){return Object(i.e)(e-t,this.min,this.max)+t}monotonic(e,t,r){return e<t?t:t+this.ndiff(e-t,r)}minimalMonotonic(e,t,r){return this._normalize(e,e+this.range,t,r)}center(e,t,r){return t=this.monotonic(e,t,r),this.normalize((e+t)/2,r)}diff(e,t,r){return this.monotonic(e,t,r)-e}shortestSignedDiff(e,t){e=this.normalize(e);const r=(t=this.normalize(t))-e,i=t<e?this.minimalMonotonic(e,t)-e:t-this.minimalMonotonic(t,e);return Math.abs(r)<Math.abs(i)?r:i}contains(e,t,r){return t=this.minimalMonotonic(e,t),(r=this.minimalMonotonic(e,r))>e&&r<t}}function b(e,t,r,i){Object(o.j)(h,t,e),Object(o.j)(m,r,e),Object(o.g)(i,h,m),Object(o.r)(i,i),i[3]=-Object(o.h)(e,i)}const h=Object(n.e)(),m=Object(n.e)();function y(e){for(const t in e){const r=e[t];r instanceof Function&&(e[t]=r.bind(e))}return e}y(new p(0,2*Math.PI));const f=y(new p(-Math.PI,Math.PI)),O=y(new p(0,360)),j=(Object(n.e)(),Object(n.e)()),g=Object(n.e)()},486:function(e,t,r){"use strict";r.d(t,"a",(function(){return o})),r.d(t,"b",(function(){return n}));var i=r(79);function o(e){const t=Object(i.e)(100*(1-e));return Math.max(0,Math.min(t,100))}function n(e){const t=1-e/100;return Math.max(0,Math.min(t,1))}},513:function(e,t,r){"use strict";r.d(t,"a",(function(){return a}));var i=r(76),o=r(78),n=(r(74),r(79),r(75),r(77));const a=e=>{let t=class extends e{constructor(...e){super(...e),this.goToOverride=null,this.view=null}callGoTo(e){const{view:t}=this;return this.goToOverride?this.goToOverride(t,e):t.goTo(e.target,e.options)}};return Object(i.a)([Object(o.b)()],t.prototype,"goToOverride",void 0),Object(i.a)([Object(o.b)()],t.prototype,"view",void 0),t=Object(i.a)([Object(n.a)("esri.widgets.support.GoTo")],t),t}},522:function(e,t,r){"use strict";var i=r(76),o=r(81),n=r(78),a=(r(74),r(79),r(75),r(77)),s=r(93);let l=class extends o.a{constructor(e){super(e),this.geometries=null,this.outSpatialReference=null,this.transformation=null,this.transformForward=null}toJSON(){const e=this.geometries.map((function(e){return e.toJSON()})),t=this.geometries[0],r={};return r.outSR=this.outSpatialReference.wkid||JSON.stringify(this.outSpatialReference.toJSON()),r.inSR=t.spatialReference.wkid||JSON.stringify(t.spatialReference.toJSON()),r.geometries=JSON.stringify({geometryType:Object(s.c)(t),geometries:e}),this.transformation&&(r.transformation=this.transformation.wkid||JSON.stringify(this.transformation)),null!=this.transformForward&&(r.transformForward=this.transformForward),r}};Object(i.a)([Object(n.b)()],l.prototype,"geometries",void 0),Object(i.a)([Object(n.b)({json:{read:{source:"outSR"}}})],l.prototype,"outSpatialReference",void 0),Object(i.a)([Object(n.b)()],l.prototype,"transformation",void 0),Object(i.a)([Object(n.b)()],l.prototype,"transformForward",void 0),l=Object(i.a)([Object(a.a)("esri.rest.support.ProjectParameters")],l);var c=l;t.a=c},524:function(e,t){function r(e){return Promise.resolve().then((function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}))}r.keys=function(){return[]},r.resolve=r,e.exports=r,r.id=524},541:function(e,t,r){"use strict";var i=r(76),o=r(99),n=r(147),a=r(80),s=r(78),l=(r(74),r(79),r(75),r(77)),c=r(260);let u=class extends(Object(n.b)(o.a)){constructor(e){super(e),this.getCollections=null}initialize(){this.handles.add(Object(c.a)((()=>this.refresh())))}destroy(){this.getCollections=null}refresh(){const e=Object(a.k)(this.getCollections)?this.getCollections():null;if(Object(a.j)(e))return void this.removeAll();let t=0;for(const r of e)Object(a.k)(r)&&(t=this._processCollection(t,r));this.splice(t,this.length)}_createNewInstance(e){return new o.a(e)}_processCollection(e,t){if(!t)return e;const r=this.itemFilterFunction?this.itemFilterFunction:e=>!!e;for(const i of t)if(i){if(r(i)){const t=this.indexOf(i,e);t>=0?t!==e&&this.reorder(i,e):this.add(i,e),++e}if(this.getChildrenFunction){const t=this.getChildrenFunction(i);if(Array.isArray(t))for(const r of t)e=this._processCollection(e,r);else e=this._processCollection(e,t)}}return e}};Object(i.a)([Object(s.b)()],u.prototype,"getCollections",void 0),Object(i.a)([Object(s.b)()],u.prototype,"getChildrenFunction",void 0),Object(i.a)([Object(s.b)()],u.prototype,"itemFilterFunction",void 0),u=Object(i.a)([Object(l.a)("esri.core.CollectionFlattener")],u);var d=u;t.a=d},561:function(e,t,r){"use strict";r.d(t,"a",(function(){return h})),r.d(t,"b",(function(){return u})),r.d(t,"c",(function(){return d})),r.d(t,"d",(function(){return p})),r.d(t,"e",(function(){return b})),r.d(t,"f",(function(){return m})),r.d(t,"g",(function(){return y}));var i=r(604),o=r(99),n=r(75),a=r(92),s=r(79),l=r(605);const c=n.a.getLogger("esri.support.basemapUtils");function u(){return{}}function d(e){for(const t in e){const r=e[t];!1===(null==r?void 0:r.destroyed)&&r.destroy(),delete e[t]}}function p(e,t){var r;let o;if("string"==typeof e){if(!(e in l.a)){const t=Object.keys(l.a).map((e=>`"${e}"`)).join(", ");return c.warn(`Unable to find basemap definition for: ${e}. Try one of these: ${t}`),null}t&&(o=t[e]),o||(o=i.default.fromId(e),t&&(t[e]=o))}else o=Object(s.m)(i.default,e);return null!=(r=o)&&r.destroyed&&(c.warn("The provided basemap is already destroyed",{basemap:o}),o=null),o}function b(e){let t=null;const r=j(e),i=!r.baseLayers.length;for(const o in l.a){const e=_(r,w(l.a[o]),{mustMatchReferences:i});if("equal"===e){t=o;break}"base-layers-equal"===e&&(t=o)}return t}function h(e,t){return e===t||"equal"===_(j(e),j(t),{mustMatchReferences:!0})}function m(e){return!(null==e||!e.baseLayers.concat(e.referenceLayers).some(y))}function y(e){if(O(e.url))return!0;if("vector-tile"===e.type)for(const t in e.sourceNameToSource){const r=e.sourceNameToSource[t];if(O(null==r?void 0:r.sourceUrl))return!0}return!1}const f=/^(basemaps|ibasemaps).*-api\.arcgis\.com$/i;function O(e){if(!e)return!1;const t=new a.a(Object(a.A)(e));return f.test(t.authority)}function j(e){return e?!e.loaded&&e.resourceInfo?w(e.resourceInfo.data):{baseLayers:g(e.baseLayers),referenceLayers:g(e.referenceLayers)}:null}function g(e){return(o.a.isCollection(e)?e.toArray():e).map(v)}function v(e){return{type:e.type,url:I("urlTemplate"in e&&e.urlTemplate||e.url||"styleUrl"in e&&e.styleUrl),minScale:"minScale"in e&&null!=e.minScale?e.minScale:0,maxScale:"maxScale"in e&&null!=e.maxScale?e.maxScale:0,opacity:null!=e.opacity?e.opacity:1,visible:null==e.visible||!!e.visible}}function w(e){return e?{baseLayers:k(e.baseMapLayers.filter((e=>!e.isReference))),referenceLayers:k(e.baseMapLayers.filter((e=>e.isReference)))}:null}function k(e){return e.map((e=>function(e){let t;switch(e.layerType){case"VectorTileLayer":t="vector-tile";break;case"ArcGISTiledMapServiceLayer":t="tile";break;default:t="unknown"}return{type:t,url:I(e.templateUrl||e.urlTemplate||e.styleUrl||e.url),minScale:null!=e.minScale?e.minScale:0,maxScale:null!=e.maxScale?e.maxScale:0,opacity:null!=e.opacity?e.opacity:1,visible:null==e.visibility||!!e.visibility}}(e)))}function _(e,t,r){return null!=e!=(null!=t)?"not-equal":e?S(e.baseLayers,t.baseLayers)?S(e.referenceLayers,t.referenceLayers)?"equal":r.mustMatchReferences?"not-equal":"base-layers-equal":"not-equal":"equal"}function S(e,t){if(e.length!==t.length)return!1;for(let r=0;r<e.length;r++)if(!x(e[r],t[r]))return!1;return!0}function x(e,t){return e.type===t.type&&e.url===t.url&&e.minScale===t.minScale&&e.maxScale===t.maxScale&&e.visible===t.visible&&e.opacity===t.opacity}function I(e){return e?Object(a.D)(e).replace(/^\s*https?:/i,"").toLowerCase():""}},575:function(e,t,r){"use strict";var i,o=r(76),n=r(81),a=r(103),s=r(78),l=(r(74),r(106)),c=(r(75),r(87)),u=r(77),d=r(86),p=r(79),b=r(104),h=r(459);let m=i=class extends n.a{constructor(...e){super(...e),this.position=new b.a([0,0,0]),this.heading=0,this.tilt=0,this.fov=55}normalizeCtorArgs(e,t,r,i){if(e&&"object"==typeof e&&("x"in e||Array.isArray(e))){const o={position:e};return null!=t&&(o.heading=t),null!=r&&(o.tilt=r),null!=i&&(o.fov=i),o}return e}writePosition(e,t,r,i){const o=e.clone();o.x=Object(p.i)(e.x||0),o.y=Object(p.i)(e.y||0),o.z=e.hasZ?Object(p.i)(e.z||0):e.z,t[r]=o.write(null,i)}readPosition(e,t){const r=new b.a;return r.read(e,t),r.x=Object(p.i)(r.x||0),r.y=Object(p.i)(r.y||0),r.z=r.hasZ?Object(p.i)(r.z||0):r.z,r}equals(e){return!!e&&this.tilt===e.tilt&&this.heading===e.heading&&this.fov===e.fov&&this.position.equals(e.position)}clone(){return new i({position:this.position.clone(),heading:this.heading,tilt:this.tilt,fov:this.fov})}};Object(o.a)([Object(s.b)({type:b.a,json:{write:{isRequired:!0}}})],m.prototype,"position",void 0),Object(o.a)([Object(d.a)("position")],m.prototype,"writePosition",null),Object(o.a)([Object(c.a)("position")],m.prototype,"readPosition",null),Object(o.a)([Object(s.b)({type:Number,nonNullable:!0,json:{write:{isRequired:!0}}}),Object(l.a)((e=>h.a.normalize(Object(p.i)(e))))],m.prototype,"heading",void 0),Object(o.a)([Object(s.b)({type:Number,nonNullable:!0,json:{write:{isRequired:!0}}}),Object(l.a)((e=>Object(a.e)(Object(p.i)(e),-180,180)))],m.prototype,"tilt",void 0),Object(o.a)([Object(s.b)({type:Number,nonNullable:!0,json:{read:!1,write:!1}})],m.prototype,"fov",void 0),m=i=Object(o.a)([Object(u.a)("esri.Camera")],m);var y,f=m,O=r(91),j=r(80),g=r(93);let v=y=class extends n.a{constructor(e){super(e),this.rotation=0,this.scale=0,this.targetGeometry=null,this.camera=null}castRotation(e){return(e%=360)<0&&(e+=360),e}clone(){return new y({rotation:this.rotation,scale:this.scale,targetGeometry:Object(j.k)(this.targetGeometry)?this.targetGeometry.clone():null,camera:Object(j.k)(this.camera)?this.camera.clone():null})}};function w(){return{enabled:!this.camera}}Object(o.a)([Object(s.b)({type:Number,json:{write:!0,origins:{"web-map":{default:0,write:!0},"web-scene":{write:{overridePolicy:w}}}}})],v.prototype,"rotation",void 0),Object(o.a)([Object(l.a)("rotation")],v.prototype,"castRotation",null),Object(o.a)([Object(s.b)({type:Number,json:{write:!0,origins:{"web-map":{default:0,write:!0},"web-scene":{write:{overridePolicy:w}}}}})],v.prototype,"scale",void 0),Object(o.a)([Object(s.b)({types:O.a,json:{read:g.a,write:!0,origins:{"web-scene":{read:g.a,write:{overridePolicy:w}}}}})],v.prototype,"targetGeometry",void 0),Object(o.a)([Object(s.b)({type:f,json:{write:!0}})],v.prototype,"camera",void 0),v=y=Object(o.a)([Object(u.a)("esri.Viewpoint")],v);var k=v;t.a=k},634:function(e,t,r){"use strict";function i(e){return e&&"getAtOrigin"in e&&"originOf"in e}r.d(t,"a",(function(){return i}))},635:function(e,t,r){"use strict";r.d(t,"a",(function(){return o}));var i=r(83);class o{constructor(e,t,r=""){this.major=e,this.minor=t,this._context=r}lessThan(e,t){return this.major<e||e===this.major&&this.minor<t}since(e,t){return!this.lessThan(e,t)}validate(e){if(this.major!==e.major){const t=this._context&&this._context+":",r=this._context&&this._context+" ";throw new i.a(t+"unsupported-version",`Required major ${r}version is '${this.major}', but got '\${version.major}.\${version.minor}'`,{version:e})}}clone(){return new o(this.major,this.minor,this._context)}static parse(e,t=""){const[r,n]=e.split("."),a=/^\s*\d+\s*$/;if(!r||!r.match||!r.match(a))throw new i.a((t&&t+":")+"invalid-version","Expected major version to be a number, but got '${version}'",{version:e});if(!n||!n.match||!n.match(a))throw new i.a((t&&t+":")+"invalid-version","Expected minor version to be a number, but got '${version}'",{version:e});const s=parseInt(r,10),l=parseInt(n,10);return new o(s,l,t)}}},647:function(e,t,r){"use strict";r.d(t,"a",(function(){return h}));var i=r(76),o=r(99),n=r(302),a=r(75),s=r(84),l=r(78),c=(r(74),r(79),r(77)),u=r(224);function d(e){return e&&"group"===e.type}function p(e,t,r){let i,o;if(e)for(let n=0,a=e.length;n<a;n++){if(i=e.getItemAt(n),i[t]===r)return i;if(d(i)&&(o=p(i.layers,t,r),o))return o}}const b=a.a.getLogger("esri.support.LayersMixin"),h=e=>{let t=class extends e{constructor(...e){super(...e),this.layers=new o.a;const t=e=>{e.parent=this,this.layerAdded(e),"elevation"!==e.type&&"base-elevation"!==e.type||b.error(`Layer 'title:${e.title}, id:${e.id}' of type '${e.type}' is not supported as an operational layer and will therefore be ignored.`)},r=e=>{e.parent=null,this.layerRemoved(e)};this.layers.on("before-add",(e=>(e=>{e.parent&&"remove"in e.parent&&e.parent.remove(e)})(e.item))),this.layers.on("after-add",(e=>t(e.item))),this.layers.on("after-remove",(e=>r(e.item)))}destroy(){const e=this.layers.removeAll();for(const t of e)this.layerRemoved(t),t.destroy();this.layers.destroy()}set layers(e){this._set("layers",Object(n.b)(e,this._get("layers")))}add(e,t){const r=this.layers;if(t=r.getNextIndex(t),e instanceof u.a){const i=e;i.parent===this?this.reorder(i,t):r.add(i,t)}else Object(s.p)(e)?e.then((e=>{this.destroyed||this.add(e,t)})):b.error("#add()","The item being added is not a Layer or a Promise that resolves to a Layer.")}addMany(e,t){const r=this.layers;t=r.getNextIndex(t),e.slice().forEach((e=>{e.parent!==this?(r.add(e,t),t+=1):this.reorder(e,t)}))}findLayerById(e){return p(this.layers,"id",e)}findLayerByUid(e){return p(this.layers,"uid",e)}remove(e){return this.layers.remove(e)}removeMany(e){return this.layers.removeMany(e)}removeAll(){return this.layers.removeAll()}reorder(e,t){return this.layers.reorder(e,t)}layerAdded(e){}layerRemoved(e){}};return Object(i.a)([Object(l.b)()],t.prototype,"layers",null),t=Object(i.a)([Object(c.a)("esri.support.LayersMixin")],t),t}},648:function(e,t,r){"use strict";r.d(t,"a",(function(){return b}));var i=r(76),o=r(99),n=r(302),a=r(75),s=r(78),l=(r(74),r(79),r(77));const c="esri.support.TablesMixin",u=a.a.getLogger(c);function d(e){return e&&"group"===e.type}function p(e,t,r){if(e)for(let i=0,o=e.length;i<o;i++){const o=e.getItemAt(i);if(o[t]===r)return o;if(d(o)){const e=p(o.tables,t,r);if(e)return e}}}const b=e=>{let t=class extends e{constructor(...e){super(...e),this.tables=new o.a,this.tables.on("after-add",(e=>{const t=e.item;t.parent&&t.parent!==this&&"tables"in t.parent&&t.parent.tables.remove(t),t.parent=this,"feature"!==t.type&&u.error(`Layer 'title:${t.title}, id:${t.id}' of type '${t.type}' is not supported as a table and will therefore be ignored.`)})),this.tables.on("after-remove",(e=>{e.item.parent=null}))}destroy(){const e=this.tables.removeAll();for(const t of e)t.destroy();this.tables.destroy()}set tables(e){this._set("tables",Object(n.b)(e,this._get("tables")))}findTableById(e){return p(this.tables,"id",e)}findTableByUid(e){return p(this.tables,"uid",e)}};return Object(i.a)([Object(s.b)()],t.prototype,"tables",null),t=Object(i.a)([Object(l.a)(c)],t),t}},664:function(e,t,r){"use strict";function i(e,t){if(!o(e,t)){const r=e.typeKeywords;r?r.push(t):e.typeKeywords=[t]}}function o(e,t){return!!e.typeKeywords&&e.typeKeywords.indexOf(t)>-1}function n(e,t){const r=e.typeKeywords;if(r){const e=r.indexOf(t);e>-1&&r.splice(e,1)}}r.d(t,"a",(function(){return i})),r.d(t,"b",(function(){return o})),r.d(t,"c",(function(){return n}))},689:function(e,t,r){"use strict";r.d(t,"a",(function(){return o}));var i=r(634);function o(e){e&&e.writtenProperties&&e.writtenProperties.forEach((e=>{const t=e.target;e.newOrigin&&e.oldOrigin!==e.newOrigin&&Object(i.a)(t)&&t.updateOrigin(e.propName,e.newOrigin)}))}},705:function(e,t,r){"use strict";var i,o=r(76),n=r(89),a=r(78),s=(r(74),r(106)),l=(r(75),r(77));let c=i=class extends n.a{constructor(e){super(e),this.autoCloseMenu=!1,this.iconClass=null,this.items=null,this.label=null,this.open=!1,this.selected=!1,this.selectionEnabled=!1,this.clickFunction=null}castItems(e){return e?e.map((e=>e instanceof i?e:new i(e))):null}};Object(o.a)([Object(a.b)()],c.prototype,"autoCloseMenu",void 0),Object(o.a)([Object(a.b)()],c.prototype,"iconClass",void 0),Object(o.a)([Object(a.b)()],c.prototype,"items",void 0),Object(o.a)([Object(s.a)("items")],c.prototype,"castItems",null),Object(o.a)([Object(a.b)()],c.prototype,"label",void 0),Object(o.a)([Object(a.b)()],c.prototype,"open",void 0),Object(o.a)([Object(a.b)()],c.prototype,"selected",void 0),Object(o.a)([Object(a.b)()],c.prototype,"selectionEnabled",void 0),Object(o.a)([Object(a.b)()],c.prototype,"clickFunction",void 0),c=i=Object(o.a)([Object(l.a)("esri.widgets.FeatureTable.Grid.support.ButtonMenuItem")],c);var u=c;t.a=u},798:function(e,t,r){"use strict";var i=r(76);function o(e){var t=e.getBoundingClientRect();return{width:t.width,height:t.height,top:t.top,right:t.right,bottom:t.bottom,left:t.left,x:t.left,y:t.top}}function n(e){if(null==e)return window;if("[object Window]"!==e.toString()){var t=e.ownerDocument;return t&&t.defaultView||window}return e}function a(e){var t=n(e);return{scrollLeft:t.pageXOffset,scrollTop:t.pageYOffset}}function s(e){return e instanceof n(e).Element||e instanceof Element}function l(e){return e instanceof n(e).HTMLElement||e instanceof HTMLElement}function c(e){return"undefined"!==typeof ShadowRoot&&(e instanceof n(e).ShadowRoot||e instanceof ShadowRoot)}function u(e){return e?(e.nodeName||"").toLowerCase():null}function d(e){return((s(e)?e.ownerDocument:e.document)||window.document).documentElement}function p(e){return o(d(e)).left+a(e).scrollLeft}function b(e){return n(e).getComputedStyle(e)}function h(e){var t=b(e),r=t.overflow,i=t.overflowX,o=t.overflowY;return/auto|scroll|overlay|hidden/.test(r+o+i)}function m(e,t,r){void 0===r&&(r=!1);var i=d(t),s=o(e),c=l(t),b={scrollLeft:0,scrollTop:0},m={x:0,y:0};return(c||!c&&!r)&&(("body"!==u(t)||h(i))&&(b=function(e){return e!==n(e)&&l(e)?{scrollLeft:(t=e).scrollLeft,scrollTop:t.scrollTop}:a(e);var t}(t)),l(t)?((m=o(t)).x+=t.clientLeft,m.y+=t.clientTop):i&&(m.x=p(i))),{x:s.left+b.scrollLeft-m.x,y:s.top+b.scrollTop-m.y,width:s.width,height:s.height}}function y(e){var t=o(e),r=e.offsetWidth,i=e.offsetHeight;return Math.abs(t.width-r)<=1&&(r=t.width),Math.abs(t.height-i)<=1&&(i=t.height),{x:e.offsetLeft,y:e.offsetTop,width:r,height:i}}function f(e){return"html"===u(e)?e:e.assignedSlot||e.parentNode||(c(e)?e.host:null)||d(e)}function O(e){return["html","body","#document"].indexOf(u(e))>=0?e.ownerDocument.body:l(e)&&h(e)?e:O(f(e))}function j(e,t){var r;void 0===t&&(t=[]);var i=O(e),o=i===(null==(r=e.ownerDocument)?void 0:r.body),a=n(i),s=o?[a].concat(a.visualViewport||[],h(i)?i:[]):i,l=t.concat(s);return o?l:l.concat(j(f(s)))}function g(e){return["table","td","th"].indexOf(u(e))>=0}function v(e){return l(e)&&"fixed"!==b(e).position?e.offsetParent:null}function w(e){for(var t=n(e),r=v(e);r&&g(r)&&"static"===b(r).position;)r=v(r);return r&&("html"===u(r)||"body"===u(r)&&"static"===b(r).position)?t:r||function(e){var t=-1!==navigator.userAgent.toLowerCase().indexOf("firefox");if(-1!==navigator.userAgent.indexOf("Trident")&&l(e)&&"fixed"===b(e).position)return null;for(var r=f(e);l(r)&&["html","body"].indexOf(u(r))<0;){var i=b(r);if("none"!==i.transform||"none"!==i.perspective||"paint"===i.contain||-1!==["transform","perspective"].indexOf(i.willChange)||t&&"filter"===i.willChange||t&&i.filter&&"none"!==i.filter)return r;r=r.parentNode}return null}(e)||t}var k="top",_="bottom",S="right",x="left",I="auto",T=[k,_,S,x],E="start",C="end",N="viewport",A="popper",B=T.reduce((function(e,t){return e.concat([t+"-"+E,t+"-"+C])}),[]),M=[].concat(T,[I]).reduce((function(e,t){return e.concat([t,t+"-"+E,t+"-"+C])}),[]),L=["beforeRead","read","afterRead","beforeMain","main","afterMain","beforeWrite","write","afterWrite"];function U(e){var t=new Map,r=new Set,i=[];function o(e){r.add(e.name),[].concat(e.requires||[],e.requiresIfExists||[]).forEach((function(e){if(!r.has(e)){var i=t.get(e);i&&o(i)}})),i.push(e)}return e.forEach((function(e){t.set(e.name,e)})),e.forEach((function(e){r.has(e.name)||o(e)})),i}function F(e){var t;return function(){return t||(t=new Promise((function(r){Promise.resolve().then((function(){t=void 0,r(e())}))}))),t}}var R={placement:"bottom",modifiers:[],strategy:"absolute"};function P(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return!t.some((function(e){return!(e&&"function"===typeof e.getBoundingClientRect)}))}function D(e){void 0===e&&(e={});var t=e,r=t.defaultModifiers,i=void 0===r?[]:r,o=t.defaultOptions,n=void 0===o?R:o;return function(e,t,r){void 0===r&&(r=n);var o={placement:"bottom",orderedModifiers:[],options:Object.assign({},R,n),modifiersData:{},elements:{reference:e,popper:t},attributes:{},styles:{}},a=[],l=!1,c={state:o,setOptions:function(r){u(),o.options=Object.assign({},n,o.options,r),o.scrollParents={reference:s(e)?j(e):e.contextElement?j(e.contextElement):[],popper:j(t)};var l=function(e){var t=U(e);return L.reduce((function(e,r){return e.concat(t.filter((function(e){return e.phase===r})))}),[])}(function(e){var t=e.reduce((function(e,t){var r=e[t.name];return e[t.name]=r?Object.assign({},r,t,{options:Object.assign({},r.options,t.options),data:Object.assign({},r.data,t.data)}):t,e}),{});return Object.keys(t).map((function(e){return t[e]}))}([].concat(i,o.options.modifiers)));return o.orderedModifiers=l.filter((function(e){return e.enabled})),o.orderedModifiers.forEach((function(e){var t=e.name,r=e.options,i=void 0===r?{}:r,n=e.effect;if("function"===typeof n){var s=n({state:o,name:t,instance:c,options:i}),l=function(){};a.push(s||l)}})),c.update()},forceUpdate:function(){if(!l){var e=o.elements,t=e.reference,r=e.popper;if(P(t,r)){o.rects={reference:m(t,w(r),"fixed"===o.options.strategy),popper:y(r)},o.reset=!1,o.placement=o.options.placement,o.orderedModifiers.forEach((function(e){return o.modifiersData[e.name]=Object.assign({},e.data)}));for(var i=0;i<o.orderedModifiers.length;i++)if(!0!==o.reset){var n=o.orderedModifiers[i],a=n.fn,s=n.options,u=void 0===s?{}:s,d=n.name;"function"===typeof a&&(o=a({state:o,options:u,name:d,instance:c})||o)}else o.reset=!1,i=-1}}},update:F((function(){return new Promise((function(e){c.forceUpdate(),e(o)}))})),destroy:function(){u(),l=!0}};if(!P(e,t))return c;function u(){a.forEach((function(e){return e()})),a=[]}return c.setOptions(r).then((function(e){!l&&r.onFirstUpdate&&r.onFirstUpdate(e)})),c}}var q={passive:!0};var V={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:function(e){var t=e.state,r=e.instance,i=e.options,o=i.scroll,a=void 0===o||o,s=i.resize,l=void 0===s||s,c=n(t.elements.popper),u=[].concat(t.scrollParents.reference,t.scrollParents.popper);return a&&u.forEach((function(e){e.addEventListener("scroll",r.update,q)})),l&&c.addEventListener("resize",r.update,q),function(){a&&u.forEach((function(e){e.removeEventListener("scroll",r.update,q)})),l&&c.removeEventListener("resize",r.update,q)}},data:{}};function J(e){return e.split("-")[0]}function G(e){return e.split("-")[1]}function $(e){return["top","bottom"].indexOf(e)>=0?"x":"y"}function W(e){var t,r=e.reference,i=e.element,o=e.placement,n=o?J(o):null,a=o?G(o):null,s=r.x+r.width/2-i.width/2,l=r.y+r.height/2-i.height/2;switch(n){case k:t={x:s,y:r.y-i.height};break;case _:t={x:s,y:r.y+r.height};break;case S:t={x:r.x+r.width,y:l};break;case x:t={x:r.x-i.width,y:l};break;default:t={x:r.x,y:r.y}}var c=n?$(n):null;if(null!=c){var u="y"===c?"height":"width";switch(a){case E:t[c]=t[c]-(r[u]/2-i[u]/2);break;case C:t[c]=t[c]+(r[u]/2-i[u]/2)}}return t}var K={name:"popperOffsets",enabled:!0,phase:"read",fn:function(e){var t=e.state,r=e.name;t.modifiersData[r]=W({reference:t.rects.reference,element:t.rects.popper,strategy:"absolute",placement:t.placement})},data:{}},z=Math.max,H=Math.min,Y=Math.round,Q={top:"auto",right:"auto",bottom:"auto",left:"auto"};function X(e){var t,r=e.popper,i=e.popperRect,o=e.placement,a=e.offsets,s=e.position,l=e.gpuAcceleration,c=e.adaptive,u=e.roundOffsets,p=!0===u?function(e){var t=e.x,r=e.y,i=window.devicePixelRatio||1;return{x:Y(Y(t*i)/i)||0,y:Y(Y(r*i)/i)||0}}(a):"function"===typeof u?u(a):a,h=p.x,m=void 0===h?0:h,y=p.y,f=void 0===y?0:y,O=a.hasOwnProperty("x"),j=a.hasOwnProperty("y"),g=x,v=k,I=window;if(c){var T=w(r),E="clientHeight",C="clientWidth";T===n(r)&&"static"!==b(T=d(r)).position&&(E="scrollHeight",C="scrollWidth"),T=T,o===k&&(v=_,f-=T[E]-i.height,f*=l?1:-1),o===x&&(g=S,m-=T[C]-i.width,m*=l?1:-1)}var N,A=Object.assign({position:s},c&&Q);return l?Object.assign({},A,((N={})[v]=j?"0":"",N[g]=O?"0":"",N.transform=(I.devicePixelRatio||1)<2?"translate("+m+"px, "+f+"px)":"translate3d("+m+"px, "+f+"px, 0)",N)):Object.assign({},A,((t={})[v]=j?f+"px":"",t[g]=O?m+"px":"",t.transform="",t))}var Z={left:"right",right:"left",bottom:"top",top:"bottom"};function ee(e){return e.replace(/left|right|bottom|top/g,(function(e){return Z[e]}))}var te={start:"end",end:"start"};function re(e){return e.replace(/start|end/g,(function(e){return te[e]}))}function ie(e,t){var r=t.getRootNode&&t.getRootNode();if(e.contains(t))return!0;if(r&&c(r)){var i=t;do{if(i&&e.isSameNode(i))return!0;i=i.parentNode||i.host}while(i)}return!1}function oe(e){return Object.assign({},e,{left:e.x,top:e.y,right:e.x+e.width,bottom:e.y+e.height})}function ne(e,t){return t===N?oe(function(e){var t=n(e),r=d(e),i=t.visualViewport,o=r.clientWidth,a=r.clientHeight,s=0,l=0;return i&&(o=i.width,a=i.height,/^((?!chrome|android).)*safari/i.test(navigator.userAgent)||(s=i.offsetLeft,l=i.offsetTop)),{width:o,height:a,x:s+p(e),y:l}}(e)):l(t)?function(e){var t=o(e);return t.top=t.top+e.clientTop,t.left=t.left+e.clientLeft,t.bottom=t.top+e.clientHeight,t.right=t.left+e.clientWidth,t.width=e.clientWidth,t.height=e.clientHeight,t.x=t.left,t.y=t.top,t}(t):oe(function(e){var t,r=d(e),i=a(e),o=null==(t=e.ownerDocument)?void 0:t.body,n=z(r.scrollWidth,r.clientWidth,o?o.scrollWidth:0,o?o.clientWidth:0),s=z(r.scrollHeight,r.clientHeight,o?o.scrollHeight:0,o?o.clientHeight:0),l=-i.scrollLeft+p(e),c=-i.scrollTop;return"rtl"===b(o||r).direction&&(l+=z(r.clientWidth,o?o.clientWidth:0)-n),{width:n,height:s,x:l,y:c}}(d(e)))}function ae(e,t,r){var i="clippingParents"===t?function(e){var t=j(f(e)),r=["absolute","fixed"].indexOf(b(e).position)>=0&&l(e)?w(e):e;return s(r)?t.filter((function(e){return s(e)&&ie(e,r)&&"body"!==u(e)})):[]}(e):[].concat(t),o=[].concat(i,[r]),n=o[0],a=o.reduce((function(t,r){var i=ne(e,r);return t.top=z(i.top,t.top),t.right=H(i.right,t.right),t.bottom=H(i.bottom,t.bottom),t.left=z(i.left,t.left),t}),ne(e,n));return a.width=a.right-a.left,a.height=a.bottom-a.top,a.x=a.left,a.y=a.top,a}function se(e){return Object.assign({},{top:0,right:0,bottom:0,left:0},e)}function le(e,t){return t.reduce((function(t,r){return t[r]=e,t}),{})}function ce(e,t){void 0===t&&(t={});var r=t,i=r.placement,n=void 0===i?e.placement:i,a=r.boundary,l=void 0===a?"clippingParents":a,c=r.rootBoundary,u=void 0===c?N:c,p=r.elementContext,b=void 0===p?A:p,h=r.altBoundary,m=void 0!==h&&h,y=r.padding,f=void 0===y?0:y,O=se("number"!==typeof f?f:le(f,T)),j=b===A?"reference":A,g=e.elements.reference,v=e.rects.popper,w=e.elements[m?j:b],x=ae(s(w)?w:w.contextElement||d(e.elements.popper),l,u),I=o(g),E=W({reference:I,element:v,strategy:"absolute",placement:n}),C=oe(Object.assign({},v,E)),B=b===A?C:I,M={top:x.top-B.top+O.top,bottom:B.bottom-x.bottom+O.bottom,left:x.left-B.left+O.left,right:B.right-x.right+O.right},L=e.modifiersData.offset;if(b===A&&L){var U=L[n];Object.keys(M).forEach((function(e){var t=[S,_].indexOf(e)>=0?1:-1,r=[k,_].indexOf(e)>=0?"y":"x";M[e]+=U[r]*t}))}return M}function ue(e,t,r){return z(e,H(t,r))}function de(e,t,r){return void 0===r&&(r={x:0,y:0}),{top:e.top-t.height-r.y,right:e.right-t.width+r.x,bottom:e.bottom-t.height+r.y,left:e.left-t.width-r.x}}function pe(e){return[k,S,_,x].some((function(t){return e[t]>=0}))}var be=D({defaultModifiers:[V,K,{name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:function(e){var t=e.state,r=e.options,i=r.gpuAcceleration,o=void 0===i||i,n=r.adaptive,a=void 0===n||n,s=r.roundOffsets,l=void 0===s||s,c={placement:J(t.placement),popper:t.elements.popper,popperRect:t.rects.popper,gpuAcceleration:o};null!=t.modifiersData.popperOffsets&&(t.styles.popper=Object.assign({},t.styles.popper,X(Object.assign({},c,{offsets:t.modifiersData.popperOffsets,position:t.options.strategy,adaptive:a,roundOffsets:l})))),null!=t.modifiersData.arrow&&(t.styles.arrow=Object.assign({},t.styles.arrow,X(Object.assign({},c,{offsets:t.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:l})))),t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-placement":t.placement})},data:{}},{name:"applyStyles",enabled:!0,phase:"write",fn:function(e){var t=e.state;Object.keys(t.elements).forEach((function(e){var r=t.styles[e]||{},i=t.attributes[e]||{},o=t.elements[e];l(o)&&u(o)&&(Object.assign(o.style,r),Object.keys(i).forEach((function(e){var t=i[e];!1===t?o.removeAttribute(e):o.setAttribute(e,!0===t?"":t)})))}))},effect:function(e){var t=e.state,r={popper:{position:t.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(t.elements.popper.style,r.popper),t.styles=r,t.elements.arrow&&Object.assign(t.elements.arrow.style,r.arrow),function(){Object.keys(t.elements).forEach((function(e){var i=t.elements[e],o=t.attributes[e]||{},n=Object.keys(t.styles.hasOwnProperty(e)?t.styles[e]:r[e]).reduce((function(e,t){return e[t]="",e}),{});l(i)&&u(i)&&(Object.assign(i.style,n),Object.keys(o).forEach((function(e){i.removeAttribute(e)})))}))}},requires:["computeStyles"]},{name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:function(e){var t=e.state,r=e.options,i=e.name,o=r.offset,n=void 0===o?[0,0]:o,a=M.reduce((function(e,r){return e[r]=function(e,t,r){var i=J(e),o=[x,k].indexOf(i)>=0?-1:1,n="function"===typeof r?r(Object.assign({},t,{placement:e})):r,a=n[0],s=n[1];return a=a||0,s=(s||0)*o,[x,S].indexOf(i)>=0?{x:s,y:a}:{x:a,y:s}}(r,t.rects,n),e}),{}),s=a[t.placement],l=s.x,c=s.y;null!=t.modifiersData.popperOffsets&&(t.modifiersData.popperOffsets.x+=l,t.modifiersData.popperOffsets.y+=c),t.modifiersData[i]=a}},{name:"flip",enabled:!0,phase:"main",fn:function(e){var t=e.state,r=e.options,i=e.name;if(!t.modifiersData[i]._skip){for(var o=r.mainAxis,n=void 0===o||o,a=r.altAxis,s=void 0===a||a,l=r.fallbackPlacements,c=r.padding,u=r.boundary,d=r.rootBoundary,p=r.altBoundary,b=r.flipVariations,h=void 0===b||b,m=r.allowedAutoPlacements,y=t.options.placement,f=J(y),O=l||(f===y||!h?[ee(y)]:function(e){if(J(e)===I)return[];var t=ee(e);return[re(e),t,re(t)]}(y)),j=[y].concat(O).reduce((function(e,r){return e.concat(J(r)===I?function(e,t){void 0===t&&(t={});var r=t,i=r.placement,o=r.boundary,n=r.rootBoundary,a=r.padding,s=r.flipVariations,l=r.allowedAutoPlacements,c=void 0===l?M:l,u=G(i),d=u?s?B:B.filter((function(e){return G(e)===u})):T,p=d.filter((function(e){return c.indexOf(e)>=0}));0===p.length&&(p=d);var b=p.reduce((function(t,r){return t[r]=ce(e,{placement:r,boundary:o,rootBoundary:n,padding:a})[J(r)],t}),{});return Object.keys(b).sort((function(e,t){return b[e]-b[t]}))}(t,{placement:r,boundary:u,rootBoundary:d,padding:c,flipVariations:h,allowedAutoPlacements:m}):r)}),[]),g=t.rects.reference,v=t.rects.popper,w=new Map,C=!0,N=j[0],A=0;A<j.length;A++){var L=j[A],U=J(L),F=G(L)===E,R=[k,_].indexOf(U)>=0,P=R?"width":"height",D=ce(t,{placement:L,boundary:u,rootBoundary:d,altBoundary:p,padding:c}),q=R?F?S:x:F?_:k;g[P]>v[P]&&(q=ee(q));var V=ee(q),$=[];if(n&&$.push(D[U]<=0),s&&$.push(D[q]<=0,D[V]<=0),$.every((function(e){return e}))){N=L,C=!1;break}w.set(L,$)}if(C)for(var W=function(e){var t=j.find((function(t){var r=w.get(t);if(r)return r.slice(0,e).every((function(e){return e}))}));if(t)return N=t,"break"},K=h?3:1;K>0;K--){if("break"===W(K))break}t.placement!==N&&(t.modifiersData[i]._skip=!0,t.placement=N,t.reset=!0)}},requiresIfExists:["offset"],data:{_skip:!1}},{name:"preventOverflow",enabled:!0,phase:"main",fn:function(e){var t=e.state,r=e.options,i=e.name,o=r.mainAxis,n=void 0===o||o,a=r.altAxis,s=void 0!==a&&a,l=r.boundary,c=r.rootBoundary,u=r.altBoundary,d=r.padding,p=r.tether,b=void 0===p||p,h=r.tetherOffset,m=void 0===h?0:h,f=ce(t,{boundary:l,rootBoundary:c,padding:d,altBoundary:u}),O=J(t.placement),j=G(t.placement),g=!j,v=$(O),I="x"===v?"y":"x",T=t.modifiersData.popperOffsets,C=t.rects.reference,N=t.rects.popper,A="function"===typeof m?m(Object.assign({},t.rects,{placement:t.placement})):m,B={x:0,y:0};if(T){if(n||s){var M="y"===v?k:x,L="y"===v?_:S,U="y"===v?"height":"width",F=T[v],R=T[v]+f[M],P=T[v]-f[L],D=b?-N[U]/2:0,q=j===E?C[U]:N[U],V=j===E?-N[U]:-C[U],W=t.elements.arrow,K=b&&W?y(W):{width:0,height:0},Y=t.modifiersData["arrow#persistent"]?t.modifiersData["arrow#persistent"].padding:{top:0,right:0,bottom:0,left:0},Q=Y[M],X=Y[L],Z=ue(0,C[U],K[U]),ee=g?C[U]/2-D-Z-Q-A:q-Z-Q-A,te=g?-C[U]/2+D+Z+X+A:V+Z+X+A,re=t.elements.arrow&&w(t.elements.arrow),ie=re?"y"===v?re.clientTop||0:re.clientLeft||0:0,oe=t.modifiersData.offset?t.modifiersData.offset[t.placement][v]:0,ne=T[v]+ee-oe-ie,ae=T[v]+te-oe;if(n){var se=ue(b?H(R,ne):R,F,b?z(P,ae):P);T[v]=se,B[v]=se-F}if(s){var le="x"===v?k:x,de="x"===v?_:S,pe=T[I],be=pe+f[le],he=pe-f[de],me=ue(b?H(be,ne):be,pe,b?z(he,ae):he);T[I]=me,B[I]=me-pe}}t.modifiersData[i]=B}},requiresIfExists:["offset"]},{name:"arrow",enabled:!0,phase:"main",fn:function(e){var t,r=e.state,i=e.name,o=e.options,n=r.elements.arrow,a=r.modifiersData.popperOffsets,s=J(r.placement),l=$(s),c=[x,S].indexOf(s)>=0?"height":"width";if(n&&a){var u=function(e,t){return se("number"!==typeof(e="function"===typeof e?e(Object.assign({},t.rects,{placement:t.placement})):e)?e:le(e,T))}(o.padding,r),d=y(n),p="y"===l?k:x,b="y"===l?_:S,h=r.rects.reference[c]+r.rects.reference[l]-a[l]-r.rects.popper[c],m=a[l]-r.rects.reference[l],f=w(n),O=f?"y"===l?f.clientHeight||0:f.clientWidth||0:0,j=h/2-m/2,g=u[p],v=O-d[c]-u[b],I=O/2-d[c]/2+j,E=ue(g,I,v),C=l;r.modifiersData[i]=((t={})[C]=E,t.centerOffset=E-I,t)}},effect:function(e){var t=e.state,r=e.options.element,i=void 0===r?"[data-popper-arrow]":r;null!=i&&("string"!==typeof i||(i=t.elements.popper.querySelector(i)))&&ie(t.elements.popper,i)&&(t.elements.arrow=i)},requires:["popperOffsets"],requiresIfExists:["preventOverflow"]},{name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:function(e){var t=e.state,r=e.name,i=t.rects.reference,o=t.rects.popper,n=t.modifiersData.preventOverflow,a=ce(t,{elementContext:"reference"}),s=ce(t,{altBoundary:!0}),l=de(a,i),c=de(s,o,n),u=pe(l),d=pe(c);t.modifiersData[r]={referenceClippingOffsets:l,popperEscapeOffsets:c,isReferenceHidden:u,hasPopperEscaped:d},t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-reference-hidden":u,"data-popper-escaped":d})}}]}),he=r(460),me=r(80),ye=r(105),fe=r(78),Oe=(r(74),r(79),r(75),r(77)),je=r(149),ge=(r(102),r(118));const ve=["bottom","bottom-start","bottom-end","left","left-start","left-end","right","right-start","right-end","top","top-start","top-end"],we="esri-popover",ke="esri-popover--open",_e={position:"fixed","z-index":"1000"};let Se=class extends je.a{constructor(e,t){super(e,t),this._popper=null,this._contentNode=null,this._renderAttached=!1,this._rootNode=null,this.anchorElement=null,this.offset=[0,0],this.open=!1,this.renderContentFunction=null,this._afterRootCreate=e=>{this._rootNode=e},this._afterContentCreate=e=>{this._contentNode=e},this._updatePosition=()=>{Object(me.k)(this._popper)&&this._popper.update()}}initialize(){this.when((()=>{this._projector.append(document.body,this.render),this._renderAttached=!0})),this.own(Object(ye.a)(this,["open","anchorElement"],(()=>this._buildPopper())),Object(ye.a)(this,["placement","offset"],(()=>this._setPopperOptions())))}destroy(){this.owner=null,this.anchorElement=null,this.renderContentFunction=null,this._renderAttached&&(this._projector.detach(this.render),this._renderAttached=!1),Object(me.k)(this._rootNode)&&(Object(he.d)(this._rootNode),this._rootNode=null),this._contentNode=null,Object(me.k)(this._popper)&&(this._popper.destroy(),this._popper=null)}set container(e){}set owner(e){this._set("owner",e)}get placement(){return"top"}set placement(e){-1!==ve.indexOf(e)?this._override("placement",e):this._clearOverride("placement")}render(){const{open:e,owner:t,renderContentFunction:r}=this;return Object(ge.a)("div",{afterCreate:this._afterRootCreate,class:this.classes(we,e?ke:null),styles:_e},Object(ge.a)("div",{afterCreate:this._afterContentCreate,afterUpdate:this._updatePosition},e&&(null==r?void 0:r.call(t))))}_buildPopper(){Object(me.k)(this._popper)&&(this._popper.destroy(),this._popper=null);const e=this._contentNode;if(Object(me.j)(e))return;if(!this.open||!this.renderContentFunction)return;const t=this._getAnchor();t&&(this._popper=be(t,e),this._setPopperOptions())}_setPopperOptions(){const{placement:e,offset:t,_popper:r}=this;Object(me.j)(r)||(r.setOptions({placement:e,modifiers:[{name:"offset",options:{offset:t}}]}),r.forceUpdate())}_getAnchor(){const{anchorElement:e}=this;return Object(he.a)("function"==typeof e?e():e)}};Object(i.a)([Object(fe.b)()],Se.prototype,"anchorElement",void 0),Object(i.a)([Object(fe.b)()],Se.prototype,"container",null),Object(i.a)([Object(fe.b)()],Se.prototype,"offset",void 0),Object(i.a)([Object(fe.b)()],Se.prototype,"open",void 0),Object(i.a)([Object(fe.b)()],Se.prototype,"owner",null),Object(i.a)([Object(fe.b)()],Se.prototype,"placement",null),Object(i.a)([Object(fe.b)()],Se.prototype,"renderContentFunction",void 0),Se=Object(i.a)([Object(Oe.a)("esri.widgets.support.Popover")],Se);var xe=Se;t.a=xe},802:function(e,t,r){"use strict";var i=r(76),o=r(176),n=r(147),a=r(80),s=r(105),l=r(137),c=(r(74),r(79),r(75),r(78)),u=r(77),d=r(149),p=r(89),b=r(106),h=r(705);let m=class extends p.a{constructor(e){super(e),this.items=null,this.open=!1}castItems(e){return e?e.map((e=>e instanceof h.a?e:new h.a(e))):null}};Object(i.a)([Object(c.b)()],m.prototype,"items",void 0),Object(i.a)([Object(b.a)("items")],m.prototype,"castItems",null),Object(i.a)([Object(c.b)()],m.prototype,"open",void 0),m=Object(i.a)([Object(u.a)("esri.widgets.FeatureTable.Grid.support.ButtonMenuViewModel")],m);var y=m,f=r(798),O=r(102),j=r(118);const g="esri-button-menu",v="esri-button-menu__content",w="esri-button-menu__item-wrapper",k="esri-button-menu__icon",_="esri-button-menu__item",S="esri-button-menu__item-label",x="esri-button-menu__item-label-content",I="esri-button-menu__item--selectable",T="esri-button-menu__item--selected",E="esri-button-menu__checkbox",C="esri-button-menu__embedded-content-wrapper",N="esri-button-menu__button",A="esri-button-menu__button--selected",B="esri-icon-menu",M="esri-widget";let L=class extends(Object(n.b)(d.a)){constructor(e,t){super(e,t),this._menuContentNode=null,this._popover=null,this._rootNode=null,this.iconClass=null,this.items=null,this.label=null,this.open=!1,this.viewModel=new y,this._handleOutsideClick=this._handleOutsideClick.bind(this)}postInitialize(){this._popover=new f.a({owner:this,open:!!this.open,placement:Object(O.h)()?"bottom-start":"bottom-end",renderContentFunction:this.renderMenuContent,anchorElement:this._rootNode}),this.handles.add([Object(s.d)(this,"open",(e=>this._popover.set("open",e)))]),document.addEventListener("click",this._handleOutsideClick)}destroy(){var e;null==(e=this._popover)||e.destroy(),this._popover=null,document.removeEventListener("click",this._handleOutsideClick)}_handleOutsideClick(e){var t,r;if(!this.open||!this._rootNode||!this._menuContentNode)return;const i=e.target;null!=(t=this._menuContentNode)&&t.contains(i)||null!=(r=this._rootNode)&&r.contains(i)||(this.open=!1)}render(){return Object(j.a)("div",{afterCreate:this._afterRootNodeCreate,bind:this,"data-node-ref":"_rootNode",class:this.classes(g,M),key:"menu"},this.renderMenuButton())}renderMenuButton(){const{iconClass:e,id:t,label:r,open:i}=this,o=this.classes([N,e||B,i?A:null]);return Object(j.a)("button",{"aria-pressed":i.toString(),"aria-controls":`${t}-menu`,"aria-expanded":i.toString(),"aria-haspopup":"true","aria-label":r,bind:this,class:o,id:`${t}-button`,title:r,selected:i,onclick:this._toggleOpen,tabindex:"0",type:"button"})}renderMenuContent(){var e;const{id:t,open:r}=this;return Object(j.a)("div",{afterCreate:this._afterMenuContentNodeCreate,bind:this,class:v,"data-node-ref":"_menuContentNode",key:"esri-button-menu-content",hidden:!r},Object(j.a)("ul",{"aria-labelledby":`${t}-button`,bind:this,class:w,id:`${t}-menu`,role:"menu"},(null==(e=this.items)?void 0:e.length)&&this.renderItems()))}renderItems(){var e;return null==(e=this.items)?void 0:e.map(((e,t)=>this.renderItem(e,t)))}renderItem(e,t,r){var i;const o=Object(a.k)(r)?`${this.id}-menu-item-${t}-${r}`:`${this.id}-menu-item-${t}`,n=`${o}-label`,s=this.classes(_,e.selectionEnabled?I:null,e.selectionEnabled&&e.selected?T:null);return Object(j.a)("li",{afterCreate:this._afterMenuItemCreate,bind:this,class:s,"data-item-index":t,"data-item-subIndex":r,for:o,key:o,onkeydown:t=>this._handleMenuItemKeydown(t,e),onclick:t=>this._handleMenuItemInteraction(t,e),role:"menuitem",tabindex:"0"},Object(j.a)("input",{disabled:!0,checked:e.selected,class:E,id:o,name:o,tabindex:"-1",type:"checkbox"}),Object(j.a)("label",{bind:this,class:this.classes(N,S),for:o,id:n},Object(j.a)("span",{class:this.classes(k,e.iconClass),"aria-hidden":"true"}),Object(j.a)("span",{class:x},e.label)),Object(j.a)("ul",{"aria-labelledby":n,class:C,id:`${this.id}-submenu`,role:"menu"},null==e||null==(i=e.items)?void 0:i.map(((e,r)=>this.renderItem(e,t,r)))))}_afterRootNodeCreate(e){var t;this._rootNode=e,null==(t=this._popover)||t.set("anchorElement",(()=>e))}_handleMenuItemInteraction(e,t){t.selected=!t.selected,t.open=!(!t.selected||!t.items),t.autoCloseMenu&&this.set("open",!1),t.clickFunction&&t.clickFunction({event:e,item:t}),e.stopPropagation()}_handleMenuItemKeydown(e,t){const r=Object(o.a)(e);Object(O.f)(r)&&this._handleMenuItemInteraction(e,t),"Escape"===r&&(this.open=!1,e.preventDefault(),e.stopPropagation())}_afterMenuContentNodeCreate(e){this._menuContentNode=e,e.focus()}_toggleOpen(){this.open=!this.open}_afterMenuItemCreate(e){0===e["data-item-index"]&&e.focus()}};Object(i.a)([Object(c.b)()],L.prototype,"iconClass",void 0),Object(i.a)([Object(l.a)("viewModel.items")],L.prototype,"items",void 0),Object(i.a)([Object(c.b)()],L.prototype,"label",void 0),Object(i.a)([Object(l.a)("viewModel.open")],L.prototype,"open",void 0),Object(i.a)([Object(c.b)()],L.prototype,"viewModel",void 0),L=Object(i.a)([Object(u.a)("esri.widgets.FeatureTable.Grid.support.ButtonMenu")],L);var U=L;t.a=U},805:function(e,t,r){"use strict";var i,o=r(76),n=r(101),a=r(81),s=r(82),l=r(78),c=(r(79),r(74),r(75),r(77));let u=i=class extends a.a{constructor(e){super(e),this.color=new n.a([0,0,0,1])}clone(){return new i(Object(s.a)({color:this.color}))}};Object(o.a)([Object(l.b)({type:n.a,json:{write:!0}})],u.prototype,"color",void 0),u=i=Object(o.a)([Object(c.a)("esri.webmap.background.ColorBackground")],u);var d=u;t.a=d},860:function(e,t,r){"use strict";var i,o=r(76),n=r(81),a=r(78),s=(r(74),r(79),r(75),r(77));let l=i=class extends n.a{constructor(){super(...arguments),this.url=""}destroy(){this.url=""}clone(){return new i({url:this.url})}};Object(o.a)([Object(a.b)({type:String,json:{write:{isRequired:!0}}})],l.prototype,"url",void 0),l=i=Object(o.a)([Object(s.a)("esri.webdoc.support.Thumbnail")],l);var c=l;t.a=c},90:function(e,t,r){"use strict";r.d(t,"a",(function(){return n}));var i=r(85),o=r(78);function n(e,t={}){var r;const n=e instanceof i.a?e:new i.a(e,t),a={type:null==(r=null==t?void 0:t.ignoreUnknown)||r?n.apiValues:String,readOnly:null==t?void 0:t.readOnly,json:{type:n.jsonValues,read:(null==t||!t.readOnly)&&{reader:n.read},write:{writer:n.write}}};return void 0!==(null==t?void 0:t.default)&&(a.json.default=t.default),void 0!==(null==t?void 0:t.name)&&(a.json.name=t.name),Object(o.b)(a)}},917:function(e,t,r){"use strict";var i,o=r(76),n=r(604),a=r(101),s=r(99),l=r(302),c=r(179),u=r(83),d=r(81),p=r(82),b=r(172),h=r(439),m=r(75),y=r(84),f=r(78),O=r(79),j=(r(74),r(77)),g=r(86),v=r(90);let w=i=class extends d.a{constructor(e){super(e),this.type="none"}clone(){return new i({type:this.type})}};Object(o.a)([Object(v.a)({none:"none",stayAbove:"stay-above"})],w.prototype,"type",void 0),w=i=Object(o.a)([Object(j.a)("esri.ground.NavigationConstraint")],w);var k,_=r(486);const S=m.a.getLogger("esri.Ground");let x=k=class extends(Object(d.b)(b.a)){constructor(e){super(e),this.opacity=1,this.surfaceColor=null,this.navigationConstraint=null,this.layers=new s.a;const t=e=>{e.parent&&e.parent!==this&&"remove"in e.parent&&e.parent.remove(e),e.parent=this,"elevation"!==e.type&&"base-elevation"!==e.type&&S.error(`Layer '${e.title}, id:${e.id}' of type '${e.type}' is not supported as a ground layer and will therefore be ignored. Only layers of type 'elevation' are supported.`)};this.layers.on("after-add",(e=>t(e.item))),this.layers.on("after-remove",(e=>(e=>{e.parent=null})(e.item)))}initialize(){this.when().catch((e=>{S.error("#load()","Failed to load ground",e)})),this.resourceInfo&&this.read(this.resourceInfo.data,this.resourceInfo.context)}destroy(){const e=this.layers.removeAll();for(const t of e)t.destroy();this.layers.destroy()}normalizeCtorArgs(e){return e&&"resourceInfo"in e&&(this._set("resourceInfo",e.resourceInfo),delete(e={...e}).resourceInfo),e}set layers(e){this._set("layers",Object(l.b)(e,this._get("layers")))}writeLayers(e,t,r,i){const o=[];e?(i={...i,layerContainerType:"ground"},e.forEach((e=>{if("write"in e){const t={};Object(c.b)(e)().write(t,i)&&o.push(t)}else i&&i.messages&&i.messages.push(new u.a("layer:unsupported",`Layers (${e.title}, ${e.id}) of type '${e.declaredClass}' cannot be persisted in the ground`,{layer:e}))})),t.layers=o):t.layers=o}load(e){return this.addResolvingPromise(this._loadFromSource(e)),Promise.resolve(this)}loadAll(){return Object(h.a)(this,(e=>{e(this.layers)}))}async queryElevation(e,t){await this.load({signal:null==t?void 0:t.signal});const{ElevationQuery:i}=await Promise.all([r.e(10),r.e(48)]).then(r.bind(null,1182));Object(y.v)(t);const o=new i,n=this.layers.filter(I).toArray();return o.queryAll(n,e,t)}async createElevationSampler(e,t){await this.load({signal:null==t?void 0:t.signal});const{ElevationQuery:i}=await Promise.all([r.e(10),r.e(48)]).then(r.bind(null,1182));Object(y.v)(t);const o=new i,n=this.layers.filter(I).toArray();return o.createSamplerAll(n,e,t)}clone(){const e={opacity:this.opacity,surfaceColor:Object(p.a)(this.surfaceColor),navigationConstraint:Object(p.a)(this.navigationConstraint),layers:this.layers.slice()};return this.loaded&&(e.loadStatus="loaded"),new k({resourceInfo:this.resourceInfo}).set(e)}read(e,t){this.resourceInfo||this._set("resourceInfo",{data:e,context:t}),super.read(e,t)}_loadFromSource(e){const t=this.resourceInfo;return t?this._loadLayersFromJSON(t.data,t.context,e):Promise.resolve(null)}_loadLayersFromJSON(e,t,i){const o=t&&t.origin||"web-scene",n=t&&t.portal||null,a=t&&t.url||null;return r.e(45).then(r.bind(null,923)).then((({populateOperationalLayers:t})=>{Object(y.v)(i);const r=[];if(e.layers&&Array.isArray(e.layers)){const i={context:{origin:o,url:a,portal:n,layerContainerType:"ground"},defaultLayerType:"ArcGISTiledElevationServiceLayer"};r.push(t(this.layers,e.layers,i))}return Object(y.j)(r)})).then((()=>{}))}};function I(e){return"elevation"===e.type||function(e){return e&&"createElevationSampler"in e}(e)}Object(o.a)([Object(f.b)({json:{read:!1}})],x.prototype,"layers",null),Object(o.a)([Object(g.a)("layers")],x.prototype,"writeLayers",null),Object(o.a)([Object(f.b)({readOnly:!0})],x.prototype,"resourceInfo",void 0),Object(o.a)([Object(f.b)({type:Number,nonNullable:!0,range:{min:0,max:1},json:{type:O.a,read:{reader:_.b,source:"transparency"},write:{writer:(e,t)=>{t.transparency=Object(_.a)(e)},target:"transparency"}}})],x.prototype,"opacity",void 0),Object(o.a)([Object(f.b)({type:a.a,json:{type:[O.a],write:(e,t)=>{t.surfaceColor=e.toJSON().slice(0,3)}}})],x.prototype,"surfaceColor",void 0),Object(o.a)([Object(f.b)({type:w,json:{write:!0}})],x.prototype,"navigationConstraint",void 0),x=k=Object(o.a)([Object(j.a)("esri.Ground")],x);var T=x,E=r(89),C=r(541),N=r(119),A=r(106);function B(e){var t;return!!(e&&e.loaded&&"capabilities"in e&&null!=e&&null!=(t=e.capabilities)&&t.operations&&"supportsEditing"in e.capabilities.operations&&!0===e.capabilities.operations.supportsEditing)&&!("editingEnabled"in e&&!e.editingEnabled)}var M=r(561);const L=m.a.getLogger("esri.support.groundUtils"),U={"world-elevation":{id:"worldElevation",url:"//elevation3d.arcgis.com/arcgis/rest/services/WorldElevation3D/Terrain3D/ImageServer",layerType:"ArcGISTiledElevationServiceLayer"},"world-topobathymetry":{id:"worldTopoBathymetry",url:"//elevation3d.arcgis.com/arcgis/rest/services/WorldElevation3D/TopoBathy3D/ImageServer",layerType:"ArcGISTiledElevationServiceLayer"}};var F=r(647),R=r(648);const P=m.a.getLogger("esri.Map");let D=class extends(Object(R.a)(Object(F.a)(N.a.EventedMixin(E.a)))){constructor(e){super(e),this.allLayers=new C.a({getCollections:()=>{var e,t,r;return[null==(e=this.basemap)?void 0:e.baseLayers,null==(t=this.ground)?void 0:t.layers,this.layers,null==(r=this.basemap)?void 0:r.referenceLayers]},getChildrenFunction:e=>"layers"in e?e.layers:null}),this.allTables=new C.a({getCollections:()=>[this.tables,this.layers],getChildrenFunction:e=>{const t=[];return"tables"in e&&t.push(e.tables),"layers"in e&&t.push(e.layers),t},itemFilterFunction:e=>{const t=e.parent;return t&&"tables"in t&&t.tables.includes(e)}}),this.basemap=null,this.editableLayers=new C.a({getCollections:()=>[this.allLayers],itemFilterFunction:B}),this.ground=new T,this._basemapCache=Object(M.b)()}destroy(){var e,t;this.allLayers.destroy(),this.allTables.destroy(),this.editableLayers.destroy(),null==(e=this.ground)||e.destroy(),null==(t=this.basemap)||t.destroy(),Object(M.c)(this._basemapCache),this._basemapCache=null}castBasemap(e){return Object(M.d)(e,this._basemapCache)}castGround(e){return function(e){let t;"string"==typeof e?e in U?t=new T({resourceInfo:{data:{layers:[U[e]]}}}):L.warn(`Unable to find ground definition for: ${e}. Try "world-elevation"`):t=Object(O.m)(T,e);return t}(e)||(P.error("Map.ground may not be set to null or undefined"),this._get("ground"))}findLayerById(e){return this.allLayers.find((t=>t.id===e))}findTableById(e){return this.allTables.find((t=>t.id===e))}};Object(o.a)([Object(f.b)({readOnly:!0,dependsOn:[]})],D.prototype,"allLayers",void 0),Object(o.a)([Object(f.b)({readOnly:!0})],D.prototype,"allTables",void 0),Object(o.a)([Object(f.b)({type:n.default})],D.prototype,"basemap",void 0),Object(o.a)([Object(A.a)("basemap")],D.prototype,"castBasemap",null),Object(o.a)([Object(f.b)({readOnly:!0})],D.prototype,"editableLayers",void 0),Object(o.a)([Object(f.b)({type:T,nonNullable:!0})],D.prototype,"ground",void 0),Object(o.a)([Object(A.a)("ground")],D.prototype,"castGround",null),D=Object(o.a)([Object(j.a)("esri.Map")],D);var q=D;t.a=q},936:function(e,t,r){"use strict";var i,o=r(76),n=r(575),a=r(292),s=r(83),l=r(160),c=r(81),u=r(82),d=r(75),p=r(80),b=r(78),h=r(106),m=(r(74),r(87)),y=r(77),f=r(86),O=r(79),j=r(94),g=r(860);const v="esri.webmap.Bookmark",w=d.a.getLogger(v);let k=i=class extends(Object(l.a)(c.a)){constructor(e){super(e),this.name=null,this.thumbnail=new g.a}set extent(e){Object(a.d)(w,"extent",{replacement:"viewpoint",version:"4.17"}),this._set("viewpoint",new n.a({targetGeometry:e.clone()})),this._set("extent",e)}castThumbnail(e){return"string"==typeof e?new g.a({url:e}):Object(O.m)(g.a,e)}set viewpoint(e){const{targetGeometry:t,scale:r}=e;Object(p.k)(t)&&("extent"===t.type?this._set("extent",t.clone()):"point"===t.type&&Object(p.j)(r)&&w.warn("Bookmark.viewpoint should include 'scale' when its targetGeometry is a point.",e)),this._set("viewpoint",e)}readViewpoint(e,t){const{extent:r,viewpoint:i}=t;return n.a.fromJSON(i||{targetGeometry:r})}writeViewpoint(e,t,r,i){if(!e)return;const{targetGeometry:o}=e;if(Object(p.k)(o)&&"extent"!==o.type){const e="Bookmark.viewpoint cannot be written to JSON when the viewpoint's targetGeometry is not an extent.";null!=i&&i.messages?i.messages.push(new s.a("property:unsupported",e)):w.error(e)}else t[r]=e.toJSON()}clone(){return new i(Object(u.a)({name:this.name,thumbnail:this.thumbnail,viewpoint:this.viewpoint}))}};Object(o.a)([Object(b.b)({type:j.a,nonNullable:!0,json:{read:!1,write:{isRequired:!0}}})],k.prototype,"extent",null),Object(o.a)([Object(b.b)({type:String,nonNullable:!0,json:{write:{isRequired:!0}}})],k.prototype,"name",void 0),Object(o.a)([Object(b.b)({type:g.a,json:{write:{overridePolicy:e=>({enabled:!(!e||!e.url)})}}})],k.prototype,"thumbnail",void 0),Object(o.a)([Object(h.a)("thumbnail")],k.prototype,"castThumbnail",null),Object(o.a)([Object(b.b)({type:n.a,nonNullable:!0,json:{write:!0}})],k.prototype,"viewpoint",null),Object(o.a)([Object(m.a)("viewpoint",["extent","viewpoint"])],k.prototype,"readViewpoint",null),Object(o.a)([Object(f.a)("viewpoint")],k.prototype,"writeViewpoint",null),k=i=Object(o.a)([Object(y.a)(v)],k);var _=k;t.a=_}}]);
//# sourceMappingURL=102.a6cdabe5.chunk.js.map