{"version":3,"sources":["../node_modules/@arcgis/core/rest/support/FeatureSet.js","../node_modules/@arcgis/core/rest/query/operations/zscale.js","../node_modules/@arcgis/core/rest/query/operations/queryZScale.js","../node_modules/@arcgis/core/core/workers/registry.js","../node_modules/@arcgis/core/core/workers/utils.js","../node_modules/@arcgis/core/core/workers/RemoteClient.js","../node_modules/@arcgis/core/core/workers/Connection.js","../node_modules/@arcgis/core/core/workers/loaderConfig.js","../node_modules/@arcgis/core/core/workers/WorkerFallback.js","../node_modules/@arcgis/core/core/workers/workerFactory.js","../node_modules/@arcgis/core/core/workers/WorkerOwner.js","../node_modules/@arcgis/core/core/workers/workers.js"],"names":["h","o","esriGeometryPoint","esriGeometryMultipoint","esriGeometryPolyline","esriGeometryPolygon","esriGeometryEnvelope","mesh","d","s","constructor","e","super","this","displayFieldName","exceededTransferLimit","features","fields","geometryType","hasM","hasZ","queryGeometry","spatialReference","readFeatures","t","m","fromJSON","i","length","p","r","l","geometry","n","push","writeGeometryType","write","type","readQueryGeometry","u","writeSpatialReference","toJSON","Array","isArray","quantize","scale","translate","a","_getQuantizationFunction","Math","round","y","splice","transform","unquantize","_getHydrationFunction","_quantizePoints","x","c","rings","paths","points","xmin","ymin","xmax","ymax","String","json","prototype","Boolean","overridePolicy","enabled","f","read","reader","types","isDefaultToJSON","g","vcsWkid","z","outSpatialReference","statsWorker","geometryEngineWorker","CSVSourceWorker","EdgeProcessingWorker","ElevationSamplerWorker","FeatureServiceSnappingSourceWorker","GeoJSONSourceWorker","LercWorker","MemorySourceWorker","PBFDecoderWorker","Pipeline","PointCloudWorker","RasterWorker","SceneLayerWorker","WFSSourceWorker","WorkerTileHandler","HANDSHAKE","OPEN","OPENED","RESPONSE","INVOKE","ABORT","CLOSE","OPEN_PORT","ON","JSON","stringify","name","message","details","stack","postMessage","port","data","transferList","result","parse","filter","ArrayBuffer","v","M","j","k","_timer","_cancelledJobIds","Set","_invokeMessages","_invoke","_process","bind","add","jobId","setTimeout","clear","has","I","_port","_outJobs","Map","_inJobs","_invokeQueue","_onInvokeMessage","_client","client","_onMessage","_channel","channel","_schedule","schedule","addEventListener","start","MessageChannel","default","port1","remoteClient","clients","set","port2","Promise","resolve","close","_post","_close","isBusy","size","invoke","signal","reject","methodName","get","delete","abortHandle","remove","debugInfo","abortable","on","eventType","removeEventListener","openPort","forEach","_processMessage","_","_onResponseMessage","_onAbortMessage","_onCloseMessage","_onOpenPortMessage","_onOnMessage","controller","abort","destroy","indexOf","split","TypeError","call","error","promise","then","kernelInfo","revision","version","buildDate","b","getLogger","_clients","_clientPromises","_clientIdx","open","broadcast","getAvailableClient","race","warn","closed","Error","all","map","openPorts","numClients","async","isDebug","locale","baseUrl","packages","concat","hasOwnProperty","document","createDocumentFragment","MutationObserver","WebKitMutationObserver","process","nextTick","createElement","shift","observe","attributes","setAttribute","MessageEvent","bubbles","cancelable","createEvent","initEvent","_dispatcher","_workerPostMessage","terminate","_onmessageHandler","_onmessageerrorHandler","_onerrorHandler","_workerMessageHandler","dispatchEvent","modulePath","loadWorker","import","connect","w","replace","assetsPath","request","interceptors","log","workers","loaderUrl","workerPath","loaderConfig","esriConfig","URL","createObjectURL","Blob","Worker","P","preventDefault","worker","id","_onOpenedMessage","navigator","hardwareConcurrency","strategy","maxNumWorkers","min","create"],"mappings":"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","file":"static/js/168.4c6bbb4d.chunk.js","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../chunks/tslib.es6.js\";import{geometryTypes as t}from\"../../geometry.js\";import r from\"../../Graphic.js\";import{JSONMap as o}from\"../../core/jsonMap.js\";import{JSONSupport as s}from\"../../core/JSONSupport.js\";import{isSome as n,unwrap as i}from\"../../core/maybe.js\";import{property as p}from\"../../core/accessorSupport/decorators/property.js\";import\"../../core/has.js\";import\"../../core/accessorSupport/ensureType.js\";import\"../../core/Logger.js\";import{reader as l}from\"../../core/accessorSupport/decorators/reader.js\";import{subclass as a}from\"../../core/accessorSupport/decorators/subclass.js\";import{writer as y}from\"../../core/accessorSupport/decorators/writer.js\";import m from\"../../geometry/SpatialReference.js\";import{fromJSON as u,isPolygon as c}from\"../../geometry/support/jsonUtils.js\";import f from\"../../layers/support/Field.js\";const h=new o({esriGeometryPoint:\"point\",esriGeometryMultipoint:\"multipoint\",esriGeometryPolyline:\"polyline\",esriGeometryPolygon:\"polygon\",esriGeometryEnvelope:\"extent\",mesh:\"mesh\",\"\":null});let d=class extends s{constructor(e){super(e),this.displayFieldName=null,this.exceededTransferLimit=!1,this.features=[],this.fields=null,this.geometryType=null,this.hasM=!1,this.hasZ=!1,this.queryGeometry=null,this.spatialReference=null}readFeatures(e,t){const o=m.fromJSON(t.spatialReference),s=[];for(let i=0;i<e.length;i++){const t=e[i],p=r.fromJSON(t),l=t.geometry&&t.geometry.spatialReference;n(p.geometry)&&!l&&(p.geometry.spatialReference=o),s.push(p)}return s}writeGeometryType(e,t,r,o){if(e)return void h.write(e,t,r,o);const{features:s}=this;if(s)for(const i of s)if(i&&n(i.geometry))return void h.write(i.geometry.type,t,r,o)}readQueryGeometry(e,t){if(!e)return null;const r=!!e.spatialReference,o=u(e);return!r&&t.spatialReference&&(o.spatialReference=m.fromJSON(t.spatialReference)),o}writeSpatialReference(e,t){if(e)return void(t.spatialReference=e.toJSON());const{features:r}=this;if(r)for(const o of r)if(o&&n(o.geometry)&&o.geometry.spatialReference)return void(t.spatialReference=o.geometry.spatialReference.toJSON())}toJSON(e){const t=this.write(null);if(t.features&&Array.isArray(e)&&e.length>0)for(let r=0;r<t.features.length;r++){const o=t.features[r];if(o.geometry){const t=e&&e[r];o.geometry=t&&t.toJSON()||o.geometry}}return t}quantize(e){const{scale:[t,r],translate:[o,s]}=e,n=e=>Math.round((e-o)/t),p=e=>Math.round((s-e)/r),l=this.features,a=this._getQuantizationFunction(this.geometryType,n,p);for(let y=0,m=l.length;y<m;y++)a(i(l[y].geometry))||(l.splice(y,1),y--,m--);return this.transform=e,this}unquantize(){const{geometryType:e,features:t,transform:r}=this;if(!r)return this;const{translate:[o,s],scale:[i,p]}=r,l=e=>e*i+o,a=e=>s-e*p,y=this._getHydrationFunction(e,l,a);for(const{geometry:m}of t)n(m)&&y(m);return this.transform=null,this}_quantizePoints(e,t,r){let o,s;const n=[];for(let i=0,p=e.length;i<p;i++){const p=e[i];if(i>0){const e=t(p[0]),i=r(p[1]);e===o&&i===s||(n.push([e-o,i-s]),o=e,s=i)}else o=t(p[0]),s=r(p[1]),n.push([o,s])}return n.length>0?n:null}_getQuantizationFunction(e,t,r){return\"point\"===e?e=>(e.x=t(e.x),e.y=r(e.y),e):\"polyline\"===e||\"polygon\"===e?e=>{const o=c(e)?e.rings:e.paths,s=[];for(let n=0,i=o.length;n<i;n++){const e=o[n],i=this._quantizePoints(e,t,r);i&&s.push(i)}return s.length>0?(c(e)?e.rings=s:e.paths=s,e):null}:\"multipoint\"===e?e=>{const o=this._quantizePoints(e.points,t,r);return o.length>0?(e.points=o,e):null}:\"extent\"===e?e=>e:null}_getHydrationFunction(e,t,r){return\"point\"===e?e=>{e.x=t(e.x),e.y=r(e.y)}:\"polyline\"===e||\"polygon\"===e?e=>{const o=c(e)?e.rings:e.paths;let s,n;for(let i=0,p=o.length;i<p;i++){const e=o[i];for(let o=0,i=e.length;o<i;o++){const i=e[o];o>0?(s+=i[0],n+=i[1]):(s=i[0],n=i[1]),i[0]=t(s),i[1]=r(n)}}}:\"extent\"===e?e=>{e.xmin=t(e.xmin),e.ymin=r(e.ymin),e.xmax=t(e.xmax),e.ymax=r(e.ymax)}:\"multipoint\"===e?e=>{const o=e.points;let s,n;for(let i=0,p=o.length;i<p;i++){const e=o[i];i>0?(s+=e[0],n+=e[1]):(s=e[0],n=e[1]),e[0]=t(s),e[1]=r(n)}}:void 0}};e([p({type:String,json:{write:!0}})],d.prototype,\"displayFieldName\",void 0),e([p({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],d.prototype,\"exceededTransferLimit\",void 0),e([p({type:[r],json:{write:!0}})],d.prototype,\"features\",void 0),e([l(\"features\")],d.prototype,\"readFeatures\",null),e([p({type:[f],json:{write:!0}})],d.prototype,\"fields\",void 0),e([p({type:[\"point\",\"multipoint\",\"polyline\",\"polygon\",\"extent\",\"mesh\"],json:{read:{reader:h.read}}})],d.prototype,\"geometryType\",void 0),e([y(\"geometryType\")],d.prototype,\"writeGeometryType\",null),e([p({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],d.prototype,\"hasM\",void 0),e([p({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],d.prototype,\"hasZ\",void 0),e([p({types:t,json:{write:!0}})],d.prototype,\"queryGeometry\",void 0),e([l(\"queryGeometry\")],d.prototype,\"readQueryGeometry\",null),e([p({type:m,json:{write:!0}})],d.prototype,\"spatialReference\",void 0),e([y(\"spatialReference\")],d.prototype,\"writeSpatialReference\",null),e([p({json:{write:!0}})],d.prototype,\"transform\",void 0),d=e([a(\"esri.rest.support.FeatureSet\")],d),d.prototype.toJSON.isDefaultToJSON=!0,d||(d={});var g=d;export default g;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport{isNone as n}from\"../../../core/maybe.js\";import{getMetersPerVerticalUnitForSR as o}from\"../../../core/unitUtils.js\";import{equals as e}from\"../../../geometry/support/spatialReferenceUtils.js\";function t(t,c,l){if(n(c)||n(l)||l.vcsWkid||e(c,l))return null;const u=o(c)/o(l);if(1===u)return null;switch(t){case\"point\":case\"esriGeometryPoint\":return n=>i(n,u);case\"polyline\":case\"esriGeometryPolyline\":return n=>s(n,u);case\"polygon\":case\"esriGeometryPolygon\":return n=>r(n,u);case\"multipoint\":case\"esriGeometryMultipoint\":return n=>f(n,u);default:return null}}function i(n,o){n&&null!=n.z&&(n.z*=o)}function r(n,o){if(n)for(const e of n.rings)for(const n of e)n.length>2&&(n[2]*=o)}function s(n,o){if(n)for(const e of n.paths)for(const n of e)n.length>2&&(n[2]*=o)}function f(n,o){if(n)for(const e of n.points)e.length>2&&(e[2]*=o)}function c(n,o,e){if(null==n.hasM||n.hasZ)for(const t of o)for(const n of t)n.length>2&&(n[2]*=e)}function l(n,e,t){if(!n&&!e||!t)return;const i=o(t);u(n,t,i),u(e,t,i)}function u(n,o,e){if(n)for(const t of n)a(t.geometry,o,e)}function a(n,t,i){if(!n||!n.spatialReference||e(n.spatialReference,t))return;const r=o(n.spatialReference)/i;if(1!==r)if(\"x\"in n)null!=n.z&&(n.z*=r);else if(\"rings\"in n)c(n,n.rings,r);else if(\"paths\"in n)c(n,n.paths,r);else if(\"points\"in n&&(null==n.hasM||n.hasZ))for(const o of n.points)o.length>2&&(o[2]*=r)}export{t as getGeometryZScaler,l as unapplyEditsZUnitScaling};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport{getGeometryZScaler as e}from\"./zscale.js\";function t(t,o,r){if(!r||!r.features||!r.hasZ)return;const f=e(r.geometryType,o,t.outSpatialReference);if(f)for(const e of r.features)f(e.geometry)}export{t as applyFeatureSetZUnitScaling};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nconst r={statsWorker:()=>import(\"../../smartMapping/statistics/support/statsWorker.js\"),geometryEngineWorker:()=>import(\"../../geometry/geometryEngineWorker.js\"),CSVSourceWorker:()=>import(\"../../layers/graphics/sources/support/CSVSourceWorker.js\"),EdgeProcessingWorker:()=>import(\"../../views/3d/webgl-engine/lib/edgeRendering/EdgeProcessingWorker.js\"),ElevationSamplerWorker:()=>import(\"../../geometry/support/meshUtils/ElevationSamplerWorker.js\"),FeatureServiceSnappingSourceWorker:()=>import(\"../../views/interactive/snapping/featureSources/featureServiceSource/FeatureServiceSnappingSourceWorker.js\"),GeoJSONSourceWorker:()=>import(\"../../layers/graphics/sources/geojson/GeoJSONSourceWorker.js\"),LercWorker:()=>import(\"../../layers/support/LercWorker.js\"),MemorySourceWorker:()=>import(\"../../layers/graphics/sources/support/MemorySourceWorker.js\"),PBFDecoderWorker:()=>import(\"../../views/3d/support/PBFDecoderWorker.js\"),Pipeline:()=>import(\"../../views/2d/layers/features/Pipeline.js\"),PointCloudWorker:()=>import(\"../../views/3d/layers/PointCloudWorker.js\"),RasterWorker:()=>import(\"../../layers/support/RasterWorker.js\"),SceneLayerWorker:()=>import(\"../../views/3d/layers/SceneLayerWorker.js\"),WFSSourceWorker:()=>import(\"../../layers/graphics/sources/WFSSourceWorker.js\"),WorkerTileHandler:()=>import(\"../../views/2d/engine/vectorTiles/WorkerTileHandler.js\")};export{r as registry};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport t from\"../has.js\";var e;!function(t){t[t.HANDSHAKE=0]=\"HANDSHAKE\",t[t.OPEN=1]=\"OPEN\",t[t.OPENED=2]=\"OPENED\",t[t.RESPONSE=3]=\"RESPONSE\",t[t.INVOKE=4]=\"INVOKE\",t[t.ABORT=5]=\"ABORT\",t[t.CLOSE=6]=\"CLOSE\",t[t.OPEN_PORT=7]=\"OPEN_PORT\",t[t.ON=8]=\"ON\"}(e||(e={}));let r=0;function n(){return r++}function s(t){return t&&\"object\"==typeof t&&(\"result\"in t||\"transferList\"in t)}function a(t){return t?\"string\"==typeof t?JSON.stringify({name:\"message\",message:t}):t.toJSON?JSON.stringify(t):JSON.stringify({name:t.name,message:t.message,details:t.details||{stack:t.stack}}):null}function i(t,r,n,a){if(r.type===e.OPEN_PORT)return void t.postMessage(r,[r.port]);if(r.type!==e.INVOKE&&r.type!==e.RESPONSE)return void t.postMessage(r);let i;s(n)?(i=o(n.transferList),r.data=n.result):(i=o(a),r.data=n),i?t.postMessage(r,i):t.postMessage(r)}function f(t){if(!t)return null;const e=t.data;return e?\"string\"==typeof e?JSON.parse(e):e:null}function o(e){if(!e||!e.length)return null;if(t(\"esri-workers-arraybuffer-transfer\"))return e;const r=e.filter((t=>!u(t)));return r.length?r:null}function u(t){return t instanceof ArrayBuffer||t&&t.constructor&&\"ArrayBuffer\"===t.constructor.name}export{e as MessageType,s as isTranferableResult,n as newJobId,i as postMessage,f as receiveMessage,a as toInvokeError};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport{version as e}from\"../../kernel.js\";import s from\"../Error.js\";import{on as t}from\"../events.js\";import{isSome as o}from\"../maybe.js\";import{onAbortOrThrow as n,createAbortError as r,createAbortController as i,isPromiseLike as l,isAbortError as a}from\"../promiseUtils.js\";import{registry as h}from\"./registry.js\";import{newJobId as c,MessageType as p,receiveMessage as _,toInvokeError as u,postMessage as d}from\"./utils.js\";import{commitHash as m,buildDate as b}from\"../../support/revision.js\";const{CLOSE:g,ABORT:v,INVOKE:f,RESPONSE:M,OPEN_PORT:y,ON:j}=p;class k{constructor(e){this._timer=null,this._cancelledJobIds=new Set,this._invokeMessages=[],this._invoke=e,this._timer=null,this._process=this._process.bind(this)}push(e){e.type===p.ABORT?this._cancelledJobIds.add(e.jobId):(this._invokeMessages.push(e),null===this._timer&&(this._timer=setTimeout(this._process,0)))}clear(){this._invokeMessages.length=0,this._cancelledJobIds.clear(),this._timer=null}_process(){this._timer=null;for(const e of this._invokeMessages)this._cancelledJobIds.has(e.jobId)||this._invoke(e);this._cancelledJobIds.clear(),this._invokeMessages.length=0}}class I{constructor(e,s){this._port=e,this._outJobs=new Map,this._inJobs=new Map,this._invokeQueue=new k((e=>this._onInvokeMessage(e))),this._client=s.client,this._onMessage=this._onMessage.bind(this),this._channel=s.channel,this._schedule=s.schedule,this._port.addEventListener(\"message\",this._onMessage),this._port.start()}static connect(e){const s=new MessageChannel;let t;t=\"function\"==typeof e?new e:\"default\"in e&&\"function\"==typeof e.default?new e.default:e;const o=new I(s.port1,{channel:s,client:t});return\"object\"==typeof t&&\"remoteClient\"in t&&(t.remoteClient=o),I.clients.set(o,t),s.port2}static loadWorker(e){const s=h[e];return s?s():Promise.resolve(null)}close(){this._post({type:g}),this._close()}isBusy(){return this._outJobs.size>0}invoke(e,t,o){const i=o&&o.signal,l=o&&o.transferList;if(!this._port)return Promise.reject(new s(\"worker:port-closed\",`Cannot call invoke('${e}'), port is closed`,{methodName:e,data:t}));const a=c();return new Promise(((s,o)=>{const h=n(i,(()=>{var e;const s=this._outJobs.get(a);s&&(this._outJobs.delete(a),null==(e=s.abortHandle)||e.remove(),this._post({type:v,jobId:a}),o(r()))})),c={resolve:s,reject:o,abortHandle:h,debugInfo:e};this._outJobs.set(a,c),this._post({type:f,jobId:a,methodName:e,abortable:null!=i},t,l)}))}on(e,s){const t=new MessageChannel;function o(e){s(e.data)}return this._port.postMessage({type:p.ON,eventType:e,port:t.port2},[t.port2]),t.port1.addEventListener(\"message\",o),t.port1.start(),{remove(){t.port1.postMessage({type:p.CLOSE}),t.port1.close(),t.port1.removeEventListener(\"message\",o)}}}openPort(){const e=new MessageChannel;return this._post({type:y,port:e.port2}),e.port1}_close(){this._channel&&(this._channel=null),this._port.removeEventListener(\"message\",this._onMessage),this._port.close(),this._outJobs.forEach((e=>{var s;null==(s=e.abortHandle)||s.remove(),e.reject(r(`Worker closing, aborting job calling '${e.debugInfo}'`))})),this._inJobs.clear(),this._outJobs.clear(),this._invokeQueue.clear(),this._port=this._client=this._schedule=null}_onMessage(e){o(this._schedule)?this._schedule((()=>this._processMessage(e))):this._processMessage(e)}_processMessage(e){const s=_(e);if(s)switch(s.type){case M:this._onResponseMessage(s);break;case f:this._invokeQueue.push(s);break;case v:this._onAbortMessage(s);break;case g:this._onCloseMessage();break;case y:this._onOpenPortMessage(s);break;case j:this._onOnMessage(s)}}_onAbortMessage(e){const s=this._inJobs,t=e.jobId,o=s.get(t);this._invokeQueue.push(e),o&&(o.controller&&o.controller.abort(),s.delete(t))}_onCloseMessage(){const e=this._client;this._close(),e&&\"destroy\"in e&&I.clients.get(this)===e&&e.destroy(),I.clients.delete(this),e&&e.remoteClient&&(e.remoteClient=null)}_onInvokeMessage(e){const{methodName:s,jobId:t,data:o,abortable:n}=e,r=n?i():null,h=this._inJobs;let c,p=this._client,_=p[s];try{if(!_&&s&&-1!==s.indexOf(\".\")){const e=s.split(\".\");for(let s=0;s<e.length-1;s++)p=p[e[s]],_=p[e[s+1]]}if(\"function\"!=typeof _)throw new TypeError(`${s} is not a function`);c=_.call(p,o,{client:this,signal:r?r.signal:null})}catch(d){return void this._post({type:M,jobId:t,error:u(d)})}l(c)?(h.set(t,{controller:r,promise:c}),c.then((e=>{h.has(t)&&(h.delete(t),this._post({type:M,jobId:t},e))}),(e=>{h.has(t)&&(h.delete(t),a(e)||this._post({type:M,jobId:t,error:u(e||{message:`Error encountered at method ${s}`})}))}))):this._post({type:M,jobId:t},c)}_onOpenPortMessage(e){new I(e.port,{client:this._client})}_onOnMessage(e){const{port:s}=e,o=this._client.on(e.eventType,(e=>{s.postMessage(e)})),n=t(e.port,\"message\",(e=>{_(e).type===p.CLOSE&&(n.remove(),o.remove(),s.close())}))}_onResponseMessage(e){var t;const{jobId:o,error:n,data:r}=e,i=this._outJobs;if(!i.has(o))return;const l=i.get(o);i.delete(o),null==(t=l.abortHandle)||t.remove(),n?l.reject(s.fromJSON(JSON.parse(n))):l.resolve(r)}_post(e,s,t){return d(this._port,e,s,t)}}I.kernelInfo={revision:m,version:e,buildDate:b},I.clients=new Map;export default I;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport{handlesGroup as e}from\"../handleUtils.js\";import t from\"../Logger.js\";import{isPromiseLike as s,throwIfAborted as i}from\"../promiseUtils.js\";import n from\"./RemoteClient.js\";const r=t.getLogger(\"esri.core.workers.Connection\");class l{constructor(){this._clients=new Array,this._clientPromises=new Array,this._clientIdx=0}destroy(){this.close()}get closed(){return!this._clients||!this._clients.length}open(e,t){return new Promise(((r,l)=>{let o=!0;const h=e=>{i(t.signal),o&&(o=!1,e())};this._clients.length=e.length,this._clientPromises.length=e.length;for(let i=0;i<e.length;++i){const o=e[i];s(o)?this._clientPromises[i]=o.then((e=>(this._clients[i]=new n(e,t),h(r),this._clients[i])),(()=>(h(l),null))):(this._clients[i]=new n(o,t),this._clientPromises[i]=Promise.resolve(this._clients[i]),h(r))}}))}broadcast(e,t,s){const i=new Array(this._clientPromises.length);for(let n=0;n<this._clientPromises.length;++n){const r=this._clientPromises[n];i[n]=r.then((i=>i.invoke(e,t,s)))}return i}close(){for(const e of this._clientPromises)e.then((e=>e.close()));this._clients.length=0,this._clientPromises.length=0}getAvailableClient(){let e;for(let t=0;t<this._clients.length;++t){const s=this._clients[t];if(s){if(!s.isBusy())return Promise.resolve(s)}else e=e||[],e.push(this._clientPromises[t])}return e?Promise.race(e):(this._clientIdx=(this._clientIdx+1)%this._clients.length,Promise.resolve(this._clients[this._clientIdx]))}invoke(e,t,s){let i=null;if(Array.isArray(s)?(r.warn(\"invoke()\",\"The transferList parameter is deprecated, use the options object instead\"),i={transferList:s}):i=s,this.closed)return Promise.reject(new Error(\"Connection closed\"));return this.getAvailableClient().then((s=>s.invoke(e,t,i)))}on(t,s){return Promise.all(this._clientPromises).then((()=>e(this._clients.map((e=>e.on(t,s))))))}openPorts(){return new Promise((e=>{const t=new Array(this._clientPromises.length);let s=t.length;for(let i=0;i<this._clientPromises.length;++i){this._clientPromises[i].then((n=>{t[i]=n.openPort(),0==--s&&e(t)}))}}))}get test(){return{numClients:this._clients.length}}}export default l;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport\"../../assets.js\";import\"../has.js\";import\"../urlUtils.js\";let a=null;const s={};function e(a,s){for(const e of a)if(e.name===s.name)return;a.push(s)}function r(a){var r;const t={async:a.async,isDebug:a.isDebug,locale:a.locale,baseUrl:a.baseUrl,has:{...a.has},map:{...a.map},packages:a.packages&&a.packages.concat()||[],paths:{...a.paths}};return a.hasOwnProperty(\"async\")||(t.async=!0),a.hasOwnProperty(\"isDebug\")||(t.isDebug=!1),a.baseUrl||(t.baseUrl=s.baseUrl),null==(r=s.packages)||r.forEach((a=>{e(t.packages,a)})),t}export default r;export{a as DEFAULT_LOADER_URL};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport e from\"../global.js\";import t from\"./RemoteClient.js\";import{MessageType as r,receiveMessage as s}from\"./utils.js\";class n{constructor(){const e=document.createDocumentFragment();[\"addEventListener\",\"dispatchEvent\",\"removeEventListener\"].forEach((t=>{this[t]=(...r)=>e[t](...r)}))}}const o=e.MutationObserver||e.WebKitMutationObserver,a=function(){let t;if(e.process&&e.process.nextTick)t=t=>{e.process.nextTick(t)};else if(e.Promise)t=t=>{e.Promise.resolve().then(t)};else if(o){const e=[],r=document.createElement(\"div\");new o((()=>{for(;e.length>0;)e.shift()()})).observe(r,{attributes:!0}),t=t=>{e.push(t),r.setAttribute(\"queueStatus\",\"1\")}}return t}(),i=(()=>{const t=e.MessageEvent;try{new t(\"message\",{data:null})}catch{return(e,t={})=>{const{data:r,bubbles:s=!1,cancelable:n=!1}=t,o=document.createEvent(\"Event\");return o.initEvent(e,s,n),o.data=r,o}}return(e,r)=>new t(e,r)})();class d{constructor(){this._dispatcher=new n,this._workerPostMessage({type:r.HANDSHAKE})}terminate(){}get onmessage(){return this._onmessageHandler}set onmessage(e){this._onmessageHandler&&this.removeEventListener(\"message\",this._onmessageHandler),this._onmessageHandler=e,e&&this.addEventListener(\"message\",e)}get onmessageerror(){return this._onmessageerrorHandler}set onmessageerror(e){this._onmessageerrorHandler&&this.removeEventListener(\"messageerror\",this._onmessageerrorHandler),this._onmessageerrorHandler=e,e&&this.addEventListener(\"messageerror\",e)}get onerror(){return this._onerrorHandler}set onerror(e){this._onerrorHandler&&this.removeEventListener(\"error\",this._onerrorHandler),this._onerrorHandler=e,e&&this.addEventListener(\"error\",e)}postMessage(e){a((()=>{this._workerMessageHandler(i(\"message\",{data:e}))}))}dispatchEvent(e){return this._dispatcher.dispatchEvent(e)}addEventListener(e,t,r){this._dispatcher.addEventListener(e,t,r)}removeEventListener(e,t,r){this._dispatcher.removeEventListener(e,t,r)}_workerPostMessage(e){a((()=>{this.dispatchEvent(i(\"message\",{data:e}))}))}async _workerMessageHandler(e){const n=s(e);if(n&&n.type===r.OPEN){const{modulePath:e,jobId:s}=n;let o=await t.loadWorker(e);o||(o=await import(\n/* @vite-ignore */\n/* webpackIgnore: true */\ne));const a=t.connect(o);this._workerPostMessage({type:r.OPENED,jobId:s,data:a})}}}export default d;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport{getAssetUrl as e}from\"../../assets.js\";import r from\"../../config.js\";import\"../../intl.js\";import{version as o}from\"../../kernel.js\";import t from\"../has.js\";import s from\"../Logger.js\";import{makeAbsolute as n}from\"../urlUtils.js\";import i from\"./loaderConfig.js\";import{receiveMessage as a,MessageType as l}from\"./utils.js\";import c from\"./WorkerFallback.js\";import{getLocale as f}from\"../../intl/locale.js\";import{buildDate as d,commitHash as u}from\"../../support/revision.js\";const g=s.getLogger(\"esri.core.workers\"),{HANDSHAKE:m}=l,p='let globalId=0;const outgoing=new Map,configuration=JSON.parse(\"{CONFIGURATION}\");self.esriConfig=configuration.esriConfig;const workerPath=self.esriConfig.workers.workerPath,HANDSHAKE=0,OPEN=1,OPENED=2,RESPONSE=3,INVOKE=4,ABORT=5;function createAbortError(){const e=new Error(\"Aborted\");return e.name=\"AbortError\",e}function receiveMessage(e){return e&&e.data?\"string\"==typeof e.data?JSON.parse(e.data):e.data:null}function invokeStaticMessage(e,o,r){const t=r&&r.signal,n=globalId++;return new Promise(((r,i)=>{if(t){if(t.aborted)return i(createAbortError());t.addEventListener(\"abort\",(()=>{outgoing.get(n)&&(outgoing.delete(n),self.postMessage({type:5,jobId:n}),i(createAbortError()))}))}outgoing.set(n,{resolve:r,reject:i}),self.postMessage({type:4,jobId:n,methodName:e,abortable:null!=t,data:o})}))}let workerRevisionChecked=!1;function checkWorkerRevision(e){if(!workerRevisionChecked&&e.kernelInfo){workerRevisionChecked=!0;const{revision:o,buildDate:r,version:t}=configuration.kernelInfo,{revision:n,buildDate:i,version:s}=e.kernelInfo;o!==n&&console.warn(`[esri.core.workers] Version mismatch detected between ArcGIS API for JavaScript and assets:\\nAPI version: ${t} [Date: ${r}, Revision: ${o.slice(0,8)}]\\nAssets version: ${s} [Date: ${i}, Revision: ${n.slice(0,8)}]`)}}function messageHandler(e){const o=receiveMessage(e);if(!o)return;const r=o.jobId;switch(o.type){case 1:let e;function t(o){const t=e.connect(o);self.postMessage({type:2,jobId:r,data:t},[t])}\"function\"==typeof define&&define.amd?require([workerPath],(r=>{e=r.default||r,checkWorkerRevision(e),e.loadWorker(o.modulePath).then((e=>e||new Promise((e=>{require([o.modulePath],e)})))).then(t)})):\"System\"in self&&\"function\"==typeof System.import?System.import(workerPath).then((r=>(e=r.default,checkWorkerRevision(e),e.loadWorker(o.modulePath)))).then((e=>e||System.import(o.modulePath))).then(t):(self.RemoteClient||importScripts(workerPath),e=self.RemoteClient.default||self.RemoteClient,checkWorkerRevision(e),e.loadWorker(o.modulePath).then(t));break;case 3:if(outgoing.has(r)){const e=outgoing.get(r);outgoing.delete(r),o.error?e.reject(JSON.parse(o.error)):e.resolve(o.data)}}}self.dojoConfig=configuration.loaderConfig,esriConfig.workers.loaderUrl&&(self.importScripts(esriConfig.workers.loaderUrl),\"function\"==typeof require&&\"function\"==typeof require.config&&require.config(configuration.loaderConfig)),self.addEventListener(\"message\",messageHandler),self.postMessage({type:0});';let k,w;const h=\"Failed to create Worker. Fallback to execute module in main thread\";async function v(){if(!t(\"esri-workers\"))return b(new c);if(!k&&!w)try{const e=p.replace('\"{CONFIGURATION}\"',`'${y()}'`);k=URL.createObjectURL(new Blob([e],{type:\"text/javascript\"}))}catch(r){w=r||{}}let e;if(k)try{e=new Worker(k,{name:\"esri-worker-\"+P++})}catch(r){g.warn(h,w),e=new c}else g.warn(h,w),e=new c;return b(e)}async function b(e){return new Promise((r=>{function o(s){const n=a(s);n&&n.type===m&&(e.removeEventListener(\"message\",o),e.removeEventListener(\"error\",t),r(e))}function t(r){r.preventDefault(),e.removeEventListener(\"message\",o),e.removeEventListener(\"error\",t),g.warn(\"Failed to create Worker. Fallback to execute module in main thread\",r),(e=new c).addEventListener(\"message\",o),e.addEventListener(\"error\",t)}e.addEventListener(\"message\",o),e.addEventListener(\"error\",t)}))}function y(){let s;if(null!=r.default){const e={...r};delete e.default,s=JSON.parse(JSON.stringify(e))}else s=JSON.parse(JSON.stringify(r));s.assetsPath=n(s.assetsPath),s.request.interceptors=[],s.log.interceptors=[],s.locale=f(),s.has={\"csp-restrictions\":t(\"csp-restrictions\"),\"esri-2d-debug\":!1,\"esri-2d-update-debug\":t(\"esri-2d-update-debug\"),\"esri-2d-query-centroid-enabled\":t(\"esri-2d-query-centroid-enabled\"),\"featurelayer-pbf\":t(\"featurelayer-pbf\"),\"esri-atomics\":t(\"esri-atomics\"),\"esri-shared-array-buffer\":t(\"esri-shared-array-buffer\"),\"esri-tiles-debug\":t(\"esri-tiles-debug\"),\"esri-workers-arraybuffer-transfer\":t(\"esri-workers-arraybuffer-transfer\"),\"host-webworker\":1},s.workers.loaderUrl&&(s.workers.loaderUrl=n(s.workers.loaderUrl)),s.workers.workerPath?s.workers.workerPath=n(s.workers.workerPath):s.workers.workerPath=n(e(\"esri/core/workers/RemoteClient.js\"));const a=r.workers.loaderConfig,l=i({baseUrl:null==a?void 0:a.baseUrl,locale:f(),has:{\"csp-restrictions\":t(\"csp-restrictions\"),\"dojo-test-sniff\":0,\"host-webworker\":1,...null==a?void 0:a.has},map:{...null==a?void 0:a.map},paths:{...null==a?void 0:a.paths},packages:(null==a?void 0:a.packages)||[]}),c={version:o,buildDate:d,revision:u};return JSON.stringify({esriConfig:s,loaderConfig:l,kernelInfo:c})}let P=0;export{v as createWorker};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport{workerMessages as e}from\"../../kernel.js\";import t from\"../Error.js\";import o from\"../Logger.js\";import{onAbortOrThrow as s,createAbortController as r,isPromiseLike as n,isAbortError as a}from\"../promiseUtils.js\";import{newJobId as i,receiveMessage as l,toInvokeError as d,postMessage as h,MessageType as c}from\"./utils.js\";import{createWorker as p}from\"./workerFactory.js\";const b=o.getLogger(\"esri.core.workers\"),{ABORT:m,INVOKE:_,OPEN:u,OPENED:g,RESPONSE:j}=c;class f{constructor(e,t){this._outJobs=new Map,this._inJobs=new Map,this.worker=e,this.id=t,e.addEventListener(\"message\",this._onMessage.bind(this)),e.addEventListener(\"error\",(e=>{e.preventDefault(),b.error(e)}))}static async create(e){const t=await p();return new f(t,e)}terminate(){this.worker.terminate()}async open(e,t={}){const{signal:o}=t,r=i();return new Promise(((t,n)=>{const a={resolve:t,reject:n,abortHandle:s(o,(()=>{this._outJobs.delete(r),this._post({type:m,jobId:r})}))};this._outJobs.set(r,a),this._post({type:u,jobId:r,modulePath:e})}))}_onMessage(e){const t=l(e);if(t)switch(t.type){case g:this._onOpenedMessage(t);break;case j:this._onResponseMessage(t);break;case m:this._onAbortMessage(t);break;case _:this._onInvokeMessage(t)}}_onAbortMessage(e){const t=this._inJobs,o=e.jobId,s=t.get(o);s&&(s.controller&&s.controller.abort(),t.delete(o))}_onInvokeMessage(t){const{methodName:o,jobId:s,data:i,abortable:l}=t,h=l?r():null,c=this._inJobs,p=e[o];let b;try{if(\"function\"!=typeof p)throw new TypeError(`${o} is not a function`);b=p.call(null,i,{signal:h?h.signal:null})}catch(m){return void this._post({type:j,jobId:s,error:d(m)})}n(b)?(c.set(s,{controller:h,promise:b}),b.then((e=>{c.has(s)&&(c.delete(s),this._post({type:j,jobId:s},e))}),(e=>{c.has(s)&&(c.delete(s),e||(e={message:\"Error encountered at method\"+o}),a(e)||this._post({type:j,jobId:s,error:d(e||{message:`Error encountered at method ${o}`})}))}))):this._post({type:j,jobId:s},b)}_onOpenedMessage(e){var t;const{jobId:o,data:s}=e,r=this._outJobs.get(o);r&&(this._outJobs.delete(o),null==(t=r.abortHandle)||t.remove(),r.resolve(s))}_onResponseMessage(e){var o;const{jobId:s,error:r,data:n}=e,a=this._outJobs.get(s);a&&(this._outJobs.delete(s),null==(o=a.abortHandle)||o.remove(),r?a.reject(t.fromJSON(JSON.parse(r))):a.resolve(n))}_post(e,t,o){return h(this.worker,e,t,o)}}export default f;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport t from\"../Error.js\";import r from\"../has.js\";import{throwIfAborted as e,createAbortController as o}from\"../promiseUtils.js\";import n from\"./Connection.js\";export{default as Connection}from\"./Connection.js\";import i from\"./RemoteClient.js\";export{default as RemoteClient}from\"./RemoteClient.js\";import s from\"./WorkerOwner.js\";let a=r(\"esri-workers-debug\")?1:r(\"host-browser\")?navigator.hardwareConcurrency-1:0;a||(a=r(\"safari\")&&r(\"mac\")||r(\"trident\")?7:2);let l=0;const c=[];function m(){g()}function f(t,r){return u(t,{client:r})}async function u(t,r){const e=new n;return await e.open(t,r),e}async function p(o,n={}){if(\"string\"!=typeof o)throw new t(\"workers:undefined-module\",\"modulePath is missing\");let s=n.strategy||\"distributed\";if(r(\"host-webworker\")&&!r(\"esri-workers\")&&(s=\"local\"),\"local\"===s){let t=await i.loadWorker(o);t||(t=await import(\n/* @vite-ignore */\n/* webpackIgnore: true */\no)),e(n.signal);const r=n.client||t;return u([i.connect(t)],{...n,client:r})}if(await g(),e(n.signal),\"dedicated\"===s){const t=l++%a;return u([await c[t].open(o,n)],n)}if(n.maxNumWorkers&&n.maxNumWorkers>0){const t=Math.min(n.maxNumWorkers,a);if(t<a){const r=new Array(t);for(let e=0;e<t;++e){const t=l++%a;r[e]=c[t].open(o,n)}return u(r,n)}}return u(c.map((t=>t.open(o,n))),n)}function w(){h&&(d.abort(),h=null);for(let t=0;t<c.length;t++)c[t]&&c[t].terminate();c.length=0}let d,h=null;async function g(){if(h)return h;d=o();const t=[];for(let r=0;r<a;r++){const e=s.create(r).then((t=>(c[r]=t,t)));t.push(e)}return h=Promise.all(t),h}export{m as initialize,p as open,f as openWithPorts,w as terminate};\n"],"sourceRoot":""}