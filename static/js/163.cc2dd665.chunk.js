(this.webpackJsonpimaps=this.webpackJsonpimaps||[]).push([[163],{177:function(e,t,a){"use strict";a.d(t,"a",(function(){return n})),a.d(t,"b",(function(){return i}));a(79);function n(e){}function i(e){return()=>e}},190:function(e,t,a){"use strict";a.d(t,"a",(function(){return r}));var n=a(136),i=a(115);const r={inches:Object(i.c)(1,"meters","inches"),feet:Object(i.c)(1,"meters","feet"),"us-feet":Object(i.c)(1,"meters","us-feet"),yards:Object(i.c)(1,"meters","yards"),miles:Object(i.c)(1,"meters","miles"),"nautical-miles":Object(i.c)(1,"meters","nautical-miles"),millimeters:Object(i.c)(1,"meters","millimeters"),centimeters:Object(i.c)(1,"meters","centimeters"),decimeters:Object(i.c)(1,"meters","decimeters"),meters:Object(i.c)(1,"meters","meters"),kilometers:Object(i.c)(1,"meters","kilometers"),"decimal-degrees":1/Object(i.m)(1,"meters",n.a.radius)}},230:function(e,t,a){"use strict";function n(e){return e&&"esri.renderers.visualVariables.SizeVariable"===e.declaredClass}function i(e){return null!=e&&!isNaN(e)&&isFinite(e)}function r(e){return e.valueExpression?"expression":e.field&&"string"==typeof e.field?"field":"unknown"}function s(e,t){const a=t||r(e),n=e.valueUnit||"unknown";return"unknown"===a?"constant":e.stops?"stops":null!=e.minSize&&null!=e.maxSize&&null!=e.minDataValue&&null!=e.maxDataValue?"clamped-linear":"unknown"===n?null!=e.minSize&&null!=e.minDataValue?e.minSize&&e.minDataValue?"proportional":"additive":"identity":"real-world-size"}a.d(t,"a",(function(){return r})),a.d(t,"b",(function(){return s})),a.d(t,"c",(function(){return n})),a.d(t,"d",(function(){return i}))},274:function(e,t,a){"use strict";a.r(t),a.d(t,"getAllSizes",(function(){return g})),a.d(t,"getColor",(function(){return b})),a.d(t,"getOpacity",(function(){return m})),a.d(t,"getRotationAngle",(function(){return v})),a.d(t,"getSize",(function(){return h})),a.d(t,"getSizeForValue",(function(){return j})),a.d(t,"getSizeFromNumberOrVariable",(function(){return V})),a.d(t,"getSizeRangeAtScale",(function(){return w})),a.d(t,"getVisualVariableValues",(function(){return y})),a.d(t,"viewScaleRE",(function(){return p}));var n=a(177),i=a(88),r=a(80),s=a(107),c=a(120),l=a(190),o=a(230);const u=r.a.getLogger("esri.renderers.visualVariables.support.visualVariableUtils"),d=new c.a,f=Math.PI,p=/^\s*(return\s+)?\$view\.scale\s*(;)?\s*$/i;function b(e,t,a){const n="visualVariables"in e&&e.visualVariables?e.visualVariables.filter((e=>"color"===e.type))[0]:e;if(!n)return;if("esri.renderers.visualVariables.ColorVariable"!==n.declaredClass)return void u.warn("The visualVariable should be an instance of esri.renderers.visualVariables.ColorVariable");const r="number"==typeof t,c=r?null:t,l=c&&c.attributes;let o=r?t:null;const d=n.field,{ipData:f,hasExpression:p}=n.cache;let b=n.cache.compiledFunc;if(!d&&!p){const e=n.stops;return e&&e[0]&&e[0].color}if("number"!=typeof o)if(p){if(!Object(i.k)(a)||!Object(i.k)(a.arcade))return void u.error("Use of arcade expressions requires an arcade context");const e={viewingMode:a.viewingMode,scale:a.scale,spatialReference:a.spatialReference},t=a.arcade.arcadeUtils,r=t.getViewInfo(e),s=t.createExecContext(c,r);if(!b){const e=t.createSyntaxTree(n.valueExpression);b=t.createFunction(e),n.cache.compiledFunc=b}o=t.executeFunction(b,s)}else l&&(o=l[d]);const m=n.normalizationField,v=l?parseFloat(l[m]):void 0;if(null!=o&&(!m||r||!isNaN(v)&&0!==v)){isNaN(v)||r||(o/=v);const e=O(o,f);if(e){const t=e[0],r=e[1],c=t===r?n.stops[t].color:s.a.blendColors(n.stops[t].color,n.stops[r].color,e[2],Object(i.k)(a)?a.color:void 0);return new s.a(c)}}}function m(e,t,a){const n="visualVariables"in e&&e.visualVariables?e.visualVariables.filter((e=>"opacity"===e.type))[0]:e;if(!n)return;if("esri.renderers.visualVariables.OpacityVariable"!==n.declaredClass)return void u.warn("The visualVariable should be an instance of esri.renderers.visualVariables.OpacityVariable");const r="number"==typeof t,s=r?null:t,c=s&&s.attributes;let l=r?t:null;const o=n.field,{ipData:d,hasExpression:f}=n.cache;let p=n.cache.compiledFunc;if(!o&&!f){const e=n.stops;return e&&e[0]&&e[0].opacity}if("number"!=typeof l)if(f){if(Object(i.j)(a)||Object(i.j)(a.arcade))return void u.error("Use of arcade expressions requires an arcade context");const e={viewingMode:a.viewingMode,scale:a.scale,spatialReference:a.spatialReference},t=a.arcade.arcadeUtils,r=t.getViewInfo(e),c=t.createExecContext(s,r);if(!p){const e=t.createSyntaxTree(n.valueExpression);p=t.createFunction(e),n.cache.compiledFunc=p}l=t.executeFunction(p,c)}else c&&(l=c[o]);const b=n.normalizationField,m=c?parseFloat(c[b]):void 0;if(null!=l&&(!b||r||!isNaN(m)&&0!==m)){isNaN(m)||r||(l/=m);const e=O(l,d);if(e){const t=e[0],a=e[1];if(t===a)return n.stops[t].opacity;{const i=n.stops[t].opacity;return i+(n.stops[a].opacity-i)*e[2]}}}}function v(e,t,a){const n="visualVariables"in e&&e.visualVariables?e.visualVariables.filter((e=>"rotation"===e.type))[0]:e;if(!n)return;if("esri.renderers.visualVariables.RotationVariable"!==n.declaredClass)return void u.warn("The visualVariable should be an instance of esri.renderers.visualVariables.RotationVariable");const r=n.axis||"heading",s="heading"===r&&"arithmetic"===n.rotationType?90:0,c="heading"===r&&"arithmetic"===n.rotationType?-1:1,l="number"==typeof t?null:t,o=l&&l.attributes,d=n.field,{hasExpression:f}=n.cache;let p=n.cache.compiledFunc,b=0;if(!d&&!f)return b;if(f){if(Object(i.j)(a)||Object(i.j)(a.arcade))return void u.error("Use of arcade expressions requires an arcade context");const e={viewingMode:a.viewingMode,scale:a.scale,spatialReference:a.spatialReference},t=a.arcade.arcadeUtils,r=t.getViewInfo(e),s=t.createExecContext(l,r);if(!p){const e=t.createSyntaxTree(n.valueExpression);p=t.createFunction(e),n.cache.compiledFunc=p}b=t.executeFunction(p,s)}else o&&(b=o[d]||0);return b="number"!=typeof b||isNaN(b)?null:s+c*b,b}function h(e,t,a){const n="visualVariables"in e&&e.visualVariables?e.visualVariables.filter((e=>"size"===e.type))[0]:e;if(!n)return;if("esri.renderers.visualVariables.SizeVariable"!==n.declaredClass)return void u.warn("The visualVariable should be an instance of esri.renderers.visualVariables.SizeVariable");const r=j(function(e,t,a){const n="number"==typeof t,r=n?null:t,s=r&&r.attributes;let c=n?t:null;const{isScaleDriven:l}=e.cache;let d=e.cache.compiledFunc;if(l){const t=Object(i.k)(a)?a.scale:void 0,n=Object(i.k)(a)?a.view:void 0;c=null==t||"3d"===n?function(e){let t=null,a=null;const n=e.stops;return n?(t=n[0].value,a=n[n.length-1].value):(t=e.minDataValue||0,a=e.maxDataValue||0),(t+a)/2}(e):t}else if(!n)switch(e.inputValueType){case"expression":{if(Object(i.j)(a)||Object(i.j)(a.arcade))return void u.error("Use of arcade expressions requires an arcade context");const t={viewingMode:a.viewingMode,scale:a.scale,spatialReference:a.spatialReference},n=a.arcade.arcadeUtils,s=n.getViewInfo(t),l=n.createExecContext(r,s);if(!d){const t=n.createSyntaxTree(e.valueExpression);d=n.createFunction(t),e.cache.compiledFunc=d}c=n.executeFunction(d,l);break}case"field":s&&(c=s[e.field]);break;case"unknown":c=null}if(!Object(o.d)(c))return null;if(n||!e.normalizationField)return c;const f=s?parseFloat(s[e.normalizationField]):null;return Object(o.d)(f)&&0!==f?c/f:null}(n,t,a),n,t,a,n.cache.ipData);return null==r||isNaN(r)?0:r}function V(e,t,a){return null==e?null:Object(o.c)(e)?h(e,t,a):Object(o.d)(e)?e:null}function x(e,t,a){return Object(o.d)(a)&&e>a?a:Object(o.d)(t)&&e<t?t:e}function j(e,t,a,n,r){switch(t.transformationType){case"additive":return function(e,t,a,n){return e+(V(t.minSize,a,n)||t.minDataValue)}(e,t,a,n);case"constant":return function(e,t,a){const n=e.stops;let i=n&&n.length&&n[0].size;return null==i&&(i=e.minSize),V(i,t,a)}(t,a,n);case"clamped-linear":return function(e,t,a,n){const r=(e-t.minDataValue)/(t.maxDataValue-t.minDataValue),s=V(t.minSize,a,n),c=V(t.maxSize,a,n),l=Object(i.k)(n)?n.shape:void 0;if(e<=t.minDataValue)return s;if(e>=t.maxDataValue)return c;if("area"===t.scaleBy&&l){const e="circle"===l,t=e?f*(s/2)**2:s*s,a=t+r*((e?f*(c/2)**2:c*c)-t);return e?2*Math.sqrt(a/f):Math.sqrt(a)}return s+r*(c-s)}(e,t,a,n);case"proportional":return function(e,t,a,n){const r=Object(i.k)(n)?n.shape:void 0,s=e/t.minDataValue,c=V(t.minSize,a,n),l=V(t.maxSize,a,n);let o=null;return o="circle"===r?2*Math.sqrt(s*(c/2)**2):"square"===r||"diamond"===r||"image"===r?Math.sqrt(s*c**2):s*c,x(o,c,l)}(e,t,a,n);case"stops":return function(e,t,a,n,i){const[r,s,c]=O(e,i);if(r===s)return V(t.stops[r].size,a,n);{const e=V(t.stops[r].size,a,n);return e+(V(t.stops[s].size,a,n)-e)*c}}(e,t,a,n,r);case"real-world-size":return function(e,t,a,n){const r=(Object(i.k)(n)&&n.resolution?n.resolution:1)*l.a[t.valueUnit],s=V(t.minSize,a,n),c=V(t.maxSize,a,n),{valueRepresentation:o}=t;let u=null;return u="area"===o?2*Math.sqrt(e/f)/r:"radius"===o||"distance"===o?2*e/r:e/r,x(u,s,c)}(e,t,a,n);case"identity":return e;case"unknown":return null}}function w(e,t,a){const{isScaleDriven:n}=e.cache;if(!(n&&"3d"===a||t))return null;const i={scale:t,view:a};let r=V(e.minSize,d,i),s=V(e.maxSize,d,i);if(null!=r||null!=s){if(r>s){const e=s;s=r,r=e}return{minSize:r,maxSize:s}}}function y(e,t,a){if(!e.visualVariables)return;const n=[],i=[],r=[],s=[],c=[];for(const l of e.visualVariables)switch(l.type){case"color":i.push(l);break;case"opacity":r.push(l);break;case"rotation":c.push(l);break;case"size":s.push(l)}return i.forEach((e=>{const i=b(e,t,a);n.push({variable:e,value:i})})),r.forEach((e=>{const i=m(e,t,a);n.push({variable:e,value:i})})),c.forEach((e=>{const i=v(e,t,a);n.push({variable:e,value:i})})),s.forEach((e=>{const i=h(e,t,a);n.push({variable:e,value:i})})),n.filter((e=>null!=e.value))}function O(e,t){if(!t)return;let a=0,n=t.length-1;return t.some(((t,i)=>e<t?(n=i,!0):(a=i,!1))),[a,n,(e-t[a])/(t[n]-t[a])]}function g(e,t,a){const i=["proportional","proportional","proportional"];for(const r of e){const e=r.useSymbolValue?"symbol-value":h(r,t,a);switch(r.axis){case"width":i[0]=e;break;case"depth":i[1]=e;break;case"height":i[2]=e;break;case"width-and-depth":i[0]=e,i[1]=e;break;case"all":case void 0:case null:i[0]=e,i[1]=e,i[2]=e;break;default:Object(n.a)(r.axis)}}return i}}}]);
//# sourceMappingURL=163.cc2dd665.chunk.js.map