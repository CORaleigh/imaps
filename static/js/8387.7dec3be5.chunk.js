"use strict";(globalThis.webpackChunkimaps=globalThis.webpackChunkimaps||[]).push([[8387,2463,2170],{28387:(e,t,n)=>{n.r(t),n.d(t,{Select:()=>C,default:()=>w});var r=n(85580),i=n(72791),c=n(9283),l=n(93655),o=n(43345),a=n(52639),s=n(2170);let d,u,f,p,h=0;function y(){u.cancel(),f&&f.remove(),p.removeAll()}function m(e,t,n){p=new l.Z({listMode:"hide"}),e.map.add(p),u=new o.Z({view:e,layer:p,defaultCreateOptions:{mode:"hybrid"}}),d=e.allLayerViews.find((e=>e.layer.title.includes("Property")&&"feature"===e.layer.type));const r=e.map.allLayers.find((e=>e.title.includes("Property")&&"feature"===e.type));return e.whenLayerView(r).then((e=>{d=e})),u.watch("activeTool",(e=>{n(e)})),u.on("create",(n=>{if("start"!==n.state&&"cancel"!==n.state||(p.graphics.removeAll(),f&&f.remove()),"complete"===n.state&&(t(h>0?g(h,n.graphic):n.graphic.geometry),u.create(n.tool),f&&f.remove(),p.graphics.removeAll()),"active"===n.state)if(0===h)x(e,n.graphic.geometry).then((e=>{f&&f.remove(),f=e}));else{const t=g(h,n.graphic);u.layer.removeAll();const r={type:"simple-fill",color:[255,255,0,.2],style:"solid"};u.layer.add(new a.Z({geometry:t,symbol:r})),x(e,t).then((e=>{f&&f.remove(),f=e}))}})),u}function g(e,t){return s.buffer(t.geometry,e,"feet")}function x(e,t){return new Promise(((n,r)=>{d.queryFeatures({geometry:t,outSpatialReference:e.spatialReference}).then((e=>{const t=d.highlight(e.features);n(t)}))}))}function v(e,t){h=""===e.target.value?0:parseInt(e.target.value),t(h)}function A(e,t){e.create(t)}const G={title:"Property Select Tips",tips:[{title:"Long Press to Select",text:"You can now select a property by long pressing on a property on the map.  This can be done at any time, even without having the property select tool active."}]},S=e=>{const t=(0,i.useRef)(!1),[n,r]=(0,i.useState)(!1),[c,l]=(0,i.useState)(""),[o,a]=(0,i.useState)(0),[s,d]=(0,i.useState)(),[u,f]=(0,i.useState)(void 0);(0,i.useEffect)((()=>(t.current||(t.current=!0,d(m(e.view,e.geometrySet,l))),()=>{s&&s.destroy()})),[]),(0,i.useEffect)((()=>{f(e.selectedProperty)}),[e.selectedProperty]),(0,i.useEffect)((()=>{s&&e.toolDismissed&&(s.cancel(),l(""))}),[e.toolDismissed]),(0,i.useEffect)((()=>{r(e.isActive),e.isActive||y()}),[e.isActive]);const p=(0,i.useCallback)((t=>{e.toolDismissed(),y()}),[]),h=(0,i.useCallback)((t=>{e.showTips(G)}),[]);return{isActive:n,selectedTool:c,setSelectedTool:l,sketchVm:s,distance:o,setDistance:a,selectedProperty:u,toolDismissed:p,tipsClicked:h}};var b=n(80184);const C=e=>{const{isActive:t,selectedTool:n,setSelectedTool:i,sketchVm:l,distance:o,setDistance:a,selectedProperty:d,toolDismissed:u,tipsClicked:f}=S(e);return(0,b.jsxs)(r.N$,{id:"select-panel",heading:"Select","data-panel":"select",hidden:!t,closed:!t||void 0,closable:!0,onCalcitePanelClose:u,children:[(0,b.jsx)(r.G1,{id:"tip",icon:"lightbulb",text:"Tips",slot:"header-actions-end",onClick:f}),(0,b.jsx)(r.G1,{id:"collapseTool",icon:"chevron-up",text:"",slot:"header-actions-end",onClick:c.F$}),(0,b.jsx)(r.$A,{closeOnClick:!0,label:"Show Tip",referenceElement:"tip",children:"Show Tip"}),(0,b.jsx)(r.$A,{closeOnClick:!0,label:"Collapse",referenceElement:"collapseTool",children:"Collapse"}),(0,b.jsxs)("div",{id:"select-tools",children:[(0,b.jsxs)("div",{className:"select-container",children:[(0,b.jsx)(r.G1,{id:"selectPoint",scale:"m",icon:"pin",text:"Point",active:"point"===n||void 0,onClick:()=>{i("point"),l&&A(l,"point")}}),(0,b.jsx)(r.$A,{closeOnClick:!0,label:"Select by Point",referenceElement:"selectPoint",children:"Select by Point"}),(0,b.jsx)(r.G1,{id:"selectLine",scale:"m",icon:"line",text:"Line",active:"line"===n||void 0,onClick:()=>{i("line"),l&&A(l,"polyline")}}),(0,b.jsx)(r.$A,{closeOnClick:!0,label:"Select by Line",referenceElement:"selectLine",children:"Select by Line"}),(0,b.jsx)(r.G1,{id:"selectPolygon",scale:"m",icon:"polygon",text:"Polygon",active:"polygon"===n||void 0,onClick:()=>{i("polygon"),l&&A(l,"polygon")}}),(0,b.jsx)(r.$A,{closeOnClick:!0,label:"Select by Rectangle",referenceElement:"selectRectangle",children:"Select by Rectangle"}),(0,b.jsx)(r.G1,{id:"selectRectangle",scale:"m",icon:"rectangle",text:"Rectangle",active:"rectangle"===n||void 0,onClick:()=>{i("rectangle"),l&&A(l,"rectangle")}}),(0,b.jsx)(r.$A,{closeOnClick:!0,label:"Select by Circle",referenceElement:"selectCircle",children:"Select by Circle"}),(0,b.jsx)(r.G1,{id:"selectCircle",scale:"m",icon:"circle",text:"Circle",active:"circle"===n||void 0,onClick:()=>{i("circle"),l&&A(l,"circle")}}),(0,b.jsx)(r.$A,{closeOnClick:!0,label:"Select by Polygon",referenceElement:"selectPolygon",children:"Select by Polygon"}),(0,b.jsx)(r.G1,{id:"selectMultipoint",scale:"m",icon:"pins",text:"Multi-Point",active:"multipoint"===n||void 0,onClick:()=>{i("multipoint"),l&&A(l,"multipoint")}}),(0,b.jsx)(r.$A,{closeOnClick:!0,label:"Select by Multi-Point",referenceElement:"selectMultipoint",children:"Select by Multi-point"}),(0,b.jsx)(r.G1,{id:"clearSelection",scale:"m",icon:"trash",text:"Clear",onClick:()=>{e.geometrySet(void 0)}}),(0,b.jsx)(r.$A,{closeOnClick:!0,label:"Clear Selection",referenceElement:"clearSelection",children:"Clear selection"})]}),(0,b.jsxs)("div",{className:"buffer-container",children:[(0,b.jsxs)(r.ZK,{children:["Buffer Distance",(0,b.jsx)(r.e,{type:"number",suffixText:"feet",step:50,min:0,max:5280,value:o.toString(),clearable:!0,onCalciteInputChange:e=>v(e,a)})]}),(0,b.jsx)(r.ln,{disabled:void 0===d||void 0,hidden:o<=0,width:"full",onClick:()=>function(e,t,n){n(s.buffer(e.geometry,t,"feet"))}(d,o,e.geometrySet),children:"Buffer Property"})]})]})]})},w=i.memo(C)},92463:(e,t,n)=>{n.r(t),n.d(t,{hydratedAdapter:()=>a});var r=n(53866),i=n(77577),c=n(585),l=n(80885),o=n(29909);const a={convertToGEGeometry:function(e,t){if(null==t)return null;let n="cache"in t?t.cache._geVersion:void 0;return null==n&&(n=e.convertJSONToGeometry(t),"cache"in t&&(t.cache._geVersion=n)),n},exportPoint:function(e,t,n){const r=e.hasZ(t),i=e.hasM(t),l=new c.Z({x:e.getPointX(t),y:e.getPointY(t),spatialReference:n});return r&&(l.z=e.getPointZ(t)),i&&(l.m=e.getPointM(t)),l.cache._geVersion=t,l},exportPolygon:function(e,t,n){const r=new l.Z({rings:e.exportPaths(t),hasZ:e.hasZ(t),hasM:e.hasM(t),spatialReference:n});return r.cache._geVersion=t,r},exportPolyline:function(e,t,n){const r=new o.Z({paths:e.exportPaths(t),hasZ:e.hasZ(t),hasM:e.hasM(t),spatialReference:n});return r.cache._geVersion=t,r},exportMultipoint:function(e,t,n){const r=new i.Z({hasZ:e.hasZ(t),hasM:e.hasM(t),points:e.exportPoints(t),spatialReference:n});return r.cache._geVersion=t,r},exportExtent:function(e,t,n){const i=e.hasZ(t),c=e.hasM(t),l=new r.Z({xmin:e.getXMin(t),ymin:e.getYMin(t),xmax:e.getXMax(t),ymax:e.getYMax(t),spatialReference:n});if(i){const n=e.getZExtent(t);l.zmin=n.vmin,l.zmax=n.vmax}if(c){const n=e.getMExtent(t);l.mmin=n.vmin,l.mmax=n.vmax}return l.cache._geVersion=t,l}}},2170:(e,t,n)=>{n.r(t),n.d(t,{buffer:()=>k,changeDefaultSpatialReferenceTolerance:()=>H,clearDefaultSpatialReferenceTolerance:()=>J,clip:()=>o,contains:()=>s,convexHull:()=>G,crosses:()=>d,cut:()=>a,densify:()=>O,difference:()=>S,disjoint:()=>m,distance:()=>u,equals:()=>f,extendedSpatialReferenceInfo:()=>l,flipHorizontal:()=>V,flipVertical:()=>D,generalize:()=>L,geodesicArea:()=>_,geodesicBuffer:()=>j,geodesicDensify:()=>$,geodesicLength:()=>I,intersect:()=>C,intersectLinesToPoints:()=>B,intersects:()=>p,isSimple:()=>v,nearestCoordinate:()=>R,nearestVertex:()=>T,nearestVertices:()=>M,offset:()=>P,overlaps:()=>g,planarArea:()=>z,planarLength:()=>N,relate:()=>x,rotate:()=>Z,simplify:()=>A,symmetricDifference:()=>b,touches:()=>h,union:()=>w,within:()=>y});var r=n(99058),i=n(92463);function c(e){return Array.isArray(e)?e[0].spatialReference:e&&e.spatialReference}function l(e){return r.G.extendedSpatialReferenceInfo(e)}function o(e,t){return r.G.clip(i.hydratedAdapter,c(e),e,t)}function a(e,t){return r.G.cut(i.hydratedAdapter,c(e),e,t)}function s(e,t){return r.G.contains(i.hydratedAdapter,c(e),e,t)}function d(e,t){return r.G.crosses(i.hydratedAdapter,c(e),e,t)}function u(e,t,n){return r.G.distance(i.hydratedAdapter,c(e),e,t,n)}function f(e,t){return r.G.equals(i.hydratedAdapter,c(e),e,t)}function p(e,t){return r.G.intersects(i.hydratedAdapter,c(e),e,t)}function h(e,t){return r.G.touches(i.hydratedAdapter,c(e),e,t)}function y(e,t){return r.G.within(i.hydratedAdapter,c(e),e,t)}function m(e,t){return r.G.disjoint(i.hydratedAdapter,c(e),e,t)}function g(e,t){return r.G.overlaps(i.hydratedAdapter,c(e),e,t)}function x(e,t,n){return r.G.relate(i.hydratedAdapter,c(e),e,t,n)}function v(e){return r.G.isSimple(i.hydratedAdapter,c(e),e)}function A(e){return r.G.simplify(i.hydratedAdapter,c(e),e)}function G(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return r.G.convexHull(i.hydratedAdapter,c(e),e,t)}function S(e,t){return r.G.difference(i.hydratedAdapter,c(e),e,t)}function b(e,t){return r.G.symmetricDifference(i.hydratedAdapter,c(e),e,t)}function C(e,t){return r.G.intersect(i.hydratedAdapter,c(e),e,t)}function w(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return r.G.union(i.hydratedAdapter,c(e),e,t)}function P(e,t,n,l,o,a){return r.G.offset(i.hydratedAdapter,c(e),e,t,n,l,o,a)}function k(e,t,n){let l=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return r.G.buffer(i.hydratedAdapter,c(e),e,t,n,l)}function j(e,t,n,l,o,a){return r.G.geodesicBuffer(i.hydratedAdapter,c(e),e,t,n,l,o,a)}function R(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return r.G.nearestCoordinate(i.hydratedAdapter,c(e),e,t,n)}function T(e,t){return r.G.nearestVertex(i.hydratedAdapter,c(e),e,t)}function M(e,t,n,l){return r.G.nearestVertices(i.hydratedAdapter,c(e),e,t,n,l)}function E(e){return"xmin"in e?"center"in e?e.center:null:"x"in e?e:"extent"in e?e.extent?.center??null:null}function Z(e,t,n){if(null==e)throw new Y;const i=e.spatialReference;if(null==(n=n??E(e)))throw new Y;const c=e.constructor.fromJSON(r.G.rotate(e,t,n));return c.spatialReference=i,c}function V(e,t){if(null==e)throw new Y;const n=e.spatialReference;if(null==(t=t??E(e)))throw new Y;const i=e.constructor.fromJSON(r.G.flipHorizontal(e,t));return i.spatialReference=n,i}function D(e,t){if(null==e)throw new Y;const n=e.spatialReference;if(null==(t=t??E(e)))throw new Y;const i=e.constructor.fromJSON(r.G.flipVertical(e,t));return i.spatialReference=n,i}function L(e,t,n,l){return r.G.generalize(i.hydratedAdapter,c(e),e,t,n,l)}function O(e,t,n){return r.G.densify(i.hydratedAdapter,c(e),e,t,n)}function $(e,t,n){let l=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;return r.G.geodesicDensify(i.hydratedAdapter,c(e),e,t,n,l)}function z(e,t){return r.G.planarArea(i.hydratedAdapter,c(e),e,t)}function N(e,t){return r.G.planarLength(i.hydratedAdapter,c(e),e,t)}function _(e,t,n){return r.G.geodesicArea(i.hydratedAdapter,c(e),e,t,n)}function I(e,t,n){return r.G.geodesicLength(i.hydratedAdapter,c(e),e,t,n)}function B(e,t){return r.G.intersectLinesToPoints(i.hydratedAdapter,c(e),e,t)}function H(e,t){r.G.changeDefaultSpatialReferenceTolerance(e,t)}function J(e){r.G.clearDefaultSpatialReferenceTolerance(e)}class Y extends Error{constructor(){super("Illegal Argument Exception")}}}}]);
//# sourceMappingURL=8387.7dec3be5.chunk.js.map