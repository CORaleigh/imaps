{"version":3,"sources":["../node_modules/@arcgis/core/views/2d/layers/features/Store2D.js","../node_modules/@arcgis/core/views/2d/arcade/callExpressionWithCursor.js","../node_modules/@arcgis/core/views/2d/layers/features/FeatureStore2D.js","../node_modules/@arcgis/core/core/CircularArray.js","../node_modules/@arcgis/core/layers/graphics/data/utils.js","../node_modules/@arcgis/core/views/2d/layers/features/support/whereUtils.js","../node_modules/@arcgis/core/layers/graphics/data/FeatureFilter.js","../node_modules/@arcgis/core/layers/graphics/data/timeSupport.js","../node_modules/@arcgis/core/layers/graphics/contains.js","../node_modules/@arcgis/core/layers/graphics/data/spatialQuerySupport.js","../node_modules/@arcgis/core/geometry/support/intersects.js","../node_modules/@arcgis/core/views/2d/layers/features/support/FeatureSetReaderPBFIndirect.js"],"names":["c","o","constructor","e","s","this","_canCacheExpressionValue","_sourceInfo","_bitsets","computed","getBitset","createBitset","invalidate","clear","a","r","t","_schema","i","console","debug","targets","name","attributes","n","d","type","push","_createArcadeComputedField","_createLabelArcadeComputedField","_computedFields","Promise","all","some","expression","referencesScale","_statisticFields","setComputedAttributes","has","set","_evaluateField","resultType","setComputedNumericAtIndex","fieldIndex","setComputedStringAtIndex","spatialReference","fieldsIndex","valueExpression","createLabelFunction","label","builder","readArcadeFeature","evaluate","referencesGeometry","$feature","getLogger","warn","$view","scale","h","I","u","getObjectId","getAttributes","readAttributes","getAttribute","readAttribute","cloneWithGeometry","getGeometry","readHydratedGeometry","getCentroid","readCentroid","l","super","featureAdapter","events","_featureSetsByInstance","Map","_objectIdToDisplayId","_spatialIndexInvalid","_indexSearchCache","_index","minX","_storage","getXMin","minY","getYMin","maxX","getXMax","maxY","getYMax","mode","forEach","readGeometry","isPoint","lengths","reduce","length","featureCount","vertexCount","ringCount","hasInstance","onTileData","addOrUpdate","attachStorage","getCursor","next","getDisplayId","instance","_insertFeature","emit","search","_rebuildIndex","id","find","tileId","readers","_searchIndex","bounds","getInstanceId","get","from","enqueue","insert","getIndex","createDisplayId","setDisplayId","setInstanceId","remove","delete","releaseDisplayId","removeAtIndex","isEmpty","_lookupFeature","forEachUnsafe","_getFeatureSet","setIndex","forEachInBounds","lookupFeatureByDisplayId","forEachBounds","sweepFeatures","unsetAttributeData","sweepFeatureSets","lookupObjectId","lookupDisplayId","lookupByDisplayIdUnsafe","setBounds","load","size","_start","maxSize","_buffer","Array","dequeue","peek","j","esriSRUnit_Meter","esriSRUnit_Kilometer","esriSRUnit_Foot","esriSRUnit_StatuteMile","esriSRUnit_NauticalMile","esriSRUnit_USNauticalMile","U","Object","freeze","M","F","G","N","esriGeometryPoint","f","esriGeometryPolyline","g","esriGeometryPolygon","S","esriGeometryMultipoint","R","O","hasZ","hasM","J","m","geometry","p","y","async","P","outFields","orderByFields","groupByFieldsForStatistics","outStatistics","trim","onStatisticField","outSR","Z","where","test","distance","units","fromJSON","then","w","geodesicBuffer","x","b","spatialRel","toJSON","z","B","JSON","parse","stringify","E","field","_geometryBounds","_idToVisibility","_serviceInfo","_hash","check","_applyFilter","_resetAllHiddenIds","update","show","hide","setKnownIds","setTrue","Set","_","createQuery","timeExtent","objectIds","_setGeometryFilter","_setIdFilter","_setAttributeFilter","_setTimeFilter","_clause","WhereClause","create","isStandardized","error","testFeature","_idsToShow","_idsToHide","hiddenIds","_spatialQueryOperator","geometryType","_timeOperator","timeInfo","_filterByGeometry","_filterById","_filterByTime","_filterByExpression","startTimeField","endTimeField","Number","POSITIVE_INFINITY","NEGATIVE_INFINITY","isNaN","Math","min","max","start","end","coords","esriSpatialRelIntersects","esriSpatialRelContains","esriSpatialRelCrosses","esriSpatialRelDisjoint","esriSpatialRelEnvelopeIntersects","esriSpatialRelIndexIntersects","esriSpatialRelOverlaps","esriSpatialRelTouches","esriSpatialRelWithin","esriSpatialRelRelation","esriGeometryEnvelope","v","resolve","bind","query","rings","createInstance","_currentIndex","_reader","_indices","copy","getSize","_nextIndex","_getExists","setArcadeSpatialReference","hasFeatures","exceededTransferLimit","getStorage","getComputedNumeric","getComputedNumericAtIndex","setComputedNumeric","getComputedString","getComputedStringAtIndex","setComputedString","transform","joinAttributes","hasField","setField","keys","castToText","getQuantizationTransform","getAttributeHash","getGroupId","setGroupId","getXHydrated","getYHydrated","getX","getY","readLegacyFeature","readOptimizedFeature","readLegacyPointGeometry","readLegacyGeometry","readLegacyCentroid","readGeometryArea","readUnquantizedGeometry","_readAttribute","Error","_readAttributes"],"mappings":"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","file":"static/js/140.bf7e7846.chunk.js","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport e from\"../../../../core/has.js\";import{isNone as s}from\"../../../../core/maybe.js\";import{diff as t,hasDiff as i}from\"../../../../core/accessorSupport/diffUtils.js\";import{createRendererExpression as a}from\"../../../../support/arcadeOnDemand.js\";import r from\"../../arcade/callExpressionWithCursor.js\";const c=import(\"../../../../layers/support/labelFormatUtils.js\");class o{constructor(e,s){this._canCacheExpressionValue=!1,this._sourceInfo=e,this._bitsets={computed:s.getBitset(s.createBitset())}}invalidate(){this._bitsets.computed.clear()}async updateSchema(a,r){const c=t(this._schema,r);if(this._schema=r,!r||s(c)||!i(c,\"attributes\"))return;e(\"esri-2d-update-debug\")&&console.debug(\"Applying Update - Store:\",c),this._bitsets.computed.clear(),a.targets[r.name]=!0;const o=r.attributes,n=[],d=[];for(const e in o){const s=o[e];switch(s.type){case\"field\":break;case\"expression\":n.push(this._createArcadeComputedField(s));break;case\"label-expression\":n.push(this._createLabelArcadeComputedField(s));break;case\"statistic\":d.push(s)}}this._computedFields=await Promise.all(n),this._canCacheExpressionValue=!this._computedFields.some((e=>\"expression\"===e.type&&e.expression.referencesScale())),this._statisticFields=d}setComputedAttributes(e,s,t,i){const a=this._bitsets.computed;if(!this._canCacheExpressionValue||!a.has(t)){a.set(t);for(const a of this._computedFields){const r=this._evaluateField(s,a,i);switch(a.resultType){case\"numeric\":e.setComputedNumericAtIndex(t,a.fieldIndex,r);break;case\"string\":e.setComputedStringAtIndex(t,a.fieldIndex,r)}}}}async _createArcadeComputedField(e){const s=this._sourceInfo.spatialReference,t=this._sourceInfo.fieldsIndex;return{...e,expression:await a(e.valueExpression,s,t)}}async _createLabelArcadeComputedField(e){const s=this._sourceInfo.spatialReference,t=this._sourceInfo.fieldsIndex,{createLabelFunction:i}=await c,a=await i(e.label,t,s);return{...e,builder:a}}_evaluateField(e,s,t){switch(s.type){case\"label-expression\":{const t=e.readArcadeFeature();return s.builder.evaluate(t)||\"\"}case\"expression\":{const{expression:i}=s;return r(i,e,{$view:{scale:t}})}}}}export{o as Store2D};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport e from\"../../../core/Logger.js\";function r(r,a,t){r.referencesGeometry();const n=a.readArcadeFeature();try{return r.evaluate({...t,$feature:n})}catch(o){return e.getLogger(\"esri.views.2d.support.arcadeOnDemand\").warn(\"Feature arcade evaluation failed:\",o),null}}export{r as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport t from\"../../../../core/CircularArray.js\";import e from\"../../../../core/Evented.js\";import\"../../../../core/has.js\";import{isNone as s,isSome as a,unwrap as r}from\"../../../../core/maybe.js\";import{r as n}from\"../../../../chunks/rbush.js\";import{fromRect as i}from\"../../../../geometry/support/aaBoundingBox.js\";import{Store2D as o}from\"./Store2D.js\";import{FeatureSetReaderIndirect as d}from\"./support/FeatureSetReaderPBFIndirect.js\";function h(t,e){return t<<16|e}function c(t){return(4294901760&t)>>>16}function I(t){return 65535&t}const u={getObjectId:t=>t.getObjectId(),getAttributes:t=>t.readAttributes(),getAttribute:(t,e)=>t.readAttribute(e),cloneWithGeometry:(t,e)=>t,getGeometry:t=>t.readHydratedGeometry(),getCentroid:(t,e)=>t.readCentroid()};class l extends o{constructor(s,a,r){super(s,a),this.featureAdapter=u,this.events=new e,this._featureSetsByInstance=new Map,this._objectIdToDisplayId=new Map,this._spatialIndexInvalid=!0,this._indexSearchCache=new t(50),this._index=n(9,(t=>({minX:this._storage.getXMin(t),minY:this._storage.getYMin(t),maxX:this._storage.getXMax(t),maxY:this._storage.getYMax(t)}))),this._storage=a,this.mode=r}get storage(){return this._storage}get storeStatistics(){let t=0,e=0,s=0;return this.forEach((a=>{const r=a.readGeometry();r&&(e+=r.isPoint?1:r.lengths.reduce(((t,e)=>t+e),0),s+=r.isPoint?1:r.lengths.length,t+=1)})),{featureCount:t,vertexCount:e,ringCount:s}}hasInstance(t){return this._featureSetsByInstance.has(t)}onTileData(t,e){if(s(e.addOrUpdate))return e;if(e.addOrUpdate.attachStorage(this._storage),\"snapshot\"===this.mode){const s=e.addOrUpdate.getCursor();for(;s.next();){const e=s.getDisplayId();this.setComputedAttributes(this._storage,s,e,t.scale)}return e}this._featureSetsByInstance.set(e.addOrUpdate.instance,e.addOrUpdate);const a=e.addOrUpdate.getCursor();for(;a.next();)this._insertFeature(a,t.scale);return this._spatialIndexInvalid=!0,this.events.emit(\"changed\"),e}search(t){this._rebuildIndex();const e=t.id,s=this._indexSearchCache.find((t=>t.tileId===e));if(a(s))return s.readers;const r=new Map,n=this._searchIndex(t.bounds),i=[];for(const a of n){const t=this._storage.getInstanceId(a),e=c(t),s=I(t);r.has(e)||r.set(e,[]);r.get(e).push(s)}return r.forEach(((t,e)=>{const s=this._featureSetsByInstance.get(e);i.push(d.from(s,t))})),this._indexSearchCache.enqueue({tileId:e,readers:i}),i}insert(t){const e=t.getCursor(),s=this._storage;for(;e.next();){var a;const t=h(e.instance,e.getIndex()),r=e.getObjectId(),n=null!=(a=this._objectIdToDisplayId.get(r))?a:this._storage.createDisplayId();e.setDisplayId(n),s.setInstanceId(n,t),this._objectIdToDisplayId.set(r,n)}this._featureSetsByInstance.set(t.instance,t),this._spatialIndexInvalid=!0}remove(t){const e=this._objectIdToDisplayId.get(t);if(!e)return;const s=this._storage.getInstanceId(e),a=I(s),r=c(s),n=this._featureSetsByInstance.get(r);this._objectIdToDisplayId.delete(t),this._storage.releaseDisplayId(e),n.removeAtIndex(a),n.isEmpty&&this._featureSetsByInstance.delete(r),this._spatialIndexInvalid=!0}forEach(t){this._objectIdToDisplayId.forEach((e=>{const s=this._storage.getInstanceId(e),a=this._lookupFeature(s);t(a)}))}forEachUnsafe(t){this._objectIdToDisplayId.forEach((e=>{const s=this._storage.getInstanceId(e),a=c(s),r=I(s),n=this._getFeatureSet(a);n.setIndex(r),t(n)}))}forEachInBounds(t,e){const s=this._searchIndex(t);for(const a of s){const t=this.lookupFeatureByDisplayId(a,this._storage);e(r(t))}}forEachBounds(t,e,s){this._rebuildIndex();const a=[0,0,0,0];for(const r of t){if(!r.readGeometry())continue;const t=r.getDisplayId();a[0]=this._storage.getXMin(t),a[1]=this._storage.getYMin(t),a[2]=this._storage.getXMax(t),a[3]=this._storage.getYMax(t),e(i(s,a))}}sweepFeatures(t,e,s){this._spatialIndexInvalid=!0,this._objectIdToDisplayId.forEach(((a,r)=>{t.has(a)||(e.releaseDisplayId(a),s&&s.unsetAttributeData(a),this._objectIdToDisplayId.delete(r))})),this.events.emit(\"changed\")}sweepFeatureSets(t){this._spatialIndexInvalid=!0,this._featureSetsByInstance.forEach(((e,s)=>{t.has(s)||this._featureSetsByInstance.delete(s)}))}lookupObjectId(t,e){const a=this.lookupFeatureByDisplayId(t,e);return s(a)?null:a.getObjectId()}lookupDisplayId(t){return this._objectIdToDisplayId.get(t)}lookupFeatureByDisplayId(t,e){const s=e.getInstanceId(t);return this._lookupFeature(s)}lookupByDisplayIdUnsafe(t){const e=this._storage.getInstanceId(t),s=c(e),a=I(e),r=this._getFeatureSet(s);return r?(r.setIndex(a),r):null}_insertFeature(t,e){const s=this._storage,a=t.getObjectId(),r=h(t.instance,t.getIndex());s.getInstanceId(t.getDisplayId());let n=this._objectIdToDisplayId.get(a);n||(n=s.createDisplayId(),this._objectIdToDisplayId.set(a,n),this._spatialIndexInvalid=!0),t.setDisplayId(n),s.setInstanceId(n,r),this.setComputedAttributes(s,t,n,e)}_searchIndex(t){this._rebuildIndex();const e={minX:t[0],minY:t[1],maxX:t[2],maxY:t[3]};return this._index.search(e)}_rebuildIndex(){if(!this._spatialIndexInvalid)return;const t=[];\"snapshot\"===this.mode?this._featureSetsByInstance.forEach((e=>{const s=e.getCursor();for(;s.next();){const e=s.getDisplayId();this._storage.setBounds(e,s)&&t.push(e)}})):this._objectIdToDisplayId.forEach((e=>{const s=this._storage.getInstanceId(e);this._storage.setBounds(e,this._lookupFeature(s))&&t.push(e)})),this._index.clear(),this._index.load(t),this._indexSearchCache.clear(),this._spatialIndexInvalid=!1}_lookupFeature(t){const e=c(t),s=I(t),a=this._getFeatureSet(e);if(!a)return null;const r=a.getCursor();return r.setIndex(s),r}_getFeatureSet(t){return this._featureSetsByInstance.get(t)}}export{l as FeatureStore2D,u as featureAdapter};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport{isSome as t}from\"./maybe.js\";class s{constructor(t){this.size=0,this._start=0,this.maxSize=t,this._buffer=new Array(t)}get entries(){return this._buffer}enqueue(t){if(this.size===this.maxSize){const s=this._buffer[this._start];return this._buffer[this._start]=t,this._start=(this._start+1)%this.maxSize,s}return this._buffer[(this._start+this.size++)%this.maxSize]=t,null}dequeue(){if(0===this.size)return null;const t=this._buffer[this._start];return this._buffer[this._start]=null,this.size--,this._start=(this._start+1)%this.maxSize,t}peek(){return 0===this.size?null:this._buffer[this._start]}find(s){if(0===this.size)return null;for(const e of this._buffer)if(t(e)&&s(e))return e;return null}clear(s){let e=this.dequeue();for(;t(e);)s&&s(e),e=this.dequeue()}}export{s as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport{JSONMap as e}from\"../../../core/jsonMap.js\";import{isNone as t,isSome as r}from\"../../../core/maybe.js\";import{getUnitString as i}from\"../../../core/unitUtils.js\";import{getGeometryExtent as o}from\"../../../geometry/support/extentUtils.js\";import{fromJSON as n}from\"../../../geometry/support/jsonUtils.js\";import{normalizeCentralMeridian as s}from\"../../../geometry/support/normalizeUtils.js\";import{isGeographic as l,isWebMercator as a,WGS84 as m}from\"../../../geometry/support/spatialReferenceUtils.js\";import{getCentroidOptimizedGeometry as c}from\"../centroid.js\";import{quantizeOptimizedGeometry as u,convertToPoint as f,generalizeOptimizedGeometry as p,removeZMValues as y,convertToPolyline as g,convertToPolygon as S,convertToMultipoint as R}from\"../featureConversionUtils.js\";import d from\"../OptimizedGeometry.js\";import{checkProjectionSupport as h,project as w}from\"./projectionSupport.js\";const j=new e({esriSRUnit_Meter:\"meters\",esriSRUnit_Kilometer:\"kilometers\",esriSRUnit_Foot:\"feet\",esriSRUnit_StatuteMile:\"miles\",esriSRUnit_NauticalMile:\"nautical-miles\",esriSRUnit_USNauticalMile:\"us-nautical-miles\"}),U=Object.freeze({}),M=new d,F=new d,G=new d,N={esriGeometryPoint:f,esriGeometryPolyline:g,esriGeometryPolygon:S,esriGeometryMultipoint:R};function O(e,r,i,o=e.hasZ,n=e.hasM){if(t(r))return null;const s=e.hasZ&&o,l=e.hasM&&n;if(i){const t=u(G,r,e.hasZ,e.hasM,\"esriGeometryPoint\",i,o,n);return f(t,s,l)}return f(r,s,l)}function _(e,t,r){return\"esriGeometryPolygon\"===e.geometryType&&t&&(t.centroid||t.geometry)?(t.centroid||(t.centroid=c(new d,t.geometry,e.hasZ,e.hasM)),O(e,t.centroid,r)):null}function J(e,i,o,n,s,l,a=i,m=o){const c=i&&a,f=o&&m,g=r(n)?\"coords\"in n?n:n.geometry:null;if(t(g))return null;if(s){let t=p(F,g,i,o,e,s,a,m);return l&&(t=u(G,t,c,f,e,l)),N[e](t,c,f)}if(l){const t=u(G,g,i,o,e,l,a,m);return N[e](t,c,f)}return y(M,g,i,o,a,m),N[e](M,c,f)}async function P(e,t,r){const{outFields:i,orderByFields:o,groupByFieldsForStatistics:n,outStatistics:s}=e;if(i)for(let l=0;l<i.length;l++)i[l]=i[l].trim();if(o)for(let l=0;l<o.length;l++)o[l]=o[l].trim();if(n)for(let l=0;l<n.length;l++)n[l]=n[l].trim();if(s)for(let l=0;l<s.length;l++)s[l].onStatisticField&&(s[l].onStatisticField=s[l].onStatisticField.trim());return e.geometry&&!e.outSR&&(e.outSR=e.geometry.spatialReference),Z(e,t,r)}async function v(e,t,r){return Z(e,t,r)}async function Z(e,r,i){if(!e)return null;let{where:l}=e;if(e.where=l=l&&l.trim(),(!l||/^1 *= *1$/.test(l)||r&&r===l)&&(e.where=null),!e.geometry)return e;let a=await b(e);if(e.distance=0,e.units=null,\"esriSpatialRelEnvelopeIntersects\"===e.spatialRel){const{spatialReference:t}=e.geometry;a=o(a),a.spatialReference=t}e.geometry=a,await h(a.spatialReference,i);const m=(await s(n(a)))[0];if(t(m))throw U;const c=m.toJSON(),u=await w(c,c.spatialReference,i);if(!u)throw U;return u.spatialReference=i,e.geometry=u,e}async function b(e){const{geometry:t,distance:r,units:o}=e;if(null==r||\"vertexAttributes\"in t)return t;const n=t.spatialReference,s=o?j.fromJSON(o):i(n),c=n&&(l(n)||a(n))?t:await h(n,m).then((()=>w(t,m)));return(await x())(c.spatialReference,c,r,s)}async function x(){return(await import(\"../../../geometry/geometryEngineJSON.js\")).geodesicBuffer}function z(e){return e&&B in e?JSON.parse(JSON.stringify(e,E)):e}const B=\"_geVersion\",E=(e,t)=>e!==B?t:void 0;export{U as QUERY_ENGINE_EMPTY_RESULT,z as cleanFromGeometryEngine,_ as getCentroid,J as getGeometry,v as normalizeFilter,P as normalizeQuery,Z as normalizeQueryLike,O as transformCentroid};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport e from\"../../../../../core/Error.js\";import r from\"../../../../../core/Logger.js\";const t=r.getLogger(\"esri.views.2d.layers.features.support.whereUtils\"),a={getAttribute:(e,r)=>e.field(r)};async function s(r,s){const n=await import(\"../../../../../core/sql/WhereClause.js\");try{const o=n.WhereClause.create(r,s);if(!o.isStandardized){const r=new e(\"mapview - bad input\",\"Unable to apply filter's definition expression, as expression is not standardized.\",o);t.error(r)}return e=>{const r=e.readArcadeFeature();return o.testFeature(r,a)}}catch(o){return t.warn(\"mapview-bad-where-clause\",\"Encountered an error when evaluating where clause\",r),e=>!0}}export{s as createWhereClause};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport t from\"../../../core/Error.js\";import e from\"../../../core/Logger.js\";import{isSome as i}from\"../../../core/maybe.js\";import{create as s}from\"../../../geometry/support/aaBoundingRect.js\";import{getBoundsXY as r}from\"../../../geometry/support/boundsUtils.js\";import{getSpatialQueryOperator as o}from\"./spatialQuerySupport.js\";import{getTimeOperator as h}from\"./timeSupport.js\";import{normalizeQueryLike as a}from\"./utils.js\";import l from\"../../../rest/support/Query.js\";import{featureAdapter as n}from\"../../../views/2d/layers/features/FeatureStore2D.js\";import{createWhereClause as d}from\"../../../views/2d/layers/features/support/whereUtils.js\";const m=e.getLogger(\"esri.views.2d.layers.features.controllers.FeatureFilter\"),_=1,u=2;class p{constructor(t){this._geometryBounds=s(),this._idToVisibility=new Map,this._serviceInfo=t}get hash(){return this._hash}check(t){return this._applyFilter(t)}clear(){const t=this._resetAllHiddenIds();return this.update(),{show:t,hide:[]}}invalidate(){this._idToVisibility.forEach(((t,e)=>{this._idToVisibility.set(e,0)}))}setKnownIds(t){for(const e of t)this._idToVisibility.set(e,_)}setTrue(t){const e=[],i=[],s=new Set(t);return this._idToVisibility.forEach(((t,r)=>{const o=!!(this._idToVisibility.get(r)&_),h=s.has(r);!o&&h?e.push(r):o&&!h&&i.push(r),this._idToVisibility.set(r,h?_|u:0)})),{show:e,hide:i}}createQuery(){const{geometry:t,spatialRel:e,where:i,timeExtent:s,objectIds:r}=this;return l.fromJSON({geometry:t,spatialRel:e,where:i,timeExtent:s,objectIds:r})}async update(t,e){this._hash=JSON.stringify(t);const i=await a(t,null,e);await Promise.all([this._setGeometryFilter(i),this._setIdFilter(i),this._setAttributeFilter(i),this._setTimeFilter(i)])}async _setAttributeFilter(t){if(!t||!t.where)return this._clause=null,void(this.where=null);this._clause=await d(t.where,this._serviceInfo.fieldsIndex),this.where=t.where}_setIdFilter(t){this._idsToShow=t&&t.objectIds&&new Set(t.objectIds),this._idsToHide=t&&t.hiddenIds&&new Set(t.hiddenIds),this.objectIds=t&&t.objectIds}async _setGeometryFilter(t){if(!t||!t.geometry)return this._spatialQueryOperator=null,this.geometry=null,void(this.spatialRel=null);const e=t.geometry,i=t.spatialRel||\"esriSpatialRelIntersects\",s=await o(i,e,this._serviceInfo.geometryType,this._serviceInfo.hasZ,this._serviceInfo.hasM);r(this._geometryBounds,e),this._spatialQueryOperator=s,this.geometry=e,this.spatialRel=i}_setTimeFilter(e){if(this.timeExtent=this._timeOperator=null,e&&e.timeExtent)if(this._serviceInfo.timeInfo)this.timeExtent=e.timeExtent,this._timeOperator=h(this._serviceInfo.timeInfo,e.timeExtent,n);else{const i=new t(\"feature-layer-view:time-filter-not-available\",\"Unable to apply time filter, as layer doesn't have time metadata.\",e.timeExtent);m.error(i)}}_applyFilter(t){return this._filterByGeometry(t)&&this._filterById(t)&&this._filterByTime(t)&&this._filterByExpression(t)}_filterByExpression(t){return!this.where||this._clause(t)}_filterById(t){return(!this._idsToHide||!this._idsToHide.size||!this._idsToHide.has(t.getObjectId()))&&(!this._idsToShow||!this._idsToShow.size||this._idsToShow.has(t.getObjectId()))}_filterByGeometry(t){if(!this.geometry)return!0;const e=t.readHydratedGeometry();return!!e&&this._spatialQueryOperator(e)}_filterByTime(t){return!i(this._timeOperator)||this._timeOperator(t)}_resetAllHiddenIds(){const t=[];return this._idToVisibility.forEach(((e,i)=>{e&_||(this._idToVisibility.set(i,_),t.push(i))})),t}}export{p as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nfunction t(t,n){if(!t)return null;const e=n.featureAdapter,{startTimeField:u,endTimeField:l}=t;let r=Number.POSITIVE_INFINITY,i=Number.NEGATIVE_INFINITY;if(u&&l)n.forEach((t=>{const n=e.getAttribute(t,u),o=e.getAttribute(t,l);null==n||isNaN(n)||(r=Math.min(r,n)),null==o||isNaN(o)||(i=Math.max(i,o))}));else{const t=u||l;n.forEach((n=>{const u=e.getAttribute(n,t);null==u||isNaN(u)||(r=Math.min(r,u),i=Math.max(i,u))}))}return{start:r,end:i}}function n(t,n,r){if(!n||!t)return null;const{startTimeField:i,endTimeField:o}=t;if(!i&&!o)return null;const{start:s,end:a}=n;return null===s&&null===a?null:void 0===s&&void 0===a?l():i&&o?e(r,i,o,s,a):u(r,i||o,s,a)}function e(t,n,e,u,l){return null!=u&&null!=l?r=>{const i=t.getAttribute(r,n),o=t.getAttribute(r,e);return(null==i||i<=l)&&(null==o||o>=u)}:null!=u?n=>{const l=t.getAttribute(n,e);return null==l||l>=u}:null!=l?e=>{const u=t.getAttribute(e,n);return null==u||u<=l}:void 0}function u(t,n,e,u){return null!=e&&null!=u&&e===u?u=>t.getAttribute(u,n)===e:null!=e&&null!=u?l=>{const r=t.getAttribute(l,n);return r>=e&&r<=u}:null!=e?u=>t.getAttribute(u,n)>=e:null!=u?e=>t.getAttribute(e,n)<=u:void 0}function l(){return()=>!1}export{t as getTimeExtent,n as getTimeOperator};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nfunction n(n,t){return n?t?4:3:t?3:2}function t(n,t,r,e){return o(n,t,r,e.coords[0],e.coords[1])}function r(t,r,e,c,u,f){const s=n(u,f),{coords:i,lengths:l}=c;if(!l)return!1;for(let n=0,d=0;n<l.length;n++,d+=s)if(!o(t,r,e,i[d],i[d+1]))return!1;return!0}function o(t,r,o,c,u){if(!t)return!1;const f=n(r,o),{coords:s,lengths:i}=t;let l=!1,d=0;for(const n of i)l=e(l,s,f,d,n,c,u),d+=n*f;return l}function e(n,t,r,o,e,c,u){let f=n,s=o;for(let i=o,l=o+e*r;i<l;i+=r){s=i+r,s===l&&(s=o);const n=t[i],e=t[i+1],d=t[s],g=t[s+1];(e<u&&g>=u||g<u&&e>=u)&&n+(u-e)/(g-e)*(d-n)<c&&(f=!f)}return f}export{o as polygonContainsCoords,r as polygonContainsMultipoint,t as polygonContainsPoint};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport e from\"../../../core/Error.js\";import{extentContainsPoint as r,extentContainsMultipoint as t}from\"../../../geometry/support/contains.js\";import{getExtentIntersector as i}from\"../../../geometry/support/intersects.js\";import{isPolygon as s,isExtent as o,getJsonType as n}from\"../../../geometry/support/jsonUtils.js\";import{isValid as l}from\"../../../geometry/support/spatialReferenceUtils.js\";import{polygonContainsPoint as a,polygonContainsMultipoint as p}from\"../contains.js\";import{convertFromPolygon as m}from\"../featureConversionUtils.js\";import u from\"../OptimizedGeometry.js\";import{checkProjectionSupport as y}from\"./projectionSupport.js\";import{getGeometry as f}from\"./utils.js\";const c=\"feature-store:unsupported-query\",R={esriSpatialRelIntersects:\"intersects\",esriSpatialRelContains:\"contains\",esriSpatialRelCrosses:\"crosses\",esriSpatialRelDisjoint:\"disjoint\",esriSpatialRelEnvelopeIntersects:\"intersects\",esriSpatialRelIndexIntersects:null,esriSpatialRelOverlaps:\"overlaps\",esriSpatialRelTouches:\"touches\",esriSpatialRelWithin:\"within\",esriSpatialRelRelation:null},S={spatialRelationship:{esriSpatialRelIntersects:!0,esriSpatialRelContains:!0,esriSpatialRelWithin:!0,esriSpatialRelCrosses:!0,esriSpatialRelDisjoint:!0,esriSpatialRelTouches:!0,esriSpatialRelOverlaps:!0,esriSpatialRelEnvelopeIntersects:!0,esriSpatialRelIndexIntersects:!1,esriSpatialRelRelation:!1},queryGeometry:{esriGeometryPoint:!0,esriGeometryMultipoint:!0,esriGeometryPolyline:!0,esriGeometryPolygon:!0,esriGeometryEnvelope:!0},layerGeometry:{esriGeometryPoint:!0,esriGeometryMultipoint:!0,esriGeometryPolyline:!0,esriGeometryPolygon:!0,esriGeometryEnvelope:!1}};function G(e){return!0===S.spatialRelationship[e]}function g(e){return!0===S.queryGeometry[n(e)]}function j(e){return!0===S.layerGeometry[e]}function h(){return import(\"../../../geometry/geometryEngineJSON.js\")}function v(e,n,l,y,c){if(s(n)&&\"esriGeometryPoint\"===l&&(\"esriSpatialRelIntersects\"===e||\"esriSpatialRelContains\"===e)){const e=m(new u,n,!1,!1);return Promise.resolve((r=>a(e,!1,!1,r)))}if(s(n)&&\"esriGeometryMultipoint\"===l){const r=m(new u,n,!1,!1);if(\"esriSpatialRelContains\"===e)return Promise.resolve((e=>p(r,!1,!1,e,y,c)))}if(o(n)&&\"esriGeometryPoint\"===l&&(\"esriSpatialRelIntersects\"===e||\"esriSpatialRelContains\"===e))return Promise.resolve((e=>r(n,f(l,y,c,e))));if(o(n)&&\"esriGeometryMultipoint\"===l&&\"esriSpatialRelContains\"===e)return Promise.resolve((e=>t(n,f(l,y,c,e))));if(o(n)&&\"esriSpatialRelIntersects\"===e){const e=i(l);return Promise.resolve((r=>e(n,f(l,y,c,r))))}return h().then((r=>{const t=r[R[e]].bind(null,n.spatialReference,n);return e=>t(f(l,y,c,e))}))}async function P(r,t,i){const{spatialRel:s,geometry:o}=r;if(o){if(!G(s))throw new e(c,\"Unsupported query spatial relationship\",{query:r});if(l(o.spatialReference)&&l(i)){if(!g(o))throw new e(c,\"Unsupported query geometry type\",{query:r});if(!j(t))throw new e(c,\"Unsupported layer geometry type\",{query:r});if(r.outSR)return y(r.geometry&&r.geometry.spatialReference,r.outSR)}}}function I(e){if(o(e))return!0;if(s(e)){for(const r of e.rings){if(5!==r.length)return!1;if(r[0][0]!==r[1][0]||r[0][0]!==r[4][0]||r[2][0]!==r[3][0]||r[0][1]!==r[3][1]||r[0][1]!==r[4][1]||r[1][1]!==r[2][1])return!1}return!0}return!1}export{I as canQueryWithRBush,P as checkSpatialQuerySupport,v as getSpatialQueryOperator};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport{extentIntersectsExtent as e,getFeatureExtentIntersector as t}from\"./intersectsBase.js\";export{extentIntersectsExtent,extentIntersectsMultipoint,extentIntersectsPoint,extentIntersectsPolygon,extentIntersectsPolyline,getFeatureExtentIntersector,isSelfIntersecting,segmentIntersects}from\"./intersectsBase.js\";function n(n){return\"mesh\"===n?e:t(n)}export{n as getExtentIntersector};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport{FeatureSetReader as e}from\"./FeatureSetReader.js\";class r extends e{constructor(r,t){super(e.createInstance()),this._currentIndex=-1,this._reader=r,this._indices=t}static from(e,t){return new r(e.copy(),t)}get hasNext(){return this._currentIndex+1<this._indices.length}getSize(){return this._indices.length}getCursor(){return this.copy()}copy(){const e=new r(this._reader.copy(),this._indices);return e._currentIndex=this._currentIndex,e}next(){for(;this._nextIndex()&&!this._reader._getExists(););return this._currentIndex<this._indices.length}_nextIndex(){return++this._currentIndex<this._indices.length&&(this._reader.setIndex(this._indices[this._currentIndex]),!0)}setArcadeSpatialReference(e){this._reader.setArcadeSpatialReference(e)}attachStorage(e){this._reader.attachStorage(e)}get geometryType(){return this._reader.geometryType}get hasFeatures(){return this._reader.hasFeatures}get exceededTransferLimit(){return this._reader.exceededTransferLimit}get hasZ(){return this._reader.hasZ}get hasM(){return this._reader.hasM}getStorage(){return this._reader.getStorage()}getComputedNumeric(e){return this._reader.getComputedNumericAtIndex(0)}setComputedNumeric(e,r){return this._reader.setComputedNumericAtIndex(r,0)}getComputedString(e){return this._reader.getComputedStringAtIndex(0)}setComputedString(e,r){return this._reader.setComputedStringAtIndex(0,r)}getComputedNumericAtIndex(e){return this._reader.getComputedNumericAtIndex(e)}setComputedNumericAtIndex(e,r){this._reader.setComputedNumericAtIndex(e,r)}getComputedStringAtIndex(e){return this._reader.getComputedStringAtIndex(e)}setComputedStringAtIndex(e,r){return this._reader.setComputedStringAtIndex(e,r)}transform(e,r,t,d){const a=this.copy();return a._reader=this._reader.transform(e,r,t,d),a}readAttribute(e,r=!1){return this._reader.readAttribute(e,r)}readAttributes(){return this._reader.readAttributes()}joinAttributes(e){return this._reader.joinAttributes(e)}readArcadeFeature(){return this._reader.readArcadeFeature()}geometry(){return this._reader.geometry()}field(e){return this.readAttribute(e,!0)}hasField(e){return this._reader.hasField(e)}setField(e,r){return this._reader.setField(e,r)}keys(){return this._reader.keys()}castToText(){return this._reader.castToText()}getQuantizationTransform(){return this._reader.getQuantizationTransform()}getAttributeHash(){return this._reader.getAttributeHash()}getObjectId(){return this._reader.getObjectId()}getDisplayId(){return this._reader.getDisplayId()}setDisplayId(e){return this._reader.setDisplayId(e)}getGroupId(){return this._reader.getGroupId()}setGroupId(e){return this._reader.setGroupId(e)}getXHydrated(){return this._reader.getXHydrated()}getYHydrated(){return this._reader.getYHydrated()}getX(){return this._reader.getX()}getY(){return this._reader.getY()}setIndex(e){return this._reader.setIndex(e)}getIndex(){return this._reader.getIndex()}readLegacyFeature(){return this._reader.readLegacyFeature()}readOptimizedFeature(){return this._reader.readOptimizedFeature()}readLegacyPointGeometry(){return this._reader.readLegacyPointGeometry()}readLegacyGeometry(){return this._reader.readLegacyGeometry()}readLegacyCentroid(){return this._reader.readLegacyCentroid()}readGeometryArea(){return this._reader.readGeometryArea()}readUnquantizedGeometry(){return this._reader.readUnquantizedGeometry()}readHydratedGeometry(){return this._reader.readHydratedGeometry()}readGeometry(){return this._reader.readGeometry()}readCentroid(){return this._reader.readCentroid()}_readAttribute(e,r){throw new Error(\"Error: Should not be called. Underlying _reader should be used instead\")}_readAttributes(){throw new Error(\"Error: Should not be called. Underlying _reader should be used instead\")}}export{r as FeatureSetReaderIndirect};\n"],"sourceRoot":""}