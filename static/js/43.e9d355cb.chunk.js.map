{"version":3,"sources":["../node_modules/@arcgis/core/geometry/support/meshUtils/loadGLTFMesh.js","../node_modules/@arcgis/core/chunks/vec2f64.js","../node_modules/@arcgis/core/chunks/vec4f64.js","../node_modules/@arcgis/core/core/VectorStack.js","../node_modules/@arcgis/core/geometry/support/vectorStacks.js","../node_modules/@arcgis/core/geometry/support/lineSegment.js","../node_modules/@arcgis/core/core/ObjectStack.js","../node_modules/@arcgis/core/geometry/support/triangle.js","../node_modules/@arcgis/core/views/3d/webgl-engine/lib/geometryDataUtils.js","../node_modules/@arcgis/core/geometry/support/buffer/types.js"],"names":["async","G","t","e","r","o","I","resolveFile","busy","request","s","a","i","responseType","signal","n","data","K","R","model","lods","shift","Map","u","textures","forEach","set","f","wrap","Y","parameters","Q","materials","$","tt","color","opacity","emissiveFactor","et","c","colorTexture","textureColor","get","normalTexture","textureNormal","emissiveColor","emissiveTexture","textureEmissive","occlusionTexture","textureOcclusion","alphaMode","X","alphaCutoff","doubleSided","metallic","metallicFactor","roughness","roughnessFactor","metallicRoughnessTexture","textureMetallicRoughness","H","l","tangent","normal","texCoord0","attributes","position","parts","count","writeIndex","vertexAttributes","B","p","d","g","x","b","components","P","J","typedBuffer","uv","F","transform","spatialReference","m","j","slice","y","L","dstIndex","A","U","_","z","elementCount","T","V","h","k","v","fromTypedArray","typedBufferStride","C","N","w","M","D","O","S","E","W","indices","primitiveType","length","push","faces","material","clone","trustSourceNormals","horizontal","Z","vertical","q","Math","min","Float64Array","Object","freeze","__proto__","create","fromValues","fromArray","createView","zeros","ones","unitX","unitY","ZEROS","ONES","UNIT_X","UNIT_Y","unitZ","unitW","UNIT_Z","UNIT_W","constructor","this","itemByteSize","itemCreate","buffers","items","itemsPerBuffer","itemsPtr","ceil","tickHandle","before","reset","destroy","remove","floor","ArrayBuffer","pop","size","createVec2f64","createVec3f64","createVec4f64","createMat3f64","createMat4f64","createQuatf64","origin","vector","direction","tA","pB","distance2","pA","abs","tB","allocator","grow","max","p0","p1","p2","Uint32Array","Uint16Array","buffer"],"mappings":"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","file":"static/js/43.e9d355cb.chunk.js","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport t from\"../../../Color.js\";import e from\"../../../request.js\";import{unwrap as r,applySome as o,isSome as n}from\"../../../core/maybe.js\";import{a as s}from\"../../../chunks/mat3.js\";import{c as a}from\"../../../chunks/mat3f64.js\";import{f as i}from\"../../../chunks/vec3f64.js\";import{f as u}from\"../../../chunks/vec4f64.js\";import l from\"../MeshComponent.js\";import c from\"../MeshMaterialMetallicRoughness.js\";import f from\"../MeshTexture.js\";import m from\"../MeshVertexAttributes.js\";import{BufferViewVec3f64 as p,BufferViewVec3f as d,BufferViewVec4f as g,BufferViewVec4u8 as x,BufferViewVec2f as b,BufferViewVec4u16 as h,BufferViewVec3u8 as v,BufferViewVec3u16 as w}from\"../buffer/BufferView.js\";import{t as j,a as y,s as C,b as M}from\"../../../chunks/vec32.js\";import{t as A,s as T,a as k}from\"../../../chunks/vec42.js\";import{createBuffer as B}from\"../buffer/utils.js\";import{georeferenceByTransform as F}from\"./georeference.js\";import{DefaultLoadingContext as I}from\"../../../views/3d/glTF/DefaultLoadingContext.js\";import{load as R}from\"../../../views/3d/glTF/loader.js\";import{triangleFanToTriangles as E,triangleStripToTriangles as S,trianglesToTriangles as D}from\"../../../views/3d/glTF/internal/indexUtils.js\";import{generateIndexArray as O}from\"../../../views/3d/webgl-engine/lib/geometryDataUtils.js\";import{COLOR_GAMMA as q}from\"../../../views/3d/webgl-engine/materials/DefaultMaterial_COLOR_GAMMA.js\";import{f as L,c as N}from\"../../../chunks/vec33.js\";import{f as U,c as V}from\"../../../chunks/vec43.js\";import{n as _,f as z}from\"../../../chunks/vec22.js\";async function G(t,e,r){const o=new I(K(r)),s=(await R(o,e,r,!0)).model,a=s.lods.shift(),i=new Map,u=new Map;s.textures.forEach(((t,e)=>i.set(e,Q(t)))),s.materials.forEach(((t,e)=>u.set(e,H(t,i))));const l=P(a);for(const n of a.parts)J(l,n,u);const{position:c,normal:f,tangent:p,color:d,texCoord0:g}=l.vertexAttributes,x={position:c.typedBuffer,normal:n(f)?f.typedBuffer:null,tangent:n(p)?p.typedBuffer:null,uv:n(g)?g.typedBuffer:null,color:n(d)?d.typedBuffer:null},b=F(x,t,r);return{transform:b.transform,components:l.components,spatialReference:t.spatialReference,vertexAttributes:new m({position:b.vertexAttributes.position,normal:b.vertexAttributes.normal,tangent:b.vertexAttributes.tangent,color:x.color,uv:x.uv})}}function K(t){return null!=t&&t.resolveFile?{busy:!1,request:async(r,o,s)=>{const a=t.resolveFile(r),i=\"image\"===o?\"image\":\"binary\"===o?\"array-buffer\":\"json\";return(await e(a,{responseType:i,signal:n(s)?s.signal:null})).data}}:null}function P(t){let e=0;const r={color:!1,tangent:!1,normal:!1,texCoord0:!1};for(const{attributes:{position:o,normal:n,color:s,tangent:a,texCoord0:i}}of t.parts)e+=o.count,n&&(r.normal=!0),s&&(r.color=!0),a&&(r.tangent=!0),i&&(r.texCoord0=!0);return{writeIndex:0,vertexAttributes:{position:B(p,e),normal:r.normal?B(d,e):null,tangent:r.tangent?B(g,e):null,color:r.color?B(x,e):null,texCoord0:r.texCoord0?B(b,e):null},components:[]}}function Q(t){return new f({data:t.data,wrap:Y(t.parameters.wrap)})}function H(e,n){const s=new t(tt(e.color,e.opacity)),a=e.emissiveFactor?new t(et(e.emissiveFactor)):null;return new c({color:s,colorTexture:r(o(e.textureColor,(t=>n.get(t)))),normalTexture:r(o(e.textureNormal,(t=>n.get(t)))),emissiveColor:a,emissiveTexture:r(o(e.textureEmissive,(t=>n.get(t)))),occlusionTexture:r(o(e.textureOcclusion,(t=>n.get(t)))),alphaMode:X(e.alphaMode),alphaCutoff:e.alphaCutoff,doubleSided:e.doubleSided,metallic:e.metallicFactor,roughness:e.roughnessFactor,metallicRoughnessTexture:r(o(e.textureMetallicRoughness,(t=>n.get(t))))})}function J(t,e,r){const{position:o,normal:i,tangent:u,color:c,texCoord0:f}=t.vertexAttributes,m=t.writeIndex,p=e.attributes.position.count;if(j(o.slice(m,p),e.attributes.position,e.transform),n(e.attributes.normal)&&n(i)){const t=s(a(),e.transform);y(i.slice(m,p),e.attributes.normal,t)}else n(i)&&L(i,0,0,1,{dstIndex:m,count:p});if(n(e.attributes.tangent)&&n(u)){const t=s(a(),e.transform);A(u.slice(m,p),e.attributes.tangent,t)}else n(u)&&U(u,0,0,1,1,{dstIndex:m,count:p});if(n(e.attributes.texCoord0)&&n(f)?_(f.slice(m,p),e.attributes.texCoord0):n(f)&&z(f,0,0,{dstIndex:m,count:p}),n(e.attributes.color)&&n(c)){const t=e.attributes.color,r=c.slice(m,p);if(4===t.elementCount)t instanceof g?T(r,t,255):t instanceof x?V(r,t):t instanceof h&&k(r,t,8);else{U(r,255,255,255,255);const e=v.fromTypedArray(r.typedBuffer,r.typedBufferStride);t instanceof d?C(e,t,255):t instanceof v?N(e,t):t instanceof w&&M(e,t,8)}}else n(c)&&U(c.slice(m,p),255,255,255,255);const b=W(e.indices||p,e.primitiveType);if(m)for(let n=0;n<b.length;n++)b[n]+=m;t.components.push(new l({faces:b,material:r.get(e.material).clone(),trustSourceNormals:!0})),t.writeIndex+=p}function W(t,e){switch(e){case 4:return D(t,O);case 5:return S(t);case 6:return E(t)}}function X(t){switch(t){case\"OPAQUE\":return\"opaque\";case\"MASK\":return\"mask\";case\"BLEND\":return\"blend\"}}function Y(t){return{horizontal:Z(t.s),vertical:Z(t.t)}}function Z(t){switch(t){case 33071:return\"clamp\";case 33648:return\"mirror\";case 10497:return\"repeat\"}}function $(t){return t**(1/q)*255}function tt(t,e){return u($(t[0]),$(t[1]),$(t[2]),e)}function et(t){return i($(t[0]),$(t[1]),$(t[2]))}export{G as loadGLTFMesh};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nfunction n(){return[0,0]}function r(n){return[n[0],n[1]]}function t(n,r){return[n,r]}function e(r){const t=n(),e=Math.min(2,r.length);for(let n=0;n<e;++n)t[n]=r[n];return t}function a(n,r){return new Float64Array(n,r,2)}function u(){return n()}function o(){return t(1,1)}function s(){return t(1,0)}function c(){return t(0,1)}const f=u(),i=o(),l=s(),_=c();var O=Object.freeze({__proto__:null,create:n,clone:r,fromValues:t,fromArray:e,createView:a,zeros:u,ones:o,unitX:s,unitY:c,ZEROS:f,ONES:i,UNIT_X:l,UNIT_Y:_});export{i as O,l as U,f as Z,n as a,r as b,a as c,e as d,c as e,t as f,_ as g,o,s as u,O as v,u as z};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nfunction n(){return[0,0,0,0]}function t(n){return[n[0],n[1],n[2],n[3]]}function r(n,t,r,e){return[n,t,r,e]}function e(t){const r=n(),e=Math.min(4,t.length);for(let n=0;n<e;++n)r[n]=t[n];return r}function u(n,t){return new Float64Array(n,t,4)}function a(){return n()}function o(){return r(1,1,1,1)}function s(){return r(1,0,0,0)}function c(){return r(0,1,0,0)}function i(){return r(0,0,1,0)}function f(){return r(0,0,0,1)}const _=a(),l=o(),N=s(),U=c(),I=i(),O=f();var T=Object.freeze({__proto__:null,create:n,clone:t,fromValues:r,fromArray:e,createView:u,zeros:a,ones:o,unitX:s,unitY:c,unitZ:i,unitW:f,ZEROS:_,ONES:l,UNIT_X:N,UNIT_Y:U,UNIT_Z:I,UNIT_W:O});export{l as O,N as U,_ as Z,u as a,e as b,n as c,t as d,c as e,r as f,i as g,f as h,U as i,I as j,O as k,o,s as u,T as v,a as z};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport{nullifyNonnullableForDispose as t}from\"./maybe.js\";import e from\"./nextTick.js\";import{a as s}from\"../chunks/mat3f64.js\";import{a as i}from\"../chunks/mat4f64.js\";import{c as r}from\"../chunks/quatf64.js\";import{c as f}from\"../chunks/vec2f64.js\";import{b as h}from\"../chunks/vec3f64.js\";import{a as m}from\"../chunks/vec4f64.js\";class a{constructor(t,s,i){this.itemByteSize=t,this.itemCreate=s,this.buffers=[],this.items=[],this.itemsPerBuffer=0,this.itemsPtr=0,this.itemsPerBuffer=Math.ceil(i/this.itemByteSize),this.tickHandle=e.before((()=>this.reset()))}destroy(){this.tickHandle&&(this.tickHandle.remove(),this.tickHandle=t(this.tickHandle)),this.itemsPtr=0,this.items=t(this.items),this.buffers=t(this.buffers)}get(){0===this.itemsPtr&&e((()=>{}));const t=Math.floor(this.itemsPtr/this.itemsPerBuffer);for(;this.buffers.length<=t;){const t=new ArrayBuffer(this.itemsPerBuffer*this.itemByteSize);for(let e=0;e<this.itemsPerBuffer;++e)this.items.push(this.itemCreate(t,e*this.itemByteSize));this.buffers.push(t)}return this.items[this.itemsPtr++]}reset(){const t=2*(Math.floor(this.itemsPtr/this.itemsPerBuffer)+1);for(;this.buffers.length>t;)this.buffers.pop(),this.items.length=this.buffers.length*this.itemsPerBuffer;this.itemsPtr=0}static createVec2f64(t=c){return new a(16,f,t)}static createVec3f64(t=c){return new a(24,h,t)}static createVec4f64(t=c){return new a(32,m,t)}static createMat3f64(t=c){return new a(72,s,t)}static createMat4f64(t=c){return new a(128,i,t)}static createQuatf64(t=c){return new a(32,r,t)}get test(){return{size:this.buffers.length*this.itemsPerBuffer*this.itemByteSize}}}const c=4096;export{a as VectorStack};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport{VectorStack as e}from\"../../core/VectorStack.js\";const t=e.createVec2f64(),c=e.createVec3f64(),r=e.createVec4f64(),a=e.createMat3f64(),f=e.createMat4f64(),o=e.createQuatf64();export{a as sm3d,f as sm4d,o as sq4d,t as sv2d,c as sv3d,r as sv4d};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport{clamp as t}from\"../../core/mathUtils.js\";import{ObjectStack as r}from\"../../core/ObjectStack.js\";import{g as n,f as o,d as i,a as e,b as c,p as u,h as s}from\"../../chunks/vec3.js\";import{a,c as g}from\"../../chunks/vec3f64.js\";import{sv3d as f}from\"./vectorStacks.js\";function v(t){return t?{origin:a(t.origin),vector:a(t.vector)}:{origin:g(),vector:g()}}function p(t,r){const n=x.get();return n.origin=t,n.vector=r,n}function h(t,r=v()){return m(t.origin,t.vector,r)}function m(t,r,o=v()){return n(o.origin,t),n(o.vector,r),o}function l(t,r,i=v()){return n(i.origin,t),o(i.vector,r,t),i}function b(r,n){const c=o(f.get(),n,r.origin),u=i(r.vector,c),s=i(r.vector,r.vector),a=t(u/s,0,1),g=o(f.get(),e(f.get(),r.vector,a),c);return i(g,g)}function M(t,r){return Math.sqrt(b(t,r))}function d(t,r,n){return A(t,r,0,1,n)}function j(t,r,n){return c(n,t.origin,e(n,t.vector,r))}function A(r,n,s,a,g){const{vector:v,origin:p}=r,h=o(f.get(),n,p),m=i(v,h)/u(v);return e(g,v,t(m,s,a)),c(g,g,r.origin)}function B(t,r){if(q(t,p(r.origin,r.direction),!1,w)){const{tA:r,pB:n,distance2:o}=w;if(r>=0&&r<=1)return o;if(r<0)return s(t.origin,n);if(r>1)return s(c(f.get(),t.origin,t.vector),n)}return null}function k(t,r,o){return!!q(t,r,!0,w)&&(n(o,w.pA),!0)}function S(t,r){return q(t,r,!0,w)?w.distance2:null}function q(r,n,o,i){const e=1e-6,u=r.origin,a=c(f.get(),u,r.vector),g=n.origin,v=c(f.get(),g,n.vector),p=f.get(),h=f.get();if(p[0]=u[0]-g[0],p[1]=u[1]-g[1],p[2]=u[2]-g[2],h[0]=v[0]-g[0],h[1]=v[1]-g[1],h[2]=v[2]-g[2],Math.abs(h[0])<e&&Math.abs(h[1])<e&&Math.abs(h[2])<e)return!1;const m=f.get();if(m[0]=a[0]-u[0],m[1]=a[1]-u[1],m[2]=a[2]-u[2],Math.abs(m[0])<e&&Math.abs(m[1])<e&&Math.abs(m[2])<e)return!1;const l=p[0]*h[0]+p[1]*h[1]+p[2]*h[2],b=h[0]*m[0]+h[1]*m[1]+h[2]*m[2],M=p[0]*m[0]+p[1]*m[1]+p[2]*m[2],d=h[0]*h[0]+h[1]*h[1]+h[2]*h[2],j=(m[0]*m[0]+m[1]*m[1]+m[2]*m[2])*d-b*b;if(Math.abs(j)<e)return!1;let A=(l*b-M*d)/j,B=(l+b*A)/d;o&&(A=t(A,0,1),B=t(B,0,1));const k=f.get(),S=f.get();return k[0]=u[0]+A*m[0],k[1]=u[1]+A*m[1],k[2]=u[2]+A*m[2],S[0]=g[0]+B*h[0],S[1]=g[1]+B*h[1],S[2]=g[2]+B*h[2],i.tA=A,i.tB=B,i.pA=k,i.pB=S,i.distance2=s(k,S),!0}const w={tA:0,tB:0,pA:g(),pB:g(),distance2:0},x=new r((()=>({origin:null,vector:null})));export{S as closestLineSegmentDistance2,k as closestLineSegmentPoint,B as closestRayDistance2,h as copy,v as create,M as distance,b as distance2,l as fromPoints,m as fromValues,j as pointAt,d as projectPoint,A as projectPointClamp,p as wrap};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport{nullifyNonnullableForDispose as t}from\"./maybe.js\";import i from\"./nextTick.js\";class s{constructor(t){this.allocator=t,this.items=[],this.itemsPtr=0,this.tickHandle=i.before((()=>this.reset())),this.grow()}destroy(){this.tickHandle&&(this.tickHandle.remove(),this.tickHandle=t(this.tickHandle)),this.items=t(this.items)}get(){return 0===this.itemsPtr&&i((()=>{})),this.itemsPtr===this.items.length&&this.grow(),this.items[this.itemsPtr++]}reset(){const t=Math.min(3*Math.max(8,this.itemsPtr),this.itemsPtr+3*e);this.items.length=Math.min(t,this.items.length),this.itemsPtr=0}grow(){for(let t=0;t<Math.max(8,Math.min(this.items.length,e));t++)this.items.push(this.allocator())}}const e=1024;export default s;export{s as ObjectStack};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport{ObjectStack as t}from\"../../core/ObjectStack.js\";import{d as n}from\"../../chunks/vec2.js\";import{g as r,f as e,c as p,d as o,a as s,b as c,l as u}from\"../../chunks/vec3.js\";import{a as i,c as f}from\"../../chunks/vec3f64.js\";import{distance2 as a,fromValues as g,create as m}from\"./lineSegment.js\";import{sv3d as l}from\"./vectorStacks.js\";function j(t){return t?{p0:i(t.p0),p1:i(t.p1),p2:i(t.p2)}:{p0:f(),p1:f(),p2:f()}}function h(t,n,r){const e=x.get();return e.p0=t,e.p1=n,e.p2=r,e}function k(t,n=j()){return d(t.p0,t.p1,t.p2,n)}function d(t,n,e,p=j()){return r(p.p0,t),r(p.p1,n),r(p.p2,e),p}function v(t,n){const r=t.p0,s=t.p1,c=t.p2,u=e(l.get(),s,r),i=e(l.get(),c,s),f=e(l.get(),r,c),m=e(l.get(),n,r),j=e(l.get(),n,s),h=e(l.get(),n,c),k=p(u,u,f),d=o(p(l.get(),u,k),m),v=o(p(l.get(),i,k),j),S=o(p(l.get(),f,k),h);if(d>0&&v>0&&S>0){const t=o(k,m);return t*t/o(k,k)}const b=a(g(r,u,q.get()),n),w=a(g(s,i,q.get()),n),M=a(g(c,f,q.get()),n);return Math.min(b,w,M)}function S(t,n,r){const e=1e-5,{direction:p,origin:o}=n,{p0:u,p1:i,p2:f}=t,a=i[0]-u[0],g=i[1]-u[1],m=i[2]-u[2],l=f[0]-u[0],j=f[1]-u[1],h=f[2]-u[2],k=p[1]*h-j*p[2],d=p[2]*l-h*p[0],v=p[0]*j-l*p[1],S=a*k+g*d+m*v;if(S>-e&&S<e)return!1;const b=1/S,w=o[0]-u[0],M=o[1]-u[1],q=o[2]-u[2],x=b*(w*k+M*d+q*v);if(x<0||x>1)return!1;const O=M*m-g*q,V=q*a-m*w,y=w*g-a*M,z=b*(p[0]*O+p[1]*V+p[2]*y);if(z<0||x+z>1)return!1;if(r){s(r,p,b*(l*O+j*V+h*y)),c(r,o,r)}return!0}function b(t,r,e){const p=n(t,r),o=n(r,e),s=n(e,t),c=(p+o+s)/2,u=c*(c-p)*(c-o)*(c-s);return u<=0?0:Math.sqrt(u)}function w(t){return b(t.p0,t.p1,t.p2)}function M(t,n,r){return e(O,n,t),e(V,r,t),u(p(O,O,V))/2}const q=new t(m),x=new t((()=>({p0:null,p1:null,p2:null}))),O=f(),V=f();export{w as area2d,b as areaPoints2d,M as areaPoints3d,k as copy,j as create,v as distance2,d as fromValues,S as intersectRay,h as wrap};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport{s as t,b as n,a as r,j as e}from\"../../../../chunks/vec3.js\";import{c as o}from\"../../../../chunks/vec3f64.js\";import{areaPoints3d as i}from\"../../../../geometry/support/triangle.js\";let s=(()=>{const t=new Uint32Array(131072);for(let n=0;n<t.length;++n)t[n]=n;return t})();const f=new Uint16Array([0]),c=(()=>{const t=new Uint16Array(65536);for(let n=0;n<t.length;++n)t[n]=n;return t})();function l(t){if(1===t)return f;if(t<c.length)return new Uint16Array(c.buffer,0,t);if(t>s.length){const n=Math.max(2*s.length,t);s=new Uint32Array(n);for(let t=0;t<s.length;t++)s[t]=t}return new Uint32Array(s.buffer,0,t)}function a(t){if(1===t)return new Uint16Array(f);if(t<c.length)return new Uint16Array(c.slice(0,t));if(t>s.length){const n=new Uint32Array(t);for(let t=0;t<n.length;t++)n[t]=t;return n}return new Uint32Array(s.slice(0,t))}function u(e,o,s){if(!e)return!1;const{size:f,data:c}=e;t(s,0,0,0),t(U,0,0,0);let l=0,a=0;for(let u=0;u<o.length-2;u+=3){const e=o[u+0]*f,h=o[u+1]*f,g=o[u+2]*f;t(y,c[e+0],c[e+1],c[e+2]),t(w,c[h+0],c[h+1],c[h+2]),t(A,c[g+0],c[g+1],c[g+2]);const m=i(y,w,A);m?(n(y,y,w),n(y,y,A),r(y,y,1/3*m),n(s,s,y),l+=m):(n(U,U,y),n(U,U,w),n(U,U,A),a+=3)}return(0!==a||0!==l)&&(0!==l?(r(s,s,1/l),!0):0!==a&&(r(s,U,1/a),!0))}function h(n,e,o){if(!n||!e)return!1;const{size:i,data:s}=n;t(o,0,0,0);let f=-1,c=0;for(let t=0;t<e.length;t++){const n=e[t]*i;f!==n&&(o[0]+=s[n+0],o[1]+=s[n+1],o[2]+=s[n+2],c++),f=n}return c>1&&r(o,o,1/c),c>0}function g(o,i,s,f){if(!o)return!1;const{size:c,data:l}=o;t(f,0,0,0),t(U,0,0,0);let a=0,u=0;const h=i?i.length-1:l.length/c-1,g=h+(s?2:0);for(let t=0;t<g;t+=2){const o=t<h?t:h,s=t<h?t+1:0,g=(i?i[o]:o)*c,A=(i?i[s]:s)*c;y[0]=l[g+0],y[1]=l[g+1],y[2]=l[g+2],w[0]=l[A+0],w[1]=l[A+1],w[2]=l[A+2],r(y,n(y,y,w),.5);const m=e(y,w);m>0?(n(f,f,r(y,y,m)),a+=m):(n(U,U,y),u++)}return 0!==a?(r(f,f,1/a),!0):0!==u&&(r(f,U,1/u),!0)}const y=o(),w=o(),A=o(),U=o();export{g as computeAttachmentOriginLines,h as computeAttachmentOriginPoints,u as computeAttachmentOriginTriangles,l as generateDefaultIndexArray,a as generateIndexArray};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport\"../../../core/has.js\";function e(e){switch(e){case\"u8\":return 1;case\"u16\":return 2;case\"u32\":return 4;case\"i8\":return 1;case\"i16\":return 2;case\"i32\":case\"f32\":return 4;case\"f64\":return 8;default:return}}function r(e){switch(e){case\"u8\":case\"u16\":case\"u32\":return!1;case\"i8\":case\"i16\":case\"i32\":case\"f32\":case\"f64\":return!0;default:return}}function u(e){switch(e){case\"u8\":case\"u16\":case\"u32\":case\"i8\":case\"i16\":case\"i32\":return!0;case\"f32\":case\"f64\":return!1;default:return}}function c(e){switch(e){case\"u8\":return 255;case\"u16\":return 65535;case\"u32\":return 4294967295;case\"i8\":return 127;case\"i16\":return 32767;case\"i32\":return 2147483647;case\"f32\":return 3402823e32;case\"f64\":return 179769e303;default:return}}export{e as elementTypeSize,u as isInteger,r as isSigned,c as maximumValue};\n"],"sourceRoot":""}