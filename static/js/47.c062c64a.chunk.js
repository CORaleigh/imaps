(this.webpackJsonpimaps=this.webpackJsonpimaps||[]).push([[47],{107:function(e,t,n){"use strict";n.d(t,"a",(function(){return v})),n.d(t,"b",(function(){return x})),n.d(t,"c",(function(){return O})),n.d(t,"d",(function(){return w})),n.d(t,"e",(function(){return R})),n.d(t,"f",(function(){return l})),n.d(t,"g",(function(){return U})),n.d(t,"h",(function(){return G})),n.d(t,"i",(function(){return H})),n.d(t,"j",(function(){return W})),n.d(t,"k",(function(){return X})),n.d(t,"l",(function(){return Y})),n.d(t,"m",(function(){return J})),n.d(t,"n",(function(){return D})),n.d(t,"o",(function(){return o})),n.d(t,"p",(function(){return z})),n.d(t,"q",(function(){return A})),n.d(t,"r",(function(){return s})),n.d(t,"s",(function(){return I})),n.d(t,"t",(function(){return B})),n.d(t,"u",(function(){return c})),n.d(t,"v",(function(){return T})),n.d(t,"w",(function(){return E})),n.d(t,"x",(function(){return r})),n.d(t,"y",(function(){return N})),n.d(t,"z",(function(){return i})),n.d(t,"A",(function(){return F})),n.d(t,"B",(function(){return h})),n.d(t,"C",(function(){return g})),n.d(t,"D",(function(){return p})),n.d(t,"E",(function(){return y})),n.d(t,"F",(function(){return m})),n.d(t,"G",(function(){return d})),n.d(t,"H",(function(){return C})),n.d(t,"I",(function(){return b})),n.d(t,"J",(function(){return M})),n.d(t,"K",(function(){return P})),n.d(t,"L",(function(){return S})),n.d(t,"M",(function(){return f})),n.d(t,"N",(function(){return u})),n.d(t,"O",(function(){return L})),n.d(t,"P",(function(){return a})),n.d(t,"Q",(function(){return j})),n.d(t,"R",(function(){return _})),n.d(t,"S",(function(){return k}));const r=1e-30,i=4294967295,a=512,o=8,c=29,s=24,u=8,l={metrics:{width:15,height:17,left:0,top:-7,advance:14}},f=0,d=0,m=0,h=1,g=2,p=3,y=4,C=12,b=5,M=6,P=5,S=6,O=0,v=1,w=2,R=3,x=4,T=2,I=1,A=2,z=4,L=1.05,B=6,k=5,_=6,j=1.15,F=2,D=8,N=500,E=10,U=2,W=0,H=1,X=4,Y=8,G=4,J=1},1129:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(381),i=n(433),a=n(635),o=n(346);class c{constructor(e){this._resourceManager=e}dispose(){this._rasterizationCanvas=null}rasterizeJSONResource(e,t,n){if(this._rasterizationCanvas||(this._rasterizationCanvas=document.createElement("canvas")),"simple-fill"===e.type||"esriSFS"===e.type){const[n,i,a]=r.d.rasterizeSimpleFill(this._rasterizationCanvas,e.style,t);return{size:[i,a],image:new Uint32Array(n.buffer),sdf:!1,simplePattern:!0,anchorX:0,anchorY:0}}if("simple-line"===e.type||"esriSLS"===e.type||"line"===e.type&&e.dashTemplate){let t,n;if("simple-line"===e.type||"esriSLS"===e.type)switch(t=Object(r.e)(e.style,e.cap),e.cap){case"butt":n="Butt";break;case"square":n="Square";break;default:n="Round"}else t=e.dashTemplate,n=e.cim.capStyle;const[i,a,o]=r.d.rasterizeSimpleLine(t,n);return{size:[a,o],image:new Uint32Array(i.buffer),sdf:!0,simplePattern:!0,anchorX:0,anchorY:0}}let o,c,s;if("simple-marker"===e.type||"esriSMS"===e.type||"line-marker"===e.type?(o=r.b.fromSimpleMarker(e),s=Object(a.c)(o)):e.cim&&"CIMHatchFill"===e.cim.type?(o=r.b.fromCIMHatchFill(e.cim),c=new i.a(o.frame.xmin,-o.frame.ymax,o.frame.xmax-o.frame.xmin,o.frame.ymax-o.frame.ymin)):e.cim.markerPlacement&&"CIMMarkerPlacementInsidePolygon"===e.cim.markerPlacement.type?(o=r.b.fromCIMInsidePolygon(e.cim),c=new i.a(o.frame.xmin,-o.frame.ymax,o.frame.xmax-o.frame.xmin,o.frame.ymax-o.frame.ymin)):(o=e.cim,s=Object(a.c)(o)),s&&!n){const[e,t,n]=Object(a.a)(s);return e?{size:[t,n],image:new Uint32Array(e.buffer),sdf:!0,simplePattern:!0,anchorX:0,anchorY:0}:null}const[u,l,f,d,m]=r.b.rasterize(this._rasterizationCanvas,o,c,this._resourceManager,!n);return u?{size:[l,f],image:new Uint32Array(u.buffer),sdf:!1,simplePattern:!1,anchorX:d,anchorY:m}:null}rasterizeImageResource(e,t,n,r){this._rasterizationCanvas||(this._rasterizationCanvas=document.createElement("canvas")),this._rasterizationCanvas.width=e,this._rasterizationCanvas.height=t;const i=this._rasterizationCanvas.getContext("2d");n instanceof ImageData?i.putImageData(n,0,0):(n.setAttribute("width",`${e}px`),n.setAttribute("height",`${t}px`),i.drawImage(n,0,0,e,t));const a=i.getImageData(0,0,e,t),c=new Uint8Array(a.data);if(r)for(const o of r)if(o&&o.oldColor&&4===o.oldColor.length&&o.newColor&&4===o.newColor.length){const[e,t,n,r]=o.oldColor,[i,a,s,u]=o.newColor;if(e===i&&t===a&&n===s&&r===u)continue;for(let o=0;o<c.length;o+=4)e===c[o]&&t===c[o+1]&&n===c[o+2]&&r===c[o+3]&&(c[o]=i,c[o+1]=a,c[o+2]=s,c[o+3]=u)}let s;for(let o=0;o<c.length;o+=4)s=c[o+3]/255,c[o]=c[o]*s,c[o+1]=c[o+1]*s,c[o+2]=c[o+2]*s;let u=c,l=e,f=t;const d=512;if(l>=d||f>=d){const n=l/f;n>1?(l=d,f=Math.round(d/n)):(f=d,l=Math.round(d*n)),u=new Uint8Array(4*l*f);const r=new Uint8ClampedArray(u.buffer);Object(o.m)(c,e,t,r,l,f,!1)}return{size:[l,f],image:new Uint32Array(u.buffer),sdf:!1,simplePattern:!1,anchorX:0,anchorY:0}}}},119:function(e,t,n){"use strict";var r,i,a,o,c,s,u,l,f,d,m,h,g,p,y,C,b,M,P,S,O,v,w,R,x,T,I,A,z,L,B,k,_,j,F,D,N,E,U,W,H,X,Y,G,J,q,V,Z,K,Q,$,ee,te,ne,re,ie,ae,oe,ce,se;n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return C})),n.d(t,"c",(function(){return y})),n.d(t,"d",(function(){return r})),n.d(t,"e",(function(){return c})),n.d(t,"f",(function(){return u})),n.d(t,"g",(function(){return l})),n.d(t,"h",(function(){return f})),n.d(t,"i",(function(){return P})),n.d(t,"j",(function(){return S})),n.d(t,"k",(function(){return O})),n.d(t,"l",(function(){return R})),n.d(t,"m",(function(){return I})),n.d(t,"n",(function(){return A})),n.d(t,"o",(function(){return i})),n.d(t,"p",(function(){return F})),n.d(t,"q",(function(){return D})),n.d(t,"r",(function(){return U})),n.d(t,"s",(function(){return G})),n.d(t,"t",(function(){return J})),n.d(t,"u",(function(){return q})),n.d(t,"v",(function(){return V})),n.d(t,"w",(function(){return re})),n.d(t,"x",(function(){return ie})),n.d(t,"y",(function(){return oe})),function(e){e[e.BUTT=0]="BUTT",e[e.ROUND=1]="ROUND",e[e.SQUARE=2]="SQUARE",e[e.UNKNOWN=4]="UNKNOWN"}(r||(r={})),function(e){e[e.BEVEL=0]="BEVEL",e[e.ROUND=1]="ROUND",e[e.MITER=2]="MITER",e[e.UNKNOWN=4]="UNKNOWN"}(i||(i={})),function(e){e[e.SCREEN=0]="SCREEN",e[e.MAP=1]="MAP"}(a||(a={})),function(e){e[e.Tint=0]="Tint",e[e.Ignore=1]="Ignore",e[e.Multiply=99]="Multiply"}(o||(o={})),function(e){e.Both="Both",e.JustBegin="JustBegin",e.JustEnd="JustEnd",e.None="None"}(c||(c={})),function(e){e[e.Mosaic=0]="Mosaic",e[e.Centered=1]="Centered"}(s||(s={})),function(e){e[e.Normal=0]="Normal",e[e.Superscript=1]="Superscript",e[e.Subscript=2]="Subscript"}(u||(u={})),function(e){e[e.MSSymbol=0]="MSSymbol",e[e.Unicode=1]="Unicode"}(l||(l={})),function(e){e[e.Unspecified=0]="Unspecified",e[e.TrueType=1]="TrueType",e[e.PSOpenType=2]="PSOpenType",e[e.TTOpenType=3]="TTOpenType",e[e.Type1=4]="Type1"}(f||(f={})),function(e){e[e.Display=0]="Display",e[e.Map=1]="Map"}(d||(d={})),function(e){e[e.Z=0]="Z",e[e.X=1]="X",e[e.Y=2]="Y"}(m||(m={})),function(e){e[e.XYZ=0]="XYZ",e[e.ZXY=1]="ZXY",e[e.YXZ=2]="YXZ"}(h||(h={})),function(e){e[e.Rectangle=0]="Rectangle",e[e.RoundedRectangle=1]="RoundedRectangle",e[e.Oval=2]="Oval"}(g||(g={})),function(e){e[e.None=0]="None",e[e.Alpha=1]="Alpha",e[e.Screen=2]="Screen",e[e.Multiply=3]="Multiply",e[e.Add=4]="Add"}(p||(p={})),function(e){e[e.TTB=0]="TTB",e[e.RTL=1]="RTL",e[e.BTT=2]="BTT"}(y||(y={})),function(e){e[e.None=0]="None",e[e.SignPost=1]="SignPost",e[e.FaceNearPlane=2]="FaceNearPlane"}(C||(C={})),function(e){e[e.Float=0]="Float",e[e.String=1]="String",e[e.Boolean=2]="Boolean"}(b||(b={})),function(e){e[e.Intersect=0]="Intersect",e[e.Subtract=1]="Subtract"}(M||(M={})),function(e){e.OpenEnded="OpenEnded",e.Block="Block",e.Crossed="Crossed"}(P||(P={})),function(e){e.FullGeometry="FullGeometry",e.PerpendicularFromFirstSegment="PerpendicularFromFirstSegment",e.ReversedFirstSegment="ReversedFirstSegment",e.PerpendicularToSecondSegment="PerpendicularToSecondSegment",e.SecondSegmentWithTicks="SecondSegmentWithTicks",e.DoublePerpendicular="DoublePerpendicular",e.OppositeToFirstSegment="OppositeToFirstSegment",e.TriplePerpendicular="TriplePerpendicular",e.HalfCircleFirstSegment="HalfCircleFirstSegment",e.HalfCircleSecondSegment="HalfCircleSecondSegment",e.HalfCircleExtended="HalfCircleExtended",e.OpenCircle="OpenCircle",e.CoverageEdgesWithTicks="CoverageEdgesWithTicks",e.GapExtentWithDoubleTicks="GapExtentWithDoubleTicks",e.GapExtentMidline="GapExtentMidline",e.Chevron="Chevron",e.PerpendicularWithArc="PerpendicularWithArc",e.ClosedHalfCircle="ClosedHalfCircle",e.TripleParallelExtended="TripleParallelExtended",e.ParallelWithTicks="ParallelWithTicks",e.Parallel="Parallel",e.PerpendicularToFirstSegment="PerpendicularToFirstSegment",e.ParallelOffset="ParallelOffset",e.OffsetOpposite="OffsetOpposite",e.OffsetSame="OffsetSame",e.CircleWithArc="CircleWithArc",e.DoubleJog="DoubleJog",e.PerpendicularOffset="PerpendicularOffset",e.LineExcludingLastSegment="LineExcludingLastSegment",e.MultivertexArrow="MultivertexArrow",e.CrossedArrow="CrossedArrow",e.ChevronArrow="ChevronArrow",e.ChevronArrowOffset="ChevronArrowOffset",e.PartialFirstSegment="PartialFirstSegment",e.Arch="Arch",e.CurvedParallelTicks="CurvedParallelTicks",e.Arc90Degrees="Arc90Degrees"}(S||(S={})),function(e){e.Mitered="Mitered",e.Bevelled="Bevelled",e.Rounded="Rounded",e.Square="Square",e.TrueBuffer="TrueBuffer"}(O||(O={})),function(e){e.ClosePath="ClosePath",e.ConvexHull="ConvexHull",e.RectangularBox="RectangularBox"}(v||(v={})),function(e){e.BeginningOfLine="BeginningOfLine",e.EndOfLine="EndOfLine"}(w||(w={})),function(e){e.Mitered="Mitered",e.Bevelled="Bevelled",e.Rounded="Rounded",e.Square="Square"}(R||(R={})),function(e){e.Fast="Fast",e.Accurate="Accurate"}(x||(x={})),function(e){e.BeginningOfLine="BeginningOfLine",e.EndOfLine="EndOfLine"}(T||(T={})),function(e){e.Sinus="Sinus",e.Square="Square",e.Triangle="Triangle",e.Random="Random"}(I||(I={})),function(e){e[e.None=0]="None",e[e.Default=1]="Default",e[e.Force=2]="Force"}(A||(A={})),function(e){e[e.Buffered=0]="Buffered",e[e.Left=1]="Left",e[e.Right=2]="Right",e[e.AlongLine=3]="AlongLine"}(z||(z={})),function(e){e[e.Linear=0]="Linear",e[e.Rectangular=1]="Rectangular",e[e.Circular=2]="Circular",e[e.Buffered=3]="Buffered"}(L||(L={})),function(e){e[e.Discrete=0]="Discrete",e[e.Continuous=1]="Continuous"}(B||(B={})),function(e){e[e.AcrossLine=0]="AcrossLine",e[e.AloneLine=1]="AloneLine"}(k||(k={})),function(e){e[e.Left=0]="Left",e[e.Right=1]="Right",e[e.Center=2]="Center",e[e.Justify=3]="Justify"}(_||(_={})),function(e){e[e.Base=0]="Base",e[e.MidPoint=1]="MidPoint",e[e.ThreePoint=2]="ThreePoint",e[e.FourPoint=3]="FourPoint",e[e.Underline=4]="Underline",e[e.CircularCW=5]="CircularCW",e[e.CircularCCW=6]="CircularCCW"}(j||(j={})),function(e){e.Butt="Butt",e.Round="Round",e.Square="Square"}(F||(F={})),function(e){e.NoConstraint="NoConstraint",e.HalfPattern="HalfPattern",e.HalfGap="HalfGap",e.FullPattern="FullPattern",e.FullGap="FullGap",e.Custom="Custom"}(D||(D={})),function(e){e[e.None=-1]="None",e[e.Custom=0]="Custom",e[e.Circle=1]="Circle",e[e.OpenArrow=2]="OpenArrow",e[e.ClosedArrow=3]="ClosedArrow",e[e.Diamond=4]="Diamond"}(N||(N={})),function(e){e[e.ExtraLeading=0]="ExtraLeading",e[e.Multiple=1]="Multiple",e[e.Exact=2]="Exact"}(E||(E={})),function(e){e.Bevel="Bevel",e.Round="Round",e.Miter="Miter"}(U||(U={})),function(e){e[e.Default=0]="Default",e[e.String=1]="String",e[e.Numeric=2]="Numeric"}(W||(W={})),function(e){e[e.InsidePolygon=0]="InsidePolygon",e[e.PolygonCenter=1]="PolygonCenter",e[e.RandomlyInsidePolygon=2]="RandomlyInsidePolygon"}(H||(H={})),function(e){e[e.Tint=0]="Tint",e[e.Replace=1]="Replace",e[e.Multiply=2]="Multiply"}(X||(X={})),function(e){e[e.ClipAtBoundary=0]="ClipAtBoundary",e[e.RemoveIfCenterOutsideBoundary=1]="RemoveIfCenterOutsideBoundary",e[e.DoNotTouchBoundary=2]="DoNotTouchBoundary",e[e.DoNotClip=3]="DoNotClip"}(Y||(Y={})),function(e){e.NoConstraint="NoConstraint",e.WithMarkers="WithMarkers",e.WithFullGap="WithFullGap",e.WithHalfGap="WithHalfGap",e.Custom="Custom"}(G||(G={})),function(e){e.Fixed="Fixed",e.Random="Random",e.RandomFixedQuantity="RandomFixedQuantity"}(J||(J={})),function(e){e.LineMiddle="LineMiddle",e.LineBeginning="LineBeginning",e.LineEnd="LineEnd",e.SegmentMidpoint="SegmentMidpoint"}(q||(q={})),function(e){e.OnPolygon="OnPolygon",e.CenterOfMass="CenterOfMass",e.BoundingBoxCenter="BoundingBoxCenter"}(V||(V={})),function(e){e[e.Low=0]="Low",e[e.Medium=1]="Medium",e[e.High=2]="High"}(Z||(Z={})),function(e){e[e.MarkerCenter=0]="MarkerCenter",e[e.MarkerBounds=1]="MarkerBounds"}(K||(K={})),function(e){e[e.None=0]="None",e[e.PropUniform=1]="PropUniform",e[e.PropNonuniform=2]="PropNonuniform",e[e.DifUniform=3]="DifUniform",e[e.DifNonuniform=4]="DifNonuniform"}(Q||(Q={})),function(e){e.Tube="Tube",e.Strip="Strip",e.Wall="Wall"}($||($={})),function(e){e[e.Random=0]="Random",e[e.Increasing=1]="Increasing",e[e.Decreasing=2]="Decreasing",e[e.IncreasingThenDecreasing=3]="IncreasingThenDecreasing"}(ee||(ee={})),function(e){e[e.Relative=0]="Relative",e[e.Absolute=1]="Absolute"}(te||(te={})),function(e){e[e.Normal=0]="Normal",e[e.LowerCase=1]="LowerCase",e[e.Allcaps=2]="Allcaps"}(ne||(ne={})),function(e){e[e.LTR=0]="LTR",e[e.RTL=1]="RTL"}(re||(re={})),function(e){e.Draft="Draft",e.Picture="Picture",e.Text="Text"}(ie||(ie={})),function(e){e[e.Top=0]="Top",e[e.Center=1]="Center",e[e.Baseline=2]="Baseline",e[e.Bottom=3]="Bottom"}(ae||(ae={})),function(e){e[e.Right=0]="Right",e[e.Upright=1]="Upright"}(oe||(oe={})),function(e){e[e.Small=0]="Small",e[e.Medium=1]="Medium",e[e.Large=2]="Large"}(ce||(ce={})),function(e){e[e.Calm=0]="Calm",e[e.Rippled=1]="Rippled",e[e.Slight=2]="Slight",e[e.Moderate=3]="Moderate"}(se||(se={}))},1247:function(e,t,n){"use strict";n.r(t),n.d(t,"CIMSymbolRasterizer",(function(){return M})),n.d(t,"GeometryStyle",(function(){return r}));var r,i,a=n(105),o=n(103),c=n(91),s=n(102),u=n(155),l=n(97),f=n(509),d=n(606),m=n(1129),h=n(618),g=n(346),p=n(517),y=n(1207);(i=r||(r={})).Legend="legend",i.Preview="preview";const C=(e,t,n)=>{if(e&&e.targetSize){let r;if(n){const t=Math.max(n.frame.xmax-n.frame.xmin,n.frame.ymax-n.frame.ymin);r=e.targetSize/Object(s.g)(t)}else r=e.targetSize/t.referenceSize;return r}return e&&e.scaleFactor?e.scaleFactor:1},b={fill:{legend:{frame:{xmax:15,xmin:0,ymax:15,ymin:0},geometry:{rings:[[[0,15],[15,7.5],[15,0],[0,0],[0,15]]]},canvasPaths:{rings:[[[0,15],[0,0],[15,7.5],[15,15],[0,15]]]}},preview:{frame:{xmax:100,xmin:0,ymax:100,ymin:0},geometry:{rings:[[[0,100],[100,100],[100,0],[0,0],[0,100]]]},canvasPaths:{rings:[[[0,100],[0,0],[100,0],[100,100],[0,100]]]}}},stroke:{legend:{frame:{xmax:24,xmin:0,ymax:2,ymin:-2},geometry:{paths:[[[0,0],[12,0],[24,0]]]},canvasPaths:{paths:[[[0,2],[12,2],[24,2]]]}},preview:{frame:{xmax:100,xmin:0,ymax:2,ymin:-2},geometry:{paths:[[[0,0],[50,0],[100,0]]]},canvasPaths:{paths:[[[0,2],[50,2],[100,2]]]}}}};class M{constructor(e,t){this._spatialReference=e,this._avoidSDF=t,this._resourceCache=new Map,this._pictureMarkerCache=new Map,this._textRasterizer=new h.a,this._cimResourceManager=new d.a,this._rasterizer=new m.a(this._cimResourceManager)}async rasterizeCIMSymbolAsync(e,t,n,r,i,a,o,c){r=r||(t?null!=t.centroid?"esriGeometryPolygon":Object(l.c)(t.geometry):null)||function(e){if(!(e&&e.data&&e.data.symbol))return null;switch(e.data.symbol.type){case"CIMPointSymbol":case"CIMTextSymbol":return"esriGeometryPoint";case"CIMLineSymbol":return"esriGeometryPolyline";case"CIMPolygonSymbol":return"esriGeometryPolygon";default:return null}}(e);const s=await this.analyzeCIMSymbol(e,t?function(e){return(e?Object.keys(e):[]).map((t=>({name:t,alias:t,type:"string"==typeof e[t]?"esriFieldTypeString":"esriFieldTypeDouble"})))}(t.attributes):null,n,r,c);return this.rasterizeCIMSymbol(s,t,r,i,a,o)}async analyzeCIMSymbol(e,t,n,r,i){const a=[],o=t?{geometryType:r,spatialReference:this._spatialReference,fields:t}:null;let s;await Object(f.b)(e.data,o,this._cimResourceManager,a,this._avoidSDF),Object(c.t)(i);for(const c of a)"CIMPictureMarker"!==c.cim.type&&"CIMPictureFill"!==c.cim.type&&"CIMPictureStroke"!==c.cim.type||(s||(s=[]),s.push(this._fetchPictureMarkerResource(c,i))),n&&"text"===c.type&&"string"==typeof c.text&&c.text.indexOf("[")>-1&&(c.text=Object(g.c)(n,c.text,c.cim.textCase));return s&&await Promise.all(s),a}async _fetchPictureMarkerResource(e,t){const n=e.materialHash;if(!this._pictureMarkerCache.get(n)){const r=(await Object(o.default)(e.cim.url,{responseType:"image",signal:t&&t.signal})).data;this._pictureMarkerCache.set(n,r)}}rasterizeCIMSymbol(e,t,n,r,i,a){const o=[];for(const c of e){r&&"function"==typeof r.scaleFactor&&(r.scaleFactor=r.scaleFactor(t,i,a));const e=this._getRasterizedResource(c,t,n,r,i,a);if(!e)continue;let s=0,u=e.anchorX||0,l=e.anchorY||0,f=!1,d=0,m=0;if("esriGeometryPoint"===n){const e=C(r,c,null);if(d=Object(g.d)(c.offsetX,t,i,a)*e||0,m=Object(g.d)(c.offsetY,t,i,a)*e||0,"marker"===c.type)s=Object(g.d)(c.rotation,t,i,a)||0,f=!!c.rotateClockwise&&c.rotateClockwise;else if("text"===c.type){if(s=Object(g.d)(c.angle,t,i,a)||0,void 0!==c.horizontalAlignment)switch(c.horizontalAlignment){case"left":u=-.5;break;case"right":u=.5;break;default:u=0}if(void 0!==c.verticalAlignment)switch(c.verticalAlignment){case"top":l=.5;break;case"bottom":l=-.5;break;case"baseline":l=-.25;break;default:l=0}}}null!=e&&o.push({angle:s,rotateClockWise:f,anchorX:u,anchorY:l,offsetX:d,offsetY:m,rasterizedResource:e})}return this.getSymbolImage(o)}getSymbolImage(e){const t=document.createElement("canvas"),n=t.getContext("2d");let r=0,i=0,a=0,o=0;const c=[];for(let d=0;d<e.length;d++){const t=e[d],u=t.rasterizedResource;if(!u)continue;const l=u.size,f=t.offsetX,m=t.offsetY,h=t.anchorX,g=t.anchorY,p=t.rotateClockWise||!1;let y=t.angle,C=Object(s.g)(f)-l[0]*(.5+h),b=Object(s.g)(m)-l[1]*(.5+g),M=C+l[0],P=b+l[1];if(y){p&&(y=-y);const e=Math.sin(y*Math.PI/180),t=Math.cos(y*Math.PI/180),n=C*t-b*e,r=C*e+b*t,i=C*t-P*e,a=C*e+P*t,o=M*t-P*e,c=M*e+P*t,s=M*t-b*e,u=M*e+b*t;C=Math.min(n,i,o,s),b=Math.min(r,a,c,u),M=Math.max(n,i,o,s),P=Math.max(r,a,c,u)}r=C<r?C:r,i=b<i?b:i,a=M>a?M:a,o=P>o?P:o;const S=n.createImageData(u.size[0],u.size[1]);S.data.set(new Uint8ClampedArray(u.image.buffer));const O={offsetX:f,offsetY:m,rotateClockwise:p,angle:y,rasterizedImage:S,anchorX:h,anchorY:g};c.push(O)}t.width=a-r,t.height=o-i;const u=-r,l=o;for(let d=0;d<c.length;d++){const e=c[d],t=this._imageDataToCanvas(e.rasterizedImage),r=e.rasterizedImage.width,i=e.rasterizedImage.height,a=u-r*(.5+e.anchorX),o=l-i*(.5-e.anchorY);if(e.angle){const r=(360-e.angle)*Math.PI/180;n.save(),n.translate(Object(s.g)(e.offsetX),-Object(s.g)(e.offsetY)),n.translate(u,l),n.rotate(r),n.translate(-u,-l),n.drawImage(t,a,o),n.restore()}else n.drawImage(t,a+Object(s.g)(e.offsetX),o-Object(s.g)(e.offsetY))}const f=new y.a({x:u/t.width-.5,y:l/t.height-.5});return{imageData:0!==t.width&&0!==t.height?n.getImageData(0,0,t.width,t.height):n.createImageData(1,1),anchorPosition:f}}_imageDataToCanvas(e){this._imageDataCanvas||(this._imageDataCanvas=document.createElement("canvas"));const t=this._imageDataCanvas,n=t.getContext("2d");return t.width=e.width,t.height=e.height,n.putImageData(e,0,0),t}_imageTo32Array(e,t,n,r){this._imageDataCanvas||(this._imageDataCanvas=document.createElement("canvas"));const i=this._imageDataCanvas,o=i.getContext("2d");if(i.width=t,i.height=n,o.drawImage(e,0,0,t,n),r){o.save();const i=new a.a(r);o.fillStyle=i.toHex(),o.globalCompositeOperation="multiply",o.fillRect(0,0,t,n),o.globalCompositeOperation="destination-atop",o.drawImage(e,0,0,t,n),o.restore()}return new Uint32Array(o.getImageData(0,0,t,n).data.buffer)}_getRasterizedResource(e,t,n,i,a,o){let c,s,l,f,d=null,m=null;if("esriGeometryPolyline"===n||"esriGeometryPolygon"===n){const f=i&&i.style?i.style:r.Legend,h="esriGeometryPolyline"===n?b.stroke[f]:b.fill[f];if("line"===e.type){if("CIMSolidStroke"!==e.cim.type){if("CIMPictureStroke"===e.cim.type){const n=Object(g.d)(e.width,t,a,o),r=Object(g.d)(e.color,t,a,o),{image:i,width:c,height:s}=this._getPictureResource(e,n,r);return this._rasterizePictureResource(e,i,c,s,h,n)}return null}({analyzedCIM:c,hash:l}=P(e,t,a,o)),s=this._embedCIMLayerInVectorMarker(c,h)}else if("marker"===e.type){if("CIMPictureMarker"===e.cim.type){const n=Object(g.d)(e.size,t,a,o),r=Object(g.d)(e.color,t,a,o),{image:i,width:c,height:s}=this._getPictureResource(e,n,r);return this._rasterizePictureResource(e,i,c,s,h,n)}if("CIMVectorMarker"!==e.cim.type)return null;e.cim.offsetX=Object(g.d)(e.offsetX,t,a,o),e.cim.offsetY=Object(g.d)(e.offsetY,t,a,o),e.cim.rotation=Object(g.d)(e.rotation,t,a,o),e.cim.markerPlacement=e.markerPlacement,({analyzedCIM:c}=P(e,t,a,o)),l=Object(u.b)(JSON.stringify(c)).toString(),s=this._embedCIMLayerInVectorMarker(c,h),d=Object(g.d)(e.size,t,a,o),m=e.path}else{if("text"===e.type)return null;if("fill"===e.type){if("CIMHatchFill"===e.cim.type||"CIMVectorMarker"===e.cim.type||"CIMPictureMarker"===e.cim.type||"CIMPictureFill"===e.cim.type){const n=e.cim.size||e.cim.height;let r,i,s;if("CIMPictureMarker"===e.cim.type||"CIMPictureFill"===e.cim.type)({image:r,width:i,height:s}=this._getPictureResource(e,n,Object(g.d)(e.color,t,a,o)));else{({analyzedCIM:c,hash:l}=P(e,t,a,o));const u=this._rasterizer.rasterizeJSONResource({cim:c,type:e.type,url:e.url,mosaicHash:l,size:n,path:m},1,this._avoidSDF);r=u.image,i=u.size[0],s=u.size[1]}return this._rasterizePictureResource(e,r,i,s,h,null)}if("CIMSolidFill"!==e.cim.type)return null;({analyzedCIM:c,hash:l}=P(e,t,a,o)),s=this._embedCIMLayerInVectorMarker(c,h)}}}else{if("text"===e.type)return f=this._rasterizeTextResource(e,t,i,a,o),f;({analyzedCIM:c,hash:l}=P(e,t,a,o));const n=C(i,e,null);if("CIMPictureMarker"===e.cim.type){const r=Object(g.d)(e.size,t,a,o)*n,{image:i,width:c,height:s}=this._getPictureResource(e,r,Object(g.d)(e.color,t,a,o));return f={image:i,size:[c,s],sdf:!1,simplePattern:!1,anchorX:e.anchorPoint?e.anchorPoint.x:0,anchorY:e.anchorPoint?e.anchorPoint.y:0},f}Object(p.d)(c,n,{preserveOutlineWidth:!1}),s=c}l+=n,i&&(l+=JSON.stringify(i));const h=this._resourceCache;return h.has(l)?h.get(l):(f=this._rasterizer.rasterizeJSONResource({cim:s,type:e.type,url:e.url,mosaicHash:l,size:d,path:m},window.devicePixelRatio||1,this._avoidSDF),h.set(l,f),f)}_rasterizeTextResource(e,t,n,r,i){const a=C(n,e,null),o=Object(g.d)(e.text,t,r,i);if(!o||0===o.length)return null;const c=Object(g.d)(e.fontName,t,r,i),s=Object(g.d)(e.style,t,r,i),u=Object(g.d)(e.weight,t,r,i),l=Object(g.d)(e.decoration,t,r,i),f=Object(g.d)(e.size,t,r,i)*a,d=Object(g.d)(e.horizontalAlignment,t,r,i),m=Object(g.d)(e.verticalAlignment,t,r,i),h=Object(g.b)(Object(g.d)(e.color,t,r,i)),p=Object(g.b)(Object(g.d)(e.outlineColor,t,r,i)),y={color:h,size:f,horizontalAlignment:d,verticalAlignment:m,font:{family:c,style:s,weight:u,decoration:l},halo:{size:Object(g.d)(e.outlineSize,t,r,i)||0,color:p,style:s},pixelRatio:1,premultiplyColors:!this._avoidSDF};return this._textRasterizer.rasterizeText(o,y)}_rasterizePictureResource(e,t,n,r,i,a){const o=document.createElement("canvas"),c=o.getContext("2d");o.height=Object(s.g)(Math.max(i.frame.ymax-i.frame.ymin,a)),o.width=Object(s.g)(i.frame.xmax-i.frame.xmin);const u=c.createImageData(n,r);u.data.set(new Uint8ClampedArray(t.buffer));const f=this._imageDataToCanvas(u),d=c.createPattern(f,"repeat"),m=Math.cos((-e.cim.rotation||0)*Math.PI/180),h=Math.sin((-e.cim.rotation||0)*Math.PI/180);d.setTransform({m11:m,m12:h,m21:-h,m22:m,m41:Object(s.g)(e.cim.offsetX)||0,m42:Object(s.g)(e.cim.offsetY)||0});const g=i.canvasPaths;let p,y,C;Object(l.g)(g)?(p=g.rings,c.fillStyle=d,y=c.fill,C=["evenodd"]):Object(l.h)(g)&&(p=g.paths,c.strokeStyle=d,c.lineWidth=a,y=c.stroke,p[0][0][1]=o.height/2,p[0][1][1]=o.height/2),c.beginPath();for(const l of p){const e=l?l.length:0;if(e>1){let t=l[0];c.moveTo(Object(s.g)(t[0]),Object(s.g)(t[1]));for(let n=1;n<e;++n)t=l[n],c.lineTo(Object(s.g)(t[0]),Object(s.g)(t[1]));c.closePath()}}y.apply(c,C);const b=c.getImageData(0,0,o.width,o.height),M=new Uint8Array(b.data);return{size:[o.width,o.height],image:new Uint32Array(M.buffer),sdf:!1,simplePattern:!1,anchorX:0,anchorY:0}}_getPictureResource(e,t,n){const r=this._pictureMarkerCache.get(e.materialHash);if(!r)return null;const i=r.height/r.width,a=t?i>1?Object(s.g)(t):Object(s.g)(t)/i:r.width,o=t?i>1?Object(s.g)(t)*i:Object(s.g)(t):r.height;return{image:this._imageTo32Array(r,a,o,n),width:a,height:o}}_embedCIMLayerInVectorMarker(e,t){const n=Object(l.g)(t.geometry)?"CIMPolygonSymbol":"CIMLineSymbol",r=t.frame;return{type:"CIMVectorMarker",frame:r,size:r.ymax-r.ymin,markerGraphics:[{type:"CIMMarkerGraphic",geometry:t.geometry,symbol:{type:n,symbolLayers:[e]}}]}}}function P(e,t,n,r){let i,a;return"function"==typeof e.materialHash?(i=(0,e.materialHash)(t,n,r),a=Object(f.a)(e.cim,e.materialOverrides)):(i=e.materialHash,a=e.cim),{analyzedCIM:a,hash:i}}},128:function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return o})),n.d(t,"c",(function(){return i}));const r=new Float32Array(1);new Uint32Array(r.buffer);function i(e){return[255&e,(65280&e)>>>8,(16711680&e)>>>16,(4278190080&e)>>>24]}function a(e,t){return 65535&e|t<<16}function o(e,t,n,r){return 255&e|(255&t)<<8|(255&n)<<16|r<<24}},323:function(e,t,n){"use strict";var r,i;function a(e){switch(e){case"left":return r.Left;case"right":return r.Right;case"center":case"justify":return r.Center}}function o(e){switch(e){case"top":return i.Top;case"middle":return i.Center;case"baseline":return i.Baseline;case"bottom":return i.Bottom}}function c(e){switch(e){case"above-left":case"esriServerPointLabelPlacementAboveLeft":return[r.Right,i.Bottom];case"above-center":case"above-along":case"esriServerPointLabelPlacementAboveCenter":case"esriServerLinePlacementAboveAlong":return[r.Center,i.Bottom];case"above-right":case"esriServerPointLabelPlacementAboveRight":return[r.Left,i.Bottom];case"center-left":case"esriServerPointLabelPlacementCenterLeft":return[r.Right,i.Center];case"center-center":case"center-along":case"esriServerPointLabelPlacementCenterCenter":case"esriServerLinePlacementCenterAlong":case"always-horizontal":case"esriServerPolygonPlacementAlwaysHorizontal":return[r.Center,i.Center];case"center-right":case"esriServerPointLabelPlacementCenterRight":return[r.Left,i.Center];case"below-left":case"esriServerPointLabelPlacementBelowLeft":return[r.Right,i.Top];case"below-center":case"below-along":case"esriServerPointLabelPlacementBelowCenter":case"esriServerLinePlacementBelowAlong":return[r.Center,i.Top];case"below-right":case"esriServerPointLabelPlacementBelowRight":return[r.Left,i.Top];default:return console.debug(`Found invalid placement type ${e}`),[r.Center,i.Center]}}function s(e){switch(e){case r.Right:return-1;case r.Center:return 0;case r.Left:return 1;default:return console.debug(`Found invalid horizontal alignment ${e}`),0}}function u(e){switch(e){case i.Top:return 1;case i.Center:return 0;case i.Bottom:case i.Baseline:return-1;default:return console.debug(`Found invalid vertical alignment ${e}`),0}}function l(e){switch(e){case"left":return r.Left;case"right":return r.Right;case"center":case"justify":return r.Center}}function f(e){switch(e){case"above-along":case"below-along":case"center-along":case"esriServerLinePlacementAboveAlong":case"esriServerLinePlacementBelowAlong":case"esriServerLinePlacementCenterAlong":return!0;default:return!1}}n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return i})),n.d(t,"c",(function(){return c})),n.d(t,"d",(function(){return l})),n.d(t,"e",(function(){return a})),n.d(t,"f",(function(){return s})),n.d(t,"g",(function(){return o})),n.d(t,"h",(function(){return u})),n.d(t,"i",(function(){return f})),function(e){e[e.Left=-1]="Left",e[e.Center=0]="Center",e[e.Right=1]="Right"}(r||(r={})),function(e){e[e.Top=1]="Top",e[e.Center=0]="Center",e[e.Bottom=-1]="Bottom",e[e.Baseline=2]="Baseline"}(i||(i={}))},358:function(e,t,n){"use strict";n.d(t,"a",(function(){return d})),n.d(t,"b",(function(){return l})),n.d(t,"c",(function(){return i})),n.d(t,"d",(function(){return f})),n.d(t,"e",(function(){return a})),n.d(t,"f",(function(){return o})),n.d(t,"g",(function(){return c})),n.d(t,"h",(function(){return s})),n.d(t,"i",(function(){return u}));var r=n(189);function i(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e[4]=0,e[5]=0,e}function a(e,t){const n=t[0],r=t[1],i=t[2],a=t[3],o=t[4],c=t[5];let s=n*a-r*i;return s?(s=1/s,e[0]=a*s,e[1]=-r*s,e[2]=-i*s,e[3]=n*s,e[4]=(i*c-a*o)*s,e[5]=(r*o-n*c)*s,e):null}function o(e,t,n){const r=t[0],i=t[1],a=t[2],o=t[3],c=t[4],s=t[5],u=n[0],l=n[1],f=n[2],d=n[3],m=n[4],h=n[5];return e[0]=r*u+a*l,e[1]=i*u+o*l,e[2]=r*f+a*d,e[3]=i*f+o*d,e[4]=r*m+a*h+c,e[5]=i*m+o*h+s,e}function c(e,t,n){const r=t[0],i=t[1],a=t[2],o=t[3],c=t[4],s=t[5],u=Math.sin(n),l=Math.cos(n);return e[0]=r*l+a*u,e[1]=i*l+o*u,e[2]=r*-u+a*l,e[3]=i*-u+o*l,e[4]=c,e[5]=s,e}function s(e,t,n){const r=t[0],i=t[1],a=t[2],o=t[3],c=t[4],s=t[5],u=n[0],l=n[1];return e[0]=r*u,e[1]=i*u,e[2]=a*l,e[3]=o*l,e[4]=c,e[5]=s,e}function u(e,t,n){const r=t[0],i=t[1],a=t[2],o=t[3],c=t[4],s=t[5],u=n[0],l=n[1];return e[0]=r,e[1]=i,e[2]=a,e[3]=o,e[4]=r*u+a*l+c,e[5]=i*u+o*l+s,e}function l(e,t){const n=Math.sin(t),r=Math.cos(t);return e[0]=r,e[1]=n,e[2]=-n,e[3]=r,e[4]=0,e[5]=0,e}function f(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=t[1],e[4]=0,e[5]=0,e}function d(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e[4]=t[0],e[5]=t[1],e}function m(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e[3]=t[3]-n[3],e[4]=t[4]-n[4],e[5]=t[5]-n[5],e}const h=o,g=m;Object.freeze({__proto__:null,copy:function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e},identity:i,set:function(e,t,n,r,i,a,o){return e[0]=t,e[1]=n,e[2]=r,e[3]=i,e[4]=a,e[5]=o,e},invert:a,determinant:function(e){return e[0]*e[3]-e[1]*e[2]},multiply:o,rotate:c,scale:s,translate:u,fromRotation:l,fromScaling:f,fromTranslation:d,str:function(e){return"mat2d("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+")"},frob:function(e){return Math.sqrt(e[0]**2+e[1]**2+e[2]**2+e[3]**2+e[4]**2+e[5]**2+1)},add:function(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e[3]=t[3]+n[3],e[4]=t[4]+n[4],e[5]=t[5]+n[5],e},subtract:m,multiplyScalar:function(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e[3]=t[3]*n,e[4]=t[4]*n,e[5]=t[5]*n,e},multiplyScalarAndAdd:function(e,t,n,r){return e[0]=t[0]+n[0]*r,e[1]=t[1]+n[1]*r,e[2]=t[2]+n[2]*r,e[3]=t[3]+n[3]*r,e[4]=t[4]+n[4]*r,e[5]=t[5]+n[5]*r,e},exactEquals:function(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]},equals:function(e,t){const n=e[0],i=e[1],a=e[2],o=e[3],c=e[4],s=e[5],u=t[0],l=t[1],f=t[2],d=t[3],m=t[4],h=t[5];return Math.abs(n-u)<=r.a*Math.max(1,Math.abs(n),Math.abs(u))&&Math.abs(i-l)<=r.a*Math.max(1,Math.abs(i),Math.abs(l))&&Math.abs(a-f)<=r.a*Math.max(1,Math.abs(a),Math.abs(f))&&Math.abs(o-d)<=r.a*Math.max(1,Math.abs(o),Math.abs(d))&&Math.abs(c-m)<=r.a*Math.max(1,Math.abs(c),Math.abs(m))&&Math.abs(s-h)<=r.a*Math.max(1,Math.abs(s),Math.abs(h))},mul:h,sub:g})},363:function(e,t,n){"use strict";function r(){const e=new Float32Array(6);return e[0]=1,e[3]=1,e}function i(e,t,n,r){const i=t[r],a=t[r+1];e[r]=n[0]*i+n[2]*a+n[4],e[r+1]=n[1]*i+n[3]*a+n[5]}function a(e,t,n,r=0,a=0,o=2){const c=a||t.length/o;for(let s=r;s<c;s++)i(e,t,n,s*o)}n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return a}));Object.freeze({__proto__:null,create:r,clone:function(e){const t=new Float32Array(6);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t},fromValues:function(e,t,n,r,i,a){const o=new Float32Array(6);return o[0]=e,o[1]=t,o[2]=n,o[3]=r,o[4]=i,o[5]=a,o},createView:function(e,t){return new Float32Array(e,t,6)},transform:i,transformMany:a})}}]);
//# sourceMappingURL=47.c062c64a.chunk.js.map