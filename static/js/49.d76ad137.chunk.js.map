{"version":3,"sources":["../node_modules/@arcgis/core/symbols/cim/Rasterizer.js","../node_modules/@arcgis/core/symbols/cim/TextRasterizer.js","../node_modules/@arcgis/core/symbols/cim/CIMSymbolRasterizer.js","../node_modules/@arcgis/core/symbols/cim/cimAnalyzer.js","../node_modules/@arcgis/core/symbols/cim/SDFHelper.js"],"names":["o","dispose","this","_rasterizationCanvas","rasterizeJSONResource","i","s","document","createElement","type","r","t","a","e","rasterizeSimpleFill","style","size","image","Uint32Array","buffer","sdf","simplePattern","anchorX","anchorY","rasterizeSimpleLine","cap","m","l","f","fromSimpleMarker","fromCIMHatchFill","frame","xmin","ymax","xmax","ymin","markerPlacement","fromCIMInsidePolygon","n","c","h","p","y","u","rasterize","rasterizeImageResource","width","height","getContext","ImageData","putImageData","setAttribute","drawImage","getImageData","Uint8Array","data","oldColor","length","newColor","Math","round","Uint8ClampedArray","constructor","rasterizeText","_textRasterizationCanvas","setFontProperties","parameters","textLines","split","lineHeight","computeLineHeight","computeTextWidth","renderedLineHeight","pixelRatio","renderedHaloSize","halo","renderedWidth","renderedHeight","fillStyle","slice","toString","color","haloStyle","d","textAlign","g","renderHalo","globalCompositeOperation","fillText","x","premultiplyColors","_haloRasterizationCanvas","clearRect","strokeStyle","lineJoin","renderHaloEmulated","renderHaloNative","globalAlpha","lineWidth","strokeText","font","weight","family","textBaseline","horizontalAlignment","max","measureText","push","cos","PI","sin","Legend","Preview","targetSize","referenceSize","scaleFactor","M","fill","legend","geometry","rings","canvasPaths","preview","stroke","paths","C","_spatialReference","_avoidSDF","_resourceCache","Map","_rasterizer","_textRasterizer","_pictureMarkerCache","centroid","symbol","z","analyzeCIMSymbol","Object","keys","map","name","alias","I","attributes","rasterizeCIMSymbol","geometryType","spatialReference","fields","cim","fetchPictureMarkerResource","text","indexOf","textCase","Promise","all","materialHash","get","url","responseType","signal","set","_getRasterizedResource","offsetX","offsetY","rotation","rotateClockwise","angle","verticalAlignment","rotateClockWise","rasterizedResource","getSymbolImage","min","P","createImageData","rasterizedImage","_imageDataToCanvas","save","translate","rotate","restore","imageData","anchorPosition","_imageDataCanvas","_imageTo32Array","_getPictureResource","_rasterizePictureResource","analyzedCIM","hash","_embedCIMLayerInVectorMarker","JSON","stringify","_rasterizeTextResource","anchorPoint","preserveOutlineWidth","has","window","devicePixelRatio","fontName","decoration","outlineColor","outlineSize","abs","createPattern","setTransform","m11","m12","m21","m22","m41","m42","beginPath","moveTo","lineTo","closePath","apply","markerGraphics","symbolLayers","materialOverrides","getLogger","N","b","angleToLine","async","k","error","primitiveOverrides","valueExpressionInfo","expression","then","primitiveName","propertyName","value","getSize","angleAlignment","enable","findApplicableOverrides","L","X","w","J","O","D","templateHash","colorLocked","F","j","scaleX","effects","tintColor","colorSubstitutions","filter","separation","lineSymbol","W","capStyle","joinStyle","miterLimit","S","v","isOutline","join","referenceWidth","zOrder","A","isDashed","stepY","gridAngle","scaleSymbolsProportionally","alignment","isAbsoluteAnchorPoint","anchorPointUnits","outlineWidth","frameHeight","sizeRatio","Y","H","underline","strikethrough","toLowerCase","fontStyleName","fontFamilyName","getFillColor","getStrokeColor","getStrokeWidth","haloSymbol","haloSize","R","Number","$","textString","geom","asFill","billboardMode3D","depth3D","respectFrame","clippingPath","getTextureAnchor","parseInt","substr","NaN","toRgba","Array","call","$view","fn","buildOverrideKey","T","parse","applyOverrides","floor","sqrt"],"mappings":"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","file":"static/js/49.d76ad137.chunk.js","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport{SymbolHelper as e,CIMSymbolHelper as r}from\"./CIMSymbolHelper.js\";import t from\"./Rect.js\";import{getSDFInfo as a,buildSDF as n}from\"./SDFHelper.js\";import{resampleHermite as i}from\"./utils.js\";const s=512;class o{dispose(){this._rasterizationCanvas=null}rasterizeJSONResource(i,s,o){if(this._rasterizationCanvas||(this._rasterizationCanvas=document.createElement(\"canvas\")),\"simple-fill\"===i.type||\"esriSFS\"===i.type){const[r,t,a]=e.rasterizeSimpleFill(this._rasterizationCanvas,i.style,s);return{size:[t,a],image:new Uint32Array(r.buffer),sdf:!1,simplePattern:!0,anchorX:0,anchorY:0}}if(\"simple-line\"===i.type||\"esriSLS\"===i.type){const[r,t,a]=e.rasterizeSimpleLine(i.style,i.cap);return{size:[t,a],image:new Uint32Array(r.buffer),sdf:!0,simplePattern:!0,anchorX:0,anchorY:0}}let m,l,f;if(\"simple-marker\"===i.type||\"esriSMS\"===i.type||\"line-marker\"===i.type?(m=r.fromSimpleMarker(i),f=a(m)):\"CIMHatchFill\"===i.type?(m=r.fromCIMHatchFill(i),l=new t(m.frame.xmin,-m.frame.ymax,m.frame.xmax-m.frame.xmin,m.frame.ymax-m.frame.ymin)):i.markerPlacement&&\"CIMMarkerPlacementInsidePolygon\"===i.markerPlacement.type?(m=r.fromCIMInsidePolygon(i),l=new t(m.frame.xmin,-m.frame.ymax,m.frame.xmax-m.frame.xmin,m.frame.ymax-m.frame.ymin)):(m=i,f=a(m)),f&&!o){const[e,r,t]=n(f);return e?{size:[r,t],image:new Uint32Array(e.buffer),sdf:!0,simplePattern:!0,anchorX:0,anchorY:0}:null}const[c,h,p,y,u]=r.rasterize(this._rasterizationCanvas,m,l,!o);return c?{size:[h,p],image:new Uint32Array(c.buffer),sdf:!1,simplePattern:!1,anchorX:y,anchorY:u}:null}rasterizeImageResource(e,r,t,a){this._rasterizationCanvas||(this._rasterizationCanvas=document.createElement(\"canvas\")),this._rasterizationCanvas.width=e,this._rasterizationCanvas.height=r;const n=this._rasterizationCanvas.getContext(\"2d\");t instanceof ImageData?n.putImageData(t,0,0):(t.setAttribute(\"width\",`${e}px`),t.setAttribute(\"height\",`${r}px`),n.drawImage(t,0,0,e,r));const o=n.getImageData(0,0,e,r),m=new Uint8Array(o.data);if(a)for(const i of a)if(i&&i.oldColor&&4===i.oldColor.length&&i.newColor&&4===i.newColor.length){const[e,r,t,a]=i.oldColor,[n,s,o,l]=i.newColor;if(e===n&&r===s&&t===o&&a===l)continue;for(let i=0;i<m.length;i+=4)e===m[i]&&r===m[i+1]&&t===m[i+2]&&a===m[i+3]&&(m[i]=n,m[i+1]=s,m[i+2]=o,m[i+3]=l)}let l;for(let i=0;i<m.length;i+=4)l=m[i+3]/255,m[i]=m[i]*l,m[i+1]=m[i+1]*l,m[i+2]=m[i+2]*l;let f=m,c=e,h=r;const p=s;if(c>=p||h>=p){const t=c/h;t>1?(c=p,h=Math.round(p/t)):(h=p,c=Math.round(p*t)),f=new Uint8Array(4*c*h);const a=new Uint8ClampedArray(f.buffer);i(m,e,r,a,c,h,!1)}return{size:[c,h],image:new Uint32Array(f.buffer),sdf:!1,simplePattern:!1,anchorX:0,anchorY:0}}}export default o;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport{pt2px as t}from\"../../core/screenUtils.js\";function e(t){return`rgb(${t.slice(0,3).toString()})`}function i(t){return`rgba(${t.slice(0,3).toString()},${t[3]})`}class r{constructor(){}rasterizeText(t,r){this._textRasterizationCanvas||(this._textRasterizationCanvas=document.createElement(\"canvas\"));const o=this._textRasterizationCanvas,n=o.getContext(\"2d\");this.setFontProperties(n,r),this.parameters=r,this.textLines=t.split(/\\r?\\n/),this.lineHeight=this.computeLineHeight();const a=this.computeTextWidth(n,r),h=this.lineHeight*this.textLines.length;o.width=a,o.height=h,this.renderedLineHeight=Math.round(this.lineHeight*r.pixelRatio),this.renderedHaloSize=r.halo.size*r.pixelRatio,this.renderedWidth=a*r.pixelRatio,this.renderedHeight=h*r.pixelRatio,this.fillStyle=i(r.color),this.haloStyle=e(r.halo.color);const l=this.renderedLineHeight,d=this.renderedHaloSize;this.setFontProperties(n,r);const c=s(n.textAlign,this.renderedWidth)+d,g=d;let f=0,p=0;d>0&&this.renderHalo(n,c,g,f,p,r),p+=g,f+=c;for(const e of this.textLines)n.globalCompositeOperation=\"destination-out\",n.fillStyle=\"rgb(0, 0, 0)\",n.fillText(e,f,p),n.globalCompositeOperation=\"source-over\",n.fillStyle=this.fillStyle,n.fillText(e,f,p),p+=l;const u=n.getImageData(0,0,this.renderedWidth,this.renderedHeight),x=new Uint8Array(u.data);if(r.premultiplyColors){let t;for(let e=0;e<x.length;e+=4)t=x[e+3]/255,x[e]=x[e]*t,x[e+1]=x[e+1]*t,x[e+2]=x[e+2]*t}return{size:[this.renderedWidth,this.renderedHeight],image:new Uint32Array(x.buffer),sdf:!1,simplePattern:!1,anchorX:0,anchorY:0}}renderHalo(t,e,i,r,s,o){const n=this.renderedWidth,a=this.renderedHeight;this._haloRasterizationCanvas||(this._haloRasterizationCanvas=document.createElement(\"canvas\")),this._haloRasterizationCanvas.width=n,this._haloRasterizationCanvas.height=a;const h=this._haloRasterizationCanvas,l=h.getContext(\"2d\");l.clearRect(0,0,n,a),this.setFontProperties(l,o),l.fillStyle=this.haloStyle,l.strokeStyle=this.haloStyle;const d=this.renderedHaloSize<3;l.lineJoin=d?\"miter\":\"round\",d?this.renderHaloEmulated(l,e,i):this.renderHaloNative(l,e,i),t.globalAlpha=this.parameters.halo.color[3],t.drawImage(h,0,0,n,a,r,s,n,a),t.globalAlpha=1}renderHaloEmulated(t,e,i){const r=this.renderedLineHeight,s=this.renderedHaloSize;for(const n of this.textLines){for(const[r,a]of o)t.fillText(n,e+s*r,i+s*a);i+=r}}renderHaloNative(t,e,i){const r=this.renderedLineHeight,s=this.renderedHaloSize;for(const o of this.textLines){const n=2*s,a=5,h=.1;for(let r=0;r<a;r++){const s=1-(a-1)*h+r*h;t.lineWidth=s*n,t.strokeText(o,e,i)}i+=r}}setFontProperties(e,i){const r=i.font,s=`${r.style} ${r.weight} ${t(i.size*i.pixelRatio)}px ${r.family}, sans-serif`;let o;switch(e.font=s,e.textBaseline=\"top\",i.horizontalAlignment){case\"left\":o=\"left\";break;case\"right\":o=\"right\";break;case\"center\":o=\"center\";break;default:o=\"left\"}e.textAlign=o}computeTextWidth(t,e){let i=0;for(const s of this.textLines)i=Math.max(i,t.measureText(s).width);const r=e.font;return(\"italic\"===r.style||\"oblique\"===r.style||\"string\"==typeof r.weight&&(\"bold\"===r.weight||\"bolder\"===r.weight)||\"number\"==typeof r.weight&&r.weight>600)&&(i+=.3*t.measureText(\"A\").width),i+=2*this.parameters.halo.size,Math.round(i)}computeLineHeight(){const t=1.275*this.parameters.size;return Math.round(t+2*this.parameters.halo.size)}}function s(t,e){return\"center\"===t?.5*e:\"right\"===t?e:0}const o=[];{const t=16;for(let e=0;e<360;e+=360/t)o.push([Math.cos(Math.PI*e/180),Math.sin(Math.PI*e/180)])}export default r;export{r as TextRasterizer};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport e from\"../../request.js\";import{throwIfAborted as t}from\"../../core/promiseUtils.js\";import{pt2px as r}from\"../../core/screenUtils.js\";import{numericHash as a}from\"../../core/string.js\";import{getJsonType as i,isPolygon as s,isPolyline as o}from\"../../geometry/support/jsonUtils.js\";import{analyzeCIMSymbol as n,analyzeCIMResource as c}from\"./cimAnalyzer.js\";import l from\"./Rasterizer.js\";import{TextRasterizer as m}from\"./TextRasterizer.js\";import{createLabelOverrideFunction as h,evaluateValueOrFunction as f,colorToArray as g}from\"./utils.js\";import{scaleCIMMarker as y}from\"../support/cimSymbolUtils.js\";import u from\"../support/Symbol3DAnchorPosition2D.js\";var p;!function(e){e.Legend=\"legend\",e.Preview=\"preview\"}(p||(p={}));const d=(e,t,a)=>{if(e&&e.targetSize){let i;if(a){const t=Math.max(a.frame.xmax-a.frame.xmin,a.frame.ymax-a.frame.ymin);i=e.targetSize/r(t)}else i=e.targetSize/t.referenceSize;return i}return e&&e.scaleFactor?e.scaleFactor:1},M={fill:{legend:{frame:{xmax:15,xmin:0,ymax:15,ymin:0},geometry:{rings:[[[0,15],[15,7.5],[15,0],[0,0],[0,15]]]},canvasPaths:{rings:[[[0,15],[0,0],[15,7.5],[15,15],[0,15]]]}},preview:{frame:{xmax:100,xmin:0,ymax:100,ymin:0},geometry:{rings:[[[0,100],[100,100],[100,0],[0,0],[0,100]]]},canvasPaths:{rings:[[[0,100],[0,0],[100,0],[100,100],[0,100]]]}}},stroke:{legend:{frame:{xmax:24,xmin:0,ymax:-2,ymin:2},geometry:{paths:[[[0,0],[12,0],[24,0]]]},canvasPaths:{paths:[[[0,2],[12,2],[24,2]]]}},preview:{frame:{xmax:100,xmin:0,ymax:-2,ymin:2},geometry:{paths:[[[0,0],[50,0],[100,0]]]},canvasPaths:{paths:[[[0,2],[50,2],[100,2]]]}}}};class C{constructor(e,t){this._spatialReference=e,this._avoidSDF=t,this._resourceCache=new Map,this._rasterizer=new l,this._textRasterizer=new m,this._pictureMarkerCache=new Map}async rasterizeCIMSymbolAsync(e,t,r,a,s,o,n,c){a=a||(t?null!=t.centroid?\"esriGeometryPolygon\":i(t.geometry):null)||z(e);const l=await this.analyzeCIMSymbol(e,t?I(t.attributes):null,r,a,c);return this.rasterizeCIMSymbol(l,t,a,s,o,n)}async analyzeCIMSymbol(e,r,a,i,s){const o=[],c=r?{geometryType:i,spatialReference:this._spatialReference,fields:r}:null;let l;await n(e.data,c,o,this._avoidSDF),t(s);for(const t of o)\"CIMPictureMarker\"!==t.cim.type&&\"CIMPictureFill\"!==t.cim.type&&\"CIMPictureStroke\"!==t.cim.type||(l||(l=[]),l.push(this.fetchPictureMarkerResource(t,s))),a&&\"text\"===t.type&&\"string\"==typeof t.text&&t.text.indexOf(\"[\")>-1&&(t.text=h(a,t.text,t.cim.textCase));return l&&await Promise.all(l),o}async fetchPictureMarkerResource(t,r){const a=t.materialHash;if(!this._pictureMarkerCache.get(a)){const i=(await e(t.cim.url,{responseType:\"image\",signal:r&&r.signal})).data;this._pictureMarkerCache.set(a,i)}}rasterizeCIMSymbol(e,t,r,a,i,s){const o=[];for(const n of e){a&&\"function\"==typeof a.scaleFactor&&(a.scaleFactor=a.scaleFactor(t,i,s));const e=this._getRasterizedResource(n,t,r,a,i,s);if(!e)continue;let c=0,l=e.anchorX||0,m=e.anchorY||0,h=!1,g=0,y=0;if(\"esriGeometryPoint\"===r){const e=d(a,n,null);if(g=f(n.offsetX,t,i,s)*e||0,y=f(n.offsetY,t,i,s)*e||0,\"marker\"===n.type)c=f(n.rotation,t,i,s)||0,h=!!n.rotateClockwise&&n.rotateClockwise;else if(\"text\"===n.type){if(c=f(n.angle,t,i,s)||0,void 0!==n.horizontalAlignment)switch(n.horizontalAlignment){case\"left\":l=-.5;break;case\"right\":l=.5;break;default:l=0}if(void 0!==n.verticalAlignment)switch(n.verticalAlignment){case\"top\":m=.5;break;case\"bottom\":m=-.5;break;case\"baseline\":m=-.25;break;default:m=0}}}null!=e&&o.push({angle:c,rotateClockWise:h,anchorX:l,anchorY:m,offsetX:g,offsetY:y,rasterizedResource:e})}return this.getSymbolImage(o)}getSymbolImage(e){const t=document.createElement(\"canvas\"),a=t.getContext(\"2d\");let i=0,s=0,o=0,n=0;const c=[];for(let f=0;f<e.length;f++){const t=e[f],l=t.rasterizedResource;if(!l)continue;const m=l.size,h=t.offsetX,g=t.offsetY,y=t.anchorX,u=t.anchorY,p=t.rotateClockWise||!1;let d=t.angle,M=r(h)-m[0]*(.5+y),C=r(g)-m[1]*(.5+u),I=M+m[0],z=C+m[1];if(d){p&&(d=-d);const e=Math.sin(d*Math.PI/180),t=Math.cos(d*Math.PI/180),r=M*t-C*e,a=M*e+C*t,i=M*t-z*e,s=M*e+z*t,o=I*t-z*e,n=I*e+z*t,c=I*t-C*e,l=I*e+C*t;M=Math.min(r,i,o,c),C=Math.min(a,s,n,l),I=Math.max(r,i,o,c),z=Math.max(a,s,n,l)}i=M<i?M:i,s=C<s?C:s,o=I>o?I:o,n=z>n?z:n;const P=a.createImageData(l.size[0],l.size[1]);P.data.set(new Uint8ClampedArray(l.image.buffer));const x={offsetX:h,offsetY:g,rotateClockwise:p,angle:d,rasterizedImage:P,anchorX:y,anchorY:u};c.push(x)}t.width=o-i,t.height=n-s;const l=-i,m=n;for(let f=0;f<c.length;f++){const e=c[f],t=this._imageDataToCanvas(e.rasterizedImage),i=e.rasterizedImage.width,s=e.rasterizedImage.height,o=l-i*(.5+e.anchorX),n=m-s*(.5-e.anchorY);if(e.angle){const i=(360-e.angle)*Math.PI/180;a.save(),a.translate(r(e.offsetX),-r(e.offsetY)),a.translate(l,m),a.rotate(i),a.translate(-l,-m),a.drawImage(t,o,n),a.restore()}else a.drawImage(t,o+r(e.offsetX),n-r(e.offsetY))}const h=new u({x:l/t.width-.5,y:m/t.height-.5});return{imageData:0!==t.width&&0!==t.height?a.getImageData(0,0,t.width,t.height):a.createImageData(1,1),anchorPosition:h}}_imageDataToCanvas(e){this._imageDataCanvas||(this._imageDataCanvas=document.createElement(\"canvas\"));const t=this._imageDataCanvas,r=t.getContext(\"2d\");return t.width=e.width,t.height=e.height,r.putImageData(e,0,0),t}_imageTo32Array(e,t,r){this._imageDataCanvas||(this._imageDataCanvas=document.createElement(\"canvas\"));const a=this._imageDataCanvas,i=a.getContext(\"2d\");return a.width=t,a.height=r,i.drawImage(e,0,0,t,r),new Uint32Array(i.getImageData(0,0,t,r).data.buffer)}_getRasterizedResource(e,t,r,i,s,o){let n,c,l,m;if(\"esriGeometryPolyline\"===r||\"esriGeometryPolygon\"===r){const m=i&&i.style?i.style:p.Legend,h=\"esriGeometryPolyline\"===r?M.stroke[m]:M.fill[m];if(\"line\"===e.type){if(\"CIMSolidStroke\"!==e.cim.type){if(\"CIMPictureStroke\"===e.cim.type){const r=f(e.width,t,s,o),{image:a,width:i,height:n}=this._getPictureResource(e,r);return this._rasterizePictureResource(e,a,i,n,h,r)}return null}({analyzedCIM:n,hash:l}=P(e,t,s,o)),c=this._embedCIMLayerInVectorMarker(n,h)}else if(\"marker\"===e.type){if(\"CIMPictureMarker\"===e.cim.type)return null;if(\"CIMVectorMarker\"!==e.cim.type)return null;e.cim.offsetX=f(e.offsetX,t,s,o),e.cim.offsetY=f(e.offsetY,t,s,o),e.cim.rotation=f(e.rotation,t,s,o),e.cim.markerPlacement=e.markerPlacement,({analyzedCIM:n}=P(e,t,s,o)),l=a(JSON.stringify(n)).toString(),c=this._embedCIMLayerInVectorMarker(n,h)}else{if(\"text\"===e.type)return null;if(\"fill\"===e.type){if(\"CIMHatchFill\"===e.cim.type||\"CIMVectorMarker\"===e.cim.type||\"CIMPictureMarker\"===e.cim.type||\"CIMPictureFill\"===e.cim.type){const r=e.cim.size||e.cim.height;let a,i,c;if(\"CIMPictureMarker\"===e.cim.type||\"CIMPictureFill\"===e.cim.type)({image:a,width:i,height:c}=this._getPictureResource(e,r));else{({analyzedCIM:n,hash:l}=P(e,t,s,o));const r=this._rasterizer.rasterizeJSONResource(n,1,this._avoidSDF);a=r.image,i=r.size[0],c=r.size[1]}return this._rasterizePictureResource(e,a,i,c,h,null)}if(\"CIMSolidFill\"!==e.cim.type)return null;({analyzedCIM:n,hash:l}=P(e,t,s,o)),c=this._embedCIMLayerInVectorMarker(n,h)}}}else{if(\"text\"===e.type)return m=this._rasterizeTextResource(e,t,i,s,o),m;({analyzedCIM:n,hash:l}=P(e,t,s,o));const r=d(i,e,null);if(\"CIMPictureMarker\"===e.cim.type){const a=f(e.size,t,s,o)*r,{image:i,width:n,height:c}=this._getPictureResource(e,a);return m={image:i,size:[n,c],sdf:!1,simplePattern:!1,anchorX:e.anchorPoint?e.anchorPoint.x:0,anchorY:e.anchorPoint?e.anchorPoint.y:0},m}y(n,r,{preserveOutlineWidth:!1}),c=n}l+=r,i&&(l+=JSON.stringify(i));const h=this._resourceCache;return h.has(l)?h.get(l):(m=this._rasterizer.rasterizeJSONResource(c,window.devicePixelRatio||1,this._avoidSDF),h.set(l,m),m)}_rasterizeTextResource(e,t,r,a,i){const s=d(r,e,null),o=f(e.text,t,a,i);if(!o||0===o.length)return null;const n=f(e.fontName,t,a,i),c=f(e.style,t,a,i),l=f(e.weight,t,a,i),m=f(e.decoration,t,a,i),h=f(e.size,t,a,i)*s,y=f(e.horizontalAlignment,t,a,i),u=f(e.verticalAlignment,t,a,i),p=g(f(e.color,t,a,i)),M=g(f(e.outlineColor,t,a,i)),C={color:p,size:h,horizontalAlignment:y,verticalAlignment:u,font:{family:n,style:c,weight:l,decoration:m},halo:{size:f(e.outlineSize,t,a,i)||0,color:M,style:c},pixelRatio:1,premultiplyColors:!this._avoidSDF};return this._textRasterizer.rasterizeText(o,C)}_rasterizePictureResource(e,t,a,i,n,c){const l=document.createElement(\"canvas\"),m=l.getContext(\"2d\");l.height=r(Math.max(Math.abs(n.frame.ymax-n.frame.ymin),c)),l.width=r(Math.abs(n.frame.xmax-n.frame.xmin));const h=m.createImageData(a,i);h.data.set(new Uint8ClampedArray(t.buffer));const f=this._imageDataToCanvas(h),g=m.createPattern(f,\"repeat\"),y=Math.cos((-e.cim.rotation||0)*Math.PI/180),u=Math.sin((-e.cim.rotation||0)*Math.PI/180);g.setTransform({m11:y,m12:u,m21:-u,m22:y,m41:r(e.cim.offsetX)||0,m42:r(e.cim.offsetY)||0});const p=n.canvasPaths;let d,M,C;s(p)?(d=p.rings,m.fillStyle=g,M=m.fill,C=[\"evenodd\"]):o(p)&&(d=p.paths,m.strokeStyle=g,m.lineWidth=c,M=m.stroke,d[0][0][1]=l.height/2,d[0][1][1]=l.height/2),m.beginPath();for(const s of d){const e=s?s.length:0;if(e>1){let t=s[0];m.moveTo(r(t[0]),r(t[1]));for(let a=1;a<e;++a)t=s[a],m.lineTo(r(t[0]),r(t[1]));m.closePath()}}M.apply(m,C);const I=m.getImageData(0,0,l.width,l.height),z=new Uint8Array(I.data);return{size:[l.width,l.height],image:new Uint32Array(z.buffer),sdf:!1,simplePattern:!1,anchorX:0,anchorY:0}}_getPictureResource(e,t){const a=this._pictureMarkerCache.get(e.materialHash);if(!a)return null;const i=a.height/a.width,s=t?i>1?r(t):r(t)/i:a.width,o=t?i>1?r(t)*i:r(t):a.height;return{image:this._imageTo32Array(a,s,o),width:s,height:o}}_embedCIMLayerInVectorMarker(e,t){const r=s(t.geometry)?\"CIMPolygonSymbol\":\"CIMLineSymbol\";return{type:\"CIMVectorMarker\",frame:t.frame,markerGraphics:[{type:\"CIMMarkerGraphic\",geometry:t.geometry,symbol:{type:r,symbolLayers:[e]}}]}}}function I(e){return(e?Object.keys(e):[]).map((t=>({name:t,alias:t,type:\"string\"==typeof e[t]?\"esriFieldTypeString\":\"esriFieldTypeDouble\"})))}function z(e){if(!(e&&e.data&&e.data.symbol))return null;switch(e.data.symbol.type){case\"CIMPointSymbol\":case\"CIMTextSymbol\":return\"esriGeometryPoint\";case\"CIMLineSymbol\":return\"esriGeometryPolyline\";case\"CIMPolygonSymbol\":return\"esriGeometryPolygon\";default:return null}}function P(e,t,r,a){let i,s;if(\"function\"==typeof e.materialHash){i=(0,e.materialHash)(t,r,a),s=c(e.cim,e.materialOverrides)}else i=e.materialHash,s=e.cim;return{analyzedCIM:s,hash:i}}export{C as CIMSymbolRasterizer,p as GeometryStyle};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport e from\"../../Color.js\";import t from\"../../core/Logger.js\";import{pt2px as i}from\"../../core/screenUtils.js\";import{numericHash as o}from\"../../core/string.js\";import{createRendererExpression as r,ArcadeExpression as n}from\"../../support/arcadeOnDemand.js\";import{CIMSymbolHelper as a,OverrideHelper as l}from\"./CIMSymbolHelper.js\";import{getExtent as s,getSDFMetrics as c}from\"./SDFHelper.js\";import{fromCIMColor as f,_adjustTextCase as m}from\"./utils.js\";import p from\"../../views/2d/arcade/callExpressionWithFeature.js\";const u=t.getLogger(\"esri.symbols.cim.cimAnalyzer\");function y(e){switch(e){case\"Butt\":return 0;case\"Square\":return 2;case\"Round\":default:return 1}}function h(e){switch(e){case\"Bevel\":return 0;case\"Miter\":return 2;case\"Round\":default:return 1}}function g(e){switch(e){case\"Left\":default:return\"left\";case\"Right\":return\"right\";case\"Center\":return\"center\";case\"Justify\":return\"justify\"}}function d(e){switch(e){case\"Top\":default:return\"top\";case\"Center\":return\"middle\";case\"Baseline\":return\"baseline\";case\"Bottom\":return\"bottom\"}}function S(e){let t=\"normal\",i=\"normal\";if(e){const o=e.toLowerCase();-1!==o.indexOf(\"italic\")?t=\"italic\":-1!==o.indexOf(\"oblique\")&&(t=\"oblique\"),-1!==o.indexOf(\"bold\")?i=\"bold\":-1!==o.indexOf(\"light\")&&(i=\"lighter\")}return{style:t,weight:i}}function v(e){return e.underline?\"underline\":e.strikethrough?\"line-through\":\"none\"}function N(e,t,i,o){let r;e[t]?r=e[t]:(r={},e[t]=r),r[i]=o}function b(e){const t=e.markerPlacement;return t&&t.angleToLine?1:0}async function k(e,t,i,o){const n=null!=i?i:[];if(!e)return n;let a,l;const s={};if(\"CIMSymbolReference\"!==e.type)return u.error(\"Expect cim type to be 'CIMSymbolReference'\"),n;if(a=e.symbol,l=e.primitiveOverrides,l){const e=[];for(const i of l){const o=i.valueExpressionInfo;if(o&&t){const n=o.expression,a=r(n,t.spatialReference,t.fields).then((e=>{e&&N(s,i.primitiveName,i.propertyName,e)}));e.push(a)}else null!=i.value&&N(s,i.primitiveName,i.propertyName,i.value)}await Promise.all(e)}switch(a.type){case\"CIMPointSymbol\":case\"CIMLineSymbol\":case\"CIMPolygonSymbol\":O(a,l,s,t,n,o)}return n}function O(e,t,i,o,r,n){if(!e)return;const s=e.symbolLayers;if(!s)return;let c;const f=a.getSize(e);\"CIMPointSymbol\"===e.type&&\"Map\"===e.angleAlignment&&(c=1);let m=s.length;for(;m--;){const a=s[m];if(!a||!1===a.enable)continue;const p=[];switch(l.findApplicableOverrides(a,t,p),a.type){case\"CIMSolidFill\":C(a,i,p,o,r);break;case\"CIMPictureFill\":P(a,i,p,o,r);break;case\"CIMHatchFill\":L(a,i,p,o,r);break;case\"CIMGradientFill\":M(a,i,p,o,r);break;case\"CIMSolidStroke\":X(a,i,p,o,r,\"CIMPolygonSymbol\"===e.type,f);break;case\"CIMPictureStroke\":I(a,i,p,o,r,\"CIMPolygonSymbol\"===e.type,f);break;case\"CIMGradientStroke\":x(a,i,p,o,r,\"CIMPolygonSymbol\"===e.type,f);break;case\"CIMCharacterMarker\":if(w(a,i,p,o,r))break;break;case\"CIMPictureMarker\":if(w(a,i,p,o,r))break;\"CIMLineSymbol\"===e.type&&(c=b(a)),z(a,i,p,o,r,c,f);break;case\"CIMVectorMarker\":if(w(a,i,p,o,r))break;\"CIMLineSymbol\"===e.type&&(c=b(a)),J(a,i,p,o,r,c,f,n);break;default:u.error(\"Cannot analyze CIM layer\",a.type)}}}function C(e,t,i,r,n){const a=e.primitiveName,l=f(e.color),[s,c]=D(i,a),m=o(JSON.stringify(e)+c).toString();n.push({type:\"fill\",templateHash:m,materialHash:s?()=>m:m,cim:e,materialOverrides:null,colorLocked:e.colorLocked,color:F(a,t,\"Color\",r,l,j),height:0,angle:0,offsetX:0,offsetY:0,scaleX:1,effects:e.effects})}function P(e,t,i,r,n){const a=e.primitiveName,l=e.tintColor?f(e.tintColor):{r:255,g:255,b:255,a:1},[s,c]=D(i,a),m=o(JSON.stringify(e)+c).toString(),p=o(`${e.url}${JSON.stringify(e.colorSubstitutions)}`).toString();n.push({type:\"fill\",templateHash:m,materialHash:s?()=>p:p,cim:e,materialOverrides:null,colorLocked:e.colorLocked,effects:e.effects,color:F(a,t,\"TintColor\",r,l,j),height:F(a,t,\"Height\",r,e.height),scaleX:F(a,t,\"ScaleX\",r,e.scaleX),angle:F(a,t,\"Rotation\",r,e.rotation),offsetX:F(a,t,\"OffsetX\",r,e.offsetX),offsetY:F(a,t,\"OffsetY\",r,e.offsetY)})}function L(e,t,i,r,n){const a=[\"Rotation\",\"OffsetX\",\"OffsetY\"],l=i.filter((t=>t.primitiveName!==e.primitiveName&&-1===a.indexOf(t.propertyName))),s=e.primitiveName,[c,f]=D(i,s),m=o(JSON.stringify(e)+f).toString(),p=o(`${e.separation}${JSON.stringify(e.lineSymbol)}`).toString();n.push({type:\"fill\",templateHash:m,materialHash:c?W(p,t,l,r):p,cim:e,materialOverrides:l,colorLocked:e.colorLocked,effects:e.effects,color:{r:255,g:255,b:255,a:1},height:F(s,t,\"Separation\",r,e.separation),scaleX:1,angle:F(s,t,\"Rotation\",r,e.rotation),offsetX:F(s,t,\"OffsetX\",r,e.offsetX),offsetY:F(s,t,\"OffsetY\",r,e.offsetY)})}function M(e,t,i,r,n){const a=e.primitiveName,[l,s]=D(i,a),c=o(JSON.stringify(e)+s).toString();n.push({type:\"fill\",templateHash:c,materialHash:l?W(c,t,i,r):c,cim:e,materialOverrides:null,colorLocked:e.colorLocked,effects:e.effects,color:{r:128,g:128,b:128,a:1},height:0,angle:0,offsetX:0,offsetY:0,scaleX:1})}function X(e,t,i,r,n,a,l){const s=e.primitiveName,c=f(e.color),m=void 0!==e.width?e.width:4,p=y(e.capStyle),u=h(e.joinStyle),g=e.miterLimit,[d,S]=D(i,s),v=o(JSON.stringify(e)+S).toString();n.push({type:\"line\",templateHash:v,materialHash:d?()=>v:v,cim:e,materialOverrides:null,isOutline:a,colorLocked:e.colorLocked,effects:e.effects,color:F(s,t,\"Color\",r,c,j),width:F(s,t,\"Width\",r,m),cap:F(s,t,\"CapStyle\",r,p),join:F(s,t,\"JoinStyle\",r,u),miterLimit:F(s,t,\"MiterLimit\",r,g),referenceWidth:l,zOrder:A(e.name),isDashed:!1})}function I(e,t,i,r,n,a,l){const s=o(`${e.url}${JSON.stringify(e.colorSubstitutions)}`).toString(),c=e.primitiveName,m=f(e.tintColor),p=void 0!==e.width?e.width:4,u=y(e.capStyle),g=h(e.joinStyle),d=e.miterLimit,[S,v]=D(i,c),N=o(JSON.stringify(e)+v).toString();n.push({type:\"line\",templateHash:N,materialHash:S?()=>s:s,cim:e,materialOverrides:null,isOutline:a,colorLocked:e.colorLocked,effects:e.effects,color:F(c,t,\"TintColor\",r,m,j),width:F(c,t,\"Width\",r,p),cap:F(c,t,\"CapStyle\",r,u),join:F(c,t,\"JoinStyle\",r,g),miterLimit:F(c,t,\"MiterLimit\",r,d),referenceWidth:l,zOrder:A(e.name),isDashed:!1})}function x(e,t,i,r,n,a,l){const s=e.primitiveName,c=void 0!==e.width?e.width:4,f=y(e.capStyle),m=h(e.joinStyle),p=e.miterLimit,[u,g]=D(i,s),d=o(JSON.stringify(e)+g).toString();n.push({type:\"line\",templateHash:d,materialHash:u?W(d,t,i,r):d,cim:e,materialOverrides:null,isOutline:a,colorLocked:e.colorLocked,effects:e.effects,color:{r:128,g:128,b:128,a:1},width:F(s,t,\"Width\",r,c),cap:F(s,t,\"CapStyle\",r,f),join:F(s,t,\"JoinStyle\",r,m),miterLimit:F(s,t,\"MiterLimit\",r,p),referenceWidth:l,zOrder:A(e.name),isDashed:!1})}function w(e,t,i,r,n){const a=e.markerPlacement;if(!a||\"CIMMarkerPlacementInsidePolygon\"!==a.type)return!1;const l=a,s=[\"Rotation\",\"OffsetX\",\"OffsetY\"],c=i.filter((t=>t.primitiveName!==e.primitiveName&&-1===s.indexOf(t.propertyName))),[f,m]=D(i,l.primitiveName),p=o(JSON.stringify(e)+m).toString();return n.push({type:\"fill\",templateHash:p,materialHash:f?W(p,t,c,r):p,cim:e,materialOverrides:c,colorLocked:e.colorLocked,effects:e.effects,color:{r:255,g:255,b:255,a:1},height:F(l.primitiveName,t,\"StepY\",r,l.stepY),scaleX:1,angle:F(l.primitiveName,t,\"GridAngle\",r,l.gridAngle),offsetX:F(l.primitiveName,t,\"OffsetX\",r,l.offsetX),offsetY:F(l.primitiveName,t,\"OffsetY\",r,l.offsetY)}),!0}function z(e,t,i,r,n,a,l){const s=e.primitiveName,c=e.size,m=e.scaleX,p=e.rotation,u=e.offsetX,y=e.offsetY,h=f(e.tintColor),g=o(`${e.url}${JSON.stringify(e.colorSubstitutions)}`).toString(),[d,S]=D(i,s),v=o(JSON.stringify(e)+S).toString();n.push({type:\"marker\",templateHash:v,materialHash:d?()=>g:g,cim:e,materialOverrides:null,colorLocked:e.colorLocked,effects:e.effects,scaleSymbolsProportionally:!1,alignment:a,size:F(s,t,\"Size\",r,c),scaleX:F(s,t,\"ScaleX\",r,m),rotation:F(s,t,\"Rotation\",r,p),offsetX:F(s,t,\"OffsetX\",r,u),offsetY:F(s,t,\"OffsetY\",r,y),color:F(s,t,\"TintColor\",r,h,j),anchorPoint:e.anchorPoint,isAbsoluteAnchorPoint:\"Relative\"!==e.anchorPointUnits,outlineColor:{r:0,g:0,b:0,a:0},outlineWidth:0,frameHeight:0,rotateClockwise:e.rotateClockwise,referenceSize:l,sizeRatio:1,markerPlacement:e.markerPlacement})}function J(e,t,i,o,r,n,a,l){const s=e.markerGraphics;if(!s)return;let c=0;if(e.scaleSymbolsProportionally){const t=e.frame;t&&(c=t.ymax-t.ymin)}for(const f of s)if(f){const s=f.symbol;if(!s)continue;switch(s.type){case\"CIMPointSymbol\":case\"CIMLineSymbol\":case\"CIMPolygonSymbol\":Y(e,f,i,t,o,r,n,a,c,l);break;case\"CIMTextSymbol\":H(e,f,t,i,o,r,n,a,c)}}}function H(e,t,i,r,n,s,c,p,u){const y=[];l.findApplicableOverrides(t,r,y);const h=t.geometry;if(!(\"x\"in h)||!(\"y\"in h))return;const N=t.symbol,b=v(N),k=S(N.fontStyleName);N.font={family:N.fontFamilyName,decoration:b,...k};const O=e.frame,C=h.x-.5*(O.xmin+O.xmax),P=h.y-.5*(O.ymin+O.ymax),L=e.size/u,M=e.primitiveName,X=(N.height||0)*L,I=N.angle||0,x=((N.offsetX||0)+C)*L,w=((N.offsetY||0)+P)*L,z=f(a.getFillColor(N));let J=f(a.getStrokeColor(N)),H=a.getStrokeWidth(N);H||(J=f(a.getFillColor(N.haloSymbol)),H=N.haloSize*L);let Y=\"\";for(const o of r)o.primitiveName===M&&void 0!==o.value&&(Y+=`-${o.primitiveName}-${o.propertyName}-${JSON.stringify(o.value)}`);const R=JSON.stringify(e.effects)+Number(e.colorLocked)+JSON.stringify(e.anchorPoint)+e.anchorPointUnits+JSON.stringify(e.markerPlacement),$=o(JSON.stringify(t)+R+Y).toString();s.push({type:\"text\",templateHash:$,materialHash:()=>o(JSON.stringify(N.font)).toString(),cim:N,materialOverrides:null,colorLocked:e.colorLocked,effects:e.effects,alignment:c,anchorPoint:{x:e.anchorPoint?e.anchorPoint.x:0,y:e.anchorPoint?e.anchorPoint.y:0},isAbsoluteAnchorPoint:\"Relative\"!==e.anchorPointUnits,fontName:N.fontFamilyName,decoration:\"none\",weight:\"normal\",style:\"normal\",size:F(M,i,\"Size\",n,X),angle:F(M,i,\"Rotation\",n,I),offsetX:F(M,i,\"OffsetX\",n,x),offsetY:F(M,i,\"OffsetY\",n,w),horizontalAlignment:g(N.horizontalAlignment),verticalAlignment:d(N.verticalAlignment),text:F(t.primitiveName,i,\"TextString\",n,t.textString,m,N.textCase),color:z,outlineColor:J,outlineSize:H,referenceSize:p,sizeRatio:1,markerPlacement:e.markerPlacement})}function Y(e,t,i,r,n,l,m,p,u,y){const h=t.symbol,g=t.geometry;if(!g)return;const d=h.symbolLayers;if(!d)return;if(y)return void R(e,t,r,i,n,l,m,p,u);let S=d.length;for(;S--;){const y=d[S];if(y&&!1!==y.enable)switch(y.type){case\"CIMSolidFill\":case\"CIMSolidStroke\":{const h=s(g);if(!h)continue;const[d,S,v]=c(h,e.frame,e.size,e.anchorPoint,\"Relative\"!==e.anchorPointUnits),N=\"CIMSolidFill\"===y.type,b={type:\"sdf\",geom:g,asFill:N},k=e.primitiveName,O=e.size,C=e.rotation||0,P=e.offsetX,L=e.offsetY,M=y.primitiveName,X=f(N?a.getFillColor(y):a.getStrokeColor(y)),I=N?{r:0,g:0,b:0,a:0}:f(a.getStrokeColor(y)),x=a.getStrokeWidth(y);if(!N&&!x)break;let w=!1,z=\"\";for(const e of i)e.primitiveName!==M&&e.primitiveName!==k||(void 0!==e.value?z+=`-${e.primitiveName}-${e.propertyName}-${JSON.stringify(e.value)}`:e.valueExpressionInfo&&(w=!0));const J=JSON.stringify({...e,markerGraphics:null}),H=o(JSON.stringify(b)).toString(),Y={type:\"marker\",templateHash:o(JSON.stringify(t)+JSON.stringify(y)+J+z).toString(),materialHash:w?()=>H:H,cim:b,materialOverrides:null,colorLocked:e.colorLocked,effects:e.effects,scaleSymbolsProportionally:e.scaleSymbolsProportionally,alignment:m,anchorPoint:{x:S,y:v},isAbsoluteAnchorPoint:!1,size:F(e.primitiveName,r,\"Size\",n,O),rotation:F(e.primitiveName,r,\"Rotation\",n,C),offsetX:F(e.primitiveName,r,\"OffsetX\",n,P),offsetY:F(e.primitiveName,r,\"OffsetY\",n,L),scaleX:1,frameHeight:u,rotateClockwise:e.rotateClockwise,referenceSize:p,sizeRatio:d,color:F(M,r,\"Color\",n,X,j),outlineColor:F(M,r,\"Color\",n,I,j),outlineWidth:F(M,r,\"Width\",n,x),markerPlacement:e.markerPlacement};l.push(Y);break}default:R(e,t,r,i,n,l,m,p,u)}}}function R(e,t,r,n,l,s,c,f,m){const p=$(e,t);let u=[];const y=[\"Rotation\",\"OffsetX\",\"OffsetY\"];u=n.filter((t=>t.primitiveName!==e.primitiveName||-1===y.indexOf(t.propertyName)));let h=\"\";for(const i of n)void 0!==i.value&&(h+=`-${i.primitiveName}-${i.propertyName}-${JSON.stringify(i.value)}`);const[g,d,S]=a.getTextureAnchor(p),v=e.primitiveName,N=e.rotation||0,b=e.offsetX||0,k=e.offsetY||0,O=o(JSON.stringify(p)+h).toString(),C={type:\"marker\",templateHash:O,materialHash:0===u.length?O:W(O,r,u,l),cim:p,materialOverrides:u,colorLocked:e.colorLocked,effects:e.effects,scaleSymbolsProportionally:e.scaleSymbolsProportionally,alignment:c,anchorPoint:{x:g,y:d},isAbsoluteAnchorPoint:!1,size:e.size,rotation:F(v,r,\"Rotation\",l,N),offsetX:F(v,r,\"OffsetX\",l,b),offsetY:F(v,r,\"OffsetY\",l,k),color:{r:0,g:0,b:0,a:0},outlineColor:{r:0,g:0,b:0,a:0},outlineWidth:0,scaleX:1,frameHeight:m,rotateClockwise:e.rotateClockwise,referenceSize:f,sizeRatio:S/i(e.size),markerPlacement:e.markerPlacement};s.push(C)}function $(e,t){return{type:e.type,enable:!0,name:e.name,colorLocked:e.colorLocked,primitiveName:e.primitiveName,anchorPoint:e.anchorPoint,anchorPointUnits:e.anchorPointUnits,offsetX:0,offsetY:0,rotateClockwise:e.rotateClockwise,rotation:0,size:e.size,billboardMode3D:e.billboardMode3D,depth3D:e.depth3D,frame:e.frame,markerGraphics:[t],scaleSymbolsProportionally:e.scaleSymbolsProportionally,respectFrame:e.respectFrame,clippingPath:e.clippingPath,effects:e.effects}}function A(e){if(e&&0===e.indexOf(\"Level_\")){const t=parseInt(e.substr(6),10);if(NaN!==t)return t}return 0}function j(t){if(!t||0===t.length)return null;const i=new e(t).toRgba();return{r:i[0],g:i[1],b:i[2],a:i[3]}}function F(e,t,i,o,r,a,l){const s=t[e];if(s){const e=s[i];if(\"string\"==typeof e||\"number\"==typeof e||e instanceof Array)return a?a.call(null,e,l):e;if(null!=e&&e instanceof n)return(t,i,n)=>{let s=p(e,t,{$view:n},o.geometryType,i);return null!==s&&a&&(s=a.call(null,s,l)),null!==s?s:r}}return r}function W(e,t,i,r){for(const o of i){if(o.valueExpressionInfo){const e=t[o.primitiveName]&&t[o.primitiveName][o.propertyName];e instanceof n&&(o.fn=(t,i,o)=>p(e,t,{$view:o},r.geometryType,i))}}return(t,r,n)=>{for(const e of i)e.fn&&(e.value=e.fn(t,r,n));return o(e+l.buildOverrideKey(i)).toString()}}function T(e,t){if(!t||0===t.length)return e;const i=JSON.parse(JSON.stringify(e));return l.applyOverrides(i,t),i}function D(e,t){let i=!1,o=\"\";for(const r of e)r.primitiveName===t&&(void 0!==r.value?o+=`-${r.primitiveName}-${r.propertyName}-${JSON.stringify(r.value)}`:r.valueExpressionInfo&&(i=!0));return[i,o]}export{T as analyzeCIMResource,k as analyzeCIMSymbol};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport{isExtent as t}from\"../../geometry/support/jsonUtils.js\";import{packFloatRGBA as n}from\"./packingUtils.js\";import o from\"./Rect.js\";function r(t){if(!t)return null;switch(t.type){case\"CIMPointSymbol\":{const n=t.symbolLayers;return n&&1===n.length?r(n[0]):null}case\"CIMVectorMarker\":{const n=t.markerGraphics;if(!n||1!==n.length)return null;const o=n[0];if(!o)return null;const r=o.geometry;if(!r)return null;const l=o.symbol;return!l||\"CIMPolygonSymbol\"!==l.type&&\"CIMLineSymbol\"!==l.type?null:{geom:r,asFill:\"CIMPolygonSymbol\"===l.type}}case\"sdf\":return{geom:t.geom,asFill:t.asFill}}return null}function l(t){const n=t.markerGraphics;if(!n||1!==n.length)return null;const o=n[0];if(!o)return null;const r=o.symbol;return!r||\"CIMPolygonSymbol\"!==r.type&&\"CIMLineSymbol\"!==r.type?null:r}function e(t){return t?t.rings?t.rings:t.paths?t.paths:void 0!==t.xmin&&void 0!==t.ymin&&void 0!==t.xmax&&void 0!==t.ymax?[[[t.xmin,t.ymin],[t.xmin,t.ymax],[t.xmax,t.ymax],[t.xmax,t.ymin],[t.xmin,t.ymin]]]:null:null}function i(t){let n=1/0,r=-1/0,l=1/0,e=-1/0;for(const o of t)for(const t of o)t[0]<n&&(n=t[0]),t[0]>r&&(r=t[0]),t[1]<l&&(l=t[1]),t[1]>e&&(e=t[1]);return new o(n,l,r-n,e-l)}function s(t){let n=1/0,o=-1/0,r=1/0,l=-1/0;for(const e of t)for(const t of e)t[0]<n&&(n=t[0]),t[0]>o&&(o=t[0]),t[1]<r&&(r=t[1]),t[1]>l&&(l=t[1]);return[n,r,o,l]}function f(n){return n?n.rings?s(n.rings):n.paths?s(n.paths):t(n)?[n.xmin,n.ymin,n.xmax,n.ymax]:null:null}function m(t,n,o,r,l){const[e,i,s,f]=t;if(s<e||f<i)return[0,0,0];const m=s-e,a=f-i,c=128,u=1,y=Math.floor(.5*(.5*c-u)),h=(c-2*(y+u))/Math.max(m,a),x=Math.round(m*h)+2*y,M=Math.round(a*h)+2*y;let g=1;if(n){g=M/h/(n.ymax-n.ymin)}let p=0,d=0;if(r)if(l){if(n&&o&&n.ymax-n.ymin>0){const t=(n.xmax-n.xmin)/(n.ymax-n.ymin);p=r.x/(o*t),d=r.y/o}}else p=r.x,d=r.y;p=.5*(n.xmax+n.xmin)+p*(n.xmax-n.xmin),d=.5*(n.ymax+n.ymin)+d*(n.ymax-n.ymin),p-=e,d-=i,p*=h,d*=h,p+=y,d+=y;return[g,p/x-.5,-(d/M-.5)]}function a(t){const n=e(t.geom),o=i(n),r=128,l=1,s=Math.floor(.5*(.5*r-l)),f=(r-2*(s+l))/Math.max(o.width,o.height),m=Math.round(o.width*f)+2*s,a=Math.round(o.height*f)+2*s,h=[];for(const e of n)if(e&&e.length>1){const n=[];for(const t of e){let[r,l]=t;r-=o.x,l-=o.y,r*=f,l*=f,r+=s-.5,l+=s-.5,n.push([r,l])}if(t.asFill){const t=n.length-1;n[0][0]===n[t][0]&&n[0][1]===n[t][1]||n.push(n[0])}h.push(n)}const x=c(h,m,a,s);return t.asFill&&u(h,m,a,s,x),[y(x,s),m,a]}function c(t,n,o,r){const l=n*o,e=new Array(l),i=r*r+1;for(let s=0;s<l;++s)e[s]=i;for(const s of t){const t=s.length;for(let l=1;l<t;++l){const t=s[l-1],i=s[l];let f,m,a,c;t[0]<i[0]?(f=t[0],m=i[0]):(f=i[0],m=t[0]),t[1]<i[1]?(a=t[1],c=i[1]):(a=i[1],c=t[1]);let u=Math.floor(f)-r,y=Math.floor(m)+r,h=Math.floor(a)-r,x=Math.floor(c)+r;u<0&&(u=0),y>n&&(y=n),h<0&&(h=0),x>o&&(x=o);const M=i[0]-t[0],g=i[1]-t[1],p=M*M+g*g;for(let r=u;r<y;r++)for(let l=h;l<x;l++){let s,f,m=(r-t[0])*M+(l-t[1])*g;m<0?(s=t[0],f=t[1]):m>p?(s=i[0],f=i[1]):(m/=p,s=t[0]+m*M,f=t[1]+m*g);const a=(r-s)*(r-s)+(l-f)*(l-f),c=(o-l-1)*n+r;a<e[c]&&(e[c]=a)}}}for(let s=0;s<l;++s)e[s]=Math.sqrt(e[s]);return e}function u(t,n,o,r,l){for(const e of t){const t=e.length;for(let i=1;i<t;++i){const t=e[i-1],s=e[i];let f,m,a,c;t[0]<s[0]?(f=t[0],m=s[0]):(f=s[0],m=t[0]),t[1]<s[1]?(a=t[1],c=s[1]):(a=s[1],c=t[1]);let u=Math.floor(f),y=Math.floor(m)+1,h=Math.floor(a),x=Math.floor(c)+1;u<r&&(u=r),y>n-r&&(y=n-r),h<r&&(h=r),x>o-r&&(x=o-r);for(let e=h;e<x;++e){if(t[1]>e==s[1]>e)continue;const i=(o-e-1)*n;for(let n=u;n<y;++n)n<(s[0]-t[0])*(e-t[1])/(s[1]-t[1])+t[0]&&(l[i+n]=-l[i+n]);for(let t=r;t<u;++t)l[i+t]=-l[i+t]}}}}function y(t,o){const r=2*o,l=t.length,e=new Uint8Array(4*l);for(let i=0;i<l;++i){const o=.5-t[i]/r;n(o,e,4*i)}return e}export{a as buildSDF,f as getExtent,r as getSDFInfo,m as getSDFMetrics,l as getSDFSymbol};\n"],"sourceRoot":""}