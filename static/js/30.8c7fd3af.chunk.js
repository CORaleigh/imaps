(this.webpackJsonpimaps=this.webpackJsonpimaps||[]).push([[30,21],{106:function(e,t,r){"use strict";r.d(t,"a",(function(){return K})),r.d(t,"b",(function(){return q})),r.d(t,"c",(function(){return g})),r.d(t,"d",(function(){return j})),r.d(t,"e",(function(){return w})),r.d(t,"f",(function(){return h})),r.d(t,"g",(function(){return m})),r.d(t,"h",(function(){return I})),r.d(t,"i",(function(){return _})),r.d(t,"j",(function(){return x})),r.d(t,"k",(function(){return ee})),r.d(t,"l",(function(){return y})),r.d(t,"m",(function(){return u})),r.d(t,"n",(function(){return p})),r.d(t,"o",(function(){return O})),r.d(t,"p",(function(){return T})),r.d(t,"q",(function(){return L})),r.d(t,"r",(function(){return A})),r.d(t,"s",(function(){return J})),r.d(t,"t",(function(){return C})),r.d(t,"u",(function(){return P})),r.d(t,"v",(function(){return D})),r.d(t,"w",(function(){return G})),r.d(t,"x",(function(){return B})),r.d(t,"y",(function(){return b})),r.d(t,"z",(function(){return z})),r.d(t,"A",(function(){return Q}));var n=r(88),i=r(85),a=r(132),o=r(259),s=r(130);const l=["field","field2","field3","normalizationField","rotationInfo.field","proportionalSymbolInfo.field","proportionalSymbolInfo.normalizationField","colorInfo.field","colorInfo.normalizationField"],c=["field","normalizationField"];function u(e,t){if(null!=e&&null!=t)for(const r of Array.isArray(e)?e:[e])if(d(l,r,t),"visualVariables"in r&&r.visualVariables)for(const e of r.visualVariables)d(c,e,t)}function d(e,t,r){if(e)for(const n of e){const e=Object(a.b)(n,t),i=e&&"function"!=typeof e&&r.get(e);i&&Object(a.c)(n,i.name,t)}}function p(e,t){if(null!=e&&null!=t&&t.fields.length)if("startField"in e){const r=t.get(e.startField),n=t.get(e.endField);e.startField=r&&r.name||null,e.endField=n&&n.name||null}else{const r=t.get(e.startTimeField),n=t.get(e.endTimeField);e.startTimeField=r&&r.name||null,e.endTimeField=n&&n.name||null}}const f=new Set;function y(e,t){return e&&t?(f.clear(),m(f,e,t),Array.from(f).sort()):[]}function m(e,t,r){var n;if(r)if(null!=t&&null!=(n=t.fields)&&n.length)if(r.includes("*"))for(const{name:i}of t.fields)e.add(i);else for(const i of r)h(e,t,i);else{if(r.includes("*"))return e.clear(),void e.add("*");for(const t of r)e.add(t)}}function h(e,t,r){if("string"==typeof r)if(t){const n=t.get(r);n&&e.add(n.name)}else e.add(r)}function b(e,t){return Object(i.j)(t)||Object(i.j)(e)?[]:t.includes("*")?e.fields.map((e=>e.name)):t}async function g(e,t,r){var n;if(!r)return;const{arcadeUtils:i}=await Object(s.e)(),a=i.extractFieldNames(r,null==t||null==(n=t.fields)?void 0:n.map((e=>e.name)));for(const o of a)h(e,t,o)}async function v(e,t,i){if(i&&"1=1"!==i){const a=(await Promise.all([r.e(10),r.e(240)]).then(r.bind(null,285))).WhereClause.create(i,t);if(!a.isStandardized)throw new n.a("fieldUtils:collectFilterFields","Where clause is not standardized");m(e,t,a.fieldNames)}}function O({displayField:e,fields:t}){return e||(t&&t.length?S(t,"name-or-title")||S(t,"unique-identifier")||S(t,"type-or-category")||function(e){for(const t of e){if(!t||!t.name)continue;const e=t.name.toLowerCase();if(e.indexOf("name")>-1||e.indexOf("title")>-1)return t.name}return null}(t):null)}function S(e,t){for(const r of e)if(r&&r.valueType&&r.valueType===t)return r.name;return null}async function j(e,t){if(!t)return;const r=Object(a.b)("elevationInfo.featureExpressionInfo",t);return r?r.collectRequiredFields(e,t.fieldsIndex):void 0}async function w(e,t,r){var n,i;if(!t||!r||"cluster"!==r.type)return;const a=[];if(null!=(n=r.popupTemplate)&&n.expressionInfos&&a.push(...r.popupTemplate.expressionInfos.map((r=>g(e,t.fieldsIndex,r.expression)))),Array.isArray(null==(i=r.popupTemplate)?void 0:i.content)){const n=r.popupTemplate.content;for(const r of n)"expression"===r.type&&r.expressionInfo&&a.push(g(e,t.fieldsIndex,r.expressionInfo.expression))}r.fields&&a.push(...r.fields.map((r=>async function(e,t,r){r.outStatistic.onStatisticValueExpression?g(e,t,r.outStatistic.onStatisticValueExpression):e.add(r.outStatistic.onStatisticField)}(e,t.fieldsIndex,r)))),await Promise.all(a)}async function I(e,t,r){t&&(t.timeInfo&&Object(i.k)(r)&&r.timeExtent&&m(e,t.fieldsIndex,[t.timeInfo.startField,t.timeInfo.endField]),t.floorInfo&&m(e,t.fieldsIndex,[t.floorInfo.floorField]),Object(i.k)(r)&&Object(i.k)(r.where)&&await v(e,t.fieldsIndex,r.where))}async function x(e,t,r){t&&r&&await Promise.all(r.map((r=>async function(e,t,r){t&&r&&(r.valueExpression?await g(e,t.fieldsIndex,r.valueExpression):r.field&&h(e,t.fieldsIndex,r.field))}(e,t,r))))}function T(e){if(!e)return[];const t="editFieldsInfo"in e&&e.editFieldsInfo;return t?y(e.fieldsIndex,[t&&t.creatorField,t&&t.creationDateField,t&&t.editorField,t&&t.editDateField]):[]}function L(e){if(!e)return[];const t=e.geometryFieldsInfo;return t?y(e.fieldsIndex,[t.shapeAreaField,t.shapeLengthField]):[]}async function _(e,t){const{labelingInfo:r,fieldsIndex:n}=t;r&&r.length&&await Promise.all(r.map((t=>async function(e,t,r){if(!r)return;const n=r.getLabelExpression(),i=r.where;if("arcade"===n.type)await g(e,t,n.expression);else{const r=n.expression.match(/{[^}]*}/g);r&&r.forEach((r=>{h(e,t,r.slice(1,-1))}))}await v(e,t,i)}(e,n,t))))}function A(e){const t=e.defaultValue;return void 0!==t&&k(e,t)?t:e.nullable?null:void 0}function F(e){return"number"==typeof e&&!isNaN(e)&&isFinite(e)}function R(e){return null===e||F(e)}const N="isInteger"in Number?Number.isInteger:e=>"number"==typeof e&&isFinite(e)&&Math.floor(e)===e;function E(e){return null===e||N(e)}function M(e){return null!=e&&"string"==typeof e}function U(e){return null===e||M(e)}function V(){return!0}function k(e,t){let r;switch(e.type){case"date":case"integer":case"long":case"small-integer":case"esriFieldTypeDate":case"esriFieldTypeInteger":case"esriFieldTypeLong":case"esriFieldTypeSmallInteger":r=e.nullable?E:N;break;case"double":case"single":case"esriFieldTypeSingle":case"esriFieldTypeDouble":r=e.nullable?R:F;break;case"string":case"esriFieldTypeString":r=e.nullable?U:M;break;default:r=V}return 1===arguments.length?r:r(t)}const G=["integer","small-integer","single","double"],$=new Set([...G,"esriFieldTypeInteger","esriFieldTypeSmallInteger","esriFieldTypeSingle","esriFieldTypeDouble"]);function P(e){return null!=e&&$.has(e.type)}function D(e){return null!=e&&("string"===e.type||"esriFieldTypeString"===e.type)}function C(e){return null!=e&&("date"===e.type||"esriFieldTypeDate"===e.type)}var K,q;function B(e){return null==e||"number"==typeof e&&isNaN(e)?null:e}function z(e,t){return e.nullable&&null===t?null:P(e)&&!function(e,t){const r="string"==typeof e?H(e):e;return!!r&&(r.isInteger?N(t)&&t>=r.min&&t<=r.max:t>=r.min&&t<=r.max)}(e.type,Number(t))?K.OUT_OF_RANGE:k(e,t)?e.domain?Object(o.c)(e.domain,t):null:q.INVALID_TYPE}function J(e){return Object(o.b)(e.domain)||(P(e)?H(e.type):void 0)}function H(e){switch(e){case"esriFieldTypeSmallInteger":case"small-integer":return W;case"esriFieldTypeInteger":case"integer":return Y;case"esriFieldTypeSingle":case"single":return X;case"esriFieldTypeDouble":case"double":return Z}}(K||(K={})).OUT_OF_RANGE="numeric-range-validation-error::out-of-range",function(e){e.INVALID_TYPE="type-validation-error::invalid-type"}(q||(q={}));const W={min:-32768,max:32767,isInteger:!0},Y={min:-2147483648,max:2147483647,isInteger:!0},X={min:-34e37,max:12e37,isInteger:!1},Z={min:-Number.MAX_VALUE,max:Number.MAX_VALUE,isInteger:!1};function Q(e,t,r){switch(e){case o.a.INVALID_CODED_VALUE:return`Value ${r} is not in the coded domain - field: ${t.name}, domain: ${JSON.stringify(t.domain)}`;case o.a.VALUE_OUT_OF_RANGE:return`Value ${r} is out of the range of valid values - field: ${t.name}, domain: ${JSON.stringify(t.domain)}`;case q.INVALID_TYPE:return`Value ${r} is not a valid value for the field type - field: ${t.name}, type: ${t.type}, nullable: ${t.nullable}`;case K.OUT_OF_RANGE:{const{min:e,max:n}=H(t.type);return`Value ${r} is out of range for the number type - field: ${t.name}, type: ${t.type}, value range is ${e} to ${n}`}}}function ee(e,t){return!function(e,t,r){if(!t||!t.attributes||!e){if(Object(i.k)(r))for(const t of e)r.add(t);return!0}const n=t.attributes;let a=!1;for(const o of e)if(!(o in n)){if(a=!0,!Object(i.k)(r))break;r.add(o)}return a}(e,t,null)}},130:function(e,t,r){"use strict";r.d(t,"a",(function(){return u})),r.d(t,"b",(function(){return c})),r.d(t,"c",(function(){return s})),r.d(t,"d",(function(){return l})),r.d(t,"e",(function(){return o}));r(99);var n=r(85),i=r(96);let a;function o(){return a||(a=(async()=>{const e=await Promise.all([r.e(43),r.e(131),r.e(208)]).then(r.bind(null,390));return{arcade:e.arcade,arcadeUtils:e,Dictionary:e.Dictionary,Feature:e.arcadeFeature}})()),a}const s=(e,t,r)=>u.create(e,t,r,null,["$feature"]),l=(e,t,r)=>u.create(e,t,r,null,["$feature","$view"]),c=(e,t,r,n)=>u.create(e,t,r,n,["$feature","$view"]);class u{constructor(e,t,r,n,i,a,o,s){this.script=e,this.evaluate=i;const l=Array.isArray(o)?o:o.fields;this.fields=l,this._syntaxTree=n,this._arcade=t,this._arcadeDictionary=r,this._arcadeFeature=a,this._spatialReference=s,this._referencesGeometry=t.scriptTouchesGeometry(this._syntaxTree),this._referencesScale=this._arcade.referencesMember(this._syntaxTree,"scale")}static async create(e,t,r,a,s,l){const{arcade:c,Feature:d,Dictionary:p}=await o(),f=i.a.fromJSON(t),y=c.parseScript(e,l),m=s.reduce(((e,t)=>({...e,[t]:null})),{});let h=null;Object(n.k)(a)&&(h=new p(a),h.immutable=!0,m.$config=null);const b=c.scriptUsesGeometryEngine(y)&&c.enableGeometrySupport(),g=c.scriptUsesFeatureSet(y)&&c.enableFeatureSetSupport(),v=c.scriptIsAsync(y)&&c.enableAsyncSupport(),O={vars:m,spatialReference:f,useAsync:!!v},S=new p;S.immutable=!1,S.setField("scale",0);const j=c.compileScript(y,O);return await Promise.all([b,g,v]),new u(e,c,p,y,(e=>("$view"in e&&e.$view&&(S.setField("scale",e.$view.scale),e.$view=S),h&&(e.$config=h),j({vars:e,spatialReference:f}))),new d,r,f)}repurposeFeature(e){return e.geometry&&!e.geometry.spatialReference&&(e.geometry.spatialReference=this._spatialReference),this._arcadeFeature.repurposeFromGraphicLikeObject(e.geometry,e.attributes,{fields:this.fields}),this._arcadeFeature}createDictionary(){return new this._arcadeDictionary}referencesMember(e){return this._arcade.referencesMember(this._syntaxTree,e)}referencesFunction(e){return this._arcade.referencesFunction(this._syntaxTree,e)}referencesGeometry(){return this._referencesGeometry}referencesScale(){return this._referencesScale}extractFieldLiterals(){return this._arcade.extractExpectedFieldLiterals(this._syntaxTree)}}},156:function(e,t,r){"use strict";r.d(t,"a",(function(){return O})),r.d(t,"b",(function(){return h})),r.d(t,"c",(function(){return j})),r.d(t,"d",(function(){return f})),r.d(t,"e",(function(){return m})),r.d(t,"f",(function(){return I})),r.d(t,"g",(function(){return w})),r.d(t,"h",(function(){return g})),r.d(t,"i",(function(){return v})),r.d(t,"j",(function(){return p})),r.d(t,"k",(function(){return b})),r.d(t,"l",(function(){return S})),r.d(t,"m",(function(){return d})),r.d(t,"n",(function(){return y}));var n=r(121),i=r(101),a=r(96),o=r(150),s=r(85),l=(r(91),r(169));var c=r(336),u=r(258);const d={type:Boolean,value:!0,json:{origins:{service:{read:!1,write:!1},"web-map":{read:!1,write:!1}},name:"screenSizePerspective",write:!0}},p={type:Boolean,value:!0,json:{name:"disablePopup",read:{reader:(e,t)=>!t.disablePopup},write:{enabled:!0,writer(e,t,r){t[r]=!e}}}},f={type:Boolean,value:!0,json:{name:"showLabels",write:!0}},y={type:String,json:{origins:{"portal-item":{write:!1}},write:{isRequired:!0,ignoreOrigin:!0,writer:o.g}}},m={type:Boolean,value:!0,json:{origins:{service:{read:{enabled:!1}}},name:"showLegend",write:!0}},h={value:null,type:c.a,json:{origins:{service:{name:"elevationInfo",write:!0}},name:"layerDefinition.elevationInfo",write:!0}};function b(e){return{type:e,readOnly:!0,json:{origins:{service:{read:!0}},read:!1}}}const g={type:Number,json:{origins:{"web-document":{write:!0,read:!0},"portal-item":{write:!0}}}},v={...g,json:{...g.json,origins:{"web-document":{...g.json.origins["web-document"],write:{enabled:!0,target:{opacity:{type:Number},"layerDefinition.drawingInfo.transparency":{type:Number}}}}},read:{source:["layerDefinition.drawingInfo.transparency","drawingInfo.transparency"],reader:(e,t,r)=>r&&"service"!==r.origin||!t.drawingInfo||void 0===t.drawingInfo.transparency?t.layerDefinition&&t.layerDefinition.drawingInfo&&void 0!==t.layerDefinition.drawingInfo.transparency?Object(u.b)(t.layerDefinition.drawingInfo.transparency):void 0:Object(u.b)(t.drawingInfo.transparency)}}},O={type:n.a,readOnly:!0,get(){var e,t;if(null==(e=this.layer)||!e.timeInfo)return null;const{datesInUnknownTimezone:r,timeOffset:i,useViewTime:a}=this.layer,o=null==(t=this.view)?void 0:t.timeExtent;let c=this.layer.timeExtent;r&&(c=function(e){if(!e)return e;const{start:t,end:r}=e;return new n.a({start:Object(s.k)(t)?Object(l.b)(t,t.getTimezoneOffset(),"minutes"):t,end:Object(s.k)(r)?Object(l.b)(r,r.getTimezoneOffset(),"minutes"):r})}(c));let u=a?o&&c?o.intersection(c):o||c:c;if(!u||u.isEmpty||u.isAllTime)return u;i&&(u=u.offset(-i.value,i.unit)),r&&(u=function(e){if(!e)return e;const{start:t,end:r}=e;return new n.a({start:Object(s.k)(t)?Object(l.b)(t,-t.getTimezoneOffset(),"minutes"):t,end:Object(s.k)(r)?Object(l.b)(r,-r.getTimezoneOffset(),"minutes"):r})}(u));const d=this._get("timeExtent");return u.equals(d)?d:u}},S={type:i.a,readOnly:!0,json:{origins:{service:{read:{source:["fullExtent","spatialReference"],reader:(e,t)=>{const r=i.a.fromJSON(e);return null!=t.spatialReference&&"object"==typeof t.spatialReference&&(r.spatialReference=a.a.fromJSON(t.spatialReference)),r}}}},read:!1}},j={type:String,json:{origins:{service:{read:!1},"portal-item":{read:!1}}}},w={type:Number,json:{origins:{service:{write:{enabled:!1}}},read:{source:"layerDefinition.minScale"},write:{target:"layerDefinition.minScale"}}},I={type:Number,json:{origins:{service:{write:{enabled:!1}}},read:{source:"layerDefinition.maxScale"},write:{target:"layerDefinition.maxScale"}}}},239:function(e,t,r){"use strict";r.d(t,"a",(function(){return o}));var n=r(79),i=r(81),a=(r(84),r(82),r(83),r(80));const o=e=>{let t=class extends e{constructor(){super(...arguments),this.minScale=0,this.maxScale=0}get effectiveScaleRange(){const e={minScale:this.minScale,maxScale:this.maxScale},t=this.parent;t&&"effectiveScaleRange"in t&&function(e,t){e.minScale=e.minScale>0?t.minScale>0?Math.min(e.minScale,t.minScale):e.minScale:t.minScale,e.maxScale=e.maxScale>0?t.maxScale>0?Math.max(e.maxScale,t.maxScale):e.maxScale:t.maxScale}(e,t.effectiveScaleRange);const r=this._get("effectiveScaleRange");return r&&r.minScale===e.minScale&&r.maxScale===e.maxScale?r:e}};return Object(n.a)([Object(i.b)({type:Number,nonNullable:!0,json:{write:!0}})],t.prototype,"minScale",void 0),Object(n.a)([Object(i.b)({type:Number,nonNullable:!0,json:{write:!0}})],t.prototype,"maxScale",void 0),Object(n.a)([Object(i.b)({readOnly:!0})],t.prototype,"effectiveScaleRange",null),t=Object(n.a)([Object(a.a)("esri.layers.mixins.ScaleRangeLayer")],t),t}},246:function(e,t,r){"use strict";r.d(t,"a",(function(){return a}));var n=r(114),i=r(158);const a={inches:Object(n.b)(1,"meters","inches"),feet:Object(n.b)(1,"meters","feet"),"us-feet":Object(n.b)(1,"meters","us-feet"),yards:Object(n.b)(1,"meters","yards"),miles:Object(n.b)(1,"meters","miles"),"nautical-miles":Object(n.b)(1,"meters","nautical-miles"),millimeters:Object(n.b)(1,"meters","millimeters"),centimeters:Object(n.b)(1,"meters","centimeters"),decimeters:Object(n.b)(1,"meters","decimeters"),meters:Object(n.b)(1,"meters","meters"),kilometers:Object(n.b)(1,"meters","kilometers"),"decimal-degrees":1/Object(n.k)(1,"meters",i.a.radius)}},259:function(e,t,r){"use strict";var n;function i(e,t){switch(e.type){case"range":{const r="range"in e?e.range[0]:e.minValue,i="range"in e?e.range[1]:e.maxValue;if(+t<r||+t>i)return n.VALUE_OUT_OF_RANGE;break}case"coded-value":case"codedValue":if(null==e.codedValues||e.codedValues.every((e=>null==e||e.code!==t)))return n.INVALID_CODED_VALUE}return null}function a(e){if(e&&"range"===e.type)return{min:"range"in e?e.range[0]:e.minValue,max:"range"in e?e.range[1]:e.maxValue}}r.d(t,"a",(function(){return n})),r.d(t,"b",(function(){return a})),r.d(t,"c",(function(){return i})),function(e){e.VALUE_OUT_OF_RANGE="domain-validation-error::value-out-of-range",e.INVALID_CODED_VALUE="domain-validation-error::invalid-coded-value"}(n||(n={}))},261:function(e,t,r){"use strict";r.d(t,"a",(function(){return f}));var n=r(79),i=r(88),a=r(98),o=r(81),s=(r(84),r(82),r(83),r(80)),l=r(92),c=r(324),u=r(330);const d={"web-scene/operational-layers":{ArcGISFeatureLayer:!0,ArcGISImageServiceLayer:!0,ArcGISMapServiceLayer:!0,ArcGISSceneServiceLayer:!0,ArcGISTiledElevationServiceLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,BuildingSceneLayer:!0,GroupLayer:!0,IntegratedMeshLayer:!0,OGCFeatureLayer:!0,PointCloudLayer:!0,WebTiledLayer:!0,CSV:!0,GeoJSON:!0,VectorTileLayer:!0,WFS:!0,WMS:!0,KML:!0,RasterDataLayer:!0,Voxel:!0},"web-scene/basemap":{ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,WebTiledLayer:!0,OpenStreetMap:!0,VectorTileLayer:!0,ArcGISImageServiceLayer:!0,WMS:!0,ArcGISMapServiceLayer:!0},"web-scene/ground":{ArcGISTiledElevationServiceLayer:!0,RasterDataElevationLayer:!0},"web-map/operational-layers":{ArcGISFeatureLayer:!0,ArcGISImageServiceLayer:!0,ArcGISImageServiceVectorLayer:!0,ArcGISMapServiceLayer:!0,ArcGISStreamLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,BingMapsAerial:!0,BingMapsHybrid:!0,BingMapsRoad:!0,CSV:!0,GeoRSS:!0,GeoJSON:!0,GroupLayer:!0,KML:!0,OGCFeatureLayer:!0,SubtypeGroupLayer:!0,VectorTileLayer:!0,WFS:!0,WMS:!0,WebTiledLayer:!0},"web-map/basemap":{ArcGISImageServiceLayer:!0,ArcGISImageServiceVectorLayer:!0,ArcGISMapServiceLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,OpenStreetMap:!0,VectorTileLayer:!0,WMS:!0,WebTiledLayer:!0,BingMapsAerial:!0,BingMapsRoad:!0,BingMapsHybrid:!0},"web-map/tables":{ArcGISFeatureLayer:!0},"portal-item/operational-layers":{ArcGISFeatureLayer:!0,ArcGISSceneServiceLayer:!0,PointCloudLayer:!0,BuildingSceneLayer:!0,IntegratedMeshLayer:!0}};var p=r(156);const f=e=>{let t=class extends e{constructor(){super(...arguments),this.title=null}writeListMode(e,t,r,n){(n&&"ground"===n.layerContainerType||e&&Object(u.a)(this,r,{},n))&&(t[r]=e)}writeOperationalLayerType(e,t,r,n){!e||n&&"tables"===n.layerContainerType||(t.layerType=e)}writeTitle(e,t){t.title=e||"Layer"}read(e,t){t&&(t.layer=this),Object(c.b)(this,e,(t=>super.read(e,t)),t)}write(e,t){if(null!=t&&t.origin){const e=`${t.origin}/${t.layerContainerType||"operational-layers"}`,n=d[e];let a=n&&n[this.operationalLayerType];var r;if("ArcGISTiledElevationServiceLayer"===this.operationalLayerType&&"web-scene/operational-layers"===e&&(a=!1),!a)return null==(r=t.messages)||r.push(new i.a("layer:unsupported",`Layers (${this.title}, ${this.id}) of type '${this.declaredClass}' are not supported in the context of '${e}'`,{layer:this})),null}const n=super.write(e,{...t,layer:this}),o=!!t&&!!t.messages&&!!t.messages.filter((e=>e instanceof i.a&&"web-document-write:property-required"===e.name)).length;var s;return Object(a.v)(null==n?void 0:n.url)?(null==t||null==(s=t.messages)||s.push(new i.a("layer:invalid-url",`Layer (${this.title}, ${this.id}) of type '${this.declaredClass}' using a Blob URL cannot be written to web scenes and web maps`,{layer:this})),null):!this.url&&o?null:n}beforeSave(){}};return Object(n.a)([Object(o.b)({type:String,json:{write:{ignoreOrigin:!0},origins:{"web-scene":{write:{isRequired:!0,ignoreOrigin:!0}},"portal-item":{write:!1}}}})],t.prototype,"id",void 0),Object(n.a)([Object(o.b)({json:{write:{ignoreOrigin:!0},origins:{"web-map":{read:!1,write:!1}}}})],t.prototype,"listMode",void 0),Object(n.a)([Object(l.a)("listMode")],t.prototype,"writeListMode",null),Object(n.a)([Object(o.b)({type:String,readOnly:!0,json:{read:!1,write:{target:"layerType",ignoreOrigin:!0},origins:{"portal-item":{write:!1}}}})],t.prototype,"operationalLayerType",void 0),Object(n.a)([Object(l.a)("operationalLayerType")],t.prototype,"writeOperationalLayerType",null),Object(n.a)([Object(o.b)(p.h)],t.prototype,"opacity",void 0),Object(n.a)([Object(o.b)({type:String,json:{write:{ignoreOrigin:!0,writerEnsuresNonNull:!0},origins:{"web-scene":{write:{isRequired:!0,ignoreOrigin:!0,writerEnsuresNonNull:!0}},"portal-item":{write:!1}}},value:"Layer"})],t.prototype,"title",void 0),Object(n.a)([Object(l.a)("title")],t.prototype,"writeTitle",null),Object(n.a)([Object(o.b)({type:Boolean,json:{name:"visibility"}})],t.prototype,"visible",void 0),t=Object(n.a)([Object(s.a)("esri.layers.mixins.OperationalLayer")],t),t}},343:function(e,t,r){"use strict";r.d(t,"a",(function(){return c}));var n=r(79),i=r(87),a=r(85),o=r(81),s=(r(84),r(82),r(83),r(80)),l=r(201);const c=e=>{let t=class extends e{get title(){if(this._get("title")&&"defaults"!==this.originOf("title"))return this._get("title");if(this.url){const e=Object(l.f)(this.url);if(Object(a.k)(e)&&e.title)return e.title}return this._get("title")||""}set title(e){this._set("title",e)}set url(e){this._set("url",Object(l.h)(e,i.a.getLogger(this.declaredClass)))}};return Object(n.a)([Object(o.b)()],t.prototype,"title",null),Object(n.a)([Object(o.b)({type:String})],t.prototype,"url",null),t=Object(n.a)([Object(s.a)("esri.layers.mixins.ArcGISService")],t),t}},362:function(e,t,r){"use strict";r.d(t,"a",(function(){return o}));var n=r(79),i=r(81),a=(r(84),r(82),r(83),r(80));const o=e=>{let t=class extends e{get apiKey(){var e;return this._isOverridden("apiKey")?this._get("apiKey"):function(e){return"portalItem"in e}(this)?null==(e=this.portalItem)?void 0:e.apiKey:null}set apiKey(e){null!=e?this._override("apiKey",e):(this._clearOverride("apiKey"),this.clear("apiKey","user"))}};return Object(n.a)([Object(i.b)({type:String})],t.prototype,"apiKey",null),t=Object(n.a)([Object(a.a)("esri.layers.mixins.APIKeyMixin")],t),t}},392:function(e,t,r){"use strict";r.d(t,"a",(function(){return v}));var n,i=r(79),a=r(84),o=r(90),s=r(86),l=r(114),c=r(167),u=r(81),d=(r(82),r(83),r(93)),p=r(80),f=r(92);const y=Object(o.b)()({orthometric:"gravity-related-height",gravity_related_height:"gravity-related-height",ellipsoidal:"ellipsoidal"}),m=y.jsonValues.slice();Object(a.i)(m,"orthometric");const h=Object(o.b)()({meter:"meters",foot:"feet","us-foot":"us-feet","clarke-foot":"clarke-feet","clarke-yard":"clarke-yards","clarke-link":"clarke-links","sears-yard":"sears-yards","sears-foot":"sears-feet","sears-chain":"sears-chains","benoit-1895-b-chain":"benoit-1895-b-chains","indian-yard":"indian-yards","indian-1937-yard":"indian-1937-yards","gold-coast-foot":"gold-coast-feet","sears-1922-truncated-chain":"sears-1922-truncated-chains","50-kilometers":"50-kilometers","150-kilometers":"150-kilometers"});let b=n=class extends s.a{constructor(e){super(e),this.heightModel="gravity-related-height",this.heightUnit="meters",this.vertCRS=null}writeHeightModel(e,t,r){return y.write(e,t,r)}readHeightModel(e,t,r){return y.read(e)||(r&&r.messages&&r.messages.push(function(e,t){return new c.a("height-model:unsupported",`Height model of value '${e}' is not supported`,t)}(e,{context:r})),null)}readHeightUnit(e,t,r){return h.read(e)||(r&&r.messages&&r.messages.push(g(e,{context:r})),null)}readHeightUnitService(e,t,r){return Object(l.u)(e)||h.read(e)||(r&&r.messages&&r.messages.push(g(e,{context:r})),null)}readVertCRS(e,t){return t.vertCRS||t.ellipsoid||t.geoid}clone(){return new n({heightModel:this.heightModel,heightUnit:this.heightUnit,vertCRS:this.vertCRS})}equals(e){return!!e&&(this===e||this.heightModel===e.heightModel&&this.heightUnit===e.heightUnit&&this.vertCRS===e.vertCRS)}static deriveUnitFromSR(e,t){const r=Object(l.h)(t);return new n({heightModel:e.heightModel,heightUnit:r,vertCRS:e.vertCRS})}write(e,t){return t={origin:"web-scene",...t},super.write(e,t)}static fromJSON(e){if(!e)return null;const t=new n;return t.read(e,{origin:"web-scene"}),t}};function g(e,t){return new c.a("height-unit:unsupported",`Height unit of value '${e}' is not supported`,t)}Object(i.a)([Object(u.b)({type:y.apiValues,constructOnly:!0,json:{origins:{"web-scene":{type:m,default:"ellipsoidal"}}}})],b.prototype,"heightModel",void 0),Object(i.a)([Object(f.a)("web-scene","heightModel")],b.prototype,"writeHeightModel",null),Object(i.a)([Object(d.a)(["web-scene","service"],"heightModel")],b.prototype,"readHeightModel",null),Object(i.a)([Object(u.b)({type:h.apiValues,constructOnly:!0,json:{origins:{"web-scene":{type:h.jsonValues,write:h.write}}}})],b.prototype,"heightUnit",void 0),Object(i.a)([Object(d.a)("web-scene","heightUnit")],b.prototype,"readHeightUnit",null),Object(i.a)([Object(d.a)("service","heightUnit")],b.prototype,"readHeightUnitService",null),Object(i.a)([Object(u.b)({type:String,constructOnly:!0,json:{origins:{"web-scene":{write:!0}}}})],b.prototype,"vertCRS",void 0),Object(i.a)([Object(d.a)("service","vertCRS",["vertCRS","ellipsoid","geoid"])],b.prototype,"readVertCRS",null),b=n=Object(i.a)([Object(p.a)("esri.geometry.HeightModelInfo")],b);const v=b},610:function(e,t,r){"use strict";function n(){const e=crypto.getRandomValues(new Uint16Array(8));e[3]=4095&e[3]|16384,e[4]=16383&e[4]|32768;const t=t=>e[t].toString(16);return t(0)+t(1)+"-"+t(2)+"-"+t(3)+"-"+t(4)+"-"+t(5)+t(6)+t(7)}r.d(t,"a",(function(){return n}))},912:function(e,t,r){"use strict";r.d(t,"a",(function(){return k})),r.d(t,"b",(function(){return F}));var n=r(79),i=r(103),a=r(88),o=(r(82),r(87)),s=r(85),l=r(91),c=r(98),u=r(81),d=(r(84),r(83),r(93)),p=r(80),f=r(92),y=r(782),m=r(101),h=r(392),b=r(96),g=r(201),v=r(156),O=r(955),S=r(181),j=r(547),w=r(298),I=r(610),x=r(931);async function T(e,t,r){if(!t||!t.resources)return;const n=t.portalItem===e.portalItem?new Set(e.paths):new Set;e.paths.length=0,e.portalItem=t.portalItem;const i=new Set(t.resources.toKeep.map((e=>e.resource.path))),o=new Set,s=[];i.forEach((t=>{n.delete(t),e.paths.push(t)}));for(const a of t.resources.toUpdate)if(n.delete(a.resource.path),i.has(a.resource.path)||o.has(a.resource.path)){const{resource:t,content:n,finish:i,error:o}=a,l=Object(x.getSiblingOfSameTypeI)(t,Object(I.a)());e.paths.push(l.path),s.push(L({resource:l,content:n,finish:i,error:o},r))}else e.paths.push(a.resource.path),s.push(_(a,r)),o.add(a.resource.path);for(const a of t.resources.toAdd)s.push(L(a,r)),e.paths.push(a.resource.path);if(n.forEach((e=>{const r=t.portalItem.resourceFromPath(e);s.push(r.portalItem.removeResource(r).catch((()=>{})))})),0===s.length)return;const c=await Object(l.i)(s);Object(l.t)(r);const u=c.filter((e=>"error"in e)).map((e=>e.error));if(u.length>0)throw new a.a("save:resources","Failed to save one or more resources",{errors:u})}async function L(e,t){const r=await Object(w.c)(e.resource.portalItem.addResource(e.resource,e.content,t));if(!0!==r.ok)throw e.error&&e.error(r.error),r.error;e.finish&&e.finish(e.resource)}async function _(e,t){const r=await Object(w.c)(e.resource.update(e.content,t));if(!0!==r.ok)throw e.error(r.error),r.error;e.finish(e.resource)}const A=o.a.getLogger("esri.layers.mixins.SceneService"),F=e=>{let t=class extends e{constructor(){super(...arguments),this.spatialReference=null,this.fullExtent=null,this.heightModelInfo=null,this.minScale=0,this.maxScale=0,this.version={major:Number.NaN,minor:Number.NaN,versionString:""},this.copyright=null,this.sublayerTitleMode="item-title",this.title=null,this.layerId=null,this.indexInfo=null,this._debouncedSaveOperations=Object(l.h)((async(e,t,r)=>{switch(e){case k.SAVE:return this._save(t);case k.SAVE_AS:return this._saveAs(r,t)}}))}readSpatialReference(e,t){return this._readSpatialReference(t)}_readSpatialReference(e){if(null!=e.spatialReference)return b.a.fromJSON(e.spatialReference);{const t=e.store,r=t.indexCRS||t.geographicCRS,n=r&&parseInt(r.substring(r.lastIndexOf("/")+1,r.length),10);return null!=n?new b.a(n):null}}readFullExtent(e,t,r){if(null!=e&&"object"==typeof e){const n=null==e.spatialReference?{...e,spatialReference:this._readSpatialReference(t)}:e;return m.a.fromJSON(n,r)}const n=t.store,i=this._readSpatialReference(t);return null==i||null==n||null==n.extent||!Array.isArray(n.extent)||n.extent.some((e=>e<R))?null:new m.a({xmin:n.extent[0],ymin:n.extent[1],xmax:n.extent[2],ymax:n.extent[3],spatialReference:i})}parseVersionString(e){const t={major:Number.NaN,minor:Number.NaN,versionString:e},r=e.split(".");return r.length>=2&&(t.major=parseInt(r[0],10),t.minor=parseInt(r[1],10)),t}readVersion(e,t){const r=t.store,n=null!=r.version?r.version.toString():"";return this.parseVersionString(n)}readTitlePortalItem(e){return"item-title"!==this.sublayerTitleMode?void 0:e}readTitleService(e,t){const r=this.portalItem&&this.portalItem.title;if("item-title"===this.sublayerTitleMode)return Object(g.j)(this.url,t.name);let n=t.name;if(!n&&this.url){const e=Object(g.f)(this.url);Object(s.k)(e)&&(n=e.title)}return"item-title-and-service-name"===this.sublayerTitleMode&&r&&(n=r+" - "+n),Object(g.a)(n)}set url(e){const t=Object(g.i)({layer:this,url:e,nonStandardUrlAllowed:!1,logger:A});this._set("url",t.url),null!=t.layerId&&this._set("layerId",t.layerId)}writeUrl(e,t,r,n){Object(g.k)(this,e,"layers",t,n)}get parsedUrl(){const e=this._get("url");if(!e)return null;const t=Object(c.M)(e);return null!=this.layerId&&(t.path=`${t.path}/layers/${this.layerId}`),t}async _fetchIndexAndUpdateExtent(e,t){this.indexInfo=Object(O.a)(this.parsedUrl.path,this.rootNode,e,this.apiKey,A,t),null==this.fullExtent||this.fullExtent.hasZ||this._updateExtent(await this.indexInfo)}_updateExtent(e){if("page"===(null==e?void 0:e.type)){var t,r;const n=e.rootIndex%e.pageSize,i=null==(t=e.rootPage)||null==(r=t.nodes)?void 0:r[n];if(null==i||null==i.obb||null==i.obb.center||null==i.obb.halfSize)throw new a.a("sceneservice:invalid-node-page","Invalid node page.");if(i.obb.center[0]<R||null==this.fullExtent||this.fullExtent.hasZ)return;const o=i.obb.halfSize,s=i.obb.center[2],l=Math.sqrt(o[0]*o[0]+o[1]*o[1]+o[2]*o[2]);this.fullExtent.zmin=s-l,this.fullExtent.zmax=s+l}else if("node"===(null==e?void 0:e.type)){var n;const t=null==(n=e.rootNode)?void 0:n.mbs;if(!Array.isArray(t)||4!==t.length||t[0]<R)return;const r=t[2],i=t[3];this.fullExtent.zmin=r-i,this.fullExtent.zmax=r+i}}async _fetchService(e){if(null==this.url)throw new a.a("sceneservice:url-not-set","Scene service can not be loaded without valid portal item or url");if(null==this.layerId&&/SceneServer\/*$/i.test(this.url)){const t=await this._fetchFirstLayerId(e);null!=t&&(this.layerId=t)}return this._fetchServiceLayer(e)}async _fetchFirstLayerId(e){const t=await Object(i.default)(this.url,{query:{f:"json",token:this.apiKey},responseType:"json",signal:e});if(t.data&&Array.isArray(t.data.layers)&&t.data.layers.length>0)return t.data.layers[0].id}async _fetchServiceLayer(e){const t=await Object(i.default)(this.parsedUrl.path,{query:{f:"json",token:this.apiKey},responseType:"json",signal:e});t.ssl&&(this.url=this.url.replace(/^http:/i,"https:"));let r=!1;if(t.data.layerType&&"Voxel"===t.data.layerType&&(r=!0),r)return this._fetchVoxelServiceLayer();const n=t.data;this.read(n,{origin:"service",url:this.parsedUrl}),this.validateLayer(n)}async _fetchVoxelServiceLayer(e){const t=(await Object(i.default)(this.parsedUrl.path+"/layer",{query:{f:"json",token:this.apiKey},responseType:"json",signal:e})).data;this.read(t,{origin:"service",url:this.parsedUrl}),this.validateLayer(t)}async _ensureLoadBeforeSave(){await this.load(),"beforeSave"in this&&"function"==typeof this.beforeSave&&await this.beforeSave()}validateLayer(e){}_updateTypeKeywords(e,t,r){e.typeKeywords||(e.typeKeywords=[]);const n=t.getTypeKeywords();for(const i of n)e.typeKeywords.push(i);e.typeKeywords&&(e.typeKeywords=e.typeKeywords.filter(((e,t,r)=>r.indexOf(e)===t)),r===E.newItem&&(e.typeKeywords=e.typeKeywords.filter((e=>"Hosted Service"!==e))))}async _saveAs(e,t){const r={...V,...t};let n=j.default.from(e);n||(A.error("_saveAs(): requires a portal item parameter"),await Promise.reject(new a.a("sceneservice:portal-item-required","_saveAs() requires a portal item to save to"))),n.id&&(n=n.clone(),n.id=null);const i=n.portal||S.a.getDefault();await this._ensureLoadBeforeSave(),n.type=U,n.portal=i;const o={origin:"portal-item",url:null,messages:[],portal:i,portalItem:n,writtenProperties:[],blockedRelativeUrls:[],resources:{toAdd:[],toUpdate:[],toKeep:[],pendingOperations:[]}},s={layers:[this.write({},o)]};return await Promise.all(o.resources.pendingOperations),await this._validateAgainstJSONSchema(s,o,r),n.url=this.url,n.title||(n.title=this.title),this._updateTypeKeywords(n,r,E.newItem),await i._signIn(),await i.user.addItem({item:n,folder:r&&r.folder,data:s}),await T(this.resourceReferences,o,null),this.portalItem=n,Object(y.a)(o),o.portalItem=n,n}async _save(e){const t={...V,...e};this.portalItem||(A.error("_save(): requires the .portalItem property to be set"),await Promise.reject(new a.a("sceneservice:portal-item-not-set","Portal item to save to has not been set on this SceneService"))),this.portalItem.type!==U&&(A.error("_save(): Non-matching portal item type. Got "+this.portalItem.type+", expected "+U),await Promise.reject(new a.a("sceneservice:portal-item-wrong-type",`Portal item needs to have type "${U}"`))),await this._ensureLoadBeforeSave();const r={origin:"portal-item",url:this.portalItem.itemUrl&&Object(c.M)(this.portalItem.itemUrl),messages:[],portal:this.portalItem.portal||S.a.getDefault(),portalItem:this.portalItem,writtenProperties:[],blockedRelativeUrls:[],resources:{toAdd:[],toUpdate:[],toKeep:[],pendingOperations:[]}},n={layers:[this.write({},r)]};return await Promise.all(r.resources.pendingOperations),await this._validateAgainstJSONSchema(n,r,t),this.portalItem.url=this.url,this.portalItem.title||(this.portalItem.title=this.title),this._updateTypeKeywords(this.portalItem,t,E.existingItem),await this.portalItem.update({data:n}),await T(this.resourceReferences,r,null),Object(y.a)(r),this.portalItem}async _validateAgainstJSONSchema(e,t,n){let i=t.messages.filter((e=>"error"===e.type)).map((e=>new a.a(e.name,e.message,e.details)));if(n&&n.validationOptions.ignoreUnsupported&&(i=i.filter((e=>"layer:unsupported"!==e.name&&"symbol:unsupported"!==e.name&&"symbol-layer:unsupported"!==e.name&&"property:unsupported"!==e.name&&"url:unsupported"!==e.name&&"scenemodification:unsupported"!==e.name))),n.validationOptions.enabled||N){const t=(await r.e(223).then(r.bind(null,1380))).validate(e,n.portalItemLayerType);if(t.length>0){const e=`Layer item did not validate:\n${t.join("\n")}`;if(A.error(`_validateAgainstJSONSchema(): ${e}`),"throw"===n.validationOptions.failPolicy){const e=t.map((e=>new a.a("sceneservice:schema-validation",e))).concat(i);throw new a.a("sceneservice-validate:error","Failed to save layer item due to schema validation, see `details.errors`.",{combined:e})}}}if(i.length>0)throw new a.a("sceneservice:save","Failed to save SceneService due to unsupported or invalid content. See 'details.errors' for more detailed information",{errors:i})}};return Object(n.a)([Object(u.b)(v.c)],t.prototype,"id",void 0),Object(n.a)([Object(u.b)({type:b.a})],t.prototype,"spatialReference",void 0),Object(n.a)([Object(d.a)("spatialReference",["spatialReference","store.indexCRS","store.geographicCRS"])],t.prototype,"readSpatialReference",null),Object(n.a)([Object(u.b)({type:m.a})],t.prototype,"fullExtent",void 0),Object(n.a)([Object(d.a)("fullExtent",["fullExtent","store.extent","spatialReference","store.indexCRS","store.geographicCRS"])],t.prototype,"readFullExtent",null),Object(n.a)([Object(u.b)({readOnly:!0,type:h.a})],t.prototype,"heightModelInfo",void 0),Object(n.a)([Object(u.b)({type:Number,json:{name:"layerDefinition.minScale",write:!0,origins:{service:{read:{source:"minScale"},write:!1}}}})],t.prototype,"minScale",void 0),Object(n.a)([Object(u.b)({type:Number,json:{name:"layerDefinition.maxScale",write:!0,origins:{service:{read:{source:"maxScale"},write:!1}}}})],t.prototype,"maxScale",void 0),Object(n.a)([Object(u.b)({readOnly:!0})],t.prototype,"version",void 0),Object(n.a)([Object(d.a)("version",["store.version"])],t.prototype,"readVersion",null),Object(n.a)([Object(u.b)({type:String,json:{read:{source:"copyrightText"}}})],t.prototype,"copyright",void 0),Object(n.a)([Object(u.b)({type:String,json:{read:!1}})],t.prototype,"sublayerTitleMode",void 0),Object(n.a)([Object(u.b)({type:String})],t.prototype,"title",void 0),Object(n.a)([Object(d.a)("portal-item","title")],t.prototype,"readTitlePortalItem",null),Object(n.a)([Object(d.a)("service","title",["name"])],t.prototype,"readTitleService",null),Object(n.a)([Object(u.b)({type:Number,json:{origins:{service:{read:{source:"id"}},"portal-item":{write:{target:"id",isRequired:!0,ignoreOrigin:!0},read:!1}}}})],t.prototype,"layerId",void 0),Object(n.a)([Object(u.b)(v.n)],t.prototype,"url",null),Object(n.a)([Object(f.a)("url")],t.prototype,"writeUrl",null),Object(n.a)([Object(u.b)()],t.prototype,"parsedUrl",null),Object(n.a)([Object(u.b)({readOnly:!0})],t.prototype,"store",void 0),Object(n.a)([Object(u.b)({type:String,readOnly:!0,json:{read:{source:"store.rootNode"}}})],t.prototype,"rootNode",void 0),t=Object(n.a)([Object(p.a)("esri.layers.mixins.SceneService")],t),t},R=-1e38,N=!1;var E,M;(M=E||(E={}))[M.existingItem=0]="existingItem",M[M.newItem=1]="newItem";const U="Scene Service",V={getTypeKeywords:()=>[],portalItemLayerType:"unknown",validationOptions:{enabled:!0,ignoreUnsupported:!1,failPolicy:"throw"}};var k;!function(e){e[e.SAVE=0]="SAVE",e[e.SAVE_AS=1]="SAVE_AS"}(k||(k={}))},931:function(e,t,r){"use strict";r.r(t),r.d(t,"addOrUpdateResource",(function(){return l})),r.d(t,"contentToBlob",(function(){return f})),r.d(t,"fetchResources",(function(){return s})),r.d(t,"getSiblingOfSameType",(function(){return y})),r.d(t,"getSiblingOfSameTypeI",(function(){return m})),r.d(t,"removeAllResources",(function(){return u})),r.d(t,"removeResource",(function(){return c})),r.d(t,"splitPrefixFileNameAndExtension",(function(){return p}));var n=r(103),i=r(88),a=r(85),o=r(98);async function s(e,t={},r){await e.load(r);const n=Object(o.B)(e.itemUrl,"resources"),{start:i=1,num:s=10,sortOrder:l="asc",sortField:c="created"}=t,u={query:{start:i,num:s,sortOrder:l,sortField:c,token:e.apiKey},signal:Object(a.i)(r,"signal")},d=await e.portal._request(n,u);return{total:d.total,nextStart:d.nextStart,resources:d.resources.map((({created:t,size:r,resource:n})=>({created:new Date(t),size:r,resource:e.resourceFromPath(n)})))}}async function l(e,t,r,n){if(!e.hasPath())throw new i.a(`portal-item-resource-${t}:invalid-path`,"Resource does not have a valid path");const s=e.portalItem;await s.load(n);const l=Object(o.B)(s.userItemUrl,"add"===t?"addResources":"updateResources"),[c,u]=d(e.path),p=await f(r),y=new FormData;return c&&"."!==c&&y.append("resourcesPrefix",c),y.append("fileName",u),y.append("file",p,u),y.append("f","json"),Object(a.k)(n)&&n.access&&y.append("access",n.access),await s.portal._request(l,{method:"post",body:y,signal:Object(a.i)(n,"signal")}),e}async function c(e,t,r){if(!t.hasPath())throw new i.a("portal-item-resources-remove:invalid-path","Resource does not have a valid path");await e.load(r);const n=Object(o.B)(e.userItemUrl,"removeResources");await e.portal._request(n,{method:"post",query:{resource:t.path},signal:Object(a.i)(r,"signal")}),t.portalItem=null}async function u(e,t){await e.load(t);const r=Object(o.B)(e.userItemUrl,"removeResources");return e.portal._request(r,{method:"post",query:{deleteAll:!0},signal:Object(a.i)(t,"signal")})}function d(e){const t=e.lastIndexOf("/");return-1===t?[".",e]:[e.slice(0,t),e.slice(t+1)]}function p(e){const[t,r]=function(e){const t=Object(o.p)(e);return Object(a.j)(t)?[e,""]:[e.slice(0,e.length-t.length-1),`.${t}`]}(e),[n,i]=d(t);return[n,i,r]}async function f(e){return e instanceof Blob?e:(await Object(n.default)(e.url,{responseType:"blob"})).data}function y(e,t){if(!e.hasPath())return null;const[r,,n]=p(e.path);return e.portalItem.resourceFromPath(Object(o.B)(r,t+n))}function m(e,t){if(!e.hasPath())return null;const[r,,n]=p(e.path);return e.portalItem.resourceFromPath(Object(o.B)(r,t+n))}},955:function(e,t,r){"use strict";r.d(t,"a",(function(){return o}));var n=r(103),i=r(88),a=r(85);async function o(e,t,r,o,s,l){let c=null;if(Object(a.k)(r)){const t=`${e}/nodepages/`,i=t+Math.floor(r.rootIndex/r.nodesPerPage);try{return{type:"page",rootPage:(await Object(n.default)(i,{query:{f:"json",token:o},responseType:"json",signal:l})).data,rootIndex:r.rootIndex,pageSize:r.nodesPerPage,lodMetric:r.lodSelectionMetricType,urlPrefix:t}}catch(p){Object(a.k)(s)&&s.warn("#fetchIndexInfo()","Failed to load root node page. Falling back to node documents.",i,p),c=p}}if(!t)return null;const u=`${e}/nodes/`,d=u+(t&&t.split("/").pop());try{return{type:"node",rootNode:(await Object(n.default)(d,{query:{f:"json",token:o},responseType:"json",signal:l})).data,urlPrefix:u}}catch(p){throw new i.a("sceneservice:root-node-missing","Root node missing.",{pageError:c,nodeError:p,url:d})}}}}]);
//# sourceMappingURL=30.8c7fd3af.chunk.js.map