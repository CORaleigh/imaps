(this.webpackJsonpimaps=this.webpackJsonpimaps||[]).push([[78,26,27,108,164,280],{104:function(e,t,r){"use strict";function n(){return[0,0,0]}function i(e){return[e[0],e[1],e[2]]}function a(e,t,r){return[e,t,r]}function s(e){for(var t=[0,0,0],r=Math.min(3,e.length),n=0;n<r;++n)t[n]=e[n];return t}function o(e,t){return new Float64Array(e,t,3)}function l(){return[0,0,0]}function c(){return a(1,1,1)}function u(){return a(1,0,0)}function d(){return a(0,1,0)}function f(){return a(0,0,1)}r.d(t,"a",(function(){return p})),r.d(t,"b",(function(){return h})),r.d(t,"c",(function(){return o})),r.d(t,"d",(function(){return i})),r.d(t,"e",(function(){return n})),r.d(t,"f",(function(){return s})),r.d(t,"g",(function(){return a}));var h=[0,0,0],p=c(),y=u(),b=d(),m=f();Object.freeze({__proto__:null,create:n,clone:i,fromValues:a,fromArray:s,createView:o,zeros:l,ones:c,unitX:u,unitY:d,unitZ:f,ZEROS:h,ONES:p,UNIT_X:y,UNIT_Y:b,UNIT_Z:m})},108:function(e,t,r){"use strict";r.d(t,"a",(function(){return f})),r.d(t,"b",(function(){return _})),r.d(t,"c",(function(){return w})),r.d(t,"d",(function(){return h})),r.d(t,"e",(function(){return p})),r.d(t,"f",(function(){return O})),r.d(t,"g",(function(){return j})),r.d(t,"h",(function(){return b})),r.d(t,"i",(function(){return m})),r.d(t,"j",(function(){return y})),r.d(t,"k",(function(){return v})),r.d(t,"l",(function(){return g})),r.d(t,"m",(function(){return s}));r(92);var n=r(165),i=r(94);function a(e,t,r,n,i){var a=e.watch(t,((t,i,a,s)=>{r&&!r(t)||null==n||n.call(e,t,i,a,s)}),i);if(Array.isArray(t))for(var s of t){var o=e.get(s);r&&r(o)&&(null==n||n.call(e,o,o,t,e))}else{var l=e.get(t);r&&r(l)&&(null==n||n.call(e,l,l,t,e))}return a}function s(e,t,r,n,s){var o="function"==typeof n?n:null,l="object"==typeof n?n:null;"boolean"==typeof n&&(s=n);var c,u=!1;function d(){c&&(c.remove(),c=null)}var f=Object(i.f)();Object(i.p)(l,(()=>{d(),f.reject(Object(i.e)())}));var h={then:f.promise.then.bind(f.promise),catch:f.promise.catch.bind(f.promise),remove:d};return Object.freeze(h),c=a(e,t,r,((t,r,n,i)=>{u=!0,d(),o&&o.call(e,t,r,n,i),f.resolve({value:t,oldValue:r,propertyName:n,target:i})}),s),u&&d(),h}function o(e){return!!e}function l(e){return!e}function c(e){return!0===e}function u(e){return!1===e}var d=/\?(\.|$)/g;function f(e,t,r,n){var i=Array.isArray(t)?t:t.indexOf(",")>-1?t.split(","):[t],a=h(e,t,r,n);for(var s of i){var o=s.trim().replace(d,"$1"),l=e.get(o);r.call(e,l,l,o,e)}return a}function h(e,t,r,n){return e.watch(t,r,n)}function p(e,t,r,n){return a(e,t,o,r,n)}function y(e,t,r,n){return s(e,t,o,r,n)}function b(e,t,r,n){return a(e,t,l,r,n)}function m(e,t,r,n){return s(e,t,l,r,n)}function v(e,t,r,n){return a(e,t,c,r,n)}function g(e,t,r,n){return s(e,t,c,r,n)}function O(e,t,r,n){return a(e,t,u,r,n)}function j(e,t,r,n){return s(e,t,u,r,n)}function w(e,t,r,n){var i=!1,a=e.watch(t,((t,n,a,s)=>{i||r.call(e,t,n,a,s)}),n);return{remove(){a.remove()},pause(){i=!0},resume(){i=!1}}}function _(e,t,r,i,a,s,o){var l={};function c(t){var n=l[t];n&&(s&&s(n.target,t,e,r),n.handle.remove(),delete l[t])}var u=f(e,t,((t,s,o)=>{c(o),Object(n.b)(t)&&(l[o]={handle:Object(n.c)(t,r,i),target:t},a&&a(t,o,e,r))}),o);return{remove(){for(var e in u.remove(),l)c(e)}}}},1090:function(e,t,r){"use strict";r.r(t);var n=r(91),i=r(82),a=(r(80),r(81)),s=r(85),o=r(145),l=r(116),c=r(84),u=r(83),d=(r(86),r(87),r(115)),f=r(108),h=r(114),p=r(163),y=r(129),b=r(154),m=(r(88),r(97)),v=r(107),g=r(148),O=(r(171),r(7)),j=r(89),w=r(95),_=r(94),S=r(118),L=r(109),x=r(105),k=r(160),I=r(106),A=r(211),M=r(291),E=r(138),C=r(952),V=r(423),T=r(414),F=r(244),z=r(684),P=r(512);r(93),r(815);function R(e){return Object(j.j)(e)||"simple"===e.type||"unique-value"===e.type||"class-breaks"===e.type||"dictionary"===e.type}var N=r(458);var D=r(256),U=r(248),B=/^-?(\d+)(\.(\d+))?$/i;function q(e,t){return e-t}function H(e,t){var r,n;return(r=Number(e.toFixed(t)))<e?n=r+1/Math.pow(10,t):(n=r,r-=1/Math.pow(10,t)),[r=Number(r.toFixed(t)),n=Number(n.toFixed(t))]}function G(e,t,r,n,i){var a=Z(e,t,r,n),s=null==a.previous||a.previous<=i,o=null==a.next||a.next<=i;return s&&o||a.previous+a.next<=2*i}function W(e){var t=String(e),r=t.match(B);if(r&&r[1])return{integer:r[1].split("").length,fractional:r[3]?r[3].split("").length:0};if(t.toLowerCase().indexOf("e")>-1){var n=t.split("e"),i=n[0],a=n[1];if(i&&a){var s=Number(i),o=Number(a),l=o>0;l||(o=Math.abs(o));var c=W(s);return l?(c.integer+=o,o>c.fractional?c.fractional=0:c.fractional-=o):(c.fractional+=o,o>c.integer?c.integer=1:c.integer-=o),c}}return{integer:0,fractional:0}}function Z(e,t,r,n){var i={previous:null,next:null};if(null!=r){var a=e-r,s=t-r-a;i.previous=Math.floor(Math.abs(100*s/a))}if(null!=n){var o=n-e,l=n-t-o;i.next=Math.floor(Math.abs(100*l/o))}return i}function Y(e,t={}){var r=e.slice(0),{tolerance:n=2,strictBounds:i=!1,indexes:a=r.map(((e,t)=>t))}=t;a.sort(q);for(var s=0;s<a.length;s++){var o=a[s],l=r[o],c=0===o?null:r[o-1],u=o===r.length-1?null:r[o+1],d=W(l).fractional;if(d){for(var f=void 0,h=0,p=!1;h<=d&&!p;){var y=H(l,h);p=G(l,f=i&&0===s?y[1]:y[0],c,u,n),h++}p&&(r[o]=f)}}return r}var J={maximumFractionDigits:20};var X=Object(D.a)("short-date");function $(e,t,r,n){var i="";0===t?i="".concat("<"," "):t===r&&(i="".concat(">"," "));var a;return i+(n?Object(D.b)(e,X):(a=e,Object(U.b)(a,J)))}var K=["data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAAAAAAAAAHqZRakAAAANUlEQVQ4jWPMy8v7z0BFwMLAwMAwcdIkqhiWn5fHwEQVk5DAqIGjBo4aOGrgqIEQwEjtKgAATl0Hu6JrzFUAAAAASUVORK5CYII=","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAAAAAAAAAHqZRakAAAANUlEQVQ4jWPMy8v7z0BFwMLAwMAwaeIkqhiWl5/HwEQVk5DAqIGjBo4aOGrgqIEQwEjtKgAATl0Hu6sKxboAAAAASUVORK5CYII=","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAAAAAAAAAHqZRakAAAANUlEQVQ4jWPMy8v7z0BFwMLAwMAwadJEqhiWl5fPwEQVk5DAqIGjBo4aOGrgqIEQwEjtKgAATl0Hu75+IUcAAAAASUVORK5CYII="],Q=new L.a([64,64,64]);function ee(e,t){var r=[],n=e.length-1;return 5===e.length?r.push(0,2,4):r.push(0,n),e.map(((e,i)=>r.indexOf(i)>-1?$(e,i,n,t):null))}function te(e,t,r){return re.apply(this,arguments)}function re(){return(re=Object(O.a)((function*(e,t,n){var i=!1,a=[],s=[];if(e.stops){var o=e.stops;a=o.map((e=>e.value)),(i=o.some((e=>!!e.label)))&&(s=o.map((e=>e.label)))}var l=a[0],c=a[a.length-1];if(null==l&&null==c)return null;var u=i?null:ee(a,n);return(yield Promise.all(a.map(function(){var n=Object(O.a)((function*(n,a){return{value:n,color:"opacity"===e.type?yield ne(n,e,t):(yield Promise.resolve().then(r.bind(null,277))).getColor(e,n),label:i?s[a]:u[a]}}));return function(e,t){return n.apply(this,arguments)}}()))).reverse()}))).apply(this,arguments)}function ne(e,t){return ie.apply(this,arguments)}function ie(){return(ie=Object(O.a)((function*(e,t,n=Q){var i=new L.a(n),a=(yield Promise.resolve().then(r.bind(null,277))).getOpacity(t,e);return null!=a&&(i.a=a),i}))).apply(this,arguments)}function ae(e,t){var{startIndex:r,endIndex:n,weight:i}=function(e,t){var r=0,n=t.length-1;return t.some(((t,i)=>e<t.value?(n=i,!0):(r=i,!1))),{startIndex:r,endIndex:n,weight:(e-t[r].value)/(t[n].value-t[r].value)}}(e,t);if(r===n)return t[r].color;var a=L.a.blendColors(t[r].color,t[n].color,i);return new L.a(a)}var se=r(278);r(92);var oe=r(422),le=r(614),ce={HH:315,HL:45,LL:135,LH:225},ue={2:[["HL","HH"],["LL","LH"]],3:[["HL","HM","HH"],["ML","MM","MH"],["LL","LM","LH"]],4:[["HL","HM1","HM2","HH"],["M2L","M2M1","M2M2","M2H"],["M1L","M1M1","M1M2","M1H"],["LL","LM1","LM2","LH"]]};function de(e){if(e){var{type:t}=e;if(t.indexOf("3d")>-1)return Object(le.getSymbolLayerFill)(e.symbolLayers.getItemAt(0));if("simple-line"===t){var r=Object(oe.d)(e);return r&&r.color}if("simple-marker"===e.type&&("x"===e.style||"cross"===e.style)){var n=Object(oe.d)(e);return n&&n.color}return Object(oe.b)(e)}}function fe(e,t){var r=t.HH.label,n=t.LL.label,i=t.HL.label,a=t.LH.label;switch(e){case"HH":return{top:r,bottom:n,left:i,right:a};case"HL":return{top:i,bottom:a,left:n,right:r};case"LL":return{top:n,bottom:r,left:a,right:i};case"LH":return{top:a,bottom:i,left:r,right:n};default:return{top:r,bottom:n,left:i,right:a}}}function he(e){var t=ce[e];return e&&null==t&&(t=ce.HH),t||0}var pe=[255,255,255],ye=[200,200,200],be=[128,128,128];function me(e,t){var r=e.length-1;return e.map(((e,n)=>$(e,n,r,t)))}function ve(e,t,r,n,i,a){return ge.apply(this,arguments)}function ge(){return(ge=Object(O.a)((function*(e,t,r,n,i,a){var s,o,l=t.legendOptions,c=l&&l.customValues,u=we(e,r),d=!!u,f=!!c,h=null!=t.minSize&&null!=t.maxSize,p=t.stops&&t.stops.length>1,y=!!t.target;if(d&&(f||h||p&&!y)){var b=Object(T.h)(u),m=null,v=null,g=null;v=b&&!p?Y([t.minDataValue,t.maxDataValue]):c||(yield Le(t,u,n,i));var j=null==e?void 0:e.authoringInfo,w="univariate-color-size"===(null==j?void 0:j.type),_=w&&"above-and-below"===(null==j?void 0:j.univariateTheme);if(!v&&p&&(v=t.stops.map((e=>e.value)),(m=t.stops.some((e=>!!e.label)))&&(g=t.stops.map((e=>e.label)))),b&&(null==(s=v)?void 0:s.length)>2&&!_&&(v=[v[0],v[v.length-1]]),!v)return null;w&&5!==(null==(o=v)?void 0:o.length)&&(v=ke({minSize:v[0],maxSize:v[v.length-1]}));var S=b?Oe(e,v):null,L=Object(T.g)(u),x=m?null:me(v,a);return(yield Promise.all(v.map(function(){var r=Object(O.a)((function*(r,a){var s=b?S[a]:yield Ee(t,u,r,n,i);return{value:r,symbol:Ve(_&&"class-breaks"===e.type?je(e,a):u,s),label:m?g[a]:x[a],size:s,outlineSize:L}}));return function(e,t){return r.apply(this,arguments)}}()))).reverse()}}))).apply(this,arguments)}function Oe(e,t){var r=null==e?void 0:e.authoringInfo,n="univariate-color-size"===(null==r?void 0:r.type),i=[12,30];if(n){var a=t[0],s=t[t.length-1];i=t.map((e=>12+(e-a)/(s-a)*18))}return n&&"below"===(null==r?void 0:r.univariateTheme)&&i.reverse(),i}function je(e,t){var r=e.classBreakInfos,n=r.length,i=n<2||!(t>=2)?r[0].symbol.clone():r[n-1].symbol.clone();return e.visualVariables.some((e=>"color"===e.type))&&(i.type.indexOf("3d")>-1?_e(i):Se(i)),i}function we(e,t){var r=null,n=null;if("simple"===e.type)r=e.symbol;else if("class-breaks"===e.type){var i=e.classBreakInfos;r=i&&i[0]&&i[0].symbol,n=i.length>1}else if("unique-value"===e.type){var a=e.uniqueValueInfos;r=a&&a[0]&&a[0].symbol,n=a.length>1}return!r||function(e){if(e)return Object(E.c)(e)?!!e.symbolLayers&&e.symbolLayers.some((e=>e&&"fill"===e.type)):-1!==e.type.indexOf("fill");return!1}(r)?null:(r=r.clone(),(t||n)&&(r.type.indexOf("3d")>-1?_e(r):Se(r)),r)}function _e(e){"line-3d"===e.type?e.symbolLayers.forEach((e=>{e.material={color:be}})):e.symbolLayers.forEach((e=>{"icon"!==e.type||e.resource&&e.resource.href?e.material={color:ye}:(e.material={color:pe},e.outline={color:be,size:1.5})}))}function Se(e){"cim"===e.type?Object(V.a)(e,new L.a(ye)):-1!==e.type.indexOf("line")?e.color=be:(e.color=pe,"simple-marker"===e.type&&(e.outline={color:be,width:1.5}))}function Le(e,t,r,n){return xe.apply(this,arguments)}function xe(){return(xe=Object(O.a)((function*(e,t,n,i){var a=(yield Promise.resolve().then(r.bind(null,277))).getSizeRangeAtScale(e,n,i),s=a&&ke(a);if(a||s){var o=s.map((t=>Ie(t,e,a)));o=Y(o);for(var l=1;l<o.length-1;l++){var c=yield Ae(e,t,o[l],o[l-1],n,i);c&&(o[l]=c[0],s[l]=c[1])}return o}}))).apply(this,arguments)}function ke(e){for(var t=e.minSize,r=(e.maxSize-t)/4,n=[],i=0;i<5;i++)n.push(t+r*i);return n}function Ie(e,t,r){var n=r.minSize,i=r.maxSize,a=t.minDataValue,s=t.maxDataValue;return e<=n?a:e>=i?s:(e-n)/(i-n)*(s-a)+a}function Ae(e,t,r,n,i,a){return Me.apply(this,arguments)}function Me(){return(Me=Object(O.a)((function*(e,t,r,n,i,a){var s=yield Ee(e,t,r,i,a),o=yield Ee(e,t,n,i,a),l=W(r),c=l.fractional,u=l.integer,d=null,f=null;r>0&&r<1&&(u=W(r*=d=Math.pow(10,c)).integer);for(var h=u-1;h>=0;h--){var p=Math.pow(10,h),y=Math.floor(r/p)*p,b=Math.ceil(r/p)*p;null!=d&&(y/=d,b/=d);var m=(y+b)/2;[,m]=Y([y,m,b],{indexes:[1]});var v=yield Ee(e,t,y,i,a),g=yield Ee(e,t,b,i,a),O=yield Ee(e,t,m,i,a),j=Z(s,v,o,null),w=Z(s,g,o,null),_=Z(s,O,o,null),S=j.previous<=20,L=w.previous<=20;if(S&&L&&(j.previous<=w.previous?(S=!0,L=!1):(L=!0,S=!1)),S?f=[y,v]:L?f=[b,g]:_.previous<=20&&(f=[m,O]),f)break}return f}))).apply(this,arguments)}function Ee(e,t,r,n,i){return Ce.apply(this,arguments)}function Ce(){return(Ce=Object(O.a)((function*(e,t,n,i,a){var{getSize:s}=yield Promise.resolve().then(r.bind(null,277));return s(e,n,{scale:i,view:a,shape:"simple-marker"===t.type?t.style:null})}))).apply(this,arguments)}function Ve(e,t){var r=e.clone();if(Object(E.c)(r))Object(T.h)(r)||r.symbolLayers.forEach((e=>{"fill"!==e.type&&(e.size=t)}));else if(function(e){return"esri.symbols.SimpleMarkerSymbol"===e.declaredClass}(r))r.size=t;else if(function(e){return"esri.symbols.PictureMarkerSymbol"===e.declaredClass}(r)){var n=r.width,i=r.height;r.height=t,r.width=t*(n/i)}else!function(e){return"esri.symbols.SimpleLineSymbol"===e.declaredClass}(r)?function(e){return"esri.symbols.TextSymbol"===e.declaredClass}(r)&&r.font&&(r.font.size=t):r.width=t;return r}var Te=a.a.getLogger("esri.widgets.Legend.support.ActiveLayerInfo"),Fe=/^\s*(return\s+)?\$view\.scale\s*(;)?\s*$/i,ze=new w.a({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryMultiPatch:"multipatch"}),Pe={u1:[0,1],u2:[0,3],u4:[0,15],u8:[0,255],s8:[-128,127],u16:[0,65535],s16:[-32768,32767],u32:[0,4294967295],s32:[-2147483648,2147483647],f32:[-34e38,34e38],f64:[-Number.MAX_VALUE,Number.MAX_VALUE]},Re=new M.a({size:6,outline:{color:[128,128,128,.5],width:.5}}),Ne=new A.a({style:"solid"});function De(e){return"vector-field"===e.type}function Ue(e){return"raster-colormap"===e.type}function Be(e){return"raster-stretch"===e.type}function qe(e){return"raster-shaded-relief"===e.type}function He(e){return"esri.renderers.SimpleRenderer"===e.declaredClass}function Ge(e){return"esri.renderers.ClassBreaksRenderer"===e.declaredClass}function We(e){return"esri.renderers.UniqueValueRenderer"===e.declaredClass}function Ze(e){return"esri.renderers.HeatmapRenderer"===e.declaredClass}function Ye(e){return"esri.renderers.PointCloudClassBreaksRenderer"===e.declaredClass}function Je(e){return"esri.renderers.PointCloudStretchRenderer"===e.declaredClass}function Xe(e){return"esri.renderers.PointCloudUniqueValueRenderer"===e.declaredClass}function $e(e){return"esri.renderers.DotDensityRenderer"===e.declaredClass}function Ke(e){return"esri.layers.BuildingSceneLayer"===e.declaredClass}function Qe(e){return"esri.layers.MapImageLayer"===e.declaredClass}function et(e){return"esri.layers.ImageryLayer"===e.declaredClass}function tt(e){return"esri.layers.ImageryTileLayer"===e.declaredClass}var rt=new M.a({style:"path",path:"M10,5 L5,0 0,5 M5,0 L5,15",size:15,outline:{width:1,color:[85,85,85,1]}}),nt={},it=class extends m.a{constructor(e){super(e),this._handles=new d.a,this._hasColorRamp=!1,this._hasOpacityRamp=!1,this._hasSizeRamp=!1,this._webStyleSymbolCache=new Map,this._dotDensityUrlCache=new Map,this._scaleDrivenSizeVariable=null,this._hasClusterSizeVariable=!1,this.children=new v.a,this.layerView=null,this.layer=null,this.legendElements=[],this.parent=null,this.keepCacheOnDestroy=!1,this.respectLayerVisibility=!0,this.sublayerIds=[],this.title=null,this.view=null}initialize(){var e=()=>this.notifyChange("ready");this._handles.add([Object(f.b)(this,"children","change",(t=>{var{added:r,removed:n}=t,i=this._handles;r.map((t=>{var r="activeLayerInfo-ready-watcher-".concat(t.layer.uid);i.add(Object(f.a)(t,"ready",e),r)})),n.forEach((e=>i.remove(e.layer.uid))),e()}))]),this.keepCacheOnDestroy||(nt={})}destroy(){this._handles.destroy(),this._handles=null,this._webStyleSymbolCache=null,this._dotDensityUrlCache=null,this._scaleDrivenSizeVariable=null,this.keepCacheOnDestroy||(nt=null)}get opacity(){var e,t=this.layer.opacity,r=null==(e=this.parent)?void 0:e.opacity,n=this.layer.parent,i=n&&"uid"in n?this._getParentLayerOpacity(n):null;return null!=r?r*t:null!=i?i*t:t}get ready(){return null===this.layer||(this.children.length>0?this._isGroupActive():this.legendElements.length>0)}get scale(){return this.view&&this.view.scale}get isScaleDriven(){var e=this.layer;if(null===e)return!1;if("featureReduction"in e&&e.featureReduction&&"cluster"===e.featureReduction.type)return!0;if("renderer"in e&&e.renderer){if("dot-density"===e.renderer.type)return!0;var t=e.get("renderer.valueExpression");if(Fe.test(t))return!0;var r=e.get("renderer.visualVariables");if(r)return r.some((e=>this._isScaleDrivenSizeVariable(e)))}return this._isLayerScaleDriven(this.layer)}get version(){return this._get("version")+1}buildLegendElementsForFeatureCollections(e){var t=this;return Object(O.a)((function*(){var r=e.map((e=>{if(function(e){return"esri.layers.FeatureLayer"===e.declaredClass}(e))return t._getRendererLegendElements(e.renderer,{title:e.title});if(e.featureSet&&e.featureSet.features.length){var r=e.layerDefinition,n=r&&r.drawingInfo,i=n&&Object(F.a)(n.renderer),a=ze.read(r.geometryType);return i?t._getRendererLegendElements(i,{title:e.name,geometryType:a}):(Te.warn("drawingInfo not available!"),null)}return null}));try{var n=[];yield Object(_.j)(r).then((e=>{e.forEach((({value:e})=>e&&n.push(...e)))})),t.legendElements=n,t.notifyChange("ready")}catch(i){Te.warn("error while building legend for layer!",i)}}))()}buildLegendElementsForRenderer(e){var t=this;return Object(O.a)((function*(){try{var r=yield t._getRendererLegendElements(e);t.legendElements=r,t.notifyChange("ready")}catch(n){Te.warn("error while building legend for layer!",n)}}))()}buildLegendElementsForTools(){var e=this;return Object(O.a)((function*(){var t=e.layer;!function(e){return"esri.layers.WMTSLayer"===e.declaredClass}(t)?function(e){return"esri.layers.WMSLayer"===e.declaredClass}(t)?yield e._constructLegendElementsForWMSSublayers():Ke(t)?yield e._constructLegendElementsForBuildingSceneLayer():Qe(t)||function(e){return"esri.layers.TileLayer"===e.declaredClass}(t)||Ke(t)?yield e._constructLegendElementsForSublayers():(e._handles.remove("imageryLayers-watcher"),yield e._getLegendLayers("".concat(t.uid,"-default")).then(function(){var r=Object(O.a)((function*(r){e.legendElements=[],e.notifyChange("ready");var n=r.map(function(){var r=Object(O.a)((function*(r){if(et(t)||tt(t)){var n=t.watch(["renderingRule","bandIds"],(()=>Object(_.i)(Object(O.a)((function*(){nt.default=null,t.renderer?yield e.buildLegendElementsForRenderer(t.renderer):yield e.buildLegendElementsForTools()})))()));e._handles.add(n,"imageryLayers-watcher")}var i=e._generateSymbolTableElementForLegendLayer(r);i&&i.infos.length&&(et(t)&&(i.title=t.title),e.legendElements.push(i)),e.notifyChange("ready")}));return function(e){return r.apply(this,arguments)}}());yield Object(_.j)(n)}));return function(e){return r.apply(this,arguments)}}()).catch((e=>{Te.warn("Request to server for legend has failed!",e)}))):e._constructLegendElementsForWMTSlayer()}))()}_getParentLayerOpacity(e){var t=1,r=e.parent;return r&&"uid"in r&&(t=this._getParentLayerOpacity(r)),e.opacity*t}_isGroupActive(){var e=this.children;return!!e.length&&e.some((e=>e.ready))}_isScaleDrivenSizeVariable(e){if(e&&"size"!==e.type)return!1;var t=e,r=t.minSize,n=t.maxSize;return"object"==typeof r&&r?this._isScaleDrivenSizeVariable(r):"object"==typeof n&&n?this._isScaleDrivenSizeVariable(n):!!t.expression||Fe.test(t.valueExpression)}_isLayerScaleDriven(e){if("minScale"in e&&e.minScale>0||"maxScale"in e&&e.maxScale>0)return!0;if("sublayers"in e&&e.sublayers)return e.sublayers.some((e=>this._isLayerScaleDriven(e)));var t=e.parent;if(!1===e.loaded&&t&&Qe(t)&&"source"in e&&e.source&&"map-layer"===e.source.type)for(var r of t.sourceJSON.layers)if(r.id===e.source.mapLayerId&&(r.minScale>0||r.maxScale>0))return!0;return!1}_constructLegendElementsForWMTSlayer(){this.legendElements=[],this._handles.remove("wmts-activeLayer-watcher");var e=this.layer.activeLayer;if(this._handles.add(Object(f.d)(this.layer,"activeLayer",(()=>this._constructLegendElementsForWMTSlayer())),"wmts-activeLayer-watcher"),e.styleId&&e.styles){var t=null;e.styles.some((r=>e.styleId===r.id&&(t=r.legendUrl,!0))),t&&(this.legendElements=[{type:"symbol-table",title:e.title,infos:[{src:t,opacity:this.opacity}]}])}this.notifyChange("ready")}_constructLegendElementsForWMSSublayers(){var e=this;return Object(O.a)((function*(){e.legendElements=[],e._handles.remove("wms-sublayers-watcher");var t=e.layer,r=null;(t.customParameters||t.customLayerParameters)&&(r=Object(n.a)(Object(n.a)({},t.customParameters),t.customLayerParameters)),e._handles.add(Object(f.d)(e.layer,"sublayers",(()=>e._constructLegendElementsForWMSSublayers())),"wms-sublayers-watcher"),e.legendElements=yield e._generateLegendElementsForWMSSublayers(t.sublayers,r),e.notifyChange("ready")}))()}_generateLegendElementsForWMSSublayers(e,t){var r=this;return Object(O.a)((function*(){var n=[];r._handles.add(e.on("change",(()=>r._constructLegendElementsForWMSSublayers())),"wms-sublayers-watcher");var i=e.toArray();for(var a of i){var s=a.watch(["title","visible","legendEnabled"],(()=>r._constructLegendElementsForWMSSublayers()));if(r._handles.add(s,"wms-sublayers-watcher"),a.visible&&a.legendEnabled){var o=yield r._generateSymbolTableElementForWMSSublayer(a,t);o&&o.infos.length&&n.unshift(o)}}return n}))()}_generateSymbolTableElementForWMSSublayer(e,t){var r=this;return Object(O.a)((function*(){if(!e.legendUrl&&e.sublayers){var n=(yield r._generateLegendElementsForWMSSublayers(e.sublayers,t)).filter((e=>e));return{type:"symbol-table",title:e.title,infos:n}}return r._generateSymbolTableElementForLegendUrl(e,t)}))()}_generateSymbolTableElementForLegendUrl(e,t){return Object(O.a)((function*(){var r,n=e.legendUrl;if(n){var i={type:"symbol-table",title:e.title||e.name||e.id&&e.id+"",infos:[]};t&&(n+="?"+Object(u.D)(t));var a=null,s=null==(r=e.layer)?void 0:r.opacity;try{(a=(yield Object(I.default)(n,{responseType:"image"})).data)&&(a.style.opacity=s)}catch(o){}return i.infos.push({src:n,preview:a,opacity:s}),i}}))()}_getLegendLayers(e,t){var r=nt&&nt[e];return r?Promise.resolve(r):this._legendRequest(t).then((t=>{var r=t.layers;return nt[e]=r,r}))}_legendRequest(e){var t=this.layer,r={f:"json",dynamicLayers:e};if(et(t)){var i=t.exportImageServiceParameters.renderingRule;if(i&&(r.renderingRule=JSON.stringify(i.toJSON())),t.bandIds&&(r.bandIds=t.bandIds.join()),t.raster||t.viewId){var{raster:a,viewId:s}=t;r=Object(n.a)({raster:a,viewId:s},r)}}var o=t.url.replace(/(\/)+$/,"");if("version"in t&&t.version>=10.01){var l=o.indexOf("?");l>-1?o=o.substring(0,l)+"/legend"+o.substring(l):o+="/legend"}else{var c=o.toLowerCase().indexOf("/rest/"),u=o.substring(0,c)+o.substring(c+5,o.length);o="https://utility.arcgis.com/sharing/tools/legend?soapUrl="+encodeURI(u)+"&returnbytes=true"}return Object(I.default)(o,{query:r}).then((e=>e.data))}_constructLegendElementsForBuildingSceneLayer(){var e=this;return Object(O.a)((function*(){e.legendElements=[],e._handles.remove("sublayers-watcher");var t=e.layer;e._handles.add(Object(f.d)(t,"sublayers",(()=>e._constructLegendElementsForBuildingSceneLayer())),"sublayers-watcher");try{e.legendElements=yield e._generateLegendElementsForBuildingSublayers(t.sublayers,e.opacity),e.notifyChange("ready")}catch(r){Te.warn("Request to server for legend has failed!",r)}}))()}_generateLegendElementsForBuildingSublayers(e,t){var r=this;return Object(O.a)((function*(){var n=[];r._handles.add(e.on("change",(()=>r._constructLegendElementsForBuildingSceneLayer())),"sublayers-watcher");var i=e.toArray();for(var a of i){var s=a.watch(["renderer","opacity","title","visible"],(()=>r._constructLegendElementsForBuildingSceneLayer()));if(r._handles.add(s,"sublayers-watcher"),a.visible){var o=a&&null!=a.opacity?a.opacity:null,l=null!=o?o*t:t;if("building-group"===a.type){var c={type:"symbol-table",title:a.title,infos:[]},u=yield r._generateLegendElementsForBuildingSublayers(a.sublayers,l);c.infos.push(...u),n=[c,...n]}else a.renderer&&(n=[...yield r._getRendererLegendElements(a.renderer,{title:a.title,opacity:l,sublayer:a}),...n])}}return n.filter((e=>!!e&&(!("infos"in e)||e.infos.length>0)))}))()}_constructLegendElementsForSublayers(){var e=this;return Object(O.a)((function*(){e.legendElements=[],e._handles.remove("sublayers-watcher");var t=e.layer;e._handles.add(Object(f.d)(t,"sublayers",(()=>e._constructLegendElementsForSublayers)),"sublayers-watcher");try{e.legendElements=yield e._generateLegendElementsForSublayers(t.sublayers,e.opacity),e.notifyChange("ready")}catch(r){Te.warn("Request to server for legend has failed!",r)}}))()}_generateLegendElementsForSublayers(e,t,r){var n=this;return Object(O.a)((function*(){var i=n.layer,a=[];n._handles.add(e.on("change",(()=>n._constructLegendElementsForSublayers())),"sublayers-watcher");var s=e.toArray();for(var o of(!r&&n.sublayerIds&&n.sublayerIds.length&&(s=n.sublayerIds.map((e=>i.findSublayerById(e))).filter(Boolean)),s)){var l=o.watch("renderer, opacity, title, visible, legendEnabled",(()=>n._constructLegendElementsForSublayers()));if(n._handles.add(l,"sublayers-watcher"),o.visible&&o.legendEnabled&&(!n.respectLayerVisibility||n._isSublayerInScale(o))){var c=o&&null!=o.opacity?o.opacity:null,u=null!=c?c*t:t;if(o.renderer&&!o.sublayers&&o.originIdOf("renderer")>2)yield o.load(),a=[...yield n._getRendererLegendElements(o.renderer,{title:o.title,opacity:u,sublayer:o}),...a];else{var d=yield n._generateSymbolTableElementForSublayer(o,u,r);d&&a.unshift(d)}}}return a.filter((e=>!!e&&(!("infos"in e)||e.infos.length>0)))}))()}_generateSymbolTableElementForSublayer(e,t,r){var n=this;return Object(O.a)((function*(){if(!r){r=new Map;var i=new z.a({layer:n.layer}),a=i.hasDynamicLayers?i.dynamicLayers:null;i.destroy();var s=a||"".concat(n.layer.uid,"-").concat(e.id,"-default");(yield n._getLegendLayers(s,a)).forEach((e=>r.set(e.layerId,e)))}var o=r.get(e.id);if(!o&&e.sublayers){var l=yield n._generateLegendElementsForSublayers(e.sublayers,t,r);return{type:"symbol-table",title:e.title,infos:l}}return n._generateSymbolTableElementForLegendLayer(o,e,t)}))()}_generateSymbolTableElementForLegendLayer(e,t,r){var n;if(!e||!e.legend||this.respectLayerVisibility&&!this._isLegendLayerInScale(e,t))return null;var i=null==t?void 0:t.renderer,a=(null==t?void 0:t.title)||e.layerName;if(i&&(!t||(null==t?void 0:t.originIdOf("renderer"))>2)){var s=(null==t?void 0:t.title)||this._getRendererTitle(i,t);s&&(a&&"string"!=typeof s&&"title"in s&&(s.title=a),a=s)}var o={type:"symbol-table",title:a,legendType:e.legendType?e.legendType:null,infos:[]},l=t?this._sanitizeLegendForSublayer(e.legend.slice(),t):e.legend;return(null==(n=e.legendGroups)?void 0:n.length)>0?e.legendGroups.forEach((t=>{var n,i={type:"symbol-table",title:t.heading,legendType:e.legendType?e.legendType:null,infos:this._generateSymbolTableElementInfosForLegendLayer(l.filter((e=>e.groupId===t.id)),e.layerId,r)};(null==(n=i.infos)?void 0:n.length)>0&&o.infos.push(i)})):o.infos=this._generateSymbolTableElementInfosForLegendLayer(l,e.layerId,r),o.infos.length>0?o:null}_generateSymbolTableElementInfosForLegendLayer(e,t,r){return e.map((e=>{var n=e.url;if(e.imageData&&e.imageData.length>0)n="data:image/png;base64,".concat(e.imageData);else{if(0===n.indexOf("http"))return null;n=Object(k.a)("".concat(this.layer.url,"/").concat(t,"/images/").concat(n))}return{label:e.label,src:n,opacity:null==r?this.opacity:r,width:e.width,height:e.height}})).filter((e=>!!e))}_isSublayerInScale(e){var t=e.minScale||0,r=e.maxScale||0;return!(t>0&&t<this.scale||r>this.scale)}_isLegendLayerInScale(e,t){var r=t||this.layer,n=null,i=null,a=!0;return!r.minScale&&0!==r.minScale||!r.maxScale&&0!==r.maxScale?(0===e.minScale&&r.tileInfo&&(n=r.tileInfo.lods[0].scale),0===e.maxScale&&r.tileInfo&&(i=r.tileInfo.lods[r.tileInfo.lods.length-1].scale)):(n=Math.min(r.minScale,e.minScale)||r.minScale||e.minScale,i=Math.max(r.maxScale,e.maxScale)),(n>0&&n<this.scale||i>this.scale)&&(a=!1),a}_sanitizeLegendForSublayer(e,t){if("version"in this.layer&&this.layer.version<10.1||0===e.length)return e;var r=t.renderer,n=e.some((e=>e.values)),i=null,a=null;return n&&e.some(((e,t)=>(e.values||(i=t,(a=e).label||(a.label="others")),null!=a))),r?"unique-value"===r.type?a&&(e.splice(i,1),e.push(a)):"class-breaks"===r.type&&(a&&e.splice(i,1),e.reverse(),a&&e.push(a)):a&&(e.splice(i,1),e.push(a)),e}_getRendererLegendElements(e,t={}){var r=this;return Object(O.a)((function*(){return function(e,t){return He(e)||Ge(e)||We(e)||Ze(e)||$e(e)?"2d"===t.type||R(e):Be(e)||Ue(e)||qe(e)||Ye(e)||Je(e)||Xe(e)||De(e)}(e,r.view)?function(e){return Ye(e)||Je(e)||Xe(e)||function(e){return"esri.renderers.PointCloudRGBRenderer"===e.declaredClass}(e)}(e)?r._constructPointCloudRendererLegendElements(e,t):$e(e)?r._constructDotDensityRendererLegendElements(e):r._constructRendererLegendElements(e,t):(Te.warn("Renderer of type '".concat(e.type,"' not supported!")),[])}))()}_getPointCloudRendererTitle(e){return e.legendOptions&&e.legendOptions.title||e.field}_constructPointCloudRendererLegendElements(e,t={}){var r=t.title,n=[],i=null,a=null;if(Ye(e))i={type:"symbol-table",title:r||this._getPointCloudRendererTitle(e),infos:[]},e.colorClassBreakInfos.forEach((e=>{i.infos.unshift({label:e.label||e.minValue+" - "+e.maxValue,value:[e.minValue,e.maxValue],symbol:this._getAppliedCloneSymbol(Re,e.color)})}));else if(Je(e)){var s=e.stops,o=null;if(s.length&&(1===s.length&&(o=s[0].color),!o)){var l=s[0].value,c=s[s.length-1].value;null!=l&&null!=c&&(o=ae(l+(c-l)/2,s))}i={type:"symbol-table",title:null,infos:[{label:null,value:null,symbol:this._getAppliedCloneSymbol(Re,o||Re.color)}]};var u=function(e){var t,r=[],n=[];r=e.map((e=>e.value)),(t=e.some((e=>!!e.label)))&&(n=e.map((e=>e.label)));var i=r[0],a=r[r.length-1];if(null==i&&null==a)return null;var s=t?null:ee(r,!1);return r.map(((r,i)=>({value:r,color:ae(r,e),label:t?n[i]:s[i]}))).reverse()}(e.stops);a={type:"color-ramp",title:r||this._getPointCloudRendererTitle(e),infos:u,preview:Object(P.b)(u.map((e=>e.color)))}}else Xe(e)&&(i={type:"symbol-table",title:r||this._getPointCloudRendererTitle(e),infos:[]},e.colorUniqueValueInfos.forEach((e=>{i.infos.push({label:e.label||e.values.join(", "),value:e.values.join(", "),symbol:this._getAppliedCloneSymbol(Re,e.color)})})));i&&i.infos.length&&n.push(i),a&&a.infos.length&&n.push(a);var d=n.reduce(((e,t)=>e.concat(t.infos)),[]).filter((e=>!!e.symbol)).map((t=>this._getSymbolPreview(t,this.opacity,{symbolConfig:{applyColorModulation:!!e.colorModulation}})));return Object(_.j)(d).then((()=>n))}_getElementInfoForDotDensity(e,t){var{backgroundColor:r,outline:n,dotSize:i}=e,a=i+"-"+t+"-"+r+"-"+(n&&JSON.stringify(n.toJSON())),s=this._dotDensityUrlCache,o=s.has(a)?s.get(a):Object(P.c)(e,t);return s.set(a,o),{opacity:1,src:o.src,preview:o,width:o.width,height:o.height}}_constructDotDensityRendererLegendElements(e){var t=e.calculateDotValue(this.view.scale),r=e.legendOptions&&e.legendOptions.unit,n={type:"symbol-table",title:{value:t&&Math.round(t),unit:r||""},infos:[]};return e.attributes.forEach((t=>{var r=this._getElementInfoForDotDensity(e,t.color);r.label=t.label||t.valueExpressionTitle||t.field,n.infos.push(r)})),Promise.resolve([n])}_constructRendererLegendElements(e,t={}){var r=this;return Object(O.a)((function*(){var{title:n,sublayer:i}=t,a=i||r.layer,s=yield r._loadRenderer(e);r._hasColorRamp=!1,r._hasOpacityRamp=!1,r._hasSizeRamp=!1,r._scaleDrivenSizeVariable=null;var o=(yield r._getVisualVariableLegendElements(s,a))||[],l={type:"symbol-table",title:n||r._getRendererTitle(s,a),infos:[]},c=null,u=!1,d=new Set;if(function(e){var t="authoringInfo"in e&&(null==e?void 0:e.authoringInfo);return"univariate-color-size"===(null==t?void 0:t.type)}(s)){var f=n,h=function(e){var t="authoringInfo"in e&&(null==e?void 0:e.authoringInfo);return"univariate-color-size"===(null==t?void 0:t.type)&&"above-and-below"===(null==t?void 0:t.univariateTheme)}(s)?"univariate-above-and-below-ramp":"univariate-color-size-ramp",p=o.findIndex((e=>"color-ramp"===e.type)),y=o.splice(p,1)[0],b=o.findIndex((e=>"size-ramp"===e.type)),m=o.splice(b,1)[0],v=[];y&&(f=y.title,v.push(y)),m&&(f=m.title,v.push(m)),v.length>0&&o.push({type:h,title:f,infos:v})}else if(Ze(s)){var g=function(e){var t=e.colorStops,r=t.length-1;if(t&&t[0]){var n=t[r];n&&1!==n.ratio&&((t=t.slice(0)).push(new se.a({ratio:1,color:n.color})),r++)}return t.map(((e,t)=>{var n="";return 0===t?n="low":t===r&&(n="high"),{color:e.color,label:n,ratio:e.ratio}})).reverse()}(s);o.push({type:"heatmap-ramp",title:n,infos:g,preview:Object(P.b)(g.map((e=>e.color)))})}else if(We(s)){var O=s&&s.authoringInfo;if(O&&"relationship"===O.type){var{focus:w,numClasses:S,field1:L,field2:x}=O;if(S&&L&&x){var k=[L,x],I=he(w)||0;for(var A of k){var{field:M,normalizationField:E,label:C}=A,V=C||{field:r._getFieldAlias(M,a),normField:E&&r._getFieldAlias(E,a)},T=rt.clone();T.angle=I,l.infos.push({label:V,symbol:T}),d.add(T),I+=90}var F=function(e){var{focus:t,infos:r,numClasses:n}=e,i=ue[n],a={};r.forEach((e=>{a[e.value]={label:e.label,fill:de(e.symbol)}}));for(var s=[],o=0;o<n;o++){for(var l=[],c=0;c<n;c++){var u=a[i[o][c]];l.push(u.fill)}s.push(l)}return{type:"relationship-ramp",numClasses:n,focus:t,colors:s,labels:fe(t,a),rotation:he(t)}}({focus:w,numClasses:S,infos:s.uniqueValueInfos});o.unshift(F)}}else{var z=s.field;s.uniqueValueInfos.forEach((e=>{e.symbol&&l.infos.push({label:e.label||r._getDomainName(z,e.value,a)||e.value,value:e.value,symbol:e.symbol})}))}s.defaultSymbol&&(l.infos.push({label:s.defaultLabel||"others",symbol:s.defaultSymbol}),u=!0)}else if(Ge(s))(!(c=r._isUnclassedRenderer(s))||!r._hasSizeRamp)&&(s.classBreakInfos.forEach((e=>{e.symbol&&l.infos.unshift({label:e.label||(c?null:e.minValue+" - "+e.maxValue),value:[e.minValue,e.maxValue],symbol:e.symbol})})),c&&(l.title=null),r._updateInfosforClassedSizeRenderer(s,l.infos)),s.defaultSymbol&&!c&&(l.infos.push({label:s.defaultLabel||"others",symbol:s.defaultSymbol}),u=!0);else if(Be(s)){var R,N;if(tt(r.layer)&&"Map"===(null==(R=r.layer)||null==(N=R.raster)?void 0:N.tileType))r._getServerSideLegend();else if(tt(r.layer)||function(e){return"esri.layers.WCSLayer"===e.declaredClass}(r.layer)){var D=r._constructTileImageryStretchRendererElements(s);!function(e){return"stretch-ramp"===e.type}(D)?l.infos=D:o.push(D)}else{var U,B,q,H,G=r.layer;s.statistics&&s.statistics.length?(U=null!=s.statistics[0].min?s.statistics[0].min:s.statistics[0][0],B=null!=s.statistics[0].max?s.statistics[0].max:s.statistics[0][1]):(U=null==(q=s)?void 0:q.outputMin,B=null==(H=s)?void 0:H.outputMax);var W=[],Z=Object(j.q)(G.renderingRule?yield G.generateRasterInfo(G.renderingRule):G.serviceRasterInfo),Y=Z.keyProperties.BandProperties;1===Z.bandCount?(U=null!=U?U:Z.statistics&&Z.statistics[0].min,B=null!=B?B:Z.statistics&&Z.statistics[0].max,U||B?o.push(r._getStretchLegendElements(s,{min:U,max:B})):r._getServerSideLegend()):G.bandIds&&1===G.bandIds.length?(U=null!=U?U:Z.statistics&&Z.statistics[G.bandIds[0]].min,B=null!=B?B:Z.statistics&&Z.statistics[G.bandIds[0]].max,U||B?o.push(r._getStretchLegendElements(s,{min:U,max:B})):r._getServerSideLegend()):Z.bandCount>=3?Y&&Y.length>=Z.bandCount?G.bandIds&&3===G.bandIds.length?(W=G.bandIds.map((e=>Y[e].BandName)),l.infos=r._createSymbolTableElementMultiBand(W)):"lerc"===G.format?(W=[0,1,2].map((e=>Y[e].BandName)),l.infos=r._createSymbolTableElementMultiBand(W)):r._getServerSideLegend():"lerc"===G.format?(W=["band1","band2","band3"],l.infos=r._createSymbolTableElementMultiBand(W)):r._getServerSideLegend():r._getServerSideLegend()}}else if(Ue(s))s.colormapInfos.forEach((e=>{l.infos.push({label:e.label,value:e.value,symbol:r._getAppliedCloneSymbol(Ne,e.color)})}));else if(He(s)){var J=s.symbol;switch(t.geometryType){case"point":J="pointSymbol"in a&&a.pointSymbol;break;case"polyline":J="lineSymbol"in a&&a.lineSymbol;break;case"polygon":J="polygonSymbol"in a&&a.polygonSymbol}s.symbol&&!r._hasSizeRamp&&l.infos.push({label:s.label,symbol:J})}else if(De(s)){s.outputUnit&&(r.title="("+s.toJSON().outputUnit+")"),l.title=s.attributeField;var X=s.getClassBreakInfos();null!=X&&X.length?X.forEach((e=>{l.infos.push({label:e.minValue+" - "+e.maxValue,symbol:e.symbol})})):l.infos.push({label:s.attributeField,symbol:s.getDefaultSymbol()})}else qe(s)&&o.push(r._getStretchLegendElements(s,{min:0,max:255}));var $=s.defaultSymbol;!$||u||He(s)||c&&!r._hasColorRamp&&!r._hasSizeRamp&&!r._hasOpacityRamp||o.push({type:"symbol-table",infos:[{label:s.defaultLabel||"others",symbol:$}]}),l.infos.length&&o.unshift(l);var K=null==t.opacity?r.opacity:t.opacity,Q=r._isTallSymbol("visualVariables"in s&&s.visualVariables),ee=et(r.layer)||tt(r.layer),te=o.reduce(((e,t)=>e.concat(r._getAllInfos(t))),[]).filter((e=>!(!e||!e.symbol))).map((e=>r._getSymbolPreview(e,K,{applyScaleDrivenSize:!d.has(e.symbol),symbolConfig:{isTall:Q,isSquareFill:ee}})));return s=null,yield Object(_.j)(te),o}))()}_getServerSideLegend(){setTimeout((()=>this.buildLegendElementsForTools()),0)}_getAllInfos(e){var t=null==e?void 0:e.infos;return t?t.reduce(((e,t)=>e.concat(this._getAllInfos(t))),[]):[e]}_constructTileImageryStretchRendererElements(e){var t,r,n,i,a,s=this.layer,o=s.rasterInfo,l=o.bandCount||e.statistics.length,c=o.keyProperties&&o.keyProperties.BandProperties,u=null!=e&&null!=(t=e.statistics)&&t.length?e.statistics:null==o?void 0:o.statistics;if(u)n=void 0!==u[0].min?u[0].min:u[0][0],i=u[0].max||u[0][1];else{var d=Pe[s.rasterInfo.pixelType.toLowerCase()];n=d[0],i=d[1]}if(1===o.bandCount||1===(null==(r=s.bandIds)?void 0:r.length))return this._getStretchLegendElements(e,{min:n,max:i});function f(e){var t,r=(null!=s&&null!=(t=s.bandIds)&&t.length?s.bandIds:Array.from(Array(Math.min(o.bandCount,3)).keys())).map((t=>e&&e[t]&&e[t].BandName||"band"+(t+1)));return r.length<3?r.push(r[1]):r.length>3&&r.splice(3),r}return a=c&&c.length>=l?f(c):f(),this._createSymbolTableElementMultiBand(a)}_getStretchLegendElements(e,t){var r=function(e,t){var r,n,i=[];return e&&"multipart"===e.type?e.colorRamps.reverse().forEach((function(r,n){0===n?i.push({value:t.max,color:new L.a(r.toColor),label:"high"}):i.push({value:null,color:new L.a(r.toColor),label:""}),n===e.colorRamps.length-1?i.push({value:t.min,color:new L.a(r.fromColor),label:"low"}):i.push({value:null,color:new L.a(r.fromColor),label:""})})):(e&&"algorithmic"===e.type?(r=e.fromColor,n=e.toColor):(r=[0,0,0,1],n=[255,255,255,1]),i=[{value:t.max,color:new L.a(n),label:"high"},{value:t.min,color:new L.a(r),label:"low"}]),i}(e.colorRamp,t);return{type:"stretch-ramp",title:"",infos:r,preview:Object(P.b)(r.map((e=>e.color)))}}_createSymbolTableElementMultiBand(e){var t=[],r=["red","green","blue"];return e.forEach(((e,n)=>{t.push({label:{colorName:r[n],bandName:e},src:K[n],opacity:1})})),t}_updateInfosforClassedSizeRenderer(e,t){var r=e.authoringInfo&&"class-breaks-size"===e.authoringInfo.type,n=e.classBreakInfos.some((e=>Object(T.h)(e.symbol)));if(r&&n){var i=e.classBreakInfos.length,a=18/(i>1?i-1:i);t.forEach(((e,t)=>{e.size=30-a*t}))}}_isTallSymbol(e){var t=!1,r=!1;if(e)for(var n=0;n<e.length&&(!t||!r);n++){var i=e[n];"size"===i.type&&("height"===i.axis&&(t=!0),"width-and-depth"===i.axis&&(r=!0))}return t&&r}_getSymbolPreview(e,t,n){var i=this;return Object(O.a)((function*(){var a=null==e.size&&i._hasSizeRamp?Object(x.i)(22):e.size;if(i._scaleDrivenSizeVariable&&null!=n&&n.applyScaleDrivenSize){var{getSize:s}=yield Promise.resolve().then(r.bind(null,277));a=s(i._scaleDrivenSizeVariable,null,{view:i.view.type,scale:i.scale,shape:"simple-marker"===e.symbol.type?e.symbol.style:null})}return Object(P.d)(e.symbol,{size:a,opacity:t,scale:!1,symbolConfig:null==n?void 0:n.symbolConfig}).then((t=>(e.preview=t,e))).catch((()=>(e.preview=null,e)))}))()}_loadRenderer(e){var t=this;return Object(O.a)((function*(){var r,n,i=[],a=t.layer;e=e.clone(),t._hasClusterSizeVariable=!1;var s="visualVariables"in e&&(null==(r=e.visualVariables)?void 0:r.some((e=>"size"===e.type&&"outline"!==e.target&&!Fe.test(e.valueExpression))));if(e&&"visualVariables"in e&&!s&&"featureReduction"in a&&"cluster"===(null==(n=a.featureReduction)?void 0:n.type)){var o=t.layerView._effectiveRenderer,l=Object(j.q)(function(e,t){if(!e||!("visualVariables"in e)||!e.visualVariables)return null;var r=e.visualVariables.find((e=>"size"===e.type)),n=((e,t)=>{var r=e.featuresTilingScheme.getClosestInfoForScale(e.scale).level;return null!=t&&t.levels?t.levels[r]:null})(t,r);return n?new N.a({field:r.field,minSize:n[2].size,minDataValue:n[2].value,maxSize:n[3].size,maxDataValue:n[3].value}):null}(o,t.view));if(l){var c=a.featureReduction;if("clusterMinSize"in c&&"clusterMaxSize"in c){var{clusterMinSize:u,clusterMaxSize:d}=c;l.legendOptions=new C.a({showLegend:u!==d})}var f=e.visualVariables||[];e.visualVariables=f.concat([l]),t._hasClusterSizeVariable=!0}}var h=yield t._getMedianColor(e);if(Ge(e)||We(e)){var p=(e.classBreakInfos||e.uniqueValueInfos).map((e=>t._fetchSymbol(e.symbol,h).then((t=>{e.symbol=t})).catch((()=>{e.symbol=null}))));Array.prototype.push.apply(i,p)}return i.push(t._fetchSymbol(e.symbol||e.defaultSymbol,e.defaultSymbol?null:h).then((r=>{t._applySymbolToRenderer(e,r,He(e))})).catch((()=>{t._applySymbolToRenderer(e,null,He(e))}))),Object(_.j)(i).then((()=>e))}))()}_applySymbolToRenderer(e,t,r){r?e.symbol=t:e.defaultSymbol=t}_getMedianColor(e){return Object(O.a)((function*(){if(!("visualVariables"in e)||!e.visualVariables)return null;var t=e.visualVariables.find((e=>"color"===e.type));if(!t)return null;var n=null,i=null;if(t.stops){if(1===t.stops.length)return t.stops[0].color;n=t.stops[0].value,i=t.stops[t.stops.length-1].value}var a=n+(i-n)/2,{getColor:s}=yield Promise.resolve().then(r.bind(null,277));return s(t,a)}))()}_fetchSymbol(e,t){if(!e)return Promise.reject();if("web-style"===e.type){var r=e.portal,n=r&&r.url,i=r&&r.user&&r.user.username,a=e.name+"-"+e.styleName+"-"+e.styleUrl+"-"+n+"-"+i,s=this._webStyleSymbolCache;return s.has(a)||("2d"===this.view.type?s.set(a,e.fetchCIMSymbol()):s.set(a,e.fetchSymbol())),s.get(a).then((e=>this._getAppliedCloneSymbol(e,t))).catch((()=>(Te.warn("Fetching web-style failed!"),Promise.reject())))}return Promise.resolve(this._getAppliedCloneSymbol(e,t))}_getAppliedCloneSymbol(e,t){if(!e||!t)return e;var r=e.clone(),n=t&&t.toRgba();return r.type.indexOf("3d")>-1?this._applyColorTo3dSymbol(r,n):"cim"===r.type?Object(V.a)(r,t):r.color&&(r.color=new L.a(n||r.color)),r}_applyColorTo3dSymbol(e,t){t&&e.symbolLayers.forEach((e=>{e&&(e.material||(e.material={}),e.material.color=new L.a(t))}))}_getVisualVariableLegendElements(e,t){var r=this;return Object(O.a)((function*(){if(!("visualVariables"in e)||!e.visualVariables||"vector-field"===e.type)return null;var n=e.visualVariables,i=[],a=[],s=[];for(var o of n)"color"===o.type?i.push(o):"size"===o.type?a.push(o):"opacity"===o.type&&s.push(o);var l,c,u=[...i,...a,...s];if(0===i.length&&Ge(e)&&e.classBreakInfos&&1===e.classBreakInfos.length){var d=e.classBreakInfos[0];l=d&&d.symbol}if(0===i.length&&He(e)&&(l=e.symbol),l)if(l.type.indexOf("3d")>-1){var f=l.symbolLayers.getItemAt(0);"water"===f.type?Object(j.k)(f.color)&&(c=f.color):Object(j.k)(f.material)&&Object(j.k)(f.material.color)&&(c=f.material.color)}else l.url||(c=l.color);return(yield Promise.all(u.map(function(){var n=Object(O.a)((function*(n){if(!n.legendOptions||!1!==n.legendOptions.showLegend){var i=r._getRampTitle(n,t),a=null,s="getField"in t&&t.getField&&t.getField(n.field),o=s&&Object(S.u)(s);if("color"===n.type){var l=yield te(n,null,o);a={type:"color-ramp",title:i,infos:l,preview:Object(P.b)(l.map((e=>e.color)))},r._hasColorRamp||(r._hasColorRamp=!(null==a.infos||!a.infos.length))}else if("size"===n.type&&"outline"!==n.target)Fe.test(n.valueExpression)?r._hasClusterSizeVariable||(r._scaleDrivenSizeVariable=n):(a={type:"size-ramp",title:r._hasClusterSizeVariable?r._getClusterTitle(n):i,infos:yield ve(e,n,yield r._getMedianColor(e),r.scale,r.view.type,o)},r._hasSizeRamp||(r._hasSizeRamp=!(null==a.infos||!a.infos.length)));else if("opacity"===n.type){var u=yield te(n,c,o);a={type:"opacity-ramp",title:i,infos:u,preview:Object(P.b)(u.map((e=>e.color)))},r._hasOpacityRamp||(r._hasOpacityRamp=!(null==a.infos||!a.infos.length))}return a&&a.infos?a:null}}));return function(e){return n.apply(this,arguments)}}()))).filter((e=>!!e))}))()}_getDomainName(e,t,r){if(e&&"function"!=typeof e){var n="getField"in r&&r.getField&&r.getField(e),i=n&&"getFieldDomain"in r&&r.getFieldDomain?r.getFieldDomain(n.name):null;return i&&"coded-value"===i.type?i.getName(t):null}return null}_getClusterTitle(e){var t=this.layer,r=e.field;if("featureReduction"in t&&t.featureReduction&&"cluster"===t.featureReduction.type){var n=t.featureReduction,i="popupTemplate"in n&&n.popupTemplate,a=i&&i.fieldInfos;if(a)for(var s of a)if(s.fieldName===r)return"cluster_count"===r?s.label||{showCount:!0}:s.label}return{showCount:!0}}_getRampTitle(e,t){var r=e.field,n=e.normalizationField,i=!1,a=!1,s=!1,o=null;r="function"==typeof r?null:r,n="function"==typeof n?null:n;var l=e.legendOptions&&e.legendOptions.title;if(null!=l)o=l;else if(e.valueExpressionTitle)o=e.valueExpressionTitle;else{if("renderer"in t&&t.renderer&&"authoringInfo"in t.renderer&&t.renderer.authoringInfo&&t.renderer.authoringInfo.visualVariables)for(var c=t.renderer.authoringInfo.visualVariables,u=0;u<c.length;u++){var d=c[u];if("color"===d.type){if("ratio"===d.style){i=!0;break}if("percent"===d.style){a=!0;break}if("percent-of-total"===d.style){s=!0;break}}}o={field:r&&this._getFieldAlias(r,t),normField:n&&this._getFieldAlias(n,t),ratio:i,ratioPercent:a,ratioPercentTotal:s}}return o}_getRendererTitle(e,t){var r=e;if(r.legendOptions&&r.legendOptions.title)return r.legendOptions.title;if(r.valueExpressionTitle)return r.valueExpressionTitle;var n=r.field,i=null,a=null;Ge(r)&&(i=r.normalizationField,a="percent-of-total"===r.normalizationType),i="function"==typeof i?null:i;var s=null;return((n="function"==typeof n?null:n)||i)&&(s={field:n&&this._getFieldAlias(n,t),normField:i&&this._getFieldAlias(i,t),normByPct:a}),s}_getFieldAlias(e,t){var r="popupTemplate"in t&&t.popupTemplate,n=r&&r.fieldInfos,i=null;n&&n.some((t=>e===t.fieldName&&(i=t,!0)));var a=null;"getField"in t&&t.getField?a=t.getField(e):"fieldsIndex"in t&&t.fieldsIndex&&(a=t.fieldsIndex.get(e));var s=i||a,o=null;return s&&(o=i&&i.label||a&&a.alias||"name"in s&&s.name||"fieldName"in s&&s.fieldName),o}_isUnclassedRenderer(e){var t=e.visualVariables,r=!1;return Ge(e)&&e.classBreakInfos&&1===e.classBreakInfos.length&&t&&(r=e.field?t.some((t=>!(!t||e.field!==t.field||(e.normalizationField||t.normalizationField)&&e.normalizationField!==t.normalizationField))):!!t.length),r}};Object(i.a)([Object(s.b)()],it.prototype,"children",void 0),Object(i.a)([Object(s.b)()],it.prototype,"layerView",void 0),Object(i.a)([Object(s.b)()],it.prototype,"layer",void 0),Object(i.a)([Object(s.b)()],it.prototype,"legendElements",void 0),Object(i.a)([Object(s.b)({readOnly:!0})],it.prototype,"opacity",null),Object(i.a)([Object(s.b)()],it.prototype,"parent",void 0),Object(i.a)([Object(s.b)({readOnly:!0,dependsOn:[]})],it.prototype,"ready",null),Object(i.a)([Object(s.b)()],it.prototype,"keepCacheOnDestroy",void 0),Object(i.a)([Object(s.b)()],it.prototype,"respectLayerVisibility",void 0),Object(i.a)([Object(s.b)({readOnly:!0})],it.prototype,"scale",null),Object(i.a)([Object(s.b)()],it.prototype,"sublayerIds",void 0),Object(i.a)([Object(s.b)({readOnly:!0})],it.prototype,"isScaleDriven",null),Object(i.a)([Object(s.b)()],it.prototype,"title",void 0),Object(i.a)([Object(s.b)({readOnly:!0,dependsOn:["ready"],value:0})],it.prototype,"version",null),Object(i.a)([Object(s.b)()],it.prototype,"view",void 0);var at=it=Object(i.a)([Object(c.a)("esri.widgets.Legend.support.ActiveLayerInfo")],it),st="state",ot="view",lt="all-layer-views",ct="legend-properties",ut=v.a.ofType(at),dt=["esri.layers.BuildingSceneLayer","esri.layers.CSVLayer","esri.layers.FeatureLayer","esri.layers.GeoJSONLayer","esri.layers.GeoRSSLayer","esri.layers.GroupLayer","esri.layers.HeatmapLayer","esri.layers.ImageryLayer","esri.layers.ImageryTileLayer","esri.layers.MapImageLayer","esri.layers.OGCFeatureLayer","esri.layers.PointCloudLayer","esri.layers.StreamLayer","esri.layers.SceneLayer","esri.layers.TileLayer","esri.layers.WMSLayer","esri.layers.WMTSLayer","esri.layers.WCSLayer"],ft="view.basemapView.baseLayerViews",ht="view.groundView.layerViews",pt="view.basemapView.referenceLayerViews",yt=[ft,ht,"view.layerViews",pt],bt=class extends m.a{constructor(e){super(e),this._handles=new d.a,this._layerViewByLayerId={},this._layerInfosByLayerViewId={},this._activeLayerInfosByLayerViewId={},this._activeLayerInfosWithNoParent=new v.a,this.activeLayerInfos=new ut,this.basemapLegendVisible=!1,this.groundLegendVisible=!1,this.keepCacheOnDestroy=!1,this.respectLayerVisibility=!0,this.layerInfos=[],this.view=null}initialize(){this._handles.add(Object(f.a)(this,"view",this._viewHandles),ot),this._handles.add(Object(g.c)((()=>this._refresh())))}destroy(){this._destroyViewActiveLayerInfos(),this._handles.destroy(),this._handles=null,this.view=null}get state(){return this.get("view.ready")?"ready":"disabled"}_viewHandles(){this._handles.remove(st),this.view&&this._handles.add(Object(f.a)(this,"state",this._stateHandles),st)}_stateHandles(){this._resetAll(),"ready"===this.state&&this._watchPropertiesAndAllLayerViews()}_resetAll(){this._handles.remove([lt,ct]),this._destroyViewActiveLayerInfos(),this.activeLayerInfos.removeAll()}_destroyViewActiveLayerInfos(){Object.keys(this._activeLayerInfosByLayerViewId).forEach(this._destroyViewActiveLayerInfo,this)}_destroyViewActiveLayerInfo(e){this._handles.remove(e);var t=this._activeLayerInfosByLayerViewId[e];delete this._activeLayerInfosByLayerViewId[e],t&&t.parent&&t.parent.children.remove(t)}_watchPropertiesAndAllLayerViews(){var{allLayerViews:e}=this.view;e.length&&this._refresh(),this._handles.add(e.on("change",this._allLayerViewsChangeHandle.bind(this)),lt),this._handles.add(Object(f.d)(this,"layerInfos, basemapLegendVisible, groundLegendVisible",this._propertiesChangeHandle.bind(this)),ct)}_allLayerViewsChangeHandle(e){e.removed.forEach((e=>this._destroyViewActiveLayerInfo(e.uid))),this._refresh()}_propertiesChangeHandle(){this._destroyViewActiveLayerInfos(),this._refresh()}_refresh(){this._layerInfosByLayerViewId={},this.activeLayerInfos.removeAll(),this._generateLayerViews().filter(this._filterLayerViewsByLayerInfos,this).filter(this._isLayerViewSupported,this).forEach(this._generateActiveLayerInfo,this),this._sortActiveLayerInfos(this.activeLayerInfos)}_sortActiveLayerInfos(e){if(!(e.length<2)){var t=[];e.forEach((r=>{if(!r.parent){var n=r.layer.parent,i=n&&"uid"in n&&this._layerViewByLayerId[n.uid],a=i&&this._activeLayerInfosByLayerViewId[i.uid];a&&-1!==e.indexOf(a)&&(t.push(r),r.parent=a,a.children.add(r),this._sortActiveLayerInfos(a.children))}})),e.removeMany(t);var r={};this.view.allLayerViews.forEach(((e,t)=>r[e.layer.uid]=t)),e.sort(((e,t)=>{var n=r[e.layer.uid]||0;return(r[t.layer.uid]||0)-n}))}}_generateLayerViews(){var e=[];return yt.filter(this._filterLayerViews,this).map(this.get,this).filter((e=>null!=e)).forEach(this._collectLayerViews("layerViews",e)),e}_filterLayerViews(e){var t=!this.basemapLegendVisible&&(e===ft||e===pt),r=!this.groundLegendVisible&&e===ht;return!t&&!r}_collectLayerViews(e,t){var r=n=>(n&&n.forEach((n=>{t.push(n),r(n[e])})),t);return r}_filterLayerViewsByLayerInfos(e){var t=this.layerInfos;return!t||!t.length||t.some((t=>this._hasLayerInfo(t,e)))}_hasLayerInfo(e,t){var r=this._isLayerUIDMatching(e.layer,t.layer.uid);return r&&(this._layerInfosByLayerViewId[t.uid]=e),r}_isLayerUIDMatching(e,t){return e&&(e.uid===t||this._hasLayerUID(e.layers,t))}_hasLayerUID(e,t){return e&&e.some((e=>this._isLayerUIDMatching(e,t)))}_isLayerViewSupported(e){return dt.indexOf(e.layer.declaredClass)>-1&&(this._layerViewByLayerId[e.layer.uid]=e,!0)}_generateActiveLayerInfo(e){this._isLayerActive(e)?this._buildActiveLayerInfo(e):(this._handles.remove(e.uid),this._handles.add(Object(f.d)(e,"legendEnabled, layer.legendEnabled",(()=>this._layerActiveHandle(e))),e.uid))}_layerActiveHandle(e){this._isLayerActive(e)&&(this._handles.remove(e.uid),this._buildActiveLayerInfo(e))}_isLayerActive(e){return!this.respectLayerVisibility||e.legendEnabled&&e.get("layer.legendEnabled")}_buildActiveLayerInfo(e){var t,r=e.layer,n=e.uid,i=this._layerInfosByLayerViewId[n],a=this._activeLayerInfosByLayerViewId[n];if(!a){var s=i&&void 0!==i.title&&i.layer.uid===r.uid;a=new at({layer:r,layerView:e,title:s?i.title:r.title,view:this.view,respectLayerVisibility:this.respectLayerVisibility,keepCacheOnDestroy:this.keepCacheOnDestroy,sublayerIds:i&&i.sublayerIds||[]}),this._activeLayerInfosByLayerViewId[n]=a}var o=r.parent&&"uid"in r.parent&&this._layerViewByLayerId[null==(t=r.parent)?void 0:t.uid];if(a.parent=this._activeLayerInfosByLayerViewId[null==o?void 0:o.uid],!this._handles.has(n)){var l=[Object(f.d)(r,"title",(e=>this._titleHandle(e,a))),Object(f.d)(r,"renderer?, opacity, pointSymbol?, lineSymbol?, polygonSymbol?",(()=>this._constructLegendElements(a))),Object(f.k)(this.view,"stationary",(()=>this._scaleHandle(a))),Object(f.d)(e,"_effectiveRenderer",(()=>this._constructLegendElements(a)))];if(this.respectLayerVisibility){var c=Object(f.d)(e,"legendEnabled",(e=>this._legendEnabledHandle(e,a))),u=Object(f.d)(r,"legendEnabled",(e=>this._legendEnabledHandle(e,a)));l.push(c,u)}this._handles.add(l,n)}a.isScaleDriven||this._constructLegendElements(a),this._addActiveLayerInfo(a)}_titleHandle(e,t){t.title=e,this._constructLegendElements(t)}_legendEnabledHandle(e,t){e?this._addActiveLayerInfo(t):this._removeActiveLayerInfo(t)}_scaleHandle(e){e.isScaleDriven&&this._constructLegendElements(e)}_addActiveLayerInfo(e){var{layerView:t,layer:r}=e;if(this._isLayerActive(t)&&-1===this.activeLayerInfos.indexOf(e)){var n=e.parent;if(n)-1===n.children.indexOf(e)&&n.children.push(e),this._sortActiveLayerInfos(n.children);else{var i,a=null==(i=this.layerInfos)?void 0:i.some((e=>e.layer.uid===r.uid));r.parent&&"uid"in r.parent&&!a?this._activeLayerInfosWithNoParent.add(e):(this.activeLayerInfos.add(e),this._sortActiveLayerInfos(this.activeLayerInfos))}if(this._activeLayerInfosWithNoParent.length){var s=[];this._activeLayerInfosWithNoParent.forEach((e=>{var t=e.layer.parent,r=t&&"uid"in t&&this._layerViewByLayerId[null==t?void 0:t.uid],n=this._activeLayerInfosByLayerViewId[null==r?void 0:r.uid];n&&(s.push(e),e.parent=n)})),s.length&&(this._activeLayerInfosWithNoParent.removeMany(s),s.forEach((e=>this._addActiveLayerInfo(e))))}}}_removeActiveLayerInfo(e){var t=e.parent;t?t.children.remove(e):this.activeLayerInfos.remove(e)}_constructLegendElements(e){var t=e.layer;"featureCollections"in t&&t.featureCollections?e.buildLegendElementsForFeatureCollections(t.featureCollections):"renderer"in t&&t.renderer?e.buildLegendElementsForRenderer(t.renderer):"url"in t&&t.url?e.buildLegendElementsForTools():e.children.forEach((e=>this._constructLegendElements(e)))}};Object(i.a)([Object(s.b)({type:ut})],bt.prototype,"activeLayerInfos",void 0),Object(i.a)([Object(s.b)()],bt.prototype,"basemapLegendVisible",void 0),Object(i.a)([Object(s.b)()],bt.prototype,"groundLegendVisible",void 0),Object(i.a)([Object(s.b)()],bt.prototype,"keepCacheOnDestroy",void 0),Object(i.a)([Object(s.b)()],bt.prototype,"respectLayerVisibility",void 0),Object(i.a)([Object(s.b)()],bt.prototype,"layerInfos",void 0),Object(i.a)([Object(s.b)({readOnly:!0})],bt.prototype,"state",null),Object(i.a)([Object(s.b)()],bt.prototype,"view",void 0);var mt=bt=Object(i.a)([Object(c.a)("esri.widgets.Legend.LegendViewModel")],bt),vt=r(281),gt=r(261),Ot=r(750),jt="http://www.w3.org/2000/svg",wt="esri-relationship-ramp--diamond__container",_t="esri-relationship-ramp--diamond__left-column",St="esri-relationship-ramp--diamond__right-column",Lt="esri-relationship-ramp--diamond__middle-column",xt="esri-relationship-ramp--diamond__middle-column--label",kt="esri-relationship-ramp--diamond__middle-column--ramp",It="esri-relationship-ramp--square__table",At="esri-relationship-ramp--square__table-row",Mt="esri-relationship-ramp--square__table-cell",Et="esri-relationship-ramp--square__table-label",Ct="esri-relationship-ramp--square__table-label--left-bottom",Vt="esri-relationship-ramp--square__table-label--right-bottom",Tt="esri-relationship-ramp--square__table-label--left-top",Ft="esri-relationship-ramp--square__table-label--right-top";function zt(e,t,r){var{focus:n,labels:i}=e,a=!!n,s=function(e,t,r,n=60){var{focus:i,numClasses:a,colors:s,rotation:o}=e,l=!!i,c=Math.sqrt(Math.pow(n,2)+Math.pow(n,2))+(l?0:5),u=null;null!=r&&(u="opacity: ".concat(r));for(var d=[],f=[],h=[],p=(n||75)/a,b=0;b<a;b++)for(var m=b*p,v=0;v<a;v++){var g=v*p,O=Object(Ot.b)(s[b][v]),j=Object(Ot.c)(null),w={type:"rect",x:g,y:m,width:p,height:p};d.push(Object(Ot.f)(O)),f.push(Object(Ot.h)(w,O.fill,j,null)),h.push(Object(Ot.d)(w))}var _=10,S=15,L=15,x=10,k=null;l||(k="margin: -15px -15px -18px -15px");var I=Pt("left",i,t),A=Pt("right",i,t),M=Object(Ot.a)(h),E=Object(Ot.e)(M,c,c,0,!1,o,!1),C=Object(Ot.e)(M,c,c,0,!1,l?-45:null,!1);return Object(y.a)("div",{style:u,class:l?kt:Mt},Object(y.a)("svg",{xmlns:jt,width:c,height:c,style:k},Object(y.a)("defs",null,Object(y.a)("marker",{id:"".concat(t,"_arrowStart"),markerWidth:"10",markerHeight:"10",refX:"5",refY:"5",markerUnits:"strokeWidth",orient:"auto"},Object(y.a)("polyline",{points:"0,0 5,5 0,10",fill:"none",stroke:"#555555","stroke-width":"1"})),Object(y.a)("marker",{id:"".concat(t,"_arrowEnd"),markerWidth:"10",markerHeight:"10",refX:"0",refY:"5",markerUnits:"strokeWidth",orient:"auto"},Object(y.a)("polyline",{points:"5,0 0,5 5,10",fill:"none",stroke:"#555555","stroke-width":"1"})),d),Object(y.a)("g",{transform:E},f),Object(y.a)("g",{transform:C},Object(y.a)("line",{fill:"none",stroke:"#555555","stroke-width":"1","marker-start":I.markerStart,"marker-end":I.markerEnd,x1:-_,y1:n-S,x2:-_,y2:S}),Object(y.a)("line",{fill:"none",stroke:"#555555","stroke-width":"1","marker-start":A.markerStart,"marker-end":A.markerEnd,x1:L,y1:n+x,x2:n-L,y2:n+x}))))}(e,t,r);return a?Object(y.a)("div",{class:wt},Object(y.a)("div",{class:_t},i.left),Object(y.a)("div",{class:Lt},Object(y.a)("div",{class:xt},i.top),s,Object(y.a)("div",{class:xt},i.bottom)),Object(y.a)("div",{class:St},i.right)):Object(y.a)("div",{class:It},Object(y.a)("div",{class:At},Object(y.a)("div",{class:Object(h.a)(Mt,Et,Vt)},i.left),Object(y.a)("div",{class:Mt}),Object(y.a)("div",{class:Object(h.a)(Mt,Et,Ct)},i.top)),Object(y.a)("div",{class:At},Object(y.a)("div",{class:Mt}),s,Object(y.a)("div",{class:Mt})),Object(y.a)("div",{class:At},Object(y.a)("div",{class:Object(h.a)(Mt,Et,Ft)},i.bottom),Object(y.a)("div",{class:Mt}),Object(y.a)("div",{class:Object(h.a)(Mt,Et,Tt)},i.right)))}function Pt(e,t,r){var n="".concat(r,"_arrowStart"),i="".concat(r,"_arrowEnd"),a="left"===e,s={markerStart:null,markerEnd:null};switch(t){case"HL":a?s.markerStart="url(#".concat(i,")"):s.markerEnd="url(#".concat(n,")");break;case"LL":s.markerStart="url(#".concat(i,")");break;case"LH":a?s.markerEnd="url(#".concat(n,")"):s.markerStart="url(#".concat(i,")");break;default:s.markerEnd="url(#".concat(n,")")}return s}r(302);var Rt=r(367),Nt=Object(Rt.a)(),Dt="esri-univariate-above-and-below-ramp__symbol",Ut="esri-legend__color-ramp";function Bt(e="vertical"){var t="stroke:rgb(200, 200, 200);stroke-width:1";return"vertical"===e?Object(y.a)("svg",{height:"4",width:"10"},Object(y.a)("line",{x1:"0",y1:"2",x2:"10",y2:"2",style:t})):Object(y.a)("svg",{height:"10",width:"10"},Object(y.a)("line",{x1:"5",y1:"0",x2:"5",y2:"10",style:t}))}function qt(e,t="vertical"){var r=document.createElement("div");return r.style.height="".concat(20,"px"),r.className=Dt,null!=e&&(r.style.opacity=e.toString()),Nt.append(r,Bt.bind(null,t)),r}function Ht(e,t,r="vertical",n){e.infos.forEach(((e,i)=>{if(n&&2===i)e.preview=qt(t,r);else{var a=Object(x.h)(e.size)+("horizontal"===r?20:10),s="div"===e.preview.tagName.toLowerCase(),o=s?e.preview:document.createElement("div");o.className=Dt,"horizontal"===r?o.style.width="".concat(a,"px"):o.style.height="".concat(a,"px"),s||o.appendChild(e.preview),e.preview=o}}))}function Gt(e,t="classic"){var r=e.infos;return"classic"===t?(Object(x.h)(r[0].size)+10)/2:(Object(x.h)(r[0].size)-Object(x.h)(r[r.length-1].size))/2}function Wt(e,t){if(!e)return null;var r=e.infos.map((e=>e.color)),n=Object(P.b)("full"===t.type?r:"above"===t.type?r.slice(0,3):r.slice(2,5),{width:t.width,height:t.height,align:t.rampAlignment});return n.className=Ut,null!=t.opacity&&(n.style.opacity=t.opacity.toString()),n}function Zt(e,t,r,n="vertical"){for(var i=0,a=e.infos,s=Math.floor(a.length/2),o="full"===t||"above"===t?0:s,l="full"===t||"below"===t?a.length-1:s,c=o;c<=l;c++)i+=r&&c===s?"horizontal"===n?10:20:Object(x.h)(a[c].size)+("horizontal"===n?20:10);return Math.round(i)}function Yt(e,t,r,n="vertical"){var i=Zt(e,t,r,n),a=e.infos,s=Math.floor(a.length/2),o="full"===t||"above"===t?0:s,l="full"===t||"below"===t?a.length-1:s,c="full"===t?a[o].size+a[l].size:"above"===t?a[o].size:a[l].size,u=r?"vertical"===n?20:10:0,d="vertical"===n?10*("full"===t?2:1):20*("full"===t?2:1);return Math.round(i-(Object(x.h)(c)/2+u/2+d/2))}function Jt(e,t,r="vertical"){var i,a=e.infos,s=a.filter((({type:e})=>"size-ramp"===e))[0],o=a.filter((({type:e})=>"color-ramp"===e))[0];return s&&((s=Object(n.a)({},s)).infos=[...s.infos]),o&&((o=Object(n.a)({},o)).infos=[...o.infos]),Ht(s,t,r,!0),"horizontal"===r&&(s.infos.reverse(),null==(i=o)||i.infos.reverse()),{sizeRampElement:s,colorRampElement:o}}function Xt(e,t="vertical"){var r,i=e.infos,a=i.filter((({type:e})=>"size-ramp"===e))[0],s=i.filter((({type:e})=>"color-ramp"===e))[0];return a&&((a=Object(n.a)({},a)).infos=[...a.infos]),s&&((s=Object(n.a)({},s)).infos=[...s.infos]),Ht(a,null,t,!1),"horizontal"===t&&(a.infos.reverse(),null==(r=s)||r.infos.reverse()),{sizeRampElement:a,colorRampElement:s}}function $t(e){e.appendChild(this)}function Kt(e,t,r){if(t){if("string"==typeof t||"number"==typeof t)return t;if("value"in t||"unit"in t)return Object(vt.a)(e.dotValue,t);if("colorName"in t||"bandName"in t)return e[t.colorName]+": "+(e[t.bandName]||t.bandName);if("showCount"in t)return t.showCount?e.clusterCountTitle:null;var n=null;return r?n=t.ratioPercentTotal?"showRatioPercentTotal":t.ratioPercent?"showRatioPercent":t.ratio?"showRatio":t.normField?"showNormField":t.field?"showField":null:Qt(t,r)&&(n=t.normField?"showNormField":t.normByPct?"showNormPct":t.field?"showField":null),n?Object(vt.a)("showField"===n?"{field}":e[n],{field:t.field,normField:t.normField}):null}}function Qt(e,t){return!t}function er(e,t){return!!(t&&"Stretched"===t&&e.version>=10.3&&"esri.layers.ImageryLayer"===e.declaredClass)}var tr="esri-legend--card__carousel-indicator--activated",rr="esri-legend--card",nr="esri-legend--stacked",ir="esri-legend--card__carousel-title",ar="esri-legend--card__carousel-indicator",sr="esri-legend--card__interval-separator",or="esri-legend--card__imagery-layer-image--stretched",lr="esri-legend--card__image-label",cr="esri-legend--card__layer-caption",ur="esri-legend--card__label-element",dr="esri-legend--card__layer-row",fr="esri-legend--card__label-cell",hr="esri-legend--card__message",pr="esri-legend--card__ramp-label",yr="esri-legend--card__section",br="esri-legend--card__service-caption-text",mr="esri-legend--card__service-content",vr="esri-legend--card__service",gr="esri-legend--card__group-layer",Or="esri-legend--card__group-layer-child",jr="esri-legend--card__symbol",wr="esri-legend--card__size-ramp-row",_r="esri-legend--card__symbol-row",Sr="esri-legend--card__symbol-cell",Lr="esri-legend--card__carousel-indicator-container",xr="esri-legend--card__interval-separators-container",kr="esri-legend--card__relationship-label-container",Ir="esri-legend--card__label-container",Ar="esri-legend--card__service-caption-container",Mr="esri-legend--card__symbol-container",Er="esri-legend--card__size-ramp-container",Cr="esri-legend--card__size-ramp-preview",Vr="esri-legend__size-ramp--horizontal",Tr="esri-legend__ramp-labels",Fr="esri-legend__layer-cell esri-legend__layer-cell--info",zr="esri-univariate-above-and-below-ramp__color--card",Pr="esri-widget__heading",Rr=window.devicePixelRatio;var Nr=class extends b.a{constructor(e,t){super(e,t),this._handles=new d.a,this._hasIndicators=!1,this._selectedSectionName=null,this._sectionNames=[],this._sectionMap=new Map,this.activeLayerInfos=null,this.layout="stack",this.messages=null,this.messagesCommon=null,this.type="card",this.view=null}initialize(){this.own([this.watch("activeLayerInfos",(e=>{this._handles.removeAll(),this._watchForSectionChanges(e)}))])}destroy(){this._handles.destroy(),this._handles=null}render(){this._hasIndicators="auto"===this.layout&&this.view.container.clientWidth<=768||"stack"===this.layout;var e=this.activeLayerInfos,t=e&&e.toArray().map((e=>this._renderLegendForLayer(e))).filter((e=>!!e));this._hasIndicators?this._selectedSectionName&&-1!==this._sectionNames.indexOf(this._selectedSectionName)||(this._selectedSectionName=this._sectionNames&&this._sectionNames[0]):this._selectedSectionName=null;var r=this._sectionNames.length,n=this._sectionNames.map(((e,t)=>{var n=Object(vt.a)(this.messagesCommon.pagination.pageText,{index:t+1,total:r});return Object(y.a)("div",{key:e,role:"tab",id:e,"aria-label":n,"aria-controls":"".concat(e,"-panel"),"aria-selected":(this._selectedSectionName===e).toString(),tabIndex:this._selectedSectionName===e?0:-1,title:n,onclick:this._selectSection,onkeydown:this._focusSection,bind:this,class:this.classes(ar,{[tr]:this._selectedSectionName===e}),"data-section-name":e})})),i=this._hasIndicators&&r>1?Object(y.a)("div",{class:Lr,key:"carousel-navigation",role:"tablist"},n):null,a=this._hasIndicators?this._sectionMap.get(this._selectedSectionName):t&&t.length?t:null,s={[nr]:this._hasIndicators};return Object(y.a)("div",{class:this.classes(rr,s)},a||Object(y.a)("div",{class:hr},this.messages.noLegend),i)}_selectSection(e){var t=e.target.getAttribute("data-section-name");t&&(this._selectedSectionName=t)}_focusSection(e){switch(e.key){case"ArrowLeft":case"ArrowRight":this._switchSectionOnArrowPress(e);break;case"Enter":case" ":this._selectSection(e)}}_switchSectionOnArrowPress(e){var t=e.key,r="ArrowLeft"===t?-1:1,n=e.target.getAttribute("data-section-name"),i=this._sectionNames.indexOf(n),a=this._sectionNames,s=null;-1!==i&&(a[i+r]?s=document.getElementById(a[i+r]):"ArrowLeft"===t?s=document.getElementById(a[a.length-1]):"ArrowRight"===t&&(s=document.getElementById(a[0])),s&&s.focus())}_watchForSectionChanges(e){if(this._generateSectionNames(),e){e.forEach((e=>{var t="activeLayerInfo-".concat(e.layer.uid,"-version-change");this._handles.remove(t),this._watchForSectionChanges(e.children),this._handles.add(e.watch("version",(()=>this._generateSectionNames())),t)}));var t="activeLayerInfos-collection-change";this._handles.remove(t),this._handles.add(e.on("change",(()=>this._watchForSectionChanges(e))),t)}}_generateSectionNames(){this._sectionNames.length=0,this._selectedSectionName=null,this.activeLayerInfos&&this.activeLayerInfos.forEach(this._generateSectionNamesForActiveLayerInfo,this)}_getSectionName(e,t,r){return"".concat(this.id).concat(e.uid,"-type-").concat(t.type,"-").concat(r)}_generateSectionNamesForActiveLayerInfo(e){e.children.forEach(this._generateSectionNamesForActiveLayerInfo,this),e.legendElements&&e.legendElements.forEach(((t,r)=>{this._sectionNames.push(this._getSectionName(e.layer,t,r))}))}_renderLegendForLayer(e){if(!e.ready)return null;if(e.children.length){var t=e.children.map((e=>this._renderLegendForLayer(e))).toArray();return Object(y.a)("div",{key:e.layer.uid,class:this.classes(vr,gr)},Object(y.a)("div",{class:Ar},e.title),t)}var r=e.legendElements;if(r&&!r.length)return null;var n=r.some((e=>"relationship-ramp"===e.type)),i=r.map(((t,r)=>this._renderLegendForElement(t,e,r,n))).filter((e=>!!e));if(!i.length)return null;var a={[Or]:!!e.parent};return Object(y.a)("div",{key:e.layer.uid,class:this.classes(vr,a)},Object(y.a)("div",{class:Ar},Object(y.a)("div",{class:br},e.title)),Object(y.a)("div",{class:mr},i))}_renderLegendForElement(e,t,r,n=!1){var i="color-ramp"===e.type,a="opacity-ramp"===e.type,s="size-ramp"===e.type,o=t.layer,l=e.title,c=null;if("string"==typeof l)c=l;else if(l){var u=Kt(this.messages,l,i||a);c=l.title?"".concat(l.title," (").concat(u,")"):u}var d=this._getSectionName(o,e,r),f=this._hasIndicators?Object(y.a)("div",null,Object(y.a)("h3",{class:this.classes(Pr,ir)},t.title),Object(y.a)("h4",{class:this.classes(Pr,cr)},c)):c?Object(y.a)("h4",{class:this.classes(Pr,cr)},c):null,h=null;if("symbol-table"===e.type){var p=e.infos.map(((r,n)=>this._renderLegendForElementInfo(r,t,e.legendType,n))).filter((e=>!!e));if(p.length){var b=p[0].properties.classes&&p[0].properties.classes[_r],m={[Ir]:!b&&!n,[kr]:n};h=Object(y.a)("div",{class:this.classes(m)},p)}}else"color-ramp"===e.type||"opacity-ramp"===e.type||"heatmap-ramp"===e.type?h=this._renderLegendForRamp(e,o.opacity):s?h=this._renderSizeRamp(e,o.opacity):"relationship-ramp"===e.type?h=zt(e,this.id,o.opacity):"univariate-above-and-below-ramp"===e.type?h=this._renderUnivariateAboveAndBelowRamp(e,o.opacity):"univariate-color-size-ramp"===e.type&&(h=this._renderUnivariateColorSizeRamp(e,o.opacity));if(!h)return null;var v=Object(y.a)("div",{key:d,class:yr,id:"".concat(d,"-panel"),role:"tabpanel","aria-labelledby":d,tabIndex:0},[f,h]);return this._sectionMap.set(d,v),v}_renderUnivariateAboveAndBelowRamp(e,t){var{sizeRampElement:r,colorRampElement:n}=Jt(e,t,"horizontal"),i=Zt(r,"full",!0,"horizontal"),a=Yt(r,"above",!0,"horizontal"),s=Yt(r,"below",!0,"horizontal"),o=Wt(n,{width:a,height:12,rampAlignment:"horizontal",opacity:t,type:"above"}),l=Wt(n,{width:s,height:12,rampAlignment:"horizontal",opacity:t,type:"below"}),c=Gt(r,"card"),u=r.infos.map((e=>e.label)),d=u.length-1,f=u.map(((e,t)=>0===t||t===d?Object(y.a)("div",{key:t},e):null)),h={marginTop:"3px",marginLeft:"".concat(c,"px"),display:"flex"},p={width:"".concat(i,"px"),display:"flex",flexDirection:"row",justifyContent:"space-between"};return Object(y.a)("div",{class:dr,key:"size-ramp-preview",styles:{display:"flex",flexDirection:"column"}},Object(y.a)("div",{class:this.classes(Mr,Vr),styles:{display:"flex",flexDirection:"row"}},r.infos.map(((e,t)=>Object(y.a)("div",{key:t,class:jr,bind:e.preview,afterCreate:$t})))),o?Object(y.a)("div",{class:zr,styles:h,key:"color-ramp-preview"},Object(y.a)("div",{bind:o,afterCreate:$t}),Object(y.a)("div",{bind:l,afterCreate:$t})):null,Object(y.a)("div",{class:Fr},Object(y.a)("div",{class:Tr,styles:p},f)))}_renderUnivariateColorSizeRamp(e,t){var{sizeRampElement:r,colorRampElement:n}=Xt(e,"horizontal"),i=Zt(r,"full",!1,"horizontal"),a=Wt(n,{width:Yt(r,"full",!1,"horizontal"),height:12,rampAlignment:"horizontal",opacity:t,type:"full"}),s=Gt(r,"card"),o=r.infos.length-1,l=r.infos.map(((e,t)=>0===t||t===o?Object(y.a)("div",{key:t},e.label):null)),c={marginTop:"3px",marginLeft:"".concat(s,"px"),display:"flex"},u={width:"".concat(i,"px"),display:"flex",flexDirection:"row",justifyContent:"space-between"};return Object(y.a)("div",{class:dr,key:"size-ramp-preview",styles:{display:"flex",flexDirection:"column"}},Object(y.a)("div",{class:this.classes(Mr,Vr),styles:{display:"flex",flexDirection:"row"}},r.infos.map(((e,t)=>Object(y.a)("div",{key:t,class:jr,bind:e.preview,afterCreate:$t})))),Object(y.a)("div",{class:zr,styles:c,key:"color-ramp-preview"},Object(y.a)("div",{bind:a,afterCreate:$t})),Object(y.a)("div",{class:Fr},Object(y.a)("div",{class:Tr,styles:u},l)))}_renderLegendForElementInfo(e,t,r,n){var i=t.layer;if(e.type)return this._renderLegendForElement(e,t,n);var a=er(i,r);if(e.preview){var s,o;if(!e.symbol||-1===e.symbol.type.indexOf("simple-fill")){if(!e.label)return Object(y.a)("div",{key:n,bind:e.preview,afterCreate:$t});var l={[Sr]:this._hasIndicators};return Object(y.a)("div",{key:n,class:this.classes(dr,{[_r]:this._hasIndicators})},Object(y.a)("div",{class:this.classes(l),bind:e.preview,afterCreate:$t}),Object(y.a)("div",{class:this.classes(lr,{[fr]:this._hasIndicators})},Kt(this.messages,e.label,!1)||""))}var c=255,u=255,d=255,f=0,h=255,p=255,b=255,m=0,v=e.symbol.color&&e.symbol.color.a,g=e.symbol.outline&&e.symbol.outline.color&&e.symbol.outline.color.a;v&&(c=e.symbol.color.r,u=e.symbol.color.g,d=e.symbol.color.b,f=e.symbol.color.a*i.opacity),g&&(h=e.symbol.outline.color.r,p=e.symbol.outline.color.g,b=e.symbol.outline.color.b,m=e.symbol.outline.color.a*i.opacity);var O=null==(s=null==(o=e.symbol.color)?void 0:o.isBright)||s,j=O?"rgba(255, 255, 255, .6)":"rgba(0, 0, 0, .6)",w={background:v?"rgba(".concat(c,", ").concat(u,", ").concat(d,", ").concat(f,")"):"none",color:O?"black":"white",textShadow:"-1px -1px 0 ".concat(j,",\n                                              1px -1px 0 ").concat(j,",\n                                              -1px 1px 0 ").concat(j,",\n                                              1px 1px 0 ").concat(j),border:g?"1px solid rgba(".concat(h,", ").concat(p,", ").concat(b,", ").concat(m,")"):"none"};return Object(y.a)("div",{key:n,class:dr},Object(y.a)("div",{class:ur,styles:w}," ",e.label," "))}if(e.src){var _=this._renderImage(e,i,a);return Object(y.a)("div",{key:n,class:dr},_,Object(y.a)("div",{class:lr},e.label||""))}}_renderImage(e,t,r){var{label:n,src:i,opacity:a}=e,s={[or]:r,[jr]:!r},o={opacity:"".concat(null!=a?a:t.opacity)};return Object(y.a)("img",{alt:Kt(this.messages,n,!1),src:i,border:0,width:e.width,height:e.height,class:this.classes(s),styles:o})}_renderSizeRampLines(e){var t=e.infos,r=t[0],n=t[t.length-1],i=r.symbol,a=this._hasIndicators,s=Object(x.h)(r.size+r.outlineSize)*Rr,o=Object(x.h)(n.size+n.outlineSize)*Rr,l=a?s:s+50*Rr,c=a?s/2+50*Rr:s,u=function(e){if(e){if(e.type.indexOf("3d")>-1){var t=e.symbolLayers&&e.symbolLayers.length;if(!t)return;var r=e.symbolLayers.getItemAt(t-1).get("resource.primitive");return"triangle"===r||"cone"===r||"tetrahedron"===r}return"triangle"===e.style}}(i),d=function(e){if(e){if(e.type.indexOf("3d")>-1){var t=e.symbolLayers&&e.symbolLayers.length;if(!t)return;var r=e.symbolLayers.getItemAt(t-1),n=r.resource&&r.resource.primitive;return"circle"===n||"cross"===n||"kite"===n||"sphere"===n||"cube"===n||"diamond"===n}var i=e.style;return"circle"===i||"diamond"===i||"cross"===i}}(i),f=document.createElement("canvas");f.width=l,f.height=c,f.style.width=f.width/Rr+"px",f.style.height=f.height/Rr+"px";var h=f.getContext("2d");if(a){h.beginPath();var p=l/2-o/2,b=c;h.moveTo(0,0),h.lineTo(p,b);var m=l,v=l/2+o/2,g=c;h.moveTo(m,0),h.lineTo(v,g)}else{h.beginPath();var O=c/2-o/2,j=l;h.moveTo(0,O),h.lineTo(j,0);var w=c/2+o/2,_=l,S=c;h.moveTo(0,w),h.lineTo(_,S)}return h.strokeStyle="#ddd",h.stroke(),Object(y.a)("div",{bind:f,afterCreate:$t,styles:a?{display:"flex",marginTop:"-".concat(u?0:d?s/2:0,"px"),marginBottom:"-".concat(u?o:d?o/2:0,"px")}:{display:"flex",marginRight:"-".concat(u?0:d?s/2:0,"px"),marginLeft:"-".concat(u?0:d?o/2:0,"px")}})}_renderSizeRamp(e,t){var r=e.infos,n=r[0].label,i=r[r.length-1].label,a=r[0].preview,s=r[r.length-1].preview,o=this._hasIndicators,l={"flex-direction":o?"column":"row-reverse"};a&&((a=a.cloneNode(!0)).style.display="flex"),s&&((s=s.cloneNode(!0)).style.display="flex");var c={opacity:null!=t?"".concat(t):""};return Object(y.a)("div",{class:this.classes(dr,{[wr]:o})},Object(y.a)("div",{class:pr},o?n:i),Object(y.a)("div",{class:Er,styles:l},Object(y.a)("div",{bind:a,afterCreate:$t,class:Cr,styles:c}),this._renderSizeRampLines(e),Object(y.a)("div",{bind:s,afterCreate:$t,class:Er,styles:c})),Object(y.a)("div",{class:pr},o?i:n))}_renderLegendForRamp(e,t){var r=e.infos,n="heatmap-ramp"===e.type,i=r.length-1,a=25,s=i>2&&!n?25*i:100,o=s+20,l=10,c=r.slice(0).reverse();c.forEach(((e,t)=>{e.offset=n?e.ratio:t/i}));var u=c.length-1,d=c.length%2!=0&&c[c.length/2|0],f=d&&Object(y.a)("div",{class:xr},Object(y.a)("div",{class:sr},"|"),Object(y.a)("div",{class:pr},d.label)),h=r[r.length-1].label,p=r[0].label,b=null;null!=t&&(b="opacity: ".concat(t));var m=[[{shape:{type:"path",path:"M0 ".concat(a/2," L").concat(l," 0 L").concat(l," ").concat(a," Z")},fill:c[0].color,stroke:{width:0}},{shape:{type:"rect",x:l,y:0,width:s,height:a},fill:{type:"linear",x1:l,y1:0,x2:s+l,y2:0,colors:c},stroke:{width:0}},{shape:{type:"path",path:"M".concat(s+l," 0 L").concat(o," ").concat(a/2," L").concat(s+l," ").concat(a," Z")},fill:c[u].color,stroke:{width:0}}]],v=Object(Ot.g)(m,o,a),{messages:g}=this;return Object(y.a)("div",{class:dr},Object(y.a)("div",{class:pr},n?g[h]:h),Object(y.a)("div",{class:Mr},Object(y.a)("div",{style:b},v),f),Object(y.a)("div",{class:pr},n?g[p]:p))}};Object(i.a)([Object(s.b)()],Nr.prototype,"activeLayerInfos",void 0),Object(i.a)([Object(s.b)()],Nr.prototype,"layout",void 0),Object(i.a)([Object(s.b)(),Object(p.a)("esri/widgets/Legend/t9n/Legend")],Nr.prototype,"messages",void 0),Object(i.a)([Object(s.b)(),Object(p.a)("esri/t9n/common")],Nr.prototype,"messagesCommon",void 0),Object(i.a)([Object(s.b)({readOnly:!0})],Nr.prototype,"type",void 0),Object(i.a)([Object(s.b)()],Nr.prototype,"view",void 0),Object(i.a)([Object(gt.a)()],Nr.prototype,"_selectSection",null);var Dr=Nr=Object(i.a)([Object(c.a)("esri.widgets.Legend.styles.Card")],Nr),Ur="esri-legend__service",Br="esri-legend__service-label",qr="esri-legend__layer",Hr="esri-legend__group-layer",Gr="esri-legend__group-layer-child",Wr="esri-legend__layer-table",Zr="esri-legend__layer-table--size-ramp",Yr="esri-legend__layer-child-table",Jr="esri-legend__layer-caption",Xr="esri-legend__layer-body",$r="esri-legend__layer-row",Kr="esri-legend__layer-cell esri-legend__layer-cell--info",Qr="esri-legend__imagery-layer-image--stretched",en="esri-legend__imagery-layer-info--stretched",tn="esri-legend__layer-cell esri-legend__layer-cell--symbols",rn="esri-legend__symbol",nn="esri-legend__ramps",an="esri-legend__size-ramp",sn="esri-legend__color-ramp",on="esri-legend__opacity-ramp",ln="esri-legend__ramp-labels",cn="esri-legend__ramp-label",un="esri-univariate-above-and-below-ramp__label",dn="esri-legend__message",fn="esri-widget__heading",hn={display:"flex",alignItems:"flex-start"},pn={marginLeft:"3px"},yn={display:"table-cell",verticalAlign:"middle"},bn=class extends b.a{constructor(e,t){super(e,t),this.activeLayerInfos=null,this.messages=null,this.type="classic"}render(){var e=this.activeLayerInfos,t=e&&e.toArray().map((e=>this._renderLegendForLayer(e))).filter((e=>!!e));return Object(y.a)("div",null,t&&t.length?t:Object(y.a)("div",{class:dn},this.messages.noLegend))}_renderLegendForLayer(e){if(!e.ready)return null;var t=!!e.children.length,r="".concat("esri-legend__").concat(e.layer.uid,"-version-").concat(e.version),n=e.title?Object(y.a)("h3",{class:this.classes(fn,Br)},e.title):null;if(t){var i=e.children.map((e=>this._renderLegendForLayer(e))).toArray();return Object(y.a)("div",{key:r,class:this.classes(Ur,Hr)},n,i)}var a=e.legendElements;if(a&&!a.length)return null;var s=a.map((t=>this._renderLegendForElement(t,e.layer))).filter((e=>!!e));if(!s.length)return null;var o={[Gr]:!!e.parent};return Object(y.a)("div",{key:r,class:this.classes(Ur,o),tabIndex:0},n,Object(y.a)("div",{class:qr},s))}_renderLegendForElement(e,t,r){var n="color-ramp"===e.type,i="opacity-ramp"===e.type,a="size-ramp"===e.type,s=null;if("symbol-table"===e.type||a){var o=e.infos.map((r=>this._renderLegendForElementInfo(r,t,a,e.legendType))).filter((e=>!!e));o.length&&(s=Object(y.a)("div",{class:Xr},o))}else"color-ramp"===e.type||"opacity-ramp"===e.type||"heatmap-ramp"===e.type||"stretch-ramp"===e.type?s=this._renderLegendForRamp(e,t.opacity):"relationship-ramp"===e.type?s=zt(e,this.id,t.opacity):"univariate-above-and-below-ramp"===e.type?s=this._renderUnivariateAboveAndBelowRamp(e,t.opacity):"univariate-color-size-ramp"===e.type&&(s=this._renderUnivariateColorSizeRamp(e,t.opacity));if(!s)return null;var l=e.title,c=null;if("string"==typeof l)c=l;else if(l){var u=Kt(this.messages,l,n||i);c=Qt(0,n||i)&&l.title?"".concat(l.title," (").concat(u,")"):u}var d=r?Yr:Wr,f=c?Object(y.a)("div",{class:Jr},c):null,h={[Zr]:a||!r};return Object(y.a)("div",{class:this.classes(d,h)},f,s)}_renderUnivariateAboveAndBelowRamp(e,t){var{sizeRampElement:r,colorRampElement:n}=Jt(e,t),i=Yt(r,"above",!0),a=Yt(r,"below",!0),s=Wt(n,{width:12,height:i,rampAlignment:"vertical",opacity:t,type:"above"}),o=Wt(n,{width:12,height:a,rampAlignment:"vertical",opacity:t,type:"below"}),l=Gt(r),c=r.infos.map((e=>e.label)),u=c.map(((e,t)=>{var r=2===t;return 0===t?Object(y.a)("div",{key:t,class:e?s?un:cn:null},e):r?Object(y.a)("div",null):null})),d=c.length-1,f=Math.floor(c.length/2),h=c.map(((e,t)=>t===f||t===d?Object(y.a)("div",{key:t,class:e?s?un:cn:null},e):null)),p={display:"table-cell",verticalAlign:"middle"},b={marginTop:"".concat(l,"px")},m={height:"".concat(i,"px")},v={height:"".concat(a,"px")};return Object(y.a)("div",{key:"univariate-above-and-below-ramp-preview",styles:hn},Object(y.a)("div",{class:Xr},r.infos.map(((e,t)=>Object(y.a)("div",{class:this.classes($r,an)},Object(y.a)("div",{class:rn,styles:p,bind:e.preview,afterCreate:$t}),s||t%2!=0?null:Object(y.a)("div",{class:Kr},c[t]))))),s?Object(y.a)("div",{styles:b,key:"color-ramp-preview"},Object(y.a)("div",{styles:pn},Object(y.a)("div",{styles:yn},Object(y.a)("div",{class:nn,bind:s,afterCreate:$t})),Object(y.a)("div",{styles:yn},Object(y.a)("div",{class:ln,styles:m},u))),Object(y.a)("div",{styles:pn},Object(y.a)("div",{styles:yn},Object(y.a)("div",{class:nn,bind:o,afterCreate:$t})),Object(y.a)("div",{styles:yn},Object(y.a)("div",{class:ln,styles:v},h)))):null)}_renderUnivariateColorSizeRamp(e,t){var{sizeRampElement:r,colorRampElement:n}=Xt(e),i=Gt(r),a=Yt(r,"full",!1),s=Wt(n,{width:12,height:a,rampAlignment:"vertical",opacity:t,type:"full"}),o=r.infos.length-1,l=r.infos.map(((e,t)=>0===t||t===o?Object(y.a)("div",{key:t,class:e.label?n?un:cn:null},e.label):null)),c={display:"table-cell",verticalAlign:"middle"},u={marginTop:"".concat(i,"px")},d={height:"".concat(a,"px")};return Object(y.a)("div",{key:"univariate-above-and-below-ramp-preview",styles:hn},Object(y.a)("div",{class:Xr},r.infos.map((e=>Object(y.a)("div",{class:this.classes($r,an)},Object(y.a)("div",{class:rn,styles:c,bind:e.preview,afterCreate:$t}))))),Object(y.a)("div",{styles:u,key:"color-ramp-preview"},Object(y.a)("div",{styles:pn},Object(y.a)("div",{styles:yn},Object(y.a)("div",{class:nn,bind:s,afterCreate:$t})),Object(y.a)("div",{styles:yn},Object(y.a)("div",{class:ln,styles:d},l)))))}_renderLegendForRamp(e,t){var r=e.infos,n="opacity-ramp"===e.type,i="heatmap-ramp"===e.type,a="stretch-ramp"===e.type,s=e.preview,o=n?on:"";s.className="".concat(sn," ").concat(o),null!=t&&(s.style.opacity=t.toString());var l=r.map((e=>Object(y.a)("div",{class:e.label?cn:null},i?this.messages[e.label]:a?this._getStretchStopLabel(e):e.label))),c={width:"".concat(24,"px")},u={height:s.style.height};return Object(y.a)("div",{class:$r},Object(y.a)("div",{class:tn,styles:c},Object(y.a)("div",{class:nn,bind:s,afterCreate:$t})),Object(y.a)("div",{class:Kr},Object(y.a)("div",{class:ln,styles:u},l)))}_getStretchStopLabel(e){return e.label?this.messages[e.label]+": "+Object(U.b)(e.value,{style:"decimal",notation:e.value.toString().indexOf("e")>-1?"scientific":"standard"}):""}_renderLegendForElementInfo(e,t,r,n){if(e.type)return this._renderLegendForElement(e,t,!0);var i=null,a=er(t,n);if(e.preview?i=Object(y.a)("div",{class:rn,bind:e.preview,afterCreate:$t}):e.src&&(i=this._renderImage(e,t,a)),!i)return null;var s={[en]:a},o={[en]:a,[an]:!a&&r};return Object(y.a)("div",{class:$r},Object(y.a)("div",{class:this.classes(tn,o)},i),Object(y.a)("div",{class:this.classes(Kr,s)},Kt(this.messages,e.label,!1)||""))}_renderImage(e,t,r){var{label:n,src:i,opacity:a}=e,s={[Qr]:r,[rn]:!r},o={opacity:"".concat(null!=a?a:t.opacity)};return Object(y.a)("img",{alt:Kt(this.messages,n,!1),src:i,border:0,width:e.width,height:e.height,class:this.classes(s),styles:o})}};Object(i.a)([Object(s.b)()],bn.prototype,"activeLayerInfos",void 0),Object(i.a)([Object(s.b)(),Object(p.a)("esri/widgets/Legend/t9n/Legend")],bn.prototype,"messages",void 0),Object(i.a)([Object(s.b)({readOnly:!0})],bn.prototype,"type",void 0);var mn=bn=Object(i.a)([Object(c.a)("esri.widgets.Legend.styles.Classic")],bn),vn="esri-legend",gn="esri-widget",On="esri-widget--panel",jn="esri-icon-layer-list",wn=class extends b.a{constructor(e,t){super(e,t),this._handles=new d.a,this.activeLayerInfos=null,this.basemapLegendVisible=!1,this.groundLegendVisible=!1,this.keepCacheOnDestroy=!1,this.respectLayerVisibility=!0,this.iconClass=jn,this.label=void 0,this.layerInfos=null,this.messages=null,this.style=new mn,this.view=null,this.viewModel=new mt}initialize(){this.own(Object(f.b)(this,"activeLayerInfos","change",(()=>this._refreshActiveLayerInfos(this.activeLayerInfos))),Object(f.a)(this,"style",((e,t)=>{t&&e!==t&&t.destroy(),e&&(e.activeLayerInfos=this.activeLayerInfos,"card"===e.type&&(e.view=this.view))})))}destroy(){this._handles.destroy(),this._handles=null}castStyle(e){if(e instanceof Dr||e instanceof mn)return e;if("string"==typeof e)return"card"===e?new Dr:new mn;if(e&&"string"==typeof e.type){var t=Object(n.a)({},e);return delete t.type,new("card"===e.type?Dr:mn)(t)}return new mn}render(){return Object(y.a)("div",{class:this.classes(vn,gn,this.style instanceof mn?On:null)},this.style.render())}_refreshActiveLayerInfos(e){this._handles.removeAll(),e.forEach((e=>this._renderOnActiveLayerInfoChange(e))),this.scheduleRender()}_renderOnActiveLayerInfoChange(e){var t=Object(f.a)(e,"version",(()=>this.scheduleRender()));this._handles.add(t,"version_".concat(e.layer.uid));var r=Object(f.b)(e,"children","change",(()=>{e.children.forEach((e=>this._renderOnActiveLayerInfoChange(e)))}));this._handles.add(r,"children_".concat(e.layer.uid)),e.children.forEach((e=>this._renderOnActiveLayerInfoChange(e)))}};Object(i.a)([Object(o.a)("viewModel.activeLayerInfos")],wn.prototype,"activeLayerInfos",void 0),Object(i.a)([Object(o.a)("viewModel.basemapLegendVisible")],wn.prototype,"basemapLegendVisible",void 0),Object(i.a)([Object(o.a)("viewModel.groundLegendVisible")],wn.prototype,"groundLegendVisible",void 0),Object(i.a)([Object(o.a)("viewModel.keepCacheOnDestroy")],wn.prototype,"keepCacheOnDestroy",void 0),Object(i.a)([Object(o.a)("viewModel.respectLayerVisibility")],wn.prototype,"respectLayerVisibility",void 0),Object(i.a)([Object(s.b)()],wn.prototype,"iconClass",void 0),Object(i.a)([Object(s.b)({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],wn.prototype,"label",void 0),Object(i.a)([Object(o.a)("viewModel.layerInfos")],wn.prototype,"layerInfos",void 0),Object(i.a)([Object(s.b)(),Object(p.a)("esri/widgets/Legend/t9n/Legend")],wn.prototype,"messages",void 0),Object(i.a)([Object(s.b)()],wn.prototype,"style",void 0),Object(i.a)([Object(l.a)("style")],wn.prototype,"castStyle",null),Object(i.a)([Object(o.a)("viewModel.view")],wn.prototype,"view",void 0),Object(i.a)([Object(s.b)()],wn.prototype,"viewModel",void 0);var _n=wn=Object(i.a)([Object(c.a)("esri.widgets.Legend")],wn);t.default=_n},1123:function(e,t,r){"use strict";r.r(t),r.d(t,"Legend",(function(){return s}));var n=r(1),i=r(1090),a=r(0),s=e=>{var t=Object(n.useRef)(null);return Object(n.useEffect)((()=>{var r=new i.default({container:t.current,view:e.view});return()=>{r&&r.destroy()}}),[e.view]),Object(a.jsx)("div",{ref:t})};t.default=s},114:function(e,t,r){"use strict";r.d(t,"a",(function(){return Oe})),r.d(t,"b",(function(){return Se})),r.d(t,"c",(function(){return we})),r.d(t,"d",(function(){return Ae})),r.d(t,"e",(function(){return Me})),r.d(t,"f",(function(){return je})),r.d(t,"g",(function(){return Ie})),r.d(t,"h",(function(){return ke})),r.d(t,"i",(function(){return _e}));r(80);var n=r(81),i=r(315);var a,s,o=Function.prototype,l=Object.prototype,c=o.toString,u=l.hasOwnProperty,d=c.call(Object),f=l.toString,h=(a=Object.getPrototypeOf,s=Object,function(e){return a(s(e))});var p=function(e){if(!function(e){return!!e&&"object"==typeof e}(e)||"[object Object]"!=f.call(e)||function(e){var t=!1;if(null!=e&&"function"!=typeof e.toString)try{t=!!(e+"")}catch(r){}return t}(e))return!1;var t=h(e);if(null===t)return!0;var r=u.call(t,"constructor")&&t.constructor;return"function"==typeof r&&r instanceof r&&c.call(r)==d};function y(e,t,r){return e(r={path:t,exports:{},require:function(e,t){return function(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}((void 0===t||null===t)&&r.path)}},r.exports),r.exports}function b(){var e={"align-content":!1,"align-items":!1,"align-self":!1,"alignment-adjust":!1,"alignment-baseline":!1,all:!1,"anchor-point":!1,animation:!1,"animation-delay":!1,"animation-direction":!1,"animation-duration":!1,"animation-fill-mode":!1,"animation-iteration-count":!1,"animation-name":!1,"animation-play-state":!1,"animation-timing-function":!1,azimuth:!1,"backface-visibility":!1,background:!0,"background-attachment":!0,"background-clip":!0,"background-color":!0,"background-image":!0,"background-origin":!0,"background-position":!0,"background-repeat":!0,"background-size":!0,"baseline-shift":!1,binding:!1,bleed:!1,"bookmark-label":!1,"bookmark-level":!1,"bookmark-state":!1,border:!0,"border-bottom":!0,"border-bottom-color":!0,"border-bottom-left-radius":!0,"border-bottom-right-radius":!0,"border-bottom-style":!0,"border-bottom-width":!0,"border-collapse":!0,"border-color":!0,"border-image":!0,"border-image-outset":!0,"border-image-repeat":!0,"border-image-slice":!0,"border-image-source":!0,"border-image-width":!0,"border-left":!0,"border-left-color":!0,"border-left-style":!0,"border-left-width":!0,"border-radius":!0,"border-right":!0,"border-right-color":!0,"border-right-style":!0,"border-right-width":!0,"border-spacing":!0,"border-style":!0,"border-top":!0,"border-top-color":!0,"border-top-left-radius":!0,"border-top-right-radius":!0,"border-top-style":!0,"border-top-width":!0,"border-width":!0,bottom:!1,"box-decoration-break":!0,"box-shadow":!0,"box-sizing":!0,"box-snap":!0,"box-suppress":!0,"break-after":!0,"break-before":!0,"break-inside":!0,"caption-side":!1,chains:!1,clear:!0,clip:!1,"clip-path":!1,"clip-rule":!1,color:!0,"color-interpolation-filters":!0,"column-count":!1,"column-fill":!1,"column-gap":!1,"column-rule":!1,"column-rule-color":!1,"column-rule-style":!1,"column-rule-width":!1,"column-span":!1,"column-width":!1,columns:!1,contain:!1,content:!1,"counter-increment":!1,"counter-reset":!1,"counter-set":!1,crop:!1,cue:!1,"cue-after":!1,"cue-before":!1,cursor:!1,direction:!1,display:!0,"display-inside":!0,"display-list":!0,"display-outside":!0,"dominant-baseline":!1,elevation:!1,"empty-cells":!1,filter:!1,flex:!1,"flex-basis":!1,"flex-direction":!1,"flex-flow":!1,"flex-grow":!1,"flex-shrink":!1,"flex-wrap":!1,float:!1,"float-offset":!1,"flood-color":!1,"flood-opacity":!1,"flow-from":!1,"flow-into":!1,font:!0,"font-family":!0,"font-feature-settings":!0,"font-kerning":!0,"font-language-override":!0,"font-size":!0,"font-size-adjust":!0,"font-stretch":!0,"font-style":!0,"font-synthesis":!0,"font-variant":!0,"font-variant-alternates":!0,"font-variant-caps":!0,"font-variant-east-asian":!0,"font-variant-ligatures":!0,"font-variant-numeric":!0,"font-variant-position":!0,"font-weight":!0,grid:!1,"grid-area":!1,"grid-auto-columns":!1,"grid-auto-flow":!1,"grid-auto-rows":!1,"grid-column":!1,"grid-column-end":!1,"grid-column-start":!1,"grid-row":!1,"grid-row-end":!1,"grid-row-start":!1,"grid-template":!1,"grid-template-areas":!1,"grid-template-columns":!1,"grid-template-rows":!1,"hanging-punctuation":!1,height:!0,hyphens:!1,icon:!1,"image-orientation":!1,"image-resolution":!1,"ime-mode":!1,"initial-letters":!1,"inline-box-align":!1,"justify-content":!1,"justify-items":!1,"justify-self":!1,left:!1,"letter-spacing":!0,"lighting-color":!0,"line-box-contain":!1,"line-break":!1,"line-grid":!1,"line-height":!1,"line-snap":!1,"line-stacking":!1,"line-stacking-ruby":!1,"line-stacking-shift":!1,"line-stacking-strategy":!1,"list-style":!0,"list-style-image":!0,"list-style-position":!0,"list-style-type":!0,margin:!0,"margin-bottom":!0,"margin-left":!0,"margin-right":!0,"margin-top":!0,"marker-offset":!1,"marker-side":!1,marks:!1,mask:!1,"mask-box":!1,"mask-box-outset":!1,"mask-box-repeat":!1,"mask-box-slice":!1,"mask-box-source":!1,"mask-box-width":!1,"mask-clip":!1,"mask-image":!1,"mask-origin":!1,"mask-position":!1,"mask-repeat":!1,"mask-size":!1,"mask-source-type":!1,"mask-type":!1,"max-height":!0,"max-lines":!1,"max-width":!0,"min-height":!0,"min-width":!0,"move-to":!1,"nav-down":!1,"nav-index":!1,"nav-left":!1,"nav-right":!1,"nav-up":!1,"object-fit":!1,"object-position":!1,opacity:!1,order:!1,orphans:!1,outline:!1,"outline-color":!1,"outline-offset":!1,"outline-style":!1,"outline-width":!1,overflow:!1,"overflow-wrap":!1,"overflow-x":!1,"overflow-y":!1,padding:!0,"padding-bottom":!0,"padding-left":!0,"padding-right":!0,"padding-top":!0,page:!1,"page-break-after":!1,"page-break-before":!1,"page-break-inside":!1,"page-policy":!1,pause:!1,"pause-after":!1,"pause-before":!1,perspective:!1,"perspective-origin":!1,pitch:!1,"pitch-range":!1,"play-during":!1,position:!1,"presentation-level":!1,quotes:!1,"region-fragment":!1,resize:!1,rest:!1,"rest-after":!1,"rest-before":!1,richness:!1,right:!1,rotation:!1,"rotation-point":!1,"ruby-align":!1,"ruby-merge":!1,"ruby-position":!1,"shape-image-threshold":!1,"shape-outside":!1,"shape-margin":!1,size:!1,speak:!1,"speak-as":!1,"speak-header":!1,"speak-numeral":!1,"speak-punctuation":!1,"speech-rate":!1,stress:!1,"string-set":!1,"tab-size":!1,"table-layout":!1,"text-align":!0,"text-align-last":!0,"text-combine-upright":!0,"text-decoration":!0,"text-decoration-color":!0,"text-decoration-line":!0,"text-decoration-skip":!0,"text-decoration-style":!0,"text-emphasis":!0,"text-emphasis-color":!0,"text-emphasis-position":!0,"text-emphasis-style":!0,"text-height":!0,"text-indent":!0,"text-justify":!0,"text-orientation":!0,"text-overflow":!0,"text-shadow":!0,"text-space-collapse":!0,"text-transform":!0,"text-underline-position":!0,"text-wrap":!0,top:!1,transform:!1,"transform-origin":!1,"transform-style":!1,transition:!1,"transition-delay":!1,"transition-duration":!1,"transition-property":!1,"transition-timing-function":!1,"unicode-bidi":!1,"vertical-align":!1,visibility:!1,"voice-balance":!1,"voice-duration":!1,"voice-family":!1,"voice-pitch":!1,"voice-range":!1,"voice-rate":!1,"voice-stress":!1,"voice-volume":!1,volume:!1,"white-space":!1,widows:!1,width:!0,"will-change":!1,"word-break":!0,"word-spacing":!0,"word-wrap":!0,"wrap-flow":!1,"wrap-through":!1,"writing-mode":!1,"z-index":!1};return e}var m=/javascript\s*\:/gim;var v={whiteList:b(),getDefaultWhiteList:b,onAttr:function(e,t,r){},onIgnoreAttr:function(e,t,r){},safeAttrValue:function(e,t){return m.test(t)?"":t}},g=function(e){return String.prototype.trim?e.trim():e.replace(/(^\s*)|(\s*$)/g,"")},O=function(e){return String.prototype.trimRight?e.trimRight():e.replace(/(\s*$)/g,"")};var j=function(e,t){";"!==(e=O(e))[e.length-1]&&(e+=";");var r=e.length,n=!1,i=0,a=0,s="";function o(){if(!n){var r=g(e.slice(i,a)),o=r.indexOf(":");if(-1!==o){var l=g(r.slice(0,o)),c=g(r.slice(o+1));if(l){var u=t(i,s.length,l,c,r);u&&(s+=u+"; ")}}}i=a+1}for(;a<r;a++){var l=e[a];if("/"===l&&"*"===e[a+1]){var c=e.indexOf("*/",a+2);if(-1===c)break;i=(a=c+1)+1,n=!1}else"("===l?n=!0:")"===l?n=!1:";"===l?n||o():"\n"===l&&o()}return g(s)};function w(e){return void 0===e||null===e}function _(e){(e=function(e){var t={};for(var r in e)t[r]=e[r];return t}(e||{})).whiteList=e.whiteList||v.whiteList,e.onAttr=e.onAttr||v.onAttr,e.onIgnoreAttr=e.onIgnoreAttr||v.onIgnoreAttr,e.safeAttrValue=e.safeAttrValue||v.safeAttrValue,this.options=e}_.prototype.process=function(e){if(!(e=(e=e||"").toString()))return"";var t=this.options,r=t.whiteList,n=t.onAttr,i=t.onIgnoreAttr,a=t.safeAttrValue;return j(e,(function(e,t,s,o,l){var c=r[s],u=!1;if(!0===c?u=c:"function"===typeof c?u=c(o):c instanceof RegExp&&(u=c.test(o)),!0!==u&&(u=!1),o=a(s,o)){var d,f={position:t,sourcePosition:e,source:l,isWhite:u};return u?w(d=n(s,o,f))?s+":"+o:d:w(d=i(s,o,f))?void 0:d}}))};var S=_,L=y((function(e,t){for(var r in(t=e.exports=function(e,t){return new S(t).process(e)}).FilterCSS=S,v)t[r]=v[r]})),x=function(e,t){var r,n;if(Array.prototype.indexOf)return e.indexOf(t);for(r=0,n=e.length;r<n;r++)if(e[r]===t)return r;return-1},k=function(e,t,r){var n,i;if(Array.prototype.forEach)return e.forEach(t,r);for(n=0,i=e.length;n<i;n++)t.call(r,e[n],n,e)},I=function(e){return String.prototype.trim?e.trim():e.replace(/(^\s*)|(\s*$)/g,"")},A=function(e){var t=/\s|\n|\t/.exec(e);return t?t.index:-1},M=L.FilterCSS,E=L.getDefaultWhiteList;function C(){return{a:["target","href","title"],abbr:["title"],address:[],area:["shape","coords","href","alt"],article:[],aside:[],audio:["autoplay","controls","loop","preload","src"],b:[],bdi:["dir"],bdo:["dir"],big:[],blockquote:["cite"],br:[],caption:[],center:[],cite:[],code:[],col:["align","valign","span","width"],colgroup:["align","valign","span","width"],dd:[],del:["datetime"],details:["open"],div:[],dl:[],dt:[],em:[],font:["color","size","face"],footer:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],header:[],hr:[],i:[],img:["src","alt","title","width","height"],ins:["datetime"],li:[],mark:[],nav:[],ol:[],p:[],pre:[],s:[],section:[],small:[],span:[],sub:[],sup:[],strong:[],table:["width","border","align","valign"],tbody:["align","valign"],td:["width","rowspan","colspan","align","valign"],tfoot:["align","valign"],th:["width","rowspan","colspan","align","valign"],thead:["align","valign"],tr:["rowspan","align","valign"],tt:[],u:[],ul:[],video:["autoplay","controls","loop","preload","src","height","width"]}}var V=new M;function T(e){return e.replace(F,"&lt;").replace(z,"&gt;")}var F=/</g,z=/>/g,P=/"/g,R=/&quot;/g,N=/&#([a-zA-Z0-9]*);?/gim,D=/&colon;?/gim,U=/&newline;?/gim,B=/((j\s*a\s*v\s*a|v\s*b|l\s*i\s*v\s*e)\s*s\s*c\s*r\s*i\s*p\s*t\s*|m\s*o\s*c\s*h\s*a)\:/gi,q=/e\s*x\s*p\s*r\s*e\s*s\s*s\s*i\s*o\s*n\s*\(.*/gi,H=/u\s*r\s*l\s*\(.*/gi;function G(e){return e.replace(P,"&quot;")}function W(e){return e.replace(R,'"')}function Z(e){return e.replace(N,(function(e,t){return"x"===t[0]||"X"===t[0]?String.fromCharCode(parseInt(t.substr(1),16)):String.fromCharCode(parseInt(t,10))}))}function Y(e){return e.replace(D,":").replace(U," ")}function J(e){for(var t="",r=0,n=e.length;r<n;r++)t+=e.charCodeAt(r)<32?" ":e.charAt(r);return I(t)}function X(e){return e=J(e=Y(e=Z(e=W(e))))}function $(e){return e=T(e=G(e))}var K=/<!--[\s\S]*?-->/g;var Q={whiteList:{a:["target","href","title"],abbr:["title"],address:[],area:["shape","coords","href","alt"],article:[],aside:[],audio:["autoplay","controls","loop","preload","src"],b:[],bdi:["dir"],bdo:["dir"],big:[],blockquote:["cite"],br:[],caption:[],center:[],cite:[],code:[],col:["align","valign","span","width"],colgroup:["align","valign","span","width"],dd:[],del:["datetime"],details:["open"],div:[],dl:[],dt:[],em:[],font:["color","size","face"],footer:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],header:[],hr:[],i:[],img:["src","alt","title","width","height"],ins:["datetime"],li:[],mark:[],nav:[],ol:[],p:[],pre:[],s:[],section:[],small:[],span:[],sub:[],sup:[],strong:[],table:["width","border","align","valign"],tbody:["align","valign"],td:["width","rowspan","colspan","align","valign"],tfoot:["align","valign"],th:["width","rowspan","colspan","align","valign"],thead:["align","valign"],tr:["rowspan","align","valign"],tt:[],u:[],ul:[],video:["autoplay","controls","loop","preload","src","height","width"]},getDefaultWhiteList:C,onTag:function(e,t,r){},onIgnoreTag:function(e,t,r){},onTagAttr:function(e,t,r){},onIgnoreTagAttr:function(e,t,r){},safeAttrValue:function(e,t,r,n){if(r=X(r),"href"===t||"src"===t){if("#"===(r=I(r)))return"#";if("http://"!==r.substr(0,7)&&"https://"!==r.substr(0,8)&&"mailto:"!==r.substr(0,7)&&"tel:"!==r.substr(0,4)&&"data:image/"!==r.substr(0,11)&&"ftp://"!==r.substr(0,6)&&"./"!==r.substr(0,2)&&"../"!==r.substr(0,3)&&"#"!==r[0]&&"/"!==r[0])return""}else if("background"===t){if(B.lastIndex=0,B.test(r))return""}else if("style"===t){if(q.lastIndex=0,q.test(r))return"";if(H.lastIndex=0,H.test(r)&&(B.lastIndex=0,B.test(r)))return"";!1!==n&&(r=(n=n||V).process(r))}return r=$(r)},escapeHtml:T,escapeQuote:G,unescapeQuote:W,escapeHtmlEntities:Z,escapeDangerHtml5Entities:Y,clearNonPrintableCharacter:J,friendlyAttrValue:X,escapeAttrValue:$,onIgnoreTagStripAll:function(){return""},StripTagBody:function(e,t){"function"!==typeof t&&(t=function(){});var r=!Array.isArray(e),n=[],i=!1;return{onIgnoreTag:function(a,s,o){if(function(t){return!!r||-1!==x(e,t)}(a)){if(o.isClosing){var l="[/removed]",c=o.position+l.length;return n.push([!1!==i?i:o.position,c]),i=!1,l}return i||(i=o.position),"[removed]"}return t(a,s,o)},remove:function(e){var t="",r=0;return k(n,(function(n){t+=e.slice(r,n[0]),r=n[1]})),t+=e.slice(r)}}},stripCommentTag:function(e){return e.replace(K,"")},stripBlankChar:function(e){var t=e.split("");return(t=t.filter((function(e){var t=e.charCodeAt(0);return 127!==t&&(!(t<=31)||(10===t||13===t))}))).join("")},cssFilter:V,getDefaultCSSWhiteList:E};function ee(e){var t=A(e);if(-1===t)var r=e.slice(1,-1);else r=e.slice(1,t+1);return"/"===(r=I(r).toLowerCase()).slice(0,1)&&(r=r.slice(1)),"/"===r.slice(-1)&&(r=r.slice(0,-1)),r}function te(e){return"</"===e.slice(0,2)}var re=/[^a-zA-Z0-9_:\.\-]/gim;function ne(e,t){for(;t<e.length;t++){var r=e[t];if(" "!==r)return"="===r?t:-1}}function ie(e,t){for(;t>0;t--){var r=e[t];if(" "!==r)return"="===r?t:-1}}function ae(e){return function(e){return'"'===e[0]&&'"'===e[e.length-1]||"'"===e[0]&&"'"===e[e.length-1]}(e)?e.substr(1,e.length-2):e}var se={parseTag:function(e,t,r){var n="",i=0,a=!1,s=!1,o=0,l=e.length,c="",u="";e:for(o=0;o<l;o++){var d=e.charAt(o);if(!1===a){if("<"===d){a=o;continue}}else if(!1===s){if("<"===d){n+=r(e.slice(i,o)),a=o,i=o;continue}if(">"===d){n+=r(e.slice(i,a)),c=ee(u=e.slice(a,o+1)),n+=t(a,n.length,c,u,te(u)),i=o+1,a=!1;continue}if('"'===d||"'"===d)for(var f=1,h=e.charAt(o-f);" "===h||"="===h;){if("="===h){s=d;continue e}h=e.charAt(o-++f)}}else if(d===s){s=!1;continue}}return i<e.length&&(n+=r(e.substr(i))),n},parseAttr:function(e,t){var r=0,n=[],i=!1,a=e.length;function s(e,r){if(!((e=(e=I(e)).replace(re,"").toLowerCase()).length<1)){var i=t(e,r||"");i&&n.push(i)}}for(var o=0;o<a;o++){var l,c=e.charAt(o);if(!1!==i||"="!==c)if(!1===i||o!==r||'"'!==c&&"'"!==c||"="!==e.charAt(o-1))if(/\s|\n|\t/.test(c)){if(e=e.replace(/\s|\n|\t/g," "),!1===i){if(-1===(l=ne(e,o))){s(I(e.slice(r,o))),i=!1,r=o+1;continue}o=l-1;continue}if(-1===(l=ie(e,o-1))){s(i,ae(I(e.slice(r,o)))),i=!1,r=o+1;continue}}else;else{if(-1===(l=e.indexOf(c,o+1)))break;s(i,I(e.slice(r+1,l))),i=!1,r=(o=l)+1}else i=e.slice(r,o),r=o+1}return r<e.length&&(!1===i?s(e.slice(r)):s(i,ae(I(e.slice(r))))),I(n.join(" "))}},oe=L.FilterCSS,le=se.parseTag,ce=se.parseAttr;function ue(e){return void 0===e||null===e}function de(e){(e=function(e){var t={};for(var r in e)t[r]=e[r];return t}(e||{})).stripIgnoreTag&&(e.onIgnoreTag&&console.error('Notes: cannot use these two options "stripIgnoreTag" and "onIgnoreTag" at the same time'),e.onIgnoreTag=Q.onIgnoreTagStripAll),e.whiteList=e.whiteList||Q.whiteList,e.onTag=e.onTag||Q.onTag,e.onTagAttr=e.onTagAttr||Q.onTagAttr,e.onIgnoreTag=e.onIgnoreTag||Q.onIgnoreTag,e.onIgnoreTagAttr=e.onIgnoreTagAttr||Q.onIgnoreTagAttr,e.safeAttrValue=e.safeAttrValue||Q.safeAttrValue,e.escapeHtml=e.escapeHtml||Q.escapeHtml,this.options=e,!1===e.css?this.cssFilter=!1:(e.css=e.css||{},this.cssFilter=new oe(e.css))}de.prototype.process=function(e){if(!(e=(e=e||"").toString()))return"";var t=this.options,r=t.whiteList,n=t.onTag,i=t.onIgnoreTag,a=t.onTagAttr,s=t.onIgnoreTagAttr,o=t.safeAttrValue,l=t.escapeHtml,c=this.cssFilter;t.stripBlankChar&&(e=Q.stripBlankChar(e)),t.allowCommentTag||(e=Q.stripCommentTag(e));var u=!1;if(t.stripIgnoreTagBody){u=Q.StripTagBody(t.stripIgnoreTagBody,i);i=u.onIgnoreTag}var d=le(e,(function(e,t,u,d,f){var h,p={sourcePosition:e,position:t,isClosing:f,isWhite:r.hasOwnProperty(u)};if(!ue(h=n(u,d,p)))return h;if(p.isWhite){if(p.isClosing)return"</"+u+">";var y=function(e){var t=A(e);if(-1===t)return{html:"",closing:"/"===e[e.length-2]};var r="/"===(e=I(e.slice(t+1,-1)))[e.length-1];return r&&(e=I(e.slice(0,-1))),{html:e,closing:r}}(d),b=r[u],m=ce(y.html,(function(e,t){var r,n=-1!==x(b,e);return ue(r=a(u,e,t,n))?n?(t=o(u,e,t,c))?e+'="'+t+'"':e:ue(r=s(u,e,t,n))?void 0:r:r}));d="<"+u;return m&&(d+=" "+m),y.closing&&(d+=" /"),d+=">"}return ue(h=i(u,d,p))?l(d):h}),l);return u&&(d=u.remove(d)),d};var fe,he,pe=de,ye=y((function(e,t){function r(e,t){return new pe(t).process(e)}for(var n in(t=e.exports=r).filterXSS=r,t.FilterXSS=pe,Q)t[n]=Q[n];for(var n in se)t[n]=se[n];"undefined"!==typeof self&&"undefined"!==typeof DedicatedWorkerGlobalScope&&self instanceof DedicatedWorkerGlobalScope&&(self.filterXSS=e.exports)})),be=function(){function e(e,t){var r,n=this;this.arcgisWhiteList={a:["href","target","style"],img:["src","width","height","border","alt","style"],video:["autoplay","controls","height","loop","muted","poster","preload","width"],audio:["autoplay","controls","loop","muted","preload"],source:["media","src","type"],span:["style"],table:["width","height","cellpadding","cellspacing","border","style"],div:["style","align"],font:["size","color","style"],tr:["height","valign","align","style"],td:["height","width","valign","align","colspan","rowspan","nowrap","style"],th:["height","width","valign","align","colspan","rowspan","nowrap","style"],p:["style"],b:[],strong:[],i:[],em:[],u:[],br:[],li:[],ul:[],ol:[],hr:[],tbody:[]},this.allowedProtocols=["http","https","mailto","iform","tel","flow","lfmobile","arcgis-navigator","arcgis-appstudio-player","arcgis-survey123","arcgis-collector","arcgis-workforce","arcgis-explorer","arcgis-trek2there","mspbi","comgooglemaps","pdfefile","pdfehttp","pdfehttps","boxapp","boxemm","awb","awbs","gropen","radarscope"],this.arcgisFilterOptions={allowCommentTag:!0,safeAttrValue:function(e,t,r,i){return"a"===e&&"href"===t||("img"===e||"source"===e)&&"src"===t?n.sanitizeUrl(r):ye.safeAttrValue(e,t,r,i)}},e&&!t?r=e:e&&t?(r=Object.create(this.arcgisFilterOptions),Object.keys(e).forEach((function(t){"whiteList"===t?r.whiteList=n._extendObjectOfArrays([n.arcgisWhiteList,e.whiteList||{}]):r[t]=e[t]}))):(r=Object.create(this.arcgisFilterOptions)).whiteList=this.arcgisWhiteList,this.xssFilterOptions=r,this._xssFilter=new ye.FilterXSS(r)}return e.prototype.sanitize=function(e,t){switch(void 0===t&&(t={}),typeof e){case"number":return isNaN(e)||!isFinite(e)?null:e;case"boolean":return e;case"string":return this._xssFilter.process(e);case"object":return this._iterateOverObject(e,t);default:if(t.allowUndefined&&"undefined"===typeof e)return;return null}},e.prototype.sanitizeUrl=function(e){var t=this._trim(e.substring(0,e.indexOf(":")));return"/"===e||"#"===e||"#"===e[0]||this.allowedProtocols.indexOf(t.toLowerCase())>-1?ye.escapeAttrValue(e):""},e.prototype.sanitizeHTMLAttribute=function(e,t,r,n){return"function"===typeof this.xssFilterOptions.safeAttrValue?this.xssFilterOptions.safeAttrValue(e,t,r,n):ye.safeAttrValue(e,t,r,n)},e.prototype.validate=function(e,t){void 0===t&&(t={});var r=this.sanitize(e,t);return{isValid:e===r,sanitized:r}},e.prototype._extendObjectOfArrays=function(e){var t={};return e.forEach((function(e){Object.keys(e).forEach((function(r){Array.isArray(e[r])&&Array.isArray(t[r])?t[r]=t[r].concat(e[r]):t[r]=e[r]}))})),t},e.prototype._iterateOverObject=function(e,t){var r=this;void 0===t&&(t={});try{var n=!1,i=void 0;if(Array.isArray(e))i=e.reduce((function(e,i){var a=r.validate(i,t);return a.isValid?e.concat([i]):(n=!0,e.concat([a.sanitized]))}),[]);else{if(!p(e)){if(t.allowUndefined&&"undefined"===typeof e)return;return null}i=Object.keys(e).reduce((function(i,a){var s=e[a],o=r.validate(s,t);return o.isValid?i[a]=s:(n=!0,i[a]=o.sanitized),i}),{})}return n?i:e}catch(a){return null}},e.prototype._trim=function(e){return String.prototype.trim?e.trim():e.replace(/(^\s*)|(\s*$)/g,"")},e}(),me=function(e){fe||function(e){if("WebkitTransition"in e.style)fe="webkitTransitionEnd",he="webkitAnimationEnd";else{if(!("transition"in e.style))throw new Error("Your browser is not supported!");fe="transitionend",he="animationend"}}(e)},ve=function(e,t){return void 0===t&&(t=e+"-active"),function(r){me(r);var n=!1,i=function(a){n||(n=!0,r.removeEventListener(fe,i),r.removeEventListener(he,i),r.classList.remove(e),r.classList.remove(t))};r.classList.add(e),r.addEventListener(fe,i),r.addEventListener(he,i),requestAnimationFrame((function(){r.classList.add(t)}))}},ge=function(e,t){return void 0===t&&(t=e+"-active"),function(r,n){me(r);var i=!1,a=function(e){i||(i=!0,r.removeEventListener(fe,a),r.removeEventListener(he,a),n())};r.classList.add(e),r.addEventListener(fe,a),r.addEventListener(he,a),requestAnimationFrame((function(){r.classList.add(t)}))}};function Oe(e){for(var t=i.a.acquire(),r=0;r<arguments.length;r++){var n=arguments[r],a=typeof n;if("string"===a)t.push(n);else if(Array.isArray(n))t.push.apply(t,n);else if("object"===a)for(var s in n)n[s]&&t.push(s)}var o=t.join(" ");return i.a.release(t),o}function je(){return"rtl"===document.dir}function we(e){this[e.getAttribute("data-node-ref")]=null}function _e(e){this[e.getAttribute("data-node-ref")]=e}function Se(e,t){return("enter"===e?ve:ge)(t)}n.a.getLogger("esri.widgets.support.widgetUtils");var Le=["dd","dl","dt","h1","h2","h3","h4","h5","h6","sub","sup","animate","animatetransform","circle","clippath","defs","ellipse","g","image","line","lineargradient","marker","mask","path","pattern","polygon","polyline","radialgradient","rect","stop","svg","switch","symbol","text","textpath","tspan","use"].reduce(((e,t)=>(e[t]=[],e)),{}),xe=["align","alink","alt","bgcolor","border","cellpadding","cellspacing","class","color","cols","colspan","coords","dir","face","height","hspace","ismap","lang","marginheight","marginwidth","multiple","nohref","noresize","noshade","nowrap","ref","rel","rev","rows","rowspan","scrolling","shape","span","summary","tabindex","title","usemap","valign","value","vlink","vspace","width"],ke=new be({whiteList:Le,onTagAttr:(e,t,r)=>{var n="".concat(t,'="').concat(r,'"');if(xe.includes(t))return n},stripIgnoreTag:!0,stripIgnoreTagBody:["script","style"]},!0);function Ie(e,t){var r=e.getBoundingClientRect(),n=t.getBoundingClientRect(),i=r.top+r.height,a=n.top+n.height,s=r.top,o=n.top;(i>a||s<o)&&e.scrollIntoView({block:"end"})}function Ae(){return getComputedStyle(document.body).getPropertyValue("--esri-calcite-theme-name").replace(/\s|'|"/g,"")}function Me(){return Ae().startsWith("dark")}},115:function(e,t,r){"use strict";var n=r(82),i=r(89),a=r(85),s=r(84),o=r(97),l=r(107),c=class extends o.a{constructor(e){super(e),this._groups=new Map}destroy(){this.removeAll()}get size(){var e=0;return this._groups.forEach((t=>{e+=t.length})),e}add(e,t){if(!this._isHandle(e)&&!Array.isArray(e)&&!l.a.isCollection(e))return this;var r=this._getOrCreateGroup(t);return Array.isArray(e)||l.a.isCollection(e)?e.forEach((e=>this._isHandle(e)&&r.push(e))):r.push(e),this.notifyChange("size"),this}forEach(e,t){if("function"==typeof e)this._groups.forEach((t=>t.forEach(e)));else{var r=this._getGroup(e);r&&t&&r.forEach(t)}}has(e){return this._groups.has(this._ensureGroupKey(e))}remove(e){if(Array.isArray(e)||l.a.isCollection(e))return e.forEach(this.remove,this),this;if(!this.has(e))return this;for(var t=this._getGroup(e),r=0;r<t.length;r++)t[r].remove();return this._deleteGroup(e),this.notifyChange("size"),this}removeAll(){return this._groups.forEach((e=>{for(var t=0;t<e.length;t++)e[t].remove()})),this._groups.clear(),this.notifyChange("size"),this}_isHandle(e){return e&&!!e.remove}_getOrCreateGroup(e){if(this.has(e))return this._getGroup(e);var t=[];return this._groups.set(this._ensureGroupKey(e),t),t}_getGroup(e){return Object(i.d)(this._groups.get(this._ensureGroupKey(e)))}_deleteGroup(e){return this._groups.delete(this._ensureGroupKey(e))}_ensureGroupKey(e){return e||"_default_"}};Object(n.a)([Object(a.b)({readOnly:!0})],c.prototype,"size",null);var u=c=Object(n.a)([Object(s.a)("esri.core.Handles")],c);t.a=u},117:function(e,t,r){"use strict";r.d(t,"a",(function(){return H})),r.d(t,"b",(function(){return L})),r.d(t,"c",(function(){return k})),r.d(t,"d",(function(){return U})),r.d(t,"e",(function(){return N})),r.d(t,"f",(function(){return R})),r.d(t,"g",(function(){return z})),r.d(t,"h",(function(){return D})),r.d(t,"i",(function(){return P})),r.d(t,"j",(function(){return u})),r.d(t,"k",(function(){return x})),r.d(t,"l",(function(){return _})),r.d(t,"m",(function(){return T})),r.d(t,"n",(function(){return G})),r.d(t,"o",(function(){return S})),r.d(t,"p",(function(){return j})),r.d(t,"q",(function(){return w})),r.d(t,"r",(function(){return V})),r.d(t,"s",(function(){return M})),r.d(t,"t",(function(){return E})),r.d(t,"u",(function(){return C})),r.d(t,"v",(function(){return I})),r.d(t,"w",(function(){return A})),r.d(t,"x",(function(){return F}));var n=r(91),i=(r(80),r(95)),a=r(257),s=r(112),o=r(99),l=r(139),c=r(173),u=39.37,d=l.a.radius*Math.PI/200,f=/UNIT\[([^\]]+)\]\]$/i,h=a.a,p=/UNIT\[([^\]]+)\]/i,y=new Set([4261,4305,4807,4810,4811,4812,4816,4819,4821,4901,4902,37225,104139,104140]),b=Object(i.b)()({meter:"meters",foot:"feet",foot_us:"us-feet",foot_clarke:"clarke-feet",yard_clarke:"clarke-yards",link_clarke:"clarke-links",yard_sears:"sears-yards",foot_sears:"sears-feet",chain_sears:"sears-chains",chain_benoit_1895_b:"benoit-1895-b-chains",yard_indian:"indian-yards",yard_indian_1937:"indian-1937-yards",foot_gold_coast:"gold-coast-feet",chain_sears_1922_truncated:"sears-1922-truncated-chains","50_kilometers":"50-kilometers","150_kilometers":"150-kilometers"}),m=e=>e*e,v=e=>e*e*e,g={length:{baseUnit:"meters",units:{millimeters:{inBaseUnits:.001},centimeters:{inBaseUnits:.01},decimeters:{inBaseUnits:.1},meters:{inBaseUnits:1},kilometers:{inBaseUnits:1e3},inches:{inBaseUnits:.0254},feet:{inBaseUnits:.3048},yards:{inBaseUnits:.9144},miles:{inBaseUnits:1609.344},"nautical-miles":{inBaseUnits:1852},"us-feet":{inBaseUnits:1200/3937}}},area:{baseUnit:"square-meters",units:{"square-millimeters":{inBaseUnits:m(.001)},"square-centimeters":{inBaseUnits:m(.01)},"square-decimeters":{inBaseUnits:m(.1)},"square-meters":{inBaseUnits:1},"square-kilometers":{inBaseUnits:m(1e3)},"square-inches":{inBaseUnits:m(.0254)},"square-feet":{inBaseUnits:m(.3048)},"square-yards":{inBaseUnits:m(.9144)},"square-miles":{inBaseUnits:m(1609.344)},"square-us-feet":{inBaseUnits:m(1200/3937)},acres:{inBaseUnits:.0015625*m(1609.344)},ares:{inBaseUnits:100},hectares:{inBaseUnits:1e4}}},volume:{baseUnit:"liters",units:{liters:{inBaseUnits:1},"cubic-millimeters":{inBaseUnits:1e3*v(.001)},"cubic-centimeters":{inBaseUnits:1e3*v(.01)},"cubic-decimeters":{inBaseUnits:1e3*v(.1)},"cubic-meters":{inBaseUnits:1e3},"cubic-kilometers":{inBaseUnits:1e3*v(1e3)},"cubic-inches":{inBaseUnits:1e3*v(.0254)},"cubic-feet":{inBaseUnits:1e3*v(.3048)},"cubic-yards":{inBaseUnits:1e3*v(.9144)},"cubic-miles":{inBaseUnits:1e3*v(1609.344)}}},angle:{baseUnit:"radians",units:{radians:{inBaseUnits:1},degrees:{inBaseUnits:Math.PI/180}}}},O=function(){var e={};for(var t in g)for(var r in g[t].units)e[r]=t;return e}();var j=["metric","imperial","square-inches","square-feet","square-yards","square-miles","square-us-feet","square-meters","square-kilometers","acres","ares","hectares"],w=["metric","imperial","inches","feet","yards","miles","nautical-miles","us-feet","meters","kilometers"];function _(e){return"imperial"===e||"metric"===e}function S(e){var t=O[e];if(t)return t;throw new Error("unknown measure")}function L(e){return function(e){return g[e].baseUnit}(S(e))}function x(e,t=null){return t=t||S(e),g[t].baseUnit===e}function k(e,t,r){if(t===r)return e;var n=S(t);if(n!==S(r))throw new Error("incompatible units");var i=x(t,n)?e:function(e,t,r){return e*g[r].units[t].inBaseUnits}(e,t,n);return x(r,n)?i:function(e,t,r){return e/g[r].units[t].inBaseUnits}(i,r,n)}function I(e,t){return k(e,t,"meters")<3e3?"meters":"kilometers"}function A(e,t){return k(e,t,"meters")<1e5?"meters":"kilometers"}function M(e,t){return k(e,t,"feet")<1e3?"feet":"miles"}function E(e,t){return k(e,t,"feet")<1e5?"feet":"miles"}function C(e,t){return k(e,t,"square-meters")<3e6?"square-meters":"square-kilometers"}function V(e,t){return k(e,t,"square-feet")<1e6?"square-feet":"square-miles"}function T(e,t,r){return k(e,t,"meters")/(r*Math.PI/180)}function F(e){return b.fromJSON(e.toLowerCase())||null}function z(e){if(e&&"object"==typeof e&&!Object(s.e)(e))return 1;var t=R(e);return t>1e5?1:t}function P(e){return R(e)>=(e instanceof o.a?Object(c.e)(e).metersPerDegree:1e5)?"meters":D(e)}function R(e,t=l.a.metersPerDegree){return N(e,!0)||t}function N(e,t=!1){var r,n,i=null;if(null!=e&&("object"==typeof e?(r=e.wkid,n=e.wkt):"number"==typeof e?r=e:"string"==typeof e&&(n=e)),r){if(Object(s.k)(r))return l.b.metersPerDegree;if(Object(s.l)(r))return l.c.metersPerDegree;!(i=h.values[h[r]])&&t&&y.has(r)&&(i=d)}else if(n)if(-1!==n.search(/^PROJCS/i)){var a=f.exec(n);a&&a[1]&&(i=parseFloat(a[1].split(",")[1]))}else if(-1!==n.search(/^GEOCCS/i)){var o=p.exec(n);o&&o[1]&&(i=parseFloat(o[1].split(",")[1]))}return i}function D(e){var t,r,n=null;if(null!=e&&("object"==typeof e?(t=e.wkid,r=e.wkt):"number"==typeof e?t=e:"string"==typeof e&&(r=e)),t)n=h.units[h[t]];else if(r&&-1!==r.search(/^PROJCS/i)){var i=f.exec(r);i&&i[1]&&(n=(i=/[\\"\\']{1}([^\\"\\']+)/.exec(i[1]))&&i[1])}return n?F(n):null}function U(e){if(!e)return null;switch(D(e)){case"feet":case"us-feet":case"clarke-feet":case"clarke-yards":case"clarke-links":case"sears-yards":case"sears-feet":case"sears-chains":case"benoit-1895-b-chains":case"indian-yards":case"indian-1937-yards":case"gold-coast-feet":case"sears-1922-truncated-chains":return"imperial";case"50-kilometers":case"150-kilometers":case"meters":return"metric";case null:case void 0:return null}return null}var B={esriAcres:"acres",esriAres:"ares",esriHectares:"hectares",esriSquareCentimeters:"square-centimeters",esriSquareDecimeters:"square-decimeters",esriSquareFeet:"square-feet",esriSquareInches:"square-inches",esriSquareKilometers:"square-kilometers",esriSquareMeters:"square-meters",esriSquareMiles:"square-miles",esriSquareMillimeters:"square-millimeters",esriSquareUsFeet:"square-us-feet",esriSquareYards:"square-yards"},q={esriCentimeters:"centimeters",esriDecimeters:"decimeters",esriFeet:"feet",esriInches:"inches",esriKilometers:"kilometers",esriMeters:"meters",esriMiles:"miles",esriMillimeters:"millimeters",esriNauticalMiles:"nautical-miles",esriYards:"yards"},H=Object(i.b)()(B),G=Object(i.b)()(q);Object(i.b)()(Object(n.a)(Object(n.a)({},B),q))},118:function(e,t,r){"use strict";r.d(t,"a",(function(){return Y})),r.d(t,"b",(function(){return J})),r.d(t,"c",(function(){return j})),r.d(t,"d",(function(){return L})),r.d(t,"e",(function(){return A})),r.d(t,"f",(function(){return m})),r.d(t,"g",(function(){return b})),r.d(t,"h",(function(){return E})),r.d(t,"i",(function(){return F})),r.d(t,"j",(function(){return ce})),r.d(t,"k",(function(){return y})),r.d(t,"l",(function(){return d})),r.d(t,"m",(function(){return h})),r.d(t,"n",(function(){return _})),r.d(t,"o",(function(){return V})),r.d(t,"p",(function(){return T})),r.d(t,"q",(function(){return g})),r.d(t,"r",(function(){return N})),r.d(t,"s",(function(){return re})),r.d(t,"t",(function(){return O})),r.d(t,"u",(function(){return Q})),r.d(t,"v",(function(){return $})),r.d(t,"w",(function(){return K})),r.d(t,"x",(function(){return ee})),r.d(t,"y",(function(){return v})),r.d(t,"z",(function(){return te})),r.d(t,"A",(function(){return le}));var n=r(7),i=r(124),a=r(89),s=r(93),o=r(149),l=r(152),c=["field","field2","field3","normalizationField","rotationInfo.field","proportionalSymbolInfo.field","proportionalSymbolInfo.normalizationField","colorInfo.field","colorInfo.normalizationField"],u=["field","normalizationField"];function d(e,t){if(null!=e&&null!=t)for(var r of Array.isArray(e)?e:[e])if(f(c,r,t),"visualVariables"in r&&r.visualVariables)for(var n of r.visualVariables)f(u,n,t)}function f(e,t,r){if(e)for(var n of e){var a=Object(i.b)(n,t),s=a&&"function"!=typeof a&&g(r,a);s&&Object(i.c)(n,s.name,t)}}function h(e,t){if(null!=e&&null!=t)if("startField"in e){var r=g(t,e.startField),n=g(t,e.endField);e.startField=r&&r.name||null,e.endField=n&&n.name||null}else{var i=g(t,e.startTimeField),a=g(t,e.endTimeField);e.startTimeField=i&&i.name||null,e.endTimeField=a&&a.name||null}}var p=new Set;function y(e,t){return e&&t?(p.clear(),b(p,e,t),Array.from(p).sort()):[]}function b(e,t,r){if(r)if(t&&t.length)if(r.includes("*"))for(var{name:n}of t)e.add(n);else for(var i of r)m(e,t,i);else{if(r.includes("*"))return e.clear(),void e.add("*");for(var a of r)e.add(a)}}function m(e,t,r){if(t&&t.length){var n=g(t,r);n&&e.add(n.name)}else"string"==typeof r&&e.add(r)}function v(e,t){return Object(a.j)(t)||Object(a.j)(e)?[]:t.includes("*")?e.map((e=>e.name)):t}function g(e,t){if("string"!=typeof t)return null;if(null!=e)for(var r of(t=t.toLowerCase(),e))if(r&&r.name.toLowerCase()===t)return r;return null}function O(e,t){if(!e||!t||"string"!=typeof t)return!1;for(var r of(t=t.toLowerCase(),e))if(r&&r.name.toLowerCase()===t)return!0;return!1}function j(e,t,r){return w.apply(this,arguments)}function w(){return(w=Object(n.a)((function*(e,t,r){if(r){var{arcadeUtils:n}=yield Object(l.e)(),i=n.extractFieldNames(r);for(var a of i)m(e,t,a)}}))).apply(this,arguments)}function _({displayField:e,fields:t}){return e||(t&&t.length?S(t,"name-or-title")||S(t,"unique-identifier")||S(t,"type-or-category")||function(e){for(var t of e)if(t&&t.name){var r=t.name.toLowerCase();if(r.indexOf("name")>-1||r.indexOf("title")>-1)return t.name}return null}(t):null)}function S(e,t){for(var r of e)if(r&&r.valueType&&r.valueType===t)return r.name;return null}function L(e,t){return x.apply(this,arguments)}function x(){return(x=Object(n.a)((function*(e,t){if(t){var{fields:r}=t,n=Object(i.b)("elevationInfo.featureExpressionInfo",t);return n?n.collectRequiredFields(e,r):void 0}}))).apply(this,arguments)}function k(e,t,r){return I.apply(this,arguments)}function I(){return(I=Object(n.a)((function*(e,t,r){r.outStatistic.onStatisticValueExpression?j(e,t,r.outStatistic.onStatisticValueExpression):e.add(r.outStatistic.onStatisticField)}))).apply(this,arguments)}function A(e,t,r){return M.apply(this,arguments)}function M(){return(M=Object(n.a)((function*(e,t,r){t&&r&&"cluster"===r.type&&r.fields&&(yield Promise.all(r.fields.map((r=>k(e,t.fields,r)))))}))).apply(this,arguments)}function E(e,t,r){return C.apply(this,arguments)}function C(){return(C=Object(n.a)((function*(e,t,n){if(t&&(t.timeInfo&&Object(a.k)(n)&&n.timeExtent&&b(e,t.fields,[t.timeInfo.startField,t.timeInfo.endField]),t.floorInfo&&b(e,t.fields,[t.floorInfo.floorField]),Object(a.k)(n)&&Object(a.k)(n.where)&&n.where&&"1=1"!==n.where)){var i=(yield Promise.all([r.e(11),r.e(273)]).then(r.bind(null,272))).WhereClause.create(n.where,t.fieldsIndex);if(!i.isStandardized)throw new s.a("fieldUtils:collectFilterFields","Where clause is not standardized");b(e,t.fields,i.fieldNames)}}))).apply(this,arguments)}function V(e){if(!e)return[];var t="editFieldsInfo"in e&&e.editFieldsInfo;return t?y(e.fields,[t&&t.creatorField,t&&t.creationDateField,t&&t.editorField,t&&t.editDateField]):[]}function T(e){if(!e)return[];var t=e.geometryFieldsInfo;return t?y(e.fields,[t.shapeAreaField,t.shapeLengthField]):[]}function F(e,t){return z.apply(this,arguments)}function z(){return(z=Object(n.a)((function*(e,t){var{labelingInfo:r,fields:n}=t;r&&r.length&&(yield Promise.all(r.map((t=>P(e,n,t)))))}))).apply(this,arguments)}function P(e,t,r){return R.apply(this,arguments)}function R(){return(R=Object(n.a)((function*(e,t,r){if(r){var n=r.getLabelExpression(),i=r.where;if("arcade"===n.type)yield j(e,t,n.expression);else{var a=n.expression.match(/{[^}]*}/g);a&&a.forEach((r=>{m(e,t,r.slice(1,-1))}))}var s=/['"]+/g;if(i){var o=i.split(" ");3===o.length&&m(e,t,o[0].replace(s,"")),7===o.length&&(m(e,t,o[0].replace(s,"")),m(e,t,o[4].replace(s,"")))}}}))).apply(this,arguments)}function N(e){var t=e.defaultValue;return void 0!==t&&Z(e,t)?t:e.nullable?null:void 0}function D(e){return"number"==typeof e&&!isNaN(e)&&isFinite(e)}function U(e){return null===e||D(e)}var B="isInteger"in Number?Number.isInteger:e=>"number"==typeof e&&isFinite(e)&&Math.floor(e)===e;function q(e){return null===e||B(e)}function H(e){return null!=e&&"string"==typeof e}function G(e){return null===e||H(e)}function W(){return!0}function Z(e,t){var r;switch(e.type){case"date":case"integer":case"long":case"small-integer":case"esriFieldTypeDate":case"esriFieldTypeInteger":case"esriFieldTypeLong":case"esriFieldTypeSmallInteger":r=e.nullable?q:B;break;case"double":case"single":case"esriFieldTypeSingle":case"esriFieldTypeDouble":r=e.nullable?U:D;break;case"string":case"esriFieldTypeString":r=e.nullable?G:H;break;default:r=W}return 1===arguments.length?r:r(t)}var Y,J,X=new Set(["integer","small-integer","single","double","esriFieldTypeInteger","esriFieldTypeSmallInteger","esriFieldTypeSingle","esriFieldTypeDouble"]);function $(e){return null!=e&&X.has(e.type)}function K(e){return null!=e&&("string"===e.type||"esriFieldTypeString"===e.type)}function Q(e){return null!=e&&("date"===e.type||"esriFieldTypeDate"===e.type)}function ee(e){return null==e||"number"==typeof e&&isNaN(e)?null:e}function te(e,t){return e.nullable&&null===t?null:$(e)&&!function(e,t){var r="string"==typeof e?ne(e):e;return!!r&&(r.isInteger?B(t)&&t>=r.min&&t<=r.max:t>=r.min&&t<=r.max)}(e.type,Number(t))?Y.OUT_OF_RANGE:Z(e,t)?e.domain?Object(o.e)(e.domain,t):null:J.INVALID_TYPE}function re(e){return Object(o.c)(e.domain)||($(e)?ne(e.type):void 0)}function ne(e){switch(e){case"esriFieldTypeSmallInteger":case"small-integer":return ie;case"esriFieldTypeInteger":case"integer":return ae;case"esriFieldTypeSingle":case"single":return se;case"esriFieldTypeDouble":case"double":return oe}}(Y||(Y={})).OUT_OF_RANGE="numeric-range-validation-error::out-of-range",function(e){e.INVALID_TYPE="type-validation-error::invalid-type"}(J||(J={}));var ie={min:-32768,max:32767,isInteger:!0},ae={min:-2147483648,max:2147483647,isInteger:!0},se={min:-34e37,max:12e37,isInteger:!1},oe={min:-Number.MAX_VALUE,max:Number.MAX_VALUE,isInteger:!1};function le(e,t,r){switch(e){case o.a.INVALID_CODED_VALUE:return"Value ".concat(r," is not in the coded domain - field: ").concat(t.name,", domain: ").concat(JSON.stringify(t.domain));case o.a.VALUE_OUT_OF_RANGE:return"Value ".concat(r," is out of the range of valid values - field: ").concat(t.name,", domain: ").concat(JSON.stringify(t.domain));case J.INVALID_TYPE:return"Value ".concat(r," is not a valid value for the field type - field: ").concat(t.name,", type: ").concat(t.type,", nullable: ").concat(t.nullable);case Y.OUT_OF_RANGE:var{min:n,max:i}=ne(t.type);return"Value ".concat(r," is out of range for the number type - field: ").concat(t.name,", type: ").concat(t.type,", value range is ").concat(n," to ").concat(i)}}function ce(e,t){return!function(e,t,r){if(!t||!t.attributes||!e){if(Object(a.k)(r))for(var n of e)r.add(n);return!0}var i=t.attributes,s=!1;for(var o of e)if(!(o in i)){if(s=!0,!Object(a.k)(r))break;r.add(o)}return s}(e,t,null)}},121:function(e,t,r){"use strict";var n=r(82),i=(r(80),r(81),r(88),r(85)),a=r(95),s=r(102),o=r(84),l=(r(83),r(86),r(87),r(90)),c=new a.a({inherited:"inherited",codedValue:"coded-value",range:"range"}),u=class extends l.a{constructor(e){super(e),this.name=null,this.type=null}};Object(n.a)([Object(i.b)({type:String,json:{write:!0}})],u.prototype,"name",void 0),Object(n.a)([Object(s.a)(c)],u.prototype,"type",void 0);var d=u=Object(n.a)([Object(o.a)("esri.layers.support.Domain")],u);t.a=d},123:function(e,t,r){"use strict";var n,i=r(91),a=r(82),s=(r(80),r(92)),o=r(89),l=(r(81),r(88),r(85)),c=r(84),u=(r(83),r(86),r(87),r(90)),d=r(100),f=r(101),h=r(169),p=r(138),y=r(189),b=n=class extends u.a{constructor(...e){super(...e),this.isAggregate=!1,this.layer=null,this.popupTemplate=null,this.sourceLayer=null,Object.defineProperty(this,"uid",{value:Object(y.a)(),configurable:!0})}normalizeCtorArgs(e,t,r,n){return e&&!e.declaredClass?e:{geometry:e,symbol:t,attributes:r,popupTemplate:n}}set attributes(e){var t=this._get("attributes");t!==e&&(this._set("attributes",e),this._notifyLayer("attributes",t,e))}set geometry(e){var t=this._get("geometry");t!==e&&(this._set("geometry",e),this._notifyLayer("geometry",t,e))}set symbol(e){var t=this._get("symbol");t!==e&&(this._set("symbol",e),this._notifyLayer("symbol",t,e))}set visible(e){var t=this._get("visible");t!==e&&(this._set("visible",e),this._notifyLayer("visible",t,e))}getEffectivePopupTemplate(e=!1){return this.popupTemplate?this.popupTemplate:this.sourceLayer?"popupTemplate"in this.sourceLayer&&this.sourceLayer.popupTemplate?this.sourceLayer.popupTemplate:e&&"defaultPopupTemplate"in this.sourceLayer&&Object(o.k)(this.sourceLayer.defaultPopupTemplate)?this.sourceLayer.defaultPopupTemplate:null:null}getAttribute(e){return this.attributes&&this.attributes[e]}setAttribute(e,t){if(this.attributes){var r=this.getAttribute(e);this.attributes[e]=t,this._notifyLayer("attributes",r,t,e)}else this.attributes={[e]:t},this._notifyLayer("attributes",void 0,t,e)}getObjectId(){return this.sourceLayer&&"objectIdField"in this.sourceLayer&&this.sourceLayer.objectIdField?this.getAttribute(this.sourceLayer.objectIdField):null}toJSON(){return{geometry:Object(o.k)(this.geometry)?this.geometry.toJSON():null,symbol:Object(o.k)(this.symbol)?this.symbol.toJSON():null,attributes:Object(i.a)({},this.attributes),popupTemplate:this.popupTemplate&&this.popupTemplate.toJSON()}}clone(){return new n(this.cloneProperties())}cloneProperties(){return{attributes:Object(s.a)(this.attributes),geometry:Object(s.a)(this.geometry),layer:this.layer,popupTemplate:this.popupTemplate&&this.popupTemplate.clone(),sourceLayer:this.sourceLayer,symbol:Object(s.a)(this.symbol),visible:this.visible}}_notifyLayer(e,t,r,n){if(this.layer&&"graphicChanged"in this.layer){var i={graphic:this,property:e,oldValue:t,newValue:r};"attributes"===e&&(i.attributeName=n),this.layer.graphicChanged(i)}}};Object(a.a)([Object(l.b)({value:null})],b.prototype,"attributes",null),Object(a.a)([Object(l.b)({value:null,types:f.a,json:{read:d.a}})],b.prototype,"geometry",null),Object(a.a)([Object(l.b)({type:Boolean})],b.prototype,"isAggregate",void 0),Object(a.a)([Object(l.b)()],b.prototype,"layer",void 0),Object(a.a)([Object(l.b)({type:h.a})],b.prototype,"popupTemplate",void 0),Object(a.a)([Object(l.b)()],b.prototype,"sourceLayer",void 0),Object(a.a)([Object(l.b)({value:null,types:p.e})],b.prototype,"symbol",null),Object(a.a)([Object(l.b)({type:Boolean,value:!0})],b.prototype,"visible",null),b=n=Object(a.a)([Object(c.a)("esri.Graphic")],b),(b||(b={})).generateUID=y.a;var m=b;t.a=m},124:function(e,t,r){"use strict";r.d(t,"a",(function(){return i})),r.d(t,"b",(function(){return a})),r.d(t,"c",(function(){return s}));var n=r(92);function i(e,t,r=!1){return l(e,t,r)}function a(e,t){if(null!=t)return t[e]||o(e.split("."),!1,t)}function s(e,t,r){var n=e.split("."),i=n.pop(),a=o(n,!0,r);a&&i&&(a[i]=t)}function o(e,t,r){var n=r;for(var i of e){if(null==n)return;if(!(i in n)){if(!t)return;n[i]={}}n=n[i]}return n}function l(e,t,r){return t?Object.keys(t).reduce((function(e,i){var a=e[i],s=t[i];return a===s?e:void 0===a?(e[i]=Object(n.a)(s),e):(Array.isArray(s)||Array.isArray(e)?(a=a?Array.isArray(a)?e[i]=a.concat():e[i]=[a]:e[i]=[],s&&(Array.isArray(s)||(s=[s]),r?s.forEach((e=>{-1===a.indexOf(e)&&a.push(e)})):e[i]=s.concat())):s&&"object"==typeof s?e[i]=l(a,s,r):e.hasOwnProperty(i)&&!t.hasOwnProperty(i)||(e[i]=s),e)}),e||{}):e}},129:function(e,t,r){"use strict";r.d(t,"a",(function(){return a}));var n=function(e){return{vnodeSelector:"",properties:void 0,children:void 0,text:e.toString(),domNode:null}},i=function(e,t){for(var r=0,a=e.length;r<a;r++){var s=e[r];Array.isArray(s)?i(s,t):null!=s&&!1!==s&&(s.hasOwnProperty("vnodeSelector")||(s=n(s)),t.push(s))}},a=function(e,t){for(var r=[],n=2;n<arguments.length;n++)r[n-2]=arguments[n];if(1===r.length&&"string"==typeof r[0])return{vnodeSelector:e,properties:t||void 0,children:void 0,text:r[0],domNode:null};var a=[];return i(r,a),{vnodeSelector:e,properties:t||void 0,children:a,text:void 0,domNode:null}}},134:function(e,t,r){"use strict";var n,i=r(82),a=(r(80),r(92)),s=(r(81),r(88),r(85)),o=r(102),l=r(84),c=(r(83),r(86),r(87),r(90)),u=n=class extends c.a{constructor(e){super(e),this.name=null,this.code=null}clone(){return new n({name:this.name,code:this.code})}};Object(i.a)([Object(s.b)({type:String,json:{write:!0}})],u.prototype,"name",void 0),Object(i.a)([Object(s.b)({type:[String,Number],json:{write:!0}})],u.prototype,"code",void 0);var d,f=u=n=Object(i.a)([Object(l.a)("esri.layers.support.CodedValue")],u),h=r(121),p=d=class extends h.a{constructor(e){super(e),this.codedValues=null,this.type="coded-value"}getName(e){var t=null;if(this.codedValues){var r=String(e);this.codedValues.some((e=>(String(e.code)===r&&(t=e.name),!!t)))}return t}clone(){return new d({codedValues:Object(a.a)(this.codedValues),name:this.name})}};Object(i.a)([Object(s.b)({type:[f],json:{write:!0}})],p.prototype,"codedValues",void 0),Object(i.a)([Object(o.a)({codedValue:"coded-value"})],p.prototype,"type",void 0);var y=p=d=Object(i.a)([Object(l.a)("esri.layers.support.CodedValueDomain")],p);t.a=y},136:function(e,t,r){"use strict";var n,i=r(82),a=(r(80),r(81),r(88),r(85),r(102)),s=r(84),o=(r(83),r(86),r(87),r(121)),l=n=class extends o.a{constructor(e){super(e),this.type="inherited"}clone(){return new n}};Object(i.a)([Object(a.a)({inherited:"inherited"})],l.prototype,"type",void 0);var c=l=n=Object(i.a)([Object(s.a)("esri.layers.support.InheritedDomain")],l);t.a=c},137:function(e,t,r){"use strict";var n,i=r(82),a=(r(80),r(81),r(88),r(85)),s=r(102),o=r(84),l=(r(83),r(86),r(87),r(121)),c=n=class extends l.a{constructor(e){super(e),this.maxValue=null,this.minValue=null,this.type="range"}clone(){return new n({maxValue:this.maxValue,minValue:this.minValue,name:this.name})}};Object(i.a)([Object(a.b)({type:Number,json:{type:[Number],read:{source:"range",reader:(e,t)=>t.range&&t.range[1]},write:{enabled:!1,overridePolicy(){return{enabled:null!=this.maxValue&&null==this.minValue}},target:"range",writer(e,t,r){t[r]=[this.minValue||0,e]}}}})],c.prototype,"maxValue",void 0),Object(i.a)([Object(a.b)({type:Number,json:{type:[Number],read:{source:"range",reader:(e,t)=>t.range&&t.range[0]},write:{target:"range",writer(e,t,r){t[r]=[e,this.maxValue||0]}}}})],c.prototype,"minValue",void 0),Object(i.a)([Object(s.a)({range:"range"})],c.prototype,"type",void 0);var u=c=n=Object(i.a)([Object(o.a)("esri.layers.support.RangeDomain")],c);t.a=u},140:function(e,t,r){"use strict";r.d(t,"a",(function(){return i})),r.d(t,"b",(function(){return l})),r.d(t,"c",(function(){return o})),r.d(t,"d",(function(){return s})),r.d(t,"e",(function(){return c}));r(80);var n=r(95);function i(e){return e}var a={milliseconds:{getter:"getMilliseconds",setter:"setMilliseconds",multiplier:1},seconds:{getter:"getSeconds",setter:"setSeconds",multiplier:1},minutes:{getter:"getMinutes",setter:"setMinutes",multiplier:1},hours:{getter:"getHours",setter:"setHours",multiplier:1},days:{getter:"getDate",setter:"setDate",multiplier:1},weeks:{getter:"getDate",setter:"setDate",multiplier:7},months:{getter:"getMonth",setter:"setMonth",multiplier:1},years:{getter:"getFullYear",setter:"setFullYear",multiplier:1},decades:{getter:"getFullYear",setter:"setFullYear",multiplier:10},centuries:{getter:"getFullYear",setter:"setFullYear",multiplier:100}},s=Object(n.b)()({esriTimeUnitsMilliseconds:"milliseconds",esriTimeUnitsSeconds:"seconds",esriTimeUnitsMinutes:"minutes",esriTimeUnitsHours:"hours",esriTimeUnitsDays:"days",esriTimeUnitsWeeks:"weeks",esriTimeUnitsMonths:"months",esriTimeUnitsYears:"years",esriTimeUnitsDecades:"decades",esriTimeUnitsCenturies:"centuries",esriTimeUnitsUnknown:null});function o(e,t,r){var n=new Date(e.getTime());if(t&&r){var i=a[r],{getter:s,setter:o,multiplier:l}=i;n[o](n[s]()+t*l)}return n}var l={milliseconds:1,seconds:1e3,minutes:6e4,hours:36e5,days:864e5,weeks:6048e5,months:26784e5,years:31536e6,decades:31536e7,centuries:31536e8};function c(e,t){switch(t){case"milliseconds":return new Date(e.getTime());case"seconds":return new Date(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds());case"minutes":return new Date(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes());case"hours":return new Date(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours());case"days":return new Date(e.getFullYear(),e.getMonth(),e.getDate());case"weeks":return new Date(e.getFullYear(),e.getMonth(),e.getDate()-e.getDay());case"months":return new Date(e.getFullYear(),e.getMonth(),1);case"years":return new Date(e.getFullYear(),0,1);case"decades":return new Date(e.getFullYear()-e.getFullYear()%10,0,1);case"centuries":return new Date(e.getFullYear()-e.getFullYear()%100,0,1);default:return null}}},143:function(e,t,r){"use strict";r.d(t,"a",(function(){return o})),r.d(t,"b",(function(){return l})),r.d(t,"c",(function(){return s})),r.d(t,"d",(function(){return c}));var n=r(124),i=/\{([^\}]+)\}/g;function a(e){return null==e?"":e}function s(e,t){return e.replace(i,"object"==typeof t?(e,r)=>a(Object(n.b)(r,t)):(e,r)=>a(t(r)))}function o(e,t){return e.replace(/([\.$?*|{}\(\)\[\]\\\/\+\-^])/g,(e=>t&&-1!==t.indexOf(e)?e:"\\".concat(e)))}function l(e){for(var t=0,r=0;r<e.length;r++)t=(t<<5)-t+e.charCodeAt(r),t|=0;return t}function c(e){return(new DOMParser).parseFromString(e||"","text/html").body.innerText||""}},149:function(e,t,r){"use strict";r.d(t,"a",(function(){return n})),r.d(t,"b",(function(){return f})),r.d(t,"c",(function(){return d})),r.d(t,"d",(function(){return u})),r.d(t,"e",(function(){return c}));r(80);var n,i,a=r(121),s=r(134),o=r(136),l=r(137);function c(e,t){switch(e.type){case"range":var r="range"in e?e.range[0]:e.minValue,i="range"in e?e.range[1]:e.maxValue;if(+t<r||+t>i)return n.VALUE_OUT_OF_RANGE;break;case"coded-value":case"codedValue":if(null==e.codedValues||e.codedValues.every((e=>null==e||e.code!==t)))return n.INVALID_CODED_VALUE}return null}(i=n||(n={})).VALUE_OUT_OF_RANGE="domain-validation-error::value-out-of-range",i.INVALID_CODED_VALUE="domain-validation-error::invalid-coded-value";var u={key:"type",base:a.a,typeMap:{range:l.a,"coded-value":s.a,inherited:o.a}};function d(e){if(e&&"range"===e.type)return{min:"range"in e?e.range[0]:e.minValue,max:"range"in e?e.range[1]:e.maxValue}}function f(e){if(!e||!e.type)return null;switch(e.type){case"range":return l.a.fromJSON(e);case"codedValue":return s.a.fromJSON(e);case"inherited":return o.a.fromJSON(e)}return null}},150:function(e,t,r){"use strict";var n,i=r(82),a=(r(80),r(81),r(88),r(85)),s=r(98),o=r(84),l=r(96),c=(r(83),r(86),r(87),r(90)),u=r(140),d=n=class extends c.a{constructor(e){super(e),this.end=null,this.start=null}static get allTime(){return f}static get empty(){return h}readEnd(e,t){return null!=t.end?new Date(t.end):null}writeEnd(e,t){t.end=e?e.getTime():null}get isAllTime(){return this.equals(n.allTime)}get isEmpty(){return this.equals(n.empty)}readStart(e,t){return null!=t.start?new Date(t.start):null}writeStart(e,t){t.start=e?e.getTime():null}clone(){return new n({end:this.end,start:this.start})}expandTo(e){if(this.isEmpty||this.isAllTime)return this.clone();var t=this.start?Object(u.e)(this.start,e):null,r=this.end?Object(u.c)(Object(u.e)(this.end,e),1,e):null;return new n({start:t,end:r})}intersection(e){var t,r,i,a,s,o,l,c;if(!e)return this.clone();if(this.isEmpty||e.isEmpty)return n.empty;if(this.isAllTime)return e.clone();if(e.isAllTime)return this.clone();var u,d,f=null!=(t=null==(r=this.start)?void 0:r.getTime())?t:-1/0,h=null!=(i=null==(a=this.end)?void 0:a.getTime())?i:1/0,p=null!=(s=null==(o=e.start)?void 0:o.getTime())?s:-1/0,y=null!=(l=null==(c=e.end)?void 0:c.getTime())?l:1/0;if(p>=f&&p<=h?u=p:f>=p&&f<=y&&(u=f),h>=p&&h<=y?d=h:y>=f&&y<=h&&(d=y),!isNaN(u)&&!isNaN(d)){var b=new n;return b.start=u===-1/0?null:new Date(u),b.end=d===1/0?null:new Date(d),b}return n.empty}offset(e,t){if(this.isEmpty||this.isAllTime)return this.clone();var r=new n,{start:i,end:a}=this;return i&&(r.start=Object(u.c)(i,e,t)),a&&(r.end=Object(u.c)(a,e,t)),r}equals(e){if(!e)return!1;var t=this.start?this.start.getTime():this.start,r=this.end?this.end.getTime():this.end,n=e.start?e.start.getTime():e.start,i=e.end?e.end.getTime():e.end;return t===n&&r===i}union(e){if(!e||e.isEmpty)return this.clone();if(this.isEmpty)return e.clone();if(this.isAllTime||e.isAllTime)return f.clone();var t=this.start&&e.start?new Date(Math.min(this.start.getTime(),e.start.getTime())):null,r=this.end&&e.end?new Date(Math.max(this.end.getTime(),e.end.getTime())):null;return new n({start:t,end:r})}};Object(i.a)([Object(a.b)({type:Date,json:{write:{allowNull:!0}}})],d.prototype,"end",void 0),Object(i.a)([Object(s.a)("end")],d.prototype,"readEnd",null),Object(i.a)([Object(l.a)("end")],d.prototype,"writeEnd",null),Object(i.a)([Object(a.b)({readOnly:!0,json:{read:!1}})],d.prototype,"isAllTime",null),Object(i.a)([Object(a.b)({readOnly:!0,json:{read:!1}})],d.prototype,"isEmpty",null),Object(i.a)([Object(a.b)({type:Date,json:{write:{allowNull:!0}}})],d.prototype,"start",void 0),Object(i.a)([Object(s.a)("start")],d.prototype,"readStart",null),Object(i.a)([Object(l.a)("start")],d.prototype,"writeStart",null);var f=new(d=n=Object(i.a)([Object(o.a)("esri.TimeExtent")],d)),h=new d({start:void 0,end:void 0}),p=d;t.a=p},152:function(e,t,r){"use strict";r.d(t,"a",(function(){return h})),r.d(t,"b",(function(){return f})),r.d(t,"c",(function(){return u})),r.d(t,"d",(function(){return d})),r.d(t,"e",(function(){return l}));var n,i=r(91),a=r(7),s=r(89),o=r(99);r(101);function l(){return c.apply(this,arguments)}function c(){return(c=Object(a.a)((function*(){return n||(n=Object(a.a)((function*(){var e=yield Promise.all([r.e(31),r.e(134)]).then(r.bind(null,383));return yield e.arcade.load(),{arcade:e.arcade,arcadeUtils:e,Dictionary:e.Dictionary,Feature:e.arcadeFeature}}))()),n}))).apply(this,arguments)}var u=(e,t,r)=>h.create(e,t,r,null,["$feature"]),d=(e,t,r)=>h.create(e,t,r,null,["$feature","$view"]),f=(e,t,r,n)=>h.create(e,t,r,n,["$feature","$view"]);class h{constructor(e,t,r,n,i,a,s,o){this.script=e,this.evaluate=i,this.fields=s,this._syntaxTree=n,this._arcade=t,this._arcadeDictionary=r,this._arcadeFeature=a,this._spatialReference=o,this._referencesGeometry=t.scriptTouchesGeometry(this._syntaxTree),this._referencesScale=this._arcade.referencesMember(this._syntaxTree,"scale")}static create(e,t,r,n,c,u){return Object(a.a)((function*(){var{arcade:a,Feature:d,Dictionary:f}=yield l(),p=o.a.fromJSON(t),y=a.parseScript(e,u),b=c.reduce(((e,t)=>Object(i.a)(Object(i.a)({},e),{},{[t]:null})),{}),m=null;Object(s.k)(n)&&((m=new f(n)).immutable=!0,b.$config=null);var v=a.scriptUsesGeometryEngine(y)&&a.enableGeometrySupport(),g=a.scriptUsesFeatureSet(y)&&a.enableFeatureSetSupport(),O=a.scriptIsAsync(y)&&a.enableAsyncSupport(),j={vars:b,spatialReference:p,useAsync:!!O},w=new f;w.immutable=!1,w.setField("scale",0);var _=a.compileScript(y,j);return yield Promise.all([v,g,O]),new h(e,a,f,y,(e=>("$view"in e&&e.$view&&(w.setField("scale",e.$view.scale),e.$view=w),m&&(e.$config=m),_({vars:e,spatialReference:p}))),new d,r,p)}))()}repurposeFeature(e){return e.geometry&&!e.geometry.spatialReference&&(e.geometry.spatialReference=this._spatialReference),this._arcadeFeature.repurposeFromGraphicLikeObject(e.geometry,e.attributes,{fields:this.fields}),this._arcadeFeature}repurposeAdapter(e){return this._arcadeFeature.repurposeFromAdapter(e,{fields:this.fields}),this._arcadeFeature}createDictionary(){return new this._arcadeDictionary}referencesMember(e){return this._arcade.referencesMember(this._syntaxTree,e)}referencesFunction(e){return this._arcade.referencesFunction(this._syntaxTree,e)}referencesGeometry(){return this._referencesGeometry}referencesScale(){return this._referencesScale}extractFieldLiterals(e){return this._arcade.extractFieldLiterals(this._syntaxTree,e)}}},154:function(e,t,r){"use strict";var n=r(91),i=r(7),a=r(82),s=(r(80),r(81)),o=r(85),l=r(116),c=r(288),u=r(84),d=(r(83),r(86)),f=(r(87),r(329)),h=r(94),p=r(435),y=r(131),b=r(148),m=r(206),v=(r(171),r(227)),g=r(115),O=r(108),j=r(385),w=r(114),_=(r(302),r(367)),S=s.a.getLogger("esri.widgets.Widget"),L=0,x="esri-icon-checkbox-unchecked",k=Object(_.a)(),I=!1,A=class extends(Object(v.b)(y.a.EventedAccessor)){constructor(e,t){var r;super(e,t),r=this,this._attached=!1,this._internalHandles=new g.a,this._projector=k,this.domNode=null,this.iconClass=x,this.label=this.declaredClass.split(".").pop(),this.visible=!0,this._loadLocale=Object(h.i)(Object(i.a)((function*(){if(r._messageBundleProps&&r._messageBundleProps.length){var e=yield Object(h.j)(r._messageBundleProps.map(function(){var e=Object(i.a)((function*({bundlePath:e,propertyName:t}){r[t]=yield Object(m.a)(e)}));return function(t){return e.apply(this,arguments)}}()));for(var t of e)t.error&&S.error("widget-intl:locale-error",r.declaredClass,t.error)}yield r.loadLocale()})));var n=Object(w.d)()||"light";["light","dark"].includes(n)||Object(c.a)(S,"The following themes are deprecated: light-blue, dark-blue, light-green, dark-green, light-purple, dark-purple, light-red, and dark-red.",{version:"4.19",warnOnce:!0,see:"https://developers.arcgis.com/javascript/latest/styling/"});var a="esri-widget-uid-"+Object(d.a)(),s=this.render.bind(this),o=!1;this._trackingTarget=new p.a((()=>this.scheduleRender()));var l=()=>{if(!o||this.destroyed)return null;var e=s();return e.properties?e.properties.key||(e.properties.key=a):e.properties={key:a},e};this.render=()=>{if(I)return l();var e;this._trackingTarget.clear(),I=!0;try{e=Object(f.b)(this._trackingTarget,l)}finally{I=!1}return e},this.addResolvingPromise(this._resourcesFetch=this.beforeFirstRender().then((()=>{o=!0,this._postInitialize()})))}normalizeCtorArgs(e,t){var r=Object(n.a)({},e);return t&&(r.container=t),r}postInitialize(){}beforeFirstRender(){return this._loadLocale().catch(h.v)}loadLocale(){return Object(i.a)((function*(){}))()}destroy(){this.destroyed||(this._trackingTarget.destroy(),this._trackingTarget=null,this.viewModel&&(this.viewModel.destroy(),this.viewModel=null),this._detach(this.container),this._set("container",null),this._internalHandles.destroy(),this._emitter.clear(),this.render=()=>null,this._projector=null)}set container(e){this._get("container")||this._set("container",e)}castContainer(e){return Object(j.a)(e)}get id(){return this._get("id")||this.get("container.id")||Date.now().toString(16)+"-widget-"+L++}set id(e){e&&this._set("id",e)}get renderable(){return this._resourcesFetch}render(){throw new Error("not implemented")}scheduleRender(){this.destroyed||this._projector.scheduleRender()}classes(...e){return w.a.apply(this,e)}own(e){arguments.length>1&&(e=Array.prototype.slice.call(arguments)),this._internalHandles.add(e)}renderNow(){this._projector.renderNow()}_postInitialize(){var e,t=this;this.destroyed||(this.scheduleRender(),null!=(e=this._delegatedEventNames)&&e.length&&this._internalHandles.add(Object(O.a)(this,"viewModel",((e,t)=>{t&&this._internalHandles.remove("delegated-events"),e&&this._internalHandles.add(this._delegatedEventNames.map((t=>e.on(t,(e=>{this.emit(t,e)})))),"delegated-events")}))),this.postInitialize(),this._internalHandles.add(Object(b.c)(Object(i.a)((function*(){yield t._loadLocale().catch(h.v),t.scheduleRender()})))),this._internalHandles.add(Object(O.j)(this,"container",function(){var e=Object(i.a)((function*(e){t.destroyed||t._attach(e)}));return function(t){return e.apply(this,arguments)}}())))}_attach(e){e&&(this._projector.merge(e,this.render),this._attached=!0)}_detach(e){e&&this._attached&&(this._projector.detach(this.render),e.parentNode&&e.parentNode.removeChild(e),this._attached=!1)}};Object(a.a)([Object(o.b)({value:null})],A.prototype,"container",null),Object(a.a)([Object(l.a)("container")],A.prototype,"castContainer",null),Object(a.a)([Object(o.b)({aliasOf:"container"})],A.prototype,"domNode",void 0),Object(a.a)([Object(o.b)()],A.prototype,"iconClass",void 0),Object(a.a)([Object(o.b)()],A.prototype,"id",null),Object(a.a)([Object(o.b)()],A.prototype,"label",void 0),Object(a.a)([Object(o.b)()],A.prototype,"renderable",null),Object(a.a)([Object(o.b)()],A.prototype,"viewModel",void 0),Object(a.a)([Object(o.b)()],A.prototype,"visible",void 0);var M=A=Object(a.a)([Object(u.a)("esri.widgets.Widget")],A);t.a=M},158:function(e,t,r){"use strict";(function(e){var r="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof e?e:void 0;t.a=r}).call(this,r(172))},159:function(e,t,r){"use strict";var n=r(158),i=(r(80),r(124)),a={apiKey:void 0,applicationUrl:n.a.location&&n.a.location.href,assetsPath:"",fontsUrl:"https://static.arcgis.com/fonts",geometryService:null,geometryServiceUrl:"https://utility.arcgisonline.com/arcgis/rest/services/Geometry/GeometryServer",geoRSSServiceUrl:"https://utility.arcgis.com/sharing/rss",kmlServiceUrl:"https://utility.arcgis.com/sharing/kml",portalUrl:"https://www.arcgis.com",workers:{loaderConfig:{has:{},paths:{},map:{},packages:[]}},request:{httpsDomains:["arcgis.com","arcgisonline.com","esrikr.com","premiumservices.blackbridge.com","esripremium.accuweather.com","gbm.digitalglobe.com","firstlook.digitalglobe.com","msi.digitalglobe.com"],interceptors:[],maxUrlLength:2e3,proxyRules:[],proxyUrl:null,timeout:6e4,trustedServers:[],useIdentity:!0},log:{interceptors:[],level:null}};if(n.a.esriConfig&&(Object(i.a)(a,n.a.esriConfig,!0),delete a.has),!a.assetsPath){a.assetsPath="https://js.arcgis.com/".concat("4.19.0".slice(0,-2),"/@arcgis/core/assets")}a.baseUrl&&console.warn("[esri.config]","baseUrl has been replaced by assetsPath"),Object.defineProperty(a,"baseUrl",{set(){console.warn("[esri.config]","baseUrl has been replaced by assetsPath")}}),a.request.corsEnabledServers=[],a.request.corsEnabledServers.push=function(){return console.warn("[esri.config]","request.corsEnabledServers is not supported and will be removed in a future release. See http://esriurl.com/cors8664"),0},t.a=a},163:function(e,t,r){"use strict";function n(e){return function(t,r){t.hasOwnProperty("_messageBundleProps")||(t._messageBundleProps=t._messageBundleProps?t._messageBundleProps.slice():[]),t._messageBundleProps.push({bundlePath:e,propertyName:r})}}r.d(t,"a",(function(){return n}))},165:function(e,t,r){"use strict";function n(e){return e&&("function"==typeof e.on||"function"==typeof e.addEventListener)}function i(e,t,r){if(!n(e))throw new TypeError("target is not a Evented or EventTarget object");if("on"in e)return e.on(t,r);if(Array.isArray(t)){var i=t.slice();for(var a of i)e.addEventListener(a,r);return{remove(){for(var t of i)e.removeEventListener(t,r)}}}return e.addEventListener(t,r),{remove(){e.removeEventListener(t,r)}}}function a(e,t,r){if(!n(e))throw new TypeError("target is not a Evented or EventTarget object");if("once"in e)return e.once(t,r);var a=i(e,t,(t=>{a.remove(),r.call(e,t)}));return{remove(){a.remove()}}}r.d(t,"a",(function(){return o})),r.d(t,"b",(function(){return n})),r.d(t,"c",(function(){return i})),r.d(t,"d",(function(){return a}));var s={Win:"Meta",Scroll:"ScrollLock",Spacebar:" ",Down:"ArrowDown",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Del:"Delete",Apps:"ContextMenu",Esc:"Escape",Multiply:"*",Add:"+",Subtract:"-",Decimal:".",Divide:"/"};function o({key:e}){return s[e]||e}},167:function(e,t,r){"use strict";r.d(t,"a",(function(){return u})),r.d(t,"b",(function(){return c}));var n=r(82),i=r(85),a=r(84),s=r(97),o=r(115),l=r(297),c=e=>{var t=class extends e{destroy(){this.destroyed||(this.handles.destroy(),this.updatingHandles.destroy())}get handles(){return this._get("handles")||new o.a}get updatingHandles(){return this._get("updatingHandles")||new l.a}};return Object(n.a)([Object(i.b)({readOnly:!0})],t.prototype,"handles",null),Object(n.a)([Object(i.b)({readOnly:!0})],t.prototype,"updatingHandles",null),t=Object(n.a)([Object(a.a)("esri.core.HandleOwner")],t)},u=class extends(c(s.a)){};u=Object(n.a)([Object(a.a)("esri.core.HandleOwner")],u)},172:function(e,t){var r;r=function(){return this}();try{r=r||new Function("return this")()}catch(n){"object"===typeof window&&(r=window)}e.exports=r},173:function(e,t,r){"use strict";r.d(t,"a",(function(){return o})),r.d(t,"b",(function(){return l})),r.d(t,"c",(function(){return c})),r.d(t,"d",(function(){return u})),r.d(t,"e",(function(){return f})),r.d(t,"f",(function(){return h})),r.d(t,"g",(function(){return d}));var n=r(112),i=r(99),a=r(139);function s(e){return new i.a({wkt:'GEOCCS["Spherical geocentric",\n    DATUM["Not specified",\n      SPHEROID["Sphere",'.concat(e.radius,',0]],\n    PRIMEM["Greenwich",0.0,\n      AUTHORITY["EPSG","8901"]],\n    UNIT["m",1.0],\n    AXIS["Geocentric X",OTHER],\n    AXIS["Geocentric Y",EAST],\n    AXIS["Geocentric Z",NORTH]\n  ]')})}var o=s(a.a),l=s(a.b),c=s(a.c),u=new i.a({wkt:'GEOCCS["WGS 84",\n  DATUM["WGS_1984",\n    SPHEROID["WGS 84",'.concat(a.a.radius,',298.257223563,\n      AUTHORITY["EPSG","7030"]],\n    AUTHORITY["EPSG","6326"]],\n  PRIMEM["Greenwich",0,\n    AUTHORITY["EPSG","8901"]],\n  UNIT["m",1.0,\n    AUTHORITY["EPSG","9001"]],\n  AXIS["Geocentric X",OTHER],\n  AXIS["Geocentric Y",OTHER],\n  AXIS["Geocentric Z",NORTH],\n  AUTHORITY["EPSG","4978"]\n]')});function d(e){return e&&(Object(n.g)(e)||e===l)?l:e&&(Object(n.h)(e)||e===c)?c:o}function f(e){return e&&(Object(n.g)(e)||e===l)?a.b:e&&(Object(n.h)(e)||e===c)?a.c:a.a}function h(e){return Object(n.k)(e)?a.b:Object(n.l)(e)?a.c:a.a}},180:function(e,t,r){"use strict";r.d(t,"a",(function(){return n})),r.d(t,"b",(function(){return i}));r(80);function n(e){}function i(e){return()=>e}},181:function(e,t,r){"use strict";r.d(t,"a",(function(){return j})),r.d(t,"b",(function(){return m})),r.d(t,"c",(function(){return _})),r.d(t,"d",(function(){return p})),r.d(t,"e",(function(){return b})),r.d(t,"f",(function(){return L})),r.d(t,"g",(function(){return S})),r.d(t,"h",(function(){return g})),r.d(t,"i",(function(){return O})),r.d(t,"j",(function(){return h})),r.d(t,"k",(function(){return v})),r.d(t,"l",(function(){return w})),r.d(t,"m",(function(){return f})),r.d(t,"n",(function(){return y}));var n=r(91),i=r(126),a=r(258),s=r(228),o=r(99),l=r(103),c=r(483),u=r(150),d=r(359),f={type:Boolean,value:!0,json:{origins:{"web-scene":{read:{source:["id","url","layerType"],reader(e,t){if(null!=t.screenSizePerspective||"defaults"!==this.originOf("screenSizePerspectiveEnabled"))return t.screenSizePerspective;Object(i.a)(this).store.set("screenSizePerspectiveEnabled",!1,0)}},write:{ignoreOrigin:!0,target:"screenSizePerspective",writer(e,t,r,n){("defaults"===this.originOf("screenSizePerspectiveEnabled")&&e||Object(s.a)(this,"screenSizePerspectiveEnabled",{},n))&&(t[r]=e)}}}}}},h={type:Boolean,value:!0,json:{name:"disablePopup",read:{reader:(e,t)=>!t.disablePopup},write:{enabled:!0,writer(e,t,r){t[r]=!e}}}},p={type:Boolean,value:!0,json:{name:"showLabels",write:!0}},y={type:String,json:{origins:{"portal-item":{write:!1}},write:{isRequired:!0,ignoreOrigin:!0,writer:a.f}}},b={type:Boolean,value:!0,json:{origins:{service:{read:{enabled:!1}}},name:"showLegend",write:!0}},m={value:null,type:d.a,json:{origins:{service:{name:"elevationInfo",write:!0}},name:"layerDefinition.elevationInfo",write:!0}};function v(e){return{type:e,readOnly:!0,json:{origins:{service:{read:!0}},read:!1}}}var g={type:Number,json:{origins:{"web-document":{default:1,write:!0,read:!0},"portal-item":{write:!0}}}},O=Object(n.a)(Object(n.a)({},g),{},{json:Object(n.a)(Object(n.a)({},g.json),{},{origins:{"web-document":Object(n.a)(Object(n.a)({},g.json.origins["web-document"]),{},{write:{enabled:!0,target:{opacity:{type:Number},"layerDefinition.drawingInfo.transparency":{type:Number}}}})},read:{source:["layerDefinition.drawingInfo.transparency","drawingInfo.transparency"],reader:(e,t,r)=>r&&"service"!==r.origin||!t.drawingInfo||void 0===t.drawingInfo.transparency?t.layerDefinition&&t.layerDefinition.drawingInfo&&void 0!==t.layerDefinition.drawingInfo.transparency?Object(c.b)(t.layerDefinition.drawingInfo.transparency):void 0:Object(c.b)(t.drawingInfo.transparency)}})}),j={type:u.a,readOnly:!0,get(){var e,t;if(null==(e=this.layer)||!e.timeInfo)return null;var r=null==(t=this.view)?void 0:t.timeExtent,n=this.layer.timeExtent,i=this.layer.useViewTime?r&&n?r.intersection(n):r||n:n;if(!i||i.isEmpty)return i;var a=this.layer.timeOffset,s=a?i.offset(-a.value,a.unit):i,o=this._get("timeExtent");return s.equals(o)?o:s}},w={type:l.a,readOnly:!0,json:{origins:{service:{read:{source:["fullExtent","spatialReference"],reader:(e,t)=>{var r=l.a.fromJSON(e);return null!=t.spatialReference&&"object"==typeof t.spatialReference&&(r.spatialReference=o.a.fromJSON(t.spatialReference)),r}}}},read:!1}},_={type:String,json:{origins:{service:{read:!1},"portal-item":{read:!1}}}},S={type:Number,json:{origins:{service:{write:{enabled:!1}}},read:{source:"layerDefinition.minScale"},write:{target:"layerDefinition.minScale"}}},L={type:Number,json:{origins:{service:{write:{enabled:!1}}},read:{source:"layerDefinition.maxScale"},write:{target:"layerDefinition.maxScale"}}}},184:function(e,t,r){"use strict";r.d(t,"a",(function(){return n})),r.d(t,"b",(function(){return i})),r.d(t,"c",(function(){return l})),r.d(t,"d",(function(){return o}));var n=1e-6,i=Math.random,a=Math.PI/180,s=180/Math.PI;function o(e){return e*a}function l(e){return e*s}Object.freeze({__proto__:null,EPSILON:n,RANDOM:i,toRadian:o,toDegree:l,equals:function(e,t){return Math.abs(e-t)<=n*Math.max(1,Math.abs(e),Math.abs(t))}})},189:function(e,t,r){"use strict";r.d(t,"a",(function(){return i}));var n=0;function i(){return++n}},193:function(e,t,r){"use strict";r.d(t,"a",(function(){return a}));var n=r(139),i=r(117),a={inches:Object(i.c)(1,"meters","inches"),feet:Object(i.c)(1,"meters","feet"),"us-feet":Object(i.c)(1,"meters","us-feet"),yards:Object(i.c)(1,"meters","yards"),miles:Object(i.c)(1,"meters","miles"),"nautical-miles":Object(i.c)(1,"meters","nautical-miles"),millimeters:Object(i.c)(1,"meters","millimeters"),centimeters:Object(i.c)(1,"meters","centimeters"),decimeters:Object(i.c)(1,"meters","decimeters"),meters:Object(i.c)(1,"meters","meters"),kilometers:Object(i.c)(1,"meters","kilometers"),"decimal-degrees":1/Object(i.m)(1,"meters",n.a.radius)}},194:function(e,t,r){"use strict";var n,i=r(7),a=r(82),s=(r(80),r(92)),o=(r(81),r(88),r(85)),l=r(102),c=r(84),u=(r(83),r(86),r(87),r(128)),d=r(203),f=r(412),h=n=class extends(Object(d.a)(u.a)){constructor(e){super(e),this.description=null,this.label=null,this.symbol=null,this.type="simple"}collectRequiredFields(e,t){var r=this;return Object(i.a)((function*(){yield Promise.all([r.collectSymbolFields(e,t),r.collectVVRequiredFields(e,t)])}))()}collectSymbolFields(e,t){var r=this;return Object(i.a)((function*(){yield Promise.all(r.getSymbols().map((r=>r.collectRequiredFields(e,t))))}))()}getSymbol(e,t){return this.symbol}getSymbolAsync(e,t){var r=this;return Object(i.a)((function*(){return r.symbol}))()}getSymbols(){return this.symbol?[this.symbol]:[]}getAttributeHash(){return this.visualVariables&&this.visualVariables.reduce(((e,t)=>e+t.getAttributeHash()),"")}getMeshHash(){return this.getSymbols().reduce(((e,t)=>e+JSON.stringify(t)),"")}get arcadeRequired(){return this.arcadeRequiredForVisualVariables}clone(){return new n({description:this.description,label:this.label,symbol:this.symbol&&this.symbol.clone(),visualVariables:Object(s.a)(this.visualVariables),authoringInfo:this.authoringInfo&&this.authoringInfo.clone()})}};Object(a.a)([Object(o.b)({type:String,json:{write:!0}})],h.prototype,"description",void 0),Object(a.a)([Object(o.b)({type:String,json:{write:!0}})],h.prototype,"label",void 0),Object(a.a)([Object(o.b)(f.b)],h.prototype,"symbol",void 0),Object(a.a)([Object(l.a)({simple:"simple"})],h.prototype,"type",void 0);var p=h=n=Object(a.a)([Object(c.a)("esri.renderers.SimpleRenderer")],h);t.a=p},197:function(e,t,r){"use strict";r.r(t);var n,i=r(91),a=r(7),s=r(82),o=(r(80),r(92)),l=r(89),c=r(143),u=r(81),d=(r(88),r(85)),f=r(84),h=r(96),p=r(93),y=(r(83),r(86),r(87),r(94)),b=r(152),m=r(118),v=r(109),g=r(356),O=r(106),j=r(128),w=r(203),_=r(235),S=u.a.getLogger("esri.renderers.DictionaryRenderer"),L={type:"CIMSimpleLineCallout",lineSymbol:{type:"CIMLineSymbol",symbolLayers:[{type:"CIMSolidStroke",width:.5,color:[0,0,0,255]}]}},x=n=class extends(Object(w.a)(j.a)){constructor(e){super(e),this._ongoingRequests=new Map,this._symbolCache=new _.a(100),this.config=null,this.fieldMap=null,this.scaleExpression=null,this.scaleExpressionTitle=null,this.url=null,this.type="dictionary"}writeData(e,t){e&&(t.scalingExpressionInfo={expression:e,returnType:"number"})}writeVisualVariables(e,t,r,n){null!=n&&n.origin||super.writeVisualVariables(e,t,r,n)}clone(){return new n({config:Object(o.a)(this.config),scaleExpression:this.scaleExpression,scaleExpressionTitle:this.scaleExpressionTitle,fieldMap:Object(o.a)(this.fieldMap),url:Object(o.a)(this.url),visualVariables:Object(o.a)(this.visualVariables)})}getSymbolAsync(e,t){var r=this;return Object(a.a)((function*(){var n;r._dictionaryPromise||(r._dictionaryPromise=r.fetchResources(t));try{n=yield r._dictionaryPromise}catch(k){if(Object(y.m)(k))return r._dictionaryPromise=null,null}var i={};if(r.fieldMap)for(var a of r._symbolFields){var s=r.fieldMap[a];if(s&&null!==e.attributes[s]&&void 0!==e.attributes[s]){var o=""+e.attributes[s];i[a]=o}else i[a]=""}var u=n(i,t);if(!u||"string"!=typeof u)return null;var d=Object(c.b)(u).toString(),f=r._symbolCache.get(d);if(f)return f.catch((()=>{r._symbolCache.pop(d)})),f;var h=u.split(";"),p=[],b=[];for(var m of h)if(m&&0!==m.length)if(-1===m.indexOf("po:"))if(-1!==m.indexOf("|"))for(var g of m.split("|"))r._itemNames.has(g)&&p.push(g);else r._itemNames.has(m)&&p.push(m);else{var O=m.substr(3).split("|");if(3===O.length){var j=O[0],w=O[1],_=O[2];if("DashTemplate"===w)_=_.split(" ").map((e=>Number(e)));else if("Color"===w){var S=new v.a(_).toRgba();_=[S[0],S[1],S[2],255*S[3]]}else _=Number(_);b.push({primitiveName:j,propertyName:w,value:_})}}var L=!Object(l.k)(e.geometry)||!e.geometry.hasZ&&"point"===e.geometry.type,x=r._cimPartsToCIMSymbol(p,b,L,t);return r._symbolCache.put(d,x,1),x}))()}collectRequiredFields(e,t){var r=this;return Object(a.a)((function*(){yield r.collectVVRequiredFields(e,t),r.scaleExpression&&(yield Object(m.c)(e,t,r.scaleExpression));var n=t.map((e=>e.name));for(var i in r.fieldMap)n.indexOf(r.fieldMap[i])<0||e.add(r.fieldMap[i])}))()}get arcadeRequired(){return!0}fetchResources(e){var t=this;return Object(a.a)((function*(){if(t._dictionaryPromise)return t._dictionaryPromise;if(t.url){var r=Object(l.k)(e)?e.abortOptions:null,n=Object(O.default)(t.url+"/resources/styles/dictionary-info.json",Object(i.a)({responseType:"json",query:{f:"json"}},r)),[{data:a}]=yield Promise.all([n,Object(b.e)()]);if(!a)throw t._dictionaryPromise=null,new p.a("esri.renderers.DictionaryRenderer","Bad dictionary data!");var s=a.expression,o=a.authoringInfo;t._refSymbolUrlTemplate=t.url+"/"+a.cimRefTemplateUrl,t._itemNames=new Set(a.itemsNames),t._symbolFields=o.symbol;var c={};if(t.config){var u=t.config;for(var d in u)c[d]=u[d]}if(o.configuration)for(var f of o.configuration)c.hasOwnProperty(f.name)||(c[f.name]=f.value);var h=[];if(Object(l.k)(e)&&e.fields&&t.fieldMap){var y=function(r){var n=t.fieldMap[r],a=e.fields.filter((e=>e.name===n));a.length>0&&h.push(Object(i.a)(Object(i.a)({},a[0]),{},{name:r}))};for(var m of t._symbolFields)y(m)}return t._dictionaryPromise=Object(b.b)(s,Object(l.k)(e)?e.spatialReference:null,h,c).then((e=>{var t={scale:0};return(r,n)=>{var i=e.repurposeFeature({geometry:null,attributes:r});return t.scale=Object(l.k)(n)?n.scale:void 0,e.evaluate({$feature:i,$view:t})}})).catch((e=>(S.error("Creating dictinoary expression failed:",e),null))),t._dictionaryPromise}S.error("no valid URL!")}))()}getSymbol(){return null}getSymbols(){return[]}getAttributeHash(){return this.visualVariables&&this.visualVariables.reduce(((e,t)=>e+t.getAttributeHash()),"")}getMeshHash(){return"".concat(this.url,"-").concat(JSON.stringify(this.fieldMap))}getSymbolFields(){return this._symbolFields}_getSymbolPart(e,t){var r=this;return Object(a.a)((function*(){if(r._ongoingRequests.has(e))return r._ongoingRequests.get(e).then((e=>e.data));var n=r._refSymbolUrlTemplate.replace(/\{itemName\}/gi,e),a=Object(O.default)(n,Object(i.a)({responseType:"json",query:{f:"json"}},t));r._ongoingRequests.set(e,a);try{return(yield a).data}catch(s){return r._ongoingRequests.delete(e),Promise.reject(s)}}))()}_combineSymbolParts(e,t,r){if(!e||0===e.length)return null;var n=Object(i.a)({},e[0]);if(e.length>1)for(var a of(n.symbolLayers=[],e)){var s=a;n.symbolLayers.unshift(...s.symbolLayers)}return r&&(n.callout=L),{type:"CIMSymbolReference",symbol:n,primitiveOverrides:t}}_cimPartsToCIMSymbol(e,t,r,n){var i=this;return Object(a.a)((function*(){for(var a=new Array(e.length),s=0;s<e.length;s++)a[s]=i._getSymbolPart(e[s],n);var o=yield Promise.all(a);return new g.a({data:i._combineSymbolParts(o,t,r)})}))()}};Object(s.a)([Object(d.b)({type:Object,json:{read:{source:"configuration"},write:{target:"configuration"}}})],x.prototype,"config",void 0),Object(s.a)([Object(d.b)({type:Object,json:{write:!0}})],x.prototype,"fieldMap",void 0),Object(s.a)([Object(d.b)({type:String,json:{read:{source:"scalingExpressionInfo.expression"},write:!0}})],x.prototype,"scaleExpression",void 0),Object(s.a)([Object(h.a)("scaleExpression")],x.prototype,"writeData",null),Object(s.a)([Object(d.b)({type:String,json:{read:{source:"scalingExpressionInfo.title"},write:{target:"scalingExpressionInfo.title",overridePolicy(e){return{enabled:!!e&&!!this.scaleExpression}}}}})],x.prototype,"scaleExpressionTitle",void 0),Object(s.a)([Object(d.b)({type:String,json:{write:!0}})],x.prototype,"url",void 0),Object(s.a)([Object(h.a)("visualVariables")],x.prototype,"writeVisualVariables",null);var k=x=n=Object(s.a)([Object(f.a)("esri.renderers.DictionaryRenderer")],x);t.default=k},198:function(e,t,r){"use strict";var n,i=r(7),a=r(82),s=(r(80),r(92)),o=(r(81),r(88),r(85)),l=r(102),c=r(84),u=(r(83),r(86),r(87),r(118)),d=r(109),f=r(128),h=r(278),p=n=class extends f.a{constructor(e){super(e),this.blurRadius=10,this.colorStops=[new h.a({ratio:0,color:new d.a("rgba(255, 140, 0, 0)")}),new h.a({ratio:.75,color:new d.a("rgba(255, 140, 0, 1)")}),new h.a({ratio:.9,color:new d.a("rgba(255, 0,   0, 1)")})],this.field=null,this.fieldOffset=0,this.maxPixelIntensity=100,this.minPixelIntensity=0,this.type="heatmap"}collectRequiredFields(e,t){var r=this;return Object(i.a)((function*(){var n=r.field;n&&"string"==typeof n&&Object(u.f)(e,t,n)}))()}getAttributeHash(){return null}getMeshHash(){return"".concat(JSON.stringify(this.colorStops),".").concat(this.blurRadius,".").concat(this.field)}clone(){return new n({blurRadius:this.blurRadius,colorStops:Object(s.a)(this.colorStops),field:this.field,maxPixelIntensity:this.maxPixelIntensity,minPixelIntensity:this.minPixelIntensity})}};Object(a.a)([Object(o.b)({type:Number,json:{write:!0}})],p.prototype,"blurRadius",void 0),Object(a.a)([Object(o.b)({type:[h.a],json:{write:!0}})],p.prototype,"colorStops",void 0),Object(a.a)([Object(o.b)({type:String,json:{write:!0}})],p.prototype,"field",void 0),Object(a.a)([Object(o.b)({type:Number,json:{write:{overridePolicy:(e,t,r)=>({enabled:null==r})}}})],p.prototype,"fieldOffset",void 0),Object(a.a)([Object(o.b)({type:Number,json:{write:!0}})],p.prototype,"maxPixelIntensity",void 0),Object(a.a)([Object(o.b)({type:Number,json:{write:!0}})],p.prototype,"minPixelIntensity",void 0),Object(a.a)([Object(l.a)({heatmap:"heatmap"})],p.prototype,"type",void 0);var y=p=n=Object(a.a)([Object(c.a)("esri.renderers.HeatmapRenderer")],p);t.a=y},199:function(e,t,r){"use strict";var n,i=r(7),a=r(82),s=(r(80),r(92)),o=r(81),l=r(88),c=r(85),u=r(145),d=r(102),f=r(84),h=(r(83),r(86),r(87),r(118)),p=r(109),y=r(220),b=r(211),m=r(128),v=r(203),g=r(116),O=r(90),j=o.a.getLogger("esri.renderers.support.AttributeColorInfo"),w=n=class extends O.a{constructor(e){super(e),this.color=null,this.field=null,this.label=null,this.valueExpression=null,this.valueExpressionTitle=null}castField(e){return null==e?e:"function"==typeof e?(j.error(".field: field must be a string value"),null):Object(l.l)(e)}getAttributeHash(){return"".concat(this.field,"-").concat(this.valueExpression)}clone(){return new n({color:this.color&&this.color.clone(),field:this.field,label:this.label,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle})}};Object(a.a)([Object(c.b)({type:p.a,json:{type:[Number],write:!0}})],w.prototype,"color",void 0),Object(a.a)([Object(c.b)({type:String,json:{write:!0}})],w.prototype,"field",void 0),Object(a.a)([Object(g.a)("field")],w.prototype,"castField",null),Object(a.a)([Object(c.b)({type:String,json:{write:!0}})],w.prototype,"label",void 0),Object(a.a)([Object(c.b)({type:String,json:{write:!0}})],w.prototype,"valueExpression",void 0),Object(a.a)([Object(c.b)({type:String,json:{write:!0}})],w.prototype,"valueExpressionTitle",void 0);var _,S=w=n=Object(a.a)([Object(f.a)("esri.renderers.support.AttributeColorInfo")],w),L=_=class extends O.a{constructor(){super(...arguments),this.unit=null}clone(){return new _({unit:this.unit})}};Object(a.a)([Object(c.b)({type:String,json:{write:!0}})],L.prototype,"unit",void 0);var x,k=L=_=Object(a.a)([Object(f.a)("esri.renderers.support.DotDensityLegendOptions")],L),I=x=class extends(Object(v.a)(m.a)){constructor(e){super(e),this.attributes=null,this.backgroundColor=new p.a([0,0,0,0]),this.blendDots=!0,this.dotBlendingEnabled=!0,this.dotShape="square",this.dotSize=1,this.legendOptions=null,this.outline=new y.a,this.dotValue=null,this.referenceDotValue=null,this.referenceScale=null,this.seed=1,this.type="dot-density"}calculateDotValue(e){if(null==this.referenceScale)return this.dotValue;var t=e/this.referenceScale*this.dotValue;return t<1?1:t}getSymbol(){return new b.a({outline:this.outline})}getSymbolAsync(){var e=this;return Object(i.a)((function*(){return e.getSymbol()}))()}getSymbols(){return[this.getSymbol()]}getAttributeHash(){return this.attributes&&this.attributes.reduce(((e,t)=>e+t.getAttributeHash()),"")}getMeshHash(){return JSON.stringify(this.outline)}clone(){return new x({attributes:Object(s.a)(this.attributes),backgroundColor:Object(s.a)(this.backgroundColor),dotBlendingEnabled:Object(s.a)(this.dotBlendingEnabled),dotShape:Object(s.a)(this.dotShape),dotSize:Object(s.a)(this.dotSize),dotValue:Object(s.a)(this.dotValue),legendOptions:Object(s.a)(this.legendOptions),outline:Object(s.a)(this.outline),referenceScale:Object(s.a)(this.referenceScale),visualVariables:Object(s.a)(this.visualVariables),authoringInfo:this.authoringInfo&&this.authoringInfo.clone()})}getControllerHash(){return"".concat(this.attributes.map((e=>e.field||e.valueExpression||"")),"-").concat(this.outline&&JSON.stringify(this.outline.toJSON())||"")}collectRequiredFields(e,t){var r=this;return Object(i.a)((function*(){for(var n of(yield r.collectVVRequiredFields(e,t),r.attributes))n.valueExpression&&(yield Object(h.c)(e,t,n.valueExpression)),n.field&&e.add(n.field)}))()}};Object(a.a)([Object(c.b)({type:[S],json:{write:!0}})],I.prototype,"attributes",void 0),Object(a.a)([Object(c.b)({type:p.a,json:{write:!0}})],I.prototype,"backgroundColor",void 0),Object(a.a)([Object(c.b)({type:Boolean}),Object(u.a)("dotBlendingEnabled")],I.prototype,"blendDots",void 0),Object(a.a)([Object(c.b)({type:Boolean,json:{write:!0}})],I.prototype,"dotBlendingEnabled",void 0),Object(a.a)([Object(c.b)({type:String,json:{write:!1}})],I.prototype,"dotShape",void 0),Object(a.a)([Object(c.b)({type:Number,json:{write:!1}})],I.prototype,"dotSize",void 0),Object(a.a)([Object(c.b)({type:k,json:{write:!0}})],I.prototype,"legendOptions",void 0),Object(a.a)([Object(c.b)({type:y.a,json:{default:null,write:!0}})],I.prototype,"outline",void 0),Object(a.a)([Object(c.b)({type:Number,json:{write:!0}})],I.prototype,"dotValue",void 0),Object(a.a)([Object(c.b)({type:Number}),Object(u.a)("dotValue")],I.prototype,"referenceDotValue",void 0),Object(a.a)([Object(c.b)({type:Number,json:{write:!0}})],I.prototype,"referenceScale",void 0),Object(a.a)([Object(c.b)({type:Number,json:{write:!0}})],I.prototype,"seed",void 0),Object(a.a)([Object(d.a)({dotDensity:"dot-density"})],I.prototype,"type",void 0);var A=I=x=Object(a.a)([Object(f.a)("esri.renderers.DotDensityRenderer")],I);t.a=A},201:function(e,t,r){"use strict";r.d(t,"a",(function(){return i})),r.d(t,"b",(function(){return a})),r.d(t,"c",(function(){return s})),r.d(t,"d",(function(){return o}));var n=r(94);function i(e,t,r){return Object(n.j)(e.map(((e,n)=>t.apply(r,[e,n]))))}function a(e,t,r){return Object(n.j)(e.map(((e,n)=>t.apply(r,[e,n])))).then((e=>e.map((e=>e.value))))}function s(e){return e.then((e=>({ok:!0,value:e}))).catch((e=>({ok:!1,error:e})))}function o(e){return e.then((e=>({ok:!0,value:e}))).catch((e=>(Object(n.t)(e),{ok:!1,error:e})))}},213:function(e,t,r){"use strict";r.d(t,"a",(function(){return i})),r.d(t,"b",(function(){return a}));var n=r(176);class i{constructor(e,t,r){this._namespace=e,this._storage=t,this._removeFunc=!1,this._hit=0,this._miss=0,this._storage.register(this),this._namespace+=":",r&&(this._storage.registerRemoveFunc(this._namespace,r),this._removeFunc=!0)}destroy(){this._storage.clear(this._namespace),this._removeFunc&&this._storage.deregisterRemoveFunc(this._namespace),this._storage.deregister(this),this._storage=null}get namespace(){return this._namespace.slice(0,-1)}get hitRate(){return this._hit/(this._hit+this._miss)}get size(){return this._storage.size}get maxSize(){return this._storage.maxSize}resetHitRate(){this._hit=this._miss=0}put(e,t,r,n=0){this._storage.put(this._namespace+e,t,r,n)}get(e){var t=this._storage.get(this._namespace+e);return void 0===t?++this._miss:++this._hit,t}pop(e){var t=this._storage.pop(this._namespace+e);return void 0===t?++this._miss:++this._hit,t}updateSize(e,t,r){this._storage.updateSize(this._namespace+e,t,r)}clear(){this._storage.clear(this._namespace)}clearAll(){this._storage.clearAll()}getStats(){return this._storage.getStats()}resetStats(){this._storage.resetStats()}}class a{constructor(e=10485760){this._maxSize=e,this._db=new Map,this._size=0,this._hit=0,this._miss=0,this._removeFuncs=new n.a,this._users=new n.a}destroy(){this.clearAll(),this._removeFuncs.clear(),this._users.clear(),this._db=null}register(e){this._users.push(e)}deregister(e){this._users.removeUnordered(e)}registerRemoveFunc(e,t){this._removeFuncs.push([e,t])}deregisterRemoveFunc(e){this._removeFuncs.filterInPlace((t=>t[0]!==e))}get size(){return this._size}get maxSize(){return this._maxSize}set maxSize(e){this._maxSize=Math.max(e,0),this._checkSizeLimit()}put(e,t,r,n){var i=this._db.get(e);if(i&&(this._size-=i.size,this._db.delete(e),i.entry!==t&&this._notifyRemoved(e,i.entry)),r>this._maxSize)this._notifyRemoved(e,t);else if(void 0!==t)if(!r||r<0)console.warn("Refusing to cache entry with invalid size "+r);else{var a=1+Math.max(n,-3)- -3;this._db.set(e,{entry:t,size:r,lifetime:a,lives:a}),this._size+=r,this._checkSizeLimit()}else console.warn("Refusing to cache undefined entry ")}updateSize(e,t,r){var n=this._db.get(e);if(n&&n.entry===t){if(this._size-=n.size,r>this._maxSize)return this._db.delete(e),void this._notifyRemoved(e,t);n.size=r,this._size+=r,this._checkSizeLimit()}}pop(e){var t=this._db.get(e);if(t)return this._size-=t.size,this._db.delete(e),++this._hit,t.entry;++this._miss}get(e){var t=this._db.get(e);if(void 0!==t)return this._db.delete(e),t.lives=t.lifetime,this._db.set(e,t),++this._hit,t.entry;++this._miss}getStats(){var e={Size:Math.round(this._size/1048576)+"/"+Math.round(this._maxSize/1048576)+"MB","Hit rate":Math.round(100*this._getHitRate())+"%",Entries:this._db.size.toString()},t={},r=new Array;this._db.forEach(((e,n)=>{var i=e.lifetime;r[i]=(r[i]||0)+e.size,this._users.forAll((r=>{var i=r.namespace;if(n.startsWith(i)){var a=t[i]||0;t[i]=a+e.size}}))}));var n={};this._users.forAll((e=>{var r=e.namespace;if(!isNaN(e.hitRate)&&e.hitRate>0){var i=t[r]||0;t[r]=i,n[r]=Math.round(100*e.hitRate)+"%"}else n[r]="0%"}));var i=Object.keys(t);i.forEach((e=>t[e]=t[e]/this._size*100)),i.sort(((e,r)=>t[r]-t[e])),i.forEach((r=>e[r]=Math.round(t[r])+"% / "+n[r]));for(var a=r.length-1;a>=0;--a){var s=r[a];s&&(e["Priority "+(a+-3-1)]=Math.round(s/this.size*100)+"%")}return e}resetStats(){this._hit=this._miss=0,this._users.forAll((e=>e.resetHitRate()))}clear(e){this._db.forEach(((t,r)=>{r.startsWith(e)&&(this._size-=t.size,this._db.delete(r),this._notifyRemoved(r,t.entry))}))}clearAll(){this._db.forEach(((e,t)=>this._notifyRemoved(t,e.entry))),this._size=0,this._db.clear()}_getHitRate(){return this._hit/(this._hit+this._miss)}_notifyRemoved(e,t){this._removeFuncs.forAll((r=>{e.startsWith(r[0])&&r[1](t)}))}_checkSizeLimit(){if(!(this._size<=this._maxSize))for(var[e,t]of this._db)if(this._db.delete(e),t.lives<=1?(this._size-=t.size,this._notifyRemoved(e,t.entry)):(--t.lives,this._db.set(e,t)),this._size<=.9*this.maxSize)return}}},214:function(e,t,r){"use strict";r.d(t,"a",(function(){return u})),r.d(t,"b",(function(){return d}));var n=r(128),i=r(229),a=r(231),s=r(197),o=r(199),l=r(198),c=r(194),u={key:"type",base:n.a,typeMap:{heatmap:l.a,simple:c.a,"unique-value":a.a,"class-breaks":i.a,"dot-density":o.a,dictionary:s.default},errorContext:"renderer"},d={key:"type",base:n.a,typeMap:{simple:c.a,"unique-value":a.a,"class-breaks":i.a},errorContext:"renderer"}},233:function(e,t,r){"use strict";function n(e){return e&&"esri.renderers.visualVariables.SizeVariable"===e.declaredClass}function i(e){return null!=e&&!isNaN(e)&&isFinite(e)}function a(e){return e.valueExpression?"expression":e.field&&"string"==typeof e.field?"field":"unknown"}function s(e,t){var r=t||a(e),n=e.valueUnit||"unknown";return"unknown"===r?"constant":e.stops?"stops":null!=e.minSize&&null!=e.maxSize&&null!=e.minDataValue&&null!=e.maxDataValue?"clamped-linear":"unknown"===n?null!=e.minSize&&null!=e.minDataValue?e.minSize&&e.minDataValue?"proportional":"additive":"identity":"real-world-size"}r.d(t,"a",(function(){return a})),r.d(t,"b",(function(){return s})),r.d(t,"c",(function(){return n})),r.d(t,"d",(function(){return i}))},235:function(e,t,r){"use strict";var n=r(213);t.a=class{constructor(e,t){this._storage=new n.b,this._storage.maxSize=e,t&&this._storage.registerRemoveFunc("",t)}put(e,t,r){this._storage.put(e,t,r,1)}pop(e){return this._storage.pop(e)}get(e){return this._storage.get(e)}clear(){this._storage.clearAll()}destroy(){this._storage.destroy()}get maxSize(){return this._storage.maxSize}set maxSize(e){this._storage.maxSize=e}}},244:function(e,t,r){"use strict";r.d(t,"a",(function(){return c})),r.d(t,"b",(function(){return d})),r.d(t,"c",(function(){return l}));r(80);var n=r(124),i=r(175),a=r(188),s=r(93),o=r(214);function l(e,t,r,i){var a=function(e,t){return e?function(e,t){if(!t||"web-scene"!==t.origin)return!0;switch(e.type){case"simple":case"unique-value":case"class-breaks":return!0;case"heatmap":case"dictionary":case"dot-density":default:return!1}}(e,t)?e.write({},t):(t.messages&&t.messages.push(new s.a("renderer:unsupported","Renderer of type '".concat(e.declaredClass,"' are not supported in scenes."),{renderer:e,context:t})),null):null}(e,i);a&&Object(n.c)(r,a,t)}function c(e,t){return d(e,null,t)}var u=Object(a.b)({types:o.a});function d(e,t,r){return e?e&&(e.styleName||e.styleUrl)&&"uniqueValue"!==e.type?(r&&r.messages&&r.messages.push(new i.a("renderer:unsupported","Only UniqueValueRenderer can be referenced from a web style, but found '"+e.type+"'",{definition:e,context:r})),null):u(e,t,r):null}},261:function(e,t,r){"use strict";function n(){return function(e,t){if(!e[t])throw new TypeError("Cannot auto bind undefined function '".concat(t,"'"));return{value:i(e[t])}}}function i(e){return function(t,...r){!function(e){var{type:t}=e;return e instanceof KeyboardEvent||"keyup"===t||"keydown"===t||"keypress"===t}(t)?e.call(this,t,...r):"Enter"!==t.key&&" "!==t.key||(t.preventDefault(),t.stopPropagation(),t.target.click())}}r.d(t,"a",(function(){return n}))},277:function(e,t,r){"use strict";r.r(t),r.d(t,"getAllSizes",(function(){return S})),r.d(t,"getColor",(function(){return p})),r.d(t,"getOpacity",(function(){return y})),r.d(t,"getRotationAngle",(function(){return b})),r.d(t,"getSize",(function(){return m})),r.d(t,"getSizeForValue",(function(){return O})),r.d(t,"getSizeFromNumberOrVariable",(function(){return v})),r.d(t,"getSizeRangeAtScale",(function(){return j})),r.d(t,"getVisualVariableValues",(function(){return w})),r.d(t,"viewScaleRE",(function(){return h}));var n=r(180),i=r(89),a=r(81),s=r(109),o=r(123),l=r(193),c=r(233),u=a.a.getLogger("esri.renderers.visualVariables.support.visualVariableUtils"),d=new o.a,f=Math.PI,h=/^\s*(return\s+)?\$view\.scale\s*(;)?\s*$/i;function p(e,t,r){var n="visualVariables"in e&&e.visualVariables?e.visualVariables.filter((e=>"color"===e.type))[0]:e;if(n)if("esri.renderers.visualVariables.ColorVariable"===n.declaredClass){var a="number"==typeof t,o=a?null:t,l=o&&o.attributes,c=a?t:null,d=n.field,{ipData:f,hasExpression:h}=n.cache,p=n.cache.compiledFunc;if(!d&&!h){var y=n.stops;return y&&y[0]&&y[0].color}if("number"!=typeof c)if(h){if(!Object(i.k)(r)||!Object(i.k)(r.arcade))return void u.error("Use of arcade expressions requires an arcade context");var b={viewingMode:r.viewingMode,scale:r.scale,spatialReference:r.spatialReference},m=r.arcade.arcadeUtils,v=m.getViewInfo(b),g=m.createExecContext(o,v);if(!p){var O=m.createSyntaxTree(n.valueExpression);p=m.createFunction(O),n.cache.compiledFunc=p}c=m.executeFunction(p,g)}else l&&(c=l[d]);var j=n.normalizationField,w=l?parseFloat(l[j]):void 0;if(null!=c&&(!j||a||!isNaN(w)&&0!==w)){isNaN(w)||a||(c/=w);var S=_(c,f);if(S){var L=S[0],x=S[1],k=L===x?n.stops[L].color:s.a.blendColors(n.stops[L].color,n.stops[x].color,S[2],Object(i.k)(r)?r.color:void 0);return new s.a(k)}}}else u.warn("The visualVariable should be an instance of esri.renderers.visualVariables.ColorVariable")}function y(e,t,r){var n="visualVariables"in e&&e.visualVariables?e.visualVariables.filter((e=>"opacity"===e.type))[0]:e;if(n)if("esri.renderers.visualVariables.OpacityVariable"===n.declaredClass){var a="number"==typeof t,s=a?null:t,o=s&&s.attributes,l=a?t:null,c=n.field,{ipData:d,hasExpression:f}=n.cache,h=n.cache.compiledFunc;if(!c&&!f){var p=n.stops;return p&&p[0]&&p[0].opacity}if("number"!=typeof l)if(f){if(Object(i.j)(r)||Object(i.j)(r.arcade))return void u.error("Use of arcade expressions requires an arcade context");var y={viewingMode:r.viewingMode,scale:r.scale,spatialReference:r.spatialReference},b=r.arcade.arcadeUtils,m=b.getViewInfo(y),v=b.createExecContext(s,m);if(!h){var g=b.createSyntaxTree(n.valueExpression);h=b.createFunction(g),n.cache.compiledFunc=h}l=b.executeFunction(h,v)}else o&&(l=o[c]);var O=n.normalizationField,j=o?parseFloat(o[O]):void 0;if(null!=l&&(!O||a||!isNaN(j)&&0!==j)){isNaN(j)||a||(l/=j);var w=_(l,d);if(w){var S=w[0],L=w[1];if(S===L)return n.stops[S].opacity;var x=n.stops[S].opacity;return x+(n.stops[L].opacity-x)*w[2]}}}else u.warn("The visualVariable should be an instance of esri.renderers.visualVariables.OpacityVariable")}function b(e,t,r){var n="visualVariables"in e&&e.visualVariables?e.visualVariables.filter((e=>"rotation"===e.type))[0]:e;if(n){if("esri.renderers.visualVariables.RotationVariable"===n.declaredClass){var a=n.axis||"heading",s="heading"===a&&"arithmetic"===n.rotationType?90:0,o="heading"===a&&"arithmetic"===n.rotationType?-1:1,l="number"==typeof t?null:t,c=l&&l.attributes,d=n.field,{hasExpression:f}=n.cache,h=n.cache.compiledFunc,p=0;if(!d&&!f)return p;if(f){if(Object(i.j)(r)||Object(i.j)(r.arcade))return void u.error("Use of arcade expressions requires an arcade context");var y={viewingMode:r.viewingMode,scale:r.scale,spatialReference:r.spatialReference},b=r.arcade.arcadeUtils,m=b.getViewInfo(y),v=b.createExecContext(l,m);if(!h){var g=b.createSyntaxTree(n.valueExpression);h=b.createFunction(g),n.cache.compiledFunc=h}p=b.executeFunction(h,v)}else c&&(p=c[d]||0);return p="number"!=typeof p||isNaN(p)?null:s+o*p}u.warn("The visualVariable should be an instance of esri.renderers.visualVariables.RotationVariable")}}function m(e,t,r){var n="visualVariables"in e&&e.visualVariables?e.visualVariables.filter((e=>"size"===e.type))[0]:e;if(n){if("esri.renderers.visualVariables.SizeVariable"===n.declaredClass){var a=O(function(e,t,r){var n="number"==typeof t,a=n?null:t,s=a&&a.attributes,o=n?t:null,{isScaleDriven:l}=e.cache,d=e.cache.compiledFunc;if(l){var f=Object(i.k)(r)?r.scale:void 0,h=Object(i.k)(r)?r.view:void 0;o=null==f||"3d"===h?function(e){var t=null,r=null,n=e.stops;return n?(t=n[0].value,r=n[n.length-1].value):(t=e.minDataValue||0,r=e.maxDataValue||0),(t+r)/2}(e):f}else if(!n)switch(e.inputValueType){case"expression":if(Object(i.j)(r)||Object(i.j)(r.arcade))return void u.error("Use of arcade expressions requires an arcade context");var p={viewingMode:r.viewingMode,scale:r.scale,spatialReference:r.spatialReference},y=r.arcade.arcadeUtils,b=y.getViewInfo(p),m=y.createExecContext(a,b);if(!d){var v=y.createSyntaxTree(e.valueExpression);d=y.createFunction(v),e.cache.compiledFunc=d}o=y.executeFunction(d,m);break;case"field":s&&(o=s[e.field]);break;case"unknown":o=null}if(!Object(c.d)(o))return null;if(n||!e.normalizationField)return o;var g=s?parseFloat(s[e.normalizationField]):null;return Object(c.d)(g)&&0!==g?o/g:null}(n,t,r),n,t,r,n.cache.ipData);return null==a||isNaN(a)?0:a}u.warn("The visualVariable should be an instance of esri.renderers.visualVariables.SizeVariable")}}function v(e,t,r){return null==e?null:Object(c.c)(e)?m(e,t,r):Object(c.d)(e)?e:null}function g(e,t,r){return Object(c.d)(r)&&e>r?r:Object(c.d)(t)&&e<t?t:e}function O(e,t,r,n,a){switch(t.transformationType){case"additive":return function(e,t,r,n){return e+(v(t.minSize,r,n)||t.minDataValue)}(e,t,r,n);case"constant":return function(e,t,r){var n=e.stops,i=n&&n.length&&n[0].size;return null==i&&(i=e.minSize),v(i,t,r)}(t,r,n);case"clamped-linear":return function(e,t,r,n){var a=(e-t.minDataValue)/(t.maxDataValue-t.minDataValue),s=v(t.minSize,r,n),o=v(t.maxSize,r,n),l=Object(i.k)(n)?n.shape:void 0;if(e<=t.minDataValue)return s;if(e>=t.maxDataValue)return o;if("area"===t.scaleBy&&l){var c="circle"===l,u=c?f*Math.pow(s/2,2):s*s,d=u+a*((c?f*Math.pow(o/2,2):o*o)-u);return c?2*Math.sqrt(d/f):Math.sqrt(d)}return s+a*(o-s)}(e,t,r,n);case"proportional":return function(e,t,r,n){var a=Object(i.k)(n)?n.shape:void 0,s=e/t.minDataValue,o=v(t.minSize,r,n),l=v(t.maxSize,r,n);return g("circle"===a?2*Math.sqrt(s*Math.pow(o/2,2)):"square"===a||"diamond"===a||"image"===a?Math.sqrt(s*Math.pow(o,2)):s*o,o,l)}(e,t,r,n);case"stops":return function(e,t,r,n,i){var[a,s,o]=_(e,i);if(a===s)return v(t.stops[a].size,r,n);var l=v(t.stops[a].size,r,n);return l+(v(t.stops[s].size,r,n)-l)*o}(e,t,r,n,a);case"real-world-size":return function(e,t,r,n){var a=(Object(i.k)(n)&&n.resolution?n.resolution:1)*l.a[t.valueUnit],s=v(t.minSize,r,n),o=v(t.maxSize,r,n),{valueRepresentation:c}=t;return g("area"===c?2*Math.sqrt(e/f)/a:"radius"===c||"distance"===c?2*e/a:e/a,s,o)}(e,t,r,n);case"identity":return e;case"unknown":return null}}function j(e,t,r){var{isScaleDriven:n}=e.cache;if(!(n&&"3d"===r||t))return null;var i={scale:t,view:r},a=v(e.minSize,d,i),s=v(e.maxSize,d,i);if(null!=a||null!=s){if(a>s){var o=s;s=a,a=o}return{minSize:a,maxSize:s}}}function w(e,t,r){if(e.visualVariables){var n=[],i=[],a=[],s=[],o=[];for(var l of e.visualVariables)switch(l.type){case"color":i.push(l);break;case"opacity":a.push(l);break;case"rotation":o.push(l);break;case"size":s.push(l)}return i.forEach((e=>{var i=p(e,t,r);n.push({variable:e,value:i})})),a.forEach((e=>{var i=y(e,t,r);n.push({variable:e,value:i})})),o.forEach((e=>{var i=b(e,t,r);n.push({variable:e,value:i})})),s.forEach((e=>{var i=m(e,t,r);n.push({variable:e,value:i})})),n.filter((e=>null!=e.value))}}function _(e,t){if(t){var r=0,n=t.length-1;return t.some(((t,i)=>e<t?(n=i,!0):(r=i,!1))),[r,n,(e-t[r])/(t[n]-t[r])]}}function S(e,t,r){var i=["proportional","proportional","proportional"];for(var a of e){var s=a.useSymbolValue?"symbol-value":m(a,t,r);switch(a.axis){case"width":i[0]=s;break;case"depth":i[1]=s;break;case"height":i[2]=s;break;case"width-and-depth":i[0]=s,i[1]=s;break;case"all":case void 0:case null:i[0]=s,i[1]=s,i[2]=s;break;default:Object(n.a)(a.axis)}}return i}},278:function(e,t,r){"use strict";var n,i=r(82),a=(r(80),r(81),r(88),r(85)),s=r(84),o=(r(83),r(86),r(87),r(90)),l=r(109),c=n=class extends o.a{constructor(e){super(e),this.color=null,this.ratio=null}clone(){return new n({color:this.color,ratio:this.ratio})}};Object(i.a)([Object(a.b)({type:l.a,json:{write:!0}})],c.prototype,"color",void 0),Object(i.a)([Object(a.b)({type:Number,json:{write:!0}})],c.prototype,"ratio",void 0);var u=c=n=Object(i.a)([Object(s.a)("esri.renderers.support.HeatmapColorStop")],c);t.a=u},290:function(e,t,r){"use strict";function n(){var e=new Float32Array(6);return e[0]=1,e[3]=1,e}function i(e,t,r,n){var i=t[n],a=t[n+1];e[n]=r[0]*i+r[2]*a+r[4],e[n+1]=r[1]*i+r[3]*a+r[5]}function a(e,t,r,n=0,a=0,s=2){for(var o=a||t.length/s,l=n;l<o;l++)i(e,t,r,l*s)}r.d(t,"a",(function(){return n})),r.d(t,"b",(function(){return a}));Object.freeze({__proto__:null,create:n,clone:function(e){var t=new Float32Array(6);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t},fromValues:function(e,t,r,n,i,a){var s=new Float32Array(6);return s[0]=e,s[1]=t,s[2]=r,s[3]=n,s[4]=i,s[5]=a,s},createView:function(e,t){return new Float32Array(e,t,6)},transform:i,transformMany:a})},295:function(e,t,r){"use strict";function n(e,t){if(e.forEach)e.forEach(t);else for(var r=0;r<e.length;r++)t(e[r],r,e)}function i(e,t,r){if(e.slice)return e.slice(t,r);void 0===t?t=0:(t<0&&(t+=e.length),t=Math.min(e.length,Math.max(0,t))),void 0===r?r=e.length:(r<0&&(r+=e.length),r=Math.min(e.length,Math.max(0,r)));for(var n=Math.max(0,r-t),i=new(0,e.constructor)(n),a=0;a<n;a++)i[a]=e[t+a];return i}function a(e){return e instanceof ArrayBuffer||e&&e.constructor&&"ArrayBuffer"===e.constructor.name}function s(e){return e instanceof Int8Array||e&&e.constructor&&"Int8Array"===e.constructor.name}function o(e){return e instanceof Uint8Array||e&&e.constructor&&"Uint8Array"===e.constructor.name}function l(e){return e instanceof Uint8ClampedArray||e&&e.constructor&&"Uint8ClampedArray"===e.constructor.name}function c(e){return e instanceof Int16Array||e&&e.constructor&&"Int16Array"===e.constructor.name}function u(e){return e instanceof Uint16Array||e&&e.constructor&&"Uint16Array"===e.constructor.name}function d(e){return e instanceof Int32Array||e&&e.constructor&&"Int32Array"===e.constructor.name}function f(e){return e instanceof Uint32Array||e&&e.constructor&&"Uint32Array"===e.constructor.name}function h(e){return e instanceof Float32Array||e&&e.constructor&&"Float32Array"===e.constructor.name}function p(e){return e instanceof Float64Array||e&&e.constructor&&"Float64Array"===e.constructor.name}function y(e){for(var t=new Array(e.length),r=0;r<e.length;r++)t[r]=e[r];return t}function b(e){return e?128+e.buffer.byteLength+64:0}r.d(t,"a",(function(){return b})),r.d(t,"b",(function(){return n})),r.d(t,"c",(function(){return a})),r.d(t,"d",(function(){return h})),r.d(t,"e",(function(){return p})),r.d(t,"f",(function(){return c})),r.d(t,"g",(function(){return d})),r.d(t,"h",(function(){return s})),r.d(t,"i",(function(){return u})),r.d(t,"j",(function(){return f})),r.d(t,"k",(function(){return o})),r.d(t,"l",(function(){return l})),r.d(t,"m",(function(){return i})),r.d(t,"n",(function(){return y}))},297:function(e,t,r){"use strict";r.d(t,"a",(function(){return h}));var n=r(82),i=r(89),a=r(240),s=r(85),o=r(84),l=r(241),c=r(344),u=r(97),d=r(115),f=r(108),h=class extends u.a{constructor(){super(...arguments),this.updating=!1,this.handleId=0,this.handles=new d.a,this.scheduleHandleId=0,this.pendingPromises=new Set}destroy(){this.removeAll(),this.handles.destroy()}add(e,t,r,n=0){var i=0!=(1&n),a=++this.handleId;i||this.installSyncUpdatingWatch(e,t,a);var s=0!=(2&n)?Object(f.a)(e,t,r,i):e.watch(t,r,i);return this.handles.add(s,a),{remove:()=>{this.handles.remove(a)}}}addOnCollectionPropertyChange(e,t,r,n=0){var i=0!=(2&n),a=++this.handleId;return this.handles.add([Object(f.b)(e,t,"after-changes",this.createSyncUpdatingCallback()),Object(f.b)(e,t,"change",r,i?e=>{r({added:e.items,removed:[],moved:[],target:e})}:void 0)],a),{remove:()=>{this.handles.remove(a)}}}addOnCollectionChange(e,t,r=0){var n=0!=(2&r),i=++this.handleId;return this.handles.add([e.on("after-changes",this.createSyncUpdatingCallback()),e.on("change",t)],i),n&&t({added:e.items,removed:[],moved:[],target:e}),{remove:()=>{this.handles.remove(i)}}}addPromise(e){if(Object(i.j)(e))return e;var t=++this.handleId;this.handles.add({remove:()=>{this.pendingPromises.delete(e)&&(0!==this.pendingPromises.size||this.handles.has(p)||this._set("updating",!1))}},t),this.pendingPromises.add(e),this._set("updating",!0);var r=()=>this.handles.remove(t);return e.then(r,r),e}removeAll(){this.pendingPromises.clear(),this.handles.removeAll(),this._set("updating",!1)}installSyncUpdatingWatch(e,t,r){var n=this.createSyncUpdatingCallback(),i=Object(c.a)((()=>Object(a.c)(e,t)),n);return this.handles.add(i,r),i}createSyncUpdatingCallback(){return()=>{this.handles.remove(p),++this.scheduleHandleId;var e=this.scheduleHandleId;this._get("updating")||this._set("updating",!0),this.handles.add(Object(l.b)((()=>{e===this.scheduleHandleId&&(this._set("updating",this.pendingPromises.size>0),this.handles.remove(p))})),p)}}};Object(n.a)([Object(s.b)({readOnly:!0})],h.prototype,"updating",void 0),h=Object(n.a)([Object(o.a)("esri.views.support.WatchUpdatingTracking")],h);var p=-42},302:function(e,t,r){"use strict";r.d(t,"a",(function(){return _})),r.d(t,"b",(function(){return k})),r.d(t,"c",(function(){return c})),r.d(t,"d",(function(){return w}));var n,i=r(114),a="http://www.w3.org/",s="".concat(a,"2000/svg"),o="".concat(a,"1999/xlink"),l=[],c=(e,t)=>{var r={};return Object.keys(e).forEach((t=>{r[t]=e[t]})),t&&Object.keys(t).forEach((e=>{r[e]=t[e]})),r},u=(e,t)=>e.vnodeSelector===t.vnodeSelector&&(e.properties&&t.properties?e.properties.key===t.properties.key&&e.properties.bind===t.properties.bind:!e.properties&&!t.properties),d=e=>{if("string"!=typeof e)throw new Error("Style values must be strings")},f=(e,t,r)=>{if(""!==t.vnodeSelector)for(var n=r;n<e.length;n++)if(u(e[n],t))return n;return-1},h=(e,t,r,n)=>{var i=e[t];if(""!==i.vnodeSelector){var a=i.properties;if(!(a?void 0===a.key?a.bind:a.key:void 0))for(var s=0;s<e.length;s++)if(s!==t){var o=e[s];if(u(o,i))throw new Error("".concat(r.vnodeSelector," had a ").concat(i.vnodeSelector," child ").concat("added"===n?n:"removed",", but there is now more than one. You must add unique key properties to make them distinguishable."))}}},p=e=>{if(e.properties){var t=e.properties.enterAnimation;t&&t(e.domNode,e.properties)}},y=[],b=!1,m=e=>{(e.children||[]).forEach(m),e.properties&&e.properties.afterRemoved&&e.properties.afterRemoved.apply(e.properties.bind||e.properties,[e.domNode])},v=()=>{b=!1,y.forEach(m),y.length=0},g=e=>{y.push(e),b||(b=!0,"undefined"!=typeof window&&"requestIdleCallback"in window?window.requestIdleCallback(v,{timeout:16}):setTimeout(v,16))},O=e=>{var t=e.domNode;if(e.properties){var r=e.properties.exitAnimation;if(r){t.style.pointerEvents="none";return void r(t,(()=>{t.parentNode&&(t.parentNode.removeChild(t),g(e))}),e.properties)}}t.parentNode&&(t.parentNode.removeChild(t),g(e))},j=(e,t,r)=>{if(t)for(var n=r.eventHandlerInterceptor,a=Object.keys(t),l=a.length,c=function(l){var c=a[l],u=t[c];if("className"===c)throw new Error('Property "className" is not supported, use "class".');if("class"===c)S(e,u,!0);else if("classes"===c)for(var f=Object.keys(u),h=f.length,p=0;p<h;p++){var y=f[p];u[y]&&e.classList.add(y)}else if("styles"===c)for(var b=Object.keys(u),m=b.length,v=0;v<m;v++){var g=b[v],O=u[g];O&&(d(O),r.styleApplyer(e,g,O))}else if("key"!==c&&null!=u){var j=typeof u;"function"===j?(0===c.lastIndexOf("on",0)&&(n&&(u=n(c,u,e,t)),"oninput"===c&&function(){var e=u;u=function(t){e.apply(this,[t]),t.target["oninput-value"]=t.target.value}}()),e[c]=u):r.namespace===s?"href"===c?e.setAttributeNS(o,c,u):e.setAttribute(c,u):"string"===j&&"value"!==c?"innerHTML"===c?e[c]=i.h.sanitize(u):e.setAttribute(c,u):e[c]=u}},u=0;u<l;u++)c(u)},w=(e,t,r)=>{((e,t,r)=>{if(t)for(var n of t)_(n,e,void 0,r)})(e,t.children,r),t.text&&(e.textContent=t.text),j(e,t.properties,r),t.properties&&t.properties.afterCreate&&t.properties.afterCreate.apply(t.properties.bind||t.properties,[e,r,t.vnodeSelector,t.properties,t.children])},_=(e,t,r,n)=>{var i,a=0,o=e.vnodeSelector,l=t.ownerDocument;if(""===o)i=e.domNode=l.createTextNode(e.text),void 0!==r?t.insertBefore(i,r):t.appendChild(i);else{for(var u=0;u<=o.length;++u){var d=o.charAt(u);if(u===o.length||"."===d||"#"===d){var f=o.charAt(a-1),h=o.slice(a,u);"."===f?i.classList.add(h):"#"===f?i.id=h:("svg"===h&&(n=c(n,{namespace:s})),void 0!==n.namespace?i=e.domNode=l.createElementNS(n.namespace,h):(i=e.domNode=e.domNode||l.createElement(h),"input"===h&&e.properties&&void 0!==e.properties.type&&i.setAttribute("type",e.properties.type)),void 0!==r?t.insertBefore(i,r):i.parentNode!==t&&t.appendChild(i)),a=u+1}}w(i,e,n)}},S=(e,t,r)=>{t&&t.split(" ").forEach((t=>{t&&e.classList.toggle(t,r)}))},L=(e,t,r,n)=>{if(r){for(var a=!1,l=Object.keys(r),c=l.length,u=0;u<c;u++){var f=l[u],h=r[f],p=t[f];if("class"===f)p!==h&&(S(e,p,!1),S(e,h,!0));else if("classes"===f)for(var y=e.classList,b=Object.keys(h),m=b.length,v=0;v<m;v++){var g=b[v],O=!!h[g];O!==!!p[g]&&(a=!0,O?y.add(g):y.remove(g))}else if("styles"===f)for(var j=Object.keys(h),w=j.length,_=0;_<w;_++){var L=j[_],x=h[L];x!==p[L]&&(a=!0,x?(d(x),n.styleApplyer(e,L,x)):n.styleApplyer(e,L,""))}else if(h||"string"!=typeof p||(h=""),"value"===f){var k=e[f];k!==h&&(e["oninput-value"]?k===e["oninput-value"]:h!==p)&&(e[f]=h,e["oninput-value"]=void 0),h!==p&&(a=!0)}else if(h!==p){var I=typeof h;"function"===I&&n.eventHandlerInterceptor||(n.namespace===s?"href"===f?e.setAttributeNS(o,f,h):e.setAttribute(f,h):"string"===I?"innerHTML"===f?e[f]=i.h.sanitize(h):"role"===f&&""===h?e.removeAttribute(f):e.setAttribute(f,h):e[f]!==h&&(e[f]=h),a=!0)}}return a}},x=(e,t,r,i,a)=>{if(r===i)return!1;i=i||l;for(var s,o=(r=r||l).length,c=i.length,d=0,y=0,b=!1;y<c;){var m=d<o?r[d]:void 0,v=i[y];if(void 0!==m&&u(m,v))b=n(m,v,a)||b,d++;else{var g=f(r,v,d+1);if(g>=0){for(s=d;s<g;s++)O(r[s]),h(r,s,e,"removed");b=n(r[g],v,a)||b,d=g+1}else _(v,t,d<o?r[d].domNode:void 0,a),p(v),h(i,y,e,"added")}y++}if(o>d)for(s=d;s<o;s++)O(r[s]),h(r,s,e,"removed");return b};n=(e,t,r)=>{var n=e.domNode,i=!1;if(e===t)return!1;var a=!1;if(""===t.vnodeSelector){if(t.text!==e.text){var o=n.ownerDocument.createTextNode(t.text);return n.parentNode.replaceChild(o,n),t.domNode=o,i=!0}t.domNode=n}else 0===t.vnodeSelector.lastIndexOf("svg",0)&&(r=c(r,{namespace:s})),e.text!==t.text&&(a=!0,void 0===t.text?n.removeChild(n.firstChild):n.textContent=t.text),t.domNode=n,a=x(t,n,e.children,t.children,r)||a,a=L(n,e.properties,t.properties,r)||a,t.properties&&t.properties.afterUpdate&&t.properties.afterUpdate.apply(t.properties.bind||t.properties,[n,r,t.vnodeSelector,t.properties,t.children]);return a&&t.properties&&t.properties.updateAnimation&&t.properties.updateAnimation(n,t.properties,e.properties),i};var k=(e,t)=>({getLastRender:()=>e,update:r=>{if(e.vnodeSelector!==r.vnodeSelector)throw new Error("The selector for the root VNode may not be changed. (consider using dom.merge and add one extra level to the virtual DOM)");var i=e;e=r,n(i,r,t)},domNode:e.domNode})},317:function(e,t,r){"use strict";r.d(t,"a",(function(){return y})),r.d(t,"b",(function(){return h})),r.d(t,"c",(function(){return p}));var n=r(89),i=r(126),a=r(97),s=r(107),o=["esri.Color","esri.portal.Portal","esri.symbols.support.Symbol3DAnchorPosition2D","esri.symbols.support.Symbol3DAnchorPosition3D"];function l(e){return e instanceof a.a}function c(e){return e instanceof s.a?Object.keys(e.items):l(e)?Object(i.a)(e).keys():e?Object.keys(e):[]}function u(e,t){return e instanceof s.a?e.items[t]:e[t]}function d(e){return e?e.declaredClass:null}function f(e,t){var r=e.diff;if(r&&"function"==typeof r)return r(e,t);var i=c(e),a=c(t);if(0!==i.length||0!==a.length){if(!i.length||!a.length||function(e,t){return!(!Array.isArray(e)||!Array.isArray(t))&&e.length!==t.length}(e,t))return{type:"complete",oldValue:e,newValue:t};var s,h=a.filter((e=>-1===i.indexOf(e))),p=i.filter((e=>-1===a.indexOf(e))),y=i.filter((r=>a.indexOf(r)>-1&&u(e,r)!==u(t,r))).concat(h,p).sort(),b=d(e);if(b&&o.indexOf(b)>-1&&y.length)return{type:"complete",oldValue:e,newValue:t};var m=l(e)&&l(t);for(var v of y){var g=u(e,v),O=u(t,v),j=void 0;(m||"function"!=typeof g&&"function"!=typeof O)&&g!==O&&(null==g&&null==O||(j=r&&r[v]&&"function"==typeof r[v]?r[v](g,O):"object"==typeof g&&"object"==typeof O&&d(g)===d(O)?f(g,O):{type:"complete",oldValue:g,newValue:O},Object(n.k)(j)&&(Object(n.k)(s)?s.diff[v]=j:s={type:"partial",diff:{[v]:j}})))}return s}}function h(e,t){if(Object(n.j)(e))return!1;var r=t.split("."),i=e;for(var a of r){if("complete"===i.type)return!0;if("partial"!==i.type)return!1;var s=i.diff[a];if(!s)return!1;i=s}return!0}function p(e,t){for(var r of t)if(h(e,r))return!0;return!1}function y(e,t){if("function"!=typeof e&&"function"!=typeof t&&(e||t))return!e||!t||"object"==typeof e&&"object"==typeof t&&d(e)!==d(t)?{type:"complete",oldValue:e,newValue:t}:f(e,t)}},320:function(e,t,r){"use strict";function n(e,t,r,n){return function(e){return"function"==typeof e}(e)?e(t,r,n):e}function i(e){return[e.r,e.g,e.b,e.a]}function a(e,t,r){var n=e=>{for(var t=e.length;t--;)if(-1===" /-,\n".indexOf(e.charAt(t)))return!1;return!0},i=[],a=0,o=-1;do{if((o=t.indexOf("[",a))>=a){if(o>a){var l=t.substr(a,o-a);i.push([l,null,n(l)])}if(a=o+1,(o=t.indexOf("]",a))>=a){if(o>a){var c=e[t.substr(a,o-a)];c&&i.push([null,c,!1])}a=o+1}}}while(-1!==o);if(a<t.length-1){var u=t.substr(a);i.push([u,null,n(u)])}return e=>{var t="",n=null;for(var a of i){var[o,l,c]=a;if(o)c?n=o:(n&&(t+=n,n=null),t+=o);else{var u=e.attributes[l];u&&(n&&(t+=n,n=null),t+=u)}}return s(t,r)}}function s(e,t){switch("string"!=typeof e&&(e=String(e)),t){case"LowerCase":return e.toLowerCase();case"Allcaps":return e.toUpperCase();default:return e}}function o(e,t,r,n,i,a,s=!0){for(var o=t/i,l=r/a,c=Math.ceil(o/2),u=Math.ceil(l/2),d=0;d<a;d++)for(var f=0;f<i;f++){for(var h=4*(f+(s?a-d-1:d)*i),p=0,y=0,b=0,m=0,v=0,g=0,O=0,j=(d+.5)*l,w=Math.floor(d*l);w<(d+1)*l;w++)for(var _=Math.abs(j-(w+.5))/u,S=(f+.5)*o,L=_*_,x=Math.floor(f*o);x<(f+1)*o;x++){var k=Math.abs(S-(x+.5))/c,I=Math.sqrt(L+k*k);I>=-1&&I<=1&&((p=2*I*I*I-3*I*I+1)>0&&(O+=p*e[(k=4*(x+w*t))+3],b+=p,e[k+3]<255&&(p=p*e[k+3]/250),m+=p*e[k],v+=p*e[k+1],g+=p*e[k+2],y+=p))}n[h]=m/y,n[h+1]=v/y,n[h+2]=g/y,n[h+3]=O/b}}function l(e){return e?{r:e[0],g:e[1],b:e[2],a:e[3]/255}:{r:0,g:0,b:0,a:0}}function c(e){var t;return null==(t=e.data)?void 0:t.symbol}function u(e){return"CIMVectorMarker"===e.type||"CIMPictureMarker"===e.type||"CIMBarChartMarker"===e.type||"CIMCharacterMarker"===e.type||"CIMPieChartMarker"===e.type||"CIMStackedBarChartMarker"===e.type}function d(e){return"CIMGradientStroke"===e.type||"CIMPictureStroke"===e.type||"CIMSolidStroke"===e.type}function f(e){return"CIMGradientFill"===e.type||"CIMHatchFill"===e.type||"CIMPictureFill"===e.type||"CIMSolidFill"===e.type||"CIMWaterFill"===e.type}function h(e){return"CIMMarkerPlacementAlongLineRandomSize"===e.type||"CIMMarkerPlacementAlongLineSameSize"===e.type||"CIMMarkerPlacementAlongLineVariableSize"===e.type||"CIMMarkerPlacementAtExtremities"===e.type||"CIMMarkerPlacementAtMeasuredUnits"===e.type||"CIMMarkerPlacementAtRatioPositions"===e.type||"CIMMarkerPlacementOnLine"===e.type||"CIMMarkerPlacementOnVertices"===e.type}r.d(t,"a",(function(){return s})),r.d(t,"b",(function(){return i})),r.d(t,"c",(function(){return a})),r.d(t,"d",(function(){return n})),r.d(t,"e",(function(){return l})),r.d(t,"f",(function(){return f})),r.d(t,"g",(function(){return u})),r.d(t,"h",(function(){return h})),r.d(t,"i",(function(){return d})),r.d(t,"j",(function(){return o})),r.d(t,"k",(function(){return c}))},321:function(e,t,r){"use strict";r.d(t,"a",(function(){return a})),r.d(t,"b",(function(){return u})),r.d(t,"c",(function(){return d})),r.d(t,"d",(function(){return i})),r.d(t,"e",(function(){return s})),r.d(t,"f",(function(){return o})),r.d(t,"g",(function(){return l})),r.d(t,"h",(function(){return c}));var n=r(184);function i(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e[4]=0,e[5]=0,e}function a(e,t){var r=t[0],n=t[1],i=t[2],a=t[3],s=t[4],o=t[5],l=r*a-n*i;return l?(l=1/l,e[0]=a*l,e[1]=-n*l,e[2]=-i*l,e[3]=r*l,e[4]=(i*o-a*s)*l,e[5]=(n*s-r*o)*l,e):null}function s(e,t,r){var n=t[0],i=t[1],a=t[2],s=t[3],o=t[4],l=t[5],c=r[0],u=r[1],d=r[2],f=r[3],h=r[4],p=r[5];return e[0]=n*c+a*u,e[1]=i*c+s*u,e[2]=n*d+a*f,e[3]=i*d+s*f,e[4]=n*h+a*p+o,e[5]=i*h+s*p+l,e}function o(e,t,r){var n=t[0],i=t[1],a=t[2],s=t[3],o=t[4],l=t[5],c=Math.sin(r),u=Math.cos(r);return e[0]=n*u+a*c,e[1]=i*u+s*c,e[2]=n*-c+a*u,e[3]=i*-c+s*u,e[4]=o,e[5]=l,e}function l(e,t,r){var n=t[0],i=t[1],a=t[2],s=t[3],o=t[4],l=t[5],c=r[0],u=r[1];return e[0]=n*c,e[1]=i*c,e[2]=a*u,e[3]=s*u,e[4]=o,e[5]=l,e}function c(e,t,r){var n=t[0],i=t[1],a=t[2],s=t[3],o=t[4],l=t[5],c=r[0],u=r[1];return e[0]=n,e[1]=i,e[2]=a,e[3]=s,e[4]=n*c+a*u+o,e[5]=i*c+s*u+l,e}function u(e,t){var r=Math.sin(t),n=Math.cos(t);return e[0]=n,e[1]=r,e[2]=-r,e[3]=n,e[4]=0,e[5]=0,e}function d(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=t[1],e[4]=0,e[5]=0,e}function f(e,t,r){return e[0]=t[0]-r[0],e[1]=t[1]-r[1],e[2]=t[2]-r[2],e[3]=t[3]-r[3],e[4]=t[4]-r[4],e[5]=t[5]-r[5],e}var h=s,p=f;Object.freeze({__proto__:null,copy:function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e},identity:i,set:function(e,t,r,n,i,a,s){return e[0]=t,e[1]=r,e[2]=n,e[3]=i,e[4]=a,e[5]=s,e},invert:a,determinant:function(e){return e[0]*e[3]-e[1]*e[2]},multiply:s,rotate:o,scale:l,translate:c,fromRotation:u,fromScaling:d,fromTranslation:function(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e[4]=t[0],e[5]=t[1],e},str:function(e){return"mat2d("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+")"},frob:function(e){return Math.sqrt(Math.pow(e[0],2)+Math.pow(e[1],2)+Math.pow(e[2],2)+Math.pow(e[3],2)+Math.pow(e[4],2)+Math.pow(e[5],2)+1)},add:function(e,t,r){return e[0]=t[0]+r[0],e[1]=t[1]+r[1],e[2]=t[2]+r[2],e[3]=t[3]+r[3],e[4]=t[4]+r[4],e[5]=t[5]+r[5],e},subtract:f,multiplyScalar:function(e,t,r){return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e[4]=t[4]*r,e[5]=t[5]*r,e},multiplyScalarAndAdd:function(e,t,r,n){return e[0]=t[0]+r[0]*n,e[1]=t[1]+r[1]*n,e[2]=t[2]+r[2]*n,e[3]=t[3]+r[3]*n,e[4]=t[4]+r[4]*n,e[5]=t[5]+r[5]*n,e},exactEquals:function(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]},equals:function(e,t){var r=e[0],i=e[1],a=e[2],s=e[3],o=e[4],l=e[5],c=t[0],u=t[1],d=t[2],f=t[3],h=t[4],p=t[5];return Math.abs(r-c)<=n.a*Math.max(1,Math.abs(r),Math.abs(c))&&Math.abs(i-u)<=n.a*Math.max(1,Math.abs(i),Math.abs(u))&&Math.abs(a-d)<=n.a*Math.max(1,Math.abs(a),Math.abs(d))&&Math.abs(s-f)<=n.a*Math.max(1,Math.abs(s),Math.abs(f))&&Math.abs(o-h)<=n.a*Math.max(1,Math.abs(o),Math.abs(h))&&Math.abs(l-p)<=n.a*Math.max(1,Math.abs(l),Math.abs(p))},mul:h,sub:p})},359:function(e,t,r){"use strict";var n,i=r(82),a=(r(80),r(89)),s=(r(81),r(88),r(85)),o=r(95),l=r(98),c=r(84),u=r(96),d=(r(83),r(86),r(87),r(90)),f=r(7),h=r(118),p=n=class extends d.a{collectRequiredFields(e,t){var r=this;return Object(f.a)((function*(){return Object(h.c)(e,t,r.expression)}))()}clone(){return new n({expression:this.expression,title:this.title})}};Object(i.a)([Object(s.b)({type:String,json:{write:!0}})],p.prototype,"expression",void 0),Object(i.a)([Object(s.b)({type:String,json:{write:!0}})],p.prototype,"title",void 0);var y,b=p=n=Object(i.a)([Object(c.a)("esri.layers.support.FeatureExpressionInfo")],p),m=r(376),v=Object(o.b)()({onTheGround:"on-the-ground",relativeToGround:"relative-to-ground",relativeToScene:"relative-to-scene",absoluteHeight:"absolute-height"}),g=new o.a({foot:"feet",kilometer:"kilometers",meter:"meters",mile:"miles","us-foot":"us-feet",yard:"yards"}),O=y=class extends d.a{constructor(){super(...arguments),this.offset=null}readFeatureExpressionInfo(e,t){return null!=e?e:t.featureExpression&&0===t.featureExpression.value?{expression:"0"}:void 0}writeFeatureExpressionInfo(e,t,r,n){t[r]=e.write(null,n),"0"===e.expression&&(t.featureExpression={value:0})}get mode(){var{offset:e,featureExpressionInfo:t}=this;return this._isOverridden("mode")?this._get("mode"):Object(a.k)(e)||t?"relative-to-ground":"on-the-ground"}set mode(e){this._override("mode",e)}set unit(e){this._set("unit",e)}write(e,t){return this.offset||this.mode||this.featureExpressionInfo||this.unit?super.write(e,t):null}clone(){return new y({mode:this.mode,offset:this.offset,featureExpressionInfo:this.featureExpressionInfo?this.featureExpressionInfo.clone():void 0,unit:this.unit})}};Object(i.a)([Object(s.b)({type:b,json:{write:!0}})],O.prototype,"featureExpressionInfo",void 0),Object(i.a)([Object(l.a)("featureExpressionInfo",["featureExpressionInfo","featureExpression"])],O.prototype,"readFeatureExpressionInfo",null),Object(i.a)([Object(u.a)("featureExpressionInfo",{featureExpressionInfo:{type:b},"featureExpression.value":{type:[0]}})],O.prototype,"writeFeatureExpressionInfo",null),Object(i.a)([Object(s.b)({type:v.apiValues,nonNullable:!0,json:{type:v.jsonValues,read:v.read,write:{writer:v.write,isRequired:!0}}})],O.prototype,"mode",null),Object(i.a)([Object(s.b)({type:Number,json:{write:!0}})],O.prototype,"offset",void 0),Object(i.a)([Object(s.b)({type:m.b,json:{type:String,read:g.read,write:g.write}})],O.prototype,"unit",null);var j=O=y=Object(i.a)([Object(c.a)("esri.layers.support.ElevationInfo")],O);t.a=j},367:function(e,t,r){"use strict";r.d(t,"a",(function(){return p}));var n,i=r(302),a={namespace:void 0,performanceLogger:()=>{},eventHandlerInterceptor:void 0,styleApplyer:(e,t,r)=>{"-"===t.charAt(0)?e.style.setProperty(t,r):e.style[t]=r}},s=e=>Object(i.c)(a,e),o=(e,t,r)=>(r=s(r),Object(i.a)(t,e,void 0,r),Object(i.b)(t,r)),l=(e,t,r)=>(r=s(r),Object(i.a)(t,e.parentNode,e,r),Object(i.b)(t,r)),c=(e,t,r)=>(r=s(r),t.domNode=e,Object(i.d)(e,t,r),Object(i.b)(t,r)),u=(e,t,r)=>(r=s(r),Object(i.a)(t,e.parentNode,e,r),e.parentNode.removeChild(e),Object(i.b)(t,r)),d=(e,t)=>{for(var r=[];e&&e!==t;)r.push(e),e=e.parentNode;return r};n=Array.prototype.find?(e,t)=>e.find(t):(e,t)=>e.filter(t)[0];var f=(e,t)=>{var r=e;return t.forEach((e=>{r=r&&r.children?n(r.children,(t=>t.domNode===e)):void 0})),r},h=(e,t,r)=>{var n=function(n){r("domEvent",n);var i=t(),a=d(n.currentTarget,i.domNode);a.reverse();var s,o=f(i.getLastRender(),a);return e.scheduleRender(),o&&(s=o.properties["on".concat(n.type)].apply(o.properties.bind||this,arguments)),r("domEventProcessed",n),s};return(e,t,r,i)=>n},p=e=>{var t,r,n=s(e),i=n.performanceLogger,a=!0,d=!1,f=[],p=[],y=(e,r,a)=>{var s;n.eventHandlerInterceptor=h(t,(()=>s),i),s=e(r,a(),n),f.push(s),p.push(a)},b=()=>{if(r=void 0,a){a=!1,i("renderStart",void 0);for(var e=0;e<f.length;e++){var t=p[e]();i("rendered",void 0),f[e].update(t),i("patched",void 0)}i("renderDone",void 0),a=!0}};return t={renderNow:b,scheduleRender:()=>{r||d||(r=requestAnimationFrame(b))},stop:()=>{r&&(cancelAnimationFrame(r),r=void 0),d=!0},resume:()=>{d=!1,a=!0,t.scheduleRender()},append:(e,t)=>{y(o,e,t)},insertBefore:(e,t)=>{y(l,e,t)},merge:(e,t)=>{y(c,e,t)},replace:(e,t)=>{y(u,e,t)},detach:e=>{for(var t=0;t<p.length;t++)if(p[t]===e)return p.splice(t,1),f.splice(t,1)[0];throw new Error("renderFunction was not found")}}}},376:function(e,t,r){"use strict";r.d(t,"a",(function(){return a})),r.d(t,"b",(function(){return s})),r.d(t,"c",(function(){return i}));var n=r(193);function i(e){return null!=n.a[e]}function a(e){return 1/(n.a[e]||1)}var s=function(){var e=Object.keys(n.a);return e.sort(),e}()},385:function(e,t,r){"use strict";function n(e){return"string"==typeof e?document.getElementById(e):e}function i(e){for(;e.hasChildNodes();)e.removeChild(e.firstChild)}function a(e,t){var r=t.parentNode;r&&r.insertBefore(e,t)}function s(e,t){for(;;){var r=e.firstChild;if(!r)break;t.appendChild(r)}}function o(e){e.parentNode&&e.parentNode.removeChild(e)}r.d(t,"a",(function(){return n})),r.d(t,"b",(function(){return i})),r.d(t,"c",(function(){return a})),r.d(t,"d",(function(){return o})),r.d(t,"e",(function(){return s}));(()=>{if("function"==typeof Element.prototype.closest)return(e,t)=>e.closest(t);var e=Element.prototype.matches||Element.prototype.msMatchesSelector})()},403:function(e,t,r){"use strict";var n=r(213);t.a=class{constructor(e,t){this._storage=new n.b,this._storage.maxSize=e,t&&this._storage.registerRemoveFunc("",t)}put(e,t){this._storage.put(e,t,1,1)}pop(e){return this._storage.pop(e)}get(e){return this._storage.get(e)}clear(){this._storage.clearAll()}destroy(){this._storage.destroy()}}},409:function(e,t,r){"use strict";var n=r(124);class i{constructor(e,t,r){this.name=e,this.details=r,this.message=void 0,this instanceof i&&(this.message=t&&function(e,t){return e.replace(/\$\{([^\s\:\}]*)(?:\:([^\s\:\}]+))?\}/g,(function(e,r){if(""===r)return"$";var i=Object(n.b)(r,t),a=null==i?"":i;if(void 0===a)throw new Error('could not find key "'.concat(r,'" in template'));return a.toString()}))}(t,r)||"")}toString(){return"["+this.name+"]: "+this.message}}t.a=i},414:function(e,t,r){"use strict";r.d(t,"a",(function(){return O})),r.d(t,"b",(function(){return g})),r.d(t,"c",(function(){return R})),r.d(t,"d",(function(){return z})),r.d(t,"e",(function(){return v})),r.d(t,"f",(function(){return m})),r.d(t,"g",(function(){return y})),r.d(t,"h",(function(){return b}));var n=r(7),i=r(80),a=r(89),s=r(109),o=r(105),l=r(527),c=r(138),u=r(201),d=r(104),f=r(422),h=/\/resource\/(.*?)\.svg$/,p=new s.a("white");function y(e){if(!e)return 0;if(Object(c.c)(e)){var t=function(e){var t=e.symbolLayers&&e.symbolLayers.length;if(t){var r=e.symbolLayers.getItemAt(t-1);return"outline"in r?Object(a.i)(r,"outline","size"):void 0}}(e);return Object(a.k)(t)?t:0}var r=Object(f.d)(e);return r&&Object(o.i)(r.width)||0}function b(e){if(!e||!e.symbolLayers)return!1;switch(e.type){case"point-3d":return e.symbolLayers.some((e=>"object"===e.type));case"line-3d":return e.symbolLayers.some((e=>"path"===e.type));case"polygon-3d":return e.symbolLayers.some((e=>"object"===e.type||"extrude"===e.type));default:return!1}}function m(e,t){var r=t.resource.href;return!Object(i.a)("esri-canvas-svg-support")&&e.styleOrigin&&h.test(r)?r.replace(h,"/resource/png/$1.png"):r}function v(e,t){if(!e)return null;var r=null;return Object(c.c)(e)?r=function(e){var t=e.symbolLayers;if(!t)return null;var r=null;return t.forEach((e=>{"object"===e.type&&null!=e.resource.href||(r="water"===e.type?Object(a.q)(e.color):Object(a.k)(e.material)?Object(a.q)(e.material.color):null)})),r?new s.a(r):null}(e):Object(c.b)(e)&&(r=e.color?new s.a(e.color):null),r?g(r,t):null}function g(e,t){if(null==t)return e;var r=e.toRgba();return r[3]=r[3]*t,new s.a(r)}function O(e,t,r){e&&(t||null!=r)&&(t&&(t=new s.a(t)),Object(c.c)(e)?function(e,t,r){var n=e.symbolLayers;if(n){var i=e=>{var n=Object(a.k)(e)?e:null;return g(t=t||n||null!=r&&p,r)};n.forEach((e=>{if("object"!==e.type||null==e.resource.href||t)if("water"===e.type)e.color=i(e.color);else{var n=Object(a.k)(e.material)?e.material.color:null,s=i(n);Object(a.j)(e.material)?e.material=new l.a({color:s}):e.material.color=s,null!=r&&"outline"in e&&Object(a.k)(e.outline)&&Object(a.k)(e.outline.color)&&(e.outline.color=g(e.outline.color,r))}}))}}(e,t,r):Object(c.b)(e)&&function(e,t,r){(t=t||e.color)&&(e.color=g(t,r)),null!=r&&"outline"in e&&e.outline&&e.outline.color&&(e.outline.color=g(e.outline.color,r))}(e,t,r))}function j(e,t){return w.apply(this,arguments)}function w(){return(w=Object(n.a)((function*(e,t){var r=e.symbolLayers;r&&(yield Object(u.a)(r,function(){var e=Object(n.a)((function*(e){return _(e,t)}));return function(t){return e.apply(this,arguments)}}()))}))).apply(this,arguments)}function _(e,t){return S.apply(this,arguments)}function S(){return(S=Object(n.a)((function*(e,t){switch(e.type){case"extrude":k(e,t);break;case"icon":case"line":case"text":L(e,t);break;case"path":M(e,t);break;case"object":yield I(e,t)}}))).apply(this,arguments)}function L(e,t){var r=x(t);Object(a.k)(r)&&(e.size=r)}function x(e){for(var t of e)if("number"==typeof t)return t;return null}function k(e,t){e.size="number"==typeof t[2]?t[2]:0}function I(e,t){return A.apply(this,arguments)}function A(){return(A=Object(n.a)((function*(e,t){var{resourceSize:r,symbolSize:n}=yield C(e),i=E(t,r,n);e.width=T(t[0],n[0],r[0],i),e.depth=T(t[1],n[1],r[1],i),e.height=T(t[2],n[2],r[2],i)}))).apply(this,arguments)}function M(e,t){var r=E(t,d.a,[e.width,void 0,e.height]);e.width=T(t[0],e.width,1,r),e.height=T(t[2],e.height,1,r)}function E(e,t,r){for(var n=0;n<3;n++){var i=e[n];switch(i){case"symbol-value":return null!=r[n]?r[n]/t[n]:1;case"proportional":break;default:if(i&&t[n])return i/t[n]}}return 1}function C(e){return V.apply(this,arguments)}function V(){return(V=Object(n.a)((function*(e){for(var t=yield r.e(199).then(r.bind(null,655)),n=yield t.computeObjectLayerResourceSize(e,10),{width:i,height:a,depth:s}=e,o=[i,s,a],l=1,c=0;c<3;c++)if(null!=o[c]){l=o[c]/n[c];break}for(var u=0;u<3;u++)null==o[u]&&(o[u]=n[u]*l);return{resourceSize:n,symbolSize:o}}))).apply(this,arguments)}function T(e,t,r,n){switch(e){case"proportional":return r*n;case"symbol-value":return null!=t?t:r;default:return e}}function F(e,t){var r=x(t);if(!Object(a.j)(r))switch(e.type){case"simple-marker":e.size=r;break;case"picture-marker":var n=e.width/e.height;n>1?(e.width=r,e.height=r*n):(e.width=r*n,e.height=r);break;case"simple-line":e.width=r;break;case"text":e.font.size=r}}function z(e,t){return P.apply(this,arguments)}function P(){return(P=Object(n.a)((function*(e,t){if(e&&t)return Object(c.c)(e)?j(e,t):void(Object(c.b)(e)&&F(e,t))}))).apply(this,arguments)}function R(e,t,r){if(e&&null!=t)if(Object(c.c)(e)){var n=e.symbolLayers;n&&n.forEach((e=>{if(e&&"object"===e.type)switch(r){case"tilt":e.tilt=t;break;case"roll":e.roll=t;break;default:e.heading=t}}))}else Object(c.b)(e)&&("simple-marker"!==e.type&&"picture-marker"!==e.type&&"text"!==e.type||(e.angle=t))}},422:function(e,t,r){"use strict";r.d(t,"a",(function(){return m})),r.d(t,"b",(function(){return h})),r.d(t,"c",(function(){return p})),r.d(t,"d",(function(){return y}));var n=r(109),i=r(105),a=r(106),s=r(162),o=r(403),l=r(423),c="picture-fill",u="simple-fill",d="simple-marker",f=new o.a(1e3);function h(e){var t=e.style,r=null;if(e)switch(e.type){case d:"cross"!==t&&"x"!==t&&(r=e.color);break;case u:"solid"===t?r=e.color:"none"!==t&&(r={type:"pattern",x:0,y:0,src:Object(s.a)("esri/symbols/patterns/".concat(t,".png")),width:5,height:5});break;case c:r={type:"pattern",src:e.url,width:Object(i.h)(e.width)*e.xscale,height:Object(i.h)(e.height)*e.yscale,x:Object(i.h)(e.xoffset),y:Object(i.h)(e.yoffset)};break;case"text":r=e.color;break;case"cim":r=Object(l.b)(e)}return r}function p(e,t){var r=e+"-"+t;return void 0!==f.get(r)?Promise.resolve(f.get(r)):Object(a.default)(e,{responseType:"image"}).then((e=>{var n=e.data,i=n.naturalWidth,a=n.naturalHeight,s=document.createElement("canvas");s.width=i,s.height=a;var o=s.getContext("2d");o.fillStyle=t,o.fillRect(0,0,i,a),o.globalCompositeOperation="destination-in",o.drawImage(n,0,0);var l=s.toDataURL();return f.put(r,l),l}))}function y(e){if(!e)return null;var t;switch(e.type){case u:case c:case d:t=y(e.outline);break;case"simple-line":var r=Object(i.h)(e.width);"none"!==e.style&&0!==r&&(t={color:e.color,style:b(e.style),width:r,cap:e.cap,join:"miter"===e.join?Object(i.h)(e.miterLimit):e.join});break;default:t=null}return t}var b=function(){var e={};return function(t){if(e[t])return e[t];var r=t.replace(/-/g,"");return e[t]=r,r}}(),m=new n.a([128,128,128])},423:function(e,t,r){"use strict";r.d(t,"a",(function(){return p})),r.d(t,"b",(function(){return d})),r.d(t,"c",(function(){return s})),r.d(t,"d",(function(){return c})),r.d(t,"e",(function(){return o}));var n=r(91),i=r(109),a=r(320);function s(e){var t=Object(a.k)(e);if("CIMTextSymbol"===t.type)return t.height;var r=0;if(t.symbolLayers)for(var n of t.symbolLayers)Object(a.g)(n)&&n.size>r?r=n.size:Object(a.i)(n)&&n.width>r?r=n.width:Object(a.f)(n);return r}function o(e,t,r){var n=Object(a.k)(e),i=s(e);0!==i?l(n,t/i,!1,r):function(e,t){if("CIMTextSymbol"!==e.type){if(e.symbolLayers)for(var r of e.symbolLayers)switch(r.type){case"CIMPictureMarker":case"CIMVectorMarker":r.size=t;break;case"CIMPictureStroke":case"CIMSolidStroke":r.width=t}}else e.height=t}(n,t)}function l(e,t,r,i){if("CIMTextSymbol"!==e.type){if(r&&e.effects)for(var a of e.effects)u(a,t);if(e.symbolLayers)for(var s of e.symbolLayers)switch(s.type){case"CIMPictureMarker":case"CIMVectorMarker":c(s,t,i);break;case"CIMPictureStroke":case"CIMSolidStroke":null!=i&&i.preserveOutlineWidth||(s.width*=t);break;case"CIMPictureFill":s.height*=t,s.offsetX*=t,s.offsetY*=t;break;case"CIMHatchFill":l(s.lineSymbol,t,!0,Object(n.a)(Object(n.a)({},i),{},{preserveOutlineWidth:!1})),s.offsetX*=t,s.offsetY*=t,s.separation*=t}}else e.height*=t}function c(e,t,r){if(e.markerPlacement&&function(e,t){switch(Object(a.h)(e)&&(e.offset*=t),e.type){case"CIMMarkerPlacementAlongLineRandomSize":case"CIMMarkerPlacementAlongLineSameSize":if(e.customEndingOffset*=t,e.offsetAlongLine*=t,e.placementTemplate&&e.placementTemplate.length){var r=e.placementTemplate.map((e=>e*t));e.placementTemplate=r}break;case"CIMMarkerPlacementAlongLineVariableSize":if(e.maxRandomOffset*=t,e.placementTemplate&&e.placementTemplate.length){var n=e.placementTemplate.map((e=>e*t));e.placementTemplate=n}break;case"CIMMarkerPlacementOnLine":e.startPointOffset*=t;break;case"CIMMarkerPlacementAtExtremities":e.offsetAlongLine*=t;break;case"CIMMarkerPlacementAtMeasuredUnits":case"CIMMarkerPlacementOnVertices":break;case"CIMMarkerPlacementAtRatioPositions":e.beginPosition*=t,e.endPosition*=t;break;case"CIMMarkerPlacementPolygonCenter":e.offsetX*=t,e.offsetY*=t;break;case"CIMMarkerPlacementInsidePolygon":e.offsetX*=t,e.offsetY*=t,e.stepX*=t,e.stepY*=t}}(e.markerPlacement,t),e.offsetX*=t,e.offsetY*=t,e.anchorPoint&&"Absolute"===e.anchorPointUnits&&(e.anchorPoint={x:e.anchorPoint.x*t,y:e.anchorPoint.y*t}),e.size*=t,"CIMVectorMarker"===e.type&&e.markerGraphics)for(var n of e.markerGraphics)e.scaleSymbolsProportionally||l(n.symbol,t,!0,r)}function u(e,t){switch(e.type){case"CIMGeometricEffectArrow":case"CIMGeometricEffectDonut":e.width*=t;break;case"CIMGeometricEffectBuffer":e.size*=t;break;case"CIMGeometricEffectCut":e.beginCut*=t,e.endCut*=t,e.middleCut*=t;break;case"CIMGeometricEffectDashes":if(e.customEndingOffset*=t,e.offsetAlongLine*=t,e.dashTemplate&&e.dashTemplate.length){var r=e.dashTemplate.map((e=>e*t));e.dashTemplate=r}break;case"CIMGeometricEffectExtension":case"CIMGeometricEffectJog":case"CIMGeometricEffectRadial":e.length*=t;break;case"CIMGeometricEffectMove":e.offsetX*=t,e.offsetY*=t;break;case"CIMGeometricEffectOffset":case"CIMGeometricEffectOffsetTangent":e.offset*=t;break;case"CIMGeometricEffectRegularPolygon":e.radius*=t;break;case"CIMGeometricEffectTaperedPolygon":e.fromWidth*=t,e.length*=t,e.toWidth*=t;break;case"CIMGeometricEffectWave":e.amplitude*=t,e.period*=t}}function d(e){var t=[];return f(Object(a.k)(e),t),t.length?new i.a(Object(a.e)(t[0])):null}function f(e,t){var r;r="CIMTextSymbol"===e.type?e.symbol:e;var n="CIMPolygonSymbol"===e.type;if(r.symbolLayers)for(var i of r.symbolLayers)if(!(i.colorLocked||n&&(Object(a.i)(i)||Object(a.g)(i)&&i.markerPlacement&&Object(a.h)(i.markerPlacement))))switch(i.type){case"CIMPictureMarker":case"CIMPictureStroke":case"CIMPictureFill":break;case"CIMVectorMarker":i.markerGraphics.forEach((e=>{f(e.symbol,t)}));break;case"CIMSolidStroke":case"CIMSolidFill":h(t,i.color);break;case"CIMHatchFill":f(i.lineSymbol,t)}}function h(e,t){for(var r of e)if(r.join(".")===t.join("."))return;e.push(t)}function p(e,t){t instanceof i.a||(t=new i.a(t)),y(Object(a.k)(e),t)}function y(e,t){var r;r="CIMTextSymbol"===e.type?e.symbol:e;var n="CIMPolygonSymbol"===e.type;if(r.symbolLayers)for(var i of r.symbolLayers)if(!i.colorLocked&&(!n||!(Object(a.i)(i)||Object(a.g)(i)&&i.markerPlacement&&Object(a.h)(i.markerPlacement)))){var s=t.toArray(0);switch(i.type){case"CIMPictureMarker":case"CIMPictureStroke":case"CIMPictureFill":break;case"CIMVectorMarker":i.markerGraphics.forEach((e=>{y(e.symbol,t)}));break;case"CIMSolidStroke":case"CIMSolidFill":i.color=s;break;case"CIMHatchFill":y(i.lineSymbol,t)}}}},455:function(e,t,r){"use strict";var n=r(158);var i,a=(i=n.a,{setTimeout:(e,t)=>{var r=i.setTimeout(e,t);return{remove:()=>i.clearTimeout(r)}}});t.a=a},466:function(e,t,r){"use strict";function n(e){return"h"in e&&"s"in e&&"v"in e}function i(e){return"l"in e&&"a"in e&&"b"in e}function a(e){return"l"in e&&"c"in e&&"h"in e}function s(e){return"x"in e&&"y"in e&&"z"in e}r.d(t,"a",(function(){return w})),r.d(t,"b",(function(){return g})),r.d(t,"c",(function(){return O})),r.d(t,"d",(function(){return j})),r.d(t,"e",(function(){return v}));var o=[[.4124,.3576,.1805],[.2126,.7152,.0722],[.0193,.1192,.9505]],l=[[3.2406,-1.5372,-.4986],[-.9689,1.8758,.0415],[.0557,-.204,1.057]];function c(e,t){var r,n,i=[];if(e[0].length!==t.length)throw"dimensions do not match";var a=e.length,s=e[0].length,o=0;for(r=0;r<a;r++){for(o=0,n=0;n<s;n++)o+=e[r][n]*t[n];i.push(o)}return i}function u(e){var t=[e.r/255,e.g/255,e.b/255].map((e=>e<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4))),r=c(o,t);return{x:100*r[0],y:100*r[1],z:100*r[2]}}function d(e){var t=c(l,[e.x/100,e.y/100,e.z/100]).map((e=>{var t=e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055;return Math.min(1,Math.max(t,0))}));return{r:Math.round(255*t[0]),g:Math.round(255*t[1]),b:Math.round(255*t[2])}}function f(e){var t=[e.x/95.047,e.y/100,e.z/108.883].map((e=>e>Math.pow(6/29,3)?Math.pow(e,1/3):1/3*Math.pow(29/6,2)*e+4/29));return{l:116*t[1]-16,a:500*(t[0]-t[1]),b:200*(t[1]-t[2])}}function h(e){var t=e.l,r=[(t+16)/116+e.a/500,(t+16)/116,(t+16)/116-e.b/200].map((e=>e>6/29?Math.pow(e,3):3*Math.pow(6/29,2)*(e-4/29)));return{x:95.047*r[0],y:100*r[1],z:108.883*r[2]}}function p(e){return f(u(e))}function y(e){return d(h(e))}function b(e){return function(e){var t=e.l,r=e.a,n=e.b,i=Math.sqrt(r*r+n*n),a=Math.atan2(n,r);return{l:t,c:i,h:a=a>0?a:a+2*Math.PI}}(f(u(e)))}function m(e){return d(h(function(e){var t=e.l,r=e.c,n=e.h;return{l:t,a:r*Math.cos(n),b:r*Math.sin(n)}}(e)))}function v(e){return function(e){return"r"in e&&"g"in e&&"b"in e}(e)?e:a(e)?m(e):i(e)?y(e):s(e)?d(e):n(e)?function(e){var t,r=(e.h+360)%360/60,n=e.s/100,i=e.v/100*255,a=i*n,s=a*(1-Math.abs(r%2-1));switch(Math.floor(r)){case 0:t={r:a,g:s,b:0};break;case 1:t={r:s,g:a,b:0};break;case 2:t={r:0,g:a,b:s};break;case 3:t={r:0,g:s,b:a};break;case 4:t={r:s,g:0,b:a};break;case 5:case 6:t={r:a,g:0,b:s};break;default:t={r:0,g:0,b:0}}return t.r=Math.round(t.r+i-a),t.g=Math.round(t.g+i-a),t.b=Math.round(t.b+i-a),t}(e):e}function g(e){return n(e)?e:function(e){var t=e.r,r=e.g,n=e.b,i=Math.max(t,r,n),a=i-Math.min(t,r,n),s=i,o=0===a?0:i===t?(r-n)/a%6:i===r?(n-t)/a+2:(t-r)/a+4,l=0===a?0:a/s;return o<0&&(o+=6),{h:o*=60,s:l*=100,v:s*=100/255}}(v(e))}function O(e){return i(e)?e:p(v(e))}function j(e){return a(e)?e:b(v(e))}function w(e,t){var r=p(e);return r.l*=1-t,y(r)}},512:function(e,t,r){"use strict";r.d(t,"a",(function(){return y})),r.d(t,"b",(function(){return d})),r.d(t,"c",(function(){return u})),r.d(t,"d",(function(){return f}));var n=r(91),i=r(7),a=(r(80),r(89)),s=r(152),o=r(414),l=null;function c(e,t){return Math.floor(Math.random()*(t-e+1)+e)}function u(e,t,r){var{backgroundColor:n,outline:i,dotSize:a}=e,s=r&&r.swatchSize||22,o=Math.round(s*s/Math.pow(a,2)*.8),u=window.devicePixelRatio,d=document.createElement("canvas"),f=s*u;d.width=f,d.height=f,d.style.width=d.width/u+"px",d.style.height=d.height/u+"px";var h=d.getContext("2d");if(n&&(h.fillStyle=n.toCss(!0),h.fillRect(0,0,f,f),h.fill()),h.fillStyle=t.toCss(!0),l&&l.length/2===o)for(var p=0;p<2*o;p+=2){var y=l[p],b=l[p+1];h.fillRect(y,b,a*u,a*u),h.fill()}else{l=[];for(var m=0;m<2*o;m+=2){var v=c(0,f),g=c(0,f);l.push(v,g),h.fillRect(v,g,a*u,a*u),h.fill()}}i&&(i.color&&(h.strokeStyle=i.color.toCss(!0)),h.lineWidth=i.width,h.strokeRect(0,0,f,f));var O=new Image(s,s);return O.src=d.toDataURL(),O}function d(e,t={}){var r="horizontal"===t.align,n=r?75:24,i=r?24:75,{width:a=n,height:s=i,gradient:o=!0}=t,l=window.devicePixelRatio,c=a*l,u=s*l,d=document.createElement("canvas");d.width=c,d.height=u,d.style.width="".concat(a,"px"),d.style.height="".concat(s,"px");var f=d.getContext("2d"),h=r?c:0,p=r?0:u;if(o){var y=f.createLinearGradient(0,0,h,p),b=1/(e.length-1);e.forEach(((e,t)=>y.addColorStop(t*b,e.toString()))),f.fillStyle=y,f.fillRect(0,0,c,u)}else{var m=r?c/e.length:c,v=r?u:u/e.length,g=0,O=0;for(var j of e)f.fillStyle=j.toString(),f.fillRect(g,O,m,v),g=r?g+m:0,O=r?0:O+v}var w=document.createElement("div");return w.style.width="".concat(a,"px"),w.style.height="".concat(s,"px"),w.appendChild(d),w}function f(e,t){return h.apply(this,arguments)}function h(){return(h=Object(i.a)((function*(e,t){switch(e.type){case"web-style":var{previewWebStyleSymbol:n}=yield r.e(281).then(r.bind(null,695));return n(e,f,t);case"label-3d":case"line-3d":case"mesh-3d":case"point-3d":case"polygon-3d":var{previewSymbol3D:i}=yield Promise.all([r.e(27),r.e(280)]).then(r.bind(null,614));return i(e,t);case"simple-marker":case"simple-line":case"simple-fill":case"picture-marker":case"picture-fill":case"text":var{previewSymbol2D:a}=yield Promise.all([r.e(27),r.e(279)]).then(r.bind(null,696));return a(e,t);case"cim":var{previewCIMSymbol:s}=yield Promise.all([r.e(17),r.e(133)]).then(r.bind(null,706));return s(e,t);default:return}}))).apply(this,arguments)}function p(e){return e&&"opacity"in e?e.opacity*p(e.parent):1}function y(e,t){return b.apply(this,arguments)}function b(){return(b=Object(i.a)((function*(e,t){if(e){var i=p(e.layer||e.sourceLayer);if(Object(a.k)(e.symbol)&&(!Object(a.k)(t)||!0!==t.ignoreGraphicSymbol)){var l="web-style"===e.symbol.type?yield e.symbol.fetchSymbol(Object(a.k)(t)?t.abortOptions:null):e.symbol.clone();return Object(o.a)(l,null,i),l}var c=Object(a.k)(t)&&t.renderer||e.get("layer.renderer")||e.get("sourceLayer.renderer"),u=yield c.getSymbolAsync(e,t);if(u){if(u="web-style"===u.type?yield u.fetchSymbol(Object(a.k)(t)?t.abortOptions:null):u.clone(),!("visualVariables"in c)||"visualVariables"in c&&!c.visualVariables||"visualVariables"in c&&c.visualVariables&&!c.visualVariables.length)return u;if(c.arcadeRequiredForVisualVariables&&(Object(a.j)(t)||Object(a.j)(t.arcade))){var d=Object(n.a)({},Object(a.q)(t));d.arcade=yield Object(s.e)(),t=d}var f=yield Promise.resolve().then(r.bind(null,277)),h=[],y=[],b=[],m=[];for(var v of c.visualVariables)switch(v.type){case"color":h.push(v);break;case"opacity":y.push(v);break;case"rotation":m.push(v);break;case"size":v.target||b.push(v)}var g=!!h.length&&h[h.length-1],O=g?f.getColor(g,e,t):null,j=!!y.length&&y[y.length-1],w=j?f.getOpacity(j,e,t):null;if(null!=i&&(w=null!=w?w*i:i),Object(o.a)(u,O,w),b.length){var _=f.getAllSizes(b,e,t);yield Object(o.d)(u,_)}for(var S of m)Object(o.c)(u,f.getRotationAngle(S,e,t),S.axis);return u}}}))).apply(this,arguments)}},548:function(e,t,r){"use strict";function n(e,t,r){return t.flatten((({sublayers:e})=>e)).length!==e.length||(!!e.some((e=>e.originIdOf("minScale")>r||e.originIdOf("maxScale")>r||e.originIdOf("renderer")>r||e.originIdOf("labelingInfo")>r||e.originIdOf("opacity")>r||e.originIdOf("labelsVisible")>r||e.originIdOf("source")>r))||!a(e,t))}function i(e,t,r){return!!e.some((e=>{var t=e.source;return!(!t||"map-layer"===t.type&&t.mapLayerId===e.id&&(!t.gdbVersion||t.gdbVersion===r.gdbVersion))||e.originIdOf("renderer")>2||e.originIdOf("labelingInfo")>2||e.originIdOf("opacity")>2||e.originIdOf("labelsVisible")>2}))||!a(e,t)}function a(e,t){if(!e||!e.length)return!0;var r=t.slice().reverse().flatten((({sublayers:e})=>e&&e.toArray().reverse())).map((e=>e.id)).toArray();if(e.length>r.length)return!1;var n=0,i=r.length;for(var{id:a}of e){for(;n<i&&r[n]!==a;)n++;if(n>=i)return!1}return!0}function s(e){return!!e&&e.some((e=>null!=e.minScale||e.layerDefinition&&null!=e.layerDefinition.minScale))}r.d(t,"a",(function(){return i})),r.d(t,"b",(function(){return s})),r.d(t,"c",(function(){return n}))},614:function(e,t,r){"use strict";r.r(t),r.d(t,"getPatternDescriptor",(function(){return x})),r.d(t,"getSymbolLayerFill",(function(){return L})),r.d(t,"previewSymbol3D",(function(){return T}));var n=r(91),i=r(7),a=(r(80),r(89)),s=r(81),o=r(93),l=r(94),c=r(105),u=r(885),d=r(162),f=r(886),h=r(466),p=r(801),y=r(422),b=r(414),m=r(824),v=r(825),g=22,O=120,j=s.a.getLogger("esri.symbols.support.previewSymbol3D");function w(e){var t=e.outline,r=Object(a.k)(e.material)?e.material.color:null,n=Object(a.k)(r)?r.toHex():null;if(Object(a.j)(t))return"fill"===e.type&&"#ffffff"===n?{color:"#bdc3c7",width:.75}:null;var i=Object(c.h)(t.size)||0;return{color:"rgba("+(Object(a.k)(t.color)?t.color.toRgba():"255,255,255,1")+")",width:Math.min(i,80)}}function _(e,t=1){var r=e.a,n=Object(h.b)(e),i=n.h,a=n.s/t,s=100-(100-n.v)/t,{r:o,g:l,b:c}=Object(h.e)({h:i,s:a,v:s});return[o,l,c,r]}function S(e){return"water"===e.type?Object(a.j)(e.color)?null:e.color:Object(a.j)(e.material)||Object(a.j)(e.material.color)?null:e.material.color}function L(e,t=0){var r=S(e);if(!r){if("fill"===e.type)return null;var n=y.a.r,i=Object(m.b)(n,t);return[i,i,i,100]}for(var a=r.toRgba(),s=0;s<3;s++)a[s]=Object(m.b)(a[s],t);return a}function x(e,t){return k.apply(this,arguments)}function k(){return(k=Object(i.a)((function*(e,t){var r=e.style;return"none"===r?null:{type:"pattern",x:0,y:0,src:yield Object(y.c)(Object(d.a)("esri/symbols/patterns/".concat(r,".png")),t.toCss(!0)),width:5,height:5}}))).apply(this,arguments)}function I(e){return e.outline?w(e):{color:"rgba(0, 0, 0, 1)",width:1.5}}function A(e,t){var r=S(e);if(!r)return null;var n="rgba(";return n+=Object(m.b)(r.r,t)+",",n+=Object(m.b)(r.g,t)+",",(n+=Object(m.b)(r.b,t)+",")+r.a+");"}function M(e,t){var r=A(e,t);return r?{color:r,width:Math.min(e.size?Object(c.h)(e.size):.75,80)}:{}}function E(e,t,r){var n=.75*r;return{type:"linear",x1:n?.25*n:0,y1:n?.5*n:0,x2:n||4,y2:n?.5*n:4,colors:[{color:e,offset:0},{color:t,offset:1}]}}function C(e,t){var r,n=t&&t.size?Object(c.h)(t.size):null,i=t&&t.maxSize?Object(c.h)(t.maxSize):null,a=t&&t.disableUpsampling,s=e.symbolLayers,o=[],h=0,y=0,_=s.getItemAt(s.length-1);return _&&"icon"===_.type&&(r=_.size&&Object(c.h)(_.size)),s.forEach((s=>{if("icon"===s.type||"object"===s.type){var l="icon"===s.type?s.size&&Object(c.h)(s.size):0,j=n||l?Math.ceil(Math.min(n||l,i||O)):g;if(s&&s.resource&&s.resource.href){var _=function(e,t){var r=t&&t.resource,n=r&&r.href;if(e.thumbnail&&e.thumbnail.url)return Promise.resolve(e.thumbnail.url);if(n&&"object"!==t.type)return Promise.resolve(Object(b.f)(e,t));var i=Object(d.a)("esri/images/Legend/legend3dsymboldefault.png");return e.styleOrigin&&(e.styleOrigin.styleName||e.styleOrigin.styleUrl)?Object(p.resolveWebStyleSymbol)(e.styleOrigin,{portal:e.styleOrigin.portal},"webRef").catch((e=>e)).then((e=>{var t;return(null==e||null==(t=e.thumbnail)?void 0:t.url)||i})):Promise.resolve(i)}(e,s).then((function(e){var t=s.get("material.color"),r=function(e){return"icon"===e.type?"multiply":"tint"}(s);return Object(v.b)(e,j,t,r,a)})).then((function(e){var t=e.width,r=e.height;return h=Math.max(h,t),y=Math.max(y,r),[{shape:{type:"image",x:0,y:0,width:t,height:r,src:e.url},fill:null,stroke:null}]}));o.push(_)}else{var S,x=j;"icon"===s.type&&r&&n&&(x=j*(l/r));var k="tall"===(null==t?void 0:t.symbolConfig)||(null==t||null==(S=t.symbolConfig)?void 0:S.isTall)||"object"===s.type&&function(e){var t=e.depth,r=e.height,n=e.width;return n&&t&&r&&n===t&&n<r}(s);h=Math.max(h,k?20:x),y=Math.max(y,x),o.push(Promise.resolve(function(e,t,r){var n=[];if(!e)return n;switch(e.type){case"icon":var i=t,a=t;switch(e.resource&&e.resource.primitive||u.b){case"circle":n.push({shape:{type:"circle",cx:0,cy:0,r:.5*t},fill:L(e,0),stroke:w(e)});break;case"square":n.push({shape:{type:"path",path:[{command:"M",values:[0,a]},{command:"L",values:[0,0]},{command:"L",values:[i,0]},{command:"L",values:[i,a]},{command:"Z",values:[]}]},fill:L(e,0),stroke:w(e)});break;case"triangle":n.push({shape:{type:"path",path:[{command:"M",values:[0,a]},{command:"L",values:[.5*i,0]},{command:"L",values:[i,a]},{command:"Z",values:[]}]},fill:L(e,0),stroke:w(e)});break;case"cross":n.push({shape:{type:"path",path:[{command:"M",values:[.5*i,0]},{command:"L",values:[.5*i,a]},{command:"M",values:[0,.5*a]},{command:"L",values:[i,.5*a]}]},stroke:I(e)});break;case"x":n.push({shape:{type:"path",path:[{command:"M",values:[0,0]},{command:"L",values:[i,a]},{command:"M",values:[i,0]},{command:"L",values:[0,a]}]},stroke:I(e)});break;case"kite":n.push({shape:{type:"path",path:[{command:"M",values:[0,.5*a]},{command:"L",values:[.5*i,0]},{command:"L",values:[i,.5*a]},{command:"L",values:[.5*i,a]},{command:"Z",values:[]}]},fill:L(e,0),stroke:w(e)})}break;case"object":switch(e.resource&&e.resource.primitive||f.b){case"cone":var s=E(L(e,0),L(e,-.6),r?20:t),o=Object(m.c)(t,r);n.push({shape:o[0],fill:s}),n.push({shape:o[1],fill:s});break;case"inverted-cone":var l=L(e,0),c=E(l,L(e,-.6),t),d=Object(m.h)(t);n.push({shape:d[0],fill:c}),n.push({shape:d[1],fill:l});break;case"cube":var h=Object(m.d)(t,r);n.push({shape:h[0],fill:L(e,0)}),n.push({shape:h[1],fill:L(e,-.3)}),n.push({shape:h[2],fill:L(e,-.5)});break;case"cylinder":var p=E(L(e,0),L(e,-.6),r?20:t),y=Object(m.e)(t,r);n.push({shape:y[0],fill:p}),n.push({shape:y[1],fill:p}),n.push({shape:y[2],fill:L(e,0)});break;case"diamond":var b=Object(m.f)(t);n.push({shape:b[0],fill:L(e,-.3)}),n.push({shape:b[1],fill:L(e,0)}),n.push({shape:b[2],fill:L(e,-.3)}),n.push({shape:b[3],fill:L(e,-.7)});break;case"sphere":var v=E(L(e,0),L(e,-.6));v.x1=0,v.y1=0,v.x2=.25*t,v.y2=.25*t,n.push({shape:{type:"circle",cx:0,cy:0,r:.5*t},fill:v});break;case"tetrahedron":var g=Object(m.j)(t);n.push({shape:g[0],fill:L(e,-.3)}),n.push({shape:g[1],fill:L(e,0)}),n.push({shape:g[2],fill:L(e,-.6)})}}return n}(s,x,k)))}}})),Object(l.j)(o).then((function(e){var r=[];return e.forEach((function(e){e.value?r.push(e.value):e.error&&j.warn("error while building swatchInfo!",e.error)})),Object(v.a)(r,[h,y],{node:t&&t.node,scale:!1,opacity:t&&t.opacity})}))}function V(){return(V=Object(i.a)((function*(e,t){for(var r="mesh-3d"===e.type,i=e.symbolLayers,s=t&&t.size?Object(c.h)(t.size):null,o=t&&t.maxSize?Object(c.h)(t.maxSize):null,l=s||g,u=[],d=0,f=0,h=!1,p=0;p<i.length;p++){var y=i.getItemAt(p),b=[];if(!r||"fill"===y.type){var j=m.l.fill[0];switch(y.type){case"fill":var k=w(y),I=Math.min(l,o||O);d=Math.max(d,I),f=Math.max(f,I),h=!0;var A=L(y,0),E="pattern"in y&&y.pattern,C=S(y);!r&&Object(a.k)(E)&&"style"===E.type&&"solid"!==E.style&&C&&(A=yield x(E,C)),b.push({shape:j,fill:A,stroke:k});break;case"line":var V={stroke:M(y,0),shape:j};d=Math.max(d,g),f=Math.max(f,g),b.push(V);break;case"extrude":var T=Object(n.a)({join:"round"},M(y,-.4)),F=L(y,0),z=L(y,-.2),P=Math.min(l,o||O),R=Object(m.g)(P);T.width=1,b.push({shape:R[0],fill:z,stroke:T}),b.push({shape:R[1],fill:z,stroke:T}),b.push({shape:R[2],fill:F,stroke:T});var N=.7*g+.5*P;d=Math.max(d,22),f=Math.max(f,N);break;case"water":var D=S(y),U=_(D),B=_(D,2),q=_(D,3),H=Object(m.k)();h=!0,b.push({shape:H[0],fill:U}),b.push({shape:H[1],fill:B}),b.push({shape:H[2],fill:q});var G=Math.min(l,o||O);d=Math.max(d,G),f=Math.max(f,G)}u.push(b)}}return Promise.resolve(Object(v.a)(u,[d,f],{node:t&&t.node,scale:h,opacity:t&&t.opacity}))}))).apply(this,arguments)}function T(e,t){if(0===e.symbolLayers.length)return Promise.reject(new o.a("symbolPreview: renderPreviewHTML3D","No symbolLayers in the symbol."));var r=null;switch(e.type){case"point-3d":r=C(e,t);break;case"line-3d":r=function(e,t){var r,i=e.symbolLayers,a=[],s=Object(b.h)(e),o=t&&t.size?Object(c.h)(t.size):null,l=(t&&t.maxSize?Object(c.h)(t.maxSize):null)||80,u=0,d=0;return i.forEach(((e,t)=>{if(e&&("line"===e.type||"path"===e.type)){var i=[];switch(e.type){case"line":var s=M(e,0),c=s&&s.width||0;0===t&&(r=c);var f=Math.min(o||c,l),h=0===t?f:o?f*(c/r):f,p=h>20?2*h:40;d=Math.max(d,h),u=Math.max(u,p),s.width=h,i.push({shape:{type:"path",path:[{command:"M",values:[0,.5*d]},{command:"L",values:[u,.5*d]}]},stroke:s});break;case"path":var y=Math.min(o||g,l),b=L(e,0),v=L(e,-.2),O=A(e,-.4),j=O?{color:O,width:1}:{};if("quad"===e.profile){var w,_,S=null!=(w=e.width)?w:e.size,x=null!=(_=e.height)?_:e.size,k=Object(m.i)(S&&x?S/x:1,0===x,0===S),I=Object(n.a)(Object(n.a)({},j),{},{join:"bevel"});i.push({shape:k[0],fill:v,stroke:I}),i.push({shape:k[1],fill:v,stroke:I}),i.push({shape:k[2],fill:b,stroke:I})}else i.push({shape:m.l.pathSymbol3DLayer[0],fill:v,stroke:j}),i.push({shape:m.l.pathSymbol3DLayer[1],fill:b,stroke:j});d=Math.max(d,y),u=d}a.push(i)}})),Promise.resolve(Object(v.a)(a,[u,d],{node:t&&t.node,scale:s,opacity:t&&t.opacity}))}(e,t);break;case"polygon-3d":case"mesh-3d":r=function(e,t){return V.apply(this,arguments)}(e,t)}return r||Promise.reject(new o.a("symbolPreview: swatchInfo3D","symbol not supported."))}},684:function(e,t,r){"use strict";r.d(t,"a",(function(){return f}));var n=r(91),i=r(82),a=(r(80),r(81),r(88),r(85)),s=r(84),o=(r(83),r(86),r(87),r(97)),l=r(181),c=r(167),u=r(548),d={visible:"visibleSublayers",definitionExpression:"layerDefs",labelingInfo:"hasDynamicLayers",labelsVisible:"hasDynamicLayers",opacity:"hasDynamicLayers",minScale:"visibleSublayers",maxScale:"visibleSublayers",renderer:"hasDynamicLayers",source:"hasDynamicLayers"},f=class extends(Object(c.b)(o.a)){constructor(e){super(e),this.scale=0}destroy(){this.layer=null}get dynamicLayers(){if(!this.hasDynamicLayers)return null;var e=this.visibleSublayers.map((e=>e.toExportImageJSON()));return e.length?JSON.stringify(e):null}get hasDynamicLayers(){return this.layer&&Object(u.a)(this.visibleSublayers,this.layer.serviceSublayers,this.layer)}set layer(e){this._get("layer")!==e&&(this._set("layer",e),this.handles.remove("layer"),e&&this.handles.add([e.allSublayers.on("change",(()=>this.notifyChange("visibleSublayers"))),e.on("sublayer-update",(e=>this.notifyChange(d[e.propertyName])))],"layer"))}get layers(){var e=this.visibleSublayers;return e?e.length?"show:"+e.map((e=>e.id)).join(","):"show:-1":null}get layerDefs(){var e=this.visibleSublayers.filter((e=>null!=e.definitionExpression));return e.length?JSON.stringify(e.reduce(((e,t)=>(e[t.id]=t.definitionExpression,e)),{})):null}get version(){this.commitProperty("layers"),this.commitProperty("layerDefs"),this.commitProperty("dynamicLayers"),this.commitProperty("timeExtent");var e=this.layer;return e&&(e.commitProperty("dpi"),e.commitProperty("imageFormat"),e.commitProperty("imageTransparency"),e.commitProperty("gdbVersion")),(this._get("version")||0)+1}get visibleSublayers(){var e=[];if(!this.layer)return e;var t=this.layer.sublayers,r=t=>{var n=this.scale,i=0===n,a=0===t.minScale||n<=t.minScale,s=0===t.maxScale||n>=t.maxScale;t.visible&&(i||a&&s)&&(t.sublayers?t.sublayers.forEach(r):e.unshift(t))};t&&t.forEach(r);var n=this._get("visibleSublayers");return!n||n.length!==e.length||n.some(((t,r)=>e[r]!==t))?e:n}toJSON(){var e=this.layer,t={dpi:e.dpi,format:e.imageFormat,transparent:e.imageTransparency,gdbVersion:e.gdbVersion||null};return this.hasDynamicLayers&&this.dynamicLayers?t.dynamicLayers=this.dynamicLayers:t=Object(n.a)(Object(n.a)({},t),{},{layers:this.layers,layerDefs:this.layerDefs}),t}};Object(i.a)([Object(a.b)({readOnly:!0})],f.prototype,"dynamicLayers",null),Object(i.a)([Object(a.b)({readOnly:!0})],f.prototype,"hasDynamicLayers",null),Object(i.a)([Object(a.b)()],f.prototype,"layer",null),Object(i.a)([Object(a.b)({readOnly:!0})],f.prototype,"layers",null),Object(i.a)([Object(a.b)({readOnly:!0})],f.prototype,"layerDefs",null),Object(i.a)([Object(a.b)({type:Number})],f.prototype,"scale",void 0),Object(i.a)([Object(a.b)(l.a)],f.prototype,"timeExtent",void 0),Object(i.a)([Object(a.b)({readOnly:!0})],f.prototype,"version",null),Object(i.a)([Object(a.b)({readOnly:!0})],f.prototype,"visibleSublayers",null),f=Object(i.a)([Object(s.a)("esri.layers.mixins.ExportImageParameters")],f)},750:function(e,t,r){"use strict";r.d(t,"a",(function(){return E})),r.d(t,"b",(function(){return j})),r.d(t,"c",(function(){return w})),r.d(t,"d",(function(){return M})),r.d(t,"e",(function(){return C})),r.d(t,"f",(function(){return S})),r.d(t,"g",(function(){return V})),r.d(t,"h",(function(){return O}));var n=r(80),i=(r(81),r(109)),a=(r(114),r(129)),s=r(321),o=r(290),l=0,c=0,u=Object(n.a)("android"),d=Object(n.a)("chrome")||u&&u>=4?"auto":"optimizeLegibility",f={m:2,l:2,h:1,v:1,c:6,s:4,q:4,t:2,a:7,z:0},h=/([A-DF-Za-df-z])|([-+]?\d*[.]?\d+(?:[eE][-+]?\d+)?)/g,p={},y={},b={solid:"none",shortdash:[4,1],shortdot:[1,1],shortdashdot:[4,1,1,1],shortdashdotdot:[4,1,1,1,1,1],dot:[1,3],dash:[4,3],longdash:[8,3],dashdot:[4,3,1,3],longdashdot:[8,3,1,3],longdashdotdot:[8,3,1,3,1,3]},m=Math.PI;function v(e,t){var r=e*(m/180);return Math.abs(t*Math.sin(r))+Math.abs(t*Math.cos(r))}function g(e){return e.map((e=>"".concat(e.command," ").concat(e.values.join(" ")))).join(" ").trim()}function O(e,t,r,n){if(e){if("circle"===e.type)return Object(a.a)("circle",{fill:t,"fill-rule":"evenodd",stroke:r.color,"stroke-width":r.width,"stroke-linecap":r.cap,"stroke-linejoin":r.join,"stroke-dasharray":r.dashArray,"stroke-miterlimit":"4",cx:e.cx,cy:e.cy,r:e.r});if("ellipse"===e.type)return Object(a.a)("ellipse",{fill:t,"fill-rule":"evenodd",stroke:r.color,"stroke-width":r.width,"stroke-linecap":r.cap,"stroke-linejoin":r.join,"stroke-dasharray":r.dashArray,"stroke-miterlimit":"4",cx:e.cx,cy:e.cy,rx:e.rx,ry:e.ry});if("rect"===e.type)return Object(a.a)("rect",{fill:t,"fill-rule":"evenodd",stroke:r.color,"stroke-width":r.width,"stroke-linecap":r.cap,"stroke-linejoin":r.join,"stroke-dasharray":r.dashArray,"stroke-miterlimit":"4",x:e.x,y:e.y,width:e.width,height:e.height});if("image"===e.type)return Object(a.a)("image",{href:e.src,x:e.x,y:e.y,width:e.width,height:e.height,preserveAspectRatio:"none"});if("path"===e.type){var i="string"!=typeof e.path?g(e.path):e.path;return Object(a.a)("path",{fill:t,"fill-rule":"evenodd",stroke:r.color,"stroke-width":r.width,"stroke-linecap":r.cap,"stroke-linejoin":r.join,"stroke-dasharray":r.dashArray,"stroke-miterlimit":"4",d:i})}if("text"===e.type)return Object(a.a)("text",{fill:t,"fill-rule":"evenodd",stroke:r.color,"stroke-width":r.width,"stroke-linecap":r.cap,"stroke-linejoin":r.join,"stroke-dasharray":r.dashArray,"stroke-miterlimit":"4","text-anchor":n.align,"text-decoration":n.decoration,kerning:n.kerning,rotate:n.rotate,"text-rendering":d,"font-style":n.font.style,"font-variant":n.font.variant,"font-weight":n.font.weight,"font-size":n.font.size,"font-family":n.font.family,x:e.x,y:e.y},e.text)}return null}function j(e){var t={fill:"none",pattern:null,linearGradient:null};if(e)if("type"in e&&"pattern"===e.type){var r="patternId-"+ ++l;t.fill="url(#".concat(r,")"),t.pattern={id:r,x:e.x,y:e.y,width:e.width,height:e.height,image:{x:0,y:0,width:e.width,height:e.height,href:e.src}}}else if("type"in e&&"linear"===e.type){var n="linearGradientId-"+ ++c;t.fill="url(#".concat(n,")"),t.linearGradient={id:n,x1:e.x1,y1:e.y1,x2:e.x2,y2:e.y2,stops:e.colors.map((e=>({offset:e.offset,color:e.color&&new i.a(e.color).toString()})))}}else if(e){var a=new i.a(e);t.fill=a.toString()}return t}function w(e){var t={color:"none",width:1,cap:"butt",join:"4",dashArray:"none"};if(e&&(null!=e.width&&(t.width=e.width),e.cap&&(t.cap=e.cap),e.join&&(t.join=e.join.toString()),e.color&&(t.color=new i.a(e.color).toString()),e.style)){var r=null;if(e.style in b&&(r=b[e.style]),Array.isArray(r)){r=r.slice(0);for(var n=0;n<r.length;++n)r[n]*=e.width;if("butt"!==e.cap){for(var a=0;a<r.length;a+=2)r[a]-=e.width,r[a]<1&&(r[a]=1);for(var s=1;s<r.length;s+=2)r[s]+=e.width}r=r.join(",")}t.dashArray=r}return t}function _(e,t){var r={align:null,decoration:null,kerning:null,rotate:null,font:{style:null,variant:null,weight:null,size:null,family:null}};return e&&(r.align=e.align,r.decoration=e.decoration,r.kerning=e.kerning?"auto":"0",r.rotate=e.rotated?"90":"0",r.font.style=t.style||"normal",r.font.variant=t.variant||"normal",r.font.weight=t.weight||"normal",r.font.size=t.size&&t.size.toString()||"10pt",r.font.family=t.family||"serif"),r}function S(e){var{pattern:t,linearGradient:r}=e;if(t)return Object(a.a)("pattern",{id:t.id,patternUnits:"userSpaceOnUse",x:t.x,y:t.y,width:t.width,height:t.height},Object(a.a)("image",{x:t.image.x,y:t.image.y,width:t.image.width,height:t.image.height,href:t.image.href}));if(r){var n=r.stops.map(((e,t)=>Object(a.a)("stop",{key:"".concat(t,"-stop"),offset:e.offset,"stop-color":e.color})));return Object(a.a)("linearGradient",{id:r.id,gradientUnits:"userSpaceOnUse",x1:r.x1,y1:r.y1,x2:r.x2,y2:r.y2},n)}return null}function L(e,t,r){return Object(s.h)(e,Object(s.d)(e),[t,r])}function x(e,t,r,n,i){return Object(s.g)(e,Object(s.d)(e),[t,r]),e[4]=e[4]*t-n*t+n,e[5]=e[5]*r-i*r+i,e}function k(e,t){p&&"left"in p?(p.left>e&&(p.left=e),p.right<e&&(p.right=e),p.top>t&&(p.top=t),p.bottom<t&&(p.bottom=t)):p={left:e,bottom:t,right:e,top:t}}function I(e){var t,r=e.args,n=r.length;switch(e.action){case"M":case"L":case"C":case"S":case"Q":case"T":for(t=0;t<n;t+=2)k(r[t],r[t+1]);y.x=r[n-2],y.y=r[n-1];break;case"H":for(t=0;t<n;++t)k(r[t],y.y);y.x=r[n-1];break;case"V":for(t=0;t<n;++t)k(y.x,r[t]);y.y=r[n-1];break;case"m":var i=0;"x"in y||(k(y.x=r[0],y.y=r[1]),i=2);for(t=i;t<n;t+=2)k(y.x+=r[t],y.y+=r[t+1]);break;case"l":case"t":for(t=0;t<n;t+=2)k(y.x+=r[t],y.y+=r[t+1]);break;case"h":for(t=0;t<n;++t)k(y.x+=r[t],y.y);break;case"v":for(t=0;t<n;++t)k(y.x,y.y+=r[t]);break;case"c":for(t=0;t<n;t+=6)k(y.x+r[t],y.y+r[t+1]),k(y.x+r[t+2],y.y+r[t+3]),k(y.x+=r[t+4],y.y+=r[t+5]);break;case"s":case"q":for(t=0;t<n;t+=4)k(y.x+r[t],y.y+r[t+1]),k(y.x+=r[t+2],y.y+=r[t+3]);break;case"A":for(t=0;t<n;t+=7)k(r[t+5],r[t+6]);y.x=r[n-2],y.y=r[n-1];break;case"a":for(t=0;t<n;t+=7)k(y.x+=r[t+5],y.y+=r[t+6])}}function A(e,t,r){var n,i=f[e.toLowerCase()];"number"==typeof i&&(i?t.length>=i&&(n={action:e,args:t.slice(0,t.length-t.length%i)},r.push(n),I(n)):(n={action:e,args:[]},r.push(n),I(n)))}function M(e){var t={x:0,y:0,width:0,height:0};if("circle"===e.type)t.x=e.cx-e.r,t.y=e.cy-e.r,t.width=2*e.r,t.height=2*e.r;else if("ellipse"===e.type)t.x=e.cx-e.rx,t.y=e.cy-e.ry,t.width=2*e.rx,t.height=2*e.ry;else if("image"===e.type||"rect"===e.type)t.x=e.x,t.y=e.y,t.width=e.width,t.height=e.height;else if("path"===e.type){var r=function(e){var t=("string"!=typeof e.path?g(e.path):e.path).match(h),r=[];if(p={},y={},!t)return null;for(var n="",i=[],a=t.length,s=0;s<a;++s){var o=t[s],l=parseFloat(o);isNaN(l)?(n&&A(n,i,r),i=[],n=o):i.push(l)}A(n,i,r);var c={x:0,y:0,width:0,height:0};return p&&"left"in p&&(c.x=p.left,c.y=p.top,c.width=p.right-p.left,c.height=p.bottom-p.top),c}(e);t.x=r.x,t.y=r.y,t.width=r.width,t.height=r.height}return t}function E(e){var t={x:0,y:0,width:0,height:0},r=null,n=Number.NEGATIVE_INFINITY,i=Number.NEGATIVE_INFINITY;for(var a of e)r?(r.x=Math.min(r.x,a.x),r.y=Math.min(r.y,a.y),n=Math.max(n,a.x+a.width),i=Math.max(i,a.y+a.height)):((r=t).x=a.x,r.y=a.y,n=a.x+a.width,i=a.y+a.height);return r&&(r.width=n-r.x,r.height=i-r.y),r}function C(e,t,r,n,i,a,l,c){var u=(l&&a?v(a,t):t)/2,d=(l&&a?v(a,r):r)/2,f=e.width+n,h=e.height+n,p=Object(o.a)(),y=Object(o.a)(),b=!1;if(i&&0!==f&&0!==h){var m=f/h,g=t>r?t:r,O=1,j=1;isNaN(g)||(m>1?(O=g/f,j=g/m/h):(j=g/h,O=g*m/f)),Object(s.e)(y,y,x(p,O,j,u,d)),b=!0}var w=e.x+(f-n)/2,_=e.y+(h-n)/2;if(Object(s.e)(y,y,L(p,u-w,d-_)),!b&&(f>t||h>r)){var S=f/t>h/r,k=(S?t:r)/(S?f:h);Object(s.e)(y,y,x(p,k,k,w,_))}return a&&Object(s.e)(y,y,function(e,t,r,n){var i=t%360*Math.PI/180;Object(s.f)(e,Object(s.d)(e),i);var a=Math.cos(i),o=Math.sin(i),l=e[4],c=e[5];return e[4]=l*a-c*o+n*o-r*a+r,e[5]=c*a+l*o-r*o-n*a+n,e}(p,a,w,_)),c&&Object(s.e)(y,y,L(p,c[0],c[1])),"matrix(".concat(y[0],",").concat(y[1],",").concat(y[2],",").concat(y[3],",").concat(y[4],",").concat(y[5],")")}function V(e,t,r,n){var i=[],s=[];for(var o of e){var l=[],c=[],u=0,d=0,f=0;for(var h of o){var{shape:p,fill:y,stroke:b,font:m,offset:g}=h;u+=b&&b.width||0;var L=j(y),x=w(b),k="text"===p.type?_(p,m):null;i.push(S(L)),l.push(O(p,L.fill,x,k)),c.push(M(p)),g&&(d+=g[0],f+=g[1])}var I=C(E(c),t,r,u,null==n?void 0:n.scale,null==n?void 0:n.rotation,null==n?void 0:n.useRotationSize,[d,f]);s.push(Object(a.a)("g",{transform:I},l))}return null!=n&&n.useRotationSize&&null!=n&&n.rotation&&(t=v(null==n?void 0:n.rotation,t),r=v(null==n?void 0:n.rotation,r)),Object(a.a)("svg",{xmlns:"http://www.w3.org/2000/svg",width:t,height:r},Object(a.a)("defs",null,i),s)}},80:function(e,t,r){"use strict";var n,i,a,s,o,l=r(91),c=r(158);function u(e){return"function"==typeof a[e]?a[e]=a[e](c.a):a[e]}a=null!=(n=c.a.dojoConfig)&&n.has||null!=(i=c.a.esriConfig)&&i.has?Object(l.a)(Object(l.a)({},null==(s=c.a.dojoConfig)?void 0:s.has),null==(o=c.a.esriConfig)?void 0:o.has):{},u.add=(e,t,r,n)=>((n||void 0===a[e])&&(a[e]=t),r&&u(e)),u.cache=a,u.add("esri-deprecation-warnings",!0),(()=>{u.add("host-webworker",void 0!==c.a.WorkerGlobalScope&&self instanceof c.a.WorkerGlobalScope);var e="undefined"!=typeof window&&"undefined"!=typeof location&&"undefined"!=typeof document&&window.location===location&&window.document===document;if(u.add("host-browser",e),u.add("host-node","object"==typeof c.a.process&&c.a.process.versions&&c.a.process.versions.node&&c.a.process.versions.v8),u.add("dom",e),u("host-browser")){var t=navigator,r=t.userAgent,n=t.appVersion,i=parseFloat(n);if(u.add("wp",parseFloat(r.split("Windows Phone")[1])||void 0),u.add("msapp",parseFloat(r.split("MSAppHost/")[1])||void 0),u.add("khtml",n.indexOf("Konqueror")>=0?i:void 0),u.add("edge",parseFloat(r.split("Edge/")[1])||void 0),u.add("opr",parseFloat(r.split("OPR/")[1])||void 0),u.add("webkit",!u("wp")&&!u("edge")&&parseFloat(r.split("WebKit/")[1])||void 0),u.add("chrome",!u("edge")&&!u("opr")&&parseFloat(r.split("Chrome/")[1])||void 0),u.add("android",!u("wp")&&parseFloat(r.split("Android ")[1])||void 0),u.add("safari",!(n.indexOf("Safari")>=0)||u("wp")||u("chrome")||u("android")||u("edge")||u("opr")?void 0:parseFloat(n.split("Version/")[1])),u.add("mac",n.indexOf("Macintosh")>=0),u.add("quirks","BackCompat"===document.compatMode),!u("wp")&&r.match(/(iPhone|iPod|iPad)/)){var a=RegExp.$1.replace(/P/,"p"),s=r.match(/OS ([\d_]+)/)?RegExp.$1:"1",o=parseFloat(s.replace(/_/,".").replace(/_/g,""));u.add(a,o),u.add("ios",o)}u.add("trident",parseFloat(n.split("Trident/")[1])||void 0),u.add("svg","undefined"!=typeof SVGAngle),u("webkit")||(r.indexOf("Opera")>=0&&u.add("opera",i>=9.8&&parseFloat(r.split("Version/")[1])||i),!(r.indexOf("Gecko")>=0)||u("wp")||u("khtml")||u("trident")||u("edge")||u.add("mozilla",i),u("mozilla")&&u.add("ff",parseFloat(r.split("Firefox/")[1]||r.split("Minefield/")[1])||void 0))}})(),(()=>{if(c.a.navigator){var e=navigator.userAgent,t=e.match(/Android|webOS|iPhone|iPad|iPod|BlackBerry|Opera Mini|IEMobile/i),r=e.match(/iPhone/i);t&&u.add("esri-mobile",t),r&&u.add("esri-iPhone",r),u.add("esri-geolocation",!!navigator.geolocation)}u.add("esri-canvas-svg-support",!u("trident")),u.add("esri-wasm","WebAssembly"in c.a),u.add("esri-shared-array-buffer",(()=>{var e="SharedArrayBuffer"in c.a,t=!1===c.a.crossOriginIsolated;return e&&!t})),u.add("esri-atomics","Atomics"in c.a),u.add("esri-workers","Worker"in c.a),u.add("esri-text-decoder","TextDecoder"in c.a),u.add("esri-text-encoder","TextEncoder"in c.a),u.add("featurelayer-snapshot-enabled",!0),u.add("featurelayer-snapshot-point-min-threshold",8e4),u.add("featurelayer-snapshot-point-max-threshold",4e5),u.add("featurelayer-snapshot-point-coverage",.1),u.add("featurelayer-advanced-symbols",!1),u.add("featurelayer-pbf",!0),u.add("featurelayer-pbf-statistics",!1),u.add("feature-layers-workers",!0),u.add("mapview-transitions-duration",200),u.add("mapserver-pbf-enabled",!1),u("host-webworker")||u("host-browser")&&(u.add("csp-restrictions",(()=>{try{new Function}catch(e){return!0}return!1})),u.add("esri-image-decode",(()=>{if("decode"in new Image){var e=new Image;return e.src='data:image/svg+xml;charset=UTF-8,<svg version="1.1" xmlns="http://www.w3.org/2000/svg"></svg>',void e.decode().then((()=>{u.add("esri-image-decode",!0,!0,!0)})).catch((()=>{u.add("esri-image-decode",!1,!0,!0)}))}return!1})),u.add("esri-url-encodes-apostrophe",(()=>{var e=c.a.document.createElement("a");return e.href="?'",e.href.indexOf("?%27")>-1})),u.add("vectortilelayer-max-buffers",(()=>u("ff")?160:Number.POSITIVE_INFINITY)))})(),t.a=u},81:function(e,t,r){"use strict";r(80);var n=r(159),i=r(89),a=r(143),s={info:0,warn:1,error:2,none:3};class o{constructor(e){this.level=null,this._module="",this._parent=null,this.writer=null,this._loggedMessages={error:new Map,warn:new Map,info:new Map},null!=e.level&&(this.level=e.level),null!=e.writer&&(this.writer=e.writer),this._module=e.module,o._loggers[this.module]=this;var t=this.module.lastIndexOf(".");-1!==t&&(this._parent=o.getLogger(this.module.slice(0,t)))}get module(){return this._module}get parent(){return this._parent}error(...e){this._log("error","always",...e)}warn(...e){this._log("warn","always",...e)}info(...e){this._log("info","always",...e)}errorOnce(...e){this._log("error","once",...e)}warnOnce(...e){this._log("warn","once",...e)}infoOnce(...e){this._log("info","once",...e)}errorOncePerTick(...e){this._log("error","oncePerTick",...e)}warnOncePerTick(...e){this._log("warn","oncePerTick",...e)}infoOncePerTick(...e){this._log("info","oncePerTick",...e)}get test(){var e=this;return{loggedMessages:e._loggedMessages,clearLoggedWarnings:()=>e._loggedMessages.warn.clear()}}static get testSingleton(){return{resetLoggers(e={}){var t=o._loggers;return o._loggers=e,t},set throttlingDisabled(e){o._throttlingDisabled=e}}}static getLogger(e){var t=o._loggers[e];return t||(t=new o({module:e})),t}_log(e,t,...r){if(this._matchLevel(e)){if("always"!==t&&!o._throttlingDisabled){var i=this._argsToKey(r),a=this._loggedMessages[e].get(i);if("once"===t&&null!=a||"oncePerTick"===t&&a&&a>=o._tickCounter)return;this._loggedMessages[e].set(i,o._tickCounter),o._scheduleTickCounterIncrement()}for(var s of n.a.log.interceptors)if(s(e,this.module,...r))return;this._inheritedWriter()(e,this.module,...r)}}_parentWithMember(e,t){for(var r=this;Object(i.k)(r);){var n=r[e];if(Object(i.k)(n))return n;r=r.parent}return t}_inheritedWriter(){return this._parentWithMember("writer",this._consoleWriter)}_consoleWriter(e,t,...r){console[e]("[".concat(t,"]"),...r)}_matchLevel(e){var t=n.a.log.level?n.a.log.level:"warn";return s[this._parentWithMember("level",t)]<=s[e]}_argsToKey(...e){return Object(a.b)(JSON.stringify(e,((e,t)=>"object"!=typeof t||Array.isArray(t)?t:"[Object]")))}static _scheduleTickCounterIncrement(){o._tickCounterScheduled||(o._tickCounterScheduled=!0,Promise.resolve().then((()=>{o._tickCounter++,o._tickCounterScheduled=!1})))}}o._loggers={},o._tickCounter=0,o._tickCounterScheduled=!1,o._throttlingDisabled=!1,t.a=o},824:function(e,t,r){"use strict";r.d(t,"a",(function(){return y})),r.d(t,"b",(function(){return p})),r.d(t,"c",(function(){return u})),r.d(t,"d",(function(){return l})),r.d(t,"e",(function(){return c})),r.d(t,"f",(function(){return f})),r.d(t,"g",(function(){return s})),r.d(t,"h",(function(){return d})),r.d(t,"i",(function(){return a})),r.d(t,"j",(function(){return h})),r.d(t,"k",(function(){return o})),r.d(t,"l",(function(){return i}));var n=r(109),i={fill:[{type:"path",path:"M -10,-10 L 10,0 L 10,10 L -10,10 L -10,-10 Z"}],squareFill:[{type:"path",path:"M -10,-10 L 10,-10 L 10,10 L -10,10 L -10,-10 Z"}],pathSymbol3DLayer:[{type:"path",path:"M 3,12 L 12,0 L 11,-2 L -4,5 L -1,5 L 1,7 L 3,10 L 3,12 Z"},{type:"circle",cx:-2,cy:10,r:5}],extrudeSymbol3DLayer:[{type:"path",path:"M -7,-5 L -2,0 L -2,7 L -7,3 L -7,-5 Z"},{type:"path",path:"M -2,0 L -2,7 L 10,-3 L 10,-10 L -2,0 Z"},{type:"path",path:"M -7,-5 L -2,0 L 10,-10 L -2,-10 L -7,-5 Z"}],cone:[{type:"path",path:"M 0,-10 L -8,5 L -4,6.5 L 0,7 L 4,6.5 L 8,5 Z"}],tallCone:[{type:"path",path:"M 0,-9 L -3.5,7 L -1.5,7.8 L 0,8 L 1.5,7.8 L 3.5,7 L 0,-9 Z"}],invertedCone:[{type:"path",path:"M 0,7 L -8,-8 L 8,-8 Z"},{type:"path",path:"M -8,-8 L -4,-9.5 L 0,-10 L 4,-9.5 L 8,-8 L 4,-6.5 L 0,-6 L -4,-6.5 Z"}],cube:[{type:"path",path:"M -10,-7 L 0,-12 L 10,-7 L 0,-2 L -10,-7 Z"},{type:"path",path:"M -10,-7 L 0,-2 L 0,12 L -10,7 L -10,-7 Z"},{type:"path",path:"M 0,-2 L 10,-7 L 10,7 L 0,12 L 0,-2 Z"}],tallCube:[{type:"path",path:"M -3.5,-8.5 L 0,-9.5 L 3.5,-8.5 L 0,-7.5 L -3.5,-8.5 Z"},{type:"path",path:"M -3.5,-8.5 L 0,-7.5 L 0,9 L -3.5,8 L -3.5,-8.5 Z"},{type:"path",path:"M 0,-7.5 L 3.5,-8.5 L 3.5,8 L 0,9 L 0,-7.5 Z"}],cylinder:[{type:"path",path:"M -8,-9 L -8,7 L -4,8.5 L 0,9 L 4,8.5 L 8,7 L 8,-9 Z"},{type:"ellipse",cx:0,cy:-9,rx:8,ry:2}],tallCylinder:[{type:"path",path:"M -3.5,-9 L -3.5,7 L -1.5,7.8 L 0,8 L 1.5,7.8 L 3.5,7 L 3.5,-9 Z"},{type:"ellipse",cx:0,cy:-9,rx:3.5,ry:1}],diamond:[{type:"path",path:"M 0,-10 L 10,-1 L -1,1 L 0,-10 Z"},{type:"path",path:"M 0,-10 L -1,1 L -8,-1 L 0,-10 Z"},{type:"path",path:"M -1,1 L 0,10 L -8,-1 L -1,1 Z"},{type:"path",path:"M -1,0 L 0,10 L 10,-1 L -1,1 Z"}],tetrahedron:[{type:"path",path:"M 0,-10 L 10,7 L 0,0 L 0,-10 Z"},{type:"path",path:"M 0,-10 L 0,0 L -8,7 L 0,-10 Z"},{type:"path",path:"M 10,7 L 0,0 L -8,7 L 10,7 Z"}]};function a(e,t,r){var n=22,i=22;e<1?n*=.75:e>1&&(i*=1.25);var a=22,s=22;return t&&r&&(n=i=a=s=0),[{type:"path",path:[{command:"M",values:[a,0]},{command:"L",values:[r?a:.875*a,0]},{command:"L",values:[r?n-.5*a:0,i-.5*s]},{command:"L",values:[n-.5*a,i-.5*s]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[a,0]},{command:"L",values:[a,t?0:.125*s]},{command:"L",values:[n-.5*a,t?i-.5*s:s]},{command:"L",values:[n-.5*a,i-.5*s]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[n-.5*a,i-.5*s]},{command:"L",values:[r?n-.5*a:0,i-.5*s]},{command:"L",values:[r?n-.5*a:0,t?i-.5*s:s]},{command:"L",values:[n-.5*a,t?i-.5*s:s]},{command:"Z",values:[]}]}]}function s(e){var t=22,r=.5*e;return[{type:"path",path:[{command:"M",values:[0,.7*t*.5]},{command:"L",values:[6.6,.7*t]},{command:"L",values:[6.6,.7*t+r]},{command:"L",values:[0,.7*t+r-.7*t*.5]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[6.6,.7*t]},{command:"L",values:[6.6,.7*t+r]},{command:"L",values:[t,r]},{command:"L",values:[t,0]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[6.6,0]},{command:"L",values:[t,0]},{command:"L",values:[6.6,.7*t]},{command:"L",values:[0,.7*t*.5]},{command:"Z",values:[]}]}]}function o(){return[{type:"path",path:"M80,80.2v-27c-1.5,0.7-2.8,1.6-3.9,2.8c-1.8,2.1-4.4,3.3-7.1,3.5c-2.7-0.1-5.3-1.4-7.1-3.4c-2.2-2.3-4.7-3.6-7.4-3.6s-5.1,1.3-7.3,3.6c-1.8,2.1-4.4,3.3-7.2,3.4c-2.7-0.1-5.3-1.4-7.1-3.4c-2.2-2.3-4.7-3.6-7.4-3.6s-5.1,1.3-7.4,3.6c-1.8,2.1-4.4,3.3-7.2,3.4C8.3,59.3,5.7,58,3.9,56c-1.1-1.2-2.4-2.1-3.9-2.8v27"},{type:"path",path:"M11,59.4c2.7-0.1,5.3-1.4,7.1-3.4c2.2-2.3,4.7-3.6,7.4-3.6s5.1,1.3,7.4,3.6c1.8,2,4.4,3.3,7.2,3.4c2.7-0.1,5.3-1.4,7.1-3.4c2.2-2.3,4.7-3.6,7.3-3.6s5.1,1.3,7.4,3.6c1.8,2.1,4.4,3.3,7.2,3.4c2.7-0.1,5.3-1.4,7.1-3.4c1.1-1.2,2.4-2.1,3.9-2.8v-24c-1.5,0.7-2.8,1.6-3.9,2.8c-1.8,2.1-4.4,3.3-7.1,3.5c-2.7-0.1-5.3-1.4-7.1-3.4c-2.2-2.3-4.7-3.6-7.4-3.6s-5.1,1.3-7.3,3.6c-1.8,2.1-4.4,3.3-7.2,3.4c-2.7-0.1-5.3-1.4-7.1-3.4c-2.2-2.3-4.7-3.6-7.4-3.6s-5.1,1.3-7.4,3.6c-1.8,2.1-4.4,3.3-7.2,3.4c-2.7-0.1-5.3-1.4-7.1-3.4c-1.1-1.2-2.4-2.1-3.9-2.8v24c1.5,0.7,2.8,1.6,3.9,2.8C5.7,58,8.3,59.3,11,59.4z"},{type:"path",path:"M11,35.4c2.7-0.1,5.3-1.4,7.1-3.4c2.2-2.3,4.7-3.6,7.4-3.6s5.1,1.3,7.4,3.6c1.8,2,4.4,3.3,7.2,3.4c2.7-0.1,5.3-1.4,7.1-3.4c2.2-2.3,4.7-3.6,7.3-3.6s5.1,1.3,7.4,3.6c1.8,2.1,4.4,3.3,7.2,3.4c2.7-0.1,5.3-1.4,7.1-3.4c1.1-1.2,2.4-2.1,3.9-2.8V3.6c-1.5,0.7-2.8,1.6-3.9,2.8c-2.2,2.1-4.6,3.4-7.1,3.4s-5-1.3-7.1-3.4s-4.7-3.6-7.4-3.6s-5.1,1.3-7.3,3.6S42.5,9.9,40,9.9s-5-1.3-7.1-3.4s-4.7-3.6-7.4-3.6s-5.1,1.3-7.3,3.6c-1.8,2.1-4.4,3.3-7.2,3.4c-2.5,0-5-1.3-7.1-3.4C2.8,5.3,1.4,4.3,0,3.6v25.6c1.5,0.7,2.8,1.6,3.9,2.8C5.7,34.1,8.3,35.3,11,35.4z"}]}function l(e,t){var r=t?20:e,n=t?4:6;r-=r<=22?.5*n:n;var i=t?.35*r:.5*r;return[{type:"path",path:[{command:"M",values:[.5*r,0]},{command:"L",values:[r,.5*i]},{command:"L",values:[.5*r,i]},{command:"L",values:[0,.5*i]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[0,.5*i]},{command:"L",values:[.5*r,i]},{command:"L",values:[.5*r,e]},{command:"L",values:[0,e-.5*i]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[.5*r,i]},{command:"L",values:[.5*r,e]},{command:"L",values:[r,e-.5*i]},{command:"L",values:[r,.5*i]},{command:"Z",values:[]}]}]}function c(e,t){var r=t?20:e,n=t?4:6,i=.5*(r-=r<=22?.5*n:n),a=.15*r,s=e-a;return[{type:"ellipse",cx:.5*r,cy:s,rx:i,ry:a},{type:"path",path:[{command:"M",values:[0,a]},{command:"L",values:[0,s]},{command:"L",values:[r,s]},{command:"L",values:[r,a]},{command:"Z",values:[]}]},{type:"ellipse",cx:.5*r,cy:a,rx:i,ry:a}]}function u(e,t){var r=t?20:e,n=t?4:6,i=.15*(r-=r<=22?.5*n:n),a=e-i;return[{type:"ellipse",cx:.5*r,cy:a,rx:.5*r,ry:i},{type:"path",path:[{command:"M",values:[.5*r,0]},{command:"L",values:[r,a]},{command:"L",values:[0,a]},{command:"Z",values:[]}]}]}function d(e){var t=e,r=.15*(t-=t<22?3:6);return[{type:"path",path:[{command:"M",values:[0,0]},{command:"L",values:[t,0]},{command:"L",values:[.5*t,e-r]},{command:"Z",values:[]}]},{type:"ellipse",cx:.5*t,cy:0,rx:.5*t,ry:r}]}function f(e){var t=e,r=e,n=t-=t<22?2:4,i=r,a=Math.floor(e/10)-1||1;return[{type:"path",path:[{command:"M",values:[.45*n,0]},{command:"L",values:[n,.5*i-a]},{command:"L",values:[.45*n-a,.5*i+a]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[.45*n,0]},{command:"L",values:[.45*n-a,.5*i+a]},{command:"L",values:[0,.5*i-a]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[0,.5*i-a]},{command:"L",values:[.45*n-a,.5*i+a]},{command:"L",values:[.45*n,r]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[.45*n,r]},{command:"L",values:[n,.5*i-a]},{command:"L",values:[.45*n-a,.5*i+a]},{command:"Z",values:[]}]}]}function h(e){var t=e;return[{type:"path",path:[{command:"M",values:[.45*e,0]},{command:"L",values:[e,t-=t<22?1:2]},{command:"L",values:[.45*e,.6*t]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[.45*e,0]},{command:"L",values:[.45*e,.6*t]},{command:"L",values:[0,t]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[0,t]},{command:"L",values:[.45*e,.6*t]},{command:"L",values:[e,t]},{command:"Z",values:[]}]}]}function p(e,t){return Math.round(Math.min(Math.max(e+255*t*.75,0),255))}function y(e,t){if("type"in e&&("linear"===e.type||"pattern"===e.type))return e;var r=new n.a(e);return new n.a([p(r.r,t),p(r.g,t),p(r.b,t),r.a])}},825:function(e,t,r){"use strict";r.d(t,"a",(function(){return d})),r.d(t,"b",(function(){return h}));var n=r(80),i=r(93),a=r(160),s=r(106),o=r(466),l=(r(302),r(367)),c=r(750),u=Object(l.a)();function d(e,t,r){var n=Math.ceil(t[0]),i=Math.ceil(t[1]);if(!e.some((e=>!!e.length)))return null;var a=r&&r.node||document.createElement("div");return null!=r.opacity&&(a.style.opacity=r.opacity.toString()),u.append(a,c.g.bind(null,e,n,i,r)),a}function f(e,t,r,n,i){switch(i){case"multiply":e[t+0]*=r[0],e[t+1]*=r[1],e[t+2]*=r[2],e[t+3]*=r[3];break;default:var a=Object(o.b)({r:e[t+0],g:e[t+1],b:e[t+2]});a.h=n.h,a.s=n.s,a.v=a.v/100*n.v;var s=Object(o.e)(a);e[t+0]=s.r,e[t+1]=s.g,e[t+2]=s.b,e[t+3]*=r[3]}}function h(e,t,r,l,c){return(u=e,d=t,h=c,u?Object(s.default)(u,{responseType:"image"}).then((e=>{var t=e.data,r=t.width,n=t.height,i=r/n,a=d;if(h){var s=Math.max(r,n);a=Math.min(a,s)}return{image:t,width:i<=1?Math.ceil(a*i):a,height:i<=1?a:Math.ceil(a/i)}})):Promise.reject(new i.a("renderUtils: imageDataSize","href not provided."))).then((i=>{var s=i.width?i.width:t,c=i.height?i.height:t;if(i.image&&function(e,t){return!(!e||"ignore"===t)&&("multiply"!==t||255!==e.r||255!==e.g||255!==e.b||1!==e.a)}(r,l)){var u=i.image.width,d=i.image.height;(Object(n.a)("edge")||Object(n.a)("ie"))&&/\.svg$/i.test(e)&&(u-=1,d-=1);var h=function(e,t){e=Math.ceil(e),t=Math.ceil(t);var r=document.createElement("canvas");r.width=e,r.height=t,r.style.width=e+"px",r.style.height=t+"px";var n=r.getContext("2d");return n.clearRect(0,0,e,t),n}(s,c);h.drawImage(i.image,0,0,u,d,0,0,s,c);for(var p=h.getImageData(0,0,s,c),y=[r.r/255,r.g/255,r.b/255,r.a],b=Object(o.b)(r),m=0;m<p.data.length;m+=4)f(p.data,m,y,b,l);h.putImageData(p,0,0),e=h.canvas.toDataURL("image/png")}else{var v=a.b&&a.b.findCredential(e);if(v&&v.token){var g=-1===e.indexOf("?")?"?":"&";e="".concat(e).concat(g,"token=").concat(v.token)}}return{url:e,width:s,height:c}})).catch((function(){return{url:e,width:t,height:t}}));var u,d,h}},89:function(e,t,r){"use strict";r.d(t,"a",(function(){return h})),r.d(t,"b",(function(){return v})),r.d(t,"c",(function(){return s})),r.d(t,"d",(function(){return j})),r.d(t,"e",(function(){return u})),r.d(t,"f",(function(){return d})),r.d(t,"g",(function(){return g})),r.d(t,"h",(function(){return b})),r.d(t,"i",(function(){return O})),r.d(t,"j",(function(){return i})),r.d(t,"k",(function(){return n})),r.d(t,"l",(function(){return a})),r.d(t,"m",(function(){return y})),r.d(t,"n",(function(){return m})),r.d(t,"o",(function(){return p})),r.d(t,"p",(function(){return f})),r.d(t,"q",(function(){return o})),r.d(t,"r",(function(){return c})),r.d(t,"s",(function(){return l}));function n(e){return null!=e}function i(e){return null==e}function a(e){return void 0===e}function s(e,t){return n(e)?t(e):null}function o(e){return e}function l(e,t){if(i(e))throw new Error(t);return e}function c(e,t){return n(e)?e:"function"==typeof t?t():t}function u(e){return n(e)&&e.destroy(),null}function d(e){return n(e)&&e.dispose(),null}function f(e){return n(e)&&e.remove(),null}function h(e){return n(e)&&e.abort(),null}function p(e){return null}function y(e,t){var r=new Array;for(var n of e)r.push(m(n,null,t));return r}function b(e,t){for(var r of e)m(r,null,t)}function m(e,t,r){return n(e)?r(e):t}function v(e,t){return n(e)?t(e):null}function g(e){return e.filter((e=>n(e)))}function O(e,...t){for(var r=e,n=0;n<t.length&&r;)r=r[t[n++]];return r}function j(e){return e}},92:function(e,t,r){"use strict";r.d(t,"a",(function(){return a})),r.d(t,"b",(function(){return s})),r.d(t,"c",(function(){return i}));r(80);var n=r(295);function i(e,t){var r;if(t)for(r in e)e.hasOwnProperty(r)&&(void 0===e[r]?delete e[r]:e[r]instanceof Object&&i(e[r],!0));else for(r in e)e.hasOwnProperty(r)&&void 0===e[r]&&delete e[r];return e}function a(e){if(!e||"object"!=typeof e||"function"==typeof e)return e;if(Object(n.h)(e)||Object(n.k)(e)||Object(n.l)(e)||Object(n.f)(e)||Object(n.i)(e)||Object(n.g)(e)||Object(n.j)(e)||Object(n.d)(e)||Object(n.e)(e))return Object(n.m)(e);if(e instanceof Date)return new Date(e.getTime());if(e instanceof ArrayBuffer)return e.slice(0,e.byteLength);if(e instanceof Map){var t=new Map;return e.forEach(((e,r)=>{t.set(r,a(e))})),t}if(e instanceof Set){var r=new Set;return e.forEach((e=>{r.add(a(e))})),r}var i,s=e;if("function"==typeof s.clone)i=s.clone();else if("function"==typeof s.map&&"function"==typeof s.forEach)i=s.map(a);else if("function"==typeof s.notifyChange&&"function"==typeof s.watch)i=s.clone();else for(var o of(i={},Object.getOwnPropertyNames(e)))i[o]=a(e[o]);return i}function s(e,t){return e===t||"number"==typeof e&&isNaN(e)&&"number"==typeof t&&isNaN(t)||"function"==typeof(e||{}).getTime&&"function"==typeof(t||{}).getTime&&e.getTime()===t.getTime()||!1}},93:function(e,t,r){"use strict";var n=r(92),i=r(81),a=r(409);class s extends a.a{constructor(e,t,r){if(super(e,t,r),!(this instanceof s))return new s(e,t,r)}toJSON(){if(null!=this.details)try{return{name:this.name,message:this.message,details:JSON.parse(JSON.stringify(this.details,((e,t)=>{if(t&&"object"==typeof t&&"function"==typeof t.toJSON)return t;try{return Object(n.a)(t)}catch(s){return"[object]"}})))}}catch(e){throw i.a.getLogger("esri.core.Error").error(e),e}return{name:this.name,message:this.message,details:this.details}}static fromJSON(e){return new s(e.name,e.message,e.details)}}s.prototype.type="error",t.a=s},94:function(e,t,r){"use strict";r.d(t,"a",(function(){return x})),r.d(t,"b",(function(){return o})),r.d(t,"c",(function(){return l})),r.d(t,"d",(function(){return u})),r.d(t,"e",(function(){return c})),r.d(t,"f",(function(){return j})),r.d(t,"g",(function(){return M})),r.d(t,"h",(function(){return E})),r.d(t,"i",(function(){return A})),r.d(t,"j",(function(){return w})),r.d(t,"k",(function(){return _})),r.d(t,"l",(function(){return O})),r.d(t,"m",(function(){return g})),r.d(t,"n",(function(){return h})),r.d(t,"o",(function(){return k})),r.d(t,"p",(function(){return b})),r.d(t,"q",(function(){return m})),r.d(t,"r",(function(){return S})),r.d(t,"s",(function(){return L})),r.d(t,"t",(function(){return p})),r.d(t,"u",(function(){return d})),r.d(t,"v",(function(){return y})),r.d(t,"w",(function(){return I})),r.d(t,"x",(function(){return v}));var n=r(89),i=(r(81),r(93)),a=r(455),s=r(165);function o(e){return Promise.all(e)}function l(e){return new Promise(((t,r)=>{try{e(t,r)}catch(n){Promise.resolve().then((()=>r(n)))}}))}function c(e="Aborted"){return new i.a("AbortError",e)}function u(){return new AbortController}function d(e){if(h(e))throw c()}function f(e){return Object(n.k)(e)?"aborted"in e?e:e.signal:e}function h(e){var t=f(e);return Object(n.k)(t)&&t.aborted}function p(e){if(g(e))throw e}function y(e){if(!g(e))throw e}function b(e,t){var r=f(e);if(!Object(n.j)(r)){if(!r.aborted)return Object(s.d)(r,"abort",(()=>t()));t()}}function m(e,t){var r=f(e);if(!Object(n.j)(r))return d(r),Object(s.d)(r,"abort",(()=>t(c())))}function v(e,t){var r=f(t);return Object(n.j)(r)?e:new Promise(((r,i)=>{var a=b(t,(()=>i(c()))),s=()=>a=Object(n.p)(a);e.then(s,s),e.then(r,i)}))}function g(e){return e&&"AbortError"===e.name}function O(e){return e.catch((e=>{if(!g(e))throw e}))}function j(){var e=null,t=new Promise(((t,r)=>{e={promise:void 0,resolve:t,reject:r}}));return e.promise=t,e}function w(e){if(e){if("function"!=typeof e.forEach){var t=Object.keys(e);return w(t.map((t=>e[t]))).then((e=>{var r={};return t.forEach(((t,n)=>r[t]=e[n])),r}))}var r=e;return l((e=>{var t=[],n=r.length;0===n&&e(t),r.forEach((r=>{var i={promise:r||Promise.resolve(r)};t.push(i),i.promise.then((e=>{i.value=e})).catch((e=>{i.error=e})).then((()=>{0===--n&&e(t)}))}))}))}}function _(e){return w(e).then((e=>e.filter((e=>!!e.value)).map((e=>e.value))))}function S(e){return Promise.reject(e)}function L(e){return Promise.resolve(e)}function x(e,t,r){var n=u();return b(r,(()=>n.abort())),new Promise(((r,i)=>{var a=setTimeout((()=>{a=0,r(t)}),e);b(n,(()=>{a&&(clearTimeout(a),i(c()))}))}))}function k(e){return e&&"function"==typeof e.then}function I(e){return e&&"object"==typeof e&&"then"in e&&"function"==typeof e.then?e:Promise.resolve(e)}function A(e,t=-1){var r,i,a,s,o=null,l=(...d)=>{if(r){i=d,s&&s.reject(c()),s=j();var f=Object(n.d)(s.promise);if(o){var h=o;o=null,h.abort()}return f}if(a=s||j(),s=null,t>0){var p=u(),y=r=I(e(...d,p.signal));x(t).then((()=>{r===y&&(s?p.abort():o=p)}))}else r=1,r=I(e(...d));var b=()=>{var e=i;i=a=r=o=null,null!=e&&l(...e)},m=r,v=a;return m.then(b,b),m.then(v.resolve,v.reject),Object(n.d)(v.promise)};return l}function M(){var e,t,r=new Promise(((r,n)=>{e=r,t=n})),n=t=>{e(t)};return n.resolve=t=>e(t),n.reject=e=>t(e),n.timeout=(e,t)=>a.a.setTimeout((()=>n.reject(t)),e),n.promise=r,n}function E(e){var t=u(),r=e(t.signal),n={promise:r,finished:!1,abort:()=>{t&&(t.abort(),t=null)}},i=()=>{n&&(n.finished=!0,n=null),t=null};return r.then(i,i),n}}}]);
//# sourceMappingURL=78.0c2e8ca5.chunk.js.map