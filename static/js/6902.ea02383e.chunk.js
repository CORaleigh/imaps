(globalThis.webpackChunkimaps=globalThis.webpackChunkimaps||[]).push([[6902],{67435:e=>{function t(e){return Promise.resolve().then((()=>{var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}))}t.keys=()=>[],t.resolve=t,t.id=67435,e.exports=t},73979:(e,t,l)=>{"use strict";l.r(t),l.d(t,{Layers:()=>p,default:()=>m});var i=l(72791),r=l(47019),n=l(40281),a=l(9676);const o=e=>{const t=e.item;if("group"!=t.layer.type&&void 0!=t.layer.type){const e=document.createElement("calcite-slider");e.setAttribute("min","0"),e.setAttribute("max","100"),e.setAttribute("step","1"),e.setAttribute("snap",""),e.setAttribute("min-label","0%"),e.setAttribute("max-label","100%"),e.setAttribute("label-handles",""),e.setAttribute("value",Math.round(100*(null===t||void 0===t?void 0:t.layer.opacity)).toString()),e.setAttribute("data",t.layer.id),e.addEventListener("calciteSliderUpdate",(e=>{var l;t.layer.opacity=Math.round(parseInt(null===e||void 0===e||null===(l=e.target)||void 0===l?void 0:l.getAttribute("value")))/100}),{passive:!0}),t.panel={content:[e,"legend"],open:!1}}t.open=t.layer.visible,t.layer.watch("visible",(e=>{t.open=e,e&&(t.layer.parent&&"group"===t.layer.parent.type&&(t.layer.parent.visible=!0),t.layer.parent.parent&&"group"===t.layer.parent.parent.type&&(t.layer.parent.parent.visible=!0))})),u(t)},s=[{expression:"First(Split($feature['SITE_ADDRESS'], ' '))",title:"Address"},{expression:"$feature['PIN_NUM']",title:"PIN"},{expression:"$feature['REID']",title:"REID"},{expression:'When(IsEmpty($feature["SALE_DATE"]),null, Concatenate(Month($feature["SALE_DATE"])+1, \'/\',Day($feature["SALE_DATE"]), \'/\',Year($feature["SALE_DATE"])))',title:"Sale Date"},{expression:"Text($feature.TOTSALPRICE,'$#,###')",title:"Sale Price"}],u=e=>{if("Property"===e.layer.title&&"group"!=e.layer.type&&0===e.actionsSections.length){const t=new n.Z;t.addMany(s.map((e=>new a.Z({active:!1,title:e.title,visible:!0})))),e.actionsSections.push(t),e.actionsOpen=!0,setTimeout((()=>{const e=document.createElement("h4");e.textContent="Labels",e.setAttribute("style","padding: 0.5em;margin: 0;");const t=document.querySelector(".esri-layer-list__item-actions");null!==t&&void 0!==t&&t.parentElement&&t.prepend(e)}),500)}},c=(e,t)=>{e||(e=""),t.operationalItems.forEach((l=>{if("group"===l.layer.type){let d=!1;var i,r,n,a,o,s,u,c;if(l.layer.layers.forEach((t=>{t.title.toLowerCase().includes(e.toLowerCase())?(t.listMode="show",d=!0):t.listMode="hide","group"===t.type&&t.layers.forEach((l=>{l.title.toLowerCase().includes(e.toLowerCase())?(t.listMode="show",l.listMode="show",d=!0):l.listMode="hide"}))})),l.open=e.length>0&&d,!e.length||d)null===(i=document.getElementById(`${t.id}_${l.uid}__title`))||void 0===i||null===(r=i.parentElement)||void 0===r||null===(n=r.parentElement)||void 0===n||null===(a=n.parentElement)||void 0===a||a.removeAttribute("hidden");if(!d)null===(o=document.getElementById(`${t.id}_${l.uid}__title`))||void 0===o||null===(s=o.parentElement)||void 0===s||null===(u=s.parentElement)||void 0===u||null===(c=u.parentElement)||void 0===c||c.setAttribute("hidden","")}}))};var d=l(80184);const p=e=>{const t=(0,i.useRef)(null),l=(0,i.useRef)(null),n=(0,i.useRef)();return(0,i.useEffect)((()=>{var i,a;const u=new r.Z({container:t.current,view:e.view,listItemCreatedFunction:o,visibleElements:{statusIndicators:!0}});return n.current=u,u.on("trigger-action",(e=>{"Property"===e.item.layer.title&&(e=>{if("Property"===e.item.layer.title){e.item.layer.labelsVisible||(e.item.layer.labelsVisible=!0);const t=e.item.actionsSections.getItemAt(0).filter((e=>e.value)).map((e=>e.title)),l=s.filter((e=>t.includes(e.title))),i=l.map((e=>e.expression)),r=i.join("+ TextFormatting.NewLine+");e.item.layer.labelingInfo=[],e.item.layer.labelingInfo=[{symbol:{type:"text",color:"black",haloColor:"white",haloSize:1,font:{family:"AvenirNext LT Pro Regular",style:"normal",weight:"bold"}},labelExpressionInfo:{expression:r},maxScale:0,minScale:5e3}]}})(e)})),null===(i=l.current)||void 0===i||i.addEventListener("calciteInputInput",(e=>{c(e.target.value,u)})),null===(a=l.current)||void 0===a||a.addEventListener("focusout",(e=>{c(e.target.value,u)})),()=>{var e;null===(e=l.current)||void 0===e||e.removeEventListener("calciteInputInput",(e=>{c(e.target.value,u)})),u&&u.destroy()}}),[e.view]),(0,d.jsxs)("div",{className:"panel",children:[(0,d.jsxs)("div",{className:"row sticky",children:[(0,d.jsx)("calcite-input",{ref:l,clearable:!0,placeholder:"Filter by layer name",scale:"m",id:"layerSearch"}),(0,d.jsx)("calcite-action",{icon:"viewHide",scale:"m",onClick:()=>{(e=>{null===e||void 0===e||e.operationalItems.forEach((e=>{e.visible="Property"===e.title}))})(n.current)}})]}),(0,d.jsx)("div",{ref:t})]})},m=p}}]);
//# sourceMappingURL=6902.ea02383e.chunk.js.map