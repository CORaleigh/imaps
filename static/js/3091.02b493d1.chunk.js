"use strict";(globalThis.webpackChunkimaps=globalThis.webpackChunkimaps||[]).push([[3091],{53283:(t,e,r)=>{r.d(e,{M:()=>b,e:()=>d,f:()=>l,i:()=>c,p:()=>h,r:()=>n,t:()=>i,w:()=>s});var o=r(92026),a=r(35995);function l(t,e){const r=e&&e.url&&e.url.path;if(t&&r&&(t=(0,a.hF)(t,r,{preserveProtocolRelative:!0}),e.portalItem&&e.readResourcePaths)){const r=(0,a.PF)(t,e.portalItem.itemUrl);p.test(r)&&e.readResourcePaths.push(e.portalItem.resourceFromPath(r).path)}return y(t,e&&e.portal)}function i(t,e){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:b.YES;if(!t)return t;!(0,a.YP)(t)&&e&&e.blockedRelativeUrls&&e.blockedRelativeUrls.push(t);let o=(0,a.hF)(t);if(e){const r=e.verifyItemRelativeUrls&&e.verifyItemRelativeUrls.rootPath||e.url&&e.url.path;if(r){const l=y(r,e.portal);o=(0,a.PF)(y(o,e.portal),l,l),o!==t&&e.verifyItemRelativeUrls&&e.verifyItemRelativeUrls.writtenUrls.push(o)}}return o=d(o,e&&e.portal),(0,a.YP)(o)&&(o=(0,a.Fv)(o)),e?.resources&&e?.portalItem&&!(0,a.YP)(o)&&!(0,a.HK)(o)&&r===b.YES&&e.resources.toKeep.push({resource:e.portalItem.resourceFromPath(o)}),o}function n(t,e,r){return l(t,r)}function s(t,e,r,o){const a=i(t,o);void 0!==a&&(e[r]=a)}const u=/\/items\/([^\/]+)\/resources\//,p=/^\.\/resources\//;function c(t){const e=(0,o.pC)(t)?t.match(u):null;return(0,o.pC)(e)?e[1]:null}function d(t,e){return e&&!e.isPortal&&e.urlKey&&e.customBaseUrl?(0,a.Ie)(t,`${e.urlKey}.${e.customBaseUrl}`,e.portalHostname):t}function y(t,e){if(!e||e.isPortal||!e.urlKey||!e.customBaseUrl)return t;const r=`${e.urlKey}.${e.customBaseUrl}`,o=(0,a.TI)();return(0,a.D6)(o,`${o.scheme}://${r}`)?(0,a.Ie)(t,e.portalHostname,r):(0,a.Ie)(t,r,e.portalHostname)}var b;!function(t){t[t.YES=0]="YES",t[t.NO=1]="NO"}(b||(b={}));const h=Object.freeze(Object.defineProperty({__proto__:null,fromJSON:l,toJSON:i,read:n,write:s,itemIdFromResourceUrl:c,ensureMainOnlineDomain:d,get MarkKeep(){return b}},Symbol.toStringTag,{value:"Module"}))},79056:(t,e,r)=>{r.d(e,{IG:()=>i});var o=r(27366),a=r(69912);let l=0;const i=t=>{let e=class extends t{constructor(){super(...arguments),Object.defineProperty(this,"uid",{writable:!1,configurable:!1,value:Date.now().toString(16)+"-object-"+l++})}};return e=(0,o._)([(0,a.j)("esri.core.Identifiable")],e),e};let n=class extends(i(class{})){};n=(0,o._)([(0,a.j)("esri.core.Identifiable")],n)},30651:(t,e,r)=>{r.d(e,{Z:()=>g});var o=r(27366),a=(r(59486),r(76200)),l=r(10064),i=r(91505),n=r(79056),s=r(54472),u=r(32718),p=r(66978),c=r(35995),d=r(49861),y=(r(63780),r(93169),r(25243),r(69912)),b=r(42265);const h=u.Z.getLogger("esri.layers.support.fromPortalItem");var m=r(53866),f=r(78952);let v=0,I=class extends(i.Z.EventedMixin((0,n.IG)(s.Z))){constructor(){super(...arguments),this.attributionDataUrl=null,this.fullExtent=new m.Z(-180,-90,180,90,f.Z.WGS84),this.id=Date.now().toString(16)+"-layer-"+v++,this.legendEnabled=!0,this.listMode="show",this.opacity=1,this.parent=null,this.popupEnabled=!0,this.attributionVisible=!0,this.spatialReference=f.Z.WGS84,this.title=null,this.type=null,this.url=null,this.visible=!0}static async fromArcGISServerUrl(t){const e="string"==typeof t?{url:t}:t;return(await r.e(4650).then(r.bind(r,94650))).fromUrl(e)}static fromPortalItem(t){return async function(t){const e="portalItem"in t?t:{portalItem:t},o=await Promise.all([r.e(4226),r.e(8995),r.e(9803),r.e(3120)]).then(r.bind(r,43139));try{return await o.fromItem(e)}catch(a){const t=e&&e.portalItem,r=t&&t.id||"unset",o=t&&t.portal&&t.portal.url||b.Z.portalUrl;throw h.error("#fromPortalItem()","Failed to create layer from portal item (portal: '"+o+"', id: '"+r+"')",a),a}}(t)}initialize(){this.when().catch((t=>{(0,p.D_)(t)||u.Z.getLogger(this.declaredClass).error("#load()",`Failed to load layer (title: '${this.title??"no title"}', id: '${this.id??"no id"}')`,{error:t})}))}destroy(){if(this.parent){const t=this,e=this.parent;"layers"in e&&e.layers.includes(t)?e.layers.remove(t):"tables"in e&&e.tables.includes(t)?e.tables.remove(t):"baseLayers"in e&&e.baseLayers.includes(t)?e.baseLayers.remove(t):"baseLayers"in e&&e.referenceLayers.includes(t)&&e.referenceLayers.remove(t)}}get hasAttributionData(){return null!=this.attributionDataUrl}get parsedUrl(){const t=this.url;return t?(0,c.mN)(t):null}async fetchAttributionData(){const t=this.attributionDataUrl;if(this.hasAttributionData&&t)return(await(0,a.default)(t,{query:{f:"json"},responseType:"json"})).data;throw new l.Z("layer:no-attribution-data","Layer does not have attribution data")}};(0,o._)([(0,d.Cb)({type:String})],I.prototype,"attributionDataUrl",void 0),(0,o._)([(0,d.Cb)({type:m.Z})],I.prototype,"fullExtent",void 0),(0,o._)([(0,d.Cb)({readOnly:!0})],I.prototype,"hasAttributionData",null),(0,o._)([(0,d.Cb)({type:String,clonable:!1})],I.prototype,"id",void 0),(0,o._)([(0,d.Cb)({type:Boolean,nonNullable:!0})],I.prototype,"legendEnabled",void 0),(0,o._)([(0,d.Cb)({type:["show","hide","hide-children"]})],I.prototype,"listMode",void 0),(0,o._)([(0,d.Cb)({type:Number,range:{min:0,max:1},nonNullable:!0})],I.prototype,"opacity",void 0),(0,o._)([(0,d.Cb)({clonable:!1})],I.prototype,"parent",void 0),(0,o._)([(0,d.Cb)({readOnly:!0})],I.prototype,"parsedUrl",null),(0,o._)([(0,d.Cb)({type:Boolean})],I.prototype,"popupEnabled",void 0),(0,o._)([(0,d.Cb)({type:Boolean})],I.prototype,"attributionVisible",void 0),(0,o._)([(0,d.Cb)({type:f.Z})],I.prototype,"spatialReference",void 0),(0,o._)([(0,d.Cb)({type:String})],I.prototype,"title",void 0),(0,o._)([(0,d.Cb)({readOnly:!0,json:{read:!1}})],I.prototype,"type",void 0),(0,o._)([(0,d.Cb)()],I.prototype,"url",void 0),(0,o._)([(0,d.Cb)({type:Boolean,nonNullable:!0})],I.prototype,"visible",void 0),I=(0,o._)([(0,y.j)("esri.layers.Layer")],I);const g=I}}]);
//# sourceMappingURL=3091.02b493d1.chunk.js.map