(this.webpackJsonpimaps=this.webpackJsonpimaps||[]).push([[104,44,55,158,264],{109:function(e,t,r){"use strict";r.d(t,"a",(function(){return h})),r.d(t,"b",(function(){return S})),r.d(t,"c",(function(){return w})),r.d(t,"d",(function(){return p})),r.d(t,"e",(function(){return f})),r.d(t,"f",(function(){return j})),r.d(t,"g",(function(){return v})),r.d(t,"h",(function(){return m})),r.d(t,"i",(function(){return y})),r.d(t,"j",(function(){return b})),r.d(t,"k",(function(){return g})),r.d(t,"l",(function(){return O})),r.d(t,"m",(function(){return o}));var n=r(177),i=(r(86),r(87));function s(e,t,r,n,i){const s=e.watch(t,((t,i,s,o)=>{r&&!r(t)||null==n||n.call(e,t,i,s,o)}),i);if(Array.isArray(t))for(const o of t){const i=e.get(o);r&&r(i)&&(null==n||n.call(e,i,i,t,e))}else{const i=e.get(t);r&&r(i)&&(null==n||n.call(e,i,i,t,e))}return s}function o(e,t,r,n,o){const a="function"==typeof n?n:null,c="object"==typeof n?n:null;"boolean"==typeof n&&(o=n);let l,u=!1;function d(){l&&(l.remove(),l=null)}const h=Object(i.f)();Object(i.q)(c,(()=>{d(),h.reject(Object(i.e)())}));const p={then:h.promise.then.bind(h.promise),catch:h.promise.catch.bind(h.promise),remove:d};return Object.freeze(p),l=s(e,t,r,((t,r,n,i)=>{u=!0,d(),a&&a.call(e,t,r,n,i),h.resolve({value:t,oldValue:r,propertyName:n,target:i})}),o),u&&d(),p}function a(e){return!!e}function c(e){return!e}function l(e){return!0===e}function u(e){return!1===e}const d=/\?(\.|$)/g;function h(e,t,r,n){const i=Array.isArray(t)?t:t.indexOf(",")>-1?t.split(","):[t],s=p(e,t,r,n);for(const o of i){const t=o.trim().replace(d,"$1"),n=e.get(t);r.call(e,n,n,t,e)}return s}function p(e,t,r,n){return e.watch(t,r,n)}function f(e,t,r,n){return s(e,t,a,r,n)}function b(e,t,r,n){return o(e,t,a,r,n)}function m(e,t,r,n){return s(e,t,c,r,n)}function y(e,t,r,n){return o(e,t,c,r,n)}function g(e,t,r,n){return s(e,t,l,r,n)}function O(e,t,r,n){return o(e,t,l,r,n)}function j(e,t,r,n){return s(e,t,u,r,n)}function v(e,t,r,n){return o(e,t,u,r,n)}function w(e,t,r,n){let i=!1;const s=e.watch(t,((t,n,s,o)=>{i||r.call(e,t,n,s,o)}),n);return{remove(){s.remove()},pause(){i=!0},resume(){i=!1}}}function S(e,t,r,i,s,o,a){const c={};function l(t){const n=c[t];n&&(o&&o(n.target,t,e,r),n.handle.remove(),delete c[t])}const u=h(e,t,((t,o,a)=>{l(a),Object(n.b)(t)&&(c[a]={handle:Object(n.c)(t,r,i),target:t},s&&s(t,a,e,r))}),a);return{remove(){u.remove();for(const e in c)l(e)}}}},111:function(e,t,r){"use strict";r.d(t,"a",(function(){return V})),r.d(t,"b",(function(){return x})),r.d(t,"c",(function(){return _})),r.d(t,"d",(function(){return D})),r.d(t,"e",(function(){return z})),r.d(t,"f",(function(){return U})),r.d(t,"g",(function(){return C})),r.d(t,"h",(function(){return A})),r.d(t,"i",(function(){return E})),r.d(t,"j",(function(){return l})),r.d(t,"k",(function(){return T})),r.d(t,"l",(function(){return w})),r.d(t,"m",(function(){return N})),r.d(t,"n",(function(){return B})),r.d(t,"o",(function(){return S})),r.d(t,"p",(function(){return j})),r.d(t,"q",(function(){return v})),r.d(t,"r",(function(){return P})),r.d(t,"s",(function(){return k})),r.d(t,"t",(function(){return M})),r.d(t,"u",(function(){return R})),r.d(t,"v",(function(){return F})),r.d(t,"w",(function(){return I})),r.d(t,"x",(function(){return q}));r(77);var n=r(88),i=r(158),s=r(92),o=r(129),a=r(102),c=r(243);const l=39.37,u=o.a.radius*Math.PI/200,d=/UNIT\[([^\]]+)\]\]$/i,h=c.a,p=/UNIT\[([^\]]+)\]/i,f=new Set([4261,4305,4807,4810,4811,4812,4816,4819,4821,4901,4902,37225,104139,104140]),b=Object(n.b)()({meter:"meters",foot:"feet",foot_us:"us-feet",foot_clarke:"clarke-feet",yard_clarke:"clarke-yards",link_clarke:"clarke-links",yard_sears:"sears-yards",foot_sears:"sears-feet",chain_sears:"sears-chains",chain_benoit_1895_b:"benoit-1895-b-chains",yard_indian:"indian-yards",yard_indian_1937:"indian-1937-yards",foot_gold_coast:"gold-coast-feet",chain_sears_1922_truncated:"sears-1922-truncated-chains","50_kilometers":"50-kilometers","150_kilometers":"150-kilometers"}),m=e=>e*e,y=e=>e*e*e,g={length:{baseUnit:"meters",units:{millimeters:{inBaseUnits:.001},centimeters:{inBaseUnits:.01},decimeters:{inBaseUnits:.1},meters:{inBaseUnits:1},kilometers:{inBaseUnits:1e3},inches:{inBaseUnits:.0254},feet:{inBaseUnits:.3048},yards:{inBaseUnits:.9144},miles:{inBaseUnits:1609.344},"nautical-miles":{inBaseUnits:1852},"us-feet":{inBaseUnits:1200/3937}}},area:{baseUnit:"square-meters",units:{"square-millimeters":{inBaseUnits:m(.001)},"square-centimeters":{inBaseUnits:m(.01)},"square-decimeters":{inBaseUnits:m(.1)},"square-meters":{inBaseUnits:1},"square-kilometers":{inBaseUnits:m(1e3)},"square-inches":{inBaseUnits:m(.0254)},"square-feet":{inBaseUnits:m(.3048)},"square-yards":{inBaseUnits:m(.9144)},"square-miles":{inBaseUnits:m(1609.344)},"square-us-feet":{inBaseUnits:m(1200/3937)},acres:{inBaseUnits:.0015625*m(1609.344)},ares:{inBaseUnits:100},hectares:{inBaseUnits:1e4}}},volume:{baseUnit:"liters",units:{liters:{inBaseUnits:1},"cubic-millimeters":{inBaseUnits:1e3*y(.001)},"cubic-centimeters":{inBaseUnits:1e3*y(.01)},"cubic-decimeters":{inBaseUnits:1e3*y(.1)},"cubic-meters":{inBaseUnits:1e3},"cubic-kilometers":{inBaseUnits:1e3*y(1e3)},"cubic-inches":{inBaseUnits:1e3*y(.0254)},"cubic-feet":{inBaseUnits:1e3*y(.3048)},"cubic-yards":{inBaseUnits:1e3*y(.9144)},"cubic-miles":{inBaseUnits:1e3*y(1609.344)}}},angle:{baseUnit:"radians",units:{radians:{inBaseUnits:1},degrees:{inBaseUnits:Math.PI/180}}}},O=function(){const e={};for(const t in g)for(const r in g[t].units)e[r]=t;return e}();const j=["metric","imperial","square-inches","square-feet","square-yards","square-miles","square-us-feet","square-meters","square-kilometers","acres","ares","hectares"],v=["metric","imperial","inches","feet","yards","miles","nautical-miles","us-feet","meters","kilometers"];function w(e){return"imperial"===e||"metric"===e}function S(e){const t=O[e];if(t)return t;throw new Error("unknown measure")}function x(e){return function(e){return g[e].baseUnit}(S(e))}function T(e,t=null){return t=t||S(e),g[t].baseUnit===e}function _(e,t,r){if(t===r)return e;const n=S(t);if(n!==S(r))throw new Error("incompatible units");const i=T(t,n)?e:function(e,t,r){return e*g[r].units[t].inBaseUnits}(e,t,n);return T(r,n)?i:function(e,t,r){return e/g[r].units[t].inBaseUnits}(i,r,n)}function F(e,t){return _(e,t,"meters")<3e3?"meters":"kilometers"}function I(e,t){return _(e,t,"meters")<1e5?"meters":"kilometers"}function k(e,t){return _(e,t,"feet")<1e3?"feet":"miles"}function M(e,t){return _(e,t,"feet")<1e5?"feet":"miles"}function R(e,t){return _(e,t,"square-meters")<3e6?"square-meters":"square-kilometers"}function P(e,t){return _(e,t,"square-feet")<1e6?"square-feet":"square-miles"}function N(e,t,r){return _(e,t,"meters")/(r*Math.PI/180)}function q(e){return b.fromJSON(e.toLowerCase())||null}function C(e){if(e&&"object"==typeof e&&!Object(a.f)(e))return 1;const t=U(e);return t>1e5?1:t}function E(e){return U(e)>=(e instanceof s.a?Object(i.e)(e).metersPerDegree:1e5)?"meters":A(e)}function U(e,t=o.a.metersPerDegree){return z(e,!0)||t}function z(e,t=!1){let r,n,i=null;if(null!=e&&("object"==typeof e?(r=e.wkid,n=e.wkt):"number"==typeof e?r=e:"string"==typeof e&&(n=e)),r){if(Object(a.l)(r))return o.b.metersPerDegree;if(Object(a.m)(r))return o.c.metersPerDegree;i=h.values[h[r]],!i&&t&&f.has(r)&&(i=u)}else if(n)if(-1!==n.search(/^PROJCS/i)){const e=d.exec(n);e&&e[1]&&(i=parseFloat(e[1].split(",")[1]))}else if(-1!==n.search(/^GEOCCS/i)){const e=p.exec(n);e&&e[1]&&(i=parseFloat(e[1].split(",")[1]))}return i}function A(e){let t,r,n=null;if(null!=e&&("object"==typeof e?(t=e.wkid,r=e.wkt):"number"==typeof e?t=e:"string"==typeof e&&(r=e)),t)n=h.units[h[t]];else if(r&&-1!==r.search(/^PROJCS/i)){let e=d.exec(r);e&&e[1]&&(e=/[\\"\\']{1}([^\\"\\']+)/.exec(e[1]),n=e&&e[1])}return n?q(n):null}function D(e){if(!e)return null;switch(A(e)){case"feet":case"us-feet":case"clarke-feet":case"clarke-yards":case"clarke-links":case"sears-yards":case"sears-feet":case"sears-chains":case"benoit-1895-b-chains":case"indian-yards":case"indian-1937-yards":case"gold-coast-feet":case"sears-1922-truncated-chains":return"imperial";case"50-kilometers":case"150-kilometers":case"meters":return"metric";case null:case void 0:return null}return null}const G={esriAcres:"acres",esriAres:"ares",esriHectares:"hectares",esriSquareCentimeters:"square-centimeters",esriSquareDecimeters:"square-decimeters",esriSquareFeet:"square-feet",esriSquareInches:"square-inches",esriSquareKilometers:"square-kilometers",esriSquareMeters:"square-meters",esriSquareMiles:"square-miles",esriSquareMillimeters:"square-millimeters",esriSquareUsFeet:"square-us-feet",esriSquareYards:"square-yards"},L={esriCentimeters:"centimeters",esriDecimeters:"decimeters",esriFeet:"feet",esriInches:"inches",esriKilometers:"kilometers",esriMeters:"meters",esriMiles:"miles",esriMillimeters:"millimeters",esriNauticalMiles:"nautical-miles",esriYards:"yards"},V=Object(n.b)()(G),B=Object(n.b)()(L);Object(n.b)()({...G,...L})},112:function(e,t,r){"use strict";var n=r(79),i=r(91),s=r(103),o=r(83),a=r(81),c=r(80);let l=class extends i.a{constructor(e){super(e),this._groups=new Map}destroy(){this.removeAll()}get size(){let e=0;return this._groups.forEach((t=>{e+=t.length})),e}add(e,t){if(!this._isHandle(e)&&!Array.isArray(e)&&!s.a.isCollection(e))return this;const r=this._getOrCreateGroup(t);return Array.isArray(e)||s.a.isCollection(e)?e.forEach((e=>this._isHandle(e)&&r.push(e))):r.push(e),this.notifyChange("size"),this}forEach(e,t){if("function"==typeof e)this._groups.forEach((t=>t.forEach(e)));else{const r=this._getGroup(e);r&&t&&r.forEach(t)}}has(e){return this._groups.has(this._ensureGroupKey(e))}remove(e){if(Array.isArray(e)||s.a.isCollection(e))return e.forEach(this.remove,this),this;if(!this.has(e))return this;const t=this._getGroup(e);for(let r=0;r<t.length;r++)t[r].remove();return this._deleteGroup(e),this.notifyChange("size"),this}removeAll(){return this._groups.forEach((e=>{for(let t=0;t<e.length;t++)e[t].remove()})),this._groups.clear(),this.notifyChange("size"),this}_isHandle(e){return e&&!!e.remove}_getOrCreateGroup(e){if(this.has(e))return this._getGroup(e);const t=[];return this._groups.set(this._ensureGroupKey(e),t),t}_getGroup(e){return Object(o.d)(this._groups.get(this._ensureGroupKey(e)))}_deleteGroup(e){return this._groups.delete(this._ensureGroupKey(e))}_ensureGroupKey(e){return e||"_default_"}};Object(n.a)([Object(a.b)({readOnly:!0})],l.prototype,"size",null),l=Object(n.a)([Object(c.a)("esri.core.Handles")],l);var u=l;t.a=u},114:function(e,t,r){"use strict";r.d(t,"a",(function(){return L})),r.d(t,"b",(function(){return V})),r.d(t,"c",(function(){return g})),r.d(t,"d",(function(){return w})),r.d(t,"e",(function(){return S})),r.d(t,"f",(function(){return m})),r.d(t,"g",(function(){return b})),r.d(t,"h",(function(){return x})),r.d(t,"i",(function(){return F})),r.d(t,"j",(function(){return X})),r.d(t,"k",(function(){return f})),r.d(t,"l",(function(){return u})),r.d(t,"m",(function(){return h})),r.d(t,"n",(function(){return j})),r.d(t,"o",(function(){return T})),r.d(t,"p",(function(){return _})),r.d(t,"q",(function(){return I})),r.d(t,"r",(function(){return H})),r.d(t,"s",(function(){return G})),r.d(t,"t",(function(){return A})),r.d(t,"u",(function(){return D})),r.d(t,"v",(function(){return U})),r.d(t,"w",(function(){return B})),r.d(t,"x",(function(){return y})),r.d(t,"y",(function(){return J})),r.d(t,"z",(function(){return Q}));var n=r(85),i=r(83),s=r(117),o=r(160),a=r(149);const c=["field","field2","field3","normalizationField","rotationInfo.field","proportionalSymbolInfo.field","proportionalSymbolInfo.normalizationField","colorInfo.field","colorInfo.normalizationField"],l=["field","normalizationField"];function u(e,t){if(null!=e&&null!=t)for(const r of Array.isArray(e)?e:[e])if(d(c,r,t),"visualVariables"in r&&r.visualVariables)for(const e of r.visualVariables)d(l,e,t)}function d(e,t,r){if(e)for(const n of e){const e=Object(s.b)(n,t),i=e&&"function"!=typeof e&&r.get(e);i&&Object(s.c)(n,i.name,t)}}function h(e,t){if(null!=e&&null!=t&&t.fields.length)if("startField"in e){const r=t.get(e.startField),n=t.get(e.endField);e.startField=r&&r.name||null,e.endField=n&&n.name||null}else{const r=t.get(e.startTimeField),n=t.get(e.endTimeField);e.startTimeField=r&&r.name||null,e.endTimeField=n&&n.name||null}}const p=new Set;function f(e,t){return e&&t?(p.clear(),b(p,e,t),Array.from(p).sort()):[]}function b(e,t,r){var n;if(r)if(null!=t&&null!=(n=t.fields)&&n.length)if(r.includes("*"))for(const{name:i}of t.fields)e.add(i);else for(const i of r)m(e,t,i);else{if(r.includes("*"))return e.clear(),void e.add("*");for(const t of r)e.add(t)}}function m(e,t,r){if("string"==typeof r)if(t){const n=t.get(r);n&&e.add(n.name)}else e.add(r)}function y(e,t){return Object(i.j)(t)||Object(i.j)(e)?[]:t.includes("*")?e.fields.map((e=>e.name)):t}async function g(e,t,r){if(!r)return;const{arcadeUtils:n}=await Object(a.e)(),i=n.extractFieldNames(r);for(const s of i)m(e,t,s)}async function O(e,t,i){if(i&&"1=1"!==i){const s=(await Promise.all([r.e(11),r.e(278)]).then(r.bind(null,360))).WhereClause.create(i,t);if(!s.isStandardized)throw new n.a("fieldUtils:collectFilterFields","Where clause is not standardized");b(e,t,s.fieldNames)}}function j({displayField:e,fields:t}){return e||(t&&t.length?v(t,"name-or-title")||v(t,"unique-identifier")||v(t,"type-or-category")||function(e){for(const t of e){if(!t||!t.name)continue;const e=t.name.toLowerCase();if(e.indexOf("name")>-1||e.indexOf("title")>-1)return t.name}return null}(t):null)}function v(e,t){for(const r of e)if(r&&r.valueType&&r.valueType===t)return r.name;return null}async function w(e,t){if(!t)return;const r=Object(s.b)("elevationInfo.featureExpressionInfo",t);return r?r.collectRequiredFields(e,t.fieldsIndex):void 0}async function S(e,t,r){t&&r&&"cluster"===r.type&&r.fields&&await Promise.all(r.fields.map((r=>async function(e,t,r){r.outStatistic.onStatisticValueExpression?g(e,t,r.outStatistic.onStatisticValueExpression):e.add(r.outStatistic.onStatisticField)}(e,t.fieldsIndex,r))))}async function x(e,t,r){t&&(t.timeInfo&&Object(i.k)(r)&&r.timeExtent&&b(e,t.fieldsIndex,[t.timeInfo.startField,t.timeInfo.endField]),t.floorInfo&&b(e,t.fieldsIndex,[t.floorInfo.floorField]),Object(i.k)(r)&&Object(i.k)(r.where)&&await O(e,t.fieldsIndex,r.where))}function T(e){if(!e)return[];const t="editFieldsInfo"in e&&e.editFieldsInfo;return t?f(e.fieldsIndex,[t&&t.creatorField,t&&t.creationDateField,t&&t.editorField,t&&t.editDateField]):[]}function _(e){if(!e)return[];const t=e.geometryFieldsInfo;return t?f(e.fieldsIndex,[t.shapeAreaField,t.shapeLengthField]):[]}async function F(e,t){const{labelingInfo:r,fieldsIndex:n}=t;r&&r.length&&await Promise.all(r.map((t=>async function(e,t,r){if(!r)return;const n=r.getLabelExpression(),i=r.where;if("arcade"===n.type)await g(e,t,n.expression);else{const r=n.expression.match(/{[^}]*}/g);r&&r.forEach((r=>{m(e,t,r.slice(1,-1))}))}await O(e,t,i)}(e,n,t))))}function I(e){const t=e.defaultValue;return void 0!==t&&E(e,t)?t:e.nullable?null:void 0}function k(e){return"number"==typeof e&&!isNaN(e)&&isFinite(e)}function M(e){return null===e||k(e)}const R="isInteger"in Number?Number.isInteger:e=>"number"==typeof e&&isFinite(e)&&Math.floor(e)===e;function P(e){return null===e||R(e)}function N(e){return null!=e&&"string"==typeof e}function q(e){return null===e||N(e)}function C(){return!0}function E(e,t){let r;switch(e.type){case"date":case"integer":case"long":case"small-integer":case"esriFieldTypeDate":case"esriFieldTypeInteger":case"esriFieldTypeLong":case"esriFieldTypeSmallInteger":r=e.nullable?P:R;break;case"double":case"single":case"esriFieldTypeSingle":case"esriFieldTypeDouble":r=e.nullable?M:k;break;case"string":case"esriFieldTypeString":r=e.nullable?q:N;break;default:r=C}return 1===arguments.length?r:r(t)}const U=["integer","small-integer","single","double"],z=new Set([...U,"esriFieldTypeInteger","esriFieldTypeSmallInteger","esriFieldTypeSingle","esriFieldTypeDouble"]);function A(e){return null!=e&&z.has(e.type)}function D(e){return null!=e&&("string"===e.type||"esriFieldTypeString"===e.type)}function G(e){return null!=e&&("date"===e.type||"esriFieldTypeDate"===e.type)}var L,V;function B(e){return null==e||"number"==typeof e&&isNaN(e)?null:e}function J(e,t){return e.nullable&&null===t?null:A(e)&&!function(e,t){const r="string"==typeof e?$(e):e;return!!r&&(r.isInteger?R(t)&&t>=r.min&&t<=r.max:t>=r.min&&t<=r.max)}(e.type,Number(t))?L.OUT_OF_RANGE:E(e,t)?e.domain?Object(o.e)(e.domain,t):null:V.INVALID_TYPE}function H(e){return Object(o.c)(e.domain)||(A(e)?$(e.type):void 0)}function $(e){switch(e){case"esriFieldTypeSmallInteger":case"small-integer":return W;case"esriFieldTypeInteger":case"integer":return Z;case"esriFieldTypeSingle":case"single":return Y;case"esriFieldTypeDouble":case"double":return K}}(L||(L={})).OUT_OF_RANGE="numeric-range-validation-error::out-of-range",function(e){e.INVALID_TYPE="type-validation-error::invalid-type"}(V||(V={}));const W={min:-32768,max:32767,isInteger:!0},Z={min:-2147483648,max:2147483647,isInteger:!0},Y={min:-34e37,max:12e37,isInteger:!1},K={min:-Number.MAX_VALUE,max:Number.MAX_VALUE,isInteger:!1};function Q(e,t,r){switch(e){case o.a.INVALID_CODED_VALUE:return`Value ${r} is not in the coded domain - field: ${t.name}, domain: ${JSON.stringify(t.domain)}`;case o.a.VALUE_OUT_OF_RANGE:return`Value ${r} is out of the range of valid values - field: ${t.name}, domain: ${JSON.stringify(t.domain)}`;case V.INVALID_TYPE:return`Value ${r} is not a valid value for the field type - field: ${t.name}, type: ${t.type}, nullable: ${t.nullable}`;case L.OUT_OF_RANGE:{const{min:e,max:n}=$(t.type);return`Value ${r} is out of range for the number type - field: ${t.name}, type: ${t.type}, value range is ${e} to ${n}`}}}function X(e,t){return!function(e,t,r){if(!t||!t.attributes||!e){if(Object(i.k)(r))for(const t of e)r.add(t);return!0}const n=t.attributes;let s=!1;for(const o of e)if(!(o in n)){if(s=!0,!Object(i.k)(r))break;r.add(o)}return s}(e,t,null)}},121:function(e,t,r){"use strict";r.d(t,"a",(function(){return F})),r.d(t,"b",(function(){return h})),r.d(t,"c",(function(){return b})),r.d(t,"d",(function(){return m})),r.d(t,"e",(function(){return s})),r.d(t,"f",(function(){return w})),r.d(t,"g",(function(){return y})),r.d(t,"h",(function(){return g})),r.d(t,"i",(function(){return j})),r.d(t,"j",(function(){return O})),r.d(t,"k",(function(){return i})),r.d(t,"l",(function(){return T})),r.d(t,"m",(function(){return u})),r.d(t,"n",(function(){return l})),r.d(t,"o",(function(){return d})),r.d(t,"p",(function(){return a})),r.d(t,"q",(function(){return o})),r.d(t,"r",(function(){return f})),r.d(t,"s",(function(){return v})),r.d(t,"t",(function(){return S})),r.d(t,"u",(function(){return x})),r.d(t,"v",(function(){return c})),r.d(t,"w",(function(){return p}));r(77),r(83);var n=r(96);function i(e=I){return[e[0],e[1],e[2],e[3]]}function s(e){return[e[0],e[1],e[2],e[3]]}function o(e,t,r,n,s=i()){return s[0]=e,s[1]=t,s[2]=r,s[3]=n,s}function a(e,t=i()){return t[0]=e.xmin,t[1]=e.ymin,t[2]=e.xmax,t[3]=e.ymax,t}function c(e,t){return new n.a({xmin:e[0],ymin:e[1],xmax:e[2],ymax:e[3],spatialReference:t})}function l(e,t){t[0]<e[0]&&(e[0]=t[0]),t[0]>e[2]&&(e[2]=t[0]),t[1]<e[1]&&(e[1]=t[1]),t[1]>e[3]&&(e[3]=t[1])}function u(e,t,r=e){if("length"in t)_(t)?(r[0]=Math.min(e[0],t[0]),r[1]=Math.min(e[1],t[1]),r[2]=Math.max(e[2],t[2]),r[3]=Math.max(e[3],t[3])):2!==t.length&&3!==t.length||(r[0]=Math.min(e[0],t[0]),r[1]=Math.min(e[1],t[1]),r[2]=Math.max(e[2],t[0]),r[3]=Math.max(e[3],t[1]));else switch(t.type){case"extent":r[0]=Math.min(e[0],t.xmin),r[1]=Math.min(e[1],t.ymin),r[2]=Math.max(e[2],t.xmax),r[3]=Math.max(e[3],t.ymax);break;case"point":r[0]=Math.min(e[0],t.x),r[1]=Math.min(e[1],t.y),r[2]=Math.max(e[2],t.x),r[3]=Math.max(e[3],t.y)}return r}function d(e,t,r=e){const n=t.length;let i=e[0],s=e[1],o=e[2],a=e[3];for(let c=0;c<n;c++){const e=t[c];i=Math.min(i,e[0]),s=Math.min(s,e[1]),o=Math.max(o,e[0]),a=Math.max(a,e[1])}return r[0]=i,r[1]=s,r[2]=o,r[3]=a,r}function h(e){for(let t=0;t<4;t++)if(!isFinite(e[t]))return!1;return!0}function p(e){return e[0]>=e[2]?0:e[2]-e[0]}function f(e){return e[1]>=e[3]?0:e[3]-e[1]}function b(e){return p(e)*f(e)}function m(e,t=[0,0]){return t[0]=(e[0]+e[2])/2,t[1]=(e[1]+e[3])/2,t}function y(e,t){return O(e,t[0],t[1])}function g(e,t){return O(e,t.x,t.y)}function O(e,t,r){return t>=e[0]&&r>=e[1]&&t<=e[2]&&r<=e[3]}function j(e,t,r){return t[0]>=e[0]-r&&t[1]>=e[1]-r&&t[0]<=e[2]+r&&t[1]<=e[3]+r}function v(e,t){return Math.max(t[0],e[0])<=Math.min(t[2],e[2])&&Math.max(t[1],e[1])<=Math.min(t[3],e[3])}function w(e,t){return t[0]>=e[0]&&t[2]<=e[2]&&t[1]>=e[1]&&t[3]<=e[3]}function S(e,t,r,n=e){return n[0]=e[0]+t,n[1]=e[1]+r,n[2]=e[2]+t,n[3]=e[3]+r,n}function x(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e}function T(e){return e?x(e,F):i(F)}function _(e){return 4===e.length}const F=[1/0,1/0,-1/0,-1/0],I=[0,0,0,0]},1314:function(e,t,r){"use strict";r.r(t),r.d(t,"FeatureServiceSnappingSourceWorker",(function(){return W}));var n=r(79),i=r(122),s=r(112),o=r(83),a=r(87),c=r(109),l=r(81),u=(r(77),r(82),r(78)),d=r(80),h=r(92),p=r(829),f=r(756),b=r(363),m=r(252),y=r(132),g=r(172),O=r(91);let j=class extends O.a{constructor(){super(...arguments),this.updating=!1,this.pending=[]}push(e,t){this.pending.push({promise:e,callback:t}),1===this.pending.length&&this.process()}process(){if(!this.pending.length)return void(this.updating=!1);this.updating=!0;const e=this.pending[0];e.promise.then((t=>e.callback(t))).catch((()=>{})).then((()=>{this.pending.shift(),this.process()}))}};Object(n.a)([Object(l.b)()],j.prototype,"updating",void 0),j=Object(n.a)([Object(d.a)("esri.core.AsyncSequence")],j);var v=r(152),w=r(180),S=r(96),x=r(121),T=r(159),_=r(383),F=r(208),I=r(146);class k{constructor(e,t){this.data=e,this.resolution=t,this.state={type:0},this.alive=!0}process(e){switch(this.state.type){case 0:return this.state=this.gotoFetchCount(this.state,e),this.state.task.promise.then(e.resume,e.resume);case 1:break;case 2:return this.state=this.gotoFetchFeatures(this.state,e),this.state.task.promise.then(e.resume,e.resume);case 3:break;case 4:this.state=this.goToDone(this.state,e)}return null}get debugInfo(){return{data:this.data,featureCount:this.featureCount,state:this.stateToString}}get featureCount(){switch(this.state.type){case 0:case 1:return 0;case 2:return this.state.featureCount;case 3:return this.state.previous.featureCount;case 4:return this.state.features.length;case 5:return this.state.previous.features.length}}get stateToString(){switch(this.state.type){case 0:return"created";case 1:return"fetch-count";case 2:return"fetched-count";case 3:return"fetch-features";case 4:return"fetched-features";case 5:return"done"}}gotoFetchCount(e,t){return{type:1,previous:e,task:Object(a.h)((async e=>{const r=await Object(I.d)(t.fetchCount(this,e));1===this.state.type&&(this.state=this.gotoFetchedCount(this.state,r.ok?r.value:1/0))}))}}gotoFetchedCount(e,t){return{type:2,featureCount:t,previous:e}}gotoFetchFeatures(e,t){return{type:3,previous:e,task:Object(a.h)((async r=>{const n=await Object(I.d)(t.fetchFeatures(this,e.featureCount,r));3===this.state.type&&(this.state=this.gotoFetchedFeatures(this.state,n.ok?n.value:[]))}))}}gotoFetchedFeatures(e,t){return{type:4,previous:e,features:t}}goToDone(e,t){return t.finish(this,e.features),{type:5,previous:e}}reset(){const e=this.state;switch(this.state={type:0},e.type){case 0:case 2:case 4:case 5:break;case 1:case 3:e.task.abort()}}intersects(e){return!(!Object(o.j)(e)&&this.data.extent)||(Object(x.p)(e,M),Object(x.s)(this.data.extent,M))}}const M=Object(x.k)(),R=u.a.getLogger("esri.views.interactive.snapping.featureSources.featureServiceSource.FeatureServiceTiledFetcher");let P=class extends v.a{constructor(e){super(e),this.tilesOfInterest=[],this.availability=0,this.pendingTiles=new Map,this.pendingEdits=new j,this.pendingEditsAbortController=Object(a.d)()}get minimumVerticesPerFeature(){var e;switch(null==(e=this.store)?void 0:e.featureStore.geometryType){case"esriGeometryPoint":case"esriGeometryMultipoint":return 1;case"esriGeometryPolygon":return 4;case"esriGeometryPolyline":return 2}}set filter(e){const t=this._get("filter"),r=this.filterProperties(e);JSON.stringify(t)!==JSON.stringify(r)&&this._set("filter",r)}set customParameters(e){const t=this._get("customParameters");JSON.stringify(t)!==JSON.stringify(e)&&this._set("customParameters",e)}get configuration(){return{filter:this.filter,customParameters:this.customParameters,tileInfo:this.tileInfo,tileSize:this.tileSize}}set tileInfo(e){const t=this._get("tileInfo");t!==e&&(Object(o.k)(e)&&Object(o.k)(t)&&JSON.stringify(e)===JSON.stringify(t)||(this._set("tileInfo",e),this.store.tileInfo=e))}set tileSize(e){this._get("tileSize")!==e&&this._set("tileSize",e)}get updating(){return this.updatingHandles.updating||this.pendingEdits.updating}initialize(){this.initializeFetchExtent(),this.updatingHandles.add(this,"configuration",(()=>this.refresh())),this.updatingHandles.add(this,"tilesOfInterest",((e,t)=>{Object(g.c)(e,t,(({id:e},{id:t})=>e===t))||this.process()}),1)}destroy(){this.pendingTiles.forEach((e=>this.deletePendingTile(e))),this.pendingTiles.clear(),this.store.destroy(),this.tilesOfInterest.length=0,this.pendingEditsAbortController.abort(),this.pendingEditsAbortController=null}refresh(){this.store.refresh(),this.pendingTiles.forEach((e=>this.deletePendingTile(e))),this.process()}applyEdits(e){this.pendingEdits.push(e,(async e=>{if(0===e.addedFeatures.length&&0===e.updatedFeatures.length&&0===e.deletedFeatures.length)return;for(const[,r]of this.pendingTiles)r.reset();const t={...e,deletedFeatures:e.deletedFeatures.map((({objectId:e,globalId:t})=>e&&-1!==e?e:this.lookupObjectIdByGlobalId(t)))};await this.updatingHandles.addPromise(this.store.processEdits(t,((e,t)=>this.queryFeaturesById(e,t)),this.pendingEditsAbortController.signal)),this.processPendingTiles()}))}initializeFetchExtent(){if(!this.capabilities.query.supportsExtent)return;const e=Object(a.h)((async e=>{try{var t;const r=await Object(F.executeQueryForExtent)(this.url,new y.a({where:"1=1",outSpatialReference:this.spatialReference,cacheHint:!!this.capabilities.query.supportsCacheHint||void 0}),{query:this.configuration.customParameters,signal:e});this.store.extent=S.a.fromJSON(null==(t=r.data)?void 0:t.extent)}catch(r){Object(a.u)(r),R.warn("Failed to fetch data extent",r)}}));this.updatingHandles.addPromise(e.promise.then((()=>this.process()))),this.handles.add(Object(w.c)((()=>e.abort())))}get debugInfo(){return{numberOfFeatures:this.store.featureStore.numFeatures,tilesOfInterest:this.tilesOfInterest,pendingTiles:Array.from(this.pendingTiles.values()).map((e=>e.debugInfo)),storedTiles:this.store.debugInfo}}process(){this.markTilesNotAlive(),this.createPendingTiles(),this.deletePendingTiles(),this.processPendingTiles()}markTilesNotAlive(){for(const[,e]of this.pendingTiles)e.alive=!1}createPendingTiles(){const e=this.collectMissingTilesInfo();if(this.setAvailability(Object(o.j)(e)?1:e.coveredArea/e.fullArea),!Object(o.j)(e))for(const{data:t,resolution:r}of e.missingTiles){const e=this.pendingTiles.get(t.id);e?(e.resolution=r,e.alive=!0):this.createPendingTile(t,r)}}collectMissingTilesInfo(){let e=null;for(let t=this.tilesOfInterest.length-1;t>=0;t--){const r=this.tilesOfInterest[t],n=this.store.process(r,((e,t)=>this.verifyTileComplexity(e,t)));Object(o.j)(e)?e=n:e.prepend(n)}return e}deletePendingTiles(){for(const[,e]of this.pendingTiles)e.alive||this.deletePendingTile(e)}processPendingTiles(){const e={fetchCount:(e,t)=>this.fetchCount(e,t),fetchFeatures:(e,t,r)=>this.fetchFeatures(e,t,r),finish:(e,t)=>this.finishPendingTile(e,t),resume:()=>this.processPendingTiles()};if(this.ensureFetchAllCounts(e))for(const[,t]of this.pendingTiles)this.verifyTileComplexity(this.store.getFeatureCount(t.data),t.resolution)&&this.updatingHandles.addPromise(t.process(e))}verifyTileComplexity(e,t){return this.verifyVertexComplexity(e)&&this.verifyFeatureDensity(e,t)}verifyVertexComplexity(e){return e*this.minimumVerticesPerFeature<C}verifyFeatureDensity(e,t){if(Object(o.j)(this.tileInfo))return!1;const r=this.tileSize*t;return e*(E/(r*r))<U}ensureFetchAllCounts(e){let t=!0;for(const[,r]of this.pendingTiles)r.state.type<2&&this.updatingHandles.addPromise(r.process(e)),r.state.type<=1&&(t=!1);return t}finishPendingTile(e,t){this.store.add(e.data,t),this.deletePendingTile(e),this.updateAvailability()}updateAvailability(){const e=this.collectMissingTilesInfo();this.setAvailability(Object(o.j)(e)?1:e.coveredArea/e.fullArea)}setAvailability(e){this._set("availability",e)}createPendingTile(e,t){const r=new k(e,t);return this.pendingTiles.set(e.id,r),r}deletePendingTile(e){e.reset(),this.pendingTiles.delete(e.data.id)}async fetchCount(e,t){return this.store.fetchCount(e.data,this.url,this.createCountQuery(e),{query:this.customParameters,timeout:q,signal:t})}async fetchFeatures(e,t,r){let n,i=0,s=0,a=t;for(;;){const c=this.createFeaturesQuery(e),l=this.setPagingParameters(c,i,a),{features:u,exceededTransferLimit:d}=await this.queryFeatures(c,r);if(l&&(i+=Object(o.s)(c.num)),s+=u.length,n=n?n.concat(u):u,a=t-s,!l||!d||a<=0)return n}}filterProperties(e){return Object(o.j)(e)?{where:"1=1",gdbVersion:void 0,timeExtent:void 0}:{where:e.where||"1=1",timeExtent:e.timeExtent,gdbVersion:e.gdbVersion}}lookupObjectIdByGlobalId(e){const t=this.globalIdField,r=this.objectIdField;if(Object(o.j)(t))throw new Error("Expected globalIdField to be defined");let n=null;if(this.store.featureStore.forEach((i=>{var s;e===i.attributes[t]&&(n=null!=(s=i.objectId)?s:i.attributes[r])})),Object(o.j)(n))throw new Error(`Expected to find a feature with globalId ${e}`);return n}queryFeaturesById(e,t){const r=this.createFeaturesQuery(null);return r.objectIds=e,this.queryFeatures(r,t)}queryFeatures(e,t){return this.capabilities.query.supportsFormatPBF?this.queryFeaturesPBF(e,t):this.queryFeaturesJSON(e,t)}async queryFeaturesPBF(e,t){const{sourceSpatialReference:r}=this,{data:n}=await Object(F.executeQueryPBF)(this.url,e,new _.b({sourceSpatialReference:r}),{query:this.configuration.customParameters,timeout:q,signal:t});return Object(T.y)(n)}async queryFeaturesJSON(e,t){const{sourceSpatialReference:r}=this,{data:n}=await Object(F.executeQuery)(this.url,e,r,{query:this.configuration.customParameters,timeout:q,signal:t});return Object(T.b)(n,this.objectIdField)}createCountQuery(e){const t=this.createBaseQuery(e);return this.capabilities.query.supportsCacheHint&&(t.cacheHint=!0),t}createFeaturesQuery(e){const t=this.createBaseQuery(e);return t.outFields=this.globalIdField?[this.globalIdField,this.objectIdField]:[this.objectIdField],t.returnGeometry=!0,Object(o.k)(e)&&(this.capabilities.query.supportsResultType?t.resultType="tile":this.capabilities.query.supportsCacheHint&&(t.cacheHint=!0)),t}createBaseQuery(e){const t=new y.a({returnZ:!1,returnM:!1,geometry:Object(o.k)(this.tileInfo)&&Object(o.k)(e)?Object(x.v)(e.data.extent,this.tileInfo.spatialReference):void 0}),r=this.configuration.filter;return Object(o.k)(r)&&(t.where=r.where,t.gdbVersion=r.gdbVersion,t.timeExtent=r.timeExtent),t.outSpatialReference=this.spatialReference,t}setPagingParameters(e,t,r){if(!this.capabilities.query.supportsPagination)return!1;const{supportsMaxRecordCountFactor:n,supportsCacheHint:i,tileMaxRecordCount:s,maxRecordCount:o,supportsResultType:a}=this.capabilities.query,c=n?y.a.MAX_MAX_RECORD_COUNT_FACTOR:1,l=c*((a||i)&&s?s:o||N);return e.start=t,n?(e.maxRecordCountFactor=Math.min(c,Math.ceil(r/l)),e.num=Math.min(r,e.maxRecordCountFactor*l)):e.num=Math.min(r,l),!0}};Object(n.a)([Object(l.b)({constructOnly:!0})],P.prototype,"url",void 0),Object(n.a)([Object(l.b)({constructOnly:!0})],P.prototype,"objectIdField",void 0),Object(n.a)([Object(l.b)({constructOnly:!0})],P.prototype,"globalIdField",void 0),Object(n.a)([Object(l.b)({constructOnly:!0})],P.prototype,"capabilities",void 0),Object(n.a)([Object(l.b)({constructOnly:!0})],P.prototype,"sourceSpatialReference",void 0),Object(n.a)([Object(l.b)({constructOnly:!0})],P.prototype,"spatialReference",void 0),Object(n.a)([Object(l.b)({constructOnly:!0})],P.prototype,"store",void 0),Object(n.a)([Object(l.b)({readOnly:!0})],P.prototype,"minimumVerticesPerFeature",null),Object(n.a)([Object(l.b)()],P.prototype,"filter",null),Object(n.a)([Object(l.b)()],P.prototype,"customParameters",null),Object(n.a)([Object(l.b)({readOnly:!0})],P.prototype,"configuration",null),Object(n.a)([Object(l.b)()],P.prototype,"tileInfo",null),Object(n.a)([Object(l.b)()],P.prototype,"tileSize",null),Object(n.a)([Object(l.b)()],P.prototype,"tilesOfInterest",void 0),Object(n.a)([Object(l.b)({readOnly:!0})],P.prototype,"updating",null),Object(n.a)([Object(l.b)({readOnly:!0})],P.prototype,"availability",void 0),P=Object(n.a)([Object(d.a)("esri.views.interactive.snapping.featureSources.featureServiceSource.FeatureServiceTiledFetcher")],P);const N=2e3,q=6e5,C=1e6,E=25,U=1;var z=r(581),A=r(1147);class D{constructor(){this._store=new Map,this._byteSize=0}set(e,t){this.delete(e),this._store.set(e,t),this._byteSize+=t.byteSize}delete(e){const t=this._store.get(e);return!!this._store.delete(e)&&(this._byteSize-=t.byteSize,!0)}get(e){return this.used(e),this._store.get(e)}has(e){return this.used(e),this._store.has(e)}clear(){this._store.clear()}applyByteSizeLimit(e,t){for(const[r,n]of this._store){if(this._byteSize<=e)break;this.delete(r),t(n)}}values(){return this._store.values()}[Symbol.iterator](){return this._store[Symbol.iterator]()}used(e){const t=this._store.get(e);t&&(this._store.delete(e),this._store.set(e,t))}}let G=class extends O.a{constructor(e){super(e),this.tileInfo=null,this.extent=null,this.maximumByteSize=10485760,this.tileBounds=new A.a,this.tiles=new D,this.refCounts=new Map,this.tileFeatureCounts=new Map,this.tmpBoundingRect=Object(x.k)()}add(e,t){const r=[];for(const n of t)0===this.referenceFeature(n.objectId)&&r.push(n);this.addTileStorage(e,new Set(t.map((({objectId:e})=>e))),this.byteSizeOfFeatures(t)),this.featureStore.addMany(r),this.tiles.applyByteSizeLimit(this.maximumByteSize,(e=>this.removeTileStorage(e)))}destroy(){this.clear(),this.tileFeatureCounts.clear()}clear(){this.featureStore.clear(),this.tileBounds.clear(),this.tiles.clear(),this.refCounts.clear()}refresh(){this.clear(),this.tileFeatureCounts.clear()}processEdits(e,t,r){return this.processEditsDelete(e.deletedFeatures.concat(e.updatedFeatures)),this.processEditsRefetch(e.addedFeatures.concat(e.updatedFeatures),t,r)}addTileStorage(e,t,r){this.tiles.set(e.id,new L(e,t,r)),this.tileBounds.set(e.id,e.extent),this.tileFeatureCounts.set(e.id,t.size)}remove({id:e}){const t=this.tiles.get(e);t&&this.removeTileStorage(t)}removeTileStorage(e){const t=[];for(const n of e.objectIds)1===this.unreferenceFeature(n)&&t.push(n);this.featureStore.removeManyById(t);const r=e.data.id;this.tiles.delete(r),this.tileBounds.delete(r)}processEditsDelete(e){this.featureStore.removeManyById(e);for(const[,t]of this.tiles){for(const r of e)t.objectIds.delete(r);this.tileFeatureCounts.set(t.data.id,t.objectIds.size)}for(const t of e)this.refCounts.delete(t)}async processEditsRefetch(e,t,r){const n=(await t(e,r)).features,{hasZ:i,hasM:s}=this.featureStore;for(const o of n){const e=Object(T.r)(this.tmpBoundingRect,o.geometry,i,s);this.tileBounds.forEachInBounds(e,(e=>{const t=this.tiles.get(e);this.featureStore.add(o),t.objectIds.has(o.objectId)||(t.objectIds.add(o.objectId),this.referenceFeature(o.objectId),this.tileFeatureCounts.set(t.data.id,t.objectIds.size))}))}}process(e,t=(()=>!0)){if(Object(o.j)(this.tileInfo)||!e.extent||Object(o.k)(this.extent)&&!Object(x.s)(Object(x.p)(this.extent,this.tmpBoundingRect),e.extent))return new B(e);if(this.tiles.has(e.id))return new B(e);const r=this.createTileTree(e,this.tileInfo);return this.simplify(r,t,null,0,1),this.collectMissingTiles(e,r,this.tileInfo)}get debugInfo(){return Array.from(this.tiles.values()).map((({data:e})=>({data:e,featureCount:this.tileFeatureCounts.get(e.id)||0})))}getFeatureCount(e){const t=this.tileFeatureCounts.get(e.id);return null!=t?t:0}async fetchCount(e,t,r,n){const i=this.tileFeatureCounts.get(e.id);if(null!=i)return i;const s=await Object(F.executeQueryForCount)(t,r,n);return this.tileFeatureCounts.set(e.id,s.data.count),s.data.count}createTileTree(e,t){const r=new V(e.level,e.row,e.col);return t.updateTileInfo(r,1),this.tileBounds.forEachInBounds(e.extent,(n=>{const i=this.tiles.get(n).data;this.tilesAreRelated(e,i)&&this.populateChildren(r,i,t,this.tileFeatureCounts.get(i.id)||0)})),r}tilesAreRelated(e,t){if(!e||!t)return!1;if(e.level===t.level)return e.row===t.row&&e.col===t.col;const r=e.level<t.level,n=r?e:t,i=r?t:e,s=1<<i.level-n.level;return Math.floor(i.row/s)===n.row&&Math.floor(i.col/s)===n.col}populateChildren(e,t,r,n){const i=t.level-e.level-1;if(i<0)return void(e.isLeaf=!0);const s=t.row>>i,a=t.col>>i,c=e.row<<1,l=a-(e.col<<1)+(s-c<<1),u=e.children[l];if(Object(o.k)(u))this.populateChildren(u,t,r,n);else{const i=new V(e.level+1,s,a);r.updateTileInfo(i,1),e.children[l]=i,this.populateChildren(i,t,r,n)}}simplify(e,t,r,n,i){const s=i*i;if(e.isLeaf)return t(this.getFeatureCount(e),i)?0:(this.remove(e),Object(o.k)(r)&&(r.children[n]=null),s);const a=i/2,c=a*a;let l=0;for(let u=0;u<e.children.length;u++){const r=e.children[u];l+=Object(o.k)(r)?this.simplify(r,t,e,u,a):c}return 0===l?this.mergeChildren(e):1-l/s<H&&(this.purge(e),Object(o.k)(r)&&(r.children[n]=null),l=s),l}mergeChildren(e){const t=new Set;let r=0;this.forEachLeaf(e,(e=>{const n=this.tiles.get(e.id);if(n){r+=n.byteSize;for(const e of n.objectIds)t.has(e)||(t.add(e),this.referenceFeature(e));this.remove(e)}})),this.addTileStorage(e,t,r),e.isLeaf=!0,e.children[0]=e.children[1]=e.children[2]=e.children[3]=null,this.tileFeatureCounts.set(e.id,t.size)}forEachLeaf(e,t){for(const r of e.children)Object(o.j)(r)||(r.isLeaf?t(r):this.forEachLeaf(r,t))}purge(e){if(!Object(o.j)(e))if(e.isLeaf)this.remove(e);else for(let t=0;t<e.children.length;t++){const r=e.children[t];this.purge(r),e.children[t]=null}}collectMissingTiles(e,t,r){const n=new J(r,e,this.extent);return this.collectMissingTilesRecurse(t,n,1),n.info}collectMissingTilesRecurse(e,t,r){if(e.isLeaf)return;if(!e.hasChildren)return void t.addMissing(e.level,e.row,e.col,r);const n=r/2;for(let i=0;i<e.children.length;i++){const r=e.children[i];Object(o.j)(r)?t.addMissing(e.level+1,(e.row<<1)+((2&i)>>1),(e.col<<1)+(1&i),n):this.collectMissingTilesRecurse(r,t,n)}}referenceFeature(e){const t=(this.refCounts.get(e)||0)+1;return this.refCounts.set(e,t),1===t?0:2}unreferenceFeature(e){const t=(this.refCounts.get(e)||0)-1;return 0===t?(this.refCounts.delete(e),1):(t>0&&this.refCounts.set(e,t),2)}byteSizeOfFeatures(e){let t=0;for(const r of e)t+=this.byteSizeOfFeature(r);return t}byteSizeOfFeature(e){return 32+this.byteSizeOfGeometry(e.geometry)+Object(z.a)(e.attributes)}byteSizeOfGeometry(e){if(!e)return 0;const t=Object(z.b)(e.lengths,4);return 32+Object(z.b)(e.coords,8)+t}get test(){return{tiles:Array.from(this.tiles.values()).map((e=>`${e.data.id}:[${Array.from(e.objectIds)}]`)),featureReferences:Array.from(this.refCounts.keys()).map((e=>`${e}:${this.refCounts.get(e)}`))}}};Object(n.a)([Object(l.b)({constructOnly:!0})],G.prototype,"featureStore",void 0),Object(n.a)([Object(l.b)()],G.prototype,"tileInfo",void 0),Object(n.a)([Object(l.b)()],G.prototype,"extent",void 0),Object(n.a)([Object(l.b)()],G.prototype,"maximumByteSize",void 0),G=Object(n.a)([Object(d.a)("esri.views.interactive.snapping.featureSources.featureServiceSource.FeatureServiceTileStore")],G);class L{constructor(e,t,r){this.data=e,this.objectIds=t,this.byteSize=r}}class V{constructor(e,t,r){this.level=e,this.row=t,this.col=r,this.isLeaf=!1,this.extent=null,this.children=[null,null,null,null]}get hasChildren(){return!this.isLeaf&&(Object(o.k)(this.children[0])||Object(o.k)(this.children[1])||Object(o.k)(this.children[2])||Object(o.k)(this.children[3]))}}class B{constructor(e,t=[]){this.missingTiles=t,this.fullArea=0,this.coveredArea=0,this.fullArea=Object(x.c)(e.extent),this.coveredArea=this.fullArea}prepend(e){this.missingTiles=e.missingTiles.concat(this.missingTiles),this.coveredArea+=e.coveredArea,this.fullArea+=e.fullArea}}class J{constructor(e,t,r){this.tileInfo=e,this.extent=null,this.info=new B(t),Object(o.k)(r)&&(this.extent=Object(x.p)(r))}addMissing(e,t,r,n){const i={id:null,level:e,row:t,col:r};this.tileInfo.updateTileInfo(i,1),!Object(o.k)(i.extent)||Object(o.k)(this.extent)&&!Object(x.s)(this.extent,i.extent)||(this.info.missingTiles.push({data:i,resolution:n}),this.info.coveredArea-=Object(x.c)(i.extent))}}const H=.18751;var $=r(289);let W=class extends i.a.EventedAccessor{constructor(){super(...arguments),this.isInitializing=!0,this.whenSetup=Object(a.f)(),this.handles=new s.a,this.updatingHandles=new $.a,this.pendingApplyEdits=new Map}get updating(){return this.featureFetcher.updating||this.isInitializing||this.updatingHandles.updating}destroy(){this.featureFetcher.destroy(),this.queryEngine.destroy(),this.featureStore.clear(),this.handles.destroy()}async setup(e){const{geometryType:t,objectIdField:r,timeInfo:n,fields:i}=e.serviceInfo;return this.featureStore=new p.a({...e.serviceInfo,hasZ:!1,hasM:!1}),this.queryEngine=new f.a({spatialReference:e.spatialReference,featureStore:this.featureStore,geometryType:t,fields:i,hasZ:!1,hasM:!1,objectIdField:r,timeInfo:n?m.a.fromJSON(n):null}),this.featureFetcher=new P({store:new G({featureStore:this.featureStore}),url:e.serviceInfo.url,objectIdField:e.serviceInfo.objectIdField,globalIdField:e.serviceInfo.globalIdField,capabilities:e.serviceInfo.capabilities,spatialReference:h.a.fromJSON(e.spatialReference),sourceSpatialReference:h.a.fromJSON(e.serviceInfo.spatialReference)}),this.handles.add([this.featureFetcher.watch("availability",(e=>this.emit("notify-availability",{availability:e})),!0),this.watch("updating",(()=>this.notifyUpdating()))]),this.whenSetup.resolve(),this.isInitializing=!1,this.configure(e.configuration)}async configure(e){return await this.updatingHandles.addPromise(this.whenSetup.promise),this.updateFeatureFetcherConfiguration(e),{result:{}}}async fetchCandidates(e,t){return await this.whenSetup.promise,Object(a.v)(t),{result:await this.queryEngine.executeQueryForSnapping({point:e.point,distance:e.distance,types:e.types,query:Object(o.k)(e.filter)?e.filter:{where:"1=1"}},Object(o.k)(t)?t.signal:null)}}async updateTiles(e,t){return await this.updatingHandles.addPromise(this.whenSetup.promise),Object(a.v)(t),this.featureFetcher.tileSize=e.tileSize,this.featureFetcher.tilesOfInterest=e.tiles,this.featureFetcher.tileInfo=Object(o.k)(e.tileInfo)?b.a.fromJSON(e.tileInfo):null,{result:{}}}async refresh(e,t){return await this.updatingHandles.addPromise(this.whenSetup.promise),Object(a.v)(t),this.featureFetcher.refresh(),{result:{}}}async whenNotUpdating(e,t){return await this.updatingHandles.addPromise(this.whenSetup.promise),Object(a.v)(t),await Object(a.y)(Object(c.i)(this,"updating"),t),{result:{}}}async getDebugInfo(e,t){return Object(a.v)(t),{result:this.featureFetcher.debugInfo}}async beginApplyEdits(e,t){this.updatingHandles.addPromise(this.whenSetup.promise),Object(a.v)(t);const r=Object(a.f)();return this.pendingApplyEdits.set(e.id,r),this.featureFetcher.applyEdits(r.promise),this.updatingHandles.addPromise(r.promise),{result:{}}}async endApplyEdits(e,t){const r=this.pendingApplyEdits.get(e.id);return r&&r.resolve(e.edits),Object(a.v)(t),{result:{}}}updateFeatureFetcherConfiguration(e){this.featureFetcher.filter=Object(o.k)(e.filter)?y.a.fromJSON(e.filter):null,this.featureFetcher.customParameters=e.customParameters}notifyUpdating(){this.emit("notify-updating",{updating:this.updating})}};Object(n.a)([Object(l.b)({readOnly:!0})],W.prototype,"updating",null),Object(n.a)([Object(l.b)()],W.prototype,"isInitializing",void 0),W=Object(n.a)([Object(d.a)("esri.views.interactive.snapping.featureSources.featureServiceSource.FeatureServiceSnappingSourceWorker")],W);t.default=function(){return new W}},132:function(e,t,r){"use strict";var n,i=r(79),s=r(95),o=r(135),a=r(88),c=r(84),l=r(86),u=r(83),d=r(81),h=r(108),p=(r(77),r(78),r(93)),f=r(80),b=r(89),m=r(82),y=r(97),g=r(174),O=r(263),j=r(260),v=r(92),w=r(105);const S=new a.a({esriSpatialRelIntersects:"intersects",esriSpatialRelContains:"contains",esriSpatialRelCrosses:"crosses",esriSpatialRelDisjoint:"disjoint",esriSpatialRelEnvelopeIntersects:"envelope-intersects",esriSpatialRelIndexIntersects:"index-intersects",esriSpatialRelOverlaps:"overlaps",esriSpatialRelTouches:"touches",esriSpatialRelWithin:"within",esriSpatialRelRelation:"relation"}),x=new a.a({esriSRUnit_Meter:"meters",esriSRUnit_Kilometer:"kilometers",esriSRUnit_Foot:"feet",esriSRUnit_StatuteMile:"miles",esriSRUnit_NauticalMile:"nautical-miles",esriSRUnit_USNauticalMile:"us-nautical-miles"});let T=n=class extends c.a{constructor(e){super(e),this.aggregateIds=null,this.cacheHint=void 0,this.datumTransformation=null,this.distance=void 0,this.dynamicDataSource=void 0,this.formatOf3DObjects=null,this.gdbVersion=null,this.geometry=null,this.geometryPrecision=void 0,this.groupByFieldsForStatistics=null,this.having=null,this.historicMoment=null,this.maxAllowableOffset=void 0,this.maxRecordCountFactor=1,this.multipatchOption=null,this.num=void 0,this.objectIds=null,this.orderByFields=null,this.outFields=null,this.outSpatialReference=null,this.outStatistics=null,this.parameterValues=null,this.pixelSize=null,this.quantizationParameters=null,this.rangeValues=null,this.relationParameter=null,this.resultType=null,this.returnCentroid=!1,this.returnDistinctValues=!1,this.returnExceededLimitFeatures=!0,this.returnGeometry=!1,this.returnQueryGeometry=!1,this.returnM=void 0,this.returnZ=void 0,this.sourceSpatialReference=null,this.spatialRelationship="intersects",this.start=void 0,this.sqlFormat=null,this.text=null,this.timeExtent=null,this.units=null,this.where=null}static from(e){return Object(m.d)(n,e)}castDatumTransformation(e){return"number"==typeof e||"object"==typeof e?e:null}writeHistoricMoment(e,t){t.historicMoment=e&&e.getTime()}writeParameterValues(e,t){if(e){const r={};for(const t in e){const n=e[t];Array.isArray(n)?r[t]=n.map((e=>e instanceof Date?e.getTime():e)):n instanceof Date?r[t]=n.getTime():r[t]=n}t.parameterValues=r}}writeStart(e,t){t.resultOffset=this.start,t.resultRecordCount=this.num||10,t.where="1=1"}writeWhere(e,t){t.where=e||"1=1"}clone(){return new n(Object(l.a)({aggregateIds:this.aggregateIds,cacheHint:this.cacheHint,datumTransformation:this.datumTransformation,distance:this.distance,gdbVersion:this.gdbVersion,geometry:this.geometry,geometryPrecision:this.geometryPrecision,groupByFieldsForStatistics:this.groupByFieldsForStatistics,having:this.having,historicMoment:Object(u.k)(this.historicMoment)?new Date(this.historicMoment.getTime()):null,maxAllowableOffset:this.maxAllowableOffset,maxRecordCountFactor:this.maxRecordCountFactor,multipatchOption:this.multipatchOption,num:this.num,objectIds:this.objectIds,orderByFields:this.orderByFields,outFields:this.outFields,outSpatialReference:this.outSpatialReference,outStatistics:this.outStatistics,parameterValues:this.parameterValues,pixelSize:this.pixelSize,quantizationParameters:this.quantizationParameters,rangeValues:this.rangeValues,relationParameter:this.relationParameter,resultType:this.resultType,returnDistinctValues:this.returnDistinctValues,returnGeometry:this.returnGeometry,returnCentroid:this.returnCentroid,returnExceededLimitFeatures:this.returnExceededLimitFeatures,returnQueryGeometry:this.returnQueryGeometry,returnM:this.returnM,returnZ:this.returnZ,dynamicDataSource:this.dynamicDataSource,sourceSpatialReference:this.sourceSpatialReference,spatialRelationship:this.spatialRelationship,start:this.start,sqlFormat:this.sqlFormat,text:this.text,timeExtent:this.timeExtent,units:this.units,where:this.where}))}};T.MAX_MAX_RECORD_COUNT_FACTOR=5,Object(i.a)([Object(d.b)({json:{write:!0}})],T.prototype,"aggregateIds",void 0),Object(i.a)([Object(d.b)({type:Boolean,json:{write:!0}})],T.prototype,"cacheHint",void 0),Object(i.a)([Object(d.b)({json:{write:!0}})],T.prototype,"datumTransformation",void 0),Object(i.a)([Object(h.a)("datumTransformation")],T.prototype,"castDatumTransformation",null),Object(i.a)([Object(d.b)({type:Number,json:{write:{overridePolicy:e=>({enabled:e>0})}}})],T.prototype,"distance",void 0),Object(i.a)([Object(d.b)({type:g.a,json:{write:!0}})],T.prototype,"dynamicDataSource",void 0),Object(i.a)([Object(d.b)({type:String,json:{write:!0}})],T.prototype,"formatOf3DObjects",void 0),Object(i.a)([Object(d.b)({type:String,json:{write:!0}})],T.prototype,"gdbVersion",void 0),Object(i.a)([Object(d.b)({types:s.a,json:{read:y.a,write:!0}})],T.prototype,"geometry",void 0),Object(i.a)([Object(d.b)({type:Number,json:{write:!0}})],T.prototype,"geometryPrecision",void 0),Object(i.a)([Object(d.b)({type:[String],json:{write:!0}})],T.prototype,"groupByFieldsForStatistics",void 0),Object(i.a)([Object(d.b)({type:String,json:{write:!0}})],T.prototype,"having",void 0),Object(i.a)([Object(d.b)({type:Date})],T.prototype,"historicMoment",void 0),Object(i.a)([Object(b.a)("historicMoment")],T.prototype,"writeHistoricMoment",null),Object(i.a)([Object(d.b)({type:Number,json:{write:!0}})],T.prototype,"maxAllowableOffset",void 0),Object(i.a)([Object(d.b)({type:Number,cast:e=>e<1?1:e>n.MAX_MAX_RECORD_COUNT_FACTOR?n.MAX_MAX_RECORD_COUNT_FACTOR:e,json:{write:{overridePolicy:e=>({enabled:e>1})}}})],T.prototype,"maxRecordCountFactor",void 0),Object(i.a)([Object(d.b)({type:["xyFootprint"],json:{write:!0}})],T.prototype,"multipatchOption",void 0),Object(i.a)([Object(d.b)({type:Number,json:{read:{source:"resultRecordCount"}}})],T.prototype,"num",void 0),Object(i.a)([Object(d.b)({json:{write:!0}})],T.prototype,"objectIds",void 0),Object(i.a)([Object(d.b)({type:[String],json:{write:!0}})],T.prototype,"orderByFields",void 0),Object(i.a)([Object(d.b)({type:[String],json:{write:!0}})],T.prototype,"outFields",void 0),Object(i.a)([Object(d.b)({type:v.a,json:{name:"outSR",write:!0}})],T.prototype,"outSpatialReference",void 0),Object(i.a)([Object(d.b)({type:[j.a],json:{write:{enabled:!0,overridePolicy(){return{enabled:Object(u.k)(this.outStatistics)&&this.outStatistics.length>0}}}}})],T.prototype,"outStatistics",void 0),Object(i.a)([Object(d.b)({json:{write:!0}})],T.prototype,"parameterValues",void 0),Object(i.a)([Object(b.a)("parameterValues")],T.prototype,"writeParameterValues",null),Object(i.a)([Object(d.b)({type:w.a,json:{write:!0}})],T.prototype,"pixelSize",void 0),Object(i.a)([Object(d.b)({type:O.a,json:{write:!0}})],T.prototype,"quantizationParameters",void 0),Object(i.a)([Object(d.b)({type:[Object],json:{write:!0}})],T.prototype,"rangeValues",void 0),Object(i.a)([Object(d.b)({type:String,json:{read:{source:"relationParam"},write:{target:"relationParam",overridePolicy(){return{enabled:"relation"===this.spatialRelationship}}}}})],T.prototype,"relationParameter",void 0),Object(i.a)([Object(d.b)({type:String,json:{write:!0}})],T.prototype,"resultType",void 0),Object(i.a)([Object(d.b)({type:Boolean,json:{default:!1,write:!0}})],T.prototype,"returnCentroid",void 0),Object(i.a)([Object(d.b)({type:Boolean,json:{default:!1,write:!0}})],T.prototype,"returnDistinctValues",void 0),Object(i.a)([Object(d.b)({type:Boolean,json:{default:!0,write:!0}})],T.prototype,"returnExceededLimitFeatures",void 0),Object(i.a)([Object(d.b)({type:Boolean,json:{write:!0}})],T.prototype,"returnGeometry",void 0),Object(i.a)([Object(d.b)({type:Boolean,json:{default:!1,write:!0}})],T.prototype,"returnQueryGeometry",void 0),Object(i.a)([Object(d.b)({type:Boolean,json:{default:!1,write:!0}})],T.prototype,"returnM",void 0),Object(i.a)([Object(d.b)({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],T.prototype,"returnZ",void 0),Object(i.a)([Object(d.b)({type:v.a,json:{write:!0}})],T.prototype,"sourceSpatialReference",void 0),Object(i.a)([Object(p.a)(S,{ignoreUnknown:!1,name:"spatialRel"})],T.prototype,"spatialRelationship",void 0),Object(i.a)([Object(d.b)({type:Number,json:{read:{source:"resultOffset"}}})],T.prototype,"start",void 0),Object(i.a)([Object(b.a)("start"),Object(b.a)("num")],T.prototype,"writeStart",null),Object(i.a)([Object(d.b)({type:String,json:{write:!0}})],T.prototype,"sqlFormat",void 0),Object(i.a)([Object(d.b)({type:String,json:{write:!0}})],T.prototype,"text",void 0),Object(i.a)([Object(d.b)({type:o.a,json:{write:!0}})],T.prototype,"timeExtent",void 0),Object(i.a)([Object(p.a)(x,{ignoreUnknown:!1}),Object(d.b)({json:{write:{overridePolicy(e){return{enabled:e&&this.distance>0}}}}})],T.prototype,"units",void 0),Object(i.a)([Object(d.b)({type:String,json:{write:{overridePolicy(e){return{enabled:null!=e||this.start>0}}}}})],T.prototype,"where",void 0),Object(i.a)([Object(b.a)("where")],T.prototype,"writeWhere",null),T=n=Object(i.a)([Object(f.a)("esri.rest.support.Query")],T);var _=T;t.a=_},135:function(e,t,r){"use strict";var n,i=r(79),s=r(84),o=r(83),a=r(178),c=r(81),l=(r(77),r(82),r(78),r(90)),u=r(80),d=r(89);let h=n=class extends s.a{constructor(e){super(e),this.end=null,this.start=null}static get allTime(){return p}static get empty(){return f}readEnd(e,t){return null!=t.end?new Date(t.end):null}writeEnd(e,t){t.end=e?e.getTime():null}get isAllTime(){return this.equals(n.allTime)}get isEmpty(){return this.equals(n.empty)}readStart(e,t){return null!=t.start?new Date(t.start):null}writeStart(e,t){t.start=e?e.getTime():null}clone(){return new n({end:this.end,start:this.start})}expandTo(e){if(this.isEmpty||this.isAllTime)return this.clone();const t=Object(o.b)(this.start,(t=>Object(a.c)(t,e))),r=Object(o.b)(this.end,(t=>Object(a.b)(Object(a.c)(t,e),1,e)));return new n({start:t,end:r})}intersection(e){if(!e)return this.clone();if(this.isEmpty||e.isEmpty)return n.empty;if(this.isAllTime)return e.clone();if(e.isAllTime)return this.clone();const t=Object(o.n)(this.start,-1/0,(e=>e.getTime())),r=Object(o.n)(this.end,1/0,(e=>e.getTime())),i=Object(o.n)(e.start,-1/0,(e=>e.getTime())),s=Object(o.n)(e.end,1/0,(e=>e.getTime()));let a,c;if(i>=t&&i<=r?a=i:t>=i&&t<=s&&(a=t),r>=i&&r<=s?c=r:s>=t&&s<=r&&(c=s),!isNaN(a)&&!isNaN(c)){const e=new n;return e.start=a===-1/0?null:new Date(a),e.end=c===1/0?null:new Date(c),e}return n.empty}offset(e,t){if(this.isEmpty||this.isAllTime)return this.clone();const r=new n,{start:i,end:s}=this;return Object(o.k)(i)&&(r.start=Object(a.b)(i,e,t)),Object(o.k)(s)&&(r.end=Object(a.b)(s,e,t)),r}equals(e){if(!e)return!1;const t=Object(o.k)(this.start)?this.start.getTime():this.start,r=Object(o.k)(this.end)?this.end.getTime():this.end,n=Object(o.k)(e.start)?e.start.getTime():e.start,i=Object(o.k)(e.end)?e.end.getTime():e.end;return t===n&&r===i}union(e){if(!e||e.isEmpty)return this.clone();if(this.isEmpty)return e.clone();if(this.isAllTime||e.isAllTime)return p.clone();const t=Object(o.k)(this.start)&&Object(o.k)(e.start)?new Date(Math.min(this.start.getTime(),e.start.getTime())):null,r=Object(o.k)(this.end)&&Object(o.k)(e.end)?new Date(Math.max(this.end.getTime(),e.end.getTime())):null;return new n({start:t,end:r})}};Object(i.a)([Object(c.b)({type:Date,json:{write:{allowNull:!0}}})],h.prototype,"end",void 0),Object(i.a)([Object(l.a)("end")],h.prototype,"readEnd",null),Object(i.a)([Object(d.a)("end")],h.prototype,"writeEnd",null),Object(i.a)([Object(c.b)({readOnly:!0,json:{read:!1}})],h.prototype,"isAllTime",null),Object(i.a)([Object(c.b)({readOnly:!0,json:{read:!1}})],h.prototype,"isEmpty",null),Object(i.a)([Object(c.b)({type:Date,json:{write:{allowNull:!0}}})],h.prototype,"start",void 0),Object(i.a)([Object(l.a)("start")],h.prototype,"readStart",null),Object(i.a)([Object(d.a)("start")],h.prototype,"writeStart",null),h=n=Object(i.a)([Object(u.a)("esri.TimeExtent")],h);const p=new h,f=new h({start:void 0,end:void 0});var b=h;t.a=b},146:function(e,t,r){"use strict";r.d(t,"a",(function(){return s})),r.d(t,"b",(function(){return o})),r.d(t,"c",(function(){return a})),r.d(t,"d",(function(){return c}));var n=r(83),i=r(87);function s(e,t,r){return Object(i.j)(e.map(((e,n)=>t.apply(r,[e,n]))))}function o(e,t,r){return Object(i.j)(e.map(((e,n)=>t.apply(r,[e,n])))).then((e=>e.map((e=>e.value))))}function a(e){return Object(n.j)(e)?Object(i.t)():e.then((e=>({ok:!0,value:e}))).catch((e=>({ok:!1,error:e})))}function c(e){return e.then((e=>({ok:!0,value:e}))).catch((e=>(Object(i.u)(e),{ok:!1,error:e})))}},147:function(e,t,r){"use strict";var n,i=r(79),s=r(88),o=r(84),a=r(81),c=(r(77),r(82)),l=(r(78),r(93)),u=r(90),d=r(80),h=r(160),p=r(241);const f=new s.a({binary:"binary",coordinate:"coordinate",countOrAmount:"count-or-amount",dateAndTime:"date-and-time",description:"description",locationOrPlaceName:"location-or-place-name",measurement:"measurement",nameOrTitle:"name-or-title",none:"none",orderedOrRanked:"ordered-or-ranked",percentageOrRatio:"percentage-or-ratio",typeOrCategory:"type-or-category",uniqueIdentifier:"unique-identifier"});let b=n=class extends o.a{constructor(e){super(e),this.alias=null,this.defaultValue=void 0,this.description=null,this.domain=null,this.editable=!0,this.length=-1,this.name=null,this.nullable=!0,this.type=null,this.valueType=null}readDescription(e,{description:t}){let r;try{r=JSON.parse(t)}catch(n){}return r?r.value:null}readValueType(e,{description:t}){let r;try{r=JSON.parse(t)}catch(n){}return r?f.fromJSON(r.fieldValueType):null}clone(){return new n({alias:this.alias,defaultValue:this.defaultValue,description:this.description,domain:this.domain&&this.domain.clone()||null,editable:this.editable,length:this.length,name:this.name,nullable:this.nullable,type:this.type,valueType:this.valueType})}};Object(i.a)([Object(a.b)({type:String,json:{write:!0}})],b.prototype,"alias",void 0),Object(i.a)([Object(a.b)({type:[String,Number],json:{write:{allowNull:!0}}})],b.prototype,"defaultValue",void 0),Object(i.a)([Object(a.b)()],b.prototype,"description",void 0),Object(i.a)([Object(u.a)("description")],b.prototype,"readDescription",null),Object(i.a)([Object(a.b)({types:h.d,json:{read:{reader:h.b},write:!0}})],b.prototype,"domain",void 0),Object(i.a)([Object(a.b)({type:Boolean,json:{write:!0}})],b.prototype,"editable",void 0),Object(i.a)([Object(a.b)({type:c.a,json:{write:!0}})],b.prototype,"length",void 0),Object(i.a)([Object(a.b)({type:String,json:{write:!0}})],b.prototype,"name",void 0),Object(i.a)([Object(a.b)({type:Boolean,json:{write:!0}})],b.prototype,"nullable",void 0),Object(i.a)([Object(l.a)(p.a)],b.prototype,"type",void 0),Object(i.a)([Object(a.b)()],b.prototype,"valueType",void 0),Object(i.a)([Object(u.a)("valueType",["description"])],b.prototype,"readValueType",null),b=n=Object(i.a)([Object(d.a)("esri.layers.support.Field")],b);var m=b;t.a=m},152:function(e,t,r){"use strict";r.d(t,"a",(function(){return u})),r.d(t,"b",(function(){return l}));var n=r(79),i=r(91),s=r(112),o=r(81),a=r(80),c=r(289);const l=e=>{let t=class extends e{destroy(){this.destroyed||(this.handles.destroy(),this.updatingHandles.destroy())}get handles(){return this._get("handles")||new s.a}get updatingHandles(){return this._get("updatingHandles")||new c.a}};return Object(n.a)([Object(o.b)({readOnly:!0})],t.prototype,"handles",null),Object(n.a)([Object(o.b)({readOnly:!0})],t.prototype,"updatingHandles",null),t=Object(n.a)([Object(a.a)("esri.core.HandleOwner")],t),t};let u=class extends(l(i.a)){};u=Object(n.a)([Object(a.a)("esri.core.HandleOwner")],u)},158:function(e,t,r){"use strict";r.d(t,"a",(function(){return a})),r.d(t,"b",(function(){return c})),r.d(t,"c",(function(){return l})),r.d(t,"d",(function(){return u})),r.d(t,"e",(function(){return p})),r.d(t,"f",(function(){return f})),r.d(t,"g",(function(){return h})),r.d(t,"h",(function(){return d}));var n=r(92),i=r(129),s=r(102);function o(e){return new n.a({wkt:`GEOCCS["Spherical geocentric",\n    DATUM["Not specified",\n      SPHEROID["Sphere",${e.radius},0]],\n    PRIMEM["Greenwich",0.0,\n      AUTHORITY["EPSG","8901"]],\n    UNIT["m",1.0],\n    AXIS["Geocentric X",OTHER],\n    AXIS["Geocentric Y",EAST],\n    AXIS["Geocentric Z",NORTH]\n  ]`})}const a=o(i.a),c=o(i.b),l=o(i.c),u=new n.a({wkt:`GEOCCS["WGS 84",\n  DATUM["WGS_1984",\n    SPHEROID["WGS 84",${i.a.radius},298.257223563,\n      AUTHORITY["EPSG","7030"]],\n    AUTHORITY["EPSG","6326"]],\n  PRIMEM["Greenwich",0,\n    AUTHORITY["EPSG","8901"]],\n  UNIT["m",1.0,\n    AUTHORITY["EPSG","9001"]],\n  AXIS["Geocentric X",OTHER],\n  AXIS["Geocentric Y",OTHER],\n  AXIS["Geocentric Z",NORTH],\n  AUTHORITY["EPSG","4978"]\n]`});function d(e){return e&&e===i.b?c:e&&e===i.c?l:a}function h(e){return e&&(Object(s.h)(e)||e===c)?c:e&&(Object(s.i)(e)||e===l)?l:a}function p(e){return e&&(Object(s.h)(e)||e===c)?i.b:e&&(Object(s.i)(e)||e===l)?i.c:i.a}function f(e){return Object(s.l)(e)?i.b:Object(s.m)(e)?i.c:i.a}},159:function(e,t,r){"use strict";r.d(t,"a",(function(){return B})),r.d(t,"b",(function(){return Q})),r.d(t,"c",(function(){return J})),r.d(t,"d",(function(){return W})),r.d(t,"e",(function(){return H})),r.d(t,"f",(function(){return G})),r.d(t,"g",(function(){return D})),r.d(t,"h",(function(){return U})),r.d(t,"i",(function(){return $})),r.d(t,"j",(function(){return K})),r.d(t,"k",(function(){return Z})),r.d(t,"l",(function(){return P})),r.d(t,"m",(function(){return v})),r.d(t,"n",(function(){return z})),r.d(t,"o",(function(){return C})),r.d(t,"p",(function(){return ue})),r.d(t,"q",(function(){return re})),r.d(t,"r",(function(){return se})),r.d(t,"s",(function(){return le})),r.d(t,"t",(function(){return ee})),r.d(t,"u",(function(){return te})),r.d(t,"v",(function(){return y})),r.d(t,"w",(function(){return g})),r.d(t,"x",(function(){return ae})),r.d(t,"y",(function(){return X})),r.d(t,"z",(function(){return oe}));var n=r(85),i=r(78),s=r(97),o=r(250),a=r(275),c=r(161);function l(e,t){return e?t?4:3:t?3:2}const u=i.a.getLogger("esri.tasks.support.optimizedFeatureSet"),d={esriGeometryPoint:0,esriGeometryPolyline:2,esriGeometryPolygon:3,esriGeometryMultipoint:0},h=(e,t,r,n,i,s)=>{e[r]=i,e[r+1]=s},p=(e,t,r,n,i,s)=>{e[r]=i,e[r+1]=s,e[r+2]=t[n+2]},f=(e,t,r,n,i,s)=>{e[r]=i,e[r+1]=s,e[r+2]=t[n+3]},b=(e,t,r,n,i,s)=>{e[r]=i,e[r+1]=s,e[r+2]=t[n+2],e[r+3]=t[n+3]};function m(e,t,r,n){if(e){if(r)return t&&n?b:p;if(t&&n)return f}else if(t&&n)return p;return h}function y({scale:e,translate:t},r){return Math.round((r-t[0])/e[0])}function g({scale:e,translate:t},r){return Math.round((t[1]-r)/e[1])}function O({scale:e,translate:t},r){return r*e[0]+t[0]}function j({scale:e,translate:t},r){return t[1]-r*e[1]}function v(e,t,r){return e?t?r?I(e):x(e):r?_(e):w(e):null}function w(e){const t=e.coords;return{x:t[0],y:t[1]}}function S(e,t){return e.coords[0]=t.x,e.coords[1]=t.y,e}function x(e){const t=e.coords;return{x:t[0],y:t[1],z:t[2]}}function T(e,t){return e.coords[0]=t.x,e.coords[1]=t.y,e.coords[2]=t.z,e}function _(e){const t=e.coords;return{x:t[0],y:t[1],m:t[2]}}function F(e,t){return e.coords[0]=t.x,e.coords[1]=t.y,e.coords[2]=t.m,e}function I(e){const t=e.coords;return{x:t[0],y:t[1],z:t[2],m:t[3]}}function k(e,t){return e.coords[0]=t.x,e.coords[1]=t.y,e.coords[2]=t.z,e.coords[3]=t.m,e}function M(e,t){return e&&t?k:e?T:t?F:S}function R(e,t,r,n,i){const s=M(r,n);for(const a of t){const{geometry:t,attributes:r}=a;let n;t&&(n=s(new c.a,t)),e.push(new o.a(n,r,null,r[i]))}return e}function P(e,t,r){if(!e)return null;const n=l(t,r),i=[];for(let s=0;s<e.coords.length;s+=n){const t=[];for(let r=0;r<n;r++)t.push(e.coords[s+r]);i.push(t)}return t?r?{points:i,hasZ:t,hasM:r}:{points:i,hasZ:t}:r?{points:i,hasM:r}:{points:i}}function N(e,t,r,n,i){const s=l(r,n);for(const a of t){const t=a.geometry,r=a.attributes;let n;t&&(n=q(new c.a,t,s)),e.push(new o.a(n,r,null,r[i]))}return e}function q(e,t,r=l(t.hasZ,t.hasM)){e.lengths[0]=t.points.length;const n=e.coords;let i=0;for(const s of t.points)for(let e=0;e<r;e++)n[i++]=s[e];return e}function C(e,t,r){if(!e)return null;const n=l(t,r),{coords:i,lengths:s}=e,o=[];let a=0;for(const c of s){const e=[];for(let t=0;t<c;t++){const t=[];for(let e=0;e<n;e++)t.push(i[a++]);e.push(t)}o.push(e)}return t?r?{paths:o,hasZ:t,hasM:r}:{paths:o,hasZ:t}:r?{paths:o,hasM:r}:{paths:o}}function E(e,t,r,n,i){const s=l(r,n);for(const a of t){const t=a.geometry,r=a.attributes;let n;t&&(n=U(new c.a,t,s)),e.push(new o.a(n,r,null,r[i]))}return e}function U(e,t,r=l(t.hasZ,t.hasM)){const{lengths:n,coords:i}=e;let s=0;for(const o of t.paths){for(const e of o)for(let t=0;t<r;t++)i[s++]=e[t];n.push(o.length)}return e}function z(e,t,r){if(!e)return null;const n=l(t,r),{coords:i,lengths:s}=e,o=[];let a=0;for(const c of s){const e=[];for(let t=0;t<c;t++){const t=[];for(let e=0;e<n;e++)t.push(i[a++]);e.push(t)}o.push(e)}return t?r?{rings:o,hasZ:t,hasM:r}:{rings:o,hasZ:t}:r?{rings:o,hasM:r}:{rings:o}}function A(e,t,r,n,i){for(const s of t){const t=s.geometry,a=s.centroid,l=s.attributes;let u;t&&(u=D(new c.a,t,r,n)),a?e.push(new o.a(u,l,S(new c.a,a),l[i])):e.push(new o.a(u,l,null,l[i]))}return e}function D(e,t,r=t.hasZ,n=t.hasM){return G(e,t.rings,r,n),e}function G(e,t,r,n){const i=l(r,n),{lengths:s,coords:o}=e;let a=0;s.length=o.length=0;for(const c of t){for(const e of c)for(let t=0;t<i;t++)o[a++]=e[t];s.push(c.length)}return e}const L=[],V=[];function B(e,t,r,n,i){L[0]=e;const[s]=J(V,L,t,r,n,i);return L.length=V.length=0,s}function J(e,t,r,i,s,a){if(e.length=0,!r){for(const r of t){const t=r.attributes[a];e.push(new o.a(null,r.attributes,null,t))}return e}switch(r){case"esriGeometryPoint":return R(e,t,i,s,a);case"esriGeometryMultipoint":return N(e,t,i,s,a);case"esriGeometryPolyline":return E(e,t,i,s,a);case"esriGeometryPolygon":return A(e,t,i,s,a);default:u.error("convertToFeatureSet:unknown-geometry",new n.a(`Unable to parse unknown geometry type '${r}'`)),e.length=0}return e}function H(e,t,r,i,s,o){const a=e.length;switch(r){case"esriGeometryPoint":R(e,t,i,s,o);break;case"esriGeometryMultipoint":N(e,t,i,s,o);break;case"esriGeometryPolyline":E(e,t,i,s,o);break;case"esriGeometryPolygon":A(e,t,i,s,o);break;default:u.error("convertToFeatureSet:unknown-geometry",new n.a(`Unable to parse unknown geometry type '${r}'`))}for(let n=0;n<t.length;n++)e[n+a].geometryType=r,e[n+a].insertAfter=t[n].insertAfter,e[n+a].groupId=t[n].groupId;return e}function $(e,t,r,n){V[0]=e,Y(L,V,t,r,n);const i=L[0];return L.length=V.length=0,i}function W(e,t,r){if(!e)return null;const i=new c.a;return"hasZ"in e&&null==t&&(t=e.hasZ),"hasM"in e&&null==r&&(r=e.hasM),Object(s.f)(e)?M(null!=t?t:null!=e.z,null!=r?r:null!=e.m)(i,e):Object(s.g)(e)?D(i,e,t,r):Object(s.h)(e)?U(i,e,l(t,r)):Object(s.e)(e)?q(i,e,l(t,r)):void u.error("convertFromGeometry:unknown-geometry",new n.a(`Unable to parse unknown geometry type '${e}'`))}function Z(e,t,r,i){const s=e&&("coords"in e?e:e.geometry);if(!s)return null;switch(t){case"esriGeometryPoint":{let e=w;return r&&i?e=I:r?e=x:i&&(e=_),e(s)}case"esriGeometryMultipoint":return P(s,r,i);case"esriGeometryPolyline":return C(s,r,i);case"esriGeometryPolygon":return z(s,r,i);default:return void u.error("convertToGeometry:unknown-geometry",new n.a(`Unable to parse unknown geometry type '${t}'`))}}function Y(e,t,r,i,s){switch(e.length=0,r){case"esriGeometryPoint":return function(e,t,r,n){let i=w;r&&n?i=I:r?i=x:n&&(i=_);for(const s of t){const{geometry:t,attributes:r}=s,n=t?i(t):null;e.push({attributes:r,geometry:n})}return e}(e,t,i,s);case"esriGeometryMultipoint":return function(e,t,r,n){for(const i of t){const{geometry:t,attributes:s}=i;let o;t&&(o=P(t,r,n)),e.push({attributes:s,geometry:o})}return e}(e,t,i,s);case"esriGeometryPolyline":return function(e,t,r,n){for(const i of t){const{geometry:t,attributes:s}=i;let o;t&&(o=C(t,r,n)),e.push({attributes:s,geometry:o})}return e}(e,t,i,s);case"esriGeometryPolygon":return function(e,t,r,n){for(const i of t){const{geometry:t,attributes:s,centroid:o}=i;let a;if(t&&(a=z(t,r,n)),o){const t=w(o);e.push({attributes:s,centroid:t,geometry:a})}else e.push({attributes:s,geometry:a})}return e}(e,t,i,s);default:u.error("convertToFeatureSet:unknown-geometry",new n.a(`Unable to parse unknown geometry type '${r}'`))}return e}function K(e){const{objectIdFieldName:t,spatialReference:r,transform:n,fields:i,hasM:s,hasZ:o,features:a,geometryType:c,exceededTransferLimit:l,uniqueIdField:u,queryGeometry:d,queryGeometryType:h}=e,p={features:Y([],a,c,o,s),fields:i,geometryType:c,objectIdFieldName:t,spatialReference:r,uniqueIdField:u,queryGeometry:Z(d,h,!1,!1)};return n&&(p.transform=n),l&&(p.exceededTransferLimit=l),s&&(p.hasM=s),o&&(p.hasZ=o),p}function Q(e,t){const r=new a.a,{hasM:i,hasZ:s,features:o,objectIdFieldName:c,spatialReference:l,geometryType:d,exceededTransferLimit:h,transform:p,fields:f}=e;return f&&(r.fields=f),r.geometryType=d,r.objectIdFieldName=c||t,r.spatialReference=l,r.objectIdFieldName?(o&&J(r.features,o,d,s,i,r.objectIdFieldName),h&&(r.exceededTransferLimit=h),i&&(r.hasM=i),s&&(r.hasZ=s),p&&(r.transform=p),r):(u.error(new n.a("optimized-features:invalid-objectIdFieldName","objectIdFieldName is missing")),r)}function X(e){const{transform:t,features:r,hasM:n,hasZ:i}=e;if(!t)return e;for(const s of r)s.geometry&&oe(s.geometry,s.geometry,n,i,t),s.centroid&&oe(s.centroid,s.centroid,n,i,t);return e.transform=null,e}function ee(e,t){const{geometryType:r,features:n,hasM:i,hasZ:s}=t;if(!e)return t;for(let o=0;o<n.length;o++){const t=n[o],a=t.weakClone();a.geometry=new c.a,te(a.geometry,t.geometry,i,s,r,e),t.centroid&&(a.centroid=new c.a,te(a.centroid,t.centroid,i,s,"esriGeometryPoint",e)),n[o]=a}return t.transform=e,t}function te(e,t,r,n,i,s,o=r,a=n){if(e.lengths.length&&(e.lengths.length=0),e.coords.length&&(e.coords.length=0),!t||!t.coords.length)return null;const c=d[i],{coords:u,lengths:h}=t,p=l(r,n),f=l(r&&o,n&&a),b=m(r,n,o,a);if(!h.length)return b(e.coords,u,0,0,y(s,u[0]),g(s,u[1])),e.lengths.length&&(e.lengths.length=0),e.coords.length=p,e;let O,j,v,w,S=0,x=0,T=x;for(const l of h){if(l<c)continue;let t=0;x=T,v=O=y(s,u[S]),w=j=g(s,u[S+1]),b(e.coords,u,x,S,v,w),t++,S+=p,x+=f;for(let r=1;r<l;r++,S+=p)v=y(s,u[S]),w=g(s,u[S+1]),v===O&&w===j||(b(e.coords,u,x,S,v-O,w-j),x+=f,t++,O=v,j=w);t>=c&&(e.lengths.push(t),T=x)}return e.coords.length=T,e.coords.length?e:null}function re(e,t,r,n,i,s,o=r,a=n){if(e.lengths.length&&(e.lengths.length=0),e.coords.length&&(e.coords.length=0),!t||!t.coords.length)return null;const c=d[i],{coords:u,lengths:h}=t,p=l(r,n),f=l(r&&o,n&&a),b=m(r,n,o,a);if(!h.length)return b(e.coords,u,0,0,u[0],u[1]),e.lengths.length&&(e.lengths.length=0),e.coords.length=p,e;let y=0;const g=s*s;for(const l of h){if(l<c){y+=l*p;continue}const t=e.coords.length/f,r=y,n=y+(l-1)*p;b(e.coords,u,e.coords.length,r,u[r],u[r+1]),ie(e.coords,u,p,g,b,r,n),b(e.coords,u,e.coords.length,n,u[n],u[n+1]);const i=e.coords.length/f-t;i>=c?e.lengths.push(i):e.coords.length=t*f,y+=l*p}return e.coords.length?e:null}function ne(e,t,r,n){const i=e[t],s=e[t+1],o=e[r],a=e[r+1],c=e[n],l=e[n+1];let u=o,d=a,h=c-u,p=l-d;if(0!==h||0!==p){const e=((i-u)*h+(s-d)*p)/(h*h+p*p);e>1?(u=c,d=l):e>0&&(u+=h*e,d+=p*e)}return h=i-u,p=s-d,h*h+p*p}function ie(e,t,r,n,i,s,o){let a,c=n,l=0;for(let u=s+r;u<o;u+=r)a=ne(t,u,s,o),a>c&&(l=u,c=a);c>n&&(l-s>r&&ie(e,t,r,n,i,s,l),i(e,t,e.length,l,t[l],t[l+1]),o-l>r&&ie(e,t,r,n,i,l,o))}function se(e,t,r,n){if(!t||!t.coords||!t.coords.length)return null;const i=l(r,n);let s=Number.POSITIVE_INFINITY,o=Number.POSITIVE_INFINITY,a=Number.NEGATIVE_INFINITY,c=Number.NEGATIVE_INFINITY;if(t&&t.coords){const e=t.coords;for(let t=0;t<e.length;t+=i){const r=e[t],n=e[t+1];s=Math.min(s,r),a=Math.max(a,r),o=Math.min(o,n),c=Math.max(c,n)}}return e[0]=s,e[1]=o,e[2]=a,e[3]=c,e}function oe(e,t,r,n,i){const{coords:s,lengths:o}=t,a=r?n?b:p:n?p:h,c=l(r,n);if(!s.length)return e!==t&&(e.lengths.length=0,e.coords.length=0),e;if(!o.length)return a(e.coords,s,0,0,O(i,s[0]),j(i,s[1])),e!==t&&(e.lengths.length=0,e.coords.length=c),e;const[u,d]=i.scale;let f=0;for(let l=0;l<o.length;l++){const t=o[l];e.lengths[l]=t;let r=O(i,s[f]),n=j(i,s[f+1]);a(e.coords,s,f,f,r,n),f+=c;for(let i=1;i<t;i++,f+=c)r+=s[f]*u,n-=s[f+1]*d,a(e.coords,s,f,f,r,n)}return e!==t&&(e.lengths.length=o.length,e.coords.length=s.length),e}function ae(e,t,r,n,i,s){const o=l(r,n),a=m(r,n,i,s),c=t.coords;e.coords.length=0,e.lengths.length=0,e.lengths.push(...t.lengths);for(let l=0;l<c.length;l+=o)a(e.coords,c,e.coords.length,l,c[l],c[l+1]);return e}function ce(e,t,r,n){let i=0,s=e[n*t],o=e[n*(t+1)];for(let a=1;a<r;a++){const r=s+e[n*(t+a)],c=o+e[n*(t+a)+1],l=(r-s)*(c+o);s=r,o=c,i+=l}return.5*i}function le(e,t){const{coords:r,lengths:n}=e;let i=0,s=0;for(let o=0;o<n.length;o++)s+=ce(r,i,n[o],t),i+=o;return Math.abs(s)}function ue(e,t){const r=e.clone(),n=e.coords,i=e.lengths;let s=0;for(let o=0;o<i.length;o++){const e=i[o];let a=n[t*s],c=n[t*s+1];for(let i=1;i<e;i++){const e=a+n[t*(s+i)],o=c+n[t*(s+i)+1];r.coords[t*(s+i)]=e,r.coords[t*(s+i)+1]=o,a=e,c=o}s+=e}return r}},161:function(e,t,r){"use strict";class n{constructor(e=[],t=[],r=!1){this.lengths=null!=e?e:[],this.coords=null!=t?t:[],this.hasIndeterminateRingOrder=r}get isPoint(){return 0===this.lengths.length}forEachVertex(e){let t=0;this.lengths.length||e(this.coords[0],this.coords[1]);for(let r=0;r<this.lengths.length;r++){const n=this.lengths[r];for(let r=0;r<n;r++)e(this.coords[2*(r+t)],this.coords[2*(r+t)+1]);t+=n}}clone(){return new n(this.lengths.slice(),this.coords.slice(),this.hasIndeterminateRingOrder)}}t.a=n},174:function(e,t,r){"use strict";r.d(t,"a",(function(){return P}));var n,i=r(79),s=r(88),o=r(84),a=r(81),c=(r(77),r(108)),l=(r(78),r(93)),u=r(90),d=r(80),h=r(82),p=r(183),f=r(147),b=r(274),m=(r(95),r(92)),y=r(163);let g=n=class extends o.a{constructor(e){super(e),this.type="query-table"}clone(){var e;const{workspaceId:t,query:r,oidFields:i,spatialReference:s,geometryType:o}=this,a={workspaceId:t,query:r,oidFields:i,spatialReference:null!=(e=null==s?void 0:s.clone())?e:void 0,geometryType:o};return new n(a)}};var O;Object(i.a)([Object(l.a)({queryTable:"query-table"})],g.prototype,"type",void 0),Object(i.a)([Object(a.b)({type:String,json:{write:!0}})],g.prototype,"workspaceId",void 0),Object(i.a)([Object(a.b)({type:String,json:{write:!0}})],g.prototype,"query",void 0),Object(i.a)([Object(a.b)({type:String,json:{write:!0}})],g.prototype,"oidFields",void 0),Object(i.a)([Object(a.b)({type:m.a,json:{write:!0}})],g.prototype,"spatialReference",void 0),Object(i.a)([Object(l.a)(y.a)],g.prototype,"geometryType",void 0),g=n=Object(i.a)([Object(d.a)("esri.layers.support.source.QueryTableDataSource")],g);let j=O=class extends o.a{constructor(e){super(e),this.type="raster"}clone(){const{workspaceId:e,dataSourceName:t}=this;return new O({workspaceId:e,dataSourceName:t})}};var v;Object(i.a)([Object(l.a)({raster:"raster"})],j.prototype,"type",void 0),Object(i.a)([Object(a.b)({type:String,json:{write:!0}})],j.prototype,"dataSourceName",void 0),Object(i.a)([Object(a.b)({type:String,json:{write:!0}})],j.prototype,"workspaceId",void 0),j=O=Object(i.a)([Object(d.a)("esri.layers.support.source.RasterDataSource")],j);let w=v=class extends o.a{constructor(e){super(e),this.type="table"}clone(){const{workspaceId:e,gdbVersion:t,dataSourceName:r}=this;return new v({workspaceId:e,gdbVersion:t,dataSourceName:r})}};var S,x;Object(i.a)([Object(l.a)({table:"table"})],w.prototype,"type",void 0),Object(i.a)([Object(a.b)({type:String,json:{write:!0}})],w.prototype,"workspaceId",void 0),Object(i.a)([Object(a.b)({type:String,json:{write:!0}})],w.prototype,"gdbVersion",void 0),Object(i.a)([Object(a.b)({type:String,json:{write:!0}})],w.prototype,"dataSourceName",void 0),w=v=Object(i.a)([Object(d.a)("esri.layers.support.source.TableDataSource")],w);const T=Object(s.b)()({esriLeftInnerJoin:"left-inner-join",esriLeftOuterJoin:"left-outer-join"});let _=S=class extends o.a{constructor(e){super(e),this.type="join-table"}readLeftTableSource(e,t,r){return I()(e,t,r)}castLeftTableSource(e){return Object(h.k)(M(),e)}readRightTableSource(e,t,r){return I()(e,t,r)}castRightTableSource(e){return Object(h.k)(M(),e)}clone(){var e,t;const{leftTableKey:r,rightTableKey:n,leftTableSource:i,rightTableSource:s,joinType:o}=this,a={leftTableKey:r,rightTableKey:n,leftTableSource:null!=(e=null==i?void 0:i.clone())?e:void 0,rightTableSource:null!=(t=null==s?void 0:s.clone())?t:void 0,joinType:o};return new S(a)}};Object(i.a)([Object(l.a)({joinTable:"join-table"})],_.prototype,"type",void 0),Object(i.a)([Object(a.b)({type:String,json:{write:!0}})],_.prototype,"leftTableKey",void 0),Object(i.a)([Object(a.b)({type:String,json:{write:!0}})],_.prototype,"rightTableKey",void 0),Object(i.a)([Object(a.b)({json:{write:!0}})],_.prototype,"leftTableSource",void 0),Object(i.a)([Object(u.a)("leftTableSource")],_.prototype,"readLeftTableSource",null),Object(i.a)([Object(c.a)("leftTableSource")],_.prototype,"castLeftTableSource",null),Object(i.a)([Object(a.b)({json:{write:!0}})],_.prototype,"rightTableSource",void 0),Object(i.a)([Object(u.a)("rightTableSource")],_.prototype,"readRightTableSource",null),Object(i.a)([Object(c.a)("rightTableSource")],_.prototype,"castRightTableSource",null),Object(i.a)([Object(l.a)(T)],_.prototype,"joinType",void 0),_=S=Object(i.a)([Object(d.a)("esri.layers.support.source.JoinTableDataSource")],_);let F=null;function I(){return F||(F=Object(p.b)({types:M()})),F}let k=null;function M(){return k||(k={key:"type",base:null,typeMap:{"data-layer":P,"map-layer":b.a}}),k}const R={key:"type",base:null,typeMap:{"join-table":_,"query-table":g,raster:j,table:w}};let P=x=class extends o.a{constructor(e){super(e),this.type="data-layer"}clone(){const{fields:e,dataSource:t}=this;return new x({fields:e,dataSource:t})}};Object(i.a)([Object(l.a)({dataLayer:"data-layer"})],P.prototype,"type",void 0),Object(i.a)([Object(a.b)({type:[f.a],json:{write:!0}})],P.prototype,"fields",void 0),Object(i.a)([Object(a.b)({types:R,json:{write:!0}})],P.prototype,"dataSource",void 0),P=x=Object(i.a)([Object(d.a)("esri.layers.support.source.DataLayerSource")],P),P.from=Object(h.m)(P)},178:function(e,t,r){"use strict";r.d(t,"a",(function(){return a})),r.d(t,"b",(function(){return s})),r.d(t,"c",(function(){return o}));r(77);const n={milliseconds:1,seconds:1e3,minutes:6e4,hours:36e5,days:864e5,weeks:6048e5,months:26784e5,years:31536e6,decades:31536e7,centuries:31536e8},i={milliseconds:{getter:"getMilliseconds",setter:"setMilliseconds",multiplier:1},seconds:{getter:"getSeconds",setter:"setSeconds",multiplier:1},minutes:{getter:"getMinutes",setter:"setMinutes",multiplier:1},hours:{getter:"getHours",setter:"setHours",multiplier:1},days:{getter:"getDate",setter:"setDate",multiplier:1},weeks:{getter:"getDate",setter:"setDate",multiplier:7},months:{getter:"getMonth",setter:"setMonth",multiplier:1},years:{getter:"getFullYear",setter:"setFullYear",multiplier:1},decades:{getter:"getFullYear",setter:"setFullYear",multiplier:10},centuries:{getter:"getFullYear",setter:"setFullYear",multiplier:100}};function s(e,t,r){const n=new Date(e.getTime());if(t&&r){const e=i[r],{getter:s,setter:o,multiplier:a}=e;n[o](n[s]()+t*a)}return n}function o(e,t){switch(t){case"milliseconds":return new Date(e.getTime());case"seconds":return new Date(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds());case"minutes":return new Date(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes());case"hours":return new Date(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours());case"days":return new Date(e.getFullYear(),e.getMonth(),e.getDate());case"weeks":return new Date(e.getFullYear(),e.getMonth(),e.getDate()-e.getDay());case"months":return new Date(e.getFullYear(),e.getMonth(),1);case"years":return new Date(e.getFullYear(),0,1);case"decades":return new Date(e.getFullYear()-e.getFullYear()%10,0,1);case"centuries":return new Date(e.getFullYear()-e.getFullYear()%100,0,1);default:return new Date}}function a(e,t,r){return 0===e?0:e*n[t]/n[r]}},179:function(e,t,r){"use strict";r.d(t,"a",(function(){return i}));var n=r(88);const i=Object(n.b)()({esriTimeUnitsMilliseconds:"milliseconds",esriTimeUnitsSeconds:"seconds",esriTimeUnitsMinutes:"minutes",esriTimeUnitsHours:"hours",esriTimeUnitsDays:"days",esriTimeUnitsWeeks:"weeks",esriTimeUnitsMonths:"months",esriTimeUnitsYears:"years",esriTimeUnitsDecades:"decades",esriTimeUnitsCenturies:"centuries",esriTimeUnitsUnknown:void 0})},186:function(e,t,r){"use strict";r.r(t);var n=r(79),i=r(128),s=r(85),o=r(84),a=r(86),c=r(155),l=r(83),u=r(94),d=r(81),h=r(82),p=(r(77),r(78)),f=r(90),b=r(80),m=r(96),y=r(157),g=r(91),O=r(108);const j=p.a.getLogger("esri.portal.PortalItemResource");let v=class extends g.a{constructor(e){super(e),this.portalItem=null}normalizeCtorArgs(e){return e&&e.portalItem&&e.path?{...e,path:this.normalizePath(e.path,e.portalItem)}:e}set path(e){Object(l.k)(e)&&Object(u.s)(e)?j.error("portalitemresource:invalid-path","A portal item resource path must be relative"):this._set("path",e)}_castPath(e){return this.normalizePath(e,this.portalItem)}get url(){return this.portalItem&&this.path?`${this.portalItem.itemUrl}/resources/${this.path}`:null}get itemRelativeUrl(){return this.portalItem&&this.path?`./resources/${this.path}`:null}fetch(e="json",t){const r=this.url;if(Object(l.j)(r))throw new s.a("portal-item-resource:fetch","Portal item resource does not refer to a valid item or path");return this.portalItem.portal._request(r,{responseType:e,query:{token:this.portalItem.apiKey},signal:Object(l.i)(t,"signal")})}async update(e,t){return(await r.e(20).then(r.bind(null,825))).addOrUpdateResource(this,"update",e,t)}hasPath(){return Object(l.k)(this.path)}normalizePath(e,t){return Object(l.j)(e)?e:(e=e.replace(/^\/+/,""),Object(l.k)(t)&&Object(u.s)(e)&&(e=Object(u.C)(e,t.itemUrl)),e.replace(/^\/+/,"").replace(/^(\.\/)?resources\//,""))}};Object(n.a)([Object(d.b)()],v.prototype,"portalItem",void 0),Object(n.a)([Object(d.b)({type:String,value:null})],v.prototype,"path",null),Object(n.a)([Object(O.a)("path")],v.prototype,"_castPath",null),Object(n.a)([Object(d.b)({type:String,readOnly:!0})],v.prototype,"url",null),Object(n.a)([Object(d.b)({type:String,readOnly:!0})],v.prototype,"itemRelativeUrl",null),v=Object(n.a)([Object(b.a)("esri.portal.PortalItemResource")],v);var w=v;let S=class extends g.a{constructor(e){super(e),this.created=null,this.rating=null}};Object(n.a)([Object(d.b)()],S.prototype,"created",void 0),Object(n.a)([Object(d.b)()],S.prototype,"rating",void 0),S=Object(n.a)([Object(b.a)("esri.portal.PortalRating")],S);var x,T=S;let _=x=class extends(Object(o.b)(c.a)){constructor(e){super(e),this.access=null,this.accessInformation=null,this.apiKey=null,this.applicationProxies=null,this.avgRating=null,this.categories=null,this.created=null,this.culture=null,this.description=null,this.extent=null,this.groupCategories=null,this.id=null,this.itemControl=null,this.licenseInfo=null,this.modified=null,this.name=null,this.numComments=null,this.numRatings=null,this.numViews=null,this.owner=null,this.ownerFolder=null,this.portal=null,this.screenshots=null,this.size=null,this.snippet=null,this.sourceJSON=null,this.tags=null,this.title=null,this.type=null,this.typeKeywords=null,this.url=null}static from(e){return Object(h.d)(x,e)}destroy(){this.portal=null}get displayName(){const e=this.type,t=this.typeKeywords||[];let r=e;return"Feature Service"===e||"Feature Collection"===e?r=t.indexOf("Table")>-1?"Table":t.indexOf("Route Layer")>-1?"Route Layer":t.indexOf("Markup")>-1?"Markup":"Feature Layer":"Image Service"===e?r=t.indexOf("Elevation 3D Layer")>-1?"Elevation Layer":t.indexOf("Tiled Imagery")>-1?"Tiled Imagery Layer":"Imagery Layer":"Scene Service"===e?r="Scene Layer":"Scene Package"===e?r="Scene Layer Package":"Stream Service"===e?r="Feature Layer":"Geoprocessing Service"===e&&this.portal&&this.portal.isPortal?r=t.indexOf("Web Tool")>-1?"Tool":"Geoprocessing Service":"Geocoding Service"===e?r="Locator":"Geoenrichment Service"===e?r="GeoEnrichment Service":"Microsoft Powerpoint"===e?r="Microsoft PowerPoint":"GeoJson"===e?r="GeoJSON":"Globe Service"===e?r="Globe Layer":"Vector Tile Service"===e?r="Tile Layer":"netCDF"===e?r="NetCDF":"Map Service"===e?r=-1===t.indexOf("Spatiotemporal")&&(t.indexOf("Hosted Service")>-1||t.indexOf("Tiled")>-1)&&-1===t.indexOf("Relational")?"Tile Layer":"Map Image Layer":e&&e.toLowerCase().indexOf("add in")>-1?r=e.replace(/(add in)/gi,"Add-In"):"datastore catalog service"===e?r="Big Data File Share":"Compact Tile Package"===e?r="Tile Package (tpkx)":"OGCFeatureServer"===e&&(r="OGC Feature Layer"),r}readExtent(e){return e&&e.length?new m.a(e[0][0],e[0][1],e[1][0],e[1][1]):null}get iconUrl(){const e=this.type&&this.type.toLowerCase()||"",t=this.typeKeywords||[];let r,n=!1,s=!1,o=!1,a=!1,c=!1,l=!1;return e.indexOf("service")>0||"feature collection"===e||"kml"===e||"wms"===e||"wmts"===e||"wfs"===e?(n=t.indexOf("Hosted Service")>-1,"feature service"===e||"feature collection"===e||"kml"===e||"wfs"===e?(s=t.indexOf("Table")>-1,o=t.indexOf("Route Layer")>-1,a=t.indexOf("Markup")>-1,c=-1!==t.indexOf("Spatiotemporal"),l=-1!==t.indexOf("UtilityNetwork"),r=c&&s?"spatiotemporaltable":s?"table":o?"routelayer":a?"markup":c?"spatiotemporal":n?"featureshosted":l?"utilitynetwork":"features"):r="map service"===e||"wms"===e||"wmts"===e?n||t.indexOf("Tiled")>-1||"wmts"===e?"maptiles":"mapimages":"scene service"===e?t.indexOf("Line")>-1?"sceneweblayerline":t.indexOf("3DObject")>-1?"sceneweblayermultipatch":t.indexOf("Point")>-1?"sceneweblayerpoint":t.indexOf("IntegratedMesh")>-1?"sceneweblayermesh":t.indexOf("PointCloud")>-1?"sceneweblayerpointcloud":t.indexOf("Polygon")>-1?"sceneweblayerpolygon":t.indexOf("Building")>-1?"sceneweblayerbuilding":t.indexOf("Voxel")>-1?"sceneweblayervoxel":"sceneweblayer":"image service"===e?t.indexOf("Elevation 3D Layer")>-1?"elevationlayer":t.indexOf("Tiled Imagery")>-1?"tiledimagerylayer":"imagery":"stream service"===e?"streamlayer":"vector tile service"===e?"vectortile":"datastore catalog service"===e?"datastorecollection":"geocoding service"===e?"geocodeservice":"geoprocessing service"===e&&t.indexOf("Web Tool")>-1&&this.portal&&this.portal.isPortal?"tool":"layers"):r="web map"===e||"cityengine web scene"===e?"maps":"web scene"===e?t.indexOf("ViewingMode-Local")>-1?"webscenelocal":"websceneglobal":"web mapping application"===e||"mobile application"===e||"application"===e||"operation view"===e||"desktop application"===e?"apps":"map document"===e||"map package"===e||"published map"===e||"scene document"===e||"globe document"===e||"basemap package"===e||"mobile basemap package"===e||"mobile map package"===e||"project package"===e||"project template"===e||"pro map"===e||"layout"===e||"layer"===e&&t.indexOf("ArcGIS Pro")>-1||"explorer map"===e&&t.indexOf("Explorer Document")?"mapsgray":"service definition"===e||"csv"===e||"shapefile"===e||"cad drawing"===e||"geojson"===e||"360 vr experience"===e||"netcdf"===e||"administrative report"===e?"datafiles":"explorer add in"===e||"desktop add in"===e||"windows viewer add in"===e||"windows viewer configuration"===e?"appsgray":"arcgis pro add in"===e||"arcgis pro configuration"===e?"addindesktop":"rule package"===e||"file geodatabase"===e||"sqlite geodatabase"===e||"csv collection"===e||"kml collection"===e||"windows mobile package"===e||"map template"===e||"desktop application template"===e||"gml"===e||"arcpad package"===e||"code sample"===e||"form"===e||"document link"===e||"earth configuration"===e||"operations dashboard add in"===e||"rules package"===e||"image"===e||"workflow manager package"===e||"explorer map"===e&&t.indexOf("Explorer Mapping Application")>-1||t.indexOf("Document")>-1?"datafilesgray":"network analysis service"===e||"geoprocessing service"===e||"geodata service"===e||"geometry service"===e||"geoprocessing package"===e||"locator package"===e||"geoprocessing sample"===e||"workflow manager service"===e?"toolsgray":"layer"===e||"layer package"===e||"explorer layer"===e?"layersgray":"scene package"===e?"scenepackage":"mobile scene package"===e?"mobilescenepackage":"tile package"===e||"compact tile package"===e?"tilepackage":"task file"===e?"taskfile":"report template"===e?"report-template":"statistical data collection"===e?"statisticaldatacollection":"insights workbook"===e?"workbook":"insights model"===e?"insightsmodel":"insights page"===e?"insightspage":"insights theme"===e?"insightstheme":"hub initiative"===e?"hubinitiative":"hubpage"===e?"hubpage":"hub event"===e?"hubevent":"hub site application"===e?"hubsite":"relational database connection"===e?"relationaldatabaseconnection":"big data file share"===e?"datastorecollection":"image collection"===e?"imagecollection":"style"===e?"style":"desktop style"===e?"desktopstyle":"dashboard"===e?"dashboard":"raster function template"===e?"rasterprocessingtemplate":"vector tile package"===e?"vectortilepackage":"ortho mapping project"===e?"orthomappingproject":"ortho mapping template"===e?"orthomappingtemplate":"solution"===e?"solutions":"geopackage"===e?"geopackage":"deep learning package"===e?"deeplearningpackage":"real time analytic"===e?"realtimeanalytics":"big data analytic"===e?"bigdataanalytics":"feed"===e?"feed":"excalibur imagery project"===e?"excaliburimageryproject":"notebook"===e?"notebook":"storymap"===e?"storymap":"survey123 add in"===e?"survey123addin":"mission"===e?"mission":"mission report"===e?"missionreport":"quickcapture project"===e?"quickcaptureproject":"pro report"===e?"proreport":"urban model"===e?"urbanmodel":"web experience"===e?"experiencebuilder":"web experience template"===e?"webexperiencetemplate":"workflow"===e?"workflow":"insights script"===e?"insightsscript":"kernel gateway connection"===e?"kernelgatewayconnection":"hub initiative template"===e?"hubinitiativetemplate":"storymap theme"===e?"storymaptheme":"knowledge graph"===e?"knowledgegraph":"native application"===e?"nativeapp":"native application installer"===e?"nativeappinstaller":"link chart"===e?"linkchart":"investigation"===e?"investigation":"ogcfeatureserver"===e?"features":"pro project"===e?"proproject":"insights workbook package"===e?"insightsworkbookpackage":"maps",r?Object(i.a)("esri/images/portal/"+r+"16.png"):null}get isLayer(){return["Map Service","Feature Service","Feature Collection","Scene Service","Image Service","Stream Service","Vector Tile Service","WMTS","WMS"].indexOf(this.type)>-1}get itemUrl(){const e=this.get("portal.restUrl");return e?e+"/content/items/"+this.id:null}get thumbnailUrl(){const e=this.itemUrl,t=this.thumbnail;return e&&t?this.portal._normalizeUrl(`${e}/info/${t}?f=json`):null}get userItemUrl(){const e=this.get("portal.restUrl");if(!e)return null;const t=this.owner||this.get("portal.user.username");return t?`${e}/content/users/${this.ownerFolder?`${t}/${this.ownerFolder}`:t}/items/${this.id}`:null}load(e){this.portal||(this.portal=y.a.getDefault());const t=this.portal.load(e).then((()=>this.sourceJSON?this.sourceJSON:this.id&&this.itemUrl?this.portal._request(this.itemUrl,{signal:Object(l.k)(e)?e.signal:null,query:{token:this.apiKey}}):{})).then((e=>{this.sourceJSON=e,this.read(e)}));return this.addResolvingPromise(t),Promise.resolve(this)}addRating(e){const t={method:"post",query:{}};return e instanceof T&&(e=e.rating),isNaN(e)||"number"!=typeof e||(t.query.rating=e),this.portal._request(this.itemUrl+"/addRating",t).then((()=>new T({rating:e,created:new Date})))}clone(){const e={access:this.access,accessInformation:this.accessInformation,applicationProxies:Object(a.a)(this.applicationProxies),avgRating:this.avgRating,categories:Object(a.a)(this.categories),created:Object(a.a)(this.created),culture:this.culture,description:this.description,extent:Object(a.a)(this.extent),groupCategories:Object(a.a)(this.groupCategories),id:this.id,itemControl:this.itemControl,licenseInfo:this.licenseInfo,modified:Object(a.a)(this.modified),name:this.name,numComments:this.numComments,numRatings:this.numRatings,numViews:this.numViews,owner:this.owner,ownerFolder:this.ownerFolder,portal:this.portal,screenshots:Object(a.a)(this.screenshots),size:this.size,snippet:this.snippet,tags:Object(a.a)(this.tags),thumbnail:this.thumbnail,title:this.title,type:this.type,typeKeywords:Object(a.a)(this.typeKeywords),url:this.url};return this.loaded&&(e.loadStatus="loaded"),new x({sourceJSON:this.sourceJSON}).set(e)}createPostQuery(){const e=this.toJSON();for(const t in e)"tags"===t&&null!==e[t]&&(e[t]=e[t].join(", ")),"typeKeywords"===t&&null!==e[t]&&(e[t]=e[t].join(", ")),"extent"===t&&e[t]&&(e[t]=JSON.stringify(e[t]));return e}deleteRating(){return this.portal._request(this.itemUrl+"/deleteRating",{method:"post"}).then((()=>{}))}fetchData(e="json",t){return this.portal._request(this.itemUrl+"/data",{responseType:e,...t,query:{token:this.apiKey}})}fetchRating(e){return this.portal._request(this.itemUrl+"/rating",{query:{token:this.apiKey},...e}).then((e=>null!=e.rating?(e.created=new Date(e.created),new T(e)):null))}fetchRelatedItems(e,t){return this.portal._requestToTypedArray(this.itemUrl+"/relatedItems",{query:{...e,token:this.apiKey},...t},x)}getThumbnailUrl(e){let t=this.thumbnailUrl;return t&&e&&(t+=`&w=${e}`),t}reload(){return this.portal._request(this.itemUrl,{cacheBust:!0,query:{token:this.apiKey}}).then((e=>(this.sourceJSON=e,this.read(e),this)))}update(e){return this.id?this.load().then((()=>this.portal._signIn())).then((()=>{const t=e&&e.data,r={method:"post"};r.query=this.createPostQuery();for(const e in r.query)null===r.query[e]&&(r.query[e]="");return r.query.clearEmptyFields=!0,null!=t&&("string"==typeof t?r.query.text=t:"object"==typeof t&&(r.query.text=JSON.stringify(t))),this.portal._request(`${this.userItemUrl}/update`,r).then((()=>this.reload()))})):Promise.reject(new s.a("portal:item-does-not-exist","The item does not exist yet and cannot be updated"))}updateThumbnail(e){return this.id?this.load().then((()=>this.portal._signIn())).then((()=>{const t=e.thumbnail,r=e.filename,n={method:"post"};if("string"==typeof t)Object(u.u)(t)?n.query={data:t}:n.query={url:Object(u.A)(t)},Object(l.k)(r)&&(n.query.filename=r);else{const e=new FormData;Object(l.k)(r)?e.append("file",t,r):e.append("file",t),n.body=e}return this.portal._request(`${this.userItemUrl}/updateThumbnail`,n).then((()=>this.reload()))})):Promise.reject(new s.a("portal:item-does-not-exist","The item does not exist yet and cannot be updated"))}async fetchResources(e={},t){return(await r.e(20).then(r.bind(null,825))).fetchResources(this,e,t)}async addResource(e,t,n){const i=await r.e(20).then(r.bind(null,825));return e.portalItem=this,i.addOrUpdateResource(e,"add",t,n)}async removeResource(e,t){const n=await r.e(20).then(r.bind(null,825));if(e.portalItem&&e.portalItem.itemUrl!==this.itemUrl)throw new s.a("removeresource:portal-item-mismatch","The portal item associated with the provided resource does not match the item");return n.removeResource(this,e,t)}async removeAllResources(e){return(await r.e(20).then(r.bind(null,825))).removeAllResources(this,e)}resourceFromPath(e){return new w({portalItem:this,path:e})}toJSON(){const e=this.extent,t={created:this.created&&this.created.getTime(),description:this.description,extent:e&&[[e.xmin,e.ymin],[e.xmax,e.ymax]],id:this.id,modified:this.modified&&this.modified.getTime(),name:this.name,owner:this.owner,ownerFolder:this.ownerFolder,snippet:this.snippet,tags:this.tags,thumbnail:this.thumbnail,title:this.title,type:this.type,typeKeywords:this.typeKeywords,url:this.url};return Object(a.c)(t)}static fromJSON(e){if(!e)return null;if(e.declaredClass)throw new Error("JSON object is already hydrated");return new x({sourceJSON:e})}_getPostQuery(){const e=this.toJSON();for(const t in e)"tags"===t&&null!==e[t]&&(e[t]=e[t].join(", ")),"typeKeywords"===t&&null!==e[t]&&(e[t]=e[t].join(", ")),"extent"===t&&e[t]&&(e[t]=JSON.stringify(e[t]));return e}};Object(n.a)([Object(d.b)({type:["private","shared","org","public"]})],_.prototype,"access",void 0),Object(n.a)([Object(d.b)()],_.prototype,"accessInformation",void 0),Object(n.a)([Object(d.b)({type:String})],_.prototype,"apiKey",void 0),Object(n.a)([Object(d.b)({json:{read:{source:"appProxies"}}})],_.prototype,"applicationProxies",void 0),Object(n.a)([Object(d.b)()],_.prototype,"avgRating",void 0),Object(n.a)([Object(d.b)()],_.prototype,"categories",void 0),Object(n.a)([Object(d.b)({type:Date})],_.prototype,"created",void 0),Object(n.a)([Object(d.b)()],_.prototype,"culture",void 0),Object(n.a)([Object(d.b)()],_.prototype,"description",void 0),Object(n.a)([Object(d.b)({readOnly:!0})],_.prototype,"displayName",null),Object(n.a)([Object(d.b)({type:m.a})],_.prototype,"extent",void 0),Object(n.a)([Object(f.a)("extent")],_.prototype,"readExtent",null),Object(n.a)([Object(d.b)()],_.prototype,"groupCategories",void 0),Object(n.a)([Object(d.b)({readOnly:!0})],_.prototype,"iconUrl",null),Object(n.a)([Object(d.b)()],_.prototype,"id",void 0),Object(n.a)([Object(d.b)({readOnly:!0})],_.prototype,"isLayer",null),Object(n.a)([Object(d.b)()],_.prototype,"itemControl",void 0),Object(n.a)([Object(d.b)({readOnly:!0})],_.prototype,"itemUrl",null),Object(n.a)([Object(d.b)()],_.prototype,"licenseInfo",void 0),Object(n.a)([Object(d.b)({type:Date})],_.prototype,"modified",void 0),Object(n.a)([Object(d.b)()],_.prototype,"name",void 0),Object(n.a)([Object(d.b)()],_.prototype,"numComments",void 0),Object(n.a)([Object(d.b)()],_.prototype,"numRatings",void 0),Object(n.a)([Object(d.b)()],_.prototype,"numViews",void 0),Object(n.a)([Object(d.b)()],_.prototype,"owner",void 0),Object(n.a)([Object(d.b)()],_.prototype,"ownerFolder",void 0),Object(n.a)([Object(d.b)({type:y.a})],_.prototype,"portal",void 0),Object(n.a)([Object(d.b)()],_.prototype,"screenshots",void 0),Object(n.a)([Object(d.b)()],_.prototype,"size",void 0),Object(n.a)([Object(d.b)()],_.prototype,"snippet",void 0),Object(n.a)([Object(d.b)()],_.prototype,"sourceJSON",void 0),Object(n.a)([Object(d.b)()],_.prototype,"tags",void 0),Object(n.a)([Object(d.b)()],_.prototype,"thumbnail",void 0),Object(n.a)([Object(d.b)({readOnly:!0})],_.prototype,"thumbnailUrl",null),Object(n.a)([Object(d.b)()],_.prototype,"title",void 0),Object(n.a)([Object(d.b)()],_.prototype,"type",void 0),Object(n.a)([Object(d.b)()],_.prototype,"typeKeywords",void 0),Object(n.a)([Object(d.b)()],_.prototype,"url",void 0),Object(n.a)([Object(d.b)({readOnly:!0})],_.prototype,"userItemUrl",null),_=x=Object(n.a)([Object(b.a)("esri.portal.PortalItem")],_);var F=_;t.default=F},208:function(e,t,r){"use strict";r.r(t),r.d(t,"executeQuery",(function(){return p})),r.d(t,"executeQueryForCount",(function(){return y})),r.d(t,"executeQueryForExtent",(function(){return g})),r.d(t,"executeQueryForIds",(function(){return m})),r.d(t,"executeQueryPBF",(function(){return f})),r.d(t,"executeQueryPBFBuffer",(function(){return b})),r.d(t,"queryToQueryStringParameters",(function(){return h})),r.d(t,"runQuery",(function(){return O}));var n=r(98),i=r(83),s=r(94),o=r(97),a=r(217),c=r(396),l=r(255),u=r(253);const d="Layer does not support extent calculation.";function h(e,t){const r=e.geometry,n=e.toJSON(),s=n;if(Object(i.k)(r)&&(s.geometry=JSON.stringify(r),s.geometryType=Object(o.c)(r),s.inSR=r.spatialReference.wkid||JSON.stringify(r.spatialReference)),n.groupByFieldsForStatistics&&(s.groupByFieldsForStatistics=n.groupByFieldsForStatistics.join(",")),n.objectIds&&(s.objectIds=n.objectIds.join(",")),n.orderByFields&&(s.orderByFields=n.orderByFields.join(",")),!n.outFields||!n.returnDistinctValues&&(null!=t&&t.returnCountOnly||null!=t&&t.returnExtentOnly||null!=t&&t.returnIdsOnly)?delete s.outFields:-1!==n.outFields.indexOf("*")?s.outFields="*":s.outFields=n.outFields.join(","),n.outSR?s.outSR=n.outSR.wkid||JSON.stringify(n.outSR):r&&(n.returnGeometry||n.returnCentroid)&&(s.outSR=s.inSR),n.returnGeometry&&delete n.returnGeometry,n.outStatistics&&(s.outStatistics=JSON.stringify(n.outStatistics)),n.pixelSize&&(s.pixelSize=JSON.stringify(n.pixelSize)),n.quantizationParameters&&(s.quantizationParameters=JSON.stringify(n.quantizationParameters)),n.parameterValues&&(s.parameterValues=JSON.stringify(n.parameterValues)),n.rangeValues&&(s.rangeValues=JSON.stringify(n.rangeValues)),n.dynamicDataSource&&(s.layer=JSON.stringify({source:n.dynamicDataSource}),delete n.dynamicDataSource),n.timeExtent){const e=n.timeExtent,{start:t,end:r}=e;null==t&&null==r||(s.time=t===r?t:`${null==t?"null":t},${null==r?"null":r}`),delete n.timeExtent}return s}async function p(e,t,r,n){const s=Object(i.k)(t.timeExtent)&&t.timeExtent.isEmpty?{data:{features:[]}}:await O(e,t,"json",n);return Object(l.a)(t,r,s.data),s}async function f(e,t,r,n){if(Object(i.k)(t.timeExtent)&&t.timeExtent.isEmpty)return Promise.resolve({data:r.createFeatureResult()});const s=await b(e,t,n),o=s;return o.data=Object(c.a)(s.data,r),o}function b(e,t,r){return O(e,t,"pbf",r)}function m(e,t,r){return Object(i.k)(t.timeExtent)&&t.timeExtent.isEmpty?Promise.resolve({data:{objectIds:[]}}):O(e,t,"json",r,{returnIdsOnly:!0})}function y(e,t,r){return Object(i.k)(t.timeExtent)&&t.timeExtent.isEmpty?Promise.resolve({data:{count:0}}):O(e,t,"json",r,{returnIdsOnly:!0,returnCountOnly:!0})}function g(e,t,r){return Object(i.k)(t.timeExtent)&&t.timeExtent.isEmpty?Promise.resolve({data:{count:0,extent:null}}):O(e,t,"json",r,{returnExtentOnly:!0,returnCountOnly:!0}).then((e=>{const t=e.data;if(t.hasOwnProperty("extent"))return e;if(t.features)throw new Error(d);if(t.hasOwnProperty("count"))throw new Error(d);return e}))}function O(e,t,r,o={},c={}){const l="string"==typeof e?Object(s.K)(e):e,d=t.geometry?[t.geometry]:[];return o.responseType="pbf"===r?"array-buffer":"json",Object(a.a)(d,null,o).then((e=>{const a=e&&e[0];Object(i.k)(a)&&((t=t.clone()).geometry=a);const d=Object(u.a)({...l.query,f:r,...c,...h(t,c)});return Object(n.default)(Object(s.z)(l.path,"query"),{...o,query:{...d,...o.query}})}))}},217:function(e,t,r){"use strict";r.d(t,"a",(function(){return w})),r.d(t,"b",(function(){return S})),r.d(t,"c",(function(){return O}));var n=r(143),i=r(85),s=r(78),o=r(83),a=r(119),c=r(127),l=r(244),u=r(102),d=r(151),h=(r(95),r(98)),p=r(94),f=r(97);async function b(e,t,r){const n="string"==typeof e?Object(p.K)(e):e,i=t[0].spatialReference,s=Object(f.c)(t[0]),o={...r,query:{...n.query,f:"json",sr:i.wkid?i.wkid:JSON.stringify(i),geometries:JSON.stringify((a=t,{geometryType:Object(f.c)(a[0]),geometries:a.map((e=>e.toJSON()))}))}};var a;return function(e,t,r){const n=Object(f.b)(t);return e.map((e=>{const t=n.fromJSON(e);return t.spatialReference=r,t}))}((await Object(h.default)(n.path+"/simplify",o)).data,s,i)}const m=s.a.getLogger("esri.geometry.support.normalizeUtils");function y(e){return"polygon"===e[0].type}function g(e){return"polyline"===e[0].type}function O(e,t){if(!(e instanceof c.a||e instanceof a.a)){const e="straightLineDensify: the input geometry is neither polyline nor polygon";throw m.error(e),new i.a(e)}const r=Object(l.b)(e),n=[];for(const i of r){const e=[];n.push(e),e.push([i[0][0],i[0][1]]);for(let r=0;r<i.length-1;r++){const n=i[r][0],s=i[r][1],o=i[r+1][0],a=i[r+1][1],c=Math.sqrt((o-n)*(o-n)+(a-s)*(a-s)),l=(a-s)/c,u=(o-n)/c,d=c/t;if(d>1){for(let a=1;a<=d-1;a++){const r=a*t,i=u*r+n,o=l*r+s;e.push([i,o])}const r=(c+Math.floor(d-1)*t)/2,i=u*r+n,o=l*r+s;e.push([i,o])}e.push([o,a])}}return function(e){return"polygon"===e.type}(e)?new a.a({rings:n,spatialReference:e.spatialReference}):new c.a({paths:n,spatialReference:e.spatialReference})}function j(e,t,r){if(t){const t=O(e,1e6);e=Object(d.e)(t,!0)}return r&&(e=Object(l.e)(e,r)),e}function v(e,t,r){if(Array.isArray(e)){const n=e[0];if(n>t){const r=Object(l.d)(n,t);e[0]=n+r*(-2*t)}else if(n<r){const t=Object(l.d)(n,r);e[0]=n+t*(-2*r)}}else{const n=e.x;if(n>t){const r=Object(l.d)(n,t);e=e.clone().offset(r*(-2*t),0)}else if(n<r){const t=Object(l.d)(n,r);e=e.clone().offset(t*(-2*r),0)}}return e}async function w(e,t,r){if(!Array.isArray(e))return w([e],t);const i=t?t.url:n.a.geometryServiceUrl;let s,m,O,S,x,T,_,F,I=0;const k=[],M=[];for(const n of e)if(Object(o.j)(n))M.push(n);else if(s||(s=n.spatialReference,m=Object(u.d)(s),O=s.isWebMercator,T=O?102100:4326,S=l.a[T].maxX,x=l.a[T].minX,_=l.a[T].plus180Line,F=l.a[T].minus180Line),m)if("mesh"===n.type)M.push(n);else if("point"===n.type)M.push(v(n.clone(),S,x));else if("multipoint"===n.type){const e=n.clone();e.points=e.points.map((e=>v(e,S,x))),M.push(e)}else if("extent"===n.type){const e=n.clone()._normalize(!1,!1,m);M.push(e.rings?new a.a(e):e)}else if(n.extent){const e=n.extent,t=Object(l.d)(e.xmin,x)*(2*S);let r=0===t?n.clone():Object(l.e)(n.clone(),t);e.offset(t,0),e.intersects(_)&&e.xmax!==S?(I=e.xmax>I?e.xmax:I,r=j(r,O),k.push(r),M.push("cut")):e.intersects(F)&&e.xmin!==x?(I=e.xmax*(2*S)>I?e.xmax*(2*S):I,r=j(r,O,360),k.push(r),M.push("cut")):M.push(r)}else M.push(n.clone());else M.push(n);let R=Object(l.d)(I,S),P=-90;const N=R,q=new c.a;for(;R>0;){const e=360*R-180;q.addPath([[e,P],[e,-1*P]]),P*=-1,R--}if(k.length>0&&N>0){const t=function(e,t){let r=-1;for(let n=0;n<t.cutIndexes.length;n++){const i=t.cutIndexes[n],s=t.geometries[n],o=Object(l.b)(s);for(let e=0;e<o.length;e++){const t=o[e];t.some((r=>{if(r[0]<180)return!0;{let r=0;for(let e=0;e<t.length;e++){const n=t[e][0];r=n>r?n:r}r=Number(r.toFixed(9));const n=-360*Object(l.d)(r,180);for(let i=0;i<t.length;i++){const t=s.getPoint(e,i);s.setPoint(e,i,t.clone().offset(n,0))}return!0}}))}if(i===r){if(y(e))for(const t of Object(l.b)(s))e[i]=e[i].addRing(t);else if(g(e))for(const t of Object(l.b)(s))e[i]=e[i].addPath(t)}else r=i,e[i]=s}return e}(k,await async function(e,t,r,n){const i="string"==typeof e?Object(p.K)(e):e,s=t[0].spatialReference,o={...n,query:{...i.query,f:"json",sr:JSON.stringify(s),target:JSON.stringify({geometryType:Object(f.c)(t[0]),geometries:t}),cutter:JSON.stringify(r)}},a=await Object(h.default)(i.path+"/cut",o),{cutIndexes:c,geometries:l=[]}=a.data;return{cutIndexes:c,geometries:l.map((e=>{const t=Object(f.a)(e);return t.spatialReference=s,t}))}}(i,k,q,r)),n=[],s=[];for(let r=0;r<M.length;r++){const i=M[r];if("cut"!==i)s.push(i);else{const i=t.shift(),a=e[r];Object(o.k)(a)&&"polygon"===a.type&&a.rings&&a.rings.length>1&&i.rings.length>=a.rings.length?(n.push(i),s.push("simplify")):s.push(O?Object(d.b)(i):i)}}if(!n.length)return s;const a=await b(i,n,r),c=[];for(let e=0;e<s.length;e++){const t=s[e];"simplify"!==t?c.push(t):c.push(O?Object(d.b)(a.shift()):a.shift())}return c}const C=[];for(let n=0;n<M.length;n++){const e=M[n];if("cut"!==e)C.push(e);else{const e=k.shift();C.push(!0===O?Object(d.b)(e):e)}}return Promise.resolve(C)}function S(e,t){const r=Object(u.d)(t);if(r){const[t,n]=r.valid,i=n-t;if(e<t)for(;e<t;)e+=i;if(e>n)for(;e>n;)e-=i}return e}},219:function(e,t,r){"use strict";r.d(t,"a",(function(){return i})),r.d(t,"b",(function(){return s}));var n=r(171);class i{constructor(e,t,r){this._namespace=e,this._storage=t,this._removeFunc=!1,this._hit=0,this._miss=0,this._storage.register(this),this._namespace+=":",r&&(this._storage.registerRemoveFunc(this._namespace,r),this._removeFunc=!0)}destroy(){this._storage.clear(this._namespace),this._removeFunc&&this._storage.deregisterRemoveFunc(this._namespace),this._storage.deregister(this),this._storage=null}get namespace(){return this._namespace.slice(0,-1)}get hitRate(){return this._hit/(this._hit+this._miss)}get size(){return this._storage.size}get maxSize(){return this._storage.maxSize}resetHitRate(){this._hit=this._miss=0}put(e,t,r,n=0){this._storage.put(this._namespace+e,t,r,n)}get(e){const t=this._storage.get(this._namespace+e);return void 0===t?++this._miss:++this._hit,t}pop(e){const t=this._storage.pop(this._namespace+e);return void 0===t?++this._miss:++this._hit,t}updateSize(e,t,r){this._storage.updateSize(this._namespace+e,t,r)}clear(){this._storage.clear(this._namespace)}clearAll(){this._storage.clearAll()}getStats(){return this._storage.getStats()}resetStats(){this._storage.resetStats()}}class s{constructor(e=10485760){this._maxSize=e,this._db=new Map,this._size=0,this._hit=0,this._miss=0,this._removeFuncs=new n.a,this._users=new n.a}destroy(){this.clearAll(),this._removeFuncs.clear(),this._users.clear(),this._db=null}register(e){this._users.push(e)}deregister(e){this._users.removeUnordered(e)}registerRemoveFunc(e,t){this._removeFuncs.push([e,t])}deregisterRemoveFunc(e){this._removeFuncs.filterInPlace((t=>t[0]!==e))}get size(){return this._size}get maxSize(){return this._maxSize}set maxSize(e){this._maxSize=Math.max(e,0),this._checkSizeLimit()}put(e,t,r,n){const i=this._db.get(e);if(i&&(this._size-=i.size,this._db.delete(e),i.entry!==t&&this._notifyRemoved(e,i.entry)),r>this._maxSize)return void this._notifyRemoved(e,t);if(void 0===t)return void console.warn("Refusing to cache undefined entry ");if(!r||r<0)return void console.warn("Refusing to cache entry with invalid size "+r);const s=1+Math.max(n,-3)- -3;this._db.set(e,{entry:t,size:r,lifetime:s,lives:s}),this._size+=r,this._checkSizeLimit()}updateSize(e,t,r){const n=this._db.get(e);if(n&&n.entry===t){if(this._size-=n.size,r>this._maxSize)return this._db.delete(e),void this._notifyRemoved(e,t);n.size=r,this._size+=r,this._checkSizeLimit()}}pop(e){const t=this._db.get(e);if(t)return this._size-=t.size,this._db.delete(e),++this._hit,t.entry;++this._miss}get(e){const t=this._db.get(e);if(void 0!==t)return this._db.delete(e),t.lives=t.lifetime,this._db.set(e,t),++this._hit,t.entry;++this._miss}getStats(){const e={Size:Math.round(this._size/1048576)+"/"+Math.round(this._maxSize/1048576)+"MB","Hit rate":Math.round(100*this._getHitRate())+"%",Entries:this._db.size.toString()},t={},r=new Array;this._db.forEach(((e,n)=>{const i=e.lifetime;r[i]=(r[i]||0)+e.size,this._users.forAll((r=>{const i=r.namespace;if(n.startsWith(i)){const r=t[i]||0;t[i]=r+e.size}}))}));const n={};this._users.forAll((e=>{const r=e.namespace;if(!isNaN(e.hitRate)&&e.hitRate>0){const i=t[r]||0;t[r]=i,n[r]=Math.round(100*e.hitRate)+"%"}else n[r]="0%"}));const i=Object.keys(t);i.forEach((e=>t[e]=t[e]/this._size*100)),i.sort(((e,r)=>t[r]-t[e])),i.forEach((r=>e[r]=Math.round(t[r])+"% / "+n[r]));for(let s=r.length-1;s>=0;--s){const t=r[s];t&&(e["Priority "+(s+-3-1)]=Math.round(t/this.size*100)+"%")}return e}resetStats(){this._hit=this._miss=0,this._users.forAll((e=>e.resetHitRate()))}clear(e){this._db.forEach(((t,r)=>{r.startsWith(e)&&(this._size-=t.size,this._db.delete(r),this._notifyRemoved(r,t.entry))}))}clearAll(){this._db.forEach(((e,t)=>this._notifyRemoved(t,e.entry))),this._size=0,this._db.clear()}_getHitRate(){return this._hit/(this._hit+this._miss)}_notifyRemoved(e,t){this._removeFuncs.forAll((r=>{e.startsWith(r[0])&&r[1](t)}))}_checkSizeLimit(){if(!(this._size<=this._maxSize))for(const[e,t]of this._db)if(this._db.delete(e),t.lives<=1?(this._size-=t.size,this._notifyRemoved(e,t.entry)):(--t.lives,this._db.set(e,t)),this._size<=.9*this.maxSize)return}}},221:function(e,t,r){"use strict";function n(e){return"date"===e.type||"esriFieldTypeDate"===e.type}function i(e){return e.toLowerCase().trim()}t.a=class{constructor(e){if(this.fields=e,this._fieldsMap=new Map,this._dateFieldsSet=new Set,this.dateFields=[],!e)return;const t=[];for(const r of e){const e=r&&r.name;if(e){const s=i(e);this._fieldsMap.set(e,r),this._fieldsMap.set(s,r),t.push(s),n(r)&&(this.dateFields.push(r),this._dateFieldsSet.add(r))}}t.sort(),this.uid=t.join(",")}destroy(){this._fieldsMap.clear()}has(e){return null!=this.get(e)}get(e){return null!=e?this._fieldsMap.get(e)||this._fieldsMap.get(i(e)):void 0}isDateField(e){return this._dateFieldsSet.has(this.get(e))}normalizeFieldName(e){const t=this.get(e);if(t)return t.name}}},224:function(e,t,r){"use strict";var n,i=r(79),s=r(84),o=r(178),a=r(81),c=(r(77),r(82),r(78),r(80)),l=r(179);let u=n=class extends s.a{constructor(e){super(e),this.value=0,this.unit="milliseconds"}toMilliseconds(){return Object(o.a)(this.value,this.unit,"milliseconds")}clone(){return new n({value:this.value,unit:this.unit})}};Object(i.a)([Object(a.b)({type:Number,json:{write:!0},nonNullable:!0})],u.prototype,"value",void 0),Object(i.a)([Object(a.b)({type:l.a.apiValues,json:{type:l.a.jsonValues,read:l.a.read,write:l.a.write},nonNullable:!0})],u.prototype,"unit",void 0),u=n=Object(i.a)([Object(c.a)("esri.TimeInterval")],u);var d=u;t.a=d},228:function(e,t,r){"use strict";r.d(t,"a",(function(){return o})),r.d(t,"b",(function(){return c}));var n=r(83),i=r(111),s=r(102);function o(e,t,r){if(Object(n.j)(t)||Object(n.j)(r)||r.vcsWkid||Object(s.c)(t,r))return null;const o=Object(i.g)(t)/Object(i.g)(r);if(1===o)return null;switch(e){case"point":case"esriGeometryPoint":return e=>function(e,t){e&&null!=e.z&&(e.z*=t)}(e,o);case"polyline":case"esriGeometryPolyline":return e=>function(e,t){if(e)for(const r of e.paths)for(const e of r)e.length>2&&(e[2]*=t)}(e,o);case"polygon":case"esriGeometryPolygon":return e=>function(e,t){if(e)for(const r of e.rings)for(const e of r)e.length>2&&(e[2]*=t)}(e,o);case"multipoint":case"esriGeometryMultipoint":return e=>function(e,t){if(e)for(const r of e.points)r.length>2&&(r[2]*=t)}(e,o);default:return null}}function a(e,t,r){if(null==e.hasM||e.hasZ)for(const n of t)for(const e of n)e.length>2&&(e[2]*=r)}function c(e,t,r){if(!e&&!t||!r)return;const n=Object(i.g)(r);l(e,r,n),l(t,r,n)}function l(e,t,r){if(e)for(const n of e)u(n.geometry,t,r)}function u(e,t,r){if(!e||!e.spatialReference||Object(s.c)(e.spatialReference,t))return;const n=Object(i.g)(e.spatialReference)/r;if(1!==n)if("x"in e)null!=e.z&&(e.z*=n);else if("rings"in e)a(e,e.rings,n);else if("paths"in e)a(e,e.paths,n);else if("points"in e&&(null==e.hasM||e.hasZ))for(const i of e.points)i.length>2&&(i[2]*=n)}},234:function(e,t,r){"use strict";r.d(t,"a",(function(){return q})),r.d(t,"b",(function(){return C})),r.d(t,"c",(function(){return h})),r.d(t,"d",(function(){return y})),r.d(t,"e",(function(){return j})),r.d(t,"f",(function(){return s})),r.d(t,"g",(function(){return m})),r.d(t,"h",(function(){return I})),r.d(t,"i",(function(){return N})),r.d(t,"j",(function(){return a})),r.d(t,"k",(function(){return u})),r.d(t,"l",(function(){return d})),r.d(t,"m",(function(){return c})),r.d(t,"n",(function(){return l})),r.d(t,"o",(function(){return M})),r.d(t,"p",(function(){return o})),r.d(t,"q",(function(){return x})),r.d(t,"r",(function(){return v})),r.d(t,"s",(function(){return P})),r.d(t,"t",(function(){return O})),r.d(t,"u",(function(){return w})),r.d(t,"v",(function(){return S})),r.d(t,"w",(function(){return F})),r.d(t,"x",(function(){return _})),r.d(t,"y",(function(){return T})),r.d(t,"z",(function(){return g})),r.d(t,"A",(function(){return k}));var n=r(83),i=(r(96),r(121));function s(e=C){return[e[0],e[1],e[2],e[3],e[4],e[5]]}function o(e,t,r,n,i,o,a=s()){return a[0]=e,a[1]=t,a[2]=r,a[3]=n,a[4]=i,a[5]=o,a}function a(e,t){e[0]=Math.min(e[0],t[0]),e[1]=Math.min(e[1],t[1]),e[2]=Math.min(e[2],t[2]),e[3]=Math.max(e[3],t[3]),e[4]=Math.max(e[4],t[4]),e[5]=Math.max(e[5],t[5])}function c(e,t){e[0]=Math.min(e[0],t[0]),e[1]=Math.min(e[1],t[1]),e[3]=Math.max(e[3],t[2]),e[4]=Math.max(e[4],t[3])}function l(e,t){e[0]=Math.min(e[0],t[0]),e[1]=Math.min(e[1],t[1]),e[2]=Math.min(e[2],t[2]),e[3]=Math.max(e[3],t[0]),e[4]=Math.max(e[4],t[1]),e[5]=Math.max(e[5],t[2])}function u(e,t,r=0,n=t.length/3){let i=e[0],s=e[1],o=e[2],a=e[3],c=e[4],l=e[5];for(let u=0;u<n;u++)i=Math.min(i,t[r+3*u]),s=Math.min(s,t[r+3*u+1]),o=Math.min(o,t[r+3*u+2]),a=Math.max(a,t[r+3*u]),c=Math.max(c,t[r+3*u+1]),l=Math.max(l,t[r+3*u+2]);e[0]=i,e[1]=s,e[2]=o,e[3]=a,e[4]=c,e[5]=l}function d(e,t,r){const n=t.length;let i=e[0],s=e[1],o=e[2],a=e[3],c=e[4],l=e[5];if(r)for(let u=0;u<n;u++){const e=t[u];i=Math.min(i,e[0]),s=Math.min(s,e[1]),o=Math.min(o,e[2]),a=Math.max(a,e[0]),c=Math.max(c,e[1]),l=Math.max(l,e[2])}else for(let u=0;u<n;u++){const e=t[u];i=Math.min(i,e[0]),s=Math.min(s,e[1]),a=Math.max(a,e[0]),c=Math.max(c,e[1])}e[0]=i,e[1]=s,e[2]=o,e[3]=a,e[4]=c,e[5]=l}function h(e){for(let t=0;t<6;t++)if(!isFinite(e[t]))return!1;return!0}function p(e){return e[0]>=e[3]?0:e[3]-e[0]}function f(e){return e[1]>=e[4]?0:e[4]-e[1]}function b(e){return e[2]>=e[5]?0:e[5]-e[2]}function m(e){const t=p(e),r=b(e),n=f(e);return Math.sqrt(t*t+r*r+n*n)}function y(e,t=[0,0,0]){return t[0]=e[0]+p(e)/2,t[1]=e[1]+f(e)/2,t[2]=e[2]+b(e)/2,t}function g(e,t=[0,0,0]){return t[0]=p(e),t[1]=f(e),t[2]=b(e),t}function O(e){return Math.max(p(e),b(e),f(e))}function j(e,t){return t[0]>=e[0]&&t[1]>=e[1]&&t[2]>=e[2]&&t[0]<=e[3]&&t[1]<=e[4]&&t[2]<=e[5]}function v(e,t){return!!Object(n.j)(t)||function(e,t){return Math.max(t[0],e[0])<=Math.min(t[3],e[3])&&Math.max(t[1],e[1])<=Math.min(t[4],e[4])&&Math.max(t[2],e[2])<=Math.min(t[5],e[5])}(e,t)}function w(e,t,r,n,i=e){return i[0]=e[0]+t,i[1]=e[1]+r,i[2]=e[2]+n,i[3]=e[3]+t,i[4]=e[4]+r,i[5]=e[5]+n,i}function S(e,t,r=e){const n=e[0]+p(e)/2,i=e[1]+f(e)/2,s=e[2]+b(e)/2;return r[0]=n+(e[0]-n)*t,r[1]=i+(e[1]-i)*t,r[2]=s+(e[2]-s)*t,r[3]=n+(e[3]-n)*t,r[4]=i+(e[4]-i)*t,r[5]=s+(e[5]-s)*t,r}function x(e,t){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t}function T(e,t,r=e){return r[0]=t[0],r[1]=t[1],r[2]=t[2],r!==e&&(r[3]=e[3],r[4]=e[4],r[5]=e[5]),r}function _(e,t,r=e){return r[3]=t[0],r[4]=t[1],r[5]=t[2],r!==e&&(r[0]=e[0],r[1]=e[1],r[2]=e[2]),e}function F(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e}function I(e){return e?F(e,q):s(q)}function k(e,t){return t||(t=Object(i.k)()),t[0]=e[0],t[1]=e[1],t[2]=e[3],t[3]=e[4],t}function M(e,t){return e[0]=t[0],e[1]=t[1],e[2]=Number.NEGATIVE_INFINITY,e[3]=t[2],e[4]=t[3],e[5]=Number.POSITIVE_INFINITY,e}function R(e){return 6===e.length}function P(e){return 0===p(e)&&0===f(e)&&0===b(e)}function N(e,t,r){if(Object(n.j)(e)||Object(n.j)(t))return e===t;if(!R(e)||!R(t))return!1;if(r){for(let n=0;n<e.length;n++)if(!r(e[n],t[n]))return!1}else for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}const q=[1/0,1/0,1/0,-1/0,-1/0,-1/0],C=[0,0,0,0,0,0];s()},241:function(e,t,r){"use strict";r.d(t,"a",(function(){return n}));const n=new(r(88).a)({esriFieldTypeSmallInteger:"small-integer",esriFieldTypeInteger:"integer",esriFieldTypeSingle:"single",esriFieldTypeDouble:"double",esriFieldTypeLong:"long",esriFieldTypeString:"string",esriFieldTypeDate:"date",esriFieldTypeOID:"oid",esriFieldTypeGeometry:"geometry",esriFieldTypeBlob:"blob",esriFieldTypeRaster:"raster",esriFieldTypeGUID:"guid",esriFieldTypeGlobalID:"global-id",esriFieldTypeXML:"xml"})},244:function(e,t,r){"use strict";r.d(t,"a",(function(){return o})),r.d(t,"b",(function(){return l})),r.d(t,"c",(function(){return u})),r.d(t,"d",(function(){return a})),r.d(t,"e",(function(){return c}));var n=r(127),i=r(92),s=r(97);const o={102100:{maxX:20037508.342788905,minX:-20037508.342788905,plus180Line:new n.a({paths:[[[20037508.342788905,-20037508.342788905],[20037508.342788905,20037508.342788905]]],spatialReference:i.a.WebMercator}),minus180Line:new n.a({paths:[[[-20037508.342788905,-20037508.342788905],[-20037508.342788905,20037508.342788905]]],spatialReference:i.a.WebMercator})},4326:{maxX:180,minX:-180,plus180Line:new n.a({paths:[[[180,-180],[180,180]]],spatialReference:i.a.WGS84}),minus180Line:new n.a({paths:[[[-180,-180],[-180,180]]],spatialReference:i.a.WGS84})}};function a(e,t){return Math.ceil((e-t)/(2*t))}function c(e,t){const r=l(e);for(const n of r)for(const e of n)e[0]+=t;return e}function l(e){return Object(s.g)(e)?e.rings:e.paths}function u(e){const t=(null==e?void 0:e.isWebMercator)?102100:4326;return[o[t].minX,o[t].maxX]}},250:function(e,t,r){"use strict";class n{constructor(e=null,t={},r,n){this.displayId=0,this.geohashX=0,this.geohashY=0,this.geometry=e,t&&(this.attributes=t),r&&(this.centroid=r),null!=n&&(this.objectId=n)}get hasGeometry(){return!(!this.geometry||!this.geometry.coords||!this.geometry.coords.length)}weakClone(){const e=new n(this.geometry,this.attributes,this.centroid,this.objectId);return e.displayId=this.displayId,e.geohashX=this.geohashX,e.geohashY=this.geohashY,e}}t.a=n},252:function(e,t,r){"use strict";var n,i=r(79),s=r(135),o=r(224),a=r(84),c=r(86),l=r(83),u=r(81),d=(r(82),r(77),r(78),r(90)),h=r(80),p=r(89);let f=n=class extends a.a{constructor(e){super(e),this.respectsDaylightSaving=!1,this.timezone=null}readRespectsDaylightSaving(e,t){return void 0!==t.respectsDaylightSaving?t.respectsDaylightSaving:void 0!==t.respectDaylightSaving&&t.respectDaylightSaving}clone(){const{respectsDaylightSaving:e,timezone:t}=this;return new n({respectsDaylightSaving:e,timezone:t})}};Object(i.a)([Object(u.b)({type:Boolean,json:{write:!0}})],f.prototype,"respectsDaylightSaving",void 0),Object(i.a)([Object(d.a)("respectsDaylightSaving",["respectsDaylightSaving","respectDaylightSaving"])],f.prototype,"readRespectsDaylightSaving",null),Object(i.a)([Object(u.b)({type:String,json:{read:{source:"timeZone"},write:{target:"timeZone"}}})],f.prototype,"timezone",void 0),f=n=Object(i.a)([Object(h.a)("esri.layers.support.TimeReference")],f);var b,m=f,y=r(179);let g=b=class extends a.a{constructor(e){super(e),this.cumulative=!1,this.endField=null,this.fullTimeExtent=null,this.hasLiveData=!1,this.interval=null,this.startField=null,this.timeReference=null,this.trackIdField=null,this.useTime=!0}readFullTimeExtent(e,t){if(!t.timeExtent||!Array.isArray(t.timeExtent)||2!==t.timeExtent.length)return null;const r=new Date(t.timeExtent[0]),n=new Date(t.timeExtent[1]);return new s.a({start:r,end:n})}writeFullTimeExtent(e,t){e&&Object(l.k)(e.start)&&Object(l.k)(e.end)?t.timeExtent=[e.start.getTime(),e.end.getTime()]:t.timeExtent=null}readInterval(e,t){return t.timeInterval&&t.timeIntervalUnits?new o.a({value:t.timeInterval,unit:y.a.fromJSON(t.timeIntervalUnits)}):t.defaultTimeInterval&&t.defaultTimeIntervalUnits?new o.a({value:t.defaultTimeInterval,unit:y.a.fromJSON(t.defaultTimeIntervalUnits)}):null}writeInterval(e,t){if(e){const r=e.toJSON();t.timeInterval=r.value,t.timeIntervalUnits=r.unit}else t.timeInterval=null,t.timeIntervalUnits=null}clone(){const{cumulative:e,endField:t,hasLiveData:r,interval:n,startField:i,timeReference:s,fullTimeExtent:o,trackIdField:a,useTime:l}=this;return new b({cumulative:e,endField:t,hasLiveData:r,interval:n,startField:i,timeReference:Object(c.a)(s),fullTimeExtent:Object(c.a)(o),trackIdField:a,useTime:l})}};Object(i.a)([Object(u.b)({type:Boolean,json:{read:{source:"exportOptions.timeDataCumulative"},write:{target:"exportOptions.timeDataCumulative"}}})],g.prototype,"cumulative",void 0),Object(i.a)([Object(u.b)({type:String,json:{read:{source:"endTimeField"},write:{target:"endTimeField",allowNull:!0}}})],g.prototype,"endField",void 0),Object(i.a)([Object(u.b)({type:s.a,json:{write:{enabled:!0,allowNull:!0}}})],g.prototype,"fullTimeExtent",void 0),Object(i.a)([Object(d.a)("fullTimeExtent",["timeExtent"])],g.prototype,"readFullTimeExtent",null),Object(i.a)([Object(p.a)("fullTimeExtent")],g.prototype,"writeFullTimeExtent",null),Object(i.a)([Object(u.b)({type:Boolean,json:{write:!0}})],g.prototype,"hasLiveData",void 0),Object(i.a)([Object(u.b)({type:o.a,json:{write:{enabled:!0,allowNull:!0}}})],g.prototype,"interval",void 0),Object(i.a)([Object(d.a)("interval",["timeInterval","timeIntervalUnits","defaultTimeInterval","defaultTimeIntervalUnits"])],g.prototype,"readInterval",null),Object(i.a)([Object(p.a)("interval")],g.prototype,"writeInterval",null),Object(i.a)([Object(u.b)({type:String,json:{read:{source:"startTimeField"},write:{target:"startTimeField",allowNull:!0}}})],g.prototype,"startField",void 0),Object(i.a)([Object(u.b)({type:m,json:{write:{enabled:!0,allowNull:!0}}})],g.prototype,"timeReference",void 0),Object(i.a)([Object(u.b)({type:String,json:{write:{enabled:!0,allowNull:!0}}})],g.prototype,"trackIdField",void 0),Object(i.a)([Object(u.b)({type:Boolean,json:{read:{source:"exportOptions.useTime"},write:{target:"exportOptions.useTime"}}})],g.prototype,"useTime",void 0),g=b=Object(i.a)([Object(h.a)("esri.layers.support.TimeInfo")],g);var O=g;t.a=O},253:function(e,t,r){"use strict";function n(e){const t={};for(const r in e){if("declaredClass"===r)continue;const i=e[r];if(null!=i&&"function"!=typeof i)if(Array.isArray(i)){t[r]=[];for(let e=0;e<i.length;e++)t[r][e]=n(i[e])}else"object"==typeof i?i.toJSON&&(t[r]=JSON.stringify(i)):t[r]=i}return t}r.d(t,"a",(function(){return n}))},255:function(e,t,r){"use strict";r.d(t,"a",(function(){return i}));var n=r(228);function i(e,t,r){if(!r||!r.features||!r.hasZ)return;const i=Object(n.a)(r.geometryType,t,e.outSpatialReference);if(i)for(const n of r.features)i(n.geometry)}},260:function(e,t,r){"use strict";var n,i=r(79),s=r(88),o=r(84),a=r(86),c=r(81),l=(r(82),r(77),r(78),r(80)),u=r(89);const d=new s.a({count:"count",sum:"sum",min:"min",max:"max",avg:"avg",stddev:"stddev",var:"var",exceedslimit:"exceedslimit",percentile_cont:"percentile-continuous",percentile_disc:"percentile-discrete"});let h=n=class extends o.a{constructor(e){super(e),this.maxPointCount=void 0,this.maxRecordCount=void 0,this.maxVertexCount=void 0,this.onStatisticField=null,this.outStatisticFieldName=null,this.statisticType=null,this.statisticParameters=null}writeStatisticParameters(e,t){"percentile-continuous"!==this.statisticType&&"percentile-discrete"!==this.statisticType||(t.statisticParameters=Object(a.a)(e))}clone(){return new n({maxPointCount:this.maxPointCount,maxRecordCount:this.maxRecordCount,maxVertexCount:this.maxVertexCount,onStatisticField:this.onStatisticField,outStatisticFieldName:this.outStatisticFieldName,statisticType:this.statisticType,statisticParameters:Object(a.a)(this.statisticParameters)})}};Object(i.a)([Object(c.b)({type:Number,json:{write:!0}})],h.prototype,"maxPointCount",void 0),Object(i.a)([Object(c.b)({type:Number,json:{write:!0}})],h.prototype,"maxRecordCount",void 0),Object(i.a)([Object(c.b)({type:Number,json:{write:!0}})],h.prototype,"maxVertexCount",void 0),Object(i.a)([Object(c.b)({type:String,json:{write:!0}})],h.prototype,"onStatisticField",void 0),Object(i.a)([Object(c.b)({type:String,json:{write:!0}})],h.prototype,"outStatisticFieldName",void 0),Object(i.a)([Object(c.b)({type:String,json:{read:{source:"statisticType",reader:d.read},write:{target:"statisticType",writer:d.write}}})],h.prototype,"statisticType",void 0),Object(i.a)([Object(c.b)({type:Object})],h.prototype,"statisticParameters",void 0),Object(i.a)([Object(u.a)("statisticParameters")],h.prototype,"writeStatisticParameters",null),h=n=Object(i.a)([Object(l.a)("esri.rest.support.StatisticDefinition")],h);var p=h;t.a=p},263:function(e,t,r){"use strict";var n,i=r(79),s=(r(95),r(88)),o=r(84),a=r(86),c=r(81),l=(r(82),r(77),r(78),r(80)),u=r(96);const d=new s.a({upperLeft:"upper-left",lowerLeft:"lower-left"});let h=n=class extends o.a{constructor(e){super(e),this.extent=null,this.mode="view",this.originPosition="upper-left",this.tolerance=1}clone(){return new n(Object(a.a)({extent:this.extent,mode:this.mode,originPosition:this.originPosition,tolerance:this.tolerance}))}};Object(i.a)([Object(c.b)({type:u.a,json:{write:{overridePolicy(){return{enabled:"view"===this.mode}}}}})],h.prototype,"extent",void 0),Object(i.a)([Object(c.b)({type:["view","edit"],json:{write:!0}})],h.prototype,"mode",void 0),Object(i.a)([Object(c.b)({type:String,json:{read:d.read,write:d.write}})],h.prototype,"originPosition",void 0),Object(i.a)([Object(c.b)({type:Number,json:{write:{overridePolicy(){return{enabled:"view"===this.mode}}}}})],h.prototype,"tolerance",void 0),h=n=Object(i.a)([Object(l.a)("esri.rest.support.QuantizationParameters")],h);var p=h;t.a=p},274:function(e,t,r){"use strict";r.d(t,"a",(function(){return u}));var n,i=r(79),s=r(84),o=r(81),a=(r(77),r(82)),c=(r(78),r(93)),l=r(80);let u=n=class extends s.a{constructor(e){super(e),this.type="map-layer"}clone(){const{mapLayerId:e,gdbVersion:t}=this;return new n({mapLayerId:e,gdbVersion:t})}};Object(i.a)([Object(c.a)({mapLayer:"map-layer"})],u.prototype,"type",void 0),Object(i.a)([Object(o.b)({type:a.a,json:{write:!0}})],u.prototype,"mapLayerId",void 0),Object(i.a)([Object(o.b)({type:String,json:{write:!0}})],u.prototype,"gdbVersion",void 0),u=n=Object(i.a)([Object(l.a)("esri.layers.support.source.MapLayerSource")],u)},275:function(e,t,r){"use strict";class n{constructor(){this.objectIdFieldName=null,this.globalIdFieldName=null,this.geohashFieldName=null,this.geometryProperties=null,this.geometryType=null,this.spatialReference=null,this.hasZ=!1,this.hasM=!1,this.features=[],this.fields=[],this.transform=null,this.exceededTransferLimit=!1,this.uniqueIdField=null,this.queryGeometryType=null,this.queryGeometry=null}weakClone(){const e=new n;return e.objectIdFieldName=this.objectIdFieldName,e.globalIdFieldName=this.globalIdFieldName,e.geohashFieldName=this.geohashFieldName,e.geometryProperties=this.geometryProperties,e.geometryType=this.geometryType,e.spatialReference=this.spatialReference,e.hasZ=this.hasZ,e.hasM=this.hasM,e.features=this.features,e.fields=this.fields,e.transform=this.transform,e.exceededTransferLimit=this.exceededTransferLimit,e.uniqueIdField=this.uniqueIdField,e.queryGeometry=this.queryGeometry,e.queryGeometryType=this.queryGeometryType,e}}t.a=n},289:function(e,t,r){"use strict";r.d(t,"a",(function(){return p}));var n=r(79),i=r(91),s=r(112),o=r(83),a=r(216),c=r(109),l=r(187),u=r(258),d=r(81),h=r(80);let p=class extends i.a{constructor(){super(...arguments),this.updating=!1,this.handleId=0,this.handles=new s.a,this.scheduleHandleId=0,this.pendingPromises=new Set}destroy(){this.removeAll(),this.handles.destroy()}add(e,t,r,n=0){const i=0!=(1&n),s=++this.handleId;i||this.installSyncUpdatingWatch(e,t,s);const o=0!=(2&n)?Object(c.a)(e,t,r,i):e.watch(t,r,i);return this.handles.add(o,s),{remove:()=>this.handles.remove(s)}}addOnCollectionPropertyChange(e,t,r,n=0){const i=0!=(2&n),s=++this.handleId;return this.handles.add([Object(c.b)(e,t,"after-changes",this.createSyncUpdatingCallback()),Object(c.b)(e,t,"change",r,i?e=>{r({added:e.items,removed:[],moved:[],target:e})}:void 0)],s),{remove:()=>{this.handles.remove(s)}}}addOnCollectionChange(e,t,r=0){const n=0!=(2&r),i=++this.handleId;return this.handles.add([e.on("after-changes",this.createSyncUpdatingCallback()),e.on("change",t)],i),n&&t({added:e.items,removed:[],moved:[],target:e}),{remove:()=>{this.handles.remove(i)}}}addPromise(e){if(Object(o.j)(e))return e;const t=++this.handleId;this.handles.add({remove:()=>{this.pendingPromises.delete(e)&&(0!==this.pendingPromises.size||this.handles.has(f)||this._set("updating",!1))}},t),this.pendingPromises.add(e),this._set("updating",!0);const r=()=>this.handles.remove(t);return e.then(r,r),e}removeAll(){this.pendingPromises.clear(),this.handles.removeAll(),this._set("updating",!1)}installSyncUpdatingWatch(e,t,r){const n=this.createSyncUpdatingCallback(),i=Object(u.b)((()=>Object(l.c)(e,t)),n);return this.handles.add(i,r),i}createSyncUpdatingCallback(){return()=>{this.handles.remove(f),++this.scheduleHandleId;const e=this.scheduleHandleId;this._get("updating")||this._set("updating",!0),this.handles.add(Object(a.b)((()=>{e===this.scheduleHandleId&&(this._set("updating",this.pendingPromises.size>0),this.handles.remove(f))})),f)}}};Object(n.a)([Object(d.b)({readOnly:!0})],p.prototype,"updating",void 0),p=Object(n.a)([Object(h.a)("esri.views.support.WatchUpdatingTracking")],p);const f=-42},306:function(e,t,r){"use strict";r.d(t,"a",(function(){return O})),r.d(t,"b",(function(){return m})),r.d(t,"c",(function(){return a})),r.d(t,"d",(function(){return j})),r.d(t,"e",(function(){return v})),r.d(t,"f",(function(){return w})),r.d(t,"g",(function(){return S}));var n=r(97);const i=(e,t,r)=>[t,r],s=(e,t,r)=>[t,r,e[2]],o=(e,t,r)=>[t,r,e[2],e[3]];function a(e){return e?{originPosition:"upper-left"===e.originPosition?"upperLeft":"lower-left"===e.originPosition?"lowerLeft":e.originPosition,scale:e.tolerance?[e.tolerance,e.tolerance]:[1,1],translate:e.extent?[e.extent.xmin,e.extent.ymax]:[0,0]}:null}function c({scale:e,translate:t},r){return Math.round((r-t[0])/e[0])}function l({scale:e,translate:t},r){return Math.round((t[1]-r)/e[1])}function u(e,t,r){const n=[];let i,s,o,a;for(let u=0;u<r.length;u++){const d=r[u];u>0?(o=c(e,d[0]),a=l(e,d[1]),o===i&&a===s||(n.push(t(d,o-i,a-s)),i=o,s=a)):(i=c(e,d[0]),s=l(e,d[1]),n.push(t(d,i,s)))}return n.length>0?n:null}function d({scale:e,translate:t},r){return r*e[0]+t[0]}function h({scale:e,translate:t},r){return t[1]-r*e[1]}function p(e,t,r){const n=new Array(r.length);if(!r.length)return n;const[i,s]=e.scale;let o=d(e,r[0][0]),a=h(e,r[0][1]);n[0]=t(r[0],o,a);for(let c=1;c<r.length;c++){const e=r[c];o+=e[0]*i,a-=e[1]*s,n[c]=t(e,o,a)}return n}function f(e,t,r){const n=new Array(r.length);for(let i=0;i<r.length;i++)n[i]=p(e,t,r[i]);return n}function b(e,t,r,n,a){return t.points=function(e,t,r,n){return u(e,r?n?o:s:n?s:i,t)}(e,r.points,n,a),t}function m(e,t,r,n,i){return t.x=c(e,r.x),t.y=l(e,r.y),t!==r&&(n&&(t.z=r.z),i&&(t.m=r.m)),t}function y(e,t,r,n,a){const c=function(e,t,r,n){const a=[],c=r?n?o:s:n?s:i;for(let i=0;i<t.length;i++){const r=u(e,c,t[i]);r&&r.length>=3&&a.push(r)}return a.length?a:null}(e,r.rings,n,a);return c?(t.rings=c,t):null}function g(e,t,r,n,a){const c=function(e,t,r,n){const a=[],c=r?n?o:s:n?s:i;for(let i=0;i<t.length;i++){const r=u(e,c,t[i]);r&&r.length>=2&&a.push(r)}return a.length?a:null}(e,r.paths,n,a);return c?(t.paths=c,t):null}function O(e,t){return e&&t?Object(n.f)(t)?m(e,{},t,!1,!1):Object(n.h)(t)?g(e,{},t,!1,!1):Object(n.g)(t)?y(e,{},t,!1,!1):Object(n.e)(t)?b(e,{},t,!1,!1):Object(n.d)(t)?(o=!1,a=!1,(i={}).xmin=c(r=e,(s=t).xmin),i.ymin=l(r,s.ymin),i.xmax=c(r,s.xmax),i.ymax=l(r,s.ymax),i!==s&&(o&&(i.zmin=s.zmin,i.zmax=s.zmax),a&&(i.mmin=s.mmin,i.mmax=s.mmax)),i):null:null;var r,i,s,o,a}function j(e,t,r,n,a){return t.points=function(e,t,r,n){return p(e,r?n?o:s:n?s:i,t)}(e,r.points,n,a),t}function v(e,t,r,n,i){return t.x=d(e,r.x),t.y=h(e,r.y),t!==r&&(n&&(t.z=r.z),i&&(t.m=r.m)),t}function w(e,t,r,n,a){return t.rings=function(e,t,r,n){return f(e,r?n?o:s:n?s:i,t)}(e,r.rings,n,a),t}function S(e,t,r,n,a){return t.paths=function(e,t,r,n){return f(e,r?n?o:s:n?s:i,t)}(e,r.paths,n,a),t}},363:function(e,t,r){"use strict";var n,i=r(79),s=r(88),o=r(84),a=r(111),c=r(81),l=(r(77),r(82)),u=(r(78),r(90)),d=r(80),h=r(89),p=r(105),f=r(92),b=r(121),m=r(102),y=r(151),g=r(480);const O=new s.a({PNG:"png",PNG8:"png8",PNG24:"png24",PNG32:"png32",JPEG:"jpg",JPG:"jpg",DIB:"dib",TIFF:"tiff",EMF:"emf",PS:"ps",PDF:"pdf",GIF:"gif",SVG:"svg",SVGZ:"svgz",Mixed:"mixed",MIXED:"mixed",LERC:"lerc",LERC2D:"lerc2d",RAW:"raw",pbf:"pbf"});let j=n=class extends o.a{constructor(e){super(e),this.dpi=96,this.format=null,this.origin=null,this.minScale=0,this.maxScale=0,this.size=null,this.spatialReference=null}static create(e={}){const{resolutionFactor:t=1,scales:r,size:i=256,spatialReference:s=f.a.WebMercator,numLODs:o=24}=e;if(!Object(m.j)(s)){const e=[];if(r)for(let t=0;t<r.length;t++){const n=r[t];e.push({level:t,scale:n,resolution:n})}else{let t=5e-4;for(let r=o-1;r>=0;r--)e.unshift({level:r,scale:t,resolution:t}),t*=2}return new n({dpi:96,lods:e,origin:new p.a(0,0,s),size:[i,i],spatialReference:s})}const c=Object(m.d)(s),l=e.origin?new p.a({x:e.origin.x,y:e.origin.y,spatialReference:s}):new p.a(c?{x:c.origin[0],y:c.origin[1],spatialReference:s}:{x:0,y:0,spatialReference:s}),u=1/(39.37*Object(a.f)(s)*96),d=[];if(r)for(let n=0;n<r.length;n++){const e=r[n],t=e*u;d.push({level:n,scale:e,resolution:t})}else{let e=Object(m.g)(s)?512/i*591657527.5917094:256/i*591657527.591555;const r=Math.ceil(o/t);d.push({level:0,scale:e,resolution:e*u});for(let n=1;n<r;n++){const r=e/2**t,i=r*u;d.push({level:n,scale:r,resolution:i}),e=r}}return new n({dpi:96,lods:d,origin:l,size:[i,i],spatialReference:s})}get isWrappable(){const{spatialReference:e,origin:t}=this;if(e&&t){const r=Object(m.d)(e);return e.isWrappable&&Math.abs(r.origin[0]-t.x)<=r.dx}return!1}readOrigin(e,t){return p.a.fromJSON({spatialReference:t.spatialReference,...e})}set lods(e){let t=0,r=0;const n=[];this._levelToLOD={},e&&(t=-1/0,r=1/0,e.forEach((e=>{n.push(e.scale),t=e.scale>t?e.scale:t,r=e.scale<r?e.scale:r,this._levelToLOD[e.level]=e}))),this._set("scales",n),this._set("minScale",t),this._set("maxScale",r),this._set("lods",e),this._initializeUpsampleLevels()}readSize(e,t){return[t.cols,t.rows]}writeSize(e,t){t.cols=e[0],t.rows=e[0]}zoomToScale(e){const t=this.scales;if(e<=0)return t[0];if(e>=t.length-1)return t[t.length-1];{const r=Math.floor(e),n=r+1;return t[r]/(t[r]/t[n])**(e-r)}}scaleToZoom(e){const t=this.scales,r=t.length-1;let n=0;for(;n<r;n++){const r=t[n],i=t[n+1];if(r<=e)return n;if(i===e)return n+1;if(r>e&&i<e)return n+Math.log(r/e)/Math.log(r/i)}return n}snapScale(e,t=.95){const r=this.scaleToZoom(e);return r%Math.floor(r)>=t?this.zoomToScale(Math.ceil(r)):this.zoomToScale(Math.floor(r))}tileAt(e,t,r,n){const i=this.lodAt(e);if(!i)return null;let s,o;if("number"==typeof t)s=t,o=r;else if(Object(m.c)(t.spatialReference,this.spatialReference))s=t.x,o=t.y,n=r;else{const e=Object(y.d)(t,this.spatialReference);if(!e)return null;s=e.x,o=e.y,n=r}const a=i.resolution*this.size[0],c=i.resolution*this.size[1];return n||(n={id:null,level:0,row:0,col:0,extent:Object(b.k)()}),n.level=e,n.row=Math.floor((this.origin.y-o)/c+.001),n.col=Math.floor((s-this.origin.x)/a+.001),this.updateTileInfo(n),n}updateTileInfo(e,t=0){let r=this.lodAt(e.level);if(!r&&1===t){const t=this.lods[this.lods.length-1];t.level<e.level&&(r=t)}if(!r)return;const n=e.level-r.level,i=r.resolution*this.size[0]/2**n,s=r.resolution*this.size[1]/2**n;e.id=`${e.level}/${e.row}/${e.col}`,e.extent||(e.extent=Object(b.k)()),e.extent[0]=this.origin.x+e.col*i,e.extent[1]=this.origin.y-(e.row+1)*s,e.extent[2]=e.extent[0]+i,e.extent[3]=e.extent[1]+s}upsampleTile(e){const t=this._upsampleLevels[e.level];return!(!t||-1===t.parentLevel)&&(e.level=t.parentLevel,e.row=Math.floor(e.row/t.factor+.001),e.col=Math.floor(e.col/t.factor+.001),this.updateTileInfo(e),!0)}getTileBounds(e,t){const{resolution:r}=this.lodAt(t.level),n=r*this.size[0],i=r*this.size[1];return e[0]=this.origin.x+t.col*n,e[1]=this.origin.y-(t.row+1)*i,e[2]=e[0]+n,e[3]=e[1]+i,e}lodAt(e){return this._levelToLOD&&this._levelToLOD[e]||null}clone(){return n.fromJSON(this.write({}))}_initializeUpsampleLevels(){const e=this.lods;this._upsampleLevels=[];let t=null;for(let r=0;r<e.length;r++){const n=e[r];this._upsampleLevels[n.level]={parentLevel:t?t.level:-1,factor:t?t.resolution/n.resolution:0},t=n}}};Object(i.a)([Object(c.b)({type:Number,json:{write:!0}})],j.prototype,"compressionQuality",void 0),Object(i.a)([Object(c.b)({type:Number,json:{write:!0}})],j.prototype,"dpi",void 0),Object(i.a)([Object(c.b)({type:String,json:{read:O.read,write:O.write,origins:{"web-scene":{read:!1,write:!1}}}})],j.prototype,"format",void 0),Object(i.a)([Object(c.b)({readOnly:!0})],j.prototype,"isWrappable",null),Object(i.a)([Object(c.b)({type:p.a,json:{write:!0}})],j.prototype,"origin",void 0),Object(i.a)([Object(u.a)("origin")],j.prototype,"readOrigin",null),Object(i.a)([Object(c.b)({type:[g.a],value:null,json:{write:!0}})],j.prototype,"lods",null),Object(i.a)([Object(c.b)({readOnly:!0})],j.prototype,"minScale",void 0),Object(i.a)([Object(c.b)({readOnly:!0})],j.prototype,"maxScale",void 0),Object(i.a)([Object(c.b)({readOnly:!0})],j.prototype,"scales",void 0),Object(i.a)([Object(c.b)({cast:e=>Array.isArray(e)?e:"number"==typeof e?[e,e]:[256,256]})],j.prototype,"size",void 0),Object(i.a)([Object(u.a)("size",["rows","cols"])],j.prototype,"readSize",null),Object(i.a)([Object(h.a)("size",{cols:{type:l.a},rows:{type:l.a}})],j.prototype,"writeSize",null),Object(i.a)([Object(c.b)({type:f.a,json:{write:!0}})],j.prototype,"spatialReference",void 0),j=n=Object(i.a)([Object(d.a)("esri.layers.support.TileInfo")],j);var v=j;t.a=v},367:function(e,t,r){"use strict";var n=r(77),i=r(182);const s=4294967296,o=Object(n.a)("esri-text-decoder")?new TextDecoder("utf-8"):null,a=Object(n.a)("safari")||Object(n.a)("ios")?6:Object(n.a)("ff")?12:32;class c{constructor(e,t,r=0,n=(e?e.byteLength:0)){this._tag=0,this._dataType=99,this.init(e,t,r,n)}init(e,t,r,n){this._data=e,this._dataView=t,this._pos=r,this._end=n}clone(){return new c(this._data,this._dataView,this._pos,this._end)}pos(){return this._pos}move(e){this._pos=e}nextTag(e){for(;;){if(this._pos===this._end)return!1;const t=this._decodeVarint();if(this._tag=t>>3,this._dataType=7&t,!e||e===this._tag)break;this.skip()}return!0}next(){if(this._pos===this._end)return!1;const e=this._decodeVarint();return this._tag=e>>3,this._dataType=7&e,!0}empty(){return this._pos>=this._end}tag(){return this._tag}getInt32(){return this._decodeVarint()}getInt64(){return this._decodeVarint()}getUInt32(){let e=4294967295;return e=(127&this._data[this._pos])>>>0,this._data[this._pos++]<128?e:(e=(e|(127&this._data[this._pos])<<7)>>>0,this._data[this._pos++]<128?e:(e=(e|(127&this._data[this._pos])<<14)>>>0,this._data[this._pos++]<128?e:(e=(e|(127&this._data[this._pos])<<21)>>>0,this._data[this._pos++]<128?e:(e=(e|(15&this._data[this._pos])<<28)>>>0,this._data[this._pos++]<128?e:void 0))))}getUInt64(){return this._decodeVarint()}getSInt32(){const e=this.getUInt32();return e>>>1^-(1&e)|0}getSInt64(){return this._decodeSVarint()}getBool(){const e=0!==this._data[this._pos];return this._skip(1),e}getEnum(){return this._decodeVarint()}getFixed64(){const e=this._dataView,t=this._pos,r=e.getUint32(t,!0)+e.getUint32(t+4,!0)*s;return this._skip(8),r}getSFixed64(){const e=this._dataView,t=this._pos,r=e.getUint32(t,!0)+e.getInt32(t+4,!0)*s;return this._skip(8),r}getDouble(){const e=this._dataView.getFloat64(this._pos,!0);return this._skip(8),e}getFixed32(){const e=this._dataView.getUint32(this._pos,!0);return this._skip(4),e}getSFixed32(){const e=this._dataView.getInt32(this._pos,!0);return this._skip(4),e}getFloat(){const e=this._dataView.getFloat32(this._pos,!0);return this._skip(4),e}getString(){const e=this._getLength(),t=this._pos,r=this._toString(this._data,t,t+e);return this._skip(e),r}getBytes(){const e=this._getLength(),t=this._pos,r=this._toBytes(this._data,t,t+e);return this._skip(e),r}getLength(){return this._getLengthUnsafe()}processMessageWithArgs(e,t,r,n){const i=this.getMessage(),s=e(i,t,r,n);return i.release(),s}processMessage(e){const t=this.getMessage(),r=e(t);return t.release(),r}getMessage(){const e=this._getLength(),t=c.pool.acquire();return t.init(this._data,this._dataView,this._pos,this._pos+e),this._skip(e),t}release(){c.pool.release(this)}dataType(){return this._dataType}skip(){switch(this._dataType){case 0:this._decodeVarint();break;case 1:this._skip(8);break;case 2:this._skip(this._getLength());break;case 5:this._skip(4);break;default:throw new Error("Invalid data type!")}}skipLen(e){this._skip(e)}_skip(e){if(this._pos+e>this._end)throw new Error("Attempt to skip past the end of buffer!");this._pos+=e}_decodeVarint(){const e=this._data;let t,r=this._pos,n=0;if(this._end-r>=10)do{if(t=e[r++],n|=127&t,0==(128&t))break;if(t=e[r++],n|=(127&t)<<7,0==(128&t))break;if(t=e[r++],n|=(127&t)<<14,0==(128&t))break;if(t=e[r++],n|=(127&t)<<21,0==(128&t))break;if(t=e[r++],n+=268435456*(127&t),0==(128&t))break;if(t=e[r++],n+=34359738368*(127&t),0==(128&t))break;if(t=e[r++],n+=4398046511104*(127&t),0==(128&t))break;if(t=e[r++],n+=562949953421312*(127&t),0==(128&t))break;if(t=e[r++],n+=72057594037927940*(127&t),0==(128&t))break;if(t=e[r++],n+=0x8000000000000000*(127&t),0==(128&t))break;throw new Error("Varint too long!")}while(0);else{let i=1;for(;r!==this._end&&(t=e[r],0!=(128&t));)++r,n+=(127&t)*i,i*=128;if(r===this._end)throw new Error("Varint overrun!");++r,n+=t*i}return this._pos=r,n}_decodeSVarint(){const e=this._decodeVarint();return e%2?-(e+1)/2:e/2}_getLength(){if(2!==this._dataType)throw new Error("Not a delimited data type!");return this._decodeVarint()}_getLengthUnsafe(){return this.getUInt32()}_toString(e,t,r){if((r=Math.min(this._end,r))-t>a&&o){const n=e.subarray(t,r);return o.decode(n)}let n="",i="";for(let s=t;s<r;++s){const t=e[s];128&t?i+="%"+t.toString(16):(n+=decodeURIComponent(i)+String.fromCharCode(t),i="")}return i.length&&(n+=decodeURIComponent(i)),n}_toBytes(e,t,r){return r=Math.min(this._end,r),new Uint8Array(e.buffer,t,r-t)}}c.pool=new i.a(c,null,(e=>{e._data=null,e._dataView=null})),t.a=c},383:function(e,t,r){"use strict";r.d(t,"a",(function(){return c})),r.d(t,"b",(function(){return l}));var n=r(111),i=r(102),s=r(250),o=r(275),a=r(161);const c=["esriGeometryPoint","esriGeometryMultipoint","esriGeometryPolyline","esriGeometryPolygon"];class l{constructor(e){this.options=e,this.geometryTypes=c,this._coordinatePtr=0,this._vertexDimension=0}createFeatureResult(){return new o.a}prepareFeatures(e){this._vertexDimension=2,e.hasZ&&this._vertexDimension++,e.hasM&&this._vertexDimension++}finishFeatureResult(e){if(!e||!e.features||!e.hasZ||!this.options.sourceSpatialReference||!e.spatialReference||Object(i.c)(e.spatialReference,this.options.sourceSpatialReference)||e.spatialReference.vcsWkid)return;const t=Object(n.g)(this.options.sourceSpatialReference)/Object(n.g)(e.spatialReference);if(1!==t)for(const r of e.features){if(!r.geometry||!r.geometry.coords)continue;const e=r.geometry.coords;for(let r=2;r<e.length;r+=3)e[r]*=t}}addFeature(e,t){e.features.push(t)}createFeature(){return new s.a}createSpatialReference(){return{wkid:0}}createGeometry(){return new a.a}addField(e,t){e.fields.push(t)}allocateCoordinates(e){e.coords.length=e.lengths.reduce(((e,t)=>e+t),0)*this._vertexDimension,this._coordinatePtr=0}addCoordinate(e,t){e.coords[this._coordinatePtr++]=t}addCoordinatePoint(e,t){e.coords.push(t)}addLength(e,t){e.lengths.push(t)}addQueryGeometry(e,t){e.queryGeometry=t.queryGeometry,e.queryGeometryType=t.queryGeometryType}createPointGeometry(){return new a.a}}},391:function(e,t,r){"use strict";r.d(t,"a",(function(){return k})),r.d(t,"b",(function(){return d})),r.d(t,"c",(function(){return x}));var n=r(85),i=r(83),s=r(367),o=r(161),a=r(383);const c=["esriFieldTypeSmallInteger","esriFieldTypeInteger","esriFieldTypeSingle","esriFieldTypeDouble","esriFieldTypeString","esriFieldTypeDate","esriFieldTypeOID","esriFieldTypeGeometry","esriFieldTypeBlob","esriFieldTypeRaster","esriFieldTypeGUID","esriFieldTypeGlobalID","esriFieldTypeXML"],l=["sqlTypeBigInt","sqlTypeBinary","sqlTypeBit","sqlTypeChar","sqlTypeDate","sqlTypeDecimal","sqlTypeDouble","sqlTypeFloat","sqlTypeGeometry","sqlTypeGUID","sqlTypeInteger","sqlTypeLongNVarchar","sqlTypeLongVarbinary","sqlTypeLongVarchar","sqlTypeNChar","sqlTypeNVarchar","sqlTypeOther","sqlTypeReal","sqlTypeSmallInt","sqlTypeSqlXml","sqlTypeTime","sqlTypeTimestamp","sqlTypeTimestamp2","sqlTypeTinyInt","sqlTypeVarbinary","sqlTypeVarchar"],u=["upperLeft","lowerLeft"];function d(e){return e>=c.length?null:c[e]}function h(e){return e>=l.length?null:l[e]}function p(e){return e>=u.length?null:u[e]}function f(e,t){return t>=e.geometryTypes.length?null:e.geometryTypes[t]}function b(e,t,r){const n=t.createPointGeometry(r);for(;e.next();)switch(e.tag()){case 3:{const r=e.getUInt32(),i=e.pos()+r;let s=0;for(;e.pos()<i;)t.addCoordinatePoint(n,e.getSInt64(),s++);break}case 1:case 2:default:e.skip()}return n}function m(e,t,r){const n=t.createGeometry(r),i=2+(r.hasZ?1:0)+(r.hasM?1:0);for(;e.next();)switch(e.tag()){case 2:{const r=e.getUInt32(),i=e.pos()+r;let s=0;for(;e.pos()<i;)t.addLength(n,e.getUInt32(),s++);break}case 3:{const r=e.getUInt32(),s=e.pos()+r;let o=0;for(t.allocateCoordinates(n);e.pos()<s;)t.addCoordinate(n,e.getSInt64(),o),o++,o===i&&(o=0);break}case 1:default:e.skip()}return n}function y(e){const t=new o.a;let r="esriGeometryPoint";for(;e.next();)switch(e.tag()){case 2:{const r=e.getUInt32(),n=e.pos()+r;for(;e.pos()<n;)t.lengths.push(e.getUInt32());break}case 3:{const r=e.getUInt32(),n=e.pos()+r;for(;e.pos()<n;)t.coords.push(e.getSInt64());break}case 1:r=a.a[e.getEnum()];break;default:e.skip()}return{queryGeometry:t,queryGeometryType:r}}function g(e){for(;e.next();)switch(e.tag()){case 1:return e.getString();case 2:return e.getFloat();case 3:return e.getDouble();case 4:return e.getSInt32();case 5:return e.getUInt32();case 6:return e.getInt64();case 7:return e.getUInt64();case 8:return e.getSInt64();case 9:return e.getBool();default:return e.skip(),null}return null}function O(e){const t={type:d(0)};for(;e.next();)switch(e.tag()){case 1:t.name=e.getString();break;case 2:t.type=d(e.getEnum());break;case 3:t.alias=e.getString();break;case 4:t.sqlType=h(e.getEnum());break;case 5:e.skip();break;case 6:t.defaultValue=e.getString();break;default:e.skip()}return t}function j(e){const t={};for(;e.next();)switch(e.tag()){case 1:t.name=e.getString();break;case 2:t.isSystemMaintained=e.getBool();break;default:e.skip()}return t}function v(e,t,r,n){const i=t.createFeature(r);let s=0;for(;e.next();)switch(e.tag()){case 1:{const t=n[s++].name;i.attributes[t]=e.processMessage(g);break}case 2:i.geometry=e.processMessageWithArgs(m,t,r);break;case 4:i.centroid=e.processMessageWithArgs(b,t,r);break;default:e.skip()}return i}function w(e){const t=[1,1,1,1];for(;e.next();)switch(e.tag()){case 1:t[0]=e.getDouble();break;case 2:t[1]=e.getDouble();break;case 4:t[2]=e.getDouble();break;case 3:t[3]=e.getDouble();break;default:e.skip()}return t}function S(e){const t=[0,0,0,0];for(;e.next();)switch(e.tag()){case 1:t[0]=e.getDouble();break;case 2:t[1]=e.getDouble();break;case 4:t[2]=e.getDouble();break;case 3:t[3]=e.getDouble();break;default:e.skip()}return t}function x(e){const t={originPosition:p(0)};for(;e.next();)switch(e.tag()){case 1:t.originPosition=p(e.getEnum());break;case 2:t.scale=e.processMessage(w);break;case 3:t.translate=e.processMessage(S);break;default:e.skip()}return t}function T(e){const t={};for(;e.next();)switch(e.tag()){case 1:t.shapeAreaFieldName=e.getString();break;case 2:t.shapeLengthFieldName=e.getString();break;case 3:t.units=e.getString();break;default:e.skip()}return t}function _(e,t){const r=t.createSpatialReference();for(;e.next();)switch(e.tag()){case 1:r.wkid=e.getUInt32();break;case 5:r.wkt=e.getString();break;case 2:r.latestWkid=e.getUInt32();break;case 3:r.vcsWkid=e.getUInt32();break;case 4:r.latestVcsWkid=e.getUInt32();break;default:e.skip()}return r}function F(e,t){const r=t.createFeatureResult();r.geometryType=f(t,0);let n=!1;for(;e.next();)switch(e.tag()){case 1:r.objectIdFieldName=e.getString();break;case 3:r.globalIdFieldName=e.getString();break;case 4:r.geohashFieldName=e.getString();break;case 5:r.geometryProperties=e.processMessage(T);break;case 7:r.geometryType=f(t,e.getEnum());break;case 8:r.spatialReference=e.processMessageWithArgs(_,t);break;case 10:r.hasZ=e.getBool();break;case 11:r.hasM=e.getBool();break;case 12:r.transform=e.processMessage(x);break;case 9:{const t=e.getBool();r.exceededTransferLimit=t;break}case 13:t.addField(r,e.processMessage(O));break;case 15:n||(t.prepareFeatures(r),n=!0),t.addFeature(r,e.processMessageWithArgs(v,t,r,r.fields));break;case 2:r.uniqueIdField=e.processMessage(j);break;case 6:default:e.skip()}return t.finishFeatureResult(r),r}function I(e,t){const r={};let n=null;for(;e.next();)switch(e.tag()){case 4:n=e.processMessageWithArgs(y);break;case 1:r.featureResult=e.processMessageWithArgs(F,t);break;case 2:case 3:default:e.skip()}return Object(i.k)(n)&&r.featureResult&&t.addQueryGeometry(r,n),r}function k(e,t){try{const r=2,n=new s.a(new Uint8Array(e),new DataView(e)),i={};for(;n.next();)switch(n.tag()){case r:i.queryResult=n.processMessageWithArgs(I,t);break;default:n.skip()}return i}catch(r){throw new n.a("query:parsing-pbf","Error while parsing FeatureSet PBF payload",{error:r})}}},396:function(e,t,r){"use strict";r.d(t,"a",(function(){return i}));var n=r(391);function i(e,t){const r=Object(n.a)(e,t),i=r.queryResult.featureResult,s=r.queryResult.queryGeometry,o=r.queryResult.queryGeometryType;if(i&&i.features&&i.features.length&&i.objectIdFieldName){const e=i.objectIdFieldName;for(const t of i.features)t.attributes&&(t.objectId=t.attributes[e])}return i&&(i.queryGeometry=s,i.queryGeometryType=o),i}},397:function(e,t,r){"use strict";var n=r(219);t.a=class{constructor(e,t){this._storage=new n.b,this._storage.maxSize=e,t&&this._storage.registerRemoveFunc("",t)}put(e,t){this._storage.put(e,t,1,1)}pop(e){return this._storage.pop(e)}get(e){return this._storage.get(e)}clear(){this._storage.clearAll()}destroy(){this._storage.destroy()}}},480:function(e,t,r){"use strict";var n,i=r(79),s=r(84),o=r(81),a=(r(77),r(82)),c=(r(78),r(80));let l=n=class extends s.a{constructor(e){super(e),this.level=0,this.levelValue=null,this.resolution=0,this.scale=0}clone(){return new n({level:this.level,levelValue:this.levelValue,resolution:this.resolution,scale:this.scale})}};Object(i.a)([Object(o.b)({type:a.a,json:{write:!0}})],l.prototype,"level",void 0),Object(i.a)([Object(o.b)({type:String,json:{write:!0}})],l.prototype,"levelValue",void 0),Object(i.a)([Object(o.b)({type:Number,json:{write:!0}})],l.prototype,"resolution",void 0),Object(i.a)([Object(o.b)({type:Number,json:{write:!0}})],l.prototype,"scale",void 0),l=n=Object(i.a)([Object(c.a)("esri.layers.support.LOD")],l);var u=l;t.a=u},510:function(e,t,r){"use strict";var n=r(87);class i{constructor(e,t,r,n,i){this.resolve=e,this.reject=t,this.callback=r,this.signal=n,this.abortCallback=i}}t.a=class{constructor(){this._tasks=new Array}get length(){return this._tasks.length}push(e,t,r){return new Promise(((n,s)=>this._tasks.push(new i(n,s,e,t,r))))}unshift(e,t,r){return new Promise(((n,s)=>this._tasks.unshift(new i(n,s,e,t,r))))}process(){if(0===this._tasks.length)return!1;const e=this._tasks.shift();try{const t=Object(n.n)(e.signal);if(t&&!e.abortCallback)e.reject(Object(n.e)());else{const r=t?e.abortCallback(Object(n.e)()):e.callback();Object(n.o)(r)?r.then(e.resolve,e.reject):e.resolve(r)}}catch(i){e.reject(i)}return!0}cancelAll(){const e=Object(n.e)();for(const t of this._tasks)if(t.abortCallback){const r=t.abortCallback(e);t.resolve(r)}else t.reject(e);this._tasks.length=0}}},581:function(e,t,r){"use strict";function n(e){return 32+e.length}function i(e){if(!e)return 0;let t=32;for(const r in e)if(e.hasOwnProperty(r)){const i=e[r];switch(typeof i){case"string":t+=n(i);break;case"number":t+=16;break;case"boolean":t+=4}}return t}function s(e,t){return 32+e.length*t}r.d(t,"a",(function(){return i})),r.d(t,"b",(function(){return s}))}}]);
//# sourceMappingURL=104.e285deeb.chunk.js.map