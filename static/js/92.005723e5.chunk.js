/*! For license information please see 92.005723e5.chunk.js.LICENSE.txt */
(this.webpackJsonpimaps=this.webpackJsonpimaps||[]).push([[92,50,278,283],{102:function(e,t,r){"use strict";function n(){return[0,0,0]}function i(e){return[e[0],e[1],e[2]]}function o(e,t,r){return[e,t,r]}function a(e){const t=[0,0,0],r=Math.min(3,e.length);for(let n=0;n<r;++n)t[n]=e[n];return t}function s(e,t){return new Float64Array(e,t,3)}function l(){return[0,0,0]}function c(){return o(1,1,1)}function u(){return o(1,0,0)}function d(){return o(0,1,0)}function p(){return o(0,0,1)}r.d(t,"a",(function(){return b})),r.d(t,"b",(function(){return h})),r.d(t,"c",(function(){return s})),r.d(t,"d",(function(){return i})),r.d(t,"e",(function(){return n})),r.d(t,"f",(function(){return a})),r.d(t,"g",(function(){return o}));const h=[0,0,0],b=c(),m=u(),f=d(),g=p();Object.freeze({__proto__:null,create:n,clone:i,fromValues:o,fromArray:a,createView:s,zeros:l,ones:c,unitX:u,unitY:d,unitZ:p,ZEROS:h,ONES:b,UNIT_X:m,UNIT_Y:f,UNIT_Z:g})},1049:function(e,t,r){"use strict";var n=r(81),i=(r(79),r(88)),o=r(80),a=r(87),s=r(84),l=r(96),c=r(83),u=r(94),d=r(91),p=r(82),h=(r(85),r(86),r(206)),b=r(92),m=r(250),f=r(97),g=r(158),y=r(105),v=r(157),O=r(224),j=r(182),w=r(249),k=r(433),_=r(311),S=r(539),I=r(607),x=r(861),T=r(556),E=r(183),A=r(106),M=r(673),C=r(239),N=r(654),P=r(89);let D=class extends P.a{constructor(e){super(e),this.layerId=null,this.facilityIdField=null,this.siteIdField=null,this.nameField=null}};Object(n.a)([Object(s.b)({type:String,json:{write:!0,origins:{"web-scene":{write:!1}}}})],D.prototype,"layerId",void 0),Object(n.a)([Object(s.b)({type:String,json:{write:!0,origins:{"web-scene":{write:!1}}}})],D.prototype,"facilityIdField",void 0),Object(n.a)([Object(s.b)({type:String,json:{write:!0,origins:{"web-scene":{write:!1}}}})],D.prototype,"siteIdField",void 0),Object(n.a)([Object(s.b)({type:String,json:{write:!0,origins:{"web-scene":{write:!1}}}})],D.prototype,"nameField",void 0),D=Object(n.a)([Object(c.a)("esri.layers.support.FacilityLayerInfo")],D);var B=D;let F=class extends P.a{constructor(e){super(e),this.layerId=null,this.levelIdField=null,this.facilityIdField=null,this.longNameField=null,this.shortNameField=null,this.levelNumberField=null,this.verticalOrderField=null}};Object(n.a)([Object(s.b)({type:String,json:{write:!0,origins:{"web-scene":{write:!1}}}})],F.prototype,"layerId",void 0),Object(n.a)([Object(s.b)({type:String,json:{write:!0,origins:{"web-scene":{write:!1}}}})],F.prototype,"levelIdField",void 0),Object(n.a)([Object(s.b)({type:String,json:{write:!0,origins:{"web-scene":{write:!1}}}})],F.prototype,"facilityIdField",void 0),Object(n.a)([Object(s.b)({type:String,json:{write:!0,origins:{"web-scene":{write:!1}}}})],F.prototype,"longNameField",void 0),Object(n.a)([Object(s.b)({type:String,json:{write:!0,origins:{"web-scene":{write:!1}}}})],F.prototype,"shortNameField",void 0),Object(n.a)([Object(s.b)({type:String,json:{write:!0,origins:{"web-scene":{write:!1}}}})],F.prototype,"levelNumberField",void 0),Object(n.a)([Object(s.b)({type:String,json:{write:!0,origins:{"web-scene":{write:!1}}}})],F.prototype,"verticalOrderField",void 0),F=Object(n.a)([Object(c.a)("esri.layers.support.LevelLayerInfo")],F);var L=F;let R=class extends P.a{constructor(e){super(e),this.layerId=null,this.siteIdField=null,this.nameField=null}};Object(n.a)([Object(s.b)({type:String,json:{write:!0,origins:{"web-scene":{write:!1}}}})],R.prototype,"layerId",void 0),Object(n.a)([Object(s.b)({type:String,json:{write:!0,origins:{"web-scene":{write:!1}}}})],R.prototype,"siteIdField",void 0),Object(n.a)([Object(s.b)({type:String,json:{write:!0,origins:{"web-scene":{write:!1}}}})],R.prototype,"nameField",void 0),R=Object(n.a)([Object(c.a)("esri.layers.support.SiteLayerInfo")],R);var U=R;let q=class extends P.a{constructor(e){super(e),this.levelLayer=null,this.facilityLayer=null,this.siteLayer=null}};Object(n.a)([Object(s.b)({type:L,json:{write:!0,origins:{"web-scene":{write:!1}}}})],q.prototype,"levelLayer",void 0),Object(n.a)([Object(s.b)({type:B,json:{write:!0,origins:{"web-scene":{write:!1}}}})],q.prototype,"facilityLayer",void 0),Object(n.a)([Object(s.b)({type:U,json:{write:!0,origins:{"web-scene":{write:!1}}}})],q.prototype,"siteLayer",void 0),q=Object(n.a)([Object(c.a)("esri.support.MapFloorInfo")],q);var V,W=q,G=r(542),J=r(90);let z=V=class extends P.a{constructor(e){super(e),this.activeRange=null,this.currentRangeExtent=null,this.fullRangeExtent=null}clone(){return new V(Object(J.a)({activeRange:this.activeRange,currentRangeExtent:this.currentRangeExtent,fullRangeExtent:this.fullRangeExtent}))}};Object(n.a)([Object(s.b)({type:String,nonNullable:!0,json:{read:{source:"activeRangeName"},write:{target:"activeRangeName",isRequired:!0}}})],z.prototype,"activeRange",void 0),Object(n.a)([Object(s.b)({type:[Number],json:{write:!0}})],z.prototype,"currentRangeExtent",void 0),Object(n.a)([Object(s.b)({type:[Number],json:{write:!0}})],z.prototype,"fullRangeExtent",void 0),z=V=Object(n.a)([Object(c.a)("esri.webdoc.RangeInfo")],z);var $,Y=z;let H=$=class extends P.a{constructor(e){super(e),this.enabled=!1,this.longNames=!1,this.minimized=!1,this.pinnedLevels=!1,this.site=null,this.facility=null,this.level=null}clone(){return new $(Object(J.a)({enabled:this.enabled,longNames:this.longNames,minimized:this.minimized,pinnedLevels:this.pinnedLevels,site:this.site,facility:this.facility,level:this.level}))}};Object(n.a)([Object(s.b)({type:Boolean,json:{read:{source:"enabled"},write:{target:"enabled"}}})],H.prototype,"enabled",void 0),Object(n.a)([Object(s.b)({type:Boolean,json:{read:{source:"longNames"},write:{target:"longNames"}}})],H.prototype,"longNames",void 0),Object(n.a)([Object(s.b)({type:Boolean,json:{read:{source:"minimized"},write:{target:"minimized"}}})],H.prototype,"minimized",void 0),Object(n.a)([Object(s.b)({type:Boolean,json:{read:{source:"pinnedLevels"},write:{target:"pinnedLevels"}}})],H.prototype,"pinnedLevels",void 0),Object(n.a)([Object(s.b)({type:String,json:{read:{source:"site"},write:{target:"site"}}})],H.prototype,"site",void 0),Object(n.a)([Object(s.b)({type:String,json:{read:{source:"facility"},write:{target:"facility"}}})],H.prototype,"facility",void 0),Object(n.a)([Object(s.b)({type:String,json:{read:{source:"level"},write:{target:"level"}}})],H.prototype,"level",void 0),H=$=Object(n.a)([Object(c.a)("esri.webdoc.widgets.FloorFilter")],H);var X,K=H;const Z=new(r(93).a)({slider:"slider",picker:"picker"});let Q=X=class extends P.a{constructor(e){super(e),this.interactionMode=null,this.numStops=null,this.stopInterval=null}clone(){return new X({interactionMode:this.interactionMode,numStops:this.numStops,stopInterval:this.stopInterval})}};Object(n.a)([Object(s.b)({type:Z.apiValues,nonNullable:!0,json:{type:Z.jsonValues,default:null,read:{reader:Z.read},write:{isRequired:!0,writer:Z.write}}})],Q.prototype,"interactionMode",void 0),Object(n.a)([Object(s.b)({type:Number,json:{read:{source:"numberOfStops"},write:{target:"numberOfStops",overridePolicy(){const e=null!=this.stopInterval;return{enabled:!e,isRequired:!e}}}}})],Q.prototype,"numStops",void 0),Object(n.a)([Object(s.b)({type:Number,json:{write:{overridePolicy(){return{isRequired:null==this.numStops}}}}})],Q.prototype,"stopInterval",void 0),Q=X=Object(n.a)([Object(c.a)("esri.webdoc.widgets.Range")],Q);var ee,te=Q,re=r(121),ne=r(147),ie=r(219);let oe=ee=class extends P.a{constructor(e){super(e),this.currentTimeExtent=null,this.fullTimeExtent=null,this.loop=!1,this.numStops=null,this.numThumbs=null,this.stopDelay=null,this.stopInterval=null,this.stops=null}readCurrentTimeExtent(e){if(!e)return;const t=null!=e[0]?new Date(e[0]):null,r=null!=e[1]?new Date(e[1]):null;return new ne.a({start:t,end:r})}writeCurrentTimeExtent(e,t,r){e&&Object(re.c)(r,[e.start?e.start.getTime():null,e.end?e.end.getTime():null],t)}readFullTimeExtent(e,t){const r=t.properties;if(!r)return;const n=null!=r.endTime?new Date(r.endTime):null,i=null!=r.startTime?new Date(r.startTime):null;return new ne.a({start:i,end:n})}writeFullTimeExtent(e,t){if(!e)return;const r=t.properties=t.properties||{},n=e.end,i=e.start;n&&(r.endTime=n?n.getTime():null),i&&(r.startTime=i?i.getTime():null)}readStopInterval(e,t,r){return e?ie.a.fromJSON({value:e.interval,unit:e.units},r):null}writeStopInterval(e,t,r,n){if(!e)return;const i=e.toJSON(n);Object(re.c)(r,{interval:i.value,units:i.unit},t)}readStops(e){return e&&e.length?e.map((e=>new Date(e))):null}writeStops(e,t,r){e&&e.length&&Object(re.c)(r,e.map((e=>e.getTime())),t)}clone(){return new ee(Object(J.a)({currentTimeExtent:this.currentTimeExtent,fullTimeExtent:this.fullTimeExtent,loop:this.loop,numStops:this.numStops,numThumbs:this.numThumbs,stopDelay:this.stopDelay,stopInterval:this.stopInterval,stops:this.stops}))}};Object(n.a)([Object(s.b)({type:ne.a,json:{read:{source:"properties.currentTimeExtent"},write:{target:"properties.currentTimeExtent"}}})],oe.prototype,"currentTimeExtent",void 0),Object(n.a)([Object(l.a)("currentTimeExtent")],oe.prototype,"readCurrentTimeExtent",null),Object(n.a)([Object(u.a)("currentTimeExtent")],oe.prototype,"writeCurrentTimeExtent",null),Object(n.a)([Object(s.b)({type:ne.a,json:{read:{source:["properties.endTime","properties.startTime"]},write:{target:{"properties.endTime":{type:Number},"properties.startTime":{type:Number}}}}})],oe.prototype,"fullTimeExtent",void 0),Object(n.a)([Object(l.a)("fullTimeExtent")],oe.prototype,"readFullTimeExtent",null),Object(n.a)([Object(u.a)("fullTimeExtent")],oe.prototype,"writeFullTimeExtent",null),Object(n.a)([Object(s.b)({type:Boolean,nonNullable:!0,json:{default:!1,read:{source:"properties.loop"},write:{target:"properties.loop"}}})],oe.prototype,"loop",void 0),Object(n.a)([Object(s.b)({type:Number,json:{read:{source:"properties.numberOfStops"},write:{target:"properties.numberOfStops",overridePolicy(){var e;const t=!!this.stopInterval,r=!(null==(e=this.stops)||!e.length),n=!(t||r);return{enabled:n,isRequired:n}}}}})],oe.prototype,"numStops",void 0),Object(n.a)([Object(s.b)({type:[1,2],nonNullable:!0,json:{read:{source:"properties.thumbCount"},write:{target:"properties.thumbCount",isRequired:!0}}})],oe.prototype,"numThumbs",void 0),Object(n.a)([Object(s.b)({type:Number,nonNullable:!0,json:{read:{source:"properties.thumbMovingRate"},write:{target:"properties.thumbMovingRate",isRequired:!0}}})],oe.prototype,"stopDelay",void 0),Object(n.a)([Object(s.b)({type:ie.a,json:{read:{source:"properties.timeStopInterval"},write:{target:"properties.timeStopInterval",overridePolicy(){var e;const t=null!=this.numStops,r=!(null==(e=this.stops)||!e.length);return{enabled:!r,isRequired:!(t||r)}}}}})],oe.prototype,"stopInterval",void 0),Object(n.a)([Object(l.a)("stopInterval")],oe.prototype,"readStopInterval",null),Object(n.a)([Object(u.a)("stopInterval")],oe.prototype,"writeStopInterval",null),Object(n.a)([Object(s.b)({type:[Date],json:{read:{source:"properties.stops"},write:{target:"properties.stops",overridePolicy(){return{isRequired:null==this.numStops&&!this.stopInterval}}}}})],oe.prototype,"stops",void 0),Object(n.a)([Object(l.a)("stops")],oe.prototype,"readStops",null),Object(n.a)([Object(u.a)("stops")],oe.prototype,"writeStops",null),oe=ee=Object(n.a)([Object(c.a)("esri.webdoc.widgets.TimeSlider")],oe);var ae,se=oe;let le=ae=class extends P.a{constructor(e){super(e),this.range=null,this.timeSlider=null,this.floorFilter=null}clone(){return new ae(Object(J.a)({range:this.range,timeSlider:this.timeSlider,floorFilter:this.floorFilter}))}};Object(n.a)([Object(s.b)({type:te,json:{write:!0}})],le.prototype,"range",void 0),Object(n.a)([Object(s.b)({type:se,json:{write:!0}})],le.prototype,"timeSlider",void 0),Object(n.a)([Object(s.b)({type:K,json:{write:!0}})],le.prototype,"floorFilter",void 0),le=ae=Object(n.a)([Object(c.a)("esri.webdoc.Widgets")],le);var ce=le;const ue={width:600,height:400},de=1.5;function pe(e){return{enabled:!(null==e||!e.length)}}var he,be=r(100),me=r(234);let fe=he=class extends P.a{constructor(e){super(e),this.exactMatch=!1,this.name=null,this.type=null}clone(){return new he({exactMatch:this.exactMatch,type:this.type,name:this.name})}};Object(n.a)([Object(s.b)({type:Boolean,json:{write:!0}})],fe.prototype,"exactMatch",void 0),Object(n.a)([Object(s.b)({type:String,json:{write:!0}})],fe.prototype,"name",void 0),Object(n.a)([Object(be.a)(me.a)],fe.prototype,"type",void 0),fe=he=Object(n.a)([Object(c.a)("esri.webdoc.applicationProperties.SearchLayerField")],fe);var ge,ye=fe;let ve=ge=class extends P.a{constructor(e){super(e),this.field=null,this.id=null,this.subLayer=null}clone(){return new ge(Object(J.a)({field:this.field,id:this.id,subLayer:this.subLayer}))}};Object(n.a)([Object(s.b)({type:ye,json:{write:{isRequired:!0}}})],ve.prototype,"field",void 0),Object(n.a)([Object(s.b)({type:String,json:{write:{isRequired:!0}}})],ve.prototype,"id",void 0),Object(n.a)([Object(s.b)({type:a.a,json:{write:!0}})],ve.prototype,"subLayer",void 0),ve=ge=Object(n.a)([Object(c.a)("esri.webdoc.applicationProperties.SearchLayer")],ve);var Oe,je=ve;let we=Oe=class extends P.a{constructor(e){super(e),this.exactMatch=!1,this.name=null,this.type=null}clone(){return new Oe({exactMatch:this.exactMatch,type:this.type,name:this.name})}};Object(n.a)([Object(s.b)({type:Boolean,json:{write:!0}})],we.prototype,"exactMatch",void 0),Object(n.a)([Object(s.b)({type:String,json:{write:!0}})],we.prototype,"name",void 0),Object(n.a)([Object(be.a)(me.a)],we.prototype,"type",void 0),we=Oe=Object(n.a)([Object(c.a)("esri.webdoc.applicationProperties.SearchTableField")],we);var ke,_e=we;let Se=ke=class extends P.a{constructor(e){super(e),this.field=null,this.id=null}clone(){return new ke(Object(J.a)({field:this.field,id:this.id}))}};Object(n.a)([Object(s.b)({type:_e,json:{write:{isRequired:!0}}})],Se.prototype,"field",void 0),Object(n.a)([Object(s.b)({type:String,json:{write:{isRequired:!0}}})],Se.prototype,"id",void 0),Se=ke=Object(n.a)([Object(c.a)("esri.webdoc.applicationProperties.SearchTable")],Se);var Ie,xe=Se;const Te=y.a.ofType(je),Ee=y.a.ofType(xe);let Ae=Ie=class extends P.a{constructor(e){super(e),this.addressSearchEnabled=!0,this.enabled=!0,this.hintText=null,this.layers=new Te,this.tables=new Ee}readAddressSearchEnabled(e){return!e}writeAddressSearchEnabled(e,t,r){t[r]=!e}clone(){return new Ie(Object(J.a)({addressSearchEnabled:this.addressSearchEnabled,enabled:this.enabled,hintText:this.hintText,layers:this.layers,tables:this.tables}))}};Object(n.a)([Object(s.b)({type:Boolean,nonNullable:!0,json:{read:{source:"disablePlaceFinder"},write:{target:"disablePlaceFinder",isRequired:!0},origins:{"web-scene":{read:!1,write:!1}}}})],Ae.prototype,"addressSearchEnabled",void 0),Object(n.a)([Object(l.a)("addressSearchEnabled")],Ae.prototype,"readAddressSearchEnabled",null),Object(n.a)([Object(u.a)("addressSearchEnabled")],Ae.prototype,"writeAddressSearchEnabled",null),Object(n.a)([Object(s.b)({type:Boolean,nonNullable:!0,json:{write:!0,origins:{"web-map":{write:{isRequired:!0}},"web-scene":{default:!0,write:!0}}}})],Ae.prototype,"enabled",void 0),Object(n.a)([Object(s.b)({type:String,json:{write:!0}})],Ae.prototype,"hintText",void 0),Object(n.a)([Object(s.b)({type:Te,json:{write:{overridePolicy:pe},origins:{"web-scene":{write:{isRequired:!0}}}}})],Ae.prototype,"layers",void 0),Object(n.a)([Object(s.b)({type:Ee,json:{read:!0,write:{overridePolicy:pe},origins:{"web-scene":{read:!1,write:!1}}}})],Ae.prototype,"tables",void 0),Ae=Ie=Object(n.a)([Object(c.a)("esri.webdoc.applicationProperties.Search")],Ae);var Me,Ce=Ae;let Ne=Me=class extends P.a{constructor(e){super(e),this.search=null}clone(){return new Me(Object(J.a)({search:this.search}))}};Object(n.a)([Object(s.b)({type:Ce,json:{write:!0}})],Ne.prototype,"search",void 0),Ne=Me=Object(n.a)([Object(c.a)("esri.webdoc.applicationProperties.Viewing")],Ne);var Pe,De=Ne;let Be=Pe=class extends P.a{constructor(e){super(e),this.editing=null,this.offline=null,this.viewing=null}clone(){return new Pe(Object(J.a)({editing:this.editing,offline:this.offline,viewing:this.viewing}))}};Object(n.a)([Object(s.b)({json:{write:!0}})],Be.prototype,"editing",void 0),Object(n.a)([Object(s.b)({json:{write:!0}})],Be.prototype,"offline",void 0),Object(n.a)([Object(s.b)({type:De,json:{write:!0}})],Be.prototype,"viewing",void 0),Be=Pe=Object(n.a)([Object(c.a)("esri.webmap.ApplicationProperties")],Be);var Fe,Le=Be,Re=r(878),Ue=r(767),qe=r(95);let Ve=Fe=class extends qe.a{constructor(e){super(e),this.background=null,this.rangeInfo=null,this.spatialReference=null,this.viewpoint=null}clone(){return new Fe(Object(J.a)({background:this.background,rangeInfo:this.rangeInfo,spatialReference:this.spatialReference,viewpoint:this.viewpoint}))}};Object(n.a)([Object(s.b)({type:Ue.a})],Ve.prototype,"background",void 0),Object(n.a)([Object(s.b)({type:Y})],Ve.prototype,"rangeInfo",void 0),Object(n.a)([Object(s.b)({type:f.a})],Ve.prototype,"spatialReference",void 0),Object(n.a)([Object(s.b)({type:T.a})],Ve.prototype,"viewpoint",void 0),Ve=Fe=Object(n.a)([Object(c.a)("esri.webmap.InitialViewProperties")],Ve);var We=Ve,Ge=r(592);class Je extends Ge.a{constructor(e,t){super(e,t,"webmap")}}const ze=new Je(2,20),$e="Web Map",Ye=y.a.ofType(Re.a),He=o.a.getLogger("esri.WebMap"),Xe=new Map;Xe.set("image/jpeg","jpeg"),Xe.set("image/jpg","jpg"),Xe.set("image/png","png"),Xe.set("image/gif","gif");const Ke="ArcGIS API for JavaScript",Ze="CollectorDisabled",Qe="Collector",et="Data Editing",tt="OfflineDisabled",rt="Offline",nt="Workforce Project",it="Workforce Worker",ot="Workforce Dispatcher",at="DeveloperBasemap",st=["NatGeo_World_Map","Ocean_Basemap","USA_Topo_Maps","World_Imagery","World_Street_Map","World_Terrain_Base","World_Topo_Map","World_Hillshade","Canvas/World_Light_Gray_Base","Canvas/World_Light_Gray_Reference","Canvas/World_Dark_Gray_Base","Canvas/World_Dark_Gray_Reference","Ocean/World_Ocean_Base","Ocean/World_Ocean_Reference","Reference/World_Boundaries_and_Places","Reference/World_Reference_Overlay","Reference/World_Transportation"].map((e=>e.toLowerCase()));let lt=class extends(Object(E.a)(j.a.LoadableMixin(Object(O.b)(x.a)))){constructor(e){super(e),this.applicationProperties=null,this.bookmarks=new Ye,this.floorInfo=null,this.initialViewProperties=new We,this.portalItem=null,this.presentation=null,this.sourceVersion=null,this.widgets=null,this.authoringApp=this.authoringAppVersion=null,this._isAuthoringAppSetByUser=this._isAuthoringAppVersionSetByUser=!1}destroy(){const e=this.portalItem;this.portalItem=null,null==e||e.destroy()}initialize(){if(this.when().catch((e=>{He.error("#load()","Failed to load web map",e)})),this.resourceInfo){let t;try{t=this._validateJSON(this.resourceInfo)}catch(e){return void this.addResolvingPromise(Promise.reject(e))}this.read(t)}}set authoringApp(e){this._isAuthoringAppSetByUser=!0,this._set("authoringApp",e)}writeAuthoringApp(e,t){e&&this._isAuthoringAppSetByUser?t.authoringApp=e:t.authoringApp=Ke}set authoringAppVersion(e){this._isAuthoringAppVersionSetByUser=!0,this._set("authoringAppVersion",e)}writeAuthoringAppVersion(e,t){e&&this._isAuthoringAppVersionSetByUser?t.authoringAppVersion=e:t.authoringAppVersion=v.d}readInitialViewProperties(e,t){var r;const n=new We;t.background&&(n.background=Ue.a.fromJSON(t.background));const i=null==(r=t.initialState)?void 0:r.viewpoint;return i&&(i.rotation&&Je.parse(t.version||"","webmap").lessThan(2,20)&&"ArcGIS Pro"===t.authoringApp&&(i.rotation*=-1),n.viewpoint=T.a.fromJSON(i)),t.mapRangeInfo&&(n.rangeInfo=Y.fromJSON(t.mapRangeInfo)),t.spatialReference&&(n.spatialReference=f.a.fromJSON(t.spatialReference)),n}writeInitialViewProperties(e,t,r,n){if(!e)return;const i=e.background;i&&i.color&&(t.background=i.write(null,n)),e.viewpoint&&(t.initialState={viewpoint:e.viewpoint.write(null,n)}),e.rangeInfo&&(t.mapRangeInfo=e.rangeInfo.toJSON(n)),e.spatialReference&&(t.spatialReference=e.spatialReference.write(null,n))}writeLayers(e,t,r,n){t[r]=this._writeLayers(e,n,"operational-layers")}readSourceVersion(e,t){const[r,n]=t.version.split(".");return new Je(parseInt(r,10),parseInt(n,10))}writeSourceVersion(e,t,r){t[r]=`${ze.major}.${ze.minor}`}writeTables(e,t,r,n){const i=this._writeLayers(e,n,"tables");i.length&&(t[r]=i)}get thumbnailUrl(){return this.portalItem&&this.portalItem.thumbnailUrl||null}set thumbnailUrl(e){e?(this._override("thumbnailUrl",e),this._thumbnailFilename=this._generateCustomThumbnailFilename(e)):this._clearThumbnailOverride()}load(e){return this.addResolvingPromise(this._loadFromSource()),Promise.resolve(this)}loadAll(){return Object(k.a)(this,(e=>{e(this.ground,this.basemap,this.layers,this.tables)}))}read(e,t){t={...t,origin:"web-map"};const r=this._getAuthoringPropsState();Object(m.b)(this,e,(t=>super.read(e,t)),t),this._restoreAuthoringPropsFromState(r)}write(e,t){if("loaded"!==this.loadStatus){const e=new d.a("webmap:not-loaded","Web map must be loaded before it can be serialized");throw He.error("#toJSON()","Web map must be loaded before it can be serialized",this.loadError||this.loadStatus),e}return this._removeDanglingLayerRefs(),t={...t,origin:"web-map",restrictedWebMapWriting:!0,webmap:this},super.write(e,t)}async save(e){e=e||{},this._validateItem(),await this._updateFromPromise,await this.load(),await this._loadLayerContainers(),await this._beforeSave(),this._validateMap();const t=this.portalItem,r={origin:"web-map",messages:[],writtenProperties:[],url:t.itemUrl&&Object(p.J)(t.itemUrl),portal:t.portal||w.a.getDefault()},n=this.write(null,r);return this._validateJSONForWriting(r,e),await this._updateItemProperties(t),await this._updateItem(t,n,r),await this._updateItemThumbnail(),t}async saveAs(e,t){t=t||{};const r=this._getPortalItem(e);await this._updateFromPromise,await this.load(),await this._loadLayerContainers(),await this._beforeSave(),this._validateMap();const n={origin:"web-map",messages:[],writtenProperties:[],url:null,portal:r.portal},i=this.write(null,n);this._validateJSONForWriting(n,t),await this._updateItemPropertiesForSaveAs(r);const o=this._getThumbnailState();return await this._createItem(r,i,n,t),this._restoreThumbnailFromState(o),await this._updateItemThumbnail(),r}async updateFrom(e,t){const r=this._updateFromInternal(e,t);this._updateFromPromise=r,await r,r===this._updateFromPromise&&(this._updateFromPromise=null)}getLayerJSONFromResourceInfo(e){var t,r,n,i;const o=this.resourceInfo;return this._collectAllLayersJSON(Object(h.d)([null==o||null==(t=o.baseMap)?void 0:t.baseMapLayers,null==o?void 0:o.operationalLayers,null==(r=this.basemap)||null==(n=r.resourceInfo)||null==(i=n.data)?void 0:i.baseMapLayers])).find((t=>t.id===e.id))}_collectAllLayersJSON(e){return e.reduce(((e,t)=>(e.push(t),"GroupLayer"===t.layerType&&(e=e.concat(this._collectAllLayersJSON(t.layers||[]))),e)),[])}_writeLayers(e,t,r){return t={...t,layerContainerType:r},e.map((e=>Object(i.q)(Object(S.a)(e,"tables"===r?null:this.getLayerJSONFromResourceInfo(e),t)))).filter(Boolean).toArray()}_loadFromSource(){return this.resourceInfo?this._loadFromJSON(this.resourceInfo,{origin:"web-map"}):this.portalItem&&this.portalItem.id?this._loadFromItem(this.portalItem):Promise.resolve(null)}_loadFromItem(e){return e.load().catch((e=>{throw new d.a("webmap:load-portal-item","Failed to load portal item",{error:e})})).then((()=>{if("Web Map"!==e.type)throw new d.a("webmap:invalid-portal-item","Invalid portal item type '${type}', expected 'Web Map'",{type:e.type})})).then((()=>e.fetchData())).then((t=>(this.resourceInfo=t,this._readAndLoadFromJSON(t,{origin:"web-map",portal:e.portal||w.a.getDefault()})))).then((()=>this._computeInitialViewpoint()))}_readAndLoadFromJSON(e,t){const r=this._validateJSON(e);return this.read(r,t),this._loadFromJSON(r,t)}_validateJSON(e){const t=Je.parse(e.version||"","webmap");return ze.validate(t),e.version=`${t.major}.${t.minor}`,e}_loadFromJSON(e,t){const n={context:{...t,layerContainerType:"operational-layers"}};return this.portalItem&&(n.context.portal=this.portalItem.portal||w.a.getDefault()),r.e(45).then(r.bind(null,797)).then((({populateOperationalLayers:t})=>{const r=[],i=e.operationalLayers;i&&i.length&&r.push(t(this.layers,i,n));const o={...n,context:{...n.context,layerContainerType:"tables"},defaultLayerType:"ArcGISFeatureLayer"},a=e.tables;return a&&a.length&&r.push(t(this.tables,a,o)),Object(b.j)(r).then((()=>{}))}))}async _computeInitialViewpoint(){var e,t;let r=this.initialViewProperties;if(null==(e=r)||null==(t=e.viewpoint)?void 0:t.targetGeometry)return;const n=await this._getExtentFromItem();n&&(r=r?r.clone():new We,r.viewpoint=new T.a,r.viewpoint.targetGeometry=n,this.initialViewProperties=r)}async _getExtentFromItem(){var e,t;const n=null==(e=this.initialViewProperties)?void 0:e.spatialReference,i=null==(t=this.portalItem)?void 0:t.extent;return n&&i?n.isWGS84?i.clone():n.isWebMercator?Object(g.b)(i):(await r.e(29).then(r.bind(null,1077))).create(this.portalItem).then((e=>{const t=new G.a;return t.geometries=[i],t.outSpatialReference=n,e.project(t)})).then((e=>e[0])).catch((e=>(He.error("Error projecting item's extent:",e),null))):null}_removeDanglingLayerRefs(){const e=this.applicationProperties,t=e&&e.viewing&&e.viewing.search,r=e=>!!this.allLayers.find((t=>t.id===e));t&&t.layers&&(t.layers=t.layers.filter((e=>r(e.id)))),t&&t.tables&&(t.tables=t.tables.filter((e=>!!this.tables.find((t=>t.id===e.id)))));const n=e&&e.editing&&e.editing.locationTracking;n&&n.info&&!r(n.info.layerId)&&(e.editing=null);const i=this.presentation&&this.presentation.slides;i&&i.forEach((e=>{e.visibleLayers&&(e.visibleLayers=e.visibleLayers.filter((e=>r(e.id))))}))}_validateMap(){if(!this.basemap||!this.basemap.baseLayers.length)throw new d.a("webmap:save","Map does not have a valid basemap with a base layer.")}_validateItem(){if(!this.portalItem)throw He.error("save: requires the portalItem property to be set"),new d.a("webmap:portal-item-not-set","Portal item to save to has not been set on the WebMap");this._validateItemType(this.portalItem)}_validateItemType(e){if(e.type!==$e)throw new d.a("webmap:portal-item-wrong-type",`Portal item needs to have type "${$e}"`)}_loadLayerContainers(){const e=[];return this.basemap&&e.push(this.basemap.load()),this.ground&&e.push(this.ground.load()),Object(b.j)(e).then((()=>{}))}async _beforeSave(){const e=[];for(const t of this.allLayers)if("beforeSave"in t&&"function"==typeof t.beforeSave){const r=t.beforeSave();r&&e.push(r)}await Object(b.j)(e)}_loadAllLayers(){const e=this._getAllLayersAndTables().map((e=>e.load()));return Object(b.j)(e).then((()=>{}))}_getAllLayersAndTables(){return this.allLayers.concat(this.allTables)}_validateJSONForWriting(e,t){let r=e.messages.filter((e=>"error"===e.type)).map((e=>new d.a(e.name,e.message,e.details)));if(t.ignoreUnsupported&&(r=r.filter((e=>"layer:unsupported"!==e.name&&"symbol:unsupported"!==e.name&&"symbol-layer:unsupported"!==e.name&&"property:unsupported"!==e.name&&"url:unsupported"!==e.name))),r.length>0)throw new d.a("webmap:save","Failed to save webmap due to unsupported or invalid content. See 'details.errors' for more detailed information",{errors:r})}async _updateItemProperties(e){e.extent=await this._getWGS84Extent(this.initialViewProperties.viewpoint.targetGeometry),await this._updateTypeKeywords(e)}async _updateItemPropertiesForSaveAs(e){Object(N.c)(e,Ze),Object(N.c)(e,tt),Object(N.c)(e,nt),Object(N.c)(e,it),Object(N.c)(e,ot),Object(N.c)(e,"Offline Map Areas"),Object(N.c)(e,"FieldMapsDisabled"),await this._updateItemProperties(e)}async _getWGS84Extent(e){const t=e.clone().normalize();let r;if(t.length>1)for(const n of t)r?n.width>r.width&&(r=n):r=n;else r=t[0];return this._projectToWGS84(r)}async _projectToWGS84(e){const t=e.spatialReference;if(t.isWGS84)return e.clone();if(t.isWebMercator)return Object(g.e)(e);const n=await r.e(29).then(r.bind(null,1077)),i=await n.create(this.portalItem),o=new G.a;return o.geometries=[e],o.outSpatialReference=f.a.WGS84,(await i.project(o))[0]}async _updateTypeKeywords(e){Object(N.a)(e,Ke),await this._loadAllLayers(),this._evalCollectorKeyword(e),this._evalDataEditingKeyword(e),this._evalOfflineKeyword(e),this._evalDeveloperBasemapKeyword(e),e.typeKeywords&&(e.typeKeywords=e.typeKeywords.filter(((e,t,r)=>r.indexOf(e)===t)))}_evalCollectorKeyword(e){Object(N.b)(e,Ze)||Object(N.b)(e,nt)||Object(N.b)(e,it)||Object(N.b)(e,ot)||!this._hasEditableFeatureLayer()?Object(N.c)(e,Qe):Object(N.a)(e,Qe)}_evalDataEditingKeyword(e){this._hasEditableFeatureLayer()?Object(N.a)(e,et):Object(N.c)(e,et)}_evalOfflineKeyword(e){!Object(N.b)(e,tt)&&this._isOfflineCapableMap()?Object(N.a)(e,rt):Object(N.c)(e,rt)}_evalDeveloperBasemapKeyword(e){Object(I.f)(this.basemap)?Object(N.a)(e,at):Object(N.c)(e,at)}_hasEditableFeatureLayer(){return this._getAllLayersAndTables().some((e=>e.loaded&&this._isFeatureServiceLayer(e)&&e.capabilities.operations.supportsEditing&&e.editingEnabled))}_isFeatureServiceLayer(e){return!("feature"!==e.type||!e.source||"feature-layer"!==e.source.type)}_isOfflineCapableMap(){return this._getAllLayersAndTables().filter((e=>"group"!==e.type)).every((e=>e.loaded&&this._isOfflineCapableLayer(e)))}_isOfflineCapableLayer(e){return this._isFeatureServiceLayer(e)&&e.capabilities.operations.supportsSync||("tile"===e.type||"vector-tile"===e.type)&&(e.capabilities.operations.supportsExportTiles||this._isExportableAGOLTileLayer(e)||Object(I.g)(e))&&e.spatialReference.equals(this.initialViewProperties.spatialReference)}_isExportableAGOLTileLayer(e){return"tile"===e.type&&Object(C.d)(e.url)&&st.some((t=>e.url.toLowerCase().indexOf("/"+t+"/")>-1))}async _updateItem(e,t,r){await e.update({data:t}),this._syncUpInstanceWithItem(e,t,r)}async _createItem(e,t,r,n){const i=this.portalItem,o=!!(i&&i.id&&i.portal.user),a=e.portal;if(await a._signIn(),!await this._canCopyItem(i,o,a))throw new d.a("webmap:save-as-copy-not-allowed","Owner of this map does not allow others to save a copy");await a.user.addItem({item:e,folder:n.folder,data:t}),this.portalItem=e,this._syncUpInstanceWithItem(e,t,r)}async _canCopyItem(e,t,r){return!(Object(i.k)(e)&&e.id&&e.typeKeywords&&e.typeKeywords.indexOf("useOnly")>-1)||e.portal.portalHostname===r.portalHostname&&(t||await e.reload(),"admin"===e.itemControl||"update"===e.itemControl)}_syncUpInstanceWithItem(e,t,r){E.b.prototype.read.call(this,{version:t.version,authoringApp:t.authoringApp,authoringAppVersion:t.authoringAppVersion},{origin:"web-map",ignoreDefaults:!0,url:e.itemUrl&&Object(p.J)(e.itemUrl)}),Object(M.a)(r),this.resourceInfo=t}async _updateItemThumbnail(){this.thumbnailUrl&&this._isOverridden("thumbnailUrl")&&(await this.portalItem.updateThumbnail({thumbnail:this.thumbnailUrl,filename:this._thumbnailFilename}),this._clearThumbnailOverride())}_getPortalItem(e){let t=_.default.from(e);return t.id&&(t=t.clone(),t.id=null),t.type||(t.type=$e),t.portal||(t.portal=w.a.getDefault()),this._validateItemType(t),t}async _updateFromInternal(e,t){t=t||{},await Object(A.l)(e,"ready"),this._updateInitialViewProperties(e,t),await this._updateThumbnailUrl(e,t)}_updateInitialViewProperties(e,t){var r;if(t.backgroundExcluded||(this.initialViewProperties.background=null==(r=e.background)?void 0:r.clone()),this.initialViewProperties.spatialReference=e.spatialReference.clone(),t.viewpointExcluded||(this.initialViewProperties.viewpoint=new T.a({rotation:e.rotation,scale:t.scalePreserved?e.scale:null,targetGeometry:this._getViewExtent(e)})),!t.widgetsExcluded)for(const n of e.persistableViewModels)n.updateWebDocument(this)}_getViewExtent(e){const t=e.center.clone().normalize(),r=e.extent.clone(),n=r.width/2;return r.xmin=t.x-n,r.xmax=t.x+n,r}async _updateThumbnailUrl(e,t){if(t.thumbnailExcluded)return;const r=function(e,t){t=t||ue;let{width:r,height:n}=t;const i=r/n;return i<de?n=r/de:i>de&&(r=n*de),r>e.width&&(n*=e.width/r,r=e.width),n>e.height&&(r*=e.height/n,n=e.height),{width:Math.round(r),height:Math.round(n)}}(e,t.thumbnailSize),n=await e.takeScreenshot({format:"png",width:r.width,height:r.height});this._setAutoGeneratedThumbnail(n.dataUrl)}_setAutoGeneratedThumbnail(e){this.thumbnailUrl=e,this._thumbnailFilename=null}_clearThumbnailOverride(){this._clearOverride("thumbnailUrl"),this.clear("thumbnailUrl","user"),this._thumbnailFilename=null}_generateCustomThumbnailFilename(e){if(Object(p.u)(e)){const t=Object(p.i)(e),r=t&&t.mediaType,n=r&&Xe.get(r.toLowerCase())||null,i=`thumbnail${Date.now()}`;return n?`${i}.${n}`:i}return null}_getThumbnailState(){let e=this.thumbnailUrl;return e&&(e=this._isOverridden("thumbnailUrl")?e:Object(p.d)(e,"w","8192")),{thumbnailUrl:e,filename:this._thumbnailFilename}}_restoreThumbnailFromState(e){this.thumbnailUrl=e.thumbnailUrl,this._thumbnailFilename=e.filename}_getAuthoringPropsState(){return{authoringApp:this.authoringApp,authoringAppVersion:this.authoringAppVersion,isAuthoringAppSetByUser:this._isAuthoringAppSetByUser,isAuthoringAppVersionSetByUser:this._isAuthoringAppVersionSetByUser}}_restoreAuthoringPropsFromState(e){e.isAuthoringAppSetByUser?this.authoringApp=e.authoringApp:this._isAuthoringAppSetByUser=!1,e.isAuthoringAppVersionSetByUser?this.authoringAppVersion=e.authoringAppVersion:this._isAuthoringAppVersionSetByUser=!1}static fromJSON(e){const t=e;if(!t)throw new d.a("webmap:empty-resource","Expected a JSON resource but got nothing");return new this({resourceInfo:t})}};lt.VERSION=ze,Object(n.a)([Object(s.b)({type:Le,json:{write:!0}})],lt.prototype,"applicationProperties",void 0),Object(n.a)([Object(s.b)({type:String,json:{write:{allowNull:!0,ignoreOrigin:!0}}})],lt.prototype,"authoringApp",null),Object(n.a)([Object(u.a)("authoringApp")],lt.prototype,"writeAuthoringApp",null),Object(n.a)([Object(s.b)({type:String,json:{write:{allowNull:!0,ignoreOrigin:!0}}})],lt.prototype,"authoringAppVersion",null),Object(n.a)([Object(u.a)("authoringAppVersion")],lt.prototype,"writeAuthoringAppVersion",null),Object(n.a)([Object(s.b)({json:{read:{source:"baseMap"},write:{target:"baseMap"}}})],lt.prototype,"basemap",void 0),Object(n.a)([Object(s.b)({type:Ye,json:{write:{overridePolicy:e=>({enabled:!!(e&&e.length>0),ignoreOrigin:!0})}}})],lt.prototype,"bookmarks",void 0),Object(n.a)([Object(s.b)({type:W,json:{read:{source:"mapFloorInfo"},write:{target:"mapFloorInfo"}}})],lt.prototype,"floorInfo",void 0),Object(n.a)([Object(s.b)({type:We,nonNullable:!0,json:{read:{source:["background","initialState.viewpoint","mapRangeInfo","spatialReference"]},write:{ignoreOrigin:!0,target:{background:{type:Ue.a},"initialState.viewpoint":{type:T.a},mapRangeInfo:{type:Y},spatialReference:{type:f.a}}}}})],lt.prototype,"initialViewProperties",void 0),Object(n.a)([Object(l.a)("initialViewProperties")],lt.prototype,"readInitialViewProperties",null),Object(n.a)([Object(u.a)("initialViewProperties")],lt.prototype,"writeInitialViewProperties",null),Object(n.a)([Object(s.b)({json:{read:!1,write:{target:"operationalLayers",ignoreOrigin:!0}}})],lt.prototype,"layers",void 0),Object(n.a)([Object(u.a)("layers")],lt.prototype,"writeLayers",null),Object(n.a)([Object(s.b)({type:_.default})],lt.prototype,"portalItem",void 0),Object(n.a)([Object(s.b)({json:{write:!0}})],lt.prototype,"presentation",void 0),Object(n.a)([Object(s.b)()],lt.prototype,"resourceInfo",void 0),Object(n.a)([Object(s.b)({readOnly:!0,type:Je,json:{read:{source:"version"},write:{allowNull:!0,ignoreOrigin:!0,target:"version",isRequired:!0}}})],lt.prototype,"sourceVersion",void 0),Object(n.a)([Object(l.a)("sourceVersion")],lt.prototype,"readSourceVersion",null),Object(n.a)([Object(u.a)("sourceVersion")],lt.prototype,"writeSourceVersion",null),Object(n.a)([Object(s.b)({json:{read:!1,write:{ignoreOrigin:!0}}})],lt.prototype,"tables",void 0),Object(n.a)([Object(u.a)("tables")],lt.prototype,"writeTables",null),Object(n.a)([Object(s.b)()],lt.prototype,"thumbnailUrl",null),Object(n.a)([Object(s.b)({type:ce,json:{write:!0}})],lt.prototype,"widgets",void 0),lt=Object(n.a)([Object(c.a)("esri.WebMap")],lt);var ct=lt;t.a=ct},109:function(e,t,r){"use strict";r.d(t,"a",(function(){return d})),r.d(t,"b",(function(){return h})),r.d(t,"c",(function(){return S})),r.d(t,"d",(function(){return p})),r.d(t,"e",(function(){return l})),r.d(t,"f",(function(){return O})),r.d(t,"g",(function(){return v})),r.d(t,"h",(function(){return j})),r.d(t,"i",(function(){return c})),r.d(t,"j",(function(){return a})),r.d(t,"k",(function(){return m})),r.d(t,"l",(function(){return w})),r.d(t,"m",(function(){return P})),r.d(t,"n",(function(){return b})),r.d(t,"o",(function(){return o})),r.d(t,"p",(function(){return T})),r.d(t,"q",(function(){return y})),r.d(t,"r",(function(){return f})),r.d(t,"s",(function(){return g})),r.d(t,"t",(function(){return _})),r.d(t,"u",(function(){return E})),r.d(t,"v",(function(){return s})),r.d(t,"w",(function(){return k})),r.d(t,"x",(function(){return D})),r.d(t,"y",(function(){return N})),r.d(t,"z",(function(){return C}));var n=r(102),i=r(181);function o(e){const t=e[0],r=e[1],n=e[2];return Math.sqrt(t*t+r*r+n*n)}function a(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}function s(e,t,r,n){return e[0]=t,e[1]=r,e[2]=n,e}function l(e,t,r){return e[0]=t[0]+r[0],e[1]=t[1]+r[1],e[2]=t[2]+r[2],e}function c(e,t,r){return e[0]=t[0]-r[0],e[1]=t[1]-r[1],e[2]=t[2]-r[2],e}function u(e,t,r){return e[0]=t[0]*r[0],e[1]=t[1]*r[1],e[2]=t[2]*r[2],e}function d(e,t,r){return e[0]=t[0]/r[0],e[1]=t[1]/r[1],e[2]=t[2]/r[2],e}function p(e,t,r){return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e}function h(e,t,r,n){return e[0]=t[0]+r[0]*n,e[1]=t[1]+r[1]*n,e[2]=t[2]+r[2]*n,e}function b(e,t){const r=t[0]-e[0],n=t[1]-e[1],i=t[2]-e[2];return Math.sqrt(r*r+n*n+i*i)}function m(e,t){const r=t[0]-e[0],n=t[1]-e[1],i=t[2]-e[2];return r*r+n*n+i*i}function f(e){const t=e[0],r=e[1],n=e[2];return t*t+r*r+n*n}function g(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e}function y(e,t){const r=t[0],n=t[1],i=t[2];let o=r*r+n*n+i*i;return o>0&&(o=1/Math.sqrt(o),e[0]=t[0]*o,e[1]=t[1]*o,e[2]=t[2]*o),e}function v(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function O(e,t,r){const n=t[0],i=t[1],o=t[2],a=r[0],s=r[1],l=r[2];return e[0]=i*l-o*s,e[1]=o*a-n*l,e[2]=n*s-i*a,e}function j(e,t,r,n){const i=t[0],o=t[1],a=t[2];return e[0]=i+n*(r[0]-i),e[1]=o+n*(r[1]-o),e[2]=a+n*(r[2]-a),e}function w(e,t,r){const n=t[0],i=t[1],o=t[2];return e[0]=r[0]*n+r[4]*i+r[8]*o+r[12],e[1]=r[1]*n+r[5]*i+r[9]*o+r[13],e[2]=r[2]*n+r[6]*i+r[10]*o+r[14],e}function k(e,t,r){const n=t[0],i=t[1],o=t[2];return e[0]=n*r[0]+i*r[3]+o*r[6],e[1]=n*r[1]+i*r[4]+o*r[7],e[2]=n*r[2]+i*r[5]+o*r[8],e}function _(e,t,r){const n=r[0],i=r[1],o=r[2],a=r[3],s=t[0],l=t[1],c=t[2];let u=i*c-o*l,d=o*s-n*c,p=n*l-i*s,h=i*p-o*d,b=o*u-n*p,m=n*d-i*u;const f=2*a;return u*=f,d*=f,p*=f,h*=2,b*=2,m*=2,e[0]=s+u+h,e[1]=l+d+b,e[2]=c+p+m,e}function S(e,t,r,n){const i=[],o=[];return i[0]=t[0]-r[0],i[1]=t[1]-r[1],i[2]=t[2]-r[2],o[0]=i[0]*Math.cos(n)-i[1]*Math.sin(n),o[1]=i[0]*Math.sin(n)+i[1]*Math.cos(n),o[2]=i[2],e[0]=o[0]+r[0],e[1]=o[1]+r[1],e[2]=o[2]+r[2],e}const I=Object(n.e)(),x=Object(n.e)();function T(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]}const E=c,A=u,M=d,C=b,N=m,P=o,D=f;Object.freeze({__proto__:null,length:o,copy:a,set:s,add:l,subtract:c,multiply:u,divide:d,ceil:function(e,t){return e[0]=Math.ceil(t[0]),e[1]=Math.ceil(t[1]),e[2]=Math.ceil(t[2]),e},floor:function(e,t){return e[0]=Math.floor(t[0]),e[1]=Math.floor(t[1]),e[2]=Math.floor(t[2]),e},min:function(e,t,r){return e[0]=Math.min(t[0],r[0]),e[1]=Math.min(t[1],r[1]),e[2]=Math.min(t[2],r[2]),e},max:function(e,t,r){return e[0]=Math.max(t[0],r[0]),e[1]=Math.max(t[1],r[1]),e[2]=Math.max(t[2],r[2]),e},round:function(e,t){return e[0]=Math.round(t[0]),e[1]=Math.round(t[1]),e[2]=Math.round(t[2]),e},scale:p,scaleAndAdd:h,distance:b,squaredDistance:m,squaredLength:f,negate:g,inverse:function(e,t){return e[0]=1/t[0],e[1]=1/t[1],e[2]=1/t[2],e},normalize:y,dot:v,cross:O,lerp:j,hermite:function(e,t,r,n,i,o){const a=o*o,s=a*(2*o-3)+1,l=a*(o-2)+o,c=a*(o-1),u=a*(3-2*o);return e[0]=t[0]*s+r[0]*l+n[0]*c+i[0]*u,e[1]=t[1]*s+r[1]*l+n[1]*c+i[1]*u,e[2]=t[2]*s+r[2]*l+n[2]*c+i[2]*u,e},bezier:function(e,t,r,n,i,o){const a=1-o,s=a*a,l=o*o,c=s*a,u=3*o*s,d=3*l*a,p=l*o;return e[0]=t[0]*c+r[0]*u+n[0]*d+i[0]*p,e[1]=t[1]*c+r[1]*u+n[1]*d+i[1]*p,e[2]=t[2]*c+r[2]*u+n[2]*d+i[2]*p,e},random:function(e,t){t=t||1;const r=2*Object(i.b)()*Math.PI,n=2*Object(i.b)()-1,o=Math.sqrt(1-n*n)*t;return e[0]=Math.cos(r)*o,e[1]=Math.sin(r)*o,e[2]=n*t,e},transformMat4:w,transformMat3:k,transformQuat:_,rotateX:function(e,t,r,n){const i=[],o=[];return i[0]=t[0]-r[0],i[1]=t[1]-r[1],i[2]=t[2]-r[2],o[0]=i[0],o[1]=i[1]*Math.cos(n)-i[2]*Math.sin(n),o[2]=i[1]*Math.sin(n)+i[2]*Math.cos(n),e[0]=o[0]+r[0],e[1]=o[1]+r[1],e[2]=o[2]+r[2],e},rotateY:function(e,t,r,n){const i=[],o=[];return i[0]=t[0]-r[0],i[1]=t[1]-r[1],i[2]=t[2]-r[2],o[0]=i[2]*Math.sin(n)+i[0]*Math.cos(n),o[1]=i[1],o[2]=i[2]*Math.cos(n)-i[0]*Math.sin(n),e[0]=o[0]+r[0],e[1]=o[1]+r[1],e[2]=o[2]+r[2],e},rotateZ:S,angle:function(e,t){a(I,e),a(x,t),y(I,I),y(x,x);const r=v(I,x);return r>1?0:r<-1?Math.PI:Math.acos(r)},str:function(e){return"vec3("+e[0]+", "+e[1]+", "+e[2]+")"},exactEquals:T,equals:function(e,t){const r=e[0],n=e[1],o=e[2],a=t[0],s=t[1],l=t[2];return Math.abs(r-a)<=i.a*Math.max(1,Math.abs(r),Math.abs(a))&&Math.abs(n-s)<=i.a*Math.max(1,Math.abs(n),Math.abs(s))&&Math.abs(o-l)<=i.a*Math.max(1,Math.abs(o),Math.abs(l))},sub:E,mul:A,div:M,dist:C,sqrDist:N,len:P,sqrLen:D})},121:function(e,t,r){"use strict";r.d(t,"a",(function(){return i})),r.d(t,"b",(function(){return o})),r.d(t,"c",(function(){return a}));var n=r(90);function i(e,t,r=!1){return l(e,t,r)}function o(e,t){if(null!=t)return t[e]||s(e.split("."),!1,t)}function a(e,t,r){const n=e.split("."),i=n.pop(),o=s(n,!0,r);o&&i&&(o[i]=t)}function s(e,t,r){let n=r;for(const i of e){if(null==n)return;if(!(i in n)){if(!t)return;n[i]={}}n=n[i]}return n}function l(e,t,r){return t?Object.keys(t).reduce((function(e,i){let o=e[i],a=t[i];return o===a?e:void 0===o?(e[i]=Object(n.a)(a),e):(Array.isArray(a)||Array.isArray(e)?(o=o?Array.isArray(o)?e[i]=o.concat():e[i]=[o]:e[i]=[],a&&(Array.isArray(a)||(a=[a]),r?a.forEach((e=>{-1===o.indexOf(e)&&o.push(e)})):e[i]=a.concat())):a&&"object"==typeof a?e[i]=l(o,a,r):e.hasOwnProperty(i)&&!t.hasOwnProperty(i)||(e[i]=a),e)}),e||{}):e}},1239:function(e,t,r){"use strict";r.r(t),r.d(t,"Bookmarks",(function(){return qe}));var n=r(1),i=r(81),o=(r(79),r(80)),a=r(84),s=r(142),l=r(114),c=r(285),u=r(83),d=(r(82),r(85),r(86),r(162)),p=r(113),h=r(106),b=r(804),m=(r(112),r(160)),f=r(298),g=r(126),y=r(151),v=r(951),O=(r(87),r(95));let j=class extends O.a{constructor(e){super(e)}get editedBookmark(){const{bookmark:e}=this;return e?this._get("editedBookmark")||e.clone():null}get state(){return this._get("state")}set state(e){this.validationState=void 0,this.loading=void 0,this._set("state",e)}};Object(i.a)([Object(a.b)()],j.prototype,"bookmark",void 0),Object(i.a)([Object(a.b)({readOnly:!0})],j.prototype,"editedBookmark",null),Object(i.a)([Object(a.b)()],j.prototype,"state",null),Object(i.a)([Object(a.b)()],j.prototype,"validationState",void 0),Object(i.a)([Object(a.b)()],j.prototype,"loading",void 0),j=Object(i.a)([Object(u.a)("esri.widgets.Bookmarks.UserState")],j);var w=j,k=r(91),_=r(128),S=r(105),I=r(556),x=r(878),T=r(498);const E="esri.widgets.Bookmarks.BookmarksViewModel",A=o.a.getLogger(E),M=S.a.ofType(x.a),C={width:128,height:128,format:"png"},N={takeScreenshot:!0,captureViewpoint:!0,captureRotation:!0,captureScale:!0};let P=class extends(Object(T.a)(_.a.EventedAccessor)){constructor(e){super(e),this.activeBookmark=null}destroy(){this.view=null,this._set("activeBookmark",null)}set bookmarks(e){void 0!==e?this._override("bookmarks",e):this._clearOverride("bookmarks")}get bookmarks(){return this.get("view.map.bookmarks")||new M}set defaultCreateOptions(e){this._set("defaultCreateOptions",{...N,...e})}get defaultCreateOptions(){return N}set defaultEditOptions(e){this._set("defaultEditOptions",{...N,...e})}get defaultEditOptions(){return N}get state(){const e=this.get("view");return e&&!e.ready?"loading":"ready"}get view(){return this._get("view")}set view(e){e&&"2d"!==e.type&&A.error(new k.a("view:invalid-view","SceneView is not supported",{view:e})),this._set("view",e)}async createBookmark(e){const{view:t,defaultCreateOptions:r}=this;if(!t){const e=new k.a("create-bookmark:invalid-view","Cannot create a bookmark without a view.");return A.error(e),Promise.reject(e)}const{takeScreenshot:n,screenshotSettings:i,captureExtent:o,captureViewpoint:a,captureRotation:s,captureScale:l}={...r,...e},c=n?await this._createThumbnail(i):void 0;return new x.a({...c&&{thumbnail:c},...(a||o)&&{viewpoint:this._createViewpoint({view:t,captureScale:l,captureRotation:s})}})}async editBookmark(e,t){const{view:r,defaultEditOptions:n}=this;if(!r){const e=new k.a("edit-bookmark:invalid-view","Cannot edit a bookmark without a view.");return A.error(e),Promise.reject(e)}const{takeScreenshot:i,screenshotSettings:o,captureExtent:a,captureViewpoint:s,captureRotation:l,captureScale:c}={...n,...t},u=i?await this._createThumbnail(o):void 0;return u&&(e.thumbnail=u),(s||a)&&(e.viewpoint=this._createViewpoint({view:r,captureScale:c,captureRotation:l})),this.emit("bookmark-edit",{bookmark:e}),e}goTo(e){const{view:t}=this;if(!t){const e=new k.a("go-to:invalid-view","Cannot go to a bookmark without a view");return A.error(e),Promise.reject(e)}const r=null==e?void 0:e.viewpoint;if(!r){const t=new k.a("go-to:invalid-bookmark","Cannot go to a bookmark that does not contain a 'viewpoint'.",{bookmark:e});return A.error(t),Promise.reject(t)}this._set("activeBookmark",e);const n={target:r},i=this.callGoTo(n);return this.emit("select-bookmark",{bookmark:e}),this.emit("bookmark-select",{bookmark:e}),i.catch((()=>{})).then((()=>this._set("activeBookmark",null))),i}async _createThumbnail(e){const t=await this.view.takeScreenshot({...C,...e});return new b.a({url:t.dataUrl})}_createViewpoint({view:e,captureRotation:t,captureScale:r}){var n,i;const o=null==(n=e.viewpoint)?void 0:n.clone();return new I.a({targetGeometry:null==(i=e.extent)?void 0:i.clone(),rotation:t&&(null==o?void 0:o.rotation)||0,scale:r&&(null==o?void 0:o.scale)||0})}};Object(i.a)([Object(a.b)({readOnly:!0})],P.prototype,"activeBookmark",void 0),Object(i.a)([Object(a.b)({type:M})],P.prototype,"bookmarks",null),Object(i.a)([Object(a.b)()],P.prototype,"defaultCreateOptions",null),Object(i.a)([Object(a.b)()],P.prototype,"defaultEditOptions",null),Object(i.a)([Object(a.b)({readOnly:!0})],P.prototype,"state",null),Object(i.a)([Object(a.b)({value:null})],P.prototype,"view",null),P=Object(i.a)([Object(u.a)(E)],P);var D=P,B=r(749),F=r(796);const L="data-bookmark-uid",R="esri-bookmarks esri-widget--panel",U="esri-bookmarks__loader-container",q="esri-bookmarks__loader",V="esri-bookmarks__list",W="esri-bookmarks__list--sortable",G="esri-bookmarks__bookmark",J="esri-bookmarks__bookmark-button",z="esri-bookmarks__bookmark-image-container",$="esri-bookmarks__bookmark-edit-button",Y="esri-bookmarks_bookmark-drag-handle",H="esri-bookmarks_bookmark-drag-handle-icon",X="esri-bookmarks__bookmark-icon",K="esri-bookmarks__image",Z="esri-bookmarks__bookmark-name",Q="esri-bookmarks__bookmark--active",ee="esri-widget__content--empty",te="esri-bookmarks__no-bookmarks-heading",re="esri-widget__no-bookmark-icon",ne="esri-bookmarks__no-bookmarks-description",ie="esri-bookmarks__adding-bookmark",oe="esri-bookmarks__add-bookmark",ae="esri-bookmarks__add-bookmark-button",se="esri-bookmarks__add-bookmark-icon",le="esri-bookmarks__authoring-card",ce="esri-bookmarks__authoring-container",ue="esri-bookmarks__authoring-form",de="esri-bookmarks__authoring-label",pe="esri-bookmarks__authoring-actions",he="esri-bookmarks__authoring-input--invalid",be="esri-bookmarks__authoring-delete-button",me="esri-bookmarks__authoring-cancel-button",fe="esri-widget",ge="esri-widget--disabled",ye="esri-button",ve="esri-button--tertiary",Oe="esri-input",je="esri-icon-handle-vertical",we="esri-icon-plus",ke="esri-icon-edit",_e="esri-icon-handle-horizontal",Se="esri-icon-refresh",Ie="esri-icon-link",xe="esri-icon-erase",Te="esri-icon-bookmark",Ee="esri-widget__heading",Ae="esri-icon-loading-indicator",Me="esri-rotating",Ce={addBookmark:!0,thumbnail:!0},Ne=/^https:\/\/.*/i,Pe="esri.widgets.Bookmarks",De=o.a.getLogger(Pe);let Be=class extends y.a{constructor(e,t){super(e,t),this._handles=new p.a,this._addInputNode=null,this._editInputNode=null,this._urlEditInputNode=null,this._addBookmarkButtonNode=null,this._focusAddBookmarkButton=!1,this._focusEditInputBox=!1,this._focusAddInputBox=!1,this._focusUrlEditInputBox=!1,this._sortable=null,this._sortableNode=null,this._focusSortUid=null,this._selectedSortUid=null,this._sortableSavedItems=null,this._userState=null,this.defaultCreateOptions=null,this.defaultEditOptions=null,this.bookmarks=null,this.disabled=!1,this.editingEnabled=!1,this.goToOverride=null,this.iconClass=Te,this.label=void 0,this.messages=null,this.messagesCommon=null,this.messagesUnits=null,this.view=null,this.viewModel=new D,this.visibleElements={...Ce}}initialize(){this.own([Object(h.a)(this,"viewModel.bookmarks",(()=>this._bookmarksInitialized())),Object(h.a)(this,"editingEnabled",(()=>this._toggleSorting()))])}destroy(){this._destroySortable(),this._handles.destroy(),this._handles=null,this._editMenu.destroy()}get _editMenuItems(){var e,t;const{messages:r,_userState:n}=this,i=null==n||null==(e=n.editedBookmark)||null==(t=e.thumbnail)?void 0:t.url;return[new B.a({label:null==r?void 0:r.menu.refreshThumbnail,iconClass:Se,clickFunction:()=>this._refreshThumbnail()}),new B.a({label:Ne.test(i)?null==r?void 0:r.menu.editImageUrl:null==r?void 0:r.menu.useImageUrl,iconClass:Ie,clickFunction:()=>this._startUseImageUrl()}),i?new B.a({label:null==r?void 0:r.menu.removeThumbnail,iconClass:xe,clickFunction:()=>this._removeThumbnail()}):null].filter(Boolean)}get _editMenu(){const{_editMenuItems:e,messages:t}=this,r=this._get("_editMenu");r&&r.destroy();const n=new F.a({iconClass:_e,label:null==t?void 0:t.menu.label});return n.items=e,n}get bookmarkCreationOptions(){return Object(c.c)(De,"bookmarkCreationOptions",{replacement:"defaultCreateOptions",version:"4.18"}),this.viewModel.defaultCreateOptions}set bookmarkCreationOptions(e){void 0!==e.captureExtent&&Object(c.c)(De,"bookmarkCreationOptions.captureExtent",{replacement:"defaultCreateOptions.captureViewpoint",version:"4.17"}),Object(c.c)(De,"bookmarkCreationOptions",{replacement:"defaultCreateOptions",version:"4.18"}),this.viewModel.defaultCreateOptions=e}castVisibleElements(e){return{...Ce,...e}}endAddBookmark(){this._userState=null}goTo(e){return this.viewModel.goTo(e)}render(){const{state:e}=this.viewModel,t="loading"===e?this.renderLoading():this.renderBookmarks();return Object(g.a)("div",{class:this.classes(R,fe,{[ge]:this.disabled})},t)}startAddBookmark(){this._userState=new w({state:"add"}),this._focusAddInputBox=!0,this.scheduleRender()}renderLoading(){return Object(g.a)("div",{class:U,key:"loader"},Object(g.a)("div",{class:q}))}renderNoBookmarksContainer(){const{messages:e}=this;return Object(g.a)("div",{class:ee,key:"no-bookmarks"},Object(g.a)("span",{"aria-hidden":"true",class:this.classes(re,Te)}),Object(g.a)("h1",{class:this.classes(Ee,te)},null==e?void 0:e.noBookmarksHeading),Object(g.a)("p",{class:ne},null==e?void 0:e.noBookmarksDescription))}renderAddBookmarkLoading(){var e;return Object(g.a)("div",{key:"adding-bookmark",class:ie},Object(g.a)("span",{"aria-hidden":"true",class:this.classes(Ae,Me)}),null==(e=this.messages)?void 0:e.addingBookmark)}renderBookmarkItems(e){if(!e)return null;const{_userState:t,editingEnabled:r}=this;return e.map((e=>r&&e&&t&&("edit"===t.state||"edit-thumbnail"===t.state)&&t.bookmark===e?"edit-thumbnail"===t.state?this.renderEditingBookmarkUrl(t.editedBookmark):this.renderEditingBookmark(t.editedBookmark):this.renderBookmark(e))).toArray()}renderBookmarksContainer(e){var t;const{_userState:r,editingEnabled:n}=this,i="add"===(null==r?void 0:r.state),o=n&&!i?this.renderAddBookmarkButton():null,a=n?i&&r.loading?this.renderAddBookmarkLoading():"add"===(null==r?void 0:r.state)?this.renderAddingBookmark():null:null;return[Object(g.a)("ul",{key:"bookmark-list","aria-label":null==(t=this.messages)?void 0:t.widgetLabel,class:this.classes(V,{[W]:this.editingEnabled}),afterCreate:this._sortNodeCreated,afterRemoved:this._destroySortable,"data-node-ref":"_sortableNode",bind:this},this.renderBookmarkItems(e)),o,a]}renderAddBookmarkButton(){var e;return this.visibleElements.addBookmark?Object(g.a)("div",{key:"add-bookmark-item",class:oe},Object(g.a)("button",{class:this.classes(ye,ve,ae),onclick:this.startAddBookmark,afterCreate:this._storeAddBookmarkButton,afterUpdate:this._storeAddBookmarkButton,"data-node-ref":"_addBookmarkButtonNode",bind:this,type:"button"},Object(g.a)("span",{"aria-hidden":"true",class:this.classes(se,we)}),null==(e=this.messages)?void 0:e.addBookmark)):null}renderBookmarks(){const{bookmarks:e}=this.viewModel,t=e&&e.filter(Boolean),r=t&&t.length,n=r||this.editingEnabled?this.renderBookmarksContainer(t):null;return[r?null:this.renderNoBookmarksContainer(),n]}renderEditContainer(e){const{messagesCommon:t}=this;return Object(g.a)("div",{key:"edit-container"},Object(g.a)("button",{title:null==t?void 0:t.edit,"aria-label":null==t?void 0:t.edit,"data-bookmark":e,onclick:this._showEditBookmarkForm,bind:this,class:$,type:"button"},Object(g.a)("span",{"aria-hidden":"true",class:ke})))}renderDragHandle(e){const{messagesCommon:t}=this,r={[L]:e.uid};return Object(g.a)("div",Object.assign({role:"button",tabIndex:0,key:"drag-handle",bind:this,class:Y,onkeydown:this._dragHandleKeydown,afterCreate:this._focusDragHandle,afterUpdate:this._focusDragHandle,onblur:this._dragHandleBlur,"aria-pressed":this._selectedSortUid===e.uid?"true":"false","aria-label":null==t?void 0:t.dragHandleLabel,title:null==t?void 0:t.dragHandleTitle},r),Object(g.a)("span",{"aria-hidden":"true",class:this.classes(H,je)}))}renderBookmarkImageIcon(){return Object(g.a)("span",{"aria-hidden":"true",class:this.classes(X,Te)})}renderBookmarkImage(e){const{visibleElements:t}=this,{thumbnail:r}=e,n=r&&r.url||"";return t.thumbnail&&n?Object(g.a)("img",{src:n,alt:"",class:K}):null}renderBookmarkButton(e){const{messagesCommon:t}=this,{name:r}=e,n=r||(null==t?void 0:t.untitled),i=Object(g.a)("div",{class:z},this.renderBookmarkImage(e)||this.renderBookmarkImageIcon());return Object(g.a)("button",{key:"bookmark-button",class:J,bind:this,"data-bookmark":e,onclick:this._goToBookmark,type:"button"},i,Object(g.a)("span",{class:Z},n))}renderBookmark(e){const{activeBookmark:t}=this.viewModel,r={[Q]:t===e},n=this.editingEnabled?this.renderEditContainer(e):null,i={[L]:e.uid},o=this.editingEnabled?this.renderDragHandle(e):null;return Object(g.a)("li",Object.assign({key:e,class:this.classes(G,r)},i),o,this.renderBookmarkButton(e),n)}renderEditingBookmarkName(e){const{messages:t,_userState:r}=this,n="name-required"===r.validationState;return Object(g.a)("label",{class:de},null==t?void 0:t.title,n?Object(g.a)("strong",null,null==t?void 0:t.invalidTitle):null,Object(g.a)("input",{required:!0,bind:this,class:this.classes(Oe,n?he:null),type:"text",value:e.name,afterCreate:this._storeEditInput,afterUpdate:this._focusEditInput,"data-bookmark":e,"data-node-ref":"_editInputNode",placeholder:null==t?void 0:t.titlePlaceholder}))}renderEditingBookmarkUrlActions(){const{messagesCommon:e}=this;return Object(g.a)("div",{class:pe},Object(g.a)("input",{type:"button",value:null==e?void 0:e.back,class:this.classes(ye,ve),onclick:this._closeUrlEditBookmarkForm,bind:this}),Object(g.a)("input",{class:ye,type:"submit",value:null==e?void 0:e.add}))}renderEditingBookmarkActions(){const{messagesCommon:e}=this,{bookmark:t}=this._userState;return Object(g.a)("div",{class:pe},Object(g.a)("input",{type:"button",value:null==e?void 0:e.delete,class:this.classes(ye,ve,be),"data-bookmark":t,onclick:this._deleteBookmark,bind:this}),Object(g.a)("input",{type:"button",value:null==e?void 0:e.cancel,class:this.classes(ye,ve),onclick:this._closeEditBookmarkForm,bind:this}),Object(g.a)("input",{class:ye,type:"submit",value:null==e?void 0:e.save}))}renderEditingBookmarkUrlInput(e){var t;const{messages:r,_userState:n}=this,i=null==(t=e.thumbnail)?void 0:t.url,o=Ne.test(i)?i:null,a="absolute-url-required"===n.validationState;return Object(g.a)("label",{class:de},a?Object(g.a)("strong",null,null==r?void 0:r.invalidImageUrl):null,Object(g.a)("input",{required:!0,bind:this,class:this.classes(Oe,a?he:null),type:"text",value:o,afterCreate:this._storeUrlEditInput,afterUpdate:this._focusUrlEditInput,"data-bookmark":e,"data-node-ref":"_urlEditInputNode",title:null==r?void 0:r.imageUrlTooltip,placeholder:null==r?void 0:r.imageUrlPlaceholder}))}renderEditingBookmarkUrl(e){const t={[L]:e.uid};return Object(g.a)("li",Object.assign({key:"edit-bookmark-url-form",class:le},t),Object(g.a)("form",{class:ue,onsubmit:this._editBookmarkUrlSubmit,bind:this},this.renderEditingBookmarkUrlInput(e),this.renderEditingBookmarkUrlActions()))}renderEditingBookmark(e){const t={[L]:e.uid};return Object(g.a)("li",Object.assign({key:"edit-bookmark-form",class:le},t),Object(g.a)("form",{class:ue,onsubmit:this._editBookmarkSubmit,bind:this},Object(g.a)("div",{class:ce},Object(g.a)("div",{class:z},this.renderBookmarkImage(e),this._editMenu.render()),this.renderEditingBookmarkName(e)),this.renderEditingBookmarkActions()))}renderAddingBookmarkName(){const{_userState:e,messages:t}=this,r="name-required"===e.validationState;return Object(g.a)("label",{class:de},null==t?void 0:t.title,r?Object(g.a)("strong",null,null==t?void 0:t.invalidTitle):null,Object(g.a)("input",{required:!0,bind:this,class:this.classes(Oe,r?he:null),type:"text",afterCreate:this._storeAddInput,afterUpdate:this._focusAddInput,"data-node-ref":"_addInputNode",value:"",placeholder:null==t?void 0:t.titlePlaceholder}))}renderAddingBookmarkActions(){const{messagesCommon:e}=this;return Object(g.a)("div",{class:this.classes(pe)},Object(g.a)("input",{type:"button",value:null==e?void 0:e.cancel,class:this.classes(ye,ve,me),onclick:this._endAddBookmark.bind(this),bind:this}),Object(g.a)("input",{class:ye,type:"submit",value:null==e?void 0:e.add}))}renderAddingBookmark(){return Object(g.a)("div",{key:"add-bookmark-form",class:le},Object(g.a)("form",{class:ue,onsubmit:this._addBookmarkSubmit,bind:this},this.renderAddingBookmarkName(),this.renderAddingBookmarkActions()))}_dragHandleBlur(){this._selectedSortUid=null,this.scheduleRender()}_dragHandleKeydown(e){const{_sortableSavedItems:t}=this,r=Object(d.a)(e);if(-1===["ArrowDown","ArrowUp","Escape","Tab"," ","Enter"].indexOf(r))return;const{_sortable:n,_selectedSortUid:i}=this,o=n.toArray(),a=e.target.getAttribute(L),s=o.indexOf(a);if(" "===r||"Enter"===r){const e=i&&i===a;return this._selectedSortUid=e?null:a,this._sortableSavedItems=e?null:this._sortable.toArray(),void this.scheduleRender()}if("Tab"===r)return this._selectedSortUid=null,void this.scheduleRender();if("Escape"===r&&t)return e.stopPropagation(),this._selectedSortUid=null,this._updateSortItems(t,n,a),void this.scheduleRender();if(-1===s||!i)return;const l="ArrowUp"===r?s-1:s+1;l>=o.length||l<=-1||(function(e,t,r){e.splice(r,0,e.splice(t,1)[0])}(o,s,l),this._updateSortItems(o,n,a))}_updateSortItems(e,t,r){t.sort(e),this._sortBookmarks(t),this._focusSortUid=r,this._selectedSortUid=r}_focusDragHandle(e){const{_focusSortUid:t}=this;e&&t&&e.getAttribute(L)===t&&(e.focus(),this._focusSortUid=null)}_toggleSorting(){const{_sortable:e,_sortableNode:t,editingEnabled:r}=this;if(t)if(e)e.option("disabled",!r);else{const e=v.a.create(t,{dataIdAttr:L,handle:`.${Y}`,group:"bookmarks",disabled:!r,onSort:()=>this._sortBookmarks(e)});this._sortable=e}}_sortNodeCreated(e){this._sortableNode=e,this._toggleSorting()}_sortBookmarks(e){const{bookmarks:t}=this.viewModel;if(!t)return;const r=e.toArray();t.sort(((e,t)=>{const n=r.indexOf(e.uid),i=r.indexOf(t.uid);return n>i?1:n<i?-1:0}))}_destroySortable(){const{_sortable:e}=this;e&&e.destroy(),this._sortable=null}_endAddBookmark(){this._focusAddBookmarkButton=!0,this.endAddBookmark()}_bookmarksInitialized(){const e="bookmarks-init",{_handles:t}=this;t.remove(e),t.add(Object(h.b)(this,"viewModel.bookmarks","change",(()=>this._bookmarksChanged())),e)}_bookmarksChanged(){const e="bookmarks-change",{bookmarks:t}=this.viewModel,{_handles:r}=this;r.remove(e);const n=t.map((e=>Object(h.d)(e,["active","name","thumbnail.url"],(()=>this.scheduleRender()))));r.add(n,e),this.scheduleRender()}_showEditBookmarkForm(e){const t=e.currentTarget["data-bookmark"];this._focusEditInputBox=!0,this._userState=new w({bookmark:t,state:"edit"}),this.viewModel.goTo(t),this.scheduleRender()}_closeUrlEditBookmarkForm(){this._focusEditInputBox=!0,this._userState.state="edit"}_closeEditBookmarkForm(){this._userState=null}_addBookmarkSubmit(e){e.preventDefault();const{_addInputNode:t,_userState:r}=this,n=t&&t.value.trim();n?(r.loading=!0,this.viewModel.createBookmark().then((e=>{e.name=n,this.viewModel.bookmarks.add(e),this._endAddBookmark()}))):r.validationState="name-required"}async _editBookmarkAndClose(e,t){await this.viewModel.editBookmark(e,t),this._closeEditBookmarkForm()}_editBookmarkSubmit(e){e.preventDefault();const{_editInputNode:t,_userState:r}=this,n=t&&t.value.trim();n?(r.bookmark.name=n,r.bookmark.thumbnail=r.editedBookmark.thumbnail,this._editBookmarkAndClose(r.bookmark,{takeScreenshot:!1})):r.validationState="name-required"}_storeAddBookmarkButton(e){this._addBookmarkButtonNode=e,this._focusAddBookmark()}_storeEditInput(e){this._editInputNode=e,this._focusEditInput()}_storeAddInput(e){this._addInputNode=e,this._focusAddInput()}_storeUrlEditInput(e){this._urlEditInputNode=e,this._focusUrlEditInput()}_focusUrlEditInput(){this._urlEditInputNode&&this._focusUrlEditInputBox&&(this._focusUrlEditInputBox=!1,this._urlEditInputNode.focus())}_focusAddInput(){this._addInputNode&&this._focusAddInputBox&&(this._focusAddInputBox=!1,this._addInputNode.focus())}_focusAddBookmark(){this._addBookmarkButtonNode&&this._focusAddBookmarkButton&&(this._focusAddBookmarkButton=!1,this._addBookmarkButtonNode.focus())}_focusEditInput(){this._editInputNode&&this._focusEditInputBox&&(this._focusEditInputBox=!1,this._editInputNode.focus())}_deleteBookmark(e){const t=e.currentTarget["data-bookmark"];this.viewModel.bookmarks.remove(t)}_goToBookmark(e){const t=e.currentTarget["data-bookmark"];this.endAddBookmark(),this._closeEditBookmarkForm(),this.viewModel.goTo(t)}async _refreshThumbnail(){const{_userState:e,_editMenu:t,viewModel:r}=this;e.validationState=void 0,await r.editBookmark(this._userState.editedBookmark,{takeScreenshot:!0,captureExtent:!1,captureViewpoint:!1,captureRotation:!1,captureScale:!1}),t.open=!1,this._focusEditInputBox=!0,this.scheduleRender()}_removeThumbnail(){const{_userState:e,_editMenu:t}=this;e.editedBookmark.thumbnail=null,e.validationState=void 0,t.open=!1,this._focusEditInputBox=!0,this.scheduleRender()}_startUseImageUrl(){this._userState.state="edit-thumbnail",this._editMenu.open=!1,this._focusUrlEditInputBox=!0,this.scheduleRender()}_editBookmarkUrlSubmit(e){e.preventDefault();const{_urlEditInputNode:t,_userState:r}=this,n=t.value;Ne.test(n)?(n&&(r.editedBookmark.thumbnail=new b.a({url:n})),this._closeUrlEditBookmarkForm()):r.validationState="absolute-url-required"}};Object(i.a)([Object(a.b)({type:w})],Be.prototype,"_userState",void 0),Object(i.a)([Object(a.b)({readOnly:!0})],Be.prototype,"_editMenuItems",null),Object(i.a)([Object(a.b)({readOnly:!0})],Be.prototype,"_editMenu",null),Object(i.a)([Object(a.b)()],Be.prototype,"bookmarkCreationOptions",null),Object(i.a)([Object(s.a)("viewModel.defaultCreateOptions")],Be.prototype,"defaultCreateOptions",void 0),Object(i.a)([Object(s.a)("viewModel.defaultEditOptions")],Be.prototype,"defaultEditOptions",void 0),Object(i.a)([Object(s.a)("viewModel.bookmarks")],Be.prototype,"bookmarks",void 0),Object(i.a)([Object(a.b)()],Be.prototype,"disabled",void 0),Object(i.a)([Object(a.b)()],Be.prototype,"editingEnabled",void 0),Object(i.a)([Object(s.a)("viewModel.goToOverride")],Be.prototype,"goToOverride",void 0),Object(i.a)([Object(a.b)()],Be.prototype,"iconClass",void 0),Object(i.a)([Object(a.b)({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],Be.prototype,"label",void 0),Object(i.a)([Object(a.b)(),Object(m.a)("esri/widgets/Bookmarks/t9n/Bookmarks")],Be.prototype,"messages",void 0),Object(i.a)([Object(a.b)(),Object(m.a)("esri/t9n/common")],Be.prototype,"messagesCommon",void 0),Object(i.a)([Object(a.b)(),Object(m.a)("esri/core/t9n/Units")],Be.prototype,"messagesUnits",void 0),Object(i.a)([Object(s.a)("viewModel.view")],Be.prototype,"view",void 0),Object(i.a)([Object(a.b)({type:D}),Object(f.a)(["select-bookmark","bookmark-edit","bookmark-select"])],Be.prototype,"viewModel",void 0),Object(i.a)([Object(a.b)()],Be.prototype,"visibleElements",void 0),Object(i.a)([Object(l.a)("visibleElements")],Be.prototype,"castVisibleElements",null),Object(i.a)([Object(a.b)()],Be.prototype,"endAddBookmark",null),Object(i.a)([Object(a.b)()],Be.prototype,"startAddBookmark",null),Be=Object(i.a)([Object(u.a)(Pe)],Be);var Fe=Be,Le=r(1049),Re=r(92),Ue=r(0);const qe=e=>{const t=Object(n.useRef)(null);return Object(n.useEffect)((()=>{const r=new Fe({container:t.current,view:e.view,editingEnabled:!0});return Re.c((e=>{if(window.localStorage.getItem("imaps")){const t=Le.a.fromJSON(JSON.parse(window.localStorage.getItem("imaps")));t.load().then((()=>{e(t.bookmarks)}))}})).then((e=>{r.bookmarks.removeAll(),r.bookmarks.addMany(e)})),()=>{r&&r.destroy()}}),[e.id]),Object(Ue.jsx)("div",{ref:t})};t.default=qe},137:function(e,t,r){"use strict";r.d(t,"a",(function(){return i})),r.d(t,"b",(function(){return l})),r.d(t,"c",(function(){return s})),r.d(t,"d",(function(){return a})),r.d(t,"e",(function(){return c}));r(79);var n=r(93);function i(e){return e}const o={milliseconds:{getter:"getMilliseconds",setter:"setMilliseconds",multiplier:1},seconds:{getter:"getSeconds",setter:"setSeconds",multiplier:1},minutes:{getter:"getMinutes",setter:"setMinutes",multiplier:1},hours:{getter:"getHours",setter:"setHours",multiplier:1},days:{getter:"getDate",setter:"setDate",multiplier:1},weeks:{getter:"getDate",setter:"setDate",multiplier:7},months:{getter:"getMonth",setter:"setMonth",multiplier:1},years:{getter:"getFullYear",setter:"setFullYear",multiplier:1},decades:{getter:"getFullYear",setter:"setFullYear",multiplier:10},centuries:{getter:"getFullYear",setter:"setFullYear",multiplier:100}},a=Object(n.b)()({esriTimeUnitsMilliseconds:"milliseconds",esriTimeUnitsSeconds:"seconds",esriTimeUnitsMinutes:"minutes",esriTimeUnitsHours:"hours",esriTimeUnitsDays:"days",esriTimeUnitsWeeks:"weeks",esriTimeUnitsMonths:"months",esriTimeUnitsYears:"years",esriTimeUnitsDecades:"decades",esriTimeUnitsCenturies:"centuries",esriTimeUnitsUnknown:null});function s(e,t,r){const n=new Date(e.getTime());if(t&&r){const e=o[r],{getter:i,setter:a,multiplier:s}=e;n[a](n[i]()+t*s)}return n}const l={milliseconds:1,seconds:1e3,minutes:6e4,hours:36e5,days:864e5,weeks:6048e5,months:26784e5,years:31536e6,decades:31536e7,centuries:31536e8};function c(e,t){switch(t){case"milliseconds":return new Date(e.getTime());case"seconds":return new Date(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds());case"minutes":return new Date(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes());case"hours":return new Date(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours());case"days":return new Date(e.getFullYear(),e.getMonth(),e.getDate());case"weeks":return new Date(e.getFullYear(),e.getMonth(),e.getDate()-e.getDay());case"months":return new Date(e.getFullYear(),e.getMonth(),1);case"years":return new Date(e.getFullYear(),0,1);case"decades":return new Date(e.getFullYear()-e.getFullYear()%10,0,1);case"centuries":return new Date(e.getFullYear()-e.getFullYear()%100,0,1);default:return null}}},140:function(e,t,r){"use strict";r.d(t,"a",(function(){return s})),r.d(t,"b",(function(){return l})),r.d(t,"c",(function(){return a})),r.d(t,"d",(function(){return c}));var n=r(121);const i=/\{([^\}]+)\}/g;function o(e){return null==e?"":e}function a(e,t){return e.replace(i,"object"==typeof t?(e,r)=>o(Object(n.b)(r,t)):(e,r)=>o(t(r)))}function s(e,t){return e.replace(/([\.$?*|{}\(\)\[\]\\\/\+\-^])/g,(e=>t&&-1!==t.indexOf(e)?e:`\\${e}`))}function l(e){let t=0;for(let r=0;r<e.length;r++)t=(t<<5)-t+e.charCodeAt(r),t|=0;return t}function c(e){return(new DOMParser).parseFromString(e||"","text/html").body.innerText||""}},147:function(e,t,r){"use strict";var n,i=r(81),o=(r(79),r(80),r(87),r(84)),a=r(96),s=r(83),l=r(94),c=(r(82),r(85),r(86),r(89)),u=r(137);let d=n=class extends c.a{constructor(e){super(e),this.end=null,this.start=null}static get allTime(){return p}static get empty(){return h}readEnd(e,t){return null!=t.end?new Date(t.end):null}writeEnd(e,t){t.end=e?e.getTime():null}get isAllTime(){return this.equals(n.allTime)}get isEmpty(){return this.equals(n.empty)}readStart(e,t){return null!=t.start?new Date(t.start):null}writeStart(e,t){t.start=e?e.getTime():null}clone(){return new n({end:this.end,start:this.start})}expandTo(e){if(this.isEmpty||this.isAllTime)return this.clone();const t=this.start?Object(u.e)(this.start,e):null,r=this.end?Object(u.c)(Object(u.e)(this.end,e),1,e):null;return new n({start:t,end:r})}intersection(e){var t,r,i,o,a,s,l,c;if(!e)return this.clone();if(this.isEmpty||e.isEmpty)return n.empty;if(this.isAllTime)return e.clone();if(e.isAllTime)return this.clone();const u=null!=(t=null==(r=this.start)?void 0:r.getTime())?t:-1/0,d=null!=(i=null==(o=this.end)?void 0:o.getTime())?i:1/0,p=null!=(a=null==(s=e.start)?void 0:s.getTime())?a:-1/0,h=null!=(l=null==(c=e.end)?void 0:c.getTime())?l:1/0;let b,m;if(p>=u&&p<=d?b=p:u>=p&&u<=h&&(b=u),d>=p&&d<=h?m=d:h>=u&&h<=d&&(m=h),!isNaN(b)&&!isNaN(m)){const e=new n;return e.start=b===-1/0?null:new Date(b),e.end=m===1/0?null:new Date(m),e}return n.empty}offset(e,t){if(this.isEmpty||this.isAllTime)return this.clone();const r=new n,{start:i,end:o}=this;return i&&(r.start=Object(u.c)(i,e,t)),o&&(r.end=Object(u.c)(o,e,t)),r}equals(e){if(!e)return!1;const t=this.start?this.start.getTime():this.start,r=this.end?this.end.getTime():this.end,n=e.start?e.start.getTime():e.start,i=e.end?e.end.getTime():e.end;return t===n&&r===i}union(e){if(!e||e.isEmpty)return this.clone();if(this.isEmpty)return e.clone();if(this.isAllTime||e.isAllTime)return p.clone();const t=this.start&&e.start?new Date(Math.min(this.start.getTime(),e.start.getTime())):null,r=this.end&&e.end?new Date(Math.max(this.end.getTime(),e.end.getTime())):null;return new n({start:t,end:r})}};Object(i.a)([Object(o.b)({type:Date,json:{write:{allowNull:!0}}})],d.prototype,"end",void 0),Object(i.a)([Object(a.a)("end")],d.prototype,"readEnd",null),Object(i.a)([Object(l.a)("end")],d.prototype,"writeEnd",null),Object(i.a)([Object(o.b)({readOnly:!0,json:{read:!1}})],d.prototype,"isAllTime",null),Object(i.a)([Object(o.b)({readOnly:!0,json:{read:!1}})],d.prototype,"isEmpty",null),Object(i.a)([Object(o.b)({type:Date,json:{write:{allowNull:!0}}})],d.prototype,"start",void 0),Object(i.a)([Object(a.a)("start")],d.prototype,"readStart",null),Object(i.a)([Object(l.a)("start")],d.prototype,"writeStart",null),d=n=Object(i.a)([Object(s.a)("esri.TimeExtent")],d);const p=new d,h=new d({start:void 0,end:void 0});var b=d;t.a=b},155:function(e,t,r){"use strict";(function(e){const r="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof e?e:void 0;t.a=r}).call(this,r(169))},156:function(e,t,r){"use strict";var n=r(155),i=(r(79),r(121));const o={apiKey:void 0,applicationUrl:n.a.location&&n.a.location.href,assetsPath:"",fontsUrl:"https://static.arcgis.com/fonts",geometryService:null,geometryServiceUrl:"https://utility.arcgisonline.com/arcgis/rest/services/Geometry/GeometryServer",geoRSSServiceUrl:"https://utility.arcgis.com/sharing/rss",kmlServiceUrl:"https://utility.arcgis.com/sharing/kml",portalUrl:"https://www.arcgis.com",workers:{loaderConfig:{has:{},paths:{},map:{},packages:[]}},request:{httpsDomains:["arcgis.com","arcgisonline.com","esrikr.com","premiumservices.blackbridge.com","esripremium.accuweather.com","gbm.digitalglobe.com","firstlook.digitalglobe.com","msi.digitalglobe.com"],interceptors:[],maxUrlLength:2e3,proxyRules:[],proxyUrl:null,timeout:6e4,trustedServers:[],useIdentity:!0},log:{interceptors:[],level:null}};if(n.a.esriConfig&&(Object(i.a)(o,n.a.esriConfig,!0),delete o.has),!o.assetsPath){const e="4.19.0";o.assetsPath=`https://js.arcgis.com/${e.slice(0,-2)}/@arcgis/core/assets`}o.baseUrl&&console.warn("[esri.config]","baseUrl has been replaced by assetsPath"),Object.defineProperty(o,"baseUrl",{set(){console.warn("[esri.config]","baseUrl has been replaced by assetsPath")}}),o.request.corsEnabledServers=[],o.request.corsEnabledServers.push=function(){return console.warn("[esri.config]","request.corsEnabledServers is not supported and will be removed in a future release. See http://esriurl.com/cors8664"),0},t.a=o},162:function(e,t,r){"use strict";function n(e){return e&&("function"==typeof e.on||"function"==typeof e.addEventListener)}function i(e,t,r){if(!n(e))throw new TypeError("target is not a Evented or EventTarget object");if("on"in e)return e.on(t,r);if(Array.isArray(t)){const n=t.slice();for(const t of n)e.addEventListener(t,r);return{remove(){for(const t of n)e.removeEventListener(t,r)}}}return e.addEventListener(t,r),{remove(){e.removeEventListener(t,r)}}}function o(e,t,r){if(!n(e))throw new TypeError("target is not a Evented or EventTarget object");if("once"in e)return e.once(t,r);const o=i(e,t,(t=>{o.remove(),r.call(e,t)}));return{remove(){o.remove()}}}r.d(t,"a",(function(){return s})),r.d(t,"b",(function(){return n})),r.d(t,"c",(function(){return i})),r.d(t,"d",(function(){return o}));const a={Win:"Meta",Scroll:"ScrollLock",Spacebar:" ",Down:"ArrowDown",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Del:"Delete",Apps:"ContextMenu",Esc:"Escape",Multiply:"*",Add:"+",Subtract:"-",Decimal:".",Divide:"/"};function s({key:e}){return a[e]||e}},164:function(e,t,r){"use strict";r.d(t,"a",(function(){return u})),r.d(t,"b",(function(){return c}));var n=r(81),i=r(84),o=r(83),a=r(95),s=r(113),l=r(294);const c=e=>{let t=class extends e{destroy(){this.destroyed||(this.handles.destroy(),this.updatingHandles.destroy())}get handles(){return this._get("handles")||new s.a}get updatingHandles(){return this._get("updatingHandles")||new l.a}};return Object(n.a)([Object(i.b)({readOnly:!0})],t.prototype,"handles",null),Object(n.a)([Object(i.b)({readOnly:!0})],t.prototype,"updatingHandles",null),t=Object(n.a)([Object(o.a)("esri.core.HandleOwner")],t),t};let u=class extends(c(a.a)){};u=Object(n.a)([Object(o.a)("esri.core.HandleOwner")],u)},169:function(e,t){var r;r=function(){return this}();try{r=r||new Function("return this")()}catch(n){"object"===typeof window&&(r=window)}e.exports=r},177:function(e,t,r){"use strict";r.d(t,"a",(function(){return n})),r.d(t,"b",(function(){return i}));r(79);function n(e){}function i(e){return()=>e}},181:function(e,t,r){"use strict";r.d(t,"a",(function(){return n})),r.d(t,"b",(function(){return i})),r.d(t,"c",(function(){return l})),r.d(t,"d",(function(){return s}));const n=1e-6,i=Math.random,o=Math.PI/180,a=180/Math.PI;function s(e){return e*o}function l(e){return e*a}Object.freeze({__proto__:null,EPSILON:n,RANDOM:i,toRadian:s,toDegree:l,equals:function(e,t){return Math.abs(e-t)<=n*Math.max(1,Math.abs(e),Math.abs(t))}})},183:function(e,t,r){"use strict";r.d(t,"a",(function(){return v})),r.d(t,"b",(function(){return O}));var n=r(81),i=r(123),o=r(83),a=r(141),s=r(95),l=r(225),c=r(88),u=r(250),d=r(90);class p{constructor(){this._propertyOriginMap=new Map,this._originStores=new Array(a.a),this._values=new Map}clone(e){const t=new p,r=this._originStores[0];r&&r.forEach(((e,r)=>{t.set(r,Object(d.a)(e),0)}));for(let n=2;n<a.a;n++){const r=this._originStores[n];r&&r.forEach(((r,i)=>{e&&e.has(i)||t.set(i,Object(d.a)(r),n)}))}return t}get(e,t){const r=void 0===t?this._values:this._originStores[t];return r?r.get(e):void 0}keys(e){const t=null==e?this._values:this._originStores[e];return t?[...t.keys()]:[]}set(e,t,r=6){let n=this._originStores[r];if(n||(n=new Map,this._originStores[r]=n),n.set(e,t),!this._values.has(e)||Object(c.d)(this._propertyOriginMap.get(e))<=r){const n=this._values.get(e);return this._values.set(e,t),this._propertyOriginMap.set(e,r),n!==t}return!1}delete(e,t=6){const r=this._originStores[t];if(!r)return;const n=r.get(e);if(r.delete(e),this._values.has(e)&&this._propertyOriginMap.get(e)===t){this._values.delete(e);for(let r=t-1;r>=0;r--){const t=this._originStores[r];if(t&&t.has(e)){this._values.set(e,t.get(e)),this._propertyOriginMap.set(e,r);break}}}return n}has(e,t){const r=void 0===t?this._values:this._originStores[t];return!!r&&r.has(e)}revert(e,t){for(;t>0&&!this.has(e,t);)--t;const r=this._originStores[t],n=r&&r.get(e),i=this._values.get(e);return this._values.set(e,n),this._propertyOriginMap.set(e,t),i!==n}originOf(e){return this._propertyOriginMap.get(e)||0}forEach(e){this._values.forEach(e)}}var h=p;const b=e=>{let t=class extends e{constructor(...e){super(...e);const t=Object(c.d)(Object(i.a)(this)),r=t.metadatas,n=t.store,o=new h;t.store=o,n.keys().forEach((e=>{o.set(e,n.get(e),0)})),Object.keys(r).forEach((e=>{t.internalGet(e)&&o.set(e,t.internalGet(e),0)}))}read(e,t){Object(u.a)(this,e,t)}getAtOrigin(e,t){const r=m(this),n=Object(a.d)(t);if("string"==typeof e)return r.get(e,n);const i={};return e.forEach((e=>{i[e]=r.get(e,n)})),i}originOf(e){return Object(a.b)(this.originIdOf(e))}originIdOf(e){return m(this).originOf(e)}revert(e,t){const r=m(this),n=Object(a.d)(t),o=Object(i.a)(this);let s;s="string"==typeof e?"*"===e?r.keys(n):[e]:e,s.forEach((e=>{o.propertyInvalidated(e),r.revert(e,n),o.propertyCommitted(e)}))}};return t=Object(n.a)([Object(o.a)("esri.core.ReadOnlyMultiOriginJSONSupport")],t),t};function m(e){return Object(i.a)(e).store}let f=class extends(b(s.a)){};f=Object(n.a)([Object(o.a)("esri.core.ReadOnlyMultiOriginJSONSupport")],f);const g=e=>{let t=class extends e{constructor(...e){super(...e)}clear(e,t="user"){return y(this).delete(e,Object(a.d)(t))}write(e={},t){return Object(l.b)(this,e=e||{},t),e}setAtOrigin(e,t,r){Object(i.a)(this).setAtOrigin(e,t,Object(a.d)(r))}removeOrigin(e){const t=y(this),r=Object(a.d)(e),n=t.keys(r);for(const i of n)t.originOf(i)===r&&t.set(i,t.get(i,r),6)}updateOrigin(e,t){const r=y(this),n=Object(a.d)(t),i=this.get(e);for(let o=n+1;o<a.a;++o)r.delete(e,o);r.set(e,i,n)}toJSON(e){return this.write({},e)}};return t=Object(n.a)([Object(o.a)("esri.core.WriteableMultiOriginJSONSupport")],t),t.prototype.toJSON.isDefaultToJSON=!0,t};function y(e){return Object(i.a)(e).store}const v=e=>{let t=class extends(g(b(e))){constructor(...e){super(...e)}};return t=Object(n.a)([Object(o.a)("esri.core.MultiOriginJSONSupport")],t),t};let O=class extends(v(s.a)){};O=Object(n.a)([Object(o.a)("esri.core.MultiOriginJSONSupport")],O)},215:function(e,t,r){"use strict";var n=r(81),i=(r(79),r(156)),o=r(80),a=(r(87),r(84)),s=r(83),l=r(91),c=r(82),u=(r(85),r(86),r(92)),d=r(97),p=r(101),h=(r(99),r(128)),b=r(263),m=r(104),f=r(182);let g=0;const y=o.a.getLogger("esri.layers.Layer");let v=class extends(h.a.EventedMixin(Object(b.a)(f.a))){constructor(){super(...arguments),this.attributionDataUrl=null,this.fullExtent=new p.a(-180,-90,180,90,d.a.WGS84),this.id=Date.now().toString(16)+"-layer-"+g++,this.legendEnabled=!0,this.listMode="show",this.opacity=1,this.parent=null,this.popupEnabled=!0,this.attributionVisible=!0,this.spatialReference=d.a.WGS84,this.title=null,this.type=null,this.url=null,this.visible=!0}static async fromArcGISServerUrl(e){const t="string"==typeof e?{url:e}:e,n=await r.e(201).then(r.bind(null,629));try{return await n.fromUrl(t)}catch(i){throw y.error("#fromArcGISServerUrl({ url: '"+t.url+"'})","Failed to create layer from arcgis server url",i),i}}static async fromPortalItem(e){const t="portalItem"in e?e:{portalItem:e},n=await r.e(167).then(r.bind(null,568));try{return await n.fromItem(t)}catch(o){const e=t&&t.portalItem,r=e&&e.id||"unset",n=e&&e.portal&&e.portal.url||i.a.portalUrl;throw y.error("#fromPortalItem()","Failed to create layer from portal item (portal: '"+n+"', id: '"+r+"')",o),o}}initialize(){this.when().catch((e=>{var t,r;Object(u.m)(e)||o.a.getLogger(this.declaredClass).error("#load()",`Failed to load layer (title: '${null!=(t=this.title)?t:"no title"}', id: '${null!=(r=this.id)?r:"no id"}')`,{error:e})}))}destroy(){if(this.parent){const e=this,t=this.parent;"layers"in t&&t.layers.includes(e)?t.layers.remove(e):"tables"in t&&t.tables.includes(e)?t.tables.remove(e):"baseLayers"in t&&t.baseLayers.includes(e)?t.baseLayers.remove(e):"baseLayers"in t&&t.referenceLayers.includes(e)&&t.referenceLayers.remove(e)}}get hasAttributionData(){return null!=this.attributionDataUrl}get parsedUrl(){const e=this.url;return e?Object(c.J)(e):null}async fetchAttributionData(){const e=this.attributionDataUrl;if(this.hasAttributionData&&e)return(await Object(m.default)(e,{query:{f:"json"},responseType:"json"})).data;throw new l.a("layer:no-attribution-data","Layer does not have attribution data")}};Object(n.a)([Object(a.b)({type:String})],v.prototype,"attributionDataUrl",void 0),Object(n.a)([Object(a.b)({type:p.a})],v.prototype,"fullExtent",void 0),Object(n.a)([Object(a.b)({readOnly:!0})],v.prototype,"hasAttributionData",null),Object(n.a)([Object(a.b)({type:String})],v.prototype,"id",void 0),Object(n.a)([Object(a.b)({type:Boolean,nonNullable:!0})],v.prototype,"legendEnabled",void 0),Object(n.a)([Object(a.b)({type:["show","hide","hide-children"]})],v.prototype,"listMode",void 0),Object(n.a)([Object(a.b)({type:Number,range:{min:0,max:1},nonNullable:!0})],v.prototype,"opacity",void 0),Object(n.a)([Object(a.b)()],v.prototype,"parent",void 0),Object(n.a)([Object(a.b)({readOnly:!0})],v.prototype,"parsedUrl",null),Object(n.a)([Object(a.b)({type:Boolean})],v.prototype,"popupEnabled",void 0),Object(n.a)([Object(a.b)({type:Boolean})],v.prototype,"attributionVisible",void 0),Object(n.a)([Object(a.b)({type:d.a})],v.prototype,"spatialReference",void 0),Object(n.a)([Object(a.b)({type:String})],v.prototype,"title",void 0),Object(n.a)([Object(a.b)({type:String,readOnly:!0,json:{read:!1}})],v.prototype,"type",void 0),Object(n.a)([Object(a.b)()],v.prototype,"url",void 0),Object(n.a)([Object(a.b)({type:Boolean,nonNullable:!0})],v.prototype,"visible",void 0),v=Object(n.a)([Object(s.a)("esri.layers.Layer")],v);var O=v;t.a=O},219:function(e,t,r){"use strict";var n,i=r(81),o=(r(79),r(80),r(87),r(84)),a=r(83),s=(r(82),r(85),r(86),r(89)),l=r(137);let c=n=class extends s.a{constructor(e){super(e),this.value=0,this.unit="milliseconds"}toMilliseconds(){return this.value*l.b[this.unit]}clone(){return new n({value:this.value,unit:this.unit})}};Object(i.a)([Object(o.b)({type:Number,json:{write:!0},nonNullable:!0})],c.prototype,"value",void 0),Object(i.a)([Object(o.b)({type:l.d.apiValues,json:{type:l.d.jsonValues,read:l.d.read,write:l.d.write},nonNullable:!0})],c.prototype,"unit",void 0),c=n=Object(i.a)([Object(a.a)("esri.TimeInterval")],c);var u=c;t.a=u},234:function(e,t,r){"use strict";r.d(t,"a",(function(){return n}));const n=new(r(93).a)({esriFieldTypeSmallInteger:"small-integer",esriFieldTypeInteger:"integer",esriFieldTypeSingle:"single",esriFieldTypeDouble:"double",esriFieldTypeLong:"long",esriFieldTypeString:"string",esriFieldTypeDate:"date",esriFieldTypeOID:"oid",esriFieldTypeGeometry:"geometry",esriFieldTypeBlob:"blob",esriFieldTypeRaster:"raster",esriFieldTypeGUID:"guid",esriFieldTypeGlobalID:"global-id",esriFieldTypeXML:"xml"})},239:function(e,t,r){"use strict";r.d(t,"a",(function(){return h})),r.d(t,"b",(function(){return u})),r.d(t,"c",(function(){return m})),r.d(t,"d",(function(){return O})),r.d(t,"e",(function(){return v})),r.d(t,"f",(function(){return d})),r.d(t,"g",(function(){return p})),r.d(t,"h",(function(){return f})),r.d(t,"i",(function(){return g})),r.d(t,"j",(function(){return b})),r.d(t,"k",(function(){return y}));var n=r(88),i=r(82),o=r(255);const a=["MapServer","ImageServer","FeatureServer","SceneServer","StreamServer","VectorTileServer"],s=new RegExp(`^((?:https?:)?\\/\\/\\S+?\\/rest\\/services\\/(.+?)\\/(${a.join("|")}))(?:\\/(?:layers\\/)?(\\d+))?`,"i"),l=new RegExp(`^((?:https?:)?\\/\\/\\S+?\\/([^\\/\\n]+)\\/(${a.join("|")}))(?:\\/(?:layers\\/)?(\\d+))?`,"i"),c=/(.*)\/(\d+)\/?$/i;function u(e){return!!s.test(e)}function d(e){const t=Object(i.J)(e),r=t.path.match(s)||t.path.match(l);if(!r)return null;const[,n,o,a,c]=r,u=o.indexOf("/");return{title:h(-1!==u?o.slice(u+1):o),serverType:a,sublayer:null!=c&&""!==c?parseInt(c,10):null,url:{path:n}}}function p(e){const t=Object(i.J)(e).path.match(c);return t?{serviceUrl:t[1],sublayerId:Number(t[2])}:null}function h(e){return(e=e.replace(/\s*[/_]+\s*/g," "))[0].toUpperCase()+e.slice(1)}function b(e,t){const r=[];if(e){const t=d(e);Object(n.k)(t)&&t.title&&r.push(t.title)}if(t){const e=h(t);r.push(e)}if(2===r.length){if(-1!==r[0].toLowerCase().indexOf(r[1].toLowerCase()))return r[0];if(-1!==r[1].toLowerCase().indexOf(r[0].toLowerCase()))return r[1]}return r.join(" - ")}function m(e){if(!e)return!1;const t=-1!==(e=e.toLowerCase()).indexOf(".arcgis.com/"),r=-1!==e.indexOf("//services")||-1!==e.indexOf("//tiles")||-1!==e.indexOf("//features");return t&&r}function f(e,t){return e?Object(i.H)(Object(i.G)(e,t)):e}function g(e){let{url:t}=e;if(!t)return{url:t};t=Object(i.G)(t,e.logger);const r=Object(i.J)(t),o=d(r.path);let a;if(Object(n.k)(o))null!=o.sublayer&&null==e.layer.layerId&&(a=o.sublayer),t=o.url.path;else if(e.nonStandardUrlAllowed){const e=p(r.path);Object(n.k)(e)&&(t=e.serviceUrl,a=e.sublayerId)}return{url:Object(i.H)(t),layerId:a}}function y(e,t,r,n,a){Object(o.f)(t,n,"url",a),n.url&&null!=e.layerId&&(n.url=Object(i.y)(n.url,r,e.layerId.toString()))}function v(e){if(!e)return!1;const t=e.toLowerCase(),r=-1!==t.indexOf("/services/"),n=-1!==t.indexOf("/mapserver/wmsserver"),i=-1!==t.indexOf("/imageserver/wmsserver"),o=-1!==t.indexOf("/wmsserver");return r&&(n||i||o)}function O(e){if(!e)return!1;const t=new i.a(Object(i.z)(e)).authority.toLowerCase();return"server.arcgisonline.com"===t||"services.arcgisonline.com"===t}},292:function(e,t,r){"use strict";function n(e,t){if(e.forEach)e.forEach(t);else for(let r=0;r<e.length;r++)t(e[r],r,e)}function i(e,t,r){if(e.slice)return e.slice(t,r);void 0===t?t=0:(t<0&&(t+=e.length),t=Math.min(e.length,Math.max(0,t))),void 0===r?r=e.length:(r<0&&(r+=e.length),r=Math.min(e.length,Math.max(0,r)));const n=Math.max(0,r-t),i=new(0,e.constructor)(n);for(let o=0;o<n;o++)i[o]=e[t+o];return i}function o(e){return e instanceof ArrayBuffer||e&&e.constructor&&"ArrayBuffer"===e.constructor.name}function a(e){return e instanceof Int8Array||e&&e.constructor&&"Int8Array"===e.constructor.name}function s(e){return e instanceof Uint8Array||e&&e.constructor&&"Uint8Array"===e.constructor.name}function l(e){return e instanceof Uint8ClampedArray||e&&e.constructor&&"Uint8ClampedArray"===e.constructor.name}function c(e){return e instanceof Int16Array||e&&e.constructor&&"Int16Array"===e.constructor.name}function u(e){return e instanceof Uint16Array||e&&e.constructor&&"Uint16Array"===e.constructor.name}function d(e){return e instanceof Int32Array||e&&e.constructor&&"Int32Array"===e.constructor.name}function p(e){return e instanceof Uint32Array||e&&e.constructor&&"Uint32Array"===e.constructor.name}function h(e){return e instanceof Float32Array||e&&e.constructor&&"Float32Array"===e.constructor.name}function b(e){return e instanceof Float64Array||e&&e.constructor&&"Float64Array"===e.constructor.name}function m(e){const t=new Array(e.length);for(let r=0;r<e.length;r++)t[r]=e[r];return t}function f(e){return e?128+e.buffer.byteLength+64:0}r.d(t,"a",(function(){return f})),r.d(t,"b",(function(){return n})),r.d(t,"c",(function(){return o})),r.d(t,"d",(function(){return h})),r.d(t,"e",(function(){return b})),r.d(t,"f",(function(){return c})),r.d(t,"g",(function(){return d})),r.d(t,"h",(function(){return a})),r.d(t,"i",(function(){return u})),r.d(t,"j",(function(){return p})),r.d(t,"k",(function(){return s})),r.d(t,"l",(function(){return l})),r.d(t,"m",(function(){return i})),r.d(t,"n",(function(){return m}))},294:function(e,t,r){"use strict";r.d(t,"a",(function(){return h}));var n=r(81),i=r(88),o=r(237),a=r(84),s=r(83),l=r(238),c=r(341),u=r(95),d=r(113),p=r(106);let h=class extends u.a{constructor(){super(...arguments),this.updating=!1,this.handleId=0,this.handles=new d.a,this.scheduleHandleId=0,this.pendingPromises=new Set}destroy(){this.removeAll(),this.handles.destroy()}add(e,t,r,n=0){const i=0!=(1&n),o=++this.handleId;i||this.installSyncUpdatingWatch(e,t,o);const a=0!=(2&n)?Object(p.a)(e,t,r,i):e.watch(t,r,i);return this.handles.add(a,o),{remove:()=>{this.handles.remove(o)}}}addOnCollectionPropertyChange(e,t,r,n=0){const i=0!=(2&n),o=++this.handleId;return this.handles.add([Object(p.b)(e,t,"after-changes",this.createSyncUpdatingCallback()),Object(p.b)(e,t,"change",r,i?e=>{r({added:e.items,removed:[],moved:[],target:e})}:void 0)],o),{remove:()=>{this.handles.remove(o)}}}addOnCollectionChange(e,t,r=0){const n=0!=(2&r),i=++this.handleId;return this.handles.add([e.on("after-changes",this.createSyncUpdatingCallback()),e.on("change",t)],i),n&&t({added:e.items,removed:[],moved:[],target:e}),{remove:()=>{this.handles.remove(i)}}}addPromise(e){if(Object(i.j)(e))return e;const t=++this.handleId;this.handles.add({remove:()=>{this.pendingPromises.delete(e)&&(0!==this.pendingPromises.size||this.handles.has(b)||this._set("updating",!1))}},t),this.pendingPromises.add(e),this._set("updating",!0);const r=()=>this.handles.remove(t);return e.then(r,r),e}removeAll(){this.pendingPromises.clear(),this.handles.removeAll(),this._set("updating",!1)}installSyncUpdatingWatch(e,t,r){const n=this.createSyncUpdatingCallback(),i=Object(c.a)((()=>Object(o.c)(e,t)),n);return this.handles.add(i,r),i}createSyncUpdatingCallback(){return()=>{this.handles.remove(b),++this.scheduleHandleId;const e=this.scheduleHandleId;this._get("updating")||this._set("updating",!0),this.handles.add(Object(l.b)((()=>{e===this.scheduleHandleId&&(this._set("updating",this.pendingPromises.size>0),this.handles.remove(b))})),b)}}};Object(n.a)([Object(a.b)({readOnly:!0})],h.prototype,"updating",void 0),h=Object(n.a)([Object(s.a)("esri.views.support.WatchUpdatingTracking")],h);const b=-42},298:function(e,t,r){"use strict";function n(e){return t=>{t.hasOwnProperty("_delegatedEventNames")||(t._delegatedEventNames=t._delegatedEventNames?t._delegatedEventNames.slice():[]);const r=t._delegatedEventNames,n=Array.isArray(e)?e:function(e){return e.split(",").map((e=>e.trim()))}(e);r.push(...n)}}r.d(t,"a",(function(){return n}))},311:function(e,t,r){"use strict";r.r(t);var n=r(81),i=(r(79),r(90)),o=r(88),a=r(80),s=r(87),l=r(84),c=r(96),u=r(83),d=r(91),p=r(82),h=(r(85),r(86),r(89)),b=r(101),m=r(159),f=r(182),g=r(249),y=r(114),v=r(95);const O=a.a.getLogger("esri.portal.PortalItemResource");let j=class extends v.a{constructor(e){super(e),this.portalItem=null}normalizeCtorArgs(e){return e&&e.portalItem&&e.path?{...e,path:this.normalizePath(e.path,e.portalItem)}:e}set path(e){Object(o.k)(e)&&Object(p.s)(e)?O.error("portalitemresource:invalid-path","A portal item resource path must be relative"):this._set("path",e)}_castPath(e){return this.normalizePath(e,this.portalItem)}get url(){return this.portalItem&&this.path?`${this.portalItem.itemUrl}/resources/${this.path}`:null}get itemRelativeUrl(){return this.portalItem&&this.path?`./resources/${this.path}`:null}fetch(e="json",t){const r=this.url;if(Object(o.j)(r))throw new d.a("portal-item-resource:fetch","Portal item resource does not refer to a valid item or path");return this.portalItem.portal._request(r,{responseType:e,signal:Object(o.i)(t,"signal")})}async update(e,t){return(await r.e(19).then(r.bind(null,775))).addOrUpdateResource(this,"update",e,t)}hasPath(){return Object(o.k)(this.path)}normalizePath(e,t){return Object(o.j)(e)?e:(e=e.replace(/^\/+/,""),Object(o.k)(t)&&Object(p.s)(e)&&(e=Object(p.B)(e,t.itemUrl)),e.replace(/^\/+/,"").replace(/^(\.\/)?resources\//,""))}};Object(n.a)([Object(l.b)()],j.prototype,"portalItem",void 0),Object(n.a)([Object(l.b)({type:String,value:null})],j.prototype,"path",null),Object(n.a)([Object(y.a)("path")],j.prototype,"_castPath",null),Object(n.a)([Object(l.b)({type:String,readOnly:!0})],j.prototype,"url",null),Object(n.a)([Object(l.b)({type:String,readOnly:!0})],j.prototype,"itemRelativeUrl",null),j=Object(n.a)([Object(u.a)("esri.portal.PortalItemResource")],j);var w=j;let k=class extends v.a{constructor(e){super(e),this.created=null,this.rating=null}};Object(n.a)([Object(l.b)()],k.prototype,"created",void 0),Object(n.a)([Object(l.b)()],k.prototype,"rating",void 0),k=Object(n.a)([Object(u.a)("esri.portal.PortalRating")],k);var _,S=k;let I=_=class extends(Object(h.b)(f.a)){constructor(e){super(e),this.access=null,this.accessInformation=null,this.applicationProxies=null,this.avgRating=null,this.categories=null,this.created=null,this.culture=null,this.description=null,this.extent=null,this.groupCategories=null,this.id=null,this.itemControl=null,this.licenseInfo=null,this.modified=null,this.name=null,this.numComments=null,this.numRatings=null,this.numViews=null,this.owner=null,this.ownerFolder=null,this.portal=null,this.screenshots=null,this.size=null,this.snippet=null,this.sourceJSON=null,this.tags=null,this.title=null,this.type=null,this.typeKeywords=null,this.url=null}static from(e){return Object(s.d)(_,e)}destroy(){this.portal=null}get displayName(){const e=this.type,t=this.typeKeywords||[];let r=e;return"Feature Service"===e||"Feature Collection"===e?r=t.indexOf("Table")>-1?"Table":t.indexOf("Route Layer")>-1?"Route Layer":t.indexOf("Markup")>-1?"Markup":"Feature Layer":"Image Service"===e?r=t.indexOf("Elevation 3D Layer")>-1?"Elevation Layer":t.indexOf("Tiled Imagery")>-1?"Tiled Imagery Layer":"Imagery Layer":"Scene Service"===e?r="Scene Layer":"Scene Package"===e?r="Scene Layer Package":"Stream Service"===e?r="Feature Layer":"Geoprocessing Service"===e&&this.portal&&this.portal.isPortal?r=t.indexOf("Web Tool")>-1?"Tool":"Geoprocessing Service":"Geocoding Service"===e?r="Locator":"Geoenrichment Service"===e?r="GeoEnrichment Service":"Microsoft Powerpoint"===e?r="Microsoft PowerPoint":"GeoJson"===e?r="GeoJSON":"Globe Service"===e?r="Globe Layer":"Vector Tile Service"===e?r="Tile Layer":"netCDF"===e?r="NetCDF":"Map Service"===e?r=-1===t.indexOf("Spatiotemporal")&&(t.indexOf("Hosted Service")>-1||t.indexOf("Tiled")>-1)&&-1===t.indexOf("Relational")?"Tile Layer":"Map Image Layer":e&&e.toLowerCase().indexOf("add in")>-1?r=e.replace(/(add in)/gi,"Add-In"):"datastore catalog service"===e?r="Big Data File Share":"Compact Tile Package"===e&&(r="Tile Package (tpkx)"),r}readExtent(e){return e&&e.length?new b.a(e[0][0],e[0][1],e[1][0],e[1][1]):null}get iconUrl(){const e=this.type&&this.type.toLowerCase()||"",t=this.typeKeywords||[];let r,n=!1,i=!1,o=!1,a=!1,s=!1,l=!1;return e.indexOf("service")>0||"feature collection"===e||"kml"===e||"wms"===e||"wmts"===e||"wfs"===e?(n=t.indexOf("Hosted Service")>-1,"feature service"===e||"feature collection"===e||"kml"===e||"wfs"===e?(i=t.indexOf("Table")>-1,o=t.indexOf("Route Layer")>-1,a=t.indexOf("Markup")>-1,s=-1!==t.indexOf("Spatiotemporal"),l=-1!==t.indexOf("UtilityNetwork"),r=s&&i?"spatiotemporaltable":i?"table":o?"routelayer":a?"markup":s?"spatiotemporal":n?"featureshosted":l?"utilitynetwork":"features"):r="map service"===e||"wms"===e||"wmts"===e?n||t.indexOf("Tiled")>-1||"wmts"===e?"maptiles":"mapimages":"scene service"===e?t.indexOf("Line")>-1?"sceneweblayerline":t.indexOf("3DObject")>-1?"sceneweblayermultipatch":t.indexOf("Point")>-1?"sceneweblayerpoint":t.indexOf("IntegratedMesh")>-1?"sceneweblayermesh":t.indexOf("PointCloud")>-1?"sceneweblayerpointcloud":t.indexOf("Polygon")>-1?"sceneweblayerpolygon":t.indexOf("Building")>-1?"sceneweblayerbuilding":"sceneweblayer":"image service"===e?t.indexOf("Elevation 3D Layer")>-1?"elevationlayer":t.indexOf("Tiled Imagery")>-1?"tiledimagerylayer":"imagery":"stream service"===e?"streamlayer":"vector tile service"===e?"vectortile":"datastore catalog service"===e?"datastorecollection":"geocoding service"===e?"geocodeservice":"geoprocessing service"===e&&t.indexOf("Web Tool")>-1&&this.portal&&this.portal.isPortal?"tool":"layers"):r="web map"===e||"cityengine web scene"===e?"maps":"web scene"===e?t.indexOf("ViewingMode-Local")>-1?"webscenelocal":"websceneglobal":"web mapping application"===e||"mobile application"===e||"application"===e||"operation view"===e||"desktop application"===e?"apps":"map document"===e||"map package"===e||"published map"===e||"scene document"===e||"globe document"===e||"basemap package"===e||"mobile basemap package"===e||"mobile map package"===e||"project package"===e||"project template"===e||"pro map"===e||"layout"===e||"layer"===e&&t.indexOf("ArcGIS Pro")>-1||"explorer map"===e&&t.indexOf("Explorer Document")?"mapsgray":"service definition"===e||"csv"===e||"shapefile"===e||"cad drawing"===e||"geojson"===e||"360 vr experience"===e||"netcdf"===e||"administrative report"===e?"datafiles":"explorer add in"===e||"desktop add in"===e||"windows viewer add in"===e||"windows viewer configuration"===e?"appsgray":"arcgis pro add in"===e||"arcgis pro configuration"===e?"addindesktop":"rule package"===e||"file geodatabase"===e||"sqlite geodatabase"===e||"csv collection"===e||"kml collection"===e||"windows mobile package"===e||"map template"===e||"desktop application template"===e||"gml"===e||"arcpad package"===e||"code sample"===e||"form"===e||"document link"===e||"earth configuration"===e||"operations dashboard add in"===e||"rules package"===e||"image"===e||"workflow manager package"===e||"explorer map"===e&&t.indexOf("Explorer Mapping Application")>-1||t.indexOf("Document")>-1?"datafilesgray":"network analysis service"===e||"geoprocessing service"===e||"geodata service"===e||"geometry service"===e||"geoprocessing package"===e||"locator package"===e||"geoprocessing sample"===e||"workflow manager service"===e?"toolsgray":"layer"===e||"layer package"===e||"explorer layer"===e?"layersgray":"scene package"===e?"scenepackage":"mobile scene package"===e?"mobilescenepackage":"tile package"===e||"compact tile package"===e?"tilepackage":"task file"===e?"taskfile":"report template"===e?"report-template":"statistical data collection"===e?"statisticaldatacollection":"insights workbook"===e?"workbook":"insights model"===e?"insightsmodel":"insights page"===e?"insightspage":"insights theme"===e?"insightstheme":"hub initiative"===e?"hubinitiative":"hubpage"===e?"hubpage":"hub event"===e?"hubevent":"hub site application"===e?"hubsite":"relational database connection"===e?"relationaldatabaseconnection":"big data file share"===e?"datastorecollection":"image collection"===e?"imagecollection":"style"===e?"style":"desktop style"===e?"desktopstyle":"dashboard"===e?"dashboard":"raster function template"===e?"rasterprocessingtemplate":"vector tile package"===e?"vectortilepackage":"ortho mapping project"===e?"orthomappingproject":"ortho mapping template"===e?"orthomappingtemplate":"solution"===e?"solutions":"geopackage"===e?"geopackage":"deep learning package"===e?"deeplearningpackage":"real time analytic"===e?"realtimeanalytics":"big data analytic"===e?"bigdataanalytics":"feed"===e?"feed":"excalibur imagery project"===e?"excaliburimageryproject":"notebook"===e?"notebook":"storymap"===e?"storymap":"survey123 add in"===e?"survey123addin":"mission"===e?"mission":"mission report"===e?"missionreport":"quickcapture project"===e?"quickcaptureproject":"pro report"===e?"proreport":"urban model"===e?"urbanmodel":"web experience"===e?"experiencebuilder":"web experience template"===e?"webexperiencetemplate":"workflow"===e?"workflow":"insights script"===e?"insightsscript":"kernel gateway connection"===e?"kernelgatewayconnection":"hub initiative template"===e?"hubinitiativetemplate":"storymap theme"===e?"storymaptheme":"knowledge graph"===e?"knowledgegraph":"maps",r?Object(m.a)("esri/images/portal/"+r+"16.png"):null}get isLayer(){return["Map Service","Feature Service","Feature Collection","Scene Service","Image Service","Stream Service","Vector Tile Service","WMTS","WMS"].indexOf(this.type)>-1}get itemUrl(){const e=this.get("portal.restUrl");return e?e+"/content/items/"+this.id:null}get thumbnailUrl(){const e=this.itemUrl,t=this.thumbnail;return e&&t?this.portal._normalizeUrl(`${e}/info/${t}?f=json`):null}get userItemUrl(){const e=this.get("portal.restUrl");if(!e)return null;const t=this.owner||this.get("portal.user.username");return t?`${e}/content/users/${this.ownerFolder?`${t}/${this.ownerFolder}`:t}/items/${this.id}`:null}load(e){this.portal||(this.portal=g.a.getDefault());const t=this.portal.load(e).then((()=>this.sourceJSON?this.sourceJSON:this.id&&this.itemUrl?this.portal._request(this.itemUrl,{signal:Object(o.k)(e)?e.signal:null}):{})).then((e=>{this.sourceJSON=e,this.read(e)}));return this.addResolvingPromise(t),Promise.resolve(this)}addRating(e){const t={method:"post",query:{}};return e instanceof S&&(e=e.rating),isNaN(e)||"number"!=typeof e||(t.query.rating=e),this.portal._request(this.itemUrl+"/addRating",t).then((()=>new S({rating:e,created:new Date})))}clone(){const e={access:this.access,accessInformation:this.accessInformation,applicationProxies:Object(i.a)(this.applicationProxies),avgRating:this.avgRating,categories:Object(i.a)(this.categories),created:Object(i.a)(this.created),culture:this.culture,description:this.description,extent:Object(i.a)(this.extent),groupCategories:Object(i.a)(this.groupCategories),id:this.id,itemControl:this.itemControl,licenseInfo:this.licenseInfo,modified:Object(i.a)(this.modified),name:this.name,numComments:this.numComments,numRatings:this.numRatings,numViews:this.numViews,owner:this.owner,ownerFolder:this.ownerFolder,portal:this.portal,screenshots:Object(i.a)(this.screenshots),size:this.size,snippet:this.snippet,tags:Object(i.a)(this.tags),thumbnail:this.thumbnail,title:this.title,type:this.type,typeKeywords:Object(i.a)(this.typeKeywords),url:this.url};return this.loaded&&(e.loadStatus="loaded"),new _({sourceJSON:this.sourceJSON}).set(e)}createPostQuery(){const e=this.toJSON();for(const t in e)"tags"===t&&null!==e[t]&&(e[t]=e[t].join(", ")),"typeKeywords"===t&&null!==e[t]&&(e[t]=e[t].join(", ")),"extent"===t&&e[t]&&(e[t]=JSON.stringify(e[t]));return e}deleteRating(){return this.portal._request(this.itemUrl+"/deleteRating",{method:"post"}).then((()=>{}))}fetchData(e="json",t){return this.portal._request(this.itemUrl+"/data",{responseType:e,...t})}fetchRating(e){return this.portal._request(this.itemUrl+"/rating",e).then((e=>null!=e.rating?(e.created=new Date(e.created),new S(e)):null))}fetchRelatedItems(e,t){return this.portal._requestToTypedArray(this.itemUrl+"/relatedItems",{query:e,...t},_)}getThumbnailUrl(e){let t=this.thumbnailUrl;return t&&e&&(t+=`&w=${e}`),t}reload(){return this.portal._request(this.itemUrl,{cacheBust:!0}).then((e=>(this.sourceJSON=e,this.read(e),this)))}update(e){return this.id?this.load().then((()=>this.portal._signIn())).then((()=>{const t=e&&e.data,r={method:"post"};r.query=this.createPostQuery();for(const e in r.query)null===r.query[e]&&(r.query[e]="");return r.query.clearEmptyFields=!0,null!=t&&("string"==typeof t?r.query.text=t:"object"==typeof t&&(r.query.text=JSON.stringify(t))),this.portal._request(`${this.userItemUrl}/update`,r).then((()=>this.reload()))})):Promise.reject(new d.a("portal:item-does-not-exist","The item does not exist yet and cannot be updated"))}updateThumbnail(e){return this.id?this.load().then((()=>this.portal._signIn())).then((()=>{const t=e.thumbnail,r=e.filename,n={method:"post"};if("string"==typeof t)Object(p.u)(t)?n.query={data:t}:n.query={url:Object(p.z)(t)},Object(o.k)(r)&&(n.query.filename=r);else{const e=new FormData;Object(o.k)(r)?e.append("file",t,r):e.append("file",t),n.body=e}return this.portal._request(`${this.userItemUrl}/updateThumbnail`,n).then((()=>this.reload()))})):Promise.reject(new d.a("portal:item-does-not-exist","The item does not exist yet and cannot be updated"))}async fetchResources(e={},t){return(await r.e(19).then(r.bind(null,775))).fetchResources(this,e,t)}async addResource(e,t,n){const i=await r.e(19).then(r.bind(null,775));return e.portalItem=this,i.addOrUpdateResource(e,"add",t,n)}async removeResource(e,t){const n=await r.e(19).then(r.bind(null,775));if(e.portalItem&&e.portalItem.itemUrl!==this.itemUrl)throw new d.a("removeresource:portal-item-mismatch","The portal item associated with the provided resource does not match the item");return n.removeResource(this,e,t)}async removeAllResources(e){return(await r.e(19).then(r.bind(null,775))).removeAllResources(this,e)}resourceFromPath(e){return new w({portalItem:this,path:e})}toJSON(){const e=this.extent,t={created:this.created&&this.created.getTime(),description:this.description,extent:e&&[[e.xmin,e.ymin],[e.xmax,e.ymax]],id:this.id,modified:this.modified&&this.modified.getTime(),name:this.name,owner:this.owner,ownerFolder:this.ownerFolder,snippet:this.snippet,tags:this.tags,thumbnail:this.thumbnail,title:this.title,type:this.type,typeKeywords:this.typeKeywords,url:this.url};return Object(i.c)(t)}static fromJSON(e){if(!e)return null;if(e.declaredClass)throw new Error("JSON object is already hydrated");return new _({sourceJSON:e})}_getPostQuery(){const e=this.toJSON();for(const t in e)"tags"===t&&null!==e[t]&&(e[t]=e[t].join(", ")),"typeKeywords"===t&&null!==e[t]&&(e[t]=e[t].join(", ")),"extent"===t&&e[t]&&(e[t]=JSON.stringify(e[t]));return e}};Object(n.a)([Object(l.b)({type:["private","shared","org","public"]})],I.prototype,"access",void 0),Object(n.a)([Object(l.b)()],I.prototype,"accessInformation",void 0),Object(n.a)([Object(l.b)({json:{read:{source:"appProxies"}}})],I.prototype,"applicationProxies",void 0),Object(n.a)([Object(l.b)()],I.prototype,"avgRating",void 0),Object(n.a)([Object(l.b)()],I.prototype,"categories",void 0),Object(n.a)([Object(l.b)({type:Date})],I.prototype,"created",void 0),Object(n.a)([Object(l.b)()],I.prototype,"culture",void 0),Object(n.a)([Object(l.b)()],I.prototype,"description",void 0),Object(n.a)([Object(l.b)({readOnly:!0})],I.prototype,"displayName",null),Object(n.a)([Object(l.b)({type:b.a})],I.prototype,"extent",void 0),Object(n.a)([Object(c.a)("extent")],I.prototype,"readExtent",null),Object(n.a)([Object(l.b)()],I.prototype,"groupCategories",void 0),Object(n.a)([Object(l.b)({readOnly:!0})],I.prototype,"iconUrl",null),Object(n.a)([Object(l.b)()],I.prototype,"id",void 0),Object(n.a)([Object(l.b)({readOnly:!0})],I.prototype,"isLayer",null),Object(n.a)([Object(l.b)()],I.prototype,"itemControl",void 0),Object(n.a)([Object(l.b)({readOnly:!0})],I.prototype,"itemUrl",null),Object(n.a)([Object(l.b)()],I.prototype,"licenseInfo",void 0),Object(n.a)([Object(l.b)({type:Date})],I.prototype,"modified",void 0),Object(n.a)([Object(l.b)()],I.prototype,"name",void 0),Object(n.a)([Object(l.b)()],I.prototype,"numComments",void 0),Object(n.a)([Object(l.b)()],I.prototype,"numRatings",void 0),Object(n.a)([Object(l.b)()],I.prototype,"numViews",void 0),Object(n.a)([Object(l.b)()],I.prototype,"owner",void 0),Object(n.a)([Object(l.b)()],I.prototype,"ownerFolder",void 0),Object(n.a)([Object(l.b)({type:g.a})],I.prototype,"portal",void 0),Object(n.a)([Object(l.b)()],I.prototype,"screenshots",void 0),Object(n.a)([Object(l.b)()],I.prototype,"size",void 0),Object(n.a)([Object(l.b)()],I.prototype,"snippet",void 0),Object(n.a)([Object(l.b)()],I.prototype,"sourceJSON",void 0),Object(n.a)([Object(l.b)()],I.prototype,"tags",void 0),Object(n.a)([Object(l.b)()],I.prototype,"thumbnail",void 0),Object(n.a)([Object(l.b)({readOnly:!0})],I.prototype,"thumbnailUrl",null),Object(n.a)([Object(l.b)()],I.prototype,"title",void 0),Object(n.a)([Object(l.b)()],I.prototype,"type",void 0),Object(n.a)([Object(l.b)()],I.prototype,"typeKeywords",void 0),Object(n.a)([Object(l.b)()],I.prototype,"url",void 0),Object(n.a)([Object(l.b)({readOnly:!0})],I.prototype,"userItemUrl",null),I=_=Object(n.a)([Object(u.a)("esri.portal.PortalItem")],I);var x=I;t.default=x},327:function(e,t,r){"use strict";r.d(t,"a",(function(){return c})),r.d(t,"b",(function(){return v})),r.d(t,"c",(function(){return y})),r.d(t,"d",(function(){return u})),r.d(t,"e",(function(){return s})),r.d(t,"f",(function(){return a})),r.d(t,"g",(function(){return b})),r.d(t,"h",(function(){return d})),r.d(t,"i",(function(){return p})),r.d(t,"j",(function(){return l}));var n=r(108),i=r(102),o=r(109);function a(e){const t=e[0]*e[0]+e[4]*e[4]+e[8]*e[8],r=e[1]*e[1]+e[5]*e[5]+e[9]*e[9],n=e[2]*e[2]+e[6]*e[6]+e[10]*e[10];return Math.sqrt(Math.max(Math.max(t,r),n))}function s(e,t,r){r=r||e;const n=Object(o.g)(e,t);Object(o.v)(r,e[0]-n*t[0],e[1]-n*t[1],e[2]-n*t[2]),Object(o.q)(r,r)}function l(e,t,r){Math.abs(e[0])>Math.abs(e[1])?Object(o.v)(t,0,1,0):Object(o.v)(t,1,0,0),Object(o.f)(r,e,t),Object(o.q)(t,t),Object(o.f)(t,r,e),Object(o.q)(r,r)}function c(e,t){const r=Object(o.o)(e),i=Object(n.c)(e[2]/r),a=Math.atan2(e[1]/r,e[0]/r);return Object(o.v)(t,r,i,a),t}function u(e,t,r){const n=r[0]-t[0],i=r[1]-t[1],o=r[2]-t[2];let a=n*n+i*i+o*o;return a?(a=1/Math.sqrt(a),e[0]=n*a,e[1]=i*a,e[2]=o*a,e):(e[0]=0,e[1]=0,e[2]=0,e)}function d(e,t,r,n=Object(i.e)()){const a=Object(o.o)(e),s=Object(o.o)(t),l=Object(o.g)(e,t)/(a*s);if(l<.9999999999999999){const i=Math.acos(l),c=((1-r)*a+r*s)/Math.sin(i),u=c/a*Math.sin((1-r)*i),d=c/s*Math.sin(r*i);return Object(o.d)(O,e,u),Object(o.d)(j,t,d),Object(o.e)(n,O,j)}return Object(o.h)(n,e,t,r)}function p(e,t,r,n=Object(i.e)(),a=Object(i.e)()){const s=Object(o.o)(e),l=Object(o.o)(t),c=Object(o.g)(e,t)/(s*l);if(c<.9999999999999999){const i=Math.acos(c),u=Math.sin(i),d=Math.sin(r*i),p=Math.sin((1-r)*i),h=(1-r)*s+r*l;{const r=h/u,i=r/l*d;Object(o.d)(O,e,r/s*p),Object(o.d)(j,t,i),Object(o.e)(n,O,j)}{const n=1/s*(-Math.cos((1-r)*i)*i*h+p*(-s+l));Object(o.d)(O,e,n);const c=1/l*(Math.cos(r*i)*i*h+d*(-s+l));Object(o.d)(j,t,c),Object(o.e)(a,O,j),Object(o.d)(a,a,1/u)}return a}return Object(o.h)(n,e,t,r),Object(o.i)(a,t,e),Object(o.q)(a,a),a}class h{constructor(e,t){this.min=e,this.max=t,this.range=t-e}ndiff(e,t=0){return Math.ceil((e-t)/this.range)*this.range+t}_normalize(e,t,r,n=0,i=!1){return(r-=n)<e?r+=this.ndiff(e-r):r>t&&(r-=this.ndiff(r-t)),i&&r===t&&(r=e),r+n}normalize(e,t=0,r=!1){return this._normalize(this.min,this.max,e,t,r)}clamp(e,t=0){return Object(n.d)(e-t,this.min,this.max)+t}monotonic(e,t,r){return e<t?t:t+this.ndiff(e-t,r)}minimalMonotonic(e,t,r){return this._normalize(e,e+this.range,t,r)}center(e,t,r){return t=this.monotonic(e,t,r),this.normalize((e+t)/2,r)}diff(e,t,r){return this.monotonic(e,t,r)-e}shortestSignedDiff(e,t){e=this.normalize(e);const r=(t=this.normalize(t))-e,n=t<e?this.minimalMonotonic(e,t)-e:t-this.minimalMonotonic(t,e);return Math.abs(r)<Math.abs(n)?r:n}contains(e,t,r){return t=this.minimalMonotonic(e,t),(r=this.minimalMonotonic(e,r))>e&&r<t}}function b(e,t,r,n){Object(o.i)(m,t,e),Object(o.i)(f,r,e),Object(o.f)(n,m,f),Object(o.q)(n,n),n[3]=-Object(o.g)(e,n)}const m=Object(i.e)(),f=Object(i.e)();function g(e){for(const t in e){const r=e[t];r instanceof Function&&(e[t]=r.bind(e))}return e}g(new h(0,2*Math.PI));const y=g(new h(-Math.PI,Math.PI)),v=g(new h(0,360)),O=(Object(i.e)(),Object(i.e)()),j=Object(i.e)()},406:function(e,t,r){"use strict";var n=r(121);class i{constructor(e,t,r){this.name=e,this.details=r,this.message=void 0,this instanceof i&&(this.message=t&&function(e,t){return e.replace(/\$\{([^\s\:\}]*)(?:\:([^\s\:\}]+))?\}/g,(function(e,r){if(""===r)return"$";const i=Object(n.b)(r,t),o=null==i?"":i;if(void 0===o)throw new Error(`could not find key "${r}" in template`);return o.toString()}))}(t,r)||"")}toString(){return"["+this.name+"]: "+this.message}}t.a=i},452:function(e,t,r){"use strict";var n=r(155);var i,o=(i=n.a,{setTimeout:(e,t)=>{const r=i.setTimeout(e,t);return{remove:()=>i.clearTimeout(r)}}});t.a=o},496:function(e,t,r){"use strict";var n=r(81),i=r(84),o=r(83),a=r(105),s=r(113);let l=class extends a.a{constructor(e){super(e),this._handles=new s.a,this.root=null}initialize(){this._handles.add(this.rootCollectionNames.map((e=>this.watch("root."+e,(()=>this.updateCollections()),!0)))),this.updateCollections()}destroy(){this.root=null,this.refresh(),this._handles.destroy(),this._handles=null}updateCollections(){this._collections=this.rootCollectionNames.map((e=>this.get("root."+e))).filter((e=>null!=e)),this.refresh()}refresh(){const e=this._handles;e.remove("collections");const t=new Array;let r=0;for(const n of this._collections)r=this._processCollection(t,r,n);this.splice(r,this.length);for(const n of t)e.add(n.on("after-changes",(()=>this.refresh())),"collections")}_createNewInstance(e){return new a.a(e)}_processCollection(e,t,r){return r?(e.push(r),r.forEach((r=>{if(r){if(!this.itemFilterFunction||this.itemFilterFunction(r)){const e=this.indexOf(r,t);e>=0?e!==t&&this.reorder(r,t):this.add(r,t),++t}this.getChildrenFunction&&(t=this._processCollection(e,t,this.getChildrenFunction(r)))}})),t):t}};Object(n.a)([Object(i.b)()],l.prototype,"rootCollectionNames",void 0),Object(n.a)([Object(i.b)()],l.prototype,"root",void 0),Object(n.a)([Object(i.b)()],l.prototype,"getChildrenFunction",void 0),Object(n.a)([Object(i.b)()],l.prototype,"itemFilterFunction",void 0),l=Object(n.a)([Object(o.a)("esri.core.CollectionFlattener")],l);var c=l;t.a=c},498:function(e,t,r){"use strict";r.d(t,"a",(function(){return a}));var n=r(81),i=(r(79),r(80),r(87),r(84)),o=r(83);r(82),r(85),r(86);const a=e=>{let t=class extends e{constructor(...e){super(...e),this.goToOverride=null,this.view=null}callGoTo(e){const{view:t}=this;return this.goToOverride?this.goToOverride(t,e):t.goTo(e.target,e.options)}};return Object(n.a)([Object(i.b)()],t.prototype,"goToOverride",void 0),Object(n.a)([Object(i.b)()],t.prototype,"view",void 0),t=Object(n.a)([Object(o.a)("esri.widgets.support.GoTo")],t),t}},542:function(e,t,r){"use strict";var n=r(81),i=(r(79),r(80),r(87),r(84)),o=r(83),a=(r(82),r(85),r(86),r(89)),s=r(98);let l=class extends a.a{constructor(e){super(e),this.geometries=null,this.outSpatialReference=null,this.transformation=null,this.transformForward=null}toJSON(){const e=this.geometries.map((function(e){return e.toJSON()})),t=this.geometries[0],r={};return r.outSR=this.outSpatialReference.wkid||JSON.stringify(this.outSpatialReference.toJSON()),r.inSR=t.spatialReference.wkid||JSON.stringify(t.spatialReference.toJSON()),r.geometries=JSON.stringify({geometryType:Object(s.c)(t),geometries:e}),this.transformation&&(r.transformation=this.transformation.wkid||JSON.stringify(this.transformation)),null!=this.transformForward&&(r.transformForward=this.transformForward),r}};Object(n.a)([Object(i.b)()],l.prototype,"geometries",void 0),Object(n.a)([Object(i.b)({json:{read:{source:"outSR"}}})],l.prototype,"outSpatialReference",void 0),Object(n.a)([Object(i.b)()],l.prototype,"transformation",void 0),Object(n.a)([Object(i.b)()],l.prototype,"transformForward",void 0),l=Object(n.a)([Object(o.a)("esri.tasks.support.ProjectParameters")],l);var c=l;t.a=c},556:function(e,t,r){"use strict";var n,i=r(81),o=(r(79),r(88)),a=(r(80),r(84)),s=r(114),l=r(83),c=(r(82),r(85),r(86),r(89)),u=r(98),d=r(99),p=r(87),h=r(96),b=r(94),m=r(111),f=r(108),g=r(327);let y=n=class extends c.a{constructor(...e){super(...e),this.position=new m.a([0,0,0]),this.heading=0,this.tilt=0,this.fov=55}normalizeCtorArgs(e,t,r,n){if(e&&"object"==typeof e&&("x"in e||Array.isArray(e))){const i={position:e};return null!=t&&(i.heading=t),null!=r&&(i.tilt=r),null!=n&&(i.fov=n),i}return e}writePosition(e,t,r,n){const i=e.clone();i.x=Object(p.i)(e.x||0),i.y=Object(p.i)(e.y||0),i.z=e.hasZ?Object(p.i)(e.z||0):e.z,t[r]=i.write(null,n)}readPosition(e,t){const r=new m.a;return r.read(e,t),r.x=Object(p.i)(r.x||0),r.y=Object(p.i)(r.y||0),r.z=r.hasZ?Object(p.i)(r.z||0):r.z,r}equals(e){return!!e&&this.tilt===e.tilt&&this.heading===e.heading&&this.fov===e.fov&&this.position.equals(e.position)}clone(){return new n({position:this.position.clone(),heading:this.heading,tilt:this.tilt,fov:this.fov})}};Object(i.a)([Object(a.b)({type:m.a,json:{write:{isRequired:!0}}})],y.prototype,"position",void 0),Object(i.a)([Object(b.a)("position")],y.prototype,"writePosition",null),Object(i.a)([Object(h.a)("position")],y.prototype,"readPosition",null),Object(i.a)([Object(a.b)({type:Number,nonNullable:!0,json:{write:{isRequired:!0}}}),Object(s.a)((e=>g.b.normalize(Object(p.i)(e))))],y.prototype,"heading",void 0),Object(i.a)([Object(a.b)({type:Number,nonNullable:!0,json:{write:{isRequired:!0}}}),Object(s.a)((e=>Object(f.d)(Object(p.i)(e),-180,180)))],y.prototype,"tilt",void 0),Object(i.a)([Object(a.b)({type:Number,nonNullable:!0,json:{read:!1,write:!1}})],y.prototype,"fov",void 0),y=n=Object(i.a)([Object(l.a)("esri.Camera")],y);var v,O=y;let j=v=class extends c.a{constructor(e){super(e),this.rotation=0,this.scale=0,this.targetGeometry=null,this.camera=null}castRotation(e){return(e%=360)<0&&(e+=360),e}clone(){return new v({rotation:this.rotation,scale:this.scale,targetGeometry:Object(o.k)(this.targetGeometry)?this.targetGeometry.clone():null,camera:Object(o.k)(this.camera)?this.camera.clone():null})}};function w(){return{enabled:!this.camera}}Object(i.a)([Object(a.b)({type:Number,json:{write:!0,origins:{"web-map":{default:0,write:!0},"web-scene":{write:{overridePolicy:w}}}}})],j.prototype,"rotation",void 0),Object(i.a)([Object(s.a)("rotation")],j.prototype,"castRotation",null),Object(i.a)([Object(a.b)({type:Number,json:{write:!0,origins:{"web-map":{default:0,write:!0},"web-scene":{write:{overridePolicy:w}}}}})],j.prototype,"scale",void 0),Object(i.a)([Object(a.b)({types:d.a,json:{read:u.a,write:!0,origins:{"web-scene":{read:u.a,write:{overridePolicy:w}}}}})],j.prototype,"targetGeometry",void 0),Object(i.a)([Object(a.b)({type:O,json:{write:!0}})],j.prototype,"camera",void 0),j=v=Object(i.a)([Object(l.a)("esri.Viewpoint")],j);var k=j;t.a=k},592:function(e,t,r){"use strict";r.d(t,"a",(function(){return i}));var n=r(91);class i{constructor(e,t,r=""){this.major=e,this.minor=t,this._context=r}lessThan(e,t){return this.major<e||e===this.major&&this.minor<t}since(e,t){return!this.lessThan(e,t)}validate(e){if(this.major!==e.major){const t=this._context&&this._context+":",r=this._context&&this._context+" ";throw new n.a(t+"unsupported-version",`Required major ${r}version is '${this.major}', but got '\${version.major}.\${version.minor}'`,{version:e})}}clone(){return new i(this.major,this.minor,this._context)}static parse(e,t=""){const[r,o]=e.split("."),a=/^\s*\d+\s*$/;if(!r||!r.match||!r.match(a))throw new n.a((t&&t+":")+"invalid-version","Expected major version to be a number, but got '${version}'",{version:e});if(!o||!o.match||!o.match(a))throw new n.a((t&&t+":")+"invalid-version","Expected minor version to be a number, but got '${version}'",{version:e});const s=parseInt(r,10),l=parseInt(o,10);return new i(s,l,t)}}},607:function(e,t,r){"use strict";r.d(t,"a",(function(){return b})),r.d(t,"b",(function(){return u})),r.d(t,"c",(function(){return d})),r.d(t,"d",(function(){return p})),r.d(t,"e",(function(){return h})),r.d(t,"f",(function(){return m})),r.d(t,"g",(function(){return f}));var n=r(80),i=r(87),o=r(82),a=r(105),s=r(591),l=r(540);const c=n.a.getLogger("esri.support.basemapUtils");function u(){return{}}function d(e){for(const t in e){const r=e[t];!1===(null==r?void 0:r.destroyed)&&r.destroy(),delete e[t]}}function p(e,t){var r;let n;if("string"==typeof e){if(!(e in s.a)){const t=Object.keys(s.a).map((e=>`"${e}"`)).join(", ");return c.warn(`Unable to find basemap definition for: ${e}. Try one of these: ${t}`),null}t&&(n=t[e]),n||(n=l.default.fromId(e),t&&(t[e]=n))}else n=Object(i.m)(l.default,e);return null!=(r=n)&&r.destroyed&&(c.warn("The provided basemap is already destroyed",{basemap:n}),n=null),n}function h(e){let t=null;const r=v(e),n=!r.baseLayers.length;for(const i in s.a){const e=_(r,w(s.a[i]),{mustMatchReferences:n});if("equal"===e){t=i;break}"base-layers-equal"===e&&(t=i)}return t}function b(e,t){return e===t||"equal"===_(v(e),v(t),{mustMatchReferences:!0})}function m(e){return!(null==e||!e.baseLayers.concat(e.referenceLayers).some(f))}function f(e){if(y(e.url))return!0;if("vector-tile"===e.type)for(const t in e.sourceNameToSource){const r=e.sourceNameToSource[t];if(y(null==r?void 0:r.sourceUrl))return!0}return!1}const g=/^(basemaps|ibasemaps).*-api\.arcgis\.com$/i;function y(e){if(!e)return!1;const t=new o.a(Object(o.z)(e));return g.test(t.authority)}function v(e){return e?!e.loaded&&e.resourceInfo?w(e.resourceInfo.data):{baseLayers:O(e.baseLayers),referenceLayers:O(e.referenceLayers)}:null}function O(e){return(a.a.isCollection(e)?e.toArray():e).map(j)}function j(e){return{type:e.type,url:x("urlTemplate"in e&&e.urlTemplate||e.url||"styleUrl"in e&&e.styleUrl),minScale:"minScale"in e&&null!=e.minScale?e.minScale:0,maxScale:"maxScale"in e&&null!=e.maxScale?e.maxScale:0,opacity:null!=e.opacity?e.opacity:1,visible:null==e.visible||!!e.visible}}function w(e){return e?{baseLayers:k(e.baseMapLayers.filter((e=>!e.isReference))),referenceLayers:k(e.baseMapLayers.filter((e=>e.isReference)))}:null}function k(e){return e.map((e=>function(e){let t;switch(e.layerType){case"VectorTileLayer":t="vector-tile";break;case"ArcGISTiledMapServiceLayer":t="tile";break;default:t="unknown"}return{type:t,url:x(e.templateUrl||e.urlTemplate||e.styleUrl||e.url),minScale:null!=e.minScale?e.minScale:0,maxScale:null!=e.maxScale?e.maxScale:0,opacity:null!=e.opacity?e.opacity:1,visible:null==e.visibility||!!e.visibility}}(e)))}function _(e,t,r){return null!=e!=(null!=t)?"not-equal":e?S(e.baseLayers,t.baseLayers)?S(e.referenceLayers,t.referenceLayers)?"equal":r.mustMatchReferences?"not-equal":"base-layers-equal":"not-equal":"equal"}function S(e,t){if(e.length!==t.length)return!1;for(let r=0;r<e.length;r++)if(!I(e[r],t[r]))return!1;return!0}function I(e,t){return e.type===t.type&&e.url===t.url&&e.minScale===t.minScale&&e.maxScale===t.maxScale&&e.visible===t.visible&&e.opacity===t.opacity}function x(e){return e?Object(o.C)(e).replace(/^\s*https?:/i,"").toLowerCase():""}},621:function(e,t,r){"use strict";function n(e){return e&&"getAtOrigin"in e&&"originOf"in e}r.d(t,"a",(function(){return n}))},654:function(e,t,r){"use strict";function n(e,t){if(!i(e,t)){const r=e.typeKeywords;r?r.push(t):e.typeKeywords=[t]}}function i(e,t){return!!e.typeKeywords&&e.typeKeywords.indexOf(t)>-1}function o(e,t){const r=e.typeKeywords;if(r){const e=r.indexOf(t);e>-1&&r.splice(e,1)}}r.d(t,"a",(function(){return n})),r.d(t,"b",(function(){return i})),r.d(t,"c",(function(){return o}))},671:function(e,t,r){"use strict";r.d(t,"a",(function(){return b}));var n=r(81),i=(r(79),r(80)),o=(r(87),r(84)),a=r(83),s=(r(82),r(85),r(86),r(92)),l=r(105),c=r(290),u=r(215);function d(e){return e&&"group"===e.type}function p(e,t,r){let n,i;if(e)for(let o=0,a=e.length;o<a;o++){if(n=e.getItemAt(o),n[t]===r)return n;if(d(n)&&(i=p(n.layers,t,r),i))return i}}const h=i.a.getLogger("esri.support.LayersMixin"),b=e=>{let t=class extends e{constructor(...e){super(...e),this.layers=new l.a;const t=e=>{e.parent=this,this.layerAdded(e),"elevation"!==e.type&&"base-elevation"!==e.type||h.error(`Layer 'title:${e.title}, id:${e.id}' of type '${e.type}' is not supported as an operational layer and will therefore be ignored.`)},r=e=>{e.parent=null,this.layerRemoved(e)};this.layers.on("before-add",(e=>(e=>{e.parent&&"remove"in e.parent&&e.parent.remove(e)})(e.item))),this.layers.on("after-add",(e=>t(e.item))),this.layers.on("after-remove",(e=>r(e.item)))}destroy(){const e=this.layers.removeAll();for(const t of e)this.layerRemoved(t),t.destroy();this.layers.destroy()}set layers(e){this._set("layers",Object(c.b)(e,this._get("layers")))}add(e,t){const r=this.layers;t=r.getNextIndex(t),e instanceof u.a?e.parent===this?this.reorder(e,t):r.add(e,t):Object(s.o)(e)?e.then((e=>{this.destroyed||this.add(e,t)})):h.error("#add()","The item being added is not a Layer or a Promise that resolves to a Layer.")}addMany(e,t){const r=this.layers;t=r.getNextIndex(t),e.slice().forEach((e=>{e.parent!==this?(r.add(e,t),t+=1):this.reorder(e,t)}))}findLayerById(e){return p(this.layers,"id",e)}findLayerByUid(e){return p(this.layers,"uid",e)}remove(e){return this.layers.remove(e)}removeMany(e){return this.layers.removeMany(e)}removeAll(){return this.layers.removeAll()}reorder(e,t){return this.layers.reorder(e,t)}layerAdded(e){}layerRemoved(e){}};return Object(n.a)([Object(o.b)()],t.prototype,"layers",null),t=Object(n.a)([Object(a.a)("esri.support.LayersMixin")],t),t}},672:function(e,t,r){"use strict";r.d(t,"a",(function(){return h}));var n=r(81),i=(r(79),r(80)),o=(r(87),r(84)),a=r(83),s=(r(82),r(85),r(86),r(105)),l=r(290);const c="esri.support.TablesMixin",u=i.a.getLogger(c);function d(e){return e&&"group"===e.type}function p(e,t,r){if(e)for(let n=0,i=e.length;n<i;n++){const i=e.getItemAt(n);if(i[t]===r)return i;if(d(i)){const e=p(i.tables,t,r);if(e)return e}}}const h=e=>{let t=class extends e{constructor(...e){super(...e),this.tables=new s.a,this.tables.on("after-add",(e=>{const t=e.item;t.parent&&t.parent!==this&&"tables"in t.parent&&t.parent.tables.remove(t),t.parent=this,"feature"!==t.type&&u.error(`Layer 'title:${t.title}, id:${t.id}' of type '${t.type}' is not supported as a table and will therefore be ignored.`)})),this.tables.on("after-remove",(e=>{e.item.parent=null}))}destroy(){const e=this.tables.removeAll();for(const t of e)t.destroy();this.tables.destroy()}set tables(e){this._set("tables",Object(l.b)(e,this._get("tables")))}findTableById(e){return p(this.tables,"id",e)}findTableByUid(e){return p(this.tables,"uid",e)}};return Object(n.a)([Object(o.b)()],t.prototype,"tables",null),t=Object(n.a)([Object(a.a)(c)],t),t}},673:function(e,t,r){"use strict";r.d(t,"a",(function(){return i}));var n=r(621);function i(e){e&&e.writtenProperties&&e.writtenProperties.forEach((e=>{const t=e.target;e.newOrigin&&e.oldOrigin!==e.newOrigin&&Object(n.a)(t)&&t.updateOrigin(e.propName,e.newOrigin)}))}},767:function(e,t,r){"use strict";var n,i=r(81),o=(r(79),r(90)),a=(r(80),r(87),r(84)),s=r(83),l=(r(82),r(85),r(86),r(89)),c=r(107);let u=n=class extends l.a{constructor(e){super(e),this.color=new c.a([0,0,0,1])}clone(){return new n(Object(o.a)({color:this.color}))}};Object(i.a)([Object(a.b)({type:c.a,json:{write:!0}})],u.prototype,"color",void 0),u=n=Object(i.a)([Object(s.a)("esri.webmap.background.ColorBackground")],u);var d=u;t.a=d},79:function(e,t,r){"use strict";var n,i,o=r(155);let a;var s,l;function c(e){return"function"==typeof a[e]?a[e]=a[e](o.a):a[e]}a=null!=(n=o.a.dojoConfig)&&n.has||null!=(i=o.a.esriConfig)&&i.has?{...null==(s=o.a.dojoConfig)?void 0:s.has,...null==(l=o.a.esriConfig)?void 0:l.has}:{},c.add=(e,t,r,n)=>((n||void 0===a[e])&&(a[e]=t),r&&c(e)),c.cache=a,c.add("esri-deprecation-warnings",!0),(()=>{c.add("host-webworker",void 0!==o.a.WorkerGlobalScope&&self instanceof o.a.WorkerGlobalScope);const e="undefined"!=typeof window&&"undefined"!=typeof location&&"undefined"!=typeof document&&window.location===location&&window.document===document;if(c.add("host-browser",e),c.add("host-node","object"==typeof o.a.process&&o.a.process.versions&&o.a.process.versions.node&&o.a.process.versions.v8),c.add("dom",e),c("host-browser")){const e=navigator,t=e.userAgent,r=e.appVersion,n=parseFloat(r);if(c.add("wp",parseFloat(t.split("Windows Phone")[1])||void 0),c.add("msapp",parseFloat(t.split("MSAppHost/")[1])||void 0),c.add("khtml",r.indexOf("Konqueror")>=0?n:void 0),c.add("edge",parseFloat(t.split("Edge/")[1])||void 0),c.add("opr",parseFloat(t.split("OPR/")[1])||void 0),c.add("webkit",!c("wp")&&!c("edge")&&parseFloat(t.split("WebKit/")[1])||void 0),c.add("chrome",!c("edge")&&!c("opr")&&parseFloat(t.split("Chrome/")[1])||void 0),c.add("android",!c("wp")&&parseFloat(t.split("Android ")[1])||void 0),c.add("safari",!(r.indexOf("Safari")>=0)||c("wp")||c("chrome")||c("android")||c("edge")||c("opr")?void 0:parseFloat(r.split("Version/")[1])),c.add("mac",r.indexOf("Macintosh")>=0),c.add("quirks","BackCompat"===document.compatMode),!c("wp")&&t.match(/(iPhone|iPod|iPad)/)){const e=RegExp.$1.replace(/P/,"p"),r=t.match(/OS ([\d_]+)/)?RegExp.$1:"1",n=parseFloat(r.replace(/_/,".").replace(/_/g,""));c.add(e,n),c.add("ios",n)}c.add("trident",parseFloat(r.split("Trident/")[1])||void 0),c.add("svg","undefined"!=typeof SVGAngle),c("webkit")||(t.indexOf("Opera")>=0&&c.add("opera",n>=9.8&&parseFloat(t.split("Version/")[1])||n),!(t.indexOf("Gecko")>=0)||c("wp")||c("khtml")||c("trident")||c("edge")||c.add("mozilla",n),c("mozilla")&&c.add("ff",parseFloat(t.split("Firefox/")[1]||t.split("Minefield/")[1])||void 0))}})(),(()=>{if(o.a.navigator){const e=navigator.userAgent,t=e.match(/Android|webOS|iPhone|iPad|iPod|BlackBerry|Opera Mini|IEMobile/i),r=e.match(/iPhone/i);t&&c.add("esri-mobile",t),r&&c.add("esri-iPhone",r),c.add("esri-geolocation",!!navigator.geolocation)}c.add("esri-canvas-svg-support",!c("trident")),c.add("esri-wasm","WebAssembly"in o.a),c.add("esri-shared-array-buffer",(()=>{const e="SharedArrayBuffer"in o.a,t=!1===o.a.crossOriginIsolated;return e&&!t})),c.add("esri-atomics","Atomics"in o.a),c.add("esri-workers","Worker"in o.a),c.add("esri-text-decoder","TextDecoder"in o.a),c.add("esri-text-encoder","TextEncoder"in o.a),c.add("featurelayer-snapshot-enabled",!0),c.add("featurelayer-snapshot-point-min-threshold",8e4),c.add("featurelayer-snapshot-point-max-threshold",4e5),c.add("featurelayer-snapshot-point-coverage",.1),c.add("featurelayer-advanced-symbols",!1),c.add("featurelayer-pbf",!0),c.add("featurelayer-pbf-statistics",!1),c.add("feature-layers-workers",!0),c.add("mapview-transitions-duration",200),c.add("mapserver-pbf-enabled",!1),c("host-webworker")||c("host-browser")&&(c.add("csp-restrictions",(()=>{try{new Function}catch{return!0}return!1})),c.add("esri-image-decode",(()=>{if("decode"in new Image){const e=new Image;return e.src='data:image/svg+xml;charset=UTF-8,<svg version="1.1" xmlns="http://www.w3.org/2000/svg"></svg>',void e.decode().then((()=>{c.add("esri-image-decode",!0,!0,!0)})).catch((()=>{c.add("esri-image-decode",!1,!0,!0)}))}return!1})),c.add("esri-url-encodes-apostrophe",(()=>{const e=o.a.document.createElement("a");return e.href="?'",e.href.indexOf("?%27")>-1})),c.add("vectortilelayer-max-buffers",(()=>c("ff")?160:Number.POSITIVE_INFINITY)))})(),t.a=c},80:function(e,t,r){"use strict";r(79);var n=r(156),i=r(88),o=r(140);const a={info:0,warn:1,error:2,none:3};class s{constructor(e){this.level=null,this._module="",this._parent=null,this.writer=null,this._loggedMessages={error:new Map,warn:new Map,info:new Map},null!=e.level&&(this.level=e.level),null!=e.writer&&(this.writer=e.writer),this._module=e.module,s._loggers[this.module]=this;const t=this.module.lastIndexOf(".");-1!==t&&(this._parent=s.getLogger(this.module.slice(0,t)))}get module(){return this._module}get parent(){return this._parent}error(...e){this._log("error","always",...e)}warn(...e){this._log("warn","always",...e)}info(...e){this._log("info","always",...e)}errorOnce(...e){this._log("error","once",...e)}warnOnce(...e){this._log("warn","once",...e)}infoOnce(...e){this._log("info","once",...e)}errorOncePerTick(...e){this._log("error","oncePerTick",...e)}warnOncePerTick(...e){this._log("warn","oncePerTick",...e)}infoOncePerTick(...e){this._log("info","oncePerTick",...e)}get test(){const e=this;return{loggedMessages:e._loggedMessages,clearLoggedWarnings:()=>e._loggedMessages.warn.clear()}}static get testSingleton(){return{resetLoggers(e={}){const t=s._loggers;return s._loggers=e,t},set throttlingDisabled(e){s._throttlingDisabled=e}}}static getLogger(e){let t=s._loggers[e];return t||(t=new s({module:e})),t}_log(e,t,...r){if(this._matchLevel(e)){if("always"!==t&&!s._throttlingDisabled){const n=this._argsToKey(r),i=this._loggedMessages[e].get(n);if("once"===t&&null!=i||"oncePerTick"===t&&i&&i>=s._tickCounter)return;this._loggedMessages[e].set(n,s._tickCounter),s._scheduleTickCounterIncrement()}for(const t of n.a.log.interceptors)if(t(e,this.module,...r))return;this._inheritedWriter()(e,this.module,...r)}}_parentWithMember(e,t){let r=this;for(;Object(i.k)(r);){const t=r[e];if(Object(i.k)(t))return t;r=r.parent}return t}_inheritedWriter(){return this._parentWithMember("writer",this._consoleWriter)}_consoleWriter(e,t,...r){console[e](`[${t}]`,...r)}_matchLevel(e){const t=n.a.log.level?n.a.log.level:"warn";return a[this._parentWithMember("level",t)]<=a[e]}_argsToKey(...e){return Object(o.b)(JSON.stringify(e,((e,t)=>"object"!=typeof t||Array.isArray(t)?t:"[Object]")))}static _scheduleTickCounterIncrement(){s._tickCounterScheduled||(s._tickCounterScheduled=!0,Promise.resolve().then((()=>{s._tickCounter++,s._tickCounterScheduled=!1})))}}s._loggers={},s._tickCounter=0,s._tickCounterScheduled=!1,s._throttlingDisabled=!1,t.a=s},804:function(e,t,r){"use strict";var n,i=r(81),o=(r(79),r(80),r(87),r(84)),a=r(83),s=(r(82),r(85),r(86),r(89));let l=n=class extends s.a{constructor(){super(...arguments),this.url=""}destroy(){this.url=""}clone(){return new n({url:this.url})}};Object(i.a)([Object(o.b)({type:String,json:{write:{isRequired:!0}}})],l.prototype,"url",void 0),l=n=Object(i.a)([Object(a.a)("esri.webdoc.support.Thumbnail")],l);var c=l;t.a=c},861:function(e,t,r){"use strict";var n,i=r(81),o=(r(79),r(80)),a=r(84),s=r(114),l=r(83),c=(r(82),r(85),r(86),r(95)),u=r(128),d=r(540),p=r(177),h=r(90),b=r(87),m=r(94),f=r(91),g=r(92),y=r(89),v=r(105),O=r(107),j=r(480),w=r(290),k=r(182),_=r(433),S=r(100);let I=n=class extends y.a{constructor(e){super(e),this.type="none"}clone(){return new n({type:this.type})}};var x;Object(i.a)([Object(S.a)({none:"none",stayAbove:"stay-above"})],I.prototype,"type",void 0),I=n=Object(i.a)([Object(l.a)("esri.ground.NavigationConstraint")],I);const T=o.a.getLogger("esri.Ground");let E=x=class extends(Object(y.b)(k.a)){constructor(e){super(e),this.opacity=1,this.surfaceColor=null,this.navigationConstraint=null,this.layers=new v.a;const t=e=>{e.parent&&e.parent!==this&&"remove"in e.parent&&e.parent.remove(e),e.parent=this,"elevation"!==e.type&&"base-elevation"!==e.type&&T.error(`Layer '${e.title}, id:${e.id}' of type '${e.type}' is not supported as a ground layer and will therefore be ignored. Only layers of type 'elevation' are supported.`)};this.layers.on("after-add",(e=>t(e.item))),this.layers.on("after-remove",(e=>(e=>{e.parent=null})(e.item)))}initialize(){this.when().catch((e=>{T.error("#load()","Failed to load ground",e)})),this.resourceInfo&&this.read(this.resourceInfo.data,this.resourceInfo.context)}destroy(){const e=this.layers.removeAll();for(const t of e)t.destroy();this.layers.destroy()}normalizeCtorArgs(e){return e&&"resourceInfo"in e&&(this._set("resourceInfo",e.resourceInfo),delete(e={...e}).resourceInfo),e}set layers(e){this._set("layers",Object(w.b)(e,this._get("layers")))}writeLayers(e,t,r,n){const i=[];e?(n={...n,layerContainerType:"ground"},e.forEach((e=>{if("write"in e){const t={};Object(p.b)(e)().write(t,n)&&i.push(t)}else n&&n.messages&&n.messages.push(new f.a("layer:unsupported",`Layers (${e.title}, ${e.id}) of type '${e.declaredClass}' cannot be persisted in the ground`,{layer:e}))})),t.layers=i):t.layers=i}load(e){return this.addResolvingPromise(this._loadFromSource(e)),Promise.resolve(this)}loadAll(){return Object(_.a)(this,(e=>{e(this.layers)}))}async queryElevation(e,t){await this.load({signal:null==t?void 0:t.signal});const{ElevationQuery:n}=await Promise.all([r.e(10),r.e(44)]).then(r.bind(null,1114));Object(g.u)(t);const i=new n,o=this.layers.filter(A).toArray();return i.queryAll(o,e,t)}async createElevationSampler(e,t){await this.load({signal:null==t?void 0:t.signal});const{ElevationQuery:n}=await Promise.all([r.e(10),r.e(44)]).then(r.bind(null,1114));Object(g.u)(t);const i=new n,o=this.layers.filter(A).toArray();return i.createSamplerAll(o,e,t)}clone(){const e={opacity:this.opacity,surfaceColor:Object(h.a)(this.surfaceColor),navigationConstraint:Object(h.a)(this.navigationConstraint),layers:this.layers.slice()};return this.loaded&&(e.loadStatus="loaded"),new x({resourceInfo:this.resourceInfo}).set(e)}read(e,t){this.resourceInfo||this._set("resourceInfo",{data:e,context:t}),super.read(e,t)}_loadFromSource(e){const t=this.resourceInfo;return t?this._loadLayersFromJSON(t.data,t.context,e):Promise.resolve(null)}_loadLayersFromJSON(e,t,n){const i=t&&t.origin||"web-scene",o=t&&t.portal||null,a=t&&t.url||null;return r.e(45).then(r.bind(null,797)).then((({populateOperationalLayers:t})=>{Object(g.u)(n);const r=[];if(e.layers&&Array.isArray(e.layers)){const n={context:{origin:i,url:a,portal:o,layerContainerType:"ground"},defaultLayerType:"ArcGISTiledElevationServiceLayer"};r.push(t(this.layers,e.layers,n))}return Object(g.j)(r)})).then((()=>{}))}};function A(e){return"elevation"===e.type||function(e){return e&&"createElevationSampler"in e}(e)}Object(i.a)([Object(a.b)({json:{read:!1}})],E.prototype,"layers",null),Object(i.a)([Object(m.a)("layers")],E.prototype,"writeLayers",null),Object(i.a)([Object(a.b)({readOnly:!0})],E.prototype,"resourceInfo",void 0),Object(i.a)([Object(a.b)({type:Number,nonNullable:!0,range:{min:0,max:1},json:{type:b.a,read:{reader:j.b,source:"transparency"},write:{writer:(e,t)=>{t.transparency=Object(j.a)(e)},target:"transparency"}}})],E.prototype,"opacity",void 0),Object(i.a)([Object(a.b)({type:O.a,json:{type:[b.a],write:(e,t)=>{t.surfaceColor=e.toJSON().slice(0,3)}}})],E.prototype,"surfaceColor",void 0),Object(i.a)([Object(a.b)({type:I,json:{write:!0}})],E.prototype,"navigationConstraint",void 0),E=x=Object(i.a)([Object(l.a)("esri.Ground")],E);var M=E,C=r(496),N=r(607);const P=o.a.getLogger("esri.support.groundUtils"),D={"world-elevation":{id:"worldElevation",url:"//elevation3d.arcgis.com/arcgis/rest/services/WorldElevation3D/Terrain3D/ImageServer",layerType:"ArcGISTiledElevationServiceLayer"},"world-topobathymetry":{id:"worldTopoBathymetry",url:"//elevation3d.arcgis.com/arcgis/rest/services/WorldElevation3D/TopoBathy3D/ImageServer",layerType:"ArcGISTiledElevationServiceLayer"}};var B=r(671),F=r(672);const L=o.a.getLogger("esri.Map");let R=class extends(Object(F.a)(Object(B.a)(u.a.EventedMixin(c.a)))){constructor(e){super(e),this.allLayers=new C.a({root:this,rootCollectionNames:["basemap.baseLayers","ground.layers","layers","basemap.referenceLayers"],getChildrenFunction:e=>e.layers}),this.allTables=this._createTablesFlattener(this),this.basemap=null,this.ground=new M,this._basemapCache=Object(N.b)()}destroy(){var e,t;this.allLayers.destroy(),this.allTables.destroy(),null==(e=this.ground)||e.destroy(),null==(t=this.basemap)||t.destroy(),Object(N.c)(this._basemapCache),this._basemapCache=null}castBasemap(e){return Object(N.d)(e,this._basemapCache)}castGround(e){return function(e){let t;"string"==typeof e?e in D?t=new M({resourceInfo:{data:{layers:[D[e]]}}}):P.warn(`Unable to find ground definition for: ${e}. Try "world-elevation"`):t=Object(b.m)(M,e);return t}(e)||(L.error("Map.ground may not be set to null or undefined"),this._get("ground"))}findLayerById(e){return this.allLayers.find((t=>t.id===e))}findTableById(e){return this.allTables.find((t=>t.id===e))}_createTablesFlattener(e){return new C.a({root:e,rootCollectionNames:["tables","layers"],getChildrenFunction:e=>e&&"group"===e.type?this._createTablesFlattener(e):null,itemFilterFunction:e=>this._isMapOrGroupLayer(e.parent)&&e.parent.tables.includes(e)})}_isMapOrGroupLayer(e){return e&&(e===this||this._isGroupLayer(e))}_isGroupLayer(e){return e&&"group"===e.type}};Object(i.a)([Object(a.b)({readOnly:!0,dependsOn:[]})],R.prototype,"allLayers",void 0),Object(i.a)([Object(a.b)({readOnly:!0})],R.prototype,"allTables",void 0),Object(i.a)([Object(a.b)({type:d.default})],R.prototype,"basemap",void 0),Object(i.a)([Object(s.a)("basemap")],R.prototype,"castBasemap",null),Object(i.a)([Object(a.b)({type:M,nonNullable:!0})],R.prototype,"ground",void 0),Object(i.a)([Object(s.a)("ground")],R.prototype,"castGround",null),R=Object(i.a)([Object(l.a)("esri.Map")],R);var U=R;t.a=U},878:function(e,t,r){"use strict";var n,i=r(81),o=(r(79),r(90)),a=r(88),s=r(80),l=r(87),c=r(84),u=r(114),d=r(285),p=r(96),h=r(83),b=r(91),m=(r(82),r(85),r(86),r(89)),f=r(101),g=r(263),y=r(556),v=r(804);const O="esri.webmap.Bookmark",j=s.a.getLogger(O);let w=n=class extends(Object(g.a)(m.a)){constructor(e){super(e),this.name=null,this.thumbnail=new v.a}set extent(e){Object(d.c)(j,"extent",{replacement:"viewpoint",version:"4.17"}),this._set("viewpoint",new y.a({targetGeometry:e.clone()})),this._set("extent",e)}castThumbnail(e){return"string"==typeof e?new v.a({url:e}):Object(l.m)(v.a,e)}set viewpoint(e){const t=e.targetGeometry;if(Object(a.j)(t)||"extent"!==t.type){const t=new b.a("invalid-viewpoint","'viewpoint.targetGeometry' should be an extent",{viewpoint:e});j.error(t)}else this._set("extent",t.clone()),this._set("viewpoint",e)}readViewpoint(e,t){const{extent:r,viewpoint:n}=t;return y.a.fromJSON(n||{targetGeometry:r})}clone(){return new n(Object(o.a)({name:this.name,thumbnail:this.thumbnail,viewpoint:this.viewpoint}))}};Object(i.a)([Object(c.b)({type:f.a,nonNullable:!0,json:{read:!1,write:{isRequired:!0}}})],w.prototype,"extent",null),Object(i.a)([Object(c.b)({type:String,nonNullable:!0,json:{write:{isRequired:!0}}})],w.prototype,"name",void 0),Object(i.a)([Object(c.b)({type:v.a,json:{write:{overridePolicy:e=>({enabled:!(!e||!e.url)})}}})],w.prototype,"thumbnail",void 0),Object(i.a)([Object(u.a)("thumbnail")],w.prototype,"castThumbnail",null),Object(i.a)([Object(c.b)({type:y.a,nonNullable:!0,json:{write:!0}})],w.prototype,"viewpoint",null),Object(i.a)([Object(p.a)("viewpoint",["extent","viewpoint"])],w.prototype,"readViewpoint",null),w=n=Object(i.a)([Object(h.a)(O)],w);var k=w;t.a=k},88:function(e,t,r){"use strict";r.d(t,"a",(function(){return h})),r.d(t,"b",(function(){return y})),r.d(t,"c",(function(){return a})),r.d(t,"d",(function(){return j})),r.d(t,"e",(function(){return u})),r.d(t,"f",(function(){return d})),r.d(t,"g",(function(){return v})),r.d(t,"h",(function(){return f})),r.d(t,"i",(function(){return O})),r.d(t,"j",(function(){return i})),r.d(t,"k",(function(){return n})),r.d(t,"l",(function(){return o})),r.d(t,"m",(function(){return m})),r.d(t,"n",(function(){return g})),r.d(t,"o",(function(){return b})),r.d(t,"p",(function(){return p})),r.d(t,"q",(function(){return s})),r.d(t,"r",(function(){return c})),r.d(t,"s",(function(){return l}));function n(e){return null!=e}function i(e){return null==e}function o(e){return void 0===e}function a(e,t){return n(e)?t(e):null}function s(e){return e}function l(e,t){if(i(e))throw new Error(t);return e}function c(e,t){return n(e)?e:"function"==typeof t?t():t}function u(e){return n(e)&&e.destroy(),null}function d(e){return n(e)&&e.dispose(),null}function p(e){return n(e)&&e.remove(),null}function h(e){return n(e)&&e.abort(),null}function b(e){return null}function m(e,t){const r=new Array;for(const n of e)r.push(g(n,null,t));return r}function f(e,t){for(const r of e)g(r,null,t)}function g(e,t,r){return n(e)?r(e):t}function y(e,t){return n(e)?t(e):null}function v(e){return e.filter((e=>n(e)))}function O(e,...t){let r=e,n=0;for(;n<t.length&&r;)r=r[t[n++]];return r}function j(e){return e}},90:function(e,t,r){"use strict";r.d(t,"a",(function(){return o})),r.d(t,"b",(function(){return a})),r.d(t,"c",(function(){return i}));r(79);var n=r(292);function i(e,t){let r;if(t)for(r in e)e.hasOwnProperty(r)&&(void 0===e[r]?delete e[r]:e[r]instanceof Object&&i(e[r],!0));else for(r in e)e.hasOwnProperty(r)&&void 0===e[r]&&delete e[r];return e}function o(e){if(!e||"object"!=typeof e||"function"==typeof e)return e;if(Object(n.h)(e)||Object(n.k)(e)||Object(n.l)(e)||Object(n.f)(e)||Object(n.i)(e)||Object(n.g)(e)||Object(n.j)(e)||Object(n.d)(e)||Object(n.e)(e))return Object(n.m)(e);if(e instanceof Date)return new Date(e.getTime());if(e instanceof ArrayBuffer)return e.slice(0,e.byteLength);if(e instanceof Map){const t=new Map;return e.forEach(((e,r)=>{t.set(r,o(e))})),t}if(e instanceof Set){const t=new Set;return e.forEach((e=>{t.add(o(e))})),t}let t;const r=e;if("function"==typeof r.clone)t=r.clone();else if("function"==typeof r.map&&"function"==typeof r.forEach)t=r.map(o);else if("function"==typeof r.notifyChange&&"function"==typeof r.watch)t=r.clone();else{t={};for(const r of Object.getOwnPropertyNames(e))t[r]=o(e[r])}return t}function a(e,t){return e===t||"number"==typeof e&&isNaN(e)&&"number"==typeof t&&isNaN(t)||"function"==typeof(e||{}).getTime&&"function"==typeof(t||{}).getTime&&e.getTime()===t.getTime()||!1}},91:function(e,t,r){"use strict";var n=r(90),i=r(80),o=r(406);class a extends o.a{constructor(e,t,r){if(super(e,t,r),!(this instanceof a))return new a(e,t,r)}toJSON(){if(null!=this.details)try{return{name:this.name,message:this.message,details:JSON.parse(JSON.stringify(this.details,((e,t)=>{if(t&&"object"==typeof t&&"function"==typeof t.toJSON)return t;try{return Object(n.a)(t)}catch(a){return"[object]"}})))}}catch(e){throw i.a.getLogger("esri.core.Error").error(e),e}return{name:this.name,message:this.message,details:this.details}}static fromJSON(e){return new a(e.name,e.message,e.details)}}a.prototype.type="error",t.a=a},92:function(e,t,r){"use strict";r.d(t,"a",(function(){return I})),r.d(t,"b",(function(){return s})),r.d(t,"c",(function(){return l})),r.d(t,"d",(function(){return u})),r.d(t,"e",(function(){return c})),r.d(t,"f",(function(){return j})),r.d(t,"g",(function(){return A})),r.d(t,"h",(function(){return M})),r.d(t,"i",(function(){return E})),r.d(t,"j",(function(){return w})),r.d(t,"k",(function(){return k})),r.d(t,"l",(function(){return O})),r.d(t,"m",(function(){return v})),r.d(t,"n",(function(){return h})),r.d(t,"o",(function(){return x})),r.d(t,"p",(function(){return f})),r.d(t,"q",(function(){return g})),r.d(t,"r",(function(){return _})),r.d(t,"s",(function(){return S})),r.d(t,"t",(function(){return b})),r.d(t,"u",(function(){return d})),r.d(t,"v",(function(){return m})),r.d(t,"w",(function(){return T})),r.d(t,"x",(function(){return y}));var n=r(88),i=(r(80),r(91)),o=r(452),a=r(162);function s(e){return Promise.all(e)}function l(e){return new Promise(((t,r)=>{try{e(t,r)}catch(n){Promise.resolve().then((()=>r(n)))}}))}function c(e="Aborted"){return new i.a("AbortError",e)}function u(){return new AbortController}function d(e){if(h(e))throw c()}function p(e){return Object(n.k)(e)?"aborted"in e?e:e.signal:e}function h(e){const t=p(e);return Object(n.k)(t)&&t.aborted}function b(e){if(v(e))throw e}function m(e){if(!v(e))throw e}function f(e,t){const r=p(e);if(!Object(n.j)(r)){if(!r.aborted)return Object(a.d)(r,"abort",(()=>t()));t()}}function g(e,t){const r=p(e);if(!Object(n.j)(r))return d(r),Object(a.d)(r,"abort",(()=>t(c())))}function y(e,t){const r=p(t);return Object(n.j)(r)?e:new Promise(((r,i)=>{let o=f(t,(()=>i(c())));const a=()=>o=Object(n.p)(o);e.then(a,a),e.then(r,i)}))}function v(e){return e&&"AbortError"===e.name}function O(e){return e.catch((e=>{if(!v(e))throw e}))}function j(){let e=null;const t=new Promise(((t,r)=>{e={promise:void 0,resolve:t,reject:r}}));return e.promise=t,e}function w(e){if(!e)return;if("function"!=typeof e.forEach){const t=Object.keys(e);return w(t.map((t=>e[t]))).then((e=>{const r={};return t.forEach(((t,n)=>r[t]=e[n])),r}))}const t=e;return l((e=>{const r=[];let n=t.length;0===n&&e(r),t.forEach((t=>{const i={promise:t||Promise.resolve(t)};r.push(i),i.promise.then((e=>{i.value=e})).catch((e=>{i.error=e})).then((()=>{--n,0===n&&e(r)}))}))}))}function k(e){return w(e).then((e=>e.filter((e=>!!e.value)).map((e=>e.value))))}function _(e){return Promise.reject(e)}function S(e){return Promise.resolve(e)}function I(e,t,r){const n=u();return f(r,(()=>n.abort())),new Promise(((r,i)=>{let o=setTimeout((()=>{o=0,r(t)}),e);f(n,(()=>{o&&(clearTimeout(o),i(c()))}))}))}function x(e){return e&&"function"==typeof e.then}function T(e){return e&&"object"==typeof e&&"then"in e&&"function"==typeof e.then?e:Promise.resolve(e)}function E(e,t=-1){let r,i,o,a,s=null;const l=(...d)=>{if(r){i=d,a&&a.reject(c()),a=j();const e=Object(n.d)(a.promise);if(s){const e=s;s=null,e.abort()}return e}if(o=a||j(),a=null,t>0){const n=u();r=T(e(...d,n.signal));const i=r;I(t).then((()=>{r===i&&(a?n.abort():s=n)}))}else r=1,r=T(e(...d));const p=()=>{const e=i;i=o=r=s=null,null!=e&&l(...e)},h=r,b=o;return h.then(p,p),h.then(b.resolve,b.reject),Object(n.d)(b.promise)};return l}function A(){let e,t;const r=new Promise(((r,n)=>{e=r,t=n})),n=t=>{e(t)};return n.resolve=t=>e(t),n.reject=e=>t(e),n.timeout=(e,t)=>o.a.setTimeout((()=>n.reject(t)),e),n.promise=r,n}function M(e){let t=u();const r=e(t.signal);let n={promise:r,finished:!1,abort:()=>{t&&(t.abort(),t=null)}};const i=()=>{n&&(n.finished=!0,n=null),t=null};return r.then(i,i),n}},951:function(e,t,r){"use strict";function n(e){return(n="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function o(){return(o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function a(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){i(e,t,r[t])}))}return e}function s(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function l(e){if("undefined"!==typeof window&&window.navigator)return!!navigator.userAgent.match(e)}var c=l(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),u=l(/Edge/i),d=l(/firefox/i),p=l(/safari/i)&&!l(/chrome/i)&&!l(/android/i),h=l(/iP(ad|od|hone)/i),b=l(/chrome/i)&&l(/android/i),m={capture:!1,passive:!1};function f(e,t,r){e.addEventListener(t,r,!c&&m)}function g(e,t,r){e.removeEventListener(t,r,!c&&m)}function y(e,t){if(t){if(">"===t[0]&&(t=t.substring(1)),e)try{if(e.matches)return e.matches(t);if(e.msMatchesSelector)return e.msMatchesSelector(t);if(e.webkitMatchesSelector)return e.webkitMatchesSelector(t)}catch(r){return!1}return!1}}function v(e){return e.host&&e!==document&&e.host.nodeType?e.host:e.parentNode}function O(e,t,r,n){if(e){r=r||document;do{if(null!=t&&(">"===t[0]?e.parentNode===r&&y(e,t):y(e,t))||n&&e===r)return e;if(e===r)break}while(e=v(e))}return null}var j,w=/\s+/g;function k(e,t,r){if(e&&t)if(e.classList)e.classList[r?"add":"remove"](t);else{var n=(" "+e.className+" ").replace(w," ").replace(" "+t+" "," ");e.className=(n+(r?" "+t:"")).replace(w," ")}}function _(e,t,r){var n=e&&e.style;if(n){if(void 0===r)return document.defaultView&&document.defaultView.getComputedStyle?r=document.defaultView.getComputedStyle(e,""):e.currentStyle&&(r=e.currentStyle),void 0===t?r:r[t];t in n||-1!==t.indexOf("webkit")||(t="-webkit-"+t),n[t]=r+("string"===typeof r?"":"px")}}function S(e,t){var r="";if("string"===typeof e)r=e;else do{var n=_(e,"transform");n&&"none"!==n&&(r=n+" "+r)}while(!t&&(e=e.parentNode));var i=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return i&&new i(r)}function I(e,t,r){if(e){var n=e.getElementsByTagName(t),i=0,o=n.length;if(r)for(;i<o;i++)r(n[i],i);return n}return[]}function x(){var e=document.scrollingElement;return e||document.documentElement}function T(e,t,r,n,i){if(e.getBoundingClientRect||e===window){var o,a,s,l,u,d,p;if(e!==window&&e.parentNode&&e!==x()?(a=(o=e.getBoundingClientRect()).top,s=o.left,l=o.bottom,u=o.right,d=o.height,p=o.width):(a=0,s=0,l=window.innerHeight,u=window.innerWidth,d=window.innerHeight,p=window.innerWidth),(t||r)&&e!==window&&(i=i||e.parentNode,!c))do{if(i&&i.getBoundingClientRect&&("none"!==_(i,"transform")||r&&"static"!==_(i,"position"))){var h=i.getBoundingClientRect();a-=h.top+parseInt(_(i,"border-top-width")),s-=h.left+parseInt(_(i,"border-left-width")),l=a+o.height,u=s+o.width;break}}while(i=i.parentNode);if(n&&e!==window){var b=S(i||e),m=b&&b.a,f=b&&b.d;b&&(l=(a/=f)+(d/=f),u=(s/=m)+(p/=m))}return{top:a,left:s,bottom:l,right:u,width:p,height:d}}}function E(e,t,r){for(var n=P(e,!0),i=T(e)[t];n;){var o=T(n)[r];if(!("top"===r||"left"===r?i>=o:i<=o))return n;if(n===x())break;n=P(n,!1)}return!1}function A(e,t,r){for(var n=0,i=0,o=e.children;i<o.length;){if("none"!==o[i].style.display&&o[i]!==Fe.ghost&&o[i]!==Fe.dragged&&O(o[i],r.draggable,e,!1)){if(n===t)return o[i];n++}i++}return null}function M(e,t){for(var r=e.lastElementChild;r&&(r===Fe.ghost||"none"===_(r,"display")||t&&!y(r,t));)r=r.previousElementSibling;return r||null}function C(e,t){var r=0;if(!e||!e.parentNode)return-1;for(;e=e.previousElementSibling;)"TEMPLATE"===e.nodeName.toUpperCase()||e===Fe.clone||t&&!y(e,t)||r++;return r}function N(e){var t=0,r=0,n=x();if(e)do{var i=S(e),o=i.a,a=i.d;t+=e.scrollLeft*o,r+=e.scrollTop*a}while(e!==n&&(e=e.parentNode));return[t,r]}function P(e,t){if(!e||!e.getBoundingClientRect)return x();var r=e,n=!1;do{if(r.clientWidth<r.scrollWidth||r.clientHeight<r.scrollHeight){var i=_(r);if(r.clientWidth<r.scrollWidth&&("auto"==i.overflowX||"scroll"==i.overflowX)||r.clientHeight<r.scrollHeight&&("auto"==i.overflowY||"scroll"==i.overflowY)){if(!r.getBoundingClientRect||r===document.body)return x();if(n||t)return r;n=!0}}}while(r=r.parentNode);return x()}function D(e,t){return Math.round(e.top)===Math.round(t.top)&&Math.round(e.left)===Math.round(t.left)&&Math.round(e.height)===Math.round(t.height)&&Math.round(e.width)===Math.round(t.width)}function B(e,t){return function(){if(!j){var r=arguments,n=this;1===r.length?e.call(n,r[0]):e.apply(n,r),j=setTimeout((function(){j=void 0}),t)}}}function F(e,t,r){e.scrollLeft+=t,e.scrollTop+=r}function L(e){var t=window.Polymer,r=window.jQuery||window.Zepto;return t&&t.dom?t.dom(e).cloneNode(!0):r?r(e).clone(!0)[0]:e.cloneNode(!0)}var R="Sortable"+(new Date).getTime();function U(){var e,t=[];return{captureAnimationState:function(){(t=[],this.options.animation)&&[].slice.call(this.el.children).forEach((function(e){if("none"!==_(e,"display")&&e!==Fe.ghost){t.push({target:e,rect:T(e)});var r=a({},t[t.length-1].rect);if(e.thisAnimationDuration){var n=S(e,!0);n&&(r.top-=n.f,r.left-=n.e)}e.fromRect=r}}))},addAnimationState:function(e){t.push(e)},removeAnimationState:function(e){t.splice(function(e,t){for(var r in e)if(e.hasOwnProperty(r))for(var n in t)if(t.hasOwnProperty(n)&&t[n]===e[r][n])return Number(r);return-1}(t,{target:e}),1)},animateAll:function(r){var n=this;if(!this.options.animation)return clearTimeout(e),void("function"===typeof r&&r());var i=!1,o=0;t.forEach((function(e){var t=0,r=e.target,a=r.fromRect,s=T(r),l=r.prevFromRect,c=r.prevToRect,u=e.rect,d=S(r,!0);d&&(s.top-=d.f,s.left-=d.e),r.toRect=s,r.thisAnimationDuration&&D(l,s)&&!D(a,s)&&(u.top-s.top)/(u.left-s.left)===(a.top-s.top)/(a.left-s.left)&&(t=function(e,t,r,n){return Math.sqrt(Math.pow(t.top-e.top,2)+Math.pow(t.left-e.left,2))/Math.sqrt(Math.pow(t.top-r.top,2)+Math.pow(t.left-r.left,2))*n.animation}(u,l,c,n.options)),D(s,a)||(r.prevFromRect=a,r.prevToRect=s,t||(t=n.options.animation),n.animate(r,u,s,t)),t&&(i=!0,o=Math.max(o,t),clearTimeout(r.animationResetTimer),r.animationResetTimer=setTimeout((function(){r.animationTime=0,r.prevFromRect=null,r.fromRect=null,r.prevToRect=null,r.thisAnimationDuration=null}),t),r.thisAnimationDuration=t)})),clearTimeout(e),i?e=setTimeout((function(){"function"===typeof r&&r()}),o):"function"===typeof r&&r(),t=[]},animate:function(e,t,r,n){if(n){_(e,"transition",""),_(e,"transform","");var i=S(this.el),o=i&&i.a,a=i&&i.d,s=(t.left-r.left)/(o||1),l=(t.top-r.top)/(a||1);e.animatingX=!!s,e.animatingY=!!l,_(e,"transform","translate3d("+s+"px,"+l+"px,0)"),this.forRepaintDummy=function(e){return e.offsetWidth}(e),_(e,"transition","transform "+n+"ms"+(this.options.easing?" "+this.options.easing:"")),_(e,"transform","translate3d(0,0,0)"),"number"===typeof e.animated&&clearTimeout(e.animated),e.animated=setTimeout((function(){_(e,"transition",""),_(e,"transform",""),e.animated=!1,e.animatingX=!1,e.animatingY=!1}),n)}}}}var q=[],V={initializeByDefault:!0},W={mount:function(e){for(var t in V)V.hasOwnProperty(t)&&!(t in e)&&(e[t]=V[t]);q.forEach((function(t){if(t.pluginName===e.pluginName)throw"Sortable: Cannot mount plugin ".concat(e.pluginName," more than once")})),q.push(e)},pluginEvent:function(e,t,r){var n=this;this.eventCanceled=!1,r.cancel=function(){n.eventCanceled=!0};var i=e+"Global";q.forEach((function(n){t[n.pluginName]&&(t[n.pluginName][i]&&t[n.pluginName][i](a({sortable:t},r)),t.options[n.pluginName]&&t[n.pluginName][e]&&t[n.pluginName][e](a({sortable:t},r)))}))},initializePlugins:function(e,t,r,n){for(var i in q.forEach((function(n){var i=n.pluginName;if(e.options[i]||n.initializeByDefault){var a=new n(e,t,e.options);a.sortable=e,a.options=e.options,e[i]=a,o(r,a.defaults)}})),e.options)if(e.options.hasOwnProperty(i)){var a=this.modifyOption(e,i,e.options[i]);"undefined"!==typeof a&&(e.options[i]=a)}},getEventProperties:function(e,t){var r={};return q.forEach((function(n){"function"===typeof n.eventProperties&&o(r,n.eventProperties.call(t[n.pluginName],e))})),r},modifyOption:function(e,t,r){var n;return q.forEach((function(i){e[i.pluginName]&&i.optionListeners&&"function"===typeof i.optionListeners[t]&&(n=i.optionListeners[t].call(e[i.pluginName],r))})),n}};function G(e){var t=e.sortable,r=e.rootEl,n=e.name,i=e.targetEl,o=e.cloneEl,s=e.toEl,l=e.fromEl,d=e.oldIndex,p=e.newIndex,h=e.oldDraggableIndex,b=e.newDraggableIndex,m=e.originalEvent,f=e.putSortable,g=e.extraEventProperties;if(t=t||r&&r[R]){var y,v=t.options,O="on"+n.charAt(0).toUpperCase()+n.substr(1);!window.CustomEvent||c||u?(y=document.createEvent("Event")).initEvent(n,!0,!0):y=new CustomEvent(n,{bubbles:!0,cancelable:!0}),y.to=s||r,y.from=l||r,y.item=i||r,y.clone=o,y.oldIndex=d,y.newIndex=p,y.oldDraggableIndex=h,y.newDraggableIndex=b,y.originalEvent=m,y.pullMode=f?f.lastPutMode:void 0;var j=a({},g,W.getEventProperties(n,t));for(var w in j)y[w]=j[w];r&&r.dispatchEvent(y),v[O]&&v[O].call(t,y)}}var J=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=r.evt,i=s(r,["evt"]);W.pluginEvent.bind(Fe)(e,t,a({dragEl:$,parentEl:Y,ghostEl:H,rootEl:X,nextEl:K,lastDownEl:Z,cloneEl:Q,cloneHidden:ee,dragStarted:he,putSortable:ae,activeSortable:Fe.active,originalEvent:n,oldIndex:te,oldDraggableIndex:ne,newIndex:re,newDraggableIndex:ie,hideGhostForTarget:Ne,unhideGhostForTarget:Pe,cloneNowHidden:function(){ee=!0},cloneNowShown:function(){ee=!1},dispatchSortableEvent:function(e){z({sortable:t,name:e,originalEvent:n})}},i))};function z(e){G(a({putSortable:ae,cloneEl:Q,targetEl:$,rootEl:X,oldIndex:te,oldDraggableIndex:ne,newIndex:re,newDraggableIndex:ie},e))}var $,Y,H,X,K,Z,Q,ee,te,re,ne,ie,oe,ae,se,le,ce,ue,de,pe,he,be,me,fe,ge,ye=!1,ve=!1,Oe=[],je=!1,we=!1,ke=[],_e=!1,Se=[],Ie="undefined"!==typeof document,xe=h,Te=u||c?"cssFloat":"float",Ee=Ie&&!b&&!h&&"draggable"in document.createElement("div"),Ae=function(){if(Ie){if(c)return!1;var e=document.createElement("x");return e.style.cssText="pointer-events:auto","auto"===e.style.pointerEvents}}(),Me=function(e,t){var r=_(e),n=parseInt(r.width)-parseInt(r.paddingLeft)-parseInt(r.paddingRight)-parseInt(r.borderLeftWidth)-parseInt(r.borderRightWidth),i=A(e,0,t),o=A(e,1,t),a=i&&_(i),s=o&&_(o),l=a&&parseInt(a.marginLeft)+parseInt(a.marginRight)+T(i).width,c=s&&parseInt(s.marginLeft)+parseInt(s.marginRight)+T(o).width;if("flex"===r.display)return"column"===r.flexDirection||"column-reverse"===r.flexDirection?"vertical":"horizontal";if("grid"===r.display)return r.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(i&&a.float&&"none"!==a.float){var u="left"===a.float?"left":"right";return!o||"both"!==s.clear&&s.clear!==u?"horizontal":"vertical"}return i&&("block"===a.display||"flex"===a.display||"table"===a.display||"grid"===a.display||l>=n&&"none"===r[Te]||o&&"none"===r[Te]&&l+c>n)?"vertical":"horizontal"},Ce=function(e){function t(e,r){return function(n,i,o,a){var s=n.options.group.name&&i.options.group.name&&n.options.group.name===i.options.group.name;if(null==e&&(r||s))return!0;if(null==e||!1===e)return!1;if(r&&"clone"===e)return e;if("function"===typeof e)return t(e(n,i,o,a),r)(n,i,o,a);var l=(r?n:i).options.group.name;return!0===e||"string"===typeof e&&e===l||e.join&&e.indexOf(l)>-1}}var r={},i=e.group;i&&"object"==n(i)||(i={name:i}),r.name=i.name,r.checkPull=t(i.pull,!0),r.checkPut=t(i.put),r.revertClone=i.revertClone,e.group=r},Ne=function(){!Ae&&H&&_(H,"display","none")},Pe=function(){!Ae&&H&&_(H,"display","")};Ie&&document.addEventListener("click",(function(e){if(ve)return e.preventDefault(),e.stopPropagation&&e.stopPropagation(),e.stopImmediatePropagation&&e.stopImmediatePropagation(),ve=!1,!1}),!0);var De=function(e){if($){var t=function(e,t){var r;return Oe.some((function(n){if(!M(n)){var i=T(n),o=n[R].options.emptyInsertThreshold,a=e>=i.left-o&&e<=i.right+o,s=t>=i.top-o&&t<=i.bottom+o;return o&&a&&s?r=n:void 0}})),r}((e=e.touches?e.touches[0]:e).clientX,e.clientY);if(t){var r={};for(var n in e)e.hasOwnProperty(n)&&(r[n]=e[n]);r.target=r.rootEl=t,r.preventDefault=void 0,r.stopPropagation=void 0,t[R]._onDragOver(r)}}},Be=function(e){$&&$.parentNode[R]._isOutsideThisEl(e.target)};function Fe(e,t){if(!e||!e.nodeType||1!==e.nodeType)throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(e));this.el=e,this.options=t=o({},t),e[R]=this;var r={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(e.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return Me(e,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(e,t){e.setData("Text",t.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:!1!==Fe.supportPointer&&"PointerEvent"in window&&!p,emptyInsertThreshold:5};for(var n in W.initializePlugins(this,e,r),r)!(n in t)&&(t[n]=r[n]);for(var i in Ce(t),this)"_"===i.charAt(0)&&"function"===typeof this[i]&&(this[i]=this[i].bind(this));this.nativeDraggable=!t.forceFallback&&Ee,this.nativeDraggable&&(this.options.touchStartThreshold=1),t.supportPointer?f(e,"pointerdown",this._onTapStart):(f(e,"mousedown",this._onTapStart),f(e,"touchstart",this._onTapStart)),this.nativeDraggable&&(f(e,"dragover",this),f(e,"dragenter",this)),Oe.push(this.el),t.store&&t.store.get&&this.sort(t.store.get(this)||[]),o(this,U())}function Le(e,t,r,n,i,o,a,s){var l,d,p=e[R],h=p.options.onMove;return!window.CustomEvent||c||u?(l=document.createEvent("Event")).initEvent("move",!0,!0):l=new CustomEvent("move",{bubbles:!0,cancelable:!0}),l.to=t,l.from=e,l.dragged=r,l.draggedRect=n,l.related=i||t,l.relatedRect=o||T(t),l.willInsertAfter=s,l.originalEvent=a,e.dispatchEvent(l),h&&(d=h.call(p,l,a)),d}function Re(e){e.draggable=!1}function Ue(){_e=!1}function qe(e){for(var t=e.tagName+e.className+e.src+e.href+e.textContent,r=t.length,n=0;r--;)n+=t.charCodeAt(r);return n.toString(36)}function Ve(e){return setTimeout(e,0)}function We(e){return clearTimeout(e)}Fe.prototype={constructor:Fe,_isOutsideThisEl:function(e){this.el.contains(e)||e===this.el||(be=null)},_getDirection:function(e,t){return"function"===typeof this.options.direction?this.options.direction.call(this,e,t,$):this.options.direction},_onTapStart:function(e){if(e.cancelable){var t=this,r=this.el,n=this.options,i=n.preventOnFilter,o=e.type,a=e.touches&&e.touches[0]||e.pointerType&&"touch"===e.pointerType&&e,s=(a||e).target,l=e.target.shadowRoot&&(e.path&&e.path[0]||e.composedPath&&e.composedPath()[0])||s,c=n.filter;if(function(e){Se.length=0;var t=e.getElementsByTagName("input"),r=t.length;for(;r--;){var n=t[r];n.checked&&Se.push(n)}}(r),!$&&!(/mousedown|pointerdown/.test(o)&&0!==e.button||n.disabled)&&!l.isContentEditable&&(this.nativeDraggable||!p||!s||"SELECT"!==s.tagName.toUpperCase())&&(!(s=O(s,n.draggable,r,!1))||!s.animated)&&Z!==s){if(te=C(s),ne=C(s,n.draggable),"function"===typeof c){if(c.call(this,e,s,this))return z({sortable:t,rootEl:l,name:"filter",targetEl:s,toEl:r,fromEl:r}),J("filter",t,{evt:e}),void(i&&e.cancelable&&e.preventDefault())}else if(c&&(c=c.split(",").some((function(n){if(n=O(l,n.trim(),r,!1))return z({sortable:t,rootEl:n,name:"filter",targetEl:s,fromEl:r,toEl:r}),J("filter",t,{evt:e}),!0}))))return void(i&&e.cancelable&&e.preventDefault());n.handle&&!O(l,n.handle,r,!1)||this._prepareDragStart(e,a,s)}}},_prepareDragStart:function(e,t,r){var n,i=this,o=i.el,a=i.options,s=o.ownerDocument;if(r&&!$&&r.parentNode===o){var l=T(r);if(X=o,Y=($=r).parentNode,K=$.nextSibling,Z=r,oe=a.group,Fe.dragged=$,se={target:$,clientX:(t||e).clientX,clientY:(t||e).clientY},de=se.clientX-l.left,pe=se.clientY-l.top,this._lastX=(t||e).clientX,this._lastY=(t||e).clientY,$.style["will-change"]="all",n=function(){J("delayEnded",i,{evt:e}),Fe.eventCanceled?i._onDrop():(i._disableDelayedDragEvents(),!d&&i.nativeDraggable&&($.draggable=!0),i._triggerDragStart(e,t),z({sortable:i,name:"choose",originalEvent:e}),k($,a.chosenClass,!0))},a.ignore.split(",").forEach((function(e){I($,e.trim(),Re)})),f(s,"dragover",De),f(s,"mousemove",De),f(s,"touchmove",De),f(s,"mouseup",i._onDrop),f(s,"touchend",i._onDrop),f(s,"touchcancel",i._onDrop),d&&this.nativeDraggable&&(this.options.touchStartThreshold=4,$.draggable=!0),J("delayStart",this,{evt:e}),!a.delay||a.delayOnTouchOnly&&!t||this.nativeDraggable&&(u||c))n();else{if(Fe.eventCanceled)return void this._onDrop();f(s,"mouseup",i._disableDelayedDrag),f(s,"touchend",i._disableDelayedDrag),f(s,"touchcancel",i._disableDelayedDrag),f(s,"mousemove",i._delayedDragTouchMoveHandler),f(s,"touchmove",i._delayedDragTouchMoveHandler),a.supportPointer&&f(s,"pointermove",i._delayedDragTouchMoveHandler),i._dragStartTimer=setTimeout(n,a.delay)}}},_delayedDragTouchMoveHandler:function(e){var t=e.touches?e.touches[0]:e;Math.max(Math.abs(t.clientX-this._lastX),Math.abs(t.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){$&&Re($),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var e=this.el.ownerDocument;g(e,"mouseup",this._disableDelayedDrag),g(e,"touchend",this._disableDelayedDrag),g(e,"touchcancel",this._disableDelayedDrag),g(e,"mousemove",this._delayedDragTouchMoveHandler),g(e,"touchmove",this._delayedDragTouchMoveHandler),g(e,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(e,t){t=t||"touch"==e.pointerType&&e,!this.nativeDraggable||t?this.options.supportPointer?f(document,"pointermove",this._onTouchMove):f(document,t?"touchmove":"mousemove",this._onTouchMove):(f($,"dragend",this),f(X,"dragstart",this._onDragStart));try{document.selection?Ve((function(){document.selection.empty()})):window.getSelection().removeAllRanges()}catch(r){}},_dragStarted:function(e,t){if(ye=!1,X&&$){J("dragStarted",this,{evt:t}),this.nativeDraggable&&f(document,"dragover",Be);var r=this.options;!e&&k($,r.dragClass,!1),k($,r.ghostClass,!0),Fe.active=this,e&&this._appendGhost(),z({sortable:this,name:"start",originalEvent:t})}else this._nulling()},_emulateDragOver:function(){if(le){this._lastX=le.clientX,this._lastY=le.clientY,Ne();for(var e=document.elementFromPoint(le.clientX,le.clientY),t=e;e&&e.shadowRoot&&(e=e.shadowRoot.elementFromPoint(le.clientX,le.clientY))!==t;)t=e;if($.parentNode[R]._isOutsideThisEl(e),t)do{if(t[R]){if(t[R]._onDragOver({clientX:le.clientX,clientY:le.clientY,target:e,rootEl:t})&&!this.options.dragoverBubble)break}e=t}while(t=t.parentNode);Pe()}},_onTouchMove:function(e){if(se){var t=this.options,r=t.fallbackTolerance,n=t.fallbackOffset,i=e.touches?e.touches[0]:e,o=H&&S(H,!0),a=H&&o&&o.a,s=H&&o&&o.d,l=xe&&ge&&N(ge),c=(i.clientX-se.clientX+n.x)/(a||1)+(l?l[0]-ke[0]:0)/(a||1),u=(i.clientY-se.clientY+n.y)/(s||1)+(l?l[1]-ke[1]:0)/(s||1);if(!Fe.active&&!ye){if(r&&Math.max(Math.abs(i.clientX-this._lastX),Math.abs(i.clientY-this._lastY))<r)return;this._onDragStart(e,!0)}if(H){o?(o.e+=c-(ce||0),o.f+=u-(ue||0)):o={a:1,b:0,c:0,d:1,e:c,f:u};var d="matrix(".concat(o.a,",").concat(o.b,",").concat(o.c,",").concat(o.d,",").concat(o.e,",").concat(o.f,")");_(H,"webkitTransform",d),_(H,"mozTransform",d),_(H,"msTransform",d),_(H,"transform",d),ce=c,ue=u,le=i}e.cancelable&&e.preventDefault()}},_appendGhost:function(){if(!H){var e=this.options.fallbackOnBody?document.body:X,t=T($,!0,xe,!0,e),r=this.options;if(xe){for(ge=e;"static"===_(ge,"position")&&"none"===_(ge,"transform")&&ge!==document;)ge=ge.parentNode;ge!==document.body&&ge!==document.documentElement?(ge===document&&(ge=x()),t.top+=ge.scrollTop,t.left+=ge.scrollLeft):ge=x(),ke=N(ge)}k(H=$.cloneNode(!0),r.ghostClass,!1),k(H,r.fallbackClass,!0),k(H,r.dragClass,!0),_(H,"transition",""),_(H,"transform",""),_(H,"box-sizing","border-box"),_(H,"margin",0),_(H,"top",t.top),_(H,"left",t.left),_(H,"width",t.width),_(H,"height",t.height),_(H,"opacity","0.8"),_(H,"position",xe?"absolute":"fixed"),_(H,"zIndex","100000"),_(H,"pointerEvents","none"),Fe.ghost=H,e.appendChild(H),_(H,"transform-origin",de/parseInt(H.style.width)*100+"% "+pe/parseInt(H.style.height)*100+"%")}},_onDragStart:function(e,t){var r=this,n=e.dataTransfer,i=r.options;J("dragStart",this,{evt:e}),Fe.eventCanceled?this._onDrop():(J("setupClone",this),Fe.eventCanceled||((Q=L($)).draggable=!1,Q.style["will-change"]="",this._hideClone(),k(Q,this.options.chosenClass,!1),Fe.clone=Q),r.cloneId=Ve((function(){J("clone",r),Fe.eventCanceled||(r.options.removeCloneOnHide||X.insertBefore(Q,$),r._hideClone(),z({sortable:r,name:"clone"}))})),!t&&k($,i.dragClass,!0),t?(ve=!0,r._loopId=setInterval(r._emulateDragOver,50)):(g(document,"mouseup",r._onDrop),g(document,"touchend",r._onDrop),g(document,"touchcancel",r._onDrop),n&&(n.effectAllowed="move",i.setData&&i.setData.call(r,n,$)),f(document,"drop",r),_($,"transform","translateZ(0)")),ye=!0,r._dragStartId=Ve(r._dragStarted.bind(r,t,e)),f(document,"selectstart",r),he=!0,p&&_(document.body,"user-select","none"))},_onDragOver:function(e){var t,r,n,i,o=this.el,s=e.target,l=this.options,c=l.group,u=Fe.active,d=oe===c,p=l.sort,h=ae||u,b=this,m=!1;if(!_e){if(void 0!==e.preventDefault&&e.cancelable&&e.preventDefault(),s=O(s,l.draggable,o,!0),B("dragOver"),Fe.eventCanceled)return m;if($.contains(e.target)||s.animated&&s.animatingX&&s.animatingY||b._ignoreWhileAnimating===s)return U(!1);if(ve=!1,u&&!l.disabled&&(d?p||(n=!X.contains($)):ae===this||(this.lastPutMode=oe.checkPull(this,u,$,e))&&c.checkPut(this,u,$,e))){if(i="vertical"===this._getDirection(e,s),t=T($),B("dragOverValid"),Fe.eventCanceled)return m;if(n)return Y=X,L(),this._hideClone(),B("revert"),Fe.eventCanceled||(K?X.insertBefore($,K):X.appendChild($)),U(!0);var f=M(o,l.draggable);if(!f||function(e,t,r){var n=T(M(r.el,r.options.draggable)),i=10;return t?e.clientX>n.right+i||e.clientX<=n.right&&e.clientY>n.bottom&&e.clientX>=n.left:e.clientX>n.right&&e.clientY>n.top||e.clientX<=n.right&&e.clientY>n.bottom+i}(e,i,this)&&!f.animated){if(f===$)return U(!1);if(f&&o===e.target&&(s=f),s&&(r=T(s)),!1!==Le(X,o,$,t,s,r,e,!!s))return L(),o.appendChild($),Y=o,q(),U(!0)}else if(s.parentNode===o){r=T(s);var g,y,v,j=$.parentNode!==o,w=!function(e,t,r){var n=r?e.left:e.top,i=r?e.right:e.bottom,o=r?e.width:e.height,a=r?t.left:t.top,s=r?t.right:t.bottom,l=r?t.width:t.height;return n===a||i===s||n+o/2===a+l/2}($.animated&&$.toRect||t,s.animated&&s.toRect||r,i),S=i?"top":"left",I=E(s,"top","top")||E($,"top","top"),x=I?I.scrollTop:void 0;if(be!==s&&(y=r[S],je=!1,we=!w&&l.invertSwap||j),0!==(g=function(e,t,r,n,i,o,a,s){var l=n?e.clientY:e.clientX,c=n?r.height:r.width,u=n?r.top:r.left,d=n?r.bottom:r.right,p=!1;if(!a)if(s&&fe<c*i){if(!je&&(1===me?l>u+c*o/2:l<d-c*o/2)&&(je=!0),je)p=!0;else if(1===me?l<u+fe:l>d-fe)return-me}else if(l>u+c*(1-i)/2&&l<d-c*(1-i)/2)return function(e){return C($)<C(e)?1:-1}(t);if((p=p||a)&&(l<u+c*o/2||l>d-c*o/2))return l>u+c/2?1:-1;return 0}(e,s,r,i,w?1:l.swapThreshold,null==l.invertedSwapThreshold?l.swapThreshold:l.invertedSwapThreshold,we,be===s))){var A=C($);do{A-=g,v=Y.children[A]}while(v&&("none"===_(v,"display")||v===H))}if(0===g||v===s)return U(!1);be=s,me=g;var N=s.nextElementSibling,P=!1,D=Le(X,o,$,t,s,r,e,P=1===g);if(!1!==D)return 1!==D&&-1!==D||(P=1===D),_e=!0,setTimeout(Ue,30),L(),P&&!N?o.appendChild($):s.parentNode.insertBefore($,P?N:s),I&&F(I,0,x-I.scrollTop),Y=$.parentNode,void 0===y||we||(fe=Math.abs(y-T(s)[S])),q(),U(!0)}if(o.contains($))return U(!1)}return!1}function B(l,c){J(l,b,a({evt:e,isOwner:d,axis:i?"vertical":"horizontal",revert:n,dragRect:t,targetRect:r,canSort:p,fromSortable:h,target:s,completed:U,onMove:function(r,n){return Le(X,o,$,t,r,T(r),e,n)},changed:q},c))}function L(){B("dragOverAnimationCapture"),b.captureAnimationState(),b!==h&&h.captureAnimationState()}function U(t){return B("dragOverCompleted",{insertion:t}),t&&(d?u._hideClone():u._showClone(b),b!==h&&(k($,ae?ae.options.ghostClass:u.options.ghostClass,!1),k($,l.ghostClass,!0)),ae!==b&&b!==Fe.active?ae=b:b===Fe.active&&ae&&(ae=null),h===b&&(b._ignoreWhileAnimating=s),b.animateAll((function(){B("dragOverAnimationComplete"),b._ignoreWhileAnimating=null})),b!==h&&(h.animateAll(),h._ignoreWhileAnimating=null)),(s===$&&!$.animated||s===o&&!s.animated)&&(be=null),l.dragoverBubble||e.rootEl||s===document||($.parentNode[R]._isOutsideThisEl(e.target),!t&&De(e)),!l.dragoverBubble&&e.stopPropagation&&e.stopPropagation(),m=!0}function q(){re=C($),ie=C($,l.draggable),z({sortable:b,name:"change",toEl:o,newIndex:re,newDraggableIndex:ie,originalEvent:e})}},_ignoreWhileAnimating:null,_offMoveEvents:function(){g(document,"mousemove",this._onTouchMove),g(document,"touchmove",this._onTouchMove),g(document,"pointermove",this._onTouchMove),g(document,"dragover",De),g(document,"mousemove",De),g(document,"touchmove",De)},_offUpEvents:function(){var e=this.el.ownerDocument;g(e,"mouseup",this._onDrop),g(e,"touchend",this._onDrop),g(e,"pointerup",this._onDrop),g(e,"touchcancel",this._onDrop),g(document,"selectstart",this)},_onDrop:function(e){var t=this.el,r=this.options;re=C($),ie=C($,r.draggable),J("drop",this,{evt:e}),Y=$&&$.parentNode,re=C($),ie=C($,r.draggable),Fe.eventCanceled||(ye=!1,we=!1,je=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),We(this.cloneId),We(this._dragStartId),this.nativeDraggable&&(g(document,"drop",this),g(t,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),p&&_(document.body,"user-select",""),_($,"transform",""),e&&(he&&(e.cancelable&&e.preventDefault(),!r.dropBubble&&e.stopPropagation()),H&&H.parentNode&&H.parentNode.removeChild(H),(X===Y||ae&&"clone"!==ae.lastPutMode)&&Q&&Q.parentNode&&Q.parentNode.removeChild(Q),$&&(this.nativeDraggable&&g($,"dragend",this),Re($),$.style["will-change"]="",he&&!ye&&k($,ae?ae.options.ghostClass:this.options.ghostClass,!1),k($,this.options.chosenClass,!1),z({sortable:this,name:"unchoose",toEl:Y,newIndex:null,newDraggableIndex:null,originalEvent:e}),X!==Y?(re>=0&&(z({rootEl:Y,name:"add",toEl:Y,fromEl:X,originalEvent:e}),z({sortable:this,name:"remove",toEl:Y,originalEvent:e}),z({rootEl:Y,name:"sort",toEl:Y,fromEl:X,originalEvent:e}),z({sortable:this,name:"sort",toEl:Y,originalEvent:e})),ae&&ae.save()):re!==te&&re>=0&&(z({sortable:this,name:"update",toEl:Y,originalEvent:e}),z({sortable:this,name:"sort",toEl:Y,originalEvent:e})),Fe.active&&(null!=re&&-1!==re||(re=te,ie=ne),z({sortable:this,name:"end",toEl:Y,originalEvent:e}),this.save())))),this._nulling()},_nulling:function(){J("nulling",this),X=$=Y=H=K=Q=Z=ee=se=le=he=re=ie=te=ne=be=me=ae=oe=Fe.dragged=Fe.ghost=Fe.clone=Fe.active=null,Se.forEach((function(e){e.checked=!0})),Se.length=ce=ue=0},handleEvent:function(e){switch(e.type){case"drop":case"dragend":this._onDrop(e);break;case"dragenter":case"dragover":$&&(this._onDragOver(e),function(e){e.dataTransfer&&(e.dataTransfer.dropEffect="move");e.cancelable&&e.preventDefault()}(e));break;case"selectstart":e.preventDefault()}},toArray:function(){for(var e,t=[],r=this.el.children,n=0,i=r.length,o=this.options;n<i;n++)O(e=r[n],o.draggable,this.el,!1)&&t.push(e.getAttribute(o.dataIdAttr)||qe(e));return t},sort:function(e,t){var r={},n=this.el;this.toArray().forEach((function(e,t){var i=n.children[t];O(i,this.options.draggable,n,!1)&&(r[e]=i)}),this),t&&this.captureAnimationState(),e.forEach((function(e){r[e]&&(n.removeChild(r[e]),n.appendChild(r[e]))})),t&&this.animateAll()},save:function(){var e=this.options.store;e&&e.set&&e.set(this)},closest:function(e,t){return O(e,t||this.options.draggable,this.el,!1)},option:function(e,t){var r=this.options;if(void 0===t)return r[e];var n=W.modifyOption(this,e,t);r[e]="undefined"!==typeof n?n:t,"group"===e&&Ce(r)},destroy:function(){J("destroy",this);var e=this.el;e[R]=null,g(e,"mousedown",this._onTapStart),g(e,"touchstart",this._onTapStart),g(e,"pointerdown",this._onTapStart),this.nativeDraggable&&(g(e,"dragover",this),g(e,"dragenter",this)),Array.prototype.forEach.call(e.querySelectorAll("[draggable]"),(function(e){e.removeAttribute("draggable")})),this._onDrop(),this._disableDelayedDragEvents(),Oe.splice(Oe.indexOf(this.el),1),this.el=e=null},_hideClone:function(){if(!ee){if(J("hideClone",this),Fe.eventCanceled)return;_(Q,"display","none"),this.options.removeCloneOnHide&&Q.parentNode&&Q.parentNode.removeChild(Q),ee=!0}},_showClone:function(e){if("clone"===e.lastPutMode){if(ee){if(J("showClone",this),Fe.eventCanceled)return;$.parentNode!=X||this.options.group.revertClone?K?X.insertBefore(Q,K):X.appendChild(Q):X.insertBefore(Q,$),this.options.group.revertClone&&this.animate($,Q),_(Q,"display",""),ee=!1}}else this._hideClone()}},Ie&&f(document,"touchmove",(function(e){(Fe.active||ye)&&e.cancelable&&e.preventDefault()})),Fe.utils={on:f,off:g,css:_,find:I,is:function(e,t){return!!O(e,t,e,!1)},extend:function(e,t){if(e&&t)for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);return e},throttle:B,closest:O,toggleClass:k,clone:L,index:C,nextTick:Ve,cancelNextTick:We,detectDirection:Me,getChild:A},Fe.get=function(e){return e[R]},Fe.mount=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];t[0].constructor===Array&&(t=t[0]),t.forEach((function(e){if(!e.prototype||!e.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(e));e.utils&&(Fe.utils=a({},Fe.utils,e.utils)),W.mount(e)}))},Fe.create=function(e,t){return new Fe(e,t)},Fe.version="1.13.0";var Ge,Je,ze,$e,Ye,He,Xe=[],Ke=!1;function Ze(){Xe.forEach((function(e){clearInterval(e.pid)})),Xe=[]}function Qe(){clearInterval(He)}var et=B((function(e,t,r,n){if(t.scroll){var i,o=(e.touches?e.touches[0]:e).clientX,a=(e.touches?e.touches[0]:e).clientY,s=t.scrollSensitivity,l=t.scrollSpeed,c=x(),u=!1;Je!==r&&(Je=r,Ze(),Ge=t.scroll,i=t.scrollFn,!0===Ge&&(Ge=P(r,!0)));var d=0,p=Ge;do{var h=p,b=T(h),m=b.top,f=b.bottom,g=b.left,y=b.right,v=b.width,O=b.height,j=void 0,w=void 0,k=h.scrollWidth,S=h.scrollHeight,I=_(h),E=h.scrollLeft,A=h.scrollTop;h===c?(j=v<k&&("auto"===I.overflowX||"scroll"===I.overflowX||"visible"===I.overflowX),w=O<S&&("auto"===I.overflowY||"scroll"===I.overflowY||"visible"===I.overflowY)):(j=v<k&&("auto"===I.overflowX||"scroll"===I.overflowX),w=O<S&&("auto"===I.overflowY||"scroll"===I.overflowY));var M=j&&(Math.abs(y-o)<=s&&E+v<k)-(Math.abs(g-o)<=s&&!!E),C=w&&(Math.abs(f-a)<=s&&A+O<S)-(Math.abs(m-a)<=s&&!!A);if(!Xe[d])for(var N=0;N<=d;N++)Xe[N]||(Xe[N]={});Xe[d].vx==M&&Xe[d].vy==C&&Xe[d].el===h||(Xe[d].el=h,Xe[d].vx=M,Xe[d].vy=C,clearInterval(Xe[d].pid),0==M&&0==C||(u=!0,Xe[d].pid=setInterval(function(){n&&0===this.layer&&Fe.active._onTouchMove(Ye);var t=Xe[this.layer].vy?Xe[this.layer].vy*l:0,r=Xe[this.layer].vx?Xe[this.layer].vx*l:0;"function"===typeof i&&"continue"!==i.call(Fe.dragged.parentNode[R],r,t,e,Ye,Xe[this.layer].el)||F(Xe[this.layer].el,r,t)}.bind({layer:d}),24))),d++}while(t.bubbleScroll&&p!==c&&(p=P(p,!1)));Ke=u}}),30),tt=function(e){var t=e.originalEvent,r=e.putSortable,n=e.dragEl,i=e.activeSortable,o=e.dispatchSortableEvent,a=e.hideGhostForTarget,s=e.unhideGhostForTarget;if(t){var l=r||i;a();var c=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:t,u=document.elementFromPoint(c.clientX,c.clientY);s(),l&&!l.el.contains(u)&&(o("spill"),this.onSpill({dragEl:n,putSortable:r}))}};function rt(){}function nt(){}rt.prototype={startIndex:null,dragStart:function(e){var t=e.oldDraggableIndex;this.startIndex=t},onSpill:function(e){var t=e.dragEl,r=e.putSortable;this.sortable.captureAnimationState(),r&&r.captureAnimationState();var n=A(this.sortable.el,this.startIndex,this.options);n?this.sortable.el.insertBefore(t,n):this.sortable.el.appendChild(t),this.sortable.animateAll(),r&&r.animateAll()},drop:tt},o(rt,{pluginName:"revertOnSpill"}),nt.prototype={onSpill:function(e){var t=e.dragEl,r=e.putSortable||this.sortable;r.captureAnimationState(),t.parentNode&&t.parentNode.removeChild(t),r.animateAll()},drop:tt},o(nt,{pluginName:"removeOnSpill"});Fe.mount(new function(){function e(){for(var e in this.defaults={scroll:!0,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0},this)"_"===e.charAt(0)&&"function"===typeof this[e]&&(this[e]=this[e].bind(this))}return e.prototype={dragStarted:function(e){var t=e.originalEvent;this.sortable.nativeDraggable?f(document,"dragover",this._handleAutoScroll):this.options.supportPointer?f(document,"pointermove",this._handleFallbackAutoScroll):t.touches?f(document,"touchmove",this._handleFallbackAutoScroll):f(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(e){var t=e.originalEvent;this.options.dragOverBubble||t.rootEl||this._handleAutoScroll(t)},drop:function(){this.sortable.nativeDraggable?g(document,"dragover",this._handleAutoScroll):(g(document,"pointermove",this._handleFallbackAutoScroll),g(document,"touchmove",this._handleFallbackAutoScroll),g(document,"mousemove",this._handleFallbackAutoScroll)),Qe(),Ze(),clearTimeout(j),j=void 0},nulling:function(){Ye=Je=Ge=Ke=He=ze=$e=null,Xe.length=0},_handleFallbackAutoScroll:function(e){this._handleAutoScroll(e,!0)},_handleAutoScroll:function(e,t){var r=this,n=(e.touches?e.touches[0]:e).clientX,i=(e.touches?e.touches[0]:e).clientY,o=document.elementFromPoint(n,i);if(Ye=e,t||u||c||p){et(e,this.options,o,t);var a=P(o,!0);!Ke||He&&n===ze&&i===$e||(He&&Qe(),He=setInterval((function(){var o=P(document.elementFromPoint(n,i),!0);o!==a&&(a=o,Ze()),et(e,r.options,o,t)}),10),ze=n,$e=i)}else{if(!this.options.bubbleScroll||P(o,!0)===x())return void Ze();et(e,this.options,P(o,!1),!1)}}},o(e,{pluginName:"scroll",initializeByDefault:!0})}),Fe.mount(nt,rt),t.a=Fe}}]);
//# sourceMappingURL=92.005723e5.chunk.js.map