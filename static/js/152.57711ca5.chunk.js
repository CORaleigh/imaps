(this.webpackJsonpimaps=this.webpackJsonpimaps||[]).push([[152],{181:function(e,t,i){"use strict";i.d(t,"a",(function(){return n})),i.d(t,"b",(function(){return a}));i(76);function n(e){}function a(e){return()=>e}},198:function(e,t,i){"use strict";i.d(t,"a",(function(){return r}));var n=i(110),a=i(127);const r={inches:Object(n.c)(1,"meters","inches"),feet:Object(n.c)(1,"meters","feet"),"us-feet":Object(n.c)(1,"meters","us-feet"),yards:Object(n.c)(1,"meters","yards"),miles:Object(n.c)(1,"meters","miles"),"nautical-miles":Object(n.c)(1,"meters","nautical-miles"),millimeters:Object(n.c)(1,"meters","millimeters"),centimeters:Object(n.c)(1,"meters","centimeters"),decimeters:Object(n.c)(1,"meters","decimeters"),meters:Object(n.c)(1,"meters","meters"),kilometers:Object(n.c)(1,"meters","kilometers"),"decimal-degrees":1/Object(n.m)(1,"meters",a.a.radius)}},242:function(e,t,i){"use strict";function n(e){return e&&"esri.renderers.visualVariables.SizeVariable"===e.declaredClass}function a(e){return null!=e&&!isNaN(e)&&isFinite(e)}function r(e){return e.valueExpression?"expression":e.field&&"string"==typeof e.field?"field":"unknown"}function s(e,t){const i=t||r(e),n=e.valueUnit||"unknown";return"unknown"===i?"constant":e.stops?"stops":null!=e.minSize&&null!=e.maxSize&&null!=e.minDataValue&&null!=e.maxDataValue?"clamped-linear":"unknown"===n?null!=e.minSize&&null!=e.minDataValue?e.minSize&&e.minDataValue?"proportional":"additive":"identity":"real-world-size"}i.d(t,"a",(function(){return r})),i.d(t,"b",(function(){return s})),i.d(t,"c",(function(){return n})),i.d(t,"d",(function(){return a}))},277:function(e,t,i){"use strict";i.r(t),i.d(t,"getAllSizes",(function(){return w})),i.d(t,"getColor",(function(){return p})),i.d(t,"getOpacity",(function(){return m})),i.d(t,"getRotationAngle",(function(){return v})),i.d(t,"getSize",(function(){return h})),i.d(t,"getSizeForValue",(function(){return j})),i.d(t,"getSizeFromNumberOrVariable",(function(){return V})),i.d(t,"getSizeRangeAtScale",(function(){return O})),i.d(t,"getVisualVariableValues",(function(){return g})),i.d(t,"viewScaleRE",(function(){return b}));var n=i(103),a=i(115),r=i(181),s=i(77),c=i(82),l=i(198),o=i(242);const u=s.a.getLogger("esri.renderers.visualVariables.support.visualVariableUtils"),f=new a.a,d=Math.PI,b=/^\s*(return\s+)?\$view\.scale\s*(;)?\s*$/i;function p(e,t,i){const a="visualVariables"in e&&e.visualVariables?e.visualVariables.filter((e=>"color"===e.type))[0]:e;if(!a)return;if("esri.renderers.visualVariables.ColorVariable"!==a.declaredClass)return void u.warn("The visualVariable should be an instance of esri.renderers.visualVariables.ColorVariable");const r="number"==typeof t,s=r?null:t,l=s&&s.attributes;let o=r?t:null;const f=a.field,{ipData:d,hasExpression:b}=a.cache;let p=a.cache.compiledFunc;if(!f&&!b){const e=a.stops;return e&&e[0]&&e[0].color}if("number"!=typeof o)if(b){if(!Object(c.k)(i)||!Object(c.k)(i.arcade))return void u.error("Use of arcade expressions requires an arcade context");const e={viewingMode:i.viewingMode,scale:i.scale,spatialReference:i.spatialReference},t=i.arcade.arcadeUtils,n=t.getViewInfo(e),r=t.createExecContext(s,n);if(!p){const e=t.createSyntaxTree(a.valueExpression);p=t.createFunction(e),a.cache.compiledFunc=p}o=t.executeFunction(p,r)}else l&&(o=l[f]);const m=a.normalizationField,v=l?parseFloat(l[m]):void 0;if(null!=o&&(!m||r||!isNaN(v)&&0!==v)){isNaN(v)||r||(o/=v);const e=y(o,d);if(e){const t=e[0],r=e[1],s=t===r?a.stops[t].color:n.a.blendColors(a.stops[t].color,a.stops[r].color,e[2],Object(c.k)(i)?i.color:void 0);return new n.a(s)}}}function m(e,t,i){const n="visualVariables"in e&&e.visualVariables?e.visualVariables.filter((e=>"opacity"===e.type))[0]:e;if(!n)return;if("esri.renderers.visualVariables.OpacityVariable"!==n.declaredClass)return void u.warn("The visualVariable should be an instance of esri.renderers.visualVariables.OpacityVariable");const a="number"==typeof t,r=a?null:t,s=r&&r.attributes;let l=a?t:null;const o=n.field,{ipData:f,hasExpression:d}=n.cache;let b=n.cache.compiledFunc;if(!o&&!d){const e=n.stops;return e&&e[0]&&e[0].opacity}if("number"!=typeof l)if(d){if(Object(c.j)(i)||Object(c.j)(i.arcade))return void u.error("Use of arcade expressions requires an arcade context");const e={viewingMode:i.viewingMode,scale:i.scale,spatialReference:i.spatialReference},t=i.arcade.arcadeUtils,a=t.getViewInfo(e),s=t.createExecContext(r,a);if(!b){const e=t.createSyntaxTree(n.valueExpression);b=t.createFunction(e),n.cache.compiledFunc=b}l=t.executeFunction(b,s)}else s&&(l=s[o]);const p=n.normalizationField,m=s?parseFloat(s[p]):void 0;if(null!=l&&(!p||a||!isNaN(m)&&0!==m)){isNaN(m)||a||(l/=m);const e=y(l,f);if(e){const t=e[0],i=e[1];if(t===i)return n.stops[t].opacity;{const a=n.stops[t].opacity;return a+(n.stops[i].opacity-a)*e[2]}}}}function v(e,t,i){const n="visualVariables"in e&&e.visualVariables?e.visualVariables.filter((e=>"rotation"===e.type))[0]:e;if(!n)return;if("esri.renderers.visualVariables.RotationVariable"!==n.declaredClass)return void u.warn("The visualVariable should be an instance of esri.renderers.visualVariables.RotationVariable");const a=n.axis||"heading",r="heading"===a&&"arithmetic"===n.rotationType?90:0,s="heading"===a&&"arithmetic"===n.rotationType?-1:1,l="number"==typeof t?null:t,o=l&&l.attributes,f=n.field,{hasExpression:d}=n.cache;let b=n.cache.compiledFunc,p=0;if(!f&&!d)return p;if(d){if(Object(c.j)(i)||Object(c.j)(i.arcade))return void u.error("Use of arcade expressions requires an arcade context");const e={viewingMode:i.viewingMode,scale:i.scale,spatialReference:i.spatialReference},t=i.arcade.arcadeUtils,a=t.getViewInfo(e),r=t.createExecContext(l,a);if(!b){const e=t.createSyntaxTree(n.valueExpression);b=t.createFunction(e),n.cache.compiledFunc=b}p=t.executeFunction(b,r)}else o&&(p=o[f]||0);return p="number"!=typeof p||isNaN(p)?null:r+s*p,p}function h(e,t,i){const n="visualVariables"in e&&e.visualVariables?e.visualVariables.filter((e=>"size"===e.type))[0]:e;if(!n)return;if("esri.renderers.visualVariables.SizeVariable"!==n.declaredClass)return void u.warn("The visualVariable should be an instance of esri.renderers.visualVariables.SizeVariable");const a=j(function(e,t,i){const n="number"==typeof t,a=n?null:t,r=a&&a.attributes;let s=n?t:null;const{isScaleDriven:l}=e.cache;let f=e.cache.compiledFunc;if(l){const t=Object(c.k)(i)?i.scale:void 0,n=Object(c.k)(i)?i.view:void 0;s=null==t||"3d"===n?function(e){let t=null,i=null;const n=e.stops;return n?(t=n[0].value,i=n[n.length-1].value):(t=e.minDataValue||0,i=e.maxDataValue||0),(t+i)/2}(e):t}else if(!n)switch(e.inputValueType){case"expression":{if(Object(c.j)(i)||Object(c.j)(i.arcade))return void u.error("Use of arcade expressions requires an arcade context");const t={viewingMode:i.viewingMode,scale:i.scale,spatialReference:i.spatialReference},n=i.arcade.arcadeUtils,r=n.getViewInfo(t),l=n.createExecContext(a,r);if(!f){const t=n.createSyntaxTree(e.valueExpression);f=n.createFunction(t),e.cache.compiledFunc=f}s=n.executeFunction(f,l);break}case"field":r&&(s=r[e.field]);break;case"unknown":s=null}if(!Object(o.d)(s))return null;if(n||!e.normalizationField)return s;const d=r?parseFloat(r[e.normalizationField]):null;return Object(o.d)(d)&&0!==d?s/d:null}(n,t,i),n,t,i,n.cache.ipData);return null==a||isNaN(a)?0:a}function V(e,t,i){return null==e?null:Object(o.c)(e)?h(e,t,i):Object(o.d)(e)?e:null}function x(e,t,i){return Object(o.d)(i)&&e>i?i:Object(o.d)(t)&&e<t?t:e}function j(e,t,i,n,a){switch(t.transformationType){case"additive":return function(e,t,i,n){return e+(V(t.minSize,i,n)||t.minDataValue)}(e,t,i,n);case"constant":return function(e,t,i){const n=e.stops;let a=n&&n.length&&n[0].size;return null==a&&(a=e.minSize),V(a,t,i)}(t,i,n);case"clamped-linear":return function(e,t,i,n){const a=(e-t.minDataValue)/(t.maxDataValue-t.minDataValue),r=V(t.minSize,i,n),s=V(t.maxSize,i,n),l=Object(c.k)(n)?n.shape:void 0;if(e<=t.minDataValue)return r;if(e>=t.maxDataValue)return s;if("area"===t.scaleBy&&l){const e="circle"===l,t=e?d*(r/2)**2:r*r,i=t+a*((e?d*(s/2)**2:s*s)-t);return e?2*Math.sqrt(i/d):Math.sqrt(i)}return r+a*(s-r)}(e,t,i,n);case"proportional":return function(e,t,i,n){const a=Object(c.k)(n)?n.shape:void 0,r=e/t.minDataValue,s=V(t.minSize,i,n),l=V(t.maxSize,i,n);let o=null;return o="circle"===a?2*Math.sqrt(r*(s/2)**2):"square"===a||"diamond"===a||"image"===a?Math.sqrt(r*s**2):r*s,x(o,s,l)}(e,t,i,n);case"stops":return function(e,t,i,n,a){const[r,s,c]=y(e,a);if(r===s)return V(t.stops[r].size,i,n);{const e=V(t.stops[r].size,i,n);return e+(V(t.stops[s].size,i,n)-e)*c}}(e,t,i,n,a);case"real-world-size":return function(e,t,i,n){const a=(Object(c.k)(n)&&n.resolution?n.resolution:1)*l.a[t.valueUnit],r=V(t.minSize,i,n),s=V(t.maxSize,i,n),{valueRepresentation:o}=t;let u=null;return u="area"===o?2*Math.sqrt(e/d)/a:"radius"===o||"distance"===o?2*e/a:e/a,x(u,r,s)}(e,t,i,n);case"identity":return e;case"unknown":return null}}function O(e,t,i){const{isScaleDriven:n}=e.cache;if(!(n&&"3d"===i||t))return null;const a={scale:t,view:i};let r=V(e.minSize,f,a),s=V(e.maxSize,f,a);if(null!=r||null!=s){if(r>s){const e=s;s=r,r=e}return{minSize:r,maxSize:s}}}function g(e,t,i){if(!e.visualVariables)return;const n=[],a=[],r=[],s=[],c=[];for(const l of e.visualVariables)switch(l.type){case"color":a.push(l);break;case"opacity":r.push(l);break;case"rotation":c.push(l);break;case"size":s.push(l)}return a.forEach((e=>{const a=p(e,t,i);n.push({variable:e,value:a})})),r.forEach((e=>{const a=m(e,t,i);n.push({variable:e,value:a})})),c.forEach((e=>{const a=v(e,t,i);n.push({variable:e,value:a})})),s.forEach((e=>{const a=h(e,t,i);n.push({variable:e,value:a})})),n.filter((e=>null!=e.value))}function y(e,t){if(!t)return;let i=0,n=t.length-1;return t.some(((t,a)=>e<t?(n=a,!0):(i=a,!1))),[i,n,(e-t[i])/(t[n]-t[i])]}function w(e,t,i){const n=["proportional","proportional","proportional"];for(const a of e){const e=a.useSymbolValue?"symbol-value":h(a,t,i);switch(a.axis){case"width":n[0]=e;break;case"depth":n[1]=e;break;case"height":n[2]=e;break;case"width-and-depth":n[0]=e,n[1]=e;break;case"all":case void 0:case null:n[0]=e,n[1]=e,n[2]=e;break;default:Object(r.a)(a.axis)}}return n}},288:function(e,t,i){"use strict";i.d(t,"a",(function(){return o}));var n=i(78),a=i(77),r=i(82),s=i(80),c=(i(76),i(81),i(79)),l=i(196);const o=e=>{let t=class extends e{get title(){if(this._get("title")&&"defaults"!==this.originOf("title"))return this._get("title");if(this.url){const e=Object(l.f)(this.url);if(Object(r.k)(e)&&e.title)return e.title}return this._get("title")||""}set title(e){this._set("title",e)}set url(e){this._set("url",Object(l.h)(e,a.a.getLogger(this.declaredClass)))}};return Object(n.a)([Object(s.b)()],t.prototype,"title",null),Object(n.a)([Object(s.b)({type:String})],t.prototype,"url",null),t=Object(n.a)([Object(c.a)("esri.layers.mixins.ArcGISService")],t),t}}}]);
//# sourceMappingURL=152.57711ca5.chunk.js.map