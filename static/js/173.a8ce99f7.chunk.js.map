{"version":3,"sources":["../node_modules/@arcgis/core/layers/support/arcgisLayerUrl.js","../node_modules/@arcgis/core/chunks/persistableUrlUtils.js","../node_modules/@arcgis/core/layers/support/arcgisLayers.js","../node_modules/@arcgis/core/layers/support/lazyLayerLoader.js"],"names":["l","a","RegExp","join","c","f","d","e","test","p","t","r","n","path","match","s","i","o","u","indexOf","title","v","slice","serverType","sublayer","parseInt","url","m","serviceUrl","sublayerId","Number","replace","toUpperCase","w","push","length","toLowerCase","h","x","g","logger","layer","layerId","nonStandardUrlAllowed","O","toString","S","C","authority","L","includes","preserveProtocolRelative","portalItem","readResourcePaths","itemUrl","resourceFromPath","I","portal","blockedRelativeUrls","verifyItemRelativeUrls","rootPath","writtenUrls","isPortal","urlKey","customBaseUrl","portalHostname","U","resources","toKeep","resource","scheme","R","Object","freeze","__proto__","fromJSON","toJSON","read","write","itemIdFromResourceUrl","async","properties","customParameters","FeatureServer","StreamServer","VectorTileServer","tileInfo","then","format","cacheType","Point","IntegratedMesh","PointCloud","Building","Array","isArray","layers","layerType","y","FeatureLayer","SceneLayer","parsedUrl","Constructor","layerOrTableId","sublayerIds","tableIds","sublayerInfos","layerInfos","tableInfos","layerIds","b","sourceJSON","default","sublayerTitleMode","forEach","add","tables","find","id","type","hasOwnProperty","name","filter","serviceJSON","currentVersion","layersJSON","map","reverse","responseType","query","data","BingMapsLayer","BuildingSceneLayer","CSVLayer","ElevationLayer","GroupLayer","GeoRSSLayer","ImageryLayer","ImageryTileLayer","IntegratedMeshLayer","KMLLayer","MapImageLayer","MapNotesLayer","OGCFeatureLayer","OpenStreetMapLayer","PointCloudLayer","RouteLayer","StreamLayer","TileLayer","UnknownLayer","UnsupportedLayer","VectorTileLayer","VoxelLayer","WebTileLayer","WFSLayer","WMSLayer","WMTSLayer"],"mappings":"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","file":"static/js/173.a8ce99f7.chunk.js","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport{isSome as e}from\"../../core/maybe.js\";import{urlToObject as r,removeTrailingSlash as t,removeQueryParameters as n,join as s,Url as i,makeAbsolute as o}from\"../../core/urlUtils.js\";import{w as u}from\"../../chunks/persistableUrlUtils.js\";const l=[\"MapServer\",\"ImageServer\",\"FeatureServer\",\"SceneServer\",\"StreamServer\",\"VectorTileServer\"],a=new RegExp(`^((?:https?:)?\\\\/\\\\/\\\\S+?\\\\/rest\\\\/services\\\\/(.+?)\\\\/(${l.join(\"|\")}))(?:\\\\/(?:layers\\\\/)?(\\\\d+))?`,\"i\"),c=new RegExp(`^((?:https?:)?\\\\/\\\\/\\\\S+?\\\\/([^\\\\/\\\\n]+)\\\\/(${l.join(\"|\")}))(?:\\\\/(?:layers\\\\/)?(\\\\d+))?`,\"i\"),f=/(.*?)\\/(?:layers\\/)?(\\d+)\\/?$/i;function d(e){return!!a.test(e)}function p(e){const t=r(e),n=t.path.match(a)||t.path.match(c);if(!n)return null;const[,s,i,o,u]=n,l=i.indexOf(\"/\");return{title:v(-1!==l?i.slice(l+1):i),serverType:o,sublayer:null!=u&&\"\"!==u?parseInt(u,10):null,url:{path:s}}}function m(e){const t=r(e).path.match(f);return t?{serviceUrl:t[1],sublayerId:Number(t[2])}:null}function v(e){return(e=e.replace(/\\s*[/_]+\\s*/g,\" \"))[0].toUpperCase()+e.slice(1)}function w(r,t){const n=[];if(r){const t=p(r);e(t)&&t.title&&n.push(t.title)}if(t){const e=v(t);n.push(e)}if(2===n.length){if(-1!==n[0].toLowerCase().indexOf(n[1].toLowerCase()))return n[0];if(-1!==n[1].toLowerCase().indexOf(n[0].toLowerCase()))return n[1]}return n.join(\" - \")}function h(e){if(!e)return!1;const r=\".arcgis.com/\",t=\"//services\",n=\"//tiles\",s=\"//features\",i=-1!==(e=e.toLowerCase()).indexOf(r),o=-1!==e.indexOf(t)||-1!==e.indexOf(n)||-1!==e.indexOf(s);return i&&o}function y(e,r){return r&&e&&-1!==e.toLowerCase().indexOf(r.toLowerCase())}function x(e,r){return e?t(n(e,r)):e}function g(s){let{url:i}=s;if(!i)return{url:i};i=n(i,s.logger);const o=r(i),u=p(o.path);let l;if(e(u))null!=u.sublayer&&null==s.layer.layerId&&(l=u.sublayer),i=u.url.path;else if(s.nonStandardUrlAllowed){const r=m(o.path);e(r)&&(i=r.serviceUrl,l=r.sublayerId)}return{url:t(i),layerId:l}}function O(e,r,t,n,i){u(r,n,\"url\",i),n.url&&null!=e.layerId&&(n.url=s(n.url,t,e.layerId.toString()))}function S(e){if(!e)return!1;const r=e.toLowerCase(),t=-1!==r.indexOf(\"/services/\"),n=-1!==r.indexOf(\"/mapserver/wmsserver\"),s=-1!==r.indexOf(\"/imageserver/wmsserver\"),i=-1!==r.indexOf(\"/wmsserver\");return t&&(n||s||i)}function C(e){if(!e)return!1;const r=new i(o(e)).authority.toLowerCase();return\"server.arcgisonline.com\"===r||\"services.arcgisonline.com\"===r}function L(e){if(!e)return!1;return new i(o(e)).authority.toLowerCase().includes(\"arcgis.com\")}export{v as cleanTitle,L as isAGOLUrl,d as isArcGISUrl,h as isHostedAgolService,y as isHostedSecuredProxyService,C as isServerOrServicesAGOLUrl,S as isWmsServer,p as parse,m as parseNonStandardSublayerUrl,x as sanitizeUrl,g as sanitizeUrlWithLayerId,l as serverTypes,w as titleFromUrlAndName,O as writeUrlWithLayerId};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport{isSome as r}from\"../core/maybe.js\";import{makeAbsolute as e,makeRelative as t,isAbsolute as o,normalize as s,isDataProtocol as l,changeDomain as a,hasSameOrigin as u,appUrl as n}from\"../core/urlUtils.js\";function c(r,o){const s=o&&o.url&&o.url.path;if(r&&s&&(r=e(r,s,{preserveProtocolRelative:!0}),o.portalItem&&o.readResourcePaths)){const e=t(r,o.portalItem.itemUrl);h.test(e)&&o.readResourcePaths.push(o.portalItem.resourceFromPath(e).path)}return I(r,o&&o.portal)}function i(r,a,u=0){if(!r)return r;!o(r)&&a&&a.blockedRelativeUrls&&a.blockedRelativeUrls.push(r);let n=e(r);if(a){const e=a.verifyItemRelativeUrls&&a.verifyItemRelativeUrls.rootPath||a.url&&a.url.path;if(e){const o=I(e,a.portal);n=t(I(n,a.portal),o,o),n!==r&&a.verifyItemRelativeUrls&&a.verifyItemRelativeUrls.writtenUrls.push(n)}}return n=U(n,a&&a.portal),o(n)&&(n=s(n)),null!=a&&a.resources&&null!=a&&a.portalItem&&!o(n)&&!l(n)&&0===u&&a.resources.toKeep.push({resource:a.portalItem.resourceFromPath(n)}),n}function m(r,e,t){return c(r,t)}function p(r,e,t,o){const s=i(r,o);void 0!==s&&(e[t]=s)}const f=/\\/items\\/([^\\/]+)\\/resources\\//,h=/^\\.\\/resources\\//;function v(e){const t=r(e)?e.match(f):null;return r(t)?t[1]:null}function U(r,e){return e&&!e.isPortal&&e.urlKey&&e.customBaseUrl?a(r,`${e.urlKey}.${e.customBaseUrl}`,e.portalHostname):r}function I(r,e){if(!e||e.isPortal||!e.urlKey||!e.customBaseUrl)return r;const t=`${e.urlKey}.${e.customBaseUrl}`;return u(n,`${n.scheme}://${t}`)?a(r,e.portalHostname,t):a(r,t,e.portalHostname)}var R=Object.freeze({__proto__:null,fromJSON:c,toJSON:i,read:m,write:p,itemIdFromResourceUrl:v});export{c as f,v as i,R as p,m as r,i as t,p as w};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport e from\"../../request.js\";import r from\"../../core/Error.js\";import{isNone as a,isSome as t}from\"../../core/maybe.js\";import{getFilename as l,urlToObject as n}from\"../../core/urlUtils.js\";import{parse as s,parseNonStandardSublayerUrl as o}from\"./arcgisLayerUrl.js\";import{layerLookupMap as u}from\"./lazyLayerLoader.js\";async function i(e){var r;const a=null==(r=e.properties)?void 0:r.customParameters,t=await d(e.url,a),l={...e.properties,url:e.url};if(!t.sublayerIds)return null!=t.layerOrTableId&&(l.layerId=t.layerOrTableId,l.sourceJSON=t.sourceJSON),new t.Constructor(l);const n=new(0,(await import(\"../GroupLayer.js\")).default)({title:t.parsedUrl.title});return c(n,t,l),n}function y(e,r){return e?e.find((e=>e.id===r)):null}function c(e,r,a){function l(e,l){const n={...a,layerId:e,sublayerTitleMode:\"service-name\"};return t(l)&&(n.sourceJSON=l),new r.Constructor(n)}r.sublayerIds.forEach((a=>{const t=l(a,y(r.sublayerInfos,a));e.add(t)})),r.tableIds.forEach((a=>{const t=l(a,y(r.tableInfos,a));e.tables.add(t)}))}async function d(e,t){let l=s(e);if(a(l)&&(l=await f(e,t)),a(l))throw new r(\"arcgis-layers:url-mismatch\",\"The url '${url}' is not a valid arcgis resource\",{url:e});const{serverType:n,sublayer:o}=l;let u;const i={FeatureServer:\"FeatureLayer\",StreamServer:\"StreamLayer\",VectorTileServer:\"VectorTileLayer\"};switch(n){case\"MapServer\":u=null!=o?\"FeatureLayer\":S(e,t).then((e=>e?\"TileLayer\":\"MapImageLayer\"));break;case\"ImageServer\":u=w(e,t).then((e=>{const r=e.tileInfo&&e.tileInfo.format;return e.tileInfo?!r||\"LERC\"!==r.toUpperCase()||e.cacheType&&\"elevation\"!==e.cacheType.toLowerCase()?\"ImageryTileLayer\":\"ElevationLayer\":\"ImageryLayer\"}));break;case\"SceneServer\":u=w(l.url.path,t).then((e=>{const r={Point:\"SceneLayer\",\"3DObject\":\"SceneLayer\",IntegratedMesh:\"IntegratedMeshLayer\",PointCloud:\"PointCloudLayer\",Building:\"BuildingSceneLayer\"};if(e&&Array.isArray(e.layers)&&e.layers.length>0){const a=e.layers[0].layerType;if(null!=r[a])return r[a]}return\"SceneLayer\"}));break;default:u=i[n]}const y={FeatureLayer:!0,SceneLayer:!0},c=\"FeatureServer\"===n,d={parsedUrl:l,Constructor:null,layerOrTableId:c?o:null,sublayerIds:null,tableIds:null},p=await u;if(y[p]&&null==o){const r=await v(e,n,t);c&&(d.sublayerInfos=r.layerInfos,d.tableInfos=r.tableInfos);if(1!==r.layerIds.length+r.tableIds.length)d.sublayerIds=r.layerIds,d.tableIds=r.tableIds;else if(c){var I,b;d.layerOrTableId=null!=(I=r.layerIds[0])?I:r.tableIds[0],d.sourceJSON=null!=(b=r.layerInfos[0])?b:r.tableInfos[0]}}return d.Constructor=await m(p),d}async function f(e,r){var a;const s=await w(e,r);let u=null,i=null;const y=s.type;if(\"Feature Layer\"===y||\"Table\"===y?(u=\"FeatureServer\",i=s.id):\"indexedVector\"===y?u=\"VectorTileServer\":s.hasOwnProperty(\"mapName\")?u=\"MapServer\":s.hasOwnProperty(\"bandCount\")&&s.hasOwnProperty(\"pixelSizeX\")?u=\"ImageServer\":s.hasOwnProperty(\"maxRecordCount\")&&s.hasOwnProperty(\"allowGeometryUpdates\")?u=\"FeatureServer\":s.hasOwnProperty(\"streamUrls\")?u=\"StreamServer\":p(s)?(u=\"SceneServer\",i=s.id):s.hasOwnProperty(\"layers\")&&p(null==(a=s.layers)?void 0:a[0])&&(u=\"SceneServer\"),!u)return null;const c=null!=i?o(e):null;return{title:t(c)&&s.name||l(e),serverType:u,sublayer:i,url:{path:t(c)?c.serviceUrl:n(e).path}}}function p(e){return(null==e?void 0:e.hasOwnProperty(\"store\"))&&e.hasOwnProperty(\"id\")&&\"number\"==typeof e.id}async function v(e,r,a){var t,l;let n,s=!1;if(\"FeatureServer\"===r){const r=await b(e,a);s=!!r.layersJSON,n=r.layersJSON||r.serviceJSON}else n=await w(e,a);const o=null==(t=n)?void 0:t.layers,u=null==(l=n)?void 0:l.tables;return{layerIds:(null==o?void 0:o.map((e=>e.id)).reverse())||[],tableIds:(null==u?void 0:u.map((e=>e.id)).reverse())||[],layerInfos:s?o:[],tableInfos:s?u:[]}}function I(e){return!e.type||\"Feature Layer\"===e.type}async function b(e,r){var a,t;let l=await w(e,r);l=l||{},l.layers=(null==(a=l.layers)?void 0:a.filter(I))||[];const n={serviceJSON:l};if(l.currentVersion<10.5)return n;const s=await w(e+\"/layers\",r);return n.layersJSON={layers:(null==s||null==(t=s.layers)?void 0:t.filter(I))||[],tables:(null==s?void 0:s.tables)||[]},n}async function m(e){return(0,u[e])()}async function S(e,r){return(await w(e,r)).tileInfo}async function w(r,a){return(await e(r,{responseType:\"json\",query:{f:\"json\",...a}})).data}export{i as fromUrl};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nconst a={BingMapsLayer:async()=>(await import(\"../BingMapsLayer.js\")).default,BuildingSceneLayer:async()=>(await import(\"../BuildingSceneLayer.js\")).default,CSVLayer:async()=>(await import(\"../CSVLayer.js\")).default,ElevationLayer:async()=>(await import(\"../ElevationLayer.js\")).default,FeatureLayer:async()=>(await import(\"../FeatureLayer.js\")).default,GroupLayer:async()=>(await import(\"../GroupLayer.js\")).default,GeoRSSLayer:async()=>(await import(\"../GeoRSSLayer.js\")).default,ImageryLayer:async()=>(await import(\"../ImageryLayer.js\")).default,ImageryTileLayer:async()=>(await import(\"../ImageryTileLayer.js\")).default,IntegratedMeshLayer:async()=>(await import(\"../IntegratedMeshLayer.js\")).default,KMLLayer:async()=>(await import(\"../KMLLayer.js\")).default,MapImageLayer:async()=>(await import(\"../MapImageLayer.js\")).default,MapNotesLayer:async()=>(await import(\"../MapNotesLayer.js\")).default,OGCFeatureLayer:async()=>(await import(\"../OGCFeatureLayer.js\")).default,OpenStreetMapLayer:async()=>(await import(\"../OpenStreetMapLayer.js\")).default,PointCloudLayer:async()=>(await import(\"../PointCloudLayer.js\")).default,RouteLayer:async()=>(await import(\"../RouteLayer.js\")).default,SceneLayer:async()=>(await import(\"../SceneLayer.js\")).default,StreamLayer:async()=>(await import(\"../StreamLayer.js\")).default,TileLayer:async()=>(await import(\"../TileLayer.js\")).default,UnknownLayer:async()=>(await import(\"../UnknownLayer.js\")).default,UnsupportedLayer:async()=>(await import(\"../UnsupportedLayer.js\")).default,VectorTileLayer:async()=>(await import(\"../VectorTileLayer.js\")).default,VoxelLayer:async()=>(await import(\"../VoxelLayer.js\")).default,WebTileLayer:async()=>(await import(\"../WebTileLayer.js\")).default,WFSLayer:async()=>(await import(\"../WFSLayer.js\")).default,WMSLayer:async()=>(await import(\"../WMSLayer.js\")).default,WMTSLayer:async()=>(await import(\"../WMTSLayer.js\")).default};export{a as layerLookupMap};\n"],"sourceRoot":""}