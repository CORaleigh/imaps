{"version":3,"file":"static/js/7220.19abe2ee.chunk.js","mappings":"yQAI6Q,SAASA,EAAEC,GAAG,OAAOA,EAAE,CAACC,QAAOC,EAAAA,EAAAA,GAAEF,EAAEC,QAAQE,QAAOD,EAAAA,EAAAA,GAAEF,EAAEG,SAAS,CAACF,QAAOG,EAAAA,EAAAA,KAAID,QAAOC,EAAAA,EAAAA,KAAK,CAA+D,SAASC,EAAEL,GAAQ,IAANM,EAAM,uDAAJP,IAAK,OAAOQ,EAAEP,EAAEC,OAAOD,EAAEG,OAAOG,EAAG,UAASC,EAAEP,EAAEM,GAAQ,IAANE,EAAM,uDAAJT,IAAK,OAAOU,EAAAA,EAAAA,GAAED,EAAEP,OAAOD,IAAGS,EAAAA,EAAAA,GAAED,EAAEL,OAAOG,GAAGE,CAAE,UAASE,EAAEV,EAAEM,GAAQ,IAANK,EAAM,uDAAJZ,IAAK,OAAOU,EAAAA,EAAAA,GAAEE,EAAEV,OAAOD,IAAGQ,EAAAA,EAAAA,GAAEG,EAAER,OAAOG,EAAEN,GAAGW,CAAE,UAASC,EAAEN,EAAEG,GAAG,MAAMI,GAAEL,EAAAA,EAAAA,GAAEM,EAAAA,GAAAA,MAAQL,EAAEH,EAAEL,QAAQc,GAAEJ,EAAAA,EAAAA,GAAEL,EAAEH,OAAOU,GAAGG,GAAEL,EAAAA,EAAAA,GAAEL,EAAEH,OAAOG,EAAEH,QAAQD,GAAEF,EAAAA,EAAAA,IAAEe,EAAEC,EAAE,EAAE,GAAGZ,GAAEI,EAAAA,EAAAA,GAAEM,EAAAA,GAAAA,OAAQG,EAAAA,EAAAA,GAAEH,EAAAA,GAAAA,MAAQR,EAAEH,OAAOD,GAAGW,GAAG,OAAOF,EAAAA,EAAAA,GAAEP,EAAEA,EAAG,CAAyC,SAASc,EAAElB,EAAEM,EAAEG,GAAG,OAAOU,EAAEnB,EAAEM,EAAE,EAAE,EAAEG,EAAG,UAASW,EAAEpB,EAAEM,EAAEG,GAAG,OAAOI,EAAAA,EAAAA,GAAEJ,EAAET,EAAEC,QAAOgB,EAAAA,EAAAA,GAAER,EAAET,EAAEG,OAAOG,GAAI,UAASa,EAAEb,EAAEG,EAAEO,EAAEd,EAAEE,GAAG,MAAMD,OAAOJ,EAAEE,OAAOoB,GAAGf,EAAED,GAAEG,EAAAA,EAAAA,GAAEM,EAAAA,GAAAA,MAAQL,EAAEY,GAAGd,GAAEI,EAAAA,EAAAA,GAAEZ,EAAEM,IAAGU,EAAAA,EAAAA,GAAEhB,GAAG,OAAOkB,EAAAA,EAAAA,GAAEb,EAAEL,GAAEC,EAAAA,EAAAA,IAAEO,EAAES,EAAEd,KAAIW,EAAAA,EAAAA,GAAET,EAAEA,EAAEE,EAAEL,OAAQ,UAASqB,EAAEtB,EAAEM,GAAG,GAAGiB,EAAEvB,EAAhpB,SAAWA,EAAEM,GAAG,MAAMG,EAAEe,EAAEC,MAAM,OAAOhB,EAAER,OAAOD,EAAES,EAAEN,OAAOG,EAAEG,CAAE,CAAmlBY,CAAEf,EAAEL,OAAOK,EAAEoB,YAAW,EAAGC,GAAG,CAAC,MAAMC,GAAGtB,EAAEuB,GAAGpB,EAAEqB,UAAUtB,GAAGmB,EAAE,GAAGrB,GAAG,GAAGA,GAAG,EAAE,OAAOE,EAAE,GAAGF,EAAE,EAAE,OAAOU,EAAAA,EAAAA,GAAEhB,EAAEC,OAAOQ,GAAG,GAAGH,EAAE,EAAE,OAAOU,EAAAA,EAAAA,IAAEH,EAAAA,EAAAA,GAAEC,EAAAA,GAAAA,MAAQd,EAAEC,OAAOD,EAAEG,QAAQM,EAAG,QAAO,IAAK,UAASsB,EAAE/B,EAAEM,EAAEE,GAAG,QAAQe,EAAEvB,EAAEM,GAAE,EAAGqB,MAAKlB,EAAAA,EAAAA,GAAED,EAAEmB,EAAEK,KAAI,EAAI,CAAoD,SAAST,EAAEjB,EAAEG,EAAED,EAAEG,GAAG,MAAMM,EAAE,KAAKF,EAAET,EAAEL,OAAOC,GAAEW,EAAAA,EAAAA,GAAEC,EAAAA,GAAAA,MAAQC,EAAET,EAAEH,QAAQC,EAAEK,EAAER,OAAOF,GAAEc,EAAAA,EAAAA,GAAEC,EAAAA,GAAAA,MAAQV,EAAEK,EAAEN,QAAQkB,EAAEP,EAAAA,GAAAA,MAAQT,EAAES,EAAAA,GAAAA,MAAQ,GAAGO,EAAE,GAAGN,EAAE,GAAGX,EAAE,GAAGiB,EAAE,GAAGN,EAAE,GAAGX,EAAE,GAAGiB,EAAE,GAAGN,EAAE,GAAGX,EAAE,GAAGC,EAAE,GAAGN,EAAE,GAAGK,EAAE,GAAGC,EAAE,GAAGN,EAAE,GAAGK,EAAE,GAAGC,EAAE,GAAGN,EAAE,GAAGK,EAAE,GAAG6B,KAAKC,IAAI7B,EAAE,IAAIY,GAAGgB,KAAKC,IAAI7B,EAAE,IAAIY,GAAGgB,KAAKC,IAAI7B,EAAE,IAAIY,EAAE,OAAM,EAAG,MAAMV,EAAEO,EAAAA,GAAAA,MAAQ,GAAGP,EAAE,GAAGL,EAAE,GAAGa,EAAE,GAAGR,EAAE,GAAGL,EAAE,GAAGa,EAAE,GAAGR,EAAE,GAAGL,EAAE,GAAGa,EAAE,GAAGkB,KAAKC,IAAI3B,EAAE,IAAIU,GAAGgB,KAAKC,IAAI3B,EAAE,IAAIU,GAAGgB,KAAKC,IAAI3B,EAAE,IAAIU,EAAE,OAAM,EAAG,MAAMP,EAAEW,EAAE,GAAGhB,EAAE,GAAGgB,EAAE,GAAGhB,EAAE,GAAGgB,EAAE,GAAGhB,EAAE,GAAGO,EAAEP,EAAE,GAAGE,EAAE,GAAGF,EAAE,GAAGE,EAAE,GAAGF,EAAE,GAAGE,EAAE,GAAG4B,EAAEd,EAAE,GAAGd,EAAE,GAAGc,EAAE,GAAGd,EAAE,GAAGc,EAAE,GAAGd,EAAE,GAAGW,EAAEb,EAAE,GAAGA,EAAE,GAAGA,EAAE,GAAGA,EAAE,GAAGA,EAAE,GAAGA,EAAE,GAAGe,GAAGb,EAAE,GAAGA,EAAE,GAAGA,EAAE,GAAGA,EAAE,GAAGA,EAAE,GAAGA,EAAE,IAAIW,EAAEN,EAAEA,EAAE,GAAGqB,KAAKC,IAAId,GAAGH,EAAE,OAAM,EAAG,IAAIE,GAAGT,EAAEE,EAAEuB,EAAEjB,GAAGE,EAAEE,GAAGZ,EAAEE,EAAEO,GAAGD,EAAEV,IAAIW,GAAEnB,EAAAA,EAAAA,IAAEmB,EAAE,EAAE,GAAGG,GAAEtB,EAAAA,EAAAA,IAAEsB,EAAE,EAAE,IAAI,MAAMS,EAAEjB,EAAAA,GAAAA,MAAQsB,EAAEtB,EAAAA,GAAAA,MAAQ,OAAOiB,EAAE,GAAGhB,EAAE,GAAGI,EAAEZ,EAAE,GAAGwB,EAAE,GAAGhB,EAAE,GAAGI,EAAEZ,EAAE,GAAGwB,EAAE,GAAGhB,EAAE,GAAGI,EAAEZ,EAAE,GAAG6B,EAAE,GAAGhC,EAAE,GAAGkB,EAAEjB,EAAE,GAAG+B,EAAE,GAAGhC,EAAE,GAAGkB,EAAEjB,EAAE,GAAG+B,EAAE,GAAGhC,EAAE,GAAGkB,EAAEjB,EAAE,GAAGM,EAAEiB,GAAGT,EAAER,EAAE0B,GAAGf,EAAEX,EAAEqB,GAAGD,EAAEpB,EAAEkB,GAAGO,EAAEzB,EAAEmB,WAAUd,EAAAA,EAAAA,GAAEe,EAAEK,IAAG,CAAG,OAAMT,EAAE,CAACC,GAAG,EAAES,GAAG,EAAEL,IAAG5B,EAAAA,EAAAA,KAAIyB,IAAGzB,EAAAA,EAAAA,KAAI0B,UAAU,GAAGN,EAAE,IAAIlB,EAAAA,GAAG,IAAIP,K,iHCA3/DO,E,SAAAA,KAAI,MAAMK,EAAE2B,YAAYtC,GAAGuC,KAAKC,QAAQxC,CAAE,CAAAyC,WAAW,MAAO,oBAAmBF,KAAKC,SAAU,EAAC,SAASzB,EAAEf,EAAES,GAAG,IAAIT,EAAE,CAACS,EAAEA,GAAG,YAAY,MAAMT,EAAE,IAAI0C,MAAMjC,GAAGkC,MAAM,MAAM,IAAIhC,EAAG,GAAEF,QAAQT,IAAK,CAAC,UAASa,EAAEb,EAAES,GAAGT,IAAIS,EAAEA,GAAG,GAAGmC,QAAQC,KAAK,kBAAkBpC,EAAE,KAAK,IAAIiC,MAAM,UAAUC,OAAQ,UAAS1B,EAAEjB,EAAES,EAAEH,EAAEE,GAAG,IAAIG,EAAEI,GAAGT,EAAE,GAAGN,EAAE,IAAIS,EAAE,GAAGI,GAAGL,EAAE,GAAGR,EAAE,IAAIS,EAAE,GAAGM,EAAEF,IAAIF,EAAEI,EAAEA,EAAEF,EAAEA,EAAEF,GAAG,IAAIM,GAAGX,EAAE,GAAGN,EAAE,IAAIS,EAAE,GAAGK,GAAGN,EAAE,GAAGR,EAAE,IAAIS,EAAE,GAAG,GAAGQ,EAAEH,IAAIH,EAAEM,EAAEA,EAAEH,EAAEA,EAAEH,GAAGI,EAAED,GAAGG,EAAEJ,EAAE,OAAM,EAAGI,EAAEF,IAAIA,EAAEE,GAAGH,EAAED,IAAIA,EAAEC,GAAG,IAAIE,GAAGV,EAAE,GAAGN,EAAE,IAAIS,EAAE,GAAGP,GAAGM,EAAE,GAAGR,EAAE,IAAIS,EAAE,GAAG,OAAOO,EAAEd,IAAIS,EAAEK,EAAEA,EAAEd,EAAEA,EAAES,KAAKI,EAAEb,GAAGc,EAAEH,KAAKX,EAAEW,IAAIA,EAAEX,KAAKW,EAAE,GAAI,UAASC,EAAEL,EAAEH,EAAEE,EAAEG,EAAEI,GAAQ,IAANF,EAAM,wDAAJb,EAAAA,EAAAA,KAAK,MAAMiB,GAAGN,EAAEI,GAAGP,EAAEO,KAAKT,EAAE,GAAGG,EAAE,KAAKE,EAAE,GAAGH,EAAE,KAAKF,EAAES,GAAGN,EAAEM,IAAID,GAAGH,EAAE,GAAGH,EAAE,KAAKC,EAAEM,GAAGP,EAAEO,KAAKJ,EAAEI,GAAGP,EAAEO,KAAKN,EAAE,GAAGD,EAAE,IAAI,GAAG,IAAIS,EAAE,OAAM,EAAG,MAAMD,EAAEF,EAAEG,EAAE,OAAOJ,EAAE,GAAGJ,EAAE,GAAGO,GAAGV,EAAE,GAAGG,EAAE,IAAII,EAAE,GAAGJ,EAAEM,GAAGC,GAAGV,EAAES,GAAGN,EAAEM,KAAI,CAAG,CAAuN,SAASb,EAAEF,EAAES,GAAG,OAAOwB,KAAKa,IAAI9C,GAAGiC,KAAKa,IAAIrC,EAAG,UAASJ,EAAEL,EAAES,EAAEH,EAAEE,GAAGR,EAAE,IAAIS,EAAET,EAAE,IAAIM,EAAEN,EAAE,IAAIQ,CAAE,UAASY,EAAEpB,GAAG,OAAO,IAAIA,EAAE,IAAI,IAAIA,EAAE,IAAI,IAAIA,EAAE,IAAI,IAAIA,EAAE,IAAI,IAAIA,EAAE,IAAI,IAAIA,EAAE,IAAI,IAAIA,EAAE,IAAI,IAAIA,EAAE,IAAI,IAAIA,EAAE,IAAI,IAAIA,EAAE,IAAI,IAAIA,EAAE,KAAK,IAAIA,EAAE,KAAK,IAAIA,EAAE,GAAI,C,4NCA/vC,SAASE,EAAEF,EAAEE,EAAES,GAAG,MAAMM,GAAEJ,EAAAA,EAAAA,KAAIN,GAAEE,EAAAA,EAAAA,GAAEQ,GAAG,OAAOF,EAAAA,EAAAA,GAAER,EAAEA,EAAEP,EAAE,KAAIe,EAAAA,EAAAA,GAAER,EAAEA,EAAEL,EAAE,IAAIe,EAAE,IAAGT,EAAAA,EAAAA,GAAED,EAAEP,IAAGM,EAAAA,EAAAA,GAAEC,EAAEA,EAAEI,GAAGM,CAAE,CCAq4B,IAAIC,EAAE,MAAMoB,cAAcC,KAAKQ,eAAe,IAAIC,IAAIT,KAAKU,YAAY,IAAI7B,EAAAA,GAAGT,GAAGA,EAAEuC,SAASX,KAAKY,OAAO,IAAI/B,EAAAA,GAAGT,GAAGA,EAAEuC,SAASX,KAAKa,iBAAgBlD,EAAAA,EAAAA,MAAIqC,KAAKc,QAAOlB,EAAAA,EAAAA,KAAII,KAAKe,QAAOnB,EAAAA,EAAAA,KAAII,KAAKgB,QAAOpB,EAAAA,EAAAA,KAAII,KAAKiB,aAAa,IAAK,CAAqB,sBAAC7C,EAAEX,SAASyD,QAAQC,WAAUlD,EAAAA,EAAAA,IAAER,SAASuC,KAAKoB,qBAAqBhD,EAAEX,GAAG,MAAMe,EAAE,GAAG,OAAOwB,KAAKY,OAAOS,iBAAiB5D,IAAIuC,KAAKsB,eAAelD,EAAEX,EAAEe,GAAGA,EAAE+C,ODA92C,MCAy3CnD,EAAEuC,QAAQ,CAACa,OAAO,CAACC,WAAWjD,GAAI,CAA0B,2BAACJ,EAAEH,GAAG,MAAMS,EAAE,GAAG,GAAGsB,KAAKU,YAAYW,iBAAiBjD,IAAI,IAAGX,EAAAA,EAAAA,IAAEW,EAAEsD,MAAM,CAAC,MAAMC,GAAGlE,EAAEmE,IAAIpD,GAAGJ,EAAEM,EAAEmD,KAAK,CAACF,GAAGlE,EAAEmE,IAAIpD,GAAI,QAAM,CAAN,GAAWJ,EAAEuC,SAASjC,EAAE6C,OAAO,OAAO,MAAMrD,EAAE,CAAC4D,WAAWpD,GAAGX,QAAQiC,KAAKiB,aAAac,OAAO,wBAAwB7D,GAAEM,EAAAA,EAAAA,IAAEP,EAAE,CAAC,IAAI,IAAI,MAAMR,KAAKM,EAAE+D,WAAW9B,KAAKgC,uBAAuBvE,EAAG,CAAS,UAACW,GAAG,MAAMX,EAAE,IAAIwE,EAAE7D,EAAEuD,GAAGvD,EAAEuC,QAAQ,OAAOX,KAAKQ,eAAe0B,IAAIzE,EAAEkE,GAAGlE,GAAGuC,KAAKU,YAAYyB,IAAI,CAAC1E,IAAI,CAAC+D,OAAO,CAAC,EAAG,CAAY,aAACpD,GAAG,MAAMX,EAAEuC,KAAKQ,eAAetB,IAAId,EAAEuD,IAAI,GAAGlE,EAAE,CAAC,MAAMW,EAAE,GAAG4B,KAAKY,OAAOS,iBAAiB7C,IAAIA,EAAE4D,YAAY3E,GAAGW,EAAEyD,KAAKrD,IAAG,IAAKf,EAAEkD,QAAQX,KAAKY,OAAOyB,OAAOjE,GAAG4B,KAAKU,YAAY2B,OAAO,CAAC5E,IAAIuC,KAAKQ,eAAe8B,OAAO7E,EAAEkE,GAAI,OAAM,CAACH,OAAO,CAAC,EAAG,CAAAQ,uBAAuB5D,GAAG,MAAMI,EAAEwB,KAAKQ,eAAetB,IAAId,EAAEuD,IAAI,IAAGlE,EAAAA,EAAAA,IAAEe,IAAIJ,EAAEwD,MAAMpD,EAAEoD,IAAI,OAAO,MAAM3D,EAAEsE,EAAAA,GAAAA,WAAanE,EAAEoE,WAAW9D,EAAE,IAAI+D,MAAMxE,EAAEyE,OAAOxE,GAAE0B,EAAAA,EAAAA,KAAI7B,GAAE6B,EAAAA,EAAAA,KAAI,IAAI,IAAInC,EAAE,EAAEA,EAAEQ,EAAEyE,MAAMjF,IAAI,CAACQ,EAAE0E,UAAUC,OAAOnF,EAAES,GAAGD,EAAE4E,UAAUD,OAAOnF,EAAEM,GAAG,MAAM6B,EAAEzB,EAAED,EAAEH,EAAEK,EAAEV,QAAQY,EAAE,IAAIwE,EAAEtE,EAAEf,EAAEmC,GAAGlB,EAAEjB,GAAGa,CAAE,CAAA0B,KAAKY,OAAOuB,IAAIzD,GAAG,MAAMqE,UAAUzE,EAAEZ,OAAOC,GAAGS,EAAEI,EAAEkD,KAAK,CAACc,UAAUvE,EAAE8E,UAAUzE,EAAEZ,OAAOC,EAAG,CAAA2D,eAAelD,EAAEX,EAAEe,GAAG,MAAMkD,KAAKzD,GAAGR,EAAE2E,WAAW1E,OAAOgB,EAAEqE,UAAUhF,GAAGE,EAAE2B,EAAE3B,EAAEuE,UAAUlE,EAAEsB,EAAE+C,UAAUC,OAAOnF,EAAEuF,MAAMhD,KAAKc,QAAQnD,EAAEiC,EAAEiD,UAAUD,OAAOnF,EAAEuF,MAAMhD,KAAKe,SAAQ7C,EAAAA,EAAAA,GAAEI,EAAEA,EAAEI,IAAGR,EAAAA,EAAAA,GAAEP,EAAEA,EAAEe,GAAG,MAAMI,EAAEf,EAAE6B,EAAEqD,eAAe/D,IAAIzB,EAAEuF,QAAQhD,KAAKkD,kBAAkB9E,EAAEU,EAAER,EAAEX,EAAEa,GAAGwB,KAAKmD,oBAAoB/E,EAAEU,EAAER,EAAEE,GAAGwB,KAAKmD,oBAAoB/E,EAAEU,EAAEnB,EAAEa,EAAG,CAAA0E,kBAAkB9E,EAAEX,EAAEe,EAAEP,EAAES,GAAG,KAAKN,EAAEgF,MAAMvF,EAAAA,EAAAA,MAAQ,OAAO,MAAMK,GAAEJ,EAAAA,EAAAA,GAAEM,EAAEuC,QAAQf,GAAEd,EAAAA,EAAAA,IAAEN,EAAEP,EAAE+B,KAAKa,iBAAiBlD,GAAEK,EAAAA,EAAAA,IAAE4B,EAAE1B,EAAE8B,KAAKgB,SAAQvC,EAAAA,EAAAA,GAAEL,EAAEuC,OAAOhD,IAAIe,EAAEmD,KAAK,CAACwB,KAAK,OAAOC,SAAS7F,EAAE8F,QAAOjF,EAAAA,EAAAA,GAAEX,GAAG6F,UAASzF,EAAAA,EAAAA,GAAEG,EAAEP,GAAG8F,OAAMnF,EAAAA,EAAAA,GAAEE,GAAGkF,KAAIpF,EAAAA,EAAAA,GAAEL,IAAK,CAAAkF,oBAAoB/E,EAAEX,EAAEe,EAAEP,GAAG,KAAKG,EAAEgF,MAAMvF,EAAAA,EAAAA,QAAU,OAAO,MAAMa,GAAEZ,EAAAA,EAAAA,GAAEM,EAAEuC,SAAQlC,EAAAA,EAAAA,GAAEL,EAAEuC,OAAOnC,IAAIP,EAAE4D,KAAK,CAACwB,KAAK,SAASC,SAAS7F,EAAE8F,QAAOjF,EAAAA,EAAAA,GAAEE,GAAGgF,UAASzF,EAAAA,EAAAA,GAAEW,EAAEF,IAAK,GAAEG,GAAEP,EAAAA,EAAAA,GAAE,EAACM,EAAAA,EAAAA,GAAE,mGAAmGC,GAAG,MAAMgF,EAAEhF,EAAE,MAAMsD,EAAElC,YAAY3B,EAAEX,GAAGuC,KAAK2B,GAAGvD,EAAE4B,KAAKW,OAAOlD,EAAEuC,KAAK0B,KAAK,KAAK1B,KAAK4B,MAAMK,EAAEL,GAAI,EAACK,EAAEL,IAAI,EAAE,MAAMkB,EAAE/C,YAAY3B,EAAEX,EAAEe,GAAGwB,KAAKoC,UAAUhE,EAAE4B,KAAKgD,MAAMvF,EAAEuC,KAAKW,OAAOnC,CAAE,E","sources":["../node_modules/@arcgis/core/geometry/support/lineSegment.js","../node_modules/@arcgis/core/views/3d/webgl-engine/lib/Util.js","../node_modules/@arcgis/core/views/interactive/snapping/featureSources/sceneLayerSource/sceneLayerSnappingUtils.js","../node_modules/@arcgis/core/views/interactive/snapping/featureSources/sceneLayerSource/SceneLayerSnappingSourceWorker.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport{clamp as t}from\"../../core/mathUtils.js\";import{ObjectStack as r}from\"../../core/ObjectStack.js\";import{c as n,b as o,e,g as i,a as c,p as s,d as u}from\"../../chunks/vec3.js\";import{a,c as g}from\"../../chunks/vec3f64.js\";import{sv3d as f}from\"./vectorStacks.js\";function v(t){return t?{origin:a(t.origin),vector:a(t.vector)}:{origin:g(),vector:g()}}function p(t,r){const n=x.get();return n.origin=t,n.vector=r,n}function h(t,r=v()){return m(t.origin,t.vector,r)}function m(t,r,o=v()){return n(o.origin,t),n(o.vector,r),o}function b(t,r,e=v()){return n(e.origin,t),o(e.vector,r,t),e}function M(r,n){const c=o(f.get(),n,r.origin),s=e(r.vector,c),u=e(r.vector,r.vector),a=t(s/u,0,1),g=o(f.get(),i(f.get(),r.vector,a),c);return e(g,g)}function d(t,r){return Math.sqrt(M(t,r))}function j(t,r,n){return A(t,r,0,1,n)}function l(t,r,n){return c(n,t.origin,i(n,t.vector,r))}function A(r,n,u,a,g){const{vector:v,origin:p}=r,h=o(f.get(),n,p),m=e(v,h)/s(v);return i(g,v,t(m,u,a)),c(g,g,r.origin)}function B(t,r){if(q(t,p(r.origin,r.direction),!1,w)){const{tA:r,pB:n,distance2:o}=w;if(r>=0&&r<=1)return o;if(r<0)return u(t.origin,n);if(r>1)return u(c(f.get(),t.origin,t.vector),n)}return null}function k(t,r,o){return!!q(t,r,!0,w)&&(n(o,w.pA),!0)}function S(t,r){return q(t,r,!0,w)?w.distance2:null}function q(r,n,o,e){const i=1e-6,s=r.origin,a=c(f.get(),s,r.vector),g=n.origin,v=c(f.get(),g,n.vector),p=f.get(),h=f.get();if(p[0]=s[0]-g[0],p[1]=s[1]-g[1],p[2]=s[2]-g[2],h[0]=v[0]-g[0],h[1]=v[1]-g[1],h[2]=v[2]-g[2],Math.abs(h[0])<i&&Math.abs(h[1])<i&&Math.abs(h[2])<i)return!1;const m=f.get();if(m[0]=a[0]-s[0],m[1]=a[1]-s[1],m[2]=a[2]-s[2],Math.abs(m[0])<i&&Math.abs(m[1])<i&&Math.abs(m[2])<i)return!1;const b=p[0]*h[0]+p[1]*h[1]+p[2]*h[2],M=h[0]*m[0]+h[1]*m[1]+h[2]*m[2],d=p[0]*m[0]+p[1]*m[1]+p[2]*m[2],j=h[0]*h[0]+h[1]*h[1]+h[2]*h[2],l=(m[0]*m[0]+m[1]*m[1]+m[2]*m[2])*j-M*M;if(Math.abs(l)<i)return!1;let A=(b*M-d*j)/l,B=(b+M*A)/j;o&&(A=t(A,0,1),B=t(B,0,1));const k=f.get(),S=f.get();return k[0]=s[0]+A*m[0],k[1]=s[1]+A*m[1],k[2]=s[2]+A*m[2],S[0]=g[0]+B*h[0],S[1]=g[1]+B*h[1],S[2]=g[2]+B*h[2],e.tA=A,e.tB=B,e.pA=k,e.pB=S,e.distance2=u(k,S),!0}const w={tA:0,tB:0,pA:g(),pB:g(),distance2:0},x=new r((()=>v()));export{S as closestLineSegmentDistance2,k as closestLineSegmentPoint,B as closestRayDistance2,h as copy,v as create,d as distance,M as distance2,b as fromPoints,m as fromValues,l as pointAt,j as projectPoint,A as projectPointClamp,p as wrap};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport{a as t}from\"../../../../chunks/vec2f64.js\";import{t as n}from\"../../../../chunks/vec4.js\";import{c as r}from\"../../../../chunks/vec4f64.js\";const o=r();class e{constructor(t){this.message=t}toString(){return`AssertException: ${this.message}`}}function s(t,n){if(!t){n=n||\"Assertion\";const t=new Error(n).stack;throw new e(`${n} at ${t}`)}}function c(t,n){t||(n=n||\"\",console.warn(\"Verify failed: \"+n+\"\\n\"+new Error(\"verify\").stack))}function i(t,n,r,o){let e,s=(r[0]-t[0])/n[0],c=(o[0]-t[0])/n[0];s>c&&(e=s,s=c,c=e);let i=(r[1]-t[1])/n[1],f=(o[1]-t[1])/n[1];if(i>f&&(e=i,i=f,f=e),s>f||i>c)return!1;i>s&&(s=i),f<c&&(c=f);let u=(r[2]-t[2])/n[2],a=(o[2]-t[2])/n[2];return u>a&&(e=u,u=a,a=e),!(s>a||u>c)&&(a<c&&(c=a),!(c<0))}function f(n,r,o,e,s,c=t()){const i=(e[s]-o[s])*(r[0]-n[0])-(e[0]-o[0])*(r[s]-n[s]),f=(e[0]-o[0])*(n[s]-o[s])-(e[s]-o[s])*(n[0]-o[0]);if(0===i)return!1;const u=f/i;return c[0]=n[0]+u*(r[0]-n[0]),c[1]=n[s]+u*(r[s]-n[s]),!0}function u(t,r,e,c,i){o[0]=t[0],o[1]=t[1],o[2]=t[2],o[3]=1,n(o,o,r),i.length>2&&(i[2]=-o[2]),n(o,o,e),s(0!==o[3]),i[0]=o[0]/o[3],i[1]=o[1]/o[3],i[2]=o[2]/o[3],i[0]=(.5*i[0]+.5)*c[2]+c[0],i[1]=(.5*i[1]+.5)*c[3]+c[1]}function a(t,n){return Math.log(t)/Math.log(n)}function h(t,n,r,o){t[12]=n,t[13]=r,t[14]=o}function l(t){return 1===t[0]&&0===t[1]&&0===t[2]&&0===t[3]&&0===t[4]&&1===t[5]&&0===t[6]&&0===t[7]&&0===t[8]&&0===t[9]&&1===t[10]&&0===t[11]&&1===t[15]}export{s as assert,l as isTranslationMatrix,a as logWithBase,u as project,i as rayBoxTest,f as rayRay2D,h as setMatrixTranslation3,c as verify};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport{z as s,i as o,a as r}from\"../../../../../chunks/vec3.js\";import{c,g as n}from\"../../../../../chunks/sphere.js\";const t=1e3;function a(t,a,e){const i=c(),m=n(i);return s(m,m,t,.5),s(m,m,a,.5),i[3]=o(m,t),r(m,m,e),i}export{t as MAX_CANDIDATE_COUNT,a as boundsFromEdge};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../../../chunks/tslib.es6.js\";import{isNone as t,unwrapOr as s}from\"../../../../../core/maybe.js\";import{throwIfAborted as o}from\"../../../../../core/promiseUtils.js\";import\"../../../../../core/Logger.js\";import\"../../../../../core/accessorSupport/ensureType.js\";import\"../../../../../core/arrayUtils.js\";import\"../../../../../core/Error.js\";import\"../../../../../core/has.js\";import{subclass as i}from\"../../../../../core/accessorSupport/decorators/subclass.js\";import{a as n,i as r}from\"../../../../../chunks/vec3.js\";import{c as d,a as c}from\"../../../../../chunks/vec3f64.js\";import{create as a,fromPoints as p,projectPoint as m}from\"../../../../../geometry/support/lineSegment.js\";import{g as h,m as u}from\"../../../../../chunks/sphere.js\";import{SnappingTypes as g}from\"../../../../../layers/graphics/data/QueryEngineResult.js\";import l from\"../../../../3d/webgl-engine/lib/Octree.js\";import{extractComponentsEdgeLocationsLayout as _}from\"../../../../3d/webgl-engine/lib/edgeRendering/edgeProcessing.js\";import{MAX_CANDIDATE_COUNT as f,boundsFromEdge as b}from\"./sceneLayerSnappingUtils.js\";let j=class{constructor(){this._idToComponent=new Map,this._components=new l((e=>e.bounds)),this._edges=new l((e=>e.bounds)),this._tmpLineSegment=a(),this._tmpP1=d(),this._tmpP2=d(),this._tmpP3=d(),this.remoteClient=null}async fetchCandidates(e,t){await Promise.resolve(),o(t),await this._ensureEdgeLocations(e,t);const s=[];return this._edges.forEachNeighbor((t=>(this._addCandidates(e,t,s),s.length<f)),e.bounds),{result:{candidates:s}}}async _ensureEdgeLocations(e,o){const i=[];if(this._components.forEachNeighbor((e=>{if(t(e.info)){const{id:t,uid:s}=e;i.push({id:t,uid:s})}return!0}),e.bounds),!i.length)return;const n={components:i},r=await this.remoteClient.invoke(\"fetchAllEdgeLocations\",n,s(o,{}));for(const t of r.components)this._setFetchEdgeLocations(t)}async add(e){const t=new E(e.id,e.bounds);return this._idToComponent.set(t.id,t),this._components.add([t]),{result:{}}}async remove(e){const t=this._idToComponent.get(e.id);if(t){const e=[];this._edges.forEachNeighbor((s=>(s.component===t&&e.push(s),!0)),t.bounds),this._edges.remove(e),this._components.remove([t]),this._idToComponent.delete(t.id)}return{result:{}}}_setFetchEdgeLocations(e){const s=this._idToComponent.get(e.id);if(t(s)||e.uid!==s.uid)return;const o=_.createView(e.locations),i=new Array(o.count),n=d(),r=d();for(let t=0;t<o.count;t++){o.position0.getVec(t,n),o.position1.getVec(t,r);const d=b(n,r,e.origin),c=new C(s,t,d);i[t]=c}this._edges.add(i);const{objectIds:c,origin:a}=e;s.info={locations:o,objectIds:c,origin:a}}_addCandidates(e,t,s){const{info:o}=t.component,{origin:i,objectIds:r}=o,d=o.locations,c=d.position0.getVec(t.index,this._tmpP1),a=d.position1.getVec(t.index,this._tmpP2);n(c,c,i),n(a,a,i);const p=r[d.componentIndex.get(t.index)];this._addEdgeCandidate(e,p,c,a,s),this._addVertexCandidate(e,p,c,s),this._addVertexCandidate(e,p,a,s)}_addEdgeCandidate(e,t,s,o,i){if(!(e.types&g.EDGE))return;const n=h(e.bounds),d=p(s,o,this._tmpLineSegment),a=m(d,n,this._tmpP3);u(e.bounds,a)&&i.push({type:\"edge\",objectId:t,target:c(a),distance:r(n,a),start:c(s),end:c(o)})}_addVertexCandidate(e,t,s,o){if(!(e.types&g.VERTEX))return;const i=h(e.bounds);u(e.bounds,s)&&o.push({type:\"vertex\",objectId:t,target:c(s),distance:r(i,s)})}};j=e([i(\"esri.views.interactive.snapping.featureSources.sceneLayerSource.SceneLayerSnappingSourceWorker\")],j);const y=j;class E{constructor(e,t){this.id=e,this.bounds=t,this.info=null,this.uid=++E.uid}}E.uid=0;class C{constructor(e,t,s){this.component=e,this.index=t,this.bounds=s}}export{y as default};\n"],"names":["v","t","origin","a","vector","g","h","r","m","o","n","b","e","M","c","f","s","u","i","j","A","l","p","B","q","x","get","direction","w","tA","pB","distance2","k","pA","Math","abs","d","S","tB","constructor","this","message","toString","Error","stack","console","warn","log","_idToComponent","Map","_components","bounds","_edges","_tmpLineSegment","_tmpP1","_tmpP2","_tmpP3","remoteClient","Promise","resolve","_ensureEdgeLocations","forEachNeighbor","_addCandidates","length","result","candidates","info","id","uid","push","components","invoke","_setFetchEdgeLocations","E","set","add","component","remove","delete","_","locations","Array","count","position0","getVec","position1","C","objectIds","index","componentIndex","_addEdgeCandidate","_addVertexCandidate","types","type","objectId","target","distance","start","end","y"],"sourceRoot":""}