{"version":3,"sources":["../node_modules/@arcgis/core/views/interactive/snapping/featureSources/GraphicsSnappingSource.js","../node_modules/@arcgis/core/geometry/support/normalizeUtilsSync.js","../node_modules/@arcgis/core/core/libs/rbush/PooledRBush.js","../node_modules/@arcgis/core/layers/graphics/data/BoundsStore.js","../node_modules/@arcgis/core/layers/graphics/data/optimizedFeatureQueryEngineAdapter.js","../node_modules/@arcgis/core/layers/graphics/data/FeatureStore.js","../node_modules/@arcgis/core/views/interactive/snapping/candidates/EdgeSnappingCandidate.js","../node_modules/@arcgis/core/views/interactive/snapping/candidates/VertexSnappingCandidate.js","../node_modules/@arcgis/core/views/interactive/snapping/featureSources/queryEngineUtils.js"],"names":["O","e","availability","sources","multipoint","point","polygon","polyline","loadedWkids","Set","loadedWkts","pendingAdds","this","updatingHandles","updating","layerSource","layer","length","task","abort","mapSources","destroySource","handles","add","on","onGraphicUpdate","addOnCollectionChange","graphics","onGraphicsChanged","addMany","toArray","r","a","s","queryEngine","executeQueryForSnapping","coordinateHelper","toPoint","d","toJSON","distance","types","query","t","filter","createQuery","where","then","candidates","flat","map","k","S","property","remove","graphic","removed","added","Map","o","geometry","needsInitializeProjection","spatialReference","push","set","uid","createPendingAdd","n","u","source","dest","signal","markLoadedSpatialReferences","addPromise","promise","i","wkid","wkt","visible","type","c","fromExtent","ensureSource","createOptimizedFeature","featureStore","has","h","m","j","y","g","b","createSource","l","w","geometryType","hasZ","hasM","v","fields","name","alias","objectIdField","scheduler","view","resourceController","removeFromSource","delete","size","removeById","destroy","f","p","constructOnly","prototype","readOnly","J","isWebMercator","I","maxX","minX","plus180Line","minus180Line","N","points","x","M","xmin","ymin","xmax","ymax","cut","valid","frameId","extent","frameIds","rings","Array","isArray","Math","ceil","abs","closed","minPts","paths","compareMinX","compareMinY","toBBox","_maxEntries","max","_minEntries","_initFormat","clear","prune","X","Y","B","_all","data","children","leaf","pop","insert","_build","slice","height","_splitRoot","_insert","indexHint","splice","_condense","pushArray","log","sqrt","min","_chooseSubtree","_split","_adjustParentBBoxes","_chooseSplitAxis","_chooseSplitIndex","console","_allDistMargin","sort","Function","join","minY","maxY","deallocator","arguments","_indexInvalid","_boundsToLoad","_boundsById","_idByBounds","_index","_loadIndex","forEach","load","get","search","getObjectId","objectId","getAttributes","attributes","getAttribute","cloneWithGeometry","getGeometry","getCentroid","centroid","geometryInfo","_boundsStore","_featuresById","_markedIds","events","featureAdapter","numFeatures","coords","featureCount","vertexCount","_add","_emitChanged","_remove","invalidateIndex","forEachInBounds","emit","displayId","onFeatureAdd","getLogger","error","feature","onFeatureRemove","constraint","edgeStart","edgeEnd","start","end","targetPoint","fromPoint","target"],"mappings":"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","file":"static/js/58.3cb6da23.chunk.js","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../../chunks/tslib.es6.js\";import\"../../../../core/has.js\";import{isSome as t,isNone as r}from\"../../../../core/maybe.js\";import\"../../../../core/Logger.js\";import\"../../../../core/accessorSupport/ensureType.js\";import{property as s}from\"../../../../core/accessorSupport/decorators/property.js\";import{subclass as o}from\"../../../../core/accessorSupport/decorators/subclass.js\";import\"../../../../core/urlUtils.js\";import\"../../../../core/uuid.js\";import\"../../../../portal/support/resourceExtension.js\";import{removeUnordered as i}from\"../../../../core/arrayUtils.js\";import{eachAlwaysValues as a,createTask as n}from\"../../../../core/promiseUtils.js\";import p from\"../../../../core/Accessor.js\";import d from\"../../../../geometry/Point.js\";import c from\"../../../../geometry/Polygon.js\";import{featureGeometryTypeKebabDictionary as l}from\"../../../../geometry/support/typeUtils.js\";import{initializeProjection as u,canProjectWithoutEngine as h,project as m}from\"../../../../geometry/projection.js\";import y from\"../../../../layers/graphics/OptimizedFeature.js\";import{convertFromGeometry as g}from\"../../../../layers/graphics/featureConversionUtils.js\";import{HandleOwnerMixin as f}from\"../../../../core/HandleOwner.js\";import{sortCandidatesInPlace as S}from\"../snappingUtils.js\";import{normalizeCentralMeridianSync as j}from\"../../../../geometry/support/normalizeUtilsSync.js\";import w from\"../../../../layers/graphics/data/FeatureStore.js\";import v from\"../../../../layers/graphics/data/QueryEngine.js\";import{convertSnappingCandidate as k}from\"./queryEngineUtils.js\";let O=class extends(f(p)){constructor(e){super(e),this.availability=1,this.sources={multipoint:null,point:null,polygon:null,polyline:null},this.loadedWkids=new Set,this.loadedWkts=new Set,this.pendingAdds=[]}get updating(){return this.updatingHandles.updating}get layer(){return this.layerSource.layer}destroy(){const e=this.pendingAdds;this.pendingAdds.length=0;for(const t of e)t.task.abort();this.mapSources((e=>this.destroySource(e)))}initialize(){this.handles.add([this.layer.on(\"graphic-update\",(e=>this.onGraphicUpdate(e))),this.updatingHandles.addOnCollectionChange(this.layer.graphics,(e=>this.onGraphicsChanged(e)))]),this.addMany(this.layer.graphics.toArray())}async fetchCandidates(e,r){const s=(await a(this.mapSources((s=>s.queryEngine.executeQueryForSnapping({point:e.coordinateHelper.toPoint(e.point,new d).toJSON(),distance:e.distance,types:e.types,query:t(e.filter)?e.filter.createQuery().toJSON():{where:\"1=1\"}},r).then((({candidates:e})=>e)))))).flat().map((t=>k(t,e.coordinateHelper)));return S(e.point,s),{candidates:s}}refresh(){}onGraphicUpdate(e){switch(e.property){case\"geometry\":case\"visible\":this.remove(e.graphic),this.addMany([e.graphic])}}onGraphicsChanged(e){for(const t of e.removed)this.remove(t);this.addMany(e.added)}addMany(e){const t=[],s=new Map;for(const o of e)r(o.geometry)||(this.needsInitializeProjection(o.geometry.spatialReference)?(t.push(o.geometry.spatialReference),s.set(o.uid,o)):this.add(o));this.createPendingAdd(t,s)}createPendingAdd(e,t){if(!e.length)return;const r=n((async r=>{await u(e.map((e=>({source:e,dest:this.spatialReference}))),{signal:r}),this.markLoadedSpatialReferences(e);for(const[,e]of t)this.add(e)}));this.updatingHandles.addPromise(r.promise);const s={task:r,graphics:t},o=()=>i(this.pendingAdds,s);r.promise.then(o,o),this.pendingAdds.push(s)}markLoadedSpatialReferences(e){for(const t of e)null!=t.wkid&&this.loadedWkids.add(t.wkid),null!=t.wkt&&this.loadedWkts.add(t.wkt)}add(e){if(r(e.geometry)||!e.visible)return;let s=e.geometry;if(\"mesh\"===s.type)return;\"extent\"===s.type&&(s=c.fromExtent(s));const o=this.ensureSource(s.type);if(r(o))return;const i=this.createOptimizedFeature(e.uid,s);t(i)&&o.featureStore.add(i)}needsInitializeProjection(e){return(null==e.wkid||!this.loadedWkids.has(e.wkid))&&((null==e.wkt||!this.loadedWkts.has(e.wkt))&&!h(e,this.spatialReference))}createOptimizedFeature(e,t){const r=m(j(t),this.spatialReference);return r?new y(g(r,!1,!1),{[b]:e},null,e):null}ensureSource(e){const r=this.sources[e];if(t(r))return r;const s=this.createSource(e);return this.sources[e]=s,s}createSource(e){const r=l.toJSON(e),s=new w({geometryType:r,hasZ:!1,hasM:!1});return{featureStore:s,queryEngine:new v({featureStore:s,fields:[{name:b,type:\"esriFieldTypeOID\",alias:b}],geometryType:r,hasM:!1,hasZ:!1,objectIdField:b,spatialReference:this.spatialReference,scheduler:t(this.view)&&\"3d\"===this.view.type?this.view.resourceController.scheduler:null}),type:e}}remove(e){this.mapSources((t=>this.removeFromSource(t,e)));for(const t of this.pendingAdds)t.graphics.delete(e.uid),0===t.graphics.size&&t.task.abort()}removeFromSource(e,t){const r=t.uid;e.featureStore.has(r)&&e.featureStore.removeById(t.uid)}destroySource(e){e.queryEngine.destroy(),this.sources[e.type]=null}mapSources(e){const{point:r,polygon:s,polyline:o,multipoint:i}=this.sources,a=[];return t(r)&&a.push(e(r)),t(s)&&a.push(e(s)),t(o)&&a.push(e(o)),t(i)&&a.push(e(i)),a}};e([s({constructOnly:!0})],O.prototype,\"spatialReference\",void 0),e([s({constructOnly:!0})],O.prototype,\"layerSource\",void 0),e([s({constructOnly:!0})],O.prototype,\"view\",void 0),e([s({readOnly:!0})],O.prototype,\"updating\",null),e([s({readOnly:!0})],O.prototype,\"availability\",void 0),O=e([o(\"esri.views.interactive.snapping.featureSources.GraphicsSnappingSource\")],O);const b=\"OBJECTID\";export{O as GraphicsSnappingSource};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{getInfo as n}from\"./spatialReferenceUtils.js\";import{extentIntersectsPolyline as t}from\"./intersects.js\";import{getBoundsXY as i}from\"./boundsUtils.js\";import{isPoint as m,isMultipoint as s,isExtent as e,isPolygon as x,isPolyline as o}from\"./jsonUtils.js\";import{cutParams as r,getGeometryParts as a,offsetMagnitude as f}from\"./normalizeUtilsCommon.js\";import{create as c}from\"./aaBoundingRect.js\";function l(a){if(!a)return null;if(\"mesh\"===a.type)return a.toJSON();let c=null;const l=a.spatialReference,h=n(l);if(!h)return a.toJSON();const d=l.isWebMercator?102100:4326,I=r[d].maxX,g=r[d].minX,b=r[d].plus180Line,v=r[d].minus180Line;let J;const N=a.toJSON();if(m(N))J=y(N,I,g);else if(s(N))N.points=N.points.map((n=>y(n,I,g))),J=N;else if(e(N))J=p(N,h);else if(x(N)||o(N)){const n=M;i(n,N);const m={xmin:n[0],ymin:n[1],xmax:n[2],ymax:n[3]},s=f(m.xmin,g)*(2*I),e=0===s?N:u(N,s);m.xmin+=s,m.xmax+=s,t(m,b)&&m.xmax!==I||t(m,v)&&m.xmin!==g?c=e:J=e}else J=a.toJSON();if(null!==c){return(new j).cut(c,I)}return J}function u(n,t){const i=a(n);for(const m of i)for(const n of m)n[0]+=t;return n}function p(n,t){if(!t)return n;const i=h(n,t).map((n=>n.extent));return i.length<2?i[0]||n:i.length>2?(n.xmin=t.valid[0],n.xmax=t.valid[1],n):{rings:i.map((n=>[[n.xmin,n.ymin],[n.xmin,n.ymax],[n.xmax,n.ymax],[n.xmax,n.ymin],[n.xmin,n.ymin]]))}}function y(n,t,i){if(Array.isArray(n)){const m=n[0];if(m>t){const i=f(m,t);n[0]=m+i*(-2*t)}else if(m<i){const t=f(m,i);n[0]=m+t*(-2*i)}}else{const m=n.x;if(m>t){const i=f(m,t);n.x+=i*(-2*t)}else if(m<i){const t=f(m,i);n.x+=t*(-2*i)}}return n}function h(n,t){const i=[],{ymin:m,ymax:s}=n,e=n.xmax-n.xmin,x=n.xmin,o=n.xmax;let r;const[a,f]=t.valid;r=d(n.xmin,t);const c=r.x,l=r.frameId;r=d(n.xmax,t);const u=r.x,p=r.frameId,y=c===u&&e>0;if(e>2*f){const n={xmin:x<o?c:u,ymin:m,xmax:f,ymax:s},t={xmin:a,ymin:m,xmax:x<o?u:c,ymax:s},e={xmin:0,ymin:m,xmax:f,ymax:s},r={xmin:a,ymin:m,xmax:0,ymax:s},y=[],h=[];I(n,e)&&y.push(l),I(n,r)&&h.push(l),I(t,e)&&y.push(p),I(t,r)&&h.push(p);for(let i=l+1;i<p;i++)y.push(i),h.push(i);i.push({extent:n,frameIds:[l]},{extent:t,frameIds:[p]},{extent:e,frameIds:y},{extent:r,frameIds:h})}else c>u||y?i.push({extent:{xmin:c,ymin:m,xmax:f,ymax:s},frameIds:[l]},{extent:{xmin:a,ymin:m,xmax:u,ymax:s},frameIds:[p]}):i.push({extent:{xmin:c,ymin:m,xmax:u,ymax:s},frameIds:[l]});return i}function d(n,t){const[i,m]=t.valid,s=2*m;let e,x=0;return n>m?(e=Math.ceil(Math.abs(n-m)/s),n-=e*s,x=e):n<i&&(e=Math.ceil(Math.abs(n-i)/s),n+=e*s,x=-e),{x:n,frameId:x}}function I(n,t){const{xmin:i,ymin:m,xmax:s,ymax:e}=t;return g(n,i,m)&&g(n,i,e)&&g(n,s,e)&&g(n,s,m)}function g(n,t,i){return t>=n.xmin&&t<=n.xmax&&i>=n.ymin&&i<=n.ymax}class j{cut(n,t){let i;if(n.rings)this.closed=!0,i=n.rings,this.minPts=4;else{if(!n.paths)return null;this.closed=!1,i=n.paths,this.minPts=2}const m=i.length,s=-2*t;for(let e=0;e<m;e++){const n=i[e];if(n&&n.length>=this.minPts){const t=[];for(const i of n)t.push([i[0]+s,i[1]]);i.push(t)}}return this.closed?n.rings=i:n.paths=i,n}}const M=c();export{l as normalizeCentralMeridianSync};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{assumeNonNull as t}from\"../../maybe.js\";import{indexOf as i,PositionHint as n}from\"../../arrayUtils.js\";import e from\"../../PooledArray.js\";import{q as s}from\"../../../chunks/quickselect.js\";class h{constructor(t=9,i){this.compareMinX=l,this.compareMinY=c,this.toBBox=function(t){return t},this._maxEntries=Math.max(4,t||9),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),i&&(\"function\"==typeof i?this.toBBox=i:this._initFormat(i)),this.clear()}destroy(){this.clear(),M.prune(),X.prune(),Y.prune(),B.prune()}all(t){this._all(this.data,t)}search(t,i){let n=this.data;const e=this.toBBox;if(p(t,n))for(M.clear();n;){for(let s=0,h=n.children.length;s<h;s++){const h=n.children[s],a=n.leaf?e(h):h;p(t,a)&&(n.leaf?i(h):x(t,a)?this._all(h,i):M.push(h))}n=M.pop()}}collides(t){let i=this.data;const n=this.toBBox;if(!p(t,i))return!1;for(M.clear();i;){for(let e=0,s=i.children.length;e<s;e++){const s=i.children[e],h=i.leaf?n(s):s;if(p(t,h)){if(i.leaf||x(t,h))return!0;M.push(s)}}i=M.pop()}return!1}load(t){if(!t.length)return this;if(t.length<this._minEntries){for(let i=0,n=t.length;i<n;i++)this.insert(t[i]);return this}let i=this._build(t.slice(0,t.length),0,t.length-1,0);if(this.data.children.length)if(this.data.height===i.height)this._splitRoot(this.data,i);else{if(this.data.height<i.height){const t=this.data;this.data=i,i=t}this._insert(i,this.data.height-i.height-1,!0)}else this.data=i;return this}insert(t){return t&&this._insert(t,this.data.height-1),this}clear(){return this.data=new b([]),this}remove(n){if(!n)return this;let e,s=this.data,h=null,a=0,r=!1;const o=this.toBBox(n);for(Y.clear(),B.clear();s||Y.length>0;){var l;if(!s)s=t(Y.pop()),h=Y.data[Y.length-1],a=null!=(l=B.pop())?l:0,r=!0;if(s.leaf&&(e=i(s.children,n,s.children.length,s.indexHint),-1!==e))return s.children.splice(e,1),Y.push(s),this._condense(Y),this;r||s.leaf||!x(s,o)?h?(a++,s=h.children[a],r=!1):s=null:(Y.push(s),B.push(a),a=0,h=s,s=s.children[0])}return this}toJSON(){return this.data}fromJSON(t){return this.data=t,this}_all(t,i){let n=t;for(X.clear();n;){var e;if(!0===n.leaf)for(const t of n.children)i(t);else X.pushArray(n.children);n=null!=(e=X.pop())?e:null}}_build(t,i,n,e){const s=n-i+1;let h=this._maxEntries;if(s<=h){const e=new b(t.slice(i,n+1));return a(e,this.toBBox),e}e||(e=Math.ceil(Math.log(s)/Math.log(h)),h=Math.ceil(s/h**(e-1)));const r=new j([]);r.height=e;const o=Math.ceil(s/h),l=o*Math.ceil(Math.sqrt(h));g(t,i,n,l,this.compareMinX);for(let a=i;a<=n;a+=l){const i=Math.min(a+l-1,n);g(t,a,i,o,this.compareMinY);for(let n=a;n<=i;n+=o){const s=Math.min(n+o-1,i);r.children.push(this._build(t,n,s,e-1))}}return a(r,this.toBBox),r}_chooseSubtree(t,i,n,e){for(;e.push(i),!0!==i.leaf&&e.length-1!==n;){let n,e=1/0,s=1/0;for(let h=0,a=i.children.length;h<a;h++){const a=i.children[h],r=m(a),o=d(t,a)-r;o<s?(s=o,e=r<e?r:e,n=a):o===s&&r<e&&(e=r,n=a)}i=n||i.children[0]}return i}_insert(t,i,n){const e=this.toBBox,s=n?t:e(t);Y.clear();const h=this._chooseSubtree(s,this.data,i,Y);for(h.children.push(t),o(h,s);i>=0&&Y.data[i].children.length>this._maxEntries;)this._split(Y,i),i--;this._adjustParentBBoxes(s,Y,i)}_split(t,i){const n=t.data[i],e=n.children.length,s=this._minEntries;this._chooseSplitAxis(n,s,e);const h=this._chooseSplitIndex(n,s,e);if(!h)return void console.log(\"  Error: assertion failed at PooledRBush._split: no valid split index\");const r=n.children.splice(h,n.children.length-h),o=n.leaf?new b(r):new j(r);o.height=n.height,a(n,this.toBBox),a(o,this.toBBox),i?t.data[i-1].children.push(o):this._splitRoot(n,o)}_splitRoot(t,i){this.data=new j([t,i]),this.data.height=t.height+1,a(this.data,this.toBBox)}_chooseSplitIndex(t,i,n){let e,s,h;e=s=1/0;for(let a=i;a<=n-i;a++){const i=r(t,0,a,this.toBBox),o=r(t,a,n,this.toBBox),l=f(i,o),c=m(i)+m(o);l<e?(e=l,h=a,s=c<s?c:s):l===e&&c<s&&(s=c,h=a)}return h}_chooseSplitAxis(t,i,n){const e=t.leaf?this.compareMinX:l,s=t.leaf?this.compareMinY:c;this._allDistMargin(t,i,n,e)<this._allDistMargin(t,i,n,s)&&t.children.sort(e)}_allDistMargin(t,i,n,e){t.children.sort(e);const s=this.toBBox,h=r(t,0,i,s),a=r(t,n-i,n,s);let l=u(h)+u(a);for(let r=i;r<n-i;r++){const i=t.children[r];o(h,t.leaf?s(i):i),l+=u(h)}for(let r=n-i-1;r>=i;r--){const i=t.children[r];o(a,t.leaf?s(i):i),l+=u(a)}return l}_adjustParentBBoxes(t,i,n){for(let e=n;e>=0;e--)o(i.data[e],t)}_condense(t){for(let n=t.length-1;n>=0;n--){const e=t.data[n];if(0===e.children.length)if(n>0){const s=t.data[n-1],h=s.children;h.splice(i(h,e,h.length,s.indexHint),1)}else this.clear();else a(e,this.toBBox)}}_initFormat(t){const i=[\"return a\",\" - b\",\";\"];this.compareMinX=new Function(\"a\",\"b\",i.join(t[0])),this.compareMinY=new Function(\"a\",\"b\",i.join(t[1])),this.toBBox=new Function(\"a\",\"return {minX: a\"+t[0]+\", minY: a\"+t[1]+\", maxX: a\"+t[2]+\", maxY: a\"+t[3]+\"};\")}}function a(t,i){r(t,0,t.children.length,i,t)}function r(t,i,n,e,s){s||(s=new b([])),s.minX=1/0,s.minY=1/0,s.maxX=-1/0,s.maxY=-1/0;for(let h,a=i;a<n;a++)h=t.children[a],o(s,t.leaf?e(h):h);return s}function o(t,i){t.minX=Math.min(t.minX,i.minX),t.minY=Math.min(t.minY,i.minY),t.maxX=Math.max(t.maxX,i.maxX),t.maxY=Math.max(t.maxY,i.maxY)}function l(t,i){return t.minX-i.minX}function c(t,i){return t.minY-i.minY}function m(t){return(t.maxX-t.minX)*(t.maxY-t.minY)}function u(t){return t.maxX-t.minX+(t.maxY-t.minY)}function d(t,i){return(Math.max(i.maxX,t.maxX)-Math.min(i.minX,t.minX))*(Math.max(i.maxY,t.maxY)-Math.min(i.minY,t.minY))}function f(t,i){const n=Math.max(t.minX,i.minX),e=Math.max(t.minY,i.minY),s=Math.min(t.maxX,i.maxX),h=Math.min(t.maxY,i.maxY);return Math.max(0,s-n)*Math.max(0,h-e)}function x(t,i){return t.minX<=i.minX&&t.minY<=i.minY&&i.maxX<=t.maxX&&i.maxY<=t.maxY}function p(t,i){return i.minX<=t.maxX&&i.minY<=t.maxY&&i.maxX>=t.minX&&i.maxY>=t.minY}function g(i,n,e,h,a){const r=[n,e];for(;r.length;){const n=t(r.pop()),e=t(r.pop());if(n-e<=h)continue;const o=e+Math.ceil((n-e)/h/2)*h;s(i,o,e,n,a),r.push(e,o,o,n)}}const M=new e,X=new e,Y=new e,B=new e({deallocator:void 0});class _{constructor(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0}}class w extends _{constructor(){super(...arguments),this.height=1,this.indexHint=new n}}class b extends w{constructor(t){super(),this.children=t,this.leaf=!0}}class j extends w{constructor(t){super(),this.children=t,this.leaf=!1}}export default h;export{_ as BBox,h as PooledRBush};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport i from\"../../../core/has.js\";import{PooledRBush as s}from\"../../../core/libs/rbush/PooledRBush.js\";const d=5e4,n={minX:0,minY:0,maxX:0,maxY:0};function t(i,s,d){n.minX=s[0],n.minY=s[1],n.maxX=s[2],n.maxY=s[3],i.search(n,d)}class e{constructor(){this._indexInvalid=!1,this._boundsToLoad=[],this._boundsById=new Map,this._idByBounds=new Map,this._index=new s(9,i(\"csp-restrictions\")?i=>({minX:i[0],minY:i[1],maxX:i[2],maxY:i[3]}):[\"[0]\",\"[1]\",\"[2]\",\"[3]\"]),this._loadIndex=()=>{if(this._indexInvalid){const i=new Array(this._idByBounds.size);let s=0;this._idByBounds.forEach(((d,n)=>{i[s++]=n})),this._indexInvalid=!1,this._index.clear(),this._index.load(i)}else this._boundsToLoad.length&&(this._index.load(this._boundsToLoad.filter((i=>this._idByBounds.has(i)))),this._boundsToLoad.length=0)}}clear(){this._indexInvalid=!1,this._boundsToLoad.length=0,this._boundsById.clear(),this._idByBounds.clear(),this._index.clear()}delete(i){const s=this._boundsById.get(i);this._boundsById.delete(i),s&&(this._idByBounds.delete(s),this._indexInvalid||this._index.remove(s))}forEachInBounds(i,s){this._loadIndex(),t(this._index,i,(i=>s(this._idByBounds.get(i))))}get(i){return this._boundsById.get(i)}has(i){return this._boundsById.has(i)}invalidateIndex(){this._indexInvalid||(this._indexInvalid=!0,this._boundsToLoad.length=0)}set(i,s){if(!this._indexInvalid){const s=this._boundsById.get(i);s&&(this._index.remove(s),this._idByBounds.delete(s))}this._boundsById.set(i,s),s&&(this._idByBounds.set(s,i),this._indexInvalid||(this._boundsToLoad.push(s),this._boundsToLoad.length>d&&this._loadIndex()))}}export{e as BoundsStore};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport t from\"../OptimizedFeature.js\";import e from\"../OptimizedGeometry.js\";import{getCentroidOptimizedGeometry as r}from\"../centroid.js\";const o={getObjectId:t=>t.objectId,getAttributes:t=>t.attributes,getAttribute:(t,e)=>t.attributes[e],cloneWithGeometry:(e,r)=>new t(r,e.attributes,null,e.objectId),getGeometry:t=>t.geometry,getCentroid:(t,o)=>(t.centroid||(t.centroid=r(new e,t.geometry,o.hasZ,o.hasM)),t.centroid)};export default o;export{o as optimizedFeatureQueryEngineAdapter};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{isSome as e}from\"../../../core/maybe.js\";import t from\"../../../core/Logger.js\";import r from\"../../../core/Error.js\";import s from\"../../../core/Evented.js\";import{create as o,NEGATIVE_INFINITY as i}from\"../../../geometry/support/aaBoundingRect.js\";import{getBoundsOptimizedGeometry as a}from\"../featureConversionUtils.js\";import{fromRect as d}from\"../../../geometry/support/aaBoundingBox.js\";import{BoundsStore as n}from\"./BoundsStore.js\";import{optimizedFeatureQueryEngineAdapter as h}from\"./optimizedFeatureQueryEngineAdapter.js\";class u{constructor(e){this.geometryInfo=e,this._boundsStore=new n,this._featuresById=new Map,this._markedIds=new Set,this.events=new s,this.featureAdapter=h}get geometryType(){return this.geometryInfo.geometryType}get hasM(){return this.geometryInfo.hasM}get hasZ(){return this.geometryInfo.hasZ}get numFeatures(){return this._featuresById.size}get fullBounds(){if(!this.numFeatures)return null;const e=o(i);return this._featuresById.forEach((t=>{const r=this._boundsStore.get(t.objectId);r&&(e[0]=Math.min(r[0],e[0]),e[1]=Math.min(r[1],e[1]),e[2]=Math.max(r[2],e[2]),e[3]=Math.max(r[3],e[3]))})),e}get storeStatistics(){let e=0;return this._featuresById.forEach((t=>{t.geometry&&t.geometry.coords&&(e+=t.geometry.coords.length)})),{featureCount:this._featuresById.size,vertexCount:e/(this.hasZ?this.hasM?4:3:this.hasM?3:2)}}add(e){this._add(e),this._emitChanged()}addMany(e){for(const t of e)this._add(t);this._emitChanged()}clear(){this._featuresById.clear(),this._boundsStore.clear(),this._emitChanged()}removeById(e){const t=this._featuresById.get(e);return t?(this._remove(t),this._emitChanged(),t):null}removeManyById(e){this._boundsStore.invalidateIndex();for(const t of e){const e=this._featuresById.get(t);e&&this._remove(e)}this._emitChanged()}forEachBounds(e,t,r){for(const s of e){const e=this._boundsStore.get(s.objectId);e&&t(d(r,e))}}getFeature(e){return this._featuresById.get(e)}has(e){return this._featuresById.has(e)}forEach(e){this._featuresById.forEach((t=>e(t)))}forEachInBounds(e,t){this._boundsStore.forEachInBounds(e,(e=>{t(this._featuresById.get(e))}))}startMarkingUsedFeatures(){this._boundsStore.invalidateIndex(),this._markedIds.clear()}sweep(){let e=!1;this._featuresById.forEach(((t,r)=>{this._markedIds.has(r)||(e=!0,this._remove(t))})),this._markedIds.clear(),e&&this._emitChanged()}_emitChanged(){this.events.emit(\"changed\",void 0)}_add(s){if(!s)return;const i=s.objectId;if(null==i)return void t.getLogger(\"esri.layers.graphics.data.FeatureStore\").error(new r(\"featurestore:invalid-feature\",\"feature id is missing\",{feature:s}));const d=this._featuresById.get(i);let n;if(this._markedIds.add(i),d?(s.displayId=d.displayId,n=this._boundsStore.get(i),this._boundsStore.delete(i)):e(this.onFeatureAdd)&&this.onFeatureAdd(s),!s.geometry||!s.geometry.coords||!s.geometry.coords.length)return this._boundsStore.set(i,null),void this._featuresById.set(i,s);n=a(n||o(),s.geometry,this.geometryInfo.hasZ,this.geometryInfo.hasM),this._boundsStore.set(i,n),this._featuresById.set(i,s)}_remove(t){return e(this.onFeatureRemove)&&this.onFeatureRemove(t),this._markedIds.delete(t.objectId),this._boundsStore.delete(t.objectId),this._featuresById.delete(t.objectId),t}}export default u;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{LineSnappingHint as t}from\"../hints/LineSnappingHint.js\";import{FeatureSnappingCandidate as n}from\"./FeatureSnappingCandidate.js\";import{LineConstraint as r}from\"../SnappingConstraint.js\";class e extends n{constructor(t){super({...t,constraint:new r(t.coordinateHelper,t.edgeStart,t.edgeEnd)})}get hints(){return[new t(1,this.constraint.start,this.constraint.end)]}}export{e as EdgeSnappingCandidate};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{PointSnappingHint as t}from\"../hints/PointSnappingHint.js\";import{FeatureSnappingCandidate as n}from\"./FeatureSnappingCandidate.js\";import{PointConstraint as r}from\"../SnappingConstraint.js\";class i extends n{constructor(t){super({...t,constraint:new r(t.coordinateHelper,t.targetPoint)})}get hints(){return[new t(this.targetPoint)]}}export{i as VertexSnappingCandidate};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{EdgeSnappingCandidate as e}from\"../candidates/EdgeSnappingCandidate.js\";import{VertexSnappingCandidate as t}from\"../candidates/VertexSnappingCandidate.js\";function r(r,n){switch(r.type){case\"edge\":return new e({coordinateHelper:n,edgeStart:n.fromPoint(r.start),edgeEnd:n.fromPoint(r.end),targetPoint:n.fromPoint(r.target),objectId:r.objectId});case\"vertex\":return new t({coordinateHelper:n,targetPoint:n.fromPoint(r.target),objectId:r.objectId})}}export{r as convertSnappingCandidate};\n"],"sourceRoot":""}