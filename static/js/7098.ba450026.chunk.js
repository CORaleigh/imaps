"use strict";(globalThis.webpackChunkimaps=globalThis.webpackChunkimaps||[]).push([[7098],{41649:(e,t,r)=>{r.d(t,{Z:()=>G});var i,o=r(27366),n=r(29479),s=r(51995),a=r(40281),l=r(60354),p=r(41644),u=r(10064),d=r(46784),c=r(84652),y=r(54472),h=r(93002),m=r(32718),b=r(66978),w=r(49861),g=r(25243),f=r(69912),v=r(31201),_=(r(63780),r(93169),r(75366),r(27135));let C=i=class extends d.wq{constructor(e){super(e),this.type="none"}clone(){return new i({type:this.type})}};(0,o._)([(0,_.J)({none:"none",stayAbove:"stay-above"})],C.prototype,"type",void 0),C=i=(0,o._)([(0,f.j)("esri.ground.NavigationConstraint")],C);var S,I=r(81219);const j=m.Z.getLogger("esri.Ground");let T=S=class extends((0,d.eC)(y.Z)){constructor(e){super(e),this.opacity=1,this.surfaceColor=null,this.navigationConstraint=null,this.layers=new a.Z;const t=e=>{e.parent&&e.parent!==this&&"remove"in e.parent&&e.parent.remove(e),e.parent=this,"elevation"!==e.type&&"base-elevation"!==e.type&&j.error(`Layer '${e.title}, id:${e.id}' of type '${e.type}' is not supported as a ground layer and will therefore be ignored. Only layers of type 'elevation' are supported.`)};this.layers.on("after-add",(e=>t(e.item))),this.layers.on("after-remove",(e=>(e=>{e.parent=null})(e.item)))}initialize(){this.when().catch((e=>{j.error("#load()","Failed to load ground",e)})),this.resourceInfo&&this.read(this.resourceInfo.data,this.resourceInfo.context)}destroy(){const e=this.layers.removeAll();for(const t of e)t.destroy();this.layers.destroy()}normalizeCtorArgs(e){return e&&"resourceInfo"in e&&(this._set("resourceInfo",e.resourceInfo),delete(e={...e}).resourceInfo),e}set layers(e){this._set("layers",(0,l.Z)(e,this._get("layers")))}writeLayers(e,t,r,i){const o=[];e?(i={...i,layerContainerType:"ground"},e.forEach((e=>{if("write"in e){const t={};(0,p.sM)(e)().write(t,i)&&o.push(t)}else i&&i.messages&&i.messages.push(new u.Z("layer:unsupported",`Layers (${e.title}, ${e.id}) of type '${e.declaredClass}' cannot be persisted in the ground`,{layer:e}))})),t.layers=o):t.layers=o}load(e){return this.addResolvingPromise(this._loadFromSource(e)),Promise.resolve(this)}loadAll(){return(0,h.G)(this,(e=>{e(this.layers)}))}async queryElevation(e,t){await this.load({signal:t?.signal});const{ElevationQuery:i}=await r.e(6382).then(r.bind(r,16382));(0,b.k_)(t);const o=new i,n=this.layers.filter(N).toArray();return o.queryAll(n,e,t)}async createElevationSampler(e,t){await this.load({signal:t?.signal});const{ElevationQuery:i}=await r.e(6382).then(r.bind(r,16382));(0,b.k_)(t);const o=new i,n=this.layers.filter(N).toArray();return o.createSamplerAll(n,e,t)}clone(){const e={opacity:this.opacity,surfaceColor:(0,c.d9)(this.surfaceColor),navigationConstraint:(0,c.d9)(this.navigationConstraint),layers:this.layers.slice()};return this.loaded&&(e.loadStatus="loaded"),new S({resourceInfo:this.resourceInfo}).set(e)}read(e,t){this.resourceInfo||this._set("resourceInfo",{data:e,context:t}),super.read(e,t)}_loadFromSource(e){const t=this.resourceInfo;return t?this._loadLayersFromJSON(t.data,t.context,e):Promise.resolve(null)}_loadLayersFromJSON(e,t,i){const o=t&&t.origin||"web-scene",n=t&&t.portal||null,s=t&&t.url||null;return r.e(519).then(r.bind(r,20519)).then((t=>{let{populateOperationalLayers:r}=t;(0,b.k_)(i);const a=[];if(e.layers&&Array.isArray(e.layers)){const t={context:{origin:o,url:s,portal:n,layerContainerType:"ground"},defaultLayerType:"ArcGISTiledElevationServiceLayer"};a.push(r(this.layers,e.layers,t))}return(0,b.as)(a)})).then((()=>{}))}};function N(e){return"elevation"===e.type||function(e){return e&&"createElevationSampler"in e}(e)}(0,o._)([(0,w.Cb)({json:{read:!1}})],T.prototype,"layers",null),(0,o._)([(0,v.c)("layers")],T.prototype,"writeLayers",null),(0,o._)([(0,w.Cb)({readOnly:!0})],T.prototype,"resourceInfo",void 0),(0,o._)([(0,w.Cb)({type:Number,nonNullable:!0,range:{min:0,max:1},json:{type:g.z8,read:{reader:I.b,source:"transparency"},write:{writer:(e,t)=>{t.transparency=(0,I.a)(e)},target:"transparency"}}})],T.prototype,"opacity",void 0),(0,o._)([(0,w.Cb)({type:s.Z,json:{type:[g.z8],write:(e,t)=>{t.surfaceColor=e.toJSON().slice(0,3)}}})],T.prototype,"surfaceColor",void 0),(0,o._)([(0,w.Cb)({type:C,json:{write:!0}})],T.prototype,"navigationConstraint",void 0),T=S=(0,o._)([(0,f.j)("esri.Ground")],T);const x=T;var R=r(85015),O=r(77178),A=r(91505),E=r(92026),L=r(89125);function F(e){return!!(e&&e.loaded&&"capabilities"in e&&e?.capabilities?.operations&&"supportsEditing"in e.capabilities.operations&&!0===e.capabilities.operations.supportsEditing)&&!("editingEnabled"in e&&!e.editingEnabled)}var k=r(23037),P=r(30219);const q=m.Z.getLogger("esri.support.groundUtils"),J={"world-elevation":{id:"worldElevation",url:"//elevation3d.arcgis.com/arcgis/rest/services/WorldElevation3D/Terrain3D/ImageServer",layerType:"ArcGISTiledElevationServiceLayer"},"world-topobathymetry":{id:"worldTopoBathymetry",url:"//elevation3d.arcgis.com/arcgis/rest/services/WorldElevation3D/TopoBathy3D/ImageServer",layerType:"ArcGISTiledElevationServiceLayer"}};var U=r(84938),V=r(16791);let Z=class extends((0,V.Q)((0,U.K)(A.Z.EventedMixin(R.Z)))){constructor(e){super(e),this.allLayers=new O.Z({getCollections:()=>[this.basemap?.baseLayers,this.ground?.layers,this.layers,this.basemap?.referenceLayers],getChildrenFunction:e=>"layers"in e?e.layers:null}),this.allTables=(0,P.a)(this),this.basemap=null,this.editableLayers=new O.Z({getCollections:()=>[this.allLayers],itemFilterFunction:F}),this.ground=new x,this._basemapCache=(0,k.Df)()}destroy(){this.allLayers.destroy(),this.allTables.destroy(),this.editableLayers.destroy(),this.ground?.destroy(),this.basemap?.destroy(),(0,k.Bf)(this._basemapCache),this._basemapCache=null}castBasemap(e){return(0,k.se)(e,this._basemapCache)}castGround(e){const t=function(e){let t=null;"string"==typeof e?e in J?t=new x({resourceInfo:{data:{layers:[J[e]]}}}):q.warn(`Unable to find ground definition for: ${e}. Try "world-elevation"`):t=(0,g.se)(x,e);return t}(e);return(0,E.Wi)(t)?this._get("ground"):t}findLayerById(e){return this.allLayers.find((t=>t.id===e))}findTableById(e){return this.allTables.find((t=>t.id===e))}};(0,o._)([(0,w.Cb)({readOnly:!0,dependsOn:[]})],Z.prototype,"allLayers",void 0),(0,o._)([(0,w.Cb)({readOnly:!0})],Z.prototype,"allTables",void 0),(0,o._)([(0,w.Cb)({type:n.default})],Z.prototype,"basemap",void 0),(0,o._)([(0,L.p)("basemap")],Z.prototype,"castBasemap",null),(0,o._)([(0,w.Cb)({readOnly:!0})],Z.prototype,"editableLayers",void 0),(0,o._)([(0,w.Cb)({type:x,nonNullable:!0})],Z.prototype,"ground",void 0),(0,o._)([(0,L.p)("ground")],Z.prototype,"castGround",null),Z=(0,o._)([(0,f.j)("esri.Map")],Z);const G=Z},13894:(e,t,r)=>{r.d(t,{Z:()=>S});var i=r(27366),o=r(11582),n=r(17768),s=r(46784),a=r(16889),l=r(49861),p=(r(63780),r(93169),r(89125)),u=r(38511),d=r(69912),c=r(31201),y=r(25243),h=r(7882);let m=class extends((0,o.J)(s.wq)){constructor(){super(...arguments),this.position=new h.Z([0,0,0]),this.heading=0,this.tilt=0,this.fov=55}normalizeCtorArgs(e,t,r,i){if(e&&"object"==typeof e&&("x"in e||Array.isArray(e))){const o={position:e};return null!=t&&(o.heading=t),null!=r&&(o.tilt=r),null!=i&&(o.fov=i),o}return e}writePosition(e,t,r,i){const o=e.clone();o.x=(0,y.q9)(e.x||0),o.y=(0,y.q9)(e.y||0),o.z=e.hasZ?(0,y.q9)(e.z||0):e.z,t[r]=o.write({},i)}readPosition(e,t){const r=new h.Z;return r.read(e,t),r.x=(0,y.q9)(r.x||0),r.y=(0,y.q9)(r.y||0),r.z=r.hasZ?(0,y.q9)(r.z||0):r.z,r}equals(e){return!!e&&this.tilt===e.tilt&&this.heading===e.heading&&this.fov===e.fov&&this.position.equals(e.position)}};(0,i._)([(0,l.Cb)({type:h.Z,json:{write:{isRequired:!0}}})],m.prototype,"position",void 0),(0,i._)([(0,c.c)("position")],m.prototype,"writePosition",null),(0,i._)([(0,u.r)("position")],m.prototype,"readPosition",null),(0,i._)([(0,l.Cb)({type:Number,nonNullable:!0,json:{write:{isRequired:!0}}}),(0,p.p)((e=>n.BV.normalize((0,y.q9)(e))))],m.prototype,"heading",void 0),(0,i._)([(0,l.Cb)({type:Number,nonNullable:!0,json:{write:{isRequired:!0}}}),(0,p.p)((e=>(0,a.uZ)((0,y.q9)(e),-180,180)))],m.prototype,"tilt",void 0),(0,i._)([(0,l.Cb)({type:Number,nonNullable:!0,json:{read:!1,write:!1}})],m.prototype,"fov",void 0),m=(0,i._)([(0,d.j)("esri.Camera")],m);const b=m;var w,g=r(59486),f=r(92026),v=r(77981);let _=w=class extends s.wq{constructor(e){super(e),this.rotation=0,this.scale=0,this.targetGeometry=null,this.camera=null}castRotation(e){return(e%=360)<0&&(e+=360),e}clone(){return new w({rotation:this.rotation,scale:this.scale,targetGeometry:(0,f.pC)(this.targetGeometry)?this.targetGeometry.clone():null,camera:(0,f.pC)(this.camera)?this.camera.clone():null})}};function C(){return{enabled:!this.camera}}(0,i._)([(0,l.Cb)({type:Number,json:{write:!0,origins:{"web-map":{default:0,write:!0},"web-scene":{write:{overridePolicy:C}}}}})],_.prototype,"rotation",void 0),(0,i._)([(0,p.p)("rotation")],_.prototype,"castRotation",null),(0,i._)([(0,l.Cb)({type:Number,json:{write:!0,origins:{"web-map":{default:0,write:!0},"web-scene":{write:{overridePolicy:C}}}}})],_.prototype,"scale",void 0),(0,i._)([(0,l.Cb)({types:g.qM,json:{read:v.im,write:!0,origins:{"web-scene":{read:v.im,write:{overridePolicy:C}}}}})],_.prototype,"targetGeometry",void 0),(0,i._)([(0,l.Cb)({type:b,json:{write:!0}})],_.prototype,"camera",void 0),_=w=(0,i._)([(0,d.j)("esri.Viewpoint")],_);const S=_},26834:(e,t,r)=>{r.d(t,{Z:()=>dr});var i=r(27366),o=r(19545),n=r(41649),s=r(13894),a=r(63780),l=r(40281),p=r(10064),u=r(54472),d=r(93002),c=r(32718),y=r(92026),h=r(97642),m=r(67426),b=r(66978),w=r(94172),g=r(35995),f=r(49861),v=(r(93169),r(25243)),_=r(38511),C=r(69912),S=r(31201),I=r(15909),j=r(92562),T=r(78952),N=r(92975),x=r(81753),R=r(25899),O=r(37933),A=r(76200),E=r(16455),L=r(21149);function F(e){return k(e)*function(e){return e.capabilities.query.maxRecordCount||2e3}(e)}function k(e){return e.capabilities.query.supportsMaxRecordCountFactor?L.Z.MAX_MAX_RECORD_COUNT_FACTOR:1}var P=r(53866);const q=c.Z.getLogger("esri.networks.Network");let J=class extends((0,h.R)(u.Z)){constructor(e){super(e),this.id=null,this.title=null,this.layerUrl=null,this.dataElement=null,this.fullExtent=null,this.spatialReference=null,this.type=null,this.sourceJSON=null}initialize(){this.when().catch((e=>{(0,b.D_)(e)||q.error("#load()",`Failed to load layer (title: '${this.title??"no title"}', id: '${this.id??"no id"}')`,{error:e})}))}get datasetName(){return this.dataElement?.name}get owner(){return this.dataElement?.userIdentity}get schemaGeneration(){return this.dataElement?.schemaGeneration}get parsedUrl(){const e=this.layerUrl;return e?(0,g.mN)(e):null}get featureServiceUrl(){const e=this.parsedUrl&&(0,R.Qc)(this.parsedUrl.path);return(0,y.pC)(e)?e.url.path:null}get networkServiceUrl(){return this.featureServiceUrl?this.featureServiceUrl.replace(/\/FeatureServer/i,"/UtilityNetworkServer"):null}get layerId(){const e=this.parsedUrl&&(0,R.Qc)(this.parsedUrl.path);return(0,y.pC)(e)?e.sublayer:null}async load(e){return this.addResolvingPromise(this._fetchDataElement(this.featureServiceUrl,this.layerId.toString(),e)),this.addResolvingPromise(this._fetchLayerMetaData(this.layerUrl,e)),this}getLayerIdBySourceId(e){if(this.dataElement){const t=this.dataElement.domainNetworks;for(const r of t){for(const t of r.edgeSources?r.edgeSources:[])if(t.sourceId===e)return t.layerId;for(const t of r.junctionSources?r.junctionSources:[])if(t.sourceId===e)return t.layerId}return null}return null}async _fetchLayerMetaData(e,t){const r=await(0,A.default)(e,{responseType:"json",query:{f:"json"},...t});this.sourceJSON=r.data,this.read(r.data,{origin:"service"})}async _fetchDataElement(e,t,r){if(this.dataElement)return;const i=await(0,A.default)(`${e}/queryDataElements`,{responseType:"json",query:{layers:JSON.stringify([t]),f:"json"},...r}).then((e=>e.data.layerDataElements?.[0]));i&&this.read(i,{origin:"service"})}};(0,i._)([(0,f.Cb)({type:String,nonNullable:!0,json:{origins:{"web-map":{read:!0,write:{isRequired:!0}}},read:!1}})],J.prototype,"id",void 0),(0,i._)([(0,f.Cb)({type:String,nonNullable:!0,json:{origins:{"web-map":{read:!0,write:{isRequired:!0}}},read:!1}})],J.prototype,"title",void 0),(0,i._)([(0,f.Cb)({type:String,nonNullable:!0,json:{origins:{"web-map":{read:{source:"url"},write:{target:"url",isRequired:!0}}},read:!1}})],J.prototype,"layerUrl",void 0),(0,i._)([(0,f.Cb)({type:Object,json:{origins:{service:{read:!0}},read:!1}})],J.prototype,"dataElement",void 0),(0,i._)([(0,f.Cb)({type:P.Z,json:{origins:{service:{read:{source:"extent"}}},read:!1}})],J.prototype,"fullExtent",void 0),(0,i._)([(0,f.Cb)({type:T.Z,json:{origins:{service:{read:{source:"extent.spatialReference"}}},read:!1}})],J.prototype,"spatialReference",void 0),(0,i._)([(0,f.Cb)({type:["utility","trace"],readOnly:!0,json:{read:!1,write:!1}})],J.prototype,"type",void 0),(0,i._)([(0,f.Cb)({readOnly:!0})],J.prototype,"datasetName",null),(0,i._)([(0,f.Cb)({readOnly:!0})],J.prototype,"owner",null),(0,i._)([(0,f.Cb)({readOnly:!0})],J.prototype,"schemaGeneration",null),(0,i._)([(0,f.Cb)({readOnly:!0})],J.prototype,"parsedUrl",null),(0,i._)([(0,f.Cb)({readOnly:!0})],J.prototype,"featureServiceUrl",null),(0,i._)([(0,f.Cb)({readOnly:!0})],J.prototype,"networkServiceUrl",null),(0,i._)([(0,f.Cb)({readOnly:!0})],J.prototype,"layerId",null),(0,i._)([(0,f.Cb)()],J.prototype,"sourceJSON",void 0),J=(0,i._)([(0,C.j)("esri.networks.Network")],J);const U=J;var V,Z=r(46784),G=r(43404);!function(e){e[e.RTJunctionJunctionConnectivity=1]="RTJunctionJunctionConnectivity",e[e.RTContainment=2]="RTContainment",e[e.RTAttachment=3]="RTAttachment",e[e.RTJunctionEdgeConnectivity=4]="RTJunctionEdgeConnectivity",e[e.RTEdgeJunctionEdgeConnectivity=5]="RTEdgeJunctionEdgeConnectivity"}(V||(V={}));const M=new G.X({connected:"connected",upstream:"upstream",downstream:"downstream",shortestPath:"shortest-path",subnetwork:"subnetwork",subnetworkController:"subnetwork-controller",loops:"loops",isolation:"isolation"});new G.X({connectivity:"connectivity",attachment:"attachment",containment:"containment",junctionEdgeFromConnectivity:"junction-edge-from-connectivity",junctionMidspanConnectivity:"junction-midspan-connectivity",junctionEdgeToConnectivity:"junction-edge-to-connectivity"});let D=class extends((0,Z.eC)(u.Z)){constructor(e){super(e),this.request=A.default}initialize(){}async load(e){const t=this.layer.load(e).then((()=>this._initializeRulesTable()));return this.addResolvingPromise(t),this}getFeatureSQL(e,t){const r=e.layerId.toString(),i=e.fieldsIndex.normalizeFieldName("assetGroup"),o=e.fieldsIndex.normalizeFieldName("assetType"),n=t.attributes[i],s=t.attributes[o],a=this.rulesHash[r];if(a){const e=a.assetGroupHash[n];if(e){return e.assetTypeHash[s]||null}}return null}async _initializeRulesTable(){const e={};let t;!function(e){e[e.from=0]="from",e[e.to=1]="to",e[e.via=2]="via"}(t||(t={}));const r=[{networkSourceId:"fromNetworkSource",assetGroupId:"fromAssetGroup",assetTypeId:"fromAssetType"},{networkSourceId:"toNetworkSource",assetGroupId:"toAssetGroup",assetTypeId:"toAssetType"},{networkSourceId:"viaNetworkSource",assetGroupId:"viaAssetGroup",assetTypeId:"viaAssetType"}];for(const i of this.rules){if(i.ruleType!==V.RTJunctionJunctionConnectivity&&i.ruleType!==V.RTJunctionEdgeConnectivity&&i.ruleType!==V.RTEdgeJunctionEdgeConnectivity)continue;let o=[[t.from,t.to],[t.to,t.from]];i.ruleType===V.RTEdgeJunctionEdgeConnectivity&&(o=[[t.from,t.via],[t.via,t.from],[t.to,t.via],[t.via,t.to]]);for(const n of o){const o=n.shift(),s=n.shift();let a=!1;switch(i.ruleType){case V.RTEdgeJunctionEdgeConnectivity:a=o===t.from||o===t.to;break;case V.RTJunctionEdgeConnectivity:a=o===t.to}const l=r[o],p=i[l.networkSourceId].layerId.toString(),u=i[l.assetGroupId]?.assetGroupCode?.toString(),d=i[l.assetTypeId]?.assetTypeCode?.toString(),c=r[s],y=i[c.networkSourceId].layerId.toString(),h=i[c.assetGroupId]?.assetGroupCode?.toString(),m=i[c.assetTypeId],b=m?.assetTypeCode?.toString(),w=e[p]?e[p]:{assetGroupHash:{}};if(!(u&&d&&h&&b))continue;const g=w.assetGroupHash[u]?w.assetGroupHash[u]:{assetTypeHash:{}},f=g.assetTypeHash[d]?g.assetTypeHash[d]:{};if(f[y]=f[y]?f[y]:{},a){f[p]=f[p]?f[p]:{};const e=`(assetgroup = ${u} AND assettype = ${d})`;f[p].anyVertex=f[p].anyVertex?`${f[p].anyVertex}`:`${e}`,"esriNECPEndVertex"===m.connectivityPolicy&&(f[p].endVertex=f[p]?.endVertex?`${f[p].endVertex}`:`${e}`)}const v=`(assetgroup = ${h} AND assettype = ${b})`;f[y].anyVertex=f[y]?.anyVertex?`${f[y].anyVertex} OR ${v}`:`${v}`,"esriNECPEndVertex"===m.connectivityPolicy&&(f[y].endVertex=f[y]?.endVertex?`${f[y].endVertex} OR ${v}`:`${v}`),g.assetTypeHash[d]=f,w.assetGroupHash[u]=g,e[p]=w}}this.rulesHash=e}};(0,i._)([(0,f.Cb)({constructOnly:!0})],D.prototype,"layer",void 0),(0,i._)([(0,f.Cb)({constructOnly:!0})],D.prototype,"rules",void 0),(0,i._)([(0,f.Cb)()],D.prototype,"rulesHash",void 0),(0,i._)([(0,f.Cb)({constructOnly:!0})],D.prototype,"request",void 0),D=(0,i._)([(0,C.j)("esri.networks.RulesTable")],D);const B=D;let $=class extends Z.wq{constructor(e){super(e),this.conditionBarriers=[],this.outputConditions=[],this.functions=[],this.functionBarriers=[],this.traversabilityScope=null,this.shortestPathNetworkAttributeName=null,this.includeBarriers=null,this.validateConsistency=null,this.ignoreBarriersAtStartingPoints=null}};(0,i._)([(0,f.Cb)({type:[Object],json:{write:!0}})],$.prototype,"conditionBarriers",void 0),(0,i._)([(0,f.Cb)({type:[Object],json:{write:!0}})],$.prototype,"outputConditions",void 0),(0,i._)([(0,f.Cb)({type:[Object],json:{write:!0}})],$.prototype,"functions",void 0),(0,i._)([(0,f.Cb)({type:[Object],json:{write:!0}})],$.prototype,"functionBarriers",void 0),(0,i._)([(0,f.Cb)({type:["junctions","edges","junctionsAndEdges"],json:{write:!0}})],$.prototype,"traversabilityScope",void 0),(0,i._)([(0,f.Cb)({type:String,json:{write:!0}})],$.prototype,"shortestPathNetworkAttributeName",void 0),(0,i._)([(0,f.Cb)({type:Boolean,json:{write:!0}})],$.prototype,"includeBarriers",void 0),(0,i._)([(0,f.Cb)({type:Boolean,json:{write:!0}})],$.prototype,"validateConsistency",void 0),(0,i._)([(0,f.Cb)({type:Boolean,json:{write:!0}})],$.prototype,"ignoreBarriersAtStartingPoints",void 0),$=(0,i._)([(0,C.j)("esri.networks.support.TraceConfiguration")],$);const W=$;let z=class extends W{constructor(e){super(e),this.filterBarriers=[],this.domainNetworkName=null,this.filterBitsetNetworkAttributeName=null,this.filterFunctionBarriers=[],this.filterScope=null,this.includeContainers=null,this.includeContent=null,this.includeIsolated=null,this.includeStructures=null,this.includeUpToFirstSpatialContainer=null,this.nearestNeighbor=null,this.outputFilterCategories=[],this.outputFilters=[],this.propagators=[],this.subnetworkName=null,this.targetTierName=null,this.tierName=null,this.validateLocatability=null}};(0,i._)([(0,f.Cb)({type:[Object],json:{write:!0}})],z.prototype,"filterBarriers",void 0),(0,i._)([(0,f.Cb)({type:String,json:{write:!0}})],z.prototype,"domainNetworkName",void 0),(0,i._)([(0,f.Cb)({type:String,json:{write:!0}})],z.prototype,"filterBitsetNetworkAttributeName",void 0),(0,i._)([(0,f.Cb)({type:[Object],json:{write:!0}})],z.prototype,"filterFunctionBarriers",void 0),(0,i._)([(0,f.Cb)({type:["junctions","edges","junctionsAndEdges"],json:{write:!0}})],z.prototype,"filterScope",void 0),(0,i._)([(0,f.Cb)({type:Boolean,json:{write:!0}})],z.prototype,"includeContainers",void 0),(0,i._)([(0,f.Cb)({type:Boolean,json:{write:!0}})],z.prototype,"includeContent",void 0),(0,i._)([(0,f.Cb)({type:Boolean,json:{write:!0}})],z.prototype,"includeIsolated",void 0),(0,i._)([(0,f.Cb)({type:Boolean,json:{write:!0}})],z.prototype,"includeStructures",void 0),(0,i._)([(0,f.Cb)({type:Boolean,json:{write:!0}})],z.prototype,"includeUpToFirstSpatialContainer",void 0),(0,i._)([(0,f.Cb)({type:Object,json:{write:!0}})],z.prototype,"nearestNeighbor",void 0),(0,i._)([(0,f.Cb)({type:[Object],json:{write:!0}})],z.prototype,"outputFilterCategories",void 0),(0,i._)([(0,f.Cb)({type:[Object],json:{write:!0}})],z.prototype,"outputFilters",void 0),(0,i._)([(0,f.Cb)({type:[Object],json:{write:!0}})],z.prototype,"propagators",void 0),(0,i._)([(0,f.Cb)({type:String,json:{write:!0}})],z.prototype,"subnetworkName",void 0),(0,i._)([(0,f.Cb)({type:String,json:{write:!0}})],z.prototype,"targetTierName",void 0),(0,i._)([(0,f.Cb)({type:String,json:{write:!0}})],z.prototype,"tierName",void 0),(0,i._)([(0,f.Cb)({type:Boolean,json:{write:!0}})],z.prototype,"validateLocatability",void 0),z=(0,i._)([(0,C.j)("esri.networks.support.UNTraceConfiguration")],z);const K=z;let H=class extends h.w{constructor(e){super(e),this.globalId=null,this.title=null,this.traceConfiguration=null,this.creationDate=null,this.creator=null,this.description=null,this.minStartingPoints=null,this.resultTypes=[],this.tags=[],this.traceType=null}readTraceConfiguration(e,t){return void 0!==e.tierName?K.fromJSON(e):W.fromJSON(e)}};(0,i._)([(0,f.Cb)({type:String,nonNullable:!0,json:{origins:{"web-map":{read:{source:"id"},write:{target:"id",isRequired:!0}},service:{read:{source:"globalId"}}},read:!1}})],H.prototype,"globalId",void 0),(0,i._)([(0,f.Cb)({type:String,nonNullable:!0,json:{origins:{"web-map":{read:{source:"title"},write:{target:"title",isRequired:!0}},service:{read:{source:"name"}}},read:!1}})],H.prototype,"title",void 0),(0,i._)([(0,f.Cb)({type:W,json:{origins:{service:{read:!0}},read:!1}})],H.prototype,"traceConfiguration",void 0),(0,i._)([(0,_.r)("service","traceConfiguration")],H.prototype,"readTraceConfiguration",null),(0,i._)([(0,f.Cb)({type:Date,json:{origins:{service:{read:!0}},read:!1}})],H.prototype,"creationDate",void 0),(0,i._)([(0,f.Cb)({type:String,json:{origins:{service:{read:!0}},read:!1}})],H.prototype,"creator",void 0),(0,i._)([(0,f.Cb)({type:String,json:{origins:{service:{read:!0}},read:!1}})],H.prototype,"description",void 0),(0,i._)([(0,f.Cb)({type:["none","one","many"],json:{origins:{service:{read:{source:"minNumStartingPoints"}}},read:!1}})],H.prototype,"minStartingPoints",void 0),(0,i._)([(0,f.Cb)({type:[Object],json:{origins:{service:{read:!0}},read:!1}})],H.prototype,"resultTypes",void 0),(0,i._)([(0,f.Cb)({type:[String],json:{origins:{service:{read:!0}},read:!1}})],H.prototype,"tags",void 0),(0,i._)([(0,f.Cb)({type:M.apiValues,json:{type:M.jsonValues,origins:{service:{read:M.read}},read:!1}})],H.prototype,"traceType",void 0),H=(0,i._)([(0,C.j)("esri.networks.support.NamedTraceConfiguration")],H);const X=H;let Q=class extends Z.wq{constructor(e){super(e),this.id=null,this.name=null}};(0,i._)([(0,f.Cb)({type:Number,json:{read:{source:"terminalId"},write:{target:"terminalId"}}})],Q.prototype,"id",void 0),(0,i._)([(0,f.Cb)({type:String,json:{read:{source:"terminalName"},write:{target:"terminalName"}}})],Q.prototype,"name",void 0),(0,i._)([(0,f.Cb)({type:Boolean,json:{write:!0}})],Q.prototype,"isUpstreamTerminal",void 0),Q=(0,i._)([(0,C.j)("esri.networks.support.Terminal")],Q);const Y=Q,ee=new G.X({esriUNTMBidirectional:"bidirectional",esriUNTMDirectional:"directional"});let te=class extends Z.wq{constructor(e){super(e),this.defaultConfiguration=null,this.id=null,this.name=null,this.terminals=[],this.traversabilityModel=null}};(0,i._)([(0,f.Cb)({type:String,json:{write:!0}})],te.prototype,"defaultConfiguration",void 0),(0,i._)([(0,f.Cb)({type:Number,json:{read:{source:"terminalConfigurationId"},write:{target:"terminalConfigurationId"}}})],te.prototype,"id",void 0),(0,i._)([(0,f.Cb)({type:String,json:{read:{source:"terminalConfigurationName"},write:{target:"terminalConfigurationName"}}})],te.prototype,"name",void 0),(0,i._)([(0,f.Cb)({type:[Y],json:{write:!0}})],te.prototype,"terminals",void 0),(0,i._)([(0,f.Cb)({type:ee.apiValues,json:{type:ee.jsonValues,read:ee.read,write:ee.write}})],te.prototype,"traversabilityModel",void 0),te=(0,i._)([(0,C.j)("esri.networks.support.TerminalConfiguration")],te);const re=te;let ie=class extends U{constructor(e){super(e),this.sharedNamedTraceConfigurations=[],this.type="utility"}get serviceTerritoryFeatureLayerId(){return this.dataElement?.serviceTerritoryFeatureLayerId}get systemLayers(){return{rulesTableId:this.sourceJSON?.systemLayers.rulesTableId,rulesTableUrl:this.sourceJSON?`${this.featureServiceUrl}/${this.rulesTableId}`:null,subnetworksTableId:this.sourceJSON?.systemLayers.subnetworksTableId,subnetworksTableUrl:this.sourceJSON?`${this.featureServiceUrl}/${this.subnetworksTableId}`:null}}get rulesTableId(){return this.sourceJSON?.systemLayers.rulesTableId}get rulesTableUrl(){return this.sourceJSON?`${this.featureServiceUrl}/${this.rulesTableId}`:null}get subnetworksTableId(){return this.sourceJSON?.systemLayers.subnetworksTableId}get subnetworksTableUrl(){return this.sourceJSON?`${this.featureServiceUrl}/${this.subnetworksTableId}`:null}get terminalConfigurations(){return this.dataElement?.terminalConfigurations.map((e=>re.fromJSON(e)))||[]}get domainNetworkNames(){return this.dataElement?.domainNetworks.map((e=>e.domainNetworkName))||[]}get _utilityLayerList(){const e=new Set;return this.dataElement.domainNetworks.map((t=>{t.edgeSources.map((t=>{e.add(t.layerId)})),t.junctionSources.map((t=>{e.add(t.layerId)}))})),e}async load(e){return this.addResolvingPromise(super.load(e)),this.addResolvingPromise(this._loadNamedTraceConfigurationsFromNetwork(e)),this}getTerminalConfiguration(e){let t=null,r=null;const i=e.layer;let o=null;if("feature"!==i?.type)return null;if(o=i.layerId,null===o)return null;const n=e.attributes;if(null==n)return null;for(const l of Object.keys(n))"ASSETGROUP"===l.toUpperCase()&&(t=e.getAttribute(l)),"ASSETTYPE"===l.toUpperCase()&&(r=e.getAttribute(l));if(!this.dataElement)return null;let s=null;const a=this.dataElement.domainNetworks;for(const l of a){const e=l.junctionSources?.find((e=>e.layerId===o));if(e){const i=e.assetGroups?.find((e=>e.assetGroupCode===t));if(i){const e=i.assetTypes?.find((e=>e.assetTypeCode===r));if(e){s=e.terminalConfigurationId;break}}}}if(null!=s){const e=this.dataElement.terminalConfigurations?.find((e=>e.terminalConfigurationId===s));return e?re.fromJSON(e):null}return null}getTierNames(e){const t=this.dataElement?.domainNetworks.find((t=>t.domainNetworkName===e));return t?.tiers.map((e=>e.name))||[]}async getRulesTable(){return this._createRulesTable()}isUtilityLayer(e){return this._utilityLayerList.has(e.layerId)}async _loadNamedTraceConfigurationsFromNetwork(e){if(0===this.sharedNamedTraceConfigurations?.length)return;const t=this.sharedNamedTraceConfigurations.map((e=>e.globalId)),r=await this._fetchTraceConfigData(this.networkServiceUrl,t,e);for(const i of this.sharedNamedTraceConfigurations){const e=r?.find((e=>e.globalId===i.globalId));e&&i.read(e,{origin:"service"})}}async _createRulesTable(){const e=new E.default({url:this.rulesTableUrl});await e.load();const t=this.dataElement?.domainNetworks;if(!t)return null;const r=t.flatMap((e=>[...e.edgeSources,...e.junctionSources])),i=(await this._queryRulesTable(e)).map((t=>this._hydrateRuleInfo(e,r,t)));return new B({layer:e,rules:i})}async _queryRulesTable(e){const t=new L.Z({where:"1=1",outFields:["*"]});return(await async function(e,t,r){t=t.clone(),e.capabilities.query.supportsMaxRecordCountFactor&&(t.maxRecordCountFactor=k(e));const i=F(e),o=e.capabilities.query.supportsPagination;t.start=0,t.num=i;let n=null;for(;;){const s=await e.source.queryFeaturesJSON(t,r);if((0,y.Wi)(n)?n=s:n.features=n.features.concat(s.features),n.exceededTransferLimit=s.exceededTransferLimit,!o||!s.exceededTransferLimit)break;t.start+=i}return n}(e,t)).features}_hydrateRuleInfo(e,t,r){const i=e.fieldsIndex.get("RULETYPE"),o=e.fieldsIndex.get("CREATIONDATE"),n=e.fieldsIndex.get("FROMNETWORKSOURCEID"),s=e.fieldsIndex.get("FROMASSETGROUP"),a=e.fieldsIndex.get("FROMASSETTYPE"),l=e.fieldsIndex.get("FROMTERMINALID"),p=e.fieldsIndex.get("TONETWORKSOURCEID"),u=e.fieldsIndex.get("TOASSETGROUP"),d=e.fieldsIndex.get("TOASSETTYPE"),c=e.fieldsIndex.get("TOTERMINALID"),y=e.fieldsIndex.get("VIANETWORKSOURCEID"),h=e.fieldsIndex.get("VIAASSETGROUP"),m=e.fieldsIndex.get("VIAASSETTYPE"),b=e.fieldsIndex.get("VIATERMINALID"),w=r.attributes[i.name],g=new Date(r.attributes[o.name]),f=[{networkSourceId:r.attributes[n.name],assetGroupId:r.attributes[s.name],assetTypeId:r.attributes[a.name],terminalId:r.attributes[l.name]},{networkSourceId:r.attributes[p.name],assetGroupId:r.attributes[u.name],assetTypeId:r.attributes[d.name],terminalId:r.attributes[c.name]},{networkSourceId:r.attributes[y.name],assetGroupId:r.attributes[h.name],assetTypeId:r.attributes[m.name],terminalId:r.attributes[b.name]}];let v;!function(e){e[e.from=0]="from",e[e.to=1]="to",e[e.via=2]="via"}(v||(v={}));const _={ruleType:w,creationDate:g};for(const C of[v.from,v.to,v.via]){if(w!==V.RTEdgeJunctionEdgeConnectivity&&C===v.via)continue;const e=f[C],r=t.find((t=>t.sourceId===e.networkSourceId)),i=r?.assetGroups.find((t=>t.assetGroupCode===e.assetGroupId)),o=i?.assetTypes.find((t=>t.assetTypeCode===e.assetTypeId));let n=this._getTerminal(w,o,e);w!==V.RTContainment&&w!==V.RTAttachment||(n=null);let s="";switch(C){case v.from:s="from";break;case v.to:s="to";break;case v.via:s="via"}_[`${s}NetworkSource`]=r,_[`${s}AssetGroup`]=i,_[`${s}AssetType`]=o,_[`${s}Terminal`]=n}return _}_getTerminal(e,t,r){if(e===V.RTAttachment||e===V.RTContainment)return null;const i=t?.terminalConfigurationId,o=this.terminalConfigurations?.find((e=>e.id===i));return o?.terminals?.find((e=>e.id===r.terminalId))}_fetchTraceConfigData(e,t,r){return(0,A.default)(`${e}/traceConfigurations/query`,{responseType:"json",query:{globalIds:JSON.stringify(t),f:"json"},...r}).then((e=>e.data.traceConfigurations))}};(0,i._)([(0,f.Cb)({type:[X],json:{origins:{"web-map":{read:{source:"traceConfigurations"},write:{target:"traceConfigurations"}},service:{read:{source:"traceConfigurations"}}},read:!1}})],ie.prototype,"sharedNamedTraceConfigurations",void 0),(0,i._)([(0,f.Cb)({type:["utility"],readOnly:!0,json:{read:!1,write:!1}})],ie.prototype,"type",void 0),(0,i._)([(0,f.Cb)({readOnly:!0})],ie.prototype,"serviceTerritoryFeatureLayerId",null),(0,i._)([(0,f.Cb)({readOnly:!0})],ie.prototype,"systemLayers",null),(0,i._)([(0,f.Cb)({readOnly:!0})],ie.prototype,"rulesTableId",null),(0,i._)([(0,f.Cb)({readOnly:!0})],ie.prototype,"rulesTableUrl",null),(0,i._)([(0,f.Cb)({readOnly:!0})],ie.prototype,"subnetworksTableId",null),(0,i._)([(0,f.Cb)({readOnly:!0})],ie.prototype,"subnetworksTableUrl",null),(0,i._)([(0,f.Cb)({readOnly:!0})],ie.prototype,"terminalConfigurations",null),(0,i._)([(0,f.Cb)({readOnly:!0})],ie.prototype,"domainNetworkNames",null),ie=(0,i._)([(0,C.j)("esri.networks.UtilityNetwork")],ie);const oe=ie;var ne=r(70032),se=r(98995),ae=r(73117),le=r(18924),pe=r(81943),ue=r(23037);let de=class extends Z.wq{constructor(e){super(e),this.facilityIdField=null,this.layerId=null,this.nameField=null,this.siteIdField=null,this.sublayerId=null}};(0,i._)([(0,f.Cb)({type:String,json:{write:!0}})],de.prototype,"facilityIdField",void 0),(0,i._)([(0,f.Cb)({type:String,json:{write:!0}})],de.prototype,"layerId",void 0),(0,i._)([(0,f.Cb)({type:String,json:{write:!0}})],de.prototype,"nameField",void 0),(0,i._)([(0,f.Cb)({type:String,json:{write:!0}})],de.prototype,"siteIdField",void 0),(0,i._)([(0,f.Cb)({type:Number,json:{read:{source:"subLayerId"},write:{target:"subLayerId"},origins:{"web-scene":{read:!1,write:!1}}}})],de.prototype,"sublayerId",void 0),de=(0,i._)([(0,C.j)("esri.layers.support.FacilityLayerInfo")],de);const ce=de;let ye=class extends Z.wq{constructor(e){super(e),this.facilityIdField=null,this.layerId=null,this.levelIdField=null,this.levelNumberField=null,this.longNameField=null,this.shortNameField=null,this.sublayerId=null,this.verticalOrderField=null}};(0,i._)([(0,f.Cb)({type:String,json:{write:!0}})],ye.prototype,"facilityIdField",void 0),(0,i._)([(0,f.Cb)({type:String,json:{write:!0}})],ye.prototype,"layerId",void 0),(0,i._)([(0,f.Cb)({type:String,json:{write:!0}})],ye.prototype,"levelIdField",void 0),(0,i._)([(0,f.Cb)({type:String,json:{write:!0}})],ye.prototype,"levelNumberField",void 0),(0,i._)([(0,f.Cb)({type:String,json:{write:!0}})],ye.prototype,"longNameField",void 0),(0,i._)([(0,f.Cb)({type:String,json:{write:!0}})],ye.prototype,"shortNameField",void 0),(0,i._)([(0,f.Cb)({type:Number,json:{read:{source:"subLayerId"},write:{target:"subLayerId"},origins:{"web-scene":{read:!1,write:!1}}}})],ye.prototype,"sublayerId",void 0),(0,i._)([(0,f.Cb)({type:String,json:{write:!0}})],ye.prototype,"verticalOrderField",void 0),ye=(0,i._)([(0,C.j)("esri.layers.support.LevelLayerInfo")],ye);const he=ye;let me=class extends Z.wq{constructor(e){super(e),this.layerId=null,this.nameField=null,this.siteIdField=null,this.sublayerId=null}};(0,i._)([(0,f.Cb)({type:String,json:{write:!0}})],me.prototype,"layerId",void 0),(0,i._)([(0,f.Cb)({type:String,json:{write:!0}})],me.prototype,"nameField",void 0),(0,i._)([(0,f.Cb)({type:String,json:{write:!0}})],me.prototype,"siteIdField",void 0),(0,i._)([(0,f.Cb)({type:Number,json:{read:{source:"subLayerId"},write:{target:"subLayerId"},origins:{"web-scene":{read:!1,write:!1}}}})],me.prototype,"sublayerId",void 0),me=(0,i._)([(0,C.j)("esri.layers.support.SiteLayerInfo")],me);const be=me;let we=class extends Z.wq{constructor(e){super(e),this.levelLayer=null,this.facilityLayer=null,this.siteLayer=null}};(0,i._)([(0,f.Cb)({type:he,json:{write:!0}})],we.prototype,"levelLayer",void 0),(0,i._)([(0,f.Cb)({type:ce,json:{write:!0}})],we.prototype,"facilityLayer",void 0),(0,i._)([(0,f.Cb)({type:be,json:{write:!0}})],we.prototype,"siteLayer",void 0),we=(0,i._)([(0,C.j)("esri.support.MapFloorInfo")],we);const ge=we;var fe=r(11582),ve=r(27135);let _e=class extends((0,fe.J)(Z.wq)){constructor(e){super(e),this.expression=null,this.returnType="string",this.title=null}};(0,i._)([(0,f.Cb)({type:String,json:{write:{isRequired:!0}}})],_e.prototype,"expression",void 0),(0,i._)([(0,f.Cb)({type:["number","string"],json:{write:!0}})],_e.prototype,"returnType",void 0),(0,i._)([(0,f.Cb)({type:String,json:{write:!0}})],_e.prototype,"title",void 0),_e=(0,i._)([(0,C.j)("esri.webdoc.geotriggersInfo.ExpressionInfo")],_e);const Ce=_e,Se=new G.X({deviceLocation:"device-location"});let Ie=class extends((0,fe.J)(Z.wq)){constructor(e){super(e),this.filterExpression=null,this.type="device-location"}};(0,i._)([(0,f.Cb)({type:Ce,json:{write:!0}})],Ie.prototype,"filterExpression",void 0),(0,i._)([(0,f.Cb)({type:Se.apiValues,readOnly:!0,json:{type:Se.jsonValues,read:Se.read,write:Se.write}})],Ie.prototype,"type",void 0),Ie=(0,i._)([(0,C.j)("esri.webdoc.geotriggersInfo.DeviceLocationFeed")],Ie);const je=Ie;var Te=r(59486),Ne=r(77981);let xe=class extends((0,fe.J)(Z.wq)){constructor(e){super(e),this.geometry=null,this.where=null}};(0,i._)([(0,f.Cb)({types:Te.qM,json:{read:Ne.im,write:!0}})],xe.prototype,"geometry",void 0),(0,i._)([(0,f.Cb)({type:String,json:{write:!0}})],xe.prototype,"where",void 0),xe=(0,i._)([(0,C.j)("esri.webdoc.geotriggersInfo.FeatureFilter")],xe);const Re=xe;let Oe=class extends((0,fe.J)(Z.wq)){constructor(e){super(e),this.layerId=null,this.layerUrl=null,this.type="feature-layer"}};(0,i._)([(0,f.Cb)({type:String,json:{write:{overridePolicy(){return{isRequired:null===this.layerUrl}}}}})],Oe.prototype,"layerId",void 0),(0,i._)([(0,f.Cb)({type:String,json:{write:{overridePolicy(){return{isRequired:null===this.layerId}}}}})],Oe.prototype,"layerUrl",void 0),(0,i._)([(0,ve.J)({featureLayer:"feature-layer"},{readOnly:!0})],Oe.prototype,"type",void 0),Oe=(0,i._)([(0,C.j)("esri.webdoc.geotriggersInfo.FeatureLayerSource")],Oe);const Ae=Oe;let Ee=class extends((0,fe.J)(Z.wq)){constructor(e){super(e),this.fenceSource=null,this.filter=null,this.bufferDistance=null,this.type="features"}};(0,i._)([(0,f.Cb)({type:Ae,json:{write:{isRequired:!0}}})],Ee.prototype,"fenceSource",void 0),(0,i._)([(0,f.Cb)({type:Re,json:{write:!0}})],Ee.prototype,"filter",void 0),(0,i._)([(0,f.Cb)({type:Number,json:{write:!0}})],Ee.prototype,"bufferDistance",void 0),(0,i._)([(0,ve.J)({features:"features"},{readOnly:!0})],Ee.prototype,"type",void 0),Ee=(0,i._)([(0,C.j)("esri.webdoc.geotriggersInfo.FeatureFenceParameters")],Ee);const Le=Ee;r(75366);let Fe=class extends((0,fe.J)(Z.wq)){constructor(e){super(e),this.type="fence"}};(0,i._)([(0,ve.J)({fence:"fence"},{readOnly:!0})],Fe.prototype,"type",void 0),Fe=(0,i._)([(0,C.j)("esri.webdoc.geotriggersInfo.Geotrigger")],Fe);const ke=Fe;let Pe=class extends((0,fe.J)(Z.wq)){constructor(e){super(e),this.expressionInfo=null,this.requestedActions=null}};(0,i._)([(0,f.Cb)({type:Ce,json:{write:!0}})],Pe.prototype,"expressionInfo",void 0),(0,i._)([(0,f.Cb)({type:[String],json:{write:!0}})],Pe.prototype,"requestedActions",void 0),Pe=(0,i._)([(0,C.j)("esri.webdoc.geotriggersInfo.GeotriggerNotificationOptions")],Pe);const qe=Pe,Je=new G.X({enterContainsAndExitDoesNotContain:"enter-contains-and-exit-does-not-contain",enterContainsAndExitDoesNotIntersect:"enter-contains-and-exit-does-not-intersect",enterIntersectsAndExitDoesNotIntersect:"enter-intersects-and-exit-does-not-intersect"}),Ue=new G.X({useGeometry:"use-geometry",useGeometryWithAccuracy:"use-geometry-with-accuracy"}),Ve=new G.X({enter:"enter",enterOrExit:"enter-or-exit",exit:"exit"});let Ze=class extends ke{constructor(e){super(e),this.enterExitRule="enter-contains-and-exit-does-not-intersect",this.feed=null,this.feedAccuracyMode="use-geometry",this.fenceNotificationRule=null,this.fenceParameters=null,this.name=null,this.notificationOptions=null,this.type="fence"}};(0,i._)([(0,ve.J)(Je)],Ze.prototype,"enterExitRule",void 0),(0,i._)([(0,f.Cb)({type:je,json:{write:{isRequired:!0}}})],Ze.prototype,"feed",void 0),(0,i._)([(0,ve.J)(Ue)],Ze.prototype,"feedAccuracyMode",void 0),(0,i._)([(0,f.Cb)({type:Ve.apiValues,json:{type:Ve.jsonValues,read:Ve.read,write:{writer:Ve.write,isRequired:!0}}})],Ze.prototype,"fenceNotificationRule",void 0),(0,i._)([(0,f.Cb)({type:Le,json:{write:{isRequired:!0}}})],Ze.prototype,"fenceParameters",void 0),(0,i._)([(0,f.Cb)({type:String,json:{write:!0}})],Ze.prototype,"name",void 0),(0,i._)([(0,f.Cb)({type:qe,json:{write:!0}})],Ze.prototype,"notificationOptions",void 0),(0,i._)([(0,ve.J)({fence:"fence"},{readOnly:!0})],Ze.prototype,"type",void 0),Ze=(0,i._)([(0,C.j)("esri.webdoc.geotriggersInfo.FenceGeotrigger")],Ze);const Ge={base:ke,key:"type",typeMap:{fence:Ze}};let Me=class extends((0,fe.J)(Z.wq)){constructor(e){super(e),this.geotriggers=null}};(0,i._)([(0,f.Cb)({types:[Ge],json:{write:{isRequired:!0}}})],Me.prototype,"geotriggers",void 0),Me=(0,i._)([(0,C.j)("esri.webdoc.GeotriggersInfo")],Me);const De=Me;var Be,$e=r(84652);let We=Be=class extends Z.wq{constructor(e){super(e),this.activeRange=null,this.currentRangeExtent=null,this.fullRangeExtent=null}clone(){return new Be((0,$e.d9)({activeRange:this.activeRange,currentRangeExtent:this.currentRangeExtent,fullRangeExtent:this.fullRangeExtent}))}};(0,i._)([(0,f.Cb)({type:String,nonNullable:!0,json:{read:{source:"activeRangeName"},write:{target:"activeRangeName",isRequired:!0}}})],We.prototype,"activeRange",void 0),(0,i._)([(0,f.Cb)({type:[Number],json:{write:!0}})],We.prototype,"currentRangeExtent",void 0),(0,i._)([(0,f.Cb)({type:[Number],json:{write:!0}})],We.prototype,"fullRangeExtent",void 0),We=Be=(0,i._)([(0,C.j)("esri.webdoc.RangeInfo")],We);const ze=We;var Ke;let He=Ke=class extends Z.wq{constructor(e){super(e),this.enabled=!1,this.longNames=!1,this.minimized=!1,this.pinnedLevels=!1,this.site=null,this.facility=null,this.level=null}clone(){return new Ke((0,$e.d9)({enabled:this.enabled,longNames:this.longNames,minimized:this.minimized,pinnedLevels:this.pinnedLevels,site:this.site,facility:this.facility,level:this.level}))}};(0,i._)([(0,f.Cb)({type:Boolean,json:{read:{source:"enabled"},write:{target:"enabled"}}})],He.prototype,"enabled",void 0),(0,i._)([(0,f.Cb)({type:Boolean,json:{read:{source:"longNames"},write:{target:"longNames"}}})],He.prototype,"longNames",void 0),(0,i._)([(0,f.Cb)({type:Boolean,json:{read:{source:"minimized"},write:{target:"minimized"}}})],He.prototype,"minimized",void 0),(0,i._)([(0,f.Cb)({type:Boolean,json:{read:{source:"pinnedLevels"},write:{target:"pinnedLevels"}}})],He.prototype,"pinnedLevels",void 0),(0,i._)([(0,f.Cb)({type:String,json:{read:{source:"site"},write:{target:"site"}}})],He.prototype,"site",void 0),(0,i._)([(0,f.Cb)({type:String,json:{read:{source:"facility"},write:{target:"facility"}}})],He.prototype,"facility",void 0),(0,i._)([(0,f.Cb)({type:String,json:{read:{source:"level"},write:{target:"level"}}})],He.prototype,"level",void 0),He=Ke=(0,i._)([(0,C.j)("esri.webdoc.widgets.FloorFilter")],He);const Xe=He;var Qe;const Ye=new G.X({slider:"slider",picker:"picker"});let et=Qe=class extends Z.wq{constructor(e){super(e),this.interactionMode=null,this.numStops=null,this.stopInterval=null}clone(){return new Qe({interactionMode:this.interactionMode,numStops:this.numStops,stopInterval:this.stopInterval})}};(0,i._)([(0,f.Cb)({type:Ye.apiValues,nonNullable:!0,json:{type:Ye.jsonValues,default:null,read:{reader:Ye.read},write:{isRequired:!0,writer:Ye.write}}})],et.prototype,"interactionMode",void 0),(0,i._)([(0,f.Cb)({type:Number,json:{read:{source:"numberOfStops"},write:{target:"numberOfStops",overridePolicy(){const e=null!=this.stopInterval;return{enabled:!e,isRequired:!e}}}}})],et.prototype,"numStops",void 0),(0,i._)([(0,f.Cb)({type:Number,json:{write:{overridePolicy(){return{isRequired:null==this.numStops}}}}})],et.prototype,"stopInterval",void 0),et=Qe=(0,i._)([(0,C.j)("esri.webdoc.widgets.Range")],et);const tt=et;var rt,it=r(62044),ot=r(12355),nt=r(18202);let st=rt=class extends Z.wq{constructor(e){super(e),this.currentTimeExtent=null,this.fullTimeExtent=null,this.loop=!1,this.numStops=null,this.numThumbs=null,this.stopDelay=null,this.stopInterval=null,this.stops=null}readCurrentTimeExtent(e){if(!e)return;const t=null!=e[0]?new Date(e[0]):null,r=null!=e[1]?new Date(e[1]):null;return new it.Z({start:t,end:r})}writeCurrentTimeExtent(e,t,r){e&&(0,nt.RB)(r,[(0,y.pC)(e.start)?e.start.getTime():null,(0,y.pC)(e.end)?e.end.getTime():null],t)}readFullTimeExtent(e,t){const r=t.properties;if(!r)return;const i=null!=r.endTime?new Date(r.endTime):null,o=null!=r.startTime?new Date(r.startTime):null;return new it.Z({start:o,end:i})}writeFullTimeExtent(e,t){if(!e)return;const r=t.properties=t.properties||{},i=e.end,o=e.start;i&&(r.endTime=(0,y.pC)(i)?i.getTime():null),o&&(r.startTime=(0,y.pC)(o)?o.getTime():null)}readStopInterval(e,t,r){return e?ot.Z.fromJSON({value:e.interval,unit:e.units},r):null}writeStopInterval(e,t,r,i){if(!e)return;const o=e.toJSON(i);(0,nt.RB)(r,{interval:o.value,units:o.unit},t)}readStops(e){return e&&e.length?e.map((e=>new Date(e))):null}writeStops(e,t,r){e&&e.length&&(0,nt.RB)(r,e.map((e=>e.getTime())),t)}clone(){return new rt((0,$e.d9)({currentTimeExtent:this.currentTimeExtent,fullTimeExtent:this.fullTimeExtent,loop:this.loop,numStops:this.numStops,numThumbs:this.numThumbs,stopDelay:this.stopDelay,stopInterval:this.stopInterval,stops:this.stops}))}};(0,i._)([(0,f.Cb)({type:it.Z,json:{read:{source:"properties.currentTimeExtent"},write:{target:"properties.currentTimeExtent"}}})],st.prototype,"currentTimeExtent",void 0),(0,i._)([(0,_.r)("currentTimeExtent")],st.prototype,"readCurrentTimeExtent",null),(0,i._)([(0,S.c)("currentTimeExtent")],st.prototype,"writeCurrentTimeExtent",null),(0,i._)([(0,f.Cb)({type:it.Z,json:{read:{source:["properties.endTime","properties.startTime"]},write:{target:{"properties.endTime":{type:Number},"properties.startTime":{type:Number}}}}})],st.prototype,"fullTimeExtent",void 0),(0,i._)([(0,_.r)("fullTimeExtent")],st.prototype,"readFullTimeExtent",null),(0,i._)([(0,S.c)("fullTimeExtent")],st.prototype,"writeFullTimeExtent",null),(0,i._)([(0,f.Cb)({type:Boolean,nonNullable:!0,json:{default:!1,read:{source:"properties.loop"},write:{target:"properties.loop"}}})],st.prototype,"loop",void 0),(0,i._)([(0,f.Cb)({type:Number,json:{read:{source:"properties.numberOfStops"},write:{target:"properties.numberOfStops",overridePolicy(){const e=!!this.stopInterval,t=!!this.stops?.length,r=!(e||t);return{enabled:r,isRequired:r}}}}})],st.prototype,"numStops",void 0),(0,i._)([(0,f.Cb)({type:[1,2],nonNullable:!0,json:{read:{source:"properties.thumbCount"},write:{target:"properties.thumbCount",isRequired:!0}}})],st.prototype,"numThumbs",void 0),(0,i._)([(0,f.Cb)({type:Number,nonNullable:!0,json:{read:{source:"properties.thumbMovingRate"},write:{target:"properties.thumbMovingRate",isRequired:!0}}})],st.prototype,"stopDelay",void 0),(0,i._)([(0,f.Cb)({type:ot.Z,json:{read:{source:"properties.timeStopInterval"},write:{target:"properties.timeStopInterval",overridePolicy(){const e=null!=this.numStops,t=!!this.stops?.length;return{enabled:!t,isRequired:!(e||t)}}}}})],st.prototype,"stopInterval",void 0),(0,i._)([(0,_.r)("stopInterval")],st.prototype,"readStopInterval",null),(0,i._)([(0,S.c)("stopInterval")],st.prototype,"writeStopInterval",null),(0,i._)([(0,f.Cb)({type:[Date],json:{read:{source:"properties.stops"},write:{target:"properties.stops",overridePolicy(){return{isRequired:null==this.numStops&&!this.stopInterval}}}}})],st.prototype,"stops",void 0),(0,i._)([(0,_.r)("stops")],st.prototype,"readStops",null),(0,i._)([(0,S.c)("stops")],st.prototype,"writeStops",null),st=rt=(0,i._)([(0,C.j)("esri.webdoc.widgets.TimeSlider")],st);const at=st;var lt;let pt=lt=class extends Z.wq{constructor(e){super(e),this.range=null,this.timeSlider=null,this.floorFilter=null}clone(){return new lt((0,$e.d9)({range:this.range,timeSlider:this.timeSlider,floorFilter:this.floorFilter}))}};(0,i._)([(0,f.Cb)({type:tt,json:{write:!0}})],pt.prototype,"range",void 0),(0,i._)([(0,f.Cb)({type:at,json:{write:!0}})],pt.prototype,"timeSlider",void 0),(0,i._)([(0,f.Cb)({type:Xe,json:{write:!0}})],pt.prototype,"floorFilter",void 0),pt=lt=(0,i._)([(0,C.j)("esri.webdoc.Widgets")],pt);const ut=pt,dt={width:600,height:400},ct=1.5;var yt=r(41190);function ht(e){return{enabled:!!e?.length}}var mt,bt=r(85249);let wt=mt=class extends Z.wq{constructor(e){super(e),this.exactMatch=!1,this.name=null,this.type=null}clone(){return new mt({exactMatch:this.exactMatch,type:this.type,name:this.name})}};(0,i._)([(0,f.Cb)({type:Boolean,json:{write:!0}})],wt.prototype,"exactMatch",void 0),(0,i._)([(0,f.Cb)({type:String,json:{write:!0}})],wt.prototype,"name",void 0),(0,i._)([(0,ve.J)(bt.v)],wt.prototype,"type",void 0),wt=mt=(0,i._)([(0,C.j)("esri.webdoc.applicationProperties.SearchLayerField")],wt);const gt=wt;var ft;let vt=ft=class extends Z.wq{constructor(e){super(e),this.field=null,this.id=null,this.subLayer=null}clone(){return new ft((0,$e.d9)({field:this.field,id:this.id,subLayer:this.subLayer}))}};(0,i._)([(0,f.Cb)({type:gt,json:{write:{isRequired:!0}}})],vt.prototype,"field",void 0),(0,i._)([(0,f.Cb)({type:String,json:{write:{isRequired:!0}}})],vt.prototype,"id",void 0),(0,i._)([(0,f.Cb)({type:v.z8,json:{write:!0}})],vt.prototype,"subLayer",void 0),vt=ft=(0,i._)([(0,C.j)("esri.webdoc.applicationProperties.SearchLayer")],vt);const _t=vt;var Ct;let St=Ct=class extends Z.wq{constructor(e){super(e),this.exactMatch=!1,this.name=null,this.type=null}clone(){return new Ct({exactMatch:this.exactMatch,type:this.type,name:this.name})}};(0,i._)([(0,f.Cb)({type:Boolean,json:{write:!0}})],St.prototype,"exactMatch",void 0),(0,i._)([(0,f.Cb)({type:String,json:{write:!0}})],St.prototype,"name",void 0),(0,i._)([(0,ve.J)(bt.v)],St.prototype,"type",void 0),St=Ct=(0,i._)([(0,C.j)("esri.webdoc.applicationProperties.SearchTableField")],St);const It=St;var jt;let Tt=jt=class extends Z.wq{constructor(e){super(e),this.field=null,this.id=null}clone(){return new jt((0,$e.d9)({field:this.field,id:this.id}))}};(0,i._)([(0,f.Cb)({type:It,json:{write:{isRequired:!0}}})],Tt.prototype,"field",void 0),(0,i._)([(0,f.Cb)({type:String,json:{write:{isRequired:!0}}})],Tt.prototype,"id",void 0),Tt=jt=(0,i._)([(0,C.j)("esri.webdoc.applicationProperties.SearchTable")],Tt);const Nt=Tt;var xt;const Rt=l.Z.ofType(_t),Ot=l.Z.ofType(Nt);let At=xt=class extends Z.wq{constructor(e){super(e),this.addressSearchEnabled=!0,this.enabled=!0,this.hintText=null,this.layers=new Rt,this.tables=new Ot}readAddressSearchEnabled(e){return!e}writeAddressSearchEnabled(e,t,r){t[r]=!e}clone(){return new xt((0,$e.d9)({addressSearchEnabled:this.addressSearchEnabled,enabled:this.enabled,hintText:this.hintText,layers:this.layers,tables:this.tables}))}};(0,i._)([(0,f.Cb)({type:Boolean,nonNullable:!0,json:{read:{source:"disablePlaceFinder"},write:{target:"disablePlaceFinder",isRequired:!0},origins:{"web-scene":{read:!1,write:!1}}}})],At.prototype,"addressSearchEnabled",void 0),(0,i._)([(0,_.r)("addressSearchEnabled")],At.prototype,"readAddressSearchEnabled",null),(0,i._)([(0,S.c)("addressSearchEnabled")],At.prototype,"writeAddressSearchEnabled",null),(0,i._)([(0,f.Cb)({type:Boolean,nonNullable:!0,json:{write:!0,origins:{"web-map":{write:{isRequired:!0}},"web-scene":{default:!0,write:!0}}}})],At.prototype,"enabled",void 0),(0,i._)([(0,f.Cb)({type:String,json:{write:!0}})],At.prototype,"hintText",void 0),(0,i._)([(0,f.Cb)({type:Rt,json:{write:{overridePolicy:ht},origins:{"web-scene":{write:{isRequired:!0}}}}})],At.prototype,"layers",void 0),(0,i._)([(0,f.Cb)({type:Ot,json:{read:!0,write:{overridePolicy:ht}}})],At.prototype,"tables",void 0),At=xt=(0,i._)([(0,C.j)("esri.webdoc.applicationProperties.Search")],At);const Et=At;var Lt;let Ft=Lt=class extends Z.wq{constructor(e){super(e),this.search=null}clone(){return new Lt((0,$e.d9)({search:this.search}))}};(0,i._)([(0,f.Cb)({type:Et,json:{write:!0}})],Ft.prototype,"search",void 0),Ft=Lt=(0,i._)([(0,C.j)("esri.webdoc.applicationProperties.Viewing")],Ft);const kt=Ft;var Pt;let qt=Pt=class extends Z.wq{constructor(e){super(e),this.editing=null,this.offline=null,this.viewing=null}clone(){return new Pt((0,$e.d9)({editing:this.editing,offline:this.offline,viewing:this.viewing}))}};(0,i._)([(0,f.Cb)({json:{write:!0}})],qt.prototype,"editing",void 0),(0,i._)([(0,f.Cb)({json:{write:!0}})],qt.prototype,"offline",void 0),(0,i._)([(0,f.Cb)({type:kt,json:{write:!0}})],qt.prototype,"viewing",void 0),qt=Pt=(0,i._)([(0,C.j)("esri.webmap.ApplicationProperties")],qt);const Jt=qt;var Ut,Vt=r(2284),Zt=r(85015),Gt=r(53042);let Mt=Ut=class extends Zt.Z{constructor(e){super(e),this.background=null,this.rangeInfo=null,this.spatialReference=null,this.viewpoint=null}clone(){return new Ut((0,$e.d9)({background:this.background,rangeInfo:this.rangeInfo,spatialReference:this.spatialReference,viewpoint:this.viewpoint}))}};(0,i._)([(0,f.Cb)({type:Gt.Z})],Mt.prototype,"background",void 0),(0,i._)([(0,f.Cb)({type:ze})],Mt.prototype,"rangeInfo",void 0),(0,i._)([(0,f.Cb)({type:T.Z})],Mt.prototype,"spatialReference",void 0),(0,i._)([(0,f.Cb)({type:s.Z})],Mt.prototype,"viewpoint",void 0),Mt=Ut=(0,i._)([(0,C.j)("esri.webmap.InitialViewProperties")],Mt);const Dt=Mt;var Bt=r(49901);class $t extends Bt.G{constructor(e,t){super(e,t,"webmap")}}const Wt=new $t(2,25),zt="Web Map",Kt=l.Z.ofType(Vt.Z),Ht=l.Z.ofType(oe),Xt=c.Z.getLogger("esri.WebMap"),Qt=new Map;Qt.set("image/jpeg","jpeg"),Qt.set("image/jpg","jpg"),Qt.set("image/png","png"),Qt.set("image/gif","gif");const Yt=ae.Kz.JSAPI,er="CollectorDisabled",tr="Collector",rr="Data Editing",ir="OfflineDisabled",or="Offline",nr="Workforce Project",sr="Workforce Worker",ar="Workforce Dispatcher",lr=ae.Kz.DEVELOPER_BASEMAP,pr=["NatGeo_World_Map","Ocean_Basemap","USA_Topo_Maps","World_Imagery","World_Street_Map","World_Terrain_Base","World_Topo_Map","World_Hillshade","Canvas/World_Light_Gray_Base","Canvas/World_Light_Gray_Reference","Canvas/World_Dark_Gray_Base","Canvas/World_Dark_Gray_Reference","Ocean/World_Ocean_Base","Ocean/World_Ocean_Reference","Reference/World_Boundaries_and_Places","Reference/World_Reference_Overlay","Reference/World_Transportation"].map((e=>e.toLowerCase()));let ur=class extends((0,h.R)(u.Z.LoadableMixin((0,m.v)(n.Z)))){constructor(e){super(e),this.applicationProperties=null,this.bookmarks=new Kt,this.floorInfo=null,this.geotriggersInfo=null,this.initialViewProperties=new Dt,this.portalItem=null,this.presentation=null,this.sourceVersion=null,this.widgets=null,this.utilityNetworks=null,this.authoringApp=this.authoringAppVersion=null,this._isAuthoringAppSetByUser=this._isAuthoringAppVersionSetByUser=!1}destroy(){const e=this.portalItem;this.portalItem=null,e?.destroy()}initialize(){if(this.when().catch((e=>{Xt.error("#load()","Failed to load web map",e)})),this.resourceInfo){let t;try{t=this._validateJSON(this.resourceInfo)}catch(e){return void this.addResolvingPromise(Promise.reject(e))}this.read(t)}}set authoringApp(e){this._isAuthoringAppSetByUser=!0,this._set("authoringApp",e)}writeAuthoringApp(e,t){e&&this._isAuthoringAppSetByUser?t.authoringApp=e:t.authoringApp=Yt}set authoringAppVersion(e){this._isAuthoringAppVersionSetByUser=!0,this._set("authoringAppVersion",e)}writeAuthoringAppVersion(e,t){e&&this._isAuthoringAppVersionSetByUser?t.authoringAppVersion=e:t.authoringAppVersion=o.i8}readInitialViewProperties(e,t){const r=new Dt;t.background&&(r.background=Gt.Z.fromJSON(t.background));const i=t.initialState?.viewpoint;return i&&(i.rotation&&$t.parse(t.version||"","webmap").lessThan(2,20)&&"ArcGIS Pro"===t.authoringApp&&(i.rotation*=-1),r.viewpoint=s.Z.fromJSON(i)),t.mapRangeInfo&&(r.rangeInfo=ze.fromJSON(t.mapRangeInfo)),t.spatialReference&&(r.spatialReference=T.Z.fromJSON(t.spatialReference)),r}writeInitialViewProperties(e,t,r,i){if(!e)return;const o=e.background;o&&o.color&&(t.background=o.write({},i)),e.viewpoint&&(t.initialState={viewpoint:e.viewpoint.write({},i)}),e.rangeInfo&&(t.mapRangeInfo=e.rangeInfo.toJSON(i)),e.spatialReference&&(t.spatialReference=e.spatialReference.write({},i))}writeLayers(e,t,r,i){t[r]=this._writeLayers(e,i,"operational-layers")}readSourceVersion(e,t){const[r,i]=t.version.split(".");return new $t(parseInt(r,10),parseInt(i,10))}writeSourceVersion(e,t,r){t[r]=`${Wt.major}.${Wt.minor}`}writeTables(e,t,r,i){const o=this._writeLayers(e,i,"tables");o.length&&(t[r]=o)}get thumbnailUrl(){return this.portalItem&&this.portalItem.thumbnailUrl||null}set thumbnailUrl(e){e?(this._override("thumbnailUrl",e),this._thumbnailFilename=this._generateCustomThumbnailFilename(e)):this._clearThumbnailOverride()}load(e){return this.addResolvingPromise(this._loadFromSource()),Promise.resolve(this)}loadAll(){return(0,d.G)(this,(e=>{e(this.ground,this.basemap,this.layers,this.tables)}))}read(e,t){t={...t,origin:"web-map"};const r=this._getAuthoringPropsState();(0,j.$)(this,e,(t=>super.read(e,t)),t),this._restoreAuthoringPropsFromState(r)}write(e,t){if("loaded"!==this.loadStatus){const e=new p.Z("webmap:not-loaded","Web map must be loaded before it can be serialized");throw Xt.error("#toJSON()","Web map must be loaded before it can be serialized",this.loadError||this.loadStatus),e}return this._removeDanglingLayerRefs(),t={...t,origin:"web-map",restrictedWebMapWriting:!0,webmap:this},super.write(e,t)}async save(e){e=e||{},this._validateItem(),await this._updateFromPromise,await this.load(),await this._loadLayerContainers(),await this._beforeSave(),await this._validateMap();const t=this.portalItem,r={origin:"web-map",messages:[],writtenProperties:[],url:t.itemUrl&&(0,g.mN)(t.itemUrl),portal:t.portal||ne.Z.getDefault()},i=this.write({},r);return this._validateJSONForWriting(r,e),await this._updateItemProperties(t),await this._updateItem(t,i,r),await this._updateItemThumbnail(),t}async saveAs(e,t){t=t||{};const r=this._getPortalItem(e);await this._updateFromPromise,await this.load(),await this._loadLayerContainers(),await this._beforeSave(),await this._validateMap();const i={origin:"web-map",messages:[],writtenProperties:[],url:null,portal:r.portal},o=this.write({},i);this._validateJSONForWriting(i,t),await this._updateItemPropertiesForSaveAs(r);const n=this._getThumbnailState();return await this._createItem(r,o,i,t),this._restoreThumbnailFromState(n),await this._updateItemThumbnail(),r}async updateFrom(e,t){const r=this._updateFromInternal(e,t);this._updateFromPromise=r,await r,r===this._updateFromPromise&&(this._updateFromPromise=null)}getLayerJSONFromResourceInfo(e){const t=this.resourceInfo;return this._collectAllLayersJSON((0,a.xH)([t?.baseMap?.baseMapLayers,t?.operationalLayers,this.basemap?.resourceInfo?.data?.baseMapLayers])).find((t=>t.id===e.id))}_collectAllLayersJSON(e){return e.reduce(((e,t)=>(e.push(t),"GroupLayer"===t.layerType&&(e=e.concat(this._collectAllLayersJSON(t.layers||[]))),e)),[])}_writeLayers(e,t,r){return t={...t,layerContainerType:r},e.map((e=>(0,y.Wg)((0,yt.Nw)(e,"tables"===r?null:this.getLayerJSONFromResourceInfo(e),t)))).filter(Boolean).toArray()}_loadFromSource(){return this.resourceInfo?this._loadFromJSON(this.resourceInfo,{origin:"web-map"}):this.portalItem&&this.portalItem.id?this._loadFromItem(this.portalItem):Promise.resolve(null)}_loadFromItem(e){return e.load().catch((e=>{throw new p.Z("webmap:load-portal-item","Failed to load portal item",{error:e})})).then((()=>{if("Web Map"!==e.type)throw new p.Z("webmap:invalid-portal-item","Invalid portal item type '${type}', expected 'Web Map'",{type:e.type})})).then((()=>e.fetchData())).then((t=>(this.resourceInfo=t,this._readAndLoadFromJSON(t,{origin:"web-map",portal:e.portal||ne.Z.getDefault()})))).then((()=>this._computeInitialViewpoint()))}_readAndLoadFromJSON(e,t){const r=this._validateJSON(e);return this.read(r,t),this._loadFromJSON(r,t)}_validateJSON(e){const t=$t.parse(e.version||"","webmap");return Wt.validate(t),e.version=`${t.major}.${t.minor}`,e}_loadFromJSON(e,t){const i={context:{...t,layerContainerType:"operational-layers"}};return this.portalItem&&(i.context.portal=this.portalItem.portal||ne.Z.getDefault()),r.e(519).then(r.bind(r,20519)).then((t=>{let{populateOperationalLayers:r}=t;const o=[],n=e.operationalLayers;n&&n.length&&o.push(r(this.layers,n,i));const s={...i,context:{...i.context,layerContainerType:"tables"},defaultLayerType:"ArcGISFeatureLayer"},a=e.tables;return a&&a.length&&o.push(r(this.tables,a,s)),(0,b.as)(o).then((()=>{}))}))}async _computeInitialViewpoint(){let e=this.initialViewProperties;const t=e?.viewpoint?.targetGeometry;if(t)return;const r=await this._getExtentFromItem();r&&(e=e?e.clone():new Dt,e.viewpoint=new s.Z,e.viewpoint.targetGeometry=r,this.initialViewProperties=e)}async _getExtentFromItem(){const e=this.initialViewProperties?.spatialReference,t=this.portalItem?.extent;return e&&t?e.isWGS84?t.clone():e.isWebMercator?(0,x.$)(t):(await r.e(7387).then(r.bind(r,67387))).getGeometryServiceURL(this.portalItem).then((r=>{const i=new pe.Z;return i.geometries=[t],i.outSpatialReference=e,(0,le.i)(r,i)})).then((e=>e[0])).catch((e=>(Xt.error("Error projecting item's extent:",e),null))):null}_removeDanglingLayerRefs(){const e=this.applicationProperties,t=e&&e.viewing&&e.viewing.search,r=e=>this.allLayers.some((t=>t.id===e));t&&t.layers&&(t.layers=t.layers.filter((e=>r(e.id)))),t&&t.tables&&(t.tables=t.tables.filter((e=>this.tables.some((t=>t.id===e.id)))));const i=e&&e.editing&&e.editing.locationTracking;i&&i.info&&!r(i.info.layerId)&&(e.editing=null);const o=this.presentation&&this.presentation.slides;o&&o.forEach((e=>{e.visibleLayers&&(e.visibleLayers=e.visibleLayers.filter((e=>r(e.id))))}))}async _validateMap(){if(!this.basemap?.baseLayers.length)throw new p.Z("webmap:save","Map does not have a valid basemap with a base layer.");let e=null;if(await(0,w.N1)((()=>{const t=(0,ue.Us)(this.initialViewProperties,this.basemap);return e=t.spatialReference,!t.updating})),!(0,N.fS)(e,this.initialViewProperties.spatialReference))throw new p.Z("webmap:save","The spatial reference of the basemap is not compatible with the one from the map.",{expected:this.initialViewProperties.spatialReference,actual:e})}_validateItem(){if(!this.portalItem)throw Xt.error("save: requires the portalItem property to be set"),new p.Z("webmap:portal-item-not-set","Portal item to save to has not been set on the WebMap");this._validateItemType(this.portalItem)}_validateItemType(e){if(e.type!==zt)throw new p.Z("webmap:portal-item-wrong-type",`Portal item needs to have type "${zt}"`)}_loadLayerContainers(){const e=[];return this.basemap&&e.push(this.basemap.load()),this.ground&&e.push(this.ground.load()),(0,b.as)(e).then((()=>{}))}async _beforeSave(){const e=[];for(const t of this.allLayers)if("beforeSave"in t&&"function"==typeof t.beforeSave){const r=t.beforeSave();r&&e.push(r)}await(0,b.as)(e)}_loadAllLayers(){const e=this._getAllLayersAndTables().map((e=>e.load()));return(0,b.as)(e).then((()=>{}))}_getAllLayersAndTables(){return this.allLayers.concat(this.allTables)}_validateJSONForWriting(e,t){let r=e.messages.filter((e=>"error"===e.type)).map((e=>new p.Z(e.name,e.message,e.details)));if(t.ignoreUnsupported&&(r=r.filter((e=>"layer:unsupported"!==e.name&&"symbol:unsupported"!==e.name&&"symbol-layer:unsupported"!==e.name&&"property:unsupported"!==e.name&&"url:unsupported"!==e.name))),r.length>0)throw new p.Z("webmap:save","Failed to save webmap due to unsupported or invalid content. See 'details.errors' for more detailed information",{errors:r})}async _updateItemProperties(e){e.extent=await this._getWGS84Extent(this.initialViewProperties.viewpoint.targetGeometry),await this._updateTypeKeywords(e)}async _updateItemPropertiesForSaveAs(e){(0,ae.ck)(e,er),(0,ae.ck)(e,"FieldMapsDisabled"),(0,ae.ck)(e,ae.Kz.METADATA),(0,ae.ck)(e,ir),(0,ae.ck)(e,"Offline Map Areas"),(0,ae.ck)(e,ar),(0,ae.ck)(e,nr),(0,ae.ck)(e,sr),await this._updateItemProperties(e)}async _getWGS84Extent(e){const t=e.clone().normalize();let r;if(t.length>1)for(const i of t)r?i.width>r.width&&(r=i):r=i;else r=t[0];return this._projectToWGS84(r)}async _projectToWGS84(e){const t=e.spatialReference;if(t.isWGS84)return e.clone();if(t.isWebMercator)return(0,x.Sx)(e);const i=await r.e(7387).then(r.bind(r,67387)),o=await i.getGeometryServiceURL(this.portalItem),n=new pe.Z;return n.geometries=[e],n.outSpatialReference=T.Z.WGS84,(await(0,le.i)(o,n))[0]}async _updateTypeKeywords(e){(0,ae.qj)(e,Yt),await this._loadAllLayers(),this._evalCollectorKeyword(e),this._evalDataEditingKeyword(e),this._evalOfflineKeyword(e),this._evalDeveloperBasemapKeyword(e),e.typeKeywords&&(e.typeKeywords=e.typeKeywords.filter(((e,t,r)=>r.indexOf(e)===t)))}_evalCollectorKeyword(e){(0,ae._$)(e,er)||(0,ae._$)(e,nr)||(0,ae._$)(e,sr)||(0,ae._$)(e,ar)||!this._hasEditableFeatureLayer()?(0,ae.ck)(e,tr):(0,ae.qj)(e,tr)}_evalDataEditingKeyword(e){this._hasEditableFeatureLayer()?(0,ae.qj)(e,rr):(0,ae.ck)(e,rr)}_evalOfflineKeyword(e){!(0,ae._$)(e,ir)&&this._isOfflineCapableMap()?(0,ae.qj)(e,or):(0,ae.ck)(e,or)}_evalDeveloperBasemapKeyword(e){(0,ue.zb)(this.basemap)?(0,ae.qj)(e,lr):(0,ae.ck)(e,lr)}_hasEditableFeatureLayer(){return this._getAllLayersAndTables().some((e=>e.loaded&&(0,O.y2)(e)&&e.capabilities.operations.supportsEditing&&e.editingEnabled))}_isOfflineCapableMap(){return this._getAllLayersAndTables().filter((e=>"group"!==e.type)).every((e=>e.loaded&&this._isOfflineCapableLayer(e)))}_isFeatureCollectionLike(e){return(0,O.rQ)(e)||"map-notes"===e.type||"route"===e.type}_isOfflineCapableLayer(e){return(0,O.y2)(e)&&e.capabilities.operations.supportsSync||this._isFeatureCollectionLike(e)&&!e.portalItem||("tile"===e.type||"vector-tile"===e.type)&&(e.capabilities.operations.supportsExportTiles||this._isExportableAGOLTileLayer(e)||(0,ue.aL)(e))&&e.spatialReference.equals(this.initialViewProperties.spatialReference)}_isExportableAGOLTileLayer(e){return"tile"===e.type&&(0,R.h3)(e.url)&&pr.some((t=>e.url.toLowerCase().includes("/"+t+"/")))}async _updateItem(e,t,r){await e.update({data:t}),this._syncUpInstanceWithItem(e,t,r)}async _createItem(e,t,r,i){const o=this.portalItem,n=!!(o&&o.id&&o.portal.user),s=e.portal;if(await s._signIn(),!await this._canCopyItem(o,n,s))throw new p.Z("webmap:save-as-copy-not-allowed","Owner of this map does not allow others to save a copy");await s.user.addItem({item:e,folder:i.folder,data:t}),this.portalItem=e,this._syncUpInstanceWithItem(e,t,r)}async _canCopyItem(e,t,r){return!((0,y.pC)(e)&&e.id&&e.typeKeywords&&e.typeKeywords.includes("useOnly"))||e.portal.portalHostname===r.portalHostname&&(t||await e.reload(),"admin"===e.itemControl||"update"===e.itemControl)}_syncUpInstanceWithItem(e,t,r){h.w.prototype.read.call(this,{version:t.version,authoringApp:t.authoringApp,authoringAppVersion:t.authoringAppVersion},{origin:"web-map",ignoreDefaults:!0,url:e.itemUrl&&(0,g.mN)(e.itemUrl)}),(0,I.D)(r),this.resourceInfo=t}async _updateItemThumbnail(){this.thumbnailUrl&&this._isOverridden("thumbnailUrl")&&(await this.portalItem.updateThumbnail({thumbnail:this.thumbnailUrl,filename:this._thumbnailFilename}),this._clearThumbnailOverride())}_getPortalItem(e){let t=se.default.from(e);return t.id&&(t=t.clone(),t.id=null),t.type||(t.type=zt),t.portal||(t.portal=ne.Z.getDefault()),this._validateItemType(t),t}async _updateFromInternal(e,t){if(t=t||{},await(0,w.N1)((()=>e.ready)),this._updateInitialViewProperties(e,t),e.map===this)for(const r of e.allLayerViews)for(const e of["visible","featureEffect"])e in r&&e in r.layer&&r._isOverridden(e)&&(r.layer[e]=r[e]);await this._updateThumbnailUrl(e,t)}_updateInitialViewProperties(e,t){if(t.backgroundExcluded||(this.initialViewProperties.background=e.background?.clone()),this.initialViewProperties.spatialReference=e.spatialReference.clone(),t.viewpointExcluded||(this.initialViewProperties.viewpoint=new s.Z({rotation:e.rotation,scale:t.scalePreserved?e.scale:null,targetGeometry:this._getViewExtent(e)})),!t.widgetsExcluded)for(const r of e.persistableViewModels)r.updateWebDocument(this)}_getViewExtent(e){const t=e.center.clone().normalize(),r=e.extent.clone(),i=r.width/2;return r.xmin=t.x-i,r.xmax=t.x+i,r}async _updateThumbnailUrl(e,t){if(t.thumbnailExcluded)return;const r=function(e,t){t=t||dt;let{width:r,height:i}=t;const o=r/i;return o<ct?i=r/ct:o>ct&&(r=i*ct),r>e.width&&(i*=e.width/r,r=e.width),i>e.height&&(r*=e.height/i,i=e.height),{width:Math.round(r),height:Math.round(i)}}(e,t.thumbnailSize),i=await e.takeScreenshot({format:"png",width:r.width,height:r.height});this._setAutoGeneratedThumbnail(i.dataUrl)}_setAutoGeneratedThumbnail(e){this.thumbnailUrl=e,this._thumbnailFilename=null}_clearThumbnailOverride(){this._clearOverride("thumbnailUrl"),this.clear("thumbnailUrl","user"),this._thumbnailFilename=null}_generateCustomThumbnailFilename(e){if((0,g.HK)(e)){const t=(0,g.sJ)(e),r=t&&t.mediaType,i=r&&Qt.get(r.toLowerCase())||null,o=`thumbnail${Date.now()}`;return i?`${o}.${i}`:o}return null}_getThumbnailState(){let e=this.thumbnailUrl;return e&&(e=this._isOverridden("thumbnailUrl")?e:(0,g.ZN)(e,"w","8192")),{thumbnailUrl:e,filename:this._thumbnailFilename}}_restoreThumbnailFromState(e){this.thumbnailUrl=e.thumbnailUrl,this._thumbnailFilename=e.filename}_getAuthoringPropsState(){return{authoringApp:this.authoringApp,authoringAppVersion:this.authoringAppVersion,isAuthoringAppSetByUser:this._isAuthoringAppSetByUser,isAuthoringAppVersionSetByUser:this._isAuthoringAppVersionSetByUser}}_restoreAuthoringPropsFromState(e){e.isAuthoringAppSetByUser?this.authoringApp=e.authoringApp:this._isAuthoringAppSetByUser=!1,e.isAuthoringAppVersionSetByUser?this.authoringAppVersion=e.authoringAppVersion:this._isAuthoringAppVersionSetByUser=!1}static fromJSON(e){const t=e;if(!t)throw new p.Z("webmap:empty-resource","Expected a JSON resource but got nothing");return new this({resourceInfo:t})}};ur.VERSION=Wt,(0,i._)([(0,f.Cb)({type:Jt,json:{write:!0}})],ur.prototype,"applicationProperties",void 0),(0,i._)([(0,f.Cb)({type:String,json:{write:{allowNull:!0,ignoreOrigin:!0}}})],ur.prototype,"authoringApp",null),(0,i._)([(0,S.c)("authoringApp")],ur.prototype,"writeAuthoringApp",null),(0,i._)([(0,f.Cb)({type:String,json:{write:{allowNull:!0,ignoreOrigin:!0}}})],ur.prototype,"authoringAppVersion",null),(0,i._)([(0,S.c)("authoringAppVersion")],ur.prototype,"writeAuthoringAppVersion",null),(0,i._)([(0,f.Cb)({json:{read:{source:"baseMap"},write:{target:"baseMap"}}})],ur.prototype,"basemap",void 0),(0,i._)([(0,f.Cb)({type:Kt,json:{write:{overridePolicy:e=>({enabled:!!(e&&e.length>0),ignoreOrigin:!0})}}})],ur.prototype,"bookmarks",void 0),(0,i._)([(0,f.Cb)({type:ge,json:{read:{source:"mapFloorInfo"},write:{target:"mapFloorInfo"}}})],ur.prototype,"floorInfo",void 0),(0,i._)([(0,f.Cb)({type:De,json:{write:!0}})],ur.prototype,"geotriggersInfo",void 0),(0,i._)([(0,f.Cb)({type:Dt,nonNullable:!0,json:{read:{source:["background","initialState.viewpoint","mapRangeInfo","spatialReference"]},write:{ignoreOrigin:!0,target:{background:{type:Gt.Z},"initialState.viewpoint":{type:s.Z},mapRangeInfo:{type:ze},spatialReference:{type:T.Z}}}}})],ur.prototype,"initialViewProperties",void 0),(0,i._)([(0,_.r)("initialViewProperties")],ur.prototype,"readInitialViewProperties",null),(0,i._)([(0,S.c)("initialViewProperties")],ur.prototype,"writeInitialViewProperties",null),(0,i._)([(0,f.Cb)({json:{read:!1,write:{target:"operationalLayers",ignoreOrigin:!0}}})],ur.prototype,"layers",void 0),(0,i._)([(0,S.c)("layers")],ur.prototype,"writeLayers",null),(0,i._)([(0,f.Cb)({type:se.default})],ur.prototype,"portalItem",void 0),(0,i._)([(0,f.Cb)({json:{write:!0}})],ur.prototype,"presentation",void 0),(0,i._)([(0,f.Cb)()],ur.prototype,"resourceInfo",void 0),(0,i._)([(0,f.Cb)({readOnly:!0,type:$t,json:{read:{source:"version"},write:{allowNull:!0,ignoreOrigin:!0,target:"version",isRequired:!0}}})],ur.prototype,"sourceVersion",void 0),(0,i._)([(0,_.r)("sourceVersion")],ur.prototype,"readSourceVersion",null),(0,i._)([(0,S.c)("sourceVersion")],ur.prototype,"writeSourceVersion",null),(0,i._)([(0,f.Cb)({json:{read:!1,write:{ignoreOrigin:!0}}})],ur.prototype,"tables",void 0),(0,i._)([(0,S.c)("tables")],ur.prototype,"writeTables",null),(0,i._)([(0,f.Cb)()],ur.prototype,"thumbnailUrl",null),(0,i._)([(0,f.Cb)({type:ut,json:{write:!0}})],ur.prototype,"widgets",void 0),(0,i._)([(0,f.Cb)({type:Ht,json:{read:!0,write:!0}})],ur.prototype,"utilityNetworks",void 0),ur=(0,i._)([(0,C.j)("esri.WebMap")],ur);const dr=ur},49901:(e,t,r)=>{r.d(t,{G:()=>o});var i=r(10064);class o{constructor(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";this.major=e,this.minor=t,this._context=r}lessThan(e,t){return this.major<e||e===this.major&&this.minor<t}since(e,t){return!this.lessThan(e,t)}validate(e){if(this.major!==e.major){const t=this._context&&this._context+":",r=this._context&&this._context+" ";throw new i.Z(t+"unsupported-version",`Required major ${r}version is '${this.major}', but got '\${version.major}.\${version.minor}'`,{version:e})}}clone(){return new o(this.major,this.minor,this._context)}static parse(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";const[r,n]=e.split("."),s=/^\s*\d+\s*$/;if(!r||!r.match||!r.match(s))throw new i.Z((t&&t+":")+"invalid-version","Expected major version to be a number, but got '${version}'",{version:e});if(!n||!n.match||!n.match(s))throw new i.Z((t&&t+":")+"invalid-version","Expected minor version to be a number, but got '${version}'",{version:e});const a=parseInt(r,10),l=parseInt(n,10);return new o(a,l,t)}}},27135:(e,t,r)=>{r.d(t,{J:()=>n});var i=r(43404),o=r(49861);function n(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r=e instanceof i.X?e:new i.X(e,t),n={type:t?.ignoreUnknown??1?r.apiValues:String,json:{type:r.jsonValues,read:!t?.readOnly&&{reader:r.read},write:{writer:r.write}}};return void 0!==t?.readOnly&&(n.readOnly=!!t.readOnly),void 0!==t?.default&&(n.json.default=t.default),void 0!==t?.name&&(n.json.name=t.name),(0,o.Cb)(n)}},15909:(e,t,r)=>{r.d(t,{D:()=>o});var i=r(80292);function o(e){e&&e.writtenProperties&&e.writtenProperties.forEach((e=>{let{target:t,propName:r,newOrigin:o}=e;(0,i.l)(t)&&o&&t.originOf(r)!==o&&t.updateOrigin(r,o)}))}},80292:(e,t,r)=>{function i(e){return e&&"getAtOrigin"in e&&"originOf"in e}r.d(t,{l:()=>i})},73117:(e,t,r)=>{r.d(t,{$o:()=>p,Kz:()=>u,_$:()=>a,ck:()=>l,qj:()=>s});var i=r(79803),o=r(78952),n=r(81753);function s(e,t){if(!a(e,t)){const r=e.typeKeywords;r?r.push(t):e.typeKeywords=[t]}}function a(e,t){return!!e.typeKeywords?.includes(t)}function l(e,t){const r=e.typeKeywords;if(r){const e=r.indexOf(t);e>-1&&r.splice(e,1)}}async function p(e){const t=e.clone().normalize();let r;if(t.length>1)for(const i of t)r?i.width>r.width&&(r=i):r=i;else r=t[0];return async function(e){const t=e.spatialReference;if(t.isWGS84)return e.clone();if(t.isWebMercator)return(0,n.Sx)(e);const r=o.Z.WGS84;return await(0,i.iQ)(t,r),(0,i.iV)(e,r)}(r)}const u={DEVELOPER_BASEMAP:"DeveloperBasemap",JSAPI:"ArcGIS API for JavaScript",METADATA:"Metadata",MULTI_LAYER:"Multilayer",SINGLE_LAYER:"Singlelayer",TABLE:"Table"}},18924:(e,t,r)=>{r.d(t,{i:()=>p});var i=r(76200),o=r(25243),n=r(77981),s=r(23084);var a=r(81943);const l=(0,o.se)(a.Z);async function p(e,t,r){t=l(t);const o=(0,s.en)(e),a={...o.query,f:"json",...t.toJSON()},p=t.outSpatialReference,u=(0,n.Ji)(t.geometries[0]),d=(0,s.lA)(a,r);return(0,i.default)(o.path+"/project",d).then((e=>{let{data:{geometries:t}}=e;return function(e,t,r){const i=(0,n.q9)(t);return e.map((e=>{const t=i.fromJSON(e);return t.spatialReference=r,t}))}(t,u,p)}))}},81943:(e,t,r)=>{r.d(t,{Z:()=>p});var i=r(27366),o=r(46784),n=r(49861),s=(r(63780),r(93169),r(25243),r(69912)),a=r(77981);let l=class extends o.wq{constructor(e){super(e),this.geometries=null,this.outSpatialReference=null,this.transformation=null,this.transformForward=null}toJSON(){const e=this.geometries.map((e=>e.toJSON())),t=this.geometries[0],r={};return r.outSR=this.outSpatialReference.wkid||JSON.stringify(this.outSpatialReference.toJSON()),r.inSR=t.spatialReference.wkid||JSON.stringify(t.spatialReference.toJSON()),r.geometries=JSON.stringify({geometryType:(0,a.Ji)(t),geometries:e}),this.transformation&&(r.transformation=this.transformation.wkid||JSON.stringify(this.transformation)),null!=this.transformForward&&(r.transformForward=this.transformForward),r}};(0,i._)([(0,n.Cb)()],l.prototype,"geometries",void 0),(0,i._)([(0,n.Cb)({json:{read:{source:"outSR"}}})],l.prototype,"outSpatialReference",void 0),(0,i._)([(0,n.Cb)()],l.prototype,"transformation",void 0),(0,i._)([(0,n.Cb)()],l.prototype,"transformForward",void 0),l=(0,i._)([(0,s.j)("esri.rest.support.ProjectParameters")],l);const p=l},22061:(e,t,r)=>{r.d(t,{Z:()=>y});var i=r(27366),o=r(51995),n=r(43404),s=r(46784),a=r(49861),l=(r(63780),r(93169),r(25243),r(38511)),p=r(69912);const u=new n.X({esriSMS:"simple-marker",esriPMS:"picture-marker",esriSLS:"simple-line",esriSFS:"simple-fill",esriPFS:"picture-fill",esriTS:"text",esriSHD:"shield-label-symbol",PointSymbol3D:"point-3d",LineSymbol3D:"line-3d",PolygonSymbol3D:"polygon-3d",WebStyleSymbol:"web-style",MeshSymbol3D:"mesh-3d",LabelSymbol3D:"label-3d",CIMSymbolReference:"cim"});let d=0,c=class extends s.wq{constructor(e){super(e),this.id="sym"+d++,this.type=null,this.color=new o.Z([0,0,0,1])}readColor(e){return e&&null!=e[0]?[e[0],e[1],e[2],e[3]/255]:e}async collectRequiredFields(e,t){}hash(){return JSON.stringify(this.toJSON())}clone(){}};(0,i._)([(0,a.Cb)({type:u.apiValues,readOnly:!0,json:{read:!1,write:{ignoreOrigin:!0,writer:u.write}}})],c.prototype,"type",void 0),(0,i._)([(0,a.Cb)({type:o.Z,json:{write:{allowNull:!0}}})],c.prototype,"color",void 0),(0,i._)([(0,l.r)("color")],c.prototype,"readColor",null),c=(0,i._)([(0,p.j)("esri.symbols.Symbol")],c);const y=c},26838:(e,t,r)=>{r.d(t,{A:()=>l});var i,o=r(27366),n=r(46784),s=r(49861),a=(r(63780),r(93169),r(25243),r(69912));let l=i=class extends n.wq{constructor(){super(...arguments),this.url=""}destroy(){this.url=""}clone(){return new i({url:this.url})}};(0,o._)([(0,s.Cb)({type:String,json:{write:{isRequired:!0}}})],l.prototype,"url",void 0),l=i=(0,o._)([(0,a.j)("esri.webdoc.support.SlideThumbnail")],l)},2284:(e,t,r)=>{r.d(t,{Z:()=>S});var i,o=r(27366),n=r(62044),s=r(13894),a=r(10064),l=r(79056),p=r(46784),u=r(84652),d=r(32718),c=r(92026),y=r(49861),h=r(89125),m=r(38511),b=r(69912),w=r(31201),g=r(25243),f=r(26838);const v="esri.webmap.Bookmark",_=d.Z.getLogger(v);let C=i=class extends((0,l.IG)(p.wq)){constructor(e){super(e),this.name=null,this.thumbnail=new f.A,this.timeExtent=null}castThumbnail(e){return"string"==typeof e?new f.A({url:e}):(0,g.se)(f.A,e)}set viewpoint(e){const{targetGeometry:t,scale:r}=e;(0,c.pC)(t)&&"point"===t.type&&(0,c.Wi)(r)&&_.warn("Bookmark.viewpoint should include 'scale' when its targetGeometry is a point.",e),this._set("viewpoint",e)}readViewpoint(e,t){const{extent:r,viewpoint:i}=t;return s.Z.fromJSON(i||{targetGeometry:r})}writeViewpoint(e,t,r,i){if(!e)return;const{targetGeometry:o}=e;if((0,c.pC)(o)&&"extent"!==o.type){const e="Bookmark.viewpoint cannot be written to JSON when the viewpoint's targetGeometry is not an extent.";i?.messages?i.messages.push(new a.Z("property:unsupported",e)):_.error(e)}else(0,c.pC)(o)&&(t.extent=o.toJSON()),t[r]=e.toJSON()}clone(){return new i((0,u.d9)({name:this.name,thumbnail:this.thumbnail,timeExtent:this.timeExtent,viewpoint:this.viewpoint}))}};(0,o._)([(0,y.Cb)({type:String,nonNullable:!0,json:{write:{isRequired:!0}}})],C.prototype,"name",void 0),(0,o._)([(0,y.Cb)({type:f.A,json:{write:{overridePolicy:e=>({enabled:!(!e||!e.url)})}}})],C.prototype,"thumbnail",void 0),(0,o._)([(0,h.p)("thumbnail")],C.prototype,"castThumbnail",null),(0,o._)([(0,y.Cb)({type:n.Z,json:{write:!0}})],C.prototype,"timeExtent",void 0),(0,o._)([(0,y.Cb)({type:s.Z,nonNullable:!0,json:{write:!0}})],C.prototype,"viewpoint",null),(0,o._)([(0,m.r)("viewpoint",["extent","viewpoint"])],C.prototype,"readViewpoint",null),(0,o._)([(0,w.c)("viewpoint")],C.prototype,"writeViewpoint",null),C=i=(0,o._)([(0,b.j)(v)],C);const S=C},53042:(e,t,r)=>{r.d(t,{Z:()=>d});var i,o=r(27366),n=r(51995),s=r(46784),a=r(84652),l=r(49861),p=(r(25243),r(69912));let u=i=class extends s.wq{constructor(e){super(e),this.color=new n.Z([0,0,0,1])}clone(){return new i((0,a.d9)({color:this.color}))}};(0,o._)([(0,l.Cb)({type:n.Z,json:{write:!0}})],u.prototype,"color",void 0),u=i=(0,o._)([(0,p.j)("esri.webmap.background.ColorBackground")],u);const d=u}}]);
//# sourceMappingURL=7098.ba450026.chunk.js.map