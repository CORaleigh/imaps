{"version":3,"sources":["../node_modules/@arcgis/core/views/3d/interactive/visualElements/support/Segment.js","../node_modules/@arcgis/core/core/quantityFormatUtils.js","../node_modules/@arcgis/core/chunks/MeasurementArrow.glsl.js","../node_modules/@arcgis/core/libs/maquette/h.js","../node_modules/@arcgis/core/views/overlay/LineOverlayItem.js","../node_modules/@arcgis/core/views/overlay/TextOverlayItem.js","../node_modules/@arcgis/core/views/3d/interactive/visualElements/LabelVisualElement.js","../node_modules/@arcgis/core/views/3d/webgl-engine/shaders/MeasurementArrowTechnique.js","../node_modules/@arcgis/core/views/3d/webgl-engine/materials/MeasurementArrowMaterial.js","../node_modules/@arcgis/core/views/3d/interactive/visualElements/MeasurementArrowVisualElement.js","../node_modules/@arcgis/core/views/3d/interactive/graphics/DirectLineMeasurement3D/DirectLineMeasurement3DView.js","../node_modules/@arcgis/core/chunks/vec4f32.js","../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/shading/VisualVariables.glsl.js","../node_modules/@arcgis/core/views/3d/interactive/visualElements/Object3DVisualElement.js","../node_modules/@arcgis/core/views/3d/webgl-engine/materials/VisualVariableMaterialParameters.js","../node_modules/@arcgis/core/views/3d/webgl-engine/shaders/RibbonLineTechnique.js","../node_modules/@arcgis/core/views/3d/webgl-engine/materials/RibbonLineMaterial.js","../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/shading/PiUtils.glsl.js","../node_modules/@arcgis/core/core/MapUtils.js","../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/shading/LineStipple.glsl.js","../node_modules/@arcgis/core/views/3d/layers/graphics/elevationAlignmentUtils.js","../node_modules/@arcgis/core/chunks/RibbonLine.glsl.js","../node_modules/@arcgis/core/views/3d/webgl-engine/lib/DefaultTextureUnits.js","../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/attributes/RibbonVertexPosition.glsl.js","../node_modules/@arcgis/core/views/3d/interactive/visualElements/RightAngleQuadVisualElement.js"],"names":["_","constructor","t","e","s","this","startRenderSpace","endRenderSpace","type","eval","i","n","r","createRenderGeometry","c","u","push","worldUpAtPosition","m","d","get","points","normals","f","renderSpatialReference","_start","_end","_pcpf","o","_project","a","_projectIn","h","R","p","l","toUnit","value","measure","Error","unit","b","g","vertex","uniforms","add","attributes","varyings","code","fragment","Math","sqrt","float","Object","freeze","__proto__","build","length","Array","isArray","vnodeSelector","properties","children","text","toString","domNode","hasOwnProperty","super","startX","startY","endX","endY","width","color","visible","_set","render","height","left","top","x1","x2","y1","y2","calculateCoordinates","strokeStyle","lineCap","classes","styles","visibility","style","renderCanvas","lineWidth","beginPath","moveTo","lineTo","stroke","min","max","prototype","readOnly","bottom","center","right","x","y","fontSize","anchor","backgroundColor","textColor","textShadowColor","textShadowSize","_cssClasses","floor","padding","borderRadius","textShadow","font","replace","measureText","textAlign","textBaseline","roundedRect","fillStyle","fill","_renderTextShadow","fillText","lineJoin","arcTo","closePath","cos","PI","sin","view","_handles","_textItem","_calloutItem","_showCallout","_showText","_geometry","_text","_fontSize","_distance","_anchor","applyProps","_updateLabelPosition","attached","overlaps","textItem","overlay","geometry","_stage","_computeLabelPositionFromPoint","k","position","_computeLabelPositionFromCorner","z","_updatePosition","_computeLabelPositionFromSegment","updateVisibility","renderCoordsHelper","toRenderCoords","L","camera","projectToRenderScreen","renderToScreen","w","P","T","j","pixelRatio","segment","H","sampleLocation","abs","startPosition","endPosition","createResources","v","items","addMany","state","watch","destroyResources","destroyed","removeMany","removeAll","I","S","C","M","V","F","start","end","initializeProgram","shader","rctx","generateSource","bindPass","bindProjectionMatrix","program","projectionMatrix","setUniform1f","outlineSize","setUniform4fv","outlineColor","stripeLength","stripeEvenColor","stripeOddColor","bindDraw","bindView","initializePipeline","polygonOffset","configuration","polygonOffsetEnabled","factor","units","depthTest","func","depthWrite","colorWrite","arguments","techniqueConfig","getTechniqueConfig","params","dispose","getPassParameters","intersect","createBufferWriter","getGLMaterial","output","updateParameters","technique","techniqueRep","acquireAndReleaseExisting","material","beginSlot","bind","bindProgram","vec3f","vec2f","f32","q","vertexBufferLayout","allocate","createBuffer","elementCount","indices","write","vertexAttributes","data","console","warn","transformation","invTranspTransformation","normal","A","uv0","setVec","set","B","auxpos1","_parameters","_origin","_originTransform","_arrowCenter","_renderOccluded","_stripeLength","_stripesEnabled","_arrowMaterial","setParameterValues","renderOccluded","geometryChanged","arrowStripeEvenColor","arrowStripeOddColor","createExternalResources","arrowOutlineColor","viewChanged","destroyExternalResources","destroy","forEachExternalMaterial","createGeometries","_createArrowGeometry","addGeometry","arrowSubdivisions","createPolylineGeometry","recreateGeometry","ready","computeScreenPixelSizeAt","arrowWidth","arrowOutlineWidth","arrowStripeLength","U","_params","_segmentVisualElement","_triangleVisualElement","_rightAngleQuad","_projectedGeodesicLine","_geodesicStartHint","_geodesicEndHint","_segmentLabel","_verticalLabel","_horizontalLabel","_segmentLabelDisplayedMeasurement","_startPosition","_endPosition","_cornerPosition","_startPositionAtSeaLevel","_endPositionAtSeaLevel","_viewMode","_geometryDirty","messages","_visualizedMeasurement","_actualVisualizedMeasurement","_visualElementOrientation","_triangleOrientationOverride","_triangleCollapseRatioThreshold","_geodesicDistanceThreshold","initialize","_initialize","triangleLineWidth","triangleColor","geodesicProjectionLineWidth","geodesicProjectionLineColor","stipplePattern","guideStippleLengthPixels","stippleIntegerRepeats","guideLineWidth","direcLabelFontSize","verticalLabelFontSize","horizontalLabelFontSize","dataObject","_update","_updateLabels","_updateSegmentStripeLength","async","_updateMessageBundle","then","_getActualVisualElementsOrientation","actualVisualizedMeasurement","direct","horizontalLabel","segmentLabel","horizontal","vertical","verticalLabel","labels","_updateGeometryAndViewMode","startPoint","endPoint","equals","_updateActualVisualizedMeasurement","_computeViewMode","getAltitude","G","spatialReference","previous","next","J","K","N","X","Y","W","setAltitude","setGeometryFromSegment","measurement","verticalDistance","horizontalDistance","euclideanDistance","geodesicDistance","directDistance","geodesicAngle","settings","E","D","O","notifyChange","metersPerDegree","Q","stripesEnabled","geodesicDistanceThreshold","triangleCollapseRatioThreshold","visualElementsOrientation","aboveGround","laserLineGlowColor","laserLineGlowWidth","laserLineGlowFalloff","laserLineInnerColor","laserLineInnerWidth","laserLineGlobalAlpha","laserLineEnabled","handleColor","handleOpacity","handleRadius","triangleCornerSize","triangleSubdivisions","guideLineColor","labelDistance","Float32Array","create","clone","fromValues","createView","zeros","ones","unitX","unitY","unitZ","unitW","ZEROS","ONES","UNIT_X","UNIT_Y","UNIT_Z","UNIT_W","vvInstancingEnabled","vvSize","vvColor","constants","vvSizeEnabled","setUniform3fv","vvSizeMinSize","vvSizeMaxSize","vvSizeOffset","vvSizeFactor","vvColorEnabled","setUniform1fv","vvColorValues","vvColorColors","bindUniforms","bindUniformsWithOpacity","vvOpacityEnabled","vvOpacityValues","vvOpacityOpacities","bindUniformsForSymbols","vvSymbolAnchor","setUniformMatrix3fv","vvSymbolRotationMatrix","_resources","_transform","object","layer","commit","recreate","geometries","removeAllGeometries","setVisible","isPickable","castShadow","remove","Default","vvSizeValue","subdivisionFactor","auxpos2","size","sizeFeatureAttribute","colorFeatureAttribute","opacityFeatureAttribute","stippleTextureBind","stippleTextureRepository","OITEnabled","transparencyPassType","slicePlaneEnabled","sliceHighlightDisabled","sliceEnabledForVertexPrograms","stippleEnabled","stippleOffColorEnabled","stippleUVMaxEnabled","stippleIntegerRepeatsEnabled","roundCaps","roundJoins","vvOpacity","falloffEnabled","innerColorEnabled","multipassTerrainEnabled","cullAboveGround","release","bindOutputHighlight","setUniform2fv","inverseViewport","join","miterLimit","nearFar","setUniform2f","fullViewport","swap","setUniform1i","stippleOffColor","setUniform4f","falloff","innerColor","innerWidth","bindUniformsWithOrigin","setPipelineState","blending","transparent","writeDepth","stencilWrite","sceneHasOcludees","stencilTest","occluder","_occluderPipelineTransparent","_occluderPipelineOpaque","_occluderPipelineMaskWrite","_occludeePipelineState","getPipelineState","pipeline","count","getLogger","_vertexAttributeLocations","layout","createLayout","isClosed","cap","intersectDrapedLineGeometry","intersectLineGeometry","options","selectionMode","screenToWorldRatio","Number","MAX_VALUE","error","has","point","Z","unprojectFromRenderScreen","$","fromPoints","eye","ee","te","ie","se","signedDistance","frustum","distance2","rayBeginPoint","rayEndPoint","closestLineSegmentPoint","computeAttachmentOrigin","vec4f","validateParameterValues","requiresTransparent","colorRequiresTransparent","targetSlot","_updateOccludeeState","hasOccludees","ensureParameters","vvFastUpdate","numJoinSubdivisions","numCapSubdivisions","buffer","stride","mode","requiresAlignment","applyElevationAlignmentBuffer","array","offset","verticalDistanceToGround","sampledElevation","geometryZWithOffset","NONE","UPDATE","RECREATE","calculateOffsetRenderUnits","featureExpressionInfoContext","meterUnitOffset","getElevation","extensions","include","DIFFUSE","NORMAL","EMISSION","OCCLUSION","METALLIC_ROUGHNESS","SSAO","SHADOW_MAP","_quadMaterial","_outlineMaterial","_maxSize","_position","_up","_right","_color","_outlineColor","_outlineSize","_size","_outlineRenderOccluded","_updateQuadMaterial","_updateOutlineMaterial","_updateTransform","quadMaterialParameters","outlineMaterialParameters","_createQuadGeometry","_createOutlineGeometry","_quadGeometryData","exclusive","Uint16Array"],"mappings":"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","file":"static/js/103.f1225737.chunk.js","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{c as e}from\"../../../../../chunks/vec3f64.js\";import{e as t,f as s,n as r,g as i,b as n}from\"../../../../../chunks/vec3.js\";import{slerpTangent as c,slerp as p}from\"../../../support/mathUtils.js\";import{getSphericalPCPF as o}from\"../../../../../geometry/projectionEllipsoid.js\";import{canProjectWithoutEngine as a,projectVectorToVector as h}from\"../../../../../geometry/projection.js\";import{sv3d as d}from\"../../../support/stack.js\";class _{constructor(t=e(),s=e()){this.startRenderSpace=t,this.endRenderSpace=s,this.type=\"euclidean\"}eval(e,i,n){return t(i,this.startRenderSpace,this.endRenderSpace,e),n&&(s(n,this.endRenderSpace,this.startRenderSpace),r(n,n)),i}createRenderGeometry(e,t){const r=[],i=[],n=(t,n)=>{const c=u;s(c,t,e),r.push([c[0],c[1],c[2]]),i.push([n[0],n[1],n[2]])},c=t.worldUpAtPosition(this.eval(.5,m),d.get());return n(this.startRenderSpace,c),n(this.endRenderSpace,c),{points:r,normals:i}}}class f{constructor(t,s,r){this.startRenderSpace=t,this.endRenderSpace=s,this.renderSpatialReference=r,this.type=\"geodesic\",this._start=e(),this._end=e(),this._pcpf=o(r),this._project=a(r,this._pcpf),this._projectIn(t,this._start),this._projectIn(s,this._end)}_projectIn(e,t){this._project?h(e,this.renderSpatialReference,t,this._pcpf):i(t,e)}eval(e,i,o){if(this._project)if(o){const t=u;c(this._start,this._end,e,i,t),n(R,i,t),h(i,this._pcpf,i,this.renderSpatialReference),h(R,this._pcpf,R,this.renderSpatialReference),s(o,R,i),r(o,o)}else p(this._start,this._end,e,i),h(i,this._pcpf,i,this.renderSpatialReference);else t(i,this._start,this._end,e),o&&(s(o,this._end,this._start),r(o,o));return i}createRenderGeometry(e,t){const r=[],i=[],n=(t,n)=>{const c=R;s(c,t,e),r.push([c[0],c[1],c[2]]),i.push([n[0],n[1],n[2]])},c=128+1&-2;for(let s=0;s<c;++s){const e=s/(c-1),r=m,i=u;this.eval(e,r),t.worldUpAtPosition(r,i),n(r,i)}return{points:r,normals:i}}}function l(e,t,s,r){switch(e){case\"euclidean\":return new _(t,s);case\"geodesic\":return new f(t,s,r)}}const m=e(),u=e(),R=e();export{_ as EuclideanSegment,f as GeodesicSegment,l as createSegment};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{formatDecimal as r,formatMetricLength as t,formatMetricVerticalLength as a,formatMetricArea as n,formatImperialLength as e,formatImperialVerticalLength as i,formatImperialArea as u,formatDMS as o}from\"./unitFormatUtils.js\";function l(t,a,n,e=2,i=\"abbr\"){return r(t,a.toUnit(n).value,n,e,i)}function f(r,a,n=2,e=\"abbr\"){if(\"length\"!==a.measure)throw new Error(\"quantity is not a length\");return t(r,a.value,a.unit,n,e)}function s(r,t,n=2,e=\"abbr\"){if(\"length\"!==t.measure)throw new Error(\"quantity is not a length\");return a(r,t.value,t.unit,n,e)}function m(r,t,a=2,e=\"abbr\"){if(\"area\"!==t.measure)throw new Error(\"quantity is not an area\");return n(r,t.value,t.unit,a,e)}function h(r,t,a=2,n=\"abbr\"){if(\"length\"!==t.measure)throw new Error(\"quantity is not a length\");return e(r,t.value,t.unit,a,n)}function b(r,t,a=2,n=\"abbr\"){if(\"length\"!==t.measure)throw new Error(\"quantity is not a length\");return i(r,t.value,t.unit,a,n)}function c(r,t,a=2,n=\"abbr\"){if(\"area\"!==t.measure)throw new Error(\"quantity is not an area\");return u(r,t.value,t.unit,a,n)}function g(r){if(\"angle\"!==r.measure)throw new Error(\"quantity is not an angle\");return o(r.value,r.unit)}export{g as formatDMS,l as formatDecimal,c as formatImperialArea,h as formatImperialLength,b as formatImperialVerticalLength,m as formatMetricArea,f as formatMetricLength,s as formatMetricVerticalLength};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{glsl as e}from\"../views/3d/webgl-engine/core/shaderModules/interfaces.js\";import{ShaderBuilder as t}from\"../views/3d/webgl-engine/core/shaderModules/ShaderBuilder.js\";function o(){const o=new t;o.vertex.uniforms.add(\"proj\",\"mat4\").add(\"view\",\"mat4\").add(\"width\",\"float\"),o.attributes.add(\"position\",\"vec3\"),o.attributes.add(\"normal\",\"vec3\"),o.attributes.add(\"uv0\",\"vec2\"),o.attributes.add(\"auxpos1\",\"float\"),o.varyings.add(\"vtc\",\"vec2\"),o.varyings.add(\"vlength\",\"float\"),o.varyings.add(\"vradius\",\"float\"),o.vertex.code.add(e`\n    void main(void) {\n      vec3 bitangent = normal;\n\n      vtc = uv0;\n      vlength = auxpos1;\n      vradius = 0.5 * width;\n\n      vec4 pos = view * vec4(position + vradius * bitangent * uv0.y, 1.0);\n      gl_Position = proj * pos;\n    }\n  `),o.fragment.uniforms.add(\"outlineSize\",\"float\").add(\"outlineColor\",\"vec4\").add(\"stripeLength\",\"float\").add(\"stripeEvenColor\",\"vec4\").add(\"stripeOddColor\",\"vec4\");const r=1/Math.sqrt(2);return o.fragment.code.add(e`\n    const float INV_SQRT2 = ${e.float(r)};\n\n    vec4 arrowColor(vec2 tc, float len) {\n      float d = INV_SQRT2 * (tc.x - abs(tc.y));\n      d = min(d, INV_SQRT2 * (len - tc.x - abs(tc.y)));\n      d = min(d, 1.0 - abs(tc.y));\n\n      if (d < 0.0) {\n        return vec4(0.0);\n      } else if (d < outlineSize) {\n        return outlineColor;\n      } else {\n        return fract(0.5 / stripeLength * tc.x * vradius) >= 0.5 ? stripeOddColor : stripeEvenColor;\n      }\n    }\n\n    void main(void) {\n      vec2 ntc = vec2(vtc.x / vradius, vtc.y);\n      vec4 color = arrowColor(ntc, vlength / vradius);\n      if (color.a == 0.0) {\n        discard;\n      }\n      gl_FragColor = color;\n    }\n  `),o}var r=Object.freeze({__proto__:null,build:o});export{r as M,o as b};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nlet e=e=>({vnodeSelector:\"\",properties:void 0,children:void 0,text:e.toString(),domNode:null}),r=(t,o,n)=>{for(let l=0,i=o.length;l<i;l++){let i=o[l];Array.isArray(i)?r(t,i,n):null!=i&&!1!==i&&(\"string\"==typeof i&&(i=e(i)),n.push(i))}};function t(e,t,o){if(Array.isArray(t))o=t,t=void 0;else if(t&&(\"string\"==typeof t||t.hasOwnProperty(\"vnodeSelector\"))||o&&(\"string\"==typeof o||o.hasOwnProperty(\"vnodeSelector\")))throw new Error(\"h called with invalid arguments\");let n,l;return o&&1===o.length&&\"string\"==typeof o[0]?n=o[0]:o&&(l=[],r(e,o,l),0===l.length&&(l=void 0)),{vnodeSelector:e,properties:t,children:l,text:\"\"===n?void 0:n,domNode:null}}export{t as h};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{_ as t}from\"../../chunks/tslib.es6.js\";import\"../../core/has.js\";import\"../../core/Logger.js\";import\"../../core/accessorSupport/ensureType.js\";import{property as e}from\"../../core/accessorSupport/decorators/property.js\";import{subclass as s}from\"../../core/accessorSupport/decorators/subclass.js\";import\"../../core/urlUtils.js\";import\"../../core/uuid.js\";import\"../../portal/support/resourceExtension.js\";import i from\"../../core/Accessor.js\";import\"../../libs/maquette/projection.js\";import{h as o}from\"../../libs/maquette/h.js\";import\"../../libs/maquette/projector.js\";let r=class extends i{constructor(t){super(t),this.startX=0,this.startY=0,this.endX=0,this.endY=0,this.width=1,this.color=[0,0,0,.5],this.visible=!0}get startPosition(){return[this.startX,this.startY]}set startPosition(t){this._set(\"startX\",t[0]),this._set(\"startY\",t[1])}get endPosition(){return[this.endX,this.endY]}set endPosition(t){this._set(\"endX\",t[0]),this._set(\"endY\",t[1])}get strokeStyle(){const t=this.color;return`rgba(${t[0]}, ${t[1]}, ${t[2]}, ${t[3]})`}get lineCap(){return\"round\"}render(){const{height:t,left:e,top:s,width:i,x1:r,x2:n,y1:p,y2:a}=this.calculateCoordinates(h),l=`stroke: ${this.strokeStyle}; stroke-width: ${this.width}; stroke-linecap: ${this.lineCap};`;return o(\"div\",{classes:{\"esri-line-overlay-item\":!0},styles:{left:e+\"px\",top:s+\"px\",width:i+\"px\",height:t+\"px\",visibility:this.visible?\"visible\":\"hidden\"}},[o(\"svg\",{width:i,height:t},[o(\"line\",{x1:r,y1:p,x2:n,y2:a,style:l})])])}renderCanvas(t){if(!this.visible)return;t.strokeStyle=this.strokeStyle,t.lineWidth=this.width,t.lineCap=this.lineCap;const e=this.calculateCoordinates(h);t.beginPath(),t.moveTo(e.left+e.x1,e.top+e.y1),t.lineTo(e.left+e.x2,e.top+e.y2),t.stroke()}calculateCoordinates(t){const e=Math.min(this.startX,this.endX),s=Math.max(this.startX,this.endX),i=Math.min(this.startY,this.endY),o=Math.max(this.startY,this.endY),r=this.width;return t.left=e-r,t.top=i-r,t.width=s-e+2*r,t.height=Math.max(20,o-i+2*r),t.x1=this.startX-e+r,t.y1=this.startY-i+r,t.x2=this.endX-e+r,t.y2=this.endY-i+r,t}};t([e()],r.prototype,\"startX\",void 0),t([e()],r.prototype,\"startY\",void 0),t([e()],r.prototype,\"endX\",void 0),t([e()],r.prototype,\"endY\",void 0),t([e()],r.prototype,\"startPosition\",null),t([e()],r.prototype,\"endPosition\",null),t([e()],r.prototype,\"width\",void 0),t([e()],r.prototype,\"color\",void 0),t([e()],r.prototype,\"visible\",void 0),t([e({readOnly:!0})],r.prototype,\"strokeStyle\",null),r=t([s(\"esri.views.overlay.LineOverlayItem\")],r);const h={left:0,top:0,width:0,height:0,x1:0,y1:0,x2:0,y2:0};var n=r;export default n;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{_ as t}from\"../../chunks/tslib.es6.js\";import\"../../core/has.js\";import\"../../core/Logger.js\";import\"../../core/accessorSupport/ensureType.js\";import{property as e}from\"../../core/accessorSupport/decorators/property.js\";import{subclass as o}from\"../../core/accessorSupport/decorators/subclass.js\";import\"../../core/urlUtils.js\";import\"../../core/uuid.js\";import\"../../portal/support/resourceExtension.js\";import i from\"../../core/Accessor.js\";import\"../../libs/maquette/projection.js\";import{h as r}from\"../../libs/maquette/h.js\";import\"../../libs/maquette/projector.js\";const s={bottom:\"esri-text-overlay-item-anchor-bottom\",\"bottom-right\":\"esri-text-overlay-item-anchor-bottom-right\",\"bottom-left\":\"esri-text-overlay-item-anchor-bottom-left\",top:\"esri-text-overlay-item-anchor-top\",\"top-right\":\"esri-text-overlay-item-anchor-top-right\",\"top-left\":\"esri-text-overlay-item-anchor-top-left\",center:\"esri-text-overlay-item-anchor-center\",right:\"esri-text-overlay-item-anchor-right\",left:\"esri-text-overlay-item-anchor-left\"};let l=class extends i{constructor(t){super(t),this.x=0,this.y=0,this.text=\"-\",this.fontSize=14,this.anchor=\"center\",this.visible=!0,this.backgroundColor=\"rgba(0, 0, 0, 0.6)\",this.textColor=\"white\",this.textShadowColor=[0,0,0],this.textShadowSize=1}get position(){return[this.x,this.y]}set position(t){this._set(\"x\",t[0]),this._set(\"y\",t[1])}get padding(){return.5*this.fontSize}render(){return r(\"div\",{classes:this._cssClasses(),styles:{left:Math.floor(this.x)+\"px\",top:Math.floor(this.y)+\"px\",visibility:this.visible?\"visible\":\"hidden\",fontSize:this.fontSize+\"px\",backgroundColor:this.backgroundColor,color:this.textColor,padding:this.padding+\"px\",borderRadius:this.padding+\"px\",textShadow:`0 0 ${this.textShadowSize}px rgb(${this.textShadowColor[0]}, ${this.textShadowColor[1]}, ${this.textShadowColor[2]})`}},[this.text])}renderCanvas(t){if(!this.visible)return;const e=t.font.replace(/^(.*?)px/,\"\");t.font=`${this.fontSize}px ${e}`;const o=this.padding,i=this.padding,r=t.measureText(this.text).width,s=this.fontSize,l=n[this.anchor];t.textAlign=\"center\",t.textBaseline=\"middle\";const h=r+2*o,a=s+2*o,x=this.x+l.x*h,p=this.y+l.y*a;this.roundedRect(t,x,p,h,a,i),t.fillStyle=this.backgroundColor,t.fill();const c=this.x+(l.x+.5)*h,d=this.y+(l.y+.5)*a;this._renderTextShadow(t,this.text,c,d),t.fillStyle=this.textColor,t.fillText(this.text,c,d)}_renderTextShadow(t,e,o,i){t.lineJoin=\"miter\",t.fillStyle=`rgba(${this.textShadowColor[0]}, ${this.textShadowColor[1]}, ${this.textShadowColor[2]}, ${1/h.length})`;const r=this.textShadowSize;for(const[s,l]of h)t.fillText(e,o+r*s,i+r*l)}roundedRect(t,e,o,i,r,s){t.beginPath(),t.moveTo(e,o+s),t.arcTo(e,o,e+s,o,s),t.lineTo(e+i-s,o),t.arcTo(e+i,o,e+i,o+s,s),t.lineTo(e+i,o+r-s),t.arcTo(e+i,o+r,e+i-s,o+r,s),t.lineTo(e+s,o+r),t.arcTo(e,o+r,e,o+r-s,s),t.closePath()}_cssClasses(){const t={\"esri-text-overlay-item\":!0};for(const e in s)t[s[e]]=this.anchor===e;return t}};t([e()],l.prototype,\"x\",void 0),t([e()],l.prototype,\"y\",void 0),t([e()],l.prototype,\"position\",null),t([e()],l.prototype,\"text\",void 0),t([e()],l.prototype,\"fontSize\",void 0),t([e()],l.prototype,\"anchor\",void 0),t([e()],l.prototype,\"visible\",void 0),t([e()],l.prototype,\"padding\",null),l=t([o(\"esri.views.overlay.TextOverlayItem\")],l);const n={bottom:{x:-.5,y:-1,textAlign:\"center\",textBaseline:\"bottom\"},\"bottom-left\":{x:0,y:-1,textAlign:\"left\",textBaseline:\"bottom\"},\"bottom-right\":{x:-1,y:-1,textAlign:\"right\",textBaseline:\"bottom\"},center:{x:-.5,y:-.5,textAlign:\"center\",textBaseline:\"middle\"},left:{x:0,y:-.5,textAlign:\"left\",textBaseline:\"middle\"},right:{x:-1,y:-.5,textAlign:\"right\",textBaseline:\"middle\"},top:{x:-.5,y:0,textAlign:\"center\",textBaseline:\"top\"},\"top-left\":{x:0,y:0,textAlign:\"left\",textBaseline:\"top\"},\"top-right\":{x:-1,y:0,textAlign:\"right\",textBaseline:\"top\"}},h=[];{const t=16;for(let e=0;e<360;e+=360/t)h.push([Math.cos(Math.PI*e/180),Math.sin(Math.PI*e/180)])}var a=l;export default a;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{isSome as t,unwrap as e}from\"../../../../core/maybe.js\";import{createRenderScreenPointArray as s,createRenderScreenPointArray3 as i,createScreenPointArray as o}from\"../../../../core/screenUtils.js\";import{c as r}from\"../../../../chunks/vec3f64.js\";import{b as a}from\"../../../../chunks/vec3.js\";import n from\"../../../../core/Handles.js\";import{n as h,h as c,e as m,a as l,s as _,l as u,d as p}from\"../../../../chunks/vec2.js\";import{VisualElement as d}from\"./VisualElement.js\";import{screenSpaceTangent as x}from\"../measurementTools/support/viewUtils.js\";import b from\"../../../overlay/LineOverlayItem.js\";import v from\"../../../overlay/TextOverlayItem.js\";class f extends d{constructor(t){super(t.view),this._handles=new n,this._textItem=null,this._calloutItem=null,this._showCallout=!0,this._showText=!0,this._geometry=null,this._text=null,this._fontSize=14,this._distance=25,this._anchor=\"right\",this.applyProps(t)}get geometry(){return this._geometry}set geometry(t){this._geometry=t,this._updateLabelPosition()}get textItem(){return this._textItem}get text(){return this._text}set text(t){this._text=t,this.attached&&(this._textItem.text=this._text)}get fontSize(){return this._fontSize}set fontSize(t){this._fontSize=t,this.attached&&(this._textItem.fontSize=this._fontSize)}get distance(){return this._distance}set distance(t){this._distance!==t&&(this._distance=t,this._updateLabelPosition())}get anchor(){return this._anchor}set anchor(t){this._anchor!==t&&(this._anchor=t,this._updateLabelPosition())}overlaps(t){return this.textItem.visible&&t.textItem.visible&&this.view.overlay.overlaps(this._textItem,t.textItem)}_updateLabelPosition(){if(this.attached){if(this._showText=!1,this._showCallout=!1,t(this.geometry)&&this.view._stage)switch(this.geometry.type){case\"point\":this._computeLabelPositionFromPoint(this.geometry,k)&&(this._textItem.position=[k[0],k[1]],this._textItem.anchor=\"center\",this._showText=!0);break;case\"corner\":this._computeLabelPositionFromCorner(this.geometry,this._distance,k,z)&&(this._showCallout=this._updatePosition(k,z),this._showText=!0);break;case\"segment\":this._computeLabelPositionFromSegment(this.geometry,this._distance,this._anchor,k,z)&&(this._showText=!0,this._showCallout=this._updatePosition(k,z))}this.updateVisibility(this.visible)}}_computeLabelPositionFromPoint(t,e){this.view.renderCoordsHelper.toRenderCoords(t,L);const s=this.view._stage.camera;return s.projectToRenderScreen(L,R),!(R[2]<0||R[2]>1)&&(s.renderToScreen(R,e),!0)}_computeLabelPositionFromCorner(t,e,s,i){if(!t)return!1;const o=this.view._stage.camera;return w(t.left,1,o,P),h(P,P),w(t.right,0,o,T),c(j,P,T),h(j,j),m(j,j),o.projectToRenderScreen(t.left.endRenderSpace,R),!(R[2]<0||R[2]>1)&&(o.renderToScreen(R,s),l(j,j,e*o.pixelRatio),c(j,j,R),o.renderToScreen(j,i),!0)}_computeLabelPositionFromSegment(t,e,s,i,o){if(!t)return!1;const r=t.segment,a=this.view._stage.camera;x(r.startRenderSpace,r.endRenderSpace,P,a),_(j,-P[1],P[0]);let n=!1;switch(s){case\"top\":n=j[1]<0;break;case\"bottom\":n=j[1]>0;break;case\"left\":n=j[0]>0;break;case\"right\":n=j[0]<0}if(n&&h(j,j),0===u(j))switch(s){case\"top\":j[1]=1;break;case\"bottom\":j[1]=-1;break;case\"left\":j[0]=-1;break;case\"right\":j[0]=1}return r.eval(H[t.sampleLocation],L),a.projectToRenderScreen(L,R),!(R[2]<0||R[2]>1)&&(a.renderToScreen(R,i),l(j,j,e*a.pixelRatio),c(j,j,R),a.renderToScreen(j,o),!0)}_updatePosition(t,e){if(e){const s=e[0]-t[0],i=e[1]-t[1];return this._textItem.position=[e[0],e[1]],this._textItem.anchor=Math.abs(s)>Math.abs(i)?s>0?\"left\":\"right\":i>0?\"top\":\"bottom\",this._calloutItem.startPosition=[t[0],t[1]],this._calloutItem.endPosition=[e[0],e[1]],!0}return this._textItem.position=[t[0],t[1]],this._textItem.anchor=\"center\",!1}createResources(){this._textItem=new v({visible:!0}),this._textItem.text=e(this._text),this._textItem.fontSize=this._fontSize,this._calloutItem=new b({visible:!0,width:2}),this._updateLabelPosition(),this.view.overlay.items.addMany([this._textItem,this._calloutItem]),this._handles.add(this.view.state.watch(\"camera\",(()=>{this._updateLabelPosition()})))}destroyResources(){this.view.overlay&&!this.view.overlay.destroyed&&this.view.overlay.items.removeMany([this._textItem,this._calloutItem]),this._handles.removeAll()}updateVisibility(t){this._textItem.visible=this._showText&&t,this._calloutItem.visible=this._showCallout&&t}}function w(t,e,s,i){t.eval(e,I,S),a(y,I,S),s.projectToRenderScreen(I,C),s.projectToRenderScreen(y,M),p(i,V,F),m(i,i)}function g(t){switch(t){case\"top\":return\"bottom\";case\"right\":return\"left\";case\"bottom\":return\"top\";case\"left\":return\"right\"}}const I=r(),y=r(),S=r(),P=s(),T=s(),j=s(),L=r(),R=i(),k=o(),z=o(),C=i(),F=C,M=i(),V=M,H={start:0,center:.5,end:1};export{f as LabelVisualElement,g as mirrorPosition,w as screenSpaceTangent};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{_ as r}from\"../../../../chunks/tslib.es6.js\";import{ReloadableShaderModule as e}from\"../core/shaderTechnique/ReloadableShaderModule.js\";import{ShaderTechnique as t}from\"../core/shaderTechnique/ShaderTechnique.js\";import{ShaderTechniqueConfiguration as o,parameter as i}from\"../core/shaderTechnique/ShaderTechniqueConfiguration.js\";import{Default3D as s}from\"../lib/DefaultVertexAttributeLocations.js\";import n from\"../../../webgl/Program.js\";import{makePipelineState as a,defaultDepthWriteParams as m,defaultColorWriteParams as l}from\"../../../webgl/renderState.js\";import{View as p}from\"../core/shaderLibrary/util/View.glsl.js\";import{M as f}from\"../../../../chunks/MeasurementArrow.glsl.js\";class h extends t{constructor(r,e){super(r,e)}initializeProgram(r){const e=h.shader.get().build();return new n(r.rctx,e.generateSource(\"vertex\"),e.generateSource(\"fragment\"),s)}bindPass(r,e,t){p.bindProjectionMatrix(this.program,t.camera.projectionMatrix),this.program.setUniform1f(\"width\",e.width),this.program.setUniform1f(\"outlineSize\",e.outlineSize),this.program.setUniform4fv(\"outlineColor\",e.outlineColor),this.program.setUniform1f(\"stripeLength\",e.stripeLength),this.program.setUniform4fv(\"stripeEvenColor\",e.stripeEvenColor),this.program.setUniform4fv(\"stripeOddColor\",e.stripeOddColor)}bindDraw(r){p.bindView(this.program,r)}initializePipeline(){return a({polygonOffset:this.configuration.polygonOffsetEnabled&&{factor:0,units:-4},depthTest:{func:513},depthWrite:m,colorWrite:l})}get primitiveType(){return 5}}h.shader=new e(f,(()=>import(\"./MeasurementArrow.glsl.js\")));class d extends o{constructor(){super(...arguments),this.polygonOffsetEnabled=!1}}r([i()],d.prototype,\"polygonOffsetEnabled\",void 0);export{h as MeasurementArrowTechnique,d as MeasurementArrowTechniqueConfiguration};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{c as e}from\"../../../../chunks/vec3f64.js\";import{s as t,n as s,f as r,c as i,k as n,i as o}from\"../../../../chunks/vec3.js\";import{newLayout as a}from\"../../support/buffer/InterleavedLayout.js\";import c from\"../lib/GLMaterial.js\";import{Material as u,materialParametersDefaults as f}from\"../lib/Material.js\";import{MeasurementArrowTechniqueConfiguration as l,MeasurementArrowTechnique as p}from\"../shaders/MeasurementArrowTechnique.js\";class h extends u{constructor(e){super(e,g),this.techniqueConfig=new l}getTechniqueConfig(){return this.techniqueConfig.polygonOffsetEnabled=this.params.polygonOffset,this.techniqueConfig}dispose(){}getPassParameters(){return this.params}intersect(){}createBufferWriter(){return new w}getGLMaterial(e){return 0===e.output?new m(e):void 0}}class m extends c{constructor(e){super(e),this.updateParameters()}updateParameters(){this.technique=this.techniqueRep.acquireAndReleaseExisting(p,this.material.getTechniqueConfig(),this.technique)}beginSlot(e){return 3===e}bind(e,t){e.bindProgram(this.technique.program),this.technique.bindPass(e,this.material.getPassParameters(),t)}}const g={width:32,outlineSize:.2,outlineColor:[1,.5,0,1],stripeLength:1,stripeEvenColor:[1,1,1,1],stripeOddColor:[1,.5,0,1],polygonOffset:!1,...f},d=a().vec3f(\"position\").vec3f(\"normal\").vec2f(\"uv0\").f32(\"auxpos1\"),v=e(),q=e(),b=e(),x=e(),C=e();class w{constructor(){this.vertexBufferLayout=d}allocate(e){return this.vertexBufferLayout.createBuffer(e)}elementCount(e){return 2*(e.indices.get(\"position\").length/2+1)}write(e,a,c,u){const f=a.vertexAttributes.get(\"position\").data,l=a.vertexAttributes.get(\"normal\").data,p=f.length/3,h=a&&a.indices&&a.indices.get(\"position\");h&&h.length!==2*(p-1)&&console.warn(\"MeasurementArrowMaterial does not support indices\");const m=v,g=q,d=b,w=x,P=C,j=e.transformation,y=e.invTranspTransformation,L=c.position,M=c.normal,A=c.uv0;let T=0;for(let v=0;v<p;++v){const e=3*v;if(t(m,f[e],f[e+1],f[e+2]),v<p-1){const e=3*(v+1);t(g,f[e],f[e+1],f[e+2]),t(P,l[e],l[e+1],l[e+2]),s(P,P),r(d,g,m),s(d,d),i(w,P,d),s(w,w)}const a=n(m,g);j&&y&&(o(m,m,j),o(g,g,j),o(w,w,y));const c=u+2*v,h=c+1;L.setVec(c,m),L.setVec(h,m),M.setVec(c,w),M.setVec(h,w),A.set(c,0,T),A.set(c,1,-1),A.set(h,0,T),A.set(h,1,1),v<p-1&&(T+=a)}const B=c.auxpos1;for(let t=0;t<2*p;++t)B.set(u+t,T)}}export{h as MeasurementArrowMaterial};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{isNone as e,isSome as r}from\"../../../../core/maybe.js\";import{c as t}from\"../../../../chunks/vec3f64.js\";import{f as s}from\"../../../../chunks/vec3.js\";import i from\"../../../../core/Handles.js\";import{a}from\"../../../../chunks/mat4f64.js\";import{sv3d as o}from\"../../support/stack.js\";import n from\"../../webgl-engine/lib/GeometryUtil.js\";import{Object3DVisualElement as h}from\"./Object3DVisualElement.js\";import{MeasurementArrowMaterial as l}from\"../../webgl-engine/materials/MeasurementArrowMaterial.js\";class d extends h{constructor(e){super(e),this._parameters=c,this._handles=null,this._origin=t(),this._originTransform=a(),this._arrowCenter=t(),this._renderOccluded=4,this._geometry=null,this._stripeLength=1,this._stripesEnabled=!0,this.applyProps(e)}get renderOccluded(){return this._renderOccluded}set renderOccluded(e){e!==this._renderOccluded&&(this._renderOccluded=e,this._arrowMaterial&&this._arrowMaterial.setParameterValues({renderOccluded:e}))}get geometry(){return this._geometry}set geometry(e){this._geometry=e,this.geometryChanged()}get stripeLength(){return this._stripeLength}set stripeLength(e){this._stripeLength=e,this.attached&&this._arrowMaterial.setParameterValues({stripeLength:this._stripeLength})}get stripesEnabled(){return this._stripesEnabled}set stripesEnabled(e){if(this._stripesEnabled=e,this.attached){const e=this._stripesEnabled?this._parameters.arrowStripeEvenColor:this._parameters.arrowStripeOddColor;this._arrowMaterial.setParameterValues({stripeEvenColor:e})}}createExternalResources(){const e=this._stripesEnabled?this._parameters.arrowStripeEvenColor:this._parameters.arrowStripeOddColor;this._arrowMaterial=new l({outlineColor:this._parameters.arrowOutlineColor,stripeEvenColor:e,stripeOddColor:this._parameters.arrowStripeOddColor,renderOccluded:this.renderOccluded,polygonOffset:!0}),this._handles=new i,this._handles.add(this.view.state.watch(\"camera\",(()=>{this.viewChanged()})))}destroyExternalResources(){this._arrowMaterial=null,this._handles.destroy(),this._handles=null}forEachExternalMaterial(e){e(this._arrowMaterial)}createGeometries(r){if(e(this._geometry)||e(this._geometry.startRenderSpace)||e(this._geometry.endRenderSpace))return;const t=this._createArrowGeometry(this._geometry.startRenderSpace,this._geometry.endRenderSpace,this._origin,this._geometry);r.addGeometry(t,this._arrowMaterial,this._originTransform),this.viewChanged()}_createArrowGeometry(e,r,t,i){const a=this.view.renderCoordsHelper,h=[],l=[],d=(e,r)=>{const i=o.get();s(i,e,t),h.push(i),l.push(r)};if(\"euclidean\"===i.type){i.eval(.5,this._arrowCenter);const t=o.get();a.worldUpAtPosition(this._arrowCenter,t),d(e,t),d(r,t)}else{i.eval(.5,this._arrowCenter);const e=this._parameters.arrowSubdivisions+1&-2;for(let r=0;r<e;++r){const t=r/(e-1),s=o.get(),n=o.get();i.eval(t,s),a.worldUpAtPosition(s,n),d(s,n)}}return n.createPolylineGeometry(h,l)}geometryChanged(){this.recreateGeometry()}viewChanged(){if(this.view.ready&&this.attached&&r(this._geometry)){const e=this.view._stage.camera.computeScreenPixelSizeAt(this._arrowCenter);this._arrowMaterial.setParameterValues({width:this._parameters.arrowWidth*e})}}}const c={arrowWidth:16,arrowOutlineColor:[1,.5,0,1],arrowOutlineWidth:.2,arrowStripeEvenColor:[1,1,1,1],arrowStripeOddColor:[1,.5,0,1],arrowStripeLength:16,arrowSubdivisions:128};export{d as MeasurementArrowVisualElement};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../../../chunks/tslib.es6.js\";import\"../../../../../core/has.js\";import{isNone as t,isSome as i}from\"../../../../../core/maybe.js\";import\"../../../../../core/Logger.js\";import\"../../../../../core/accessorSupport/ensureType.js\";import{property as s}from\"../../../../../core/accessorSupport/decorators/property.js\";import{subclass as a}from\"../../../../../core/accessorSupport/decorators/subclass.js\";import\"../../../../../core/urlUtils.js\";import\"../../../../../core/uuid.js\";import\"../../../../../portal/support/resourceExtension.js\";import n from\"../../../../../core/Accessor.js\";import{onLocaleChange as r}from\"../../../../../intl/locale.js\";import{sign as o,nextHighestPowerOfTen as l,deg2rad as h}from\"../../../../../core/mathUtils.js\";import{createRenderScreenPointArray3 as c,createRenderScreenPointArray as d}from\"../../../../../core/screenUtils.js\";import{fetchMessageBundle as u}from\"../../../../../intl/messages.js\";import\"../../../../../intl.js\";import{c as m}from\"../../../../../chunks/vec3f64.js\";import{g,a as _,b as p}from\"../../../../../chunks/vec3.js\";import v from\"../../../../../core/Handles.js\";import{getReferenceEllipsoid as b}from\"../../../../../geometry/projectionEllipsoid.js\";import{preferredImperialLengthUnit as L,convertUnit as w}from\"../../../../../core/unitUtils.js\";import{whenOnce as y}from\"../../../../../core/watchUtils.js\";import{formatDecimal as j,formatDMS as z,formatImperialLength as f,formatImperialVerticalLength as O,formatMetricLength as E,formatMetricVerticalLength as D}from\"../../../../../core/quantityFormatUtils.js\";import{g as S}from\"../../../../../chunks/vec2.js\";import{f as P}from\"../../../../../chunks/vec4f32.js\";import{createStipplePatternSimple as M}from\"../../../webgl-engine/materials/lineStippleUtils.js\";import{RightAngleQuadVisualElement as V}from\"../../visualElements/RightAngleQuadVisualElement.js\";import{screenSpaceTangent as A}from\"../../measurementTools/support/viewUtils.js\";import{LabelVisualElement as C,mirrorPosition as k}from\"../../visualElements/LabelVisualElement.js\";import{LineVisualElement as H}from\"../../visualElements/LineVisualElement.js\";import{GeodesicSegment as G,EuclideanSegment as R}from\"../../visualElements/support/Segment.js\";import{MeasurementArrowVisualElement as T}from\"../../visualElements/MeasurementArrowVisualElement.js\";let U=class extends n{constructor(e){super(e),this._params={...B},this._handles=new v,this._segmentVisualElement=null,this._triangleVisualElement=null,this._rightAngleQuad=null,this._projectedGeodesicLine=null,this._geodesicStartHint=null,this._geodesicEndHint=null,this._segmentLabel=null,this._verticalLabel=null,this._horizontalLabel=null,this._segmentLabelDisplayedMeasurement=\"euclidean\",this._startPosition=m(),this._endPosition=m(),this._cornerPosition=m(),this._startPositionAtSeaLevel=m(),this._endPositionAtSeaLevel=m(),this._viewMode=\"none\",this._geometryDirty=!0,this.state=\"pending\",this.messages=null,this._visualizedMeasurement=\"auto\",this._actualVisualizedMeasurement=\"euclidean\",this._visualElementOrientation=\"auto\",this._triangleOrientationOverride=null,this._triangleCollapseRatioThreshold=.03,this._geodesicDistanceThreshold=1e5}initialize(){this._handles.add(y(this.view,\"ready\",(()=>this._initialize()),!0))}_initialize(){switch(this.state){case\"ready\":throw new Error(\"invalid state\");case\"destroyed\":return}this._segmentVisualElement=new T({attached:!0,view:this.view,geometry:null,renderOccluded:4}),this._triangleVisualElement=new H({attached:!0,view:this.view,width:this._params.triangleLineWidth,color:this._params.triangleColor,renderOccluded:4}),this._rightAngleQuad=new V({attached:!0,view:this.view,color:I,renderOccluded:4}),this._projectedGeodesicLine=new H({attached:!0,view:this.view,width:this._params.geodesicProjectionLineWidth,color:this._params.geodesicProjectionLineColor,polygonOffset:!0,stipplePattern:M(this._params.guideStippleLengthPixels),stippleIntegerRepeats:!1,renderOccluded:4}),this._geodesicStartHint=new H({attached:!0,view:this.view,width:this._params.guideLineWidth,color:this._params.geodesicProjectionLineColor,polygonOffset:!0,stipplePattern:M(this._params.guideStippleLengthPixels),stippleIntegerRepeats:!1,renderOccluded:4}),this._geodesicEndHint=new H({attached:!0,view:this.view,width:this._params.guideLineWidth,color:this._params.geodesicProjectionLineColor,polygonOffset:!0,stipplePattern:M(this._params.guideStippleLengthPixels),stippleIntegerRepeats:!1,renderOccluded:4}),this._segmentLabel=new C({attached:!0,view:this.view,fontSize:this._params.direcLabelFontSize}),this._verticalLabel=new C({attached:!0,view:this.view,fontSize:this._params.verticalLabelFontSize}),this._horizontalLabel=new C({attached:!0,view:this.view,fontSize:this._params.horizontalLabelFontSize}),this._handles.add([this.dataObject.watch(\"visible\",(()=>this._update(!1)),!0),this.dataObject.watch(\"startPoint\",(()=>this._update()),!0),this.dataObject.watch(\"endPoint\",(()=>this._update()),!0),this.dataObject.watch(\"measurement\",(()=>this._update()),!0),this.dataObject.watch(\"settings.unit\",(()=>{this._updateLabels(),this._updateSegmentStripeLength()}),!0),this.view.state.watch(\"camera\",(()=>this._update()),!0),r((async()=>this._updateMessageBundle()))]),this._set(\"state\",\"ready\"),this._updateMessageBundle(),this._update()}async whenReady(){return y(this,\"ready\").then((()=>{}))}get ready(){return\"ready\"===this.state}get viewMode(){return this._viewMode}get visualizedMeasurement(){return this._visualizedMeasurement}set visualizedMeasurement(e){e!==this._visualizedMeasurement&&(this._visualizedMeasurement=e,this._update())}get actualVisualizedMeasurement(){return this._actualVisualizedMeasurement}get visualElementsOrientation(){return this._visualElementOrientation}set visualElementsOrientation(e){e!==this._visualElementOrientation&&(this._visualElementOrientation=e,this._update())}get allowVisualElementsOrientationChange(){return t(this._triangleOrientationOverride)}set allowVisualElementsOrientationChange(e){t(this._triangleOrientationOverride)!==e&&(t(this._triangleOrientationOverride)?this._triangleOrientationOverride=this._getActualVisualElementsOrientation():(this._triangleOrientationOverride=null,this._update()))}get triangleCollapseRatioThreshold(){return this._triangleCollapseRatioThreshold}set triangleCollapseRatioThreshold(e){this._triangleCollapseRatioThreshold=e,this._update()}get geodesicDistanceThreshold(){return this._geodesicDistanceThreshold}set geodesicDistanceThreshold(e){this._geodesicDistanceThreshold=e,this._update()}get segmentLabel(){return this._segmentLabel}get horizontalLabel(){return this._horizontalLabel}get verticalLabel(){return this._verticalLabel}get testData(){let e=null;const t=\"geodesic\"===this.actualVisualizedMeasurement;return e={direct:t?this.horizontalLabel:this.segmentLabel,horizontal:t?this.segmentLabel:this.horizontalLabel,vertical:this.verticalLabel},{labels:e,stripeLength:this._segmentVisualElement.stripeLength}}_update(e=!0){switch(this.state){case\"destroyed\":case\"pending\":return}const t=this.dataObject.visible;switch(this._geometryDirty=e,this._geometryDirty&&t&&(this._updateGeometryAndViewMode(),this._geometryDirty=!1),this._viewMode){case\"none\":this._segmentVisualElement.visible=!1,this._triangleVisualElement.visible=!1,this._rightAngleQuad.visible=!1,this._projectedGeodesicLine.visible=!1,this._geodesicStartHint.visible=!1,this._geodesicEndHint.visible=!1;break;case\"segment\":this._segmentVisualElement.visible=t,this._triangleVisualElement.visible=!1,this._rightAngleQuad.visible=!1,this._projectedGeodesicLine.visible=!1,this._geodesicStartHint.visible=!1,this._geodesicEndHint.visible=!1;break;case\"segment-and-triangle\":this._segmentVisualElement.visible=t,this._triangleVisualElement.visible=t,this._rightAngleQuad.visible=t,this._projectedGeodesicLine.visible=!1,this._geodesicStartHint.visible=!1,this._geodesicEndHint.visible=!1;break;case\"segment-and-projection\":this._segmentVisualElement.visible=t,this._projectedGeodesicLine.visible=!0,this._geodesicStartHint.visible=!0,this._geodesicEndHint.visible=!0}this._updateLabels()}destroy(){switch(this.state){case\"destroyed\":case\"pending\":return}this._handles.destroy(),this._segmentVisualElement.destroy(),this._segmentVisualElement=null,this._triangleVisualElement.destroy(),this._triangleVisualElement=null,this._rightAngleQuad.destroy(),this._rightAngleQuad=null,this._projectedGeodesicLine.destroy(),this._projectedGeodesicLine=null,this._geodesicStartHint.destroy(),this._geodesicStartHint=null,this._geodesicEndHint.destroy(),this._geodesicEndHint=null,this._segmentLabel.destroy(),this._segmentLabel=null,this._verticalLabel.destroy(),this._verticalLabel=null,this._horizontalLabel.destroy(),this._horizontalLabel=null,this.set(\"view\",null),this._set(\"state\",\"destroyed\")}_updateGeometryAndViewMode(){const e=this.view,i=e.renderCoordsHelper;if(t(this.dataObject.startPoint)||t(this.dataObject.endPoint)||this.dataObject.startPoint.equals(this.dataObject.endPoint))return this._viewMode=\"none\",void(this._actualVisualizedMeasurement=\"auto\"===this._visualizedMeasurement?\"euclidean\":this._visualizedMeasurement);i.toRenderCoords(this.dataObject.startPoint,this._startPosition),i.toRenderCoords(this.dataObject.endPoint,this._endPosition);const s=this._getActualVisualElementsOrientation(),a=this._updateActualVisualizedMeasurement();this._viewMode=this._computeViewMode(a);let n=this._startPosition,r=this._endPosition;const o=\"above-segment\"===s?1:-1,l=o*(i.getAltitude(r)-i.getAltitude(n));l<0&&(n=this._endPosition,r=this._startPosition);const h=\"geodesic\"===a?new G(this._startPosition,this._endPosition,i.spatialReference):new R(this._startPosition,this._endPosition);switch(this._segmentVisualElement.geometry=h,this._updateSegmentStripeLength(),this._segmentLabelDisplayedMeasurement=a,this._viewMode){case\"segment\":this._segmentLabel.anchor=\"above-segment\"===s?\"top\":\"bottom\",this._segmentLabel.geometry={type:\"segment\",segment:h,sampleLocation:\"center\"};break;case\"segment-and-triangle\":{const t=this._cornerPosition;i.worldUpAtPosition(n,t),_(t,t,o*Math.abs(l)),p(t,t,n),this._triangleVisualElement.geometry=[[[n[0],n[1],n[2]],[t[0],t[1],t[2]],[r[0],r[1],r[2]]]],this._rightAngleQuad.geometry={previous:n,center:t,next:r};const a=new R(n,t),c=new R(t,r),d=W(n,r,t,s,e.state.camera);this._segmentLabel.geometry={type:\"segment\",segment:h,sampleLocation:\"center\"},this._segmentLabel.anchor=d.segment,this._verticalLabel.geometry={type:\"segment\",segment:a,sampleLocation:\"center\"},this._verticalLabel.anchor=d.vertical,this._horizontalLabel.geometry={type:\"segment\",segment:c,sampleLocation:\"center\"},this._horizontalLabel.anchor=d.horizontal;break}case\"segment-and-projection\":{g(this._startPositionAtSeaLevel,this._startPosition),g(this._endPositionAtSeaLevel,this._endPosition),i.setAltitude(0,this._startPositionAtSeaLevel),i.setAltitude(0,this._endPositionAtSeaLevel);const e=new G(this._startPositionAtSeaLevel,this._endPositionAtSeaLevel,i.spatialReference);this._projectedGeodesicLine.setGeometryFromSegment(e),this._geodesicStartHint.setGeometryFromSegment(new R(this._startPositionAtSeaLevel,this._startPosition)),this._geodesicEndHint.setGeometryFromSegment(new R(this._endPositionAtSeaLevel,this._endPosition)),this._segmentLabel.geometry={type:\"segment\",segment:e,sampleLocation:\"center\"},this._segmentLabel.anchor=\"above-segment\"===s?\"top\":\"bottom\";break}}}_updateLabels(){switch(this.state){case\"pending\":case\"destroyed\":return}const e=this.messages,i=this.dataObject.measurement;if(t(i)||!e)return this._segmentLabel.visible=!1,this._horizontalLabel.visible=!1,void(this._verticalLabel.visible=!1);const s={verticalDistance:\"\",horizontalDistance:\"\",euclideanDistance:\"\",geodesicDistance:\"\"},a=i.directDistance,n=i.horizontalDistance,r=i.verticalDistance,o=i.geodesicDistance,l=i.geodesicAngle;switch(this.dataObject.settings.unit){case\"metric\":s.euclideanDistance=a&&E(e,a),s.horizontalDistance=n&&E(e,n),s.verticalDistance=r&&D(e,r),s.geodesicDistance=o&&E(e,o);break;case\"imperial\":s.euclideanDistance=a&&f(e,a),s.horizontalDistance=n&&f(e,n),s.verticalDistance=r&&O(e,r),s.geodesicDistance=o&&f(e,o);break;case\"degrees\":{const t=l&&j(e,l,\"degrees\");s.euclideanDistance=t,s.horizontalDistance=t,s.geodesicDistance=t;break}case\"degrees-minutes-seconds\":s.horizontalDistance=l&&z(l);break;default:{const t=this.dataObject.settings.unit;s.euclideanDistance=a&&j(e,a,t),s.horizontalDistance=n&&j(e,n,t),s.verticalDistance=r&&j(e,r,t),s.geodesicDistance=o&&j(e,o,t);break}}this._segmentLabel.text=\"euclidean\"===this._segmentLabelDisplayedMeasurement?s.euclideanDistance:s.geodesicDistance,this._horizontalLabel.text=s.horizontalDistance,this._verticalLabel.text=s.verticalDistance;const h=this.dataObject.visible;switch(this._viewMode){case\"none\":this._segmentLabel.visible=!1,this._horizontalLabel.visible=!1,this._verticalLabel.visible=!1;break;case\"segment\":this._segmentLabel.visible=h,this._horizontalLabel.visible=!1,this._verticalLabel.visible=!1;break;case\"segment-and-triangle\":this._segmentLabel.visible=h,this._horizontalLabel.visible=h,this._verticalLabel.visible=h;break;case\"segment-and-projection\":this._segmentLabel.visible=h,this._horizontalLabel.visible=!1,this._verticalLabel.visible=!1}this.notifyChange(\"segmentLabel\"),this.notifyChange(\"horizontalLabel\"),this.notifyChange(\"verticalLabel\")}_updateSegmentStripeLength(){const e=Q(this.view,this.dataObject);i(e)?(this._segmentVisualElement.stripeLength=e,this._segmentVisualElement.stripesEnabled=!0):this._segmentVisualElement.stripesEnabled=!1}_computeViewMode(e){const i=this.dataObject,s=i.measurement;if(\"geodesic\"===e){if(!x(i,this.geodesicDistanceThreshold))return\"segment\";if(F(this.view,this._startPosition)||F(this.view,this._endPosition))return\"segment-and-projection\"}if(t(s))return\"segment\";return Math.min(s.verticalDistance.value/s.horizontalDistance.value,s.horizontalDistance.value/s.verticalDistance.value)<this.triangleCollapseRatioThreshold?\"segment\":\"segment-and-triangle\"}_getActualVisualElementsOrientation(){return i(this._triangleOrientationOverride)?this._triangleOrientationOverride:\"auto\"===this.visualElementsOrientation?this.view.state.camera.aboveGround?\"above-segment\":\"below-segment\":this.visualElementsOrientation}_updateActualVisualizedMeasurement(){if(\"auto\"===this._visualizedMeasurement){this._actualVisualizedMeasurement=\"euclidean\";const e=this.dataObject.settings.unit;\"degrees\"!==e&&\"degrees-minutes-seconds\"!==e||(this._actualVisualizedMeasurement=\"geodesic\"),x(this.dataObject,this.geodesicDistanceThreshold)&&(this._actualVisualizedMeasurement=\"geodesic\")}else this._actualVisualizedMeasurement=this._visualizedMeasurement;return this._actualVisualizedMeasurement}_updateMessageBundle(){u(\"esri/core/t9n/Units\").then((e=>{this.messages=e,this.view&&this._updateLabels()}))}};function x(e,t){return i(e.measurement)&&e.measurement.horizontalDistance&&e.measurement.horizontalDistance.value>t}function F(e,t){if(!e.state)return!1;const i=e.state.camera,s=e.renderCoordsHelper,a=i.computeScreenPixelSizeAt(t);return s.getAltitude(t)/a>=10}function W(e,t,i,s,a){const n=J,r=K;a.projectToRenderScreen(i,n),a.projectToRenderScreen(t,r);const l={segment:\"bottom\",horizontal:\"top\",vertical:n[0]<r[0]?\"left\":\"right\"};{const s=N,n=X;if(A(e,i,s,a),A(e,t,n,a),S(s,n)>=q)l.segment=o(s[1])===o(n[1])?k(l.vertical):l.vertical;else{const e=Y;A(i,t,e,a),S(e,n)>=q&&(l.segment=o(e[0])===o(n[0])?k(l.horizontal):l.horizontal)}}if(\"below-segment\"===s){const e=e=>\"top\"===e?\"bottom\":\"top\";l.segment=e(l.segment),l.horizontal=e(l.horizontal),l.vertical=e(l.vertical)}return l}function Q(e,t){let s=null;if(i(t.measurement)){const e=t.measurement.directDistance;switch(t.settings.unit){case\"metric\":s=e&&e.toUnit(\"meters\");break;case\"imperial\":s=e&&e.toUnit(L(e.value,e.unit));break;case\"degrees\":case\"degrees-minutes-seconds\":{const e=t.measurement.geodesicAngle;s=e&&e.toUnit(\"degrees\");break}default:s=e&&e.toUnit(t.settings.unit)}}if(s){let t=1;return t=l(s.value/30),t*=\"degrees\"===s.unit?b(e.spatialReference).metersPerDegree:w(1,s.unit,\"meters\"),t}return null}e([s({readOnly:!0})],U.prototype,\"state\",void 0),e([s()],U.prototype,\"ready\",null),e([s()],U.prototype,\"messages\",void 0),e([s()],U.prototype,\"view\",void 0),e([s()],U.prototype,\"dataObject\",void 0),e([s()],U.prototype,\"viewMode\",null),e([s()],U.prototype,\"segmentLabel\",null),e([s()],U.prototype,\"horizontalLabel\",null),e([s()],U.prototype,\"verticalLabel\",null),U=e([a(\"esri.views.3d.interactive.graphics.DirectLineMeasurement3D.DirectLineMeasurement3DView\")],U);const I=P(1,.5,0,.75),B={laserLineGlowColor:[1,.5,0],laserLineGlowWidth:8,laserLineGlowFalloff:8,laserLineInnerColor:[1,1,1],laserLineInnerWidth:.75,laserLineGlobalAlpha:.75,laserLineEnabled:!0,handleColor:[1,.5,0],handleOpacity:.5,handleRadius:5,triangleColor:I,triangleLineWidth:3,triangleCornerSize:32,triangleSubdivisions:128,arrowWidth:16,arrowOutlineColor:[1,.5,0,1],arrowOutlineWidth:.2,arrowStripeEvenColor:[1,1,1,1],arrowStripeOddColor:[1,.5,0,1],arrowStripeLength:16,arrowSubdivisions:128,geodesicProjectionLineWidth:2,geodesicProjectionLineColor:I,guideLineWidth:2,guideLineColor:I,guideStippleLengthPixels:6,labelDistance:25,direcLabelFontSize:16,horizontalLabelFontSize:12,verticalLabelFontSize:12},q=Math.cos(h(12)),J=c(),K=c(),N=d(),X=d(),Y=d();export{U as DirectLineMeasurement3DView};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nfunction n(){return new Float32Array(4)}function r(n){const r=new Float32Array(4);return r[0]=n[0],r[1]=n[1],r[2]=n[2],r[3]=n[3],r}function t(n,r,t,a){const e=new Float32Array(4);return e[0]=n,e[1]=r,e[2]=t,e[3]=a,e}function a(n,r){return new Float32Array(n,r,4)}function e(){return n()}function u(){return t(1,1,1,1)}function o(){return t(1,0,0,0)}function s(){return t(0,1,0,0)}function c(){return t(0,0,1,0)}function i(){return t(0,0,0,1)}const f=e(),l=u(),_=o(),w=s(),N=c(),U=i();var y=Object.freeze({__proto__:null,create:n,clone:r,fromValues:t,createView:a,zeros:e,ones:u,unitX:o,unitY:s,unitZ:c,unitW:i,ZEROS:f,ONES:l,UNIT_X:_,UNIT_Y:w,UNIT_Z:N,UNIT_W:U});export{l as O,_ as U,f as Z,r as a,a as b,n as c,s as d,c as e,t as f,i as g,w as h,N as i,U as j,u as o,o as u,y as v,e as z};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{glsl as v}from\"../../shaderModules/interfaces.js\";function e(e,o){o.vvInstancingEnabled&&(o.vvSize||o.vvColor)&&e.attributes.add(\"instanceFeatureAttribute\",\"vec4\"),o.vvSize?(e.vertex.uniforms.add(\"vvSizeMinSize\",\"vec3\"),e.vertex.uniforms.add(\"vvSizeMaxSize\",\"vec3\"),e.vertex.uniforms.add(\"vvSizeOffset\",\"vec3\"),e.vertex.uniforms.add(\"vvSizeFactor\",\"vec3\"),e.vertex.uniforms.add(\"vvSymbolRotationMatrix\",\"mat3\"),e.vertex.uniforms.add(\"vvSymbolAnchor\",\"vec3\"),e.vertex.code.add(v`\n      vec3 vvScale(vec4 _featureAttribute) {\n        return clamp(vvSizeOffset + _featureAttribute.x * vvSizeFactor, vvSizeMinSize, vvSizeMaxSize);\n      }\n\n      vec4 vvTransformPosition(vec3 position, vec4 _featureAttribute) {\n        return vec4(vvSymbolRotationMatrix * ( vvScale(_featureAttribute) * (position + vvSymbolAnchor)), 1.0);\n      }\n    `),e.vertex.code.add(v`\n      const float eps = 1.192092896e-07;\n      vec4 vvTransformNormal(vec3 _normal, vec4 _featureAttribute) {\n        vec3 vvScale = clamp(vvSizeOffset + _featureAttribute.x * vvSizeFactor, vvSizeMinSize + eps, vvSizeMaxSize);\n        return vec4(vvSymbolRotationMatrix * _normal / vvScale, 1.0);\n      }\n\n      ${o.vvInstancingEnabled?v`\n      vec4 vvLocalNormal(vec3 _normal) {\n        return vvTransformNormal(_normal, instanceFeatureAttribute);\n      }\n\n      vec4 localPosition() {\n        return vvTransformPosition(position, instanceFeatureAttribute);\n      }`:\"\"}\n    `)):e.vertex.code.add(v`\n      vec4 localPosition() { return vec4(position, 1.0); }\n\n      vec4 vvLocalNormal(vec3 _normal) { return vec4(_normal, 1.0); }\n    `),o.vvColor?(e.vertex.constants.add(\"vvColorNumber\",\"int\",8),e.vertex.code.add(v`\n      uniform float vvColorValues[vvColorNumber];\n      uniform vec4 vvColorColors[vvColorNumber];\n\n      vec4 vvGetColor(vec4 featureAttribute, float values[vvColorNumber], vec4 colors[vvColorNumber]) {\n        float value = featureAttribute.y;\n        if (value <= values[0]) {\n          return colors[0];\n        }\n\n        for (int i = 1; i < vvColorNumber; ++i) {\n          if (values[i] >= value) {\n            float f = (value - values[i-1]) / (values[i] - values[i-1]);\n            return mix(colors[i-1], colors[i], f);\n          }\n        }\n        return colors[vvColorNumber - 1];\n      }\n\n      ${o.vvInstancingEnabled?v`\n      vec4 vvColor() {\n        return vvGetColor(instanceFeatureAttribute, vvColorValues, vvColorColors);\n      }`:\"\"}\n    `)):e.vertex.code.add(v`\n      vec4 vvColor() { return vec4(1.0); }\n    `)}!function(v){function e(v,e){e.vvSizeEnabled&&(v.setUniform3fv(\"vvSizeMinSize\",e.vvSizeMinSize),v.setUniform3fv(\"vvSizeMaxSize\",e.vvSizeMaxSize),v.setUniform3fv(\"vvSizeOffset\",e.vvSizeOffset),v.setUniform3fv(\"vvSizeFactor\",e.vvSizeFactor)),e.vvColorEnabled&&(v.setUniform1fv(\"vvColorValues\",e.vvColorValues),v.setUniform4fv(\"vvColorColors\",e.vvColorColors))}function o(v,o){e(v,o),o.vvOpacityEnabled&&(v.setUniform1fv(\"vvOpacityValues\",o.vvOpacityValues),v.setUniform1fv(\"vvOpacityOpacities\",o.vvOpacityOpacities))}function r(v,o){e(v,o),o.vvSizeEnabled&&(v.setUniform3fv(\"vvSymbolAnchor\",o.vvSymbolAnchor),v.setUniformMatrix3fv(\"vvSymbolRotationMatrix\",o.vvSymbolRotationMatrix))}v.bindUniforms=e,v.bindUniformsWithOpacity=o,v.bindUniformsForSymbols=r}(e||(e={}));export{e as VisualVariables};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{isSome as e,isNone as s}from\"../../../../core/maybe.js\";import{c as r}from\"../../../../chunks/mat4.js\";import{a as t}from\"../../../../chunks/mat4f64.js\";import{Object3D as o}from\"../../webgl-engine/lib/Object3D.js\";import{WebGLLayer as i}from\"../../webgl-engine/lib/WebGLLayer.js\";import{VisualElement as c}from\"./VisualElement.js\";class a extends c{constructor(e){super(e.view),this._resources=null,this._transform=t()}get object(){return e(this._resources)?this._resources.object:null}get transform(){return this._transform}set transform(s){r(this._transform,s),e(this._resources)&&(this._resources.object.transformation=this._transform,this._resources.layer.commit())}recreate(){this.attached&&this.createResources()}recreateGeometry(){if(s(this._resources))return;const e=this._resources.object,r=this.view._stage;r.removeMany(e.geometries),e.removeAllGeometries(),this.createGeometries(e),this.visible||e.setVisible(this.visible),r.addMany(e.geometries),this._resources.layer.commit()}createResources(){this.destroyResources();const e=this.view._stage;if(!e)return;const s=new i({isPickable:!1});e.add(s);const r=new o({castShadow:!1});r.transformation=this._transform,this.createExternalResources(),this.createGeometries(r),e.addMany(r.geometries),this.forEachExternalMaterial((s=>e.add(s))),e.add(r),s.add(r),s.commit(),this.visible||(r.setVisible(!1),s.commit()),this._resources={layer:s,object:r}}destroyResources(){const e=this.view._stage;!s(this._resources)&&e&&(e.remove(this._resources.object),e.remove(this._resources.layer),this.forEachExternalMaterial((s=>{e.remove(s),s.dispose()})),e.removeMany(this._resources.object.geometries),this._resources.object.dispose(),this.destroyExternalResources(),this._resources=null)}updateVisibility(e){s(this._resources)||(this._resources.object.setVisible(e),this._resources.layer.commit())}}export{a as Object3DVisualElement};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{a as v}from\"../../../../chunks/mat3f64.js\";import{f as a}from\"../../../../chunks/vec3f32.js\";var e;!function(e){e.Default={vvSizeEnabled:!1,vvSizeMinSize:a(1,1,1),vvSizeMaxSize:a(100,100,100),vvSizeOffset:a(0,0,0),vvSizeFactor:a(1,1,1),vvSizeValue:a(1,1,1),vvColorEnabled:!1,vvColorValues:[0,0,0,0,0,0,0,0],vvColorColors:[1,0,0,0,1,0,0,0,1,0,0,0,1,0,0,0,1,0,0,0,1,0,0,0,1,0,0,0,1,0,0,0],vvOpacityEnabled:!1,vvOpacityValues:[0,0,0,0,0,0,0,0],vvOpacityOpacities:[1,1,1,1,1,1,1,1],vvSymbolAnchor:[0,0,0],vvSymbolRotationMatrix:v()}}(e||(e={}));var o=e;export default o;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../../chunks/tslib.es6.js\";import{isSome as t,unwrap as i,unwrapOr as r}from\"../../../../core/maybe.js\";import{ReloadableShaderModule as o}from\"../core/shaderTechnique/ReloadableShaderModule.js\";import{ShaderTechnique as s}from\"../core/shaderTechnique/ShaderTechnique.js\";import{ShaderTechniqueConfiguration as n,parameter as l}from\"../core/shaderTechnique/ShaderTechniqueConfiguration.js\";import p from\"../../../webgl/Program.js\";import{makePipelineState as a,defaultDepthWriteParams as d,defaultColorWriteParams as c}from\"../../../webgl/renderState.js\";import{View as u}from\"../core/shaderLibrary/util/View.glsl.js\";import{Slice as h}from\"../core/shaderLibrary/Slice.glsl.js\";import{OutputHighlight as f}from\"../core/shaderLibrary/output/OutputHighlight.glsl.js\";import{VisualVariables as m}from\"../core/shaderLibrary/shading/VisualVariables.glsl.js\";import{blendingDefault as g,OITBlending as b,OITDepthTest as v,OITDepthWrite as y,OITPolygonOffset as T}from\"../lib/OrderIndependentTransparency.js\";import{bindMultipassTerrainUniforms as E}from\"../core/shaderLibrary/shading/MultipassTerrainTest.glsl.js\";import{stencilWriteMaskOn as P,stencilToolMaskBaseParams as O,stencilBaseAllZerosParams as x,depthCompareAlways as C,stencilToolTransparentOccluderParams as S,stencilWriteMaskOff as j,stencilToolMaskOccluderParams as W,depthCompareLess as R}from\"../lib/StencilUtils.js\";import{R as U}from\"../../../../chunks/RibbonLine.glsl.js\";const w={position:0,subdivisionFactor:1,uv0:2,auxpos1:3,auxpos2:4,size:6,sizeFeatureAttribute:6,color:5,colorFeatureAttribute:5,opacityFeatureAttribute:7};class z extends s{constructor(e,t){super(e,t),this.stipplePattern=null,this.stippleTextureBind=null,this.stippleTextureRepository=e.stippleTextureRepository}initializeProgram(e){const t=z.shader.get(),i=this.configuration,r=t.build({OITEnabled:0===i.transparencyPassType,output:i.output,slicePlaneEnabled:i.slicePlaneEnabled,sliceHighlightDisabled:!1,sliceEnabledForVertexPrograms:!1,stippleEnabled:i.stippleEnabled,stippleOffColorEnabled:i.stippleOffColorEnabled,stippleUVMaxEnabled:i.stippleIntegerRepeatsEnabled,stippleIntegerRepeatsEnabled:i.stippleIntegerRepeatsEnabled,roundCaps:i.roundCaps,roundJoins:i.roundJoins,vvColor:i.vvColor,vvSize:i.vvSize,vvInstancingEnabled:!0,vvOpacity:i.vvOpacity,falloffEnabled:i.falloffEnabled,innerColorEnabled:i.innerColorEnabled,multipassTerrainEnabled:i.multipassTerrainEnabled,cullAboveGround:i.cullAboveGround});return new p(e.rctx,r.generateSource(\"vertex\"),r.generateSource(\"fragment\"),w)}dispose(){super.dispose(),this.stippleTextureRepository.release(this.stipplePattern),this.stipplePattern=null,this.stippleTextureBind=null}bindPass(e,o,s){if(u.bindProjectionMatrix(this.program,s.camera.projectionMatrix),4===this.configuration.output&&f.bindOutputHighlight(e,this.program,s),s.multipassTerrainEnabled&&(this.program.setUniform2fv(\"inverseViewport\",s.inverseViewport),E(this.program,e,s)),this.program.setUniform1f(\"intrinsicWidth\",o.width),this.program.setUniform4fv(\"intrinsicColor\",o.color),this.program.setUniform1f(\"miterLimit\",\"miter\"!==o.join?0:o.miterLimit),this.program.setUniform2fv(\"cameraNearFar\",s.camera.nearFar),this.program.setUniform1f(\"pixelRatio\",s.camera.pixelRatio),this.program.setUniform2f(\"screenSize\",s.camera.fullViewport[2],s.camera.fullViewport[3]),m.bindUniformsWithOpacity(this.program,o),this.stipplePattern!==o.stipplePattern){const e=o.stipplePattern;this.stippleTextureBind=this.stippleTextureRepository.swap(this.stipplePattern,e),this.stipplePattern=e}if(this.configuration.stippleEnabled){const r=t(this.stippleTextureBind)?this.stippleTextureBind(e,0)*s.camera.pixelRatio:1;if(this.program.setUniform1i(\"stipplePatternTexture\",0),this.program.setUniform1f(\"stipplePatternPixelSizeInv\",1/r),this.configuration.stippleOffColorEnabled){const e=i(o.stippleOffColor);this.program.setUniform4f(\"stippleOffColor\",e[0],e[1],e[2],e.length>3?e[3]:1)}}this.configuration.falloffEnabled&&this.program.setUniform1f(\"falloff\",o.falloff),this.configuration.innerColorEnabled&&(this.program.setUniform4fv(\"innerColor\",r(o.innerColor,o.color)),this.program.setUniform1f(\"innerWidth\",o.innerWidth*s.camera.pixelRatio))}bindDraw(e){u.bindView(this.program,e),h.bindUniformsWithOrigin(this.program,this.configuration,e)}setPipelineState(e,t){const i=this.configuration,r=3===e,o=2===e;return a({blending:0===i.output||7===i.output?r?g:b(e):null,depthTest:{func:v(e)},depthWrite:r?!i.transparent&&i.writeDepth&&d:y(e),colorWrite:c,stencilWrite:i.sceneHasOcludees?P:null,stencilTest:i.sceneHasOcludees?t?O:x:null,polygonOffset:r||o?i.polygonOffset&&V:T})}initializePipeline(){const e=this.configuration,t=e.polygonOffset&&V;return e.occluder&&(this._occluderPipelineTransparent=a({blending:g,polygonOffset:t,depthTest:C,depthWrite:null,colorWrite:c,stencilWrite:null,stencilTest:S}),this._occluderPipelineOpaque=a({blending:g,polygonOffset:t,depthTest:C,depthWrite:null,colorWrite:c,stencilWrite:j,stencilTest:W}),this._occluderPipelineMaskWrite=a({blending:null,polygonOffset:t,depthTest:R,depthWrite:null,colorWrite:null,stencilWrite:P,stencilTest:O})),this._occludeePipelineState=this.setPipelineState(this.configuration.transparencyPassType,!0),this.setPipelineState(this.configuration.transparencyPassType,!1)}get primitiveType(){return 5}getPipelineState(e,t){return t?this._occludeePipelineState:this.configuration.occluder?11===e?this._occluderPipelineTransparent:10===e?this._occluderPipelineOpaque:this._occluderPipelineMaskWrite:this.pipeline}}z.shader=new o(U,(()=>import(\"./RibbonLine.glsl.js\")));const V={factor:0,units:-4};class I extends n{constructor(){super(...arguments),this.output=0,this.occluder=!1,this.slicePlaneEnabled=!1,this.transparent=!1,this.polygonOffset=!1,this.writeDepth=!1,this.stippleEnabled=!1,this.stippleOffColorEnabled=!1,this.stippleIntegerRepeatsEnabled=!1,this.roundCaps=!1,this.roundJoins=!1,this.vvSize=!1,this.vvColor=!1,this.vvOpacity=!1,this.falloffEnabled=!1,this.innerColorEnabled=!1,this.sceneHasOcludees=!1,this.transparencyPassType=3,this.multipassTerrainEnabled=!1,this.cullAboveGround=!0}}e([l({count:8})],I.prototype,\"output\",void 0),e([l()],I.prototype,\"occluder\",void 0),e([l()],I.prototype,\"slicePlaneEnabled\",void 0),e([l()],I.prototype,\"transparent\",void 0),e([l()],I.prototype,\"polygonOffset\",void 0),e([l()],I.prototype,\"writeDepth\",void 0),e([l()],I.prototype,\"stippleEnabled\",void 0),e([l()],I.prototype,\"stippleOffColorEnabled\",void 0),e([l()],I.prototype,\"stippleIntegerRepeatsEnabled\",void 0),e([l()],I.prototype,\"roundCaps\",void 0),e([l()],I.prototype,\"roundJoins\",void 0),e([l()],I.prototype,\"vvSize\",void 0),e([l()],I.prototype,\"vvColor\",void 0),e([l()],I.prototype,\"vvOpacity\",void 0),e([l()],I.prototype,\"falloffEnabled\",void 0),e([l()],I.prototype,\"innerColorEnabled\",void 0),e([l()],I.prototype,\"sceneHasOcludees\",void 0),e([l({count:4})],I.prototype,\"transparencyPassType\",void 0),e([l()],I.prototype,\"multipassTerrainEnabled\",void 0),e([l()],I.prototype,\"cullAboveGround\",void 0);export{z as RibbonLineTechnique,I as RibbonLineTechniqueConfiguration,w as ribbonVertexAttributeLocations};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{isSome as e}from\"../../../../core/maybe.js\";import t from\"../../../../core/Logger.js\";import{clamp as i}from\"../../../../core/mathUtils.js\";import{createRenderScreenPointArray3 as s}from\"../../../../core/screenUtils.js\";import{c as r}from\"../../../../chunks/vec3f64.js\";import{s as n,f as a,d as o,a as u,b as c,g as l,l as h,k as p,i as m}from\"../../../../chunks/vec3.js\";import{c as d}from\"../../../../chunks/vec2.js\";import{newLayout as f}from\"../../support/buffer/InterleavedLayout.js\";import{plane as v,lineSegment as g}from\"../../support/geometryUtils.js\";import{isTranslationMatrix as b}from\"../lib/Util.js\";import{computeAttachmentOriginLines as C}from\"../lib/geometryDataUtils.js\";import{isInstanceHidden as q}from\"./renderers/utils.js\";import S from\"../lib/GLMaterial.js\";import{Material as A,materialParametersDefaults as y}from\"../lib/Material.js\";import P from\"./VisualVariableMaterialParameters.js\";import{ribbonVertexAttributeLocations as x,RibbonLineTechniqueConfiguration as z,RibbonLineTechnique as E}from\"../shaders/RibbonLineTechnique.js\";const j=t.getLogger(\"esri.views.3d.webgl-engine.materials.RibbonLineMaterial\");class O extends A{constructor(e){super(e,R),this._vertexAttributeLocations=x,this.techniqueConfig=new z,this.layout=this.createLayout()}isClosed(e,t){return M(this.params,e,t)}dispose(){}getPassParameters(){return this.params}getTechniqueConfig(t,i){this.techniqueConfig.output=t;const s=e(this.params.stipplePattern);return this.techniqueConfig.stippleEnabled=s,this.techniqueConfig.stippleIntegerRepeatsEnabled=s&&this.params.stippleIntegerRepeats,this.techniqueConfig.stippleOffColorEnabled=s&&e(this.params.stippleOffColor),this.techniqueConfig.slicePlaneEnabled=this.params.slicePlaneEnabled,this.techniqueConfig.sceneHasOcludees=this.params.sceneHasOcludees,this.techniqueConfig.roundJoins=\"round\"===this.params.join,this.techniqueConfig.roundCaps=\"round\"===this.params.cap,this.techniqueConfig.transparent=this.params.transparent,this.techniqueConfig.polygonOffset=this.params.polygonOffset,this.techniqueConfig.writeDepth=this.params.writeDepth,this.techniqueConfig.vvColor=this.params.vvColorEnabled,this.techniqueConfig.vvOpacity=this.params.vvOpacityEnabled,this.techniqueConfig.vvSize=this.params.vvSizeEnabled,this.techniqueConfig.innerColorEnabled=this.params.innerWidth>0&&e(this.params.innerColor),this.techniqueConfig.falloffEnabled=this.params.falloff>0,this.techniqueConfig.occluder=8===this.params.renderOccluded,this.techniqueConfig.transparencyPassType=i?i.transparencyPassType:3,this.techniqueConfig.multipassTerrainEnabled=!!i&&i.multipassTerrainEnabled,this.techniqueConfig.cullAboveGround=!i||i.cullAboveGround,this.techniqueConfig}intersect(e,t,i,s,r,n,a,o,u){u?this.intersectDrapedLineGeometry(e,s,n,a):this.intersectLineGeometry(e,t,i,s,this.params.width,a)}intersectDrapedLineGeometry(e,t,s,r){if(!t.options.selectionMode)return;const n=e.vertexAttributes.get(\"position\").data,a=e.vertexAttributes.get(\"size\");let o=this.params.width;if(this.params.vvSizeEnabled){const t=e.vertexAttributes.get(\"sizeFeatureAttribute\").data[0];o*=i(this.params.vvSizeOffset[0]+t*this.params.vvSizeFactor[0],this.params.vvSizeMinSize[0],this.params.vvSizeMaxSize[0])}else a&&(o*=a.data[0]);const u=s[0],c=s[1],l=(o/2+4)*e.screenToWorldRatio;let h=Number.MAX_VALUE;for(let p=0;p<n.length-5;p+=3){const e=n[p],t=n[p+1],s=u-e,r=c-t,a=n[p+3]-e,o=n[p+4]-t,l=i((a*s+o*r)/(a*a+o*o),0,1),m=a*l-s,d=o*l-r,f=m*m+d*d;f<h&&(h=f)}h<l*l&&r()}intersectLineGeometry(e,t,s,r,m,f){if(!r.options.selectionMode||q(t))return;if(!b(s))return void j.error(\"intersection assumes a translation-only matrix\");const C=e.vertexAttributes,S=C.get(\"position\").data;let A=m;if(this.params.vvSizeEnabled){const e=C.get(\"sizeFeatureAttribute\").data[0];A*=i(this.params.vvSizeOffset[0]+e*this.params.vvSizeFactor[0],this.params.vvSizeMinSize[0],this.params.vvSizeMaxSize[0])}else C.has(\"size\")&&(A*=C.get(\"size\").data[0]);const y=r.camera,P=_;d(P,r.point);const x=A*y.pixelRatio/2+4*y.pixelRatio;n(Z[0],P[0]-x,P[1]+x,0),n(Z[1],P[0]+x,P[1]+x,0),n(Z[2],P[0]+x,P[1]-x,0),n(Z[3],P[0]-x,P[1]-x,0);for(let i=0;i<4;i++)if(!y.unprojectFromRenderScreen(Z[i],$[i]))return;v.fromPoints(y.eye,$[0],$[1],ee),v.fromPoints(y.eye,$[1],$[2],te),v.fromPoints(y.eye,$[2],$[3],ie),v.fromPoints(y.eye,$[3],$[0],se);let z=Number.MAX_VALUE;const E=T(this.params,C,e.indices)?S.length-2:S.length-5;for(let i=0;i<E;i+=3){G[0]=S[i]+s[12],G[1]=S[i+1]+s[13],G[2]=S[i+2]+s[14];const e=(i+3)%S.length;if(V[0]=S[e]+s[12],V[1]=S[e+1]+s[13],V[2]=S[e+2]+s[14],v.signedDistance(ee,G)<0&&v.signedDistance(ee,V)<0||v.signedDistance(te,G)<0&&v.signedDistance(te,V)<0||v.signedDistance(ie,G)<0&&v.signedDistance(ie,V)<0||v.signedDistance(se,G)<0&&v.signedDistance(se,V)<0)continue;if(y.projectToRenderScreen(G,k),y.projectToRenderScreen(V,H),k[2]<0&&H[2]>0){a(B,G,V);const e=y.frustum,t=-v.signedDistance(e[4],G)/o(B,v.normal(e[4]));u(B,B,t),c(G,G,B),y.projectToRenderScreen(G,k)}else if(k[2]>0&&H[2]<0){a(B,V,G);const e=y.frustum,t=-v.signedDistance(e[4],V)/o(B,v.normal(e[4]));u(B,B,t),c(V,V,B),y.projectToRenderScreen(V,H)}else if(k[2]<0&&H[2]<0)continue;k[2]=0,H[2]=0;const t=g.distance2(g.fromPoints(k,H,N),P);t<z&&(z=t,l(W,G),l(I,V))}const O=r.rayBeginPoint,L=r.rayEndPoint;if(z<x*x){let e=Number.MAX_VALUE;if(g.closestLineSegmentPoint(g.fromPoints(W,I,N),g.fromPoints(O,L,X),J)){a(J,J,O);const t=h(J);u(J,J,1/t),e=t/p(O,L)}f(e,J)}}computeAttachmentOrigin(e,t){const i=e.vertexAttributes;if(!i)return null;const s=e.indices,r=i.get(\"position\");return C(r,s?s.get(\"position\"):null,s&&T(this.params,i,s),t)}createLayout(){const e=f().vec3f(\"position\").f32(\"subdivisionFactor\").vec2f(\"uv0\").vec3f(\"auxpos1\").vec3f(\"auxpos2\");return this.params.vvSizeEnabled?e.f32(\"sizeFeatureAttribute\"):e.f32(\"size\"),this.params.vvColorEnabled?e.f32(\"colorFeatureAttribute\"):e.vec4f(\"color\"),this.params.vvOpacityEnabled&&e.f32(\"opacityFeatureAttribute\"),e}createBufferWriter(){return new D(this.layout,this.params)}getGLMaterial(e){return 0===e.output||7===e.output||4===e.output||1===e.output?new L(e):void 0}validateParameterValues(e){\"miter\"!==e.join&&(e.miterLimit=0),this.requiresTransparent(e)&&(e.transparent=!0)}requiresTransparent(e){return!!((e.color&&e.color[3])<1||e.innerWidth>0&&this.colorRequiresTransparent(e.innerColor)||e.stipplePattern&&this.colorRequiresTransparent(e.stippleOffColor)||e.falloff>0)}colorRequiresTransparent(t){return e(t)&&t[3]<1&&t[3]>0}}class L extends S{constructor(e){super(e),this.updateParameters()}updateParameters(e){this.technique=this.techniqueRep.acquireAndReleaseExisting(E,this.material.getTechniqueConfig(this.output,e),this.technique)}beginSlot(e){return this.technique.configuration.occluder?3===e||10===e||11===e:0===this.output||7===this.output?(this.targetSlot=this.technique.configuration.writeDepth?5:8,e===this.targetSlot):3===e}_updateOccludeeState(e){e.hasOccludees!==this.material.params.sceneHasOcludees&&this.material.setParameterValues({sceneHasOcludees:e.hasOccludees})}ensureParameters(e){0!==this.output&&7!==this.output||this._updateOccludeeState(e),this.updateParameters(e)}bind(e,t){e.bindProgram(this.technique.program),this.technique.bindPass(e,this.material.getPassParameters(),t)}getPipelineState(e,t){return this.technique.getPipelineState(e,t)}}const R={width:0,color:[1,1,1,1],join:\"miter\",cap:\"butt\",miterLimit:5,writeDepth:!0,polygonOffset:!1,stipplePattern:null,stippleIntegerRepeats:!1,stippleOffColor:null,slicePlaneEnabled:!1,vvFastUpdate:!1,transparent:!1,isClosed:!1,falloff:0,innerWidth:0,innerColor:null,sceneHasOcludees:!1,...y,...P.Default};class D{constructor(e,t){switch(this.params=t,this.numJoinSubdivisions=0,this.vertexBufferLayout=e,this.params.join){case\"miter\":case\"bevel\":this.numJoinSubdivisions=t.stipplePattern?1:0;break;case\"round\":this.numJoinSubdivisions=U}}isClosed(e){return T(this.params,e.vertexAttributes,e.indices)}numCapSubdivisions(e){if(this.isClosed(e))return 0;switch(this.params.cap){case\"butt\":return 0;case\"square\":return 1;case\"round\":return F}}allocate(e){return this.vertexBufferLayout.createBuffer(e)}elementCount(e){const t=2*this.numCapSubdivisions(e)+2,i=e.indices.get(\"position\").length/2+1,s=this.isClosed(e);let r=s?2:2*t;const n=s?0:1,a=s?i:i-1;if(e.vertexAttributes.has(\"subdivisions\")){const t=e.vertexAttributes.get(\"subdivisions\").data;for(let e=n;e<a;++e){r+=4+2*t[e]}}else{r+=(a-n)*(2*this.numJoinSubdivisions+4)}return r+=2,r}write(e,t,i,s){const r=K,a=Q,o=Y,u=t.vertexAttributes.get(\"position\").data,c=t.indices&&t.indices.get(\"position\"),h=this.numCapSubdivisions(t);c&&c.length!==2*(u.length/3-1)&&console.warn(\"RibbonLineMaterial does not support indices\");let p=null;t.vertexAttributes.has(\"subdivisions\")&&(p=t.vertexAttributes.get(\"subdivisions\").data);let d=1,f=0;this.params.vvSizeEnabled?f=t.vertexAttributes.get(\"sizeFeatureAttribute\").data[0]:t.vertexAttributes.has(\"size\")&&(d=t.vertexAttributes.get(\"size\").data[0]);let v=[1,1,1,1],g=0;this.params.vvColorEnabled?g=t.vertexAttributes.get(\"colorFeatureAttribute\").data[0]:t.vertexAttributes.has(\"color\")&&(v=t.vertexAttributes.get(\"color\").data);let b=0;this.params.vvOpacityEnabled&&(b=t.vertexAttributes.get(\"opacityFeatureAttribute\").data[0]);const C=u.length/3,q=e.transformation,S=new Float32Array(i.buffer),A=this.vertexBufferLayout.stride/4;let y=s*A;const P=y,x=(e,t,i,s,r,n,a)=>{if(S[y++]=t[0],S[y++]=t[1],S[y++]=t[2],S[y++]=s,S[y++]=r,S[y++]=n,S[y++]=e[0],S[y++]=e[1],S[y++]=e[2],S[y++]=i[0],S[y++]=i[1],S[y++]=i[2],this.params.vvSizeEnabled?S[y++]=f:S[y++]=d,this.params.vvColorEnabled)S[y++]=g;else{const e=Math.min(4*a,v.length-4);S[y++]=v[e+0],S[y++]=v[e+1],S[y++]=v[e+2],S[y++]=v[e+3]}this.params.vvOpacityEnabled&&(S[y++]=b)};y+=A,n(a,u[0],u[1],u[2]),q&&m(a,a,q);const z=this.isClosed(t);if(z){const e=u.length-3;n(r,u[e],u[e+1],u[e+2]),q&&m(r,r,q)}else{l(r,a),n(o,u[3],u[4],u[5]),q&&m(o,o,q);for(let e=0;e<h;++e){const t=1-e/h;x(r,a,o,t,1,-4,0),x(r,a,o,t,1,4,0)}x(r,a,o,0,0,-4,0),x(r,a,o,0,0,4,0),l(r,a),l(a,o)}const E=z?C:C-1;for(let j=z?0:1;j<E;j++){const e=(j+1)%C*3;n(o,u[e+0],u[e+1],u[e+2]),q&&m(o,o,q),x(r,a,o,0,1,-1,j),x(r,a,o,0,1,1,j);const t=p?p[j]:this.numJoinSubdivisions;for(let i=0;i<t;++i){const e=(i+1)/(t+1);x(r,a,o,e,1,-2,j),x(r,a,o,e,1,2,j)}x(r,a,o,1,0,-2,j),x(r,a,o,1,0,2,j),l(r,a),l(a,o)}if(z){y=w(S,P+A,S,y,2*A)}else{x(r,a,o,0,1,-5,E),x(r,a,o,0,1,5,E);for(let e=0;e<h;++e){const t=(e+1)/h;x(r,a,o,t,1,-5,E),x(r,a,o,t,1,5,E)}}w(S,P+A,S,P,A);y=w(S,y-A,S,y,A)}}function w(e,t,i,s,r){for(let n=0;n<r;n++)i[s++]=e[t++];return s}function T(e,t,i){return M(e,t.get(\"position\").data,i?i.get(\"position\"):null)}function M(e,t,i){return!!e.isClosed&&(i?i.length>2:t.length>6)}const F=3,U=1,G=r(),V=r(),B=r(),J=r(),_=r(),k=s(),H=s(),W=r(),I=r(),N=g.create(),X=g.create(),K=r(),Q=r(),Y=r(),Z=[s(),s(),s(),s()],$=[r(),r(),r(),r()],ee=v.create(),te=v.create(),ie=v.create(),se=v.create();export{O as RibbonLineMaterial};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{glsl as o}from\"../../shaderModules/interfaces.js\";function t(t){t.vertex.code.add(o`\n    const float PI = 3.141592653589793;\n  `),t.fragment.code.add(o`\n    const float PI = 3.141592653589793;\n    const float LIGHT_NORMALIZATION = 1.0 / PI;\n    const float INV_PI = 0.3183098861837907;\n    const float HALF_PI = 1.570796326794897;\n    `)}export{t as PiUtils};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nfunction n(n,r){for(const[o,t]of n)if(r(t,o))return!0;return!1}function r(n,r){for(const[o,t]of n)if(r(t,o))return t;return null}export{r as findInMap,n as someMap};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{glsl as e}from\"../../shaderModules/interfaces.js\";function p(e,p){e.constants.add(\"stippleAlphaColorDiscard\",\"float\",.001),e.constants.add(\"stippleAlphaHighlightDiscard\",\"float\",.5),p.stippleEnabled?t(e,p):l(e)}function t(p,t){p.vertex.uniforms.add(\"stipplePatternPixelSizeInv\",\"float\"),t.stippleUVMaxEnabled&&p.varyings.add(\"stipplePatternUvMax\",\"float\"),p.varyings.add(\"stipplePatternUv\",\"float\"),p.fragment.uniforms.add(\"stipplePatternTexture\",\"sampler2D\"),t.stippleOffColorEnabled&&p.fragment.uniforms.add(\"stippleOffColor\",\"vec4\"),p.fragment.code.add(e`\n  float getStippleAlpha() {\n    float stipplePatternUvClamped = stipplePatternUv * gl_FragCoord.w;\n    ${t.stippleUVMaxEnabled?\"stipplePatternUvClamped = clamp(stipplePatternUvClamped, 0.0, stipplePatternUvMax);\":\"\"}\n\n    return texture2D(stipplePatternTexture, vec2(mod(stipplePatternUvClamped, 1.0), 0.5)).a;\n  }`),t.stippleOffColorEnabled?p.fragment.code.add(e`\n    #define discardByStippleAlpha(stippleAlpha, threshold) {}\n    #define blendStipple(color, stippleAlpha) mix(color, stippleOffColor, stippleAlpha)\n    `):p.fragment.code.add(e`\n    #define discardByStippleAlpha(stippleAlpha, threshold) if (stippleAlpha < threshold) { discard; }\n    #define blendStipple(color, stippleAlpha) vec4(color.rgb, color.a * stippleAlpha)\n    `)}function l(p){p.fragment.code.add(e`\n  float getStippleAlpha() { return 1.0; }\n\n  #define discardByStippleAlpha(_stippleAlpha_, _threshold_) {}\n  #define blendStipple(color, _stippleAlpha_) color\n  `)}export{p as LineStipple};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{neverReached as e}from\"../../../../core/compilerUtils.js\";import{unwrapOr as t}from\"../../../../core/maybe.js\";import{c as n}from\"../../../../chunks/vec3f64.js\";import{c as o}from\"../../../../chunks/mat4.js\";import{projectBuffer as r,computeLinearTransformation as i}from\"../../../../geometry/projection.js\";import{a as s}from\"../../../../chunks/mat4f64.js\";import{isDehydratedPoint as a}from\"../../../../layers/graphics/dehydratedFeatures.js\";import{isSamplePosition as l,getElevationAtPoint as c}from\"../../support/ElevationProvider.js\";import{updateVertexAttributeAuxpos1w as u}from\"./graphicUtils.js\";function f(e,t,n,o,i,s,a,l,c,u,f){const m=j[f.mode];let p,d,g=0;if(r(e,t,n,o,c.spatialReference,i,l))return m.requiresAlignment(f)?(g=m.applyElevationAlignmentBuffer(o,i,s,a,l,c,u,f),p=s,d=a):(p=o,d=i),r(p,c.spatialReference,d,s,u.spatialReference,a,l)?g:void 0}function m(n,o,r,i,s){const u=(a(n)?n.z:l(n)?n.array[n.offset+2]:n[2])||0;switch(r.mode){case\"on-the-ground\":{const e=t(c(o,n,\"ground\"),0);return s&&(s.verticalDistanceToGround=0,s.sampledElevation=e),e}case\"relative-to-ground\":{const e=t(c(o,n,\"ground\"),0),a=r.geometryZWithOffset(u,i);return s&&(s.verticalDistanceToGround=a,s.sampledElevation=e),a+e}case\"relative-to-scene\":{const e=t(c(o,n,\"scene\"),0),a=r.geometryZWithOffset(u,i);return s&&(s.verticalDistanceToGround=a,s.sampledElevation=e),a+e}case\"absolute-height\":{const e=r.geometryZWithOffset(u,i);if(s){const r=t(c(o,n,\"ground\"),0);s.verticalDistanceToGround=e-r,s.sampledElevation=r}return e}default:return e(r.mode),0}}function p(e,t,n){return null==t||null==n?e.definedChanged:\"on-the-ground\"===t&&\"on-the-ground\"===n?e.staysOnTheGround:t===n||\"on-the-ground\"!==t&&\"on-the-ground\"!==n?T.UPDATE:e.onTheGroundChanged}function d(e){return\"relative-to-ground\"===e||\"relative-to-scene\"===e}function g(e){return\"absolute-height\"!==e}function v(e,t,n,r,s){const a=m(t,n,s,r,O);u(e,O.verticalDistanceToGround);const l=O.sampledElevation,c=o(x,e.transformation);C[0]=t.x,C[1]=t.y,C[2]=a;return i(t.spatialReference,C,c,r.spatialReference)?e.transformation=c:console.warn(\"Could not locate symbol object properly, it might be misplaced\"),l}function E(e,n,o,r,i,s){let a=0;const l=s.spatialReference;n*=3,r*=3;for(let c=0;c<i;++c){const i=e[n+0],c=e[n+1],u=e[n+2],f=t(s.getElevation(i,c,u,l,\"ground\"),0);a+=f,o[r+0]=i,o[r+1]=c,o[r+2]=f,n+=3,r+=3}return a/i}function h(e,n,o,r,i,s,a,l){let c=0;const u=l.calculateOffsetRenderUnits(a),f=l.featureExpressionInfoContext,m=s.spatialReference;n*=3,r*=3;for(let p=0;p<i;++p){const i=e[n+0],a=e[n+1],l=e[n+2],p=t(s.getElevation(i,a,l,m,\"ground\"),0);c+=p,o[r+0]=i,o[r+1]=a,o[r+2]=null==f?l+p+u:p+u,n+=3,r+=3}return c/i}function y(e,n,o,r,i,s,a,l){let c=0;const u=l.calculateOffsetRenderUnits(a),f=l.featureExpressionInfoContext,m=s.spatialReference;n*=3,r*=3;for(let p=0;p<i;++p){const i=e[n+0],a=e[n+1],l=e[n+2],p=t(s.getElevation(i,a,l,m,\"scene\"),0);c+=p,o[r+0]=i,o[r+1]=a,o[r+2]=null==f?l+p+u:p+u,n+=3,r+=3}return c/i}function A(e){const t=e.meterUnitOffset,n=e.featureExpressionInfoContext;return 0!==t||null!=n}function R(e,t,n,o,r,i,s,a){const l=a.calculateOffsetRenderUnits(s),c=a.featureExpressionInfoContext;t*=3,o*=3;for(let u=0;u<r;++u){const r=e[t+0],i=e[t+1],s=e[t+2];n[o+0]=r,n[o+1]=i,n[o+2]=null==c?s+l:l,t+=3,o+=3}return 0}var T;!function(e){e[e.NONE=0]=\"NONE\",e[e.UPDATE=1]=\"UPDATE\",e[e.RECREATE=2]=\"RECREATE\"}(T||(T={}));const j={\"absolute-height\":{applyElevationAlignmentBuffer:R,requiresAlignment:A},\"on-the-ground\":{applyElevationAlignmentBuffer:E,requiresAlignment:()=>!0},\"relative-to-ground\":{applyElevationAlignmentBuffer:h,requiresAlignment:()=>!0},\"relative-to-scene\":{applyElevationAlignmentBuffer:y,requiresAlignment:()=>!0}},x=s(),O={verticalDistanceToGround:0,sampledElevation:0},C=n();export{T as SymbolUpdateType,v as applyElevationAlignmentForHUD,f as applyPerVertexElevationAlignment,p as elevationModeChangeUpdateType,m as evaluateElevationAlignmentAtPoint,d as needsElevationUpdates2D,g as needsElevationUpdates3D};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{glsl as e}from\"../views/3d/webgl-engine/core/shaderModules/interfaces.js\";import{ShaderBuilder as t}from\"../views/3d/webgl-engine/core/shaderModules/ShaderBuilder.js\";import{ColorConversion as i}from\"../views/3d/webgl-engine/core/shaderLibrary/util/ColorConversion.glsl.js\";import{Slice as r}from\"../views/3d/webgl-engine/core/shaderLibrary/Slice.glsl.js\";import{ReadLinearDepth as n}from\"../views/3d/webgl-engine/core/shaderLibrary/output/ReadLinearDepth.glsl.js\";import{symbolAlphaCutoff as o}from\"../views/3d/webgl-engine/core/shaderLibrary/util/AlphaDiscard.glsl.js\";import{multipassTerrainTest as a}from\"../views/3d/webgl-engine/core/shaderLibrary/shading/MultipassTerrainTest.glsl.js\";import{RibbonVertexPosition as s}from\"../views/3d/webgl-engine/core/shaderLibrary/attributes/RibbonVertexPosition.glsl.js\";import{OutputDepth as l}from\"../views/3d/webgl-engine/core/shaderLibrary/output/OutputDepth.glsl.js\";import{LineStipple as p}from\"../views/3d/webgl-engine/core/shaderLibrary/shading/LineStipple.glsl.js\";import{PiUtils as d}from\"../views/3d/webgl-engine/core/shaderLibrary/shading/PiUtils.glsl.js\";function c(c){const f=new t;f.extensions.add(\"GL_OES_standard_derivatives\"),f.include(d),f.include(s,c),f.include(p,c),1===c.output&&f.include(l,c),f.vertex.uniforms.add(\"proj\",\"mat4\").add(\"view\",\"mat4\").add(\"cameraNearFar\",\"vec2\").add(\"pixelRatio\",\"float\").add(\"miterLimit\",\"float\").add(\"screenSize\",\"vec2\"),f.attributes.add(\"position\",\"vec3\"),f.attributes.add(\"subdivisionFactor\",\"float\"),f.attributes.add(\"uv0\",\"vec2\"),f.attributes.add(\"auxpos1\",\"vec3\"),f.attributes.add(\"auxpos2\",\"vec3\"),f.varyings.add(\"vColor\",\"vec4\"),f.varyings.add(\"vpos\",\"vec3\"),f.varyings.add(\"linearDepth\",\"float\"),c.multipassTerrainEnabled&&f.varyings.add(\"depth\",\"float\");const v=c.falloffEnabled,m=c.innerColorEnabled;return m&&f.varyings.add(\"vLineDistance\",\"float\"),v&&f.varyings.add(\"vLineDistanceNorm\",\"float\"),c.falloffEnabled&&f.fragment.uniforms.add(\"falloff\",\"float\"),c.innerColorEnabled&&(f.fragment.uniforms.add(\"innerColor\",\"vec4\"),f.fragment.uniforms.add(\"innerWidth\",\"float\")),f.vertex.code.add(e`\n\t\t#define PERPENDICULAR(v) vec2(v.y, -v.x);\n\t\t#define ISOUTSIDE (left.x * right.y - left.y * right.x)*uv0.y > 0.0\n\n\t\tfloat interp(float ncp, vec4 a, vec4 b) {\n\t\t\treturn (-ncp - a.z) / (b.z - a.z);\n\t\t}\n\n\t\tvec2 rotate(vec2 v, float a) {\n\t\t\tfloat s = sin(a);\n\t\t\tfloat c = cos(a);\n\t\t\tmat2 m = mat2(c, -s, s, c);\n\t\t\treturn m * v;\n\t\t}\n`),f.vertex.code.add(e`\n    vec4 projectAndScale(vec4 pos) {\n      vec4 posNdc = proj * pos;\n\n      // Note that posNdc is in -1:1, scaling by screenSize converts this to a coordinate system\n      // that is twice scaled (going from -size:size).\n      posNdc.xy *= screenSize / posNdc.w;\n      return posNdc;\n    }\n`),f.vertex.code.add(e`\n    void clipAndTransform(inout vec4 pos, inout vec4 prev, inout vec4 next, in bool isStartVertex) {\n      float vnp = cameraNearFar[0] * 0.99;\n\n      //current pos behind ncp --> we need to clip\n      if(pos.z > -cameraNearFar[0]) {\n        if (!isStartVertex) {\n          //previous in front of ncp\n          if(prev.z < -cameraNearFar[0]) {\n            pos = mix(prev, pos, interp(vnp, prev, pos));\n            next = pos;\n          } else {\n            pos = vec4(0.0, 0.0, 0.0, 1.0);\n          }\n        }\n        //next in front of ncp\n        if(isStartVertex) {\n          if(next.z < -cameraNearFar[0]) {\n            pos = mix(pos, next, interp(vnp, pos, next));\n            prev = pos;\n          } else {\n            pos = vec4(0.0, 0.0, 0.0, 1.0);\n          }\n        }\n      } else {\n        //current position visible\n        //previous behind ncp\n        if (prev.z > -cameraNearFar[0]) {\n          prev = mix(pos, prev, interp(vnp, pos, prev));\n        }\n        //next behind ncp\n        if (next.z > -cameraNearFar[0]) {\n          next = mix(next, pos, interp(vnp, next, pos));\n        }\n      }\n\n      ${c.multipassTerrainEnabled?\"depth = pos.z;\":\"\"}\n      linearDepth = (-pos.z - cameraNearFar[0]) / (cameraNearFar[1] - cameraNearFar[0]);\n\n      pos = projectAndScale(pos);\n      next = projectAndScale(next);\n      prev = projectAndScale(prev);\n    }\n`),f.vertex.code.add(e`\n  void main(void) {\n    float coverage = 1.0;\n    vpos = position;\n\n    // Check for special value of uv0.y which is used by the Renderer when graphics\n    // are removed before the VBO is recompacted. If this is the case, then we just\n    // project outside of clip space.\n    if (uv0.y == 0.0) {\n      // Project out of clip space\n      gl_Position = vec4(1e038, 1e038, 1e038, 1.0);\n    }\n    else {\n      bool isStartVertex = abs(abs(uv0.y)-3.0) == 1.0;\n      bool isJoin = abs(uv0.y)-3.0 < 0.0;\n\n      float lineWidth = getSize() * pixelRatio;\n\n      // convert sub-pixel coverage to alpha\n      if (lineWidth < 1.0) {\n        coverage = lineWidth;\n        lineWidth = 1.0;\n      }else{\n        // Ribbon lines cannot properly render non-integer sizes. Round width to integer size if\n        // larger than one for better quality. Note that we do render < 1 pixels more or less correctly\n        // so we only really care to round anything larger than 1.\n        lineWidth = floor(lineWidth + 0.5);\n      }\n\n      vec4 pos  = view * vec4(position.xyz, 1.0);\n      vec4 prev = view * vec4(auxpos1.xyz, 1.0);\n      vec4 next = view * vec4(auxpos2.xyz, 1.0);\n\n      clipAndTransform(pos, prev, next, isStartVertex);\n\n      vec2 left = (pos.xy - prev.xy);\n      vec2 right = (next.xy - pos.xy);\n\n      float leftLen = length(left);\n      float rightLen = length(right);\n  `),c.stippleEnabled&&f.vertex.code.add(e`\n      // uv0.x is either 0 or 1, depending on whether this is considered the start of a line segment\n      // or the end. If start, then use pos->next, otherwise use prev->pos to define the line segment\n      // vector\n      vec4 stippleSegmentInfo = mix(vec4(pos.xy, right), vec4(prev.xy, left), uv0.x);\n      vec2 stippleSegmentOrigin = stippleSegmentInfo.xy;\n\n      // Scale s.t. it's in units of stipple pattern size.\n      vec2 stippleSegmentDirection = stippleSegmentInfo.zw;\n    `),f.vertex.code.add(e`\n    left = (leftLen > 0.001) ? left/leftLen : vec2(0.0, 0.0);\n    right = (rightLen > 0.001) ? right/rightLen : vec2(0.0, 0.0);\n\n    vec2 capDisplacementDir = vec2(0, 0);\n    vec2 joinDisplacementDir = vec2(0, 0);\n    float displacementLen = lineWidth;\n\n    if (isJoin) {\n\n      // JOIN handling ---------------------------------------------------\n      // determine if vertex is on the \"outside or \"inside\" of the join\n      bool isOutside = ISOUTSIDE;\n\n      // compute miter join position first\n      joinDisplacementDir = normalize(left + right);\n      joinDisplacementDir = PERPENDICULAR(joinDisplacementDir);\n\n      // compute miter stretch\n      if (leftLen > 0.001 && rightLen > 0.001) {\n        float nDotSeg = dot(joinDisplacementDir, left);\n        displacementLen /= length(nDotSeg * left - joinDisplacementDir);\n\n        // limit displacement of inner vertices\n        if (!isOutside) {\n          displacementLen = min(displacementLen, min(leftLen, rightLen)/abs(nDotSeg));\n        }\n      }\n\n      if (isOutside && (displacementLen > miterLimit * lineWidth)) {\n    `),c.roundJoins?f.vertex.code.add(e`\n        vec2 startDir;\n        vec2 endDir;\n\n        if (leftLen < 0.001) {\n          startDir = right;\n        }\n        else{\n          startDir = left;\n        }\n        startDir = normalize(startDir);\n        startDir = PERPENDICULAR(startDir);\n\n        if (rightLen < 0.001) {\n          endDir = left;\n        }\n        else{\n          endDir = right;\n        }\n        endDir = normalize(endDir);\n        endDir = PERPENDICULAR(endDir);\n\n        float rotationAngle = acos(clamp(dot(startDir, endDir), -1.0, 1.0));\n        joinDisplacementDir = rotate(startDir, -sign(uv0.y) * subdivisionFactor * rotationAngle);\n      `):f.vertex.code.add(e`\n        // convert to bevel join if miterLimit is exceeded\n        if (leftLen < 0.001) {\n          joinDisplacementDir = right;\n        }\n        else if (rightLen < 0.001) {\n          joinDisplacementDir = left;\n        }\n        else {\n          joinDisplacementDir = isStartVertex ? right : left;\n        }\n        joinDisplacementDir = normalize(joinDisplacementDir);\n        joinDisplacementDir = PERPENDICULAR(joinDisplacementDir);\n  `),f.vertex.code.add(e`\n        displacementLen = lineWidth;\n      }\n    } else {\n    // CAP handling ---------------------------------------------------\n    if (leftLen < 0.001) {\n      joinDisplacementDir = right;\n    }\n    else if (rightLen < 0.001) {\n      joinDisplacementDir = left;\n    }\n    else {\n      joinDisplacementDir = isStartVertex ? right : left;\n    }\n    joinDisplacementDir = normalize(joinDisplacementDir);\n    joinDisplacementDir = PERPENDICULAR(joinDisplacementDir);\n    displacementLen = lineWidth;\n\n    capDisplacementDir = isStartVertex ? -right : left;\n  `),c.roundCaps?f.vertex.code.add(e`\n    float angle = subdivisionFactor*PI*0.5;\n    joinDisplacementDir *= cos(angle);\n    capDisplacementDir *= sin(angle);\n    `):f.vertex.code.add(e`\n    capDisplacementDir *= subdivisionFactor;\n    `),f.vertex.code.add(e`\n  }\n\n  // Displacement (in pixels) caused by join/or cap\n  vec2 dpos = joinDisplacementDir * sign(uv0.y) * displacementLen + capDisplacementDir * displacementLen;\n\n  ${v||m?e`float lineDist = lineWidth * sign(uv0.y) * pos.w;`:\"\"}\n\n  ${m?e`vLineDistance = lineDist;`:\"\"}\n  ${v?e`vLineDistanceNorm = lineDist / lineWidth;`:\"\"}\n\n  pos.xy += dpos;\n  `),c.stippleEnabled&&(f.vertex.code.add(e`\n    {\n      // Compute the stipple pattern UV coordinate from the actual position, based on the origin\n      // and direction of the line segment on which the stipple pattern is based.\n\n      // Project the vector from the origin of the segment to the vertex onto the line segment.\n      // Note the 0.5 factor due to projected positions being at twice the screen size scale (see projectAndScale)\n      vec2 posVec = pos.xy - stippleSegmentOrigin;\n\n      float stippleSegmentDirectionLength = length(stippleSegmentDirection);\n    `),c.stippleIntegerRepeatsEnabled&&f.vertex.code.add(e`\n      float numberOfPatternRepeats = stippleSegmentDirectionLength * 0.5 * stipplePatternPixelSizeInv;\n      float roundedNumberOfPatternRepeats = floor(numberOfPatternRepeats);\n      stipplePatternUvMax = roundedNumberOfPatternRepeats;\n      `),f.vertex.code.add(e`\n      if (stippleSegmentDirectionLength >= 0.001) {\n        // Project the vertex position onto the line segment.\n        float projectedLength = dot(stippleSegmentDirection, posVec) / stippleSegmentDirectionLength * 0.5;\n     ${c.stippleIntegerRepeatsEnabled?\"float wholeNumberOfRepeatsScale = roundedNumberOfPatternRepeats / numberOfPatternRepeats;\":\"float wholeNumberOfRepeatsScale = 1.0;\"}\n        stipplePatternUv = projectedLength * wholeNumberOfRepeatsScale * stipplePatternPixelSizeInv * pos.w;\n        } else {\n          stipplePatternUv = 1.0;\n        }\n      }\n    `)),f.vertex.code.add(e`\n      // Convert back into NDC\n      pos.xy = pos.xy / screenSize * pos.w;\n\n      vColor = getColor();\n      vColor.a *= coverage;\n\n      gl_Position = pos;\n    }\n  }\n  `),c.multipassTerrainEnabled&&(f.fragment.include(n),f.include(a,c)),f.include(r,c),f.fragment.uniforms.add(\"intrinsicColor\",\"vec4\"),f.fragment.include(i),f.fragment.code.add(e`\n  void main() {\n    discardBySlice(vpos);\n    ${c.multipassTerrainEnabled?\"terrainDepthTest(gl_FragCoord, depth);\":\"\"}\n    float stippleAlpha = getStippleAlpha();\n    discardByStippleAlpha(stippleAlpha, stippleAlphaColorDiscard);\n\n    vec4 color = intrinsicColor * vColor;\n  `),c.innerColorEnabled&&(f.fragment.uniforms.add(\"pixelRatio\",\"float\"),f.fragment.code.add(e`\n    float distToInner = abs(vLineDistance * gl_FragCoord.w) - innerWidth;\n    float innerAA = clamp(0.5 - distToInner, 0.0, 1.0);\n    float innerAlpha = innerColor.a + color.a * (1.0 - innerColor.a);\n    color = mix(color, vec4(innerColor.rgb, innerAlpha), innerAA);\n    `)),f.fragment.code.add(e`\n    vec4 finalColor = blendStipple(color, stippleAlpha);\n  `),c.falloffEnabled&&f.fragment.code.add(e`\n    finalColor.a *= pow(max(0.0, 1.0 - abs(vLineDistanceNorm * gl_FragCoord.w)), falloff);\n    `),f.fragment.code.add(e`\n    if (finalColor.a < ${e.float(o)}) {\n      discard;\n    }\n\n    ${7===c.output?e`gl_FragColor = vec4(finalColor.a);`:\"\"}\n    ${0===c.output?e`gl_FragColor = highlightSlice(finalColor, vpos);`:\"\"}\n    ${0===c.output&&c.OITEnabled?\"gl_FragColor = premultiplyAlpha(gl_FragColor);\":\"\"}\n    ${4===c.output?e`gl_FragColor = vec4(1.0);`:\"\"}\n    ${1===c.output?e`outputDepth(linearDepth);`:\"\"}\n  }\n  `),f}var f=Object.freeze({__proto__:null,build:c});export{f as R,c as b};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nconst S={DIFFUSE:0,NORMAL:1,EMISSION:2,OCCLUSION:3,METALLIC_ROUGHNESS:4,SSAO:6,SHADOW_MAP:7};export{S as DefaultTextureUnits};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{glsl as e}from\"../../shaderModules/interfaces.js\";function t(t,i){t.vertex.uniforms.add(\"intrinsicWidth\",\"float\"),i.vvSize?(t.attributes.add(\"sizeFeatureAttribute\",\"float\"),t.vertex.uniforms.add(\"vvSizeMinSize\",\"vec3\"),t.vertex.uniforms.add(\"vvSizeMaxSize\",\"vec3\"),t.vertex.uniforms.add(\"vvSizeOffset\",\"vec3\"),t.vertex.uniforms.add(\"vvSizeFactor\",\"vec3\"),t.vertex.code.add(e`\n    float getSize() {\n      return intrinsicWidth * clamp(vvSizeOffset + sizeFeatureAttribute * vvSizeFactor, vvSizeMinSize, vvSizeMaxSize).x;\n    }\n    `)):(t.attributes.add(\"size\",\"float\"),t.vertex.code.add(e`\n    float getSize(){\n      return intrinsicWidth * size;\n    }\n    `)),i.vvOpacity?(t.attributes.add(\"opacityFeatureAttribute\",\"float\"),t.vertex.constants.add(\"vvOpacityNumber\",\"int\",8),t.vertex.code.add(e`\n    uniform float vvOpacityValues[vvOpacityNumber];\n    uniform float vvOpacityOpacities[vvOpacityNumber];\n\n    float interpolateOpacity( float value ){\n      if (value <= vvOpacityValues[0]) {\n        return vvOpacityOpacities[0];\n      }\n\n      for (int i = 1; i < vvOpacityNumber; ++i) {\n        if (vvOpacityValues[i] >= value) {\n          float f = (value - vvOpacityValues[i-1]) / (vvOpacityValues[i] - vvOpacityValues[i-1]);\n          return mix(vvOpacityOpacities[i-1], vvOpacityOpacities[i], f);\n        }\n      }\n\n      return vvOpacityOpacities[vvOpacityNumber - 1];\n    }\n\n    vec4 applyOpacity( vec4 color ){\n      return vec4(color.xyz, interpolateOpacity(opacityFeatureAttribute));\n    }\n    `)):t.vertex.code.add(e`\n    vec4 applyOpacity( vec4 color ){\n      return color;\n    }\n    `),i.vvColor?(t.attributes.add(\"colorFeatureAttribute\",\"float\"),t.vertex.constants.add(\"vvColorNumber\",\"int\",8),t.vertex.code.add(e`\n    uniform float vvColorValues[vvColorNumber];\n    uniform vec4 vvColorColors[vvColorNumber];\n\n    vec4 interpolateColor( float value ) {\n      if (value <= vvColorValues[0]) {\n        return vvColorColors[0];\n      }\n\n      for (int i = 1; i < vvColorNumber; ++i) {\n        if (vvColorValues[i] >= value) {\n          float f = (value - vvColorValues[i-1]) / (vvColorValues[i] - vvColorValues[i-1]);\n          return mix(vvColorColors[i-1], vvColorColors[i], f);\n        }\n      }\n\n      return vvColorColors[vvColorNumber - 1];\n    }\n\n    vec4 getColor(){\n      return applyOpacity(interpolateColor(colorFeatureAttribute));\n    }\n    `)):(t.attributes.add(\"color\",\"vec4\"),t.vertex.code.add(e`\n    vec4 getColor(){\n      return applyOpacity(color);\n    }\n    `))}export{t as RibbonVertexPosition};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{isSome as e}from\"../../../../core/maybe.js\";import{c as t}from\"../../../../chunks/vec3f64.js\";import{k as i,n as r,f as s,g as a,b as o}from\"../../../../chunks/vec3.js\";import l from\"../../../../core/Handles.js\";import{i as n,t as u,s as h}from\"../../../../chunks/mat4.js\";import{a as d}from\"../../../../chunks/mat4f64.js\";import{c}from\"../../../../chunks/vec4.js\";import{f as _}from\"../../../../chunks/vec4f32.js\";import{sv3d as m}from\"../../support/stack.js\";import{Geometry as p}from\"../../webgl-engine/lib/Geometry.js\";import M from\"../../webgl-engine/lib/GeometryUtil.js\";import{RibbonLineMaterial as f}from\"../../webgl-engine/materials/RibbonLineMaterial.js\";import{ColorMaterial as g}from\"../../webgl-engine/materials/ColorMaterial.js\";import{Object3DVisualElement as O}from\"./Object3DVisualElement.js\";class y extends O{constructor(e){super(e),this._handles=new l,this._quadMaterial=null,this._outlineMaterial=null,this._maxSize=0,this._position=t(),this._up=t(),this._right=t(),this._renderOccluded=4,this._color=_(1,0,0,1),this._outlineColor=_(0,0,0,1),this._outlineSize=0,this._size=32,this._outlineRenderOccluded=16,this.applyProps(e)}get renderOccluded(){return this._renderOccluded}set renderOccluded(e){e!==this._renderOccluded&&(this._renderOccluded=e,this._updateQuadMaterial())}get color(){return this._color}set color(e){c(this._color,e),this._updateQuadMaterial()}get outlineColor(){return this._outlineColor}set outlineColor(e){c(this._outlineColor,e),this._updateOutlineMaterial()}get outlineSize(){return this._outlineSize}set outlineSize(e){const t=0===this._outlineSize!=(0===e);this._outlineSize=e,t?this.recreateGeometry():this._updateOutlineMaterial()}get size(){return this._size}set size(e){e!==this._size&&(this._size=e,this._updateTransform())}get outlineRenderOccluded(){return this._outlineRenderOccluded}set outlineRenderOccluded(e){this._outlineRenderOccluded=e,this._updateOutlineMaterial()}set geometry({previous:e,center:t,next:o}){this._maxSize=Math.min(i(t,e),i(t,o))/3,r(this._up,s(this._up,e,t)),r(this._right,s(this._right,o,t)),a(this._position,t),this.recreateGeometry()}createExternalResources(){this._quadMaterial=new g(this.quadMaterialParameters),this._outlineMaterial=new f(this.outlineMaterialParameters),this._handles.add(this.view.state.watch(\"camera\",(()=>this._updateTransform())))}destroyExternalResources(){this._quadMaterial=null,this._outlineMaterial=null,this._handles.removeAll()}forEachExternalMaterial(e){e(this._quadMaterial),e(this._outlineMaterial)}createGeometries(e){this._createQuadGeometry(e),this._createOutlineGeometry(e),this._updateTransform(e)}_createQuadGeometry(e){const t=this._quadGeometryData(this._up,this._right);e.addGeometry(t,this._quadMaterial)}_createOutlineGeometry(e){if(0===this._outlineSize)return;const t=o(m.get(),this._up,this._right),i=M.createPolylineGeometry([this._up,t,this._right]);e.addGeometry(i,this._outlineMaterial)}_updateTransform(t=this.object){const i=this.view.state.camera,r=this._size*i.computeScreenPixelSizeAt(this._position),s=Math.min(this._maxSize,r);n(z),u(z,z,this._position),h(z,z,[s,s,s]),e(t)&&(t.transformation=z)}_quadGeometryData(e,t){const i=o(m.get(),e,t);return new p([[\"position\",{size:3,data:[0,0,0,...t,...e,...i],exclusive:!0}]],[[\"position\",new Uint16Array([0,1,2,1,2,3])]])}get quadMaterialParameters(){return{color:this._color,transparent:!0,writeDepth:!1,polygonOffset:!0,renderOccluded:this._renderOccluded}}_updateQuadMaterial(){this._quadMaterial&&this._quadMaterial.setParameterValues(this.quadMaterialParameters)}get outlineMaterialParameters(){return{color:this._outlineColor,width:this._outlineSize,renderOccluded:this._outlineRenderOccluded}}_updateOutlineMaterial(){this._outlineMaterial&&this._outlineMaterial.setParameterValues(this.outlineMaterialParameters)}}const z=d();export{y as RightAngleQuadVisualElement};\n"],"sourceRoot":""}