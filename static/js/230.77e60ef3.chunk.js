(this.webpackJsonpimaps=this.webpackJsonpimaps||[]).push([[230],{1181:function(e,t,r){"use strict";r.d(t,"a",(function(){return N}));var s=r(103),o=r(85),i=r(928),a=r(229),n=r(910),l=r(137),u=r(79),c=r(125),p=r(86),f=r(81),b=(r(84),r(82),r(83),r(93)),d=r(80),y=r(161),O=r(929),j=r(1109);let m=class extends p.a{constructor(e){super(e),this.directionLines=null,this.directionPoints=null,this.directions=null,this.route=null,this.routeName=null,this.stops=null}};Object(u.a)([Object(f.b)({type:y.default,json:{write:!0}})],m.prototype,"directionLines",void 0),Object(u.a)([Object(f.b)({type:y.default,json:{write:!0}})],m.prototype,"directionPoints",void 0),Object(u.a)([Object(f.b)({type:j.a,json:{write:!0}})],m.prototype,"directions",void 0),Object(u.a)([Object(f.b)({type:c.a,json:{write:!0}})],m.prototype,"route",void 0),Object(u.a)([Object(f.b)({type:String,json:{write:!0}})],m.prototype,"routeName",void 0),Object(u.a)([Object(f.b)({type:[c.a],json:{write:!0}})],m.prototype,"stops",void 0),m=Object(u.a)([Object(d.a)("esri.rest.support.RouteResult")],m);const g=m;function h(e){return e&&y.default.fromJSON(e).features.map((e=>e))}let v=class extends p.a{constructor(e){super(e),this.messages=null,this.pointBarriers=null,this.polylineBarriers=null,this.polygonBarriers=null,this.routeResults=null}readPointBarriers(e,t){return h(t.barriers)}readPolylineBarriers(e){return h(e)}readPolygonBarriers(e){return h(e)}};Object(u.a)([Object(f.b)({type:[O.a]})],v.prototype,"messages",void 0),Object(u.a)([Object(f.b)({type:[c.a]})],v.prototype,"pointBarriers",void 0),Object(u.a)([Object(b.a)("pointBarriers",["barriers"])],v.prototype,"readPointBarriers",null),Object(u.a)([Object(f.b)({type:[c.a]})],v.prototype,"polylineBarriers",void 0),Object(u.a)([Object(b.a)("polylineBarriers")],v.prototype,"readPolylineBarriers",null),Object(u.a)([Object(f.b)({type:[c.a]})],v.prototype,"polygonBarriers",void 0),Object(u.a)([Object(b.a)("polygonBarriers")],v.prototype,"readPolygonBarriers",null),Object(u.a)([Object(f.b)({type:[g]})],v.prototype,"routeResults",void 0),v=Object(u.a)([Object(d.a)("esri.rest.support.RouteSolveResult")],v);const B=v,R=Object(i.a)({accumulateAttributes:{name:"accumulateAttributeNames"},attributeParameterValues:!0,directionsTimeAttribute:{name:"directionsTimeAttributeName"},impedanceAttribute:{name:"impedanceAttributeName"},outSpatialReference:{name:"outSR",getter:e=>e.outSpatialReference.wkid},pointBarriers:{name:"barriers"},polylineBarriers:!0,polygonBarriers:!0,restrictionAttributes:{name:"restrictionAttributeNames"},stops:!0,travelMode:!0});function A(e){return"esri.rest.support.FeatureSet"===(null==e?void 0:e.declaredClass)}async function N(e,t,r){const i=[],u=[],c={},p={},f=Object(l.c)(e),{path:b}=f;A(t.stops)&&Object(n.a)(t.stops.features,u,"stops.features",c),A(t.pointBarriers)&&Object(n.a)(t.pointBarriers.features,u,"pointBarriers.features",c),A(t.polylineBarriers)&&Object(n.a)(t.polylineBarriers.features,u,"polylineBarriers.features",c),A(t.polygonBarriers)&&Object(n.a)(t.polygonBarriers.features,u,"polygonBarriers.features",c);const d=await Object(a.a)(u);for(const s in c){const e=c[s];i.push(s),p[s]=d.slice(e[0],e[1])}if(Object(n.d)(p,i)){let e=null;try{e=await Object(n.c)(b,t.apiKey,r)}catch{}e&&!e.hasZ&&Object(n.b)(p,i)}for(const s in p)p[s].forEach(((e,r)=>{t.get(s)[r].geometry=e}));const y={...r,query:{...f.query,...R.toQueryParams(t),f:"json"}},O=b.endsWith("/solve")?b:`${b}/solve`,{data:j}=await Object(s.default)(O,y);return function(e){var t,r,s,i,a;const n=new Map,{directionLines:l,directionPoints:u,directions:c,routes:p,stops:f,barriers:b,polygonBarriers:d,polylineBarriers:y,messages:O}=e,j=null!=(t=null!=(r=null!=(s=null!=(i=null==p?void 0:p.spatialReference)?i:null==f?void 0:f.spatialReference)?s:null==b?void 0:b.spatialReference)?r:null==d?void 0:d.spatialReference)?t:null==y?void 0:y.spatialReference;null==p||p.features.forEach((e=>{const t=e.attributes.Name,r=e.attributes.ObjectID;n.has(t)?(n.get(t).route=e,n.get(t).routeId=r):n.set(t,{route:e,routeId:r,routeName:t}),Object(o.k)(e.geometry)&&(e.geometry.spatialReference=j)})),null==c||c.forEach((e=>{const t=e.routeName;n.has(t)?n.get(t).directions=e:n.set(t,{routeName:t,directions:e})})),null==f||f.features.forEach((e=>{var t;const r=null!=(t=e.attributes.RouteName)?t:null;n.has(r)?n.get(r).stops?n.get(r).stops.push(e):n.get(r).stops=[e]:n.set(r,{stops:[e],routeName:r}),Object(o.k)(e.geometry)&&(e.geometry.spatialReference=j)}));const m=null==(a=null==f?void 0:f.features.every((e=>null==e.attributes.RouteName)))||a;if((null==f?void 0:f.features.length)>0&&m){const e=Array.from(n.keys())[0];n.get(e).stops=n.get(null).stops,n.delete(null)}null==l||l.features.forEach((e=>{var t;const r=e.attributes.RouteID,s=null==(t=Array.from(n.values()).find((e=>e.routeId===r)))?void 0:t.routeName;if(s)if(n.has(s))if(n.get(s).directionLines)n.get(s).directionLines.features.push(e);else{const{fieldAliases:t,geometryType:r,spatialReference:o}=l;n.get(s).directionLines={features:[e],fieldAliases:t,geometryType:r,spatialReference:o}}else{const{fieldAliases:t,geometryType:r,spatialReference:o}=l;n.set(s,{routeName:s,directionLines:{features:[e],fieldAliases:t,geometryType:r,spatialReference:o}})}})),null==u||u.features.forEach((e=>{var t;const r=e.attributes.RouteID,s=null==(t=Array.from(n.values()).find((e=>e.routeId===r)))?void 0:t.routeName;if(s)if(n.has(s))if(n.get(s).directionPoints)n.get(s).directionPoints.features.push(e);else{const{fieldAliases:t,geometryType:r,spatialReference:o}=u;n.get(s).directionPoints={features:[e],fieldAliases:t,geometryType:r,spatialReference:o}}else{const{fieldAliases:t,geometryType:r,spatialReference:o}=u;n.set(s,{routeName:s,directionPoints:{features:[e],fieldAliases:t,geometryType:r,spatialReference:o}})}}));const g=Array.from(n.values());return B.fromJSON({routeResults:g,barriers:b,polygonBarriers:d,polylineBarriers:y,messages:O})}(j)}},1267:function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return l}));var s=r(79),o=(r(87),r(83),r(84),r(82),r(171),r(80)),i=r(1181),a=r(483);let n=class extends a.a{constructor(e){super(e)}solve(e,t){return Object(i.a)(this.url,e,t)}};n=Object(s.a)([Object(o.a)("esri.tasks.RouteTask")],n);const l=n},483:function(e,t,r){"use strict";r.d(t,"a",(function(){return u}));var s=r(79),o=r(100),i=r(98),a=r(81),n=(r(84),r(82),r(83),r(80));let l=class extends o.a{constructor(...e){super(...e),this.requestOptions=null,this.url=null}normalizeCtorArgs(e,t){return"string"!=typeof e?e:{url:e,...t}}get parsedUrl(){return this._parseUrl(this.url)}_parseUrl(e){return e?Object(i.M)(e):null}_encode(e,t,r){const s={};for(const o in e){if("declaredClass"===o)continue;const i=e[o];if(null!=i&&"function"!=typeof i)if(Array.isArray(i)){s[o]=[];for(let e=0;e<i.length;e++)s[o][e]=this._encode(i[e])}else if("object"==typeof i)if(i.toJSON){const e=i.toJSON(r&&r[o]);s[o]=t?e:JSON.stringify(e)}else s[o]=t?i:JSON.stringify(i);else s[o]=i}return s}};Object(s.a)([Object(a.b)({readOnly:!0})],l.prototype,"parsedUrl",null),Object(s.a)([Object(a.b)()],l.prototype,"requestOptions",void 0),Object(s.a)([Object(a.b)({type:String})],l.prototype,"url",void 0),l=Object(s.a)([Object(n.a)("esri.tasks.Task")],l);const u=l}}]);
//# sourceMappingURL=230.77e60ef3.chunk.js.map