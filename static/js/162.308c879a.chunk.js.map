{"version":3,"sources":["../node_modules/@arcgis/core/core/accessorSupport/read.js","../node_modules/@arcgis/core/core/accessorSupport/write.js","../node_modules/@arcgis/core/widgets/support/decorators/accessibleHandler.js","../node_modules/@arcgis/core/widgets/support/decorators/vmEvent.js","../node_modules/@arcgis/core/widgets/support/decorators/propUtils.js","../node_modules/@arcgis/core/widgets/support/widget.js","../node_modules/@arcgis/core/identity/IdentityForm.js","../../src/index.js","../../index.js","../node_modules/@arcgis/core/identity/IdentityModal.js","../node_modules/@arcgis/core/identity/OAuthCredential.js","../node_modules/@arcgis/core/identity/OAuthInfo.js","../node_modules/@arcgis/core/identity/ServerInfo.js","../node_modules/@arcgis/core/identity/IdentityManagerBase.js","../node_modules/@arcgis/core/identity/IdentityManager.js","../node_modules/@arcgis/core/core/JSONSupport.js"],"names":["s","e","r","n","read","enabled","source","o","indexOf","t","a","f","i","Object","getOwnPropertyNames","metadatas","default","call","set","c","origin","u","d","setDefaultOrigin","reader","ignoreDefaults","messages","forEach","type","loaded","push","loadWarnings","l","getLogger","write","writer","get","overridePolicy","allowNull","writerEnsuresNonNull","isRequired","declaredClass","propertyName","target","error","name","message","defaultEquals","Array","isArray","ignoreOrigin","store","originOf","g","p","toJSON","isDefaultToJSON","m","keys","length","resources","pendingOperations","Promise","all","then","writtenProperties","propName","oldOrigin","newOrigin","TypeError","value","KeyboardEvent","this","key","preventDefault","stopPropagation","click","hasOwnProperty","_delegatedEventNames","slice","split","map","trim","render","postMixInProperties","buildRendering","postCreate","startup","constructor","super","_usernameInputNode","_passwordInputNode","signingIn","server","resource","oAuthPrompt","class","oAuthInfo","info","test","lblItem","lblUser","required","autocomplete","spellcheck","bind","afterCreate","lblPwd","h","classes","disabled","lblSigning","lblOk","lblCancel","onclick","_cancel","details","httpStatus","invalidUser","noAuthService","onsubmit","_submit","_set","emit","username","password","prototype","candidateSelectors","candidateSelector","matches","Element","getCandidates","candidates","el","includeContainer","getTabindex","tabindexAttr","parseInt","node","isNaN","isContentEditable","sortOrderedTabbables","b","isInput","isNonTabbableRadio","isRadio","radioScope","queryRadios","window","radioSet","err","console","checked","nodes","getCheckedRadio","isTabbableRadio","isNodeMatchingSelectorFocusable","isHiddenInput","getComputedStyle","nodeUnderDetails","displayCheck","width","height","isHidden","options","child","isDetailsWithSummary","parentNode","isDisabledFromFieldset","isNodeMatchingSelectorTabbable","focusableCandidateSelector","isFocusable","Error","activeFocusTraps","trapQueue","activateTrap","activeTrap","trapIndex","deactivateTrap","delay","setTimeout","fn","findIndex","idx","arr","valueOrHandler","params","getActualTarget","event","createFocusTrap","doc","userOptions","config","returnFocusOnDeactivate","escapeDeactivates","delayInitialFocus","state","containers","tabbableGroups","nodeFocusedBeforeActivation","mostRecentlyFocusedNode","active","paused","delayInitialFocusTimer","undefined","getOption","configOverrideOptions","optionName","configOptionName","containersContain","element","container","getNodeForOption","optionValue","getInitialFocusNode","firstTabbableGroup","updateTabbableNodes","tabbableNodes","regularTabbables","orderedTabbables","candidate","candidateTabindex","documentOrder","tabIndex","tabbable","firstTabbableNode","lastTabbableNode","tryFocus","preventScroll","isSelectableInput","getReturnFocusNode","checkPointerDown","trap","returnFocus","checkFocusIn","targetContained","checkKey","isEscapeEvent","isTabEvent","destinationNode","containerIndex","startOfGroupIndex","destinationGroupIndex","lastOfGroupIndex","checkTab","checkClick","addListeners","capture","passive","removeListeners","activate","onActivate","activateOptions","onPostActivate","checkCanFocusTrap","finishActivation","deactivate","clearTimeout","onDeactivate","deactivateOptions","onPostDeactivate","checkCanReturnFocus","finishDeactivation","pause","unpause","updateContainerElements","elementsAsArray","concat","containerElements","filter","document","createElement","content","open","_close","body","appendChild","own","watch","_toggleFocusTrap","destroy","_destroyFocusTrap","id","title","close","role","_createFocusTrap","_renderContent","_focusTrap","requestAnimationFrame","initialFocus","cancelAnimationFrame","innerHTML","HTMLElement","_attachToNode","readOnly","aliasOf","storage","appId","expires","ssl","token","userId","_init","isValid","Date","now","minTimeUntilExpiration","save","_load","authNamespace","portalUrl","setItem","JSON","stringify","log","replace","FormData","append","navigator","sendBeacon","XMLHttpRequest","send","_oAuthCred","getItem","parse","expiration","forceLogin","forceUserId","locale","popup","popupCallbackUrl","popupWindowFeatures","preserveUrlHash","clone","fromJSON","json","adminTokenServiceUrl","currentVersion","hasPortal","hasServer","owningSystemUrl","owningTenant","shortLivedTokenValidity","tokenServiceUrl","webTierAuth","T","O","host","R","some","P","localStorage","sessionStorage","C","_portalConfig","globalThis","esriGeowConfig","serverInfos","oAuthInfos","credentials","_soReqs","_xoReqs","_portals","defaultOAuthInfo","defaultTokenValidity","dialog","formConstructor","k","tokenValidity","normalizeWebTierAuth","_appOrigin","location","_appUrlObj","href","_busy","_rejectOnPersistedPageShow","_oAuthHash","_gwTokenUrl","_agsRest","_agsPortal","_agsAdmin","_adminSvcs","_gwDomains","regex","customBaseUrl","_legacyFed","_regexSDirUrl","_regexServerType","_gwUser","_gwItem","_gwGroup","_rePortalTokenSvc","_createDefaultOAuthInfo","_hasTestedIfAppIsOnPortal","_getOAuthHash","addEventListener","_pageShowHandler","registerServers","findServerInfo","registerOAuthInfos","findOAuthInfo","splice","registerToken","_sanitizeUrl","_isServerRsrc","x","_getServerInstanceRoot","_getTokenSvcUrl","_findCredential","assign","D","scope","emitTokenChange","refreshServerTokens","initialize","U","_hasSameServerInstance","findCredential","_getIdenticalSvcIdx","getCredential","prompt","AbortController","signal","abort","reject","promise","_isAdminResource","resolve","_restInfoPms","_selfReq","_","selfDfd","_getPortalSelf","_enqueue","getResourceName","_isRESTService","generateToken","isAdmin","serverUrl","customParameters","toLowerCase","scheme","uri","port","v","query","request","referer","client","method","authMode","useProxy","_useProxy","ioArgs","withCredentials","data","validity","isBusy","checkSignInStatus","checkAppAccess","credential","_doPortalSignIn","force","client_id","valid","viewOnlyUserTypeApp","catch","viewOnly","setOAuthResponseHash","_oAuthDfd","clearInterval","_oAuthIntervalId","_oAuthOnHashHandle","remove","charAt","substring","error_description","sinfo_","oinfo_","access_token","Number","expires_in","persist","setOAuthRedirectionHandler","_oAuthRedirectFunc","setProtocolErrorHandler","_protocolFunc","signIn","A","on","oAuthSignIn","oAuthWin_","closed","resUrl_","oAuthPopupConfirmation","_doOAuthSignIn","destroyCredentials","enablePostMessageAuth","_postMessageAuthHandle","endsWith","postMessage","disablePostMessageAuth","hash","persisted","_errbackFunc","_addResource","_removeResource","_findOAuthInfo","_isIdProvider","_isPortalDomain","String","_getOrigin","search","substr","_normalizeAGOLorgDomain","proxyUrl","path","_isIdenticalService","_getSuffix","restBaseUrl","adminUrl","_exchangeToken","_getPlatformSelf","headers","allSSL","portalMode","supportsOAuth","startsWith","_checkProtocol","resourceUrl","serverInfo","options_","admin_","refresh_","focus","_doSignIn","creationTime","shift","parent","y","_pendingDfd","oAuthState","user","portalToken","tokenExpiration","parseFloat","_generateOAuthInfo","accountId","redirect_uri","urlKey","top","response_type","force_login","prepopulatedusername","redirectToUserOrgUrl","S","setInterval","detail","authorizeParams","authorizeUrl","EventedAccessor","tokenRefreshBuffer","refreshToken","_enqueued","_refreshTimer","_startRefreshTimer","w","I"],"mappings":"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","file":"static/js/162.308c879a.chunk.js","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport{valueOf as e,exists as t}from\"./get.js\";import{getProperties as r}from\"./utils.js\";import{originSpecificReadPropertyDefinition as n,originSpecificPropertyDefinition as o}from\"./extensions/serializableProperty.js\";function s(e,r,n){if(!e||!e.read||!1===e.read.enabled||!e.read.source)return!1;const o=e.read.source;if(\"string\"==typeof o){if(o===r)return!0;if(o.indexOf(\".\")>-1&&0===o.indexOf(r)&&t(o,n))return!0}else for(const s of o){if(s===r)return!0;if(s.indexOf(\".\")>-1&&0===s.indexOf(r)&&t(s,n))return!0}return!1}function i(e){return e&&(!e.read||!1!==e.read.enabled&&!e.read.source)}function a(e,t,r,o,a){let f=n(t[r],a);i(f)&&(e[r]=!0);for(const i of Object.getOwnPropertyNames(t))f=n(t[i],a),s(f,r,o)&&(e[i]=!0)}function f(e,t,r,n){const s=r.metadatas,i=o(s[t],\"any\",n),a=i&&i.default;if(void 0===a)return;const f=\"function\"==typeof a?a.call(e,t,n):a;void 0!==f&&r.set(t,f)}const c={origin:\"service\"};function u(t,o,s=c){if(!o||\"object\"!=typeof o)return;const i=r(t),u=i.metadatas,d={};for(const e of Object.getOwnPropertyNames(o))a(d,u,e,o,s);i.setDefaultOrigin(s.origin);for(const r of Object.getOwnPropertyNames(d)){const a=n(u[r],s).read,f=a&&a.source;let c;c=f&&\"string\"==typeof f?e(o,f):o[r],a&&a.reader&&(c=a.reader.call(t,c,o,s)),void 0!==c&&i.set(r,c)}if(!s||!s.ignoreDefaults)for(const e of Object.getOwnPropertyNames(u))d[e]||f(t,e,i,s);i.setDefaultOrigin(\"user\")}function d(e,t,r,n=c){var o;const s={...n,messages:[]};r(s),null==(o=s.messages)||o.forEach((t=>{\"warning\"!==t.type||e.loaded?n&&n.messages&&n.messages.push(t):e.loadWarnings.push(t)}))}export{u as default,u as read,d as readLoadable};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport{equals as r}from\"../arrayUtils.js\";import e from\"../Error.js\";import t from\"../Logger.js\";import{idToReadableName as i,nameToId as n}from\"./PropertyOrigin.js\";import{getProperties as o,merge as s}from\"./utils.js\";import{originSpecificWritePropertyDefinition as u}from\"./extensions/serializableProperty.js\";const l=t.getLogger(\"esri.core.accessorSupport.write\");function a(r,e,t,i,n){var o,s;const u={};return null==(o=e.write)||null==(s=o.writer)||s.call(r,i,u,t,n),u}function f(r,t,i,o,s,u){if(!o||!o.write)return!1;const a=r.get(i);if(!s&&o.write.overridePolicy){const e=o.write.overridePolicy.call(r,a,i,u);void 0!==e&&(s=e)}if(s||(s=o.write),!s||!1===s.enabled)return!1;if((null===a&&!s.allowNull&&!s.writerEnsuresNonNull||void 0===a)&&s.isRequired){const t=new e(\"web-document-write:property-required\",`Missing value for required property '${i}' on '${r.declaredClass}'`,{propertyName:i,target:r});return t&&u&&u.messages?u.messages.push(t):t&&!u&&l.error(t.name,t.message),!1}if(void 0===a)return!1;if(null===a&&!s.allowNull&&!s.writerEnsuresNonNull)return!1;if(c(r,i,u,o,a))return!1;if(void 0!==o.default)return!0;if(!s.ignoreOrigin&&u&&u.origin){if(t.store.originOf(i)<n(u.origin))return!1}return!0}function c(e,t,i,n,o){const s=n.default;if(void 0===s)return!1;if(null!=n.defaultEquals)return n.defaultEquals(o);if(\"function\"==typeof s){if(Array.isArray(o)){const n=s.call(e,t,i);return r(n,o)}return!1}return s===o}function g(r,e,t,i){const n=o(r),s=n.metadatas,l=u(s[e],i);return!!l&&f(r,n,e,l,t,i)}function p(r,e,t){if(r&&\"function\"==typeof r.toJSON&&(!r.toJSON.isDefaultToJSON||!r.write))return s(e,r.toJSON());const n=o(r),l=n.metadatas;for(const o in l){const p=u(l[o],t);if(!f(r,n,o,p,void 0,t))continue;const d=r.get(o),m=a(r,p,p.write&&\"string\"==typeof p.write.target?p.write.target:o,d,t);var c,g;if(Object.keys(m).length>0)e=s(e,m),null!=t&&null!=(c=t.resources)&&null!=(g=c.pendingOperations)&&g.length&&Promise.all(t.resources.pendingOperations).then((()=>s(e,m))),t&&t.writtenProperties&&t.writtenProperties.push({target:r,propName:o,oldOrigin:i(n.store.originOf(o)),newOrigin:t.origin})}return e}export{p as default,g as willPropertyWrite,p as write};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport{isActivationKey as n}from\"../widgetUtils.js\";function t(){return function(n,t){if(!n[t])throw new TypeError(`Cannot auto bind undefined function '${t}'`);return{value:o(n[t])}}}function e(n){const{type:t}=n;return n instanceof KeyboardEvent||\"keyup\"===t||\"keydown\"===t||\"keypress\"===t}function o(t){return function(o,...r){e(o)?n(o.key)&&(o.preventDefault(),o.stopPropagation(),o.target.click()):t.call(this,o,...r)}}export{t as accessibleHandler};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport{splitProps as e}from\"./propUtils.js\";function t(t){return a=>{a.hasOwnProperty(\"_delegatedEventNames\")||(a._delegatedEventNames=a._delegatedEventNames?a._delegatedEventNames.slice():[]);const r=a._delegatedEventNames,s=Array.isArray(t)?t:e(t);r.push(...s)}}export{t as vmEvent};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nfunction n(n){return n.split(\",\").map((n=>n.trim()))}function t(n,t){return n.map((n=>r(n,t)))}function r(n,t){return 0===n.indexOf(t)?n:`${t}.${n}`}export{t as normalizePropNames,n as splitProps};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nexport{accessibleHandler}from\"./decorators/accessibleHandler.js\";export{messageBundle}from\"./decorators/messageBundle.js\";export{renderable}from\"./decorators/renderable.js\";export{vmEvent}from\"./decorators/vmEvent.js\";export{tsx}from\"./jsxFactory.js\";export{additionalAllowedTags,classes,cssTransition,discardNode,getCalciteThemeClass,getDir,getThemeName,isActivationKey,isDarkTheme,isRTL,keepMenuItemWithinView,renderingSanitizer,safeAttrs,storeNode}from\"./widgetUtils.js\";function e(e){return e&&\"function\"==typeof e.render}function t(e){return e&&\"function\"==typeof e.postMixInProperties&&\"function\"==typeof e.buildRendering&&\"function\"==typeof e.postCreate&&\"function\"==typeof e.startup}export{t as hasDomNode,e as isWidget};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport{_ as s}from\"../chunks/tslib.es6.js\";import{property as e}from\"../core/accessorSupport/decorators/property.js\";import\"../core/arrayUtils.js\";import\"../core/has.js\";import\"../core/accessorSupport/ensureType.js\";import{subclass as t}from\"../core/accessorSupport/decorators/subclass.js\";import{substitute as r}from\"../intl/substitute.js\";import o from\"../widgets/Widget.js\";import{storeNode as i}from\"../widgets/support/widgetUtils.js\";import{messageBundle as n}from\"../widgets/support/decorators/messageBundle.js\";import\"../core/Logger.js\";import{tsx as u}from\"../widgets/support/jsxFactory.js\";const a={base:\"esri-identity-form\",group:\"esri-identity-form__group\",label:\"esri-identity-form__label\",footer:\"esri-identity-form__footer\",esriInput:\"esri-input\",esriButton:\"esri-button\",esriButtonSecondary:\"esri-button--secondary\"},l=\"ArcGIS Online\";let p=class extends o{constructor(s,e){super(s,e),this._usernameInputNode=null,this._passwordInputNode=null,this.messages=null,this.signingIn=!1,this.server=null,this.resource=null,this.error=null,this.oAuthPrompt=!1}render(){const{error:s,server:e,resource:t,signingIn:o,oAuthPrompt:n,messages:p}=this,d=u(\"div\",{class:a.group},r(n?p.oAuthInfo:p.info,{server:/\\.arcgis\\.com/i.test(e)?l:e,resource:`(${t||p.lblItem})`})),c=n?null:u(\"div\",{class:a.group,key:\"username\"},u(\"label\",{class:a.label},p.lblUser,u(\"input\",{value:\"\",required:!0,autocomplete:\"off\",spellcheck:!1,type:\"text\",bind:this,afterCreate:i,\"data-node-ref\":\"_usernameInputNode\",class:a.esriInput}))),m=n?null:u(\"div\",{class:a.group,key:\"password\"},u(\"label\",{class:a.label},p.lblPwd,u(\"input\",{value:\"\",required:!0,type:\"password\",bind:this,afterCreate:i,\"data-node-ref\":\"_passwordInputNode\",class:a.esriInput}))),h=u(\"div\",{class:this.classes(a.group,a.footer)},u(\"input\",{type:\"submit\",disabled:!!o,value:o?p.lblSigning:p.lblOk,class:a.esriButton}),u(\"input\",{type:\"button\",value:p.lblCancel,bind:this,onclick:this._cancel,class:this.classes(a.esriButton,a.esriButtonSecondary)})),g=s?u(\"div\",null,s.details&&s.details.httpStatus?p.invalidUser:p.noAuthService):null;return u(\"form\",{class:a.base,bind:this,onsubmit:this._submit},d,g,c,m,h)}_cancel(){this._set(\"signingIn\",!1),this._usernameInputNode&&(this._usernameInputNode.value=\"\"),this._passwordInputNode&&(this._passwordInputNode.value=\"\"),this.emit(\"cancel\")}_submit(s){s.preventDefault(),this._set(\"signingIn\",!0);const e=this.oAuthPrompt?{}:{username:this._usernameInputNode&&this._usernameInputNode.value,password:this._passwordInputNode&&this._passwordInputNode.value};this.emit(\"submit\",e)}};s([e(),n(\"esri/identity/t9n/identity\")],p.prototype,\"messages\",void 0),s([e()],p.prototype,\"signingIn\",void 0),s([e()],p.prototype,\"server\",void 0),s([e()],p.prototype,\"resource\",void 0),s([e()],p.prototype,\"error\",void 0),s([e()],p.prototype,\"oAuthPrompt\",void 0),p=s([t(\"esri.identity.IdentityForm\")],p);const d=p;export{d as default};\n","const candidateSelectors = [\n  'input',\n  'select',\n  'textarea',\n  'a[href]',\n  'button',\n  '[tabindex]',\n  'audio[controls]',\n  'video[controls]',\n  '[contenteditable]:not([contenteditable=\"false\"])',\n  'details>summary:first-of-type',\n  'details',\n];\nconst candidateSelector = /* #__PURE__ */ candidateSelectors.join(',');\n\nconst matches =\n  typeof Element === 'undefined'\n    ? function () {}\n    : Element.prototype.matches ||\n      Element.prototype.msMatchesSelector ||\n      Element.prototype.webkitMatchesSelector;\n\nconst getCandidates = function (el, includeContainer, filter) {\n  let candidates = Array.prototype.slice.apply(\n    el.querySelectorAll(candidateSelector)\n  );\n  if (includeContainer && matches.call(el, candidateSelector)) {\n    candidates.unshift(el);\n  }\n  candidates = candidates.filter(filter);\n  return candidates;\n};\n\nconst isContentEditable = function (node) {\n  return node.contentEditable === 'true';\n};\n\nconst getTabindex = function (node) {\n  const tabindexAttr = parseInt(node.getAttribute('tabindex'), 10);\n\n  if (!isNaN(tabindexAttr)) {\n    return tabindexAttr;\n  }\n\n  // Browsers do not return `tabIndex` correctly for contentEditable nodes;\n  // so if they don't have a tabindex attribute specifically set, assume it's 0.\n  if (isContentEditable(node)) {\n    return 0;\n  }\n\n  // in Chrome, <details/>, <audio controls/> and <video controls/> elements get a default\n  //  `tabIndex` of -1 when the 'tabindex' attribute isn't specified in the DOM,\n  //  yet they are still part of the regular tab order; in FF, they get a default\n  //  `tabIndex` of 0; since Chrome still puts those elements in the regular tab\n  //  order, consider their tab index to be 0.\n  if (\n    (node.nodeName === 'AUDIO' ||\n      node.nodeName === 'VIDEO' ||\n      node.nodeName === 'DETAILS') &&\n    node.getAttribute('tabindex') === null\n  ) {\n    return 0;\n  }\n\n  return node.tabIndex;\n};\n\nconst sortOrderedTabbables = function (a, b) {\n  return a.tabIndex === b.tabIndex\n    ? a.documentOrder - b.documentOrder\n    : a.tabIndex - b.tabIndex;\n};\n\nconst isInput = function (node) {\n  return node.tagName === 'INPUT';\n};\n\nconst isHiddenInput = function (node) {\n  return isInput(node) && node.type === 'hidden';\n};\n\nconst isDetailsWithSummary = function (node) {\n  const r =\n    node.tagName === 'DETAILS' &&\n    Array.prototype.slice\n      .apply(node.children)\n      .some((child) => child.tagName === 'SUMMARY');\n  return r;\n};\n\nconst getCheckedRadio = function (nodes, form) {\n  for (let i = 0; i < nodes.length; i++) {\n    if (nodes[i].checked && nodes[i].form === form) {\n      return nodes[i];\n    }\n  }\n};\n\nconst isTabbableRadio = function (node) {\n  if (!node.name) {\n    return true;\n  }\n  const radioScope = node.form || node.ownerDocument;\n\n  const queryRadios = function (name) {\n    return radioScope.querySelectorAll(\n      'input[type=\"radio\"][name=\"' + name + '\"]'\n    );\n  };\n\n  let radioSet;\n  if (\n    typeof window !== 'undefined' &&\n    typeof window.CSS !== 'undefined' &&\n    typeof window.CSS.escape === 'function'\n  ) {\n    radioSet = queryRadios(window.CSS.escape(node.name));\n  } else {\n    try {\n      radioSet = queryRadios(node.name);\n    } catch (err) {\n      // eslint-disable-next-line no-console\n      console.error(\n        'Looks like you have a radio button with a name attribute containing invalid CSS selector characters and need the CSS.escape polyfill: %s',\n        err.message\n      );\n      return false;\n    }\n  }\n\n  const checked = getCheckedRadio(radioSet, node.form);\n  return !checked || checked === node;\n};\n\nconst isRadio = function (node) {\n  return isInput(node) && node.type === 'radio';\n};\n\nconst isNonTabbableRadio = function (node) {\n  return isRadio(node) && !isTabbableRadio(node);\n};\n\nconst isHidden = function (node, displayCheck) {\n  if (getComputedStyle(node).visibility === 'hidden') {\n    return true;\n  }\n\n  const isDirectSummary = matches.call(node, 'details>summary:first-of-type');\n  const nodeUnderDetails = isDirectSummary ? node.parentElement : node;\n  if (matches.call(nodeUnderDetails, 'details:not([open]) *')) {\n    return true;\n  }\n  if (!displayCheck || displayCheck === 'full') {\n    while (node) {\n      if (getComputedStyle(node).display === 'none') {\n        return true;\n      }\n      node = node.parentElement;\n    }\n  } else if (displayCheck === 'non-zero-area') {\n    const { width, height } = node.getBoundingClientRect();\n    return width === 0 && height === 0;\n  }\n\n  return false;\n};\n\n// form fields (nested) inside a disabled fieldset are not focusable/tabbable\n//  unless they are in the _first_ <legend> element of the top-most disabled\n//  fieldset\nconst isDisabledFromFieldset = function (node) {\n  if (\n    isInput(node) ||\n    node.tagName === 'SELECT' ||\n    node.tagName === 'TEXTAREA' ||\n    node.tagName === 'BUTTON'\n  ) {\n    let parentNode = node.parentElement;\n    while (parentNode) {\n      if (parentNode.tagName === 'FIELDSET' && parentNode.disabled) {\n        // look for the first <legend> as an immediate child of the disabled\n        //  <fieldset>: if the node is in that legend, it'll be enabled even\n        //  though the fieldset is disabled; otherwise, the node is in a\n        //  secondary/subsequent legend, or somewhere else within the fieldset\n        //  (however deep nested) and it'll be disabled\n        for (let i = 0; i < parentNode.children.length; i++) {\n          const child = parentNode.children.item(i);\n          if (child.tagName === 'LEGEND') {\n            if (child.contains(node)) {\n              return false;\n            }\n\n            // the node isn't in the first legend (in doc order), so no matter\n            //  where it is now, it'll be disabled\n            return true;\n          }\n        }\n\n        // the node isn't in a legend, so no matter where it is now, it'll be disabled\n        return true;\n      }\n\n      parentNode = parentNode.parentElement;\n    }\n  }\n\n  // else, node's tabbable/focusable state should not be affected by a fieldset's\n  //  enabled/disabled state\n  return false;\n};\n\nconst isNodeMatchingSelectorFocusable = function (options, node) {\n  if (\n    node.disabled ||\n    isHiddenInput(node) ||\n    isHidden(node, options.displayCheck) ||\n    // For a details element with a summary, the summary element gets the focus\n    isDetailsWithSummary(node) ||\n    isDisabledFromFieldset(node)\n  ) {\n    return false;\n  }\n  return true;\n};\n\nconst isNodeMatchingSelectorTabbable = function (options, node) {\n  if (\n    !isNodeMatchingSelectorFocusable(options, node) ||\n    isNonTabbableRadio(node) ||\n    getTabindex(node) < 0\n  ) {\n    return false;\n  }\n  return true;\n};\n\nconst tabbable = function (el, options) {\n  options = options || {};\n\n  const regularTabbables = [];\n  const orderedTabbables = [];\n\n  const candidates = getCandidates(\n    el,\n    options.includeContainer,\n    isNodeMatchingSelectorTabbable.bind(null, options)\n  );\n\n  candidates.forEach(function (candidate, i) {\n    const candidateTabindex = getTabindex(candidate);\n    if (candidateTabindex === 0) {\n      regularTabbables.push(candidate);\n    } else {\n      orderedTabbables.push({\n        documentOrder: i,\n        tabIndex: candidateTabindex,\n        node: candidate,\n      });\n    }\n  });\n\n  const tabbableNodes = orderedTabbables\n    .sort(sortOrderedTabbables)\n    .map((a) => a.node)\n    .concat(regularTabbables);\n\n  return tabbableNodes;\n};\n\nconst focusable = function (el, options) {\n  options = options || {};\n\n  const candidates = getCandidates(\n    el,\n    options.includeContainer,\n    isNodeMatchingSelectorFocusable.bind(null, options)\n  );\n\n  return candidates;\n};\n\nconst isTabbable = function (node, options) {\n  options = options || {};\n  if (!node) {\n    throw new Error('No node provided');\n  }\n  if (matches.call(node, candidateSelector) === false) {\n    return false;\n  }\n  return isNodeMatchingSelectorTabbable(options, node);\n};\n\nconst focusableCandidateSelector = /* #__PURE__ */ candidateSelectors\n  .concat('iframe')\n  .join(',');\n\nconst isFocusable = function (node, options) {\n  options = options || {};\n  if (!node) {\n    throw new Error('No node provided');\n  }\n  if (matches.call(node, focusableCandidateSelector) === false) {\n    return false;\n  }\n  return isNodeMatchingSelectorFocusable(options, node);\n};\n\nexport { tabbable, focusable, isTabbable, isFocusable };\n","import { tabbable, isFocusable } from 'tabbable';\n\nconst activeFocusTraps = (function () {\n  const trapQueue = [];\n  return {\n    activateTrap(trap) {\n      if (trapQueue.length > 0) {\n        const activeTrap = trapQueue[trapQueue.length - 1];\n        if (activeTrap !== trap) {\n          activeTrap.pause();\n        }\n      }\n\n      const trapIndex = trapQueue.indexOf(trap);\n      if (trapIndex === -1) {\n        trapQueue.push(trap);\n      } else {\n        // move this existing trap to the front of the queue\n        trapQueue.splice(trapIndex, 1);\n        trapQueue.push(trap);\n      }\n    },\n\n    deactivateTrap(trap) {\n      const trapIndex = trapQueue.indexOf(trap);\n      if (trapIndex !== -1) {\n        trapQueue.splice(trapIndex, 1);\n      }\n\n      if (trapQueue.length > 0) {\n        trapQueue[trapQueue.length - 1].unpause();\n      }\n    },\n  };\n})();\n\nconst isSelectableInput = function (node) {\n  return (\n    node.tagName &&\n    node.tagName.toLowerCase() === 'input' &&\n    typeof node.select === 'function'\n  );\n};\n\nconst isEscapeEvent = function (e) {\n  return e.key === 'Escape' || e.key === 'Esc' || e.keyCode === 27;\n};\n\nconst isTabEvent = function (e) {\n  return e.key === 'Tab' || e.keyCode === 9;\n};\n\nconst delay = function (fn) {\n  return setTimeout(fn, 0);\n};\n\n// Array.find/findIndex() are not supported on IE; this replicates enough\n//  of Array.findIndex() for our needs\nconst findIndex = function (arr, fn) {\n  let idx = -1;\n\n  arr.every(function (value, i) {\n    if (fn(value)) {\n      idx = i;\n      return false; // break\n    }\n\n    return true; // next\n  });\n\n  return idx;\n};\n\n/**\n * Get an option's value when it could be a plain value, or a handler that provides\n *  the value.\n * @param {*} value Option's value to check.\n * @param {...*} [params] Any parameters to pass to the handler, if `value` is a function.\n * @returns {*} The `value`, or the handler's returned value.\n */\nconst valueOrHandler = function (value, ...params) {\n  return typeof value === 'function' ? value(...params) : value;\n};\n\nconst getActualTarget = function (event) {\n  // NOTE: If the trap is _inside_ a shadow DOM, event.target will always be the\n  //  shadow host. However, event.target.composedPath() will be an array of\n  //  nodes \"clicked\" from inner-most (the actual element inside the shadow) to\n  //  outer-most (the host HTML document). If we have access to composedPath(),\n  //  then use its first element; otherwise, fall back to event.target (and\n  //  this only works for an _open_ shadow DOM; otherwise,\n  //  composedPath()[0] === event.target always).\n  return event.target.shadowRoot && typeof event.composedPath === 'function'\n    ? event.composedPath()[0]\n    : event.target;\n};\n\nconst createFocusTrap = function (elements, userOptions) {\n  const doc = userOptions?.document || document;\n\n  const config = {\n    returnFocusOnDeactivate: true,\n    escapeDeactivates: true,\n    delayInitialFocus: true,\n    ...userOptions,\n  };\n\n  const state = {\n    // @type {Array<HTMLElement>}\n    containers: [],\n\n    // list of objects identifying the first and last tabbable nodes in all containers/groups in\n    //  the trap\n    // NOTE: it's possible that a group has no tabbable nodes if nodes get removed while the trap\n    //  is active, but the trap should never get to a state where there isn't at least one group\n    //  with at least one tabbable node in it (that would lead to an error condition that would\n    //  result in an error being thrown)\n    // @type {Array<{ container: HTMLElement, firstTabbableNode: HTMLElement|null, lastTabbableNode: HTMLElement|null }>}\n    tabbableGroups: [],\n\n    nodeFocusedBeforeActivation: null,\n    mostRecentlyFocusedNode: null,\n    active: false,\n    paused: false,\n\n    // timer ID for when delayInitialFocus is true and initial focus in this trap\n    //  has been delayed during activation\n    delayInitialFocusTimer: undefined,\n  };\n\n  let trap; // eslint-disable-line prefer-const -- some private functions reference it, and its methods reference private functions, so we must declare here and define later\n\n  const getOption = (configOverrideOptions, optionName, configOptionName) => {\n    return configOverrideOptions &&\n      configOverrideOptions[optionName] !== undefined\n      ? configOverrideOptions[optionName]\n      : config[configOptionName || optionName];\n  };\n\n  const containersContain = function (element) {\n    return !!(\n      element &&\n      state.containers.some((container) => container.contains(element))\n    );\n  };\n\n  /**\n   * Gets the node for the given option, which is expected to be an option that\n   *  can be either a DOM node, a string that is a selector to get a node, `false`\n   *  (if a node is explicitly NOT given), or a function that returns any of these\n   *  values.\n   * @param {string} optionName\n   * @returns {undefined | false | HTMLElement | SVGElement} Returns\n   *  `undefined` if the option is not specified; `false` if the option\n   *  resolved to `false` (node explicitly not given); otherwise, the resolved\n   *  DOM node.\n   * @throws {Error} If the option is set, not `false`, and is not, or does not\n   *  resolve to a node.\n   */\n  const getNodeForOption = function (optionName, ...params) {\n    let optionValue = config[optionName];\n\n    if (typeof optionValue === 'function') {\n      optionValue = optionValue(...params);\n    }\n\n    if (!optionValue) {\n      if (optionValue === undefined || optionValue === false) {\n        return optionValue;\n      }\n      // else, empty string (invalid), null (invalid), 0 (invalid)\n\n      throw new Error(\n        `\\`${optionName}\\` was specified but was not a node, or did not return a node`\n      );\n    }\n\n    let node = optionValue; // could be HTMLElement, SVGElement, or non-empty string at this point\n\n    if (typeof optionValue === 'string') {\n      node = doc.querySelector(optionValue); // resolve to node, or null if fails\n      if (!node) {\n        throw new Error(\n          `\\`${optionName}\\` as selector refers to no known node`\n        );\n      }\n    }\n\n    return node;\n  };\n\n  const getInitialFocusNode = function () {\n    let node = getNodeForOption('initialFocus');\n\n    // false explicitly indicates we want no initialFocus at all\n    if (node === false) {\n      return false;\n    }\n\n    if (node === undefined) {\n      // option not specified: use fallback options\n      if (containersContain(doc.activeElement)) {\n        node = doc.activeElement;\n      } else {\n        const firstTabbableGroup = state.tabbableGroups[0];\n        const firstTabbableNode =\n          firstTabbableGroup && firstTabbableGroup.firstTabbableNode;\n\n        // NOTE: `fallbackFocus` option function cannot return `false` (not supported)\n        node = firstTabbableNode || getNodeForOption('fallbackFocus');\n      }\n    }\n\n    if (!node) {\n      throw new Error(\n        'Your focus-trap needs to have at least one focusable element'\n      );\n    }\n\n    return node;\n  };\n\n  const updateTabbableNodes = function () {\n    state.tabbableGroups = state.containers\n      .map((container) => {\n        const tabbableNodes = tabbable(container);\n\n        if (tabbableNodes.length > 0) {\n          return {\n            container,\n            firstTabbableNode: tabbableNodes[0],\n            lastTabbableNode: tabbableNodes[tabbableNodes.length - 1],\n          };\n        }\n\n        return undefined;\n      })\n      .filter((group) => !!group); // remove groups with no tabbable nodes\n\n    // throw if no groups have tabbable nodes and we don't have a fallback focus node either\n    if (\n      state.tabbableGroups.length <= 0 &&\n      !getNodeForOption('fallbackFocus') // returning false not supported for this option\n    ) {\n      throw new Error(\n        'Your focus-trap must have at least one container with at least one tabbable node in it at all times'\n      );\n    }\n  };\n\n  const tryFocus = function (node) {\n    if (node === false) {\n      return;\n    }\n\n    if (node === doc.activeElement) {\n      return;\n    }\n\n    if (!node || !node.focus) {\n      tryFocus(getInitialFocusNode());\n      return;\n    }\n\n    node.focus({ preventScroll: !!config.preventScroll });\n    state.mostRecentlyFocusedNode = node;\n\n    if (isSelectableInput(node)) {\n      node.select();\n    }\n  };\n\n  const getReturnFocusNode = function (previousActiveElement) {\n    const node = getNodeForOption('setReturnFocus', previousActiveElement);\n    return node ? node : node === false ? false : previousActiveElement;\n  };\n\n  // This needs to be done on mousedown and touchstart instead of click\n  // so that it precedes the focus event.\n  const checkPointerDown = function (e) {\n    const target = getActualTarget(e);\n\n    if (containersContain(target)) {\n      // allow the click since it ocurred inside the trap\n      return;\n    }\n\n    if (valueOrHandler(config.clickOutsideDeactivates, e)) {\n      // immediately deactivate the trap\n      trap.deactivate({\n        // if, on deactivation, we should return focus to the node originally-focused\n        //  when the trap was activated (or the configured `setReturnFocus` node),\n        //  then assume it's also OK to return focus to the outside node that was\n        //  just clicked, causing deactivation, as long as that node is focusable;\n        //  if it isn't focusable, then return focus to the original node focused\n        //  on activation (or the configured `setReturnFocus` node)\n        // NOTE: by setting `returnFocus: false`, deactivate() will do nothing,\n        //  which will result in the outside click setting focus to the node\n        //  that was clicked, whether it's focusable or not; by setting\n        //  `returnFocus: true`, we'll attempt to re-focus the node originally-focused\n        //  on activation (or the configured `setReturnFocus` node)\n        returnFocus: config.returnFocusOnDeactivate && !isFocusable(target),\n      });\n      return;\n    }\n\n    // This is needed for mobile devices.\n    // (If we'll only let `click` events through,\n    // then on mobile they will be blocked anyways if `touchstart` is blocked.)\n    if (valueOrHandler(config.allowOutsideClick, e)) {\n      // allow the click outside the trap to take place\n      return;\n    }\n\n    // otherwise, prevent the click\n    e.preventDefault();\n  };\n\n  // In case focus escapes the trap for some strange reason, pull it back in.\n  const checkFocusIn = function (e) {\n    const target = getActualTarget(e);\n    const targetContained = containersContain(target);\n\n    // In Firefox when you Tab out of an iframe the Document is briefly focused.\n    if (targetContained || target instanceof Document) {\n      if (targetContained) {\n        state.mostRecentlyFocusedNode = target;\n      }\n    } else {\n      // escaped! pull it back in to where it just left\n      e.stopImmediatePropagation();\n      tryFocus(state.mostRecentlyFocusedNode || getInitialFocusNode());\n    }\n  };\n\n  // Hijack Tab events on the first and last focusable nodes of the trap,\n  // in order to prevent focus from escaping. If it escapes for even a\n  // moment it can end up scrolling the page and causing confusion so we\n  // kind of need to capture the action at the keydown phase.\n  const checkTab = function (e) {\n    const target = getActualTarget(e);\n    updateTabbableNodes();\n\n    let destinationNode = null;\n\n    if (state.tabbableGroups.length > 0) {\n      // make sure the target is actually contained in a group\n      // NOTE: the target may also be the container itself if it's tabbable\n      //  with tabIndex='-1' and was given initial focus\n      const containerIndex = findIndex(state.tabbableGroups, ({ container }) =>\n        container.contains(target)\n      );\n\n      if (containerIndex < 0) {\n        // target not found in any group: quite possible focus has escaped the trap,\n        //  so bring it back in to...\n        if (e.shiftKey) {\n          // ...the last node in the last group\n          destinationNode =\n            state.tabbableGroups[state.tabbableGroups.length - 1]\n              .lastTabbableNode;\n        } else {\n          // ...the first node in the first group\n          destinationNode = state.tabbableGroups[0].firstTabbableNode;\n        }\n      } else if (e.shiftKey) {\n        // REVERSE\n\n        // is the target the first tabbable node in a group?\n        let startOfGroupIndex = findIndex(\n          state.tabbableGroups,\n          ({ firstTabbableNode }) => target === firstTabbableNode\n        );\n\n        if (\n          startOfGroupIndex < 0 &&\n          state.tabbableGroups[containerIndex].container === target\n        ) {\n          // an exception case where the target is the container itself, in which\n          //  case, we should handle shift+tab as if focus were on the container's\n          //  first tabbable node, and go to the last tabbable node of the LAST group\n          startOfGroupIndex = containerIndex;\n        }\n\n        if (startOfGroupIndex >= 0) {\n          // YES: then shift+tab should go to the last tabbable node in the\n          //  previous group (and wrap around to the last tabbable node of\n          //  the LAST group if it's the first tabbable node of the FIRST group)\n          const destinationGroupIndex =\n            startOfGroupIndex === 0\n              ? state.tabbableGroups.length - 1\n              : startOfGroupIndex - 1;\n\n          const destinationGroup = state.tabbableGroups[destinationGroupIndex];\n          destinationNode = destinationGroup.lastTabbableNode;\n        }\n      } else {\n        // FORWARD\n\n        // is the target the last tabbable node in a group?\n        let lastOfGroupIndex = findIndex(\n          state.tabbableGroups,\n          ({ lastTabbableNode }) => target === lastTabbableNode\n        );\n\n        if (\n          lastOfGroupIndex < 0 &&\n          state.tabbableGroups[containerIndex].container === target\n        ) {\n          // an exception case where the target is the container itself, in which\n          //  case, we should handle tab as if focus were on the container's\n          //  last tabbable node, and go to the first tabbable node of the FIRST group\n          lastOfGroupIndex = containerIndex;\n        }\n\n        if (lastOfGroupIndex >= 0) {\n          // YES: then tab should go to the first tabbable node in the next\n          //  group (and wrap around to the first tabbable node of the FIRST\n          //  group if it's the last tabbable node of the LAST group)\n          const destinationGroupIndex =\n            lastOfGroupIndex === state.tabbableGroups.length - 1\n              ? 0\n              : lastOfGroupIndex + 1;\n\n          const destinationGroup = state.tabbableGroups[destinationGroupIndex];\n          destinationNode = destinationGroup.firstTabbableNode;\n        }\n      }\n    } else {\n      // NOTE: the fallbackFocus option does not support returning false to opt-out\n      destinationNode = getNodeForOption('fallbackFocus');\n    }\n\n    if (destinationNode) {\n      e.preventDefault();\n      tryFocus(destinationNode);\n    }\n    // else, let the browser take care of [shift+]tab and move the focus\n  };\n\n  const checkKey = function (e) {\n    if (\n      isEscapeEvent(e) &&\n      valueOrHandler(config.escapeDeactivates, e) !== false\n    ) {\n      e.preventDefault();\n      trap.deactivate();\n      return;\n    }\n\n    if (isTabEvent(e)) {\n      checkTab(e);\n      return;\n    }\n  };\n\n  const checkClick = function (e) {\n    if (valueOrHandler(config.clickOutsideDeactivates, e)) {\n      return;\n    }\n\n    const target = getActualTarget(e);\n\n    if (containersContain(target)) {\n      return;\n    }\n\n    if (valueOrHandler(config.allowOutsideClick, e)) {\n      return;\n    }\n\n    e.preventDefault();\n    e.stopImmediatePropagation();\n  };\n\n  //\n  // EVENT LISTENERS\n  //\n\n  const addListeners = function () {\n    if (!state.active) {\n      return;\n    }\n\n    // There can be only one listening focus trap at a time\n    activeFocusTraps.activateTrap(trap);\n\n    // Delay ensures that the focused element doesn't capture the event\n    // that caused the focus trap activation.\n    state.delayInitialFocusTimer = config.delayInitialFocus\n      ? delay(function () {\n          tryFocus(getInitialFocusNode());\n        })\n      : tryFocus(getInitialFocusNode());\n\n    doc.addEventListener('focusin', checkFocusIn, true);\n    doc.addEventListener('mousedown', checkPointerDown, {\n      capture: true,\n      passive: false,\n    });\n    doc.addEventListener('touchstart', checkPointerDown, {\n      capture: true,\n      passive: false,\n    });\n    doc.addEventListener('click', checkClick, {\n      capture: true,\n      passive: false,\n    });\n    doc.addEventListener('keydown', checkKey, {\n      capture: true,\n      passive: false,\n    });\n\n    return trap;\n  };\n\n  const removeListeners = function () {\n    if (!state.active) {\n      return;\n    }\n\n    doc.removeEventListener('focusin', checkFocusIn, true);\n    doc.removeEventListener('mousedown', checkPointerDown, true);\n    doc.removeEventListener('touchstart', checkPointerDown, true);\n    doc.removeEventListener('click', checkClick, true);\n    doc.removeEventListener('keydown', checkKey, true);\n\n    return trap;\n  };\n\n  //\n  // TRAP DEFINITION\n  //\n\n  trap = {\n    activate(activateOptions) {\n      if (state.active) {\n        return this;\n      }\n\n      const onActivate = getOption(activateOptions, 'onActivate');\n      const onPostActivate = getOption(activateOptions, 'onPostActivate');\n      const checkCanFocusTrap = getOption(activateOptions, 'checkCanFocusTrap');\n\n      if (!checkCanFocusTrap) {\n        updateTabbableNodes();\n      }\n\n      state.active = true;\n      state.paused = false;\n      state.nodeFocusedBeforeActivation = doc.activeElement;\n\n      if (onActivate) {\n        onActivate();\n      }\n\n      const finishActivation = () => {\n        if (checkCanFocusTrap) {\n          updateTabbableNodes();\n        }\n        addListeners();\n        if (onPostActivate) {\n          onPostActivate();\n        }\n      };\n\n      if (checkCanFocusTrap) {\n        checkCanFocusTrap(state.containers.concat()).then(\n          finishActivation,\n          finishActivation\n        );\n        return this;\n      }\n\n      finishActivation();\n      return this;\n    },\n\n    deactivate(deactivateOptions) {\n      if (!state.active) {\n        return this;\n      }\n\n      clearTimeout(state.delayInitialFocusTimer); // noop if undefined\n      state.delayInitialFocusTimer = undefined;\n\n      removeListeners();\n      state.active = false;\n      state.paused = false;\n\n      activeFocusTraps.deactivateTrap(trap);\n\n      const onDeactivate = getOption(deactivateOptions, 'onDeactivate');\n      const onPostDeactivate = getOption(deactivateOptions, 'onPostDeactivate');\n      const checkCanReturnFocus = getOption(\n        deactivateOptions,\n        'checkCanReturnFocus'\n      );\n\n      if (onDeactivate) {\n        onDeactivate();\n      }\n\n      const returnFocus = getOption(\n        deactivateOptions,\n        'returnFocus',\n        'returnFocusOnDeactivate'\n      );\n\n      const finishDeactivation = () => {\n        delay(() => {\n          if (returnFocus) {\n            tryFocus(getReturnFocusNode(state.nodeFocusedBeforeActivation));\n          }\n          if (onPostDeactivate) {\n            onPostDeactivate();\n          }\n        });\n      };\n\n      if (returnFocus && checkCanReturnFocus) {\n        checkCanReturnFocus(\n          getReturnFocusNode(state.nodeFocusedBeforeActivation)\n        ).then(finishDeactivation, finishDeactivation);\n        return this;\n      }\n\n      finishDeactivation();\n      return this;\n    },\n\n    pause() {\n      if (state.paused || !state.active) {\n        return this;\n      }\n\n      state.paused = true;\n      removeListeners();\n\n      return this;\n    },\n\n    unpause() {\n      if (!state.paused || !state.active) {\n        return this;\n      }\n\n      state.paused = false;\n      updateTabbableNodes();\n      addListeners();\n\n      return this;\n    },\n\n    updateContainerElements(containerElements) {\n      const elementsAsArray = [].concat(containerElements).filter(Boolean);\n\n      state.containers = elementsAsArray.map((element) =>\n        typeof element === 'string' ? doc.querySelector(element) : element\n      );\n\n      if (state.active) {\n        updateTabbableNodes();\n      }\n\n      return this;\n    },\n  };\n\n  // initialize container elements\n  trap.updateContainerElements(elements);\n\n  return trap;\n};\n\nexport { createFocusTrap };\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport{_ as t}from\"../chunks/tslib.es6.js\";import{makeHandle as e}from\"../core/handleUtils.js\";import{property as o}from\"../core/accessorSupport/decorators/property.js\";import\"../core/arrayUtils.js\";import\"../core/has.js\";import\"../core/accessorSupport/ensureType.js\";import{subclass as s}from\"../core/accessorSupport/decorators/subclass.js\";import i from\"../widgets/Widget.js\";import{isWidget as r}from\"../widgets/support/widget.js\";import{createFocusTrap as n}from\"focus-trap\";import{messageBundle as a}from\"../widgets/support/decorators/messageBundle.js\";import{tsx as c}from\"../widgets/support/jsxFactory.js\";const l={base:\"esri-identity-modal\",open:\"esri-identity-modal--open\",closed:\"esri-identity-modal--closed\",title:\"esri-identity-modal__title\",dialog:\"esri-identity-modal__dialog\",content:\"esri-identity-modal__content\",closeButton:\"esri-identity-modal__close-button\",iconClose:\"esri-icon-close\"};let d=class extends i{constructor(t,e){super(t,e),this.container=document.createElement(\"div\"),this.content=null,this.open=!1,this._close=()=>{this.open=!1},document.body.appendChild(this.container),this.own(this.watch(\"open\",(()=>this._toggleFocusTrap())))}destroy(){this._destroyFocusTrap()}render(){const t=this.id,{open:e,content:o,title:s,messages:i}=this,r=e&&!!o,n={[l.open]:r,[l.closed]:!r},a=c(\"button\",{class:l.closeButton,\"aria-label\":i.close,title:i.close,bind:this,onclick:this._close},c(\"span\",{\"aria-hidden\":\"true\",class:l.iconClose})),d=`${t}_title`,p=`${t}_content`,u=s?c(\"h1\",{id:d,class:l.title},s):null,m=r?c(\"div\",{bind:this,class:l.dialog,role:\"dialog\",\"aria-labelledby\":d,\"aria-describedby\":p,afterCreate:this._createFocusTrap},a,u,this._renderContent(p)):null;return c(\"div\",{tabIndex:-1,class:this.classes(l.base,n)},m)}_destroyFocusTrap(){var t;null==(t=this._focusTrap)||t.deactivate({onDeactivate:null}),this._focusTrap=null}_toggleFocusTrap(){const{_focusTrap:t,open:e}=this;t&&(e?t.activate():t.deactivate())}_createFocusTrap(t){this._destroyFocusTrap();const o=requestAnimationFrame((()=>{this._focusTrap=n(t,{initialFocus:\"input\",onDeactivate:this._close}),this._toggleFocusTrap()}));this.own(e((()=>cancelAnimationFrame(o))))}_renderContent(t){const e=this.content;return\"string\"==typeof e?c(\"div\",{class:l.content,id:t,innerHTML:e}):r(e)?c(\"div\",{class:l.content,id:t},e.render()):e instanceof HTMLElement?c(\"div\",{class:l.content,id:t,bind:e,afterCreate:this._attachToNode}):null}_attachToNode(t){const e=this;t.appendChild(e)}};t([o({readOnly:!0})],d.prototype,\"container\",void 0),t([o()],d.prototype,\"content\",void 0),t([o()],d.prototype,\"open\",void 0),t([o(),a(\"esri/t9n/common\")],d.prototype,\"messages\",void 0),t([o({aliasOf:\"messages.auth.signIn\"})],d.prototype,\"title\",void 0),d=t([s(\"esri.identity.IdentityModal\")],d);const p=d;export{p as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nconst t=\"esriJSAPIOAuth\";class s{constructor(t,s){this.oAuthInfo=null,this.storage=null,this.appId=null,this.expires=null,this.ssl=null,this.token=null,this.userId=null,this.oAuthInfo=t,this.storage=s,this._init()}isValid(){let t=!1;if(this.oAuthInfo&&this.token&&this.userId){const s=Date.now();if(this.expires>s){(this.expires-s)/1e3>60*this.oAuthInfo.minTimeUntilExpiration&&(t=!0)}}return t}save(){if(!this.storage)return;const s=this._load(),e=this.oAuthInfo;if(e&&e.authNamespace&&e.portalUrl){let o=s[e.authNamespace];o||(o=s[e.authNamespace]={}),o[e.portalUrl]={appId:this.appId=e.appId,expires:this.expires,ssl:this.ssl,token:this.token,userId:this.userId};try{this.storage.setItem(t,JSON.stringify(s))}catch(i){console.log(i)}}}destroy(){const s=this._load(),e=this.oAuthInfo;if(e&&e.appId&&e.portalUrl&&this.token&&this.expires>Date.now()){const t=e.portalUrl.replace(/^http:/i,\"https:\")+\"/sharing/rest/oauth2/revokeToken\",s=new FormData;if(s.append(\"f\",\"json\"),s.append(\"auth_token\",this.token),s.append(\"client_id\",e.appId),s.append(\"token_type_hint\",\"access_token\"),\"function\"==typeof navigator.sendBeacon)navigator.sendBeacon(t,s);else{const e=new XMLHttpRequest;e.open(\"POST\",t),e.send(s)}}if(e&&e.authNamespace&&e.portalUrl&&this.storage){const o=s[e.authNamespace];if(o){delete o[e.portalUrl];try{this.storage.setItem(t,JSON.stringify(s))}catch(i){console.log(i)}}}e&&(e._oAuthCred=null,this.oAuthInfo=null)}_init(){const t=this._load(),s=this.oAuthInfo;if(s&&s.authNamespace&&s.portalUrl){let e=t[s.authNamespace];e&&(e=e[s.portalUrl],e&&(this.appId=e.appId,this.expires=e.expires,this.ssl=e.ssl,this.token=e.token,this.userId=e.userId))}}_load(){let s={};if(this.storage){const i=this.storage.getItem(t);if(i)try{s=JSON.parse(i)}catch(e){console.log(e)}}return s}}s.prototype.declaredClass=\"esri.identity.OAuthCredential\";export{s as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport{_ as o}from\"../chunks/tslib.es6.js\";import{JSONSupport as t}from\"../core/JSONSupport.js\";import{property as r}from\"../core/accessorSupport/decorators/property.js\";import\"../core/arrayUtils.js\";import\"../core/has.js\";import\"../core/accessorSupport/ensureType.js\";import{subclass as e}from\"../core/accessorSupport/decorators/subclass.js\";var s;let p=s=class extends t{constructor(o){super(o),this._oAuthCred=null,this.appId=null,this.authNamespace=\"/\",this.expiration=20160,this.forceLogin=!1,this.forceUserId=!1,this.locale=null,this.minTimeUntilExpiration=30,this.popup=!1,this.popupCallbackUrl=\"oauth-callback.html\",this.popupWindowFeatures=\"height=490,width=800,resizable,scrollbars,status\",this.portalUrl=\"https://www.arcgis.com\",this.preserveUrlHash=!1,this.userId=null}clone(){return s.fromJSON(this.toJSON())}};o([r({json:{write:!0}})],p.prototype,\"appId\",void 0),o([r({json:{write:!0}})],p.prototype,\"authNamespace\",void 0),o([r({json:{write:!0}})],p.prototype,\"expiration\",void 0),o([r({json:{write:!0}})],p.prototype,\"forceLogin\",void 0),o([r({json:{write:!0}})],p.prototype,\"forceUserId\",void 0),o([r({json:{write:!0}})],p.prototype,\"locale\",void 0),o([r({json:{write:!0}})],p.prototype,\"minTimeUntilExpiration\",void 0),o([r({json:{write:!0}})],p.prototype,\"popup\",void 0),o([r({json:{write:!0}})],p.prototype,\"popupCallbackUrl\",void 0),o([r({json:{write:!0}})],p.prototype,\"popupWindowFeatures\",void 0),o([r({json:{write:!0}})],p.prototype,\"portalUrl\",void 0),o([r({json:{write:!0}})],p.prototype,\"preserveUrlHash\",void 0),o([r({json:{write:!0}})],p.prototype,\"userId\",void 0),p=s=o([e(\"esri.identity.OAuthInfo\")],p);const i=p;export{i as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport{_ as o}from\"../chunks/tslib.es6.js\";import{JSONSupport as r}from\"../core/JSONSupport.js\";import{property as e}from\"../core/accessorSupport/decorators/property.js\";import\"../core/arrayUtils.js\";import\"../core/has.js\";import\"../core/accessorSupport/ensureType.js\";import{subclass as t}from\"../core/accessorSupport/decorators/subclass.js\";let s=class extends r{constructor(o){super(o),this.adminTokenServiceUrl=null,this.currentVersion=null,this.hasPortal=null,this.hasServer=null,this.owningSystemUrl=null,this.owningTenant=null,this.server=null,this.shortLivedTokenValidity=null,this.tokenServiceUrl=null,this.webTierAuth=null}};o([e({json:{write:!0}})],s.prototype,\"adminTokenServiceUrl\",void 0),o([e({json:{write:!0}})],s.prototype,\"currentVersion\",void 0),o([e({json:{write:!0}})],s.prototype,\"hasPortal\",void 0),o([e({json:{write:!0}})],s.prototype,\"hasServer\",void 0),o([e({json:{write:!0}})],s.prototype,\"owningSystemUrl\",void 0),o([e({json:{write:!0}})],s.prototype,\"owningTenant\",void 0),o([e({json:{write:!0}})],s.prototype,\"server\",void 0),o([e({json:{write:!0}})],s.prototype,\"shortLivedTokenValidity\",void 0),o([e({json:{write:!0}})],s.prototype,\"tokenServiceUrl\",void 0),o([e({json:{write:!0}})],s.prototype,\"webTierAuth\",void 0),s=o([t(\"esri.identity.ServerInfo\")],s);const i=s;export{i as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../chunks/tslib.es6.js\";import t from\"../config.js\";import{id as s}from\"../kernel.js\";import r from\"../request.js\";import i from\"../core/Error.js\";import n from\"../core/Evented.js\";import{on as o}from\"../core/events.js\";import{fixJson as a}from\"../core/lang.js\";import{getDeepValue as h}from\"../core/object.js\";import{createResolver as l,onAbort as c,isAborted as d}from\"../core/promiseUtils.js\";import{Url as u,urlToObject as p,hasSameOrigin as _,queryToObject as g,normalize as f,getProxyRule as m,makeAbsolute as v,objectToQuery as S}from\"../core/urlUtils.js\";import{property as w}from\"../core/accessorSupport/decorators/property.js\";import\"../core/accessorSupport/ensureType.js\";import{subclass as I}from\"../core/accessorSupport/decorators/subclass.js\";import k from\"./IdentityForm.js\";import A from\"./IdentityModal.js\";import y from\"./OAuthCredential.js\";import U from\"./OAuthInfo.js\";import x from\"./ServerInfo.js\";const T={},O=e=>{const t=new u(e.owningSystemUrl).host,s=new u(e.server).host,r=/.+\\.arcgis\\.com$/i;return r.test(t)&&r.test(s)},R=(e,t)=>!!(O(e)&&t&&t.some((t=>t.test(e.server))));let b=null,P=null;try{b=window.localStorage,P=window.sessionStorage}catch{}class C extends n{constructor(){super(),this._portalConfig=globalThis.esriGeowConfig,this.serverInfos=[],this.oAuthInfos=[],this.credentials=[],this._soReqs=[],this._xoReqs=[],this._portals=[],this.defaultOAuthInfo=null,this.defaultTokenValidity=60,this.dialog=null,this.formConstructor=k,this.tokenValidity=null,this.normalizeWebTierAuth=!1,this._appOrigin=\"null\"!==window.origin?window.origin:window.location.origin,this._appUrlObj=p(window.location.href),this._busy=null,this._rejectOnPersistedPageShow=!1,this._oAuthHash=null,this._gwTokenUrl=\"/sharing/rest/generateToken\",this._agsRest=\"/rest/services\",this._agsPortal=/\\/sharing(\\/|$)/i,this._agsAdmin=/(https?:\\/\\/[^\\/]+\\/[^\\/]+)\\/admin\\/?(\\/.*)?$/i,this._adminSvcs=/\\/rest\\/admin\\/services(\\/|$)/i,this._gwDomains=[{regex:/^https?:\\/\\/www\\.arcgis\\.com/i,customBaseUrl:\"maps.arcgis.com\",tokenServiceUrl:\"https://www.arcgis.com/sharing/rest/generateToken\"},{regex:/^https?:\\/\\/(?:dev|[a-z\\d-]+\\.mapsdev)\\.arcgis\\.com/i,customBaseUrl:\"mapsdev.arcgis.com\",tokenServiceUrl:\"https://dev.arcgis.com/sharing/rest/generateToken\"},{regex:/^https?:\\/\\/(?:devext|[a-z\\d-]+\\.mapsdevext)\\.arcgis\\.com/i,customBaseUrl:\"mapsdevext.arcgis.com\",tokenServiceUrl:\"https://devext.arcgis.com/sharing/rest/generateToken\"},{regex:/^https?:\\/\\/(?:qaext|[a-z\\d-]+\\.mapsqa)\\.arcgis\\.com/i,customBaseUrl:\"mapsqa.arcgis.com\",tokenServiceUrl:\"https://qaext.arcgis.com/sharing/rest/generateToken\"},{regex:/^https?:\\/\\/[a-z\\d-]+\\.maps\\.arcgis\\.com/i,customBaseUrl:\"maps.arcgis.com\",tokenServiceUrl:\"https://www.arcgis.com/sharing/rest/generateToken\"}],this._legacyFed=[],this._regexSDirUrl=/http.+\\/rest\\/services\\/?/gi,this._regexServerType=/(\\/(FeatureServer|GPServer|GeoDataServer|GeocodeServer|GeoenrichmentServer|GeometryServer|GlobeServer|ImageServer|MapServer|MobileServer|NAServer|NetworkDiagramServer|OGCFeatureServer|ParcelFabricServer|RelationalCatalogServer|SceneServer|StreamServer|UtilityNetworkServer|ValidationServer|VectorTileServer|VersionManagementServer)).*/gi,this._gwUser=/http.+\\/users\\/([^\\/]+)\\/?.*/i,this._gwItem=/http.+\\/items\\/([^\\/]+)\\/?.*/i,this._gwGroup=/http.+\\/groups\\/([^\\/]+)\\/?.*/i,this._rePortalTokenSvc=/\\/sharing(\\/rest)?\\/generatetoken/i,this._createDefaultOAuthInfo=!0,this._hasTestedIfAppIsOnPortal=!1,this._getOAuthHash(),window.addEventListener(\"pageshow\",(e=>{this._pageShowHandler(e)}))}registerServers(e){const t=this.serverInfos;t?(e=e.filter((e=>!this.findServerInfo(e.server))),this.serverInfos=t.concat(e)):this.serverInfos=e,e.forEach((e=>{e.owningSystemUrl&&this._portals.push(e.owningSystemUrl),e.hasPortal&&this._portals.push(e.server)}))}registerOAuthInfos(e){const t=this.oAuthInfos;if(t){for(const s of e){const e=this.findOAuthInfo(s.portalUrl);e&&t.splice(t.indexOf(e),1)}this.oAuthInfos=t.concat(e)}else this.oAuthInfos=e}registerToken(e){e={...e};const t=this._sanitizeUrl(e.server),s=this._isServerRsrc(t);let r,i=this.findServerInfo(t),n=!0;i||(i=new x,i.server=this._getServerInstanceRoot(t),s?i.hasServer=!0:(i.tokenServiceUrl=this._getTokenSvcUrl(t),i.hasPortal=!0),this.registerServers([i])),r=this._findCredential(t),r?(delete e.server,Object.assign(r,e),n=!1):(r=new D({userId:e.userId,server:i.server,token:e.token,expires:e.expires,ssl:e.ssl,scope:s?\"server\":\"portal\"}),r.resources=[t],this.credentials.push(r)),r.emitTokenChange(!1),n||r.refreshServerTokens()}toJSON(){return a({serverInfos:this.serverInfos.map((e=>e.toJSON())),oAuthInfos:this.oAuthInfos.map((e=>e.toJSON())),credentials:this.credentials.map((e=>e.toJSON()))})}initialize(e){if(!e)return;\"string\"==typeof e&&(e=JSON.parse(e));const t=e.serverInfos,s=e.oAuthInfos,r=e.credentials;if(t){const e=[];t.forEach((t=>{t.server&&t.tokenServiceUrl&&e.push(t.declaredClass?t:new x(t))})),e.length&&this.registerServers(e)}if(s){const e=[];s.forEach((t=>{t.appId&&e.push(t.declaredClass?t:new U(t))})),e.length&&this.registerOAuthInfos(e)}r&&r.forEach((e=>{e.server&&e.token&&e.expires&&e.expires>Date.now()&&((e=e.declaredClass?e:new D(e)).emitTokenChange(),this.credentials.push(e))}))}findServerInfo(e){let t;e=this._sanitizeUrl(e);for(const s of this.serverInfos)if(this._hasSameServerInstance(s.server,e)){t=s;break}return t}findOAuthInfo(e){let t;e=this._sanitizeUrl(e);for(const s of this.oAuthInfos)if(this._hasSameServerInstance(s.portalUrl,e)){t=s;break}return t}findCredential(e,t){let s;e=this._sanitizeUrl(e);const r=this._isServerRsrc(e)?\"server\":\"portal\";if(t){for(const i of this.credentials)if(this._hasSameServerInstance(i.server,e)&&t===i.userId&&i.scope===r){s=i;break}}else for(const i of this.credentials)if(this._hasSameServerInstance(i.server,e)&&-1!==this._getIdenticalSvcIdx(e,i)&&i.scope===r){s=i;break}return s}getCredential(e,t){let s,r,n=!0;t&&(s=!!t.token,r=t.error,n=!1!==t.prompt),t={...t},e=this._sanitizeUrl(e);const o=new AbortController,a=l();if(t.signal&&c(t.signal,(()=>{o.abort()})),c(o,(()=>{a.reject(new i(\"identity-manager:user-aborted\",\"ABORTED\"))})),d(o))return a.promise;t.signal=o.signal;const h=this._isAdminResource(e),u=s?this.findCredential(e):null;let p;if(u&&r&&r.details&&498===r.details.httpStatus)u.destroy();else if(u)return p=new i(\"identity-manager:not-authorized\",\"You are currently signed in as: '\"+u.userId+\"'. You do not have access to this resource: \"+e,{error:r}),a.reject(p),a.promise;const g=this._findCredential(e,t);if(g)return a.resolve(g),a.promise;let f=this.findServerInfo(e);if(f)!f.hasServer&&this._isServerRsrc(e)&&(f._restInfoPms=this._getTokenSvcUrl(e),f.hasServer=!0);else{const t=this._getTokenSvcUrl(e);if(!t)return p=new i(\"identity-manager:unknown-resource\",\"Unknown resource - could not find token service endpoint.\"),a.reject(p),a.promise;f=new x,f.server=this._getServerInstanceRoot(e),\"string\"==typeof t?(f.tokenServiceUrl=t,f.hasPortal=!0):(f._restInfoPms=t,f.hasServer=!0),this.registerServers([f])}return f.hasPortal&&void 0===f._selfReq&&(n||_(f.tokenServiceUrl,this._appOrigin)||this._gwDomains.some((e=>e.tokenServiceUrl===f.tokenServiceUrl)))&&(f._selfReq={owningTenant:t&&t.owningTenant,selfDfd:this._getPortalSelf(f.tokenServiceUrl.replace(this._rePortalTokenSvc,\"/sharing/rest/portals/self\"),e)}),this._enqueue(e,f,t,a,h)}getResourceName(e){return this._isRESTService(e)?e.replace(this._regexSDirUrl,\"\").replace(this._regexServerType,\"\")||\"\":this._gwUser.test(e)&&e.replace(this._gwUser,\"$1\")||this._gwItem.test(e)&&e.replace(this._gwItem,\"$1\")||this._gwGroup.test(e)&&e.replace(this._gwGroup,\"$1\")||\"\"}generateToken(e,t,s){const n=this._rePortalTokenSvc.test(e.tokenServiceUrl),o=new u(this._appOrigin),a=e.shortLivedTokenValidity;let h,l,c,d,p,g,f,m;t&&(m=this.tokenValidity||a||this.defaultTokenValidity,m>a&&a>0&&(m=a)),s&&(h=s.isAdmin,l=s.serverUrl,c=s.token,g=s.signal,f=s.ssl,e.customParameters=s.customParameters),h?d=e.adminTokenServiceUrl:(d=e.tokenServiceUrl,p=new u(d.toLowerCase()),e.webTierAuth&&null!=s&&s.serverUrl&&!f&&\"http\"===o.scheme&&(_(o.uri,d,!0)||\"https\"===p.scheme&&o.host===p.host&&\"7080\"===o.port&&\"7443\"===p.port)&&(d=d.replace(/^https:/i,\"http:\").replace(/:7443/i,\":7080\")));const v={query:{request:\"getToken\",username:null==t?void 0:t.username,password:null==t?void 0:t.password,serverUrl:l,token:c,expiration:m,referer:h||n?this._appOrigin:null,client:h?\"referer\":null,f:\"json\",...e.customParameters},method:\"post\",authMode:\"anonymous\",useProxy:this._useProxy(e,s),signal:g,...null==s?void 0:s.ioArgs};n||(v.withCredentials=!1);return r(d,v).then((s=>{const r=s.data;if(!r||!r.token)return new i(\"identity-manager:authentication-failed\",\"Unable to generate token\");const n=e.server;return T[n]||(T[n]={}),t&&(T[n][t.username]=t.password),r.validity=m,r}))}isBusy(){return!!this._busy}checkSignInStatus(e){return this.checkAppAccess(e,\"\").then((e=>e.credential))}checkAppAccess(e,t,s){let n=!1;return this.getCredential(e,{prompt:!1}).then((o=>{let a;const h={f:\"json\"};if(\"portal\"===o.scope)if(t&&(this._doPortalSignIn(e)||s&&s.force))a=o.server+\"/sharing/rest/oauth2/validateAppAccess\",h.client_id=t;else{if(!o.token)return{credential:o};a=o.server+\"/sharing/rest\"}else{if(!o.token)return{credential:o};a=o.server+\"/rest/services\"}return o.token&&(h.token=o.token),r(a,{query:h,authMode:\"anonymous\"}).then((e=>{if(!1===e.data.valid)throw new i(\"identity-manager:not-authorized\",`You are currently signed in as: '${o.userId}'.`,e.data);return n=!!e.data.viewOnlyUserTypeApp,{credential:o}})).catch((e=>{if(\"identity-manager:not-authorized\"===e.name)throw e;const t=e.details&&e.details.httpStatus;if(498===t)throw o.destroy(),new i(\"identity-manager:not-authenticated\",\"User is not signed in.\");if(400===t)throw new i(\"identity-manager:invalid-request\");return{credential:o}}))})).then((e=>({credential:e.credential,viewOnly:n})))}setOAuthResponseHash(e){var t;const s=this._oAuthDfd;if(this._oAuthDfd=null,!s||!e)return;clearInterval(this._oAuthIntervalId),null==(t=this._oAuthOnHashHandle)||t.remove(),\"#\"===e.charAt(0)&&(e=e.substring(1));const r=g(e);if(r.error){const e=\"access_denied\"===r.error,t=new i(e?\"identity-manager:user-aborted\":\"identity-manager:authentication-failed\",e?\"ABORTED\":\"OAuth: \"+r.error+\" - \"+r.error_description);s.reject(t)}else{const e=s.sinfo_,t=s.oinfo_,i=t._oAuthCred,n=new D({userId:r.username,server:e.server,token:r.access_token,expires:Date.now()+1e3*Number(r.expires_in),ssl:\"true\"===r.ssl,_oAuthCred:i});t.userId=n.userId,i.storage=r.persist?b:P,i.token=n.token,i.expires=n.expires,i.userId=n.userId,i.ssl=n.ssl,i.save(),s.resolve(n)}}setOAuthRedirectionHandler(e){this._oAuthRedirectFunc=e}setProtocolErrorHandler(e){this._protocolFunc=e}signIn(e,t,s={}){const r=l(),n=()=>{var e,t,s,r,i;null==(e=h)||e.remove(),null==(t=d)||t.remove(),null==(s=u)||s.remove(),null==(r=a)||r.destroy(),null==(i=this.dialog)||i.destroy(),this.dialog=a=h=d=u=null},o=()=>{n(),this._oAuthDfd=null,r.reject(new i(\"identity-manager:user-aborted\",\"ABORTED\"))};s.signal&&c(s.signal,(()=>{o()}));let a=new this.formConstructor;a.resource=this.getResourceName(e),a.server=t.server,this.dialog=new A,this.dialog.content=a,this.dialog.open=!0,this.emit(\"dialog-create\");let h=a.on(\"cancel\",o),d=this.dialog.watch(\"open\",o),u=a.on(\"submit\",(e=>{this.generateToken(t,e,{isAdmin:s.isAdmin,signal:s.signal}).then((i=>{n();const o=new D({userId:e.username,server:t.server,token:i.token,expires:null!=i.expires?Number(i.expires):null,ssl:!!i.ssl,isAdmin:s.isAdmin,validity:i.validity});r.resolve(o)})).catch((e=>{a.error=e,a.signingIn=!1}))}));return r.promise}oAuthSignIn(e,t,s,r){this._oAuthDfd=l();const n=this._oAuthDfd;null!=r&&r.signal&&c(r.signal,(()=>{const e=this._oAuthDfd&&this._oAuthDfd.oAuthWin_;e&&!e.closed?e.close():this.dialog&&h()})),n.resUrl_=e,n.sinfo_=t,n.oinfo_=s;const o=!r||!1!==r.oAuthPopupConfirmation;if(!s.popup||!o)return this._doOAuthSignIn(e,t,s),n.promise;const a=new this.formConstructor;a.oAuthPrompt=!0,a.server=t.server,this.dialog=new A,this.dialog.content=a,this.dialog.open=!0,this.emit(\"dialog-create\");const h=()=>{_(),this._oAuthDfd=null,n.reject(new i(\"identity-manager:user-aborted\",\"ABORTED\"))},d=a.on(\"cancel\",h),u=this.dialog.watch(\"open\",h),p=a.on(\"submit\",(()=>{_(),this._doOAuthSignIn(e,t,s)})),_=()=>{d.remove(),u.remove(),p.remove(),a.destroy(),this.dialog.destroy(),this.dialog=null};return n.promise}destroyCredentials(){if(this.credentials){this.credentials.slice().forEach((e=>{e.destroy()}))}this.emit(\"credentials-destroy\")}enablePostMessageAuth(e=\"https://www.arcgis.com/sharing/rest\"){this._postMessageAuthHandle&&this._postMessageAuthHandle.remove(),this._postMessageAuthHandle=o(window,\"message\",(t=>{var s;if((t.origin===this._appOrigin||t.origin.endsWith(\".arcgis.com\"))&&\"arcgis:auth:requestCredential\"===(null==(s=t.data)?void 0:s.type)){const s=t.source;this.getCredential(e).then((e=>{s.postMessage({type:\"arcgis:auth:credential\",credential:{expires:e.expires,server:e.server,ssl:e.ssl,token:e.token,userId:e.userId}},t.origin)})).catch((e=>{s.postMessage({type:\"arcgis:auth:error\",error:{name:e.name,message:e.message}},t.origin)}))}}))}disablePostMessageAuth(){this._postMessageAuthHandle&&(this._postMessageAuthHandle.remove(),this._postMessageAuthHandle=null)}_getOAuthHash(){let e=window.location.hash;if(e){\"#\"===e.charAt(0)&&(e=e.substring(1));const t=g(e);let s=!1;if(t.access_token&&t.expires_in&&t.state&&t.hasOwnProperty(\"username\"))try{t.state=JSON.parse(t.state),\"object\"==typeof t.state&&t.state.portalUrl&&(this._oAuthHash=t,s=!0)}catch{}else t.error&&t.error_description&&(console.log(\"IdentityManager OAuth Error: \",t.error,\" - \",t.error_description),\"access_denied\"===t.error&&(s=!0));s&&(window.location.hash=\"object\"==typeof t.state&&t.state.hash||\"\")}}_pageShowHandler(e){if(e.persisted&&this.isBusy()&&this._rejectOnPersistedPageShow){const e=new i(\"identity-manager:user-aborted\",\"ABORTED\");this._errbackFunc(e)}}_findCredential(e,t){let s,r,i,n,o=-1;const a=t&&t.token,h=t&&t.resource,l=this._isServerRsrc(e)?\"server\":\"portal\",c=this.credentials.filter((t=>this._hasSameServerInstance(t.server,e)&&t.scope===l));if(e=h||e,c.length)if(1===c.length){if(s=c[0],n=this.findServerInfo(s.server),r=n&&n.owningSystemUrl,i=r&&this.findCredential(r,s.userId),o=this._getIdenticalSvcIdx(e,s),!a)return-1===o&&s.resources.push(e),this._addResource(e,i),s;-1!==o&&(s.resources.splice(o,1),this._removeResource(e,i))}else{let t,s;if(c.some((a=>(s=this._getIdenticalSvcIdx(e,a),-1!==s&&(t=a,n=this.findServerInfo(t.server),r=n&&n.owningSystemUrl,i=r&&this.findCredential(r,t.userId),o=s,!0)))),a)t&&(t.resources.splice(o,1),this._removeResource(e,i));else if(t)return this._addResource(e,i),t}}_findOAuthInfo(e){let t=this.findOAuthInfo(e);if(!t)for(const s of this.oAuthInfos)if(this._isIdProvider(s.portalUrl,e)){t=s;break}return t}_addResource(e,t){t&&-1===this._getIdenticalSvcIdx(e,t)&&t.resources.push(e)}_removeResource(e,t){let s=-1;t&&(s=this._getIdenticalSvcIdx(e,t),s>-1&&t.resources.splice(s,1))}_useProxy(e,t){return t&&t.isAdmin&&!_(e.adminTokenServiceUrl,this._appOrigin)||!this._isPortalDomain(e.tokenServiceUrl)&&\"10.1\"===String(e.currentVersion)&&!_(e.tokenServiceUrl,this._appOrigin)}_getOrigin(e){const t=new u(e);return t.scheme+\"://\"+t.host+(null!=t.port?\":\"+t.port:\"\")}_getServerInstanceRoot(e){const t=e.toLowerCase();let s=t.indexOf(this._agsRest);return-1===s&&this._isAdminResource(e)&&(s=this._agsAdmin.test(e)?e.replace(this._agsAdmin,\"$1\").length:e.search(this._adminSvcs)),-1===s&&(s=t.indexOf(\"/sharing\")),-1===s&&\"/\"===t.substr(-1)&&(s=t.length-1),s>-1?e.substring(0,s):e}_hasSameServerInstance(e,t){return\"/\"===e.substr(-1)&&(e=e.slice(0,-1)),e=e.toLowerCase(),t=this._getServerInstanceRoot(t).toLowerCase(),e=this._normalizeAGOLorgDomain(e),t=this._normalizeAGOLorgDomain(t),(e=e.substr(e.indexOf(\":\")))===(t=t.substr(t.indexOf(\":\")))}_normalizeAGOLorgDomain(e){const t=/^https?:\\/\\/(?:cdn|[a-z\\d-]+\\.maps)\\.arcgis\\.com/i,s=/^https?:\\/\\/(?:cdndev|[a-z\\d-]+\\.mapsdevext)\\.arcgis\\.com/i,r=/^https?:\\/\\/(?:cdnqa|[a-z\\d-]+\\.mapsqa)\\.arcgis\\.com/i;return t.test(e)?e=e.replace(t,\"https://www.arcgis.com\"):s.test(e)?e=e.replace(s,\"https://devext.arcgis.com\"):r.test(e)&&(e=e.replace(r,\"https://qaext.arcgis.com\")),e}_sanitizeUrl(e){const s=(t.request.proxyUrl||\"\").toLowerCase(),r=s?e.toLowerCase().indexOf(s+\"?\"):-1;return-1!==r&&(e=e.substring(r+s.length+1)),e=f(e),p(e).path}_isRESTService(e){return e.indexOf(this._agsRest)>-1}_isAdminResource(e){return this._agsAdmin.test(e)||this._adminSvcs.test(e)}_isServerRsrc(e){return this._isRESTService(e)||this._isAdminResource(e)}_isIdenticalService(e,t){let s;if(this._isRESTService(e)&&this._isRESTService(t)){const r=this._getSuffix(e).toLowerCase(),i=this._getSuffix(t).toLowerCase();if(s=r===i,!s){const e=/(.*)\\/(MapServer|FeatureServer|UtilityNetworkServer).*/gi;s=r.replace(e,\"$1\")===i.replace(e,\"$1\")}}else this._isAdminResource(e)&&this._isAdminResource(t)?s=!0:this._isServerRsrc(e)||this._isServerRsrc(t)||!this._isPortalDomain(e)||(s=!0);return s}_isPortalDomain(e){const s=new u(e.toLowerCase()),r=this._portalConfig;let i=this._gwDomains.some((e=>e.regex.test(s.uri)));return!i&&r&&(i=this._hasSameServerInstance(this._getServerInstanceRoot(r.restBaseUrl),s.uri)),i||t.portalUrl&&(i=_(s,t.portalUrl,!0)),i||(i=this._portals.some((e=>this._hasSameServerInstance(e,s.uri)))),i=i||this._agsPortal.test(s.path),i}_isIdProvider(e,t){let s=-1,r=-1;this._gwDomains.forEach(((i,n)=>{-1===s&&i.regex.test(e)&&(s=n),-1===r&&i.regex.test(t)&&(r=n)}));let i=!1;if(s>-1&&r>-1&&(0===s||4===s?0!==r&&4!==r||(i=!0):1===s?1!==r&&2!==r||(i=!0):2===s?2===r&&(i=!0):3===s&&3===r&&(i=!0)),!i){const s=this.findServerInfo(t),r=s&&s.owningSystemUrl;r&&O(s)&&this._isPortalDomain(r)&&this._isIdProvider(e,r)&&(i=!0)}return i}_getIdenticalSvcIdx(e,t){let s=-1;for(let r=0;r<t.resources.length;r++){const i=t.resources[r];if(this._isIdenticalService(e,i)){s=r;break}}return s}_getSuffix(e){return e.replace(this._regexSDirUrl,\"\").replace(this._regexServerType,\"$1\")}_getTokenSvcUrl(e){let t,s,i;if(this._isRESTService(e)||this._isAdminResource(e)){const i=this._getServerInstanceRoot(e);return t=i+\"/admin/generateToken\",s=r(e=i+\"/rest/info\",{query:{f:\"json\"}}).then((e=>e.data)),{adminUrl:t,promise:s}}if(this._isPortalDomain(e)){let t=\"\";if(this._gwDomains.some((s=>(s.regex.test(e)&&(t=s.tokenServiceUrl),!!t))),t||this._portals.some((s=>(this._hasSameServerInstance(s,e)&&(t=s+this._gwTokenUrl),!!t))),t||(i=e.toLowerCase().indexOf(\"/sharing\"),-1!==i&&(t=e.substring(0,i)+this._gwTokenUrl)),t||(t=this._getOrigin(e)+this._gwTokenUrl),t){const s=new u(e).port;/^http:\\/\\//i.test(e)&&\"7080\"===s&&(t=t.replace(/:7080/i,\":7443\")),t=t.replace(/http:/i,\"https:\")}return t}if(-1!==e.toLowerCase().indexOf(\"premium.arcgisonline.com\"))return\"https://premium.arcgisonline.com/server/tokens\"}_exchangeToken(e,t,s){return r(`${e}/sharing/rest/oauth2/exchangeToken`,{authMode:\"anonymous\",method:\"post\",query:{f:\"json\",client_id:t,token:s}}).then((e=>e.data.token))}_getPlatformSelf(e,t){return e=e.replace(/^http:/i,\"https:\"),r(`${e}/sharing/rest/oauth2/platformSelf`,{authMode:\"anonymous\",headers:{\"X-Esri-Auth-Client-Id\":t,\"X-Esri-Auth-Redirect-Uri\":window.location.href.replace(/#.*$/,\"\")},method:\"post\",query:{f:\"json\"},withCredentials:!0}).then((e=>e.data))}_getPortalSelf(e,t){let s;if(this._gwDomains.some((t=>(t.regex.test(e)&&(s=t.customBaseUrl),!!s))),s)return Promise.resolve({allSSL:!0,currentVersion:\"4.4\",customBaseUrl:s,portalMode:\"multitenant\",supportsOAuth:!0});this._appOrigin.startsWith(\"https:\")?e=e.replace(/^http:/i,\"https:\").replace(/:7080/i,\":7443\"):/^http:/i.test(t)&&(e=e.replace(/^https:/i,\"http:\").replace(/:7443/i,\":7080\"));return r(e,{query:{f:\"json\"},authMode:\"anonymous\",withCredentials:!0}).then((e=>e.data))}_doPortalSignIn(e){const t=this._portalConfig,s=window.location.href,r=this.findServerInfo(e);return!(!t&&!this._isPortalDomain(s)||!(r?r.hasPortal||r.owningSystemUrl&&this._isPortalDomain(r.owningSystemUrl):this._isPortalDomain(e))||!(this._isIdProvider(s,e)||t&&(this._hasSameServerInstance(this._getServerInstanceRoot(t.restBaseUrl),e)||this._isIdProvider(t.restBaseUrl,e))||_(s,e,!0)))}_checkProtocol(e,t,s,r){let n=!0;const o=r?t.adminTokenServiceUrl:t.tokenServiceUrl;if(o.trim().toLowerCase().startsWith(\"https:\")&&!this._appOrigin.startsWith(\"https:\")&&m(o)&&(n=!!this._protocolFunc&&!!this._protocolFunc({resourceUrl:e,serverInfo:t}),!n)){s(new i(\"identity-manager:aborted\",\"Aborted the Sign-In process to avoid sending password over insecure connection.\"))}return n}_enqueue(e,t,s,r,i,n){return r||(r=l()),r.resUrl_=e,r.sinfo_=t,r.options_=s,r.admin_=i,r.refresh_=n,this._busy?this._hasSameServerInstance(this._getServerInstanceRoot(e),this._busy.resUrl_)?(this._oAuthDfd&&this._oAuthDfd.oAuthWin_&&this._oAuthDfd.oAuthWin_.focus(),this._soReqs.push(r)):this._xoReqs.push(r):this._doSignIn(r),r.promise}_doSignIn(e){this._busy=e,this._rejectOnPersistedPageShow=!1;const t=t=>{const s=e.options_&&e.options_.resource,r=e.resUrl_,i=e.refresh_;let n=!1;-1===this.credentials.indexOf(t)&&(i&&-1!==this.credentials.indexOf(i)?(i.userId=t.userId,i.token=t.token,i.expires=t.expires,i.validity=t.validity,i.ssl=t.ssl,i.creationTime=t.creationTime,n=!0,t=i):this.credentials.push(t)),t.resources||(t.resources=[]),t.resources.push(s||r),t.scope=this._isServerRsrc(r)?\"server\":\"portal\",t.emitTokenChange();const o=this._soReqs,a={};this._soReqs=[],o.forEach((e=>{if(!this._isIdenticalService(r,e.resUrl_)){const s=this._getSuffix(e.resUrl_);a[s]||(a[s]=!0,t.resources.push(e.resUrl_))}})),e.resolve(t),o.forEach((e=>{this._hasSameServerInstance(this._getServerInstanceRoot(r),e.resUrl_)?e.resolve(t):this._soReqs.push(e)})),this._busy=e.resUrl_=e.sinfo_=e.refresh_=null,n||this.emit(\"credential-create\",{credential:t}),this._soReqs.length?this._doSignIn(this._soReqs.shift()):this._xoReqs.length&&this._doSignIn(this._xoReqs.shift())},s=t=>{e.reject(t),this._busy=e.resUrl_=e.sinfo_=e.refresh_=null,this._soReqs.length?this._doSignIn(this._soReqs.shift()):this._xoReqs.length&&this._doSignIn(this._xoReqs.shift())},r=(r,n,a,h)=>{var l,d;const u=e.sinfo_,p=!e.options_||!1!==e.options_.prompt,g=u.hasPortal&&this._findOAuthInfo(e.resUrl_);let f,m;if(r)t(new D({userId:r,server:u.server,token:a||null,expires:null!=h?Number(h):null,ssl:!!n}));else if(window!==window.parent&&null!=(l=this._appUrlObj.query)&&l[\"arcgis-auth-origin\"]&&null!=(d=this._appUrlObj.query)&&d[\"arcgis-auth-portal\"]&&this._hasSameServerInstance(this._getServerInstanceRoot(this._appUrlObj.query[\"arcgis-auth-portal\"]),e.resUrl_)){var v;window.parent.postMessage({type:\"arcgis:auth:requestCredential\"},this._appUrlObj.query[\"arcgis-auth-origin\"]);const r=o(window,\"message\",(e=>{e.source===window.parent&&e.data&&(\"arcgis:auth:credential\"===e.data.type?(r.remove(),e.data.credential.expires<Date.now()?s(new i(\"identity-manager:credential-request-failed\",\"Parent application's token has expired.\")):t(new D(e.data.credential))):\"arcgis:auth:error\"===e.data.type&&(r.remove(),\"tokenExpiredError\"===e.data.error.name?s(new i(\"identity-manager:credential-request-failed\",\"Parent application's token has expired.\")):s(i.fromJSON(e.data.error))))}));c(null==(v=e.options_)?void 0:v.signal,(()=>{r.remove()}))}else if(g){let r=g._oAuthCred;if(!r){const e=new y(g,b),t=new y(g,P);e.isValid()&&t.isValid()?e.expires>t.expires?(r=e,t.destroy()):(r=t,e.destroy()):r=e.isValid()?e:t,g._oAuthCred=r}if(r.isValid())f=new D({userId:r.userId,server:u.server,token:r.token,expires:r.expires,ssl:r.ssl,_oAuthCred:r}),g.appId!==r.appId&&this._doPortalSignIn(e.resUrl_)?e._pendingDfd=this._exchangeToken(f.server,g.appId,f.token).then((e=>{f.token=e,r.token=e,r.save(),t(f)})).catch((()=>{t(f)})):t(f);else if(this._oAuthHash&&this._hasSameServerInstance(g.portalUrl,this._oAuthHash.state.portalUrl)){const e=this._oAuthHash;f=new D({userId:e.username,server:u.server,token:e.access_token,expires:Date.now()+1e3*Number(e.expires_in),ssl:\"true\"===e.ssl,oAuthState:e.state,_oAuthCred:r}),g.userId=f.userId,r.storage=e.persist?b:P,r.token=f.token,r.expires=f.expires,r.userId=f.userId,r.ssl=f.ssl,r.save(),this._oAuthHash=null,t(f)}else{const r=()=>{p?e._pendingDfd=this.oAuthSignIn(e.resUrl_,u,g,e.options_).then(t,s):(m=new i(\"identity-manager:not-authenticated\",\"User is not signed in.\"),s(m))};this._doPortalSignIn(e.resUrl_)?e._pendingDfd=this._getPlatformSelf(u.server,g.appId).then((({portalUrl:e,token:s,username:i})=>{!e||_(e,this._appOrigin,!0)?(f=new D({server:u.server,userId:i,token:s}),t(f)):r()})).catch(r):r()}}else if(p){if(this._checkProtocol(e.resUrl_,u,s,e.admin_)){let r=e.options_;e.admin_&&(r=r||{},r.isAdmin=!0),e._pendingDfd=this.signIn(e.resUrl_,u,r).then(t,s)}}else m=new i(\"identity-manager:not-authenticated\",\"User is not signed in.\"),s(m)},n=()=>{const r=e.sinfo_,i=r.owningSystemUrl,n=e.options_;let o,a,h,l;if(n&&(o=n.token,a=n.error,h=n.prompt),l=this._findCredential(i,{token:o,resource:e.resUrl_}),!l)for(const e of this.credentials)if(this._isIdProvider(i,e.server)){l=e;break}if(l){const i=this.findCredential(e.resUrl_,l.userId);if(i)t(i);else if(R(r,this._legacyFed)){const e=l.toJSON();e.server=r.server,e.resources=null,t(new D(e))}else{(e._pendingDfd=this.generateToken(this.findServerInfo(l.server),null,{serverUrl:e.resUrl_,token:l.token,signal:e.options_.signal,ssl:l.ssl})).then((s=>{t(new D({userId:l.userId,server:r.server,token:s.token,expires:null!=s.expires?Number(s.expires):null,ssl:!!s.ssl,isAdmin:e.admin_,validity:s.validity}))}),s)}}else{this._busy=null,o&&(e.options_.token=null);(e._pendingDfd=this.getCredential(i.replace(/\\/?$/,\"/sharing\"),{resource:e.resUrl_,owningTenant:r.owningTenant,signal:e.options_.signal,token:o,error:a,prompt:h})).then((()=>{this._enqueue(e.resUrl_,e.sinfo_,e.options_,e,e.admin_)}),(t=>{e.resUrl_=e.sinfo_=e.refresh_=null,e.reject(t)}))}};this._errbackFunc=s;const a=e.sinfo_.owningSystemUrl,l=this._isServerRsrc(e.resUrl_),d=e.sinfo_._restInfoPms;d?d.promise.then((t=>{const s=e.sinfo_;if(s._restInfoPms){s.adminTokenServiceUrl=s._restInfoPms.adminUrl,s._restInfoPms=null,s.tokenServiceUrl=h(\"authInfo.tokenServicesUrl\",t)||h(\"authInfo.tokenServiceUrl\",t)||h(\"tokenServiceUrl\",t),s.shortLivedTokenValidity=h(\"authInfo.shortLivedTokenValidity\",t),s.currentVersion=t.currentVersion,s.owningTenant=t.owningTenant;const e=s.owningSystemUrl=t.owningSystemUrl;e&&this._portals.push(e)}l&&s.owningSystemUrl?n():r()}),(()=>{e.sinfo_._restInfoPms=null;const t=new i(\"identity-manager:server-identification-failed\",\"Unknown resource - could not find token service endpoint.\");s(t)})):l&&a?n():e.sinfo_._selfReq?e.sinfo_._selfReq.selfDfd.then((t=>{const s={};let r,i,n,o;return t&&(r=t.user&&t.user.username,s.username=r,s.allSSL=t.allSSL,i=t.supportsOAuth,n=t.currentVersion,\"multitenant\"===t.portalMode&&(o=t.customBaseUrl)),e.sinfo_.webTierAuth=!!r,r&&this.normalizeWebTierAuth?this.generateToken(e.sinfo_,null,{ssl:s.allSSL}).catch((()=>null)).then((e=>(s.portalToken=e&&e.token,s.tokenExpiration=e&&e.expires,s))):!r&&i&&parseFloat(n)>=4.4&&!this._findOAuthInfo(e.resUrl_)?this._generateOAuthInfo({portalUrl:e.sinfo_.server,customBaseUrl:o,owningTenant:e.sinfo_._selfReq.owningTenant}).catch((()=>null)).then((()=>s)):s})).catch((()=>null)).then((t=>{e.sinfo_._selfReq=null,t?r(t.username,t.allSSL,t.portalToken,t.tokenExpiration):r()})):r()}_generateOAuthInfo(e){let t,s,i=e.portalUrl;const n=e.customBaseUrl,o=e.owningTenant,a=!this.defaultOAuthInfo&&this._createDefaultOAuthInfo&&!this._hasTestedIfAppIsOnPortal;if(a){s=window.location.href;let e=s.indexOf(\"?\");e>-1&&(s=s.slice(0,e)),e=s.search(/\\/(apps|home)\\//),s=e>-1?s.slice(0,e):null}return a&&s?(this._hasTestedIfAppIsOnPortal=!0,t=r(s+\"/sharing/rest\",{query:{f:\"json\"}}).then((()=>{this.defaultOAuthInfo=new U({appId:\"arcgisonline\",popupCallbackUrl:s+\"/home/oauth-callback.html\"})}))):t=Promise.resolve(),t.then((()=>{if(this.defaultOAuthInfo)return i=i.replace(/^http:/i,\"https:\"),r(i+\"/sharing/rest/oauth2/validateRedirectUri\",{query:{accountId:o,client_id:this.defaultOAuthInfo.appId,redirect_uri:v(this.defaultOAuthInfo.popupCallbackUrl),f:\"json\"}}).then((e=>{if(e.data.valid){const t=this.defaultOAuthInfo.clone();e.data.urlKey&&n?t.portalUrl=\"https://\"+e.data.urlKey.toLowerCase()+\".\"+n:t.portalUrl=i,t.popup=window!==window.top||!(_(i,this._appOrigin)||this._gwDomains.some((e=>e.regex.test(i)&&e.regex.test(this._appOrigin)))),this.oAuthInfos.push(t)}}))}))}_doOAuthSignIn(e,t,s){const r={portalUrl:s.portalUrl};!s.popup&&s.preserveUrlHash&&window.location.hash&&(r.hash=window.location.hash);const n={client_id:s.appId,response_type:\"token\",state:JSON.stringify(r),expiration:s.expiration,locale:s.locale,redirect_uri:s.popup?v(s.popupCallbackUrl):window.location.href.replace(/#.*$/,\"\")};s.forceLogin&&(n.force_login=!0),s.forceUserId&&s.userId&&(n.prepopulatedusername=s.userId),!s.popup&&this._doPortalSignIn(e)&&(n.redirectToUserOrgUrl=!0);const a=s.portalUrl.replace(/^http:/i,\"https:\")+\"/sharing/oauth2/authorize\",h=a+\"?\"+S(n);if(s.popup){const e=window.open(h,\"esriJSAPIOAuth\",s.popupWindowFeatures);if(e)e.focus(),this._oAuthDfd.oAuthWin_=e,this._oAuthIntervalId=setInterval((()=>{if(e.closed){clearInterval(this._oAuthIntervalId),this._oAuthOnHashHandle.remove();const e=this._oAuthDfd;if(e){const t=new i(\"identity-manager:user-aborted\",\"ABORTED\");e.reject(t)}}}),500),this._oAuthOnHashHandle=o(window,\"arcgis:auth:hash\",(e=>{this.setOAuthResponseHash(e.detail)}));else{const e=new i(\"identity-manager:popup-blocked\",\"ABORTED\");this._oAuthDfd.reject(e)}}else this._rejectOnPersistedPageShow=!0,this._oAuthRedirectFunc?this._oAuthRedirectFunc({authorizeParams:n,authorizeUrl:a,resourceUrl:e,serverInfo:t,oAuthInfo:s}):window.location.href=h}}C.prototype.declaredClass=\"esri.identity.IdentityManagerBase\";let D=class extends n.EventedAccessor{constructor(e){super(e),this._oAuthCred=null,this.tokenRefreshBuffer=2,e&&e._oAuthCred&&(this._oAuthCred=e._oAuthCred)}initialize(){this.resources=this.resources||[],null==this.creationTime&&(this.creationTime=Date.now())}refreshToken(){const e=s.findServerInfo(this.server),t=e&&e.owningSystemUrl,r=!!t&&\"server\"===this.scope,i=r&&R(e,s._legacyFed),n=e.webTierAuth,o=n&&s.normalizeWebTierAuth,a=T[this.server],h=a&&a[this.userId];let l,c=this.resources&&this.resources[0],d=r&&s.findServerInfo(t),u={username:this.userId,password:h};if(n&&!o)return;r&&!d&&s.serverInfos.some((e=>(s._isIdProvider(t,e.server)&&(d=e),!!d)));const p=d&&s.findCredential(d.server,this.userId);if(!r||p){if(!i){if(r)l={serverUrl:c,token:p&&p.token,ssl:p&&p.ssl};else if(o)u=null,l={ssl:this.ssl};else{if(!h){let t;return c&&(c=s._sanitizeUrl(c),this._enqueued=1,t=s._enqueue(c,e,null,null,this.isAdmin,this),t.then((()=>{this._enqueued=0,this.refreshServerTokens()})).catch((()=>{this._enqueued=0}))),t}this.isAdmin&&(l={isAdmin:!0})}return s.generateToken(r?d:e,r?null:u,l).then((e=>{this.token=e.token,this.expires=null!=e.expires?Number(e.expires):null,this.creationTime=Date.now(),this.validity=e.validity,this.emitTokenChange(),this.refreshServerTokens()})).catch((()=>{}))}p.refreshToken()}}refreshServerTokens(){\"portal\"===this.scope&&s.credentials.forEach((e=>{const t=s.findServerInfo(e.server),r=t&&t.owningSystemUrl;e!==this&&e.userId===this.userId&&r&&\"server\"===e.scope&&(s._hasSameServerInstance(this.server,r)||s._isIdProvider(r,this.server))&&(R(t,s._legacyFed)?(e.token=this.token,e.expires=this.expires,e.creationTime=this.creationTime,e.validity=this.validity,e.emitTokenChange()):e.refreshToken())}))}emitTokenChange(e){clearTimeout(this._refreshTimer);const t=this.server&&s.findServerInfo(this.server),r=t&&t.owningSystemUrl,i=r&&s.findServerInfo(r);!1===e||r&&\"portal\"!==this.scope&&(!i||!i.webTierAuth||s.normalizeWebTierAuth)||null==this.expires&&null==this.validity||this._startRefreshTimer(),this.emit(\"token-change\")}destroy(){this.userId=this.server=this.token=this.expires=this.validity=this.resources=this.creationTime=null,this._oAuthCred&&(this._oAuthCred.destroy(),this._oAuthCred=null);const e=s.credentials.indexOf(this);e>-1&&s.credentials.splice(e,1),this.emitTokenChange(),this.emit(\"destroy\")}toJSON(){const e=a({userId:this.userId,server:this.server,token:this.token,expires:this.expires,validity:this.validity,ssl:this.ssl,isAdmin:this.isAdmin,creationTime:this.creationTime,scope:this.scope}),t=this.resources;return t&&t.length>0&&(e.resources=t.slice()),e}_startRefreshTimer(){clearTimeout(this._refreshTimer);const e=6e4*this.tokenRefreshBuffer,t=2**31-1;let s=(this.validity?this.creationTime+6e4*this.validity:this.expires)-Date.now();s<0?s=0:s>t&&(s=t),this._refreshTimer=setTimeout(this.refreshToken.bind(this),s>e?s-e:s)}};e([w()],D.prototype,\"creationTime\",void 0),e([w()],D.prototype,\"expires\",void 0),e([w()],D.prototype,\"isAdmin\",void 0),e([w()],D.prototype,\"oAuthState\",void 0),e([w()],D.prototype,\"resources\",void 0),e([w()],D.prototype,\"scope\",void 0),e([w()],D.prototype,\"server\",void 0),e([w()],D.prototype,\"ssl\",void 0),e([w()],D.prototype,\"token\",void 0),e([w()],D.prototype,\"tokenRefreshBuffer\",void 0),e([w()],D.prototype,\"userId\",void 0),e([w()],D.prototype,\"validity\",void 0),D=e([I(\"esri.identity.Credential\")],D);export{D as Credential,C as IdentityManagerBase};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport{setId as e}from\"../kernel.js\";import{IdentityManagerBase as t}from\"./IdentityManagerBase.js\";class r extends t{}r.prototype.declaredClass=\"esri.identity.IdentityManager\";const s=new r;e(s);export{s as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport{_ as r}from\"../chunks/tslib.es6.js\";import t from\"./Accessor.js\";import{read as s}from\"./accessorSupport/read.js\";import{write as e}from\"./accessorSupport/write.js\";import{subclass as o}from\"./accessorSupport/decorators/subclass.js\";const i=t=>{let i=class extends t{constructor(...r){super(...r)}read(r,t){s(this,r,t)}write(r={},t){return e(this,r,t)}toJSON(r){return this.write({},r)}static fromJSON(r,t){return c.call(this,r,t)}};return i=r([o(\"esri.core.JSONSupport\")],i),i.prototype.toJSON.isDefaultToJSON=!0,i};function c(r,t){if(!r)return null;if(r.declaredClass)throw new Error(\"JSON object is already hydrated\");const s=new this;return s.read(r,t),s}function n(r){return r&&\"read\"in r&&\"write\"in r&&\"toJSON\"in r}let a=class extends(i(t)){};a=r([o(\"esri.core.JSONSupport\")],a);export{a as JSONSupport,i as JSONSupportMixin,n as isJSONSupport};\n"],"sourceRoot":""}