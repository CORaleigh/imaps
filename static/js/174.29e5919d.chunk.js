(this.webpackJsonpimaps=this.webpackJsonpimaps||[]).push([[174],{1092:function(e,t,l){},1247:function(e,t,l){"use strict";l.r(t),l.d(t,"Shell",(function(){return k}));var i=l(0),c=l(6),n=l.n(c);l(1092);const a=e=>{var t,l;(null===(t=e.target)||void 0===t?void 0:t.parentElement).collapsed=null===(l=e.target)||void 0===l?void 0:l.dismissed},s=(e,t,l)=>{t.isActive?t.isActive=!1:(((e,t)=>{innerWidth<1e3?e.forEach((e=>{e.isActive=!1})):t?e.forEach((e=>{e.isActive=e.isActive&&!e.isTool})):e.forEach((e=>{e.isActive=e.isActive&&e.isTool}))})(l,t.isTool),t.isActive=!0);const i=e.target.closest("calcite-shell-panel");return t.isActive?null===i||void 0===i||i.removeAttribute("collapsed"):null===i||void 0===i||i.setAttribute("collapsed",""),l},r=(e,t,l,i)=>{document.querySelectorAll("calcite-action[active]").forEach((l=>{const i=e.find((e=>e.title===l.getAttribute("text")));var c,n,a;window.innerWidth>=1e3&&(null===i||void 0===i?void 0:i.isActive)&&t<1e3&&(i.isTool&&(null===(c=document.querySelector("calcite-shell-panel[slot=contextual-panel]"))||void 0===c||c.setAttribute("collapsed",""),i.isActive=!1));window.innerWidth<1e3&&(null===i||void 0===i?void 0:i.isActive)&&t>=1e3&&(i.isTool?(null===(n=document.querySelector("calcite-shell-panel[slot=primary-panel]"))||void 0===n||n.removeAttribute("collapsed"),i.isActive=!1):null===(a=document.querySelector("calcite-shell-panel[slot=contextual-panel]"))||void 0===a||a.removeAttribute("collapsed"))})),l(window.innerWidth),i([...e])};var o=l(7),d=l(3),u=l(8),b=l(2);const j=Object(i.lazy)((()=>Promise.all([l.e(1),l.e(2),l.e(3),l.e(4),l.e(55)]).then(l.bind(null,1224)))),v=Object(i.lazy)((()=>l.e(171).then(l.bind(null,1115)))),h=Object(i.lazy)((()=>l.e(175).then(l.bind(null,1116)))),m=Object(i.lazy)((()=>l.e(100).then(l.bind(null,1248)))),p=Object(i.lazy)((()=>Promise.all([l.e(1),l.e(2),l.e(3),l.e(4),l.e(58)]).then(l.bind(null,1249)))),O=Object(i.lazy)((()=>Promise.all([l.e(1),l.e(2),l.e(3),l.e(4),l.e(64)]).then(l.bind(null,1227)))),x=Object(i.lazy)((()=>Promise.all([l.e(1),l.e(2),l.e(3),l.e(4),l.e(60)]).then(l.bind(null,1220)))),f=Object(i.lazy)((()=>Promise.all([l.e(1),l.e(2),l.e(3),l.e(15),l.e(84)]).then(l.bind(null,1117)))),y=Object(i.lazy)((()=>Promise.all([l.e(1),l.e(2),l.e(3),l.e(4),l.e(53)]).then(l.bind(null,1118)))),A=Object(i.lazy)((()=>Promise.all([l.e(1),l.e(2),l.e(10),l.e(15),l.e(93)]).then(l.bind(null,1225)))),S=Object(i.lazy)((()=>Promise.all([l.e(1),l.e(2),l.e(3),l.e(4),l.e(54)]).then(l.bind(null,1228)))),w=Object(i.lazy)((()=>Promise.all([l.e(15),l.e(27),l.e(46),l.e(90),l.e(271)]).then(l.bind(null,1119)))),g=Object(i.lazy)((()=>Promise.all([l.e(1),l.e(2),l.e(4),l.e(15),l.e(88)]).then(l.bind(null,1232)))),k=()=>{const[e,t]=Object(i.useState)([]),[l,c]=Object(i.useState)(),[k,P]=Object(i.useState)(window.innerWidth),E=Object(i.useRef)(),[z,T]=Object(i.useState)(!1),[_,C]=Object(i.useState)([]),[q,L]=Object(i.useState)(),{theme:M,setTheme:$}=Object(i.useContext)(o.a),N=Object(i.useRef)(),B=Object(i.useRef)(),F=Object(i.useRef)(),I=Object(i.useRef)(),[R,W]=Object(i.useState)(),{actions:D,setActions:J}=Object(i.useContext)(u.a),V=e=>{L({...q,attributes:null===e||void 0===e?void 0:e.attributes,geometry:null===e||void 0===e?void 0:e.geometry});const t=D.find((e=>"Property Select"===e.title));if(t&&E.current){const l=document.getElementById(null===t||void 0===t?void 0:t.container);l&&n.a.render(Object(b.jsx)(i.Suspense,{fallback:"",children:Object(b.jsx)(y,{view:E.current,selectedFeature:e,geometrySet:Y,toolActivated:U})}),l)}},G=()=>{const e=D.find((e=>e.isActive));e&&(e.isActive=!1);const t=D.find((e=>"Property Search"===e.title));t&&(t.isActive=!0);const l=document.getElementById(null===t||void 0===t?void 0:t.container);if(l){(null===l||void 0===l?void 0:l.closest(".action-panel")).hidden=!1;const e=null===l||void 0===l?void 0:l.closest("calcite-shell-panel");null===e||void 0===e||e.removeAttribute("collapsed")}return l},H=e=>{C([..._,...e]),e.length>1&&L({...q,attributes:null});const t=G();n.a.render(Object(b.jsx)(i.Suspense,{fallback:"",children:Object(b.jsx)(m,{propertiesSelected:H,featureSelected:V,selectedProperties:e})}),t),console.log("setActions"),J([...D])},K=e=>{var t,l,i;N.current=e,null===(t=B.current)||void 0===t||t.cancel(),null===(l=F.current)||void 0===l||null===(i=l.viewModel.activeViewModel)||void 0===i||i.clear(),I.current&&(I.current.viewModel.mode="live"),W("sketch")},Q=(e,t)=>{var l,i;F.current=e,I.current=t,null===(l=N.current)||void 0===l||l.cancel(),null===(i=B.current)||void 0===i||i.cancel(),W("measure")},U=e=>{var t,l,i;B.current=e,null===(t=N.current)||void 0===t||t.cancel(),null===(l=F.current)||void 0===l||null===(i=l.viewModel.activeViewModel)||void 0===i||i.clear(),I.current&&(I.current.viewModel.mode="live"),W("select")},X=l=>{var i,n;let a;return a=l?D.find((e=>e.isActive&&e.isTool)):D.find((e=>e.isActive)),(null===(i=a)||void 0===i||null===(n=i.tips)||void 0===n?void 0:n.length)?Object(b.jsx)("calcite-action",{text:"Action",label:"Action",slot:"header-actions-end",icon:"lightbulb",appearance:"solid",scale:"m","calcite-hydrated":"",onClick:()=>{t([...e,...a.tips]),c(a.title)}}):""},Y=e=>{const t=G();n.a.render(Object(b.jsx)(i.Suspense,{fallback:"",children:Object(b.jsx)(m,{geometry:e,propertiesSelected:H,selectedProperties:_,featureSelected:V,selectedFeature:q})}),t)},Z=e=>{if(e){const t=document.getElementById(e.container);(null===t||void 0===t?void 0:t.hasChildNodes())||("Property Search"===e.title&&n.a.render(Object(b.jsx)(i.Suspense,{fallback:"",children:Object(b.jsx)(m,{view:E.current,propertiesSelected:H,featureSelected:V,selectedProperties:_})}),t),"Location Search"===e.title&&n.a.render(Object(b.jsx)(i.Suspense,{fallback:"",children:Object(b.jsx)(p,{view:E.current})}),t),"Layers"===e.title&&n.a.render(Object(b.jsx)(i.Suspense,{fallback:"",children:Object(b.jsx)(O,{view:E.current})}),t),"Basemaps"===e.title&&n.a.render(Object(b.jsx)(i.Suspense,{fallback:"",children:Object(b.jsx)(x,{view:E.current,default:d.b.default.id,imagery:d.b.imagery.id})}),t),"Legend"===e.title&&n.a.render(Object(b.jsx)(i.Suspense,{fallback:"",children:Object(b.jsx)(f,{view:E.current})}),t),"Property Select"===e.title&&n.a.render(Object(b.jsx)(i.Suspense,{fallback:"",children:Object(b.jsx)(y,{view:E.current,geometrySet:Y,selectedFeature:q,toolActivated:U,activeTool:R})}),t),"Measure"===e.title&&n.a.render(Object(b.jsx)(i.Suspense,{fallback:"",children:Object(b.jsx)(A,{view:E.current,measurementActivated:Q,activeTool:R})}),t),"Sketch"===e.title&&n.a.render(Object(b.jsxs)(i.Suspense,{fallback:"",children:[Object(b.jsx)(S,{view:E.current,toolActivated:K,activeTool:R})," "]}),t),"Bookmarks"===e.title&&n.a.render(Object(b.jsxs)(i.Suspense,{fallback:"",children:[Object(b.jsx)(w,{view:E.current})," "]}),t),"Print"===e.title&&n.a.render(Object(b.jsxs)(i.Suspense,{fallback:"",children:[Object(b.jsx)(g,{view:E.current})," "]}),t))}};return Object(i.useEffect)((()=>{var e,t,l;document.querySelectorAll("calcite-panel").forEach((e=>{null===e||void 0===e||e.addEventListener("calcitePanelDismissedChange",a)}));return((e,t)=>{e?("dark"===e&&t("dark"),"light"===e&&t("light")):window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?(e="dark",t("dark")):(e="light",t("light")),document.body.classList.remove("light"===e?"dark":"light"),document.body.classList.add("light"===e?"light":"dark");const l=Array.from(document.head.querySelectorAll("link")).find((t=>t.href.includes(`${e}/main.css`)));var i;l&&document.head.appendChild(l),void 0!=window.matchMedia&&void 0!=window.matchMedia("(prefers-color-scheme: dark)").addEventListener&&(null===(i=window.matchMedia("(prefers-color-scheme: dark)"))||void 0===i||i.addEventListener("change",(e=>{const l=e.matches?"dark":"light";t(l),window.localStorage.setItem("imaps_theme",l),document.body.classList.remove("light"===l?"dark":"light"),document.body.classList.add("light"===l?"light":"dark");const i=Array.from(document.head.querySelectorAll("link")).find((e=>e.href.includes(`${l}/main.css`)));i&&document.head.appendChild(i)})))})(window.localStorage.getItem("imaps_theme"),$),window.addEventListener("resize",(()=>{r(D,k,P,J)})),null===(e=document.querySelector("calcite-shell-panel"))||void 0===e||null===(t=e.shadowRoot)||void 0===t||null===(l=t.querySelector(".content"))||void 0===l||l.setAttribute("style","width: calc(var(--calcite-panel-width-multiplier) * 100vw) !important;"),()=>{window.removeEventListener("resize",(()=>{r(D,k,P,J)})),document.querySelectorAll("calcite-panel").forEach((e=>{null===e||void 0===e||e.removeEventListener("calcitePanelDismissedChange",a)}))}}),[D]),Object(b.jsxs)("div",{children:[Object(b.jsxs)("calcite-shell",{theme:M,className:"shell",children:[k>=1e3?Object(b.jsxs)("calcite-shell-panel",{slot:"primary-panel",position:"start","width-scale":"l",collapsed:!0,children:[Object(b.jsx)("calcite-action-bar",{"expand-disabled":!0,slot:"action-bar",children:D.map((e=>{if(e.isTool)return Object(b.jsxs)("div",{children:[Object(b.jsx)("calcite-tooltip",{placement:"trailing",label:e.title,"reference-element":`${e.container}_action`,children:e.title}),Object(b.jsx)("calcite-tooltip-manager",{children:Object(b.jsx)("calcite-action",{text:e.title,name:e.container,icon:e.icon,id:`${e.container}_action`,disabled:z?null:"",onClick:async t=>{console.log("setActions"),J([...s(t,e,D)]),requestAnimationFrame((()=>{Z(e)}))},active:!0===e.isActive?"":null})})]},`${e.container}_action_primary`)}))}),D.map((e=>{if(e.isTool&&e.isActive)return console.log(e),Object(b.jsxs)("div",{className:"panel-header",children:[Object(b.jsx)("div",{className:"panel-title",children:e.title}),Object(b.jsxs)("div",{className:"header-actions",children:[X(!0),Object(b.jsx)("calcite-action",{"aria-label":"Close",appearance:"solid",scale:"m","calcite-hydrated":"",icon:"x",onClick:()=>{var t,l;null===(t=document)||void 0===t||null===(l=t.querySelector("calcite-shell-panel[slot=primary-panel]"))||void 0===l||l.setAttribute("collapsed",""),e.isActive=!1,console.log("setActions"),J([...D])}})]})]},`${e.icon}_header_primary`)})),D.map((e=>{if(e.isTool)return Object(b.jsx)("div",{id:e.container,className:"action-panel",hidden:!e.isActive},`${e.container}_primary`)}))]}):"",Object(b.jsxs)("calcite-shell-panel",{slot:"contextual-panel",position:"end","width-scale":"l",children:[Object(b.jsx)("calcite-action-bar",{"expand-disabled":!0,slot:"action-bar",children:D.map((e=>{if(!e.isTool||k<1e3)return Object(b.jsxs)("div",{children:[Object(b.jsx)("calcite-tooltip",{placement:"leading",label:e.title,"reference-element":`${e.container}_action`,children:e.title}),Object(b.jsx)("calcite-tooltip-manager",{children:Object(b.jsx)("calcite-action",{text:e.title,name:e.container,icon:e.icon,id:`${e.container}_action`,disabled:z?null:"",onClick:async t=>{console.log("setActions"),J([...s(t,e,D)]),requestAnimationFrame((()=>{Z(e)}))},active:!0===e.isActive?"":null})})]},`${e.container}_action_contextual`)}))}),D.map((e=>{if((!e.isTool||k<1e3)&&e.isActive)return Object(b.jsxs)("div",{className:"panel-header",children:[Object(b.jsx)("div",{className:"panel-title",children:e.title}),Object(b.jsxs)("div",{className:"header-actions",children:[X(!1),Object(b.jsx)("calcite-action",{"aria-label":"Close",appearance:"solid",scale:"m","calcite-hydrated":"",icon:"x",onClick:()=>{var t,l;null===(t=document)||void 0===t||null===(l=t.querySelector("calcite-shell-panel[slot=contextual-panel]"))||void 0===l||l.setAttribute("collapsed",""),e.isActive=!1,console.log("setActions"),J([...D])}})]})]},`${e.icon}_header_contextual`)})),D.map((e=>{if(!e.isTool||k<1e3)return Object(b.jsx)("div",{className:"action-panel",id:e.container,hidden:!e.isActive},`${e.container}_contextual`)}))]}),Object(b.jsx)("div",{slot:"shell-header",children:Object(b.jsx)(i.Suspense,{fallback:"",children:Object(b.jsx)(v,{links:d.c})})}),Object(b.jsx)(i.Suspense,{fallback:"",children:Object(b.jsx)(j,{id:"95092428774c4b1fb6a3b6f5fed9fbc4",initialized:async e=>{if(!z){E.current=e,T(!0);const t=document.getElementById("propertySearch");e.map&&n.a.render(Object(b.jsx)(i.Suspense,{fallback:"",children:Object(b.jsx)(m,{view:e,propertiesSelected:H,featureSelected:V,selectedProperties:_,toolActivated:U})}),t)}},geometryChanged:Y,selectedProperties:_,selectedFeature:q})})]}),Object(b.jsx)(i.Suspense,{fallback:"",children:Object(b.jsx)(h,{tips:e,title:l,closed:!0,tipsDismissed:()=>{t([]),c("")}})})]})};t.default=k}}]);
//# sourceMappingURL=174.29e5919d.chunk.js.map