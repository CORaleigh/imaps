{"version":3,"sources":["../node_modules/@arcgis/core/symbols/support/defaultsJSON.js","../node_modules/@arcgis/core/layers/graphics/sources/geojson/GeoJSONSourceWorker.js","../node_modules/@arcgis/core/layers/graphics/sources/support/clientSideDefaults.js","../node_modules/@arcgis/core/layers/graphics/sources/geojson/geojson.js"],"names":["e","i","l","type","style","size","color","outline","width","o","S","t","font","family","weight","horizontalAlignment","kerning","haloColor","haloSize","rotated","text","xoffset","yoffset","angle","r","s","y","O","hasAttachments","capabilities","useStandardizedQueries","supportsCoordinatesQuantization","supportsReturningQueryGeometry","advancedQueryCapabilities","supportsQueryAttachments","supportsStatistics","supportsPercentileStatistics","supportsReturningGeometryCentroid","supportsQueryWithDistance","supportsDistinct","supportsReturningQueryExtent","supportsReturningGeometryProperties","supportsHavingClause","supportsOrderBy","supportsPagination","supportsQueryWithResultType","supportsSqlExpression","supportsDisjointSpatialRel","C","constructor","this","_queryEngine","_snapshotFeatures","async","_fetch","_createFeatures","destroy","_fieldsIndex","_createDefaultAttributes","loadOptions","url","customParameters","_checkProjection","spatialReference","signal","n","_","geometryType","a","fields","hasZ","u","d","objectIdField","objectIdFieldName","p","c","timeInfo","unknownFields","length","push","name","message","details","find","editable","nullable","alias","objectIdFieldType","unshift","m","field","k","jsonValues","includes","D","R","f","requiredFields","indexOf","splice","startTimeField","get","endTimeField","trackIdField","I","F","j","warnings","featureErrors","layerDefinition","drawingInfo","templates","E","extent","g","hasM","featureStore","h","cacheSpatialQueries","b","T","_objectIdGenerator","_createObjectIdGenerator","w","_normalizeFeatures","addMany","fullExtent","start","end","timeExtent","Promise","all","adds","updates","_waitSnapshotComplete","_applyEdits","executeQuery","executeQueryForCount","executeQueryForIds","executeQueryForExtent","executeQueryForSnapping","_snapshotTask","abort","promise","then","clear","getLogger","error","geometry","finished","responseType","query","data","attributes","_assignObjectId","objectId","deletes","addResults","deleteResults","updateResults","uidToObjectId","_applyAddEdits","_applyUpdateEdits","q","removeManyById","featureEditResults","x","uid","has","getFeature","add","fieldsIndex","Date","now","toString","Number","NEGATIVE_INFINITY","Math","max","renderer","symbol","JSON","stringify","Function","description","prototype","attachment","isVersioned","supportsAttachment","supportsM","supportsZ","metadata","supportsAdvancedFieldProperties","operations","supportsCalculate","supportsTruncate","supportsValidateSql","supportsAdd","supportsDelete","supportsEditing","supportsChangeTracking","supportsQuery","supportsResizeAttachments","supportsSync","supportsUpdate","supportsExceedsLimitStatistics","queryRelated","supportsCount","editing","supportsGeometryUpdate","supportsGlobalId","supportsReturnServiceEditsInSourceSpatialReference","supportsRollbackOnFailure","supportsUpdateWithoutM","supportsUploadWithItemId","supportsDeleteByAnonymous","supportsDeleteByOthers","supportsUpdateByAnonymous","supportsUpdateByOthers","LineString","MultiLineString","MultiPoint","Point","Polygon","MultiPolygon","features","coordinates","M","P","G","lengths","coords","crs","properties","code","RegExp","test","Set","id","Object","keys","filter","delete","Array","from","L"],"mappings":"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","file":"static/js/200.57b85aef.chunk.js","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nconst e=[252,146,31,255],i=[153,153,153,255],l={type:\"esriSMS\",style:\"esriSMSCircle\",size:6,color:e,outline:{type:\"esriSLS\",style:\"esriSLSSolid\",width:.75,color:[153,153,153,255]}},o={type:\"esriSLS\",style:\"esriSLSSolid\",width:.75,color:e},S={type:\"esriSFS\",style:\"esriSFSSolid\",color:[252,146,31,196],outline:{type:\"esriSLS\",style:\"esriSLSSolid\",width:.75,color:[255,255,255,191]}},t={type:\"esriTS\",color:[255,255,255,255],font:{family:\"arial-unicode-ms\",size:10,weight:\"bold\"},horizontalAlignment:\"center\",kerning:!0,haloColor:[0,0,0,255],haloSize:1,rotated:!1,text:\"\",xoffset:0,yoffset:0,angle:0},r={type:\"esriSMS\",style:\"esriSMSCircle\",color:[0,0,0,255],outline:null,size:10.5},s={type:\"esriSLS\",style:\"esriSLSSolid\",color:[0,0,0,255],width:1.5},y={type:\"esriSFS\",style:\"esriSFSSolid\",color:[0,0,0,255],outline:null};export{e as defaultColor,i as defaultOutlineColor,l as defaultPointSymbolJSON,S as defaultPolygonSymbolJSON,o as defaultPolylineSymbolJSON,t as defaultTextSymbolJSON,r as errorPointSymbolJSON,y as errorPolygonSymbolJSON,s as errorPolylineSymbolJSON};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport e from\"../../../../request.js\";import t from\"../../../../core/Error.js\";import s from\"../../../../core/Logger.js\";import{isSome as i}from\"../../../../core/maybe.js\";import{createTask as r,isAbortError as n}from\"../../../../core/promiseUtils.js\";import{getJsonType as a}from\"../../../../geometry/support/jsonUtils.js\";import{WGS84 as o,equals as l}from\"../../../../geometry/support/spatialReferenceUtils.js\";import{convertFromGeometry as u,convertToGeometry as d,convertFromFeatures as p,convertToFeature as c,convertFromFeature as y}from\"../../featureConversionUtils.js\";import h from\"../../data/FeatureStore.js\";import{checkProjectionSupport as m,project as f}from\"../../data/projectionSupport.js\";import g from\"../../data/QueryEngine.js\";import{inferLayerProperties as _,createOptimizedFeatures as I,validateGeoJSON as j}from\"./geojson.js\";import{createDrawingInfo as F,createDefaultTemplate as E,createDefaultAttributesFunction as b}from\"../support/clientSideDefaults.js\";import{loadGeometryEngineForSimplify as T,mixAttributes as w,createFeatureEditSuccessResult as q,createFeatureEditErrorResult as x,simplify as S}from\"../support/sourceUtils.js\";import R from\"../../../support/FieldsIndex.js\";import{kebabDict as k}from\"../../../support/fieldType.js\";import{getFieldDefaultValue as D}from\"../../../support/fieldUtils.js\";const O={hasAttachments:!1,capabilities:\"query, editing, create, delete, update\",useStandardizedQueries:!0,supportsCoordinatesQuantization:!0,supportsReturningQueryGeometry:!0,advancedQueryCapabilities:{supportsQueryAttachments:!1,supportsStatistics:!0,supportsPercentileStatistics:!0,supportsReturningGeometryCentroid:!0,supportsQueryWithDistance:!0,supportsDistinct:!0,supportsReturningQueryExtent:!0,supportsReturningGeometryProperties:!1,supportsHavingClause:!0,supportsOrderBy:!0,supportsPagination:!0,supportsQueryWithResultType:!1,supportsSqlExpression:!0,supportsDisjointSpatialRel:!0}};class C{constructor(){this._queryEngine=null,this._snapshotFeatures=async e=>{const t=await this._fetch(e);return this._createFeatures(t)}}destroy(){var e;null==(e=this._queryEngine)||e.destroy(),this._queryEngine=this._fieldsIndex=this._createDefaultAttributes=null}async load(e,s={}){this.loadOptions={url:e.url,customParameters:e.customParameters};const i=[];await this._checkProjection(e.spatialReference);let r=null;e.url&&(r=await this._fetch(null==s?void 0:s.signal));const n=_(r,{geometryType:e.geometryType}),a=e.fields||n.fields||[],l=null!=e.hasZ?e.hasZ:n.hasZ,u=n.geometryType,d=e.objectIdField||n.objectIdFieldName||\"__OBJECTID\",p=e.spatialReference||o;let c=e.timeInfo;a===n.fields&&n.unknownFields.length>0&&i.push({name:\"geojson-layer:unknown-field-types\",message:\"Some fields types couldn't be inferred from the features and were dropped\",details:{unknownFields:n.unknownFields}});let y=a.find((e=>e.name===d));y?(\"esriFieldTypeString\"!==y.type&&(y.type=\"esriFieldTypeOID\"),y.editable=!1,y.nullable=!1):(y={alias:d,name:d,type:\"string\"===n.objectIdFieldType?\"esriFieldTypeString\":\"esriFieldTypeOID\",editable:!1,nullable:!1},a.unshift(y));const m={};for(const o of a){if(null==o.name&&(o.name=o.alias),null==o.alias&&(o.alias=o.name),!o.name)throw new t(\"geojson-layer:invalid-field-name\",\"field name is missing\",{field:o});if(!k.jsonValues.includes(o.type))throw new t(\"geojson-layer:invalid-field-type\",`invalid type for field \"${o.name}\"`,{field:o});if(o.name!==y.name){const e=D(o);void 0!==e&&(m[o.name]=e)}}this._fieldsIndex=new R(a);const f=this._fieldsIndex.requiredFields.indexOf(y);if(f>-1&&this._fieldsIndex.requiredFields.splice(f,1),c){if(c.startTimeField){const e=this._fieldsIndex.get(c.startTimeField);e?(c.startTimeField=e.name,e.type=\"esriFieldTypeDate\"):c.startTimeField=null}if(c.endTimeField){const e=this._fieldsIndex.get(c.endTimeField);e?(c.endTimeField=e.name,e.type=\"esriFieldTypeDate\"):c.endTimeField=null}if(c.trackIdField){const e=this._fieldsIndex.get(c.trackIdField);e?c.trackIdField=e.name:(c.trackIdField=null,i.push({name:\"geojson-layer:invalid-timeInfo-trackIdField\",message:\"trackIdField is missing\",details:{timeInfo:c}}))}c.startTimeField||c.endTimeField||(i.push({name:\"geojson-layer:invalid-timeInfo\",message:\"startTimeField and endTimeField are missing\",details:{timeInfo:c}}),c=null)}const I=u?F(u):null,j={warnings:i,featureErrors:[],layerDefinition:{...O,drawingInfo:I,templates:E(m),extent:null,geometryType:u,objectIdField:d,fields:a,hasZ:!!l,timeInfo:c}};this._queryEngine=new g({fields:a,geometryType:u,hasM:!1,hasZ:l,objectIdField:d,spatialReference:p,timeInfo:c,featureStore:new h({geometryType:u,hasM:!1,hasZ:l}),cacheSpatialQueries:!0}),this._createDefaultAttributes=b(m,d);const T=await this._createFeatures(r);this._objectIdGenerator=this._createObjectIdGenerator(this._queryEngine,T);const w=this._normalizeFeatures(T,j.warnings,j.featureErrors);if(this._queryEngine.featureStore.addMany(w),j.layerDefinition.extent=this._queryEngine.fullExtent,j.layerDefinition.timeInfo){const{start:e,end:t}=this._queryEngine.timeExtent;j.layerDefinition.timeInfo.timeExtent=[e,t]}return j}async applyEdits(e){const{spatialReference:t,geometryType:s}=this._queryEngine;return await Promise.all([T(t,s),m(e.adds,t),m(e.updates,t)]),await this._waitSnapshotComplete(),this._applyEdits(e)}async queryFeatures(e={},t={}){return await this._waitSnapshotComplete(),this._queryEngine.executeQuery(e,t.signal)}async queryFeatureCount(e={},t={}){return await this._waitSnapshotComplete(),this._queryEngine.executeQueryForCount(e,t.signal)}async queryObjectIds(e={},t={}){return await this._waitSnapshotComplete(),this._queryEngine.executeQueryForIds(e,t.signal)}async queryExtent(e={},t={}){return await this._waitSnapshotComplete(),this._queryEngine.executeQueryForExtent(e,t.signal)}async querySnapping(e,t={}){return await this._waitSnapshotComplete(),this._queryEngine.executeQueryForSnapping(e,t.signal)}async refresh(e){var i;return this.loadOptions.customParameters=e,null==(i=this._snapshotTask)||i.abort(),this._snapshotTask=r(this._snapshotFeatures),this._snapshotTask.promise.then((e=>{this._queryEngine.featureStore.clear(),this._objectIdGenerator=this._createObjectIdGenerator(this._queryEngine,e);const t=this._normalizeFeatures(e);t&&this._queryEngine.featureStore.addMany(t)}),(e=>{this._queryEngine.featureStore.clear(),n(e)||s.getLogger(\"esri.layers.GeoJSONLayer\").error(new t(\"geojson-layer:refresh\",\"An error occurred during refresh\",{error:e}))})),await this._waitSnapshotComplete(),{extent:this._queryEngine.fullExtent,timeExtent:this._queryEngine.timeExtent}}async _createFeatures(e){const{geometryType:t,hasZ:s,objectIdField:r}=this._queryEngine,n=I(e,{geometryType:t,hasZ:s,objectIdField:r});if(!l(this._queryEngine.spatialReference,o))for(const a of n)i(a.geometry)&&(a.geometry=u(f(d(a.geometry,this._queryEngine.geometryType,this._queryEngine.hasZ,!1),o,this._queryEngine.spatialReference)));return n}async _waitSnapshotComplete(){if(this._snapshotTask&&!this._snapshotTask.finished){try{await this._snapshotTask.promise}catch{}return this._waitSnapshotComplete()}}async _fetch(t){const{url:s,customParameters:i}=this.loadOptions,r=(await e(s,{responseType:\"json\",query:{...i},signal:t})).data;return await j(r),r}_normalizeFeatures(e,t,s){const{objectIdField:i}=this._queryEngine,r=[];for(const n of e){const e=this._createDefaultAttributes(),a=w(this._fieldsIndex,e,n.attributes,!0,t);a?null==s||s.push(a):(this._assignObjectId(e,n.attributes,!0),n.attributes=e,n.objectId=e[i],r.push(n))}return r}_applyEdits(e){const{adds:t,updates:s,deletes:i}=e,r={addResults:[],deleteResults:[],updateResults:[],uidToObjectId:{}};if(t&&t.length&&this._applyAddEdits(r,t),s&&s.length&&this._applyUpdateEdits(r,s),i&&i.length){for(const e of i)r.deleteResults.push(q(e));this._queryEngine.featureStore.removeManyById(i)}return{extent:this._queryEngine.fullExtent,timeExtent:this._queryEngine.timeExtent,featureEditResults:r}}_applyAddEdits(e,t){const{addResults:s}=e,{geometryType:r,hasM:n,hasZ:o,objectIdField:l,spatialReference:u,featureStore:d}=this._queryEngine,c=[];for(const p of t){if(p.geometry&&r!==a(p.geometry)){s.push(x(\"Incorrect geometry type.\"));continue}const t=this._createDefaultAttributes(),n=w(this._fieldsIndex,t,p.attributes);if(n)s.push(n);else{if(this._assignObjectId(t,p.attributes),p.attributes=t,null!=p.uid){const t=p.attributes[l];e.uidToObjectId[p.uid]=t}i(p.geometry)&&(p.geometry=f(S(p.geometry,u),p.geometry.spatialReference,u)),c.push(p),s.push(q(p.attributes[l]))}}d.addMany(p([],c,r,o,n,l))}_applyUpdateEdits({updateResults:e},t){const{geometryType:s,hasM:r,hasZ:n,objectIdField:o,spatialReference:l,featureStore:u}=this._queryEngine;for(const d of t){const{attributes:t,geometry:p}=d,h=t&&t[o];if(null==h){e.push(x(`Identifier field ${o} missing`));continue}if(!u.has(h)){e.push(x(`Feature with object id ${h} missing`));continue}const m=c(u.getFeature(h),s,n,r);if(i(p)){if(s!==a(p)){e.push(x(\"Incorrect geometry type.\"));continue}m.geometry=f(S(p,l),p.spatialReference,l)}if(t){const s=w(this._fieldsIndex,m.attributes,t);if(s){e.push(s);continue}}u.add(y(m,s,n,r,o)),e.push(q(h))}}_createObjectIdGenerator(e,t){const s=e.fieldsIndex.get(e.objectIdField);if(\"esriFieldTypeString\"===s.type)return()=>s.name+\"-\"+Date.now().toString(16);let i=Number.NEGATIVE_INFINITY;for(const r of t)r.objectId&&(i=Math.max(i,r.objectId));return i=Math.max(0,i)+1,()=>i++}_assignObjectId(e,t,s=!1){const i=this._queryEngine.objectIdField;e[i]=s&&i in t?t[i]:this._objectIdGenerator()}async _checkProjection(e){try{await m(o,e)}catch{throw new t(\"geojson-layer\",\"Projection not supported\")}}}export{C as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport t from\"../../../../core/has.js\";import{clone as s}from\"../../../../core/lang.js\";import{queryCapabilities as e}from\"../../data/QueryEngineCapabilities.js\";import{defaultPointSymbolJSON as r,defaultPolylineSymbolJSON as p,defaultPolygonSymbolJSON as o}from\"../../../../symbols/support/defaultsJSON.js\";function u(t){return{renderer:{type:\"simple\",symbol:\"esriGeometryPoint\"===t||\"esriGeometryMultipoint\"===t?r:\"esriGeometryPolyline\"===t?p:o}}}function n(s,e){if(t(\"esri-csp-restrictions\"))return()=>({[e]:null,...s});try{let t=`this.${e} = null;`;for(const e in s){t+=`this${e.includes(\".\")?`[\"${e}\"]`:`.${e}`} = ${JSON.stringify(s[e])};`}const r=new Function(t);return()=>new r}catch(r){return()=>({[e]:null,...s})}}function i(t={}){return[{name:\"New Feature\",description:\"\",prototype:{attributes:s(t)}}]}function a(t,s){return{attachment:null,data:{isVersioned:!1,supportsAttachment:!1,supportsM:!1,supportsZ:t},metadata:{supportsAdvancedFieldProperties:!1},operations:{supportsCalculate:!1,supportsTruncate:!1,supportsValidateSql:!1,supportsAdd:s,supportsDelete:s,supportsEditing:s,supportsChangeTracking:!1,supportsQuery:!0,supportsQueryAttachments:!1,supportsResizeAttachments:!1,supportsSync:!1,supportsUpdate:s,supportsExceedsLimitStatistics:!0},query:e,queryRelated:{supportsCount:!0,supportsOrderBy:!0,supportsPagination:!0},editing:{supportsGeometryUpdate:s,supportsGlobalId:!1,supportsReturnServiceEditsInSourceSpatialReference:!1,supportsRollbackOnFailure:!1,supportsUpdateWithoutM:!1,supportsUploadWithItemId:!1,supportsDeleteByAnonymous:!1,supportsDeleteByOthers:!1,supportsUpdateByAnonymous:!1,supportsUpdateByOthers:!1}}}export{a as createCapabilities,n as createDefaultAttributesFunction,i as createDefaultTemplate,u as createDrawingInfo};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport e from\"../../../../core/Error.js\";import t from\"../../OptimizedFeature.js\";import n from\"../../OptimizedGeometry.js\";import{isNumericField as o}from\"../../../support/fieldUtils.js\";const r={LineString:\"esriGeometryPolyline\",MultiLineString:\"esriGeometryPolyline\",MultiPoint:\"esriGeometryMultipoint\",Point:\"esriGeometryPoint\",Polygon:\"esriGeometryPolygon\",MultiPolygon:\"esriGeometryPolygon\"};function i(e){return r[e]}function*s(e){switch(e.type){case\"Feature\":yield e;break;case\"FeatureCollection\":for(const t of e.features)t&&(yield t)}}function*c(e){if(!e)return null;switch(e.type){case\"Point\":yield e.coordinates;break;case\"LineString\":case\"MultiPoint\":yield*e.coordinates;break;case\"MultiLineString\":case\"Polygon\":for(const t of e.coordinates)yield*t;break;case\"MultiPolygon\":for(const t of e.coordinates)for(const e of t)yield*e}}function*u(e,o={}){const{geometryType:r,objectIdField:s}=o;for(const u of e){var c;const{geometry:e,properties:l,id:f}=u;if(e&&i(e.type)!==r)continue;const a=l||{};let y=null!=(c=a[s])?c:null;s&&null!=f&&!a[s]&&(a[s]=y=f);const p=new t(e?d(new n,e,o):null,a,null,y);yield p}}function l(e){for(const t of e)if(t.length>2)return!0;return!1}function f(e){return!y(e)}function a(e){return y(e)}function y(e){let t=0;for(let n=0;n<e.length;n++){const o=e[n],r=e[(n+1)%e.length];t+=o[0]*r[1]-r[0]*o[1]}return t<=0}function p(e){const t=e[0],n=e[e.length-1];return t[0]===n[0]&&t[1]===n[1]&&t[2]===n[2]||e.push(t),e}function d(e,t,n){switch(t.type){case\"LineString\":return g(e,t,n);case\"MultiLineString\":return m(e,t,n);case\"MultiPoint\":return h(e,t,n);case\"MultiPolygon\":return w(e,t,n);case\"Point\":return P(e,t,n);case\"Polygon\":return b(e,t,n)}}function g(e,t,n){return F(e,t.coordinates,n),e}function m(e,t,n){for(const o of t.coordinates)F(e,o,n);return e}function h(e,t,n){return F(e,t.coordinates,n),e}function w(e,t,n){for(const o of t.coordinates){j(e,o[0],n);for(let t=1;t<o.length;t++)S(e,o[t],n)}return e}function P(e,t,n){return M(e,t.coordinates,n),e}function b(e,t,n){const o=t.coordinates;j(e,o[0],n);for(let r=1;r<o.length;r++)S(e,o[r],n);return e}function j(e,t,n){const o=p(t);f(o)?G(e,o,n):F(e,o,n)}function S(e,t,n){const o=p(t);a(o)?G(e,o,n):F(e,o,n)}function F(e,t,n){for(const o of t)M(e,o,n);e.lengths.push(t.length)}function G(e,t,n){for(let o=t.length-1;o>=0;o--)M(e,t[o],n);e.lengths.push(t.length)}function M(e,t,n){const[o,r,i]=t;e.coords.push(o,r),n.hasZ&&e.coords.push(i||0)}function k(e){switch(typeof e){case\"string\":return\"esriFieldTypeString\";case\"number\":return\"esriFieldTypeDouble\";default:return\"unknown\"}}function O(t){if(!t)throw new e(\"geojson-layer:empty\",\"GeoJSON data is empty\");if(\"Feature\"!==t.type&&\"FeatureCollection\"!==t.type)throw new e(\"geojson-layer:unsupported-geojson-object\",\"missing or not supported GeoJSON object type\",{data:t});const{crs:n}=t;if(!n)return;const o=\"string\"==typeof n?n:\"name\"===n.type?n.properties.name:\"EPSG\"===n.type?n.properties.code:null,r=new RegExp(\".*(CRS84H?|4326)$\",\"i\");if(!o||!r.test(o))throw new e(\"geojson-layer:unsupported-crs\",\"unsupported GeoJSON 'crs' member\",{crs:n})}function T(e,t={}){const n=[],r=new Set,u=new Set;let f,a=!1,y=null,p=!1,{geometryType:d=null}=t,g=!1;for(const o of s(e)){const{geometry:e,properties:t,id:s}=o;if(!e||(d||(d=i(e.type)),i(e.type)===d)){if(!a){a=l(c(e))}if(p||(p=null!=s,p&&(f=typeof s,y=Object.keys(t).filter((e=>t[e]===s)))),p&&null!=s&&(y.length>1?y=y.filter((e=>t[e]===s)):1===y.length&&(y=t[y[0]]===s?y:[])),!g&&t){let e=!0;for(const o in t){if(r.has(o))continue;const i=t[o];if(null==i){e=!1,u.add(o);continue}const s=k(i);\"unknown\"!==s?(u.delete(o),r.add(o),n.push({name:o,alias:o,type:s})):u.add(o)}g=e}}}const m=y&&1===y.length&&y[0]||null;if(m)for(const i of n)if(i.name===m&&o(i)){i.type=\"esriFieldTypeOID\";break}return{fields:n,geometryType:d,hasZ:a,objectIdFieldName:m,objectIdFieldType:f,unknownFields:Array.from(u)}}function L(e,t){return Array.from(u(s(e),t))}export{L as createOptimizedFeatures,i as getGeometryType,T as inferLayerProperties,O as validateGeoJSON};\n"],"sourceRoot":""}