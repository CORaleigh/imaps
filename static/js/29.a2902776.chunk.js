(this.webpackJsonpimaps=this.webpackJsonpimaps||[]).push([[29,248],{107:function(t,e,n){"use strict";n.d(e,"a",(function(){return V})),n.d(e,"b",(function(){return D})),n.d(e,"c",(function(){return b})),n.d(e,"d",(function(){return I})),n.d(e,"e",(function(){return j})),n.d(e,"f",(function(){return p})),n.d(e,"g",(function(){return g})),n.d(e,"h",(function(){return v})),n.d(e,"i",(function(){return T})),n.d(e,"j",(function(){return w})),n.d(e,"k",(function(){return tt})),n.d(e,"l",(function(){return m})),n.d(e,"m",(function(){return l})),n.d(e,"n",(function(){return f})),n.d(e,"o",(function(){return M})),n.d(e,"p",(function(){return F})),n.d(e,"q",(function(){return O})),n.d(e,"r",(function(){return S})),n.d(e,"s",(function(){return $})),n.d(e,"t",(function(){return G})),n.d(e,"u",(function(){return L})),n.d(e,"v",(function(){return P})),n.d(e,"w",(function(){return Y})),n.d(e,"x",(function(){return Z})),n.d(e,"y",(function(){return y})),n.d(e,"z",(function(){return U})),n.d(e,"A",(function(){return Q}));var r=n(88),i=n(85),s=n(112),o=n(233),a=n(123);const u=["field","field2","field3","normalizationField","rotationInfo.field","proportionalSymbolInfo.field","proportionalSymbolInfo.normalizationField","colorInfo.field","colorInfo.normalizationField"],c=["field","normalizationField"];function l(t,e){if(null!=t&&null!=e)for(const n of Array.isArray(t)?t:[t])if(h(u,n,e),"visualVariables"in n&&n.visualVariables)for(const t of n.visualVariables)h(c,t,e)}function h(t,e,n){if(t)for(const r of t){const t=Object(s.b)(r,e),i=t&&"function"!=typeof t&&n.get(t);i&&Object(s.c)(r,i.name,e)}}function f(t,e){if(null!=t&&null!=e&&e.fields.length)if("startField"in t){const n=e.get(t.startField),r=e.get(t.endField);t.startField=n&&n.name||null,t.endField=r&&r.name||null}else{const n=e.get(t.startTimeField),r=e.get(t.endTimeField);t.startTimeField=n&&n.name||null,t.endTimeField=r&&r.name||null}}const d=new Set;function m(t,e){return t&&e?(d.clear(),g(d,t,e),Array.from(d).sort()):[]}function g(t,e,n){var r;if(n)if(null!=e&&null!=(r=e.fields)&&r.length)if(n.includes("*"))for(const{name:i}of e.fields)t.add(i);else for(const i of n)p(t,e,i);else{if(n.includes("*"))return t.clear(),void t.add("*");for(const e of n)t.add(e)}}function p(t,e,n){if("string"==typeof n)if(e){const r=e.get(n);r&&t.add(r.name)}else t.add(n)}function y(t,e){return Object(i.j)(e)||Object(i.j)(t)?[]:e.includes("*")?t.fields.map((t=>t.name)):e}async function b(t,e,n){var r;if(!n)return;const{arcadeUtils:i}=await Object(a.e)(),s=i.extractFieldNames(n,null==e||null==(r=e.fields)?void 0:r.map((t=>t.name)));for(const o of s)p(t,e,o)}async function _(t,e,i){if(i&&"1=1"!==i){const s=(await Promise.all([n.e(11),n.e(248)]).then(n.bind(null,279))).WhereClause.create(i,e);if(!s.isStandardized)throw new r.a("fieldUtils:collectFilterFields","Where clause is not standardized");g(t,e,s.fieldNames)}}function M({displayField:t,fields:e}){return t||(e&&e.length?x(e,"name-or-title")||x(e,"unique-identifier")||x(e,"type-or-category")||function(t){for(const e of t){if(!e||!e.name)continue;const t=e.name.toLowerCase();if(t.indexOf("name")>-1||t.indexOf("title")>-1)return e.name}return null}(e):null)}function x(t,e){for(const n of t)if(n&&n.valueType&&n.valueType===e)return n.name;return null}async function I(t,e){if(!e)return;const n=Object(s.b)("elevationInfo.featureExpressionInfo",e);return n?n.collectRequiredFields(t,e.fieldsIndex):void 0}async function j(t,e,n){var r;if(!e||!n||"cluster"!==n.type)return;const i=[];null!=(r=n.popupTemplate)&&r.expressionInfos&&i.push(...n.popupTemplate.expressionInfos.map((n=>b(t,e.fieldsIndex,n.expression)))),n.fields&&i.push(...n.fields.map((n=>async function(t,e,n){n.outStatistic.onStatisticValueExpression?b(t,e,n.outStatistic.onStatisticValueExpression):t.add(n.outStatistic.onStatisticField)}(t,e.fieldsIndex,n)))),await Promise.all(i)}async function v(t,e,n){e&&(e.timeInfo&&Object(i.k)(n)&&n.timeExtent&&g(t,e.fieldsIndex,[e.timeInfo.startField,e.timeInfo.endField]),e.floorInfo&&g(t,e.fieldsIndex,[e.floorInfo.floorField]),Object(i.k)(n)&&Object(i.k)(n.where)&&await _(t,e.fieldsIndex,n.where))}async function w(t,e,n){e&&n&&await Promise.all(n.map((n=>async function(t,e,n){e&&n&&(n.valueExpression?await b(t,e.fieldsIndex,n.valueExpression):n.field&&p(t,e.fieldsIndex,n.field))}(t,e,n))))}function F(t){if(!t)return[];const e="editFieldsInfo"in t&&t.editFieldsInfo;return e?m(t.fieldsIndex,[e&&e.creatorField,e&&e.creationDateField,e&&e.editorField,e&&e.editDateField]):[]}function O(t){if(!t)return[];const e=t.geometryFieldsInfo;return e?m(t.fieldsIndex,[e.shapeAreaField,e.shapeLengthField]):[]}async function T(t,e){const{labelingInfo:n,fieldsIndex:r}=e;n&&n.length&&await Promise.all(n.map((e=>async function(t,e,n){if(!n)return;const r=n.getLabelExpression(),i=n.where;if("arcade"===r.type)await b(t,e,r.expression);else{const n=r.expression.match(/{[^}]*}/g);n&&n.forEach((n=>{p(t,e,n.slice(1,-1))}))}await _(t,e,i)}(t,r,e))))}function S(t){const e=t.defaultValue;return void 0!==e&&X(t,e)?e:t.nullable?null:void 0}function B(t){return"number"==typeof t&&!isNaN(t)&&isFinite(t)}function N(t){return null===t||B(t)}const z="isInteger"in Number?Number.isInteger:t=>"number"==typeof t&&isFinite(t)&&Math.floor(t)===t;function R(t){return null===t||z(t)}function E(t){return null!=t&&"string"==typeof t}function k(t){return null===t||E(t)}function A(){return!0}function X(t,e){let n;switch(t.type){case"date":case"integer":case"long":case"small-integer":case"esriFieldTypeDate":case"esriFieldTypeInteger":case"esriFieldTypeLong":case"esriFieldTypeSmallInteger":n=t.nullable?R:z;break;case"double":case"single":case"esriFieldTypeSingle":case"esriFieldTypeDouble":n=t.nullable?N:B;break;case"string":case"esriFieldTypeString":n=t.nullable?k:E;break;default:n=A}return 1===arguments.length?n:n(e)}const Y=["integer","small-integer","single","double"],q=new Set([...Y,"esriFieldTypeInteger","esriFieldTypeSmallInteger","esriFieldTypeSingle","esriFieldTypeDouble"]);function L(t){return null!=t&&q.has(t.type)}function P(t){return null!=t&&("string"===t.type||"esriFieldTypeString"===t.type)}function G(t){return null!=t&&("date"===t.type||"esriFieldTypeDate"===t.type)}var V,D;function Z(t){return null==t||"number"==typeof t&&isNaN(t)?null:t}function U(t,e){return t.nullable&&null===e?null:L(t)&&!function(t,e){const n="string"==typeof t?C(t):t;return!!n&&(n.isInteger?z(e)&&e>=n.min&&e<=n.max:e>=n.min&&e<=n.max)}(t.type,Number(e))?V.OUT_OF_RANGE:X(t,e)?t.domain?Object(o.c)(t.domain,e):null:D.INVALID_TYPE}function $(t){return Object(o.b)(t.domain)||(L(t)?C(t.type):void 0)}function C(t){switch(t){case"esriFieldTypeSmallInteger":case"small-integer":return J;case"esriFieldTypeInteger":case"integer":return W;case"esriFieldTypeSingle":case"single":return H;case"esriFieldTypeDouble":case"double":return K}}(V||(V={})).OUT_OF_RANGE="numeric-range-validation-error::out-of-range",function(t){t.INVALID_TYPE="type-validation-error::invalid-type"}(D||(D={}));const J={min:-32768,max:32767,isInteger:!0},W={min:-2147483648,max:2147483647,isInteger:!0},H={min:-34e37,max:12e37,isInteger:!1},K={min:-Number.MAX_VALUE,max:Number.MAX_VALUE,isInteger:!1};function Q(t,e,n){switch(t){case o.a.INVALID_CODED_VALUE:return`Value ${n} is not in the coded domain - field: ${e.name}, domain: ${JSON.stringify(e.domain)}`;case o.a.VALUE_OUT_OF_RANGE:return`Value ${n} is out of the range of valid values - field: ${e.name}, domain: ${JSON.stringify(e.domain)}`;case D.INVALID_TYPE:return`Value ${n} is not a valid value for the field type - field: ${e.name}, type: ${e.type}, nullable: ${e.nullable}`;case V.OUT_OF_RANGE:{const{min:t,max:r}=C(e.type);return`Value ${n} is out of range for the number type - field: ${e.name}, type: ${e.type}, value range is ${t} to ${r}`}}}function tt(t,e){return!function(t,e,n){if(!e||!e.attributes||!t){if(Object(i.k)(n))for(const e of t)n.add(e);return!0}const r=e.attributes;let s=!1;for(const o of t)if(!(o in r)){if(s=!0,!Object(i.k)(n))break;n.add(o)}return s}(t,e,null)}},1072:function(t,e,n){"use strict";n.d(e,"a",(function(){return a})),n.d(e,"b",(function(){return c})),n.d(e,"c",(function(){return g})),n.d(e,"d",(function(){return h})),n.d(e,"e",(function(){return m}));var r=n(113),i=n(107);class s{constructor(){this.code=null,this.description=null}}class o{constructor(t){this.error=new s,this.globalId=null,this.objectId=null,this.success=!1,this.uniqueId=null,this.error.description=t}}function a(t){return new o(t)}class u{constructor(t){this.globalId=null,this.success=!0,this.objectId=this.uniqueId=t}}function c(t){return new u(t)}const l=new Set;function h(t,e,n,r,s=!1,o){l.clear();for(const u in n){const r=t.get(u);if(!r)continue;const c=n[u],h=f(r,c);if(h!==c&&o&&o.push({name:"invalid-value-type",message:"attribute value was converted to match the field type",details:{field:r,originalValue:c,sanitizedValue:h}}),l.add(r.name),r&&(s||r.editable)){const t=Object(i.z)(r,h);if(t)return a(Object(i.A)(t,r,h));e[r.name]=h}}if(r)for(const i of r)if(!l.has(i.name))return a(`missing required field "${i.name}"`);return null}function f(t,e){let n=e;return"string"==typeof e&&Object(i.u)(t)?n=parseFloat(e):null!=e&&Object(i.v)(t)&&"string"!=typeof e&&(n=String(e)),Object(i.x)(n)}let d;function m(t,e){if(!t||!Object(r.l)(e))return t;if("rings"in t||"paths"in t){if(!d)throw new TypeError("geometry engine not loaded");return d.simplify(e,t)}return t}async function g(t,e){!Object(r.l)(t)||"esriGeometryPolygon"!==e&&"esriGeometryPolyline"!==e||await async function(){return d||(d=await Promise.all([n.e(9),n.e(34)]).then(n.bind(null,1023)),d)}()}},118:function(t,e,n){"use strict";n.d(e,"a",(function(){return T})),n.d(e,"b",(function(){return m})),n.d(e,"c",(function(){return y})),n.d(e,"d",(function(){return b})),n.d(e,"e",(function(){return o})),n.d(e,"f",(function(){return v})),n.d(e,"g",(function(){return _})),n.d(e,"h",(function(){return M})),n.d(e,"i",(function(){return I})),n.d(e,"j",(function(){return x})),n.d(e,"k",(function(){return a})),n.d(e,"l",(function(){return s})),n.d(e,"m",(function(){return F})),n.d(e,"n",(function(){return f})),n.d(e,"o",(function(){return h})),n.d(e,"p",(function(){return d})),n.d(e,"q",(function(){return c})),n.d(e,"r",(function(){return u})),n.d(e,"s",(function(){return p})),n.d(e,"t",(function(){return j})),n.d(e,"u",(function(){return w})),n.d(e,"v",(function(){return l})),n.d(e,"w",(function(){return g}));n(79),n(108);var r=n(85),i=n(99);function s(t=S){return[t[0],t[1],t[2],t[3]]}function o(t){return[t[0],t[1],t[2],t[3]]}function a(t,e){return t!==e&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3]),t}function u(t,e,n,r,i=s()){return i[0]=t,i[1]=e,i[2]=n,i[3]=r,i}function c(t,e=s()){return e[0]=t.xmin,e[1]=t.ymin,e[2]=t.xmax,e[3]=t.ymax,e}function l(t,e){return new i.a({xmin:t[0],ymin:t[1],xmax:t[2],ymax:t[3],spatialReference:e})}function h(t,e){e[0]<t[0]&&(t[0]=e[0]),e[0]>t[2]&&(t[2]=e[0]),e[1]<t[1]&&(t[1]=e[1]),e[1]>t[3]&&(t[3]=e[1])}function f(t,e,n){if(Object(r.j)(e))a(n,t);else if("length"in e)O(e)?(n[0]=Math.min(t[0],e[0]),n[1]=Math.min(t[1],e[1]),n[2]=Math.max(t[2],e[2]),n[3]=Math.max(t[3],e[3])):2!==e.length&&3!==e.length||(n[0]=Math.min(t[0],e[0]),n[1]=Math.min(t[1],e[1]),n[2]=Math.max(t[2],e[0]),n[3]=Math.max(t[3],e[1]));else switch(e.type){case"extent":n[0]=Math.min(t[0],e.xmin),n[1]=Math.min(t[1],e.ymin),n[2]=Math.max(t[2],e.xmax),n[3]=Math.max(t[3],e.ymax);break;case"point":n[0]=Math.min(t[0],e.x),n[1]=Math.min(t[1],e.y),n[2]=Math.max(t[2],e.x),n[3]=Math.max(t[3],e.y)}}function d(t,e,n=t){const r=e.length;let i=t[0],s=t[1],o=t[2],a=t[3];for(let u=0;u<r;u++){const t=e[u];i=Math.min(i,t[0]),s=Math.min(s,t[1]),o=Math.max(o,t[0]),a=Math.max(a,t[1])}return n[0]=i,n[1]=s,n[2]=o,n[3]=a,n}function m(t){for(let e=0;e<4;e++)if(!isFinite(t[e]))return!1;return!0}function g(t){return Object(r.j)(t)||t[0]>=t[2]?0:t[2]-t[0]}function p(t){return t[1]>=t[3]?0:t[3]-t[1]}function y(t){return g(t)*p(t)}function b(t,e=[0,0]){return e[0]=(t[0]+t[2])/2,e[1]=(t[1]+t[3])/2,e}function _(t,e){return x(t,e[0],e[1])}function M(t,e){return x(t,e.x,e.y)}function x(t,e,n){return e>=t[0]&&n>=t[1]&&e<=t[2]&&n<=t[3]}function I(t,e,n){return e[0]>=t[0]-n&&e[1]>=t[1]-n&&e[0]<=t[2]+n&&e[1]<=t[3]+n}function j(t,e){return Math.max(e[0],t[0])<=Math.min(e[2],t[2])&&Math.max(e[1],t[1])<=Math.min(e[3],t[3])}function v(t,e){return e[0]>=t[0]&&e[2]<=t[2]&&e[1]>=t[1]&&e[3]<=t[3]}function w(t,e,n,r=t){return r[0]=t[0]+e,r[1]=t[1]+n,r[2]=t[2]+e,r[3]=t[3]+n,r}function F(t){return t?a(t,T):s(T)}function O(t){return null!=t&&4===t.length}const T=[1/0,1/0,-1/0,-1/0],S=[0,0,0,0]},138:function(t,e,n){"use strict";n.d(e,"a",(function(){return M})),n.d(e,"b",(function(){return u})),n.d(e,"c",(function(){return c})),n.d(e,"d",(function(){return m})),n.d(e,"e",(function(){return d})),n.d(e,"f",(function(){return s})),n.d(e,"g",(function(){return f})),n.d(e,"h",(function(){return B})),n.d(e,"i",(function(){return S})),n.d(e,"j",(function(){return a})),n.d(e,"k",(function(){return g})),n.d(e,"l",(function(){return w})),n.d(e,"m",(function(){return O})),n.d(e,"n",(function(){return l})),n.d(e,"o",(function(){return _})),n.d(e,"p",(function(){return F})),n.d(e,"q",(function(){return N})),n.d(e,"r",(function(){return p})),n.d(e,"s",(function(){return o})),n.d(e,"t",(function(){return h})),n.d(e,"u",(function(){return y})),n.d(e,"v",(function(){return j})),n.d(e,"w",(function(){return b})),n.d(e,"x",(function(){return v}));var r=n(105),i=n(195);function s(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function o(t,e,n,r,i,s,o,a,u,c,l,h,f,d,m,g,p){return t[0]=e,t[1]=n,t[2]=r,t[3]=i,t[4]=s,t[5]=o,t[6]=a,t[7]=u,t[8]=c,t[9]=l,t[10]=h,t[11]=f,t[12]=d,t[13]=m,t[14]=g,t[15]=p,t}function a(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function u(t,e){if(t===e){const n=e[1],r=e[2],i=e[3],s=e[6],o=e[7],a=e[11];t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=n,t[6]=e[9],t[7]=e[13],t[8]=r,t[9]=s,t[11]=e[14],t[12]=i,t[13]=o,t[14]=a}else t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=e[1],t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=e[2],t[9]=e[6],t[10]=e[10],t[11]=e[14],t[12]=e[3],t[13]=e[7],t[14]=e[11],t[15]=e[15];return t}function c(t,e){const n=e[0],r=e[1],i=e[2],s=e[3],o=e[4],a=e[5],u=e[6],c=e[7],l=e[8],h=e[9],f=e[10],d=e[11],m=e[12],g=e[13],p=e[14],y=e[15],b=n*a-r*o,_=n*u-i*o,M=n*c-s*o,x=r*u-i*a,I=r*c-s*a,j=i*c-s*u,v=l*g-h*m,w=l*p-f*m,F=l*y-d*m,O=h*p-f*g,T=h*y-d*g,S=f*y-d*p;let B=b*S-_*T+M*O+x*F-I*w+j*v;return B?(B=1/B,t[0]=(a*S-u*T+c*O)*B,t[1]=(i*T-r*S-s*O)*B,t[2]=(g*j-p*I+y*x)*B,t[3]=(f*I-h*j-d*x)*B,t[4]=(u*F-o*S-c*w)*B,t[5]=(n*S-i*F+s*w)*B,t[6]=(p*M-m*j-y*_)*B,t[7]=(l*j-f*M+d*_)*B,t[8]=(o*T-a*F+c*v)*B,t[9]=(r*F-n*T-s*v)*B,t[10]=(m*I-g*M+y*b)*B,t[11]=(h*M-l*I-d*b)*B,t[12]=(a*w-o*O-u*v)*B,t[13]=(n*O-r*w+i*v)*B,t[14]=(g*_-m*x-p*b)*B,t[15]=(l*x-h*_+f*b)*B,t):null}function l(t,e,n){const r=e[0],i=e[1],s=e[2],o=e[3],a=e[4],u=e[5],c=e[6],l=e[7],h=e[8],f=e[9],d=e[10],m=e[11],g=e[12],p=e[13],y=e[14],b=e[15];let _=n[0],M=n[1],x=n[2],I=n[3];return t[0]=_*r+M*a+x*h+I*g,t[1]=_*i+M*u+x*f+I*p,t[2]=_*s+M*c+x*d+I*y,t[3]=_*o+M*l+x*m+I*b,_=n[4],M=n[5],x=n[6],I=n[7],t[4]=_*r+M*a+x*h+I*g,t[5]=_*i+M*u+x*f+I*p,t[6]=_*s+M*c+x*d+I*y,t[7]=_*o+M*l+x*m+I*b,_=n[8],M=n[9],x=n[10],I=n[11],t[8]=_*r+M*a+x*h+I*g,t[9]=_*i+M*u+x*f+I*p,t[10]=_*s+M*c+x*d+I*y,t[11]=_*o+M*l+x*m+I*b,_=n[12],M=n[13],x=n[14],I=n[15],t[12]=_*r+M*a+x*h+I*g,t[13]=_*i+M*u+x*f+I*p,t[14]=_*s+M*c+x*d+I*y,t[15]=_*o+M*l+x*m+I*b,t}function h(t,e,n){const r=n[0],i=n[1],s=n[2];let o,a,u,c,l,h,f,d,m,g,p,y;return e===t?(t[12]=e[0]*r+e[4]*i+e[8]*s+e[12],t[13]=e[1]*r+e[5]*i+e[9]*s+e[13],t[14]=e[2]*r+e[6]*i+e[10]*s+e[14],t[15]=e[3]*r+e[7]*i+e[11]*s+e[15]):(o=e[0],a=e[1],u=e[2],c=e[3],l=e[4],h=e[5],f=e[6],d=e[7],m=e[8],g=e[9],p=e[10],y=e[11],t[0]=o,t[1]=a,t[2]=u,t[3]=c,t[4]=l,t[5]=h,t[6]=f,t[7]=d,t[8]=m,t[9]=g,t[10]=p,t[11]=y,t[12]=o*r+l*i+m*s+e[12],t[13]=a*r+h*i+g*s+e[13],t[14]=u*r+f*i+p*s+e[14],t[15]=c*r+d*i+y*s+e[15]),t}function f(t,e,n){const r=n[0],i=n[1],s=n[2];return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t[4]=e[4]*i,t[5]=e[5]*i,t[6]=e[6]*i,t[7]=e[7]*i,t[8]=e[8]*s,t[9]=e[9]*s,t[10]=e[10]*s,t[11]=e[11]*s,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function d(t,e,n,r){let s,o,a,u,c,l,h,f,d,m,g,p,y,b,_,M,x,I,j,v,w,F,O,T,S=r[0],B=r[1],N=r[2],z=Math.sqrt(S*S+B*B+N*N);return z<i.a?null:(z=1/z,S*=z,B*=z,N*=z,s=Math.sin(n),o=Math.cos(n),a=1-o,u=e[0],c=e[1],l=e[2],h=e[3],f=e[4],d=e[5],m=e[6],g=e[7],p=e[8],y=e[9],b=e[10],_=e[11],M=S*S*a+o,x=B*S*a+N*s,I=N*S*a-B*s,j=S*B*a-N*s,v=B*B*a+o,w=N*B*a+S*s,F=S*N*a+B*s,O=B*N*a-S*s,T=N*N*a+o,t[0]=u*M+f*x+p*I,t[1]=c*M+d*x+y*I,t[2]=l*M+m*x+b*I,t[3]=h*M+g*x+_*I,t[4]=u*j+f*v+p*w,t[5]=c*j+d*v+y*w,t[6]=l*j+m*v+b*w,t[7]=h*j+g*v+_*w,t[8]=u*F+f*O+p*T,t[9]=c*F+d*O+y*T,t[10]=l*F+m*O+b*T,t[11]=h*F+g*O+_*T,e!==t&&(t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t)}function m(t,e,n){const r=Math.sin(n),i=Math.cos(n),s=e[4],o=e[5],a=e[6],u=e[7],c=e[8],l=e[9],h=e[10],f=e[11];return e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=s*i+c*r,t[5]=o*i+l*r,t[6]=a*i+h*r,t[7]=u*i+f*r,t[8]=c*i-s*r,t[9]=l*i-o*r,t[10]=h*i-a*r,t[11]=f*i-u*r,t}function g(t,e,n){const r=Math.sin(n),i=Math.cos(n),s=e[0],o=e[1],a=e[2],u=e[3],c=e[8],l=e[9],h=e[10],f=e[11];return e!==t&&(t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=s*i-c*r,t[1]=o*i-l*r,t[2]=a*i-h*r,t[3]=u*i-f*r,t[8]=s*r+c*i,t[9]=o*r+l*i,t[10]=a*r+h*i,t[11]=u*r+f*i,t}function p(t,e,n){const r=Math.sin(n),i=Math.cos(n),s=e[0],o=e[1],a=e[2],u=e[3],c=e[4],l=e[5],h=e[6],f=e[7];return e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=s*i+c*r,t[1]=o*i+l*r,t[2]=a*i+h*r,t[3]=u*i+f*r,t[4]=c*i-s*r,t[5]=l*i-o*r,t[6]=h*i-a*r,t[7]=f*i-u*r,t}function y(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=e[0],t[13]=e[1],t[14]=e[2],t[15]=1,t}function b(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=e[2],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function _(t,e){const n=Math.sin(e),r=Math.cos(e);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=r,t[6]=n,t[7]=0,t[8]=0,t[9]=-n,t[10]=r,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function M(t,e){const n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=n,t[2]=0,t[3]=0,t[4]=-n,t[5]=r,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function x(t,e,n){const r=e[0],i=e[1],s=e[2],o=e[3],a=r+r,u=i+i,c=s+s,l=r*a,h=r*u,f=r*c,d=i*u,m=i*c,g=s*c,p=o*a,y=o*u,b=o*c;return t[0]=1-(d+g),t[1]=h+b,t[2]=f-y,t[3]=0,t[4]=h-b,t[5]=1-(l+g),t[6]=m+p,t[7]=0,t[8]=f+y,t[9]=m-p,t[10]=1-(l+d),t[11]=0,t[12]=n[0],t[13]=n[1],t[14]=n[2],t[15]=1,t}const I=Object(r.e)();function j(t,e){return t[0]=e[12],t[1]=e[13],t[2]=e[14],t}function v(t,e){const n=e[0],r=e[1],i=e[2],s=e[3],o=n+n,a=r+r,u=i+i,c=n*o,l=r*o,h=r*a,f=i*o,d=i*a,m=i*u,g=s*o,p=s*a,y=s*u;return t[0]=1-h-m,t[1]=l+y,t[2]=f-p,t[3]=0,t[4]=l-y,t[5]=1-c-m,t[6]=d+g,t[7]=0,t[8]=f+p,t[9]=d-g,t[10]=1-c-h,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function w(t,e,n,r,i,s,o){const a=1/(n-e),u=1/(i-r),c=1/(s-o);return t[0]=2*s*a,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=2*s*u,t[6]=0,t[7]=0,t[8]=(n+e)*a,t[9]=(i+r)*u,t[10]=(o+s)*c,t[11]=-1,t[12]=0,t[13]=0,t[14]=o*s*2*c,t[15]=0,t}function F(t,e,n,r,i,s,o){const a=1/(e-n),u=1/(r-i),c=1/(s-o);return t[0]=-2*a,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*u,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*c,t[11]=0,t[12]=(e+n)*a,t[13]=(i+r)*u,t[14]=(o+s)*c,t[15]=1,t}function O(t,e,n,r){let s,o,u,c,l,h,f,d,m,g;const p=e[0],y=e[1],b=e[2],_=r[0],M=r[1],x=r[2],I=n[0],j=n[1],v=n[2];return Math.abs(p-I)<i.a&&Math.abs(y-j)<i.a&&Math.abs(b-v)<i.a?a(t):(f=p-I,d=y-j,m=b-v,g=1/Math.sqrt(f*f+d*d+m*m),f*=g,d*=g,m*=g,s=M*m-x*d,o=x*f-_*m,u=_*d-M*f,g=Math.sqrt(s*s+o*o+u*u),g?(g=1/g,s*=g,o*=g,u*=g):(s=0,o=0,u=0),c=d*u-m*o,l=m*s-f*u,h=f*o-d*s,g=Math.sqrt(c*c+l*l+h*h),g?(g=1/g,c*=g,l*=g,h*=g):(c=0,l=0,h=0),t[0]=s,t[1]=c,t[2]=f,t[3]=0,t[4]=o,t[5]=l,t[6]=d,t[7]=0,t[8]=u,t[9]=h,t[10]=m,t[11]=0,t[12]=-(s*p+o*y+u*b),t[13]=-(c*p+l*y+h*b),t[14]=-(f*p+d*y+m*b),t[15]=1,t)}function T(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t[4]=e[4]-n[4],t[5]=e[5]-n[5],t[6]=e[6]-n[6],t[7]=e[7]-n[7],t[8]=e[8]-n[8],t[9]=e[9]-n[9],t[10]=e[10]-n[10],t[11]=e[11]-n[11],t[12]=e[12]-n[12],t[13]=e[13]-n[13],t[14]=e[14]-n[14],t[15]=e[15]-n[15],t}function S(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]&&t[9]===e[9]&&t[10]===e[10]&&t[11]===e[11]&&t[12]===e[12]&&t[13]===e[13]&&t[14]===e[14]&&t[15]===e[15]}function B(t,e){const n=t[0],r=t[1],s=t[2],o=t[3],a=t[4],u=t[5],c=t[6],l=t[7],h=t[8],f=t[9],d=t[10],m=t[11],g=t[12],p=t[13],y=t[14],b=t[15],_=e[0],M=e[1],x=e[2],I=e[3],j=e[4],v=e[5],w=e[6],F=e[7],O=e[8],T=e[9],S=e[10],B=e[11],N=e[12],z=e[13],R=e[14],E=e[15];return Math.abs(n-_)<=i.a*Math.max(1,Math.abs(n),Math.abs(_))&&Math.abs(r-M)<=i.a*Math.max(1,Math.abs(r),Math.abs(M))&&Math.abs(s-x)<=i.a*Math.max(1,Math.abs(s),Math.abs(x))&&Math.abs(o-I)<=i.a*Math.max(1,Math.abs(o),Math.abs(I))&&Math.abs(a-j)<=i.a*Math.max(1,Math.abs(a),Math.abs(j))&&Math.abs(u-v)<=i.a*Math.max(1,Math.abs(u),Math.abs(v))&&Math.abs(c-w)<=i.a*Math.max(1,Math.abs(c),Math.abs(w))&&Math.abs(l-F)<=i.a*Math.max(1,Math.abs(l),Math.abs(F))&&Math.abs(h-O)<=i.a*Math.max(1,Math.abs(h),Math.abs(O))&&Math.abs(f-T)<=i.a*Math.max(1,Math.abs(f),Math.abs(T))&&Math.abs(d-S)<=i.a*Math.max(1,Math.abs(d),Math.abs(S))&&Math.abs(m-B)<=i.a*Math.max(1,Math.abs(m),Math.abs(B))&&Math.abs(g-N)<=i.a*Math.max(1,Math.abs(g),Math.abs(N))&&Math.abs(p-z)<=i.a*Math.max(1,Math.abs(p),Math.abs(z))&&Math.abs(y-R)<=i.a*Math.max(1,Math.abs(y),Math.abs(R))&&Math.abs(b-E)<=i.a*Math.max(1,Math.abs(b),Math.abs(E))}function N(t){const e=i.a,n=t[0],r=t[1],s=t[2],o=t[4],a=t[5],u=t[6],c=t[8],l=t[9],h=t[10];return Math.abs(1-(n*n+o*o+c*c))<=e&&Math.abs(1-(r*r+a*a+l*l))<=e&&Math.abs(1-(s*s+u*u+h*h))<=e}const z=l,R=T;Object.freeze({__proto__:null,copy:s,set:o,identity:a,transpose:u,invert:c,adjoint:function(t,e){const n=e[0],r=e[1],i=e[2],s=e[3],o=e[4],a=e[5],u=e[6],c=e[7],l=e[8],h=e[9],f=e[10],d=e[11],m=e[12],g=e[13],p=e[14],y=e[15];return t[0]=a*(f*y-d*p)-h*(u*y-c*p)+g*(u*d-c*f),t[1]=-(r*(f*y-d*p)-h*(i*y-s*p)+g*(i*d-s*f)),t[2]=r*(u*y-c*p)-a*(i*y-s*p)+g*(i*c-s*u),t[3]=-(r*(u*d-c*f)-a*(i*d-s*f)+h*(i*c-s*u)),t[4]=-(o*(f*y-d*p)-l*(u*y-c*p)+m*(u*d-c*f)),t[5]=n*(f*y-d*p)-l*(i*y-s*p)+m*(i*d-s*f),t[6]=-(n*(u*y-c*p)-o*(i*y-s*p)+m*(i*c-s*u)),t[7]=n*(u*d-c*f)-o*(i*d-s*f)+l*(i*c-s*u),t[8]=o*(h*y-d*g)-l*(a*y-c*g)+m*(a*d-c*h),t[9]=-(n*(h*y-d*g)-l*(r*y-s*g)+m*(r*d-s*h)),t[10]=n*(a*y-c*g)-o*(r*y-s*g)+m*(r*c-s*a),t[11]=-(n*(a*d-c*h)-o*(r*d-s*h)+l*(r*c-s*a)),t[12]=-(o*(h*p-f*g)-l*(a*p-u*g)+m*(a*f-u*h)),t[13]=n*(h*p-f*g)-l*(r*p-i*g)+m*(r*f-i*h),t[14]=-(n*(a*p-u*g)-o*(r*p-i*g)+m*(r*u-i*a)),t[15]=n*(a*f-u*h)-o*(r*f-i*h)+l*(r*u-i*a),t},determinant:function(t){const e=t[0],n=t[1],r=t[2],i=t[3],s=t[4],o=t[5],a=t[6],u=t[7],c=t[8],l=t[9],h=t[10],f=t[11],d=t[12],m=t[13],g=t[14],p=t[15];return(e*o-n*s)*(h*p-f*g)-(e*a-r*s)*(l*p-f*m)+(e*u-i*s)*(l*g-h*m)+(n*a-r*o)*(c*p-f*d)-(n*u-i*o)*(c*g-h*d)+(r*u-i*a)*(c*m-l*d)},multiply:l,translate:h,scale:f,rotate:d,rotateX:m,rotateY:g,rotateZ:p,fromTranslation:y,fromScaling:b,fromRotation:function(t,e,n){let r,s,o,a=n[0],u=n[1],c=n[2],l=Math.sqrt(a*a+u*u+c*c);return l<i.a?null:(l=1/l,a*=l,u*=l,c*=l,r=Math.sin(e),s=Math.cos(e),o=1-s,t[0]=a*a*o+s,t[1]=u*a*o+c*r,t[2]=c*a*o-u*r,t[3]=0,t[4]=a*u*o-c*r,t[5]=u*u*o+s,t[6]=c*u*o+a*r,t[7]=0,t[8]=a*c*o+u*r,t[9]=u*c*o-a*r,t[10]=c*c*o+s,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t)},fromXRotation:_,fromYRotation:function(t,e){const n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=0,t[2]=-n,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=n,t[9]=0,t[10]=r,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},fromZRotation:M,fromRotationTranslation:x,fromQuat2:function(t,e){const n=I,r=-e[0],i=-e[1],s=-e[2],o=e[3],a=e[4],u=e[5],c=e[6],l=e[7],h=r*r+i*i+s*s+o*o;return h>0?(n[0]=2*(a*o+l*r+u*s-c*i)/h,n[1]=2*(u*o+l*i+c*r-a*s)/h,n[2]=2*(c*o+l*s+a*i-u*r)/h):(n[0]=2*(a*o+l*r+u*s-c*i),n[1]=2*(u*o+l*i+c*r-a*s),n[2]=2*(c*o+l*s+a*i-u*r)),x(t,e,n),t},getTranslation:j,getScaling:function(t,e){const n=e[0],r=e[1],i=e[2],s=e[4],o=e[5],a=e[6],u=e[8],c=e[9],l=e[10];return t[0]=Math.sqrt(n*n+r*r+i*i),t[1]=Math.sqrt(s*s+o*o+a*a),t[2]=Math.sqrt(u*u+c*c+l*l),t},getRotation:function(t,e){const n=e[0]+e[5]+e[10];let r=0;return n>0?(r=2*Math.sqrt(n+1),t[3]=.25*r,t[0]=(e[6]-e[9])/r,t[1]=(e[8]-e[2])/r,t[2]=(e[1]-e[4])/r):e[0]>e[5]&&e[0]>e[10]?(r=2*Math.sqrt(1+e[0]-e[5]-e[10]),t[3]=(e[6]-e[9])/r,t[0]=.25*r,t[1]=(e[1]+e[4])/r,t[2]=(e[8]+e[2])/r):e[5]>e[10]?(r=2*Math.sqrt(1+e[5]-e[0]-e[10]),t[3]=(e[8]-e[2])/r,t[0]=(e[1]+e[4])/r,t[1]=.25*r,t[2]=(e[6]+e[9])/r):(r=2*Math.sqrt(1+e[10]-e[0]-e[5]),t[3]=(e[1]-e[4])/r,t[0]=(e[8]+e[2])/r,t[1]=(e[6]+e[9])/r,t[2]=.25*r),t},fromRotationTranslationScale:function(t,e,n,r){const i=e[0],s=e[1],o=e[2],a=e[3],u=i+i,c=s+s,l=o+o,h=i*u,f=i*c,d=i*l,m=s*c,g=s*l,p=o*l,y=a*u,b=a*c,_=a*l,M=r[0],x=r[1],I=r[2];return t[0]=(1-(m+p))*M,t[1]=(f+_)*M,t[2]=(d-b)*M,t[3]=0,t[4]=(f-_)*x,t[5]=(1-(h+p))*x,t[6]=(g+y)*x,t[7]=0,t[8]=(d+b)*I,t[9]=(g-y)*I,t[10]=(1-(h+m))*I,t[11]=0,t[12]=n[0],t[13]=n[1],t[14]=n[2],t[15]=1,t},fromRotationTranslationScaleOrigin:function(t,e,n,r,i){const s=e[0],o=e[1],a=e[2],u=e[3],c=s+s,l=o+o,h=a+a,f=s*c,d=s*l,m=s*h,g=o*l,p=o*h,y=a*h,b=u*c,_=u*l,M=u*h,x=r[0],I=r[1],j=r[2],v=i[0],w=i[1],F=i[2],O=(1-(g+y))*x,T=(d+M)*x,S=(m-_)*x,B=(d-M)*I,N=(1-(f+y))*I,z=(p+b)*I,R=(m+_)*j,E=(p-b)*j,k=(1-(f+g))*j;return t[0]=O,t[1]=T,t[2]=S,t[3]=0,t[4]=B,t[5]=N,t[6]=z,t[7]=0,t[8]=R,t[9]=E,t[10]=k,t[11]=0,t[12]=n[0]+v-(O*v+B*w+R*F),t[13]=n[1]+w-(T*v+N*w+E*F),t[14]=n[2]+F-(S*v+z*w+k*F),t[15]=1,t},fromQuat:v,frustum:w,perspective:function(t,e,n,r,i){const s=1/Math.tan(e/2);let o;return t[0]=s/n,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=s,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=i&&i!==1/0?(o=1/(r-i),t[10]=(i+r)*o,t[14]=2*i*r*o):(t[10]=-1,t[14]=-2*r),t},perspectiveFromFieldOfView:function(t,e,n,r){const i=Math.tan(e.upDegrees*Math.PI/180),s=Math.tan(e.downDegrees*Math.PI/180),o=Math.tan(e.leftDegrees*Math.PI/180),a=Math.tan(e.rightDegrees*Math.PI/180),u=2/(o+a),c=2/(i+s);return t[0]=u,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=c,t[6]=0,t[7]=0,t[8]=-(o-a)*u*.5,t[9]=(i-s)*c*.5,t[10]=r/(n-r),t[11]=-1,t[12]=0,t[13]=0,t[14]=r*n/(n-r),t[15]=0,t},ortho:F,lookAt:O,targetTo:function(t,e,n,r){const i=e[0],s=e[1],o=e[2],a=r[0],u=r[1],c=r[2];let l=i-n[0],h=s-n[1],f=o-n[2],d=l*l+h*h+f*f;d>0&&(d=1/Math.sqrt(d),l*=d,h*=d,f*=d);let m=u*f-c*h,g=c*l-a*f,p=a*h-u*l;return d=m*m+g*g+p*p,d>0&&(d=1/Math.sqrt(d),m*=d,g*=d,p*=d),t[0]=m,t[1]=g,t[2]=p,t[3]=0,t[4]=h*p-f*g,t[5]=f*m-l*p,t[6]=l*g-h*m,t[7]=0,t[8]=l,t[9]=h,t[10]=f,t[11]=0,t[12]=i,t[13]=s,t[14]=o,t[15]=1,t},str:function(t){return"mat4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+", "+t[9]+", "+t[10]+", "+t[11]+", "+t[12]+", "+t[13]+", "+t[14]+", "+t[15]+")"},frob:function(t){return Math.sqrt(t[0]**2+t[1]**2+t[2]**2+t[3]**2+t[4]**2+t[5]**2+t[6]**2+t[7]**2+t[8]**2+t[9]**2+t[10]**2+t[11]**2+t[12]**2+t[13]**2+t[14]**2+t[15]**2)},add:function(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t[4]=e[4]+n[4],t[5]=e[5]+n[5],t[6]=e[6]+n[6],t[7]=e[7]+n[7],t[8]=e[8]+n[8],t[9]=e[9]+n[9],t[10]=e[10]+n[10],t[11]=e[11]+n[11],t[12]=e[12]+n[12],t[13]=e[13]+n[13],t[14]=e[14]+n[14],t[15]=e[15]+n[15],t},subtract:T,multiplyScalar:function(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*n,t[5]=e[5]*n,t[6]=e[6]*n,t[7]=e[7]*n,t[8]=e[8]*n,t[9]=e[9]*n,t[10]=e[10]*n,t[11]=e[11]*n,t[12]=e[12]*n,t[13]=e[13]*n,t[14]=e[14]*n,t[15]=e[15]*n,t},multiplyScalarAndAdd:function(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t[3]=e[3]+n[3]*r,t[4]=e[4]+n[4]*r,t[5]=e[5]+n[5]*r,t[6]=e[6]+n[6]*r,t[7]=e[7]+n[7]*r,t[8]=e[8]+n[8]*r,t[9]=e[9]+n[9]*r,t[10]=e[10]+n[10]*r,t[11]=e[11]+n[11]*r,t[12]=e[12]+n[12]*r,t[13]=e[13]+n[13]*r,t[14]=e[14]+n[14]*r,t[15]=e[15]+n[15]*r,t},exactEquals:S,equals:B,isOrthoNormal:N,mul:z,sub:R})},166:function(t,e,n){"use strict";n.d(e,"a",(function(){return Z})),n.d(e,"b",(function(){return Q})),n.d(e,"c",(function(){return U})),n.d(e,"d",(function(){return J})),n.d(e,"e",(function(){return $})),n.d(e,"f",(function(){return G})),n.d(e,"g",(function(){return P})),n.d(e,"h",(function(){return Y})),n.d(e,"i",(function(){return C})),n.d(e,"j",(function(){return K})),n.d(e,"k",(function(){return W})),n.d(e,"l",(function(){return R})),n.d(e,"m",(function(){return I})),n.d(e,"n",(function(){return q})),n.d(e,"o",(function(){return A})),n.d(e,"p",(function(){return ht})),n.d(e,"q",(function(){return rt})),n.d(e,"r",(function(){return ot})),n.d(e,"s",(function(){return lt})),n.d(e,"t",(function(){return et})),n.d(e,"u",(function(){return nt})),n.d(e,"v",(function(){return b})),n.d(e,"w",(function(){return _})),n.d(e,"x",(function(){return ut})),n.d(e,"y",(function(){return tt})),n.d(e,"z",(function(){return at}));var r=n(88),i=n(80),s=n(85),o=n(95),a=n(258),u=n(329),c=n(185);function l(t,e){return t?e?4:3:e?3:2}const h=i.a.getLogger("esri.tasks.support.optimizedFeatureSet"),f={esriGeometryPoint:0,esriGeometryPolyline:2,esriGeometryPolygon:3,esriGeometryMultipoint:0},d=(t,e,n,r,i,s)=>{t[n]=i,t[n+1]=s},m=(t,e,n,r,i,s)=>{t[n]=i,t[n+1]=s,t[n+2]=e[r+2]},g=(t,e,n,r,i,s)=>{t[n]=i,t[n+1]=s,t[n+2]=e[r+3]},p=(t,e,n,r,i,s)=>{t[n]=i,t[n+1]=s,t[n+2]=e[r+2],t[n+3]=e[r+3]};function y(t,e,n,r){if(t){if(n)return e&&r?p:m;if(e&&r)return g}else if(e&&r)return m;return d}function b({scale:t,translate:e},n){return Math.round((n-e[0])/t[0])}function _({scale:t,translate:e},n){return Math.round((e[1]-n)/t[1])}function M({scale:t,translate:e},n){return n*t[0]+e[0]}function x({scale:t,translate:e},n){return e[1]-n*t[1]}function I(t,e,n){return t?e?n?S(t):w(t):n?O(t):j(t):null}function j(t){const e=t.coords;return{x:e[0],y:e[1]}}function v(t,e){return t.coords[0]=e.x,t.coords[1]=e.y,t}function w(t){const e=t.coords;return{x:e[0],y:e[1],z:e[2]}}function F(t,e){return t.coords[0]=e.x,t.coords[1]=e.y,t.coords[2]=e.z,t}function O(t){const e=t.coords;return{x:e[0],y:e[1],m:e[2]}}function T(t,e){return t.coords[0]=e.x,t.coords[1]=e.y,t.coords[2]=e.m,t}function S(t){const e=t.coords;return{x:e[0],y:e[1],z:e[2],m:e[3]}}function B(t,e){return t.coords[0]=e.x,t.coords[1]=e.y,t.coords[2]=e.z,t.coords[3]=e.m,t}function N(t,e){return t&&e?B:t?F:e?T:v}function z(t,e,n,r,i){const s=N(n,r);for(const o of e){const{geometry:e,attributes:n}=o;let r;e&&(r=s(new c.a,e)),t.push(new a.b(r,n,null,n[i]))}return t}function R(t,e,n){if(Object(s.j)(t))return null;const r=l(e,n),i=[];for(let s=0;s<t.coords.length;s+=r){const e=[];for(let n=0;n<r;n++)e.push(t.coords[s+n]);i.push(e)}return e?n?{points:i,hasZ:e,hasM:n}:{points:i,hasZ:e}:n?{points:i,hasM:n}:{points:i}}function E(t,e,n,r,i){const s=l(n,r);for(const o of e){const e=o.geometry,n=o.attributes;let r;e&&(r=k(new c.a,e,s)),t.push(new a.b(r,n,null,n[i]))}return t}function k(t,e,n=l(e.hasZ,e.hasM)){t.lengths[0]=e.points.length;const r=t.coords;let i=0;for(const s of e.points)for(let t=0;t<n;t++)r[i++]=s[t];return t}function A(t,e,n){if(!t)return null;const r=l(e,n),{coords:i,lengths:s}=t,o=[];let a=0;for(const u of s){const t=[];for(let e=0;e<u;e++){const e=[];for(let t=0;t<r;t++)e.push(i[a++]);t.push(e)}o.push(t)}return e?n?{paths:o,hasZ:e,hasM:n}:{paths:o,hasZ:e}:n?{paths:o,hasM:n}:{paths:o}}function X(t,e,n,r,i){const s=l(n,r);for(const o of e){const e=o.geometry,n=o.attributes;let r;e&&(r=Y(new c.a,e,s)),t.push(new a.b(r,n,null,n[i]))}return t}function Y(t,e,n=l(e.hasZ,e.hasM)){const{lengths:r,coords:i}=t;let s=0;for(const o of e.paths){for(const t of o)for(let e=0;e<n;e++)i[s++]=t[e];r.push(o.length)}return t}function q(t,e,n){if(!t)return null;const r=l(e,n),{coords:i,lengths:s}=t,o=[];let a=0;for(const u of s){const t=[];for(let e=0;e<u;e++){const e=[];for(let t=0;t<r;t++)e.push(i[a++]);t.push(e)}o.push(t)}return e?n?{rings:o,hasZ:e,hasM:n}:{rings:o,hasZ:e}:n?{rings:o,hasM:n}:{rings:o}}function L(t,e,n,r,i){for(const o of e){const e=o.geometry,u=o.centroid,l=o.attributes;let h;e&&(h=P(new c.a,e,n,r)),Object(s.k)(u)?t.push(new a.b(h,l,v(new c.a,u),l[i])):t.push(new a.b(h,l,null,l[i]))}return t}function P(t,e,n=e.hasZ,r=e.hasM){return G(t,e.rings,n,r),t}function G(t,e,n,r){const i=l(n,r),{lengths:s,coords:o}=t;let a=0;s.length=o.length=0;for(const u of e){for(const t of u)for(let e=0;e<i;e++)o[a++]=t[e];s.push(u.length)}return t}const V=[],D=[];function Z(t,e,n,r,i){V[0]=t;const[s]=U(D,V,e,n,r,i);return V.length=D.length=0,s}function U(t,e,n,i,s,o){if(t.length=0,!n){for(const n of e){const e=n.attributes[o];t.push(new a.b(null,n.attributes,null,e))}return t}switch(n){case"esriGeometryPoint":return z(t,e,i,s,o);case"esriGeometryMultipoint":return E(t,e,i,s,o);case"esriGeometryPolyline":return X(t,e,i,s,o);case"esriGeometryPolygon":return L(t,e,i,s,o);default:h.error("convertToFeatureSet:unknown-geometry",new r.a(`Unable to parse unknown geometry type '${n}'`)),t.length=0}return t}function $(t,e,n,i,s,o){const a=t.length;switch(n){case"esriGeometryPoint":z(t,e,i,s,o);break;case"esriGeometryMultipoint":E(t,e,i,s,o);break;case"esriGeometryPolyline":X(t,e,i,s,o);break;case"esriGeometryPolygon":L(t,e,i,s,o);break;default:h.error("convertToFeatureSet:unknown-geometry",new r.a(`Unable to parse unknown geometry type '${n}'`))}for(let r=0;r<e.length;r++)t[r+a].geometryType=n,t[r+a].insertAfter=e[r].insertAfter,t[r+a].groupId=e[r].groupId;return t}function C(t,e,n,r){D[0]=t,H(V,D,e,n,r);const i=V[0];return V.length=D.length=0,i}function J(t,e,n){if(Object(s.j)(t))return null;const i=new c.a;return"hasZ"in t&&null==e&&(e=t.hasZ),"hasM"in t&&null==n&&(n=t.hasM),Object(o.f)(t)?N(null!=e?e:null!=t.z,null!=n?n:null!=t.m)(i,t):Object(o.g)(t)?P(i,t,e,n):Object(o.h)(t)?Y(i,t,l(e,n)):Object(o.e)(t)?k(i,t,l(e,n)):void h.error("convertFromGeometry:unknown-geometry",new r.a(`Unable to parse unknown geometry type '${t}'`))}function W(t,e,n,i){const o=t&&("coords"in t?t:t.geometry);if(Object(s.j)(o))return null;switch(e){case"esriGeometryPoint":{let t=j;return n&&i?t=S:n?t=w:i&&(t=O),t(o)}case"esriGeometryMultipoint":return R(o,n,i);case"esriGeometryPolyline":return A(o,n,i);case"esriGeometryPolygon":return q(o,n,i);default:return void h.error("convertToGeometry:unknown-geometry",new r.a(`Unable to parse unknown geometry type '${e}'`))}}function H(t,e,n,i,o){if(t.length=0,Object(s.j)(n))return function(t,e){for(const n of e)t.push({attributes:n.attributes});return t}(t,e);switch(n){case"esriGeometryPoint":return function(t,e,n,r){let i=j;n&&r?i=S:n?i=w:r&&(i=O);for(const o of e){const{geometry:e,attributes:n}=o,r=Object(s.k)(e)?i(e):null;t.push({attributes:n,geometry:r})}return t}(t,e,i,o);case"esriGeometryMultipoint":return function(t,e,n,r){for(const i of e){const{geometry:e,attributes:s}=i;let o;e&&(o=R(e,n,r)),t.push({attributes:s,geometry:o})}return t}(t,e,i,o);case"esriGeometryPolyline":return function(t,e,n,r){for(const i of e){const{geometry:e,attributes:o}=i;let a;Object(s.k)(e)&&(a=A(e,n,r)),t.push({attributes:o,geometry:a})}return t}(t,e,i,o);case"esriGeometryPolygon":return function(t,e,n,r){for(const i of e){const{geometry:e,attributes:o,centroid:a}=i;let u;if(Object(s.k)(e)&&(u=q(e,n,r)),a){const e=j(a);t.push({attributes:o,centroid:e,geometry:u})}else t.push({attributes:o,geometry:u})}return t}(t,e,i,o);default:h.error("convertToFeatureSet:unknown-geometry",new r.a(`Unable to parse unknown geometry type '${n}'`))}return t}function K(t){const{objectIdFieldName:e,spatialReference:n,transform:r,fields:i,hasM:s,hasZ:o,features:a,geometryType:u,exceededTransferLimit:c,uniqueIdField:l,queryGeometry:h,queryGeometryType:f}=t,d={features:H([],a,u,o,s),fields:i,geometryType:u,objectIdFieldName:e,spatialReference:n,uniqueIdField:l,queryGeometry:W(h,f,!1,!1)};return r&&(d.transform=r),c&&(d.exceededTransferLimit=c),s&&(d.hasM=s),o&&(d.hasZ=o),d}function Q(t,e){const n=new u.a,{hasM:i,hasZ:s,features:o,objectIdFieldName:a,spatialReference:c,geometryType:l,exceededTransferLimit:f,transform:d,fields:m}=t;return m&&(n.fields=m),n.geometryType=l,n.objectIdFieldName=a||e,n.spatialReference=c,n.objectIdFieldName?(o&&U(n.features,o,l,s,i,n.objectIdFieldName),f&&(n.exceededTransferLimit=f),i&&(n.hasM=i),s&&(n.hasZ=s),d&&(n.transform=d),n):(h.error(new r.a("optimized-features:invalid-objectIdFieldName","objectIdFieldName is missing")),n)}function tt(t){const{transform:e,features:n,hasM:r,hasZ:i}=t;if(!e)return t;for(const o of n)Object(s.k)(o.geometry)&&at(o.geometry,o.geometry,r,i,e),o.centroid&&at(o.centroid,o.centroid,r,i,e);return t.transform=null,t}function et(t,e){const{geometryType:n,features:r,hasM:i,hasZ:s}=e;if(!t)return e;for(let o=0;o<r.length;o++){const e=r[o],a=e.weakClone();a.geometry=new c.a,nt(a.geometry,e.geometry,i,s,n,t),e.centroid&&(a.centroid=new c.a,nt(a.centroid,e.centroid,i,s,"esriGeometryPoint",t)),r[o]=a}return e.transform=t,e}function nt(t,e,n,r,i,o,a=n,u=r){if(t.lengths.length&&(t.lengths.length=0),t.coords.length&&(t.coords.length=0),Object(s.j)(e)||!e.coords.length)return null;const c=f[i],{coords:h,lengths:d}=e,m=l(n,r),g=l(n&&a,r&&u),p=y(n,r,a,u);if(!d.length)return p(t.coords,h,0,0,b(o,h[0]),_(o,h[1])),t.lengths.length&&(t.lengths.length=0),t.coords.length=m,t;let M,x,I,j,v=0,w=0,F=w;for(const s of d){if(s<c)continue;let e=0;w=F,I=M=b(o,h[v]),j=x=_(o,h[v+1]),p(t.coords,h,w,v,I,j),e++,v+=m,w+=g;for(let n=1;n<s;n++,v+=m)I=b(o,h[v]),j=_(o,h[v+1]),I===M&&j===x||(p(t.coords,h,w,v,I-M,j-x),w+=g,e++,M=I,x=j);e>=c&&(t.lengths.push(e),F=w)}return t.coords.length=F,t.coords.length?t:null}function rt(t,e,n,r,i,s,o=n,a=r){if(t.lengths.length&&(t.lengths.length=0),t.coords.length&&(t.coords.length=0),!e||!e.coords.length)return null;const u=f[i],{coords:c,lengths:h}=e,d=l(n,r),m=l(n&&o,r&&a),g=y(n,r,o,a);if(!h.length)return g(t.coords,c,0,0,c[0],c[1]),t.lengths.length&&(t.lengths.length=0),t.coords.length=d,t;let p=0;const b=s*s;for(const l of h){if(l<u){p+=l*d;continue}const e=t.coords.length/m,n=p,r=p+(l-1)*d;g(t.coords,c,t.coords.length,n,c[n],c[n+1]),st(t.coords,c,d,b,g,n,r),g(t.coords,c,t.coords.length,r,c[r],c[r+1]);const i=t.coords.length/m-e;i>=u?t.lengths.push(i):t.coords.length=e*m,p+=l*d}return t.coords.length?t:null}function it(t,e,n,r){const i=t[e],s=t[e+1],o=t[n],a=t[n+1],u=t[r],c=t[r+1];let l=o,h=a,f=u-l,d=c-h;if(0!==f||0!==d){const t=((i-l)*f+(s-h)*d)/(f*f+d*d);t>1?(l=u,h=c):t>0&&(l+=f*t,h+=d*t)}return f=i-l,d=s-h,f*f+d*d}function st(t,e,n,r,i,s,o){let a,u=r,c=0;for(let l=s+n;l<o;l+=n)a=it(e,l,s,o),a>u&&(c=l,u=a);u>r&&(c-s>n&&st(t,e,n,r,i,s,c),i(t,e,t.length,c,e[c],e[c+1]),o-c>n&&st(t,e,n,r,i,c,o))}function ot(t,e,n,r){if(Object(s.j)(e)||!e.coords||!e.coords.length)return null;const i=l(n,r);let o=Number.POSITIVE_INFINITY,a=Number.POSITIVE_INFINITY,u=Number.NEGATIVE_INFINITY,c=Number.NEGATIVE_INFINITY;if(e&&e.coords){const t=e.coords;for(let e=0;e<t.length;e+=i){const n=t[e],r=t[e+1];o=Math.min(o,n),u=Math.max(u,n),a=Math.min(a,r),c=Math.max(c,r)}}return t[0]=o,t[1]=a,t[2]=u,t[3]=c,t}function at(t,e,n,r,i){const{coords:s,lengths:o}=e,a=n?r?p:m:r?m:d,u=l(n,r);if(!s.length)return t!==e&&(t.lengths.length=0,t.coords.length=0),t;if(!o.length)return a(t.coords,s,0,0,M(i,s[0]),x(i,s[1])),t!==e&&(t.lengths.length=0,t.coords.length=u),t;const[c,h]=i.scale;let f=0;for(let l=0;l<o.length;l++){const e=o[l];t.lengths[l]=e;let n=M(i,s[f]),r=x(i,s[f+1]);a(t.coords,s,f,f,n,r),f+=u;for(let i=1;i<e;i++,f+=u)n+=s[f]*c,r-=s[f+1]*h,a(t.coords,s,f,f,n,r)}return t!==e&&(t.lengths.length=o.length,t.coords.length=s.length),t}function ut(t,e,n,r,i,s){const o=l(n,r),a=y(n,r,i,s),u=e.coords;t.coords.length=0,t.lengths.length=0,t.lengths.push(...e.lengths);for(let c=0;c<u.length;c+=o)a(t.coords,u,t.coords.length,c,u[c],u[c+1]);return t}function ct(t,e,n,r){let i=0,s=t[r*e],o=t[r*(e+1)];for(let a=1;a<n;a++){const n=s+t[r*(e+a)],u=o+t[r*(e+a)+1],c=(n-s)*(u+o);s=n,o=u,i+=c}return.5*i}function lt(t,e){const{coords:n,lengths:r}=t;let i=0,s=0;for(let o=0;o<r.length;o++)s+=ct(n,i,r[o],e),i+=o;return Math.abs(s)}function ht(t,e){if(Object(s.j)(t))return null;const n=t.clone(),r=t.coords,i=t.lengths;let o=0;for(let s=0;s<i.length;s++){const t=i[s];let a=r[e*o],u=r[e*o+1];for(let i=1;i<t;i++){const t=a+r[e*(o+i)],s=u+r[e*(o+i)+1];n.coords[e*(o+i)]=t,n.coords[e*(o+i)+1]=s,a=t,u=s}o+=t}return n}},185:function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));class r{constructor(t=[],e=[],n=!1){this.lengths=null!=t?t:[],this.coords=null!=e?e:[],this.hasIndeterminateRingOrder=n}get isPoint(){return 0===this.lengths.length}get maxLength(){return Math.max(...this.lengths)}get size(){return this.lengths.reduce(((t,e)=>t+e))}forEachVertex(t){let e=0;this.lengths.length||t(this.coords[0],this.coords[1]);for(let n=0;n<this.lengths.length;n++){const r=this.lengths[n];for(let n=0;n<r;n++)t(this.coords[2*(n+e)],this.coords[2*(n+e)+1]);e+=r}}clone(t){return t?(t.set(this.coords),new r(this.lengths.slice(),t,this.hasIndeterminateRingOrder)):new r(this.lengths.slice(),this.coords.slice(),this.hasIndeterminateRingOrder)}}},215:function(t,e,n){"use strict";n.d(e,"a",(function(){return E})),n.d(e,"b",(function(){return k})),n.d(e,"c",(function(){return f})),n.d(e,"d",(function(){return y})),n.d(e,"e",(function(){return M})),n.d(e,"f",(function(){return s})),n.d(e,"g",(function(){return p})),n.d(e,"h",(function(){return T})),n.d(e,"i",(function(){return R})),n.d(e,"j",(function(){return a})),n.d(e,"k",(function(){return l})),n.d(e,"l",(function(){return h})),n.d(e,"m",(function(){return u})),n.d(e,"n",(function(){return c})),n.d(e,"o",(function(){return B})),n.d(e,"p",(function(){return o})),n.d(e,"q",(function(){return v})),n.d(e,"r",(function(){return x})),n.d(e,"s",(function(){return z})),n.d(e,"t",(function(){return _})),n.d(e,"u",(function(){return I})),n.d(e,"v",(function(){return j})),n.d(e,"w",(function(){return O})),n.d(e,"x",(function(){return F})),n.d(e,"y",(function(){return w})),n.d(e,"z",(function(){return b})),n.d(e,"A",(function(){return S}));var r=n(85),i=(n(99),n(118));function s(t=k){return[t[0],t[1],t[2],t[3],t[4],t[5]]}function o(t,e,n,r,i,o,a=s()){return a[0]=t,a[1]=e,a[2]=n,a[3]=r,a[4]=i,a[5]=o,a}function a(t,e){t[0]=Math.min(t[0],e[0]),t[1]=Math.min(t[1],e[1]),t[2]=Math.min(t[2],e[2]),t[3]=Math.max(t[3],e[3]),t[4]=Math.max(t[4],e[4]),t[5]=Math.max(t[5],e[5])}function u(t,e){t[0]=Math.min(t[0],e[0]),t[1]=Math.min(t[1],e[1]),t[3]=Math.max(t[3],e[2]),t[4]=Math.max(t[4],e[3])}function c(t,e){t[0]=Math.min(t[0],e[0]),t[1]=Math.min(t[1],e[1]),t[2]=Math.min(t[2],e[2]),t[3]=Math.max(t[3],e[0]),t[4]=Math.max(t[4],e[1]),t[5]=Math.max(t[5],e[2])}function l(t,e,n=0,r=e.length/3){let i=t[0],s=t[1],o=t[2],a=t[3],u=t[4],c=t[5];for(let l=0;l<r;l++)i=Math.min(i,e[n+3*l]),s=Math.min(s,e[n+3*l+1]),o=Math.min(o,e[n+3*l+2]),a=Math.max(a,e[n+3*l]),u=Math.max(u,e[n+3*l+1]),c=Math.max(c,e[n+3*l+2]);t[0]=i,t[1]=s,t[2]=o,t[3]=a,t[4]=u,t[5]=c}function h(t,e,n){const r=e.length;let i=t[0],s=t[1],o=t[2],a=t[3],u=t[4],c=t[5];if(n)for(let l=0;l<r;l++){const t=e[l];i=Math.min(i,t[0]),s=Math.min(s,t[1]),o=Math.min(o,t[2]),a=Math.max(a,t[0]),u=Math.max(u,t[1]),c=Math.max(c,t[2])}else for(let l=0;l<r;l++){const t=e[l];i=Math.min(i,t[0]),s=Math.min(s,t[1]),a=Math.max(a,t[0]),u=Math.max(u,t[1])}t[0]=i,t[1]=s,t[2]=o,t[3]=a,t[4]=u,t[5]=c}function f(t){for(let e=0;e<6;e++)if(!isFinite(t[e]))return!1;return!0}function d(t){return t[0]>=t[3]?0:t[3]-t[0]}function m(t){return t[1]>=t[4]?0:t[4]-t[1]}function g(t){return t[2]>=t[5]?0:t[5]-t[2]}function p(t){const e=d(t),n=g(t),r=m(t);return Math.sqrt(e*e+n*n+r*r)}function y(t,e=[0,0,0]){return e[0]=t[0]+d(t)/2,e[1]=t[1]+m(t)/2,e[2]=t[2]+g(t)/2,e}function b(t,e=[0,0,0]){return e[0]=d(t),e[1]=m(t),e[2]=g(t),e}function _(t){return Math.max(d(t),g(t),m(t))}function M(t,e){return e[0]>=t[0]&&e[1]>=t[1]&&e[2]>=t[2]&&e[0]<=t[3]&&e[1]<=t[4]&&e[2]<=t[5]}function x(t,e){return!!Object(r.j)(e)||function(t,e){return Math.max(e[0],t[0])<=Math.min(e[3],t[3])&&Math.max(e[1],t[1])<=Math.min(e[4],t[4])&&Math.max(e[2],t[2])<=Math.min(e[5],t[5])}(t,e)}function I(t,e,n,r,i=t){return i[0]=t[0]+e,i[1]=t[1]+n,i[2]=t[2]+r,i[3]=t[3]+e,i[4]=t[4]+n,i[5]=t[5]+r,i}function j(t,e,n=t){const r=t[0]+d(t)/2,i=t[1]+m(t)/2,s=t[2]+g(t)/2;return n[0]=r+(t[0]-r)*e,n[1]=i+(t[1]-i)*e,n[2]=s+(t[2]-s)*e,n[3]=r+(t[3]-r)*e,n[4]=i+(t[4]-i)*e,n[5]=s+(t[5]-s)*e,n}function v(t,e){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}function w(t,e,n=t){return n[0]=e[0],n[1]=e[1],n[2]=e[2],n!==t&&(n[3]=t[3],n[4]=t[4],n[5]=t[5]),n}function F(t,e,n=t){return n[3]=e[0],n[4]=e[1],n[5]=e[2],n!==t&&(n[0]=t[0],n[1]=t[1],n[2]=t[2]),t}function O(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t}function T(t){return t?O(t,E):s(E)}function S(t,e){return e||(e=Object(i.l)()),e[0]=t[0],e[1]=t[1],e[2]=t[3],e[3]=t[4],e}function B(t,e){return t[0]=e[0],t[1]=e[1],t[2]=Number.NEGATIVE_INFINITY,t[3]=e[2],t[4]=e[3],t[5]=Number.POSITIVE_INFINITY,t}function N(t){return 6===t.length}function z(t){return 0===d(t)&&0===m(t)&&0===g(t)}function R(t,e,n){if(Object(r.j)(t)||Object(r.j)(e))return t===e;if(!N(t)||!N(e))return!1;if(n){for(let r=0;r<t.length;r++)if(!n(t[r],e[r]))return!1}else for(let r=0;r<t.length;r++)if(t[r]!==e[r])return!1;return!0}const E=[1/0,1/0,1/0,-1/0,-1/0,-1/0],k=[0,0,0,0,0,0];s()},226:function(t,e,n){"use strict";(function(t){n.d(e,"a",(function(){return s})),n.d(e,"b",(function(){return r})),n.d(e,"c",(function(){return i}));var r="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof t?t:"undefined"!=typeof self?self:{};function i(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function s(t){throw new Error('Could not dynamically require "'+t+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}}).call(this,n(252))},233:function(t,e,n){"use strict";var r;function i(t,e){switch(t.type){case"range":{const n="range"in t?t.range[0]:t.minValue,i="range"in t?t.range[1]:t.maxValue;if(+e<n||+e>i)return r.VALUE_OUT_OF_RANGE;break}case"coded-value":case"codedValue":if(null==t.codedValues||t.codedValues.every((t=>null==t||t.code!==e)))return r.INVALID_CODED_VALUE}return null}function s(t){if(t&&"range"===t.type)return{min:"range"in t?t.range[0]:t.minValue,max:"range"in t?t.range[1]:t.maxValue}}n.d(e,"a",(function(){return r})),n.d(e,"b",(function(){return s})),n.d(e,"c",(function(){return i})),function(t){t.VALUE_OUT_OF_RANGE="domain-validation-error::value-out-of-range",t.INVALID_CODED_VALUE="domain-validation-error::invalid-coded-value"}(r||(r={}))},243:function(t,e,n){"use strict";function r(t){return"date"===t.type||"esriFieldTypeDate"===t.type}n.d(e,"a",(function(){return i}));class i{constructor(t){if(this.fields=t,this._fieldsMap=new Map,this._dateFieldsSet=new Set,this.dateFields=[],!t)return;const e=[];for(const n of t){const t=n&&n.name;if(t){const i=s(t);this._fieldsMap.set(t,n),this._fieldsMap.set(i,n),e.push(i),r(n)&&(this.dateFields.push(n),this._dateFieldsSet.add(n))}}e.sort(),this.uid=e.join(",")}destroy(){this._fieldsMap.clear()}has(t){return null!=this.get(t)}get(t){return null!=t?this._fieldsMap.get(t)||this._fieldsMap.get(s(t)):void 0}isDateField(t){return this._dateFieldsSet.has(this.get(t))}normalizeFieldName(t){const e=this.get(t);if(e)return e.name}}function s(t){return t.toLowerCase().trim()}},247:function(t,e,n){"use strict";n.d(e,"a",(function(){return i})),n.d(e,"b",(function(){return s}));var r=n(197);class i{constructor(t,e,n){this._namespace=t,this._storage=e,this._removeFunc=!1,this._hit=0,this._miss=0,this._storage.register(this),this._namespace+=":",n&&(this._storage.registerRemoveFunc(this._namespace,n),this._removeFunc=!0)}destroy(){this._storage.clear(this._namespace),this._removeFunc&&this._storage.deregisterRemoveFunc(this._namespace),this._storage.deregister(this),this._storage=null}get namespace(){return this._namespace.slice(0,-1)}get hitRate(){return this._hit/(this._hit+this._miss)}get size(){return this._storage.size}get maxSize(){return this._storage.maxSize}resetHitRate(){this._hit=this._miss=0}put(t,e,n,r=0){this._storage.put(this._namespace+t,e,n,r)}get(t){const e=this._storage.get(this._namespace+t);return void 0===e?++this._miss:++this._hit,e}pop(t){const e=this._storage.pop(this._namespace+t);return void 0===e?++this._miss:++this._hit,e}updateSize(t,e,n){this._storage.updateSize(this._namespace+t,e,n)}clear(){this._storage.clear(this._namespace)}clearAll(){this._storage.clearAll()}getStats(){return this._storage.getStats()}resetStats(){this._storage.resetStats()}}class s{constructor(t=10485760){this._maxSize=t,this._db=new Map,this._size=0,this._hit=0,this._miss=0,this._removeFuncs=new r.a,this._users=new r.a}destroy(){this.clearAll(),this._removeFuncs.clear(),this._users.clear(),this._db=null}register(t){this._users.push(t)}deregister(t){this._users.removeUnordered(t)}registerRemoveFunc(t,e){this._removeFuncs.push([t,e])}deregisterRemoveFunc(t){this._removeFuncs.filterInPlace((e=>e[0]!==t))}get size(){return this._size}get maxSize(){return this._maxSize}set maxSize(t){this._maxSize=Math.max(t,0),this._checkSizeLimit()}put(t,e,n,r){const i=this._db.get(t);if(i&&(this._size-=i.size,this._db.delete(t),i.entry!==e&&this._notifyRemoved(t,i.entry)),n>this._maxSize)return void this._notifyRemoved(t,e);if(void 0===e)return void console.warn("Refusing to cache undefined entry ");if(!n||n<0)return void console.warn("Refusing to cache entry with invalid size "+n);const s=1+Math.max(r,-3)- -3;this._db.set(t,{entry:e,size:n,lifetime:s,lives:s}),this._size+=n,this._checkSizeLimit()}updateSize(t,e,n){const r=this._db.get(t);if(r&&r.entry===e){if(this._size-=r.size,n>this._maxSize)return this._db.delete(t),void this._notifyRemoved(t,e);r.size=n,this._size+=n,this._checkSizeLimit()}}pop(t){const e=this._db.get(t);if(e)return this._size-=e.size,this._db.delete(t),++this._hit,e.entry;++this._miss}get(t){const e=this._db.get(t);if(void 0!==e)return this._db.delete(t),e.lives=e.lifetime,this._db.set(t,e),++this._hit,e.entry;++this._miss}getStats(){const t={Size:Math.round(this._size/1048576)+"/"+Math.round(this._maxSize/1048576)+"MB","Hit rate":Math.round(100*this._getHitRate())+"%",Entries:this._db.size.toString()},e={},n=new Array;this._db.forEach(((t,r)=>{const i=t.lifetime;n[i]=(n[i]||0)+t.size,this._users.forAll((n=>{const i=n.namespace;if(r.startsWith(i)){const n=e[i]||0;e[i]=n+t.size}}))}));const r={};this._users.forAll((t=>{const n=t.namespace;if(!isNaN(t.hitRate)&&t.hitRate>0){const i=e[n]||0;e[n]=i,r[n]=Math.round(100*t.hitRate)+"%"}else r[n]="0%"}));const i=Object.keys(e);i.forEach((t=>e[t]=e[t]/this._size*100)),i.sort(((t,n)=>e[n]-e[t])),i.forEach((n=>t[n]=Math.round(e[n])+"% / "+r[n]));for(let s=n.length-1;s>=0;--s){const e=n[s];e&&(t["Priority "+(s+-3-1)]=Math.round(e/this.size*100)+"%")}return t}resetStats(){this._hit=this._miss=0,this._users.forAll((t=>t.resetHitRate()))}clear(t){this._db.forEach(((e,n)=>{n.startsWith(t)&&(this._size-=e.size,this._db.delete(n),this._notifyRemoved(n,e.entry))}))}clearAll(){this._db.forEach(((t,e)=>this._notifyRemoved(e,t.entry))),this._size=0,this._db.clear()}_getHitRate(){return this._hit/(this._hit+this._miss)}_notifyRemoved(t,e){this._removeFuncs.forAll((n=>{t.startsWith(n[0])&&n[1](e)}))}_checkSizeLimit(){if(!(this._size<=this._maxSize))for(const[t,e]of this._db)if(this._db.delete(t),e.lives<=1?(this._size-=e.size,this._notifyRemoved(t,e.entry)):(--e.lives,this._db.set(t,e)),this._size<=.9*this.maxSize)return}}},258:function(t,e,n){"use strict";n.d(e,"a",(function(){return o})),n.d(e,"b",(function(){return i})),n.d(e,"c",(function(){return s}));var r=n(85);class i{constructor(t=null,e={},n,r){this.geometry=t,this.attributes=e,this.centroid=n,this.objectId=r,this.displayId=0,this.geohashX=0,this.geohashY=0}weakClone(){const t=new i(this.geometry,this.attributes,this.centroid,this.objectId);return t.displayId=this.displayId,t.geohashX=this.geohashX,t.geohashY=this.geohashY,t}}function s(t){return!(Object(r.j)(t.geometry)||!t.geometry.coords||!t.geometry.coords.length)}class o extends i{}},260:function(t,e,n){"use strict";n.d(e,"a",(function(){return I})),n.d(e,"b",(function(){return j})),n.d(e,"c",(function(){return _}));var r=n(137),i=n(88),s=n(80),o=n(85),a=n(134),u=n(150),c=n(268),l=n(113),h=n(181),f=(n(97),n(101)),d=n(98),m=n(95);async function g(t,e,n){const r="string"==typeof t?Object(d.K)(t):t,i=e[0].spatialReference,s=Object(m.c)(e[0]),o={...n,query:{...r.query,f:"json",sr:i.wkid?i.wkid:JSON.stringify(i),geometries:JSON.stringify((a=e,{geometryType:Object(m.c)(a[0]),geometries:a.map((t=>t.toJSON()))}))}};var a;return function(t,e,n){const r=Object(m.b)(e);return t.map((t=>{const e=r.fromJSON(t);return e.spatialReference=n,e}))}((await Object(f.default)(r.path+"/simplify",o)).data,s,i)}const p=s.a.getLogger("esri.geometry.support.normalizeUtils");function y(t){return"polygon"===t[0].type}function b(t){return"polyline"===t[0].type}function _(t,e){if(!(t instanceof u.a||t instanceof a.a)){const t="straightLineDensify: the input geometry is neither polyline nor polygon";throw p.error(t),new i.a(t)}const n=Object(c.b)(t),r=[];for(const i of n){const t=[];r.push(t),t.push([i[0][0],i[0][1]]);for(let n=0;n<i.length-1;n++){const r=i[n][0],s=i[n][1],o=i[n+1][0],a=i[n+1][1],u=Math.sqrt((o-r)*(o-r)+(a-s)*(a-s)),c=(a-s)/u,l=(o-r)/u,h=u/e;if(h>1){for(let a=1;a<=h-1;a++){const n=a*e,i=l*n+r,o=c*n+s;t.push([i,o])}const n=(u+Math.floor(h-1)*e)/2,i=l*n+r,o=c*n+s;t.push([i,o])}t.push([o,a])}}return function(t){return"polygon"===t.type}(t)?new a.a({rings:r,spatialReference:t.spatialReference}):new u.a({paths:r,spatialReference:t.spatialReference})}function M(t,e,n){if(e){const e=_(t,1e6);t=Object(h.e)(e,!0)}return n&&(t=Object(c.e)(t,n)),t}function x(t,e,n){if(Array.isArray(t)){const r=t[0];if(r>e){const n=Object(c.d)(r,e);t[0]=r+n*(-2*e)}else if(r<n){const e=Object(c.d)(r,n);t[0]=r+e*(-2*n)}}else{const r=t.x;if(r>e){const n=Object(c.d)(r,e);t=t.clone().offset(n*(-2*e),0)}else if(r<n){const e=Object(c.d)(r,n);t=t.clone().offset(e*(-2*n),0)}}return t}async function I(t,e,n){if(!Array.isArray(t))return I([t],e);const i=e?e.url:r.a.geometryServiceUrl;let s,p,_,j,v,w,F,O,T=0;const S=[],B=[];for(const r of t)if(Object(o.j)(r))B.push(r);else if(s||(s=r.spatialReference,p=Object(l.e)(s),_=s.isWebMercator,w=_?102100:4326,j=c.a[w].maxX,v=c.a[w].minX,F=c.a[w].plus180Line,O=c.a[w].minus180Line),p)if("mesh"===r.type)B.push(r);else if("point"===r.type)B.push(x(r.clone(),j,v));else if("multipoint"===r.type){const t=r.clone();t.points=t.points.map((t=>x(t,j,v))),B.push(t)}else if("extent"===r.type){const t=r.clone()._normalize(!1,!1,p);B.push(t.rings?new a.a(t):t)}else if(r.extent){const t=r.extent,e=Object(c.d)(t.xmin,v)*(2*j);let n=0===e?r.clone():Object(c.e)(r.clone(),e);t.offset(e,0),t.intersects(F)&&t.xmax!==j?(T=t.xmax>T?t.xmax:T,n=M(n,_),S.push(n),B.push("cut")):t.intersects(O)&&t.xmin!==v?(T=t.xmax*(2*j)>T?t.xmax*(2*j):T,n=M(n,_,360),S.push(n),B.push("cut")):B.push(n)}else B.push(r.clone());else B.push(r);let N=Object(c.d)(T,j),z=-90;const R=N,E=new u.a;for(;N>0;){const t=360*N-180;E.addPath([[t,z],[t,-1*z]]),z*=-1,N--}if(S.length>0&&R>0){const e=function(t,e){let n=-1;for(let r=0;r<e.cutIndexes.length;r++){const i=e.cutIndexes[r],s=e.geometries[r],o=Object(c.b)(s);for(let t=0;t<o.length;t++){const e=o[t];e.some((n=>{if(n[0]<180)return!0;{let n=0;for(let t=0;t<e.length;t++){const r=e[t][0];n=r>n?r:n}n=Number(n.toFixed(9));const r=-360*Object(c.d)(n,180);for(let i=0;i<e.length;i++){const e=s.getPoint(t,i);s.setPoint(t,i,e.clone().offset(r,0))}return!0}}))}if(i===n){if(y(t))for(const e of Object(c.b)(s))t[i]=t[i].addRing(e);else if(b(t))for(const e of Object(c.b)(s))t[i]=t[i].addPath(e)}else n=i,t[i]=s}return t}(S,await async function(t,e,n,r){const i="string"==typeof t?Object(d.K)(t):t,s=e[0].spatialReference,o={...r,query:{...i.query,f:"json",sr:JSON.stringify(s),target:JSON.stringify({geometryType:Object(m.c)(e[0]),geometries:e}),cutter:JSON.stringify(n)}},a=await Object(f.default)(i.path+"/cut",o),{cutIndexes:u,geometries:c=[]}=a.data;return{cutIndexes:u,geometries:c.map((t=>{const e=Object(m.a)(t);return e.spatialReference=s,e}))}}(i,S,E,n)),r=[],s=[];for(let n=0;n<B.length;n++){const i=B[n];if("cut"!==i)s.push(i);else{const i=e.shift(),a=t[n];Object(o.k)(a)&&"polygon"===a.type&&a.rings&&a.rings.length>1&&i.rings.length>=a.rings.length?(r.push(i),s.push("simplify")):s.push(_?Object(h.b)(i):i)}}if(!r.length)return s;const a=await g(i,r,n),u=[];for(let t=0;t<s.length;t++){const e=s[t];"simplify"!==e?u.push(e):u.push(_?Object(h.b)(a.shift()):a.shift())}return u}const k=[];for(let r=0;r<B.length;r++){const t=B[r];if("cut"!==t)k.push(t);else{const t=S.shift();k.push(!0===_?Object(h.b)(t):t)}}return Promise.resolve(k)}function j(t,e){const n=Object(l.e)(e);if(n){const[e,r]=n.valid,i=r-e;if(t<e)for(;t<e;)t+=i;if(t>r)for(;t>r;)t-=i}return t}},267:function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));const r=new(n(89).a)({esriFieldTypeSmallInteger:"small-integer",esriFieldTypeInteger:"integer",esriFieldTypeSingle:"single",esriFieldTypeDouble:"double",esriFieldTypeLong:"long",esriFieldTypeString:"string",esriFieldTypeDate:"date",esriFieldTypeOID:"oid",esriFieldTypeGeometry:"geometry",esriFieldTypeBlob:"blob",esriFieldTypeRaster:"raster",esriFieldTypeGUID:"guid",esriFieldTypeGlobalID:"global-id",esriFieldTypeXML:"xml"})},268:function(t,e,n){"use strict";n.d(e,"a",(function(){return o})),n.d(e,"b",(function(){return c})),n.d(e,"c",(function(){return l})),n.d(e,"d",(function(){return a})),n.d(e,"e",(function(){return u}));var r=n(150),i=n(94),s=n(95);const o={102100:{maxX:20037508.342788905,minX:-20037508.342788905,plus180Line:new r.a({paths:[[[20037508.342788905,-20037508.342788905],[20037508.342788905,20037508.342788905]]],spatialReference:i.a.WebMercator}),minus180Line:new r.a({paths:[[[-20037508.342788905,-20037508.342788905],[-20037508.342788905,20037508.342788905]]],spatialReference:i.a.WebMercator})},4326:{maxX:180,minX:-180,plus180Line:new r.a({paths:[[[180,-180],[180,180]]],spatialReference:i.a.WGS84}),minus180Line:new r.a({paths:[[[-180,-180],[-180,180]]],spatialReference:i.a.WGS84})}};function a(t,e){return Math.ceil((t-e)/(2*e))}function u(t,e){const n=c(t);for(const r of n)for(const t of r)t[0]+=e;return t}function c(t){return Object(s.g)(t)?t.rings:t.paths}function l(t){const e=(null==t?void 0:t.isWebMercator)?102100:4326;return[o[e].minX,o[e].maxX]}},329:function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));class r{constructor(){this.objectIdFieldName=null,this.globalIdFieldName=null,this.geohashFieldName=null,this.geometryProperties=null,this.geometryType=null,this.spatialReference=null,this.hasZ=!1,this.hasM=!1,this.features=[],this.fields=[],this.transform=null,this.exceededTransferLimit=!1,this.uniqueIdField=null,this.queryGeometryType=null,this.queryGeometry=null}weakClone(){const t=new r;return t.objectIdFieldName=this.objectIdFieldName,t.globalIdFieldName=this.globalIdFieldName,t.geohashFieldName=this.geohashFieldName,t.geometryProperties=this.geometryProperties,t.geometryType=this.geometryType,t.spatialReference=this.spatialReference,t.hasZ=this.hasZ,t.hasM=this.hasM,t.features=this.features,t.fields=this.fields,t.transform=this.transform,t.exceededTransferLimit=this.exceededTransferLimit,t.uniqueIdField=this.uniqueIdField,t.queryGeometry=this.queryGeometry,t.queryGeometryType=this.queryGeometryType,t}}},429:function(t,e,n){"use strict";n.d(e,"a",(function(){return s})),n.d(e,"b",(function(){return u})),n.d(e,"c",(function(){return c})),n.d(e,"d",(function(){return i}));var r=n(139);const i=Math.PI/180,s=/SPHEROID\[([^\]]+)]/i,o=r.a.radius,a=r.a.eccentricitySquared,u={a1:o*a,a2:o*a*o*a,a3:o*a*a/2,a4:o*a*o*a*2.5,a5:o*a+o*a*a/2,a6:1-a},c={4267:{a:6378206.4,f:1/294.9786982},4269:{a:6378137,f:1/298.257222101},4326:{a:r.a.radius,f:r.a.flattening},104900:{a:2439700,f:0},104901:{a:6051e3,f:0},104902:{a:6051800,f:0},104903:{a:r.c.radius,f:r.c.flattening},104904:{a:3393400,f:1/192.0430107526882},104905:{a:r.b.radius,f:r.b.flattening},104906:{a:6200,f:0},104907:{a:11100,f:0},104908:{a:71492e3,f:.06487439154031222},104909:{a:8200,f:0},104910:{a:83500,f:0},104911:{a:1e4,f:0},104912:{a:2409300,f:0},104913:{a:15e3,f:0},104914:{a:4e4,f:0},104915:{a:1562090,f:0},104916:{a:2632345,f:0},104917:{a:85e3,f:0},104918:{a:1821460,f:0},104919:{a:5e3,f:0},104920:{a:12e3,f:0},104921:{a:3e4,f:3},104922:{a:18e3,f:0},104923:{a:14e3,f:0},104924:{a:49300,f:0},104925:{a:60268e3,f:1/10.2079945799458},104926:{a:16e3,f:0},104927:{a:9500,f:0},104928:{a:56e4,f:0},104929:{a:249400,f:0},104930:{a:59500,f:0},104931:{a:16e3,f:0},104932:{a:133e3,f:0},104933:{a:718e3,f:0},104934:{a:888e3,f:0},104935:{a:1986300,f:0},104936:{a:1e4,f:0},104937:{a:41900,f:0},104938:{a:11e4,f:0},104939:{a:50100,f:0},104940:{a:764e3,f:0},104941:{a:11e3,f:0},104942:{a:529800,f:0},104943:{a:2575e3,f:0},104944:{a:25559e3,f:1/43.61604095563141},104945:{a:578900,f:0},104946:{a:33e3,f:0},104947:{a:21e3,f:0},104948:{a:13e3,f:0},104949:{a:31e3,f:0},104950:{a:27e3,f:0},104951:{a:42e3,f:0},104952:{a:235800,f:0},104953:{a:761400,f:0},104954:{a:15e3,f:0},104955:{a:54e3,f:0},104956:{a:77e3,f:0},104957:{a:27e3,f:0},104958:{a:788900,f:0},104959:{a:584700,f:0},104960:{a:24764e3,f:.01708124697141011},104961:{a:74e3,f:0},104962:{a:79e3,f:0},104963:{a:104e3,f:.14423076923076922},104964:{a:29e3,f:0},104965:{a:17e4,f:0},104966:{a:208e3,f:0},104967:{a:4e4,f:0},104968:{a:1352600,f:0},104969:{a:1195e3,f:0},104970:{a:593e3,f:0},104971:{a:r.b.radius,f:0},104972:{a:47e4,f:0},104973:{a:255e3,f:0},104974:{a:2439400,f:0}}},447:function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var r=n(247);class i{constructor(t,e){this._storage=new r.b,this._storage.maxSize=t,e&&this._storage.registerRemoveFunc("",e)}put(t,e){this._storage.put(t,e,1,1)}pop(t){return this._storage.pop(t)}get(t){return this._storage.get(t)}clear(){this._storage.clearAll()}destroy(){this._storage.destroy()}}},691:function(t,e,n){"use strict";n.d(e,"a",(function(){return a}));var r=n(171),i=n(85),s=n(197),o=n(688);class a{constructor(t=9,e){this.compareMinX=h,this.compareMinY=f,this.toBBox=function(t){return t},this._maxEntries=Math.max(4,t||9),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),e&&("function"==typeof e?this.toBBox=e:this._initFormat(e)),this.clear()}destroy(){this.clear(),M.prune(),x.prune(),I.prune(),j.prune()}all(t){this._all(this.data,t)}search(t,e){let n=this.data;const r=this.toBBox;if(b(t,n))for(M.clear();n;){for(let i=0,s=n.children.length;i<s;i++){const s=n.children[i],o=n.leaf?r(s):s;b(t,o)&&(n.leaf?e(s):y(t,o)?this._all(s,e):M.push(s))}n=M.pop()}}collides(t){let e=this.data;const n=this.toBBox;if(!b(t,e))return!1;for(M.clear();e;){for(let r=0,i=e.children.length;r<i;r++){const i=e.children[r],s=e.leaf?n(i):i;if(b(t,s)){if(e.leaf||y(t,s))return!0;M.push(i)}}e=M.pop()}return!1}load(t){if(!t.length)return this;if(t.length<this._minEntries){for(let e=0,n=t.length;e<n;e++)this.insert(t[e]);return this}let e=this._build(t.slice(0,t.length),0,t.length-1,0);if(this.data.children.length)if(this.data.height===e.height)this._splitRoot(this.data,e);else{if(this.data.height<e.height){const t=this.data;this.data=e,e=t}this._insert(e,this.data.height-e.height-1,!0)}else this.data=e;return this}insert(t){return t&&this._insert(t,this.data.height-1),this}clear(){return this.data=new w([]),this}remove(t){if(!t)return this;let e,n=this.data,s=null,o=0,a=!1;const u=this.toBBox(t);for(I.clear(),j.clear();n||I.length>0;){var c;if(n||(n=Object(i.d)(I.pop()),s=I.data[I.length-1],o=null!=(c=j.pop())?c:0,a=!0),n.leaf&&(e=Object(r.e)(n.children,t,n.children.length,n.indexHint),-1!==e))return n.children.splice(e,1),I.push(n),this._condense(I),this;a||n.leaf||!y(n,u)?s?(o++,n=s.children[o],a=!1):n=null:(I.push(n),j.push(o),o=0,s=n,n=n.children[0])}return this}toJSON(){return this.data}fromJSON(t){return this.data=t,this}_all(t,e){let n=t;for(x.clear();n;){var r;if(!0===n.leaf)for(const t of n.children)e(t);else x.pushArray(n.children);n=null!=(r=x.pop())?r:null}}_build(t,e,n,r){const i=n-e+1;let s=this._maxEntries;if(i<=s){const r=new w(t.slice(e,n+1));return u(r,this.toBBox),r}r||(r=Math.ceil(Math.log(i)/Math.log(s)),s=Math.ceil(i/s**(r-1)));const o=new F([]);o.height=r;const a=Math.ceil(i/s),c=a*Math.ceil(Math.sqrt(s));_(t,e,n,c,this.compareMinX);for(let u=e;u<=n;u+=c){const e=Math.min(u+c-1,n);_(t,u,e,a,this.compareMinY);for(let n=u;n<=e;n+=a){const i=Math.min(n+a-1,e);o.children.push(this._build(t,n,i,r-1))}}return u(o,this.toBBox),o}_chooseSubtree(t,e,n,r){for(;r.push(e),!0!==e.leaf&&r.length-1!==n;){let n,r=1/0,i=1/0;for(let s=0,o=e.children.length;s<o;s++){const o=e.children[s],a=d(o),u=g(t,o)-a;u<i?(i=u,r=a<r?a:r,n=o):u===i&&a<r&&(r=a,n=o)}e=n||e.children[0]}return e}_insert(t,e,n){const r=this.toBBox,i=n?t:r(t);I.clear();const s=this._chooseSubtree(i,this.data,e,I);for(s.children.push(t),l(s,i);e>=0&&I.data[e].children.length>this._maxEntries;)this._split(I,e),e--;this._adjustParentBBoxes(i,I,e)}_split(t,e){const n=t.data[e],r=n.children.length,i=this._minEntries;this._chooseSplitAxis(n,i,r);const s=this._chooseSplitIndex(n,i,r);if(!s)return void console.log("  Error: assertion failed at PooledRBush._split: no valid split index");const o=n.children.splice(s,n.children.length-s),a=n.leaf?new w(o):new F(o);a.height=n.height,u(n,this.toBBox),u(a,this.toBBox),e?t.data[e-1].children.push(a):this._splitRoot(n,a)}_splitRoot(t,e){this.data=new F([t,e]),this.data.height=t.height+1,u(this.data,this.toBBox)}_chooseSplitIndex(t,e,n){let r,i,s;r=i=1/0;for(let o=e;o<=n-e;o++){const e=c(t,0,o,this.toBBox),a=c(t,o,n,this.toBBox),u=p(e,a),l=d(e)+d(a);u<r?(r=u,s=o,i=l<i?l:i):u===r&&l<i&&(i=l,s=o)}return s}_chooseSplitAxis(t,e,n){const r=t.leaf?this.compareMinX:h,i=t.leaf?this.compareMinY:f;this._allDistMargin(t,e,n,r)<this._allDistMargin(t,e,n,i)&&t.children.sort(r)}_allDistMargin(t,e,n,r){t.children.sort(r);const i=this.toBBox,s=c(t,0,e,i),o=c(t,n-e,n,i);let a=m(s)+m(o);for(let u=e;u<n-e;u++){const e=t.children[u];l(s,t.leaf?i(e):e),a+=m(s)}for(let u=n-e-1;u>=e;u--){const e=t.children[u];l(o,t.leaf?i(e):e),a+=m(o)}return a}_adjustParentBBoxes(t,e,n){for(let r=n;r>=0;r--)l(e.data[r],t)}_condense(t){for(let e=t.length-1;e>=0;e--){const n=t.data[e];if(0===n.children.length)if(e>0){const i=t.data[e-1],s=i.children;s.splice(Object(r.e)(s,n,s.length,i.indexHint),1)}else this.clear();else u(n,this.toBBox)}}_initFormat(t){const e=["return a"," - b",";"];this.compareMinX=new Function("a","b",e.join(t[0])),this.compareMinY=new Function("a","b",e.join(t[1])),this.toBBox=new Function("a","return {minX: a"+t[0]+", minY: a"+t[1]+", maxX: a"+t[2]+", maxY: a"+t[3]+"};")}}function u(t,e){c(t,0,t.children.length,e,t)}function c(t,e,n,r,i){i||(i=new w([])),i.minX=1/0,i.minY=1/0,i.maxX=-1/0,i.maxY=-1/0;for(let s,o=e;o<n;o++)s=t.children[o],l(i,t.leaf?r(s):s);return i}function l(t,e){t.minX=Math.min(t.minX,e.minX),t.minY=Math.min(t.minY,e.minY),t.maxX=Math.max(t.maxX,e.maxX),t.maxY=Math.max(t.maxY,e.maxY)}function h(t,e){return t.minX-e.minX}function f(t,e){return t.minY-e.minY}function d(t){return(t.maxX-t.minX)*(t.maxY-t.minY)}function m(t){return t.maxX-t.minX+(t.maxY-t.minY)}function g(t,e){return(Math.max(e.maxX,t.maxX)-Math.min(e.minX,t.minX))*(Math.max(e.maxY,t.maxY)-Math.min(e.minY,t.minY))}function p(t,e){const n=Math.max(t.minX,e.minX),r=Math.max(t.minY,e.minY),i=Math.min(t.maxX,e.maxX),s=Math.min(t.maxY,e.maxY);return Math.max(0,i-n)*Math.max(0,s-r)}function y(t,e){return t.minX<=e.minX&&t.minY<=e.minY&&e.maxX<=t.maxX&&e.maxY<=t.maxY}function b(t,e){return e.minX<=t.maxX&&e.minY<=t.maxY&&e.maxX>=t.minX&&e.maxY>=t.minY}function _(t,e,n,r,s){const a=[e,n];for(;a.length;){const e=Object(i.d)(a.pop()),n=Object(i.d)(a.pop());if(e-n<=r)continue;const u=n+Math.ceil((e-n)/r/2)*r;Object(o.a)(t,u,n,e,s),a.push(n,u,u,e)}}const M=new s.a,x=new s.a,I=new s.a,j=new s.a({deallocator:void 0});class v extends class{constructor(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0}}{constructor(){super(...arguments),this.height=1,this.indexHint=new r.a}}class w extends v{constructor(t){super(),this.children=t,this.leaf=!0}}class F extends v{constructor(t){super(),this.children=t,this.leaf=!1}}},756:function(t,e,n){"use strict";n.d(e,"a",(function(){return f}));var r=n(88),i=n(125),s=n(80),o=n(85),a=n(215),u=n(118),c=n(166),l=n(794),h=n(757);class f{constructor(t){this.geometryInfo=t,this._boundsStore=new l.a,this._featuresById=new Map,this._markedIds=new Set,this.events=new i.a,this.featureAdapter=h.a}get geometryType(){return this.geometryInfo.geometryType}get hasM(){return this.geometryInfo.hasM}get hasZ(){return this.geometryInfo.hasZ}get numFeatures(){return this._featuresById.size}get fullBounds(){if(!this.numFeatures)return null;const t=Object(u.l)(u.a);return this._featuresById.forEach((e=>{const n=this._boundsStore.get(e.objectId);n&&(t[0]=Math.min(n[0],t[0]),t[1]=Math.min(n[1],t[1]),t[2]=Math.max(n[2],t[2]),t[3]=Math.max(n[3],t[3]))})),t}get storeStatistics(){let t=0;return this._featuresById.forEach((e=>{Object(o.k)(e.geometry)&&e.geometry.coords&&(t+=e.geometry.coords.length)})),{featureCount:this._featuresById.size,vertexCount:t/(this.hasZ?this.hasM?4:3:this.hasM?3:2)}}add(t){this._add(t),this._emitChanged()}addMany(t){for(const e of t)this._add(e);this._emitChanged()}clear(){this._featuresById.clear(),this._boundsStore.clear(),this._emitChanged()}removeById(t){const e=this._featuresById.get(t);return e?(this._remove(e),this._emitChanged(),e):null}removeManyById(t){this._boundsStore.invalidateIndex();for(const e of t){const t=this._featuresById.get(e);t&&this._remove(t)}this._emitChanged()}forEachBounds(t,e,n){for(const r of t){const t=this._boundsStore.get(r.objectId);t&&e(Object(a.o)(n,t))}}getFeature(t){return this._featuresById.get(t)}has(t){return this._featuresById.has(t)}forEach(t){this._featuresById.forEach((e=>t(e)))}forEachInBounds(t,e){this._boundsStore.forEachInBounds(t,(t=>{e(this._featuresById.get(t))}))}startMarkingUsedFeatures(){this._boundsStore.invalidateIndex(),this._markedIds.clear()}sweep(){let t=!1;this._featuresById.forEach(((e,n)=>{this._markedIds.has(n)||(t=!0,this._remove(e))})),this._markedIds.clear(),t&&this._emitChanged()}_emitChanged(){this.events.emit("changed",void 0)}_add(t){if(!t)return;const e=t.objectId;if(null==e)return void s.a.getLogger("esri.layers.graphics.data.FeatureStore").error(new r.a("featurestore:invalid-feature","feature id is missing",{feature:t}));const n=this._featuresById.get(e);let i;if(this._markedIds.add(e),n?(t.displayId=n.displayId,i=this._boundsStore.get(e),this._boundsStore.delete(e)):Object(o.k)(this.onFeatureAdd)&&this.onFeatureAdd(t),Object(o.j)(t.geometry)||!t.geometry.coords||!t.geometry.coords.length)return this._boundsStore.set(e,null),void this._featuresById.set(e,t);i=Object(c.r)(Object(o.k)(i)?i:Object(u.l)(),t.geometry,this.geometryInfo.hasZ,this.geometryInfo.hasM),Object(o.k)(i)&&this._boundsStore.set(e,i),this._featuresById.set(e,t)}_remove(t){return Object(o.k)(this.onFeatureRemove)&&this.onFeatureRemove(t),this._markedIds.delete(t.objectId),this._boundsStore.delete(t.objectId),this._featuresById.delete(t.objectId),t}}},757:function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));var r=n(462),i=n(258),s=n(185);const o={getObjectId:t=>t.objectId,getAttributes:t=>t.attributes,getAttribute:(t,e)=>t.attributes[e],cloneWithGeometry:(t,e)=>new i.b(e,t.attributes,null,t.objectId),getGeometry:t=>t.geometry,getCentroid:(t,e)=>(t.centroid||(t.centroid=Object(r.a)(new s.a,t.geometry,e.hasZ,e.hasM)),t.centroid)}},794:function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));var r=n(79),i=n(691);const s={minX:0,minY:0,maxX:0,maxY:0};class o{constructor(){this._indexInvalid=!1,this._boundsToLoad=[],this._boundsById=new Map,this._idByBounds=new Map,this._index=new i.a(9,Object(r.a)("csp-restrictions")?t=>({minX:t[0],minY:t[1],maxX:t[2],maxY:t[3]}):["[0]","[1]","[2]","[3]"]),this._loadIndex=()=>{if(this._indexInvalid){const t=new Array(this._idByBounds.size);let e=0;this._idByBounds.forEach(((n,r)=>{t[e++]=r})),this._indexInvalid=!1,this._index.clear(),this._index.load(t)}else this._boundsToLoad.length&&(this._index.load(this._boundsToLoad.filter((t=>this._idByBounds.has(t)))),this._boundsToLoad.length=0)}}clear(){this._indexInvalid=!1,this._boundsToLoad.length=0,this._boundsById.clear(),this._idByBounds.clear(),this._index.clear()}delete(t){const e=this._boundsById.get(t);this._boundsById.delete(t),e&&(this._idByBounds.delete(e),this._indexInvalid||this._index.remove(e))}forEachInBounds(t,e){this._loadIndex(),function(t,e,n){s.minX=e[0],s.minY=e[1],s.maxX=e[2],s.maxY=e[3],t.search(s,n)}(this._index,t,(t=>e(this._idByBounds.get(t))))}get(t){return this._boundsById.get(t)}has(t){return this._boundsById.has(t)}invalidateIndex(){this._indexInvalid||(this._indexInvalid=!0,this._boundsToLoad.length=0)}set(t,e){if(!this._indexInvalid){const e=this._boundsById.get(t);e&&(this._index.remove(e),this._idByBounds.delete(e))}this._boundsById.set(t,e),e&&(this._idByBounds.set(e,t),this._indexInvalid||(this._boundsToLoad.push(e),this._boundsToLoad.length>5e4&&this._loadIndex()))}}}}]);
//# sourceMappingURL=29.a2902776.chunk.js.map