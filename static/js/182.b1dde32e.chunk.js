(this.webpackJsonpimaps=this.webpackJsonpimaps||[]).push([[182],{239:function(e,r,n){"use strict";n.d(r,"a",(function(){return f})),n.d(r,"b",(function(){return c})),n.d(r,"c",(function(){return h})),n.d(r,"d",(function(){return O})),n.d(r,"e",(function(){return v})),n.d(r,"f",(function(){return y})),n.d(r,"g",(function(){return d})),n.d(r,"h",(function(){return p})),n.d(r,"i",(function(){return w})),n.d(r,"j",(function(){return b})),n.d(r,"k",(function(){return m}));var a=n(138),t=n(132),l=n(243);const s=["MapServer","ImageServer","FeatureServer","SceneServer","StreamServer","VectorTileServer"],i=new RegExp(`^((?:https?:)?\\/\\/\\S+?\\/rest\\/services\\/(.+?)\\/(${s.join("|")}))(?:\\/(?:layers\\/)?(\\d+))?`,"i"),u=new RegExp(`^((?:https?:)?\\/\\/\\S+?\\/([^\\/\\n]+)\\/(${s.join("|")}))(?:\\/(?:layers\\/)?(\\d+))?`,"i"),o=/(.*)\/(\d+)\/?$/i;function c(e){return!!i.test(e)}function y(e){const r=Object(t.J)(e),n=r.path.match(i)||r.path.match(u);if(!n)return null;const[,a,l,s,o]=n,c=l.indexOf("/");return{title:f(-1!==c?l.slice(c+1):l),serverType:s,sublayer:null!=o&&""!==o?parseInt(o,10):null,url:{path:a}}}function d(e){const r=Object(t.J)(e).path.match(o);return r?{serviceUrl:r[1],sublayerId:Number(r[2])}:null}function f(e){return(e=e.replace(/\s*[/_]+\s*/g," "))[0].toUpperCase()+e.slice(1)}function b(e,r){const n=[];if(e){const r=y(e);Object(a.k)(r)&&r.title&&n.push(r.title)}if(r){const e=f(r);n.push(e)}if(2===n.length){if(-1!==n[0].toLowerCase().indexOf(n[1].toLowerCase()))return n[0];if(-1!==n[1].toLowerCase().indexOf(n[0].toLowerCase()))return n[1]}return n.join(" - ")}function h(e){if(!e)return!1;const r=-1!==(e=e.toLowerCase()).indexOf(".arcgis.com/"),n=-1!==e.indexOf("//services")||-1!==e.indexOf("//tiles")||-1!==e.indexOf("//features");return r&&n}function p(e,r){return e?Object(t.H)(Object(t.G)(e,r)):e}function w(e){let{url:r}=e;if(!r)return{url:r};r=Object(t.G)(r,e.logger);const n=Object(t.J)(r),l=y(n.path);let s;if(Object(a.k)(l))null!=l.sublayer&&null==e.layer.layerId&&(s=l.sublayer),r=l.url.path;else if(e.nonStandardUrlAllowed){const e=d(n.path);Object(a.k)(e)&&(r=e.serviceUrl,s=e.sublayerId)}return{url:Object(t.H)(r),layerId:s}}function m(e,r,n,a,s){Object(l.f)(r,a,"url",s),a.url&&null!=e.layerId&&(a.url=Object(t.y)(a.url,n,e.layerId.toString()))}function v(e){if(!e)return!1;const r=e.toLowerCase(),n=-1!==r.indexOf("/services/"),a=-1!==r.indexOf("/mapserver/wmsserver"),t=-1!==r.indexOf("/imageserver/wmsserver"),l=-1!==r.indexOf("/wmsserver");return n&&(a||t||l)}function O(e){if(!e)return!1;const r=new t.a(Object(t.z)(e)).authority.toLowerCase();return"server.arcgisonline.com"===r||"services.arcgisonline.com"===r}},419:function(e,r,n){"use strict";n.r(r),n.d(r,"fromUrl",(function(){return o}));var a=n(138),t=n(140),l=n(132),s=n(151),i=n(239),u=n(694);async function o(e){var r;const s=null==(r=e.properties)?void 0:r.customParameters,o=await async function(e,r){let n=Object(i.f)(e);if(Object(a.j)(n)&&(n=await async function(e,r){const n=await f(e,r);let t=null,s=null;const u=n.type;if("Feature Layer"===u||"Table"===u?(t="FeatureServer",s=n.id):"indexedVector"===u?t="VectorTileServer":n.hasOwnProperty("mapName")?t="MapServer":n.hasOwnProperty("bandCount")&&n.hasOwnProperty("pixelSizeX")?t="ImageServer":n.hasOwnProperty("maxRecordCount")&&n.hasOwnProperty("allowGeometryUpdates")?t="FeatureServer":n.hasOwnProperty("streamUrls")&&(t="StreamServer"),!t)return null;const o=null!=s?Object(i.g)(e):null;return{title:Object(a.k)(o)&&n.name||Object(l.k)(e),serverType:t,sublayer:s,url:{path:Object(a.k)(o)?o.serviceUrl:Object(l.J)(e).path}}}(e,r)),Object(a.j)(n))throw new t.a("arcgis-layers:url-mismatch","The url '${url}' is not a valid arcgis resource",{url:e});const{serverType:s,sublayer:o}=n;let c;const d={FeatureServer:"FeatureLayer",StreamServer:"StreamLayer",VectorTileServer:"VectorTileLayer"};switch(s){case"MapServer":c=null!=o?"FeatureLayer":async function(e,r){return(await f(e,r)).tileInfo}(e,r).then((e=>e?"TileLayer":"MapImageLayer"));break;case"ImageServer":c=f(e,r).then((e=>{const r=e.tileInfo&&e.tileInfo.format;return e.tileInfo?!r||"LERC"!==r.toUpperCase()||e.cacheType&&"elevation"!==e.cacheType.toLowerCase()?"ImageryTileLayer":"ElevationLayer":"ImageryLayer"}));break;case"SceneServer":c=f(n.url.path,r).then((e=>{const r={Point:"SceneLayer","3DObject":"SceneLayer",IntegratedMesh:"IntegratedMeshLayer",PointCloud:"PointCloudLayer",Building:"BuildingSceneLayer"};if(e&&Array.isArray(e.layers)&&e.layers.length>0){const n=e.layers[0].layerType;if(null!=r[n])return r[n]}return"SceneLayer"}));break;default:c=d[s]}const b={FeatureLayer:!0,SceneLayer:!0},h="FeatureServer"===s,p={parsedUrl:n,Constructor:null,layerOrTableId:h?o:null,sublayerIds:null,tableIds:null},w=await c;if(b[w]&&null==o){const n=await y(e,s,r);if(h&&(p.sublayerInfos=n.layerInfos,p.tableInfos=n.tableInfos),1!==n.layerIds.length+n.tableIds.length)p.sublayerIds=n.layerIds,p.tableIds=n.tableIds;else if(h){var m,v;p.layerOrTableId=null!=(m=n.layerIds[0])?m:n.tableIds[0],p.sourceJSON=null!=(v=n.layerInfos[0])?v:n.tableInfos[0]}}return p.Constructor=await async function(e){return(0,u.a[e])()}(w),p}(e.url,s),d={...e.properties,url:e.url};if(!o.sublayerIds)return null!=o.layerOrTableId&&(d.layerId=o.layerOrTableId,d.sourceJSON=o.sourceJSON),new o.Constructor(d);const b=new(0,(await Promise.all([n.e(37),n.e(114)]).then(n.bind(null,715))).default)({title:o.parsedUrl.title});return function(e,r,n){function t(e,t){const l={...n,layerId:e,sublayerTitleMode:"service-name"};return Object(a.k)(t)&&(l.sourceJSON=t),new r.Constructor(l)}r.sublayerIds.forEach((n=>{const a=t(n,c(r.sublayerInfos,n));e.add(a)})),r.tableIds.forEach((n=>{const a=t(n,c(r.tableInfos,n));e.tables.add(a)}))}(b,o,d),b}function c(e,r){return e?e.find((e=>e.id===r)):null}async function y(e,r,n){var a,t;let l,s=!1;if("FeatureServer"===r){const r=await async function(e,r){var n,a;let t=await f(e,r);t=t||{},t.layers=(null==(n=t.layers)?void 0:n.filter(d))||[];const l={serviceJSON:t};if(t.currentVersion<10.5)return l;const s=await f(e+"/layers",r);return l.layersJSON={layers:(null==s||null==(a=s.layers)?void 0:a.filter(d))||[],tables:(null==s?void 0:s.tables)||[]},l}(e,n);s=!!r.layersJSON,l=r.layersJSON||r.serviceJSON}else l=await f(e,n);const i=null==(a=l)?void 0:a.layers,u=null==(t=l)?void 0:t.tables;return{layerIds:(null==i?void 0:i.map((e=>e.id)).reverse())||[],tableIds:(null==u?void 0:u.map((e=>e.id)).reverse())||[],layerInfos:s?i:[],tableInfos:s?u:[]}}function d(e){return!e.type||"Feature Layer"===e.type}async function f(e,r){return(await Object(s.default)(e,{responseType:"json",query:{f:"json",...r}})).data}},694:function(e,r,n){"use strict";n.d(r,"a",(function(){return a}));const a={BingMapsLayer:async()=>(await n.e(97).then(n.bind(null,914))).default,BuildingSceneLayer:async()=>(await Promise.all([n.e(1),n.e(2),n.e(3),n.e(4),n.e(72)]).then(n.bind(null,901))).default,CSVLayer:async()=>(await Promise.all([n.e(1),n.e(2),n.e(3),n.e(4),n.e(79)]).then(n.bind(null,915))).default,ElevationLayer:async()=>(await Promise.all([n.e(12),n.e(15),n.e(25),n.e(155)]).then(n.bind(null,772))).default,FeatureLayer:async()=>(await Promise.all([n.e(1),n.e(2),n.e(3),n.e(4),n.e(82)]).then(n.bind(null,337))).default,GroupLayer:async()=>(await Promise.all([n.e(37),n.e(111)]).then(n.bind(null,715))).default,GeoRSSLayer:async()=>(await Promise.all([n.e(1),n.e(98)]).then(n.bind(null,890))).default,ImageryLayer:async()=>(await Promise.all([n.e(1),n.e(2),n.e(3),n.e(4),n.e(66)]).then(n.bind(null,902))).default,ImageryTileLayer:async()=>(await Promise.all([n.e(1),n.e(2),n.e(3),n.e(10),n.e(71)]).then(n.bind(null,900))).default,IntegratedMeshLayer:async()=>(await Promise.all([n.e(10),n.e(15),n.e(34),n.e(119)]).then(n.bind(null,908))).default,KMLLayer:async()=>(await Promise.all([n.e(1),n.e(2),n.e(3),n.e(93)]).then(n.bind(null,916))).default,MapImageLayer:async()=>(await Promise.all([n.e(1),n.e(2),n.e(3),n.e(4),n.e(89)]).then(n.bind(null,837))).default,MapNotesLayer:async()=>(await Promise.all([n.e(1),n.e(2),n.e(3),n.e(4),n.e(70)]).then(n.bind(null,799))).default,OpenStreetMapLayer:async()=>(await Promise.all([n.e(24),n.e(274)]).then(n.bind(null,891))).default,PointCloudLayer:async()=>(await Promise.all([n.e(2),n.e(15),n.e(34),n.e(110)]).then(n.bind(null,904))).default,RouteLayer:async()=>(await Promise.all([n.e(1),n.e(2),n.e(3),n.e(4),n.e(80)]).then(n.bind(null,892))).default,SceneLayer:async()=>(await Promise.all([n.e(1),n.e(2),n.e(3),n.e(4),n.e(73)]).then(n.bind(null,917))).default,StreamLayer:async()=>(await Promise.all([n.e(1),n.e(2),n.e(3),n.e(4),n.e(91)]).then(n.bind(null,918))).default,TileLayer:async()=>(await Promise.all([n.e(1),n.e(2),n.e(3),n.e(4),n.e(90)]).then(n.bind(null,794))).default,UnknownLayer:async()=>(await n.e(158).then(n.bind(null,893))).default,UnsupportedLayer:async()=>(await n.e(159).then(n.bind(null,894))).default,VectorTileLayer:async()=>(await Promise.all([n.e(25),n.e(42),n.e(102),n.e(202)]).then(n.bind(null,813))).default,WebTileLayer:async()=>(await n.e(24).then(n.bind(null,808))).default,WMSLayer:async()=>(await Promise.all([n.e(1),n.e(2),n.e(95)]).then(n.bind(null,909))).default,WMTSLayer:async()=>(await Promise.all([n.e(24),n.e(275)]).then(n.bind(null,906))).default}}}]);
//# sourceMappingURL=182.b1dde32e.chunk.js.map