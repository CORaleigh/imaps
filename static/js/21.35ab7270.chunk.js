(this.webpackJsonpimaps=this.webpackJsonpimaps||[]).push([[21],{285:function(e,t,r){"use strict";var i,a;function n(e){switch(e){case"left":return i.Left;case"right":return i.Right;case"center":case"justify":return i.Center}}function s(e){switch(e){case"top":return a.Top;case"middle":return a.Center;case"baseline":return a.Baseline;case"bottom":return a.Bottom}}function o(e){switch(e){case"above-left":return[i.Right,a.Bottom];case"above-center":case"above-along":return[i.Center,a.Bottom];case"above-right":return[i.Left,a.Bottom];case"center-left":return[i.Right,a.Center];case"center-center":case"center-along":return[i.Center,a.Center];case"center-right":return[i.Left,a.Center];case"below-left":return[i.Right,a.Top];case"below-center":case"below-along":return[i.Center,a.Top];case"below-right":return[i.Left,a.Top];case"always-horizontal":return[i.Center,a.Baseline];default:return console.debug("Found invalid placement type ".concat(e)),[i.Center,a.Center]}}function l(e){switch(e){case i.Right:return-1;case i.Center:return 0;case i.Left:return 1;default:return console.debug("Found invalid horizontal alignment ".concat(e)),0}}function u(e){switch(e){case a.Top:return 1;case a.Center:return 0;case a.Bottom:case a.Baseline:return-1;default:return console.debug("Found invalid vertical alignment ".concat(e)),0}}function c(e){switch(e){case"left":return i.Left;case"right":return i.Right;case"center":case"justify":return i.Center}}r.d(t,"a",(function(){return a})),r.d(t,"b",(function(){return o})),r.d(t,"c",(function(){return c})),r.d(t,"d",(function(){return n})),r.d(t,"e",(function(){return l})),r.d(t,"f",(function(){return s})),r.d(t,"g",(function(){return u})),function(e){e[e.Left=-1]="Left",e[e.Center=0]="Center",e[e.Right=1]="Right"}(i||(i={})),function(e){e[e.Top=1]="Top",e[e.Center=0]="Center",e[e.Bottom=-1]="Bottom",e[e.Baseline=2]="Baseline"}(a||(a={}))},337:function(e,t,r){"use strict";r.d(t,"a",(function(){return T})),r.d(t,"b",(function(){return w})),r.d(t,"c",(function(){return _})),r.d(t,"d",(function(){return U})),r.d(t,"e",(function(){return N})),r.d(t,"f",(function(){return k})),r.d(t,"g",(function(){return W})),r.d(t,"h",(function(){return F})),r.d(t,"i",(function(){return S})),r.d(t,"j",(function(){return M})),r.d(t,"k",(function(){return I})),r.d(t,"l",(function(){return L}));r(80);var i=r(89),a=r(112),n=r(210),s=r(100),o=r(105),l=r(125),u=r(243),c=r(236),h=r(135),f=r(321),d=r(290),b=r(238),p=r(285),m=r(454),v=r(365),g=r(352),y=Math.PI/180,O=.04,x=Object(d.a)(),j=Object(b.a)(),w=512,T=50;function S(e,t){if(!t.isWrappable)return null;var[r,i]=Object(u.c)(t);return e[2]>i?[Object(l.i)([e[0],e[1],i,e[3]]),Object(l.i)([r,e[1],r+e[2]-i,e[3]])]:e[0]<r?[Object(l.i)([r,e[1],e[2],e[3]]),Object(l.i)([i-(r-e[0]),e[1],i,e[3]])]:null}function _(e,t,r,i,o,l,u){if(!i||!r.symbol)return e[0]=e[1]=e[2]=e[3]=0,t[0]=t[1]=t[2]=t[3]=0,e;var h=i;if(!Object(s.f)(h)){Object(n.a)(e,h);var f=t[0];0===f&&(f=P(r),t[0]=f);var d=o*f/2;return e[0]-=d,e[1]-=d,e[2]+=d,e[3]+=d,e}var b=h.x,p=h.y;return"esriTS"===r.symbol.type&&0===t[2]&&0===t[3]&&W(t,r.symbol,r.mosaicItem),function(e,t,r,i,n,s,o,l){var u;switch(i.type){case"esriSMS":case"esriPMS":u=N(t,r,i,s,o,0);break;case"esriTS":u=k(t,r,i,n,s,0);break;case"cim":case"CIMSymbolReference":case"expanded-cim":u=U(t,r,i,s,o,0)}for(var h,f,d=0,b=0;b<u.rings[0].length-1;b++)h=(t-(f=u.rings[0][b])[0])*(t-f[0])+(r-f[1])*(r-f[1]),d=Math.max(d,h);d=Math.sqrt(d);var p=Object(c.b)(t-d,l),m=Object(c.b)(t+d,l);if(p>m){var v=Object(a.d)(l);if(v){var[g,y]=v.valid;p=g,m=y}}e[0]=p,e[1]=r-d,e[2]=m,e[3]=r+d}(e,b,p,r.symbol,t,o,l,u),e}function L(e){return"text"===e||"esriTS"===e}function M(e){return"simple-marker"===e||"picture-marker"===e||"esriSMS"===e||"esriPMS"===e}function F(e){switch(Object(i.q)(e.geometry).type){case"point":case"multipoint":return 0;case"polyline":return 1;case"polygon":case"extent":return 2}return 0}var A=Object(b.a)(),R=Object(b.a)(),B=Object(b.a)(),z=Object(b.a)(),E=Object(b.a)(),V=Object(b.a)(),C=Object(b.a)();function I(e,t,r,i){Object(h.r)(B,t,r);for(var a,n,s,o,l,u,c,f,d,b=e.paths,p=1/0,m=0;m<b.length;m++){var v=b[m];if(!(v.length<2))for(var g=1;g<v.length;g++)a=v[g-1][0],s=v[g-1][1],n=v[g][0],o=v[g][1],l=Math.min(a,n)-i,u=Math.min(s,o)-i,c=Math.max(a,n)+i,f=Math.max(s,o)+i,t<l||t>c||r<u||r>f||(Object(h.r)(A,a,s),Object(h.r)(R,n,o),Object(h.d)(z,R,A),Object(h.d)(E,A,B),Object(h.a)(V,z,Object(h.g)(z,E)/Object(h.g)(z,z)),Object(h.d)(C,E,V),p>(d=Object(h.g)(C,C))&&(p=d))}return Math.sqrt(p)<=i}function N(e,t,r,i,a,n){var s,l,u=Object(o.h)(r.xoffset),c=Object(o.h)(r.yoffset),d=y*r.angle,b=y*n;switch(r.type){case"esriSMS":s=l=Object(o.h)(r.size);break;case"esriPMS":s=Object(o.h)(r.width),l=Object(o.h)(r.height)}a<O&&(i=O*i/a);var p=Object(f.d)(x);Object(f.h)(p,p,Object(h.r)(j,e,t)),Object(f.f)(p,p,b-d),Object(f.g)(p,p,Object(h.r)(j,i,-i)),Object(f.h)(p,p,Object(h.r)(j,u,-c));var m=[0,0];Object(h.s)(m,Object(h.r)(j,-.5*s,-.5*l),p);var v=[0,0];Object(h.s)(v,Object(h.r)(j,-.5*s,.5*l),p);var g=[0,0];Object(h.s)(g,Object(h.r)(j,.5*s,-.5*l),p);var w=[0,0];return Object(h.s)(w,Object(h.r)(j,.5*s,.5*l),p),{rings:[[m,g,w,v,m]]}}function U(e,t,r,i,a,n){var s=g.a.getEnvelope(r.data);if(!s)return null;a<O&&(i=O*i/a);var l=Object(o.h)(s.width),u=Object(o.h)(s.height),c=Object(o.h)(s.x),d=Object(o.h)(s.y),b=0*y,p=y*n,m=Object(f.d)(x);Object(f.h)(m,m,Object(h.r)(j,e,t)),Object(f.f)(m,m,p-b),Object(f.g)(m,m,Object(h.r)(j,i,i));var v=[0,0];Object(h.s)(v,Object(h.r)(j,c,d+u),m);var w=[0,0];Object(h.s)(w,Object(h.r)(j,c,d),m);var T=[0,0];Object(h.s)(T,Object(h.r)(j,c+l,d+u),m);var S=[0,0];return Object(h.s)(S,Object(h.r)(j,c+l,d),m),{rings:[[v,T,S,w,v]]}}function k(e,t,r,i,a,n){var s=Object(o.h)(r.xoffset),l=Object(o.h)(r.yoffset),u=y*r.angle,c=y*n,d=Object(f.d)(x);Object(f.h)(d,d,Object(h.r)(j,e,t)),Object(f.f)(d,d,c),Object(f.g)(d,d,Object(h.r)(j,a,-a));var b=i[0]+i[2]/2,p=i[1]+i[3]/2;Object(f.h)(d,d,Object(h.r)(j,s,-l)),Object(f.h)(d,d,Object(h.r)(j,b,p)),Object(f.f)(d,d,u),Object(f.h)(d,d,Object(h.r)(j,-b,-p));var m=[0,0];Object(h.s)(m,Object(h.r)(j,i[0],i[1]),d);var v=[0,0];Object(h.s)(v,Object(h.r)(j,i[0],i[1]+i[3]),d);var g=[0,0];Object(h.s)(g,Object(h.r)(j,i[0]+i[2],i[1]),d);var O=[0,0];return Object(h.s)(O,Object(h.r)(j,i[0]+i[2],i[1]+i[3]),d),{rings:[[m,g,O,v,m]]}}function P(e){switch(e.symbol.type){case"esriSFS":case"esriPFS":var t=e.symbol.outline;return t?t.width:0;case"esriSLS":return Object(o.h)(e.symbol.width);case"esriSMS":return Object(o.h)(e.symbol.size);case"esriPMS":return Object(o.h)(Math.max(e.symbol.width,e.symbol.height));case"esriTS":var r=[0,0,0,0];W(r,e.symbol,e.mosaicItem);var i=Math.max(Math.abs(r[0]),Math.abs(r[1]));return Math.max(r[2],r[3])+i;case"expanded-cim":var a=g.a.getEnvelope(e.symbol.data);return a.width!==-1/0&&a.height!==-1/0||(a.width=10,a.height=10,a.x=0,a.y=0),Object(o.h)(Math.sqrt(a.width*a.width+a.height*a.height));case"composite-symbol":if(!e.symbol.layers.length)return 0;var n=e.symbol.layers.length-1;return P({symbol:e.symbol.layers[n],mosaicItem:null});case"label":default:return 0}}function W(e,t,r){if(!r||0===r.glyphMosaicItems.length)return e;var i=Object(v.a)(t.text)[1],a=r.glyphMosaicItems,n=Object(m.a)(a,i,{scale:Object(o.h)(t.font.size)/24,angle:t.angle,xOffset:t.xoffset,yOffset:t.yoffset,hAlign:Object(p.d)(t.horizontalAlignment||"center"),vAlign:Object(p.f)(t.verticalAlignment||"baseline"),maxLineWidth:Math.max(32,Math.min(t.lineWidth||512,512)),lineHeight:30*Math.max(.25,Math.min(t.lineHeight||1,4)),decoration:t.font.decoration||"none",isCIM:!1}).bounds;return e[0]=Object(o.h)(n.x-n.halfWidth),e[1]=Object(o.h)(n.y-n.halfHeight),e[2]=Object(o.h)(n.width),e[3]=Object(o.h)(n.height),e}},360:function(e,t,r){"use strict";r.d(t,"a",(function(){return V})),r.d(t,"b",(function(){return L})),r.d(t,"c",(function(){return S}));var i=r(91),a=r(80),n=r(92),s=r(89),o=r(81),l=r(93),u=r(105),c=(r(128),r(341)),h=(r(229),r(231),r(197),r(199),r(198),r(194)),f=(r(244),r(511)),d=r(127),b=r(156),p=r(151),m=r(406);var v=r(507),g=r(535),y=r(494),O=o.a.getLogger("esri.views.2d.layers.features.schemaUtils"),x="ValidationError",j={esriGeometryPoint:["above-right","above-center","above-left","center-center","center-left","center-right","below-center","below-left","below-right"],esriGeometryPolygon:["always-horizontal"],esriGeometryPolyline:["center-along"],esriGeometryMultipoint:null};function w(e){return Object(b.h)(e)}function T(e){switch(e.type){case"line-marker":var t;return{type:"line-marker",color:null==(t=e.color)?void 0:t.toJSON(),placement:e.placement,style:e.style};default:return Object(c.a)(e.toJSON()).toJSON()}}function S(e,t,r){if(!e)return null;var a=0,n=!1,o=0;switch(Object(s.k)(t)&&(o=Object(v.b)(t),"visualVariables"in t&&(a=function(e){if(!e)return d.e.NONE;var t=0;for(var r of e)if("size"===r.type){var i=Object(m.a)(r);t|=i,"outline"===r.target&&(t|=i<<4)}else"color"===r.type?t|=d.e.COLOR:"opacity"===r.type?t|=d.e.OPACITY:"rotation"===r.type&&(t|=d.e.ROTATION);return t}(t.visualVariables||[]),n="dot-density"===t.type)),e.type){case"simple-fill":case"picture-fill":return function(e,t,r,a){var n=Object(b.g)(d.d.FILL,t,!1,r),s=a?w(n):n,o=e.clone(),l=o.outline;o.outline=null;var u=[],c=Object(i.a)({materialKey:s,hash:o.hash()},T(o));if(u.push(c),l){var h=Object(b.g)(d.d.LINE,t,!0,!1),f=Object(i.a)({materialKey:a?w(h):h,hash:l.hash()},T(l));u.push(f)}return{type:"composite-symbol",layers:u,hash:u.reduce(((e,t)=>t.hash+e),"")}}(e,a,n,r);case"simple-marker":case"picture-marker":return function(e,t,r,a){var n=Object(b.g)(d.d.MARKER,t,!1,!1),s=a?w(n):n,o=T(e);return Object(i.a)(Object(i.a)({materialKey:s,hash:e.hash()},o),{},{angle:e.angle,maxVVSize:r})}(e,a,o,r);case"simple-line":return function(e,t,r){var a=Object(b.g)(d.d.LINE,t,!1,!1),n=r?w(a):a,s=e.clone(),o=s.marker;s.marker=null;var l=[];if(l.push(Object(i.a)({materialKey:n,hash:s.hash()},T(s))),o){var u,c=Object(b.g)(d.d.MARKER,t,!1,!1),h=r?w(c):c;o.color=null!=(u=o.color)?u:s.color,l.push(Object(i.a)({materialKey:h,hash:o.hash(),lineWidth:s.width},T(o)))}return{type:"composite-symbol",layers:l,hash:l.reduce(((e,t)=>t.hash+e),"")}}(e,a,r);case"text":return function(e,t,r,a){var n=Object(b.g)(d.d.TEXT,t,!1,!1),s=a?w(n):n,o=T(e);return Object(i.a)(Object(i.a)({materialKey:s,hash:e.hash()},o),{},{angle:e.angle,maxVVSize:r})}(e,a,o,r);case"label":return function(e,t,r){var a=Object(b.g)(d.d.LABEL,t,!1,!1,e.labelPlacement);return Object(i.a)(Object(i.a)({materialKey:r?w(a):a,hash:e.hash()},e.toJSON()),{},{labelPlacement:e.labelPlacement})}(e,a,r);case"cim":return{type:"cim",rendererKey:a,data:e.data,maxVVSize:o};case"web-style":return Object(i.a)(Object(i.a)({},T(e)),{},{type:"web-style",hash:e.hash(),rendererKey:a,maxVVSize:o});default:throw new Error("symbol not supported ".concat(e.type))}}function _(e,t){var r=Object(n.a)(e);return r.some((e=>function(e,t){var r=e.labelPlacement,i=j[t];if(!e.symbol)return O.warn("No LabelClass symbol specified."),!0;if(!i)return O.error(new l.a("mapview-labeling:unsupported-geometry-type","Unable to create labels for Feature Layer, ".concat(t," is not supported"))),!0;if(!i.some((e=>e===r))){var a=i[0];r&&O.warn("Found invalid label placement type ".concat(r," for ").concat(t,". Defaulting to ").concat(a)),e.labelPlacement=a}return!1}(e,t)))?[]:r}function L(e){return Object(a.a)("esri-2d-update-debug")&&console.debug("Created new schema",M(e,!0)),M(e)}function M(e,t=!1){try{var r,i,a=function(e,t=!1){var r=new Array;return r.push(function(e,t,r=!1){var i={indexCount:0,fields:{}},a="featureReduction"in e&&e.featureReduction,n=a?"aggregate":"feature";switch(e.renderer.type){case"heatmap":var{blurRadius:s,fieldOffset:o,field:u}=e.renderer;return{type:"heatmap",aggregateFields:[],attributes:i,target:n,storage:null,mesh:{blurRadius:s,fieldOffset:o,field:B(i,{target:n,field:u,resultType:"numeric"}).field}};default:var c=[],d="aggregate"===n?Object(f.b)(c,e.renderer,a,null):e.renderer;!function(e,t){var r={mesh:!0,storage:!0};for(var i of t){var{name:a,outStatistic:n}=i,{statisticType:s,onStatisticField:o}=n,l=null,u=null,c=null,h="numeric",f="feature";"onStatisticValueExpression"in n?u=z(e,{type:"expression",target:f,valueExpression:n.onStatisticValueExpression,resultType:h}).fieldIndex:"onStatisticNormalizationField"in n?(l=z(e,{type:"field",target:f,field:o,resultType:h}).field,c=n.onStatisticNormalizationField):l=z(e,{type:"field",target:f,field:o,resultType:h}).field,z(e,{type:"statistic",target:"aggregate",name:a,context:r,inField:l,inNormalizationField:c,inFieldIndex:u,statisticType:s})}}(i,c);var b=V(i,n,d,r),m=null,v=function(e,t,r){switch(r.type){case"dot-density":return function(e,t,r){return r&&r.length?{type:"dot-density",mapping:r.map(((r,i)=>{var{field:a,fieldIndex:n}=B(e,{valueExpression:r.valueExpression,field:r.field,resultType:"numeric",target:t});return{binding:i,field:a,fieldIndex:n}})),target:t}:{type:"dot-density",mapping:[],target:t}}(e,t,r.attributes);case"simple":case"class-breaks":case"unique-value":return function(e,t,r){if(!r||!r.length)return{type:"visual-variable",mapping:[],target:t};var i={storage:!0},a="numeric";return{type:"visual-variable",mapping:Object(g.b)(r).map((r=>{var n,s=Object(p.m)(r.type),{field:o,fieldIndex:l}=B(e,{target:t,valueExpression:r.valueExpression,field:r.field,context:i,resultType:a});switch(r.type){case"size":return"$view.scale"===r.valueExpression?null:{type:"size",binding:s,field:o,fieldIndex:l,normalizationField:B(e,{target:t,field:r.normalizationField,context:i,resultType:a}).field,valueRepresentation:null!=(n=r.valueRepresentation)?n:null};case"color":return{type:"color",binding:s,field:o,fieldIndex:l,normalizationField:B(e,{target:t,field:r.normalizationField,context:i,resultType:a}).field};case"opacity":return{type:"opacity",binding:s,field:o,fieldIndex:l,normalizationField:B(e,{target:t,field:r.normalizationField,context:i,resultType:a}).field};case"rotation":return{type:"rotation",binding:s,field:o,fieldIndex:l}}})).filter((e=>e)),target:t}}(e,t,r.visualVariables);case"heatmap":case"dictionary":return null}}(i,n,d),O=Object(y.a)(e.geometryType),j=e.labelsVisible&&e.labelingInfo||[],w=[];if(a){if("selection"===a.type)throw new l.a(x,"Mapview does not support `selection` reduction type",a);if(a.symbol){var T=new h.a({symbol:a.symbol,visualVariables:"visualVariables"in d?d.visualVariables:null});m=V(i,n,T,r)}w=a&&a.labelsVisible&&a.labelingInfo||[]}j=_(j,O),w=_(w,O);var S=0,L=[...j.map((e=>E(d,i,e,"feature",S++,r))),...w.map((e=>E(d,i,e,"aggregate",S++,r)))];return{type:"symbol",target:n,attributes:i,aggregateFields:c,storage:v,mesh:{matcher:b,labels:L,aggregateMatcher:m}}}}(e,t)),r}(e,t),n={};return a.map((t=>function(e,t,r){switch(r.target){case"feature":return void R(e,A(t),r);case"aggregate":var i=t.featureReduction;if("selection"===i.type)throw new l.a(x,"Mapview does not support `selection` reduction type",i);return R(e,A(t),r),void function(e,t,r){e.aggregate||(e.aggregate={name:"aggregate",input:"feature",filters:null,attributes:{},params:{clusterRadius:Object(u.h)(t.clusterRadius/2),clusterPixelBuffer:64*Math.ceil(Object(u.h)(t.clusterMaxSize)/64),fields:r.aggregateFields}}),F(e.aggregate,r.attributes.fields)}(e,i,r)}}(n,e,t))),{source:{definitionExpression:e.definitionExpression,fields:e.fields.map((e=>e.toJSON())),gdbVersion:e.gdbVersion,historicMoment:null==(r=e.historicMoment)?void 0:r.getTime(),outFields:e.availableFields,pixelBuffer:e.pixelBuffer,spatialReference:e.spatialReference.toJSON(),timeExtent:null==(i=e.timeExtent)?void 0:i.toJSON()},attributes:{fields:{},indexCount:0},processors:a,targets:n}}catch(s){if(s.fieldName===x)return O.error(s),null;throw s}}function F(e,t){for(var r in t){var i=t[r];if(i.target===e.name){var a=e.attributes[r];a?(a.context.mesh=a.context.mesh||i.context.mesh,a.context.storage=a.context.storage||i.context.storage):e.attributes[r]=i}}return e}function A(e){var t,r,i,a,n;return[null!=(t=null==(r=e.filter)?void 0:r.toJSON())?t:null,null!=(i=null==(a=e.effect)||null==(n=a.filter)?void 0:n.toJSON())?i:null]}function R(e,t,r){return e.feature||(e.feature={name:"feature",input:"source",filters:t,attributes:{}}),F(e.feature,r.attributes.fields),e}function B(e,t){return t.field?z(e,Object(i.a)(Object(i.a)({},t),{},{type:"field",field:t.field})):t.valueExpression?z(e,Object(i.a)(Object(i.a)({},t),{},{type:"expression",valueExpression:t.valueExpression})):{field:null,fieldIndex:null}}function z(e,t){switch(t.type){case"expression":var r=t.valueExpression;if(!e.fields[r]){var a=e.indexCount++;e.fields[r]=Object(i.a)(Object(i.a)({},t),{},{name:r,fieldIndex:a})}return{fieldIndex:e.fields[r].fieldIndex};case"label-expression":var n=JSON.stringify(t.label);if(!e.fields[n]){var s=e.indexCount++;e.fields[n]=Object(i.a)(Object(i.a)({},t),{},{name:n,fieldIndex:s})}return{fieldIndex:e.fields[n].fieldIndex};case"field":var o=t.field;return"aggregate"===t.target&&e.fields[o]||(e.fields[o]=Object(i.a)(Object(i.a)({},t),{},{name:o})),{field:o};case"statistic":return e.fields[t.name]=Object(i.a)({},t),{field:t.name}}}function E(e,t,r,a,n,s=!1){var o=z(t,{type:"label-expression",target:a,context:{mesh:!0},resultType:"string",label:{labelExpression:r.labelExpression,labelExpressionInfo:r.labelExpressionInfo?{expression:r.labelExpressionInfo.expression}:null,symbol:!!r.symbol,where:r.where}}),{fieldIndex:l}=o;return Object(i.a)(Object(i.a)({},S(r,e,s)),{},{fieldIndex:l,target:a,index:n})}function V(e,t,r,a=!1){var n=Object(s.r)(e,{indexCount:0,fields:{}});switch(r.type){case"simple":case"dot-density":return function(e,t,r,i=!1){var a=t.getSymbols();return{type:"simple",symbol:S(a.length?a[0]:null,t,i),isDotDensity:r}}(0,r,"dot-density"===r.type,a);case"class-breaks":return function(e,t,r,i=!1){var a={mesh:!0,use:"renderer.field"},n=r.backgroundFillSymbol,{field:s,fieldIndex:o}=B(e,{target:t,field:r.field,valueExpression:r.valueExpression,resultType:"numeric",context:a}),l=r.normalizationType,u="log"===l?"esriNormalizeByLog":"percent-of-total"===l?"esriNormalizeByPercentOfTotal":"field"===l?"esriNormalizeByField":null,c=r.classBreakInfos.map((e=>({symbol:S(e.symbol,r,i),min:e.minValue,max:e.maxValue}))).sort(((e,t)=>e.min-t.min));return{type:"interval",attributes:e.fields,field:s,fieldIndex:o,backgroundFillSymbol:S(n,r,i),defaultSymbol:S(r.defaultSymbol,r,i),intervals:c,normalizationField:r.normalizationField,normalizationTotal:r.normalizationTotal,normalizationType:u,isMaxInclusive:r.isMaxInclusive}}(n,t,r,a);case"unique-value":return function(e,t,r,a=!1){var n=[],s=r.backgroundFillSymbol,o={target:t,context:{mesh:!0},resultType:"string"};if(r.field&&"string"!=typeof r.field)throw new l.a(x,"Expected renderer.field to be a string",r);var{field:u,fieldIndex:c}=B(e,Object(i.a)(Object(i.a)({},o),{},{field:r.field,valueExpression:r.valueExpression}));for(var h of r.uniqueValueInfos)n.push({value:""+h.value,symbol:S(h.symbol,r,a)});return{type:"map",attributes:e.fields,field:u,fieldIndex:c,field2:B(e,Object(i.a)(Object(i.a)({},o),{},{field:r.field2})).field,field3:B(e,Object(i.a)(Object(i.a)({},o),{},{field:r.field3})).field,fieldDelimiter:r.fieldDelimiter,backgroundFillSymbol:S(s,r),defaultSymbol:S(r.defaultSymbol,r),map:n}}(n,t,r,a);case"dictionary":return function(e,t,r=!1){return{type:"dictionary",renderer:t.toJSON()}}(0,r,a)}}},365:function(e,t,r){"use strict";r.d(t,"a",(function(){return a}));var i=new(r(524).a);function a(e){return i.hasBidiChar(e)?(t="rtl"===i.checkContextual(e)?"IDNNN":"ICNNN",[i.bidiTransform(e,t,"VLYSN"),!0]):[e,!1];var t}},446:function(e,t,r){"use strict";t.a=class{constructor(e=0,t=0,r=0,i=0){this.x=e,this.y=t,this.width=r,this.height=i}get isEmpty(){return this.width<=0||this.height<=0}union(e){this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.width=Math.max(this.width,e.width),this.height=Math.max(this.height,e.height)}}},454:function(e,t,r){"use strict";r.d(t,"a",(function(){return O}));var i=r(135),a=r(321),n=r(290),s=r(238),o=r(285),l=r(164),u=r(446),c=r(110);class h{constructor(e,t,r,i){this.center=Object(s.b)(e,t),this.centerT=Object(s.a)(),this.halfWidth=r/2,this.halfHeight=i/2,this.width=r,this.height=i}get x(){return this.center[0]}get y(){return this.center[1]}get blX(){return this.center[0]+this.halfWidth}get blY(){return this.center[1]+this.halfHeight}get trX(){return this.center[0]-this.halfWidth}get trY(){return this.center[1]-this.halfHeight}get xmin(){return this.x-this.halfWidth}get xmax(){return this.x+this.halfWidth}get ymin(){return this.y-this.halfHeight}get ymax(){return this.y+this.halfHeight}set x(e){this.center[0]=e}set y(e){this.center[1]=e}clone(){return new h(this.x,this.y,this.width,this.height)}serialize(e){return e.writeF32(this.center[0]),e.writeF32(this.center[1]),e.push(this.width),e.push(this.height),e}findCollisionDelta(e,t=4){var r=Math.abs(e.centerT[0]-this.centerT[0]),i=Math.abs(e.centerT[1]-this.centerT[1]),a=(e.halfWidth+this.halfWidth+t)/r,n=(e.halfHeight+this.halfHeight+t)/i,s=Math.min(a,n);return Object(c.m)(s)}extend(e){var t=Math.min(this.xmin,e.xmin),r=Math.min(this.ymin,e.ymin),i=Math.max(this.xmax,e.xmax)-t,a=Math.max(this.ymax,e.ymax)-r,n=t+i/2,s=r+a/2;this.width=i,this.height=a,this.halfWidth=i/2,this.halfHeight=a/2,this.x=n,this.y=s}static deserialize(e){var t=e.readF32(),r=e.readF32(),i=e.readInt32(),a=e.readInt32();return new h(t,r,i,a)}}var f=h,d=Math.PI/180;class b{constructor(e,t,r,i){this._rotationT=Object(n.a)(),this._xBounds=0,this._yBounds=0,this.minZoom=0,this.maxZoom=255,this._bounds=null;var a=r.rect,s=new Float32Array(8);e*=i,t*=i;var o=r.code?a.width*i:r.metrics.width,l=r.code?a.height*i:r.metrics.height;s[0]=e,s[1]=t,s[2]=e+o,s[3]=t,s[4]=e,s[5]=t+l,s[6]=e+o,s[7]=t+l,this._data=s,this._setTextureCoords(a),this._scale=i,this._mosaic=r,this.x=e,this.y=t,this.maxOffset=Math.max(e+o,t+l)}get width(){return this._mosaic.metrics.width*this._scale}get mosaic(){return this._mosaic}set angle(e){this._angle=e,Object(a.d)(this._rotationT),Object(a.f)(this._rotationT,this._rotationT,-e),this._setOffsets(this._data)}get angle(){return this._angle}get xTopLeft(){return this._data[0]}get yTopLeft(){return this._data[1]}get xBottomRight(){return this._data[6]}get yBottomRight(){return this._data[7]}get texcoords(){return this._texcoords}get textureBinding(){return this._mosaic.textureBinding}get offsets(){return this._offsets||this._setOffsets(this._data),this._offsets}get char(){return String.fromCharCode(this._mosaic.code)}get code(){return this._mosaic.code}get bounds(){if(!this._bounds){var{height:e,width:t}=this._mosaic.metrics,r=t*this._scale,i=Math.abs(e)*this._scale,s=new Float32Array(8);s[0]=this.x,s[1]=this.y,s[2]=this.x+r,s[3]=this.y,s[4]=this.x,s[5]=this.y+i,s[6]=this.x+r,s[7]=this.y+i;var o=Object(a.e)(Object(n.a)(),this._rotationT,this._T);Object(n.b)(s,s,o);for(var l=1/0,u=1/0,c=0,h=0,d=0;d<4;d++){var b=s[2*d],p=s[2*d+1];l=Math.min(l,b),u=Math.min(u,p),c=Math.max(c,b),h=Math.max(h,p)}var m=c-l,v=h-u,g=l+m/2,y=u+v/2;this._bounds=new f(g,y,m,v)}return this._bounds}setTransform(e){this._T=e,this._offsets=null}_setOffsets(e){this._offsets||(this._offsets={upperLeft:0,upperRight:0,lowerLeft:0,lowerRight:0});var t=this._offsets,r=new Float32Array(8),i=Object(a.e)(Object(n.a)(),this._rotationT,this._T);Object(n.b)(r,e,i),t.upperLeft=Object(l.a)(8*r[0],8*r[1]),t.upperRight=Object(l.a)(8*r[2],8*r[3]),t.lowerLeft=Object(l.a)(8*r[4],8*r[5]),t.lowerRight=Object(l.a)(8*r[6],8*r[7])}_setTextureCoords({x:e,y:t,width:r,height:i}){this._texcoords={upperLeft:Object(l.a)(e,t),upperRight:Object(l.a)(e+r,t),lowerLeft:Object(l.a)(e,t+i),lowerRight:Object(l.a)(e+r,t+i)}}}var p=(e,t)=>({code:0,page:0,sdf:!0,rect:new u.a(0,0,11,8),textureBinding:t,metrics:{advance:0,height:4,width:e,left:0,top:0}});class m{constructor(e,t,r){for(var i of(this._rotation=0,this._decorate(e,t,r),this.glyphs=e,this.bounds=this._createBounds(e),this.isMultiline=t.length>1,this._hasRotation=0!==r.angle,this._T=this._createGlyphTransform(this.bounds,r),e))i.setTransform(this._T)}setRotation(e){if(0!==e||0!==this._rotation){this._rotation=e;var t=this._T,r=Object(a.b)(Object(n.a)(),e);for(var i of(Object(a.e)(t,r,t),this.glyphs))i.setTransform(this._T)}}_decorate(e,t,r){if(r.decoration&&"none"!==r.decoration&&e.length){var i=r.scale,a="underline"===r.decoration?30:20,n=e[0].textureBinding;for(var s of t){var o=s.startX*i,l=s.startY*i,u=(s.width+s.glyphWidthEnd)*i;e.push(new b(o,l+a*i,p(u,n),1))}}}get boundsT(){var e=this.bounds,t=Object(i.r)(Object(s.a)(),e.x,e.y);if(Object(i.s)(t,t,this._T),this._hasRotation){var r=Math.max(e.width,e.height);return new f(t[0],t[1],r,r)}return new f(t[0],t[1],e.width,e.height)}_createBounds(e){var t=1/0,r=1/0,i=0,a=0;for(var n of e)t=Math.min(t,n.xTopLeft),r=Math.min(r,n.yTopLeft),i=Math.max(i,n.xTopLeft+n.width),a=Math.max(a,n.yBottomRight);var s=i-t,o=a-r;return new f(t+s/2,r+o/2,s,o)}_createGlyphTransform(e,t){var r=d*t.angle,o=Object(n.a)(),l=Object(s.a)();return Object(a.h)(o,o,Object(i.r)(l,t.xOffset,-t.yOffset)),t.isCIM?Object(a.f)(o,o,r):(Object(a.h)(o,o,Object(i.r)(l,e.x,e.y)),Object(a.f)(o,o,r),Object(a.h)(o,o,Object(i.r)(l,-e.x,-e.y))),o}}class v{constructor(e,t,r,i,a,n){this.glyphWidthEnd=0,this.startX=0,this.startY=0,this.start=Math.max(0,Math.min(t,r)),this.end=Math.max(0,Math.max(t,r)),this.end<e.length&&(this.glyphWidthEnd=e[this.end].metrics.width),this.width=i,this.yMin=a,this.yMax=n}}var g=e=>10===e,y=e=>32===e;function O(e,t,r){for(var i=r.scale,a=new Array,n=function(e,t,r){for(var i=new Array,a=1/r.scale,n=r.maxLineWidth*a,s=t?e.length-1:0,o=t?-1:e.length,l=t?-1:1,u=s,c=0,h=0,f=u,d=f,b=0,p=1/0,m=0;u!==o;){var{code:O,metrics:x}=e[u],j=Math.abs(x.top);if(g(O)||y(O)||(p=Math.min(p,j),m=Math.max(m,j+x.height)),g(O))u!==s&&(i.push(new v(e,f,u-l,c,p,m)),p=1/0,m=0),c=0,f=u+l,d=u+l,h=0;else if(y(O))d=u+l,h=0,b=x.advance,c+=x.advance;else if(c>n){if(d!==f){var w=d-2*l;c-=b,i.push(new v(e,f,w,c-h,p,m)),p=1/0,m=0,f=d,c=h}else i.push(new v(e,f,u-l,c,p,m)),p=1/0,m=0,f=u,d=u,c=0;c+=x.advance,h+=x.advance}else c+=x.advance,h+=x.advance;u+=l}var T=new v(e,f,u-l,c,p,m);return T.start>=0&&T.end<e.length&&i.push(T),i}(e,t,r),s=function(e,t){for(var r=0,i=0;i<e.length;i++){var{width:a}=e[i];r=Math.max(a,r)}var n="underline"===t.decoration?4:0,s=e[0].yMin;return{x:0,y:s,height:e[e.length-1].yMax+t.lineHeight*(e.length-1)+n-s,width:r}}(n,r),{vAlign:l,hAlign:u}=r,c=l===o.a.Baseline?1:0,h=c?0:l-1,f=(1-c)*-s.y+h*(s.height/2)+-26*(c?1:0),d=0;d<n.length;d++){var{start:p,end:O,width:x}=n[d],j=-1*(u+1)*(x/2)-3,w=d*r.lineHeight+f-3;n[d].startX=j,n[d].startY=w;for(var T=p;T<=O;T++){var S=e[T];if(!g(S.code)){var _=new b(j+S.metrics.left,w-S.metrics.top,S,i);j+=S.metrics.advance,a.push(_)}}}return new m(a,n,r)}},481:function(e,t,r){"use strict";r.d(t,"a",(function(){return d})),r.d(t,"b",(function(){return i}));var i={Base64:0,Hex:1,String:2,Raw:3};function a(e,t){var r=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(r>>16)<<16|65535&r}function n(e){for(var t=[],r=0,i=8*e.length;r<i;r+=8)t[r>>5]|=(255&e.charCodeAt(r/8))<<r%32;return t}function s(e){for(var t=[],r=0,i=32*e.length;r<i;r+=8)t.push(String.fromCharCode(e[r>>5]>>>r%32&255));return t.join("")}function o(e,t,r,i,n,s){return a(function(e,t){return e<<t|e>>>32-t}(a(a(t,e),a(i,s)),n),r)}function l(e,t,r,i,a,n,s){return o(t&r|~t&i,e,t,a,n,s)}function u(e,t,r,i,a,n,s){return o(t&i|r&~i,e,t,a,n,s)}function c(e,t,r,i,a,n,s){return o(t^r^i,e,t,a,n,s)}function h(e,t,r,i,a,n,s){return o(r^(t|~i),e,t,a,n,s)}function f(e,t){e[t>>5]|=128<<t%32,e[14+(t+64>>>9<<4)]=t;for(var r=1732584193,i=-271733879,n=-1732584194,s=271733878,o=0;o<e.length;o+=16){var f=r,d=i,b=n,p=s;r=l(r,i,n,s,e[o+0],7,-680876936),s=l(s,r,i,n,e[o+1],12,-389564586),n=l(n,s,r,i,e[o+2],17,606105819),i=l(i,n,s,r,e[o+3],22,-1044525330),r=l(r,i,n,s,e[o+4],7,-176418897),s=l(s,r,i,n,e[o+5],12,1200080426),n=l(n,s,r,i,e[o+6],17,-1473231341),i=l(i,n,s,r,e[o+7],22,-45705983),r=l(r,i,n,s,e[o+8],7,1770035416),s=l(s,r,i,n,e[o+9],12,-1958414417),n=l(n,s,r,i,e[o+10],17,-42063),i=l(i,n,s,r,e[o+11],22,-1990404162),r=l(r,i,n,s,e[o+12],7,1804603682),s=l(s,r,i,n,e[o+13],12,-40341101),n=l(n,s,r,i,e[o+14],17,-1502002290),r=u(r,i=l(i,n,s,r,e[o+15],22,1236535329),n,s,e[o+1],5,-165796510),s=u(s,r,i,n,e[o+6],9,-1069501632),n=u(n,s,r,i,e[o+11],14,643717713),i=u(i,n,s,r,e[o+0],20,-373897302),r=u(r,i,n,s,e[o+5],5,-701558691),s=u(s,r,i,n,e[o+10],9,38016083),n=u(n,s,r,i,e[o+15],14,-660478335),i=u(i,n,s,r,e[o+4],20,-405537848),r=u(r,i,n,s,e[o+9],5,568446438),s=u(s,r,i,n,e[o+14],9,-1019803690),n=u(n,s,r,i,e[o+3],14,-187363961),i=u(i,n,s,r,e[o+8],20,1163531501),r=u(r,i,n,s,e[o+13],5,-1444681467),s=u(s,r,i,n,e[o+2],9,-51403784),n=u(n,s,r,i,e[o+7],14,1735328473),r=c(r,i=u(i,n,s,r,e[o+12],20,-1926607734),n,s,e[o+5],4,-378558),s=c(s,r,i,n,e[o+8],11,-2022574463),n=c(n,s,r,i,e[o+11],16,1839030562),i=c(i,n,s,r,e[o+14],23,-35309556),r=c(r,i,n,s,e[o+1],4,-1530992060),s=c(s,r,i,n,e[o+4],11,1272893353),n=c(n,s,r,i,e[o+7],16,-155497632),i=c(i,n,s,r,e[o+10],23,-1094730640),r=c(r,i,n,s,e[o+13],4,681279174),s=c(s,r,i,n,e[o+0],11,-358537222),n=c(n,s,r,i,e[o+3],16,-722521979),i=c(i,n,s,r,e[o+6],23,76029189),r=c(r,i,n,s,e[o+9],4,-640364487),s=c(s,r,i,n,e[o+12],11,-421815835),n=c(n,s,r,i,e[o+15],16,530742520),r=h(r,i=c(i,n,s,r,e[o+2],23,-995338651),n,s,e[o+0],6,-198630844),s=h(s,r,i,n,e[o+7],10,1126891415),n=h(n,s,r,i,e[o+14],15,-1416354905),i=h(i,n,s,r,e[o+5],21,-57434055),r=h(r,i,n,s,e[o+12],6,1700485571),s=h(s,r,i,n,e[o+3],10,-1894986606),n=h(n,s,r,i,e[o+10],15,-1051523),i=h(i,n,s,r,e[o+1],21,-2054922799),r=h(r,i,n,s,e[o+8],6,1873313359),s=h(s,r,i,n,e[o+15],10,-30611744),n=h(n,s,r,i,e[o+6],15,-1560198380),i=h(i,n,s,r,e[o+13],21,1309151649),r=h(r,i,n,s,e[o+4],6,-145523070),s=h(s,r,i,n,e[o+11],10,-1120210379),n=h(n,s,r,i,e[o+2],15,718787259),i=h(i,n,s,r,e[o+9],21,-343485551),r=a(r,f),i=a(i,d),n=a(n,b),s=a(s,p)}return[r,i,n,s]}function d(e,t=i.Hex){var r=t||i.Base64,a=f(n(e),8*e.length);switch(r){case i.Raw:return a;case i.Hex:return function(e){for(var t="0123456789abcdef",r=[],i=0,a=4*e.length;i<a;i++)r.push(t.charAt(e[i>>2]>>i%4*8+4&15)+t.charAt(e[i>>2]>>i%4*8&15));return r.join("")}(a);case i.String:return s(a);case i.Base64:return function(e){for(var t=[],r=0,i=4*e.length;r<i;r+=3)for(var a=(e[r>>2]>>r%4*8&255)<<16|(e[r+1>>2]>>(r+1)%4*8&255)<<8|e[r+2>>2]>>(r+2)%4*8&255,n=0;n<4;n++)8*r+6*n>32*e.length?t.push("="):t.push("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(a>>6*(3-n)&63));return t.join("")}(a)}}},494:function(e,t,r){"use strict";r.d(t,"a",(function(){return a}));var i=new(r(95).a)({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryMultiPatch:"multipatch",mesh:"mesh"});function a(e){return i.toJSON(e)}},507:function(e,t,r){"use strict";r.d(t,"a",(function(){return d})),r.d(t,"b",(function(){return h}));var i=r(91),a=r(7),n=r(105),s=r(122),o=r(350),l=r(352),u=r(337),c={"simple-marker":1,"picture-marker":1,text:0,"simple-line":0,"simple-fill":0,"picture-fill":0,cim:1,"web-style":1};function h(e){if(!("visualVariables"in e))return 0;if(!e.hasVisualVariables("size"))return 0;var t=e.getVisualVariablesForType("size");if(!t[0])return 0;var r=t[0];if("stops"===r.transformationType)return r.stops.map((e=>e.size)).reduce(S,0);if("clamped-linear"===r.transformationType){var i,a;return i="number"==typeof r.maxSize?r.maxSize:r.maxSize.stops.map((e=>e.size)).reduce(S,0),a="number"==typeof r.minSize?r.minSize:r.minSize.stops.map((e=>e.size)).reduce(S,0),Math.max(i,a)}return"real-world-size"===r.transformationType?30:void 0}function f(e){return e.type in c}function d(e,t,r){return b.apply(this,arguments)}function b(){return(b=Object(a.a)((function*(e,t,r){if(!e||r&&"cluster"===r.type)return 0;if("heatmap"===e.type)return Math.round(3*e.blurRadius);if("dot-density"===e.type)return 0;if("dictionary"===e.type)return"esriGeometryPoint"===t||"esriGeometryMultipoint"===t?100:200;var i=e.getSymbols(),a=h(e),s=[];for(var o of i)s.push(j(o,a));var l=yield Promise.all(s);return Object(n.h)(l.reduce(S,0))}))).apply(this,arguments)}var p=[0,0,0,0];function m(e,t){return null==e?t:e}function v(e,t){return null==e.outline?t:m(e.outline.width,t)}var g={sdf:!0,code:99,metrics:s.c.metrics,rect:new o.a(0,0,24,24),page:0,textureBinding:2};function y(e){var t=e.text&&e.text.length;if(!t)return{glyphMosaicItems:[g]};for(var r=[],a=0;a<t;a++)r.push(Object(i.a)(Object(i.a)({},g),{},{code:e.text.charCodeAt(a)}));return{glyphMosaicItems:r}}function O(e,t){return x.apply(this,arguments)}function x(){return(x=Object(a.a)((function*(e,t){if("simple-marker"===e.type){var r=Math.max(m(e.size,12),t);return T(e)+.707*r}if("picture-marker"===e.type){var i=Math.max(m(e.height,12),t),a=m(e.width,12)*(i/m(e.height,12))/2,n=i/2;return T(e)+Math.sqrt(a*a+n*n)}if("text"===e.type){var s=y(e);Object(u.g)(p,e.toJSON(),s);var o=Math.abs(p[0]),c=Math.abs(p[1]),h=p[2],f=p[3];return Math.max(o,c)+Math.max(h,f)}if("simple-line"===e.type){var d=e,b=Math.max(m(d.width,.75),t)/2;return d.marker?Math.max(6*d.width,2*t):b}if("simple-fill"===e.type||"picture-fill"===e.type)return Math.max(v(e,0),t)/2;if("cim"===e.type){var g=l.a.getEnvelope(e.data);return g?Math.sqrt(g.width*g.width+g.height*g.height):0}return"web-style"===e.type?O(yield e.fetchCIMSymbol(),t):0}))).apply(this,arguments)}function j(e,t){return w.apply(this,arguments)}function w(){return(w=Object(a.a)((function*(e,t){return f(e)?Math.min(yield O(e,t),75):0}))).apply(this,arguments)}function T(e){var t=m(e.xoffset,0),r=m(e.yoffset,0);return Math.sqrt(t*t+r*r)}function S(e,t){return Math.max(e,t)}},511:function(e,t,r){"use strict";r.d(t,"a",(function(){return T})),r.d(t,"b",(function(){return x})),r.d(t,"c",(function(){return j})),r.d(t,"d",(function(){return S}));var i,a=r(91),n=r(80),s=r(89),o=r(81),l=r(93),u=r(660),c=r(458),h=r(481),f=r(82),d=r(92),b=(r(88),r(85)),p=r(84),m=r(96),v=(r(83),r(86),r(87),r(233)),g=i=class extends c.a{writeLevels(e,t,r){for(var i in e){var a=this.levels[i];return void(t.stops=a)}}clone(){return new i({axis:this.axis,field:this.field,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,maxDataValue:this.maxDataValue,maxSize:Object(v.c)(this.maxSize)?this.maxSize.clone():this.maxSize,minDataValue:this.minDataValue,minSize:Object(v.c)(this.minSize)?this.minSize.clone():this.minSize,normalizationField:this.normalizationField,stops:this.stops&&this.stops.map((e=>e.clone())),target:this.target,useSymbolValue:this.useSymbolValue,valueRepresentation:this.valueRepresentation,valueUnit:this.valueUnit,legendOptions:this.legendOptions&&this.legendOptions.clone(),levels:Object(d.a)(this.levels)})}};Object(f.a)([Object(b.b)()],g.prototype,"levels",void 0),Object(f.a)([Object(m.a)("levels")],g.prototype,"writeLevels",null),g=i=Object(f.a)([Object(p.a)("esri.views.2d.engine.LevelDependentSizeVariable")],g);var y=o.a.getLogger("esri.views.2d.layers.support.clusterUtils");n.a.add("esri-cluster-arcade-enabled",1);var O=Object(n.a)("esri-cluster-arcade-enabled"),x=(e,t,r,i)=>{var a=t.clone();if(!S(a))return a;if(r.fields)for(var n of r.fields)_(e,n);if("visualVariables"in a){var o=(a.visualVariables||[]).filter((e=>"$view.scale"!==e.valueExpression)),l=j(o);o.forEach((t=>{"rotation"===t.type?t.field?t.field=M(e,t.field,"avg_angle"):t.valueExpression&&(t.field=L(e,t.valueExpression,"avg_angle"),t.valueExpression=null):t.normalizationField?(t.field=M(e,t.field,"norm",t.normalizationField),t.normalizationField=null):t.field?t.field=M(e,t.field,"avg"):(t.field=L(e,t.valueExpression,"avg"),t.valueExpression=null)})),Object(s.j)(l)&&!w(o)&&(o.push(T(r,i)),a.dynamicClusterSize=!0),a.visualVariables=o}switch(a.type){case"simple":break;case"unique-value":a.field?a.field=M(e,a.field,"mode"):a.valueExpression&&(a.field=L(e,a.valueExpression,"mode"),a.valueExpression=null);break;case"class-breaks":a.normalizationField?(a.field=M(e,a.field,"norm",a.normalizationField),a.normalizationField=null):a.field?a.field=M(e,a.field,"avg"):(a.field=L(e,a.valueExpression,"avg"),a.valueExpression=null)}return a},j=e=>{for(var t of e)if("size"===t.type)return t;return null},w=e=>{for(var t of e)if("cluster_count"===t.field)return!0;return!1},T=(e,t)=>{var r=[new u.a({value:0,size:0}),new u.a({value:1})];if(Object(s.j)(t))return new c.a({field:"cluster_count",stops:[...r,new u.a({value:2,size:0})]});var i=Object.keys(t).reduce(((i,n)=>Object(a.a)(Object(a.a)({},i),{},{[n]:[...r,new u.a({value:Math.max(2,t[n].minValue),size:e.clusterMinSize}),new u.a({value:Math.max(3,t[n].maxValue),size:e.clusterMaxSize})]})),{});return new g({field:"cluster_count",levels:i})},S=e=>{var t=t=>y.error(new l.a("Unsupported-renderer",t,{renderer:e}));if("unique-value"===e.type){if(e.field2||e.field3)return t("FeatureReductionCluster does not support multi-field UniqueValueRenderers"),!1}else if("class-breaks"===e.type){if(e.normalizationField){var r=e.normalizationType;if("field"!==r)return t("FeatureReductionCluster does not support a normalizationType of ".concat(r)),!1}}else if("simple"!==e.type)return t("FeatureReductionCluster does not support renderers of type ".concat(e.type)),!1;if(!O){if("valueExpression"in e&&e.valueExpression)return t("FeatureReductionCluster does not currently support renderer.valueExpression. Support will be added in a future release"),!1;if(("visualVariables"in e&&e.visualVariables||[]).some((e=>!(!("valueExpression"in e)||!e.valueExpression))))return t("FeatureReductionCluster does not currently support visualVariables with a valueExpression. Support will be added in a future release"),!1}return!0};function _(e,t){var{name:r,outStatistic:i}=t,{onStatisticField:a,onStatisticValueExpression:n,statisticType:s}=i;if(n){var o=Object(h.a)(n.toLowerCase());e.push({name:r,outStatistic:{onStatisticField:o,onStatisticValueExpression:n,statisticType:s}})}else a?e.push({name:r,outStatistic:{onStatisticField:a,statisticType:s}}):y.error(new l.a("mapview-unsupported-field","Unable to handle field",{field:t}))}function L(e,t,r){var i=Object(h.a)(t),a="mode"===r?"cluster_type_".concat(i):"cluster_avg_".concat(i);return e.some((e=>e.name===a))||e.push({name:a,outStatistic:{onStatisticField:i,onStatisticValueExpression:t,statisticType:r}}),a}function M(e,t,r,i){if("cluster_count"===t||e.some((e=>e.name===t)))return t;var a=function(e,t,r){switch(e){case"avg":case"avg_angle":return"cluster_avg_".concat(t);case"mode":return"cluster_type_".concat(t);case"norm":var i=r,a=t.toLowerCase()+",norm:field,"+i.toLowerCase();return"cluster_avg_"+Object(h.a)(a)}}(r,t,i);return e.some((e=>e.name===a))||("norm"===r?e.push({name:a,outStatistic:{onStatisticField:t,onStatisticNormalizationField:i,statisticType:r}}):e.push({name:a,outStatistic:{onStatisticField:t,statisticType:r}})),a}},524:function(e,t,r){"use strict";var i=[["(",")"],[")","("],["<",">"],[">","<"],["[","]"],["]","["],["{","}"],["}","{"],["\xab","\xbb"],["\xbb","\xab"],["\u2039","\u203a"],["\u203a","\u2039"],["\u207d","\u207e"],["\u207e","\u207d"],["\u208d","\u208e"],["\u208e","\u208d"],["\u2264","\u2265"],["\u2265","\u2264"],["\u2329","\u232a"],["\u232a","\u2329"],["\ufe59","\ufe5a"],["\ufe5a","\ufe59"],["\ufe5b","\ufe5c"],["\ufe5c","\ufe5b"],["\ufe5d","\ufe5e"],["\ufe5e","\ufe5d"],["\ufe64","\ufe65"],["\ufe65","\ufe64"]],a=["\u0622","\u0623","\u0625","\u0627"],n=["\ufef5","\ufef7","\ufef9","\ufefb"],s=["\ufef6","\ufef8","\ufefa","\ufefc"],o=["\u0627","\u0628","\u062a","\u062b","\u062c","\u062d","\u062e","\u062f","\u0630","\u0631","\u0632","\u0633","\u0634","\u0635","\u0636","\u0637","\u0638","\u0639","\u063a","\u0641","\u0642","\u0643","\u0644","\u0645","\u0646","\u0647","\u0648","\u064a","\u0625","\u0623","\u0622","\u0629","\u0649","\u0644","\u0645","\u0646","\u0647","\u0648","\u064a","\u0625","\u0623","\u0622","\u0629","\u0649","\u06cc","\u0626","\u0624"],l=["\ufe8d","\ufe8f","\ufe95","\ufe99","\ufe9d","\ufea1","\ufea5","\ufea9","\ufeab","\ufead","\ufeaf","\ufeb1","\ufeb5","\ufeb9","\ufebd","\ufec1","\ufec5","\ufec9","\ufecd","\ufed1","\ufed5","\ufed9","\ufedd","\ufee1","\ufee5","\ufee9","\ufeed","\ufef1","\ufe87","\ufe83","\ufe81","\ufe93","\ufeef","\ufbfc","\ufe89","\ufe85","\ufe70","\ufe72","\ufe74","\ufe76","\ufe78","\ufe7a","\ufe7c","\ufe7e","\ufe80","\ufe89","\ufe85"],u=["\ufe8e","\ufe90","\ufe96","\ufe9a","\ufe9e","\ufea2","\ufea6","\ufeaa","\ufeac","\ufeae","\ufeb0","\ufeb2","\ufeb6","\ufeba","\ufebe","\ufec2","\ufec6","\ufeca","\ufece","\ufed2","\ufed6","\ufeda","\ufede","\ufee2","\ufee6","\ufeea","\ufeee","\ufef2","\ufe88","\ufe84","\ufe82","\ufe94","\ufef0","\ufbfd","\ufe8a","\ufe86","\ufe70","\ufe72","\ufe74","\ufe76","\ufe78","\ufe7a","\ufe7c","\ufe7e","\ufe80","\ufe8a","\ufe86"],c=["\ufe8e","\ufe92","\ufe98","\ufe9c","\ufea0","\ufea4","\ufea8","\ufeaa","\ufeac","\ufeae","\ufeb0","\ufeb4","\ufeb8","\ufebc","\ufec0","\ufec4","\ufec8","\ufecc","\ufed0","\ufed4","\ufed8","\ufedc","\ufee0","\ufee4","\ufee8","\ufeec","\ufeee","\ufef4","\ufe88","\ufe84","\ufe82","\ufe94","\ufef0","\ufbff","\ufe8c","\ufe86","\ufe71","\ufe72","\ufe74","\ufe77","\ufe79","\ufe7b","\ufe7d","\ufe7f","\ufe80","\ufe8c","\ufe86"],h=["\ufe8d","\ufe91","\ufe97","\ufe9b","\ufe9f","\ufea3","\ufea7","\ufea9","\ufeab","\ufead","\ufeaf","\ufeb3","\ufeb7","\ufebb","\ufebf","\ufec3","\ufec7","\ufecb","\ufecf","\ufed3","\ufed7","\ufedb","\ufedf","\ufee3","\ufee7","\ufeeb","\ufeed","\ufef3","\ufe87","\ufe83","\ufe81","\ufe93","\ufeef","\ufbfe","\ufe8b","\ufe85","\ufe70","\ufe72","\ufe74","\ufe76","\ufe78","\ufe7a","\ufe7c","\ufe7e","\ufe80","\ufe8b","\ufe85"],f=["\u0621","\u0622","\u0623","\u0624","\u0625","\u0627","\u0629","\u062f","\u0630","\u0631","\u0632","\u0648","\u0649"],d=["\u064b","\u064b","\u064c","\u061f","\u064d","\u061f","\u064e","\u064e","\u064f","\u064f","\u0650","\u0650","\u0651","\u0651","\u0652","\u0652","\u0621","\u0622","\u0622","\u0623","\u0623","\u0624","\u0624","\u0625","\u0625","\u0626","\u0626","\u0626","\u0626","\u0627","\u0627","\u0628","\u0628","\u0628","\u0628","\u0629","\u0629","\u062a","\u062a","\u062a","\u062a","\u062b","\u062b","\u062b","\u062b","\u062c","\u062c","\u062c","\u062c","\u062d","\u062d","\u062d","\u062d","\u062e","\u062e","\u062e","\u062e","\u062f","\u062f","\u0630","\u0630","\u0631","\u0631","\u0632","\u0632","\u0633","\u0633","\u0633","\u0633","\u0634","\u0634","\u0634","\u0634","\u0635","\u0635","\u0635","\u0635","\u0636","\u0636","\u0636","\u0636","\u0637","\u0637","\u0637","\u0637","\u0638","\u0638","\u0638","\u0638","\u0639","\u0639","\u0639","\u0639","\u063a","\u063a","\u063a","\u063a","\u0641","\u0641","\u0641","\u0641","\u0642","\u0642","\u0642","\u0642","\u0643","\u0643","\u0643","\u0643","\u0644","\u0644","\u0644","\u0644","\u0645","\u0645","\u0645","\u0645","\u0646","\u0646","\u0646","\u0646","\u0647","\u0647","\u0647","\u0647","\u0648","\u0648","\u0649","\u0649","\u064a","\u064a","\u064a","\u064a","\ufef5","\ufef6","\ufef7","\ufef8","\ufef9","\ufefa","\ufefb","\ufefc","\u061f","\u061f","\u061f"],b=["\u0621","\u0641"],p=["\u063a","\u064a"],m=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],v=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],g=10,y=11,O=12,x=18,j=["UBAT_L","UBAT_R","UBAT_EN","UBAT_AN","UBAT_ON","UBAT_B","UBAT_S","UBAT_AL","UBAT_WS","UBAT_CS","UBAT_ES","UBAT_ET","UBAT_NSM","UBAT_LRE","UBAT_RLE","UBAT_PDF","UBAT_LRO","UBAT_RLO","UBAT_BN"],w=100,T=[100,0,0,0,0,101,102,103,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,104,4,4,4,0,4,0,4,0,4,4,4,0,0,4,4,0,0,0,0,0,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,0,0,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,0,0,4,4,0,0,4,4,0,0,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,0,0,0,105,7,7,106,107],S=[[x,x,x,x,x,x,x,x,x,6,5,6,8,5,x,x,x,x,x,x,x,x,x,x,x,x,x,x,5,5,5,6,8,4,4,y,y,y,4,4,4,4,4,g,9,g,9,9,2,2,2,2,2,2,2,2,2,2,9,4,4,4,4,4,4,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4,4,4,4,4,4,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4,4,4,4,x,x,x,x,x,x,5,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,9,4,y,y,y,y,4,4,4,4,0,4,4,x,4,4,y,y,2,2,4,0,4,4,4,2,0,4,4,4,4,4,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4,4,4,4,4,4,4,4,4,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4,4,0,0,0,0,0,0,0,4,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4,0,4,4,4,4,4,4,4,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,1,O,1,O,O,1,O,O,1,O,4,4,4,4,4,4,4,4,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,4,4,4,4,4,1,1,1,1,1,4,4,4,4,4,4,4,4,4,4,4],[3,3,3,3,4,4,4,4,7,y,y,7,9,7,4,4,O,O,O,O,O,O,O,O,O,O,O,7,4,4,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,3,3,3,3,3,3,3,3,3,3,y,3,3,7,7,7,O,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,O,O,O,O,O,O,O,3,4,O,O,O,O,O,O,7,7,O,O,4,O,O,O,O,7,7,2,2,2,2,2,2,2,2,2,2,7,7,7,7,7,7],[7,7,7,7,7,7,7,7,7,7,7,7,7,7,4,7,7,O,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,4,4,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,O,O,O,O,O,O,O,O,O,O,O,7,4,4,4,4,4,4,4,4,4,4,4,4,4,4,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,O,O,O,O,O,O,O,O,O,1,1,4,4,4,4,1,4,4,4,4,4],[8,8,8,8,8,8,8,8,8,8,8,x,x,x,0,1,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,8,5,13,14,15,16,17,9,y,y,y,y,y,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,9,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,8,x,x,x,x,x,4,4,4,4,4,x,x,x,x,x,x,2,0,4,4,2,2,2,2,2,2,g,g,4,4,4,0,2,2,2,2,2,2,2,2,2,2,g,g,4,4,4,4,0,0,0,0,0,0,0,0,0,0,0,0,0,4,4,4,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4],[0,0,0,0,0,0,0,4,4,4,4,4,4,4,4,4,4,4,4,0,0,0,0,0,4,4,4,4,4,1,O,1,1,1,1,1,1,1,1,1,1,g,1,1,1,1,1,1,1,1,1,1,1,1,1,4,1,1,1,1,1,4,1,4,1,1,4,1,1,4,1,1,1,1,1,1,1,1,1,1,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7],[O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,O,O,O,O,O,O,O,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,9,4,9,4,4,9,4,4,4,4,4,4,4,4,4,y,4,4,g,g,4,4,4,4,4,y,y,4,4,4,4,4,7,7,7,7,7,4,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,4,4,x],[4,4,4,y,y,y,4,4,4,4,4,g,9,g,9,9,2,2,2,2,2,2,2,2,2,2,9,4,4,4,4,4,4,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4,4,4,4,4,4,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4,4,4,4,4,4,4,4,4,4,4,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4,4,4,0,0,0,0,0,0,4,4,0,0,0,0,0,0,4,4,0,0,0,0,0,0,4,4,0,0,0,4,4,4,y,y,4,4,4,y,y,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4]];function _(e,t,r,i,a){var n=function(e,t,r){if(void 0===t.inFormat&&(t.inFormat=r.defInFormat),void 0===t.outFormat&&(t.outFormat=r.defOutFormat),void 0===t.swap&&(t.swap=r.defSwap),t.inFormat===t.outFormat)return t;var i,a=t.inFormat.substring(0,1),n=t.outFormat.substring(0,1),s=t.inFormat.substring(1,4),o=t.outFormat.substring(1,4);return"C"===s.charAt(0)&&(i=L(e),s="ltr"===i||"rtl"===i?i.toUpperCase():"L"===t.inFormat.charAt(2)?"LTR":"RTL",t.inFormat=a+s),"C"===o.charAt(0)&&("rtl"===(i=L(e))?o="RTL":"ltr"===i?(i=function(e){var t=e.split("");return t.reverse(),L(t.join(""))}(e),o=i.toUpperCase()):o="L"===t.outFormat.charAt(2)?"LTR":"RTL",t.outFormat=n+o),t}(e,{inFormat:t,outFormat:r,swap:i},a);if(n.inFormat===n.outFormat)return e;t=n.inFormat,r=n.outFormat,i=n.swap;var s=t.substring(0,1),o=t.substring(1,4),l=r.substring(0,1),u=r.substring(1,4);if(a.inFormat=t,a.outFormat=r,a.swap=i,"L"===s&&"VLTR"===r){if("LTR"===o)return a.dir=Q,M(e,a);if("RTL"===o)return a.dir=ee,M(e,a)}if("V"===s&&"V"===l)return a.dir="RTL"===o?ee:Q,R(e,a);if("L"===s&&"VRTL"===r)return"LTR"===o?(a.dir=Q,e=M(e,a)):(a.dir=ee,e=M(e,a)),R(e);if("VLTR"===t&&"LLTR"===r)return a.dir=Q,M(e,a);if("V"===s&&"L"===l&&o!==u)return e=R(e),"RTL"===o?_(e,"LLTR","VLTR",i,a):_(e,"LRTL","VRTL",i,a);if("VRTL"===t&&"LRTL"===r)return _(e,"LRTL","VRTL",i,a);if("L"===s&&"L"===l){var c=a.swap;return a.swap=c.substr(0,1)+"N","RTL"===o?(a.dir=ee,e=M(e,a),a.swap="N"+c.substr(1,2),a.dir=Q,e=M(e,a)):(a.dir=Q,e=M(e,a),a.swap="N"+c.substr(1,2),e=_(e,"VLTR","LRTL",a.swap,a)),e}return e}function L(e){var t=/[A-Za-z\u05d0-\u065f\u066a-\u06ef\u06fa-\u07ff\ufb1d-\ufdff\ufe70-\ufefc]/.exec(e);return t?t[0]<="z"?"ltr":"rtl":""}function M(e,t){var r=e.split(""),i=[];return F(r,i,t),function(e,t,r){if(0!==r.hiLevel&&r.swap.substr(0,1)!==r.swap.substr(1,2))for(var i=0;i<e.length;i++)1===t[i]&&(e[i]=N(e[i]))}(r,i,t),C(2,r,i,t),C(1,r,i,t),Y=i,r.join("")}function F(e,t,r){var i=e.length,a=r.dir?v:m,n=0,s=-1,o=[],l=[];r.hiLevel=r.dir,r.lastArabic=!1,r.hasUbatAl=!1,r.hasUbatB=!1,r.hasUbatS=!1;for(var u=0;u<i;u++)o[u]=A(e[u]);for(var c=0;c<i;c++){var h=n,f=I(e,o,l,c,r);l[c]=f;var d=240&(n=a[h][f]),b=a[n&=15][Z];if(t[c]=b,d>0)if(16===d){for(var p=s;p<c;p++)t[p]=1;s=-1}else s=-1;if(a[n][$])-1===s&&(s=c);else if(s>-1){for(var g=s;g<c;g++)t[g]=b;s=-1}5===o[c]&&(t[c]=0),r.hiLevel|=b}r.hasUbatS&&function(e,t,r,i){for(var a=0;a<r;a++)if(6===e[a]){t[a]=i.dir;for(var n=a-1;n>=0&&8===e[n];n--)t[n]=i.dir}}(o,t,i,r)}function A(e){var t=e.charCodeAt(0),r=T[t>>8];return r<w?r:S[r-w][255&t]}function R(e,t){var r=e.split("");if(t){var i=[];F(r,i,t),Y=i}return r.reverse(),G.reverse(),r.join("")}function B(e,t,r){for(var i=0;i<t;i++)if(e[i]===r)return i;return-1}function z(e){for(var t=0;t<b.length;t++)if(e>=b[t]&&e<=p[t])return!0;return!1}function E(e,t,r,i){for(;t*r<i&&W(e[t]);)t+=r;return!!(t*r<i&&z(e[t]))}function V(e,t,r,i){for(;t*r<i&&W(e[t]);)t+=r;var n;if(!(t*r<i))return!1;n=e[t];for(var s=0;s<a.length;s++)if(a[s]===n)return!0;return!1}function C(e,t,r,i){if(!(i.hiLevel<e)){if(1===e&&i.dir===ee&&!i.hasUbatB)return t.reverse(),void G.reverse();for(var a,n,s,o,l,u=t.length,c=0;c<u;){if(r[c]>=e){for(a=c+1;a<u&&r[a]>=e;)a++;for(n=c,s=a-1;n<s;n++,s--)o=t[n],t[n]=t[s],t[s]=o,l=G[n],G[n]=G[s],G[s]=l;c=a}c++}}}function I(e,t,r,i,a){var n=t[i];return{UBAT_L:()=>(a.lastArabic=!1,0),UBAT_R:()=>(a.lastArabic=!1,1),UBAT_ON:()=>4,UBAT_AN:()=>3,UBAT_EN:()=>a.lastArabic?3:2,UBAT_AL:()=>(a.lastArabic=!0,a.hasUbatAl=!0,1),UBAT_WS:()=>4,UBAT_CS:()=>{var e,n;return i<1||i+1>=t.length||2!==(e=r[i-1])&&3!==e||2!==(n=t[i+1])&&3!==n?4:(a.lastArabic&&(n=3),n===e?n:4)},UBAT_ES:()=>2===(i>0?r[i-1]:5)&&i+1<t.length&&2===t[i+1]?2:4,UBAT_ET:()=>{if(i>0&&2===r[i-1])return 2;if(a.lastArabic)return 4;for(var e=i+1,n=t.length;e<n&&t[e]===y;)e++;return e<n&&2===t[e]?2:4},UBAT_NSM:()=>{if("VLTR"===a.inFormat){for(var n=t.length,s=i+1;s<n&&t[s]===O;)s++;if(s<n){var o=e[i].charCodeAt[0],l=o>=1425&&o<=2303||64286===o,u=t[s];if(l&&(1===u||7===u))return 1}}return i<1||5===t[i-1]?4:r[i-1]},UBAT_B:()=>(a.lastArabic=!0,a.hasUbatB=!0,a.dir),UBAT_S:()=>(a.hasUbatS=!0,4),UBAT_LRE:()=>(a.lastArabic=!1,4),UBAT_RLE:()=>(a.lastArabic=!1,4),UBAT_LRO:()=>(a.lastArabic=!1,4),UBAT_RLO:()=>(a.lastArabic=!1,4),UBAT_PDF:()=>(a.lastArabic=!1,4),UBAT_BN:()=>4}[j[n]]()}function N(e){for(var t,r=0,a=i.length-1;r<=a;)if(t=Math.floor((r+a)/2),e<i[t][0])a=t-1;else{if(!(e>i[t][0]))return i[t][1];r=t+1}return e}function U(e){for(var t=0;t<f.length;t++)if(f[t]===e)return!0;return!1}function k(e){for(var t=0;t<o.length;t++)if(e===o[t])return c[t];return e}function P(e,t){for(var r=0;r<o.length;r++)if(e===o[r])return t[r];return e}function W(e){return e>="\u064b"&&e<="\u0655"}function D(e){return"L"===e?"LTR":"R"===e?"RTL":"C"===e?"CLR":"D"===e?"CRL":""}function H(e,t,r,i){for(;t*r<i&&W(e[t]);)t+=r;return t*r<i&&(e[t]=" ",!0)}function J(e,t){for(var r=0;r<a.length;r++)if(e===a[r])return t[r];return e}function q(e,t,r,i){for(var a=0;a<e.length;a++)(e[a]>t||!r&&e[a]===t)&&(e[a]+=i)}var G=[],K=[],Y=[],X={dir:0,defInFormat:"LLTR",defoutFormat:"VLTR",defSwap:"YN",inFormat:"LLTR",outFormat:"VLTR",swap:"YN",hiLevel:0,lastArabic:!1,hasUbatAl:!1,hasBlockSep:!1,hasSegSep:!1,defOutFormat:""},Z=5,$=6,Q=0,ee=1,te=/^[(I|V)][(L|R|C|D)][(Y|N)][(S|N)][N]$/,re=/[\u0591-\u06ff\ufb1d-\ufefc]/;t.a=class{constructor(){this.inputFormat="ILYNN",this.outputFormat="VLNNN",this.sourceToTarget=[],this.targetToSource=[],this.levels=[]}bidiTransform(e,t,r){if(this.sourceToTarget=[],this.targetToSource=[],!e)return"";if(function(e,t,r){G=[],Y=[];for(var i=0;i<r;i++)e[i]=i,t[i]=i,G[i]=i}(this.sourceToTarget,this.targetToSource,e.length),!this.checkParameters(t,r))return e;t=this.inputFormat,r=this.outputFormat;var i,o=X,c=D(t.charAt(1)),f=D(r.charAt(1)),b=("I"===t.charAt(0)?"L":t.charAt(0))+c,p=("I"===r.charAt(0)?"L":r.charAt(0))+f,m=t.charAt(2)+r.charAt(2);o.defInFormat=b,o.defOutFormat=p,o.defSwap=m;var v=_(e,b,p,m,o),g=!1;return"R"===r.charAt(1)?g=!0:"C"!==r.charAt(1)&&"D"!==r.charAt(1)||(g="rtl"===this.checkContextual(v)),this.sourceToTarget=G,this.targetToSource=function(e){for(var t=new Array(e.length),r=0;r<e.length;r++)t[e[r]]=r;return t}(this.sourceToTarget),K=this.targetToSource,i=t.charAt(3)===r.charAt(3)?v:"S"===r.charAt(3)?function(e,t,r){if(0===t.length)return"";void 0===e&&(e=!0),void 0===r&&(r=!0);var i=(t=String(t)).split(""),a=0,o=1,c=i.length;e||(a=i.length-1,o=-1,c=1);for(var f=function(e,t,r,i,a){for(var o=0,c=[],f=0,d=t;d*r<i;d+=r)if(z(e[d])||W(e[d])){if("\u0644"===e[d]&&V(e,d+r,r,i)){e[d]=J(e[d+r],0===o?n:s),H(e,d+=r,r,i),a&&(c[f]=d,f++),o=0;continue}var b=e[d];1===o?e[d]=E(e,d+r,r,i)?k(e[d]):P(e[d],u):!0===E(e,d+r,r,i)?e[d]=P(e[d],h):e[d]=P(e[d],l),W(b)||(o=1),!0===U(b)&&(o=0)}else o=0;return c}(i,a,o,c,r),d="",b=0;b<i.length;b++)r&&B(f,f.length,b)>-1?(q(K,b,!e,-1),G.splice(b,1)):d+=i[b];return d}(g,v,!0):function(e,t,r){if(0===e.length)return"";void 0===r&&(r=!0),void 0===t&&(t=!0);for(var i="",n=(e=String(e)).split(""),s=0;s<e.length;s++){var o=!1;if(n[s]>="\ufe70"&&n[s]<"\ufeff"){var l=e.charCodeAt(s);n[s]>="\ufef5"&&n[s]<="\ufefc"?(t?(s>0&&r&&" "===n[s-1]?i=i.substring(0,i.length-1)+"\u0644":(i+="\u0644",o=!0),i+=a[(l-65269)/2]):(i+=a[(l-65269)/2],i+="\u0644",s+1<e.length&&r&&" "===n[s+1]?s++:o=!0),o&&(q(K,s,!0,1),G.splice(s,0,G[s]))):i+=d[l-65136]}else i+=n[s]}return i}(v,g,!0),this.sourceToTarget=G,this.targetToSource=K,this.levels=Y,i}_inputFormatSetter(e){if(!te.test(e))throw new Error("dojox/string/BidiEngine: the bidi layout string is wrong!");this.inputFormat=e}_outputFormatSetter(e){if(!te.test(e))throw new Error("dojox/string/BidiEngine: the bidi layout string is wrong!");this.outputFormat=e}checkParameters(e,t){return e?this._inputFormatSetter(e):e=this.inputFormat,t?this._outputFormatSetter(t):t=this.outputFormat,e!==t}checkContextual(e){var t=L(e);if("ltr"!==t&&"rtl"!==t){try{t=document.dir.toLowerCase()}catch(r){}"ltr"!==t&&"rtl"!==t&&(t="ltr")}return t}hasBidiChar(e){return re.test(e)}}},535:function(e,t,r){"use strict";r.d(t,"a",(function(){return s})),r.d(t,"b",(function(){return o}));var i=r(81),a=r(105),n=i.a.getLogger("esri.renderers.visualVariables.support.utils"),s=e=>{if(!("visualVariables"in e)||!e.visualVariables||!e.visualVariables.length)return e;var t=e.clone(),r=t.visualVariables.map((e=>l(e)?u(e):e));return t.visualVariables=r,t};function o(e){return e.map((e=>l(e)?u(e.clone()):e))}function l(e){return("size"===e.type||"color"===e.type||"opacity"===e.type)&&null!=e.stops}function u(e){return e.stops=function(e,t){return t.length<=8?t:(n.warn("Found ".concat(t.length," Visual Variable stops, but MapView only supports ").concat(8,". Displayed stops will be simplified.")),t.length>16?function(e,t){for(var[r,...i]=t,n=i.pop(),s=i[0].value,o=i[i.length-1].value,l=(o-s)/6,u=[],h=s;h<o;h+=l){for(var f=0;h>=i[f].value;)f++;var d=i[f],b=t[f-1],p=h-b.value,m=d.value===b.value?1:p/(d.value-b.value);if("color"===e){var v=i[f],g=t[f-1],y=v.color.clone();y.r=c(g.color.r,y.r,m),y.g=c(g.color.g,y.g,m),y.b=c(g.color.b,y.b,m),y.a=c(g.color.a,y.a,m),u.push({value:h,color:y,label:v.label})}else if("size"===e){var O=i[f],x=t[f-1],j=Object(a.k)(O.size),w=c(Object(a.k)(x.size),j,m);u.push({value:h,size:w,label:O.label})}else{var T=i[f],S=c(t[f-1].opacity,T.opacity,m);u.push({value:h,opacity:S,label:T.label})}}return[r,...u,n]}(e,t):function(e){for(var[t,...r]=e,i=r.pop();r.length>6;){for(var a=0,n=0,s=1;s<r.length;s++){var o=r[s-1],l=r[s],u=Math.abs(l.value-o.value);u>n&&(n=u,a=s)}r.splice(a,1)}return[t,...r,i]}(t))}(e.type,e.stops),e}function c(e,t,r){return(1-r)*e+r*t}}}]);
//# sourceMappingURL=21.35ab7270.chunk.js.map