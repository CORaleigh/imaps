(this.webpackJsonpimaps=this.webpackJsonpimaps||[]).push([[244],{257:function(e,n,t){"use strict";function r(){return[0,0,0,0]}function o(e){return[e[0],e[1],e[2],e[3]]}function i(e,n,t,r){return[e,n,t,r]}function f(e){const n=[0,0,0,0],t=Math.min(4,e.length);for(let r=0;r<t;++r)n[r]=e[r];return n}function s(e,n){return new Float64Array(e,n,4)}function u(){return[0,0,0,0]}function c(){return i(1,1,1,1)}function a(){return i(1,0,0,0)}function l(){return i(0,1,0,0)}function d(){return i(0,0,1,0)}function b(){return i(0,0,0,1)}t.d(n,"a",(function(){return y})),t.d(n,"b",(function(){return m})),t.d(n,"c",(function(){return s})),t.d(n,"d",(function(){return o})),t.d(n,"e",(function(){return r})),t.d(n,"f",(function(){return f})),t.d(n,"g",(function(){return i}));const m=[0,0,0,0],y=c(),h=a(),p=l(),E=d(),g=b();Object.freeze({__proto__:null,create:r,clone:o,fromValues:i,fromArray:f,createView:s,zeros:u,ones:c,unitX:a,unitY:l,unitZ:d,unitW:b,ZEROS:m,ONES:y,UNIT_X:h,UNIT_Y:p,UNIT_Z:E,UNIT_W:g})},590:function(e,n,t){"use strict";t.r(n),t.d(n,"destroyContext",(function(){return O})),t.d(n,"dracoDecompressPointCloudData",(function(){return E})),t.d(n,"filterObbsForModifications",(function(){return g})),t.d(n,"filterObbsForModificationsSync",(function(){return F})),t.d(n,"initialize",(function(){return M})),t.d(n,"interpretObbModificationResults",(function(){return T})),t.d(n,"process",(function(){return p})),t.d(n,"setLegacySchema",(function(){return _})),t.d(n,"setModifications",(function(){return w})),t.d(n,"setModificationsSync",(function(){return A})),t.d(n,"test",(function(){return N}));var r,o,i,f=t(85),s=t(549);(i=r||(r={}))[i.None=0]="None",i[i.Int16=1]="Int16",i[i.Int32=2]="Int32",function(e){e[e.Replace=0]="Replace",e[e.Outside=1]="Outside",e[e.Inside=2]="Inside",e[e.Finished=3]="Finished"}(o||(o={}));var u=t(157);function c(e){return Object(u.a)(`esri/libs/i3s/${e}`)}let a;var l,d,b,m,y,h;t(257);(h=l||(l={}))[h.Unmodified=0]="Unmodified",h[h.Culled=1]="Culled",h[h.NotChecked=2]="NotChecked",function(e){e[e.Unmodified=0]="Unmodified",e[e.PotentiallyModified=1]="PotentiallyModified",e[e.Culled=2]="Culled",e[e.Unknown=3]="Unknown",e[e.NotChecked=4]="NotChecked"}(d||(d={}));!function(e){e[e.Unknown=0]="Unknown",e[e.Uncached=1]="Uncached",e[e.Cached=2]="Cached"}(b||(b={})),function(e){e[e.None=0]="None",e[e.MaxScreenThreshold=1]="MaxScreenThreshold",e[e.ScreenSpaceRelative=2]="ScreenSpaceRelative",e[e.RemovedFeatureDiameter=3]="RemovedFeatureDiameter",e[e.DistanceRangeFromDefaultCamera=4]="DistanceRangeFromDefaultCamera"}(m||(m={})),function(e){e[e.Hole=0]="Hole",e[e.Leaf=1]="Leaf"}(y||(y={}));async function p(e){await M();const n=[e.geometryBuffer];return{result:L(e,n),transferList:n}}async function E(e){var n;await M();const t=[e.geometryBuffer],{geometryBuffer:r}=e,o=r.byteLength,i=I._malloc(o),f=new Uint8Array(I.HEAPU8.buffer,i,o);f.set(new Uint8Array(r));const u=I.dracoDecompressPointCloudData(i,f.byteLength);if(I._free(i),u.error.length>0)throw`i3s.wasm: ${u.error}`;const c=(null==(n=u.featureIds)?void 0:n.length)>0?Object(s.m)(u.featureIds):null,a=Object(s.m)(u.positions);return c&&t.push(c.buffer),t.push(a.buffer),{result:{positions:a,featureIds:c},transferList:t}}async function g(e){await M(),F(e);const n={buffer:e.buffer};return{result:n,transferList:[n.buffer]}}async function w(e){await M(),A(e)}async function _(e){await M(),I.setLegacySchema(e.context,e.jsonSchema)}function O(e){P(e)}let U,I;function A(e){const n=e.modifications,t=I._malloc(8*n.length),r=new Float64Array(I.HEAPU8.buffer,t,n.length);for(let o=0;o<n.length;++o)r[o]=n[o];I.setModifications(e.context,t,n.length,e.isGeodetic),I._free(t)}function L(e,n){if(!I)return null;const{context:t,localOrigin:o,globalTrafo:i,mbs:u,obb:c,elevationOffset:a,geometryBuffer:l,geometryDescriptor:d,indexToVertexProjector:b,vertexToRenderProjector:m}=e,y=I._malloc(l.byteLength),h=I._malloc(33*Float64Array.BYTES_PER_ELEMENT),p=new Uint8Array(I.HEAPU8.buffer,y,l.byteLength);p.set(new Uint8Array(l));const E=new Float64Array(I.HEAPU8.buffer,h,33);R(E,o);let g=E.byteOffset+3*E.BYTES_PER_ELEMENT,w=new Float64Array(E.buffer,g);R(w,i),g+=16*E.BYTES_PER_ELEMENT,w=new Float64Array(E.buffer,g),R(w,u),g+=4*E.BYTES_PER_ELEMENT,Object(f.k)(c)&&(w=new Float64Array(E.buffer,g),R(w,c.center),g+=3*E.BYTES_PER_ELEMENT,w=new Float64Array(E.buffer,g),R(w,c.halfSize),g+=3*E.BYTES_PER_ELEMENT,w=new Float64Array(E.buffer,g),R(w,c.quaternion));const _=d,O={isDraco:!1,isLegacy:!1,color:e.layouts.some((e=>e.some((e=>"color"===e.name)))),normal:e.needNormals&&e.layouts.some((e=>e.some((e=>"normalCompressed"===e.name)))),uv0:e.layouts.some((e=>e.some((e=>"uv0"===e.name)))),uvRegion:e.layouts.some((e=>e.some((e=>"uvRegion"===e.name)))),featureIndex:_.featureIndex},U=I.process(t,!!e.obb,y,p.byteLength,_,O,h,a,b,m,e.normalReferenceFrame);if(I._free(h),I._free(y),U.error.length>0)throw`i3s.wasm: ${U.error}`;if(U.discarded)return null;const A=U.componentOffsets.length>0?Object(s.m)(U.componentOffsets):null,L=U.featureIds.length>0?Object(s.m)(U.featureIds):null,T=Object(s.m)(U.interleavedVertedData).buffer,F=U.indicesType===r.Int16?Object(s.m)(new Uint16Array(U.indices.buffer,U.indices.byteOffset,U.indices.byteLength/2)):Object(s.m)(new Uint32Array(U.indices.buffer,U.indices.byteOffset,U.indices.byteLength/4)),P=Object(s.m)(U.positions),M=U.positionIndicesType===r.Int16?Object(s.m)(new Uint16Array(U.positionIndices.buffer,U.positionIndices.byteOffset,U.positionIndices.byteLength/2)):Object(s.m)(new Uint32Array(U.positionIndices.buffer,U.positionIndices.byteOffset,U.positionIndices.byteLength/4)),N={layout:e.layouts[0],interleavedVertexData:T,indices:F,hasColors:U.hasColors,hasModifications:U.hasModifications,positionData:{data:P,indices:M}};return L&&n.push(L.buffer),A&&n.push(A.buffer),n.push(T),n.push(F.buffer),n.push(P.buffer),n.push(M.buffer),{componentOffsets:A,featureIds:L,transformedGeometry:N,obb:U.obb}}function T(e){return 0===e?d.Unmodified:1===e?d.PotentiallyModified:2===e?d.Culled:d.Unknown}function F(e){const{context:n,buffer:t}=e,r=I._malloc(t.byteLength),o=t.byteLength/Float64Array.BYTES_PER_ELEMENT,i=new Float64Array(I.HEAPU8.buffer,r,o),f=new Float64Array(t);i.set(f),I.filterOBBs(n,r,o),f.set(i),I._free(r)}function P(e){I&&I.destroy(e)}function R(e,n){for(let t=0;t<n.length;++t)e[t]=n[t]}function M(){return I?Promise.resolve():(U||(U=(a||(a=new Promise((e=>t.e(242).then(t.bind(null,1338)).then((e=>e.i)).then((({default:n})=>{const t=n({locateFile:c,onRuntimeInitialized:()=>e(t)});delete t.then})))).catch((e=>Promise.reject(e)))),a).then((e=>{I=e,U=null}))),U)}const N={transform:L,destroy:P}}}]);
//# sourceMappingURL=244.cfd1d412.chunk.js.map