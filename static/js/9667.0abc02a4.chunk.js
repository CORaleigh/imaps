(globalThis.webpackChunkimaps=globalThis.webpackChunkimaps||[]).push([[9667],{67435:e=>{function t(e){return Promise.resolve().then((()=>{var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}))}t.keys=()=>[],t.resolve=t,t.id=67435,e.exports=t},50482:(e,t,r)=>{"use strict";r.r(t),r.d(t,{Measure:()=>v,default:()=>m});var a=r(72791),n=r(94658),i=r(70412),c=r(52486),u=r(43326),o=r(7882),l=r(78952),s=r(91946),d=r(80184);const v=e=>{const t=(0,a.useRef)(null),r=(0,a.useRef)(null),v=(0,a.useRef)(),m=(0,a.useRef)(),p=(0,a.useRef)(),w=(0,a.useRef)(),[f,g]=(0,a.useState)(),h=t=>{document.querySelectorAll(".measureTools calcite-action").forEach((e=>{e!=t.target&&(e.active=!1)})),v.current&&(v.current.view=e.view,"distance"===t.target.getAttribute("value")&&(t.target.active?(t.target.active=!1,g(void 0),v.current.clear()):(t.target.active=!0,v.current.activeTool="distance",g("measurement"),e.measurementActivated(v.current,m.current)),m.current&&(m.current.viewModel.mode="live")),"area"===t.target.getAttribute("value")&&(t.target.active?(t.target.active=!1,g(void 0),v.current.clear()):(t.target.active=!0,v.current.activeTool="area",g("measurement"),e.measurementActivated(v.current)),m.current&&(m.current.viewModel.mode="live")),"coordinates"===t.target.getAttribute("value")&&(t.target.active?(t.target.active=!1,g(void 0)):(t.target.active=!0,e.measurementActivated(v.current,m.current),g("coordinates"),m.current&&(m.current.mode="capture"))),"clear"===t.target.getAttribute("value")&&(v.current.clear(),m.current&&(m.current.mode="live"),g(void 0)))};return(0,a.useEffect)((()=>{v.current=new n.Z({container:t.current,view:e.view,areaUnit:"imperial",linearUnit:"imperial"}),v.current.viewModel.watch("state",(t=>{"ready"===t&&(document.querySelectorAll("#measureTools calcite-action").forEach((e=>{e.active=!1})),e.measurementActivated(v.current)),"measured"===t&&v.current&&(v.current.view.popup.autoOpenEnabled=!0),"ready"!==t&&"measuring"!==t||!v.current||(v.current.view.popup.autoOpenEnabled=!1)}));const a=new i.Z({container:r.current,view:e.view});a.viewModel.locationSymbol=new s.Z({url:"assets/pin.svg",height:36,width:36}),m.current=a,a.viewModel.watch("mode",(t=>{e.view.popup.autoOpenEnabled="live"===t}));const d=/-?\d+[\.]?\d*/,f=new c.Z({name:"Stateplane Feet",conversionInfo:{spatialReference:new l.Z({wkid:2264}),reverseConvert:function(e){const t=e.split(",");return new o.Z({x:parseFloat(t[0]),y:parseFloat(t[1]),spatialReference:{wkid:2264}})}},coordinateSegments:[{alias:"X",description:"easting",searchPattern:d},{alias:"Y",description:"northing",searchPattern:d}],defaultPattern:"X, Y"});return a.formats.add(f),a.conversions.splice(0,0,new u.Z({format:f})),a.when((()=>{a.formats=a.formats.filter((e=>!["basemap","dd","ddm"].includes(e.name))),a.formats.find((e=>"xy"===e.name)).name="Decimal Degrees"})),requestAnimationFrame((()=>{new MutationObserver((r=>{var a,i;r.length&&(null===(a=document.querySelector(".esri-distance-measurement-2d__clear-button"))||void 0===a||a.addEventListener("click",(()=>{var r,a;(null===(r=v.current)||void 0===r?void 0:r.view).activeTool.attached||(null===(a=v.current)||void 0===a||a.clear(),v.current&&(p.current&&(p.current.active=!0),v.current=new n.Z({container:t.current,view:e.view,areaUnit:"imperial",linearUnit:"imperial"}),v.current.activeTool="distance",g("measurement"),e.measurementActivated(v.current,m.current)))})),null===(i=document.querySelector(".esri-area-measurement-2d__clear-button"))||void 0===i||i.addEventListener("click",(()=>{var r,a;(null===(r=v.current)||void 0===r?void 0:r.view).activeTool.attached||(null===(a=v.current)||void 0===a||a.clear(),v.current&&(w.current&&(w.current.active=!0),v.current=new n.Z({container:t.current,view:e.view,areaUnit:"imperial",linearUnit:"imperial"}),v.current.activeTool="area",g("measurement"),e.measurementActivated(v.current,m.current)))})))})).observe(document.querySelector("#measure"),{attributes:!0,childList:!0})})),()=>{var e;v&&(null===(e=v.current)||void 0===e||e.destroy())}}),[e.view]),(0,d.jsxs)("div",{className:"panel",id:"measurePanel",children:[(0,d.jsxs)("div",{className:"measureTools",children:[(0,d.jsx)("calcite-action",{text:"Distance",appearance:"outline",icon:"measure-line",id:"lineMeasure",value:"distance","text-enabled":!0,onClick:h,ref:p}),(0,d.jsx)("calcite-action",{text:"Area",appearance:"outline",icon:"measure-area",id:"areaMeasure",value:"area","text-enabled":!0,onClick:h,ref:w}),(0,d.jsx)("calcite-action",{text:"Coordinates",appearance:"outline",icon:"pins",id:"coordinates",value:"coordinates","text-enabled":!0,onClick:h}),(0,d.jsx)("calcite-action",{text:"Clear",appearance:"outline",icon:"trash",id:"clearMeasure",value:"clear","text-enabled":!0,onClick:h})]}),(0,d.jsx)("div",{ref:t,hidden:"measurement"!=f}),(0,d.jsx)("div",{ref:r,hidden:"coordinates"!=f})]})},m=v}}]);
//# sourceMappingURL=9667.0abc02a4.chunk.js.map