(this.webpackJsonpimaps=this.webpackJsonpimaps||[]).push([[25],{162:function(e,t,i){"use strict";i.d(t,"a",(function(){return v})),i.d(t,"b",(function(){return S})),i.d(t,"c",(function(){return w})),i.d(t,"d",(function(){return b})),i.d(t,"e",(function(){return m})),i.d(t,"f",(function(){return x})),i.d(t,"g",(function(){return z})),i.d(t,"h",(function(){return Z})),i.d(t,"i",(function(){return p})),i.d(t,"j",(function(){return u})),i.d(t,"k",(function(){return h})),i.d(t,"l",(function(){return _})),i.d(t,"m",(function(){return T})),i.d(t,"n",(function(){return g})),i.d(t,"o",(function(){return F})),i.d(t,"p",(function(){return O})),i.d(t,"q",(function(){return V})),i.d(t,"r",(function(){return D})),i.d(t,"s",(function(){return q})),i.d(t,"t",(function(){return B})),i.d(t,"u",(function(){return y})),i.d(t,"v",(function(){return P})),i.d(t,"w",(function(){return X}));var r=i(177),n=i(138),s=i(140),a=i(200),o=i(197);const l=["field","field2","field3","normalizationField","rotationInfo.field","proportionalSymbolInfo.field","proportionalSymbolInfo.normalizationField","colorInfo.field","colorInfo.normalizationField"],c=["field","normalizationField"];function u(e,t){if(null!=e&&null!=t)for(const i of Array.isArray(e)?e:[e])if(f(l,i,t),"visualVariables"in i&&i.visualVariables)for(const e of i.visualVariables)f(c,e,t)}function f(e,t,i){if(e)for(const n of e){const e=Object(r.b)(n,t),s=e&&"function"!=typeof e&&g(i,e);s&&Object(r.c)(n,s.name,t)}}function h(e,t){if(null!=e&&null!=t)if("startField"in e){const i=g(t,e.startField),r=g(t,e.endField);e.startField=i&&i.name||null,e.endField=r&&r.name||null}else{const i=g(t,e.startTimeField),r=g(t,e.endTimeField);e.startTimeField=i&&i.name||null,e.endTimeField=r&&r.name||null}}const d=new Set;function p(e,t){return e&&t?(d.clear(),m(d,e,t),Array.from(d).sort()):[]}function m(e,t,i){if(i)if(t&&t.length)if(i.includes("*"))for(const{name:r}of t)e.add(r);else for(const r of i)b(e,t,r);else{if(i.includes("*"))return e.clear(),void e.add("*");for(const t of i)e.add(t)}}function b(e,t,i){if(t&&t.length){const r=g(t,i);r&&e.add(r.name)}else"string"==typeof i&&e.add(i)}function y(e,t){return Object(n.j)(t)||Object(n.j)(e)?[]:t.includes("*")?e.map((e=>e.name)):t}function g(e,t){if("string"!=typeof t)return null;if(null!=e){t=t.toLowerCase();for(const i of e)if(i&&i.name.toLowerCase()===t)return i}return null}function O(e,t){if(!e||!t||"string"!=typeof t)return!1;t=t.toLowerCase();for(const i of e)if(i&&i.name.toLowerCase()===t)return!0;return!1}async function v(e,t,i){if(!i)return;const{arcadeUtils:r}=await Object(o.e)(),n=r.extractFieldNames(i);for(const s of n)b(e,t,s)}function _({displayField:e,fields:t}){return e||(t&&t.length?j(t,"name-or-title")||j(t,"unique-identifier")||j(t,"type-or-category")||function(e){for(const t of e){if(!t||!t.name)continue;const e=t.name.toLowerCase();if(e.indexOf("name")>-1||e.indexOf("title")>-1)return t.name}return null}(t):null)}function j(e,t){for(const i of e)if(i&&i.valueType&&i.valueType===t)return i.name;return null}async function S(e,t){if(!t)return;const{fields:i}=t,n=Object(r.b)("elevationInfo.featureExpressionInfo",t);return n?n.collectRequiredFields(e,i):void 0}async function w(e,t,i){t&&i&&"cluster"===i.type&&i.fields&&await Promise.all(i.fields.map((i=>async function(e,t,i){i.outStatistic.onStatisticValueExpression?v(e,t,i.outStatistic.onStatisticValueExpression):e.add(i.outStatistic.onStatisticField)}(e,t.fields,i))))}async function x(e,t,r){if(t&&(t.timeInfo&&Object(n.k)(r)&&r.timeExtent&&m(e,t.fields,[t.timeInfo.startField,t.timeInfo.endField]),t.floorInfo&&m(e,t.fields,[t.floorInfo.floorField]),Object(n.k)(r)&&Object(n.k)(r.where)&&r.where&&"1=1"!==r.where)){const n=(await Promise.all([i.e(11),i.e(270)]).then(i.bind(null,320))).WhereClause.create(r.where,t.fieldsIndex);if(!n.isStandardized)throw new s.a("fieldUtils:collectFilterFields","Where clause is not standardized");m(e,t.fields,n.fieldNames)}}function T(e){if(!e)return[];const t="editFieldsInfo"in e&&e.editFieldsInfo;return t?p(e.fields,[t&&t.creatorField,t&&t.creationDateField,t&&t.editorField,t&&t.editDateField]):[]}async function z(e,t){const{labelingInfo:i,fields:r}=t;i&&i.length&&await Promise.all(i.map((t=>async function(e,t,i){if(!i)return;const r=i.getLabelExpression(),n=i.where;if("arcade"===r.type)await v(e,t,r.expression);else{const i=r.expression.match(/{[^}]*}/g);i&&i.forEach((i=>{b(e,t,i.slice(1,-1))}))}const s=/['"]+/g;if(n){const i=n.split(" ");3===i.length&&b(e,t,i[0].replace(s,"")),7===i.length&&(b(e,t,i[0].replace(s,"")),b(e,t,i[4].replace(s,"")))}}(e,r,t))))}function F(e){const t=e.defaultValue;return void 0!==t&&E(e,t)?t:e.nullable?null:void 0}function I(e){return"number"==typeof e&&!isNaN(e)&&isFinite(e)}function M(e){return null===e||I(e)}const A="isInteger"in Number?Number.isInteger:e=>"number"==typeof e&&isFinite(e)&&Math.floor(e)===e;function U(e){return null===e||A(e)}function k(e){return null!=e&&"string"==typeof e}function R(e){return null===e||k(e)}function N(){return!0}function E(e,t){let i;switch(e.type){case"date":case"integer":case"long":case"small-integer":case"esriFieldTypeDate":case"esriFieldTypeInteger":case"esriFieldTypeLong":case"esriFieldTypeSmallInteger":i=e.nullable?U:A;break;case"double":case"single":case"esriFieldTypeSingle":case"esriFieldTypeDouble":i=e.nullable?M:I;break;case"string":case"esriFieldTypeString":i=e.nullable?R:k;break;default:i=N}return 1===arguments.length?i:i(t)}const L=new Set(["integer","small-integer","single","double","esriFieldTypeInteger","esriFieldTypeSmallInteger","esriFieldTypeSingle","esriFieldTypeDouble"]);function D(e){return null!=e&&L.has(e.type)}function q(e){return null!=e&&("string"===e.type||"esriFieldTypeString"===e.type)}function V(e){return null!=e&&("date"===e.type||"esriFieldTypeDate"===e.type)}var $,C;function B(e){return null==e||"number"==typeof e&&isNaN(e)?null:e}function P(e,t){return e.nullable&&null===t?null:D(e)&&!function(e,t){const i="string"==typeof e?G(e):e;return!!i&&(i.isInteger?A(t)&&t>=i.min&&t<=i.max:t>=i.min&&t<=i.max)}(e.type,Number(t))?$.OUT_OF_RANGE:E(e,t)?e.domain?Object(a.e)(e.domain,t):null:C.INVALID_TYPE}function G(e){switch(e){case"esriFieldTypeSmallInteger":case"small-integer":return J;case"esriFieldTypeInteger":case"integer":return H;case"esriFieldTypeSingle":case"single":return W;case"esriFieldTypeDouble":case"double":return Y}}($||($={})).OUT_OF_RANGE="numeric-range-validation-error::out-of-range",function(e){e.INVALID_TYPE="type-validation-error::invalid-type"}(C||(C={}));const J={min:-32768,max:32767,isInteger:!0},H={min:-2147483648,max:2147483647,isInteger:!0},W={min:-34e37,max:12e37,isInteger:!1},Y={min:-Number.MAX_VALUE,max:Number.MAX_VALUE,isInteger:!1};function X(e,t,i){switch(e){case a.a.INVALID_CODED_VALUE:return`Value ${i} is not in the coded domain - field: ${t.name}, domain: ${JSON.stringify(t.domain)}`;case a.a.VALUE_OUT_OF_RANGE:return`Value ${i} is out of the range of valid values - field: ${t.name}, domain: ${JSON.stringify(t.domain)}`;case C.INVALID_TYPE:return`Value ${i} is not a valid value for the field type - field: ${t.name}, type: ${t.type}, nullable: ${t.nullable}`;case $.OUT_OF_RANGE:{const{min:e,max:r}=G(t.type);return`Value ${i} is out of range for the number type - field: ${t.name}, type: ${t.type}, value range is ${e} to ${r}`}}}function Z(e,t){return!function(e,t,i){if(!t||!t.attributes||!e){if(Object(n.k)(i))for(const t of e)i.add(t);return!0}const r=t.attributes;let s=!1;for(const a of e)if(!(a in r)){if(s=!0,!Object(n.k)(i))break;i.add(a)}return s}(e,t,null)}},163:function(e,t,i){"use strict";i.d(t,"a",(function(){return B})),i.d(t,"b",(function(){return w})),i.d(t,"c",(function(){return T})),i.d(t,"d",(function(){return V})),i.d(t,"e",(function(){return D})),i.d(t,"f",(function(){return L})),i.d(t,"g",(function(){return N})),i.d(t,"h",(function(){return q})),i.d(t,"i",(function(){return E})),i.d(t,"j",(function(){return c})),i.d(t,"k",(function(){return x})),i.d(t,"l",(function(){return j})),i.d(t,"m",(function(){return k})),i.d(t,"n",(function(){return P})),i.d(t,"o",(function(){return S})),i.d(t,"p",(function(){return v})),i.d(t,"q",(function(){return _})),i.d(t,"r",(function(){return U})),i.d(t,"s",(function(){return I})),i.d(t,"t",(function(){return M})),i.d(t,"u",(function(){return A})),i.d(t,"v",(function(){return z})),i.d(t,"w",(function(){return F})),i.d(t,"x",(function(){return R}));i(129);var r=i(148),n=i(288),s=i(156),a=i(145),o=i(179),l=i(218);const c=39.37,u=o.a.radius*Math.PI/200,f=/UNIT\[([^\]]+)\]\]$/i,h=n.a,d=/UNIT\[([^\]]+)\]/i,p=new Set([4261,4305,4807,4810,4811,4812,4816,4819,4821,4901,4902,37225,104139,104140]),m=Object(r.b)()({meter:"meters",foot:"feet",foot_us:"us-feet",foot_clarke:"clarke-feet",yard_clarke:"clarke-yards",link_clarke:"clarke-links",yard_sears:"sears-yards",foot_sears:"sears-feet",chain_sears:"sears-chains",chain_benoit_1895_b:"benoit-1895-b-chains",yard_indian:"indian-yards",yard_indian_1937:"indian-1937-yards",foot_gold_coast:"gold-coast-feet",chain_sears_1922_truncated:"sears-1922-truncated-chains","50_kilometers":"50-kilometers","150_kilometers":"150-kilometers"}),b=e=>e*e,y=e=>e*e*e,g={length:{baseUnit:"meters",units:{millimeters:{inBaseUnits:.001},centimeters:{inBaseUnits:.01},decimeters:{inBaseUnits:.1},meters:{inBaseUnits:1},kilometers:{inBaseUnits:1e3},inches:{inBaseUnits:.0254},feet:{inBaseUnits:.3048},yards:{inBaseUnits:.9144},miles:{inBaseUnits:1609.344},"nautical-miles":{inBaseUnits:1852},"us-feet":{inBaseUnits:1200/3937}}},area:{baseUnit:"square-meters",units:{"square-millimeters":{inBaseUnits:b(.001)},"square-centimeters":{inBaseUnits:b(.01)},"square-decimeters":{inBaseUnits:b(.1)},"square-meters":{inBaseUnits:1},"square-kilometers":{inBaseUnits:b(1e3)},"square-inches":{inBaseUnits:b(.0254)},"square-feet":{inBaseUnits:b(.3048)},"square-yards":{inBaseUnits:b(.9144)},"square-miles":{inBaseUnits:b(1609.344)},"square-us-feet":{inBaseUnits:b(1200/3937)},acres:{inBaseUnits:.0015625*b(1609.344)},ares:{inBaseUnits:100},hectares:{inBaseUnits:1e4}}},volume:{baseUnit:"liters",units:{liters:{inBaseUnits:1},"cubic-millimeters":{inBaseUnits:1e3*y(.001)},"cubic-centimeters":{inBaseUnits:1e3*y(.01)},"cubic-decimeters":{inBaseUnits:1e3*y(.1)},"cubic-meters":{inBaseUnits:1e3},"cubic-kilometers":{inBaseUnits:1e3*y(1e3)},"cubic-inches":{inBaseUnits:1e3*y(.0254)},"cubic-feet":{inBaseUnits:1e3*y(.3048)},"cubic-yards":{inBaseUnits:1e3*y(.9144)},"cubic-miles":{inBaseUnits:1e3*y(1609.344)}}},angle:{baseUnit:"radians",units:{radians:{inBaseUnits:1},degrees:{inBaseUnits:Math.PI/180}}}},O=function(){const e={};for(const t in g)for(const i in g[t].units)e[i]=t;return e}();const v=["metric","imperial","square-inches","square-feet","square-yards","square-miles","square-us-feet","square-meters","square-kilometers","acres","ares","hectares"],_=["metric","imperial","inches","feet","yards","miles","nautical-miles","us-feet","meters","kilometers"];function j(e){return"imperial"===e||"metric"===e}function S(e){const t=O[e];if(t)return t;throw new Error("unknown measure")}function w(e){return function(e){return g[e].baseUnit}(S(e))}function x(e,t=null){return t=t||S(e),g[t].baseUnit===e}function T(e,t,i){if(t===i)return e;const r=S(t);if(r!==S(i))throw new Error("incompatible units");const n=x(t,r)?e:function(e,t,i){return e*g[i].units[t].inBaseUnits}(e,t,r);return x(i,r)?n:function(e,t,i){return e/g[i].units[t].inBaseUnits}(n,i,r)}function z(e,t){return T(e,t,"meters")<3e3?"meters":"kilometers"}function F(e,t){return T(e,t,"meters")<1e5?"meters":"kilometers"}function I(e,t){return T(e,t,"feet")<1e3?"feet":"miles"}function M(e,t){return T(e,t,"feet")<1e5?"feet":"miles"}function A(e,t){return T(e,t,"square-meters")<3e6?"square-meters":"square-kilometers"}function U(e,t){return T(e,t,"square-feet")<1e6?"square-feet":"square-miles"}function k(e,t,i){return T(e,t,"meters")/(i*Math.PI/180)}function R(e){return m.fromJSON(e.toLowerCase())||null}function N(e){if(e&&"object"==typeof e&&!Object(s.e)(e))return 1;const t=L(e);return t>1e5?1:t}function E(e){return L(e)>=(e instanceof a.a?Object(l.e)(e).metersPerDegree:1e5)?"meters":q(e)}function L(e,t=o.a.metersPerDegree){return D(e,!0)||t}function D(e,t=!1){let i,r,n=null;if(null!=e&&("object"==typeof e?(i=e.wkid,r=e.wkt):"number"==typeof e?i=e:"string"==typeof e&&(r=e)),i){if(Object(s.k)(i))return o.b.metersPerDegree;if(Object(s.l)(i))return o.c.metersPerDegree;n=h.values[h[i]],!n&&t&&p.has(i)&&(n=u)}else if(r)if(-1!==r.search(/^PROJCS/i)){const e=f.exec(r);e&&e[1]&&(n=parseFloat(e[1].split(",")[1]))}else if(-1!==r.search(/^GEOCCS/i)){const e=d.exec(r);e&&e[1]&&(n=parseFloat(e[1].split(",")[1]))}return n}function q(e){let t,i,r=null;if(null!=e&&("object"==typeof e?(t=e.wkid,i=e.wkt):"number"==typeof e?t=e:"string"==typeof e&&(i=e)),t)r=h.units[h[t]];else if(i&&-1!==i.search(/^PROJCS/i)){let e=f.exec(i);e&&e[1]&&(e=/[\\"\\']{1}([^\\"\\']+)/.exec(e[1]),r=e&&e[1])}return r?R(r):null}function V(e){if(!e)return null;switch(q(e)){case"feet":case"us-feet":case"clarke-feet":case"clarke-yards":case"clarke-links":case"sears-yards":case"sears-feet":case"sears-chains":case"benoit-1895-b-chains":case"indian-yards":case"indian-1937-yards":case"gold-coast-feet":case"sears-1922-truncated-chains":return"imperial";case"50-kilometers":case"150-kilometers":case"meters":return"metric";case null:case void 0:return null}return null}const $={esriAcres:"acres",esriAres:"ares",esriHectares:"hectares",esriSquareCentimeters:"square-centimeters",esriSquareDecimeters:"square-decimeters",esriSquareFeet:"square-feet",esriSquareInches:"square-inches",esriSquareKilometers:"square-kilometers",esriSquareMeters:"square-meters",esriSquareMiles:"square-miles",esriSquareMillimeters:"square-millimeters",esriSquareUsFeet:"square-us-feet",esriSquareYards:"square-yards"},C={esriCentimeters:"centimeters",esriDecimeters:"decimeters",esriFeet:"feet",esriInches:"inches",esriKilometers:"kilometers",esriMeters:"meters",esriMiles:"miles",esriMillimeters:"millimeters",esriNauticalMiles:"nautical-miles",esriYards:"yards"},B=Object(r.b)()($),P=Object(r.b)()(C);Object(r.b)()({...$,...C})},169:function(e,t,i){"use strict";var r=i(131),n=(i(129),i(130),i(137),i(134)),s=i(148),a=i(155),o=i(133),l=(i(132),i(135),i(136),i(139));const c=new s.a({inherited:"inherited",codedValue:"coded-value",range:"range"});let u=class extends l.a{constructor(e){super(e),this.name=null,this.type=null}};Object(r.a)([Object(n.b)({type:String,json:{write:!0}})],u.prototype,"name",void 0),Object(r.a)([Object(a.a)(c)],u.prototype,"type",void 0),u=Object(r.a)([Object(o.a)("esri.layers.support.Domain")],u);var f=u;t.a=f},172:function(e,t,i){"use strict";i.d(t,"a",(function(){return S})),i.d(t,"b",(function(){return d})),i.d(t,"c",(function(){return s})),i.d(t,"d",(function(){return O})),i.d(t,"e",(function(){return p})),i.d(t,"f",(function(){return m})),i.d(t,"g",(function(){return y})),i.d(t,"h",(function(){return b})),i.d(t,"i",(function(){return n})),i.d(t,"j",(function(){return _})),i.d(t,"k",(function(){return c})),i.d(t,"l",(function(){return u})),i.d(t,"m",(function(){return o})),i.d(t,"n",(function(){return a})),i.d(t,"o",(function(){return h})),i.d(t,"p",(function(){return g})),i.d(t,"q",(function(){return v})),i.d(t,"r",(function(){return l})),i.d(t,"s",(function(){return f}));i(129),i(138);var r=i(149);function n(e=w){return[e[0],e[1],e[2],e[3]]}function s(e){return[e[0],e[1],e[2],e[3]]}function a(e,t,i,r,s=n()){return s[0]=e,s[1]=t,s[2]=i,s[3]=r,s}function o(e,t=n()){return t[0]=e.xmin,t[1]=e.ymin,t[2]=e.xmax,t[3]=e.ymax,t}function l(e,t){return new r.a({xmin:e[0],ymin:e[1],xmax:e[2],ymax:e[3],spatialReference:t})}function c(e,t,i=e){if("length"in t)j(t)?(i[0]=Math.min(e[0],t[0]),i[1]=Math.min(e[1],t[1]),i[2]=Math.max(e[2],t[2]),i[3]=Math.max(e[3],t[3])):2!==t.length&&3!==t.length||(i[0]=Math.min(e[0],t[0]),i[1]=Math.min(e[1],t[1]),i[2]=Math.max(e[2],t[0]),i[3]=Math.max(e[3],t[1]));else switch(t.type){case"extent":i[0]=Math.min(e[0],t.xmin),i[1]=Math.min(e[1],t.ymin),i[2]=Math.max(e[2],t.xmax),i[3]=Math.max(e[3],t.ymax);break;case"point":i[0]=Math.min(e[0],t.x),i[1]=Math.min(e[1],t.y),i[2]=Math.max(e[2],t.x),i[3]=Math.max(e[3],t.y)}return i}function u(e,t,i=e){const r=t.length;let n=e[0],s=e[1],a=e[2],o=e[3];for(let l=0;l<r;l++){const e=t[l];n=Math.min(n,e[0]),s=Math.min(s,e[1]),a=Math.max(a,e[0]),o=Math.max(o,e[1])}return i[0]=n,i[1]=s,i[2]=a,i[3]=o,i}function f(e){return e[0]>=e[2]?0:e[2]-e[0]}function h(e){return e[1]>=e[3]?0:e[3]-e[1]}function d(e){return f(e)*h(e)}function p(e,t){return b(e,t[0],t[1])}function m(e,t){return b(e,t.x,t.y)}function b(e,t,i){return t>=e[0]&&i>=e[1]&&t<=e[2]&&i<=e[3]}function y(e,t,i){return t[0]>=e[0]-i&&t[1]>=e[1]-i&&t[0]<=e[2]+i&&t[1]<=e[3]+i}function g(e,t){return Math.max(t[0],e[0])<=Math.min(t[2],e[2])&&Math.max(t[1],e[1])<=Math.min(t[3],e[3])}function O(e,t){return t[0]>=e[0]&&t[2]<=e[2]&&t[1]>=e[1]&&t[3]<=e[3]}function v(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e}function _(e){return e?v(e,S):n(S)}function j(e){return 4===e.length}const S=[1/0,1/0,-1/0,-1/0],w=[0,0,0,0]},187:function(e,t,i){"use strict";var r,n=i(131),s=(i(129),i(130),i(137),i(134),i(155)),a=i(133),o=(i(132),i(135),i(136),i(169));let l=r=class extends o.a{constructor(e){super(e),this.type="inherited"}clone(){return new r}};Object(n.a)([Object(s.a)({inherited:"inherited"})],l.prototype,"type",void 0),l=r=Object(n.a)([Object(a.a)("esri.layers.support.InheritedDomain")],l);var c=l;t.a=c},188:function(e,t,i){"use strict";var r,n=i(131),s=(i(129),i(130),i(137),i(134)),a=i(155),o=i(133),l=(i(132),i(135),i(136),i(169));let c=r=class extends l.a{constructor(e){super(e),this.maxValue=null,this.minValue=null,this.type="range"}clone(){return new r({maxValue:this.maxValue,minValue:this.minValue,name:this.name})}};Object(n.a)([Object(s.b)({type:Number,json:{type:[Number],read:{source:"range",reader:(e,t)=>t.range&&t.range[1]},write:{enabled:!1,overridePolicy(){return{enabled:null!=this.maxValue&&null==this.minValue}},target:"range",writer(e,t,i){t[i]=[this.minValue||0,e]}}}})],c.prototype,"maxValue",void 0),Object(n.a)([Object(s.b)({type:Number,json:{type:[Number],read:{source:"range",reader:(e,t)=>t.range&&t.range[0]},write:{target:"range",writer(e,t,i){t[i]=[e,this.maxValue||0]}}}})],c.prototype,"minValue",void 0),Object(n.a)([Object(a.a)({range:"range"})],c.prototype,"type",void 0),c=r=Object(n.a)([Object(o.a)("esri.layers.support.RangeDomain")],c);var u=c;t.a=u},189:function(e,t,i){"use strict";var r,n=i(131),s=(i(129),i(141)),a=(i(130),i(137),i(134)),o=i(155),l=i(133),c=(i(132),i(135),i(136),i(139));let u=r=class extends c.a{constructor(e){super(e),this.name=null,this.code=null}clone(){return new r({name:this.name,code:this.code})}};Object(n.a)([Object(a.b)({type:String,json:{write:!0}})],u.prototype,"name",void 0),Object(n.a)([Object(a.b)({type:[String,Number],json:{write:!0}})],u.prototype,"code",void 0),u=r=Object(n.a)([Object(l.a)("esri.layers.support.CodedValue")],u);var f,h=u,d=i(169);let p=f=class extends d.a{constructor(e){super(e),this.codedValues=null,this.type="coded-value"}getName(e){let t=null;if(this.codedValues){const i=String(e);this.codedValues.some((e=>(String(e.code)===i&&(t=e.name),!!t)))}return t}clone(){return new f({codedValues:Object(s.a)(this.codedValues),name:this.name})}};Object(n.a)([Object(a.b)({type:[h],json:{write:!0}})],p.prototype,"codedValues",void 0),Object(n.a)([Object(o.a)({codedValue:"coded-value"})],p.prototype,"type",void 0),p=f=Object(n.a)([Object(l.a)("esri.layers.support.CodedValueDomain")],p);var m=p;t.a=m},197:function(e,t,i){"use strict";i.d(t,"a",(function(){return u})),i.d(t,"b",(function(){return c})),i.d(t,"c",(function(){return o})),i.d(t,"d",(function(){return l})),i.d(t,"e",(function(){return a}));var r=i(138),n=i(145);i(150);let s;async function a(){return s||(s=(async()=>{const e=await Promise.all([i.e(32),i.e(129)]).then(i.bind(null,435));return await e.arcade.load(),{arcade:e.arcade,arcadeUtils:e,Dictionary:e.Dictionary,Feature:e.arcadeFeature}})()),s}const o=(e,t,i)=>u.create(e,t,i,null,["$feature"]),l=(e,t,i)=>u.create(e,t,i,null,["$feature","$view"]),c=(e,t,i,r)=>u.create(e,t,i,r,["$feature","$view"]);class u{constructor(e,t,i,r,n,s,a,o){this.script=e,this.evaluate=n,this.fields=a,this._syntaxTree=r,this._arcade=t,this._arcadeDictionary=i,this._arcadeFeature=s,this._spatialReference=o,this._referencesGeometry=t.scriptTouchesGeometry(this._syntaxTree),this._referencesScale=this._arcade.referencesMember(this._syntaxTree,"scale")}static async create(e,t,i,s,o,l){const{arcade:c,Feature:f,Dictionary:h}=await a(),d=n.a.fromJSON(t),p=c.parseScript(e,l),m=o.reduce(((e,t)=>({...e,[t]:null})),{});let b=null;Object(r.k)(s)&&(b=new h(s),b.immutable=!0,m.$config=null);const y=c.scriptUsesGeometryEngine(p)&&c.enableGeometrySupport(),g=c.scriptUsesFeatureSet(p)&&c.enableFeatureSetSupport(),O=c.scriptIsAsync(p)&&c.enableAsyncSupport(),v={vars:m,spatialReference:d,useAsync:!!O},_=new h;_.immutable=!1,_.setField("scale",0);const j=c.compileScript(p,v);return await Promise.all([y,g,O]),new u(e,c,h,p,(e=>("$view"in e&&e.$view&&(_.setField("scale",e.$view.scale),e.$view=_),b&&(e.$config=b),j({vars:e,spatialReference:d}))),new f,i,d)}repurposeFeature(e){return e.geometry&&!e.geometry.spatialReference&&(e.geometry.spatialReference=this._spatialReference),this._arcadeFeature.repurposeFromGraphicLikeObject(e.geometry,e.attributes,{fields:this.fields}),this._arcadeFeature}repurposeAdapter(e){return this._arcadeFeature.repurposeFromAdapter(e,{fields:this.fields}),this._arcadeFeature}createDictionary(){return new this._arcadeDictionary}referencesMember(e){return this._arcade.referencesMember(this._syntaxTree,e)}referencesFunction(e){return this._arcade.referencesFunction(this._syntaxTree,e)}referencesGeometry(){return this._referencesGeometry}referencesScale(){return this._referencesScale}extractFieldLiterals(e){return this._arcade.extractFieldLiterals(this._syntaxTree,e)}}},200:function(e,t,i){"use strict";i.d(t,"a",(function(){return r})),i.d(t,"b",(function(){return h})),i.d(t,"c",(function(){return f})),i.d(t,"d",(function(){return u})),i.d(t,"e",(function(){return c}));i(129);var r,n,s=i(169),a=i(189),o=i(187),l=i(188);function c(e,t){switch(e.type){case"range":{const i="range"in e?e.range[0]:e.minValue,n="range"in e?e.range[1]:e.maxValue;if(+t<i||+t>n)return r.VALUE_OUT_OF_RANGE;break}case"coded-value":case"codedValue":if(null==e.codedValues||e.codedValues.every((e=>null==e||e.code!==t)))return r.INVALID_CODED_VALUE}return null}(n=r||(r={})).VALUE_OUT_OF_RANGE="domain-validation-error::value-out-of-range",n.INVALID_CODED_VALUE="domain-validation-error::invalid-coded-value";const u={key:"type",base:s.a,typeMap:{range:l.a,"coded-value":a.a,inherited:o.a}};function f(e){if(e&&"range"===e.type)return{min:"range"in e?e.range[0]:e.minValue,max:"range"in e?e.range[1]:e.maxValue}}function h(e){if(!e||!e.type)return null;switch(e.type){case"range":return l.a.fromJSON(e);case"codedValue":return a.a.fromJSON(e);case"inherited":return o.a.fromJSON(e)}return null}},211:function(e,t,i){"use strict";i.d(t,"a",(function(){return s}));var r=i(179),n=i(163);const s={inches:Object(n.c)(1,"meters","inches"),feet:Object(n.c)(1,"meters","feet"),"us-feet":Object(n.c)(1,"meters","us-feet"),yards:Object(n.c)(1,"meters","yards"),miles:Object(n.c)(1,"meters","miles"),"nautical-miles":Object(n.c)(1,"meters","nautical-miles"),millimeters:Object(n.c)(1,"meters","millimeters"),centimeters:Object(n.c)(1,"meters","centimeters"),decimeters:Object(n.c)(1,"meters","decimeters"),meters:Object(n.c)(1,"meters","meters"),kilometers:Object(n.c)(1,"meters","kilometers"),"decimal-degrees":1/Object(n.m)(1,"meters",r.a.radius)}},218:function(e,t,i){"use strict";i.d(t,"a",(function(){return o})),i.d(t,"b",(function(){return l})),i.d(t,"c",(function(){return c})),i.d(t,"d",(function(){return u})),i.d(t,"e",(function(){return h})),i.d(t,"f",(function(){return d})),i.d(t,"g",(function(){return f}));var r=i(156),n=i(145),s=i(179);function a(e){return new n.a({wkt:`GEOCCS["Spherical geocentric",\n    DATUM["Not specified",\n      SPHEROID["Sphere",${e.radius},0]],\n    PRIMEM["Greenwich",0.0,\n      AUTHORITY["EPSG","8901"]],\n    UNIT["m",1.0],\n    AXIS["Geocentric X",OTHER],\n    AXIS["Geocentric Y",EAST],\n    AXIS["Geocentric Z",NORTH]\n  ]`})}const o=a(s.a),l=a(s.b),c=a(s.c),u=new n.a({wkt:`GEOCCS["WGS 84",\n  DATUM["WGS_1984",\n    SPHEROID["WGS 84",${s.a.radius},298.257223563,\n      AUTHORITY["EPSG","7030"]],\n    AUTHORITY["EPSG","6326"]],\n  PRIMEM["Greenwich",0,\n    AUTHORITY["EPSG","8901"]],\n  UNIT["m",1.0,\n    AUTHORITY["EPSG","9001"]],\n  AXIS["Geocentric X",OTHER],\n  AXIS["Geocentric Y",OTHER],\n  AXIS["Geocentric Z",NORTH],\n  AUTHORITY["EPSG","4978"]\n]`});function f(e){return e&&(Object(r.g)(e)||e===l)?l:e&&(Object(r.h)(e)||e===c)?c:o}function h(e){return e&&(Object(r.g)(e)||e===l)?s.b:e&&(Object(r.h)(e)||e===c)?s.c:s.a}function d(e){return Object(r.k)(e)?s.b:Object(r.l)(e)?s.c:s.a}},233:function(e,t,i){"use strict";i.d(t,"a",(function(){return O})),i.d(t,"b",(function(){return v}));var r=i(131),n=i(168),s=i(133),a=i(186),o=i(146),l=i(204),c=i(138),u=i(229),f=i(141);class h{constructor(){this._propertyOriginMap=new Map,this._originStores=new Array(a.a),this._values=new Map}clone(e){const t=new h,i=this._originStores[0];i&&i.forEach(((e,i)=>{t.set(i,Object(f.a)(e),0)}));for(let r=2;r<a.a;r++){const i=this._originStores[r];i&&i.forEach(((i,n)=>{e&&e.has(n)||t.set(n,Object(f.a)(i),r)}))}return t}get(e,t){const i=void 0===t?this._values:this._originStores[t];return i?i.get(e):void 0}keys(e){const t=null==e?this._values:this._originStores[e];return t?[...t.keys()]:[]}set(e,t,i=6){let r=this._originStores[i];if(r||(r=new Map,this._originStores[i]=r),r.set(e,t),!this._values.has(e)||Object(c.d)(this._propertyOriginMap.get(e))<=i){const r=this._values.get(e);return this._values.set(e,t),this._propertyOriginMap.set(e,i),r!==t}return!1}delete(e,t=6){const i=this._originStores[t];if(!i)return;const r=i.get(e);if(i.delete(e),this._values.has(e)&&this._propertyOriginMap.get(e)===t){this._values.delete(e);for(let i=t-1;i>=0;i--){const t=this._originStores[i];if(t&&t.has(e)){this._values.set(e,t.get(e)),this._propertyOriginMap.set(e,i);break}}}return r}has(e,t){const i=void 0===t?this._values:this._originStores[t];return!!i&&i.has(e)}revert(e,t){for(;t>0&&!this.has(e,t);)--t;const i=this._originStores[t],r=i&&i.get(e),n=this._values.get(e);return this._values.set(e,r),this._propertyOriginMap.set(e,t),n!==r}originOf(e){return this._propertyOriginMap.get(e)||0}forEach(e){this._values.forEach(e)}}var d=h;const p=e=>{let t=class extends e{constructor(...e){super(...e);const t=Object(c.d)(Object(n.a)(this)),i=t.metadatas,r=t.store,s=new d;t.store=s,r.keys().forEach((e=>{s.set(e,r.get(e),0)})),Object.keys(i).forEach((e=>{t.internalGet(e)&&s.set(e,t.internalGet(e),0)}))}read(e,t){Object(u.a)(this,e,t)}getAtOrigin(e,t){const i=m(this),r=Object(a.d)(t);if("string"==typeof e)return i.get(e,r);const n={};return e.forEach((e=>{n[e]=i.get(e,r)})),n}originOf(e){return Object(a.b)(this.originIdOf(e))}originIdOf(e){return m(this).originOf(e)}revert(e,t){const i=m(this),r=Object(a.d)(t),s=Object(n.a)(this);let o;o="string"==typeof e?"*"===e?i.keys(r):[e]:e,o.forEach((e=>{s.propertyInvalidated(e),i.revert(e,r),s.propertyCommitted(e)}))}};return t=Object(r.a)([Object(s.a)("esri.core.ReadOnlyMultiOriginJSONSupport")],t),t};function m(e){return Object(n.a)(e).store}let b=class extends(p(o.a)){};b=Object(r.a)([Object(s.a)("esri.core.ReadOnlyMultiOriginJSONSupport")],b);const y=e=>{let t=class extends e{constructor(...e){super(...e)}clear(e,t="user"){return g(this).delete(e,Object(a.d)(t))}write(e={},t){return Object(l.b)(this,e=e||{},t),e}setAtOrigin(e,t,i){Object(n.a)(this).setAtOrigin(e,t,Object(a.d)(i))}removeOrigin(e){const t=g(this),i=Object(a.d)(e),r=t.keys(i);for(const n of r)t.originOf(n)===i&&t.set(n,t.get(n,i),6)}updateOrigin(e,t){const i=g(this),r=Object(a.d)(t),n=this.get(e);for(let s=r+1;s<a.a;++s)i.delete(e,s);i.set(e,n,r)}toJSON(e){return this.write({},e)}};return t=Object(r.a)([Object(s.a)("esri.core.WriteableMultiOriginJSONSupport")],t),t.prototype.toJSON.isDefaultToJSON=!0,t};function g(e){return Object(n.a)(e).store}const O=e=>{let t=class extends(y(p(e))){constructor(...e){super(...e)}};return t=Object(r.a)([Object(s.a)("esri.core.MultiOriginJSONSupport")],t),t};let v=class extends(O(o.a)){};v=Object(r.a)([Object(s.a)("esri.core.MultiOriginJSONSupport")],v)},239:function(e,t,i){"use strict";i.d(t,"a",(function(){return d})),i.d(t,"b",(function(){return u})),i.d(t,"c",(function(){return m})),i.d(t,"d",(function(){return v})),i.d(t,"e",(function(){return O})),i.d(t,"f",(function(){return f})),i.d(t,"g",(function(){return h})),i.d(t,"h",(function(){return b})),i.d(t,"i",(function(){return y})),i.d(t,"j",(function(){return p})),i.d(t,"k",(function(){return g}));var r=i(138),n=i(132),s=i(243);const a=["MapServer","ImageServer","FeatureServer","SceneServer","StreamServer","VectorTileServer"],o=new RegExp(`^((?:https?:)?\\/\\/\\S+?\\/rest\\/services\\/(.+?)\\/(${a.join("|")}))(?:\\/(?:layers\\/)?(\\d+))?`,"i"),l=new RegExp(`^((?:https?:)?\\/\\/\\S+?\\/([^\\/\\n]+)\\/(${a.join("|")}))(?:\\/(?:layers\\/)?(\\d+))?`,"i"),c=/(.*)\/(\d+)\/?$/i;function u(e){return!!o.test(e)}function f(e){const t=Object(n.J)(e),i=t.path.match(o)||t.path.match(l);if(!i)return null;const[,r,s,a,c]=i,u=s.indexOf("/");return{title:d(-1!==u?s.slice(u+1):s),serverType:a,sublayer:null!=c&&""!==c?parseInt(c,10):null,url:{path:r}}}function h(e){const t=Object(n.J)(e).path.match(c);return t?{serviceUrl:t[1],sublayerId:Number(t[2])}:null}function d(e){return(e=e.replace(/\s*[/_]+\s*/g," "))[0].toUpperCase()+e.slice(1)}function p(e,t){const i=[];if(e){const t=f(e);Object(r.k)(t)&&t.title&&i.push(t.title)}if(t){const e=d(t);i.push(e)}if(2===i.length){if(-1!==i[0].toLowerCase().indexOf(i[1].toLowerCase()))return i[0];if(-1!==i[1].toLowerCase().indexOf(i[0].toLowerCase()))return i[1]}return i.join(" - ")}function m(e){if(!e)return!1;const t=-1!==(e=e.toLowerCase()).indexOf(".arcgis.com/"),i=-1!==e.indexOf("//services")||-1!==e.indexOf("//tiles")||-1!==e.indexOf("//features");return t&&i}function b(e,t){return e?Object(n.H)(Object(n.G)(e,t)):e}function y(e){let{url:t}=e;if(!t)return{url:t};t=Object(n.G)(t,e.logger);const i=Object(n.J)(t),s=f(i.path);let a;if(Object(r.k)(s))null!=s.sublayer&&null==e.layer.layerId&&(a=s.sublayer),t=s.url.path;else if(e.nonStandardUrlAllowed){const e=h(i.path);Object(r.k)(e)&&(t=e.serviceUrl,a=e.sublayerId)}return{url:Object(n.H)(t),layerId:a}}function g(e,t,i,r,a){Object(s.f)(t,r,"url",a),r.url&&null!=e.layerId&&(r.url=Object(n.y)(r.url,i,e.layerId.toString()))}function O(e){if(!e)return!1;const t=e.toLowerCase(),i=-1!==t.indexOf("/services/"),r=-1!==t.indexOf("/mapserver/wmsserver"),n=-1!==t.indexOf("/imageserver/wmsserver"),s=-1!==t.indexOf("/wmsserver");return i&&(r||n||s)}function v(e){if(!e)return!1;const t=new n.a(Object(n.z)(e)).authority.toLowerCase();return"server.arcgisonline.com"===t||"services.arcgisonline.com"===t}},265:function(e,t,i){"use strict";i.d(t,"a",(function(){return n})),i.d(t,"b",(function(){return s}));var r=i(226);class n{constructor(e,t,i){this._namespace=e,this._storage=t,this._removeFunc=!1,this._hit=0,this._miss=0,this._storage.register(this),this._namespace+=":",i&&(this._storage.registerRemoveFunc(this._namespace,i),this._removeFunc=!0)}destroy(){this._storage.clear(this._namespace),this._removeFunc&&this._storage.deregisterRemoveFunc(this._namespace),this._storage.deregister(this),this._storage=null}get namespace(){return this._namespace.slice(0,-1)}get hitRate(){return this._hit/(this._hit+this._miss)}get size(){return this._storage.size}get maxSize(){return this._storage.maxSize}resetHitRate(){this._hit=this._miss=0}put(e,t,i,r=0){this._storage.put(this._namespace+e,t,i,r)}get(e){const t=this._storage.get(this._namespace+e);return void 0===t?++this._miss:++this._hit,t}pop(e){const t=this._storage.pop(this._namespace+e);return void 0===t?++this._miss:++this._hit,t}updateSize(e,t,i){this._storage.updateSize(this._namespace+e,t,i)}clear(){this._storage.clear(this._namespace)}clearAll(){this._storage.clearAll()}getStats(){return this._storage.getStats()}resetStats(){this._storage.resetStats()}}class s{constructor(e=10485760){this._maxSize=e,this._db=new Map,this._size=0,this._hit=0,this._miss=0,this._removeFuncs=new r.a,this._users=new r.a}destroy(){this.clearAll(),this._removeFuncs.clear(),this._users.clear(),this._db=null}register(e){this._users.push(e)}deregister(e){this._users.removeUnordered(e)}registerRemoveFunc(e,t){this._removeFuncs.push([e,t])}deregisterRemoveFunc(e){this._removeFuncs.filterInPlace((t=>t[0]!==e))}get size(){return this._size}get maxSize(){return this._maxSize}set maxSize(e){this._maxSize=Math.max(e,0),this._checkSizeLimit()}put(e,t,i,r){const n=this._db.get(e);if(n&&(this._size-=n.size,this._db.delete(e),n.entry!==t&&this._notifyRemoved(e,n.entry)),i>this._maxSize)return void this._notifyRemoved(e,t);if(void 0===t)return void console.warn("Refusing to cache undefined entry ");if(!i||i<0)return void console.warn("Refusing to cache entry with invalid size "+i);const s=1+Math.max(r,-3)- -3;this._db.set(e,{entry:t,size:i,lifetime:s,lives:s}),this._size+=i,this._checkSizeLimit()}updateSize(e,t,i){const r=this._db.get(e);if(r&&r.entry===t){if(this._size-=r.size,i>this._maxSize)return this._db.delete(e),void this._notifyRemoved(e,t);r.size=i,this._size+=i,this._checkSizeLimit()}}pop(e){const t=this._db.get(e);if(t)return this._size-=t.size,this._db.delete(e),++this._hit,t.entry;++this._miss}get(e){const t=this._db.get(e);if(void 0!==t)return this._db.delete(e),t.lives=t.lifetime,this._db.set(e,t),++this._hit,t.entry;++this._miss}getStats(){const e={Size:Math.round(this._size/1048576)+"/"+Math.round(this._maxSize/1048576)+"MB","Hit rate":Math.round(100*this._getHitRate())+"%",Entries:this._db.size.toString()},t={},i=new Array;this._db.forEach(((e,r)=>{const n=e.lifetime;i[n]=(i[n]||0)+e.size,this._users.forAll((i=>{const n=i.namespace;if(r.startsWith(n)){const i=t[n]||0;t[n]=i+e.size}}))}));const r={};this._users.forAll((e=>{const i=e.namespace;if(!isNaN(e.hitRate)&&e.hitRate>0){const n=t[i]||0;t[i]=n,r[i]=Math.round(100*e.hitRate)+"%"}else r[i]="0%"}));const n=Object.keys(t);n.forEach((e=>t[e]=t[e]/this._size*100)),n.sort(((e,i)=>t[i]-t[e])),n.forEach((i=>e[i]=Math.round(t[i])+"% / "+r[i]));for(let s=i.length-1;s>=0;--s){const t=i[s];t&&(e["Priority "+(s+-3-1)]=Math.round(t/this.size*100)+"%")}return e}resetStats(){this._hit=this._miss=0,this._users.forAll((e=>e.resetHitRate()))}clear(e){this._db.forEach(((t,i)=>{i.startsWith(e)&&(this._size-=t.size,this._db.delete(i),this._notifyRemoved(i,t.entry))}))}clearAll(){this._db.forEach(((e,t)=>this._notifyRemoved(t,e.entry))),this._size=0,this._db.clear()}_getHitRate(){return this._hit/(this._hit+this._miss)}_notifyRemoved(e,t){this._removeFuncs.forAll((i=>{e.startsWith(i[0])&&i[1](t)}))}_checkSizeLimit(){if(!(this._size<=this._maxSize))for(const[e,t]of this._db)if(this._db.delete(e),t.lives<=1?(this._size-=t.size,this._notifyRemoved(e,t.entry)):(--t.lives,this._db.set(e,t)),this._size<=.9*this.maxSize)return}}},293:function(e,t,i){"use strict";var r=i(265);t.a=class{constructor(e,t){this._storage=new r.b,this._storage.maxSize=e,t&&this._storage.registerRemoveFunc("",t)}put(e,t,i){this._storage.put(e,t,i,1)}pop(e){return this._storage.pop(e)}get(e){return this._storage.get(e)}clear(){this._storage.clearAll()}destroy(){this._storage.destroy()}get maxSize(){return this._storage.maxSize}set maxSize(e){this._storage.maxSize=e}}},381:function(e,t,i){"use strict";var r,n=i(131),s=(i(129),i(130),i(137)),a=i(134),o=i(148),l=i(144),c=i(133),u=i(143),f=(i(132),i(135),i(136),i(139)),h=i(156),d=i(145),p=i(192),m=i(159),b=(i(150),i(163)),y=i(172),g=i(505);const O=new o.a({PNG:"png",PNG8:"png8",PNG24:"png24",PNG32:"png32",JPEG:"jpg",JPG:"jpg",DIB:"dib",TIFF:"tiff",EMF:"emf",PS:"ps",PDF:"pdf",GIF:"gif",SVG:"svg",SVGZ:"svgz",Mixed:"mixed",MIXED:"mixed",LERC:"lerc",LERC2D:"lerc2d",RAW:"raw",pbf:"pbf"});let v=r=class extends f.a{constructor(e){super(e),this.dpi=96,this.format=null,this.origin=null,this.minScale=0,this.maxScale=0,this.size=null,this.spatialReference=null}static create(e={size:256,spatialReference:d.a.WebMercator}){const t=e.resolutionFactor||1,i=e.scales,n=e.size||256,s=e.spatialReference||d.a.WebMercator;if(!Object(h.i)(s)){const e=[];if(i)for(let t=0;t<i.length;t++){const r=i[t];e.push({level:t,scale:r,resolution:r})}else{let t=5e-4;for(let i=23;i>=0;i--)e.unshift({level:i,scale:t,resolution:t}),t*=2}return new r({dpi:96,lods:e,origin:new m.a(0,0,s),size:[n,n],spatialReference:s})}const a=Object(h.d)(s),o=e.origin?new m.a({x:e.origin.x,y:e.origin.y,spatialReference:s}):new m.a(a?{x:a.origin[0],y:a.origin[1],spatialReference:s}:{x:0,y:0,spatialReference:s}),l=1/(39.37*Object(b.f)(s)*96),c=[];if(i)for(let r=0;r<i.length;r++){const e=i[r],t=e*l;c.push({level:r,scale:e,resolution:t})}else{let e=Object(h.f)(s)?512/n*591657527.5917094:256/n*591657527.591555;const i=Math.ceil(24/t);c.push({level:0,scale:e,resolution:e*l});for(let r=1;r<i;r++){const i=e/2**t,n=i*l;c.push({level:r,scale:i,resolution:n}),e=i}}return new r({dpi:96,lods:c,origin:o,size:[n,n],spatialReference:s})}get isWrappable(){const{spatialReference:e,origin:t}=this;if(e&&t){const i=Object(h.d)(e);return e.isWrappable&&Math.abs(i.origin[0]-t.x)<=i.dx}return!1}readOrigin(e,t){return m.a.fromJSON({spatialReference:t.spatialReference,...e})}set lods(e){let t=0,i=0;const r=[];this._levelToLOD={},e&&(t=-1/0,i=1/0,e.forEach((e=>{r.push(e.scale),t=e.scale>t?e.scale:t,i=e.scale<i?e.scale:i,this._levelToLOD[e.level]=e}))),this._set("scales",r),this._set("minScale",t),this._set("maxScale",i),this._set("lods",e),this._initializeUpsampleLevels()}readSize(e,t){return[t.cols,t.rows]}writeSize(e,t){t.cols=e[0],t.rows=e[0]}zoomToScale(e){const t=this.scales;if(e<=0)return t[0];if(e>=t.length)return t[t.length-1];{const i=Math.round(e-.5),r=Math.round(e);return t[r]+(r-e)*(t[i]-t[r])}}scaleToZoom(e){const t=this.scales,i=t.length-1;let r=0;for(;r<i;r++){const i=t[r],n=t[r+1];if(i<=e)return r;if(n===e)return r+1;if(i>e&&n<e)return r+1-(e-n)/(i-n)}return r}snapScale(e,t=.95){const i=this.scaleToZoom(e);return i%Math.floor(i)>=t?this.zoomToScale(Math.ceil(i)):this.zoomToScale(Math.floor(i))}tileAt(e,t,i,r){const n=this.lodAt(e);if(!n)return null;let s,a;if("number"==typeof t)s=t,a=i;else if(Object(h.c)(t.spatialReference,this.spatialReference))s=t.x,a=t.y,r=i;else{const e=Object(p.d)(t,this.spatialReference);if(!e)return null;s=e.x,a=e.y,r=i}const o=n.resolution*this.size[0],l=n.resolution*this.size[1];return r||(r={id:null,level:0,row:0,col:0,extent:Object(y.i)()}),r.level=e,r.row=Math.floor((this.origin.y-a)/l+.001),r.col=Math.floor((s-this.origin.x)/o+.001),this.updateTileInfo(r),r}updateTileInfo(e,t=0){let i=this.lodAt(e.level);if(!i&&1===t){const t=this.lods[this.lods.length-1];t.level<e.level&&(i=t)}if(!i)return;const r=e.level-i.level,n=i.resolution*this.size[0]/2**r,s=i.resolution*this.size[1]/2**r;e.id=`${e.level}/${e.row}/${e.col}`,e.extent||(e.extent=Object(y.i)()),e.extent[0]=this.origin.x+e.col*n,e.extent[1]=this.origin.y-(e.row+1)*s,e.extent[2]=e.extent[0]+n,e.extent[3]=e.extent[1]+s}upsampleTile(e){const t=this._upsampleLevels[e.level];return!(!t||-1===t.parentLevel)&&(e.level=t.parentLevel,e.row=Math.floor(e.row/t.factor+.001),e.col=Math.floor(e.col/t.factor+.001),this.updateTileInfo(e),!0)}getTileBounds(e,t){const{resolution:i}=this.lodAt(t.level),r=i*this.size[0],n=i*this.size[1];return e[0]=this.origin.x+t.col*r,e[1]=this.origin.y-(t.row+1)*n,e[2]=e[0]+r,e[3]=e[1]+n,e}lodAt(e){return this._levelToLOD&&this._levelToLOD[e]||null}clone(){return r.fromJSON(this.write({}))}_initializeUpsampleLevels(){const e=this.lods;this._upsampleLevels=[];let t=null;for(let i=0;i<e.length;i++){const r=e[i];this._upsampleLevels[r.level]={parentLevel:t?t.level:-1,factor:t?t.resolution/r.resolution:0},t=r}}};Object(n.a)([Object(a.b)({type:Number,json:{write:!0}})],v.prototype,"compressionQuality",void 0),Object(n.a)([Object(a.b)({type:Number,json:{write:!0}})],v.prototype,"dpi",void 0),Object(n.a)([Object(a.b)({type:String,json:{read:O.read,write:O.write,origins:{"web-scene":{read:!1,write:!1}}}})],v.prototype,"format",void 0),Object(n.a)([Object(a.b)({readOnly:!0})],v.prototype,"isWrappable",null),Object(n.a)([Object(a.b)({type:m.a,json:{write:!0}})],v.prototype,"origin",void 0),Object(n.a)([Object(l.a)("origin")],v.prototype,"readOrigin",null),Object(n.a)([Object(a.b)({type:[g.a],value:null,json:{write:!0}})],v.prototype,"lods",null),Object(n.a)([Object(a.b)({readOnly:!0})],v.prototype,"minScale",void 0),Object(n.a)([Object(a.b)({readOnly:!0})],v.prototype,"maxScale",void 0),Object(n.a)([Object(a.b)({readOnly:!0})],v.prototype,"scales",void 0),Object(n.a)([Object(a.b)({cast:e=>Array.isArray(e)?e:"number"==typeof e?[e,e]:[256,256]})],v.prototype,"size",void 0),Object(n.a)([Object(l.a)("size",["rows","cols"])],v.prototype,"readSize",null),Object(n.a)([Object(u.a)("size",{cols:{type:s.a},rows:{type:s.a}})],v.prototype,"writeSize",null),Object(n.a)([Object(a.b)({type:d.a,json:{write:!0}})],v.prototype,"spatialReference",void 0),v=r=Object(n.a)([Object(c.a)("esri.layers.support.TileInfo")],v);var _=v;t.a=_},505:function(e,t,i){"use strict";var r,n=i(131),s=(i(129),i(130),i(137)),a=i(134),o=i(133),l=(i(132),i(135),i(136),i(139));let c=r=class extends l.a{constructor(e){super(e),this.level=0,this.levelValue=null,this.resolution=0,this.scale=0}clone(){return new r({level:this.level,levelValue:this.levelValue,resolution:this.resolution,scale:this.scale})}};Object(n.a)([Object(a.b)({type:s.a,json:{write:!0}})],c.prototype,"level",void 0),Object(n.a)([Object(a.b)({type:String,json:{write:!0}})],c.prototype,"levelValue",void 0),Object(n.a)([Object(a.b)({type:Number,json:{write:!0}})],c.prototype,"resolution",void 0),Object(n.a)([Object(a.b)({type:Number,json:{write:!0}})],c.prototype,"scale",void 0),c=r=Object(n.a)([Object(o.a)("esri.layers.support.LOD")],c);var u=c;t.a=u},638:function(e,t,i){"use strict";i.d(t,"a",(function(){return w}));var r=i(131),n=(i(129),i(130)),s=i(134),a=i(170),o=i(133),l=i(140),c=i(132),u=(i(135),i(136),i(226)),f=i(142),h=i(297),d=i(146),p=i(151),m=i(166),b=i(161),y=i(293),g=i(141),O=i(255);class v{constructor(){this.location={left:0,top:0,width:0,height:0},this._allAvailability="unknown",this.byteSize=40}getAvailability(e,t){if("unknown"!==this._allAvailability)return this._allAvailability;const i=(e-this.location.top)*this.location.width+(t-this.location.left),r=i%8,n=i>>3,s=this._tileAvailabilityBitSet;return n<0||n>s.length?"unknown":s[n]&1<<r?"available":"unavailable"}_updateFromData(e){const t=this.location.width,i=this.location.height;let r=!0,n=!0;const s=Math.ceil(t*i/8),a=new Uint8Array(s);let o=0;for(let l=0;l<e.length;l++){const t=l%8;e[l]?(n=!1,a[o]|=1<<t):r=!1,7===t&&++o}n?this._allAvailability="unavailable":r?this._allAvailability="available":(this._allAvailability="unknown",this._tileAvailabilityBitSet=a,this.byteSize+=a.length)}static fromDefinition(e,t){const i=e.service.request||p.default,{row:r,col:n,width:s,height:a}=e,o={query:{f:"json"}};return t=t?{...o,...t}:o,i(function(e){let t;if("vector-tile"===e.service.type)t=`${e.service.url}/tilemap/${e.level}/${e.row}/${e.col}/${e.width}/${e.height}`;else{const i=e.service.tileServers;t=`${i&&i.length?i[e.row%i.length]:e.service.url}/tilemap/${e.level}/${e.row}/${e.col}/${e.width}/${e.height}`}const i=e.service.query;return i&&(t=`${t}?${i}`),t}(e),t).then((e=>e.data)).catch((e=>{if(e&&e.details&&422===e.details.httpStatus)return{location:{top:r,left:n,width:s,height:a},valid:!0,data:Object(O.b)(s*a,0)};throw e})).then((e=>{if(e.location&&(e.location.top!==r||e.location.left!==n||e.location.width!==s||e.location.height!==a))throw new l.a("tilemap:location-mismatch","Tilemap response for different location than requested",{response:e,definition:{top:r,left:n,width:s,height:a}});return v.fromJSON(e)}))}static fromJSON(e){v.validateJSON(e);const t=new v;return t.location=Object.freeze(Object(g.a)(e.location)),t._updateFromData(e.data),Object.freeze(t)}static validateJSON(e){if(!e||!e.location)throw new l.a("tilemap:missing-location","Location missing from tilemap response");if(!1===e.valid)throw new l.a("tilemap:invalid","Tilemap response was marked as invalid");if(!e.data)throw new l.a("tilemap:missing-data","Data missing from tilemap response");if(!Array.isArray(e.data))throw new l.a("tilemap:data-mismatch","Data must be an array of numbers");if(e.data.length!==e.location.width*e.location.height)throw new l.a("tilemap:data-mismatch","Number of data items does not match width/height of tilemap")}}function _(e){return`${e.level}/${e.row}/${e.col}/${e.width}/${e.height}`}var j;const S=n.a.getLogger("esri.layers.support.TilemapCache");let w=j=class extends d.a{constructor(e){super(e),this._handles=new m.a,this._pendingTilemapRequests={},this._availableLevels={},this.levels=5,this.cacheByteSize=2097152,this.request=p.default,this._prefetchingEnabled=!0}initialize(){this._tilemapCache=new y.a(this.cacheByteSize),this._handles.add([this.watch(["layer.parsedUrl","layer.tileServers?"],(()=>this._initializeTilemapDefinition())),Object(b.a)(this,"layer.tileInfo.lods",(e=>this._initializeAvailableLevels(e)),!0)]),this._initializeTilemapDefinition()}destroy(){this._handles&&(this._handles.destroy(),this._handles=null)}castLevels(e){return e<=2?(S.error("Minimum levels for Tilemap is 3, but got ",e),3):e}get size(){return 1<<this.levels}fetchTilemap(e,t,i,r){if(!this._availableLevels[e])return Promise.reject(new l.a("tilemap-cache:level-unavailable",`Level ${e} is unavailable in the service`));const n=this._tmpTilemapDefinition,s=this._tilemapFromCache(e,t,i,n);if(s)return Promise.resolve(s);const a=r&&r.signal;return r={...r,signal:null},new Promise(((e,t)=>{Object(f.p)(a,(()=>t(Object(f.e)())));const i=_(n);let s=this._pendingTilemapRequests[i];if(!s){s=v.fromDefinition(n,r).then((e=>(this._tilemapCache.put(i,e,e.byteSize),e)));const e=()=>delete this._pendingTilemapRequests[i];this._pendingTilemapRequests[i]=s,s.then(e,e)}s.then(e,t)}))}getAvailability(e,t,i){if(!this._availableLevels[e])return"unavailable";const r=this._tilemapFromCache(e,t,i,this._tmpTilemapDefinition);return r?r.getAvailability(t,i):"unknown"}getAvailabilityUpsample(e,t,i,r){r.level=e,r.row=t,r.col=i;const n=this.layer.tileInfo;for(n.updateTileInfo(r);;){const e=this.getAvailability(r.level,r.row,r.col);if("unavailable"!==e)return e;if(!n.upsampleTile(r))return"unavailable"}}fetchAvailability(e,t,i,r){return this._availableLevels[e]?this.fetchTilemap(e,t,i,r).catch((e=>e)).then((r=>{if(r instanceof v){const n=r.getAvailability(t,i);return"unavailable"===n?Promise.reject(new l.a("tile-map:tile-unavailable","Tile is not available",{level:e,row:t,col:i})):n}if(Object(f.m)(r))throw r;return"unknown"})):Promise.reject(new l.a("tilemap-cache:level-unavailable",`Level ${e} is unavailable in the service`))}fetchAvailabilityUpsample(e,t,i,r,n){r.level=e,r.row=t,r.col=i;const s=this.layer.tileInfo;s.updateTileInfo(r);const a=this.fetchAvailability(e,t,i,n).catch((e=>{if(Object(f.m)(e))throw e;if(s.upsampleTile(r))return this.fetchAvailabilityUpsample(r.level,r.row,r.col,r);throw e}));return this._fetchAvailabilityUpsamplePrefetch(r.id,e,t,i,n,a),a}async _fetchAvailabilityUpsamplePrefetch(e,t,i,r,n,s){if(!this._prefetchingEnabled)return;const a=`prefetch-${e}`;if(this._handles.has(a))return;const o=Object(f.d)();s.then((()=>o.abort()),(()=>o.abort()));let l=!1;const c={remove(){l||(l=!0,o.abort())}};if(this._handles.add(c,a),await Object(h.c)(10,o.signal).catch((()=>{})),l||(l=!0,this._handles.remove(a)),Object(f.n)(o))return;const u={id:e,level:t,row:i,col:r},d={...n,signal:o.signal},p=this.layer.tileInfo;for(let f=0;j._prefetches.length<j._maxPrefetch&&p.upsampleTile(u);++f){const e=this.fetchAvailability(u.level,u.row,u.col,d);j._prefetches.push(e);const t=()=>{j._prefetches.removeUnordered(e)};e.then(t,t)}}_initializeTilemapDefinition(){if(!this.layer.parsedUrl)return;const e=this.layer.parsedUrl,t=e.query;this._tilemapCache.clear(),this._tmpTilemapDefinition={service:{url:e.path,query:t?Object(c.D)(t):null,tileServers:this.layer.tileServers,request:this.request,type:this.layer.type},width:this.size,height:this.size,level:0,row:0,col:0}}_tilemapFromCache(e,t,i,r){r.level=e,r.row=t-t%this.size,r.col=i-i%this.size;const n=_(r);return this._tilemapCache.get(n)}_initializeAvailableLevels(e){this._availableLevels={},e&&e.forEach((e=>this._availableLevels[e.level]=!0))}get test(){const e=this;return{get prefetchingEnabled(){return e._prefetchingEnabled},set prefetchingEnabled(t){e._prefetchingEnabled=t},hasTilemap:(t,i,r)=>!!e._tilemapFromCache(t,i,r,e._tmpTilemapDefinition)}}};w._maxPrefetch=4,w._prefetches=new u.a({initialSize:j._maxPrefetch}),Object(r.a)([Object(s.b)({constructOnly:!0,type:Number})],w.prototype,"levels",void 0),Object(r.a)([Object(a.a)("levels")],w.prototype,"castLevels",null),Object(r.a)([Object(s.b)({readOnly:!0,type:Number})],w.prototype,"size",null),Object(r.a)([Object(s.b)({constructOnly:!0,type:Number})],w.prototype,"cacheByteSize",void 0),Object(r.a)([Object(s.b)({constructOnly:!0})],w.prototype,"layer",void 0),Object(r.a)([Object(s.b)({constructOnly:!0})],w.prototype,"request",void 0),w=j=Object(r.a)([Object(o.a)("esri.layers.support.TilemapCache")],w)},729:function(e,t,i){"use strict";i.d(t,"a",(function(){return u}));var r=i(131),n=(i(129),i(130),i(137),i(134)),s=i(144),a=i(133),o=(i(132),i(135),i(136),i(145)),l=(i(150),i(730)),c=i(638);const u=e=>{let t=class extends e{constructor(){super(...arguments),this.copyright=null,this.minScale=0,this.maxScale=0,this.spatialReference=null,this.tileInfo=null,this.tilemapCache=null}readMinScale(e,t){return null!=t.minLOD&&null!=t.maxLOD?e:0}readMaxScale(e,t){return null!=t.minLOD&&null!=t.maxLOD?e:0}get supportsBlankTile(){return this.version>=10.2}readTilemapCache(e,t){return t.capabilities&&t.capabilities.indexOf("Tilemap")>-1?new c.a({layer:this}):null}};return Object(r.a)([Object(n.b)({json:{read:{source:"copyrightText"}}})],t.prototype,"copyright",void 0),Object(r.a)([Object(n.b)()],t.prototype,"minScale",void 0),Object(r.a)([Object(s.a)("service","minScale")],t.prototype,"readMinScale",null),Object(r.a)([Object(n.b)()],t.prototype,"maxScale",void 0),Object(r.a)([Object(s.a)("service","maxScale")],t.prototype,"readMaxScale",null),Object(r.a)([Object(n.b)({type:o.a})],t.prototype,"spatialReference",void 0),Object(r.a)([Object(n.b)({readOnly:!0})],t.prototype,"supportsBlankTile",null),Object(r.a)([Object(n.b)(l.b)],t.prototype,"tileInfo",void 0),Object(r.a)([Object(n.b)()],t.prototype,"tilemapCache",void 0),Object(r.a)([Object(s.a)("service","tilemapCache",["capabilities"])],t.prototype,"readTilemapCache",null),Object(r.a)([Object(n.b)()],t.prototype,"version",void 0),t=Object(r.a)([Object(a.a)("esri.layers.mixins.ArcGISCachedService")],t),t}},730:function(e,t,i){"use strict";i.d(t,"a",(function(){return s})),i.d(t,"b",(function(){return n}));var r=i(381);const n={type:r.a,json:{origins:{service:{read:{source:["tileInfo","minScale","maxScale","minLOD","maxLOD"],reader:s}}}}};function s(e,t,i,n){if(!e)return null;const{minScale:s,maxScale:a,minLOD:o,maxLOD:l}=t;if(null!=o&&null!=l)return n&&n.ignoreMinMaxLOD?r.a.fromJSON(e):r.a.fromJSON({...e,lods:e.lods.filter((({level:e})=>null!=e&&e>=o&&e<=l))});if(0!==s&&0!==a){const t=e=>Math.round(1e4*e)/1e4,i=s?t(s):1/0,n=a?t(a):-1/0;return r.a.fromJSON({...e,lods:e.lods.filter((e=>{const r=t(e.scale);return r<=i&&r>=n}))})}return r.a.fromJSON(e)}}}]);
//# sourceMappingURL=25.df41997d.chunk.js.map