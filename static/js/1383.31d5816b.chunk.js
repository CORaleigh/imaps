"use strict";(globalThis.webpackChunkimaps=globalThis.webpackChunkimaps||[]).push([[1383],{58971:(n,e,t)=>{t.d(e,{G6:()=>F,Ie:()=>z,J9:()=>x,RF:()=>g,U1:()=>T,vY:()=>u,ym:()=>V});var l=t(92026),a=t(77981);const i=(n,e,t)=>[e,t],r=(n,e,t)=>[e,t,n[2]],o=(n,e,t)=>[e,t,n[2],n[3]];function u(n){return n?{originPosition:"upper-left"===n.originPosition?"upperLeft":"lower-left"===n.originPosition?"lowerLeft":n.originPosition,scale:n.tolerance?[n.tolerance,n.tolerance]:[1,1],translate:(0,l.pC)(n.extent)?[n.extent.xmin,n.extent.ymax]:[0,0]}:null}function s(n,e){let{scale:t,translate:l}=n;return Math.round((e-l[0])/t[0])}function c(n,e){let{scale:t,translate:l}=n;return Math.round((l[1]-e)/t[1])}function f(n,e,t){const l=[];let a,i,r,o;for(let u=0;u<t.length;u++){const f=t[u];u>0?(r=s(n,f[0]),o=c(n,f[1]),r===a&&o===i||(l.push(e(f,r-a,o-i)),a=r,i=o)):(a=s(n,f[0]),i=c(n,f[1]),l.push(e(f,a,i)))}return l.length>0?l:null}function m(n,e){let{scale:t,translate:l}=n;return e*t[0]+l[0]}function d(n,e){let{scale:t,translate:l}=n;return l[1]-e*t[1]}function p(n,e,t){const l=new Array(t.length);if(!t.length)return l;const[a,i]=n.scale;let r=m(n,t[0][0]),o=d(n,t[0][1]);l[0]=e(t[0],r,o);for(let u=1;u<t.length;u++){const n=t[u];r+=n[0]*a,o-=n[1]*i,l[u]=e(n,r,o)}return l}function h(n,e,t){const l=new Array(t.length);for(let a=0;a<t.length;a++)l[a]=p(n,e,t[a]);return l}function b(n,e,t,l,a){return e.points=function(n,e,t,l){return f(n,t?l?o:r:l?r:i,e)}(n,t.points,l,a)??[],e}function g(n,e,t,l,a){return e.x=s(n,t.x),e.y=c(n,t.y),e!==t&&(l&&(e.z=t.z),a&&(e.m=t.m)),e}function v(n,e,t,l,a){const u=function(n,e,t,l){const a=[],u=t?l?o:r:l?r:i;for(let i=0;i<e.length;i++){const t=f(n,u,e[i]);t&&t.length>=3&&a.push(t)}return a.length?a:null}(n,t.rings,l,a);return u?(e.rings=u,e):null}function y(n,e,t,l,a){const u=function(n,e,t,l){const a=[],u=t?l?o:r:l?r:i;for(let i=0;i<e.length;i++){const t=f(n,u,e[i]);t&&t.length>=2&&a.push(t)}return a.length?a:null}(n,t.paths,l,a);return u?(e.paths=u,e):null}function V(n,e){return n&&e?(0,a.wp)(e)?g(n,{},e,!1,!1):(0,a.l9)(e)?y(n,{},e,!1,!1):(0,a.oU)(e)?v(n,{},e,!1,!1):(0,a.aW)(e)?b(n,{},e,!1,!1):(0,a.YX)(e)?function(n,e,t,l,a){return e.xmin=s(n,t.xmin),e.ymin=c(n,t.ymin),e.xmax=s(n,t.xmax),e.ymax=c(n,t.ymax),e!==t&&(l&&(e.zmin=t.zmin,e.zmax=t.zmax),a&&(e.mmin=t.mmin,e.mmax=t.mmax)),e}(n,{},e,!1,!1):null:null}function x(n,e,t,a,u){return(0,l.pC)(t)&&(e.points=function(n,e,t,l){return p(n,t?l?o:r:l?r:i,e)}(n,t.points,a,u)),e}function T(n,e,t,a,i){return(0,l.Wi)(t)||(e.x=m(n,t.x),e.y=d(n,t.y),e!==t&&(a&&(e.z=t.z),i&&(e.m=t.m))),e}function z(n,e,t,a,u){return(0,l.pC)(t)&&(e.rings=function(n,e,t,l){return h(n,t?l?o:r:l?r:i,e)}(n,t.rings,a,u)),e}function F(n,e,t,a,u){return(0,l.pC)(t)&&(e.paths=function(n,e,t,l){return h(n,t?l?o:r:l?r:i,e)}(n,t.paths,a,u)),e}},96783:(n,e,t)=>{t.d(e,{Z:()=>m});var l=t(27366),a=t(43404),i=t(46784),r=t(49861),o=(t(25243),t(63780),t(27135)),u=t(69912);const s=new a.X({esriClassifyEqualInterval:"equal-interval",esriClassifyManual:"manual",esriClassifyNaturalBreaks:"natural-breaks",esriClassifyQuantile:"quantile",esriClassifyStandardDeviation:"standard-deviation",esriClassifyDefinedInterval:"defined-interval"}),c=new a.X({esriNormalizeByLog:"log",esriNormalizeByPercentOfTotal:"percent-of-total",esriNormalizeByField:"field"});let f=class extends i.wq{constructor(n){super(n),this.type="class-breaks-definition",this.breakCount=null,this.classificationField=null,this.classificationMethod=null,this.normalizationField=null,this.normalizationType=null}set standardDeviationInterval(n){"standard-deviation"===this.classificationMethod&&this._set("standardDeviationInterval",n)}set definedInterval(n){"defined-interval"===this.classificationMethod&&this._set("definedInterval",n)}};(0,l._)([(0,o.J)({classBreaksDef:"class-breaks-definition"})],f.prototype,"type",void 0),(0,l._)([(0,r.Cb)({json:{write:!0}})],f.prototype,"breakCount",void 0),(0,l._)([(0,r.Cb)({json:{write:!0}})],f.prototype,"classificationField",void 0),(0,l._)([(0,r.Cb)({type:String,json:{read:s.read,write:s.write}})],f.prototype,"classificationMethod",void 0),(0,l._)([(0,r.Cb)({json:{write:!0}})],f.prototype,"normalizationField",void 0),(0,l._)([(0,r.Cb)({json:{read:c.read,write:c.write}})],f.prototype,"normalizationType",void 0),(0,l._)([(0,r.Cb)({value:null,json:{write:!0}})],f.prototype,"standardDeviationInterval",null),(0,l._)([(0,r.Cb)({value:null,json:{write:!0}})],f.prototype,"definedInterval",null),f=(0,l._)([(0,u.j)("esri.rest.support.ClassBreaksDefinition")],f);const m=f},51905:(n,e,t)=>{t.d(e,{k:()=>i});const l=t(32718).Z.getLogger("esri.rest.support.generateRendererUtils");function a(n,e){return Number(n.toFixed(e))}function i(n){const{normalizationTotal:e}=n;return{classBreaks:r(n),normalizationTotal:e}}function r(n){const e=n.definition,{classificationMethod:t,normalizationType:l,definedInterval:i}=e,r=e.breakCount??1,c=[];let f=n.values;if(0===f.length)return[];f=f.sort(((n,e)=>n-e));const m=f[0],d=f[f.length-1];if("equal-interval"===t)if(f.length>=r){const n=(d-m)/r;let e=m;for(let t=1;t<r;t++){const i=a(m+t*n,6);c.push({minValue:e,maxValue:i,label:o(e,i,l)}),e=i}c.push({minValue:e,maxValue:d,label:o(e,d,l)})}else f.forEach((n=>{c.push({minValue:n,maxValue:n,label:o(n,n,l)})}));else if("natural-breaks"===t){const e=u(f),t=n.valueFrequency||e.valueFrequency,i=s(e.uniqueValues,t,r);let p=m;for(let n=1;n<r;n++)if(e.uniqueValues.length>n){const t=a(e.uniqueValues[i[n]],6);c.push({minValue:p,maxValue:t,label:o(p,t,l)}),p=t}c.push({minValue:p,maxValue:d,label:o(p,d,l)})}else if("quantile"===t)if(f.length>=r&&m!==d){let n=m,e=Math.ceil(f.length/r),t=0;for(let a=1;a<r;a++){let i=e+t-1;i>f.length&&(i=f.length-1),i<0&&(i=0),c.push({minValue:n,maxValue:f[i],label:o(n,f[i],l)}),n=f[i],t+=e,e=Math.ceil((f.length-t)/(r-a))}c.push({minValue:n,maxValue:d,label:o(n,d,l)})}else{let n=-1;for(let e=0;e<f.length;e++){const t=f[e];t!==n&&(n=t,c.push({minValue:n,maxValue:t,label:o(n,t,l)}),n=t)}}else if("standard-deviation"===t){const n=function(n){let e=0;for(let t=0;t<n.length;t++)e+=n[t];return e/=n.length,e}(f),e=function(n,e){let t=0;for(let l=0;l<n.length;l++){const a=n[l];t+=(a-e)*(a-e)}return t/=n.length,Math.sqrt(t)}(f,n);if(0===e)c.push({minValue:f[0],maxValue:f[0],label:o(f[0],f[0],l)});else{const t=function(n,e,t,l,a){let i=Math.max(l-n,e-l)/a/t;return i=i>=1?1:i>=.5?.5:.25,i}(m,d,r,n,e)*e;let i=0,u=m;for(let e=r;e>=1;e--){const r=a(n-(e-.5)*t,6);c.push({minValue:u,maxValue:r,label:o(u,r,l)}),u=r,i++}let s=a(n+.5*t,6);c.push({minValue:u,maxValue:s,label:o(u,s,l)}),u=s,i++;for(let e=1;e<=r;e++)s=i===2*r?d:a(n+(e+.5)*t,6),c.push({minValue:u,maxValue:s,label:o(u,s,l)}),u=s,i++}}else if("defined-interval"===t){if(!i)return c;const n=f[0],e=f[f.length-1],t=Math.ceil((e-n)/i);let r=n;for(let u=1;u<t;u++){const e=a(n+u*i,6);c.push({minValue:r,maxValue:e,label:o(r,e,l)}),r=e}c.push({minValue:r,maxValue:e,label:o(r,e,l)})}return c}function o(n,e,t){let l=null;return l=n===e?t&&"percent-of-total"===t?n+"%":n.toString():t&&"percent-of-total"===t?n+"% - "+e+"%":n+" - "+e,l}function u(n){const e=[],t=[];let l=Number.MIN_VALUE,a=1,i=-1;for(let r=0;r<n.length;r++){const o=n[r];o===l?(a++,t[i]=a):null!==o&&(e.push(o),l=o,a=1,t.push(a),i++)}return{uniqueValues:e,valueFrequency:t}}function s(n,e,t){const l=n.length,a=[];t>l&&(t=l);for(let r=0;r<t;r++)a.push(Math.round(r*l/t-1));a.push(l-1);let i=c(a,n,e,t);return function(n,e,t,l,a,i){let r=0,o=0,u=0,s=0,c=!0;for(let m=0;m<2&&c;m++){0===m&&(c=!1);for(let m=0;m<i-1;m++)for(;t[m+1]+1!==t[m+2];){t[m+1]=t[m+1]+1;const i=f(m,t,l,a);u=i.sbMean,r=i.sbSdcm;const d=f(m+1,t,l,a);if(s=d.sbMean,o=d.sbSdcm,!(r+o<e[m]+e[m+1])){t[m+1]=t[m+1]-1;break}e[m]=r,e[m+1]=o,n[m]=u,n[m+1]=s,c=!0}for(let m=i-1;m>0;m--)for(;t[m]!==t[m-1]+1;){t[m]=t[m]-1;const i=f(m-1,t,l,a);u=i.sbMean,r=i.sbSdcm;const d=f(m,t,l,a);if(s=d.sbMean,o=d.sbSdcm,!(r+o<e[m-1]+e[m])){t[m]=t[m]+1;break}e[m-1]=r,e[m]=o,n[m-1]=u,n[m]=s,c=!0}}return c}(i.mean,i.sdcm,a,n,e,t)&&(i=c(a,n,e,t)),a}function c(n,e,t,l){let a=[],i=[],r=[],o=0;const u=[],s=[];for(let p=0;p<l;p++){const l=f(p,n,e,t);u.push(l.sbMean),s.push(l.sbSdcm),o+=s[p]}let c,m=o,d=!0;for(;d||o<m;){d=!1,a=[];for(let e=0;e<l;e++)a.push(n[e]);for(let t=0;t<l;t++)for(let a=n[t]+1;a<=n[t+1];a++)if(c=e[a],t>0&&a!==n[t+1]&&Math.abs(c-u[t])>Math.abs(c-u[t-1]))n[t]=a;else if(t<l-1&&n[t]!==a-1&&Math.abs(c-u[t])>Math.abs(c-u[t+1])){n[t+1]=a-1;break}m=o,o=0,i=[],r=[];for(let a=0;a<l;a++){i.push(u[a]),r.push(s[a]);const l=f(a,n,e,t);u[a]=l.sbMean,s[a]=l.sbSdcm,o+=s[a]}}if(o>m){for(let e=0;e<l;e++)n[e]=a[e],u[e]=i[e],s[e]=r[e];o=m}return{mean:u,sdcm:s}}function f(n,e,t,a){let i=0,r=0;for(let l=e[n]+1;l<=e[n+1];l++){const n=a[l];i+=t[l]*n,r+=n}r<=0&&l.warn("Exception in Natural Breaks calculation");const o=i/r;let u=0;for(let l=e[n]+1;l<=e[n+1];l++)u+=a[l]*(t[l]-o)**2;return{sbMean:o,sbSdcm:u}}},71486:(n,e,t)=>{t.d(e,{DL:()=>F,F_:()=>g,G2:()=>T,H0:()=>c,Lq:()=>d,Qm:()=>V,S5:()=>s,XL:()=>m,eT:()=>v,fk:()=>x,i5:()=>f,oF:()=>M,wk:()=>u});var l=t(96783),a=t(51905);const i=/\s*(\+|-)?((\d+(\.\d+)?)|(\.\d+))\s*/gi,r=new Set(["esriFieldTypeInteger","esriFieldTypeSmallInteger","esriFieldTypeSingle","esriFieldTypeDouble"]),o=["min","max","avg","stddev","count","sum","variance","nullcount","median"];function u(n){return null==n||"string"==typeof n&&!n?"<Null>":n}function s(n){const e=null!=n.normalizationField||null!=n.normalizationType,t=null!=n.minValue||null!=n.maxValue,l=!!n.sqlExpression&&n.supportsSQLExpression;return!e&&!t&&!l}function c(n){const e=n.returnDistinct?[...new Set(n.values)]:n.values,t=e.filter((n=>null!=n)).length,l={count:t};return n.supportsNullCount&&(l.nullcount=e.length-t),n.percentileParams&&(l.median=m(e,n.percentileParams)),l}function f(n){const{values:e,useSampleStdDev:t,supportsNullCount:l}=n;let a=Number.POSITIVE_INFINITY,i=Number.NEGATIVE_INFINITY,r=null,o=null,u=null,s=null,c=0;const f=null==n.minValue?-1/0:n.minValue,d=null==n.maxValue?1/0:n.maxValue;for(const m of e)Number.isFinite(m)?m>=f&&m<=d&&(r=null===r?m:r+m,a=Math.min(a,m),i=Math.max(i,m),c++):"string"==typeof m&&c++;if(c&&null!=r){o=r/c;let n=0;for(const t of e)Number.isFinite(t)&&t>=f&&t<=d&&(n+=(t-o)**2);s=t?c>1?n/(c-1):0:c>0?n/c:0,u=Math.sqrt(s)}else a=null,i=null;const p={avg:o,count:c,max:i,min:a,stddev:u,sum:r,variance:s};return l&&(p.nullcount=e.length-c),n.percentileParams&&(p.median=m(e,n.percentileParams)),p}function m(n,e){const{fieldType:t,value:l,orderBy:a,isDiscrete:i}=e,r=d(t,"desc"===a);if(0===(n=[...n].filter((n=>null!=n)).sort(((n,e)=>r(n,e)))).length)return null;if(l<=0)return n[0];if(l>=1)return n[n.length-1];const o=(n.length-1)*l,u=Math.floor(o),s=u+1,c=o%1,f=n[u],m=n[s];return s>=n.length||i||"string"==typeof f||"string"==typeof m?f:f*(1-c)+m*c}function d(n,e){const t=e?1:-1,l=function(n){return n?(n,e)=>{const t=p(n,e,!0);return null!=t?t:e-n}:(n,e)=>{const t=p(n,e,!1);return null!=t?t:n-e}}(e),a=h(e);if(!n||!["esriFieldTypeDate","esriFieldTypeString","esriFieldTypeGUID","esriFieldTypeGlobalID",...r].includes(n))return(n,e)=>"number"==typeof n&&"number"==typeof e?l(n,e):"string"==typeof n&&"string"==typeof e?a(n,e):t;if("esriFieldTypeDate"===n)return(n,e)=>{const a=new Date(n).getTime(),i=new Date(e).getTime();return isNaN(a)||isNaN(i)?t:l(a,i)};if(r.has(n))return(n,e)=>l(n,e);if("esriFieldTypeString"===n)return(n,e)=>a(n,e);if("esriFieldTypeGUID"===n||"esriFieldTypeGlobalID"===n){const n=h(e);return(e,t)=>n(b(e),b(t))}return e?(n,e)=>1:(n,e)=>-1}function p(n,e,t){if(t){if(null==n)return null==e?0:1;if(null==e)return-1}else{if(null==n)return null==e?0:-1;if(null==e)return 1}return null}function h(n){return n?(n,e)=>{const t=p(n,e,!0);return null!=t?t:(n=n.toUpperCase())>(e=e.toUpperCase())?-1:n<e?1:0}:(n,e)=>{const t=p(n,e,!1);return null!=t?t:(n=n.toUpperCase())<(e=e.toUpperCase())?-1:n>e?1:0}}function b(n){return n.substr(24,12)+n.substr(19,4)+n.substr(16,2)+n.substr(14,2)+n.substr(11,2)+n.substr(9,2)+n.substr(6,2)+n.substr(4,2)+n.substr(2,2)+n.substr(0,2)}function g(n,e){let t;for(t in n)o.includes(t)&&(Number.isFinite(n[t])||(n[t]=null));return e?(["avg","stddev","variance"].forEach((e=>{null!=n[e]&&(n[e]=Math.ceil(n[e]))})),n):n}function v(n){const e={};for(let t of n)(null==t||"string"==typeof t&&""===t.trim())&&(t=null),null==e[t]?e[t]={count:1,data:t}:e[t].count++;return{count:e}}function y(n){return"coded-value"!==n?.type?[]:n.codedValues.map((n=>n.code))}function V(n,e,t,l){const a=n.count,i=[];if(t&&e){const n=[],t=y(e[0]);for(const a of t)if(e[1]){const t=y(e[1]);for(const i of t)if(e[2]){const t=y(e[2]);for(const e of t)n.push(`${u(a)}${l}${u(i)}${l}${u(e)}`)}else n.push(`${u(a)}${l}${u(i)}`)}else n.push(a);for(const e of n)a.hasOwnProperty(e)||(a[e]={data:e,count:0})}for(const r in a){const n=a[r];i.push({value:n.data,count:n.count,label:n.label})}return{uniqueValueInfos:i}}function x(n,e,t,l){let a=null;switch(e){case"log":0!==n&&(a=Math.log(n)*Math.LOG10E);break;case"percent-of-total":Number.isFinite(l)&&0!==l&&(a=n/l*100);break;case"field":Number.isFinite(t)&&0!==t&&(a=n/t);break;case"natural-log":n>0&&(a=Math.log(n));break;case"square-root":n>0&&(a=n**.5)}return a}function T(n,e){const t=z({field:e.field,normalizationType:e.normalizationType,normalizationField:e.normalizationField,classificationMethod:e.classificationMethod,standardDeviationInterval:e.standardDeviationInterval,breakCount:e.numClasses||5});return n=function(n,e,t){const l=e??-1/0,a=t??1/0;return n.filter((n=>Number.isFinite(n)&&n>=l&&n<=a))}(n,e.minValue,e.maxValue),(0,a.k)({definition:t,values:n,normalizationTotal:e.normalizationTotal})}function z(n){const{breakCount:e,field:t,normalizationField:a,normalizationType:i}=n,r=n.classificationMethod||"equal-interval",o="standard-deviation"===r?n.standardDeviationInterval||1:void 0;return new l.Z({breakCount:e,classificationField:t,classificationMethod:r,normalizationField:"field"===i?a:void 0,normalizationType:i,standardDeviationInterval:o})}function F(n,e){let t=n.classBreaks;const l=t.length,a=t[0].minValue,r=t[l-1].maxValue,o="standard-deviation"===e,u=i;return t=t.map((n=>{const e=n.label,t={minValue:n.minValue,maxValue:n.maxValue,label:e};if(o&&e){const n=e.match(u)?.map((n=>+n.trim()))??[];2===n.length?(t.minStdDev=n[0],t.maxStdDev=n[1],n[0]<0&&n[1]>0&&(t.hasAvg=!0)):1===n.length&&(e.includes("<")?(t.minStdDev=null,t.maxStdDev=n[0]):e.includes(">")&&(t.minStdDev=n[0],t.maxStdDev=null))}return t})),{minValue:a,maxValue:r,classBreakInfos:t,normalizationTotal:n.normalizationTotal}}function M(n,e){const t=C(n,e),l=t.intervals,a=t.min??0,i=t.max??0,r=l.map(((n,e)=>({minValue:l[e][0],maxValue:l[e][1],count:0})));for(const o of n)if(null!=o&&o>=a&&o<=i){const n=k(l,o);n>-1&&r[n].count++}return{bins:r,minValue:a,maxValue:i,normalizationTotal:e.normalizationTotal}}function C(n,e){const{field:t,classificationMethod:l,standardDeviationInterval:a,normalizationType:i,normalizationField:r,normalizationTotal:o,minValue:u,maxValue:c}=e,m=e.numBins||10;let d=null,p=null,h=null;if(l&&"equal-interval"!==l||i){const{classBreaks:e}=T(n,{field:t,normalizationType:i,normalizationField:r,normalizationTotal:o,classificationMethod:l,standardDeviationInterval:a,minValue:u,maxValue:c,numClasses:m});d=e[0].minValue,p=e[e.length-1].maxValue,h=e.map((n=>[n.minValue,n.maxValue]))}else{if(null!=u&&null!=c)d=u,p=c;else{const e=f({values:n,minValue:u,maxValue:c,useSampleStdDev:!i,supportsNullCount:s({normalizationType:i,normalizationField:r,minValue:u,maxValue:c})});d=e.min??null,p=e.max??null}h=function(n,e,t){const l=(e-n)/t,a=[];let i,r=n;for(let o=1;o<=t;o++)i=r+l,i=Number(i.toFixed(16)),a.push([r,o===t?e:i]),r=i;return a}(d??0,p??0,m)}return{min:d,max:p,intervals:h}}function k(n,e){let t=-1;for(let l=n.length-1;l>=0;l--)if(e>=n[l][0]){t=l;break}return t}}}]);
//# sourceMappingURL=1383.31d5816b.chunk.js.map