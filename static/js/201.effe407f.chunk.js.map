{"version":3,"sources":["../node_modules/@arcgis/core/layers/support/arcgisLayerUrl.js","../node_modules/@arcgis/core/layers/support/arcgisLayers.js","../node_modules/@arcgis/core/layers/support/lazyLayerLoader.js"],"names":["u","a","RegExp","join","c","f","p","e","test","d","t","r","n","path","match","s","i","o","l","indexOf","title","v","slice","serverType","sublayer","parseInt","url","m","serviceUrl","sublayerId","Number","replace","toUpperCase","h","push","length","toLowerCase","w","y","g","logger","layer","layerId","nonStandardUrlAllowed","O","toString","S","C","authority","properties","customParameters","sublayerIds","layerOrTableId","sourceJSON","Constructor","default","parsedUrl","find","id","sublayerTitleMode","forEach","sublayerInfos","add","tableIds","tableInfos","tables","then","tileInfo","format","cacheType","Point","IntegratedMesh","PointCloud","Building","Array","isArray","layers","layerType","FeatureServer","StreamServer","VectorTileServer","I","FeatureLayer","SceneLayer","layerInfos","layerIds","b","type","hasOwnProperty","name","layersJSON","serviceJSON","map","reverse","filter","currentVersion","responseType","query","data","BingMapsLayer","BuildingSceneLayer","CSVLayer","ElevationLayer","GroupLayer","GeoRSSLayer","ImageryLayer","ImageryTileLayer","IntegratedMeshLayer","KMLLayer","MapImageLayer","MapNotesLayer","OpenStreetMapLayer","PointCloudLayer","RouteLayer","StreamLayer","TileLayer","UnknownLayer","UnsupportedLayer","VectorTileLayer","WebTileLayer","WMSLayer","WMTSLayer"],"mappings":"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","file":"static/js/201.effe407f.chunk.js","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{isSome as e}from\"../../core/maybe.js\";import{urlToObject as r,removeTrailingSlash as t,removeQueryParameters as n,join as s,Url as i,makeAbsolute as o}from\"../../core/urlUtils.js\";import{w as l}from\"../../chunks/persistableUrlUtils.js\";const u=[\"MapServer\",\"ImageServer\",\"FeatureServer\",\"SceneServer\",\"StreamServer\",\"VectorTileServer\"],a=new RegExp(`^((?:https?:)?\\\\/\\\\/\\\\S+?\\\\/rest\\\\/services\\\\/(.+?)\\\\/(${u.join(\"|\")}))(?:\\\\/(?:layers\\\\/)?(\\\\d+))?`,\"i\"),c=new RegExp(`^((?:https?:)?\\\\/\\\\/\\\\S+?\\\\/([^\\\\/\\\\n]+)\\\\/(${u.join(\"|\")}))(?:\\\\/(?:layers\\\\/)?(\\\\d+))?`,\"i\"),f=/(.*)\\/(\\d+)\\/?$/i;function p(e){return!!a.test(e)}function d(e){const t=r(e),n=t.path.match(a)||t.path.match(c);if(!n)return null;const[,s,i,o,l]=n,u=i.indexOf(\"/\");return{title:v(-1!==u?i.slice(u+1):i),serverType:o,sublayer:null!=l&&\"\"!==l?parseInt(l,10):null,url:{path:s}}}function m(e){const t=r(e).path.match(f);return t?{serviceUrl:t[1],sublayerId:Number(t[2])}:null}function v(e){return(e=e.replace(/\\s*[/_]+\\s*/g,\" \"))[0].toUpperCase()+e.slice(1)}function h(r,t){const n=[];if(r){const t=d(r);e(t)&&t.title&&n.push(t.title)}if(t){const e=v(t);n.push(e)}if(2===n.length){if(-1!==n[0].toLowerCase().indexOf(n[1].toLowerCase()))return n[0];if(-1!==n[1].toLowerCase().indexOf(n[0].toLowerCase()))return n[1]}return n.join(\" - \")}function w(e){if(!e)return!1;const r=\".arcgis.com/\",t=\"//services\",n=\"//tiles\",s=\"//features\",i=-1!==(e=e.toLowerCase()).indexOf(r),o=-1!==e.indexOf(t)||-1!==e.indexOf(n)||-1!==e.indexOf(s);return i&&o}function x(e,r){return r&&e&&-1!==e.toLowerCase().indexOf(r.toLowerCase())}function y(e,r){return e?t(n(e,r)):e}function g(s){let{url:i}=s;if(!i)return{url:i};i=n(i,s.logger);const o=r(i),l=d(o.path);let u;if(e(l))null!=l.sublayer&&null==s.layer.layerId&&(u=l.sublayer),i=l.url.path;else if(s.nonStandardUrlAllowed){const r=m(o.path);e(r)&&(i=r.serviceUrl,u=r.sublayerId)}return{url:t(i),layerId:u}}function O(e,r,t,n,i){l(r,n,\"url\",i),n.url&&null!=e.layerId&&(n.url=s(n.url,t,e.layerId.toString()))}function S(e){if(!e)return!1;const r=e.toLowerCase(),t=-1!==r.indexOf(\"/services/\"),n=-1!==r.indexOf(\"/mapserver/wmsserver\"),s=-1!==r.indexOf(\"/imageserver/wmsserver\"),i=-1!==r.indexOf(\"/wmsserver\");return t&&(n||s||i)}function C(e){if(!e)return!1;const r=new i(o(e)).authority.toLowerCase();return\"server.arcgisonline.com\"===r||\"services.arcgisonline.com\"===r}export{v as cleanTitle,p as isArcGISUrl,w as isHostedAgolService,x as isHostedSecuredProxyService,C as isServerOrServicesAGOLUrl,S as isWmsServer,d as parse,m as parseNonStandardSublayerUrl,y as sanitizeUrl,g as sanitizeUrlWithLayerId,u as serverTypes,h as titleFromUrlAndName,O as writeUrlWithLayerId};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{isNone as e,isSome as r}from\"../../core/maybe.js\";import a from\"../../core/Error.js\";import{getFilename as t,urlToObject as l}from\"../../core/urlUtils.js\";import n from\"../../request.js\";import{parse as s,parseNonStandardSublayerUrl as o}from\"./arcgisLayerUrl.js\";import{layerLookupMap as u}from\"./lazyLayerLoader.js\";async function i(e){var r;const a=null==(r=e.properties)?void 0:r.customParameters,t=await d(e.url,a),l={...e.properties,url:e.url};if(!t.sublayerIds)return null!=t.layerOrTableId&&(l.layerId=t.layerOrTableId,l.sourceJSON=t.sourceJSON),new t.Constructor(l);const n=new(0,(await import(\"../GroupLayer.js\")).default)({title:t.parsedUrl.title});return c(n,t,l),n}function y(e,r){return e?e.find((e=>e.id===r)):null}function c(e,a,t){function l(e,l){const n={...t,layerId:e,sublayerTitleMode:\"service-name\"};return r(l)&&(n.sourceJSON=l),new a.Constructor(n)}a.sublayerIds.forEach((r=>{const t=l(r,y(a.sublayerInfos,r));e.add(t)})),a.tableIds.forEach((r=>{const t=l(r,y(a.tableInfos,r));e.tables.add(t)}))}async function d(r,t){let l=s(r);if(e(l)&&(l=await f(r,t)),e(l))throw new a(\"arcgis-layers:url-mismatch\",\"The url '${url}' is not a valid arcgis resource\",{url:r});const{serverType:n,sublayer:o}=l;let u;const i={FeatureServer:\"FeatureLayer\",StreamServer:\"StreamLayer\",VectorTileServer:\"VectorTileLayer\"};switch(n){case\"MapServer\":u=null!=o?\"FeatureLayer\":m(r,t).then((e=>e?\"TileLayer\":\"MapImageLayer\"));break;case\"ImageServer\":u=S(r,t).then((e=>{const r=e.tileInfo&&e.tileInfo.format;return e.tileInfo?!r||\"LERC\"!==r.toUpperCase()||e.cacheType&&\"elevation\"!==e.cacheType.toLowerCase()?\"ImageryTileLayer\":\"ElevationLayer\":\"ImageryLayer\"}));break;case\"SceneServer\":u=S(l.url.path,t).then((e=>{const r={Point:\"SceneLayer\",\"3DObject\":\"SceneLayer\",IntegratedMesh:\"IntegratedMeshLayer\",PointCloud:\"PointCloudLayer\",Building:\"BuildingSceneLayer\"};if(e&&Array.isArray(e.layers)&&e.layers.length>0){const a=e.layers[0].layerType;if(null!=r[a])return r[a]}return\"SceneLayer\"}));break;default:u=i[n]}const y={FeatureLayer:!0,SceneLayer:!0},c=\"FeatureServer\"===n,d={parsedUrl:l,Constructor:null,layerOrTableId:c?o:null,sublayerIds:null,tableIds:null},I=await u;if(y[I]&&null==o){const e=await p(r,n,t);c&&(d.sublayerInfos=e.layerInfos,d.tableInfos=e.tableInfos);if(1!==e.layerIds.length+e.tableIds.length)d.sublayerIds=e.layerIds,d.tableIds=e.tableIds;else if(c){var v,w;d.layerOrTableId=null!=(v=e.layerIds[0])?v:e.tableIds[0],d.sourceJSON=null!=(w=e.layerInfos[0])?w:e.tableInfos[0]}}return d.Constructor=await b(I),d}async function f(e,a){const n=await S(e,a);let s=null,u=null;const i=n.type;if(\"Feature Layer\"===i||\"Table\"===i?(s=\"FeatureServer\",u=n.id):\"indexedVector\"===i?s=\"VectorTileServer\":n.hasOwnProperty(\"mapName\")?s=\"MapServer\":n.hasOwnProperty(\"bandCount\")&&n.hasOwnProperty(\"pixelSizeX\")?s=\"ImageServer\":n.hasOwnProperty(\"maxRecordCount\")&&n.hasOwnProperty(\"allowGeometryUpdates\")?s=\"FeatureServer\":n.hasOwnProperty(\"streamUrls\")&&(s=\"StreamServer\"),!s)return null;const y=null!=u?o(e):null;return{title:r(y)&&n.name||t(e),serverType:s,sublayer:u,url:{path:r(y)?y.serviceUrl:l(e).path}}}async function p(e,r,a){var t,l;let n,s=!1;if(\"FeatureServer\"===r){const r=await v(e,a);s=!!r.layersJSON,n=r.layersJSON||r.serviceJSON}else n=await S(e,a);const o=null==(t=n)?void 0:t.layers,u=null==(l=n)?void 0:l.tables;return{layerIds:(null==o?void 0:o.map((e=>e.id)).reverse())||[],tableIds:(null==u?void 0:u.map((e=>e.id)).reverse())||[],layerInfos:s?o:[],tableInfos:s?u:[]}}function I(e){return!e.type||\"Feature Layer\"===e.type}async function v(e,r){var a,t;let l=await S(e,r);l=l||{},l.layers=(null==(a=l.layers)?void 0:a.filter(I))||[];const n={serviceJSON:l};if(l.currentVersion<10.5)return n;const s=await S(e+\"/layers\",r);return n.layersJSON={layers:(null==s||null==(t=s.layers)?void 0:t.filter(I))||[],tables:(null==s?void 0:s.tables)||[]},n}async function b(e){return(0,u[e])()}async function m(e,r){return(await S(e,r)).tileInfo}async function S(e,r){return(await n(e,{responseType:\"json\",query:{f:\"json\",...r}})).data}export{i as fromUrl};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nconst a={BingMapsLayer:async()=>(await import(\"../BingMapsLayer.js\")).default,BuildingSceneLayer:async()=>(await import(\"../BuildingSceneLayer.js\")).default,CSVLayer:async()=>(await import(\"../CSVLayer.js\")).default,ElevationLayer:async()=>(await import(\"../ElevationLayer.js\")).default,FeatureLayer:async()=>(await import(\"../FeatureLayer.js\")).default,GroupLayer:async()=>(await import(\"../GroupLayer.js\")).default,GeoRSSLayer:async()=>(await import(\"../GeoRSSLayer.js\")).default,ImageryLayer:async()=>(await import(\"../ImageryLayer.js\")).default,ImageryTileLayer:async()=>(await import(\"../ImageryTileLayer.js\")).default,IntegratedMeshLayer:async()=>(await import(\"../IntegratedMeshLayer.js\")).default,KMLLayer:async()=>(await import(\"../KMLLayer.js\")).default,MapImageLayer:async()=>(await import(\"../MapImageLayer.js\")).default,MapNotesLayer:async()=>(await import(\"../MapNotesLayer.js\")).default,OpenStreetMapLayer:async()=>(await import(\"../OpenStreetMapLayer.js\")).default,PointCloudLayer:async()=>(await import(\"../PointCloudLayer.js\")).default,RouteLayer:async()=>(await import(\"../RouteLayer.js\")).default,SceneLayer:async()=>(await import(\"../SceneLayer.js\")).default,StreamLayer:async()=>(await import(\"../StreamLayer.js\")).default,TileLayer:async()=>(await import(\"../TileLayer.js\")).default,UnknownLayer:async()=>(await import(\"../UnknownLayer.js\")).default,UnsupportedLayer:async()=>(await import(\"../UnsupportedLayer.js\")).default,VectorTileLayer:async()=>(await import(\"../VectorTileLayer.js\")).default,WebTileLayer:async()=>(await import(\"../WebTileLayer.js\")).default,WMSLayer:async()=>(await import(\"../WMSLayer.js\")).default,WMTSLayer:async()=>(await import(\"../WMTSLayer.js\")).default};export{a as layerLookupMap};\n"],"sourceRoot":""}