{"version":3,"file":"static/js/3220.4d5bb80a.chunk.js","mappings":"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","sources":["../node_modules/@arcgis/core/chunks/vec4f64.js","../node_modules/@arcgis/core/renderers/support/heatmapUtils.js","../node_modules/@arcgis/core/views/2d/layers/features/processors/BaseProcessor.js","../node_modules/@arcgis/core/views/2d/layers/features/processors/HeatmapProcessor.js","../node_modules/@arcgis/core/views/2d/layers/features/support/tileUtils.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.24/esri/copyright.txt for details.\n*/\nfunction n(){return[0,0,0,0]}function t(n){return[n[0],n[1],n[2],n[3]]}function r(n,t,r,e){return[n,t,r,e]}function e(t){const r=n(),e=Math.min(4,t.length);for(let n=0;n<e;++n)r[n]=t[n];return r}function u(n,t){return new Float64Array(n,t,4)}function a(){return n()}function o(){return r(1,1,1,1)}function s(){return r(1,0,0,0)}function i(){return r(0,1,0,0)}function c(){return r(0,0,1,0)}function f(){return r(0,0,0,1)}const l=a(),_=o(),N=s(),O=i(),T=c(),U=f(),b=Object.freeze(Object.defineProperty({__proto__:null,create:n,clone:t,fromValues:r,fromArray:e,createView:u,zeros:a,ones:o,unitX:s,unitY:i,unitZ:c,unitW:f,ZEROS:l,ONES:_,UNIT_X:N,UNIT_Y:O,UNIT_Z:T,UNIT_W:U},Symbol.toStringTag,{value:\"Module\"}));export{_ as O,N as U,l as Z,u as a,e as b,n as c,t as d,i as e,r as f,c as g,f as h,O as i,T as j,U as k,o,s as u,b as v,a as z};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.24/esri/copyright.txt for details.\n*/\nimport{clamp as t}from\"../../core/mathUtils.js\";import{px2pt as r,pt2px as n}from\"../../core/screenUtils.js\";import{l as o}from\"../../chunks/vec4.js\";import{c as e}from\"../../chunks/vec4f64.js\";const a=2.4;function i(t){return r(t*a)}function f(t){return n(t)/a}function c(r,n,e,a){let{color:i,ratio:f}=n,{color:c,ratio:s}=e;if(s===f){const t=1e-6;1===s?f-=t:s+=t}const u=t((a-f)/(s-f),0,1);o(r,i.toArray(),c.toArray(),u)}function s(t){const r=512,n=new Uint8ClampedArray(4*r);if(t=t.filter((({ratio:t})=>t>=0&&t<=1)).sort(((t,r)=>t.ratio-r.ratio)).map((({color:t,ratio:r})=>({color:t,ratio:Math.max(r,.001)}))),t.length<1)return n;let o=t[0],a=t[0],i=1;const f=e();for(let e=0;e<r;e++){const s=(e+.5)/r;for(;s>a.ratio&&i<t.length;)o=a,a=t[i++];c(f,o,a,s),n.set(f,4*e)}return n}function u(t,r,o,e){const{radius:a,fieldOffset:i,field:f}=r,c=n(a),s=new Float64Array(o*e);let u,l=Number.NEGATIVE_INFINITY;const m=d(f,i);for(const{geometry:n,attributes:h}of t){const t=Math.max(0,n.x-c),r=Math.max(0,n.y-c),a=Math.min(e,n.y+c),i=Math.min(o,n.x+c),f=+m(h);for(let e=r;e<a;e++)for(let r=t;r<i;r++){const t=e*o+r,a=y(n.x-r,n.y-e,c);u=s[t]+=a*f,u>l&&(l=u)}}return{matrix:s.buffer,max:l}}function l(t,r,o,e){const{radius:a,fieldOffset:i,field:f}=r,c=Math.round(n(a)),s=new Float64Array(o*e);let u,l=Number.NEGATIVE_INFINITY;const m=x(f,i),h=new Set;for(const n of t){const t=n.getCursor();for(;t.next();){const r=t.getObjectId();if(h.has(r))continue;h.add(r);const n=t.readLegacyPointGeometry(),a=128;if(n.x<-a||n.x>=o+a||n.y<-a||n.y>e+a)continue;const i=+m(t),f=Math.max(0,Math.round(n.x)-c),d=Math.max(0,Math.round(n.y)-c),x=Math.min(e,Math.round(n.y)+c),M=Math.min(o,Math.round(n.x)+c);for(let t=d;t<x;t++)for(let r=f;r<M;r++){const e=t*o+r,a=y(n.x-r,n.y-t,c);u=s[e]+=a*i,u>l&&(l=u)}}}return{matrix:s.buffer,max:l}}function m(t,r,n,o,e,a){t.canvas.width=t.canvas.height=r,t.clearRect(0,0,r,r);const i=t.getImageData(0,0,r,r);n&&o&&i.data.set(new Uint8ClampedArray(h(r,n,o,e,a))),t.putImageData(i,0,0)}function h(r,n,o,e,a){const i=new Uint32Array(r*r),f=\"buffer\"in n?n:new Float64Array(n),c=\"buffer\"in o?new Uint32Array(o.buffer):new Uint32Array(new Uint8Array(o).buffer),s=c.length/(a-e);for(let u=0;u<f.length;u++){const r=f[u],n=Math.floor((r-e)*s);i[u]=c[t(n,0,c.length-1)]}return i.buffer}function y(t,r,n){const o=Math.sqrt(t**2+r**2)/n;return o>1?0:3/(Math.PI*n**2)*(1-o**2)**2}function d(t,r){return\"function\"==typeof t?t:t?\"string\"==typeof r?r=>-1*+r[t]:n=>+n[t]+r:()=>1}function x(t,r){return null!=t?\"string\"==typeof r?r=>-1*+r.readAttribute(t):n=>+n.readAttribute(t)+r:t=>1}export{a as MAGIC_KERNEL_DENSITY_RADIUS_INFLATION_FACTOR,u as calculateHeatmapIntensityInfo,l as calculateHeatmapIntensityInfoReaders,h as createHeatmapImageData,d as createValueFunction,x as createValueFunctionCursor,m as drawHeatmap,y as evaluateDensityKernel,i as gaussianBlurRadiusPxToKernelDensityRadiusPt,s as generateGradient,f as kernelDensityRadiusPtToGaussianBlurRadiusPx};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.24/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../../../chunks/tslib.es6.js\";import{HandleOwner as r}from\"../../../../../core/HandleOwner.js\";import{property as t}from\"../../../../../core/accessorSupport/decorators/property.js\";import\"../../../../../core/arrayUtils.js\";import\"../../../../../core/has.js\";import\"../../../../../core/accessorSupport/ensureType.js\";import{subclass as o}from\"../../../../../core/accessorSupport/decorators/subclass.js\";let s=class extends r{initialize(){}destroy(){}get supportsTileUpdates(){return!1}get spatialReference(){const e=this.get(\"tileStore.tileScheme.spatialReference\");return e&&e.toJSON()||null}};e([t({readOnly:!0})],s.prototype,\"supportsTileUpdates\",null),e([t({constructOnly:!0})],s.prototype,\"remoteClient\",void 0),e([t({constructOnly:!0})],s.prototype,\"service\",void 0),e([t()],s.prototype,\"spatialReference\",null),e([t({constructOnly:!0})],s.prototype,\"tileInfo\",void 0),e([t({constructOnly:!0})],s.prototype,\"tileStore\",void 0),s=e([o(\"esri.views.2d.layers.features.processors.BaseProcessor\")],s);const p=s;export{p as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.24/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../../../chunks/tslib.es6.js\";import\"../../../../../core/has.js\";import{isSome as t,applySome as s}from\"../../../../../core/maybe.js\";import\"../../../../../core/Logger.js\";import\"../../../../../core/accessorSupport/ensureType.js\";import\"../../../../../core/arrayUtils.js\";import\"../../../../../core/accessorSupport/set.js\";import{subclass as r}from\"../../../../../core/accessorSupport/decorators/subclass.js\";import{diff as i}from\"../../../../../core/accessorSupport/diffUtils.js\";import{calculateHeatmapIntensityInfoReaders as o}from\"../../../../../renderers/support/heatmapUtils.js\";import{TILE_SIZE as a}from\"../../../engine/webgl/definitions.js\";import n from\"./BaseProcessor.js\";import{getPow2NeighborKey as d}from\"../support/tileUtils.js\";class p{constructor(e,t){this.offset=e,this.extent=t}}function c(e){const t=e.key,s=new Map,r=256,i=a,o=e.tileInfoView.tileInfo.isWrappable;return s.set(d(t,-1,-1,o).id,new p([-i,-i],[i-r,i-r,i,i])),s.set(d(t,0,-1,o).id,new p([0,-i],[0,i-r,i,i])),s.set(d(t,1,-1,o).id,new p([i,-i],[0,i-r,r,i])),s.set(d(t,-1,0,o).id,new p([-i,0],[i-r,0,i,i])),s.set(d(t,1,0,o).id,new p([i,0],[0,0,r,i])),s.set(d(t,-1,1,o).id,new p([-i,i],[i-r,0,i,r])),s.set(d(t,0,1,o).id,new p([0,i],[0,0,i,r])),s.set(d(t,1,1,o).id,new p([i,i],[0,0,r,r])),s}let l=class extends n{constructor(){super(...arguments),this.type=\"heatmap\",this._tileKeyToFeatureSets=new Map}initialize(){this.handles.add([this.tileStore.on(\"update\",this.onTileUpdate.bind(this))])}async update(e,t){const s=t.schema.processors[0];if(\"heatmap\"!==s.type)return;i(this._schema,s)&&(e.mesh=!0,this._schema=s)}onTileUpdate(e){for(const t of e.removed)this._tileKeyToFeatureSets.delete(t.key.id)}onTileClear(e){const t={clear:!0};return this._tileKeyToFeatureSets.delete(e.key.id),this.remoteClient.invoke(\"tileRenderer.onTileData\",{tileKey:e.id,data:t})}async onTileMessage(e,r,i){this._tileKeyToFeatureSets.has(e.key.id)||this._tileKeyToFeatureSets.set(e.key.id,new Map);const a=this._tileKeyToFeatureSets.get(e.key.id);if(t(r.addOrUpdate)&&r.addOrUpdate.hasFeatures&&a.set(r.addOrUpdate.instance,r),r.end){const t=[],r=c(e);this._tileKeyToFeatureSets.forEach(((i,o)=>{if(o===e.key.id)i.forEach((e=>s(e.addOrUpdate,(e=>t.push(e)))));else if(r.has(o)){const e=r.get(o),[a,n]=e.offset;i.forEach((e=>s(e.addOrUpdate,(e=>{const s=e.transform(a,n,1,1);t.push(s)}))))}}));const a=o(t,this._schema.mesh,512,512),n={tileKey:e.key.id,intensityInfo:a},d=[a.matrix];return this.remoteClient.invoke(\"tileRenderer.onTileData\",n,{...i,transferList:d})}}onTileError(e,t,s){return this.remoteClient.invoke(\"tileRenderer.onTileError\",{tileKey:e.id,error:t},s)}};l=e([r(\"esri.views.2d.layers.features.processors.HeatmapProcessor\")],l);const h=l;export{h as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.24/esri/copyright.txt for details.\n*/\nimport{Tile as o}from\"./Tile.js\";function e(e,n,r){const t=e.tileInfoView.tileInfo.isWrappable,i=l(e.key,n,r,t);return new o(e.tileInfoView,i)}function l(o,e,l,n){const r=o.clone(),t=1<<r.level,i=r.col+e,c=r.row+l;return n&&i<0?(r.col=i+t,r.world-=1):i>=t?(r.col=i-t,r.world+=1):r.col=i,r.row=c,r}export{l as getPow2NeighborKey,e as getPow2NeighborTile};\n"],"names":["n","t","r","e","Math","min","length","u","Float64Array","a","o","s","i","c","f","l","_","N","O","T","U","Object","freeze","defineProperty","__proto__","create","clone","fromValues","fromArray","createView","zeros","ones","unitX","unitY","unitZ","unitW","ZEROS","ONES","UNIT_X","UNIT_Y","UNIT_Z","UNIT_W","Symbol","toStringTag","value","color","ratio","toArray","Uint8ClampedArray","filter","sort","map","max","set","radius","fieldOffset","field","round","Number","NEGATIVE_INFINITY","m","readAttribute","x","h","Set","getCursor","next","getObjectId","has","add","readLegacyPointGeometry","y","d","M","matrix","buffer","canvas","width","height","clearRect","getImageData","data","Uint32Array","Uint8Array","floor","putImageData","sqrt","PI","initialize","destroy","supportsTileUpdates","spatialReference","this","get","toJSON","readOnly","prototype","constructOnly","p","constructor","offset","extent","super","arguments","type","_tileKeyToFeatureSets","Map","handles","tileStore","on","onTileUpdate","bind","schema","processors","_schema","mesh","removed","delete","key","id","onTileClear","remoteClient","invoke","tileKey","clear","addOrUpdate","hasFeatures","instance","end","tileInfoView","tileInfo","isWrappable","forEach","push","transform","intensityInfo","transferList","onTileError","error","level","col","row","world"],"sourceRoot":""}