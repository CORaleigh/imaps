{"version":3,"sources":["../node_modules/@arcgis/core/symbols/cim/Rasterizer.js","../node_modules/@arcgis/core/symbols/cim/TextRasterizer.js","../node_modules/@arcgis/core/symbols/cim/CIMSymbolRasterizer.js","../node_modules/@arcgis/core/symbols/cim/cimAnalyzer.js","../node_modules/@arcgis/core/symbols/cim/SDFHelper.js"],"names":["o","dispose","this","_rasterizationCanvas","rasterizeJSONResource","i","s","document","createElement","type","r","t","a","e","rasterizeSimpleFill","style","size","image","Uint32Array","buffer","sdf","simplePattern","anchorX","anchorY","rasterizeSimpleLine","cap","m","l","f","fromSimpleMarker","fromCIMHatchFill","frame","xmin","ymax","xmax","ymin","markerPlacement","fromCIMInsidePolygon","n","c","h","p","y","u","rasterize","rasterizeImageResource","width","height","getContext","ImageData","putImageData","setAttribute","drawImage","getImageData","Uint8Array","data","oldColor","length","newColor","Math","round","Uint8ClampedArray","constructor","rasterizeText","_textRasterizationCanvas","setFontProperties","parameters","textLines","split","lineHeight","computeLineHeight","computeTextWidth","renderedLineHeight","pixelRatio","renderedHaloSize","halo","renderedWidth","renderedHeight","fillStyle","slice","toString","color","haloStyle","d","textAlign","g","renderHalo","globalCompositeOperation","fillText","premultiplyColors","_haloRasterizationCanvas","clearRect","strokeStyle","lineJoin","renderHaloEmulated","renderHaloNative","globalAlpha","lineWidth","strokeText","font","weight","family","textBaseline","horizontalAlignment","max","measureText","push","cos","PI","sin","Legend","Preview","targetSize","referenceSize","scaleFactor","M","fill","legend","geometry","rings","canvasPaths","preview","stroke","paths","C","_spatialReference","_avoidSDF","_resourceCache","Map","_rasterizer","_textRasterizer","_pictureMarkerCache","centroid","symbol","z","analyzeCIMSymbol","Object","keys","map","name","alias","I","attributes","rasterizeCIMSymbol","geometryType","spatialReference","fields","cim","fetchPictureMarkerResource","text","indexOf","textCase","Promise","all","materialHash","get","url","responseType","signal","set","_getRasterizedResource","offsetX","offsetY","rotation","rotateClockwise","angle","verticalAlignment","rotateClockWise","rasterizedResource","getSymbolImage","min","P","createImageData","x","rasterizedImage","_imageDataToCanvas","save","translate","rotate","restore","imageData","anchorPosition","_imageDataCanvas","_imageTo32Array","_getPictureResource","_rasterizePictureResource","analyzedCIM","hash","_embedCIMLayerInVectorMarker","JSON","stringify","_rasterizeTextResource","anchorPoint","preserveOutlineWidth","has","window","devicePixelRatio","fontName","decoration","outlineColor","outlineSize","abs","createPattern","setTransform","m11","m12","m21","m22","m41","m42","beginPath","moveTo","lineTo","closePath","apply","markerGraphics","symbolLayers","materialOverrides","getLogger","b","N","angleToLine","async","k","error","primitiveOverrides","valueExpressionInfo","expression","then","primitiveName","propertyName","value","getSize","angleAlignment","enable","findApplicableOverrides","L","X","w","J","O","T","templateHash","colorLocked","F","j","scaleX","effects","tintColor","colorSubstitutions","filter","separation","lineSymbol","W","capStyle","joinStyle","miterLimit","S","v","isOutline","join","referenceWidth","zOrder","A","isDashed","stepY","gridAngle","scaleSymbolsProportionally","alignment","isAbsoluteAnchorPoint","anchorPointUnits","outlineWidth","frameHeight","sizeRatio","Y","H","underline","strikethrough","toLowerCase","fontStyleName","fontFamilyName","getFillColor","getStrokeColor","getStrokeWidth","haloSymbol","haloSize","$","Number","R","textString","geom","asFill","billboardMode3D","depth3D","respectFrame","clippingPath","getTextureAnchor","parseInt","substr","NaN","toRgba","Array","call","$view","fn","buildOverrideKey","D","parse","applyOverrides","floor","sqrt"],"mappings":"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","file":"static/js/51.6b5f2034.chunk.js","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport{SymbolHelper as e,CIMSymbolHelper as r}from\"./CIMSymbolHelper.js\";import t from\"./Rect.js\";import{getSDFInfo as a,buildSDF as n}from\"./SDFHelper.js\";import{resampleHermite as i}from\"./utils.js\";const s=512;class o{dispose(){this._rasterizationCanvas=null}rasterizeJSONResource(i,s,o){if(this._rasterizationCanvas||(this._rasterizationCanvas=document.createElement(\"canvas\")),\"simple-fill\"===i.type||\"esriSFS\"===i.type){const[r,t,a]=e.rasterizeSimpleFill(this._rasterizationCanvas,i.style,s);return{size:[t,a],image:new Uint32Array(r.buffer),sdf:!1,simplePattern:!0,anchorX:0,anchorY:0}}if(\"simple-line\"===i.type||\"esriSLS\"===i.type){const[r,t,a]=e.rasterizeSimpleLine(i.style,i.cap);return{size:[t,a],image:new Uint32Array(r.buffer),sdf:!0,simplePattern:!0,anchorX:0,anchorY:0}}let m,l,f;if(\"simple-marker\"===i.type||\"esriSMS\"===i.type||\"line-marker\"===i.type?(m=r.fromSimpleMarker(i),f=a(m)):\"CIMHatchFill\"===i.type?(m=r.fromCIMHatchFill(i),l=new t(m.frame.xmin,-m.frame.ymax,m.frame.xmax-m.frame.xmin,m.frame.ymax-m.frame.ymin)):i.markerPlacement&&\"CIMMarkerPlacementInsidePolygon\"===i.markerPlacement.type?(m=r.fromCIMInsidePolygon(i),l=new t(m.frame.xmin,-m.frame.ymax,m.frame.xmax-m.frame.xmin,m.frame.ymax-m.frame.ymin)):(m=i,f=a(m)),f&&!o){const[e,r,t]=n(f);return e?{size:[r,t],image:new Uint32Array(e.buffer),sdf:!0,simplePattern:!0,anchorX:0,anchorY:0}:null}const[c,h,p,y,u]=r.rasterize(this._rasterizationCanvas,m,l,!o);return c?{size:[h,p],image:new Uint32Array(c.buffer),sdf:!1,simplePattern:!1,anchorX:y,anchorY:u}:null}rasterizeImageResource(e,r,t,a){this._rasterizationCanvas||(this._rasterizationCanvas=document.createElement(\"canvas\")),this._rasterizationCanvas.width=e,this._rasterizationCanvas.height=r;const n=this._rasterizationCanvas.getContext(\"2d\");t instanceof ImageData?n.putImageData(t,0,0):(t.setAttribute(\"width\",`${e}px`),t.setAttribute(\"height\",`${r}px`),n.drawImage(t,0,0,e,r));const o=n.getImageData(0,0,e,r),m=new Uint8Array(o.data);if(a)for(const i of a)if(i&&i.oldColor&&4===i.oldColor.length&&i.newColor&&4===i.newColor.length){const[e,r,t,a]=i.oldColor,[n,s,o,l]=i.newColor;if(e===n&&r===s&&t===o&&a===l)continue;for(let i=0;i<m.length;i+=4)e===m[i]&&r===m[i+1]&&t===m[i+2]&&a===m[i+3]&&(m[i]=n,m[i+1]=s,m[i+2]=o,m[i+3]=l)}let l;for(let i=0;i<m.length;i+=4)l=m[i+3]/255,m[i]=m[i]*l,m[i+1]=m[i+1]*l,m[i+2]=m[i+2]*l;let f=m,c=e,h=r;const p=s;if(c>=p||h>=p){const t=c/h;t>1?(c=p,h=Math.round(p/t)):(h=p,c=Math.round(p*t)),f=new Uint8Array(4*c*h);const a=new Uint8ClampedArray(f.buffer);i(m,e,r,a,c,h,!1)}return{size:[c,h],image:new Uint32Array(f.buffer),sdf:!1,simplePattern:!1,anchorX:0,anchorY:0}}}export{o as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport{pt2px as t}from\"../../core/screenUtils.js\";function e(t){return`rgb(${t.slice(0,3).toString()})`}function i(t){return`rgba(${t.slice(0,3).toString()},${t[3]})`}class s{constructor(){}rasterizeText(t,s){this._textRasterizationCanvas||(this._textRasterizationCanvas=document.createElement(\"canvas\"));const n=this._textRasterizationCanvas,o=n.getContext(\"2d\");this.setFontProperties(o,s),this.parameters=s,this.textLines=t.split(/\\r?\\n/),this.lineHeight=this.computeLineHeight();const a=this.computeTextWidth(o,s),h=this.lineHeight*this.textLines.length;n.width=a,n.height=h,this.renderedLineHeight=Math.round(this.lineHeight*s.pixelRatio),this.renderedHaloSize=s.halo.size*s.pixelRatio,this.renderedWidth=a*s.pixelRatio,this.renderedHeight=h*s.pixelRatio,this.fillStyle=i(s.color),this.haloStyle=e(s.halo.color);const l=this.renderedLineHeight,d=this.renderedHaloSize;this.setFontProperties(o,s);const c=r(o.textAlign,this.renderedWidth)+d,g=d;let f=0,p=0;d>0&&this.renderHalo(o,c,g,f,p,s),p+=g,f+=c;for(const e of this.textLines)o.globalCompositeOperation=\"destination-out\",o.fillStyle=\"rgb(0, 0, 0)\",o.fillText(e,f,p),o.globalCompositeOperation=\"source-over\",o.fillStyle=this.fillStyle,o.fillText(e,f,p),p+=l;const u=o.getImageData(0,0,this.renderedWidth,this.renderedHeight),m=new Uint8Array(u.data);if(s.premultiplyColors){let t;for(let e=0;e<m.length;e+=4)t=m[e+3]/255,m[e]=m[e]*t,m[e+1]=m[e+1]*t,m[e+2]=m[e+2]*t}return{size:[this.renderedWidth,this.renderedHeight],image:new Uint32Array(m.buffer),sdf:!1,simplePattern:!1,anchorX:0,anchorY:0}}renderHalo(t,e,i,s,r,n){const o=this.renderedWidth,a=this.renderedHeight;this._haloRasterizationCanvas||(this._haloRasterizationCanvas=document.createElement(\"canvas\")),this._haloRasterizationCanvas.width=o,this._haloRasterizationCanvas.height=a;const h=this._haloRasterizationCanvas,l=h.getContext(\"2d\");l.clearRect(0,0,o,a),this.setFontProperties(l,n),l.fillStyle=this.haloStyle,l.strokeStyle=this.haloStyle;const d=this.renderedHaloSize<3;l.lineJoin=d?\"miter\":\"round\",d?this.renderHaloEmulated(l,e,i):this.renderHaloNative(l,e,i),t.globalAlpha=this.parameters.halo.color[3],t.drawImage(h,0,0,o,a,s,r,o,a),t.globalAlpha=1}renderHaloEmulated(t,e,i){const s=this.renderedLineHeight,r=this.renderedHaloSize;for(const o of this.textLines){for(const[s,a]of n)t.fillText(o,e+r*s,i+r*a);i+=s}}renderHaloNative(t,e,i){const s=this.renderedLineHeight,r=this.renderedHaloSize;for(const n of this.textLines){const o=2*r,a=5,h=.1;for(let s=0;s<a;s++){const r=1-(a-1)*h+s*h;t.lineWidth=r*o,t.strokeText(n,e,i)}i+=s}}setFontProperties(e,i){const s=i.font,r=`${s.style} ${s.weight} ${t(i.size*i.pixelRatio)}px ${s.family}, sans-serif`;let n;switch(e.font=r,e.textBaseline=\"top\",i.horizontalAlignment){case\"left\":n=\"left\";break;case\"right\":n=\"right\";break;case\"center\":n=\"center\";break;default:n=\"left\"}e.textAlign=n}computeTextWidth(t,e){let i=0;for(const r of this.textLines)i=Math.max(i,t.measureText(r).width);const s=e.font;return(\"italic\"===s.style||\"oblique\"===s.style||\"string\"==typeof s.weight&&(\"bold\"===s.weight||\"bolder\"===s.weight)||\"number\"==typeof s.weight&&s.weight>600)&&(i+=.3*t.measureText(\"A\").width),i+=2*this.parameters.halo.size,Math.round(i)}computeLineHeight(){const t=1.275*this.parameters.size;return Math.round(t+2*this.parameters.halo.size)}}function r(t,e){return\"center\"===t?.5*e:\"right\"===t?e:0}const n=[];{const t=16;for(let e=0;e<360;e+=360/t)n.push([Math.cos(Math.PI*e/180),Math.sin(Math.PI*e/180)])}export{s as TextRasterizer,s as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport e from\"../../request.js\";import{throwIfAborted as t}from\"../../core/promiseUtils.js\";import{pt2px as r}from\"../../core/screenUtils.js\";import{numericHash as a}from\"../../core/string.js\";import{getJsonType as i,isPolygon as s,isPolyline as o}from\"../../geometry/support/jsonUtils.js\";import{analyzeCIMSymbol as n,analyzeCIMResource as c}from\"./cimAnalyzer.js\";import l from\"./Rasterizer.js\";import{TextRasterizer as m}from\"./TextRasterizer.js\";import{createLabelOverrideFunction as h,evaluateValueOrFunction as f,colorToArray as g}from\"./utils.js\";import{scaleCIMMarker as y}from\"../support/cimSymbolUtils.js\";import u from\"../support/Symbol3DAnchorPosition2D.js\";var p;!function(e){e.Legend=\"legend\",e.Preview=\"preview\"}(p||(p={}));const d=(e,t,a)=>{if(e&&e.targetSize){let i;if(a){const t=Math.max(a.frame.xmax-a.frame.xmin,a.frame.ymax-a.frame.ymin);i=e.targetSize/r(t)}else i=e.targetSize/t.referenceSize;return i}return e&&e.scaleFactor?e.scaleFactor:1},M={fill:{legend:{frame:{xmax:15,xmin:0,ymax:15,ymin:0},geometry:{rings:[[[0,15],[15,7.5],[15,0],[0,0],[0,15]]]},canvasPaths:{rings:[[[0,15],[0,0],[15,7.5],[15,15],[0,15]]]}},preview:{frame:{xmax:100,xmin:0,ymax:100,ymin:0},geometry:{rings:[[[0,100],[100,100],[100,0],[0,0],[0,100]]]},canvasPaths:{rings:[[[0,100],[0,0],[100,0],[100,100],[0,100]]]}}},stroke:{legend:{frame:{xmax:24,xmin:0,ymax:-2,ymin:2},geometry:{paths:[[[0,0],[12,0],[24,0]]]},canvasPaths:{paths:[[[0,2],[12,2],[24,2]]]}},preview:{frame:{xmax:100,xmin:0,ymax:-2,ymin:2},geometry:{paths:[[[0,0],[50,0],[100,0]]]},canvasPaths:{paths:[[[0,2],[50,2],[100,2]]]}}}};class C{constructor(e,t){this._spatialReference=e,this._avoidSDF=t,this._resourceCache=new Map,this._rasterizer=new l,this._textRasterizer=new m,this._pictureMarkerCache=new Map}async rasterizeCIMSymbolAsync(e,t,r,a,s,o,n,c){a=a||(t?null!=t.centroid?\"esriGeometryPolygon\":i(t.geometry):null)||z(e);const l=await this.analyzeCIMSymbol(e,t?I(t.attributes):null,r,a,c);return this.rasterizeCIMSymbol(l,t,a,s,o,n)}async analyzeCIMSymbol(e,r,a,i,s){const o=[],c=r?{geometryType:i,spatialReference:this._spatialReference,fields:r}:null;let l;await n(e.data,c,o,this._avoidSDF),t(s);for(const t of o)\"CIMPictureMarker\"!==t.cim.type&&\"CIMPictureFill\"!==t.cim.type&&\"CIMPictureStroke\"!==t.cim.type||(l||(l=[]),l.push(this.fetchPictureMarkerResource(t,s))),a&&\"text\"===t.type&&\"string\"==typeof t.text&&t.text.indexOf(\"[\")>-1&&(t.text=h(a,t.text,t.cim.textCase));return l&&await Promise.all(l),o}async fetchPictureMarkerResource(t,r){const a=t.materialHash;if(!this._pictureMarkerCache.get(a)){const i=(await e(t.cim.url,{responseType:\"image\",signal:r&&r.signal})).data;this._pictureMarkerCache.set(a,i)}}rasterizeCIMSymbol(e,t,r,a,i,s){const o=[];for(const n of e){a&&\"function\"==typeof a.scaleFactor&&(a.scaleFactor=a.scaleFactor(t,i,s));const e=this._getRasterizedResource(n,t,r,a,i,s);if(!e)continue;let c=0,l=e.anchorX||0,m=e.anchorY||0,h=!1,g=0,y=0;if(\"esriGeometryPoint\"===r){const e=d(a,n,null);if(g=f(n.offsetX,t,i,s)*e||0,y=f(n.offsetY,t,i,s)*e||0,\"marker\"===n.type)c=f(n.rotation,t,i,s)||0,h=!!n.rotateClockwise&&n.rotateClockwise;else if(\"text\"===n.type){if(c=f(n.angle,t,i,s)||0,void 0!==n.horizontalAlignment)switch(n.horizontalAlignment){case\"left\":l=-.5;break;case\"right\":l=.5;break;default:l=0}if(void 0!==n.verticalAlignment)switch(n.verticalAlignment){case\"top\":m=.5;break;case\"bottom\":m=-.5;break;case\"baseline\":m=-.25;break;default:m=0}}}null!=e&&o.push({angle:c,rotateClockWise:h,anchorX:l,anchorY:m,offsetX:g,offsetY:y,rasterizedResource:e})}return this.getSymbolImage(o)}getSymbolImage(e){const t=document.createElement(\"canvas\"),a=t.getContext(\"2d\");let i=0,s=0,o=0,n=0;const c=[];for(let f=0;f<e.length;f++){const t=e[f],l=t.rasterizedResource;if(!l)continue;const m=l.size,h=t.offsetX,g=t.offsetY,y=t.anchorX,u=t.anchorY,p=t.rotateClockWise||!1;let d=t.angle,M=r(h)-m[0]*(.5+y),C=r(g)-m[1]*(.5+u),I=M+m[0],z=C+m[1];if(d){p&&(d=-d);const e=Math.sin(d*Math.PI/180),t=Math.cos(d*Math.PI/180),r=M*t-C*e,a=M*e+C*t,i=M*t-z*e,s=M*e+z*t,o=I*t-z*e,n=I*e+z*t,c=I*t-C*e,l=I*e+C*t;M=Math.min(r,i,o,c),C=Math.min(a,s,n,l),I=Math.max(r,i,o,c),z=Math.max(a,s,n,l)}i=M<i?M:i,s=C<s?C:s,o=I>o?I:o,n=z>n?z:n;const P=a.createImageData(l.size[0],l.size[1]);P.data.set(new Uint8ClampedArray(l.image.buffer));const x={offsetX:h,offsetY:g,rotateClockwise:p,angle:d,rasterizedImage:P,anchorX:y,anchorY:u};c.push(x)}t.width=o-i,t.height=n-s;const l=-i,m=n;for(let f=0;f<c.length;f++){const e=c[f],t=this._imageDataToCanvas(e.rasterizedImage),i=e.rasterizedImage.width,s=e.rasterizedImage.height,o=l-i*(.5+e.anchorX),n=m-s*(.5-e.anchorY);if(e.angle){const i=(360-e.angle)*Math.PI/180;a.save(),a.translate(r(e.offsetX),-r(e.offsetY)),a.translate(l,m),a.rotate(i),a.translate(-l,-m),a.drawImage(t,o,n),a.restore()}else a.drawImage(t,o+r(e.offsetX),n-r(e.offsetY))}const h=new u({x:l/t.width-.5,y:m/t.height-.5});return{imageData:0!==t.width&&0!==t.height?a.getImageData(0,0,t.width,t.height):a.createImageData(1,1),anchorPosition:h}}_imageDataToCanvas(e){this._imageDataCanvas||(this._imageDataCanvas=document.createElement(\"canvas\"));const t=this._imageDataCanvas,r=t.getContext(\"2d\");return t.width=e.width,t.height=e.height,r.putImageData(e,0,0),t}_imageTo32Array(e,t,r){this._imageDataCanvas||(this._imageDataCanvas=document.createElement(\"canvas\"));const a=this._imageDataCanvas,i=a.getContext(\"2d\");return a.width=t,a.height=r,i.drawImage(e,0,0,t,r),new Uint32Array(i.getImageData(0,0,t,r).data.buffer)}_getRasterizedResource(e,t,r,i,s,o){let n,c,l,m;if(\"esriGeometryPolyline\"===r||\"esriGeometryPolygon\"===r){const m=i&&i.style?i.style:p.Legend,h=\"esriGeometryPolyline\"===r?M.stroke[m]:M.fill[m];if(\"line\"===e.type){if(\"CIMSolidStroke\"!==e.cim.type){if(\"CIMPictureStroke\"===e.cim.type){const r=f(e.width,t,s,o),{image:a,width:i,height:n}=this._getPictureResource(e,r);return this._rasterizePictureResource(e,a,i,n,h,r)}return null}({analyzedCIM:n,hash:l}=P(e,t,s,o)),c=this._embedCIMLayerInVectorMarker(n,h)}else if(\"marker\"===e.type){if(\"CIMPictureMarker\"===e.cim.type)return null;if(\"CIMVectorMarker\"!==e.cim.type)return null;e.cim.offsetX=f(e.offsetX,t,s,o),e.cim.offsetY=f(e.offsetY,t,s,o),e.cim.rotation=f(e.rotation,t,s,o),e.cim.markerPlacement=e.markerPlacement,({analyzedCIM:n}=P(e,t,s,o)),l=a(JSON.stringify(n)).toString(),c=this._embedCIMLayerInVectorMarker(n,h)}else{if(\"text\"===e.type)return null;if(\"fill\"===e.type){if(\"CIMHatchFill\"===e.cim.type||\"CIMVectorMarker\"===e.cim.type||\"CIMPictureMarker\"===e.cim.type||\"CIMPictureFill\"===e.cim.type){const r=e.cim.size||e.cim.height;let a,i,c;if(\"CIMPictureMarker\"===e.cim.type||\"CIMPictureFill\"===e.cim.type)({image:a,width:i,height:c}=this._getPictureResource(e,r));else{({analyzedCIM:n,hash:l}=P(e,t,s,o));const r=this._rasterizer.rasterizeJSONResource(n,1,this._avoidSDF);a=r.image,i=r.size[0],c=r.size[1]}return this._rasterizePictureResource(e,a,i,c,h,null)}if(\"CIMSolidFill\"!==e.cim.type)return null;({analyzedCIM:n,hash:l}=P(e,t,s,o)),c=this._embedCIMLayerInVectorMarker(n,h)}}}else{if(\"text\"===e.type)return m=this._rasterizeTextResource(e,t,i,s,o),m;({analyzedCIM:n,hash:l}=P(e,t,s,o));const r=d(i,e,null);if(\"CIMPictureMarker\"===e.cim.type){const a=f(e.size,t,s,o)*r,{image:i,width:n,height:c}=this._getPictureResource(e,a);return m={image:i,size:[n,c],sdf:!1,simplePattern:!1,anchorX:e.anchorPoint?e.anchorPoint.x:0,anchorY:e.anchorPoint?e.anchorPoint.y:0},m}y(n,r,{preserveOutlineWidth:!1}),c=n}l+=r,i&&(l+=JSON.stringify(i));const h=this._resourceCache;return h.has(l)?h.get(l):(m=this._rasterizer.rasterizeJSONResource(c,window.devicePixelRatio||1,this._avoidSDF),h.set(l,m),m)}_rasterizeTextResource(e,t,r,a,i){const s=d(r,e,null),o=f(e.text,t,a,i);if(!o||0===o.length)return null;const n=f(e.fontName,t,a,i),c=f(e.style,t,a,i),l=f(e.weight,t,a,i),m=f(e.decoration,t,a,i),h=f(e.size,t,a,i)*s,y=f(e.horizontalAlignment,t,a,i),u=f(e.verticalAlignment,t,a,i),p=g(f(e.color,t,a,i)),M=g(f(e.outlineColor,t,a,i)),C={color:p,size:h,horizontalAlignment:y,verticalAlignment:u,font:{family:n,style:c,weight:l,decoration:m},halo:{size:f(e.outlineSize,t,a,i)||0,color:M,style:c},pixelRatio:1,premultiplyColors:!this._avoidSDF};return this._textRasterizer.rasterizeText(o,C)}_rasterizePictureResource(e,t,a,i,n,c){const l=document.createElement(\"canvas\"),m=l.getContext(\"2d\");l.height=r(Math.max(Math.abs(n.frame.ymax-n.frame.ymin),c)),l.width=r(Math.abs(n.frame.xmax-n.frame.xmin));const h=m.createImageData(a,i);h.data.set(new Uint8ClampedArray(t.buffer));const f=this._imageDataToCanvas(h),g=m.createPattern(f,\"repeat\"),y=Math.cos((-e.cim.rotation||0)*Math.PI/180),u=Math.sin((-e.cim.rotation||0)*Math.PI/180);g.setTransform({m11:y,m12:u,m21:-u,m22:y,m41:r(e.cim.offsetX)||0,m42:r(e.cim.offsetY)||0});const p=n.canvasPaths;let d,M,C;s(p)?(d=p.rings,m.fillStyle=g,M=m.fill,C=[\"evenodd\"]):o(p)&&(d=p.paths,m.strokeStyle=g,m.lineWidth=c,M=m.stroke,d[0][0][1]=l.height/2,d[0][1][1]=l.height/2),m.beginPath();for(const s of d){const e=s?s.length:0;if(e>1){let t=s[0];m.moveTo(r(t[0]),r(t[1]));for(let a=1;a<e;++a)t=s[a],m.lineTo(r(t[0]),r(t[1]));m.closePath()}}M.apply(m,C);const I=m.getImageData(0,0,l.width,l.height),z=new Uint8Array(I.data);return{size:[l.width,l.height],image:new Uint32Array(z.buffer),sdf:!1,simplePattern:!1,anchorX:0,anchorY:0}}_getPictureResource(e,t){const a=this._pictureMarkerCache.get(e.materialHash);if(!a)return null;const i=a.height/a.width,s=t?i>1?r(t):r(t)/i:a.width,o=t?i>1?r(t)*i:r(t):a.height;return{image:this._imageTo32Array(a,s,o),width:s,height:o}}_embedCIMLayerInVectorMarker(e,t){const r=s(t.geometry)?\"CIMPolygonSymbol\":\"CIMLineSymbol\";return{type:\"CIMVectorMarker\",frame:t.frame,markerGraphics:[{type:\"CIMMarkerGraphic\",geometry:t.geometry,symbol:{type:r,symbolLayers:[e]}}]}}}function I(e){return(e?Object.keys(e):[]).map((t=>({name:t,alias:t,type:\"string\"==typeof e[t]?\"esriFieldTypeString\":\"esriFieldTypeDouble\"})))}function z(e){if(!(e&&e.data&&e.data.symbol))return null;switch(e.data.symbol.type){case\"CIMPointSymbol\":case\"CIMTextSymbol\":return\"esriGeometryPoint\";case\"CIMLineSymbol\":return\"esriGeometryPolyline\";case\"CIMPolygonSymbol\":return\"esriGeometryPolygon\";default:return null}}function P(e,t,r,a){let i,s;if(\"function\"==typeof e.materialHash){i=(0,e.materialHash)(t,r,a),s=c(e.cim,e.materialOverrides)}else i=e.materialHash,s=e.cim;return{analyzedCIM:s,hash:i}}export{C as CIMSymbolRasterizer,p as GeometryStyle};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport e from\"../../Color.js\";import t from\"../../core/Logger.js\";import{pt2px as i}from\"../../core/screenUtils.js\";import{numericHash as o}from\"../../core/string.js\";import{createRendererExpression as r,ArcadeExpression as n}from\"../../support/arcadeOnDemand.js\";import{CIMSymbolHelper as a,OverrideHelper as l}from\"./CIMSymbolHelper.js\";import{getExtent as s,getSDFMetrics as c}from\"./SDFHelper.js\";import{fromCIMColor as f,_adjustTextCase as m}from\"./utils.js\";import p from\"../../views/2d/arcade/callExpressionWithFeature.js\";const u=t.getLogger(\"esri.symbols.cim.cimAnalyzer\");function y(e){switch(e){case\"Butt\":return 0;case\"Square\":return 2;default:return 1}}function h(e){switch(e){case\"Bevel\":return 0;case\"Miter\":return 2;default:return 1}}function g(e){switch(e){default:return\"left\";case\"Right\":return\"right\";case\"Center\":return\"center\";case\"Justify\":return\"justify\"}}function d(e){switch(e){default:return\"top\";case\"Center\":return\"middle\";case\"Baseline\":return\"baseline\";case\"Bottom\":return\"bottom\"}}function S(e){let t=\"normal\",i=\"normal\";if(e){const o=e.toLowerCase();-1!==o.indexOf(\"italic\")?t=\"italic\":-1!==o.indexOf(\"oblique\")&&(t=\"oblique\"),-1!==o.indexOf(\"bold\")?i=\"bold\":-1!==o.indexOf(\"light\")&&(i=\"lighter\")}return{style:t,weight:i}}function v(e){return e.underline?\"underline\":e.strikethrough?\"line-through\":\"none\"}function b(e,t,i,o){let r;e[t]?r=e[t]:(r={},e[t]=r),r[i]=o}function N(e){const t=e.markerPlacement;return t&&t.angleToLine?1:0}async function k(e,t,i,o){const n=null!=i?i:[];if(!e)return n;let a,l;const s={};if(\"CIMSymbolReference\"!==e.type)return u.error(\"Expect cim type to be 'CIMSymbolReference'\"),n;if(a=e.symbol,l=e.primitiveOverrides,l){const e=[];for(const i of l){const o=i.valueExpressionInfo;if(o&&t){const n=o.expression,a=r(n,t.spatialReference,t.fields).then((e=>{e&&b(s,i.primitiveName,i.propertyName,e)}));e.push(a)}else null!=i.value&&b(s,i.primitiveName,i.propertyName,i.value)}await Promise.all(e)}switch(a.type){case\"CIMPointSymbol\":case\"CIMLineSymbol\":case\"CIMPolygonSymbol\":O(a,l,s,t,n,o)}return n}function O(e,t,i,o,r,n){if(!e)return;const s=e.symbolLayers;if(!s)return;let c;const f=a.getSize(e);\"CIMPointSymbol\"===e.type&&\"Map\"===e.angleAlignment&&(c=1);let m=s.length;for(;m--;){const a=s[m];if(!a||!1===a.enable)continue;const p=[];switch(l.findApplicableOverrides(a,t,p),a.type){case\"CIMSolidFill\":C(a,i,p,o,r);break;case\"CIMPictureFill\":P(a,i,p,o,r);break;case\"CIMHatchFill\":L(a,i,p,o,r);break;case\"CIMGradientFill\":M(a,i,p,o,r);break;case\"CIMSolidStroke\":X(a,i,p,o,r,\"CIMPolygonSymbol\"===e.type,f);break;case\"CIMPictureStroke\":I(a,i,p,o,r,\"CIMPolygonSymbol\"===e.type,f);break;case\"CIMGradientStroke\":x(a,i,p,o,r,\"CIMPolygonSymbol\"===e.type,f);break;case\"CIMCharacterMarker\":if(w(a,i,p,o,r))break;break;case\"CIMPictureMarker\":if(w(a,i,p,o,r))break;\"CIMLineSymbol\"===e.type&&(c=N(a)),z(a,i,p,o,r,c,f);break;case\"CIMVectorMarker\":if(w(a,i,p,o,r))break;\"CIMLineSymbol\"===e.type&&(c=N(a)),J(a,i,p,o,r,c,f,n);break;default:u.error(\"Cannot analyze CIM layer\",a.type)}}}function C(e,t,i,r,n){const a=e.primitiveName,l=f(e.color),[s,c]=T(i,a),m=o(JSON.stringify(e)+c).toString();n.push({type:\"fill\",templateHash:m,materialHash:s?()=>m:m,cim:e,materialOverrides:null,colorLocked:e.colorLocked,color:F(a,t,\"Color\",r,l,j),height:0,angle:0,offsetX:0,offsetY:0,scaleX:1,effects:e.effects})}function P(e,t,i,r,n){const a=e.primitiveName,l=e.tintColor?f(e.tintColor):{r:255,g:255,b:255,a:1},[s,c]=T(i,a),m=o(JSON.stringify(e)+c).toString(),p=o(`${e.url}${JSON.stringify(e.colorSubstitutions)}`).toString();n.push({type:\"fill\",templateHash:m,materialHash:s?()=>p:p,cim:e,materialOverrides:null,colorLocked:e.colorLocked,effects:e.effects,color:F(a,t,\"TintColor\",r,l,j),height:F(a,t,\"Height\",r,e.height),scaleX:F(a,t,\"ScaleX\",r,e.scaleX),angle:F(a,t,\"Rotation\",r,e.rotation),offsetX:F(a,t,\"OffsetX\",r,e.offsetX),offsetY:F(a,t,\"OffsetY\",r,e.offsetY)})}function L(e,t,i,r,n){const a=[\"Rotation\",\"OffsetX\",\"OffsetY\"],l=i.filter((t=>t.primitiveName!==e.primitiveName&&-1===a.indexOf(t.propertyName))),s=e.primitiveName,[c,f]=T(i,s),m=o(JSON.stringify(e)+f).toString(),p=o(`${e.separation}${JSON.stringify(e.lineSymbol)}`).toString();n.push({type:\"fill\",templateHash:m,materialHash:c?W(p,t,l,r):p,cim:e,materialOverrides:l,colorLocked:e.colorLocked,effects:e.effects,color:{r:255,g:255,b:255,a:1},height:F(s,t,\"Separation\",r,e.separation),scaleX:1,angle:F(s,t,\"Rotation\",r,e.rotation),offsetX:F(s,t,\"OffsetX\",r,e.offsetX),offsetY:F(s,t,\"OffsetY\",r,e.offsetY)})}function M(e,t,i,r,n){const a=e.primitiveName,[l,s]=T(i,a),c=o(JSON.stringify(e)+s).toString();n.push({type:\"fill\",templateHash:c,materialHash:l?W(c,t,i,r):c,cim:e,materialOverrides:null,colorLocked:e.colorLocked,effects:e.effects,color:{r:128,g:128,b:128,a:1},height:0,angle:0,offsetX:0,offsetY:0,scaleX:1})}function X(e,t,i,r,n,a,l){const s=e.primitiveName,c=f(e.color),m=void 0!==e.width?e.width:4,p=y(e.capStyle),u=h(e.joinStyle),g=e.miterLimit,[d,S]=T(i,s),v=o(JSON.stringify(e)+S).toString();n.push({type:\"line\",templateHash:v,materialHash:d?()=>v:v,cim:e,materialOverrides:null,isOutline:a,colorLocked:e.colorLocked,effects:e.effects,color:F(s,t,\"Color\",r,c,j),width:F(s,t,\"Width\",r,m),cap:F(s,t,\"CapStyle\",r,p),join:F(s,t,\"JoinStyle\",r,u),miterLimit:F(s,t,\"MiterLimit\",r,g),referenceWidth:l,zOrder:A(e.name),isDashed:!1})}function I(e,t,i,r,n,a,l){const s=o(`${e.url}${JSON.stringify(e.colorSubstitutions)}`).toString(),c=e.primitiveName,m=f(e.tintColor),p=void 0!==e.width?e.width:4,u=y(e.capStyle),g=h(e.joinStyle),d=e.miterLimit,[S,v]=T(i,c),b=o(JSON.stringify(e)+v).toString();n.push({type:\"line\",templateHash:b,materialHash:S?()=>s:s,cim:e,materialOverrides:null,isOutline:a,colorLocked:e.colorLocked,effects:e.effects,color:F(c,t,\"TintColor\",r,m,j),width:F(c,t,\"Width\",r,p),cap:F(c,t,\"CapStyle\",r,u),join:F(c,t,\"JoinStyle\",r,g),miterLimit:F(c,t,\"MiterLimit\",r,d),referenceWidth:l,zOrder:A(e.name),isDashed:!1})}function x(e,t,i,r,n,a,l){const s=e.primitiveName,c=void 0!==e.width?e.width:4,f=y(e.capStyle),m=h(e.joinStyle),p=e.miterLimit,[u,g]=T(i,s),d=o(JSON.stringify(e)+g).toString();n.push({type:\"line\",templateHash:d,materialHash:u?W(d,t,i,r):d,cim:e,materialOverrides:null,isOutline:a,colorLocked:e.colorLocked,effects:e.effects,color:{r:128,g:128,b:128,a:1},width:F(s,t,\"Width\",r,c),cap:F(s,t,\"CapStyle\",r,f),join:F(s,t,\"JoinStyle\",r,m),miterLimit:F(s,t,\"MiterLimit\",r,p),referenceWidth:l,zOrder:A(e.name),isDashed:!1})}function w(e,t,i,r,n){const a=e.markerPlacement;if(!a||\"CIMMarkerPlacementInsidePolygon\"!==a.type)return!1;const l=a,s=[\"Rotation\",\"OffsetX\",\"OffsetY\"],c=i.filter((t=>t.primitiveName!==e.primitiveName&&-1===s.indexOf(t.propertyName))),[f,m]=T(i,l.primitiveName),p=o(JSON.stringify(e)+m).toString();return n.push({type:\"fill\",templateHash:p,materialHash:f?W(p,t,c,r):p,cim:e,materialOverrides:c,colorLocked:e.colorLocked,effects:e.effects,color:{r:255,g:255,b:255,a:1},height:F(l.primitiveName,t,\"StepY\",r,l.stepY),scaleX:1,angle:F(l.primitiveName,t,\"GridAngle\",r,l.gridAngle),offsetX:F(l.primitiveName,t,\"OffsetX\",r,l.offsetX),offsetY:F(l.primitiveName,t,\"OffsetY\",r,l.offsetY)}),!0}function z(e,t,i,r,n,a,l){const s=e.primitiveName,c=e.size,m=e.scaleX,p=e.rotation,u=e.offsetX,y=e.offsetY,h=e.tintColor?f(e.tintColor):{r:255,g:255,b:255,a:1},g=o(`${e.url}${JSON.stringify(e.colorSubstitutions)}`).toString(),[d,S]=T(i,s),v=o(JSON.stringify(e)+S).toString();n.push({type:\"marker\",templateHash:v,materialHash:d?()=>g:g,cim:e,materialOverrides:null,colorLocked:e.colorLocked,effects:e.effects,scaleSymbolsProportionally:!1,alignment:a,size:F(s,t,\"Size\",r,c),scaleX:F(s,t,\"ScaleX\",r,m),rotation:F(s,t,\"Rotation\",r,p),offsetX:F(s,t,\"OffsetX\",r,u),offsetY:F(s,t,\"OffsetY\",r,y),color:F(s,t,\"TintColor\",r,h,j),anchorPoint:e.anchorPoint,isAbsoluteAnchorPoint:\"Relative\"!==e.anchorPointUnits,outlineColor:{r:0,g:0,b:0,a:0},outlineWidth:0,frameHeight:0,rotateClockwise:e.rotateClockwise,referenceSize:l,sizeRatio:1,markerPlacement:e.markerPlacement})}function J(e,t,i,o,r,n,a,l){const s=e.markerGraphics;if(!s)return;let c=0;if(e.scaleSymbolsProportionally){const t=e.frame;t&&(c=t.ymax-t.ymin)}for(const f of s)if(f){const s=f.symbol;if(!s)continue;switch(s.type){case\"CIMPointSymbol\":case\"CIMLineSymbol\":case\"CIMPolygonSymbol\":Y(e,f,i,t,o,r,n,a,c,l);break;case\"CIMTextSymbol\":H(e,f,t,i,o,r,n,a,c)}}}function H(e,t,i,r,n,s,c,p,u){const y=[];l.findApplicableOverrides(t,r,y);const h=t.geometry;if(!(\"x\"in h)||!(\"y\"in h))return;const b=t.symbol,N=v(b),k=S(b.fontStyleName);b.font={family:b.fontFamilyName,decoration:N,...k};const O=e.frame,C=h.x-.5*(O.xmin+O.xmax),P=h.y-.5*(O.ymin+O.ymax),L=e.size/u,M=e.primitiveName,X=(b.height||0)*L,I=b.angle||0,x=((b.offsetX||0)+C)*L,w=((b.offsetY||0)+P)*L,z=f(a.getFillColor(b));let J=f(a.getStrokeColor(b)),H=a.getStrokeWidth(b);H||(J=f(a.getFillColor(b.haloSymbol)),H=b.haloSize*L);let Y=\"\";for(const o of r)o.primitiveName===M&&void 0!==o.value&&(Y+=`-${o.primitiveName}-${o.propertyName}-${JSON.stringify(o.value)}`);const $=JSON.stringify(e.effects)+Number(e.colorLocked)+JSON.stringify(e.anchorPoint)+e.anchorPointUnits+JSON.stringify(e.markerPlacement),R=o(JSON.stringify(t)+$+Y).toString();s.push({type:\"text\",templateHash:R,materialHash:()=>o(JSON.stringify(b.font)).toString(),cim:b,materialOverrides:null,colorLocked:e.colorLocked,effects:e.effects,alignment:c,anchorPoint:{x:e.anchorPoint?e.anchorPoint.x:0,y:e.anchorPoint?e.anchorPoint.y:0},isAbsoluteAnchorPoint:\"Relative\"!==e.anchorPointUnits,fontName:b.fontFamilyName,decoration:\"none\",weight:\"normal\",style:\"normal\",size:F(M,i,\"Size\",n,X),angle:F(M,i,\"Rotation\",n,I),offsetX:F(M,i,\"OffsetX\",n,x),offsetY:F(M,i,\"OffsetY\",n,w),horizontalAlignment:g(b.horizontalAlignment),verticalAlignment:d(b.verticalAlignment),text:F(t.primitiveName,i,\"TextString\",n,t.textString,m,b.textCase),color:z,outlineColor:J,outlineSize:H,referenceSize:p,sizeRatio:1,markerPlacement:e.markerPlacement})}function Y(e,t,i,r,n,l,m,p,u,y){const h=t.symbol,g=t.geometry;if(!g)return;const d=h.symbolLayers;if(!d)return;if(y)return void $(e,t,r,i,n,l,m,p,u);let S=d.length;for(;S--;){const y=d[S];if(y&&!1!==y.enable)switch(y.type){case\"CIMSolidFill\":case\"CIMSolidStroke\":{const h=s(g);if(!h)continue;const[d,S,v]=c(h,e.frame,e.size,e.anchorPoint,\"Relative\"!==e.anchorPointUnits),b=\"CIMSolidFill\"===y.type,N={type:\"sdf\",geom:g,asFill:b},k=e.primitiveName,O=e.size,C=e.rotation||0,P=e.offsetX,L=e.offsetY,M=y.primitiveName,X=f(b?a.getFillColor(y):a.getStrokeColor(y)),I=b?{r:0,g:0,b:0,a:0}:f(a.getStrokeColor(y)),x=a.getStrokeWidth(y);if(!b&&!x)break;let w=!1,z=\"\";for(const e of i)e.primitiveName!==M&&e.primitiveName!==k||(void 0!==e.value?z+=`-${e.primitiveName}-${e.propertyName}-${JSON.stringify(e.value)}`:e.valueExpressionInfo&&(w=!0));const J=JSON.stringify({...e,markerGraphics:null}),H=o(JSON.stringify(N)).toString(),Y={type:\"marker\",templateHash:o(JSON.stringify(t)+JSON.stringify(y)+J+z).toString(),materialHash:w?()=>H:H,cim:N,materialOverrides:null,colorLocked:e.colorLocked,effects:e.effects,scaleSymbolsProportionally:e.scaleSymbolsProportionally,alignment:m,anchorPoint:{x:S,y:v},isAbsoluteAnchorPoint:!1,size:F(e.primitiveName,r,\"Size\",n,O),rotation:F(e.primitiveName,r,\"Rotation\",n,C),offsetX:F(e.primitiveName,r,\"OffsetX\",n,P),offsetY:F(e.primitiveName,r,\"OffsetY\",n,L),scaleX:1,frameHeight:u,rotateClockwise:e.rotateClockwise,referenceSize:p,sizeRatio:d,color:F(M,r,\"Color\",n,X,j),outlineColor:F(M,r,\"Color\",n,I,j),outlineWidth:F(M,r,\"Width\",n,x),markerPlacement:e.markerPlacement};l.push(Y);break}default:$(e,t,r,i,n,l,m,p,u)}}}function $(e,t,r,n,l,s,c,f,m){const p=R(e,t);let u=[];const y=[\"Rotation\",\"OffsetX\",\"OffsetY\"];u=n.filter((t=>t.primitiveName!==e.primitiveName||-1===y.indexOf(t.propertyName)));let h=\"\";for(const i of n)void 0!==i.value&&(h+=`-${i.primitiveName}-${i.propertyName}-${JSON.stringify(i.value)}`);const[g,d,S]=a.getTextureAnchor(p),v=e.primitiveName,b=e.rotation||0,N=e.offsetX||0,k=e.offsetY||0,O=o(JSON.stringify(p)+h).toString(),C={type:\"marker\",templateHash:O,materialHash:0===u.length?O:W(O,r,u,l),cim:p,materialOverrides:u,colorLocked:e.colorLocked,effects:e.effects,scaleSymbolsProportionally:e.scaleSymbolsProportionally,alignment:c,anchorPoint:{x:g,y:d},isAbsoluteAnchorPoint:!1,size:e.size,rotation:F(v,r,\"Rotation\",l,b),offsetX:F(v,r,\"OffsetX\",l,N),offsetY:F(v,r,\"OffsetY\",l,k),color:{r:0,g:0,b:0,a:0},outlineColor:{r:0,g:0,b:0,a:0},outlineWidth:0,scaleX:1,frameHeight:m,rotateClockwise:e.rotateClockwise,referenceSize:f,sizeRatio:S/i(e.size),markerPlacement:e.markerPlacement};s.push(C)}function R(e,t){return{type:e.type,enable:!0,name:e.name,colorLocked:e.colorLocked,primitiveName:e.primitiveName,anchorPoint:e.anchorPoint,anchorPointUnits:e.anchorPointUnits,offsetX:0,offsetY:0,rotateClockwise:e.rotateClockwise,rotation:0,size:e.size,billboardMode3D:e.billboardMode3D,depth3D:e.depth3D,frame:e.frame,markerGraphics:[t],scaleSymbolsProportionally:e.scaleSymbolsProportionally,respectFrame:e.respectFrame,clippingPath:e.clippingPath,effects:e.effects}}function A(e){if(e&&0===e.indexOf(\"Level_\")){const t=parseInt(e.substr(6),10);if(NaN!==t)return t}return 0}function j(t){if(!t||0===t.length)return null;const i=new e(t).toRgba();return{r:i[0],g:i[1],b:i[2],a:i[3]}}function F(e,t,i,o,r,a,l){const s=t[e];if(s){const e=s[i];if(\"string\"==typeof e||\"number\"==typeof e||e instanceof Array)return a?a.call(null,e,l):e;if(null!=e&&e instanceof n)return(t,i,n)=>{let s=p(e,t,{$view:n},o.geometryType,i);return null!==s&&a&&(s=a.call(null,s,l)),null!==s?s:r}}return r}function W(e,t,i,r){for(const o of i){if(o.valueExpressionInfo){const e=t[o.primitiveName]&&t[o.primitiveName][o.propertyName];e instanceof n&&(o.fn=(t,i,o)=>p(e,t,{$view:o},r.geometryType,i))}}return(t,r,n)=>{for(const e of i)e.fn&&(e.value=e.fn(t,r,n));return o(e+l.buildOverrideKey(i)).toString()}}function D(e,t){if(!t||0===t.length)return e;const i=JSON.parse(JSON.stringify(e));return l.applyOverrides(i,t),i}function T(e,t){let i=!1,o=\"\";for(const r of e)r.primitiveName===t&&(void 0!==r.value?o+=`-${r.primitiveName}-${r.propertyName}-${JSON.stringify(r.value)}`:r.valueExpressionInfo&&(i=!0));return[i,o]}export{D as analyzeCIMResource,k as analyzeCIMSymbol};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport{isExtent as t}from\"../../geometry/support/jsonUtils.js\";import{packFloatRGBA as n}from\"./packingUtils.js\";import o from\"./Rect.js\";function r(t){if(!t)return null;switch(t.type){case\"CIMPointSymbol\":{const n=t.symbolLayers;return n&&1===n.length?r(n[0]):null}case\"CIMVectorMarker\":{const n=t.markerGraphics;if(!n||1!==n.length)return null;const o=n[0];if(!o)return null;const r=o.geometry;if(!r)return null;const l=o.symbol;return!l||\"CIMPolygonSymbol\"!==l.type&&\"CIMLineSymbol\"!==l.type?null:{geom:r,asFill:\"CIMPolygonSymbol\"===l.type}}case\"sdf\":return{geom:t.geom,asFill:t.asFill}}return null}function l(t){const n=t.markerGraphics;if(!n||1!==n.length)return null;const o=n[0];if(!o)return null;const r=o.symbol;return!r||\"CIMPolygonSymbol\"!==r.type&&\"CIMLineSymbol\"!==r.type?null:r}function e(t){return t?t.rings?t.rings:t.paths?t.paths:void 0!==t.xmin&&void 0!==t.ymin&&void 0!==t.xmax&&void 0!==t.ymax?[[[t.xmin,t.ymin],[t.xmin,t.ymax],[t.xmax,t.ymax],[t.xmax,t.ymin],[t.xmin,t.ymin]]]:null:null}function i(t){let n=1/0,r=-1/0,l=1/0,e=-1/0;for(const o of t)for(const t of o)t[0]<n&&(n=t[0]),t[0]>r&&(r=t[0]),t[1]<l&&(l=t[1]),t[1]>e&&(e=t[1]);return new o(n,l,r-n,e-l)}function s(t){let n=1/0,o=-1/0,r=1/0,l=-1/0;for(const e of t)for(const t of e)t[0]<n&&(n=t[0]),t[0]>o&&(o=t[0]),t[1]<r&&(r=t[1]),t[1]>l&&(l=t[1]);return[n,r,o,l]}function f(n){return n?n.rings?s(n.rings):n.paths?s(n.paths):t(n)?[n.xmin,n.ymin,n.xmax,n.ymax]:null:null}function a(t,n,o,r,l){const[e,i,s,f]=t;if(s<e||f<i)return[0,0,0];const a=s-e,m=f-i,u=128,c=1,y=Math.floor(.5*(.5*u-c)),h=(u-2*(y+c))/Math.max(a,m),x=Math.round(a*h)+2*y,M=Math.round(m*h)+2*y;let g=1;if(n){g=M/h/(n.ymax-n.ymin)}let p=0,d=0;if(r)if(l){if(n&&o&&n.ymax-n.ymin>0){const t=(n.xmax-n.xmin)/(n.ymax-n.ymin);p=r.x/(o*t),d=r.y/o}}else p=r.x,d=r.y;p=.5*(n.xmax+n.xmin)+p*(n.xmax-n.xmin),d=.5*(n.ymax+n.ymin)+d*(n.ymax-n.ymin),p-=e,d-=i,p*=h,d*=h,p+=y,d+=y;return[g,p/x-.5,-(d/M-.5)]}function m(t){const n=e(t.geom),o=i(n),r=128,l=1,s=Math.floor(.5*(.5*r-l)),f=(r-2*(s+l))/Math.max(o.width,o.height),a=Math.round(o.width*f)+2*s,m=Math.round(o.height*f)+2*s,h=[];for(const e of n)if(e&&e.length>1){const n=[];for(const r of e){let[l,e]=r;l-=o.x,e-=o.y,l*=f,e*=f,l+=s-.5,e+=s-.5,t.asFill?n.push([l,e]):n.push([Math.round(l),Math.round(e)])}if(t.asFill){const t=n.length-1;n[0][0]===n[t][0]&&n[0][1]===n[t][1]||n.push(n[0])}h.push(n)}const x=u(h,a,m,s);return t.asFill&&c(h,a,m,s,x),[y(x,s),a,m]}function u(t,n,o,r){const l=n*o,e=new Array(l),i=r*r+1;for(let s=0;s<l;++s)e[s]=i;for(const s of t){const t=s.length;for(let l=1;l<t;++l){const t=s[l-1],i=s[l];let f,a,m,u;t[0]<i[0]?(f=t[0],a=i[0]):(f=i[0],a=t[0]),t[1]<i[1]?(m=t[1],u=i[1]):(m=i[1],u=t[1]);let c=Math.floor(f)-r,y=Math.floor(a)+r,h=Math.floor(m)-r,x=Math.floor(u)+r;c<0&&(c=0),y>n&&(y=n),h<0&&(h=0),x>o&&(x=o);const M=i[0]-t[0],g=i[1]-t[1],p=M*M+g*g;for(let r=c;r<y;r++)for(let l=h;l<x;l++){let s,f,a=(r-t[0])*M+(l-t[1])*g;a<0?(s=t[0],f=t[1]):a>p?(s=i[0],f=i[1]):(a/=p,s=t[0]+a*M,f=t[1]+a*g);const m=(r-s)*(r-s)+(l-f)*(l-f),u=(o-l-1)*n+r;m<e[u]&&(e[u]=m)}}}for(let s=0;s<l;++s)e[s]=Math.sqrt(e[s]);return e}function c(t,n,o,r,l){for(const e of t){const t=e.length;for(let i=1;i<t;++i){const t=e[i-1],s=e[i];let f,a,m,u;t[0]<s[0]?(f=t[0],a=s[0]):(f=s[0],a=t[0]),t[1]<s[1]?(m=t[1],u=s[1]):(m=s[1],u=t[1]);let c=Math.floor(f),y=Math.floor(a)+1,h=Math.floor(m),x=Math.floor(u)+1;c<r&&(c=r),y>n-r&&(y=n-r),h<r&&(h=r),x>o-r&&(x=o-r);for(let e=h;e<x;++e){if(t[1]>e==s[1]>e)continue;const i=(o-e-1)*n;for(let n=c;n<y;++n)n<(s[0]-t[0])*(e-t[1])/(s[1]-t[1])+t[0]&&(l[i+n]=-l[i+n]);for(let t=r;t<c;++t)l[i+t]=-l[i+t]}}}}function y(t,o){const r=2*o,l=t.length,e=new Uint8Array(4*l);for(let i=0;i<l;++i){const o=.5-t[i]/r;n(o,e,4*i)}return e}export{m as buildSDF,f as getExtent,r as getSDFInfo,a as getSDFMetrics,l as getSDFSymbol};\n"],"sourceRoot":""}