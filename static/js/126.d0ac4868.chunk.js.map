{"version":3,"sources":["../node_modules/@arcgis/core/layers/graphics/objectIdUtils.js","../node_modules/@arcgis/core/layers/MapNotesLayer.js"],"names":["t","n","o","e","attributes","isFinite","Math","max","C","layers","some","layerDefinition","visibilityField","M","w","name","alias","type","nullable","editable","I","E","arguments","visibilityMode","this","graphics","sourceLayer","layer","on","item","J","l","readOnly","prototype","s","F","geometryType","geometryTypeJSON","layerId","title","identifyingSymbol","f","toJSON","d","b","g","_","capabilities","operations","supportsMapNotesEditing","featureCollections","featureCollectionJSON","featureCollectionType","legendEnabled","minScale","maxScale","sublayers","c","map","id","r","origin","x","read","items","featureCollection","length","u","xmin","ymin","xmax","ymax","spatialReference","m","WGS84","fromJSON","reduce","extent","union","_findSublayer","featureSet","a","i","find","drawingInfo","renderer","symbol","features","geometry","popupInfo","S","popupTemplate","push","p","_writeMapNoteSublayer","messages","y","addResolvingPromise","loadFromPortal","supportedTypes","Promise","resolve","Object","assign","_writeMapNote","_normalizeObjectIds","objectIdField","fields","graphic","T","Set","has","add","N","v","j","L","O","h","json","origins","write","enabled","target","ignoreOrigin","overridePolicy","Number","nonNullable","value","D"],"mappings":"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","file":"static/js/126.d0ac4868.chunk.js","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nconst t=1;function n(t,n){let o=0;for(const r of n){var e;const n=null==(e=r.attributes)?void 0:e[t];\"number\"==typeof n&&isFinite(n)&&(o=Math.max(o,n))}return o}export{n as findLastObjectIdFromFeatures,t as initialObjectId};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../chunks/tslib.es6.js\";import\"../core/has.js\";import{clone as t}from\"../core/lang.js\";import{setDeepValue as r}from\"../core/object.js\";import{isNone as o,isSome as i}from\"../core/maybe.js\";import\"../core/Logger.js\";import\"../core/accessorSupport/ensureType.js\";import{property as l}from\"../core/accessorSupport/decorators/property.js\";import{reader as a}from\"../core/accessorSupport/decorators/reader.js\";import n from\"../core/Warning.js\";import{subclass as s}from\"../core/accessorSupport/decorators/subclass.js\";import{writer as p}from\"../core/accessorSupport/decorators/writer.js\";import y from\"../core/Error.js\";import\"../core/urlUtils.js\";import\"../core/uuid.js\";import\"../portal/support/resourceExtension.js\";import m from\"../geometry/SpatialReference.js\";import u from\"../geometry/Extent.js\";import\"../geometry.js\";import c from\"../core/Collection.js\";import d from\"../symbols/SimpleLineSymbol.js\";import f from\"../symbols/SimpleFillSymbol.js\";import b from\"../symbols/SimpleMarkerSymbol.js\";import g from\"../symbols/TextSymbol.js\";import\"../symbols.js\";import S from\"../Graphic.js\";import h from\"./Layer.js\";import{MultiOriginJSONMixin as O}from\"../core/MultiOriginJSONSupport.js\";import{OperationalLayer as j}from\"./mixins/OperationalLayer.js\";import w from\"./support/Field.js\";import{BlendLayer as N}from\"./mixins/BlendLayer.js\";import{PortalLayer as L}from\"./mixins/PortalLayer.js\";import{ScaleRangeLayer as v}from\"./mixins/ScaleRangeLayer.js\";import x from\"./FeatureLayer.js\";import J from\"./GraphicsLayer.js\";import{findLastObjectIdFromFeatures as T}from\"./graphics/objectIdUtils.js\";function C(e){return e.layers.some((e=>null!=e.layerDefinition.visibilityField))}const M=new w({name:\"OBJECTID\",alias:\"OBJECTID\",type:\"oid\",nullable:!1,editable:!1}),I=new w({name:\"title\",alias:\"Title\",type:\"string\",nullable:!0,editable:!0});let E=class extends J{constructor(){super(...arguments),this.visibilityMode=\"inherited\"}initialize(){for(const e of this.graphics)e.sourceLayer=this.layer;this.graphics.on(\"after-add\",(e=>{e.item.sourceLayer=this.layer})),this.graphics.on(\"after-remove\",(e=>{e.item.sourceLayer=null}))}get sublayers(){return this.graphics}};e([l({readOnly:!0})],E.prototype,\"sublayers\",null),e([l()],E.prototype,\"layer\",void 0),e([l({readOnly:!0})],E.prototype,\"visibilityMode\",void 0),E=e([s(\"esri.layers.MapNotesLayer.MapNotesSublayer\")],E);const F=[{geometryType:\"polygon\",geometryTypeJSON:\"esriGeometryPolygon\",layerId:\"polygonLayer\",title:\"Polygons\",identifyingSymbol:(new f).toJSON()},{geometryType:\"polyline\",geometryTypeJSON:\"esriGeometryPolyline\",layerId:\"polylineLayer\",title:\"Polylines\",identifyingSymbol:(new d).toJSON()},{geometryType:\"multipoint\",geometryTypeJSON:\"esriGeometryMultipoint\",layerId:\"multipointLayer\",title:\"Multipoints\",identifyingSymbol:(new b).toJSON()},{geometryType:\"point\",geometryTypeJSON:\"esriGeometryPoint\",layerId:\"pointLayer\",title:\"Points\",identifyingSymbol:(new b).toJSON()},{geometryType:\"point\",geometryTypeJSON:\"esriGeometryPoint\",layerId:\"textLayer\",title:\"Text\",identifyingSymbol:(new g).toJSON()}];let _=class extends(N(v(j(L(O(h)))))){constructor(e){super(e),this.capabilities={operations:{supportsMapNotesEditing:!0}},this.featureCollections=null,this.featureCollectionJSON=null,this.featureCollectionType=\"notes\",this.legendEnabled=!1,this.minScale=0,this.maxScale=0,this.sublayers=new c(F.map((e=>new E({id:e.layerId,title:e.title,layer:this})))),this.title=\"Map Notes\",this.type=\"map-notes\",this.visibilityMode=\"inherited\"}readCapabilities(e,t,r){return{operations:{supportsMapNotesEditing:!C(t)&&\"portal-item\"!==(null==r?void 0:r.origin)}}}readFeatureCollections(e,t,r){if(!C(t))return null;const o=t.layers.map((e=>{const t=new x;return t.read(e,r),t}));return new c({items:o})}readLegacyfeatureCollectionJSON(e,r){return C(r)?t(r.featureCollection):null}readFullExtent(e,t){if(!t.layers.length)return new u({xmin:-180,ymin:-90,xmax:180,ymax:90,spatialReference:m.WGS84});const r=m.fromJSON(t.layers[0].layerDefinition.spatialReference);return t.layers.reduce(((e,t)=>{const r=t.layerDefinition.extent;return r?u.fromJSON(r).union(e):e}),new u({spatialReference:r}))}readMinScale(e,t){for(const r of t.layers)if(null!=r.layerDefinition.minScale)return r.layerDefinition.minScale;return 0}readMaxScale(e,t){for(const r of t.layers)if(null!=r.layerDefinition.maxScale)return r.layerDefinition.maxScale;return 0}get multipointLayer(){return this._findSublayer(\"multipointLayer\")}get pointLayer(){return this._findSublayer(\"pointLayer\")}get polygonLayer(){return this._findSublayer(\"polygonLayer\")}get polylineLayer(){return this._findSublayer(\"polylineLayer\")}readSublayers(e,t,r){if(C(t))return null;const o=[];for(let l=0;l<t.layers.length;l++){var i;const{layerDefinition:e,featureSet:r}=t.layers[l],a=null!=(i=e.geometryType)?i:r.geometryType,n=F.find((t=>{var r,o,i;return a===t.geometryTypeJSON&&(null==(r=e.drawingInfo)||null==(o=r.renderer)||null==(i=o.symbol)?void 0:i.type)===t.identifyingSymbol.type}));if(n){const t=new E({id:n.layerId,title:e.name,layer:this,graphics:r.features.map((({geometry:e,symbol:t,attributes:r,popupInfo:o})=>S.fromJSON({attributes:r,geometry:e,symbol:t,popupTemplate:o})))});o.push(t)}}return new c(o)}writeSublayers(e,t,o,i){const{minScale:l,maxScale:a}=this,n=e.some((e=>e.graphics.length>0));if(!this.capabilities.operations.supportsMapNotesEditing){var s;if(n)null==i||null==(s=i.messages)||s.push(new y(\"map-notes-layer:editing-not-supported\",\"New map notes cannot be added to this layer\"));return}const p=[];for(const r of F){const t=e.find((e=>r.layerId===e.id));this._writeMapNoteSublayer(p,t,r,l,a,i)}r(\"featureCollection.layers\",p,t)}get textLayer(){return this._findSublayer(\"textLayer\")}load(e){return this.addResolvingPromise(this.loadFromPortal({supportedTypes:[\"Feature Collection\"]},e)),Promise.resolve(this)}read(e,r){\"featureCollection\"in e&&(e=t(e),Object.assign(e,e.featureCollection)),super.read(e,r)}_findSublayer(e){var t,r;return o(this.sublayers)?null:null!=(t=null==(r=this.sublayers)?void 0:r.find((t=>t.id===e)))?t:null}_writeMapNoteSublayer(e,r,i,l,a,n){const s=[];if(!o(r)){for(const e of r.graphics)this._writeMapNote(s,e,i.geometryType,n);this._normalizeObjectIds(s,M),e.push({layerDefinition:{name:r.title,drawingInfo:{renderer:{type:\"simple\",symbol:t(i.identifyingSymbol)}},geometryType:i.geometryTypeJSON,minScale:l,maxScale:a,objectIdField:\"OBJECTID\",fields:[M.toJSON(),I.toJSON()]},featureSet:{features:s,geometryType:i.geometryTypeJSON}})}}_writeMapNote(e,t,r,l){if(o(t))return;const{geometry:a,symbol:s,popupTemplate:p}=t;if(o(a))return;var y,m;if(a.type!==r)return void(null==l||null==(y=l.messages)||y.push(new n(\"map-notes-layer:invalid-geometry-type\",`Geometry \"${a.type}\" cannot be saved in \"${r}\" layer`,{graphic:t})));if(o(s))return void(null==l||null==(m=l.messages)||m.push(new n(\"map-notes-layer:no-symbol\",\"Skipping map notes with no symbol\",{graphic:t})));const u={attributes:{...t.attributes},geometry:a.toJSON(),symbol:s.toJSON()};i(p)&&(u.popupInfo=p.toJSON()),e.push(u)}_normalizeObjectIds(e,t){const r=t.name;let o=T(r,e)+1;const i=new Set;for(const l of e){l.attributes||(l.attributes={});const{attributes:e}=l;(null==e[r]||i.has(e[r]))&&(e[r]=o++),i.add(e[r])}}};e([l({readOnly:!0})],_.prototype,\"capabilities\",void 0),e([a([\"portal-item\",\"web-map\"],\"capabilities\",[\"layers\"])],_.prototype,\"readCapabilities\",null),e([l({readOnly:!0})],_.prototype,\"featureCollections\",void 0),e([a([\"web-map\",\"portal-item\"],\"featureCollections\",[\"layers\"])],_.prototype,\"readFeatureCollections\",null),e([l({readOnly:!0,json:{origins:{\"web-map\":{write:{enabled:!0,target:\"featureCollection\"}}}}})],_.prototype,\"featureCollectionJSON\",void 0),e([a([\"web-map\",\"portal-item\"],\"featureCollectionJSON\",[\"featureCollection\"])],_.prototype,\"readLegacyfeatureCollectionJSON\",null),e([l({readOnly:!0,json:{read:!1,write:{enabled:!0,ignoreOrigin:!0}}})],_.prototype,\"featureCollectionType\",void 0),e([l({json:{write:!1}})],_.prototype,\"fullExtent\",void 0),e([a([\"web-map\",\"portal-item\"],\"fullExtent\",[\"layers\"])],_.prototype,\"readFullExtent\",null),e([l({readOnly:!0,json:{origins:{\"web-map\":{write:{target:\"featureCollection.showLegend\",overridePolicy(){return{enabled:null!=this.featureCollectionJSON}}}}}}})],_.prototype,\"legendEnabled\",void 0),e([l({type:[\"show\",\"hide\"]})],_.prototype,\"listMode\",void 0),e([l({type:Number,nonNullable:!0,json:{write:!1}})],_.prototype,\"minScale\",void 0),e([a([\"web-map\",\"portal-item\"],\"minScale\",[\"layers\"])],_.prototype,\"readMinScale\",null),e([l({type:Number,nonNullable:!0,json:{write:!1}})],_.prototype,\"maxScale\",void 0),e([a([\"web-map\",\"portal-item\"],\"maxScale\",[\"layers\"])],_.prototype,\"readMaxScale\",null),e([l({readOnly:!0})],_.prototype,\"multipointLayer\",null),e([l({value:\"ArcGISFeatureLayer\",type:[\"ArcGISFeatureLayer\"]})],_.prototype,\"operationalLayerType\",void 0),e([l({readOnly:!0})],_.prototype,\"pointLayer\",null),e([l({readOnly:!0})],_.prototype,\"polygonLayer\",null),e([l({readOnly:!0})],_.prototype,\"polylineLayer\",null),e([l({readOnly:!0,json:{origins:{\"web-map\":{write:{ignoreOrigin:!0}}}}})],_.prototype,\"sublayers\",void 0),e([a(\"web-map\",\"sublayers\",[\"layers\"])],_.prototype,\"readSublayers\",null),e([p(\"web-map\",\"sublayers\")],_.prototype,\"writeSublayers\",null),e([l({readOnly:!0})],_.prototype,\"textLayer\",null),e([l()],_.prototype,\"title\",void 0),e([l({readOnly:!0,json:{read:!1}})],_.prototype,\"type\",void 0),_=e([s(\"esri.layers.MapNotesLayer\")],_);var D=_;export default D;\n"],"sourceRoot":""}