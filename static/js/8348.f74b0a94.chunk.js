"use strict";(globalThis.webpackChunkimaps=globalThis.webpackChunkimaps||[]).push([[8348],{18016:(e,t,s)=>{s.d(t,{nu:()=>a});s(51064);var i=s(52410),r=(s(16354),s(99779),s(44218));function n(e){return e?.timeZoneIANA?e?.timeZoneIANA:e?.timeZone?(0,r.G)(e,""):""}class a{constructor(){this.dateTimeReferenceMetaData=null,this._fieldTimeZoneIndex={},this._fieldIndex=null,this._ianaPreferred=null,this._ianaTimeInfo=null,this._ianaEditFields=null,this._ianaLayerDateFields=null}static create(e,t){const s=new a;return s.dateTimeReferenceMetaData=t,s._fieldIndex=e instanceof i.Z?e:new i.Z(e),s}static createFromLayer(e){if(!e)return null;if(!e.fieldsIndex)return!e.declaredClass&&e.fields?a.create(e.fields,e):null;const t=new a;return t._fieldIndex=e.fieldsIndex,t.dateTimeReferenceMetaData={timeInfo:e?.timeInfo?.toJSON()??null,editFieldsInfo:e?.editFieldsInfo?.toJSON()??null,dateFieldsTimeReference:e?.dateFieldsTimeReference?.toJSON()??null,preferredTimeReference:e?.preferredTimeReference?.toJSON()??null,datesInUnknownTimezone:!0===e?.datesInUnknownTimezone},t}fieldTimeZone(e){const t=this._fieldIndex?.get(e);if(!t)return null;if("date"!==t.type&&"esriFieldTypeDate"!==t.type)return null;const s=this._fieldTimeZoneIndex[t.name];if(void 0!==s)return s;const i=[{field:this.dateTimeReferenceMetaData?.editFieldsInfo?.creationDateField,timeReference:this.dateTimeReferenceMetaData?.editFieldsInfo?.dateFieldsTimeReference,isunknown:!0===this.dateTimeReferenceMetaData?.datesInUnknownTimezone},{field:this.dateTimeReferenceMetaData?.editFieldsInfo?.editDateField,timeReference:this.dateTimeReferenceMetaData?.editFieldsInfo?.dateFieldsTimeReference,isunknown:!0===this.dateTimeReferenceMetaData?.datesInUnknownTimezone},{field:this.dateTimeReferenceMetaData?.timeInfo?.startTimeField,timeReference:this.dateTimeReferenceMetaData?.timeInfo?.timeReference,isunknown:!0===this.dateTimeReferenceMetaData?.datesInUnknownTimezone},{field:this.dateTimeReferenceMetaData?.timeInfo?.endTimeField,timeReference:this.dateTimeReferenceMetaData?.timeInfo?.timeReference,isunknown:!0===this.dateTimeReferenceMetaData?.datesInUnknownTimezone}];for(const n of i)if(n.field===t.name){const e=this.convertToIANA(n.timeReference,n.isunknown);return this._fieldTimeZoneIndex[t.name]=e,e}const r=this.convertToIANA(this.dateTimeReferenceMetaData?.dateFieldsTimeReference,this.dateTimeReferenceMetaData?.datesInUnknownTimezone);return this._fieldTimeZoneIndex[t.name]=r,r}convertToIANA(e,t){return t?"unknown":n(e)}get layerPreferredTimeZone(){if(null!==this._ianaPreferred)return this._ianaPreferred;this._ianaPreferred="";const e=this.dateTimeReferenceMetaData?.preferredTimeReference;return this._ianaPreferred=this.convertToIANA(e,!0===this.dateTimeReferenceMetaData?.datesInUnknownTimezone),this._ianaPreferred}get layerTimeInfoTimeZone(){if(null!==this._ianaTimeInfo)return this._ianaTimeInfo;this._ianaTimeInfo="";const e=this.dateTimeReferenceMetaData?.timeInfo?.timeReference;return this._ianaTimeInfo=this.convertToIANA(e,!1),this._ianaTimeInfo}get layerEditFieldsTimeZone(){if(null!==this._ianaEditFields)return this._ianaEditFields;this._ianaEditFields="";const e=this.dateTimeReferenceMetaData?.editFieldsInfo?.dateFieldsTimeReference;return this._ianaEditFields=this.convertToIANA(e,this.dateTimeReferenceMetaData?.datesInUnknownTimezone),this._ianaEditFields}get layerDateFieldsTimeZone(){if(null!==this._ianaLayerDateFields)return this._ianaLayerDateFields;this._ianaLayerDateFields="";const e=this.dateTimeReferenceMetaData?.dateFieldsTimeReference;return this._ianaLayerDateFields=this.convertToIANA(e,!0===this.dateTimeReferenceMetaData?.datesInUnknownTimezone),this._ianaLayerDateFields}}},40237:(e,t,s)=>{s.d(t,{N:()=>i});const i={convertToGEGeometry:function(e,t){return null==t?null:e.convertJSONToGeometry(t)},exportPoint:function(e,t,s){const i=new r(e.getPointX(t),e.getPointY(t),s),n=e.hasZ(t),a=e.hasM(t);return n&&(i.z=e.getPointZ(t)),a&&(i.m=e.getPointM(t)),i},exportPolygon:function(e,t,s){return new n(e.exportPaths(t),s,e.hasZ(t),e.hasM(t))},exportPolyline:function(e,t,s){return new a(e.exportPaths(t),s,e.hasZ(t),e.hasM(t))},exportMultipoint:function(e,t,s){return new o(e.exportPoints(t),s,e.hasZ(t),e.hasM(t))},exportExtent:function(e,t,s){const i=e.hasZ(t),r=e.hasM(t),n=new h(e.getXMin(t),e.getYMin(t),e.getXMax(t),e.getYMax(t),s);if(i){const s=e.getZExtent(t);n.zmin=s.vmin,n.zmax=s.vmax}if(r){const s=e.getMExtent(t);n.mmin=s.vmin,n.mmax=s.vmax}return n}};class r{constructor(e,t,s){this.x=e,this.y=t,this.spatialReference=s,this.z=void 0,this.m=void 0}}class n{constructor(e,t,s,i){this.rings=e,this.spatialReference=t,this.hasZ=void 0,this.hasM=void 0,s&&(this.hasZ=s),i&&(this.hasM=i)}}class a{constructor(e,t,s,i){this.paths=e,this.spatialReference=t,this.hasZ=void 0,this.hasM=void 0,s&&(this.hasZ=s),i&&(this.hasM=i)}}class o{constructor(e,t,s,i){this.points=e,this.spatialReference=t,this.hasZ=void 0,this.hasM=void 0,s&&(this.hasZ=s),i&&(this.hasM=i)}}class h{constructor(e,t,s,i,r){this.xmin=e,this.ymin=t,this.xmax=s,this.ymax=i,this.spatialReference=r,this.zmin=void 0,this.zmax=void 0,this.mmin=void 0,this.mmax=void 0}}},85403:(e,t,s)=>{s.d(t,{Y:()=>n});var i=s(92026);function r(e,t){return e?t?4:3:t?3:2}function n(e,t,s,n,h){if((0,i.Wi)(t)||!t.lengths.length)return null;const u="upperLeft"===h?.originPosition?-1:1;e.lengths.length&&(e.lengths.length=0),e.coords.length&&(e.coords.length=0);const l=e.coords,d=[],c=s?[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY]:[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY],{lengths:f,coords:_}=t,m=r(s,n);let p=0;for(const i of f){const e=a(c,_,p,i,s,n,u);e&&d.push(e),p+=i*m}if(d.sort(((e,t)=>{let i=u*e[2]-u*t[2];return 0===i&&s&&(i=e[4]-t[4]),i})),d.length){let e=6*d[0][2];l[0]=d[0][0]/e,l[1]=d[0][1]/e,s&&(e=6*d[0][4],l[2]=0!==e?d[0][3]/e:0),(l[0]<c[0]||l[0]>c[1]||l[1]<c[2]||l[1]>c[3]||s&&(l[2]<c[4]||l[2]>c[5]))&&(l.length=0)}if(!l.length){const e=t.lengths[0]?o(_,0,f[0],s,n):null;if(!e)return null;l[0]=e[0],l[1]=e[1],s&&e.length>2&&(l[2]=e[2])}return e}function a(e,t,s,i,n,a){let o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:1;const h=r(n,a);let u=s,l=s+h,d=0,c=0,f=0,_=0,m=0;for(let r=0,g=i-1;r<g;r++,u+=h,l+=h){const s=t[u],i=t[u+1],r=t[u+2],a=t[l],o=t[l+1],h=t[l+2];let p=s*o-a*i;_+=p,d+=(s+a)*p,c+=(i+o)*p,n&&(p=s*h-a*r,f+=(r+h)*p,m+=p),s<e[0]&&(e[0]=s),s>e[1]&&(e[1]=s),i<e[2]&&(e[2]=i),i>e[3]&&(e[3]=i),n&&(r<e[4]&&(e[4]=r),r>e[5]&&(e[5]=r))}if(_*o>0&&(_*=-1),m*o>0&&(m*=-1),!_)return null;const p=[d,c,.5*_];return n&&(p[3]=f,p[4]=.5*m),p}function o(e,t,s,i,n){const a=r(i,n);let o=t,c=t+a,f=0,_=0,m=0,p=0;for(let r=0,g=s-1;r<g;r++,o+=a,c+=a){const t=e[o],s=e[o+1],r=e[o+2],n=e[c],a=e[c+1],g=e[c+2],y=i?u(t,s,r,n,a,g):h(t,s,n,a);if(y)if(f+=y,i){const e=d(t,s,r,n,a,g);_+=y*e[0],m+=y*e[1],p+=y*e[2]}else{const e=l(t,s,n,a);_+=y*e[0],m+=y*e[1]}}return f>0?i?[_/f,m/f,p/f]:[_/f,m/f]:s>0?i?[e[t],e[t+1],e[t+2]]:[e[t],e[t+1]]:null}function h(e,t,s,i){const r=s-e,n=i-t;return Math.sqrt(r*r+n*n)}function u(e,t,s,i,r,n){const a=i-e,o=r-t,h=n-s;return Math.sqrt(a*a+o*o+h*h)}function l(e,t,s,i){return[e+.5*(s-e),t+.5*(i-t)]}function d(e,t,s,i,r,n){return[e+.5*(i-e),t+.5*(r-t),s+.5*(n-s)]}},19995:(e,t,s)=>{s.d(t,{_W:()=>c,iV:()=>m,oj:()=>g});var i=s(92026),r=s(79803),n=s(40237),a=s(92975),o=s(81753);const h=[0,0];function u(e,t){if(!t)return null;if("x"in t){const s={x:0,y:0};return[s.x,s.y]=e(t.x,t.y,h),null!=t.z&&(s.z=t.z),null!=t.m&&(s.m=t.m),s}if("xmin"in t){const s={xmin:0,ymin:0,xmax:0,ymax:0};return[s.xmin,s.ymin]=e(t.xmin,t.ymin,h),[s.xmax,s.ymax]=e(t.xmax,t.ymax,h),t.hasZ&&(s.zmin=t.zmin,s.zmax=t.zmax,s.hasZ=!0),t.hasM&&(s.mmin=t.mmin,s.mmax=t.mmax,s.hasM=!0),s}return"rings"in t?{rings:l(t.rings,e),hasM:t.hasM,hasZ:t.hasZ}:"paths"in t?{paths:l(t.paths,e),hasM:t.hasM,hasZ:t.hasZ}:"points"in t?{points:d(t.points,e),hasM:t.hasM,hasZ:t.hasZ}:null}function l(e,t){const s=[];for(const i of e)s.push(d(i,t));return s}function d(e,t){const s=[];for(const i of e){const e=t(i[0],i[1],[0,0]);s.push(e),i.length>2&&e.push(i[2]),i.length>3&&e.push(i[3])}return s}async function c(e,t){if(!e||!t)return;const s=Array.isArray(e)?e.map((e=>(0,i.pC)(e.geometry)?e.geometry.spatialReference:null)).filter(i.pC):[e];await(0,r.iQ)(s.map((e=>({source:e,dest:t}))))}const f=u.bind(null,o.hG),_=u.bind(null,o.R6);function m(e,t,s,i){if(!e)return e;if(s||(s=t,t=e.spatialReference),!(0,a.JY)(t)||!(0,a.JY)(s)||(0,a.fS)(t,s))return e;if((0,o.Q8)(t,s)){const t=(0,a.sS)(s)?f(e):_(e);return t.spatialReference=s,t}return(0,r.oj)(n.N,[e],t,s,null,i)[0]}const p=new class{constructor(){this._jobs=[],this._timer=null,this._process=this._process.bind(this)}async push(e,t,s){if(!e||!e.length||!t||!s||(0,a.fS)(t,s))return e;const i={geometries:e,inSpatialReference:t,outSpatialReference:s,resolve:null};return this._jobs.push(i),new Promise((e=>{i.resolve=e,null===this._timer&&(this._timer=setTimeout(this._process,10))}))}_process(){this._timer=null;const e=this._jobs.shift();if(!e)return;const{geometries:t,inSpatialReference:s,outSpatialReference:i,resolve:h}=e;(0,o.Q8)(s,i)?(0,a.sS)(i)?h(t.map(f)):h(t.map(_)):h((0,r.oj)(n.N,t,s,i,null,null)),this._jobs.length>0&&(this._timer=setTimeout(this._process,10))}};function g(e,t,s){return p.push(e,t,s)}},84328:(e,t,s)=>{s.d(t,{KS:()=>u,PX:()=>n,QS:()=>d,_I:()=>i,jL:()=>h,nE:()=>l,vs:()=>o,xp:()=>a});const i=8388607,r=8388608,n=0,a=1,o=e=>(e&r)>>>23,h=e=>e&i,u=e=>o(e)===a?254:255;function l(e){return o(e)===a}function d(e,t){return((t?r:0)|e)>>>0}},64668:(e,t,s)=>{s.d(t,{J:()=>r,g:()=>i});const i=(e,t)=>e&&function(){for(var e=arguments.length,s=new Array(e),i=0;i<e;i++)s[i]=arguments[i];return t.warn("DEBUG:",...s)}||(()=>null),r=!1},45367:(e,t,s)=>{s.d(t,{Z:()=>T});var i=s(10064),r=s(93169),n=s(32718),a=s(16889),o=s(92026),h=s(66978),u=s(48732),l=s(52410),d=s(94109),c=s(84328),f=s(84319),_=s(64668),m=s(98290),p=s(8548);const g=n.Z.getLogger("esri.views.layers.2d.features.support.AttributeStore"),y=(0,_.g)(_.J,g),I={sharedArrayBuffer:(0,r.Z)("esri-shared-array-buffer"),atomics:(0,r.Z)("esri-atomics")};function x(e,t){return s=>t(e(s))}class b{constructor(e,t,s,i){this.size=0,this.texelSize=4,this.dirtyStart=0,this.dirtyEnd=0;const{pixelType:r,layout:n,textureOnly:a}=i;this.textureOnly=a||!1,this.pixelType=r,this._ctype=t,this.layout=n,this._resetRange(),this._shared=e,this.size=s,a||(this.data=this._initData(r,s,e,t))}get buffer(){return(0,o.yw)(this.data,(e=>e.buffer))}unsetComponentAllTexels(e,t){const s=(0,o.Wg)(this.data);for(let i=0;i<this.size*this.size;i++)s[i*this.texelSize+e]&=~t;this.dirtyStart=0,this.dirtyEnd=this.size*this.size-1}setComponentAllTexels(e,t){const s=(0,o.Wg)(this.data);for(let i=0;i<this.size*this.size;i++)s[i*this.texelSize+e]|=255&t;this.dirtyStart=0,this.dirtyEnd=this.size*this.size-1}setComponent(e,t,s){const i=(0,o.Wg)(this.data);for(const r of s)i[r*this.texelSize+e]|=t,this.dirtyStart=Math.min(this.dirtyStart,r),this.dirtyEnd=Math.max(this.dirtyEnd,r)}setComponentTexel(e,t,s){(0,o.Wg)(this.data)[s*this.texelSize+e]|=t,this.dirtyStart=Math.min(this.dirtyStart,s),this.dirtyEnd=Math.max(this.dirtyEnd,s)}unsetComponentTexel(e,t,s){(0,o.Wg)(this.data)[s*this.texelSize+e]&=~t,this.dirtyStart=Math.min(this.dirtyStart,s),this.dirtyEnd=Math.max(this.dirtyEnd,s)}getData(e,t){const s=(0,c.jL)(e);return(0,o.Wg)(this.data)[s*this.texelSize+t]}setData(e,t,s){const i=(0,c.jL)(e),r=1<<t;0!=(this.layout&r)?(0,o.Wi)(this.data)||(this.data[i*this.texelSize+t]=s,this.dirtyStart=Math.min(this.dirtyStart,i),this.dirtyEnd=Math.max(this.dirtyEnd,i)):g.error("mapview-attributes-store","Tried to set a value for a texel's readonly component")}lock(){this.pixelType===p.Br.UNSIGNED_BYTE&&this._shared&&I.atomics&&"local"!==this._ctype&&Atomics.store(this.data,0,1)}unlock(){this.pixelType===p.Br.UNSIGNED_BYTE&&this._shared&&I.atomics&&"local"!==this._ctype&&Atomics.store(this.data,0,0)}expand(e){if(this.size=e,!this.textureOnly){const t=this._initData(this.pixelType,e,this._shared,this._ctype),s=(0,o.Wg)(this.data);t.set(s),this.data=t}}toMessage(){const e=this.dirtyStart,t=this.dirtyEnd,s=this.texelSize;if(e>t)return null;this._resetRange();const i=!(this._shared||"local"===this._ctype),r=this.pixelType,n=this.layout,a=(0,o.Wg)(this.data);return{start:e,end:t,data:i&&a.slice(e*s,(t+1)*s)||null,pixelType:r,layout:n}}_initData(e,t,s,i){const r=s&&"local"!==i?SharedArrayBuffer:ArrayBuffer,n=(0,f.UK)(e),a=new n(new r(t*t*4*n.BYTES_PER_ELEMENT));for(let o=0;o<a.length;o+=4)a[o+1]=255;return a}_resetRange(){this.dirtyStart=2147483647,this.dirtyEnd=0}}class T{constructor(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:()=>{};this._client=e,this.config=t,this._notifyChange=s,this._blocks=new Array,this._filters=new Array(d.m4),this._attributeComputeInfo=null,this._targetType=0,this._abortController=new AbortController,this._hasScaleExpr=!1,this._size=32,this._nextUpdate=null,this._currUpdate=null,this._idsToHighlight=new Set;const i=t.supportsTextureFloat?p.Br.FLOAT:p.Br.UNSIGNED_BYTE;y(`Creating AttributeStore ${I.sharedArrayBuffer?"with":"without"} shared memory`),this._blockDescriptors=[{pixelType:p.Br.UNSIGNED_BYTE,layout:1},{pixelType:p.Br.UNSIGNED_BYTE,layout:15,textureOnly:!0},{pixelType:p.Br.UNSIGNED_BYTE,layout:15,textureOnly:!0},{pixelType:i,layout:15},{pixelType:i,layout:15},{pixelType:i,layout:15},{pixelType:i,layout:15}],this._blocks=this._blockDescriptors.map((()=>null))}destroy(){this._abortController.abort()}get hasScaleExpr(){return this._hasScaleExpr}get _signal(){return this._abortController.signal}get hasHighlight(){return this._idsToHighlight.size>0}isUpdating(){return!!this._currUpdate||!!this._nextUpdate}update(e,t){this.config=t;const s=t.schema.processors[0].storage,i=(0,u.Hg)(this._schema,s);if((e.targets.feature||e.targets.aggregate)&&(e.storage.data=!0),i&&((0,r.Z)("esri-2d-update-debug")&&console.debug("Applying Update - AttributeStore:",i),e.storage.data=!0,this._schema=s,this._attributeComputeInfo=null,!(0,o.Wi)(s))){switch(s.target){case"feature":this._targetType=c.PX;break;case"aggregate":this._targetType=c.xp}if("subtype"===s.type){this._attributeComputeInfo={isSubtype:!0,subtypeField:s.subtypeField,map:new Map};for(const e in s.mapping){const t=s.mapping[e];if((0,o.pC)(t)&&(0,o.pC)(t.vvMapping))for(const s of t.vvMapping)this._bindAttribute(s,parseInt(e,10))}}else{if(this._attributeComputeInfo={isSubtype:!1,map:new Map},(0,o.pC)(s.vvMapping))for(const e of s.vvMapping)this._bindAttribute(e);if((0,o.pC)(s.attributeMapping))for(const e of s.attributeMapping)this._bindAttribute(e)}}}onTileData(e,t){if((0,o.Wi)(t.addOrUpdate))return;const s=t.addOrUpdate.getCursor();for(;s.next();){const e=s.getDisplayId();this.setAttributeData(e,s)}}async setHighlight(e,t){const s=this._getBlock(0),i=t.map((e=>(0,c.jL)(e)));s.lock(),s.unsetComponentAllTexels(0,1),s.setComponent(0,1,i),s.unlock(),this._idsToHighlight.clear();for(const r of e)this._idsToHighlight.add(r);await this.sendUpdates()}async updateFilters(e,t,s){const{service:i,spatialReference:n}=s,{filters:a}=t,o=a.map(((e,t)=>this._updateFilter(e,t,i,n)));(await Promise.all(o)).some((e=>e))&&(e.storage.filters=!0,(0,r.Z)("esri-2d-update-debug")&&console.debug("Applying Update - AttributeStore:","Filters changed"))}setData(e,t,s,i){const r=(0,c.jL)(e);this._ensureSizeForTexel(r),this._getBlock(t).setData(e,s,i)}getData(e,t,s){return this._getBlock(t).getData(e,s)}getHighlightFlag(e){return this._idsToHighlight.has(e)?d.uG:0}unsetAttributeData(e){const t=(0,c.jL)(e);this._getBlock(0).setData(t,0,0)}setAttributeData(e,t){const s=(0,c.jL)(e);if(this._ensureSizeForTexel(s),this._getBlock(0).setData(s,0,this.getFilterFlags(t)),this._targetType!==(0,c.vs)(e))return;const i=this._attributeComputeInfo,r=this.config.supportsTextureFloat?1:2;let n=null;i&&(n=i.isSubtype?i.map.get(t.readAttribute(i.subtypeField)):i.map,n&&n.size&&n.forEach(((e,i)=>{const n=i*r%4,o=Math.floor(i*r/4),h=this._getBlock(o+d.aK),u=e(t);if(this.config.supportsTextureFloat)h.setData(s,n,u);else if(u===d.AI)h.setData(s,n,255),h.setData(s,n+1,255);else{const e=(0,a.uZ)(Math.round(u),-32767,32766)+32768,t=255&e,i=(65280&e)>>8;h.setData(s,n,t),h.setData(s,n+1,i)}})))}sendUpdates(){if((0,r.Z)("esri-2d-update-debug")&&console.debug("AttributeStore::sendUpdate"),this._notifyChange(),this._nextUpdate)return this._nextUpdate.promise;if(this._currUpdate)return this._nextUpdate=(0,h.hh)(),this._nextUpdate.promise;const e={blocks:this._blocks.map((e=>(0,o.pC)(e)?e.toMessage():null))};return this._currUpdate=this._createResources().then((()=>{const t=()=>{if(this._currUpdate=null,this._nextUpdate){const e=this._nextUpdate;this._nextUpdate=null,this.sendUpdates().then((()=>e.resolve()))}else(0,r.Z)("esri-2d-update-debug")&&console.debug("AttributeStore::sendUpdate::No additional updates queued");this._notifyChange()};(0,r.Z)("esri-2d-update-debug")&&console.debug("AttributeStore::sendUpdate::client.update");const s=this._client.update(e,this._signal).then(t).catch(t);return this._client.render(this._signal),s})).catch((e=>{if((0,h.D_)(e))return this._createResourcesPromise=null,this._createResources();this._notifyChange(),g.error(new i.Z("mapview-attribute-store","Encountered an error during client update",e))})),this._currUpdate}_ensureSizeForTexel(e){for(;e>=this._size*this._size;)if(this._expand())return}_bindAttribute(e,t){let s;if(null!=e.fieldIndex)e.normalizationField&&g.warn("mapview-arcade","Ignoring normalizationField specified with an arcade expression which is not supported."),s=t=>t.getComputedNumericAtIndex(e.fieldIndex);else{if(!e.field)return;s=function(){const{normalizationField:t}=e;return t?s=>{const i=s.readAttribute(t);return i?s.readAttribute(e.field)/i:null}:t=>t.readAttribute(e.field)}()}const{valueRepresentation:i}=e;i&&(s=x(s,(e=>(0,m.qc)(e,i))));const r=e=>null===e||isNaN(e)||e===1/0||e===-1/0?d.AI:e,n=this._attributeComputeInfo;if(n.isSubtype){const i=n.map.get(t)??new Map;i.set(e.binding,x(s,r)),n.map.set(t,i)}else n.map.set(e.binding,x(s,r))}_createResources(){if((0,o.pC)(this._createResourcesPromise))return this._createResourcesPromise;this._getBlock(d.xl),this._getBlock(d.pU),y("Initializing AttributeStore");const e={shared:I.sharedArrayBuffer&&!("local"===this._client.type),size:this._size,blocks:(0,o.Fd)(this._blocks,(e=>({textureOnly:e.textureOnly,buffer:e.buffer,pixelType:e.pixelType})))},t=this._client.initialize(e,this._signal).catch((e=>{(0,h.D_)(e)?this._createResourcesPromise=null:g.error(new i.Z("mapview-attribute-store","Encountered an error during client initialization",e))}));return this._createResourcesPromise=t,t.then((()=>(0,o.Wi)(this._createResourcesPromise)?this._createResources():void 0)),t}_getBlock(e){const t=this._blocks[e];if((0,o.pC)(t))return t;y(`Initializing AttributeBlock at index ${e}`);const s=I.sharedArrayBuffer,i=this._client.type,r=new b(s,i,this._size,this._blockDescriptors[e]);return this._blocks[e]=r,this._createResourcesPromise=null,r}_expand(){if(this._size<this.config.maxTextureSize){const e=this._size<<=1;return y("Expanding block size to",e,this._blocks),(0,o.JR)(this._blocks,(t=>t.expand(e))),this._createResourcesPromise=null,this._size=e,0}return g.error(new i.Z("mapview-limitations","Maximum number of onscreen features exceeded.")),-1}async _updateFilter(e,t,s,i){const r=this._filters[t],n=(0,o.pC)(r)&&r.hash;if(!r&&!e)return!1;if(n===JSON.stringify(e))return!1;if((0,o.Wi)(e)){if(!r)return!1;const e=1<<t+1,s=this._getBlock(0);return this._filters[t]=null,s.setComponentAllTexels(0,e),this.sendUpdates(),!0}const a=await this._getFilter(t,s);return await a.update(e,i),!0}async _getFilter(e,t){const i=this._filters[e];if((0,o.pC)(i))return i;const{default:r}=await s.e(7481).then(s.bind(s,37481)),n=new r({geometryType:t.geometryType,hasM:!1,hasZ:!1,timeInfo:t.timeInfo,fieldsIndex:new l.Z(t.fields)});return this._filters[e]=n,n}isVisible(e){return!!(2&this._getBlock(0).getData(e,0))}getFilterFlags(e){let t=0;const s=(0,c.KS)(e.getDisplayId());for(let r=0;r<this._filters.length;r++){const i=!!(s&1<<r),n=this._filters[r];t|=(!i||(0,o.Wi)(n)||n.check(e)?1:0)<<r}let i=0;if(this._idsToHighlight.size){const t=e.getObjectId();i=this.getHighlightFlag(t)}return t<<1|i}}},56078:(e,t,s)=>{s.d(t,{O:()=>o});var i=s(84328);class r{constructor(){this._freeIds=[],this._idCounter=1}createId(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return(0,i.QS)(this._getFreeId(),e)}releaseId(e){this._freeIds.push(e)}_getFreeId(){return this._freeIds.length?this._freeIds.pop():this._idCounter++}}var n=s(44333);function a(e,t,s){if(!(e.length>t))for(;e.length<=t;)e.push(s)}class o{constructor(){this._numerics=[],this._strings=[],this._idGenerator=new r,this._allocatedSize=256,this._bitsets=[],this._instanceIds=[],this._bounds=[]}createBitset(){const e=this._bitsets.length;return this._bitsets.push(n.p.create(this._allocatedSize,i._I)),e+1}getBitset(e){return this._bitsets[e-1]}_expand(){this._allocatedSize<<=1;for(const e of this._bitsets)e.resize(this._allocatedSize)}_ensureNumeric(e,t){this._numerics[e]||(this._numerics[e]=[]),a(this._numerics[e],t,0)}_ensureInstanceId(e){a(this._instanceIds,e,0)}_ensureString(e,t){this._strings[e]||(this._strings[e]=[]),a(this._strings[e],t,null)}createDisplayId(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];const t=this._idGenerator.createId();return t>this._allocatedSize&&this._expand(),(0,i.QS)(t,e)}releaseDisplayId(e){for(const t of this._bitsets)t.unset(e);return this._idGenerator.releaseId(e&i._I)}getComputedNumeric(e,t){return this.getComputedNumericAtIndex(e&i._I,0)}setComputedNumeric(e,t,s){return this.setComputedNumericAtIndex(e&i._I,s,0)}getComputedString(e,t){return this.getComputedStringAtIndex(e&i._I,0)}setComputedString(e,t,s){return this.setComputedStringAtIndex(e&i._I,0,s)}getComputedNumericAtIndex(e,t){const s=e&i._I;return this._ensureNumeric(t,s),this._numerics[t][s]}setComputedNumericAtIndex(e,t,s){const r=e&i._I;this._ensureNumeric(t,r),this._numerics[t][r]=s}getInstanceId(e){const t=e&i._I;return this._ensureInstanceId(t),this._instanceIds[t]}setInstanceId(e,t){const s=e&i._I;this._ensureInstanceId(s),this._instanceIds[s]=t}getComputedStringAtIndex(e,t){const s=e&i._I;return this._ensureString(t,s),this._strings[t][s]}setComputedStringAtIndex(e,t,s){const r=e&i._I;this._ensureString(t,r),this._strings[t][r]=s}getXMin(e){return this._bounds[4*(e&i._I)]}getYMin(e){return this._bounds[4*(e&i._I)+1]}getXMax(e){return this._bounds[4*(e&i._I)+2]}getYMax(e){return this._bounds[4*(e&i._I)+3]}setBounds(e,t){const s=t.readHydratedGeometry();if(!s||!s.coords.length)return!1;let r=1/0,n=1/0,o=-1/0,h=-1/0;s.forEachVertex(((e,t)=>{r=Math.min(r,e),n=Math.min(n,t),o=Math.max(o,e),h=Math.max(h,t)}));const u=e&i._I;return a(this._bounds,4*u+4,0),this._bounds[4*u]=r,this._bounds[4*u+1]=n,this._bounds[4*u+2]=o,this._bounds[4*u+3]=h,!0}}},92010:(e,t,s)=>{s.d(t,{s:()=>A});s(59486);var i=s(51064),r=s(18016),n=s(93169),a=s(92026),o=s(85403),h=s(83406),u=s(80457),l=s(44333),d=s(77981);let c=0;const f=(0,n.Z)("featurelayer-simplify-thresholds")??[.5,.5,.5,.5],_=f[0],m=f[1],p=f[2],g=f[3],y=(0,n.Z)("featurelayer-simplify-payload-size-factors")??[1,2,4],I=y[0],x=y[1],b=y[2],T=(0,n.Z)("featurelayer-simplify-mobile-factor")??2,S=(0,n.Z)("esri-mobile");class A{constructor(e,t){this.type="FeatureSetReader",this.arcadeDeclaredClass="esri.arcade.Feature",this.seen=!1,this.instance=0,this._tx=0,this._ty=0,this._sx=1,this._sy=1,this._deleted=null,this._joined=[],this._objectIdToIndex=null,this._level=0,this._datetimeMetadata=null,this.contextTimeReference=null,this.instance=e,this._layerSchema=t}static createInstance(){return c++,c=c>65535?0:c,c}get isEmpty(){return(0,a.pC)(this._deleted)&&this._deleted.countSet()===this.getSize()}set level(e){this._level=e}getAreaSimplificationThreshold(e,t){let s=1;const i=S?T:1;t>4e6?s=b*i:t>1e6?s=x*i:t>5e5?s=I*i:t>1e5&&(s=i);let r=0;e>4e3?r=g*s:e>2e3?r=p*s:e>100?r=m:e>15&&(r=_);let n=8;return this._level<4?n=1:this._level<5?n=2:this._level<6&&(n=4),r*n}createQuantizedExtrudedQuad(e,t){return new u.Z([5],[e-1,t,1,-1,1,1,-1,1,-1,-1])}setArcadeSpatialReference(e){this._arcadeSpatialReference=e}attachStorage(e){this._storage=e}getQuantizationTransform(){throw new Error("Unable to find transform for featureSet")}getStorage(){return this._storage}getComputedNumeric(e){return this.getComputedNumericAtIndex(0)}setComputedNumeric(e,t){return this.setComputedNumericAtIndex(t,0)}getComputedString(e){return this.getComputedStringAtIndex(0)}setComputedString(e,t){return this.setComputedStringAtIndex(0,t)}getComputedNumericAtIndex(e){return this._storage.getComputedNumericAtIndex(this.getDisplayId(),e)}setComputedNumericAtIndex(e,t){this._storage.setComputedNumericAtIndex(this.getDisplayId(),e,t)}getComputedStringAtIndex(e){return this._storage.getComputedStringAtIndex(this.getDisplayId(),e)}setComputedStringAtIndex(e,t){return this._storage.setComputedStringAtIndex(this.getDisplayId(),e,t)}transform(e,t,s,i){const r=this.copy();return r._tx+=e,r._ty+=t,r._sx*=s,r._sy*=i,r}readAttribute(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const s=this._readAttribute(e,t);if(void 0!==s)return s;for(const i of this._joined){i.setIndex(this.getIndex());const s=i._readAttribute(e,t);if(void 0!==s)return s}}readAttributes(){const e=this._readAttributes();for(const t of this._joined){t.setIndex(this.getIndex());const s=t._readAttributes();for(const t of Object.keys(s))e[t]=s[t]}return e}joinAttributes(e){this._joined.push(e)}readArcadeFeature(){return this}geometry(){const e=this.readHydratedGeometry(),t=(0,h.di)(e,this.geometryType,this.hasZ,this.hasM),s=(0,d.im)(t);return s&&(s.spatialReference=this._arcadeSpatialReference),s}get dateTimeReferenceFieldIndex(){return this._datetimeMetadata||(this._datetimeMetadata=r.nu.create(this._layerSchema.fields,this._layerSchema)),this._datetimeMetadata}autocastArcadeDate(e,t){return t&&t instanceof Date?this.isUnknownDateTimeField(e)?i.iG.unknownDateJSToArcadeDate(t):i.iG.dateJSAndZoneToArcadeDate(t,this.contextTimeReference?.timeZone??"system"):t}isUnknownDateTimeField(e){return"unknown"===this.dateTimeReferenceFieldIndex?.fieldTimeZone(e)}fieldSourceTimeZone(e){return this.dateTimeReferenceFieldIndex?.fieldTimeZone(e)??""}get layerPreferredTimeZone(){return this.dateTimeReferenceFieldIndex?.layerPreferredTimeZone??""}field(e){if(this.hasField(e))return this.autocastArcadeDate(e,this.readAttribute(e,!0));for(const t of this._joined)if(t.setIndex(this.getIndex()),t.hasField(e)){const s=t._readAttribute(e,!0);return this.autocastArcadeDate(e,s)}throw new Error(`Field ${e} does not exist`)}setField(e,t){throw new Error("Unable to update feature attribute values, feature is readonly")}keys(){return this.getFieldNames()}castToText(){if(!(arguments.length>0&&void 0!==arguments[0]&&arguments[0]))return JSON.stringify(this.readLegacyFeature());const e=this.readLegacyFeature();if(!e)return JSON.stringify(null);const t={geometry:e.geometry,attributes:{...e.attributes?e.attributes:{}}};for(const s in t.attributes){const e=t.attributes[s];e instanceof Date&&(t.attributes[s]=e.getTime())}return JSON.stringify(t)}gdbVersion(){return null}fullSchema(){return this._layerSchema}castAsJson(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return{attributes:this._readAttributes(),geometry:!0===e?.keepGeometryType?this.geometry():this.geometry()?.toJSON()??null}}castAsJsonAsync(){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return Promise.resolve(this.castAsJson(e))}removeIds(e){if((0,a.Wi)(this._objectIdToIndex)){const e=new Map,t=this.getCursor();for(;t.next();){const s=(0,a.s3)(t.getObjectId());e.set(s,t.getIndex())}this._objectIdToIndex=e}const t=this._objectIdToIndex;for(const s of e)t.has(s)&&this.removeAtIndex(t.get(s))}removeAtIndex(e){(0,a.Wi)(this._deleted)&&(this._deleted=l.p.create(this.getSize())),this._deleted.set(e)}readGeometryForDisplay(){return this.readUnquantizedGeometry(!0)}readLegacyGeometryForDisplay(){return this.readLegacyGeometry(!0)}*features(){const e=this.getCursor();for(;e.next();)yield e.readOptimizedFeature()}_getExists(){return(0,a.Wi)(this._deleted)||!this._deleted.has(this.getIndex())}_computeCentroid(){if("esriGeometryPolygon"!==this.geometryType)return null;const e=this.readUnquantizedGeometry();if(!e||e.hasIndeterminateRingOrder)return null;const t=(0,a.Pt)(this.getQuantizationTransform(),null);return(0,o.Y)(new u.Z,e,this.hasM,this.hasZ,t)}copyInto(e){e.seen=this.seen,e._storage=this._storage,e._arcadeSpatialReference=this._arcadeSpatialReference,e._joined=this._joined,e._tx=this._tx,e._ty=this._ty,e._sx=this._sx,e._sy=this._sy,e._deleted=this._deleted,e._objectIdToIndex=this._objectIdToIndex}}},28941:(e,t,s)=>{s.d(t,{i:()=>o});var i=s(92026),r=s(83406),n=s(3182),a=s(92010);class o extends a.s{static fromFeatures(e,t){const{objectIdField:s,geometryType:i}=t,n=(0,r.Yn)([],e,i,!1,!1,s);for(let r=0;r<n.length;r++)n[r].displayId=e[r].displayId;return o.fromOptimizedFeatures(n,t)}static fromFeatureSet(e,t){const s=(0,r.h_)(e,t.objectIdField);return o.fromOptimizedFeatureSet(s,t)}static fromOptimizedFeatureSet(e,t){const{features:s}=e,i=o.fromOptimizedFeatures(s,t);i._exceededTransferLimit=e.exceededTransferLimit,i._transform=e.transform;for(const r of e.fields)"esriFieldTypeDate"===r.type&&i._dateFields.add(r.name);return i}static fromOptimizedFeatures(e,t,s){const i=a.s.createInstance(),r=new o(i,e,t);return r._transform=s,r}constructor(e,t,s){super(e,s),this._exceededTransferLimit=!1,this._featureIndex=-1,this._dateFields=new Set,this._geometryType=s?.geometryType,this._features=t}get _current(){return this._features[this._featureIndex]}get geometryType(){return this._geometryType}get hasFeatures(){return!!this._features.length}get hasNext(){return this._featureIndex+1<this._features.length}get exceededTransferLimit(){return this._exceededTransferLimit}get hasZ(){return!1}get hasM(){return!1}removeIds(e){const t=new Set(e);this._features=this._features.filter((e=>!(e.objectId&&t.has(e.objectId))))}append(e){for(const t of e)this._features.push(t)}getSize(){return this._features.length}getCursor(){return this.copy()}getQuantizationTransform(){return this._transform}getAttributeHash(){let e="";for(const t in this._current.attributes)e+=this._current.attributes[t];return e}getIndex(){return this._featureIndex}setIndex(e){this._featureIndex=e}getObjectId(){return this._current?.objectId}getDisplayId(){return this._current.displayId}setDisplayId(e){this._current.displayId=e}getGroupId(){return this._current.groupId}setGroupId(e){this._current.groupId=e}copy(){const e=new o(this.instance,this._features,this.fullSchema());return this.copyInto(e),e}next(){for(;++this._featureIndex<this._features.length&&!this._getExists(););return this._featureIndex<this._features.length}readLegacyFeature(){return(0,r.EI)(this._current,this.geometryType,this.hasZ,this.hasM)}readOptimizedFeature(){return this._current}readLegacyPointGeometry(){return this.readGeometry()?{x:this.getX(),y:this.getY()}:null}readLegacyGeometry(){const e=this.readGeometry();return(0,r.di)(e,this.geometryType,this.hasZ,this.hasM)}readLegacyCentroid(){const e=this.readCentroid();return(0,i.Wi)(e)?null:{x:e.coords[0]*this._sx+this._tx,y:e.coords[1]*this._sy+this._ty}}readGeometryArea(){return(0,n.S6)(this._current)?(0,r.lz)(this._current.geometry,2):0}readUnquantizedGeometry(){const e=this.readGeometry();if("esriGeometryPoint"===this.geometryType||!e)return e;const t=e.clone();return function(e){let{coords:t,lengths:s}=e,i=0;for(const r of s){for(let e=1;e<r;e++)t[2*(i+e)]+=t[2*(i+e)-2],t[2*(i+e)+1]+=t[2*(i+e)-1];i+=r}}(t),t}readHydratedGeometry(){const e=this._current.geometry;if((0,i.Wi)(e))return null;const t=e.clone();return(0,i.pC)(this._transform)&&(0,r.$g)(t,t,this.hasZ,this.hasM,this._transform),t}getXHydrated(){if(!(0,n.S6)(this._current))return 0;const e=this._current.geometry.coords[0],t=this.getQuantizationTransform();return(0,i.Wi)(t)?e:e*t.scale[0]+t.translate[0]}getYHydrated(){if(!(0,n.S6)(this._current))return 0;const e=this._current.geometry.coords[1],t=this.getQuantizationTransform();return(0,i.Wi)(t)?e:t.translate[1]-e*t.scale[1]}getX(){return(0,n.S6)(this._current)?this._current.geometry.coords[0]*this._sx+this._tx:0}getY(){return(0,n.S6)(this._current)?this._current.geometry.coords[1]*this._sy+this._ty:0}readGeometry(){if(!(0,n.S6)(this._current)){if((0,i.pC)(this._current.centroid)){const[e,t]=this._current.centroid.coords;return this.createQuantizedExtrudedQuad(e,t)}return null}const e=this._current.geometry.clone();if(e.isPoint)return e.coords[0]=e.coords[0]*this._sx+this._tx,e.coords[1]=e.coords[1]*this._sy+this._ty,e;let t=0;for(const s of e.lengths)e.coords[2*t]=e.coords[2*t]*this._sx+this._tx,e.coords[2*t+1]=e.coords[2*t+1]*this._sy+this._ty,t+=s;return e}readCentroid(){return(0,n.S6)(this._current)?this._computeCentroid():this._current.centroid}hasField(e){return e in this._current.attributes||this.getFieldNames().map((e=>e.toLowerCase())).includes(e.toLowerCase())}getFieldNames(){return Object.keys(this._current.attributes)}_readAttribute(e,t){const s=this._current.attributes[e];if(void 0!==s)return null!=s&&t&&this._dateFields.has(e)?new Date(s):s;const i=this.readAttributes(),r=e?.toLocaleLowerCase().trim();for(const n in i)if(n.toLocaleLowerCase().trim()===r){const e=this._current.attributes[n];return null!=e&&t&&this._dateFields.has(n)?new Date(e):e}}copyInto(e){super.copyInto(e),e._featureIndex=this._featureIndex,e._transform=this._transform,e._dateFields=this._dateFields}_readAttributes(){return this._current.attributes}}},44333:(e,t,s)=>{s.d(t,{p:()=>i});class i{static fromBuffer(e,t){return new i(e,t)}static create(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4294967295;const s=new Uint32Array(Math.ceil(e/32));return new i(s,t)}constructor(e,t){this._mask=0,this._buf=e,this._mask=t}_getIndex(e){return Math.floor(e/32)}has(e){const t=this._mask&e;return!!(this._buf[this._getIndex(t)]&1<<t%32)}hasRange(e,t){let s=e,i=t;for(;s%32&&s!==i;){if(this.has(s))return!0;s++}for(;i%32&&s!==i;){if(this.has(s))return!0;i--}if(s===i)return!1;for(let r=s/32;r!==i/32;r++)if(this._buf[r])return!0;return!1}set(e){const t=this._mask&e,s=this._getIndex(t),i=1<<t%32;this._buf[s]|=i}setRange(e,t){let s=e,i=t;for(;s%32&&s!==i;)this.set(s++);for(;i%32&&s!==i;)this.set(i--);if(s!==i)for(let r=s/32;r!==i/32;r++)this._buf[r]=4294967295}unset(e){const t=this._mask&e,s=this._getIndex(t),i=1<<t%32;this._buf[s]&=4294967295^i}resize(e){const t=this._buf,s=new Uint32Array(Math.ceil(e/32));s.set(t),this._buf=s}or(e){for(let t=0;t<this._buf.length;t++)this._buf[t]|=e._buf[t];return this}and(e){for(let t=0;t<this._buf.length;t++)this._buf[t]&=e._buf[t];return this}xor(e){for(let t=0;t<this._buf.length;t++)this._buf[t]^=e._buf[t];return this}ior(e){for(let t=0;t<this._buf.length;t++)this._buf[t]|=~e._buf[t];return this}iand(e){for(let t=0;t<this._buf.length;t++)this._buf[t]&=~e._buf[t];return this}ixor(e){for(let t=0;t<this._buf.length;t++)this._buf[t]^=~e._buf[t];return this}any(){for(let e=0;e<this._buf.length;e++)if(this._buf[e])return!0;return!1}copy(e){for(let t=0;t<this._buf.length;t++)this._buf[t]=e._buf[t];return this}clone(){return new i(this._buf.slice(),this._mask)}clear(){for(let e=0;e<this._buf.length;e++)this._buf[e]=0}forEachSet(e){for(let t=0;t<this._buf.length;t++){let s=this._buf[t],i=32*t;if(s)for(;s;)1&s&&e(i),s>>>=1,i++}}countSet(){let e=0;return this.forEachSet((t=>{e++})),e}}},98290:(e,t,s)=>{s.d(t,{I:()=>f,qc:()=>u});var i=s(92026),r=s(17842),n=s(65800),a=s(94109),o=s(80613),h=s(18745);function u(e,t){if(!e||!t)return e;switch(t){case"radius":case"distance":return 2*e;case"diameter":case"width":return e;case"area":return Math.sqrt(e)}return e}function l(e){return(e??[]).map((e=>function(e){return{value:e.value,size:(0,r.t_)(e.size)}}(e)))}function d(e){if("string"==typeof e||"number"==typeof e)return(0,r.t_)(e);const t=e;return{type:"size",expression:t.expression,stops:l(t.stops)}}const c=e=>{const t=[],s=[],i=l(e),n=i.length;for(let o=0;o<6;o++){const e=i[Math.min(o,n-1)];t.push(e.value),s.push(null==e.size?a.AI:(0,r.F2)(e.size))}return{values:new Float32Array(t),sizes:new Float32Array(s)}};function f(e){const t=e&&e.length>0?{}:null,s=t?{}:null;if(!t||!s)return{vvFields:t,vvRanges:s};for(const i of e)if(i.field&&(t[i.type]=i.field),"size"===i.type){s.size||(s.size={});const e=i;switch((0,h.a)(e)){case o.X.SIZE_MINMAX_VALUE:s.size.minMaxValue={minDataValue:e.minDataValue,maxDataValue:e.maxDataValue,minSize:d(e.minSize),maxSize:d(e.maxSize)};break;case o.X.SIZE_SCALE_STOPS:s.size.scaleStops={stops:l(e.stops)};break;case o.X.SIZE_FIELD_STOPS:if(e.levels){const t={};for(const s in e.levels)t[s]=c(e.levels[s]);s.size.fieldStops={type:"level-dependent",levels:t}}else s.size.fieldStops={type:"static",...c(e.stops)};break;case o.X.SIZE_UNIT_VALUE:s.size.unitValue={unit:e.valueUnit,valueRepresentation:e.valueRepresentation??void 0}}}else if("color"===i.type)s.color=p(i);else if("opacity"===i.type)s.opacity=_(i);else if("rotation"===i.type){const e=i;s.rotation={type:e.rotationType}}return{vvFields:t,vvRanges:s}}function _(e){const t={values:[0,0,0,0,0,0,0,0],opacities:[0,0,0,0,0,0,0,0]};if("string"==typeof e.field){if(!e.stops)return null;{if(e.stops.length>8)return null;const s=e.stops;for(let e=0;e<8;++e){const i=s[Math.min(e,s.length-1)];t.values[e]=i.value,t.opacities[e]=i.opacity}}}else{if(!(e.stops&&e.stops.length>=0))return null;{const s=e.stops&&e.stops.length>=0?e.stops[0].opacity:0;for(let e=0;e<8;e++)t.values[e]=1/0,t.opacities[e]=s}}return t}function m(e,t,s){e[4*t+0]=s.r/255,e[4*t+1]=s.g/255,e[4*t+2]=s.b/255,e[4*t+3]=s.a}function p(e){if((0,i.Wi)(e))return null;if(e.normalizationField)return null;const t={field:null,values:[0,0,0,0,0,0,0,0],colors:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]};if("string"==typeof e.field){if(!e.stops)return null;{if(e.stops.length>8)return null;t.field=e.field;const s=e.stops;for(let e=0;e<8;++e){const i=s[Math.min(e,s.length-1)];t.values[e]=i.value,m(t.colors,e,i.color)}}}else{if(!(e.stops&&e.stops.length>=0))return null;{const s=e.stops&&e.stops.length>=0&&e.stops[0].color;for(let e=0;e<8;e++)t.values[e]=1/0,m(t.colors,e,s)}}for(let s=0;s<32;s+=4)(0,n.pr)(t.colors,s,!0);return t}}}]);
//# sourceMappingURL=8348.f74b0a94.chunk.js.map