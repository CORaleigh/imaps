{"version":3,"sources":["../node_modules/@arcgis/core/views/layers/OGCFeatureLayerView.js","../node_modules/@arcgis/core/views/2d/layers/OGCFeatureLayerView2D.js","../node_modules/@arcgis/core/views/layers/LayerView.js","../node_modules/@arcgis/core/views/layers/support/ClipRect.js","../node_modules/@arcgis/core/views/layers/support/ClipArea.js","../node_modules/@arcgis/core/views/layers/support/Geometry.js","../node_modules/@arcgis/core/views/layers/support/Path.js","../node_modules/@arcgis/core/views/2d/layers/LayerView2D.js","../node_modules/@arcgis/core/views/2d/engine/webgl/visualVariablesUtils.js","../node_modules/@arcgis/core/renderers/support/clickToleranceUtils.js","../node_modules/@arcgis/core/views/support/drapedUtils.js","../node_modules/@arcgis/core/views/layers/support/popupUtils.js","../node_modules/@arcgis/core/AggregateGraphic.js","../node_modules/@arcgis/core/views/layers/support/FeatureFilter.js","../node_modules/@arcgis/core/views/layers/support/FeatureEffect.js","../node_modules/@arcgis/core/views/layers/FeatureLayerView.js","../node_modules/@arcgis/core/views/2d/layers/features/tileRenderers.js","../node_modules/@arcgis/core/views/2d/layers/support/FeatureLayerProxy.js","../node_modules/@arcgis/core/views/2d/tiling/TileManager.js","../node_modules/@arcgis/core/views/2d/layers/FeatureLayerView2D.js"],"names":["i","a","initialize","layer","e","view","r","this","source","supportsSpatialReference","spatialReference","addResolvingPromise","Promise","reject","o","t","fields","prototype","readOnly","s","p","l","n","EventedMixin","constructor","super","parent","when","catch","name","id","title","getLogger","declaredClass","error","get","canResume","getSuspendInfo","suspended","legendEnabled","updatingHandles","updating","isUpdating","_override","_clearOverride","visible","suspendInfo","ready","viewNotReady","loaded","layerNotLoaded","layerInvisible","type","Boolean","d","arguments","left","right","top","bottom","clone","_get","Number","String","json","write","y","c","base","key","typeMap","extent","polygon","geometry","types","read","m","path","ofType","rect","clips","moving","attached","lastUpdateId","updateRequested","container","h","fadeTransitionEnabled","opacity","handles","add","requestUpdate","blendMode","effect","on","notifyChange","whenLayerView","then","destroyed","attach","destroy","detach","remove","isVisibleAtScale","minScale","maxScale","processUpdate","isFulfilled","isResolved","_set","update","isRendering","scale","set","minDataValue","maxDataValue","minSize","maxSize","SIZE_MINMAX_VALUE","expression","valueExpression","Array","isArray","stops","SIZE_SCALE_STOPS","field","levels","SIZE_FIELD_STOPS","valueUnit","SIZE_UNIT_VALUE","NONE","xoffset","Math","max","abs","yoffset","length","size","filter","map","f","floor","renderer","event","pointerType","visualVariables","symbol","uniqueValueInfos","forEach","classBreakInfos","resolution","overlayPixelSizeInMapUnits","basemapSpatialReference","equals","x","xmin","min","ymin","xmax","ymax","toMap","intersects","popupTemplate","getRequiredFields","lastEditInfoEnabled","objectIdField","u","typeIdField","globalIdField","relationships","includes","push","indexOf","keyField","defaultPopupTemplateEnabled","defaultPopupTemplate","isAggregate","getEffectivePopupTemplate","sourceLayer","featureReduction","popupEnabled","getObjectId","objectId","cloneProperties","esriSpatialRelIntersects","esriSpatialRelContains","esriSpatialRelCrosses","esriSpatialRelDisjoint","esriSpatialRelEnvelopeIntersects","esriSpatialRelIndexIntersects","esriSpatialRelOverlaps","esriSpatialRelTouches","esriSpatialRelWithin","esriSpatialRelRelation","esriSRUnit_Meter","esriSRUnit_Kilometer","esriSRUnit_Foot","esriSRUnit_StatuteMile","esriSRUnit_NauticalMile","esriSRUnit_USNauticalMile","where","spatialRelationship","hiddenIds","Set","distance","objectIds","units","timeExtent","enabled","writeWhere","enable","createQuery","reader","target","writer","from","overridePolicy","j","includedEffect","excludedEffect","excludedLabelsVisible","q","R","_updatingRequiredFieldsPromise","requiredFields","F","_handleRequiredFieldsChange","w","outFields","highlight","Error","returnGeometry","outSpatialReference","intersection","queryFeatures","queryObjectIds","queryFeatureCount","queryExtent","_loadArcadeModules","_updateRequiredFields","displayField","collectRequiredFields","timeInfo","startField","endField","floorInfo","floorField","sort","validateFetchPopupFeatures","fetchClientPopupFeatures","clientGraphics","resolve","arcadeUtils","hasGeometryOperations","createPopupQuery","attributes","concat","features","geometryType","returnZ","returnM","b","isEmpty","E","v","g","default","_startupResolver","isReady","_controller","_startWorker","signal","abort","_connection","close","client","tileRenderer","closed","startup","transferList","service","config","tileInfo","toJSON","tiles","invoke","updateTiles","promise","applyUpdate","setHighlight","refresh","queryLatestObservations","queryStatistics","getDisplayId","getFeature","getAggregate","getAggregateValueRanges","mapValidDisplayIds","onEdits","addedFeatures","deletedFeatures","updatedFeatures","enableEvent","value","strategy","_tiles","Map","buffer","acquireTile","releaseTile","tileInfoView","clear","_releaseTile","tileKeys","getTileCoverage","state","spans","lodInfo","level","row","colFrom","colTo","getId","normalizeCol","getWorldForColumn","_getOrAcquireTile","_addPlaceholders","has","pool","release","hasMissingTiles","added","removed","_getTile","delete","_addPlaceholderChildren","_addPlaceholderParent","_addPlaceholderChild","hasData","contains","getParentKey","patchCount","K","W","X","k","I","M","_pipelineIsUpdating","_updatingPipelineConfig","_onGoingEdits","_isRefreshing","_visibilityOverrides","_effect","_highlightIds","_lastPixelBuffer","effectLists","included","V","excluded","doRefresh","_lockGPUUploads","_proxy","_unlockGPUUploads","_doUpdate","_hasRequiredSupport","_getEffectiveRenderer","historicMoment","gdbVersion","definitionExpression","labelsVisible","labelingInfo","availableFields","pixelBuffer","N","L","_createConfiguration","schema","_createTileRendererHash","_tileRendererHash","_initTileRenderer","_serviceOptions","effects","onConfigUpdate","_tileStrategy","openPorts","featuresTilingScheme","hasHighlight","keys","_onceTilesUpdated","mesh","targets","aggregate","_forceAttributeTextureUpload","invalidateLabels","_updateHighlight","_updateClusterSizeTask","all","_initProxy","_initServiceOptions","valueRanges","isTable","_createClientOptions","z","_createServiceOptions","floors","getTime","JSON","stringify","geometryDefinition","filterHash","effectHash","streamFilter","clipsHash","hasEffects","_","isCollection","getAttribute","toArray","_addHighlight","_removeHighlight","hitTest","_hitTest","queryFeaturesJSON","fromJSON","_cleanUpQuery","count","setVisibility","_update","timeline","record","D","_acquireTile","some","removeAllChildren","uninstall","moveStart","viewChange","moveEnd","fetchPopupFeatures","_fetchServicePopupFeatures","C","createFetchPopupFeaturesQueryGeometry","setUpdating","emitEvent","emit","_detectQueryMode","capabilities","operations","supportsEditing","mode","featureCount","fullExtent","width","height","warn","customParameters","getFeatureDefinition","parsedUrl","dynamicDataSource","query","maxRecordCount","tileMaxRecordCount","_createMemoryServiceOptions","S","_createUpdateClusterSizeTask","watch","_updateClusterEffectiveRendererSizeVariable","_effectiveRenderer","dynamicClusterSize","O","T","P","_aggregateValueRanges","aggregateFields","once","A","layerView","install","_createFeatureDataHash","getAttributeHash","_injectOverrides","_addFloorFilterClause","G","viewAllLevelIds","replace","join","RegExp","trim","H","U","devicePixelRatio","window","filters","supportsTextureFloat","maxTextureSize","lockGPUUploads","unlockGPUUploads","forceAttributeTextureUpload","begin","_updatingPromise","end","_createHittestResult","B","referenceId","J","Y"],"mappings":"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","file":"static/js/127.a825b360.chunk.js","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../chunks/tslib.es6.js\";import\"../../core/has.js\";import\"../../core/Logger.js\";import\"../../core/accessorSupport/ensureType.js\";import{property as r}from\"../../core/accessorSupport/decorators/property.js\";import{subclass as s}from\"../../core/accessorSupport/decorators/subclass.js\";import o from\"../../core/Error.js\";import\"../../core/urlUtils.js\";import\"../../core/uuid.js\";import\"../../portal/support/resourceExtension.js\";import{fixFields as t}from\"../../layers/support/fieldUtils.js\";const i=i=>{let a=class extends i{initialize(){const{layer:e,view:r}=this;e.source.supportsSpatialReference(r.spatialReference)||this.addResolvingPromise(Promise.reject(new o(\"layerview:spatial-reference-incompatible\",\"The spatial references supported by this OGC layer are incompatible with the spatial reference of the view\",{layer:e})))}get availableFields(){return t(this.layer.fields,[\"*\"])}};return e([r()],a.prototype,\"layer\",void 0),e([r({readOnly:!0})],a.prototype,\"availableFields\",null),a=e([s(\"esri.views.layers.OGCFeatureLayerView\")],a),a};export default i;export{i as OGCFeatureLayerView};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{_ as r}from\"../../../chunks/tslib.es6.js\";import\"../../../core/has.js\";import\"../../../core/Logger.js\";import\"../../../core/accessorSupport/ensureType.js\";import\"../../../core/accessorSupport/decorators/property.js\";import{subclass as e}from\"../../../core/accessorSupport/decorators/subclass.js\";import\"../../../core/urlUtils.js\";import\"../../../core/uuid.js\";import\"../../../portal/support/resourceExtension.js\";import{OGCFeatureLayerView as o}from\"../../layers/OGCFeatureLayerView.js\";import s from\"./FeatureLayerView2D.js\";let t=class extends(o(s)){};t=r([e(\"esri.views.2d.layers.OGCFeatureLayerView2D\")],t);var p=t;export default p;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../chunks/tslib.es6.js\";import\"../../core/has.js\";import t from\"../../core/Logger.js\";import\"../../core/accessorSupport/ensureType.js\";import{property as r}from\"../../core/accessorSupport/decorators/property.js\";import{subclass as s}from\"../../core/accessorSupport/decorators/subclass.js\";import\"../../core/urlUtils.js\";import\"../../core/uuid.js\";import\"../../portal/support/resourceExtension.js\";import i from\"../../core/Accessor.js\";import o from\"../../core/Evented.js\";import{IdentifiableMixin as l}from\"../../core/Identifiable.js\";import{EsriPromiseMixin as n}from\"../../core/Promise.js\";import{HandleOwnerMixin as a}from\"../../core/HandleOwner.js\";let p=class extends(a(l(n(o.EventedMixin(i))))){constructor(e){super(e),this.layer=null,this.parent=null}initialize(){this.when().catch((e=>{if(\"layerview:create-error\"!==e.name){const r=this.layer&&this.layer.id||\"no id\",s=this.layer&&this.layer.title||\"no title\";throw t.getLogger(this.declaredClass).error(\"#resolve()\",`Failed to resolve layer view (layer title: '${s}', id: '${r}')`,e),e}}))}get fullOpacity(){const e=e=>null==e?1:e;return e(this.get(\"layer.opacity\"))*e(this.get(\"parent.fullOpacity\"))}get suspended(){return!this.canResume()}get suspendInfo(){return this.getSuspendInfo()}get legendEnabled(){return!this.suspended&&!0===this.layer.legendEnabled}get updating(){return!!(this.updatingHandles&&this.updatingHandles.updating||this.isUpdating())}get visible(){return!0===this.get(\"layer.visible\")}set visible(e){void 0!==e?this._override(\"visible\",e):this._clearOverride(\"visible\")}canResume(){return!this.get(\"parent.suspended\")&&this.get(\"view.ready\")&&this.get(\"layer.loaded\")&&this.visible||!1}getSuspendInfo(){const e=this.parent&&this.parent.suspended?this.parent.suspendInfo:{},t=this;return t.view&&t.view.ready||(e.viewNotReady=!0),this.layer&&this.layer.loaded||(e.layerNotLoaded=!0),this.visible||(e.layerInvisible=!0),e}isUpdating(){return!1}};e([r()],p.prototype,\"fullOpacity\",null),e([r()],p.prototype,\"layer\",void 0),e([r()],p.prototype,\"parent\",void 0),e([r({readOnly:!0})],p.prototype,\"suspended\",null),e([r({readOnly:!0})],p.prototype,\"suspendInfo\",null),e([r({readOnly:!0})],p.prototype,\"legendEnabled\",null),e([r({type:Boolean,readOnly:!0})],p.prototype,\"updating\",null),e([r()],p.prototype,\"visible\",null),p=e([s(\"esri.views.layers.LayerView\")],p);var d=p;export default d;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{_ as t}from\"../../../chunks/tslib.es6.js\";import\"../../../core/has.js\";import\"../../../core/Logger.js\";import\"../../../core/accessorSupport/ensureType.js\";import{property as r}from\"../../../core/accessorSupport/decorators/property.js\";import{subclass as o}from\"../../../core/accessorSupport/decorators/subclass.js\";import\"../../../core/urlUtils.js\";import\"../../../core/uuid.js\";import\"../../../portal/support/resourceExtension.js\";import e from\"./ClipArea.js\";var s;let i=s=class extends e{constructor(){super(...arguments),this.type=\"rect\",this.left=null,this.right=null,this.top=null,this.bottom=null}clone(){return new s({left:this.left,right:this.right,top:this.top,bottom:this.bottom})}get version(){return(this._get(\"version\")||0)+1}};t([r({type:[Number,String],json:{write:!0}})],i.prototype,\"left\",void 0),t([r({type:[Number,String],json:{write:!0}})],i.prototype,\"right\",void 0),t([r({type:[Number,String],json:{write:!0}})],i.prototype,\"top\",void 0),t([r({type:[Number,String],json:{write:!0}})],i.prototype,\"bottom\",void 0),t([r({readOnly:!0})],i.prototype,\"version\",null),i=s=t([o(\"esri.views.layers.support.ClipRect\")],i);var p=i;export default p;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{_ as r}from\"../../../chunks/tslib.es6.js\";import\"../../../core/has.js\";import\"../../../core/Logger.js\";import\"../../../core/accessorSupport/ensureType.js\";import\"../../../core/accessorSupport/decorators/property.js\";import{subclass as o}from\"../../../core/accessorSupport/decorators/subclass.js\";import\"../../../core/urlUtils.js\";import\"../../../core/uuid.js\";import\"../../../portal/support/resourceExtension.js\";import{JSONSupport as s}from\"../../../core/JSONSupport.js\";let e=class extends s{};e=r([o(\"esri.views.layers.support.ClipArea\")],e);var p=e;export default p;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{_ as r}from\"../../../chunks/tslib.es6.js\";import\"../../../core/has.js\";import\"../../../core/Logger.js\";import\"../../../core/accessorSupport/ensureType.js\";import{property as o}from\"../../../core/accessorSupport/decorators/property.js\";import{subclass as e}from\"../../../core/accessorSupport/decorators/subclass.js\";import\"../../../core/urlUtils.js\";import\"../../../core/uuid.js\";import\"../../../portal/support/resourceExtension.js\";import t from\"../../../geometry/Geometry.js\";import s from\"../../../geometry/Extent.js\";import p from\"../../../geometry/Polygon.js\";import{fromJSON as m}from\"../../../geometry/support/jsonUtils.js\";import\"../../../geometry.js\";import i from\"./ClipArea.js\";var y;const c={base:t,key:\"type\",typeMap:{extent:s,polygon:p}};let n=y=class extends i{constructor(){super(...arguments),this.type=\"geometry\",this.geometry=null}get version(){return(this._get(\"version\")||0)+1}clone(){return new y({geometry:this.geometry.clone()})}};r([o({types:c,json:{read:m,write:!0}})],n.prototype,\"geometry\",void 0),r([o({readOnly:!0})],n.prototype,\"version\",null),n=y=r([e(\"esri.views.layers.support.Geometry\")],n);var l=n;export default l;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{_ as r}from\"../../../chunks/tslib.es6.js\";import\"../../../core/has.js\";import\"../../../core/Logger.js\";import\"../../../core/accessorSupport/ensureType.js\";import{property as o}from\"../../../core/accessorSupport/decorators/property.js\";import{subclass as s}from\"../../../core/accessorSupport/decorators/subclass.js\";import\"../../../core/urlUtils.js\";import\"../../../core/uuid.js\";import\"../../../portal/support/resourceExtension.js\";import t from\"./ClipArea.js\";let e=class extends t{constructor(){super(...arguments),this.type=\"path\",this.path=[]}get version(){return(this._get(\"version\")||0)+1}};r([o({type:[[[Number]]],json:{write:!0}})],e.prototype,\"path\",void 0),r([o({readOnly:!0})],e.prototype,\"version\",null),e=r([s(\"esri.views.layers.support.Path\")],e);var p=e;export default p;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{_ as t}from\"../../../chunks/tslib.es6.js\";import\"../../../core/has.js\";import\"../../../core/Logger.js\";import\"../../../core/accessorSupport/ensureType.js\";import{property as e}from\"../../../core/accessorSupport/decorators/property.js\";import{subclass as s}from\"../../../core/accessorSupport/decorators/subclass.js\";import\"../../../core/urlUtils.js\";import\"../../../core/uuid.js\";import\"../../../portal/support/resourceExtension.js\";import i from\"../../../core/Collection.js\";import{referenceSetter as r}from\"../../../core/collectionUtils.js\";import{init as o}from\"../../../core/watchUtils.js\";import a from\"../../layers/support/ClipArea.js\";import p from\"../../layers/support/ClipRect.js\";import{Container as h}from\"../engine/Container.js\";import n from\"../../layers/support/Geometry.js\";import d from\"../../layers/support/Path.js\";const c=i.ofType({key:\"type\",base:a,typeMap:{rect:p,path:d,geometry:n}}),l=i=>{let a=class extends i{constructor(){super(...arguments),this.clips=new c,this.moving=!1,this.attached=!1,this.lastUpdateId=-1,this.updateRequested=!1}initialize(){var t;this.container||(this.container=new h),this.container.fadeTransitionEnabled=!0,this.container.opacity=0,this.container.clips=this.clips,this.handles.add([o(this,\"suspended\",(t=>{this.container&&(this.container.visible=!t),this.view&&!t&&this.updateRequested&&this.view.requestUpdate()}),!0),o(this,[\"layer.opacity\",\"container\"],(()=>{var t,e;this.container&&(this.container.opacity=null!=(t=null==(e=this.layer)?void 0:e.opacity)?t:1)}),!0),o(this,[\"layer.blendMode\"],(t=>{this.container&&(this.container.blendMode=t)}),!0),o(this,[\"layer.effect\"],(t=>{this.container&&(this.container.effect=t)}),!0),this.clips.on(\"change\",(()=>{this.container.clips=this.clips,this.notifyChange(\"clips\")}))]),null!=(t=this.view)&&t.whenLayerView?this.view.whenLayerView(this.layer).then((t=>{t!==this||this.attached||this.destroyed||(this.attach(),this.requestUpdate(),this.attached=!0)}),(()=>{})):this.when().then((()=>{this.attached||this.destroyed||(this.attach(),this.requestUpdate(),this.attached=!0)}),(()=>{}))}destroy(){this.attached&&(this.detach(),this.attached=!1),this.handles.remove(\"initialize\"),this.updateRequested=!1}get updating(){return!this.attached||!this.suspended&&(this.updateRequested||this.isUpdating())}isVisibleAtScale(t){let e=!0;const s=this.layer,i=s.minScale,r=s.maxScale;if(null!=i&&null!=r){let s=!i,o=!r;!s&&t<=i&&(s=!0),!o&&t>=r&&(o=!0),e=s&&o}return e}requestUpdate(){this.destroyed||this.updateRequested||(this.updateRequested=!0,this.suspended||this.view.requestUpdate())}processUpdate(t){!this.isFulfilled()||this.isResolved()?(this._set(\"updateParameters\",t),this.updateRequested&&!this.suspended&&(this.updateRequested=!1,this.update(t))):this.updateRequested=!1}isUpdating(){return!1}isRendering(){return!1}canResume(){return!!super.canResume()&&this.isVisibleAtScale(this.view.scale)}};return t([e({type:c,set(t){const e=r(t,this._get(\"clips\"),c);this._set(\"clips\",e)}})],a.prototype,\"clips\",void 0),t([e()],a.prototype,\"moving\",void 0),t([e()],a.prototype,\"attached\",void 0),t([e()],a.prototype,\"container\",void 0),t([e()],a.prototype,\"suspended\",void 0),t([e({readOnly:!0})],a.prototype,\"updateParameters\",void 0),t([e()],a.prototype,\"updateRequested\",void 0),t([e()],a.prototype,\"updating\",null),t([e()],a.prototype,\"view\",void 0),a=t([s(\"esri.views.2d.layers.LayerView2D\")],a),a};export{l as LayerView2DMixin};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport e from\"../../../../core/Logger.js\";import s from\"../../../../core/Error.js\";import{WGLVVFlag as i}from\"./enums.js\";import{isNumber as r}from\"./Utils.js\";const l=e.getLogger(\"esri.views.2d.engine.webgl\");function o(e){return r(e.minDataValue)&&r(e.maxDataValue)&&null!=e.minSize&&null!=e.maxSize?i.SIZE_MINMAX_VALUE:(e.expression&&\"view.scale\"===e.expression||e.valueExpression&&\"$view.scale\"===e.valueExpression)&&Array.isArray(e.stops)?i.SIZE_SCALE_STOPS:(null!=e.field||e.expression&&\"view.scale\"!==e.expression||e.valueExpression&&\"$view.scale\"!==e.valueExpression)&&(Array.isArray(e.stops)||\"levels\"in e&&e.levels)?i.SIZE_FIELD_STOPS:(null!=e.field||e.expression&&\"view.scale\"!==e.expression||e.valueExpression&&\"$view.scale\"!==e.valueExpression)&&null!=e.valueUnit?i.SIZE_UNIT_VALUE:(l.error(new s(\"mapview-bad-type\",\"Found invalid size VisualVariable\",e)),i.NONE)}export{o as getTypeOfSizeVisualVariable};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nfunction t(t,e){return e?\"xoffset\"in e&&e.xoffset?Math.max(t,Math.abs(e.xoffset)):\"yoffset\"in e&&e.yoffset?Math.max(t,Math.abs(e.yoffset||0)):t:t}function e(t){let e=0,n=0;for(let r=0;r<t.length;r++){const s=t[r].size;\"number\"==typeof s&&(e+=s,n++)}return e/n}function n(t,n){return\"number\"==typeof t?t:t&&t.stops&&t.stops.length?e(t.stops):n}function r(t,e){if(!e)return t;const r=e.filter((t=>\"size\"===t.type)).map((e=>{const{maxSize:r,minSize:s}=e;return(n(r,t)+n(s,t))/2}));let s=0;const o=r.length;if(0===o)return t;for(let n=0;n<o;n++)s+=r[n];const f=Math.floor(s/o);return Math.max(f,t)}function s(e){const n=e&&e.renderer,s=\"touch\"===(e&&e.event&&e.event.pointerType)?9:6;if(!n)return s;const o=\"visualVariables\"in n?r(s,n.visualVariables):s;if(\"simple\"===n.type)return t(o,n.symbol);if(\"unique-value\"===n.type){let e=o;return n.uniqueValueInfos.forEach((n=>{e=t(e,n.symbol)})),e}if(\"class-breaks\"===n.type){let e=o;return n.classBreakInfos.forEach((n=>{e=t(e,n.symbol)})),e}return n.type,o}export{s as calculateTolerance};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{isSome as e,isNone as t}from\"../../core/maybe.js\";import r from\"../../geometry/Extent.js\";import\"../../geometry.js\";import{getMetersPerUnitForSR as n}from\"../../core/unitUtils.js\";import{calculateTolerance as i}from\"../../renderers/support/clickToleranceUtils.js\";function a(t,i,a,o=new r){let s;if(\"2d\"===a.type)s=i*a.resolution;else if(\"3d\"===a.type){const r=a.overlayPixelSizeInMapUnits(t),o=a.basemapSpatialReference;s=e(o)&&!o.equals(a.spatialReference)?n(o)/n(a.spatialReference):i*r}const m=t.x-s,p=t.y-s,c=t.x+s,l=t.y+s,{spatialReference:f}=a;return o.xmin=Math.min(m,c),o.ymin=Math.min(p,l),o.xmax=Math.max(m,c),o.ymax=Math.max(p,l),o.spatialReference=f,o}function o(e,r,n){const o=n.toMap(e);if(t(o))return!1;return a(o,i(),n,s).intersects(r)}const s=new r;export{a as createQueryGeometry,o as intersectsDrapedGeometry};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{isSome as e}from\"../../../core/maybe.js\";import{getFeatureEditFields as p,fixFields as l,hasField as t}from\"../../../layers/support/fieldUtils.js\";async function i(i,d=i.popupTemplate){if(!e(d))return[];const o=await d.getRequiredFields(i.fields),{lastEditInfoEnabled:s}=d,{objectIdField:u,typeIdField:a,globalIdField:n,relationships:f}=i;if(o.includes(\"*\"))return[\"*\"];const r=s?await p(i):[],m=l(i.fields,[...o,...r]);return a&&m.push(a),m&&u&&t(i.fields,u)&&-1===m.indexOf(u)&&m.push(u),m&&n&&t(i.fields,n)&&-1===m.indexOf(n)&&m.push(n),f&&f.forEach((e=>{const{keyField:p}=e;m&&p&&t(i.fields,p)&&-1===m.indexOf(p)&&m.push(p)})),m}function d(p,l){return p.popupTemplate?p.popupTemplate:e(l)&&l.defaultPopupTemplateEnabled&&e(p.defaultPopupTemplate)?p.defaultPopupTemplate:null}export{d as getFetchPopupTemplate,i as getRequiredFields};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"./chunks/tslib.es6.js\";import\"./core/has.js\";import\"./core/Logger.js\";import\"./core/accessorSupport/ensureType.js\";import{property as r}from\"./core/accessorSupport/decorators/property.js\";import{subclass as o}from\"./core/accessorSupport/decorators/subclass.js\";import\"./core/urlUtils.js\";import\"./core/uuid.js\";import\"./portal/support/resourceExtension.js\";import t from\"./Graphic.js\";var p;let s=p=class extends t{constructor(){super(...arguments),this.isAggregate=!0}getEffectivePopupTemplate(e=!1){if(this.popupTemplate)return this.popupTemplate;const r=this.sourceLayer&&this.sourceLayer.featureReduction;return r&&\"popupTemplate\"in r&&r.popupEnabled?r.popupTemplate:null}getObjectId(){return this.objectId}clone(){return new p({objectId:this.objectId,...this.cloneProperties()})}};e([r({type:Boolean})],s.prototype,\"isAggregate\",void 0),e([r({type:Number,json:{read:!0}})],s.prototype,\"objectId\",void 0),s=p=e([o(\"esri.AggregateGraphic\")],s);var c=s;export default c;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../chunks/tslib.es6.js\";import\"../../../core/has.js\";import{clone as t}from\"../../../core/lang.js\";import\"../../../core/Logger.js\";import\"../../../core/accessorSupport/ensureType.js\";import{property as r}from\"../../../core/accessorSupport/decorators/property.js\";import{JSONMap as i}from\"../../../core/jsonMap.js\";import{subclass as s}from\"../../../core/accessorSupport/decorators/subclass.js\";import{writer as o}from\"../../../core/accessorSupport/decorators/writer.js\";import\"../../../core/urlUtils.js\";import\"../../../core/uuid.js\";import\"../../../portal/support/resourceExtension.js\";import{JSONSupport as n}from\"../../../core/JSONSupport.js\";import{fromJSON as a}from\"../../../geometry/support/jsonUtils.js\";import{geometryTypes as p}from\"../../../geometry.js\";import l from\"../../../TimeExtent.js\";import c from\"../../../tasks/support/Query.js\";var d;const m=new i({esriSpatialRelIntersects:\"intersects\",esriSpatialRelContains:\"contains\",esriSpatialRelCrosses:\"crosses\",esriSpatialRelDisjoint:\"disjoint\",esriSpatialRelEnvelopeIntersects:\"envelope-intersects\",esriSpatialRelIndexIntersects:\"index-intersects\",esriSpatialRelOverlaps:\"overlaps\",esriSpatialRelTouches:\"touches\",esriSpatialRelWithin:\"within\",esriSpatialRelRelation:\"relation\"}),u=new i({esriSRUnit_Meter:\"meters\",esriSRUnit_Kilometer:\"kilometers\",esriSRUnit_Foot:\"feet\",esriSRUnit_StatuteMile:\"miles\",esriSRUnit_NauticalMile:\"nautical-miles\",esriSRUnit_USNauticalMile:\"us-nautical-miles\"});let h=d=class extends n{constructor(e){super(e),this.where=null,this.geometry=null,this.spatialRelationship=\"intersects\",this.hiddenIds=new Set,this.distance=void 0,this.objectIds=null,this.units=null,this.timeExtent=null,this.enabled=!1}writeWhere(e,t){t.where=e||\"1=1\"}enable(){this._set(\"enabled\",!0)}createQuery(e={}){const{where:r,geometry:i,spatialRelationship:s,timeExtent:o,objectIds:n,units:a,distance:p}=this;return new c({geometry:t(i),objectIds:t(n),spatialRelationship:s,timeExtent:t(o),where:r,units:a,distance:p,...e})}clone(){const{where:e,geometry:r,spatialRelationship:i,hiddenIds:s,timeExtent:o,objectIds:n,units:a,distance:p}=this,l=new Set;return s.forEach((e=>l.add(e))),new d({geometry:t(r),hiddenIds:l,objectIds:t(n),spatialRelationship:i,timeExtent:t(o),where:e,units:a,distance:p})}};e([r({type:String})],h.prototype,\"where\",void 0),e([o(\"where\")],h.prototype,\"writeWhere\",null),e([r({types:p,json:{read:a,write:!0}})],h.prototype,\"geometry\",void 0),e([r({type:String,json:{read:{source:\"spatialRel\",reader:m.read},write:{target:\"spatialRel\",writer:m.write}}})],h.prototype,\"spatialRelationship\",void 0),e([r({json:{write:(e,t,r)=>t[r]=Array.from(e),read:e=>new Set(e)}})],h.prototype,\"hiddenIds\",void 0),e([r({type:Number,json:{write:{overridePolicy:e=>({enabled:e>0})}}})],h.prototype,\"distance\",void 0),e([r({type:[Number],json:{write:!0}})],h.prototype,\"objectIds\",void 0),e([r({type:String,json:{read:u.read,write:{writer:u.write,overridePolicy(e){return{enabled:e&&this.distance>0}}}}})],h.prototype,\"units\",void 0),e([r({type:l,json:{write:!0}})],h.prototype,\"timeExtent\",void 0),e([r({readOnly:!0})],h.prototype,\"enabled\",void 0),h=d=e([s(\"esri.views.layers.support.FeatureFilter\")],h);var j=h;export default j;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../chunks/tslib.es6.js\";import\"../../../core/has.js\";import\"../../../core/Logger.js\";import\"../../../core/accessorSupport/ensureType.js\";import{property as r}from\"../../../core/accessorSupport/decorators/property.js\";import{subclass as t}from\"../../../core/accessorSupport/decorators/subclass.js\";import\"../../../core/urlUtils.js\";import\"../../../core/uuid.js\";import\"../../../portal/support/resourceExtension.js\";import{JSONSupport as o}from\"../../../core/JSONSupport.js\";import s from\"./FeatureFilter.js\";var i;let c=i=class extends o{constructor(){super(...arguments),this.filter=null,this.includedEffect=null,this.excludedEffect=null,this.excludedLabelsVisible=!1}clone(){return new i({filter:this.filter&&this.filter.clone(),includedEffect:this.includedEffect,excludedEffect:this.excludedEffect,excludedLabelsVisible:this.excludedLabelsVisible})}};e([r({type:s,json:{write:!0}})],c.prototype,\"filter\",void 0),e([r({json:{write:!0}})],c.prototype,\"includedEffect\",void 0),e([r({json:{write:!0}})],c.prototype,\"excludedEffect\",void 0),e([r({type:Boolean,json:{write:!0}})],c.prototype,\"excludedLabelsVisible\",void 0),c=i=e([t(\"esri.views.layers.support.FeatureEffect\")],c);var l=c;export default l;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../chunks/tslib.es6.js\";import\"../../core/has.js\";import{isSome as t}from\"../../core/maybe.js\";import r from\"../../core/Logger.js\";import\"../../core/accessorSupport/ensureType.js\";import{property as i}from\"../../core/accessorSupport/decorators/property.js\";import{subclass as s}from\"../../core/accessorSupport/decorators/subclass.js\";import o from\"../../core/Error.js\";import\"../../core/urlUtils.js\";import\"../../core/uuid.js\";import\"../../portal/support/resourceExtension.js\";import{eachAlways as l}from\"../../core/promiseUtils.js\";import{loadArcade as a}from\"../../support/arcadeOnDemand.js\";import{fixFields as n,unpackFieldNames as u,collectLabelingFields as p,collectElevationFields as m,collectFilterFields as d,collectFeatureReductionFields as f,collectFields as c,collectField as y,featureHasFields as h}from\"../../layers/support/fieldUtils.js\";import{init as F,on as w}from\"../../core/watchUtils.js\";import{combinedViewLayerTimeExtentProperty as g}from\"../../layers/support/commonProperties.js\";import x from\"../../tasks/support/Query.js\";import v from\"./support/FeatureFilter.js\";import E from\"./support/FeatureEffect.js\";import{getFetchPopupTemplate as j,getRequiredFields as b}from\"./support/popupUtils.js\";const q=r.getLogger(\"esri.views.layers.FeatureLayerView\"),R=r=>{let R=class extends r{constructor(...e){super(...e),this._updatingRequiredFieldsPromise=null,this.effect=null,this.filter=null,this.timeExtent=null,this.layer=null,this.requiredFields=[],this.view=null}initialize(){F(this,[\"layer.renderer\",\"layer.labelingInfo\",\"layer.elevationInfo.featureExpressionInfo\",\"layer.displayField\",\"filter\",\"effect\",\"layer.timeInfo\",\"layer.floorInfo\",\"timeExtent\"],(()=>this._handleRequiredFieldsChange()),!0),w(this,\"view.floors\",\"change\",(()=>this._handleRequiredFieldsChange()))}get availableFields(){const{layer:e,layer:{fields:t},requiredFields:r}=this;return\"outFields\"in e&&e.outFields?n(t,[...u(t,e.outFields),...r]):n(t,r)}get maximumNumberOfFeatures(){return 0}set maximumNumberOfFeatures(e){q.error(\"#maximumNumberOfFeatures=\",\"Setting maximum number of features is not supported\")}get maximumNumberOfFeaturesExceeded(){return!1}highlight(e){throw new Error(\"missing implementation\")}createQuery(){const e={outFields:[\"*\"],returnGeometry:!0,outSpatialReference:this.view.spatialReference},r=t(this.filter)?this.filter.createQuery(e):new x(e);return t(this.timeExtent)&&(r.timeExtent=t(r.timeExtent)?r.timeExtent.intersection(this.timeExtent):this.timeExtent.clone()),r}queryFeatures(e,t){throw new Error(\"missing implementation\")}queryObjectIds(e,t){throw new Error(\"missing implementation\")}queryFeatureCount(e,t){throw new Error(\"missing implementation\")}queryExtent(e,t){throw new Error(\"missing implementation\")}_loadArcadeModules(e){if(e.get(\"expressionInfos.length\"))return a()}_handleRequiredFieldsChange(){const e=this._updateRequiredFields();this._set(\"_updatingRequiredFieldsPromise\",e),e.then((()=>{this._updatingRequiredFieldsPromise===e&&this._set(\"_updatingRequiredFieldsPromise\",null)}))}async _updateRequiredFields(){if(!this.layer||!this.view)return;const e=\"3d\"===this.view.type,{layer:r,layer:{fields:i,objectIdField:s,renderer:o,displayField:a}}=this,n=r.featureReduction,u=new Set,h=await l([o?o.collectRequiredFields(u,i):null,p(u,r),e?m(u,r):null,t(this.filter)?d(u,r,this.filter):null,this.effect?d(u,r,this.effect.filter):null,n?f(u,r,n):null]);r.timeInfo&&this.timeExtent&&c(u,r.fields,[r.timeInfo.startField,r.timeInfo.endField]),\"feature\"===r.type&&r.floorInfo&&c(u,r.fields,[r.floorInfo.floorField]);for(const t of h)t.error&&q.error(t.error);y(u,i,s),e&&a&&y(u,i,a);const F=Array.from(u).sort();this._set(\"requiredFields\",F)}validateFetchPopupFeatures(e){const{layer:t,layer:{popupEnabled:r}}=this;if(!r)return new o(\"featurelayerview:fetchPopupFeatures\",\"Popups are disabled\",{layer:t});return j(this.layer,e)?void 0:new o(\"featurelayerview:fetchPopupFeatures\",\"Layer does not define a popup template\",{layer:t})}async fetchClientPopupFeatures(e){const r=t(e)?e.clientGraphics:null;if(!r||0===r.length)return Promise.resolve([]);const i=[],s=[],{layer:o}=this,l=j(o,e);if(!t(l))return Promise.resolve([]);const a=await this._loadArcadeModules(l),n=a&&a.arcadeUtils.hasGeometryOperations(l),p=await this.createPopupQuery(e),m=u(o.fields,p.outFields);for(const t of r)n||!h(m,t)?s.push(t):i.push(t);return\"stream\"===o.type||0===s.length?Promise.resolve(i):(p.objectIds=s.map((e=>e.attributes[o.objectIdField])),o.queryFeatures(p).then((e=>i.concat(e.features))).catch((()=>s)))}async createPopupQuery(e){const r=this.layer,i=r.createQuery(),s=j(r,e),o=t(s)&&await this._loadArcadeModules(s),l=t(s)&&o&&o.arcadeUtils.hasGeometryOperations(s),a=!(\"point\"!==r.geometryType&&!l);return i.returnGeometry=a,i.returnZ=a,i.returnM=a,i.outFields=await b(this.layer,s),i.outSpatialReference=this.view.spatialReference,i}canResume(){return!!super.canResume()&&(!t(this.timeExtent)||!this.timeExtent.isEmpty)}};return e([i()],R.prototype,\"_updatingRequiredFieldsPromise\",void 0),e([i({readOnly:!0})],R.prototype,\"availableFields\",null),e([i({type:E})],R.prototype,\"effect\",void 0),e([i({type:v})],R.prototype,\"filter\",void 0),e([i(g)],R.prototype,\"timeExtent\",void 0),e([i()],R.prototype,\"layer\",void 0),e([i({type:Number})],R.prototype,\"maximumNumberOfFeatures\",null),e([i({readOnly:!0,type:Boolean})],R.prototype,\"maximumNumberOfFeaturesExceeded\",null),e([i({readOnly:!0})],R.prototype,\"requiredFields\",void 0),e([i()],R.prototype,\"suspended\",void 0),e([i()],R.prototype,\"view\",void 0),R=e([s(\"esri.views.layers.FeatureLayerView\")],R),R};export default R;export{R as FeatureLayerView};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nasync function e(e,a){if(!e)return null;switch(e.type){case\"class-breaks\":case\"simple\":case\"unique-value\":case\"dot-density\":case\"dictionary\":return new((await import(\"./tileRenderers/SymbolTileRenderer.js\")).default)(a);case\"heatmap\":return new((await import(\"./tileRenderers/HeatmapTileRenderer.js\")).default)(a)}}export{e as createOrReuseTileRenderer};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../../chunks/tslib.es6.js\";import\"../../../../core/has.js\";import\"../../../../core/Logger.js\";import\"../../../../core/accessorSupport/ensureType.js\";import{property as t}from\"../../../../core/accessorSupport/decorators/property.js\";import{subclass as r}from\"../../../../core/accessorSupport/decorators/subclass.js\";import\"../../../../core/urlUtils.js\";import\"../../../../core/uuid.js\";import\"../../../../portal/support/resourceExtension.js\";import{createResolver as s,createAbortController as o,ignoreAbortErrors as i,throwIfNotAbortError as n}from\"../../../../core/promiseUtils.js\";import{EsriPromise as a}from\"../../../../core/Promise.js\";import{open as c}from\"../../../../core/workers/workers.js\";function l(e){return Array.isArray(e)}let u=class extends a{constructor(e){super(e),this._startupResolver=s(),this.isReady=!1}initialize(){this._controller=o(),this.addResolvingPromise(this._startWorker(this._controller.signal))}destroy(){this._controller.abort(),this._connection&&this._connection.close()}set tileRenderer(e){this.client.tileRenderer=e}get closed(){return this._connection.closed}async startup(e,t,r,s){await this.when();const o=this._controller.signal,i=l(r.source)?{transferList:r.source,signal:o}:void 0,n={service:r,config:t,tileInfo:e.tileInfo.toJSON(),tiles:s};await this._connection.invoke(\"startup\",n,i),this._startupResolver.resolve(),this._set(\"isReady\",!0)}async updateTiles(e){return await this._startupResolver.promise,i(this._connection.invoke(\"updateTiles\",e))}async update(e){const t={config:e};return await this._startupResolver.promise,this._connection.invoke(\"update\",t)}async applyUpdate(e){return await this._startupResolver.promise,this._connection.invoke(\"applyUpdate\",e)}async setHighlight(e){return await this._startupResolver.promise,i(this._connection.invoke(\"controller.setHighlight\",e))}async refresh(){return await this._startupResolver.promise,i(this._connection.invoke(\"controller.refresh\"))}async queryFeatures(e,t){return await this._startupResolver.promise,this._connection.invoke(\"controller.queryFeatures\",e.toJSON(),t)}async queryObjectIds(e,t){return await this._startupResolver.promise,this._connection.invoke(\"controller.queryObjectIds\",e.toJSON(),t)}async queryFeatureCount(e,t){return await this._startupResolver.promise,this._connection.invoke(\"controller.queryFeatureCount\",e.toJSON(),t)}async queryExtent(e,t){return this._connection.invoke(\"controller.queryExtent\",e.toJSON(),t)}async queryLatestObservations(e,t){return await this._startupResolver.promise,this._connection.invoke(\"controller.queryLatestObservations\",e.toJSON(),t)}async queryStatistics(e){return await this._startupResolver.promise,this._connection.invoke(\"controller.queryStatistics\",e)}async getObjectId(e){return await this._startupResolver.promise,this._connection.invoke(\"controller.getObjectId\",e)}async getDisplayId(e){return await this._startupResolver.promise,this._connection.invoke(\"controller.getDisplayId\",e)}async getFeature(e){return await this._startupResolver.promise,this._connection.invoke(\"controller.getFeature\",e)}async getAggregate(e){return await this._startupResolver.promise,this._connection.invoke(\"controller.getAggregate\",e)}async getAggregateValueRanges(){return await this._startupResolver.promise,this._connection.invoke(\"controller.getAggregateValueRanges\")}async mapValidDisplayIds(e){return await this._startupResolver.promise,this._connection.invoke(\"controller.mapValidDisplayIds\",e)}async onEdits(e){await this._startupResolver.promise;const{addedFeatures:t,deletedFeatures:r,updatedFeatures:s}=e;return i(this._connection.invoke(\"controller.onEdits\",{addedFeatures:t,deletedFeatures:r,updatedFeatures:s}))}async enableEvent(e,t){return await this._startupResolver.promise,i(this._connection.invoke(\"controller.enableEvent\",{name:e,value:t}))}async _startWorker(e){try{this._connection=await c(\"Pipeline\",{client:this.client,strategy:\"dedicated\",signal:e})}catch(t){n(t)}}};e([t()],u.prototype,\"isReady\",void 0),e([t()],u.prototype,\"client\",void 0),e([t()],u.prototype,\"tileRenderer\",null),u=e([r(\"esri.views.2d.layers.support.FeatureLayerProxy\")],u);var p=u;export default p;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{isSome as e}from\"../../../core/maybe.js\";import i from\"./TileKey.js\";import t from\"./TileCoverage.js\";const l=1e-6;class s{constructor(e){this._tiles=new Map,this.buffer=0,this.acquireTile=e.acquireTile,this.releaseTile=e.releaseTile,this.tileInfoView=e.tileInfoView,this.buffer=e.buffer}destroy(){}clear(){this._tiles.forEach((e=>this._releaseTile(e)))}tileKeys(){const e=[];return this._tiles.forEach(((i,t)=>e.push(t))),e}update(e){const l=this.tileInfoView.getTileCoverage(e.state,this.buffer,\"closest\"),{spans:s,lodInfo:r}=l,{level:a}=r,o=[],d=[],h=new Set,n=new Set;for(const{row:t,colFrom:c,colTo:f}of s)for(let e=c;e<=f;e++){const l=i.getId(a,t,r.normalizeCol(e),r.getWorldForColumn(e)),s=this._getOrAcquireTile(o,l);h.add(l),s.isReady?s.visible=!0:n.add(s.key)}n.forEach((e=>this._addPlaceholders(h,e))),this._tiles.forEach((e=>{h.has(e.key.id)||(d.push(e.key.id),this._releaseTile(e))})),t.pool.release(l);return{hasMissingTiles:n.size>0,added:o,removed:d}}_getOrAcquireTile(e,t){if(!this._tiles.has(t)){const l=this.acquireTile(new i(t));e.push(t),this._tiles.set(t,l),l.visible=!1}return this._tiles.get(t)}_getTile(e){return this._tiles.get(e)}_releaseTile(e){this._tiles.delete(e.key.id),this.releaseTile(e)}_addPlaceholders(e,i){const t=this._addPlaceholderChildren(e,i);if(!(Math.abs(1-t)<l)){if(!this._addPlaceholderParent(e,i)){this._getTile(i.id).visible=!0}}}_addPlaceholderChildren(e,i){let t=0;return this._tiles.forEach((l=>{t+=this._addPlaceholderChild(e,l,i)})),t}_addPlaceholderChild(e,i,t){if(i.key.level<=t.level||!i.hasData||!t.contains(i.key))return 0;i.visible=!0,e.add(i.key.id);return 1/(1<<2*(i.key.level-t.level))}_addPlaceholderParent(i,t){let l=t.getParentKey(),s=0,r=null;for(;e(l);){if(i.has(l.id))return!0;const e=this._getTile(l.id);if(null!=e&&e.isReady)return e.visible=!0,i.add(e.key.id),!0;null!=e&&e.hasData&&e.patchCount>s&&(s=e.patchCount,r=e),l=l.getParentKey()}return!!r&&(r.visible=!0,i.add(r.key.id),!0)}}export{s as TileManager};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../chunks/tslib.es6.js\";import t from\"../../../core/has.js\";import{clone as i}from\"../../../core/lang.js\";import{andThen as r,unwrapOr as s,isSome as a,isNone as n}from\"../../../core/maybe.js\";import o from\"../../../core/Logger.js\";import\"../../../core/accessorSupport/ensureType.js\";import{property as l}from\"../../../core/accessorSupport/decorators/property.js\";import{subclass as h}from\"../../../core/accessorSupport/decorators/subclass.js\";import u from\"../../../core/Error.js\";import\"../../../core/urlUtils.js\";import\"../../../core/uuid.js\";import\"../../../portal/support/resourceExtension.js\";import{flatten as d}from\"../../../core/arrayUtils.js\";import{debounce as p,isAbortError as c,eachAlwaysValues as f,after as y}from\"../../../core/promiseUtils.js\";import g from\"../../../geometry/Extent.js\";import\"../../../geometry.js\";import m from\"../../../core/Collection.js\";import _ from\"../../../Graphic.js\";import v from\"../../../AggregateGraphic.js\";import{init as R,whenFalseOnce as b}from\"../../../core/watchUtils.js\";import{isHostedAgolService as x}from\"../../../layers/support/arcgisLayerUrl.js\";import w from\"../../../tasks/support/FeatureSet.js\";import S from\"../../../tasks/support/Query.js\";import{MAX_FILTERS as F}from\"../engine/webgl/definitions.js\";import U from\"../../webgl/capabilities.js\";import{RefreshableLayerView as I}from\"../../layers/RefreshableLayerView.js\";import E from\"../../layers/LayerView.js\";import{calculateTolerance as C}from\"../../../renderers/support/clickToleranceUtils.js\";import{createQueryGeometry as j}from\"../../support/drapedUtils.js\";import{findSizeVV as O,createClusterCountSizeVariable as T,isClusterCompatibleRenderer as P,createClusterRenderer as q}from\"./support/clusterUtils.js\";import V from\"../../layers/effects/EffectList.js\";import{computePxBuffer as L}from\"./features/support/pixelBuffering.js\";import{toJSONGeometryType as N}from\"./support/util.js\";import{createSchema as H}from\"./features/schemaUtils.js\";import G from\"../../layers/support/FeatureFilter.js\";import J from\"../../layers/support/FeatureEffect.js\";import{FeatureLayerView as k}from\"../../layers/FeatureLayerView.js\";import{LayerView2DMixin as M}from\"./LayerView2D.js\";import{createOrReuseTileRenderer as A}from\"./features/tileRenderers.js\";import z from\"./support/FeatureLayerProxy.js\";import{TileManager as D}from\"../tiling/TileManager.js\";const $=2147483648,Q=1,B=e=>(e&$)>>>31===Q;function K(e){return e&&\"openPorts\"in e}const W=o.getLogger(\"esri.views.2d.layers.FeatureLayerView2D\");let X=class extends(k(I(M(E)))){constructor(){super(...arguments),this._pipelineIsUpdating=!0,this._updatingPipelineConfig=!1,this._onGoingEdits=0,this._isRefreshing=!1,this._visibilityOverrides=new Set,this._effect=null,this._highlightIds=new Map,this._lastPixelBuffer=0,this.filter=null,this.effectLists={included:new V,excluded:new V},this.doRefresh=p((async()=>{this.isUpdating()&&await b(this,\"updating\"),this._set(\"_isRefreshing\",!0),this._lockGPUUploads();try{await this._proxy.refresh()}catch(e){c(e),0}this._unlockGPUUploads(),this._set(\"_isRefreshing\",!1)})),this._doUpdate=p((async()=>{try{if(this.destroyed||!this._hasRequiredSupport(this.layer))return;this._set(\"_updatingPipelineConfig\",!0),await b(this,\"_isRefreshing\");const{effect:t,filter:i}=this;await this._updateRequiredFields();const{renderer:r}=this._getEffectiveRenderer();this._set(\"_effectiveRenderer\",r);const s=\"feature\"===this.layer.type?this.layer.historicMoment:null,n=\"feature\"===this.layer.type?this.layer.gdbVersion:null,o={renderer:this.layer.renderer,spatialReference:this.layer.spatialReference,timeExtent:this.layer.timeExtent,definitionExpression:this.layer.definitionExpression,featureReduction:this.layer.featureReduction,fields:this.layer.fields,geometryType:this.layer.geometryType,historicMoment:s,labelsVisible:this.layer.labelsVisible,labelingInfo:this.layer.labelingInfo,availableFields:this.availableFields,effect:this.effect,filter:this.filter,gdbVersion:n,pixelBuffer:0},l=N(this.layer.geometryType),h=await L(r,l,this.layer.featureReduction),u=this._createConfiguration(o,i,t);this._lastPixelBuffer=0===h?0:Math.max(h,this._lastPixelBuffer),u.schema.source.pixelBuffer=this._lastPixelBuffer;const d=this._createTileRendererHash(r);if(d!==this._tileRendererHash){await this._initTileRenderer(r);const e=this._serviceOptions;this.effects.forEach((e=>a(e)&&a(e.filter)&&e.filter.enable())),this.tileRenderer.onConfigUpdate(r);const t={added:this._tileStrategy.tileKeys(),removed:[]},i=this.layer;\"stream\"!==i.type&&K(i.source)&&(e.source=await i.source.openPorts()),await this._proxy.startup(this.view.featuresTilingScheme,u,e,t),this.hasHighlight()&&await this._proxy.setHighlight(Array.from(this._highlightIds.keys())),await this._onceTilesUpdated(),this.tileRenderer.onConfigUpdate(r)}else{const t=await this._proxy.update(u);(t.mesh||t.targets.aggregate)&&this._lockGPUUploads();try{await this._proxy.applyUpdate(t)}catch(e){c(e)||W.error(e)}(t.mesh||t.targets.aggregate)&&this._unlockGPUUploads(),this.effects.forEach((e=>a(e)&&a(e.filter)&&e.filter.enable())),this.tileRenderer.onConfigUpdate(r),this._forceAttributeTextureUpload()}this._tileRendererHash=d,this.tileRenderer.invalidateLabels(),this.requestUpdate()}catch(e){}})),this._updateHighlight=p((async()=>this._proxy.setHighlight(Array.from(this._highlightIds.keys()))))}destroy(){var e,t;null==(e=this._proxy)||e.destroy(),r(this._updateClusterSizeTask,(e=>e.remove())),null==(t=this.tileRenderer)||t.destroy()}initialize(){this.addResolvingPromise(Promise.all([this._initProxy(),this._initServiceOptions()])),this.handles.add([this.on(\"valueRangesChanged\",(e=>{this._set(\"_aggregateValueRanges\",e.valueRanges)})),R(this,\"effect\",(e=>{this.effectLists.included.effect=null==e?void 0:e.includedEffect})),R(this,\"effect\",(e=>{this.effectLists.excluded.effect=null==e?void 0:e.excludedEffect}))])}async _initProxy(){if(\"stream\"!==this.layer.type&&\"ogc-feature\"!==this.layer.type&&this.layer.isTable)throw new u(\"featurelayerview:table-not-supported\",\"table feature layer can't be displayed\",{layer:this.layer});this._proxy&&this._proxy.destroy();const e=this._createClientOptions();return this._set(\"_proxy\",new z({client:e})),this._proxy.when()}async _initServiceOptions(){this._set(\"_serviceOptions\",await this._createServiceOptions())}get labelsVisible(){return!this.suspended&&this.layer.labelingInfo&&this.layer.labelsVisible}get effect(){return s(this._effect,null)}set effect(e){const t=this._effect;a(t)&&a(t.filter)&&t.filter.enabled&&a(e)&&a(e.filter)&&e.filter.enable(),this._effect=e,this.notifyChange(\"effect\")}get effects(){return this.effect&&[this.effect]||[]}get queryMode(){return this._serviceOptions.type}get renderingConfigHash(){if(!this.layer)return null;const e=this.availableFields,t=this.layer,i=this.view.floors,{definitionExpression:r,renderer:s,labelingInfo:n}=t,o=\"feature\"===t.type?t.gdbVersion:void 0,l=\"feature\"===t.type&&t.historicMoment?t.historicMoment.getTime():void 0,{timeExtent:h}=this,u=\"stream\"===t.type?`${JSON.stringify(t.geometryDefinition)}${t.definitionExpression}`:null,d=JSON.stringify(this.clips),p=t.featureReduction&&t.featureReduction.toJSON();return JSON.stringify({filterHash:a(this.filter)&&this.filter.toJSON(),effectHash:a(this.effect)&&this.effect.toJSON(),streamFilter:u,gdbVersion:o,definitionExpression:r,historicMoment:l,availableFields:e,renderer:s,labelingInfo:t.labelsVisible&&n,timeExtent:h,floors:i,clipsHash:d,featureReduction:p})}get hasEffects(){return this.effectLists.included.hasEffects||this.effectLists.excluded.hasEffects}highlight(e){let t;return e instanceof _?t=[e.getObjectId()]:\"number\"==typeof e||\"string\"==typeof e?t=[e]:m.isCollection(e)?t=e.map((e=>e&&e.getAttribute(this.layer.objectIdField))).toArray():Array.isArray(e)&&e.length>0&&(t=\"number\"==typeof e[0]||\"string\"==typeof e[0]?e:e.map((e=>e&&e.getAttribute(this.layer.objectIdField)))),t&&t.length?(t=t.filter((e=>null!=e)),this._addHighlight(t),{remove:()=>this._removeHighlight(t)}):{remove:()=>{}}}hasHighlight(){return!!this._highlightIds.size}hitTest(e,t){return this._hitTest(e,t)}queryStatistics(){return this._proxy.queryStatistics()}queryFeatures(e,t){return this.queryFeaturesJSON(e,t).then((e=>{const t=w.fromJSON(e);return t.features.forEach((e=>{e.layer=this.layer,e.sourceLayer=this.layer})),t}))}queryFeaturesJSON(e,t){return this._proxy.queryFeatures(this._cleanUpQuery(e),t)}queryObjectIds(e,t){return this._proxy.queryObjectIds(this._cleanUpQuery(e),t)}queryFeatureCount(e,t){return this._proxy.queryFeatureCount(this._cleanUpQuery(e),t)}queryExtent(e,t){return this._proxy.queryExtent(this._cleanUpQuery(e),t).then((e=>({count:e.count,extent:g.fromJSON(e.extent)})))}setVisibility(e,t){t?this._visibilityOverrides.delete(e):this._visibilityOverrides.add(e),this._update()}update(e){if(!this._tileStrategy||!this.tileRenderer)return;const{hasMissingTiles:t,added:i,removed:r}=this._tileStrategy.update(e);(i.length||r.length)&&this._proxy.updateTiles({added:i,removed:r}),t&&this.requestUpdate(),this.notifyChange(\"updating\")}attach(){this.view.timeline.record(`${this.layer.title} (FeatureLayer) Attach`),this._tileStrategy=new D({acquireTile:e=>this._acquireTile(e),releaseTile:e=>this._releaseTile(e),tileInfoView:this.view.featuresTilingScheme,buffer:0}),this.handles.add(R(this,\"renderingConfigHash\",(()=>this._update())),\"attach\"),\"stream\"!==this.layer.type&&this.handles.add(this.layer.on(\"edits\",(async e=>{this._set(\"_onGoingEdits\",this._onGoingEdits+1);try{const t=\"globalIdField\"in this.layer&&this.layer.globalIdField,i=e.deletedFeatures.some((e=>-1===e.objectId||!e.objectId)),r=t&&this.availableFields.includes(t);if(i&&!r)return void W.error(new u(\"mapview-apply-edits\",`Editing the specified service requires the layer's globalIdField, ${t} to be included the layer's outFields for updates to be reflected on the map`));await this._proxy.onEdits(e)}catch(t){c(t),0}this._set(\"_onGoingEdits\",Math.max(0,this._onGoingEdits-1))})),\"attach\")}detach(){this.container.removeAllChildren(),this.handles.remove(\"attach\"),this._updatingPipelineConfig=!1,this.tileRenderer&&(this.tileRenderer.uninstall(this.container),this.tileRenderer=null),this._tileStrategy&&(this._tileStrategy.destroy(),this._tileStrategy=null),this._tileRendererHash=null}moveStart(){this.requestUpdate()}viewChange(){this.requestUpdate()}moveEnd(){this.requestUpdate()}async fetchPopupFeatures(e,t){if(a(t)&&t.clientGraphics.length){const e=t.clientGraphics[0];if(e instanceof v)return[e]}const i=this.validateFetchPopupFeatures(t);if(i)throw i;if(a(t)&&0===t.clientGraphics.length)return[];const r=this.fetchClientPopupFeatures(t);if(!e)return r;const s=this._fetchServicePopupFeatures(e,t);return f([r,s]).then(d)}async _fetchServicePopupFeatures(e,t){if(\"stream\"===this.layer.type||\"ogc-feature\"===this.layer.type)return[];const i=await this.createPopupQuery(t),{layer:r}=this,{renderer:s}=r,n=a(t)?t.event:null,o=C({renderer:s,event:n});i.geometry=this.createFetchPopupFeaturesQueryGeometry(e,o);const l=new Set,{objectIdField:h}=r,u=a(t)?t.clientGraphics:null;if(u)for(const a of u)l.add(a.attributes[h]);return r.queryFeatures(i).then((e=>e.features.filter((e=>!l.has(e.attributes[h])))))}createFetchPopupFeaturesQueryGeometry(e,t){return j(e,t,this.view)}isUpdating(){return null!=this.layer.renderer&&(null!=this._updatingRequiredFieldsPromise||null==this.tileRenderer||!this._proxy||!this._proxy.isReady||this._pipelineIsUpdating||this._updatingPipelineConfig||this.tileRenderer.updating||this._onGoingEdits>0)}_createClientOptions(){return{setUpdating:e=>{this._set(\"_pipelineIsUpdating\",e)},emitEvent:e=>{this.emit(e.name,e.event)}}}async _detectQueryMode(e){if(\"path\"in e&&x(e.path)&&\"feature\"===this.layer.type&&\"point\"===this.layer.geometryType&&!this.layer.capabilities.operations.supportsEditing&&t(\"featurelayer-snapshot-enabled\"))try{const e=await this.layer.queryFeatureCount();if(e<=t(\"featurelayer-snapshot-point-min-threshold\"))return{mode:\"snapshot\",featureCount:e};const i=t(\"featurelayer-snapshot-point-max-threshold\"),r=t(\"featurelayer-snapshot-point-coverage\"),s=this.view.extent,a=this.layer.fullExtent,n=null==a?void 0:a.clone().intersection(s),o=(null==n?void 0:n.width)*(null==n?void 0:n.height),l=(null==a?void 0:a.width)*(null==a?void 0:a.height),h=0===l?0:o/l;if(e<=i&&h>=r)return{mode:\"snapshot\",featureCount:e}}catch(i){W.warn(\"mapview-feature-layer\",\"Encountered an error when querying for featureCount\",{error:i})}return{mode:\"on-demand\"}}async _createServiceOptions(){const e=this.layer;if(\"stream\"===e.type)return null;const{capabilities:t,objectIdField:r}=e,s=e.fields.map((e=>e.toJSON())),a=e.fullExtent&&e.fullExtent.toJSON(),n=N(e.geometryType),o=e.timeInfo&&e.timeInfo.toJSON()||null,l=e.spatialReference?e.spatialReference.toJSON():null,h=\"feature\"===e.type?e.customParameters:null,u=\"feature\"===e.type?e.globalIdField:null;let d;\"ogc-feature\"===e.type?d=e.source.getFeatureDefinition():K(e.source)?d=await e.source.openPorts():e.parsedUrl&&(d=i(e.parsedUrl),\"dynamicDataSource\"in e&&e.dynamicDataSource&&(d.query={layer:JSON.stringify({source:e.dynamicDataSource})}));const{mode:p,featureCount:c}=await this._detectQueryMode(d);return{type:p,featureCount:c,globalIdField:u,maxRecordCount:t.query.maxRecordCount,tileMaxRecordCount:t.query.tileMaxRecordCount,capabilities:t,fields:s,fullExtent:a,geometryType:n,objectIdField:r,source:d,timeInfo:o,spatialReference:l,customParameters:h}}async _createMemoryServiceOptions(e){const t=await e.openPorts();return{...this._createServiceOptions(),type:\"memory\",source:t}}_cleanUpQuery(e){const t=S.from(e)||this.createQuery();return t.outSpatialReference||(t.outSpatialReference=this.view.spatialReference),t}_createUpdateClusterSizeTask(e,t){return this.watch(\"_aggregateValueRanges\",(async i=>{this._updateClusterEffectiveRendererSizeVariable(e,t,i),this._updatingPipelineConfig||this.tileRenderer.onConfigUpdate(this._effectiveRenderer)}))}async _updateClusterEffectiveRendererSizeVariable(e,t,i){if(e.dynamicClusterSize&&\"visualVariables\"in e&&e.visualVariables){const r=O(e.visualVariables);if(a(r)&&\"cluster_count\"===r.field){const s=e.visualVariables.indexOf(r);e.visualVariables[s]=T(t,i);const a=e.clone();a.dynamicClusterSize=!0,this._set(\"_effectiveRenderer\",a)}}}_getEffectiveRenderer(){const e=this.layer.renderer,t=this.layer.featureReduction;if(a(this._updateClusterSizeTask)&&(this._updateClusterSizeTask.remove(),this._updateClusterSizeTask=null),t&&\"cluster\"===t.type&&P(e)){const i=t,s=[],a=q(s,e,i,this._aggregateValueRanges);return r(this._updateClusterSizeTask,(e=>e.remove())),this._updateClusterSizeTask=this._createUpdateClusterSizeTask(a,i),{renderer:a,aggregateFields:s,featureReduction:t}}return{renderer:e,aggregateFields:[],featureReduction:null}}_acquireTile(e){const t=this.tileRenderer.acquireTile(e);return t.once(\"attach\",(()=>{this.requestUpdate()})),t}_releaseTile(e){this.tileRenderer.releaseTile(e)}async _initTileRenderer(e){const t=await A(e,{layerView:this,tileInfoView:this.view.featuresTilingScheme,layer:this.layer});return this.tileRenderer&&(this._tileStrategy.clear(),this.tileRenderer.uninstall(this.container),this.tileRenderer.destroy(),this.tileRenderer=null),this.destroyed?null:(this._proxy.tileRenderer=t,this._set(\"tileRenderer\",t),this.tileRenderer.install(this.container),this.tileRenderer.onConfigUpdate(e),this.requestUpdate(),this.tileRenderer)}_createTileRendererHash(e){return`${\"heatmap\"===e.type?\"heatmap\":\"symbol\"}.${\"dot-density\"===e.type}`}_createFeatureDataHash(e,t,i){const r=e.getAttributeHash(),s=JSON.stringify(t),n=a(i)&&JSON.stringify(i.filter),o=JSON.stringify(this.timeExtent);let l=\"\";return this._visibilityOverrides.forEach((e=>l+=e)),`${r}.${s}.${n}.${o}.${l}`}get hasFilter(){const e=!!(\"floorInfo\"in this.layer&&this.layer.floorInfo&&this.view.floors&&this.view.floors.length);return!!this.filter||e||!!this._visibilityOverrides.size||!!this.timeExtent}_injectOverrides(e){const t=a(e)?e.timeExtent:null,i=a(this.timeExtent)&&a(t)?this.timeExtent.intersection(t):this.timeExtent||t;let r=null;const s=\"floorInfo\"in this.layer&&this.layer.floorInfo;if(s){const t=a(e)&&e.where;r=this._addFloorFilterClause(t)}if(!this._visibilityOverrides.size&&!i&&!s)return e;const n=a(e)&&e.clone()||new G;return n.hiddenIds=this._visibilityOverrides,n.timeExtent=i,r&&(n.where=r),n}_addFloorFilterClause(e){const t=this.layer;let i=e||\"\";if(\"floorInfo\"in t&&t.floorInfo){var r;let e=this.view.floors;if(!e||!e.length)return i;null!=(r=t.floorInfo.viewAllLevelIds)&&r.length&&(e=t.floorInfo.viewAllLevelIds);const s=e.filter((e=>\"\"!==e)).map((e=>\"'\"+e+\"'\"));s.push(\"''\");const n=t.floorInfo.floorField;let o=\"(\"+n+\" IN ({ids}) OR \"+n+\" IS NULL)\";if(o=o.replace(\"{ids}\",s.join(\", \")),a(i)&&i.includes(n)){let e=new RegExp(\"AND \\\\(\"+n+\".*NULL\\\\)\",\"g\");i=i.replace(e,\"\"),e=new RegExp(\"\\\\(\"+n+\".*NULL\\\\)\",\"g\"),i=i.replace(e,\"\"),i=i.replace(/\\s+/g,\" \").trim()}i=\"\"!==i?\"(\"+i+\") AND \"+o:o}return\"\"!==i?i:null}_createConfiguration(e,t,i){const r=\"feature\"===this.layer.type&&this.layer.historicMoment?this.layer.historicMoment.getTime():void 0,s=\"feature\"===this.layer.type?this.layer.gdbVersion:void 0,o=new Array(F),l=this._injectOverrides(t);o[0]=a(l)?l.toJSON():null,o[1]=a(i)&&i.filter?i.filter.toJSON():null;const h=H(e);if(n(h))return null;const u=U();return{definitionExpression:this.layer.definitionExpression,availableFields:this.availableFields,gdbVersion:s,historicMoment:r,devicePixelRatio:window.devicePixelRatio||1,filters:o,schema:h,supportsTextureFloat:u.supportsTextureFloat,maxTextureSize:u.maxTextureSize}}_hasRequiredSupport(e){var t;return!(\"dot-density\"===(null==(t=e.renderer)?void 0:t.type)&&!U().supportsTextureFloat)||(W.error(new u(\"webgl-missing-extension\",\"Missing WebGL extension OES_Texture_Float which is required for DotDensity\")),!1)}_onceTilesUpdated(){return this.requestUpdate(),b(this,\"_pipelineIsUpdating\",!1)}_lockGPUUploads(){this.tileRenderer&&this.tileRenderer.lockGPUUploads()}_unlockGPUUploads(){this.tileRenderer&&this.tileRenderer.unlockGPUUploads()}_forceAttributeTextureUpload(){this.tileRenderer&&this.tileRenderer.forceAttributeTextureUpload()}_update(){this.view.timeline.begin(`${this.layer.title} (FeatureLayer) Initial Pipeline Config`);const e=this._doUpdate();this._updatingPromise=e;const t=()=>{e===this._updatingPromise&&this._set(\"_updatingPipelineConfig\",!1),this.view&&this.view.timeline.end(`${this.layer.title} (FeatureLayer) Initial Pipeline Config`)};e.then(t).catch((e=>{c(e)||W.error(e),t()}))}_addHighlight(e){for(const t of e)if(this._highlightIds.has(t)){const e=this._highlightIds.get(t);this._highlightIds.set(t,e+1)}else this._highlightIds.set(t,1);this._updateHighlight().catch((e=>{c(e)||W.error(e)}))}_removeHighlight(e){for(const t of e)if(this._highlightIds.has(t)){const e=this._highlightIds.get(t)-1;0===e?this._highlightIds.delete(t):this._highlightIds.set(t,e)}this._updateHighlight().catch((e=>{c(e)||W.error(e)}))}_createHittestResult(e){return e.layer=this.layer,e.sourceLayer=this.layer,a(e.geometry)&&(e.geometry.spatialReference=this.view.spatialReference),e}async _hitTest(e,t){if(this.suspended||!this.tileRenderer)return null;const i=await this.tileRenderer.hitTest(e,t);if(0===i.length)return await y(1),null;const s=i[0];if(!B(s)){const e=await this._proxy.getFeature(s);return r(e,(e=>this._createHittestResult(_.fromJSON(e))))}const o=await this._proxy.getAggregate(s);if(n(o))return null;if(a(o.referenceId)){const e=await this._proxy.getFeature(o.referenceId);return r(e,(e=>this._createHittestResult(_.fromJSON(e))))}return this._createHittestResult(v.fromJSON(o))}};e([l()],X.prototype,\"_serviceOptions\",void 0),e([l()],X.prototype,\"_proxy\",void 0),e([l()],X.prototype,\"_pipelineIsUpdating\",void 0),e([l()],X.prototype,\"_updatingPipelineConfig\",void 0),e([l()],X.prototype,\"_effectiveRenderer\",void 0),e([l()],X.prototype,\"_aggregateValueRanges\",void 0),e([l()],X.prototype,\"_onGoingEdits\",void 0),e([l()],X.prototype,\"_isRefreshing\",void 0),e([l()],X.prototype,\"labelsVisible\",null),e([l({type:G})],X.prototype,\"filter\",void 0),e([l({type:J})],X.prototype,\"effect\",null),e([l({readOnly:!0})],X.prototype,\"effects\",null),e([l({readOnly:!0})],X.prototype,\"queryMode\",null),e([l()],X.prototype,\"renderingConfigHash\",null),e([l()],X.prototype,\"tileRenderer\",void 0),e([l()],X.prototype,\"updating\",void 0),X=e([h(\"esri.views.2d.layers.FeatureLayerView2D\")],X);var Y=X;export default Y;\n"],"sourceRoot":""}