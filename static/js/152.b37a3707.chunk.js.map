{"version":3,"sources":["../node_modules/@arcgis/core/views/interactive/snapping/candidates/VertexSnappingCandidate.js","../node_modules/@arcgis/core/views/interactive/snapping/featureSources/queryEngineUtils.js","../node_modules/@arcgis/core/views/interactive/snapping/featureSources/GraphicsSnappingSource.js","../node_modules/@arcgis/core/geometry/support/normalizeUtilsSync.js","../node_modules/@arcgis/core/views/interactive/snapping/hints/PointSnappingHint.js","../node_modules/@arcgis/core/core/libs/rbush/PooledRBush.js","../node_modules/@arcgis/core/layers/graphics/data/FeatureStore.js","../node_modules/@arcgis/core/layers/graphics/data/optimizedFeatureQueryEngineAdapter.js","../node_modules/@arcgis/core/layers/graphics/data/BoundsStore.js"],"names":["i","n","constructor","super","constraint","t","coordinateHelper","targetPoint","hints","r","this","o","type","e","edgeStart","pointToVector","start","edgeEnd","end","target","objectId","k","s","availability","sources","multipoint","point","polygon","polyline","loadedWkids","Set","loadedWkts","pendingAdds","updating","updatingHandles","layer","layerSource","destroy","length","task","abort","mapSources","destroySource","initialize","handles","add","on","onGraphicUpdate","addOnCollectionChange","graphics","onGraphicsChanged","addMany","toArray","a","queryEngine","executeQueryForSnapping","vectorToPoint","toJSON","distance","types","query","filter","createQuery","where","then","candidates","flat","map","v","w","refresh","property","remove","graphic","removed","added","Map","geometry","needsInitializeProjection","spatialReference","push","set","uid","createPendingAdd","async","h","source","dest","signal","markLoadedSpatialReferences","addPromise","promise","wkid","wkt","visible","c","fromExtent","ensureSource","createOptimizedFeature","featureStore","has","l","u","m","g","f","O","createSource","y","S","geometryType","hasZ","hasM","j","fields","name","alias","objectIdField","scheduler","view","resourceController","removeFromSource","delete","size","removeById","p","constructOnly","prototype","readOnly","d","I","maxX","minX","M","plus180Line","N","minus180Line","points","x","J","xmin","ymin","xmax","ymax","cut","valid","frameId","extent","frameIds","rings","Array","isArray","Math","ceil","abs","closed","minPts","paths","equals","compareMinX","compareMinY","toBBox","_maxEntries","max","_minEntries","_initFormat","clear","prune","X","Y","B","all","_all","data","search","children","leaf","pop","collides","load","insert","_build","slice","height","_splitRoot","_insert","b","indexHint","splice","_condense","fromJSON","pushArray","log","sqrt","min","_chooseSubtree","_split","_adjustParentBBoxes","_chooseSplitAxis","_chooseSplitIndex","console","_allDistMargin","sort","Function","join","minY","maxY","deallocator","arguments","geometryInfo","_boundsStore","_featuresById","_markedIds","events","featureAdapter","numFeatures","fullBounds","forEach","get","storeStatistics","coords","featureCount","vertexCount","_add","_emitChanged","_remove","removeManyById","invalidateIndex","forEachBounds","getFeature","forEachInBounds","startMarkingUsedFeatures","sweep","emit","getLogger","error","feature","displayId","onFeatureAdd","onFeatureRemove","getObjectId","getAttributes","attributes","getAttribute","cloneWithGeometry","getGeometry","getCentroid","centroid","_indexInvalid","_boundsToLoad","_boundsById","_idByBounds","_index","_loadIndex"],"mappings":"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","file":"static/js/152.b37a3707.chunk.js","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport{PointConstraint as t}from\"../SnappingConstraint.js\";import{FeatureSnappingCandidate as n}from\"./FeatureSnappingCandidate.js\";import{PointSnappingHint as r}from\"../hints/PointSnappingHint.js\";class i extends n{constructor(n){super({...n,constraint:new t(n.coordinateHelper,n.targetPoint)})}get hints(){return[new r(this.targetPoint)]}}export{i as VertexSnappingCandidate};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport{EdgeSnappingCandidate as e}from\"../candidates/EdgeSnappingCandidate.js\";import{VertexSnappingCandidate as t}from\"../candidates/VertexSnappingCandidate.js\";function o(o,r){switch(o.type){case\"edge\":return new e({coordinateHelper:r,edgeStart:r.pointToVector(o.start),edgeEnd:r.pointToVector(o.end),targetPoint:r.pointToVector(o.target),objectId:o.objectId});case\"vertex\":return new t({coordinateHelper:r,targetPoint:r.pointToVector(o.target),objectId:o.objectId})}}export{o as convertSnappingCandidate};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../../chunks/tslib.es6.js\";import t from\"../../../../core/Accessor.js\";import{removeUnordered as r}from\"../../../../core/arrayUtils.js\";import{HandleOwnerMixin as s}from\"../../../../core/HandleOwner.js\";import{isSome as o,isNone as i}from\"../../../../core/maybe.js\";import{eachAlwaysValues as a,createTask as n}from\"../../../../core/promiseUtils.js\";import{property as p}from\"../../../../core/accessorSupport/decorators/property.js\";import\"../../../../core/has.js\";import\"../../../../core/accessorSupport/ensureType.js\";import{subclass as d}from\"../../../../core/accessorSupport/decorators/subclass.js\";import c from\"../../../../geometry/Polygon.js\";import{canProjectWithoutEngine as l,project as u,initializeProjection as h}from\"../../../../geometry/projection.js\";import{normalizeCentralMeridianSync as m}from\"../../../../geometry/support/normalizeUtilsSync.js\";import{featureGeometryTypeKebabDictionary as y}from\"../../../../geometry/support/typeUtils.js\";import{convertFromGeometry as f}from\"../../../../layers/graphics/featureConversionUtils.js\";import g from\"../../../../layers/graphics/OptimizedFeature.js\";import S from\"../../../../layers/graphics/data/FeatureStore.js\";import j from\"../../../../layers/graphics/data/QueryEngine.js\";import{sortCandidatesInPlace as w}from\"../snappingUtils.js\";import{convertSnappingCandidate as v}from\"./queryEngineUtils.js\";let k=class extends(s(t)){constructor(e){super(e),this.availability=1,this.sources={multipoint:null,point:null,polygon:null,polyline:null},this.loadedWkids=new Set,this.loadedWkts=new Set,this.pendingAdds=[]}get updating(){return this.updatingHandles.updating}get layer(){return this.layerSource.layer}destroy(){const e=this.pendingAdds;this.pendingAdds.length=0;for(const t of e)t.task.abort();this.mapSources((e=>this.destroySource(e)))}initialize(){this.handles.add([this.layer.on(\"graphic-update\",(e=>this.onGraphicUpdate(e))),this.updatingHandles.addOnCollectionChange(this.layer.graphics,(e=>this.onGraphicsChanged(e)))]),this.addMany(this.layer.graphics.toArray())}async fetchCandidates(e,t){const r=await a(this.mapSources((r=>r.queryEngine.executeQueryForSnapping({point:e.coordinateHelper.vectorToPoint(e.point).toJSON(),distance:e.distance,types:e.types,query:o(e.filter)?e.filter.createQuery().toJSON():{where:\"1=1\"}},t).then((({candidates:e})=>e))))),s=r.flat().map((t=>v(t,e.coordinateHelper)));return w(e.point,s),s}refresh(){}onGraphicUpdate(e){switch(e.property){case\"geometry\":case\"visible\":this.remove(e.graphic),this.addMany([e.graphic])}}onGraphicsChanged(e){for(const t of e.removed)this.remove(t);this.addMany(e.added)}addMany(e){const t=[],r=new Map;for(const s of e)i(s.geometry)||(this.needsInitializeProjection(s.geometry.spatialReference)?(t.push(s.geometry.spatialReference),r.set(s.uid,s)):this.add(s));this.createPendingAdd(t,r)}createPendingAdd(e,t){if(!e.length)return;const s=n((async r=>{await h(e.map((e=>({source:e,dest:this.spatialReference}))),{signal:r}),this.markLoadedSpatialReferences(e);for(const[,e]of t)this.add(e)}));this.updatingHandles.addPromise(s.promise);const o={task:s,graphics:t},i=()=>r(this.pendingAdds,o);s.promise.then(i,i),this.pendingAdds.push(o)}markLoadedSpatialReferences(e){for(const t of e)null!=t.wkid&&this.loadedWkids.add(t.wkid),null!=t.wkt&&this.loadedWkts.add(t.wkt)}add(e){if(i(e.geometry)||!e.visible)return;let t=e.geometry;if(\"mesh\"===t.type)return;\"extent\"===t.type&&(t=c.fromExtent(t));const r=this.ensureSource(t.type);if(i(r))return;const s=this.createOptimizedFeature(e.uid,t);o(s)&&r.featureStore.add(s)}needsInitializeProjection(e){return(null==e.wkid||!this.loadedWkids.has(e.wkid))&&((null==e.wkt||!this.loadedWkts.has(e.wkt))&&!l(e,this.spatialReference))}createOptimizedFeature(e,t){const r=u(m(t),this.spatialReference);return r?new g(f(r,!1,!1),{[O]:e},null,e):null}ensureSource(e){const t=this.sources[e];if(o(t))return t;const r=this.createSource(e);return this.sources[e]=r,r}createSource(e){const t=y.toJSON(e),r=new S({geometryType:t,hasZ:!1,hasM:!1});return{featureStore:r,queryEngine:new j({featureStore:r,fields:[{name:O,type:\"esriFieldTypeOID\",alias:O}],geometryType:t,hasM:!1,hasZ:!1,objectIdField:O,spatialReference:this.spatialReference,scheduler:o(this.view)&&\"3d\"===this.view.type?this.view.resourceController.scheduler:null}),type:e}}remove(e){this.mapSources((t=>this.removeFromSource(t,e)));for(const t of this.pendingAdds)t.graphics.delete(e.uid),0===t.graphics.size&&t.task.abort()}removeFromSource(e,t){const r=t.uid;e.featureStore.has(r)&&e.featureStore.removeById(t.uid)}destroySource(e){e.queryEngine.destroy(),this.sources[e.type]=null}mapSources(e){const{point:t,polygon:r,polyline:s,multipoint:i}=this.sources,a=[];return o(t)&&a.push(e(t)),o(r)&&a.push(e(r)),o(s)&&a.push(e(s)),o(i)&&a.push(e(i)),a}};e([p({constructOnly:!0})],k.prototype,\"spatialReference\",void 0),e([p({constructOnly:!0})],k.prototype,\"layerSource\",void 0),e([p({constructOnly:!0})],k.prototype,\"view\",void 0),e([p({readOnly:!0})],k.prototype,\"updating\",null),e([p({readOnly:!0})],k.prototype,\"availability\",void 0),k=e([d(\"esri.views.interactive.snapping.featureSources.GraphicsSnappingSource\")],k);const O=\"OBJECTID\";export{k as GraphicsSnappingSource};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport{create as n}from\"./aaBoundingRect.js\";import{getBoundsXY as t}from\"./boundsUtils.js\";import{extentIntersectsPolyline as i}from\"./intersectsBase.js\";import{isPoint as m,isMultipoint as s,isExtent as e,isPolygon as x,isPolyline as o}from\"./jsonUtils.js\";import{cutParams as a,getGeometryParts as r,offsetMagnitude as f}from\"./normalizeUtilsCommon.js\";import{getInfo as c,isWebMercator as l}from\"./spatialReferenceUtils.js\";function u(n){if(!n)return null;let r=null;const u=n.spatialReference,d=c(u);if(!d)return\"toJSON\"in n?n.toJSON():n;const I=l(u)?102100:4326,g=a[I].maxX,j=a[I].minX,M=a[I].plus180Line,N=a[I].minus180Line;let O;const S=\"toJSON\"in n?n.toJSON():n;if(m(S))O=h(S,g,j);else if(s(S))S.points=S.points.map((n=>h(n,g,j))),O=S;else if(e(S))O=y(S,d);else if(x(S)||o(S)){const n=J;t(n,S);const m={xmin:n[0],ymin:n[1],xmax:n[2],ymax:n[3]},s=f(m.xmin,j)*(2*g),e=0===s?S:p(S,s);m.xmin+=s,m.xmax+=s,i(m,M)&&m.xmax!==g||i(m,N)&&m.xmin!==j?r=e:O=e}else O=S;if(null!==r){return(new v).cut(r,g)}return O}function p(n,t){const i=r(n);for(const m of i)for(const n of m)n[0]+=t;return n}function y(n,t){if(!t)return n;const i=d(n,t).map((n=>n.extent));return i.length<2?i[0]||n:i.length>2?(n.xmin=t.valid[0],n.xmax=t.valid[1],n):{rings:i.map((n=>[[n.xmin,n.ymin],[n.xmin,n.ymax],[n.xmax,n.ymax],[n.xmax,n.ymin],[n.xmin,n.ymin]]))}}function h(n,t,i){if(Array.isArray(n)){const m=n[0];if(m>t){const i=f(m,t);n[0]=m+i*(-2*t)}else if(m<i){const t=f(m,i);n[0]=m+t*(-2*i)}}else{const m=n.x;if(m>t){const i=f(m,t);n.x+=i*(-2*t)}else if(m<i){const t=f(m,i);n.x+=t*(-2*i)}}return n}function d(n,t){const i=[],{ymin:m,ymax:s}=n,e=n.xmax-n.xmin,x=n.xmin,o=n.xmax;let a;const[r,f]=t.valid;a=I(n.xmin,t);const c=a.x,l=a.frameId;a=I(n.xmax,t);const u=a.x,p=a.frameId,y=c===u&&e>0;if(e>2*f){const n={xmin:x<o?c:u,ymin:m,xmax:f,ymax:s},t={xmin:r,ymin:m,xmax:x<o?u:c,ymax:s},e={xmin:0,ymin:m,xmax:f,ymax:s},a={xmin:r,ymin:m,xmax:0,ymax:s},y=[],h=[];g(n,e)&&y.push(l),g(n,a)&&h.push(l),g(t,e)&&y.push(p),g(t,a)&&h.push(p);for(let i=l+1;i<p;i++)y.push(i),h.push(i);i.push({extent:n,frameIds:[l]},{extent:t,frameIds:[p]},{extent:e,frameIds:y},{extent:a,frameIds:h})}else c>u||y?i.push({extent:{xmin:c,ymin:m,xmax:f,ymax:s},frameIds:[l]},{extent:{xmin:r,ymin:m,xmax:u,ymax:s},frameIds:[p]}):i.push({extent:{xmin:c,ymin:m,xmax:u,ymax:s},frameIds:[l]});return i}function I(n,t){const[i,m]=t.valid,s=2*m;let e,x=0;return n>m?(e=Math.ceil(Math.abs(n-m)/s),n-=e*s,x=e):n<i&&(e=Math.ceil(Math.abs(n-i)/s),n+=e*s,x=-e),{x:n,frameId:x}}function g(n,t){const{xmin:i,ymin:m,xmax:s,ymax:e}=t;return j(n,i,m)&&j(n,i,e)&&j(n,s,e)&&j(n,s,m)}function j(n,t,i){return t>=n.xmin&&t<=n.xmax&&i>=n.ymin&&i<=n.ymax}class v{cut(n,t){let i;if(n.rings)this.closed=!0,i=n.rings,this.minPts=4;else{if(!n.paths)return null;this.closed=!1,i=n.paths,this.minPts=2}const m=i.length,s=-2*t;for(let e=0;e<m;e++){const n=i[e];if(n&&n.length>=this.minPts){const t=[];for(const i of n)t.push([i[0]+s,i[1]]);i.push(t)}}return this.closed?n.rings=i:n.paths=i,n}}const J=n();export{u as normalizeCentralMeridianSync};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport{objectEqual as t}from\"../snappingUtils.js\";import{SnappingHint as n}from\"./SnappingHint.js\";class s extends n{constructor(t){super(),this.point=t}equals(n){return n instanceof s&&t(this.point,n.point)}}export{s as PointSnappingHint};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport{indexOf as t,PositionHint as i}from\"../../arrayUtils.js\";import{assumeNonNull as n}from\"../../maybe.js\";import e from\"../../PooledArray.js\";import{q as s}from\"../../../chunks/quickselect.js\";class h{constructor(t=9,i){this.compareMinX=l,this.compareMinY=c,this.toBBox=function(t){return t},this._maxEntries=Math.max(4,t||9),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),i&&(\"function\"==typeof i?this.toBBox=i:this._initFormat(i)),this.clear()}destroy(){this.clear(),M.prune(),X.prune(),Y.prune(),B.prune()}all(t){this._all(this.data,t)}search(t,i){let n=this.data;const e=this.toBBox;if(p(t,n))for(M.clear();n;){for(let s=0,h=n.children.length;s<h;s++){const h=n.children[s],a=n.leaf?e(h):h;p(t,a)&&(n.leaf?i(h):x(t,a)?this._all(h,i):M.push(h))}n=M.pop()}}collides(t){let i=this.data;const n=this.toBBox;if(!p(t,i))return!1;for(M.clear();i;){for(let e=0,s=i.children.length;e<s;e++){const s=i.children[e],h=i.leaf?n(s):s;if(p(t,h)){if(i.leaf||x(t,h))return!0;M.push(s)}}i=M.pop()}return!1}load(t){if(!t.length)return this;if(t.length<this._minEntries){for(let i=0,n=t.length;i<n;i++)this.insert(t[i]);return this}let i=this._build(t.slice(0,t.length),0,t.length-1,0);if(this.data.children.length)if(this.data.height===i.height)this._splitRoot(this.data,i);else{if(this.data.height<i.height){const t=this.data;this.data=i,i=t}this._insert(i,this.data.height-i.height-1,!0)}else this.data=i;return this}insert(t){return t&&this._insert(t,this.data.height-1),this}clear(){return this.data=new b([]),this}remove(i){if(!i)return this;let e,s=this.data,h=null,a=0,r=!1;const o=this.toBBox(i);for(Y.clear(),B.clear();s||Y.length>0;){var l;if(!s)s=n(Y.pop()),h=Y.data[Y.length-1],a=null!=(l=B.pop())?l:0,r=!0;if(s.leaf&&(e=t(s.children,i,s.children.length,s.indexHint),-1!==e))return s.children.splice(e,1),Y.push(s),this._condense(Y),this;r||s.leaf||!x(s,o)?h?(a++,s=h.children[a],r=!1):s=null:(Y.push(s),B.push(a),a=0,h=s,s=s.children[0])}return this}toJSON(){return this.data}fromJSON(t){return this.data=t,this}_all(t,i){let n=t;for(X.clear();n;){var e;if(!0===n.leaf)for(const t of n.children)i(t);else X.pushArray(n.children);n=null!=(e=X.pop())?e:null}}_build(t,i,n,e){const s=n-i+1;let h=this._maxEntries;if(s<=h){const e=new b(t.slice(i,n+1));return a(e,this.toBBox),e}e||(e=Math.ceil(Math.log(s)/Math.log(h)),h=Math.ceil(s/h**(e-1)));const r=new j([]);r.height=e;const o=Math.ceil(s/h),l=o*Math.ceil(Math.sqrt(h));g(t,i,n,l,this.compareMinX);for(let a=i;a<=n;a+=l){const i=Math.min(a+l-1,n);g(t,a,i,o,this.compareMinY);for(let n=a;n<=i;n+=o){const s=Math.min(n+o-1,i);r.children.push(this._build(t,n,s,e-1))}}return a(r,this.toBBox),r}_chooseSubtree(t,i,n,e){for(;e.push(i),!0!==i.leaf&&e.length-1!==n;){let n,e=1/0,s=1/0;for(let h=0,a=i.children.length;h<a;h++){const a=i.children[h],r=m(a),o=d(t,a)-r;o<s?(s=o,e=r<e?r:e,n=a):o===s&&r<e&&(e=r,n=a)}i=n||i.children[0]}return i}_insert(t,i,n){const e=this.toBBox,s=n?t:e(t);Y.clear();const h=this._chooseSubtree(s,this.data,i,Y);for(h.children.push(t),o(h,s);i>=0&&Y.data[i].children.length>this._maxEntries;)this._split(Y,i),i--;this._adjustParentBBoxes(s,Y,i)}_split(t,i){const n=t.data[i],e=n.children.length,s=this._minEntries;this._chooseSplitAxis(n,s,e);const h=this._chooseSplitIndex(n,s,e);if(!h)return void console.log(\"  Error: assertion failed at PooledRBush._split: no valid split index\");const r=n.children.splice(h,n.children.length-h),o=n.leaf?new b(r):new j(r);o.height=n.height,a(n,this.toBBox),a(o,this.toBBox),i?t.data[i-1].children.push(o):this._splitRoot(n,o)}_splitRoot(t,i){this.data=new j([t,i]),this.data.height=t.height+1,a(this.data,this.toBBox)}_chooseSplitIndex(t,i,n){let e,s,h;e=s=1/0;for(let a=i;a<=n-i;a++){const i=r(t,0,a,this.toBBox),o=r(t,a,n,this.toBBox),l=f(i,o),c=m(i)+m(o);l<e?(e=l,h=a,s=c<s?c:s):l===e&&c<s&&(s=c,h=a)}return h}_chooseSplitAxis(t,i,n){const e=t.leaf?this.compareMinX:l,s=t.leaf?this.compareMinY:c;this._allDistMargin(t,i,n,e)<this._allDistMargin(t,i,n,s)&&t.children.sort(e)}_allDistMargin(t,i,n,e){t.children.sort(e);const s=this.toBBox,h=r(t,0,i,s),a=r(t,n-i,n,s);let l=u(h)+u(a);for(let r=i;r<n-i;r++){const i=t.children[r];o(h,t.leaf?s(i):i),l+=u(h)}for(let r=n-i-1;r>=i;r--){const i=t.children[r];o(a,t.leaf?s(i):i),l+=u(a)}return l}_adjustParentBBoxes(t,i,n){for(let e=n;e>=0;e--)o(i.data[e],t)}_condense(i){for(let n=i.length-1;n>=0;n--){const e=i.data[n];if(0===e.children.length)if(n>0){const s=i.data[n-1],h=s.children;h.splice(t(h,e,h.length,s.indexHint),1)}else this.clear();else a(e,this.toBBox)}}_initFormat(t){const i=[\"return a\",\" - b\",\";\"];this.compareMinX=new Function(\"a\",\"b\",i.join(t[0])),this.compareMinY=new Function(\"a\",\"b\",i.join(t[1])),this.toBBox=new Function(\"a\",\"return {minX: a\"+t[0]+\", minY: a\"+t[1]+\", maxX: a\"+t[2]+\", maxY: a\"+t[3]+\"};\")}}function a(t,i){r(t,0,t.children.length,i,t)}function r(t,i,n,e,s){s||(s=new b([])),s.minX=1/0,s.minY=1/0,s.maxX=-1/0,s.maxY=-1/0;for(let h,a=i;a<n;a++)h=t.children[a],o(s,t.leaf?e(h):h);return s}function o(t,i){t.minX=Math.min(t.minX,i.minX),t.minY=Math.min(t.minY,i.minY),t.maxX=Math.max(t.maxX,i.maxX),t.maxY=Math.max(t.maxY,i.maxY)}function l(t,i){return t.minX-i.minX}function c(t,i){return t.minY-i.minY}function m(t){return(t.maxX-t.minX)*(t.maxY-t.minY)}function u(t){return t.maxX-t.minX+(t.maxY-t.minY)}function d(t,i){return(Math.max(i.maxX,t.maxX)-Math.min(i.minX,t.minX))*(Math.max(i.maxY,t.maxY)-Math.min(i.minY,t.minY))}function f(t,i){const n=Math.max(t.minX,i.minX),e=Math.max(t.minY,i.minY),s=Math.min(t.maxX,i.maxX),h=Math.min(t.maxY,i.maxY);return Math.max(0,s-n)*Math.max(0,h-e)}function x(t,i){return t.minX<=i.minX&&t.minY<=i.minY&&i.maxX<=t.maxX&&i.maxY<=t.maxY}function p(t,i){return i.minX<=t.maxX&&i.minY<=t.maxY&&i.maxX>=t.minX&&i.maxY>=t.minY}function g(t,i,e,h,a){const r=[i,e];for(;r.length;){const i=n(r.pop()),e=n(r.pop());if(i-e<=h)continue;const o=e+Math.ceil((i-e)/h/2)*h;s(t,o,e,i,a),r.push(e,o,o,i)}}const M=new e,X=new e,Y=new e,B=new e({deallocator:void 0});class _{constructor(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0}}class w extends _{constructor(){super(...arguments),this.height=1,this.indexHint=new i}}class b extends w{constructor(t){super(),this.children=t,this.leaf=!0}}class j extends w{constructor(t){super(),this.children=t,this.leaf=!1}}export{_ as BBox,h as PooledRBush,h as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport e from\"../../../core/Error.js\";import t from\"../../../core/Evented.js\";import r from\"../../../core/Logger.js\";import{isSome as s,isNone as o}from\"../../../core/maybe.js\";import{fromRect as i}from\"../../../geometry/support/aaBoundingBox.js\";import{create as a,NEGATIVE_INFINITY as d}from\"../../../geometry/support/aaBoundingRect.js\";import{getBoundsOptimizedGeometry as n}from\"../featureConversionUtils.js\";import{BoundsStore as h}from\"./BoundsStore.js\";import{optimizedFeatureQueryEngineAdapter as u}from\"./optimizedFeatureQueryEngineAdapter.js\";class m{constructor(e){this.geometryInfo=e,this._boundsStore=new h,this._featuresById=new Map,this._markedIds=new Set,this.events=new t,this.featureAdapter=u}get geometryType(){return this.geometryInfo.geometryType}get hasM(){return this.geometryInfo.hasM}get hasZ(){return this.geometryInfo.hasZ}get numFeatures(){return this._featuresById.size}get fullBounds(){if(!this.numFeatures)return null;const e=a(d);return this._featuresById.forEach((t=>{const r=this._boundsStore.get(t.objectId);r&&(e[0]=Math.min(r[0],e[0]),e[1]=Math.min(r[1],e[1]),e[2]=Math.max(r[2],e[2]),e[3]=Math.max(r[3],e[3]))})),e}get storeStatistics(){let e=0;return this._featuresById.forEach((t=>{s(t.geometry)&&t.geometry.coords&&(e+=t.geometry.coords.length)})),{featureCount:this._featuresById.size,vertexCount:e/(this.hasZ?this.hasM?4:3:this.hasM?3:2)}}add(e){this._add(e),this._emitChanged()}addMany(e){for(const t of e)this._add(t);this._emitChanged()}clear(){this._featuresById.clear(),this._boundsStore.clear(),this._emitChanged()}removeById(e){const t=this._featuresById.get(e);return t?(this._remove(t),this._emitChanged(),t):null}removeManyById(e){this._boundsStore.invalidateIndex();for(const t of e){const e=this._featuresById.get(t);e&&this._remove(e)}this._emitChanged()}forEachBounds(e,t,r){for(const s of e){const e=this._boundsStore.get(s.objectId);e&&t(i(r,e))}}getFeature(e){return this._featuresById.get(e)}has(e){return this._featuresById.has(e)}forEach(e){this._featuresById.forEach((t=>e(t)))}forEachInBounds(e,t){this._boundsStore.forEachInBounds(e,(e=>{t(this._featuresById.get(e))}))}startMarkingUsedFeatures(){this._boundsStore.invalidateIndex(),this._markedIds.clear()}sweep(){let e=!1;this._featuresById.forEach(((t,r)=>{this._markedIds.has(r)||(e=!0,this._remove(t))})),this._markedIds.clear(),e&&this._emitChanged()}_emitChanged(){this.events.emit(\"changed\",void 0)}_add(t){if(!t)return;const i=t.objectId;if(null==i)return void r.getLogger(\"esri.layers.graphics.data.FeatureStore\").error(new e(\"featurestore:invalid-feature\",\"feature id is missing\",{feature:t}));const d=this._featuresById.get(i);let h;if(this._markedIds.add(i),d?(t.displayId=d.displayId,h=this._boundsStore.get(i),this._boundsStore.delete(i)):s(this.onFeatureAdd)&&this.onFeatureAdd(t),o(t.geometry)||!t.geometry.coords||!t.geometry.coords.length)return this._boundsStore.set(i,null),void this._featuresById.set(i,t);h=n(s(h)?h:a(),t.geometry,this.geometryInfo.hasZ,this.geometryInfo.hasM),s(h)&&this._boundsStore.set(i,h),this._featuresById.set(i,t)}_remove(e){return s(this.onFeatureRemove)&&this.onFeatureRemove(e),this._markedIds.delete(e.objectId),this._boundsStore.delete(e.objectId),this._featuresById.delete(e.objectId),e}}export{m as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport{getCentroidOptimizedGeometry as t}from\"../centroid.js\";import e from\"../OptimizedFeature.js\";import r from\"../OptimizedGeometry.js\";const o={getObjectId:t=>t.objectId,getAttributes:t=>t.attributes,getAttribute:(t,e)=>t.attributes[e],cloneWithGeometry:(t,r)=>new e(r,t.attributes,null,t.objectId),getGeometry:t=>t.geometry,getCentroid:(e,o)=>(e.centroid||(e.centroid=t(new r,e.geometry,o.hasZ,o.hasM)),e.centroid)};export{o as default,o as optimizedFeatureQueryEngineAdapter};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport i from\"../../../core/has.js\";import{PooledRBush as s}from\"../../../core/libs/rbush/PooledRBush.js\";const d=5e4,n={minX:0,minY:0,maxX:0,maxY:0};function t(i,s,d){n.minX=s[0],n.minY=s[1],n.maxX=s[2],n.maxY=s[3],i.search(n,d)}class e{constructor(){this._indexInvalid=!1,this._boundsToLoad=[],this._boundsById=new Map,this._idByBounds=new Map,this._index=new s(9,i(\"esri-csp-restrictions\")?i=>({minX:i[0],minY:i[1],maxX:i[2],maxY:i[3]}):[\"[0]\",\"[1]\",\"[2]\",\"[3]\"]),this._loadIndex=()=>{if(this._indexInvalid){const i=new Array(this._idByBounds.size);let s=0;this._idByBounds.forEach(((d,n)=>{i[s++]=n})),this._indexInvalid=!1,this._index.clear(),this._index.load(i)}else this._boundsToLoad.length&&(this._index.load(this._boundsToLoad.filter((i=>this._idByBounds.has(i)))),this._boundsToLoad.length=0)}}clear(){this._indexInvalid=!1,this._boundsToLoad.length=0,this._boundsById.clear(),this._idByBounds.clear(),this._index.clear()}delete(i){const s=this._boundsById.get(i);this._boundsById.delete(i),s&&(this._idByBounds.delete(s),this._indexInvalid||this._index.remove(s))}forEachInBounds(i,s){this._loadIndex(),t(this._index,i,(i=>s(this._idByBounds.get(i))))}get(i){return this._boundsById.get(i)}has(i){return this._boundsById.has(i)}invalidateIndex(){this._indexInvalid||(this._indexInvalid=!0,this._boundsToLoad.length=0)}set(i,s){if(!this._indexInvalid){const s=this._boundsById.get(i);s&&(this._index.remove(s),this._idByBounds.delete(s))}this._boundsById.set(i,s),s&&(this._idByBounds.set(s,i),this._indexInvalid||(this._boundsToLoad.push(s),this._boundsToLoad.length>d&&this._loadIndex()))}}export{e as BoundsStore};\n"],"sourceRoot":""}