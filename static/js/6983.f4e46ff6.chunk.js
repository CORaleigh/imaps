"use strict";(globalThis.webpackChunkimaps=globalThis.webpackChunkimaps||[]).push([[6983],{77178:(e,t,n)=>{n.d(t,{Z:()=>c});var i=n(27366),r=n(40281),s=n(41691),l=n(92026),o=(n(93169),n(10064),n(32718),n(3073),n(27088)),a=n(49861),d=(n(63780),n(25243),n(69912));let u=class extends((0,s.p)(r.Z)){constructor(e){super(e),this.getCollections=null}initialize(){this.handles.add((0,o.EH)((()=>this._refresh())))}destroy(){this.getCollections=null}_refresh(){const e=(0,l.pC)(this.getCollections)?this.getCollections():null;if((0,l.Wi)(e))return void this.removeAll();let t=0;for(const n of e)(0,l.pC)(n)&&(t=this._processCollection(t,n));this.splice(t,this.length)}_createNewInstance(e){return new r.Z(e)}_processCollection(e,t){if(!t)return e;const n=this.itemFilterFunction?this.itemFilterFunction:e=>!!e;for(const i of t)if(i){if(n(i)){const t=this.indexOf(i,e);t>=0?t!==e&&this.reorder(i,e):this.add(i,e),++e}if(this.getChildrenFunction){const t=this.getChildrenFunction(i);if(Array.isArray(t))for(const n of t)e=this._processCollection(e,n);else e=this._processCollection(e,t)}}return e}};(0,i._)([(0,a.Cb)()],u.prototype,"getCollections",void 0),(0,i._)([(0,a.Cb)()],u.prototype,"getChildrenFunction",void 0),(0,i._)([(0,a.Cb)()],u.prototype,"itemFilterFunction",void 0),u=(0,i._)([(0,d.j)("esri.core.CollectionFlattener")],u);const c=u},39638:(e,t,n)=>{var i;function r(e,t){switch(e.type){case"range":{const n="range"in e?e.range[0]:e.minValue,r="range"in e?e.range[1]:e.maxValue;if(+t<n||+t>r)return i.VALUE_OUT_OF_RANGE;break}case"coded-value":case"codedValue":if(null==e.codedValues||e.codedValues.every((e=>null==e||e.code!==t)))return i.INVALID_CODED_VALUE}return null}function s(e){if(e&&"range"===e.type)return{min:"range"in e?e.range[0]:e.minValue,max:"range"in e?e.range[1]:e.maxValue}}n.d(t,{D3:()=>s,F3:()=>r,V$:()=>i}),function(e){e.VALUE_OUT_OF_RANGE="domain-validation-error::value-out-of-range",e.INVALID_CODED_VALUE="domain-validation-error::invalid-coded-value"}(i||(i={}))},37270:(e,t,n)=>{n.d(t,{AB:()=>h,CH:()=>C,Ec:()=>ee,Gz:()=>G,H7:()=>M,Lk:()=>g,Ll:()=>T,M$:()=>z,Mu:()=>w,O5:()=>v,Pz:()=>B,Q0:()=>y,Qc:()=>W,Qj:()=>A,R9:()=>K,UF:()=>f,YN:()=>u,ZV:()=>_,gd:()=>m,io:()=>b,j:()=>V,os:()=>L,qN:()=>k,vP:()=>X,vl:()=>x,wF:()=>j,y2:()=>P});var i=n(10064),r=n(92026),s=n(18202),l=n(39638),o=n(819);const a=["field","field2","field3","normalizationField","rotationInfo.field","proportionalSymbolInfo.field","proportionalSymbolInfo.normalizationField","colorInfo.field","colorInfo.normalizationField"],d=["field","normalizationField"];function u(e,t){if(null!=e&&null!=t)for(const n of Array.isArray(e)?e:[e])if(c(a,n,t),"visualVariables"in n&&n.visualVariables)for(const e of n.visualVariables)c(d,e,t)}function c(e,t,n){if(e)for(const i of e){const e=(0,s.hS)(i,t),r=e&&"function"!=typeof e&&n.get(e);r&&(0,s.RB)(i,r.name,t)}}function f(e,t){if(null!=e&&t?.fields.length)if("startField"in e){const n=t.get(e.startField),i=t.get(e.endField);e.startField=n&&n.name||null,e.endField=i&&i.name||null}else{const n=t.get(e.startTimeField),i=t.get(e.endTimeField);e.startTimeField=n&&n.name||null,e.endTimeField=i&&i.name||null}}const p=new Set;function y(e,t){return e&&t?(p.clear(),m(p,e,t),Array.from(p).sort()):[]}function m(e,t,n){if(n)if(t?.fields?.length)if(n.includes("*"))for(const{name:i}of t.fields)e.add(i);else for(const i of n)h(e,t,i);else{if(n.includes("*"))return e.clear(),void e.add("*");for(const t of n)e.add(t)}}function h(e,t,n){if("string"==typeof n)if(t){const i=t.get(n);i&&e.add(i.name)}else e.add(n)}function g(e,t){return(0,r.Wi)(t)||(0,r.Wi)(e)?[]:t.includes("*")?e.fields.map((e=>e.name)):t}async function b(e,t,n){if(!n)return;const{arcadeUtils:i}=await(0,o.LC)(),r=i.extractFieldNames(n,t?.fields?.map((e=>e.name)));for(const s of r)h(e,t,s)}async function F(e,t,r){if(r&&"1=1"!==r){const s=(await Promise.all([n.e(8562),n.e(4397)]).then(n.bind(n,48562))).WhereClause.create(r,t);if(!s.isStandardized)throw new i.Z("fieldUtils:collectFilterFields","Where clause is not standardized",{where:r});m(e,t,s.fieldNames)}}function v(e){let{displayField:t,fields:n}=e;return t||(n&&n.length?I(n,"name-or-title")||I(n,"unique-identifier")||I(n,"type-or-category")||function(e){for(const t of e){if(!t||!t.name)continue;const e=t.name.toLowerCase();if(e.includes("name")||e.includes("title"))return t.name}return null}(n):null)}function I(e,t){for(const n of e)if(n&&n.valueType&&n.valueType===t)return n.name;return null}async function x(e,t){if(!t)return;const n=(0,s.hS)("elevationInfo.featureExpressionInfo",t);return n?n.collectRequiredFields(e,t.fieldsIndex):void 0}async function _(e,t,n){if(!t||!n||!("fields"in n))return;const i=[];if(n.popupTemplate?.expressionInfos&&i.push(...n.popupTemplate.expressionInfos.map((n=>b(e,t.fieldsIndex,n.expression)))),Array.isArray(n.popupTemplate?.content)){const r=n.popupTemplate.content;for(const n of r)"expression"===n.type&&n.expressionInfo&&i.push(b(e,t.fieldsIndex,n.expressionInfo.expression))}n.fields&&i.push(...n.fields.map((n=>async function(e,t,n){n.outStatistic.onStatisticValueExpression?b(e,t,n.outStatistic.onStatisticValueExpression):e.add(n.outStatistic.onStatisticField)}(e,t.fieldsIndex,n)))),await Promise.all(i)}async function T(e,t,n){t&&(t.timeInfo&&(0,r.pC)(n)&&n.timeExtent&&m(e,t.fieldsIndex,[t.timeInfo.startField,t.timeInfo.endField]),t.floorInfo&&m(e,t.fieldsIndex,[t.floorInfo.floorField]),(0,r.pC)(n)&&(0,r.pC)(n.where)&&await F(e,t.fieldsIndex,n.where))}async function A(e,t,n){t&&n&&await Promise.all(n.map((n=>async function(e,t,n){t&&n&&(n.valueExpression?await b(e,t.fieldsIndex,n.valueExpression):n.field&&h(e,t.fieldsIndex,n.field))}(e,t,n))))}function C(e){if(!e)return[];const t="editFieldsInfo"in e&&e.editFieldsInfo;return t?y(e.fieldsIndex,[t&&t.creatorField,t&&t.creationDateField,t&&t.editorField,t&&t.editDateField]):[]}function V(e){if(!e)return[];const t=e.geometryFieldsInfo;return t?y(e.fieldsIndex,[t.shapeAreaField,t.shapeLengthField]):[]}async function w(e,t){const{labelingInfo:n,fieldsIndex:i}=t;n&&n.length&&await Promise.all(n.map((t=>async function(e,t,n){if(!n)return;const i=n.getLabelExpression(),r=n.where;if("arcade"===i.type)await b(e,t,i.expression);else{const n=i.expression.match(/{[^}]*}/g);n&&n.forEach((n=>{h(e,t,n.slice(1,-1))}))}await F(e,t,r)}(e,i,t))))}function L(e){const t=e.defaultValue;return void 0!==t&&Z(e,t)?t:e.nullable?null:void 0}function E(e){return"number"==typeof e&&!isNaN(e)&&isFinite(e)}function N(e){return null===e||E(e)}const $="isInteger"in Number?Number.isInteger:e=>"number"==typeof e&&isFinite(e)&&Math.floor(e)===e;function S(e){return null===e||$(e)}function D(e){return null!=e&&"string"==typeof e}function O(e){return null===e||D(e)}function U(){return!0}function Z(e,t){let n;switch(e.type){case"date":case"integer":case"long":case"small-integer":case"esriFieldTypeDate":case"esriFieldTypeInteger":case"esriFieldTypeLong":case"esriFieldTypeSmallInteger":n=e.nullable?S:$;break;case"double":case"single":case"esriFieldTypeSingle":case"esriFieldTypeDouble":n=e.nullable?N:E;break;case"string":case"esriFieldTypeString":n=e.nullable?O:D;break;default:n=U}return 1===arguments.length?n:n(t)}const R=new Set(["integer","small-integer","single","double","esriFieldTypeInteger","esriFieldTypeSmallInteger","esriFieldTypeSingle","esriFieldTypeDouble"]);function M(e){return null!=e&&R.has(e.type)}function k(e){return null!=e&&("string"===e.type||"esriFieldTypeString"===e.type)}function P(e){return null!=e&&("date"===e.type||"esriFieldTypeDate"===e.type)}var z,G;function B(e){return null==e||"number"==typeof e&&isNaN(e)?null:e}function W(e,t){return e.nullable&&null===t?null:M(e)&&!function(e,t){const n="string"==typeof e?Q(e):e;return!!n&&(n.isInteger?$(t)&&t>=n.min&&t<=n.max:t>=n.min&&t<=n.max)}(e.type,Number(t))?z.OUT_OF_RANGE:Z(e,t)?e.domain?(0,l.F3)(e.domain,t):null:G.INVALID_TYPE}function j(e){return(0,l.D3)(e.domain)||(M(e)?Q(e.type):void 0)}function Q(e){switch(e){case"esriFieldTypeSmallInteger":case"small-integer":return Y;case"esriFieldTypeInteger":case"integer":return q;case"esriFieldTypeSingle":case"single":return H;case"esriFieldTypeDouble":case"double":return J}}(z||(z={})).OUT_OF_RANGE="numeric-range-validation-error::out-of-range",function(e){e.INVALID_TYPE="type-validation-error::invalid-type"}(G||(G={}));const Y={min:-32768,max:32767,isInteger:!0},q={min:-2147483648,max:2147483647,isInteger:!0},H={min:-34e37,max:12e37,isInteger:!1},J={min:-Number.MAX_VALUE,max:Number.MAX_VALUE,isInteger:!1};function X(e,t,n){switch(e){case l.V$.INVALID_CODED_VALUE:return`Value ${n} is not in the coded domain - field: ${t.name}, domain: ${JSON.stringify(t.domain)}`;case l.V$.VALUE_OUT_OF_RANGE:return`Value ${n} is out of the range of valid values - field: ${t.name}, domain: ${JSON.stringify(t.domain)}`;case G.INVALID_TYPE:return`Value ${n} is not a valid value for the field type - field: ${t.name}, type: ${t.type}, nullable: ${t.nullable}`;case z.OUT_OF_RANGE:{const{min:e,max:i}=Q(t.type);return`Value ${n} is out of range for the number type - field: ${t.name}, type: ${t.type}, value range is ${e} to ${i}`}}}function K(e,t){return!function(e,t,n){if(!t||!t.attributes||!e){if((0,r.pC)(n))for(const t of e)n.add(t);return!0}const i=t.attributes;let s=!1;for(const l of e)if(!(l in i)){if(s=!0,!(0,r.pC)(n))break;n.add(l)}return s}(e,t,null)}function ee(e){return["raster.itempixelvalue","raster.servicepixelvalue"].some((t=>e.toLowerCase().startsWith(t)))}},84938:(e,t,n)=>{n.d(t,{K:()=>p});var i=n(27366),r=n(40281),s=n(60354),l=n(32718),o=n(66978),a=n(49861),d=(n(63780),n(93169),n(25243),n(69912)),u=n(30651);function c(e,t,n){let i,r;if(e)for(let s=0,l=e.length;s<l;s++){if(i=e.getItemAt(s),i[t]===n)return i;if("group"===i?.type&&(r=c(i.layers,t,n),r))return r}}const f=l.Z.getLogger("esri.support.LayersMixin"),p=e=>{let t=class extends e{constructor(){super(...arguments),this.layers=new r.Z;const e=e=>{e.parent=this,this.layerAdded(e),"elevation"!==e.type&&"base-elevation"!==e.type||f.error(`Layer 'title:${e.title}, id:${e.id}' of type '${e.type}' is not supported as an operational layer and will therefore be ignored.`)},t=e=>{e.parent=null,this.layerRemoved(e)};this.layers.on("before-add",(e=>(e=>{e.parent&&"remove"in e.parent&&e.parent.remove(e)})(e.item))),this.layers.on("after-add",(t=>e(t.item))),this.layers.on("after-remove",(e=>t(e.item)))}destroy(){const e=this.layers.removeAll();for(const t of e)this.layerRemoved(t),t.destroy();this.layers.destroy()}set layers(e){this._set("layers",(0,s.Z)(e,this._get("layers")))}add(e,t){const n=this.layers;if(t=n.getNextIndex(t),e instanceof u.Z){const i=e;i.parent===this?this.reorder(i,t):n.add(i,t)}else(0,o.y8)(e)?e.then((e=>{this.destroyed||this.add(e,t)})):f.error("#add()","The item being added is not a Layer or a Promise that resolves to a Layer.")}addMany(e,t){const n=this.layers;t=n.getNextIndex(t),e.slice().forEach((e=>{e.parent!==this?(n.add(e,t),t+=1):this.reorder(e,t)}))}findLayerById(e){return c(this.layers,"id",e)}findLayerByUid(e){return c(this.layers,"uid",e)}remove(e){return this.layers.remove(e)}removeMany(e){return this.layers.removeMany(e)}removeAll(){return this.layers.removeAll()}reorder(e,t){return this.layers.reorder(e,t)}layerAdded(e){}layerRemoved(e){}};return(0,i._)([(0,a.Cb)()],t.prototype,"layers",null),t=(0,i._)([(0,d.j)("esri.support.LayersMixin")],t),t}},16791:(e,t,n)=>{n.d(t,{Q:()=>f});var i=n(27366),r=n(40281),s=n(60354),l=n(32718),o=n(49861),a=(n(63780),n(93169),n(25243),n(69912));const d="esri.support.TablesMixin",u=l.Z.getLogger(d);function c(e,t,n){if(e)for(let i=0,r=e.length;i<r;i++){const r=e.getItemAt(i);if(r[t]===n)return r;if("group"===r?.type){const e=c(r.tables,t,n);if(e)return e}}}const f=e=>{let t=class extends e{constructor(){super(...arguments),this.tables=new r.Z,this.tables.on("after-add",(e=>{const t=e.item;t.parent&&t.parent!==this&&"tables"in t.parent&&t.parent.tables.remove(t),t.parent=this,"feature"!==t.type&&u.error(`Layer 'title:${t.title}, id:${t.id}' of type '${t.type}' is not supported as a table and will therefore be ignored.`)})),this.tables.on("after-remove",(e=>{e.item.parent=null}))}destroy(){const e=this.tables.removeAll();for(const t of e)t.destroy();this.tables.destroy()}set tables(e){this._set("tables",(0,s.Z)(e,this._get("tables")))}findTableById(e){return c(this.tables,"id",e)}findTableByUid(e){return c(this.tables,"uid",e)}};return(0,i._)([(0,o.Cb)()],t.prototype,"tables",null),t=(0,i._)([(0,a.j)(d)],t),t}},30219:(e,t,n)=>{n.d(t,{a:()=>r});var i=n(77178);function r(e){return new i.Z({getCollections:()=>[e.tables,e.layers],getChildrenFunction:e=>{const t=[];return"tables"in e&&t.push(e.tables),"layers"in e&&t.push(e.layers),t},itemFilterFunction:e=>{const t=e.parent;return t&&"tables"in t&&t.tables.includes(e)}})}}}]);
//# sourceMappingURL=6983.f4e46ff6.chunk.js.map