{"version":3,"sources":["../node_modules/@arcgis/core/widgets/DistanceMeasurement2D/DistanceMeasurement2DTool.js","../node_modules/@arcgis/core/widgets/DistanceMeasurement2D/DistanceMeasurement2DViewModel.js","../node_modules/@arcgis/core/widgets/DistanceMeasurement2D.js","../node_modules/@arcgis/core/renderers/support/clickToleranceUtils.js","../node_modules/@arcgis/core/views/support/drapedUtils.js","../node_modules/@arcgis/core/views/interactive/GraphicManipulator.js","../node_modules/@arcgis/core/layers/GroupLayer.js","../node_modules/@arcgis/core/widgets/support/InteractiveToolViewModel.js"],"names":["W","U","arguments","_drawActive","_handles","d","_polylineLayer","D","_manipulatorLayer","_groupLayer","I","layers","listMode","visible","_vertices","deferCreation","geodesicDistanceThreshold","measurement","measurementLabel","h","then","e","messages","this","add","a","detach","_draw","destroy","_set","reset","length","_startSketch","view","P","map","focus","y","_updatePolylines","O","_","v","create","remove","removeAll","_updateSketch","type","_updateCursor","mode","on","vertices","_stopSketch","manipulators","forEach","manipulator","interactive","complete","spatialReference","t","pop","manipulatorId","l","s","r","o","i","m","style","color","handleColor","size","handleWidth","outline","width","c","geometry","symbol","T","layer","graphic","focusedSymbol","z","x","palette","k","next","G","R","coord","push","findById","n","id","cursor","paths","isGeographic","S","L","f","WGS84","isWebMercator","A","C","M","original","drawing","B","b","j","g","u","H","unit","pathPrimaryColor","pathSecondaryColor","pathWidth","addMany","data","symbolLayers","effects","dashTemplate","lineDashEnding","controlPointEnding","enable","capStyle","joinStyle","extent","center","p","haloColor","haloSize","font","family","text","E","isWGS84","prototype","value","Number","readOnly","constructOnly","N","getLogger","supportedViewType","tool","isDisabled","w","active","_validateUnit","defaultUnit","_override","_clearOverride","_validateUnits","createTool","removeTool","toolConstructor","constructorArguments","error","unitOptions","indexOf","filter","slice","aliasOf","String","buttonDisabled","widgetIcon","base","container","hint","hintText","panelError","measurementItem","measurementItemDisabled","measurementItemTitle","measurementItemValue","settings","units","unitsLabel","unitsSelect","unitsSelectWrapper","actionSection","newMeasurementButton","iconClass","label","messagesUnits","viewModel","isSupported","state","key","class","unsupported","classes","distance","for","onchange","_changeUnit","bind","systems","pluralCapitalized","$","disabled","onclick","_newMeasurement","title","newMeasurement","start","target","options","selectedIndex","source","overridable","xoffset","Math","max","abs","yoffset","stops","maxSize","minSize","floor","renderer","event","pointerType","visualVariables","uniqueValueInfos","classBreakInfos","resolution","overlayPixelSizeInMapUnits","basemapSpatialReference","equals","xmin","min","ymin","xmax","ymax","toMap","intersects","selectable","grabbable","dragging","events","EventEmitter","_circleCollisionCache","_graphicSymbolChangedHandle","_originalSymbol","attachSymbolChanged","elevationInfo","offset","_get","_updateGraphicSymbol","emit","action","detachSymbolChanged","_resetGraphicSymbol","_intersectDistance2D","_intersectDistance3D","watch","_focused","originalPoint","clone","mapPoint","radiusPx","toScreen","include","renderSpatialReference","camera","eye","nonNullable","_visibilityHandles","fullExtent","operationalLayerType","_visibilityWatcher","_enforceVisibility","visibilityMode","_visibleWatcher","webmap","getLayerJSONFromResourceInfo","layerType","addResolvingPromise","loadFromPortal","supportedTypes","Promise","resolve","_turnOffOtherLayers","uid","initialized","find","getItemAt","_isAnyLayerVisible","some","json","read","write","ignoreOrigin","origins","_baseHandles","_loggedUnsupportedErrorOnce","_creationAbortController","ready","logUnsupportedError","tools","removed","destroyed","abort","reject","createToolParams","AbortController","signal","Boolean"],"mappings":"shBAI44DA,EAAE,IAAQC,EAAC,kDAAiB,aAAa,kCAAC,eAASC,YAAgBC,aAAY,EAAG,EAAKC,SAAS,IAAIC,IAAE,EAAKC,eAAe,IAAIC,IAAE,EAAKC,kBAAkB,IAAID,IAAE,EAAKE,YAAY,IAAIC,UAAE,CAACC,OAAO,CAAC,EAAKL,eAAe,EAAKE,mBAAmBI,SAAS,OAAOC,SAAQ,IAAK,EAAKC,UAAU,GAAG,EAAKC,eAAc,EAAG,EAAKC,0BAA0B,IAAI,EAAKC,YAAY,KAAK,EAAKC,iBAAiB,KAApV,EAA9B,8CAAuX,WAAY,WAACC,YAAE,uBAAuBC,MAAM,SAAAC,GAAI,EAAKC,SAASD,KAAKE,KAAKnB,SAASoB,IAAIC,YAAC,sBAAE,sBAAAA,EAAA,sEAA8BN,YAAE,uBAAhC,OAAU,EAAKG,SAAf,sDAA/c,qBAA0gB,WAAUC,KAAKG,SAASH,KAAKI,QAAQJ,KAAKI,MAAMC,UAAUL,KAAKI,MAAM,MAAMJ,KAAKnB,WAAWmB,KAAKnB,SAASwB,UAAUL,KAAKnB,SAAS,MAAMmB,KAAKjB,iBAAiBiB,KAAKjB,eAAesB,UAAUL,KAAKjB,eAAe,MAAMiB,KAAKf,oBAAoBe,KAAKf,kBAAkBoB,UAAUL,KAAKf,kBAAkB,QAAhzB,oBAAszB,SAAaa,GAAGE,KAAKM,KAAK,WAAWR,GAAGA,GAAGE,KAAKI,MAAMG,UAA52B,sBAAo3B,WAAWP,KAAKpB,aAAa,IAAIoB,KAAKT,UAAUiB,QAAQR,KAAKS,iBAAj7B,sBAAg8B,WAAU,WAAOX,EAAEE,KAAKU,KAAKV,KAAKI,MAAM,IAAIO,IAAE,CAACD,KAAKZ,IAAIA,EAAEc,IAAIX,IAAID,KAAKd,aAAaY,EAAEe,QAAQb,KAAKnB,SAASoB,IAAI,CAACa,YAAEd,KAAK,CAAC,OAAO,4BAA4B,UAAU,aAAa,WAAK,EAAKT,UAAUiB,OAAO,GAAG,EAAKO,sBAAsBD,YAAEd,KAAK,yBAAyB,SAAAF,GAAIkB,EAAElB,KAAKmB,eAAKC,mBAASlB,KAAKmB,WAA1uC,sBAAmvC,WAAU,IAAWrB,EAAGE,KAAKU,KAAZE,IAAiBZ,KAAKI,MAAMM,KAAK,KAAKV,KAAKI,MAAMC,UAAUL,KAAKI,MAAM,KAAKN,EAAEsB,OAAOpB,KAAKd,aAAac,KAAKnB,SAASwC,YAAYrB,KAAKjB,eAAesC,YAAYrB,KAAKf,kBAAkBoC,YAAYrB,KAAKM,KAAK,cAAc,MAAMN,KAAKM,KAAK,mBAAmB,QAAlgD,oBAAwgD,WAASN,KAAKd,YAAYI,SAAQ,IAA1iD,oBAA6iD,WAASU,KAAKd,YAAYI,SAAQ,IAA/kD,mBAAklD,WAAQU,KAAKT,UAAU,GAAGS,KAAKjB,eAAesC,YAAYrB,KAAKM,KAAK,cAAc,MAAMN,KAAKM,KAAK,mBAAmB,MAAMN,KAAKI,MAAMG,QAAQP,KAAKpB,aAAY,EAAGoB,KAAKsB,cAAc,MAAvwD,0BAA2wD,SAAaxB,GAAG,iBAAiBA,EAAEyB,MAAMvB,KAAKwB,kBAAzzD,0BAAy0D,WAAc,WAACxB,KAAKpB,aAAY,EAAG,IAAMkB,EAAEE,KAAKI,MAAMe,OAAO,WAAW,CAACM,KAAK,UAAU3B,EAAE4B,GAAG,CAAC,aAAa,gBAAgB,gBAAgB,gBAAgB,OAAO,SAAS,SAAA5B,GAAC,OAAE,EAAKwB,cAAcxB,EAAE6B,aAAY7B,EAAE4B,GAAG,iBAAiB,WAAK,EAAKE,mBAAxjE,yBAAykE,WAAc5B,KAAK6B,aAAaC,SAAS,SAAAhC,GAAIA,EAAEiC,YAAYC,aAAY,KAAMhC,KAAKpB,aAAY,EAAGoB,KAAKiC,aAA/qE,2BAA0rE,SAAcnC,GAAE,WAAC,IAAGkB,EAAEhB,KAAKU,KAAKwB,mBAAoBjB,cAAnC,CAA8C,GAAGnB,EAAEU,OAAO,EAAE,OAAOR,KAAKT,UAAU,GAAGS,KAAK6B,aAAaR,iBAAiBrB,KAAKjB,eAAesC,YAAYrB,KAAKmB,SAA6C,IAA3M,IAA8LgB,EAAGnC,KAAKU,KAAzBwB,iBAAmClC,KAAKT,UAAUiB,OAAOV,EAAEU,QAAQ,KAAqBV,EAAGE,KAAKT,UAAU6C,MAAhCC,cAAsCrC,KAAK6B,aAAaT,OAAOtB,GAAG,IAAzT,eAAiUwC,GAAjU,kBAAoXxC,EAAEwC,GAAtX,GAA+WC,EAA/W,KAAiXC,EAAjX,KAAyXC,EAAyrD,SAAW3C,EAAEqC,EAAEI,EAAEC,GAAG,IAAME,EAAE,IAAIC,IAAE,CAACC,MAAM,SAASC,MAAML,EAAEM,YAAYC,KAAKP,EAAEQ,YAAYC,QAAQ,CAAC1B,KAAK,cAAc2B,MAAM,KAAKT,EAAE,IAAIE,IAAE,CAACC,MAAM,SAASC,MAAML,EAAEM,YAAYC,KAAK,IAAIP,EAAEQ,YAAYC,QAAQ,CAAC1B,KAAK,cAAc2B,MAAM,KAAKhD,EAAE,IAAIiD,IAAE,CAACC,SAAStD,EAAEuD,OAAOX,IAAI,OAAO,IAAIY,IAAE,CAAC5C,KAAKyB,EAAEoB,MAAMhB,EAAEiB,QAAQtD,EAAEuD,cAAchB,IAAr/DiB,CAAE,IAAIhB,IAAE,CAACiB,EAAEpB,EAAEzB,EAAE0B,EAAEN,iBAAiBC,IAAI,EAAKzB,KAAK,EAAKzB,kBAAkB,EAAK2E,SAAS1D,EAAE,EAAK2B,aAAa5B,IAAIwC,GAAGoB,YAAEpB,GAAG,SAAC3C,EAAEqC,GAAKA,EAAE2B,KAAKC,YAAE,EAAKrD,OAAOoD,KAAKE,YAAElE,EAAE0D,UAAUM,MAAM,WAAK,IAAM3B,EAAErC,EAAE0D,QAAQJ,SAAS,EAAK7D,UAAU+C,GAAG2B,MAAM,CAAC9B,EAAEwB,EAAExB,EAAErB,GAAG,EAAKC,yBAAyB,EAAKxB,UAAU2E,KAAK,CAAC7B,cAAcnC,EAAE+D,MAAM,CAAC1B,EAAEC,MAAnXF,EAAEtC,KAAKT,UAAUiB,OAAO8B,EAAExC,EAAEU,OAAO8B,IAAI,EAAvCA,GAA8X,IAAAC,EAAEvC,KAAKT,UAAUiB,OAAO,EAAEgC,EAAExC,KAAKT,UAAUgD,GAA3C,cAAoDzC,EAAEyC,GAAtD,GAA+CE,EAA/C,KAAiDvC,EAAjD,KAAyD,GAAGsC,EAAEyB,MAAM,KAAKxB,GAAGD,EAAEyB,MAAM,KAAK/D,EAAE,CAACsC,EAAEyB,MAAM,CAACxB,EAAEvC,GAAG,IAAMJ,EAAE,IAAI4C,IAAE,CAACiB,EAAElB,EAAE3B,EAAEZ,EAAEgC,iBAAiBC,IAAInC,KAAK6B,aAAasC,SAAS3B,EAAEH,eAAemB,QAAQJ,SAAStD,EAAE,IAAMsE,EAAEpE,KAAKpB,YAAYoB,KAAKT,UAAUgD,GAAGF,cAAc,KAAKrC,KAAK6B,aAAaC,SAAS,SAAAhC,GAAIA,EAAEiC,YAAYC,YAAY,MAAMoC,GAAGtE,EAAEuE,KAAKD,KAAKpE,KAAKe,sBAA/uG,2BAAkwG,WAAgBf,KAAKsE,OAAOtE,KAAKpB,YAAY,YAAY,OAA3zG,8BAAg0G,WAAyB,MAAquC,SAAWkB,EAAEqC,EAAEI,GAAG,IAAkDrC,EAAEkE,EAA9C1B,EAAE,IAAID,IAAE,CAAC8B,MAAM,CAACzE,GAAGoC,iBAAiBC,IAAY,GAAGA,EAAEqC,aAAa,GAAGC,YAAEtC,GAAGjC,EAAEwE,YAAE,CAAChC,GAAG,UAAU,GAAG0B,EAAET,YAAEjB,EAAEjE,OAAO,CAAC,IAAMqB,EAAE6E,YAAEjC,EAAEF,IAAEoC,OAAOrC,EAAEoB,YAAE7D,EAAErB,GAAGyB,EAAEwE,YAAE,CAAC5E,GAAG,UAAU,GAAGsE,EAAEO,YAAEpC,EAAEJ,QAAQ,GAAGA,EAAE0C,cAAc3E,EAAE4E,yBAAEpC,EAAE,UAAU0B,EAAEW,0BAAErC,EAAEjE,EAAE,cAAc,CAAC,IAAMqB,EAAEkF,uBAAEtC,EAAE,UAAU,GAAG5C,GAAGyC,EAAE,CAAC,IAAMzC,EAAE6E,YAAEjC,EAAEF,IAAEoC,OAAOrC,EAAEoB,YAAE7D,EAAErB,GAAGyB,EAAEwE,YAAE,CAAC5E,GAAG,UAAU,GAAGsE,EAAEO,YAAEpC,EAAEJ,QAAQjC,EAAEJ,EAAEsE,EAAE1B,EAAE,MAAM,CAAChD,YAAY,CAAC0D,SAASgB,EAAE5D,OAAON,GAAG+E,SAASvC,EAAEwC,QAAQd,GAAjkDe,CAAtEnF,KAAKT,UAAUqB,KAAK,SAAAd,GAAC,OAAEA,EAAEmE,SAAiDjE,KAAKU,KAAKwB,iBAAiBlC,KAAKP,2BAA5D0C,EAAhD,EAAoCzC,YAAsB6C,EAA1D,EAAkD2C,QAAmB1C,EAArE,EAA4DyC,SAA2EjF,KAAKM,KAAK,cAAc6B,GAAG,IAAMO,EAA0nD,SAAW5C,EAAEqC,EAAEI,GAAG,IAAIJ,IAAIrC,EAAE,OAAO,KAAK,OAAOyC,GAAG,IAAI,SAAS,OAAO6C,YAAEtF,EAAEqC,EAAE3B,OAAO,UAAU,IAAI,WAAW,OAAO6E,YAAEvF,EAAEqC,EAAE3B,OAAO,UAAU,QAAQ,OAAO8E,YAAExF,EAAEyF,YAAEpD,EAAE3B,OAAO,SAAS+B,GAAGA,IAA5yDiD,CAAExF,KAAKD,SAASoC,EAAEnC,KAAKyF,MAAMzF,KAAKM,KAAK,mBAAmBoC,GAA3O,MAAyS1C,KAAK4D,QAAzCnB,EAArQ,EAAoPiD,iBAAsCxF,EAA1R,EAAuQyF,mBAA+B/F,EAAtS,EAA4RgG,UAA0B5F,KAAKjB,eAAesC,YAAYrB,KAAKjB,eAAe8G,QAAQ,CAAC,IAAI1C,IAAE,CAACC,SAASb,EAAEc,OAAO,IAAIe,IAAE,CAAC0B,KAAK,CAACvE,KAAK,qBAAqB8B,OAAO,CAAC9B,KAAK,gBAAgBwE,aAAa,CAAC,CAACxE,KAAK,iBAAiByE,QAAQ,CAAC,CAACzE,KAAK,2BAA2B0E,aAAa,CAAC,GAAG,IAAIC,eAAe,UAAUC,mBAAmB,iBAAiBC,QAAO,EAAGC,SAAS,OAAOC,UAAU,QAAQpD,MAAMtD,EAAE,IAAIiD,MAAM3C,GAAG,CAACqB,KAAK,iBAAiB6E,QAAO,EAAGC,SAAS,OAAOC,UAAU,QAAQpD,MAAMtD,EAAEiD,MAAMJ,UAAU,IAAIU,IAAE,CAACC,SAASZ,EAAE+D,OAAOC,OAAOnD,OAAO,IAAIoD,IAAE,CAAC5D,MAAM,CAAC,IAAI,IAAI,IAAI,GAAG6D,UAAU,CAAC,EAAE,EAAE,EAAE,IAAIC,SAAS,EAAEC,KAAK,IAAItE,IAAE,CAACS,KAAK,GAAG8D,OAAO,eAAeC,KAAKpE,YAAlvI,GAAeqE,KAAigK,SAAS/F,EAAElB,GAAG,IAAIA,EAAE,OAAM,EAAb,IAAmCqC,EAA6BrC,EAA1C0E,aAA6BjC,EAAazC,EAA3B+E,cAAwBrC,EAAG1C,EAAXkH,QAAa,OAAO7E,IAAIK,IAAIiC,YAAE3E,KAAKqC,IAAII,EAA0LzC,YAAE,CAACqC,eAAKzD,EAAEuI,UAAU,cAAS,GAAQnH,YAAE,CAACqC,YAAE,CAAC+E,OAAM,KAAMxI,EAAEuI,UAAU,WAAW,MAAMnH,YAAE,CAACqC,YAAE,CAACZ,KAAK4F,UAAUzI,EAAEuI,UAAU,iCAA4B,GAAQnH,YAAE,CAACqC,YAAE,CAACiF,UAAS,KAAM1I,EAAEuI,UAAU,mBAAc,GAAQnH,YAAE,CAACqC,YAAE,CAACiF,UAAS,KAAM1I,EAAEuI,UAAU,wBAAmB,GAAQnH,YAAE,CAACqC,eAAKzD,EAAEuI,UAAU,gBAAW,GAAQnH,YAAE,CAACqC,eAAKzD,EAAEuI,UAAU,eAAU,GAAQnH,YAAE,CAACqC,eAAKzD,EAAEuI,UAAU,YAAO,GAAQnH,YAAE,CAACqC,YAAE,CAACkF,eAAc,KAAM3I,EAAEuI,UAAU,YAAO,GAAmF,IAAuBK,EAAlG5I,EAAEoB,YAAE,CAACyC,YAAE,iEAAiE7D,GCAr6N6G,EAAE,CAACvC,YAAY,EAAEF,YAAY,CAAC,IAAI,IAAI,EAAE,IAAI8C,UAAU,EAAEF,iBAAiB,CAAC,IAAI,IAAI,EAAE,KAAKC,mBAAmB,CAAC,IAAI,IAAI,IAAI,MAAM/F,EAAEE,IAAEyH,UAAU,qEAAyEpE,EAAC,kDAAiB,SAAAA,EAAYhB,GAAE,kCAAC,cAAMA,IAAQqF,kBAAkB,KAAK,EAAK3I,SAAS,IAAI6D,IAAE,EAAKjD,0BAA0B,IAAI,EAAKC,YAAY,KAAK,EAAKC,iBAAiB,KAAK,EAAKiE,QAAQ2B,EAAE,EAAKkC,KAAK,KAAvK,EAA/B,8CAA2M,WAAY,WAACzH,KAAKnB,SAASoB,IAAI,CAACmE,YAAEpE,KAAK,CAAC,OAAO,UAAU,8BAA8B,SAACmC,EAAErC,EAAE0C,GAAK,EAAKiF,OAAO,EAAKA,KAAKjF,GAAGL,UAArU,qBAA6U,WAAUnC,KAAKnB,WAAWmB,KAAKnB,SAASwB,UAAUL,KAAKnB,SAAS,QAA7Y,iBAAmZ,WAAY,IAAIsD,EDA++KrC,ECA7+K,OAAOE,KAAK0H,WAAW,WDAg+K,OAAV5H,ECAz8K,OAAOqC,EAAEnC,KAAKU,WAAM,EAAOyB,EAAED,mBDAi8KlB,EAAElB,KAAI6H,cCAz2K,WAA5E3H,KAAKyH,MAAMzH,KAAKN,YAAYM,KAAKyH,KAAKG,OAAO,YAAY,WAAW,UAA5jB,gBAA+kB,WAAW,OAAO5H,KAAK6H,cAAc7H,KAAK8H,cAAznB,IAAsoB,SAAS3F,QAAG,IAASA,EAAEnC,KAAK+H,UAAU,OAAO/H,KAAK6H,cAAc1F,IAAInC,KAAKgI,eAAe,UAA9tB,uBAAsuB,WAAkB,OAAOzF,KAA/vB,IAAiwB,SAAgBJ,QAAG,IAASA,EAAEnC,KAAK+H,UAAU,cAAc/H,KAAKiI,eAAe9F,IAAInC,KAAKgI,eAAe,iBAAx2B,mBAAu3B,WAAQ,OAAOhI,KAAKkI,eAA34B,mBAAw5B,WAAQlI,KAAKmI,eAAr6B,8BAAk7B,WAAkB,WAAC,MAAM,CAACC,gBAAgB3B,EAAE4B,qBAAqB,iBAAK,CAAC5I,0BAA0B,EAAKA,0BAA0BmE,QAAQ,EAAKA,QAAQ6B,KAAK,EAAKA,UAAjlC,iCAAylC,WAAsB7F,EAAE0I,MAAM,mEAAvnC,sBAAwrC,WAAe1I,EAAE0I,MAAF,MAAA1I,EAAC,aAAxsC,2BAAqtC,SAAcuC,GAAG,OAAO,IAAInC,KAAKuI,YAAYC,QAAQrG,GAAGA,GAAG,IAAInC,KAAKuI,YAAYC,QAAQxI,KAAK8H,aAAa9H,KAAK8H,YAAY9H,KAAKuI,YAAY,KAAj2C,4BAAo2C,WAAoB,IAALpG,EAAK,uDAAH,GAAUrC,EAAEqC,EAAEsG,QAAQ,SAAAtG,GAAC,OAAG,IAAII,IAAEiG,QAAQrG,MAAK,OAAO,IAAIrC,EAAEU,OAAO+B,IAAEmG,QAAQ5I,MAAh8C,GAAewC,KAAq7CH,YAAE,CAACK,YAAEtC,MAAIiD,EAAE8D,UAAU,mBAAc,GAAQ9E,YAAE,CAACK,YAAE,CAACjB,KAAK4F,UAAUhE,EAAE8D,UAAU,iCAA4B,GAAQ9E,YAAE,CAACK,YAAE,CAAC4E,UAAS,EAAGuB,QAAQ,sBAAsBxF,EAAE8D,UAAU,mBAAc,GAAQ9E,YAAE,CAACK,YAAE,CAAC4E,UAAS,EAAGuB,QAAQ,2BAA2BxF,EAAE8D,UAAU,wBAAmB,GAAQ9E,YAAE,CAACK,eAAKW,EAAE8D,UAAU,eAAU,GAAQ9E,YAAE,CAACK,YAAE,CAAC4E,UAAS,KAAMjE,EAAE8D,UAAU,QAAQ,MAAM9E,YAAE,CAACK,YAAE,CAAC6E,eAAc,EAAGD,UAAS,KAAMjE,EAAE8D,UAAU,YAAO,GAAQ9E,YAAE,CAACK,YAAE,CAACjB,KAAKqH,UAAUzF,EAAE8D,UAAU,OAAO,MAAM9E,YAAE,CAACK,YAAE,CAACjB,KAAK,CAACqH,WAAWzF,EAAE8D,UAAU,cAAc,MAAsF,IAAuBtE,EAAvGQ,EAAEhB,YAAE,CAACM,YAAE,sEAAsEU,GCAzpEA,GAAE,+BAA+BsD,GAAE,CAACoC,eAAe,wBAAwBC,WAAW,yBAAyBC,KAAI,UAAI5F,GAAJ,mCAAuC6F,UAAS,UAAI7F,GAAJ,eAAmB8F,KAAI,UAAI9F,GAAJ,UAAc+F,SAAQ,UAAI/F,GAAJ,eAAmBgG,WAAU,UAAIhG,GAAJ,kBAAsBzD,YAAW,UAAIyD,GAAJ,iBAAqBiG,gBAAe,UAAIjG,GAAJ,sBAA0BkG,wBAAuB,UAAIlG,GAAJ,gCAAoCmG,qBAAoB,UAAInG,GAAJ,4BAAgCoG,qBAAoB,UAAIpG,GAAJ,4BAAgCqG,SAAQ,UAAIrG,GAAJ,cAAkBsG,MAAK,UAAItG,GAAJ,WAAeuG,WAAU,UAAIvG,GAAJ,iBAAqBwG,YAAW,UAAIxG,GAAJ,8BAAkCyG,mBAAkB,UAAIzG,GAAJ,0BAA8B0G,cAAa,UAAI1G,GAAJ,aAAiB2G,qBAAoB,UAAI3G,GAAJ,oDAA4DrE,GAAC,kDAAiB,WAAYgB,EAAEqC,GAAE,kCAAC,cAAMrC,EAAEqC,IAAQ4H,UAAUtD,GAAEqC,WAAW,EAAKkB,WAAM,EAAO,EAAKjK,SAAS,KAAK,EAAKkK,cAAc,KAAK,EAAKxE,KAAK,KAAK,EAAK8C,YAAY,KAAK,EAAK7H,KAAK,KAAK,EAAKwJ,UAAU,IAAIvH,EAA5K,EAAjC,0CAA+M,WAAQ,WAAU7C,EAAoDE,KAAvDqE,GAAclC,EAAyCnC,KAAlDD,SAAyBwC,EAAyBvC,KAAvCiK,cAA0BvH,EAAa1C,KAAvBkK,UAAoB9F,EAAGpE,KAAXV,QAAwBmD,EAAiEC,EAAxEkF,OAAqB1H,EAAmDwC,EAA/DyH,YAA+B5E,EAAgC7C,EAAjD/C,iBAAyBgD,EAAwBD,EAA9B0H,MAAajH,EAAiBT,EAAtB+C,KAAmB3G,EAAG4D,EAAf6F,YAAiBrH,EAAE,aAAayB,EAAEyC,EAAE,cAAczC,GAAG,aAAaA,EAAE1B,EAAEwB,GAAG,UAAUE,EAAEL,YAAE,UAAU,CAAC+H,IAAI,OAAOC,MAAM7D,GAAEwC,MAAM3G,YAAE,IAAI,CAACgI,MAAM7D,GAAEyC,UAAU/G,EAAE8G,OAAO,KAAKrJ,EAAEM,EAAE,KAAKoC,YAAE,UAAU,CAAC+H,IAAI,cAAcC,MAAM7D,GAAE0C,YAAY7G,YAAE,IAAI,KAAKH,EAAEoI,cAAwUjF,EAAEF,EAAE9C,YAAE,UAAU,CAAC+H,IAAI,cAAcC,MAAM7D,GAAE/G,aAAnW,SAACI,EAAEqC,EAAEI,GAAL,OAASJ,EAAEG,YAAE,MAAM,CAAC+H,IAAG,UAAI9H,EAAJ,YAAgB+H,MAAM7D,GAAE2C,iBAAiB9G,YAAE,OAAO,CAACgI,MAAM7D,GAAE6C,sBAAsBxJ,GAAGwC,YAAE,OAAO,CAACgI,MAAM7D,GAAE8C,sBAAsBpH,IAAIG,YAAE,MAAM,CAAC+H,IAAG,UAAI9H,EAAJ,aAAiB+H,MAAM,EAAKE,QAAQ/D,GAAE2C,gBAAgB3C,GAAE4C,yBAAyB,gBAAgB,QAAQ/G,YAAE,OAAO,CAACgI,MAAM7D,GAAE6C,sBAAsBxJ,IAA4D6H,CAAExF,EAAEsI,SAASlF,EAAE,aAAa,KAAKzE,EAAzwB,UAA8wBhB,EAA9wB,UAAwxBkF,EAAEI,EAAE9C,YAAE,UAAU,CAAC+H,IAAI,QAAQC,MAAM7D,GAAEgD,OAAOnH,YAAE,QAAQ,CAACgI,MAAM7D,GAAEiD,WAAWgB,IAAI5J,GAAGqB,EAAEsD,MAAMnD,YAAE,MAAM,CAACgI,MAAM7D,GAAEmD,oBAAoBtH,YAAE,SAAS,CAACgI,MAAM7D,GAAEkD,YAAYtF,GAAGvD,EAAE6J,SAAS3K,KAAK4K,YAAYC,KAAK7K,KAAKkH,MAAM/D,GAAGrE,EAAE8B,KAAK,SAAAd,GAAI,IAAIqC,EAAE,OAAOG,YAAE,SAAS,CAAC+H,IAAIvK,EAAEoH,MAAMpH,GAAG0C,YAAE1C,GAAGyC,EAAEuI,QAAQhL,GAAG,OAAOqC,EAAEI,EAAEkH,MAAM3J,SAAI,EAAOqC,EAAE4I,yBAAyB,KAAKC,EAAE5F,EAAE9C,YAAE,MAAM,CAAC+H,IAAI,WAAWC,MAAM7D,GAAE+C,UAAUxE,GAAG,KAAKK,GAAGnF,GAAGuC,IAAI2C,EAAE,KAAK9C,YAAE,MAAM,CAACgI,MAAM7D,GAAEoD,eAAevH,YAAE,SAAS,CAAC2I,SAAS/J,EAAEoJ,MAAMtK,KAAKwK,QAAQ/D,GAAEqD,qBAAqB5I,GAAGuF,GAAEoC,gBAAgBgC,KAAK7K,KAAKkL,QAAQlL,KAAKmL,gBAAgBC,MAAMjJ,EAAEkJ,eAAe,aAAalJ,EAAEkJ,eAAe9J,KAAK,UAAUY,EAAEkJ,iBAAiB1G,EAAEP,EAAE9B,YAAE,MAAM,CAACgI,MAAM7D,GAAEuC,WAAWpJ,EAAEqB,EAAE+J,EAAE1F,EAAED,GAAG,KAAK,OAAO/C,YAAE,MAAM,CAACgI,MAAM7D,GAAEsC,MAAMpE,KAAzsD,6BAA4sD,WAAkBP,YAAEpE,KAAKkK,UAAUoB,WAA/uD,yBAAwvD,SAAYxL,GAAG,IAAMqC,EAAErC,EAAEyL,OAAOhJ,EAAEJ,EAAEqJ,QAAQrJ,EAAEsJ,eAAelJ,IAAIvC,KAAKkK,UAAUzE,KAAKlD,EAAE2E,WAA/0D,GAAe3B,KAAy0DzF,YAAE,CAACyC,YAAE,qBAAqBzD,GAAEmI,UAAU,cAAS,GAAQnH,YAAE,CAACqC,eAAKrD,GAAEmI,UAAU,iBAAY,GAAQnH,YAAE,CAACqC,YAAE,CAACwG,QAAQ,CAAC+C,OAAO,uBAAuBC,aAAY,MAAO7M,GAAEmI,UAAU,aAAQ,GAAQnH,YAAE,CAACqC,cAAIjC,YAAE,iEAAiEpB,GAAEmI,UAAU,gBAAW,GAAQnH,YAAE,CAACqC,cAAIjC,YAAE,wBAAwBpB,GAAEmI,UAAU,qBAAgB,GAAQnH,YAAE,CAACyC,YAAE,mBAAmBzD,GAAEmI,UAAU,YAAO,GAAQnH,YAAE,CAACyC,YAAE,0BAA0BzD,GAAEmI,UAAU,mBAAc,GAAQnH,YAAE,CAACyC,YAAE,mBAAmBzD,GAAEmI,UAAU,YAAO,GAAQnH,YAAE,CAACqC,YAAE,CAACZ,KAAKoB,KAAK7D,GAAEmI,UAAU,iBAAY,GAAQnH,YAAE,CAACyC,YAAE,sBAAsBzD,GAAEmI,UAAU,eAAU,GAAQnH,YAAE,CAAC2C,eAAK3D,GAAEmI,UAAU,kBAAkB,MAAMnH,YAAE,CAAC2C,eAAK3D,GAAEmI,UAAU,cAAc,MAAuD,IAAI/F,GAArDpC,GAAEgB,YAAE,CAAC4C,YAAE,uCAAuC5D,IAA0BoC,c,iCCA3vI,SAASiB,EAAEA,EAAErC,GAAG,OAAOA,EAAE,YAAYA,GAAGA,EAAE8L,QAAQC,KAAKC,IAAI3J,EAAE0J,KAAKE,IAAIjM,EAAE8L,UAAU,YAAY9L,GAAGA,EAAEkM,QAAQH,KAAKC,IAAI3J,EAAE0J,KAAKE,IAAIjM,EAAEkM,SAAS,IAAI7J,EAAEA,EAAoH,SAASiC,EAAEjC,EAAEiC,GAAG,MAAM,iBAAiBjC,EAAEA,EAAEA,GAAGA,EAAE8J,OAAO9J,EAAE8J,MAAMzL,OAAjL,SAAW2B,GAAe,IAAZ,IAAIrC,EAAE,EAAEsE,EAAE,EAAU5B,EAAE,EAAEA,EAAEL,EAAE3B,OAAOgC,IAAI,CAAC,IAAMD,EAAEJ,EAAEK,GAAGO,KAAK,iBAAiBR,IAAIzC,GAAGyC,EAAE6B,KAAK,OAAOtE,EAAEsE,EAAwEtE,CAAEqC,EAAE8J,OAAO7H,EAAE,SAAS5B,EAAEL,EAAErC,GAAG,IAAIA,EAAE,OAAOqC,EAAE,IAAMK,EAAE1C,EAAE2I,QAAQ,SAAAtG,GAAC,MAAE,SAASA,EAAEZ,QAAOX,KAAK,SAAAd,GAAG,IAAe0C,EAAa1C,EAArBoM,QAAkB3J,EAAGzC,EAAXqM,QAAa,OAAO/H,EAAE5B,EAAEL,GAAGiC,EAAE7B,EAAEJ,IAAI,KAASI,EAAE,EAAQE,EAAED,EAAEhC,OAAO,GAAG,IAAIiC,EAAE,OAAON,EAAE,IAAI,IAAIiC,EAAE,EAAEA,EAAE3B,EAAE2B,IAAI7B,GAAGC,EAAE4B,GAAG,IAAMO,EAAEkH,KAAKO,MAAM7J,EAAEE,GAAG,OAAOoJ,KAAKC,IAAInH,EAAExC,GAAG,SAASI,EAAEzC,GAAG,IAAMsE,EAAEtE,GAAGA,EAAEuM,SAAS9J,EAAE,WAAWzC,GAAGA,EAAEwM,OAAOxM,EAAEwM,MAAMC,aAAa,EAAE,EAAE,IAAInI,EAAE,OAAO7B,EAAE,IAAME,EAAE,oBAAoB2B,EAAE5B,EAAED,EAAE6B,EAAEoI,iBAAiBjK,EAAE,GAAG,WAAW6B,EAAE7C,KAAK,OAAOY,EAAEM,EAAE2B,EAAEf,QAAQ,GAAG,iBAAiBe,EAAE7C,KAAK,CAAC,IAAIzB,EAAE2C,EAAE,OAAO2B,EAAEqI,iBAAiB3K,SAAS,SAAAsC,GAAItE,EAAEqC,EAAErC,EAAEsE,EAAEf,WAAWvD,EAAE,GAAG,iBAAiBsE,EAAE7C,KAAK,CAAC,IAAIzB,EAAE2C,EAAE,OAAO2B,EAAEsI,gBAAgB5K,SAAS,SAAAsC,GAAItE,EAAEqC,EAAErC,EAAEsE,EAAEf,WAAWvD,EAAE,OAAOsE,EAAE7C,KAAKkB,EAJr+B,mC,iCCAA,gHAI+Q,SAASvC,EAAEiC,EAAEO,EAAExC,GAAU,IAAKqC,EAAbE,EAAQ,uDAAN,IAAID,IAAS,GAAG,OAAOtC,EAAEqB,KAAKgB,EAAEG,EAAExC,EAAEyM,gBAAgB,GAAG,OAAOzM,EAAEqB,KAAK,CAAC,IAAMiB,EAAEtC,EAAE0M,2BAA2BzK,GAAGM,EAAEvC,EAAE2M,wBAAwBtK,EAAEzC,YAAE2C,KAAKA,EAAEqK,OAAO5M,EAAEgC,kBAAkBkC,YAAE3B,GAAG2B,YAAElE,EAAEgC,kBAAkBQ,EAAEF,EAAQ,IAAAG,EAAER,EAAEwB,EAAEpB,EAAEkE,EAAEtE,EAAErB,EAAEyB,EAAEY,EAAEhB,EAAEwB,EAAEpB,EAAED,EAAEH,EAAErB,EAAEyB,EAAoBoC,EAAGzE,EAApBgC,iBAAsB,OAAOO,EAAEsK,KAAKlB,KAAKmB,IAAIrK,EAAEQ,GAAGV,EAAEwK,KAAKpB,KAAKmB,IAAIvG,EAAEnE,GAAGG,EAAEyK,KAAKrB,KAAKC,IAAInJ,EAAEQ,GAAGV,EAAE0K,KAAKtB,KAAKC,IAAIrF,EAAEnE,GAAGG,EAAEP,iBAAiByC,EAAElC,EAAE,SAASA,EAAE3C,EAAE0C,EAAE4B,GAAG,IAAM3B,EAAE2B,EAAEgJ,MAAMtN,GAAG,OAAGqC,YAAEM,IAAmBvC,EAAEuC,EAAEC,cAAI0B,EAAE7B,GAAG8K,WAAW7K,GAAG,IAAMD,EAAE,IAAIC,K,wQCAma6C,EAAE9C,IAAEgF,UAAU,6CAAiDxC,EAAC,kDAAiB,WAAYjF,GAAE,kCAAC,cAAMA,IAAQyD,MAAM,KAAK,EAAKvB,aAAY,EAAG,EAAKsL,YAAW,EAAG,EAAKC,WAAU,EAAG,EAAKC,UAAS,EAAG,EAAKlJ,OAAO,KAAK,EAAKmJ,OAAO,IAAIrJ,IAAEsJ,aAAa,EAAKC,sBAAsB,KAAK,EAAKC,4BAA4B,KAAK,EAAKC,gBAAgB,KAA/O,EAA/B,yCAAmR,SAAY/N,GAAG,SAASqC,YAAErC,EAAEsD,SAAS,SAASpD,KAAK2N,sBAAsB,KAAK3N,KAAK6N,gBAAgB/N,EAAEuD,OAAOrD,KAAKM,KAAK,UAAUR,GAAGE,KAAK8N,uBAAuBzI,EAAEiD,MAAM,uCAA1b,yBAA+d,WAAoB,IAAMxI,EAAE,kBAAkBE,KAAKwD,QAAQD,OAAOvD,KAAKwD,QAAQD,MAAMwK,cAAc5L,EAAEjB,YAAElB,KAAKwD,SAASf,EAAE3C,EAAEA,EAAEkO,OAAO,EAAE,OAAO,IAAI5I,IAAE,CAAC3D,KAAKU,EAAE6L,OAAOvL,MAA/nB,yBAAmoB,SAAkB3C,GAAGA,IAAIE,KAAKiO,KAAK,mBAAmBjO,KAAKM,KAAK,gBAAgBR,GAAGE,KAAKkO,uBAAuBlO,KAAK2N,sBAAsB,QAA7wB,+BAAmxB,WAAoB,OAAM,IAA7yB,oBAAgzB,SAAa7N,GAAGA,IAAIE,KAAKiO,KAAK,cAAcjO,KAAKM,KAAK,WAAWR,GAAGE,KAAKkO,0BAAz3B,oBAAi5B,SAAapO,GAAGA,IAAIE,KAAKiO,KAAK,cAAcjO,KAAKM,KAAK,WAAWR,GAAGE,KAAKkO,0BAA19B,oBAAk/B,SAAapO,GAAGA,IAAIE,KAAKiO,KAAK,cAAcjO,KAAKM,KAAK,WAAWR,GAAGE,KAAKkO,uBAAuBlO,KAAKyN,OAAOU,KAAK,iBAAiB,CAACC,OAAOtO,EAAE,SAAS,gBAAvoC,oBAAqpC,WAAe,OAAOE,KAAKiO,KAAK,aAAajO,KAAKiO,KAAK,cAA5sC,qBAAwtC,WAAUjO,KAAKqO,sBAAsBrO,KAAKsO,sBAAsBtO,KAAKM,KAAK,OAAO,QAAzyC,kCAA+yC,SAAqBR,GAAG,IAAMqC,EAAEnC,KAAKwD,QAAQ,IAAG,IAAKrB,EAAE7C,QAAQ,OAAO,KAAK,IAAMiD,EAAEJ,EAAEiB,SAAS,GAAGX,YAAEF,GAAG,OAAO,KAAK,IAAMC,EAAExC,KAAKiO,KAAK,iBAAiB3L,EAAEI,YAAEF,GAAGA,EAAEL,EAAEkB,OAAO,MAAM,OAAOrD,KAAKU,KAAKa,KAAKvB,KAAKuO,qBAAqBvO,KAAKU,KAAKZ,EAAEyC,EAAED,GAAGtC,KAAKwO,qBAAqBxO,KAAKU,KAAKZ,EAAEqC,KAAnkD,oBAAskD,WAASnC,KAAK8N,sBAAsBpL,YAAE1C,KAAKuD,QAAQvD,KAAKuD,MAAMtD,IAAID,KAAKwD,WAA7oD,oBAAspD,WAASxD,KAAKqO,sBAAsBrO,KAAKsO,sBAAsB5L,YAAE1C,KAAKuD,QAAQvD,KAAKuD,MAAMnC,OAAOpB,KAAKwD,WAA3vD,iCAAowD,WAAqB,WAACxD,KAAKqO,sBAAsBrO,KAAK4N,4BAA4B5N,KAAKwD,QAAQiL,MAAM,UAAU,SAAA3O,GAAI4C,YAAE5C,IAAIA,IAAI,EAAK2D,eAAe3D,IAAI,EAAK+N,kBAAkB,EAAKA,gBAAgB/N,EAAE,EAAK4O,UAAUhM,YAAE,EAAKe,iBAAiB,EAAKD,QAAQH,OAAO,EAAKI,mBAAkB,KAAzhE,iCAA6hE,WAAsBf,YAAE1C,KAAK4N,+BAA+B5N,KAAK4N,4BAA4BxM,SAASpB,KAAK4N,4BAA4B,QAApqE,kCAA0qE,WAAuB5N,KAAKwD,QAAQH,OAAOrD,KAAK0O,UAAUhM,YAAE1C,KAAKyD,eAAezD,KAAKyD,cAAczD,KAAK6N,kBAAlxE,iCAAkyE,WAAsB7N,KAAKwD,QAAQH,OAAOrD,KAAK6N,kBAAj1E,kCAAi2E,SAAqB/N,EAAEqC,EAAEI,EAAEC,GAAG,GAAGA,EAAEA,GAAGmC,YAAEpC,GAAGE,YAAED,GAAG,OAAO,KAAK,IAActC,EAAEF,KAAK2N,sBAAsB,GAAG,UAAUpL,EAAEhB,MAAM,kBAAkBiB,EAAEjB,KAAK,OAAOkD,YAAEtC,EAAEI,EAAEzC,GAA9F,EAAmG,KAAK,GAAG2C,YAAEvC,KAAKA,EAAEyO,cAAc7B,OAAOvK,GAAG,CAAC,IAAMJ,EAAEI,EAAEE,EAAE3C,EAAEoC,iBAAiB,GAAGpB,YAAEqB,EAAED,iBAAiBO,GAAG,CAAC,IAAM3C,EAAEwF,YAAEnD,EAAEM,GAAGvC,EAAE,CAACyO,cAAcxM,EAAEyM,QAAQC,SAAS/O,EAAEgP,SAAS3L,YAAEX,EAAEO,OAAO/C,KAAK2N,sBAAsBzN,GAAG,GAAGwC,YAAExC,GAAG,CAAC,IAAMuC,EAAE7C,YAAEuC,EAAE4B,GAAGrB,EAAE5C,EAAEiP,SAAS7O,EAAE2O,UAAUtM,EAAErC,EAAE4O,SAAS1K,EAAE1B,EAAEiB,EAAER,YAAEX,EAAEoJ,SAASnF,EAAE/D,EAAE5B,EAAEqC,YAAEX,EAAEwJ,SAAS,OAAO/K,YAAEwB,EAAE,CAAC2B,EAAEqC,IAAIlE,EAAEA,EAAva,EAA2a,KAAK,OAAO,OAA51F,kCAAi2F,SAAqBzC,EAAEqC,EAAEM,GAAG,IAAMC,EAAE5C,EAAEsN,MAAMjL,EAAE,CAAC6M,QAAQ,CAACvM,KAAK,OAAOC,GAAG5D,YAAE4D,EAAEiF,EAAE7H,EAAEmP,wBAAwB1J,YAAEoC,EAAE7H,EAAEsK,MAAM8E,OAAOC,KAAK,SAAh+F,GAAejP,KAAw9FJ,YAAE,CAAC0C,YAAE,CAAC6E,eAAc,EAAG+H,aAAY,KAAMrK,EAAEkC,UAAU,UAAU,MAAMnH,YAAE,CAAC0C,YAAE,CAAC4E,UAAS,KAAMrC,EAAEkC,UAAU,gBAAgB,MAAMnH,YAAE,CAAC0C,YAAE,CAAC6E,eAAc,EAAG+H,aAAY,KAAMrK,EAAEkC,UAAU,YAAO,GAAQnH,YAAE,CAAC0C,YAAE,CAAC0E,MAAM,QAAQnC,EAAEkC,UAAU,gBAAgB,MAAMnH,YAAE,CAAC0C,YAAE,CAAC6E,eAAc,KAAMtC,EAAEkC,UAAU,aAAQ,GAAQnH,YAAE,CAAC0C,eAAKuC,EAAEkC,UAAU,mBAAc,GAAQnH,YAAE,CAAC0C,eAAKuC,EAAEkC,UAAU,kBAAa,GAAQnH,YAAE,CAAC0C,eAAKuC,EAAEkC,UAAU,iBAAY,GAAQnH,YAAE,CAAC0C,YAAE,CAAC0E,OAAM,KAAMnC,EAAEkC,UAAU,WAAW,MAAMnH,YAAE,CAAC0C,eAAKuC,EAAEkC,UAAU,gBAAW,GAAQnH,YAAE,CAAC0C,eAAKuC,EAAEkC,UAAU,WAAW,MAAMnH,YAAE,CAAC0C,YAAE,CAAC0E,OAAM,KAAMnC,EAAEkC,UAAU,WAAW,MAAMnH,YAAE,CAAC0C,eAAKuC,EAAEkC,UAAU,cAAS,GAAQlC,EAAEjF,YAAE,CAACwC,YAAE,8CAA8CyC,GAAG,IAAM4C,EAAEhF,cAAIoB,EAAE0C,e,gQCA7yHvF,EAAC,kDAAuC,WAAYwB,GAAE,kCAAC,cAAMA,IAAQ2M,mBAAmB,GAAG,EAAKC,gBAAW,EAAO,EAAKC,qBAAqB,aAAa,EAAKrN,sBAAiB,EAAO,EAAKX,KAAK,QAAQ,EAAKiO,mBAAmB,EAAKA,mBAAmB3E,KAAxB,gBAA1K,EAArD,8CAAkQ,WAAa7K,KAAKyP,mBAAmBzP,KAAK0P,eAAe1P,KAAKV,SAASU,KAAKyO,MAAM,UAAUzO,KAAK2P,gBAAgB9E,KAAK7K,OAAM,KAA9X,0BAAkY,SAAa0C,EAAEP,EAAEI,EAAEC,GAAG,IAAMC,EAAE,GAAG,IAAIC,EAAE,OAAOD,EAAEC,EAAEZ,SAAS,SAAAY,GAAI,IAAMP,EAAEjC,YAAEwC,EAAEF,EAAEoN,OAAOpN,EAAEoN,OAAOC,6BAA6BnN,GAAG,KAAKF,GAAG1C,YAAEqC,IAAIA,EAAE2N,WAAWrN,EAAEyB,KAAK/B,MAAMA,EAAE/C,OAAOqD,IAAhjB,sBAAkjB,SAAeC,GAAG1C,KAAKM,KAAK,aAAaoC,KAA3lB,0BAA8lB,SAAmBA,GAAG,IAAM5C,EAAEE,KAAKiO,KAAK,oBAAoBvL,EAAE1C,KAAKM,KAAK,iBAAiBoC,GAAG5C,GAAGE,KAAKyP,mBAAmB/M,EAAE1C,KAAKV,WAA5tB,kBAAquB,SAAKoD,GAAG,OAAO1C,KAAK+P,oBAAoB/P,KAAKgQ,eAAe,CAACC,eAAe,CAAC,kBAAkB,qBAAqB,kBAAkBvN,IAAIwN,QAAQC,QAAQnQ,QAA/3B,qBAAq4B,WAAS,WAAC,OAAOsC,YAAEtC,MAAM,SAAA0C,GAAIA,EAAE,EAAKtD,aAAz6B,wBAAo7B,SAAWsD,GAAGA,EAAEpD,SAAS,cAAcU,KAAK0P,eAAe1P,KAAKoQ,oBAAoB1N,GAAG,cAAc1C,KAAK0P,iBAAiBhN,EAAEpD,QAAQU,KAAKV,SAASU,KAAKqP,mBAAmB3M,EAAE2N,KAAK3N,EAAE+L,MAAM,UAAUzO,KAAKwP,oBAAmB,KAAhpC,0BAAopC,SAAa9M,GAAG,IAAM5C,EAAEE,KAAKqP,mBAAmB3M,EAAE2N,KAAKvQ,IAAIA,EAAEsB,gBAAgBpB,KAAKqP,mBAAmB3M,EAAE2N,MAAMrQ,KAAKyP,mBAAmBzP,KAAK0P,eAAe1P,KAAKV,WAAlzC,iCAA2zC,SAAoBoD,GAAG1C,KAAKZ,OAAO0C,SAAS,SAAAhC,GAAIA,IAAI4C,IAAI5C,EAAER,SAAQ,QAA73C,gCAAo4C,SAAmBoD,EAAE5C,GAAG,GAAIqC,YAAEnC,MAAMsQ,YAAZ,CAA+B,IAAM/N,EAAEvC,KAAKZ,OAAWoD,EAAED,EAAEgO,MAAM,SAAA7N,GAAC,OAAEA,EAAEpD,WAAU,OAAOoD,GAAG,IAAI,YAAYH,EAAE/B,SAASgC,KAAIA,EAAED,EAAEiO,UAAU,IAAKlR,SAAQ,GAAIU,KAAKoQ,oBAAoB5N,GAAG,MAAM,IAAI,YAAYD,EAAET,SAAS,SAAAY,GAAIA,EAAEpD,QAAQQ,SAA/nD,6BAAqoD,SAAgB4C,GAAG,cAAc1C,KAAK0P,gBAAgB1P,KAAKZ,OAAO0C,SAAS,SAAAhC,GAAIA,EAAER,QAAQoD,OAA9tD,gCAAmuD,SAAmBA,EAAE5C,EAAEqC,EAAEI,GAAG,IAAMC,EAAED,EAAE,OAAOvC,KAAK0P,gBAAgB,IAAI,YAAYhN,EAAE1C,KAAKoQ,oBAAoB5N,GAAGxC,KAAKyQ,uBAAuBjO,EAAElD,SAAQ,GAAI,MAAM,IAAI,YAAYkD,EAAElD,QAAQU,KAAKV,WAAl6D,gCAA26D,WAAqB,OAAOU,KAAKZ,OAAOsR,MAAM,SAAAhO,GAAC,OAAEA,EAAEpD,eAA99D,GAAeR,YAAEyG,YAAE3F,YAAE+C,YAAE7B,YAAEsD,YAAEjB,YAAEsD,YAA68D/D,YAAE,CAACH,eAAKrB,EAAE+F,UAAU,kBAAa,GAAQvE,YAAE,CAACH,YAAE,CAACoO,KAAK,CAACC,MAAK,EAAGC,MAAM,CAACC,cAAa,OAAQ5P,EAAE+F,UAAU,cAAS,GAAQvE,YAAE,CAACD,YAAE,WAAWvB,EAAE+F,UAAU,eAAe,MAAMvE,YAAE,CAACH,YAAE,CAAChB,KAAK,CAAC,iBAAiBL,EAAE+F,UAAU,4BAAuB,GAAQvE,YAAE,CAACH,YAAE,CAACoO,KAAK,CAACI,QAAQ,CAAC,eAAe,CAACH,MAAK,EAAGC,OAAM,QAAS3P,EAAE+F,UAAU,aAAa,MAAMvE,YAAE,CAACH,eAAKrB,EAAE+F,UAAU,wBAAmB,GAAQvE,YAAE,CAACH,YAAE,CAACoO,KAAK,CAACC,MAAK,GAAIxJ,UAAS,EAAGF,MAAM,WAAWhG,EAAE+F,UAAU,YAAO,GAAQvE,YAAE,CAACH,YAAE,CAAChB,KAAK,CAAC,cAAc,YAAY,aAAa2F,MAAM,cAAcyJ,KAAK,CAACE,OAAM,EAAGE,QAAQ,CAAC,UAAU,CAACH,MAAK,EAAGC,OAAM,QAAS3P,EAAE+F,UAAU,iBAAiB,MAA2C,IAAI7B,EAAzClE,EAAEwB,YAAE,CAACF,YAAE,2BAA2BtB,GAA0BkE,a,iPCA7kGqB,EAAC,kDAAiB,WAAYtE,GAAE,kCAAC,cAAMA,IAAQsF,KAAK,KAAK,EAAKuJ,aAAa,IAAItO,IAAE,EAAKuO,6BAA4B,EAAG,EAAKC,yBAAyB,KAAK/O,GAAG,MAAMA,EAAE7C,UAAU,EAAKA,QAAQ6C,EAAE7C,SAA5J,EAA/B,8CAAoM,WAAY,WAACU,KAAKgR,aAAa/Q,IAAIqC,YAAEtC,KAAK,CAAC,aAAa,gBAAgB,WAAK,EAAKU,MAAM,EAAKA,KAAKyQ,QAAQ,EAAKhH,YAAY,EAAK8G,8BAA8B,EAAKG,sBAAsB,EAAKH,6BAA4B,GAAI,EAAKA,6BAA4B,QAAnc,qBAA0c,WAAUjR,KAAKmI,aAAanI,KAAKU,KAAK,KAAKV,KAAKgR,aAAa3Q,UAAUL,KAAKgR,aAAa,OAAniB,uBAAwiB,WAAkB,OAAOhR,KAAKU,MAAMV,KAAKU,KAAKa,OAAOvB,KAAKwH,oBAAlmB,gBAAonB,WAAW,OAAOxH,KAAKiO,KAAK,SAAhpB,IAAwpB,SAAS9L,GAAE,WAAC,GAAGA,IAAInC,KAAKU,KAAZ,CAAwBV,KAAKmI,aAAanI,KAAKM,KAAK,OAAO6B,GAAG,IAAMM,EAAE,QAAQzC,KAAKgR,aAAa5P,OAAOqB,GAAGN,GAAGnC,KAAKgR,aAAa/Q,IAAIkC,EAAEkP,MAAM3P,GAAG,UAAU,SAAAS,GAAI,GAAG,EAAKsF,KAAR,qBAA4BtF,EAAEmP,SAA9B,IAAa,gCAAU7O,EAAV,QAAyB,GAAG,EAAKgF,OAAOhF,EAAE,CAACA,EAAE8O,WAAW9O,EAAEpC,UAAU,EAAKC,KAAK,OAAO,MAAM,QAAxG,mCAAkHmC,MAAl7B,mBAAq7B,SAAYN,GAAGnC,KAAKM,KAAK,UAAU6B,GAAGnC,KAAKyH,OAAOzH,KAAKyH,KAAKnI,QAAQ6C,IAAIA,GAAGnC,KAAKkR,2BAA2BlR,KAAKkR,yBAAyBM,QAAQxR,KAAKkR,yBAAyB,QAApmC,kBAA0mC,WAAa,OAAO,MAAMlR,KAAKkR,0BAA0B,MAAMlR,KAAKyH,MAAMzH,KAAKyH,KAAKG,SAA9rC,sBAAqsC,WAAiB,OAAO5H,KAAKU,OAAOV,KAAKU,KAAKyQ,QAAQnR,KAAKmK,cAAhwC,wBAA4wC,WAAmB,QAAQnK,KAAKkR,2BAA5yC,+DAAq0C,6CAAAhR,EAAA,yDAAsBF,KAAKmI,aAAcnI,KAAKmK,YAA9C,yCAAiE+F,QAAQuB,OAAO,IAAIjP,IAAE,cAAc,wCAApG,cAAiJL,EAAEnC,KAAK0R,mBAAmBjP,EAAE,WAAK,IAAMA,EAAE2B,YAAEjC,EAAEkG,sBAAsB,oBAAO/I,QAAQ,EAAKA,SAAWmD,IAAI3C,EAAE,IAAI6R,gBAAgBpP,EAAEzC,EAAE8R,OAAO5R,KAAKkR,yBAAyBpR,EAAQ4C,EAAE,WAAK5C,IAAI,EAAKoR,2BAA2B,EAAKA,yBAAyB,OAAvY,kBAAgalR,KAAKU,KAAKwH,WAAW/F,EAAEiG,gBAAgB3F,EAAE,CAACmP,OAAOrP,IAAjd,OAAwZzC,EAAxZ,OAAqdE,KAAKM,KAAK,OAAOR,GAAG4C,IAAze,wDAA4fA,IAAC,KAA7f,0DAAr0C,8EAAw0D,WAAa1C,KAAKkR,0BAA0BlR,KAAKkR,yBAAyBM,QAAQxR,KAAKkR,yBAAyB,KAAK,IAAM/O,EAAEnC,KAAKyH,KAAKtF,IAAInC,KAAKU,MAAMV,KAAKU,KAAK2Q,OAAOrR,KAAKU,KAAK2Q,MAAMjQ,OAAOe,GAAGA,EAAEoP,WAAWpP,EAAE9B,UAAUL,KAAKM,KAAK,OAAO,WAAnjE,GAAeiC,KAA6iEJ,YAAE,CAACM,YAAE,CAAC4E,eAAc,KAAMZ,EAAEQ,UAAU,YAAO,GAAQ9E,YAAE,CAACM,eAAKgE,EAAEQ,UAAU,cAAc,MAAM9E,YAAE,CAACM,YAAE,CAACyE,MAAM,QAAQT,EAAEQ,UAAU,OAAO,MAAM9E,YAAE,CAACM,YAAE,CAAClB,KAAKsQ,QAAQ3K,OAAM,KAAMT,EAAEQ,UAAU,UAAU,MAAM9E,YAAE,CAACM,eAAKgE,EAAEQ,UAAU,SAAS,MAAM9E,YAAE,CAACM,eAAKgE,EAAEQ,UAAU,aAAa,MAAM9E,YAAE,CAACM,eAAKgE,EAAEQ,UAAU,gCAA2B,GAAQ9E,YAAE,CAACM,YAAE,CAAC2E,UAAS,KAAMX,EAAEQ,UAAU,eAAe,MAAMR,EAAEtE,YAAE,CAACrC,YAAE,kDAAkD2G","file":"static/js/60.7622d9d8.chunk.js","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../chunks/tslib.es6.js\";import\"../../core/has.js\";import\"../../core/Logger.js\";import\"../../core/accessorSupport/ensureType.js\";import{property as t}from\"../../core/accessorSupport/decorators/property.js\";import{subclass as s}from\"../../core/accessorSupport/decorators/subclass.js\";import\"../../core/urlUtils.js\";import\"../../core/uuid.js\";import\"../../portal/support/resourceExtension.js\";import r from\"../../geometry/SpatialReference.js\";import i from\"../../geometry/Point.js\";import o from\"../../geometry/Polyline.js\";import\"../../geometry.js\";import{onLocaleChange as a}from\"../../intl/locale.js\";import n from\"../../symbols/CIMSymbol.js\";import l from\"../../symbols/Font.js\";import{fetchMessageBundle as h}from\"../../intl/messages.js\";import\"../../intl.js\";import m from\"../../symbols/SimpleMarkerSymbol.js\";import p from\"../../symbols/TextSymbol.js\";import\"../../symbols.js\";import c from\"../../Graphic.js\";import d from\"../../core/Handles.js\";import{convertUnit as u}from\"../../core/unitUtils.js\";import{init as y}from\"../../core/watchUtils.js\";import{isLoaded as _,load as v,project as f,isSupported as w}from\"../../geometry/projection.js\";import{formatDecimal as g,formatImperialLength as j,formatMetricLength as b}from\"../../core/unitFormatUtils.js\";import{isSupported as S,geodesicLengths as L,geodesicDensify as x}from\"../../geometry/support/geodesicUtils.js\";import{geodesicLength as A,geodesicDensify as C,planarLength as M}from\"../../geometry/geometryEngine.js\";import D from\"../../layers/GraphicsLayer.js\";import I from\"../../layers/GroupLayer.js\";import{createManipulatorDragEventPipeline as k,screenToMap as G,dragGraphic as R}from\"../../views/interactive/dragEventPipeline.js\";import{InteractiveToolBase as E}from\"../../views/interactive/InteractiveToolBase.js\";import P from\"../../views/draw/Draw.js\";import{GraphicManipulator as T}from\"../../views/interactive/GraphicManipulator.js\";const W=1e5;let U=class extends E{constructor(){super(...arguments),this._drawActive=!1,this._handles=new d,this._polylineLayer=new D,this._manipulatorLayer=new D,this._groupLayer=new I({layers:[this._polylineLayer,this._manipulatorLayer],listMode:\"hide\",visible:!1}),this._vertices=[],this.deferCreation=!0,this.geodesicDistanceThreshold=1e5,this.measurement=null,this.measurementLabel=null}initialize(){h(\"esri/core/t9n/Units\").then((e=>{this.messages=e})),this._handles.add(a((async()=>{this.messages=await h(\"esri/core/t9n/Units\")})))}destroy(){this.detach(),this._draw&&(this._draw.destroy(),this._draw=null),this._handles&&(this._handles.destroy(),this._handles=null),this._polylineLayer&&(this._polylineLayer.destroy(),this._polylineLayer=null),this._manipulatorLayer&&(this._manipulatorLayer.destroy(),this._manipulatorLayer=null)}set editable(e){this._set(\"editable\",e),e||this._draw.reset()}activate(){this._drawActive||0!==this._vertices.length||this._startSketch()}onAttach(){const e=this.view;this._draw=new P({view:e}),e.map.add(this._groupLayer),e.focus(),this._handles.add([y(this,[\"unit\",\"geodesicDistanceThreshold\",\"palette\",\"messages\"],(()=>{this._vertices.length>0&&this._updatePolylines()})),y(this,\"view.spatialReference\",(e=>{O(e)&&!_()&&v()}))]),this.create()}onDetach(){const{map:e}=this.view;this._draw.view=null,this._draw.destroy(),this._draw=null,e.remove(this._groupLayer),this._handles.removeAll(),this._polylineLayer.removeAll(),this._manipulatorLayer.removeAll(),this._set(\"measurement\",null),this._set(\"measurementLabel\",null)}onShow(){this._groupLayer.visible=!0}onHide(){this._groupLayer.visible=!1}reset(){this._vertices=[],this._polylineLayer.removeAll(),this._set(\"measurement\",null),this._set(\"measurementLabel\",null),this._draw.reset(),this._drawActive=!1,this._updateSketch([])}onInputEvent(e){\"pointer-move\"===e.type&&this._updateCursor()}_startSketch(){this._drawActive=!0;const e=this._draw.create(\"polyline\",{mode:\"click\"});e.on([\"vertex-add\",\"vertex-update\",\"vertex-remove\",\"cursor-update\",\"undo\",\"redo\"],(e=>this._updateSketch(e.vertices))),e.on(\"draw-complete\",(()=>{this._stopSketch()}))}_stopSketch(){this.manipulators.forEach((e=>{e.manipulator.interactive=!0})),this._drawActive=!1,this.complete()}_updateSketch(e){if(O(this.view.spatialReference)&&!_())return;if(e.length<2)return this._vertices=[],this.manipulators.removeAll(),void this._polylineLayer.removeAll();this.create();const{spatialReference:t}=this.view;for(;this._vertices.length>e.length;){const{manipulatorId:e}=this._vertices.pop();this.manipulators.remove(e)}for(let l=this._vertices.length;l<e.length;l++){const[s,r]=e[l],o=z(new i({x:s,y:r,spatialReference:t}),this.view,this._manipulatorLayer,this.palette),a=this.manipulators.add(o);k(o,((e,t)=>{t.next(G(this.view)).next(R(e.graphic)).next((()=>{const t=e.graphic.geometry;this._vertices[l].coord=[t.x,t.y],this._updatePolylines()}))})),this._vertices.push({manipulatorId:a,coord:[s,r]})}const s=this._vertices.length-1,r=this._vertices[s],[o,a]=e[s];if(r.coord[0]!==o||r.coord[1]!==a){r.coord=[o,a];const e=new i({x:o,y:a,spatialReference:t});this.manipulators.findById(r.manipulatorId).graphic.geometry=e}const n=this._drawActive?this._vertices[s].manipulatorId:null;this.manipulators.forEach((e=>{e.manipulator.interactive=null==n||e.id!==n})),this._updatePolylines()}_updateCursor(){this.cursor=this._drawActive?\"crosshair\":null}_updatePolylines(){const e=this._vertices.map((e=>e.coord)),{measurement:t,drawing:s,original:r}=B(e,this.view.spatialReference,this.geodesicDistanceThreshold);this._set(\"measurement\",t);const i=H(this.messages,t,this.unit);this._set(\"measurementLabel\",i);const{pathPrimaryColor:o,pathSecondaryColor:a,pathWidth:h}=this.palette;this._polylineLayer.removeAll(),this._polylineLayer.addMany([new c({geometry:s,symbol:new n({data:{type:\"CIMSymbolReference\",symbol:{type:\"CIMLineSymbol\",symbolLayers:[{type:\"CIMSolidStroke\",effects:[{type:\"CIMGeometricEffectDashes\",dashTemplate:[14,12],lineDashEnding:\"FullGap\",controlPointEnding:\"NoConstraint\"}],enable:!0,capStyle:\"Butt\",joinStyle:\"Round\",width:h-1.5,color:a},{type:\"CIMSolidStroke\",enable:!0,capStyle:\"Butt\",joinStyle:\"Round\",width:h,color:o}]}}})}),new c({geometry:r.extent.center,symbol:new p({color:[255,255,255,1],haloColor:[0,0,0,.5],haloSize:2,font:new l({size:14,family:\"sans-serif\"}),text:i})})])}};function z(e,t,s,r){const i=new m({style:\"circle\",color:r.handleColor,size:r.handleWidth,outline:{type:\"simple-line\",width:0}}),o=new m({style:\"circle\",color:r.handleColor,size:1.5*r.handleWidth,outline:{type:\"simple-line\",width:0}}),a=new c({geometry:e,symbol:i});return new T({view:t,layer:s,graphic:a,focusedSymbol:o})}function B(e,t,s){const i=new o({paths:[e],spatialReference:t});let a,n;if(t.isGeographic)if(S(t))a=L([i],\"meters\")[0],n=x(i,W);else{const e=f(i,r.WGS84),s=x(e,W);a=L([e],\"meters\")[0],n=f(s,t)}else if(t.isWebMercator)a=A(i,\"meters\"),n=C(i,W,\"meters\");else{const e=M(i,\"meters\");if(e>=s){const e=f(i,r.WGS84),s=x(e,W);a=L([e],\"meters\")[0],n=f(s,t)}else a=e,n=i}return{measurement:{geometry:n,length:a},original:i,drawing:n}}function F(e){return null!=e&&(!O(e)||w())}function O(e){if(!e)return!1;const{isGeographic:t,isWebMercator:s,isWGS84:r}=e;return t&&!r&&!S(e)||!t&&!s}function H(e,t,s){if(!t||!e)return null;switch(s){case\"metric\":return b(e,t.length,\"meters\");case\"imperial\":return j(e,t.length,\"meters\");default:return g(e,u(t.length,\"meters\",s),s)}}e([t()],U.prototype,\"cursor\",void 0),e([t({value:!0})],U.prototype,\"editable\",null),e([t({type:Number})],U.prototype,\"geodesicDistanceThreshold\",void 0),e([t({readOnly:!0})],U.prototype,\"measurement\",void 0),e([t({readOnly:!0})],U.prototype,\"measurementLabel\",void 0),e([t()],U.prototype,\"messages\",void 0),e([t()],U.prototype,\"palette\",void 0),e([t()],U.prototype,\"unit\",void 0),e([t({constructOnly:!0})],U.prototype,\"view\",void 0),U=e([s(\"esri.widgets.DistanceMeasurement2D.DistanceMeasurement2DTool\")],U);var N=U;export default N;export{B as createDistanceMeasurementInfo2D,H as createDistanceMeasurementLabel,F as isSupported};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{_ as t}from\"../../chunks/tslib.es6.js\";import\"../../core/has.js\";import e from\"../../core/Logger.js\";import\"../../core/accessorSupport/ensureType.js\";import{property as r}from\"../../core/accessorSupport/decorators/property.js\";import{subclass as o}from\"../../core/accessorSupport/decorators/subclass.js\";import\"../../core/urlUtils.js\";import\"../../core/uuid.js\";import\"../../portal/support/resourceExtension.js\";import i from\"../../core/Handles.js\";import{measurementLengthUnits as s}from\"../../core/unitUtils.js\";import{init as n}from\"../../core/watchUtils.js\";import{defaultUnitPropertyMetadata as a}from\"../support/commonProperties.js\";import{InteractiveToolViewModel as l}from\"../support/InteractiveToolViewModel.js\";import p,{isSupported as d}from\"./DistanceMeasurement2DTool.js\";const u={handleWidth:8,handleColor:[255,128,0,.5],pathWidth:5,pathPrimaryColor:[255,128,0,255],pathSecondaryColor:[255,255,255,255]},h=e.getLogger(\"esri.widgets.DistanceMeasurement2D.DistanceMeasurement2DViewModel\");let c=class extends l{constructor(t){super(t),this.supportedViewType=\"2d\",this._handles=new i,this.geodesicDistanceThreshold=1e5,this.measurement=null,this.measurementLabel=null,this.palette=u,this.tool=null}initialize(){this._handles.add([n(this,[\"unit\",\"palette\",\"geodesicDistanceThreshold\"],((t,e,r)=>{this.tool&&(this.tool[r]=t)}))])}destroy(){this._handles&&(this._handles.destroy(),this._handles=null)}get state(){var t;return this.isDisabled?\"disabled\":d(null==(t=this.view)?void 0:t.spatialReference)?this.tool&&this.measurement?this.tool.active?\"measuring\":\"measured\":\"ready\":\"disabled\"}get unit(){return this._validateUnit(this.defaultUnit)}set unit(t){void 0!==t?this._override(\"unit\",this._validateUnit(t)):this._clearOverride(\"unit\")}get unitOptions(){return s}set unitOptions(t){void 0!==t?this._override(\"unitOptions\",this._validateUnits(t)):this._clearOverride(\"unitOptions\")}start(){return this.createTool()}clear(){this.removeTool()}createToolParams(){return{toolConstructor:p,constructorArguments:()=>({geodesicDistanceThreshold:this.geodesicDistanceThreshold,palette:this.palette,unit:this.unit})}}logUnsupportedError(){h.error(\"DistanceMeasurement2D widget is not implemented for SceneView\")}logError(...t){h.error(...t)}_validateUnit(t){return-1!==this.unitOptions.indexOf(t)?t:-1!==this.unitOptions.indexOf(this.defaultUnit)?this.defaultUnit:this.unitOptions[0]}_validateUnits(t=[]){const e=t.filter((t=>-1!==s.indexOf(t)));return 0===e.length?s.slice():e}};t([r(a)],c.prototype,\"defaultUnit\",void 0),t([r({type:Number})],c.prototype,\"geodesicDistanceThreshold\",void 0),t([r({readOnly:!0,aliasOf:\"tool.measurement\"})],c.prototype,\"measurement\",void 0),t([r({readOnly:!0,aliasOf:\"tool.measurementLabel\"})],c.prototype,\"measurementLabel\",void 0),t([r()],c.prototype,\"palette\",void 0),t([r({readOnly:!0})],c.prototype,\"state\",null),t([r({constructOnly:!0,readOnly:!0})],c.prototype,\"tool\",void 0),t([r({type:String})],c.prototype,\"unit\",null),t([r({type:[String]})],c.prototype,\"unitOptions\",null),c=t([o(\"esri.widgets.DistanceMeasurement2D.DistanceMeasurement2DViewModel\")],c);var m=c;export default m;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../chunks/tslib.es6.js\";import\"../core/has.js\";import\"../core/Logger.js\";import\"../core/accessorSupport/ensureType.js\";import{property as t}from\"../core/accessorSupport/decorators/property.js\";import{aliasOf as s}from\"../core/accessorSupport/decorators/aliasOf.js\";import{subclass as i}from\"../core/accessorSupport/decorators/subclass.js\";import\"../core/urlUtils.js\";import\"../core/uuid.js\";import\"../portal/support/resourceExtension.js\";import{ignoreAbortErrors as n}from\"../core/promiseUtils.js\";import{isMeasurementSystem as r}from\"../core/unitUtils.js\";import\"./support/widgetUtils.js\";import{accessibleHandler as o}from\"./support/decorators/accessibleHandler.js\";import{messageBundle as a}from\"./support/decorators/messageBundle.js\";import{j as l}from\"../chunks/index.js\";import u from\"./Widget.js\";import m from\"./DistanceMeasurement2D/DistanceMeasurement2DViewModel.js\";const c=\"esri-distance-measurement-2d\",p={buttonDisabled:\"esri-button--disabled\",widgetIcon:\"esri-icon-measure-line\",base:`${c} esri-widget esri-widget--panel`,container:`${c}__container`,hint:`${c}__hint`,hintText:`${c}__hint-text`,panelError:`${c}__panel--error`,measurement:`${c}__measurement`,measurementItem:`${c}__measurement-item`,measurementItemDisabled:`${c}__measurement-item--disabled`,measurementItemTitle:`${c}__measurement-item-title`,measurementItemValue:`${c}__measurement-item-value`,settings:`${c}__settings`,units:`${c}__units`,unitsLabel:`${c}__units-label`,unitsSelect:`${c}__units-select esri-select`,unitsSelectWrapper:`${c}__units-select-wrapper`,actionSection:`${c}__actions`,newMeasurementButton:`${c}__clear-button esri-button esri-button--primary`};let d=class extends u{constructor(e,t){super(e,t),this.iconClass=p.widgetIcon,this.label=void 0,this.messages=null,this.messagesUnits=null,this.unit=null,this.unitOptions=null,this.view=null,this.viewModel=new m}render(){const{id:e,messages:t,messagesUnits:s,viewModel:i,visible:n}=this,{active:o,isSupported:a,measurementLabel:u,state:m,unit:c,unitOptions:d}=i,v=\"disabled\"===m,b=\"measuring\"===m||\"measured\"===m,_=o&&\"ready\"===m?l(\"section\",{key:\"hint\",class:p.hint},l(\"p\",{class:p.hintText},t.hint)):null,h=a?null:l(\"section\",{key:\"unsupported\",class:p.panelError},l(\"p\",null,t.unsupported)),w=(e,t,s)=>t?l(\"div\",{key:`${s}-enabled`,class:p.measurementItem},l(\"span\",{class:p.measurementItemTitle},e),l(\"span\",{class:p.measurementItemValue},t)):l(\"div\",{key:`${s}-disabled`,class:this.classes(p.measurementItem,p.measurementItemDisabled),\"aria-disabled\":\"true\"},l(\"span\",{class:p.measurementItemTitle},e)),g=b?l(\"section\",{key:\"measurement\",class:p.measurement},w(t.distance,u,\"distance\")):null,y=`${e}-units`,M=b?l(\"section\",{key:\"units\",class:p.units},l(\"label\",{class:p.unitsLabel,for:y},t.unit),l(\"div\",{class:p.unitsSelectWrapper},l(\"select\",{class:p.unitsSelect,id:y,onchange:this._changeUnit,bind:this,value:c},d.map((e=>{var t;return l(\"option\",{key:e,value:e},r(e)?s.systems[e]:null==(t=s.units[e])?void 0:t.pluralCapitalized)}))))):null,$=b?l(\"div\",{key:\"settings\",class:p.settings},M):null,j=!a||o&&!b?null:l(\"div\",{class:p.actionSection},l(\"button\",{disabled:v,class:this.classes(p.newMeasurementButton,v&&p.buttonDisabled),bind:this,onclick:this._newMeasurement,title:t.newMeasurement,\"aria-label\":t.newMeasurement,type:\"button\"},t.newMeasurement)),f=n?l(\"div\",{class:p.container},h,_,$,g,j):null;return l(\"div\",{class:p.base},f)}_newMeasurement(){n(this.viewModel.start())}_changeUnit(e){const t=e.target,s=t.options[t.selectedIndex];s&&(this.viewModel.unit=s.value)}};e([s(\"viewModel.active\")],d.prototype,\"active\",void 0),e([t()],d.prototype,\"iconClass\",void 0),e([t({aliasOf:{source:\"messages.widgetLabel\",overridable:!0}})],d.prototype,\"label\",void 0),e([t(),a(\"esri/widgets/DistanceMeasurement2D/t9n/DistanceMeasurement2D\")],d.prototype,\"messages\",void 0),e([t(),a(\"esri/core/t9n/Units\")],d.prototype,\"messagesUnits\",void 0),e([s(\"viewModel.unit\")],d.prototype,\"unit\",void 0),e([s(\"viewModel.unitOptions\")],d.prototype,\"unitOptions\",void 0),e([s(\"viewModel.view\")],d.prototype,\"view\",void 0),e([t({type:m})],d.prototype,\"viewModel\",void 0),e([s(\"viewModel.visible\")],d.prototype,\"visible\",void 0),e([o()],d.prototype,\"_newMeasurement\",null),e([o()],d.prototype,\"_changeUnit\",null),d=e([i(\"esri.widgets.DistanceMeasurement2D\")],d);var v=d;export default v;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nfunction t(t,e){return e?\"xoffset\"in e&&e.xoffset?Math.max(t,Math.abs(e.xoffset)):\"yoffset\"in e&&e.yoffset?Math.max(t,Math.abs(e.yoffset||0)):t:t}function e(t){let e=0,n=0;for(let r=0;r<t.length;r++){const s=t[r].size;\"number\"==typeof s&&(e+=s,n++)}return e/n}function n(t,n){return\"number\"==typeof t?t:t&&t.stops&&t.stops.length?e(t.stops):n}function r(t,e){if(!e)return t;const r=e.filter((t=>\"size\"===t.type)).map((e=>{const{maxSize:r,minSize:s}=e;return(n(r,t)+n(s,t))/2}));let s=0;const o=r.length;if(0===o)return t;for(let n=0;n<o;n++)s+=r[n];const f=Math.floor(s/o);return Math.max(f,t)}function s(e){const n=e&&e.renderer,s=\"touch\"===(e&&e.event&&e.event.pointerType)?9:6;if(!n)return s;const o=\"visualVariables\"in n?r(s,n.visualVariables):s;if(\"simple\"===n.type)return t(o,n.symbol);if(\"unique-value\"===n.type){let e=o;return n.uniqueValueInfos.forEach((n=>{e=t(e,n.symbol)})),e}if(\"class-breaks\"===n.type){let e=o;return n.classBreakInfos.forEach((n=>{e=t(e,n.symbol)})),e}return n.type,o}export{s as calculateTolerance};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{isSome as e,isNone as t}from\"../../core/maybe.js\";import r from\"../../geometry/Extent.js\";import\"../../geometry.js\";import{getMetersPerUnitForSR as n}from\"../../core/unitUtils.js\";import{calculateTolerance as i}from\"../../renderers/support/clickToleranceUtils.js\";function a(t,i,a,o=new r){let s;if(\"2d\"===a.type)s=i*a.resolution;else if(\"3d\"===a.type){const r=a.overlayPixelSizeInMapUnits(t),o=a.basemapSpatialReference;s=e(o)&&!o.equals(a.spatialReference)?n(o)/n(a.spatialReference):i*r}const m=t.x-s,p=t.y-s,c=t.x+s,l=t.y+s,{spatialReference:f}=a;return o.xmin=Math.min(m,c),o.ymin=Math.min(p,l),o.xmax=Math.max(m,c),o.ymax=Math.max(p,l),o.spatialReference=f,o}function o(e,r,n){const o=n.toMap(e);if(t(o))return!1;return a(o,i(),n,s).intersects(r)}const s=new r;export{a as createQueryGeometry,o as intersectsDrapedGeometry};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../chunks/tslib.es6.js\";import\"../../core/has.js\";import{get as t,isNone as o,isSome as i}from\"../../core/maybe.js\";import s from\"../../core/Logger.js\";import\"../../core/accessorSupport/ensureType.js\";import{property as r}from\"../../core/accessorSupport/decorators/property.js\";import{subclass as l}from\"../../core/accessorSupport/decorators/subclass.js\";import\"../../core/urlUtils.js\";import\"../../core/uuid.js\";import\"../../portal/support/resourceExtension.js\";import a from\"../../core/Accessor.js\";import n from\"../../core/Evented.js\";import{pt2px as c,screenPointObjectToArray as h,createScreenPointArray as p}from\"../../core/screenUtils.js\";import{c as m}from\"../../chunks/vec3f64.js\";import{k as u}from\"../../chunks/vec3.js\";import{canProjectWithoutEngine as y,project as g,projectPointToVector as d}from\"../../geometry/projection.js\";import b from\"../../symbols/support/ElevationInfo.js\";import{getDefaultSymbol2D as f}from\"../../symbols/support/defaults.js\";import{j as _}from\"../../chunks/vec2.js\";import{getGraphicEffectiveElevationMode as v}from\"../../support/elevationInfoUtils.js\";import{intersectsDrapedGeometry as S}from\"../support/drapedUtils.js\";const j=s.getLogger(\"esri.views.interactive.GraphicManipulator\");let C=class extends a{constructor(e){super(e),this.layer=null,this.interactive=!0,this.selectable=!1,this.grabbable=!0,this.dragging=!1,this.cursor=null,this.events=new n.EventEmitter,this._circleCollisionCache=null,this._graphicSymbolChangedHandle=null,this._originalSymbol=null}set graphic(e){\"mesh\"!==t(e.geometry,\"type\")?(this._circleCollisionCache=null,this._originalSymbol=e.symbol,this._set(\"graphic\",e),this.attachSymbolChanged()):j.error(\"Mesh geometries are not supported\")}get elevationInfo(){const e=\"elevationInfo\"in this.graphic.layer&&this.graphic.layer.elevationInfo,t=v(this.graphic),o=e?e.offset:0;return new b({mode:t,offset:o})}set focusedSymbol(e){e!==this._get(\"focusedSymbol\")&&(this._set(\"focusedSymbol\",e),this._updateGraphicSymbol(),this._circleCollisionCache=null)}grabbableForEvent(){return!0}set grabbing(e){e!==this._get(\"grabbing\")&&(this._set(\"grabbing\",e),this._updateGraphicSymbol())}set hovering(e){e!==this._get(\"hovering\")&&(this._set(\"hovering\",e),this._updateGraphicSymbol())}set selected(e){e!==this._get(\"selected\")&&(this._set(\"selected\",e),this._updateGraphicSymbol(),this.events.emit(\"select-changed\",{action:e?\"select\":\"deselect\"}))}get _focused(){return this._get(\"hovering\")||this._get(\"grabbing\")}destroy(){this.detachSymbolChanged(),this._resetGraphicSymbol(),this._set(\"view\",null)}intersectionDistance(e){const t=this.graphic;if(!1===t.visible)return null;const s=t.geometry;if(o(s))return null;const r=this._get(\"focusedSymbol\"),l=i(r)?r:t.symbol;return\"2d\"===this.view.type?this._intersectDistance2D(this.view,e,s,l):this._intersectDistance3D(this.view,e,t)}attach(){this.attachSymbolChanged(),i(this.layer)&&this.layer.add(this.graphic)}detach(){this.detachSymbolChanged(),this._resetGraphicSymbol(),i(this.layer)&&this.layer.remove(this.graphic)}attachSymbolChanged(){this.detachSymbolChanged(),this._graphicSymbolChangedHandle=this.graphic.watch(\"symbol\",(e=>{i(e)&&e!==this.focusedSymbol&&e!==this._originalSymbol&&(this._originalSymbol=e,this._focused&&i(this.focusedSymbol)&&(this.graphic.symbol=this.focusedSymbol))}),!0)}detachSymbolChanged(){i(this._graphicSymbolChangedHandle)&&(this._graphicSymbolChangedHandle.remove(),this._graphicSymbolChangedHandle=null)}_updateGraphicSymbol(){this.graphic.symbol=this._focused&&i(this.focusedSymbol)?this.focusedSymbol:this._originalSymbol}_resetGraphicSymbol(){this.graphic.symbol=this._originalSymbol}_intersectDistance2D(e,t,s,r){if(r=r||f(s),o(r))return null;const l=1;let a=this._circleCollisionCache;if(\"point\"!==s.type||\"simple-marker\"!==r.type)return S(t,s,e)?l:null;if(o(a)||!a.originalPoint.equals(s)){const t=s,o=e.spatialReference;if(y(t.spatialReference,o)){const e=g(t,o);a={originalPoint:t.clone(),mapPoint:e,radiusPx:c(r.size)},this._circleCollisionCache=a}}if(i(a)){const o=h(t,G),i=e.toScreen(a.mapPoint),s=a.radiusPx,n=i.x+c(r.xoffset),p=i.y-c(r.yoffset);return _(o,[n,p])<s*s?l:null}return null}_intersectDistance3D(e,t,o){const i=e.toMap(t,{include:[o]});return i&&d(i,w,e.renderSpatialReference)?u(w,e.state.camera.eye):null}};e([r({constructOnly:!0,nonNullable:!0})],C.prototype,\"graphic\",null),e([r({readOnly:!0})],C.prototype,\"elevationInfo\",null),e([r({constructOnly:!0,nonNullable:!0})],C.prototype,\"view\",void 0),e([r({value:null})],C.prototype,\"focusedSymbol\",null),e([r({constructOnly:!0})],C.prototype,\"layer\",void 0),e([r()],C.prototype,\"interactive\",void 0),e([r()],C.prototype,\"selectable\",void 0),e([r()],C.prototype,\"grabbable\",void 0),e([r({value:!1})],C.prototype,\"grabbing\",null),e([r()],C.prototype,\"dragging\",void 0),e([r()],C.prototype,\"hovering\",null),e([r({value:!1})],C.prototype,\"selected\",null),e([r()],C.prototype,\"cursor\",void 0),C=e([l(\"esri.views.interactive.GraphicManipulator\")],C);const w=m(),G=p();export{C as GraphicManipulator};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{_ as i}from\"../chunks/tslib.es6.js\";import\"../core/has.js\";import{isSome as e}from\"../core/maybe.js\";import\"../core/Logger.js\";import\"../core/accessorSupport/ensureType.js\";import{getProperties as t}from\"../core/accessorSupport/utils.js\";import{property as s}from\"../core/accessorSupport/decorators/property.js\";import{subclass as r}from\"../core/accessorSupport/decorators/subclass.js\";import{writer as o}from\"../core/accessorSupport/decorators/writer.js\";import\"../core/urlUtils.js\";import\"../core/uuid.js\";import\"../portal/support/resourceExtension.js\";import{loadAll as l}from\"../core/loadAll.js\";import{getLayerJSON as a}from\"../webdoc/support/writeUtils.js\";import p from\"./Layer.js\";import{LayersMixin as n}from\"../support/LayersMixin.js\";import{TablesMixin as y}from\"../support/TablesMixin.js\";import{MultiOriginJSONMixin as c}from\"../core/MultiOriginJSONSupport.js\";import{OperationalLayer as h}from\"./mixins/OperationalLayer.js\";import{BlendLayer as d}from\"./mixins/BlendLayer.js\";import{PortalLayer as m}from\"./mixins/PortalLayer.js\";import{ScaleRangeLayer as u}from\"./mixins/ScaleRangeLayer.js\";let v=class extends(d(u(h(m(y(n(c(p)))))))){constructor(i){super(i),this._visibilityHandles={},this.fullExtent=void 0,this.operationalLayerType=\"GroupLayer\",this.spatialReference=void 0,this.type=\"group\",this._visibilityWatcher=this._visibilityWatcher.bind(this)}initialize(){this._enforceVisibility(this.visibilityMode,this.visible),this.watch(\"visible\",this._visibleWatcher.bind(this),!0)}_writeLayers(i,t,s,r){const o=[];if(!i)return o;i.forEach((i=>{const t=a(i,r.webmap?r.webmap.getLayerJSONFromResourceInfo(i):null,r);e(t)&&t.layerType&&o.push(t)})),t.layers=o}set portalItem(i){this._set(\"portalItem\",i)}set visibilityMode(i){const e=this._get(\"visibilityMode\")!==i;this._set(\"visibilityMode\",i),e&&this._enforceVisibility(i,this.visible)}load(i){return this.addResolvingPromise(this.loadFromPortal({supportedTypes:[\"Feature Service\",\"Feature Collection\",\"Scene Service\"]},i)),Promise.resolve(this)}loadAll(){return l(this,(i=>{i(this.layers)}))}layerAdded(i){i.visible&&\"exclusive\"===this.visibilityMode?this._turnOffOtherLayers(i):\"inherited\"===this.visibilityMode&&(i.visible=this.visible),this._visibilityHandles[i.uid]=i.watch(\"visible\",this._visibilityWatcher,!0)}layerRemoved(i){const e=this._visibilityHandles[i.uid];e&&(e.remove(),delete this._visibilityHandles[i.uid]),this._enforceVisibility(this.visibilityMode,this.visible)}_turnOffOtherLayers(i){this.layers.forEach((e=>{e!==i&&(e.visible=!1)}))}_enforceVisibility(i,e){if(!t(this).initialized)return;const s=this.layers;let r=s.find((i=>i.visible));switch(i){case\"exclusive\":s.length&&!r&&(r=s.getItemAt(0),r.visible=!0),this._turnOffOtherLayers(r);break;case\"inherited\":s.forEach((i=>{i.visible=e}))}}_visibleWatcher(i){\"inherited\"===this.visibilityMode&&this.layers.forEach((e=>{e.visible=i}))}_visibilityWatcher(i,e,t,s){const r=s;switch(this.visibilityMode){case\"exclusive\":i?this._turnOffOtherLayers(r):this._isAnyLayerVisible()||(r.visible=!0);break;case\"inherited\":r.visible=this.visible}}_isAnyLayerVisible(){return this.layers.some((i=>i.visible))}};i([s()],v.prototype,\"fullExtent\",void 0),i([s({json:{read:!1,write:{ignoreOrigin:!0}}})],v.prototype,\"layers\",void 0),i([o(\"layers\")],v.prototype,\"_writeLayers\",null),i([s({type:[\"GroupLayer\"]})],v.prototype,\"operationalLayerType\",void 0),i([s({json:{origins:{\"web-document\":{read:!1,write:!1}}}})],v.prototype,\"portalItem\",null),i([s()],v.prototype,\"spatialReference\",void 0),i([s({json:{read:!1},readOnly:!0,value:\"group\"})],v.prototype,\"type\",void 0),i([s({type:[\"independent\",\"inherited\",\"exclusive\"],value:\"independent\",json:{write:!0,origins:{\"web-map\":{read:!1,write:!1}}}})],v.prototype,\"visibilityMode\",null),v=i([r(\"esri.layers.GroupLayer\")],v);var b=v;export default b;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{_ as t}from\"../../chunks/tslib.es6.js\";import\"../../core/has.js\";import\"../../core/Logger.js\";import\"../../core/accessorSupport/ensureType.js\";import{property as o}from\"../../core/accessorSupport/decorators/property.js\";import{subclass as e}from\"../../core/accessorSupport/decorators/subclass.js\";import r from\"../../core/Error.js\";import\"../../core/urlUtils.js\";import\"../../core/uuid.js\";import\"../../portal/support/resourceExtension.js\";import s from\"../../core/Accessor.js\";import i from\"../../core/Handles.js\";import{init as l}from\"../../core/watchUtils.js\";import{evaluateToolConstructorArguments as n}from\"../../views/interactive/interactiveToolUtils.js\";let p=class extends s{constructor(t){super(t),this.tool=null,this._baseHandles=new i,this._loggedUnsupportedErrorOnce=!1,this._creationAbortController=null,t&&null!=t.visible&&(this.visible=t.visible)}initialize(){this._baseHandles.add(l(this,[\"view.ready\",\"isSupported\"],(()=>{this.view&&this.view.ready&&!this.isSupported?this._loggedUnsupportedErrorOnce||(this.logUnsupportedError(),this._loggedUnsupportedErrorOnce=!0):this._loggedUnsupportedErrorOnce=!1})))}destroy(){this.removeTool(),this.view=null,this._baseHandles.destroy(),this._baseHandles=null}get isSupported(){return!this.view||this.view.type===this.supportedViewType}get view(){return this._get(\"view\")}set view(t){if(t===this.view)return;this.removeTool(),this._set(\"view\",t);const o=\"tools\";this._baseHandles.remove(o),t&&this._baseHandles.add(t.tools.on(\"change\",(t=>{if(this.tool)for(const o of t.removed)if(this.tool===o){o.destroyed||o.destroy(),this._set(\"tool\",null);break}})),o)}set visible(t){this._set(\"visible\",t),this.tool&&(this.tool.visible=t),!t&&this._creationAbortController&&(this._creationAbortController.abort(),this._creationAbortController=null)}get active(){return null!=this._creationAbortController||null!=this.tool&&this.tool.active}get isDisabled(){return!this.view||!this.view.ready||!this.isSupported}get creatingTool(){return!!this._creationAbortController}async createTool(){if(this.removeTool(),!this.isSupported)return Promise.reject(new r(\"tool:create\",\"The view does not support the tool\"));const t=this.createToolParams(),o=()=>{const o=n(t.constructorArguments);return{visible:this.visible,...o}},e=new AbortController,s=e.signal;this._creationAbortController=e;const i=()=>{e===this._creationAbortController&&(this._creationAbortController=null)};try{const e=await this.view.createTool(t.toolConstructor,o,{signal:s});this._set(\"tool\",e),i()}catch(l){throw i(),l}}removeTool(){this._creationAbortController&&this._creationAbortController.abort(),this._creationAbortController=null;const t=this.tool;t&&(this.view&&this.view.tools&&this.view.tools.remove(t),t.destroyed||t.destroy(),this._set(\"tool\",null))}};t([o({constructOnly:!0})],p.prototype,\"tool\",void 0),t([o()],p.prototype,\"isSupported\",null),t([o({value:null})],p.prototype,\"view\",null),t([o({type:Boolean,value:!0})],p.prototype,\"visible\",null),t([o()],p.prototype,\"active\",null),t([o()],p.prototype,\"isDisabled\",null),t([o()],p.prototype,\"_creationAbortController\",void 0),t([o({readOnly:!0})],p.prototype,\"creatingTool\",null),p=t([e(\"esri.widgets.support.InteractiveToolViewModel\")],p);export{p as InteractiveToolViewModel};\n"],"sourceRoot":""}