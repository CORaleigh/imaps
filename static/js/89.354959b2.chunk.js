(this.webpackJsonpimaps=this.webpackJsonpimaps||[]).push([[89,284],{1047:function(e,t,r){"use strict";var s=r(80),n=r(78),i=r(137),o=r(79),a=(r(86),r(83)),c=r(141),l=r(82),u=(r(81),r(84),r(85),r(184)),d=r(91),h=r(273),p=(r(166),r(115)),b=r(109),g=r(111),f=r(165),m=r(299),y=r(127),O=r(151),j=r(138),v=r(87),S=r(89),w=r(94),_=r(95),x=r(112),I=r(123),T=r(106),R=r(140),M=r(163),E=r(225),N=r(200),F=r(158),C=r(181),k=r(622),L=r(215),A=r(289),D=r(344),P=r(120),U=r(481),B=r(498),G=r(105),$=r(705),J=r(677);const q=Object($.a)({themeDictionary:{default:{name:"default",label:"Default",description:"Default theme for basic visualization of features.",schemes:{point:{light:{primary:{color:[77,77,77,1],outline:{color:[255,255,255,.25],width:"1px"},size:"8px"},secondary:[{color:[226,119,40,1],outline:{color:[255,255,255,.25],width:"1px"},size:"8px"},{color:[255,255,255,1],outline:{color:[51,51,51,.25],width:"1px"},size:"8px"}]},dark:{primary:{color:[255,255,255,1],outline:{color:[92,92,92,.25],width:"1px"},size:"8px"},secondary:[{color:[226,119,40,1],outline:{color:[255,255,255,.25],width:"1px"},size:"8px"},{color:[26,26,26,1],outline:{color:[178,178,178,.25],width:"1px"},size:"8px"}]}},polyline:{light:{primary:{color:[77,77,77,1],width:"2px"},secondary:[{color:[226,119,40,1],width:"2px"},{color:[255,255,255,1],width:"2px"}]},dark:{primary:{color:[255,255,255,1],width:"2px"},secondary:[{color:[226,119,40,1],width:"2px"},{color:[26,26,26,1],width:"2px"}]}},polygon:{light:{primary:{size:"12px",color:[227,139,79,1],outline:{color:[255,255,255,.25],width:"1px"},opacity:.8},secondary:[{size:"12px",color:[128,128,128,1],outline:{color:[255,255,255,.25],width:"1px"},opacity:.8},{size:"12px",color:[255,255,255,1],outline:{color:[128,128,128,.25],width:"1px"},opacity:.8}]},dark:{primary:{size:"12px",color:[227,139,79,1],outline:{color:[92,92,92,.25],width:"1px"},opacity:.8},secondary:[{size:"12px",color:[178,178,178,1],outline:{color:[92,92,92,.25],width:"1px"},opacity:.8},{size:"12px",color:[26,26,26,1],outline:{color:[128,128,128,.25],width:"1px"},opacity:.8}]}}}}}});function V(e){const t=Object($.d)({basemap:e.basemap,geometryType:e.geometryType,basemapTheme:e.basemapTheme,theme:q.get("default")});if(!t)return;const{schemesInfo:r,basemapId:s,basemapTheme:n}=t;return{primaryScheme:z(e,r.primary),secondarySchemes:r.secondary.map((t=>z(e,t))).filter(Boolean),basemapId:s,basemapTheme:n}}function z(e,t){const r="mesh"!==e.geometryType&&e.worldScale?e.view:null;switch(e.geometryType){case"point":case"multipoint":{const e=t;return function(e,t){return{color:new G.a(e.color),outline:{color:new G.a(e.outline.color),width:e.outline.width},size:t?Object(J.a)(e.size,t):e.size,opacity:1}}({color:e.color,outline:{...e.outline},size:e.size},r)}case"polyline":{const e=t;return function(e,t){return{color:new G.a(e.color),width:t?Object(J.a)(e.width,t):e.width,opacity:1}}({color:e.color,width:e.width},r)}case"polygon":{const e=t;return function(e,t){return{color:new G.a(e.color),outline:{color:new G.a(e.outline.color),width:e.outline.width},size:t?Object(J.a)(e.size,t):e.size,opacity:e.opacity}}({size:e.size,color:e.color,outline:{...e.outline},opacity:e.opacity},r)}case"mesh":{const e=t;return function(e){return{color:new G.a(e.color),opacity:e.opacity}}({color:e.color,opacity:e.opacity})}}}Object.freeze({__proto__:null,getThemes:function(e){return Object($.e)(q,e)},getSchemes:V,cloneScheme:function(e){if(!e)return;const t={...e};return t.color&&(t.color=new G.a(t.color)),"outline"in t&&t.outline&&(t.outline={color:t.outline.color&&new G.a(t.outline.color),width:t.outline.width}),t}});var H=r(738),K=r(739),W=r(868),Z=r(819),X=r(895),Y=r(818);function Q(e,t){return e.hasOwnProperty(t)&&null!=e[t]&&""!==e[t]}const ee="esri.widgets.Search.SearchViewModel",te=o.a.getLogger(ee),re="highlight",se=T.a.ofType({key:e=>e.layer?"layer":"locator",base:H.a,typeMap:{layer:W.a,locator:X.a}}),ne=_.a.WGS84,ie=/<(?:.|\s)*?>/g,oe=-1;let ae=class extends(Object(B.a)(I.a.EventedMixin(w.a))){constructor(e){super(e),this._handles=new p.a,this._gotoController=null,this._searching=null,this.autoNavigate=!0,this.autoSelect=!0,this.defaultPopupTemplate=null,this.defaultSources=new se,this.defaultSymbol=new k.a({url:Object(F.a)(Object(n.a)("trident")?"esri/images/search/search-symbol-32.png":"esri/images/search/search-symbol-32.svg"),size:24,width:24,height:24}),this.includeDefaultSources=!0,this.maxInputLength=128,this.maxResults=6,this.maxSuggestions=6,this.messages=null,this.minSuggestCharacters=1,this.popupEnabled=!0,this.popupTemplate=null,this.portal=C.a.getDefault(),this.resultCount=null,this.resultGraphicEnabled=!0,this.resultGraphic=null,this.results=null,this.selectedSuggestion=null,this.searchAllEnabled=!0,this.selectedResult=null,this.sources=new se,this.suggestionDelay=150,this.suggestionCount=null,this.suggestions=null,this.suggestionsEnabled=!0,this.view=null}initialize(){const e=async()=>{const e=await Object(N.a)("esri/widgets/Search/t9n/Search");this.messages=e,this.defaultPopupTemplate=new M.a({title:e.searchResult,content:"{Match_addr}"})};e(),this._handles.add([Object(b.b)(this,["defaultSources","sources"],"change",(()=>this.notifyChange("allSources"))),Object(b.a)(this,["includeDefaultSources","view","portal"],(()=>this._update())),Object(R.c)(e)])}destroy(){this._abortGoTo(),this.clearGraphics(),this._handles.destroy(),this._handles=null}get activeSource(){return this.allSources.getItemAt(this.activeSourceIndex)||null}get activeSourceIndex(){return 1!==this.allSources.length&&this.searchAllEnabled?oe:0}set activeSourceIndex(e){void 0!==e?this._override("activeSourceIndex",e):this._clearOverride("activeSourceIndex")}get allPlaceholder(){var e;return null==(e=this.messages)?void 0:e.allPlaceholder}set allPlaceholder(e){e?this._override("allPlaceholder",e):this._clearOverride("allPlaceholder")}get allSources(){const{sources:e,defaultSources:t,includeDefaultSources:r}=this,s="function"==typeof r?r.call(null,{sources:e,defaultSources:t}):r?t.concat(e):e,n=this._get("allSources")||new se;return n.removeAll(),n.addMany(s.filter(Boolean)),n}get locationEnabled(){return this._get("locationEnabled")||Object(Y.c)()}set locationEnabled(e){if(void 0===e)return void this._clearOverride("locationEnabled");const t=Object(Y.c)();if(e&&!t){const e=new S.a("locationEnabled:geolocation-unsupported","Geolocation API is unsupported.",{geolocation:navigator.geolocation});te.error(e)}this._override("locationEnabled",e&&t)}get placeholder(){const{allSources:e,activeSourceIndex:t,allPlaceholder:r}=this;if(t===oe)return r;const s=e.getItemAt(t);return s?s.placeholder:""}set searchTerm(e){this._set("searchTerm",e||""),this.clearGraphics(),this.selectedSuggestion&&this.selectedSuggestion.text!==e&&this._set("selectedSuggestion",null),""===e&&this._clear()}get searchTerm(){return this._get("searchTerm")||""}get state(){return this._searching?"searching":this.updating?"loading":0===this.allSources.length?"disabled":"ready"}get updating(){return null!=this._updatingPromise}clear(){this.searchTerm=""}clearGraphics(){this._removeHighlight(),this._closePopup(),this.view&&this.view.graphics.remove(this.resultGraphic),this._set("resultGraphic",null)}search(e,t){this.emit("search-start"),this.clearGraphics();const r=this._createSuggestionForSearch(e),s=this.when().then((()=>this._getResultsFromSources(r,t).then((e=>{const t={activeSourceIndex:this.activeSourceIndex,searchTerm:r.text,numResults:0,numErrors:0,errors:[],results:[]};this._formatResponse(t,e,r);const s=this._getFirstResult(t.results),n=(r.location&&s?s.name:r.text).replace(ie,"");return this._set("searchTerm",n),(r.key&&"number"==typeof r.sourceIndex||r.location)&&this._set("selectedSuggestion",r),this._set("results",t.results),this._set("resultCount",t.results.reduce(((e,t)=>e+t.results.length),0)),this.emit("search-complete",t),this._selectFirstResult(s).then((()=>t))})))).then((e=>(this._clearSearching(),e)),(e=>{throw this._clearSearching(),e}));return this._searching=s,this.notifyChange("state"),s}searchNearby(e){if(!this.locationEnabled){const e=new S.a("searchNearby:geolocation-unsupported","Geolocation API is unsupported.",{geolocation:navigator.geolocation});return te.error(e),Promise.reject(e)}const t=Object(Y.a)().then((t=>Object(Y.b)({position:t,view:this.view},e))).then((t=>this.search(t,e)));return this._searching=t,this.notifyChange("state"),t.catch((()=>{})).then((()=>this._clearSearching())),t}select(e){if(this.clearGraphics(),!e){const t=new S.a("select:missing-parameter","Cannot select without a searchResult.",{searchResult:e});return te.error(t),Promise.reject(t)}const{view:t}=this,r=Q(e,"sourceIndex")?e.sourceIndex:this._getSourceIndexOfResult(e),s=this.allSources.getItemAt(r);if(!s){const e=new S.a("select:missing-source","Cannot select without a source.",{source:s});return te.error(e),Promise.reject(e)}const n=s instanceof W.a?this._getLayerSourcePopupTemplate(s):s.popupTemplate,i=s.resultSymbol||this._getDefaultSymbol(e),o=Q(s,"resultGraphicEnabled")?s.resultGraphicEnabled:this.resultGraphicEnabled,a=Q(s,"autoNavigate")?s.autoNavigate:this.autoNavigate,c=Q(s,"popupEnabled")?s.popupEnabled:this.popupEnabled,l=c?n||this.popupTemplate||this.defaultPopupTemplate:null,{feature:u}=e;if(!u){const e=new S.a("select:missing-feature","Cannot select without a feature.",{feature:u});return te.error(e),Promise.reject(e)}const{attributes:h,geometry:p,layer:b,sourceLayer:g}=u,f=Object(K.b)(p),m={layerViewQuery:this._getLayerView(u),elevationQuery:t&&Object(v.k)(f)?Object(K.c)(f,t).catch((()=>f)):Promise.resolve(f)};return Object(d.j)(m).then((n=>{const d=n.layerViewQuery.value,f=n.elevationQuery.value;i instanceof D.a&&(i.text=e.name);const m=t&&a?e.target||e.extent:null;return(Object(v.k)(m)?this._goToSearchResult(m):Promise.resolve()).then((()=>{var n;const a=d?u:new P.a({geometry:p,symbol:i,attributes:h,layer:b,sourceLayer:g,popupTemplate:l}),m=c&&(null==(n=this.view)?void 0:n.popup),y=m&&a.getEffectivePopupTemplate(m.defaultPopupTemplateEnabled);return y&&t.popup.open({features:[a],location:f}),d&&Object(U.a)(d)&&!y&&this._highlightFeature({graphic:a,layerView:d}),!d&&o&&t&&t.graphics.push(a),this._set("selectedResult",e),this._set("resultGraphic",a),this.emit("select-result",{result:e,source:s,sourceIndex:r}),e}))}))}suggest(e,t,r){const s=e||this.searchTerm;return this.emit("suggest-start",{searchTerm:s}),this._suggestTimer(t,r).then((()=>this._suggestImmediate(s,r).then((e=>(this._set("suggestions",e.results),this._set("suggestionCount",e.results.reduce(((e,t)=>e+t.results.length),0)),this.emit("suggest-complete",e),e)))))}async when(){await Object(b.g)(this,"updating")}async _update(){const{portal:e,view:t}=this;if(this.includeDefaultSources){const r=this._updatingPromise=Object(d.j)([null==e?void 0:e.load(),null==t?void 0:t.when()]);if(this.destroyed)return;if(this.notifyChange("updating"),await r,r!==this._updatingPromise)return}this._updatingPromise=null,this.notifyChange("updating");const r=Object(b.j)(this,"messages");this.destroyed||(this._handles.add(r),await r,this._updateDefaultSources())}_clearSearching(){this._searching=null,this.notifyChange("state")}_convertHelperServices(){var e,t;const r=null==(e=this.portal)||null==(t=e.helperServices)?void 0:t.geocode;return r?r.map((e=>{var t;if(!1===e.placefinding)return;const r=j.a.apiKey&&Object(Z.c)(e.url)?{url:"https://geocode-api.arcgis.com/arcgis/rest/services/World/GeocodeServer"}:null,s=X.a.fromJSON({...e,...r}),n=null==(t=s.locator)?void 0:t.url;if(Object(Z.c)(n)||Object(Z.e)(n)||Object(Z.d)(n)){const e=s.outFields||["Addr_type","Match_addr","StAddr","City"],t=s.placeholder||this.messages.placeholder,r="number"==typeof s.defaultZoomScale?s.defaultZoomScale:2500;s.set({singleLineFieldName:"SingleLine",outFields:e,placeholder:t,defaultZoomScale:r})}return s.singleLineFieldName?s:void 0})).filter(Boolean):[]}_getLayerSources(e,t){var r;const s=null==(r=this.view)?void 0:r.map;return e.map((e=>{const r=s.findLayerById(e.id);if(!r)return;const n=this._getLayerJSON(e),i=W.a.fromJSON(n);return i.placeholder=t,this._getLayer(r,n).then((e=>{i.layer=e})),i})).filter(Boolean).toArray()}_getTableSources(e,t){var r;const s=null==(r=this.view)?void 0:r.map;return e.map((e=>{const r=s.findTableById(e.id);if(!r)return;const n=this._getLayerJSON(e),i=W.a.fromJSON(n);return i.placeholder=t,this._getLayer(r,n).then((e=>{i.layer=e})),i})).filter(Boolean).toArray()}_convertApplicationProperties(){var e,t,r;const s=null==(e=this.view)?void 0:e.map,n=null==s||null==(t=s.applicationProperties)||null==(r=t.viewing)?void 0:r.search;if(!n)return[];const{enabled:i,hintText:o,layers:a,tables:c}=n;return i?[...this._getLayerSources(a,o),...this._getTableSources(c,o)]:[]}_getSubLayer(e,t){return e.load().then((()=>{if(!e.allSublayers)return Promise.reject();const r=e.allSublayers.find((e=>e.id===t.subLayer));return r?r.createFeatureLayer():Promise.reject()}))}async _getBuildingSubLayer(e,t){await e.load();const r=e.allSublayers.find((e=>e.id===t.subLayer));return"building-component"!==(null==r?void 0:r.type)?Promise.reject():(await r.load(),null==r.associatedLayer?Promise.reject():(await r.associatedLayer.load(),r))}_getLayer(e,t){return"feature"===e.type||"scene"===e.type||"csv"===e.type||"geojson"===e.type||"ogc-feature"===e.type?Promise.resolve(e):"map-image"===e.type?this._getSubLayer(e,t).catch((()=>{const t=new S.a("search:create-featurelayer","Could not create a FeatureLayer from the MapImageLayer",{layer:e});return te.error(t),null})):"building-scene"===e.type?this._getBuildingSubLayer(e,t):Promise.resolve(null)}_getLayerJSON(e){return"function"==typeof e.toJSON?e.toJSON():e}_updateDefaultSources(){const{defaultSources:e,includeDefaultSources:t}=this;e.removeAll(),t&&e.addMany([...this._convertApplicationProperties(),...this._convertHelperServices()]),this.notifyChange("allSources")}_abortGoTo(){this._gotoController&&this._gotoController.abort(),this._gotoController=null}_clear(){this._abortGoTo(),this._set("resultCount",null),this._set("results",null),this._set("suggestions",null),this._set("suggestionCount",null),this._set("selectedResult",null),this._set("selectedSuggestion",null),this.emit("search-clear")}_closePopup(){var e;const t=null==(e=this.view)?void 0:e.popup,{resultGraphic:r}=this;if(!t||!r)return;const{selectedFeature:s}=t;s&&s===r&&t.close()}_suggestTimer(e,t){const r=null!=e?e:this.suggestionDelay;return Object(d.a)(r,null,t&&t.signal)}_createLocationForSearch(e){return e instanceof P.a?Object(K.b)(e.geometry):e instanceof x.a?e:Array.isArray(e)&&2===e.length?new x.a({longitude:e[0],latitude:e[1]}):null}_createSuggestionForSearch(e){if(e&&Q(e,"key")&&Q(e,"text")&&Q(e,"sourceIndex"))return e;const t=this._createLocationForSearch(e),r="string"==typeof e?e:this.searchTerm,{selectedSuggestion:s,selectedResult:n}=this,i=!e&&s&&n,o=i&&s.key===n.key&&s.sourceIndex===n.sourceIndex,a=i&&s.location;return o||a?s:{location:Object(v.q)(t),text:t?"":r,sourceIndex:null,key:null}}_getFirstResult(e){let t=null;return e&&e.some((e=>{const{results:r}=e,s=r[0],n=!!s;return n&&(t=s),n})),t}_selectFirstResult(e){return this.autoSelect&&e?this.select(e):Promise.resolve(null)}_suggestImmediate(e,t){return this.when().then((()=>this._getSuggestionsFromSources(e,t))).then((t=>{const r={activeSourceIndex:this.activeSourceIndex,searchTerm:e,numResults:0,numErrors:0,errors:[],results:[]};return this._formatResponse(r,t),r}))}_formatSourceResponse(e,t,r){const s=t&&t.value||[],n=t&&t.error,i=this.allSources.getItemAt(r);if(n){const t={sourceIndex:r,source:i,error:n};e.errors.push(t),e.numErrors++}else{const t={sourceIndex:r,source:i,results:s};e.results.push(t),e.numResults+=s.length}}_formatResponse(e,t,r){if(t)if(e.activeSourceIndex===oe){const s=r&&Q(r,"sourceIndex")&&-1!==r.sourceIndex?r.sourceIndex:void 0;t.forEach(((t,r)=>{const n=void 0!==s?s:r;this._formatSourceResponse(e,t,n)}))}else this._formatSourceResponse(e,t[0],e.activeSourceIndex)}_getResultsFromSources(e,t){const{allSources:r}=this,s=!e.location&&Q(e,"sourceIndex")?e.sourceIndex:this.activeSourceIndex,n=[];if(!r.length){const e=new S.a("search:no-sources-defined","At least one source is required.",{allSources:r});return te.error(e),Promise.reject(e)}return s===oe?r.forEach(((r,s)=>{n.push(this._getResultsFromSource(e,s,t))})):n.push(this._getResultsFromSource(e,s,t)),Object(d.j)(n)}_getSuggestionsFromSources(e,t){const{allSources:r,activeSourceIndex:s}=this,n=[];if(!r.length){const e=new S.a("suggest:no-sources-defined","At least one source is required.",{allSources:r});return te.error(e),Promise.reject(e)}return s===oe?r.forEach(((r,s)=>{n.push(this._getSuggestionsFromSource(e,s,t))})):n.push(this._getSuggestionsFromSource(e,s,t)),Object(d.j)(n)}_getResultsFromSource(e,t,r){var s;const n=this.allSources.getItemAt(t),{location:i=null}=e,o=(null==(s=this.view)?void 0:s.spatialReference)||ne,a=Q(n,"maxResults")?n.maxResults:this.maxResults,c=!!(n instanceof W.a&&Q(n,"exactMatch"))&&n.exactMatch,{view:l}=this;return n.getResults({view:l,sourceIndex:t,location:i,suggestResult:e,spatialReference:o,exactMatch:c,maxResults:a},r)}_getSuggestionsFromSource(e,t,r){const s=this.allSources.getItemAt(t),n=Q(s,"suggestionsEnabled")?s.suggestionsEnabled:this.suggestionsEnabled,i=e.length,o=Q(s,"minSuggestCharacters")?s.minSuggestCharacters:this.minSuggestCharacters;if(n&&e.trim()&&i>=o){var a;const n=(null==(a=this.view)?void 0:a.spatialReference)||ne,i=Q(s,"maxSuggestions")?s.maxSuggestions:this.maxSuggestions,{view:o}=this;return s.getSuggestions({view:o,sourceIndex:t,suggestTerm:e,spatialReference:n,maxSuggestions:i},r)}return Promise.resolve(null)}createDefaultSymbol(e,t){if("point"===t){const t=e;return new A.a({color:e.color,size:t.size,outline:{color:t.outline.color,width:t.outline.width}})}if("polyline"===t){const t=e;return new E.a({color:t.color,width:t.width})}if("polygon"===t){const t=e;return new L.a({color:t.color,outline:{color:t.outline.color,width:t.outline.width}})}}_getLayerSourcePopupTemplate(e){const{layer:t}=e;if(t)return Q(e,"popupTemplate")?e.popupTemplate:t.popupTemplate}_getSourceIndexOfResult(e){const t=this.results;let r=null;return t.some((t=>t.results.some((s=>s===e&&(r=t.sourceIndex,!0))))),r}async _goToSearchResult(e){const t=!!e;this._abortGoTo();const r=Object(d.d)();this._gotoController=r;const s={target:{target:e},options:{animate:t,signal:r.signal}};await this.callGoTo(s),this._gotoController=null}_getDefaultSymbol(e){var t,r,s;const n=null==(t=this.view)||null==(r=t.map)||null==(s=r.basemap)?void 0:s.id,i=Object(v.i)(e,"feature","geometry","type");if(Object(v.k)(i)){const e=V({basemap:n,geometryType:i})||V({basemap:"topo",geometryType:i}),t=e&&e.primaryScheme;if(t)return t.color&&Q(t,"opacity")&&(t.color.a=t.opacity),this.createDefaultSymbol(t,i)}return this.defaultSymbol}_removeHighlight(){this._handles.remove(re)}async _getLayerView(e){const{view:t}=this;if(!e||!t||"building-component"===e.layer.type)return Promise.resolve(null);const{layer:r}=e;return await t.when(),t.whenLayerView(r)}_highlightFeature(e){const{graphic:t,layerView:r}=e,{attributes:s,layer:n}=t,{objectIdField:i}=n,o=s&&s[i],a=r.highlight(o||t);this._handles.add(a,re)}};ae.ALL_INDEX=oe,Object(s.a)([Object(a.b)({readOnly:!0,value:null})],ae.prototype,"activeSource",null),Object(s.a)([Object(a.b)()],ae.prototype,"activeSourceIndex",null),Object(s.a)([Object(a.b)()],ae.prototype,"allPlaceholder",null),Object(s.a)([Object(a.b)({readOnly:!0,dependsOn:["defaultSources.length","sources.length","includeDefaultSources"]})],ae.prototype,"allSources",null),Object(s.a)([Object(a.b)()],ae.prototype,"autoNavigate",void 0),Object(s.a)([Object(a.b)()],ae.prototype,"autoSelect",void 0),Object(s.a)([Object(a.b)()],ae.prototype,"defaultPopupTemplate",void 0),Object(s.a)([Object(a.b)({readOnly:!0})],ae.prototype,"defaultSources",void 0),Object(s.a)([Object(a.b)()],ae.prototype,"defaultSymbol",void 0),Object(s.a)([Object(a.b)()],ae.prototype,"includeDefaultSources",void 0),Object(s.a)([Object(a.b)()],ae.prototype,"locationEnabled",null),Object(s.a)([Object(a.b)()],ae.prototype,"maxInputLength",void 0),Object(s.a)([Object(a.b)()],ae.prototype,"maxResults",void 0),Object(s.a)([Object(a.b)()],ae.prototype,"maxSuggestions",void 0),Object(s.a)([Object(a.b)()],ae.prototype,"messages",void 0),Object(s.a)([Object(a.b)()],ae.prototype,"minSuggestCharacters",void 0),Object(s.a)([Object(a.b)({readOnly:!0})],ae.prototype,"placeholder",null),Object(s.a)([Object(a.b)()],ae.prototype,"popupEnabled",void 0),Object(s.a)([Object(a.b)({type:M.a})],ae.prototype,"popupTemplate",void 0),Object(s.a)([Object(a.b)({type:C.a})],ae.prototype,"portal",void 0),Object(s.a)([Object(a.b)()],ae.prototype,"resultCount",void 0),Object(s.a)([Object(a.b)()],ae.prototype,"resultGraphicEnabled",void 0),Object(s.a)([Object(a.b)({readOnly:!0})],ae.prototype,"resultGraphic",void 0),Object(s.a)([Object(a.b)({readOnly:!0})],ae.prototype,"results",void 0),Object(s.a)([Object(a.b)({readOnly:!0})],ae.prototype,"selectedSuggestion",void 0),Object(s.a)([Object(a.b)()],ae.prototype,"searchAllEnabled",void 0),Object(s.a)([Object(a.b)({readOnly:!0})],ae.prototype,"selectedResult",void 0),Object(s.a)([Object(a.b)()],ae.prototype,"searchTerm",null),Object(s.a)([Object(a.b)({type:se})],ae.prototype,"sources",void 0),Object(s.a)([Object(a.b)({readOnly:!0,dependsOn:["allSources.length","updating"]})],ae.prototype,"state",null),Object(s.a)([Object(a.b)()],ae.prototype,"suggestionDelay",void 0),Object(s.a)([Object(a.b)()],ae.prototype,"suggestionCount",void 0),Object(s.a)([Object(a.b)({readOnly:!0})],ae.prototype,"suggestions",void 0),Object(s.a)([Object(a.b)()],ae.prototype,"suggestionsEnabled",void 0),Object(s.a)([Object(a.b)({readOnly:!0})],ae.prototype,"updating",null),Object(s.a)([Object(a.b)()],ae.prototype,"view",void 0),Object(s.a)([Object(a.b)()],ae.prototype,"clear",null),ae=Object(s.a)([Object(l.a)(ee)],ae);var ce=ae,le=r(259);const ue="esri-search-result-renderer esri-widget",de="esri-widget__anchor",he="esri-search-result-renderer__more-results--show-more-results",pe="esri-search-result-renderer__more-results",be="esri-search-result-renderer__more-results-list",ge="esri-search-result-renderer__more-results-item",fe="esri-search-result-renderer__more-results-list-header";let me=class extends O.a{constructor(e,t){super(e,t),this.messages=null,this.showMoreResultsOpen=!1,this.viewModel=null}render(){const e={[he]:this.showMoreResultsOpen};return Object(y.a)("div",{class:ue},Object(y.a)("div",{key:"esri-search-renderer__container",class:this.classes(pe,e)},this.renderSearchResultName(),this.renderMoreResults()))}renderMoreResults(){return Object(y.a)("div",{key:"esri-search-renderer__more-results"},this.renderMoreResultsButton(),this.renderMoreResultsLists())}renderSearchResultName(){var e;const t=null==(e=this.viewModel)?void 0:e.selectedResult,r=t&&t.name||"";return Object(y.a)("div",{key:"esri-search-renderer__result-name",class:ge},r)}renderMoreResultsLists(){var e;const t=null==(e=this.viewModel)?void 0:e.results,{resultCount:r}=this.viewModel;if(r<2)return null;const s=t.map((e=>this.renderMoreResultsList(e)));return Object(y.a)("div",{key:"esri-search-renderer__more-results-container",class:be},s)}renderMoreResultsButton(){const{messages:e}=this,{resultCount:t}=this.viewModel;return t<2?null:Object(y.a)("div",{key:"esri-search-renderer__more-results-button",class:ge},Object(y.a)("a",{class:de,href:"#",bind:this,onclick:this._showMoreResultsClick,onkeydown:this._showMoreResultsClick},this.showMoreResultsOpen?e.hideMoreResults:e.showMoreResults))}renderMoreResultsHeader(e,t){return Object(y.a)("div",{key:`esri-search-result-renderer__header-${t}`,class:fe},e)}renderMoreResultsList(e){var t,r;const{results:s}=e,n=s.length,i=!!n,o=null==(t=this.viewModel)?void 0:t.selectedResult,a=1===n&&s[0]===o,c=this._getSourceName(e.source,e.sourceIndex),l=(null==(r=this.viewModel)?void 0:r.results.length)>1&&!a?this.renderMoreResultsHeader(c,e.sourceIndex):null,u=i&&s.map(((e,t)=>this.renderMoreResultsListItem(e,t))),d=i&&!a?Object(y.a)("ul",{key:`esri-search-result-renderer__list-${e.sourceIndex}`},u):null;return i?Object(y.a)("div",{key:`esri-search-result-renderer__results-${e.sourceIndex}`},l,d):null}renderMoreResultsListItem(e,t){return e!==this.get("viewModel.selectedResult")?Object(y.a)("li",{key:`esri-search-result-renderer__list-item-${t}`},Object(y.a)("a",{class:de,href:"#",tabindex:"0",bind:this,"data-result":e,onclick:this._selectResultClick,onkeydown:this._selectResultClick},e.name)):null}_showMoreResultsClick(e){e.preventDefault(),this.showMoreResultsOpen=!this.showMoreResultsOpen;const t=this.get("viewModel.view.popup");t&&t.reposition()}_selectResultClick(e){e.preventDefault();const t=e.currentTarget["data-result"];this.viewModel&&this.viewModel.select(t)}_getSourceName(e,t){return t===ce.ALL_INDEX?this.messages.all:e.name}};Object(s.a)([Object(a.b)(),Object(f.a)("esri/widgets/Search/t9n/Search")],me.prototype,"messages",void 0),Object(s.a)([Object(a.b)()],me.prototype,"showMoreResultsOpen",void 0),Object(s.a)([Object(a.b)()],me.prototype,"viewModel",void 0),Object(s.a)([Object(le.a)()],me.prototype,"_showMoreResultsClick",null),Object(s.a)([Object(le.a)()],me.prototype,"_selectResultClick",null),me=Object(s.a)([Object(l.a)("esri.widgets.Search.SearchResultRenderer")],me);var ye=me;const Oe="esri-search esri-widget",je="esri-widget__loader",ve="esri-widget__loader-text",Se="esri-widget__loader-animation",we="esri-input",_e="esri-search--multiple-sources",xe="esri-search--loading",Ie="esri-search--searching",Te="esri-search--show-suggestions",Re="esri-search--sources",Me="esri-search--warning",Ee="esri-search__container",Ne="esri-search__input",Fe="esri-search__input-container",Ce="esri-search__form",ke="esri-search__submit-button",Le="esri-search__sources-button",Ae="esri-search__clear-button",De="esri-search__source-name",Pe="esri-search__suggestions-menu",Ue="esri-search__suggestions-list",Be="esri-search__suggestions-list--current-location",Ge="esri-search__sources-menu",$e="esri-search__source",Je="esri-search__warning-menu",qe="esri-search__warning-body",Ve="esri-search__warning-header",ze="esri-search__warning-text",He="esri-search__no-value-text",Ke="esri-widget--disabled",We="esri-widget--button",Ze="esri-icon-font-fallback-text",Xe="esri-icon-locate-circled",Ye="esri-menu",Qe="esri-menu__list",et="esri-menu__list-item",tt="esri-menu__list-item--active",rt="esri-menu__list-item--focus",st="esri-menu__header",nt="esri-icon-search",it="esri-icon-down-arrow esri-search__sources-button--down",ot="esri-icon-up-arrow esri-search__sources-button--up",at="esri-icon-close",ct="esri-icon-notice-triangle",lt="esri-icon-search",ut="esri-disabled",dt=/<[a-z/][\s\S]*>/i;let ht=class extends O.a{constructor(e,t){super(e,t),this._activeMenuItemIndex=-1,this._handles=new p.a,this._inputNode=null,this._menuItemCount=0,this._sourceMenuButtonNode=null,this._sourceListNode=null,this._suggestionListNode=null,this._searchResultRenderer=new ye,this._relatedTarget=null,this._locateFailed=null,this.activeMenu="none",this.activeSource=null,this.activeSourceIndex=null,this.allPlaceholder=null,this.allSources=null,this.autoNavigate=null,this.autoSelect=null,this.defaultSources=null,this.disabled=!1,this.goToOverride=null,this.iconClass=lt,this.includeDefaultSources=null,this.label=void 0,this.locationEnabled=null,this.maxResults=null,this.maxSuggestions=null,this.messages=null,this.messagesCommon=null,this.minSuggestCharacters=null,this.popupEnabled=null,this.popupTemplate=null,this.portal=null,this.resultGraphic=null,this.resultGraphicEnabled=null,this.results=null,this.searchAllEnabled=null,this.searchTerm=null,this.selectedResult=null,this.sources=null,this.suggestions=null,this.suggestionsEnabled=null,this.view=null,this.viewModel=new ce,this.own(Object(b.d)(this,"searchTerm",(e=>{(e&&"warning"===this.activeMenu||!e&&!this.get("viewModel.selectedSuggestion.location"))&&(this.activeMenu="none")})),Object(b.b)(this,"viewModel.allSources","change",(()=>this._watchSourceChanges())),Object(b.a)(this,"activeMenu",(()=>this._resetActiveMenuItemIndex())),Object(b.a)(this,"viewModel.defaultPopupTemplate",(e=>{e&&(e.content=this._renderSearchResultsContent.bind(this))})))}destroy(){this._handles.destroy(),this._handles=null,this._cancelSuggest(),this._cancelSearch(),this._searchResultRenderer&&(this._searchResultRenderer.viewModel=null,this._searchResultRenderer.destroy(),this._searchResultRenderer=null)}get displayedSearchTerm(){return`${this.viewModel.searchTerm}`.trim()}get inputId(){return this._buildId("input")}get suggestionsMenuId(){return this._buildId("suggest-menu")}get sourceMenuId(){return this._buildId("source-menu")}get sourceMenuButtonId(){return this._buildId("source-menu-button")}clear(){}focus(){this._inputNode&&(this.activeMenu="suggestion",this._inputNode.focus(),this.emit("search-focus"))}blur(e){this._inputNode&&(this._inputNode.blur(),this._inputBlur(e),this.emit("search-blur"))}search(e){this.activeMenu="none",this._cancelSuggest(),this._cancelSearch();const t=Object(d.d)(),{signal:r}=t;return this._searchController=t,this.viewModel.search(e,{signal:r}).catch((e=>{if(this._searchController===t)return this.activeMenu="none",this._searchController=null,e})).then((e=>{if(this._searchController===t)return this.activeMenu=e.numResults?"none":"warning",this._searchController=null,e}))}suggest(e){this._cancelSuggest();const t=Object(d.d)(),{signal:r}=t;return this._suggestController=t,this.viewModel.suggest(e,null,{signal:r}).then((e=>{if(this._suggestController===t)return this._suggestController=null,e.numResults&&(this.activeMenu="suggestion"),this._scrollToTopSuggestion(),e})).catch((()=>{if(this._suggestController===t)return this._suggestController=null,null}))}render(){const{state:e}=this.viewModel,t={[ut]:"disabled"===e,[Ke]:this.disabled};return Object(y.a)("div",{class:this.classes(Oe,t)},"loading"===e?this.renderLoader():this.renderContainer())}renderSubmitButton(){const{messages:e}=this;return Object(y.a)("button",{"aria-label":e.searchButtonTitle,bind:this,class:this.classes(ke,We),key:"esri-search__submit-button",onclick:this._handleSearchButtonClick,title:e.searchButtonTitle},Object(y.a)("span",{"aria-hidden":"true",class:nt}))}renderWarningMenu(){return Object(y.a)("div",{key:"esri-search__error-menu",class:this.classes(Ye,Je)},Object(y.a)("div",{class:qe},this.renderWarning()))}renderSourceMenuButton(){const{messages:e,activeMenu:t,sourceMenuId:r,sourceMenuButtonId:s}=this,{activeSourceIndex:n,allSources:i}=this.viewModel;return i.length>1?Object(y.a)("button",{id:s,key:"esri-search__source-menu-button",bind:this,"aria-label":e.searchIn,title:e.searchIn,"aria-haspopup":"true","aria-expanded":("source"===t).toString(),"aria-controls":r,class:this.classes(Le,We),onclick:this._handleSourcesMenuToggleClick,onblur:this._sourcesButtonBlur,afterCreate:g.i,"data-node-ref":"_sourceMenuButtonNode"},Object(y.a)("span",{"aria-hidden":"true",class:it}),Object(y.a)("span",{"aria-hidden":"true",class:ot}),Object(y.a)("span",{class:De},this._getSourceName(n))):null}renderSourcesList(){const{allSources:e,searchAllEnabled:t}=this.viewModel,{_activeMenuItemIndex:r,activeMenu:s,sourceMenuId:n,sourceMenuButtonId:i}=this,o="source"===s&&r>-1?this._buildId("source-item",r):null;return e.length>1?Object(y.a)("ul",{"aria-activedescendant":o,"aria-labelledby":i,id:n,role:"menu",bind:this,afterCreate:g.i,onkeydown:this._handleSourceMenuKeydown,onkeyup:this._handleSourceMenuKeyup,"data-node-ref":"_sourceListNode",class:Qe,tabIndex:-1},t?this.renderSource(ce.ALL_INDEX):null,e.map(((e,t)=>this.renderSource(t))).toArray()):null}renderSourcesMenu(){const{allSources:e}=this.viewModel;return e.length>1?Object(y.a)("div",{key:"esri-search__source-menu",class:this.classes(Ye,Ge)},this.renderSourcesList()):null}renderLoader(){const{messages:e,messagesCommon:t}=this;return Object(y.a)("div",{class:je,key:"base-loader"},Object(y.a)("span",{"aria-hidden":"true",class:Se}),Object(y.a)("span",{class:Ze},e.searchButtonTitle),Object(y.a)("span",{class:ve},t.loading))}renderContainer(){const{allSources:e,state:t}=this.viewModel,{activeMenu:r}=this,s={[_e]:e.length>1,[xe]:"loading"===t,[Ie]:"searching"===t,[Me]:"warning"===r,[Re]:"source"===r,[Te]:"suggestion"===r};return Object(y.a)("div",{class:this.classes(s,Ee),key:"base-container"},this.renderSourceMenuButton(),this.renderSourcesMenu(),this.renderInputContainer(),this.renderSubmitButton(),this.renderWarningMenu())}renderClearButton(){return this.searchTerm?Object(y.a)("button",{bind:this,class:this.classes(Ae,We),key:"esri-search__clear-button",onclick:this._handleClearButtonClick,onfocus:this._clearButtonFocus,title:this.messages.clearButtonTitle},Object(y.a)("span",{"aria-hidden":"true",class:at})):null}renderLocationGroup(){const{messages:e,locationEnabled:t,displayedSearchTerm:r}=this,s=t&&!r,n="suggestion"===this.activeMenu&&0===this._activeMenuItemIndex;return s?Object(y.a)("ul",{role:"group",key:"esri-search__suggestion-list-current-location",class:this.classes(Qe,Ue,Be)},Object(y.a)("li",{bind:this,"data-current-location-item":!0,onclick:this._handleUseCurrentLocationClick,id:this._buildId("suggestion-item",0),"aria-selected":("suggestion"===this.activeMenu&&0===this._activeMenuItemIndex).toString(),role:"option",class:this.classes(et,n?rt:null)},Object(y.a)("span",{"aria-hidden":"true",class:Xe})," ",e.useCurrentLocation)):null}renderInput(){const{activeMenu:e,locationEnabled:t,displayedSearchTerm:r,messages:s,suggestionsMenuId:n,inputId:i,_activeMenuItemIndex:o}=this,{maxInputLength:a,placeholder:c,searchTerm:l,suggestionCount:u}=this.viewModel,d=!((!t||r)&&!u),h="suggestion"===e&&o>-1?this._buildId("suggestion-item",o):null;return Object(y.a)("input",{"aria-activedescendant":h,"aria-autocomplete":"list","aria-expanded":(d&&"suggestion"===e).toString(),"aria-controls":d?n:null,"aria-owns":d?n:null,"aria-haspopup":"listbox","aria-label":s.searchButtonTitle,bind:this,placeholder:c,maxlength:a,autocomplete:"off",type:"text",class:this.classes(we,Ne),value:l,id:i,role:"combobox",onkeyup:this._handleInputKeyup,onclick:this._handleInputClick,oninput:this._handleInputPaste,onpaste:this._handleInputPaste,afterCreate:g.i,"data-node-ref":"_inputNode",onfocusout:this._storeRelatedTarget,onfocus:this.focus,onblur:this.blur,title:l?"":c})}renderForm(){return Object(y.a)("form",{key:"esri-search__form",bind:this,class:Ce,onsubmit:this._formSubmit,role:"search"},this.renderInput())}renderSuggestList(e){const{sourceIndex:t}=e,r=e.results.length,s=e.results;return r?Object(y.a)("ul",{role:"group",key:`esri-search__suggestion-list-${t}`,class:this.classes(Qe,Ue)},s.map((e=>this.renderSuggestion(e,this._menuItemCount++)))):null}renderSuggestionsGroup(){const{suggestions:e}=this.viewModel;return e?e.map((e=>[this.renderSuggestionHeader(e),this.renderSuggestList(e)])):null}renderSuggestionsMenu(){const{displayedSearchTerm:e,locationEnabled:t,suggestionsMenuId:r,inputId:s}=this,{suggestionCount:n}=this.viewModel,i=t&&!e||n;return this._menuItemCount=0,i?Object(y.a)("div",{id:r,key:"esri-search__suggestions-menu",class:this.classes(Ye,Pe),role:"listbox","aria-labelledby":s,bind:this,afterCreate:g.i,"data-node-ref":"_suggestionListNode"},this.renderLocationGroup(),this.renderSuggestionsGroup()):null}renderInputContainer(){return Object(y.a)("div",{key:"esri-search__input-container",class:Fe},this.renderForm(),this.renderSuggestionsMenu(),this.renderClearButton())}renderSuggestionHeader(e){const{allSources:t,activeSourceIndex:r}=this.viewModel,{sourceIndex:s}=e,n=e.results.length,i=t.length>1&&r===ce.ALL_INDEX;return n&&i?Object(y.a)("div",{key:`esri-search__suggestion-header-${s}`,class:st},this._getSourceName(s)):null}renderSuggestion(e,t){const{_activeMenuItemIndex:r,messages:s}=this,{searchTerm:n}=this.viewModel;if(n){const{text:i}=e,o=i||s.untitledResult,a=dt.test(o),c=[];if(a)c.push(Object(y.a)("div",{innerHTML:o}));else{const e=this._splitResult(o,n),t=n.toLowerCase();e.forEach(((e,r)=>{e&&e.length&&(e.toLowerCase()===t?c.push(Object(y.a)("strong",{key:r},e)):c.push(e))}))}const l="suggestion"===this.activeMenu&&r===t;return Object(y.a)("li",{bind:this,id:this._buildId("suggestion-item",t),"aria-selected":("suggestion"===this.activeMenu&&this._activeMenuItemIndex===t).toString(),onclick:this._handleSuggestionClick,key:`esri-search__suggestion_${t}`,"data-suggestion":e,role:"option",class:this.classes(et,l?rt:null)},c)}}renderSource(e){const{activeSourceIndex:t,searchAllEnabled:r}=this.viewModel,s={[tt]:e===t,[rt]:"source"===this.activeMenu&&e===(r?this._activeMenuItemIndex-1:this._activeMenuItemIndex)},n=r?e+1:e;return Object(y.a)("li",{bind:this,key:`esri-search__source-${e}`,id:this._buildId("source-item",n),"aria-checked":(e===t).toString(),onclick:this._handleSourceClick,"data-source-index":e,role:"menuitemradio",class:this.classes($e,et,s)},this._getSourceName(e))}renderNoResultsWarning(e){const{messages:t}=this,r=e?Object(h.a)(t.noResultsFoundForValue,{value:`"${e}"`}):t.noResultsFound;return Object(y.a)("div",{key:"esri-search__no_results"},Object(y.a)("div",{class:Ve},t.noResults),Object(y.a)("div",{class:ze},r))}renderEmptySearchWarning(){const{messages:e}=this;return Object(y.a)("div",{key:"esri-search__empty-search"},Object(y.a)("span",{"aria-hidden":"true",class:ct}),Object(y.a)("span",{class:He},e.emptyValue))}renderLocateWarning(){const{messages:e}=this;return Object(y.a)("div",{key:"esri-search__locate-error"},Object(y.a)("span",{"aria-hidden":"true",class:ct}),Object(y.a)("span",{class:He},e.locateError))}renderWarning(){var e;const{displayedSearchTerm:t,_locateFailed:r}=this,{viewModel:s}=this;return r?this.renderLocateWarning():null!=(e=s.selectedSuggestion)&&e.location||t?this.renderNoResultsWarning(t):this.renderEmptySearchWarning()}_resetActiveMenuItemIndex(){this._activeMenuItemIndex=-1}_buildId(e,t){return`${this.id}-${e}${void 0===t?"":`-${t}`}`}_watchSourceChanges(){const{_handles:e,viewModel:{allSources:t}}=this,r="sources";e.remove(r),t.forEach((t=>e.add(Object(b.d)(t,"name",(()=>this.scheduleRender())),r)))}_handleSourcesMenuToggleClick(){const e="source"===this.activeMenu;var t;this.activeMenu=e?"none":"source",this.renderNow(),"source"===this.activeMenu&&(null==(t=this._sourceListNode)||t.focus())}_handleClearButtonClick(){this.viewModel.clear(),this._focus()}_handleSearchButtonClick(){this.search()}_handleSuggestionClick(e){const t=e.currentTarget["data-suggestion"];t&&(this._focus(),this.search(t))}_handleUseCurrentLocationClick(){this._useCurrentLocation()}_useCurrentLocation(){this._focus("none"),this._cancelSuggest(),this._cancelSearch();const e=Object(d.d)(),{signal:t}=e;this._searchController=e,this.viewModel.searchNearby({signal:t}).catch((()=>{this._locateFailed=!0,this.activeMenu="warning"})).then((()=>{this._searchController=null}))}_handleSourceClick(e){this._setSourceFromMenuItem(e.currentTarget)}_setSourceFromMenuItem(e){var t;if(!e)return;const r=e["data-source-index"];this.viewModel.activeSourceIndex=r,this.activeMenu="none",null==(t=this._sourceMenuButtonNode)||t.focus()}_sourcesButtonBlur(e){const t=e&&e.relatedTarget;this._removeActiveMenu(t,this._sourceListNode)}_inputBlur(e){const t=e&&e.relatedTarget;this._removeActiveMenu(t||this._relatedTarget,this._suggestionListNode)}_storeRelatedTarget(e){this._relatedTarget=e.relatedTarget}_clearButtonFocus(){this.activeMenu="none"}_removeActiveMenu(e,t){!e||e&&t&&t.contains(e)||(this.activeMenu="none")}_cancelSuggest(){this._suggestController&&(this._suggestController.abort(),this._suggestController=null)}_cancelSearch(){this._searchController&&(this._searchController.abort(),this._searchController=null),this._locateFailed=!1}_handleInputKeyup(e){var t;const r=Object(u.a)(e);if(e.ctrlKey||e.metaKey||"Copy"===r||"ArrowLeft"===r||"ArrowRight"===r||"Shift"===r)return;if("Tab"===r||"Escape"===r||e.shiftKey&&"Tab"===r)return this._cancelSuggest(),void("Escape"===r&&(this.activeMenu="none"));const s="Home"===r||"End"===r||"ArrowUp"===r||"ArrowDown"===r;if("Enter"===r&&this._activeMenuItemIndex<0)return void this._cancelSuggest();const n=null==(t=this._suggestionListNode)?void 0:t.getElementsByTagName("li");if(null!=n&&n.length){if("suggestion"!==this.activeMenu&&(this.activeMenu="suggestion"),s)return e.preventDefault(),this._cancelSuggest(),void this.handleItemNavigation(r,n,this._suggestionListNode);const t=n[this._activeMenuItemIndex];if("Enter"===r&&t){const e=t["data-suggestion"];return void(e?(this._focus(),this.search(e)):t["data-current-location-item"]&&this._useCurrentLocation())}}this.viewModel.searchTerm&&this.suggest()}handleItemNavigation(e,t,r){const s=this._activeMenuItemIndex;"Home"===e&&(this._activeMenuItemIndex=0),"End"===e&&(this._activeMenuItemIndex=t.length-1),"ArrowUp"===e&&(this._activeMenuItemIndex=this._activeMenuItemIndex<=0?t.length-1:this._activeMenuItemIndex-1),"ArrowDown"===e&&(this._activeMenuItemIndex=this._activeMenuItemIndex===t.length-1?0:this._activeMenuItemIndex+1),s!==this._activeMenuItemIndex&&Object(g.g)(t[this._activeMenuItemIndex],r)}_scrollToTopSuggestion(){this._suggestionListNode&&(this._suggestionListNode.scrollTop=0)}_handleInputClick(){this.activeMenu="suggestion"}_handleInputPaste(e){const t=e.target;this.viewModel.searchTerm!==t.value&&(this.viewModel.searchTerm=t.value),this.viewModel.searchTerm&&this.suggest()}_handleSourceMenuKeydown(e){const t=Object(u.a)(e);if(" "!==t&&"Enter"!==t)"ArrowUp"!==t&&"ArrowDown"!==t&&"End"!==t&&"Home"!==t||e.preventDefault();else{e.preventDefault();const t=this._sourceListNode.getElementsByTagName("li")[this._activeMenuItemIndex];this._setSourceFromMenuItem(t)}}_handleSourceMenuKeyup(e){var t;const r=Object(u.a)(e),s="ArrowUp"===r||"ArrowDown"===r||"End"===r||"Home"===r;var n;if(s&&e.preventDefault(),"Escape"===r)return this.activeMenu="none",void(null==(n=this._sourceMenuButtonNode)||n.focus());const i=null==(t=this._sourceListNode)?void 0:t.getElementsByTagName("li");return i&&0!==i.length&&s?("source"!==this.activeMenu&&(this.activeMenu="source"),void this.handleItemNavigation(r,i,this._sourceListNode.parentElement)):void 0}_focus(e){this.focus(),e&&(this.activeMenu=e)}_formSubmit(e){e.preventDefault(),-1===this._activeMenuItemIndex&&this.search()}_getSourceName(e){const{messages:t}=this,r=this.viewModel,{allSources:s}=r,n=s.getItemAt(e);return e===ce.ALL_INDEX?t.all:n&&n.name||t.untitledSource}_splitResult(e,t){const r=Object(i.a)(t);return e.replace(new RegExp(`(^|)(${r})(|$)`,"ig"),"$1|$2|$3").split("|")}_renderSearchResultsContent(){return this._searchResultRenderer.showMoreResultsOpen=!1,this._searchResultRenderer.viewModel=this.viewModel,this._searchResultRenderer}};Object(s.a)([Object(a.b)()],ht.prototype,"_activeMenuItemIndex",void 0),Object(s.a)([Object(a.b)()],ht.prototype,"displayedSearchTerm",null),Object(s.a)([Object(a.b)({readOnly:!0})],ht.prototype,"inputId",null),Object(s.a)([Object(a.b)({readOnly:!0})],ht.prototype,"suggestionsMenuId",null),Object(s.a)([Object(a.b)({readOnly:!0})],ht.prototype,"sourceMenuId",null),Object(s.a)([Object(a.b)({readOnly:!0})],ht.prototype,"sourceMenuButtonId",null),Object(s.a)([Object(a.b)()],ht.prototype,"activeMenu",void 0),Object(s.a)([Object(c.a)("viewModel.activeSource")],ht.prototype,"activeSource",void 0),Object(s.a)([Object(c.a)("viewModel.activeSourceIndex")],ht.prototype,"activeSourceIndex",void 0),Object(s.a)([Object(c.a)("viewModel.allPlaceholder")],ht.prototype,"allPlaceholder",void 0),Object(s.a)([Object(c.a)("viewModel.allSources")],ht.prototype,"allSources",void 0),Object(s.a)([Object(c.a)("viewModel.autoNavigate")],ht.prototype,"autoNavigate",void 0),Object(s.a)([Object(c.a)("viewModel.autoSelect")],ht.prototype,"autoSelect",void 0),Object(s.a)([Object(c.a)("viewModel.defaultSources")],ht.prototype,"defaultSources",void 0),Object(s.a)([Object(a.b)()],ht.prototype,"disabled",void 0),Object(s.a)([Object(c.a)("viewModel.goToOverride")],ht.prototype,"goToOverride",void 0),Object(s.a)([Object(a.b)()],ht.prototype,"iconClass",void 0),Object(s.a)([Object(c.a)("viewModel.includeDefaultSources")],ht.prototype,"includeDefaultSources",void 0),Object(s.a)([Object(a.b)({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],ht.prototype,"label",void 0),Object(s.a)([Object(c.a)("viewModel.locationEnabled")],ht.prototype,"locationEnabled",void 0),Object(s.a)([Object(c.a)("viewModel.maxResults")],ht.prototype,"maxResults",void 0),Object(s.a)([Object(c.a)("viewModel.maxSuggestions")],ht.prototype,"maxSuggestions",void 0),Object(s.a)([Object(a.b)(),Object(f.a)("esri/widgets/Search/t9n/Search")],ht.prototype,"messages",void 0),Object(s.a)([Object(a.b)(),Object(f.a)("esri/t9n/common")],ht.prototype,"messagesCommon",void 0),Object(s.a)([Object(c.a)("viewModel.minSuggestCharacters")],ht.prototype,"minSuggestCharacters",void 0),Object(s.a)([Object(c.a)("viewModel.popupEnabled")],ht.prototype,"popupEnabled",void 0),Object(s.a)([Object(c.a)("viewModel.popupTemplate")],ht.prototype,"popupTemplate",void 0),Object(s.a)([Object(c.a)("viewModel.portal")],ht.prototype,"portal",void 0),Object(s.a)([Object(c.a)("viewModel.resultGraphic")],ht.prototype,"resultGraphic",void 0),Object(s.a)([Object(c.a)("viewModel.resultGraphicEnabled")],ht.prototype,"resultGraphicEnabled",void 0),Object(s.a)([Object(c.a)("viewModel.results")],ht.prototype,"results",void 0),Object(s.a)([Object(c.a)("viewModel.searchAllEnabled")],ht.prototype,"searchAllEnabled",void 0),Object(s.a)([Object(c.a)("viewModel.searchTerm")],ht.prototype,"searchTerm",void 0),Object(s.a)([Object(c.a)("viewModel.selectedResult")],ht.prototype,"selectedResult",void 0),Object(s.a)([Object(c.a)("viewModel.sources")],ht.prototype,"sources",void 0),Object(s.a)([Object(c.a)("viewModel.suggestions")],ht.prototype,"suggestions",void 0),Object(s.a)([Object(c.a)("viewModel.suggestionsEnabled")],ht.prototype,"suggestionsEnabled",void 0),Object(s.a)([Object(c.a)("viewModel.view")],ht.prototype,"view",void 0),Object(s.a)([Object(m.a)(["search-complete","search-clear","search-start","select-result","suggest-start","suggest-complete"]),Object(a.b)({type:ce})],ht.prototype,"viewModel",void 0),Object(s.a)([Object(c.a)("viewModel.clear")],ht.prototype,"clear",null),ht=Object(s.a)([Object(l.a)("esri.widgets.Search")],ht);var pt=ht;t.a=pt},110:function(e,t,r){"use strict";r.d(t,"a",(function(){return $})),r.d(t,"b",(function(){return J})),r.d(t,"c",(function(){return j})),r.d(t,"d",(function(){return w})),r.d(t,"e",(function(){return _})),r.d(t,"f",(function(){return f})),r.d(t,"g",(function(){return g})),r.d(t,"h",(function(){return x})),r.d(t,"i",(function(){return R})),r.d(t,"j",(function(){return Q})),r.d(t,"k",(function(){return b})),r.d(t,"l",(function(){return u})),r.d(t,"m",(function(){return h})),r.d(t,"n",(function(){return v})),r.d(t,"o",(function(){return I})),r.d(t,"p",(function(){return T})),r.d(t,"q",(function(){return y})),r.d(t,"r",(function(){return M})),r.d(t,"s",(function(){return z})),r.d(t,"t",(function(){return O})),r.d(t,"u",(function(){return G})),r.d(t,"v",(function(){return U})),r.d(t,"w",(function(){return B})),r.d(t,"x",(function(){return q})),r.d(t,"y",(function(){return m})),r.d(t,"z",(function(){return V})),r.d(t,"A",(function(){return Y}));var s=r(121),n=r(87),i=r(89),o=r(144),a=r(147);const c=["field","field2","field3","normalizationField","rotationInfo.field","proportionalSymbolInfo.field","proportionalSymbolInfo.normalizationField","colorInfo.field","colorInfo.normalizationField"],l=["field","normalizationField"];function u(e,t){if(null!=e&&null!=t)for(const r of Array.isArray(e)?e:[e])if(d(c,r,t),"visualVariables"in r&&r.visualVariables)for(const e of r.visualVariables)d(l,e,t)}function d(e,t,r){if(e)for(const n of e){const e=Object(s.b)(n,t),i=e&&"function"!=typeof e&&y(r,e);i&&Object(s.c)(n,i.name,t)}}function h(e,t){if(null!=e&&null!=t)if("startField"in e){const r=y(t,e.startField),s=y(t,e.endField);e.startField=r&&r.name||null,e.endField=s&&s.name||null}else{const r=y(t,e.startTimeField),s=y(t,e.endTimeField);e.startTimeField=r&&r.name||null,e.endTimeField=s&&s.name||null}}const p=new Set;function b(e,t){return e&&t?(p.clear(),g(p,e,t),Array.from(p).sort()):[]}function g(e,t,r){if(r)if(t&&t.length)if(r.includes("*"))for(const{name:s}of t)e.add(s);else for(const s of r)f(e,t,s);else{if(r.includes("*"))return e.clear(),void e.add("*");for(const t of r)e.add(t)}}function f(e,t,r){if(t&&t.length){const s=y(t,r);s&&e.add(s.name)}else"string"==typeof r&&e.add(r)}function m(e,t){return Object(n.j)(t)||Object(n.j)(e)?[]:t.includes("*")?e.map((e=>e.name)):t}function y(e,t){if("string"!=typeof t)return null;if(null!=e){t=t.toLowerCase();for(const r of e)if(r&&r.name.toLowerCase()===t)return r}return null}function O(e,t){if(!e||!t||"string"!=typeof t)return!1;t=t.toLowerCase();for(const r of e)if(r&&r.name.toLowerCase()===t)return!0;return!1}async function j(e,t,r){if(!r)return;const{arcadeUtils:s}=await Object(a.e)(),n=s.extractFieldNames(r);for(const i of n)f(e,t,i)}function v({displayField:e,fields:t}){return e||(t&&t.length?S(t,"name-or-title")||S(t,"unique-identifier")||S(t,"type-or-category")||function(e){for(const t of e){if(!t||!t.name)continue;const e=t.name.toLowerCase();if(e.indexOf("name")>-1||e.indexOf("title")>-1)return t.name}return null}(t):null)}function S(e,t){for(const r of e)if(r&&r.valueType&&r.valueType===t)return r.name;return null}async function w(e,t){if(!t)return;const{fields:r}=t,n=Object(s.b)("elevationInfo.featureExpressionInfo",t);return n?n.collectRequiredFields(e,r):void 0}async function _(e,t,r){t&&r&&"cluster"===r.type&&r.fields&&await Promise.all(r.fields.map((r=>async function(e,t,r){r.outStatistic.onStatisticValueExpression?j(e,t,r.outStatistic.onStatisticValueExpression):e.add(r.outStatistic.onStatisticField)}(e,t.fields,r))))}async function x(e,t,s){if(t&&(t.timeInfo&&Object(n.k)(s)&&s.timeExtent&&g(e,t.fields,[t.timeInfo.startField,t.timeInfo.endField]),t.floorInfo&&g(e,t.fields,[t.floorInfo.floorField]),Object(n.k)(s)&&Object(n.k)(s.where)&&s.where&&"1=1"!==s.where)){const n=(await Promise.all([r.e(11),r.e(273)]).then(r.bind(null,272))).WhereClause.create(s.where,t.fieldsIndex);if(!n.isStandardized)throw new i.a("fieldUtils:collectFilterFields","Where clause is not standardized");g(e,t.fields,n.fieldNames)}}function I(e){if(!e)return[];const t="editFieldsInfo"in e&&e.editFieldsInfo;return t?b(e.fields,[t&&t.creatorField,t&&t.creationDateField,t&&t.editorField,t&&t.editDateField]):[]}function T(e){if(!e)return[];const t=e.geometryFieldsInfo;return t?b(e.fields,[t.shapeAreaField,t.shapeLengthField]):[]}async function R(e,t){const{labelingInfo:r,fields:s}=t;r&&r.length&&await Promise.all(r.map((t=>async function(e,t,r){if(!r)return;const s=r.getLabelExpression(),n=r.where;if("arcade"===s.type)await j(e,t,s.expression);else{const r=s.expression.match(/{[^}]*}/g);r&&r.forEach((r=>{f(e,t,r.slice(1,-1))}))}const i=/['"]+/g;if(n){const r=n.split(" ");3===r.length&&f(e,t,r[0].replace(i,"")),7===r.length&&(f(e,t,r[0].replace(i,"")),f(e,t,r[4].replace(i,"")))}}(e,s,t))))}function M(e){const t=e.defaultValue;return void 0!==t&&D(e,t)?t:e.nullable?null:void 0}function E(e){return"number"==typeof e&&!isNaN(e)&&isFinite(e)}function N(e){return null===e||E(e)}const F="isInteger"in Number?Number.isInteger:e=>"number"==typeof e&&isFinite(e)&&Math.floor(e)===e;function C(e){return null===e||F(e)}function k(e){return null!=e&&"string"==typeof e}function L(e){return null===e||k(e)}function A(){return!0}function D(e,t){let r;switch(e.type){case"date":case"integer":case"long":case"small-integer":case"esriFieldTypeDate":case"esriFieldTypeInteger":case"esriFieldTypeLong":case"esriFieldTypeSmallInteger":r=e.nullable?C:F;break;case"double":case"single":case"esriFieldTypeSingle":case"esriFieldTypeDouble":r=e.nullable?N:E;break;case"string":case"esriFieldTypeString":r=e.nullable?L:k;break;default:r=A}return 1===arguments.length?r:r(t)}const P=new Set(["integer","small-integer","single","double","esriFieldTypeInteger","esriFieldTypeSmallInteger","esriFieldTypeSingle","esriFieldTypeDouble"]);function U(e){return null!=e&&P.has(e.type)}function B(e){return null!=e&&("string"===e.type||"esriFieldTypeString"===e.type)}function G(e){return null!=e&&("date"===e.type||"esriFieldTypeDate"===e.type)}var $,J;function q(e){return null==e||"number"==typeof e&&isNaN(e)?null:e}function V(e,t){return e.nullable&&null===t?null:U(e)&&!function(e,t){const r="string"==typeof e?H(e):e;return!!r&&(r.isInteger?F(t)&&t>=r.min&&t<=r.max:t>=r.min&&t<=r.max)}(e.type,Number(t))?$.OUT_OF_RANGE:D(e,t)?e.domain?Object(o.e)(e.domain,t):null:J.INVALID_TYPE}function z(e){return Object(o.c)(e.domain)||(U(e)?H(e.type):void 0)}function H(e){switch(e){case"esriFieldTypeSmallInteger":case"small-integer":return K;case"esriFieldTypeInteger":case"integer":return W;case"esriFieldTypeSingle":case"single":return Z;case"esriFieldTypeDouble":case"double":return X}}($||($={})).OUT_OF_RANGE="numeric-range-validation-error::out-of-range",function(e){e.INVALID_TYPE="type-validation-error::invalid-type"}(J||(J={}));const K={min:-32768,max:32767,isInteger:!0},W={min:-2147483648,max:2147483647,isInteger:!0},Z={min:-34e37,max:12e37,isInteger:!1},X={min:-Number.MAX_VALUE,max:Number.MAX_VALUE,isInteger:!1};function Y(e,t,r){switch(e){case o.a.INVALID_CODED_VALUE:return`Value ${r} is not in the coded domain - field: ${t.name}, domain: ${JSON.stringify(t.domain)}`;case o.a.VALUE_OUT_OF_RANGE:return`Value ${r} is out of the range of valid values - field: ${t.name}, domain: ${JSON.stringify(t.domain)}`;case J.INVALID_TYPE:return`Value ${r} is not a valid value for the field type - field: ${t.name}, type: ${t.type}, nullable: ${t.nullable}`;case $.OUT_OF_RANGE:{const{min:e,max:s}=H(t.type);return`Value ${r} is out of range for the number type - field: ${t.name}, type: ${t.type}, value range is ${e} to ${s}`}}}function Q(e,t){return!function(e,t,r){if(!t||!t.attributes||!e){if(Object(n.k)(r))for(const t of e)r.add(t);return!0}const s=t.attributes;let i=!1;for(const o of e)if(!(o in s)){if(i=!0,!Object(n.k)(r))break;r.add(o)}return i}(e,t,null)}},1104:function(e,t,r){},113:function(e,t,r){"use strict";r.d(t,"a",(function(){return J})),r.d(t,"b",(function(){return _})),r.d(t,"c",(function(){return I})),r.d(t,"d",(function(){return B})),r.d(t,"e",(function(){return P})),r.d(t,"f",(function(){return D})),r.d(t,"g",(function(){return L})),r.d(t,"h",(function(){return U})),r.d(t,"i",(function(){return A})),r.d(t,"j",(function(){return l})),r.d(t,"k",(function(){return x})),r.d(t,"l",(function(){return S})),r.d(t,"m",(function(){return C})),r.d(t,"n",(function(){return q})),r.d(t,"o",(function(){return w})),r.d(t,"p",(function(){return j})),r.d(t,"q",(function(){return v})),r.d(t,"r",(function(){return F})),r.d(t,"s",(function(){return M})),r.d(t,"t",(function(){return E})),r.d(t,"u",(function(){return N})),r.d(t,"v",(function(){return T})),r.d(t,"w",(function(){return R})),r.d(t,"x",(function(){return k}));r(78);var s=r(97),n=r(253),i=r(107),o=r(95),a=r(129),c=r(168);const l=39.37,u=a.a.radius*Math.PI/200,d=/UNIT\[([^\]]+)\]\]$/i,h=n.a,p=/UNIT\[([^\]]+)\]/i,b=new Set([4261,4305,4807,4810,4811,4812,4816,4819,4821,4901,4902,37225,104139,104140]),g=Object(s.b)()({meter:"meters",foot:"feet",foot_us:"us-feet",foot_clarke:"clarke-feet",yard_clarke:"clarke-yards",link_clarke:"clarke-links",yard_sears:"sears-yards",foot_sears:"sears-feet",chain_sears:"sears-chains",chain_benoit_1895_b:"benoit-1895-b-chains",yard_indian:"indian-yards",yard_indian_1937:"indian-1937-yards",foot_gold_coast:"gold-coast-feet",chain_sears_1922_truncated:"sears-1922-truncated-chains","50_kilometers":"50-kilometers","150_kilometers":"150-kilometers"}),f=e=>e*e,m=e=>e*e*e,y={length:{baseUnit:"meters",units:{millimeters:{inBaseUnits:.001},centimeters:{inBaseUnits:.01},decimeters:{inBaseUnits:.1},meters:{inBaseUnits:1},kilometers:{inBaseUnits:1e3},inches:{inBaseUnits:.0254},feet:{inBaseUnits:.3048},yards:{inBaseUnits:.9144},miles:{inBaseUnits:1609.344},"nautical-miles":{inBaseUnits:1852},"us-feet":{inBaseUnits:1200/3937}}},area:{baseUnit:"square-meters",units:{"square-millimeters":{inBaseUnits:f(.001)},"square-centimeters":{inBaseUnits:f(.01)},"square-decimeters":{inBaseUnits:f(.1)},"square-meters":{inBaseUnits:1},"square-kilometers":{inBaseUnits:f(1e3)},"square-inches":{inBaseUnits:f(.0254)},"square-feet":{inBaseUnits:f(.3048)},"square-yards":{inBaseUnits:f(.9144)},"square-miles":{inBaseUnits:f(1609.344)},"square-us-feet":{inBaseUnits:f(1200/3937)},acres:{inBaseUnits:.0015625*f(1609.344)},ares:{inBaseUnits:100},hectares:{inBaseUnits:1e4}}},volume:{baseUnit:"liters",units:{liters:{inBaseUnits:1},"cubic-millimeters":{inBaseUnits:1e3*m(.001)},"cubic-centimeters":{inBaseUnits:1e3*m(.01)},"cubic-decimeters":{inBaseUnits:1e3*m(.1)},"cubic-meters":{inBaseUnits:1e3},"cubic-kilometers":{inBaseUnits:1e3*m(1e3)},"cubic-inches":{inBaseUnits:1e3*m(.0254)},"cubic-feet":{inBaseUnits:1e3*m(.3048)},"cubic-yards":{inBaseUnits:1e3*m(.9144)},"cubic-miles":{inBaseUnits:1e3*m(1609.344)}}},angle:{baseUnit:"radians",units:{radians:{inBaseUnits:1},degrees:{inBaseUnits:Math.PI/180}}}},O=function(){const e={};for(const t in y)for(const r in y[t].units)e[r]=t;return e}();const j=["metric","imperial","square-inches","square-feet","square-yards","square-miles","square-us-feet","square-meters","square-kilometers","acres","ares","hectares"],v=["metric","imperial","inches","feet","yards","miles","nautical-miles","us-feet","meters","kilometers"];function S(e){return"imperial"===e||"metric"===e}function w(e){const t=O[e];if(t)return t;throw new Error("unknown measure")}function _(e){return function(e){return y[e].baseUnit}(w(e))}function x(e,t=null){return t=t||w(e),y[t].baseUnit===e}function I(e,t,r){if(t===r)return e;const s=w(t);if(s!==w(r))throw new Error("incompatible units");const n=x(t,s)?e:function(e,t,r){return e*y[r].units[t].inBaseUnits}(e,t,s);return x(r,s)?n:function(e,t,r){return e/y[r].units[t].inBaseUnits}(n,r,s)}function T(e,t){return I(e,t,"meters")<3e3?"meters":"kilometers"}function R(e,t){return I(e,t,"meters")<1e5?"meters":"kilometers"}function M(e,t){return I(e,t,"feet")<1e3?"feet":"miles"}function E(e,t){return I(e,t,"feet")<1e5?"feet":"miles"}function N(e,t){return I(e,t,"square-meters")<3e6?"square-meters":"square-kilometers"}function F(e,t){return I(e,t,"square-feet")<1e6?"square-feet":"square-miles"}function C(e,t,r){return I(e,t,"meters")/(r*Math.PI/180)}function k(e){return g.fromJSON(e.toLowerCase())||null}function L(e){if(e&&"object"==typeof e&&!Object(i.e)(e))return 1;const t=D(e);return t>1e5?1:t}function A(e){return D(e)>=(e instanceof o.a?Object(c.e)(e).metersPerDegree:1e5)?"meters":U(e)}function D(e,t=a.a.metersPerDegree){return P(e,!0)||t}function P(e,t=!1){let r,s,n=null;if(null!=e&&("object"==typeof e?(r=e.wkid,s=e.wkt):"number"==typeof e?r=e:"string"==typeof e&&(s=e)),r){if(Object(i.k)(r))return a.b.metersPerDegree;if(Object(i.l)(r))return a.c.metersPerDegree;n=h.values[h[r]],!n&&t&&b.has(r)&&(n=u)}else if(s)if(-1!==s.search(/^PROJCS/i)){const e=d.exec(s);e&&e[1]&&(n=parseFloat(e[1].split(",")[1]))}else if(-1!==s.search(/^GEOCCS/i)){const e=p.exec(s);e&&e[1]&&(n=parseFloat(e[1].split(",")[1]))}return n}function U(e){let t,r,s=null;if(null!=e&&("object"==typeof e?(t=e.wkid,r=e.wkt):"number"==typeof e?t=e:"string"==typeof e&&(r=e)),t)s=h.units[h[t]];else if(r&&-1!==r.search(/^PROJCS/i)){let e=d.exec(r);e&&e[1]&&(e=/[\\"\\']{1}([^\\"\\']+)/.exec(e[1]),s=e&&e[1])}return s?k(s):null}function B(e){if(!e)return null;switch(U(e)){case"feet":case"us-feet":case"clarke-feet":case"clarke-yards":case"clarke-links":case"sears-yards":case"sears-feet":case"sears-chains":case"benoit-1895-b-chains":case"indian-yards":case"indian-1937-yards":case"gold-coast-feet":case"sears-1922-truncated-chains":return"imperial";case"50-kilometers":case"150-kilometers":case"meters":return"metric";case null:case void 0:return null}return null}const G={esriAcres:"acres",esriAres:"ares",esriHectares:"hectares",esriSquareCentimeters:"square-centimeters",esriSquareDecimeters:"square-decimeters",esriSquareFeet:"square-feet",esriSquareInches:"square-inches",esriSquareKilometers:"square-kilometers",esriSquareMeters:"square-meters",esriSquareMiles:"square-miles",esriSquareMillimeters:"square-millimeters",esriSquareUsFeet:"square-us-feet",esriSquareYards:"square-yards"},$={esriCentimeters:"centimeters",esriDecimeters:"decimeters",esriFeet:"feet",esriInches:"inches",esriKilometers:"kilometers",esriMeters:"meters",esriMiles:"miles",esriMillimeters:"millimeters",esriNauticalMiles:"nautical-miles",esriYards:"yards"},J=Object(s.b)()(G),q=Object(s.b)()($);Object(s.b)()({...G,...$})},116:function(e,t,r){"use strict";var s=r(80),n=(r(78),r(79),r(86),r(83)),i=r(97),o=r(103),a=r(82),c=(r(81),r(84),r(85),r(88));const l=new i.a({inherited:"inherited",codedValue:"coded-value",range:"range"});let u=class extends c.a{constructor(e){super(e),this.name=null,this.type=null}};Object(s.a)([Object(n.b)({type:String,json:{write:!0}})],u.prototype,"name",void 0),Object(s.a)([Object(o.a)(l)],u.prototype,"type",void 0),u=Object(s.a)([Object(a.a)("esri.layers.support.Domain")],u);var d=u;t.a=d},120:function(e,t,r){"use strict";var s,n=r(80),i=(r(78),r(90)),o=r(87),a=(r(79),r(86),r(83)),c=r(82),l=(r(81),r(84),r(85),r(88)),u=r(96),d=r(98),h=r(163),p=r(136),b=r(185);let g=s=class extends l.a{constructor(...e){super(...e),this.isAggregate=!1,this.layer=null,this.popupTemplate=null,this.sourceLayer=null,Object.defineProperty(this,"uid",{value:Object(b.a)(),configurable:!0})}normalizeCtorArgs(e,t,r,s){return e&&!e.declaredClass?e:{geometry:e,symbol:t,attributes:r,popupTemplate:s}}set attributes(e){const t=this._get("attributes");t!==e&&(this._set("attributes",e),this._notifyLayer("attributes",t,e))}set geometry(e){const t=this._get("geometry");t!==e&&(this._set("geometry",e),this._notifyLayer("geometry",t,e))}set symbol(e){const t=this._get("symbol");t!==e&&(this._set("symbol",e),this._notifyLayer("symbol",t,e))}set visible(e){const t=this._get("visible");t!==e&&(this._set("visible",e),this._notifyLayer("visible",t,e))}getEffectivePopupTemplate(e=!1){return this.popupTemplate?this.popupTemplate:this.sourceLayer?"popupTemplate"in this.sourceLayer&&this.sourceLayer.popupTemplate?this.sourceLayer.popupTemplate:e&&"defaultPopupTemplate"in this.sourceLayer&&Object(o.k)(this.sourceLayer.defaultPopupTemplate)?this.sourceLayer.defaultPopupTemplate:null:null}getAttribute(e){return this.attributes&&this.attributes[e]}setAttribute(e,t){if(this.attributes){const r=this.getAttribute(e);this.attributes[e]=t,this._notifyLayer("attributes",r,t,e)}else this.attributes={[e]:t},this._notifyLayer("attributes",void 0,t,e)}getObjectId(){return this.sourceLayer&&"objectIdField"in this.sourceLayer&&this.sourceLayer.objectIdField?this.getAttribute(this.sourceLayer.objectIdField):null}toJSON(){return{geometry:Object(o.k)(this.geometry)?this.geometry.toJSON():null,symbol:Object(o.k)(this.symbol)?this.symbol.toJSON():null,attributes:{...this.attributes},popupTemplate:this.popupTemplate&&this.popupTemplate.toJSON()}}clone(){return new s(this.cloneProperties())}cloneProperties(){return{attributes:Object(i.a)(this.attributes),geometry:Object(i.a)(this.geometry),layer:this.layer,popupTemplate:this.popupTemplate&&this.popupTemplate.clone(),sourceLayer:this.sourceLayer,symbol:Object(i.a)(this.symbol),visible:this.visible}}_notifyLayer(e,t,r,s){if(!this.layer||!("graphicChanged"in this.layer))return;const n={graphic:this,property:e,oldValue:t,newValue:r};"attributes"===e&&(n.attributeName=s),this.layer.graphicChanged(n)}};Object(n.a)([Object(a.b)({value:null})],g.prototype,"attributes",null),Object(n.a)([Object(a.b)({value:null,types:d.a,json:{read:u.a}})],g.prototype,"geometry",null),Object(n.a)([Object(a.b)({type:Boolean})],g.prototype,"isAggregate",void 0),Object(n.a)([Object(a.b)()],g.prototype,"layer",void 0),Object(n.a)([Object(a.b)({type:h.a})],g.prototype,"popupTemplate",void 0),Object(n.a)([Object(a.b)()],g.prototype,"sourceLayer",void 0),Object(n.a)([Object(a.b)({value:null,types:p.e})],g.prototype,"symbol",null),Object(n.a)([Object(a.b)({type:Boolean,value:!0})],g.prototype,"visible",null),g=s=Object(n.a)([Object(c.a)("esri.Graphic")],g),(g||(g={})).generateUID=b.a;var f=g;t.a=f},1251:function(e,t,r){"use strict";r.r(t),r.d(t,"PropertySearch",(function(){return O}));var s=r(0),n=r(1047),i=(r(1104),r(106)),o=r(868),a=r(91);let c,l,u,d;const h=(e,t,r,s,n,i,a,c,l)=>new o.a({placeholder:e,name:t,maxSuggestions:6,getSuggestions:e=>((e,t,r,s,n,i,o,a)=>{const c=[];return i.forEach((t=>{o?c.push(`${t} LIKE '${e.suggestTerm.toUpperCase()}%'`):c.push(`${t} LIKE '%${e.suggestTerm.toUpperCase()}%'`)})),r.queryFeatures({returnDistinctValues:!0,outFields:s,returnGeometry:!1,num:a.activeSource?50:6,where:c.join(" OR ")}).then((r=>((e,t,r)=>{const s=[],n=[];for(let i=0;i<r.length;i++)0===r[i].attributes[t].indexOf(e)?s.push(r[i]):n.push(r[i]);return s.sort(),n.sort(),s.concat(n)})(e.suggestTerm.toUpperCase(),i[0],r.features).map((r=>({key:t,text:r.getAttribute(s[0]),sourceIndex:e.sourceIndex})))))})(e,t,r,s,0,i,a,l),getResults:e=>r.queryFeatures({where:`${n[0]} = '${e.suggestResult.text.toUpperCase()}'`,outFields:c}).then((e=>e.features.map((e=>({feature:e,name:t})))))}),p=e=>a.c((t=>{const r=c.relationships.find((e=>"CONDO_PROPERTY"===e.name));c.queryRelatedFeatures({relationshipId:null===r||void 0===r?void 0:r.id,objectIds:e,outFields:["OBJECTID","REID"],returnGeometry:!1}).then((e=>{const r=[];for(const t in e)e[t].features.forEach((e=>{r.push(e.getAttribute("OBJECTID"))}));d.queryFeatures({objectIds:r,outFields:["*"],returnGeometry:!0,outSpatialReference:{wkid:102100}}).then((e=>{u.view.goTo({target:e.features}),t(e.features)}))}))})),b=(e,t)=>a.c(((r,s)=>{const n={outFields:["*"]};""!=e?n.where=e:n.objectIds=t,c.queryFeatures(n).then((e=>{const t=[];e.features.forEach((e=>{t.push(e.getAttribute("OBJECTID"))})),p(t).then((t=>{if(e.features.length>1&&r({properties:t,features:e.features}),1===e.features.length){const s=e.features[0];s.geometry=t[0].geometry,s.layer=c,r({properties:t,features:e.features,feature:s})}s("no results")}))}))})),g=(e,t,r,s)=>a.c((n=>{var i;e||"Owner"!==t||(e=c),!e&&["Site Address","Street Name"].includes(t)&&(e=l);const o=[];r.forEach((e=>{o.push(e.feature.getAttribute("OBJECTID"))}));let u="";4===(null===(i=e)||void 0===i?void 0:i.layerId)?(u=`${"Street Name"===t?"FULL_STREET_NAME":"SITE_ADDRESS"} = '${s}'`,((e,t)=>a.c((r=>{const s=t.relationships.find((e=>"ADDRESSES_CONDO"===e.name)),n={outFields:["*"],objectIds:e,relationshipId:null===s||void 0===s?void 0:s.id};t.queryRelatedFeatures(n).then((e=>{const t=[],s=[];for(const r in e)e[r].features.forEach((e=>{t.push(e.getAttribute("OBJECTID")),s.push(e)}));p(t).then((e=>{if(s.length>1&&r({properties:e,features:s}),1===s.length){const t=s[0];t.geometry=e[0].geometry,t.layer=c,r({properties:e,features:s,feature:t})}}))}))})))(o,e).then((e=>{n(e)}))):b(u,o).then((e=>{n(e)}))})),f=e=>a.c((t=>{if(!u.viewModel.selectedSuggestion){let t=[];var r;if(u.activeSource)t=null===(r=u.activeSource)||void 0===r?void 0:r.searchFields;((e,t)=>{const r=[];t.queryFeatures({where:e,outFields:["*"]}).then((e=>{var t;e.features.forEach((e=>{r.push(e.getAttribute("OBJECTID"))})),p(r),e.features.length,e.features.length,null===(t=document.querySelector(".esri-search--show-suggestions"))||void 0===t||t.classList.remove("esri-search--show-suggestions")}))})(((e,t)=>{let r="";return e.length?(e.includes("OWNER")&&(r=`OWNER like '_%${t.toUpperCase()}%'`),e.includes("PIN_NUM")&&(r=`PIN_NUM like '%${t.toUpperCase()}%'`),e.includes("REID")&&(r=`REID like '%${t.toUpperCase()}%'`)):r=`OWNER like '%${t.toUpperCase()}%' OR REID like '${t.toUpperCase()}%' OR PIN_NUM like '${t.toUpperCase()}%'`,r})(t,e.searchTerm),c)}e.numResults&&g(e.results[0].source.layer,e.results[0].source.name,e.results[0].results,e.searchTerm).then((e=>{t(e)}))})),m=e=>(19===e.length&&"."===e[4]&&[e[7],e[10],e[15]].every((e=>" "===e))&&(e=e.substring(0,4)+e.substring(8,10)+e.substring(11,15)),e);var y=r(2);const O=e=>{const t=Object(s.useRef)(null),r=Object(s.useRef)(),[o,a]=Object(s.useState)(!1);return Object(s.useEffect)((()=>{if(!o){t.current;const o=new n.a({container:t.current,view:e.view,allPlaceholder:"Address, owner, PIN, or REID",includeDefaultSources:!1,popupEnabled:!1});r.current=o,o.sources=(s=e.addressTable,p=e.condosTable,b=e.propertyLayer,c=p,l=s,d=b,u=g=o,new i.a([h("example: 222 W HARGETT ST","Site Address",s,["ADDRESS"],["ADDRESS"],["ADDRESS"],!0,["ADDRESS","REA_REID","OBJECTID"],g),h("example: SMITH, JOHN","Owner",p,["OWNER"],["OWNER"],["OWNER"],!1,["OWNER","OBJECTID"],g),h("PIN","PIN",p,["PIN_NUM"],["PIN_NUM"],["PIN_NUM"],!0,["PIN_NUM","OBJECTID"],g),h("REID","REID",p,["REID"],["REID"],["REID"],!0,["REID","OBJECTID"],g),h("example: W HARGETT ST","Street Name",s,["STREET","ADDR_LIST"],["STREET"],["STREET","STREET_NODIR"],!1,["STREET","REA_REID","OBJECTID"],g)])),o.on("search-complete",(t=>{f(t).then((t=>{e.searchComplete(t)}))})),o.watch("searchTerm",(e=>{e!=m(e)&&(o.searchTerm=m(e))})),a(!0)}var s,p,b,g}),[e.view,e.addressTable,e.condosTable,e.propertyLayer,e.searchComplete]),Object(s.useEffect)((()=>{"OBJECTID IS NULL"!=e.where&&b(e.where,[]).then((t=>{e.searchComplete(t)})).catch((e=>{console.log(e)}))}),[e.where]),Object(y.jsxs)("div",{className:"flex",children:[Object(y.jsx)("div",{ref:t}),Object(y.jsx)("calcite-action",{icon:"trash",scale:"s",onClick:()=>{var t;null===(t=r.current)||void 0===t||t.clear(),e.clear()}})]})};t.default=O},131:function(e,t,r){"use strict";var s,n=r(80),i=(r(78),r(90)),o=(r(79),r(86),r(83)),a=r(103),c=r(82),l=(r(81),r(84),r(85),r(88));let u=s=class extends l.a{constructor(e){super(e),this.name=null,this.code=null}clone(){return new s({name:this.name,code:this.code})}};Object(n.a)([Object(o.b)({type:String,json:{write:!0}})],u.prototype,"name",void 0),Object(n.a)([Object(o.b)({type:[String,Number],json:{write:!0}})],u.prototype,"code",void 0),u=s=Object(n.a)([Object(c.a)("esri.layers.support.CodedValue")],u);var d,h=u,p=r(116);let b=d=class extends p.a{constructor(e){super(e),this.codedValues=null,this.type="coded-value"}getName(e){let t=null;if(this.codedValues){const r=String(e);this.codedValues.some((e=>(String(e.code)===r&&(t=e.name),!!t)))}return t}clone(){return new d({codedValues:Object(i.a)(this.codedValues),name:this.name})}};Object(n.a)([Object(o.b)({type:[h],json:{write:!0}})],b.prototype,"codedValues",void 0),Object(n.a)([Object(a.a)({codedValue:"coded-value"})],b.prototype,"type",void 0),b=d=Object(n.a)([Object(c.a)("esri.layers.support.CodedValueDomain")],b);var g=b;t.a=g},133:function(e,t,r){"use strict";var s,n=r(80),i=(r(78),r(79),r(86),r(83),r(103)),o=r(82),a=(r(81),r(84),r(85),r(116));let c=s=class extends a.a{constructor(e){super(e),this.type="inherited"}clone(){return new s}};Object(n.a)([Object(i.a)({inherited:"inherited"})],c.prototype,"type",void 0),c=s=Object(n.a)([Object(o.a)("esri.layers.support.InheritedDomain")],c);var l=c;t.a=l},134:function(e,t,r){"use strict";var s,n=r(80),i=(r(78),r(79),r(86),r(83)),o=r(103),a=r(82),c=(r(81),r(84),r(85),r(116));let l=s=class extends c.a{constructor(e){super(e),this.maxValue=null,this.minValue=null,this.type="range"}clone(){return new s({maxValue:this.maxValue,minValue:this.minValue,name:this.name})}};Object(n.a)([Object(i.b)({type:Number,json:{type:[Number],read:{source:"range",reader:(e,t)=>t.range&&t.range[1]},write:{enabled:!1,overridePolicy(){return{enabled:null!=this.maxValue&&null==this.minValue}},target:"range",writer(e,t,r){t[r]=[this.minValue||0,e]}}}})],l.prototype,"maxValue",void 0),Object(n.a)([Object(i.b)({type:Number,json:{type:[Number],read:{source:"range",reader:(e,t)=>t.range&&t.range[0]},write:{target:"range",writer(e,t,r){t[r]=[e,this.maxValue||0]}}}})],l.prototype,"minValue",void 0),Object(n.a)([Object(o.a)({range:"range"})],l.prototype,"type",void 0),l=s=Object(n.a)([Object(a.a)("esri.layers.support.RangeDomain")],l);var u=l;t.a=u},135:function(e,t,r){"use strict";r.d(t,"a",(function(){return n})),r.d(t,"b",(function(){return o})),r.d(t,"c",(function(){return i}));var s=r(81);function n(e,t){let r={query:e};return t&&(r={...t,...r},r.query={...r.query,...t.query}),r}function i(e){return"string"==typeof e?Object(s.J)(e):e}function o(e,t,r){const s={};for(const n in e){if("declaredClass"===n)continue;const i=e[n];if(null!=i&&"function"!=typeof i)if(Array.isArray(i)){s[n]=[];for(let e=0;e<i.length;e++)s[n][e]=o(i[e])}else if("object"==typeof i)if(i.toJSON){const e=i.toJSON(r&&r[n]);s[n]=t?e:JSON.stringify(e)}else s[n]=t?i:JSON.stringify(i);else s[n]=i}return s}},144:function(e,t,r){"use strict";r.d(t,"a",(function(){return s})),r.d(t,"b",(function(){return h})),r.d(t,"c",(function(){return d})),r.d(t,"d",(function(){return u})),r.d(t,"e",(function(){return l}));r(78);var s,n,i=r(116),o=r(131),a=r(133),c=r(134);function l(e,t){switch(e.type){case"range":{const r="range"in e?e.range[0]:e.minValue,n="range"in e?e.range[1]:e.maxValue;if(+t<r||+t>n)return s.VALUE_OUT_OF_RANGE;break}case"coded-value":case"codedValue":if(null==e.codedValues||e.codedValues.every((e=>null==e||e.code!==t)))return s.INVALID_CODED_VALUE}return null}(n=s||(s={})).VALUE_OUT_OF_RANGE="domain-validation-error::value-out-of-range",n.INVALID_CODED_VALUE="domain-validation-error::invalid-coded-value";const u={key:"type",base:i.a,typeMap:{range:c.a,"coded-value":o.a,inherited:a.a}};function d(e){if(e&&"range"===e.type)return{min:"range"in e?e.range[0]:e.minValue,max:"range"in e?e.range[1]:e.maxValue}}function h(e){if(!e||!e.type)return null;switch(e.type){case"range":return c.a.fromJSON(e);case"codedValue":return o.a.fromJSON(e);case"inherited":return a.a.fromJSON(e)}return null}},147:function(e,t,r){"use strict";r.d(t,"a",(function(){return u})),r.d(t,"b",(function(){return l})),r.d(t,"c",(function(){return a})),r.d(t,"d",(function(){return c})),r.d(t,"e",(function(){return o}));var s=r(87),n=r(95);r(98);let i;async function o(){return i||(i=(async()=>{const e=await Promise.all([r.e(32),r.e(129)]).then(r.bind(null,381));return await e.arcade.load(),{arcade:e.arcade,arcadeUtils:e,Dictionary:e.Dictionary,Feature:e.arcadeFeature}})()),i}const a=(e,t,r)=>u.create(e,t,r,null,["$feature"]),c=(e,t,r)=>u.create(e,t,r,null,["$feature","$view"]),l=(e,t,r,s)=>u.create(e,t,r,s,["$feature","$view"]);class u{constructor(e,t,r,s,n,i,o,a){this.script=e,this.evaluate=n,this.fields=o,this._syntaxTree=s,this._arcade=t,this._arcadeDictionary=r,this._arcadeFeature=i,this._spatialReference=a,this._referencesGeometry=t.scriptTouchesGeometry(this._syntaxTree),this._referencesScale=this._arcade.referencesMember(this._syntaxTree,"scale")}static async create(e,t,r,i,a,c){const{arcade:l,Feature:d,Dictionary:h}=await o(),p=n.a.fromJSON(t),b=l.parseScript(e,c),g=a.reduce(((e,t)=>({...e,[t]:null})),{});let f=null;Object(s.k)(i)&&(f=new h(i),f.immutable=!0,g.$config=null);const m=l.scriptUsesGeometryEngine(b)&&l.enableGeometrySupport(),y=l.scriptUsesFeatureSet(b)&&l.enableFeatureSetSupport(),O=l.scriptIsAsync(b)&&l.enableAsyncSupport(),j={vars:g,spatialReference:p,useAsync:!!O},v=new h;v.immutable=!1,v.setField("scale",0);const S=l.compileScript(b,j);return await Promise.all([m,y,O]),new u(e,l,h,b,(e=>("$view"in e&&e.$view&&(v.setField("scale",e.$view.scale),e.$view=v),f&&(e.$config=f),S({vars:e,spatialReference:p}))),new d,r,p)}repurposeFeature(e){return e.geometry&&!e.geometry.spatialReference&&(e.geometry.spatialReference=this._spatialReference),this._arcadeFeature.repurposeFromGraphicLikeObject(e.geometry,e.attributes,{fields:this.fields}),this._arcadeFeature}repurposeAdapter(e){return this._arcadeFeature.repurposeFromAdapter(e,{fields:this.fields}),this._arcadeFeature}createDictionary(){return new this._arcadeDictionary}referencesMember(e){return this._arcade.referencesMember(this._syntaxTree,e)}referencesFunction(e){return this._arcade.referencesFunction(this._syntaxTree,e)}referencesGeometry(){return this._referencesGeometry}referencesScale(){return this._referencesScale}extractFieldLiterals(e){return this._arcade.extractFieldLiterals(this._syntaxTree,e)}}},168:function(e,t,r){"use strict";r.d(t,"a",(function(){return a})),r.d(t,"b",(function(){return c})),r.d(t,"c",(function(){return l})),r.d(t,"d",(function(){return u})),r.d(t,"e",(function(){return h})),r.d(t,"f",(function(){return p})),r.d(t,"g",(function(){return d}));var s=r(107),n=r(95),i=r(129);function o(e){return new n.a({wkt:`GEOCCS["Spherical geocentric",\n    DATUM["Not specified",\n      SPHEROID["Sphere",${e.radius},0]],\n    PRIMEM["Greenwich",0.0,\n      AUTHORITY["EPSG","8901"]],\n    UNIT["m",1.0],\n    AXIS["Geocentric X",OTHER],\n    AXIS["Geocentric Y",EAST],\n    AXIS["Geocentric Z",NORTH]\n  ]`})}const a=o(i.a),c=o(i.b),l=o(i.c),u=new n.a({wkt:`GEOCCS["WGS 84",\n  DATUM["WGS_1984",\n    SPHEROID["WGS 84",${i.a.radius},298.257223563,\n      AUTHORITY["EPSG","7030"]],\n    AUTHORITY["EPSG","6326"]],\n  PRIMEM["Greenwich",0,\n    AUTHORITY["EPSG","8901"]],\n  UNIT["m",1.0,\n    AUTHORITY["EPSG","9001"]],\n  AXIS["Geocentric X",OTHER],\n  AXIS["Geocentric Y",OTHER],\n  AXIS["Geocentric Z",NORTH],\n  AUTHORITY["EPSG","4978"]\n]`});function d(e){return e&&(Object(s.g)(e)||e===c)?c:e&&(Object(s.h)(e)||e===l)?l:a}function h(e){return e&&(Object(s.g)(e)||e===c)?i.b:e&&(Object(s.h)(e)||e===l)?i.c:i.a}function p(e){return Object(s.k)(e)?i.b:Object(s.l)(e)?i.c:i.a}},185:function(e,t,r){"use strict";r.d(t,"a",(function(){return n}));let s=0;function n(){return++s}},259:function(e,t,r){"use strict";function s(){return function(e,t){if(!e[t])throw new TypeError(`Cannot auto bind undefined function '${t}'`);return{value:n(e[t])}}}function n(e){return function(t,...r){!function(e){const{type:t}=e;return e instanceof KeyboardEvent||"keyup"===t||"keydown"===t||"keypress"===t}(t)?e.call(this,t,...r):"Enter"!==t.key&&" "!==t.key||(t.preventDefault(),t.stopPropagation(),t.target.click())}}r.d(t,"a",(function(){return s}))},299:function(e,t,r){"use strict";function s(e){return t=>{t.hasOwnProperty("_delegatedEventNames")||(t._delegatedEventNames=t._delegatedEventNames?t._delegatedEventNames.slice():[]);const r=t._delegatedEventNames,s=Array.isArray(e)?e:function(e){return e.split(",").map((e=>e.trim()))}(e);r.push(...s)}}r.d(t,"a",(function(){return s}))},318:function(e,t,r){"use strict";var s=r(80),n=(r(78),r(79),r(86),r(83)),i=r(82),o=r(81),a=(r(84),r(85),r(94));let c=class extends a.a{constructor(...e){super(...e),this.requestOptions=null,this.url=null}normalizeCtorArgs(e,t){return"string"!=typeof e?e:{url:e,...t}}get parsedUrl(){return this._parseUrl(this.url)}_parseUrl(e){return e?Object(o.J)(e):null}_encode(e,t,r){const s={};for(const n in e){if("declaredClass"===n)continue;const i=e[n];if(null!=i&&"function"!=typeof i)if(Array.isArray(i)){s[n]=[];for(let e=0;e<i.length;e++)s[n][e]=this._encode(i[e])}else if("object"==typeof i)if(i.toJSON){const e=i.toJSON(r&&r[n]);s[n]=t?e:JSON.stringify(e)}else s[n]=t?i:JSON.stringify(i);else s[n]=i}return s}};Object(s.a)([Object(n.b)({readOnly:!0})],c.prototype,"parsedUrl",null),Object(s.a)([Object(n.b)()],c.prototype,"requestOptions",void 0),Object(s.a)([Object(n.b)({type:String})],c.prototype,"url",void 0),c=Object(s.a)([Object(i.a)("esri.tasks.Task")],c);var l=c;t.a=l},481:function(e,t,r){"use strict";r.d(t,"a",(function(){return n})),r.d(t,"b",(function(){return i}));var s=r(87);function n(e){return e&&"function"==typeof e.highlight}function i(e,t,r){return Object(s.j)(e)||e>r&&(0===t||e<t)}},498:function(e,t,r){"use strict";r.d(t,"a",(function(){return o}));var s=r(80),n=(r(78),r(79),r(86),r(83)),i=r(82);r(81),r(84),r(85);const o=e=>{let t=class extends e{constructor(...e){super(...e),this.goToOverride=null,this.view=null}callGoTo(e){const{view:t}=this;return this.goToOverride?this.goToOverride(t,e):t.goTo(e.target,e.options)}};return Object(s.a)([Object(n.b)()],t.prototype,"goToOverride",void 0),Object(s.a)([Object(n.b)()],t.prototype,"view",void 0),t=Object(s.a)([Object(i.a)("esri.widgets.support.GoTo")],t),t}},540:function(e,t,r){"use strict";var s=r(80),n=(r(78),r(79),r(86),r(83)),i=r(82),o=(r(81),r(84),r(85),r(88)),a=r(96);let c=class extends o.a{constructor(e){super(e),this.geometries=null,this.outSpatialReference=null,this.transformation=null,this.transformForward=null}toJSON(){const e=this.geometries.map((function(e){return e.toJSON()})),t=this.geometries[0],r={};return r.outSR=this.outSpatialReference.wkid||JSON.stringify(this.outSpatialReference.toJSON()),r.inSR=t.spatialReference.wkid||JSON.stringify(t.spatialReference.toJSON()),r.geometries=JSON.stringify({geometryType:Object(a.c)(t),geometries:e}),this.transformation&&(r.transformation=this.transformation.wkid||JSON.stringify(this.transformation)),null!=this.transformForward&&(r.transformForward=this.transformForward),r}};Object(s.a)([Object(n.b)()],c.prototype,"geometries",void 0),Object(s.a)([Object(n.b)({json:{read:{source:"outSR"}}})],c.prototype,"outSpatialReference",void 0),Object(s.a)([Object(n.b)()],c.prototype,"transformation",void 0),Object(s.a)([Object(n.b)()],c.prototype,"transformForward",void 0),c=Object(s.a)([Object(i.a)("esri.tasks.support.ProjectParameters")],c);var l=c;t.a=l},605:function(e,t,r){"use strict";r.d(t,"a",(function(){return b})),r.d(t,"b",(function(){return u})),r.d(t,"c",(function(){return d})),r.d(t,"d",(function(){return h})),r.d(t,"e",(function(){return p})),r.d(t,"f",(function(){return g})),r.d(t,"g",(function(){return f}));var s=r(79),n=r(86),i=r(81),o=r(106),a=r(619),c=r(558);const l=s.a.getLogger("esri.support.basemapUtils");function u(){return{}}function d(e){for(const t in e){const r=e[t];!1===(null==r?void 0:r.destroyed)&&r.destroy(),delete e[t]}}function h(e,t){var r;let s;if("string"==typeof e){if(!(e in a.a)){const t=Object.keys(a.a).map((e=>`"${e}"`)).join(", ");return l.warn(`Unable to find basemap definition for: ${e}. Try one of these: ${t}`),null}t&&(s=t[e]),s||(s=c.default.fromId(e),t&&(t[e]=s))}else s=Object(n.m)(c.default,e);return null!=(r=s)&&r.destroyed&&(l.warn("The provided basemap is already destroyed",{basemap:s}),s=null),s}function p(e){let t=null;const r=O(e),s=!r.baseLayers.length;for(const n in a.a){const e=_(r,S(a.a[n]),{mustMatchReferences:s});if("equal"===e){t=n;break}"base-layers-equal"===e&&(t=n)}return t}function b(e,t){return e===t||"equal"===_(O(e),O(t),{mustMatchReferences:!0})}function g(e){return!(null==e||!e.baseLayers.concat(e.referenceLayers).some(f))}function f(e){if(y(e.url))return!0;if("vector-tile"===e.type)for(const t in e.sourceNameToSource){const r=e.sourceNameToSource[t];if(y(null==r?void 0:r.sourceUrl))return!0}return!1}const m=/^(basemaps|ibasemaps).*-api\.arcgis\.com$/i;function y(e){if(!e)return!1;const t=new i.a(Object(i.z)(e));return m.test(t.authority)}function O(e){return e?!e.loaded&&e.resourceInfo?S(e.resourceInfo.data):{baseLayers:j(e.baseLayers),referenceLayers:j(e.referenceLayers)}:null}function j(e){return(o.a.isCollection(e)?e.toArray():e).map(v)}function v(e){return{type:e.type,url:T("urlTemplate"in e&&e.urlTemplate||e.url||"styleUrl"in e&&e.styleUrl),minScale:"minScale"in e&&null!=e.minScale?e.minScale:0,maxScale:"maxScale"in e&&null!=e.maxScale?e.maxScale:0,opacity:null!=e.opacity?e.opacity:1,visible:null==e.visible||!!e.visible}}function S(e){return e?{baseLayers:w(e.baseMapLayers.filter((e=>!e.isReference))),referenceLayers:w(e.baseMapLayers.filter((e=>e.isReference)))}:null}function w(e){return e.map((e=>function(e){let t;switch(e.layerType){case"VectorTileLayer":t="vector-tile";break;case"ArcGISTiledMapServiceLayer":t="tile";break;default:t="unknown"}return{type:t,url:T(e.templateUrl||e.urlTemplate||e.styleUrl||e.url),minScale:null!=e.minScale?e.minScale:0,maxScale:null!=e.maxScale?e.maxScale:0,opacity:null!=e.opacity?e.opacity:1,visible:null==e.visibility||!!e.visibility}}(e)))}function _(e,t,r){return null!=e!=(null!=t)?"not-equal":e?x(e.baseLayers,t.baseLayers)?x(e.referenceLayers,t.referenceLayers)?"equal":r.mustMatchReferences?"not-equal":"base-layers-equal":"not-equal":"equal"}function x(e,t){if(e.length!==t.length)return!1;for(let r=0;r<e.length;r++)if(!I(e[r],t[r]))return!1;return!0}function I(e,t){return e.type===t.type&&e.url===t.url&&e.minScale===t.minScale&&e.maxScale===t.maxScale&&e.visible===t.visible&&e.opacity===t.opacity}function T(e){return e?Object(i.C)(e).replace(/^\s*https?:/i,"").toLowerCase():""}},607:function(e,t,r){"use strict";r.d(t,"a",(function(){return i})),r.d(t,"b",(function(){return n}));var s=r(96);function n(e){return{geometryType:Object(s.c)(e[0]),geometries:e.map((e=>e.toJSON()))}}function i(e,t,r){const n=Object(s.b)(t);return e.map((e=>{const t=n.fromJSON(e);return t.spatialReference=r,t}))}},639:function(e,t,r){"use strict";r.d(t,"a",(function(){return i})),r.d(t,"b",(function(){return o})),r.d(t,"c",(function(){return a}));r(147);var s=r(558),n=r(605);const i={light:["streets","gray","topo","terrain","national-geographic","oceans","osm","gray-vector","streets-vector","topo-vector","streets-relief-vector","streets-navigation-vector"],dark:["satellite","hybrid","dark-gray","dark-gray-vector","streets-night-vector"]};function o(e,t=i){for(const r in t)if(t[r].indexOf(e)>-1)return r}function a(e,t,r=!0){let i=null;return"string"==typeof e&&t.indexOf(e)>-1?i=e:e instanceof s.default&&(i=Object(n.e)(e)),r?i||"gray":i}},640:function(e,t,r){"use strict";r.d(t,"a",(function(){return s}));const s={type:String,json:{read:{source:"token"},write:{target:"token"}}}},676:function(e,t,r){"use strict";r.d(t,"a",(function(){return s}));const s=new(r(97).a)({MGRS:"mgrs",USNG:"usng",UTM:"utm",GeoRef:"geo-ref",GARS:"gars",DMS:"dms",DDM:"ddm",DD:"dd"})},677:function(e,t,r){"use strict";r.d(t,"a",(function(){return o}));var s=r(102);r(639);const n=["streets","gray","topo","terrain","national-geographic","oceans","osm","gray-vector","streets-vector","topo-vector","streets-relief-vector","streets-navigation-vector"],i=["satellite","hybrid","dark-gray","dark-gray-vector","streets-night-vector"];[].concat(n).concat(i);function o(e,t){return Math.ceil(function(e){const t=e.width,r=e.height;let n=e.pixelSizeAt(e.toMap(Object(s.f)(.5*t,.5*r),{exclude:[]}));if(n<=0&&(n=e.pixelSizeAt(e.toMap(Object(s.f)(.5*t,.95*r),{exclude:[]})),n<=0)){const t=e.camera.position.clone();t.z=0,n=2*e.pixelSizeAt(t)}return n}(t)*Object(s.h)(Object(s.k)(e)))}},678:function(e,t,r){"use strict";r.d(t,"a",(function(){return o})),r.d(t,"b",(function(){return n}));var s=r(113);function n(e,t){const r=t||e.extent,n=e.width,i=Object(s.f)(r&&r.spatialReference);return r&&n?r.width/n*i*s.j*96:0}function i(e,t){return e/(Object(s.f)(t)*s.j*96)}function o(e,t){const r=e.extent,s=e.width,n=i(t,r.spatialReference);return r.clone().expand(n*s/r.width)}},705:function(e,t,r){"use strict";r.d(t,"a",(function(){return a})),r.d(t,"b",(function(){return l})),r.d(t,"c",(function(){return u})),r.d(t,"d",(function(){return d})),r.d(t,"e",(function(){return c}));var s=r(90),n=r(87),i=r(639);var o=class{constructor(e){this.name=null,this.label=null,this.description=null,this.supportedBasemaps=null,this.basemapGroups=null,this.schemes=null;const{name:t,label:r,description:s,schemes:n}=e;this.name=t,this.label=r,this.description=s,this.schemes=n;const o=e.basemapGroups||i.a;let a=[];if(o)for(const i in o)a=a.concat(o[i]);this.supportedBasemaps=a,this.basemapGroups=o}isBasemapSupported(e){const t=Object(i.c)(e,this.supportedBasemaps);return!!(t&&this.supportedBasemaps.indexOf(t)>-1)}getRawSchemes(e){const{basemapId:t,basemapTheme:r}=function(e,t,r){let s=null,o=null;if(t&&(s=Object(i.c)(t,e,!1),s)){const e=Object(i.b)(s);Object(n.k)(e)&&(o=e)}return!s&&r&&(s="dark"===r?"dark-gray":"gray",o=r),s||o||(s="gray",o="light"),{basemapId:s,basemapTheme:o}}(this.supportedBasemaps,e.basemap,e.basemapTheme);let o=r;if(t){const e=Object(i.b)(t,this.basemapGroups);Object(n.k)(e)&&(o=e)}let a=e.geometryType;"multipoint"===a?a="point":"mesh"===a&&(a="polygon");const c=this.schemes[a]||this.schemes.default;return{schemesInfo:Object(s.a)(c[o]),basemapId:t,basemapTheme:r}}};function a(e){const t=e.themeDictionary,r=new Map;for(const s in t){const e=t[s];r.set(s,new o(e))}return r}function c(e,t){const r=[];return e.forEach((e=>{e.isBasemapSupported(t)&&r.push({name:e.name,label:e.label,description:e.description,basemaps:[...e.supportedBasemaps]})})),r}function l(e,t){if(!e)return;if(!t)return;let r=null;const s=[t.primaryScheme,...t.secondarySchemes];for(const n of s)if(n.name.toLowerCase()===e.toLowerCase()){r=n;break}return r}function u(e,t,r){if(!e&&!t)return[];if(!r)return[];const s=!(e&&e.length),n=!(t&&t.length),i=[r.primaryScheme,...r.secondarySchemes],o=[];for(const a of i){const r=!!s||e.some((e=>a.tags.indexOf(e)>-1)),i=!n&&t.some((e=>a.tags.indexOf(e)>-1));r&&!i&&o.push(a)}return o}function d(e){const t=e.theme;if(t)return t.getRawSchemes({basemap:e.basemap,geometryType:e.geometryType,basemapTheme:e.basemapTheme})}},727:function(e,t,r){"use strict";r.d(t,"a",(function(){return o}));var s=r(97),n=r(96);const i=new s.a({109006:"centimeters",9102:"decimal-degrees",109005:"decimeters",9002:"feet",109009:"inches",9036:"kilometers",9001:"meters",9035:"miles",109007:"millimeters",109012:"nautical-miles",9096:"yards"});function o(e){const{geometries:t,deviationUnit:r,maxDeviation:s}=e.toJSON(),o={maxDeviation:s};return t&&t.length&&(o.geometries=JSON.stringify({geometryType:Object(n.c)(t[0]),geometries:t}),o.sr=JSON.stringify(t[0].spatialReference)),i.write(r,o,"deviationUnit"),o}},728:function(e,t,r){"use strict";var s=r(80),n=(r(78),r(79),r(86)),i=r(83),o=r(82),a=(r(81),r(84),r(85),r(88)),c=r(96);let l=class extends a.a{constructor(e){super(e),this.deviationUnit=null,this.geometries=null,this.maxDeviation=null}};Object(s.a)([Object(i.b)({type:String,json:{write:!0}})],l.prototype,"deviationUnit",void 0),Object(s.a)([Object(i.b)({json:{read:{reader:e=>e?e.map((e=>Object(c.a)(e))):null},write:{writer:(e,t)=>{t.geometries=e.map((e=>e.toJSON()))}}}})],l.prototype,"geometries",void 0),Object(s.a)([Object(i.b)({type:Number,json:{write:!0}})],l.prototype,"maxDeviation",void 0),l=Object(s.a)([Object(o.a)("esri.tasks.support.GeneralizeParameters")],l),l.from=Object(n.m)(l);var u=l;t.a=u},729:function(e,t,r){"use strict";r.d(t,"a",(function(){return n}));const s=new(r(97).a)({preserveShape:"preserve-shape"});function n(e){const{polylines:t,lengthUnit:r,geodesic:n,calculationType:i}=e.toJSON(),o={};o.polylines=JSON.stringify(t);const a=e.polylines[0].spatialReference;return o.sr=a.wkid?a.wkid:JSON.stringify(a.toJSON()),r&&(o.lengthUnit=r),n&&(o.geodesic=n),i&&(o.calculationType=s.toJSON(i)),o}},730:function(e,t,r){"use strict";var s=r(80),n=(r(78),r(79),r(86)),i=r(83),o=r(82),a=(r(81),r(84),r(85),r(88)),c=r(132),l=r(96);r(98);let u=class extends a.a{constructor(e){super(e),this.calculationType=null,this.geodesic=null,this.lengthUnit=null,this.polylines=null}};Object(s.a)([Object(i.b)({type:String,json:{write:!0}})],u.prototype,"calculationType",void 0),Object(s.a)([Object(i.b)({type:Boolean,json:{write:!0}})],u.prototype,"geodesic",void 0),Object(s.a)([Object(i.b)({json:{write:!0}})],u.prototype,"lengthUnit",void 0),Object(s.a)([Object(i.b)({type:[c.a],json:{read:{reader:e=>e?e.map((e=>Object(l.a)(e))):null},write:{writer:(e,t)=>{t.polylines=e.map((e=>e.toJSON()))}}}})],u.prototype,"polylines",void 0),u=Object(s.a)([Object(o.a)("esri.tasks.support.LengthsParameters")],u),u.from=Object(n.m)(u);var d=u;t.a=d},731:function(e,t,r){"use strict";r.d(t,"a",(function(){return a}));var s=r(97),n=r(96);const i=new s.a({esriGeometryOffsetBevelled:"bevelled",esriGeometryOffsetMitered:"mitered",esriGeometryOffsetRounded:"rounded"}),o=new s.a({9001:"meters",9002:"feet",9036:"kilometers",9093:"miles",109012:"nautical-miles",109001:"yards"});function a(e){const{geometries:t,bevelRatio:r,offsetDistance:s,offsetHow:a,offsetUnit:c}=e.toJSON(),l={bevelRatio:r,offsetDistance:s};return t&&t.length&&(l.geometries=JSON.stringify({geometryType:Object(n.c)(t[0]),geometries:t}),l.sr=JSON.stringify(t[0].spatialReference)),a&&(l.offsetHow=i.toJSON(a)),c&&(l.offsetUnit=o.toJSON(c)),l}},732:function(e,t,r){"use strict";var s=r(80),n=(r(78),r(79),r(86)),i=r(83),o=r(82),a=(r(81),r(84),r(85),r(88)),c=r(96);let l=class extends a.a{constructor(e){super(e),this.bevelRatio=null,this.geometries=null,this.offsetDistance=null,this.offsetHow=null,this.offsetUnit=null}};Object(s.a)([Object(i.b)({type:Number,json:{write:!0}})],l.prototype,"bevelRatio",void 0),Object(s.a)([Object(i.b)({json:{read:{reader:e=>e?e.map((e=>Object(c.a)(e))):null},write:{writer:(e,t)=>{t.geometries=e.map((e=>e.toJSON()))}}}})],l.prototype,"geometries",void 0),Object(s.a)([Object(i.b)({type:Number,json:{write:!0}})],l.prototype,"offsetDistance",void 0),Object(s.a)([Object(i.b)({type:String,json:{write:!0}})],l.prototype,"offsetHow",void 0),Object(s.a)([Object(i.b)({type:String,json:{write:!0}})],l.prototype,"offsetUnit",void 0),l=Object(s.a)([Object(o.a)("esri.tasks.support.OffsetParameters")],l),l.from=Object(n.m)(l);var u=l;t.a=u},733:function(e,t,r){"use strict";r.d(t,"a",(function(){return u}));var s=r(86),n=r(96),i=r(100),o=r(540),a=r(135),c=r(607);const l=Object(s.m)(o.a);async function u(e,t,r){t=l(t);const s=Object(a.c)(e),o={...s.query,f:"json",...t.toJSON()},u=t.outSpatialReference,d=Object(n.c)(t.geometries[0]),h=Object(a.a)(o,r);return Object(i.default)(s.path+"/project",h).then((({data:{geometries:e}})=>Object(c.a)(e,d,u)))}},734:function(e,t,r){"use strict";r.d(t,"a",(function(){return o}));var s=r(97),n=r(96);const i=new s.a({esriGeometryRelationCross:"cross",esriGeometryRelationDisjoint:"disjoint",esriGeometryRelationIn:"in",esriGeometryRelationInteriorIntersection:"interior-intersection",esriGeometryRelationIntersection:"intersection",esriGeometryRelationLineCoincidence:"line-coincidence",esriGeometryRelationLineTouch:"line-touch",esriGeometryRelationOverlap:"overlap",esriGeometryRelationPointTouch:"point-touch",esriGeometryRelationTouch:"touch",esriGeometryRelationWithin:"within",esriGeometryRelationRelation:"relation"});function o(e){const{geometries1:t,geometries2:r,relation:s,relationParameter:o}=e.toJSON(),a={};if(t&&t.length){a.geometries1=JSON.stringify({geometryType:Object(n.c)(t[0]),geometries:t});const e=t[0].spatialReference;a.sr=e.wkid?e.wkid:JSON.stringify(e)}return r&&r.length>0&&(a.geometries2=JSON.stringify({geometryType:Object(n.c)(r[0]),geometries:r})),s&&(a.relation=i.toJSON(s)),o&&(a.relationParam=o),a}},735:function(e,t,r){"use strict";var s=r(80),n=(r(78),r(79),r(86)),i=r(83),o=r(82),a=(r(81),r(84),r(85),r(88)),c=r(96);let l=class extends a.a{constructor(e){super(e),this.geometries1=null,this.geometries2=null,this.relation=null,this.relationParameter=null}};Object(s.a)([Object(i.b)({json:{read:{reader:e=>e?e.map((e=>Object(c.a)(e))):null},write:{writer:(e,t)=>{t.geometries1=e.map((e=>e.toJSON()))}}}})],l.prototype,"geometries1",void 0),Object(s.a)([Object(i.b)({json:{read:{reader:e=>e?e.map((e=>Object(c.a)(e))):null},write:{writer:(e,t)=>{t.geometries2=e.map((e=>e.toJSON()))}}}})],l.prototype,"geometries2",void 0),Object(s.a)([Object(i.b)({type:String,json:{write:!0}})],l.prototype,"relation",void 0),Object(s.a)([Object(i.b)({type:String,json:{write:!0}})],l.prototype,"relationParameter",void 0),l=Object(s.a)([Object(o.a)("esri.tasks.support.RelationParameters")],l),l.from=Object(n.m)(l);var u=l;t.a=u},736:function(e,t,r){"use strict";r.d(t,"a",(function(){return n}));const s=new(r(97).a)({0:"default-curve-extension",1:"relocate-ends",2:"keep-end-attributes",4:"no-end-attributes",8:"no-extend-at-from",16:"no-extend-at-to"});function n(e){const{extendHow:t,polylines:r,trimExtendTo:n}=e.toJSON(),i={};return i.extendHow=s.toJSON(t),r&&r.length&&(i.polylines=JSON.stringify(r),i.sr=JSON.stringify(r[0].spatialReference)),n&&(i.trimExtendTo=JSON.stringify(n)),i}},737:function(e,t,r){"use strict";var s=r(80),n=(r(78),r(79),r(86)),i=r(83),o=r(82),a=(r(81),r(84),r(85),r(88)),c=r(132),l=r(96);r(98);let u=class extends a.a{constructor(e){super(e),this.extendHow="default-curve-extension",this.polylines=null,this.trimExtendTo=null}};Object(s.a)([Object(i.b)({type:String,json:{write:!0}})],u.prototype,"extendHow",void 0),Object(s.a)([Object(i.b)({type:[c.a],json:{read:{reader:e=>e?e.map((e=>Object(l.a)(e))):null},write:{writer:(e,t)=>{t.polylines=e.map((e=>e.toJSON()))}}}})],u.prototype,"polylines",void 0),Object(s.a)([Object(i.b)({json:{read:{reader:e=>e?Object(l.a)(e):null},write:{writer:(e,t)=>{t.trimExtendTo=e.toJSON()}}}})],u.prototype,"trimExtendTo",void 0),u=Object(s.a)([Object(o.a)("esri.tasks.support.TrimExtendParameters")],u),u.from=Object(n.m)(u);var d=u;t.a=d},738:function(e,t,r){"use strict";var s=r(80),n=(r(78),r(79),r(86),r(83)),i=r(82),o=(r(81),r(84),r(85),r(88)),a=r(205);let c=class extends(Object(a.a)(o.a)){constructor(e){super(e),this.autoNavigate=null,this.filter=null,this.getResults=null,this.getSuggestions=null,this.maxResults=null,this.maxSuggestions=null,this.minSuggestCharacters=null,this.outFields=null,this.placeholder="",this.popupEnabled=null,this.popupTemplate=null,this.prefix="",this.resultGraphicEnabled=null,this.resultSymbol=null,this.suggestionsEnabled=null,this.suffix="",this.withinViewEnabled=!1,this.zoomScale=null}};Object(s.a)([Object(n.b)()],c.prototype,"autoNavigate",void 0),Object(s.a)([Object(n.b)()],c.prototype,"filter",void 0),Object(s.a)([Object(n.b)()],c.prototype,"getResults",void 0),Object(s.a)([Object(n.b)()],c.prototype,"getSuggestions",void 0),Object(s.a)([Object(n.b)()],c.prototype,"maxResults",void 0),Object(s.a)([Object(n.b)()],c.prototype,"maxSuggestions",void 0),Object(s.a)([Object(n.b)()],c.prototype,"minSuggestCharacters",void 0),Object(s.a)([Object(n.b)()],c.prototype,"outFields",void 0),Object(s.a)([Object(n.b)()],c.prototype,"placeholder",void 0),Object(s.a)([Object(n.b)()],c.prototype,"popupEnabled",void 0),Object(s.a)([Object(n.b)()],c.prototype,"popupTemplate",void 0),Object(s.a)([Object(n.b)()],c.prototype,"prefix",void 0),Object(s.a)([Object(n.b)()],c.prototype,"resultGraphicEnabled",void 0),Object(s.a)([Object(n.b)()],c.prototype,"resultSymbol",void 0),Object(s.a)([Object(n.b)()],c.prototype,"suggestionsEnabled",void 0),Object(s.a)([Object(n.b)()],c.prototype,"suffix",void 0),Object(s.a)([Object(n.b)()],c.prototype,"withinViewEnabled",void 0),Object(s.a)([Object(n.b)()],c.prototype,"zoomScale",void 0),c=Object(s.a)([Object(i.a)("esri.widgets.Search.SearchSource")],c);var l=c;t.a=l},739:function(e,t,r){"use strict";r.d(t,"a",(function(){return d})),r.d(t,"b",(function(){return u})),r.d(t,"c",(function(){return l})),r.d(t,"d",(function(){return h}));var s=r(87),n=r(79),i=r(89),o=r(99),a=(r(98),r(678));const c=n.a.getLogger("esri.widgets.Search.support.geometryUtils");function l(e,t){var r,s;if(!t)return c.error("missing-parameter: view is missing."),Promise.reject(new i.a("searchgeometryutils:missing-parameter","view is missing."));if(!e)return c.error("missing-parameter: point is missing."),Promise.reject(new i.a("searchgeometryutils:missing-parameter","point is missing."));if(e.hasZ||"2d"===t.type)return Promise.resolve(e);const n=null==t||null==(r=t.map)?void 0:r.ground;return n&&n.layers.length?n.queryElevation(e,{cache:null==(s=t.basemapTerrain)?void 0:s.elevationQueryCache}).then((e=>e.geometry)):Promise.resolve(e)}function u(e){if(Object(s.j)(e))return null;switch(e.type){case"point":return e;case"extent":return e.center;case"polygon":return e.centroid;case"multipoint":return e.getPoint(0);case"polyline":return e.getPoint(0,0)}return null}function d(e,t,r){return Object(s.j)(e)?null:"extent"===e.type?e:"multipoint"===e.type||"polygon"===e.type||"polyline"===e.type?e.extent:"point"===e.type?p(e,t,r):void 0}function h(e,t,r){return Object(s.j)(e)||Object(s.j)(t)?null:p(e.center,t,r)}function p(e,t,r){const s=e.hasZ?e.z:void 0;return t&&t.map?(r?Object(a.a)(t,r):t.extent).clone().centerAt(e).set({zmax:s,zmin:s}):new o.a({xmin:e.x-.25,ymin:e.y-.25,xmax:e.x+.25,ymax:e.y+.25,spatialReference:e.spatialReference,zmin:s,zmax:s})}},740:function(e,t,r){"use strict";var s=r(80),n=(r(78),r(79),r(86)),i=r(83),o=r(82),a=(r(81),r(84),r(85),r(88)),c=r(95),l=r(112),u=r(99),d=(r(98),r(640));let h=class extends a.a{constructor(e){super(e),this.address=null,this.apiKey=null,this.categories=null,this.countryCode=null,this.forStorage=null,this.location=null,this.locationType=null,this.magicKey=null,this.maxLocations=null,this.outFields=null,this.outSpatialReference=null,this.searchExtent=null}};Object(s.a)([Object(i.b)({type:Object,json:{write:!0}})],h.prototype,"address",void 0),Object(s.a)([Object(i.b)(d.a)],h.prototype,"apiKey",void 0),Object(s.a)([Object(i.b)({type:[String],json:{read:{source:"category",reader:e=>e?e.split(","):null},write:{target:"category",writer:(e,t)=>{t.category=e?e.join(","):null}}}})],h.prototype,"categories",void 0),Object(s.a)([Object(i.b)({type:String,json:{write:!0}})],h.prototype,"countryCode",void 0),Object(s.a)([Object(i.b)({type:Boolean,json:{write:!0}})],h.prototype,"forStorage",void 0),Object(s.a)([Object(i.b)({type:l.a,json:{write:{writer:(e,t)=>{t.location=e?e.clone().normalize():null}}}})],h.prototype,"location",void 0),Object(s.a)([Object(i.b)({type:String,json:{write:!0}})],h.prototype,"locationType",void 0),Object(s.a)([Object(i.b)({type:String,json:{write:!0}})],h.prototype,"magicKey",void 0),Object(s.a)([Object(i.b)({type:Number,json:{write:!0}})],h.prototype,"maxLocations",void 0),Object(s.a)([Object(i.b)({type:[String],json:{write:{writer:(e,t)=>{t.outFields=e?e.join(","):null}}}})],h.prototype,"outFields",void 0),Object(s.a)([Object(i.b)({type:c.a,json:{read:{source:"outSR"},write:{target:"outSR"}}})],h.prototype,"outSpatialReference",void 0),Object(s.a)([Object(i.b)({type:u.a,json:{write:{writer:(e,t)=>{const r=e?e.shiftCentralMeridian():null;t.searchExtent=r}}}})],h.prototype,"searchExtent",void 0),h=Object(s.a)([Object(o.a)("esri.tasks.support.AddressToLocationsParameters")],h),h.from=Object(n.m)(h);var p=h;t.a=p},741:function(e,t,r){"use strict";var s=r(80),n=(r(78),r(79),r(86)),i=r(83),o=r(82),a=(r(81),r(84),r(85),r(88)),c=r(95),l=r(112),u=(r(98),r(640));let d=class extends a.a{constructor(e){super(e),this.apiKey=null,this.location=null,this.locationType=null,this.outSpatialReference=null}};Object(s.a)([Object(i.b)(u.a)],d.prototype,"apiKey",void 0),Object(s.a)([Object(i.b)({type:l.a,json:{write:{writer:(e,t)=>{const r=e?e.clone().normalize():null,s=void 0!==r;t.location=s?r:null}}}})],d.prototype,"location",void 0),Object(s.a)([Object(i.b)({type:String,json:{write:!0}})],d.prototype,"locationType",void 0),Object(s.a)([Object(i.b)({type:c.a,json:{read:{source:"outSR"},write:{target:"outSR"}}})],d.prototype,"outSpatialReference",void 0),d=Object(s.a)([Object(o.a)("esri.tasks.support.LocationToAddressParameters")],d),d.from=Object(n.m)(d);var h=d;t.a=h},742:function(e,t,r){"use strict";var s=r(80),n=(r(78),r(79),r(86)),i=r(83),o=r(82),a=(r(81),r(84),r(85),r(88)),c=r(95),l=r(112),u=r(99),d=(r(98),r(640));let h=class extends a.a{constructor(e){super(e),this.apiKey=null,this.categories=null,this.countryCode=null,this.location=null,this.maxSuggestions=null,this.outSpatialReference=null,this.searchExtent=null,this.text=null}};Object(s.a)([Object(i.b)(d.a)],h.prototype,"apiKey",void 0),Object(s.a)([Object(i.b)({type:[String],json:{read:{source:"category",reader:e=>e?e.split(","):null},write:{target:"category",writer:(e,t)=>{t.category=e?e.join(","):null}}}})],h.prototype,"categories",void 0),Object(s.a)([Object(i.b)({type:String,json:{write:!0}})],h.prototype,"countryCode",void 0),Object(s.a)([Object(i.b)({type:l.a,json:{write:{writer:(e,t)=>{t.location=e?e.clone().normalize():null}}}})],h.prototype,"location",void 0),Object(s.a)([Object(i.b)({type:Number,json:{write:!0}})],h.prototype,"maxSuggestions",void 0),Object(s.a)([Object(i.b)({type:c.a,json:{read:{source:"outSR"},write:{target:"outSR"}}})],h.prototype,"outSpatialReference",void 0),Object(s.a)([Object(i.b)({type:u.a,json:{write:{writer:(e,t)=>{const r=e?e.shiftCentralMeridian():null;t.searchExtent=JSON.stringify(r)}}}})],h.prototype,"searchExtent",void 0),Object(s.a)([Object(i.b)({type:String,json:{write:!0}})],h.prototype,"text",void 0),h=Object(s.a)([Object(o.a)("esri.tasks.support.SuggestLocationsParameters")],h),h.from=Object(n.m)(h);var p=h;t.a=p},796:function(e,t,r){"use strict";var s=r(80),n=(r(78),r(79),r(86)),i=r(83),o=r(82),a=(r(81),r(84),r(85),r(95)),c=r(318),l=r(100),u=r(135);var d=r(88),h=r(112),p=r(99);let b=class extends d.a{constructor(e){super(e),this.address=null,this.attributes=null,this.extent=null,this.location=null,this.score=null}};Object(s.a)([Object(i.b)({type:String,json:{write:!0}})],b.prototype,"address",void 0),Object(s.a)([Object(i.b)({type:Object,json:{write:!0}})],b.prototype,"attributes",void 0),Object(s.a)([Object(i.b)({type:p.a,json:{write:!0}})],b.prototype,"extent",void 0),Object(s.a)([Object(i.b)({type:h.a,json:{write:!0}})],b.prototype,"location",void 0),Object(s.a)([Object(i.b)({type:Number,json:{write:!0}})],b.prototype,"score",void 0),b=Object(s.a)([Object(o.a)("esri.tasks.support.AddressCandidate")],b);var g=b,f=r(740);function m({data:e}){if(!e)return[];const{candidates:t,spatialReference:r}=e;return t?t.map((e=>{if(!e)return;const{extent:t,location:s}=e,n=!t||(i=t)&&"number"==typeof i.xmin&&"number"==typeof i.ymin&&"number"==typeof i.xmax&&"number"==typeof i.ymax;var i;return function(e){return e&&"number"==typeof e.x&&"number"==typeof e.y}(s)&&n?(t&&(t.spatialReference=r),s.spatialReference=r,g.fromJSON(e)):void 0})):[]}r(98);let y=class extends d.a{constructor(e){super(e),this.addresses=null,this.categories=null,this.countryCode=null,this.locationType=null,this.outSpatialReference=null}};Object(s.a)([Object(i.b)({type:[Object],json:{read:{reader:e=>e&&e.records?e.records.map((e=>e.attributes)):null},write:{writer:(e,t)=>{const r=[];Array.isArray(e)&&e.forEach((e=>{r.push({attributes:e})})),t.addresses={records:r}}}}})],y.prototype,"addresses",void 0),Object(s.a)([Object(i.b)({type:[String],json:{read:{source:"category",reader:e=>e?e.split(","):null},write:{target:"category",writer:(e,t)=>{t.category=e?e.join(","):null}}}})],y.prototype,"categories",void 0),Object(s.a)([Object(i.b)({type:String,json:{read:{source:"sourceCountry"},write:{target:"sourceCountry"}}})],y.prototype,"countryCode",void 0),Object(s.a)([Object(i.b)({type:String,json:{write:!0}})],y.prototype,"locationType",void 0),Object(s.a)([Object(i.b)({type:a.a,json:{read:{source:"outSR"},write:{target:"outSR"}}})],y.prototype,"outSpatialReference",void 0),y=Object(s.a)([Object(o.a)("esri.tasks.support.AddressesToLocationsParameters")],y),y.from=Object(n.m)(y);var O=y;function j(e){const{data:t}=e;if(!t)return[];const{locations:r,spatialReference:s}=t;return r?r.map((e=>{const{location:t}=e;return t&&(t.spatialReference=s),g.fromJSON(e)})):[]}var v=r(741);function S({data:e}){if(!e)return;const{address:t,location:r}=e,s=t&&t.Match_addr||"";return g.fromJSON({address:s,attributes:t||{},location:r,score:100})}let w=class extends d.a{constructor(e){super(e),this.isCollection=null,this.magicKey=null,this.text=null}};Object(s.a)([Object(i.b)({type:Boolean,json:{write:!0}})],w.prototype,"isCollection",void 0),Object(s.a)([Object(i.b)({type:String,json:{write:!0}})],w.prototype,"magicKey",void 0),Object(s.a)([Object(i.b)({type:String,json:{write:!0}})],w.prototype,"text",void 0),w=Object(s.a)([Object(o.a)("esri.tasks.support.SuggestionCandidate")],w);var _=w,x=r(742);function I(e){const{data:t}=e;if(!t)return[];const{suggestions:r}=t;return r?r.map((e=>new _(e))):[]}let T=class extends c.a{constructor(e){super(e),this.outSpatialReference=null,this.url=null}addressToLocations(e,t){!e.outSpatialReference&&this.outSpatialReference&&(e.outSpatialReference=this.outSpatialReference);const r={...this.requestOptions,...t};return async function(e,t,r){t=f.a.from(t);const s=Object(u.c)(e),{address:n,...i}=t.toJSON(),o={...n,...i,f:"json"},a=Object(u.b)({...s.query,...o}),c=Object(u.a)(a,r),d=`${s.path}/findAddressCandidates`;return Object(l.default)(d,c).then(m)}(this.url,e,r)}suggestLocations(e,t){const r={...this.requestOptions,...t};return async function(e,t,r){const s=Object(u.c)(e),n={...(t=x.a.from(t)).toJSON(),f:"json"},i=Object(u.b)({...s.query,...n}),o=Object(u.a)(i,r),a=`${s.path}/suggest`;return Object(l.default)(a,o).then(I)}(this.url,e,r)}addressesToLocations(e,t){!e.outSpatialReference&&this.outSpatialReference&&(e.outSpatialReference=this.outSpatialReference);const r={...this.requestOptions,...t};return async function(e,t,r){t=O.from(t);const s=Object(u.c)(e),n={...t.toJSON(),f:"json"},i=Object(u.b)({...s.query,...n}),o=Object(u.a)(i,r),a=`${s.path}/geocodeAddresses`;return Object(l.default)(a,o).then(j)}(this.url,e,r)}locationToAddress(e,t){!e.outSpatialReference&&this.outSpatialReference&&(e.outSpatialReference=this.outSpatialReference);const r={...this.requestOptions,...t};return async function(e,t,r){t=v.a.from(t);const s=Object(u.c)(e),n={...t.toJSON(),f:"json"},i=Object(u.b)({...s.query,...n}),o=Object(u.a)(i,r),a=`${s.path}/reverseGeocode`;return Object(l.default)(a,o).then(S)}(this.url,e,r)}};Object(s.a)([Object(i.b)({type:a.a})],T.prototype,"outSpatialReference",void 0),Object(s.a)([Object(i.b)()],T.prototype,"url",void 0),T=Object(s.a)([Object(o.a)("esri.tasks.Locator")],T);var R=T;t.a=R},818:function(e,t,r){"use strict";r.d(t,"a",(function(){return g})),r.d(t,"b",(function(){return f})),r.d(t,"c",(function(){return b}));var s=r(78),n=r(138),i=r(79),o=r(89),a=(r(81),r(155),r(153)),c=r(112),l=(r(99),r(221),r(124),r(132),r(98),r(100),r(181)),u=r(540),d=(r(676),r(727),r(728),r(729),r(730),r(731),r(732),r(733));r(734),r(735),r(736),r(737);const h=i.a.getLogger("esri.widgets.support.geolocationUtils"),p={maximumAge:0,timeout:15e3,enableHighAccuracy:!0};function b(){return function(){const e=Object(s.a)("esri-geolocation");return e||h.warn("geolocation-unsupported","Geolocation unsupported."),e}()&&function(){const e=window.isSecureContext;return e||h.warn("insecure-context","Geolocation requires a secure origin."),e}()}function g(e){return e||(e=p),new Promise(((t,r)=>{setTimeout((()=>r(new o.a("geolocation:timeout","getting the current geolocation position timed out"))),15e3),navigator.geolocation.getCurrentPosition(t,r,e)}))}function f(e,t){const{position:r,view:s}=e;return function(e,t,r){if(!t)return Promise.resolve(e);const s=t.spatialReference;return s.isWGS84?Promise.resolve(e):s.isWebMercator?Promise.resolve(Object(a.b)(e)):function(e){if(n.a.geometryServiceUrl)return Promise.resolve(n.a.geometryServiceUrl);const t=l.a.getDefault();return t.load(e).catch((()=>{})).then((()=>t.get("helperServices.geometry.url")))}(r).then((t=>{if(!t)throw new o.a("geometry-service:missing-url","Geometry service URL is missing");const n=new u.a({geometries:[e],outSR:s});return Object(d.a)(t,n,r).then((e=>e[0]))}))}(function(e){const t=e&&e.coords;return t?new c.a({longitude:t.longitude,latitude:t.latitude,z:t.altitude||null,spatialReference:{wkid:4326}}):null}(function(e){const t=e&&e.coords||{},r={accuracy:t.accuracy,altitude:t.altitude,altitudeAccuracy:t.altitudeAccuracy,heading:t.heading,latitude:t.latitude,longitude:t.longitude,speed:t.speed};return e?{coords:r,timestamp:e.timestamp}:e}(r)),s,t)}},819:function(e,t,r){"use strict";r.d(t,"a",(function(){return d})),r.d(t,"b",(function(){return p})),r.d(t,"c",(function(){return f})),r.d(t,"d",(function(){return b})),r.d(t,"e",(function(){return g}));var s=r(87),n=r(124),i=r(120),o=r(740),a=r(741),c=r(742),l=r(739);const u="Single Line Input";function d(e,t){return e.location?function(e,t){const{source:r,spatialReference:s,location:n,sourceIndex:i,view:o}=e,{apiKey:c,locator:l,zoomScale:u,defaultZoomScale:d}=r,h=o&&o.scale,p=t&&t.signal,b=new a.a;return b.location=n,c&&(b.apiKey=c),s&&(b.outSpatialReference=s),l.locationToAddress(b,{signal:p}).then((e=>O([e],{sourceIndex:i,scale:h,view:o,zoomScale:u,defaultZoomScale:d})))}(e,t):function(e,t){const{source:r,suggestResult:n,spatialReference:i,view:a,maxResults:c,sourceIndex:l}=e,d=r&&r.zoomScale,p=r&&r.defaultZoomScale;if(!n.text.trim())return Promise.resolve(null);const b=!n.key&&r.prefix?r.prefix:"",g=!n.key&&r.suffix?r.suffix:"",f=`${b}${n.text}${g}`,y=new o.a,{apiKey:j,locator:v}=r,S=a&&a.scale,w=m(r,a),_=t&&t.signal;if(j&&(y.apiKey=j),!v)return Promise.resolve(null);r.categories&&(y.categories=r.categories),r.locationType&&(y.locationType=r.locationType),i&&(y.outSpatialReference=i);const x=h(a);x&&(y.location=x),y.maxLocations=c,w&&(y.searchExtent=Object(s.q)(w)),r.countryCode&&(y.countryCode=r.countryCode);const{key:I}=n;return I&&(y.magicKey=I),y.address={},y.address[r.singleLineFieldName||u]=f,r.outFields&&(y.outFields=r.outFields),v.addressToLocations(y,{signal:_}).then((e=>O(e,{key:I,scale:S,sourceIndex:l,view:a,zoomScale:d,defaultZoomScale:p})))}(e,t)}function h(e){const t=null==e?void 0:e.scale;return"number"==typeof t&&t<=3e5?e.get("extent.center"):null}function p(e,t){const{source:r,spatialReference:n,view:i,suggestTerm:o,maxSuggestions:a,sourceIndex:l}=e,u=new c.a,{apiKey:d,locator:p}=r,b=m(r,i),g=t&&t.signal;if(!p)return Promise.resolve(null);d&&(u.apiKey=d),r.categories&&(u.categories=r.categories),n&&(u.outSpatialReference=n);const f=h(i);if(f&&(u.location=f),!o.trim())return Promise.resolve(null);const{prefix:O="",suffix:j=""}=r,v=`${O}${o}${j}`;return u.text=v,b&&(u.searchExtent=Object(s.q)(b)),u.maxSuggestions=a,r.countryCode&&(u.countryCode=r.countryCode),p.suggestLocations(u,{signal:g}).then((e=>y(e,l)))}function b(e){return!!e&&/(?:geocode\-api\.arcgis\.com\/arcgis\/rest\/services\/world\/geocodeserver).*/gi.test(e)}function g(e){return!!e&&/(?:\/servers\/[\da-z\.-]+\/rest\/services\/world\/geocodeserver).*/gi.test(e)}function f(e){return!!e&&/(?:arcgis\.com\/arcgis\/rest\/services\/world\/geocodeserver).*/gi.test(e)}function m(e,t){const{filter:r,withinViewEnabled:s}=e,n=t&&t.scale,i=t&&t.extent,o=r&&r.geometry;return Object(l.a)(o,t,n)||(s&&i?i:void 0)}function y(e,t){return e.map((e=>function(e,t){return{text:e.text,key:e.magicKey,sourceIndex:t}}(e,t)))}function O(e,t){return e.map((e=>function(e,t){const{key:r,scale:o,sourceIndex:a,view:c,zoomScale:u,defaultZoomScale:d}=t,{attributes:h,extent:p,location:b,address:g}=e,f=new i.a({geometry:b,attributes:h}),m=p||b,y=Object(l.a)(m,c,o),O="number"==typeof u?Object(l.d)(y,c,u):"number"==typeof d&&"point"===m.type?Object(l.d)(y,c,d):y,j=b?`${b.x},${b.y}`:"",v=g||j,S=f.clone();return Object(s.k)(O)&&(S.geometry=n.a.fromExtent(O)),{extent:O,feature:f,target:S,key:r,name:v,sourceIndex:a}}(e,t)))}},868:function(e,t,r){"use strict";var s=r(80),n=(r(78),r(90)),i=r(79),o=(r(86),r(83)),a=r(82),c=(r(81),r(84),r(85),r(738)),l=r(87),u=r(89),d=r(124),h=r(245),p=r(273),b=(r(166),r(113)),g=r(739);const f=/https?:\/\/services.*\.arcgis\.com/i,m=/(?:\{([^}]+)\})/g,y=i.a.getLogger("esri.widgets.Search.support.layerSearchUtils");function O(e,t){const{exactMatch:r=!1,location:s,maxResults:i,spatialReference:o,source:a,sourceIndex:c,suggestResult:h,view:p}=e,{layer:f,filter:m,zoomScale:O}=a,j=p&&p.scale,M=v(a,p),F=t&&t.signal;return w(f).then((()=>{const e=f.popupTemplate;return e?e.getRequiredFields(f.fields):null})).then((e=>{var t,v;const{objectIdField:w,returnZ:C}=f,k=x(a);if(!T(f,k))throw y.error("invalid-field: displayField is invalid."),new u.a("getResults():invalid-field","displayField is invalid.");const L=e&&e.length?e:[k],A=a.outFields||L,D=S(A);if(-1!==A.indexOf(w)||D||A.push(w),!D&&!I(f,A))throw y.error("invalid-field: outField is invalid."),new u.a("getResults():invalid-field","outField is invalid.");const P=f.createQuery(),{orderByFields:U}=a;if(U&&(P.orderByFields=U),o){P.outSpatialReference=o;const e=1/Object(b.f)(o);e&&(P.maxAllowableOffset=e)}const B="mesh"===f.geometryType||"multipatch"===f.geometryType,G=(null==(t=f.capabilities)||null==(v=t.data)?void 0:v.supportsZ)&&!B;if(P.returnZ=G&&!1!==C,P.returnGeometry=!0,P.multipatchOption=B?"xyFootprint":null,A&&(P.outFields=A),s)P.geometry=s;else if(h.key)P.objectIds=[parseInt(h.key,10)];else{const e=a.searchFields||[k];if(!I(f,e))throw y.error("invalid-field: search field is invalid."),new u.a("getResults():invalid-field","search field is invalid.");if(_(f)&&(P.num=i),M&&(P.geometry=M),!h.text.trim())return[];const{prefix:t="",suffix:s=""}=a,n=E(R(`${t}${h.text}${s}`),f,e,m,r);if(!n)return[];P.where=n}return f.queryFeatures(P,{signal:F}).then((e=>function(e,t,r,s,i,o,a){return e.features.map((e=>function(e,t,r,s,i,o,a){const c=e.clone(),u=e.sourceLayer,h=u&&u.objectIdField,p=h&&e.attributes[h],b=N(e,r.searchTemplate,i),f=Object(g.a)(c.geometry,t,o),m="number"==typeof a?Object(g.d)(Object(n.a)(f),t,a):f,y=e.clone();return Object(l.k)(m)&&(y.geometry=d.a.fromExtent(m)),{extent:m,target:y,feature:c,key:p,name:b,sourceIndex:s}}(e,t,r,s,i,o,a)))}(e,p,a,c,k,j,O)))}))}function j(e,t){const{source:r,spatialReference:s,view:n,suggestTerm:i,maxSuggestions:o,sourceIndex:a}=e,{layer:c,filter:l}=r,d=t&&t.signal,h=v(r,n);return w(c).then((()=>{if(!_(c))return[];const e=x(r),t=r.searchFields||[e],n=[];r.suggestionTemplate?r.suggestionTemplate.replace(m,((e,t)=>(n.push(t),e))):n.push(e);const p=S(n);-1!==n.indexOf(c.objectIdField)||p||n.push(c.objectIdField);const b=T(c,e),g=p||I(c,n),f=I(c,t);if(!b)throw y.error("invalid-field: displayField is invalid."),new u.a("getSuggestions():invalid-field","displayField is invalid.");if(!g)throw y.error("invalid-field: outField is invalid."),new u.a("getSuggestions():invalid-field","outField is invalid.");if(!f)throw y.error("invalid-field: search field is invalid."),new u.a("getSuggestions():invalid-field","search field is invalid.");const O=c.createQuery(),{orderByFields:j}=r;if(j&&(O.orderByFields=j),O.outSpatialReference=s,O.returnGeometry=!1,O.num=o,O.outFields=n,h&&(O.geometry=h),!i.trim())return[];const{prefix:v="",suffix:w=""}=r,M=E(R(`${v}${i}${w}`),c,t,l,!1);return M?(O.where=M,c.queryFeatures(O,{signal:d}).then((t=>function(e,t,r,s){return e.features.map((e=>function(e,t,r,s){const n=e.sourceLayer,{attributes:i}=e,{objectIdField:o}=n,a=i[o];return{text:N(e,t.suggestionTemplate,s),key:a,sourceIndex:r}}(e,t,r,s)))}(t,r,a,e)))):[]}))}function v(e,t){const{filter:r,withinViewEnabled:s}=e,n=t&&t.extent;return r&&r.geometry||(s&&n?n:void 0)}function S(e){return e&&-1!==e.indexOf("*")}async function w(e){e&&await e.load()}function _(e){var t,r,s;return null!=(t=null==e||null==(r=e.capabilities)||null==(s=r.query)?void 0:s.supportsPagination)&&t}function x(e){return e.displayField||e.layer.displayField||function(e){let t="";if(e){const{fields:r}=e;r&&r.some((e=>"string"===e.type&&(t=e.name,!0)))}return t}(e.layer)}function I(e,t){return!(!e||!t)&&t.every((t=>T(e,t)))}function T(e,t){return!!e.getField(t)}function R(e){return e.replace(/\'/g,"''")}function M(e,t){const r=t&&t.where;return r?`(${e}) AND (${r})`:e}function E(e,t,r,s,n){const{definitionExpression:i}=t;let o="";if(e){const i=f.test(t.url)&&function(e){for(let t=0;t<e.length;t++)if(e.charCodeAt(t)>255)return!0;return!1}(e)?"N":"";r&&r.forEach((r=>{const a=t.getField(r),c="function"==typeof t.getFieldDomain&&t.getFieldDomain(r),l=(c&&"coded-value"===c.type?function(e,t,r){let s=null;const{codedValues:n}=e;return n&&n.some((e=>{const n=e.name,i=r?n:n.toLowerCase();return(r?t:t.toLowerCase())===i&&(s=e.code.toString(),!0)})),s}(c,e,n):null)||e||null;if(null!==l){const e=function(e,t,r,s,n){const i=t.type,o=t.name;if("string"===i||"date"===i||"global-id"===i)return M(n?`${o} = ${r}'${e}'`:`UPPER(${o}) LIKE ${r}'%${e.toUpperCase()}%'`,s);if("oid"===i||"small-integer"===i||"integer"===i||"single"===i||"double"===i){const t=Number(e);return isNaN(t)?null:M(`${o} = ${t}`,s)}return M(`${o} = ${e}`,s)}(l,a,i,s,n);e&&(o+=function(e,t){return e?` OR (${t})`:`(${t})`}(o,e))}}))}return i?`(${i}) AND (${o})`:o}function N(e,t,r){const s=e.sourceLayer,{attributes:n}=e,i="function"==typeof s.getFieldDomain&&s.getFieldDomain(r);if(t)return Object(p.a)(t,n);if(r&&n){const e=s.getField(r),t=function(e,t){return e[Object.keys(e).find((e=>e.toLowerCase()===t.toLowerCase()))]}(n,r);return null==t?"":i&&"coded-value"===i.type?function(e,t){let r=null;const{codedValues:s}=e;return s&&s.length&&s.some((e=>e.code===t&&(r=e.name,!0))),r}(i,t):"date"===(null==e?void 0:e.type)?Object(h.b)(new Date(t)):"number"==typeof t?t.toString():"string"!=typeof t?"":t.trim()}return""}var F;let C=F=class extends c.a{constructor(){super(...arguments),this.displayField=null,this.exactMatch=null,this.orderByFields=null,this.searchFields=null,this.searchTemplate=null,this.suggestionTemplate=null,this.getResults=(e,t)=>O({source:this,...e},t),this.getSuggestions=(e,t)=>j({source:this,...e},t)}set layer(e){this._set("layer",e),e&&e.load().catch((()=>{}))}get name(){return this._getLayerTitle()||""}set name(e){void 0!==e?this._override("name",e):this._clearOverride("name")}clone(){return new F({autoNavigate:this.autoNavigate,filter:this.filter,maxResults:this.maxResults,maxSuggestions:this.maxSuggestions,minSuggestCharacters:this.minSuggestCharacters,outFields:this.outFields?Object(n.a)(this.outFields):null,placeholder:this.placeholder,popupEnabled:this.popupEnabled,prefix:this.prefix,resultGraphicEnabled:this.resultGraphicEnabled,resultSymbol:this.resultSymbol?this.resultSymbol.clone():null,suggestionsEnabled:this.suggestionsEnabled,suffix:this.suffix,withinViewEnabled:this.withinViewEnabled,displayField:this.displayField,exactMatch:this.exactMatch,layer:this.layer,searchFields:this.searchFields?Object(n.a)(this.searchFields):null,suggestionTemplate:this.suggestionTemplate,zoomScale:this.zoomScale})}_getFirstStringField(){const e=this.layer;let t="";return e&&e.fields&&e.fields.some((e=>"string"===e.type&&(t=e.name,!0))),t}_getDisplayField(){return this.displayField||this.layer.displayField||this._getFirstStringField()}_getSearchFieldsString(){const{layer:e,searchFields:t}=this;return e.loaded?`: ${(t||[this._getDisplayField()]).map((t=>{const r=e.getField(t);return r&&r.alias||t})).join(", ")}`:""}_getLayerTitle(){const{layer:e}=this;if(!e)return;const{title:t}=e;return t?`${t}${this._getSearchFieldsString()}`:void 0}};Object(s.a)([Object(o.b)({json:{read:{source:"field.name"},write:{target:"field.name"}}})],C.prototype,"displayField",void 0),Object(s.a)([Object(o.b)({json:{read:{source:"field.exactMatch"},write:{target:"field.exactMatch"}}})],C.prototype,"exactMatch",void 0),Object(s.a)([Object(o.b)({value:null})],C.prototype,"layer",null),Object(s.a)([Object(o.b)()],C.prototype,"name",null),Object(s.a)([Object(o.b)({type:[String],json:{write:!0}})],C.prototype,"orderByFields",void 0),Object(s.a)([Object(o.b)()],C.prototype,"searchFields",void 0),Object(s.a)([Object(o.b)()],C.prototype,"searchTemplate",void 0),Object(s.a)([Object(o.b)()],C.prototype,"suggestionTemplate",void 0),C=F=Object(s.a)([Object(a.a)("esri.widgets.Search.LayerSearchSource")],C);var k=C;t.a=k},895:function(e,t,r){"use strict";var s,n=r(80),i=(r(78),r(90)),o=(r(79),r(86),r(83)),a=r(93),c=r(82),l=r(92),u=(r(81),r(84),r(85),r(796)),d=r(738),h=r(819);let p=s=class extends d.a{constructor(){super(...arguments),this.apiKey=null,this.categories=null,this.countryCode=null,this.defaultZoomScale=null,this.locator=null,this.locationType=null,this.name="",this.placeholder="",this.searchTemplate="",this.singleLineFieldName=null,this.suggestionsEnabled=null,this.zoomScale=null,this.getResults=(e,t)=>Object(h.a)({source:this,...e},t),this.getSuggestions=(e,t)=>Object(h.b)({source:this,...e},t)}readLocator(e,t){const{url:r}=t;return r?new u.a({url:r}):null}writeLocator(e,t){t.url=e?e.url:null}clone(){return new s({apiKey:this.apiKey,autoNavigate:this.autoNavigate,filter:this.filter,maxResults:this.maxResults,maxSuggestions:this.maxSuggestions,minSuggestCharacters:this.minSuggestCharacters,outFields:this.outFields?Object(i.a)(this.outFields):null,placeholder:this.placeholder,popupEnabled:this.popupEnabled,prefix:this.prefix,resultGraphicEnabled:this.resultGraphicEnabled,resultSymbol:this.resultSymbol?this.resultSymbol.clone():null,suggestionsEnabled:this.suggestionsEnabled,suffix:this.suffix,withinViewEnabled:this.withinViewEnabled,categories:this.categories?Object(i.a)(this.categories):null,countryCode:this.countryCode,locationType:this.locationType,locator:this.locator,searchTemplate:this.searchTemplate,singleLineFieldName:this.singleLineFieldName,zoomScale:this.zoomScale})}};Object(n.a)([Object(o.b)()],p.prototype,"apiKey",void 0),Object(n.a)([Object(o.b)()],p.prototype,"categories",void 0),Object(n.a)([Object(o.b)()],p.prototype,"countryCode",void 0),Object(n.a)([Object(o.b)({json:{write:!0}})],p.prototype,"defaultZoomScale",void 0),Object(n.a)([Object(o.b)({type:u.a})],p.prototype,"locator",void 0),Object(n.a)([Object(a.a)("locator",["url"])],p.prototype,"readLocator",null),Object(n.a)([Object(l.a)("locator")],p.prototype,"writeLocator",null),Object(n.a)([Object(o.b)()],p.prototype,"locationType",void 0),Object(n.a)([Object(o.b)({json:{write:!0}})],p.prototype,"name",void 0),Object(n.a)([Object(o.b)({json:{write:!0}})],p.prototype,"placeholder",void 0),Object(n.a)([Object(o.b)()],p.prototype,"searchTemplate",void 0),Object(n.a)([Object(o.b)({json:{write:!0}})],p.prototype,"singleLineFieldName",void 0),Object(n.a)([Object(o.b)({json:{read:{source:"suggest"},write:{target:"suggest"}}})],p.prototype,"suggestionsEnabled",void 0),Object(n.a)([Object(o.b)({json:{write:!0}})],p.prototype,"zoomScale",void 0),p=s=Object(n.a)([Object(c.a)("esri.widgets.Search.LocatorSearchSource")],p);var b=p;t.a=b}}]);
//# sourceMappingURL=89.354959b2.chunk.js.map