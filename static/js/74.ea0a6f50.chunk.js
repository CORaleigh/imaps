/*! For license information please see 74.ea0a6f50.chunk.js.LICENSE.txt */
(this.webpackJsonpimaps=this.webpackJsonpimaps||[]).push([[74,275,284],{1010:function(e,t,r){"use strict";function n(e){return(n="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function i(){return(i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function s(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){o(e,t,r[t])}))}return e}function a(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}function l(e){if("undefined"!==typeof window&&window.navigator)return!!navigator.userAgent.match(e)}var c=l(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),u=l(/Edge/i),d=l(/firefox/i),h=l(/safari/i)&&!l(/chrome/i)&&!l(/android/i),p=l(/iP(ad|od|hone)/i),f=l(/chrome/i)&&l(/android/i),b={capture:!1,passive:!1};function m(e,t,r){e.addEventListener(t,r,!c&&b)}function g(e,t,r){e.removeEventListener(t,r,!c&&b)}function y(e,t){if(t){if(">"===t[0]&&(t=t.substring(1)),e)try{if(e.matches)return e.matches(t);if(e.msMatchesSelector)return e.msMatchesSelector(t);if(e.webkitMatchesSelector)return e.webkitMatchesSelector(t)}catch(r){return!1}return!1}}function v(e){return e.host&&e!==document&&e.host.nodeType?e.host:e.parentNode}function O(e,t,r,n){if(e){r=r||document;do{if(null!=t&&(">"===t[0]?e.parentNode===r&&y(e,t):y(e,t))||n&&e===r)return e;if(e===r)break}while(e=v(e))}return null}var j,w=/\s+/g;function _(e,t,r){if(e&&t)if(e.classList)e.classList[r?"add":"remove"](t);else{var n=(" "+e.className+" ").replace(w," ").replace(" "+t+" "," ");e.className=(n+(r?" "+t:"")).replace(w," ")}}function k(e,t,r){var n=e&&e.style;if(n){if(void 0===r)return document.defaultView&&document.defaultView.getComputedStyle?r=document.defaultView.getComputedStyle(e,""):e.currentStyle&&(r=e.currentStyle),void 0===t?r:r[t];t in n||-1!==t.indexOf("webkit")||(t="-webkit-"+t),n[t]=r+("string"===typeof r?"":"px")}}function S(e,t){var r="";if("string"===typeof e)r=e;else do{var n=k(e,"transform");n&&"none"!==n&&(r=n+" "+r)}while(!t&&(e=e.parentNode));var o=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return o&&new o(r)}function x(e,t,r){if(e){var n=e.getElementsByTagName(t),o=0,i=n.length;if(r)for(;o<i;o++)r(n[o],o);return n}return[]}function E(){var e=document.scrollingElement;return e||document.documentElement}function A(e,t,r,n,o){if(e.getBoundingClientRect||e===window){var i,s,a,l,u,d,h;if(e!==window&&e.parentNode&&e!==E()?(s=(i=e.getBoundingClientRect()).top,a=i.left,l=i.bottom,u=i.right,d=i.height,h=i.width):(s=0,a=0,l=window.innerHeight,u=window.innerWidth,d=window.innerHeight,h=window.innerWidth),(t||r)&&e!==window&&(o=o||e.parentNode,!c))do{if(o&&o.getBoundingClientRect&&("none"!==k(o,"transform")||r&&"static"!==k(o,"position"))){var p=o.getBoundingClientRect();s-=p.top+parseInt(k(o,"border-top-width")),a-=p.left+parseInt(k(o,"border-left-width")),l=s+i.height,u=a+i.width;break}}while(o=o.parentNode);if(n&&e!==window){var f=S(o||e),b=f&&f.a,m=f&&f.d;f&&(l=(s/=m)+(d/=m),u=(a/=b)+(h/=b))}return{top:s,left:a,bottom:l,right:u,width:h,height:d}}}function T(e,t,r){for(var n=P(e,!0),o=A(e)[t];n;){var i=A(n)[r];if(!("top"===r||"left"===r?o>=i:o<=i))return n;if(n===E())break;n=P(n,!1)}return!1}function I(e,t,r){for(var n=0,o=0,i=e.children;o<i.length;){if("none"!==i[o].style.display&&i[o]!==Be.ghost&&i[o]!==Be.dragged&&O(i[o],r.draggable,e,!1)){if(n===t)return i[o];n++}o++}return null}function C(e,t){for(var r=e.lastElementChild;r&&(r===Be.ghost||"none"===k(r,"display")||t&&!y(r,t));)r=r.previousElementSibling;return r||null}function M(e,t){var r=0;if(!e||!e.parentNode)return-1;for(;e=e.previousElementSibling;)"TEMPLATE"===e.nodeName.toUpperCase()||e===Be.clone||t&&!y(e,t)||r++;return r}function N(e){var t=0,r=0,n=E();if(e)do{var o=S(e),i=o.a,s=o.d;t+=e.scrollLeft*i,r+=e.scrollTop*s}while(e!==n&&(e=e.parentNode));return[t,r]}function P(e,t){if(!e||!e.getBoundingClientRect)return E();var r=e,n=!1;do{if(r.clientWidth<r.scrollWidth||r.clientHeight<r.scrollHeight){var o=k(r);if(r.clientWidth<r.scrollWidth&&("auto"==o.overflowX||"scroll"==o.overflowX)||r.clientHeight<r.scrollHeight&&("auto"==o.overflowY||"scroll"==o.overflowY)){if(!r.getBoundingClientRect||r===document.body)return E();if(n||t)return r;n=!0}}}while(r=r.parentNode);return E()}function L(e,t){return Math.round(e.top)===Math.round(t.top)&&Math.round(e.left)===Math.round(t.left)&&Math.round(e.height)===Math.round(t.height)&&Math.round(e.width)===Math.round(t.width)}function D(e,t){return function(){if(!j){var r=arguments,n=this;1===r.length?e.call(n,r[0]):e.apply(n,r),j=setTimeout((function(){j=void 0}),t)}}}function B(e,t,r){e.scrollLeft+=t,e.scrollTop+=r}function U(e){var t=window.Polymer,r=window.jQuery||window.Zepto;return t&&t.dom?t.dom(e).cloneNode(!0):r?r(e).clone(!0)[0]:e.cloneNode(!0)}var R="Sortable"+(new Date).getTime();function F(){var e,t=[];return{captureAnimationState:function(){(t=[],this.options.animation)&&[].slice.call(this.el.children).forEach((function(e){if("none"!==k(e,"display")&&e!==Be.ghost){t.push({target:e,rect:A(e)});var r=s({},t[t.length-1].rect);if(e.thisAnimationDuration){var n=S(e,!0);n&&(r.top-=n.f,r.left-=n.e)}e.fromRect=r}}))},addAnimationState:function(e){t.push(e)},removeAnimationState:function(e){t.splice(function(e,t){for(var r in e)if(e.hasOwnProperty(r))for(var n in t)if(t.hasOwnProperty(n)&&t[n]===e[r][n])return Number(r);return-1}(t,{target:e}),1)},animateAll:function(r){var n=this;if(!this.options.animation)return clearTimeout(e),void("function"===typeof r&&r());var o=!1,i=0;t.forEach((function(e){var t=0,r=e.target,s=r.fromRect,a=A(r),l=r.prevFromRect,c=r.prevToRect,u=e.rect,d=S(r,!0);d&&(a.top-=d.f,a.left-=d.e),r.toRect=a,r.thisAnimationDuration&&L(l,a)&&!L(s,a)&&(u.top-a.top)/(u.left-a.left)===(s.top-a.top)/(s.left-a.left)&&(t=function(e,t,r,n){return Math.sqrt(Math.pow(t.top-e.top,2)+Math.pow(t.left-e.left,2))/Math.sqrt(Math.pow(t.top-r.top,2)+Math.pow(t.left-r.left,2))*n.animation}(u,l,c,n.options)),L(a,s)||(r.prevFromRect=s,r.prevToRect=a,t||(t=n.options.animation),n.animate(r,u,a,t)),t&&(o=!0,i=Math.max(i,t),clearTimeout(r.animationResetTimer),r.animationResetTimer=setTimeout((function(){r.animationTime=0,r.prevFromRect=null,r.fromRect=null,r.prevToRect=null,r.thisAnimationDuration=null}),t),r.thisAnimationDuration=t)})),clearTimeout(e),o?e=setTimeout((function(){"function"===typeof r&&r()}),i):"function"===typeof r&&r(),t=[]},animate:function(e,t,r,n){if(n){k(e,"transition",""),k(e,"transform","");var o=S(this.el),i=o&&o.a,s=o&&o.d,a=(t.left-r.left)/(i||1),l=(t.top-r.top)/(s||1);e.animatingX=!!a,e.animatingY=!!l,k(e,"transform","translate3d("+a+"px,"+l+"px,0)"),this.forRepaintDummy=function(e){return e.offsetWidth}(e),k(e,"transition","transform "+n+"ms"+(this.options.easing?" "+this.options.easing:"")),k(e,"transform","translate3d(0,0,0)"),"number"===typeof e.animated&&clearTimeout(e.animated),e.animated=setTimeout((function(){k(e,"transition",""),k(e,"transform",""),e.animated=!1,e.animatingX=!1,e.animatingY=!1}),n)}}}}var q=[],$={initializeByDefault:!0},W={mount:function(e){for(var t in $)$.hasOwnProperty(t)&&!(t in e)&&(e[t]=$[t]);q.forEach((function(t){if(t.pluginName===e.pluginName)throw"Sortable: Cannot mount plugin ".concat(e.pluginName," more than once")})),q.push(e)},pluginEvent:function(e,t,r){var n=this;this.eventCanceled=!1,r.cancel=function(){n.eventCanceled=!0};var o=e+"Global";q.forEach((function(n){t[n.pluginName]&&(t[n.pluginName][o]&&t[n.pluginName][o](s({sortable:t},r)),t.options[n.pluginName]&&t[n.pluginName][e]&&t[n.pluginName][e](s({sortable:t},r)))}))},initializePlugins:function(e,t,r,n){for(var o in q.forEach((function(n){var o=n.pluginName;if(e.options[o]||n.initializeByDefault){var s=new n(e,t,e.options);s.sortable=e,s.options=e.options,e[o]=s,i(r,s.defaults)}})),e.options)if(e.options.hasOwnProperty(o)){var s=this.modifyOption(e,o,e.options[o]);"undefined"!==typeof s&&(e.options[o]=s)}},getEventProperties:function(e,t){var r={};return q.forEach((function(n){"function"===typeof n.eventProperties&&i(r,n.eventProperties.call(t[n.pluginName],e))})),r},modifyOption:function(e,t,r){var n;return q.forEach((function(o){e[o.pluginName]&&o.optionListeners&&"function"===typeof o.optionListeners[t]&&(n=o.optionListeners[t].call(e[o.pluginName],r))})),n}};function V(e){var t=e.sortable,r=e.rootEl,n=e.name,o=e.targetEl,i=e.cloneEl,a=e.toEl,l=e.fromEl,d=e.oldIndex,h=e.newIndex,p=e.oldDraggableIndex,f=e.newDraggableIndex,b=e.originalEvent,m=e.putSortable,g=e.extraEventProperties;if(t=t||r&&r[R]){var y,v=t.options,O="on"+n.charAt(0).toUpperCase()+n.substr(1);!window.CustomEvent||c||u?(y=document.createEvent("Event")).initEvent(n,!0,!0):y=new CustomEvent(n,{bubbles:!0,cancelable:!0}),y.to=a||r,y.from=l||r,y.item=o||r,y.clone=i,y.oldIndex=d,y.newIndex=h,y.oldDraggableIndex=p,y.newDraggableIndex=f,y.originalEvent=b,y.pullMode=m?m.lastPutMode:void 0;var j=s({},g,W.getEventProperties(n,t));for(var w in j)y[w]=j[w];r&&r.dispatchEvent(y),v[O]&&v[O].call(t,y)}}var z=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=r.evt,o=a(r,["evt"]);W.pluginEvent.bind(Be)(e,t,s({dragEl:G,parentEl:H,ghostEl:Y,rootEl:K,nextEl:X,lastDownEl:Z,cloneEl:Q,cloneHidden:ee,dragStarted:pe,putSortable:se,activeSortable:Be.active,originalEvent:n,oldIndex:te,oldDraggableIndex:ne,newIndex:re,newDraggableIndex:oe,hideGhostForTarget:Ne,unhideGhostForTarget:Pe,cloneNowHidden:function(){ee=!0},cloneNowShown:function(){ee=!1},dispatchSortableEvent:function(e){J({sortable:t,name:e,originalEvent:n})}},o))};function J(e){V(s({putSortable:se,cloneEl:Q,targetEl:G,rootEl:K,oldIndex:te,oldDraggableIndex:ne,newIndex:re,newDraggableIndex:oe},e))}var G,H,Y,K,X,Z,Q,ee,te,re,ne,oe,ie,se,ae,le,ce,ue,de,he,pe,fe,be,me,ge,ye=!1,ve=!1,Oe=[],je=!1,we=!1,_e=[],ke=!1,Se=[],xe="undefined"!==typeof document,Ee=p,Ae=u||c?"cssFloat":"float",Te=xe&&!f&&!p&&"draggable"in document.createElement("div"),Ie=function(){if(xe){if(c)return!1;var e=document.createElement("x");return e.style.cssText="pointer-events:auto","auto"===e.style.pointerEvents}}(),Ce=function(e,t){var r=k(e),n=parseInt(r.width)-parseInt(r.paddingLeft)-parseInt(r.paddingRight)-parseInt(r.borderLeftWidth)-parseInt(r.borderRightWidth),o=I(e,0,t),i=I(e,1,t),s=o&&k(o),a=i&&k(i),l=s&&parseInt(s.marginLeft)+parseInt(s.marginRight)+A(o).width,c=a&&parseInt(a.marginLeft)+parseInt(a.marginRight)+A(i).width;if("flex"===r.display)return"column"===r.flexDirection||"column-reverse"===r.flexDirection?"vertical":"horizontal";if("grid"===r.display)return r.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(o&&s.float&&"none"!==s.float){var u="left"===s.float?"left":"right";return!i||"both"!==a.clear&&a.clear!==u?"horizontal":"vertical"}return o&&("block"===s.display||"flex"===s.display||"table"===s.display||"grid"===s.display||l>=n&&"none"===r[Ae]||i&&"none"===r[Ae]&&l+c>n)?"vertical":"horizontal"},Me=function(e){function t(e,r){return function(n,o,i,s){var a=n.options.group.name&&o.options.group.name&&n.options.group.name===o.options.group.name;if(null==e&&(r||a))return!0;if(null==e||!1===e)return!1;if(r&&"clone"===e)return e;if("function"===typeof e)return t(e(n,o,i,s),r)(n,o,i,s);var l=(r?n:o).options.group.name;return!0===e||"string"===typeof e&&e===l||e.join&&e.indexOf(l)>-1}}var r={},o=e.group;o&&"object"==n(o)||(o={name:o}),r.name=o.name,r.checkPull=t(o.pull,!0),r.checkPut=t(o.put),r.revertClone=o.revertClone,e.group=r},Ne=function(){!Ie&&Y&&k(Y,"display","none")},Pe=function(){!Ie&&Y&&k(Y,"display","")};xe&&document.addEventListener("click",(function(e){if(ve)return e.preventDefault(),e.stopPropagation&&e.stopPropagation(),e.stopImmediatePropagation&&e.stopImmediatePropagation(),ve=!1,!1}),!0);var Le=function(e){if(G){var t=function(e,t){var r;return Oe.some((function(n){if(!C(n)){var o=A(n),i=n[R].options.emptyInsertThreshold,s=e>=o.left-i&&e<=o.right+i,a=t>=o.top-i&&t<=o.bottom+i;return i&&s&&a?r=n:void 0}})),r}((e=e.touches?e.touches[0]:e).clientX,e.clientY);if(t){var r={};for(var n in e)e.hasOwnProperty(n)&&(r[n]=e[n]);r.target=r.rootEl=t,r.preventDefault=void 0,r.stopPropagation=void 0,t[R]._onDragOver(r)}}},De=function(e){G&&G.parentNode[R]._isOutsideThisEl(e.target)};function Be(e,t){if(!e||!e.nodeType||1!==e.nodeType)throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(e));this.el=e,this.options=t=i({},t),e[R]=this;var r={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(e.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return Ce(e,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(e,t){e.setData("Text",t.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:!1!==Be.supportPointer&&"PointerEvent"in window&&!h,emptyInsertThreshold:5};for(var n in W.initializePlugins(this,e,r),r)!(n in t)&&(t[n]=r[n]);for(var o in Me(t),this)"_"===o.charAt(0)&&"function"===typeof this[o]&&(this[o]=this[o].bind(this));this.nativeDraggable=!t.forceFallback&&Te,this.nativeDraggable&&(this.options.touchStartThreshold=1),t.supportPointer?m(e,"pointerdown",this._onTapStart):(m(e,"mousedown",this._onTapStart),m(e,"touchstart",this._onTapStart)),this.nativeDraggable&&(m(e,"dragover",this),m(e,"dragenter",this)),Oe.push(this.el),t.store&&t.store.get&&this.sort(t.store.get(this)||[]),i(this,F())}function Ue(e,t,r,n,o,i,s,a){var l,d,h=e[R],p=h.options.onMove;return!window.CustomEvent||c||u?(l=document.createEvent("Event")).initEvent("move",!0,!0):l=new CustomEvent("move",{bubbles:!0,cancelable:!0}),l.to=t,l.from=e,l.dragged=r,l.draggedRect=n,l.related=o||t,l.relatedRect=i||A(t),l.willInsertAfter=a,l.originalEvent=s,e.dispatchEvent(l),p&&(d=p.call(h,l,s)),d}function Re(e){e.draggable=!1}function Fe(){ke=!1}function qe(e){for(var t=e.tagName+e.className+e.src+e.href+e.textContent,r=t.length,n=0;r--;)n+=t.charCodeAt(r);return n.toString(36)}function $e(e){return setTimeout(e,0)}function We(e){return clearTimeout(e)}Be.prototype={constructor:Be,_isOutsideThisEl:function(e){this.el.contains(e)||e===this.el||(fe=null)},_getDirection:function(e,t){return"function"===typeof this.options.direction?this.options.direction.call(this,e,t,G):this.options.direction},_onTapStart:function(e){if(e.cancelable){var t=this,r=this.el,n=this.options,o=n.preventOnFilter,i=e.type,s=e.touches&&e.touches[0]||e.pointerType&&"touch"===e.pointerType&&e,a=(s||e).target,l=e.target.shadowRoot&&(e.path&&e.path[0]||e.composedPath&&e.composedPath()[0])||a,c=n.filter;if(function(e){Se.length=0;var t=e.getElementsByTagName("input"),r=t.length;for(;r--;){var n=t[r];n.checked&&Se.push(n)}}(r),!G&&!(/mousedown|pointerdown/.test(i)&&0!==e.button||n.disabled)&&!l.isContentEditable&&(this.nativeDraggable||!h||!a||"SELECT"!==a.tagName.toUpperCase())&&(!(a=O(a,n.draggable,r,!1))||!a.animated)&&Z!==a){if(te=M(a),ne=M(a,n.draggable),"function"===typeof c){if(c.call(this,e,a,this))return J({sortable:t,rootEl:l,name:"filter",targetEl:a,toEl:r,fromEl:r}),z("filter",t,{evt:e}),void(o&&e.cancelable&&e.preventDefault())}else if(c&&(c=c.split(",").some((function(n){if(n=O(l,n.trim(),r,!1))return J({sortable:t,rootEl:n,name:"filter",targetEl:a,fromEl:r,toEl:r}),z("filter",t,{evt:e}),!0}))))return void(o&&e.cancelable&&e.preventDefault());n.handle&&!O(l,n.handle,r,!1)||this._prepareDragStart(e,s,a)}}},_prepareDragStart:function(e,t,r){var n,o=this,i=o.el,s=o.options,a=i.ownerDocument;if(r&&!G&&r.parentNode===i){var l=A(r);if(K=i,H=(G=r).parentNode,X=G.nextSibling,Z=r,ie=s.group,Be.dragged=G,ae={target:G,clientX:(t||e).clientX,clientY:(t||e).clientY},de=ae.clientX-l.left,he=ae.clientY-l.top,this._lastX=(t||e).clientX,this._lastY=(t||e).clientY,G.style["will-change"]="all",n=function(){z("delayEnded",o,{evt:e}),Be.eventCanceled?o._onDrop():(o._disableDelayedDragEvents(),!d&&o.nativeDraggable&&(G.draggable=!0),o._triggerDragStart(e,t),J({sortable:o,name:"choose",originalEvent:e}),_(G,s.chosenClass,!0))},s.ignore.split(",").forEach((function(e){x(G,e.trim(),Re)})),m(a,"dragover",Le),m(a,"mousemove",Le),m(a,"touchmove",Le),m(a,"mouseup",o._onDrop),m(a,"touchend",o._onDrop),m(a,"touchcancel",o._onDrop),d&&this.nativeDraggable&&(this.options.touchStartThreshold=4,G.draggable=!0),z("delayStart",this,{evt:e}),!s.delay||s.delayOnTouchOnly&&!t||this.nativeDraggable&&(u||c))n();else{if(Be.eventCanceled)return void this._onDrop();m(a,"mouseup",o._disableDelayedDrag),m(a,"touchend",o._disableDelayedDrag),m(a,"touchcancel",o._disableDelayedDrag),m(a,"mousemove",o._delayedDragTouchMoveHandler),m(a,"touchmove",o._delayedDragTouchMoveHandler),s.supportPointer&&m(a,"pointermove",o._delayedDragTouchMoveHandler),o._dragStartTimer=setTimeout(n,s.delay)}}},_delayedDragTouchMoveHandler:function(e){var t=e.touches?e.touches[0]:e;Math.max(Math.abs(t.clientX-this._lastX),Math.abs(t.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){G&&Re(G),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var e=this.el.ownerDocument;g(e,"mouseup",this._disableDelayedDrag),g(e,"touchend",this._disableDelayedDrag),g(e,"touchcancel",this._disableDelayedDrag),g(e,"mousemove",this._delayedDragTouchMoveHandler),g(e,"touchmove",this._delayedDragTouchMoveHandler),g(e,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(e,t){t=t||"touch"==e.pointerType&&e,!this.nativeDraggable||t?this.options.supportPointer?m(document,"pointermove",this._onTouchMove):m(document,t?"touchmove":"mousemove",this._onTouchMove):(m(G,"dragend",this),m(K,"dragstart",this._onDragStart));try{document.selection?$e((function(){document.selection.empty()})):window.getSelection().removeAllRanges()}catch(r){}},_dragStarted:function(e,t){if(ye=!1,K&&G){z("dragStarted",this,{evt:t}),this.nativeDraggable&&m(document,"dragover",De);var r=this.options;!e&&_(G,r.dragClass,!1),_(G,r.ghostClass,!0),Be.active=this,e&&this._appendGhost(),J({sortable:this,name:"start",originalEvent:t})}else this._nulling()},_emulateDragOver:function(){if(le){this._lastX=le.clientX,this._lastY=le.clientY,Ne();for(var e=document.elementFromPoint(le.clientX,le.clientY),t=e;e&&e.shadowRoot&&(e=e.shadowRoot.elementFromPoint(le.clientX,le.clientY))!==t;)t=e;if(G.parentNode[R]._isOutsideThisEl(e),t)do{if(t[R]){if(t[R]._onDragOver({clientX:le.clientX,clientY:le.clientY,target:e,rootEl:t})&&!this.options.dragoverBubble)break}e=t}while(t=t.parentNode);Pe()}},_onTouchMove:function(e){if(ae){var t=this.options,r=t.fallbackTolerance,n=t.fallbackOffset,o=e.touches?e.touches[0]:e,i=Y&&S(Y,!0),s=Y&&i&&i.a,a=Y&&i&&i.d,l=Ee&&ge&&N(ge),c=(o.clientX-ae.clientX+n.x)/(s||1)+(l?l[0]-_e[0]:0)/(s||1),u=(o.clientY-ae.clientY+n.y)/(a||1)+(l?l[1]-_e[1]:0)/(a||1);if(!Be.active&&!ye){if(r&&Math.max(Math.abs(o.clientX-this._lastX),Math.abs(o.clientY-this._lastY))<r)return;this._onDragStart(e,!0)}if(Y){i?(i.e+=c-(ce||0),i.f+=u-(ue||0)):i={a:1,b:0,c:0,d:1,e:c,f:u};var d="matrix(".concat(i.a,",").concat(i.b,",").concat(i.c,",").concat(i.d,",").concat(i.e,",").concat(i.f,")");k(Y,"webkitTransform",d),k(Y,"mozTransform",d),k(Y,"msTransform",d),k(Y,"transform",d),ce=c,ue=u,le=o}e.cancelable&&e.preventDefault()}},_appendGhost:function(){if(!Y){var e=this.options.fallbackOnBody?document.body:K,t=A(G,!0,Ee,!0,e),r=this.options;if(Ee){for(ge=e;"static"===k(ge,"position")&&"none"===k(ge,"transform")&&ge!==document;)ge=ge.parentNode;ge!==document.body&&ge!==document.documentElement?(ge===document&&(ge=E()),t.top+=ge.scrollTop,t.left+=ge.scrollLeft):ge=E(),_e=N(ge)}_(Y=G.cloneNode(!0),r.ghostClass,!1),_(Y,r.fallbackClass,!0),_(Y,r.dragClass,!0),k(Y,"transition",""),k(Y,"transform",""),k(Y,"box-sizing","border-box"),k(Y,"margin",0),k(Y,"top",t.top),k(Y,"left",t.left),k(Y,"width",t.width),k(Y,"height",t.height),k(Y,"opacity","0.8"),k(Y,"position",Ee?"absolute":"fixed"),k(Y,"zIndex","100000"),k(Y,"pointerEvents","none"),Be.ghost=Y,e.appendChild(Y),k(Y,"transform-origin",de/parseInt(Y.style.width)*100+"% "+he/parseInt(Y.style.height)*100+"%")}},_onDragStart:function(e,t){var r=this,n=e.dataTransfer,o=r.options;z("dragStart",this,{evt:e}),Be.eventCanceled?this._onDrop():(z("setupClone",this),Be.eventCanceled||((Q=U(G)).draggable=!1,Q.style["will-change"]="",this._hideClone(),_(Q,this.options.chosenClass,!1),Be.clone=Q),r.cloneId=$e((function(){z("clone",r),Be.eventCanceled||(r.options.removeCloneOnHide||K.insertBefore(Q,G),r._hideClone(),J({sortable:r,name:"clone"}))})),!t&&_(G,o.dragClass,!0),t?(ve=!0,r._loopId=setInterval(r._emulateDragOver,50)):(g(document,"mouseup",r._onDrop),g(document,"touchend",r._onDrop),g(document,"touchcancel",r._onDrop),n&&(n.effectAllowed="move",o.setData&&o.setData.call(r,n,G)),m(document,"drop",r),k(G,"transform","translateZ(0)")),ye=!0,r._dragStartId=$e(r._dragStarted.bind(r,t,e)),m(document,"selectstart",r),pe=!0,h&&k(document.body,"user-select","none"))},_onDragOver:function(e){var t,r,n,o,i=this.el,a=e.target,l=this.options,c=l.group,u=Be.active,d=ie===c,h=l.sort,p=se||u,f=this,b=!1;if(!ke){if(void 0!==e.preventDefault&&e.cancelable&&e.preventDefault(),a=O(a,l.draggable,i,!0),D("dragOver"),Be.eventCanceled)return b;if(G.contains(e.target)||a.animated&&a.animatingX&&a.animatingY||f._ignoreWhileAnimating===a)return F(!1);if(ve=!1,u&&!l.disabled&&(d?h||(n=!K.contains(G)):se===this||(this.lastPutMode=ie.checkPull(this,u,G,e))&&c.checkPut(this,u,G,e))){if(o="vertical"===this._getDirection(e,a),t=A(G),D("dragOverValid"),Be.eventCanceled)return b;if(n)return H=K,U(),this._hideClone(),D("revert"),Be.eventCanceled||(X?K.insertBefore(G,X):K.appendChild(G)),F(!0);var m=C(i,l.draggable);if(!m||function(e,t,r){var n=A(C(r.el,r.options.draggable)),o=10;return t?e.clientX>n.right+o||e.clientX<=n.right&&e.clientY>n.bottom&&e.clientX>=n.left:e.clientX>n.right&&e.clientY>n.top||e.clientX<=n.right&&e.clientY>n.bottom+o}(e,o,this)&&!m.animated){if(m===G)return F(!1);if(m&&i===e.target&&(a=m),a&&(r=A(a)),!1!==Ue(K,i,G,t,a,r,e,!!a))return U(),i.appendChild(G),H=i,q(),F(!0)}else if(a.parentNode===i){r=A(a);var g,y,v,j=G.parentNode!==i,w=!function(e,t,r){var n=r?e.left:e.top,o=r?e.right:e.bottom,i=r?e.width:e.height,s=r?t.left:t.top,a=r?t.right:t.bottom,l=r?t.width:t.height;return n===s||o===a||n+i/2===s+l/2}(G.animated&&G.toRect||t,a.animated&&a.toRect||r,o),S=o?"top":"left",x=T(a,"top","top")||T(G,"top","top"),E=x?x.scrollTop:void 0;if(fe!==a&&(y=r[S],je=!1,we=!w&&l.invertSwap||j),0!==(g=function(e,t,r,n,o,i,s,a){var l=n?e.clientY:e.clientX,c=n?r.height:r.width,u=n?r.top:r.left,d=n?r.bottom:r.right,h=!1;if(!s)if(a&&me<c*o){if(!je&&(1===be?l>u+c*i/2:l<d-c*i/2)&&(je=!0),je)h=!0;else if(1===be?l<u+me:l>d-me)return-be}else if(l>u+c*(1-o)/2&&l<d-c*(1-o)/2)return function(e){return M(G)<M(e)?1:-1}(t);if((h=h||s)&&(l<u+c*i/2||l>d-c*i/2))return l>u+c/2?1:-1;return 0}(e,a,r,o,w?1:l.swapThreshold,null==l.invertedSwapThreshold?l.swapThreshold:l.invertedSwapThreshold,we,fe===a))){var I=M(G);do{I-=g,v=H.children[I]}while(v&&("none"===k(v,"display")||v===Y))}if(0===g||v===a)return F(!1);fe=a,be=g;var N=a.nextElementSibling,P=!1,L=Ue(K,i,G,t,a,r,e,P=1===g);if(!1!==L)return 1!==L&&-1!==L||(P=1===L),ke=!0,setTimeout(Fe,30),U(),P&&!N?i.appendChild(G):a.parentNode.insertBefore(G,P?N:a),x&&B(x,0,E-x.scrollTop),H=G.parentNode,void 0===y||we||(me=Math.abs(y-A(a)[S])),q(),F(!0)}if(i.contains(G))return F(!1)}return!1}function D(l,c){z(l,f,s({evt:e,isOwner:d,axis:o?"vertical":"horizontal",revert:n,dragRect:t,targetRect:r,canSort:h,fromSortable:p,target:a,completed:F,onMove:function(r,n){return Ue(K,i,G,t,r,A(r),e,n)},changed:q},c))}function U(){D("dragOverAnimationCapture"),f.captureAnimationState(),f!==p&&p.captureAnimationState()}function F(t){return D("dragOverCompleted",{insertion:t}),t&&(d?u._hideClone():u._showClone(f),f!==p&&(_(G,se?se.options.ghostClass:u.options.ghostClass,!1),_(G,l.ghostClass,!0)),se!==f&&f!==Be.active?se=f:f===Be.active&&se&&(se=null),p===f&&(f._ignoreWhileAnimating=a),f.animateAll((function(){D("dragOverAnimationComplete"),f._ignoreWhileAnimating=null})),f!==p&&(p.animateAll(),p._ignoreWhileAnimating=null)),(a===G&&!G.animated||a===i&&!a.animated)&&(fe=null),l.dragoverBubble||e.rootEl||a===document||(G.parentNode[R]._isOutsideThisEl(e.target),!t&&Le(e)),!l.dragoverBubble&&e.stopPropagation&&e.stopPropagation(),b=!0}function q(){re=M(G),oe=M(G,l.draggable),J({sortable:f,name:"change",toEl:i,newIndex:re,newDraggableIndex:oe,originalEvent:e})}},_ignoreWhileAnimating:null,_offMoveEvents:function(){g(document,"mousemove",this._onTouchMove),g(document,"touchmove",this._onTouchMove),g(document,"pointermove",this._onTouchMove),g(document,"dragover",Le),g(document,"mousemove",Le),g(document,"touchmove",Le)},_offUpEvents:function(){var e=this.el.ownerDocument;g(e,"mouseup",this._onDrop),g(e,"touchend",this._onDrop),g(e,"pointerup",this._onDrop),g(e,"touchcancel",this._onDrop),g(document,"selectstart",this)},_onDrop:function(e){var t=this.el,r=this.options;re=M(G),oe=M(G,r.draggable),z("drop",this,{evt:e}),H=G&&G.parentNode,re=M(G),oe=M(G,r.draggable),Be.eventCanceled||(ye=!1,we=!1,je=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),We(this.cloneId),We(this._dragStartId),this.nativeDraggable&&(g(document,"drop",this),g(t,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),h&&k(document.body,"user-select",""),k(G,"transform",""),e&&(pe&&(e.cancelable&&e.preventDefault(),!r.dropBubble&&e.stopPropagation()),Y&&Y.parentNode&&Y.parentNode.removeChild(Y),(K===H||se&&"clone"!==se.lastPutMode)&&Q&&Q.parentNode&&Q.parentNode.removeChild(Q),G&&(this.nativeDraggable&&g(G,"dragend",this),Re(G),G.style["will-change"]="",pe&&!ye&&_(G,se?se.options.ghostClass:this.options.ghostClass,!1),_(G,this.options.chosenClass,!1),J({sortable:this,name:"unchoose",toEl:H,newIndex:null,newDraggableIndex:null,originalEvent:e}),K!==H?(re>=0&&(J({rootEl:H,name:"add",toEl:H,fromEl:K,originalEvent:e}),J({sortable:this,name:"remove",toEl:H,originalEvent:e}),J({rootEl:H,name:"sort",toEl:H,fromEl:K,originalEvent:e}),J({sortable:this,name:"sort",toEl:H,originalEvent:e})),se&&se.save()):re!==te&&re>=0&&(J({sortable:this,name:"update",toEl:H,originalEvent:e}),J({sortable:this,name:"sort",toEl:H,originalEvent:e})),Be.active&&(null!=re&&-1!==re||(re=te,oe=ne),J({sortable:this,name:"end",toEl:H,originalEvent:e}),this.save())))),this._nulling()},_nulling:function(){z("nulling",this),K=G=H=Y=X=Q=Z=ee=ae=le=pe=re=oe=te=ne=fe=be=se=ie=Be.dragged=Be.ghost=Be.clone=Be.active=null,Se.forEach((function(e){e.checked=!0})),Se.length=ce=ue=0},handleEvent:function(e){switch(e.type){case"drop":case"dragend":this._onDrop(e);break;case"dragenter":case"dragover":G&&(this._onDragOver(e),function(e){e.dataTransfer&&(e.dataTransfer.dropEffect="move");e.cancelable&&e.preventDefault()}(e));break;case"selectstart":e.preventDefault()}},toArray:function(){for(var e,t=[],r=this.el.children,n=0,o=r.length,i=this.options;n<o;n++)O(e=r[n],i.draggable,this.el,!1)&&t.push(e.getAttribute(i.dataIdAttr)||qe(e));return t},sort:function(e,t){var r={},n=this.el;this.toArray().forEach((function(e,t){var o=n.children[t];O(o,this.options.draggable,n,!1)&&(r[e]=o)}),this),t&&this.captureAnimationState(),e.forEach((function(e){r[e]&&(n.removeChild(r[e]),n.appendChild(r[e]))})),t&&this.animateAll()},save:function(){var e=this.options.store;e&&e.set&&e.set(this)},closest:function(e,t){return O(e,t||this.options.draggable,this.el,!1)},option:function(e,t){var r=this.options;if(void 0===t)return r[e];var n=W.modifyOption(this,e,t);r[e]="undefined"!==typeof n?n:t,"group"===e&&Me(r)},destroy:function(){z("destroy",this);var e=this.el;e[R]=null,g(e,"mousedown",this._onTapStart),g(e,"touchstart",this._onTapStart),g(e,"pointerdown",this._onTapStart),this.nativeDraggable&&(g(e,"dragover",this),g(e,"dragenter",this)),Array.prototype.forEach.call(e.querySelectorAll("[draggable]"),(function(e){e.removeAttribute("draggable")})),this._onDrop(),this._disableDelayedDragEvents(),Oe.splice(Oe.indexOf(this.el),1),this.el=e=null},_hideClone:function(){if(!ee){if(z("hideClone",this),Be.eventCanceled)return;k(Q,"display","none"),this.options.removeCloneOnHide&&Q.parentNode&&Q.parentNode.removeChild(Q),ee=!0}},_showClone:function(e){if("clone"===e.lastPutMode){if(ee){if(z("showClone",this),Be.eventCanceled)return;G.parentNode!=K||this.options.group.revertClone?X?K.insertBefore(Q,X):K.appendChild(Q):K.insertBefore(Q,G),this.options.group.revertClone&&this.animate(G,Q),k(Q,"display",""),ee=!1}}else this._hideClone()}},xe&&m(document,"touchmove",(function(e){(Be.active||ye)&&e.cancelable&&e.preventDefault()})),Be.utils={on:m,off:g,css:k,find:x,is:function(e,t){return!!O(e,t,e,!1)},extend:function(e,t){if(e&&t)for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);return e},throttle:D,closest:O,toggleClass:_,clone:U,index:M,nextTick:$e,cancelNextTick:We,detectDirection:Ce,getChild:I},Be.get=function(e){return e[R]},Be.mount=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];t[0].constructor===Array&&(t=t[0]),t.forEach((function(e){if(!e.prototype||!e.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(e));e.utils&&(Be.utils=s({},Be.utils,e.utils)),W.mount(e)}))},Be.create=function(e,t){return new Be(e,t)},Be.version="1.13.0";var Ve,ze,Je,Ge,He,Ye,Ke=[],Xe=!1;function Ze(){Ke.forEach((function(e){clearInterval(e.pid)})),Ke=[]}function Qe(){clearInterval(Ye)}var et=D((function(e,t,r,n){if(t.scroll){var o,i=(e.touches?e.touches[0]:e).clientX,s=(e.touches?e.touches[0]:e).clientY,a=t.scrollSensitivity,l=t.scrollSpeed,c=E(),u=!1;ze!==r&&(ze=r,Ze(),Ve=t.scroll,o=t.scrollFn,!0===Ve&&(Ve=P(r,!0)));var d=0,h=Ve;do{var p=h,f=A(p),b=f.top,m=f.bottom,g=f.left,y=f.right,v=f.width,O=f.height,j=void 0,w=void 0,_=p.scrollWidth,S=p.scrollHeight,x=k(p),T=p.scrollLeft,I=p.scrollTop;p===c?(j=v<_&&("auto"===x.overflowX||"scroll"===x.overflowX||"visible"===x.overflowX),w=O<S&&("auto"===x.overflowY||"scroll"===x.overflowY||"visible"===x.overflowY)):(j=v<_&&("auto"===x.overflowX||"scroll"===x.overflowX),w=O<S&&("auto"===x.overflowY||"scroll"===x.overflowY));var C=j&&(Math.abs(y-i)<=a&&T+v<_)-(Math.abs(g-i)<=a&&!!T),M=w&&(Math.abs(m-s)<=a&&I+O<S)-(Math.abs(b-s)<=a&&!!I);if(!Ke[d])for(var N=0;N<=d;N++)Ke[N]||(Ke[N]={});Ke[d].vx==C&&Ke[d].vy==M&&Ke[d].el===p||(Ke[d].el=p,Ke[d].vx=C,Ke[d].vy=M,clearInterval(Ke[d].pid),0==C&&0==M||(u=!0,Ke[d].pid=setInterval(function(){n&&0===this.layer&&Be.active._onTouchMove(He);var t=Ke[this.layer].vy?Ke[this.layer].vy*l:0,r=Ke[this.layer].vx?Ke[this.layer].vx*l:0;"function"===typeof o&&"continue"!==o.call(Be.dragged.parentNode[R],r,t,e,He,Ke[this.layer].el)||B(Ke[this.layer].el,r,t)}.bind({layer:d}),24))),d++}while(t.bubbleScroll&&h!==c&&(h=P(h,!1)));Xe=u}}),30),tt=function(e){var t=e.originalEvent,r=e.putSortable,n=e.dragEl,o=e.activeSortable,i=e.dispatchSortableEvent,s=e.hideGhostForTarget,a=e.unhideGhostForTarget;if(t){var l=r||o;s();var c=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:t,u=document.elementFromPoint(c.clientX,c.clientY);a(),l&&!l.el.contains(u)&&(i("spill"),this.onSpill({dragEl:n,putSortable:r}))}};function rt(){}function nt(){}rt.prototype={startIndex:null,dragStart:function(e){var t=e.oldDraggableIndex;this.startIndex=t},onSpill:function(e){var t=e.dragEl,r=e.putSortable;this.sortable.captureAnimationState(),r&&r.captureAnimationState();var n=I(this.sortable.el,this.startIndex,this.options);n?this.sortable.el.insertBefore(t,n):this.sortable.el.appendChild(t),this.sortable.animateAll(),r&&r.animateAll()},drop:tt},i(rt,{pluginName:"revertOnSpill"}),nt.prototype={onSpill:function(e){var t=e.dragEl,r=e.putSortable||this.sortable;r.captureAnimationState(),t.parentNode&&t.parentNode.removeChild(t),r.animateAll()},drop:tt},i(nt,{pluginName:"removeOnSpill"});Be.mount(new function(){function e(){for(var e in this.defaults={scroll:!0,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0},this)"_"===e.charAt(0)&&"function"===typeof this[e]&&(this[e]=this[e].bind(this))}return e.prototype={dragStarted:function(e){var t=e.originalEvent;this.sortable.nativeDraggable?m(document,"dragover",this._handleAutoScroll):this.options.supportPointer?m(document,"pointermove",this._handleFallbackAutoScroll):t.touches?m(document,"touchmove",this._handleFallbackAutoScroll):m(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(e){var t=e.originalEvent;this.options.dragOverBubble||t.rootEl||this._handleAutoScroll(t)},drop:function(){this.sortable.nativeDraggable?g(document,"dragover",this._handleAutoScroll):(g(document,"pointermove",this._handleFallbackAutoScroll),g(document,"touchmove",this._handleFallbackAutoScroll),g(document,"mousemove",this._handleFallbackAutoScroll)),Qe(),Ze(),clearTimeout(j),j=void 0},nulling:function(){He=ze=Ve=Xe=Ye=Je=Ge=null,Ke.length=0},_handleFallbackAutoScroll:function(e){this._handleAutoScroll(e,!0)},_handleAutoScroll:function(e,t){var r=this,n=(e.touches?e.touches[0]:e).clientX,o=(e.touches?e.touches[0]:e).clientY,i=document.elementFromPoint(n,o);if(He=e,t||u||c||h){et(e,this.options,i,t);var s=P(i,!0);!Xe||Ye&&n===Je&&o===Ge||(Ye&&Qe(),Ye=setInterval((function(){var i=P(document.elementFromPoint(n,o),!0);i!==s&&(s=i,Ze()),et(e,r.options,i,t)}),10),Je=n,Ge=o)}else{if(!this.options.bubbleScroll||P(i,!0)===E())return void Ze();et(e,this.options,P(i,!1),!1)}}},i(e,{pluginName:"scroll",initializeByDefault:!0})}),Be.mount(nt,rt),t.a=Be},102:function(e,t,r){"use strict";var n,o=r(78),i=r(278),s=r(121),a=r(85),l=r(82),c=r(181),u=r(215),d=r(81),h=r(214),p=r(80),f=r(79),b=r(349);class m{constructor(){this._observers=[]}observe(e){return this._observers.includes(e)||this._observers.push(e),new b.a(this._observers,e)}notify(){const e=this._observers.slice();for(let t=0;t<e.length;++t){const r=e[t];r.onInvalidated(),r.onCommitted()}}}const g=new c.a(class{constructor(){this.target=null,this.cancellable=!1,this.defaultPrevented=!1,this.item=void 0,this.type=void 0}preventDefault(){this.cancellable&&(this.defaultPrevented=!0)}reset(e){this.defaultPrevented=!1,this.item=e}},void 0,(e=>{e.item=null,e.target=null,e.defaultPrevented=!1,e.cancellable=!1})),y=()=>{};function v(e){return e?e instanceof A?e.toArray():e.length?Array.prototype.slice.apply(e):[]:[]}function O(e){if(e&&e.length)return e[0]}function j(e,t,r,n){const o=Math.min(e.length-r,t.length-n);let i=0;for(;i<o&&e[r+i]===t[n+i];)i++;return i}function w(e,t,r,n){t&&t.forEach(((t,o,i)=>{e.push(t),w(e,r.call(n,t,o,i),r,n)}))}const _=new Set,k=new Set,S=new Set,x=new Map;let E=0,A=n=class extends s.a.EventedAccessor{constructor(e){super(e),this._chgListeners=[],this._notifications=null,this._timer=null,this._observable=new m,this.length=0,this._items=[],Object.defineProperty(this,"uid",{value:E++})}static isCollection(e){return null!=e&&e instanceof n}normalizeCtorArgs(e){return e?Array.isArray(e)||e instanceof n?{items:e}:e:{}}*[Symbol.iterator](){yield*this.items}get items(){return Object(h.c)(this._observable),this._items}set items(e){this._emitBeforeChanges(1)||(this._splice(0,this.length,...v(e)),this._emitAfterChanges(1))}hasEventListener(e){return"change"===e?this._chgListeners.length>0:this._emitter.hasEventListener(e)}on(e,t){if("change"===e){const e=this._chgListeners,r={removed:!1,callback:t};return e.push(r),this._notifications&&this._notifications.push({listeners:e.slice(),items:this._items.slice(),changes:[]}),{remove(){this.remove=y,r.removed=!0,e.splice(e.indexOf(r),1)}}}return this._emitter.on(e,t)}once(e,t){const r=this.on(e,t);return{remove(){r.remove()}}}add(e,t){if(Object(h.c)(this._observable),this._emitBeforeChanges(1))return this;const r=this.getNextIndex(null!=t?t:null);return this._splice(r,0,e),this._emitAfterChanges(1),this}addMany(e,t=this._items.length){if(Object(h.c)(this._observable),!e||!e.length)return this;if(this._emitBeforeChanges(1))return this;const r=this.getNextIndex(t);return this._splice(r,0,...v(e)),this._emitAfterChanges(1),this}removeAll(){if(Object(h.c)(this._observable),!this.length||this._emitBeforeChanges(2))return[];const e=this._splice(0,this.length)||[];return this._emitAfterChanges(2),e}clone(){return Object(h.c)(this._observable),this._createNewInstance({items:this._items.map(a.a)})}concat(...e){Object(h.c)(this._observable);const t=e.map(v);return this._createNewInstance({items:this._items.concat(...t)})}drain(e,t){if(Object(h.c)(this._observable),!this.length||this._emitBeforeChanges(2))return;const r=Object(l.d)(this._splice(0,this.length)),n=r.length;for(let o=0;o<n;o++)e.call(t,r[o],o,r);this._emitAfterChanges(2)}every(e,t){return Object(h.c)(this._observable),this._items.every(e,t)}filter(e,t){let r;return Object(h.c)(this._observable),r=2===arguments.length?this._items.filter(e,t):this._items.filter(e),this._createNewInstance({items:r})}find(e,t){return Object(h.c)(this._observable),this._items.find(e,t)}findIndex(e,t){return Object(h.c)(this._observable),this._items.findIndex(e,t)}flatten(e,t){Object(h.c)(this._observable);const r=[];return w(r,this,e,t),new n(r)}forEach(e,t){return Object(h.c)(this._observable),this._items.forEach(e,t)}getItemAt(e){return Object(h.c)(this._observable),this._items[e]}getNextIndex(e){Object(h.c)(this._observable);const t=this.length;return(e=null==e?t:e)<0?e=0:e>t&&(e=t),e}includes(e,t=0){return Object(h.c)(this._observable),this._items.includes(e,t)}indexOf(e,t=0){return Object(h.c)(this._observable),this._items.indexOf(e,t)}join(e=","){return Object(h.c)(this._observable),this._items.join(e)}lastIndexOf(e,t=this.length-1){return Object(h.c)(this._observable),this._items.lastIndexOf(e,t)}map(e,t){Object(h.c)(this._observable);const r=this._items.map(e,t);return new n({items:r})}reorder(e,t=this.length-1){Object(h.c)(this._observable);const r=this.indexOf(e);if(-1!==r){if(t<0?t=0:t>=this.length&&(t=this.length-1),r!==t){if(this._emitBeforeChanges(4))return e;this._splice(r,1),this._splice(t,0,e),this._emitAfterChanges(4)}return e}}pop(){if(Object(h.c)(this._observable),!this.length||this._emitBeforeChanges(2))return;const e=O(this._splice(this.length-1,1));return this._emitAfterChanges(2),e}push(...e){return Object(h.c)(this._observable),this._emitBeforeChanges(1)||(this._splice(this.length,0,...e),this._emitAfterChanges(1)),this.length}reduce(e,t){Object(h.c)(this._observable);const r=this._items;return 2===arguments.length?r.reduce(e,t):r.reduce(e)}reduceRight(e,t){Object(h.c)(this._observable);const r=this._items;return 2===arguments.length?r.reduceRight(e,t):r.reduceRight(e)}remove(e){return Object(h.c)(this._observable),this.removeAt(this.indexOf(e))}removeAt(e){if(Object(h.c)(this._observable),e<0||e>=this.length||this._emitBeforeChanges(2))return;const t=O(this._splice(e,1));return this._emitAfterChanges(2),t}removeMany(e){if(Object(h.c)(this._observable),!e||!e.length||this._emitBeforeChanges(2))return[];const t=e instanceof n?e.toArray():e,r=this._items,o=[],i=t.length;for(let n=0;n<i;n++){const e=t[n],i=r.indexOf(e);if(i>-1){const e=1+j(t,r,n+1,i+1),s=this._splice(i,e);s&&s.length>0&&o.push.apply(o,s),n+=e-1}}return this._emitAfterChanges(2),o}reverse(){if(Object(h.c)(this._observable),this._emitBeforeChanges(4))return this;const e=this._splice(0,this.length);return e&&(e.reverse(),this._splice(0,0,...e)),this._emitAfterChanges(4),this}shift(){if(Object(h.c)(this._observable),!this.length||this._emitBeforeChanges(2))return;const e=O(this._splice(0,1));return this._emitAfterChanges(2),e}slice(e=0,t=this.length){return Object(h.c)(this._observable),this._createNewInstance({items:this._items.slice(e,t)})}some(e,t){return Object(h.c)(this._observable),this._items.some(e,t)}sort(e){if(Object(h.c)(this._observable),!this.length||this._emitBeforeChanges(4))return this;const t=Object(l.d)(this._splice(0,this.length));return arguments.length?t.sort(e):t.sort(),this._splice(0,0,...t),this._emitAfterChanges(4),this}splice(e,t,...r){Object(h.c)(this._observable);const n=(t?2:0)|(r.length?1:0);if(this._emitBeforeChanges(n))return[];const o=this._splice(e,t,...r)||[];return this._emitAfterChanges(n),o}toArray(){return Object(h.c)(this._observable),this._items.slice()}toJSON(){return Object(h.c)(this._observable),this.toArray()}toLocaleString(){return Object(h.c)(this._observable),this._items.toLocaleString()}toString(){return Object(h.c)(this._observable),this._items.toString()}unshift(...e){return Object(h.c)(this._observable),!e.length||this._emitBeforeChanges(1)||(this._splice(0,0,...e),this._emitAfterChanges(1)),this.length}_createNewInstance(e){return new this.constructor(e)}_splice(e,t,...r){const n=this._items,o=this.constructor.prototype.itemType;let i,s;if(!this._notifications&&this.hasEventListener("change")&&(this._notifications=[{listeners:this._chgListeners.slice(),items:this._items.slice(),changes:[]}],this._timer&&this._timer.remove(),this._timer=Object(u.b)((()=>this._dispatchChange()))),t){if(s=n.splice(e,t),this.hasEventListener("before-remove")){const t=g.acquire();t.target=this,t.cancellable=!0;for(let r=0,o=s.length;r<o;r++)i=s[r],t.reset(i),this.emit("before-remove",t),t.defaultPrevented&&(s.splice(r,1),n.splice(e,0,i),e+=1,r-=1,o-=1);g.release(t)}if(this.length=this._items.length,this.hasEventListener("after-remove")){const e=g.acquire();e.target=this,e.cancellable=!1;const t=s.length;for(let r=0;r<t;r++)e.reset(s[r]),this.emit("after-remove",e);g.release(e)}}if(r&&r.length){if(o){const e=[];for(const t of r){const r=o.ensureType(t);null==r&&null!=t||e.push(r)}r=e}const t=this.hasEventListener("before-add"),i=this.hasEventListener("after-add"),s=e===this.length;if(t||i){const o=g.acquire();o.target=this,o.cancellable=!0;const a=g.acquire();a.target=this,a.cancellable=!1;for(const l of r)t?(o.reset(l),this.emit("before-add",o),o.defaultPrevented||(s?n.push(l):n.splice(e++,0,l),this._set("length",n.length),i&&(a.reset(l),this.emit("after-add",a)))):(s?n.push(l):n.splice(e++,0,l),this._set("length",n.length),a.reset(l),this.emit("after-add",a));g.release(a),g.release(o)}else{if(s)for(const e of r)n.push(e);else n.splice(e,0,...r);this._set("length",n.length)}}return(r&&r.length||s&&s.length)&&this._notifyChangeEvent(r,s),s}_emitBeforeChanges(e){let t=!1;if(this.hasEventListener("before-changes")){const r=g.acquire();r.target=this,r.cancellable=!0,r.type=e,this.emit("before-changes",r),t=r.defaultPrevented,g.release(r)}return t}_emitAfterChanges(e){if(this.hasEventListener("after-changes")){const t=g.acquire();t.target=this,t.cancellable=!1,t.type=e,this.emit("after-changes",t),g.release(t)}this._observable.notify()}_notifyChangeEvent(e,t){this.hasEventListener("change")&&this._notifications&&this._notifications[this._notifications.length-1].changes.push({added:e,removed:t})}_dispatchChange(){if(this._timer&&(this._timer.remove(),this._timer=null),!this._notifications)return;const e=this._notifications;this._notifications=null;for(const t of e){const e=t.changes;_.clear(),k.clear(),S.clear();for(const{added:t,removed:i}of e){if(t)if(0===S.size&&0===k.size)for(const e of t)_.add(e);else for(const e of t)k.has(e)?(S.add(e),k.delete(e)):S.has(e)||_.add(e);if(i)if(0===S.size&&0===_.size)for(const e of i)k.add(e);else for(const e of i)_.has(e)?_.delete(e):(S.delete(e),k.add(e))}const r=i.a.acquire();_.forEach((e=>{r.push(e)}));const n=i.a.acquire();k.forEach((e=>{n.push(e)}));const o=this._items,s=t.items,a=i.a.acquire();if(S.forEach((e=>{s.indexOf(e)!==o.indexOf(e)&&a.push(e)})),t.listeners&&(r.length||n.length||a.length)){const e={target:this,added:r,removed:n,moved:a},o=t.listeners.length;for(let r=0;r<o;r++){const n=t.listeners[r];n.removed||n.callback.call(this,e)}}i.a.release(r),i.a.release(n),i.a.release(a)}_.clear(),k.clear(),S.clear()}};A.ofType=e=>{if(!e)return n;if(x.has(e))return x.get(e);let t=null;if("function"==typeof e)t=e.prototype.declaredClass;else if(e.base)t=e.base.prototype.declaredClass;else for(const n in e.typeMap){const r=e.typeMap[n].prototype.declaredClass;t?t+=` | ${r}`:t=r}let r=class extends n{};r=Object(o.a)([Object(f.a)(`esri.core.Collection<${t}>`)],r);const i={Type:e,ensureType:"function"==typeof e?Object(d.m)(e):Object(d.k)(e)};return Object.defineProperty(r.prototype,"itemType",{value:i}),x.set(e,r),r},Object(o.a)([Object(p.b)()],A.prototype,"length",void 0),Object(o.a)([Object(p.b)()],A.prototype,"items",null),A=n=Object(o.a)([Object(f.a)("esri.core.Collection")],A);var T=A;t.a=T},107:function(e,t,r){"use strict";r.d(t,"a",(function(){return l}));var n=r(81),o=r(222);const i=Object.prototype.toString;function s(e){const t="__accessorMetadata__"in e?Object(n.m)(e):e;return function(...e){if(e.push(t),"number"==typeof e[2])throw new Error("Using @cast has parameter decorator is not supported since 4.16");return a.apply(this,e)}}function a(e,t,r,n){Object(o.b)(e,t).cast=n}function l(...e){if(3!==e.length||"string"!=typeof e[1])return 1===e.length&&"[object Function]"===i.call(e[0])?s(e[0]):1===e.length&&"string"==typeof e[0]?function(e){return function(t,r){Object(o.b)(t,e).cast=t[r]}}(e[0]):void 0}},1115:function(e,t,r){"use strict";var n=r(78),o=r(123),i=r(920),s=r(577),a=r(171),l=r(102),c=r(84),u=r(154),d=r(477),h=r(77),p=r(82),f=r(261),b=r(232),m=r(86),g=r(93),y=r(108),v=r(80),O=(r(76),r(81)),j=r(89),w=r(79),_=r(88),k=r(731),S=r(332),x=r(91),E=r(150),A=r(206),T=r(97),I=r(95);const C=h.a.getLogger("esri.networks.Network");let M=class extends(Object(f.a)(u.a)){constructor(e){super(e),this.id=null,this.title=null,this.layerUrl=null,this.dataElement=null,this.fullExtent=null,this.spatialReference=null,this.type=null}initialize(){this.when().catch((e=>{var t,r;Object(m.m)(e)||C.error("#load()",`Failed to load layer (title: '${null!=(t=this.title)?t:"no title"}', id: '${null!=(r=this.id)?r:"no id"}')`,{error:e})}))}get datasetName(){var e;return null==(e=this.dataElement)?void 0:e.name}get owner(){var e;return null==(e=this.dataElement)?void 0:e.userIdentity}get schemaGeneration(){var e;return null==(e=this.dataElement)?void 0:e.schemaGeneration}get parsedUrl(){const e=this.layerUrl;return e?Object(g.K)(e):null}get featureServiceUrl(){const e=this.parsedUrl&&Object(A.f)(this.parsedUrl.path);return Object(p.k)(e)?e.url.path:null}get networkServiceUrl(){return this.featureServiceUrl?this.featureServiceUrl.replace(/\/FeatureServer/i,"/UtilityNetworkServer"):null}get layerId(){const e=this.parsedUrl&&Object(A.f)(this.parsedUrl.path);return Object(p.k)(e)?e.sublayer:null}async load(e){return this.addResolvingPromise(this._fetchDataElement(this.featureServiceUrl,this.layerId.toString(),e)),this.addResolvingPromise(this._fetchLayerMetaData(this.layerUrl,e)),this}getLayerIdBySourceId(e){if(this.dataElement){const t=this.dataElement.domainNetworks;for(const r of t){for(const t of r.edgeSources?r.edgeSources:[])if(t.sourceId===e)return t.layerId;for(const t of r.junctionSources?r.junctionSources:[])if(t.sourceId===e)return t.layerId}return null}return null}async _fetchLayerMetaData(e,t){const r=await Object(T.default)(e,{responseType:"json",query:{f:"json"},...t});this.read(r.data,{origin:"service"})}async _fetchDataElement(e,t,r){if(this.dataElement)return;const n=await Object(T.default)(`${e}/queryDataElements`,{responseType:"json",query:{layers:JSON.stringify([t]),f:"json"},...r}).then((e=>{var t;return null==(t=e.data.layerDataElements)?void 0:t[0]}));n&&this.read(n,{origin:"service"})}};Object(n.a)([Object(v.b)({type:String,nonNullable:!0,json:{origins:{"web-map":{read:!0,write:{isRequired:!0}}},read:!1}})],M.prototype,"id",void 0),Object(n.a)([Object(v.b)({type:String,nonNullable:!0,json:{origins:{"web-map":{read:!0,write:{isRequired:!0}}},read:!1}})],M.prototype,"title",void 0),Object(n.a)([Object(v.b)({type:String,nonNullable:!0,json:{origins:{"web-map":{read:{source:"url"},write:{target:"url",isRequired:!0}}},read:!1}})],M.prototype,"layerUrl",void 0),Object(n.a)([Object(v.b)({type:Object,json:{origins:{service:{read:!0}},read:!1}})],M.prototype,"dataElement",void 0),Object(n.a)([Object(v.b)({type:I.a,json:{origins:{service:{read:{source:"extent"}}},read:!1}})],M.prototype,"fullExtent",void 0),Object(n.a)([Object(v.b)({type:x.a,json:{origins:{service:{read:{source:"extent.spatialReference"}}},read:!1}})],M.prototype,"spatialReference",void 0),Object(n.a)([Object(v.b)({type:["utility","trace"],readOnly:!0,json:{read:!1,write:!1}})],M.prototype,"type",void 0),Object(n.a)([Object(v.b)({readOnly:!0})],M.prototype,"datasetName",null),Object(n.a)([Object(v.b)({readOnly:!0})],M.prototype,"owner",null),Object(n.a)([Object(v.b)({readOnly:!0})],M.prototype,"schemaGeneration",null),Object(n.a)([Object(v.b)({readOnly:!0})],M.prototype,"parsedUrl",null),Object(n.a)([Object(v.b)({readOnly:!0})],M.prototype,"featureServiceUrl",null),Object(n.a)([Object(v.b)({readOnly:!0})],M.prototype,"networkServiceUrl",null),Object(n.a)([Object(v.b)({readOnly:!0})],M.prototype,"layerId",null),M=Object(n.a)([Object(w.a)("esri.networks.Network")],M);var N=M,P=r(87);const L=new P.a({connected:"connected",upstream:"upstream",downstream:"downstream",shortestPath:"shortest-path",subnetwork:"subnetwork","subnetwork controllers":"subnetwork-controllers",loops:"loops",isolation:"isolation"});let D=class extends f.b{constructor(e){super(e),this.globalId=null,this.title=null,this.traceConfiguration=null,this.creationDate=null,this.creator=null,this.description=null,this.minStartingPoints=null,this.resultTypes=[],this.tags=[],this.traceType=null}};Object(n.a)([Object(v.b)({type:String,nonNullable:!0,json:{origins:{"web-map":{read:{source:"id"},write:{target:"id",isRequired:!0}},service:{read:{source:"globalId"}}},read:!1}})],D.prototype,"globalId",void 0),Object(n.a)([Object(v.b)({type:String,nonNullable:!0,json:{origins:{"web-map":{read:{source:"title"},write:{target:"title",isRequired:!0}},service:{read:{source:"name"}}},read:!1}})],D.prototype,"title",void 0),Object(n.a)([Object(v.b)({type:Object,json:{origins:{service:{read:!0}},read:!1}})],D.prototype,"traceConfiguration",void 0),Object(n.a)([Object(v.b)({type:Date,json:{origins:{service:{read:!0}},read:!1}})],D.prototype,"creationDate",void 0),Object(n.a)([Object(v.b)({type:String,json:{origins:{service:{read:!0}},read:!1}})],D.prototype,"creator",void 0),Object(n.a)([Object(v.b)({type:String,json:{origins:{service:{read:!0}},read:!1}})],D.prototype,"description",void 0),Object(n.a)([Object(v.b)({type:["none","one","many"],json:{origins:{service:{read:{source:"minNumStartingPoints"}}},read:!1}})],D.prototype,"minStartingPoints",void 0),Object(n.a)([Object(v.b)({type:[Object],json:{origins:{service:{read:!0}},read:!1}})],D.prototype,"resultTypes",void 0),Object(n.a)([Object(v.b)({type:[String],json:{origins:{service:{read:!0}},read:!1}})],D.prototype,"tags",void 0),Object(n.a)([Object(v.b)({type:L.apiValues,json:{type:L.jsonValues,origins:{service:{read:L.read}},read:!1}})],D.prototype,"traceType",void 0),D=Object(n.a)([Object(w.a)("esri.networks.support.NamedTraceConfiguration")],D);var B=D,U=r(83);let R=class extends U.a{constructor(e){super(e),this.id=null,this.name=null}};Object(n.a)([Object(v.b)({type:Number,json:{read:{source:"terminalId"},write:{target:"terminalId"}}})],R.prototype,"id",void 0),Object(n.a)([Object(v.b)({type:String,json:{read:{source:"terminalName"},write:{target:"terminalName"}}})],R.prototype,"name",void 0),Object(n.a)([Object(v.b)({type:Boolean,json:{write:!0}})],R.prototype,"isUpstreamTerminal",void 0),R=Object(n.a)([Object(w.a)("esri.networks.support.Terminal")],R);var F=R;const q=new P.a({esriUNTMBidirectional:"bidirectional",esriUNTMDirectional:"directional"});let $=class extends U.a{constructor(e){super(e),this.defaultConfiguration=null,this.id=null,this.name=null,this.terminals=[],this.traversabilityModel=null}};Object(n.a)([Object(v.b)({type:String,json:{write:!0}})],$.prototype,"defaultConfiguration",void 0),Object(n.a)([Object(v.b)({type:Number,json:{read:{source:"terminalConfigurationId"},write:{target:"terminalConfigurationId"}}})],$.prototype,"id",void 0),Object(n.a)([Object(v.b)({type:String,json:{read:{source:"terminalConfigurationName"},write:{target:"terminalConfigurationName"}}})],$.prototype,"name",void 0),Object(n.a)([Object(v.b)({type:[F],json:{write:!0}})],$.prototype,"terminals",void 0),Object(n.a)([Object(v.b)({type:q.apiValues,json:{type:q.jsonValues,read:q.read,write:q.write}})],$.prototype,"traversabilityModel",void 0),$=Object(n.a)([Object(w.a)("esri.networks.support.TerminalConfiguration")],$);var W=$;let V=class extends N{constructor(e){super(e),this.sharedNamedTraceConfigurations=[],this.type="utility"}get serviceTerritoryFeatureLayerId(){var e;return null==(e=this.dataElement)?void 0:e.serviceTerritoryFeatureLayerId}get terminalConfigurations(){var e;return null==(e=this.dataElement)?void 0:e.terminalConfigurations.map((e=>W.fromJSON(e)))}async load(e){return this.addResolvingPromise(super.load(e)),this.addResolvingPromise(this._loadNamedTraceConfigurationsFromNetwork(e)),this}getTerminalConfiguration(e){let t=null,r=null;const n=e.layer;let o=null;if("feature"!==(null==n?void 0:n.type))return null;if(o=n.layerId,null===o)return null;const i=e.attributes;if(null==i)return null;for(const d of Object.keys(i))"ASSETGROUP"===d.toUpperCase()&&(t=e.getAttribute(d)),"ASSETTYPE"===d.toUpperCase()&&(r=e.getAttribute(d));if(!this.dataElement)return null;let s=null;const a=this.dataElement.domainNetworks;for(const d of a){var l;const e=null==(l=d.junctionSources)?void 0:l.find((e=>e.layerId===o));if(e){var c;const n=null==(c=e.assetGroups)?void 0:c.find((e=>e.assetGroupCode===t));if(n){var u;const e=null==(u=n.assetTypes)?void 0:u.find((e=>e.assetTypeCode===r));if(e){s=e.terminalConfigurationId;break}}}}if(null!=s){const e=this.dataElement.terminalConfigurations,t=null==e?void 0:e.find((e=>e.terminalConfigurationId===s));return t?W.fromJSON(t):null}return null}async _loadNamedTraceConfigurationsFromNetwork(e){var t;if(0===(null==(t=this.sharedNamedTraceConfigurations)?void 0:t.length))return;const r=this.sharedNamedTraceConfigurations.map((e=>e.globalId)),n=await this._fetchTraceConfigData(this.networkServiceUrl,r,e);for(const o of this.sharedNamedTraceConfigurations){const e=null==n?void 0:n.find((e=>e.globalId===o.globalId));e&&o.read(e,{origin:"service"})}}_fetchTraceConfigData(e,t,r){return Object(T.default)(`${e}/traceConfigurations/query`,{responseType:"json",query:{globalIds:JSON.stringify(t),f:"json"},...r}).then((e=>e.data.traceConfigurations))}};Object(n.a)([Object(v.b)({type:[B],json:{origins:{"web-map":{read:{source:"traceConfigurations"},write:{target:"traceConfigurations"}},service:{read:{source:"traceConfigurations"}}},read:!1}})],V.prototype,"sharedNamedTraceConfigurations",void 0),Object(n.a)([Object(v.b)({type:["utility"],readOnly:!0,json:{read:!1,write:!1}})],V.prototype,"type",void 0),Object(n.a)([Object(v.b)({readOnly:!0})],V.prototype,"serviceTerritoryFeatureLayerId",null),Object(n.a)([Object(v.b)({readOnly:!0})],V.prototype,"terminalConfigurations",null),V=Object(n.a)([Object(w.a)("esri.networks.UtilityNetwork")],V);var z=V,J=r(156),G=r(185),H=r(664),Y=r(525),K=r(562);let X=class extends U.a{constructor(e){super(e),this.layerId=null,this.facilityIdField=null,this.siteIdField=null,this.nameField=null}};Object(n.a)([Object(v.b)({type:String,json:{write:!0}})],X.prototype,"layerId",void 0),Object(n.a)([Object(v.b)({type:String,json:{write:!0}})],X.prototype,"facilityIdField",void 0),Object(n.a)([Object(v.b)({type:String,json:{write:!0}})],X.prototype,"siteIdField",void 0),Object(n.a)([Object(v.b)({type:String,json:{write:!0}})],X.prototype,"nameField",void 0),X=Object(n.a)([Object(w.a)("esri.layers.support.FacilityLayerInfo")],X);var Z=X;let Q=class extends U.a{constructor(e){super(e),this.layerId=null,this.levelIdField=null,this.facilityIdField=null,this.longNameField=null,this.shortNameField=null,this.levelNumberField=null,this.verticalOrderField=null}};Object(n.a)([Object(v.b)({type:String,json:{write:!0}})],Q.prototype,"layerId",void 0),Object(n.a)([Object(v.b)({type:String,json:{write:!0}})],Q.prototype,"levelIdField",void 0),Object(n.a)([Object(v.b)({type:String,json:{write:!0}})],Q.prototype,"facilityIdField",void 0),Object(n.a)([Object(v.b)({type:String,json:{write:!0}})],Q.prototype,"longNameField",void 0),Object(n.a)([Object(v.b)({type:String,json:{write:!0}})],Q.prototype,"shortNameField",void 0),Object(n.a)([Object(v.b)({type:String,json:{write:!0}})],Q.prototype,"levelNumberField",void 0),Object(n.a)([Object(v.b)({type:String,json:{write:!0}})],Q.prototype,"verticalOrderField",void 0),Q=Object(n.a)([Object(w.a)("esri.layers.support.LevelLayerInfo")],Q);var ee=Q;let te=class extends U.a{constructor(e){super(e),this.layerId=null,this.siteIdField=null,this.nameField=null}};Object(n.a)([Object(v.b)({type:String,json:{write:!0}})],te.prototype,"layerId",void 0),Object(n.a)([Object(v.b)({type:String,json:{write:!0}})],te.prototype,"siteIdField",void 0),Object(n.a)([Object(v.b)({type:String,json:{write:!0}})],te.prototype,"nameField",void 0),te=Object(n.a)([Object(w.a)("esri.layers.support.SiteLayerInfo")],te);var re=te;let ne=class extends U.a{constructor(e){super(e),this.levelLayer=null,this.facilityLayer=null,this.siteLayer=null}};Object(n.a)([Object(v.b)({type:ee,json:{write:!0}})],ne.prototype,"levelLayer",void 0),Object(n.a)([Object(v.b)({type:Z,json:{write:!0}})],ne.prototype,"facilityLayer",void 0),Object(n.a)([Object(v.b)({type:re,json:{write:!0}})],ne.prototype,"siteLayer",void 0),ne=Object(n.a)([Object(w.a)("esri.support.MapFloorInfo")],ne);var oe,ie=ne,se=r(85);let ae=oe=class extends U.a{constructor(e){super(e),this.activeRange=null,this.currentRangeExtent=null,this.fullRangeExtent=null}clone(){return new oe(Object(se.a)({activeRange:this.activeRange,currentRangeExtent:this.currentRangeExtent,fullRangeExtent:this.fullRangeExtent}))}};Object(n.a)([Object(v.b)({type:String,nonNullable:!0,json:{read:{source:"activeRangeName"},write:{target:"activeRangeName",isRequired:!0}}})],ae.prototype,"activeRange",void 0),Object(n.a)([Object(v.b)({type:[Number],json:{write:!0}})],ae.prototype,"currentRangeExtent",void 0),Object(n.a)([Object(v.b)({type:[Number],json:{write:!0}})],ae.prototype,"fullRangeExtent",void 0),ae=oe=Object(n.a)([Object(w.a)("esri.webdoc.RangeInfo")],ae);var le,ce=ae;let ue=le=class extends U.a{constructor(e){super(e),this.enabled=!1,this.longNames=!1,this.minimized=!1,this.pinnedLevels=!1,this.site=null,this.facility=null,this.level=null}clone(){return new le(Object(se.a)({enabled:this.enabled,longNames:this.longNames,minimized:this.minimized,pinnedLevels:this.pinnedLevels,site:this.site,facility:this.facility,level:this.level}))}};Object(n.a)([Object(v.b)({type:Boolean,json:{read:{source:"enabled"},write:{target:"enabled"}}})],ue.prototype,"enabled",void 0),Object(n.a)([Object(v.b)({type:Boolean,json:{read:{source:"longNames"},write:{target:"longNames"}}})],ue.prototype,"longNames",void 0),Object(n.a)([Object(v.b)({type:Boolean,json:{read:{source:"minimized"},write:{target:"minimized"}}})],ue.prototype,"minimized",void 0),Object(n.a)([Object(v.b)({type:Boolean,json:{read:{source:"pinnedLevels"},write:{target:"pinnedLevels"}}})],ue.prototype,"pinnedLevels",void 0),Object(n.a)([Object(v.b)({type:String,json:{read:{source:"site"},write:{target:"site"}}})],ue.prototype,"site",void 0),Object(n.a)([Object(v.b)({type:String,json:{read:{source:"facility"},write:{target:"facility"}}})],ue.prototype,"facility",void 0),Object(n.a)([Object(v.b)({type:String,json:{read:{source:"level"},write:{target:"level"}}})],ue.prototype,"level",void 0),ue=le=Object(n.a)([Object(w.a)("esri.webdoc.widgets.FloorFilter")],ue);var de,he=ue;const pe=new P.a({slider:"slider",picker:"picker"});let fe=de=class extends U.a{constructor(e){super(e),this.interactionMode=null,this.numStops=null,this.stopInterval=null}clone(){return new de({interactionMode:this.interactionMode,numStops:this.numStops,stopInterval:this.stopInterval})}};Object(n.a)([Object(v.b)({type:pe.apiValues,nonNullable:!0,json:{type:pe.jsonValues,default:null,read:{reader:pe.read},write:{isRequired:!0,writer:pe.write}}})],fe.prototype,"interactionMode",void 0),Object(n.a)([Object(v.b)({type:Number,json:{read:{source:"numberOfStops"},write:{target:"numberOfStops",overridePolicy(){const e=null!=this.stopInterval;return{enabled:!e,isRequired:!e}}}}})],fe.prototype,"numStops",void 0),Object(n.a)([Object(v.b)({type:Number,json:{write:{overridePolicy(){return{isRequired:null==this.numStops}}}}})],fe.prototype,"stopInterval",void 0),fe=de=Object(n.a)([Object(w.a)("esri.webdoc.widgets.Range")],fe);var be,me=fe,ge=r(134),ye=r(223),ve=r(116);let Oe=be=class extends U.a{constructor(e){super(e),this.currentTimeExtent=null,this.fullTimeExtent=null,this.loop=!1,this.numStops=null,this.numThumbs=null,this.stopDelay=null,this.stopInterval=null,this.stops=null}readCurrentTimeExtent(e){if(!e)return;const t=null!=e[0]?new Date(e[0]):null,r=null!=e[1]?new Date(e[1]):null;return new ge.a({start:t,end:r})}writeCurrentTimeExtent(e,t,r){e&&Object(ve.c)(r,[Object(p.k)(e.start)?e.start.getTime():null,Object(p.k)(e.end)?e.end.getTime():null],t)}readFullTimeExtent(e,t){const r=t.properties;if(!r)return;const n=null!=r.endTime?new Date(r.endTime):null,o=null!=r.startTime?new Date(r.startTime):null;return new ge.a({start:o,end:n})}writeFullTimeExtent(e,t){if(!e)return;const r=t.properties=t.properties||{},n=e.end,o=e.start;n&&(r.endTime=Object(p.k)(n)?n.getTime():null),o&&(r.startTime=Object(p.k)(o)?o.getTime():null)}readStopInterval(e,t,r){return e?ye.a.fromJSON({value:e.interval,unit:e.units},r):null}writeStopInterval(e,t,r,n){if(!e)return;const o=e.toJSON(n);Object(ve.c)(r,{interval:o.value,units:o.unit},t)}readStops(e){return e&&e.length?e.map((e=>new Date(e))):null}writeStops(e,t,r){e&&e.length&&Object(ve.c)(r,e.map((e=>e.getTime())),t)}clone(){return new be(Object(se.a)({currentTimeExtent:this.currentTimeExtent,fullTimeExtent:this.fullTimeExtent,loop:this.loop,numStops:this.numStops,numThumbs:this.numThumbs,stopDelay:this.stopDelay,stopInterval:this.stopInterval,stops:this.stops}))}};Object(n.a)([Object(v.b)({type:ge.a,json:{read:{source:"properties.currentTimeExtent"},write:{target:"properties.currentTimeExtent"}}})],Oe.prototype,"currentTimeExtent",void 0),Object(n.a)([Object(j.a)("currentTimeExtent")],Oe.prototype,"readCurrentTimeExtent",null),Object(n.a)([Object(_.a)("currentTimeExtent")],Oe.prototype,"writeCurrentTimeExtent",null),Object(n.a)([Object(v.b)({type:ge.a,json:{read:{source:["properties.endTime","properties.startTime"]},write:{target:{"properties.endTime":{type:Number},"properties.startTime":{type:Number}}}}})],Oe.prototype,"fullTimeExtent",void 0),Object(n.a)([Object(j.a)("fullTimeExtent")],Oe.prototype,"readFullTimeExtent",null),Object(n.a)([Object(_.a)("fullTimeExtent")],Oe.prototype,"writeFullTimeExtent",null),Object(n.a)([Object(v.b)({type:Boolean,nonNullable:!0,json:{default:!1,read:{source:"properties.loop"},write:{target:"properties.loop"}}})],Oe.prototype,"loop",void 0),Object(n.a)([Object(v.b)({type:Number,json:{read:{source:"properties.numberOfStops"},write:{target:"properties.numberOfStops",overridePolicy(){var e;const t=!!this.stopInterval,r=!(null==(e=this.stops)||!e.length),n=!(t||r);return{enabled:n,isRequired:n}}}}})],Oe.prototype,"numStops",void 0),Object(n.a)([Object(v.b)({type:[1,2],nonNullable:!0,json:{read:{source:"properties.thumbCount"},write:{target:"properties.thumbCount",isRequired:!0}}})],Oe.prototype,"numThumbs",void 0),Object(n.a)([Object(v.b)({type:Number,nonNullable:!0,json:{read:{source:"properties.thumbMovingRate"},write:{target:"properties.thumbMovingRate",isRequired:!0}}})],Oe.prototype,"stopDelay",void 0),Object(n.a)([Object(v.b)({type:ye.a,json:{read:{source:"properties.timeStopInterval"},write:{target:"properties.timeStopInterval",overridePolicy(){var e;const t=null!=this.numStops,r=!(null==(e=this.stops)||!e.length);return{enabled:!r,isRequired:!(t||r)}}}}})],Oe.prototype,"stopInterval",void 0),Object(n.a)([Object(j.a)("stopInterval")],Oe.prototype,"readStopInterval",null),Object(n.a)([Object(_.a)("stopInterval")],Oe.prototype,"writeStopInterval",null),Object(n.a)([Object(v.b)({type:[Date],json:{read:{source:"properties.stops"},write:{target:"properties.stops",overridePolicy(){return{isRequired:null==this.numStops&&!this.stopInterval}}}}})],Oe.prototype,"stops",void 0),Object(n.a)([Object(j.a)("stops")],Oe.prototype,"readStops",null),Object(n.a)([Object(_.a)("stops")],Oe.prototype,"writeStops",null),Oe=be=Object(n.a)([Object(w.a)("esri.webdoc.widgets.TimeSlider")],Oe);var je,we=Oe;let _e=je=class extends U.a{constructor(e){super(e),this.range=null,this.timeSlider=null,this.floorFilter=null}clone(){return new je(Object(se.a)({range:this.range,timeSlider:this.timeSlider,floorFilter:this.floorFilter}))}};Object(n.a)([Object(v.b)({type:me,json:{write:!0}})],_e.prototype,"range",void 0),Object(n.a)([Object(v.b)({type:we,json:{write:!0}})],_e.prototype,"timeSlider",void 0),Object(n.a)([Object(v.b)({type:he,json:{write:!0}})],_e.prototype,"floorFilter",void 0),_e=je=Object(n.a)([Object(w.a)("esri.webdoc.Widgets")],_e);var ke=_e;const Se={width:600,height:400},xe=1.5;var Ee=r(587);function Ae(e){return{enabled:!(null==e||!e.length)}}var Te,Ie=r(92),Ce=r(240);let Me=Te=class extends U.a{constructor(e){super(e),this.exactMatch=!1,this.name=null,this.type=null}clone(){return new Te({exactMatch:this.exactMatch,type:this.type,name:this.name})}};Object(n.a)([Object(v.b)({type:Boolean,json:{write:!0}})],Me.prototype,"exactMatch",void 0),Object(n.a)([Object(v.b)({type:String,json:{write:!0}})],Me.prototype,"name",void 0),Object(n.a)([Object(Ie.a)(Ce.a)],Me.prototype,"type",void 0),Me=Te=Object(n.a)([Object(w.a)("esri.webdoc.applicationProperties.SearchLayerField")],Me);var Ne,Pe=Me;let Le=Ne=class extends U.a{constructor(e){super(e),this.field=null,this.id=null,this.subLayer=null}clone(){return new Ne(Object(se.a)({field:this.field,id:this.id,subLayer:this.subLayer}))}};Object(n.a)([Object(v.b)({type:Pe,json:{write:{isRequired:!0}}})],Le.prototype,"field",void 0),Object(n.a)([Object(v.b)({type:String,json:{write:{isRequired:!0}}})],Le.prototype,"id",void 0),Object(n.a)([Object(v.b)({type:O.a,json:{write:!0}})],Le.prototype,"subLayer",void 0),Le=Ne=Object(n.a)([Object(w.a)("esri.webdoc.applicationProperties.SearchLayer")],Le);var De,Be=Le;let Ue=De=class extends U.a{constructor(e){super(e),this.exactMatch=!1,this.name=null,this.type=null}clone(){return new De({exactMatch:this.exactMatch,type:this.type,name:this.name})}};Object(n.a)([Object(v.b)({type:Boolean,json:{write:!0}})],Ue.prototype,"exactMatch",void 0),Object(n.a)([Object(v.b)({type:String,json:{write:!0}})],Ue.prototype,"name",void 0),Object(n.a)([Object(Ie.a)(Ce.a)],Ue.prototype,"type",void 0),Ue=De=Object(n.a)([Object(w.a)("esri.webdoc.applicationProperties.SearchTableField")],Ue);var Re,Fe=Ue;let qe=Re=class extends U.a{constructor(e){super(e),this.field=null,this.id=null}clone(){return new Re(Object(se.a)({field:this.field,id:this.id}))}};Object(n.a)([Object(v.b)({type:Fe,json:{write:{isRequired:!0}}})],qe.prototype,"field",void 0),Object(n.a)([Object(v.b)({type:String,json:{write:{isRequired:!0}}})],qe.prototype,"id",void 0),qe=Re=Object(n.a)([Object(w.a)("esri.webdoc.applicationProperties.SearchTable")],qe);var $e,We=qe;const Ve=l.a.ofType(Be),ze=l.a.ofType(We);let Je=$e=class extends U.a{constructor(e){super(e),this.addressSearchEnabled=!0,this.enabled=!0,this.hintText=null,this.layers=new Ve,this.tables=new ze}readAddressSearchEnabled(e){return!e}writeAddressSearchEnabled(e,t,r){t[r]=!e}clone(){return new $e(Object(se.a)({addressSearchEnabled:this.addressSearchEnabled,enabled:this.enabled,hintText:this.hintText,layers:this.layers,tables:this.tables}))}};Object(n.a)([Object(v.b)({type:Boolean,nonNullable:!0,json:{read:{source:"disablePlaceFinder"},write:{target:"disablePlaceFinder",isRequired:!0},origins:{"web-scene":{read:!1,write:!1}}}})],Je.prototype,"addressSearchEnabled",void 0),Object(n.a)([Object(j.a)("addressSearchEnabled")],Je.prototype,"readAddressSearchEnabled",null),Object(n.a)([Object(_.a)("addressSearchEnabled")],Je.prototype,"writeAddressSearchEnabled",null),Object(n.a)([Object(v.b)({type:Boolean,nonNullable:!0,json:{write:!0,origins:{"web-map":{write:{isRequired:!0}},"web-scene":{default:!0,write:!0}}}})],Je.prototype,"enabled",void 0),Object(n.a)([Object(v.b)({type:String,json:{write:!0}})],Je.prototype,"hintText",void 0),Object(n.a)([Object(v.b)({type:Ve,json:{write:{overridePolicy:Ae},origins:{"web-scene":{write:{isRequired:!0}}}}})],Je.prototype,"layers",void 0),Object(n.a)([Object(v.b)({type:ze,json:{read:!0,write:{overridePolicy:Ae},origins:{"web-scene":{read:!1,write:!1}}}})],Je.prototype,"tables",void 0),Je=$e=Object(n.a)([Object(w.a)("esri.webdoc.applicationProperties.Search")],Je);var Ge,He=Je;let Ye=Ge=class extends U.a{constructor(e){super(e),this.search=null}clone(){return new Ge(Object(se.a)({search:this.search}))}};Object(n.a)([Object(v.b)({type:He,json:{write:!0}})],Ye.prototype,"search",void 0),Ye=Ge=Object(n.a)([Object(w.a)("esri.webdoc.applicationProperties.Viewing")],Ye);var Ke,Xe=Ye;let Ze=Ke=class extends U.a{constructor(e){super(e),this.editing=null,this.offline=null,this.viewing=null}clone(){return new Ke(Object(se.a)({editing:this.editing,offline:this.offline,viewing:this.viewing}))}};Object(n.a)([Object(v.b)({json:{write:!0}})],Ze.prototype,"editing",void 0),Object(n.a)([Object(v.b)({json:{write:!0}})],Ze.prototype,"offline",void 0),Object(n.a)([Object(v.b)({type:Xe,json:{write:!0}})],Ze.prototype,"viewing",void 0),Ze=Ke=Object(n.a)([Object(w.a)("esri.webmap.ApplicationProperties")],Ze);var Qe,et=Ze,tt=r(939),rt=r(90),nt=r(808);let ot=Qe=class extends rt.a{constructor(e){super(e),this.background=null,this.rangeInfo=null,this.spatialReference=null,this.viewpoint=null}clone(){return new Qe(Object(se.a)({background:this.background,rangeInfo:this.rangeInfo,spatialReference:this.spatialReference,viewpoint:this.viewpoint}))}};Object(n.a)([Object(v.b)({type:nt.a})],ot.prototype,"background",void 0),Object(n.a)([Object(v.b)({type:ce})],ot.prototype,"rangeInfo",void 0),Object(n.a)([Object(v.b)({type:x.a})],ot.prototype,"spatialReference",void 0),Object(n.a)([Object(v.b)({type:s.a})],ot.prototype,"viewpoint",void 0),ot=Qe=Object(n.a)([Object(w.a)("esri.webmap.InitialViewProperties")],ot);var it=ot,st=r(637);class at extends st.a{constructor(e,t){super(e,t,"webmap")}}const lt=new at(2,20),ct="Web Map",ut=l.a.ofType(tt.a),dt=l.a.ofType(z),ht=h.a.getLogger("esri.WebMap"),pt=new Map;pt.set("image/jpeg","jpeg"),pt.set("image/jpg","jpg"),pt.set("image/png","png"),pt.set("image/gif","gif");const ft="ArcGIS API for JavaScript",bt="CollectorDisabled",mt="Collector",gt="Data Editing",yt="OfflineDisabled",vt="Offline",Ot="Workforce Project",jt="Workforce Worker",wt="Workforce Dispatcher",_t="DeveloperBasemap",kt=["NatGeo_World_Map","Ocean_Basemap","USA_Topo_Maps","World_Imagery","World_Street_Map","World_Terrain_Base","World_Topo_Map","World_Hillshade","Canvas/World_Light_Gray_Base","Canvas/World_Light_Gray_Reference","Canvas/World_Dark_Gray_Base","Canvas/World_Dark_Gray_Reference","Ocean/World_Ocean_Base","Ocean/World_Ocean_Reference","Reference/World_Boundaries_and_Places","Reference/World_Reference_Overlay","Reference/World_Transportation"].map((e=>e.toLowerCase()));let St=class extends(Object(f.a)(u.a.LoadableMixin(Object(b.b)(i.a)))){constructor(e){super(e),this.applicationProperties=null,this.bookmarks=new ut,this.floorInfo=null,this.initialViewProperties=new it,this.portalItem=null,this.presentation=null,this.sourceVersion=null,this.widgets=null,this.utilityNetworks=null,this.authoringApp=this.authoringAppVersion=null,this._isAuthoringAppSetByUser=this._isAuthoringAppVersionSetByUser=!1}destroy(){const e=this.portalItem;this.portalItem=null,null==e||e.destroy()}initialize(){if(this.when().catch((e=>{ht.error("#load()","Failed to load web map",e)})),this.resourceInfo){let t;try{t=this._validateJSON(this.resourceInfo)}catch(e){return void this.addResolvingPromise(Promise.reject(e))}this.read(t)}}set authoringApp(e){this._isAuthoringAppSetByUser=!0,this._set("authoringApp",e)}writeAuthoringApp(e,t){e&&this._isAuthoringAppSetByUser?t.authoringApp=e:t.authoringApp=ft}set authoringAppVersion(e){this._isAuthoringAppVersionSetByUser=!0,this._set("authoringAppVersion",e)}writeAuthoringAppVersion(e,t){e&&this._isAuthoringAppVersionSetByUser?t.authoringAppVersion=e:t.authoringAppVersion=o.d}readInitialViewProperties(e,t){var r;const n=new it;t.background&&(n.background=nt.a.fromJSON(t.background));const o=null==(r=t.initialState)?void 0:r.viewpoint;return o&&(o.rotation&&at.parse(t.version||"","webmap").lessThan(2,20)&&"ArcGIS Pro"===t.authoringApp&&(o.rotation*=-1),n.viewpoint=s.a.fromJSON(o)),t.mapRangeInfo&&(n.rangeInfo=ce.fromJSON(t.mapRangeInfo)),t.spatialReference&&(n.spatialReference=x.a.fromJSON(t.spatialReference)),n}writeInitialViewProperties(e,t,r,n){if(!e)return;const o=e.background;o&&o.color&&(t.background=o.write(null,n)),e.viewpoint&&(t.initialState={viewpoint:e.viewpoint.write(null,n)}),e.rangeInfo&&(t.mapRangeInfo=e.rangeInfo.toJSON(n)),e.spatialReference&&(t.spatialReference=e.spatialReference.write(null,n))}writeLayers(e,t,r,n){t[r]=this._writeLayers(e,n,"operational-layers")}readSourceVersion(e,t){const[r,n]=t.version.split(".");return new at(parseInt(r,10),parseInt(n,10))}writeSourceVersion(e,t,r){t[r]=`${lt.major}.${lt.minor}`}writeTables(e,t,r,n){const o=this._writeLayers(e,n,"tables");o.length&&(t[r]=o)}get thumbnailUrl(){return this.portalItem&&this.portalItem.thumbnailUrl||null}set thumbnailUrl(e){e?(this._override("thumbnailUrl",e),this._thumbnailFilename=this._generateCustomThumbnailFilename(e)):this._clearThumbnailOverride()}load(e){return this.addResolvingPromise(this._loadFromSource()),Promise.resolve(this)}loadAll(){return Object(d.a)(this,(e=>{e(this.ground,this.basemap,this.layers,this.tables)}))}read(e,t){t={...t,origin:"web-map"};const r=this._getAuthoringPropsState();Object(S.b)(this,e,(t=>super.read(e,t)),t),this._restoreAuthoringPropsFromState(r)}write(e,t){if("loaded"!==this.loadStatus){const e=new c.a("webmap:not-loaded","Web map must be loaded before it can be serialized");throw ht.error("#toJSON()","Web map must be loaded before it can be serialized",this.loadError||this.loadStatus),e}return this._removeDanglingLayerRefs(),t={...t,origin:"web-map",restrictedWebMapWriting:!0,webmap:this},super.write(e,t)}async save(e){e=e||{},this._validateItem(),await this._updateFromPromise,await this.load(),await this._loadLayerContainers(),await this._beforeSave(),this._validateMap();const t=this.portalItem,r={origin:"web-map",messages:[],writtenProperties:[],url:t.itemUrl&&Object(g.K)(t.itemUrl),portal:t.portal||J.a.getDefault()},n=this.write(null,r);return this._validateJSONForWriting(r,e),await this._updateItemProperties(t),await this._updateItem(t,n,r),await this._updateItemThumbnail(),t}async saveAs(e,t){t=t||{};const r=this._getPortalItem(e);await this._updateFromPromise,await this.load(),await this._loadLayerContainers(),await this._beforeSave(),this._validateMap();const n={origin:"web-map",messages:[],writtenProperties:[],url:null,portal:r.portal},o=this.write(null,n);this._validateJSONForWriting(n,t),await this._updateItemPropertiesForSaveAs(r);const i=this._getThumbnailState();return await this._createItem(r,o,n,t),this._restoreThumbnailFromState(i),await this._updateItemThumbnail(),r}async updateFrom(e,t){const r=this._updateFromInternal(e,t);this._updateFromPromise=r,await r,r===this._updateFromPromise&&(this._updateFromPromise=null)}getLayerJSONFromResourceInfo(e){var t,r,n,o;const i=this.resourceInfo;return this._collectAllLayersJSON(Object(a.d)([null==i||null==(t=i.baseMap)?void 0:t.baseMapLayers,null==i?void 0:i.operationalLayers,null==(r=this.basemap)||null==(n=r.resourceInfo)||null==(o=n.data)?void 0:o.baseMapLayers])).find((t=>t.id===e.id))}_collectAllLayersJSON(e){return e.reduce(((e,t)=>(e.push(t),"GroupLayer"===t.layerType&&(e=e.concat(this._collectAllLayersJSON(t.layers||[]))),e)),[])}_writeLayers(e,t,r){return t={...t,layerContainerType:r},e.map((e=>Object(p.s)(Object(Ee.a)(e,"tables"===r?null:this.getLayerJSONFromResourceInfo(e),t)))).filter(Boolean).toArray()}_loadFromSource(){return this.resourceInfo?this._loadFromJSON(this.resourceInfo,{origin:"web-map"}):this.portalItem&&this.portalItem.id?this._loadFromItem(this.portalItem):Promise.resolve(null)}_loadFromItem(e){return e.load().catch((e=>{throw new c.a("webmap:load-portal-item","Failed to load portal item",{error:e})})).then((()=>{if("Web Map"!==e.type)throw new c.a("webmap:invalid-portal-item","Invalid portal item type '${type}', expected 'Web Map'",{type:e.type})})).then((()=>e.fetchData())).then((t=>(this.resourceInfo=t,this._readAndLoadFromJSON(t,{origin:"web-map",portal:e.portal||J.a.getDefault()})))).then((()=>this._computeInitialViewpoint()))}_readAndLoadFromJSON(e,t){const r=this._validateJSON(e);return this.read(r,t),this._loadFromJSON(r,t)}_validateJSON(e){const t=at.parse(e.version||"","webmap");return lt.validate(t),e.version=`${t.major}.${t.minor}`,e}_loadFromJSON(e,t){const n={context:{...t,layerContainerType:"operational-layers"}};return this.portalItem&&(n.context.portal=this.portalItem.portal||J.a.getDefault()),r.e(46).then(r.bind(null,926)).then((({populateOperationalLayers:t})=>{const r=[],o=e.operationalLayers;o&&o.length&&r.push(t(this.layers,o,n));const i={...n,context:{...n.context,layerContainerType:"tables"},defaultLayerType:"ArcGISFeatureLayer"},s=e.tables;return s&&s.length&&r.push(t(this.tables,s,i)),Object(m.j)(r).then((()=>{}))}))}async _computeInitialViewpoint(){var e,t;let r=this.initialViewProperties;if(null==(e=r)||null==(t=e.viewpoint)?void 0:t.targetGeometry)return;const n=await this._getExtentFromItem();n&&(r=r?r.clone():new it,r.viewpoint=new s.a,r.viewpoint.targetGeometry=n,this.initialViewProperties=r)}async _getExtentFromItem(){var e,t;const n=null==(e=this.initialViewProperties)?void 0:e.spatialReference,o=null==(t=this.portalItem)?void 0:t.extent;return n&&o?n.isWGS84?o.clone():n.isWebMercator?Object(E.b)(o):(await r.e(32).then(r.bind(null,958))).create(this.portalItem).then((e=>{const t=new Y.a;return t.geometries=[o],t.outSpatialReference=n,e.project(t)})).then((e=>e[0])).catch((e=>(ht.error("Error projecting item's extent:",e),null))):null}_removeDanglingLayerRefs(){const e=this.applicationProperties,t=e&&e.viewing&&e.viewing.search,r=e=>!!this.allLayers.find((t=>t.id===e));t&&t.layers&&(t.layers=t.layers.filter((e=>r(e.id)))),t&&t.tables&&(t.tables=t.tables.filter((e=>!!this.tables.find((t=>t.id===e.id)))));const n=e&&e.editing&&e.editing.locationTracking;n&&n.info&&!r(n.info.layerId)&&(e.editing=null);const o=this.presentation&&this.presentation.slides;o&&o.forEach((e=>{e.visibleLayers&&(e.visibleLayers=e.visibleLayers.filter((e=>r(e.id))))}))}_validateMap(){if(!this.basemap||!this.basemap.baseLayers.length)throw new c.a("webmap:save","Map does not have a valid basemap with a base layer.")}_validateItem(){if(!this.portalItem)throw ht.error("save: requires the portalItem property to be set"),new c.a("webmap:portal-item-not-set","Portal item to save to has not been set on the WebMap");this._validateItemType(this.portalItem)}_validateItemType(e){if(e.type!==ct)throw new c.a("webmap:portal-item-wrong-type",`Portal item needs to have type "${ct}"`)}_loadLayerContainers(){const e=[];return this.basemap&&e.push(this.basemap.load()),this.ground&&e.push(this.ground.load()),Object(m.j)(e).then((()=>{}))}async _beforeSave(){const e=[];for(const t of this.allLayers)if("beforeSave"in t&&"function"==typeof t.beforeSave){const r=t.beforeSave();r&&e.push(r)}await Object(m.j)(e)}_loadAllLayers(){const e=this._getAllLayersAndTables().map((e=>e.load()));return Object(m.j)(e).then((()=>{}))}_getAllLayersAndTables(){return this.allLayers.concat(this.allTables)}_validateJSONForWriting(e,t){let r=e.messages.filter((e=>"error"===e.type)).map((e=>new c.a(e.name,e.message,e.details)));if(t.ignoreUnsupported&&(r=r.filter((e=>"layer:unsupported"!==e.name&&"symbol:unsupported"!==e.name&&"symbol-layer:unsupported"!==e.name&&"property:unsupported"!==e.name&&"url:unsupported"!==e.name))),r.length>0)throw new c.a("webmap:save","Failed to save webmap due to unsupported or invalid content. See 'details.errors' for more detailed information",{errors:r})}async _updateItemProperties(e){e.extent=await this._getWGS84Extent(this.initialViewProperties.viewpoint.targetGeometry),await this._updateTypeKeywords(e)}async _updateItemPropertiesForSaveAs(e){Object(H.c)(e,bt),Object(H.c)(e,yt),Object(H.c)(e,Ot),Object(H.c)(e,jt),Object(H.c)(e,wt),Object(H.c)(e,"Offline Map Areas"),Object(H.c)(e,"FieldMapsDisabled"),await this._updateItemProperties(e)}async _getWGS84Extent(e){const t=e.clone().normalize();let r;if(t.length>1)for(const n of t)r?n.width>r.width&&(r=n):r=n;else r=t[0];return this._projectToWGS84(r)}async _projectToWGS84(e){const t=e.spatialReference;if(t.isWGS84)return e.clone();if(t.isWebMercator)return Object(E.e)(e);const n=await r.e(32).then(r.bind(null,958)),o=await n.create(this.portalItem),i=new Y.a;return i.geometries=[e],i.outSpatialReference=x.a.WGS84,(await o.project(i))[0]}async _updateTypeKeywords(e){Object(H.a)(e,ft),await this._loadAllLayers(),this._evalCollectorKeyword(e),this._evalDataEditingKeyword(e),this._evalOfflineKeyword(e),this._evalDeveloperBasemapKeyword(e),e.typeKeywords&&(e.typeKeywords=e.typeKeywords.filter(((e,t,r)=>r.indexOf(e)===t)))}_evalCollectorKeyword(e){Object(H.b)(e,bt)||Object(H.b)(e,Ot)||Object(H.b)(e,jt)||Object(H.b)(e,wt)||!this._hasEditableFeatureLayer()?Object(H.c)(e,mt):Object(H.a)(e,mt)}_evalDataEditingKeyword(e){this._hasEditableFeatureLayer()?Object(H.a)(e,gt):Object(H.c)(e,gt)}_evalOfflineKeyword(e){!Object(H.b)(e,yt)&&this._isOfflineCapableMap()?Object(H.a)(e,vt):Object(H.c)(e,vt)}_evalDeveloperBasemapKeyword(e){Object(K.f)(this.basemap)?Object(H.a)(e,_t):Object(H.c)(e,_t)}_hasEditableFeatureLayer(){return this._getAllLayersAndTables().some((e=>e.loaded&&this._isFeatureServiceLayer(e)&&e.capabilities.operations.supportsEditing&&e.editingEnabled))}_isFeatureServiceLayer(e){return!("feature"!==e.type||!e.source||"feature-layer"!==e.source.type)}_isOfflineCapableMap(){return this._getAllLayersAndTables().filter((e=>"group"!==e.type)).every((e=>e.loaded&&this._isOfflineCapableLayer(e)))}_isOfflineCapableLayer(e){return this._isFeatureServiceLayer(e)&&e.capabilities.operations.supportsSync||("tile"===e.type||"vector-tile"===e.type)&&(e.capabilities.operations.supportsExportTiles||this._isExportableAGOLTileLayer(e)||Object(K.g)(e))&&e.spatialReference.equals(this.initialViewProperties.spatialReference)}_isExportableAGOLTileLayer(e){return"tile"===e.type&&Object(A.d)(e.url)&&kt.some((t=>e.url.toLowerCase().indexOf("/"+t+"/")>-1))}async _updateItem(e,t,r){await e.update({data:t}),this._syncUpInstanceWithItem(e,t,r)}async _createItem(e,t,r,n){const o=this.portalItem,i=!!(o&&o.id&&o.portal.user),s=e.portal;if(await s._signIn(),!await this._canCopyItem(o,i,s))throw new c.a("webmap:save-as-copy-not-allowed","Owner of this map does not allow others to save a copy");await s.user.addItem({item:e,folder:n.folder,data:t}),this.portalItem=e,this._syncUpInstanceWithItem(e,t,r)}async _canCopyItem(e,t,r){return!(Object(p.k)(e)&&e.id&&e.typeKeywords&&e.typeKeywords.indexOf("useOnly")>-1)||e.portal.portalHostname===r.portalHostname&&(t||await e.reload(),"admin"===e.itemControl||"update"===e.itemControl)}_syncUpInstanceWithItem(e,t,r){f.b.prototype.read.call(this,{version:t.version,authoringApp:t.authoringApp,authoringAppVersion:t.authoringAppVersion},{origin:"web-map",ignoreDefaults:!0,url:e.itemUrl&&Object(g.K)(e.itemUrl)}),Object(k.a)(r),this.resourceInfo=t}async _updateItemThumbnail(){this.thumbnailUrl&&this._isOverridden("thumbnailUrl")&&(await this.portalItem.updateThumbnail({thumbnail:this.thumbnailUrl,filename:this._thumbnailFilename}),this._clearThumbnailOverride())}_getPortalItem(e){let t=G.default.from(e);return t.id&&(t=t.clone(),t.id=null),t.type||(t.type=ct),t.portal||(t.portal=J.a.getDefault()),this._validateItemType(t),t}async _updateFromInternal(e,t){t=t||{},await Object(y.l)(e,"ready"),this._updateInitialViewProperties(e,t),await this._updateThumbnailUrl(e,t)}_updateInitialViewProperties(e,t){var r;if(t.backgroundExcluded||(this.initialViewProperties.background=null==(r=e.background)?void 0:r.clone()),this.initialViewProperties.spatialReference=e.spatialReference.clone(),t.viewpointExcluded||(this.initialViewProperties.viewpoint=new s.a({rotation:e.rotation,scale:t.scalePreserved?e.scale:null,targetGeometry:this._getViewExtent(e)})),!t.widgetsExcluded)for(const n of e.persistableViewModels)n.updateWebDocument(this)}_getViewExtent(e){const t=e.center.clone().normalize(),r=e.extent.clone(),n=r.width/2;return r.xmin=t.x-n,r.xmax=t.x+n,r}async _updateThumbnailUrl(e,t){if(t.thumbnailExcluded)return;const r=function(e,t){t=t||Se;let{width:r,height:n}=t;const o=r/n;return o<xe?n=r/xe:o>xe&&(r=n*xe),r>e.width&&(n*=e.width/r,r=e.width),n>e.height&&(r*=e.height/n,n=e.height),{width:Math.round(r),height:Math.round(n)}}(e,t.thumbnailSize),n=await e.takeScreenshot({format:"png",width:r.width,height:r.height});this._setAutoGeneratedThumbnail(n.dataUrl)}_setAutoGeneratedThumbnail(e){this.thumbnailUrl=e,this._thumbnailFilename=null}_clearThumbnailOverride(){this._clearOverride("thumbnailUrl"),this.clear("thumbnailUrl","user"),this._thumbnailFilename=null}_generateCustomThumbnailFilename(e){if(Object(g.u)(e)){const t=Object(g.i)(e),r=t&&t.mediaType,n=r&&pt.get(r.toLowerCase())||null,o=`thumbnail${Date.now()}`;return n?`${o}.${n}`:o}return null}_getThumbnailState(){let e=this.thumbnailUrl;return e&&(e=this._isOverridden("thumbnailUrl")?e:Object(g.d)(e,"w","8192")),{thumbnailUrl:e,filename:this._thumbnailFilename}}_restoreThumbnailFromState(e){this.thumbnailUrl=e.thumbnailUrl,this._thumbnailFilename=e.filename}_getAuthoringPropsState(){return{authoringApp:this.authoringApp,authoringAppVersion:this.authoringAppVersion,isAuthoringAppSetByUser:this._isAuthoringAppSetByUser,isAuthoringAppVersionSetByUser:this._isAuthoringAppVersionSetByUser}}_restoreAuthoringPropsFromState(e){e.isAuthoringAppSetByUser?this.authoringApp=e.authoringApp:this._isAuthoringAppSetByUser=!1,e.isAuthoringAppVersionSetByUser?this.authoringAppVersion=e.authoringAppVersion:this._isAuthoringAppVersionSetByUser=!1}static fromJSON(e){const t=e;if(!t)throw new c.a("webmap:empty-resource","Expected a JSON resource but got nothing");return new this({resourceInfo:t})}};St.VERSION=lt,Object(n.a)([Object(v.b)({type:et,json:{write:!0}})],St.prototype,"applicationProperties",void 0),Object(n.a)([Object(v.b)({type:String,json:{write:{allowNull:!0,ignoreOrigin:!0}}})],St.prototype,"authoringApp",null),Object(n.a)([Object(_.a)("authoringApp")],St.prototype,"writeAuthoringApp",null),Object(n.a)([Object(v.b)({type:String,json:{write:{allowNull:!0,ignoreOrigin:!0}}})],St.prototype,"authoringAppVersion",null),Object(n.a)([Object(_.a)("authoringAppVersion")],St.prototype,"writeAuthoringAppVersion",null),Object(n.a)([Object(v.b)({json:{read:{source:"baseMap"},write:{target:"baseMap"}}})],St.prototype,"basemap",void 0),Object(n.a)([Object(v.b)({type:ut,json:{write:{overridePolicy:e=>({enabled:!!(e&&e.length>0),ignoreOrigin:!0})}}})],St.prototype,"bookmarks",void 0),Object(n.a)([Object(v.b)({type:ie,json:{read:{source:"mapFloorInfo"},write:{target:"mapFloorInfo"}}})],St.prototype,"floorInfo",void 0),Object(n.a)([Object(v.b)({type:it,nonNullable:!0,json:{read:{source:["background","initialState.viewpoint","mapRangeInfo","spatialReference"]},write:{ignoreOrigin:!0,target:{background:{type:nt.a},"initialState.viewpoint":{type:s.a},mapRangeInfo:{type:ce},spatialReference:{type:x.a}}}}})],St.prototype,"initialViewProperties",void 0),Object(n.a)([Object(j.a)("initialViewProperties")],St.prototype,"readInitialViewProperties",null),Object(n.a)([Object(_.a)("initialViewProperties")],St.prototype,"writeInitialViewProperties",null),Object(n.a)([Object(v.b)({json:{read:!1,write:{target:"operationalLayers",ignoreOrigin:!0}}})],St.prototype,"layers",void 0),Object(n.a)([Object(_.a)("layers")],St.prototype,"writeLayers",null),Object(n.a)([Object(v.b)({type:G.default})],St.prototype,"portalItem",void 0),Object(n.a)([Object(v.b)({json:{write:!0}})],St.prototype,"presentation",void 0),Object(n.a)([Object(v.b)()],St.prototype,"resourceInfo",void 0),Object(n.a)([Object(v.b)({readOnly:!0,type:at,json:{read:{source:"version"},write:{allowNull:!0,ignoreOrigin:!0,target:"version",isRequired:!0}}})],St.prototype,"sourceVersion",void 0),Object(n.a)([Object(j.a)("sourceVersion")],St.prototype,"readSourceVersion",null),Object(n.a)([Object(_.a)("sourceVersion")],St.prototype,"writeSourceVersion",null),Object(n.a)([Object(v.b)({json:{read:!1,write:{ignoreOrigin:!0}}})],St.prototype,"tables",void 0),Object(n.a)([Object(_.a)("tables")],St.prototype,"writeTables",null),Object(n.a)([Object(v.b)()],St.prototype,"thumbnailUrl",null),Object(n.a)([Object(v.b)({type:ke,json:{write:!0}})],St.prototype,"widgets",void 0),Object(n.a)([Object(v.b)({type:dt,json:{read:!0,write:!0}})],St.prototype,"utilityNetworks",void 0),St=Object(n.a)([Object(w.a)("esri.WebMap")],St);var xt=St;t.a=xt},116:function(e,t,r){"use strict";r.d(t,"a",(function(){return o})),r.d(t,"b",(function(){return i})),r.d(t,"c",(function(){return s}));var n=r(85);function o(e,t,r=!1){return l(e,t,r)}function i(e,t){if(null!=t)return t[e]||a(e.split("."),!1,t)}function s(e,t,r){const n=e.split("."),o=n.pop(),i=a(n,!0,r);i&&o&&(i[o]=t)}function a(e,t,r){let n=r;for(const o of e){if(null==n)return;if(!(o in n)){if(!t)return;n[o]={}}n=n[o]}return n}function l(e,t,r){return t?Object.keys(t).reduce((function(e,o){let i=e[o],s=t[o];return i===s?e:void 0===i?(e[o]=Object(n.a)(s),e):(Array.isArray(s)||Array.isArray(e)?(i=i?Array.isArray(i)?e[o]=i.concat():e[o]=[i]:e[o]=[],s&&(Array.isArray(s)||(s=[s]),r?s.forEach((e=>{-1===i.indexOf(e)&&i.push(e)})):e[o]=s.concat())):s&&"object"==typeof s?e[o]=l(i,s,r):e.hasOwnProperty(o)&&!t.hasOwnProperty(o)||(e[o]=s),e)}),e||{}):e}},119:function(e,t,r){"use strict";r.d(t,"a",(function(){return b})),r.d(t,"b",(function(){return d})),r.d(t,"c",(function(){return p}));var n,o,i,s=r(140);let a,l;const c=null!=(n=null==(o=s.a.esriConfig)?void 0:o.locale)?n:null==(i=s.a.dojoConfig)?void 0:i.locale;function u(){var e,t;return null!=(e=null!=c?c:null==(t=s.a.navigator)?void 0:t.language)?e:"en"}function d(){return void 0===l&&(l=u()),l}const h=[];function p(e){return h.push(e),{remove(){h.splice(h.indexOf(e),1)}}}const f=[];function b(e){return f.push(e),{remove(){h.splice(f.indexOf(e),1)}}}function m(){var e;const t=null!=(e=a)?e:u();l!==t&&(l=t,[...f].forEach((e=>{e.call(null,t)})),[...h].forEach((e=>{e.call(null,t)})))}null==s.a.addEventListener||s.a.addEventListener("languagechange",m)},121:function(e,t,r){"use strict";var n=r(78),o=r(90),i=r(179),s=r(79);class a{constructor(){this._emitter=new a.EventEmitter(this)}emit(e,t){return this._emitter.emit(e,t)}on(e,t){return this._emitter.on(e,t)}once(e,t){return this._emitter.once(e,t)}hasEventListener(e){return this._emitter.hasEventListener(e)}}!function(e){class t{constructor(e=null){this.target=e,this._listenersMap=null}clear(){this._listenersMap&&this._listenersMap.clear()}emit(e,t){const r=this._listenersMap&&this._listenersMap.get(e);if(!r)return!1;const n=this.target||this;return[...r].forEach((e=>{e.call(n,t)})),r.length>0}on(e,t){if(Array.isArray(e)){const r=e.map((e=>this.on(e,t)));return Object(i.b)(r)}if(e.indexOf(",")>-1)throw new TypeError("Evented.on() with a comma delimited string of event types is not supported");this._listenersMap||(this._listenersMap=new Map);const r=this._listenersMap.get(e)||[];return r.push(t),this._listenersMap.set(e,r),{remove:()=>{const r=this._listenersMap&&this._listenersMap.get(e)||[],n=r.indexOf(t);n>=0&&r.splice(n,1)}}}once(e,t){const r=this.on(e,(e=>{r.remove(),t.call(null,e)}));return r}hasEventListener(e){const t=this._listenersMap&&this._listenersMap.get(e);return null!=t&&t.length>0}}e.EventEmitter=t,e.EventedMixin=e=>{let r=class extends e{constructor(){super(...arguments),this._emitter=new t}destroy(){this._emitter.clear()}emit(e,t){return this._emitter.emit(e,t)}on(e,t){return this._emitter.on(e,t)}once(e,t){return this._emitter.once(e,t)}hasEventListener(e){return this._emitter.hasEventListener(e)}};return r=Object(n.a)([Object(s.a)("esri.core.Evented")],r),r};let r=class extends o.a{constructor(){super(...arguments),this._emitter=new a.EventEmitter(this)}emit(e,t){return this._emitter.emit(e,t)}on(e,t){return this._emitter.on(e,t)}once(e,t){return this._emitter.once(e,t)}hasEventListener(e){return this._emitter.hasEventListener(e)}};r=Object(n.a)([Object(s.a)("esri.core.Evented")],r),e.EventedAccessor=r}(a||(a={}));var l=a;t.a=l},123:function(e,t,r){"use strict";r.d(t,"a",(function(){return c})),r.d(t,"b",(function(){return a})),r.d(t,"c",(function(){return l})),r.d(t,"d",(function(){return i})),r.d(t,"e",(function(){return s}));var n=r(76),o=r(93);r(189);const i="4.20",s={request(e,t){var n;const o=null==(n=e.options)?void 0:n.responseType;return Promise.resolve().then(r.bind(null,97)).then((({default:r})=>{const n=e.options||{};return n.responseType="native"===o||"native-request-init"===o?"native-request-init":"array-buffer",n.signal=null==t?void 0:t.signal,r(e.url,n)})).then((e=>{const t={data:e.data,ssl:e.ssl};return"native-request-init"===e.requestOptions.responseType?(delete t.data.signal,t):{result:t,transferList:[t.data]}}))}};let a;function l(e){a=e}function c(e){const t=a&&a.findCredential(e);return t&&t.token?Object(o.d)(e,"token",t.token):e}Object(n.a)("host-webworker")||(Object(n.a)("edge")||Object(n.a)("trident"))&&console.warn("Deprecated browser - see http://esriurl.com/oldbrowser")},127:function(e,t,r){"use strict";r.d(t,"a",(function(){return l}));var n=r(142),o=(r(97),r(84)),i=r(77),s=r(93);const a=i.a.getLogger("esri.assets");function l(e){if(!n.a.assetsPath)throw a.errorOnce("The API assets location needs to be set using config.assetsPath. More information: https://arcg.is/1OzLe50"),new o.a("assets:path-not-set","config.assetsPath is not set");return Object(s.z)(n.a.assetsPath,e)}},129:function(e,t,r){"use strict";r.d(t,"a",(function(){return s})),r.d(t,"b",(function(){return a})),r.d(t,"c",(function(){return l})),r.d(t,"d",(function(){return f})),r.d(t,"e",(function(){return p})),r.d(t,"f",(function(){return d})),r.d(t,"g",(function(){return u}));var n=r(179),o=r(85),i=r(82);function s(e){return e?e.__accessor__?e.__accessor__:e.propertyInvalidated?e:null:null}function a(e,t){return null!=e&&e.metadatas&&null!=e.metadatas[t]}function l(e,t,r){return c(e,t,r?{policy:r,path:""}:null)}function c(e,t,r){return t?Object.keys(t).reduce((function(e,n){let s=null,a="merge";if(r&&(s=r.path?`${r.path}.${n}`:n,a=r.policy(s)),"replace"===a)return e[n]=t[n],e;if(void 0===e[n])return e[n]=Object(o.a)(t[n]),e;let l=e[n],u=t[n];if(l===u)return e;if(Array.isArray(u)||Array.isArray(e))l=l?Array.isArray(l)?e[n]=l.concat():e[n]=[l]:e[n]=[],u&&(Array.isArray(u)||(u=[u]),u.forEach((e=>{-1===l.indexOf(e)&&l.push(e)})));else if(u&&"object"==typeof u)if(r){const t=r.path;r.path=Object(i.d)(s),e[n]=c(l,u,r),r.path=t}else e[n]=c(l,u,null);else e.hasOwnProperty(n)&&!t.hasOwnProperty(n)||(e[n]=u);return e}),e||{}):e}function u(e){return e?"string"==typeof e&&-1===e.indexOf(".")?e:d(e):e}function d(e){return Array.isArray(e)?e:e.split(".")}function h(e){return e.indexOf(",")>-1?e.split(",").map((e=>e.trim())):[e.trim()]}function p(e,t,r,o){const i=function(e){if(Array.isArray(e)){const t=[];for(const r of e)t.push(...h(r));return t}return h(e)}(t);if(1!==i.length){const t=i.map((t=>o(e,t,r)));return Object(n.b)(t)}return o(e,i[0],r)}function f(e){let t=!1;return()=>{t||(t=!0,e())}}},1318:function(e,t,r){"use strict";r.r(t),r.d(t,"Bookmarks",(function(){return We}));var n=r(1),o=r(78),i=r(285),s=r(176),a=r(111),l=r(77),c=r(108),u=r(141),d=(r(76),r(107)),h=r(80),p=r(79),f=r(863),b=r(153),m=r(90);r(81);let g=class extends m.a{constructor(e){super(e)}get editedBookmark(){const{bookmark:e}=this;return e?this._get("editedBookmark")||e.clone():null}get state(){return this._get("state")}set state(e){this.validationState=void 0,this.loading=void 0,this._set("state",e)}};Object(o.a)([Object(h.b)()],g.prototype,"bookmark",void 0),Object(o.a)([Object(h.b)({readOnly:!0})],g.prototype,"editedBookmark",null),Object(o.a)([Object(h.b)()],g.prototype,"state",null),Object(o.a)([Object(h.b)()],g.prototype,"validationState",void 0),Object(o.a)([Object(h.b)()],g.prototype,"loading",void 0),g=Object(o.a)([Object(p.a)("esri.widgets.Bookmarks.UserState")],g);var y=g,v=r(577),O=r(102),j=r(84),w=r(121),_=r(939),k=r(516);const S="esri.widgets.Bookmarks.BookmarksViewModel",x=l.a.getLogger(S),E=O.a.ofType(_.a),A={width:128,height:128,format:"png"},T={takeScreenshot:!0,captureViewpoint:!0,captureRotation:!0,captureScale:!0};let I=class extends(Object(k.a)(w.a.EventedAccessor)){constructor(e){super(e),this.activeBookmark=null}destroy(){this.view=null,this._set("activeBookmark",null)}set bookmarks(e){void 0!==e?this._override("bookmarks",e):this._clearOverride("bookmarks")}get bookmarks(){return this.get("view.map.bookmarks")||new E}set defaultCreateOptions(e){this._set("defaultCreateOptions",{...T,...e})}get defaultCreateOptions(){return T}set defaultEditOptions(e){this._set("defaultEditOptions",{...T,...e})}get defaultEditOptions(){return T}get state(){const e=this.get("view");return e&&!e.ready?"loading":"ready"}get view(){return this._get("view")}set view(e){e&&"2d"!==e.type&&x.error(new j.a("view:invalid-view","SceneView is not supported",{view:e})),this._set("view",e)}async createBookmark(e){const{view:t,defaultCreateOptions:r}=this;if(!t){const e=new j.a("create-bookmark:invalid-view","Cannot create a bookmark without a view.");return x.error(e),Promise.reject(e)}const{takeScreenshot:n,screenshotSettings:o,captureViewpoint:i,captureRotation:s,captureScale:a}={...r,...e},l=n?await this._createThumbnail(o):void 0;return new _.a({...l&&{thumbnail:l},...i&&{viewpoint:this._createViewpoint({view:t,captureScale:a,captureRotation:s})}})}async editBookmark(e,t){const{view:r,defaultEditOptions:n}=this;if(!r){const e=new j.a("edit-bookmark:invalid-view","Cannot edit a bookmark without a view.");return x.error(e),Promise.reject(e)}const{takeScreenshot:o,screenshotSettings:i,captureViewpoint:s,captureRotation:a,captureScale:l}={...n,...t},c=o?await this._createThumbnail(i):void 0;return c&&(e.thumbnail=c),s&&(e.viewpoint=this._createViewpoint({view:r,captureScale:l,captureRotation:a})),this.emit("bookmark-edit",{bookmark:e}),e}goTo(e){const{view:t}=this;if(!t){const e=new j.a("go-to:invalid-view","Cannot go to a bookmark without a view");return x.error(e),Promise.reject(e)}const r=null==e?void 0:e.viewpoint;if(!r){const t=new j.a("go-to:invalid-bookmark","Cannot go to a bookmark that does not contain a 'viewpoint'.",{bookmark:e});return x.error(t),Promise.reject(t)}this._set("activeBookmark",e);const n={target:r},o=this.callGoTo(n);return this.emit("bookmark-select",{bookmark:e}),o.catch((()=>{})).then((()=>this._set("activeBookmark",null))),o}async _createThumbnail(e){const t=await this.view.takeScreenshot({...A,...e});return new f.a({url:t.dataUrl})}_createViewpoint({view:e,captureRotation:t,captureScale:r}){var n,o;const i=null==(n=e.viewpoint)?void 0:n.clone();return new v.a({targetGeometry:null==(o=e.extent)?void 0:o.clone(),rotation:t&&(null==i?void 0:i.rotation)||0,scale:r&&(null==i?void 0:i.scale)||0})}};Object(o.a)([Object(h.b)({readOnly:!0})],I.prototype,"activeBookmark",void 0),Object(o.a)([Object(h.b)({type:E})],I.prototype,"bookmarks",null),Object(o.a)([Object(h.b)()],I.prototype,"defaultCreateOptions",null),Object(o.a)([Object(h.b)()],I.prototype,"defaultEditOptions",null),Object(o.a)([Object(h.b)({readOnly:!0})],I.prototype,"state",null),Object(o.a)([Object(h.b)({value:null})],I.prototype,"view",null),I=Object(o.a)([Object(p.a)(S)],I);var C=I,M=r(805),N=r(708),P=r(338),L=r(105),D=r(169),B=r(313),U=r(122),R=r(1010);const F="data-bookmark-uid",q="esri-bookmarks esri-widget--panel",$="esri-bookmarks__loader-container",W="esri-bookmarks__loader",V="esri-bookmarks__list",z="esri-bookmarks__list--sortable",J="esri-bookmarks__bookmark",G="esri-bookmarks__bookmark-button",H="esri-bookmarks__bookmark-image-container",Y="esri-bookmarks__bookmark-edit-button",K="esri-bookmarks_bookmark-drag-handle",X="esri-bookmarks_bookmark-drag-handle-icon",Z="esri-bookmarks__bookmark-icon",Q="esri-bookmarks__image",ee="esri-bookmarks__bookmark-name",te="esri-bookmarks__bookmark--active",re="esri-widget__content--empty",ne="esri-bookmarks__no-bookmarks-heading",oe="esri-widget__no-bookmark-icon",ie="esri-bookmarks__no-bookmarks-description",se="esri-bookmarks__adding-bookmark",ae="esri-bookmarks__add-bookmark",le="esri-bookmarks__add-bookmark-button",ce="esri-bookmarks__add-bookmark-icon",ue="esri-bookmarks__authoring-card",de="esri-bookmarks__authoring-container",he="esri-bookmarks__authoring-form",pe="esri-bookmarks__authoring-label",fe="esri-bookmarks__authoring-actions",be="esri-bookmarks__authoring-input--invalid",me="esri-bookmarks__authoring-delete-button",ge="esri-bookmarks__authoring-cancel-button",ye="esri-widget",ve="esri-widget--disabled",Oe="esri-button",je="esri-button--tertiary",we="esri-input",_e="esri-icon-handle-vertical",ke="esri-icon-plus",Se="esri-icon-edit",xe="esri-icon-handle-horizontal",Ee="esri-icon-refresh",Ae="esri-icon-link",Te="esri-icon-erase",Ie="esri-icon-bookmark",Ce="esri-widget__heading",Me="esri-icon-loading-indicator",Ne="esri-rotating",Pe={addBookmark:!0,thumbnail:!0},Le=/^https:\/\/.*/i,De="esri.widgets.Bookmarks",Be=l.a.getLogger(De);let Ue=class extends b.a{constructor(e,t){super(e,t),this._handles=new a.a,this._addInputNode=null,this._editInputNode=null,this._urlEditInputNode=null,this._addBookmarkButtonNode=null,this._focusAddBookmarkButton=!1,this._focusEditInputBox=!1,this._focusAddInputBox=!1,this._focusUrlEditInputBox=!1,this._sortable=null,this._sortableNode=null,this._focusSortUid=null,this._selectedSortUid=null,this._sortableSavedItems=null,this._userState=null,this.defaultCreateOptions=null,this.defaultEditOptions=null,this.bookmarks=null,this.disabled=!1,this.editingEnabled=!1,this.headingLevel=2,this.goToOverride=null,this.iconClass=Ie,this.label=void 0,this.messages=null,this.messagesCommon=null,this.messagesUnits=null,this.view=null,this.viewModel=new C,this.visibleElements={...Pe}}initialize(){this.own([Object(c.a)(this,"viewModel.bookmarks",(()=>this._bookmarksInitialized())),Object(c.a)(this,"editingEnabled",(()=>this._toggleSorting()))])}destroy(){this._destroySortable(),this._handles.destroy(),this._handles=null,this._editMenu.destroy()}get _editMenuItems(){var e,t;const{messages:r,_userState:n}=this,o=null==n||null==(e=n.editedBookmark)||null==(t=e.thumbnail)?void 0:t.url;return[new N.a({label:null==r?void 0:r.menu.refreshThumbnail,iconClass:Ee,clickFunction:()=>this._refreshThumbnail()}),new N.a({label:Le.test(o)?null==r?void 0:r.menu.editImageUrl:null==r?void 0:r.menu.useImageUrl,iconClass:Ae,clickFunction:()=>this._startUseImageUrl()}),o?new N.a({label:null==r?void 0:r.menu.removeThumbnail,iconClass:Te,clickFunction:()=>this._removeThumbnail()}):null].filter(Boolean)}get _editMenu(){const{_editMenuItems:e,messages:t}=this,r=this._get("_editMenu");r&&r.destroy();const n=new M.a({iconClass:xe,label:null==t?void 0:t.menu.label});return n.items=e,n}get bookmarkCreationOptions(){return Object(i.d)(Be,"bookmarkCreationOptions",{replacement:"defaultCreateOptions",version:"4.18"}),this.viewModel.defaultCreateOptions}set bookmarkCreationOptions(e){Object(i.d)(Be,"bookmarkCreationOptions",{replacement:"defaultCreateOptions",version:"4.18"}),this.viewModel.defaultCreateOptions=e}castVisibleElements(e){return{...Pe,...e}}endAddBookmark(){this._userState=null}goTo(e){return this.viewModel.goTo(e)}render(){const{state:e}=this.viewModel,t="loading"===e?this.renderLoading():this.renderBookmarks();return Object(U.a)("div",{class:this.classes(q,ye,{[ve]:this.disabled})},t)}startAddBookmark(){this._userState=new y({state:"add"}),this._focusAddInputBox=!0,this.scheduleRender()}renderLoading(){return Object(U.a)("div",{class:$,key:"loader"},Object(U.a)("div",{class:W}))}renderNoBookmarksContainer(){const{messages:e}=this;return Object(U.a)("div",{class:re,key:"no-bookmarks"},Object(U.a)("span",{"aria-hidden":"true",class:this.classes(oe,Ie)}),Object(U.a)(P.a,{level:this.headingLevel,class:this.classes(Ce,ne)},null==e?void 0:e.noBookmarksHeading),Object(U.a)("p",{class:ie},null==e?void 0:e.noBookmarksDescription))}renderAddBookmarkLoading(){var e;return Object(U.a)("div",{key:"adding-bookmark",class:se},Object(U.a)("span",{"aria-hidden":"true",class:this.classes(Me,Ne)}),null==(e=this.messages)?void 0:e.addingBookmark)}renderBookmarkItems(e){if(!e)return null;const{_userState:t,editingEnabled:r}=this;return e.map((e=>r&&e&&t&&("edit"===t.state||"edit-thumbnail"===t.state)&&t.bookmark===e?"edit-thumbnail"===t.state?this.renderEditingBookmarkUrl(t.editedBookmark):this.renderEditingBookmark(t.editedBookmark):this.renderBookmark(e))).toArray()}renderBookmarksContainer(e){var t;const{_userState:r,editingEnabled:n}=this,o="add"===(null==r?void 0:r.state),i=n&&!o?this.renderAddBookmarkButton():null,s=n?o&&r.loading?this.renderAddBookmarkLoading():"add"===(null==r?void 0:r.state)?this.renderAddingBookmark():null:null;return[Object(U.a)("ul",{key:"bookmark-list","aria-label":null==(t=this.messages)?void 0:t.widgetLabel,class:this.classes(V,{[z]:this.editingEnabled}),afterCreate:this._sortNodeCreated,afterRemoved:this._destroySortable,"data-node-ref":"_sortableNode",bind:this},this.renderBookmarkItems(e)),i,s]}renderAddBookmarkButton(){var e;return this.visibleElements.addBookmark?Object(U.a)("div",{key:"add-bookmark-item",class:ae},Object(U.a)("button",{class:this.classes(Oe,je,le),onclick:this.startAddBookmark,afterCreate:this._storeAddBookmarkButton,afterUpdate:this._storeAddBookmarkButton,"data-node-ref":"_addBookmarkButtonNode",bind:this,type:"button"},Object(U.a)("span",{"aria-hidden":"true",class:this.classes(ce,ke)}),null==(e=this.messages)?void 0:e.addBookmark)):null}renderBookmarks(){const{bookmarks:e}=this.viewModel,t=e&&e.filter(Boolean),r=t&&t.length,n=r||this.editingEnabled?this.renderBookmarksContainer(t):null;return[r?null:this.renderNoBookmarksContainer(),n]}renderEditContainer(e){const{messagesCommon:t}=this;return Object(U.a)("div",{key:"edit-container"},Object(U.a)("button",{title:null==t?void 0:t.edit,"aria-label":null==t?void 0:t.edit,"data-bookmark":e,onclick:this._showEditBookmarkForm,bind:this,class:Y,type:"button"},Object(U.a)("span",{"aria-hidden":"true",class:Se})))}renderDragHandle(e){const{messagesCommon:t}=this,r={[F]:e.uid};return Object(U.a)("div",{role:"button",tabIndex:0,key:"drag-handle",bind:this,class:K,onkeydown:this._dragHandleKeydown,afterCreate:this._focusDragHandle,afterUpdate:this._focusDragHandle,onblur:this._dragHandleBlur,"aria-pressed":this._selectedSortUid===e.uid?"true":"false","aria-label":null==t?void 0:t.dragHandleLabel,title:null==t?void 0:t.dragHandleTitle,...r},Object(U.a)("span",{"aria-hidden":"true",class:this.classes(X,_e)}))}renderBookmarkImageIcon(){return Object(U.a)("span",{"aria-hidden":"true",class:this.classes(Z,Ie)})}renderBookmarkImage(e){const{visibleElements:t}=this,{thumbnail:r}=e,n=r&&r.url||"";return t.thumbnail&&n?Object(U.a)("img",{src:n,alt:"",class:Q}):null}renderBookmarkButton(e){const{messagesCommon:t}=this,{name:r}=e,n=r||(null==t?void 0:t.untitled),o=Object(U.a)("div",{class:H},this.renderBookmarkImage(e)||this.renderBookmarkImageIcon());return Object(U.a)("button",{key:"bookmark-button",class:G,bind:this,"data-bookmark":e,onclick:this._goToBookmark,type:"button"},o,Object(U.a)("span",{class:ee},n))}renderBookmark(e){const{activeBookmark:t}=this.viewModel,r={[te]:t===e},n=this.editingEnabled?this.renderEditContainer(e):null,o={[F]:e.uid},i=this.editingEnabled?this.renderDragHandle(e):null;return Object(U.a)("li",{key:e,class:this.classes(J,r),...o},i,this.renderBookmarkButton(e),n)}renderEditingBookmarkName(e){const{messages:t,_userState:r}=this,n="name-required"===r.validationState;return Object(U.a)("label",{class:pe},null==t?void 0:t.title,n?Object(U.a)("strong",null,null==t?void 0:t.invalidTitle):null,Object(U.a)("input",{required:!0,bind:this,class:this.classes(we,n?be:null),type:"text",value:e.name,afterCreate:this._storeEditInput,afterUpdate:this._focusEditInput,"data-bookmark":e,"data-node-ref":"_editInputNode",placeholder:null==t?void 0:t.titlePlaceholder}))}renderEditingBookmarkUrlActions(){const{messagesCommon:e}=this;return Object(U.a)("div",{class:fe},Object(U.a)("input",{type:"button",value:null==e?void 0:e.back,class:this.classes(Oe,je),onclick:this._closeUrlEditBookmarkForm,bind:this}),Object(U.a)("input",{class:Oe,type:"submit",value:null==e?void 0:e.add}))}renderEditingBookmarkActions(){const{messagesCommon:e}=this,{bookmark:t}=this._userState;return Object(U.a)("div",{class:fe},Object(U.a)("input",{type:"button",value:null==e?void 0:e.delete,class:this.classes(Oe,je,me),"data-bookmark":t,onclick:this._deleteBookmark,bind:this}),Object(U.a)("input",{type:"button",value:null==e?void 0:e.cancel,class:this.classes(Oe,je),onclick:this._closeEditBookmarkForm,bind:this}),Object(U.a)("input",{class:Oe,type:"submit",value:null==e?void 0:e.save}))}renderEditingBookmarkUrlInput(e){var t;const{messages:r,_userState:n}=this,o=null==(t=e.thumbnail)?void 0:t.url,i=Le.test(o)?o:null,s="absolute-url-required"===n.validationState;return Object(U.a)("label",{class:pe},s?Object(U.a)("strong",null,null==r?void 0:r.invalidImageUrl):null,Object(U.a)("input",{required:!0,bind:this,class:this.classes(we,s?be:null),type:"text",value:i,afterCreate:this._storeUrlEditInput,afterUpdate:this._focusUrlEditInput,"data-bookmark":e,"data-node-ref":"_urlEditInputNode",title:null==r?void 0:r.imageUrlTooltip,placeholder:null==r?void 0:r.imageUrlPlaceholder}))}renderEditingBookmarkUrl(e){const t={[F]:e.uid};return Object(U.a)("li",{key:"edit-bookmark-url-form",class:ue,...t},Object(U.a)("form",{class:he,onsubmit:this._editBookmarkUrlSubmit,bind:this},this.renderEditingBookmarkUrlInput(e),this.renderEditingBookmarkUrlActions()))}renderEditingBookmark(e){const t={[F]:e.uid};return Object(U.a)("li",{key:"edit-bookmark-form",class:ue,...t},Object(U.a)("form",{class:he,onsubmit:this._editBookmarkSubmit,bind:this},Object(U.a)("div",{class:de},Object(U.a)("div",{class:H},this.renderBookmarkImage(e),this._editMenu.render()),this.renderEditingBookmarkName(e)),this.renderEditingBookmarkActions()))}renderAddingBookmarkName(){const{_userState:e,messages:t}=this,r="name-required"===e.validationState;return Object(U.a)("label",{class:pe},null==t?void 0:t.title,r?Object(U.a)("strong",null,null==t?void 0:t.invalidTitle):null,Object(U.a)("input",{required:!0,bind:this,class:this.classes(we,r?be:null),type:"text",afterCreate:this._storeAddInput,afterUpdate:this._focusAddInput,"data-node-ref":"_addInputNode",value:"",placeholder:null==t?void 0:t.titlePlaceholder}))}renderAddingBookmarkActions(){const{messagesCommon:e}=this;return Object(U.a)("div",{class:this.classes(fe)},Object(U.a)("input",{type:"button",value:null==e?void 0:e.cancel,class:this.classes(Oe,je,ge),onclick:this._endAddBookmark.bind(this),bind:this}),Object(U.a)("input",{class:Oe,type:"submit",value:null==e?void 0:e.add}))}renderAddingBookmark(){return Object(U.a)("div",{key:"add-bookmark-form",class:ue},Object(U.a)("form",{class:he,onsubmit:this._addBookmarkSubmit,bind:this},this.renderAddingBookmarkName(),this.renderAddingBookmarkActions()))}_dragHandleBlur(){this._selectedSortUid=null,this.scheduleRender()}_dragHandleKeydown(e){const{_sortableSavedItems:t}=this,r=Object(s.a)(e);if(-1===["ArrowDown","ArrowUp","Escape","Tab"," ","Enter"].indexOf(r))return;const{_sortable:n,_selectedSortUid:o}=this,i=n.toArray(),a=e.target.getAttribute(F),l=i.indexOf(a);if(Object(L.f)(r)){const e=o&&o===a;return this._selectedSortUid=e?null:a,this._sortableSavedItems=e?null:this._sortable.toArray(),void this.scheduleRender()}if("Tab"===r)return this._selectedSortUid=null,void this.scheduleRender();if("Escape"===r&&t)return e.stopPropagation(),this._selectedSortUid=null,this._updateSortItems(t,n,a),void this.scheduleRender();if(-1===l||!o)return;const c="ArrowUp"===r?l-1:l+1;c>=i.length||c<=-1||(function(e,t,r){e.splice(r,0,e.splice(t,1)[0])}(i,l,c),this._updateSortItems(i,n,a))}_updateSortItems(e,t,r){t.sort(e),this._sortBookmarks(t),this._focusSortUid=r,this._selectedSortUid=r}_focusDragHandle(e){const{_focusSortUid:t}=this;e&&t&&e.getAttribute(F)===t&&(e.focus(),this._focusSortUid=null)}_toggleSorting(){const{_sortable:e,_sortableNode:t,editingEnabled:r}=this;if(t)if(e)e.option("disabled",!r);else{const e=R.a.create(t,{dataIdAttr:F,handle:`.${K}`,group:"bookmarks",disabled:!r,onSort:()=>this._sortBookmarks(e)});this._sortable=e}}_sortNodeCreated(e){this._sortableNode=e,this._toggleSorting()}_sortBookmarks(e){const{bookmarks:t}=this.viewModel;if(!t)return;const r=e.toArray();t.sort(((e,t)=>{const n=r.indexOf(e.uid),o=r.indexOf(t.uid);return n>o?1:n<o?-1:0}))}_destroySortable(){const{_sortable:e}=this;e&&e.destroy(),this._sortable=null}_endAddBookmark(){this._focusAddBookmarkButton=!0,this.endAddBookmark()}_bookmarksInitialized(){const e="bookmarks-init",{_handles:t}=this;t.remove(e),t.add(Object(c.b)(this,"viewModel.bookmarks","change",(()=>this._bookmarksChanged())),e)}_bookmarksChanged(){const e="bookmarks-change",{bookmarks:t}=this.viewModel,{_handles:r}=this;r.remove(e);const n=t.map((e=>Object(c.d)(e,["active","name","thumbnail.url"],(()=>this.scheduleRender()))));r.add(n,e),this.scheduleRender()}_showEditBookmarkForm(e){const t=e.currentTarget["data-bookmark"];this._focusEditInputBox=!0,this._userState=new y({bookmark:t,state:"edit"}),this.viewModel.goTo(t),this.scheduleRender()}_closeUrlEditBookmarkForm(){this._focusEditInputBox=!0,this._userState.state="edit"}_closeEditBookmarkForm(){this._userState=null}_addBookmarkSubmit(e){e.preventDefault();const{_addInputNode:t,_userState:r}=this,n=t&&t.value.trim();n?(r.loading=!0,this.viewModel.createBookmark().then((e=>{e.name=n,this.viewModel.bookmarks.add(e),this._endAddBookmark()}))):r.validationState="name-required"}async _editBookmarkAndClose(e,t){await this.viewModel.editBookmark(e,t),this._closeEditBookmarkForm()}_editBookmarkSubmit(e){e.preventDefault();const{_editInputNode:t,_userState:r}=this,n=t&&t.value.trim();n?(r.bookmark.name=n,r.bookmark.thumbnail=r.editedBookmark.thumbnail,this._editBookmarkAndClose(r.bookmark,{takeScreenshot:!1})):r.validationState="name-required"}_storeAddBookmarkButton(e){this._addBookmarkButtonNode=e,this._focusAddBookmark()}_storeEditInput(e){this._editInputNode=e,this._focusEditInput()}_storeAddInput(e){this._addInputNode=e,this._focusAddInput()}_storeUrlEditInput(e){this._urlEditInputNode=e,this._focusUrlEditInput()}_focusUrlEditInput(){this._urlEditInputNode&&this._focusUrlEditInputBox&&(this._focusUrlEditInputBox=!1,this._urlEditInputNode.focus())}_focusAddInput(){this._addInputNode&&this._focusAddInputBox&&(this._focusAddInputBox=!1,this._addInputNode.focus())}_focusAddBookmark(){this._addBookmarkButtonNode&&this._focusAddBookmarkButton&&(this._focusAddBookmarkButton=!1,this._addBookmarkButtonNode.focus())}_focusEditInput(){this._editInputNode&&this._focusEditInputBox&&(this._focusEditInputBox=!1,this._editInputNode.focus())}_deleteBookmark(e){const t=e.currentTarget["data-bookmark"];this.viewModel.bookmarks.remove(t)}_goToBookmark(e){const t=e.currentTarget["data-bookmark"];this.endAddBookmark(),this._closeEditBookmarkForm(),this.viewModel.goTo(t)}async _refreshThumbnail(){const{_userState:e,_editMenu:t,viewModel:r}=this;e.validationState=void 0,await r.editBookmark(this._userState.editedBookmark,{takeScreenshot:!0,captureViewpoint:!1,captureRotation:!1,captureScale:!1}),t.open=!1,this._focusEditInputBox=!0,this.scheduleRender()}_removeThumbnail(){const{_userState:e,_editMenu:t}=this;e.editedBookmark.thumbnail=null,e.validationState=void 0,t.open=!1,this._focusEditInputBox=!0,this.scheduleRender()}_startUseImageUrl(){this._userState.state="edit-thumbnail",this._editMenu.open=!1,this._focusUrlEditInputBox=!0,this.scheduleRender()}_editBookmarkUrlSubmit(e){e.preventDefault();const{_urlEditInputNode:t,_userState:r}=this,n=t.value;Le.test(n)?(n&&(r.editedBookmark.thumbnail=new f.a({url:n})),this._closeUrlEditBookmarkForm()):r.validationState="absolute-url-required"}};Object(o.a)([Object(h.b)({type:y})],Ue.prototype,"_userState",void 0),Object(o.a)([Object(h.b)({readOnly:!0})],Ue.prototype,"_editMenuItems",null),Object(o.a)([Object(h.b)({readOnly:!0})],Ue.prototype,"_editMenu",null),Object(o.a)([Object(h.b)()],Ue.prototype,"bookmarkCreationOptions",null),Object(o.a)([Object(u.a)("viewModel.defaultCreateOptions")],Ue.prototype,"defaultCreateOptions",void 0),Object(o.a)([Object(u.a)("viewModel.defaultEditOptions")],Ue.prototype,"defaultEditOptions",void 0),Object(o.a)([Object(u.a)("viewModel.bookmarks")],Ue.prototype,"bookmarks",void 0),Object(o.a)([Object(h.b)()],Ue.prototype,"disabled",void 0),Object(o.a)([Object(h.b)()],Ue.prototype,"editingEnabled",void 0),Object(o.a)([Object(h.b)()],Ue.prototype,"headingLevel",void 0),Object(o.a)([Object(u.a)("viewModel.goToOverride")],Ue.prototype,"goToOverride",void 0),Object(o.a)([Object(h.b)()],Ue.prototype,"iconClass",void 0),Object(o.a)([Object(h.b)({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],Ue.prototype,"label",void 0),Object(o.a)([Object(h.b)()],Ue.prototype,"localeStrings",void 0),Object(o.a)([Object(h.b)(),Object(D.a)("esri/widgets/Bookmarks/t9n/Bookmarks")],Ue.prototype,"messages",void 0),Object(o.a)([Object(h.b)(),Object(D.a)("esri/t9n/common")],Ue.prototype,"messagesCommon",void 0),Object(o.a)([Object(h.b)(),Object(D.a)("esri/core/t9n/Units")],Ue.prototype,"messagesUnits",void 0),Object(o.a)([Object(u.a)("viewModel.view")],Ue.prototype,"view",void 0),Object(o.a)([Object(h.b)({type:C}),Object(B.a)(["select-bookmark","bookmark-edit","bookmark-select"])],Ue.prototype,"viewModel",void 0),Object(o.a)([Object(h.b)()],Ue.prototype,"visibleElements",void 0),Object(o.a)([Object(d.a)("visibleElements")],Ue.prototype,"castVisibleElements",null),Object(o.a)([Object(h.b)()],Ue.prototype,"endAddBookmark",null),Object(o.a)([Object(h.b)()],Ue.prototype,"startAddBookmark",null),Ue=Object(o.a)([Object(p.a)(De)],Ue);var Re=Ue,Fe=r(1115),qe=r(86),$e=r(0);const We=e=>{const t=Object(n.useRef)(null);return Object(n.useEffect)((()=>{const r=new Re({container:t.current,view:e.view,editingEnabled:!0});return qe.c((e=>{if(window.localStorage.getItem("imaps")){const t=Fe.a.fromJSON(JSON.parse(window.localStorage.getItem("imaps")));t.load().then((()=>{e(t.bookmarks)}))}})).then((e=>{r.bookmarks.removeAll(),r.bookmarks.addMany(e)})),()=>{r&&r.destroy()}}),[e.id]),Object($e.jsx)("div",{ref:t})};t.default=We},133:function(e,t,r){"use strict";r.d(t,"a",(function(){return a})),r.d(t,"b",(function(){return l})),r.d(t,"c",(function(){return s})),r.d(t,"d",(function(){return c}));var n=r(116);const o=/\{([^\}]+)\}/g;function i(e){return null==e?"":e}function s(e,t){return e.replace(o,"object"==typeof t?(e,r)=>i(Object(n.b)(r,t)):(e,r)=>i(t(r)))}function a(e,t){return e.replace(/([\.$?*|{}\(\)\[\]\\\/\+\-^])/g,(e=>t&&-1!==t.indexOf(e)?e:`\\${e}`))}function l(e){let t=0;for(let r=0;r<e.length;r++)t=(t<<5)-t+e.charCodeAt(r),t|=0;return t}function c(e){return(new DOMParser).parseFromString(e||"","text/html").body.innerText||""}},140:function(e,t,r){"use strict";(function(e){const r="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof e?e:void 0;t.a=r}).call(this,r(213))},141:function(e,t,r){"use strict";r.d(t,"a",(function(){return o}));var n=r(80);function o(e,t){const r=t?{...t,source:e}:e;return Object(n.b)({aliasOf:r})}},142:function(e,t,r){"use strict";var n=r(140),o=(r(76),r(116));const i={apiKey:void 0,applicationUrl:n.a.location&&n.a.location.href,assetsPath:"",fontsUrl:"https://static.arcgis.com/fonts",geometryService:null,geometryServiceUrl:"https://utility.arcgisonline.com/arcgis/rest/services/Geometry/GeometryServer",geoRSSServiceUrl:"https://utility.arcgis.com/sharing/rss",kmlServiceUrl:"https://utility.arcgis.com/sharing/kml",portalUrl:"https://www.arcgis.com",workers:{loaderConfig:{has:{},paths:{},map:{},packages:[]}},request:{httpsDomains:["arcgis.com","arcgisonline.com","esrikr.com","premiumservices.blackbridge.com","esripremium.accuweather.com","gbm.digitalglobe.com","firstlook.digitalglobe.com","msi.digitalglobe.com"],interceptors:[],maxUrlLength:2e3,proxyRules:[],proxyUrl:null,timeout:6e4,trustedServers:[],useIdentity:!0},log:{interceptors:[],level:null}};if(n.a.esriConfig&&(Object(o.a)(i,n.a.esriConfig,!0),delete i.has),!i.assetsPath){const e="4.20.2";i.assetsPath=`https://js.arcgis.com/${e.slice(0,-2)}/@arcgis/core/assets`}i.baseUrl&&console.warn("[esri.config]","baseUrl has been replaced by assetsPath"),Object.defineProperty(i,"baseUrl",{set(){console.warn("[esri.config]","baseUrl has been replaced by assetsPath")}}),i.request.corsEnabledServers=[],i.request.corsEnabledServers.push=function(){return console.warn("[esri.config]","request.corsEnabledServers is not supported and will be removed in a future release. See http://esriurl.com/cors8664"),0},t.a=i},151:function(e,t,r){"use strict";r.d(t,"a",(function(){return u})),r.d(t,"b",(function(){return c}));var n=r(78),o=r(90),i=r(111),s=r(80),a=r(79),l=r(288);const c=e=>{let t=class extends e{destroy(){this.destroyed||(this.handles.destroy(),this.updatingHandles.destroy())}get handles(){return this._get("handles")||new i.a}get updatingHandles(){return this._get("updatingHandles")||new l.a}};return Object(n.a)([Object(s.b)({readOnly:!0})],t.prototype,"handles",null),Object(n.a)([Object(s.b)({readOnly:!0})],t.prototype,"updatingHandles",null),t=Object(n.a)([Object(a.a)("esri.core.HandleOwner")],t),t};let u=class extends(c(o.a)){};u=Object(n.a)([Object(a.a)("esri.core.HandleOwner")],u)},161:function(e,t,r){"use strict";r(209),r(194),r(248),r(119);var n=r(167),o=r(97),i=r(84),s=r(140),a=r(82);async function l(e){if(Object(a.k)(u.fetchBundleAsset))return u.fetchBundleAsset(e);const t=await Object(o.default)(e,{responseType:"text"});return JSON.parse(t.data)}class c{constructor({base:e="",pattern:t,location:r=new URL(window.location.href)}){let n;n="string"==typeof r?e=>new URL(e,new URL(r,s.a.location)).href:r instanceof URL?e=>new URL(e,r).href:r,this.pattern="string"==typeof t?new RegExp(`^${t}`):t,this.getAssetUrl=n,e=e?e.endsWith("/")?e:e+"/":"",this.matcher=new RegExp(`^${e}(?:(.*)/)?(.*)$`)}fetchMessageBundle(e,t){return async function(e,t,r,o){const s=t.exec(r);if(!s)throw new i.a("esri-intl:invalid-bundle",`Bundle id "${r}" is not compatible with the pattern "${t}"`);const a=s[1]?`${s[1]}/`:"",c=s[2],u=Object(n.b)(o),d=`${a}${c}.json`,h=u?`${a}${c}_${u}.json`:d;let p;try{p=await l(e(h))}catch(f){if(h===d)throw new i.a("intl:unknown-bundle",`Bundle "${r}" cannot be loaded`,{error:f});try{p=await l(e(d))}catch(f){throw new i.a("intl:unknown-bundle",`Bundle "${r}" cannot be loaded`,{error:f})}}return p}(this.getAssetUrl,this.matcher,e,t)}}const u={};var d,h=r(127);Object(n.c)((d={pattern:"esri/",location:h.a},new c(d)))},164:function(e,t,r){"use strict";var n=r(379);class o extends n.a{constructor(e,t,r){if(super(e,t,r),!(this instanceof o))return new o(e,t,r)}}o.prototype.type="warning",t.a=o},167:function(e,t,r){"use strict";r.d(t,"a",(function(){return p})),r.d(t,"b",(function(){return f})),r.d(t,"c",(function(){return h}));var n=r(84),o=r(86),i=r(119);const s=/^([a-z]{2})(?:[-_]([A-Za-z]{2}))?$/,a={ar:!0,bs:!0,ca:!0,cs:!0,da:!0,de:!0,el:!0,en:!0,es:!0,et:!0,fi:!0,fr:!0,he:!0,hr:!0,hu:!0,id:!0,it:!0,ja:!0,ko:!0,lt:!0,lv:!0,nb:!0,nl:!0,pl:!0,"pt-BR":!0,"pt-PT":!0,ro:!0,ru:!0,sk:!0,sl:!0,sr:!0,sv:!0,th:!0,tr:!0,uk:!0,vi:!0,"zh-CN":!0,"zh-HK":!0,"zh-TW":!0};function l(e){var t;return null!=(t=a[e])&&t}const c=[],u=new Map;function d(e){for(const t of u.keys())b(e.pattern,t)&&u.delete(t)}function h(e){return c.includes(e)||(d(e),c.unshift(e)),{remove(){const t=c.indexOf(e);t>-1&&(c.splice(t,1),d(e))}}}async function p(e){const t=Object(i.b)();u.has(e)||u.set(e,async function(e,t){const r=[];for(const n of c)if(b(n.pattern,e))try{return await n.fetchMessageBundle(e,t)}catch(s){r.push(s)}if(r.length)throw new n.a("intl:message-bundle-error",`Errors occurred while loading "${e}"`,{errors:r});throw new n.a("intl:no-message-bundle-loader",`No loader found for message bundle "${e}"`)}(e,t));const r=u.get(e);return await m.add(r),r}function f(e){if(!s.test(e))return null;const[,t,r]=s.exec(e),n=t+(r?"-"+r.toUpperCase():"");return l(n)?n:l(t)?t:null}function b(e,t){return"string"==typeof e?t.startsWith(e):e.test(t)}Object(i.a)((()=>{u.clear()}));const m=new class{constructor(){this._numLoading=0}async waitForAll(){this._dfd&&await this._dfd.promise}add(e){return this._increase(),e.then((()=>this._decrease()),(()=>this._decrease())),this.waitForAll()}_increase(){this._numLoading++,this._dfd||(this._dfd=Object(o.f)())}_decrease(){this._numLoading=Math.max(this._numLoading-1,0),this._dfd&&0===this._numLoading&&(this._dfd.resolve(),this._dfd=null)}}},170:function(e,t,r){"use strict";var n,o=r(171);!function(e){const t=(e,t,r,n)=>{let o=t,i=t;const s=r>>>1,a=e[o-1];for(;i<=s;){i=o<<1,i<r&&n(e[i-1],e[i])<0&&++i;const t=e[i-1];if(n(t,a)<=0)break;e[o-1]=t,o=i}e[o-1]=a},r=(e,t)=>e<t?-1:e>t?1:0;e.sort=function(e,n,o,i){void 0===n&&(n=0),void 0===o&&(o=e.length),void 0===i&&(i=r);for(let r=o>>>1;r>n;r--)t(e,r,o,i);const s=n+1;for(let r=o-1;r>n;r--){const o=e[n];e[n]=e[r],e[r]=o,t(e,s,r,i)}},e.iterableSort=function*(e,n,o,i){void 0===n&&(n=0),void 0===o&&(o=e.length),void 0===i&&(i=r);for(let r=o>>>1;r>n;r--)t(e,r,o,i),yield;const s=n+1;for(let r=o-1;r>n;r--){const o=e[n];e[n]=e[r],e[r]=o,t(e,s,r,i),yield}}}(n||(n={}));var i=n;function s(e){e.data.length>1.5*e.length&&(e.data.length=Math.floor(1.1*e.length))}t.a=class{constructor(e){this.data=[],this._length=0,this._allocator=void 0,this._deallocator=()=>null,this._shrink=()=>{},this._hint=new o.a,e&&(e.initialSize&&(this.data=new Array(e.initialSize)),e.allocator&&(this._allocator=e.allocator),void 0!==e.deallocator&&(this._deallocator=e.deallocator),e.shrink&&(this._shrink=()=>s(this)))}toArray(){return this.data.slice(0,this.length)}getItemAt(e){if(!(e<0||e>=this._length))return this.data[e]}get length(){return this._length}set length(e){if(e>this._length){if(this._allocator){for(;this._length<e;)this.data[this._length++]=this._allocator(this.data[this._length]);return}this._length=e}else{if(this._deallocator)for(let t=e;t<this._length;++t)this.data[t]=this._deallocator(this.data[t]);this._length=e,this._shrink()}}clear(){this.length=0}prune(){this.clear(),this.data=[]}push(e){this.data[this._length++]=e}pushArray(e,t=e.length){for(let r=0;r<t;r++)this.data[this._length++]=e[r]}fill(e,t){for(let r=0;r<t;r++)this.data[this._length++]=e}pushNew(){this._allocator&&(this.data[this.length]=this._allocator(this.data[this.length]));const e=this.data[this._length];return++this._length,e}unshift(e){this.data.unshift(e),this._length++,s(this)}pop(){if(0===this.length)return;const e=this.data[this.length-1];return this.length=this.length-1,this._shrink(),e}remove(e){const t=Object(o.e)(this.data,e,this.length,this._hint);if(-1!==t)return this.data.splice(t,1),this.length=this.length-1,e}removeUnordered(e){const t=Object(o.j)(this.data,e,this.length,this._hint);return void 0!==t&&(this.length=this.length-1),this._shrink(),t}removeUnorderedIndex(e){if(!(e>=this.length||e<0))return this.swapElements(e,this.length-1),this.pop()}removeUnorderedMany(e,t=e.length,r){this.length=Object(o.k)(this.data,e,this.length,t,this._hint,r),this._shrink()}front(){if(0!==this.length)return this.data[0]}back(){if(0!==this.length)return this.data[this.length-1]}swapElements(e,t){e>=this.length||t>=this.length||e===t||([this.data[e],this.data[t]]=[this.data[t],this.data[e]])}sort(e){i.sort(this.data,0,this.length,e)}iterableSort(e){return i.iterableSort(this.data,0,this.length,e)}some(e,t){for(let r=0;r<this.length;++r)if(e.call(t,this.data[r],r,this.data))return!0;return!1}filterInPlace(e,t){let r=0;for(let n=0;n<this._length;++n){const o=this.data[n];e.call(t,o,n,this.data)&&(this.data[n]=this.data[r],this.data[r]=o,r++)}if(this._deallocator)for(let n=r;n<this._length;n++)this.data[n]=this._deallocator(this.data[n]);return this._length=r,this._shrink(),this}forAll(e,t){const r=this.length,n=this.data;for(let o=0;o<r;++o)e.call(t,n[o],o,n)}map(e,t){const r=new Array(this.length);for(let n=0;n<this.length;++n)r[n]=e.call(t,this.data[n],n,this.data);return r}reduce(e,t){let r=t;for(let n=0;n<this.length;++n)r=e(r,this.data[n],n,this.data);return r}has(e){const t=this.length,r=this.data;for(let n=0;n<t;++n)if(r[n]===e)return!0;return!1}}},171:function(e,t,r){"use strict";r.d(t,"a",(function(){return p})),r.d(t,"b",(function(){return u})),r.d(t,"c",(function(){return s})),r.d(t,"d",(function(){return h})),r.d(t,"e",(function(){return b})),r.d(t,"f",(function(){return a})),r.d(t,"g",(function(){return l})),r.d(t,"h",(function(){return d})),r.d(t,"i",(function(){return v})),r.d(t,"j",(function(){return m})),r.d(t,"k",(function(){return y})),r.d(t,"l",(function(){return i}));var n=r(82),o=r(422);function i(e,t){return t?e.filter(((e,r,n)=>n.findIndex(t.bind(null,e))===r)):e.filter(((e,t,r)=>r.indexOf(e)===t))}function s(e,t,r){if(Object(n.j)(e)&&Object(n.j)(t))return!0;if(Object(n.j)(e)||Object(n.j)(t)||e.length!==t.length)return!1;if(r){for(let n=0;n<e.length;n++)if(!r(e[n],t[n]))return!1}else for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}function a(e,t,r){return e&&t?r?e.filter((function(e){return t.findIndex((function(t){return r(e,t)}))>-1})):e.filter((function(e){return t.indexOf(e)>-1})):[]}function l(e){return e&&"number"==typeof e.length}const c=!!Array.prototype.fill;function u(e,t){if(c)return new Array(e).fill(t);const r=new Array(e);for(let n=0;n<e;n++)r[n]=t;return r}function d(e,t){void 0===t&&(t=e,e=0);const r=new Array(t-e);for(let n=e;n<t;n++)r[n-e]=n;return r}function h(e){return e.reduce(((e,t)=>e.concat(t||[])),[])}class p{constructor(){this.last=0}}const f=new p;function b(e,t,r,n){n=n||f;const o=Math.max(0,n.last-10);for(let s=o;s<r;++s)if(e[s]===t)return n.last=s,s;const i=Math.min(o,r);for(let s=0;s<i;++s)if(e[s]===t)return n.last=s,s;return-1}function m(e,t,r,n){const o=null==r?e.length:r,i=b(e,t,o,n);if(-1!==i)return e[i]=e[o-1],null==r&&e.pop(),t}const g=new Set;function y(e,t,r=e.length,n=t.length,o,i){if(0===n||0===r)return r;g.clear();for(let a=0;a<n;++a)g.add(t[a]);o=o||f;const s=Math.max(0,o.last-10);for(let a=s;a<r;++a)if(g.has(e[a])&&(i&&i.push(e[a]),g.delete(e[a]),e[a]=e[r-1],--r,--a,0===g.size||0===r))return g.clear(),r;for(let a=0;a<s;++a)if(g.has(e[a])&&(i&&i.push(e[a]),g.delete(e[a]),e[a]=e[r-1],--r,--a,0===g.size||0===r))return g.clear(),r;return g.clear(),r}new o.a;function v(e,t){const r=e.indexOf(t);return-1!==r?(e.splice(r,1),t):null}},176:function(e,t,r){"use strict";function n(e){return e&&("function"==typeof e.on||"function"==typeof e.addEventListener)}function o(e,t,r){if(!n(e))throw new TypeError("target is not a Evented or EventTarget object");if("on"in e)return e.on(t,r);if(Array.isArray(t)){const n=t.slice();for(const t of n)e.addEventListener(t,r);return{remove(){for(const t of n)e.removeEventListener(t,r)}}}return e.addEventListener(t,r),{remove(){e.removeEventListener(t,r)}}}function i(e,t,r){if(!n(e))throw new TypeError("target is not a Evented or EventTarget object");if("once"in e)return e.once(t,r);const i=o(e,t,(t=>{i.remove(),r.call(e,t)}));return{remove(){i.remove()}}}function s(e,t,r){let n=!1;const i=o(e,t,(t=>{n||r.call(e,t)}));return{resume(){n=!1},pause(){n=!0},remove(){i.remove()}}}r.d(t,"a",(function(){return l})),r.d(t,"b",(function(){return n})),r.d(t,"c",(function(){return o})),r.d(t,"d",(function(){return i})),r.d(t,"e",(function(){return s}));const a={Win:"Meta",Scroll:"ScrollLock",Spacebar:" ",Down:"ArrowDown",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Del:"Delete",Apps:"ContextMenu",Esc:"Escape",Multiply:"*",Add:"+",Subtract:"-",Decimal:".",Divide:"/"};function l({key:e}){return a[e]||e}},178:function(e,t,r){"use strict";r.d(t,"a",(function(){return o}));var n=r(87);const o=Object(n.b)()({esriTimeUnitsMilliseconds:"milliseconds",esriTimeUnitsSeconds:"seconds",esriTimeUnitsMinutes:"minutes",esriTimeUnitsHours:"hours",esriTimeUnitsDays:"days",esriTimeUnitsWeeks:"weeks",esriTimeUnitsMonths:"months",esriTimeUnitsYears:"years",esriTimeUnitsDecades:"decades",esriTimeUnitsCenturies:"centuries",esriTimeUnitsUnknown:void 0})},179:function(e,t,r){"use strict";r.d(t,"a",(function(){return a})),r.d(t,"b",(function(){return o})),r.d(t,"c",(function(){return i})),r.d(t,"d",(function(){return s}));var n=r(82);function o(e){return i((()=>e.forEach((e=>Object(n.k)(e)&&e.remove()))))}function i(e){return{remove:()=>{e&&(e(),e=void 0)}}}function s(e){return i((()=>{const t=e();Object(n.k)(t)&&t.remove()}))}function a(e){return i(Object(n.k)(e)?()=>e.destroy():void 0)}},181:function(e,t,r){"use strict";class n{constructor(e,t,r,n=1,o=0){if(this.ctor=e,this.acquireFunction=t,this.releaseFunction=r,this.allocationSize=n,this._pool=new Array(o),this._initialSize=o,this.ctor)for(let i=0;i<o;i++)this._pool[i]=new this.ctor;this.allocationSize=Math.max(n,1)}destroy(){this.prune(0)}acquire(...e){let t;if(n.test.disabled)t=new this.ctor;else{if(0===this._pool.length){const e=this.allocationSize;for(let t=0;t<e;t++)this._pool[t]=new this.ctor}t=this._pool.pop()}return this.acquireFunction?this.acquireFunction(t,...e):function(e){return e&&e.acquire&&"function"==typeof e.acquire}(t)&&t.acquire(...e),t}release(e){e&&!n.test.disabled&&(this.releaseFunction?this.releaseFunction(e):function(e){return e&&e.release&&"function"==typeof e.release}(e)&&e.release(),this._pool.push(e))}prune(e=this._initialSize){if(!(e>=this._pool.length)){for(let t=e;t<this._pool.length;++t){const e=this._pool[t];this._dispose(e)}this._pool.length=e}}_dispose(e){e.dispose&&"function"==typeof e.dispose&&e.dispose()}}n.test={disabled:!1},t.a=n},182:function(e,t,r){"use strict";r.d(t,"a",(function(){return c})),r.d(t,"b",(function(){return u}));var n=r(77),o=r(116),i=r(164),s=r(222),a=r(351);const l=n.a.getLogger("esri.core.accessorSupport.extensions.serializableProperty.reader");function c(e,t,r){var n,i;e&&(!r&&!t.read||null!=(n=t.read)&&n.reader||!1===(null==(i=t.read)?void 0:i.enabled)||function(e){return"types"in e?m(e.types):b(e.type)}(e)&&Object(o.c)("read.reader",u(e),t))}function u(e){var t;const r=null!=(t=e.ndimArray)?t:0;if(r>1)return function(e){var t;const r=d(e),n=h.bind(null,r),o=null!=(t=e.ndimArray)?t:0;return(e,t,r)=>{if(null==e)return e;e=n(e,r,o);let i=o,s=e;for(;i>0&&Array.isArray(s);)i--,s=s[0];if(void 0!==s)for(let n=0;n<i;n++)e=[e];return e}}(e);if(1===r)return p(e);if("type"in e&&f(e.type)){var n,o;const t=null==(n=e.type.prototype)||null==(o=n.itemType)?void 0:o.Type,r=p("function"==typeof t?{type:t}:{types:t});return(t,n,o)=>{const i=r(t,n,o);return i?new e.type(i):i}}return d(e)}function d(e){return"type"in e?function(e){return e.prototype.read?(t,r,n)=>{if(null==t)return t;const o=typeof t;if("object"!==o)return void l.error(`Expected JSON value of type 'object' to deserialize type '${e.prototype.declaredClass}', but got '${o}'`);const i=new e;return i.read(t,n),i}:e.fromJSON}(e.type):function(e){var t;let r=null;const n=null!=(t=e.errorContext)?t:"type";return(t,o,a)=>{if(null==t)return t;const c=typeof t;if("object"!==c)return void l.error(`Expected JSON value of type 'object' to deserialize, but got '${c}'`);r||(r=function(e){const t={};for(const o in e.typeMap){var r,n;const i=e.typeMap[o],a=Object(s.a)(i.prototype);if("function"==typeof e.key)continue;const l=a.properties[e.key];if(!l)continue;null!=(r=l.json)&&r.type&&Array.isArray(l.json.type)&&1===l.json.type.length&&"string"==typeof l.json.type[0]&&(t[l.json.type[0]]=i);const c=null==(n=l.json)?void 0:n.write;if(!c||!c.writer){t[o]=i;continue}const u=c.target,d="string"==typeof u?u:e.key,h={};c.writer(o,h,d),h[d]&&(t[h[d]]=i)}return t}(e));const u=e.key;if("string"!=typeof u)return;const d=t[u],h=d?r[d]:e.defaultKeyValue?e.typeMap[e.defaultKeyValue]:void 0;if(!h){const e=`Type '${d||"unknown"}' is not supported`;return a&&a.messages&&t&&a.messages.push(new i.a(`${n}:unsupported`,e,{definition:t,context:a})),void l.error(e)}const p=new h;return p.read(t,a),p}}(e.types)}function h(e,t,r,n){return 0!==n&&Array.isArray(t)?t.map((t=>h(e,t,r,n-1))):e(t,void 0,r)}function p(e){const t=d(e);return(e,r,n)=>{if(null==e)return e;if(Array.isArray(e)){const r=[];for(const o of e){const e=t(o,void 0,n);void 0!==e&&r.push(e)}return r}const o=t(e,void 0,n);return void 0!==o?[o]:void 0}}function f(e){if(!Object(a.a)(e))return!1;const t=e.prototype.itemType;return!(!t||!t.Type)&&("function"==typeof t.Type?b(t.Type):m(t.Type))}function b(e){return!Array.isArray(e)&&!!e&&e.prototype&&("read"in e.prototype||"fromJSON"in e||f(e))}function m(e){for(const t in e.typeMap)if(!b(e.typeMap[t]))return!1;return!0}},183:function(e,t,r){"use strict";r.d(t,"a",(function(){return n})),r.d(t,"b",(function(){return o}));r(76);function n(e){}function o(e){return()=>e}},186:function(e,t,r){"use strict";r.d(t,"a",(function(){return l})),r.d(t,"b",(function(){return a})),r.d(t,"c",(function(){return s}));var n=r(129);function o(e,t){const r="?"===e[e.length-1]?e.slice(0,-1):e;if(null!=t.getItemAt||Array.isArray(t)){const e=parseInt(r,10);if(!isNaN(e))return Array.isArray(t)?t[e]:t.getItemAt(e)}const o=Object(n.a)(t);return Object(n.b)(o,r)?o.get(r):t[r]}function i(e,t,r){if(null==e)return e;const n=o(t[r],e);return!n&&r<t.length-1?void 0:r===t.length-1?n:i(n,t,r+1)}function s(e,t,r=0){return"string"==typeof t&&-1===t.indexOf(".")?o(t,e):i(e,Object(n.f)(t),r)}function a(e,t){return s(e,t)}function l(e,t){return void 0!==s(t,e)}},189:function(e,t,r){"use strict";r.d(t,"a",(function(){return n})),r.d(t,"b",(function(){return o}));const n="20210707",o="17f9314e751fd1e720022ff5819d4e40def1f79a"},194:function(e,t,r){"use strict";r.d(t,"a",(function(){return l})),r.d(t,"b",(function(){return c}));var n=r(82),o=r(119);const i={ar:"ar-u-nu-latn"};let s=new WeakMap,a={};function l(e={}){const t={};return null!=e.digitSeparator&&(t.useGrouping=e.digitSeparator),null!=e.places&&(t.minimumFractionDigits=t.maximumFractionDigits=e.places),t}function c(e,t){return function(e){const t=e||a;if(!s.has(t)){const r=Object(o.b)(),n=i[Object(o.b)()]||r;s.set(t,new Intl.NumberFormat(n,e))}return Object(n.d)(s.get(t))}(t).format(e)}Object(o.a)((()=>{s=new WeakMap,a={}}))},209:function(e,t,r){"use strict";r.d(t,"a",(function(){return g})),r.d(t,"b",(function(){return y})),r.d(t,"c",(function(){return m}));var n=r(87),o=r(119);const i={year:"numeric",month:"numeric",day:"numeric"},s={year:"numeric",month:"long",day:"numeric"},a={year:"numeric",month:"short",day:"numeric"},l={year:"numeric",month:"long",weekday:"long",day:"numeric"},c={hour:"numeric",minute:"numeric"},u={...c,second:"numeric"},d={"short-date":i,"short-date-short-time":{...i,...c},"short-date-short-time-24":{...i,...c,hour12:!1},"short-date-long-time":{...i,...u},"short-date-long-time-24":{...i,...u,hour12:!1},"short-date-le":i,"short-date-le-short-time":{...i,...c},"short-date-le-short-time-24":{...i,...c,hour12:!1},"short-date-le-long-time":{...i,...u},"short-date-le-long-time-24":{...i,...u,hour12:!1},"long-month-day-year":s,"long-month-day-year-short-time":{...s,...c},"long-month-day-year-short-time-24":{...s,...c,hour12:!1},"long-month-day-year-long-time":{...s,...u},"long-month-day-year-long-time-24":{...s,...u,hour12:!1},"day-short-month-year":a,"day-short-month-year-short-time":{...a,...c},"day-short-month-year-short-time-24":{...a,...c,hour12:!1},"day-short-month-year-long-time":{...a,...u},"day-short-month-year-long-time-24":{...a,...u,hour12:!1},"long-date":l,"long-date-short-time":{...l,...c},"long-date-short-time-24":{...l,...c,hour12:!1},"long-date-long-time":{...l,...u},"long-date-long-time-24":{...l,...u,hour12:!1},"long-month-year":{month:"long",year:"numeric"},"short-month-year":{month:"short",year:"numeric"},year:{year:"numeric"},"short-time":c,"long-time":u},h=Object(n.b)()({shortDate:"short-date",shortDateShortTime:"short-date-short-time",shortDateShortTime24:"short-date-short-time-24",shortDateLongTime:"short-date-long-time",shortDateLongTime24:"short-date-long-time-24",shortDateLE:"short-date-le",shortDateLEShortTime:"short-date-le-short-time",shortDateLEShortTime24:"short-date-le-short-time-24",shortDateLELongTime:"short-date-le-long-time",shortDateLELongTime24:"short-date-le-long-time-24",longMonthDayYear:"long-month-day-year",longMonthDayYearShortTime:"long-month-day-year-short-time",longMonthDayYearShortTime24:"long-month-day-year-short-time-24",longMonthDayYearLongTime:"long-month-day-year-long-time",longMonthDayYearLongTime24:"long-month-day-year-long-time-24",dayShortMonthYear:"day-short-month-year",dayShortMonthYearShortTime:"day-short-month-year-short-time",dayShortMonthYearShortTime24:"day-short-month-year-short-time-24",dayShortMonthYearLongTime:"day-short-month-year-long-time",dayShortMonthYearLongTime24:"day-short-month-year-long-time-24",longDate:"long-date",longDateShortTime:"long-date-short-time",longDateShortTime24:"long-date-short-time-24",longDateLongTime:"long-date-long-time",longDateLongTime24:"long-date-long-time-24",longMonthYear:"long-month-year",shortMonthYear:"short-month-year",year:"year"}),p=(h.apiValues,h.toJSON.bind(h),h.fromJSON.bind(h),{ar:"ar-u-nu-latn-ca-gregory"});let f=new WeakMap,b=d["short-date-short-time"];function m(e){const t=e||b;if(!f.has(t)){const e=Object(o.b)(),r=p[Object(o.b)()]||e;f.set(t,new Intl.DateTimeFormat(r,t))}return f.get(t)}function g(e){return d[e]||null}function y(e,t){return m(t).format(e)}Object(o.a)((()=>{f=new WeakMap,b=d["short-date-short-time"]}))},213:function(e,t){var r;r=function(){return this}();try{r=r||new Function("return this")()}catch(n){"object"===typeof window&&(r=window)}e.exports=r},214:function(e,t,r){"use strict";r.d(t,"a",(function(){return b})),r.d(t,"b",(function(){return d})),r.d(t,"c",(function(){return l})),r.d(t,"d",(function(){return g}));r(76);var n=r(77),o=r(129);let i,s=[];const a=n.a.getLogger("esri.core.Accessor");function l(e){void 0!==i&&i.onObservableAccessed(e)}let c=!1,u=!1;function d(e,t,r){if(c)return h(e,t,r);p(e);const n=t.call(r);return f(),n}function h(e,t,r){const n=c;c=!0,p(e);let o=null;try{o=t.call(r)}catch(i){u&&a.error(i)}return f(),c=n,o}function p(e){i=e,s.push(e)}function f(){const e=s.pop();i=s.length>0?s[s.length-1]:void 0,void 0!==e&&e.onTrackingEnd()}function b(e,t){if(32&t.flags)return;const r=u;u=!1,64&t.flags?h(t,t.metadata.get,e):g(e,t),u=r}const m=[];function g(e,t){128&t.flags||(t.flags|=128,h(t,(()=>{const r=t.metadata.dependsOn||m;for(const t of r)if("string"==typeof t&&-1===t.indexOf("."))y(e,t,!1);else{const r=Object(o.f)(t);for(let t=0,n=e;t<r.length&&null!=n&&"object"==typeof n;++t)n=y(n,r[t],t!==r.length-1)}})),t.flags&=-129)}function y(e,t,r){const n="?"===t[t.length-1]?t.slice(0,-1):t;if(null!=e.getItemAt||Array.isArray(e)){const t=parseInt(n,10);if(!isNaN(t))return Array.isArray(e)?e[t]:e.getItemAt(t)}const i=Object(o.a)(e),s=null==i?void 0:i.properties.get(n);return s&&(l(s),b(e,s)),r?e[n]:void 0}},215:function(e,t,r){"use strict";r.d(t,"a",(function(){return O})),r.d(t,"b",(function(){return v})),r.d(t,"c",(function(){return x}));var n=r(82),o=r(336),i=r(374),s=r(170),a=r(86),l=r(380);class c{constructor(e){this.phases=e,this.paused=!1,this.ticks=-1,this.removed=!1}}class u{constructor(e){this.callback=e,this.isActive=!0}remove(){this.isActive=!1}}let d=0,h=0;const p={time:Object(l.a)(0),deltaTime:Object(l.a)(0),elapsedFrameTime:Object(l.a)(0),frameDuration:Object(l.a)(0)},f=["prepare","preRender","render","postRender","update"],b=[],m=new s.a;class g{constructor(e){this._task=e}remove(){this._task.removed=!0}pause(){this._task.paused=!0}resume(){this._task.paused=!1}}const y={frameTasks:m,willDispatch:!1,clearFrameTasks:function(e=!1){m.forAll((e=>{e.removed=!0})),e&&k()},dispatch:S,executeFrameTasks:function(e){const t=Object(l.a)(e-d);d=e;const r=h>0?h:1e3/60,n=Math.max(0,t-r);for(let o=0;o<f.length;o++){const i=performance.now(),s=f[o];m.forAll((i=>{var a;i.paused||i.removed||(0===o&&i.ticks++,i.phases[s]&&(p.time=e,p.deltaTime=0===i.ticks?Object(l.a)(0):t,p.elapsedFrameTime=Object(l.a)(performance.now()-e),p.frameDuration=Object(l.a)(r-n),null==(a=i.phases[s])||a.call(i,p)))})),E[o].record(performance.now()-i)}k(),A.record(performance.now()-e)}};function v(e){const t=new u(e);return b.push(t),y.willDispatch||(y.willDispatch=!0,Object(o.a)(S)),t}function O(e){const t=new c(e);return m.push(t),null==j&&(d=performance.now(),j=requestAnimationFrame(w)),new g(t)}let j=null;function w(){const e=performance.now();j=null,j=m.length>0?requestAnimationFrame(w):null,y.executeFrameTasks(e)}const _=new s.a;function k(){m.forAll((e=>{e.removed&&_.push(e)})),m.removeUnorderedMany(_.data,_.length),_.clear()}function S(){for(;b.length;){const e=Object(n.d)(b.shift());e.isActive&&e.callback()}y.willDispatch=!1}function x(e=1,t){const r=Object(a.g)(),n=()=>{Object(a.n)(t)?r.reject(Object(a.e)()):0===e?r():(--e,Object(o.a)((()=>n())))};return n(),r.promise}const E=f.map((e=>new i.a(e))),A=new i.a("total")},222:function(e,t,r){"use strict";r.d(t,"a",(function(){return a})),r.d(t,"b",(function(){return c})),r.d(t,"c",(function(){return u}));var n=r(85),o=r(82),i=r(129);class s{constructor(e){this.autoDestroy=!1,this.properties=e}}function a(e){let t=e.constructor.__accessorMetadata__;const r=Object.prototype.hasOwnProperty.call(e.constructor,"__accessorMetadata__");if(t){if(!r){const r=Object.create(t.properties),o=t.autoDestroy;for(const e in r)r[e]=Object(n.a)(r[e]);t=new s(r),t.autoDestroy=o,Object.defineProperty(e.constructor,"__accessorMetadata__",{value:t,enumerable:!1,configurable:!0,writable:!0})}}else t=new s({}),Object.defineProperty(e.constructor,"__accessorMetadata__",{value:t,enumerable:!1,configurable:!0,writable:!0});return Object(o.d)(e.constructor.__accessorMetadata__)}function l(e){return a(e).properties}function c(e,t){const r=l(e);let n=r[t];return n||(n=r[t]={}),n}function u(e,t){return Object(i.c)(e,t,h)}const d=/^(?:[^.]+\.)?(?:value|type|(?:json\.type|json\.origins\.[^.]\.type))$/;function h(e){return d.test(e)?"replace":"merge"}},223:function(e,t,r){"use strict";var n,o=r(78),i=r(83),s=r(177),a=r(80),l=(r(76),r(81),r(77),r(79)),c=r(178);let u=n=class extends i.a{constructor(e){super(e),this.value=0,this.unit="milliseconds"}toMilliseconds(){return Object(s.a)(this.value,this.unit,"milliseconds")}clone(){return new n({value:this.value,unit:this.unit})}};Object(o.a)([Object(a.b)({type:Number,json:{write:!0},nonNullable:!0})],u.prototype,"value",void 0),Object(o.a)([Object(a.b)({type:c.a.apiValues,json:{type:c.a.jsonValues,read:c.a.read,write:c.a.write},nonNullable:!0})],u.prototype,"unit",void 0),u=n=Object(o.a)([Object(l.a)("esri.TimeInterval")],u);var d=u;t.a=d},226:function(e,t,r){"use strict";var n=r(78),o=r(142),i=(r(94),r(97)),s=r(84),a=r(121),l=r(165),c=r(154),u=r(77),d=r(86),h=r(93),p=r(80),f=(r(76),r(81),r(79)),b=r(95),m=r(91);let g=0;const y=u.a.getLogger("esri.layers.Layer");let v=class extends(a.a.EventedMixin(Object(l.a)(c.a))){constructor(){super(...arguments),this.attributionDataUrl=null,this.fullExtent=new b.a(-180,-90,180,90,m.a.WGS84),this.id=Date.now().toString(16)+"-layer-"+g++,this.legendEnabled=!0,this.listMode="show",this.opacity=1,this.parent=null,this.popupEnabled=!0,this.attributionVisible=!0,this.spatialReference=m.a.WGS84,this.title=null,this.type=null,this.url=null,this.visible=!0}static async fromArcGISServerUrl(e){const t="string"==typeof e?{url:e}:e,n=await r.e(167).then(r.bind(null,675));try{return await n.fromUrl(t)}catch(o){throw y.error("#fromArcGISServerUrl({ url: '"+t.url+"'})","Failed to create layer from arcgis server url",o),o}}static async fromPortalItem(e){const t="portalItem"in e?e:{portalItem:e},n=await r.e(134).then(r.bind(null,618));try{return await n.fromItem(t)}catch(i){const e=t&&t.portalItem,r=e&&e.id||"unset",n=e&&e.portal&&e.portal.url||o.a.portalUrl;throw y.error("#fromPortalItem()","Failed to create layer from portal item (portal: '"+n+"', id: '"+r+"')",i),i}}initialize(){this.when().catch((e=>{var t,r;Object(d.m)(e)||u.a.getLogger(this.declaredClass).error("#load()",`Failed to load layer (title: '${null!=(t=this.title)?t:"no title"}', id: '${null!=(r=this.id)?r:"no id"}')`,{error:e})}))}destroy(){if(this.parent){const e=this,t=this.parent;"layers"in t&&t.layers.includes(e)?t.layers.remove(e):"tables"in t&&t.tables.includes(e)?t.tables.remove(e):"baseLayers"in t&&t.baseLayers.includes(e)?t.baseLayers.remove(e):"baseLayers"in t&&t.referenceLayers.includes(e)&&t.referenceLayers.remove(e)}}get hasAttributionData(){return null!=this.attributionDataUrl}get parsedUrl(){const e=this.url;return e?Object(h.K)(e):null}async fetchAttributionData(){const e=this.attributionDataUrl;if(this.hasAttributionData&&e)return(await Object(i.default)(e,{query:{f:"json"},responseType:"json"})).data;throw new s.a("layer:no-attribution-data","Layer does not have attribution data")}};Object(n.a)([Object(p.b)({type:String})],v.prototype,"attributionDataUrl",void 0),Object(n.a)([Object(p.b)({type:b.a})],v.prototype,"fullExtent",void 0),Object(n.a)([Object(p.b)({readOnly:!0})],v.prototype,"hasAttributionData",null),Object(n.a)([Object(p.b)({type:String})],v.prototype,"id",void 0),Object(n.a)([Object(p.b)({type:Boolean,nonNullable:!0})],v.prototype,"legendEnabled",void 0),Object(n.a)([Object(p.b)({type:["show","hide","hide-children"]})],v.prototype,"listMode",void 0),Object(n.a)([Object(p.b)({type:Number,range:{min:0,max:1},nonNullable:!0})],v.prototype,"opacity",void 0),Object(n.a)([Object(p.b)()],v.prototype,"parent",void 0),Object(n.a)([Object(p.b)({readOnly:!0})],v.prototype,"parsedUrl",null),Object(n.a)([Object(p.b)({type:Boolean})],v.prototype,"popupEnabled",void 0),Object(n.a)([Object(p.b)({type:Boolean})],v.prototype,"attributionVisible",void 0),Object(n.a)([Object(p.b)({type:m.a})],v.prototype,"spatialReference",void 0),Object(n.a)([Object(p.b)({type:String})],v.prototype,"title",void 0),Object(n.a)([Object(p.b)({type:String,readOnly:!0,json:{read:!1}})],v.prototype,"type",void 0),Object(n.a)([Object(p.b)()],v.prototype,"url",void 0),Object(n.a)([Object(p.b)({type:Boolean,nonNullable:!0})],v.prototype,"visible",void 0),v=Object(n.a)([Object(f.a)("esri.layers.Layer")],v);var O=v;t.a=O},230:function(e,t,r){"use strict";r.d(t,"a",(function(){return o})),r.d(t,"b",(function(){return s})),r.d(t,"c",(function(){return a})),r.d(t,"d",(function(){return i}));var n=r(82);const o=7;function i(e){switch(e){case"defaults":return 0;case"service":return 2;case"portal-item":return 3;case"web-scene":return 4;case"web-map":return 5;case"user":return 6}}function s(e){switch(e){case 0:return"defaults";case 2:return"service";case 3:return"portal-item";case 4:return"web-scene";case 5:return"web-map";case 6:return"user"}return Object(n.d)(void 0)}function a(e){return s(e)}},232:function(e,t,r){"use strict";r.d(t,"a",(function(){return u})),r.d(t,"b",(function(){return c}));var n=r(78),o=r(90),i=r(82),s=r(86),a=r(79);class l{constructor(e){this.instance=e,this._resolver=Object(s.f)(),this._status=0,this._resolvingPromises=[],this._resolver.promise.then((()=>{this._status=1,this._cleanUp()}),(()=>{this._status=2,this._cleanUp()}))}addResolvingPromise(e){this._resolvingPromises.push(e),this._tryResolve()}isResolved(){return 1===this._status}isRejected(){return 2===this._status}isFulfilled(){return 0!==this._status}abort(){this._resolver.reject(Object(s.e)())}when(e,t){return this._resolver.promise.then(e,t)}_cleanUp(){this._allPromise=this._resolvingPromises=this._allPromise=null}_tryResolve(){if(this.isFulfilled())return;const e=Object(s.f)(),t=[...this._resolvingPromises,Object(i.d)(e.promise)],r=this._allPromise=Promise.all(t);r.then((()=>{this.isFulfilled()||this._allPromise!==r||this._resolver.resolve(this.instance)}),(e=>{this.isFulfilled()||this._allPromise!==r||Object(s.m)(e)||this._resolver.reject(e)})),e.resolve()}}const c=e=>{let t=class extends e{constructor(...e){super(...e),this._promiseProps=new l(this),this.addResolvingPromise(Promise.resolve())}isResolved(){return this._promiseProps.isResolved()}isRejected(){return this._promiseProps.isRejected()}isFulfilled(){return this._promiseProps.isFulfilled()}when(e,t){return new Promise(((e,t)=>{this._promiseProps.when(e,t)})).then(e,t)}catch(e){return this.when(null,e)}addResolvingPromise(e){e&&!this._promiseProps.isFulfilled()&&this._promiseProps.addResolvingPromise("_promiseProps"in e?e.when():e)}};return t=Object(n.a)([Object(a.a)("esri.core.Promise")],t),t};let u=class extends(c(o.a)){};u=Object(n.a)([Object(a.a)("esri.core.Promise")],u)},240:function(e,t,r){"use strict";r.d(t,"a",(function(){return n}));const n=new(r(87).a)({esriFieldTypeSmallInteger:"small-integer",esriFieldTypeInteger:"integer",esriFieldTypeSingle:"single",esriFieldTypeDouble:"double",esriFieldTypeLong:"long",esriFieldTypeString:"string",esriFieldTypeDate:"date",esriFieldTypeOID:"oid",esriFieldTypeGeometry:"geometry",esriFieldTypeBlob:"blob",esriFieldTypeRaster:"raster",esriFieldTypeGUID:"guid",esriFieldTypeGlobalID:"global-id",esriFieldTypeXML:"xml"})},248:function(e,t,r){"use strict";r.d(t,"a",(function(){return c}));var n=r(77),o=r(116),i=r(133),s=r(209),a=r(194);const l=n.a.getLogger("esri.intl");function c(e,t,r={}){const{format:n={}}=r;return Object(i.c)(e,(e=>function(e,t,r){let n,i;const s=e.indexOf(":");if(-1===s?n=e.trim():(n=e.slice(0,s).trim(),i=e.slice(s+1).trim()),!n)return"";const a=Object(o.b)(n,t);if(null==a)return"";const l=r[i]||r[n];return l?u(a,l):i?d(a,i):h(a)}(e,t,n)))}function u(e,t){switch(t.type){case"date":return Object(s.b)(e,t.intlOptions);case"number":return Object(a.b)(e,t.intlOptions);default:return l.warn("missing format descriptor for key {key}"),h(e)}}function d(e,t){switch(t.toLowerCase()){case"dateformat":return Object(s.b)(e);case"numberformat":return Object(a.b)(e);default:return l.warn(`inline format is unsupported since 4.12: ${t}`),/^(dateformat|datestring)/i.test(t)?Object(s.b)(e):/^numberformat/i.test(t)?Object(a.b)(e):h(e)}}function h(e){switch(typeof e){case"string":return e;case"number":return Object(a.b)(e);case"boolean":return""+e;default:return e instanceof Date?Object(s.b)(e):""}}},257:function(e,t,r){"use strict";r.d(t,"a",(function(){return u})),r.d(t,"b",(function(){return a})),r.d(t,"c",(function(){return c})),r.d(t,"d",(function(){return l}));var n=r(214),o=r(388);let i=!1;const s=[];function a(e,t,r={runImmediately:!1}){let s=new o.a((function r(){if(!s||l)return;if(i)return void d(r);const o=a;s.clear(),i=!0,l=!0,a=Object(n.b)(s,e),l=!1,i=!1,t(a,o),h()})),a=null,l=!1;return l=!0,a=Object(n.b)(s,e),l=!1,r.runImmediately&&t(a,a),{remove:function(){s&&(s.destroy(),s=null,a=null)}}}function l(e,t){return a(e,t,{runImmediately:!0})}function c(e,t){let r=new o.a((function(){t(i,s)})),i=null;function s(){return r?(r.clear(),i=Object(n.b)(r,e),i):null}return s(),{remove:function(){r&&(r.destroy(),r=null),i=null}}}function u(e){let t=new o.a((function o(){t&&!r&&(i?d(o):(t.clear(),i=!0,r=!0,Object(n.b)(t,e),r=!1,i=!1,h()))})),r=!1;return r=!0,Object(n.b)(t,e),r=!1,{remove:function(){t&&(t.destroy(),t=null)}}}function d(e){s.includes(e)||s.unshift(e)}function h(){for(;s.length;)s.pop()()}},261:function(e,t,r){"use strict";r.d(t,"a",(function(){return v})),r.d(t,"b",(function(){return O}));var n=r(78),o=r(90),i=r(82),s=r(85),a=r(230);class l{constructor(){this._propertyOriginMap=new Map,this._originStores=new Array(a.a),this._values=new Map}clone(e){const t=new l,r=this._originStores[0];r&&r.forEach(((e,r)=>{t.set(r,Object(s.a)(e),0)}));for(let n=2;n<a.a;n++){const r=this._originStores[n];r&&r.forEach(((r,o)=>{e&&e.has(o)||t.set(o,Object(s.a)(r),n)}))}return t}get(e,t){const r=void 0===t?this._values:this._originStores[t];return r?r.get(e):void 0}keys(e){const t=null==e?this._values:this._originStores[e];return t?[...t.keys()]:[]}set(e,t,r=6){let n=this._originStores[r];if(n||(n=new Map,this._originStores[r]=n),n.set(e,t),!this._values.has(e)||Object(i.d)(this._propertyOriginMap.get(e))<=r){const n=this._values.get(e);return this._values.set(e,t),this._propertyOriginMap.set(e,r),n!==t}return!1}delete(e,t=6){const r=this._originStores[t];if(!r)return;const n=r.get(e);if(r.delete(e),this._values.has(e)&&this._propertyOriginMap.get(e)===t){this._values.delete(e);for(let r=t-1;r>=0;r--){const t=this._originStores[r];if(t&&t.has(e)){this._values.set(e,t.get(e)),this._propertyOriginMap.set(e,r);break}}}return n}has(e,t){const r=void 0===t?this._values:this._originStores[t];return!!r&&r.has(e)}revert(e,t){for(;t>0&&!this.has(e,t);)--t;const r=this._originStores[t],n=r&&r.get(e),o=this._values.get(e);return this._values.set(e,n),this._propertyOriginMap.set(e,t),o!==n}originOf(e){return this._propertyOriginMap.get(e)||0}forEach(e){this._values.forEach(e)}}var c=l,u=r(332),d=r(129),h=r(79);const p=e=>{let t=class extends e{constructor(...e){super(...e);const t=Object(i.d)(Object(d.a)(this)),r=t.metadatas,n=t.store,o=new c;t.store=o,n.keys().forEach((e=>{o.set(e,n.get(e),0)})),Object.keys(r).forEach((e=>{t.internalGet(e)&&o.set(e,t.internalGet(e),0)}))}read(e,t){Object(u.a)(this,e,t)}getAtOrigin(e,t){const r=f(this),n=Object(a.d)(t);if("string"==typeof e)return r.get(e,n);const o={};return e.forEach((e=>{o[e]=r.get(e,n)})),o}originOf(e){return Object(a.b)(this.originIdOf(e))}originIdOf(e){return f(this).originOf(e)}revert(e,t){const r=f(this),n=Object(a.d)(t),o=Object(d.a)(this);let i;i="string"==typeof e?"*"===e?r.keys(n):[e]:e,i.forEach((e=>{o.invalidate(e),r.revert(e,n),o.commit(e)}))}};return t=Object(n.a)([Object(h.a)("esri.core.ReadOnlyMultiOriginJSONSupport")],t),t};function f(e){return Object(d.a)(e).store}let b=class extends(p(o.a)){};b=Object(n.a)([Object(h.a)("esri.core.ReadOnlyMultiOriginJSONSupport")],b);var m=r(337);const g=e=>{let t=class extends e{constructor(...e){super(...e)}clear(e,t="user"){return y(this).delete(e,Object(a.d)(t))}write(e={},t){return Object(m.b)(this,e=e||{},t),e}setAtOrigin(e,t,r){Object(d.a)(this).setAtOrigin(e,t,Object(a.d)(r))}removeOrigin(e){const t=y(this),r=Object(a.d)(e),n=t.keys(r);for(const o of n)t.originOf(o)===r&&t.set(o,t.get(o,r),6)}updateOrigin(e,t){const r=y(this),n=Object(a.d)(t),o=this.get(e);for(let i=n+1;i<a.a;++i)r.delete(e,i);r.set(e,o,n)}toJSON(e){return this.write({},e)}};return t=Object(n.a)([Object(h.a)("esri.core.WriteableMultiOriginJSONSupport")],t),t.prototype.toJSON.isDefaultToJSON=!0,t};function y(e){return Object(d.a)(e).store}const v=e=>{let t=class extends(g(p(e))){constructor(...e){super(...e)}};return t=Object(n.a)([Object(h.a)("esri.core.MultiOriginJSONSupport")],t),t};let O=class extends(v(o.a)){};O=Object(n.a)([Object(h.a)("esri.core.MultiOriginJSONSupport")],O)},267:function(e,t,r){"use strict";r.d(t,"a",(function(){return i})),r.d(t,"b",(function(){return d})),r.d(t,"c",(function(){return p})),r.d(t,"d",(function(){return a})),r.d(t,"e",(function(){return s})),r.d(t,"f",(function(){return l}));var n=r(82),o=r(93);function i(e,t){const r=t&&t.url&&t.url.path;if(e&&r&&(e=Object(o.A)(e,r,{preserveProtocolRelative:!0}),t.portalItem&&t.readResourcePaths)){const r=Object(o.C)(e,t.portalItem.itemUrl);u.test(r)&&t.readResourcePaths.push(t.portalItem.resourceFromPath(r).path)}return h(e,t&&t.portal)}function s(e,t,r=0){if(!e)return e;!Object(o.s)(e)&&t&&t.blockedRelativeUrls&&t.blockedRelativeUrls.push(e);let n=Object(o.A)(e);if(t){const r=t.verifyItemRelativeUrls&&t.verifyItemRelativeUrls.rootPath||t.url&&t.url.path;if(r){const i=h(r,t.portal);n=Object(o.C)(h(n,t.portal),i,i),n!==e&&t.verifyItemRelativeUrls&&t.verifyItemRelativeUrls.writtenUrls.push(n)}}return n=function(e,t){return t&&!t.isPortal&&t.urlKey&&t.customBaseUrl?Object(o.h)(e,`${t.urlKey}.${t.customBaseUrl}`,t.portalHostname):e}(n,t&&t.portal),Object(o.s)(n)&&(n=Object(o.D)(n)),null!=t&&t.resources&&null!=t&&t.portalItem&&!Object(o.s)(n)&&!Object(o.u)(n)&&0===r&&t.resources.toKeep.push({resource:t.portalItem.resourceFromPath(n)}),n}function a(e,t,r){return i(e,r)}function l(e,t,r,n){const o=s(e,n);void 0!==o&&(t[r]=o)}const c=/\/items\/([^\/]+)\/resources\//,u=/^\.\/resources\//;function d(e){const t=Object(n.k)(e)?e.match(c):null;return Object(n.k)(t)?t[1]:null}function h(e,t){if(!t||t.isPortal||!t.urlKey||!t.customBaseUrl)return e;const r=`${t.urlKey}.${t.customBaseUrl}`;return Object(o.q)(o.g,`${o.g.scheme}://${r}`)?Object(o.h)(e,t.portalHostname,r):Object(o.h)(e,r,t.portalHostname)}var p=Object.freeze({__proto__:null,fromJSON:i,toJSON:s,read:a,write:l,itemIdFromResourceUrl:d})},278:function(e,t,r){"use strict";var n=r(181);function o(e){e.length=0}class i{constructor(e=50,t=50){this._pool=new n.a(Array,void 0,o,t,e)}acquire(){return this._pool.acquire()}release(e){this._pool.release(e)}prune(){this._pool.prune(0)}static acquire(){return s.acquire()}static release(e){return s.release(e)}static prune(){s.prune()}}const s=new i(100);t.a=i},285:function(e,t,r){"use strict";r.d(t,"a",(function(){return c})),r.d(t,"b",(function(){return a})),r.d(t,"c",(function(){return s})),r.d(t,"d",(function(){return l}));var n=r(76);const o=new Set;function i(e,t,r=!1){r&&o.has(t)||(r&&o.add(t),e.warn(`\ud83d\uded1 DEPRECATED - ${t}`))}function s(e,t,r={}){Object(n.a)("esri-deprecation-warnings")&&c(e,`Module: ${t}`,r)}function a(e,t,r={}){if(Object(n.a)("esri-deprecation-warnings")){const{moduleName:n}=r;c(e,"Function: "+((n?n+"::":"")+t+"()"),r)}}function l(e,t,r={}){if(Object(n.a)("esri-deprecation-warnings")){const{moduleName:n}=r;c(e,"Property: "+((n?n+"::":"")+t),r)}}function c(e,t,r={}){if(Object(n.a)("esri-deprecation-warnings")){const{replacement:n,version:o,see:s,warnOnce:a}=r;let l=t;n&&(l+=`\n\t\ud83d\udee0\ufe0f Replacement: ${n}`),o&&(l+=`\n\t\u2699\ufe0f Version: ${o}`),s&&(l+=`\n\t\ud83d\udd17 See ${s} for more details.`),i(e,l,a)}}},288:function(e,t,r){"use strict";r.d(t,"a",(function(){return p}));var n=r(78),o=r(90),i=r(111),s=r(82),a=r(215),l=r(108),c=r(186),u=r(257),d=r(80),h=r(79);let p=class extends o.a{constructor(){super(...arguments),this.updating=!1,this.handleId=0,this.handles=new i.a,this.scheduleHandleId=0,this.pendingPromises=new Set}destroy(){this.removeAll(),this.handles.destroy()}add(e,t,r,n=0){const o=0!=(1&n),i=++this.handleId;o||this.installSyncUpdatingWatch(e,t,i);const s=0!=(2&n)?Object(l.a)(e,t,r,o):e.watch(t,r,o);return this.handles.add(s,i),{remove:()=>this.handles.remove(i)}}addOnCollectionPropertyChange(e,t,r,n=0){const o=0!=(2&n),i=++this.handleId;return this.handles.add([Object(l.b)(e,t,"after-changes",this.createSyncUpdatingCallback()),Object(l.b)(e,t,"change",r,o?e=>{r({added:e.items,removed:[],moved:[],target:e})}:void 0)],i),{remove:()=>{this.handles.remove(i)}}}addOnCollectionChange(e,t,r=0){const n=0!=(2&r),o=++this.handleId;return this.handles.add([e.on("after-changes",this.createSyncUpdatingCallback()),e.on("change",t)],o),n&&t({added:e.items,removed:[],moved:[],target:e}),{remove:()=>{this.handles.remove(o)}}}addPromise(e){if(Object(s.j)(e))return e;const t=++this.handleId;this.handles.add({remove:()=>{this.pendingPromises.delete(e)&&(0!==this.pendingPromises.size||this.handles.has(f)||this._set("updating",!1))}},t),this.pendingPromises.add(e),this._set("updating",!0);const r=()=>this.handles.remove(t);return e.then(r,r),e}removeAll(){this.pendingPromises.clear(),this.handles.removeAll(),this._set("updating",!1)}installSyncUpdatingWatch(e,t,r){const n=this.createSyncUpdatingCallback(),o=Object(u.b)((()=>Object(c.c)(e,t)),n);return this.handles.add(o,r),o}createSyncUpdatingCallback(){return()=>{this.handles.remove(f),++this.scheduleHandleId;const e=this.scheduleHandleId;this._get("updating")||this._set("updating",!0),this.handles.add(Object(a.b)((()=>{e===this.scheduleHandleId&&(this._set("updating",this.pendingPromises.size>0),this.handles.remove(f))})),f)}}};Object(n.a)([Object(d.b)({readOnly:!0})],p.prototype,"updating",void 0),p=Object(n.a)([Object(h.a)("esri.views.support.WatchUpdatingTracking")],p);const f=-42},307:function(e,t,r){"use strict";r.d(t,"a",(function(){return g})),r.d(t,"b",(function(){return o})),r.d(t,"c",(function(){return s})),r.d(t,"d",(function(){return f})),r.d(t,"e",(function(){return b})),r.d(t,"f",(function(){return u})),r.d(t,"g",(function(){return h})),r.d(t,"h",(function(){return a})),r.d(t,"i",(function(){return d})),r.d(t,"j",(function(){return p})),r.d(t,"k",(function(){return l})),r.d(t,"l",(function(){return c})),r.d(t,"m",(function(){return i})),r.d(t,"n",(function(){return m}));var n=r(82);function o(e,t){if(e.forEach)e.forEach(t);else for(let r=0;r<e.length;r++)t(e[r],r,e)}function i(e,t,r){if(e.slice)return e.slice(t,r);void 0===t?t=0:(t<0&&(t+=e.length),t=Math.min(e.length,Math.max(0,t))),void 0===r?r=e.length:(r<0&&(r+=e.length),r=Math.min(e.length,Math.max(0,r)));const n=Math.max(0,r-t),o=new(0,e.constructor)(n);for(let i=0;i<n;i++)o[i]=e[t+i];return o}function s(e){return e instanceof ArrayBuffer||e&&e.constructor&&"ArrayBuffer"===e.constructor.name}function a(e){return e instanceof Int8Array||e&&e.constructor&&"Int8Array"===e.constructor.name}function l(e){return e instanceof Uint8Array||e&&e.constructor&&"Uint8Array"===e.constructor.name}function c(e){return e instanceof Uint8ClampedArray||e&&e.constructor&&"Uint8ClampedArray"===e.constructor.name}function u(e){return e instanceof Int16Array||e&&e.constructor&&"Int16Array"===e.constructor.name}function d(e){return e instanceof Uint16Array||e&&e.constructor&&"Uint16Array"===e.constructor.name}function h(e){return e instanceof Int32Array||e&&e.constructor&&"Int32Array"===e.constructor.name}function p(e){return e instanceof Uint32Array||e&&e.constructor&&"Uint32Array"===e.constructor.name}function f(e){return e instanceof Float32Array||e&&e.constructor&&"Float32Array"===e.constructor.name}function b(e){return e instanceof Float64Array||e&&e.constructor&&"Float64Array"===e.constructor.name}function m(e){const t=new Array(e.length);for(let r=0;r<e.length;r++)t[r]=e[r];return t}function g(e){return Object(n.j)(e)?0:128+e.buffer.byteLength+64}},310:function(e,t,r){"use strict";r.d(t,"a",(function(){return p})),r.d(t,"b",(function(){return d})),r.d(t,"c",(function(){return c})),r.d(t,"d",(function(){return u}));var n=r(81);var o=r(182);function i(e){e.name&&(e.read&&"object"==typeof e.read?void 0===e.read.source&&(e.read.source=e.name):e.read={source:e.name},e.write&&"object"==typeof e.write?void 0===e.write.target&&(e.write.target=e.name):e.write={target:e.name})}function s(e){"boolean"==typeof e.read?e.read={enabled:e.read}:"function"==typeof e.read?e.read={enabled:!0,reader:e.read}:e.read&&"object"==typeof e.read&&void 0===e.read.enabled&&(e.read.enabled=!0)}function a(e){"boolean"==typeof e.write?e.write={enabled:e.write}:"function"==typeof e.write?e.write={enabled:!0,writer:e.write}:e.write&&"object"==typeof e.write&&void 0===e.write.enabled&&(e.write.enabled=!0)}var l=r(389);function c(e,t){return d(e,"read",t)}function u(e,t){return d(e,"write",t)}function d(e,t,r){let n=e&&e.json;if(e&&e.json&&e.json.origins&&r){const o=e.json.origins[r.origin];o&&("any"===t||t in o)&&(n=o)}return n}function h(e){const t=function(e){return e.type?function(e){if(!e.type)return;let t=0,r=e.type;for(;Array.isArray(r)&&!Object(n.o)(r);)r=r[0],t++;return{type:r,ndimArray:t}}(e):function(e){if(!e.types)return;let t=0,r=e.types;for(;Array.isArray(r);)r=r[0],t++;return{types:r,ndimArray:t}}(e)}(e);if(e.json.origins)for(const r in e.json.origins){const n=e.json.origins[r];Object(o.a)(t,n,!1),Object(l.a)(t,n)}Object(o.a)(t,e.json,!0),Object(l.a)(t,e.json)}const p={processPrototypePropertyMetadata(e,t){(function(e){if(e.json||(e.json={}),s(e.json),a(e.json),i(e.json),e.json.origins)for(const t in e.json.origins)s(e.json.origins[t]),a(e.json.origins[t]),i(e.json.origins[t]);return!0})(t)&&(function(e){if(e.json&&e.json.origins){const t=e.json.origins,r={"web-document":["web-scene","web-map"]};for(const e in r)if(t[e]){const n=t[e];r[e].forEach((e=>{t[e]=n})),delete t[e]}}}(t),h(t))}}},313:function(e,t,r){"use strict";function n(e){return t=>{t.hasOwnProperty("_delegatedEventNames")||(t._delegatedEventNames=t._delegatedEventNames?t._delegatedEventNames.slice():[]);const r=t._delegatedEventNames,n=Array.isArray(e)?e:function(e){return e.split(",").map((e=>e.trim()))}(e);r.push(...n)}}r.d(t,"a",(function(){return n}))},336:function(e,t,r){"use strict";var n=r(140);const o=n.a.queueMicrotask?n.a.queueMicrotask:e=>{n.a.Promise.resolve().then(e)},i=[];let s=[];function a(e){i.push(e),1===i.length&&o((()=>{for(const t of s)t();const e=i.slice();i.length=0;for(const t of e)t()}))}(a||(a={})).before=function(e){return s.push(e),{remove(){s=s.filter((t=>t!==e))}}};var l=a;t.a=l},338:function(e,t,r){"use strict";r.d(t,"a",(function(){return a}));var n=r(106),o=r(105),i=(r(76),r(77),r(122));const s="esri-widget__heading";function a(e,t){const r=`h${Object(n.e)(Math.ceil(e.level),1,6)}`;return delete e.level,Object(i.a)(r,{...e,class:Object(o.a)(s,e.class)},t)}},349:function(e,t,r){"use strict";r.d(t,"a",(function(){return o}));var n=r(171);class o{constructor(e,t){this._observers=e,this._observer=t}remove(){Object(n.i)(this._observers,this._observer)}}},350:function(e,t,r){"use strict";r.d(t,"a",(function(){return i}));r(76);var n=r(77),o=r(186);function i(e,t,r){if(e&&t)if("object"==typeof t)for(const n of Object.getOwnPropertyNames(t))i(e,n,t[n]);else{if(-1!==t.indexOf(".")){const n=t.split("."),s=n.splice(n.length-1,1)[0];return void i(Object(o.b)(e,n),s,r)}e[t]=r}}n.a.getLogger("esri.core.accessorSupport.set")},351:function(e,t,r){"use strict";function n(e){return!!e&&e.prototype&&e.prototype.declaredClass&&0===e.prototype.declaredClass.indexOf("esri.core.Collection")}r.d(t,"a",(function(){return n}))},374:function(e,t,r){"use strict";t.a=class{constructor(e,t=29){this.name=e,this._counter=0,this._items=new Array(t)}record(e){this._items[++this._counter%this._items.length]=e}get median(){return this._items.slice().sort()[Math.floor(this._items.length/2)]}get average(){return this._items.reduce(((e,t)=>e+t),0)/this._items.length}get last(){return this._items[this._counter%this._items.length]}}},379:function(e,t,r){"use strict";var n=r(116);class o{constructor(e,t,r){this.name=e,this.details=r,this.message=void 0,this instanceof o&&(this.message=t&&function(e,t){return e.replace(/\$\{([^\s\:\}]*)(?:\:([^\s\:\}]+))?\}/g,(function(e,r){if(""===r)return"$";const o=Object(n.b)(r,t),i=null==o?"":o;if(void 0===i)throw new Error(`could not find key "${r}" in template`);return i.toString()}))}(t,r)||"")}toString(){return"["+this.name+"]: "+this.message}}t.a=o},380:function(e,t,r){"use strict";function n(e){return e}r.d(t,"a",(function(){return n}))},388:function(e,t,r){"use strict";r.d(t,"a",(function(){return n}));class n{constructor(e){this._notify=e,this._accessed=[],this._handles=[],this._invalidCount=0}destroy(){this._accessed.length=0,this.clear()}onInvalidated(){this._invalidCount++}onCommitted(){const e=this._invalidCount;if(1===e)return this._invalidCount=0,void this._notify();this._invalidCount=e>0?e-1:0}onObservableAccessed(e){this._accessed.includes(e)||this._accessed.push(e)}onTrackingEnd(){const e=this._handles,t=this._accessed;for(let r=0;r<t.length;++r)e.push(t[r].observe(this));t.length=0}clear(){const e=this._handles;for(let t=0;t<e.length;++t)e[t].remove();e.length=0}}},389:function(e,t,r){"use strict";r.d(t,"a",(function(){return i})),r.d(t,"b",(function(){return l}));var n=r(116),o=r(351);function i(e,t){var r;if(!t.write||t.write.writer||!1===t.write.enabled&&!t.write.overridePolicy)return;const i=null!=(r=null==e?void 0:e.ndimArray)?r:0;var a;e&&(1===i||"type"in e&&Object(o.a)(e.type))?t.write.writer=c:t.write.writer=i>1?(a=i,function(e,t,r,o){let i;if(null===e)i=null;else{i=u(e,o,a);let t=a,r=i;for(;t>0&&Array.isArray(r);)t--,r=r[0];if(void 0!==r)for(let e=0;e<t;e++)i=[i]}Object(n.c)(r,i,t)}):s}function s(e,t,r,o){Object(n.c)(r,a(e,o),t)}function a(e,t){return e&&"function"==typeof e.write?e.write({},t):e&&"function"==typeof e.toJSON?e.toJSON():"number"==typeof e?l(e):e}function l(e){return e===-1/0?-Number.MAX_VALUE:e===1/0?Number.MAX_VALUE:isNaN(e)?null:e}function c(e,t,r,o){let i;null===e?i=null:e&&"function"==typeof e.map?(i=e.map((e=>a(e,o))),"function"==typeof i.toArray&&(i=i.toArray())):i=[a(e,o)],Object(n.c)(r,i,t)}function u(e,t,r){return 0!==r&&Array.isArray(e)?e.map((e=>u(e,t,r-1))):a(e,t)}},402:function(e,t,r){"use strict";r.d(t,"a",(function(){return s}));var n=r(76),o=r(82),i=r(86);function s(e,t,r=!1,s){return new Promise(((l,c)=>{if(Object(i.n)(s))return void c(a());let u=()=>{p(),c(new Error(`Unable to load ${t}`))},d=()=>{const t=e;p(),l(t)},h=()=>{if(!e)return;const t=e;p(),t.src="",c(a())};const p=()=>{Object(n.a)("esri-image-decode")||(e.removeEventListener("error",u),e.removeEventListener("load",d)),u=null,d=null,e=null,Object(o.k)(s)&&s.removeEventListener("abort",h),h=null,r&&URL.revokeObjectURL(t)};Object(o.k)(s)&&s.addEventListener("abort",h),Object(n.a)("esri-image-decode")?e.decode().then(d,u):(e.addEventListener("error",u),e.addEventListener("load",d))}))}function a(){try{return new DOMException("Aborted","AbortError")}catch{const e=new Error;return e.name="AbortError",e}}},422:function(e,t,r){"use strict";class n{constructor(e=1){this._seed=e}set seed(e){this._seed=null==e?Math.random()*n._m:e}getInt(){return this._seed=(n._a*this._seed+n._c)%n._m,this._seed}getFloat(){return this.getInt()/(n._m-1)}getIntRange(e,t){return Math.round(this.getFloatRange(e,t))}getFloatRange(e,t){const r=t-e;return e+this.getInt()/n._m*r}}n._m=2147483647,n._a=48271,n._c=0,t.a=n},423:function(e,t,r){"use strict";r.d(t,"a",(function(){return n}));r(82);function n(e,t){for(const r of e.entries())if(t(r[0]))return!0;return!1}},432:function(e,t,r){"use strict";r.d(t,"a",(function(){return i}));var n=r(93);const o=["elevation3d.arcgis.com","js.arcgis.com","jsdev.arcgis.com","jsqa.arcgis.com","static.arcgis.com"];function i(e){const t=Object(n.m)(e,!0);return t&&t.endsWith(".arcgis.com")&&!o.includes(t)&&!e.endsWith("/sharing/rest/generateToken")}},443:function(e,t,r){"use strict";r.d(t,"a",(function(){return w})),r.d(t,"b",(function(){return k})),r.d(t,"c",(function(){return y})),r.d(t,"d",(function(){return _}));var n=r(278),o=r(85),i=r(444),s=r(215),a=r(423),l=r(186),c=r(257),u=r(129);class d{constructor(){this.uid=0,this.target=null,this.path=null,this.oldValue=null,this.callback=null,this.getValue=null,this.removed=!1,this.propertyPath=null}acquire(e,t,r,n,o){this.target=e,this.path=t,this.oldValue=r,this.callback=n,this.getValue=o,this.propertyPath=Object(u.g)(t),this.uid=++d.uid,this.removed=!1}release(){this.target=this.path=this.propertyPath=this.callback=this.oldValue=null,this.uid=++d.uid,this.removed=!0}}d.pool=new i.a(d),d.uid=0;const h=new n.a,p=new Set;let f;function b(e){p.delete(e),p.add(e),f||(f=Object(s.b)(v))}function m(e){if(e.removed)return;const{callback:t,path:r,oldValue:n,target:o}=e,i=e.getValue();g(n,i)&&(e.oldValue=i,t.call(o,i,n,r,o))}function g(e,t){return!Object(o.b)(e,t)}function y(e){for(const t of p.values())t.target===e&&(t.removed=!0)}function v(){let e=10;for(;f&&e--;){f=null;const e=O(),t=h.acquire();for(const r of e){const e=r.uid;m(r),e===r.uid&&r.removed&&t.push(r)}for(const r of p)r.removed&&(t.push(r),p.delete(r));for(let r=0;r<t.length;r++)d.pool.release(t[r]);h.release(t),h.release(e),j.forEach((e=>e()))}}function O(){const e=h.acquire();e.length=p.size;let t=0;for(const r of p)e[t]=r,++t;return p.clear(),e}const j=new Set;function w(e){return j.add(e),{remove(){j.delete(e)}}}function _(e,t,r,n=!1){return!e.__accessor__||e.__accessor__.destroyed?{remove(){}}:n?function(e,t,r){const n=Object(u.e)(e,t,r,((e,t,r)=>{let o=!1;return Object(c.b)((()=>Object(l.c)(e,t)),((i,s)=>{e.__accessor__.destroyed?n.remove():o||(o=!0,g(s,i)&&r.call(e,i,s,t,e),o=!1)}))}));return n}(e,t,r):function(e,t,r){let n=Object(u.e)(e,t,r,((e,t,r)=>{let o,i,s=Object(c.c)((()=>Object(l.c)(e,t)),((s,a)=>{e.__accessor__.destroyed||o&&o.uid!==i?n.remove():(o||(o=d.pool.acquire(e,t,s,r,a),i=o.uid),b(o))}));return{remove:Object(u.d)((function(){s.remove(),o&&(o.uid!==i||o.removed||(o.removed=!0,b(o)),o=null),n=s=null}))}}));return n}(e,t,r)}function k(e){return Object(a.a)(p,(t=>t.oldValue===e))}},444:function(e,t,r){"use strict";r.d(t,"a",(function(){return i}));var n=r(82),o=r(181);class i extends o.a{constructor(){super(...arguments),this._set=new Set}destroy(){super.destroy(),this._set=Object(n.p)(this._set)}acquire(...e){const t=super.acquire(...e);return this._set.delete(t),t}release(e){e&&!this._set.has(e)&&(super.release(e),this._set.add(e))}_dispose(e){this._set.delete(e),super._dispose(e)}}},463:function(e,t,r){"use strict";var n=r(140);var o,i=(o=n.a,{setTimeout:(e,t)=>{const r=o.setTimeout(e,t);return{remove:()=>o.clearTimeout(r)}}});t.a=i},465:function(e,t,r){"use strict";r.d(t,"a",(function(){return y})),r.d(t,"b",(function(){return g})),r.d(t,"c",(function(){return l})),r.d(t,"d",(function(){return s})),r.d(t,"e",(function(){return p})),r.d(t,"f",(function(){return a})),r.d(t,"g",(function(){return u})),r.d(t,"h",(function(){return d})),r.d(t,"i",(function(){return c}));var n=r(106),o=r(100),i=r(98);function s(e){const t=e[0]*e[0]+e[4]*e[4]+e[8]*e[8],r=e[1]*e[1]+e[5]*e[5]+e[9]*e[9],n=e[2]*e[2]+e[6]*e[6]+e[10]*e[10];return Math.sqrt(Math.max(t,r,n))}function a(e,t){const r=Math.sqrt(t[0]*t[0]+t[4]*t[4]+t[8]*t[8]),n=Math.sqrt(t[1]*t[1]+t[5]*t[5]+t[9]*t[9]),i=Math.sqrt(t[2]*t[2]+t[6]*t[6]+t[10]*t[10]);return Object(o.w)(e,r,n,i),e}function l(e,t,r){r=r||e;const n=Object(o.h)(e,t);Object(o.w)(r,e[0]-n*t[0],e[1]-n*t[1],e[2]-n*t[2]),Object(o.r)(r,r)}function c(e,t,r){Math.abs(e[0])>Math.abs(e[1])?Object(o.w)(t,0,1,0):Object(o.w)(t,1,0,0),Object(o.g)(r,e,t),Object(o.r)(t,t),Object(o.g)(t,r,e),Object(o.r)(r,r)}function u(e,t,r,n=Object(i.e)()){const s=Object(o.p)(e),a=Object(o.p)(t),l=Object(o.h)(e,t)/(s*a);if(l<.9999999999999999){const i=Math.acos(l),c=((1-r)*s+r*a)/Math.sin(i),u=c/s*Math.sin((1-r)*i),d=c/a*Math.sin(r*i);return Object(o.e)(v,e,u),Object(o.e)(O,t,d),Object(o.f)(n,v,O)}return Object(o.i)(n,e,t,r)}function d(e,t,r,n=Object(i.e)(),s=Object(i.e)()){const a=Object(o.p)(e),l=Object(o.p)(t),c=Object(o.h)(e,t)/(a*l);if(c<.9999999999999999){const i=Math.acos(c),u=Math.sin(i),d=Math.sin(r*i),h=Math.sin((1-r)*i),p=(1-r)*a+r*l;{const r=p/u,i=r/l*d;Object(o.e)(v,e,r/a*h),Object(o.e)(O,t,i),Object(o.f)(n,v,O)}{const n=1/a*(-Math.cos((1-r)*i)*i*p+h*(-a+l));Object(o.e)(v,e,n);const c=1/l*(Math.cos(r*i)*i*p+d*(-a+l));Object(o.e)(O,t,c),Object(o.f)(s,v,O),Object(o.e)(s,s,1/u)}return s}return Object(o.i)(n,e,t,r),Object(o.j)(s,t,e),Object(o.r)(s,s),s}class h{constructor(e,t){this.min=e,this.max=t,this.range=t-e}ndiff(e,t=0){return Math.ceil((e-t)/this.range)*this.range+t}_normalize(e,t,r,n=0,o=!1){return(r-=n)<e?r+=this.ndiff(e-r):r>t&&(r-=this.ndiff(r-t)),o&&r===t&&(r=e),r+n}normalize(e,t=0,r=!1){return this._normalize(this.min,this.max,e,t,r)}clamp(e,t=0){return Object(n.e)(e-t,this.min,this.max)+t}monotonic(e,t,r){return e<t?t:t+this.ndiff(e-t,r)}minimalMonotonic(e,t,r){return this._normalize(e,e+this.range,t,r)}center(e,t,r){return t=this.monotonic(e,t,r),this.normalize((e+t)/2,r)}diff(e,t,r){return this.monotonic(e,t,r)-e}shortestSignedDiff(e,t){e=this.normalize(e);const r=(t=this.normalize(t))-e,n=t<e?this.minimalMonotonic(e,t)-e:t-this.minimalMonotonic(t,e);return Math.abs(r)<Math.abs(n)?r:n}contains(e,t,r){return t=this.minimalMonotonic(e,t),(r=this.minimalMonotonic(e,r))>e&&r<t}}function p(e,t,r,n){Object(o.j)(f,t,e),Object(o.j)(b,r,e),Object(o.g)(n,f,b),Object(o.r)(n,n),n[3]=-Object(o.h)(e,n)}const f=Object(i.e)(),b=Object(i.e)();function m(e){for(const t in e){const r=e[t];r instanceof Function&&(e[t]=r.bind(e))}return e}m(new h(0,2*Math.PI));const g=m(new h(-Math.PI,Math.PI)),y=m(new h(0,360)),v=(Object(i.e)(),Object(i.e)()),O=Object(i.e)()},489:function(e,t,r){"use strict";r.d(t,"a",(function(){return o})),r.d(t,"b",(function(){return i}));var n=r(81);function o(e){const t=Object(n.e)(100*(1-e));return Math.max(0,Math.min(t,100))}function i(e){const t=1-e/100;return Math.max(0,Math.min(t,1))}},516:function(e,t,r){"use strict";r.d(t,"a",(function(){return s}));var n=r(78),o=r(80),i=(r(76),r(81),r(77),r(79));const s=e=>{let t=class extends e{constructor(...e){super(...e),this.goToOverride=null,this.view=null}callGoTo(e){const{view:t}=this;return this.goToOverride?this.goToOverride(t,e):t.goTo(e.target,e.options)}};return Object(n.a)([Object(o.b)()],t.prototype,"goToOverride",void 0),Object(n.a)([Object(o.b)()],t.prototype,"view",void 0),t=Object(n.a)([Object(i.a)("esri.widgets.support.GoTo")],t),t}},524:function(e,t){function r(e){return Promise.resolve().then((function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}))}r.keys=function(){return[]},r.resolve=r,e.exports=r,r.id=524},525:function(e,t,r){"use strict";var n=r(78),o=r(83),i=r(80),s=(r(76),r(81),r(77),r(79)),a=r(96);let l=class extends o.a{constructor(e){super(e),this.geometries=null,this.outSpatialReference=null,this.transformation=null,this.transformForward=null}toJSON(){const e=this.geometries.map((function(e){return e.toJSON()})),t=this.geometries[0],r={};return r.outSR=this.outSpatialReference.wkid||JSON.stringify(this.outSpatialReference.toJSON()),r.inSR=t.spatialReference.wkid||JSON.stringify(t.spatialReference.toJSON()),r.geometries=JSON.stringify({geometryType:Object(a.c)(t),geometries:e}),this.transformation&&(r.transformation=this.transformation.wkid||JSON.stringify(this.transformation)),null!=this.transformForward&&(r.transformForward=this.transformForward),r}};Object(n.a)([Object(i.b)()],l.prototype,"geometries",void 0),Object(n.a)([Object(i.b)({json:{read:{source:"outSR"}}})],l.prototype,"outSpatialReference",void 0),Object(n.a)([Object(i.b)()],l.prototype,"transformation",void 0),Object(n.a)([Object(i.b)()],l.prototype,"transformForward",void 0),l=Object(n.a)([Object(s.a)("esri.rest.support.ProjectParameters")],l);var c=l;t.a=c},543:function(e,t,r){"use strict";var n=r(78),o=r(102),i=r(151),s=r(82),a=r(80),l=(r(76),r(81),r(77),r(79)),c=r(257);let u=class extends(Object(i.b)(o.a)){constructor(e){super(e),this.getCollections=null}initialize(){this.handles.add(Object(c.a)((()=>this.refresh())))}destroy(){this.getCollections=null}refresh(){const e=Object(s.k)(this.getCollections)?this.getCollections():null;if(Object(s.j)(e))return void this.removeAll();let t=0;for(const r of e)Object(s.k)(r)&&(t=this._processCollection(t,r));this.splice(t,this.length)}_createNewInstance(e){return new o.a(e)}_processCollection(e,t){if(!t)return e;const r=this.itemFilterFunction?this.itemFilterFunction:e=>!!e;for(const n of t)if(n){if(r(n)){const t=this.indexOf(n,e);t>=0?t!==e&&this.reorder(n,e):this.add(n,e),++e}if(this.getChildrenFunction){const t=this.getChildrenFunction(n);if(Array.isArray(t))for(const r of t)e=this._processCollection(e,r);else e=this._processCollection(e,t)}}return e}};Object(n.a)([Object(a.b)()],u.prototype,"getCollections",void 0),Object(n.a)([Object(a.b)()],u.prototype,"getChildrenFunction",void 0),Object(n.a)([Object(a.b)()],u.prototype,"itemFilterFunction",void 0),u=Object(n.a)([Object(l.a)("esri.core.CollectionFlattener")],u);var d=u;t.a=d},562:function(e,t,r){"use strict";r.d(t,"a",(function(){return f})),r.d(t,"b",(function(){return u})),r.d(t,"c",(function(){return d})),r.d(t,"d",(function(){return h})),r.d(t,"e",(function(){return p})),r.d(t,"f",(function(){return b})),r.d(t,"g",(function(){return m}));var n=r(607),o=r(102),i=r(77),s=r(93),a=r(81),l=r(608);const c=i.a.getLogger("esri.support.basemapUtils");function u(){return{}}function d(e){for(const t in e){const r=e[t];!1===(null==r?void 0:r.destroyed)&&r.destroy(),delete e[t]}}function h(e,t){var r;let o;if("string"==typeof e){if(!(e in l.a)){const t=Object.keys(l.a).map((e=>`"${e}"`)).join(", ");return c.warn(`Unable to find basemap definition for: ${e}. Try one of these: ${t}`),null}t&&(o=t[e]),o||(o=n.default.fromId(e),t&&(t[e]=o))}else o=Object(a.m)(n.default,e);return null!=(r=o)&&r.destroyed&&(c.warn("The provided basemap is already destroyed",{basemap:o}),o=null),o}function p(e){let t=null;const r=v(e),n=!r.baseLayers.length;for(const o in l.a){const e=k(r,w(l.a[o]),{mustMatchReferences:n});if("equal"===e){t=o;break}"base-layers-equal"===e&&(t=o)}return t}function f(e,t){return e===t||"equal"===k(v(e),v(t),{mustMatchReferences:!0})}function b(e){return!(null==e||!e.baseLayers.concat(e.referenceLayers).some(m))}function m(e){if(y(e.url))return!0;if("vector-tile"===e.type)for(const t in e.sourceNameToSource){const r=e.sourceNameToSource[t];if(y(null==r?void 0:r.sourceUrl))return!0}return!1}const g=/^(basemaps|ibasemaps).*-api\.arcgis\.com$/i;function y(e){if(!e)return!1;const t=new s.a(Object(s.A)(e));return g.test(t.authority)}function v(e){return e?!e.loaded&&e.resourceInfo?w(e.resourceInfo.data):{baseLayers:O(e.baseLayers),referenceLayers:O(e.referenceLayers)}:null}function O(e){return(o.a.isCollection(e)?e.toArray():e).map(j)}function j(e){return{type:e.type,url:E("urlTemplate"in e&&e.urlTemplate||e.url||"styleUrl"in e&&e.styleUrl),minScale:"minScale"in e&&null!=e.minScale?e.minScale:0,maxScale:"maxScale"in e&&null!=e.maxScale?e.maxScale:0,opacity:null!=e.opacity?e.opacity:1,visible:null==e.visible||!!e.visible}}function w(e){return e?{baseLayers:_(e.baseMapLayers.filter((e=>!e.isReference))),referenceLayers:_(e.baseMapLayers.filter((e=>e.isReference)))}:null}function _(e){return e.map((e=>function(e){let t;switch(e.layerType){case"VectorTileLayer":t="vector-tile";break;case"ArcGISTiledMapServiceLayer":t="tile";break;default:t="unknown"}return{type:t,url:E(e.templateUrl||e.urlTemplate||e.styleUrl||e.url),minScale:null!=e.minScale?e.minScale:0,maxScale:null!=e.maxScale?e.maxScale:0,opacity:null!=e.opacity?e.opacity:1,visible:null==e.visibility||!!e.visibility}}(e)))}function k(e,t,r){return null!=e!=(null!=t)?"not-equal":e?S(e.baseLayers,t.baseLayers)?S(e.referenceLayers,t.referenceLayers)?"equal":r.mustMatchReferences?"not-equal":"base-layers-equal":"not-equal":"equal"}function S(e,t){if(e.length!==t.length)return!1;for(let r=0;r<e.length;r++)if(!x(e[r],t[r]))return!1;return!0}function x(e,t){return e.type===t.type&&e.url===t.url&&e.minScale===t.minScale&&e.maxScale===t.maxScale&&e.visible===t.visible&&e.opacity===t.opacity}function E(e){return e?Object(s.D)(e).replace(/^\s*https?:/i,"").toLowerCase():""}},577:function(e,t,r){"use strict";var n,o=r(78),i=r(83),s=r(106),a=r(80),l=(r(76),r(107)),c=(r(77),r(89)),u=r(79),d=r(88),h=r(81),p=r(104),f=r(465);let b=n=class extends i.a{constructor(...e){super(...e),this.position=new p.a([0,0,0]),this.heading=0,this.tilt=0,this.fov=55}normalizeCtorArgs(e,t,r,n){if(e&&"object"==typeof e&&("x"in e||Array.isArray(e))){const o={position:e};return null!=t&&(o.heading=t),null!=r&&(o.tilt=r),null!=n&&(o.fov=n),o}return e}writePosition(e,t,r,n){const o=e.clone();o.x=Object(h.i)(e.x||0),o.y=Object(h.i)(e.y||0),o.z=e.hasZ?Object(h.i)(e.z||0):e.z,t[r]=o.write(null,n)}readPosition(e,t){const r=new p.a;return r.read(e,t),r.x=Object(h.i)(r.x||0),r.y=Object(h.i)(r.y||0),r.z=r.hasZ?Object(h.i)(r.z||0):r.z,r}equals(e){return!!e&&this.tilt===e.tilt&&this.heading===e.heading&&this.fov===e.fov&&this.position.equals(e.position)}clone(){return new n({position:this.position.clone(),heading:this.heading,tilt:this.tilt,fov:this.fov})}};Object(o.a)([Object(a.b)({type:p.a,json:{write:{isRequired:!0}}})],b.prototype,"position",void 0),Object(o.a)([Object(d.a)("position")],b.prototype,"writePosition",null),Object(o.a)([Object(c.a)("position")],b.prototype,"readPosition",null),Object(o.a)([Object(a.b)({type:Number,nonNullable:!0,json:{write:{isRequired:!0}}}),Object(l.a)((e=>f.a.normalize(Object(h.i)(e))))],b.prototype,"heading",void 0),Object(o.a)([Object(a.b)({type:Number,nonNullable:!0,json:{write:{isRequired:!0}}}),Object(l.a)((e=>Object(s.e)(Object(h.i)(e),-180,180)))],b.prototype,"tilt",void 0),Object(o.a)([Object(a.b)({type:Number,nonNullable:!0,json:{read:!1,write:!1}})],b.prototype,"fov",void 0),b=n=Object(o.a)([Object(u.a)("esri.Camera")],b);var m,g=b,y=r(94),v=r(82),O=r(96);let j=m=class extends i.a{constructor(e){super(e),this.rotation=0,this.scale=0,this.targetGeometry=null,this.camera=null}castRotation(e){return(e%=360)<0&&(e+=360),e}clone(){return new m({rotation:this.rotation,scale:this.scale,targetGeometry:Object(v.k)(this.targetGeometry)?this.targetGeometry.clone():null,camera:Object(v.k)(this.camera)?this.camera.clone():null})}};function w(){return{enabled:!this.camera}}Object(o.a)([Object(a.b)({type:Number,json:{write:!0,origins:{"web-map":{default:0,write:!0},"web-scene":{write:{overridePolicy:w}}}}})],j.prototype,"rotation",void 0),Object(o.a)([Object(l.a)("rotation")],j.prototype,"castRotation",null),Object(o.a)([Object(a.b)({type:Number,json:{write:!0,origins:{"web-map":{default:0,write:!0},"web-scene":{write:{overridePolicy:w}}}}})],j.prototype,"scale",void 0),Object(o.a)([Object(a.b)({types:y.a,json:{read:O.a,write:!0,origins:{"web-scene":{read:O.a,write:{overridePolicy:w}}}}})],j.prototype,"targetGeometry",void 0),Object(o.a)([Object(a.b)({type:g,json:{write:!0}})],j.prototype,"camera",void 0),j=m=Object(o.a)([Object(u.a)("esri.Viewpoint")],j);var _=j;t.a=_},637:function(e,t,r){"use strict";r.d(t,"a",(function(){return o}));var n=r(84);class o{constructor(e,t,r=""){this.major=e,this.minor=t,this._context=r}lessThan(e,t){return this.major<e||e===this.major&&this.minor<t}since(e,t){return!this.lessThan(e,t)}validate(e){if(this.major!==e.major){const t=this._context&&this._context+":",r=this._context&&this._context+" ";throw new n.a(t+"unsupported-version",`Required major ${r}version is '${this.major}', but got '\${version.major}.\${version.minor}'`,{version:e})}}clone(){return new o(this.major,this.minor,this._context)}static parse(e,t=""){const[r,i]=e.split("."),s=/^\s*\d+\s*$/;if(!r||!r.match||!r.match(s))throw new n.a((t&&t+":")+"invalid-version","Expected major version to be a number, but got '${version}'",{version:e});if(!i||!i.match||!i.match(s))throw new n.a((t&&t+":")+"invalid-version","Expected minor version to be a number, but got '${version}'",{version:e});const a=parseInt(r,10),l=parseInt(i,10);return new o(a,l,t)}}},664:function(e,t,r){"use strict";function n(e,t){if(!o(e,t)){const r=e.typeKeywords;r?r.push(t):e.typeKeywords=[t]}}function o(e,t){return!!e.typeKeywords&&e.typeKeywords.indexOf(t)>-1}function i(e,t){const r=e.typeKeywords;if(r){const e=r.indexOf(t);e>-1&&r.splice(e,1)}}r.d(t,"a",(function(){return n})),r.d(t,"b",(function(){return o})),r.d(t,"c",(function(){return i}))},691:function(e,t,r){"use strict";r.d(t,"a",(function(){return f}));var n=r(78),o=r(102),i=r(303),s=r(77),a=r(86),l=r(80),c=(r(76),r(81),r(79)),u=r(226);function d(e){return e&&"group"===e.type}function h(e,t,r){let n,o;if(e)for(let i=0,s=e.length;i<s;i++){if(n=e.getItemAt(i),n[t]===r)return n;if(d(n)&&(o=h(n.layers,t,r),o))return o}}const p=s.a.getLogger("esri.support.LayersMixin"),f=e=>{let t=class extends e{constructor(...e){super(...e),this.layers=new o.a;const t=e=>{e.parent=this,this.layerAdded(e),"elevation"!==e.type&&"base-elevation"!==e.type||p.error(`Layer 'title:${e.title}, id:${e.id}' of type '${e.type}' is not supported as an operational layer and will therefore be ignored.`)},r=e=>{e.parent=null,this.layerRemoved(e)};this.layers.on("before-add",(e=>(e=>{e.parent&&"remove"in e.parent&&e.parent.remove(e)})(e.item))),this.layers.on("after-add",(e=>t(e.item))),this.layers.on("after-remove",(e=>r(e.item)))}destroy(){const e=this.layers.removeAll();for(const t of e)this.layerRemoved(t),t.destroy();this.layers.destroy()}set layers(e){this._set("layers",Object(i.b)(e,this._get("layers")))}add(e,t){const r=this.layers;if(t=r.getNextIndex(t),e instanceof u.a){const n=e;n.parent===this?this.reorder(n,t):r.add(n,t)}else Object(a.p)(e)?e.then((e=>{this.destroyed||this.add(e,t)})):p.error("#add()","The item being added is not a Layer or a Promise that resolves to a Layer.")}addMany(e,t){const r=this.layers;t=r.getNextIndex(t),e.slice().forEach((e=>{e.parent!==this?(r.add(e,t),t+=1):this.reorder(e,t)}))}findLayerById(e){return h(this.layers,"id",e)}findLayerByUid(e){return h(this.layers,"uid",e)}remove(e){return this.layers.remove(e)}removeMany(e){return this.layers.removeMany(e)}removeAll(){return this.layers.removeAll()}reorder(e,t){return this.layers.reorder(e,t)}layerAdded(e){}layerRemoved(e){}};return Object(n.a)([Object(l.b)()],t.prototype,"layers",null),t=Object(n.a)([Object(c.a)("esri.support.LayersMixin")],t),t}},692:function(e,t,r){"use strict";r.d(t,"a",(function(){return p}));var n=r(78),o=r(102),i=r(303),s=r(77),a=r(80),l=(r(76),r(81),r(79));const c="esri.support.TablesMixin",u=s.a.getLogger(c);function d(e){return e&&"group"===e.type}function h(e,t,r){if(e)for(let n=0,o=e.length;n<o;n++){const o=e.getItemAt(n);if(o[t]===r)return o;if(d(o)){const e=h(o.tables,t,r);if(e)return e}}}const p=e=>{let t=class extends e{constructor(...e){super(...e),this.tables=new o.a,this.tables.on("after-add",(e=>{const t=e.item;t.parent&&t.parent!==this&&"tables"in t.parent&&t.parent.tables.remove(t),t.parent=this,"feature"!==t.type&&u.error(`Layer 'title:${t.title}, id:${t.id}' of type '${t.type}' is not supported as a table and will therefore be ignored.`)})),this.tables.on("after-remove",(e=>{e.item.parent=null}))}destroy(){const e=this.tables.removeAll();for(const t of e)t.destroy();this.tables.destroy()}set tables(e){this._set("tables",Object(i.b)(e,this._get("tables")))}findTableById(e){return h(this.tables,"id",e)}findTableByUid(e){return h(this.tables,"uid",e)}};return Object(n.a)([Object(a.b)()],t.prototype,"tables",null),t=Object(n.a)([Object(l.a)(c)],t),t}},708:function(e,t,r){"use strict";var n,o=r(78),i=r(90),s=r(80),a=(r(76),r(107)),l=(r(77),r(79));let c=n=class extends i.a{constructor(e){super(e),this.autoCloseMenu=!1,this.iconClass=null,this.items=null,this.label=null,this.open=!1,this.selected=!1,this.selectionEnabled=!1,this.clickFunction=null}castItems(e){return e?e.map((e=>e instanceof n?e:new n(e))):null}};Object(o.a)([Object(s.b)()],c.prototype,"autoCloseMenu",void 0),Object(o.a)([Object(s.b)()],c.prototype,"iconClass",void 0),Object(o.a)([Object(s.b)()],c.prototype,"items",void 0),Object(o.a)([Object(a.a)("items")],c.prototype,"castItems",null),Object(o.a)([Object(s.b)()],c.prototype,"label",void 0),Object(o.a)([Object(s.b)()],c.prototype,"open",void 0),Object(o.a)([Object(s.b)()],c.prototype,"selected",void 0),Object(o.a)([Object(s.b)()],c.prototype,"selectionEnabled",void 0),Object(o.a)([Object(s.b)()],c.prototype,"clickFunction",void 0),c=n=Object(o.a)([Object(l.a)("esri.widgets.FeatureTable.Grid.support.ButtonMenuItem")],c);var u=c;t.a=u},76:function(e,t,r){"use strict";var n,o,i=r(140);let s;var a,l;function c(e){return"function"==typeof s[e]?s[e]=s[e](i.a):s[e]}s=null!=(n=i.a.dojoConfig)&&n.has||null!=(o=i.a.esriConfig)&&o.has?{...null==(a=i.a.dojoConfig)?void 0:a.has,...null==(l=i.a.esriConfig)?void 0:l.has}:{},c.add=(e,t,r,n)=>((n||void 0===s[e])&&(s[e]=t),r&&c(e)),c.cache=s,c.add("esri-deprecation-warnings",!0),(()=>{c.add("host-webworker",void 0!==i.a.WorkerGlobalScope&&self instanceof i.a.WorkerGlobalScope);const e="undefined"!=typeof window&&"undefined"!=typeof location&&"undefined"!=typeof document&&window.location===location&&window.document===document;if(c.add("host-browser",e),c.add("host-node","object"==typeof i.a.process&&i.a.process.versions&&i.a.process.versions.node&&i.a.process.versions.v8),c.add("dom",e),c("host-browser")){const e=navigator,t=e.userAgent,r=e.appVersion,n=parseFloat(r);if(c.add("wp",parseFloat(t.split("Windows Phone")[1])||void 0),c.add("msapp",parseFloat(t.split("MSAppHost/")[1])||void 0),c.add("khtml",r.includes("Konqueror")?n:void 0),c.add("edge",parseFloat(t.split("Edge/")[1])||void 0),c.add("opr",parseFloat(t.split("OPR/")[1])||void 0),c.add("webkit",!c("wp")&&!c("edge")&&parseFloat(t.split("WebKit/")[1])||void 0),c.add("chrome",!c("edge")&&!c("opr")&&parseFloat(t.split("Chrome/")[1])||void 0),c.add("android",!c("wp")&&parseFloat(t.split("Android ")[1])||void 0),c.add("safari",!r.includes("Safari")||c("wp")||c("chrome")||c("android")||c("edge")||c("opr")?void 0:parseFloat(r.split("Version/")[1])),c.add("mac",r.includes("Macintosh")),!c("wp")&&t.match(/(iPhone|iPod|iPad)/)){const e=RegExp.$1.replace(/P/,"p"),r=t.match(/OS ([\d_]+)/)?RegExp.$1:"1",n=parseFloat(r.replace(/_/,".").replace(/_/g,""));c.add(e,n),c.add("ios",n)}c.add("trident",parseFloat(r.split("Trident/")[1])||void 0),c("webkit")||(!t.includes("Gecko")||c("wp")||c("khtml")||c("trident")||c("edge")||c.add("mozilla",n),c("mozilla")&&c.add("ff",parseFloat(t.split("Firefox/")[1]||t.split("Minefield/")[1])||void 0))}})(),(()=>{if(i.a.navigator){const e=navigator.userAgent,t=/Android|webOS|iPhone|iPad|iPod|BlackBerry|Opera Mini|IEMobile/i.test(e),r=/iPhone/i.test(e);t&&c.add("esri-mobile",t),r&&c.add("esri-iPhone",r),c.add("esri-geolocation",!!navigator.geolocation)}c.add("esri-canvas-svg-support",!c("trident")),c.add("esri-wasm","WebAssembly"in i.a),c.add("esri-shared-array-buffer",(()=>{const e="SharedArrayBuffer"in i.a,t=!1===i.a.crossOriginIsolated;return e&&!t})),c.add("esri-atomics","Atomics"in i.a),c.add("esri-workers","Worker"in i.a),c.add("esri-text-decoder","TextDecoder"in i.a),c.add("esri-text-encoder","TextEncoder"in i.a),c.add("web-feat:cache","caches"in i.a),c.add("esri-workers-arraybuffer-transfer",!c("safari")||Number(c("safari"))>=12),c.add("featurelayer-snapshot-enabled",!0),c.add("featurelayer-snapshot-point-min-threshold",8e4),c.add("featurelayer-snapshot-point-max-threshold",4e5),c.add("featurelayer-snapshot-point-coverage",.1),c.add("featurelayer-advanced-symbols",!1),c.add("featurelayer-pbf",!0),c.add("featurelayer-pbf-statistics",!1),c.add("feature-layers-workers",!0),c.add("mapview-transitions-duration",200),c.add("mapserver-pbf-enabled",!1),c("host-webworker")||c("host-browser")&&(c.add("csp-restrictions",(()=>{try{new Function}catch{return!0}return!1})),c.add("esri-image-decode",(()=>{if("decode"in new Image){const e=new Image;return e.src='data:image/svg+xml;charset=UTF-8,<svg version="1.1" xmlns="http://www.w3.org/2000/svg"></svg>',void e.decode().then((()=>{c.add("esri-image-decode",!0,!0,!0)})).catch((()=>{c.add("esri-image-decode",!1,!0,!0)}))}return!1})),c.add("esri-url-encodes-apostrophe",(()=>{const e=i.a.document.createElement("a");return e.href="?'",e.href.includes("?%27")})),c.add("vectortilelayer-max-buffers",c("ff")?160:Number.POSITIVE_INFINITY))})(),t.a=c},77:function(e,t,r){"use strict";var n=r(142),o=(r(76),r(82)),i=r(133);const s={info:0,warn:1,error:2,none:3};class a{constructor(e){this.level=null,this._module="",this._parent=null,this.writer=null,this._loggedMessages={error:new Map,warn:new Map,info:new Map},null!=e.level&&(this.level=e.level),null!=e.writer&&(this.writer=e.writer),this._module=e.module,a._loggers[this.module]=this;const t=this.module.lastIndexOf(".");-1!==t&&(this._parent=a.getLogger(this.module.slice(0,t)))}get module(){return this._module}get parent(){return this._parent}error(...e){this._log("error","always",...e)}warn(...e){this._log("warn","always",...e)}info(...e){this._log("info","always",...e)}errorOnce(...e){this._log("error","once",...e)}warnOnce(...e){this._log("warn","once",...e)}infoOnce(...e){this._log("info","once",...e)}errorOncePerTick(...e){this._log("error","oncePerTick",...e)}warnOncePerTick(...e){this._log("warn","oncePerTick",...e)}infoOncePerTick(...e){this._log("info","oncePerTick",...e)}get test(){const e=this;return{loggedMessages:e._loggedMessages,clearLoggedWarnings:()=>e._loggedMessages.warn.clear()}}static get testSingleton(){return{resetLoggers(e={}){const t=a._loggers;return a._loggers=e,t},set throttlingDisabled(e){a._throttlingDisabled=e}}}static getLogger(e){let t=a._loggers[e];return t||(t=new a({module:e})),t}_log(e,t,...r){if(this._matchLevel(e)){if("always"!==t&&!a._throttlingDisabled){const n=this._argsToKey(r),o=this._loggedMessages[e].get(n);if("once"===t&&null!=o||"oncePerTick"===t&&o&&o>=a._tickCounter)return;this._loggedMessages[e].set(n,a._tickCounter),a._scheduleTickCounterIncrement()}for(const t of n.a.log.interceptors)if(t(e,this.module,...r))return;this._inheritedWriter()(e,this.module,...r)}}_parentWithMember(e,t){let r=this;for(;Object(o.k)(r);){const t=r[e];if(Object(o.k)(t))return t;r=r.parent}return t}_inheritedWriter(){return this._parentWithMember("writer",this._consoleWriter)}_consoleWriter(e,t,...r){console[e](`[${t}]`,...r)}_matchLevel(e){const t=n.a.log.level?n.a.log.level:"warn";return s[this._parentWithMember("level",t)]<=s[e]}_argsToKey(...e){return Object(i.b)(JSON.stringify(e,((e,t)=>"object"!=typeof t||Array.isArray(t)?t:"[Object]")))}static _scheduleTickCounterIncrement(){a._tickCounterScheduled||(a._tickCounterScheduled=!0,Promise.resolve().then((()=>{a._tickCounter++,a._tickCounterScheduled=!1})))}}a._loggers={},a._tickCounter=0,a._tickCounterScheduled=!1,a._throttlingDisabled=!1,t.a=a},78:function(e,t,r){"use strict";function n(e,t,r,n){var o,i=arguments.length,s=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(i<3?o(s):i>3?o(t,r,s):o(t,r))||s);return i>3&&s&&Object.defineProperty(t,r,s),s}r.d(t,"a",(function(){return n}))},79:function(e,t,r){"use strict";r.d(t,"a",(function(){return l}));r(76);const n=[r(310).a];var o=r(222),i=r(214);const s=new Set,a=new Set;function l(e){return t=>{t.prototype.declaredClass=e,function(e,t){for(const r of n)if(r.processPrototypePropertyMetadata)for(const n in e){const o=e[n];r.processPrototypePropertyMetadata(n,o,e,t)}}(Object(o.a)(t.prototype).properties,e),function(e){const t=e.prototype,r=t.declaredClass,i=Object(o.a)(t).properties;!function(e,t){for(const r of n)if(r.processClassPropertyMetadata)for(const n in e){const o=e[n];r.processClassPropertyMetadata(n,o,e,t)}}(i,r);const s={};for(const n of Object.getOwnPropertyNames(i)){const e=i[n];s[n]={enumerable:!0,configurable:!0,get:c(n,e),set(t){const r=this.__accessor__;if(void 0!==r){if(!Object.isFrozen(this)){if(r.initialized&&e.readOnly)throw new TypeError(`[accessor] cannot assign to read-only property '${n}' of ${this.declaredClass}`);if(2===r.lifecycle&&e.constructOnly)throw new TypeError(`[accessor] cannot assign to construct-only property '${n}' of ${this.declaredClass}`);r.set(n,t)}}else Object.defineProperty(this,n,{enumerable:!0,configurable:!0,writable:!0,value:t})}}}Object.defineProperties(e.prototype,s)}(t);const r=[],i=[];let l=t.prototype;for(;l;)l.hasOwnProperty("initialize")&&!s.has(l.initialize)&&(s.add(l.initialize),r.push(l.initialize)),l.hasOwnProperty("destroy")&&!a.has(l.destroy)&&(a.add(l.destroy),i.push(l.destroy)),l=Object.getPrototypeOf(l);s.clear(),a.clear();class u extends t{constructor(...e){if(super(...e),this.constructor===u&&"function"==typeof this.postscript){if(r.length&&Object.defineProperty(this,"initialize",{enumerable:!1,configurable:!0,value(){for(let e=r.length-1;e>=0;e--)r[e].call(this)}}),i.length){let e=!1;Object.defineProperty(this,"destroy",{enumerable:!1,configurable:!0,value(){if(!e){e=!0;for(let e=0;e<i.length;e++)i[e].call(this)}}})}this.postscript(...e)}}}return u.__accessorMetadata__=Object(o.a)(t.prototype),u.prototype.declaredClass=e,u}}function c(e,t){return null==t.get?function(){const t=this.__accessor__.properties.get(e);if(void 0===t)return;Object(i.c)(t);const r=this.__accessor__.store;return r.has(e)?r.get(e):t.metadata.value}:function(){const t=this.__accessor__.properties.get(e);if(void 0!==t)return t.getComputed()}}},80:function(e,t,r){"use strict";r.d(t,"a",(function(){return d})),r.d(t,"b",(function(){return c})),r.d(t,"c",(function(){return u}));var n=r(77),o=r(81),i=r(186),s=r(222),a=r(350);const l=n.a.getLogger("esri.core.accessorSupport.decorators.property");function c(e={}){return(t,r,n)=>{if(t===Function.prototype)throw new Error(`Inappropriate use of @property() on a static field: ${t.name}.${r}. Accessor does not support static properties.`);const c=Object(s.b)(t,r);n&&(n.get||n.set?(c.get=n.get||c.get,c.set=n.set||c.set):"value"in n&&("value"in e&&l.warn(`@property() will redefine the value of "${r}" on "${t.constructor.name}" already defined in the metadata`,e),c.value=e.value=n.value)),null!=e.readOnly&&(c.readOnly=e.readOnly);const u=e.aliasOf;if(u){const e="string"==typeof u?u:u.source,t="string"==typeof u?null:!0===u.overridable;let n;c.dependsOn=[e],c.get=function(){let t=Object(i.b)(this,e);if("function"==typeof t){n||(n=e.split(".").slice(0,-1).join("."));const r=Object(i.b)(this,n);r&&(t=t.bind(r))}return t},c.readOnly||(c.set=t?function(e){void 0!==e?this._override(r,e):this._clearOverride(r)}:function(t){Object(a.a)(this,e,t)})}const h=e.type,p=e.types;c.cast||(h?c.cast=function(e){let t=0,r=e;if(Object(o.n)(e))return Object(o.f)(e);for(;Array.isArray(r)&&1===r.length&&"string"!=typeof r[0]&&"number"!=typeof r[0];)r=r[0],t++;const n=r;if(Object(o.o)(n))return 0===t?Object(o.j)(n):Object(o.h)(Object(o.j)(n),t);if(1===t)return Object(o.b)(n);if(t>1)return Object(o.g)(n,t);const i=e;return i.from?i.from:Object(o.m)(i)}(h):p&&(Array.isArray(p)?c.cast=Object(o.c)(Object(o.k)(p[0])):c.cast=Object(o.k)(p))),e.range&&(c.cast=d(c.cast,e.range)),Object(s.c)(c,e)}}function u(e,t,r){const n=Object(s.b)(e,r);n.json||(n.json={});let o=n.json;return void 0!==t&&(o.origins||(o.origins={}),o.origins[t]||(o.origins[t]={}),o=o.origins[t]),o}function d(e,t){return r=>{let n=+e(r);return null!=t.step&&(n=Math.round(n/t.step)*t.step),null!=t.min&&(n=Math.max(t.min,n)),null!=t.max&&(n=Math.min(t.max,n)),n}}},801:function(e,t,r){"use strict";var n=r(78);function o(e){var t=e.getBoundingClientRect();return{width:t.width,height:t.height,top:t.top,right:t.right,bottom:t.bottom,left:t.left,x:t.left,y:t.top}}function i(e){if(null==e)return window;if("[object Window]"!==e.toString()){var t=e.ownerDocument;return t&&t.defaultView||window}return e}function s(e){var t=i(e);return{scrollLeft:t.pageXOffset,scrollTop:t.pageYOffset}}function a(e){return e instanceof i(e).Element||e instanceof Element}function l(e){return e instanceof i(e).HTMLElement||e instanceof HTMLElement}function c(e){return"undefined"!==typeof ShadowRoot&&(e instanceof i(e).ShadowRoot||e instanceof ShadowRoot)}function u(e){return e?(e.nodeName||"").toLowerCase():null}function d(e){return((a(e)?e.ownerDocument:e.document)||window.document).documentElement}function h(e){return o(d(e)).left+s(e).scrollLeft}function p(e){return i(e).getComputedStyle(e)}function f(e){var t=p(e),r=t.overflow,n=t.overflowX,o=t.overflowY;return/auto|scroll|overlay|hidden/.test(r+o+n)}function b(e,t,r){void 0===r&&(r=!1);var n=d(t),a=o(e),c=l(t),p={scrollLeft:0,scrollTop:0},b={x:0,y:0};return(c||!c&&!r)&&(("body"!==u(t)||f(n))&&(p=function(e){return e!==i(e)&&l(e)?{scrollLeft:(t=e).scrollLeft,scrollTop:t.scrollTop}:s(e);var t}(t)),l(t)?((b=o(t)).x+=t.clientLeft,b.y+=t.clientTop):n&&(b.x=h(n))),{x:a.left+p.scrollLeft-b.x,y:a.top+p.scrollTop-b.y,width:a.width,height:a.height}}function m(e){var t=o(e),r=e.offsetWidth,n=e.offsetHeight;return Math.abs(t.width-r)<=1&&(r=t.width),Math.abs(t.height-n)<=1&&(n=t.height),{x:e.offsetLeft,y:e.offsetTop,width:r,height:n}}function g(e){return"html"===u(e)?e:e.assignedSlot||e.parentNode||(c(e)?e.host:null)||d(e)}function y(e){return["html","body","#document"].indexOf(u(e))>=0?e.ownerDocument.body:l(e)&&f(e)?e:y(g(e))}function v(e,t){var r;void 0===t&&(t=[]);var n=y(e),o=n===(null==(r=e.ownerDocument)?void 0:r.body),s=i(n),a=o?[s].concat(s.visualViewport||[],f(n)?n:[]):n,l=t.concat(a);return o?l:l.concat(v(g(a)))}function O(e){return["table","td","th"].indexOf(u(e))>=0}function j(e){return l(e)&&"fixed"!==p(e).position?e.offsetParent:null}function w(e){for(var t=i(e),r=j(e);r&&O(r)&&"static"===p(r).position;)r=j(r);return r&&("html"===u(r)||"body"===u(r)&&"static"===p(r).position)?t:r||function(e){var t=-1!==navigator.userAgent.toLowerCase().indexOf("firefox");if(-1!==navigator.userAgent.indexOf("Trident")&&l(e)&&"fixed"===p(e).position)return null;for(var r=g(e);l(r)&&["html","body"].indexOf(u(r))<0;){var n=p(r);if("none"!==n.transform||"none"!==n.perspective||"paint"===n.contain||-1!==["transform","perspective"].indexOf(n.willChange)||t&&"filter"===n.willChange||t&&n.filter&&"none"!==n.filter)return r;r=r.parentNode}return null}(e)||t}var _="top",k="bottom",S="right",x="left",E="auto",A=[_,k,S,x],T="start",I="end",C="viewport",M="popper",N=A.reduce((function(e,t){return e.concat([t+"-"+T,t+"-"+I])}),[]),P=[].concat(A,[E]).reduce((function(e,t){return e.concat([t,t+"-"+T,t+"-"+I])}),[]),L=["beforeRead","read","afterRead","beforeMain","main","afterMain","beforeWrite","write","afterWrite"];function D(e){var t=new Map,r=new Set,n=[];function o(e){r.add(e.name),[].concat(e.requires||[],e.requiresIfExists||[]).forEach((function(e){if(!r.has(e)){var n=t.get(e);n&&o(n)}})),n.push(e)}return e.forEach((function(e){t.set(e.name,e)})),e.forEach((function(e){r.has(e.name)||o(e)})),n}function B(e){var t;return function(){return t||(t=new Promise((function(r){Promise.resolve().then((function(){t=void 0,r(e())}))}))),t}}var U={placement:"bottom",modifiers:[],strategy:"absolute"};function R(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return!t.some((function(e){return!(e&&"function"===typeof e.getBoundingClientRect)}))}function F(e){void 0===e&&(e={});var t=e,r=t.defaultModifiers,n=void 0===r?[]:r,o=t.defaultOptions,i=void 0===o?U:o;return function(e,t,r){void 0===r&&(r=i);var o={placement:"bottom",orderedModifiers:[],options:Object.assign({},U,i),modifiersData:{},elements:{reference:e,popper:t},attributes:{},styles:{}},s=[],l=!1,c={state:o,setOptions:function(r){u(),o.options=Object.assign({},i,o.options,r),o.scrollParents={reference:a(e)?v(e):e.contextElement?v(e.contextElement):[],popper:v(t)};var l=function(e){var t=D(e);return L.reduce((function(e,r){return e.concat(t.filter((function(e){return e.phase===r})))}),[])}(function(e){var t=e.reduce((function(e,t){var r=e[t.name];return e[t.name]=r?Object.assign({},r,t,{options:Object.assign({},r.options,t.options),data:Object.assign({},r.data,t.data)}):t,e}),{});return Object.keys(t).map((function(e){return t[e]}))}([].concat(n,o.options.modifiers)));return o.orderedModifiers=l.filter((function(e){return e.enabled})),o.orderedModifiers.forEach((function(e){var t=e.name,r=e.options,n=void 0===r?{}:r,i=e.effect;if("function"===typeof i){var a=i({state:o,name:t,instance:c,options:n}),l=function(){};s.push(a||l)}})),c.update()},forceUpdate:function(){if(!l){var e=o.elements,t=e.reference,r=e.popper;if(R(t,r)){o.rects={reference:b(t,w(r),"fixed"===o.options.strategy),popper:m(r)},o.reset=!1,o.placement=o.options.placement,o.orderedModifiers.forEach((function(e){return o.modifiersData[e.name]=Object.assign({},e.data)}));for(var n=0;n<o.orderedModifiers.length;n++)if(!0!==o.reset){var i=o.orderedModifiers[n],s=i.fn,a=i.options,u=void 0===a?{}:a,d=i.name;"function"===typeof s&&(o=s({state:o,options:u,name:d,instance:c})||o)}else o.reset=!1,n=-1}}},update:B((function(){return new Promise((function(e){c.forceUpdate(),e(o)}))})),destroy:function(){u(),l=!0}};if(!R(e,t))return c;function u(){s.forEach((function(e){return e()})),s=[]}return c.setOptions(r).then((function(e){!l&&r.onFirstUpdate&&r.onFirstUpdate(e)})),c}}var q={passive:!0};var $={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:function(e){var t=e.state,r=e.instance,n=e.options,o=n.scroll,s=void 0===o||o,a=n.resize,l=void 0===a||a,c=i(t.elements.popper),u=[].concat(t.scrollParents.reference,t.scrollParents.popper);return s&&u.forEach((function(e){e.addEventListener("scroll",r.update,q)})),l&&c.addEventListener("resize",r.update,q),function(){s&&u.forEach((function(e){e.removeEventListener("scroll",r.update,q)})),l&&c.removeEventListener("resize",r.update,q)}},data:{}};function W(e){return e.split("-")[0]}function V(e){return e.split("-")[1]}function z(e){return["top","bottom"].indexOf(e)>=0?"x":"y"}function J(e){var t,r=e.reference,n=e.element,o=e.placement,i=o?W(o):null,s=o?V(o):null,a=r.x+r.width/2-n.width/2,l=r.y+r.height/2-n.height/2;switch(i){case _:t={x:a,y:r.y-n.height};break;case k:t={x:a,y:r.y+r.height};break;case S:t={x:r.x+r.width,y:l};break;case x:t={x:r.x-n.width,y:l};break;default:t={x:r.x,y:r.y}}var c=i?z(i):null;if(null!=c){var u="y"===c?"height":"width";switch(s){case T:t[c]=t[c]-(r[u]/2-n[u]/2);break;case I:t[c]=t[c]+(r[u]/2-n[u]/2)}}return t}var G={name:"popperOffsets",enabled:!0,phase:"read",fn:function(e){var t=e.state,r=e.name;t.modifiersData[r]=J({reference:t.rects.reference,element:t.rects.popper,strategy:"absolute",placement:t.placement})},data:{}},H=Math.max,Y=Math.min,K=Math.round,X={top:"auto",right:"auto",bottom:"auto",left:"auto"};function Z(e){var t,r=e.popper,n=e.popperRect,o=e.placement,s=e.offsets,a=e.position,l=e.gpuAcceleration,c=e.adaptive,u=e.roundOffsets,h=!0===u?function(e){var t=e.x,r=e.y,n=window.devicePixelRatio||1;return{x:K(K(t*n)/n)||0,y:K(K(r*n)/n)||0}}(s):"function"===typeof u?u(s):s,f=h.x,b=void 0===f?0:f,m=h.y,g=void 0===m?0:m,y=s.hasOwnProperty("x"),v=s.hasOwnProperty("y"),O=x,j=_,E=window;if(c){var A=w(r),T="clientHeight",I="clientWidth";A===i(r)&&"static"!==p(A=d(r)).position&&(T="scrollHeight",I="scrollWidth"),A=A,o===_&&(j=k,g-=A[T]-n.height,g*=l?1:-1),o===x&&(O=S,b-=A[I]-n.width,b*=l?1:-1)}var C,M=Object.assign({position:a},c&&X);return l?Object.assign({},M,((C={})[j]=v?"0":"",C[O]=y?"0":"",C.transform=(E.devicePixelRatio||1)<2?"translate("+b+"px, "+g+"px)":"translate3d("+b+"px, "+g+"px, 0)",C)):Object.assign({},M,((t={})[j]=v?g+"px":"",t[O]=y?b+"px":"",t.transform="",t))}var Q={left:"right",right:"left",bottom:"top",top:"bottom"};function ee(e){return e.replace(/left|right|bottom|top/g,(function(e){return Q[e]}))}var te={start:"end",end:"start"};function re(e){return e.replace(/start|end/g,(function(e){return te[e]}))}function ne(e,t){var r=t.getRootNode&&t.getRootNode();if(e.contains(t))return!0;if(r&&c(r)){var n=t;do{if(n&&e.isSameNode(n))return!0;n=n.parentNode||n.host}while(n)}return!1}function oe(e){return Object.assign({},e,{left:e.x,top:e.y,right:e.x+e.width,bottom:e.y+e.height})}function ie(e,t){return t===C?oe(function(e){var t=i(e),r=d(e),n=t.visualViewport,o=r.clientWidth,s=r.clientHeight,a=0,l=0;return n&&(o=n.width,s=n.height,/^((?!chrome|android).)*safari/i.test(navigator.userAgent)||(a=n.offsetLeft,l=n.offsetTop)),{width:o,height:s,x:a+h(e),y:l}}(e)):l(t)?function(e){var t=o(e);return t.top=t.top+e.clientTop,t.left=t.left+e.clientLeft,t.bottom=t.top+e.clientHeight,t.right=t.left+e.clientWidth,t.width=e.clientWidth,t.height=e.clientHeight,t.x=t.left,t.y=t.top,t}(t):oe(function(e){var t,r=d(e),n=s(e),o=null==(t=e.ownerDocument)?void 0:t.body,i=H(r.scrollWidth,r.clientWidth,o?o.scrollWidth:0,o?o.clientWidth:0),a=H(r.scrollHeight,r.clientHeight,o?o.scrollHeight:0,o?o.clientHeight:0),l=-n.scrollLeft+h(e),c=-n.scrollTop;return"rtl"===p(o||r).direction&&(l+=H(r.clientWidth,o?o.clientWidth:0)-i),{width:i,height:a,x:l,y:c}}(d(e)))}function se(e,t,r){var n="clippingParents"===t?function(e){var t=v(g(e)),r=["absolute","fixed"].indexOf(p(e).position)>=0&&l(e)?w(e):e;return a(r)?t.filter((function(e){return a(e)&&ne(e,r)&&"body"!==u(e)})):[]}(e):[].concat(t),o=[].concat(n,[r]),i=o[0],s=o.reduce((function(t,r){var n=ie(e,r);return t.top=H(n.top,t.top),t.right=Y(n.right,t.right),t.bottom=Y(n.bottom,t.bottom),t.left=H(n.left,t.left),t}),ie(e,i));return s.width=s.right-s.left,s.height=s.bottom-s.top,s.x=s.left,s.y=s.top,s}function ae(e){return Object.assign({},{top:0,right:0,bottom:0,left:0},e)}function le(e,t){return t.reduce((function(t,r){return t[r]=e,t}),{})}function ce(e,t){void 0===t&&(t={});var r=t,n=r.placement,i=void 0===n?e.placement:n,s=r.boundary,l=void 0===s?"clippingParents":s,c=r.rootBoundary,u=void 0===c?C:c,h=r.elementContext,p=void 0===h?M:h,f=r.altBoundary,b=void 0!==f&&f,m=r.padding,g=void 0===m?0:m,y=ae("number"!==typeof g?g:le(g,A)),v=p===M?"reference":M,O=e.elements.reference,j=e.rects.popper,w=e.elements[b?v:p],x=se(a(w)?w:w.contextElement||d(e.elements.popper),l,u),E=o(O),T=J({reference:E,element:j,strategy:"absolute",placement:i}),I=oe(Object.assign({},j,T)),N=p===M?I:E,P={top:x.top-N.top+y.top,bottom:N.bottom-x.bottom+y.bottom,left:x.left-N.left+y.left,right:N.right-x.right+y.right},L=e.modifiersData.offset;if(p===M&&L){var D=L[i];Object.keys(P).forEach((function(e){var t=[S,k].indexOf(e)>=0?1:-1,r=[_,k].indexOf(e)>=0?"y":"x";P[e]+=D[r]*t}))}return P}function ue(e,t,r){return H(e,Y(t,r))}function de(e,t,r){return void 0===r&&(r={x:0,y:0}),{top:e.top-t.height-r.y,right:e.right-t.width+r.x,bottom:e.bottom-t.height+r.y,left:e.left-t.width-r.x}}function he(e){return[_,S,k,x].some((function(t){return e[t]>=0}))}var pe=F({defaultModifiers:[$,G,{name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:function(e){var t=e.state,r=e.options,n=r.gpuAcceleration,o=void 0===n||n,i=r.adaptive,s=void 0===i||i,a=r.roundOffsets,l=void 0===a||a,c={placement:W(t.placement),popper:t.elements.popper,popperRect:t.rects.popper,gpuAcceleration:o};null!=t.modifiersData.popperOffsets&&(t.styles.popper=Object.assign({},t.styles.popper,Z(Object.assign({},c,{offsets:t.modifiersData.popperOffsets,position:t.options.strategy,adaptive:s,roundOffsets:l})))),null!=t.modifiersData.arrow&&(t.styles.arrow=Object.assign({},t.styles.arrow,Z(Object.assign({},c,{offsets:t.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:l})))),t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-placement":t.placement})},data:{}},{name:"applyStyles",enabled:!0,phase:"write",fn:function(e){var t=e.state;Object.keys(t.elements).forEach((function(e){var r=t.styles[e]||{},n=t.attributes[e]||{},o=t.elements[e];l(o)&&u(o)&&(Object.assign(o.style,r),Object.keys(n).forEach((function(e){var t=n[e];!1===t?o.removeAttribute(e):o.setAttribute(e,!0===t?"":t)})))}))},effect:function(e){var t=e.state,r={popper:{position:t.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(t.elements.popper.style,r.popper),t.styles=r,t.elements.arrow&&Object.assign(t.elements.arrow.style,r.arrow),function(){Object.keys(t.elements).forEach((function(e){var n=t.elements[e],o=t.attributes[e]||{},i=Object.keys(t.styles.hasOwnProperty(e)?t.styles[e]:r[e]).reduce((function(e,t){return e[t]="",e}),{});l(n)&&u(n)&&(Object.assign(n.style,i),Object.keys(o).forEach((function(e){n.removeAttribute(e)})))}))}},requires:["computeStyles"]},{name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:function(e){var t=e.state,r=e.options,n=e.name,o=r.offset,i=void 0===o?[0,0]:o,s=P.reduce((function(e,r){return e[r]=function(e,t,r){var n=W(e),o=[x,_].indexOf(n)>=0?-1:1,i="function"===typeof r?r(Object.assign({},t,{placement:e})):r,s=i[0],a=i[1];return s=s||0,a=(a||0)*o,[x,S].indexOf(n)>=0?{x:a,y:s}:{x:s,y:a}}(r,t.rects,i),e}),{}),a=s[t.placement],l=a.x,c=a.y;null!=t.modifiersData.popperOffsets&&(t.modifiersData.popperOffsets.x+=l,t.modifiersData.popperOffsets.y+=c),t.modifiersData[n]=s}},{name:"flip",enabled:!0,phase:"main",fn:function(e){var t=e.state,r=e.options,n=e.name;if(!t.modifiersData[n]._skip){for(var o=r.mainAxis,i=void 0===o||o,s=r.altAxis,a=void 0===s||s,l=r.fallbackPlacements,c=r.padding,u=r.boundary,d=r.rootBoundary,h=r.altBoundary,p=r.flipVariations,f=void 0===p||p,b=r.allowedAutoPlacements,m=t.options.placement,g=W(m),y=l||(g===m||!f?[ee(m)]:function(e){if(W(e)===E)return[];var t=ee(e);return[re(e),t,re(t)]}(m)),v=[m].concat(y).reduce((function(e,r){return e.concat(W(r)===E?function(e,t){void 0===t&&(t={});var r=t,n=r.placement,o=r.boundary,i=r.rootBoundary,s=r.padding,a=r.flipVariations,l=r.allowedAutoPlacements,c=void 0===l?P:l,u=V(n),d=u?a?N:N.filter((function(e){return V(e)===u})):A,h=d.filter((function(e){return c.indexOf(e)>=0}));0===h.length&&(h=d);var p=h.reduce((function(t,r){return t[r]=ce(e,{placement:r,boundary:o,rootBoundary:i,padding:s})[W(r)],t}),{});return Object.keys(p).sort((function(e,t){return p[e]-p[t]}))}(t,{placement:r,boundary:u,rootBoundary:d,padding:c,flipVariations:f,allowedAutoPlacements:b}):r)}),[]),O=t.rects.reference,j=t.rects.popper,w=new Map,I=!0,C=v[0],M=0;M<v.length;M++){var L=v[M],D=W(L),B=V(L)===T,U=[_,k].indexOf(D)>=0,R=U?"width":"height",F=ce(t,{placement:L,boundary:u,rootBoundary:d,altBoundary:h,padding:c}),q=U?B?S:x:B?k:_;O[R]>j[R]&&(q=ee(q));var $=ee(q),z=[];if(i&&z.push(F[D]<=0),a&&z.push(F[q]<=0,F[$]<=0),z.every((function(e){return e}))){C=L,I=!1;break}w.set(L,z)}if(I)for(var J=function(e){var t=v.find((function(t){var r=w.get(t);if(r)return r.slice(0,e).every((function(e){return e}))}));if(t)return C=t,"break"},G=f?3:1;G>0;G--){if("break"===J(G))break}t.placement!==C&&(t.modifiersData[n]._skip=!0,t.placement=C,t.reset=!0)}},requiresIfExists:["offset"],data:{_skip:!1}},{name:"preventOverflow",enabled:!0,phase:"main",fn:function(e){var t=e.state,r=e.options,n=e.name,o=r.mainAxis,i=void 0===o||o,s=r.altAxis,a=void 0!==s&&s,l=r.boundary,c=r.rootBoundary,u=r.altBoundary,d=r.padding,h=r.tether,p=void 0===h||h,f=r.tetherOffset,b=void 0===f?0:f,g=ce(t,{boundary:l,rootBoundary:c,padding:d,altBoundary:u}),y=W(t.placement),v=V(t.placement),O=!v,j=z(y),E="x"===j?"y":"x",A=t.modifiersData.popperOffsets,I=t.rects.reference,C=t.rects.popper,M="function"===typeof b?b(Object.assign({},t.rects,{placement:t.placement})):b,N={x:0,y:0};if(A){if(i||a){var P="y"===j?_:x,L="y"===j?k:S,D="y"===j?"height":"width",B=A[j],U=A[j]+g[P],R=A[j]-g[L],F=p?-C[D]/2:0,q=v===T?I[D]:C[D],$=v===T?-C[D]:-I[D],J=t.elements.arrow,G=p&&J?m(J):{width:0,height:0},K=t.modifiersData["arrow#persistent"]?t.modifiersData["arrow#persistent"].padding:{top:0,right:0,bottom:0,left:0},X=K[P],Z=K[L],Q=ue(0,I[D],G[D]),ee=O?I[D]/2-F-Q-X-M:q-Q-X-M,te=O?-I[D]/2+F+Q+Z+M:$+Q+Z+M,re=t.elements.arrow&&w(t.elements.arrow),ne=re?"y"===j?re.clientTop||0:re.clientLeft||0:0,oe=t.modifiersData.offset?t.modifiersData.offset[t.placement][j]:0,ie=A[j]+ee-oe-ne,se=A[j]+te-oe;if(i){var ae=ue(p?Y(U,ie):U,B,p?H(R,se):R);A[j]=ae,N[j]=ae-B}if(a){var le="x"===j?_:x,de="x"===j?k:S,he=A[E],pe=he+g[le],fe=he-g[de],be=ue(p?Y(pe,ie):pe,he,p?H(fe,se):fe);A[E]=be,N[E]=be-he}}t.modifiersData[n]=N}},requiresIfExists:["offset"]},{name:"arrow",enabled:!0,phase:"main",fn:function(e){var t,r=e.state,n=e.name,o=e.options,i=r.elements.arrow,s=r.modifiersData.popperOffsets,a=W(r.placement),l=z(a),c=[x,S].indexOf(a)>=0?"height":"width";if(i&&s){var u=function(e,t){return ae("number"!==typeof(e="function"===typeof e?e(Object.assign({},t.rects,{placement:t.placement})):e)?e:le(e,A))}(o.padding,r),d=m(i),h="y"===l?_:x,p="y"===l?k:S,f=r.rects.reference[c]+r.rects.reference[l]-s[l]-r.rects.popper[c],b=s[l]-r.rects.reference[l],g=w(i),y=g?"y"===l?g.clientHeight||0:g.clientWidth||0:0,v=f/2-b/2,O=u[h],j=y-d[c]-u[p],E=y/2-d[c]/2+v,T=ue(O,E,j),I=l;r.modifiersData[n]=((t={})[I]=T,t.centerOffset=T-E,t)}},effect:function(e){var t=e.state,r=e.options.element,n=void 0===r?"[data-popper-arrow]":r;null!=n&&("string"!==typeof n||(n=t.elements.popper.querySelector(n)))&&ne(t.elements.popper,n)&&(t.elements.arrow=n)},requires:["popperOffsets"],requiresIfExists:["preventOverflow"]},{name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:function(e){var t=e.state,r=e.name,n=t.rects.reference,o=t.rects.popper,i=t.modifiersData.preventOverflow,s=ce(t,{elementContext:"reference"}),a=ce(t,{altBoundary:!0}),l=de(s,n),c=de(a,o,i),u=he(l),d=he(c);t.modifiersData[r]={referenceClippingOffsets:l,popperEscapeOffsets:c,isReferenceHidden:u,hasPopperEscaped:d},t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-reference-hidden":u,"data-popper-escaped":d})}}]}),fe=r(464),be=r(82),me=r(108),ge=r(80),ye=(r(76),r(81),r(77),r(79)),ve=r(153),Oe=(r(105),r(122));const je=["bottom","bottom-start","bottom-end","left","left-start","left-end","right","right-start","right-end","top","top-start","top-end"],we="esri-popover",_e="esri-popover--open",ke={position:"fixed","z-index":"1000"};let Se=class extends ve.a{constructor(e,t){super(e,t),this._popper=null,this._contentNode=null,this._renderAttached=!1,this._rootNode=null,this.anchorElement=null,this.offset=[0,0],this.open=!1,this.renderContentFunction=null,this._afterRootCreate=e=>{this._rootNode=e},this._afterContentCreate=e=>{this._contentNode=e},this._updatePosition=()=>{Object(be.k)(this._popper)&&this._popper.update()}}initialize(){this.when((()=>{this._projector.append(document.body,this.render),this._renderAttached=!0})),this.own(Object(me.a)(this,["open","anchorElement"],(()=>this._buildPopper())),Object(me.a)(this,["placement","offset"],(()=>this._setPopperOptions())))}destroy(){this.owner=null,this.anchorElement=null,this.renderContentFunction=null,this._renderAttached&&(this._projector.detach(this.render),this._renderAttached=!1),Object(be.k)(this._rootNode)&&(Object(fe.d)(this._rootNode),this._rootNode=null),this._contentNode=null,Object(be.k)(this._popper)&&(this._popper.destroy(),this._popper=null)}set container(e){}set owner(e){this._set("owner",e)}get placement(){return"top"}set placement(e){-1!==je.indexOf(e)?this._override("placement",e):this._clearOverride("placement")}render(){const{open:e,owner:t,renderContentFunction:r}=this;return Object(Oe.a)("div",{afterCreate:this._afterRootCreate,class:this.classes(we,e?_e:null),styles:ke},Object(Oe.a)("div",{afterCreate:this._afterContentCreate,afterUpdate:this._updatePosition},e&&(null==r?void 0:r.call(t))))}_buildPopper(){Object(be.k)(this._popper)&&(this._popper.destroy(),this._popper=null);const e=this._contentNode;if(Object(be.j)(e))return;if(!this.open||!this.renderContentFunction)return;const t=this._getAnchor();t&&(this._popper=pe(t,e),this._setPopperOptions())}_setPopperOptions(){const{placement:e,offset:t,_popper:r}=this;Object(be.j)(r)||(r.setOptions({placement:e,modifiers:[{name:"offset",options:{offset:t}}]}),r.forceUpdate())}_getAnchor(){const{anchorElement:e}=this;return Object(fe.a)("function"==typeof e?e():e)}};Object(n.a)([Object(ge.b)()],Se.prototype,"anchorElement",void 0),Object(n.a)([Object(ge.b)()],Se.prototype,"container",null),Object(n.a)([Object(ge.b)()],Se.prototype,"offset",void 0),Object(n.a)([Object(ge.b)()],Se.prototype,"open",void 0),Object(n.a)([Object(ge.b)()],Se.prototype,"owner",null),Object(n.a)([Object(ge.b)()],Se.prototype,"placement",null),Object(n.a)([Object(ge.b)()],Se.prototype,"renderContentFunction",void 0),Se=Object(n.a)([Object(ye.a)("esri.widgets.support.Popover")],Se);var xe=Se;t.a=xe},805:function(e,t,r){"use strict";var n=r(78),o=r(176),i=r(151),s=r(82),a=r(108),l=r(141),c=(r(76),r(81),r(77),r(80)),u=r(79),d=r(153),h=r(90),p=r(107),f=r(708);let b=class extends h.a{constructor(e){super(e),this.items=null,this.open=!1}castItems(e){return e?e.map((e=>e instanceof f.a?e:new f.a(e))):null}};Object(n.a)([Object(c.b)()],b.prototype,"items",void 0),Object(n.a)([Object(p.a)("items")],b.prototype,"castItems",null),Object(n.a)([Object(c.b)()],b.prototype,"open",void 0),b=Object(n.a)([Object(u.a)("esri.widgets.FeatureTable.Grid.support.ButtonMenuViewModel")],b);var m=b,g=r(801),y=r(105),v=r(122);const O="esri-button-menu",j="esri-button-menu__content",w="esri-button-menu__item-wrapper",_="esri-button-menu__icon",k="esri-button-menu__item",S="esri-button-menu__item-label",x="esri-button-menu__item-label-content",E="esri-button-menu__item--selectable",A="esri-button-menu__item--selected",T="esri-button-menu__checkbox",I="esri-button-menu__embedded-content-wrapper",C="esri-button-menu__button",M="esri-button-menu__button--selected",N="esri-icon-menu",P="esri-widget";let L=class extends(Object(i.b)(d.a)){constructor(e,t){super(e,t),this._menuContentNode=null,this._popover=null,this._rootNode=null,this.iconClass=null,this.items=null,this.label=null,this.open=!1,this.viewModel=new m,this._handleOutsideClick=this._handleOutsideClick.bind(this)}postInitialize(){this._popover=new g.a({owner:this,open:!!this.open,placement:Object(y.h)()?"bottom-start":"bottom-end",renderContentFunction:this.renderMenuContent,anchorElement:this._rootNode}),this.handles.add([Object(a.d)(this,"open",(e=>this._popover.set("open",e)))]),document.addEventListener("click",this._handleOutsideClick)}destroy(){var e;null==(e=this._popover)||e.destroy(),this._popover=null,document.removeEventListener("click",this._handleOutsideClick)}_handleOutsideClick(e){var t,r;if(!this.open||!this._rootNode||!this._menuContentNode)return;const n=e.target;null!=(t=this._menuContentNode)&&t.contains(n)||null!=(r=this._rootNode)&&r.contains(n)||(this.open=!1)}render(){return Object(v.a)("div",{afterCreate:this._afterRootNodeCreate,bind:this,"data-node-ref":"_rootNode",class:this.classes(O,P),key:"menu"},this.renderMenuButton())}renderMenuButton(){const{iconClass:e,id:t,label:r,open:n}=this,o=this.classes([C,e||N,n?M:null]);return Object(v.a)("button",{"aria-pressed":n.toString(),"aria-controls":`${t}-menu`,"aria-expanded":n.toString(),"aria-haspopup":"true","aria-label":r,bind:this,class:o,id:`${t}-button`,title:r,selected:n,onclick:this._toggleOpen,tabindex:"0",type:"button"})}renderMenuContent(){var e;const{id:t,open:r}=this;return Object(v.a)("div",{afterCreate:this._afterMenuContentNodeCreate,bind:this,class:j,"data-node-ref":"_menuContentNode",key:"esri-button-menu-content",hidden:!r},Object(v.a)("ul",{"aria-labelledby":`${t}-button`,bind:this,class:w,id:`${t}-menu`,role:"menu"},(null==(e=this.items)?void 0:e.length)&&this.renderItems()))}renderItems(){var e;return null==(e=this.items)?void 0:e.map(((e,t)=>this.renderItem(e,t)))}renderItem(e,t,r){var n;const o=Object(s.k)(r)?`${this.id}-menu-item-${t}-${r}`:`${this.id}-menu-item-${t}`,i=`${o}-label`,a=this.classes(k,e.selectionEnabled?E:null,e.selectionEnabled&&e.selected?A:null);return Object(v.a)("li",{afterCreate:this._afterMenuItemCreate,bind:this,class:a,"data-item-index":t,"data-item-subIndex":r,for:o,key:o,onkeydown:t=>this._handleMenuItemKeydown(t,e),onclick:t=>this._handleMenuItemInteraction(t,e),role:"menuitem",tabindex:"0"},Object(v.a)("input",{disabled:!0,checked:e.selected,class:T,id:o,name:o,tabindex:"-1",type:"checkbox"}),Object(v.a)("label",{bind:this,class:this.classes(C,S),for:o,id:i},Object(v.a)("span",{class:this.classes(_,e.iconClass),"aria-hidden":"true"}),Object(v.a)("span",{class:x},e.label)),Object(v.a)("ul",{"aria-labelledby":i,class:I,id:`${this.id}-submenu`,role:"menu"},null==e||null==(n=e.items)?void 0:n.map(((e,r)=>this.renderItem(e,t,r)))))}_afterRootNodeCreate(e){var t;this._rootNode=e,null==(t=this._popover)||t.set("anchorElement",(()=>e))}_handleMenuItemInteraction(e,t){t.selected=!t.selected,t.open=!(!t.selected||!t.items),t.autoCloseMenu&&this.set("open",!1),t.clickFunction&&t.clickFunction({event:e,item:t}),e.stopPropagation()}_handleMenuItemKeydown(e,t){const r=Object(o.a)(e);Object(y.f)(r)&&this._handleMenuItemInteraction(e,t),"Escape"===r&&(this.open=!1,e.preventDefault(),e.stopPropagation())}_afterMenuContentNodeCreate(e){this._menuContentNode=e,e.focus()}_toggleOpen(){this.open=!this.open}_afterMenuItemCreate(e){0===e["data-item-index"]&&e.focus()}};Object(n.a)([Object(c.b)()],L.prototype,"iconClass",void 0),Object(n.a)([Object(l.a)("viewModel.items")],L.prototype,"items",void 0),Object(n.a)([Object(c.b)()],L.prototype,"label",void 0),Object(n.a)([Object(l.a)("viewModel.open")],L.prototype,"open",void 0),Object(n.a)([Object(c.b)()],L.prototype,"viewModel",void 0),L=Object(n.a)([Object(u.a)("esri.widgets.FeatureTable.Grid.support.ButtonMenu")],L);var D=L;t.a=D},808:function(e,t,r){"use strict";var n,o=r(78),i=r(103),s=r(83),a=r(85),l=r(80),c=(r(81),r(76),r(77),r(79));let u=n=class extends s.a{constructor(e){super(e),this.color=new i.a([0,0,0,1])}clone(){return new n(Object(a.a)({color:this.color}))}};Object(o.a)([Object(l.b)({type:i.a,json:{write:!0}})],u.prototype,"color",void 0),u=n=Object(o.a)([Object(c.a)("esri.webmap.background.ColorBackground")],u);var d=u;t.a=d},81:function(e,t,r){"use strict";r.d(t,"a",(function(){return x})),r.d(t,"b",(function(){return v})),r.d(t,"c",(function(){return y})),r.d(t,"d",(function(){return f})),r.d(t,"e",(function(){return l})),r.d(t,"f",(function(){return T})),r.d(t,"g",(function(){return w})),r.d(t,"h",(function(){return j})),r.d(t,"i",(function(){return a})),r.d(t,"j",(function(){return k})),r.d(t,"k",(function(){return S})),r.d(t,"l",(function(){return s})),r.d(t,"m",(function(){return g})),r.d(t,"n",(function(){return A})),r.d(t,"o",(function(){return _})),r.d(t,"p",(function(){return E}));r(76);const n=r(77).a.getLogger("esri.core.Accessor");function o(e){return null==e?e:new Date(e)}function i(e){return null==e?e:!!e}function s(e){return null==e?e:e.toString()}function a(e){return null==e?e:(e=parseFloat(e),isNaN(e)?0:e)}function l(e){return null==e?e:Math.round(parseFloat(e))}function c(e){return e&&e.constructor&&void 0!==e.constructor.__accessorMetadata__}function u(e,t){return null!=t&&e&&!(t instanceof e)}function d(e){return e&&"isCollection"in e}function h(e){return e&&e.Type?"function"==typeof e.Type?e.Type:e.Type.base:null}function p(e,t){return!!c(t)&&(n.error("Accessor#set","Assigning an instance of '"+(t.declaredClass||"unknown")+"' which is not a subclass of '"+b(e)+"'"),!0)}function f(e,t){return null==t?t:d(e)?function(e,t){if(!t||!t.constructor||!d(t.constructor))return p(e,t)?t:new e(t);const r=h(e.prototype.itemType),n=h(t.constructor.prototype.itemType);return r?n?r===n?t:r.prototype.isPrototypeOf(n.prototype)?new e(t):(p(e,t),t):new e(t):t}(e,t):u(e,t)?p(e,t)?t:new e(t):t}function b(e){return e&&e.prototype&&e.prototype.declaredClass||"unknown"}function m(e){switch(e){case Number:return a;case x:return l;case Boolean:return i;case String:return s;case Date:return o;default:return f.bind(null,e)}}function g(e,t){const r=m(e);return 1===arguments.length?r:r(t)}function y(e,t,r){return 1===arguments.length?y.bind(null,e):t?Array.isArray(t)?t.map((t=>e(t,r))):[e(t,r)]:t}function v(e,t){return 1===arguments.length?y(g.bind(null,e)):y(g.bind(null,e),t)}function O(e,t,r){return 0!==t&&Array.isArray(r)?r.map((r=>O(e,t-1,r))):e(r)}function j(e,t,r){if(2===arguments.length)return j.bind(null,e,t);if(!r)return r;let n=t,o=r=O(e,t,r);for(;n>0&&Array.isArray(o);)n--,o=o[0];if(void 0!==o)for(let i=0;i<n;i++)r=[r];return r}function w(e,t,r){return 2===arguments.length?j(g.bind(null,e),t):j(g.bind(null,e),t,r)}function _(e){return!!Array.isArray(e)&&!e.some((t=>{const r=typeof t;return!("string"===r||"number"===r||"function"===r&&e.length>1)}))}function k(e,t){if(2===arguments.length)return k(e).call(null,t);const r=new Set,o=e.filter((e=>"function"!=typeof e)),i=e.filter((e=>"function"==typeof e));for(const n of e)"string"!=typeof n&&"number"!=typeof n||r.add(n);let s=null,a=null;return(e,t)=>{if(null==e)return e;const l=typeof e,c="string"===l||"number"===l;return c&&(r.has(e)||i.some((e=>"string"===l&&e===String||"number"===l&&e===Number)))||"object"===l&&i.some((t=>!u(e,t)))?e:(c&&o.length?(s||(s=o.map((e=>"string"==typeof e?`'${e}'`:`${e}`)).join(", ")),n.error("Accessor#set",`'${e}' is not a valid value for this property, only the following values are valid: ${s}`)):"object"==typeof e&&i.length?(a||(a=i.map((e=>b(e))).join(", ")),n.error("Accessor#set",`'${e}' is not a valid value for this property, value must be one of ${a}`)):n.error("Accessor#set",`'${e}' is not a valid value for this property`),t&&(t.valid=!1),null)}}function S(e,t){if(2===arguments.length)return S(e).call(null,t);const r={},o=[],i=[];for(const n in e.typeMap){const t=e.typeMap[n];r[n]=g(t),o.push(b(t)),i.push(n)}const s=()=>`'${o.join("', '")}'`,a=()=>`'${i.join("', '")}'`,l="string"==typeof e.key?t=>t[e.key]:e.key;return t=>{if(e.base&&!u(e.base,t))return t;if(null==t)return t;const o=l(t)||e.defaultKeyValue,i=r[o];if(!i)return n.error("Accessor#set",`Invalid property value, value needs to be one of ${s()}, or a plain object that can autocast (having .type = ${a()})`),null;if(!u(e.typeMap[o],t))return t;if("string"==typeof e.key&&!c(t)){const r={};for(const n in t)n!==e.key&&(r[n]=t[n]);return i(r)}return i(t)}}class x{}const E={native:e=>({type:"native",value:e}),array:e=>({type:"array",value:e}),oneOf:e=>({type:"one-of",values:e})};function A(e){if(!e||!("type"in e))return!1;switch(e.type){case"native":case"array":case"one-of":return!0}return!1}function T(e){switch(e.type){case"native":return g(e.value);case"array":return y(T(e.value));case"one-of":return function(e){let t=null;return(r,o)=>C(r,e)?r:(null==t&&(t=I(e)),n.error("Accessor#set",`Invalid property value, value needs to be of type ${t}`),o&&(o.valid=!1),null)}(e);default:return null}}function I(e){switch(e.type){case"native":switch(e.value){case Number:return"number";case String:return"string";case Boolean:return"boolean";case x:return"integer";case Date:return"date";default:return b(e.value)}case"array":return`array of ${I(e.value)}`;case"one-of":{const t=e.values.map((e=>I(e)));return`one of ${t.slice(0,t.length-1)} or ${t[t.length-1]}`}}return"unknown"}function C(e,t){if(null==e)return!0;switch(t.type){case"native":switch(t.value){case Number:case x:return"number"==typeof e;case Boolean:return"boolean"==typeof e;case String:return"string"==typeof e}return e instanceof t.value;case"array":return!!Array.isArray(e)&&!e.some((e=>!C(e,t.value)));case"one-of":return t.values.some((t=>C(e,t)))}}},82:function(e,t,r){"use strict";r.d(t,"a",(function(){return f})),r.d(t,"b",(function(){return O})),r.d(t,"c",(function(){return a})),r.d(t,"d",(function(){return _})),r.d(t,"e",(function(){return d})),r.d(t,"f",(function(){return h})),r.d(t,"g",(function(){return j})),r.d(t,"h",(function(){return y})),r.d(t,"i",(function(){return w})),r.d(t,"j",(function(){return i})),r.d(t,"k",(function(){return o})),r.d(t,"l",(function(){return s})),r.d(t,"m",(function(){return g})),r.d(t,"n",(function(){return v})),r.d(t,"o",(function(){return n})),r.d(t,"p",(function(){return m})),r.d(t,"q",(function(){return b})),r.d(t,"r",(function(){return p})),r.d(t,"s",(function(){return l})),r.d(t,"t",(function(){return u})),r.d(t,"u",(function(){return c}));const n=null;function o(e){return null!=e}function i(e){return null==e}function s(e){return void 0===e}function a(e,t){return o(e)?t(e):n}function l(e){return e}function c(e,t){if(i(e))throw new Error(t);return e}function u(e,t){return o(e)?e:"function"==typeof t?t():t}function d(e){return o(e)&&e.destroy(),null}function h(e){return o(e)&&e.dispose(),null}function p(e){return o(e)&&e.remove(),null}function f(e){return o(e)&&e.abort(),null}function b(e){return o(e)&&e.release(),null}function m(e){return null}function g(e,t){const r=new Array;for(const n of e)r.push(v(n,null,t));return r}function y(e,t){for(const r of e)v(r,null,t)}function v(e,t,r){return o(e)?r(e):t}function O(e,t){return o(e)?t(e):null}function j(e){return e.filter((e=>o(e)))}function w(e,...t){let r=e;for(let n=0;n<t.length&&r;++n)r=r[t[n]];return r}function _(e){return e}},84:function(e,t,r){"use strict";var n=r(85),o=r(77),i=r(379);class s extends i.a{constructor(e,t,r){if(super(e,t,r),!(this instanceof s))return new s(e,t,r)}toJSON(){if(null!=this.details)try{return{name:this.name,message:this.message,details:JSON.parse(JSON.stringify(this.details,((e,t)=>{if(t&&"object"==typeof t&&"function"==typeof t.toJSON)return t;try{return Object(n.a)(t)}catch(s){return"[object]"}})))}}catch(e){throw o.a.getLogger("esri.core.Error").error(e),e}return{name:this.name,message:this.message,details:this.details}}static fromJSON(e){return new s(e.name,e.message,e.details)}}s.prototype.type="error",t.a=s},85:function(e,t,r){"use strict";r.d(t,"a",(function(){return i})),r.d(t,"b",(function(){return s})),r.d(t,"c",(function(){return o}));r(76);var n=r(307);function o(e,t){let r;if(t)for(r in e)e.hasOwnProperty(r)&&(void 0===e[r]?delete e[r]:e[r]instanceof Object&&o(e[r],!0));else for(r in e)e.hasOwnProperty(r)&&void 0===e[r]&&delete e[r];return e}function i(e){if(!e||"object"!=typeof e||"function"==typeof e)return e;if(Object(n.h)(e)||Object(n.k)(e)||Object(n.l)(e)||Object(n.f)(e)||Object(n.i)(e)||Object(n.g)(e)||Object(n.j)(e)||Object(n.d)(e)||Object(n.e)(e))return Object(n.m)(e);if(e instanceof Date)return new Date(e.getTime());if(e instanceof ArrayBuffer)return e.slice(0,e.byteLength);if(e instanceof Map){const t=new Map;return e.forEach(((e,r)=>{t.set(r,i(e))})),t}if(e instanceof Set){const t=new Set;return e.forEach((e=>{t.add(i(e))})),t}let t;const r=e;if("function"==typeof r.clone)t=r.clone();else if("function"==typeof r.map&&"function"==typeof r.forEach)t=r.map(i);else if("function"==typeof r.notifyChange&&"function"==typeof r.watch)t=r.clone();else{t={};for(const r of Object.getOwnPropertyNames(e))t[r]=i(e[r])}return t}function s(e,t){return e===t||"number"==typeof e&&isNaN(e)&&"number"==typeof t&&isNaN(t)||"function"==typeof(e||{}).getTime&&"function"==typeof(t||{}).getTime&&e.getTime()===t.getTime()||!1}},86:function(e,t,r){"use strict";r.d(t,"a",(function(){return x})),r.d(t,"b",(function(){return a})),r.d(t,"c",(function(){return l})),r.d(t,"d",(function(){return u})),r.d(t,"e",(function(){return c})),r.d(t,"f",(function(){return j})),r.d(t,"g",(function(){return C})),r.d(t,"h",(function(){return M})),r.d(t,"i",(function(){return I})),r.d(t,"j",(function(){return w})),r.d(t,"k",(function(){return _})),r.d(t,"l",(function(){return O})),r.d(t,"m",(function(){return v})),r.d(t,"n",(function(){return p})),r.d(t,"o",(function(){return T})),r.d(t,"p",(function(){return E})),r.d(t,"q",(function(){return m})),r.d(t,"r",(function(){return g})),r.d(t,"s",(function(){return k})),r.d(t,"t",(function(){return S})),r.d(t,"u",(function(){return f})),r.d(t,"v",(function(){return d})),r.d(t,"w",(function(){return b})),r.d(t,"x",(function(){return A})),r.d(t,"y",(function(){return y}));var n=r(463),o=r(84),i=r(176),s=(r(77),r(82));function a(e){return Promise.all(e)}function l(e){return new Promise(((t,r)=>{try{e(t,r)}catch(n){Promise.resolve().then((()=>r(n)))}}))}function c(e="Aborted"){return new o.a("AbortError",e)}function u(){return new AbortController}function d(e,t="Aborted"){if(p(e))throw c(t)}function h(e){return Object(s.k)(e)?"aborted"in e?e:e.signal:e}function p(e){const t=h(e);return Object(s.k)(t)&&t.aborted}function f(e){if(v(e))throw e}function b(e){if(!v(e))throw e}function m(e,t){const r=h(e);if(!Object(s.j)(r)){if(!r.aborted)return Object(i.d)(r,"abort",(()=>t()));t()}}function g(e,t){const r=h(e);if(!Object(s.j)(r))return d(r),Object(i.d)(r,"abort",(()=>t(c())))}function y(e,t){const r=h(t);return Object(s.j)(r)?e:new Promise(((r,n)=>{let o=m(t,(()=>n(c())));const i=()=>o=Object(s.r)(o);e.then(i,i),e.then(r,n)}))}function v(e){return e&&"AbortError"===e.name}function O(e){return e.catch((e=>{if(!v(e))throw e}))}function j(){let e=null;const t=new Promise(((t,r)=>{e={promise:void 0,resolve:t,reject:r}}));return e.promise=t,e}function w(e){if(!e)return;if("function"!=typeof e.forEach){const t=Object.keys(e);return w(t.map((t=>e[t]))).then((e=>{const r={};return t.forEach(((t,n)=>r[t]=e[n])),r}))}const t=e;return l((e=>{const r=[];let n=t.length;0===n&&e(r),t.forEach((t=>{const o={promise:t||Promise.resolve(t)};r.push(o),o.promise.then((e=>{o.value=e})).catch((e=>{o.error=e})).then((()=>{--n,0===n&&e(r)}))}))}))}function _(e){return w(e).then((e=>e.filter((e=>!!e.value)).map((e=>e.value))))}function k(e){return Promise.reject(e)}function S(e){return Promise.resolve(e)}function x(e,t,r){const n=u();return m(r,(()=>n.abort())),new Promise(((r,o)=>{let i=setTimeout((()=>{i=0,r(t)}),e);m(n,(()=>{i&&(clearTimeout(i),o(c()))}))}))}function E(e){return e&&"function"==typeof e.then}function A(e){return T(e)?e:Promise.resolve(e)}function T(e){return e&&"object"==typeof e&&"then"in e&&"function"==typeof e.then}function I(e,t=-1){let r,n,o,i,a=null;const l=(...d)=>{if(r){n=d,i&&i.reject(c()),i=j();const e=Object(s.d)(i.promise);if(a){const e=a;a=null,e.abort()}return e}if(o=i||j(),i=null,t>0){const n=u();r=A(e(...d,n.signal));const o=r;x(t).then((()=>{r===o&&(i?n.abort():a=n)}))}else r=1,r=A(e(...d));const h=()=>{const e=n;n=o=r=a=null,null!=e&&l(...e)},p=r,f=o;return p.then(h,h),p.then(f.resolve,f.reject),Object(s.d)(f.promise)};return l}function C(){let e,t;const r=new Promise(((r,n)=>{e=r,t=n})),o=t=>{e(t)};return o.resolve=t=>e(t),o.reject=e=>t(e),o.timeout=(e,t)=>n.a.setTimeout((()=>o.reject(t)),e),o.promise=r,o}function M(e){let t=u();const r=e(t.signal);let n={promise:r,finished:!1,abort:()=>{t&&(t.abort(),t=null)}};const o=()=>{n&&(n.finished=!0,n=null),t=null};return r.then(o,o),n}},863:function(e,t,r){"use strict";var n,o=r(78),i=r(83),s=r(80),a=(r(76),r(81),r(77),r(79));let l=n=class extends i.a{constructor(){super(...arguments),this.url=""}destroy(){this.url=""}clone(){return new n({url:this.url})}};Object(o.a)([Object(s.b)({type:String,json:{write:{isRequired:!0}}})],l.prototype,"url",void 0),l=n=Object(o.a)([Object(a.a)("esri.webdoc.support.Thumbnail")],l);var c=l;t.a=c},87:function(e,t,r){"use strict";r.d(t,"a",(function(){return o})),r.d(t,"b",(function(){return i}));var n=r(116);class o{constructor(e,t={ignoreUnknown:!1}){this.jsonToAPI=e,this.options=t,this.apiValues=[],this.jsonValues=[],this.apiToJSON=this.invertMap(e),this.apiValues=this.getKeysSorted(this.apiToJSON),this.jsonValues=this.getKeysSorted(this.jsonToAPI),this.read=e=>this.fromJSON(e),this.write=(e,t,r)=>{const o=this.toJSON(e);void 0!==o&&Object(n.c)(r,o,t)},this.write.isJSONMapWriter=!0}toJSON(e){return this.apiToJSON.hasOwnProperty(e)?this.apiToJSON[e]:this.options.ignoreUnknown?void 0:e}fromJSON(e){return this.jsonToAPI.hasOwnProperty(e)?this.jsonToAPI[e]:this.options.ignoreUnknown?void 0:e}invertMap(e){const t={};for(const r in e)t[e[r]]=r;return t}getKeysSorted(e){const t=[];for(const r in e)t.push(r);return t.sort(),t}}function i(){return function(e){return new o(e,{ignoreUnknown:!0})}}},90:function(e,t,r){"use strict";var n=r(285),o=r(77),i=r(186),s=r(222),a=(r(76),r(85)),l=r(181),c=r(214),u=r(349);class d{constructor(e,t,r){this.properties=e,this.propertyName=t,this.metadata=r,this._observers=null,this._accessed=null,this._handles=null,this.flags=1|(r.nonNullable?8:0)|(r.hasOwnProperty("value")?16:0)|(void 0===r.get?32:0)|(void 0===r.dependsOn?64:0)}destroy(){this._accessed=null,this._observers=null,this._clearObservationHandles()}getComputed(){Object(c.c)(this);const e=this.properties.store,t=this.propertyName,r=this.flags,n=e.get(t);if(4&r)return n;if(1&~r&&e.has(t))return n;this.flags|=4;const o=this.properties.host;let i;64&r?i=Object(c.b)(this,this.metadata.get,o):(Object(c.d)(o,this),i=this.metadata.get.call(o)),e.set(t,i,1);const s=e.get(t);return s===n?this.flags&=-2:this.commit(),this.flags&=-5,s}onObservableAccessed(e){e!==this&&(null===this._accessed&&(this._accessed=[]),this._accessed.includes(e)||this._accessed.push(e))}onTrackingEnd(){this._clearObservationHandles(),this.flags|=32;const e=this._accessed;if(null===e)return;let t=this._handles;null===t&&(t=this._handles=[]);for(let r=0;r<e.length;++r)t.push(e[r].observe(this));e.length=0}observe(e){return null===this._observers&&(this._observers=[]),this._observers.includes(e)||this._observers.push(e),new u.a(this._observers,e)}notifyChange(){this.onInvalidated(),this.onCommitted()}invalidate(){this.onInvalidated()}onInvalidated(){2&~this.flags&&(this.flags|=1);const e=this._observers;if(null!==e)for(let t=0;t<e.length;++t)e[t].onInvalidated()}commit(){this.flags&=-2,this.onCommitted()}onCommitted(){if(null===this._observers)return;const e=this._observers.slice();for(let t=0;t<e.length;++t)e[t].onCommitted()}_clearObservationHandles(){const e=this._handles;if(null!==e){for(let t=0;t<e.length;++t)e[t].remove();e.length=0}}}var h=r(230);class p{constructor(){this._values=new Map}clone(e){const t=new p;return this._values.forEach(((r,n)=>{e&&e.has(n)||t.set(n,Object(a.a)(r))})),t}get(e){return this._values.get(e)}originOf(){return 6}keys(){return[...this._values.keys()]}set(e,t){this._values.set(e,t)}delete(e){this._values.delete(e)}has(e){return this._values.has(e)}forEach(e){this._values.forEach(e)}}var f=r(129);function b(e,t,r){return void 0!==e}function m(e,t,r,n){return void 0!==e&&(!(null==r&&8&e.flags)||(n.lifecycle,!1))}function g(e){return e&&"function"==typeof e.destroy}o.a.getLogger("esri.core.accessorSupport.Properties");const y=new l.a(class{constructor(){this.value=null,this.valid=!0}acquire(){this.valid=!0}release(){this.value=null}});var v=class{constructor(e){this.host=e,this.properties=new Map,this.ctorArgs=null,this.destroyed=!1,this.lifecycle=0,this.store=new p,this._origin=6;const t=this.host.constructor.__accessorMetadata__,r=t.properties;for(const n in r){const e=new d(this,n,r[n]);this.properties.set(n,e)}this.metadatas=r,this._autoDestroy=t.autoDestroy}initialize(){this.lifecycle=1}constructed(){this.lifecycle=2}destroy(){if(this.destroyed=!0,this._autoDestroy)for(const[e,t]of this.properties){const r=this.internalGet(e);r&&g(r)&&(r.destroy(),8&~t.flags&&this._internalSet(t,null)),t.destroy()}else for(const[e,t]of this.properties)t.destroy()}get initialized(){return 0!==this.lifecycle}get(e){const t=this.properties.get(e);if(t.metadata.get)return t.getComputed();Object(c.c)(t);const r=this.store;return r.has(e)?r.get(e):t.metadata.value}originOf(e){const t=this.store.originOf(e);if(void 0===t){const t=this.properties.get(e);if(void 0!==t&&16&t.flags)return"defaults"}return Object(h.b)(t)}has(e){return!!this.properties.has(e)&&this.store.has(e)}keys(){return[...this.properties.keys()]}internalGet(e){const t=this.properties.get(e);if(b(t))return this.store.has(e)?this.store.get(e):t.metadata.value}internalSet(e,t){const r=this.properties.get(e);b(r)&&this._internalSet(r,t)}getDependsInfo(e,t,r){const n=this.properties.get(t);if(!b(n))return"";const o=new Set,i=Object(c.b)({onObservableAccessed:e=>o.add(e),onTrackingEnd:()=>{}},(()=>{var t;return null==(t=n.metadata.get)?void 0:t.call(e)}));let s=`${r}${e.declaredClass.split(".").pop()}.${t}: ${i}\n`;if(0===o.size)return s;r+="  ";for(const a of o){if(!(a instanceof d))continue;const e=a.properties.host,t=a.propertyName,n=Object(f.a)(e);s+=n?n.getDependsInfo(e,t,r):`${r}${t}: undefined\n`}return s}setAtOrigin(e,t,r){const n=this.properties.get(e);if(b(n))return this._setAtOrigin(n,t,r)}isOverridden(e){const t=this.properties.get(e);return void 0!==t&&!!(2&t.flags)}clearOverride(e){const t=this.properties.get(e);void 0!==t&&2&t.flags&&(t.flags&=-3,t.notifyChange())}override(e,t){const r=this.properties.get(e);if(!m(r,0,t,this))return;const n=r.metadata.cast;if(n){const e=this._cast(n,t),{valid:r,value:o}=e;if(y.release(e),!r)return;t=o}r.flags|=2,this._internalSet(r,t)}set(e,t){const r=this.properties.get(e);if(!m(r,0,t,this))return;const n=r.metadata.cast;if(n){const e=this._cast(n,t),{valid:r,value:o}=e;if(y.release(e),!r)return;t=o}const o=r.metadata.set;o?o.call(this.host,t):this._internalSet(r,t)}setDefaultOrigin(e){this._origin=Object(h.d)(e)}getDefaultOrigin(){return Object(h.b)(this._origin)}notifyChange(e){const t=this.properties.get(e);void 0!==t&&t.notifyChange()}invalidate(e){const t=this.properties.get(e);void 0!==t&&t.invalidate()}commit(e){const t=this.properties.get(e);void 0!==t&&t.commit()}_internalSet(e,t){const r=0!==this.lifecycle?this._origin:0;this._setAtOrigin(e,t,r)}_setAtOrigin(e,t,r){const n=this.store,o=e.propertyName;n.has(o,r)&&Object(a.b)(t,n.get(o))&&2&~e.flags&&r===n.originOf(o)||(e.invalidate(),n.set(o,t,r),e.commit(),Object(c.a)(this.host,e))}_cast(e,t){const r=y.acquire();return r.valid=!0,r.value=t,e&&(r.value=e.call(this.host,t,r)),r}},O=r(350),j=r(443),w=r(80),_=r(79);function k(e){if(null==e)return{value:e};if(Array.isArray(e))return{type:[e[0]],value:null};switch(typeof e){case"object":return e.constructor&&e.constructor.__accessorMetadata__||e instanceof Date?{type:e.constructor,value:e}:e;case"boolean":return{type:Boolean,value:e};case"string":return{type:String,value:e};case"number":return{type:Number,value:e};case"function":return{type:e,value:null};default:return}}class S{constructor(...e){if(this.constructor===S)throw new Error("[accessor] cannot instantiate Accessor. This can be fixed by creating a subclass of Accessor");Object.defineProperty(this,"__accessor__",{enumerable:!1,value:new v(this)}),e.length>0&&this.normalizeCtorArgs&&(this.__accessor__.ctorArgs=this.normalizeCtorArgs.apply(this,e))}static createSubclass(e={}){if(Array.isArray(e))throw new Error("Multi-inheritance unsupported since 4.16");const{properties:t,declaredClass:r,constructor:n}=e;delete e.declaredClass,delete e.properties,delete e.constructor;const o=this;class i extends o{constructor(...e){super(...e),this.inherited=null,n&&n.apply(this,e)}}Object(s.a)(i.prototype);for(const s in e){const t=e[s];i.prototype[s]="function"==typeof t?function(...e){const r=this.inherited;let n;this.inherited=function(...e){if(o.prototype[s])return o.prototype[s].apply(this,e)};try{n=t.apply(this,e)}catch(i){throw this.inherited=r,i}return this.inherited=r,n}:e[s]}for(const s in t){const e=k(t[s]);Object(w.b)(e)(i.prototype,s)}return Object(_.a)(r)(i)}postscript(e){const t=this.__accessor__,r=t.ctorArgs||e;t.initialize(),r&&(this.set(r),t.ctorArgs=null),t.constructed(),this.initialize()}initialize(){}destroy(){this.destroyed||(Object(j.c)(this),this.__accessor__.destroy())}get initialized(){return this.__accessor__&&this.__accessor__.initialized||!1}get constructed(){return this.__accessor__&&2===this.__accessor__.lifecycle||!1}get destroyed(){return this.__accessor__&&this.__accessor__.destroyed||!1}commitProperty(e){this.get(e)}get(e){return Object(i.b)(this,e)}hasOwnProperty(e){return this.__accessor__?this.__accessor__.has(e):Object.prototype.hasOwnProperty.call(this,e)}isInstanceOf(e){return Object(n.b)(o.a.getLogger(this.declaredClass),"isInstanceOf",{replacement:"Use instanceof directly",version:"4.16"}),this instanceof e}keys(){return this.__accessor__?this.__accessor__.keys():[]}set(e,t){return Object(O.a)(this,e,t),this}watch(e,t,r){return Object(j.d)(this,e,t,r)}_clearOverride(e){return this.__accessor__.clearOverride(e)}_override(e,t){return this.__accessor__.override(e,t)}_isOverridden(e){return this.__accessor__.isOverridden(e)}notifyChange(e){this.__accessor__.notifyChange(e)}_get(e){return this.__accessor__.internalGet(e)}_set(e,t){return this.__accessor__.internalSet(e,t),this}}t.a=S},920:function(e,t,r){"use strict";var n,o=r(78),i=r(607),s=r(103),a=r(102),l=r(303),c=r(183),u=r(84),d=r(83),h=r(85),p=r(154),f=r(477),b=r(77),m=r(86),g=r(80),y=r(81),v=(r(76),r(79)),O=r(88),j=r(92);let w=n=class extends d.a{constructor(e){super(e),this.type="none"}clone(){return new n({type:this.type})}};Object(o.a)([Object(j.a)({none:"none",stayAbove:"stay-above"})],w.prototype,"type",void 0),w=n=Object(o.a)([Object(v.a)("esri.ground.NavigationConstraint")],w);var _,k=r(489);const S=b.a.getLogger("esri.Ground");let x=_=class extends(Object(d.b)(p.a)){constructor(e){super(e),this.opacity=1,this.surfaceColor=null,this.navigationConstraint=null,this.layers=new a.a;const t=e=>{e.parent&&e.parent!==this&&"remove"in e.parent&&e.parent.remove(e),e.parent=this,"elevation"!==e.type&&"base-elevation"!==e.type&&S.error(`Layer '${e.title}, id:${e.id}' of type '${e.type}' is not supported as a ground layer and will therefore be ignored. Only layers of type 'elevation' are supported.`)};this.layers.on("after-add",(e=>t(e.item))),this.layers.on("after-remove",(e=>(e=>{e.parent=null})(e.item)))}initialize(){this.when().catch((e=>{S.error("#load()","Failed to load ground",e)})),this.resourceInfo&&this.read(this.resourceInfo.data,this.resourceInfo.context)}destroy(){const e=this.layers.removeAll();for(const t of e)t.destroy();this.layers.destroy()}normalizeCtorArgs(e){return e&&"resourceInfo"in e&&(this._set("resourceInfo",e.resourceInfo),delete(e={...e}).resourceInfo),e}set layers(e){this._set("layers",Object(l.b)(e,this._get("layers")))}writeLayers(e,t,r,n){const o=[];e?(n={...n,layerContainerType:"ground"},e.forEach((e=>{if("write"in e){const t={};Object(c.b)(e)().write(t,n)&&o.push(t)}else n&&n.messages&&n.messages.push(new u.a("layer:unsupported",`Layers (${e.title}, ${e.id}) of type '${e.declaredClass}' cannot be persisted in the ground`,{layer:e}))})),t.layers=o):t.layers=o}load(e){return this.addResolvingPromise(this._loadFromSource(e)),Promise.resolve(this)}loadAll(){return Object(f.a)(this,(e=>{e(this.layers)}))}async queryElevation(e,t){await this.load({signal:null==t?void 0:t.signal});const{ElevationQuery:n}=await Promise.all([r.e(10),r.e(49)]).then(r.bind(null,1185));Object(m.v)(t);const o=new n,i=this.layers.filter(E).toArray();return o.queryAll(i,e,t)}async createElevationSampler(e,t){await this.load({signal:null==t?void 0:t.signal});const{ElevationQuery:n}=await Promise.all([r.e(10),r.e(49)]).then(r.bind(null,1185));Object(m.v)(t);const o=new n,i=this.layers.filter(E).toArray();return o.createSamplerAll(i,e,t)}clone(){const e={opacity:this.opacity,surfaceColor:Object(h.a)(this.surfaceColor),navigationConstraint:Object(h.a)(this.navigationConstraint),layers:this.layers.slice()};return this.loaded&&(e.loadStatus="loaded"),new _({resourceInfo:this.resourceInfo}).set(e)}read(e,t){this.resourceInfo||this._set("resourceInfo",{data:e,context:t}),super.read(e,t)}_loadFromSource(e){const t=this.resourceInfo;return t?this._loadLayersFromJSON(t.data,t.context,e):Promise.resolve(null)}_loadLayersFromJSON(e,t,n){const o=t&&t.origin||"web-scene",i=t&&t.portal||null,s=t&&t.url||null;return r.e(46).then(r.bind(null,926)).then((({populateOperationalLayers:t})=>{Object(m.v)(n);const r=[];if(e.layers&&Array.isArray(e.layers)){const n={context:{origin:o,url:s,portal:i,layerContainerType:"ground"},defaultLayerType:"ArcGISTiledElevationServiceLayer"};r.push(t(this.layers,e.layers,n))}return Object(m.j)(r)})).then((()=>{}))}};function E(e){return"elevation"===e.type||function(e){return e&&"createElevationSampler"in e}(e)}Object(o.a)([Object(g.b)({json:{read:!1}})],x.prototype,"layers",null),Object(o.a)([Object(O.a)("layers")],x.prototype,"writeLayers",null),Object(o.a)([Object(g.b)({readOnly:!0})],x.prototype,"resourceInfo",void 0),Object(o.a)([Object(g.b)({type:Number,nonNullable:!0,range:{min:0,max:1},json:{type:y.a,read:{reader:k.b,source:"transparency"},write:{writer:(e,t)=>{t.transparency=Object(k.a)(e)},target:"transparency"}}})],x.prototype,"opacity",void 0),Object(o.a)([Object(g.b)({type:s.a,json:{type:[y.a],write:(e,t)=>{t.surfaceColor=e.toJSON().slice(0,3)}}})],x.prototype,"surfaceColor",void 0),Object(o.a)([Object(g.b)({type:w,json:{write:!0}})],x.prototype,"navigationConstraint",void 0),x=_=Object(o.a)([Object(v.a)("esri.Ground")],x);var A=x,T=r(90),I=r(543),C=r(121),M=r(107);function N(e){var t;return!!(e&&e.loaded&&"capabilities"in e&&null!=e&&null!=(t=e.capabilities)&&t.operations&&"supportsEditing"in e.capabilities.operations&&!0===e.capabilities.operations.supportsEditing)&&!("editingEnabled"in e&&!e.editingEnabled)}var P=r(562);const L=b.a.getLogger("esri.support.groundUtils"),D={"world-elevation":{id:"worldElevation",url:"//elevation3d.arcgis.com/arcgis/rest/services/WorldElevation3D/Terrain3D/ImageServer",layerType:"ArcGISTiledElevationServiceLayer"},"world-topobathymetry":{id:"worldTopoBathymetry",url:"//elevation3d.arcgis.com/arcgis/rest/services/WorldElevation3D/TopoBathy3D/ImageServer",layerType:"ArcGISTiledElevationServiceLayer"}};var B=r(691),U=r(692);const R=b.a.getLogger("esri.Map");let F=class extends(Object(U.a)(Object(B.a)(C.a.EventedMixin(T.a)))){constructor(e){super(e),this.allLayers=new I.a({getCollections:()=>{var e,t,r;return[null==(e=this.basemap)?void 0:e.baseLayers,null==(t=this.ground)?void 0:t.layers,this.layers,null==(r=this.basemap)?void 0:r.referenceLayers]},getChildrenFunction:e=>"layers"in e?e.layers:null}),this.allTables=new I.a({getCollections:()=>[this.tables,this.layers],getChildrenFunction:e=>{const t=[];return"tables"in e&&t.push(e.tables),"layers"in e&&t.push(e.layers),t},itemFilterFunction:e=>{const t=e.parent;return t&&"tables"in t&&t.tables.includes(e)}}),this.basemap=null,this.editableLayers=new I.a({getCollections:()=>[this.allLayers],itemFilterFunction:N}),this.ground=new A,this._basemapCache=Object(P.b)()}destroy(){var e,t;this.allLayers.destroy(),this.allTables.destroy(),this.editableLayers.destroy(),null==(e=this.ground)||e.destroy(),null==(t=this.basemap)||t.destroy(),Object(P.c)(this._basemapCache),this._basemapCache=null}castBasemap(e){return Object(P.d)(e,this._basemapCache)}castGround(e){return function(e){let t;"string"==typeof e?e in D?t=new A({resourceInfo:{data:{layers:[D[e]]}}}):L.warn(`Unable to find ground definition for: ${e}. Try "world-elevation"`):t=Object(y.m)(A,e);return t}(e)||(R.error("Map.ground may not be set to null or undefined"),this._get("ground"))}findLayerById(e){return this.allLayers.find((t=>t.id===e))}findTableById(e){return this.allTables.find((t=>t.id===e))}};Object(o.a)([Object(g.b)({readOnly:!0,dependsOn:[]})],F.prototype,"allLayers",void 0),Object(o.a)([Object(g.b)({readOnly:!0})],F.prototype,"allTables",void 0),Object(o.a)([Object(g.b)({type:i.default})],F.prototype,"basemap",void 0),Object(o.a)([Object(M.a)("basemap")],F.prototype,"castBasemap",null),Object(o.a)([Object(g.b)({readOnly:!0})],F.prototype,"editableLayers",void 0),Object(o.a)([Object(g.b)({type:A,nonNullable:!0})],F.prototype,"ground",void 0),Object(o.a)([Object(M.a)("ground")],F.prototype,"castGround",null),F=Object(o.a)([Object(v.a)("esri.Map")],F);var q=F;t.a=q},93:function(e,t,r){"use strict";r.d(t,"a",(function(){return y})),r.d(t,"b",(function(){return E})),r.d(t,"c",(function(){return C})),r.d(t,"d",(function(){return ue})),r.d(t,"e",(function(){return de})),r.d(t,"f",(function(){return j})),r.d(t,"g",(function(){return v})),r.d(t,"h",(function(){return se})),r.d(t,"i",(function(){return Y})),r.d(t,"j",(function(){return G})),r.d(t,"k",(function(){return oe})),r.d(t,"l",(function(){return L})),r.d(t,"m",(function(){return W})),r.d(t,"n",(function(){return he})),r.d(t,"o",(function(){return M})),r.d(t,"p",(function(){return x})),r.d(t,"q",(function(){return D})),r.d(t,"r",(function(){return N})),r.d(t,"s",(function(){return V})),r.d(t,"t",(function(){return z})),r.d(t,"u",(function(){return J})),r.d(t,"v",(function(){return Q})),r.d(t,"w",(function(){return X})),r.d(t,"x",(function(){return le})),r.d(t,"y",(function(){return B})),r.d(t,"z",(function(){return $})),r.d(t,"A",(function(){return R})),r.d(t,"B",(function(){return K})),r.d(t,"C",(function(){return F})),r.d(t,"D",(function(){return q})),r.d(t,"E",(function(){return S})),r.d(t,"F",(function(){return _})),r.d(t,"G",(function(){return ne})),r.d(t,"H",(function(){return ce})),r.d(t,"I",(function(){return ie})),r.d(t,"J",(function(){return ee})),r.d(t,"K",(function(){return w}));var n=r(142),o=r(84),i=(r(140),r(77)),s=r(82);const a=i.a.getLogger("esri.core.urlUtils"),l=n.a.request,c="esri/config: esriConfig.request.proxyUrl is not set.",u=/^\s*[a-z][a-z0-9-+.]*:(?![0-9])/i,d=/^\s*http:/i,h=/^\s*https:/i,p=/^\s*file:/i,f=/:\d+$/,b=/^https?:\/\/[^/]+\.arcgis.com\/sharing(\/|$)/i,m=new RegExp("^(([^:/?#]+):)?(//([^/?#]*))?([^?#]*)(\\?([^#]*))?(#(.*))?$"),g=new RegExp("^((([^\\[:]+):)?([^@]+)@)?(\\[([^\\]]+)\\]|([^\\[:]*))(:([0-9]+))?$");class y{constructor(e=""){this.uri=e,this.scheme=null,this.authority=null,this.path=null,this.query=null,this.fragment=null,this.user=null,this.password=null,this.host=null,this.port=null;let t=Object(s.d)(this.uri.match(m));this.scheme=t[2]||(t[1]?"":null),this.authority=t[4]||(t[3]?"":null),this.path=t[5],this.query=t[7]||(t[6]?"":null),this.fragment=t[9]||(t[8]?"":null),null!=this.authority&&(t=Object(s.d)(this.authority.match(g)),this.user=t[3]||null,this.password=t[4]||null,this.host=t[6]||t[7],this.port=t[9]||null)}toString(){return this.uri}}const v=new y(n.a.applicationUrl),O={},j=(()=>{const e=Object(s.d)(v.path),t=e.substring(0,e.lastIndexOf(e.split("/")[e.split("/").length-1]));return`${v.scheme}://${v.host}${null!=v.port?`:${v.port}`:""}${t}`})();function w(e){const t={path:null,query:null},r=new y(e),n=e.indexOf("?");return null===r.query?t.path=e:(t.path=e.substring(0,n),t.query=_(r.query)),r.fragment&&(t.hash=r.fragment,null===r.query&&(t.path=t.path.substring(0,t.path.length-(r.fragment.length+1)))),t}function _(e){const t=e.split("&"),r={};for(const n of t){if(!n)continue;const e=n.indexOf("=");let t,o;e<0?(t=decodeURIComponent(n),o=""):(t=decodeURIComponent(n.slice(0,e)),o=decodeURIComponent(n.slice(e+1)));let i=r[t];"string"==typeof i&&(i=r[t]=[i]),Array.isArray(i)?i.push(o):r[t]=o}return r}function k(e){return e&&"object"==typeof e&&"toJSON"in e&&"function"==typeof e.toJSON}function S(e,t){return e?t&&"function"==typeof t?Object.keys(e).map((r=>encodeURIComponent(r)+"="+encodeURIComponent(t(r,e[r])))).join("&"):Object.keys(e).map((r=>{const n=e[r];if(null==n)return"";const o=encodeURIComponent(r)+"=",i=t&&t[r];return i?o+encodeURIComponent(i(n)):Array.isArray(n)?n.map((e=>k(e)?o+encodeURIComponent(JSON.stringify(e)):o+encodeURIComponent(e))).join("&"):k(n)?o+encodeURIComponent(JSON.stringify(n)):o+encodeURIComponent(n)})).filter((e=>e)).join("&"):""}function x(e=!1){let t,r=l.proxyUrl;if("string"==typeof e){t=Q(e);const n=M(e);n&&(r=n.proxyUrl)}else t=!!e;if(!r)throw a.warn(c),new o.a("urlutils:proxy-not-set",c);return t&&te()&&(r=ee(r)),w(r)}function E(e){const t=M(e);let r,n;if(t){const e=T(t.proxyUrl);r=e.path,n=e.query?_(e.query):null}if(r){const t=w(e);e=r+"?"+t.path;const o=S({...n,...t.query});o&&(e=`${e}?${o}`)}return e}const A={path:"",query:""};function T(e){const t=e.indexOf("?");return-1!==t?(A.path=e.slice(0,t),A.query=e.slice(t+1)):(A.path=e,A.query=null),A}function I(e){return(e=re(e=function(e){return e&&"/"===e[e.length-1]?e:`${e}/`}(e=T(e).path),!0)).toLowerCase()}function C(e){const t={proxyUrl:e.proxyUrl,urlPrefix:I(e.urlPrefix)},r=l.proxyRules,n=t.urlPrefix;let o=r.length;for(let i=0;i<r.length;i++){const e=r[i].urlPrefix;if(0===n.indexOf(e)){if(n.length===e.length)return-1;o=i;break}0===e.indexOf(n)&&(o=i+1)}return r.splice(o,0,t),o}function M(e){const t=l.proxyRules,r=I(e);for(let n=0;n<t.length;n++)if(0===r.indexOf(t[n].urlPrefix))return t[n]}function N(e,t){return e=P(e),t=P(t),re(e)===re(t)}function P(e){const t=(e=q(e)).indexOf("/sharing");return t>0?e.substring(0,t):e.replace(/\/+$/,"")}function L(e){const t=t=>null==t||t instanceof RegExp&&t.test(e)||"string"==typeof t&&e.startsWith(t),r=l.interceptors;if(r)for(const n of r)if(Array.isArray(n.urls)){if(n.urls.some(t))return n}else if(t(n.urls))return n;return null}function D(e,t,r=!1){const n=ae(e),o=ae(t);return!(!r&&n.scheme!==o.scheme)&&null!=n.host&&null!=o.host&&n.host.toLowerCase()===o.host.toLowerCase()&&n.port===o.port}function B(e){if("string"==typeof e){if(!V(e))return!0;e=ae(e)}if(D(e,v))return!0;const t=l.trustedServers||[];for(let r=0;r<t.length;r++){const n=U(t[r]);for(let t=0;t<n.length;t++)if(D(e,n[t]))return!0}return!1}function U(e){return O[e]||(Z(e)||X(e)?O[e]=[new y(R(e))]:O[e]=[new y(`http://${e}`),new y(`https://${e}`)]),O[e]}function R(e,t=j,r){return X(e)?r&&r.preserveProtocolRelative?e:"http"===v.scheme&&v.authority===W(e).slice(2)?`http:${e}`:`https:${e}`:Z(e)?e:Object(s.d)($("/"===e[0]?function(e){const t=e.indexOf("//"),r=e.indexOf("/",t+2);return-1===r?e:e.slice(0,r)}(t):t,e))}function F(e,t=j,r){if(!V(e))return e;const n=q(e),o=n.toLowerCase(),i=q(t).toLowerCase().replace(/\/+$/,""),s=r?q(r).toLowerCase().replace(/\/+$/,""):null;if(s&&0!==i.indexOf(s))return e;const a=(e,t,r)=>-1===(r=e.indexOf(t,r))?e.length:r;let l=a(o,"/",o.indexOf("//")+2),c=-1;for(;o.slice(0,l+1)===i.slice(0,l)+"/"&&(c=l+1,l!==o.length);)l=a(o,"/",l+1);if(-1===c)return e;if(s&&c<s.length)return e;e=n.slice(c);const u=i.slice(c-1).replace(/[^/]+/g,"").length;if(u>0)for(let d=0;d<u;d++)e=`../${e}`;else e=`./${e}`;return e}function q(e){return function(e){const t=l.httpsDomains;if(!function(e){return d.test(e)||"http"===v.scheme&&X(e)}(e))return e;const r=e.indexOf("/",7);let n;if(n=-1===r?e:e.slice(0,r),n=n.toLowerCase().slice(7),f.test(n)){if(!n.endsWith(":80"))return e;n=n.slice(0,-3),e=e.replace(":80","")}return"http"===v.scheme&&n===v.authority&&!b.test(e)||(te()&&n===v.authority||t&&t.some((e=>n===e||n.endsWith(`.${e}`)))||te()&&!M(e))&&(e=ee(e)),e}(e=function(e){return e.replace(/^(https?:\/\/)(arcgis\.com)/i,"$1www.$2")}(e=function(e){if(/^https?:\/\//i.test(e)){const t=T(e);e=(e=t.path.replace(/\/{2,}/g,"/")).replace("/","//"),t.query&&(e+=`?${t.query}`)}return e}(e=R(e=e.trim()))))}function $(...e){const t=e.filter(s.k);if(!t||!t.length)return;const r=[];if(V(t[0])){const e=t[0],n=e.indexOf("//");-1!==n&&(r.push(e.slice(0,n+1)),function(e){return p.test(e)}(t[0])&&(r[0]+="/"),t[0]=e.slice(n+2))}else"/"===t[0][0]&&r.push("");const n=t.reduce(((e,t)=>t?e.concat(t.split("/")):e),[]);for(let o=0;o<n.length;o++){const e=n[o];".."===e&&r.length>0&&".."!==r[r.length-1]?r.pop():(!e&&o===n.length-1||e&&("."!==e||0===r.length))&&r.push(e)}return r.join("/")}function W(e,t=!1){if(z(e)||J(e))return null;let r=e.indexOf("://");if(-1===r&&X(e))r=2;else{if(-1===r)return null;r+=3}const n=e.indexOf("/",r);return-1!==n&&(e=e.slice(0,n)),t&&(e=re(e,!0)),e}function V(e){return X(e)||Z(e)}function z(e){return null!=e&&"blob:"===e.slice(0,5)}function J(e){return"data:"===e.slice(0,5)}function G(e){const t=Y(e);if(!t||!t.isBase64)return null;const r=atob(t.data),n=new Uint8Array(r.length);for(let o=0;o<r.length;o++)n[o]=r.charCodeAt(o);return n.buffer}const H=/^data:(.*?)(;base64)?,(.*)$/;function Y(e){const t=e.match(H);if(!t)return null;const[,r,n,o]=t;return{mediaType:r,isBase64:!!n,data:o}}function K(e){return e.isBase64?`data:${e.mediaType};base64,${e.data}`:`data:${e.mediaType},${e.data}`}function X(e){return null!=e&&void 0!==e&&"/"===e[0]&&"/"===e[1]}function Z(e){return u.test(e)}function Q(e){return h.test(e)||"https"===v.scheme&&X(e)}function ee(e){return X(e)?`https:${e}`:e.replace(d,"https:")}function te(){return"https"===v.scheme}function re(e,t=!1){return X(e)?e.slice(2):(e=e.replace(u,""),t&&e.length>1&&"/"===e[0]&&"/"===e[1]&&(e=e.slice(2)),e)}function ne(e){let t=0;if(V(e)){const r=e.indexOf("//");-1!==r&&(t=r+2)}const r=e.lastIndexOf("/");return r<t?e:e.slice(0,r+1)}function oe(e,t){if(!e)return"";const r=w(e).path.replace(/\/+$/,""),n=r.substring(r.lastIndexOf("/")+1);if(null==t||!t.length)return n;const o=new RegExp(`.(${t.join("|")})$`,"ig");return n.replace(o,"")}function ie(e){return e.replace(/\/+$/,"")}function se(e,t,r){if(!(t&&r&&e&&V(e)))return e;const n=e.indexOf("//"),o=e.indexOf("/",n+2),i=e.indexOf(":",n+2),s=Math.min(o<0?e.length:o,i<0?e.length:i);return e.slice(n+2,s).toLowerCase()!==t.toLowerCase()?e:`${e.slice(0,n+2)}${r}${e.slice(s)}`}function ae(e){return"string"==typeof e?new y(R(e)):(e.scheme||(e.scheme=v.scheme),e)}function le(e){return fe.test(e)}function ce(e,t){const r=w(e),n=Object.keys(r.query||{});return n.length>0&&t&&t.warn("removeQueryParameters()",`Url query parameters are not supported, the following parameters have been removed: ${n.join(", ")}.`),r.path}function ue(e,t,r){const n=w(e),o=n.query||{};return o[t]=String(r),`${n.path}?${S(o)}`}function de(e,t){const r=w(e),n=r.query||{};for(const i in t)n[i]=t[i];const o=S(n);return o?`${r.path}?${o}`:r.path}function he(e){if(Object(s.j)(e))return null;const t=e.match(pe);return t?t[1]:null}const pe=/.*?\.([^\/]*)$/,fe=/(^data:image\/svg|\.svg$)/i},939:function(e,t,r){"use strict";var n,o=r(78),i=r(577),s=r(285),a=r(84),l=r(165),c=r(83),u=r(85),d=r(77),h=r(82),p=r(80),f=r(107),b=(r(76),r(89)),m=r(79),g=r(88),y=r(81),v=r(95),O=r(863);const j="esri.webmap.Bookmark",w=d.a.getLogger(j);let _=n=class extends(Object(l.a)(c.a)){constructor(e){super(e),this.name=null,this.thumbnail=new O.a}set extent(e){Object(s.d)(w,"extent",{replacement:"viewpoint",version:"4.17"}),this._set("viewpoint",new i.a({targetGeometry:e.clone()})),this._set("extent",e)}castThumbnail(e){return"string"==typeof e?new O.a({url:e}):Object(y.m)(O.a,e)}set viewpoint(e){const{targetGeometry:t,scale:r}=e;Object(h.k)(t)&&("extent"===t.type?this._set("extent",t.clone()):"point"===t.type&&Object(h.j)(r)&&w.warn("Bookmark.viewpoint should include 'scale' when its targetGeometry is a point.",e)),this._set("viewpoint",e)}readViewpoint(e,t){const{extent:r,viewpoint:n}=t;return i.a.fromJSON(n||{targetGeometry:r})}writeViewpoint(e,t,r,n){if(!e)return;const{targetGeometry:o}=e;if(Object(h.k)(o)&&"extent"!==o.type){const e="Bookmark.viewpoint cannot be written to JSON when the viewpoint's targetGeometry is not an extent.";null!=n&&n.messages?n.messages.push(new a.a("property:unsupported",e)):w.error(e)}else t[r]=e.toJSON()}clone(){return new n(Object(u.a)({name:this.name,thumbnail:this.thumbnail,viewpoint:this.viewpoint}))}};Object(o.a)([Object(p.b)({type:v.a,nonNullable:!0,json:{read:!1,write:{isRequired:!0}}})],_.prototype,"extent",null),Object(o.a)([Object(p.b)({type:String,nonNullable:!0,json:{write:{isRequired:!0}}})],_.prototype,"name",void 0),Object(o.a)([Object(p.b)({type:O.a,json:{write:{overridePolicy:e=>({enabled:!(!e||!e.url)})}}})],_.prototype,"thumbnail",void 0),Object(o.a)([Object(f.a)("thumbnail")],_.prototype,"castThumbnail",null),Object(o.a)([Object(p.b)({type:i.a,nonNullable:!0,json:{write:!0}})],_.prototype,"viewpoint",null),Object(o.a)([Object(b.a)("viewpoint",["extent","viewpoint"])],_.prototype,"readViewpoint",null),Object(o.a)([Object(g.a)("viewpoint")],_.prototype,"writeViewpoint",null),_=n=Object(o.a)([Object(m.a)(j)],_);var k=_;t.a=k},97:function(e,t,r){"use strict";r.r(t);var n=r(142),o=r(123),i=r(84),s=r(140),a=r(76),l=r(85),c=r(82),u=r(86),d=r(93),h=r(432),p=r(402);async function f(e,t){const l=Object(d.u)(e),p=Object(d.t)(e);p||l||(e=Object(d.D)(e));const y={url:e,requestOptions:{...Object(c.s)(t)}};let v=Object(d.l)(e);if(v){const e=await async function(e,t){if(null!=e.responseData)return e.responseData;if(e.headers&&(t.requestOptions.headers={...t.requestOptions.headers,...e.headers}),e.query&&(t.requestOptions.query={...t.requestOptions.query,...e.query}),e.before){let r,n;try{n=await e.before(t)}catch(p){r=k("request:interceptor",p,t)}if((n instanceof Error||n instanceof i.a)&&(r=k("request:interceptor",n,t)),r)throw e.error&&e.error(r),r;return n}}(v,y);if(null!=e)return{data:e,getHeader:j,requestOptions:y.requestOptions,url:y.url};v.after||v.error||(v=null)}if(e=y.url,"image"===(t=y.requestOptions).responseType){if(Object(a.a)("host-webworker")||Object(a.a)("host-node"))throw k("request:invalid-parameters",new Error("responseType 'image' is not supported in Web Workers or Node environment"),y)}else if(l)throw k("request:invalid-parameters",new Error("Data URLs are not supported for responseType = "+t.responseType),y);if("head"===t.method){if(t.body)throw k("request:invalid-parameters",new Error("body parameter cannot be set when method is 'head'"),y);if(l||p)throw k("request:invalid-parameters",new Error("data and blob URLs are not supported for method 'head'"),y)}if(await async function(){Object(a.a)("host-webworker")?b||(b=await r.e(279).then(r.bind(null,632))):f._abortableFetch||(f._abortableFetch=s.a.fetch.bind(s.a))}(),b)return b.execute(e,t);const O=Object(u.d)();Object(u.q)(t,(()=>O.abort()));const w={controller:O,credential:null,credentialToken:null,fetchOptions:null,hasToken:!1,interceptor:v,params:y,redoRequest:!1,useIdentity:m.useIdentity,useProxy:!1,useSSL:!1,withCredentials:!1},_=await async function(e){var t,r;let i,a;await async function(e){const t=e.params.url,r=e.params.requestOptions,i=e.controller.signal,a=r.body;let l=null,c=null,d=null;if(g&&"HTMLFormElement"in s.a&&(a instanceof FormData?l=a:a instanceof HTMLFormElement&&(c=a,l=new FormData(c))),"string"==typeof a&&(d=a),e.fetchOptions={cache:r.cacheBust&&!f._abortableFetch.polyfill?"no-cache":"default",credentials:"same-origin",headers:r.headers||{},method:"head"===r.method?"HEAD":"GET",mode:"cors",redirect:"follow",signal:i},(l||d)&&(e.fetchOptions.body=l||d),"anonymous"===r.authMode&&(e.useIdentity=!1),e.hasToken=!!(/token=/i.test(t)||r.query&&r.query.token||l&&l.get&&l.get("token")||c&&c.elements.token),!e.hasToken&&n.a.apiKey&&Object(h.a)(t)&&(r.query||(r.query={}),r.query.token=n.a.apiKey,e.hasToken=!0),e.useIdentity&&!e.hasToken&&!e.credentialToken&&!x(t)&&!Object(u.n)(i)){let n;"immediate"===r.authMode?(await S(),n=await o.b.getCredential(t,{signal:i}),e.credential=n):"no-prompt"===r.authMode?(await S(),n=await o.b.getCredential(t,{prompt:!1,signal:i}).catch((()=>{})),e.credential=n):o.b&&(n=o.b.findCredential(t)),n&&(e.credentialToken=n.token,e.useSSL=!!n.ssl)}}(e);try{do{[i,a]=await E(e)}while(!await T(e,i,a))}catch(p){const t=k("request:server",p,e.params,i);throw t.details.ssl=e.useSSL,e.interceptor&&e.interceptor.error&&e.interceptor.error(t),t}const l=e.params.url;if(/\/sharing\/rest\/(accounts|portals)\/self/i.test(l)&&!e.hasToken&&!e.credentialToken&&null!=(t=a)&&null!=(r=t.user)&&r.username&&!Object(d.y)(l)){const e=Object(d.m)(l,!0);e&&m.trustedServers.push(e)}const c=e.credential;if(c&&o.b){const e=o.b.findServerInfo(c.server);let t=e&&e.owningSystemUrl;if(t){t=t.replace(/\/?$/,"/sharing");const e=o.b.findCredential(t,c.userId);e&&-1===o.b._getIdenticalSvcIdx(t,e)&&e.resources.unshift(t)}}return{data:a,getHeader:i?e=>i.headers.get(e):j,requestOptions:e.params.requestOptions,ssl:e.useSSL,url:e.params.url}}(w);return v&&v.after&&v.after(_),_}let b;const m=n.a.request,g="FormData"in s.a,y=[499,498,403,401],v=["COM_0056","COM_0057","SB_0008"],O=[/\/arcgis\/tokens/i,/\/sharing(\/rest)?\/generatetoken/i,/\/rest\/info/i],j=()=>null,w=Symbol();function _(e){const t=Object(d.m)(e);return!t||t.endsWith(".arcgis.com")||f._corsServers.includes(t)||Object(d.y)(t)}function k(e,t,r,n){let o="Error";const s={url:r.url,requestOptions:r.requestOptions,getHeader:j,ssl:!1};if(t instanceof i.a)return t.details?(t.details=Object(l.a)(t.details),t.details.url=r.url,t.details.requestOptions=r.requestOptions):t.details=s,t;if(t){const e=n&&(e=>n.headers.get(e)),r=n&&n.status,i=t.message;i&&(o=i),e&&(s.getHeader=e),s.httpStatus=(null!=t.httpCode?t.httpCode:t.code)||r||0,s.subCode=t.subcode,s.messageCode=t.messageCode,"string"==typeof t.details?s.messages=[t.details]:s.messages=t.details,s.raw=w in t?t[w]:t}return Object(u.m)(t)?Object(u.e)():new i.a(e,o,s)}async function S(){o.b||await Promise.all([r.e(14),r.e(143),r.e(275)]).then(r.bind(null,605))}function x(e){return O.some((t=>t.test(e)))}async function E(e){let t=e.params.url;const r=e.params.requestOptions,n=e.fetchOptions,i=Object(d.t)(t)||Object(d.u)(t),s=r.responseType||"json",l=i?0:null!=r.timeout?r.timeout:m.timeout;let c=!1;if(!i){e.useSSL&&(t=Object(d.J)(t)),r.cacheBust&&"default"===n.cache&&(t=Object(d.d)(t,"request.preventCache",Date.now()));let i={...r.query};e.credentialToken&&(i.token=e.credentialToken);let s=Object(d.E)(i);Object(a.a)("esri-url-encodes-apostrophe")&&(s=s.replace(/'/g,"%27"));const l=t.length+1+s.length;let u;c="delete"===r.method||"post"===r.method||"put"===r.method||!!r.body||l>m.maxUrlLength;const h=r.useProxy||!!Object(d.o)(t);if(h){const e=Object(d.p)(t);u=e.path,!c&&u.length+1+l>m.maxUrlLength&&(c=!0),e.query&&(i={...e.query,...i})}if("HEAD"===n.method&&(c||h)){if(c){if(l>m.maxUrlLength)throw k("request:invalid-parameters",new Error("URL exceeds maximum length"),e.params);throw k("request:invalid-parameters",new Error("cannot use POST request when method is 'head'"),e.params)}if(h)throw k("request:invalid-parameters",new Error("cannot use proxy when method is 'head'"),e.params)}if(c?(n.method="delete"===r.method?"DELETE":"put"===r.method?"PUT":"POST",r.body?t=Object(d.e)(t,i):(n.body=Object(d.E)(i),n.headers["Content-Type"]="application/x-www-form-urlencoded")):t=Object(d.e)(t,i),h&&(e.useProxy=!0,t=`${u}?${t}`),i.token&&g&&n.body instanceof FormData){const e=n.body;e.set?e.set("token",i.token):e.append("token",i.token)}if(r.hasOwnProperty("withCredentials"))e.withCredentials=r.withCredentials;else if(!Object(d.q)(t,d.g))if(Object(d.y)(t))e.withCredentials=!0;else if(o.b){const r=o.b.findServerInfo(t);r&&r.webTierAuth&&(e.withCredentials=!0)}e.withCredentials&&(n.credentials="include")}let h,p,b=0,y=!1;l>0&&(b=setTimeout((()=>{y=!0,e.controller.abort()}),l));try{if("native-request-init"===r.responseType)p=n,p.url=t;else if("image"!==r.responseType||"default"!==n.cache||"GET"!==n.method||c||function(e){if(e)for(const t of Object.getOwnPropertyNames(e))if(e[t])return!0;return!1}(r.headers)||!i&&!e.useProxy&&m.proxyUrl&&!_(t)){if(h=await f._abortableFetch(t,n),e.useProxy||function(e){const t=Object(d.m)(e);t&&!f._corsServers.includes(t)&&f._corsServers.push(t)}(t),"native"===r.responseType)p=h;else if("HEAD"!==n.method)if(h.ok){switch(s){case"array-buffer":p=await h.arrayBuffer();break;case"blob":case"image":p=await h.blob();break;default:p=await h.text()}if(b&&(clearTimeout(b),b=0),"json"===s||"xml"===s||"document"===s)if(p)switch(s){case"json":p=JSON.parse(p);break;case"xml":p=A(p,"application/xml");break;case"document":p=A(p,"text/html")}else p=null;if(p){if("array-buffer"===s||"blob"===s){const e=h.headers.get("Content-Type");if(/application\/json|text\/plain/i.test(e)&&p["blob"===s?"size":"byteLength"]<=750)try{const e=await new Response(p).json();e.error&&(p=e)}catch{}}"image"===s&&p instanceof Blob&&(p=await I(URL.createObjectURL(p),e,!0))}}else p=await h.text()}else p=await I(t,e)}catch(v){if("AbortError"===v.name){if(y)throw new Error("Timeout exceeded");throw Object(u.e)("Request canceled")}if(!(!h&&v instanceof TypeError&&m.proxyUrl)||r.body||"delete"===r.method||"head"===r.method||"post"===r.method||"put"===r.method||e.useProxy||_(t))throw v;e.redoRequest=!0,Object(d.c)({proxyUrl:m.proxyUrl,urlPrefix:Object(d.m)(t)})}finally{b&&clearTimeout(b)}return[h,p]}function A(e,t){let r;try{r=(new DOMParser).parseFromString(e,t)}catch{}if(!r||r.getElementsByTagName("parsererror").length)throw new SyntaxError("XML Parse error");return r}async function T(e,t,r){if(e.redoRequest)return e.redoRequest=!1,!1;const n=e.params.requestOptions;if(!t||"native"===n.responseType||"native-request-init"===n.responseType)return!0;let i,s,a,l;if(!t.ok)throw i=new Error(`Unable to load ${t.url} status: ${t.status}`),i[w]=r,i;null!=r&&r.error&&(i=r.error),i&&(s=Number(i.code),a=i.hasOwnProperty("subcode")?Number(i.subcode):null,l=i.messageCode,l=l&&l.toUpperCase());const c=n.authMode;if(403===s&&(4===a||i.message&&i.message.toLowerCase().indexOf("ssl")>-1&&-1===i.message.toLowerCase().indexOf("permission"))){if(!e.useSSL)return e.useSSL=!0,!1}else if(!e.hasToken&&e.useIdentity&&("no-prompt"!==c||498===s)&&-1!==y.indexOf(s)&&!x(e.params.url)&&(403!==s||-1===v.indexOf(l)&&(null==a||2===a&&e.credentialToken))){await S();try{const t=await o.b.getCredential(e.params.url,{error:k("request:server",i,e.params),prompt:"no-prompt"!==c,signal:e.controller.signal,token:e.credentialToken});return e.credential=t,e.credentialToken=t.token,e.useSSL=e.useSSL||t.ssl,!1}catch(u){if("no-prompt"===c)return e.credential=null,e.credentialToken=null,!1;i=u}}if(i)throw i;return!0}function I(e,t,r=!1){const n=t.controller.signal,o=new Image;return t.withCredentials?o.crossOrigin="use-credentials":o.crossOrigin="anonymous",o.alt="",o.src=e,Object(p.a)(o,e,r,n)}f._abortableFetch=null,f._corsServers=["https://server.arcgisonline.com","https://services.arcgisonline.com"],t.default=f}}]);
//# sourceMappingURL=74.ea0a6f50.chunk.js.map