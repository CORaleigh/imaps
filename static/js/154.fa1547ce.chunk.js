(this.webpackJsonpimaps=this.webpackJsonpimaps||[]).push([[154],{182:function(e,t,r){"use strict";r.d(t,"a",(function(){return j}));var i=r(81),a=r(129),n=(r(98),r(100)),s=r(88),o=r(122),c=r(149),l=r(142),u=r(80),d=r(89),b=r(96),p=r(83),f=(r(79),r(84),r(82)),h=r(99),O=r(93);let v=0;const m=u.a.getLogger("esri.layers.Layer");let y=class extends(o.a.EventedMixin(Object(c.a)(l.a))){constructor(){super(...arguments),this.attributionDataUrl=null,this.fullExtent=new h.a(-180,-90,180,90,O.a.WGS84),this.id=Date.now().toString(16)+"-layer-"+v++,this.legendEnabled=!0,this.listMode="show",this.opacity=1,this.parent=null,this.popupEnabled=!0,this.attributionVisible=!0,this.spatialReference=O.a.WGS84,this.title=null,this.type=null,this.url=null,this.visible=!0}static async fromArcGISServerUrl(e){const t="string"==typeof e?{url:e}:e,i=await r.e(173).then(r.bind(null,361));try{return await i.fromUrl(t)}catch(a){throw m.error("#fromArcGISServerUrl({ url: '"+t.url+"'})","Failed to create layer from arcgis server url",a),a}}static async fromPortalItem(e){const t="portalItem"in e?e:{portalItem:e},i=await r.e(135).then(r.bind(null,339));try{return await i.fromItem(t)}catch(n){const e=t&&t.portalItem,r=e&&e.id||"unset",i=e&&e.portal&&e.portal.url||a.a.portalUrl;throw m.error("#fromPortalItem()","Failed to create layer from portal item (portal: '"+i+"', id: '"+r+"')",n),n}}initialize(){this.when().catch((e=>{var t,r;Object(d.m)(e)||u.a.getLogger(this.declaredClass).error("#load()",`Failed to load layer (title: '${null!=(t=this.title)?t:"no title"}', id: '${null!=(r=this.id)?r:"no id"}')`,{error:e})}))}destroy(){if(this.parent){const e=this,t=this.parent;"layers"in t&&t.layers.includes(e)?t.layers.remove(e):"tables"in t&&t.tables.includes(e)?t.tables.remove(e):"baseLayers"in t&&t.baseLayers.includes(e)?t.baseLayers.remove(e):"baseLayers"in t&&t.referenceLayers.includes(e)&&t.referenceLayers.remove(e)}}get hasAttributionData(){return null!=this.attributionDataUrl}get parsedUrl(){const e=this.url;return e?Object(b.K)(e):null}async fetchAttributionData(){const e=this.attributionDataUrl;if(this.hasAttributionData&&e)return(await Object(n.default)(e,{query:{f:"json"},responseType:"json"})).data;throw new s.a("layer:no-attribution-data","Layer does not have attribution data")}};Object(i.a)([Object(p.b)({type:String})],y.prototype,"attributionDataUrl",void 0),Object(i.a)([Object(p.b)({type:h.a})],y.prototype,"fullExtent",void 0),Object(i.a)([Object(p.b)({readOnly:!0})],y.prototype,"hasAttributionData",null),Object(i.a)([Object(p.b)({type:String})],y.prototype,"id",void 0),Object(i.a)([Object(p.b)({type:Boolean,nonNullable:!0})],y.prototype,"legendEnabled",void 0),Object(i.a)([Object(p.b)({type:["show","hide","hide-children"]})],y.prototype,"listMode",void 0),Object(i.a)([Object(p.b)({type:Number,range:{min:0,max:1},nonNullable:!0})],y.prototype,"opacity",void 0),Object(i.a)([Object(p.b)()],y.prototype,"parent",void 0),Object(i.a)([Object(p.b)({readOnly:!0})],y.prototype,"parsedUrl",null),Object(i.a)([Object(p.b)({type:Boolean})],y.prototype,"popupEnabled",void 0),Object(i.a)([Object(p.b)({type:Boolean})],y.prototype,"attributionVisible",void 0),Object(i.a)([Object(p.b)({type:O.a})],y.prototype,"spatialReference",void 0),Object(i.a)([Object(p.b)({type:String})],y.prototype,"title",void 0),Object(i.a)([Object(p.b)({type:String,readOnly:!0,json:{read:!1}})],y.prototype,"type",void 0),Object(i.a)([Object(p.b)()],y.prototype,"url",void 0),Object(i.a)([Object(p.b)({type:Boolean,nonNullable:!0})],y.prototype,"visible",void 0),y=Object(i.a)([Object(f.a)("esri.layers.Layer")],y);var j=y},197:function(e,t,r){"use strict";r.d(t,"a",(function(){return i})),r.d(t,"b",(function(){return a}));r(79);function i(e){}function a(e){return()=>e}},203:function(e,t,r){"use strict";r.d(t,"a",(function(){return m})),r.d(t,"b",(function(){return y}));var i=r(81),a=r(91),n=r(85),s=r(87),o=r(141);class c{constructor(){this._propertyOriginMap=new Map,this._originStores=new Array(o.a),this._values=new Map}clone(e){const t=new c,r=this._originStores[0];r&&r.forEach(((e,r)=>{t.set(r,Object(s.a)(e),0)}));for(let i=2;i<o.a;i++){const r=this._originStores[i];r&&r.forEach(((r,a)=>{e&&e.has(a)||t.set(a,Object(s.a)(r),i)}))}return t}get(e,t){const r=void 0===t?this._values:this._originStores[t];return r?r.get(e):void 0}keys(e){const t=null==e?this._values:this._originStores[e];return t?[...t.keys()]:[]}set(e,t,r=6){let i=this._originStores[r];if(i||(i=new Map,this._originStores[r]=i),i.set(e,t),!this._values.has(e)||Object(n.d)(this._propertyOriginMap.get(e))<=r){const i=this._values.get(e);return this._values.set(e,t),this._propertyOriginMap.set(e,r),i!==t}return!1}delete(e,t=6){const r=this._originStores[t];if(!r)return;const i=r.get(e);if(r.delete(e),this._values.has(e)&&this._propertyOriginMap.get(e)===t){this._values.delete(e);for(let r=t-1;r>=0;r--){const t=this._originStores[r];if(t&&t.has(e)){this._values.set(e,t.get(e)),this._propertyOriginMap.set(e,r);break}}}return i}has(e,t){const r=void 0===t?this._values:this._originStores[t];return!!r&&r.has(e)}revert(e,t){for(;t>0&&!this.has(e,t);)--t;const r=this._originStores[t],i=r&&r.get(e),a=this._values.get(e);return this._values.set(e,i),this._propertyOriginMap.set(e,t),a!==i}originOf(e){return this._propertyOriginMap.get(e)||0}forEach(e){this._values.forEach(e)}}var l=r(196),u=r(120),d=r(82);const b=e=>{let t=class extends e{constructor(...e){super(...e);const t=Object(n.d)(Object(u.a)(this)),r=t.metadatas,i=t.store,a=new c;t.store=a,i.keys().forEach((e=>{a.set(e,i.get(e),0)})),Object.keys(r).forEach((e=>{t.internalGet(e)&&a.set(e,t.internalGet(e),0)}))}read(e,t){Object(l.a)(this,e,t)}getAtOrigin(e,t){const r=p(this),i=Object(o.d)(t);if("string"==typeof e)return r.get(e,i);const a={};return e.forEach((e=>{a[e]=r.get(e,i)})),a}originOf(e){return Object(o.b)(this.originIdOf(e))}originIdOf(e){return p(this).originOf(e)}revert(e,t){const r=p(this),i=Object(o.d)(t),a=Object(u.a)(this);let n;n="string"==typeof e?"*"===e?r.keys(i):[e]:e,n.forEach((e=>{a.invalidate(e),r.revert(e,i),a.commit(e)}))}};return t=Object(i.a)([Object(d.a)("esri.core.ReadOnlyMultiOriginJSONSupport")],t),t};function p(e){return Object(u.a)(e).store}let f=class extends(b(a.a)){};f=Object(i.a)([Object(d.a)("esri.core.ReadOnlyMultiOriginJSONSupport")],f);var h=r(199);const O=e=>{let t=class extends e{constructor(...e){super(...e)}clear(e,t="user"){return v(this).delete(e,Object(o.d)(t))}write(e={},t){return Object(h.b)(this,e=e||{},t),e}setAtOrigin(e,t,r){Object(u.a)(this).setAtOrigin(e,t,Object(o.d)(r))}removeOrigin(e){const t=v(this),r=Object(o.d)(e),i=t.keys(r);for(const a of i)t.originOf(a)===r&&t.set(a,t.get(a,r),6)}updateOrigin(e,t){const r=v(this),i=Object(o.d)(t),a=this.get(e);for(let n=i+1;n<o.a;++n)r.delete(e,n);r.set(e,a,i)}toJSON(e){return this.write({},e)}};return t=Object(i.a)([Object(d.a)("esri.core.WriteableMultiOriginJSONSupport")],t),t.prototype.toJSON.isDefaultToJSON=!0,t};function v(e){return Object(u.a)(e).store}const m=e=>{let t=class extends(O(b(e))){constructor(...e){super(...e)}};return t=Object(i.a)([Object(d.a)("esri.core.MultiOriginJSONSupport")],t),t};let y=class extends(m(a.a)){};y=Object(i.a)([Object(d.a)("esri.core.MultiOriginJSONSupport")],y)},218:function(e,t,r){"use strict";r.d(t,"a",(function(){return n}));var i=r(112),a=r(127);const n={inches:Object(i.c)(1,"meters","inches"),feet:Object(i.c)(1,"meters","feet"),"us-feet":Object(i.c)(1,"meters","us-feet"),yards:Object(i.c)(1,"meters","yards"),miles:Object(i.c)(1,"meters","miles"),"nautical-miles":Object(i.c)(1,"meters","nautical-miles"),millimeters:Object(i.c)(1,"meters","millimeters"),centimeters:Object(i.c)(1,"meters","centimeters"),decimeters:Object(i.c)(1,"meters","decimeters"),meters:Object(i.c)(1,"meters","meters"),kilometers:Object(i.c)(1,"meters","kilometers"),"decimal-degrees":1/Object(i.m)(1,"meters",a.a.radius)}},253:function(e,t,r){"use strict";function i(e){return e&&"esri.renderers.visualVariables.SizeVariable"===e.declaredClass}function a(e){return null!=e&&!isNaN(e)&&isFinite(e)}function n(e){return e.valueExpression?"expression":e.field&&"string"==typeof e.field?"field":"unknown"}function s(e,t){const r=t||n(e),i=e.valueUnit||"unknown";return"unknown"===r?"constant":e.stops?"stops":null!=e.minSize&&null!=e.maxSize&&null!=e.minDataValue&&null!=e.maxDataValue?"clamped-linear":"unknown"===i?null!=e.minSize&&null!=e.minDataValue?e.minSize&&e.minDataValue?"proportional":"additive":"identity":"real-world-size"}r.d(t,"a",(function(){return n})),r.d(t,"b",(function(){return s})),r.d(t,"c",(function(){return i})),r.d(t,"d",(function(){return a}))},286:function(e,t,r){"use strict";r.r(t),r.d(t,"getAllSizes",(function(){return w})),r.d(t,"getColor",(function(){return f})),r.d(t,"getOpacity",(function(){return h})),r.d(t,"getRotationAngle",(function(){return O})),r.d(t,"getSize",(function(){return v})),r.d(t,"getSizeForValue",(function(){return j})),r.d(t,"getSizeFromNumberOrVariable",(function(){return m})),r.d(t,"getSizeRangeAtScale",(function(){return g})),r.d(t,"getVisualVariableValues",(function(){return S})),r.d(t,"viewScaleRE",(function(){return p}));var i=r(104),a=r(119),n=r(197),s=r(80),o=r(85),c=r(218),l=r(253);const u=s.a.getLogger("esri.renderers.visualVariables.support.visualVariableUtils"),d=new a.a,b=Math.PI,p=/^\s*(return\s+)?\$view\.scale\s*(;)?\s*$/i;function f(e,t,r){const a="visualVariables"in e&&e.visualVariables?e.visualVariables.filter((e=>"color"===e.type))[0]:e;if(!a)return;if("esri.renderers.visualVariables.ColorVariable"!==a.declaredClass)return void u.warn("The visualVariable should be an instance of esri.renderers.visualVariables.ColorVariable");const n="number"==typeof t,s=n?null:t,c=s&&s.attributes;let l=n?t:null;const d=a.field,{ipData:b,hasExpression:p}=a.cache;let f=a.cache.compiledFunc;if(!d&&!p){const e=a.stops;return e&&e[0]&&e[0].color}if("number"!=typeof l)if(p){if(!Object(o.k)(r)||!Object(o.k)(r.arcade))return void u.error("Use of arcade expressions requires an arcade context");const e={viewingMode:r.viewingMode,scale:r.scale,spatialReference:r.spatialReference},t=r.arcade.arcadeUtils,i=t.getViewInfo(e),n=t.createExecContext(s,i);if(!f){const e=t.createSyntaxTree(a.valueExpression);f=t.createFunction(e),a.cache.compiledFunc=f}l=t.executeFunction(f,n)}else c&&(l=c[d]);const h=a.normalizationField,O=c?parseFloat(c[h]):void 0;if(null!=l&&(!h||n||!isNaN(O)&&0!==O)){isNaN(O)||n||(l/=O);const e=V(l,b);if(e){const t=e[0],n=e[1],s=t===n?a.stops[t].color:i.a.blendColors(a.stops[t].color,a.stops[n].color,e[2],Object(o.k)(r)?r.color:void 0);return new i.a(s)}}}function h(e,t,r){const i="visualVariables"in e&&e.visualVariables?e.visualVariables.filter((e=>"opacity"===e.type))[0]:e;if(!i)return;if("esri.renderers.visualVariables.OpacityVariable"!==i.declaredClass)return void u.warn("The visualVariable should be an instance of esri.renderers.visualVariables.OpacityVariable");const a="number"==typeof t,n=a?null:t,s=n&&n.attributes;let c=a?t:null;const l=i.field,{ipData:d,hasExpression:b}=i.cache;let p=i.cache.compiledFunc;if(!l&&!b){const e=i.stops;return e&&e[0]&&e[0].opacity}if("number"!=typeof c)if(b){if(Object(o.j)(r)||Object(o.j)(r.arcade))return void u.error("Use of arcade expressions requires an arcade context");const e={viewingMode:r.viewingMode,scale:r.scale,spatialReference:r.spatialReference},t=r.arcade.arcadeUtils,a=t.getViewInfo(e),s=t.createExecContext(n,a);if(!p){const e=t.createSyntaxTree(i.valueExpression);p=t.createFunction(e),i.cache.compiledFunc=p}c=t.executeFunction(p,s)}else s&&(c=s[l]);const f=i.normalizationField,h=s?parseFloat(s[f]):void 0;if(null!=c&&(!f||a||!isNaN(h)&&0!==h)){isNaN(h)||a||(c/=h);const e=V(c,d);if(e){const t=e[0],r=e[1];if(t===r)return i.stops[t].opacity;{const a=i.stops[t].opacity;return a+(i.stops[r].opacity-a)*e[2]}}}}function O(e,t,r){const i="visualVariables"in e&&e.visualVariables?e.visualVariables.filter((e=>"rotation"===e.type))[0]:e;if(!i)return;if("esri.renderers.visualVariables.RotationVariable"!==i.declaredClass)return void u.warn("The visualVariable should be an instance of esri.renderers.visualVariables.RotationVariable");const a=i.axis||"heading",n="heading"===a&&"arithmetic"===i.rotationType?90:0,s="heading"===a&&"arithmetic"===i.rotationType?-1:1,c="number"==typeof t?null:t,l=c&&c.attributes,d=i.field,{hasExpression:b}=i.cache;let p=i.cache.compiledFunc,f=0;if(!d&&!b)return f;if(b){if(Object(o.j)(r)||Object(o.j)(r.arcade))return void u.error("Use of arcade expressions requires an arcade context");const e={viewingMode:r.viewingMode,scale:r.scale,spatialReference:r.spatialReference},t=r.arcade.arcadeUtils,a=t.getViewInfo(e),n=t.createExecContext(c,a);if(!p){const e=t.createSyntaxTree(i.valueExpression);p=t.createFunction(e),i.cache.compiledFunc=p}f=t.executeFunction(p,n)}else l&&(f=l[d]||0);return f="number"!=typeof f||isNaN(f)?null:n+s*f,f}function v(e,t,r){const i="visualVariables"in e&&e.visualVariables?e.visualVariables.filter((e=>"size"===e.type))[0]:e;if(!i)return;if("esri.renderers.visualVariables.SizeVariable"!==i.declaredClass)return void u.warn("The visualVariable should be an instance of esri.renderers.visualVariables.SizeVariable");const a=j(function(e,t,r){const i="number"==typeof t,a=i?null:t,n=a&&a.attributes;let s=i?t:null;const{isScaleDriven:c}=e.cache;let d=e.cache.compiledFunc;if(c){const t=Object(o.k)(r)?r.scale:void 0,i=Object(o.k)(r)?r.view:void 0;s=null==t||"3d"===i?function(e){let t=null,r=null;const i=e.stops;return i?(t=i[0].value,r=i[i.length-1].value):(t=e.minDataValue||0,r=e.maxDataValue||0),(t+r)/2}(e):t}else if(!i)switch(e.inputValueType){case"expression":{if(Object(o.j)(r)||Object(o.j)(r.arcade))return void u.error("Use of arcade expressions requires an arcade context");const t={viewingMode:r.viewingMode,scale:r.scale,spatialReference:r.spatialReference},i=r.arcade.arcadeUtils,n=i.getViewInfo(t),c=i.createExecContext(a,n);if(!d){const t=i.createSyntaxTree(e.valueExpression);d=i.createFunction(t),e.cache.compiledFunc=d}s=i.executeFunction(d,c);break}case"field":n&&(s=n[e.field]);break;case"unknown":s=null}if(!Object(l.d)(s))return null;if(i||!e.normalizationField)return s;const b=n?parseFloat(n[e.normalizationField]):null;return Object(l.d)(b)&&0!==b?s/b:null}(i,t,r),i,t,r,i.cache.ipData);return null==a||isNaN(a)?0:a}function m(e,t,r){return null==e?null:Object(l.c)(e)?v(e,t,r):Object(l.d)(e)?e:null}function y(e,t,r){return Object(l.d)(r)&&e>r?r:Object(l.d)(t)&&e<t?t:e}function j(e,t,r,i,a){switch(t.transformationType){case"additive":return function(e,t,r,i){return e+(m(t.minSize,r,i)||t.minDataValue)}(e,t,r,i);case"constant":return function(e,t,r){const i=e.stops;let a=i&&i.length&&i[0].size;return null==a&&(a=e.minSize),m(a,t,r)}(t,r,i);case"clamped-linear":return function(e,t,r,i){const a=(e-t.minDataValue)/(t.maxDataValue-t.minDataValue),n=m(t.minSize,r,i),s=m(t.maxSize,r,i),c=Object(o.k)(i)?i.shape:void 0;if(e<=t.minDataValue)return n;if(e>=t.maxDataValue)return s;if("area"===t.scaleBy&&c){const e="circle"===c,t=e?b*(n/2)**2:n*n,r=t+a*((e?b*(s/2)**2:s*s)-t);return e?2*Math.sqrt(r/b):Math.sqrt(r)}return n+a*(s-n)}(e,t,r,i);case"proportional":return function(e,t,r,i){const a=Object(o.k)(i)?i.shape:void 0,n=e/t.minDataValue,s=m(t.minSize,r,i),c=m(t.maxSize,r,i);let l=null;return l="circle"===a?2*Math.sqrt(n*(s/2)**2):"square"===a||"diamond"===a||"image"===a?Math.sqrt(n*s**2):n*s,y(l,s,c)}(e,t,r,i);case"stops":return function(e,t,r,i,a){const[n,s,o]=V(e,a);if(n===s)return m(t.stops[n].size,r,i);{const e=m(t.stops[n].size,r,i);return e+(m(t.stops[s].size,r,i)-e)*o}}(e,t,r,i,a);case"real-world-size":return function(e,t,r,i){const a=(Object(o.k)(i)&&i.resolution?i.resolution:1)*c.a[t.valueUnit],n=m(t.minSize,r,i),s=m(t.maxSize,r,i),{valueRepresentation:l}=t;let u=null;return u="area"===l?2*Math.sqrt(e/b)/a:"radius"===l||"distance"===l?2*e/a:e/a,y(u,n,s)}(e,t,r,i);case"identity":return e;case"unknown":return null}}function g(e,t,r){const{isScaleDriven:i}=e.cache;if(!(i&&"3d"===r||t))return null;const a={scale:t,view:r};let n=m(e.minSize,d,a),s=m(e.maxSize,d,a);if(null!=n||null!=s){if(n>s){const e=s;s=n,n=e}return{minSize:n,maxSize:s}}}function S(e,t,r){if(!e.visualVariables)return;const i=[],a=[],n=[],s=[],o=[];for(const c of e.visualVariables)switch(c.type){case"color":a.push(c);break;case"opacity":n.push(c);break;case"rotation":o.push(c);break;case"size":s.push(c)}return a.forEach((e=>{const a=f(e,t,r);i.push({variable:e,value:a})})),n.forEach((e=>{const a=h(e,t,r);i.push({variable:e,value:a})})),o.forEach((e=>{const a=O(e,t,r);i.push({variable:e,value:a})})),s.forEach((e=>{const a=v(e,t,r);i.push({variable:e,value:a})})),i.filter((e=>null!=e.value))}function V(e,t){if(!t)return;let r=0,i=t.length-1;return t.some(((t,a)=>e<t?(i=a,!0):(r=a,!1))),[r,i,(e-t[r])/(t[i]-t[r])]}function w(e,t,r){const i=["proportional","proportional","proportional"];for(const a of e){const e=a.useSymbolValue?"symbol-value":v(a,t,r);switch(a.axis){case"width":i[0]=e;break;case"depth":i[1]=e;break;case"height":i[2]=e;break;case"width-and-depth":i[0]=e,i[1]=e;break;case"all":case void 0:case null:i[0]=e,i[1]=e,i[2]=e;break;default:Object(n.a)(a.axis)}}return i}}}]);
//# sourceMappingURL=154.fa1547ce.chunk.js.map