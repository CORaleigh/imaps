(this.webpackJsonpimaps=this.webpackJsonpimaps||[]).push([[110,59,204,261],{1037:function(e,t,r){"use strict";r.d(t,"a",(function(){return D}));var i,a=r(79),o=r(779),s=r(105),n=r(111),l=r(353),c=r(222),p=r(88),d=r(86),u=r(89),b=r(192),h=r(565),y=r(87),m=r(91),f=r(81),g=r(83),O=r(80),v=r(92),j=(r(84),r(82),r(171),r(95));let w=i=class extends d.a{constructor(e){super(e),this.type="none"}clone(){return new i({type:this.type})}};Object(a.a)([Object(j.a)({none:"none",stayAbove:"stay-above"})],w.prototype,"type",void 0),w=i=Object(a.a)([Object(O.a)("esri.ground.NavigationConstraint")],w);var k,_=r(258);const S=y.a.getLogger("esri.Ground");let I=k=class extends(Object(d.b)(b.a)){constructor(e){super(e),this.opacity=1,this.surfaceColor=null,this.navigationConstraint=null,this.layers=new n.a;const t=e=>{e.parent&&e.parent!==this&&"remove"in e.parent&&e.parent.remove(e),e.parent=this,"elevation"!==e.type&&"base-elevation"!==e.type&&S.error(`Layer '${e.title}, id:${e.id}' of type '${e.type}' is not supported as a ground layer and will therefore be ignored. Only layers of type 'elevation' are supported.`)};this.layers.on("after-add",(e=>t(e.item))),this.layers.on("after-remove",(e=>(e=>{e.parent=null})(e.item)))}initialize(){this.when().catch((e=>{S.error("#load()","Failed to load ground",e)})),this.resourceInfo&&this.read(this.resourceInfo.data,this.resourceInfo.context)}destroy(){const e=this.layers.removeAll();for(const t of e)t.destroy();this.layers.destroy()}normalizeCtorArgs(e){return e&&"resourceInfo"in e&&(this._set("resourceInfo",e.resourceInfo),delete(e={...e}).resourceInfo),e}set layers(e){this._set("layers",Object(l.b)(e,this._get("layers")))}writeLayers(e,t,r,i){const a=[];e?(i={...i,layerContainerType:"ground"},e.forEach((e=>{if("write"in e){const t={};Object(c.b)(e)().write(t,i)&&a.push(t)}else i&&i.messages&&i.messages.push(new p.a("layer:unsupported",`Layers (${e.title}, ${e.id}) of type '${e.declaredClass}' cannot be persisted in the ground`,{layer:e}))})),t.layers=a):t.layers=a}load(e){return this.addResolvingPromise(this._loadFromSource(e)),Promise.resolve(this)}loadAll(){return Object(h.a)(this,(e=>{e(this.layers)}))}async queryElevation(e,t){await this.load({signal:null==t?void 0:t.signal});const{ElevationQuery:i}=await Promise.all([r.e(9),r.e(27),r.e(58)]).then(r.bind(null,1391));Object(m.t)(t);const a=new i,o=this.layers.filter(T).toArray();return a.queryAll(o,e,t)}async createElevationSampler(e,t){await this.load({signal:null==t?void 0:t.signal});const{ElevationQuery:i}=await Promise.all([r.e(9),r.e(27),r.e(58)]).then(r.bind(null,1391));Object(m.t)(t);const a=new i,o=this.layers.filter(T).toArray();return a.createSamplerAll(o,e,t)}clone(){const e={opacity:this.opacity,surfaceColor:Object(u.a)(this.surfaceColor),navigationConstraint:Object(u.a)(this.navigationConstraint),layers:this.layers.slice()};return this.loaded&&(e.loadStatus="loaded"),new k({resourceInfo:this.resourceInfo}).set(e)}read(e,t){this.resourceInfo||this._set("resourceInfo",{data:e,context:t}),super.read(e,t)}_loadFromSource(e){const t=this.resourceInfo;return t?this._loadLayersFromJSON(t.data,t.context,e):Promise.resolve(null)}_loadLayersFromJSON(e,t,i){const a=t&&t.origin||"web-scene",o=t&&t.portal||null,s=t&&t.url||null;return r.e(51).then(r.bind(null,1043)).then((({populateOperationalLayers:t})=>{Object(m.t)(i);const r=[];if(e.layers&&Array.isArray(e.layers)){const i={context:{origin:a,url:s,portal:o,layerContainerType:"ground"},defaultLayerType:"ArcGISTiledElevationServiceLayer"};r.push(t(this.layers,e.layers,i))}return Object(m.i)(r)})).then((()=>{}))}};function T(e){return"elevation"===e.type||function(e){return e&&"createElevationSampler"in e}(e)}Object(a.a)([Object(f.b)({json:{read:!1}})],I.prototype,"layers",null),Object(a.a)([Object(v.a)("layers")],I.prototype,"writeLayers",null),Object(a.a)([Object(f.b)({readOnly:!0})],I.prototype,"resourceInfo",void 0),Object(a.a)([Object(f.b)({type:Number,nonNullable:!0,range:{min:0,max:1},json:{type:g.a,read:{reader:_.b,source:"transparency"},write:{writer:(e,t)=>{t.transparency=Object(_.a)(e)},target:"transparency"}}})],I.prototype,"opacity",void 0),Object(a.a)([Object(f.b)({type:s.a,json:{type:[g.a],write:(e,t)=>{t.surfaceColor=e.toJSON().slice(0,3)}}})],I.prototype,"surfaceColor",void 0),Object(a.a)([Object(f.b)({type:w,json:{write:!0}})],I.prototype,"navigationConstraint",void 0),I=k=Object(a.a)([Object(O.a)("esri.Ground")],I);const x=I;var L=r(100),M=r(642),A=r(138),E=r(85),N=r(104);function B(e){var t;return!!(e&&e.loaded&&"capabilities"in e&&null!=e&&null!=(t=e.capabilities)&&t.operations&&"supportsEditing"in e.capabilities.operations&&!0===e.capabilities.operations.supportsEditing)&&!("editingEnabled"in e&&!e.editingEnabled)}var C=r(781);const U=y.a.getLogger("esri.support.groundUtils"),R={"world-elevation":{id:"worldElevation",url:"//elevation3d.arcgis.com/arcgis/rest/services/WorldElevation3D/Terrain3D/ImageServer",layerType:"ArcGISTiledElevationServiceLayer"},"world-topobathymetry":{id:"worldTopoBathymetry",url:"//elevation3d.arcgis.com/arcgis/rest/services/WorldElevation3D/TopoBathy3D/ImageServer",layerType:"ArcGISTiledElevationServiceLayer"}};var F=r(807),P=r(808);let G=class extends(Object(P.a)(Object(F.a)(A.a.EventedMixin(L.a)))){constructor(e){super(e),this.allLayers=new M.a({getCollections:()=>{var e,t,r;return[null==(e=this.basemap)?void 0:e.baseLayers,null==(t=this.ground)?void 0:t.layers,this.layers,null==(r=this.basemap)?void 0:r.referenceLayers]},getChildrenFunction:e=>"layers"in e?e.layers:null}),this.allTables=new M.a({getCollections:()=>[this.tables,this.layers],getChildrenFunction:e=>{const t=[];return"tables"in e&&t.push(e.tables),"layers"in e&&t.push(e.layers),t},itemFilterFunction:e=>{const t=e.parent;return t&&"tables"in t&&t.tables.includes(e)}}),this.basemap=null,this.editableLayers=new M.a({getCollections:()=>[this.allLayers],itemFilterFunction:B}),this.ground=new x,this._basemapCache=Object(C.b)()}destroy(){var e,t;this.allLayers.destroy(),this.allTables.destroy(),this.editableLayers.destroy(),null==(e=this.ground)||e.destroy(),null==(t=this.basemap)||t.destroy(),Object(C.c)(this._basemapCache),this._basemapCache=null}castBasemap(e){return Object(C.d)(e,this._basemapCache)}castGround(e){const t=function(e){let t=null;"string"==typeof e?e in R?t=new x({resourceInfo:{data:{layers:[R[e]]}}}):U.warn(`Unable to find ground definition for: ${e}. Try "world-elevation"`):t=Object(g.m)(x,e);return t}(e);return Object(E.j)(t)?this._get("ground"):t}findLayerById(e){return this.allLayers.find((t=>t.id===e))}findTableById(e){return this.allTables.find((t=>t.id===e))}};Object(a.a)([Object(f.b)({readOnly:!0,dependsOn:[]})],G.prototype,"allLayers",void 0),Object(a.a)([Object(f.b)({readOnly:!0})],G.prototype,"allTables",void 0),Object(a.a)([Object(f.b)({type:o.default})],G.prototype,"basemap",void 0),Object(a.a)([Object(N.a)("basemap")],G.prototype,"castBasemap",null),Object(a.a)([Object(f.b)({readOnly:!0})],G.prototype,"editableLayers",void 0),Object(a.a)([Object(f.b)({type:x,nonNullable:!0})],G.prototype,"ground",void 0),Object(a.a)([Object(N.a)("ground")],G.prototype,"castGround",null),G=Object(a.a)([Object(O.a)("esri.Map")],G);const D=G},1062:function(e,t,r){"use strict";r.d(t,"a",(function(){return S}));var i,a=r(79),o=r(121),s=r(681),n=r(302),l=r(88),c=r(159),p=r(86),d=r(89),u=r(87),b=r(85),h=r(81),y=r(104),m=r(93),f=r(80),g=r(92),O=r(83),v=r(101),j=r(970);const w="esri.webmap.Bookmark",k=u.a.getLogger(w);let _=i=class extends(Object(c.a)(p.a)){constructor(e){super(e),this.name=null,this.thumbnail=new j.a,this.timeExtent=null}set extent(e){Object(n.d)(k,"extent",{replacement:"viewpoint",version:"4.17"}),this._set("viewpoint",new s.a({targetGeometry:e.clone()})),this._set("extent",e)}castThumbnail(e){return"string"==typeof e?new j.a({url:e}):Object(O.m)(j.a,e)}set viewpoint(e){const{targetGeometry:t,scale:r}=e;Object(b.k)(t)&&("extent"===t.type?this._set("extent",t.clone()):"point"===t.type&&Object(b.j)(r)&&k.warn("Bookmark.viewpoint should include 'scale' when its targetGeometry is a point.",e)),this._set("viewpoint",e)}readViewpoint(e,t){const{extent:r,viewpoint:i}=t;return s.a.fromJSON(i||{targetGeometry:r})}writeViewpoint(e,t,r,i){if(!e)return;const{targetGeometry:a}=e;if(Object(b.k)(a)&&"extent"!==a.type){const e="Bookmark.viewpoint cannot be written to JSON when the viewpoint's targetGeometry is not an extent.";null!=i&&i.messages?i.messages.push(new l.a("property:unsupported",e)):k.error(e)}else t[r]=e.toJSON()}clone(){return new i(Object(d.a)({name:this.name,thumbnail:this.thumbnail,timeExtent:this.timeExtent,viewpoint:this.viewpoint}))}};Object(a.a)([Object(h.b)({type:v.a,nonNullable:!0,json:{read:!1,write:{isRequired:!0}}})],_.prototype,"extent",null),Object(a.a)([Object(h.b)({type:String,nonNullable:!0,json:{write:{isRequired:!0}}})],_.prototype,"name",void 0),Object(a.a)([Object(h.b)({type:j.a,json:{write:{overridePolicy:e=>({enabled:!(!e||!e.url)})}}})],_.prototype,"thumbnail",void 0),Object(a.a)([Object(y.a)("thumbnail")],_.prototype,"castThumbnail",null),Object(a.a)([Object(h.b)({type:o.a,json:{write:!0}})],_.prototype,"timeExtent",void 0),Object(a.a)([Object(h.b)({type:s.a,nonNullable:!0,json:{write:!0}})],_.prototype,"viewpoint",null),Object(a.a)([Object(m.a)("viewpoint",["extent","viewpoint"])],_.prototype,"readViewpoint",null),Object(a.a)([Object(g.a)("viewpoint")],_.prototype,"writeViewpoint",null),_=i=Object(a.a)([Object(f.a)(w)],_);const S=_},1173:function(e,t,r){"use strict";r.d(t,"a",(function(){return Et}));var i=r(79),a=r(166),o=r(1037),s=r(681),n=r(84),l=r(111),c=r(88),p=r(192),d=r(565),u=r(87),b=r(85),h=r(309),y=r(280),m=r(91),f=r(144),g=r(98),O=r(81),v=(r(82),r(83)),j=r(93),w=r(80),k=r(92),_=r(782),S=r(324),I=r(96),T=r(110),x=r(182),L=r(201),M=r(103),A=r(101);const E=u.a.getLogger("esri.networks.Network");let N=class extends(Object(h.a)(p.a)){constructor(e){super(e),this.id=null,this.title=null,this.layerUrl=null,this.dataElement=null,this.fullExtent=null,this.spatialReference=null,this.type=null,this.sourceJSON=null}initialize(){this.when().catch((e=>{var t,r;Object(m.l)(e)||E.error("#load()",`Failed to load layer (title: '${null!=(t=this.title)?t:"no title"}', id: '${null!=(r=this.id)?r:"no id"}')`,{error:e})}))}get datasetName(){var e;return null==(e=this.dataElement)?void 0:e.name}get owner(){var e;return null==(e=this.dataElement)?void 0:e.userIdentity}get schemaGeneration(){var e;return null==(e=this.dataElement)?void 0:e.schemaGeneration}get parsedUrl(){const e=this.layerUrl;return e?Object(g.M)(e):null}get featureServiceUrl(){const e=this.parsedUrl&&Object(L.f)(this.parsedUrl.path);return Object(b.k)(e)?e.url.path:null}get networkServiceUrl(){return this.featureServiceUrl?this.featureServiceUrl.replace(/\/FeatureServer/i,"/UtilityNetworkServer"):null}get layerId(){const e=this.parsedUrl&&Object(L.f)(this.parsedUrl.path);return Object(b.k)(e)?e.sublayer:null}async load(e){return this.addResolvingPromise(this._fetchDataElement(this.featureServiceUrl,this.layerId.toString(),e)),this.addResolvingPromise(this._fetchLayerMetaData(this.layerUrl,e)),this}getLayerIdBySourceId(e){if(this.dataElement){const t=this.dataElement.domainNetworks;for(const r of t){for(const t of r.edgeSources?r.edgeSources:[])if(t.sourceId===e)return t.layerId;for(const t of r.junctionSources?r.junctionSources:[])if(t.sourceId===e)return t.layerId}return null}return null}async _fetchLayerMetaData(e,t){const r=await Object(M.default)(e,{responseType:"json",query:{f:"json"},...t});this.sourceJSON=r.data,this.read(r.data,{origin:"service"})}async _fetchDataElement(e,t,r){if(this.dataElement)return;const i=await Object(M.default)(`${e}/queryDataElements`,{responseType:"json",query:{layers:JSON.stringify([t]),f:"json"},...r}).then((e=>{var t;return null==(t=e.data.layerDataElements)?void 0:t[0]}));i&&this.read(i,{origin:"service"})}};Object(i.a)([Object(O.b)({type:String,nonNullable:!0,json:{origins:{"web-map":{read:!0,write:{isRequired:!0}}},read:!1}})],N.prototype,"id",void 0),Object(i.a)([Object(O.b)({type:String,nonNullable:!0,json:{origins:{"web-map":{read:!0,write:{isRequired:!0}}},read:!1}})],N.prototype,"title",void 0),Object(i.a)([Object(O.b)({type:String,nonNullable:!0,json:{origins:{"web-map":{read:{source:"url"},write:{target:"url",isRequired:!0}}},read:!1}})],N.prototype,"layerUrl",void 0),Object(i.a)([Object(O.b)({type:Object,json:{origins:{service:{read:!0}},read:!1}})],N.prototype,"dataElement",void 0),Object(i.a)([Object(O.b)({type:A.a,json:{origins:{service:{read:{source:"extent"}}},read:!1}})],N.prototype,"fullExtent",void 0),Object(i.a)([Object(O.b)({type:I.a,json:{origins:{service:{read:{source:"extent.spatialReference"}}},read:!1}})],N.prototype,"spatialReference",void 0),Object(i.a)([Object(O.b)({type:["utility","trace"],readOnly:!0,json:{read:!1,write:!1}})],N.prototype,"type",void 0),Object(i.a)([Object(O.b)({readOnly:!0})],N.prototype,"datasetName",null),Object(i.a)([Object(O.b)({readOnly:!0})],N.prototype,"owner",null),Object(i.a)([Object(O.b)({readOnly:!0})],N.prototype,"schemaGeneration",null),Object(i.a)([Object(O.b)({readOnly:!0})],N.prototype,"parsedUrl",null),Object(i.a)([Object(O.b)({readOnly:!0})],N.prototype,"featureServiceUrl",null),Object(i.a)([Object(O.b)({readOnly:!0})],N.prototype,"networkServiceUrl",null),Object(i.a)([Object(O.b)({readOnly:!0})],N.prototype,"layerId",null),Object(i.a)([Object(O.b)()],N.prototype,"sourceJSON",void 0),N=Object(i.a)([Object(w.a)("esri.networks.Network")],N);const B=N;var C=r(86);let U=class extends C.a{constructor(e){super(e),this.conditionBarriers=[],this.outputConditions=[],this.functions=[],this.functionBarriers=[],this.traversabilityScope=null,this.shortestPathNetworkAttributeName=null,this.includeBarriers=null,this.validateConsistency=null,this.ignoreBarriersAtStartingPoints=null}};Object(i.a)([Object(O.b)({type:[Object],json:{write:!0}})],U.prototype,"conditionBarriers",void 0),Object(i.a)([Object(O.b)({type:[Object],json:{write:!0}})],U.prototype,"outputConditions",void 0),Object(i.a)([Object(O.b)({type:[Object],json:{write:!0}})],U.prototype,"functions",void 0),Object(i.a)([Object(O.b)({type:[Object],json:{write:!0}})],U.prototype,"functionBarriers",void 0),Object(i.a)([Object(O.b)({type:["junctions","edges","junctionsAndEdges"],json:{write:!0}})],U.prototype,"traversabilityScope",void 0),Object(i.a)([Object(O.b)({type:String,json:{write:!0}})],U.prototype,"shortestPathNetworkAttributeName",void 0),Object(i.a)([Object(O.b)({type:Boolean,json:{write:!0}})],U.prototype,"includeBarriers",void 0),Object(i.a)([Object(O.b)({type:Boolean,json:{write:!0}})],U.prototype,"validateConsistency",void 0),Object(i.a)([Object(O.b)({type:Boolean,json:{write:!0}})],U.prototype,"ignoreBarriersAtStartingPoints",void 0),U=Object(i.a)([Object(w.a)("esri.networks.support.TraceConfiguration")],U);const R=U;var F=r(90);const P=new F.a({connected:"connected",upstream:"upstream",downstream:"downstream",shortestPath:"shortest-path",subnetwork:"subnetwork","subnetwork controllers":"subnetwork-controllers",loops:"loops",isolation:"isolation"});let G=class extends R{constructor(e){super(e),this.filterBarriers=[],this.domainNetworkName=null,this.filterBitsetNetworkAttributeName=null,this.filterFunctionBarriers=[],this.filterScope=null,this.includeContainers=null,this.includeContent=null,this.includeIsolated=null,this.includeStructures=null,this.includeUpToFirstSpatialContainer=null,this.nearestNeighbor=null,this.outputFilterCategories=[],this.outputFilters=[],this.propagators=[],this.subnetworkName=null,this.targetTierName=null,this.tierName=null,this.validateLocatability=null}};Object(i.a)([Object(O.b)({type:[Object],json:{write:!0}})],G.prototype,"filterBarriers",void 0),Object(i.a)([Object(O.b)({type:String,json:{write:!0}})],G.prototype,"domainNetworkName",void 0),Object(i.a)([Object(O.b)({type:String,json:{write:!0}})],G.prototype,"filterBitsetNetworkAttributeName",void 0),Object(i.a)([Object(O.b)({type:[Object],json:{write:!0}})],G.prototype,"filterFunctionBarriers",void 0),Object(i.a)([Object(O.b)({type:["junctions","edges","junctionsAndEdges"],json:{write:!0}})],G.prototype,"filterScope",void 0),Object(i.a)([Object(O.b)({type:Boolean,json:{write:!0}})],G.prototype,"includeContainers",void 0),Object(i.a)([Object(O.b)({type:Boolean,json:{write:!0}})],G.prototype,"includeContent",void 0),Object(i.a)([Object(O.b)({type:Boolean,json:{write:!0}})],G.prototype,"includeIsolated",void 0),Object(i.a)([Object(O.b)({type:Boolean,json:{write:!0}})],G.prototype,"includeStructures",void 0),Object(i.a)([Object(O.b)({type:Boolean,json:{write:!0}})],G.prototype,"includeUpToFirstSpatialContainer",void 0),Object(i.a)([Object(O.b)({type:Object,json:{write:!0}})],G.prototype,"nearestNeighbor",void 0),Object(i.a)([Object(O.b)({type:[Object],json:{write:!0}})],G.prototype,"outputFilterCategories",void 0),Object(i.a)([Object(O.b)({type:[Object],json:{write:!0}})],G.prototype,"outputFilters",void 0),Object(i.a)([Object(O.b)({type:[Object],json:{write:!0}})],G.prototype,"propagators",void 0),Object(i.a)([Object(O.b)({type:String,json:{write:!0}})],G.prototype,"subnetworkName",void 0),Object(i.a)([Object(O.b)({type:String,json:{write:!0}})],G.prototype,"targetTierName",void 0),Object(i.a)([Object(O.b)({type:String,json:{write:!0}})],G.prototype,"tierName",void 0),Object(i.a)([Object(O.b)({type:Boolean,json:{write:!0}})],G.prototype,"validateLocatability",void 0),G=Object(i.a)([Object(w.a)("esri.networks.support.UNTraceConfiguration")],G);const D=G;let W=class extends h.b{constructor(e){super(e),this.globalId=null,this.title=null,this.traceConfiguration=null,this.creationDate=null,this.creator=null,this.description=null,this.minStartingPoints=null,this.resultTypes=[],this.tags=[],this.traceType=null}readTraceConfiguration(e,t){return void 0!==e.tierName?D.fromJSON(e):R.fromJSON(e)}};Object(i.a)([Object(O.b)({type:String,nonNullable:!0,json:{origins:{"web-map":{read:{source:"id"},write:{target:"id",isRequired:!0}},service:{read:{source:"globalId"}}},read:!1}})],W.prototype,"globalId",void 0),Object(i.a)([Object(O.b)({type:String,nonNullable:!0,json:{origins:{"web-map":{read:{source:"title"},write:{target:"title",isRequired:!0}},service:{read:{source:"name"}}},read:!1}})],W.prototype,"title",void 0),Object(i.a)([Object(O.b)({type:R,json:{origins:{service:{read:!0}},read:!1}})],W.prototype,"traceConfiguration",void 0),Object(i.a)([Object(j.a)("service","traceConfiguration")],W.prototype,"readTraceConfiguration",null),Object(i.a)([Object(O.b)({type:Date,json:{origins:{service:{read:!0}},read:!1}})],W.prototype,"creationDate",void 0),Object(i.a)([Object(O.b)({type:String,json:{origins:{service:{read:!0}},read:!1}})],W.prototype,"creator",void 0),Object(i.a)([Object(O.b)({type:String,json:{origins:{service:{read:!0}},read:!1}})],W.prototype,"description",void 0),Object(i.a)([Object(O.b)({type:["none","one","many"],json:{origins:{service:{read:{source:"minNumStartingPoints"}}},read:!1}})],W.prototype,"minStartingPoints",void 0),Object(i.a)([Object(O.b)({type:[Object],json:{origins:{service:{read:!0}},read:!1}})],W.prototype,"resultTypes",void 0),Object(i.a)([Object(O.b)({type:[String],json:{origins:{service:{read:!0}},read:!1}})],W.prototype,"tags",void 0),Object(i.a)([Object(O.b)({type:P.apiValues,json:{type:P.jsonValues,origins:{service:{read:P.read}},read:!1}})],W.prototype,"traceType",void 0),W=Object(i.a)([Object(w.a)("esri.networks.support.NamedTraceConfiguration")],W);const V=W;let q=class extends C.a{constructor(e){super(e),this.id=null,this.name=null}};Object(i.a)([Object(O.b)({type:Number,json:{read:{source:"terminalId"},write:{target:"terminalId"}}})],q.prototype,"id",void 0),Object(i.a)([Object(O.b)({type:String,json:{read:{source:"terminalName"},write:{target:"terminalName"}}})],q.prototype,"name",void 0),Object(i.a)([Object(O.b)({type:Boolean,json:{write:!0}})],q.prototype,"isUpstreamTerminal",void 0),q=Object(i.a)([Object(w.a)("esri.networks.support.Terminal")],q);const J=q,$=new F.a({esriUNTMBidirectional:"bidirectional",esriUNTMDirectional:"directional"});let H=class extends C.a{constructor(e){super(e),this.defaultConfiguration=null,this.id=null,this.name=null,this.terminals=[],this.traversabilityModel=null}};Object(i.a)([Object(O.b)({type:String,json:{write:!0}})],H.prototype,"defaultConfiguration",void 0),Object(i.a)([Object(O.b)({type:Number,json:{read:{source:"terminalConfigurationId"},write:{target:"terminalConfigurationId"}}})],H.prototype,"id",void 0),Object(i.a)([Object(O.b)({type:String,json:{read:{source:"terminalConfigurationName"},write:{target:"terminalConfigurationName"}}})],H.prototype,"name",void 0),Object(i.a)([Object(O.b)({type:[J],json:{write:!0}})],H.prototype,"terminals",void 0),Object(i.a)([Object(O.b)({type:$.apiValues,json:{type:$.jsonValues,read:$.read,write:$.write}})],H.prototype,"traversabilityModel",void 0),H=Object(i.a)([Object(w.a)("esri.networks.support.TerminalConfiguration")],H);const z=H;let K=class extends B{constructor(e){super(e),this.sharedNamedTraceConfigurations=[],this.type="utility"}get serviceTerritoryFeatureLayerId(){var e;return null==(e=this.dataElement)?void 0:e.serviceTerritoryFeatureLayerId}get rulesTableId(){var e;return null==(e=this.sourceJSON)?void 0:e.systemLayers.rulesTableId}get rulesTableUrl(){return this.sourceJSON?`${this.featureServiceUrl}/${this.rulesTableId}`:null}get subnetworksTableId(){var e;return null==(e=this.sourceJSON)?void 0:e.systemLayers.subnetworksTableId}get subnetworksTableUrl(){return this.sourceJSON?`${this.featureServiceUrl}/${this.subnetworksTableId}`:null}get terminalConfigurations(){var e;return(null==(e=this.dataElement)?void 0:e.terminalConfigurations.map((e=>z.fromJSON(e))))||[]}get domainNetworkNames(){var e;return(null==(e=this.dataElement)?void 0:e.domainNetworks.map((e=>e.domainNetworkName)))||[]}async load(e){return this.addResolvingPromise(super.load(e)),this.addResolvingPromise(this._loadNamedTraceConfigurationsFromNetwork(e)),this}getTerminalConfiguration(e){let t=null,r=null;const i=e.layer;let a=null;if("feature"!==(null==i?void 0:i.type))return null;if(a=i.layerId,null===a)return null;const o=e.attributes;if(null==o)return null;for(const d of Object.keys(o))"ASSETGROUP"===d.toUpperCase()&&(t=e.getAttribute(d)),"ASSETTYPE"===d.toUpperCase()&&(r=e.getAttribute(d));if(!this.dataElement)return null;let s=null;const n=this.dataElement.domainNetworks;for(const d of n){var l;const e=null==(l=d.junctionSources)?void 0:l.find((e=>e.layerId===a));if(e){var c;const i=null==(c=e.assetGroups)?void 0:c.find((e=>e.assetGroupCode===t));if(i){var p;const e=null==(p=i.assetTypes)?void 0:p.find((e=>e.assetTypeCode===r));if(e){s=e.terminalConfigurationId;break}}}}if(null!=s){const e=this.dataElement.terminalConfigurations,t=null==e?void 0:e.find((e=>e.terminalConfigurationId===s));return t?z.fromJSON(t):null}return null}getTierNames(e){var t;const r=null==(t=this.dataElement)?void 0:t.domainNetworks.find((t=>t.domainNetworkName===e));return(null==r?void 0:r.tiers.map((e=>e.name)))||[]}async _loadNamedTraceConfigurationsFromNetwork(e){var t;if(0===(null==(t=this.sharedNamedTraceConfigurations)?void 0:t.length))return;const r=this.sharedNamedTraceConfigurations.map((e=>e.globalId)),i=await this._fetchTraceConfigData(this.networkServiceUrl,r,e);for(const a of this.sharedNamedTraceConfigurations){const e=null==i?void 0:i.find((e=>e.globalId===a.globalId));e&&a.read(e,{origin:"service"})}}_fetchTraceConfigData(e,t,r){return Object(M.default)(`${e}/traceConfigurations/query`,{responseType:"json",query:{globalIds:JSON.stringify(t),f:"json"},...r}).then((e=>e.data.traceConfigurations))}};Object(i.a)([Object(O.b)({type:[V],json:{origins:{"web-map":{read:{source:"traceConfigurations"},write:{target:"traceConfigurations"}},service:{read:{source:"traceConfigurations"}}},read:!1}})],K.prototype,"sharedNamedTraceConfigurations",void 0),Object(i.a)([Object(O.b)({type:["utility"],readOnly:!0,json:{read:!1,write:!1}})],K.prototype,"type",void 0),Object(i.a)([Object(O.b)({readOnly:!0})],K.prototype,"serviceTerritoryFeatureLayerId",null),Object(i.a)([Object(O.b)({readOnly:!0})],K.prototype,"rulesTableId",null),Object(i.a)([Object(O.b)({readOnly:!0})],K.prototype,"rulesTableUrl",null),Object(i.a)([Object(O.b)({readOnly:!0})],K.prototype,"subnetworksTableId",null),Object(i.a)([Object(O.b)({readOnly:!0})],K.prototype,"subnetworksTableUrl",null),Object(i.a)([Object(O.b)({readOnly:!0})],K.prototype,"terminalConfigurations",null),Object(i.a)([Object(O.b)({readOnly:!0})],K.prototype,"domainNetworkNames",null),K=Object(i.a)([Object(w.a)("esri.networks.UtilityNetwork")],K);const Q=K;var Y=r(181),X=r(547),Z=r(844),ee=r(718),te=r(643),re=r(781);let ie=class extends C.a{constructor(e){super(e),this.facilityIdField=null,this.layerId=null,this.nameField=null,this.siteIdField=null,this.sublayerId=null}};Object(i.a)([Object(O.b)({type:String,json:{write:!0}})],ie.prototype,"facilityIdField",void 0),Object(i.a)([Object(O.b)({type:String,json:{write:!0}})],ie.prototype,"layerId",void 0),Object(i.a)([Object(O.b)({type:String,json:{write:!0}})],ie.prototype,"nameField",void 0),Object(i.a)([Object(O.b)({type:String,json:{write:!0}})],ie.prototype,"siteIdField",void 0),Object(i.a)([Object(O.b)({type:Number,json:{read:{source:"subLayerId"},write:{target:"subLayerId"},origins:{"web-scene":{read:!1,write:!1}}}})],ie.prototype,"sublayerId",void 0),ie=Object(i.a)([Object(w.a)("esri.layers.support.FacilityLayerInfo")],ie);const ae=ie;let oe=class extends C.a{constructor(e){super(e),this.facilityIdField=null,this.layerId=null,this.levelIdField=null,this.levelNumberField=null,this.longNameField=null,this.shortNameField=null,this.sublayerId=null,this.verticalOrderField=null}};Object(i.a)([Object(O.b)({type:String,json:{write:!0}})],oe.prototype,"facilityIdField",void 0),Object(i.a)([Object(O.b)({type:String,json:{write:!0}})],oe.prototype,"layerId",void 0),Object(i.a)([Object(O.b)({type:String,json:{write:!0}})],oe.prototype,"levelIdField",void 0),Object(i.a)([Object(O.b)({type:String,json:{write:!0}})],oe.prototype,"levelNumberField",void 0),Object(i.a)([Object(O.b)({type:String,json:{write:!0}})],oe.prototype,"longNameField",void 0),Object(i.a)([Object(O.b)({type:String,json:{write:!0}})],oe.prototype,"shortNameField",void 0),Object(i.a)([Object(O.b)({type:Number,json:{read:{source:"subLayerId"},write:{target:"subLayerId"},origins:{"web-scene":{read:!1,write:!1}}}})],oe.prototype,"sublayerId",void 0),Object(i.a)([Object(O.b)({type:String,json:{write:!0}})],oe.prototype,"verticalOrderField",void 0),oe=Object(i.a)([Object(w.a)("esri.layers.support.LevelLayerInfo")],oe);const se=oe;let ne=class extends C.a{constructor(e){super(e),this.layerId=null,this.nameField=null,this.siteIdField=null,this.sublayerId=null}};Object(i.a)([Object(O.b)({type:String,json:{write:!0}})],ne.prototype,"layerId",void 0),Object(i.a)([Object(O.b)({type:String,json:{write:!0}})],ne.prototype,"nameField",void 0),Object(i.a)([Object(O.b)({type:String,json:{write:!0}})],ne.prototype,"siteIdField",void 0),Object(i.a)([Object(O.b)({type:Number,json:{read:{source:"subLayerId"},write:{target:"subLayerId"},origins:{"web-scene":{read:!1,write:!1}}}})],ne.prototype,"sublayerId",void 0),ne=Object(i.a)([Object(w.a)("esri.layers.support.SiteLayerInfo")],ne);const le=ne;let ce=class extends C.a{constructor(e){super(e),this.levelLayer=null,this.facilityLayer=null,this.siteLayer=null}};Object(i.a)([Object(O.b)({type:se,json:{write:!0}})],ce.prototype,"levelLayer",void 0),Object(i.a)([Object(O.b)({type:ae,json:{write:!0}})],ce.prototype,"facilityLayer",void 0),Object(i.a)([Object(O.b)({type:le,json:{write:!0}})],ce.prototype,"siteLayer",void 0),ce=Object(i.a)([Object(w.a)("esri.support.MapFloorInfo")],ce);const pe=ce;var de,ue=r(89);let be=de=class extends C.a{constructor(e){super(e),this.activeRange=null,this.currentRangeExtent=null,this.fullRangeExtent=null}clone(){return new de(Object(ue.a)({activeRange:this.activeRange,currentRangeExtent:this.currentRangeExtent,fullRangeExtent:this.fullRangeExtent}))}};Object(i.a)([Object(O.b)({type:String,nonNullable:!0,json:{read:{source:"activeRangeName"},write:{target:"activeRangeName",isRequired:!0}}})],be.prototype,"activeRange",void 0),Object(i.a)([Object(O.b)({type:[Number],json:{write:!0}})],be.prototype,"currentRangeExtent",void 0),Object(i.a)([Object(O.b)({type:[Number],json:{write:!0}})],be.prototype,"fullRangeExtent",void 0),be=de=Object(i.a)([Object(w.a)("esri.webdoc.RangeInfo")],be);const he=be;var ye;let me=ye=class extends C.a{constructor(e){super(e),this.enabled=!1,this.longNames=!1,this.minimized=!1,this.pinnedLevels=!1,this.site=null,this.facility=null,this.level=null}clone(){return new ye(Object(ue.a)({enabled:this.enabled,longNames:this.longNames,minimized:this.minimized,pinnedLevels:this.pinnedLevels,site:this.site,facility:this.facility,level:this.level}))}};Object(i.a)([Object(O.b)({type:Boolean,json:{read:{source:"enabled"},write:{target:"enabled"}}})],me.prototype,"enabled",void 0),Object(i.a)([Object(O.b)({type:Boolean,json:{read:{source:"longNames"},write:{target:"longNames"}}})],me.prototype,"longNames",void 0),Object(i.a)([Object(O.b)({type:Boolean,json:{read:{source:"minimized"},write:{target:"minimized"}}})],me.prototype,"minimized",void 0),Object(i.a)([Object(O.b)({type:Boolean,json:{read:{source:"pinnedLevels"},write:{target:"pinnedLevels"}}})],me.prototype,"pinnedLevels",void 0),Object(i.a)([Object(O.b)({type:String,json:{read:{source:"site"},write:{target:"site"}}})],me.prototype,"site",void 0),Object(i.a)([Object(O.b)({type:String,json:{read:{source:"facility"},write:{target:"facility"}}})],me.prototype,"facility",void 0),Object(i.a)([Object(O.b)({type:String,json:{read:{source:"level"},write:{target:"level"}}})],me.prototype,"level",void 0),me=ye=Object(i.a)([Object(w.a)("esri.webdoc.widgets.FloorFilter")],me);const fe=me;var ge;const Oe=new F.a({slider:"slider",picker:"picker"});let ve=ge=class extends C.a{constructor(e){super(e),this.interactionMode=null,this.numStops=null,this.stopInterval=null}clone(){return new ge({interactionMode:this.interactionMode,numStops:this.numStops,stopInterval:this.stopInterval})}};Object(i.a)([Object(O.b)({type:Oe.apiValues,nonNullable:!0,json:{type:Oe.jsonValues,default:null,read:{reader:Oe.read},write:{isRequired:!0,writer:Oe.write}}})],ve.prototype,"interactionMode",void 0),Object(i.a)([Object(O.b)({type:Number,json:{read:{source:"numberOfStops"},write:{target:"numberOfStops",overridePolicy(){const e=null!=this.stopInterval;return{enabled:!e,isRequired:!e}}}}})],ve.prototype,"numStops",void 0),Object(i.a)([Object(O.b)({type:Number,json:{write:{overridePolicy(){return{isRequired:null==this.numStops}}}}})],ve.prototype,"stopInterval",void 0),ve=ge=Object(i.a)([Object(w.a)("esri.webdoc.widgets.Range")],ve);const je=ve;var we,ke=r(121),_e=r(242),Se=r(132);let Ie=we=class extends C.a{constructor(e){super(e),this.currentTimeExtent=null,this.fullTimeExtent=null,this.loop=!1,this.numStops=null,this.numThumbs=null,this.stopDelay=null,this.stopInterval=null,this.stops=null}readCurrentTimeExtent(e){if(!e)return;const t=null!=e[0]?new Date(e[0]):null,r=null!=e[1]?new Date(e[1]):null;return new ke.a({start:t,end:r})}writeCurrentTimeExtent(e,t,r){e&&Object(Se.c)(r,[Object(b.k)(e.start)?e.start.getTime():null,Object(b.k)(e.end)?e.end.getTime():null],t)}readFullTimeExtent(e,t){const r=t.properties;if(!r)return;const i=null!=r.endTime?new Date(r.endTime):null,a=null!=r.startTime?new Date(r.startTime):null;return new ke.a({start:a,end:i})}writeFullTimeExtent(e,t){if(!e)return;const r=t.properties=t.properties||{},i=e.end,a=e.start;i&&(r.endTime=Object(b.k)(i)?i.getTime():null),a&&(r.startTime=Object(b.k)(a)?a.getTime():null)}readStopInterval(e,t,r){return e?_e.a.fromJSON({value:e.interval,unit:e.units},r):null}writeStopInterval(e,t,r,i){if(!e)return;const a=e.toJSON(i);Object(Se.c)(r,{interval:a.value,units:a.unit},t)}readStops(e){return e&&e.length?e.map((e=>new Date(e))):null}writeStops(e,t,r){e&&e.length&&Object(Se.c)(r,e.map((e=>e.getTime())),t)}clone(){return new we(Object(ue.a)({currentTimeExtent:this.currentTimeExtent,fullTimeExtent:this.fullTimeExtent,loop:this.loop,numStops:this.numStops,numThumbs:this.numThumbs,stopDelay:this.stopDelay,stopInterval:this.stopInterval,stops:this.stops}))}};Object(i.a)([Object(O.b)({type:ke.a,json:{read:{source:"properties.currentTimeExtent"},write:{target:"properties.currentTimeExtent"}}})],Ie.prototype,"currentTimeExtent",void 0),Object(i.a)([Object(j.a)("currentTimeExtent")],Ie.prototype,"readCurrentTimeExtent",null),Object(i.a)([Object(k.a)("currentTimeExtent")],Ie.prototype,"writeCurrentTimeExtent",null),Object(i.a)([Object(O.b)({type:ke.a,json:{read:{source:["properties.endTime","properties.startTime"]},write:{target:{"properties.endTime":{type:Number},"properties.startTime":{type:Number}}}}})],Ie.prototype,"fullTimeExtent",void 0),Object(i.a)([Object(j.a)("fullTimeExtent")],Ie.prototype,"readFullTimeExtent",null),Object(i.a)([Object(k.a)("fullTimeExtent")],Ie.prototype,"writeFullTimeExtent",null),Object(i.a)([Object(O.b)({type:Boolean,nonNullable:!0,json:{default:!1,read:{source:"properties.loop"},write:{target:"properties.loop"}}})],Ie.prototype,"loop",void 0),Object(i.a)([Object(O.b)({type:Number,json:{read:{source:"properties.numberOfStops"},write:{target:"properties.numberOfStops",overridePolicy(){var e;const t=!!this.stopInterval,r=!(null==(e=this.stops)||!e.length),i=!(t||r);return{enabled:i,isRequired:i}}}}})],Ie.prototype,"numStops",void 0),Object(i.a)([Object(O.b)({type:[1,2],nonNullable:!0,json:{read:{source:"properties.thumbCount"},write:{target:"properties.thumbCount",isRequired:!0}}})],Ie.prototype,"numThumbs",void 0),Object(i.a)([Object(O.b)({type:Number,nonNullable:!0,json:{read:{source:"properties.thumbMovingRate"},write:{target:"properties.thumbMovingRate",isRequired:!0}}})],Ie.prototype,"stopDelay",void 0),Object(i.a)([Object(O.b)({type:_e.a,json:{read:{source:"properties.timeStopInterval"},write:{target:"properties.timeStopInterval",overridePolicy(){var e;const t=null!=this.numStops,r=!(null==(e=this.stops)||!e.length);return{enabled:!r,isRequired:!(t||r)}}}}})],Ie.prototype,"stopInterval",void 0),Object(i.a)([Object(j.a)("stopInterval")],Ie.prototype,"readStopInterval",null),Object(i.a)([Object(k.a)("stopInterval")],Ie.prototype,"writeStopInterval",null),Object(i.a)([Object(O.b)({type:[Date],json:{read:{source:"properties.stops"},write:{target:"properties.stops",overridePolicy(){return{isRequired:null==this.numStops&&!this.stopInterval}}}}})],Ie.prototype,"stops",void 0),Object(i.a)([Object(j.a)("stops")],Ie.prototype,"readStops",null),Object(i.a)([Object(k.a)("stops")],Ie.prototype,"writeStops",null),Ie=we=Object(i.a)([Object(w.a)("esri.webdoc.widgets.TimeSlider")],Ie);const Te=Ie;var xe;let Le=xe=class extends C.a{constructor(e){super(e),this.range=null,this.timeSlider=null,this.floorFilter=null}clone(){return new xe(Object(ue.a)({range:this.range,timeSlider:this.timeSlider,floorFilter:this.floorFilter}))}};Object(i.a)([Object(O.b)({type:je,json:{write:!0}})],Le.prototype,"range",void 0),Object(i.a)([Object(O.b)({type:Te,json:{write:!0}})],Le.prototype,"timeSlider",void 0),Object(i.a)([Object(O.b)({type:fe,json:{write:!0}})],Le.prototype,"floorFilter",void 0),Le=xe=Object(i.a)([Object(w.a)("esri.webdoc.Widgets")],Le);const Me=Le,Ae={width:600,height:400},Ee=1.5;var Ne=r(694);function Be(e){return{enabled:!(null==e||!e.length)}}var Ce,Ue=r(95),Re=r(268);let Fe=Ce=class extends C.a{constructor(e){super(e),this.exactMatch=!1,this.name=null,this.type=null}clone(){return new Ce({exactMatch:this.exactMatch,type:this.type,name:this.name})}};Object(i.a)([Object(O.b)({type:Boolean,json:{write:!0}})],Fe.prototype,"exactMatch",void 0),Object(i.a)([Object(O.b)({type:String,json:{write:!0}})],Fe.prototype,"name",void 0),Object(i.a)([Object(Ue.a)(Re.a)],Fe.prototype,"type",void 0),Fe=Ce=Object(i.a)([Object(w.a)("esri.webdoc.applicationProperties.SearchLayerField")],Fe);const Pe=Fe;var Ge;let De=Ge=class extends C.a{constructor(e){super(e),this.field=null,this.id=null,this.subLayer=null}clone(){return new Ge(Object(ue.a)({field:this.field,id:this.id,subLayer:this.subLayer}))}};Object(i.a)([Object(O.b)({type:Pe,json:{write:{isRequired:!0}}})],De.prototype,"field",void 0),Object(i.a)([Object(O.b)({type:String,json:{write:{isRequired:!0}}})],De.prototype,"id",void 0),Object(i.a)([Object(O.b)({type:v.a,json:{write:!0}})],De.prototype,"subLayer",void 0),De=Ge=Object(i.a)([Object(w.a)("esri.webdoc.applicationProperties.SearchLayer")],De);const We=De;var Ve;let qe=Ve=class extends C.a{constructor(e){super(e),this.exactMatch=!1,this.name=null,this.type=null}clone(){return new Ve({exactMatch:this.exactMatch,type:this.type,name:this.name})}};Object(i.a)([Object(O.b)({type:Boolean,json:{write:!0}})],qe.prototype,"exactMatch",void 0),Object(i.a)([Object(O.b)({type:String,json:{write:!0}})],qe.prototype,"name",void 0),Object(i.a)([Object(Ue.a)(Re.a)],qe.prototype,"type",void 0),qe=Ve=Object(i.a)([Object(w.a)("esri.webdoc.applicationProperties.SearchTableField")],qe);const Je=qe;var $e;let He=$e=class extends C.a{constructor(e){super(e),this.field=null,this.id=null}clone(){return new $e(Object(ue.a)({field:this.field,id:this.id}))}};Object(i.a)([Object(O.b)({type:Je,json:{write:{isRequired:!0}}})],He.prototype,"field",void 0),Object(i.a)([Object(O.b)({type:String,json:{write:{isRequired:!0}}})],He.prototype,"id",void 0),He=$e=Object(i.a)([Object(w.a)("esri.webdoc.applicationProperties.SearchTable")],He);const ze=He;var Ke;const Qe=l.a.ofType(We),Ye=l.a.ofType(ze);let Xe=Ke=class extends C.a{constructor(e){super(e),this.addressSearchEnabled=!0,this.enabled=!0,this.hintText=null,this.layers=new Qe,this.tables=new Ye}readAddressSearchEnabled(e){return!e}writeAddressSearchEnabled(e,t,r){t[r]=!e}clone(){return new Ke(Object(ue.a)({addressSearchEnabled:this.addressSearchEnabled,enabled:this.enabled,hintText:this.hintText,layers:this.layers,tables:this.tables}))}};Object(i.a)([Object(O.b)({type:Boolean,nonNullable:!0,json:{read:{source:"disablePlaceFinder"},write:{target:"disablePlaceFinder",isRequired:!0},origins:{"web-scene":{read:!1,write:!1}}}})],Xe.prototype,"addressSearchEnabled",void 0),Object(i.a)([Object(j.a)("addressSearchEnabled")],Xe.prototype,"readAddressSearchEnabled",null),Object(i.a)([Object(k.a)("addressSearchEnabled")],Xe.prototype,"writeAddressSearchEnabled",null),Object(i.a)([Object(O.b)({type:Boolean,nonNullable:!0,json:{write:!0,origins:{"web-map":{write:{isRequired:!0}},"web-scene":{default:!0,write:!0}}}})],Xe.prototype,"enabled",void 0),Object(i.a)([Object(O.b)({type:String,json:{write:!0}})],Xe.prototype,"hintText",void 0),Object(i.a)([Object(O.b)({type:Qe,json:{write:{overridePolicy:Be},origins:{"web-scene":{write:{isRequired:!0}}}}})],Xe.prototype,"layers",void 0),Object(i.a)([Object(O.b)({type:Ye,json:{read:!0,write:{overridePolicy:Be}}})],Xe.prototype,"tables",void 0),Xe=Ke=Object(i.a)([Object(w.a)("esri.webdoc.applicationProperties.Search")],Xe);const Ze=Xe;var et;let tt=et=class extends C.a{constructor(e){super(e),this.search=null}clone(){return new et(Object(ue.a)({search:this.search}))}};Object(i.a)([Object(O.b)({type:Ze,json:{write:!0}})],tt.prototype,"search",void 0),tt=et=Object(i.a)([Object(w.a)("esri.webdoc.applicationProperties.Viewing")],tt);const rt=tt;var it;let at=it=class extends C.a{constructor(e){super(e),this.editing=null,this.offline=null,this.viewing=null}clone(){return new it(Object(ue.a)({editing:this.editing,offline:this.offline,viewing:this.viewing}))}};Object(i.a)([Object(O.b)({json:{write:!0}})],at.prototype,"editing",void 0),Object(i.a)([Object(O.b)({json:{write:!0}})],at.prototype,"offline",void 0),Object(i.a)([Object(O.b)({type:rt,json:{write:!0}})],at.prototype,"viewing",void 0),at=it=Object(i.a)([Object(w.a)("esri.webmap.ApplicationProperties")],at);const ot=at;var st,nt=r(1062),lt=r(100),ct=r(916);let pt=st=class extends lt.a{constructor(e){super(e),this.background=null,this.rangeInfo=null,this.spatialReference=null,this.viewpoint=null}clone(){return new st(Object(ue.a)({background:this.background,rangeInfo:this.rangeInfo,spatialReference:this.spatialReference,viewpoint:this.viewpoint}))}};Object(i.a)([Object(O.b)({type:ct.a})],pt.prototype,"background",void 0),Object(i.a)([Object(O.b)({type:he})],pt.prototype,"rangeInfo",void 0),Object(i.a)([Object(O.b)({type:I.a})],pt.prototype,"spatialReference",void 0),Object(i.a)([Object(O.b)({type:s.a})],pt.prototype,"viewpoint",void 0),pt=st=Object(i.a)([Object(w.a)("esri.webmap.InitialViewProperties")],pt);const dt=pt;var ut=r(719);class bt extends ut.a{constructor(e,t){super(e,t,"webmap")}}const ht=new bt(2,24),yt="Web Map",mt=l.a.ofType(nt.a),ft=l.a.ofType(Q),gt=u.a.getLogger("esri.WebMap"),Ot=new Map;Ot.set("image/jpeg","jpeg"),Ot.set("image/jpg","jpg"),Ot.set("image/png","png"),Ot.set("image/gif","gif");const vt="ArcGIS API for JavaScript",jt="CollectorDisabled",wt="Collector",kt="Data Editing",_t="OfflineDisabled",St="Offline",It="Workforce Project",Tt="Workforce Worker",xt="Workforce Dispatcher",Lt="DeveloperBasemap",Mt=["NatGeo_World_Map","Ocean_Basemap","USA_Topo_Maps","World_Imagery","World_Street_Map","World_Terrain_Base","World_Topo_Map","World_Hillshade","Canvas/World_Light_Gray_Base","Canvas/World_Light_Gray_Reference","Canvas/World_Dark_Gray_Base","Canvas/World_Dark_Gray_Reference","Ocean/World_Ocean_Base","Ocean/World_Ocean_Reference","Reference/World_Boundaries_and_Places","Reference/World_Reference_Overlay","Reference/World_Transportation"].map((e=>e.toLowerCase()));let At=class extends(Object(h.a)(p.a.LoadableMixin(Object(y.b)(o.a)))){constructor(e){super(e),this.applicationProperties=null,this.bookmarks=new mt,this.floorInfo=null,this.initialViewProperties=new dt,this.portalItem=null,this.presentation=null,this.sourceVersion=null,this.widgets=null,this.utilityNetworks=null,this.authoringApp=this.authoringAppVersion=null,this._isAuthoringAppSetByUser=this._isAuthoringAppVersionSetByUser=!1}destroy(){const e=this.portalItem;this.portalItem=null,null==e||e.destroy()}initialize(){if(this.when().catch((e=>{gt.error("#load()","Failed to load web map",e)})),this.resourceInfo){let t;try{t=this._validateJSON(this.resourceInfo)}catch(e){return void this.addResolvingPromise(Promise.reject(e))}this.read(t)}}set authoringApp(e){this._isAuthoringAppSetByUser=!0,this._set("authoringApp",e)}writeAuthoringApp(e,t){e&&this._isAuthoringAppSetByUser?t.authoringApp=e:t.authoringApp=vt}set authoringAppVersion(e){this._isAuthoringAppVersionSetByUser=!0,this._set("authoringAppVersion",e)}writeAuthoringAppVersion(e,t){e&&this._isAuthoringAppVersionSetByUser?t.authoringAppVersion=e:t.authoringAppVersion=a.d}readInitialViewProperties(e,t){var r;const i=new dt;t.background&&(i.background=ct.a.fromJSON(t.background));const a=null==(r=t.initialState)?void 0:r.viewpoint;return a&&(a.rotation&&bt.parse(t.version||"","webmap").lessThan(2,20)&&"ArcGIS Pro"===t.authoringApp&&(a.rotation*=-1),i.viewpoint=s.a.fromJSON(a)),t.mapRangeInfo&&(i.rangeInfo=he.fromJSON(t.mapRangeInfo)),t.spatialReference&&(i.spatialReference=I.a.fromJSON(t.spatialReference)),i}writeInitialViewProperties(e,t,r,i){if(!e)return;const a=e.background;a&&a.color&&(t.background=a.write({},i)),e.viewpoint&&(t.initialState={viewpoint:e.viewpoint.write({},i)}),e.rangeInfo&&(t.mapRangeInfo=e.rangeInfo.toJSON(i)),e.spatialReference&&(t.spatialReference=e.spatialReference.write({},i))}writeLayers(e,t,r,i){t[r]=this._writeLayers(e,i,"operational-layers")}readSourceVersion(e,t){const[r,i]=t.version.split(".");return new bt(parseInt(r,10),parseInt(i,10))}writeSourceVersion(e,t,r){t[r]=`${ht.major}.${ht.minor}`}writeTables(e,t,r,i){const a=this._writeLayers(e,i,"tables");a.length&&(t[r]=a)}get thumbnailUrl(){return this.portalItem&&this.portalItem.thumbnailUrl||null}set thumbnailUrl(e){e?(this._override("thumbnailUrl",e),this._thumbnailFilename=this._generateCustomThumbnailFilename(e)):this._clearThumbnailOverride()}load(e){return this.addResolvingPromise(this._loadFromSource()),Promise.resolve(this)}loadAll(){return Object(d.a)(this,(e=>{e(this.ground,this.basemap,this.layers,this.tables)}))}read(e,t){t={...t,origin:"web-map"};const r=this._getAuthoringPropsState();Object(S.b)(this,e,(t=>super.read(e,t)),t),this._restoreAuthoringPropsFromState(r)}write(e,t){if("loaded"!==this.loadStatus){const e=new c.a("webmap:not-loaded","Web map must be loaded before it can be serialized");throw gt.error("#toJSON()","Web map must be loaded before it can be serialized",this.loadError||this.loadStatus),e}return this._removeDanglingLayerRefs(),t={...t,origin:"web-map",restrictedWebMapWriting:!0,webmap:this},super.write(e,t)}async save(e){e=e||{},this._validateItem(),await this._updateFromPromise,await this.load(),await this._loadLayerContainers(),await this._beforeSave(),await this._validateMap();const t=this.portalItem,r={origin:"web-map",messages:[],writtenProperties:[],url:t.itemUrl&&Object(g.M)(t.itemUrl),portal:t.portal||Y.a.getDefault()},i=this.write({},r);return this._validateJSONForWriting(r,e),await this._updateItemProperties(t),await this._updateItem(t,i,r),await this._updateItemThumbnail(),t}async saveAs(e,t){t=t||{};const r=this._getPortalItem(e);await this._updateFromPromise,await this.load(),await this._loadLayerContainers(),await this._beforeSave(),await this._validateMap();const i={origin:"web-map",messages:[],writtenProperties:[],url:null,portal:r.portal},a=this.write({},i);this._validateJSONForWriting(i,t),await this._updateItemPropertiesForSaveAs(r);const o=this._getThumbnailState();return await this._createItem(r,a,i,t),this._restoreThumbnailFromState(o),await this._updateItemThumbnail(),r}async updateFrom(e,t){const r=this._updateFromInternal(e,t);this._updateFromPromise=r,await r,r===this._updateFromPromise&&(this._updateFromPromise=null)}getLayerJSONFromResourceInfo(e){var t,r,i,a;const o=this.resourceInfo;return this._collectAllLayersJSON(Object(n.d)([null==o||null==(t=o.baseMap)?void 0:t.baseMapLayers,null==o?void 0:o.operationalLayers,null==(r=this.basemap)||null==(i=r.resourceInfo)||null==(a=i.data)?void 0:a.baseMapLayers])).find((t=>t.id===e.id))}_collectAllLayersJSON(e){return e.reduce(((e,t)=>(e.push(t),"GroupLayer"===t.layerType&&(e=e.concat(this._collectAllLayersJSON(t.layers||[]))),e)),[])}_writeLayers(e,t,r){return t={...t,layerContainerType:r},e.map((e=>Object(b.s)(Object(Ne.a)(e,"tables"===r?null:this.getLayerJSONFromResourceInfo(e),t)))).filter(Boolean).toArray()}_loadFromSource(){return this.resourceInfo?this._loadFromJSON(this.resourceInfo,{origin:"web-map"}):this.portalItem&&this.portalItem.id?this._loadFromItem(this.portalItem):Promise.resolve(null)}_loadFromItem(e){return e.load().catch((e=>{throw new c.a("webmap:load-portal-item","Failed to load portal item",{error:e})})).then((()=>{if("Web Map"!==e.type)throw new c.a("webmap:invalid-portal-item","Invalid portal item type '${type}', expected 'Web Map'",{type:e.type})})).then((()=>e.fetchData())).then((t=>(this.resourceInfo=t,this._readAndLoadFromJSON(t,{origin:"web-map",portal:e.portal||Y.a.getDefault()})))).then((()=>this._computeInitialViewpoint()))}_readAndLoadFromJSON(e,t){const r=this._validateJSON(e);return this.read(r,t),this._loadFromJSON(r,t)}_validateJSON(e){const t=bt.parse(e.version||"","webmap");return ht.validate(t),e.version=`${t.major}.${t.minor}`,e}_loadFromJSON(e,t){const i={context:{...t,layerContainerType:"operational-layers"}};return this.portalItem&&(i.context.portal=this.portalItem.portal||Y.a.getDefault()),r.e(51).then(r.bind(null,1043)).then((({populateOperationalLayers:t})=>{const r=[],a=e.operationalLayers;a&&a.length&&r.push(t(this.layers,a,i));const o={...i,context:{...i.context,layerContainerType:"tables"},defaultLayerType:"ArcGISFeatureLayer"},s=e.tables;return s&&s.length&&r.push(t(this.tables,s,o)),Object(m.i)(r).then((()=>{}))}))}async _computeInitialViewpoint(){var e,t;let r=this.initialViewProperties;if(null==(e=r)||null==(t=e.viewpoint)?void 0:t.targetGeometry)return;const i=await this._getExtentFromItem();i&&(r=r?r.clone():new dt,r.viewpoint=new s.a,r.viewpoint.targetGeometry=i,this.initialViewProperties=r)}async _getExtentFromItem(){var e,t;const i=null==(e=this.initialViewProperties)?void 0:e.spatialReference,a=null==(t=this.portalItem)?void 0:t.extent;return i&&a?i.isWGS84?a.clone():i.isWebMercator?Object(x.b)(a):(await r.e(35).then(r.bind(null,1213))).getGeometryServiceURL(this.portalItem).then((e=>{const t=new te.a;return t.geometries=[a],t.outSpatialReference=i,Object(ee.a)(e,t)})).then((e=>e[0])).catch((e=>(gt.error("Error projecting item's extent:",e),null))):null}_removeDanglingLayerRefs(){const e=this.applicationProperties,t=e&&e.viewing&&e.viewing.search,r=e=>!!this.allLayers.find((t=>t.id===e));t&&t.layers&&(t.layers=t.layers.filter((e=>r(e.id)))),t&&t.tables&&(t.tables=t.tables.filter((e=>!!this.tables.find((t=>t.id===e.id)))));const i=e&&e.editing&&e.editing.locationTracking;i&&i.info&&!r(i.info.layerId)&&(e.editing=null);const a=this.presentation&&this.presentation.slides;a&&a.forEach((e=>{e.visibleLayers&&(e.visibleLayers=e.visibleLayers.filter((e=>r(e.id))))}))}async _validateMap(){var e;if(null==(e=this.basemap)||!e.baseLayers.length)throw new c.a("webmap:save","Map does not have a valid basemap with a base layer.");let t=null;if(await Object(f.g)((()=>{const e=Object(re.e)(this.initialViewProperties,this.basemap);return t=e.spatialReference,!e.updating})),!Object(T.d)(t,this.initialViewProperties.spatialReference))throw new c.a("webmap:save","The spatial reference of the basemap is not compatible with the one from the map.",{expected:this.initialViewProperties.spatialReference,actual:t})}_validateItem(){if(!this.portalItem)throw gt.error("save: requires the portalItem property to be set"),new c.a("webmap:portal-item-not-set","Portal item to save to has not been set on the WebMap");this._validateItemType(this.portalItem)}_validateItemType(e){if(e.type!==yt)throw new c.a("webmap:portal-item-wrong-type",`Portal item needs to have type "${yt}"`)}_loadLayerContainers(){const e=[];return this.basemap&&e.push(this.basemap.load()),this.ground&&e.push(this.ground.load()),Object(m.i)(e).then((()=>{}))}async _beforeSave(){const e=[];for(const t of this.allLayers)if("beforeSave"in t&&"function"==typeof t.beforeSave){const r=t.beforeSave();r&&e.push(r)}await Object(m.i)(e)}_loadAllLayers(){const e=this._getAllLayersAndTables().map((e=>e.load()));return Object(m.i)(e).then((()=>{}))}_getAllLayersAndTables(){return this.allLayers.concat(this.allTables)}_validateJSONForWriting(e,t){let r=e.messages.filter((e=>"error"===e.type)).map((e=>new c.a(e.name,e.message,e.details)));if(t.ignoreUnsupported&&(r=r.filter((e=>"layer:unsupported"!==e.name&&"symbol:unsupported"!==e.name&&"symbol-layer:unsupported"!==e.name&&"property:unsupported"!==e.name&&"url:unsupported"!==e.name))),r.length>0)throw new c.a("webmap:save","Failed to save webmap due to unsupported or invalid content. See 'details.errors' for more detailed information",{errors:r})}async _updateItemProperties(e){e.extent=await this._getWGS84Extent(this.initialViewProperties.viewpoint.targetGeometry),await this._updateTypeKeywords(e)}async _updateItemPropertiesForSaveAs(e){Object(Z.c)(e,jt),Object(Z.c)(e,_t),Object(Z.c)(e,It),Object(Z.c)(e,Tt),Object(Z.c)(e,xt),Object(Z.c)(e,"Offline Map Areas"),Object(Z.c)(e,"FieldMapsDisabled"),await this._updateItemProperties(e)}async _getWGS84Extent(e){const t=e.clone().normalize();let r;if(t.length>1)for(const i of t)r?i.width>r.width&&(r=i):r=i;else r=t[0];return this._projectToWGS84(r)}async _projectToWGS84(e){const t=e.spatialReference;if(t.isWGS84)return e.clone();if(t.isWebMercator)return Object(x.e)(e);const i=await r.e(35).then(r.bind(null,1213)),a=await i.getGeometryServiceURL(this.portalItem),o=new te.a;return o.geometries=[e],o.outSpatialReference=I.a.WGS84,(await Object(ee.a)(a,o))[0]}async _updateTypeKeywords(e){Object(Z.a)(e,vt),await this._loadAllLayers(),this._evalCollectorKeyword(e),this._evalDataEditingKeyword(e),this._evalOfflineKeyword(e),this._evalDeveloperBasemapKeyword(e),e.typeKeywords&&(e.typeKeywords=e.typeKeywords.filter(((e,t,r)=>r.indexOf(e)===t)))}_evalCollectorKeyword(e){Object(Z.b)(e,jt)||Object(Z.b)(e,It)||Object(Z.b)(e,Tt)||Object(Z.b)(e,xt)||!this._hasEditableFeatureLayer()?Object(Z.c)(e,wt):Object(Z.a)(e,wt)}_evalDataEditingKeyword(e){this._hasEditableFeatureLayer()?Object(Z.a)(e,kt):Object(Z.c)(e,kt)}_evalOfflineKeyword(e){!Object(Z.b)(e,_t)&&this._isOfflineCapableMap()?Object(Z.a)(e,St):Object(Z.c)(e,St)}_evalDeveloperBasemapKeyword(e){Object(re.g)(this.basemap)?Object(Z.a)(e,Lt):Object(Z.c)(e,Lt)}_hasEditableFeatureLayer(){return this._getAllLayersAndTables().some((e=>e.loaded&&this._isFeatureServiceLayer(e)&&e.capabilities.operations.supportsEditing&&e.editingEnabled))}_isFeatureServiceLayer(e){return!("feature"!==e.type||!e.source||"feature-layer"!==e.source.type)}_isOfflineCapableMap(){return this._getAllLayersAndTables().filter((e=>"group"!==e.type)).every((e=>e.loaded&&this._isOfflineCapableLayer(e)))}_isOfflineCapableLayer(e){return this._isFeatureServiceLayer(e)&&e.capabilities.operations.supportsSync||("tile"===e.type||"vector-tile"===e.type)&&(e.capabilities.operations.supportsExportTiles||this._isExportableAGOLTileLayer(e)||Object(re.h)(e))&&e.spatialReference.equals(this.initialViewProperties.spatialReference)}_isExportableAGOLTileLayer(e){return"tile"===e.type&&Object(L.d)(e.url)&&Mt.some((t=>e.url.toLowerCase().indexOf("/"+t+"/")>-1))}async _updateItem(e,t,r){await e.update({data:t}),this._syncUpInstanceWithItem(e,t,r)}async _createItem(e,t,r,i){const a=this.portalItem,o=!!(a&&a.id&&a.portal.user),s=e.portal;if(await s._signIn(),!await this._canCopyItem(a,o,s))throw new c.a("webmap:save-as-copy-not-allowed","Owner of this map does not allow others to save a copy");await s.user.addItem({item:e,folder:i.folder,data:t}),this.portalItem=e,this._syncUpInstanceWithItem(e,t,r)}async _canCopyItem(e,t,r){return!(Object(b.k)(e)&&e.id&&e.typeKeywords&&e.typeKeywords.indexOf("useOnly")>-1)||e.portal.portalHostname===r.portalHostname&&(t||await e.reload(),"admin"===e.itemControl||"update"===e.itemControl)}_syncUpInstanceWithItem(e,t,r){h.b.prototype.read.call(this,{version:t.version,authoringApp:t.authoringApp,authoringAppVersion:t.authoringAppVersion},{origin:"web-map",ignoreDefaults:!0,url:e.itemUrl&&Object(g.M)(e.itemUrl)}),Object(_.a)(r),this.resourceInfo=t}async _updateItemThumbnail(){this.thumbnailUrl&&this._isOverridden("thumbnailUrl")&&(await this.portalItem.updateThumbnail({thumbnail:this.thumbnailUrl,filename:this._thumbnailFilename}),this._clearThumbnailOverride())}_getPortalItem(e){let t=X.default.from(e);return t.id&&(t=t.clone(),t.id=null),t.type||(t.type=yt),t.portal||(t.portal=Y.a.getDefault()),this._validateItemType(t),t}async _updateFromInternal(e,t){if(t=t||{},await Object(f.g)((()=>e.ready)),this._updateInitialViewProperties(e,t),e.map===this)for(const r of e.allLayerViews)for(const e of["visible","featureEffect"])e in r&&e in r.layer&&r._isOverridden(e)&&(r.layer[e]=r[e]);await this._updateThumbnailUrl(e,t)}_updateInitialViewProperties(e,t){var r;if(t.backgroundExcluded||(this.initialViewProperties.background=null==(r=e.background)?void 0:r.clone()),this.initialViewProperties.spatialReference=e.spatialReference.clone(),t.viewpointExcluded||(this.initialViewProperties.viewpoint=new s.a({rotation:e.rotation,scale:t.scalePreserved?e.scale:null,targetGeometry:this._getViewExtent(e)})),!t.widgetsExcluded)for(const i of e.persistableViewModels)i.updateWebDocument(this)}_getViewExtent(e){const t=e.center.clone().normalize(),r=e.extent.clone(),i=r.width/2;return r.xmin=t.x-i,r.xmax=t.x+i,r}async _updateThumbnailUrl(e,t){if(t.thumbnailExcluded)return;const r=function(e,t){t=t||Ae;let{width:r,height:i}=t;const a=r/i;return a<Ee?i=r/Ee:a>Ee&&(r=i*Ee),r>e.width&&(i*=e.width/r,r=e.width),i>e.height&&(r*=e.height/i,i=e.height),{width:Math.round(r),height:Math.round(i)}}(e,t.thumbnailSize),i=await e.takeScreenshot({format:"png",width:r.width,height:r.height});this._setAutoGeneratedThumbnail(i.dataUrl)}_setAutoGeneratedThumbnail(e){this.thumbnailUrl=e,this._thumbnailFilename=null}_clearThumbnailOverride(){this._clearOverride("thumbnailUrl"),this.clear("thumbnailUrl","user"),this._thumbnailFilename=null}_generateCustomThumbnailFilename(e){if(Object(g.w)(e)){const t=Object(g.h)(e),r=t&&t.mediaType,i=r&&Ot.get(r.toLowerCase())||null,a=`thumbnail${Date.now()}`;return i?`${a}.${i}`:a}return null}_getThumbnailState(){let e=this.thumbnailUrl;return e&&(e=this._isOverridden("thumbnailUrl")?e:Object(g.d)(e,"w","8192")),{thumbnailUrl:e,filename:this._thumbnailFilename}}_restoreThumbnailFromState(e){this.thumbnailUrl=e.thumbnailUrl,this._thumbnailFilename=e.filename}_getAuthoringPropsState(){return{authoringApp:this.authoringApp,authoringAppVersion:this.authoringAppVersion,isAuthoringAppSetByUser:this._isAuthoringAppSetByUser,isAuthoringAppVersionSetByUser:this._isAuthoringAppVersionSetByUser}}_restoreAuthoringPropsFromState(e){e.isAuthoringAppSetByUser?this.authoringApp=e.authoringApp:this._isAuthoringAppSetByUser=!1,e.isAuthoringAppVersionSetByUser?this.authoringAppVersion=e.authoringAppVersion:this._isAuthoringAppVersionSetByUser=!1}static fromJSON(e){const t=e;if(!t)throw new c.a("webmap:empty-resource","Expected a JSON resource but got nothing");return new this({resourceInfo:t})}};At.VERSION=ht,Object(i.a)([Object(O.b)({type:ot,json:{write:!0}})],At.prototype,"applicationProperties",void 0),Object(i.a)([Object(O.b)({type:String,json:{write:{allowNull:!0,ignoreOrigin:!0}}})],At.prototype,"authoringApp",null),Object(i.a)([Object(k.a)("authoringApp")],At.prototype,"writeAuthoringApp",null),Object(i.a)([Object(O.b)({type:String,json:{write:{allowNull:!0,ignoreOrigin:!0}}})],At.prototype,"authoringAppVersion",null),Object(i.a)([Object(k.a)("authoringAppVersion")],At.prototype,"writeAuthoringAppVersion",null),Object(i.a)([Object(O.b)({json:{read:{source:"baseMap"},write:{target:"baseMap"}}})],At.prototype,"basemap",void 0),Object(i.a)([Object(O.b)({type:mt,json:{write:{overridePolicy:e=>({enabled:!!(e&&e.length>0),ignoreOrigin:!0})}}})],At.prototype,"bookmarks",void 0),Object(i.a)([Object(O.b)({type:pe,json:{read:{source:"mapFloorInfo"},write:{target:"mapFloorInfo"}}})],At.prototype,"floorInfo",void 0),Object(i.a)([Object(O.b)({type:dt,nonNullable:!0,json:{read:{source:["background","initialState.viewpoint","mapRangeInfo","spatialReference"]},write:{ignoreOrigin:!0,target:{background:{type:ct.a},"initialState.viewpoint":{type:s.a},mapRangeInfo:{type:he},spatialReference:{type:I.a}}}}})],At.prototype,"initialViewProperties",void 0),Object(i.a)([Object(j.a)("initialViewProperties")],At.prototype,"readInitialViewProperties",null),Object(i.a)([Object(k.a)("initialViewProperties")],At.prototype,"writeInitialViewProperties",null),Object(i.a)([Object(O.b)({json:{read:!1,write:{target:"operationalLayers",ignoreOrigin:!0}}})],At.prototype,"layers",void 0),Object(i.a)([Object(k.a)("layers")],At.prototype,"writeLayers",null),Object(i.a)([Object(O.b)({type:X.default})],At.prototype,"portalItem",void 0),Object(i.a)([Object(O.b)({json:{write:!0}})],At.prototype,"presentation",void 0),Object(i.a)([Object(O.b)()],At.prototype,"resourceInfo",void 0),Object(i.a)([Object(O.b)({readOnly:!0,type:bt,json:{read:{source:"version"},write:{allowNull:!0,ignoreOrigin:!0,target:"version",isRequired:!0}}})],At.prototype,"sourceVersion",void 0),Object(i.a)([Object(j.a)("sourceVersion")],At.prototype,"readSourceVersion",null),Object(i.a)([Object(k.a)("sourceVersion")],At.prototype,"writeSourceVersion",null),Object(i.a)([Object(O.b)({json:{read:!1,write:{ignoreOrigin:!0}}})],At.prototype,"tables",void 0),Object(i.a)([Object(k.a)("tables")],At.prototype,"writeTables",null),Object(i.a)([Object(O.b)()],At.prototype,"thumbnailUrl",null),Object(i.a)([Object(O.b)({type:Me,json:{write:!0}})],At.prototype,"widgets",void 0),Object(i.a)([Object(O.b)({type:ft,json:{read:!0,write:!0}})],At.prototype,"utilityNetworks",void 0),At=Object(i.a)([Object(w.a)("esri.WebMap")],At);const Et=At},137:function(e,t,r){"use strict";r.d(t,"a",(function(){return a})),r.d(t,"b",(function(){return s})),r.d(t,"c",(function(){return o}));r(85);var i=r(98);r(391),r(342);function a(e,t){return t?{...t,query:{...e,...t.query}}:{query:e}}function o(e){return"string"==typeof e?Object(i.M)(e):e}function s(e,t,r){const i={};for(const a in e){if("declaredClass"===a)continue;const o=e[a];if(null!=o&&"function"!=typeof o)if(Array.isArray(o)){i[a]=[];for(let e=0;e<o.length;e++)i[a][e]=s(o[e])}else if("object"==typeof o)if(o.toJSON){const e=o.toJSON(r&&r[a]);i[a]=t?e:JSON.stringify(e)}else i[a]=t?o:JSON.stringify(o);else i[a]=o}return i}},1385:function(e,t,r){"use strict";r.r(t),r.d(t,"Bookmarks",(function(){return Ye}));var i=r(1),a=r(79),o=r(263),s=r(124),n=r(85),l=r(136),c=r(146),p=(r(84),r(82),r(104)),d=r(81),u=r(80),b=r(184),h=r(970),y=r(165),m=r(100);r(83);let f=class extends m.a{constructor(e){super(e)}get editedBookmark(){const{bookmark:e}=this;return e?this._get("editedBookmark")||e.clone():null}get state(){return this._get("state")}set state(e){this.validationState=void 0,this.loading=void 0,this._set("state",e)}};Object(a.a)([Object(d.b)()],f.prototype,"bookmark",void 0),Object(a.a)([Object(d.b)({readOnly:!0})],f.prototype,"editedBookmark",null),Object(a.a)([Object(d.b)()],f.prototype,"state",null),Object(a.a)([Object(d.b)()],f.prototype,"validationState",void 0),Object(a.a)([Object(d.b)()],f.prototype,"loading",void 0),f=Object(a.a)([Object(u.a)("esri.widgets.Bookmarks.UserState")],f);const g=f;var O=r(681),v=r(111),j=r(88),w=r(138),k=r(87),_=r(1062),S=r(614);const I="esri.widgets.Bookmarks.BookmarksViewModel",T=k.a.getLogger(I),x=v.a.ofType(_.a),L={width:128,height:128,format:"png"},M={takeScreenshot:!0,captureViewpoint:!0,captureRotation:!0,captureScale:!0,captureTimeExtent:!0},A={time:!0};let E=class extends(Object(S.a)(w.a.EventedAccessor)){constructor(e){super(e),this.abilities={...A},this.activeBookmark=null}destroy(){this.view=null,this._set("activeBookmark",null)}castAbilities(e){return{...A,...e}}set bookmarks(e){void 0!==e?this._override("bookmarks",e):this._clearOverride("bookmarks")}get bookmarks(){return this.get("view.map.bookmarks")||new x}set defaultCreateOptions(e){this._set("defaultCreateOptions",{...M,...e})}get defaultCreateOptions(){return M}set defaultEditOptions(e){this._set("defaultEditOptions",{...M,...e})}get defaultEditOptions(){return M}get state(){const e=this.get("view");return e&&!e.ready?"loading":"ready"}get view(){return this._get("view")}set view(e){e&&"2d"!==e.type&&T.error(new j.a("view:invalid-view","SceneView is not supported",{view:e})),this._set("view",e)}async createBookmark(e){const{view:t,defaultCreateOptions:r,abilities:i}=this;if(!t){const e=new j.a("create-bookmark:invalid-view","Cannot create a bookmark without a view.");return T.error(e),Promise.reject(e)}const{takeScreenshot:a,screenshotSettings:o,captureViewpoint:s,captureRotation:l,captureScale:c,captureTimeExtent:p}={...r,...e},d=a?await this._createThumbnail(o):void 0,u=i.time&&p&&Object(n.k)(t.timeExtent)?t.timeExtent.clone():void 0;return new _.a({...d&&{thumbnail:d},...p&&{timeExtent:u},...s&&{viewpoint:this._createViewpoint({view:t,captureScale:c,captureRotation:l})}})}async editBookmark(e,t){const{view:r,defaultEditOptions:i}=this;if(!r){const e=new j.a("edit-bookmark:invalid-view","Cannot edit a bookmark without a view.");return T.error(e),Promise.reject(e)}const{takeScreenshot:a,screenshotSettings:o,captureViewpoint:s,captureRotation:l,captureScale:c,captureTimeExtent:p}={...i,...t},d=a?await this._createThumbnail(o):void 0;return d&&(e.thumbnail=d),s&&(e.viewpoint=this._createViewpoint({view:r,captureScale:c,captureRotation:l})),p&&Object(n.k)(r.timeExtent)&&(e.timeExtent=r.timeExtent.clone()),this.emit("bookmark-edit",{bookmark:e}),e}goTo(e){const{abilities:t,view:r}=this;if(!r){const e=new j.a("go-to:invalid-view","Cannot go to a bookmark without a view");return T.error(e),Promise.reject(e)}const i=null==e?void 0:e.viewpoint;if(!i){const t=new j.a("go-to:invalid-bookmark","Cannot go to a bookmark that does not contain a 'viewpoint'.",{bookmark:e});return T.error(t),Promise.reject(t)}this._set("activeBookmark",e);const a={target:i},o=this.callGoTo(a),s=null==e?void 0:e.timeExtent;return t.time&&s&&(r.timeExtent=s),this.emit("bookmark-select",{bookmark:e}),o.catch((()=>{})).then((()=>this._set("activeBookmark",null))),o}async _createThumbnail(e){const t=await this.view.takeScreenshot({...L,...e});return new h.a({url:t.dataUrl})}_createViewpoint({view:e,captureRotation:t,captureScale:r}){var i,a;const o=null==(i=e.viewpoint)?void 0:i.clone();return new O.a({targetGeometry:null==(a=e.extent)?void 0:a.clone(),rotation:t&&(null==o?void 0:o.rotation)||0,scale:r&&(null==o?void 0:o.scale)||0})}};Object(a.a)([Object(d.b)()],E.prototype,"abilities",void 0),Object(a.a)([Object(p.a)("abilities")],E.prototype,"castAbilities",null),Object(a.a)([Object(d.b)({readOnly:!0})],E.prototype,"activeBookmark",void 0),Object(a.a)([Object(d.b)({type:x})],E.prototype,"bookmarks",null),Object(a.a)([Object(d.b)()],E.prototype,"defaultCreateOptions",null),Object(a.a)([Object(d.b)()],E.prototype,"defaultEditOptions",null),Object(a.a)([Object(d.b)({readOnly:!0})],E.prototype,"state",null),Object(a.a)([Object(d.b)({value:null})],E.prototype,"view",null),E=Object(a.a)([Object(u.a)(I)],E);const N=E;var B=r(908),C=r(815),U=r(413),R=r(112),F=r(193),P=r(377),G=r(133),D=r(1212);const W="data-bookmark-uid",V="esri-bookmarks esri-widget--panel",q="esri-bookmarks__loader-container",J="esri-bookmarks__loader",$="esri-bookmarks__list",H="esri-bookmarks__list--sortable",z="esri-bookmarks__bookmark",K="esri-bookmarks__bookmark-button",Q="esri-bookmarks__bookmark-image-container",Y="esri-bookmarks__bookmark-edit-button-container",X="esri-bookmarks__bookmark-edit-button",Z="esri-bookmarks_bookmark-drag-handle",ee="esri-bookmarks_bookmark-drag-handle-icon",te="esri-bookmarks__bookmark-icon",re="esri-bookmarks__image",ie="esri-bookmarks__bookmark-label",ae="esri-bookmarks__bookmark-name",oe="esri-bookmarks__bookmark-time-extent",se="esri-bookmarks__bookmark--active",ne="esri-widget__content--empty",le="esri-bookmarks__no-bookmarks-heading",ce="esri-widget__no-bookmark-icon",pe="esri-bookmarks__no-bookmarks-description",de="esri-bookmarks__adding-bookmark",ue="esri-bookmarks__add-bookmark",be="esri-bookmarks__add-bookmark-button",he="esri-bookmarks__add-bookmark-icon",ye="esri-bookmarks__authoring-card",me="esri-bookmarks__authoring-container",fe="esri-bookmarks__authoring-form",ge="esri-bookmarks__authoring-label",Oe="esri-bookmarks__authoring-actions",ve="esri-bookmarks__authoring-input--invalid",je="esri-bookmarks__authoring-delete-button",we="esri-bookmarks__authoring-cancel-button",ke="esri-bookmarks__time-extent-container",_e="esri-bookmarks__time-extent",Se="esri-bookmarks__time-extent-group",Ie="esri-bookmarks__time-extent-date",Te="esri-bookmarks__time-extent-time",xe="esri-widget",Le="esri-widget--disabled",Me="esri-button",Ae="esri-button--tertiary",Ee="esri-input",Ne="esri-icon-handle-vertical",Be="esri-icon-plus",Ce="esri-icon-edit",Ue="esri-icon-handle-horizontal",Re="esri-icon-refresh",Fe="esri-icon-link",Pe="esri-icon-erase",Ge="esri-icon-bookmark",De="esri-widget__heading",We="esri-icon-loading-indicator",Ve="esri-rotating",qe={addBookmark:!0,thumbnail:!0,time:!0},Je=/^https:\/\/.*/i;let $e=class extends y.a{constructor(e,t){super(e,t),this._handles=new s.a,this._addInputNode=null,this._editInputNode=null,this._urlEditInputNode=null,this._addBookmarkButtonNode=null,this._focusAddBookmarkButton=!1,this._focusEditInputBox=!1,this._focusAddInputBox=!1,this._focusUrlEditInputBox=!1,this._sortable=null,this._sortableNode=null,this._focusSortUid=null,this._selectedSortUid=null,this._sortableSavedItems=null,this._editIncludeTimeExtent=null,this._userState=null,this.defaultCreateOptions=null,this.defaultEditOptions=null,this.bookmarks=null,this.disabled=!1,this.editingEnabled=!1,this.headingLevel=2,this.goToOverride=null,this.iconClass=Ge,this.label=void 0,this.messages=null,this.messagesCommon=null,this.messagesUnits=null,this.view=null,this.viewModel=new N,this.visibleElements={...qe}}initialize(){this.own([Object(l.a)(this,"viewModel.bookmarks",(()=>this._bookmarksInitialized())),Object(l.a)(this,"editingEnabled",(()=>this._toggleSorting()))])}destroy(){this._destroySortable(),this._handles.destroy(),this._handles=null,this._editMenu.destroy()}loadDependencies(){return Promise.all([r.e(60).then(r.bind(null,1403)),r.e(54).then(r.bind(null,1404))])}get _editMenuItems(){var e,t;const{messages:r,_userState:i}=this,a=null==i||null==(e=i.editedBookmark)||null==(t=e.thumbnail)?void 0:t.url;return[new C.a({label:null==r?void 0:r.menu.refreshThumbnail,iconClass:Re,clickFunction:()=>this._refreshThumbnail()}),new C.a({label:Je.test(a)?null==r?void 0:r.menu.editImageUrl:null==r?void 0:r.menu.useImageUrl,iconClass:Fe,clickFunction:()=>this._startUseImageUrl()}),a?new C.a({label:null==r?void 0:r.menu.removeThumbnail,iconClass:Pe,clickFunction:()=>this._removeThumbnail()}):null].filter(Boolean)}get _editMenu(){const{_editMenuItems:e,messages:t}=this,r=this._get("_editMenu");r&&r.destroy();const i=new B.a({iconClass:Ue,label:null==t?void 0:t.menu.label});return i.items=e,i}castVisibleElements(e){return{...qe,...e}}endAddBookmark(){this._userState=null}goTo(e){return this.viewModel.goTo(e)}render(){const{state:e}=this.viewModel,t="loading"===e?this.renderLoading():this.renderBookmarks();return Object(G.a)("div",{class:this.classes(V,xe,{[Le]:this.disabled})},t)}startAddBookmark(){this._userState=new g({state:"add"}),this._focusAddInputBox=!0,this.scheduleRender()}renderLoading(){return Object(G.a)("div",{class:q,key:"loader"},Object(G.a)("div",{class:J}))}renderNoBookmarksContainer(){const{messages:e}=this;return Object(G.a)("div",{class:ne,key:"no-bookmarks"},Object(G.a)("span",{"aria-hidden":"true",class:this.classes(ce,Ge)}),Object(G.a)(U.a,{level:this.headingLevel,class:this.classes(De,le)},null==e?void 0:e.noBookmarksHeading),Object(G.a)("p",{class:pe},null==e?void 0:e.noBookmarksDescription))}renderAddBookmarkLoading(){var e;return Object(G.a)("div",{key:"adding-bookmark",class:de},Object(G.a)("span",{"aria-hidden":"true",class:this.classes(We,Ve)}),null==(e=this.messages)?void 0:e.addingBookmark)}renderBookmarkItems(e){if(!e)return null;const{_userState:t,editingEnabled:r}=this;return e.map((e=>r&&e&&t&&("edit"===t.state||"edit-thumbnail"===t.state)&&t.bookmark===e?"edit-thumbnail"===t.state?this.renderEditingBookmarkUrl(t.editedBookmark):this.renderEditingBookmark(t.editedBookmark):this.renderBookmark(e))).toArray()}renderBookmarksContainer(e){var t;const{_userState:r,editingEnabled:i}=this,a="add"===(null==r?void 0:r.state),o=i&&!a?this.renderAddBookmarkButton():null,s=i?a&&r.loading?this.renderAddBookmarkLoading():"add"===(null==r?void 0:r.state)?this.renderAddingBookmark():null:null;return[Object(G.a)("ul",{key:"bookmark-list","aria-label":null==(t=this.messages)?void 0:t.widgetLabel,class:this.classes($,{[H]:this.editingEnabled}),afterCreate:this._sortNodeCreated,afterRemoved:this._destroySortable,"data-node-ref":"_sortableNode",bind:this},this.renderBookmarkItems(e)),o,s]}renderAddBookmarkButton(){var e;return this.visibleElements.addBookmark?Object(G.a)("div",{key:"add-bookmark-item",class:ue},Object(G.a)("button",{class:this.classes(Me,Ae,be),onclick:this.startAddBookmark,afterCreate:this._storeAddBookmarkButton,afterUpdate:this._storeAddBookmarkButton,"data-node-ref":"_addBookmarkButtonNode",bind:this,type:"button"},Object(G.a)("span",{"aria-hidden":"true",class:this.classes(he,Be)}),null==(e=this.messages)?void 0:e.addBookmark)):null}renderBookmarks(){const{bookmarks:e}=this.viewModel,t=e&&e.filter(Boolean),r=t&&t.length,i=r||this.editingEnabled?this.renderBookmarksContainer(t):null;return[r?null:this.renderNoBookmarksContainer(),i]}renderEditContainer(e){const{messagesCommon:t}=this;return Object(G.a)("div",{class:Y,key:"edit-container"},Object(G.a)("button",{title:null==t?void 0:t.edit,"aria-label":null==t?void 0:t.edit,"data-bookmark":e,onclick:this._showEditBookmarkForm,bind:this,class:X,type:"button"},Object(G.a)("span",{"aria-hidden":"true",class:Ce})))}renderDragHandle(e){const{messagesCommon:t}=this,r={[W]:e.uid};return Object(G.a)("div",{role:"button",tabIndex:0,key:"drag-handle",bind:this,class:Z,onkeydown:this._dragHandleKeydown,afterCreate:this._focusDragHandle,afterUpdate:this._focusDragHandle,onblur:this._dragHandleBlur,"aria-pressed":this._selectedSortUid===e.uid?"true":"false","aria-label":null==t?void 0:t.dragHandleLabel,title:null==t?void 0:t.dragHandleTitle,...r},Object(G.a)("span",{"aria-hidden":"true",class:this.classes(ee,Ne)}))}renderBookmarkImageIcon(){return Object(G.a)("span",{"aria-hidden":"true",class:this.classes(te,Ge)})}renderBookmarkImage(e){const{visibleElements:t}=this,{thumbnail:r}=e,i=r&&r.url||"";return t.thumbnail&&i?Object(G.a)("img",{src:i,alt:"",class:re}):null}renderBookmarkTimeSwitch(e){const{messages:t}=this,{timeExtent:r}=e,{view:i}=this.viewModel;return i.timeExtent||r?Object(G.a)("calcite-label",{layout:"inline-space-between","disable-spacing":"true"},t.includeTimeExtent,Object(G.a)("calcite-switch",{scale:"s",checked:!!r,onCalciteSwitchChange:e=>this._editIncludeTimeExtent=!!e.detail.switched})):null}renderBookmarkTimeExtent(e){const{visibleElements:t}=this,{timeExtent:r}=e;return r?Object(G.a)("span",{class:_e},[Object(n.k)(r.start)&&Object(G.a)("span",{key:"start-date-group",class:Se},Object(G.a)("span",{key:"start-date",class:Ie},this._formatDate(r.start)),t.time&&Object(G.a)("span",{key:"start-time",class:Te},this._formatTime(r.start))),Object(n.k)(r.end)&&(Object(n.j)(r.start)||r.start.getTime()!==r.end.getTime())&&Object(G.a)("span",{key:"end-date-group",class:Se},Object(G.a)("span",{key:"end-date",class:Ie},this._formatDate(r.end)),t.time&&Object(G.a)("span",{key:"end-time",class:Te},this._formatTime(r.end)))]):null}renderBookmarkButton(e){const{messagesCommon:t}=this,{name:r,timeExtent:i}=e,{abilities:a}=this.viewModel,o=r||(null==t?void 0:t.untitled),s=Object(G.a)("div",{class:Q},this.renderBookmarkImage(e)||this.renderBookmarkImageIcon()),n=a.time&&i?Object(G.a)("span",{key:"time-extent",class:oe},this.renderBookmarkTimeExtent(e)):null;return Object(G.a)("button",{key:"bookmark-button",class:K,bind:this,"data-bookmark":e,onclick:this._goToBookmark,type:"button"},s,Object(G.a)("div",{class:ie},Object(G.a)("span",{key:"bookmark-title",class:ae},o),n))}renderBookmark(e){const{activeBookmark:t}=this.viewModel,r={[se]:t===e},i=this.editingEnabled?this.renderEditContainer(e):null,a={[W]:e.uid},o=this.editingEnabled?this.renderDragHandle(e):null;return Object(G.a)("li",{key:e,class:this.classes(z,r),...a},o,this.renderBookmarkButton(e),i)}renderEditingBookmarkName(e){const{messages:t,_userState:r}=this,i="name-required"===r.validationState;return Object(G.a)("label",{class:ge},null==t?void 0:t.title,i?Object(G.a)("strong",null,null==t?void 0:t.invalidTitle):null,Object(G.a)("input",{required:!0,bind:this,class:this.classes(Ee,i?ve:null),type:"text",value:e.name,afterCreate:this._storeEditInput,afterUpdate:this._focusEditInput,"data-bookmark":e,"data-node-ref":"_editInputNode",placeholder:null==t?void 0:t.titlePlaceholder}))}renderEditingBookmarkUrlActions(){const{messagesCommon:e}=this;return Object(G.a)("div",{class:Oe},Object(G.a)("input",{type:"button",value:null==e?void 0:e.back,class:this.classes(Me,Ae),onclick:this._closeUrlEditBookmarkForm,bind:this}),Object(G.a)("input",{class:Me,type:"submit",value:null==e?void 0:e.add}))}renderEditingBookmarkActions(){const{messagesCommon:e}=this,{bookmark:t}=this._userState;return Object(G.a)("div",{class:Oe},Object(G.a)("input",{type:"button",value:null==e?void 0:e.delete,class:this.classes(Me,Ae,je),"data-bookmark":t,onclick:this._deleteBookmark,bind:this}),Object(G.a)("input",{type:"button",value:null==e?void 0:e.cancel,class:this.classes(Me,Ae),onclick:this._closeEditBookmarkForm,bind:this}),Object(G.a)("input",{class:Me,type:"submit",value:null==e?void 0:e.save}))}renderEditingBookmarkUrlInput(e){var t;const{messages:r,_userState:i}=this,a=null==(t=e.thumbnail)?void 0:t.url,o=Je.test(a)?a:null,s="absolute-url-required"===i.validationState;return Object(G.a)("label",{class:ge},s?Object(G.a)("strong",null,null==r?void 0:r.invalidImageUrl):null,Object(G.a)("input",{required:!0,bind:this,class:this.classes(Ee,s?ve:null),type:"text",value:o,afterCreate:this._storeUrlEditInput,afterUpdate:this._focusUrlEditInput,"data-bookmark":e,"data-node-ref":"_urlEditInputNode",title:null==r?void 0:r.imageUrlTooltip,placeholder:r&&`https://<${r.imageUrlPlaceholder}>`}))}renderEditingBookmarkUrl(e){const t={[W]:e.uid};return Object(G.a)("li",{key:"edit-bookmark-url-form",class:ye,...t},Object(G.a)("form",{class:fe,onsubmit:this._editBookmarkUrlSubmit,bind:this},this.renderEditingBookmarkUrlInput(e),this.renderEditingBookmarkUrlActions()))}renderEditingBookmark(e){const t={[W]:e.uid},{abilities:r}=this.viewModel,i=r.time?Object(G.a)("div",{key:"edit-bookmark-time-container",class:ke},this.renderBookmarkTimeSwitch(e),this._editIncludeTimeExtent&&this.renderBookmarkTimeExtent(e)):null;return Object(G.a)("li",{key:"edit-bookmark-form",class:ye,...t},Object(G.a)("form",{class:fe,onsubmit:this._editBookmarkSubmit,bind:this},Object(G.a)("div",{class:me},Object(G.a)("div",{class:Q},this.renderBookmarkImage(e),this._editMenu.render()),this.renderEditingBookmarkName(e)),i,this.renderEditingBookmarkActions()))}renderAddingBookmarkName(){const{_userState:e,messages:t}=this,r="name-required"===e.validationState;return Object(G.a)("label",{class:ge},null==t?void 0:t.title,r?Object(G.a)("strong",null,null==t?void 0:t.invalidTitle):null,Object(G.a)("input",{required:!0,bind:this,class:this.classes(Ee,r?ve:null),type:"text",afterCreate:this._storeAddInput,afterUpdate:this._focusAddInput,"data-node-ref":"_addInputNode",value:"",placeholder:null==t?void 0:t.titlePlaceholder}))}renderAddingBookmarkActions(){const{messagesCommon:e}=this;return Object(G.a)("div",{class:this.classes(Oe)},Object(G.a)("input",{type:"button",value:null==e?void 0:e.cancel,class:this.classes(Me,Ae,we),onclick:this._endAddBookmark.bind(this),bind:this}),Object(G.a)("input",{class:Me,type:"submit",value:null==e?void 0:e.add}))}renderAddingBookmark(){return Object(G.a)("div",{key:"add-bookmark-form",class:ye},Object(G.a)("form",{class:fe,onsubmit:this._addBookmarkSubmit,bind:this},this.renderAddingBookmarkName(),this.renderAddingBookmarkActions()))}_formatDate(e){return e?Object(b.b)(e,Object(b.a)("short-date")):null}_formatTime(e){return e?Object(b.b)(e,Object(b.a)("long-time")):null}_dragHandleBlur(){this._selectedSortUid=null,this.scheduleRender()}_dragHandleKeydown(e){const{_sortableSavedItems:t}=this,r=Object(o.a)(e);if(-1===["ArrowDown","ArrowUp","Escape","Tab"," ","Enter"].indexOf(r))return;const{_sortable:i,_selectedSortUid:a}=this,s=i.toArray(),n=e.target.getAttribute(W),l=s.indexOf(n);if(Object(R.e)(r)){const e=a&&a===n;return this._selectedSortUid=e?null:n,this._sortableSavedItems=e?null:this._sortable.toArray(),void this.scheduleRender()}if("Tab"===r)return this._selectedSortUid=null,void this.scheduleRender();if("Escape"===r&&t)return e.stopPropagation(),this._selectedSortUid=null,this._updateSortItems(t,i,n),void this.scheduleRender();if(-1===l||!a)return;const c="ArrowUp"===r?l-1:l+1;c>=s.length||c<=-1||(function(e,t,r){e.splice(r,0,e.splice(t,1)[0])}(s,l,c),this._updateSortItems(s,i,n))}_updateSortItems(e,t,r){t.sort(e),this._sortBookmarks(t),this._focusSortUid=r,this._selectedSortUid=r}_focusDragHandle(e){const{_focusSortUid:t}=this;e&&t&&e.getAttribute(W)===t&&(e.focus(),this._focusSortUid=null)}_toggleSorting(){const{_sortable:e,_sortableNode:t,editingEnabled:r}=this;if(t)if(e)e.option("disabled",!r);else{const e=D.a.create(t,{dataIdAttr:W,handle:`.${Z}`,group:"bookmarks",disabled:!r,onSort:()=>this._sortBookmarks(e)});this._sortable=e}}_sortNodeCreated(e){this._sortableNode=e,this._toggleSorting()}_sortBookmarks(e){const{bookmarks:t}=this.viewModel;if(!t)return;const r=e.toArray();t.sort(((e,t)=>{const i=r.indexOf(e.uid),a=r.indexOf(t.uid);return i>a?1:i<a?-1:0}))}_destroySortable(){const{_sortable:e}=this;e&&e.destroy(),this._sortable=null}_endAddBookmark(){this._focusAddBookmarkButton=!0,this.endAddBookmark()}_bookmarksInitialized(){const e="bookmarks-init",{_handles:t}=this;t.remove(e),t.add(Object(l.b)(this,"viewModel.bookmarks","change",(()=>this._bookmarksChanged())),e)}_bookmarksChanged(){const e="bookmarks-change",{bookmarks:t}=this.viewModel,{_handles:r}=this;r.remove(e);const i=t.map((e=>Object(l.d)(e,["active","name","thumbnail.url"],(()=>this.scheduleRender()))));r.add(i,e),this.scheduleRender()}_showEditBookmarkForm(e){const t=e.currentTarget["data-bookmark"];this._editIncludeTimeExtent=!!t.timeExtent,this._focusEditInputBox=!0,this._userState=new g({bookmark:t,state:"edit"}),this.viewModel.goTo(t),this.scheduleRender()}_closeUrlEditBookmarkForm(){this._focusEditInputBox=!0,this._userState.state="edit"}_closeEditBookmarkForm(){this._userState=null}_addBookmarkSubmit(e){e.preventDefault();const{_addInputNode:t,_userState:r}=this,i=t&&t.value.trim();i?(r.loading=!0,this.viewModel.createBookmark().then((e=>{e.name=i,this.viewModel.bookmarks.add(e),this._endAddBookmark()}))):r.validationState="name-required"}async _editBookmarkAndClose(e,t){const{viewModel:r}=this;await r.editBookmark(e,{...r.defaultEditOptions,...t}),this._closeEditBookmarkForm()}_editBookmarkSubmit(e){e.preventDefault();const{_editInputNode:t,_userState:r,_editIncludeTimeExtent:i}=this,a=t&&t.value.trim();a?(r.bookmark.name=a,r.bookmark.thumbnail=r.editedBookmark.thumbnail,i||(r.bookmark.timeExtent=null),this._editBookmarkAndClose(r.bookmark,{takeScreenshot:!1,captureTimeExtent:i})):r.validationState="name-required"}_storeAddBookmarkButton(e){this._addBookmarkButtonNode=e,this._focusAddBookmark()}_storeEditInput(e){this._editInputNode=e,this._focusEditInput()}_storeAddInput(e){this._addInputNode=e,this._focusAddInput()}_storeUrlEditInput(e){this._urlEditInputNode=e,this._focusUrlEditInput()}_focusUrlEditInput(){this._urlEditInputNode&&this._focusUrlEditInputBox&&(this._focusUrlEditInputBox=!1,this._urlEditInputNode.focus())}_focusAddInput(){this._addInputNode&&this._focusAddInputBox&&(this._focusAddInputBox=!1,this._addInputNode.focus())}_focusAddBookmark(){this._addBookmarkButtonNode&&this._focusAddBookmarkButton&&(this._focusAddBookmarkButton=!1,this._addBookmarkButtonNode.focus())}_focusEditInput(){this._editInputNode&&this._focusEditInputBox&&(this._focusEditInputBox=!1,this._editInputNode.focus())}_deleteBookmark(e){const t=e.currentTarget["data-bookmark"];this.viewModel.bookmarks.remove(t)}_goToBookmark(e){const t=e.currentTarget["data-bookmark"];this.endAddBookmark(),this._closeEditBookmarkForm(),this.viewModel.goTo(t)}async _refreshThumbnail(){const{_userState:e,_editMenu:t,viewModel:r}=this;e.validationState=void 0,await r.editBookmark(this._userState.editedBookmark,{takeScreenshot:!0,captureViewpoint:!1,captureRotation:!1,captureScale:!1,captureTimeExtent:!1}),t.open=!1,this._focusEditInputBox=!0,this.scheduleRender()}_removeThumbnail(){const{_userState:e,_editMenu:t}=this;e.editedBookmark.thumbnail=null,e.validationState=void 0,t.open=!1,this._focusEditInputBox=!0,this.scheduleRender()}_startUseImageUrl(){this._userState.state="edit-thumbnail",this._editMenu.open=!1,this._focusUrlEditInputBox=!0,this.scheduleRender()}_editBookmarkUrlSubmit(e){e.preventDefault();const{_urlEditInputNode:t,_userState:r}=this,i=t.value;Je.test(i)?(i&&(r.editedBookmark.thumbnail=new h.a({url:i})),this._closeUrlEditBookmarkForm()):r.validationState="absolute-url-required"}};Object(a.a)([Object(d.b)()],$e.prototype,"_editIncludeTimeExtent",void 0),Object(a.a)([Object(d.b)({type:g})],$e.prototype,"_userState",void 0),Object(a.a)([Object(d.b)({readOnly:!0})],$e.prototype,"_editMenuItems",null),Object(a.a)([Object(d.b)({readOnly:!0})],$e.prototype,"_editMenu",null),Object(a.a)([Object(c.a)("viewModel.defaultCreateOptions")],$e.prototype,"defaultCreateOptions",void 0),Object(a.a)([Object(c.a)("viewModel.defaultEditOptions")],$e.prototype,"defaultEditOptions",void 0),Object(a.a)([Object(c.a)("viewModel.bookmarks")],$e.prototype,"bookmarks",void 0),Object(a.a)([Object(d.b)()],$e.prototype,"disabled",void 0),Object(a.a)([Object(d.b)()],$e.prototype,"editingEnabled",void 0),Object(a.a)([Object(d.b)()],$e.prototype,"headingLevel",void 0),Object(a.a)([Object(c.a)("viewModel.goToOverride")],$e.prototype,"goToOverride",void 0),Object(a.a)([Object(d.b)()],$e.prototype,"iconClass",void 0),Object(a.a)([Object(d.b)({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],$e.prototype,"label",void 0),Object(a.a)([Object(d.b)(),Object(F.a)("esri/widgets/Bookmarks/t9n/Bookmarks")],$e.prototype,"messages",void 0),Object(a.a)([Object(d.b)(),Object(F.a)("esri/t9n/common")],$e.prototype,"messagesCommon",void 0),Object(a.a)([Object(d.b)(),Object(F.a)("esri/core/t9n/Units")],$e.prototype,"messagesUnits",void 0),Object(a.a)([Object(d.b)()],$e.prototype,"uiStrings",void 0),Object(a.a)([Object(c.a)("viewModel.view")],$e.prototype,"view",void 0),Object(a.a)([Object(d.b)({type:N}),Object(P.a)(["select-bookmark","bookmark-edit","bookmark-select"])],$e.prototype,"viewModel",void 0),Object(a.a)([Object(d.b)()],$e.prototype,"visibleElements",void 0),Object(a.a)([Object(p.a)("visibleElements")],$e.prototype,"castVisibleElements",null),Object(a.a)([Object(d.b)()],$e.prototype,"endAddBookmark",null),Object(a.a)([Object(d.b)()],$e.prototype,"startAddBookmark",null),$e=Object(a.a)([Object(u.a)("esri.widgets.Bookmarks")],$e);const He=$e;var ze=r(1173),Ke=r(91),Qe=r(0);const Ye=e=>{const t=Object(i.useRef)(null);return Object(i.useEffect)((()=>{const r=new He({container:t.current,view:e.view,editingEnabled:!0});return Ke.c((e=>{if(window.localStorage.getItem("imaps")){const t=ze.a.fromJSON(JSON.parse(window.localStorage.getItem("imaps")));t.load().then((()=>{e(t.bookmarks)}))}})).then((e=>{r.bookmarks.removeAll(),r.bookmarks.addMany(e)})),()=>{r&&r.destroy()}}),[e.id]),Object(Qe.jsx)("div",{ref:t})};t.default=Ye},173:function(e,t,r){"use strict";r.d(t,"a",(function(){return d}));var i=r(79),a=r(100),o=(r(82),r(89)),s=r(87),n=r(85),l=r(197),c=r(152),p=r(80);s.a.getLogger("esri.core.Clonable");const d=e=>{let t=class extends e{clone(){const e=Object(n.u)(Object(c.a)(this),"unable to clone instance of non-accessor class"),t=e.metadatas,r=e.store,i={},a=new Map;for(const n in t){const e=t[n],s=null==r?void 0:r.originOf(n),c=e.clonable;if(e.readOnly||!1===c||s!==l.a.USER&&s!==l.a.DEFAULTS&&s!==l.a.WEB_MAP&&s!==l.a.WEB_SCENE)continue;const p=this[n];let d=null;d="function"==typeof c?c(p):"reference"===c?p:Object(o.d)(p),null!=p&&null==d||(s===l.a.DEFAULTS?a.set(n,d):i[n]=d)}const s=new(0,Object.getPrototypeOf(this).constructor)(i);if(a.size){var p;const e=null==(p=Object(c.a)(s))?void 0:p.store;if(e)for(const[t,r]of a)e.set(t,r,l.a.DEFAULTS)}return s}};return t=Object(i.a)([Object(p.a)("esri.core.Clonable")],t),t};let u=class extends(d(a.a)){};u=Object(i.a)([Object(p.a)("esri.core.Clonable")],u)},194:function(e,t,r){"use strict";r.d(t,"a",(function(){return a}));var i=r(90);const a=Object(i.b)()({esriTimeUnitsMilliseconds:"milliseconds",esriTimeUnitsSeconds:"seconds",esriTimeUnitsMinutes:"minutes",esriTimeUnitsHours:"hours",esriTimeUnitsDays:"days",esriTimeUnitsWeeks:"weeks",esriTimeUnitsMonths:"months",esriTimeUnitsYears:"years",esriTimeUnitsDecades:"decades",esriTimeUnitsCenturies:"centuries",esriTimeUnitsUnknown:void 0})},222:function(e,t,r){"use strict";r.d(t,"a",(function(){return i})),r.d(t,"b",(function(){return a}));r(82);function i(e){}function a(e){return()=>e}},242:function(e,t,r){"use strict";r.d(t,"a",(function(){return d}));var i,a=r(79),o=r(86),s=r(169),n=r(81),l=(r(84),r(82),r(83),r(80)),c=r(194);let p=i=class extends o.a{constructor(e){super(e),this.value=0,this.unit="milliseconds"}toMilliseconds(){return Object(s.a)(this.value,this.unit,"milliseconds")}clone(){return new i({value:this.value,unit:this.unit})}};Object(a.a)([Object(n.b)({type:Number,json:{write:!0},nonNullable:!0})],p.prototype,"value",void 0),Object(a.a)([Object(n.b)({type:c.a.apiValues,json:{type:c.a.jsonValues,read:c.a.read,write:c.a.write},nonNullable:!0})],p.prototype,"unit",void 0),p=i=Object(a.a)([Object(l.a)("esri.TimeInterval")],p);const d=p},258:function(e,t,r){"use strict";r.d(t,"a",(function(){return a})),r.d(t,"b",(function(){return o}));var i=r(83);function a(e){const t=Object(i.e)(100*(1-e));return Math.max(0,Math.min(t,100))}function o(e){const t=1-e/100;return Math.max(0,Math.min(t,1))}},268:function(e,t,r){"use strict";r.d(t,"a",(function(){return i}));const i=new(r(90).a)({esriFieldTypeSmallInteger:"small-integer",esriFieldTypeInteger:"integer",esriFieldTypeSingle:"single",esriFieldTypeDouble:"double",esriFieldTypeLong:"long",esriFieldTypeString:"string",esriFieldTypeDate:"date",esriFieldTypeOID:"oid",esriFieldTypeGeometry:"geometry",esriFieldTypeBlob:"blob",esriFieldTypeRaster:"raster",esriFieldTypeGUID:"guid",esriFieldTypeGlobalID:"global-id",esriFieldTypeXML:"xml"})},298:function(e,t,r){"use strict";r.d(t,"a",(function(){return o})),r.d(t,"b",(function(){return s})),r.d(t,"c",(function(){return n})),r.d(t,"d",(function(){return l}));var i=r(85),a=r(91);function o(e,t,r){return Object(a.i)(e.map(((e,i)=>t.apply(r,[e,i]))))}function s(e,t,r){return Object(a.i)(e.map(((e,i)=>t.apply(r,[e,i])))).then((e=>e.map((e=>e.value))))}function n(e){return Object(i.j)(e)?Object(a.r)():e.then((e=>({ok:!0,value:e}))).catch((e=>({ok:!1,error:e})))}function l(e){return e.then((e=>({ok:!0,value:e}))).catch((e=>(Object(a.s)(e),{ok:!1,error:e})))}},309:function(e,t,r){"use strict";r.d(t,"a",(function(){return O})),r.d(t,"b",(function(){return v}));var i=r(79),a=r(100),o=r(85),s=r(571),n=r(89),l=r(197);class c{constructor(){this._propertyOriginMap=new Map,this._originStores=new Array(l.b),this._values=new Map,this.multipleOriginsSupported=!0}clone(e){const t=new c,r=this._originStores[l.a.DEFAULTS];r&&r.forEach(((e,r)=>{t.set(r,Object(n.a)(e),l.a.DEFAULTS)}));for(let i=l.a.SERVICE;i<l.b;i++){const r=this._originStores[i];r&&r.forEach(((r,a)=>{e&&e.has(a)||t.set(a,Object(n.a)(r),i)}))}return t}get(e,t){const r=void 0===t?this._values:this._originStores[t];return r?r.get(e):void 0}keys(e){const t=null==e?this._values:this._originStores[e];return t?[...t.keys()]:[]}set(e,t,r=l.a.USER){let i=this._originStores[r];if(i||(i=new Map,this._originStores[r]=i),i.set(e,t),!this._values.has(e)||Object(o.c)(this._propertyOriginMap.get(e))<=r){const i=this._values.get(e);return this._values.set(e,t),this._propertyOriginMap.set(e,r),i!==t}return!1}delete(e,t=l.a.USER){const r=this._originStores[t];if(!r)return;const i=r.get(e);if(r.delete(e),this._values.has(e)&&this._propertyOriginMap.get(e)===t){this._values.delete(e);for(let r=t-1;r>=0;r--){const t=this._originStores[r];if(t&&t.has(e)){this._values.set(e,t.get(e)),this._propertyOriginMap.set(e,r);break}}}return i}has(e,t){const r=void 0===t?this._values:this._originStores[t];return!!r&&r.has(e)}revert(e,t){for(;t>0&&!this.has(e,t);)--t;const r=this._originStores[t],i=r&&r.get(e),a=this._values.get(e);return this._values.set(e,i),this._propertyOriginMap.set(e,t),a!==i}originOf(e){return this._propertyOriginMap.get(e)||l.a.DEFAULTS}forEach(e){this._values.forEach(e)}}var p=r(324),d=r(152),u=r(80);const b=e=>{let t=class extends e{constructor(...e){super(...e);const t=Object(o.c)(Object(d.a)(this)),r=t.store,i=new c;t.store=i,Object(s.a)(t,r,i)}read(e,t){Object(p.a)(this,e,t)}getAtOrigin(e,t){const r=h(this),i=Object(l.e)(t);if("string"==typeof e)return r.get(e,i);const a={};return e.forEach((e=>{a[e]=r.get(e,i)})),a}originOf(e){return Object(l.c)(this.originIdOf(e))}originIdOf(e){return h(this).originOf(e)}revert(e,t){const r=h(this),i=Object(l.e)(t),a=Object(d.a)(this);let o;o="string"==typeof e?"*"===e?r.keys(i):[e]:e,o.forEach((e=>{a.invalidate(e),r.revert(e,i),a.commit(e)}))}};return t=Object(i.a)([Object(u.a)("esri.core.ReadOnlyMultiOriginJSONSupport")],t),t};function h(e){return Object(d.a)(e).store}let y=class extends(b(a.a)){};y=Object(i.a)([Object(u.a)("esri.core.ReadOnlyMultiOriginJSONSupport")],y);var m=r(330);const f=e=>{let t=class extends e{constructor(...e){super(...e)}clear(e,t="user"){return g(this).delete(e,Object(l.e)(t))}write(e={},t){return Object(m.b)(this,e=e||{},t),e}setAtOrigin(e,t,r){Object(d.a)(this).setAtOrigin(e,t,Object(l.e)(r))}removeOrigin(e){const t=g(this),r=Object(l.e)(e),i=t.keys(r);for(const a of i)t.originOf(a)===r&&t.set(a,t.get(a,r),l.a.USER)}updateOrigin(e,t){const r=g(this),i=Object(l.e)(t),a=this.get(e);for(let o=i+1;o<l.b;++o)r.delete(e,o);r.set(e,a,i)}toJSON(e){return this.write({},e)}};return t=Object(i.a)([Object(u.a)("esri.core.WriteableMultiOriginJSONSupport")],t),t.prototype.toJSON.isDefaultToJSON=!0,t};function g(e){return Object(d.a)(e).store}const O=e=>{let t=class extends(f(b(e))){constructor(...e){super(...e)}};return t=Object(i.a)([Object(u.a)("esri.core.MultiOriginJSONSupport")],t),t};let v=class extends(O(a.a)){};v=Object(i.a)([Object(u.a)("esri.core.MultiOriginJSONSupport")],v)},342:function(e,t,r){"use strict";function i(e){var t;const r=e.layer;return"floorInfo"in r&&null!=(t=r.floorInfo)&&t.floorField&&"floors"in e.view?s(e.view.floors,r.floorInfo.floorField):null}function a(e,t){var r;return"floorInfo"in t&&null!=(r=t.floorInfo)&&r.floorField?s(e,t.floorInfo.floorField):null}function o(e,t){const{definitionExpression:r}=t;return e?r?`(${r}) AND (${e})`:e:r}function s(e,t){if(null==e||!e.length)return null;const r=e.filter((e=>""!==e)).map((e=>`'${e}'`));return r.push("''"),`${t} IN (${r.join(",")}) OR ${t} IS NULL`}r.d(t,"a",(function(){return o})),r.d(t,"b",(function(){return i})),r.d(t,"c",(function(){return a}))},391:function(e,t,r){"use strict";r.d(t,"a",(function(){return s})),r.d(t,"b",(function(){return a}));var i=r(114);function a(e,t){const r=t||e.extent,a=e.width,o=Object(i.e)(r&&r.spatialReference);return r&&a?r.width/a*o*i.i*96:0}function o(e,t){return e/(Object(i.e)(t)*i.i*96)}function s(e,t){const r=e.extent,i=e.width,a=o(t,r.spatialReference);return r.clone().expand(a*i/r.width)}},413:function(e,t,r){"use strict";r.d(t,"a",(function(){return n})),r.d(t,"b",(function(){return c}));var i=r(116),a=r(112),o=(r(82),r(87),r(133));const s="esri-widget__heading";function n(e,t){const r=l(e.level),i=`h${r}`;return delete e.level,Object(o.a)(i,{...e,class:Object(a.a)(s,e.class),role:"heading","aria-level":String(r)},t)}function l(e){return Object(i.e)(Math.ceil(e),1,6)}function c(e,t=1){return l(e+t)}},547:function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return T}));var i=r(79),a=r(157),o=r(88),s=r(86),n=r(89),l=r(192),c=r(85),p=r(98),d=r(81),u=r(83),b=r(93),h=r(80),y=r(101),m=r(181),f=r(100),g=r(87),O=(r(84),r(82),r(104));const v=g.a.getLogger("esri.portal.PortalItemResource");let j=class extends f.a{constructor(e){super(e),this.portalItem=null}normalizeCtorArgs(e){return e&&e.portalItem&&e.path?{...e,path:this._normalizePath(e.path,e.portalItem)}:e}set path(e){Object(c.k)(e)&&Object(p.u)(e)?v.error("portalitemresource:invalid-path","A portal item resource path must be relative"):this._set("path",e)}_castPath(e){return this._normalizePath(e,this.portalItem)}get url(){return this.portalItem&&this.path?`${this.portalItem.itemUrl}/resources/${this.path}`:null}get itemRelativeUrl(){return this.portalItem&&this.path?`./resources/${this.path}`:null}fetch(e="json",t){const r=this.url;if(Object(c.j)(r))throw new o.a("portal-item-resource:fetch","Portal item resource does not refer to a valid item or path");return this.portalItem.portal._request(r,{responseType:e,query:{token:this.portalItem.apiKey},signal:Object(c.i)(t,"signal")})}async update(e,t){return(await r.e(21).then(r.bind(null,931))).addOrUpdateResource(this,"update",e,t)}hasPath(){return Object(c.k)(this.path)}_normalizePath(e,t){return Object(c.j)(e)?e:(e=e.replace(/^\/+/,""),Object(c.k)(t)&&Object(p.u)(e)&&(e=Object(p.E)(e,t.itemUrl)),e.replace(/^\/+/,"").replace(/^(\.\/)?resources\//,""))}};Object(i.a)([Object(d.b)()],j.prototype,"portalItem",void 0),Object(i.a)([Object(d.b)({type:String,value:null})],j.prototype,"path",null),Object(i.a)([Object(O.a)("path")],j.prototype,"_castPath",null),Object(i.a)([Object(d.b)({type:String,readOnly:!0})],j.prototype,"url",null),Object(i.a)([Object(d.b)({type:String,readOnly:!0})],j.prototype,"itemRelativeUrl",null),j=Object(i.a)([Object(h.a)("esri.portal.PortalItemResource")],j);const w=j;let k=class extends f.a{constructor(e){super(e),this.created=null,this.rating=null}};Object(i.a)([Object(d.b)()],k.prototype,"created",void 0),Object(i.a)([Object(d.b)()],k.prototype,"rating",void 0),k=Object(i.a)([Object(h.a)("esri.portal.PortalRating")],k);const _=k;var S;let I=S=class extends(Object(s.b)(l.a)){constructor(e){super(e),this.access=null,this.accessInformation=null,this.apiKey=null,this.applicationProxies=null,this.avgRating=null,this.categories=null,this.created=null,this.culture=null,this.description=null,this.extent=null,this.groupCategories=null,this.id=null,this.itemControl=null,this.licenseInfo=null,this.modified=null,this.name=null,this.numComments=null,this.numRatings=null,this.numViews=null,this.owner=null,this.ownerFolder=null,this.portal=null,this.screenshots=null,this.size=null,this.snippet=null,this.sourceJSON=null,this.tags=null,this.title=null,this.type=null,this.typeKeywords=null,this.url=null}static from(e){return Object(u.d)(S,e)}destroy(){this.portal=null}get displayName(){const e=this.type,t=this.typeKeywords||[];let r=e;return"Feature Service"===e||"Feature Collection"===e?r=t.indexOf("Table")>-1?"Table":t.indexOf("Route Layer")>-1?"Route Layer":t.indexOf("Markup")>-1?"Markup":"Feature Layer":"Image Service"===e?r=t.indexOf("Elevation 3D Layer")>-1?"Elevation Layer":t.indexOf("Tiled Imagery")>-1?"Tiled Imagery Layer":"Imagery Layer":"Scene Service"===e?r="Scene Layer":"Media Service"===e?r="Media Layer":"Scene Package"===e?r="Scene Layer Package":"Stream Service"===e?r="Feature Layer":"Geoprocessing Service"===e&&this.portal&&this.portal.isPortal?r=t.indexOf("Web Tool")>-1?"Tool":"Geoprocessing Service":"Geocoding Service"===e?r="Locator":"Geoenrichment Service"===e?r="GeoEnrichment Service":"Microsoft Powerpoint"===e?r="Microsoft PowerPoint":"GeoJson"===e?r="GeoJSON":"Globe Service"===e?r="Globe Layer":"Vector Tile Service"===e?r="Tile Layer":"netCDF"===e?r="NetCDF":"Map Service"===e?r=-1===t.indexOf("Spatiotemporal")&&(t.indexOf("Hosted Service")>-1||t.indexOf("Tiled")>-1)&&-1===t.indexOf("Relational")?"Tile Layer":"Map Image Layer":e&&e.toLowerCase().indexOf("add in")>-1?r=e.replace(/(add in)/gi,"Add-In"):"datastore catalog service"===e?r="Big Data File Share":"Compact Tile Package"===e?r="Tile Package (tpkx)":"OGCFeatureServer"===e?r="OGC Feature Layer":"web mapping application"===e&&t.indexOf("configurableApp")>-1&&(r="Instant App"),r}readExtent(e){return e&&e.length?new y.a(e[0][0],e[0][1],e[1][0],e[1][1]):null}get iconUrl(){const e=this.type&&this.type.toLowerCase()||"",t=this.typeKeywords||[];let r,i=!1,o=!1,s=!1,n=!1,l=!1,c=!1;return e.indexOf("service")>0||"feature collection"===e||"kml"===e||"wms"===e||"wmts"===e||"wfs"===e?(i=t.indexOf("Hosted Service")>-1,"feature service"===e||"feature collection"===e||"kml"===e||"wfs"===e?(o=t.indexOf("Table")>-1,s=t.indexOf("Route Layer")>-1,n=t.indexOf("Markup")>-1,l=-1!==t.indexOf("Spatiotemporal"),c=-1!==t.indexOf("UtilityNetwork"),r=l&&o?"spatiotemporaltable":o?"table":s?"routelayer":n?"markup":l?"spatiotemporal":i?"featureshosted":c?"utilitynetwork":"features"):r="map service"===e||"wms"===e||"wmts"===e?i||t.indexOf("Tiled")>-1||"wmts"===e?"maptiles":"mapimages":"scene service"===e?t.indexOf("Line")>-1?"sceneweblayerline":t.indexOf("3DObject")>-1?"sceneweblayermultipatch":t.indexOf("Point")>-1?"sceneweblayerpoint":t.indexOf("IntegratedMesh")>-1?"sceneweblayermesh":t.indexOf("PointCloud")>-1?"sceneweblayerpointcloud":t.indexOf("Polygon")>-1?"sceneweblayerpolygon":t.indexOf("Building")>-1?"sceneweblayerbuilding":t.indexOf("Voxel")>-1?"sceneweblayervoxel":"sceneweblayer":"image service"===e?t.indexOf("Elevation 3D Layer")>-1?"elevationlayer":t.indexOf("Tiled Imagery")>-1?"tiledimagerylayer":"imagery":"stream service"===e?"streamlayer":"media service"===e?"mediaservice":"vector tile service"===e?"vectortile":"datastore catalog service"===e?"datastorecollection":"geocoding service"===e?"geocodeservice":"geoprocessing service"===e&&t.indexOf("Web Tool")>-1&&this.portal&&this.portal.isPortal?"tool":"layers"):r="web map"===e||"cityengine web scene"===e?"maps":"web scene"===e?t.indexOf("ViewingMode-Local")>-1?"webscenelocal":"websceneglobal":"web mapping application"===e&&t.indexOf("configurableApp")>-1?"instantapps":"web mapping application"===e||"mobile application"===e||"application"===e||"operation view"===e||"desktop application"===e?"apps":"map document"===e||"map package"===e||"published map"===e||"scene document"===e||"globe document"===e||"basemap package"===e||"mobile basemap package"===e||"mobile map package"===e||"project package"===e||"project template"===e||"pro map"===e||"layout"===e||"layer"===e&&t.indexOf("ArcGIS Pro")>-1||"explorer map"===e&&t.indexOf("Explorer Document")?"mapsgray":"service definition"===e||"csv"===e||"shapefile"===e||"cad drawing"===e||"geojson"===e||"360 vr experience"===e||"netcdf"===e||"administrative report"===e?"datafiles":"explorer add in"===e||"desktop add in"===e||"windows viewer add in"===e||"windows viewer configuration"===e?"appsgray":"arcgis pro add in"===e||"arcgis pro configuration"===e?"addindesktop":"rule package"===e||"file geodatabase"===e||"sqlite geodatabase"===e||"csv collection"===e||"kml collection"===e||"windows mobile package"===e||"map template"===e||"desktop application template"===e||"gml"===e||"arcpad package"===e||"code sample"===e||"form"===e||"document link"===e||"earth configuration"===e||"operations dashboard add in"===e||"rules package"===e||"image"===e||"workflow manager package"===e||"explorer map"===e&&t.indexOf("Explorer Mapping Application")>-1||t.indexOf("Document")>-1?"datafilesgray":"network analysis service"===e||"geoprocessing service"===e||"geodata service"===e||"geometry service"===e||"geoprocessing package"===e||"locator package"===e||"geoprocessing sample"===e||"workflow manager service"===e?"toolsgray":"layer"===e||"layer package"===e||"explorer layer"===e?"layersgray":"scene package"===e?"scenepackage":"mobile scene package"===e?"mobilescenepackage":"tile package"===e||"compact tile package"===e?"tilepackage":"task file"===e?"taskfile":"report template"===e?"report-template":"statistical data collection"===e?"statisticaldatacollection":"insights workbook"===e?"workbook":"insights model"===e?"insightsmodel":"insights page"===e?"insightspage":"insights theme"===e?"insightstheme":"hub initiative"===e?"hubinitiative":"hubpage"===e?"hubpage":"hub event"===e?"hubevent":"hub site application"===e?"hubsite":"hub project"===e?"hubproject":"relational database connection"===e?"relationaldatabaseconnection":"big data file share"===e?"datastorecollection":"image collection"===e?"imagecollection":"style"===e?"style":"desktop style"===e?"desktopstyle":"dashboard"===e?"dashboard":"raster function template"===e?"rasterprocessingtemplate":"vector tile package"===e?"vectortilepackage":"ortho mapping project"===e?"orthomappingproject":"ortho mapping template"===e?"orthomappingtemplate":"solution"===e?"solutions":"geopackage"===e?"geopackage":"deep learning package"===e?"deeplearningpackage":"real time analytic"===e?"realtimeanalytics":"big data analytic"===e?"bigdataanalytics":"feed"===e?"feed":"excalibur imagery project"===e?"excaliburimageryproject":"notebook"===e?"notebook":"storymap"===e?"storymap":"survey123 add in"===e?"survey123addin":"mission"===e?"mission":"mission report"===e?"missionreport":"quickcapture project"===e?"quickcaptureproject":"pro report"===e?"proreport":"urban model"===e?"urbanmodel":"web experience"===e?"experiencebuilder":"web experience template"===e?"webexperiencetemplate":"experience builder widget"===e?"experiencebuilderwidget":"experience builder widget package"===e?"experiencebuilderwidgetpackage":"workflow"===e?"workflow":"insights script"===e?"insightsscript":"kernel gateway connection"===e?"kernelgatewayconnection":"hub initiative template"===e?"hubinitiativetemplate":"storymap theme"===e?"storymaptheme":"knowledge graph"===e?"knowledgegraph":"native application"===e?"nativeapp":"native application installer"===e?"nativeappinstaller":"link chart"===e?"linkchart":"investigation"===e?"investigation":"ogcfeatureserver"===e?"features":"pro project"===e?"proproject":"insights workbook package"===e?"insightsworkbookpackage":"apache parquet"===e?"apacheparquet":"maps",r?Object(a.a)("esri/images/portal/"+r+"16.png"):null}get isLayer(){return["Map Service","Feature Service","Feature Collection","Scene Service","Image Service","Stream Service","Vector Tile Service","WMTS","WMS"].indexOf(this.type)>-1}get itemUrl(){const e=this.get("portal.restUrl");return e?e+"/content/items/"+this.id:null}get thumbnailUrl(){const e=this.itemUrl,t=this.thumbnail;return e&&t?this.portal._normalizeUrl(`${e}/info/${t}?f=json`):null}get userItemUrl(){const e=this.get("portal.restUrl");if(!e)return null;const t=this.owner||this.get("portal.user.username");return t?`${e}/content/users/${this.ownerFolder?`${t}/${this.ownerFolder}`:t}/items/${this.id}`:null}load(e){this.portal||(this.portal=m.a.getDefault());const t=this.portal.load(e).then((()=>this.sourceJSON?this.sourceJSON:this.id&&this.itemUrl?this.portal._request(this.itemUrl,{signal:Object(c.k)(e)?e.signal:null,query:{token:this.apiKey}}):{})).then((e=>{this.sourceJSON=e,this.read(e)}));return this.addResolvingPromise(t),Promise.resolve(this)}addRating(e){const t={method:"post",query:{}};return e instanceof _&&(e=e.rating),isNaN(e)||"number"!=typeof e||(t.query.rating=e),this.portal._request(this.itemUrl+"/addRating",t).then((()=>new _({rating:e,created:new Date})))}clone(){const e={access:this.access,accessInformation:this.accessInformation,applicationProxies:Object(n.a)(this.applicationProxies),avgRating:this.avgRating,categories:Object(n.a)(this.categories),created:Object(n.a)(this.created),culture:this.culture,description:this.description,extent:Object(n.a)(this.extent),groupCategories:Object(n.a)(this.groupCategories),id:this.id,itemControl:this.itemControl,licenseInfo:this.licenseInfo,modified:Object(n.a)(this.modified),name:this.name,numComments:this.numComments,numRatings:this.numRatings,numViews:this.numViews,owner:this.owner,ownerFolder:this.ownerFolder,portal:this.portal,screenshots:Object(n.a)(this.screenshots),size:this.size,snippet:this.snippet,tags:Object(n.a)(this.tags),thumbnail:this.thumbnail,title:this.title,type:this.type,typeKeywords:Object(n.a)(this.typeKeywords),url:this.url};return this.loaded&&(e.loadStatus="loaded"),new S({sourceJSON:this.sourceJSON}).set(e)}createPostQuery(){const e=this.toJSON();for(const t in e)"tags"===t&&null!==e[t]&&(e[t]=e[t].join(", ")),"typeKeywords"===t&&null!==e[t]&&(e[t]=e[t].join(", ")),"extent"===t&&e[t]&&(e[t]=JSON.stringify(e[t]));return e}deleteRating(){return this.portal._request(this.itemUrl+"/deleteRating",{method:"post"}).then((()=>{}))}fetchData(e="json",t){return this.portal._request(this.itemUrl+"/data",{responseType:e,...t,query:{token:this.apiKey}})}fetchRating(e){return this.portal._request(this.itemUrl+"/rating",{query:{token:this.apiKey},...e}).then((e=>null!=e.rating?(e.created=new Date(e.created),new _(e)):null))}fetchRelatedItems(e,t){return this.portal._requestToTypedArray(this.itemUrl+"/relatedItems",{query:{...e,token:this.apiKey},...t},S)}getThumbnailUrl(e){let t=this.thumbnailUrl;return t&&e&&(t+=`&w=${e}`),t}reload(){return this.portal._request(this.itemUrl,{cacheBust:!0,query:{token:this.apiKey}}).then((e=>(this.sourceJSON=e,this.read(e),this)))}update(e){return this.id?this.load().then((()=>this.portal._signIn())).then((()=>{const t=e&&e.data,r={method:"post"};r.query=this.createPostQuery();for(const e in r.query)null===r.query[e]&&(r.query[e]="");return r.query.clearEmptyFields=!0,null!=t&&("string"==typeof t?r.query.text=t:"object"==typeof t&&(r.query.text=JSON.stringify(t))),this.portal._request(`${this.userItemUrl}/update`,r).then((()=>this.reload()))})):Promise.reject(new o.a("portal:item-does-not-exist","The item does not exist yet and cannot be updated"))}updateThumbnail(e){return this.id?this.load().then((()=>this.portal._signIn())).then((()=>{const t=e.thumbnail,r=e.filename,i={method:"post"};if("string"==typeof t)Object(p.w)(t)?i.query={data:t}:i.query={url:Object(p.C)(t)},Object(c.k)(r)&&(i.query.filename=r);else{const e=new FormData;Object(c.k)(r)?e.append("file",t,r):e.append("file",t),i.body=e}return this.portal._request(`${this.userItemUrl}/updateThumbnail`,i).then((()=>this.reload()))})):Promise.reject(new o.a("portal:item-does-not-exist","The item does not exist yet and cannot be updated"))}async fetchResources(e={},t){return(await r.e(21).then(r.bind(null,931))).fetchResources(this,e,t)}async addResource(e,t,i){const a=await r.e(21).then(r.bind(null,931));return e.portalItem=this,a.addOrUpdateResource(e,"add",t,i)}async removeResource(e,t){const i=await r.e(21).then(r.bind(null,931));if(e.portalItem&&e.portalItem.itemUrl!==this.itemUrl)throw new o.a("removeresource:portal-item-mismatch","The portal item associated with the provided resource does not match the item");return i.removeResource(this,e,t)}async removeAllResources(e){return(await r.e(21).then(r.bind(null,931))).removeAllResources(this,e)}resourceFromPath(e){return new w({portalItem:this,path:e})}toJSON(){const e=this.extent,t={created:this.created&&this.created.getTime(),description:this.description,extent:e&&[[e.xmin,e.ymin],[e.xmax,e.ymax]],id:this.id,modified:this.modified&&this.modified.getTime(),name:this.name,owner:this.owner,ownerFolder:this.ownerFolder,snippet:this.snippet,tags:this.tags,thumbnail:this.thumbnail,title:this.title,type:this.type,typeKeywords:this.typeKeywords,url:this.url};return Object(n.c)(t)}static fromJSON(e){if(!e)return null;if(e.declaredClass)throw new Error("JSON object is already hydrated");return new S({sourceJSON:e})}_getPostQuery(){const e=this.toJSON();for(const t in e)"tags"===t&&null!==e[t]&&(e[t]=e[t].join(", ")),"typeKeywords"===t&&null!==e[t]&&(e[t]=e[t].join(", ")),"extent"===t&&e[t]&&(e[t]=JSON.stringify(e[t]));return e}};Object(i.a)([Object(d.b)({type:["private","shared","org","public"]})],I.prototype,"access",void 0),Object(i.a)([Object(d.b)()],I.prototype,"accessInformation",void 0),Object(i.a)([Object(d.b)({type:String})],I.prototype,"apiKey",void 0),Object(i.a)([Object(d.b)({json:{read:{source:"appProxies"}}})],I.prototype,"applicationProxies",void 0),Object(i.a)([Object(d.b)()],I.prototype,"avgRating",void 0),Object(i.a)([Object(d.b)()],I.prototype,"categories",void 0),Object(i.a)([Object(d.b)({type:Date})],I.prototype,"created",void 0),Object(i.a)([Object(d.b)()],I.prototype,"culture",void 0),Object(i.a)([Object(d.b)()],I.prototype,"description",void 0),Object(i.a)([Object(d.b)({readOnly:!0})],I.prototype,"displayName",null),Object(i.a)([Object(d.b)({type:y.a})],I.prototype,"extent",void 0),Object(i.a)([Object(b.a)("extent")],I.prototype,"readExtent",null),Object(i.a)([Object(d.b)()],I.prototype,"groupCategories",void 0),Object(i.a)([Object(d.b)({readOnly:!0})],I.prototype,"iconUrl",null),Object(i.a)([Object(d.b)()],I.prototype,"id",void 0),Object(i.a)([Object(d.b)({readOnly:!0})],I.prototype,"isLayer",null),Object(i.a)([Object(d.b)()],I.prototype,"itemControl",void 0),Object(i.a)([Object(d.b)({readOnly:!0})],I.prototype,"itemUrl",null),Object(i.a)([Object(d.b)()],I.prototype,"licenseInfo",void 0),Object(i.a)([Object(d.b)({type:Date})],I.prototype,"modified",void 0),Object(i.a)([Object(d.b)()],I.prototype,"name",void 0),Object(i.a)([Object(d.b)()],I.prototype,"numComments",void 0),Object(i.a)([Object(d.b)()],I.prototype,"numRatings",void 0),Object(i.a)([Object(d.b)()],I.prototype,"numViews",void 0),Object(i.a)([Object(d.b)()],I.prototype,"owner",void 0),Object(i.a)([Object(d.b)()],I.prototype,"ownerFolder",void 0),Object(i.a)([Object(d.b)({type:m.a})],I.prototype,"portal",void 0),Object(i.a)([Object(d.b)()],I.prototype,"screenshots",void 0),Object(i.a)([Object(d.b)()],I.prototype,"size",void 0),Object(i.a)([Object(d.b)()],I.prototype,"snippet",void 0),Object(i.a)([Object(d.b)()],I.prototype,"sourceJSON",void 0),Object(i.a)([Object(d.b)()],I.prototype,"tags",void 0),Object(i.a)([Object(d.b)()],I.prototype,"thumbnail",void 0),Object(i.a)([Object(d.b)({readOnly:!0})],I.prototype,"thumbnailUrl",null),Object(i.a)([Object(d.b)()],I.prototype,"title",void 0),Object(i.a)([Object(d.b)()],I.prototype,"type",void 0),Object(i.a)([Object(d.b)()],I.prototype,"typeKeywords",void 0),Object(i.a)([Object(d.b)()],I.prototype,"url",void 0),Object(i.a)([Object(d.b)({readOnly:!0})],I.prototype,"userItemUrl",null),I=S=Object(i.a)([Object(h.a)("esri.portal.PortalItem")],I);const T=I},565:function(e,t,r){"use strict";r.d(t,"a",(function(){return n})),r.d(t,"b",(function(){return l}));var i=r(298),a=r(111),o=r(192),s=r(85);async function n(e,t){return await e.load(),l(e,t)}async function l(e,t){const r=[],n=(...e)=>{for(const t of e)Object(s.j)(t)||(Array.isArray(t)?n(...t):a.a.isCollection(t)?t.forEach((e=>n(e))):o.a.isLoadable(t)&&r.push(t))};t(n);let l=null;if(await Object(i.b)(r,(async e=>{!1!==(await Object(i.c)(function(e){return"loadAll"in e&&"function"==typeof e.loadAll}(e)?e.loadAll():e.load())).ok||l||(l=e)})),l)throw l.loadError;return e}},614:function(e,t,r){"use strict";r.d(t,"a",(function(){return s}));var i=r(79),a=r(81),o=(r(84),r(82),r(83),r(80));const s=e=>{let t=class extends e{constructor(...e){super(...e),this.goToOverride=null,this.view=null}callGoTo(e){const{view:t}=this;return this.goToOverride?this.goToOverride(t,e):t.goTo(e.target,e.options)}};return Object(i.a)([Object(a.b)()],t.prototype,"goToOverride",void 0),Object(i.a)([Object(a.b)()],t.prototype,"view",void 0),t=Object(i.a)([Object(o.a)("esri.widgets.support.GoTo")],t),t}},629:function(e,t,r){"use strict";r.d(t,"a",(function(){return h})),r.d(t,"b",(function(){return b})),r.d(t,"c",(function(){return s})),r.d(t,"d",(function(){return c})),r.d(t,"e",(function(){return n}));var i=r(116),a=r(117),o=r(109);function s(e){const t=e[0]*e[0]+e[4]*e[4]+e[8]*e[8],r=e[1]*e[1]+e[5]*e[5]+e[9]*e[9],i=e[2]*e[2]+e[6]*e[6]+e[10]*e[10];return Math.sqrt(Math.max(t,r,i))}function n(e,t){const r=Math.sqrt(t[0]*t[0]+t[4]*t[4]+t[8]*t[8]),i=Math.sqrt(t[1]*t[1]+t[5]*t[5]+t[9]*t[9]),o=Math.sqrt(t[2]*t[2]+t[6]*t[6]+t[10]*t[10]);return Object(a.w)(e,r,i,o),e}class l{constructor(e,t){this.min=e,this.max=t,this.range=t-e}ndiff(e,t=0){return Math.ceil((e-t)/this.range)*this.range+t}_normalize(e,t,r,i=0,a=!1){return(r-=i)<e?r+=this.ndiff(e-r):r>t&&(r-=this.ndiff(r-t)),a&&r===t&&(r=e),r+i}normalize(e,t=0,r=!1){return this._normalize(this.min,this.max,e,t,r)}clamp(e,t=0){return Object(i.e)(e-t,this.min,this.max)+t}monotonic(e,t,r){return e<t?t:t+this.ndiff(e-t,r)}minimalMonotonic(e,t,r){return this._normalize(e,e+this.range,t,r)}center(e,t,r){return t=this.monotonic(e,t,r),this.normalize((e+t)/2,r)}diff(e,t,r){return this.monotonic(e,t,r)-e}shortestSignedDiff(e,t){e=this.normalize(e);const r=(t=this.normalize(t))-e,i=t<e?this.minimalMonotonic(e,t)-e:t-this.minimalMonotonic(t,e);return Math.abs(r)<Math.abs(i)?r:i}contains(e,t,r){return t=this.minimalMonotonic(e,t),(r=this.minimalMonotonic(e,r))>e&&r<t}}function c(e,t,r,i){Object(a.j)(p,t,e),Object(a.j)(d,r,e),Object(a.g)(i,p,d),Object(a.r)(i,i),i[3]=-Object(a.h)(e,i)}const p=Object(o.f)(),d=Object(o.f)();function u(e){for(const t in e){const r=e[t];r instanceof Function&&(e[t]=r.bind(e))}return e}u(new l(0,2*Math.PI));const b=u(new l(-Math.PI,Math.PI)),h=u(new l(0,360));Object(o.f)(),Object(o.f)(),Object(o.f)()},641:function(e,t){function r(e){return Promise.resolve().then((function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}))}r.keys=function(){return[]},r.resolve=r,e.exports=r,r.id=641},642:function(e,t,r){"use strict";r.d(t,"a",(function(){return d}));var i=r(79),a=r(111),o=r(134),s=r(85),n=(r(88),r(87),r(270),r(241)),l=r(81),c=(r(84),r(82),r(83),r(80));let p=class extends(Object(o.b)(a.a)){constructor(e){super(e),this.getCollections=null}initialize(){this.handles.add(Object(n.a)((()=>this._refresh())))}destroy(){this.getCollections=null}_refresh(){const e=Object(s.k)(this.getCollections)?this.getCollections():null;if(Object(s.j)(e))return void this.removeAll();let t=0;for(const r of e)Object(s.k)(r)&&(t=this._processCollection(t,r));this.splice(t,this.length)}_createNewInstance(e){return new a.a(e)}_processCollection(e,t){if(!t)return e;const r=this.itemFilterFunction?this.itemFilterFunction:e=>!!e;for(const i of t)if(i){if(r(i)){const t=this.indexOf(i,e);t>=0?t!==e&&this.reorder(i,e):this.add(i,e),++e}if(this.getChildrenFunction){const t=this.getChildrenFunction(i);if(Array.isArray(t))for(const r of t)e=this._processCollection(e,r);else e=this._processCollection(e,t)}}return e}};Object(i.a)([Object(l.b)()],p.prototype,"getCollections",void 0),Object(i.a)([Object(l.b)()],p.prototype,"getChildrenFunction",void 0),Object(i.a)([Object(l.b)()],p.prototype,"itemFilterFunction",void 0),p=Object(i.a)([Object(c.a)("esri.core.CollectionFlattener")],p);const d=p},643:function(e,t,r){"use strict";r.d(t,"a",(function(){return c}));var i=r(79),a=r(86),o=r(81),s=(r(84),r(82),r(83),r(80)),n=r(97);let l=class extends a.a{constructor(e){super(e),this.geometries=null,this.outSpatialReference=null,this.transformation=null,this.transformForward=null}toJSON(){const e=this.geometries.map((function(e){return e.toJSON()})),t=this.geometries[0],r={};return r.outSR=this.outSpatialReference.wkid||JSON.stringify(this.outSpatialReference.toJSON()),r.inSR=t.spatialReference.wkid||JSON.stringify(t.spatialReference.toJSON()),r.geometries=JSON.stringify({geometryType:Object(n.c)(t),geometries:e}),this.transformation&&(r.transformation=this.transformation.wkid||JSON.stringify(this.transformation)),null!=this.transformForward&&(r.transformForward=this.transformForward),r}};Object(i.a)([Object(o.b)()],l.prototype,"geometries",void 0),Object(i.a)([Object(o.b)({json:{read:{source:"outSR"}}})],l.prototype,"outSpatialReference",void 0),Object(i.a)([Object(o.b)()],l.prototype,"transformation",void 0),Object(i.a)([Object(o.b)()],l.prototype,"transformForward",void 0),l=Object(i.a)([Object(s.a)("esri.rest.support.ProjectParameters")],l);const c=l},664:function(e,t,r){"use strict";r.d(t,"a",(function(){return o})),r.d(t,"b",(function(){return a}));var i=r(97);function a(e){return{geometryType:Object(i.c)(e[0]),geometries:e.map((e=>e.toJSON()))}}function o(e,t,r){const a=Object(i.b)(t);return e.map((e=>{const t=a.fromJSON(e);return t.spatialReference=r,t}))}},681:function(e,t,r){"use strict";r.d(t,"a",(function(){return k}));var i=r(79),a=r(173),o=r(86),s=r(116),n=r(81),l=(r(84),r(82),r(104)),c=r(93),p=r(80),d=r(92),u=r(83),b=r(113),h=r(629);let y=class extends(Object(a.a)(o.a)){constructor(...e){super(...e),this.position=new b.a([0,0,0]),this.heading=0,this.tilt=0,this.fov=55}normalizeCtorArgs(e,t,r,i){if(e&&"object"==typeof e&&("x"in e||Array.isArray(e))){const a={position:e};return null!=t&&(a.heading=t),null!=r&&(a.tilt=r),null!=i&&(a.fov=i),a}return e}writePosition(e,t,r,i){const a=e.clone();a.x=Object(u.i)(e.x||0),a.y=Object(u.i)(e.y||0),a.z=e.hasZ?Object(u.i)(e.z||0):e.z,t[r]=a.write({},i)}readPosition(e,t){const r=new b.a;return r.read(e,t),r.x=Object(u.i)(r.x||0),r.y=Object(u.i)(r.y||0),r.z=r.hasZ?Object(u.i)(r.z||0):r.z,r}equals(e){return!!e&&this.tilt===e.tilt&&this.heading===e.heading&&this.fov===e.fov&&this.position.equals(e.position)}};Object(i.a)([Object(n.b)({type:b.a,json:{write:{isRequired:!0}}})],y.prototype,"position",void 0),Object(i.a)([Object(d.a)("position")],y.prototype,"writePosition",null),Object(i.a)([Object(c.a)("position")],y.prototype,"readPosition",null),Object(i.a)([Object(n.b)({type:Number,nonNullable:!0,json:{write:{isRequired:!0}}}),Object(l.a)((e=>h.a.normalize(Object(u.i)(e))))],y.prototype,"heading",void 0),Object(i.a)([Object(n.b)({type:Number,nonNullable:!0,json:{write:{isRequired:!0}}}),Object(l.a)((e=>Object(s.e)(Object(u.i)(e),-180,180)))],y.prototype,"tilt",void 0),Object(i.a)([Object(n.b)({type:Number,nonNullable:!0,json:{read:!1,write:!1}})],y.prototype,"fov",void 0),y=Object(i.a)([Object(p.a)("esri.Camera")],y);const m=y;var f,g=r(99),O=r(85),v=r(97);let j=f=class extends o.a{constructor(e){super(e),this.rotation=0,this.scale=0,this.targetGeometry=null,this.camera=null}castRotation(e){return(e%=360)<0&&(e+=360),e}clone(){return new f({rotation:this.rotation,scale:this.scale,targetGeometry:Object(O.k)(this.targetGeometry)?this.targetGeometry.clone():null,camera:Object(O.k)(this.camera)?this.camera.clone():null})}};function w(){return{enabled:!this.camera}}Object(i.a)([Object(n.b)({type:Number,json:{write:!0,origins:{"web-map":{default:0,write:!0},"web-scene":{write:{overridePolicy:w}}}}})],j.prototype,"rotation",void 0),Object(i.a)([Object(l.a)("rotation")],j.prototype,"castRotation",null),Object(i.a)([Object(n.b)({type:Number,json:{write:!0,origins:{"web-map":{default:0,write:!0},"web-scene":{write:{overridePolicy:w}}}}})],j.prototype,"scale",void 0),Object(i.a)([Object(n.b)({types:g.a,json:{read:v.a,write:!0,origins:{"web-scene":{read:v.a,write:{overridePolicy:w}}}}})],j.prototype,"targetGeometry",void 0),Object(i.a)([Object(n.b)({type:m,json:{write:!0}})],j.prototype,"camera",void 0),j=f=Object(i.a)([Object(p.a)("esri.Viewpoint")],j);const k=j},694:function(e,t,r){"use strict";r.d(t,"a",(function(){return h}));var i=r(88),a=r(89),o=r(85),s=r(132),n=r(491);const l=new Set(["bing-maps","imagery","imagery-tile","map-image","open-street-map","tile","unknown","unsupported","vector-tile","web-tile","wms","wmts"]),c=new Set(["csv","feature","geo-rss","geojson","group","imagery","imagery-tile","kml","map-image","map-notes","ogc-feature","route","tile","unknown","unsupported","vector-tile","web-tile","wfs","wms","wmts"]);function p(e){return!("feature"!==e.type||e.url||!e.source||"memory"!==e.source.type)}function d(e,t){if(t.restrictedWebMapWriting){const r=function(e){return"basemap"===e.layerContainerType?l:"operational-layers"===e.layerContainerType?c:null}(t);return!Object(o.k)(r)||r.has(e.type)&&!p(e)}return!0}function u(e,t){"maxScale"in e&&(t.maxScale=Object(n.b)(e.maxScale)),"minScale"in e&&(t.minScale=Object(n.b)(e.minScale))}function b(e,t){if(function(e,t){if(p(e)){const r=Object(s.b)("featureCollection.layers",t),i=r&&r[0]&&r[0].layerDefinition;i&&u(e,i)}else"stream"===e.type?u(e,t.layerDefinition=t.layerDefinition||{}):"group"!==e.type&&u(e,t)}(e,t),"blendMode"in e&&(t.blendMode=e.blendMode,"normal"===t.blendMode&&delete t.blendMode),t.opacity=Object(n.b)(e.opacity),t.title=e.title||"Layer",t.visibility=e.visible,"legendEnabled"in e&&"wmts"!==e.type)if(p(e)){const r=t.featureCollection;r&&(r.showLegend=e.legendEnabled)}else t.showLegend=e.legendEnabled}function h(e,t,r){if(!("write"in e)||!e.write)return r&&r.messages&&r.messages.push(new i.a("layer:unsupported",`Layers (${e.title}, ${e.id}) of type '${e.declaredClass}' cannot be persisted`,{layer:e})),null;if(d(e,r)){const t={};return e.write(t,r)?t:null}return Object(o.k)(t)&&b(e,t=Object(a.a)(t)),t}},718:function(e,t,r){"use strict";r.d(t,"a",(function(){return p}));var i=r(103),a=r(83),o=r(97),s=r(137),n=r(664),l=r(643);const c=Object(a.m)(l.a);async function p(e,t,r){t=c(t);const a=Object(s.c)(e),l={...a.query,f:"json",...t.toJSON()},p=t.outSpatialReference,d=Object(o.c)(t.geometries[0]),u=Object(s.a)(l,r);return Object(i.default)(a.path+"/project",u).then((({data:{geometries:e}})=>Object(n.a)(e,d,p)))}},719:function(e,t,r){"use strict";r.d(t,"a",(function(){return a}));var i=r(88);class a{constructor(e,t,r=""){this.major=e,this.minor=t,this._context=r}lessThan(e,t){return this.major<e||e===this.major&&this.minor<t}since(e,t){return!this.lessThan(e,t)}validate(e){if(this.major!==e.major){const t=this._context&&this._context+":",r=this._context&&this._context+" ";throw new i.a(t+"unsupported-version",`Required major ${r}version is '${this.major}', but got '\${version.major}.\${version.minor}'`,{version:e})}}clone(){return new a(this.major,this.minor,this._context)}static parse(e,t=""){const[r,o]=e.split("."),s=/^\s*\d+\s*$/;if(!r||!r.match||!r.match(s))throw new i.a((t&&t+":")+"invalid-version","Expected major version to be a number, but got '${version}'",{version:e});if(!o||!o.match||!o.match(s))throw new i.a((t&&t+":")+"invalid-version","Expected minor version to be a number, but got '${version}'",{version:e});const n=parseInt(r,10),l=parseInt(o,10);return new a(n,l,t)}}},779:function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return T}));var i,a=r(79),o=r(111),s=r(353),n=r(302),l=r(86),c=r(89),p=r(192),d=r(565),u=r(87),b=r(85),h=r(91),y=r(98),m=r(81),f=(r(83),r(80)),g=r(92),O=r(96),v=r(181),j=r(547),w=r(780),k=r(694);let _=0;const S=u.a.getLogger("esri.Basemap");let I=i=class extends(Object(l.b)(p.a)){constructor(e){super(e),this.id=null,this.portalItem=null,this.spatialReference=null,this.thumbnailUrl=null,this.title="Basemap",this.id=Date.now().toString(16)+"-basemap-"+_++,this.baseLayers=new o.a,this.referenceLayers=new o.a;const t=e=>{e.parent&&e.parent!==this&&"remove"in e.parent&&e.parent.remove(e),e.parent=this,"elevation"===e.type&&S.error(`Layer '${e.title}, id:${e.id}' of type '${e.type}' is not supported as a basemap layer and will therefore be ignored.`)},r=e=>{e.parent=null};this.baseLayers.on("after-add",(e=>t(e.item))),this.referenceLayers.on("after-add",(e=>t(e.item))),this.baseLayers.on("after-remove",(e=>r(e.item))),this.referenceLayers.on("after-remove",(e=>r(e.item)))}initialize(){this.when().catch((e=>{S.error("#load()",`Failed to load basemap (title: '${this.title}', id: '${this.id}')`,e)})),this.resourceInfo&&this.read(this.resourceInfo.data,this.resourceInfo.context)}destroy(){var e;const t=this.baseLayers.removeAll();for(const i of t)i.destroy();const r=this.referenceLayers.removeAll();for(const i of r)i.destroy();this.baseLayers.destroy(),this.referenceLayers.destroy(),null==(e=this.portalItem)||e.destroy(),this.portalItem=null}normalizeCtorArgs(e){return e&&"resourceInfo"in e&&(this._set("resourceInfo",e.resourceInfo),delete(e={...e}).resourceInfo),e}set baseLayers(e){this._set("baseLayers",Object(s.b)(e,this._get("baseLayers")))}_writeBaseLayers(e,t,r){const i=[];e?(r={...r,layerContainerType:"basemap"},this.baseLayers.forEach((e=>{const t=Object(k.a)(e,r.webmap?r.webmap.getLayerJSONFromResourceInfo(e):null,r);Object(b.k)(t)&&i.push(t)})),this.referenceLayers.forEach((e=>{const t=Object(k.a)(e,r.webmap?r.webmap.getLayerJSONFromResourceInfo(e):null,r);Object(b.k)(t)&&(t.isReference=!0,i.push(t))})),t.baseMapLayers=i):t.baseMapLayers=i}set referenceLayers(e){this._set("referenceLayers",Object(s.b)(e,this._get("referenceLayers")))}writeTitle(e,t){t.title=e||"Basemap"}load(e){return this.addResolvingPromise(this._loadFromSource(e)),Promise.resolve(this)}loadAll(){return Object(d.a)(this,(e=>{e(this.baseLayers,this.referenceLayers)}))}clone(){const e={id:this.id,title:this.title,portalItem:this.portalItem,baseLayers:this.baseLayers.slice(),referenceLayers:this.referenceLayers.slice()};return this.loaded&&(e.loadStatus="loaded"),new i({resourceInfo:this.resourceInfo}).set(e)}read(e,t){this.resourceInfo||this._set("resourceInfo",{data:e,context:t}),super.read(e,t)}write(e,t){return e=e||{},t&&t.origin||(t={origin:"web-map",...t}),super.write(e,t),!this.loaded&&this.resourceInfo&&this.resourceInfo.data.baseMapLayers&&(e.baseMapLayers=this.resourceInfo.data.baseMapLayers.map((e=>{const t=Object(c.a)(e);return t.url&&Object(y.y)(t.url)&&(t.url=`https:${t.url}`),t.templateUrl&&Object(y.y)(t.templateUrl)&&(t.templateUrl=`https:${t.templateUrl}`),t}))),e}async _loadFromSource(e){const{resourceInfo:t,portalItem:r}=this;Object(h.t)(e);const i=[];if(t){const r=t.context?t.context.url:null;if(i.push(this._loadLayersFromJSON(t.data,r,e)),t.data.id&&!t.data.title){const e=t.data.id;i.push(Object(w.b)(e).then((e=>{e&&this.read({title:e},t.context)})))}}else r&&i.push(this._loadFromItem(r,e));await Promise.all(i)}async _loadLayersFromJSON(e,t,i){const a=this.resourceInfo&&this.resourceInfo.context,o=this.portalItem&&this.portalItem.portal||a&&a.portal||null,s=a&&"web-scene"===a.origin?"web-scene":"web-map",{populateOperationalLayers:n}=await r.e(161).then(r.bind(null,1043)),l=[];if(Object(h.t)(i),e.baseMapLayers&&Array.isArray(e.baseMapLayers)){const r={context:{origin:s,url:t,portal:o,layerContainerType:"basemap"},defaultLayerType:"DefaultTileLayer"},i=n(this.baseLayers,e.baseMapLayers.filter((e=>!e.isReference)),r);l.push(i);const a=n(this.referenceLayers,e.baseMapLayers.filter((e=>e.isReference)),r);l.push(a)}await Object(h.i)(l)}async _loadFromItem(e,t){const r=await e.load(t),i=await r.fetchData("json",t),a=Object(y.M)(e.itemUrl);return this._set("resourceInfo",{data:i.baseMap,context:{origin:"web-map",portal:e.portal||v.a.getDefault(),url:a}}),this.read(this.resourceInfo.data,this.resourceInfo.context),this.read({spatialReference:i.spatialReference},this.resourceInfo.context),this.read({title:e.title,thumbnailUrl:e.thumbnailUrl},{origin:"portal-item",portal:e.portal||v.a.getDefault(),url:a}),this._loadLayersFromJSON(this.resourceInfo.data,a,t)}static fromId(e){const t=w.a[e];if(t){if(t.deprecated){let t=null;"dark-gray"===e?t="dark-gray-vector":"gray"===e?t="gray-vector":"streets"===e?t="streets-vector":"topo"===e&&(t="topo-vector"),Object(n.a)(S,`The ${e} basemap has entered mature support and is no longer being updated.`,{replacement:t,see:"https://arcg.is/1iq8aD",warnOnce:!0})}return i.fromJSON(t)}return null}};Object(a.a)([Object(m.b)({json:{write:{ignoreOrigin:!0,target:"baseMapLayers",writer(e,t,r,i){this._writeBaseLayers(e,t,i)}},origins:{"web-scene":{write:{ignoreOrigin:!0,target:{baseMapLayers:{type:o.a}},writer(e,t,r,i){this._writeBaseLayers(e,t,i)}}}}}})],I.prototype,"baseLayers",null),Object(a.a)([Object(m.b)({type:String,json:{origins:{"web-scene":{write:!0}}}})],I.prototype,"id",void 0),Object(a.a)([Object(m.b)({type:j.default})],I.prototype,"portalItem",void 0),Object(a.a)([Object(m.b)()],I.prototype,"referenceLayers",null),Object(a.a)([Object(m.b)({readOnly:!0})],I.prototype,"resourceInfo",void 0),Object(a.a)([Object(m.b)({type:O.a})],I.prototype,"spatialReference",void 0),Object(a.a)([Object(m.b)()],I.prototype,"thumbnailUrl",void 0),Object(a.a)([Object(m.b)({type:String,json:{origins:{"web-scene":{write:{isRequired:!0}}}}})],I.prototype,"title",void 0),Object(a.a)([Object(g.a)("title")],I.prototype,"writeTitle",null),I=i=Object(a.a)([Object(f.a)("esri.Basemap")],I);const T=I},780:function(e,t,r){"use strict";r.d(t,"a",(function(){return s})),r.d(t,"b",(function(){return o}));var i=r(157),a=r(148);async function o(e){if(!e)return;const t=e.indexOf("-vector")>-1?e.slice(0,e.indexOf("-vector")):e,r=await Object(a.a)("esri/t9n/basemaps");return r[e]||r[t]}const s={streets:{id:"streets",classic:!0,deprecated:!0,get thumbnailUrl(){return Object(i.a)("esri/images/basemap/streets.jpg")},baseMapLayers:[{id:"streets-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Street_Map/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Street Map",showLegend:!1,visibility:!0,opacity:1}]},satellite:{id:"satellite",classic:!0,get thumbnailUrl(){return Object(i.a)("esri/images/basemap/satellite.jpg")},baseMapLayers:[{id:"satellite-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Imagery",showLegend:!1,visibility:!0,opacity:1}]},hybrid:{id:"hybrid",classic:!0,get thumbnailUrl(){return Object(i.a)("esri/images/basemap/hybrid.jpg")},baseMapLayers:[{id:"hybrid-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Imagery",showLegend:!1,visibility:!0,opacity:1},{id:"hybrid-reference-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/Reference/World_Boundaries_and_Places/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Boundaries and Places",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},terrain:{id:"terrain",classic:!0,get thumbnailUrl(){return Object(i.a)("esri/images/basemap/terrain.jpg")},baseMapLayers:[{id:"terrain-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Terrain_Base/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Terrain Base",showLegend:!1,visibility:!0,opacity:1},{id:"terrain-reference-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/Reference/World_Reference_Overlay/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Reference Overlay",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},topo:{id:"topo",classic:!0,deprecated:!0,get thumbnailUrl(){return Object(i.a)("esri/images/basemap/topo.jpg")},baseMapLayers:[{id:"topo-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Topo_Map/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Topo Map",showLegend:!1,visibility:!0,opacity:1}]},gray:{id:"gray",classic:!0,deprecated:!0,get thumbnailUrl(){return Object(i.a)("esri/images/basemap/gray.jpg")},baseMapLayers:[{id:"gray-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Light_Gray_Base/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Light Gray Base",showLegend:!1,visibility:!0,opacity:1},{id:"gray-reference-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Light_Gray_Reference/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Light Gray Reference",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},"dark-gray":{id:"dark-gray",classic:!0,deprecated:!0,get thumbnailUrl(){return Object(i.a)("esri/images/basemap/dark-gray.jpg")},baseMapLayers:[{id:"dark-gray-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Dark_Gray_Base/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Dark Gray Base",showLegend:!1,visibility:!0,opacity:1},{id:"dark-gray-reference-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Dark_Gray_Reference/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Dark Gray Reference",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},oceans:{id:"oceans",classic:!0,get thumbnailUrl(){return Object(i.a)("esri/images/basemap/oceans.jpg")},baseMapLayers:[{id:"oceans-base-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Ocean/World_Ocean_Base/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Ocean Base",showLegend:!1,visibility:!0,opacity:1},{id:"oceans-reference-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Ocean/World_Ocean_Reference/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Ocean Reference",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},"national-geographic":{id:"national-geographic",classic:!0,deprecated:!0,get thumbnailUrl(){return Object(i.a)("esri/images/basemap/national-geographic.jpg")},baseMapLayers:[{id:"national-geographic-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/NatGeo_World_Map/MapServer",title:"NatGeo World Map",showLegend:!1,layerType:"ArcGISTiledMapServiceLayer",visibility:!0,opacity:1}]},osm:{id:"osm",classic:!0,get thumbnailUrl(){return Object(i.a)("esri/images/basemap/osm.jpg")},baseMapLayers:[{id:"osm-base-layer",layerType:"OpenStreetMap",title:"Open Street Map",showLegend:!1,visibility:!0,opacity:1}]},"dark-gray-vector":{id:"dark-gray-vector",classic:!0,get thumbnailUrl(){return Object(i.a)("esri/images/basemap/dark-gray-vector.jpg")},baseMapLayers:[{id:"dark-gray-base-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/5e9b3685f4c24d8781073dd928ebda50/resources/styles/root.json",layerType:"VectorTileLayer",title:"Dark Gray Base",visibility:!0,opacity:1},{id:"dark-gray-reference-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/747cb7a5329c478cbe6981076cc879c5/resources/styles/root.json",layerType:"VectorTileLayer",title:"Dark Gray Reference",isReference:!0,visibility:!0,opacity:1}]},"gray-vector":{id:"gray-vector",classic:!0,get thumbnailUrl(){return Object(i.a)("esri/images/basemap/gray-vector.jpg")},baseMapLayers:[{id:"gray-base-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/291da5eab3a0412593b66d384379f89f/resources/styles/root.json",layerType:"VectorTileLayer",title:"Light Gray Base",visibility:!0,opacity:1},{id:"gray-reference-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/1768e8369a214dfab4e2167d5c5f2454/resources/styles/root.json",layerType:"VectorTileLayer",title:"Light Gray Reference",isReference:!0,visibility:!0,opacity:1}]},"streets-vector":{id:"streets-vector",classic:!0,get thumbnailUrl(){return Object(i.a)("esri/images/basemap/streets-vector.jpg")},baseMapLayers:[{id:"streets-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/de26a3cf4cc9451298ea173c4b324736/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Streets",visibility:!0,opacity:1}]},"topo-vector":{id:"topo-vector",classic:!0,get thumbnailUrl(){return Object(i.a)("esri/images/basemap/topo-vector.jpg")},baseMapLayers:[{id:"world-hillshade-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Hillshade",showLegend:!1,visibility:!0,opacity:1},{id:"topo-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/7dc6cea0b1764a1f9af2e679f642f0f5/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Topo",visibility:!0,opacity:1}]},"streets-night-vector":{id:"streets-night-vector",classic:!0,get thumbnailUrl(){return Object(i.a)("esri/images/basemap/streets-night.jpg")},baseMapLayers:[{id:"streets-night-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/86f556a2d1fd468181855a35e344567f/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Streets Night",visibility:!0,opacity:1}]},"streets-relief-vector":{id:"streets-relief-vector",classic:!0,get thumbnailUrl(){return Object(i.a)("esri/images/basemap/streets-relief.jpg")},baseMapLayers:[{id:"world-hillshade-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Hillshade",showLegend:!1,visibility:!0,opacity:1},{id:"streets-relief-vector-base-layer",styleUrl:"//www.arcgis.com/sharing/rest/content/items/b266e6d17fc345b498345613930fbd76/resources/styles/root.json",title:"World Streets Relief",layerType:"VectorTileLayer",visibility:!0,opacity:1}]},"streets-navigation-vector":{id:"streets-navigation-vector",classic:!0,get thumbnailUrl(){return Object(i.a)("esri/images/basemap/streets-navigation.jpg")},baseMapLayers:[{id:"streets-navigation-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/63c47b7177f946b49902c24129b87252/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Streets Navigation",visibility:!0,opacity:1}]},"arcgis-imagery":{get thumbnailUrl(){return Object(i.a)("esri/images/basemap/hybrid.jpg")},title:"Imagery Hybrid",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Imagery",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/World_Imagery/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Imagery:Labels",title:"Hybrid Reference Layer",isReference:!0}]},"arcgis-imagery-standard":{get thumbnailUrl(){return Object(i.a)("esri/images/basemap/satellite.jpg")},title:"Imagery",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Imagery",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/World_Imagery/MapServer"}]},"arcgis-imagery-labels":{title:"Hybrid [Reference]",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Imagery:Labels",title:"Hybrid Reference Layer",isReference:!0}]},"arcgis-light-gray":{get thumbnailUrl(){return Object(i.a)("esri/images/basemap/gray-vector.jpg")},title:"Light Gray Canvas",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:LightGray:Base",title:"Light Gray Canvas Base"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:LightGray:Labels",title:"Light Gray Canvas Labels",isReference:!0}]},"arcgis-dark-gray":{get thumbnailUrl(){return Object(i.a)("esri/images/basemap/dark-gray.jpg")},title:"Dark Gray Canvas",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:DarkGray:Base",title:"Dark Gray Canvas Base"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:DarkGray:Labels",title:"Dark Gray Canvas Labels",isReference:!0}]},"arcgis-navigation":{get thumbnailUrl(){return Object(i.a)("esri/images/basemap/streets-navigation.jpg")},title:"Navigation",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Navigation",title:"World Navigation Map"}]},"arcgis-navigation-night":{title:"Navigation (Dark Mode)",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:NavigationNight",title:"World Navigation Map (Dark Mode)"}]},"arcgis-streets":{get thumbnailUrl(){return Object(i.a)("esri/images/basemap/streets-vector.jpg")},title:"Streets",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Streets",title:"World Street Map"}]},"arcgis-streets-night":{get thumbnailUrl(){return Object(i.a)("esri/images/basemap/streets-night.jpg")},title:"Streets (Night)",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:StreetsNight",title:"World Street Map (Night)"}]},"arcgis-streets-relief":{get thumbnailUrl(){return Object(i.a)("esri/images/basemap/streets-relief.jpg")},title:"Streets (with Relief)",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:StreetsRelief:Base",title:"World Street Map (with Relief)"}]},"arcgis-topographic":{get thumbnailUrl(){return Object(i.a)("esri/images/basemap/topo.jpg")},title:"Topographic",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Topographic:Base",title:"World Topographic Map"}]},"arcgis-oceans":{get thumbnailUrl(){return Object(i.a)("esri/images/basemap/oceans.jpg")},title:"Oceans",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Ocean Base",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Ocean/World_Ocean_Base/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Oceans:Labels",title:"World Ocean Reference",isReference:!0}]},"osm-standard":{title:"OpenStreetMap",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:Standard",title:"OpenStreetMap"}]},"osm-standard-relief":{title:"OpenStreetMap (with relief)",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:StandardRelief:Base",layerType:"VectorTileLayer",title:"OpenStreetMap Relief Base"}]},"osm-streets":{title:"OpenStreetMap (Streets)",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:Streets",title:"OpenStreetMap (Streets)"}]},"osm-streets-relief":{title:"OpenStreetMap (Streets with relief)",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:StreetsRelief:Base",layerType:"VectorTileLayer",title:"OpenStreetMap Relief Base"}]},"osm-light-gray":{title:"OpenStreetMap (Light Gray Canvas)",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:LightGray:Base",title:"OSM (Light Gray Base)"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:LightGray:Labels",title:"OSM (Light Gray Reference)",isReference:!0}]},"osm-dark-gray":{title:"OpenStreetMap (Dark Gray Canvas)",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:DarkGray:Base",title:"OSM (Dark Gray Base)"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:DarkGray:Labels",title:"OSM (Dark Gray Reference)",isReference:!0}]},"arcgis-terrain":{title:"Terrain with Labels",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Terrain:Base",title:"World Terrain Base"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Terrain:Detail",title:"World Terrain Reference",isReference:!0}]},"arcgis-community":{title:"Community",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Community",title:"Community"}]},"arcgis-charted-territory":{title:"Charted Territory",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:ChartedTerritory:Base",title:"Charted Territory"}]},"arcgis-colored-pencil":{title:"Colored Pencil",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:ColoredPencil",title:"Colored Pencil"}]},"arcgis-nova":{title:"Nova",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Nova",title:"Nova"}]},"arcgis-modern-antique":{title:"Modern Antique",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:ModernAntique:Base",title:"Modern Antique"}]},"arcgis-midcentury":{title:"Mid-Century",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Midcentury",title:"Mid-Century"}]},"arcgis-newspaper":{title:"Newspaper",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Newspaper",title:"Newspaper"}]},"arcgis-hillshade-light":{title:"Hillshade",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"}]},"arcgis-hillshade-dark":{title:"Hillshade (Dark)",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade (Dark)",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade_Dark/MapServer"}]}}},781:function(e,t,r){"use strict";r.d(t,"a",(function(){return m})),r.d(t,"b",(function(){return u})),r.d(t,"c",(function(){return b})),r.d(t,"d",(function(){return h})),r.d(t,"e",(function(){return O})),r.d(t,"f",(function(){return y})),r.d(t,"g",(function(){return f})),r.d(t,"h",(function(){return g}));var i=r(779),a=r(153),o=r(111),s=r(87),n=r(85),l=r(98),c=r(83),p=r(780);const d=s.a.getLogger("esri.support.basemapUtils");function u(){return{}}function b(e){for(const t in e){const r=e[t];!1===(null==r?void 0:r.destroyed)&&r.destroy(),delete e[t]}}function h(e,t){var r;let o;if("string"==typeof e){if(!(e in p.a)){const t=Object.entries(p.a).filter((([e,t])=>a.a.apiKey&&!t.classic||!a.a.apiKey&&t.classic&&!t.deprecated)).map((([e])=>`"${e}"`)).join(", ");return d.warn(`Unable to find basemap definition for: ${e}. Try one of these: ${t}`),null}t&&(o=t[e]),o||(o=i.default.fromId(e),t&&(t[e]=o))}else o=Object(c.m)(i.default,e);return null!=(r=o)&&r.destroyed&&(d.warn("The provided basemap is already destroyed",{basemap:o}),o=null),o}function y(e){let t=null;const r=w(e),i=!r.baseLayers.length;for(const a in p.a){const e=T(r,S(p.a[a]),{mustMatchReferences:i});if("equal"===e){t=a;break}"base-layers-equal"===e&&(t=a)}return t}function m(e,t){return e===t||"equal"===T(w(e),w(t),{mustMatchReferences:!0})}function f(e){return!(null==e||!e.baseLayers.concat(e.referenceLayers).some(g))}function g(e){if(j(e.url))return!0;if("vector-tile"===e.type)for(const t in e.sourceNameToSource){const r=e.sourceNameToSource[t];if(j(null==r?void 0:r.sourceUrl))return!0}return!1}function O(e,t){var r,i,a;if(Object(n.j)(t)||Object(n.j)(e))return{spatialReference:null,updating:!1};if("not-loaded"===t.loadStatus)return t.load(),{spatialReference:null,updating:!0};if(t.spatialReference)return{spatialReference:t.spatialReference,updating:!1};if(0===t.baseLayers.length)return{spatialReference:null,updating:!1};const o=t.baseLayers.getItemAt(0);switch(o.loadStatus){case"not-loaded":o.load();case"loading":return{spatialReference:null,updating:!0};case"failed":return{spatialReference:null,updating:!1}}const s=(("supportedSpatialReferences"in o?o.supportedSpatialReferences:null)||["tileInfo"in o?null==(r=o.tileInfo)?void 0:r.spatialReference:o.spatialReference]).filter(Boolean);return e.spatialReference?{spatialReference:null!=(i=null!=(a=s.find((t=>e.spatialReference.equals(t))))?a:s[0])?i:null,updating:!1}:{spatialReference:s[0],updating:!1}}const v=/^(basemaps|ibasemaps).*-api\.arcgis\.com$/i;function j(e){if(!e)return!1;const t=new l.a(Object(l.C)(e));return v.test(t.authority)}function w(e){return e?!e.loaded&&e.resourceInfo?S(e.resourceInfo.data):{baseLayers:k(e.baseLayers),referenceLayers:k(e.referenceLayers)}:null}function k(e){return(o.a.isCollection(e)?e.toArray():e).map(_)}function _(e){var t,r;return{type:e.type,url:M("urlTemplate"in e&&e.urlTemplate||e.url||"styleUrl"in e&&e.styleUrl),minScale:"minScale"in e&&null!=e.minScale?e.minScale:0,maxScale:"maxScale"in e&&null!=e.maxScale?e.maxScale:0,opacity:null!=e.opacity?e.opacity:1,visible:null==e.visible||!!e.visible,sublayers:"map-image"!==e.type&&"wms"!==e.type||!Object(n.k)(e.sublayers)||null==(t=e.sublayers)?void 0:t.map((e=>({id:e.id,visible:e.visible}))),activeLayerId:"wmts"===e.type?null==(r=e.activeLayer)?void 0:r.id:void 0}}function S(e){return e?{baseLayers:I(e.baseMapLayers.filter((e=>!e.isReference))),referenceLayers:I(e.baseMapLayers.filter((e=>e.isReference)))}:null}function I(e){return e.map((e=>function(e){let t;switch(e.layerType){case"VectorTileLayer":t="vector-tile";break;case"ArcGISTiledMapServiceLayer":t="tile";break;default:t="unknown"}return{type:t,url:M(e.templateUrl||e.urlTemplate||e.styleUrl||e.url),minScale:null!=e.minScale?e.minScale:0,maxScale:null!=e.maxScale?e.maxScale:0,opacity:null!=e.opacity?e.opacity:1,visible:null==e.visibility||!!e.visibility,sublayers:void 0,activeLayerId:void 0}}(e)))}function T(e,t,r){return null!=e!=(null!=t)?"not-equal":e?x(e.baseLayers,t.baseLayers)?x(e.referenceLayers,t.referenceLayers)?"equal":r.mustMatchReferences?"not-equal":"base-layers-equal":"not-equal":"equal"}function x(e,t){if(e.length!==t.length)return!1;for(let r=0;r<e.length;r++)if(!L(e[r],t[r]))return!1;return!0}function L(e,t){if(e.type!==t.type||e.url!==t.url||e.minScale!==t.minScale||e.maxScale!==t.maxScale||e.visible!==t.visible||e.opacity!==t.opacity)return!1;if(Object(n.k)(e.activeLayerId)||Object(n.k)(t.activeLayerId))return e.activeLayerId===t.activeLayerId;if(Object(n.k)(e.sublayers)||Object(n.k)(t.sublayers)){if(Object(n.j)(e.sublayers)||Object(n.j)(t.sublayers)||e.sublayers.length!==t.sublayers.length)return!1;for(let r=0;r<e.sublayers.length;r++){const i=e.sublayers.at(r),a=t.sublayers.at(r);if(i.id!==a.id||i.visible!==a.visible)return!1}}return!0}function M(e){return e?Object(l.F)(e).replace(/^\s*https?:/i,"").toLowerCase():""}},807:function(e,t,r){"use strict";r.d(t,"a",(function(){return h}));var i=r(79),a=r(111),o=r(353),s=r(87),n=r(91),l=r(81),c=(r(84),r(82),r(83),r(80)),p=r(207);function d(e){return e&&"group"===e.type}function u(e,t,r){let i,a;if(e)for(let o=0,s=e.length;o<s;o++){if(i=e.getItemAt(o),i[t]===r)return i;if(d(i)&&(a=u(i.layers,t,r),a))return a}}const b=s.a.getLogger("esri.support.LayersMixin"),h=e=>{let t=class extends e{constructor(...e){super(...e),this.layers=new a.a;const t=e=>{e.parent=this,this.layerAdded(e),"elevation"!==e.type&&"base-elevation"!==e.type||b.error(`Layer 'title:${e.title}, id:${e.id}' of type '${e.type}' is not supported as an operational layer and will therefore be ignored.`)},r=e=>{e.parent=null,this.layerRemoved(e)};this.layers.on("before-add",(e=>(e=>{e.parent&&"remove"in e.parent&&e.parent.remove(e)})(e.item))),this.layers.on("after-add",(e=>t(e.item))),this.layers.on("after-remove",(e=>r(e.item)))}destroy(){const e=this.layers.removeAll();for(const t of e)this.layerRemoved(t),t.destroy();this.layers.destroy()}set layers(e){this._set("layers",Object(o.b)(e,this._get("layers")))}add(e,t){const r=this.layers;if(t=r.getNextIndex(t),e instanceof p.a){const i=e;i.parent===this?this.reorder(i,t):r.add(i,t)}else Object(n.n)(e)?e.then((e=>{this.destroyed||this.add(e,t)})):b.error("#add()","The item being added is not a Layer or a Promise that resolves to a Layer.")}addMany(e,t){const r=this.layers;t=r.getNextIndex(t),e.slice().forEach((e=>{e.parent!==this?(r.add(e,t),t+=1):this.reorder(e,t)}))}findLayerById(e){return u(this.layers,"id",e)}findLayerByUid(e){return u(this.layers,"uid",e)}remove(e){return this.layers.remove(e)}removeMany(e){return this.layers.removeMany(e)}removeAll(){return this.layers.removeAll()}reorder(e,t){return this.layers.reorder(e,t)}layerAdded(e){}layerRemoved(e){}};return Object(i.a)([Object(l.b)()],t.prototype,"layers",null),t=Object(i.a)([Object(c.a)("esri.support.LayersMixin")],t),t}},808:function(e,t,r){"use strict";r.d(t,"a",(function(){return b}));var i=r(79),a=r(111),o=r(353),s=r(87),n=r(81),l=(r(84),r(82),r(83),r(80));const c="esri.support.TablesMixin",p=s.a.getLogger(c);function d(e){return e&&"group"===e.type}function u(e,t,r){if(e)for(let i=0,a=e.length;i<a;i++){const a=e.getItemAt(i);if(a[t]===r)return a;if(d(a)){const e=u(a.tables,t,r);if(e)return e}}}const b=e=>{let t=class extends e{constructor(...e){super(...e),this.tables=new a.a,this.tables.on("after-add",(e=>{const t=e.item;t.parent&&t.parent!==this&&"tables"in t.parent&&t.parent.tables.remove(t),t.parent=this,"feature"!==t.type&&p.error(`Layer 'title:${t.title}, id:${t.id}' of type '${t.type}' is not supported as a table and will therefore be ignored.`)})),this.tables.on("after-remove",(e=>{e.item.parent=null}))}destroy(){const e=this.tables.removeAll();for(const t of e)t.destroy();this.tables.destroy()}set tables(e){this._set("tables",Object(o.b)(e,this._get("tables")))}findTableById(e){return u(this.tables,"id",e)}findTableByUid(e){return u(this.tables,"uid",e)}};return Object(i.a)([Object(n.b)()],t.prototype,"tables",null),t=Object(i.a)([Object(l.a)(c)],t),t}},815:function(e,t,r){"use strict";r.d(t,"a",(function(){return p}));var i,a=r(79),o=r(100),s=r(81),n=(r(84),r(82),r(104)),l=r(80);let c=i=class extends o.a{constructor(e){super(e),this.autoCloseMenu=!1,this.iconClass=null,this.items=null,this.label=null,this.open=!1,this.selected=!1,this.selectionEnabled=!1,this.clickFunction=null}castItems(e){return e?e.map((e=>e instanceof i?e:new i(e))):null}};Object(a.a)([Object(s.b)()],c.prototype,"autoCloseMenu",void 0),Object(a.a)([Object(s.b)()],c.prototype,"iconClass",void 0),Object(a.a)([Object(s.b)()],c.prototype,"items",void 0),Object(a.a)([Object(n.a)("items")],c.prototype,"castItems",null),Object(a.a)([Object(s.b)()],c.prototype,"label",void 0),Object(a.a)([Object(s.b)()],c.prototype,"open",void 0),Object(a.a)([Object(s.b)()],c.prototype,"selected",void 0),Object(a.a)([Object(s.b)()],c.prototype,"selectionEnabled",void 0),Object(a.a)([Object(s.b)()],c.prototype,"clickFunction",void 0),c=i=Object(a.a)([Object(l.a)("esri.widgets.FeatureTable.Grid.support.ButtonMenuItem")],c);const p=c},844:function(e,t,r){"use strict";function i(e,t){if(!a(e,t)){const r=e.typeKeywords;r?r.push(t):e.typeKeywords=[t]}}function a(e,t){return!!e.typeKeywords&&e.typeKeywords.indexOf(t)>-1}function o(e,t){const r=e.typeKeywords;if(r){const e=r.indexOf(t);e>-1&&r.splice(e,1)}}r.d(t,"a",(function(){return i})),r.d(t,"b",(function(){return a})),r.d(t,"c",(function(){return o}))},906:function(e,t,r){"use strict";r.d(t,"a",(function(){return Ie}));var i=r(79);function a(e){if(null==e)return window;if("[object Window]"!==e.toString()){var t=e.ownerDocument;return t&&t.defaultView||window}return e}function o(e){return e instanceof a(e).Element||e instanceof Element}function s(e){return e instanceof a(e).HTMLElement||e instanceof HTMLElement}function n(e){return"undefined"!==typeof ShadowRoot&&(e instanceof a(e).ShadowRoot||e instanceof ShadowRoot)}var l=Math.max,c=Math.min,p=Math.round;function d(e,t){void 0===t&&(t=!1);var r=e.getBoundingClientRect(),i=1,a=1;if(s(e)&&t){var o=e.offsetHeight,n=e.offsetWidth;n>0&&(i=p(r.width)/n||1),o>0&&(a=p(r.height)/o||1)}return{width:r.width/i,height:r.height/a,top:r.top/a,right:r.right/i,bottom:r.bottom/a,left:r.left/i,x:r.left/i,y:r.top/a}}function u(e){var t=a(e);return{scrollLeft:t.pageXOffset,scrollTop:t.pageYOffset}}function b(e){return e?(e.nodeName||"").toLowerCase():null}function h(e){return((o(e)?e.ownerDocument:e.document)||window.document).documentElement}function y(e){return d(h(e)).left+u(e).scrollLeft}function m(e){return a(e).getComputedStyle(e)}function f(e){var t=m(e),r=t.overflow,i=t.overflowX,a=t.overflowY;return/auto|scroll|overlay|hidden/.test(r+a+i)}function g(e,t,r){void 0===r&&(r=!1);var i=s(t),o=s(t)&&function(e){var t=e.getBoundingClientRect(),r=p(t.width)/e.offsetWidth||1,i=p(t.height)/e.offsetHeight||1;return 1!==r||1!==i}(t),n=h(t),l=d(e,o),c={scrollLeft:0,scrollTop:0},m={x:0,y:0};return(i||!i&&!r)&&(("body"!==b(t)||f(n))&&(c=function(e){return e!==a(e)&&s(e)?{scrollLeft:(t=e).scrollLeft,scrollTop:t.scrollTop}:u(e);var t}(t)),s(t)?((m=d(t,!0)).x+=t.clientLeft,m.y+=t.clientTop):n&&(m.x=y(n))),{x:l.left+c.scrollLeft-m.x,y:l.top+c.scrollTop-m.y,width:l.width,height:l.height}}function O(e){var t=d(e),r=e.offsetWidth,i=e.offsetHeight;return Math.abs(t.width-r)<=1&&(r=t.width),Math.abs(t.height-i)<=1&&(i=t.height),{x:e.offsetLeft,y:e.offsetTop,width:r,height:i}}function v(e){return"html"===b(e)?e:e.assignedSlot||e.parentNode||(n(e)?e.host:null)||h(e)}function j(e){return["html","body","#document"].indexOf(b(e))>=0?e.ownerDocument.body:s(e)&&f(e)?e:j(v(e))}function w(e,t){var r;void 0===t&&(t=[]);var i=j(e),o=i===(null==(r=e.ownerDocument)?void 0:r.body),s=a(i),n=o?[s].concat(s.visualViewport||[],f(i)?i:[]):i,l=t.concat(n);return o?l:l.concat(w(v(n)))}function k(e){return["table","td","th"].indexOf(b(e))>=0}function _(e){return s(e)&&"fixed"!==m(e).position?e.offsetParent:null}function S(e){for(var t=a(e),r=_(e);r&&k(r)&&"static"===m(r).position;)r=_(r);return r&&("html"===b(r)||"body"===b(r)&&"static"===m(r).position)?t:r||function(e){var t=-1!==navigator.userAgent.toLowerCase().indexOf("firefox");if(-1!==navigator.userAgent.indexOf("Trident")&&s(e)&&"fixed"===m(e).position)return null;var r=v(e);for(n(r)&&(r=r.host);s(r)&&["html","body"].indexOf(b(r))<0;){var i=m(r);if("none"!==i.transform||"none"!==i.perspective||"paint"===i.contain||-1!==["transform","perspective"].indexOf(i.willChange)||t&&"filter"===i.willChange||t&&i.filter&&"none"!==i.filter)return r;r=r.parentNode}return null}(e)||t}var I="top",T="bottom",x="right",L="left",M="auto",A=[I,T,x,L],E="start",N="end",B="viewport",C="popper",U=A.reduce((function(e,t){return e.concat([t+"-"+E,t+"-"+N])}),[]),R=[].concat(A,[M]).reduce((function(e,t){return e.concat([t,t+"-"+E,t+"-"+N])}),[]),F=["beforeRead","read","afterRead","beforeMain","main","afterMain","beforeWrite","write","afterWrite"];function P(e){var t=new Map,r=new Set,i=[];function a(e){r.add(e.name),[].concat(e.requires||[],e.requiresIfExists||[]).forEach((function(e){if(!r.has(e)){var i=t.get(e);i&&a(i)}})),i.push(e)}return e.forEach((function(e){t.set(e.name,e)})),e.forEach((function(e){r.has(e.name)||a(e)})),i}function G(e){var t;return function(){return t||(t=new Promise((function(r){Promise.resolve().then((function(){t=void 0,r(e())}))}))),t}}var D={placement:"bottom",modifiers:[],strategy:"absolute"};function W(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return!t.some((function(e){return!(e&&"function"===typeof e.getBoundingClientRect)}))}function V(e){void 0===e&&(e={});var t=e,r=t.defaultModifiers,i=void 0===r?[]:r,a=t.defaultOptions,s=void 0===a?D:a;return function(e,t,r){void 0===r&&(r=s);var a={placement:"bottom",orderedModifiers:[],options:Object.assign({},D,s),modifiersData:{},elements:{reference:e,popper:t},attributes:{},styles:{}},n=[],l=!1,c={state:a,setOptions:function(r){var l="function"===typeof r?r(a.options):r;p(),a.options=Object.assign({},s,a.options,l),a.scrollParents={reference:o(e)?w(e):e.contextElement?w(e.contextElement):[],popper:w(t)};var d=function(e){var t=P(e);return F.reduce((function(e,r){return e.concat(t.filter((function(e){return e.phase===r})))}),[])}(function(e){var t=e.reduce((function(e,t){var r=e[t.name];return e[t.name]=r?Object.assign({},r,t,{options:Object.assign({},r.options,t.options),data:Object.assign({},r.data,t.data)}):t,e}),{});return Object.keys(t).map((function(e){return t[e]}))}([].concat(i,a.options.modifiers)));return a.orderedModifiers=d.filter((function(e){return e.enabled})),a.orderedModifiers.forEach((function(e){var t=e.name,r=e.options,i=void 0===r?{}:r,o=e.effect;if("function"===typeof o){var s=o({state:a,name:t,instance:c,options:i}),l=function(){};n.push(s||l)}})),c.update()},forceUpdate:function(){if(!l){var e=a.elements,t=e.reference,r=e.popper;if(W(t,r)){a.rects={reference:g(t,S(r),"fixed"===a.options.strategy),popper:O(r)},a.reset=!1,a.placement=a.options.placement,a.orderedModifiers.forEach((function(e){return a.modifiersData[e.name]=Object.assign({},e.data)}));for(var i=0;i<a.orderedModifiers.length;i++)if(!0!==a.reset){var o=a.orderedModifiers[i],s=o.fn,n=o.options,p=void 0===n?{}:n,d=o.name;"function"===typeof s&&(a=s({state:a,options:p,name:d,instance:c})||a)}else a.reset=!1,i=-1}}},update:G((function(){return new Promise((function(e){c.forceUpdate(),e(a)}))})),destroy:function(){p(),l=!0}};if(!W(e,t))return c;function p(){n.forEach((function(e){return e()})),n=[]}return c.setOptions(r).then((function(e){!l&&r.onFirstUpdate&&r.onFirstUpdate(e)})),c}}var q={passive:!0};function J(e){return e.split("-")[0]}function $(e){return e.split("-")[1]}function H(e){return["top","bottom"].indexOf(e)>=0?"x":"y"}function z(e){var t,r=e.reference,i=e.element,a=e.placement,o=a?J(a):null,s=a?$(a):null,n=r.x+r.width/2-i.width/2,l=r.y+r.height/2-i.height/2;switch(o){case I:t={x:n,y:r.y-i.height};break;case T:t={x:n,y:r.y+r.height};break;case x:t={x:r.x+r.width,y:l};break;case L:t={x:r.x-i.width,y:l};break;default:t={x:r.x,y:r.y}}var c=o?H(o):null;if(null!=c){var p="y"===c?"height":"width";switch(s){case E:t[c]=t[c]-(r[p]/2-i[p]/2);break;case N:t[c]=t[c]+(r[p]/2-i[p]/2)}}return t}var K={top:"auto",right:"auto",bottom:"auto",left:"auto"};function Q(e){var t,r=e.popper,i=e.popperRect,o=e.placement,s=e.variation,n=e.offsets,l=e.position,c=e.gpuAcceleration,d=e.adaptive,u=e.roundOffsets,b=e.isFixed,y=n.x,f=void 0===y?0:y,g=n.y,O=void 0===g?0:g,v="function"===typeof u?u({x:f,y:O}):{x:f,y:O};f=v.x,O=v.y;var j=n.hasOwnProperty("x"),w=n.hasOwnProperty("y"),k=L,_=I,M=window;if(d){var A=S(r),E="clientHeight",B="clientWidth";if(A===a(r)&&"static"!==m(A=h(r)).position&&"absolute"===l&&(E="scrollHeight",B="scrollWidth"),A=A,o===I||(o===L||o===x)&&s===N)_=T,O-=(b&&A===M&&M.visualViewport?M.visualViewport.height:A[E])-i.height,O*=c?1:-1;if(o===L||(o===I||o===T)&&s===N)k=x,f-=(b&&A===M&&M.visualViewport?M.visualViewport.width:A[B])-i.width,f*=c?1:-1}var C,U=Object.assign({position:l},d&&K),R=!0===u?function(e){var t=e.x,r=e.y,i=window.devicePixelRatio||1;return{x:p(t*i)/i||0,y:p(r*i)/i||0}}({x:f,y:O}):{x:f,y:O};return f=R.x,O=R.y,c?Object.assign({},U,((C={})[_]=w?"0":"",C[k]=j?"0":"",C.transform=(M.devicePixelRatio||1)<=1?"translate("+f+"px, "+O+"px)":"translate3d("+f+"px, "+O+"px, 0)",C)):Object.assign({},U,((t={})[_]=w?O+"px":"",t[k]=j?f+"px":"",t.transform="",t))}var Y={name:"applyStyles",enabled:!0,phase:"write",fn:function(e){var t=e.state;Object.keys(t.elements).forEach((function(e){var r=t.styles[e]||{},i=t.attributes[e]||{},a=t.elements[e];s(a)&&b(a)&&(Object.assign(a.style,r),Object.keys(i).forEach((function(e){var t=i[e];!1===t?a.removeAttribute(e):a.setAttribute(e,!0===t?"":t)})))}))},effect:function(e){var t=e.state,r={popper:{position:t.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(t.elements.popper.style,r.popper),t.styles=r,t.elements.arrow&&Object.assign(t.elements.arrow.style,r.arrow),function(){Object.keys(t.elements).forEach((function(e){var i=t.elements[e],a=t.attributes[e]||{},o=Object.keys(t.styles.hasOwnProperty(e)?t.styles[e]:r[e]).reduce((function(e,t){return e[t]="",e}),{});s(i)&&b(i)&&(Object.assign(i.style,o),Object.keys(a).forEach((function(e){i.removeAttribute(e)})))}))}},requires:["computeStyles"]};var X={left:"right",right:"left",bottom:"top",top:"bottom"};function Z(e){return e.replace(/left|right|bottom|top/g,(function(e){return X[e]}))}var ee={start:"end",end:"start"};function te(e){return e.replace(/start|end/g,(function(e){return ee[e]}))}function re(e,t){var r=t.getRootNode&&t.getRootNode();if(e.contains(t))return!0;if(r&&n(r)){var i=t;do{if(i&&e.isSameNode(i))return!0;i=i.parentNode||i.host}while(i)}return!1}function ie(e){return Object.assign({},e,{left:e.x,top:e.y,right:e.x+e.width,bottom:e.y+e.height})}function ae(e,t){return t===B?ie(function(e){var t=a(e),r=h(e),i=t.visualViewport,o=r.clientWidth,s=r.clientHeight,n=0,l=0;return i&&(o=i.width,s=i.height,/^((?!chrome|android).)*safari/i.test(navigator.userAgent)||(n=i.offsetLeft,l=i.offsetTop)),{width:o,height:s,x:n+y(e),y:l}}(e)):o(t)?function(e){var t=d(e);return t.top=t.top+e.clientTop,t.left=t.left+e.clientLeft,t.bottom=t.top+e.clientHeight,t.right=t.left+e.clientWidth,t.width=e.clientWidth,t.height=e.clientHeight,t.x=t.left,t.y=t.top,t}(t):ie(function(e){var t,r=h(e),i=u(e),a=null==(t=e.ownerDocument)?void 0:t.body,o=l(r.scrollWidth,r.clientWidth,a?a.scrollWidth:0,a?a.clientWidth:0),s=l(r.scrollHeight,r.clientHeight,a?a.scrollHeight:0,a?a.clientHeight:0),n=-i.scrollLeft+y(e),c=-i.scrollTop;return"rtl"===m(a||r).direction&&(n+=l(r.clientWidth,a?a.clientWidth:0)-o),{width:o,height:s,x:n,y:c}}(h(e)))}function oe(e,t,r){var i="clippingParents"===t?function(e){var t=w(v(e)),r=["absolute","fixed"].indexOf(m(e).position)>=0&&s(e)?S(e):e;return o(r)?t.filter((function(e){return o(e)&&re(e,r)&&"body"!==b(e)})):[]}(e):[].concat(t),a=[].concat(i,[r]),n=a[0],p=a.reduce((function(t,r){var i=ae(e,r);return t.top=l(i.top,t.top),t.right=c(i.right,t.right),t.bottom=c(i.bottom,t.bottom),t.left=l(i.left,t.left),t}),ae(e,n));return p.width=p.right-p.left,p.height=p.bottom-p.top,p.x=p.left,p.y=p.top,p}function se(e){return Object.assign({},{top:0,right:0,bottom:0,left:0},e)}function ne(e,t){return t.reduce((function(t,r){return t[r]=e,t}),{})}function le(e,t){void 0===t&&(t={});var r=t,i=r.placement,a=void 0===i?e.placement:i,s=r.boundary,n=void 0===s?"clippingParents":s,l=r.rootBoundary,c=void 0===l?B:l,p=r.elementContext,u=void 0===p?C:p,b=r.altBoundary,y=void 0!==b&&b,m=r.padding,f=void 0===m?0:m,g=se("number"!==typeof f?f:ne(f,A)),O=u===C?"reference":C,v=e.rects.popper,j=e.elements[y?O:u],w=oe(o(j)?j:j.contextElement||h(e.elements.popper),n,c),k=d(e.elements.reference),_=z({reference:k,element:v,strategy:"absolute",placement:a}),S=ie(Object.assign({},v,_)),L=u===C?S:k,M={top:w.top-L.top+g.top,bottom:L.bottom-w.bottom+g.bottom,left:w.left-L.left+g.left,right:L.right-w.right+g.right},E=e.modifiersData.offset;if(u===C&&E){var N=E[a];Object.keys(M).forEach((function(e){var t=[x,T].indexOf(e)>=0?1:-1,r=[I,T].indexOf(e)>=0?"y":"x";M[e]+=N[r]*t}))}return M}function ce(e,t,r){return l(e,c(t,r))}function pe(e,t,r){return void 0===r&&(r={x:0,y:0}),{top:e.top-t.height-r.y,right:e.right-t.width+r.x,bottom:e.bottom-t.height+r.y,left:e.left-t.width-r.x}}function de(e){return[I,x,T,L].some((function(t){return e[t]>=0}))}var ue=V({defaultModifiers:[{name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:function(e){var t=e.state,r=e.instance,i=e.options,o=i.scroll,s=void 0===o||o,n=i.resize,l=void 0===n||n,c=a(t.elements.popper),p=[].concat(t.scrollParents.reference,t.scrollParents.popper);return s&&p.forEach((function(e){e.addEventListener("scroll",r.update,q)})),l&&c.addEventListener("resize",r.update,q),function(){s&&p.forEach((function(e){e.removeEventListener("scroll",r.update,q)})),l&&c.removeEventListener("resize",r.update,q)}},data:{}},{name:"popperOffsets",enabled:!0,phase:"read",fn:function(e){var t=e.state,r=e.name;t.modifiersData[r]=z({reference:t.rects.reference,element:t.rects.popper,strategy:"absolute",placement:t.placement})},data:{}},{name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:function(e){var t=e.state,r=e.options,i=r.gpuAcceleration,a=void 0===i||i,o=r.adaptive,s=void 0===o||o,n=r.roundOffsets,l=void 0===n||n,c={placement:J(t.placement),variation:$(t.placement),popper:t.elements.popper,popperRect:t.rects.popper,gpuAcceleration:a,isFixed:"fixed"===t.options.strategy};null!=t.modifiersData.popperOffsets&&(t.styles.popper=Object.assign({},t.styles.popper,Q(Object.assign({},c,{offsets:t.modifiersData.popperOffsets,position:t.options.strategy,adaptive:s,roundOffsets:l})))),null!=t.modifiersData.arrow&&(t.styles.arrow=Object.assign({},t.styles.arrow,Q(Object.assign({},c,{offsets:t.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:l})))),t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-placement":t.placement})},data:{}},Y,{name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:function(e){var t=e.state,r=e.options,i=e.name,a=r.offset,o=void 0===a?[0,0]:a,s=R.reduce((function(e,r){return e[r]=function(e,t,r){var i=J(e),a=[L,I].indexOf(i)>=0?-1:1,o="function"===typeof r?r(Object.assign({},t,{placement:e})):r,s=o[0],n=o[1];return s=s||0,n=(n||0)*a,[L,x].indexOf(i)>=0?{x:n,y:s}:{x:s,y:n}}(r,t.rects,o),e}),{}),n=s[t.placement],l=n.x,c=n.y;null!=t.modifiersData.popperOffsets&&(t.modifiersData.popperOffsets.x+=l,t.modifiersData.popperOffsets.y+=c),t.modifiersData[i]=s}},{name:"flip",enabled:!0,phase:"main",fn:function(e){var t=e.state,r=e.options,i=e.name;if(!t.modifiersData[i]._skip){for(var a=r.mainAxis,o=void 0===a||a,s=r.altAxis,n=void 0===s||s,l=r.fallbackPlacements,c=r.padding,p=r.boundary,d=r.rootBoundary,u=r.altBoundary,b=r.flipVariations,h=void 0===b||b,y=r.allowedAutoPlacements,m=t.options.placement,f=J(m),g=l||(f===m||!h?[Z(m)]:function(e){if(J(e)===M)return[];var t=Z(e);return[te(e),t,te(t)]}(m)),O=[m].concat(g).reduce((function(e,r){return e.concat(J(r)===M?function(e,t){void 0===t&&(t={});var r=t,i=r.placement,a=r.boundary,o=r.rootBoundary,s=r.padding,n=r.flipVariations,l=r.allowedAutoPlacements,c=void 0===l?R:l,p=$(i),d=p?n?U:U.filter((function(e){return $(e)===p})):A,u=d.filter((function(e){return c.indexOf(e)>=0}));0===u.length&&(u=d);var b=u.reduce((function(t,r){return t[r]=le(e,{placement:r,boundary:a,rootBoundary:o,padding:s})[J(r)],t}),{});return Object.keys(b).sort((function(e,t){return b[e]-b[t]}))}(t,{placement:r,boundary:p,rootBoundary:d,padding:c,flipVariations:h,allowedAutoPlacements:y}):r)}),[]),v=t.rects.reference,j=t.rects.popper,w=new Map,k=!0,_=O[0],S=0;S<O.length;S++){var N=O[S],B=J(N),C=$(N)===E,F=[I,T].indexOf(B)>=0,P=F?"width":"height",G=le(t,{placement:N,boundary:p,rootBoundary:d,altBoundary:u,padding:c}),D=F?C?x:L:C?T:I;v[P]>j[P]&&(D=Z(D));var W=Z(D),V=[];if(o&&V.push(G[B]<=0),n&&V.push(G[D]<=0,G[W]<=0),V.every((function(e){return e}))){_=N,k=!1;break}w.set(N,V)}if(k)for(var q=function(e){var t=O.find((function(t){var r=w.get(t);if(r)return r.slice(0,e).every((function(e){return e}))}));if(t)return _=t,"break"},H=h?3:1;H>0;H--){if("break"===q(H))break}t.placement!==_&&(t.modifiersData[i]._skip=!0,t.placement=_,t.reset=!0)}},requiresIfExists:["offset"],data:{_skip:!1}},{name:"preventOverflow",enabled:!0,phase:"main",fn:function(e){var t=e.state,r=e.options,i=e.name,a=r.mainAxis,o=void 0===a||a,s=r.altAxis,n=void 0!==s&&s,p=r.boundary,d=r.rootBoundary,u=r.altBoundary,b=r.padding,h=r.tether,y=void 0===h||h,m=r.tetherOffset,f=void 0===m?0:m,g=le(t,{boundary:p,rootBoundary:d,padding:b,altBoundary:u}),v=J(t.placement),j=$(t.placement),w=!j,k=H(v),_="x"===k?"y":"x",M=t.modifiersData.popperOffsets,A=t.rects.reference,N=t.rects.popper,B="function"===typeof f?f(Object.assign({},t.rects,{placement:t.placement})):f,C="number"===typeof B?{mainAxis:B,altAxis:B}:Object.assign({mainAxis:0,altAxis:0},B),U=t.modifiersData.offset?t.modifiersData.offset[t.placement]:null,R={x:0,y:0};if(M){if(o){var F,P="y"===k?I:L,G="y"===k?T:x,D="y"===k?"height":"width",W=M[k],V=W+g[P],q=W-g[G],z=y?-N[D]/2:0,K=j===E?A[D]:N[D],Q=j===E?-N[D]:-A[D],Y=t.elements.arrow,X=y&&Y?O(Y):{width:0,height:0},Z=t.modifiersData["arrow#persistent"]?t.modifiersData["arrow#persistent"].padding:{top:0,right:0,bottom:0,left:0},ee=Z[P],te=Z[G],re=ce(0,A[D],X[D]),ie=w?A[D]/2-z-re-ee-C.mainAxis:K-re-ee-C.mainAxis,ae=w?-A[D]/2+z+re+te+C.mainAxis:Q+re+te+C.mainAxis,oe=t.elements.arrow&&S(t.elements.arrow),se=oe?"y"===k?oe.clientTop||0:oe.clientLeft||0:0,ne=null!=(F=null==U?void 0:U[k])?F:0,pe=W+ae-ne,de=ce(y?c(V,W+ie-ne-se):V,W,y?l(q,pe):q);M[k]=de,R[k]=de-W}if(n){var ue,be="x"===k?I:L,he="x"===k?T:x,ye=M[_],me="y"===_?"height":"width",fe=ye+g[be],ge=ye-g[he],Oe=-1!==[I,L].indexOf(v),ve=null!=(ue=null==U?void 0:U[_])?ue:0,je=Oe?fe:ye-A[me]-N[me]-ve+C.altAxis,we=Oe?ye+A[me]+N[me]-ve-C.altAxis:ge,ke=y&&Oe?function(e,t,r){var i=ce(e,t,r);return i>r?r:i}(je,ye,we):ce(y?je:fe,ye,y?we:ge);M[_]=ke,R[_]=ke-ye}t.modifiersData[i]=R}},requiresIfExists:["offset"]},{name:"arrow",enabled:!0,phase:"main",fn:function(e){var t,r=e.state,i=e.name,a=e.options,o=r.elements.arrow,s=r.modifiersData.popperOffsets,n=J(r.placement),l=H(n),c=[L,x].indexOf(n)>=0?"height":"width";if(o&&s){var p=function(e,t){return se("number"!==typeof(e="function"===typeof e?e(Object.assign({},t.rects,{placement:t.placement})):e)?e:ne(e,A))}(a.padding,r),d=O(o),u="y"===l?I:L,b="y"===l?T:x,h=r.rects.reference[c]+r.rects.reference[l]-s[l]-r.rects.popper[c],y=s[l]-r.rects.reference[l],m=S(o),f=m?"y"===l?m.clientHeight||0:m.clientWidth||0:0,g=h/2-y/2,v=p[u],j=f-d[c]-p[b],w=f/2-d[c]/2+g,k=ce(v,w,j),_=l;r.modifiersData[i]=((t={})[_]=k,t.centerOffset=k-w,t)}},effect:function(e){var t=e.state,r=e.options.element,i=void 0===r?"[data-popper-arrow]":r;null!=i&&("string"!==typeof i||(i=t.elements.popper.querySelector(i)))&&re(t.elements.popper,i)&&(t.elements.arrow=i)},requires:["popperOffsets"],requiresIfExists:["preventOverflow"]},{name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:function(e){var t=e.state,r=e.name,i=t.rects.reference,a=t.rects.popper,o=t.modifiersData.preventOverflow,s=le(t,{elementContext:"reference"}),n=le(t,{altBoundary:!0}),l=pe(s,i),c=pe(n,a,o),p=de(l),d=de(c);t.modifiersData[r]={referenceClippingOffsets:l,popperEscapeOffsets:c,isReferenceHidden:p,hasPopperEscaped:d},t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-reference-hidden":p,"data-popper-escaped":d})}}]}),be=r(570),he=r(85),ye=r(136),me=r(81),fe=(r(84),r(82),r(83),r(80)),ge=r(165),Oe=r(112),ve=(r(87),r(133));const je=["bottom","bottom-start","bottom-end","left","left-start","left-end","right","right-start","right-end","top","top-start","top-end"],we="esri-popover",ke="esri-popover--open",_e={position:"fixed","z-index":"1000"};let Se=class extends ge.a{constructor(e,t){super(e,t),this._popper=null,this._contentNode=null,this._renderAttached=!1,this._rootNode=null,this.anchorElement=null,this.offset=[0,0],this.open=!1,this.renderContentFunction=null,this._afterRootCreate=e=>{this._rootNode=e},this._afterContentCreate=e=>{this._contentNode=e},this._updatePosition=()=>{Object(he.k)(this._popper)&&this._popper.update()}}initialize(){this.when((()=>{this.destroyed||(this._projector.append(document.body,this.render),this._renderAttached=!0)})),this.own(Object(ye.a)(this,["open","anchorElement"],(()=>this._buildPopper())),Object(ye.a)(this,["placement","offset"],(()=>this._setPopperOptions())))}destroy(){this.owner=null,this.anchorElement=null,this.renderContentFunction=null,this._renderAttached&&(this._projector.detach(this.render),this._renderAttached=!1),Object(he.k)(this._rootNode)&&(Object(be.d)(this._rootNode),this._rootNode=null),this._contentNode=null,Object(he.k)(this._popper)&&(this._popper.destroy(),this._popper=null)}set container(e){}set owner(e){this._set("owner",e)}get placement(){return"top"}set placement(e){-1!==je.indexOf(e)?this._override("placement",e):this._clearOverride("placement")}render(){var e;const{open:t,owner:r,renderContentFunction:i}=this;return Object(ve.a)("div",{afterCreate:this._afterRootCreate,class:this.classes(we,t?ke:null),styles:_e},Object(ve.a)("div",{dir:Object(Oe.d)(null==(e=this.owner)?void 0:e.container),afterCreate:this._afterContentCreate,afterUpdate:this._updatePosition},t&&(null==i?void 0:i.call(r))))}_buildPopper(){Object(he.k)(this._popper)&&(this._popper.destroy(),this._popper=null);const e=this._contentNode;if(Object(he.j)(e))return;if(!this.open||!this.renderContentFunction)return;const t=this._getAnchor();t&&(this._popper=ue(t,e),this._setPopperOptions())}_setPopperOptions(){const{placement:e,offset:t,_popper:r}=this;Object(he.j)(r)||(r.setOptions({placement:e,modifiers:[{name:"offset",options:{offset:t}}]}),r.forceUpdate())}_getAnchor(){const{anchorElement:e}=this;return Object(be.a)("function"==typeof e?e():e)}};Object(i.a)([Object(me.b)()],Se.prototype,"anchorElement",void 0),Object(i.a)([Object(me.b)()],Se.prototype,"container",null),Object(i.a)([Object(me.b)()],Se.prototype,"offset",void 0),Object(i.a)([Object(me.b)()],Se.prototype,"open",void 0),Object(i.a)([Object(me.b)()],Se.prototype,"owner",null),Object(i.a)([Object(me.b)()],Se.prototype,"placement",null),Object(i.a)([Object(me.b)()],Se.prototype,"renderContentFunction",void 0),Se=Object(i.a)([Object(fe.a)("esri.widgets.support.Popover")],Se);const Ie=Se},908:function(e,t,r){"use strict";r.d(t,"a",(function(){return U}));var i=r(79),a=r(263),o=r(134),s=r(85),n=r(136),l=r(146),c=(r(84),r(82),r(83),r(81)),p=r(80),d=r(165),u=r(100),b=r(104),h=r(815);let y=class extends u.a{constructor(e){super(e),this.items=null,this.open=!1}castItems(e){return e?e.map((e=>e instanceof h.a?e:new h.a(e))):null}};Object(i.a)([Object(c.b)()],y.prototype,"items",void 0),Object(i.a)([Object(b.a)("items")],y.prototype,"castItems",null),Object(i.a)([Object(c.b)()],y.prototype,"open",void 0),y=Object(i.a)([Object(p.a)("esri.widgets.FeatureTable.Grid.support.ButtonMenuViewModel")],y);const m=y;var f=r(906),g=r(112),O=(r(87),r(133));const v="esri-button-menu",j="esri-button-menu__content",w="esri-button-menu__item-wrapper",k="esri-button-menu__icon",_="esri-button-menu__item",S="esri-button-menu__item-label",I="esri-button-menu__item-label-content",T="esri-button-menu__item--selectable",x="esri-button-menu__item--selected",L="esri-button-menu__checkbox",M="esri-button-menu__embedded-content-wrapper",A="esri-button-menu__button",E="esri-button-menu__button--selected",N="esri-icon-menu",B="esri-widget";let C=class extends(Object(o.b)(d.a)){constructor(e,t){super(e,t),this._menuContentNode=null,this._popover=null,this._rootNode=null,this.iconClass=null,this.items=null,this.label=null,this.open=null,this.viewModel=new m,this._handleOutsideClick=this._handleOutsideClick.bind(this)}postInitialize(){this._popover=new f.a({owner:this,open:!!this.open,placement:Object(g.f)(this.container)?"bottom-start":"bottom-end",renderContentFunction:this.renderMenuContent,anchorElement:this._rootNode}),this.handles.add([Object(n.d)(this,"open",(e=>this._popover.set("open",e)))]),document.addEventListener("click",this._handleOutsideClick)}destroy(){var e;null==(e=this._popover)||e.destroy(),this._popover=null,document.removeEventListener("click",this._handleOutsideClick)}_handleOutsideClick(e){var t,r;if(!this.open||!this._rootNode||!this._menuContentNode)return;const i=e.target;null!=(t=this._menuContentNode)&&t.contains(i)||null!=(r=this._rootNode)&&r.contains(i)||(this.open=!1)}render(){return Object(O.a)("div",{afterCreate:this._afterRootNodeCreate,bind:this,"data-node-ref":"_rootNode",class:this.classes(v,B),key:"menu"},this.renderMenuButton())}renderMenuButton(){const{iconClass:e,id:t,label:r,open:i}=this,a=this.classes([A,e||N,i?E:null]);return Object(O.a)("button",{"aria-pressed":i.toString(),"aria-controls":`${t}-menu`,"aria-expanded":i.toString(),"aria-haspopup":"true","aria-label":r,bind:this,class:a,id:`${t}-button`,title:r,selected:i,onclick:this._toggleOpen,tabindex:"0",type:"button"})}renderMenuContent(){var e;const{id:t,open:r}=this;return Object(O.a)("div",{afterCreate:this._afterMenuContentNodeCreate,bind:this,class:j,"data-node-ref":"_menuContentNode",key:"esri-button-menu-content",hidden:!r},Object(O.a)("ul",{"aria-labelledby":`${t}-button`,bind:this,class:w,id:`${t}-menu`,role:"menu"},(null==(e=this.items)?void 0:e.length)&&this.renderItems()))}renderItems(){var e;return null==(e=this.items)?void 0:e.map(((e,t)=>this.renderItem(e,t)))}renderItem(e,t,r){var i;const a=Object(s.k)(r)?`${this.id}-menu-item-${t}-${r}`:`${this.id}-menu-item-${t}`,o=`${a}-label`,n=this.classes(_,e.selectionEnabled?T:null,e.selectionEnabled&&e.selected?x:null);return Object(O.a)("li",{afterCreate:this._afterMenuItemCreate,bind:this,class:n,"data-item-index":t,"data-item-subIndex":r,for:a,key:a,onkeydown:t=>this._handleMenuItemKeydown(t,e),onclick:t=>this._handleMenuItemInteraction(t,e),role:"menuitem",tabindex:"0"},Object(O.a)("input",{disabled:!0,checked:e.selected,class:L,id:a,name:a,tabindex:"-1",type:"checkbox"}),Object(O.a)("label",{bind:this,class:this.classes(A,S),for:a,id:o},Object(O.a)("span",{class:this.classes(k,e.iconClass),"aria-hidden":"true"}),Object(O.a)("span",{class:I},e.label)),Object(O.a)("ul",{"aria-labelledby":o,class:M,id:`${this.id}-submenu`,role:"menu"},null==e||null==(i=e.items)?void 0:i.map(((e,r)=>this.renderItem(e,t,r)))))}_afterRootNodeCreate(e){var t;this._rootNode=e,null==(t=this._popover)||t.set("anchorElement",(()=>e))}_handleMenuItemInteraction(e,t){t.selected=!t.selected,t.open=!(!t.selected||!t.items),t.autoCloseMenu&&this.set("open",!1),t.clickFunction&&t.clickFunction({event:e,item:t}),e.stopPropagation()}_handleMenuItemKeydown(e,t){const r=Object(a.a)(e);Object(g.e)(r)&&this._handleMenuItemInteraction(e,t),"Escape"===r&&(this.open=!1,e.preventDefault(),e.stopPropagation())}_afterMenuContentNodeCreate(e){this._menuContentNode=e,e.focus()}_toggleOpen(){this.open=!this.open}_afterMenuItemCreate(e){0===e["data-item-index"]&&e.focus()}};Object(i.a)([Object(c.b)()],C.prototype,"iconClass",void 0),Object(i.a)([Object(l.a)("viewModel.items")],C.prototype,"items",void 0),Object(i.a)([Object(c.b)()],C.prototype,"label",void 0),Object(i.a)([Object(l.a)("viewModel.open")],C.prototype,"open",void 0),Object(i.a)([Object(c.b)()],C.prototype,"viewModel",void 0),C=Object(i.a)([Object(p.a)("esri.widgets.FeatureTable.Grid.support.ButtonMenu")],C);const U=C},916:function(e,t,r){"use strict";r.d(t,"a",(function(){return d}));var i,a=r(79),o=r(105),s=r(86),n=r(89),l=r(81),c=(r(83),r(80));let p=i=class extends s.a{constructor(e){super(e),this.color=new o.a([0,0,0,1])}clone(){return new i(Object(n.a)({color:this.color}))}};Object(a.a)([Object(l.b)({type:o.a,json:{write:!0}})],p.prototype,"color",void 0),p=i=Object(a.a)([Object(c.a)("esri.webmap.background.ColorBackground")],p);const d=p},95:function(e,t,r){"use strict";r.d(t,"a",(function(){return o}));var i=r(90),a=r(81);function o(e,t={}){var r;const o=e instanceof i.a?e:new i.a(e,t),s={type:null==(r=null==t?void 0:t.ignoreUnknown)||r?o.apiValues:String,json:{type:o.jsonValues,read:(null==t||!t.readOnly)&&{reader:o.read},write:{writer:o.write}}};return void 0!==(null==t?void 0:t.readOnly)&&(s.readOnly=!!t.readOnly),void 0!==(null==t?void 0:t.default)&&(s.json.default=t.default),void 0!==(null==t?void 0:t.name)&&(s.json.name=t.name),Object(a.b)(s)}},970:function(e,t,r){"use strict";r.d(t,"a",(function(){return l}));var i,a=r(79),o=r(86),s=r(81),n=(r(84),r(82),r(83),r(80));let l=i=class extends o.a{constructor(){super(...arguments),this.url=""}destroy(){this.url=""}clone(){return new i({url:this.url})}};Object(a.a)([Object(s.b)({type:String,json:{write:{isRequired:!0}}})],l.prototype,"url",void 0),l=i=Object(a.a)([Object(n.a)("esri.webdoc.support.SlideThumbnail")],l)}}]);
//# sourceMappingURL=110.8205155d.chunk.js.map