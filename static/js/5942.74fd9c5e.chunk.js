"use strict";(globalThis.webpackChunkimaps=globalThis.webpackChunkimaps||[]).push([[5942,9479,6983],{29479:(e,t,i)=>{i.r(t),i.d(t,{default:()=>I});var s,r=i(27366),n=i(40281),a=i(60354),o=i(44927),l=i(46784),c=i(84652),h=i(54472),p=i(93002),d=i(32718),u=i(92026),g=i(66978),m=i(35995),y=i(49861),f=(i(25243),i(69912)),v=i(31201),_=i(78952),w=i(70032),b=i(98995),C=i(68954),x=i(41190);let T=0;const M=d.Z.getLogger("esri.Basemap");let S=s=class extends((0,l.eC)(h.Z)){constructor(e){super(e),this.id=null,this.portalItem=null,this.spatialReference=null,this.thumbnailUrl=null,this.title="Basemap",this.id=Date.now().toString(16)+"-basemap-"+T++,this.baseLayers=new n.Z,this.referenceLayers=new n.Z;const t=e=>{e.parent&&e.parent!==this&&"remove"in e.parent&&e.parent.remove(e),e.parent=this,"elevation"===e.type&&M.error(`Layer '${e.title}, id:${e.id}' of type '${e.type}' is not supported as a basemap layer and will therefore be ignored.`)},i=e=>{e.parent=null};this.baseLayers.on("after-add",(e=>t(e.item))),this.referenceLayers.on("after-add",(e=>t(e.item))),this.baseLayers.on("after-remove",(e=>i(e.item))),this.referenceLayers.on("after-remove",(e=>i(e.item)))}initialize(){this.when().catch((e=>{M.error("#load()",`Failed to load basemap (title: '${this.title}', id: '${this.id}')`,e)})),this.resourceInfo&&this.read(this.resourceInfo.data,this.resourceInfo.context)}destroy(){const e=this.baseLayers.removeAll();for(const i of e)i.destroy();const t=this.referenceLayers.removeAll();for(const i of t)i.destroy();this.baseLayers.destroy(),this.referenceLayers.destroy(),this.portalItem?.destroy(),this.portalItem=null}normalizeCtorArgs(e){return e&&"resourceInfo"in e&&(this._set("resourceInfo",e.resourceInfo),delete(e={...e}).resourceInfo),e}set baseLayers(e){this._set("baseLayers",(0,a.Z)(e,this._get("baseLayers")))}_writeBaseLayers(e,t,i){const s=[];e?(i={...i,layerContainerType:"basemap"},this.baseLayers.forEach((e=>{const t=(0,x.Nw)(e,i.webmap?i.webmap.getLayerJSONFromResourceInfo(e):null,i);(0,u.pC)(t)&&s.push(t)})),this.referenceLayers.forEach((e=>{const t=(0,x.Nw)(e,i.webmap?i.webmap.getLayerJSONFromResourceInfo(e):null,i);(0,u.pC)(t)&&(t.isReference=!0,s.push(t))})),t.baseMapLayers=s):t.baseMapLayers=s}set referenceLayers(e){this._set("referenceLayers",(0,a.Z)(e,this._get("referenceLayers")))}writeTitle(e,t){t.title=e||"Basemap"}load(e){return this.addResolvingPromise(this._loadFromSource(e)),Promise.resolve(this)}loadAll(){return(0,p.G)(this,(e=>{e(this.baseLayers,this.referenceLayers)}))}clone(){const e={id:this.id,title:this.title,portalItem:this.portalItem,baseLayers:this.baseLayers.slice(),referenceLayers:this.referenceLayers.slice()};return this.loaded&&(e.loadStatus="loaded"),new s({resourceInfo:this.resourceInfo}).set(e)}read(e,t){this.resourceInfo||this._set("resourceInfo",{data:e,context:t}),super.read(e,t)}write(e,t){return e=e||{},t&&t.origin||(t={origin:"web-map",...t}),super.write(e,t),!this.loaded&&this.resourceInfo&&this.resourceInfo.data.baseMapLayers&&(e.baseMapLayers=this.resourceInfo.data.baseMapLayers.map((e=>{const t=(0,c.d9)(e);return t.url&&(0,m.oC)(t.url)&&(t.url=`https:${t.url}`),t.templateUrl&&(0,m.oC)(t.templateUrl)&&(t.templateUrl=`https:${t.templateUrl}`),t}))),e}async _loadFromSource(e){const{resourceInfo:t,portalItem:i}=this;(0,g.k_)(e);const s=[];if(t){const i=t.context?t.context.url:null;if(s.push(this._loadLayersFromJSON(t.data,i,e)),t.data.id&&!t.data.title){const e=t.data.id;s.push((0,C.g)(e).then((e=>{e&&this.read({title:e},t.context)})))}}else i&&s.push(this._loadFromItem(i,e));await Promise.all(s)}async _loadLayersFromJSON(e,t,s){const r=this.resourceInfo&&this.resourceInfo.context,n=this.portalItem&&this.portalItem.portal||r&&r.portal||null,a=r&&"web-scene"===r.origin?"web-scene":"web-map",{populateOperationalLayers:o}=await Promise.all([i.e(4226),i.e(9803),i.e(1245)]).then(i.bind(i,20519)),l=[];if((0,g.k_)(s),e.baseMapLayers&&Array.isArray(e.baseMapLayers)){const i={context:{origin:a,url:t,portal:n,layerContainerType:"basemap"},defaultLayerType:"DefaultTileLayer"},s=o(this.baseLayers,e.baseMapLayers.filter((e=>!e.isReference)),i);l.push(s);const r=o(this.referenceLayers,e.baseMapLayers.filter((e=>e.isReference)),i);l.push(r)}await(0,g.as)(l)}async _loadFromItem(e,t){const i=await e.load(t),s=await i.fetchData("json",t),r=(0,m.mN)(e.itemUrl);return this._set("resourceInfo",{data:s.baseMap,context:{origin:"web-map",portal:e.portal||w.Z.getDefault(),url:r}}),this.read(this.resourceInfo.data,this.resourceInfo.context),this.read({spatialReference:s.spatialReference},this.resourceInfo.context),this.read({title:e.title,thumbnailUrl:e.thumbnailUrl},{origin:"portal-item",portal:e.portal||w.Z.getDefault(),url:r}),this._loadLayersFromJSON(this.resourceInfo.data,r,t)}static fromId(e){const t=C.s[e];if(t){if(t.deprecated){let t=null;"dark-gray"===e?t="dark-gray-vector":"gray"===e?t="gray-vector":"streets"===e?t="streets-vector":"topo"===e&&(t="topo-vector"),(0,o.x9)(M,`The ${e} basemap has entered mature support and is no longer being updated.`,{replacement:t,see:"https://arcg.is/1iq8aD",warnOnce:!0})}return s.fromJSON(t)}return null}};(0,r._)([(0,y.Cb)({json:{write:{ignoreOrigin:!0,target:"baseMapLayers",writer(e,t,i,s){this._writeBaseLayers(e,t,s)}},origins:{"web-scene":{write:{ignoreOrigin:!0,target:{baseMapLayers:{type:n.Z}},writer(e,t,i,s){this._writeBaseLayers(e,t,s)}}}}}})],S.prototype,"baseLayers",null),(0,r._)([(0,y.Cb)({type:String,json:{origins:{"web-scene":{write:!0}}}})],S.prototype,"id",void 0),(0,r._)([(0,y.Cb)({type:b.default})],S.prototype,"portalItem",void 0),(0,r._)([(0,y.Cb)()],S.prototype,"referenceLayers",null),(0,r._)([(0,y.Cb)({readOnly:!0})],S.prototype,"resourceInfo",void 0),(0,r._)([(0,y.Cb)({type:_.Z})],S.prototype,"spatialReference",void 0),(0,r._)([(0,y.Cb)()],S.prototype,"thumbnailUrl",void 0),(0,r._)([(0,y.Cb)({type:String,json:{origins:{"web-scene":{write:{isRequired:!0}}}}})],S.prototype,"title",void 0),(0,r._)([(0,v.c)("title")],S.prototype,"writeTitle",null),S=s=(0,r._)([(0,f.j)("esri.Basemap")],S);const I=S},52639:(e,t,i)=>{i.d(t,{Z:()=>y});var s=i(27366),r=i(59486),n=i(44055),a=i(51508),o=i(11582),l=i(46784),c=i(92026),h=i(95439),p=i(49861),d=(i(63780),i(93169),i(25243),i(69912)),u=i(77981);function g(e){if(!(0,c.pC)(e))return null;const t={};for(const i in e){const s=e[i];s&&(t[i]=s.toJSON())}return 0!==Object.keys(t).length?t:null}let m=class extends((0,o.J)(l.wq)){constructor(){super(...arguments),this.isAggregate=!1,this.layer=null,this.popupTemplate=null,this.sourceLayer=null,Object.defineProperty(this,"uid",{value:(0,h.D)(),configurable:!0})}normalizeCtorArgs(e,t,i,s){return e&&!e.declaredClass?e:{geometry:e,symbol:t,attributes:i,popupTemplate:s}}set aggregateGeometries(e){const t=this._get("aggregateGeometries");JSON.stringify(t)!==JSON.stringify(e)&&this._set("aggregateGeometries",e)}set attributes(e){const t=this._get("attributes");t!==e&&(this._set("attributes",e),this._notifyLayer("attributes",t,e))}set geometry(e){const t=this._get("geometry");t!==e&&(this._set("geometry",e),this._notifyLayer("geometry",t,e))}set symbol(e){const t=this._get("symbol");t!==e&&(this._set("symbol",e),this._notifyLayer("symbol",t,e))}set visible(e){const t=this._get("visible");t!==e&&(this._set("visible",e),this._notifyLayer("visible",t,e))}getEffectivePopupTemplate(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.popupTemplate)return this.popupTemplate;for(const t of[this.sourceLayer,this.layer])if(t){if("popupTemplate"in t&&t.popupTemplate)return t.popupTemplate;if(e&&"defaultPopupTemplate"in t&&(0,c.pC)(t.defaultPopupTemplate))return t.defaultPopupTemplate}return null}getAttribute(e){return this.attributes&&this.attributes[e]}setAttribute(e,t){if(this.attributes){const i=this.getAttribute(e);this.attributes[e]=t,this._notifyLayer("attributes",i,t,e)}else this.attributes={[e]:t},this._notifyLayer("attributes",void 0,t,e)}getObjectId(){return this.sourceLayer&&"objectIdField"in this.sourceLayer&&this.sourceLayer.objectIdField?this.getAttribute(this.sourceLayer.objectIdField):null}toJSON(){return{aggregateGeometries:g(this.aggregateGeometries),geometry:(0,c.pC)(this.geometry)?this.geometry.toJSON():null,symbol:(0,c.pC)(this.symbol)?this.symbol.toJSON():null,attributes:{...this.attributes},popupTemplate:this.popupTemplate&&this.popupTemplate.toJSON()}}notifyGeometryChanged(){this._notifyLayer("geometry",this.geometry,this.geometry)}notifyMeshTransformChanged(){(0,c.pC)(this.geometry)&&"mesh"===this.geometry.type&&this._notifyLayer("transform",this.geometry.transform,this.geometry.transform)}_notifyLayer(e,t,i,s){if(!this.layer||!("graphicChanged"in this.layer))return;const r={graphic:this,property:e,oldValue:t,newValue:i};"attributes"===e&&(r.attributeName=s),this.layer.graphicChanged(r)}};(0,s._)([(0,p.Cb)({value:null,json:{read:function(e){if(!e)return null;const t={};for(const i in e){const s=(0,u.im)(e[i]);s&&(t[i]=s)}return 0!==Object.keys(t).length?t:null}}})],m.prototype,"aggregateGeometries",null),(0,s._)([(0,p.Cb)({value:null})],m.prototype,"attributes",null),(0,s._)([(0,p.Cb)({value:null,types:r.qM,json:{read:u.im}})],m.prototype,"geometry",null),(0,s._)([(0,p.Cb)({type:Boolean})],m.prototype,"isAggregate",void 0),(0,s._)([(0,p.Cb)({clonable:"reference"})],m.prototype,"layer",void 0),(0,s._)([(0,p.Cb)({type:n.Z})],m.prototype,"popupTemplate",void 0),(0,s._)([(0,p.Cb)({clonable:"reference"})],m.prototype,"sourceLayer",void 0),(0,s._)([(0,p.Cb)({value:null,types:a.LB})],m.prototype,"symbol",null),(0,s._)([(0,p.Cb)({type:Boolean,value:!0})],m.prototype,"visible",null),m=(0,s._)([(0,d.j)("esri.Graphic")],m),function(e){e.generateUID=h.D}(m||(m={}));const y=m},89494:(e,t,i)=>{function s(){return[1,0,0,1,0,0]}function r(e){return[e[0],e[1],e[2],e[3],e[4],e[5]]}i.d(t,{a:()=>r,c:()=>s});Object.freeze(Object.defineProperty({__proto__:null,create:s,clone:r,fromValues:function(e,t,i,s,r,n){return[e,t,i,s,r,n]},createView:function(e,t){return new Float64Array(e,t,6)}},Symbol.toStringTag,{value:"Module"}))},22753:(e,t,i)=>{i.d(t,{a:()=>y,b:()=>a,c:()=>h,d:()=>d,e:()=>l,f:()=>r,h:()=>g,i:()=>v,j:()=>u,m:()=>c,n:()=>m,r:()=>p,s:()=>n,t:()=>o});var s=i(26277);function r(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[4],e[4]=t[5],e[5]=t[6],e[6]=t[8],e[7]=t[9],e[8]=t[10],e}function n(e,t,i,s,r,n,a,o,l,c){return e[0]=t,e[1]=i,e[2]=s,e[3]=r,e[4]=n,e[5]=a,e[6]=o,e[7]=l,e[8]=c,e}function a(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e}function o(e,t){if(e===t){const i=t[1],s=t[2],r=t[5];e[1]=t[3],e[2]=t[6],e[3]=i,e[5]=t[7],e[6]=s,e[7]=r}else e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8];return e}function l(e,t){const i=t[0],s=t[1],r=t[2],n=t[3],a=t[4],o=t[5],l=t[6],c=t[7],h=t[8],p=h*a-o*c,d=-h*n+o*l,u=c*n-a*l;let g=i*p+s*d+r*u;return g?(g=1/g,e[0]=p*g,e[1]=(-h*s+r*c)*g,e[2]=(o*s-r*a)*g,e[3]=d*g,e[4]=(h*i-r*l)*g,e[5]=(-o*i+r*n)*g,e[6]=u*g,e[7]=(-c*i+s*l)*g,e[8]=(a*i-s*n)*g,e):null}function c(e,t,i){const s=t[0],r=t[1],n=t[2],a=t[3],o=t[4],l=t[5],c=t[6],h=t[7],p=t[8],d=i[0],u=i[1],g=i[2],m=i[3],y=i[4],f=i[5],v=i[6],_=i[7],w=i[8];return e[0]=d*s+u*a+g*c,e[1]=d*r+u*o+g*h,e[2]=d*n+u*l+g*p,e[3]=m*s+y*a+f*c,e[4]=m*r+y*o+f*h,e[5]=m*n+y*l+f*p,e[6]=v*s+_*a+w*c,e[7]=v*r+_*o+w*h,e[8]=v*n+_*l+w*p,e}function h(e,t,i){const s=t[0],r=t[1],n=t[2],a=t[3],o=t[4],l=t[5],c=t[6],h=t[7],p=t[8],d=i[0],u=i[1];return e[0]=s,e[1]=r,e[2]=n,e[3]=a,e[4]=o,e[5]=l,e[6]=d*s+u*a+c,e[7]=d*r+u*o+h,e[8]=d*n+u*l+p,e}function p(e,t,i){const s=t[0],r=t[1],n=t[2],a=t[3],o=t[4],l=t[5],c=t[6],h=t[7],p=t[8],d=Math.sin(i),u=Math.cos(i);return e[0]=u*s+d*a,e[1]=u*r+d*o,e[2]=u*n+d*l,e[3]=u*a-d*s,e[4]=u*o-d*r,e[5]=u*l-d*n,e[6]=c,e[7]=h,e[8]=p,e}function d(e,t,i){const s=i[0],r=i[1],n=i[2];return e[0]=s*t[0],e[1]=s*t[1],e[2]=s*t[2],e[3]=r*t[3],e[4]=r*t[4],e[5]=r*t[5],e[6]=n*t[6],e[7]=n*t[7],e[8]=n*t[8],e}function u(e,t,i){const s=i[0],r=i[1];return e[0]=s*t[0],e[1]=s*t[1],e[2]=s*t[2],e[3]=r*t[3],e[4]=r*t[4],e[5]=r*t[5],e}function g(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=t[0],e[7]=t[1],e[8]=1,e}function m(e,t){const i=t[0],s=t[1],r=t[2],n=t[4],a=t[5],o=t[6],l=t[8],c=t[9],h=t[10],p=h*a-o*c,d=-h*n+o*l,u=c*n-a*l,g=i*p+s*d+r*u;if(!g)return null;const m=1/g;return e[0]=p*m,e[1]=(-h*s+r*c)*m,e[2]=(o*s-r*a)*m,e[3]=d*m,e[4]=(h*i-r*l)*m,e[5]=(-o*i+r*n)*m,e[6]=u*m,e[7]=(-c*i+s*l)*m,e[8]=(a*i-s*n)*m,e}function y(e,t){const i=t[0],s=t[1],r=t[2],n=t[3],a=t[4],o=t[5],l=t[6],c=t[7],h=t[8],p=t[9],d=t[10],u=t[11],g=t[12],m=t[13],y=t[14],f=t[15],v=i*o-s*a,_=i*l-r*a,w=i*c-n*a,b=s*l-r*o,C=s*c-n*o,x=r*c-n*l,T=h*m-p*g,M=h*y-d*g,S=h*f-u*g,I=p*y-d*m,k=p*f-u*m,L=d*f-u*y;let P=v*L-_*k+w*I+b*S-C*M+x*T;return P?(P=1/P,e[0]=(o*L-l*k+c*I)*P,e[1]=(l*S-a*L-c*M)*P,e[2]=(a*k-o*S+c*T)*P,e[3]=(r*k-s*L-n*I)*P,e[4]=(i*L-r*S+n*M)*P,e[5]=(s*S-i*k-n*T)*P,e[6]=(m*x-y*C+f*b)*P,e[7]=(y*w-g*x-f*_)*P,e[8]=(g*C-m*w+f*v)*P,e):null}function f(e,t,i){return e[0]=t[0]-i[0],e[1]=t[1]-i[1],e[2]=t[2]-i[2],e[3]=t[3]-i[3],e[4]=t[4]-i[4],e[5]=t[5]-i[5],e[6]=t[6]-i[6],e[7]=t[7]-i[7],e[8]=t[8]-i[8],e}function v(e){const t=s.E,i=e[0],r=e[1],n=e[2],a=e[3],o=e[4],l=e[5],c=e[6],h=e[7],p=e[8];return Math.abs(1-(i*i+a*a+c*c))<=t&&Math.abs(1-(r*r+o*o+h*h))<=t&&Math.abs(1-(n*n+l*l+p*p))<=t}const _=c,w=f;Object.freeze(Object.defineProperty({__proto__:null,fromMat4:r,copy:function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e},set:n,identity:a,transpose:o,invert:l,adjoint:function(e,t){const i=t[0],s=t[1],r=t[2],n=t[3],a=t[4],o=t[5],l=t[6],c=t[7],h=t[8];return e[0]=a*h-o*c,e[1]=r*c-s*h,e[2]=s*o-r*a,e[3]=o*l-n*h,e[4]=i*h-r*l,e[5]=r*n-i*o,e[6]=n*c-a*l,e[7]=s*l-i*c,e[8]=i*a-s*n,e},determinant:function(e){const t=e[0],i=e[1],s=e[2],r=e[3],n=e[4],a=e[5],o=e[6],l=e[7],c=e[8];return t*(c*n-a*l)+i*(-c*r+a*o)+s*(l*r-n*o)},multiply:c,translate:h,rotate:p,scale:d,scaleByVec2:u,fromTranslation:g,fromRotation:function(e,t){const i=Math.sin(t),s=Math.cos(t);return e[0]=s,e[1]=i,e[2]=0,e[3]=-i,e[4]=s,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e},fromScaling:function(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=0,e[4]=t[1],e[5]=0,e[6]=0,e[7]=0,e[8]=1,e},fromMat2d:function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=0,e[3]=t[2],e[4]=t[3],e[5]=0,e[6]=t[4],e[7]=t[5],e[8]=1,e},fromQuat:function(e,t){const i=t[0],s=t[1],r=t[2],n=t[3],a=i+i,o=s+s,l=r+r,c=i*a,h=s*a,p=s*o,d=r*a,u=r*o,g=r*l,m=n*a,y=n*o,f=n*l;return e[0]=1-p-g,e[3]=h-f,e[6]=d+y,e[1]=h+f,e[4]=1-c-g,e[7]=u-m,e[2]=d-y,e[5]=u+m,e[8]=1-c-p,e},normalFromMat4Legacy:m,normalFromMat4:y,projection:function(e,t,i){return e[0]=2/t,e[1]=0,e[2]=0,e[3]=0,e[4]=-2/i,e[5]=0,e[6]=-1,e[7]=1,e[8]=1,e},str:function(e){return"mat3("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+", "+e[8]+")"},frob:function(e){return Math.sqrt(e[0]**2+e[1]**2+e[2]**2+e[3]**2+e[4]**2+e[5]**2+e[6]**2+e[7]**2+e[8]**2)},add:function(e,t,i){return e[0]=t[0]+i[0],e[1]=t[1]+i[1],e[2]=t[2]+i[2],e[3]=t[3]+i[3],e[4]=t[4]+i[4],e[5]=t[5]+i[5],e[6]=t[6]+i[6],e[7]=t[7]+i[7],e[8]=t[8]+i[8],e},subtract:f,multiplyScalar:function(e,t,i){return e[0]=t[0]*i,e[1]=t[1]*i,e[2]=t[2]*i,e[3]=t[3]*i,e[4]=t[4]*i,e[5]=t[5]*i,e[6]=t[6]*i,e[7]=t[7]*i,e[8]=t[8]*i,e},multiplyScalarAndAdd:function(e,t,i,s){return e[0]=t[0]+i[0]*s,e[1]=t[1]+i[1]*s,e[2]=t[2]+i[2]*s,e[3]=t[3]+i[3]*s,e[4]=t[4]+i[4]*s,e[5]=t[5]+i[5]*s,e[6]=t[6]+i[6]*s,e[7]=t[7]+i[7]*s,e[8]=t[8]+i[8]*s,e},exactEquals:function(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]&&e[6]===t[6]&&e[7]===t[7]&&e[8]===t[8]},equals:function(e,t){const i=e[0],r=e[1],n=e[2],a=e[3],o=e[4],l=e[5],c=e[6],h=e[7],p=e[8],d=t[0],u=t[1],g=t[2],m=t[3],y=t[4],f=t[5],v=t[6],_=t[7],w=t[8];return Math.abs(i-d)<=s.E*Math.max(1,Math.abs(i),Math.abs(d))&&Math.abs(r-u)<=s.E*Math.max(1,Math.abs(r),Math.abs(u))&&Math.abs(n-g)<=s.E*Math.max(1,Math.abs(n),Math.abs(g))&&Math.abs(a-m)<=s.E*Math.max(1,Math.abs(a),Math.abs(m))&&Math.abs(o-y)<=s.E*Math.max(1,Math.abs(o),Math.abs(y))&&Math.abs(l-f)<=s.E*Math.max(1,Math.abs(l),Math.abs(f))&&Math.abs(c-v)<=s.E*Math.max(1,Math.abs(c),Math.abs(v))&&Math.abs(h-_)<=s.E*Math.max(1,Math.abs(h),Math.abs(_))&&Math.abs(p-w)<=s.E*Math.max(1,Math.abs(p),Math.abs(w))},isOrthoNormal:v,mul:_,sub:w},Symbol.toStringTag,{value:"Module"}))},23588:(e,t,i)=>{function s(){const e=new Float32Array(9);return e[0]=1,e[4]=1,e[8]=1,e}function r(e){const t=new Float32Array(9);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t}i.d(t,{a:()=>r,c:()=>s});Object.freeze(Object.defineProperty({__proto__:null,create:s,clone:r,fromValues:function(e,t,i,s,r,n,a,o,l){const c=new Float32Array(9);return c[0]=e,c[1]=t,c[2]=i,c[3]=s,c[4]=r,c[5]=n,c[6]=a,c[7]=o,c[8]=l,c},createView:function(e,t){return new Float32Array(e,t,9)}},Symbol.toStringTag,{value:"Module"}))},53283:(e,t,i)=>{i.d(t,{M:()=>g,e:()=>d,f:()=>n,i:()=>p,p:()=>m,r:()=>o,t:()=>a,w:()=>l});var s=i(92026),r=i(35995);function n(e,t){const i=t&&t.url&&t.url.path;if(e&&i&&(e=(0,r.hF)(e,i,{preserveProtocolRelative:!0}),t.portalItem&&t.readResourcePaths)){const i=(0,r.PF)(e,t.portalItem.itemUrl);h.test(i)&&t.readResourcePaths.push(t.portalItem.resourceFromPath(i).path)}return u(e,t&&t.portal)}function a(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:g.YES;if(!e)return e;!(0,r.YP)(e)&&t&&t.blockedRelativeUrls&&t.blockedRelativeUrls.push(e);let s=(0,r.hF)(e);if(t){const i=t.verifyItemRelativeUrls&&t.verifyItemRelativeUrls.rootPath||t.url&&t.url.path;if(i){const n=u(i,t.portal);s=(0,r.PF)(u(s,t.portal),n,n),s!==e&&t.verifyItemRelativeUrls&&t.verifyItemRelativeUrls.writtenUrls.push(s)}}return s=d(s,t&&t.portal),(0,r.YP)(s)&&(s=(0,r.Fv)(s)),t?.resources&&t?.portalItem&&!(0,r.YP)(s)&&!(0,r.HK)(s)&&i===g.YES&&t.resources.toKeep.push({resource:t.portalItem.resourceFromPath(s)}),s}function o(e,t,i){return n(e,i)}function l(e,t,i,s){const r=a(e,s);void 0!==r&&(t[i]=r)}const c=/\/items\/([^\/]+)\/resources\//,h=/^\.\/resources\//;function p(e){const t=(0,s.pC)(e)?e.match(c):null;return(0,s.pC)(t)?t[1]:null}function d(e,t){return t&&!t.isPortal&&t.urlKey&&t.customBaseUrl?(0,r.Ie)(e,`${t.urlKey}.${t.customBaseUrl}`,t.portalHostname):e}function u(e,t){if(!t||t.isPortal||!t.urlKey||!t.customBaseUrl)return e;const i=`${t.urlKey}.${t.customBaseUrl}`,s=(0,r.TI)();return(0,r.D6)(s,`${s.scheme}://${i}`)?(0,r.Ie)(e,t.portalHostname,i):(0,r.Ie)(e,i,t.portalHostname)}var g;!function(e){e[e.YES=0]="YES",e[e.NO=1]="NO"}(g||(g={}));const m=Object.freeze(Object.defineProperty({__proto__:null,fromJSON:n,toJSON:a,read:o,write:l,itemIdFromResourceUrl:p,ensureMainOnlineDomain:d,get MarkKeep(){return g}},Symbol.toStringTag,{value:"Module"}))},36231:(e,t,i)=>{i.d(t,{q:()=>o});var s,r,n,a={exports:{}};s=a,r=function(){function e(i,s,r,n,a){for(;n>r;){if(n-r>600){var o=n-r+1,l=s-r+1,c=Math.log(o),h=.5*Math.exp(2*c/3),p=.5*Math.sqrt(c*h*(o-h)/o)*(l-o/2<0?-1:1);e(i,s,Math.max(r,Math.floor(s-l*h/o+p)),Math.min(n,Math.floor(s+(o-l)*h/o+p)),a)}var d=i[s],u=r,g=n;for(t(i,r,s),a(i[n],d)>0&&t(i,r,n);u<g;){for(t(i,u,g),u++,g--;a(i[u],d)<0;)u++;for(;a(i[g],d)>0;)g--}0===a(i[r],d)?t(i,r,g):t(i,++g,n),g<=s&&(r=g+1),s<=g&&(n=g-1)}}function t(e,t,i){var s=e[t];e[t]=e[i],e[i]=s}function i(e,t){return e<t?-1:e>t?1:0}return function(t,s,r,n,a){e(t,s,r||0,n||t.length-1,a||i)}},void 0!==(n=r())&&(s.exports=n);const o=a.exports},31581:(e,t,i)=>{i.d(t,{r:()=>r});var s=i(36231);function r(e,t){if(!(this instanceof r))return new r(e,t);this._maxEntries=Math.max(4,e||9),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),t&&("function"==typeof t?this.toBBox=t:this._initFormat(t)),this.clear()}function n(e,t,i){if(!i)return t.indexOf(e);for(var s=0;s<t.length;s++)if(i(e,t[s]))return s;return-1}function a(e,t){o(e,0,e.children.length,t,e)}function o(e,t,i,s,r){r||(r=f(null)),r.minX=1/0,r.minY=1/0,r.maxX=-1/0,r.maxY=-1/0;for(var n,a=t;a<i;a++)n=e.children[a],l(r,e.leaf?s(n):n);return r}function l(e,t){return e.minX=Math.min(e.minX,t.minX),e.minY=Math.min(e.minY,t.minY),e.maxX=Math.max(e.maxX,t.maxX),e.maxY=Math.max(e.maxY,t.maxY),e}function c(e,t){return e.minX-t.minX}function h(e,t){return e.minY-t.minY}function p(e){return(e.maxX-e.minX)*(e.maxY-e.minY)}function d(e){return e.maxX-e.minX+(e.maxY-e.minY)}function u(e,t){return(Math.max(t.maxX,e.maxX)-Math.min(t.minX,e.minX))*(Math.max(t.maxY,e.maxY)-Math.min(t.minY,e.minY))}function g(e,t){var i=Math.max(e.minX,t.minX),s=Math.max(e.minY,t.minY),r=Math.min(e.maxX,t.maxX),n=Math.min(e.maxY,t.maxY);return Math.max(0,r-i)*Math.max(0,n-s)}function m(e,t){return e.minX<=t.minX&&e.minY<=t.minY&&t.maxX<=e.maxX&&t.maxY<=e.maxY}function y(e,t){return t.minX<=e.maxX&&t.minY<=e.maxY&&t.maxX>=e.minX&&t.maxY>=e.minY}function f(e){return{children:e,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function v(e,t,i,r,n){for(var a,o=[t,i];o.length;)(i=o.pop())-(t=o.pop())<=r||(a=t+Math.ceil((i-t)/r/2)*r,(0,s.q)(e,a,t,i,n),o.push(t,a,a,i))}r.prototype={all:function(){return this._all(this.data,[])},search:function(e){var t=this.data,i=[],s=this.toBBox;if(!y(e,t))return i;for(var r,n,a,o,l=[];t;){for(r=0,n=t.children.length;r<n;r++)a=t.children[r],y(e,o=t.leaf?s(a):a)&&(t.leaf?i.push(a):m(e,o)?this._all(a,i):l.push(a));t=l.pop()}return i},collides:function(e){var t=this.data,i=this.toBBox;if(!y(e,t))return!1;for(var s,r,n,a,o=[];t;){for(s=0,r=t.children.length;s<r;s++)if(n=t.children[s],y(e,a=t.leaf?i(n):n)){if(t.leaf||m(e,a))return!0;o.push(n)}t=o.pop()}return!1},load:function(e){if(!e||!e.length)return this;if(e.length<this._minEntries){for(var t=0,i=e.length;t<i;t++)this.insert(e[t]);return this}var s=this._build(e.slice(),0,e.length-1,0);if(this.data.children.length)if(this.data.height===s.height)this._splitRoot(this.data,s);else{if(this.data.height<s.height){var r=this.data;this.data=s,s=r}this._insert(s,this.data.height-s.height-1,!0)}else this.data=s;return this},insert:function(e){return e&&this._insert(e,this.data.height-1),this},clear:function(){return this.data=f([]),this},remove:function(e,t){if(!e)return this;for(var i,s,r,a,o=this.data,l=this.toBBox(e),c=[],h=[];o||c.length;){if(o||(o=c.pop(),s=c[c.length-1],i=h.pop(),a=!0),o.leaf&&-1!==(r=n(e,o.children,t)))return o.children.splice(r,1),c.push(o),this._condense(c),this;a||o.leaf||!m(o,l)?s?(i++,o=s.children[i],a=!1):o=null:(c.push(o),h.push(i),i=0,s=o,o=o.children[0])}return this},toBBox:function(e){return e},compareMinX:c,compareMinY:h,toJSON:function(){return this.data},fromJSON:function(e){return this.data=e,this},_all:function(e,t){for(var i=[];e;)e.leaf?t.push.apply(t,e.children):i.push.apply(i,e.children),e=i.pop();return t},_build:function(e,t,i,s){var r,n=i-t+1,o=this._maxEntries;if(n<=o)return a(r=f(e.slice(t,i+1)),this.toBBox),r;s||(s=Math.ceil(Math.log(n)/Math.log(o)),o=Math.ceil(n/Math.pow(o,s-1))),(r=f([])).leaf=!1,r.height=s;var l,c,h,p,d=Math.ceil(n/o),u=d*Math.ceil(Math.sqrt(o));for(v(e,t,i,u,this.compareMinX),l=t;l<=i;l+=u)for(v(e,l,h=Math.min(l+u-1,i),d,this.compareMinY),c=l;c<=h;c+=d)p=Math.min(c+d-1,h),r.children.push(this._build(e,c,p,s-1));return a(r,this.toBBox),r},_chooseSubtree:function(e,t,i,s){for(var r,n,a,o,l,c,h,d;s.push(t),!t.leaf&&s.length-1!==i;){for(h=d=1/0,r=0,n=t.children.length;r<n;r++)l=p(a=t.children[r]),(c=u(e,a)-l)<d?(d=c,h=l<h?l:h,o=a):c===d&&l<h&&(h=l,o=a);t=o||t.children[0]}return t},_insert:function(e,t,i){var s=this.toBBox,r=i?e:s(e),n=[],a=this._chooseSubtree(r,this.data,t,n);for(a.children.push(e),l(a,r);t>=0&&n[t].children.length>this._maxEntries;)this._split(n,t),t--;this._adjustParentBBoxes(r,n,t)},_split:function(e,t){var i=e[t],s=i.children.length,r=this._minEntries;this._chooseSplitAxis(i,r,s);var n=this._chooseSplitIndex(i,r,s),o=f(i.children.splice(n,i.children.length-n));o.height=i.height,o.leaf=i.leaf,a(i,this.toBBox),a(o,this.toBBox),t?e[t-1].children.push(o):this._splitRoot(i,o)},_splitRoot:function(e,t){this.data=f([e,t]),this.data.height=e.height+1,this.data.leaf=!1,a(this.data,this.toBBox)},_chooseSplitIndex:function(e,t,i){var s,r,n,a,l,c,h,d;for(c=h=1/0,s=t;s<=i-t;s++)a=g(r=o(e,0,s,this.toBBox),n=o(e,s,i,this.toBBox)),l=p(r)+p(n),a<c?(c=a,d=s,h=l<h?l:h):a===c&&l<h&&(h=l,d=s);return d},_chooseSplitAxis:function(e,t,i){var s=e.leaf?this.compareMinX:c,r=e.leaf?this.compareMinY:h;this._allDistMargin(e,t,i,s)<this._allDistMargin(e,t,i,r)&&e.children.sort(s)},_allDistMargin:function(e,t,i,s){e.children.sort(s);var r,n,a=this.toBBox,c=o(e,0,t,a),h=o(e,i-t,i,a),p=d(c)+d(h);for(r=t;r<i-t;r++)n=e.children[r],l(c,e.leaf?a(n):n),p+=d(c);for(r=i-t-1;r>=t;r--)n=e.children[r],l(h,e.leaf?a(n):n),p+=d(h);return p},_adjustParentBBoxes:function(e,t,i){for(var s=i;s>=0;s--)l(t[s],e)},_condense:function(e){for(var t,i=e.length-1;i>=0;i--)0===e[i].children.length?i>0?(t=e[i-1].children).splice(t.indexOf(e[i]),1):this.clear():a(e[i],this.toBBox)},_initFormat:function(e){var t=["return a"," - b",";"];this.compareMinX=new Function("a","b",t.join(e[0])),this.compareMinY=new Function("a","b",t.join(e[1])),this.toBBox=new Function("a","return {minX: a"+e[0]+", minY: a"+e[1]+", maxX: a"+e[2]+", maxY: a"+e[3]+"};")}}},15245:(e,t,i)=>{function s(){return new Float32Array(2)}function r(e,t){const i=new Float32Array(2);return i[0]=e,i[1]=t,i}function n(){return s()}function a(){return r(1,1)}function o(){return r(1,0)}function l(){return r(0,1)}i.d(t,{c:()=>s,f:()=>r});const c=n(),h=a(),p=o(),d=l();Object.freeze(Object.defineProperty({__proto__:null,create:s,clone:function(e){const t=new Float32Array(2);return t[0]=e[0],t[1]=e[1],t},fromValues:r,createView:function(e,t){return new Float32Array(e,t,2)},zeros:n,ones:a,unitX:o,unitY:l,ZEROS:c,ONES:h,UNIT_X:p,UNIT_Y:d},Symbol.toStringTag,{value:"Module"}))},77178:(e,t,i)=>{i.d(t,{Z:()=>p});var s=i(27366),r=i(40281),n=i(41691),a=i(92026),o=(i(93169),i(10064),i(32718),i(3073),i(27088)),l=i(49861),c=(i(63780),i(25243),i(69912));let h=class extends((0,n.p)(r.Z)){constructor(e){super(e),this.getCollections=null}initialize(){this.handles.add((0,o.EH)((()=>this._refresh())))}destroy(){this.getCollections=null}_refresh(){const e=(0,a.pC)(this.getCollections)?this.getCollections():null;if((0,a.Wi)(e))return void this.removeAll();let t=0;for(const i of e)(0,a.pC)(i)&&(t=this._processCollection(t,i));this.splice(t,this.length)}_createNewInstance(e){return new r.Z(e)}_processCollection(e,t){if(!t)return e;const i=this.itemFilterFunction?this.itemFilterFunction:e=>!!e;for(const s of t)if(s){if(i(s)){const t=this.indexOf(s,e);t>=0?t!==e&&this.reorder(s,e):this.add(s,e),++e}if(this.getChildrenFunction){const t=this.getChildrenFunction(s);if(Array.isArray(t))for(const i of t)e=this._processCollection(e,i);else e=this._processCollection(e,t)}}return e}};(0,s._)([(0,l.Cb)()],h.prototype,"getCollections",void 0),(0,s._)([(0,l.Cb)()],h.prototype,"getChildrenFunction",void 0),(0,s._)([(0,l.Cb)()],h.prototype,"itemFilterFunction",void 0),h=(0,s._)([(0,c.j)("esri.core.CollectionFlattener")],h);const p=h},79056:(e,t,i)=>{i.d(t,{IG:()=>a});var s=i(27366),r=i(69912);let n=0;const a=e=>{let t=class extends e{constructor(){super(...arguments),Object.defineProperty(this,"uid",{writable:!1,configurable:!1,value:Date.now().toString(16)+"-object-"+n++})}};return t=(0,s._)([(0,r.j)("esri.core.Identifiable")],t),t};let o=class extends(a(class{})){};o=(0,s._)([(0,r.j)("esri.core.Identifiable")],o)},93002:(e,t,i)=>{i.d(t,{G:()=>o,w:()=>l});var s=i(14921),r=i(40281),n=i(54472),a=i(92026);async function o(e,t){return await e.load(),l(e,t)}async function l(e,t){const i=[],o=function(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];for(const l of t)(0,a.Wi)(l)||(Array.isArray(l)?o(...l):r.Z.isCollection(l)?l.forEach((e=>o(e))):n.Z.isLoadable(l)&&i.push(l))};t(o);let l=null;if(await(0,s.UI)(i,(async e=>{!1!==(await(0,s.q6)(function(e){return"loadAll"in e&&"function"==typeof e.loadAll}(e)?e.loadAll():e.load())).ok||l||(l=e)})),l)throw l.loadError;return e}},29616:(e,t,i)=>{i.d(t,{Qc:()=>h,WU:()=>o,lt:()=>c,ti:()=>a});var s=i(643),r=i(36257);const n={ar:[".",","],bg:[",","\xa0"],bs:[",","."],ca:[",","."],cs:[",","\xa0"],da:[",","."],de:[",","."],"de-ch":[".","\u2019"],el:[",","."],en:[".",","],"en-au":[".",","],es:[",","."],"es-mx":[".",","],et:[",","\xa0"],fi:[",","\xa0"],fr:[",","\u202f"],"fr-ch":[",","\u202f"],he:[".",","],hi:[".",",","#,##,##0.###"],hr:[",","."],hu:[",","\xa0"],id:[",","."],it:[",","."],"it-ch":[".","\u2019"],ja:[".",","],ko:[".",","],lt:[",","\xa0"],lv:[",","\xa0"],mk:[",","."],nb:[",","\xa0"],nl:[",","."],pl:[",","\xa0"],pt:[",","."],"pt-pt":[",","\xa0"],ro:[",","."],ru:[",","\xa0"],sk:[",","\xa0"],sl:[",","."],sr:[",","."],sv:[",","\xa0"],th:[".",","],tr:[",","."],uk:[",","\xa0"],vi:[",","."],zh:[".",","]};function a(e){e||(e=(0,r.Kd)());let t=e in n;if(!t){const i=e.split("-");i.length>1&&i[0]in n&&(e=i[0],t=!0),t||(e="en")}const[i,s,a="#,##0.###"]=n[e];return{decimal:i,group:s,pattern:a}}function o(e,t){const i=a((t={...t}).locale);t.customs=i;const s=t.pattern||i.pattern;return isNaN(e)||Math.abs(e)===1/0?null:function(e,t,i){const s=(i=i||{}).customs.group,r=i.customs.decimal,n=t.split(";"),a=n[0];if((t=n[e<0?1:0]||"-"+a).includes("%"))e*=100;else if(t.includes("\u2030"))e*=1e3;else{if(t.includes("\xa4"))throw new Error("currency notation not supported");if(t.includes("E"))throw new Error("exponential notation not supported")}const o=l,c=a.match(o);if(!c)throw new Error("unable to find a number expression in pattern: "+t);return!1===i.fractional&&(i.places=0),t.replace(o,function(e,t,i){!0===(i=i||{}).places&&(i.places=0),i.places===1/0&&(i.places=6);const s=t.split("."),r="string"==typeof i.places&&i.places.indexOf(",");let n=i.places;r?n=i.places.substring(r+1):n>=0||(n=(s[1]||[]).length),i.round<0||(e=Number(e.toFixed(Number(n))));const a=String(Math.abs(e)).split("."),o=a[1]||"";if(s[1]||i.places){r&&(i.places=i.places.substring(0,r));const e=void 0!==i.places?i.places:s[1]&&s[1].lastIndexOf("0")+1;e>o.length&&(a[1]=o.padEnd(Number(e),"0")),n<o.length&&(a[1]=o.substr(0,Number(n)))}else a[1]&&a.pop();const l=s[0].replace(",","");let c=l.indexOf("0");-1!==c&&(c=l.length-c,c>a[0].length&&(a[0]=a[0].padStart(c,"0")),l.includes("#")||(a[0]=a[0].substr(a[0].length-c)));let h,p,d=s[0].lastIndexOf(",");if(-1!==d){h=s[0].length-d-1;const e=s[0].substr(0,d);d=e.lastIndexOf(","),-1!==d&&(p=e.length-d-1)}const u=[];for(let g=a[0];g;){const e=g.length-h;u.push(e>0?g.substr(e):g),g=e>0?g.slice(0,e):"",p&&(h=p,p=void 0)}return a[0]=u.reverse().join(i.group||","),a.join(i.decimal||".")}(e,c[0],{decimal:r,group:s,places:i.places,round:i.round}))}(e,s,t)}const l=/[#0,]*[#0](?:\.0*#*)?/;function c(e){const t=a((e=e||{}).locale),i=e.pattern||t.pattern,r=t.group,n=t.decimal;let o=1;if(i.includes("%"))o/=100;else if(i.includes("\u2030"))o/=1e3;else if(i.includes("\xa4"))throw new Error("currency notation not supported");const c=i.split(";");1===c.length&&c.push("-"+c[0]);const h=d(c,(t=>(t="(?:"+(0,s.Qs)(t,".")+")").replace(l,(t=>{const i={signed:!1,separator:e.strict?r:[r,""],fractional:e.fractional,decimal:n,exponent:!1},s=t.split(".");let a=e.places;1===s.length&&1!==o&&(s[1]="###"),1===s.length||0===a?i.fractional=!1:(void 0===a&&(a=e.pattern?s[1].lastIndexOf("0")+1:1/0),a&&null==e.fractional&&(i.fractional=!0),!e.places&&a<s[1].length&&(a+=","+s[1].length),i.places=a);const l=s[0].split(",");return l.length>1&&(i.groupSize=l.pop().length,l.length>1&&(i.groupSize2=l.pop().length)),"("+function(e){"places"in(e=e||{})||(e.places=1/0),"string"!=typeof e.decimal&&(e.decimal="."),"fractional"in e&&!/^0/.test(String(e.places))||(e.fractional=[!0,!1]),"exponent"in e||(e.exponent=[!0,!1]),"eSigned"in e||(e.eSigned=[!0,!1]);const t=p(e),i=d(e.fractional,(t=>{let i="";return t&&0!==e.places&&(i="\\"+e.decimal,e.places===1/0?i="(?:"+i+"\\d+)?":i+="\\d{"+e.places+"}"),i}),!0);let s=t+i;return i&&(s="(?:(?:"+s+")|(?:"+i+"))"),s+d(e.exponent,(t=>t?"([eE]"+p({signed:e.eSigned})+")":""))}(i)+")"}))),!0);return{regexp:h.replace(/[\xa0 ]/g,"[\\s\\xa0]"),group:r,decimal:n,factor:o}}function h(e,t){const i=c(t),s=new RegExp("^"+i.regexp+"$").exec(e);if(!s)return NaN;let r=s[1];if(!s[1]){if(!s[2])return NaN;r=s[2],i.factor*=-1}return r=r.replace(new RegExp("["+i.group+"\\s\\xa0]","g"),"").replace(i.decimal,"."),Number(r)*i.factor}function p(e){return"signed"in(e=e||{})||(e.signed=[!0,!1]),"separator"in e?"groupSize"in e||(e.groupSize=3):e.separator="",d(e.signed,(e=>e?"[-+]":""),!0)+d(e.separator,(t=>{if(!t)return"(?:\\d+)";" "===(t=(0,s.Qs)(t))?t="\\s":"\xa0"===t&&(t="\\s\\xa0");const i=e.groupSize,r=e.groupSize2;if(r){const e="(?:0|[1-9]\\d{0,"+(r-1)+"}(?:["+t+"]\\d{"+r+"})*["+t+"]\\d{"+i+"})";return i-r>0?"(?:"+e+"|(?:0|[1-9]\\d{0,"+(i-1)+"}))":e}return"(?:0|[1-9]\\d{0,"+(i-1)+"}(?:["+t+"]\\d{"+i+"})*)"}),!0)}const d=(e,t,i)=>{if(!(e instanceof Array))return t(e);const s=[];for(let r=0;r<e.length;r++)s.push(t(e[r]));return u(s.join("|"),i)},u=(e,t)=>"("+(t?"?:":"")+e+")"},68748:(e,t,i)=>{i.d(t,{a:()=>p,z:()=>d});var s=i(27366),r=i(40281),n=i(60354),a=i(41691),o=(i(93169),i(32718)),l=i(92026),c=i(49861),h=(i(63780),i(25243),i(69912));o.Z.getLogger("esri.core.support.OwningCollection");let p=class extends((0,a.p)(r.Z)){constructor(e){super(e),this.handles.add([this.on("before-add",(e=>{(0,l.Wi)(e.item)&&e.preventDefault()})),this.on("after-add",(e=>this._own(e.item))),this.on("after-remove",(e=>this._release(e.item)))])}get owner(){return this._get("owner")}set owner(e){e!==this._get("owner")&&(this._releaseAll(),this._set("owner",e),this._ownAll())}_ownAll(){for(const e of this.items)this._own(e)}_releaseAll(){for(const e of this.items)this._release(e)}_createNewInstance(e){return this.itemType?new(r.Z.ofType(this.itemType.Type))(e):new r.Z(e)}};function d(e,t){return{type:e,cast:n.R,set(i){const s=(0,n.Z)(i,this._get(t),e);s.owner=this,this._set(t,s)}}}(0,s._)([(0,c.Cb)()],p.prototype,"owner",null),p=(0,s._)([(0,h.j)("esri.core.support.OwningCollection")],p)},41414:(e,t,i)=>{i.d(t,{BD:()=>C,G1:()=>d,Gv:()=>A,HH:()=>l,JR:()=>R,KE:()=>S,TC:()=>c,Tn:()=>k,Ue:()=>a,VK:()=>h,Wi:()=>u,Zp:()=>x,aO:()=>b,al:()=>o,bA:()=>M,be:()=>_,cS:()=>P,cv:()=>T,dp:()=>w,fS:()=>D,op:()=>I,pp:()=>p,sU:()=>g,t8:()=>L,wp:()=>O,wz:()=>v,xE:()=>Z,y8:()=>E});var s=i(92026),r=i(53866),n=i(65156);function a(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Z;return[e[0],e[1],e[2],e[3],e[4],e[5]]}function o(e,t,i,s,r,n){let o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:a();return o[0]=e,o[1]=t,o[2]=i,o[3]=s,o[4]=r,o[5]=n,o}function l(e,t){const i=isFinite(e[2])||isFinite(e[5]);return new r.Z(i?{xmin:e[0],xmax:e[3],ymin:e[1],ymax:e[4],zmin:e[2],zmax:e[5],spatialReference:t}:{xmin:e[0],xmax:e[3],ymin:e[1],ymax:e[4],spatialReference:t})}function c(e,t){e[0]=Math.min(e[0],t[0]),e[1]=Math.min(e[1],t[1]),e[2]=Math.min(e[2],t[2]),e[3]=Math.max(e[3],t[3]),e[4]=Math.max(e[4],t[4]),e[5]=Math.max(e[5],t[5])}function h(e,t){e[0]=Math.min(e[0],t[0]),e[1]=Math.min(e[1],t[1]),e[3]=Math.max(e[3],t[2]),e[4]=Math.max(e[4],t[3])}function p(e,t){e[0]=Math.min(e[0],t[0]),e[1]=Math.min(e[1],t[1]),e[2]=Math.min(e[2],t[2]),e[3]=Math.max(e[3],t[0]),e[4]=Math.max(e[4],t[1]),e[5]=Math.max(e[5],t[2])}function d(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:t.length/3,r=e[0],n=e[1],a=e[2],o=e[3],l=e[4],c=e[5];for(let h=0;h<s;h++)r=Math.min(r,t[i+3*h]),n=Math.min(n,t[i+3*h+1]),a=Math.min(a,t[i+3*h+2]),o=Math.max(o,t[i+3*h]),l=Math.max(l,t[i+3*h+1]),c=Math.max(c,t[i+3*h+2]);e[0]=r,e[1]=n,e[2]=a,e[3]=o,e[4]=l,e[5]=c}function u(e,t,i){const s=t.length;let r=e[0],n=e[1],a=e[2],o=e[3],l=e[4],c=e[5];if(i)for(let h=0;h<s;h++){const e=t[h];r=Math.min(r,e[0]),n=Math.min(n,e[1]),a=Math.min(a,e[2]),o=Math.max(o,e[0]),l=Math.max(l,e[1]),c=Math.max(c,e[2])}else for(let h=0;h<s;h++){const e=t[h];r=Math.min(r,e[0]),n=Math.min(n,e[1]),o=Math.max(o,e[0]),l=Math.max(l,e[1])}e[0]=r,e[1]=n,e[2]=a,e[3]=o,e[4]=l,e[5]=c}function g(e){for(let t=0;t<6;t++)if(!isFinite(e[t]))return!1;return!0}function m(e){return e[0]>=e[3]?0:e[3]-e[0]}function y(e){return e[1]>=e[4]?0:e[4]-e[1]}function f(e){return e[2]>=e[5]?0:e[5]-e[2]}function v(e){const t=m(e),i=f(e),s=y(e);return Math.sqrt(t*t+i*i+s*s)}function _(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0,0,0];return t[0]=e[0]+m(e)/2,t[1]=e[1]+y(e)/2,t[2]=e[2]+f(e)/2,t}function w(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0,0,0];return t[0]=m(e),t[1]=y(e),t[2]=f(e),t}function b(e){return Math.max(m(e),f(e),y(e))}function C(e,t){return t[0]>=e[0]&&t[1]>=e[1]&&t[2]>=e[2]&&t[0]<=e[3]&&t[1]<=e[4]&&t[2]<=e[5]}function x(e,t){return!!(0,s.Wi)(t)||function(e,t){return Math.max(t[0],e[0])<=Math.min(t[3],e[3])&&Math.max(t[1],e[1])<=Math.min(t[4],e[4])&&Math.max(t[2],e[2])<=Math.min(t[5],e[5])}(e,t)}function T(e,t,i,s){let r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:e;return r[0]=e[0]+t,r[1]=e[1]+i,r[2]=e[2]+s,r[3]=e[3]+t,r[4]=e[4]+i,r[5]=e[5]+s,r}function M(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e;const s=e[0]+m(e)/2,r=e[1]+y(e)/2,n=e[2]+f(e)/2;return i[0]=s+(e[0]-s)*t,i[1]=r+(e[1]-r)*t,i[2]=n+(e[2]-n)*t,i[3]=s+(e[3]-s)*t,i[4]=r+(e[4]-r)*t,i[5]=n+(e[5]-n)*t,i}function S(e,t){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t}function I(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e;return i[0]=t[0],i[1]=t[1],i[2]=t[2],i!==e&&(i[3]=e[3],i[4]=e[4],i[5]=e[5]),i}function k(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e;return i[3]=t[0],i[4]=t[1],i[5]=t[2],i!==e&&(i[0]=e[0],i[1]=e[1],i[2]=e[2]),e}function L(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e}function P(e){return e?L(e,A):a(A)}function E(e,t){return t||(t=(0,n.Ue)()),t[0]=e[0],t[1]=e[1],t[2]=e[3],t[3]=e[4],t}function R(e,t){return e[0]=t[0],e[1]=t[1],e[2]=Number.NEGATIVE_INFINITY,e[3]=t[2],e[4]=t[3],e[5]=Number.POSITIVE_INFINITY,e}function V(e){return 6===e.length}function O(e){return 0===m(e)&&0===y(e)&&0===f(e)}function D(e,t,i){if((0,s.Wi)(e)||(0,s.Wi)(t))return e===t;if(!V(e)||!V(t))return!1;if(i){for(let s=0;s<e.length;s++)if(!i(e[s],t[s]))return!1}else for(let s=0;s<e.length;s++)if(e[s]!==t[s])return!1;return!0}const A=[1/0,1/0,1/0,-1/0,-1/0,-1/0],Z=[0,0,0,0,0,0];a()},5354:(e,t,i)=>{i.d(t,{Ku:()=>p,Wt:()=>l,qC:()=>m});i(93169);var s,r=i(10064),n=i(92026),a=i(90724),o=i(25899);function l(e,t,i){const n=p(e),o=t,l=c(n,o,i);if(n){const t=a.Z.deriveUnitFromSR(n,e.spatialReference).heightUnit;if(!i&&t!==n.heightUnit){const e=new r.Z("layerview:unmatched-height-unit",`The vertical units of the layer must match the horizontal units (${t})`,{horizontalUnit:t});return new r.Z("layerview:unsupported-height-model-info","The vertical coordinate system of the layer is not supported",{heightModelInfo:n,error:e})}}if(!function(e){return"heightModelInfo"in e&&null!=e.heightModelInfo||null!=e.spatialReference||!g(e)}(e)||l===s.Unsupported)return new r.Z("layerview:unsupported-height-model-info","The vertical coordinate system of the layer is not supported",{heightModelInfo:n});switch(l){case s.Units:{const e=n.heightUnit||"unknown",t=o.heightUnit||"unknown",i=new r.Z("layerview:incompatible-height-unit",`The vertical units of the layer (${e}) must match the vertical units of the scene (${t})`,{layerUnit:e,sceneUnit:t});return new r.Z("layerview:incompatible-height-model-info","The vertical coordinate system of the layer is incompatible with the scene",{layerHeightModelInfo:n,sceneHeightModelInfo:o,error:i})}case s.HeightModel:{const e=n.heightModel||"unknown",t=o.heightModel||"unknown",i=new r.Z("layerview:incompatible-height-model",`The height model of the layer (${e}) must match the height model of the scene (${t})`,{layerHeightModel:e,sceneHeightModel:t});return new r.Z("layerview:incompatible-height-model-info","The vertical coordinate system of the layer is incompatible with the scene",{layerHeightModelInfo:n,sceneHeightModelInfo:o,error:i})}case s.CRS:{const e=n.vertCRS||"unknown",t=o.vertCRS||"unknown",i=new r.Z("layerview:incompatible-vertical-datum",`The vertical datum of the layer (${e}) must match the vertical datum of the scene (${t})`,{layerDatum:e,sceneDatum:t});return new r.Z("layerview:incompatible-height-model-info","The vertical coordinate system of the layer is incompatible with the scene",{layerHeightModelInfo:n,sceneHeightModelInfo:o,error:i})}}return null}function c(e,t,i){if(!h(e)||!h(t))return s.Unsupported;if(null==e||null==t)return s.Ok;if(!i&&e.heightUnit!==t.heightUnit)return s.Units;if(e.heightModel!==t.heightModel)return s.HeightModel;switch(e.heightModel){case"gravity-related-height":return s.Ok;case"ellipsoidal":return e.vertCRS===t.vertCRS?s.Ok:s.CRS;default:return s.Unsupported}}function h(e){return null==e||null!=e.heightModel&&null!=e.heightUnit}function p(e){const t=e.url&&(0,o.Qc)(e.url);return null==(e.spatialReference&&e.spatialReference.vcsWkid)&&(0,n.pC)(t)&&"ImageServer"===t.serverType||!d(e)||!e.heightModelInfo?g(e)?a.Z.deriveUnitFromSR(f,e.spatialReference):null:e.heightModelInfo}function d(e){return"heightModelInfo"in e}function u(e){if("unknown"===e.type||!("capabilities"in e))return!1;switch(e.type){case"csv":case"feature":case"geojson":case"subtype-group":case"ogc-feature":case"wfs":return!0;default:return!1}}function g(e){return u(e)?!!(e.capabilities&&e.capabilities.data&&e.capabilities.data.supportsZ):y(e)}function m(e){return null!=e.layers||y(e)||u(e)||d(e)}function y(e){switch(e.type){case"building-scene":case"elevation":case"integrated-mesh":case"point-cloud":case"scene":case"voxel":return!0;case"line-of-sight":case"base-dynamic":case"base-elevation":case"base-tile":case"bing-maps":case"csv":case"geojson":case"feature":case"subtype-group":case"geo-rss":case"graphics":case"group":case"imagery":case"imagery-tile":case"kml":case"map-image":case"map-notes":case"media":case"ogc-feature":case"open-street-map":case"route":case"stream":case"tile":case"unknown":case"unsupported":case"vector-tile":case"wcs":case"web-tile":case"wfs":case"wms":case"wmts":case null:return!1}return!1}!function(e){e[e.Ok=0]="Ok",e[e.Units=1]="Units",e[e.HeightModel=2]="HeightModel",e[e.CRS=3]="CRS",e[e.Unsupported=4]="Unsupported"}(s||(s={}));const f=new a.Z({heightModel:"gravity-related-height"})},93655:(e,t,i)=>{i.d(t,{Z:()=>u});var s=i(27366),r=i(49861),n=(i(63780),i(93169),i(25243),i(69912)),a=i(68748),o=i(30651),l=i(6693),c=i(56811),h=i(78983),p=i(64575);let d=class extends((0,l.h)((0,c.M)(o.Z))){constructor(e){super(e),this.elevationInfo=null,this.graphics=new h.J,this.screenSizePerspectiveEnabled=!0,this.type="graphics",this.internal=!1}destroy(){this.removeAll(),this.graphics.destroy()}add(e){return this.graphics.add(e),this}addMany(e){return this.graphics.addMany(e),this}removeAll(){return this.graphics.removeAll(),this}remove(e){this.graphics.remove(e)}removeMany(e){this.graphics.removeMany(e)}on(e,t){return super.on(e,t)}graphicChanged(e){this.emit("graphic-update",e)}};(0,s._)([(0,r.Cb)({type:p.ZP})],d.prototype,"elevationInfo",void 0),(0,s._)([(0,r.Cb)((0,a.z)(h.J,"graphics"))],d.prototype,"graphics",void 0),(0,s._)([(0,r.Cb)({type:["show","hide"]})],d.prototype,"listMode",void 0),(0,s._)([(0,r.Cb)()],d.prototype,"screenSizePerspectiveEnabled",void 0),(0,s._)([(0,r.Cb)({readOnly:!0})],d.prototype,"type",void 0),(0,s._)([(0,r.Cb)({constructOnly:!0})],d.prototype,"internal",void 0),d=(0,s._)([(0,n.j)("esri.layers.GraphicsLayer")],d);const u=d},39638:(e,t,i)=>{var s;function r(e,t){switch(e.type){case"range":{const i="range"in e?e.range[0]:e.minValue,r="range"in e?e.range[1]:e.maxValue;if(+t<i||+t>r)return s.VALUE_OUT_OF_RANGE;break}case"coded-value":case"codedValue":if(null==e.codedValues||e.codedValues.every((e=>null==e||e.code!==t)))return s.INVALID_CODED_VALUE}return null}function n(e){if(e&&"range"===e.type)return{min:"range"in e?e.range[0]:e.minValue,max:"range"in e?e.range[1]:e.maxValue}}i.d(t,{D3:()=>n,F3:()=>r,V$:()=>s}),function(e){e.VALUE_OUT_OF_RANGE="domain-validation-error::value-out-of-range",e.INVALID_CODED_VALUE="domain-validation-error::invalid-coded-value"}(s||(s={}))},37270:(e,t,i)=>{i.d(t,{AB:()=>y,CH:()=>S,Ec:()=>ee,Gz:()=>U,H7:()=>G,Lk:()=>f,Ll:()=>T,M$:()=>B,Mu:()=>k,O5:()=>w,Pz:()=>W,Q0:()=>g,Qc:()=>j,Qj:()=>M,R9:()=>Q,UF:()=>d,YN:()=>h,ZV:()=>x,gd:()=>m,io:()=>v,j:()=>I,os:()=>L,qN:()=>F,vP:()=>J,vl:()=>C,wF:()=>H,y2:()=>z});var s=i(10064),r=i(92026),n=i(18202),a=i(39638),o=i(819);const l=["field","field2","field3","normalizationField","rotationInfo.field","proportionalSymbolInfo.field","proportionalSymbolInfo.normalizationField","colorInfo.field","colorInfo.normalizationField"],c=["field","normalizationField"];function h(e,t){if(null!=e&&null!=t)for(const i of Array.isArray(e)?e:[e])if(p(l,i,t),"visualVariables"in i&&i.visualVariables)for(const e of i.visualVariables)p(c,e,t)}function p(e,t,i){if(e)for(const s of e){const e=(0,n.hS)(s,t),r=e&&"function"!=typeof e&&i.get(e);r&&(0,n.RB)(s,r.name,t)}}function d(e,t){if(null!=e&&t?.fields.length)if("startField"in e){const i=t.get(e.startField),s=t.get(e.endField);e.startField=i&&i.name||null,e.endField=s&&s.name||null}else{const i=t.get(e.startTimeField),s=t.get(e.endTimeField);e.startTimeField=i&&i.name||null,e.endTimeField=s&&s.name||null}}const u=new Set;function g(e,t){return e&&t?(u.clear(),m(u,e,t),Array.from(u).sort()):[]}function m(e,t,i){if(i)if(t?.fields?.length)if(i.includes("*"))for(const{name:s}of t.fields)e.add(s);else for(const s of i)y(e,t,s);else{if(i.includes("*"))return e.clear(),void e.add("*");for(const t of i)e.add(t)}}function y(e,t,i){if("string"==typeof i)if(t){const s=t.get(i);s&&e.add(s.name)}else e.add(i)}function f(e,t){return(0,r.Wi)(t)||(0,r.Wi)(e)?[]:t.includes("*")?e.fields.map((e=>e.name)):t}async function v(e,t,i){if(!i)return;const{arcadeUtils:s}=await(0,o.LC)(),r=s.extractFieldNames(i,t?.fields?.map((e=>e.name)));for(const n of r)y(e,t,n)}async function _(e,t,r){if(r&&"1=1"!==r){const n=(await Promise.all([i.e(8562),i.e(4397)]).then(i.bind(i,48562))).WhereClause.create(r,t);if(!n.isStandardized)throw new s.Z("fieldUtils:collectFilterFields","Where clause is not standardized",{where:r});m(e,t,n.fieldNames)}}function w(e){let{displayField:t,fields:i}=e;return t||(i&&i.length?b(i,"name-or-title")||b(i,"unique-identifier")||b(i,"type-or-category")||function(e){for(const t of e){if(!t||!t.name)continue;const e=t.name.toLowerCase();if(e.includes("name")||e.includes("title"))return t.name}return null}(i):null)}function b(e,t){for(const i of e)if(i&&i.valueType&&i.valueType===t)return i.name;return null}async function C(e,t){if(!t)return;const i=(0,n.hS)("elevationInfo.featureExpressionInfo",t);return i?i.collectRequiredFields(e,t.fieldsIndex):void 0}async function x(e,t,i){if(!t||!i||!("fields"in i))return;const s=[];if(i.popupTemplate?.expressionInfos&&s.push(...i.popupTemplate.expressionInfos.map((i=>v(e,t.fieldsIndex,i.expression)))),Array.isArray(i.popupTemplate?.content)){const r=i.popupTemplate.content;for(const i of r)"expression"===i.type&&i.expressionInfo&&s.push(v(e,t.fieldsIndex,i.expressionInfo.expression))}i.fields&&s.push(...i.fields.map((i=>async function(e,t,i){i.outStatistic.onStatisticValueExpression?v(e,t,i.outStatistic.onStatisticValueExpression):e.add(i.outStatistic.onStatisticField)}(e,t.fieldsIndex,i)))),await Promise.all(s)}async function T(e,t,i){t&&(t.timeInfo&&(0,r.pC)(i)&&i.timeExtent&&m(e,t.fieldsIndex,[t.timeInfo.startField,t.timeInfo.endField]),t.floorInfo&&m(e,t.fieldsIndex,[t.floorInfo.floorField]),(0,r.pC)(i)&&(0,r.pC)(i.where)&&await _(e,t.fieldsIndex,i.where))}async function M(e,t,i){t&&i&&await Promise.all(i.map((i=>async function(e,t,i){t&&i&&(i.valueExpression?await v(e,t.fieldsIndex,i.valueExpression):i.field&&y(e,t.fieldsIndex,i.field))}(e,t,i))))}function S(e){if(!e)return[];const t="editFieldsInfo"in e&&e.editFieldsInfo;return t?g(e.fieldsIndex,[t&&t.creatorField,t&&t.creationDateField,t&&t.editorField,t&&t.editDateField]):[]}function I(e){if(!e)return[];const t=e.geometryFieldsInfo;return t?g(e.fieldsIndex,[t.shapeAreaField,t.shapeLengthField]):[]}async function k(e,t){const{labelingInfo:i,fieldsIndex:s}=t;i&&i.length&&await Promise.all(i.map((t=>async function(e,t,i){if(!i)return;const s=i.getLabelExpression(),r=i.where;if("arcade"===s.type)await v(e,t,s.expression);else{const i=s.expression.match(/{[^}]*}/g);i&&i.forEach((i=>{y(e,t,i.slice(1,-1))}))}await _(e,t,r)}(e,s,t))))}function L(e){const t=e.defaultValue;return void 0!==t&&Z(e,t)?t:e.nullable?null:void 0}function P(e){return"number"==typeof e&&!isNaN(e)&&isFinite(e)}function E(e){return null===e||P(e)}const R="isInteger"in Number?Number.isInteger:e=>"number"==typeof e&&isFinite(e)&&Math.floor(e)===e;function V(e){return null===e||R(e)}function O(e){return null!=e&&"string"==typeof e}function D(e){return null===e||O(e)}function A(){return!0}function Z(e,t){let i;switch(e.type){case"date":case"integer":case"long":case"small-integer":case"esriFieldTypeDate":case"esriFieldTypeInteger":case"esriFieldTypeLong":case"esriFieldTypeSmallInteger":i=e.nullable?V:R;break;case"double":case"single":case"esriFieldTypeSingle":case"esriFieldTypeDouble":i=e.nullable?E:P;break;case"string":case"esriFieldTypeString":i=e.nullable?D:O;break;default:i=A}return 1===arguments.length?i:i(t)}const N=new Set(["integer","small-integer","single","double","esriFieldTypeInteger","esriFieldTypeSmallInteger","esriFieldTypeSingle","esriFieldTypeDouble"]);function G(e){return null!=e&&N.has(e.type)}function F(e){return null!=e&&("string"===e.type||"esriFieldTypeString"===e.type)}function z(e){return null!=e&&("date"===e.type||"esriFieldTypeDate"===e.type)}var B,U;function W(e){return null==e||"number"==typeof e&&isNaN(e)?null:e}function j(e,t){return e.nullable&&null===t?null:G(e)&&!function(e,t){const i="string"==typeof e?q(e):e;return!!i&&(i.isInteger?R(t)&&t>=i.min&&t<=i.max:t>=i.min&&t<=i.max)}(e.type,Number(t))?B.OUT_OF_RANGE:Z(e,t)?e.domain?(0,a.F3)(e.domain,t):null:U.INVALID_TYPE}function H(e){return(0,a.D3)(e.domain)||(G(e)?q(e.type):void 0)}function q(e){switch(e){case"esriFieldTypeSmallInteger":case"small-integer":return Y;case"esriFieldTypeInteger":case"integer":return $;case"esriFieldTypeSingle":case"single":return K;case"esriFieldTypeDouble":case"double":return X}}!function(e){e.OUT_OF_RANGE="numeric-range-validation-error::out-of-range"}(B||(B={})),function(e){e.INVALID_TYPE="type-validation-error::invalid-type"}(U||(U={}));const Y={min:-32768,max:32767,isInteger:!0},$={min:-2147483648,max:2147483647,isInteger:!0},K={min:-34e37,max:12e37,isInteger:!1},X={min:-Number.MAX_VALUE,max:Number.MAX_VALUE,isInteger:!1};function J(e,t,i){switch(e){case a.V$.INVALID_CODED_VALUE:return`Value ${i} is not in the coded domain - field: ${t.name}, domain: ${JSON.stringify(t.domain)}`;case a.V$.VALUE_OUT_OF_RANGE:return`Value ${i} is out of the range of valid values - field: ${t.name}, domain: ${JSON.stringify(t.domain)}`;case U.INVALID_TYPE:return`Value ${i} is not a valid value for the field type - field: ${t.name}, type: ${t.type}, nullable: ${t.nullable}`;case B.OUT_OF_RANGE:{const{min:e,max:s}=q(t.type);return`Value ${i} is out of range for the number type - field: ${t.name}, type: ${t.type}, value range is ${e} to ${s}`}}}function Q(e,t){return!function(e,t,i){if(!t||!t.attributes||!e){if((0,r.pC)(i))for(const t of e)i.add(t);return!0}const s=t.attributes;let n=!1;for(const a of e)if(!(a in s)){if(n=!0,!(0,r.pC)(i))break;i.add(a)}return n}(e,t,null)}function ee(e){return["raster.itempixelvalue","raster.servicepixelvalue"].some((t=>e.toLowerCase().startsWith(t)))}},37933:(e,t,i)=>{function s(e){const t=e?.type;return"imagery-tile"===t||"tile"===t||"open-street-map"===t||"vector-tile"===t||"web-tile"===t||"wmts"===t}function r(e){const t=e?.type;return"base-tile"===t||"tile"===t||"elevation"===t||"imagery-tile"===t||"base-elevation"===t||"open-street-map"===t||"wcs"===t||"web-tile"===t||"wmts"===t||"vector-tile"===t}function n(e){return"feature"===e?.type&&!e.url&&"memory"===e.source?.type}function a(e){return"feature"===e?.type&&"feature-layer"===e.source?.type}function o(e){if(e.activeLayer){const t=e.activeLayer.tileMatrixSet;if(t)return t;const i=e.activeLayer.tileMatrixSets;if(i)return i}return null}i.d(t,{iC:()=>r,mt:()=>o,qq:()=>s,rQ:()=>n,y2:()=>a})},78983:(e,t,i)=>{i.d(t,{J:()=>c});var s=i(27366),r=i(52639),n=(i(32718),i(25243)),a=(i(63780),i(93169),i(75366),i(42017)),o=i(69912),l=i(68748);let c=class extends l.a{_own(e){e.layer&&"remove"in e.layer&&e.layer!==this.owner&&e.layer.remove(e),e.layer=this.owner}_release(e){e.layer===this.owner&&(e.layer=null)}};(0,s._)([(0,a.c)({Type:r.Z,ensureType:(0,n.se)(r.Z)})],c.prototype,"itemType",void 0),c=(0,s._)([(0,o.j)("esri.support.GraphicsCollection")],c)},84938:(e,t,i)=>{i.d(t,{K:()=>u});var s=i(27366),r=i(40281),n=i(60354),a=i(32718),o=i(66978),l=i(49861),c=(i(63780),i(93169),i(25243),i(69912)),h=i(30651);function p(e,t,i){let s,r;if(e)for(let n=0,a=e.length;n<a;n++){if(s=e.getItemAt(n),s[t]===i)return s;if("group"===s?.type&&(r=p(s.layers,t,i),r))return r}}const d=a.Z.getLogger("esri.support.LayersMixin"),u=e=>{let t=class extends e{constructor(){super(...arguments),this.layers=new r.Z;const e=e=>{e.parent=this,this.layerAdded(e),"elevation"!==e.type&&"base-elevation"!==e.type||d.error(`Layer 'title:${e.title}, id:${e.id}' of type '${e.type}' is not supported as an operational layer and will therefore be ignored.`)},t=e=>{e.parent=null,this.layerRemoved(e)};this.layers.on("before-add",(e=>(e=>{e.parent&&"remove"in e.parent&&e.parent.remove(e)})(e.item))),this.layers.on("after-add",(t=>e(t.item))),this.layers.on("after-remove",(e=>t(e.item)))}destroy(){const e=this.layers.removeAll();for(const t of e)this.layerRemoved(t),t.destroy();this.layers.destroy()}set layers(e){this._set("layers",(0,n.Z)(e,this._get("layers")))}add(e,t){const i=this.layers;if(t=i.getNextIndex(t),e instanceof h.Z){const s=e;s.parent===this?this.reorder(s,t):i.add(s,t)}else(0,o.y8)(e)?e.then((e=>{this.destroyed||this.add(e,t)})):d.error("#add()","The item being added is not a Layer or a Promise that resolves to a Layer.")}addMany(e,t){const i=this.layers;t=i.getNextIndex(t),e.slice().forEach((e=>{e.parent!==this?(i.add(e,t),t+=1):this.reorder(e,t)}))}findLayerById(e){return p(this.layers,"id",e)}findLayerByUid(e){return p(this.layers,"uid",e)}remove(e){return this.layers.remove(e)}removeMany(e){return this.layers.removeMany(e)}removeAll(){return this.layers.removeAll()}reorder(e,t){return this.layers.reorder(e,t)}layerAdded(e){}layerRemoved(e){}};return(0,s._)([(0,l.Cb)()],t.prototype,"layers",null),t=(0,s._)([(0,c.j)("esri.support.LayersMixin")],t),t}},16791:(e,t,i)=>{i.d(t,{Q:()=>d});var s=i(27366),r=i(40281),n=i(60354),a=i(32718),o=i(49861),l=(i(63780),i(93169),i(25243),i(69912));const c="esri.support.TablesMixin",h=a.Z.getLogger(c);function p(e,t,i){if(e)for(let s=0,r=e.length;s<r;s++){const r=e.getItemAt(s);if(r[t]===i)return r;if("group"===r?.type){const e=p(r.tables,t,i);if(e)return e}}}const d=e=>{let t=class extends e{constructor(){super(...arguments),this.tables=new r.Z,this.tables.on("after-add",(e=>{const t=e.item;t.parent&&t.parent!==this&&"tables"in t.parent&&t.parent.tables.remove(t),t.parent=this,"feature"!==t.type&&h.error(`Layer 'title:${t.title}, id:${t.id}' of type '${t.type}' is not supported as a table and will therefore be ignored.`)})),this.tables.on("after-remove",(e=>{e.item.parent=null}))}destroy(){const e=this.tables.removeAll();for(const t of e)t.destroy();this.tables.destroy()}set tables(e){this._set("tables",(0,n.Z)(e,this._get("tables")))}findTableById(e){return p(this.tables,"id",e)}findTableByUid(e){return p(this.tables,"uid",e)}};return(0,s._)([(0,o.Cb)()],t.prototype,"tables",null),t=(0,s._)([(0,l.j)(c)],t),t}},57976:(e,t,i)=>{i.d(t,{Z:()=>h});var s,r=i(27366),n=i(85015),a=i(79056),o=i(49861),l=(i(63780),i(93169),i(25243),i(69912));let c=s=class extends((0,a.IG)(n.Z)){constructor(e){super(e),this.active=!1,this.className=null,this.disabled=!1,this.id=null,this.indicator=!1,this.title=null,this.type=null,this.visible=!0}clone(){return new s({active:this.active,className:this.className,disabled:this.disabled,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible})}};(0,r._)([(0,o.Cb)()],c.prototype,"active",void 0),(0,r._)([(0,o.Cb)()],c.prototype,"className",void 0),(0,r._)([(0,o.Cb)()],c.prototype,"disabled",void 0),(0,r._)([(0,o.Cb)()],c.prototype,"id",void 0),(0,r._)([(0,o.Cb)()],c.prototype,"indicator",void 0),(0,r._)([(0,o.Cb)()],c.prototype,"title",void 0),(0,r._)([(0,o.Cb)()],c.prototype,"type",void 0),(0,r._)([(0,o.Cb)()],c.prototype,"visible",void 0),c=s=(0,r._)([(0,l.j)("esri.support.actions.ActionBase")],c);const h=c},6945:(e,t,i)=>{i.d(t,{Z:()=>c});var s,r=i(27366),n=i(49861),a=(i(63780),i(93169),i(25243),i(69912)),o=i(57976);let l=s=class extends o.Z{constructor(e){super(e),this.image=null,this.type="button"}clone(){return new s({active:this.active,className:this.className,disabled:this.disabled,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible,image:this.image})}};(0,r._)([(0,n.Cb)()],l.prototype,"image",void 0),l=s=(0,r._)([(0,a.j)("esri.support.Action.ActionButton")],l);const c=l},9676:(e,t,i)=>{i.d(t,{Z:()=>c});var s,r=i(27366),n=i(49861),a=(i(63780),i(93169),i(25243),i(69912)),o=i(57976);let l=s=class extends o.Z{constructor(e){super(e),this.image=null,this.type="toggle",this.value=!1}clone(){return new s({active:this.active,className:this.className,disabled:this.disabled,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible,image:this.image,value:this.value})}};(0,r._)([(0,n.Cb)()],l.prototype,"image",void 0),(0,r._)([(0,n.Cb)()],l.prototype,"value",void 0),l=s=(0,r._)([(0,a.j)("esri.support.Action.ActionToggle")],l);const c=l},68954:(e,t,i)=>{i.d(t,{g:()=>n,s:()=>a});var s=i(65905),r=i(41201);async function n(e){if(!e)return;const t=e.includes("-vector")?e.slice(0,e.indexOf("-vector")):e,i=await(0,r.ME)("esri/t9n/basemaps");return i[e]||i[t]}const a={streets:{id:"streets",classic:!0,deprecated:!0,get thumbnailUrl(){return(0,s.V)("esri/images/basemap/streets.jpg")},baseMapLayers:[{id:"streets-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Street_Map/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Street Map",showLegend:!1,visibility:!0,opacity:1}]},satellite:{id:"satellite",classic:!0,get thumbnailUrl(){return(0,s.V)("esri/images/basemap/satellite.jpg")},baseMapLayers:[{id:"satellite-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Imagery",showLegend:!1,visibility:!0,opacity:1}]},hybrid:{id:"hybrid",classic:!0,get thumbnailUrl(){return(0,s.V)("esri/images/basemap/hybrid.jpg")},baseMapLayers:[{id:"hybrid-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Imagery",showLegend:!1,visibility:!0,opacity:1},{id:"hybrid-reference-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/30d6b8271e1849cd9c3042060001f425/resources/styles/root.json",layerType:"VectorTileLayer",title:"Hybrid Reference Layer",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},terrain:{id:"terrain",classic:!0,get thumbnailUrl(){return(0,s.V)("esri/images/basemap/terrain.jpg")},baseMapLayers:[{id:"terrain-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Terrain_Base/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Terrain Base",showLegend:!1,visibility:!0,opacity:1},{id:"terrain-reference-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/Reference/World_Reference_Overlay/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Reference Overlay",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},topo:{id:"topo",classic:!0,deprecated:!0,get thumbnailUrl(){return(0,s.V)("esri/images/basemap/topo.jpg")},baseMapLayers:[{id:"topo-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Topo_Map/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Topo Map",showLegend:!1,visibility:!0,opacity:1}]},gray:{id:"gray",classic:!0,deprecated:!0,get thumbnailUrl(){return(0,s.V)("esri/images/basemap/gray.jpg")},baseMapLayers:[{id:"gray-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Light_Gray_Base/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Light Gray Base",showLegend:!1,visibility:!0,opacity:1},{id:"gray-reference-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Light_Gray_Reference/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Light Gray Reference",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},"dark-gray":{id:"dark-gray",classic:!0,deprecated:!0,get thumbnailUrl(){return(0,s.V)("esri/images/basemap/dark-gray.jpg")},baseMapLayers:[{id:"dark-gray-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Dark_Gray_Base/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Dark Gray Base",showLegend:!1,visibility:!0,opacity:1},{id:"dark-gray-reference-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Dark_Gray_Reference/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Dark Gray Reference",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},oceans:{id:"oceans",classic:!0,get thumbnailUrl(){return(0,s.V)("esri/images/basemap/oceans.jpg")},baseMapLayers:[{id:"oceans-base-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Ocean/World_Ocean_Base/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Ocean Base",showLegend:!1,visibility:!0,opacity:1},{id:"oceans-reference-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Ocean/World_Ocean_Reference/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Ocean Reference",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},"national-geographic":{id:"national-geographic",classic:!0,deprecated:!0,get thumbnailUrl(){return(0,s.V)("esri/images/basemap/national-geographic.jpg")},baseMapLayers:[{id:"national-geographic-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/NatGeo_World_Map/MapServer",title:"NatGeo World Map",showLegend:!1,layerType:"ArcGISTiledMapServiceLayer",visibility:!0,opacity:1}]},osm:{id:"osm",classic:!0,get thumbnailUrl(){return(0,s.V)("esri/images/basemap/osm.jpg")},baseMapLayers:[{id:"osm-base-layer",layerType:"OpenStreetMap",title:"Open Street Map",showLegend:!1,visibility:!0,opacity:1}]},"dark-gray-vector":{id:"dark-gray-vector",classic:!0,get thumbnailUrl(){return(0,s.V)("esri/images/basemap/dark-gray-vector.jpg")},baseMapLayers:[{id:"dark-gray-base-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/5e9b3685f4c24d8781073dd928ebda50/resources/styles/root.json",layerType:"VectorTileLayer",title:"Dark Gray Base",visibility:!0,opacity:1},{id:"dark-gray-reference-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/747cb7a5329c478cbe6981076cc879c5/resources/styles/root.json",layerType:"VectorTileLayer",title:"Dark Gray Reference",isReference:!0,visibility:!0,opacity:1}]},"gray-vector":{id:"gray-vector",classic:!0,get thumbnailUrl(){return(0,s.V)("esri/images/basemap/gray-vector.jpg")},baseMapLayers:[{id:"gray-base-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/291da5eab3a0412593b66d384379f89f/resources/styles/root.json",layerType:"VectorTileLayer",title:"Light Gray Base",visibility:!0,opacity:1},{id:"gray-reference-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/1768e8369a214dfab4e2167d5c5f2454/resources/styles/root.json",layerType:"VectorTileLayer",title:"Light Gray Reference",isReference:!0,visibility:!0,opacity:1}]},"streets-vector":{id:"streets-vector",classic:!0,get thumbnailUrl(){return(0,s.V)("esri/images/basemap/streets-vector.jpg")},baseMapLayers:[{id:"streets-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/de26a3cf4cc9451298ea173c4b324736/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Streets",visibility:!0,opacity:1}]},"topo-vector":{id:"topo-vector",classic:!0,get thumbnailUrl(){return(0,s.V)("esri/images/basemap/topo-vector.jpg")},baseMapLayers:[{id:"world-hillshade-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Hillshade",showLegend:!1,visibility:!0,opacity:1},{id:"topo-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/7dc6cea0b1764a1f9af2e679f642f0f5/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Topo",visibility:!0,opacity:1}]},"streets-night-vector":{id:"streets-night-vector",classic:!0,get thumbnailUrl(){return(0,s.V)("esri/images/basemap/streets-night.jpg")},baseMapLayers:[{id:"streets-night-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/86f556a2d1fd468181855a35e344567f/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Streets Night",visibility:!0,opacity:1}]},"streets-relief-vector":{id:"streets-relief-vector",classic:!0,get thumbnailUrl(){return(0,s.V)("esri/images/basemap/streets-relief.jpg")},baseMapLayers:[{id:"world-hillshade-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Hillshade",showLegend:!1,visibility:!0,opacity:1},{id:"streets-relief-vector-base-layer",styleUrl:"//www.arcgis.com/sharing/rest/content/items/b266e6d17fc345b498345613930fbd76/resources/styles/root.json",title:"World Streets Relief",layerType:"VectorTileLayer",visibility:!0,opacity:1}]},"streets-navigation-vector":{id:"streets-navigation-vector",classic:!0,get thumbnailUrl(){return(0,s.V)("esri/images/basemap/streets-navigation.jpg")},baseMapLayers:[{id:"streets-navigation-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/63c47b7177f946b49902c24129b87252/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Streets Navigation",visibility:!0,opacity:1}]},"arcgis-imagery":{get thumbnailUrl(){return(0,s.V)("esri/images/basemap/hybrid.jpg")},title:"Imagery Hybrid",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Imagery",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/World_Imagery/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Imagery:Labels",title:"Hybrid Reference Layer",isReference:!0}]},"arcgis-imagery-standard":{get thumbnailUrl(){return(0,s.V)("esri/images/basemap/satellite.jpg")},title:"Imagery",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Imagery",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/World_Imagery/MapServer"}]},"arcgis-imagery-labels":{title:"Hybrid [Reference]",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Imagery:Labels",title:"Hybrid Reference Layer",isReference:!0}]},"arcgis-light-gray":{get thumbnailUrl(){return(0,s.V)("esri/images/basemap/gray-vector.jpg")},title:"Light Gray Canvas",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:LightGray:Base",title:"Light Gray Canvas Base"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:LightGray:Labels",title:"Light Gray Canvas Labels",isReference:!0}]},"arcgis-dark-gray":{get thumbnailUrl(){return(0,s.V)("esri/images/basemap/dark-gray.jpg")},title:"Dark Gray Canvas",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:DarkGray:Base",title:"Dark Gray Canvas Base"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:DarkGray:Labels",title:"Dark Gray Canvas Labels",isReference:!0}]},"arcgis-navigation":{get thumbnailUrl(){return(0,s.V)("esri/images/basemap/streets-navigation.jpg")},title:"Navigation",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Navigation",title:"World Navigation Map"}]},"arcgis-navigation-night":{title:"Navigation (Dark Mode)",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:NavigationNight",title:"World Navigation Map (Dark Mode)"}]},"arcgis-streets":{get thumbnailUrl(){return(0,s.V)("esri/images/basemap/streets-vector.jpg")},title:"Streets",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Streets",title:"World Street Map"}]},"arcgis-streets-night":{get thumbnailUrl(){return(0,s.V)("esri/images/basemap/streets-night.jpg")},title:"Streets (Night)",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:StreetsNight",title:"World Street Map (Night)"}]},"arcgis-streets-relief":{get thumbnailUrl(){return(0,s.V)("esri/images/basemap/streets-relief.jpg")},title:"Streets (with Relief)",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:StreetsRelief:Base",title:"World Street Map (with Relief)"}]},"arcgis-topographic":{get thumbnailUrl(){return(0,s.V)("esri/images/basemap/topo.jpg")},title:"Topographic",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Topographic:Base",title:"World Topographic Map"}]},"arcgis-oceans":{get thumbnailUrl(){return(0,s.V)("esri/images/basemap/oceans.jpg")},title:"Oceans",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Ocean Base",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Ocean/World_Ocean_Base/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Oceans:Labels",title:"World Ocean Reference",isReference:!0}]},"osm-standard":{title:"OpenStreetMap",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:Standard",title:"OpenStreetMap"}]},"osm-standard-relief":{title:"OpenStreetMap (with relief)",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:StandardRelief:Base",layerType:"VectorTileLayer",title:"OpenStreetMap Relief Base"}]},"osm-streets":{title:"OpenStreetMap (Streets)",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:Streets",title:"OpenStreetMap (Streets)"}]},"osm-streets-relief":{title:"OpenStreetMap (Streets with relief)",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:StreetsRelief:Base",layerType:"VectorTileLayer",title:"OpenStreetMap Relief Base"}]},"osm-light-gray":{title:"OpenStreetMap (Light Gray Canvas)",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:LightGray:Base",title:"OSM (Light Gray Base)"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:LightGray:Labels",title:"OSM (Light Gray Reference)",isReference:!0}]},"osm-dark-gray":{title:"OpenStreetMap (Dark Gray Canvas)",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:DarkGray:Base",title:"OSM (Dark Gray Base)"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:DarkGray:Labels",title:"OSM (Dark Gray Reference)",isReference:!0}]},"arcgis-terrain":{title:"Terrain with Labels",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Terrain:Base",title:"World Terrain Base"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Terrain:Detail",title:"World Terrain Reference",isReference:!0}]},"arcgis-community":{title:"Community",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Community",title:"Community"}]},"arcgis-charted-territory":{title:"Charted Territory",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:ChartedTerritory:Base",title:"Charted Territory"}]},"arcgis-colored-pencil":{title:"Colored Pencil",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:ColoredPencil",title:"Colored Pencil"}]},"arcgis-nova":{title:"Nova",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Nova",title:"Nova"}]},"arcgis-modern-antique":{title:"Modern Antique",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:ModernAntique:Base",title:"Modern Antique"}]},"arcgis-midcentury":{title:"Mid-Century",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Midcentury",title:"Mid-Century"}]},"arcgis-newspaper":{title:"Newspaper",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Newspaper",title:"Newspaper"}]},"arcgis-hillshade-light":{title:"Hillshade",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"}]},"arcgis-hillshade-dark":{title:"Hillshade (Dark)",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade (Dark)",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade_Dark/MapServer"}]}}},30219:(e,t,i)=>{i.d(t,{a:()=>r});var s=i(77178);function r(e){return new s.Z({getCollections:()=>[e.tables,e.layers],getChildrenFunction:e=>{const t=[];return"tables"in e&&t.push(e.tables),"layers"in e&&t.push(e.layers),t},itemFilterFunction:e=>{const t=e.parent;return t&&"tables"in t&&t.tables.includes(e)}})}},67906:(e,t,i)=>{i.d(t,{n:()=>l});var s=i(22213),r=i(53866),n=i(65156),a=i(94618),o=i(73828);class l{constructor(e,t){this.key=new o.Z(0,0,0,0),this.bounds=(0,n.Ue)(),this.objectIds=new Set,this.key.set(t);const i=e.getLODInfoAt(this.key);this.tileInfoView=e,this.tileInfoView.getTileBounds(this.bounds,this.key,!0),this.resolution=i.resolution,this.scale=i.scale,this.level=i.level}get id(){return this.key.id}get extent(){return r.Z.fromBounds(this.bounds,this.tileInfoView.tileInfo.spatialReference)}get transform(){return{originPosition:"upperLeft",scale:[this.resolution,this.resolution],translate:[this.bounds[0],this.bounds[3]]}}createChildTiles(){const e=this.key.getChildKeys(),t=s.Z.acquire();for(let i=0;i<e.length;i++)t[i]=new l(this.tileInfoView,e[i]);return t}getQuantizationParameters(){return a.Z.fromJSON({mode:"view",originPosition:"upperLeft",tolerance:this.resolution,extent:{xmin:this.bounds[0],ymin:this.bounds[1],xmax:this.bounds[2],ymax:this.bounds[3],spatialReference:this.tileInfoView.tileInfo.spatialReference}})}}},62309:(e,t,i)=>{i.d(t,{Z:()=>d});var s=i(91505),r=i(93169),n=i(31581),a=i(67906),o=i(48790),l=i(73828);const c={added:[],removed:[]},h=new Set,p=new l.Z(0,0,0,0);class d extends s.Z{constructor(e){super(),this._tiles=new Map,this._index=(0,n.r)(9,(0,r.Z)("esri-csp-restrictions")?e=>({minX:e.bounds[0],minY:e.bounds[1],maxX:e.bounds[2],maxY:e.bounds[3]}):[".bounds[0]",".bounds[1]",".bounds[2]",".bounds[3]"]),this.tiles=[],this.tileScheme=e}destroy(){this.clear()}clear(){this.tiles.length=0,this._tiles.clear(),this._index.clear()}has(e){return this._tiles.has(e)}get(e){return this._tiles.get(e)}boundsIntersections(e){return this._index.search({minX:e[0],minY:e[1],maxX:e[2],maxY:e[3]})}updateTiles(e){const t={added:[],removed:[]};for(const i of e.added)if(!this.has(i)){const e=new a.n(this.tileScheme,i);this._tiles.set(i,e),this._index.insert(e),t.added.push(e)}for(const i of e.removed)if(this.has(i)){const e=this.get(i);this._tiles.delete(i),this._index.remove(e),t.removed.push(e)}this.tiles.length=0,this._tiles.forEach((e=>this.tiles.push(e))),(t.added.length||t.removed.length)&&this.emit("update",t)}setViewState(e){const t=this.tileScheme.getTileCoverage(e,0);if(!t)return;const{spans:i,lodInfo:s}=t,{level:r}=s;if(i.length>0)for(const{row:n,colFrom:o,colTo:l}of i)for(let e=o;e<=l;e++){const t=p.set(r,n,s.normalizeCol(e),s.getWorldForColumn(e)).id;if(h.add(t),!this.has(t)){const e=new a.n(this.tileScheme,t);this._tiles.set(t,e),this._index.insert(e),this.tiles.push(e),c.added.push(e)}}for(let n=this.tiles.length-1;n>=0;n--){const e=this.tiles[n];h.has(e.id)||(this._tiles.delete(e.id),this.tiles.splice(n,1),this._index.remove(e),c.removed.push(e))}(c.added.length||c.removed.length)&&this.emit("update",c),o.Z.pool.release(t),h.clear(),c.added.length=0,c.removed.length=0}}},84786:(e,t,i)=>{i.d(t,{T:()=>s});class s{constructor(){this._names=new Map}begin(e){this._names.has(e)||(this._names.set(e,!1),(e=>e.includes("Brush"))(e)&&this.record("Esri.FirstDraw"),performance.mark(`Esri.${e}.Start`))}end(e){this._names.has(e)&&!this._names.get(e)&&(this._names.set(e,!0),performance.mark(`Esri.${e}.End`))}record(e){this._names.has(e)||(this._names.set(e,!0),performance.mark(`Esri.${e}`))}}},5131:(e,t,i)=>{var s=i(27366),r=i(85015),n=i(49861),a=(i(63780),i(93169),i(25243),i(69912)),o=i(88396),l=i(38164);const c=new Set,h=[],p=new Map,d=[0,0];let u=class extends r.Z{constructor(e){super(e),this._keyToItem=new Map,this.concurrency=6,this.strategy="scale-first",this.tileInfoView=null}initialize(){const{concurrency:e,process:t}=this;this._queue=new l.e({concurrency:e,process:(e,i)=>{const s=this._keyToItem.get(e);return t(s,{signal:i})},peeker:e=>e.values().next().value})}destroy(){this.clear(),this._queue.destroy(),this._queue=null}get length(){return this._queue?this._queue.length:0}get onGoingCount(){return this._keyToItem.size}get updating(){return this.length>0||this.onGoingCount>0}abort(e){const t="string"==typeof e?e:e.id;this._queue.abort(t)}clear(){this._queue.clear(),this._keyToItem.clear(),this.notifyChange("updating")}has(e){return"string"==typeof e?this._keyToItem.has(e):this._keyToItem.has(e.id)}isOngoing(e){const t="string"==typeof e?e:e.id;return this.has(t)&&this._queue.isOngoing(t)}pause(){this._queue.pause()}push(e,t){const i=e.key.id+"-"+t;if(this.has(i))return this.get(i);const s=this._queue.push(i),r=()=>{this._keyToItem.delete(i),this.notifyChange("updating")};return this._keyToItem.set(i,e),s.then(r,r),this.notifyChange("updating"),s}reset(){this._queue.reset(),this.notifyChange("updating")}resume(){this._queue.resume()}_peekByScaleFirst(e){if(!this.state)return e.values().next().value;const t=this.tileInfoView;let i=Number.NEGATIVE_INFINITY,s=Number.POSITIVE_INFINITY;e.forEach((e=>{const t=this._keyToItem.get(e),r=this.tileInfoView.getTileScale(t.key);p.has(r)||(p.set(r,[]),i=Math.max(r,i),s=Math.min(r,s)),p.get(r).push(t.key),c.add(r)}));let r=this.state.scale;p.has(r)||(function(e,t){e.length=0,t.forEach((t=>e.push(t)))}(h,c),h.sort(((e,t)=>e-t)),r=h.reduce(((e,t)=>Math.abs(t-r)<Math.abs(e-r)?t:e),h[0])),r=Math.min(r,i),r=Math.max(r,s);const n=p.get(r),a=t.getClosestInfoForScale(r),o=a.getColumnForX(this.state.center[0]),l=a.getRowForY(this.state.center[1]);return n.sort(((e,t)=>{const i=a.denormalizeCol(e.col,e.world),s=a.denormalizeCol(t.col,t.world);return Math.sqrt((o-i)*(o-i)+(l-e.row)*(l-e.row))-Math.sqrt((o-s)*(o-s)+(l-t.row)*(l-t.row))})),c.clear(),p.clear(),n[0].id}_peekByCenterFirst(e){if(!this.state)return e.values().next().value;const t=this.tileInfoView,i=this.state.center;let s=Number.POSITIVE_INFINITY,r=null;return e.forEach((e=>{const n=this._keyToItem.get(e);t.getTileCoords(d,n.key);const a=(0,o.j)(d,i);a<s&&(s=a,r=n.key)})),r.id}};(0,s._)([(0,n.Cb)({constructOnly:!0})],u.prototype,"concurrency",void 0),(0,s._)([(0,n.Cb)({constructOnly:!0})],u.prototype,"process",void 0),(0,s._)([(0,n.Cb)()],u.prototype,"state",void 0),(0,s._)([(0,n.Cb)({constructOnly:!0})],u.prototype,"strategy",void 0),(0,s._)([(0,n.Cb)({constructOnly:!0})],u.prototype,"tileInfoView",void 0),(0,s._)([(0,n.Cb)({readOnly:!0})],u.prototype,"updating",null),u=(0,s._)([(0,a.j)("esri.views.2d.tiling.PagedTileQueue")],u)},48790:(e,t,i)=>{i.d(t,{Z:()=>r});var s=i(13005);class r{constructor(){this.spans=[]}acquire(e){this.lodInfo=e}release(){this.lodInfo=null,this.spans.length=0}forEach(e,t){const{spans:i,lodInfo:s}=this,{level:r}=s;if(0!==i.length)for(const{row:n,colFrom:a,colTo:o}of i)for(let i=a;i<=o;i++)e.call(t,r,n,s.normalizeCol(i),s.getWorldForColumn(i))}}r.pool=new s.Z(r)},37995:(e,t,i)=>{i.d(t,{Z:()=>m});var s=i(92975),r=i(92026),n=i(73828);function a(e,t){return[e,t]}function o(e,t,i){return e[0]=t,e[1]=i,e}const l=new n.Z("0/0/0/0");class c{constructor(e,t,i,s,r,n,a,o,l,c,h,p){this.level=e,this.resolution=t,this.scale=i,this.origin=s,this.first=r,this.last=n,this.size=a,this.norm=o,this.worldStart=l,this.worldEnd=c,this.worldSize=h,this.wrap=p}static create(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;const n=(0,s.C5)(e.spatialReference),l=t.origin||a(e.origin.x,e.origin.y),h=a(e.size[0]*t.resolution,e.size[1]*t.resolution),p=a(-1/0,-1/0),d=a(1/0,1/0),u=a(1/0,1/0);(0,r.pC)(i)&&(o(p,Math.max(0,Math.floor((i.xmin-l[0])/h[0])),Math.max(0,Math.floor((l[1]-i.ymax)/h[1]))),o(d,Math.max(0,Math.floor((i.xmax-l[0])/h[0])),Math.max(0,Math.floor((l[1]-i.ymin)/h[1]))),o(u,d[0]-p[0]+1,d[1]-p[1]+1));const{cols:g,rows:m}=t;let y,f,v,_;return!i&&g&&m&&(o(p,g[0],m[0]),o(d,g[1],m[1]),o(u,g[1]-g[0]+1,m[1]-m[0]+1)),e.isWrappable?(y=a(Math.ceil(Math.round((n.valid[1]-n.valid[0])/t.resolution)/e.size[0]),u[1]),f=a(Math.floor((n.origin[0]-l[0])/h[0]),p[1]),v=a(y[0]+f[0]-1,d[1]),_=!0):(f=p,v=d,y=u,_=!1),new c(t.level,t.resolution,t.scale,l,p,d,u,h,f,v,y,_)}normalizeCol(e){if(!this.wrap)return e;const t=this.worldSize[0];return e<0?t-1-Math.abs((e+1)%t):e%t}denormalizeCol(e,t){return this.wrap?this.worldSize[0]*t+e:e}getWorldForColumn(e){return this.wrap?Math.floor(e/this.worldSize[0]):0}getFirstColumnForWorld(e){return e*this.worldSize[0]+this.first[0]}getLastColumnForWorld(e){return e*this.worldSize[0]+this.first[0]+this.size[0]-1}getColumnForX(e){return(e-this.origin[0])/this.norm[0]}getXForColumn(e){return this.origin[0]+e*this.norm[0]}getRowForY(e){return(this.origin[1]-e)/this.norm[1]}getYForRow(e){return this.origin[1]-e*this.norm[1]}getTileBounds(e,t){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];l.set(t);const s=i?l.col:this.denormalizeCol(l.col,l.world),r=l.row;return function(e,t,i,s,r){e[0]=t,e[1]=i,e[2]=s,e[3]=r}(e,this.getXForColumn(s),this.getYForRow(r+1),this.getXForColumn(s+1),this.getYForRow(r)),e}getTileCoords(e,t){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];l.set(t);const s=i?l.col:this.denormalizeCol(l.col,l.world);return Array.isArray(e)?o(e,this.getXForColumn(s),this.getYForRow(l.row)):(e.x=this.getXForColumn(s),e.y=this.getYForRow(l.row)),e}}var h=i(48790);class p{constructor(e,t,i){this.row=e,this.colFrom=t,this.colTo=i}}const d=new n.Z("0/0/0/0");class u{constructor(e,t,i,s,r,n,a,o){this.x=e,this.ymin=t,this.ymax=i,this.invM=s,this.leftAdjust=r,this.rightAdjust=n,this.leftBound=a,this.rightBound=o}static create(e,t){e[1]>t[1]&&([e,t]=[t,e]);const[i,s]=e,[r,n]=t,a=r-i,o=n-s,l=0!==o?a/o:0,c=(Math.ceil(s)-s)*l,h=(Math.floor(s)-s)*l;return new u(i,Math.floor(s),Math.ceil(n),l,a<0?c:h,a<0?h:c,a<0?r:i,a<0?i:r)}incrRow(){this.x+=this.invM}getLeftCol(){return Math.max(this.x+this.leftAdjust,this.leftBound)}getRightCol(){return Math.min(this.x+this.rightAdjust,this.rightBound)}}const g=[[0,0],[0,0],[0,0],[0,0]];class m{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this.tileInfo=e,this.fullExtent=t,this.scales=[],this._lodInfos=null,this._infoByScale={},this._infoByLevel={};const i=e.lods.slice();i.sort(((e,t)=>t.scale-e.scale));const s=this._lodInfos=i.map((i=>c.create(e,i,t)));i.forEach(((e,t)=>{this._infoByLevel[e.level]=s[t],this._infoByScale[e.scale]=s[t],this.scales[t]=e.scale}),this),this._wrap=e.isWrappable}get spatialReference(){return this.tileInfo.spatialReference}getLODInfoAt(e){return this._infoByLevel["number"==typeof e?e:e.level]}getTileBounds(e,t){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];d.set(t);const s=this._infoByLevel[d.level];return s?s.getTileBounds(e,d,i):e}getTileCoords(e,t){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];d.set(t);const s=this._infoByLevel[d.level];return s?s.getTileCoords(e,d,i):e}getTileCoverage(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:192;const i="closest"===(arguments.length>2&&void 0!==arguments[2]?arguments[2]:"closest")?this.getClosestInfoForScale(e.scale):this.getSmallestInfoForScale(e.scale),s=h.Z.pool.acquire(i),r=this._wrap;let n,a,o,l=1/0,c=-1/0;const d=s.spans;g[0][0]=g[0][1]=g[1][1]=g[3][0]=-t,g[1][0]=g[2][0]=e.size[0]+t,g[2][1]=g[3][1]=e.size[1]+t;for(const h of g)e.toMap(h,h),h[0]=i.getColumnForX(h[0]),h[1]=i.getRowForY(h[1]);const m=[];let y=3;for(let h=0;h<4;h++){if(g[h][1]===g[y][1]){y=h;continue}const e=u.create(g[h],g[y]);l=Math.min(e.ymin,l),c=Math.max(e.ymax,c),void 0===m[e.ymin]&&(m[e.ymin]=[]),m[e.ymin].push(e),y=h}if(null==l||null==c||c-l>100)return null;let f=[];for(n=l;n<c;){null!=m[n]&&(f=f.concat(m[n])),a=1/0,o=-1/0;for(let e=f.length-1;e>=0;e--){const t=f[e];a=Math.min(a,t.getLeftCol()),o=Math.max(o,t.getRightCol())}if(a=Math.floor(a),o=Math.floor(o),n>=i.first[1]&&n<=i.last[1])if(r)if(i.size[0]<i.worldSize[0]){const e=Math.floor(o/i.worldSize[0]);for(let t=Math.floor(a/i.worldSize[0]);t<=e;t++)d.push(new p(n,Math.max(i.getFirstColumnForWorld(t),a),Math.min(i.getLastColumnForWorld(t),o)))}else d.push(new p(n,a,o));else a>i.last[0]||o<i.first[0]||(a=Math.max(a,i.first[0]),o=Math.min(o,i.last[0]),d.push(new p(n,a,o)));n+=1;for(let e=f.length-1;e>=0;e--){const t=f[e];t.ymax>=n?t.incrRow():f.splice(e,1)}}return s}getTileParentId(e){d.set(e);const t=this._infoByLevel[d.level],i=this._lodInfos.indexOf(t)-1;return i<0?null:(this._getTileIdAtLOD(d,this._lodInfos[i],d),d.id)}getTileResolution(e){const t=this._infoByLevel["object"==typeof e?e.level:e];return t?t.resolution:-1}getTileScale(e){const t=this._infoByLevel[e.level];return t?t.scale:-1}intersects(e,t){d.set(t);const i=this._infoByLevel[d.level],s=e.lodInfo;if(s.resolution>i.resolution){this._getTileIdAtLOD(d,s,d);const t=s.denormalizeCol(d.col,d.world);for(const i of e.spans)if(i.row===d.row&&i.colFrom<=t&&i.colTo>=t)return!0}if(s.resolution<i.resolution){const[t,r,n,a]=e.spans.reduce(((e,t)=>(e[0]=Math.min(e[0],t.row),e[1]=Math.max(e[1],t.row),e[2]=Math.min(e[2],t.colFrom),e[3]=Math.max(e[3],t.colTo),e)),[1/0,-1/0,1/0,-1/0]),o=i.denormalizeCol(d.col,d.world),l=s.getColumnForX(i.getXForColumn(o)),c=s.getRowForY(i.getYForRow(d.row)),h=s.getColumnForX(i.getXForColumn(o+1))-1,p=s.getRowForY(i.getYForRow(d.row+1))-1;return!(l>a||h<n||c>r||p<t)}const r=s.denormalizeCol(d.col,d.world);return e.spans.some((e=>e.row===d.row&&e.colFrom<=r&&e.colTo>=r))}normalizeBounds(e,t,i){if(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],this._wrap){const t=(0,s.C5)(this.tileInfo.spatialReference),r=-i*(t.valid[1]-t.valid[0]);e[0]+=r,e[2]+=r}return e}getSmallestInfoForScale(e){const t=this.scales;if(this._infoByScale[e])return this._infoByScale[e];if(e>t[0])return this._infoByScale[t[0]];for(let i=1;i<t.length-1;i++)if(e>t[i]+1e-6)return this._infoByScale[t[i-1]];return this._infoByScale[t[t.length-1]]}getClosestInfoForScale(e){const t=this.scales;return this._infoByScale[e]||(e=t.reduce(((t,i)=>Math.abs(i-e)<Math.abs(t-e)?i:t),t[0])),this._infoByScale[e]}scaleToLevel(e){const t=this.scales;if(this._infoByScale[e])return this._infoByScale[e].level;for(let i=t.length-1;i>=0;i--)if(e<t[i])return i===t.length-1?this._infoByScale[t[t.length-1]].level:this._infoByScale[t[i]].level+(t[i]-e)/(t[i]-t[i+1]);return this._infoByScale[t[0]].level}scaleToZoom(e){return this.tileInfo.scaleToZoom(e)}_getTileIdAtLOD(e,t,i){const s=this._infoByLevel[i.level];return e.set(i),t.resolution<s.resolution?null:(t.resolution===s.resolution||(e.level=t.level,e.col=Math.floor(i.col*s.resolution/t.resolution+.01),e.row=Math.floor(i.row*s.resolution/t.resolution+.01)),e)}}},73828:(e,t,i)=>{i.d(t,{Z:()=>r});var s=i(13005);class r{constructor(e,t,i,s){this.set(e,t,i,s)}static getId(e,t,i,s){return"object"==typeof e?`${e.level}/${e.row}/${e.col}/${e.world}`:`${e}/${t}/${i}/${s}`}get key(){return this}get id(){return this.toString()}set id(e){this.set(e)}get hash(){const e=4095&this.row,t=4095&this.col,i=63&this.level;return(3&this.world)<<30|t<<22|e<<8|i}acquire(e,t,i,s){this.set(e,t,i,s)}contains(e){const t=e.level-this.level;return this.row===e.row>>t&&this.col===e.col>>t&&this.world===e.world}equals(e){return this.level===e.level&&this.row===e.row&&this.col===e.col&&this.world===e.world}clone(){return new r(this)}release(){this.level=0,this.row=0,this.col=0,this.world=0}set(e,t,i,s){if(null==e)this.level=0,this.row=0,this.col=0,this.world=0;else if("object"==typeof e)this.level=e.level||0,this.row=e.row||0,this.col=e.col||0,this.world=e.world||0;else if("string"==typeof e){const[t,i,s,r]=e.split("/");this.level=parseFloat(t),this.row=parseFloat(i),this.col=parseFloat(s),this.world=parseFloat(r)}else this.level=+e,this.row=+t,this.col=+i,this.world=+s||0;return this}toString(){return`${this.level}/${this.row}/${this.col}/${this.world}`}getParentKey(){return this.level<=0?null:new r(this.level-1,this.row>>1,this.col>>1,this.world)}getChildKeys(){const e=this.level+1,t=this.row<<1,i=this.col<<1,s=this.world;return[new r(e,t,i,s),new r(e,t,i+1,s),new r(e,t+1,i,s),new r(e,t+1,i+1,s)]}compareRowMajor(e){return this.row<e.row?-1:this.row>e.row?1:this.col<e.col?-1:this.col>e.col?1:0}}r.pool=new s.Z(r,null,null,25,50)},32344:(e,t,i)=>{i.d(t,{Z:()=>g});var s=i(27366),r=i(85015),n=i(49861),a=(i(63780),i(93169),i(25243),i(69912)),o=i(88396),l=i(38164);const c=new Set,h=[],p=new Map,d=[0,0];let u=class extends r.Z{constructor(e){super(e),this._keyToItem=new Map,this.concurrency=6,this.strategy="scale-first",this.tileInfoView=null}initialize(){const{concurrency:e,process:t,strategy:i}=this;this._queue=new l.e({concurrency:e,process:(e,i)=>{const s=this._keyToItem.get(e);return t(s,{signal:i})},peeker:"scale-first"===i?e=>this._peekByScaleFirst(e):e=>this._peekByCenterFirst(e)})}destroy(){this.clear(),this._queue.destroy(),this._queue=null}get length(){return this._queue?this._queue.length:0}get onGoingCount(){return this._keyToItem.size}get updating(){return this.length>0||this.onGoingCount>0}abort(e){const t="string"==typeof e?e:e.id;this._queue.abort(t)}clear(){this._queue.clear(),this._keyToItem.clear(),this.notifyChange("updating")}has(e){return"string"==typeof e?this._keyToItem.has(e):this._keyToItem.has(e.id)}isOngoing(e){const t="string"==typeof e?e:e.id;return this.has(t)&&this._queue.isOngoing(t)}pause(){this._queue.pause()}push(e){const t=e.key.id;if(this._queue.has(t))return this._queue.get(t);const i=this._queue.push(t),s=()=>{this._keyToItem.delete(t),this.notifyChange("updating")};return this._keyToItem.set(t,e),i.then(s,s),this.notifyChange("updating"),i}reset(){this._queue.reset()}resume(){this._queue.resume()}_peekByScaleFirst(e){if(!this.state)return e.values().next().value;const t=this.tileInfoView;let i=Number.NEGATIVE_INFINITY,s=Number.POSITIVE_INFINITY;e.forEach((e=>{const t=this._keyToItem.get(e),r=this.tileInfoView.getTileScale(t.key);p.has(r)||(p.set(r,[]),i=Math.max(r,i),s=Math.min(r,s)),p.get(r).push(t.key),c.add(r)}));let r=this.state.scale;p.has(r)||(function(e,t){e.length=0,t.forEach((t=>e.push(t)))}(h,c),h.sort(((e,t)=>e-t)),r=h.reduce(((e,t)=>Math.abs(t-r)<Math.abs(e-r)?t:e),h[0])),r=Math.min(r,i),r=Math.max(r,s);const n=p.get(r),a=t.getClosestInfoForScale(r),o=a.getColumnForX(this.state.center[0]),l=a.getRowForY(this.state.center[1]);return n.sort(((e,t)=>{const i=a.denormalizeCol(e.col,e.world),s=a.denormalizeCol(t.col,t.world);return Math.sqrt((o-i)*(o-i)+(l-e.row)*(l-e.row))-Math.sqrt((o-s)*(o-s)+(l-t.row)*(l-t.row))})),c.clear(),p.clear(),n[0].id}_peekByCenterFirst(e){if(!this.state)return e.values().next().value;const t=this.tileInfoView,i=this.state.center;let s=Number.POSITIVE_INFINITY,r=null;return e.forEach((e=>{const n=this._keyToItem.get(e);t.getTileCoords(d,n.key);const a=(0,o.j)(d,i);a<s&&(s=a,r=n.key)})),r.id}};(0,s._)([(0,n.Cb)({constructOnly:!0})],u.prototype,"concurrency",void 0),(0,s._)([(0,n.Cb)({constructOnly:!0})],u.prototype,"process",void 0),(0,s._)([(0,n.Cb)()],u.prototype,"state",void 0),(0,s._)([(0,n.Cb)({constructOnly:!0})],u.prototype,"strategy",void 0),(0,s._)([(0,n.Cb)({constructOnly:!0})],u.prototype,"tileInfoView",void 0),(0,s._)([(0,n.Cb)({readOnly:!0})],u.prototype,"updating",null),u=(0,s._)([(0,a.j)("esri.views.2d.tiling.TileQueue")],u);const g=u},85269:(e,t,i)=>{i.d(t,{Z:()=>d});var s=i(65156),r=i(88396);class n{constructor(e,t,i){this.maxSize=e,this.tileInfoView=t,this.removedFunc=i,this._tilePerId=new Map,this._tileKeysPerLevel=[]}has(e){return this._tilePerId.has(e)}get(e){return this._tilePerId.get(e)}pop(e){const t=this._tilePerId.get(e);if(!t)return null;const i=t.key.level,s=this._tileKeysPerLevel[i];a(this._tilePerId,e);for(let r=0;r<s.length;r++)if(s[r].id===e){s.splice(r,1);break}return t.visible=!0,t}add(e){e.visible=!1;const t=e.key,i=t.id;if(this._tilePerId.has(i))return;this._tilePerId.set(i,e);const s=t.level;this._tileKeysPerLevel[s]||(this._tileKeysPerLevel[s]=[]),this._tileKeysPerLevel[s].push(t)}prune(e,t,i){let s=this._tilePerId.size;if(s<=this.maxSize)return;let r=this._tileKeysPerLevel.length-1;for(;s>this.maxSize&&r>=0;)r!==e&&(s=this._pruneAroundCenterTile(s,t,i,r)),r--;s>this.maxSize&&(s=this._pruneAroundCenterTile(s,t,i,e))}_pruneAroundCenterTile(e,t,i,s){const n=this._tileKeysPerLevel[s];if(!n||0===n.length)return e;const{size:a,origin:o}=this.tileInfoView.tileInfo,l=i*a[0],c=i*a[1],h=[0,0],p=[0,0];for(n.sort(((e,i)=>(h[0]=o.x+l*(e.col+.5),h[1]=o.y-c*(e.row+.5),p[0]=o.x+l*(i.col+.5),p[1]=o.y-c*(i.row+.5),(0,r.s)(h,t)-(0,r.s)(p,t))));n.length>0;){const t=n.pop();if(this._removeTile(t.id),--e===this.maxSize)break}return e}_removeTile(e){const t=this._tilePerId.get(e);this.removedFunc&&this.removedFunc(t),a(this._tilePerId,e)}}function a(e,t){e.delete(t)}var o=i(48790);const l=new(i(73828).Z)(0,0,0,0),c=new Map,h=[],p=[];class d{constructor(e){this._previousScale=Number.POSITIVE_INFINITY,this.cachePolicy="keep",this.coveragePolicy="closest",this.resampling=!0,this.tileIndex=new Map,this.tiles=[],this.buffer=192,this.acquireTile=e.acquireTile,this.releaseTile=e.releaseTile,this.tileInfoView=e.tileInfoView,this.resampling=null==e.resampling||!!e.resampling,e.cachePolicy&&(this.cachePolicy=e.cachePolicy),e.coveragePolicy&&(this.coveragePolicy=e.coveragePolicy),null!=e.buffer&&(this.buffer=e.buffer),e.cacheSize&&(this._tileCache=new n(e.cacheSize,this.tileInfoView,(e=>{this.releaseTile(e)})))}destroy(){this.tileIndex.clear()}update(e){const{resampling:t,tileIndex:i}=this,s=this.tileInfoView.getTileCoverage(e.state,this.buffer,this.coveragePolicy);if(p.length=0,h.length=0,c.clear(),!s)return;const{minScale:r,maxScale:n}=this.tileInfoView.tileInfo,{spans:a,lodInfo:d}=s,{level:u}=d,{scale:g,center:m,resolution:y}=e.state,f=!e.stationary&&g>this._previousScale;if(this._previousScale=g,this.tiles.length=0,!t&&(g>r||g<n))return this.tiles.length=0,c.clear(),i.forEach((e=>{this.releaseTile(e)})),i.clear(),p.length=0,h.length=0,c.clear(),o.Z.pool.release(s),!0;i.forEach((e=>e.visible=!0));let v=0,_=0;if(a.length>0)for(const{row:o,colFrom:h,colTo:p}of a)for(let e=h;e<=p;e++){v++;const t=l.set(u,o,d.normalizeCol(e),d.getWorldForColumn(e)).id;if(i.has(t)){const e=i.get(t);e.isReady?(c.set(t,e),_++):f||this._addParentTile(t,c)}else{let e;if(this._tileCache&&this._tileCache.has(t)){if(e=this._tileCache.pop(t),this.tileIndex.set(t,e),e.isReady){c.set(t,e),_++;continue}}else e=this.acquireTile(l),this.tileIndex.set(t,e);f||this._addParentTile(t,c)}}const w=_===v;i.forEach(((e,t)=>{if(l.set(t),c.has(t))return;const i=this.tileInfoView.intersects(s,l),r="purge"===this.cachePolicy?l.level!==u:l.level>u;!i||!f&&w?!r&&i||h.push(t):e.isReady?r&&"purge"===this.cachePolicy&&this._hasReadyAncestor(l,u)?h.push(t):p.push(t):r&&h.push(t)}));for(const o of p){const e=i.get(o);e&&e.isReady&&c.set(o,e)}for(const o of h){const e=i.get(o);this._tileCache?this._tileCache.add(e):this.releaseTile(e),i.delete(o)}return c.forEach((e=>this.tiles.push(e))),i.forEach((e=>{c.has(e.key.id)||(e.visible=!1)})),this._tileCache&&this._tileCache.prune(u,m,y),o.Z.pool.release(s),c.clear(),w}clear(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];const{tileIndex:t}=this;e&&t.forEach((e=>{this.releaseTile(e)})),t.clear()}updateCacheSize(e){this._tileCache&&(this._tileCache.maxSize=e)}_addParentTile(e,t){let i=e,s=null;for(;i=this.tileInfoView.getTileParentId(i),i;)if(this.tileIndex.has(i)){if(s=this.tileIndex.get(i),s&&s.isReady){t.has(s.key.id)||t.set(s.key.id,s);break}}else if(this._tileCache&&this._tileCache.has(i)&&(s=this._tileCache.pop(i),this.tileIndex.set(i,s),s&&s.isReady)){t.has(s.key.id)||t.set(s.key.id,s);break}}_hasReadyAncestor(e,t){const i=(0,s.Ue)();this.tileInfoView.getTileBounds(i,e,!0);for(const r of this.tileIndex.values())if(r.isReady&&r.key.level>=t&&r.key.level<e.level){const e=(0,s.Ue)();if(this.tileInfoView.getTileBounds(e,r.key,!0),(0,s.r3)(e,i))return!0}return!1}}},53942:(e,t,i)=>{function s(e,t,i,s){const r=3*e,n=3*(i-e)-r,a=1-r-n,o=3*t,l=3*(s-t)-o,c=1-o-l;function h(e){return((a*e+n)*e+r)*e}function p(e){return((c*e+l)*e+o)*e}function d(e){return(3*a*e+2*n)*e+r}function u(e,t){let i,s,r,n,a,o;for(r=e,o=0;o<8;o++){if(n=h(r)-e,Math.abs(n)<t)return r;if(a=d(r),Math.abs(a)<1e-6)break;r-=n/a}if(i=0,s=1,r=e,r<i)return i;if(r>s)return s;for(;i<s;){if(n=h(r),Math.abs(n-e)<t)return r;e>n?i=r:s=r,r=.5*(s-i)+i}return r}return function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e-6;return p(u(e,t))}}i.d(t,{LI:()=>n,Qc:()=>a,n_:()=>s});const r=/^cubic-bezier\((.*)\)/,n={};function a(e){let t=n[e]||null;if(!t){const i=r.exec(e);if(i){const e=i[1].split(",").map((e=>parseFloat(e.trim())));4!==e.length||e.some((e=>isNaN(e)))||(t=s.apply(s,e))}}return t}n.ease=s(.25,.1,.25,1),n.linear=s(0,0,1,1),n.easeIn=n["ease-in"]=s(.42,0,1,1),n.easeOut=n["ease-out"]=s(0,0,.58,1),n.easeInOut=n["ease-in-out"]=s(.42,0,.58,1)},86226:(e,t,i)=>{i.d(t,{$H:()=>W,Ck:()=>A,Dq:()=>E,EK:()=>x,H4:()=>z,Hy:()=>q,JG:()=>I,Jp:()=>Z,L2:()=>G,Rb:()=>D,Rx:()=>J,SI:()=>U,UZ:()=>Y,Ue:()=>S,YQ:()=>j,bk:()=>L,dI:()=>F,gG:()=>$,ni:()=>k,o2:()=>B,qf:()=>P,uG:()=>V,ut:()=>N});var s=i(13894),r=i(40281),n=i(92026),a=i(68860),o=i(26277),l=i(22018),c=i(89494),h=i(88396),p=i(6394),d=i(53866),u=i(32238),g=i(7882),m=i(79803),y=i(78952),f=i(92975);const v=39.37,_=180/Math.PI;function w(e){return e.wkid?e:e.spatialReference||y.Z.WGS84}function b(e,t){return t.type?(0,h.a)(e,t.x,t.y):(0,h.c)(e,t)}function C(e){return(0,a.c9)(e)}function x(e,t){const i=Math.max(1,t[0]),s=Math.max(1,t[1]);return Math.max(e.width/i,e.height/s)*function(e){return(0,f.JY)(e)?C(e)*v*96:1}(e.spatialReference)}async function T(e,t,i,s){let a,o;if(!e)return null;if(Array.isArray(e)&&!e.length)return null;if(r.Z.isCollection(e)&&(e=e.toArray()),Array.isArray(e)&&e.length&&"object"==typeof e[0]){const r=e.every((e=>"attributes"in e)),a=e.some((e=>!e.geometry));let o=e;if(r&&a&&t&&t.allLayerViews){const i=new Map;for(const t of e){const e=t.layer,s=i.get(e)||[],r=t.attributes[e.objectIdField];null!=r&&s.push(r),i.set(e,s)}const s=[];i.forEach(((e,i)=>{const r=t.allLayerViews.find((e=>e.layer.id===i.id));if("queryFeatures"in r){const t=i.createQuery();t.objectIds=e,t.returnGeometry=!0,s.push(r.queryFeatures(t))}}));const r=await Promise.all(s),a=[];for(const e of r)if(e&&e.features&&e.features.length)for(const t of e.features)(0,n.pC)(t.geometry)&&a.push(t.geometry);o=a}for(const e of o)s=await T(e,t,i,s);return s}if(Array.isArray(e)&&2===e.length&&"number"==typeof e[0]&&"number"==typeof e[1])a=new g.Z(e);else if(e instanceof u.Z)a=e;else if("geometry"in e)if(e.geometry)a=e.geometry;else if(e.layer){const i=e.layer,s=t.allLayerViews.find((e=>e.layer.id===i.id));if("queryFeatures"in s){const t=i.createQuery();t.objectIds=[e.attributes[i.objectIdField]],t.returnGeometry=!0;const r=await s.queryFeatures(t);a=(0,n.U2)(r,"features",0,"geometry")}}if((0,n.Wi)(a))return null;if(o="point"===a.type?new d.Z({xmin:a.x,ymin:a.y,xmax:a.x,ymax:a.y,spatialReference:a.spatialReference}):a.extent,!o)return null;(0,m.kR)()||(0,m.Up)(o.spatialReference,i)||await(0,m.zD)();const l=(0,m.iV)(o,i);return l?s=s?s.union(l):l:null}function M(e,t){return(0,f.fS)(w(e),t)?e:(0,m.iV)(e,t)}async function S(e,t){if(!e||!t)return new s.Z({targetGeometry:new g.Z,scale:0,rotation:0});let i=t.spatialReference;const{constraints:r,padding:a,viewpoint:o,size:l}=t,c=[a?l[0]-a.left-a.right:l[0],a?l[1]-a.top-a.bottom:l[1]];let h=null;e instanceof s.Z?h=e:e.viewpoint?h=e.viewpoint:e.target&&"esri.Viewpoint"===e.target.declaredClass&&(h=e.target);let p=null;h&&h.targetGeometry?p=h.targetGeometry:e instanceof d.Z?p=e:(e||e&&("center"in e||"extent"in e||"target"in e))&&(p=await T(e.center,t,i)||await T(e.extent,t,i)||await T(e.target,t,i)||await T(e,t,i)),!p&&o&&o.targetGeometry?p=o.targetGeometry:!p&&t.extent&&(p=t.extent),i||(i=w(t.spatialReference||t.extent||p)),(0,m.kR)()||(0,f.fS)(p.spatialReference,i)||(0,m.Up)(p,i)||await(0,m.zD)();const u=M(p.center?p.center:p,i);let y=null;if(h&&(0,n.pC)(h.targetGeometry)&&"point"===h.targetGeometry.type)y=h.scale;else if("scale"in e&&e.scale)y=e.scale;else if("zoom"in e&&-1!==e.zoom&&r&&r.effectiveLODs)y=r.zoomToScale(e.zoom);else if(Array.isArray(p)||"point"===p.type||"extent"===p.type&&0===p.width&&0===p.height){const e=M(t.extent,i);y=(0,n.pC)(e)?x(e,c):t.extent?x(t.extent,c):o.scale}else y=x(M(p.extent,i),c);const v=function(e){if(e&&(!Array.isArray(e)||"number"!=typeof e[0])&&("object"==typeof e||Array.isArray(e)&&"object"==typeof e[0])){if("layer"in e&&e.layer&&e.layer.minScale&&e.layer.maxScale){const t=e.layer;return{min:t.minScale,max:t.maxScale}}if(Array.isArray(e)&&e.length&&e.every((e=>"layer"in e))){let t=0,i=0;for(const s of e){const e=s.layer;e&&e.minScale&&e.maxScale&&(t=e.minScale<t?e.minScale:t,i=e.maxScale>i?e.maxScale:i)}return t&&i?{min:t,max:i}:null}}}(e);v&&(v.min&&v.min>y?y=v.min:v.max&&v.max<y&&(y=v.max));let _=0;h?_=h.rotation:e.hasOwnProperty("rotation")?_=e.rotation:o&&(_=o.rotation);let b=new s.Z({targetGeometry:u,scale:y,rotation:_});return r&&(b=r.fit(b),r.constrainByGeometry(b),r.rotationEnabled||(b.rotation=_)),b}function I(e,t){const i=e.targetGeometry,s=t.targetGeometry;return i.x=s.x,i.y=s.y,i.spatialReference=s.spatialReference,e.scale=t.scale,e.rotation=t.rotation,e}function k(e,t,i){return i?(0,h.a)(e,.5*(t[0]-i.right+i.left),.5*(t[1]-i.bottom+i.top)):(0,h.f)(e,t,.5)}const L=function(){const e=(0,p.a)();return function(t,i,s){const r=i.targetGeometry;b(e,r);const n=.5*V(i);return t.xmin=e[0]-n*s[0],t.ymin=e[1]-n*s[1],t.xmax=e[0]+n*s[0],t.ymax=e[1]+n*s[1],t.spatialReference=r.spatialReference,t}}();function P(e,t,i,s,r){return B(e,t,i.center),e.scale=x(i,s),r&&r.constraints&&r.constraints.constrain(e),e}const E=function(){const e=(0,p.a)();return function(t,i,s){return(0,h.k)(t,function(e,t){return(0,h.f)(e,t,.5)}(t,i),k(e,i,s))}}(),R=function(){const e=(0,c.c)(),t=(0,p.a)();return function(i,s,r,n){const a=V(s),o=O(s);return(0,h.a)(t,a,a),(0,l.f)(e,t),(0,l.r)(e,e,o),(0,l.t)(e,e,E(t,r,n)),(0,l.t)(e,e,[0,n.top-n.bottom]),(0,h.a)(i,e[4],e[5])}}();function V(e){return e.scale*function(e){return(0,n.pC)(e)&&(0,f.JY)(e.spatialReference)?1/(C(e.spatialReference)*v*96):1}(e.targetGeometry)}function O(e){return(0,o.t)(e.rotation)||0}const D=function(){const e=(0,p.a)(),t=(0,p.a)(),i=(0,p.a)();return function(s,r,n,a,o,c){return(0,h.n)(e,r),(0,h.f)(t,n,.5*c),(0,h.a)(i,1/a*c,-1/a*c),(0,l.a)(s,t),o&&(0,l.r)(s,s,o),(0,l.s)(s,s,i),(0,l.t)(s,s,e),s}}(),A=function(){const e=(0,p.a)();return function(t,i,s,r){const n=V(i),a=O(i);return b(e,i.targetGeometry),D(t,e,s,n,a,r)}}(),Z=function(){const e=(0,p.a)();return function(t,i,s,r){const n=V(i);return b(e,i.targetGeometry),D(t,e,s,n,0,r)}}();function N(e){const t=(0,f.C5)(e);return t?t.valid[1]-t.valid[0]:0}function G(e,t){return Math.round(N(e)/t)}const F=function(){const e=(0,p.a)(),t=(0,p.a)(),i=[0,0,0];return function(s,r,n){(0,h.g)(e,s,r),(0,h.i)(e,e),(0,h.g)(t,s,n),(0,h.i)(t,t),(0,h.m)(i,e,t);let a=Math.acos((0,h.h)(e,t)/((0,h.o)(e)*(0,h.o)(t)))*_;return i[2]<0&&(a=-a),isNaN(a)&&(a=0),a}}(),z=function(){const e=(0,p.a)();return function(t,i,s,r){const n=t.targetGeometry;return I(t,i),R(e,i,s,r),n.x+=e[0],n.y+=e[1],t}}(),B=function(e,t,i){I(e,t);const s=e.targetGeometry;return s.x=i.x,s.y=i.y,s.spatialReference=i.spatialReference,e},U=function(){const e=(0,p.a)();return function(t,i,s,r,n){n||(n="center"),(0,h.k)(e,s,r),(0,h.f)(e,e,.5);const a=e[0],o=e[1];switch(n){case"center":(0,h.a)(e,0,0);break;case"left":(0,h.a)(e,-a,0);break;case"top":(0,h.a)(e,0,o);break;case"right":(0,h.a)(e,a,0);break;case"bottom":(0,h.a)(e,0,-o);break;case"top-left":(0,h.a)(e,-a,o);break;case"bottom-left":(0,h.a)(e,-a,-o);break;case"top-right":(0,h.a)(e,a,o);break;case"bottom-right":(0,h.a)(e,a,-o)}return J(t,i,e),t}}();function W(e,t,i){return I(e,t),e.rotation+=i,e}function j(e,t,i){return I(e,t),e.rotation=i,e}const H=function(){const e=(0,p.a)();return function(t,i,s,r,n){return I(t,i),isNaN(s)||0===s||(K(e,r,i,n),t.scale=i.scale*s,X(e,e,t,n),J(t,t,(0,h.a)(e,e[0]-r[0],r[1]-e[1]))),t}}();function q(e,t,i){return I(e,t),e.scale=i,e}const Y=function(){const e=(0,p.a)();return function(t,i,s,r,n,a){return I(t,i),isNaN(s)||0===s||(K(e,n,i,a),t.scale=i.scale*s,t.rotation+=r,X(e,e,t,a),J(t,t,(0,h.a)(e,e[0]-n[0],n[1]-e[1]))),t}}(),$=function(){const e=(0,p.a)(),t=(0,p.a)();return function(i,s,r,n,a,o,l){return E(t,o,l),(0,h.b)(e,a,t),n?Y(i,s,r,n,e,o):H(i,s,r,e,o)}}(),K=function(){const e=(0,c.c)();return function(t,i,s,r){return(0,h.t)(t,i,function(e,t,i,s){return A(e,t,i,s),(0,l.b)(e,e)}(e,s,r,1))}}(),X=function(){const e=(0,c.c)();return function(t,i,s,r){return(0,h.t)(t,i,A(e,s,r,1))}}(),J=function(){const e=(0,p.a)(),t=(0,c.c)();return function(i,s,r){I(i,s);const n=V(s),a=i.targetGeometry;return(0,l.c)(t,O(s)),(0,l.s)(t,t,(0,p.f)(n,n)),(0,h.t)(e,r,t),a.x+=e[0],a.y+=e[1],i}}()},9337:(e,t,i)=>{i.d(t,{Z:()=>qr});var s=i(27366),r=i(52639),n=i(13894),a=i(40281),o=i(77178),l=i(10064),c=i(93169),h=i(83704),p=i(32718),d=i(92026),u=i(66978),g=i(94172),m=i(17842),y=i(51370),f=i(31009),v=i(49861),_=(i(63780),i(25243),i(69912)),w=i(53866),b=i(7882),C=i(79803),x=i(92975),T=i(22824),M=i(22213),S=i(100);const I={widthBreakpoint:{getValue(e){const t=e.viewSize[0],i=e.breakpoints,s=this.values;return t<=i.xsmall?s.xsmall:t<=i.small?s.small:t<=i.medium?s.medium:t<=i.large?s.large:s.xlarge},values:{xsmall:"xsmall",small:"small",medium:"medium",large:"large",xlarge:"xlarge"},valueToClassName:{xsmall:"esri-view-width-xsmall esri-view-width-less-than-small esri-view-width-less-than-medium esri-view-width-less-than-large esri-view-width-less-than-xlarge",small:"esri-view-width-small esri-view-width-greater-than-xsmall esri-view-width-less-than-medium esri-view-width-less-than-large esri-view-width-less-than-xlarge",medium:"esri-view-width-medium esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-less-than-large esri-view-width-less-than-xlarge",large:"esri-view-width-large esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-greater-than-medium esri-view-width-less-than-xlarge",xlarge:"esri-view-width-xlarge esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-greater-than-medium esri-view-width-greater-than-large"}},heightBreakpoint:{getValue(e){const t=e.viewSize[1],i=e.breakpoints,s=this.values;return t<=i.xsmall?s.xsmall:t<=i.small?s.small:t<=i.medium?s.medium:t<=i.large?s.large:s.xlarge},values:{xsmall:"xsmall",small:"small",medium:"medium",large:"large",xlarge:"xlarge"},valueToClassName:{xsmall:"esri-view-height-xsmall esri-view-height-less-than-small esri-view-height-less-than-medium esri-view-height-less-than-large esri-view-height-less-than-xlarge",small:"esri-view-height-small esri-view-height-greater-than-xsmall esri-view-height-less-than-medium esri-view-height-less-than-large esri-view-height-less-than-xlarge",medium:"esri-view-height-medium esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-less-than-large esri-view-height-less-than-xlarge",large:"esri-view-height-large esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-greater-than-medium esri-view-height-less-than-xlarge",xlarge:"esri-view-height-xlarge esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-greater-than-medium esri-view-height-greater-than-large"}},orientation:{getValue(e){const t=e.viewSize,i=t[0],s=t[1],r=this.values;return s>=i?r.portrait:r.landscape},values:{portrait:"portrait",landscape:"landscape"},valueToClassName:{portrait:"esri-view-orientation-portrait",landscape:"esri-view-orientation-landscape"}}},k={xsmall:544,small:768,medium:992,large:1200};function L(e,t){return t?I[e].valueToClassName[t].split(" "):[]}const P=e=>{let t=class extends e{constructor(){super(...arguments),this._breakpointsHandles=new S.Z,this.orientation=null,this.widthBreakpoint=null,this.heightBreakpoint=null,this.breakpoints=k}initialize(){this._breakpointsHandles.add((0,g.YP)((()=>[this.breakpoints,this.size]),(()=>this._updateClassNames()),g.nn))}destroy(){this.destroyed||(this._removeActiveClassNames(),this._breakpointsHandles=(0,d.SC)(this._breakpointsHandles))}set breakpoints(e){if(e===this._get("breakpoints"))return;const t=function(e){const t=e;return t&&t.xsmall<t.small&&t.small<t.medium&&t.medium<t.large}(e);if(!t){const e=JSON.stringify(k,null,2);console.warn("provided breakpoints are not valid, using defaults:"+e)}e=t?e:k,this._set("breakpoints",{...e})}_updateClassNames(){if(!this.container)return;const e=M.Z.acquire(),t=M.Z.acquire();let i,s=!1;for(i in I){const r=this[i],n=I[i].getValue({viewSize:this.size,breakpoints:this.breakpoints});r!==n&&(s=!0,this[i]=n,L(i,r).forEach((e=>t.push(e))),L(i,n).forEach((t=>e.push(t))))}s&&(this._applyClassNameChanges(e,t),M.Z.release(e),M.Z.release(t))}_applyClassNameChanges(e,t){const i=this.container;i&&(t.forEach((e=>i.classList.remove(e))),e.forEach((e=>i.classList.add(e))))}_removeActiveClassNames(){const e=this.container;if(!e)return;let t;for(t in I)L(t,this[t]).forEach((t=>e.classList.remove(t)))}};return(0,s._)([(0,v.Cb)()],t.prototype,"breakpoints",null),(0,s._)([(0,v.Cb)()],t.prototype,"orientation",void 0),(0,s._)([(0,v.Cb)()],t.prototype,"widthBreakpoint",void 0),(0,s._)([(0,v.Cb)()],t.prototype,"heightBreakpoint",void 0),t=(0,s._)([(0,_.j)("esri.views.BreakpointsOwner")],t),t};var E=i(15404);i(75366);const R=e=>{let t=class extends e{async fetchPopupFeatures(e,t){await this.when();const{location:i,queryArea:s,layerViewsAndGraphics:r,clientOnlyGraphics:n}=await this._prepareFetchPopupFeatures(e,t),a=Promise.resolve(n),o=this._queryLayerPopupFeatures(s,r,t),l=o.map((e=>e.promise));return{location:i,clientOnlyGraphics:n,allGraphicsPromise:(0,u.WW)([a,...l]).then((e=>Array.from(new Set(e.flat())))),promisesPerLayerView:o}}_queryLayerPopupFeatures(e,t,i){return t.map((t=>{let{layerView:s,graphics:r}=t;const n={clientGraphics:r,event:(0,d.pC)(i)?i.event:null,signal:(0,d.pC)(i)?i.signal:null,defaultPopupTemplateEnabled:!!(0,d.pC)(i)&&!!i.defaultPopupTemplateEnabled},a=s.fetchPopupFeatures(e,n);return{layerView:s,promise:a}}))}_isValidPopupGraphic(e,t){return e&&!!e.getEffectivePopupTemplate((0,d.pC)(t)&&t.defaultPopupTemplateEnabled)}async _prepareFetchPopupFeatures(e,t){const{clientGraphics:i,queryArea:s,location:r}=await this._popupHitTestGraphics(e,t),n=this._getFetchPopupLayerViews(),{layerViewsAndGraphics:a,clientOnlyGraphics:o}=this._graphicsPerFetchPopupLayerView(i,n);return{clientOnlyGraphics:o,layerViewsAndGraphics:a,queryArea:s,location:r}}async _popupHitTestGraphics(e,t){const{results:i,mapPoint:s}=await this.popupHitTest(e),r=i.filter((e=>"graphic"===e.type&&this._isValidPopupGraphic(e.graphic,t))),n=r.length?r[0].mapPoint:null;return{clientGraphics:r.map((e=>e.graphic)),queryArea:s,location:s||n}}_getFetchPopupLayerViews(){const e=[];return this.allLayerViews.forEach((t=>{this._isValidPopupLayerView(t)&&e.push(t)})),(0,d.pC)(this.graphicsView)&&this._isValidPopupLayerView(this.graphicsView)&&e.push(this.graphicsView),e.reverse()}_isValidPopupLayerView(e){return(0,d.pC)(e)&&(!("layer"in e)||!e.suspended)&&"fetchPopupFeatures"in e}_graphicsPerFetchPopupLayerView(e,t){const i=[],s=new Map,r=t.map((e=>{const t=[];return"layer"in e?s.set(e.layer,t):s.set(e.graphics,t),{layerView:e,graphics:t}}));for(const n of e){const e=s.get(n.layer)||s.get(n.sourceLayer)||null;e?e.push(n):i.push(n)}return{layerViewsAndGraphics:r,clientOnlyGraphics:i}}};return t=(0,s._)([(0,_.j)("esri.views.PopupView")],t),t};var V=i(41649),O=i(62044),D=i(85015),A=i(91505),Z=i(41691),N=i(42537),G=i(54472),F=i(67426),z=i(8025),B=i(68748),U=i(90724),W=i(78952);const j=p.Z.getLogger("esri.support.AnalysesCollection");let H=class extends B.a{constructor(e){super(e),this.handles.add(this.on("before-add",(e=>{(0,d.Wi)(e.item)||e.item.parent===this.owner&&(j.warn("Analysis inside the collection must be unique. Not adding this element again."),e.preventDefault())})))}_own(e){e.parent=this.owner}_release(e){e.parent=null}};H=(0,s._)([(0,_.j)("esri.support.AnalysesCollection")],H);var q=i(78983);let Y=class extends D.Z{constructor(e){super(e),this.view=null,this.baseLayerViews=new a.Z,this.referenceLayerViews=new a.Z,this._loadingHandle=(0,g.YP)((()=>this.view?.map?.basemap),(e=>{e&&e.load().catch((()=>{}))}),g.nn)}destroy(){this._set("view",null),this._loadingHandle&&(this._loadingHandle.remove(),this._loadingHandle=null)}get suspended(){return!this.view||this.view.suspended}get updating(){if(this.view&&this.view.suspended)return!1;const e=this.view?.map?.basemap;return!!e&&!!e.loaded&&(this.baseLayerViews.some((e=>e.updating))||this.referenceLayerViews.some((e=>e.updating)))}};(0,s._)([(0,v.Cb)({constructOnly:!0})],Y.prototype,"view",void 0),(0,s._)([(0,v.Cb)({readOnly:!0})],Y.prototype,"baseLayerViews",void 0),(0,s._)([(0,v.Cb)({readOnly:!0})],Y.prototype,"referenceLayerViews",void 0),(0,s._)([(0,v.Cb)({readOnly:!0})],Y.prototype,"suspended",null),(0,s._)([(0,v.Cb)({type:Boolean,readOnly:!0})],Y.prototype,"updating",null),Y=(0,s._)([(0,_.j)("esri.views.BasemapView")],Y);var $=i(77427),K=i(99346),X=i(61826);const J=p.Z.getLogger("esri.views.LayerViewManager");class Q{constructor(e,t,i){this.layer=e,this.view=t,this.layerViewImporter=i,this._controller=new AbortController,this._deferred=(0,u.dD)(),this._started=!1,this.done=!1,(0,u.fu)(this._controller.signal,(()=>{const t=new l.Z("cancelled:layerview-create","layerview creation cancelled",{layer:e});this._deferred.reject(t)}))}get promise(){return this._deferred.promise}destroy(){this._controller.abort();const{layerView:e}=this;if(!e)return;const{layer:t,view:i}=this;t.emit("layerview-destroy",{view:i,layerView:e}),i.emit("layerview-destroy",{layer:t,layerView:e}),this.done=!0,this.layer=null,this.layerView=null,this.view=null,this.layerViewImporter=null}async start(){if(this._started)return;this._started=!0;const{_controller:{signal:e},layer:t,view:i}=this;this._map=i.map;try{let s,r;if(await t.load({signal:e}),"prefetchResources"in t&&await t.prefetchResources({signal:e}),t.createLayerView)s=await t.createLayerView(i,{signal:e});else{if(!this.layerViewImporter.hasLayerViewModule(t))throw new l.Z("layer:view-not-supported","No layerview implementation was found");const r=await this.layerViewImporter.importLayerView(t);(0,u.k_)(e),s="default"in r?new r.default({layer:t,view:i}):new r({layer:t,view:i})}const n=()=>{r=(0,d.hw)(r),s.destroyed||s.destroy(),s.layer=null,s.parent=null,s.view=null,this.done=!0};r=(0,u.fu)(e,n),(0,u.k_)(e);try{await s.when()}catch(Pe){throw n(),Pe}const a=this._map?.allLayers?.includes(t);if(!a)return n(),void this._deferred.reject(new l.Z("view:no-layerview-for-layer","The layer has been removed from the map",{layer:t}));this.layerView=s,t.emit("layerview-create",{view:i,layerView:s}),i.emit("layerview-create",{layer:t,layerView:s}),this.done=!0,this._deferred.resolve(s)}catch(Pe){t.emit("layerview-create-error",{view:i,error:Pe}),i.emit("layerview-create-error",{layer:t,error:Pe}),this.done=!0,this._deferred.reject(new l.Z("layerview:create-error","layerview creation failed",{layer:t,error:Pe}))}}}let ee=class extends Z.r{constructor(e){super(e),this._layerLayerViewInfoMap=new Map,this._watchUpdatingTracking=new X.t,this.supportsGround=!0,this._preloadLayerViewModules=()=>{const e=this.view.map?.allLayers;if(e)for(const t of e)this.layerViewImporter.hasLayerViewModule(t)&&this.layerViewImporter.importLayerView(t)},this._reschedule=()=>((0,d.Wi)(this._workPromise)&&(this._workPromise=(0,u.dD)()),this.handles.remove("reschedule"),this.handles.add((0,K.Os)(this._doWork),"reschedule"),this._workPromise.promise),this._doWork=()=>{const e=this.view.map;if(this._map!==e&&(this.clear(),this._map=e),(0,d.Wi)(this._workPromise))return void this.notifyChange("updating");this.handles.remove("reschedule"),this.handles.remove("collection-change");const t=new o.Z({getCollections:()=>this._rootCollectionNames.map((e=>this.get(e))),getChildrenFunction:e=>e&&"layers"in e?e.layers:null});if(!t)return this._workPromise.resolve(),void(this._workPromise=null);for(const r of t)this._createLayerView(r);this._refreshCollections();for(const[r,n]of this._layerLayerViewInfoMap)t.includes(r)||(this._layerLayerViewInfoMap.delete(n.layer),n.destroy());const i=t.filter((e=>"group"===e.type)).map((e=>e.layers)),s=[e?.ground?.layers,e?.basemap?.baseLayers,e?.basemap?.referenceLayers,e?.layers,...i].filter((e=>!!e));this.handles.add(s.map((e=>this._watchUpdatingTracking.addOnCollectionChange((()=>e),this._reschedule))),"collection-change"),this._workPromise.resolve(),this._workPromise=null}}initialize(){this.handles.add([(0,g.on)((()=>this.view?.map?.allLayers),"change",this._preloadLayerViewModules,{onListenerAdd:this._preloadLayerViewModules}),(0,g.YP)((()=>{const e=this.view,t=e?.map;return[t?.basemap,t?.ground,t?.layers,e?.ready]}),(()=>this._reschedule()),g.tX)]),this._preloadLayerViewModules(),this._reschedule()}destroy(){this.clear(),this._watchUpdatingTracking.destroy(),this._map=null}get _layersToLayerViews(){const e=[["view.map.basemap.baseLayers","view.basemapView.baseLayerViews"],["view.map.layers","view.layerViews"],["view.map.basemap.referenceLayers","view.basemapView.referenceLayerViews"]];return this.supportsGround&&e.push(["view.map.ground.layers","view.groundView.layerViews"]),new Map(e)}get _rootCollectionNames(){return Array.from(this._layersToLayerViews.keys())}get updating(){return(0,d.pC)(this._workPromise)||this._watchUpdatingTracking.updating||(0,$.oE)(this._layerLayerViewInfoMap,(e=>!e.done))}get updatingRemaining(){let e=0;for(const t of this._layerLayerViewInfoMap.values())t.done||++e;return e}clear(){if(!this.destroyed){for(const e of this._layerLayerViewInfoMap.values())e.destroy();this._layerLayerViewInfoMap.clear(),this._refreshCollections()}}async whenLayerView(e){if(await this._reschedule(),!this._layerLayerViewInfoMap.has(e))throw new l.Z("view:no-layerview-for-layer","No layerview has been found for the layer",{layer:e});return this._layerLayerViewInfoMap.get(e).promise}_refreshCollections(){for(const[e,t]of this._layersToLayerViews)this._populateLayerViewsOwners(this.get(e),this.get(t),this.view);this.notifyChange("updating"),this.notifyChange("updatingRemaining")}_populateLayerViewsOwners(e,t,i){if(!e||!t)return void(t&&t.removeAll());let s=0;for(const r of e){const e=this._layerLayerViewInfoMap.get(r);if(!e||!e.layerView)continue;const n=e.layerView;n.layer=r,n.parent=i,t.getItemAt(s)!==n&&t.splice(s,0,n),r.layers&&this._populateLayerViewsOwners(r.layers,n.layerViews,n),s+=1}s<t.length&&t.splice(s,t.length)}_createLayerView(e){if(this._layerLayerViewInfoMap.has(e))return this.view.ready&&this._layerLayerViewInfoMap.get(e).start(),this.notifyChange("updating"),void this.notifyChange("updatingRemaining");e.load().catch((()=>{})),this.layerViewImporter.hasLayerViewModule(e)&&this.layerViewImporter.importLayerView(e);const t=new Q(e,this.view,this.layerViewImporter);t.promise.then((()=>this._refreshCollections()),(t=>{t&&((0,u.D_)(t)||"cancelled:layerview-create"===t.name)||J.error(`Failed to create layerview for layer title:'${e.title??"no title"}', id:'${e.id??"no id"}' of type '${e.type}'.`,{layer:e,error:t}),this._refreshCollections()})),this._layerLayerViewInfoMap.set(e,t),this.view.ready&&t.start(),this.notifyChange("updating"),this.notifyChange("updatingRemaining")}};(0,s._)([(0,v.Cb)()],ee.prototype,"_workPromise",void 0),(0,s._)([(0,v.Cb)({readOnly:!0})],ee.prototype,"_watchUpdatingTracking",void 0),(0,s._)([(0,v.Cb)({readOnly:!0})],ee.prototype,"_layersToLayerViews",null),(0,s._)([(0,v.Cb)({readOnly:!0})],ee.prototype,"_rootCollectionNames",null),(0,s._)([(0,v.Cb)()],ee.prototype,"layerViewImporter",void 0),(0,s._)([(0,v.Cb)()],ee.prototype,"supportsGround",void 0),(0,s._)([(0,v.Cb)({readOnly:!0})],ee.prototype,"updating",null),(0,s._)([(0,v.Cb)({readOnly:!0})],ee.prototype,"updatingRemaining",null),(0,s._)([(0,v.Cb)({constructOnly:!0})],ee.prototype,"view",void 0),ee=(0,s._)([(0,_.j)("esri.views.LayerViewManager")],ee);const te=ee;let ie=class extends D.Z{constructor(e){super(e),this.factor=1.5,this.offset=(0,m.vW)(0,0),this.position=null,this.size=120,this.maskUrl=null,this.maskEnabled=!0,this.overlayUrl=null,this.overlayEnabled=!0,this.visible=!0}get version(){return this.commitProperty("factor"),this.commitProperty("offset"),this.commitProperty("position"),this.commitProperty("visible"),this.commitProperty("size"),this.commitProperty("maskUrl"),this.commitProperty("maskEnabled"),this.commitProperty("overlayUrl"),this.commitProperty("overlayEnabled"),(this._get("version")||0)+1}};(0,s._)([(0,v.Cb)({type:Number})],ie.prototype,"factor",void 0),(0,s._)([(0,v.Cb)({nonNullable:!0})],ie.prototype,"offset",void 0),(0,s._)([(0,v.Cb)()],ie.prototype,"position",void 0),(0,s._)([(0,v.Cb)({type:Number,range:{min:0}})],ie.prototype,"size",void 0),(0,s._)([(0,v.Cb)()],ie.prototype,"maskUrl",void 0),(0,s._)([(0,v.Cb)()],ie.prototype,"maskEnabled",void 0),(0,s._)([(0,v.Cb)()],ie.prototype,"overlayUrl",void 0),(0,s._)([(0,v.Cb)()],ie.prototype,"overlayEnabled",void 0),(0,s._)([(0,v.Cb)({readOnly:!0})],ie.prototype,"version",null),(0,s._)([(0,v.Cb)({type:Boolean})],ie.prototype,"visible",void 0),ie=(0,s._)([(0,_.j)("esri.views.Magnifier")],ie);const se=ie;var re=i(99912);let ne=class extends D.Z{constructor(e,t){super({}),this._stage=e,this._textureRequests=new Map,this._frameTask=t?.registerTask(re.T8.TEXTURE_UNLOAD)??re.sq}normalizeCtorArgs(){return{}}destroy(){super.destroy(),this._frameTask.remove(),this._textureRequests.forEach((e=>this._releaseTextureRequest(e))),this._textureRequests.clear()}get updating(){return this._frameTask.updating}fromData(e,t,i){const s=this.makeUid(e);let r=this._textureRequests.get(s);return r||(r={referenceCount:0,texture:t(),textureAsync:null,abortController:null,onRemove:i},this._stage&&(this._stage.add(r.texture),this._stage.loadImmediate(r.texture)),this._textureRequests.set(s,r)),r.referenceCount++,{uid:s,texture:r.texture,release:()=>this._release(s)}}_release(e){const t=this._textureRequests.get(e);t?(t.referenceCount<1&&console.warn("TextureCollection: reference count is < 1 for "+e),t.referenceCount--,t.referenceCount<1&&this._frameTask.schedule((()=>this._releaseNow(e)))):console.warn(`TextureCollection: texture doesn't exist: '${e}'`)}get test(){return{textureRequests:this._textureRequests}}_releaseNow(e){if(!this._textureRequests)return;const t=this._textureRequests.get(e);!t||t.referenceCount>0||(this._releaseTextureRequest(t),this._textureRequests.delete(e))}_releaseTextureRequest(e){e.onRemove&&e.onRemove(),e.texture?this._stage?.remove(e.texture):e.abortController&&(e.abortController.abort(),e.abortController=null)}makeUid(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return(0,d.pC)(t)?`${e}.${t}px`:e}};(0,s._)([(0,v.Cb)()],ne.prototype,"_frameTask",void 0),(0,s._)([(0,v.Cb)()],ne.prototype,"updating",null),ne=(0,s._)([(0,_.j)("esri.views.3d.support.TextureCollection")],ne);var ae=i(91806),oe=i(16889),le=i(45371);i(63920);const ce=["click","double-click","immediate-click","immediate-double-click","hold","drag","key-down","key-up","pointer-down","pointer-move","pointer-up","pointer-drag","mouse-wheel","pointer-enter","pointer-leave","gamepad","focus","blur"],he={};function pe(e){return!!he[e]}ce.forEach((e=>{he[e]=!0}));class de{constructor(e){this.handlers=new Map,this.counter=0,this.handlerCounts=new Map,this.view=e,this.inputManager=null}connect(e){e&&this.disconnect(),this.inputManager=e,this.handlers.forEach(((e,t)=>{let{handler:i,priority:s}=e;return this.inputManager.installHandlers(t,[i],s)}))}disconnect(){this.inputManager&&this.handlers.forEach(((e,t)=>this.inputManager.uninstallHandlers(t))),this.inputManager=null}destroy(){this.disconnect(),this.handlers.clear(),this.view=null}on(e,t,i,s){const r=Array.isArray(e)?e:e.split(",");if(!function(e){for(const t of e)if(!pe(t))return!1;return!0}(r))return r.some(pe)&&console.error("Error: registering input events and other events on the view at the same time is not supported."),null;let n,a;Array.isArray(t)?a=t:(n=t,a=[]),"function"==typeof i?n=i:s=i,s=null!=s?s:ae.f.DEFAULT;const o=this._createUniqueGroupName(),l=new ue(this.view,r,a,n);this.handlers.set(o,{handler:l,priority:s});for(const c of r){const e=this.handlerCounts.get(c)||0;this.handlerCounts.set(c,e+1)}return this.inputManager&&this.inputManager.installHandlers(o,[l],s),{remove:()=>this._removeHandler(o,r)}}hasHandler(e){return!!this.handlerCounts.get(e)}_removeHandler(e,t){if(this.handlers.has(e)){this.handlers.delete(e);for(const e of t){const t=this.handlerCounts.get(e);void 0===t?console.error("Trying to remove handler for event that has no handlers registered: ",e):1===t?this.handlerCounts.delete(e):this.handlerCounts.set(e,t-1)}}this.inputManager&&this.inputManager.uninstallHandlers(e)}_createUniqueGroupName(){return this.counter+=1,`viewEvents_${this.counter}`}}class ue extends le.a{constructor(e,t,i,s){super(!0),this.view=e;for(const r of t)switch(r){case"click":this.registerIncoming("click",i,(e=>s(this._wrapClick(e))));break;case"double-click":this.registerIncoming("double-click",i,(e=>s(this._wrapDoubleClick(e))));break;case"immediate-click":this.registerIncoming("immediate-click",i,(e=>s(this._wrapImmediateClick(e))));break;case"immediate-double-click":this.registerIncoming("immediate-double-click",i,(e=>s(this._wrapImmediateDoubleClick(e))));break;case"hold":this.registerIncoming("hold",i,(e=>s(this._wrapHold(e))));break;case"drag":this.registerIncoming("drag",i,(e=>{const t=this._wrapDrag(e);t&&s(t)}));break;case"key-down":this.registerIncoming("key-down",i,(e=>s(this._wrapKeyDown(e))));break;case"key-up":this.registerIncoming("key-up",i,(e=>s(this._wrapKeyUp(e))));break;case"pointer-down":this.registerIncoming("pointer-down",i,(e=>s(this._wrapPointer(e,"pointer-down"))));break;case"pointer-move":this.registerIncoming("pointer-move",i,(e=>s(this._wrapPointer(e,"pointer-move"))));break;case"pointer-up":this.registerIncoming("pointer-up",i,(e=>s(this._wrapPointer(e,"pointer-up"))));break;case"pointer-drag":this.registerIncoming("pointer-drag",i,(e=>s(this._wrapPointerDrag(e))));break;case"mouse-wheel":this.registerIncoming("mouse-wheel",i,(e=>s(this._wrapMouseWheel(e))));break;case"pointer-enter":this.registerIncoming("pointer-enter",i,(e=>s(this._wrapPointer(e,"pointer-enter"))));break;case"pointer-leave":this.registerIncoming("pointer-leave",i,(e=>s(this._wrapPointer(e,"pointer-leave"))));break;case"gamepad":this.registerIncoming("gamepad",i,(e=>{s(this._wrapGamepad(e))}));break;case"focus":this.registerIncoming("focus",i,(e=>{s(this._wrapFocus(e))}));break;case"blur":this.registerIncoming("blur",i,(e=>{s(this._wrapBlur(e))}))}}_wrapFocus(e){return{type:"focus",timestamp:e.timestamp,native:e.data.native,cancelable:e.cancelable,stopPropagation:()=>e.stopPropagation(),async:t=>e.async(t),preventDefault:()=>e.preventDefault()}}_wrapBlur(e){return{type:"blur",timestamp:e.timestamp,native:e.data.native,cancelable:e.cancelable,stopPropagation:()=>e.stopPropagation(),async:t=>e.async(t),preventDefault:()=>e.preventDefault()}}_wrapClick(e){const{pointerType:t,button:i,buttons:s,x:r,y:n,native:a,eventId:o}=e.data,{cancelable:l,timestamp:c}=e;return{type:"click",pointerType:t,button:i,buttons:s,x:r,y:n,native:a,timestamp:c,screenPoint:(0,m.vW)(r,n),mapPoint:this._getMapPoint(r,n),eventId:o,cancelable:l,stopPropagation:()=>e.stopPropagation(),async:t=>e.async(t),preventDefault:()=>e.preventDefault()}}_wrapDoubleClick(e){const{pointerType:t,button:i,buttons:s,x:r,y:n,native:a,eventId:o}=e.data,{cancelable:l,timestamp:c}=e;return{type:"double-click",pointerType:t,button:i,buttons:s,x:r,y:n,native:a,timestamp:c,mapPoint:this._getMapPoint(r,n),eventId:o,cancelable:l,stopPropagation:()=>e.stopPropagation(),async:t=>e.async(t),preventDefault:()=>e.preventDefault()}}_wrapImmediateClick(e){const{pointerType:t,button:i,buttons:s,x:r,y:n,native:a,eventId:o}=e.data,l=a.pointerId,{cancelable:c,timestamp:h}=e;return{type:"immediate-click",pointerId:l,pointerType:t,button:i,buttons:s,x:r,y:n,native:a,timestamp:h,mapPoint:this._getMapPoint(r,n),eventId:o,cancelable:c,stopPropagation:()=>e.stopPropagation(),async:t=>e.async(t),preventDefault:()=>e.preventDefault()}}_wrapImmediateDoubleClick(e){const{pointerType:t,button:i,buttons:s,x:r,y:n,native:a,eventId:o}=e.data,l=a.pointerId,{cancelable:c,timestamp:h}=e;return{type:"immediate-double-click",pointerId:l,pointerType:t,button:i,buttons:s,x:r,y:n,native:a,timestamp:h,mapPoint:this._getMapPoint(r,n),eventId:o,cancelable:c,stopPropagation:()=>e.stopPropagation(),async:t=>e.async(t),preventDefault:()=>e.preventDefault()}}_wrapHold(e){const{pointerType:t,button:i,buttons:s,x:r,y:n,native:a}=e.data,{cancelable:o,timestamp:l}=e;return{type:"hold",pointerType:t,button:i,buttons:s,x:r,y:n,native:a,timestamp:l,mapPoint:this._getMapPoint(r,n),cancelable:o,stopPropagation:()=>e.stopPropagation(),async:t=>e.async(t),preventDefault:()=>e.preventDefault()}}_getMapPoint(e,t){return this.view.toMap((0,m.vW)(e,t),{exclude:[]})}_wrapDrag(e){const t=e.data,{x:i,y:s}=t.center,{action:r,pointerType:n,button:a}=t;if("start"===r&&(this.latestDragStart=t),!this.latestDragStart)return;const o=t.pointer.native,l=t.buttons,{cancelable:c,timestamp:h}=e,p={x:this.latestDragStart.center.x,y:this.latestDragStart.center.y};return"end"===r&&(this.latestDragStart=void 0),{type:"drag",action:r,x:i,y:s,origin:p,pointerType:n,button:a,buttons:l,radius:t.radius,angle:(0,oe.BV)(t.angle),native:o,timestamp:h,cancelable:c,stopPropagation:()=>e.stopPropagation(),async:t=>e.async(t),preventDefault:()=>e.preventDefault()}}_wrapKeyDown(e){const{key:t,repeat:i,native:s}=e.data,{cancelable:r,timestamp:n}=e;return{type:"key-down",key:t,repeat:i,native:s,timestamp:n,cancelable:r,stopPropagation:()=>e.stopPropagation(),async:t=>e.async(t),preventDefault:()=>e.preventDefault()}}_wrapKeyUp(e){const{key:t,native:i}=e.data,{cancelable:s,timestamp:r}=e;return{type:"key-up",key:t,native:i,timestamp:r,cancelable:s,stopPropagation:()=>e.stopPropagation(),async:t=>e.async(t),preventDefault:()=>e.preventDefault()}}_wrapPointer(e,t){const{x:i,y:s,button:r,buttons:n,native:a,eventId:o}=e.data,l=a.pointerId,c=a.pointerType,{cancelable:h,timestamp:p}=e;return{type:t,x:i,y:s,pointerId:l,pointerType:c,button:r,buttons:n,native:a,timestamp:p,eventId:o,cancelable:h,stopPropagation:()=>e.stopPropagation(),async:t=>e.async(t),preventDefault:()=>e.preventDefault()}}_wrapPointerDrag(e){const{x:t,y:i,buttons:s,native:r,eventId:n}=e.data.currentEvent,{button:a}=e.data.startEvent,o=e.data.startEvent.native.pointerId,l=e.data.startEvent.native.pointerType,c=e.data.action,h={x:e.data.startEvent.x,y:e.data.startEvent.y},{cancelable:p,timestamp:d}=e;return{type:"pointer-drag",x:t,y:i,pointerId:o,pointerType:l,button:a,buttons:s,action:c,origin:h,native:r,timestamp:d,eventId:n,cancelable:p,stopPropagation:()=>e.stopPropagation(),async:t=>e.async(t),preventDefault:()=>e.preventDefault()}}_wrapMouseWheel(e){const{cancelable:t,data:i,timestamp:s}=e,{x:r,y:n,deltaY:a,native:o}=i;return{type:"mouse-wheel",x:r,y:n,deltaY:a,native:o,timestamp:s,cancelable:t,stopPropagation:()=>e.stopPropagation(),async:t=>e.async(t),preventDefault:()=>e.preventDefault()}}_wrapGamepad(e){const{action:t,state:i,device:s}=e.data,{cancelable:r,timestamp:n}=e,{buttons:a,axes:o}=i;return{type:"gamepad",device:s,timestamp:n,action:t,buttons:a,axes:o,cancelable:r,stopPropagation:()=>e.stopPropagation(),async:t=>e.async(t),preventDefault:()=>e.preventDefault()}}}var ge=i(99034);const me=p.Z.getLogger("esri.views.interactive.interactiveToolUtils");function ye(e){return[e.on("before-add",(t=>{const i=t.item;if(null==i||e.includes(i))return me.warn("Tool is either already in the list of tools or tool is `null`. Not adding tool."),void t.preventDefault();i.onAdd()})),e.on("after-remove",(e=>{const t=e.item;t.visible=!1,t.active&&(t.view.activeTool=null),t.destroy()}))]}function fe(e){return e.visible&&e.getEditableFlag(ge.bH.USER)&&e.getEditableFlag(ge.bH.MANAGER)}var ve=i(72612);class _e{constructor(){this._pointerLocations=new Map,this._hoveredManipulators=new Map,this._grabbedManipulators=new Map,this._draggedManipulators=new Map,this._stopDrag=!1,this._currentlyActiveTool=null,this._revertToActiveTool=!1,this._cursor=null}get cursor(){return this._cursor}handleInputEvent(e,t){const i=()=>e.stopPropagation();switch(e.type){case"pointer-move":we(e.pointerType)&&this._pointerLocations.set(e.pointerId,{x:e.x,y:e.y,pointerType:e.pointerType});break;case"drag":this._grabbedManipulators.size>0&&(this._stopDrag=!0),this._stopDrag&&(i(),"end"===e.action&&(this._stopDrag=!1));break;case"pointer-down":{if(!be(e))break;const s=(0,ve.vT)(e),r=this._intersect(s,e.pointerType,t.forEachTool);if((0,d.Wi)(r))break;const n=this._findToolAndManipulatorByKey(r,t.forEachTool,Ce),a=(0,d.yw)(n,(e=>e.manipulator)),o=(0,d.yw)(n,(e=>e.tool));!((0,d.pC)(a)&&(0,d.pC)(o)&&a.interactive)||a.grabbable&&a.grabbableForEvent(e)||!a.grabbing||a.dragging||this._ungrabManipulatorBeforeDragging(a,o,e),(0,d.pC)(a)&&a.interactive&&a.grabbable&&a.grabbableForEvent(e)&&!a.grabbing&&(this._grabbedManipulators.set(e.pointerId,{key:r,start:s,pointerType:e.pointerType}),1===this._grabbedManipulators.size&&t.activeTool!==r.tool&&(this._currentlyActiveTool=t.activeTool,this._revertToActiveTool=!0,t.setActiveTool(r.tool)),a.grabbing=!0,a.events.emit("grab-changed",{action:"start",pointerType:e.pointerType,screenPoint:s}),i());break}case"pointer-up":this._handlePointerEnd(e,t);break;case"pointer-drag":{if(!be(e))break;const s=this._grabbedManipulators.get(e.pointerId),r=this._draggedManipulators.get(e.pointerId),n=(0,d.yw)(s||r,(e=>{let{key:t}=e;return t})),a=this._findManipulatorByKey(n,t.forEachTool);if((0,d.Wi)(a))break;const o=(0,ve.vT)(e);o.x=(0,oe.uZ)(o.x,0,t.view.width),o.y=(0,oe.uZ)(o.y,0,t.view.height);const l=(0,d.Wg)(s||r).start;switch(e.action){case"start":case"update":"update"!==e.action&&1!==this._grabbedManipulators.size||(a.dragging=!0,r?a.events.emit("drag",{action:"update",start:l,screenPoint:o}):a.events.emit("drag",{action:"start",start:l,screenPoint:o,pointerType:e.pointerType}),this._draggedManipulators.set(e.pointerId,{key:(0,d.Wg)(n),start:l}));break;case"end":a.dragging=!1,r&&a.events.emit("drag",{action:"end",start:l,screenPoint:o}),this._draggedManipulators.delete(e.pointerId),this._handlePointerEnd(e,t)}i();break}case"immediate-click":{const s=(0,ve.vT)(e),r=this._intersect(s,e.pointerType,t.forEachTool),n=this._findToolAndManipulatorByKey(r,t.forEachTool,Ce);if(function(e){return!!e.native.shiftKey}(e)||t.forEachTool((e=>{if((!(0,d.pC)(n)||n.tool!==e||e.automaticManipulatorSelection)&&e.manipulators){let t=!1;e.manipulators.forEach((e=>{let{manipulator:i}=e;i.selected&&(i.selected=!1,t=!0)})),t&&e.manipulatorSelectionChanged&&e.manipulatorSelectionChanged()}})),(0,d.Wi)(n))break;const{manipulator:a,tool:o}=n;if(!a.interactive)break;a.selectable&&o.automaticManipulatorSelection&&(a.selected=!a.selected,o.manipulatorSelectionChanged&&o.manipulatorSelectionChanged());const l=e.native.shiftKey;a.events.emit("immediate-click",{screenPoint:s,button:e.button,pointerType:e.pointerType,shiftKey:l,stopPropagation:i});break}case"click":{const s=(0,ve.vT)(e),r=this._intersect(s,e.pointerType,t.forEachTool),n=this._findManipulatorByKey(r,t.forEachTool);if((0,d.Wi)(n)||!n.interactive)break;const a=e.native.shiftKey;n.events.emit(e.type,{screenPoint:s,button:e.button,pointerType:e.pointerType,shiftKey:a}),i();break}case"double-click":{const s=(0,ve.vT)(e),r=this._intersect(s,e.pointerType,t.forEachTool),n=this._findManipulatorByKey(r,t.forEachTool);if((0,d.Wi)(n)||!n.interactive)break;const a=e.native.shiftKey;n.events.emit("double-click",{screenPoint:s,button:e.button,pointerType:e.pointerType,shiftKey:a,stopPropagation:i});break}case"immediate-double-click":{const s=(0,ve.vT)(e),r=this._intersect(s,e.pointerType,t.forEachTool),n=this._findManipulatorByKey(r,t.forEachTool);if((0,d.Wi)(n)||!n.interactive)break;const a=e.native.shiftKey;n.events.emit("immediate-double-click",{screenPoint:s,button:e.button,pointerType:e.pointerType,shiftKey:a,stopPropagation:i});break}}this._onFocusChange(t.forEachTool)}_ungrabManipulatorBeforeDragging(e,t,i){e.grabbing=!1,e.events.emit("grab-changed",{action:"end",pointerType:i.pointerType,screenPoint:(0,ve.vT)(i)}),this._grabbedManipulators.forEach(((i,s)=>{let{key:r}=i;r.tool===t&&t.manipulators.findById(r.manipulatorId)===e&&this._grabbedManipulators.delete(s)}))}_handlePointerEnd(e,t){const i=(0,d.yw)(this._grabbedManipulators.get(e.pointerId),(e=>{let{key:t}=e;return t})),s=this._findManipulatorByKey(i,t.forEachTool);(0,d.pC)(s)&&!s.dragging&&(1===this._grabbedManipulators.size&&0===this._draggedManipulators.size&&this._revertToActiveTool&&(t.setActiveTool(this._currentlyActiveTool),this._revertToActiveTool=!1,this._currentlyActiveTool=null),s.grabbing&&(s.grabbing=!1,s.events.emit("grab-changed",{action:"end",pointerType:e.pointerType,screenPoint:(0,ve.vT)(e)})),this._grabbedManipulators.delete(e.pointerId))}_cursorFromMap(e,t){let i=null;return(0,$.oE)(e,(e=>{let{key:s}=e;const r=this._findManipulatorByKey(s,t);return!!((0,d.pC)(r)&&r.interactive&&"cursor"in r&&r.cursor)&&(i=r.cursor,!0)})),i}_onFocusChange(e){this._updateCursor(e),this._updateFocusedManipulatorTools(e)}_updateCursor(e){this._grabbedManipulators.size>0?this._cursor=this._cursorFromMap(this._grabbedManipulators,e)||"grabbing":this._hoveredManipulators.size>0?this._cursor=this._cursorFromMap(this._hoveredManipulators,e)||"pointer":this._cursor=null}_updateFocusedManipulatorTools(e){const t=new Set;this._grabbedManipulators.forEach((e=>{let{key:{tool:i}}=e;t.add(i)})),this._hoveredManipulators.forEach((e=>{let{key:{tool:i}}=e;t.add(i)})),e((e=>{e.hasFocusedManipulators=t.has(e)}))}clearPointers(e,t){let i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],s=arguments.length>3?arguments[3]:void 0;const r=t=>t.tool===e&&((0,d.Wi)(s)||t.manipulatorId===s);this._grabbedManipulators.forEach(((e,i)=>{let{key:s,pointerType:n}=e;if(r(s)){this._grabbedManipulators.delete(i);const e=this._findManipulatorByKey(s,t);(0,d.pC)(e)&&(e.grabbing=!1,e.events.emit("grab-changed",{action:"end",screenPoint:null,pointerType:n}))}})),this._draggedManipulators.forEach(((e,i)=>{let{key:s}=e;if(r(s)){this._draggedManipulators.delete(i);const e=this._findManipulatorByKey(s,t);(0,d.pC)(e)&&(e.dragging=!1,e.events.emit("drag",{action:"cancel"}))}})),i&&this._hoveredManipulators.forEach(((e,i)=>{let{key:s}=e;if(r(s)){this._hoveredManipulators.delete(i);const e=this._findManipulatorByKey(s,t);(0,d.pC)(e)&&(e.hovering=!1)}})),this._onFocusChange(t)}_intersect(e,t,i){let s=null;return i((i=>{if(null==i.manipulators||!fe(i))return!1;const r=i.manipulators.intersect(e,t);return!(0,d.Wi)(r)&&(s={manipulatorId:r.id,tool:i},!0)})),s}updateHoveredStateFromKnownPointers(e){this._pointerLocations.forEach(((t,i)=>{this._updateHoveredStateForPointerAtScreenPosition((0,m.vW)(t.x,t.y),i,t.pointerType,e)}))}handleHoverEvent(e,t){"pointer-up"!==e.type&&"immediate-click"!==e.type&&"pointer-move"!==e.type||!we(e.pointerType)||this._updateHoveredStateForPointerAtScreenPosition((0,ve.vT)(e),e.pointerId,e.pointerType,t)}_updateHoveredStateForPointerAtScreenPosition(e,t,i,s){const r=this._intersect(e,i,s);let n=this._findManipulatorByKey(r,s);const a=(0,d.yw)(this._hoveredManipulators.get(t),(e=>{let{key:t}=e;return t})),o=this._findManipulatorByKey(a,s);(0,d.pC)(n)&&!n.interactive&&(n=null),o!==n&&((0,d.pC)(o)&&(o.hovering=!1),(0,d.pC)(n)?(n.hovering=!0,this._hoveredManipulators.set(t,{key:(0,d.Wg)(r)})):this._hoveredManipulators.delete(t),this._onFocusChange(s))}_findManipulatorByKey(e,t){return this._findToolAndManipulatorByKey(e,t,Ce)?Ce.manipulator:null}_findToolAndManipulatorByKey(e,t,i){return(0,d.Wi)(e)?null:(i.tool=null,i.manipulator=null,t((t=>{if(t!==e.tool||null==t.manipulators||!fe(t))return!1;const s=t.manipulators.findById(e.manipulatorId);return!!(0,d.pC)(s)&&(i.manipulator=s,i.tool=t,!0)})),i.manipulator?i:null)}}function we(e){return"mouse"===e}function be(e){return"mouse"!==e.pointerType||0===e.button}const Ce={manipulator:null,tool:null},xe=p.Z.getLogger("esri.views.ToolViewManager"),Te="attached",Me="tools";let Se=class extends Z.r{constructor(e){super(e),this._manipulatorState=new _e,this.tools=new a.Z,this.cursor=null,this._forEachTool=e=>{for(const t of this.tools.items)if(e(t))return}}initialize(){this.handles.add([this.view.on(ce,(e=>{this._handleInputEvent(e)}),ae.f.TOOL),...ye(this.tools),this.tools.on("before-remove",(e=>{let{item:t}=e;this._manipulatorState.clearPointers(t,this._forEachTool)})),this.tools.on("change",(()=>{this._refreshToolWatchers()}))])}destroy(){this.detach(),this.handles.removeAll()}set activeTool(e){if((0,d.pC)(e)&&!this.view.ready)return void xe.error("Cannot set active tool while view is not ready.");if(e===this.activeTool)return;const t=this.activeTool;this._set("activeTool",e),(0,d.pC)(t)&&t.deactivate(),(0,d.pC)(e)&&e.activate(),this._removeIncompleteTools(e);const i=(0,d.Wi)(this.activeTool);for(const s of this.tools){s.setEditableFlag(ge.bH.MANAGER,i||s===this.activeTool);const e=fe(s);!i&&e||this._manipulatorState.clearPointers(s,this._forEachTool,!e)}this._updateCursor()}get updating(){return this.updatingHandles.updating||this.tools.some((e=>e.updating))||(this.textures?.updating??!1)}attach(){"3d"===this.view.type?(this._set("textures",new ne(this.view._stage,this.view.resourceController.scheduler)),this.handles.add([(0,g.YP)((()=>{const{state:e}=this.view;return"camera"in e&&e.camera}),(()=>{this._forEachManipulator((e=>{null!=e.onViewChange&&e.onViewChange()}))})),this.view.elevationProvider.on("elevation-change",(e=>{this._forEachManipulator((t=>{null!=t.onElevationChange&&t.onElevationChange(e)}))})),(0,N.kB)((()=>this._set("textures",(0,d.SC)(this.textures))))],Te)):this.handles.add((0,g.YP)((()=>this.view.extent),(()=>{this._forEachManipulator((e=>{null!=e.onViewChange&&e.onViewChange()}))})))}detach(){(0,d.pC)(this.activeTool)&&(this.activeTool=null),this.tools.removeAll(),this.handles.remove(Te)}_forEachManipulator(e){this._forEachTool((t=>{t.manipulators&&t.manipulators.forEach((i=>{let{manipulator:s}=i;return e(s,t)}))}))}_handleInputEvent(e){let t=!1;const i={...e,stopPropagation:()=>{t=!0,e.stopPropagation()}};(0,d.pC)(this.activeTool)?this.activeTool.handleInputEvent&&this.activeTool.handleInputEvent(i):this._forEachTool((e=>{!t&&e.visible&&e.handleInputEvent(i)})),!t&&"key-down"===e.type&&"Escape"===e.key&&this.activeTool&&(e.stopPropagation(),this.activeTool=null),this._manipulatorState.handleInputEvent(i,{forEachTool:this._forEachTool,activeTool:this.activeTool,setActiveTool:e=>{this.activeTool=e},view:this.view}),!t&&(0,d.pC)(this.activeTool)&&this.activeTool.handleInputEventAfter(i),this._manipulatorState.handleHoverEvent(i,this._forEachTool),this._updateCursor()}_refreshToolWatchers(){this.handles.remove(Me),this._forEachTool((e=>{if(e instanceof D.Z){const t=(0,g.YP)((()=>[e.cursor,e.visible,e.editable]),(()=>{fe(e)||this._manipulatorState.clearPointers(e,this._forEachTool),this._updateCursor()}));this.handles.add(t,Me)}e.manipulators&&this.handles.add(e.manipulators.on("change",(t=>{t.removed.forEach((t=>{let{id:i}=t;this._manipulatorState.clearPointers(e,this._forEachTool,!0,i)})),this._manipulatorState.updateHoveredStateFromKnownPointers(this._forEachTool),this._updateCursor()})),Me)})),this._manipulatorState.updateHoveredStateFromKnownPointers(this._forEachTool),this._updateCursor()}_updateCursor(){const e=this._manipulatorState.cursor;let t=e;this._forEachTool((i=>!(!(0,d.pC)(i.cursor)||!i.visible||!(0,d.Wi)(e)&&i.preferManipulatorCursor)&&(t=i.cursor,!0))),this._get("cursor")!==t&&this._set("cursor",t)}_removeIncompleteTools(e){this.tools.filter((t=>((0,d.Wi)(e)||t!==e)&&!t.created&&t.removeIncompleteOnCancel)).forEach((e=>{this.tools.remove(e)}))}};(0,s._)([(0,v.Cb)({constructOnly:!0,nonNullable:!0})],Se.prototype,"view",void 0),(0,s._)([(0,v.Cb)({readOnly:!0,nonNullable:!0})],Se.prototype,"textures",void 0),(0,s._)([(0,v.Cb)({value:null})],Se.prototype,"activeTool",null),(0,s._)([(0,v.Cb)({readOnly:!0,type:a.Z})],Se.prototype,"tools",void 0),(0,s._)([(0,v.Cb)({readOnly:!0})],Se.prototype,"cursor",void 0),(0,s._)([(0,v.Cb)({readOnly:!0})],Se.prototype,"updating",null),Se=(0,s._)([(0,_.j)("esri.views.ToolViewManager")],Se);const Ie=Se;let ke=class extends D.Z{constructor(e){super(),this.nativeIndex=null,this._detectedDeviceType="unknown","standard"===e.mapping?this._detectedDeviceType="standard":Le.test(e.id)?this._detectedDeviceType="spacemouse":this._detectedDeviceType="unknown",this.nativeIndex=e.index}get native(){return(navigator.getGamepads?navigator.getGamepads():[])[this.nativeIndex]}get deviceType(){return this._detectedDeviceType}get axisThreshold(){return Pe[this.deviceType]}};(0,s._)([(0,v.Cb)({nonNullable:!0,readOnly:!0})],ke.prototype,"nativeIndex",void 0),(0,s._)([(0,v.Cb)({type:String,readOnly:!0})],ke.prototype,"deviceType",null),(0,s._)([(0,v.Cb)({type:Number,readOnly:!0})],ke.prototype,"axisThreshold",null),ke=(0,s._)([(0,_.j)("esri.views.input.gamepad.GamepadInputDevice")],ke);const Le=new RegExp("^(3dconnexion|space(mouse|navigator|pilot|explorer))","i"),Pe={standard:.15,spacemouse:.025,unknown:0},Ee=ke;let Re=class extends D.Z{constructor(){super(...arguments),this.devices=new a.Z,this.enabledFocusMode="document"}};(0,s._)([(0,v.Cb)({type:a.Z.ofType(Ee),readOnly:!0})],Re.prototype,"devices",void 0),(0,s._)([(0,v.Cb)({type:["document","view","none"]})],Re.prototype,"enabledFocusMode",void 0),Re=(0,s._)([(0,_.j)("esri.views.input.gamepad.GamepadSettings")],Re);const Ve=Re;let Oe=class extends D.Z{constructor(){super(...arguments),this.gamepad=new Ve}};(0,s._)([(0,v.Cb)({readOnly:!0})],Oe.prototype,"gamepad",void 0),Oe=(0,s._)([(0,_.j)("esri.views.input.Input")],Oe);const De=Oe;let Ae=class extends D.Z{constructor(e){super(e),this.enabled=!0,this.device=null,this.mode="pan",this.tiltDirection="forward-down",this.velocityFactor=1}};(0,s._)([(0,v.Cb)({type:Boolean,nonNullable:!0})],Ae.prototype,"enabled",void 0),(0,s._)([(0,v.Cb)({type:Ee})],Ae.prototype,"device",void 0),(0,s._)([(0,v.Cb)({type:["pan","zoom"],nonNullable:!0})],Ae.prototype,"mode",void 0),(0,s._)([(0,v.Cb)({type:["forward-down","forward-up"],nonNullable:!0})],Ae.prototype,"tiltDirection",void 0),(0,s._)([(0,v.Cb)({type:Number,nonNullable:!0})],Ae.prototype,"velocityFactor",void 0),Ae=(0,s._)([(0,_.j)("esri.views.navigation.gamepad.GamepadSettings")],Ae);const Ze=Ae;let Ne=class extends D.Z{constructor(e){super(e),this.browserTouchPanEnabled=!0,this.gamepad=new Ze,this.momentumEnabled=!0,this.mouseWheelZoomEnabled=!0}};(0,s._)([(0,v.Cb)({type:Boolean})],Ne.prototype,"browserTouchPanEnabled",void 0),(0,s._)([(0,v.Cb)({type:Ze,nonNullable:!0})],Ne.prototype,"gamepad",void 0),(0,s._)([(0,v.Cb)({type:Boolean})],Ne.prototype,"momentumEnabled",void 0),(0,s._)([(0,v.Cb)({type:Boolean})],Ne.prototype,"mouseWheelZoomEnabled",void 0),Ne=(0,s._)([(0,_.j)("esri.views.navigation.Navigation")],Ne);const Ge=Ne;var Fe=i(5354),ze=i(50951);let Be,Ue=null;async function We(e){Ue||(Ue=i.e(7387).then(i.bind(i,67387)).then((e=>Be=e))),await Ue,(0,u.k_)(e)}async function je(e,t,i,s){if(!e)return null;const r=e.spatialReference;return(0,C.kR)()||(0,C.Up)(r,t)?(0,C.iV)(e,t):Be?Be.projectGeometry(e,t,i,s):(await Promise.race([We(s),(0,C.zD)(s)]),je(e,t,i,s))}let He=class extends D.Z{constructor(e){super(e),this.required={tileInfo:!1,heightModelInfo:!1,extent:!1},this.defaultSpatialReference=null,this.userSpatialReference=null,this.sourcePreloadCount=10,this.priorityCollection=null,this.requiresExtentInSpatialReference=!0,this.suspended=!1,this._projectExtentTask={task:null,input:null,output:null,spatialReference:null}}destroy(){this._projectExtentTask.task&&(this._projectExtentTask.task=(0,d.IM)(this._projectExtentTask.task)),this._set("map",null)}get ready(){return!this._spatialReferenceTask.updating&&!this._tileInfoTask.updating&&!this._extentTask.updating}get heightModelInfoReady(){return!this._heightModelInfoTask.updating}get spatialReference(){return(0,d.pC)(this.userSpatialReference)?this.userSpatialReference:(0,d.Wg)(this._spatialReferenceTask.spatialReference)}get extent(){return(0,d.Wg)(this._extentTask.extent)}get heightModelInfo(){return(0,d.Wg)(this._heightModelInfoTask.heightModelInfo)}get vcsWkid(){return(0,d.Wg)(this._heightModelInfoTask.vcsWkid)}get latestVcsWkid(){return(0,d.Wg)(this._heightModelInfoTask.latestVcsWkid)}get viewingMode(){return(0,d.Wi)(this.userSpatialReference)||this.userSpatialReference.equals((0,d.Wg)(this._spatialReferenceTask.spatialReference))?(0,d.Wg)(this._spatialReferenceTask.viewingMode):null}get tileInfo(){return(0,d.Wg)(this._tileInfoTask.tileInfo)}get mapCollections(){const e=this.map?.(),t=[];return(0,d.pC)(this.priorityCollection)&&t.push(this.priorityCollection),t.push({parent:e?.basemap,layers:e?.basemap?.baseLayers},{layers:e?.layers},{parent:e?.ground,layers:e?.ground?.layers},{parent:e?.basemap,layers:e?.basemap?.referenceLayers}),t}get _allLayers(){return this._collectLayers(this.mapCollections)}get _spatialReferenceTask(){if(this.suspended)return this._get("_spatialReferenceTask")??{updating:!1};const{layers:e,updating:t}=this._allLayers;let i=null;for(const r of e){const e=this._getSupportedSpatialReferences(r);if(e.length>0){const t=this._narrowDownSpatialReferenceCandidates(i,e);(0,d.pC)(t)&&(i=t)}if((0,d.pC)(i)&&1===i.length)break}if(t&&((0,d.Wi)(i)||1!==i.length))return{updating:!0};const s=this._pickSpatialReferenceCandidate(i);return{spatialReference:(0,d.pC)(s)?s.spatialReference:null,viewingMode:(0,d.pC)(s)?s.viewingMode:null,updating:!1}}get _tileInfoTask(){if(!this.required.tileInfo)return this._get("_tileInfoTask")??{updating:!1};if(!this.spatialReference)return{updating:this._spatialReferenceTask.updating};const{layers:e,updating:t}=this._collectLayers([{parent:this.map?.()?.basemap,layers:this.map?.()?.basemap?.baseLayers},{layers:this.map?.()?.layers}]);if(e&&e.length>0&&"tileInfo"in e[0]){const t=e[0].tileInfo;return{tileInfo:t&&t.spatialReference.equals(this.spatialReference)?t:null,updating:!1}}return{updating:t}}get _heightModelInfoTask(){if(!this.required.heightModelInfo||this.suspended&&this._get("_heightModelInfoTask")?.heightModelInfo)return this._get("_heightModelInfoTask")??{updating:!1};const{layers:e,updating:t}=this._allLayers;for(const i of e)if((0,Fe.qC)(i)){const e=(0,Fe.Ku)(i);if(e)return{heightModelInfo:e,vcsWkid:i.spatialReference?.vcsWkid,latestVcsWkid:i.spatialReference?.latestVcsWkid,updating:!1}}return{updating:t}}get _extentCandidatesTask(){if(this.suspended||!this.required.extent)return this._get("_extentCandidatesTask")??{updating:!1};if(!this.spatialReference)return{updating:this._spatialReferenceTask.updating};const e=this._allLayers,t=e.updating,i=[];for(const s of e.layers){const e="fullExtents"in s&&s.fullExtents||((0,d.pC)(s.fullExtent)?[s.fullExtent]:[]),t=this.requiresExtentInSpatialReference?null:e[0],r=e.find((e=>e.spatialReference.equals(this.spatialReference)))??t;if(r)return{candidates:[{extent:r,layer:s}],updating:!1};if(this._getSupportedSpatialReferences(s).length>0)for(const n of e)i.push({extent:n,layer:s})}return{candidates:i,updating:t}}get _extentTask(){const{candidates:e,updating:t}=this._extentCandidatesTask;if(t)return{updating:t};if((0,d.Wi)(e)||0===e.length)return{updating:!1};if(!this.spatialReference)return{updating:this._spatialReferenceTask.updating};const i=this._pickExtentCandidate(e),s=this.spatialReference;return i.extent.equals(this._projectExtentTask.input)&&s.equals(this._projectExtentTask.spatialReference)?{extent:this._projectExtentTask.output,updating:(0,d.pC)(this._projectExtentTask.task)&&!this._projectExtentTask.task.finished}:((0,d.pC)(this._projectExtentTask.task)&&(this._projectExtentTask.task=(0,d.IM)(this._projectExtentTask.task)),this._projectExtentTask={input:i.extent.clone(),output:null,spatialReference:s.clone(),task:(0,u.vr)((async e=>{try{const t=await je(i.extent,s,i.layer.portalItem,e);this._projectExtentTask={...this._projectExtentTask,task:null,output:t}}catch(t){if((0,u.Hc)(e))return;this._projectExtentTask={...this._projectExtentTask,task:null}}}))},{updating:!0})}_narrowDownSpatialReferenceCandidates(e,t){if((0,d.Wi)(e))return t;const i=[],s=(e,t)=>(0,d.pC)(e)?(0,d.pC)(t)?e===t&&e:e:t;for(const r of e)for(const e of t){if(!r.spatialReference.equals(e.spatialReference))continue;const t=s(r.viewingMode,e.viewingMode);if(!1!==t){i.push({spatialReference:r.spatialReference,viewingMode:t});break}}return i.length>0?i:null}_pickSpatialReferenceCandidate(e){const t=this.defaultSpatialReference;return(0,d.Wi)(e)||e.length<1?(0,d.pC)(t)?{spatialReference:t,viewingMode:null}:null:((0,d.pC)(t)&&e.length>1&&e.some((e=>{let{spatialReference:i}=e;return i.equals(t)}))&&(e=e.filter((e=>{let{spatialReference:i}=e;return i.equals(t)}))),e.length>1&&e.some((e=>{let{viewingMode:t}=e;return t!==ze.JY.Local}))&&(e=e.filter((e=>{let{viewingMode:t}=e;return t!==ze.JY.Local}))),e[0])}_getSupportedSpatialReferences(e){const t="supportedSpatialReferences"in e&&e.supportedSpatialReferences||(e.spatialReference?[e.spatialReference]:[]);if(0===t.length)return[];const i=[];for(const s of t){const t=this.getSpatialReferenceSupport({spatialReference:s,layer:e});if((0,d.pC)(t)){const e=(0,d.pC)(t.constraints)?t.constraints:[{spatialReference:s,viewingMode:null}];for(const{spatialReference:t,viewingMode:s}of e)(!this.requiresExtentInSpatialReference||(0,d.Wi)(this.userSpatialReference)||t.equals(this.userSpatialReference))&&i.push({spatialReference:t,viewingMode:s})}}return i}_pickExtentCandidate(e){const t=this.spatialReference;return e.find((e=>{let{extent:i}=e;return t.equals(i.spatialReference)}))||e[0]}_collectLayers(e){if("loaded"!==this._loadMaybe(this.map?.()))return{layers:[],updating:!0};const t={layers:[],preloading:-1,updating:!1};for(const i of e)if(this._collectCollection(i,t),t.preloading===this.sourcePreloadCount)break;return{layers:t.layers,updating:t.updating}}_collectCollection(e,t){if(e.layers){switch(this._loadMaybe(e.parent)){case"loading":return t.updating=!0,void++t.preloading;case"failed":return}for(const i of e.layers){switch(this._loadMaybe(i)){case"failed":continue;case"loading":t.updating=!0,++t.preloading;break;case"loaded":t.updating||t.layers.push(i),"layers"in i&&this._collectCollection({layers:i.layers},t)}if(t.preloading===this.sourcePreloadCount)break}}}_loadMaybe(e){return e&&"loadStatus"in e?"not-loaded"===e.loadStatus?(e.load(),"loading"):e.loadStatus:"loaded"}};var qe;(0,s._)([(0,v.Cb)()],He.prototype,"required",void 0),(0,s._)([(0,v.Cb)({constructOnly:!0})],He.prototype,"map",void 0),(0,s._)([(0,v.Cb)({constructOnly:!0})],He.prototype,"getSpatialReferenceSupport",void 0),(0,s._)([(0,v.Cb)()],He.prototype,"defaultSpatialReference",void 0),(0,s._)([(0,v.Cb)()],He.prototype,"userSpatialReference",void 0),(0,s._)([(0,v.Cb)()],He.prototype,"sourcePreloadCount",void 0),(0,s._)([(0,v.Cb)()],He.prototype,"priorityCollection",void 0),(0,s._)([(0,v.Cb)()],He.prototype,"requiresExtentInSpatialReference",void 0),(0,s._)([(0,v.Cb)()],He.prototype,"suspended",void 0),(0,s._)([(0,v.Cb)({readOnly:!0})],He.prototype,"ready",null),(0,s._)([(0,v.Cb)({readOnly:!0})],He.prototype,"heightModelInfoReady",null),(0,s._)([(0,v.Cb)({readOnly:!0})],He.prototype,"spatialReference",null),(0,s._)([(0,v.Cb)({readOnly:!0})],He.prototype,"extent",null),(0,s._)([(0,v.Cb)({readOnly:!0})],He.prototype,"heightModelInfo",null),(0,s._)([(0,v.Cb)({readOnly:!0})],He.prototype,"vcsWkid",null),(0,s._)([(0,v.Cb)({readOnly:!0})],He.prototype,"latestVcsWkid",null),(0,s._)([(0,v.Cb)({readOnly:!0})],He.prototype,"viewingMode",null),(0,s._)([(0,v.Cb)({readOnly:!0})],He.prototype,"tileInfo",null),(0,s._)([(0,v.Cb)({readOnly:!0})],He.prototype,"mapCollections",null),(0,s._)([(0,v.Cb)({readOnly:!0})],He.prototype,"_allLayers",null),(0,s._)([(0,v.Cb)({readOnly:!0})],He.prototype,"_spatialReferenceTask",null),(0,s._)([(0,v.Cb)({readOnly:!0})],He.prototype,"_tileInfoTask",null),(0,s._)([(0,v.Cb)({readOnly:!0})],He.prototype,"_heightModelInfoTask",null),(0,s._)([(0,v.Cb)({readOnly:!0})],He.prototype,"_extentCandidatesTask",null),(0,s._)([(0,v.Cb)()],He.prototype,"_extentTask",null),(0,s._)([(0,v.Cb)()],He.prototype,"_projectExtentTask",void 0),He=(0,s._)([(0,_.j)("esri.views.support.DefaultsFromMap")],He);const Ye=p.Z.getLogger("esri.views.View");let $e=qe=class extends((0,Z.p)(A.Z.EventedMixin((0,F.v)(D.Z)))){constructor(e){super(e),this._userSpatialReference=null,this._cursor=null,this.allLayerViews=new o.Z({getCollections:()=>[this.basemapView?.baseLayerViews,this.groundView?.layerViews,this.layerViews,this.basemapView?.referenceLayerViews],getChildrenFunction:e=>e.layerViews}),this.groundView=null,this.animation=null,this.basemapView=null,this.fatalError=null,this.extent=null,this.graphics=new q.J,this.analyses=new H,this.navigating=!1,this.typeSpecificPreconditionsReady=!0,this.layerViews=new a.Z,this.magnifier=new se,this.padding={left:0,top:0,right:0,bottom:0},this.ready=!1,this.spatialReferenceWarningDelay=1e3,this.supportsGround=!0,this.timeExtent=null,this.type=null,this.scale=null,this.updating=!1,this.initialExtentRequired=!0,this.input=new De,this.navigation=new Ge,this.layerViewManager=null,this.analysisViewManager=null,this.isHeightModelInfoRequired=!1,this.width=null,this.height=null,this.resizing=!1,this.suspended=!1,this.viewEvents=new de(this),this.persistableViewModels=new a.Z,this._isValid=!1,this._readyCycleForced=!1,this.handles.add((0,g.YP)((()=>this.preconditionsReady),(e=>{e?(this._currentSpatialReference=this.spatialReference,qe.views.add(this)):(this._currentSpatialReference=null,qe.views.remove(this)),this.notifyChange("spatialReference"),!e&&this.ready?(this.layerViewManager?.clear(),this.toolViewManager?.detach(),(0,d.pC)(this.analysisViewManager)&&this.analysisViewManager.detach(),this._teardown()):e&&!this.ready&&(this._startup(),(0,d.pC)(this.analysisViewManager)&&this.analysisViewManager.attach(),this.toolViewManager.attach())}),g.Z_))}initialize(){this.addResolvingPromise(this.validate().then((()=>(this._isValid=!0,(0,g.N1)((()=>this.ready)))))),this.basemapView=new Y({view:this}),this.layerViewManager=new te({view:this,layerViewImporter:{importLayerView:e=>this.importLayerView(e),hasLayerViewModule:e=>this.hasLayerViewModule(e)},supportsGround:this.supportsGround}),this.toolViewManager=new Ie({view:this}),this._setupSpatialReferenceLogger(),this.handles.add([(0,g.YP)((()=>this.initialExtentRequired),(e=>this.defaultsFromMap.required={...this.defaultsFromMap.required,extent:e}),{sync:!0,initial:!0}),(0,g.YP)((()=>this.ready),(e=>{this.defaultsFromMap&&(this.defaultsFromMap.suspended=e,this.defaultsFromMap.userSpatialReference=e?this.spatialReference:this._userSpatialReference)}),{sync:!0}),(0,g.YP)((()=>this._userSpatialReference),(e=>{this.defaultsFromMap&&(this.defaultsFromMap.userSpatialReference=e)}),{sync:!0,initial:!0})])}_setupSpatialReferenceLogger(){let e=null;this.handles.add([(0,g.YP)((()=>this.defaultsFromMap?.ready),(t=>{const i=this.map?.allLayers.length>0;if(t&&!this.spatialReference&&i){if((0,d.pC)(e))return;const t=(0,N.kB)((()=>e=(0,d.IM)(e)));e=(0,u.vr)((async t=>{try{await(0,u.e4)(this.spatialReferenceWarningDelay,null,t)}catch{return}finally{e=null}Ye.warn("#spatialReference","no spatial reference could be derived from the currently added map layers")})),this.handles.add(t,"spatial-reference-logger-task")}else this.handles.remove("spatial-reference-logger-task")}),{sync:!0})])}destroy(){if(this.destroyed)return;this.viewEvents.destroy(),this.allLayerViews.destroy(),this.navigation&&(this.navigation.destroy(),this._set("navigation",null)),this.graphics=(0,d.SC)(this.graphics),this.analyses=(0,d.SC)(this.analyses),this.handles.remove("defaultsFromMap"),this.defaultsFromMap.destroy(),this._set("defaultsFromMap",null),(0,d.SC)(this.analysisViewManager),this.toolViewManager=(0,d.SC)(this.toolViewManager),this.layerViewManager=(0,d.SC)(this.layerViewManager),this.basemapView=(0,d.SC)(this.basemapView),this.invalidate(),this._emitter.clear(),this.handles.removeAll();const e=this.map;this.map=null,e?.destroy()}_startup(){this._set("ready",!0)}_teardown(){this._set("ready",!1)}whenReady(){return Promise.resolve(this)}toMap(){return Ye.error("#toMap()","Not implemented on this instance of View"),null}get _defaultsFromMapSettings(){return{}}get defaultsFromMap(){return new He({required:{tileInfo:!1,heightModelInfo:!1,extent:!1},map:()=>this.map,getSpatialReferenceSupport:e=>this.getSpatialReferenceSupport(e),...this._defaultsFromMapSettings})}get heightModelInfo(){return this.getDefaultHeightModelInfo()}get interacting(){return this.navigating}get preconditionsReady(){return!(this.fatalError||!this._isValid||this._readyCycleForced||!this.map||G.Z.isLoadable(this.map)&&!this.map.loaded||0===this.width||0===this.height||!this.spatialReference||!this._validateSpatialReference(this.spatialReference)||!this._currentSpatialReference&&!this.defaultsFromMap?.ready||!this.typeSpecificPreconditionsReady)}set map(e){e!==this._get("map")&&(e?.destroyed&&(Ye.warn("#map","The provided map is already destroyed",{map:e}),e=null),G.Z.isLoadable(e)&&e.load().catch((()=>{})),this.initialized&&(this.forceReadyCycle(),this._currentSpatialReference=null),this._set("map",e))}get spatialReference(){let e=this._userSpatialReference||this._currentSpatialReference||this.getDefaultSpatialReference()||null;return e&&this.defaultsFromMap?.required?.heightModelInfo&&(e=e.clone(),e.vcsWkid=this.defaultsFromMap.vcsWkid,e.latestVcsWkid=this.defaultsFromMap.latestVcsWkid),e}set spatialReference(e){const t=!(0,x.fS)(e,this._get("spatialReference"));this._set("_userSpatialReference",e),t&&(this._set("spatialReference",e),this._spatialReferenceChanged(e))}_spatialReferenceChanged(e){}get stationary(){return!this.animation&&!this.navigating&&!this.resizing}get initialExtent(){return this.defaultsFromMap?.extent}get cursor(){const e=this.toolViewManager?this.toolViewManager.cursor:null;return(0,d.pC)(e)?e:this._cursor||"default"}set cursor(e){this._cursor=e,this.notifyChange("cursor")}get size(){return[this.width,this.height]}whenLayerView(e){return this.layerViewManager.whenLayerView(e)}getDefaultSpatialReference(){return this.defaultsFromMap?.spatialReference}getDefaultHeightModelInfo(){return(this.map&&"heightModelInfo"in this.map?this.map.heightModelInfo:void 0)??this.defaultsFromMap?.heightModelInfo??null}importLayerView(e){throw new l.Z("importLayerView() not implemented")}hasLayerViewModule(e){return!1}async validate(){}invalidate(){this._isValid=!1}getSpatialReferenceSupport(){return{constraints:null}}_validateSpatialReference(e){return(0,d.pC)(this.getSpatialReferenceSupport({spatialReference:e}))}when(e,t){return this.isResolved()&&!this.ready&&Ye.warn("#when()","Calling view.when() while the view is no longer ready but was already resolved once will resolve immediately. Use reactiveUtils.whenOnce(() => view.ready).then(...) instead."),super.when(e,t)}forceReadyCycle(){this.ready&&((0,g.gx)((()=>!1===this.preconditionsReady),(()=>this._readyCycleForced=!1),{once:!0}),this._readyCycleForced=!0)}addAndActivateTool(e){this.toolViewManager.tools.add(e),this.activeTool=e}tryFatalErrorRecovery(){this.fatalError=null}};$e.views=new a.Z,(0,s._)([(0,v.Cb)()],$e.prototype,"_userSpatialReference",void 0),(0,s._)([(0,z.B)("toolViewManager.activeTool")],$e.prototype,"activeTool",void 0),(0,s._)([(0,v.Cb)({readOnly:!0})],$e.prototype,"allLayerViews",void 0),(0,s._)([(0,v.Cb)()],$e.prototype,"groundView",void 0),(0,s._)([(0,v.Cb)()],$e.prototype,"animation",void 0),(0,s._)([(0,v.Cb)()],$e.prototype,"basemapView",void 0),(0,s._)([(0,v.Cb)({readOnly:!0})],$e.prototype,"_defaultsFromMapSettings",null),(0,s._)([(0,v.Cb)()],$e.prototype,"defaultsFromMap",null),(0,s._)([(0,v.Cb)()],$e.prototype,"fatalError",void 0),(0,s._)([(0,v.Cb)({type:w.Z})],$e.prototype,"extent",void 0),(0,s._)([(0,v.Cb)((0,B.z)(q.J,"graphics"))],$e.prototype,"graphics",void 0),(0,s._)([(0,v.Cb)((0,B.z)(H,"analyses"))],$e.prototype,"analyses",void 0),(0,s._)([(0,v.Cb)({readOnly:!0,type:U.Z})],$e.prototype,"heightModelInfo",null),(0,s._)([(0,v.Cb)({readOnly:!0})],$e.prototype,"interacting",null),(0,s._)([(0,v.Cb)({readOnly:!0})],$e.prototype,"navigating",void 0),(0,s._)([(0,v.Cb)({readOnly:!0,dependsOn:["fatalError","_isValid","_readyCycleForced","map","map.loaded?","width","height","spatialReference","_currentSpatialReference","defaultsFromMap.ready","typeSpecificPreconditionsReady"]})],$e.prototype,"preconditionsReady",null),(0,s._)([(0,v.Cb)({readOnly:!0})],$e.prototype,"typeSpecificPreconditionsReady",void 0),(0,s._)([(0,v.Cb)({type:a.Z,readOnly:!0})],$e.prototype,"layerViews",void 0),(0,s._)([(0,v.Cb)({type:se})],$e.prototype,"magnifier",void 0),(0,s._)([(0,v.Cb)({value:null,type:V.Z})],$e.prototype,"map",null),(0,s._)([(0,v.Cb)()],$e.prototype,"padding",void 0),(0,s._)([(0,v.Cb)({readOnly:!0})],$e.prototype,"ready",void 0),(0,s._)([(0,v.Cb)({type:W.Z})],$e.prototype,"spatialReference",null),(0,s._)([(0,v.Cb)()],$e.prototype,"spatialReferenceWarningDelay",void 0),(0,s._)([(0,v.Cb)()],$e.prototype,"stationary",null),(0,s._)([(0,v.Cb)({readOnly:!0})],$e.prototype,"supportsGround",void 0),(0,s._)([(0,v.Cb)({type:O.Z})],$e.prototype,"timeExtent",void 0),(0,s._)([(0,z.B)("toolViewManager.tools")],$e.prototype,"tools",void 0),(0,s._)([(0,v.Cb)()],$e.prototype,"toolViewManager",void 0),(0,s._)([(0,v.Cb)({readOnly:!0})],$e.prototype,"type",void 0),(0,s._)([(0,v.Cb)({type:Number})],$e.prototype,"scale",void 0),(0,s._)([(0,v.Cb)({readOnly:!0})],$e.prototype,"updating",void 0),(0,s._)([(0,v.Cb)({readOnly:!0})],$e.prototype,"initialExtentRequired",void 0),(0,s._)([(0,v.Cb)({readOnly:!0})],$e.prototype,"initialExtent",null),(0,s._)([(0,v.Cb)()],$e.prototype,"cursor",null),(0,s._)([(0,v.Cb)({readOnly:!0})],$e.prototype,"input",void 0),(0,s._)([(0,v.Cb)({type:Ge,nonNullable:!0})],$e.prototype,"navigation",void 0),(0,s._)([(0,v.Cb)()],$e.prototype,"layerViewManager",void 0),(0,s._)([(0,v.Cb)()],$e.prototype,"analysisViewManager",void 0),(0,s._)([(0,v.Cb)()],$e.prototype,"width",void 0),(0,s._)([(0,v.Cb)()],$e.prototype,"height",void 0),(0,s._)([(0,v.Cb)({readOnly:!0})],$e.prototype,"resizing",void 0),(0,s._)([(0,v.Cb)({value:null,readOnly:!0})],$e.prototype,"size",null),(0,s._)([(0,v.Cb)({readOnly:!0})],$e.prototype,"suspended",void 0),(0,s._)([(0,v.Cb)({readOnly:!0})],$e.prototype,"viewEvents",void 0),(0,s._)([(0,v.Cb)({readOnly:!0})],$e.prototype,"persistableViewModels",void 0),(0,s._)([(0,v.Cb)()],$e.prototype,"_isValid",void 0),(0,s._)([(0,v.Cb)()],$e.prototype,"_readyCycleForced",void 0),(0,s._)([(0,v.Cb)()],$e.prototype,"_currentSpatialReference",void 0),$e=qe=(0,s._)([(0,_.j)("esri.views.View")],$e);const Ke=$e;let Xe=class extends F.D{constructor(e){super(e),this.state="running",this.target=null}initialize(){this.addResolvingPromise(new Promise(((e,t)=>this._dfd={resolve:e,reject:t})))}get done(){return"finished"===this.state||"stopped"===this.state}stop(){"stopped"!==this.state&&"finished"!==this.state&&(this._set("state","stopped"),this._dfd.reject(new l.Z("ViewAnimation stopped")))}finish(){"stopped"!==this.state&&"finished"!==this.state&&(this._set("state","finished"),this._dfd.resolve())}update(e,t){t||(t=(0,u.y8)(e)?"waiting-for-target":"running"),this._set("target",e),this._set("state",t)}};(0,s._)([(0,v.Cb)({readOnly:!0})],Xe.prototype,"done",null),(0,s._)([(0,v.Cb)({readOnly:!0,type:String})],Xe.prototype,"state",void 0),(0,s._)([(0,v.Cb)()],Xe.prototype,"target",void 0),Xe=(0,s._)([(0,_.j)("esri.views.ViewAnimation")],Xe),function(e){e.State={RUNNING:"running",STOPPED:"stopped",FINISHED:"finished",WAITING_FOR_TARGET:"waiting-for-target"}}(Xe||(Xe={}));const Je=Xe;i(59486);var Qe=i(53942),et=i(86226);class tt{constructor(e,t,i,s){const r=e.targetGeometry,n=t.targetGeometry;s?"string"==typeof s&&(s=(0,Qe.Qc)(s)||Qe.LI.ease):s=Qe.LI.ease,this.easing=s,this.duration=i,this.sCenterX=r.x,this.sCenterY=r.y,this.sScale=e.scale,this.sRotation=e.rotation,this.tCenterX=n.x,this.tCenterY=n.y,this.tScale=t.scale,this.tRotation=t.rotation,this.dCenterX=this.tCenterX-this.sCenterX,this.dCenterY=this.tCenterY-this.sCenterY,this.dScale=this.tScale-this.sScale,this.dRotation=this.tRotation-this.sRotation,this.dRotation>180?this.dRotation-=360:this.dRotation<-180&&(this.dRotation+=360)}applyRatio(e,t){const i=this.easing(t);let s,r,n,a;t>=1?(s=this.tCenterX,r=this.tCenterY,n=this.tRotation,a=this.tScale):(s=this.sCenterX+i*this.dCenterX,r=this.sCenterY+i*this.dCenterY,n=this.sRotation+i*this.dRotation,a=this.sScale+i*this.dScale),e.targetGeometry.x=s,e.targetGeometry.y=r,e.scale=a,e.rotation=n}}let it=class extends D.Z{constructor(e){super(e),this.duration=200,this.transition=null,this.easing=Qe.LI.ease,this.view=null,this.viewpoint=null,this.viewpoint=new n.Z({targetGeometry:new b.Z,scale:0,rotation:0}),this._updateTask=(0,K.A)({postRender:this._postRender.bind(this)}),this._updateTask.pause()}destroy(){this._updateTask.remove(),this._updateTask=null}animate(e,t,i){this.stop();const s=this.viewpoint;(0,et.JG)(s,t),this.transition=new tt(this.viewpoint,e.target,i&&i.duration||this.duration,i&&i.easing||this.easing);const r=()=>{this.animation===e&&this._updateTask&&("finished"===e.state&&(this.transition.applyRatio(this.viewpoint,1),this.view.state&&(this.view.state.viewpoint=this.viewpoint.clone())),this.animation=null,this.updateFunction=null)};return e.when(r,r),this._startTime=performance.now(),this._updateTask.resume(),this.animation=e,e}animateContinous(e,t){this.stop(),this.updateFunction=t,this.viewpoint=e;const i=new Je({target:e.clone()}),s=()=>{this.animation===i&&this._updateTask&&(this.animation=null,this.updateFunction=null)};return i.when(s,s),this._startTime=performance.now(),this._updateTask.resume(),this.animation=i,i}stop(){this.animation&&(this.animation.stop(),this.animation=null,this.updateFunction=null)}_postRender(e){const t=this.animation;if(t&&t.state!==Je.State.STOPPED){if(this.updateFunction)this.updateFunction(this.viewpoint,e.deltaTime);else{const e=(performance.now()-this._startTime)/this.transition.duration,t=e>=1;this.transition.applyRatio(this.viewpoint,e),t&&this.animation.finish()}this.view.state&&(this.view.state.viewpoint=this.viewpoint.clone())}else this._updateTask.pause()}};(0,s._)([(0,v.Cb)()],it.prototype,"animation",void 0),(0,s._)([(0,v.Cb)()],it.prototype,"duration",void 0),(0,s._)([(0,v.Cb)()],it.prototype,"transition",void 0),(0,s._)([(0,v.Cb)()],it.prototype,"easing",void 0),(0,s._)([(0,v.Cb)()],it.prototype,"view",void 0),(0,s._)([(0,v.Cb)()],it.prototype,"viewpoint",void 0),it=(0,s._)([(0,_.j)("esri.views.2d.AnimationManager")],it);const st=it;class rt{constructor(e){this.view=e,this._frameTaskHandle=null,this._updateRequested=!1,this.stationary=!0,this.animationInProgress=!1,this.prepare=()=>{this._updateParameters.state=this.view.state,this._updateParameters.stationary=this.view.stationary,this._updateParameters.pixelRatio=window.devicePixelRatio,this._updateParameters.renderingOptions=this.view.renderingOptions},this.update=()=>{this._updateRequested=!1;const{basemapView:e,graphicsView:t,labelManager:i,layerViews:s,state:{id:r}}=this.view;e.baseLayerViews.forEach(this._updateLayerView,this),s.forEach(this._updateLayerView,this),e.referenceLayerViews.forEach(this._updateLayerView,this),(0,d.pC)(i)&&(i.lastUpdateId!==r&&(i.viewChange(),i.lastUpdateId=r),i.updateRequested&&i.processUpdate(this._updateParameters)),(0,d.pC)(t)&&(t.lastUpdateId!==r&&(t.viewChange(),t.lastUpdateId=r),t.updateRequested&&t.processUpdate(this._updateParameters)),this.view.graphicsTileStore.setViewState(this._updateParameters.state),this.animationInProgress||this._updateRequested||this._frameTaskHandle.pause()}}destroy(){this.stop()}start(){if(this._frameTaskHandle)return;const e=this.view;this.stationary=e.stationary,this._updateParameters={state:e.state,pixelRatio:window.devicePixelRatio,stationary:this.stationary,renderingOptions:e.renderingOptions},this._stationaryHandle=(0,g.YP)((()=>e.stationary),(e=>{this.stationary=e,this.requestFrame()})),this._frameTaskHandle=(0,K.A)(this),this.requestUpdate()}stop(){this._frameTaskHandle&&(this._updateRequested=!1,this._stationaryHandle.remove(),this._frameTaskHandle.remove(),this._updateParameters=this._stationaryHandle=this._frameTaskHandle=null,this.stationary=!0,this.animationInProgress=!1)}requestUpdate(){this._updateRequested||(this._updateRequested=!0,this.requestFrame())}requestFrame(){this._frameTaskHandle&&this._frameTaskHandle.resume()}_updateLayerView(e){const t=this.view.state,i=e.lastUpdateId;null!=i&&(this.stationary||e.moving)||(e.moving=!0,e.moveStart()),i!==t.id&&e.viewChange(),this.stationary&&e.moving&&(e.moving=!1,e.moveEnd()),e.lastUpdateId=t.id,e.updateRequested&&e.processUpdate(this._updateParameters),"layerViews"in e&&e.layerViews.forEach(this._updateLayerView,this)}}function nt(){return Promise.all([Promise.all([i.e(1378),i.e(2029),i.e(6426),i.e(345)]).then(i.bind(i,60345)),Promise.all([i.e(1378),i.e(2029),i.e(7331),i.e(7314),i.e(8651),i.e(6426),i.e(3370),i.e(4510),i.e(5082),i.e(8915),i.e(9815),i.e(7671),i.e(4318),i.e(9484),i.e(8348),i.e(2461),i.e(4280),i.e(7832)]).then(i.bind(i,87832))])}const at=()=>nt().then((()=>Promise.all([i.e(1378),i.e(2029),i.e(7331),i.e(7314),i.e(8651),i.e(6426),i.e(3370),i.e(4510),i.e(2263),i.e(1319)]).then(i.bind(i,71319)))),ot=()=>nt().then((()=>Promise.all([i.e(1378),i.e(7331),i.e(8651),i.e(5082),i.e(8915),i.e(9815),i.e(7671),i.e(9288)]).then(i.bind(i,99288)))),lt={"base-dynamic":()=>nt().then((()=>Promise.all([i.e(1378),i.e(2029),i.e(7331),i.e(7314),i.e(8651),i.e(6426),i.e(3370),i.e(4510),i.e(9679),i.e(2662)]).then(i.bind(i,52662)))),"base-tile":at,"bing-maps":at,csv:ot,"geo-rss":()=>nt().then((()=>Promise.all([i.e(1378),i.e(2029),i.e(7331),i.e(7314),i.e(8651),i.e(6426),i.e(3370),i.e(4510),i.e(5082),i.e(8915),i.e(9815),i.e(7671),i.e(4318),i.e(9484),i.e(8348),i.e(2461),i.e(4280),i.e(3684)]).then(i.bind(i,53684)))),feature:ot,geojson:ot,graphics:()=>nt().then((()=>Promise.all([i.e(1378),i.e(2029),i.e(7331),i.e(7314),i.e(8651),i.e(6426),i.e(3370),i.e(4510),i.e(5082),i.e(8915),i.e(9815),i.e(7671),i.e(4318),i.e(9484),i.e(8348),i.e(2461),i.e(4280),i.e(3558)]).then(i.bind(i,73558)))),group:()=>nt().then((()=>Promise.all([i.e(1378),i.e(2029),i.e(7331),i.e(7314),i.e(8651),i.e(6426),i.e(3370),i.e(4510),i.e(7873)]).then(i.bind(i,57873)))),imagery:()=>nt().then((()=>Promise.all([i.e(1378),i.e(2029),i.e(7331),i.e(7314),i.e(8651),i.e(6426),i.e(3370),i.e(4510),i.e(5082),i.e(8915),i.e(9815),i.e(7671),i.e(4318),i.e(9484),i.e(8348),i.e(2461),i.e(4280),i.e(5345),i.e(9679),i.e(394),i.e(2427),i.e(8226)]).then(i.bind(i,8226)))),"imagery-tile":()=>nt().then((()=>Promise.all([i.e(1378),i.e(2029),i.e(7331),i.e(7314),i.e(8651),i.e(6426),i.e(3370),i.e(4510),i.e(5345),i.e(394),i.e(2427),i.e(9582)]).then(i.bind(i,79582)))),kml:()=>nt().then((()=>Promise.all([i.e(1378),i.e(2029),i.e(7331),i.e(7314),i.e(8651),i.e(6426),i.e(3370),i.e(4510),i.e(5082),i.e(8915),i.e(9815),i.e(7671),i.e(4318),i.e(9484),i.e(8348),i.e(2461),i.e(4280),i.e(5450)]).then(i.bind(i,75450)))),"map-image":()=>nt().then((()=>Promise.all([i.e(1378),i.e(2029),i.e(7331),i.e(7314),i.e(8651),i.e(6426),i.e(3370),i.e(4510),i.e(5082),i.e(8915),i.e(9815),i.e(7671),i.e(4318),i.e(9484),i.e(8348),i.e(2461),i.e(4280),i.e(9679),i.e(7044)]).then(i.bind(i,87044)))),"map-notes":()=>nt().then((()=>Promise.all([i.e(1378),i.e(2029),i.e(7331),i.e(7314),i.e(8651),i.e(6426),i.e(3370),i.e(4510),i.e(5082),i.e(8915),i.e(9815),i.e(7671),i.e(4318),i.e(9484),i.e(8348),i.e(2461),i.e(4280),i.e(2186)]).then(i.bind(i,82186)))),media:()=>nt().then((()=>Promise.all([i.e(1378),i.e(2029),i.e(7331),i.e(7314),i.e(8651),i.e(6426),i.e(3370),i.e(4510),i.e(2974)]).then(i.bind(i,12974)))),"ogc-feature":()=>nt().then((()=>Promise.all([i.e(1378),i.e(7331),i.e(8651),i.e(5082),i.e(8915),i.e(9815),i.e(7671),i.e(9288),i.e(3158)]).then(i.bind(i,95429)))),"open-street-map":at,route:()=>nt().then((()=>Promise.all([i.e(1378),i.e(2029),i.e(7331),i.e(7314),i.e(8651),i.e(6426),i.e(3370),i.e(4510),i.e(5082),i.e(8915),i.e(9815),i.e(7671),i.e(4318),i.e(9484),i.e(8348),i.e(2461),i.e(4280),i.e(729),i.e(8405)]).then(i.bind(i,58405)))),stream:()=>nt().then((()=>Promise.all([i.e(1378),i.e(7331),i.e(8651),i.e(5082),i.e(8915),i.e(9815),i.e(7671),i.e(9288),i.e(397)]).then(i.bind(i,50397)))),"subtype-group":()=>nt().then((()=>Promise.all([i.e(1378),i.e(7331),i.e(8651),i.e(5082),i.e(8915),i.e(9815),i.e(7671),i.e(9288),i.e(3177)]).then(i.bind(i,13177)))),tile:at,"vector-tile":()=>nt().then((()=>Promise.all([i.e(1378),i.e(2029),i.e(7331),i.e(7314),i.e(8651),i.e(6426),i.e(3370),i.e(4510),i.e(5082),i.e(8915),i.e(969),i.e(8500)]).then(i.bind(i,44200)))),wcs:()=>nt().then((()=>Promise.all([i.e(1378),i.e(2029),i.e(7331),i.e(7314),i.e(8651),i.e(6426),i.e(3370),i.e(4510),i.e(5345),i.e(394),i.e(2427),i.e(9582)]).then(i.bind(i,79582)))),"web-tile":at,wfs:ot,wms:()=>nt().then((()=>Promise.all([i.e(1378),i.e(2029),i.e(7331),i.e(7314),i.e(8651),i.e(6426),i.e(3370),i.e(4510),i.e(9679),i.e(5396)]).then(i.bind(i,15396)))),wmts:()=>nt().then((()=>Promise.all([i.e(1378),i.e(2029),i.e(7331),i.e(7314),i.e(8651),i.e(6426),i.e(3370),i.e(4510),i.e(2263),i.e(5738)]).then(i.bind(i,5738)))),"line-of-sight":null,"base-elevation":null,"building-scene":null,elevation:null,"integrated-mesh":null,"point-cloud":null,voxel:null,scene:null,unknown:null,unsupported:null};const ct=e=>(0,d.pC)(lt[e.type]),ht=e=>{const t=lt[e.type];if((0,d.Wi)(t))throw function(e){const t=e.declaredClass?e.declaredClass.slice(e.declaredClass.lastIndexOf(".")+1):"Unknown",i=t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase();return new l.Z(`${i}:view-not-supported`,`${t} is not supported in 2D`)}(e);return t(e)};var pt,dt=i(59068),ut=i(34066),gt=i(88396),mt=i(69662);const yt=p.Z.getLogger("esri.views.MapView");let ft=pt=class extends D.Z{constructor(e){super(e),this.geometry=null,this.spatialReference=null}get normalizedGeometry(){if((0,d.Wi)(this.geometry)||!this.spatialReference)return null;if(!this.spatialReference.equals(this.geometry.spatialReference))try{return(0,C.iV)(this.geometry,this.spatialReference)}catch(Ar){return yt.error("#constraints.geometry","could not project the geometry to the view's spatial reference",{geometry:this.geometry,spatialReference:this.spatialReference,error:Ar}),null}return this.geometry}constrain(e,t){if((0,d.Wi)(this.normalizedGeometry))return e;const i=e.targetGeometry;if("extent"===this.normalizedGeometry.type?(0,ut.aV)(this.normalizedGeometry,i):(0,ut.CI)(this.normalizedGeometry,i))return e;const{coordinate:s}=function(e,t){const{spatialReference:i}=t,s=[t.x,t.y];let r=Number.POSITIVE_INFINITY,n=0,a=0;const o=[0,0],l="extent"===e.type?[[[e.xmin,e.ymin],[e.xmin,e.ymax],[e.xmax,e.ymax],[e.xmax,e.ymin],[e.xmin,e.ymin]]]:e.rings;for(const c of l)for(let e=0;e<c.length-1;e++){(0,mt.Tx)(o,s,c,e);const t=(0,gt.j)(s,o);t<r&&(r=t,n=o[0],a=o[1])}return{coordinate:new b.Z({x:n,y:a,spatialReference:i}),distance:r}}(this.normalizedGeometry,i);return s?(e.targetGeometry=s,e):e}clone(){return new pt({geometry:this.geometry?.clone(),spatialReference:this.spatialReference?.clone()})}};var vt;(0,s._)([(0,v.Cb)({constructOnly:!0})],ft.prototype,"geometry",void 0),(0,s._)([(0,v.Cb)({readOnly:!0})],ft.prototype,"normalizedGeometry",null),(0,s._)([(0,v.Cb)({constructOnly:!0})],ft.prototype,"spatialReference",void 0),ft=pt=(0,s._)([(0,_.j)("esri.views.2d.constraints.GeometryConstraint")],ft);let _t=vt=class extends D.Z{constructor(){super(...arguments),this.enabled=!0,this.rotationEnabled=!0}constrain(e,t){return this.enabled&&t?(this.rotationEnabled||(e.rotation=t.rotation),e):e}clone(){return new vt({enabled:this.enabled,rotationEnabled:this.rotationEnabled})}};(0,s._)([(0,v.Cb)()],_t.prototype,"enabled",void 0),(0,s._)([(0,v.Cb)()],_t.prototype,"rotationEnabled",void 0),_t=vt=(0,s._)([(0,_.j)("esri.views.2d.constraints.RotationConstraint")],_t);const wt=_t;var bt;let Ct=bt=class extends D.Z{constructor(e){super(e),this._lodByScale={},this._scales=[],this.effectiveLODs=null,this.effectiveMinZoom=-1,this.effectiveMaxZoom=-1,this.effectiveMinScale=0,this.effectiveMaxScale=0,this.lods=null,this.minZoom=-1,this.maxZoom=-1,this.minScale=0,this.maxScale=0,this.snapToZoom=!0}initialize(){let e,{lods:t,minScale:i,maxScale:s,minZoom:r,maxZoom:n}=this,a=-1,o=-1,l=!1,c=!1;if(0!==i&&0!==s&&i<s&&([i,s]=[s,i]),!t||!t.length)return this._set("effectiveMinScale",i),void this._set("effectiveMaxScale",s);t=t.map((e=>e.clone())),t.sort(((e,t)=>t.scale-e.scale)),t.forEach(((e,t)=>e.level=t));for(const h of t)!l&&i>0&&i>=h.scale&&(a=h.level,l=!0),!c&&s>0&&s>=h.scale&&(o=e?e.level:-1,c=!0),e=h;-1===r&&(r=0===i?0:a),-1===n&&(n=0===s?t.length-1:o),r=Math.max(r,0),r=Math.min(r,t.length-1),n=Math.max(n,0),n=Math.min(n,t.length-1),r>n&&([r,n]=[n,r]),i=t[r].scale,s=t[n].scale,t.splice(0,r),t.splice(n-r+1,t.length),t.forEach(((e,t)=>{this._lodByScale[e.scale]=e,this._scales[t]=e.scale})),this._set("effectiveLODs",t),this._set("effectiveMinZoom",r),this._set("effectiveMaxZoom",n),this._set("effectiveMinScale",i),this._set("effectiveMaxScale",s)}constrain(e,t){if(t&&e.scale===t.scale)return e;const i=this.effectiveMinScale,s=this.effectiveMaxScale,r=e.targetGeometry,n=t&&t.targetGeometry,a=0!==s&&e.scale<s,o=0!==i&&e.scale>i;if(a||o){const a=o?i:s;if(n){const i=(a-t.scale)/(e.scale-t.scale);r.x=n.x+(r.x-n.x)*i,r.y=n.y+(r.y-n.y)*i}e.scale=a}return this.snapToZoom&&this.effectiveLODs&&(e.scale=this._getClosestScale(e.scale)),e}fit(e){if(!this.effectiveLODs||!this.snapToZoom)return this.constrain(e,null);const t=this.scaleToZoom(e.scale),i=Math.abs(t-Math.floor(t));return e.scale=this.zoomToScale(i>.99?Math.round(t):Math.floor(t)),e}zoomToScale(e){if(!this.effectiveLODs)return 0;e-=this.effectiveMinZoom,e=Math.max(0,e);const t=this._scales;if(e<=0)return t[0];if(e>=t.length)return t[t.length-1];const i=Math.round(e-.5),s=Math.round(e);return t[s]+(s-e)*(t[i]-t[s])}scaleToZoom(e){if(!this.effectiveLODs)return-1;const t=this._scales;let i,s;if(e>=t[0])return this.effectiveMinZoom;if(e<=t[t.length-1])return this.effectiveMaxZoom;for(let r=0;r<t.length-1;r++){if(i=t[r],s=t[r+1],s===e)return r+this.effectiveMinZoom+1;if(i>e&&s<e)return r+this.effectiveMinZoom+1-(e-s)/(i-s)}}snapToClosestScale(e){if(!this.effectiveLODs)return e;const t=this.scaleToZoom(e);return this.zoomToScale(Math.round(t))}snapToNextScale(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.5;if(!this.effectiveLODs)return e*t;const i=Math.round(this.scaleToZoom(e));return this.zoomToScale(i+1)}snapToPreviousScale(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;if(!this.effectiveLODs)return e*t;const i=Math.round(this.scaleToZoom(e));return this.zoomToScale(i-1)}clone(){return new bt({lods:this.lods,minZoom:this.minZoom,maxZoom:this.maxZoom,minScale:this.minScale,maxScale:this.maxScale})}_getClosestScale(e){return this._lodByScale[e]||(e=this._scales.reduce(((t,i)=>Math.abs(i-e)<=Math.abs(t-e)?i:t),this._scales[0])),this._lodByScale[e].scale}};(0,s._)([(0,v.Cb)({readOnly:!0})],Ct.prototype,"effectiveLODs",void 0),(0,s._)([(0,v.Cb)({readOnly:!0})],Ct.prototype,"effectiveMinZoom",void 0),(0,s._)([(0,v.Cb)({readOnly:!0})],Ct.prototype,"effectiveMaxZoom",void 0),(0,s._)([(0,v.Cb)({readOnly:!0})],Ct.prototype,"effectiveMinScale",void 0),(0,s._)([(0,v.Cb)({readOnly:!0})],Ct.prototype,"effectiveMaxScale",void 0),(0,s._)([(0,v.Cb)()],Ct.prototype,"lods",void 0),(0,s._)([(0,v.Cb)()],Ct.prototype,"minZoom",void 0),(0,s._)([(0,v.Cb)()],Ct.prototype,"maxZoom",void 0),(0,s._)([(0,v.Cb)()],Ct.prototype,"minScale",void 0),(0,s._)([(0,v.Cb)()],Ct.prototype,"maxScale",void 0),(0,s._)([(0,v.Cb)()],Ct.prototype,"snapToZoom",void 0),Ct=bt=(0,s._)([(0,_.j)("esri.views.2d.constraints.ZoomConstraint")],Ct);const xt=Ct;var Tt=i(80885);const Mt={base:null,key:"type",typeMap:{extent:w.Z,polygon:Tt.Z}};let St=class extends D.Z{constructor(e){super(e),this.lods=null,this.minScale=0,this.maxScale=0,this.minZoom=-1,this.maxZoom=-1,this.rotationEnabled=!0,this.snapToZoom=!0}destroy(){this.view=null,this._set("_zoom",null),this._set("_rotation",null),this._set("_geometry",null)}set geometry(e){e?this._set("geometry",e):this._set("geometry",null)}get version(){return this.commitProperty("_zoom"),this.commitProperty("_rotation"),this.commitProperty("_geometry"),(this._get("version")??0)+1}get _defaultLODs(){const e=this.view?.defaultsFromMap?.tileInfo,t=this.view?.spatialReference;return e&&t&&e.spatialReference.equals(t)?e.lods:null}get _geometry(){return new ft({geometry:this.geometry,spatialReference:this.view?.spatialReference})}get _rotation(){return new wt({rotationEnabled:this.rotationEnabled})}get _zoom(){const e=this._get("_zoom"),t=this.lods||this._defaultLODs,i=this.minZoom,s=this.maxZoom,r=this.minScale,n=this.maxScale,a=this.snapToZoom;return e&&e.lods===t&&e.minZoom===i&&e.maxZoom===s&&e.minScale===r&&e.maxScale===n&&e.snapToZoom===a?e:new xt({lods:t,minZoom:i,maxZoom:s,minScale:r,maxScale:n,snapToZoom:a})}canZoomInTo(e){const t=this.effectiveMaxScale;return 0===t||e>=t}canZoomOutTo(e){const t=this.effectiveMinScale;return 0===t||e<=t}constrain(e,t){return this._zoom.constrain(e,t),this._rotation.constrain(e,t),this._geometry.constrain(e,t),e}constrainByGeometry(e){return this._geometry.constrain(e)}fit(e){return this._zoom.fit(e)}zoomToScale(e){return this._zoom.zoomToScale(e)}scaleToZoom(e){return this._zoom.scaleToZoom(e)}snapScale(e){return this._zoom.snapToClosestScale(e)}snapToNextScale(e){return this._zoom.snapToNextScale(e)}snapToPreviousScale(e){return this._zoom.snapToPreviousScale(e)}};(0,s._)([(0,v.Cb)({readOnly:!0,aliasOf:"_zoom.effectiveLODs"})],St.prototype,"effectiveLODs",void 0),(0,s._)([(0,v.Cb)({readOnly:!0,aliasOf:"_zoom.effectiveMinScale"})],St.prototype,"effectiveMinScale",void 0),(0,s._)([(0,v.Cb)({readOnly:!0,aliasOf:"_zoom.effectiveMaxScale"})],St.prototype,"effectiveMaxScale",void 0),(0,s._)([(0,v.Cb)({readOnly:!0,aliasOf:"_zoom.effectiveMinZoom"})],St.prototype,"effectiveMinZoom",void 0),(0,s._)([(0,v.Cb)({readOnly:!0,aliasOf:"_zoom.effectiveMaxZoom"})],St.prototype,"effectiveMaxZoom",void 0),(0,s._)([(0,v.Cb)({types:Mt,value:null})],St.prototype,"geometry",null),(0,s._)([(0,v.Cb)({type:[dt.Z]})],St.prototype,"lods",void 0),(0,s._)([(0,v.Cb)()],St.prototype,"minScale",void 0),(0,s._)([(0,v.Cb)()],St.prototype,"maxScale",void 0),(0,s._)([(0,v.Cb)()],St.prototype,"minZoom",void 0),(0,s._)([(0,v.Cb)()],St.prototype,"maxZoom",void 0),(0,s._)([(0,v.Cb)()],St.prototype,"rotationEnabled",void 0),(0,s._)([(0,v.Cb)()],St.prototype,"snapToZoom",void 0),(0,s._)([(0,v.Cb)()],St.prototype,"view",void 0),(0,s._)([(0,v.Cb)({readOnly:!0})],St.prototype,"version",null),(0,s._)([(0,v.Cb)()],St.prototype,"_defaultLODs",null),(0,s._)([(0,v.Cb)({type:ft})],St.prototype,"_geometry",null),(0,s._)([(0,v.Cb)({type:wt})],St.prototype,"_rotation",null),(0,s._)([(0,v.Cb)({readOnly:!0,type:xt})],St.prototype,"_zoom",null),St=(0,s._)([(0,_.j)("esri.views.2d.MapViewConstraints")],St);const It=St;var kt,Lt=i(6394),Pt=i(46784),Et=i(26277),Rt=i(22018),Vt=i(11245),Ot=i(89494),Dt=i(22753),At=i(23588),Zt=i(15245);function Nt(e){return function(e){return e instanceof Float32Array&&e.length>=2}(e)||function(e){return Array.isArray(e)&&e.length>=2}(e)}const Gt=[0,0];let Ft=kt=class extends Pt.wq{constructor(e){super(e),this._viewpoint2D={center:(0,Lt.a)(),rotation:0,scale:0,spatialReference:null},this.center=[0,0],this.extent=new w.Z,this.id=0,this.inverseTransform=(0,Ot.c)(),this.resolution=0,this.rotation=0,this.scale=0,this.transform=(0,Ot.c)(),this.transformNoRotation=(0,Ot.c)(),this.displayMat3=(0,At.c)(),this.displayViewMat3=(0,At.c)(),this.viewMat3=(0,At.c)(),this.viewMat2d=(0,Vt.c)(),this.worldScreenWidth=0,this.size=[0,0]}set pixelRatio(e){this._set("pixelRatio",e),this._update()}set size(e){this._set("size",e),this._update()}set viewpoint(e){if(e){const t=this._viewpoint2D,i=e.targetGeometry;t.center[0]=i.x,t.center[1]=i.y,t.rotation=e.rotation,t.scale=e.scale,t.spatialReference=i.spatialReference}this._update()}copy(e){const t=this.size,i=this.viewpoint;return i&&t?(this.viewpoint=(0,et.JG)(i,e.viewpoint),this._set("size",(0,gt.c)(t,e.size))):(this.viewpoint=e.viewpoint.clone(),this._set("size",[e.size[0],e.size[1]])),this._set("pixelRatio",e.pixelRatio),this}clone(){return new kt({size:this.size,viewpoint:this.viewpoint.clone(),pixelRatio:this.pixelRatio})}toMap(e,t,i){return Nt(t)?(0,gt.t)(e,t,this.inverseTransform):(Gt[0]=t,Gt[1]=i,(0,gt.t)(e,Gt,this.inverseTransform))}toScreen(e,t,i){return Nt(t)?(0,gt.t)(e,t,this.transform):(Gt[0]=t,Gt[1]=i,(0,gt.t)(e,Gt,this.transform))}toScreenNoRotation(e,t,i){return Nt(t)?(0,gt.t)(e,t,this.transformNoRotation):(Gt[0]=t,Gt[1]=i,(0,gt.t)(e,Gt,this.transformNoRotation))}getScreenTransform(e,t){const{center:i}=this._viewpoint2D,s=this._get("pixelRatio")||1,r=this._get("size");return(0,et.Rb)(e,i,r,t,0,s),e}_update(){const{center:e,spatialReference:t,scale:i,rotation:s}=this._viewpoint2D,r=this._get("pixelRatio")||1,a=this._get("size"),o=new n.Z({targetGeometry:new b.Z(e[0],e[1],t),scale:i,rotation:s});if(this._set("viewpoint",o),!a||!t||!i)return;this.resolution=(0,et.uG)(o),this.rotation=s,this.scale=i,this.spatialReference=t,(0,gt.c)(this.center,e);const l=0!==a[0]?2/a[0]:0,c=0!==a[1]?-2/a[1]:0;(0,Dt.s)(this.displayMat3,l,0,0,0,c,0,-1,1,1);const h=(0,Dt.b)(this.viewMat3),p=(0,Zt.f)(a[0]/2,a[1]/2),d=(0,Zt.f)(-a[0]/2,-a[1]/2),u=(0,Et.t)(s);(0,Dt.c)(h,h,p),(0,Dt.r)(h,h,u),(0,Dt.c)(h,h,d),(0,Dt.m)(this.displayViewMat3,this.displayMat3,h);const g=(0,Rt.a)(this.viewMat2d,p);return(0,Rt.r)(g,g,u),(0,Rt.t)(g,g,d),(0,et.bk)(this.extent,o,a),(0,et.Ck)(this.transform,o,a,r),(0,Rt.b)(this.inverseTransform,this.transform),(0,et.Jp)(this.transformNoRotation,o,a,r),this.worldScreenWidth=(0,et.L2)(this.spatialReference,this.resolution),this._set("id",this.id+1),this}};(0,s._)([(0,v.Cb)({readOnly:!0})],Ft.prototype,"id",void 0),(0,s._)([(0,v.Cb)({value:1,json:{write:!0}})],Ft.prototype,"pixelRatio",null),(0,s._)([(0,v.Cb)({json:{write:!0}})],Ft.prototype,"size",null),(0,s._)([(0,v.Cb)()],Ft.prototype,"spatialReference",void 0),(0,s._)([(0,v.Cb)({type:n.Z,json:{write:!0}})],Ft.prototype,"viewpoint",null),Ft=kt=(0,s._)([(0,_.j)("esri.views.2d.ViewState")],Ft);const zt=Ft;var Bt,Ut;let Wt=Bt=class extends D.Z{constructor(){super(...arguments),this.left=0,this.top=0,this.right=0,this.bottom=0}clone(){return new Bt({left:this.left,top:this.top,right:this.right,bottom:this.bottom})}};(0,s._)([(0,v.Cb)()],Wt.prototype,"left",void 0),(0,s._)([(0,v.Cb)()],Wt.prototype,"top",void 0),(0,s._)([(0,v.Cb)()],Wt.prototype,"right",void 0),(0,s._)([(0,v.Cb)()],Wt.prototype,"bottom",void 0),Wt=Bt=(0,s._)([(0,_.j)("esri.views.2d.PaddedViewState.Padding")],Wt);let jt=Ut=class extends zt{constructor(){super(...arguments),this.paddedViewState=new zt,this._updateContent=(()=>{const e=(0,Lt.a)();return()=>{const t=this._get("size"),i=this._get("padding");if(!t||!i)return;const s=this.paddedViewState;(0,gt.a)(e,i.left+i.right,i.top+i.bottom),(0,gt.g)(e,t,e),(0,gt.c)(s.size,e);const r=s.viewpoint;r&&(this.viewpoint=r)}})(),this.own((0,g.YP)((()=>[this.size,this.padding]),(()=>this._updateContent()),g.Z_)),this.padding=new Wt,this.size=[0,0]}set padding(e){this._set("padding",e||new Wt)}set viewpoint(e){if(e){const t=e.clone();this.paddedViewState.viewpoint=e,(0,et.H4)(t,e,this._get("size"),this._get("padding"));const i=this._viewpoint2D,s=t.targetGeometry;i.center[0]=s.x,i.center[1]=s.y,i.rotation=t.rotation,i.scale=t.scale,i.spatialReference=s.spatialReference,this._update()}}clone(){return new Ut({padding:this.padding.clone(),size:this.size.slice(),viewpoint:this.paddedViewState.viewpoint.clone(),pixelRatio:this.pixelRatio})}};(0,s._)([(0,v.Cb)()],jt.prototype,"paddedViewState",void 0),(0,s._)([(0,v.Cb)({type:Wt})],jt.prototype,"padding",null),(0,s._)([(0,v.Cb)()],jt.prototype,"viewpoint",null),jt=Ut=(0,s._)([(0,_.j)("esri.views.2d.PaddedViewState")],jt);const Ht=jt;i(5131);var qt=i(37995);i(73828),i(32344),i(85269);function Yt(e,t){switch(t){case"primary":return"touch"===e.pointerType||0===e.button;case"secondary":return"touch"!==e.pointerType&&2===e.button;case"tertiary":return"touch"!==e.pointerType&&1===e.button}}class $t extends le.a{constructor(e,t){super(!0),this.view=e,this.registerIncoming("double-click",t,(e=>this._handleDoubleClick(e,t)))}_handleDoubleClick(e,t){Yt(e.data,"primary")&&(e.stopPropagation(),t?this.view.mapViewNavigation.zoomOut([e.data.x,e.data.y]):this.view.mapViewNavigation.zoomIn([e.data.x,e.data.y]))}}class Kt extends le.a{constructor(e,t,i){super(!0),this.view=e,this.pointerType=t,this.registerIncoming("double-tap-drag",i,(e=>this._handleDoubleTapDrag(e)))}_handleDoubleTapDrag(e){const{data:t}=e,{pointerType:i}=t;if(i!==this.pointerType)return;e.stopPropagation();const{action:s,delta:r}=t,{view:n}=this,{mapViewNavigation:a}=n;switch(s){case"begin":{const{scale:e}=n;this._startScale=e,this._currentScale=e,this._previousDelta=r,a.begin();break}case"update":{if(this._previousDelta.y===r.y)return;this._previousDelta=r;const e=1.015**r.y,t=this._startScale*e,i=t/this._currentScale;a.setViewpointImmediate(i),this._currentScale=t;break}case"end":{const{constraints:e}=n,{effectiveLODs:t,snapToZoom:i}=e;if(!i||!t)return void a.end();const s=e.snapScale(this._currentScale),o=(r.y>0?Math.max(s,e.snapToPreviousScale(this._startScale)):Math.min(s,e.snapToNextScale(this._startScale)))/this._currentScale;a.zoom(o);break}}}}class Xt{constructor(e){this.callbacks=e,this.currentCount=0,this.callbacks.condition||(this.callbacks.condition=()=>!0)}handle(e){const t=e.data,i=t.pointers.size;switch(t.action){case"start":this.currentCount=i,this._emitStart(e);break;case"added":this._emitEnd(this.previousEvent),this.currentCount=i,this._emitStart(e);break;case"update":this._emitUpdate(e);break;case"removed":this.startEvent&&this._emitEnd(this.previousEvent),this.currentCount=i,this._emitStart(e);break;case"end":this._emitEnd(e),this.currentCount=0}this.previousEvent=e}_emitStart(e){this.startEvent=e,this.callbacks.condition(this.currentCount,e)&&this.callbacks.start(this.currentCount,e,this.startEvent)}_emitUpdate(e){this.callbacks.condition(this.currentCount,e)&&this.callbacks.update(this.currentCount,e,this.startEvent)}_emitEnd(e){this.callbacks.condition(this.currentCount,e)&&this.callbacks.end(this.currentCount,e,this.startEvent),this.startEvent=null}}class Jt extends le.a{constructor(e,t,i){super(!0),this.view=e,this.pointerAction=t,this.registerIncoming("drag",i,(e=>this._handleDrag(e))),this.registerIncoming("pointer-down",(()=>this.stopMomentumNavigation()))}onInstall(e){super.onInstall(e),this.dragEventSeparator=new Xt({start:(e,t)=>{this.view.mapViewNavigation.pan.begin(this.view,t.data),t.stopPropagation()},update:(e,t)=>{this.view.mapViewNavigation.pan.update(this.view,t.data),t.stopPropagation()},end:(e,t)=>{this.view.mapViewNavigation.pan.end(this.view,t.data),t.stopPropagation()},condition:(e,t)=>1===e&&Yt(t.data,this.pointerAction)})}_handleDrag(e){const t=this.view.mapViewNavigation;t.pinch.zoomMomentum||t.pinch.rotateMomentum?this.stopMomentumNavigation():this.dragEventSeparator.handle(e)}stopMomentumNavigation(){this.view.mapViewNavigation.pan.stopMomentumNavigation()}}class Qt extends le.a{constructor(e,t,i){super(!0),this.view=e,this.pointerAction=t;const s=this.view.mapViewNavigation;this.dragEventSeparator=new Xt({start:(e,t)=>{s.rotate.begin(this.view,t.data),t.stopPropagation()},update:(e,t)=>{s.rotate.update(this.view,t.data),t.stopPropagation()},end:(e,t)=>{s.rotate.end(),t.stopPropagation()},condition:(e,t)=>1===e&&Yt(t.data,this.pointerAction)}),this.registerIncoming("drag",i,(e=>this.dragEventSeparator.handle(e)))}}var ei=i(11186);function ti(e){let t=e*e;return e<0&&(t*=-1),t}class ii extends le.a{constructor(e){super(!0),this.view=e,this.frameTask=null,this.watchHandles=new S.Z,this.currentDevice=null,this.transformation={translation:[0,0,0],heading:0,tilt:0,zoom:0},this.handle=this.registerIncoming("gamepad",(e=>this._handleGamePadEvent(e))),this.handle.pause()}onInstall(e){super.onInstall(e),this.watchHandles.add([(0,g.YP)((()=>this.view.navigation.gamepad?.enabled),(e=>{e?(this.handle.resume(),this.frameTask||(this.frameTask=(0,K.A)({update:e=>this._frameUpdate(e.deltaTime)}))):(this.handle.pause(),this.frameTask&&(this.frameTask.remove(),this.frameTask=null))}),g.nn)])}onUninstall(){this.watchHandles.removeAll(),this.frameTask&&(this.frameTask.remove(),this.frameTask=null),super.onUninstall()}_handleGamePadEvent(e){const t=this.view.navigation.gamepad.device;t&&e.data.device!==t||this.currentDevice&&this.currentDevice!==e.data.device||("end"===e.data.action?(this.currentDevice=null,function(e){e.translation[0]=0,e.translation[1]=0,e.translation[2]=0,e.heading=0,e.tilt=0}(this.transformation)):(this.currentDevice=e.data.device,function(e,t,i){const s=i,r=e.state,n=e.device,a="forward-down"===t.tiltDirection?1:-1;"standard"===n.deviceType?(s.translation[0]=ti(r.axes[0]),s.translation[1]=ti(r.axes[1]),s.translation[2]=ti(r.buttons[7])-ti(r.buttons[6]),s.heading=ti(r.axes[2]),s.tilt=ti(r.axes[3])):"spacemouse"===n.deviceType&&(s.translation[0]=1.2*ti(r.axes[0]),s.translation[1]=1.2*ti(r.axes[1]),s.translation[2]=2*-ti(r.axes[2]),s.heading=1.2*ti(r.axes[5]),s.tilt=1.2*ti(r.axes[3])),s.tilt*=a,(0,ei.g)(s.translation,s.translation,1)}(e.data,this.view.navigation.gamepad,this.transformation)))}_frameUpdate(e){const t=this.transformation;if(function(e){return 0===e.translation[0]&&0===e.translation[1]&&0===e.translation[2]&&0===e.heading&&0===e.tilt&&0===e.zoom}(t))return;const i=this.view.viewpoint.clone(),s=this.view.navigation.gamepad.velocityFactor,r=ri*s*e;(0,et.Rx)(i,i,[t.translation[0]*r,-t.translation[1]*r]);const n=1+t.translation[2]*ni*e,a=this.view.constraints.rotationEnabled?-t.heading*si*e:0,o=this.view.size,l=[o[0]/2,o[1]];(0,et.UZ)(i,i,n,a,l,o);const c=this.view.constraints.constrain(i,this.view.viewpoint);this.view.viewpoint=c}}const si=.06,ri=.7,ni=6e-4;class ai extends le.a{constructor(e,t,i){super(!0),this.view=e,this.keys=t,this._pressed=!1,this._keyMap={[t.left]:"left",[t.right]:"right",[t.up]:"up",[t.down]:"down"},this.registerIncoming("key-down",i,(e=>this._handleKeyDown(e))),this.registerIncoming("key-up",i,(e=>this._handleKeyUp(e))),this.registerIncoming("blur",i,(()=>this._handleBlur()))}_handleKeyDown(e){e.data.repeat||this._handleKey(e,!0)}_handleKeyUp(e){this._handleKey(e,!1)}_handleBlur(){this._pressed&&(this._pressed=!1,this.view.mapViewNavigation.stop())}_handleKey(e,t){const i=this._keyMap[e.data.key];if(this._pressed=null!=i,this._pressed){if(t)switch(this.view.mapViewNavigation.begin(),i){case"left":this.view.mapViewNavigation.continousPanLeft();break;case"right":this.view.mapViewNavigation.continousPanRight();break;case"up":this.view.mapViewNavigation.continousPanUp();break;case"down":this.view.mapViewNavigation.continousPanDown()}else this._pressed=!1,this.view.mapViewNavigation.stop();e.stopPropagation()}}}class oi extends le.a{constructor(e,t,i){super(!0),this.view=e,this.keys=t,this._pressed=!1,this._keyToDirection={[t.clockwiseOption1]:"clockwise",[t.clockwiseOption2]:"clockwise",[t.counterClockwiseOption1]:"counterClockwise",[t.counterClockwiseOption2]:"counterClockwise",[t.resetOption1]:"reset",[t.resetOption2]:"reset"},this.registerIncoming("key-down",i,(e=>this._handleKeyDown(e))),this.registerIncoming("key-up",i,(e=>this._handleKeyUp(e))),this.registerIncoming("blur",i,(()=>this._handleBlur()))}_handleKeyDown(e){e.data.repeat||this._handleKey(e,!0)}_handleKeyUp(e){this._handleKey(e,!1)}_handleBlur(){this._pressed&&(this._pressed=!1,this.view.mapViewNavigation.stop())}_handleKey(e,t){const i=e.modifiers;if(i.size>0&&!i.has("Shift")||!this.view.constraints.rotationEnabled)return;const s=this._keyToDirection[e.data.key];if(this._pressed=null!=s,this._pressed){if(t)switch(this.view.mapViewNavigation.begin(),s){case"clockwise":this.view.mapViewNavigation.continousRotateClockwise();break;case"counterClockwise":this.view.mapViewNavigation.continousRotateCounterclockwise();break;case"reset":this.view.mapViewNavigation.resetRotation()}else this._pressed=!1,this.view.mapViewNavigation.stop();e.stopPropagation()}}}var li;!function(e){e[e.IN=0]="IN",e[e.OUT=1]="OUT"}(li||(li={}));class ci extends le.a{constructor(e,t,i){super(!0),this.view=e,this.keys=t,this._keysToZoomAction={},this.registerIncoming("key-down",i,(e=>this._handleKeyDown(e))),t.zoomIn.forEach((e=>this._keysToZoomAction[e]=li.IN)),t.zoomOut.forEach((e=>this._keysToZoomAction[e]=li.OUT))}_handleKeyDown(e){this._handleKey(e)}_handleKey(e){const t=e.modifiers;if(t.size>0&&!t.has("Shift"))return;const{key:i}=e.data;if(!(i in this._keysToZoomAction))return;const s=this._keysToZoomAction[i],{mapViewNavigation:r}=this.view;let n=null;switch(s){case li.IN:n=r.zoomIn();break;case li.OUT:n=r.zoomOut();break;default:return}r.begin(),n.then((()=>r.end())),e.stopPropagation()}}class hi extends le.a{constructor(e,t){super(!0),this.view=e,this._canZoom=!0,this.registerIncoming("mouse-wheel",t,(e=>this._handleMouseWheel(e)))}_handleMouseWheel(e){if(!this.view.navigation.mouseWheelZoomEnabled)return;if(e.preventDefault(),e.stopPropagation(),!this._canZoom)return;const t=this.view.mapViewNavigation,{x:i,y:s,deltaY:r}=e.data,n=1/.6**(1/60*r),a=t.zoom(n,[i,s]);a&&(this._canZoom=!1,a.catch((()=>{})).then((()=>{this._canZoom=!0,t.end()})))}}class pi extends le.a{constructor(e){super(!0),this.view=e,this.registerIncoming("drag",(e=>this._handleDrag(e))),this.registerIncoming("pointer-down",(()=>this._stopMomentumNavigation()));const t=this.view.mapViewNavigation;this.dragEventSeparator=new Xt({start:(e,i)=>{t.pinch.begin(this.view,i.data),i.stopPropagation()},update:(e,i)=>{t.pinch.update(this.view,i.data),i.stopPropagation()},end:(e,i)=>{t.pinch.end(this.view),i.stopPropagation()},condition:e=>e>=2})}_handleDrag(e){this.dragEventSeparator.handle(e)}_stopMomentumNavigation(){this.view.mapViewNavigation.pinch.stopMomentumNavigation()}}var di=i(67750);function ui(e){const t=e.native;return t?{buttons:t.buttons.map((e=>e.pressed?e.value?e.value:1:0)),axes:t.axes.map((t=>function(e,t){const i=Math.abs(e);return i<t?0:Math.sign(e)*(i-t)/(1-t)}(t,e.axisThreshold)))}:{buttons:[],axes:[]}}class gi{constructor(e,t){this.element=e,this.input=t,this._hasEventListeners=!1,this._onConnectGamepad=e=>{this._connectGamepad(e.gamepad)},this._onDisconnectGamepad=e=>{const t=e.gamepad,i=t.index,s=this.inputDevices[i];s&&(this._emitGamepadEvent(t,ui(s),!1),this.inputDevices.splice(i,1),this.latestUpdate.splice(i,1),this.input.gamepad.devices.remove(s),this.ensurePollingState())},this.frameTask=null,this.latestUpdate=new Array,this.inputDevices=new Array,this.callback=null;const i="getGamepads"in window.navigator,s=window.isSecureContext;this.supported=i&&s,this.supported&&(this._forEachGamepad((e=>this._connectGamepad(e))),window.addEventListener("gamepadconnected",this._onConnectGamepad),window.addEventListener("gamepaddisconnected",this._onDisconnectGamepad),this.ensurePollingState())}destroy(){this.hasEventListeners=!1,this.supported&&(window.removeEventListener("gamepadconnected",this._onConnectGamepad),window.removeEventListener("gamepaddisconnected",this._onDisconnectGamepad))}set hasEventListeners(e){this._hasEventListeners!==e&&(this._hasEventListeners=e,this.ensurePollingState())}get eventsEnabled(){return this.supported&&this.inputDevices.length>0&&this._hasEventListeners}set onEvent(e){this.callback=e}_connectGamepad(e){const t=new Ee(e);"unknown"!==t.deviceType&&(this.inputDevices[e.index]=t,this.input.gamepad.devices.add(t)),this.ensurePollingState()}ensurePollingState(){this.eventsEnabled?this._startPolling():this._stopPolling()}_startPolling(){null==this.frameTask&&(this.frameTask=(0,K.A)({update:()=>this._readGamepadState()}))}_stopPolling(){null!=this.frameTask&&(this.frameTask.remove(),this.frameTask=null,this.latestUpdate=new Array)}_readGamepadState(){const e=document.hasFocus(),t=this.element.contains(document.activeElement),i="document"===this.input.gamepad.enabledFocusMode&&!e||"view"===this.input.gamepad.enabledFocusMode&&!t;this._forEachGamepad((e=>{const t=this.inputDevices[e.index];if(!t)return;const s=this.latestUpdate[e.index],r=ui(t),n=i||function(e){for(let t=0;t<e.axes.length;t++)if(0!==e.axes[t])return!1;for(let t=0;t<e.buttons.length;t++)if(0!==e.buttons[t])return!1;return!0}(r);if(s){if(s.timestamp===e.timestamp)return;if(!s.active&&n)return;if(function(e,t){if(e.axes.length!==t.axes.length)return!1;if(e.buttons.length!==t.buttons.length)return!1;for(let i=0;i<e.axes.length;i++)if(e.axes[i]!==t.axes[i])return!1;for(let i=0;i<e.buttons.length;i++)if(e.buttons[i]!==t.buttons[i])return!1;return!0}(s.state,r))return}this._emitGamepadEvent(e,r,!n)}))}_forEachGamepad(e){const t=window.navigator.getGamepads();for(let i=0;i<t.length;i++){const s=t[i];this._validate(s)&&e(s)}}_emitGamepadEvent(e,t,i){const s=this.latestUpdate[e.index],r=s&&s.active;if(!r&&!i)return;const n=!r&&i?"start":r&&i?"update":"end";this.latestUpdate[e.index]={timestamp:e.timestamp,state:t,active:i},this.callback&&this.callback({device:this.inputDevices[e.index],state:t,action:n})}_validate(e){if(!e)return!1;if(!e.connected)return!1;for(let t=0;t<e.axes.length;t++)if(isNaN(e.axes[t]))return!1;return!0}}const mi=(0,c.Z)("trident"),yi=(0,c.Z)("edge"),fi=(0,c.Z)("chrome"),vi=(0,c.Z)("ff"),_i=(0,c.Z)("safari"),wi="esri-view-surface--touch-none",bi="esri-view-surface--touch-pan";class Ci{constructor(e,t){this.input=t,this._active={},this._activePointerCaptures=new Set,this._keyDownState=new Set,this._eventId=1,this._browserTouchPanningEnabled=!1,this._element=e,e.getAttribute("tabindex")||e.setAttribute("tabindex","0"),this._eventHandlers={"key-down":this._handleKey,"key-up":this._handleKey,"pointer-down":this._handlePointer,"pointer-move":this._handlePointerPreventDefault,"pointer-up":this._handlePointerPreventDefault,"pointer-enter":this._handlePointer,"pointer-leave":this._handlePointer,"pointer-cancel":this._handlePointer,"mouse-wheel":this._handleMouseWheel,"pointer-capture-lost":this._handlePointerCaptureLost},this._updateTouchAction(),this._element.addEventListener("keydown",this._preventAltKeyDefault),this._gamepadSource=new gi(e,this.input),this._gamepadSource.onEvent=e=>this._callback("gamepad",e)}destroy(){this._callback=null,this.activeEvents=null,this._activePointerCaptures.forEach((e=>{this._releasePointerCaptureSafe(e)})),this._gamepadSource&&(this._gamepadSource.destroy(),this._gamepadSource=null),this._activePointerCaptures=null,this._removeTouchAction(),this._element.removeEventListener("keydown",this._preventAltKeyDefault)}get browserTouchPanningEnabled(){return this._browserTouchPanningEnabled}set browserTouchPanningEnabled(e){this._browserTouchPanningEnabled=e,this._updateTouchAction(),this._updateTouchEventHandling()}set onEventReceived(e){this._callback=e}set activeEvents(e){for(const t in this._active)if(!e||!e.has(t)){const e=this._active[t];this._element.removeEventListener(xi[t],e),delete this._active[t]}e&&e.forEach((e=>{if(!this._active[e]&&xi[e]){const t=(this._eventHandlers[e]||this._handleDefault).bind(this,e);this._element.addEventListener(xi[e],t),this._active[e]=t}})),this._gamepadSource.hasEventListeners=e&&e.has("gamepad")}setPointerCapture(e,t){t?(this._element.setPointerCapture(e.pointerId),this._activePointerCaptures.add(e.pointerId)):(this._releasePointerCaptureSafe(e.pointerId),this._activePointerCaptures.delete(e.pointerId))}_updateTouchAction(){this._element.classList.remove(this._browserTouchPanningEnabled?wi:bi),this._element.classList.add(this._browserTouchPanningEnabled?bi:wi)}_updateTouchEventHandling(){this._browserTouchPanningEnabled?this._element.addEventListener("touchmove",this._preventMultiTouchPanning):this._element.removeEventListener("touchmove",this._preventMultiTouchPanning)}_removeTouchAction(){this._element.classList.remove(wi),this._element.classList.remove(bi),this._element.removeEventListener("touchmove",this._preventMultiTouchPanning)}_releasePointerCaptureSafe(e){try{if(this._element.hasPointerCapture&&!this._element.hasPointerCapture(e))return;this._element.releasePointerCapture(e)}catch(Xt){}}_updateNormalizedPointerLikeEvent(e,t){const i=(0,ve.Eu)(this._element,e);return Ci.test.disableSubpixelCoordinates&&(i.x=Math.round(i.x),i.y=Math.round(i.y)),t.x=i.x,t.y=i.y,t}_handleKey(e,t){const i=(0,di.kK)(t);i&&"key-up"===e&&this._keyDownState.delete(i);const s={native:t,key:i,repeat:i&&this._keyDownState.has(i)};i&&"key-down"===e&&this._keyDownState.add(s.key),this._callback(e,s)}_handlePointer(e,t){const i=this._updateNormalizedPointerLikeEvent(t,{native:t,x:0,y:0,pointerType:t.pointerType,button:t.button,buttons:t.buttons,eventId:this._eventId++});this._callback(e,i)}_handlePointerPreventDefault(e,t){const i=this._updateNormalizedPointerLikeEvent(t,{native:t,x:0,y:0,pointerType:t.pointerType,button:t.button,buttons:t.buttons,eventId:this._eventId++});t.preventDefault(),this._callback(e,i)}_handleMouseWheel(e,t){let i=t.deltaY;switch(t.deltaMode){case 0:(mi||yi)&&(i=i/document.documentElement.clientHeight*600);break;case 1:i*=30;break;case 2:i*=900}mi||yi?i*=.7:fi||_i?i*=.6:vi&&(i*=1.375);const s=Math.abs(i);if(s>100){const e=.02;i=i/s*200/(1+Math.exp(-e*(s-100)))}const r=this._updateNormalizedPointerLikeEvent(t,{native:t,x:0,y:0,deltaY:i});this._callback(e,r)}_handlePointerCaptureLost(e,t){this._activePointerCaptures.delete(t.pointerId),this._handleDefault(e,t)}_handleDefault(e,t){const i={native:t};t.preventDefault(),this._callback(e,i)}_preventAltKeyDefault(e){"Alt"===e.key&&e.preventDefault()}_preventMultiTouchPanning(e){e.touches.length>1&&e.preventDefault()}}Ci.test={disableSubpixelCoordinates:!1};const xi={"key-down":"keydown","key-up":"keyup","pointer-down":"pointerdown","pointer-up":"pointerup","pointer-move":"pointermove","mouse-wheel":"wheel","pointer-capture-got":"gotpointercapture","pointer-capture-lost":"lostpointercapture","context-menu":"contextmenu","pointer-enter":"pointerenter","pointer-leave":"pointerleave","pointer-cancel":"pointercancel",focus:"focus",blur:"blur"};class Ti extends le.a{constructor(){super(!0),this.registerIncoming("context-menu",(e=>{e.data.native.preventDefault()}))}}var Mi=i(84702);function Si(e,t){return Math.abs(t.x-e.x)+Math.abs(t.y-e.y)}const Ii=250,ki=10,Li=350,Pi=35;class Ei extends le.a{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ii,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ki,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Li,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Pi,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Mi.m;super(!1),this.maximumDoubleClickDelay=e,this.maximumDoubleClickDistance=t,this.maximumDoubleTouchDelay=i,this.maximumDoubleTouchDistance=s,this._clock=r,this._pointerState=new Map,this._click=this.registerOutgoing("click"),this._doubleClick=this.registerOutgoing("double-click"),this.registerIncoming("immediate-click",this._handleImmediateClick.bind(this)),this.registerIncoming("pointer-drag",this._handlePointerDrag.bind(this)),this.registerIncoming("drag",this._handleDrag.bind(this))}onUninstall(){this._pointerState.forEach((e=>e.doubleClickTimeout=(0,d.hw)(e.doubleClickTimeout)))}get hasPendingInputs(){return(0,$.oE)(this._pointerState,(e=>null!=e.doubleClickTimeout))}_pointerId(e){const t=e.native;return"mouse"===t.pointerType?`${t.pointerId}:${t.button}`:`${t.pointerType}`}_handleImmediateClick(e){const t=e.data,i=this._pointerId(t),s=this._pointerState.get(i);if(s){const r="touch"===t.native.pointerType?this.maximumDoubleTouchDistance:this.maximumDoubleClickDistance;Si(s.event.data,t)>r?(this._clearDoubleClickTimeout(i,!0),this._startClick(e)):(this._clearDoubleClickTimeout(i,!1),this._doubleClick.emit(s.event.data,void 0,s.event.modifiers))}else this._startClick(e)}_startClick(e){const t=this._pointerId(e.data),i="touch"===e.data.native.pointerType?this.maximumDoubleTouchDelay:this.maximumDoubleClickDelay;this._pointerState.set(t,{event:e,doubleClickTimeout:this._clock.setTimeout((()=>this._doubleClickTimeoutExceeded(t)),i)}),this.refreshHasPendingInputs()}_handlePointerDrag(e){const t=this._pointerId(e.data.currentEvent);this._clearDoubleClickTimeout(t,!0)}_handleDrag(e){const t=this._pointerId(e.data.pointer);this._clearDoubleClickTimeout(t,!0)}_clearDoubleClickTimeout(e,t){const i=this._pointerState.get(e);i&&(i.doubleClickTimeout.remove(),i.doubleClickTimeout=null,t&&this._doubleClickTimeoutExceeded(e),this._pointerState.delete(e),this.refreshHasPendingInputs())}_doubleClickTimeoutExceeded(e){const t=this._pointerState.get(e);this._click.emit(t.event.data,void 0,t.event.modifiers),t.doubleClickTimeout=null,this._pointerState.delete(e),this.refreshHasPendingInputs()}}class Ri extends le.a{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ii,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ki,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Li,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Pi,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Mi.m;super(!1),this.maximumDoubleClickDelay=e,this.maximumDoubleClickDistance=t,this.maximumDoubleTouchDelay=i,this.maximumDoubleTouchDistance=s,this._clock=r,this._doubleTapDragReady=!1,this._doubleTapDragActive=!1,this._dragStartCenter=(0,m.vW)(0,0),this._pointerState=new Map,this._doubleTapDrag=this.registerOutgoing("double-tap-drag"),this._dragEventSeparator=new Xt({start:(e,t)=>this._dragStart(e,t),update:(e,t)=>this._dragUpdate(t),end:(e,t)=>this._dragEnd(t)}),this.registerIncoming("drag",(e=>this._dragEventSeparator.handle(e))),this.registerIncoming("pointer-down",(e=>this._handlePointerDown(e))),this.registerIncoming("pointer-up",(()=>this._handlePointerUp()))}onUninstall(){this._pointerState.forEach((e=>{null!=e.doubleTapTimeout&&(e.doubleTapTimeout.remove(),e.doubleTapTimeout=null)}))}get hasPendingInputs(){return(0,$.oE)(this._pointerState,(e=>null!=e.doubleTapTimeout))}_clearPointerDown(e){const t=this._pointerState.get(e);t&&(t.doubleTapTimeout.remove(),t.doubleTapTimeout=null,this._pointerState.delete(e),this.refreshHasPendingInputs())}_createDoubleTapDragData(e,t,i){const{button:s,buttons:r,pointer:n,pointers:a,pointerType:o,timestamp:l}=i;return{action:e,delta:t,button:s,buttons:r,pointer:n,pointers:a,pointerType:o,timestamp:l}}_dragStart(e,t){if(!this._doubleTapDragReady||1!==e)return;this._doubleTapDragReady=!1,this._doubleTapDragActive=!0;const{data:i,modifiers:s}=t,{center:r}=i;this._dragStartCenter=r;const n=this._createDoubleTapDragData("begin",(0,m.vW)(0,0),i);this._doubleTapDrag.emit(n,void 0,s),t.stopPropagation()}_dragUpdate(e){if(!this._doubleTapDragActive)return;const{data:t,modifiers:i}=e,{center:s}=t,r=(0,m.vW)(s.x-this._dragStartCenter.x,s.y-this._dragStartCenter.y),n=this._createDoubleTapDragData("update",r,t);this._doubleTapDrag.emit(n,void 0,i),e.stopPropagation()}_dragEnd(e){if(!this._doubleTapDragActive)return;const{data:t,modifiers:i}=e,{center:s}=t,r=(0,m.vW)(s.x-this._dragStartCenter.x,s.y-this._dragStartCenter.y),n=this._createDoubleTapDragData("end",r,t);this._doubleTapDrag.emit(n,void 0,i),this._doubleTapDragActive=!1,e.stopPropagation()}_handlePointerDown(e){const{data:t}=e,i=this._pointerId(t),s=this._pointerState.get(i),{pointerType:r}=t.native;if(s){const n="touch"===r?this.maximumDoubleTouchDistance:this.maximumDoubleClickDistance;this._clearPointerDown(i),Si(s.event.data,t)>n?this._storePointerDown(e):this._doubleTapDragReady=!0}else this._storePointerDown(e)}_handlePointerUp(){this._doubleTapDragReady=!1}_pointerId(e){const{native:t}=e,{pointerId:i,button:s,pointerType:r}=t;return"mouse"===r?`${i}:${s}`:`${r}`}_storePointerDown(e){const{data:t}=e,{pointerType:i}=t.native,s=this._pointerId(t),r="touch"===i?this.maximumDoubleTouchDelay:this.maximumDoubleClickDelay,n=this._clock.setTimeout((()=>this._clearPointerDown(s)),r);this._pointerState.set(s,{event:e,doubleTapTimeout:n}),this.refreshHasPendingInputs()}}var Vi,Oi=i(38499);class Di extends le.a{constructor(e){super(!1),this.navigationTouch=e,this.startStateModifiers=new Set,this.activePointerMap=new Map,this.isDragging=!1,this.isCurrentDragSuppressed=!1,this.drag=this.registerOutgoing("drag"),this.registerIncoming("pointer-drag",this._handlePointerDrag.bind(this)),this.registerIncoming("pointer-up",this._handlePointerUpAndPointerLost.bind(this)),this.registerIncoming("pointer-capture-lost",this._handlePointerUpAndPointerLost.bind(this)),this.registerIncoming("pointer-cancel",this._handlePointerUpAndPointerLost.bind(this))}_createPayload(e,t,i,s){return{action:e,pointerType:this.pointerType,button:this.mouseButton,buttons:t.buttons,timestamp:s,pointers:Ni(this.activePointerMap),pointer:t,angle:i.angle,radius:i.radius,center:i.center}}_addPointer(e){const t=e.native.pointerId,i=Zi(this.activePointerMap).angle,s={event:e,initialAngle:0,lastAngle:0};this.activePointerMap.set(t,s);const r=Gi(s,Ai(this.activePointerMap));s.initialAngle=r,s.lastAngle=r,this._updatePointerAngles(i)}_updatePointer(e){if(e&&null==e.x&&null==e.y)return;const t=e.native.pointerId,i=this.activePointerMap.get(t);i?i.event=e:this._addPointer(e)}_removePointer(e){const t=Zi(this.activePointerMap).angle;this.activePointerMap.delete(e),this._updatePointerAngles(t)}_updatePointerAngles(e){const t=Zi(this.activePointerMap);this.activePointerMap.forEach((i=>{i.initialAngle=Gi(i,t)-e,i.lastAngle=Gi(i,t)-e}))}_emitEvent(e,t,i){const s=Zi(this.activePointerMap);this.drag.emit(this._createPayload(e,t,s,i),void 0,this.startStateModifiers)}_handlePointerUpAndPointerLost(e){const t=e.data.native.pointerId,i=(0,Oi.HA)(e.timestamp);this.activePointerMap.get(t)&&(1===this.activePointerMap.size?(this._updatePointer(e.data),!this.isCurrentDragSuppressed&&this._emitEvent("end",e.data,i),this.isDragging=!1,this.isCurrentDragSuppressed=!1,this._removePointer(t)):(this._removePointer(t),this._emitEvent("removed",e.data,(0,Oi.HA)(e.timestamp))))}_handlePointerDrag(e){const t=e.data,i=t.currentEvent,s=(0,Oi.HA)(e.timestamp);switch(t.action){case"start":case"update":this.isDragging?this.activePointerMap.has(i.native.pointerId)?(this._updatePointer(i),!this.isCurrentDragSuppressed&&this._emitEvent("update",i,s)):(this._addPointer(i),this._emitEvent("added",i,s),this.isCurrentDragSuppressed=this.isSuppressed):(this._updatePointer(i),this.pointerType=e.data.startEvent.pointerType,this.mouseButton=e.data.startEvent.button,this.startStateModifiers=e.modifiers,this.isDragging=!0,this.isCurrentDragSuppressed=this.isSuppressed,!this.isCurrentDragSuppressed&&this._emitEvent("start",i,s))}}get isSuppressed(){return this.navigationTouch&&!this.navigationTouch.browserTouchPanEnabled&&"touch"===this.pointerType&&1===this.activePointerMap.size}}function Ai(e){const t=[];return e.forEach((e=>{t.push((0,m.vW)(e.event.x,e.event.y))})),function(e,t){if(t?(t.radius=0,t.center.x=0,t.center.y=0):t={radius:0,center:(0,m.vW)()},0===e.length)return t;if(1===e.length)return t.center.x=e[0].x,t.center.y=e[0].y,t;if(2===e.length){const[i,s]=e,[r,n]=[s.x-i.x,s.y-i.y];return t.radius=Math.sqrt(r*r+n*n)/2,t.center.x=(i.x+s.x)/2,t.center.y=(i.y+s.y)/2,t}let i=0,s=0;for(let m=0;m<e.length;m++)i+=e[m].x,s+=e[m].y;i/=e.length,s/=e.length;const r=e.map((e=>e.x-i)),n=e.map((e=>e.y-s));let a=0,o=0,l=0,c=0,h=0,p=0,d=0;for(let m=0;m<r.length;m++){const e=r[m],t=n[m],i=e*e,s=t*t;a+=i,o+=s,l+=e*t,c+=i*e,h+=s*t,p+=e*s,d+=t*i}const u=.5*(c+p),g=.5*(h+d),y=a*o-l*l,f=(u*o-g*l)/y,v=(a*g-l*u)/y,_=(0,m.vW)(f+i,v+s);return{radius:Math.sqrt(f*f+v*v+(a+o)/e.length),center:_}}(t)}function Zi(e){const t=Ai(e);let i=0;return e.forEach((e=>{let s=Gi(e,t),r=s-e.lastAngle;for(;r>Math.PI;)r-=2*Math.PI;for(;r<-Math.PI;)r+=2*Math.PI;s=e.lastAngle+r,e.lastAngle=s;const n=s-e.initialAngle;i+=n})),i/=e.size||1,{angle:i,radius:t.radius,center:t.center}}function Ni(e){const t=new Map;return e.forEach(((e,i)=>t.set(i,e.event))),t}function Gi(e,t){const i=e.event,s=i.x-t.center.x,r=i.y-t.center.y;return Math.atan2(r,s)}!function(e){e[e.Left=0]="Left",e[e.Middle=1]="Middle",e[e.Right=2]="Right",e[e.Back=3]="Back",e[e.Forward=4]="Forward",e[e.Undefined=-1]="Undefined"}(Vi||(Vi={}));class Fi extends le.a{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ii,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ki,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Li,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Pi,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Mi.m;super(!1),this.maximumDoubleClickDelay=e,this.maximumDoubleClickDistance=t,this.maximumDoubleTouchDelay=i,this.maximumDoubleTouchDistance=s,this._clock=r,this._pointerState=new Map,this._immediateDoubleClick=this.registerOutgoing("immediate-double-click"),this.registerIncoming("pointer-down",this._handlePointerDown.bind(this)),this.registerIncoming("pointer-up",(e=>{this._handlePointerLoss(e,"pointer-up")})),this.registerIncoming("pointer-capture-lost",(e=>{this._handlePointerLoss(e,"pointer-capture-lost")})),this.registerIncoming("pointer-cancel",(e=>{this._handlePointerLoss(e,"pointer-cancel")}))}onUninstall(){this._pointerState.forEach((e=>{e.immediateDoubleClick&&e.immediateDoubleClick.timeoutHandle.remove()})),super.onUninstall()}_handlePointerDown(e){const t=e.data,i=this._pointerId(t);if(!this._pointerState.has(i)){const e={downButton:t.native.button,immediateDoubleClick:null};this._pointerState.set(i,e),this.startCapturingPointer(t.native)}}_handlePointerLoss(e,t){const i=e.data,s=this._pointerId(i),r=this._pointerState.get(s);if(r&&"pointer-up"===t&&r.downButton===i.native.button){const t=r.immediateDoubleClick;if(t){t.timeoutHandle.remove();const s="touch"===e.data.native.pointerType?this.maximumDoubleTouchDistance:this.maximumDoubleClickDistance;Si(t,e.data)>s?this._startImmediateDoubleClick(e,r):(this._immediateDoubleClick.emit(e.data,void 0,t.modifiers),this._removeState(i))}else this._startImmediateDoubleClick(e,r)}}_startImmediateDoubleClick(e,t){const i="touch"===e.data.native.pointerType?this.maximumDoubleTouchDelay:this.maximumDoubleClickDelay;t.immediateDoubleClick={x:e.data.x,y:e.data.y,modifiers:e.modifiers,timeoutHandle:this._clock.setTimeout((()=>this._removeState(e.data)),i)}}_pointerId(e){const t=e.native;return"mouse"===t.pointerType?`${t.pointerId}:${t.button}`:`${t.pointerType}`}_removeState(e){const t=this._pointerId(e);this._pointerState.delete(t),this.stopCapturingPointer(e.native),this.refreshHasPendingInputs()}}const zi=300,Bi=1.5,Ui=6,Wi=6,ji=500;class Hi extends le.a{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:zi,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Bi,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Ui,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Wi,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:ji,n=arguments.length>5&&void 0!==arguments[5]?arguments[5]:Mi.m;super(!1),this.maximumClickDelay=e,this.movementUntilMouseDrag=t,this.movementUntilPenDrag=i,this.movementUntilTouchDrag=s,this.holdDelay=r,this._clock=n,this._pointerState=new Map,this._pointerDrag=this.registerOutgoing("pointer-drag"),this._immediateClick=this.registerOutgoing("immediate-click"),this._pointerHold=this.registerOutgoing("hold"),this.registerIncoming("pointer-down",this._handlePointerDown.bind(this)),this.registerIncoming("pointer-up",(e=>{this._handlePointerLoss(e,"pointer-up")})),this.registerIncoming("pointer-capture-lost",(e=>{this._handlePointerLoss(e,"pointer-capture-lost")})),this.registerIncoming("pointer-cancel",(e=>{this._handlePointerLoss(e,"pointer-cancel")})),this._moveHandle=this.registerIncoming("pointer-move",this._handlePointerMove.bind(this)),this._moveHandle.pause()}onUninstall(){this._pointerState.forEach((e=>{null!=e.holdTimeout&&(e.holdTimeout.remove(),e.holdTimeout=null)})),super.onUninstall()}_handlePointerDown(e){const t=e.data,i=t.native.pointerId;let s=null;0===this._pointerState.size&&(s=this._clock.setTimeout((()=>{const t=this._pointerState.get(i);if(t){if(!t.isDragging){const i=t.previousEvent;this._pointerHold.emit(i,void 0,e.modifiers),t.holdEmitted=!0}t.holdTimeout=null}}),this.holdDelay));const r={startEvent:t,previousEvent:t,startTimestamp:e.timestamp,isDragging:!1,downButton:t.native.button,holdTimeout:s,modifiers:new Set};this._pointerState.set(i,r),this.startCapturingPointer(t.native),this._moveHandle.resume(),this._pointerState.size>1&&this._startDragging(e)}_createPointerDragData(e,t,i){return{action:e,startEvent:t.startEvent,previousEvent:t.previousEvent,currentEvent:i}}_handlePointerMove(e){const t=e.data,i=t.native.pointerId,s=this._pointerState.get(i);s&&(s.isDragging?this._pointerDrag.emit(this._createPointerDragData("update",s,t),void 0,s.modifiers):function(e,t){const i=t.x-e.x,s=t.y-e.y;return Math.sqrt(i*i+s*s)}(t,s.startEvent)>this._getDragThreshold(t.native.pointerType)&&this._startDragging(e),s.previousEvent=t)}_getDragThreshold(e){switch(e){case"touch":return this.movementUntilTouchDrag;case"pen":return this.movementUntilPenDrag;default:return this.movementUntilMouseDrag}}_startDragging(e){const t=e.data,i=t.native.pointerId;this._pointerState.forEach((s=>{null!=s.holdTimeout&&(s.holdTimeout.remove(),s.holdTimeout=null),s.isDragging||(s.modifiers=e.modifiers,s.isDragging=!0,i===s.startEvent.native.pointerId?this._pointerDrag.emit(this._createPointerDragData("start",s,t)):this._pointerDrag.emit(this._createPointerDragData("start",s,s.previousEvent),e.timestamp))}))}_handlePointerLoss(e,t){const i=e.data,s=i.native.pointerId,r=this._pointerState.get(s);r&&(null!=r.holdTimeout&&(r.holdTimeout.remove(),r.holdTimeout=null),r.isDragging?this._pointerDrag.emit(this._createPointerDragData("end",r,"pointer-up"===t?i:r.previousEvent),void 0,r.modifiers):"pointer-up"===t&&r.downButton===i.native.button&&e.timestamp-r.startTimestamp<=this.maximumClickDelay&&!r.holdEmitted&&this._immediateClick.emit(i),this._pointerState.delete(s),this.stopCapturingPointer(i.native),0===this._pointerState.size&&this._moveHandle.pause())}}const qi="Ctrl",Yi={left:"ArrowLeft",right:"ArrowRight",up:"ArrowUp",down:"ArrowDown"},$i={zoomIn:["=","+"],zoomOut:["-","_"]},Ki={clockwiseOption1:"a",clockwiseOption2:"A",counterClockwiseOption1:"d",counterClockwiseOption2:"D",resetOption1:"n",resetOption2:"N"};let Xi=class extends D.Z{constructor(){super(...arguments),this._handles=new S.Z}initialize(){const e=()=>this.view?.ready;this._handles.add([(0,g.gx)((()=>!e()),(()=>this._disconnect())),(0,g.gx)(e,(()=>this._connect()))])}destroy(){this._handles&&(this._handles.removeAll(),this._handles=null),this._disconnect()}get latestPointerType(){return this._inputManager?.latestPointerType}get latestPointerLocation(){return this._inputManager?.latestPointerLocation}_disconnect(){this._inputManager&&(this.view.viewEvents.disconnect(),this._inputManager.destroy(),this._inputManager=null,this._source.destroy(),this._source=null)}_connect(){const e=this.view.surface,t=new Ci(e,this.view.input),i=[new Fi,new Hi,new Ei,new Di(this.view.navigation),new Ri],s=new ae.$({eventSource:t,recognizers:i});s.installHandlers("prevent-context-menu",[new Ti],ae.f.INTERNAL),s.installHandlers("navigation",[new pi(this.view),new ii(this.view),new hi(this.view),new $t(this.view),new $t(this.view,[qi]),new Jt(this.view,"primary"),new ai(this.view,Yi),new ci(this.view,$i),new oi(this.view,Ki),new Qt(this.view,"secondary"),new Kt(this.view,"touch")],ae.f.INTERNAL),this.view.viewEvents.connect(s),this._source=t,this._inputManager=s,(0,g.YP)((()=>this.view?.navigation?.browserTouchPanEnabled),(e=>{this._source&&(this._source.browserTouchPanningEnabled=!e)}),g.nn)}get test(){return{inputManager:this._inputManager}}};(0,s._)([(0,v.Cb)()],Xi.prototype,"view",void 0),(0,s._)([(0,v.Cb)()],Xi.prototype,"latestPointerType",null),(0,s._)([(0,v.Cb)()],Xi.prototype,"latestPointerLocation",null),Xi=(0,s._)([(0,_.j)("esri.views.2d.input.MapViewInputManager")],Xi);const Ji=Xi;var Qi=i(62309),es=i(51995);let ts=0,is=class extends D.Z{constructor(){super(...arguments),this.color=new es.Z([0,255,255]),this.haloOpacity=1,this.fillOpacity=.25}get version(){return ts++}};(0,s._)([(0,v.Cb)({readOnly:!0})],is.prototype,"version",null),(0,s._)([(0,v.Cb)({type:es.Z})],is.prototype,"color",void 0),(0,s._)([(0,v.Cb)({type:es.Z})],is.prototype,"haloColor",void 0),(0,s._)([(0,v.Cb)()],is.prototype,"haloOpacity",void 0),(0,s._)([(0,v.Cb)()],is.prototype,"fillOpacity",void 0),is=(0,s._)([(0,_.j)("esri.views.2d.support.HighlightOptions")],is);const ss=is;var rs=i(84786);var ns=i(7796),as=i(90316),os=i(49800);var ls=i(50093),cs=i(89125);const hs="esri-component";let ps=class extends D.Z{constructor(){super(...arguments),this.widget=null}destroy(){this.widget&&this.widget.destroy(),this.node=null}get id(){return this.get("widget.id")||this.get("node.id")}set node(e){const t=this._get("node");e!==t&&(e&&e.classList.add(hs),t&&t.classList.remove(hs),this._set("node",e))}castNode(e){return e?"string"==typeof e||function(e){return e&&"nodeType"in e}(e)?(this._set("widget",null),(0,ls.L7)(e)):(function(e){return e&&"function"==typeof e.render}(e)&&!e.domNode&&(e.domNode=document.createElement("div")),this._set("widget",e),e.domNode):(this._set("widget",null),null)}};(0,s._)([(0,v.Cb)({dependsOn:[]})],ps.prototype,"id",null),(0,s._)([(0,v.Cb)()],ps.prototype,"node",null),(0,s._)([(0,cs.p)("node")],ps.prototype,"castNode",null),(0,s._)([(0,v.Cb)({readOnly:!0})],ps.prototype,"widget",void 0),ps=(0,s._)([(0,_.j)("esri.views.ui.Component")],ps);const ds=ps;var us=i(37384),gs=i(80975);const ms={left:0,top:0,bottom:0,right:0},ys={bottom:30,top:15,right:15,left:15},fs="manual",vs="esri-ui",_s="esri-ui-corner",ws="esri-ui-inner-container",bs="esri-ui-manual-container",Cs="esri-ui-corner-container",xs="esri-ui-top-left",Ts="esri-ui-top-right",Ms="esri-ui-bottom-left",Ss="esri-ui-bottom-right";function Is(e){const t=e,i="object"==typeof t&&null!==t&&Object.getPrototypeOf(t);return null!==i&&i!==Object.prototype||!("component"in t||"index"in t||"position"in t)?null:e}function ks(e,t){let{top:i,bottom:s,left:r,right:n}=t;e.style.top=i,e.style.bottom=s,e.style.left=r,e.style.right=n}let Ls=class extends A.Z.EventedAccessor{constructor(e){super(e),this._cornerNameToContainerLookup={},this._positionNameToContainerLookup={},this._components=new Array,this._componentToKey=new Map,this._handles=new S.Z,this.view=null,this._applyViewPadding=()=>{const e=this.container;e&&ks(e,this._toPxPosition(this._getViewPadding()))},this._applyUIPadding=()=>{const e=this._innerContainer;e&&ks(e,this._toPxPosition(this.padding))},this._initContainers()}initialize(){this._handles.add([(0,g.YP)((()=>[this.view?.padding,this.container]),this._applyViewPadding,g.nn),(0,g.YP)((()=>this.padding),this._applyUIPadding,g.nn)])}destroy(){this.container=null;for(const e of this._components)e.destroy();this._components.length=0,this._handles.destroy(),this._componentToKey.clear()}set container(e){const t=this._get("container");e!==t&&(e&&(e.classList.add(vs),(0,us.V$)(e),this._attachContainers(e)),t&&(t.classList.remove(vs),ks(t,{top:"",bottom:"",left:"",right:""}),(0,ls.cS)(t)),this._set("container",e))}get height(){const e=this.get("view.height")||0;if(0===e)return e;const t=this._getViewPadding(),i=t.top+t.bottom;return Math.max(e-i,0)}get padding(){return this._get("padding")}set padding(e){e?this._override("padding",e):this._clearOverride("padding")}castPadding(e){return"number"==typeof e?{bottom:e,top:e,right:e,left:e}:{...ys,...e}}get width(){const e=this.get("view.width")||0;if(0===e)return e;const t=this._getViewPadding(),i=t.left+t.right;return Math.max(e-i,0)}add(e,t){let i,s;if(Array.isArray(e))return void e.forEach((e=>this.add(e,t)));const r=Is(e);r&&({index:i,position:t,component:e,key:s}=r),t&&"object"==typeof t&&({index:i,key:s,position:t}=t),!e||t&&!this._isValidPosition(t)||this._add(e,t,i,s)}remove(e,t){if(!e)return;if(Array.isArray(e))return e.map((e=>this.remove(e,t)));const i=this._find(e);if(i){const s=this._componentToKey;if(s.has(e)&&s.get(e)!==t)return;const r=this._components.indexOf(i);return i.node.parentNode&&i.node.parentNode.removeChild(i.node),this._componentToKey.delete(e),this._components.splice(r,1)[0]}}empty(e){return Array.isArray(e)?e.map((e=>this.empty(e))).reduce(((e,t)=>e.concat(t))):(e=e||fs)===fs?Array.prototype.slice.call(this._manualContainer.children).filter((e=>!e.classList.contains(_s))).map((e=>this.remove(e))):this._isValidPosition(e)?Array.prototype.slice.call(this._cornerNameToContainerLookup[e].children).map(this.remove,this):null}move(e,t){if(Array.isArray(e)&&e.forEach((e=>this.move(e,t))),!e)return;let i;const s=Is(e)||Is(t);if(s&&(i=s.index,t=s.position,e=s.component||e),t&&!this._isValidPosition(t))return;const r=this.remove(e);r&&this.add(r,{position:t,index:i})}find(e){if(!e)return null;const t=this._findById(e);return t&&(t.widget||t.node)}getPosition(e){for(const t in this._positionNameToContainerLookup)if(this._positionNameToContainerLookup[t].contains(e))return t;return null}_add(e,t,i,s){e instanceof ds||(e=new ds({node:e})),this._place({component:e,position:t,index:i}),this._components.push(e),s&&this._componentToKey.set(e,s)}_find(e){return e?e instanceof ds?this._findByComponent(e):"string"==typeof e?this._findById(e):this._findByNode(e.domNode||e):null}_getViewPadding(){return this.get("view.padding")||ms}_attachContainers(e){e.appendChild(this._innerContainer),e.appendChild(this._manualContainer)}_initContainers(){const e=document.createElement("div");e.classList.add(ws),e.classList.add(Cs);const t=document.createElement("div");t.classList.add(ws),t.classList.add(bs);const i=document.createElement("div");i.classList.add(xs),i.classList.add(_s),e.appendChild(i);const s=document.createElement("div");s.classList.add(Ts),s.classList.add(_s),e.appendChild(s);const r=document.createElement("div");r.classList.add(Ms),r.classList.add(_s),e.appendChild(r);const n=document.createElement("div");n.classList.add(Ss),n.classList.add(_s),e.appendChild(n),this._innerContainer=e,this._manualContainer=t;const a=(0,gs.dZ)();this._cornerNameToContainerLookup={"top-left":i,"top-right":s,"bottom-left":r,"bottom-right":n,"top-leading":a?s:i,"top-trailing":a?i:s,"bottom-leading":a?n:r,"bottom-trailing":a?r:n},this._positionNameToContainerLookup={manual:t,...this._cornerNameToContainerLookup}}_isValidPosition(e){return!!this._positionNameToContainerLookup[e]}_place(e){const t=e.component,i=e.position||fs,s=e.index,r=this._positionNameToContainerLookup[i],n=s>-1;if(function(e){return e&&!e._started&&"function"==typeof e.postMixInProperties&&"function"==typeof e.buildRendering&&"function"==typeof e.postCreate&&"function"==typeof e.startup}(t.widget)&&t.widget.startup(),!n)return void r.appendChild(t.node);const a=Array.prototype.slice.call(r.children);0!==s?s>=a.length?r.appendChild(t.node):(0,ls.Vt)(t.node,a[s]):r.firstChild?(0,ls.Vt)(t.node,r.firstChild):r.appendChild(t.node)}_toPxPosition(e){return{top:this._toPxUnit(e.top),left:this._toPxUnit(e.left),right:this._toPxUnit(e.right),bottom:this._toPxUnit(e.bottom)}}_toPxUnit(e){return 0===e?"0":e+"px"}_findByComponent(e){let t,i=null;return this._components.some((s=>(t=s===e,t&&(i=s),t))),i}_findById(e){let t,i=null;return this._components.some((s=>(t=s.id===e,t&&(i=s),t))),i}_findByNode(e){let t,i=null;return this._components.some((s=>(t=s.node===e,t&&(i=s),t))),i}};(0,s._)([(0,v.Cb)()],Ls.prototype,"container",null),(0,s._)([(0,v.Cb)()],Ls.prototype,"height",null),(0,s._)([(0,v.Cb)({value:ys})],Ls.prototype,"padding",null),(0,s._)([(0,cs.p)("padding")],Ls.prototype,"castPadding",null),(0,s._)([(0,v.Cb)()],Ls.prototype,"view",void 0),(0,s._)([(0,v.Cb)()],Ls.prototype,"width",null),Ls=(0,s._)([(0,_.j)("esri.views.ui.UI")],Ls);const Ps=Ls;var Es=i(69407),Rs=i(14921),Vs=i(81753);function Os(e,t){return e&&"copyright"in e&&(!t||"function"==typeof e.originOf&&"user"===e.originOf("copyright"))}function Ds(e,t,i){i&&t&&(e.find((e=>e.layerView===t&&e.text===i))||e.push({text:i,layerView:t}))}const As=[];let Zs=class extends Z.r{constructor(e){super(e),this._clear=()=>{this._fetchedAttributionData.clear(),this._pendingAttributions.clear(),this.handles.remove("suspension"),this.notifyChange("state")},this._pendingAttributions=new Set,this._fetchedAttributionData=new Map,this.items=new a.Z,this.view=null,this._allLayerViewsChange=e=>{this.handles.remove("suspension");const t=this.get("view.allLayerViews");t&&this.handles.add(t.map((e=>(0,g.YP)((()=>[e.suspended,e.layer?.attributionVisible]),(()=>this._updateAttributionItems())))),"suspension"),e&&e.removed&&e.removed.forEach((e=>{this._pendingAttributions.delete(e),this._fetchedAttributionData.delete(e)})),this._updateAttributionItems()},this.handles.add([(0,g.on)((()=>this.view?.allLayerViews),"change",(e=>this._allLayerViewsChange(e)),{onListenerAdd:()=>this._allLayerViewsChange(),onListenerRemove:this._clear}),(0,g.gx)((()=>!0===this.view?.stationary),(()=>this._updateAttributionItems()))])}destroy(){this.view=null,this._fetchedAttributionData.clear(),this._pendingAttributions.clear(),this.items.removeAll()}get state(){return this.get("view.ready")?this._pendingAttributions.size>0?"loading":"ready":"disabled"}_updateAttributionItems(){const e=this.get("view.allLayerViews");As.length=0,e?(e.forEach((e=>{if(e.suspended||!e.layer?.attributionVisible)return;const t=e.layer;if(Os(t,"user"))return void Ds(As,e,t.copyright);if(t.hasAttributionData){if(this._fetchedAttributionData.has(e)){const i=this._fetchedAttributionData.get(e);return void(i?Ds(As,e,this._getDynamicAttribution(i,this.view,t)):Os(t)&&Ds(As,e,t.copyright))}return void this._fetchAttributionData(e)}const i=t.get("portalItem.accessInformation");Ds(As,e,i||t.copyright)})),function(e,t){return e.length!==t.length||e.some(((e,i)=>e.text!==t[i].text))}(this.items,As)&&(this.items.removeAll(),this.items.addMany(As)),As.length=0,this.notifyChange("state")):this._clear()}async _fetchAttributionData(e){if(this._pendingAttributions.has(e))return;this._pendingAttributions.add(e);const t=await(0,Rs.q6)(e.layer.fetchAttributionData());if(this._pendingAttributions.has(e)){const i=t.ok?this._createContributionIndex(t.value,function(e){return"bing-maps"===e.type}(e.layer)):null;this._pendingAttributions.delete(e),this._fetchedAttributionData.set(e,i)}this._updateAttributionItems()}_createContributionIndex(e,t){const i=e.contributors,s={};if(!i)return s;for(let r=0;r<i.length;r++){const e=i[r],n=e.coverageAreas;if(!n)return;for(const i of n){const n=i.bbox,a=i.zoomMin-(t&&i.zoomMin?1:0),o=i.zoomMax-(t&&i.zoomMax?1:0),l={xmin:n[1],ymin:n[0],xmax:n[3],ymax:n[2],spatialReference:W.Z.WGS84},c={extent:(0,Vs.$)(l),attribution:e.attribution||"",score:null!=i.score?i.score:100,id:r};for(let e=a;e<=o;e++)s[e]=s[e]||[],s[e].push(c)}}return s.maxKey=Math.max.apply(null,Object.keys(s)),s}_getDynamicAttribution(e,t,i){const{extent:s,scale:r}=t;let n=i.tileInfo.scaleToZoom(r);if(n=Math.min(e.maxKey,Math.round(n)),!s||null==n||n<=-1)return"";const a=e[n],o=(0,Vs.iV)(s.center.clone().normalize(),t.spatialReference),l={};return a?a.filter((e=>{const t=!l[e.id]&&o&&(0,ut.aV)(e.extent,o);return t&&(l[e.id]=!0),t})).sort(((e,t)=>t.score-e.score||e.objectId-t.objectId)).map((e=>e.attribution)).join(", "):""}};(0,s._)([(0,v.Cb)({readOnly:!0,type:a.Z})],Zs.prototype,"items",void 0),(0,s._)([(0,v.Cb)({readOnly:!0})],Zs.prototype,"state",null),(0,s._)([(0,v.Cb)()],Zs.prototype,"view",void 0),Zs=(0,s._)([(0,_.j)("esri.widgets.Attribution.AttributionViewModel")],Zs);const Ns=Zs;var Gs=i(78088),Fs=i(80532),zs=i(67005);const Bs="esri-attribution esri-widget",Us="esri-attribution__powered-by",Ws="esri-attribution__sources",js="esri-attribution--open",Hs="esri-attribution__sources--open",qs="esri-attribution__link",Ys="esri-icon-description",$s="esri-interactive";let Ks=class extends Es.Z{constructor(e,t){super(e,t),this._isOpen=!1,this._attributionTextOverflowed=!1,this._prevSourceNodeHeight=0,this._resizeObserver=new ResizeObserver((e=>e.forEach((e=>{let{target:t}=e;return this._checkSourceTextOverflow(t)})))),this.iconClass=Ys,this.itemDelimiter=" | ",this.label=void 0,this.messages=null,this.view=null,this.viewModel=new Ns}initialize(){this.own((0,g.on)((()=>this.viewModel?.items),"change",(()=>this.scheduleRender())))}destroy(){this._resizeObserver?.disconnect()}get _isInteractive(){return this._isOpen||this._attributionTextOverflowed}get attributionText(){return this.viewModel.items.reduce(((e,t)=>(e.includes(t.text)||e.push(t.text),e)),[]).join(this.itemDelimiter)}render(){const e={[js]:this._isOpen};return(0,zs.u)("div",{bind:this,class:this.classes(Bs,e),dir:"ltr",onclick:this._toggleState,onkeydown:this._toggleState},this.renderSourcesNode(),this.renderPoweredBy())}renderPoweredBy(){return(0,zs.u)("div",{class:Us},"Powered by"," ",(0,zs.u)("a",{class:qs,href:"http://www.esri.com/",target:"_blank",rel:"noreferrer"},"Esri"))}renderSourcesNode(){const e=this._isOpen,t=this._isInteractive,i=t?"0":"",{attributionText:s}=this,r={[Hs]:e,[$s]:t};return(0,zs.u)("div",{afterCreate:this._afterSourcesNodeCreate,bind:this,class:this.classes(Ws,r),innerHTML:s,tabindex:i})}_afterSourcesNodeCreate(e){this._prevSourceNodeHeight=e.clientWidth,this._resizeObserver.observe(e)}_checkSourceTextOverflow(e){let t=!1;const{clientHeight:i,clientWidth:s,scrollWidth:r}=e,n=r>s,a=this._attributionTextOverflowed!==n;if(this._attributionTextOverflowed=n,a&&(t=!0),this._isOpen){const e=i<this._prevSourceNodeHeight;this._prevSourceNodeHeight=i,e&&(this._isOpen=!1,t=!0)}t&&this.scheduleRender()}_toggleState(){this._isInteractive&&(this._isOpen=!this._isOpen)}};(0,s._)([(0,v.Cb)()],Ks.prototype,"_isOpen",void 0),(0,s._)([(0,v.Cb)()],Ks.prototype,"_isInteractive",null),(0,s._)([(0,v.Cb)()],Ks.prototype,"_attributionTextOverflowed",void 0),(0,s._)([(0,v.Cb)()],Ks.prototype,"_prevSourceNodeHeight",void 0),(0,s._)([(0,v.Cb)({readOnly:!0,dependsOn:["viewModel.items.length","itemDelimiter"]})],Ks.prototype,"attributionText",null),(0,s._)([(0,v.Cb)()],Ks.prototype,"iconClass",void 0),(0,s._)([(0,v.Cb)()],Ks.prototype,"itemDelimiter",void 0),(0,s._)([(0,v.Cb)({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],Ks.prototype,"label",void 0),(0,s._)([(0,v.Cb)(),(0,Fs.H)("esri/widgets/Attribution/t9n/Attribution")],Ks.prototype,"messages",void 0),(0,s._)([(0,z.B)("viewModel.view")],Ks.prototype,"view",void 0),(0,s._)([(0,v.Cb)({type:Ns})],Ks.prototype,"viewModel",void 0),(0,s._)([(0,Gs.h)()],Ks.prototype,"_toggleState",null),Ks=(0,s._)([(0,_.j)("esri.widgets.Attribution")],Ks);const Xs=Ks;var Js=i(21524);let Qs=class extends D.Z{constructor(e){super(e),this._handles=new S.Z,this.navigationMode="pan",this.view=null}initialize(){this._handles.add((0,g.gx)((()=>this.view?.inputManager),(()=>this._setNavigationMode())))}destroy(){this._handles.destroy(),this._handles=null,this.view=null}get state(){return this.get("view.ready")&&"3d"===this.view.type?"ready":"disabled"}toggle(){"disabled"!==this.state&&(this.navigationMode="pan"!==this.navigationMode?"pan":"rotate",this._setNavigationMode())}_setNavigationMode(){this.get("view.inputManager").primaryDragAction="pan"===this.navigationMode?"pan":"rotate"}};(0,s._)([(0,v.Cb)({readOnly:!0})],Qs.prototype,"state",null),(0,s._)([(0,v.Cb)()],Qs.prototype,"navigationMode",void 0),(0,s._)([(0,v.Cb)()],Qs.prototype,"view",void 0),Qs=(0,s._)([(0,_.j)("esri.widgets.NavigationToggleViewModel")],Qs);const er=Qs,tr="esri-navigation-toggle esri-widget",ir="esri-navigation-toggle__button esri-widget--button",sr="esri-navigation-toggle__button--active",rr="esri-navigation-toggle__button--pan",nr="esri-navigation-toggle__button--rotate",ar="esri-navigation-toggle--horizontal",or="esri-icon-rotate",lr="esri-icon-pan",cr="esri-icon-pan2",hr="esri-disabled";let pr=class extends Es.Z{constructor(e,t){super(e,t),this.iconClass=cr,this.label=void 0,this.messages=null,this.view=null,this.viewModel=new er}set layout(e){"horizontal"!==e&&(e="vertical"),this._set("layout",e)}toggle(){return this.viewModel.toggle()}render(){const e="disabled"===this.get("viewModel.state"),t="pan"===this.get("viewModel.navigationMode"),i={[hr]:e,[ar]:"horizontal"===this.layout},s={[sr]:t},r={[sr]:!t},n=e?-1:0,a=this.messages.toggle;return(0,zs.u)("div",{bind:this,class:this.classes(tr,i),onclick:this._toggle,onkeydown:this._toggle,tabIndex:n,"aria-label":a,title:a},(0,zs.u)("div",{class:this.classes(ir,rr,s)},(0,zs.u)("span",{class:lr})),(0,zs.u)("div",{class:this.classes(ir,nr,r)},(0,zs.u)("span",{class:or})))}_toggle(){this.toggle()}};(0,s._)([(0,v.Cb)()],pr.prototype,"iconClass",void 0),(0,s._)([(0,v.Cb)({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],pr.prototype,"label",void 0),(0,s._)([(0,v.Cb)({value:"vertical"})],pr.prototype,"layout",null),(0,s._)([(0,v.Cb)(),(0,Fs.H)("esri/widgets/NavigationToggle/t9n/NavigationToggle")],pr.prototype,"messages",void 0),(0,s._)([(0,z.B)("viewModel.view")],pr.prototype,"view",void 0),(0,s._)([(0,v.Cb)({type:er})],pr.prototype,"viewModel",void 0),(0,s._)([(0,Gs.h)()],pr.prototype,"_toggle",null),pr=(0,s._)([(0,_.j)("esri.widgets.NavigationToggle")],pr);const dr=pr,ur="esri-widget--button esri-widget",gr="esri-disabled",mr="esri-interactive",yr="esri-icon-font-fallback-text",fr="esri-icon";let vr=class extends Es.Z{constructor(){super(...arguments),this.enabled=!0,this.iconClass="",this.title=""}render(){const e=this.enabled?0:-1,t={[gr]:!this.enabled,[mr]:this.enabled},i={[this.iconClass]:!!this.iconClass};return(0,zs.u)("div",{bind:this,class:this.classes(ur,t),onclick:this._triggerAction,onkeydown:this._triggerAction,role:"button",tabIndex:e,title:this.title},(0,zs.u)("span",{"aria-hidden":"true",role:"presentation",class:this.classes(fr,i)}),(0,zs.u)("span",{class:yr},this.title))}_triggerAction(){this.action.call(this)}};(0,s._)([(0,v.Cb)()],vr.prototype,"action",void 0),(0,s._)([(0,v.Cb)()],vr.prototype,"enabled",void 0),(0,s._)([(0,v.Cb)()],vr.prototype,"iconClass",void 0),(0,s._)([(0,v.Cb)()],vr.prototype,"title",void 0),(0,s._)([(0,Gs.h)()],vr.prototype,"_triggerAction",null),vr=(0,s._)([(0,_.j)("esri.widgets.IconButton")],vr);const _r=vr;let wr=class extends D.Z{get canZoomIn(){if(!this.get("view.ready"))return!1;const e=this.get("view.animation.target.scale")||this.get("view.scale"),t=this.get("view.constraints.effectiveMaxScale");return 0===t||e>t}get canZoomOut(){if(!this.get("view.ready"))return!1;const e=this.get("view.animation.target.scale")||this.get("view.scale"),t=this.get("view.constraints.effectiveMinScale");return 0===t||e<t}};(0,s._)([(0,v.Cb)({readOnly:!0})],wr.prototype,"canZoomIn",null),(0,s._)([(0,v.Cb)({readOnly:!0})],wr.prototype,"canZoomOut",null),(0,s._)([(0,v.Cb)()],wr.prototype,"view",void 0),wr=(0,s._)([(0,_.j)("esri.widgets.Zoom.ZoomConditions2D")],wr);const br=wr;let Cr=class extends D.Z{get canZoomIn(){return!!this.get("view.ready")}get canZoomOut(){return!!this.get("view.ready")}};(0,s._)([(0,v.Cb)({readOnly:!0})],Cr.prototype,"canZoomIn",null),(0,s._)([(0,v.Cb)({readOnly:!0})],Cr.prototype,"canZoomOut",null),(0,s._)([(0,v.Cb)()],Cr.prototype,"view",void 0),Cr=(0,s._)([(0,_.j)("esri.widgets.Zoom.ZoomConditions3D")],Cr);const xr=Cr;let Tr=class extends D.Z{constructor(e){super(e),this.canZoomIn=!1,this.canZoomOut=!1}destroy(){this.view=null}get state(){return this.get("view.ready")?"ready":"disabled"}set view(e){e?"2d"===e.type?this._zoomConditions=new br({view:e}):"3d"===e.type&&(this._zoomConditions=new xr({view:e})):this._zoomConditions=null,this._set("view",e)}zoomIn(){if(!this.canZoomIn)return;const e=this.view;"2d"===e.type?e.mapViewNavigation.zoomIn():(0,u.R8)(e.goTo({zoomFactor:2}))}zoomOut(){if(!this.canZoomOut)return;const e=this.view;"2d"===e.type?e.mapViewNavigation.zoomOut():(0,u.R8)(e.goTo({zoomFactor:.5}))}};(0,s._)([(0,v.Cb)()],Tr.prototype,"_zoomConditions",void 0),(0,s._)([(0,v.Cb)({aliasOf:"_zoomConditions.canZoomIn",readOnly:!0})],Tr.prototype,"canZoomIn",void 0),(0,s._)([(0,v.Cb)({aliasOf:"_zoomConditions.canZoomOut",readOnly:!0})],Tr.prototype,"canZoomOut",void 0),(0,s._)([(0,v.Cb)({readOnly:!0})],Tr.prototype,"state",null),(0,s._)([(0,v.Cb)()],Tr.prototype,"view",null),Tr=(0,s._)([(0,_.j)("esri.widgets.Zoom.ZoomViewModel")],Tr);const Mr=Tr,Sr="esri-zoom esri-widget",Ir="esri-zoom--horizontal",kr="esri-icon-plus",Lr="esri-icon-minus",Pr="esri-icon-zoom-in-magnifying-glass";let Er=class extends Es.Z{constructor(e,t){super(e,t),this.iconClass=Pr,this.label=void 0,this.messages=null,this.view=null,this.viewModel=new Mr}initialize(){this._zoomInButton=new _r({action:this.zoomIn.bind(this),iconClass:kr}),this._zoomOutButton=new _r({action:this.zoomOut.bind(this),iconClass:Lr})}destroy(){this._zoomInButton.destroy(),this._zoomOutButton.destroy(),this._zoomInButton=null,this._zoomOutButton=null}set layout(e){"horizontal"!==e&&(e="vertical"),this._set("layout",e)}render(){const e=this.viewModel,t={[Ir]:"horizontal"===this.layout};return this._zoomInButton.enabled="ready"===e.state&&e.canZoomIn,this._zoomOutButton.enabled="ready"===e.state&&e.canZoomOut,this._zoomInButton.title=this.messages.zoomIn,this._zoomOutButton.title=this.messages.zoomOut,(0,zs.u)("div",{class:this.classes(Sr,t)},this._zoomInButton.render(),this._zoomOutButton.render())}zoomIn(){return this.viewModel.zoomIn()}zoomOut(){return this.viewModel.zoomOut()}};(0,s._)([(0,v.Cb)()],Er.prototype,"iconClass",void 0),(0,s._)([(0,v.Cb)({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],Er.prototype,"label",void 0),(0,s._)([(0,v.Cb)({value:"vertical"})],Er.prototype,"layout",null),(0,s._)([(0,v.Cb)(),(0,Fs.H)("esri/widgets/Zoom/t9n/Zoom")],Er.prototype,"messages",void 0),(0,s._)([(0,z.B)("viewModel.view")],Er.prototype,"view",void 0),(0,s._)([(0,v.Cb)({type:Mr})],Er.prototype,"viewModel",void 0),Er=(0,s._)([(0,_.j)("esri.widgets.Zoom")],Er);const Rr=Er,Vr="esri.views.ui.DefaultUI";p.Z.getLogger(Vr);let Or=class extends Ps{constructor(e){super(e),this._defaultPositionLookup={attribution:"manual",compass:"top-left","navigation-toggle":"top-left",zoom:"top-left"},this.components=[]}initialize(){this._handles.add([(0,g.YP)((()=>this.components),this._componentsWatcher.bind(this),g.nn),(0,g.YP)((()=>this.view),this._updateViewAwareWidgets.bind(this),g.nn)])}_add(e,t,i,s){if("string"==typeof e&&this._defaultPositionLookup[e]){if(this._find(e))return;e=this._createComponent(e)}super._add(e,t,i,s)}_removeComponents(e){e.forEach((e=>{const t=this._find(e);t&&(this.remove(t),t.destroy())}))}_updateViewAwareWidgets(e){this.components.forEach((t=>{const i=this._find(t),s=i&&i.widget;(function(e){return e&&void 0!==e.view})(s)&&(s.view=e)}))}_componentsWatcher(e,t){this._removeComponents(t),this._addComponents(e),this._adjustPadding(e)}_adjustPadding(e){if(!e.includes("attribution")&&!this._isOverridden("padding")){const{top:e}=this.padding;this.padding=e}}_addComponents(e){this.initialized&&e.forEach((e=>this.add(this._createComponent(e),this._defaultPositionLookup[e])))}_createComponent(e){const t=this._createWidget(e);if(t)return new ds({id:e,node:t})}_createWidget(e){return"attribution"===e?this._createAttribution():"compass"===e?this._createCompass():"navigation-toggle"===e?this._createNavigationToggle():"zoom"===e?this._createZoom():void 0}_createAttribution(){return new Xs({view:this.view})}_createCompass(){return new Js.Z({view:this.view})}_createNavigationToggle(){return new dr({view:this.view})}_createZoom(){return new Rr({view:this.view})}};(0,s._)([(0,v.Cb)()],Or.prototype,"components",void 0),Or=(0,s._)([(0,_.j)(Vr)],Or);const Dr=Or;let Ar=class extends Dr{constructor(e){super(e),this.components=["attribution","zoom"]}};(0,s._)([(0,v.Cb)()],Ar.prototype,"components",void 0),Ar=(0,s._)([(0,_.j)("esri.views.ui.2d.DefaultUI2D")],Ar);const Zr=Ar;var Nr=i(53042);const Gr=p.Z.getLogger("esri.views.MapView");let Fr,zr,Br,Ur,Wr,jr;let Hr=class extends(P((0,E.f)(R(Ke)))){constructor(e){super(e),this._magnifierView=null,this._stage=null,this._resolveWhenReady=[],this.rootLayerViews=new o.Z({getCollections:()=>[this.basemapView?.baseLayerViews,this.layerViews,this.basemapView?.referenceLayerViews],getChildrenFunction:()=>null}),this.featuresTilingScheme=null,this.fullOpacity=1,this.graphicsView=null,this.labelManager=null,this.mapViewNavigation=null,this.renderingOptions={samplingMode:"dynamic",edgeLabelsVisible:!0,labelsAnimationTime:125,labelCollisionsEnabled:!0},this.rendering=!1,this.supersampleScreenshotsEnabled=!1,this.supportsGround=!1,this._stationaryTimer=null,this.frameTask=new rt(this),this._pePromise=null,this.floors=new a.Z,this.highlightOptions=new ss,this.inputManager=new Ji({view:this}),this.map=null,this.resizeAlign="center",this.spatialReferenceLocked=!1,this.timeline=new rs.T,this.type="2d",this.ui=new Zr,this._pixelFormat={flipY:!0,premultipliedAlpha:!0},this.constraints=new It,this.padding={top:0,right:0,bottom:0,left:0},this.handles.add([(0,g.YP)((()=>this.viewpoint),(()=>{this._lastStationaryEventTimestamp=performance.now(),this._flipStationary(160)}),g.Z_),this.on("resize",(e=>this._resizeHandler(e))),(0,g.YP)((()=>this.animationManager?.animation),(e=>{this.animation=e}))]),(0,f.j2)()}destroy(){this._set("preconditionsReady",!1),this._gotoTask=this.frameTask=null,this.rootLayerViews.destroy(),this.inputManager.destroy(),this._set("inputManager",null)}get graphicsTileStore(){return new Qi.Z(this.featuresTilingScheme)}get initialExtentRequired(){const{scale:e,constraints:t,center:i,viewpoint:s,extent:r}=this;let n=this.zoom;return!(this.map&&"initialViewProperties"in this.map&&this.map.initialViewProperties?.viewpoint)&&!r&&(t?.effectiveLODs||(n=-1),(!i||0===e&&-1===n)&&(!s||!(0,d.pC)(s.targetGeometry)||"extent"!==s.targetGeometry.type&&!s.scale))}get resourceManager(){return this._stage.resourceManager}get textureManager(){return this._stage.painter.textureManager}get _defaultsFromMapSettings(){return{required:{tileInfo:!0,heightModelInfo:!1,extent:!1},requiresExtentInSpatialReference:this.spatialReferenceLocked}}get _projectionEngineLoaded(){return!!(0,C.kR)()||(this._pePromise||(this._pePromise=(0,C.zD)().finally((()=>{this._pePromise=null}))),!1)}get typeSpecificPreconditionsReady(){const e=this._getDefaultViewpoint();if(!e)return!1;const t=this.spatialReference,i=(0,d.Wg)(e.targetGeometry);return!!(0,C.Up)(i.spatialReference,t)||this._projectionEngineLoaded}set animation(e){const t=this._get("animation");if(e===t)return;if(t&&t.stop(),!e||e.isFulfilled())return void this._set("animation",null);this._set("animation",e),this.frameTask.animationInProgress=!0;const i=()=>{e===this._get("animation")&&(this._set("animation",null),this.frameTask.requestFrame()),this.frameTask.animationInProgress=!1};e.when(i,i)}get background(){return this.get("map.initialViewProperties.background")||null}set background(e){void 0===e?this._clearOverride("background"):this._override("background",e)}get center(){if(!this.ready)return this._get("center");const{center:e,spatialReference:t}=this.state.paddedViewState;return new b.Z({x:e[0],y:e[1],spatialReference:t})}set center(e){if(null==e)return;if(!this.ready)return this._set("center",e),void this.notifyChange("initialExtentRequired");let t;try{t=this._project(e,this.spatialReference)}catch(s){return void Gr.error(new l.Z("mapview:invalid-center","could not project the value in the view's spatial reference",{input:e,error:s}))}const i=this.viewpoint;(0,et.o2)(i,i,t),this.viewpoint=i}set constraints(e){const t=this._get("constraints");t&&(this.handles.remove("map-view-constraints"),t.destroy()),this._set("constraints",e),e&&(e.view=this,this.ready&&(this.state.viewpoint=e.fit(this.state.paddedViewState.viewpoint)),this.handles.add((0,g.YP)((()=>e.version),(()=>{this.ready&&this.state&&(this.state.viewpoint=e.fit(this.state.paddedViewState.viewpoint))}),g.Z_),"map-view-constraints"))}get extent(){return this.ready?this.state.paddedViewState.extent.clone():this._get("extent")}set extent(e){if(null==e)return;if(!e.width||!e.height)return void Gr.error(new l.Z("mapview:invalid-extent","invalid extent size"));if(!this.ready)return this._set("extent",e),this._set("center",null),this._set("viewpoint",null),this._set("scale",0),this._set("zoom",-1),void this.notifyChange("initialExtentRequired");let t;try{t=this._project(e,this.spatialReference)}catch(s){return void Gr.error(new l.Z("mapview:invalid-extent","could not project the value in the view's spatial reference",{error:s}))}const i=this.viewpoint;(0,et.qf)(i,i,t,this.size,{constraints:this.constraints}),this.viewpoint=i}get padding(){return this.ready?this.state.padding:this._get("padding")}set padding(e){this.ready?(this.state.padding=e,this._set("padding",this.state.padding)):this._set("padding",e)}get resolution(){return this.state?this.state.resolution:0}get rotation(){return this.ready?this.state.rotation:this._get("rotation")}set rotation(e){if(isNaN(e))return;if(!this.ready)return void this._set("rotation",e);const t=this.viewpoint;(0,et.YQ)(t,t,e),this.viewpoint=t}get scale(){return this.ready?this.state.scale:this._get("scale")}set scale(e){if(!e||isNaN(e))return;if(!this.ready){this._set("scale",e),this._set("zoom",-1);const t=this._get("extent");return t&&(this._set("extent",null),this._set("center",t.center)),void this.notifyChange("initialExtentRequired")}const t=this.viewpoint;(0,et.Hy)(t,t,e),this.viewpoint=t}get stationary(){return!(this.animation||this.navigating||this.resizing||this._stationaryTimer)}get updating(){return!this.destroyed&&(!this.layerViewManager||!this.labelManager||!this.graphicsView||!0===this.layerViewManager.updating||!0===this.labelManager.updating||!0===this.graphicsView.updating||this.allLayerViews.some((e=>!e.destroyed&&!("layerViews"in e)&&!0===e.updating)))}get viewpoint(){if(!this.ready)return this._get("viewpoint");const e=this.state.paddedViewState;return e&&e.viewpoint.clone()}set viewpoint(e){if(null==e)return;if(!this.ready)return this._set("viewpoint",e),this._set("extent",null),this._set("center",null),this._set("zoom",-1),this._set("scale",0),void this.notifyChange("initialExtentRequired");let t,i;try{t=this._project(e,this.spatialReference),!e.scale||isNaN(e.scale)?i=new l.Z("mapview:invalid-viewpoint",`invalid scale value of ${e.scale}`):(0,d.Wi)(e.targetGeometry)&&(i=new l.Z("mapview:invalid-viewpoint","geometry not defined"))}catch(Pe){i=new l.Z("mapview:invalid-viewpoint","could not project the value in the view's spatial reference",{error:Pe})}if(i)return void Gr.error(i);this._scaleBeforeChangingSpatialReference=null;const s=new n.Z({targetGeometry:new b.Z,scale:0,rotation:0});(0,et.JG)(s,t),this.constraints.constrain(s,this.state.paddedViewState.viewpoint),this.state.viewpoint=s,this.frameTask.requestFrame(),this._set("viewpoint",s)}get zoom(){return this.ready?this.constraints.scaleToZoom(this.scale):this._get("zoom")}set zoom(e){if(null==e)return;if(!this.ready){this._set("zoom",e),this._set("scale",0);const t=this._get("extent");return t&&(this._set("extent",null),this._set("center",t.center)),void this.notifyChange("initialExtentRequired")}if(!this.constraints.effectiveLODs)return void this._set("zoom",-1);const t=this.viewpoint;(0,et.Hy)(t,t,this.constraints.zoomToScale(e)),this.viewpoint=t,this._set("zoom",this.constraints.scaleToZoom(this.scale))}get navigating(){return!(!this.mapViewNavigation||!this.mapViewNavigation.interacting)}goTo(e,t){if(e)return this.animation&&(this.animation=null),this._createAnimation(),(0,g.N1)((()=>this.ready),t).then((()=>{const i={animate:!0,...t},s=(0,et.Ue)(e,this);return this.animation.update(s),this._gotoTask={},i.animate?this._gotoAnimated(s,i):this._gotoImmediate(s,i)}));Gr.error("#goTo()","target cannot be null or undefined")}async hitTest(e,t){const i=(0,ve.Rw)(e)?(0,ve.s6)(this,e):e;if(!this.ready||isNaN(i.x)||isNaN(i.y))return{screenPoint:i,results:[]};let s=new Set,r=!1,n=null,a=null;t?.include?Kr(t.include,$r(this,(e=>s.add(e)),(e=>{n||(n=new Set),n.add(e)}),(e=>s.add(e)),(()=>r=!0))):(r=!0,s=new Set(this.allLayerViews)),t?.exclude&&Kr(t.exclude,$r(this,(e=>s.delete(e)),(e=>{a||(a=new Set),a.add(e)})));const o=this.allLayerViews.filter((e=>!e.suspended&&s.has(e))).reverse(),l=this.toMap(i);let c=[...r?this.graphicsView.hitTest(l).map((e=>({type:"graphic",graphic:e,layer:null,mapPoint:l}))):[],...await Promise.all(o.map((e=>e.hitTest(l,i))).toArray())].filter(d.pC).flat().filter(d.pC);return n&&(c=c.filter((e=>!("graphic"in e)||!e.graphic||n.has(Yr(e.graphic))))),a&&(c=c.filter((e=>!("graphic"in e)||!e.graphic||a.has(Yr(e.graphic))))),{screenPoint:i,results:c}}async takeScreenshot(e){const t=this._createScreenshotPlan(e),i=await this._stage.takeScreenshot(t);return(0,ns.cv)(i,{format:t.format,quality:t.quality,rotation:0,disableDecorations:!1},this._pixelFormat)}async _takeScreenshot(e){const t=this._createScreenshotPlan(e),i=await this._stage.takeScreenshot(t);return(0,ns.v8)(i,this._pixelFormat)}_createScreenshotPlan(e){e=e||{};const t=this.supersampleScreenshotsEnabled?Math.min(4,(0,ns.RZ)(this.size,Math.min(4096,this._stage.context.parameters.maxTextureSize))):1;let i;e.layers?(i=[],e.layers.forEach((e=>{const t=this.allLayerViews.find((t=>t.layer.id===e.id));t&&"container"in t&&t.container&&i.push(t.container)}))):i=this._stage.children;const{format:s,quality:r}=(0,ns.LI)(e.format,e.quality);return function(e,t,i,s,r,n,a,o){let l;e.ignorePadding&&(s={left:0,right:0,top:0,bottom:0}),null!=e.width&&null!=e.height?l=[e.width,e.height]:null==e.width&&null!=e.height?l=[e.height,e.height]:null!=e.width&&null==e.height?l=[e.width,e.width]:null==e.width&&null==e.height&&(l=null);const c=i[0]-(s.left+s.right),h=i[1]-(s.top+s.bottom);let p,d,u=e.area||{x:0,y:0,width:c,height:h};if(l){const e=c/h,t=l[0]/l[1];if(t>e){const e=u.width/t;u={x:u.x,y:Math.round(u.y+(u.height-e)/2),width:u.width,height:Math.round(e)}}else{const e=u.height*t;u={x:Math.round(u.x+(u.width-e)/2),y:u.y,width:Math.round(e),height:u.height}}}else l=[u.width,u.height];return l[0]>u.width?(p=Math.min(l[0]/u.width,t),d=l[0]/u.width/p):(p=1,d=l[0]/u.width),{resolutionScale:p,cropArea:{x:Math.round((u.x+s.left)*p),y:Math.round((u.y+s.top)*p),width:Math.round(u.width*p),height:Math.round(u.height*p)},outputScale:d,format:r,quality:n,children:a,rotation:o}}(e,t,this.size,this.padding,s,r,i,e.rotation)}get test(){return{takeScreenshot:e=>this._takeScreenshot(e)}}toMap(e){if(!this.ready)return null;const t=(0,ve.Rw)(e)?(0,ve.s6)(this,e):e,[i,s]=this.state.toMap([0,0],[t.x,t.y]),r=this.spatialReference;return new b.Z({x:i,y:s,spatialReference:r})}toScreen(e){if(!this.ready)return null;const t=this._project(e,this.spatialReference),i=[t.x,t.y];return this.state.toScreen(i,i),(0,m.vW)(i[0],i[1])}on(e,t,i,s){return this.inputManager&&this.viewEvents.on(e,t,i,s)||super.on(e,t)}hasEventListener(e){return super.hasEventListener(e)||this.viewEvents.hasHandler(e)}whenLayerView(e){return super.whenLayerView(e)}graphicChanged(e){this.graphicsView&&this.graphicsView.graphicUpdateHandler(e)}whenReady(){return new Promise((e=>{this.ready?e(this):this._resolveWhenReady.push(e)}))}forceDOMReadyCycle(){this.forceReadyCycle()}getDefaultSpatialReference(){return this.map&&"initialViewProperties"in this.map&&this.map?.initialViewProperties?.spatialReference||this.defaultsFromMap?.spatialReference||null}hasLayerViewModule(e){return ct(e)}importLayerView(e){return ht(e)}pixelSizeAt(){return this.ready?this.state.resolution:(Gr.error("#pixelSizeAt()","Map view cannot be used before it is ready"),null)}popupHitTest(e){return this.hitTest(e).then((t=>({...t,mapPoint:this.toMap(e)})))}requestUpdate(){this.ready&&this.frameTask.requestUpdate()}validate(){let e=function(e){const t=(0,as.hc)(e);if(!t.available)return new l.Z("webgl:required","WebGL is required but not supported.");if("3d"===e&&t.majorPerformanceCaveat)return new l.Z("webgl:major-performance-caveat-detected","Your WebGL implementation doesn't seem to support hardware accelerated rendering. Check your browser settings or if your GPU is in a blocklist.");if(!t.supportsHighPrecisionFragment)return new l.Z("webgl:high-precision-fragment-required","WebGL support for high precision fragment shaders is required but not supported.");if(!t.supportsVertexShaderSamplers)return new l.Z("webgl:vertex-shader-samplers-required","WebGL support for vertex shader samplers is required but not supported.");if(t.type===os.zO.WEBGL1){if(!t.supportsElementIndexUint)return new l.Z("webgl:element-index-uint-required","WebGL support for uint vertex indices is required but not supported.");if(!t.supportsStandardDerivatives)return new l.Z("webgl:standard-derivatives-required","WebGL support for standard derivatives is required but not supported.");if(!t.supportsInstancedArrays)return new l.Z("webgl:instanced-arrays-required","WebGL support for instanced rendering is required but not supported.")}return null}(this.type);return(0,c.Z)("safari")&&(0,c.Z)("safari")<9&&(e=new l.Z("mapview:browser-not-supported","This browser is not supported by MapView (Safari < 9)",{type:"safari",requiredVersion:9,detectedVersion:(0,c.Z)("safari")})),(0,d.pC)(e)?(Gr.warn("#validate()",e.message),Promise.reject(e)):async function(){const[,{GraphicsView2D:e,GraphicContainer:t,LabelManager:s,MapViewNavigation:r,MagnifierView2D:n,Stage:a}]=await Promise.all([Promise.all([i.e(1378),i.e(2029),i.e(6426),i.e(345)]).then(i.bind(i,60345)),Promise.all([i.e(1378),i.e(2029),i.e(7331),i.e(7314),i.e(8651),i.e(6426),i.e(3370),i.e(4510),i.e(5082),i.e(8915),i.e(9815),i.e(7671),i.e(4318),i.e(9484),i.e(8348),i.e(2461),i.e(4280),i.e(7832)]).then(i.bind(i,87832))]);zr=e,Br=t,Ur=s,Wr=r,jr=n,Fr=a}()}_createAnimation(){return this.animation&&!this.animation.done||(this.animation=new Je),this.animation}_cancellableGoTo(e,t,i){const s=()=>e===this._gotoTask,r=i.then((()=>{s()&&(this.animation=null)})).catch((e=>{throw s()&&(this.animation=null,t.done||(t.stop(),this.frameTask.animationInProgress=!1)),e})),n=new Promise((e=>e(r)));return t.when().catch((()=>{s()&&n.cancel&&n.cancel()})),n}_gotoImmediate(e,t){const i=this._gotoTask,s=this.animation,r=e.then((e=>{if((0,u.k_)(t),i!==this._gotoTask)throw new l.Z("view:goto-interrupted","Goto was interrupted");this.viewpoint=s.target=e,s.finish()}));return this._cancellableGoTo(i,s,r)}_flipStationary(e){return null!==this._stationaryTimer||(this._stationaryTimer=setTimeout((()=>{this._stationaryTimer=null;const e=performance.now()-this._lastStationaryEventTimestamp;e<160&&(this._stationaryTimer=this._flipStationary(e))}),e)),this._stationaryTimer}_getDefaultViewpoint(){const{constraints:e,initialExtent:t,map:i,padding:s,size:r}=this;if(!e)return null;const a=i&&"initialViewProperties"in i&&i.initialViewProperties,o={zoom:this._get("zoom"),scale:this._get("scale"),center:this._get("center"),extent:this._get("extent"),rotation:this._get("rotation"),viewpoint:this._get("viewpoint"),spatialReference:this._userSpatialReference};e.effectiveLODs?-1!==o.zoom&&(o.scale=e.zoomToScale(o.zoom)):o.zoom=-1;let l=null,c=null,h=0;const p=o.viewpoint&&o.viewpoint.rotation,u=o.viewpoint&&o.viewpoint.targetGeometry;(0,d.pC)(u)&&("extent"===u.type?l=u:"point"===u.type&&(c=u,h=o.viewpoint.scale));const g=o.extent||l||(0,d.Wg)(a?.viewpoint?.targetGeometry)?.extent||t,m=o.center||c||g?.center,y=o.scale||h||a?.viewpoint?.scale||g&&(0,et.EK)(g,[r[0]-s.left-s.right,r[1]-s.top-s.bottom]),f=o.rotation||p||a?.viewpoint?.rotation||0;return m&&y?new n.Z({targetGeometry:m,scale:y,rotation:f}):null}_gotoAnimated(e,t){const i=this._gotoTask,s=this.animation,r=e.then((e=>{if((0,u.k_)(t),i!==this._gotoTask)throw new l.Z("view:goto-interrupted","Goto was interrupted");return s.update(e),this.animationManager.animate(s,this.viewpoint,t),s.when().then((()=>{}),(()=>{}))}));return this._cancellableGoTo(i,s,r)}_project(e,t){const i=e&&e.targetGeometry||e;if(!t)return e;if(!i)return null;if(t.imageCoordinateSystem||i.spatialReference?.imageCoordinateSystem)return e;if((0,x.fS)(t,i.spatialReference))return e;const s=(0,C.iV)(i,t);if(!s)throw new l.Z("mapview:projection-not-possible","projecting input geometry to target spatial reference returned a null value",{geometry:i,spatialReference:t});return function(e){return e&&"esri.Viewpoint"===e.declaredClass}(e)?(e.targetGeometry=s,e):s}_resizeHandler(e){if(!this.ready)return;const t=this.state;let i=this.state.paddedViewState.viewpoint;const s=this.state.paddedViewState.size.concat();t.size=[e.width,e.height],(0,et.SI)(i,i,s,this.state.paddedViewState.size,this.resizeAlign),i=this.constraints.constrain(i,null),this.state.viewpoint=i}_startup(){this.timeline.begin("MapView Startup");const e=this._getDefaultViewpoint(),t=e.targetGeometry;try{this._project(e,this.spatialReference)}catch(k){Gr.warn(new y.Z("mapview:startup-projection-error","projection of initial viewpoint to the view's spatial reference, defaulting to the initial viewpoint.",{center:t.toJSON(),spatialReference:this.spatialReference,error:k})),e.targetGeometry=this.defaultsFromMap.extent?.center||new b.Z({x:0,y:0,spatialReference:this.spatialReference})}this.constraints?.fit(e),this._set("state",new Ht({padding:this._get("padding"),size:this.size,viewpoint:e})),this.graphics.owner=this;const i=new Fr(this.surface,{canvas:this.renderCanvas,supersampleScreenshots:this.supersampleScreenshotsEnabled,contextOptions:{disabledExtensions:this.deactivatedWebGLExtensions,debugWebGLExtensions:this.debugWebGLExtensions},renderingOptions:this.renderingOptions,timeline:this.timeline});this._stage=i,this._magnifierView=new jr,this._magnifierView.magnifier=this.magnifier;const s=new Ur({view:this});this._set("labelManager",s);const r=new st({view:this});this._set("animationManager",r);const n=new Wr({view:this,animationManager:r});this._set("mapViewNavigation",n),this._setupSpatialReferenceDependentProperties(),this.handles.add([this.rootLayerViews.on("change",(()=>this._updateStageChildren())),i.on("post-render",(()=>this._set("rendering",i.renderRequested))),i.on("will-render",(()=>this._set("rendering",i.renderRequested))),i.on("webgl-error",(e=>this.fatalError=e.error)),(0,g.YP)((()=>this.stationary),(e=>i.stationary=e),g.tX),(0,g.YP)((()=>this.background),(e=>{i.background=e,this._magnifierView.background=e}),g.tX),(0,g.YP)((()=>this.magnifier),(e=>this._magnifierView.magnifier=e),g.tX),(0,g.YP)((()=>this.renderingOptions),(e=>i.renderingOptions=e),g.tX),(0,g.YP)((()=>this.highlightOptions),(e=>i.highlightOptions=e),g.tX),(0,g.YP)((()=>this.state.id),(()=>i.state=this.state),g.tX)],"map-view"),this._updateStageChildren();const a=this._resolveWhenReady;this._resolveWhenReady=[],a.forEach((e=>e(this))),this.timeline.end("MapView Startup"),this.frameTask&&this.frameTask.start(),this._set("ready",!0)}_teardown(){this._destroySpatialReferenceDependentProperties(),this.handles.remove("map-view"),this.mapViewNavigation.destroy(),this._set("mapViewNavigation",null),this.animationManager.destroy(),this._set("animationManager",null),this.layerViewManager.clear(),this.labelManager.destroy(),this._magnifierView.destroy(),this._stage.destroy(),this._stage=null,this._set("graphicsView",null),this._magnifierView=null,this._set("labelManager",null),this._set("mapViewNavigation",null),this.graphics.owner=null,this.frameTask&&this.frameTask.stop(),this._stationaryTimer&&(clearTimeout(this._stationaryTimer),this._stationaryTimer=null),this._set("ready",!1);const{center:[e,t],spatialReference:i,rotation:s,scale:r}=this.state.paddedViewState,n=new b.Z({x:e,y:t,spatialReference:i});this._set("viewpoint",null),this._set("extent",null),this._set("center",n),this._set("zoom",-1),this._set("rotation",s),this._set("scale",r),this._set("spatialReference",i),this._set("state",null),this.animation=null}_updateStageChildren(){this._stage.removeAllChildren(),this.rootLayerViews.forEach((e=>{this._stage.addChild(e.container)}));const e=this.graphicsView;this._stage.addChild(e.container),this._stage.addChild(this._magnifierView)}_setupSpatialReferenceDependentProperties(){const e=new qt.Z(T.Z.create({spatialReference:this.spatialReference,size:512,numLODs:36}));this._set("featuresTilingScheme",e);const t=new zr({view:this,graphics:this.graphics,requestUpdateCallback:()=>this.requestUpdate(),container:new Br(e)});this.frameTask.graphicsView=t,this._set("graphicsView",t)}_destroySpatialReferenceDependentProperties(){const e=this.graphicsView;this._set("graphicsView",null),this.frameTask.graphicsView=null,e.destroy(),this._set("featuresTilingScheme",null)}_spatialReferenceChanged(e){if(!this.ready)return;this.frameTask.stop();for(const n of this.allLayerViews)n.processDetach();this._destroySpatialReferenceDependentProperties();const t=this.state.paddedViewState.clone();if((0,d.Wi)(this._scaleBeforeChangingSpatialReference))this._scaleBeforeChangingSpatialReference=t.scale;else{const e=t.viewpoint.clone();e.scale=this._scaleBeforeChangingSpatialReference,t.viewpoint=e}const i=t.clone(),[s,r]=t.center;let a=null;try{a=this._project(new b.Z({x:s,y:r,spatialReference:t.spatialReference}),e)}catch(R){(0,C.kR)()||Gr.warn(new y.Z("mapview:spatial-reference-change","could not project the view's center to the new spatial reference",{center:a.toJSON(),spatialReference:e,error:R}))}a||(a=new b.Z({x:0,y:0,spatialReference:e}));const o=(0,et.o2)(new n.Z({targetGeometry:new b.Z,scale:0,rotation:0}),t.viewpoint,a);i.viewpoint=o;try{const s=20,r=[t.size[0]/2,t.size[1]/2],n=[r[0]+s,r[1]],a=t.toMap([0,0],n),{x:l,y:h}=this._project(new b.Z({x:a[0],y:a[1],spatialReference:t.spatialReference}),e);a[0]=l,a[1]=h,i.toScreen(a,a);const p=(0,et.dI)(r,a,n),d=Math.hypot(a[0]-r[0],a[1]-r[1])/s;!Number.isFinite(d)||Math.abs(d)>4?(o.rotation=0,o.targetGeometry=new b.Z({x:0,y:0,spatialReference:e})):(o.scale*=d,o.scale>(0,c.Z)("mapview-srswitch-adjust-rotation-scale-threshold")?o.rotation=0:o.rotation+=Number.isFinite(p)?p:0)}catch{}this._get("constraints").constrain(o,null),this._get("state").viewpoint=o,this._stage.state=this.state,this._setupSpatialReferenceDependentProperties();for(const n of this.allLayerViews)n.processAttach();this.frameTask.requestFrame(),this.frameTask.start(),this._updateStageChildren()}};Hr.type="2d",(0,s._)([(0,v.Cb)({readOnly:!0})],Hr.prototype,"animationManager",void 0),(0,s._)([(0,v.Cb)({constructOnly:!0})],Hr.prototype,"deactivatedWebGLExtensions",void 0),(0,s._)([(0,v.Cb)({constructOnly:!0})],Hr.prototype,"debugWebGLExtensions",void 0),(0,s._)([(0,v.Cb)({readOnly:!0})],Hr.prototype,"featuresTilingScheme",void 0),(0,s._)([(0,v.Cb)({readOnly:!0})],Hr.prototype,"fullOpacity",void 0),(0,s._)([(0,v.Cb)({readOnly:!0})],Hr.prototype,"graphicsTileStore",null),(0,s._)([(0,v.Cb)()],Hr.prototype,"graphicsView",void 0),(0,s._)([(0,v.Cb)({readOnly:!0})],Hr.prototype,"state",void 0),(0,s._)([(0,v.Cb)()],Hr.prototype,"initialExtentRequired",null),(0,s._)([(0,v.Cb)()],Hr.prototype,"labelManager",void 0),(0,s._)([(0,v.Cb)({readOnly:!0})],Hr.prototype,"resourceManager",null),(0,s._)([(0,v.Cb)({readOnly:!0})],Hr.prototype,"textureManager",null),(0,s._)([(0,v.Cb)({readOnly:!0})],Hr.prototype,"mapViewNavigation",void 0),(0,s._)([(0,v.Cb)({constructOnly:!0})],Hr.prototype,"renderCanvas",void 0),(0,s._)([(0,v.Cb)()],Hr.prototype,"renderingOptions",void 0),(0,s._)([(0,v.Cb)({readOnly:!0})],Hr.prototype,"rendering",void 0),(0,s._)([(0,v.Cb)({constructOnly:!0})],Hr.prototype,"supersampleScreenshotsEnabled",void 0),(0,s._)([(0,v.Cb)({readOnly:!0})],Hr.prototype,"supportsGround",void 0),(0,s._)([(0,v.Cb)()],Hr.prototype,"_stationaryTimer",void 0),(0,s._)([(0,v.Cb)()],Hr.prototype,"_defaultsFromMapSettings",null),(0,s._)([(0,v.Cb)()],Hr.prototype,"_pePromise",void 0),(0,s._)([(0,v.Cb)({readOnly:!0})],Hr.prototype,"typeSpecificPreconditionsReady",null),(0,s._)([(0,v.Cb)()],Hr.prototype,"animation",null),(0,s._)([(0,v.Cb)({type:Nr.Z})],Hr.prototype,"background",null),(0,s._)([(0,v.Cb)({value:null,type:b.Z,dependsOn:["state.id","ready"]})],Hr.prototype,"center",null),(0,s._)([(0,v.Cb)({type:It})],Hr.prototype,"constraints",null),(0,s._)([(0,v.Cb)({value:null,type:w.Z,dependsOn:["state.id","ready"]})],Hr.prototype,"extent",null),(0,s._)([(0,v.Cb)()],Hr.prototype,"floors",void 0),(0,s._)([(0,v.Cb)({type:ss})],Hr.prototype,"highlightOptions",void 0),(0,s._)([(0,v.Cb)({readOnly:!0})],Hr.prototype,"inputManager",void 0),(0,s._)([(0,v.Cb)()],Hr.prototype,"map",void 0),(0,s._)([(0,v.Cb)({value:{top:0,right:0,bottom:0,left:0},cast:e=>({top:0,right:0,bottom:0,left:0,...e})})],Hr.prototype,"padding",null),(0,s._)([(0,v.Cb)()],Hr.prototype,"resizeAlign",void 0),(0,s._)([(0,v.Cb)({readOnly:!0,dependsOn:["state.id"]})],Hr.prototype,"resolution",null),(0,s._)([(0,v.Cb)({value:0,type:Number,dependsOn:["state.id","ready"]})],Hr.prototype,"rotation",null),(0,s._)([(0,v.Cb)({value:0,type:Number,dependsOn:["state.id","ready"]})],Hr.prototype,"scale",null),(0,s._)([(0,v.Cb)({constructOnly:!0})],Hr.prototype,"spatialReferenceLocked",void 0),(0,s._)([(0,v.Cb)()],Hr.prototype,"stationary",null),(0,s._)([(0,v.Cb)({type:rs.T,readOnly:!0})],Hr.prototype,"timeline",void 0),(0,s._)([(0,v.Cb)({readOnly:!0})],Hr.prototype,"type",void 0),(0,s._)([(0,v.Cb)({readOnly:!0})],Hr.prototype,"updating",null),(0,s._)([(0,v.Cb)({value:null,type:n.Z,dependsOn:["state.id","ready"]})],Hr.prototype,"viewpoint",null),(0,s._)([(0,v.Cb)({value:-1,dependsOn:["state.id","ready"]})],Hr.prototype,"zoom",null),(0,s._)([(0,v.Cb)({type:Boolean})],Hr.prototype,"navigating",null),(0,s._)([(0,v.Cb)({type:Zr})],Hr.prototype,"ui",void 0),Hr=(0,s._)([(0,_.j)("esri.views.MapView")],Hr);const qr=Hr;function Yr(e){const t=e.getObjectId();return t?`${e.layer?.uid??e.sourceLayer?.uid??"MapView"}/${t}`:`"MapView/${e.uid}`}function $r(e,t,i,s,n){return a=>{if(a instanceof r.Z){if(a.layer===e)n?.();else{const t=e.allLayerViews.find((e=>e.layer===a.layer));t&&s?.(t)}i(Yr(a))}else{const i=e.allLayerViews.find((e=>e.layer===a));i&&t(i)}}}function Kr(e,t){if(e)if((0,h.TW)(e))for(const i of e)if((0,h.TW)(i))for(const e of i)t(e);else t(i);else t(e)}},63920:(e,t,i)=>{var s;i.d(t,{t:()=>s}),function(e){e[e.Left=0]="Left",e[e.Middle=1]="Middle",e[e.Right=2]="Right"}(s||(s={}))},99034:(e,t,i)=>{var s,r,n;i.d(t,{Q9:()=>r,bH:()=>s,jg:()=>n}),function(e){e[e.USER=0]="USER",e[e.MANAGER=1]="MANAGER"}(s||(s={})),function(e){e[e.None=0]="None",e[e.Unfocused=1]="Unfocused",e[e.Focused=2]="Focused",e[e.Unselected=4]="Unselected",e[e.Selected=8]="Selected",e[e.All=15]="All"}(r||(r={})),function(e){e[e.None=0]="None",e[e.Custom1=16]="Custom1",e[e.Custom2=32]="Custom2",e[e.Custom3=64]="Custom3",e[e.Custom4=128]="Custom4",e[e.Custom5=256]="Custom5",e[e.Custom6=512]="Custom6",e[e.Custom7=1024]="Custom7",e[e.Custom8=2048]="Custom8",e[e.Custom9=4096]="Custom9",e[e.Custom10=8192]="Custom10",e[e.Custom11=16384]="Custom11",e[e.Custom12=32768]="Custom12",e[e.All=65520]="All"}(n||(n={}))},38164:(e,t,i)=>{i.d(t,{e:()=>l});var s=i(92026),r=i(66978),n=i(43e3),a=i(99346);class o{constructor(e,t){this.item=e,this.controller=t,this.promise=null}}class l{constructor(e){this._deferreds=new Map,this._controllers=new Map,this._processingItems=new Map,this._isPaused=!1,this._schedule=null,this._task=null,this.concurrency=1,e.concurrency&&(this.concurrency=e.concurrency),this._queue=new n.Z(e.peeker),this.process=e.process;const t=e.scheduler;e.priority&&(0,s.pC)(t)&&(this._task=t.registerTask(e.priority,this))}destroy(){this.clear(),this._schedule&&(this._schedule.remove(),this._schedule=null),this._task&&(this._task.remove(),this._task=null)}get length(){return this._processingItems.size+this._queue.length}abort(e){const t=this._controllers.get(e);t&&t.abort()}clear(){this._queue.clear();const e=[];this._controllers.forEach((t=>e.push(t))),this._controllers.clear(),e.forEach((e=>e.abort())),this._processingItems.clear(),this._cancelNext()}forEach(e){this._deferreds.forEach(((t,i)=>e(i)))}get(e){const t=this._deferreds.get(e);return t?t.promise:void 0}isOngoing(e){return this._processingItems.has(e)}has(e){return this._deferreds.has(e)}pause(){this._isPaused||(this._isPaused=!0,this._cancelNext())}push(e,t){const i=this.get(e);if(i)return i;const n=new AbortController;let a=null;t&&(a=(0,r.fu)(t,(()=>n.abort())));const o=()=>{l.remove(),(0,s.pC)(a)&&a.remove(),this._deferreds.delete(e),this._controllers.delete(e),this._queue.remove(e),this._processingItems.delete(e),this._scheduleNext()},l=(0,r.$F)(n.signal,(()=>{const t=this._processingItems.get(e);t&&t.controller.abort(),o(),c.reject((0,r.zE)())})),c=(0,r.dD)();return this._deferreds.set(e,c),this._controllers.set(e,n),c.promise.then(o,o),this._queue.push(e),this._scheduleNext(),c.promise}last(){return this._queue.last()}peek(){return this._queue.peek()}popLast(){return this._queue.popLast()}reset(){const e=[];this._processingItems.forEach((t=>e.push(t))),this._processingItems.clear();for(const t of e)this._queue.push(t.item),t.controller.abort();this._scheduleNext()}resume(){this._isPaused&&(this._isPaused=!1,this._scheduleNext())}takeAll(){const e=[];for(;this._queue.length;)e.push(this._queue.pop());return this.clear(),e}get running(){return!this._isPaused&&this._queue.length>0&&this._processingItems.size<this.concurrency}runTask(e){for(;!e.done&&this._queue.length>0&&this._processingItems.size<this.concurrency;)this._process(this._queue.pop()),e.madeProgress()}_scheduleNext(){this._task||this._isPaused||this._schedule||(this._schedule=(0,a.Os)((()=>{this._schedule=null,this._next()})))}_next(){for(;this._queue.length>0&&this._processingItems.size<this.concurrency;)this._process(this._queue.pop())}_cancelNext(){this._schedule&&(this._schedule.remove(),this._schedule=null)}_processResult(e,t){this._canProcessFulfillment(e)&&(this._scheduleNext(),this._deferreds.get(e.item).resolve(t))}_processError(e,t){this._canProcessFulfillment(e)&&(this._scheduleNext(),this._deferreds.get(e.item).reject(t))}_canProcessFulfillment(e){return!!this._deferreds.get(e.item)&&this._processingItems.get(e.item)===e}_process(e){if((0,s.Wi)(e))return;let t;const i=new AbortController,n=new o(e,i);this._processingItems.set(e,n);try{t=this.process(e,i.signal)}catch(a){this._processError(n,a)}(0,r.y8)(t)?(n.promise=t,t.then((e=>this._processResult(n,e)),(e=>this._processError(n,e)))):this._processResult(n,t)}get test(){return{update:e=>this.runTask(e)}}}},7796:(e,t,i)=>{i.d(t,{Jl:()=>u,LI:()=>h,RZ:()=>p,TT:()=>g,cv:()=>n,r7:()=>d,v8:()=>a});i(93169);var s=i(16889),r=i(92026);function n(e,t,i){const{ctx:s,canvas:r}=o(e,i),n=s.getImageData(0,0,e.width,e.height),a=function(e,t){const i=_[t.format],s=t.quality/100;return e.toDataURL(i,s)}(r,t);return l(r),{dataUrl:a,data:n}}function a(e,t){const{ctx:i,canvas:s}=o(e,t),r=i.getImageData(0,0,e.width,e.height);return l(s),r}function o(e,t){const i=((0,r.Wi)(c)&&(c=document.createElement("canvas")),c);t.premultipliedAlpha&&function(e){const t=e.data,i=t.length;for(let s=0;s<i;s+=4){const e=t[s+3];if(255!==e&&e>0){const i=255/e;t[s+0]=t[s+0]*i,t[s+1]=t[s+1]*i,t[s+2]=t[s+2]*i}}}(e),i.width=e.width,i.height=e.height;const s=i.getContext("2d");return s.putImageData(e,0,0),t.flipY&&function(e){e.save(),e.globalCompositeOperation="copy",e.scale(1,-1),e.translate(0,-e.canvas.height),e.drawImage(e.canvas,0,0),e.restore()}(s),{ctx:s,canvas:i}}function l(e){e.width=0,e.height=0}let c=null;function h(e,t){const i=v(e),r=b[i];return{format:i,quality:(0,s.uZ)(null!=t?t:r,0,100)}}function p(e,t){return t/Math.max(e[0],e[1])}function d(e,t,i){if(!e||!t)throw new Error("Cannot construct image data without dimensions");if(f)try{return new ImageData(e,t)}catch(s){f=!1}return m(e,t,i)}function u(e,t,i,s){if(!t||!i)throw new Error("Cannot construct image data without dimensions");if(f)try{return new ImageData(e,t,i)}catch(n){f=!1}const r=m(t,i,s);return r.data.set(e,0),r}function g(e,t,i){let s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,n=arguments.length>5&&void 0!==arguments[5]?arguments[5]:e.width-s,a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:e.height-r,o=arguments.length>7&&void 0!==arguments[7]&&arguments[7];const{data:l}=e,{width:c,height:h,data:p}=t,d=n/c,u=a/h,g=Math.ceil(d/2),m=Math.ceil(u/2),y=e.width;for(let f=0;f<h;f++)for(let e=0;e<c;e++){const t=4*(e+(o?h-f-1:f)*c);let n=0,a=0,v=0,_=0,w=0,b=0;const C=(f+.5)*u;for(let o=Math.floor(f*u);o<(f+1)*u;o++){const t=Math.abs(C-(o+.5))/m,c=(e+.5)*d,h=t*t;for(let p=Math.floor(e*d);p<(e+1)*d;p++){const e=Math.abs(c-(p+.5))/g,t=Math.sqrt(h+e*e);if(t>=1)continue;let d=2*t*t*t-3*t*t+1;const u=4*(s+p+(r+o)*y);b+=d*l[u+3],a+=d,!i&&l[u+3]<255&&(d=d*l[u+3]/255),v+=d*l[u],_+=d*l[u+1],w+=d*l[u+2],n+=d}}p[t]=v/n,p[t+1]=_/n,p[t+2]=w/n,p[t+3]=b/a}return t}function m(e,t,i){return i||(y||(y=document.createElement("canvas"),y.width=1,y.height=1),i=y),i.getContext("2d").createImageData(e,t)}let y=null,f=!0;function v(e){switch(e){case"png":case"jpg":case"jpeg":return e;default:return w}}const _={png:"image/png",jpg:"image/jpeg",jpeg:"image/jpeg"},w="png",b={png:100,jpg:98,jpeg:98}},90316:(e,t,i)=>{i.d(t,{hc:()=>o});var s=i(92026),r=i(49800);let n,a;function o(e){const t=(0,r.Sh)(e);for(;t.length>1;){const e=l(t.shift());if(e.available)return e}return l(t.shift())}function l(e){switch(e){case r.zO.WEBGL1:return n||(n=function(){const e=new h,t=d(r.zO.WEBGL1,e);return(0,s.Wi)(t)||(e.supportsElementIndexUint=null!==t.getExtension("OES_element_index_uint"),e.supportsStandardDerivatives=null!==t.getExtension("OES_standard_derivatives"),e.supportsInstancedArrays=null!==t.getExtension("ANGLE_instanced_arrays"),e.supportsTextureFloat=null!==t.getExtension("OES_texture_float"),e.supportsTextureHalfFloat=null!==t.getExtension("OES_texture_half_float"),e.supportsColorBufferFloat=null!==t.getExtension("WEBGL_color_buffer_float"),e.supportsColorBufferFloatBlend=null!==t.getExtension("EXT_float_blend"),e.supportsColorBufferHalfFloat=null!==t.getExtension("EXT_color_buffer_half_float")),e}()),n;case r.zO.WEBGL2:return a||(a=function(){const e=new p,t=d(r.zO.WEBGL2,e);return(0,s.Wi)(t)||(e.supportsColorBufferFloat=null!==t.getExtension("EXT_color_buffer_float"),e.supportsColorBufferFloatBlend=null!==t.getExtension("EXT_float_blend"),e.supportsColorBufferHalfFloat=e.supportsColorBufferFloat||null!==t.getExtension("EXT_color_buffer_half_float")),e}()),a}}class c{constructor(){this.available=!1,this.majorPerformanceCaveat=!1,this.maxTextureSize=0,this.supportsVertexShaderSamplers=!1,this.supportsHighPrecisionFragment=!1,this.supportsElementIndexUint=!1,this.supportsStandardDerivatives=!1,this.supportsInstancedArrays=!1,this.supportsTextureFloat=!1,this.supportsTextureHalfFloat=!1,this.supportsColorBufferFloat=!1,this.supportsColorBufferFloatBlend=!1,this.supportsColorBufferHalfFloat=!1}}class h extends c{constructor(){super(...arguments),this.type=r.zO.WEBGL1}}class p extends c{constructor(){super(...arguments),this.type=r.zO.WEBGL2,this.supportsElementIndexUint=!0,this.supportsStandardDerivatives=!0,this.supportsInstancedArrays=!0,this.supportsTextureFloat=!0,this.supportsTextureHalfFloat=!0}}function d(e,t){if(e===r.zO.WEBGL1&&void 0===typeof WebGLRenderingContext||e===r.zO.WEBGL2&&void 0===typeof WebGL2RenderingContext)return null;const i=document.createElement("canvas");if(!i)return null;let n=(0,r.kr)(i,e,{failIfMajorPerformanceCaveat:!0});if((0,s.Wi)(n)&&(n=(0,r.kr)(i,e),(0,s.pC)(n)&&(t.majorPerformanceCaveat=!0)),(0,s.Wi)(n))return n;if(e===r.zO.WEBGL1){const e=n.getParameter(n.VERSION)?.match(/^WebGL\s+([\d.]*)/);if(e){const i=parseFloat(e[1]);t.available=i>=.94}}else t.available=!0;t.maxTextureSize=n.getParameter(n.MAX_TEXTURE_SIZE),t.supportsVertexShaderSamplers=n.getParameter(n.MAX_VERTEX_TEXTURE_IMAGE_UNITS)>0;const a=n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.HIGH_FLOAT);return a&&(t.supportsHighPrecisionFragment=a.precision>0),n}},49800:(e,t,i)=>{i.d(t,{Sh:()=>o,kr:()=>c,sj:()=>a,zO:()=>s});var s,r=i(93169),n=i(92026);function a(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const s=o(e);for(;s.length>1;){const e=c(t,s.shift(),i);if((0,n.pC)(e))return e}return l(t,s.shift(),i)}function o(e){const t=(0,r.Z)("esri-force-webgl");if(t===s.WEBGL1||t===s.WEBGL2)return[t];switch(e){case"2d":return(0,r.Z)("mac")?[s.WEBGL1,s.WEBGL2]:[s.WEBGL2,s.WEBGL1];case"3d":return[s.WEBGL2,s.WEBGL1]}}function l(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!window.WebGLRenderingContext)return h(e,p),null;const s=c(e,t,i);return(0,n.Wi)(s)&&h(e,d),s}function c(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=t===s.WEBGL1?["webgl","experimental-webgl","webkit-3d","moz-webgl"]:["webgl2"];let n=null;for(const s of r){try{n=e.getContext(s,i)}catch(l){}if(n)break}return n}function h(e,t){const i=e.parentNode;i&&(i.innerHTML='<table style="background-color: #8CE; width: 100%; height: 100%;"><tr><td align="center"><div style="display: table-cell; vertical-align: middle;"><div style="">'+t+"</div></div></td></tr></table>")}!function(e){e[e.WEBGL1=1]="WEBGL1",e[e.WEBGL2=2]="WEBGL2"}(s||(s={}));const p='This page requires a browser that supports WebGL.<br/><a href="http://get.webgl.org">Click here to upgrade your browser.</a>',d='It doesn\'t appear your computer can support WebGL.<br/><a href="http://get.webgl.org/troubleshooting/">Click here for more information.</a>'},41190:(e,t,i)=>{i.d(t,{Nw:()=>g});var s=i(10064),r=i(84652),n=i(92026),a=i(18202),o=i(13922),l=i(37933);const c=new Set(["bing-maps","imagery","imagery-tile","map-image","open-street-map","tile","unknown","unsupported","vector-tile","web-tile","wms","wmts"]),h=new Set(["csv","feature","geo-rss","geojson","group","imagery","imagery-tile","kml","map-image","map-notes","ogc-feature","route","tile","unknown","unsupported","vector-tile","web-tile","wfs","wms","wmts"]);function p(e,t){if(t.restrictedWebMapWriting){const i=function(e){return"basemap"===e.layerContainerType?c:"operational-layers"===e.layerContainerType?h:null}(t);return!(0,n.pC)(i)||i.has(e.type)&&!(0,l.rQ)(e)}return!0}function d(e,t){"maxScale"in e&&(t.maxScale=(0,o.k)(e.maxScale)),"minScale"in e&&(t.minScale=(0,o.k)(e.minScale))}function u(e,t){if(function(e,t){if((0,l.rQ)(e)){const i=(0,a.hS)("featureCollection.layers",t),s=i&&i[0]&&i[0].layerDefinition;s&&d(e,s)}else"stream"===e.type?d(e,t.layerDefinition=t.layerDefinition||{}):"group"!==e.type&&d(e,t)}(e,t),"blendMode"in e&&(t.blendMode=e.blendMode,"normal"===t.blendMode&&delete t.blendMode),t.opacity=(0,o.k)(e.opacity),t.title=e.title||"Layer",t.visibility=e.visible,"legendEnabled"in e&&"wmts"!==e.type)if((0,l.rQ)(e)){const i=t.featureCollection;i&&(i.showLegend=e.legendEnabled)}else t.showLegend=e.legendEnabled}function g(e,t,i){if(!("write"in e)||!e.write)return i&&i.messages&&i.messages.push(new s.Z("layer:unsupported",`Layers (${e.title}, ${e.id}) of type '${e.declaredClass}' cannot be persisted`,{layer:e})),null;if(p(e,i)){const t={};return e.write(t,i)?t:null}return(0,n.pC)(t)&&u(e,t=(0,r.d9)(t)),t}},21524:(e,t,i)=>{i.d(t,{Z:()=>I});var s=i(27366),r=i(8025),n=(i(63780),i(93169),i(25243),i(49861)),a=i(69912),o=i(69407),l=i(85015),c=i(100),h=i(92026),p=i(94172),d=i(99505);let u=class extends((0,d._)(l.Z)){constructor(e){super(e),this._handles=new c.Z,this.orientation={x:0,y:0,z:0},this.view=null,this._updateForCamera=this._updateForCamera.bind(this),this._updateForRotation=this._updateForRotation.bind(this),this._updateRotationWatcher=this._updateRotationWatcher.bind(this)}initialize(){this._handles.add((0,p.YP)((()=>this.view),this._updateRotationWatcher,p.nn))}destroy(){this._handles=(0,h.hw)(this._handles),this.view=null}get canShowNorth(){const e=this.get("view.spatialReference");return!(!e||!e.isWebMercator&&!e.isGeographic)}get state(){return this.get("view.ready")?this.canShowNorth?"compass":"rotation":"disabled"}reset(){if(!this.get("view.ready"))return;const e={};"2d"===this.view.type?e.rotation=0:e.heading=0,this.callGoTo({target:e})}_updateForRotation(e){null!=e&&(this.orientation={z:e})}_updateForCamera(e){if(!e)return;const t=-e.heading;this.orientation={x:0,y:0,z:t}}_updateRotationWatcher(e){this._handles.removeAll(),e&&this._handles.add("2d"===e.type?(0,p.YP)((()=>e?.rotation),this._updateForRotation,p.nn):(0,p.YP)((()=>e?.camera),this._updateForCamera,p.nn))}};(0,s._)([(0,n.Cb)({readOnly:!0})],u.prototype,"canShowNorth",null),(0,s._)([(0,n.Cb)()],u.prototype,"orientation",void 0),(0,s._)([(0,n.Cb)({readOnly:!0})],u.prototype,"state",null),(0,s._)([(0,n.Cb)()],u.prototype,"view",void 0),u=(0,s._)([(0,a.j)("esri.widgets.CompassViewModel")],u);const g=u;var m=i(78088),y=i(80532),f=i(67005);i(80975);const v="esri-compass esri-widget--button esri-widget",_="esri-icon-font-fallback-text",w="esri-compass__icon",b="esri-icon-dial",C="esri-icon-compass",x="esri-icon-locate-circled",T="esri-interactive",M="esri-disabled";let S=class extends o.Z{constructor(e,t){super(e,t),this.goToOverride=null,this.iconClass=x,this.label=void 0,this.messages=null,this.view=null,this.viewModel=new g}reset(){return this.viewModel.reset()}render(){const{orientation:e,state:t}=this.viewModel,i="disabled"===t,s="compass"===("rotation"===t?"rotation":"compass"),r=i?-1:0,n={[M]:i,[T]:!i},a={[C]:s,[b]:!s},{messages:o}=this;return(0,f.u)("div",{bind:this,class:this.classes(v,n),onclick:this._reset,onkeydown:this._reset,role:"button",tabIndex:r,"aria-label":o.reset,title:o.reset},(0,f.u)("span",{"aria-hidden":"true",class:this.classes(w,a),styles:this._toRotationTransform(e)}),(0,f.u)("span",{class:_},o.reset))}_reset(){this.viewModel.reset()}_toRotationTransform(e){return{transform:`rotateZ(${e.z}deg)`}}};(0,s._)([(0,r.B)("viewModel.goToOverride")],S.prototype,"goToOverride",void 0),(0,s._)([(0,n.Cb)()],S.prototype,"iconClass",void 0),(0,s._)([(0,n.Cb)({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],S.prototype,"label",void 0),(0,s._)([(0,n.Cb)(),(0,y.H)("esri/widgets/Compass/t9n/Compass")],S.prototype,"messages",void 0),(0,s._)([(0,r.B)("viewModel.view")],S.prototype,"view",void 0),(0,s._)([(0,n.Cb)({type:g})],S.prototype,"viewModel",void 0),(0,s._)([(0,m.h)()],S.prototype,"_reset",null),S=(0,s._)([(0,a.j)("esri.widgets.Compass")],S);const I=S},16912:(e,t,i)=>{i.d(t,{Z:()=>Z});var s=i(27366),r=i(8025),n=(i(63780),i(93169),i(25243),i(49861)),a=i(69912),o=i(69407),l=i(85015),c=i(100),h=i(94172);let p=class extends l.Z{constructor(e){super(e),this._viewpointHandle=null,this._handles=new c.Z,this.group=null}initialize(){this._handles.add((0,h.on)((()=>this.view?.ui),"expand",(e=>{const{target:t}=e;t&&t!==this&&t.expanded&&t.group&&t.group===this.group&&this._collapse()})))}destroy(){this._viewpointHandle=null,this.view=null,this._handles.destroy(),this._handles=null}set autoCollapse(e){this._set("autoCollapse",e),this._watchViewpoint()}set expanded(e){const t=!!e;this._set("expanded",t);const i=this.get("view.ui");i&&i.emit("expand",{target:this}),this._viewpointHandleChange(t)}get state(){return this.get("view.ready")?"ready":"disabled"}set view(e){this._get("view")!==e&&(this._set("view",e),e&&(0,h.gx)((()=>e.ready),(()=>{this.view===e&&this._watchViewpoint()}),{once:!0,initial:!0}))}_viewpointHandleChange(e){this._viewpointHandle&&(e?(0,h.gx)((()=>this.view.stationary),(()=>this._viewpointHandle.resume()),{once:!0,initial:!0}):this._viewpointHandle.pause())}_watchViewpoint(){const e="viewpoint";this._handles.remove(e),this._viewpointHandle=null;const{autoCollapse:t,view:i}=this;if(i&&t){const t=(0,h.Wy)((()=>"3d"===i.type?i.camera:i.viewpoint),(()=>this._collapse()));this._handles.add(t,e),this._viewpointHandle=t}}_collapse(){this.expanded=!1}};(0,s._)([(0,n.Cb)({value:!1})],p.prototype,"autoCollapse",null),(0,s._)([(0,n.Cb)({value:!1})],p.prototype,"expanded",null),(0,s._)([(0,n.Cb)()],p.prototype,"group",void 0),(0,s._)([(0,n.Cb)({readOnly:!0})],p.prototype,"state",null),(0,s._)([(0,n.Cb)({value:null})],p.prototype,"view",null),p=(0,s._)([(0,a.j)("esri.widgets.Expand.ExpandViewModel")],p);const d=p;var u=i(53963),g=i(80532),m=i(78088),y=i(67005);const f="esri-expand esri-widget",v="esri-expand--auto",_="esri-expand--drawer",w="esri-expand--floating",b="esri-expand__container",C="esri-expand__container--expanded",x="esri-expand__panel",T="esri-widget--button",M="esri-icon-font-fallback-text",S="esri-collapse__icon",I="esri-expand__icon--expanded",k="esri-expand__icon-number",L="esri-expand__icon-number--expanded",P="esri-icon-expand",E="esri-icon-collapse",R="esri-expand__content",V="esri-expand__content--expanded",O="esri-expand__mask",D="esri-expand__mask--expanded";let A=class extends o.Z{constructor(e,t){super(e,t),this.autoCollapse=null,this.closeOnEsc=!0,this.collapseTooltip="",this.content="",this.expanded=null,this.expandTooltip="",this.group=null,this.iconNumber=0,this.label=void 0,this.messages=null,this.messagesCommon=null,this.mode="auto",this.view=null,this.viewModel=new d,this._handleKeyDown=e=>{const{closeOnEsc:t,_toggleButtonEl:i,expanded:s}=this;s&&t&&e.target!==i&&"Escape"===e.key&&("function"==typeof t?t(e):t)&&(this.expanded=!1,i?.focus())}}get contentId(){return`${this.id}_controls_content`}get expandTitle(){const{expanded:e,messagesCommon:t,collapseTooltip:i,expandTooltip:s}=this;return e?i||t.collapse:s||t.expand}get collapseIconClass(){return E}set collapseIconClass(e){e?this._override("collapseIconClass",e):this._clearOverride("collapseIconClass")}get expandIconClass(){return(0,u.Qd)(this.content)?this.content.iconClass:P}set expandIconClass(e){e?this._override("expandIconClass",e):this._clearOverride("expandIconClass")}expand(){this.viewModel.expanded=!0}collapse(){this.viewModel.expanded=!1}toggle(){this.viewModel.expanded=!this.viewModel.expanded}render(){const{mode:e}=this,t={[v]:"auto"===e,[_]:"drawer"===e,[w]:"floating"===e};return(0,y.u)("div",{class:this.classes(f,t),onkeydown:this._handleKeyDown},this.renderMask(),this.renderContainer())}renderContainer(){const{expanded:e}=this,t={[C]:e};return(0,y.u)("div",{class:this.classes(b,t)},this.renderPanel(),this.renderContent())}renderMask(){const{expanded:e}=this,t={[D]:e};return(0,y.u)("div",{bind:this,onclick:this._toggle,class:this.classes(O,t)})}renderBadgeNumber(){const{expanded:e,iconNumber:t}=this;return t&&!e?(0,y.u)("span",{key:"expand__icon-number",class:k},t):null}renderPanelNumber(){const{iconNumber:e,expanded:t}=this;return e&&t?(0,y.u)("span",{key:"expand__expand-icon-number",class:this.classes(k,L)},e):null}renderIcon(){const{collapseIconClass:e,expandIconClass:t,expanded:i}=this,s={[I]:i,[e]:i,[t]:!i};return e===t&&(s[e]=!0),(0,y.u)("span",{"aria-hidden":"true",class:this.classes(S,s)})}renderTitle(){return(0,y.u)("span",{class:M},this.expandTitle)}renderExpandButton(){const{expanded:e,expandTitle:t,contentId:i}=this;return(0,y.u)("div",{afterCreate:this._storeToggleButtonEl,"aria-controls":i,"aria-expanded":e?"true":"false",bind:this,class:T,onclick:this._toggle,onkeydown:this._toggle,role:"button",tabindex:"0",title:t},this.renderBadgeNumber(),this.renderIcon(),this.renderTitle())}renderPanel(){return(0,y.u)("div",{class:x},this.renderExpandButton(),this.renderPanelNumber())}renderContent(){const{expanded:e,contentId:t,content:i}=this,s={[V]:e},r={id:t,role:"region",class:this.classes(R,s)};return"string"==typeof i?(0,y.u)("div",{key:"content__string",innerHTML:i,...r}):(0,u.Qd)(i)?(0,y.u)("div",{key:"content__widget",...r},i.render()):i instanceof HTMLElement?(0,y.u)("div",{key:"content__html-element",bind:i,afterCreate:this._attachToNode,...r}):(0,u.o)(i)?(0,y.u)("div",{key:"content__node",bind:i.domNode,afterCreate:this._attachToNode,...r}):null}_toggle(){this.toggle()}_attachToNode(e){e.appendChild(this)}_storeToggleButtonEl(e){this._toggleButtonEl=e}};(0,s._)([(0,n.Cb)({readOnly:!0})],A.prototype,"contentId",null),(0,s._)([(0,n.Cb)({readOnly:!0})],A.prototype,"expandTitle",null),(0,s._)([(0,r.B)("viewModel.autoCollapse")],A.prototype,"autoCollapse",void 0),(0,s._)([(0,n.Cb)()],A.prototype,"closeOnEsc",void 0),(0,s._)([(0,n.Cb)()],A.prototype,"collapseIconClass",null),(0,s._)([(0,n.Cb)()],A.prototype,"collapseTooltip",void 0),(0,s._)([(0,n.Cb)()],A.prototype,"content",void 0),(0,s._)([(0,r.B)("viewModel.expanded")],A.prototype,"expanded",void 0),(0,s._)([(0,n.Cb)()],A.prototype,"expandIconClass",null),(0,s._)([(0,n.Cb)()],A.prototype,"expandTooltip",void 0),(0,s._)([(0,r.B)("viewModel.group")],A.prototype,"group",void 0),(0,s._)([(0,n.Cb)()],A.prototype,"iconNumber",void 0),(0,s._)([(0,n.Cb)({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],A.prototype,"label",void 0),(0,s._)([(0,n.Cb)(),(0,g.H)("esri/widgets/Expand/t9n/Expand")],A.prototype,"messages",void 0),(0,s._)([(0,n.Cb)(),(0,g.H)("esri/t9n/common")],A.prototype,"messagesCommon",void 0),(0,s._)([(0,n.Cb)()],A.prototype,"mode",void 0),(0,s._)([(0,r.B)("viewModel.view")],A.prototype,"view",void 0),(0,s._)([(0,n.Cb)({type:d})],A.prototype,"viewModel",void 0),(0,s._)([(0,m.h)()],A.prototype,"_toggle",null),A=(0,s._)([(0,a.j)("esri.widgets.Expand")],A);const Z=A},34365:(e,t,i)=>{i.d(t,{Z:()=>S});var s=i(27366),r=i(8025),n=(i(63780),i(93169),i(25243),i(49861)),a=i(69912),o=i(69407),l=i(13894),c=i(10064),h=i(91505),p=i(99505);let d=class extends((0,p._)(h.Z.EventedAccessor)){constructor(e){super(e),this._initialViewpoint=null,this._goingHomeController=null,this.go=this.go.bind(this)}destroy(){this._cancelGo(),this.view=null}get state(){return this.get("view.ready")?this._goingHomeController?"going-home":"ready":"disabled"}set view(e){this._initialViewpoint=null,this._set("view",e),e&&e.when().then((()=>{this.view===e&&(this._initialViewpoint=e.viewpoint.clone(),this.notifyChange("viewpoint"))}))}get viewpoint(){return this._get("viewpoint")||this._initialViewpoint}set viewpoint(e){this._set("viewpoint",e)}async go(){if(!this.get("view.ready"))throw new c.Z("home:disabled-state","Cannot go when disabled.");this._cancelGo(),this.emit("go");const e=new AbortController;this._goingHomeController=e;try{await this.view.when(),await this.callGoTo({target:this.viewpoint,options:{signal:e.signal}})}catch(t){}this._goingHomeController=null}cancelGo(){this._cancelGo()}_cancelGo(){const{_goingHomeController:e}=this;e&&e.abort(),this._goingHomeController=null}};(0,s._)([(0,n.Cb)()],d.prototype,"_goingHomeController",void 0),(0,s._)([(0,n.Cb)({readOnly:!0})],d.prototype,"state",null),(0,s._)([(0,n.Cb)()],d.prototype,"view",null),(0,s._)([(0,n.Cb)({type:l.Z})],d.prototype,"viewpoint",null),(0,s._)([(0,n.Cb)()],d.prototype,"go",null),(0,s._)([(0,n.Cb)()],d.prototype,"cancelGo",null),d=(0,s._)([(0,a.j)("esri.widgets.Home.HomeViewModel")],d);const u=d;var g=i(78088),m=i(80532),y=i(93531),f=i(67005);i(80975);const v="esri-home esri-widget--button esri-widget",_="esri-icon-font-fallback-text",w="esri-icon esri-icon-home",b="esri-icon-loading-indicator",C="esri-rotating",x="esri-icon-home",T="esri-disabled";let M=class extends o.Z{constructor(e,t){super(e,t),this.goToOverride=null,this.iconClass=x,this.label=void 0,this.messages=null,this.messagesCommon=null,this.view=null,this.viewModel=new u,this.viewpoint=null}get homeTitle(){const e=this.viewModel?.state,{messagesCommon:t,messages:i}=this;return"going-home"===e?t.cancel:i.title}cancelGo(){return null}go(){return null}render(){const e=this.viewModel?.state,{homeTitle:t}=this,i={[T]:"disabled"===e};return(0,f.u)("div",{bind:this,class:this.classes(v,i),role:"button",tabIndex:0,onclick:this._go,onkeydown:this._go,"aria-label":t,title:t},this.renderIcon(),this.renderText())}renderIcon(){const e=this.viewModel?.state,t={[b]:"going-home"===e,[C]:"going-home"===e};return(0,f.u)("span",{"aria-hidden":"true",class:this.classes(w,t)})}renderText(){const{messages:e}=this;return(0,f.u)("span",{class:_},e.button)}_go(){const{viewModel:e}=this;"going-home"===e.state?e.cancelGo():e.go()}};(0,s._)([(0,r.B)("viewModel.goToOverride")],M.prototype,"goToOverride",void 0),(0,s._)([(0,n.Cb)({readOnly:!0})],M.prototype,"homeTitle",null),(0,s._)([(0,n.Cb)()],M.prototype,"iconClass",void 0),(0,s._)([(0,n.Cb)({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],M.prototype,"label",void 0),(0,s._)([(0,n.Cb)(),(0,m.H)("esri/widgets/Home/t9n/Home")],M.prototype,"messages",void 0),(0,s._)([(0,n.Cb)(),(0,m.H)("esri/t9n/common")],M.prototype,"messagesCommon",void 0),(0,s._)([(0,r.B)("viewModel.view")],M.prototype,"view",void 0),(0,s._)([(0,n.Cb)({type:u}),(0,y.s)("go")],M.prototype,"viewModel",void 0),(0,s._)([(0,r.B)("viewModel.viewpoint")],M.prototype,"viewpoint",void 0),(0,s._)([(0,r.B)("viewModel.cancelGo")],M.prototype,"cancelGo",null),(0,s._)([(0,r.B)("viewModel.go")],M.prototype,"go",null),(0,s._)([(0,g.h)()],M.prototype,"_go",null),M=(0,s._)([(0,a.j)("esri.widgets.Home")],M);const S=M},67520:(e,t,i)=>{i.d(t,{Z:()=>H});var s=i(27366),r=i(94172),n=i(17842),a=i(8025),o=(i(63780),i(93169),i(89125)),l=i(49861),c=i(69912),h=i(69407),p=(i(59486),i(85015)),d=i(92026),u=(i(25243),i(15559)),g=i(50689),m=i(92975),y=i(81753),f=i(89093),v=i(78952),_=i(29909),w=i(7882);function b(e,t){return e&&e.includes(t)}function C(e,t){const{x:i,y:s}="decimal-degrees"===e?(0,y.Sx)(t,!0):t;return[i,s]}function x(e){let{state:{paddedViewState:t},spatialReference:i,width:s}=e;return i.isWrappable&&t.worldScreenWidth<s}let T=class extends p.Z{constructor(e){super(e),this.scaleComputedFrom=(0,n.vW)(),this.view=null}get state(){return this.get("view.ready")&&"2d"===this.get("view.type")?"ready":"disabled"}getScaleBarProperties(e,t){if("disabled"===this.state||isNaN(e)||!t)return null;const i=this._getDistanceInKm(this.view,this.scaleComputedFrom);if((0,d.Wi)(i))return null;if("metric"===t)return this._getScaleBarProps(e,i,"metric");const s=i/1.609;return this._getScaleBarProps(e,s,"non-metric")}_getLocationUnit(){const e=this.get("view.spatialReference"),{isWebMercator:t,wkid:i,wkt:s}=e;return t||b(s,"WGS_1984_Web_Mercator")?"decimal-degrees":null!=f.Z[i]||b(s,"PROJCS")?"linear-unit":"unknown"}_getDistanceInKm(e,t){const{state:i,spatialReference:s}=e,r=this._getLocationUnit();if("linear-unit"===r){const e=1e3;return i.extent.width*function(e){const{wkid:t}=e;if(null!=f.Z[t])return f.Z.values[f.Z[t]];const{wkt:i}=e,s=i.lastIndexOf(",")+1,r=i.lastIndexOf("]]");return parseFloat(i.substring(s,r))}(s)/e}const[n,a]=this._getScaleMeasuringPoints(e,t),o="decimal-degrees"===r||s.isGeographic&&!(0,u.Gb)(s)?v.Z.WGS84:s,l=new _.Z({paths:[[C(r,n),C(r,a)]],spatialReference:o}),c=(0,g.hR)(l,10);let h;try{[h]=(0,u.Jf)([c],"kilometers")}catch{return null}return h}_getScaleMeasuringPoints(e,t){const{width:i,height:s,position:r,spatialReference:a}=e;if(x(e)){const{valid:e}=(0,m.C5)(a);return[new w.Z(e[0],0,a),new w.Z(e[1],0,a)]}let o=t.y-r[1];o>s?o=s:o<0&&(o=0);const l=(0,n.vW)(0,o),c=(0,n.vW)(i,o);return[e.toMap(l),e.toMap(c)]}_getScaleBarProps(e,t,i){const{view:s}=this;let r=e*t/(x(s)?s.state.paddedViewState.worldScreenWidth:s.width),n="metric"===i?"km":"mi";r<.1&&("mi"===n?(r*=5280,n="ft"):"km"===n&&(r*=1e3,n="m"));let a=0;for(;r>=1;)r/=10,a++;const o=this._getConstraints(r);if(!o)return null;const{min:l,max:c}=o,h=c/r>=r/l?l:c;return{length:e*(h/r),value:10**a*h,unit:n}}_getConstraints(e){return e>.5?{min:.5,max:1}:e>.3?{min:.3,max:.5}:e>.2?{min:.2,max:.3}:e>.15?{min:.15,max:.2}:e>=.1?{min:.15,max:.1}:void 0}};(0,s._)([(0,l.Cb)()],T.prototype,"scaleComputedFrom",void 0),(0,s._)([(0,l.Cb)({readOnly:!0})],T.prototype,"state",null),(0,s._)([(0,l.Cb)()],T.prototype,"view",void 0),T=(0,s._)([(0,c.j)("esri.widgets.Scalebar.ScaleBarViewModel")],T);const M=T;i(80975);var S=i(80532),I=i(67005);const k="esri-scale-bar esri-widget",L="esri-scale-bar__label-container",P="esri-scale-bar__label-container--ruler",E="esri-scale-bar__label-container--line",R="esri-scale-bar__label-container--top",V="esri-scale-bar__label-container--bottom",O="esri-scale-bar__label",D="esri-scale-bar__line",A="esri-scale-bar__line--top",Z="esri-scale-bar__line--bottom",N="esri-scale-bar__ruler",G="esri-scale-bar__ruler-block",F="esri-scale-bar__bar-container",z="esri-scale-bar__bar-container--ruler",B="esri-scale-bar__bar-container--line",U="esri-disabled";function W(e){return 2*e}let j=class extends h.Z{constructor(e,t){super(e,t),this.label=void 0,this.messages=null,this.unit="non-metric",this.view=null,this.viewModel=new M}initialize(){this.own([(0,r.YP)((()=>{const{view:e}=this;return[e?.stationary,e?.center,e?.scale,e?.zoom]}),(e=>{let[t]=e;t&&this.scheduleRender()}))])}set style(e){const t="dual"===this.unit?"line":e;this._set("style",t)}castStyle(e){return"line"===e?e:"ruler"}castUnit(e){return"metric"===e||"dual"===e?e:"non-metric"}render(){const e="disabled"===this.get("viewModel.state"),t={[U]:e};let i,s;if(!e){const{unit:e,style:t}=this,r="metric"===e||"dual"===e,n=50;if("non-metric"===e||"dual"===e){const e=this.viewModel.getScaleBarProperties(n,"non-metric");e&&(s="ruler"===t?this._renderRuler(e):this._renderLine(e,"bottom"))}if(r){const e=this.viewModel.getScaleBarProperties(n,"metric");e&&(i="ruler"===t?this._renderRuler(e):this._renderLine(e,"top"))}}return(0,I.u)("div",{afterCreate:this._handleRootCreateOrUpdate,afterUpdate:this._handleRootCreateOrUpdate,bind:this,class:this.classes(k,t)},i,s)}_renderRuler(e){const t=W(Math.round(e.length)),{messages:i}=this,s=i[e.unit]||i.unknownUnit,r=`${W(e.value)} ${s}`;return(0,I.u)("div",{class:this.classes(F,z),key:"esri-scale-bar__ruler"},(0,I.u)("div",{class:N,styles:{width:`${t}px`}},(0,I.u)("div",{class:G}),(0,I.u)("div",{class:G}),(0,I.u)("div",{class:G}),(0,I.u)("div",{class:G})),(0,I.u)("div",{class:this.classes(L,P)},(0,I.u)("div",{class:O},"0"),(0,I.u)("div",{class:O},r)))}_renderLine(e,t){const{messages:i}=this,s=i[e.unit]||i.unknownUnit,r=`${W(e.value)} ${s}`,n={[R]:"top"===t,[V]:"bottom"===t},a=(0,I.u)("div",{class:this.classes(L,E,n),key:"esri-scale-bar__label"},(0,I.u)("div",{class:O},r)),o={[A]:"top"===t,[Z]:"bottom"===t},l=W(Math.round(e.length)),c=(0,I.u)("div",{class:this.classes(D,o),key:"esri-scale-bar__line",styles:{width:`${l}px`}});return(0,I.u)("div",{class:this.classes(F,B),key:"esri-scale-bar__line-container"},[c,a])}_handleRootCreateOrUpdate(e){const t=this.viewModel;if(!t)return;const i=e.getBoundingClientRect(),s=i.left+window.pageXOffset,r=i.top+window.pageYOffset,a=(0,n.vW)(s,r);(a.x!==t.scaleComputedFrom.x||a.y!==t.scaleComputedFrom.y)&&(t.scaleComputedFrom=a)}};(0,s._)([(0,l.Cb)({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],j.prototype,"label",void 0),(0,s._)([(0,l.Cb)(),(0,S.H)("esri/widgets/ScaleBar/t9n/ScaleBar")],j.prototype,"messages",void 0),(0,s._)([(0,l.Cb)()],j.prototype,"style",null),(0,s._)([(0,o.p)("style")],j.prototype,"castStyle",null),(0,s._)([(0,l.Cb)()],j.prototype,"unit",void 0),(0,s._)([(0,o.p)("unit")],j.prototype,"castUnit",null),(0,s._)([(0,a.B)("viewModel.view")],j.prototype,"view",void 0),(0,s._)([(0,l.Cb)()],j.prototype,"viewModel",void 0),j=(0,s._)([(0,c.j)("esri.widgets.ScaleBar")],j);const H=j},81102:(e,t,i)=>{i.d(t,{Z:()=>D});var s=i(27366),r=i(8025),n=(i(63780),i(93169),i(25243),i(49861)),a=i(69912),o=i(69407),l=i(78088),c=i(80532),h=i(93531),p=i(67005),d=(i(80975),i(65905)),u=i(52639),g=i(85015),m=i(10064),y=i(91505),f=i(91946),v=i(39435),_=i(99505);let w=class extends((0,_._)(y.Z.EventedMixin(g.Z))){constructor(){super(...arguments),this._geolocationUsable=!0,this._iconPath=(0,d.V)("esri/images/support/sdk_gps_location.png"),this.geolocationOptions=null,this.goToLocationEnabled=!0,this.graphic=new u.Z({symbol:new f.Z({url:this._iconPath,width:21,height:21})}),this.scale=null,this.useHeadingEnabled=!0,this.view=null}initialize(){(0,v.Zh)()||(this._geolocationUsable=!1)}destroy(){this._clear(),this.view=null}_clear(){this.view&&this.view.graphics.remove(this.graphic)}_getScaleWithinConstraints(e,t){if(!t)return e;if("2d"===t.type){const{effectiveMaxScale:i,effectiveMinScale:s}=t.constraints;return Math.min(s,Math.max(i,e))}return e}_getScale(e){const{scale:t}=this,i="number"==typeof t?t:2500;return this._getScaleWithinConstraints(i,e)}_getHeading(e,t){const i=t&&t.spatialReference,s=i&&(i.isWebMercator||i.isGeographic),r=e.coords&&e.coords.heading;if(!(!s||"number"!=typeof r||isNaN(r)||r<0||r>360))return r}_addHeading(e){const{heading:t,target:i,view:s}=e;s&&"number"==typeof t&&!isNaN(t)&&("3d"!==s.type?"2d"===s.type&&(i.rotation=360-t):i.heading=t)}_animatePoint(e,t,i,s){const{view:r}=this;if(!this.goToLocationEnabled||!r)return Promise.resolve(t);const n=this.useHeadingEnabled?this._getHeading(t,r):void 0,a={target:e,scale:i};return this._addHeading({heading:n,target:a,view:r}),this.callGoTo({target:a,options:s}).then((()=>t))}async _setPosition(e,t){try{const i=await(0,v.C2)({position:e,view:this.view},t),{graphic:s}=this,{timestamp:r}=e,{coords:n}=e,{accuracy:a,altitude:o,altitudeAccuracy:l,heading:c,latitude:h,longitude:p,speed:d}=n,u={timestamp:r,accuracy:a,altitude:o,altitudeAccuracy:l,heading:c,latitude:h,longitude:p,speed:d};s&&(s.geometry=i,s.attributes=u);const g=this._getScale(this.view);return this._animatePoint(i,e,g,t)}catch(i){throw new m.Z("positioning:invalid-point","Cannot position invalid point",{error:i})}}};(0,s._)([(0,n.Cb)()],w.prototype,"_geolocationUsable",void 0),(0,s._)([(0,n.Cb)()],w.prototype,"geolocationOptions",void 0),(0,s._)([(0,n.Cb)()],w.prototype,"goToLocationEnabled",void 0),(0,s._)([(0,n.Cb)()],w.prototype,"graphic",void 0),(0,s._)([(0,n.Cb)()],w.prototype,"scale",void 0),(0,s._)([(0,n.Cb)()],w.prototype,"useHeadingEnabled",void 0),(0,s._)([(0,n.Cb)()],w.prototype,"view",void 0),w=(0,s._)([(0,a.j)("esri.widgets.support.GeolocationPositioning")],w);const b=w;let C=class extends b{constructor(e){super(e),this._watchId=null,this._trackStartingTimeoutId=null,this._settingPosition=null}destroy(){this._stopTracking()}get state(){return this._geolocationUsable?this.view&&!this.view.ready?"disabled":this._settingPosition||null!==this._trackStartingTimeoutId?"waiting":this.tracking?"tracking":"ready":"feature-unsupported"}get tracking(){return null!==this._watchId}start(){"disabled"!==this.state&&"feature-unsupported"!==this.state&&this._startTracking()}stop(){"disabled"!==this.state&&"feature-unsupported"!==this.state&&this._stopTracking()}_stopWatchingPosition(){null!==this._watchId&&(navigator.geolocation.clearWatch(this._watchId),this._watchId=null)}_stopTracking(){this._clearWaitingTimer(),this._stopWatchingPosition(),this._clear()}_startTracking(){this._stopTracking();const e=navigator.geolocation.watchPosition((t=>{this._watchId=e,this._settingPosition=this._setPosition(t).then((e=>{this._clearWaitingTimer();const{view:t,graphic:i}=this;if(t&&t.graphics.remove(i),i){const e=i.clone();this.graphic=e,t&&t.graphics.push(e)}this.emit("track",{position:e})})).catch((e=>{throw this._emitError(e),this._clearWaitingTimer(),e}))}),this._handleWatchPositionError.bind(this),this.geolocationOptions);this._trackStartingTimeoutId=setTimeout((()=>{this._trackStartingTimeoutId=null}),15e3)}_handleWatchPositionError(e){this._emitError(e),this._stopTracking()}_clearWaitingTimer(){clearTimeout(this._trackStartingTimeoutId),this._trackStartingTimeoutId=null,this._settingPosition=null}_emitError(e){this.emit("track-error",{error:e})}};(0,s._)([(0,n.Cb)()],C.prototype,"_watchId",void 0),(0,s._)([(0,n.Cb)()],C.prototype,"_trackStartingTimeoutId",void 0),(0,s._)([(0,n.Cb)()],C.prototype,"_settingPosition",void 0),(0,s._)([(0,n.Cb)({readOnly:!0})],C.prototype,"state",null),(0,s._)([(0,n.Cb)({readOnly:!0})],C.prototype,"tracking",null),(0,s._)([(0,n.Cb)()],C.prototype,"start",null),(0,s._)([(0,n.Cb)()],C.prototype,"stop",null),C=(0,s._)([(0,a.j)("esri.widgets.Track.TrackViewModel")],C);const x=C,T="esri-track esri-widget--button esri-widget",M="esri-icon-font-fallback-text",S="esri-icon",I="esri-icon-loading-indicator",k="esri-rotating",L="esri-icon-tracking",P="esri-icon-pause",E="esri-icon-tracking",R="esri-disabled",V="esri-hidden";let O=class extends o.Z{constructor(e,t){super(e,t),this.geolocationOptions=null,this.goToLocationEnabled=null,this.goToOverride=null,this.graphic=null,this.iconClass=E,this.label=void 0,this.messages=null,this.scale=null,this.tracking=null,this.useHeadingEnabled=null,this.view=null,this.viewModel=new x}start(){}stop(){}render(){const e=this.get("viewModel.state"),t={[R]:"disabled"===e,[V]:"feature-unsupported"===e},i="tracking"===e,s={[L]:!i&&"waiting"!==e,[P]:i,[k]:"waiting"===e,[I]:"waiting"===e},{messages:r}=this,n=i?r.stopTracking:r.startTracking;return(0,p.u)("div",{bind:this,class:this.classes(T,t),hidden:"feature-unsupported"===e,onclick:this._toggleTracking,onkeydown:this._toggleTracking,role:"button",tabIndex:0,"aria-label":n,title:n},(0,p.u)("span",{"aria-hidden":"true",class:this.classes(S,s)}),(0,p.u)("span",{class:M},n))}_toggleTracking(){const e=this.viewModel;e&&"feature-unsupported"!==e.state&&"disabled"!==e.state&&("tracking"!==e.state&&"waiting"!==e.state?this.viewModel.start():this.viewModel.stop())}};(0,s._)([(0,r.B)("viewModel.geolocationOptions")],O.prototype,"geolocationOptions",void 0),(0,s._)([(0,r.B)("viewModel.goToLocationEnabled")],O.prototype,"goToLocationEnabled",void 0),(0,s._)([(0,r.B)("viewModel.goToOverride")],O.prototype,"goToOverride",void 0),(0,s._)([(0,r.B)("viewModel.graphic")],O.prototype,"graphic",void 0),(0,s._)([(0,n.Cb)()],O.prototype,"iconClass",void 0),(0,s._)([(0,n.Cb)({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],O.prototype,"label",void 0),(0,s._)([(0,n.Cb)(),(0,c.H)("esri/widgets/Track/t9n/Track")],O.prototype,"messages",void 0),(0,s._)([(0,r.B)("viewModel.scale")],O.prototype,"scale",void 0),(0,s._)([(0,r.B)("viewModel.tracking")],O.prototype,"tracking",void 0),(0,s._)([(0,r.B)("viewModel.useHeadingEnabled")],O.prototype,"useHeadingEnabled",void 0),(0,s._)([(0,r.B)("viewModel.view")],O.prototype,"view",void 0),(0,s._)([(0,n.Cb)({type:x}),(0,h.s)(["track","track-error"])],O.prototype,"viewModel",void 0),(0,s._)([(0,r.B)("viewModel.start")],O.prototype,"start",null),(0,s._)([(0,r.B)("viewModel.stop")],O.prototype,"stop",null),(0,s._)([(0,l.h)()],O.prototype,"_toggleTracking",null),O=(0,s._)([(0,a.j)("esri.widgets.Track")],O);const D=O},99505:(e,t,i)=>{i.d(t,{_:()=>a});var s=i(27366),r=i(49861),n=(i(63780),i(93169),i(25243),i(69912));const a=e=>{let t=class extends e{constructor(){super(...arguments),this.goToOverride=null,this.view=null}callGoTo(e){const{view:t}=this;return this.goToOverride?this.goToOverride(t,e):t.goTo(e.target,e.options)}};return(0,s._)([(0,r.Cb)()],t.prototype,"goToOverride",void 0),(0,s._)([(0,r.Cb)()],t.prototype,"view",void 0),t=(0,s._)([(0,n.j)("esri.widgets.support.GoTo")],t),t}},39435:(e,t,i)=>{i.d(t,{nu:()=>k,C2:()=>L,Zh:()=>I});var s=i(42265),r=i(10064),n=i(93169),a=i(32718),o=i(7882),l=i(81753),c=i(70032),h=(i(76200),i(63780),i(35995),i(59486),i(53866),i(32238),i(77577),i(80885),i(29909)),p=i(43404);new p.X({MGRS:"mgrs",USNG:"usng",UTM:"utm",GeoRef:"geo-ref",GARS:"gars",DMS:"dms",DDM:"ddm",DD:"dd"});var d=i(77981);new p.X({109006:"centimeters",9102:"decimal-degrees",109005:"decimeters",9002:"feet",109009:"inches",9036:"kilometers",9001:"meters",9035:"miles",109007:"millimeters",109012:"nautical-miles",9096:"yards"});var u=i(27366),g=i(46784),m=i(49861),y=i(25243),f=i(69912);let v=class extends g.wq{constructor(e){super(e),this.deviationUnit=null,this.geometries=null,this.maxDeviation=null}};(0,u._)([(0,m.Cb)({type:String,json:{write:!0}})],v.prototype,"deviationUnit",void 0),(0,u._)([(0,m.Cb)({json:{read:{reader:e=>e?e.map((e=>(0,d.im)(e))):null},write:{writer:(e,t)=>{t.geometries=e.map((e=>e.toJSON()))}}}})],v.prototype,"geometries",void 0),(0,u._)([(0,m.Cb)({type:Number,json:{write:!0}})],v.prototype,"maxDeviation",void 0),v=(0,u._)([(0,f.j)("esri.rest.support.GeneralizeParameters")],v),v.from=(0,y.se)(v);new p.X({preserveShape:"preserve-shape"});let _=class extends g.wq{constructor(e){super(e),this.calculationType=null,this.geodesic=null,this.lengthUnit=null,this.polylines=null}};(0,u._)([(0,m.Cb)({type:String,json:{write:!0}})],_.prototype,"calculationType",void 0),(0,u._)([(0,m.Cb)({type:Boolean,json:{write:!0}})],_.prototype,"geodesic",void 0),(0,u._)([(0,m.Cb)({json:{write:!0}})],_.prototype,"lengthUnit",void 0),(0,u._)([(0,m.Cb)({type:[h.Z],json:{read:{reader:e=>e?e.map((e=>(0,d.im)(e))):null},write:{writer:(e,t)=>{t.polylines=e.map((e=>e.toJSON()))}}}})],_.prototype,"polylines",void 0),_=(0,u._)([(0,f.j)("esri.rest.support.LengthsParameters")],_),_.from=(0,y.se)(_);new p.X({esriGeometryOffsetBevelled:"bevelled",esriGeometryOffsetMitered:"mitered",esriGeometryOffsetRounded:"rounded"}),new p.X({9001:"meters",9002:"feet",9036:"kilometers",9093:"miles",109012:"nautical-miles",109001:"yards"});let w=class extends g.wq{constructor(e){super(e),this.bevelRatio=null,this.geometries=null,this.offsetDistance=null,this.offsetHow=null,this.offsetUnit=null}};(0,u._)([(0,m.Cb)({type:Number,json:{write:!0}})],w.prototype,"bevelRatio",void 0),(0,u._)([(0,m.Cb)({json:{read:{reader:e=>e?e.map((e=>(0,d.im)(e))):null},write:{writer:(e,t)=>{t.geometries=e.map((e=>e.toJSON()))}}}})],w.prototype,"geometries",void 0),(0,u._)([(0,m.Cb)({type:Number,json:{write:!0}})],w.prototype,"offsetDistance",void 0),(0,u._)([(0,m.Cb)({type:String,json:{write:!0}})],w.prototype,"offsetHow",void 0),(0,u._)([(0,m.Cb)({type:String,json:{write:!0}})],w.prototype,"offsetUnit",void 0),w=(0,u._)([(0,f.j)("esri.rest.support.OffsetParameters")],w),w.from=(0,y.se)(w);var b=i(18924);new p.X({esriGeometryRelationCross:"cross",esriGeometryRelationDisjoint:"disjoint",esriGeometryRelationIn:"in",esriGeometryRelationInteriorIntersection:"interior-intersection",esriGeometryRelationIntersection:"intersection",esriGeometryRelationLineCoincidence:"line-coincidence",esriGeometryRelationLineTouch:"line-touch",esriGeometryRelationOverlap:"overlap",esriGeometryRelationPointTouch:"point-touch",esriGeometryRelationTouch:"touch",esriGeometryRelationWithin:"within",esriGeometryRelationRelation:"relation"});let C=class extends g.wq{constructor(e){super(e),this.geometries1=null,this.geometries2=null,this.relation=null,this.relationParameter=null}};(0,u._)([(0,m.Cb)({json:{read:{reader:e=>e?e.map((e=>(0,d.im)(e))):null},write:{writer:(e,t)=>{t.geometries1=e.map((e=>e.toJSON()))}}}})],C.prototype,"geometries1",void 0),(0,u._)([(0,m.Cb)({json:{read:{reader:e=>e?e.map((e=>(0,d.im)(e))):null},write:{writer:(e,t)=>{t.geometries2=e.map((e=>e.toJSON()))}}}})],C.prototype,"geometries2",void 0),(0,u._)([(0,m.Cb)({type:String,json:{write:!0}})],C.prototype,"relation",void 0),(0,u._)([(0,m.Cb)({type:String,json:{write:!0}})],C.prototype,"relationParameter",void 0),C=(0,u._)([(0,f.j)("esri.rest.support.RelationParameters")],C),C.from=(0,y.se)(C);new p.X({0:"default-curve-extension",1:"relocate-ends",2:"keep-end-attributes",4:"no-end-attributes",8:"no-extend-at-from",16:"no-extend-at-to"});let x=class extends g.wq{constructor(e){super(e),this.extendHow="default-curve-extension",this.polylines=null,this.trimExtendTo=null}};(0,u._)([(0,m.Cb)({type:String,json:{write:!0}})],x.prototype,"extendHow",void 0),(0,u._)([(0,m.Cb)({type:[h.Z],json:{read:{reader:e=>e?e.map((e=>(0,d.im)(e))):null},write:{writer:(e,t)=>{t.polylines=e.map((e=>e.toJSON()))}}}})],x.prototype,"polylines",void 0),(0,u._)([(0,m.Cb)({json:{read:{reader:e=>e?(0,d.im)(e):null},write:{writer:(e,t)=>{t.trimExtendTo=e.toJSON()}}}})],x.prototype,"trimExtendTo",void 0),x=(0,u._)([(0,f.j)("esri.rest.support.TrimExtendParameters")],x),x.from=(0,y.se)(x);var T=i(81943);const M=a.Z.getLogger("esri.widgets.support.geolocationUtils"),S={maximumAge:0,timeout:15e3,enableHighAccuracy:!0};function I(){return function(){const e=(0,n.Z)("esri-geolocation");return e||M.warn("geolocation-unsupported","Geolocation unsupported."),e}()&&function(){const e=window.isSecureContext;return e||M.warn("insecure-context","Geolocation requires a secure origin."),e}()}function k(e){return e||(e=S),new Promise(((t,i)=>{setTimeout((()=>i(new r.Z("geolocation:timeout","getting the current geolocation position timed out"))),15e3),navigator.geolocation.getCurrentPosition(t,i,e)}))}function L(e,t){const{position:i,view:n}=e;return function(e,t,i){if(!t)return Promise.resolve(e);const n=t.spatialReference;return n.isWGS84?Promise.resolve(e):n.isWebMercator?Promise.resolve((0,l.$)(e)):function(e){if(s.Z.geometryServiceUrl)return Promise.resolve(s.Z.geometryServiceUrl);const t=c.Z.getDefault();return t.load(e).catch((()=>{})).then((()=>t.get("helperServices.geometry.url")))}(i).then((t=>{if(!t)throw new r.Z("geometry-service:missing-url","Geometry service URL is missing");const s=new T.Z({geometries:[e],outSpatialReference:n});return(0,b.i)(t,s,i).then((e=>e[0]))}))}(function(e){const t=e&&e.coords;return t?new o.Z({longitude:t.longitude,latitude:t.latitude,z:t.altitude||null,spatialReference:{wkid:4326}}):null}(function(e){const t=e&&e.coords||{},i={accuracy:t.accuracy,altitude:t.altitude,altitudeAccuracy:t.altitudeAccuracy,heading:t.heading,latitude:t.latitude,longitude:t.longitude,speed:t.speed};return e?{coords:i,timestamp:e.timestamp}:e}(i)),n,t)}}}]);
//# sourceMappingURL=5942.74fd9c5e.chunk.js.map