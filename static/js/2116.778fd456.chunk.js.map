{"version":3,"file":"static/js/2116.778fd456.chunk.js","mappings":"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","sources":["components/Tools/Measure/utils/tips.ts","../node_modules/@arcgis/core/widgets/Measurement/MeasurementViewModel.js","../node_modules/@arcgis/core/widgets/Measurement.js","components/Tools/Measure/utils/useMeasure.ts","components/Tools/Measure/utils/measure.ts","components/Tools/Measure/Measure.tsx","../node_modules/@arcgis/core/properties/defaultUnit.js","../node_modules/@arcgis/core/support/getDefaultUnitForView.js"],"sourcesContent":["export const tips = {\n  title: \"Measure Tips\",\n  tips: [\n    {\n      title: \"Coordinate Search\",\n      text: \"The coordinate search has been moved to the lower left corner of the map\",\n    },\n  ],\n};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../chunks/tslib.es6.js\";import t from\"../../core/Accessor.js\";import{measurementAreaUnits as r,measurementLengthUnits as o}from\"../../core/unitUtils.js\";import{property as i}from\"../../core/accessorSupport/decorators/property.js\";import\"../../core/accessorSupport/ensureType.js\";import\"../../core/arrayUtils.js\";import{subclass as s}from\"../../core/accessorSupport/decorators/subclass.js\";import{defaultUnitPropertyMetadata as a}from\"../../properties/defaultUnit.js\";let p=class extends t{constructor(e){super(e),this.activeTool=null,this.activeViewModel=null,this.view=null}get areaUnit(){return this.defaultUnit}set areaUnit(e){this._overrideIfSome(\"areaUnit\",e)}get linearUnit(){return this.defaultUnit}set linearUnit(e){this._overrideIfSome(\"linearUnit\",e)}get state(){const{activeViewModel:e}=this;return e?e.state:\"disabled\"}};e([i({type:[\"area\",\"distance\",\"direct-line\"]})],p.prototype,\"activeTool\",void 0),e([i()],p.prototype,\"activeViewModel\",void 0),e([i({type:r})],p.prototype,\"areaUnit\",null),e([i(a)],p.prototype,\"defaultUnit\",void 0),e([i({type:o})],p.prototype,\"linearUnit\",null),e([i({readOnly:!0})],p.prototype,\"state\",null),e([i()],p.prototype,\"view\",void 0),p=e([s(\"esri.widgets.Measurement.MeasurementViewModel\")],p);const n=p;export{n as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../chunks/tslib.es6.js\";import{ignoreAbortErrors as t}from\"../core/promiseUtils.js\";import{watch as i}from\"../core/reactiveUtils.js\";import{property as s}from\"../core/accessorSupport/decorators/property.js\";import\"../core/accessorSupport/ensureType.js\";import\"../core/arrayUtils.js\";import{subclass as r}from\"../core/accessorSupport/decorators/subclass.js\";import a from\"./Widget.js\";import o from\"./Measurement/MeasurementViewModel.js\";import\"./support/widgetUtils.js\";import{messageBundle as n}from\"./support/decorators/messageBundle.js\";import{tsx as l}from\"./support/jsxFactory.js\";const d={base:\"esri-measurement\",widgetIcon:\"esri-icon-measure\"};function c(e){return\"esri.widgets.AreaMeasurement2D\"===e?.declaredClass||\"esri.widgets.AreaMeasurement3D\"===e?.declaredClass}let u=class extends a{constructor(e,t){super(e,t),this._widgets=new Map,this.activeWidget=null,this.iconClass=d.widgetIcon,this.messages=null,this.viewModel=new o}initialize(){this.activeWidget&&this.viewModel.set(\"activeViewModel\",this.activeWidget.viewModel),this.view&&this.activeTool&&this._getActiveWidget().then((e=>{this._set(\"activeWidget\",e)})),this.addHandles([i((()=>[this.view,this.activeTool]),(async()=>{this._set(\"activeWidget\",await this._getActiveWidget())})),i((()=>this.activeWidget),((e,t)=>{this.viewModel.set(\"activeViewModel\",e?e.viewModel:null),t&&(t.visible=!1)})),i((()=>[this.areaUnit,this.linearUnit,this.uiStrings]),(()=>this._updateSubWidgetProperties()))])}destroy(){this._destroyWidgets()}get activeTool(){return this.viewModel.activeTool}set activeTool(e){this.viewModel.activeTool=e}get areaUnit(){return this.viewModel.areaUnit}set areaUnit(e){this.viewModel.areaUnit=e}get label(){return this.messages?.widgetLabel??\"\"}set label(e){this._overrideIfSome(\"label\",e)}get linearUnit(){return this.viewModel.linearUnit}set linearUnit(e){this.viewModel.linearUnit=e}get view(){return this.viewModel.view}set view(e){this.viewModel.view=e}render(){const{activeWidget:e}=this,t=e&&!e.destroyed?e.render():null;return l(\"div\",{class:d.base},t)}clear(){this.activeTool=null,this._destroyWidgets()}startMeasurement(){const{activeViewModel:e}=this.viewModel;e&&t(e.start())}async _createWidget(e){const{areaUnit:t,linearUnit:i,view:s}=this;switch(e){case\"area\":{const{type:i}=s;switch(i){case\"2d\":return new(0,(await import(\"./AreaMeasurement2D.js\")).default)({view:s,unit:t,uiStrings:this._createUIStringsForWidget(e)});case\"3d\":return new(0,(await import(\"./AreaMeasurement3D.js\")).default)({view:s,unit:t,uiStrings:this._createUIStringsForWidget(e)});default:return null}}case\"distance\":{const{type:t}=s;if(\"2d\"===t){return new(0,(await import(\"./DistanceMeasurement2D.js\")).default)({view:s,unit:i,uiStrings:this._createUIStringsForWidget(e)})}return null}case\"direct-line\":{const{type:t}=s;if(\"3d\"===t){return new(0,(await import(\"./DirectLineMeasurement3D.js\")).default)({view:s,unit:i,uiStrings:this._createUIStringsForWidget(e)})}return null}default:return null}}_destroyWidgets(){this._widgets.forEach((e=>e.destroy())),this._widgets.clear()}async _getActiveWidget(){const{activeTool:e,view:t}=this;if(!t||!e)return null;let i=null;if(this._widgets.has(e))i=this._widgets.get(e),i.visible=!0;else{if(i=await this._createWidget(e),!i)return null;await i.viewModel.start(),this._widgets.set(e,i)}return i}_createUIStringsForWidget(e){if(!this.uiStrings)return null;const t=e+\"-\"+this.view.type;return this.uiStrings[t]}_updateSubWidgetProperties(){this._widgets.forEach(((e,t)=>{const{areaUnit:i,linearUnit:s}=this;e.unit=c(e)?i:s,e.uiStrings=this._createUIStringsForWidget(t)}))}};e([s()],u.prototype,\"activeTool\",null),e([s({readOnly:!0})],u.prototype,\"activeWidget\",void 0),e([s()],u.prototype,\"areaUnit\",null),e([s()],u.prototype,\"iconClass\",void 0),e([s()],u.prototype,\"label\",null),e([s()],u.prototype,\"linearUnit\",null),e([s(),n(\"esri/widgets/Measurement/t9n/Measurement\")],u.prototype,\"messages\",void 0),e([s()],u.prototype,\"uiStrings\",void 0),e([s()],u.prototype,\"view\",null),e([s({type:o})],u.prototype,\"viewModel\",void 0),u=e([r(\"esri.widgets.Measurement\")],u);const g=u;export{g as default};\n","import { useCallback, useEffect, useRef, useState } from \"react\";\nimport { tips } from \"./tips\";\nimport Measurement from \"@arcgis/core/widgets/Measurement\";\nimport { initializeMeasure } from \"./measure\";\nimport { ToolProps } from \"../../utils/ToolProps\";\n\nconst useMeasure = (props: ToolProps) => {\n  const measureRef = useRef() as any;\n  const loaded = useRef(false);\n  const [selectedTool, setSelectedTool] = useState(\"\");\n  const [isActive, setIsActive] = useState(false);\n  const measurement = useRef<Measurement>();\n  useEffect(() => {\n    if (!loaded.current) {\n      loaded.current = true;\n      const widget = initializeMeasure(measureRef.current, props.view);\n      measurement.current = widget;\n      widget.watch(\"activeTool\", (activeTool) => {\n        if (activeTool) {\n          setSelectedTool(activeTool ? activeTool : \"\");\n          //measurement.current?.clear();\n        }\n      });\n    }\n    return () => {\n      measurement.current && measurement.current?.destroy();\n    };\n  }, []);\n  useEffect(() => {\n    setIsActive(props.isActive);\n    if (!props.isActive) {\n      (measurement.current as any).activeTool = null;\n      //measurement.current?.clear();\n    }\n    if (isActive && measurement.current) {\n      measurement.current.activeTool = selectedTool as any;\n    }\n  }, [props.isActive]);\n  const toolDismissed = useCallback((e: any) => {\n    props.toolDismissed();\n\n    (measurement.current as any).activeTool = null;\n    //measurement.current?.clear();\n  }, []);\n  const tipsClicked = useCallback((e: any) => {\n    props.showTips(tips);\n  }, []);\n  return {\n    measureRef,\n    measurement,\n    selectedTool,\n    setSelectedTool,\n    isActive,\n    toolDismissed,\n    tipsClicked,\n  };\n};\n\nexport default useMeasure;\n","import MapView from \"@arcgis/core/views/MapView\";\nimport Measurement from \"@arcgis/core/widgets/Measurement\";\nexport const initializeMeasure = (ref: HTMLDivElement, view: MapView) => {\n  const measurement = new Measurement({\n    view: view,\n    container: ref,\n    areaUnit: \"imperial\",\n    linearUnit: \"imperial\",\n  });\n\n  return measurement;\n}\n","import {\n  CalciteAction,\n  CalcitePanel,\n  CalciteTooltip,\n} from \"@esri/calcite-components-react\";\nimport React from \"react\";\nimport \"./Measure.css\";\nimport { collapsePanel } from \"../../Shell/utils/shell\";\nimport useMeasure from \"./utils/useMeasure\";\nimport { ToolProps } from \"../utils/ToolProps\";\nexport const Measure = (props: ToolProps) => {\n  const {\n    measureRef,\n    measurement,\n    selectedTool,\n    setSelectedTool,\n    isActive,\n    toolDismissed,\n    tipsClicked,\n  } = useMeasure(props);\n  return (\n    <CalcitePanel\n      id=\"measure-panel\"\n      heading=\"Measure\"\n      data-panel=\"measure\"\n      hidden={!isActive}\n      closed={!isActive ? true : undefined}\n      closable\n      onCalcitePanelClose={toolDismissed}\n    >\n      <CalciteAction\n        id=\"tip\"\n        icon=\"lightbulb\"\n        text=\"Tips\"\n        slot=\"header-actions-end\"\n        onClick={tipsClicked}\n      ></CalciteAction>\n      <CalciteAction\n        id=\"collapseTool\"\n        icon=\"chevron-up\"\n        text=\"\"\n        slot=\"header-actions-end\"\n        onClick={collapsePanel}\n      ></CalciteAction>\n      <CalciteTooltip label=\"Show Tip\" referenceElement=\"tip\" closeOnClick>\n        Show Tip\n      </CalciteTooltip>\n      <CalciteTooltip\n        label=\"Collapse\"\n        referenceElement=\"collapseTool\"\n        closeOnClick\n      >\n        Collapse\n      </CalciteTooltip>\n      <div id=\"measure-tools\">\n        <div className=\"measure-container\">\n          <CalciteTooltip\n            closeOnClick\n            label=\"Distance\"\n            referenceElement=\"measureDistance\"\n          >\n            Distance\n          </CalciteTooltip>\n          <CalciteAction\n            id=\"measureDistance\"\n            icon=\"measure-line\"\n            text=\"Distance\"\n            active={selectedTool === \"distance\" ? true : undefined}\n            onClick={() => {\n              setSelectedTool(\"distance\");\n              if (measurement.current) {\n                measurement.current.activeTool = \"distance\";\n              }\n            }}\n          ></CalciteAction>\n          <CalciteTooltip\n            closeOnClick\n            label=\"Area\"\n            referenceElement=\"measureArea\"\n          >\n            Area\n          </CalciteTooltip>\n          <CalciteAction\n            id=\"measureArea\"\n            icon=\"measure-area\"\n            text=\"Area\"\n            active={selectedTool === \"area\" ? true : undefined}\n            onClick={() => {\n              setSelectedTool(\"area\");\n              if (measurement.current) {\n                measurement.current.activeTool = \"area\";\n              }\n            }}\n          ></CalciteAction>\n          <CalciteTooltip\n            closeOnClick\n            label=\"Clear\"\n            referenceElement=\"clearMeasure\"\n          >\n            Clear\n          </CalciteTooltip>\n          <CalciteAction\n            id=\"clearMeasure\"\n            icon=\"trash\"\n            text=\"Clear\"\n            onClick={() => {\n              if (measurement.current) {\n                measurement.current?.clear();\n                setSelectedTool(\"\");\n              }\n            }}\n          ></CalciteAction>\n        </div>\n        <div ref={measureRef}></div>\n        <section\n          hidden={selectedTool !== \"\" ? true : undefined}\n          className=\"measurement-hint\"\n        >\n          <p>Select line or distance measurement tool</p>\n        </section>\n      </div>\n    </CalcitePanel>\n  );\n};\nexport default React.memo(Measure);\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport{getDefaultUnitForView as t}from\"../support/getDefaultUnitForView.js\";const e={readOnly:!0,get(){return t(this.view)}};export{e as defaultUnitPropertyMetadata};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport{isNone as t,unwrapOr as r}from\"../core/maybe.js\";import{getDefaultUnitSystem as e}from\"../core/unitUtils.js\";import o from\"../portal/Portal.js\";function i(i){const n=\"metric\";if(t(i))return n;const s=i.map,a=(s&&\"portalItem\"in s?s.portalItem?.portal:null)??o.getDefault();switch(a.user?.units??a.units){case n:return n;case\"english\":return\"imperial\"}return r(e(i.spatialReference),n)}export{i as getDefaultUnitForView};\n"],"names":["tips","title","text","p","t","constructor","e","super","this","activeTool","activeViewModel","view","areaUnit","defaultUnit","_overrideIfSome","linearUnit","state","i","type","prototype","r","a","o","readOnly","s","n","d","u","_widgets","Map","activeWidget","iconClass","messages","viewModel","initialize","set","_getActiveWidget","then","_set","addHandles","async","visible","uiStrings","_updateSubWidgetProperties","destroy","_destroyWidgets","label","widgetLabel","render","destroyed","l","class","clear","startMeasurement","start","default","unit","_createUIStringsForWidget","forEach","has","get","_createWidget","declaredClass","c","g","props","measureRef","useRef","loaded","selectedTool","setSelectedTool","useState","isActive","setIsActive","measurement","useEffect","current","widget","ref","Measurement","container","watch","toolDismissed","useCallback","tipsClicked","showTips","Measure","useMeasure","id","heading","hidden","closed","undefined","closable","onCalcitePanelClose","icon","slot","onClick","collapsePanel","referenceElement","closeOnClick","className","active","React","map","portalItem","portal","user","units","spatialReference"],"sourceRoot":""}