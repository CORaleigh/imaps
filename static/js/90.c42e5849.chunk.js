(this.webpackJsonpimaps=this.webpackJsonpimaps||[]).push([[90,40,50,278,283],{1051:function(e,t,r){"use strict";var s=r(81),i=r(79),a=r(140),n=r(80),o=(r(87),r(84)),c=r(142),l=r(83),u=(r(82),r(85),r(86),r(162)),d=r(92),p=r(278),h=(r(168),r(113)),b=r(106),y=r(112),g=r(160),m=r(298),f=r(126),O=r(151),v=r(156),j=r(88),S=r(91),w=r(95),_=r(97),T=r(111),x=r(128),I=r(105),L=r(145),M=r(166),R=r(217),k=r(203),N=r(159),E=r(249),C=r(573),F=r(208),A=r(288),U=r(342),G=r(120),D=r(481),P=r(498),B=r(107),$=r(704),V=r(677);const q=Object($.a)({themeDictionary:{default:{name:"default",label:"Default",description:"Default theme for basic visualization of features.",schemes:{point:{light:{primary:{color:[77,77,77,1],outline:{color:[255,255,255,.25],width:"1px"},size:"8px"},secondary:[{color:[226,119,40,1],outline:{color:[255,255,255,.25],width:"1px"},size:"8px"},{color:[255,255,255,1],outline:{color:[51,51,51,.25],width:"1px"},size:"8px"}]},dark:{primary:{color:[255,255,255,1],outline:{color:[92,92,92,.25],width:"1px"},size:"8px"},secondary:[{color:[226,119,40,1],outline:{color:[255,255,255,.25],width:"1px"},size:"8px"},{color:[26,26,26,1],outline:{color:[178,178,178,.25],width:"1px"},size:"8px"}]}},polyline:{light:{primary:{color:[77,77,77,1],width:"2px"},secondary:[{color:[226,119,40,1],width:"2px"},{color:[255,255,255,1],width:"2px"}]},dark:{primary:{color:[255,255,255,1],width:"2px"},secondary:[{color:[226,119,40,1],width:"2px"},{color:[26,26,26,1],width:"2px"}]}},polygon:{light:{primary:{size:"12px",color:[227,139,79,1],outline:{color:[255,255,255,.25],width:"1px"},opacity:.8},secondary:[{size:"12px",color:[128,128,128,1],outline:{color:[255,255,255,.25],width:"1px"},opacity:.8},{size:"12px",color:[255,255,255,1],outline:{color:[128,128,128,.25],width:"1px"},opacity:.8}]},dark:{primary:{size:"12px",color:[227,139,79,1],outline:{color:[92,92,92,.25],width:"1px"},opacity:.8},secondary:[{size:"12px",color:[178,178,178,1],outline:{color:[92,92,92,.25],width:"1px"},opacity:.8},{size:"12px",color:[26,26,26,1],outline:{color:[128,128,128,.25],width:"1px"},opacity:.8}]}}}}}});function J(e){const t=Object($.d)({basemap:e.basemap,geometryType:e.geometryType,basemapTheme:e.basemapTheme,theme:q.get("default")});if(!t)return;const{schemesInfo:r,basemapId:s,basemapTheme:i}=t;return{primaryScheme:W(e,r.primary),secondarySchemes:r.secondary.map((t=>W(e,t))).filter(Boolean),basemapId:s,basemapTheme:i}}function W(e,t){const r="mesh"!==e.geometryType&&e.worldScale?e.view:null;switch(e.geometryType){case"point":case"multipoint":{const e=t;return function(e,t){return{color:new B.a(e.color),outline:{color:new B.a(e.outline.color),width:e.outline.width},size:t?Object(V.a)(e.size,t):e.size,opacity:1}}({color:e.color,outline:{...e.outline},size:e.size},r)}case"polyline":{const e=t;return function(e,t){return{color:new B.a(e.color),width:t?Object(V.a)(e.width,t):e.width,opacity:1}}({color:e.color,width:e.width},r)}case"polygon":{const e=t;return function(e,t){return{color:new B.a(e.color),outline:{color:new B.a(e.outline.color),width:e.outline.width},size:t?Object(V.a)(e.size,t):e.size,opacity:e.opacity}}({size:e.size,color:e.color,outline:{...e.outline},opacity:e.opacity},r)}case"mesh":{const e=t;return function(e){return{color:new B.a(e.color),opacity:e.opacity}}({color:e.color,opacity:e.opacity})}}}Object.freeze({__proto__:null,getThemes:function(e){return Object($.e)(q,e)},getSchemes:J,cloneScheme:function(e){if(!e)return;const t={...e};return t.color&&(t.color=new B.a(t.color)),"outline"in t&&t.outline&&(t.outline={color:t.outline.color&&new B.a(t.outline.color),width:t.outline.width}),t}});var z=r(740),H=r(741),K=r(866),Z=r(814),X=r(892),Y=r(813);function Q(e,t){return e.hasOwnProperty(t)&&null!=e[t]&&""!==e[t]}const ee="esri.widgets.Search.SearchViewModel",te=n.a.getLogger(ee),re="highlight",se=I.a.ofType({key:e=>e.layer?"layer":"locator",base:z.a,typeMap:{layer:K.a,locator:X.a}}),ie=_.a.WGS84,ae=/<(?:.|\s)*?>/g,ne=-1;let oe=class extends(Object(P.a)(x.a.EventedMixin(w.a))){constructor(e){super(e),this._handles=new h.a,this._gotoController=null,this._searching=null,this.autoNavigate=!0,this.autoSelect=!0,this.defaultPopupTemplate=null,this.defaultSources=new se,this.defaultSymbol=new C.a({url:Object(N.a)(Object(i.a)("trident")?"esri/images/search/search-symbol-32.png":"esri/images/search/search-symbol-32.svg"),size:24,width:24,height:24}),this.includeDefaultSources=!0,this.maxInputLength=128,this.maxResults=6,this.maxSuggestions=6,this.messages=null,this.minSuggestCharacters=1,this.popupEnabled=!0,this.popupTemplate=null,this.portal=E.a.getDefault(),this.resultCount=null,this.resultGraphicEnabled=!0,this.resultGraphic=null,this.results=null,this.selectedSuggestion=null,this.searchAllEnabled=!0,this.selectedResult=null,this.sources=new se,this.suggestionDelay=150,this.suggestionCount=null,this.suggestions=null,this.suggestionsEnabled=!0,this.view=null}initialize(){const e=async()=>{const e=await Object(k.a)("esri/widgets/Search/t9n/Search");this.messages=e,this.defaultPopupTemplate=new M.a({title:e.searchResult,content:"{Match_addr}"})};e(),this._handles.add([Object(b.b)(this,["defaultSources","sources"],"change",(()=>this.notifyChange("allSources"))),Object(b.a)(this,["includeDefaultSources","view","portal"],(()=>this._update())),Object(L.c)(e)])}destroy(){this._abortGoTo(),this.clearGraphics(),this._handles.destroy(),this._handles=null}get activeSource(){return this.allSources.getItemAt(this.activeSourceIndex)||null}get activeSourceIndex(){return 1!==this.allSources.length&&this.searchAllEnabled?ne:0}set activeSourceIndex(e){void 0!==e?this._override("activeSourceIndex",e):this._clearOverride("activeSourceIndex")}get allPlaceholder(){var e;return null==(e=this.messages)?void 0:e.allPlaceholder}set allPlaceholder(e){e?this._override("allPlaceholder",e):this._clearOverride("allPlaceholder")}get allSources(){const{sources:e,defaultSources:t,includeDefaultSources:r}=this,s="function"==typeof r?r.call(null,{sources:e,defaultSources:t}):r?t.concat(e):e,i=this._get("allSources")||new se;return i.removeAll(),i.addMany(s.filter(Boolean)),i}get locationEnabled(){return this._get("locationEnabled")||Object(Y.c)()}set locationEnabled(e){if(void 0===e)return void this._clearOverride("locationEnabled");const t=Object(Y.c)();if(e&&!t){const e=new S.a("locationEnabled:geolocation-unsupported","Geolocation API is unsupported.",{geolocation:navigator.geolocation});te.error(e)}this._override("locationEnabled",e&&t)}get placeholder(){const{allSources:e,activeSourceIndex:t,allPlaceholder:r}=this;if(t===ne)return r;const s=e.getItemAt(t);return s?s.placeholder:""}set searchTerm(e){this._set("searchTerm",e||""),this.clearGraphics(),this.selectedSuggestion&&this.selectedSuggestion.text!==e&&this._set("selectedSuggestion",null),""===e&&this._clear()}get searchTerm(){return this._get("searchTerm")||""}get state(){return this._searching?"searching":this.updating?"loading":0===this.allSources.length?"disabled":"ready"}get updating(){return null!=this._updatingPromise}clear(){this.searchTerm=""}clearGraphics(){this._removeHighlight(),this._closePopup(),this.view&&this.view.graphics.remove(this.resultGraphic),this._set("resultGraphic",null)}search(e,t){this.emit("search-start"),this.clearGraphics();const r=this._createSuggestionForSearch(e),s=this.when().then((()=>this._getResultsFromSources(r,t).then((e=>{const t={activeSourceIndex:this.activeSourceIndex,searchTerm:r.text,numResults:0,numErrors:0,errors:[],results:[]};this._formatResponse(t,e,r);const s=this._getFirstResult(t.results),i=(r.location&&s?s.name:r.text).replace(ae,"");return this._set("searchTerm",i),(r.key&&"number"==typeof r.sourceIndex||r.location)&&this._set("selectedSuggestion",r),this._set("results",t.results),this._set("resultCount",t.results.reduce(((e,t)=>e+t.results.length),0)),this.emit("search-complete",t),this._selectFirstResult(s).then((()=>t))})))).then((e=>(this._clearSearching(),e)),(e=>{throw this._clearSearching(),e}));return this._searching=s,this.notifyChange("state"),s}searchNearby(e){if(!this.locationEnabled){const e=new S.a("searchNearby:geolocation-unsupported","Geolocation API is unsupported.",{geolocation:navigator.geolocation});return te.error(e),Promise.reject(e)}const t=Object(Y.a)().then((t=>Object(Y.b)({position:t,view:this.view},e))).then((t=>this.search(t,e)));return this._searching=t,this.notifyChange("state"),t.catch((()=>{})).then((()=>this._clearSearching())),t}select(e){if(this.clearGraphics(),!e){const t=new S.a("select:missing-parameter","Cannot select without a searchResult.",{searchResult:e});return te.error(t),Promise.reject(t)}const{view:t}=this,r=Q(e,"sourceIndex")?e.sourceIndex:this._getSourceIndexOfResult(e),s=this.allSources.getItemAt(r);if(!s){const e=new S.a("select:missing-source","Cannot select without a source.",{source:s});return te.error(e),Promise.reject(e)}const i=s instanceof K.a?this._getLayerSourcePopupTemplate(s):s.popupTemplate,a=s.resultSymbol||this._getDefaultSymbol(e),n=Q(s,"resultGraphicEnabled")?s.resultGraphicEnabled:this.resultGraphicEnabled,o=Q(s,"autoNavigate")?s.autoNavigate:this.autoNavigate,c=Q(s,"popupEnabled")?s.popupEnabled:this.popupEnabled,l=c?i||this.popupTemplate||this.defaultPopupTemplate:null,{feature:u}=e;if(!u){const e=new S.a("select:missing-feature","Cannot select without a feature.",{feature:u});return te.error(e),Promise.reject(e)}const{attributes:p,geometry:h,layer:b,sourceLayer:y}=u,g=Object(H.b)(h),m={layerViewQuery:this._getLayerView(u),elevationQuery:t&&Object(j.k)(g)?Object(H.c)(g,t).catch((()=>g)):Promise.resolve(g)};return Object(d.j)(m).then((i=>{const d=i.layerViewQuery.value,g=i.elevationQuery.value;a instanceof U.a&&(a.text=e.name);const m=t&&o?e.target||e.extent:null;return(Object(j.k)(m)?this._goToSearchResult(m):Promise.resolve()).then((()=>{var i;const o=d?u:new G.a({geometry:h,symbol:a,attributes:p,layer:b,sourceLayer:y,popupTemplate:l}),m=c&&(null==(i=this.view)?void 0:i.popup),f=m&&o.getEffectivePopupTemplate(m.defaultPopupTemplateEnabled);return f&&t.popup.open({features:[o],location:g}),d&&Object(D.a)(d)&&!f&&this._highlightFeature({graphic:o,layerView:d}),!d&&n&&t&&t.graphics.push(o),this._set("selectedResult",e),this._set("resultGraphic",o),this.emit("select-result",{result:e,source:s,sourceIndex:r}),e}))}))}suggest(e,t,r){const s=e||this.searchTerm;return this.emit("suggest-start",{searchTerm:s}),this._suggestTimer(t,r).then((()=>this._suggestImmediate(s,r).then((e=>(this._set("suggestions",e.results),this._set("suggestionCount",e.results.reduce(((e,t)=>e+t.results.length),0)),this.emit("suggest-complete",e),e)))))}async when(){await Object(b.g)(this,"updating")}async _update(){const{portal:e,view:t}=this;if(this.includeDefaultSources){const r=this._updatingPromise=Object(d.j)([null==e?void 0:e.load(),null==t?void 0:t.when()]);if(this.destroyed)return;if(this.notifyChange("updating"),await r,r!==this._updatingPromise)return}this._updatingPromise=null,this.notifyChange("updating");const r=Object(b.j)(this,"messages");this.destroyed||(this._handles.add(r),await r,this._updateDefaultSources())}_clearSearching(){this._searching=null,this.notifyChange("state")}_convertHelperServices(){var e,t;const r=null==(e=this.portal)||null==(t=e.helperServices)?void 0:t.geocode;return r?r.map((e=>{var t;if(!1===e.placefinding)return;const r=v.a.apiKey&&Object(Z.c)(e.url)?{url:"https://geocode-api.arcgis.com/arcgis/rest/services/World/GeocodeServer"}:null,s=X.a.fromJSON({...e,...r}),i=null==(t=s.locator)?void 0:t.url;if(Object(Z.c)(i)||Object(Z.e)(i)||Object(Z.d)(i)){const e=s.outFields||["Addr_type","Match_addr","StAddr","City"],t=s.placeholder||this.messages.placeholder,r="number"==typeof s.defaultZoomScale?s.defaultZoomScale:2500;s.set({singleLineFieldName:"SingleLine",outFields:e,placeholder:t,defaultZoomScale:r})}return s.singleLineFieldName?s:void 0})).filter(Boolean):[]}_getLayerSources(e,t){var r;const s=null==(r=this.view)?void 0:r.map;return e.map((e=>{const r=s.findLayerById(e.id);if(!r)return;const i=this._getLayerJSON(e),a=K.a.fromJSON(i);return a.placeholder=t,this._getLayer(r,i).then((e=>{a.layer=e})),a})).filter(Boolean).toArray()}_getTableSources(e,t){var r;const s=null==(r=this.view)?void 0:r.map;return e.map((e=>{const r=s.findTableById(e.id);if(!r)return;const i=this._getLayerJSON(e),a=K.a.fromJSON(i);return a.placeholder=t,this._getLayer(r,i).then((e=>{a.layer=e})),a})).filter(Boolean).toArray()}_convertApplicationProperties(){var e,t,r;const s=null==(e=this.view)?void 0:e.map,i=null==s||null==(t=s.applicationProperties)||null==(r=t.viewing)?void 0:r.search;if(!i)return[];const{enabled:a,hintText:n,layers:o,tables:c}=i;return a?[...this._getLayerSources(o,n),...this._getTableSources(c,n)]:[]}_getSubLayer(e,t){return e.load().then((()=>{if(!e.allSublayers)return Promise.reject();const r=e.allSublayers.find((e=>e.id===t.subLayer));return r?r.createFeatureLayer():Promise.reject()}))}async _getBuildingSubLayer(e,t){await e.load();const r=e.allSublayers.find((e=>e.id===t.subLayer));return"building-component"!==(null==r?void 0:r.type)?Promise.reject():(await r.load(),null==r.associatedLayer?Promise.reject():(await r.associatedLayer.load(),r))}_getLayer(e,t){return"feature"===e.type||"scene"===e.type||"csv"===e.type||"geojson"===e.type||"ogc-feature"===e.type?Promise.resolve(e):"map-image"===e.type?this._getSubLayer(e,t).catch((()=>{const t=new S.a("search:create-featurelayer","Could not create a FeatureLayer from the MapImageLayer",{layer:e});return te.error(t),null})):"building-scene"===e.type?this._getBuildingSubLayer(e,t):Promise.resolve(null)}_getLayerJSON(e){return"function"==typeof e.toJSON?e.toJSON():e}_updateDefaultSources(){const{defaultSources:e,includeDefaultSources:t}=this;e.removeAll(),t&&e.addMany([...this._convertApplicationProperties(),...this._convertHelperServices()]),this.notifyChange("allSources")}_abortGoTo(){this._gotoController&&this._gotoController.abort(),this._gotoController=null}_clear(){this._abortGoTo(),this._set("resultCount",null),this._set("results",null),this._set("suggestions",null),this._set("suggestionCount",null),this._set("selectedResult",null),this._set("selectedSuggestion",null),this.emit("search-clear")}_closePopup(){var e;const t=null==(e=this.view)?void 0:e.popup,{resultGraphic:r}=this;if(!t||!r)return;const{selectedFeature:s}=t;s&&s===r&&t.close()}_suggestTimer(e,t){const r=null!=e?e:this.suggestionDelay;return Object(d.a)(r,null,t&&t.signal)}_createLocationForSearch(e){return e instanceof G.a?Object(H.b)(e.geometry):e instanceof T.a?e:Array.isArray(e)&&2===e.length?new T.a({longitude:e[0],latitude:e[1]}):null}_createSuggestionForSearch(e){if(e&&Q(e,"key")&&Q(e,"text")&&Q(e,"sourceIndex"))return e;const t=this._createLocationForSearch(e),r="string"==typeof e?e:this.searchTerm,{selectedSuggestion:s,selectedResult:i}=this,a=!e&&s&&i,n=a&&s.key===i.key&&s.sourceIndex===i.sourceIndex,o=a&&s.location;return n||o?s:{location:Object(j.q)(t),text:t?"":r,sourceIndex:null,key:null}}_getFirstResult(e){let t=null;return e&&e.some((e=>{const{results:r}=e,s=r[0],i=!!s;return i&&(t=s),i})),t}_selectFirstResult(e){return this.autoSelect&&e?this.select(e):Promise.resolve(null)}_suggestImmediate(e,t){return this.when().then((()=>this._getSuggestionsFromSources(e,t))).then((t=>{const r={activeSourceIndex:this.activeSourceIndex,searchTerm:e,numResults:0,numErrors:0,errors:[],results:[]};return this._formatResponse(r,t),r}))}_formatSourceResponse(e,t,r){const s=t&&t.value||[],i=t&&t.error,a=this.allSources.getItemAt(r);if(i){const t={sourceIndex:r,source:a,error:i};e.errors.push(t),e.numErrors++}else{const t={sourceIndex:r,source:a,results:s};e.results.push(t),e.numResults+=s.length}}_formatResponse(e,t,r){if(t)if(e.activeSourceIndex===ne){const s=r&&Q(r,"sourceIndex")&&-1!==r.sourceIndex?r.sourceIndex:void 0;t.forEach(((t,r)=>{const i=void 0!==s?s:r;this._formatSourceResponse(e,t,i)}))}else this._formatSourceResponse(e,t[0],e.activeSourceIndex)}_getResultsFromSources(e,t){const{allSources:r}=this,s=!e.location&&Q(e,"sourceIndex")?e.sourceIndex:this.activeSourceIndex,i=[];if(!r.length){const e=new S.a("search:no-sources-defined","At least one source is required.",{allSources:r});return te.error(e),Promise.reject(e)}return s===ne?r.forEach(((r,s)=>{i.push(this._getResultsFromSource(e,s,t))})):i.push(this._getResultsFromSource(e,s,t)),Object(d.j)(i)}_getSuggestionsFromSources(e,t){const{allSources:r,activeSourceIndex:s}=this,i=[];if(!r.length){const e=new S.a("suggest:no-sources-defined","At least one source is required.",{allSources:r});return te.error(e),Promise.reject(e)}return s===ne?r.forEach(((r,s)=>{i.push(this._getSuggestionsFromSource(e,s,t))})):i.push(this._getSuggestionsFromSource(e,s,t)),Object(d.j)(i)}_getResultsFromSource(e,t,r){var s;const i=this.allSources.getItemAt(t),{location:a=null}=e,n=(null==(s=this.view)?void 0:s.spatialReference)||ie,o=Q(i,"maxResults")?i.maxResults:this.maxResults,c=!!(i instanceof K.a&&Q(i,"exactMatch"))&&i.exactMatch,{view:l}=this;return i.getResults({view:l,sourceIndex:t,location:a,suggestResult:e,spatialReference:n,exactMatch:c,maxResults:o},r)}_getSuggestionsFromSource(e,t,r){const s=this.allSources.getItemAt(t),i=Q(s,"suggestionsEnabled")?s.suggestionsEnabled:this.suggestionsEnabled,a=e.length,n=Q(s,"minSuggestCharacters")?s.minSuggestCharacters:this.minSuggestCharacters;if(i&&e.trim()&&a>=n){var o;const i=(null==(o=this.view)?void 0:o.spatialReference)||ie,a=Q(s,"maxSuggestions")?s.maxSuggestions:this.maxSuggestions,{view:n}=this;return s.getSuggestions({view:n,sourceIndex:t,suggestTerm:e,spatialReference:i,maxSuggestions:a},r)}return Promise.resolve(null)}createDefaultSymbol(e,t){if("point"===t){const t=e;return new A.a({color:e.color,size:t.size,outline:{color:t.outline.color,width:t.outline.width}})}if("polyline"===t){const t=e;return new R.a({color:t.color,width:t.width})}if("polygon"===t){const t=e;return new F.a({color:t.color,outline:{color:t.outline.color,width:t.outline.width}})}}_getLayerSourcePopupTemplate(e){const{layer:t}=e;if(t)return Q(e,"popupTemplate")?e.popupTemplate:t.popupTemplate}_getSourceIndexOfResult(e){const t=this.results;let r=null;return t.some((t=>t.results.some((s=>s===e&&(r=t.sourceIndex,!0))))),r}async _goToSearchResult(e){const t=!!e;this._abortGoTo();const r=Object(d.d)();this._gotoController=r;const s={target:{target:e},options:{animate:t,signal:r.signal}};await this.callGoTo(s),this._gotoController=null}_getDefaultSymbol(e){var t,r,s;const i=null==(t=this.view)||null==(r=t.map)||null==(s=r.basemap)?void 0:s.id,a=Object(j.i)(e,"feature","geometry","type");if(Object(j.k)(a)){const e=J({basemap:i,geometryType:a})||J({basemap:"topo",geometryType:a}),t=e&&e.primaryScheme;if(t)return t.color&&Q(t,"opacity")&&(t.color.a=t.opacity),this.createDefaultSymbol(t,a)}return this.defaultSymbol}_removeHighlight(){this._handles.remove(re)}async _getLayerView(e){const{view:t}=this;if(!e||!t||"building-component"===e.layer.type)return Promise.resolve(null);const{layer:r}=e;return await t.when(),t.whenLayerView(r)}_highlightFeature(e){const{graphic:t,layerView:r}=e,{attributes:s,layer:i}=t,{objectIdField:a}=i,n=s&&s[a],o=r.highlight(n||t);this._handles.add(o,re)}};oe.ALL_INDEX=ne,Object(s.a)([Object(o.b)({readOnly:!0,value:null})],oe.prototype,"activeSource",null),Object(s.a)([Object(o.b)()],oe.prototype,"activeSourceIndex",null),Object(s.a)([Object(o.b)()],oe.prototype,"allPlaceholder",null),Object(s.a)([Object(o.b)({readOnly:!0,dependsOn:["defaultSources.length","sources.length","includeDefaultSources"]})],oe.prototype,"allSources",null),Object(s.a)([Object(o.b)()],oe.prototype,"autoNavigate",void 0),Object(s.a)([Object(o.b)()],oe.prototype,"autoSelect",void 0),Object(s.a)([Object(o.b)()],oe.prototype,"defaultPopupTemplate",void 0),Object(s.a)([Object(o.b)({readOnly:!0})],oe.prototype,"defaultSources",void 0),Object(s.a)([Object(o.b)()],oe.prototype,"defaultSymbol",void 0),Object(s.a)([Object(o.b)()],oe.prototype,"includeDefaultSources",void 0),Object(s.a)([Object(o.b)()],oe.prototype,"locationEnabled",null),Object(s.a)([Object(o.b)()],oe.prototype,"maxInputLength",void 0),Object(s.a)([Object(o.b)()],oe.prototype,"maxResults",void 0),Object(s.a)([Object(o.b)()],oe.prototype,"maxSuggestions",void 0),Object(s.a)([Object(o.b)()],oe.prototype,"messages",void 0),Object(s.a)([Object(o.b)()],oe.prototype,"minSuggestCharacters",void 0),Object(s.a)([Object(o.b)({readOnly:!0})],oe.prototype,"placeholder",null),Object(s.a)([Object(o.b)()],oe.prototype,"popupEnabled",void 0),Object(s.a)([Object(o.b)({type:M.a})],oe.prototype,"popupTemplate",void 0),Object(s.a)([Object(o.b)({type:E.a})],oe.prototype,"portal",void 0),Object(s.a)([Object(o.b)()],oe.prototype,"resultCount",void 0),Object(s.a)([Object(o.b)()],oe.prototype,"resultGraphicEnabled",void 0),Object(s.a)([Object(o.b)({readOnly:!0})],oe.prototype,"resultGraphic",void 0),Object(s.a)([Object(o.b)({readOnly:!0})],oe.prototype,"results",void 0),Object(s.a)([Object(o.b)({readOnly:!0})],oe.prototype,"selectedSuggestion",void 0),Object(s.a)([Object(o.b)()],oe.prototype,"searchAllEnabled",void 0),Object(s.a)([Object(o.b)({readOnly:!0})],oe.prototype,"selectedResult",void 0),Object(s.a)([Object(o.b)()],oe.prototype,"searchTerm",null),Object(s.a)([Object(o.b)({type:se})],oe.prototype,"sources",void 0),Object(s.a)([Object(o.b)({readOnly:!0,dependsOn:["allSources.length","updating"]})],oe.prototype,"state",null),Object(s.a)([Object(o.b)()],oe.prototype,"suggestionDelay",void 0),Object(s.a)([Object(o.b)()],oe.prototype,"suggestionCount",void 0),Object(s.a)([Object(o.b)({readOnly:!0})],oe.prototype,"suggestions",void 0),Object(s.a)([Object(o.b)()],oe.prototype,"suggestionsEnabled",void 0),Object(s.a)([Object(o.b)({readOnly:!0})],oe.prototype,"updating",null),Object(s.a)([Object(o.b)()],oe.prototype,"view",void 0),Object(s.a)([Object(o.b)()],oe.prototype,"clear",null),oe=Object(s.a)([Object(l.a)(ee)],oe);var ce=oe,le=r(258);const ue="esri-search-result-renderer esri-widget",de="esri-widget__anchor",pe="esri-search-result-renderer__more-results--show-more-results",he="esri-search-result-renderer__more-results",be="esri-search-result-renderer__more-results-list",ye="esri-search-result-renderer__more-results-item",ge="esri-search-result-renderer__more-results-list-header";let me=class extends O.a{constructor(e,t){super(e,t),this.messages=null,this.showMoreResultsOpen=!1,this.viewModel=null}render(){const e={[pe]:this.showMoreResultsOpen};return Object(f.a)("div",{class:ue},Object(f.a)("div",{key:"esri-search-renderer__container",class:this.classes(he,e)},this.renderSearchResultName(),this.renderMoreResults()))}renderMoreResults(){return Object(f.a)("div",{key:"esri-search-renderer__more-results"},this.renderMoreResultsButton(),this.renderMoreResultsLists())}renderSearchResultName(){var e;const t=null==(e=this.viewModel)?void 0:e.selectedResult,r=t&&t.name||"";return Object(f.a)("div",{key:"esri-search-renderer__result-name",class:ye},r)}renderMoreResultsLists(){var e;const t=null==(e=this.viewModel)?void 0:e.results,{resultCount:r}=this.viewModel;if(r<2)return null;const s=t.map((e=>this.renderMoreResultsList(e)));return Object(f.a)("div",{key:"esri-search-renderer__more-results-container",class:be},s)}renderMoreResultsButton(){const{messages:e}=this,{resultCount:t}=this.viewModel;return t<2?null:Object(f.a)("div",{key:"esri-search-renderer__more-results-button",class:ye},Object(f.a)("a",{class:de,href:"#",bind:this,onclick:this._showMoreResultsClick,onkeydown:this._showMoreResultsClick},this.showMoreResultsOpen?e.hideMoreResults:e.showMoreResults))}renderMoreResultsHeader(e,t){return Object(f.a)("div",{key:`esri-search-result-renderer__header-${t}`,class:ge},e)}renderMoreResultsList(e){var t,r;const{results:s}=e,i=s.length,a=!!i,n=null==(t=this.viewModel)?void 0:t.selectedResult,o=1===i&&s[0]===n,c=this._getSourceName(e.source,e.sourceIndex),l=(null==(r=this.viewModel)?void 0:r.results.length)>1&&!o?this.renderMoreResultsHeader(c,e.sourceIndex):null,u=a&&s.map(((e,t)=>this.renderMoreResultsListItem(e,t))),d=a&&!o?Object(f.a)("ul",{key:`esri-search-result-renderer__list-${e.sourceIndex}`},u):null;return a?Object(f.a)("div",{key:`esri-search-result-renderer__results-${e.sourceIndex}`},l,d):null}renderMoreResultsListItem(e,t){return e!==this.get("viewModel.selectedResult")?Object(f.a)("li",{key:`esri-search-result-renderer__list-item-${t}`},Object(f.a)("a",{class:de,href:"#",tabindex:"0",bind:this,"data-result":e,onclick:this._selectResultClick,onkeydown:this._selectResultClick},e.name)):null}_showMoreResultsClick(e){e.preventDefault(),this.showMoreResultsOpen=!this.showMoreResultsOpen;const t=this.get("viewModel.view.popup");t&&t.reposition()}_selectResultClick(e){e.preventDefault();const t=e.currentTarget["data-result"];this.viewModel&&this.viewModel.select(t)}_getSourceName(e,t){return t===ce.ALL_INDEX?this.messages.all:e.name}};Object(s.a)([Object(o.b)(),Object(g.a)("esri/widgets/Search/t9n/Search")],me.prototype,"messages",void 0),Object(s.a)([Object(o.b)()],me.prototype,"showMoreResultsOpen",void 0),Object(s.a)([Object(o.b)()],me.prototype,"viewModel",void 0),Object(s.a)([Object(le.a)()],me.prototype,"_showMoreResultsClick",null),Object(s.a)([Object(le.a)()],me.prototype,"_selectResultClick",null),me=Object(s.a)([Object(l.a)("esri.widgets.Search.SearchResultRenderer")],me);var fe=me;const Oe="esri-search esri-widget",ve="esri-widget__loader",je="esri-widget__loader-text",Se="esri-widget__loader-animation",we="esri-input",_e="esri-search--multiple-sources",Te="esri-search--loading",xe="esri-search--searching",Ie="esri-search--show-suggestions",Le="esri-search--sources",Me="esri-search--warning",Re="esri-search__container",ke="esri-search__input",Ne="esri-search__input-container",Ee="esri-search__form",Ce="esri-search__submit-button",Fe="esri-search__sources-button",Ae="esri-search__clear-button",Ue="esri-search__source-name",Ge="esri-search__suggestions-menu",De="esri-search__suggestions-list",Pe="esri-search__suggestions-list--current-location",Be="esri-search__sources-menu",$e="esri-search__source",Ve="esri-search__warning-menu",qe="esri-search__warning-body",Je="esri-search__warning-header",We="esri-search__warning-text",ze="esri-search__no-value-text",He="esri-widget--disabled",Ke="esri-widget--button",Ze="esri-icon-font-fallback-text",Xe="esri-icon-locate-circled",Ye="esri-menu",Qe="esri-menu__list",et="esri-menu__list-item",tt="esri-menu__list-item--active",rt="esri-menu__list-item--focus",st="esri-menu__header",it="esri-icon-search",at="esri-icon-down-arrow esri-search__sources-button--down",nt="esri-icon-up-arrow esri-search__sources-button--up",ot="esri-icon-close",ct="esri-icon-notice-triangle",lt="esri-icon-search",ut="esri-disabled",dt=/<[a-z/][\s\S]*>/i;let pt=class extends O.a{constructor(e,t){super(e,t),this._activeMenuItemIndex=-1,this._handles=new h.a,this._inputNode=null,this._menuItemCount=0,this._sourceMenuButtonNode=null,this._sourceListNode=null,this._suggestionListNode=null,this._searchResultRenderer=new fe,this._relatedTarget=null,this._locateFailed=null,this.activeMenu="none",this.activeSource=null,this.activeSourceIndex=null,this.allPlaceholder=null,this.allSources=null,this.autoNavigate=null,this.autoSelect=null,this.defaultSources=null,this.disabled=!1,this.goToOverride=null,this.iconClass=lt,this.includeDefaultSources=null,this.label=void 0,this.locationEnabled=null,this.maxResults=null,this.maxSuggestions=null,this.messages=null,this.messagesCommon=null,this.minSuggestCharacters=null,this.popupEnabled=null,this.popupTemplate=null,this.portal=null,this.resultGraphic=null,this.resultGraphicEnabled=null,this.results=null,this.searchAllEnabled=null,this.searchTerm=null,this.selectedResult=null,this.sources=null,this.suggestions=null,this.suggestionsEnabled=null,this.view=null,this.viewModel=new ce,this.own(Object(b.d)(this,"searchTerm",(e=>{(e&&"warning"===this.activeMenu||!e&&!this.get("viewModel.selectedSuggestion.location"))&&(this.activeMenu="none")})),Object(b.b)(this,"viewModel.allSources","change",(()=>this._watchSourceChanges())),Object(b.a)(this,"activeMenu",(()=>this._resetActiveMenuItemIndex())),Object(b.a)(this,"viewModel.defaultPopupTemplate",(e=>{e&&(e.content=this._renderSearchResultsContent.bind(this))})))}destroy(){this._handles.destroy(),this._handles=null,this._cancelSuggest(),this._cancelSearch(),this._searchResultRenderer&&(this._searchResultRenderer.viewModel=null,this._searchResultRenderer.destroy(),this._searchResultRenderer=null)}get displayedSearchTerm(){return`${this.viewModel.searchTerm}`.trim()}get inputId(){return this._buildId("input")}get suggestionsMenuId(){return this._buildId("suggest-menu")}get sourceMenuId(){return this._buildId("source-menu")}get sourceMenuButtonId(){return this._buildId("source-menu-button")}clear(){}focus(){this._inputNode&&(this.activeMenu="suggestion",this._inputNode.focus(),this.emit("search-focus"))}blur(e){this._inputNode&&(this._inputNode.blur(),this._inputBlur(e),this.emit("search-blur"))}search(e){this.activeMenu="none",this._cancelSuggest(),this._cancelSearch();const t=Object(d.d)(),{signal:r}=t;return this._searchController=t,this.viewModel.search(e,{signal:r}).catch((e=>{if(this._searchController===t)return this.activeMenu="none",this._searchController=null,e})).then((e=>{if(this._searchController===t)return this.activeMenu=e.numResults?"none":"warning",this._searchController=null,e}))}suggest(e){this._cancelSuggest();const t=Object(d.d)(),{signal:r}=t;return this._suggestController=t,this.viewModel.suggest(e,null,{signal:r}).then((e=>{if(this._suggestController===t)return this._suggestController=null,e.numResults&&(this.activeMenu="suggestion"),this._scrollToTopSuggestion(),e})).catch((()=>{if(this._suggestController===t)return this._suggestController=null,null}))}render(){const{state:e}=this.viewModel,t={[ut]:"disabled"===e,[He]:this.disabled};return Object(f.a)("div",{class:this.classes(Oe,t)},"loading"===e?this.renderLoader():this.renderContainer())}renderSubmitButton(){const{messages:e}=this;return Object(f.a)("button",{"aria-label":e.searchButtonTitle,bind:this,class:this.classes(Ce,Ke),key:"esri-search__submit-button",onclick:this._handleSearchButtonClick,title:e.searchButtonTitle},Object(f.a)("span",{"aria-hidden":"true",class:it}))}renderWarningMenu(){return Object(f.a)("div",{key:"esri-search__error-menu",class:this.classes(Ye,Ve)},Object(f.a)("div",{class:qe},this.renderWarning()))}renderSourceMenuButton(){const{messages:e,activeMenu:t,sourceMenuId:r,sourceMenuButtonId:s}=this,{activeSourceIndex:i,allSources:a}=this.viewModel;return a.length>1?Object(f.a)("button",{id:s,key:"esri-search__source-menu-button",bind:this,"aria-label":e.searchIn,title:e.searchIn,"aria-haspopup":"true","aria-expanded":("source"===t).toString(),"aria-controls":r,class:this.classes(Fe,Ke),onclick:this._handleSourcesMenuToggleClick,onblur:this._sourcesButtonBlur,afterCreate:y.i,"data-node-ref":"_sourceMenuButtonNode"},Object(f.a)("span",{"aria-hidden":"true",class:at}),Object(f.a)("span",{"aria-hidden":"true",class:nt}),Object(f.a)("span",{class:Ue},this._getSourceName(i))):null}renderSourcesList(){const{allSources:e,searchAllEnabled:t}=this.viewModel,{_activeMenuItemIndex:r,activeMenu:s,sourceMenuId:i,sourceMenuButtonId:a}=this,n="source"===s&&r>-1?this._buildId("source-item",r):null;return e.length>1?Object(f.a)("ul",{"aria-activedescendant":n,"aria-labelledby":a,id:i,role:"menu",bind:this,afterCreate:y.i,onkeydown:this._handleSourceMenuKeydown,onkeyup:this._handleSourceMenuKeyup,"data-node-ref":"_sourceListNode",class:Qe,tabIndex:-1},t?this.renderSource(ce.ALL_INDEX):null,e.map(((e,t)=>this.renderSource(t))).toArray()):null}renderSourcesMenu(){const{allSources:e}=this.viewModel;return e.length>1?Object(f.a)("div",{key:"esri-search__source-menu",class:this.classes(Ye,Be)},this.renderSourcesList()):null}renderLoader(){const{messages:e,messagesCommon:t}=this;return Object(f.a)("div",{class:ve,key:"base-loader"},Object(f.a)("span",{"aria-hidden":"true",class:Se}),Object(f.a)("span",{class:Ze},e.searchButtonTitle),Object(f.a)("span",{class:je},t.loading))}renderContainer(){const{allSources:e,state:t}=this.viewModel,{activeMenu:r}=this,s={[_e]:e.length>1,[Te]:"loading"===t,[xe]:"searching"===t,[Me]:"warning"===r,[Le]:"source"===r,[Ie]:"suggestion"===r};return Object(f.a)("div",{class:this.classes(s,Re),key:"base-container"},this.renderSourceMenuButton(),this.renderSourcesMenu(),this.renderInputContainer(),this.renderSubmitButton(),this.renderWarningMenu())}renderClearButton(){return this.searchTerm?Object(f.a)("button",{bind:this,class:this.classes(Ae,Ke),key:"esri-search__clear-button",onclick:this._handleClearButtonClick,onfocus:this._clearButtonFocus,title:this.messages.clearButtonTitle},Object(f.a)("span",{"aria-hidden":"true",class:ot})):null}renderLocationGroup(){const{messages:e,locationEnabled:t,displayedSearchTerm:r}=this,s=t&&!r,i="suggestion"===this.activeMenu&&0===this._activeMenuItemIndex;return s?Object(f.a)("ul",{role:"group",key:"esri-search__suggestion-list-current-location",class:this.classes(Qe,De,Pe)},Object(f.a)("li",{bind:this,"data-current-location-item":!0,onclick:this._handleUseCurrentLocationClick,id:this._buildId("suggestion-item",0),"aria-selected":("suggestion"===this.activeMenu&&0===this._activeMenuItemIndex).toString(),role:"option",class:this.classes(et,i?rt:null)},Object(f.a)("span",{"aria-hidden":"true",class:Xe})," ",e.useCurrentLocation)):null}renderInput(){const{activeMenu:e,locationEnabled:t,displayedSearchTerm:r,messages:s,suggestionsMenuId:i,inputId:a,_activeMenuItemIndex:n}=this,{maxInputLength:o,placeholder:c,searchTerm:l,suggestionCount:u}=this.viewModel,d=!((!t||r)&&!u),p="suggestion"===e&&n>-1?this._buildId("suggestion-item",n):null;return Object(f.a)("input",{"aria-activedescendant":p,"aria-autocomplete":"list","aria-expanded":(d&&"suggestion"===e).toString(),"aria-controls":d?i:null,"aria-owns":d?i:null,"aria-haspopup":"listbox","aria-label":s.searchButtonTitle,bind:this,placeholder:c,maxlength:o,autocomplete:"off",type:"text",class:this.classes(we,ke),value:l,id:a,role:"combobox",onkeyup:this._handleInputKeyup,onclick:this._handleInputClick,oninput:this._handleInputPaste,onpaste:this._handleInputPaste,afterCreate:y.i,"data-node-ref":"_inputNode",onfocusout:this._storeRelatedTarget,onfocus:this.focus,onblur:this.blur,title:l?"":c})}renderForm(){return Object(f.a)("form",{key:"esri-search__form",bind:this,class:Ee,onsubmit:this._formSubmit,role:"search"},this.renderInput())}renderSuggestList(e){const{sourceIndex:t}=e,r=e.results.length,s=e.results;return r?Object(f.a)("ul",{role:"group",key:`esri-search__suggestion-list-${t}`,class:this.classes(Qe,De)},s.map((e=>this.renderSuggestion(e,this._menuItemCount++)))):null}renderSuggestionsGroup(){const{suggestions:e}=this.viewModel;return e?e.map((e=>[this.renderSuggestionHeader(e),this.renderSuggestList(e)])):null}renderSuggestionsMenu(){const{displayedSearchTerm:e,locationEnabled:t,suggestionsMenuId:r,inputId:s}=this,{suggestionCount:i}=this.viewModel,a=t&&!e||i;return this._menuItemCount=0,a?Object(f.a)("div",{id:r,key:"esri-search__suggestions-menu",class:this.classes(Ye,Ge),role:"listbox","aria-labelledby":s,bind:this,afterCreate:y.i,"data-node-ref":"_suggestionListNode"},this.renderLocationGroup(),this.renderSuggestionsGroup()):null}renderInputContainer(){return Object(f.a)("div",{key:"esri-search__input-container",class:Ne},this.renderForm(),this.renderSuggestionsMenu(),this.renderClearButton())}renderSuggestionHeader(e){const{allSources:t,activeSourceIndex:r}=this.viewModel,{sourceIndex:s}=e,i=e.results.length,a=t.length>1&&r===ce.ALL_INDEX;return i&&a?Object(f.a)("div",{key:`esri-search__suggestion-header-${s}`,class:st},this._getSourceName(s)):null}renderSuggestion(e,t){const{_activeMenuItemIndex:r,messages:s}=this,{searchTerm:i}=this.viewModel;if(i){const{text:a}=e,n=a||s.untitledResult,o=dt.test(n),c=[];if(o)c.push(Object(f.a)("div",{innerHTML:n}));else{const e=this._splitResult(n,i),t=i.toLowerCase();e.forEach(((e,r)=>{e&&e.length&&(e.toLowerCase()===t?c.push(Object(f.a)("strong",{key:r},e)):c.push(e))}))}const l="suggestion"===this.activeMenu&&r===t;return Object(f.a)("li",{bind:this,id:this._buildId("suggestion-item",t),"aria-selected":("suggestion"===this.activeMenu&&this._activeMenuItemIndex===t).toString(),onclick:this._handleSuggestionClick,key:`esri-search__suggestion_${t}`,"data-suggestion":e,role:"option",class:this.classes(et,l?rt:null)},c)}}renderSource(e){const{activeSourceIndex:t,searchAllEnabled:r}=this.viewModel,s={[tt]:e===t,[rt]:"source"===this.activeMenu&&e===(r?this._activeMenuItemIndex-1:this._activeMenuItemIndex)},i=r?e+1:e;return Object(f.a)("li",{bind:this,key:`esri-search__source-${e}`,id:this._buildId("source-item",i),"aria-checked":(e===t).toString(),onclick:this._handleSourceClick,"data-source-index":e,role:"menuitemradio",class:this.classes($e,et,s)},this._getSourceName(e))}renderNoResultsWarning(e){const{messages:t}=this,r=e?Object(p.a)(t.noResultsFoundForValue,{value:`"${e}"`}):t.noResultsFound;return Object(f.a)("div",{key:"esri-search__no_results"},Object(f.a)("div",{class:Je},t.noResults),Object(f.a)("div",{class:We},r))}renderEmptySearchWarning(){const{messages:e}=this;return Object(f.a)("div",{key:"esri-search__empty-search"},Object(f.a)("span",{"aria-hidden":"true",class:ct}),Object(f.a)("span",{class:ze},e.emptyValue))}renderLocateWarning(){const{messages:e}=this;return Object(f.a)("div",{key:"esri-search__locate-error"},Object(f.a)("span",{"aria-hidden":"true",class:ct}),Object(f.a)("span",{class:ze},e.locateError))}renderWarning(){var e;const{displayedSearchTerm:t,_locateFailed:r}=this,{viewModel:s}=this;return r?this.renderLocateWarning():null!=(e=s.selectedSuggestion)&&e.location||t?this.renderNoResultsWarning(t):this.renderEmptySearchWarning()}_resetActiveMenuItemIndex(){this._activeMenuItemIndex=-1}_buildId(e,t){return`${this.id}-${e}${void 0===t?"":`-${t}`}`}_watchSourceChanges(){const{_handles:e,viewModel:{allSources:t}}=this,r="sources";e.remove(r),t.forEach((t=>e.add(Object(b.d)(t,"name",(()=>this.scheduleRender())),r)))}_handleSourcesMenuToggleClick(){const e="source"===this.activeMenu;var t;this.activeMenu=e?"none":"source",this.renderNow(),"source"===this.activeMenu&&(null==(t=this._sourceListNode)||t.focus())}_handleClearButtonClick(){this.viewModel.clear(),this._focus()}_handleSearchButtonClick(){this.search()}_handleSuggestionClick(e){const t=e.currentTarget["data-suggestion"];t&&(this._focus(),this.search(t))}_handleUseCurrentLocationClick(){this._useCurrentLocation()}_useCurrentLocation(){this._focus("none"),this._cancelSuggest(),this._cancelSearch();const e=Object(d.d)(),{signal:t}=e;this._searchController=e,this.viewModel.searchNearby({signal:t}).catch((()=>{this._locateFailed=!0,this.activeMenu="warning"})).then((()=>{this._searchController=null}))}_handleSourceClick(e){this._setSourceFromMenuItem(e.currentTarget)}_setSourceFromMenuItem(e){var t;if(!e)return;const r=e["data-source-index"];this.viewModel.activeSourceIndex=r,this.activeMenu="none",null==(t=this._sourceMenuButtonNode)||t.focus()}_sourcesButtonBlur(e){const t=e&&e.relatedTarget;this._removeActiveMenu(t,this._sourceListNode)}_inputBlur(e){const t=e&&e.relatedTarget;this._removeActiveMenu(t||this._relatedTarget,this._suggestionListNode)}_storeRelatedTarget(e){this._relatedTarget=e.relatedTarget}_clearButtonFocus(){this.activeMenu="none"}_removeActiveMenu(e,t){!e||e&&t&&t.contains(e)||(this.activeMenu="none")}_cancelSuggest(){this._suggestController&&(this._suggestController.abort(),this._suggestController=null)}_cancelSearch(){this._searchController&&(this._searchController.abort(),this._searchController=null),this._locateFailed=!1}_handleInputKeyup(e){var t;const r=Object(u.a)(e);if(e.ctrlKey||e.metaKey||"Copy"===r||"ArrowLeft"===r||"ArrowRight"===r||"Shift"===r)return;if("Tab"===r||"Escape"===r||e.shiftKey&&"Tab"===r)return this._cancelSuggest(),void("Escape"===r&&(this.activeMenu="none"));const s="Home"===r||"End"===r||"ArrowUp"===r||"ArrowDown"===r;if("Enter"===r&&this._activeMenuItemIndex<0)return void this._cancelSuggest();const i=null==(t=this._suggestionListNode)?void 0:t.getElementsByTagName("li");if(null!=i&&i.length){if("suggestion"!==this.activeMenu&&(this.activeMenu="suggestion"),s)return e.preventDefault(),this._cancelSuggest(),void this.handleItemNavigation(r,i,this._suggestionListNode);const t=i[this._activeMenuItemIndex];if("Enter"===r&&t){const e=t["data-suggestion"];return void(e?(this._focus(),this.search(e)):t["data-current-location-item"]&&this._useCurrentLocation())}}this.viewModel.searchTerm&&this.suggest()}handleItemNavigation(e,t,r){const s=this._activeMenuItemIndex;"Home"===e&&(this._activeMenuItemIndex=0),"End"===e&&(this._activeMenuItemIndex=t.length-1),"ArrowUp"===e&&(this._activeMenuItemIndex=this._activeMenuItemIndex<=0?t.length-1:this._activeMenuItemIndex-1),"ArrowDown"===e&&(this._activeMenuItemIndex=this._activeMenuItemIndex===t.length-1?0:this._activeMenuItemIndex+1),s!==this._activeMenuItemIndex&&Object(y.g)(t[this._activeMenuItemIndex],r)}_scrollToTopSuggestion(){this._suggestionListNode&&(this._suggestionListNode.scrollTop=0)}_handleInputClick(){this.activeMenu="suggestion"}_handleInputPaste(e){const t=e.target;this.viewModel.searchTerm!==t.value&&(this.viewModel.searchTerm=t.value),this.viewModel.searchTerm&&this.suggest()}_handleSourceMenuKeydown(e){const t=Object(u.a)(e);if(" "!==t&&"Enter"!==t)"ArrowUp"!==t&&"ArrowDown"!==t&&"End"!==t&&"Home"!==t||e.preventDefault();else{e.preventDefault();const t=this._sourceListNode.getElementsByTagName("li")[this._activeMenuItemIndex];this._setSourceFromMenuItem(t)}}_handleSourceMenuKeyup(e){var t;const r=Object(u.a)(e),s="ArrowUp"===r||"ArrowDown"===r||"End"===r||"Home"===r;var i;if(s&&e.preventDefault(),"Escape"===r)return this.activeMenu="none",void(null==(i=this._sourceMenuButtonNode)||i.focus());const a=null==(t=this._sourceListNode)?void 0:t.getElementsByTagName("li");return a&&0!==a.length&&s?("source"!==this.activeMenu&&(this.activeMenu="source"),void this.handleItemNavigation(r,a,this._sourceListNode.parentElement)):void 0}_focus(e){this.focus(),e&&(this.activeMenu=e)}_formSubmit(e){e.preventDefault(),-1===this._activeMenuItemIndex&&this.search()}_getSourceName(e){const{messages:t}=this,r=this.viewModel,{allSources:s}=r,i=s.getItemAt(e);return e===ce.ALL_INDEX?t.all:i&&i.name||t.untitledSource}_splitResult(e,t){const r=Object(a.a)(t);return e.replace(new RegExp(`(^|)(${r})(|$)`,"ig"),"$1|$2|$3").split("|")}_renderSearchResultsContent(){return this._searchResultRenderer.showMoreResultsOpen=!1,this._searchResultRenderer.viewModel=this.viewModel,this._searchResultRenderer}};Object(s.a)([Object(o.b)()],pt.prototype,"_activeMenuItemIndex",void 0),Object(s.a)([Object(o.b)()],pt.prototype,"displayedSearchTerm",null),Object(s.a)([Object(o.b)({readOnly:!0})],pt.prototype,"inputId",null),Object(s.a)([Object(o.b)({readOnly:!0})],pt.prototype,"suggestionsMenuId",null),Object(s.a)([Object(o.b)({readOnly:!0})],pt.prototype,"sourceMenuId",null),Object(s.a)([Object(o.b)({readOnly:!0})],pt.prototype,"sourceMenuButtonId",null),Object(s.a)([Object(o.b)()],pt.prototype,"activeMenu",void 0),Object(s.a)([Object(c.a)("viewModel.activeSource")],pt.prototype,"activeSource",void 0),Object(s.a)([Object(c.a)("viewModel.activeSourceIndex")],pt.prototype,"activeSourceIndex",void 0),Object(s.a)([Object(c.a)("viewModel.allPlaceholder")],pt.prototype,"allPlaceholder",void 0),Object(s.a)([Object(c.a)("viewModel.allSources")],pt.prototype,"allSources",void 0),Object(s.a)([Object(c.a)("viewModel.autoNavigate")],pt.prototype,"autoNavigate",void 0),Object(s.a)([Object(c.a)("viewModel.autoSelect")],pt.prototype,"autoSelect",void 0),Object(s.a)([Object(c.a)("viewModel.defaultSources")],pt.prototype,"defaultSources",void 0),Object(s.a)([Object(o.b)()],pt.prototype,"disabled",void 0),Object(s.a)([Object(c.a)("viewModel.goToOverride")],pt.prototype,"goToOverride",void 0),Object(s.a)([Object(o.b)()],pt.prototype,"iconClass",void 0),Object(s.a)([Object(c.a)("viewModel.includeDefaultSources")],pt.prototype,"includeDefaultSources",void 0),Object(s.a)([Object(o.b)({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],pt.prototype,"label",void 0),Object(s.a)([Object(c.a)("viewModel.locationEnabled")],pt.prototype,"locationEnabled",void 0),Object(s.a)([Object(c.a)("viewModel.maxResults")],pt.prototype,"maxResults",void 0),Object(s.a)([Object(c.a)("viewModel.maxSuggestions")],pt.prototype,"maxSuggestions",void 0),Object(s.a)([Object(o.b)(),Object(g.a)("esri/widgets/Search/t9n/Search")],pt.prototype,"messages",void 0),Object(s.a)([Object(o.b)(),Object(g.a)("esri/t9n/common")],pt.prototype,"messagesCommon",void 0),Object(s.a)([Object(c.a)("viewModel.minSuggestCharacters")],pt.prototype,"minSuggestCharacters",void 0),Object(s.a)([Object(c.a)("viewModel.popupEnabled")],pt.prototype,"popupEnabled",void 0),Object(s.a)([Object(c.a)("viewModel.popupTemplate")],pt.prototype,"popupTemplate",void 0),Object(s.a)([Object(c.a)("viewModel.portal")],pt.prototype,"portal",void 0),Object(s.a)([Object(c.a)("viewModel.resultGraphic")],pt.prototype,"resultGraphic",void 0),Object(s.a)([Object(c.a)("viewModel.resultGraphicEnabled")],pt.prototype,"resultGraphicEnabled",void 0),Object(s.a)([Object(c.a)("viewModel.results")],pt.prototype,"results",void 0),Object(s.a)([Object(c.a)("viewModel.searchAllEnabled")],pt.prototype,"searchAllEnabled",void 0),Object(s.a)([Object(c.a)("viewModel.searchTerm")],pt.prototype,"searchTerm",void 0),Object(s.a)([Object(c.a)("viewModel.selectedResult")],pt.prototype,"selectedResult",void 0),Object(s.a)([Object(c.a)("viewModel.sources")],pt.prototype,"sources",void 0),Object(s.a)([Object(c.a)("viewModel.suggestions")],pt.prototype,"suggestions",void 0),Object(s.a)([Object(c.a)("viewModel.suggestionsEnabled")],pt.prototype,"suggestionsEnabled",void 0),Object(s.a)([Object(c.a)("viewModel.view")],pt.prototype,"view",void 0),Object(s.a)([Object(m.a)(["search-complete","search-clear","search-start","select-result","suggest-start","suggest-complete"]),Object(o.b)({type:ce})],pt.prototype,"viewModel",void 0),Object(s.a)([Object(c.a)("viewModel.clear")],pt.prototype,"clear",null),pt=Object(s.a)([Object(l.a)("esri.widgets.Search")],pt);var ht=pt;t.a=ht},1109:function(e,t,r){},115:function(e,t,r){"use strict";r.d(t,"a",(function(){return V})),r.d(t,"b",(function(){return _})),r.d(t,"c",(function(){return x})),r.d(t,"d",(function(){return P})),r.d(t,"e",(function(){return G})),r.d(t,"f",(function(){return U})),r.d(t,"g",(function(){return F})),r.d(t,"h",(function(){return D})),r.d(t,"i",(function(){return A})),r.d(t,"j",(function(){return l})),r.d(t,"k",(function(){return T})),r.d(t,"l",(function(){return S})),r.d(t,"m",(function(){return E})),r.d(t,"n",(function(){return q})),r.d(t,"o",(function(){return w})),r.d(t,"p",(function(){return v})),r.d(t,"q",(function(){return j})),r.d(t,"r",(function(){return N})),r.d(t,"s",(function(){return M})),r.d(t,"t",(function(){return R})),r.d(t,"u",(function(){return k})),r.d(t,"v",(function(){return I})),r.d(t,"w",(function(){return L})),r.d(t,"x",(function(){return C}));r(79);var s=r(93),i=r(254),a=r(110),n=r(97),o=r(136),c=r(170);const l=39.37,u=o.a.radius*Math.PI/200,d=/UNIT\[([^\]]+)\]\]$/i,p=i.a,h=/UNIT\[([^\]]+)\]/i,b=new Set([4261,4305,4807,4810,4811,4812,4816,4819,4821,4901,4902,37225,104139,104140]),y=Object(s.b)()({meter:"meters",foot:"feet",foot_us:"us-feet",foot_clarke:"clarke-feet",yard_clarke:"clarke-yards",link_clarke:"clarke-links",yard_sears:"sears-yards",foot_sears:"sears-feet",chain_sears:"sears-chains",chain_benoit_1895_b:"benoit-1895-b-chains",yard_indian:"indian-yards",yard_indian_1937:"indian-1937-yards",foot_gold_coast:"gold-coast-feet",chain_sears_1922_truncated:"sears-1922-truncated-chains","50_kilometers":"50-kilometers","150_kilometers":"150-kilometers"}),g=e=>e*e,m=e=>e*e*e,f={length:{baseUnit:"meters",units:{millimeters:{inBaseUnits:.001},centimeters:{inBaseUnits:.01},decimeters:{inBaseUnits:.1},meters:{inBaseUnits:1},kilometers:{inBaseUnits:1e3},inches:{inBaseUnits:.0254},feet:{inBaseUnits:.3048},yards:{inBaseUnits:.9144},miles:{inBaseUnits:1609.344},"nautical-miles":{inBaseUnits:1852},"us-feet":{inBaseUnits:1200/3937}}},area:{baseUnit:"square-meters",units:{"square-millimeters":{inBaseUnits:g(.001)},"square-centimeters":{inBaseUnits:g(.01)},"square-decimeters":{inBaseUnits:g(.1)},"square-meters":{inBaseUnits:1},"square-kilometers":{inBaseUnits:g(1e3)},"square-inches":{inBaseUnits:g(.0254)},"square-feet":{inBaseUnits:g(.3048)},"square-yards":{inBaseUnits:g(.9144)},"square-miles":{inBaseUnits:g(1609.344)},"square-us-feet":{inBaseUnits:g(1200/3937)},acres:{inBaseUnits:.0015625*g(1609.344)},ares:{inBaseUnits:100},hectares:{inBaseUnits:1e4}}},volume:{baseUnit:"liters",units:{liters:{inBaseUnits:1},"cubic-millimeters":{inBaseUnits:1e3*m(.001)},"cubic-centimeters":{inBaseUnits:1e3*m(.01)},"cubic-decimeters":{inBaseUnits:1e3*m(.1)},"cubic-meters":{inBaseUnits:1e3},"cubic-kilometers":{inBaseUnits:1e3*m(1e3)},"cubic-inches":{inBaseUnits:1e3*m(.0254)},"cubic-feet":{inBaseUnits:1e3*m(.3048)},"cubic-yards":{inBaseUnits:1e3*m(.9144)},"cubic-miles":{inBaseUnits:1e3*m(1609.344)}}},angle:{baseUnit:"radians",units:{radians:{inBaseUnits:1},degrees:{inBaseUnits:Math.PI/180}}}},O=function(){const e={};for(const t in f)for(const r in f[t].units)e[r]=t;return e}();const v=["metric","imperial","square-inches","square-feet","square-yards","square-miles","square-us-feet","square-meters","square-kilometers","acres","ares","hectares"],j=["metric","imperial","inches","feet","yards","miles","nautical-miles","us-feet","meters","kilometers"];function S(e){return"imperial"===e||"metric"===e}function w(e){const t=O[e];if(t)return t;throw new Error("unknown measure")}function _(e){return function(e){return f[e].baseUnit}(w(e))}function T(e,t=null){return t=t||w(e),f[t].baseUnit===e}function x(e,t,r){if(t===r)return e;const s=w(t);if(s!==w(r))throw new Error("incompatible units");const i=T(t,s)?e:function(e,t,r){return e*f[r].units[t].inBaseUnits}(e,t,s);return T(r,s)?i:function(e,t,r){return e/f[r].units[t].inBaseUnits}(i,r,s)}function I(e,t){return x(e,t,"meters")<3e3?"meters":"kilometers"}function L(e,t){return x(e,t,"meters")<1e5?"meters":"kilometers"}function M(e,t){return x(e,t,"feet")<1e3?"feet":"miles"}function R(e,t){return x(e,t,"feet")<1e5?"feet":"miles"}function k(e,t){return x(e,t,"square-meters")<3e6?"square-meters":"square-kilometers"}function N(e,t){return x(e,t,"square-feet")<1e6?"square-feet":"square-miles"}function E(e,t,r){return x(e,t,"meters")/(r*Math.PI/180)}function C(e){return y.fromJSON(e.toLowerCase())||null}function F(e){if(e&&"object"==typeof e&&!Object(a.e)(e))return 1;const t=U(e);return t>1e5?1:t}function A(e){return U(e)>=(e instanceof n.a?Object(c.e)(e).metersPerDegree:1e5)?"meters":D(e)}function U(e,t=o.a.metersPerDegree){return G(e,!0)||t}function G(e,t=!1){let r,s,i=null;if(null!=e&&("object"==typeof e?(r=e.wkid,s=e.wkt):"number"==typeof e?r=e:"string"==typeof e&&(s=e)),r){if(Object(a.k)(r))return o.b.metersPerDegree;if(Object(a.l)(r))return o.c.metersPerDegree;i=p.values[p[r]],!i&&t&&b.has(r)&&(i=u)}else if(s)if(-1!==s.search(/^PROJCS/i)){const e=d.exec(s);e&&e[1]&&(i=parseFloat(e[1].split(",")[1]))}else if(-1!==s.search(/^GEOCCS/i)){const e=h.exec(s);e&&e[1]&&(i=parseFloat(e[1].split(",")[1]))}return i}function D(e){let t,r,s=null;if(null!=e&&("object"==typeof e?(t=e.wkid,r=e.wkt):"number"==typeof e?t=e:"string"==typeof e&&(r=e)),t)s=p.units[p[t]];else if(r&&-1!==r.search(/^PROJCS/i)){let e=d.exec(r);e&&e[1]&&(e=/[\\"\\']{1}([^\\"\\']+)/.exec(e[1]),s=e&&e[1])}return s?C(s):null}function P(e){if(!e)return null;switch(D(e)){case"feet":case"us-feet":case"clarke-feet":case"clarke-yards":case"clarke-links":case"sears-yards":case"sears-feet":case"sears-chains":case"benoit-1895-b-chains":case"indian-yards":case"indian-1937-yards":case"gold-coast-feet":case"sears-1922-truncated-chains":return"imperial";case"50-kilometers":case"150-kilometers":case"meters":return"metric";case null:case void 0:return null}return null}const B={esriAcres:"acres",esriAres:"ares",esriHectares:"hectares",esriSquareCentimeters:"square-centimeters",esriSquareDecimeters:"square-decimeters",esriSquareFeet:"square-feet",esriSquareInches:"square-inches",esriSquareKilometers:"square-kilometers",esriSquareMeters:"square-meters",esriSquareMiles:"square-miles",esriSquareMillimeters:"square-millimeters",esriSquareUsFeet:"square-us-feet",esriSquareYards:"square-yards"},$={esriCentimeters:"centimeters",esriDecimeters:"decimeters",esriFeet:"feet",esriInches:"inches",esriKilometers:"kilometers",esriMeters:"meters",esriMiles:"miles",esriMillimeters:"millimeters",esriNauticalMiles:"nautical-miles",esriYards:"yards"},V=Object(s.b)()(B),q=Object(s.b)()($);Object(s.b)()({...B,...$})},116:function(e,t,r){"use strict";r.d(t,"a",(function(){return $})),r.d(t,"b",(function(){return V})),r.d(t,"c",(function(){return v})),r.d(t,"d",(function(){return w})),r.d(t,"e",(function(){return _})),r.d(t,"f",(function(){return g})),r.d(t,"g",(function(){return y})),r.d(t,"h",(function(){return T})),r.d(t,"i",(function(){return L})),r.d(t,"j",(function(){return Q})),r.d(t,"k",(function(){return b})),r.d(t,"l",(function(){return u})),r.d(t,"m",(function(){return p})),r.d(t,"n",(function(){return j})),r.d(t,"o",(function(){return x})),r.d(t,"p",(function(){return I})),r.d(t,"q",(function(){return f})),r.d(t,"r",(function(){return M})),r.d(t,"s",(function(){return W})),r.d(t,"t",(function(){return O})),r.d(t,"u",(function(){return B})),r.d(t,"v",(function(){return D})),r.d(t,"w",(function(){return P})),r.d(t,"x",(function(){return q})),r.d(t,"y",(function(){return m})),r.d(t,"z",(function(){return J})),r.d(t,"A",(function(){return Y}));var s=r(121),i=r(88),a=r(91),n=r(146),o=r(149);const c=["field","field2","field3","normalizationField","rotationInfo.field","proportionalSymbolInfo.field","proportionalSymbolInfo.normalizationField","colorInfo.field","colorInfo.normalizationField"],l=["field","normalizationField"];function u(e,t){if(null!=e&&null!=t)for(const r of Array.isArray(e)?e:[e])if(d(c,r,t),"visualVariables"in r&&r.visualVariables)for(const e of r.visualVariables)d(l,e,t)}function d(e,t,r){if(e)for(const i of e){const e=Object(s.b)(i,t),a=e&&"function"!=typeof e&&f(r,e);a&&Object(s.c)(i,a.name,t)}}function p(e,t){if(null!=e&&null!=t)if("startField"in e){const r=f(t,e.startField),s=f(t,e.endField);e.startField=r&&r.name||null,e.endField=s&&s.name||null}else{const r=f(t,e.startTimeField),s=f(t,e.endTimeField);e.startTimeField=r&&r.name||null,e.endTimeField=s&&s.name||null}}const h=new Set;function b(e,t){return e&&t?(h.clear(),y(h,e,t),Array.from(h).sort()):[]}function y(e,t,r){if(r)if(t&&t.length)if(r.includes("*"))for(const{name:s}of t)e.add(s);else for(const s of r)g(e,t,s);else{if(r.includes("*"))return e.clear(),void e.add("*");for(const t of r)e.add(t)}}function g(e,t,r){if(t&&t.length){const s=f(t,r);s&&e.add(s.name)}else"string"==typeof r&&e.add(r)}function m(e,t){return Object(i.j)(t)||Object(i.j)(e)?[]:t.includes("*")?e.map((e=>e.name)):t}function f(e,t){if("string"!=typeof t)return null;if(null!=e){t=t.toLowerCase();for(const r of e)if(r&&r.name.toLowerCase()===t)return r}return null}function O(e,t){if(!e||!t||"string"!=typeof t)return!1;t=t.toLowerCase();for(const r of e)if(r&&r.name.toLowerCase()===t)return!0;return!1}async function v(e,t,r){if(!r)return;const{arcadeUtils:s}=await Object(o.e)(),i=s.extractFieldNames(r);for(const a of i)g(e,t,a)}function j({displayField:e,fields:t}){return e||(t&&t.length?S(t,"name-or-title")||S(t,"unique-identifier")||S(t,"type-or-category")||function(e){for(const t of e){if(!t||!t.name)continue;const e=t.name.toLowerCase();if(e.indexOf("name")>-1||e.indexOf("title")>-1)return t.name}return null}(t):null)}function S(e,t){for(const r of e)if(r&&r.valueType&&r.valueType===t)return r.name;return null}async function w(e,t){if(!t)return;const{fields:r}=t,i=Object(s.b)("elevationInfo.featureExpressionInfo",t);return i?i.collectRequiredFields(e,r):void 0}async function _(e,t,r){t&&r&&"cluster"===r.type&&r.fields&&await Promise.all(r.fields.map((r=>async function(e,t,r){r.outStatistic.onStatisticValueExpression?v(e,t,r.outStatistic.onStatisticValueExpression):e.add(r.outStatistic.onStatisticField)}(e,t.fields,r))))}async function T(e,t,s){if(t&&(t.timeInfo&&Object(i.k)(s)&&s.timeExtent&&y(e,t.fields,[t.timeInfo.startField,t.timeInfo.endField]),t.floorInfo&&y(e,t.fields,[t.floorInfo.floorField]),Object(i.k)(s)&&Object(i.k)(s.where)&&s.where&&"1=1"!==s.where)){const i=(await Promise.all([r.e(11),r.e(273)]).then(r.bind(null,269))).WhereClause.create(s.where,t.fieldsIndex);if(!i.isStandardized)throw new a.a("fieldUtils:collectFilterFields","Where clause is not standardized");y(e,t.fields,i.fieldNames)}}function x(e){if(!e)return[];const t="editFieldsInfo"in e&&e.editFieldsInfo;return t?b(e.fields,[t&&t.creatorField,t&&t.creationDateField,t&&t.editorField,t&&t.editDateField]):[]}function I(e){if(!e)return[];const t=e.geometryFieldsInfo;return t?b(e.fields,[t.shapeAreaField,t.shapeLengthField]):[]}async function L(e,t){const{labelingInfo:r,fields:s}=t;r&&r.length&&await Promise.all(r.map((t=>async function(e,t,r){if(!r)return;const s=r.getLabelExpression(),i=r.where;if("arcade"===s.type)await v(e,t,s.expression);else{const r=s.expression.match(/{[^}]*}/g);r&&r.forEach((r=>{g(e,t,r.slice(1,-1))}))}const a=/['"]+/g;if(i){const r=i.split(" ");3===r.length&&g(e,t,r[0].replace(a,"")),7===r.length&&(g(e,t,r[0].replace(a,"")),g(e,t,r[4].replace(a,"")))}}(e,s,t))))}function M(e){const t=e.defaultValue;return void 0!==t&&U(e,t)?t:e.nullable?null:void 0}function R(e){return"number"==typeof e&&!isNaN(e)&&isFinite(e)}function k(e){return null===e||R(e)}const N="isInteger"in Number?Number.isInteger:e=>"number"==typeof e&&isFinite(e)&&Math.floor(e)===e;function E(e){return null===e||N(e)}function C(e){return null!=e&&"string"==typeof e}function F(e){return null===e||C(e)}function A(){return!0}function U(e,t){let r;switch(e.type){case"date":case"integer":case"long":case"small-integer":case"esriFieldTypeDate":case"esriFieldTypeInteger":case"esriFieldTypeLong":case"esriFieldTypeSmallInteger":r=e.nullable?E:N;break;case"double":case"single":case"esriFieldTypeSingle":case"esriFieldTypeDouble":r=e.nullable?k:R;break;case"string":case"esriFieldTypeString":r=e.nullable?F:C;break;default:r=A}return 1===arguments.length?r:r(t)}const G=new Set(["integer","small-integer","single","double","esriFieldTypeInteger","esriFieldTypeSmallInteger","esriFieldTypeSingle","esriFieldTypeDouble"]);function D(e){return null!=e&&G.has(e.type)}function P(e){return null!=e&&("string"===e.type||"esriFieldTypeString"===e.type)}function B(e){return null!=e&&("date"===e.type||"esriFieldTypeDate"===e.type)}var $,V;function q(e){return null==e||"number"==typeof e&&isNaN(e)?null:e}function J(e,t){return e.nullable&&null===t?null:D(e)&&!function(e,t){const r="string"==typeof e?z(e):e;return!!r&&(r.isInteger?N(t)&&t>=r.min&&t<=r.max:t>=r.min&&t<=r.max)}(e.type,Number(t))?$.OUT_OF_RANGE:U(e,t)?e.domain?Object(n.e)(e.domain,t):null:V.INVALID_TYPE}function W(e){return Object(n.c)(e.domain)||(D(e)?z(e.type):void 0)}function z(e){switch(e){case"esriFieldTypeSmallInteger":case"small-integer":return H;case"esriFieldTypeInteger":case"integer":return K;case"esriFieldTypeSingle":case"single":return Z;case"esriFieldTypeDouble":case"double":return X}}($||($={})).OUT_OF_RANGE="numeric-range-validation-error::out-of-range",function(e){e.INVALID_TYPE="type-validation-error::invalid-type"}(V||(V={}));const H={min:-32768,max:32767,isInteger:!0},K={min:-2147483648,max:2147483647,isInteger:!0},Z={min:-34e37,max:12e37,isInteger:!1},X={min:-Number.MAX_VALUE,max:Number.MAX_VALUE,isInteger:!1};function Y(e,t,r){switch(e){case n.a.INVALID_CODED_VALUE:return`Value ${r} is not in the coded domain - field: ${t.name}, domain: ${JSON.stringify(t.domain)}`;case n.a.VALUE_OUT_OF_RANGE:return`Value ${r} is out of the range of valid values - field: ${t.name}, domain: ${JSON.stringify(t.domain)}`;case V.INVALID_TYPE:return`Value ${r} is not a valid value for the field type - field: ${t.name}, type: ${t.type}, nullable: ${t.nullable}`;case $.OUT_OF_RANGE:{const{min:e,max:s}=z(t.type);return`Value ${r} is out of range for the number type - field: ${t.name}, type: ${t.type}, value range is ${e} to ${s}`}}}function Q(e,t){return!function(e,t,r){if(!t||!t.attributes||!e){if(Object(i.k)(r))for(const t of e)r.add(t);return!0}const s=t.attributes;let a=!1;for(const n of e)if(!(n in s)){if(a=!0,!Object(i.k)(r))break;r.add(n)}return a}(e,t,null)}},118:function(e,t,r){"use strict";var s=r(81),i=(r(79),r(80),r(87),r(84)),a=r(93),n=r(100),o=r(83),c=(r(82),r(85),r(86),r(89));const l=new a.a({inherited:"inherited",codedValue:"coded-value",range:"range"});let u=class extends c.a{constructor(e){super(e),this.name=null,this.type=null}};Object(s.a)([Object(i.b)({type:String,json:{write:!0}})],u.prototype,"name",void 0),Object(s.a)([Object(n.a)(l)],u.prototype,"type",void 0),u=Object(s.a)([Object(o.a)("esri.layers.support.Domain")],u);var d=u;t.a=d},120:function(e,t,r){"use strict";var s,i=r(81),a=(r(79),r(90)),n=r(88),o=(r(80),r(87),r(84)),c=r(83),l=(r(82),r(85),r(86),r(89)),u=r(98),d=r(99),p=r(166),h=r(135),b=r(186);let y=s=class extends l.a{constructor(...e){super(...e),this.isAggregate=!1,this.layer=null,this.popupTemplate=null,this.sourceLayer=null,Object.defineProperty(this,"uid",{value:Object(b.a)(),configurable:!0})}normalizeCtorArgs(e,t,r,s){return e&&!e.declaredClass?e:{geometry:e,symbol:t,attributes:r,popupTemplate:s}}set attributes(e){const t=this._get("attributes");t!==e&&(this._set("attributes",e),this._notifyLayer("attributes",t,e))}set geometry(e){const t=this._get("geometry");t!==e&&(this._set("geometry",e),this._notifyLayer("geometry",t,e))}set symbol(e){const t=this._get("symbol");t!==e&&(this._set("symbol",e),this._notifyLayer("symbol",t,e))}set visible(e){const t=this._get("visible");t!==e&&(this._set("visible",e),this._notifyLayer("visible",t,e))}getEffectivePopupTemplate(e=!1){return this.popupTemplate?this.popupTemplate:this.sourceLayer?"popupTemplate"in this.sourceLayer&&this.sourceLayer.popupTemplate?this.sourceLayer.popupTemplate:e&&"defaultPopupTemplate"in this.sourceLayer&&Object(n.k)(this.sourceLayer.defaultPopupTemplate)?this.sourceLayer.defaultPopupTemplate:null:null}getAttribute(e){return this.attributes&&this.attributes[e]}setAttribute(e,t){if(this.attributes){const r=this.getAttribute(e);this.attributes[e]=t,this._notifyLayer("attributes",r,t,e)}else this.attributes={[e]:t},this._notifyLayer("attributes",void 0,t,e)}getObjectId(){return this.sourceLayer&&"objectIdField"in this.sourceLayer&&this.sourceLayer.objectIdField?this.getAttribute(this.sourceLayer.objectIdField):null}toJSON(){return{geometry:Object(n.k)(this.geometry)?this.geometry.toJSON():null,symbol:Object(n.k)(this.symbol)?this.symbol.toJSON():null,attributes:{...this.attributes},popupTemplate:this.popupTemplate&&this.popupTemplate.toJSON()}}clone(){return new s(this.cloneProperties())}cloneProperties(){return{attributes:Object(a.a)(this.attributes),geometry:Object(a.a)(this.geometry),layer:this.layer,popupTemplate:this.popupTemplate&&this.popupTemplate.clone(),sourceLayer:this.sourceLayer,symbol:Object(a.a)(this.symbol),visible:this.visible}}_notifyLayer(e,t,r,s){if(!this.layer||!("graphicChanged"in this.layer))return;const i={graphic:this,property:e,oldValue:t,newValue:r};"attributes"===e&&(i.attributeName=s),this.layer.graphicChanged(i)}};Object(i.a)([Object(o.b)({value:null})],y.prototype,"attributes",null),Object(i.a)([Object(o.b)({value:null,types:d.a,json:{read:u.a}})],y.prototype,"geometry",null),Object(i.a)([Object(o.b)({type:Boolean})],y.prototype,"isAggregate",void 0),Object(i.a)([Object(o.b)()],y.prototype,"layer",void 0),Object(i.a)([Object(o.b)({type:p.a})],y.prototype,"popupTemplate",void 0),Object(i.a)([Object(o.b)()],y.prototype,"sourceLayer",void 0),Object(i.a)([Object(o.b)({value:null,types:h.e})],y.prototype,"symbol",null),Object(i.a)([Object(o.b)({type:Boolean,value:!0})],y.prototype,"visible",null),y=s=Object(i.a)([Object(c.a)("esri.Graphic")],y),(y||(y={})).generateUID=b.a;var g=y;t.a=g},1253:function(e,t,r){"use strict";r.r(t),r.d(t,"PropertySearch",(function(){return O}));var s=r(0),i=r(1051),a=(r(1109),r(105)),n=r(866),o=r(92);let c,l,u,d;const p=(e,t,r,s,i,a,o,c,l)=>new n.a({placeholder:e,name:t,maxSuggestions:6,getSuggestions:e=>((e,t,r,s,i,a,n,o)=>{const c=[];return a.forEach((t=>{n?c.push(`${t} LIKE '${e.suggestTerm.toUpperCase()}%'`):c.push(`${t} LIKE '%${e.suggestTerm.toUpperCase()}%'`)})),r.queryFeatures({returnDistinctValues:!0,outFields:s,returnGeometry:!1,num:o.activeSource?50:6,where:c.join(" OR ")}).then((r=>((e,t,r)=>{const s=[],i=[];for(let a=0;a<r.length;a++)0===r[a].attributes[t].indexOf(e)?s.push(r[a]):i.push(r[a]);return s.sort(),i.sort(),s.concat(i)})(e.suggestTerm.toUpperCase(),a[0],r.features).map((r=>({key:t,text:r.getAttribute(s[0]),sourceIndex:e.sourceIndex})))))})(e,t,r,s,0,a,o,l),getResults:e=>r.queryFeatures({where:`${i[0]} = '${e.suggestResult.text.toUpperCase()}'`,outFields:c}).then((e=>e.features.map((e=>({feature:e,name:t})))))}),h=e=>o.c((t=>{const r=c.relationships.find((e=>"CONDO_PROPERTY"===e.name));c.queryRelatedFeatures({relationshipId:null===r||void 0===r?void 0:r.id,objectIds:e,outFields:["OBJECTID","REID"],returnGeometry:!1}).then((e=>{const r=[];for(const t in e)e[t].features.forEach((e=>{r.push(e.getAttribute("OBJECTID"))}));d.queryFeatures({objectIds:r,outFields:["*"],returnGeometry:!0,outSpatialReference:{wkid:102100}}).then((e=>{u.view.goTo({target:e.features}),t(e.features)}))}))})),b=(e,t)=>o.c(((r,s)=>{const i={outFields:["*"]};""!=e?i.where=e:i.objectIds=t,c.queryFeatures(i).then((e=>{const t=[];e.features.forEach((e=>{t.push(e.getAttribute("OBJECTID"))})),h(t).then((t=>{if(e.features.length>1&&r({properties:t,features:e.features}),1===e.features.length){const s=e.features[0];s.geometry=t[0].geometry,s.layer=c,r({properties:t,features:e.features,feature:s})}s("no results")}))}))})),y=(e,t,r,s)=>o.c((i=>{var a;e||"Owner"!==t||(e=c),!e&&["Site Address","Street Name"].includes(t)&&(e=l);const n=[];r.forEach((e=>{n.push(e.feature.getAttribute("OBJECTID"))}));let u="";4===(null===(a=e)||void 0===a?void 0:a.layerId)?(u=`${"Street Name"===t?"FULL_STREET_NAME":"SITE_ADDRESS"} = '${s}'`,((e,t)=>o.c((r=>{const s=t.relationships.find((e=>"ADDRESSES_CONDO"===e.name)),i={outFields:["*"],objectIds:e,relationshipId:null===s||void 0===s?void 0:s.id};t.queryRelatedFeatures(i).then((e=>{const t=[],s=[];for(const r in e)e[r].features.forEach((e=>{t.push(e.getAttribute("OBJECTID")),s.push(e)}));h(t).then((e=>{if(s.length>1&&r({properties:e,features:s}),1===s.length){const t=s[0];t.geometry=e[0].geometry,t.layer=c,r({properties:e,features:s,feature:t})}}))}))})))(n,e).then((e=>{e?i(e):b(u,n).then((e=>{i(e)}))}))):b(u,n).then((e=>{i(e)}))})),g=e=>o.c((t=>{if(!u.viewModel.selectedSuggestion){let s=[];var r;if(u.activeSource)s=null===(r=u.activeSource)||void 0===r?void 0:r.searchFields;const i=((e,t)=>{let r="";return e.length?(e.includes("OWNER")&&(r=`OWNER like '_%${t.toUpperCase()}%'`),e.includes("PIN_NUM")&&(r=`PIN_NUM like '%${t.toUpperCase()}%'`),e.includes("REID")&&(r=`REID like '%${t.toUpperCase()}%'`)):r=`SITE_ADDRESS like '%${t.toUpperCase()}%' OR FULL_STREET_NAME like '%${t.toUpperCase()}%' OR OWNER like '%${t.toUpperCase()}%' OR REID like '${t.toUpperCase()}%' OR PIN_NUM like '${t.toUpperCase()}%'`,r})(s,e.searchTerm);t(((e,t)=>o.c((r=>{var s;null===(s=document.querySelector(".esri-search__warning-menu"))||void 0===s||s.setAttribute("style","visibility: hidden");const i=[];t.queryFeatures({where:e,outFields:["*"]}).then((e=>{e.features.forEach((e=>{i.push(e.getAttribute("OBJECTID"))})),i.length&&h(i).then((t=>{r({features:e.features,properties:t})}))}))})))(i,c))}e.numResults&&y(e.results[0].source.layer,e.results[0].source.name,e.results[0].results,e.searchTerm).then((e=>{t(e)}))})),m=e=>(19===e.length&&"."===e[4]&&[e[7],e[10],e[15]].every((e=>" "===e))&&(e=e.substring(0,4)+e.substring(8,10)+e.substring(11,15)),e);var f=r(1);const O=e=>{const t=Object(s.useRef)(null),r=Object(s.useRef)(),[n,o]=Object(s.useState)(!1);return Object(s.useEffect)((()=>{if(!n){t.current;const n=new i.a({container:t.current,view:e.view,allPlaceholder:"Address, owner, PIN, or REID",includeDefaultSources:!1,popupEnabled:!1});r.current=n,n.sources=(s=e.addressTable,h=e.condosTable,b=e.propertyLayer,c=h,l=s,d=b,u=y=n,new a.a([p("example: 222 W HARGETT ST","Site Address",s,["ADDRESS"],["ADDRESS"],["ADDRESS"],!0,["ADDRESS","REA_REID","OBJECTID"],y),p("example: SMITH, JOHN","Owner",h,["OWNER"],["OWNER"],["OWNER"],!1,["OWNER","OBJECTID"],y),p("PIN","PIN",h,["PIN_NUM"],["PIN_NUM"],["PIN_NUM"],!0,["PIN_NUM","OBJECTID"],y),p("REID","REID",h,["REID"],["REID"],["REID"],!0,["REID","OBJECTID"],y),p("example: W HARGETT ST","Street Name",s,["STREET","ADDR_LIST"],["STREET"],["STREET","STREET_NODIR"],!1,["STREET","REA_REID","OBJECTID"],y)])),n.on("search-complete",(t=>{g(t).then((t=>{e.searchComplete(t)}))})),n.watch("searchTerm",(e=>{e!=m(e)&&(n.searchTerm=m(e))})),o(!0)}var s,h,b,y}),[e.view,e.addressTable,e.condosTable,e.propertyLayer,e.searchComplete]),Object(s.useEffect)((()=>{"OBJECTID IS NULL"!=e.where&&b(e.where,[]).then((t=>{e.searchComplete(t)})).catch((e=>{console.log(e)}))}),[e.where]),Object(f.jsxs)("div",{className:"flex",children:[Object(f.jsx)("div",{ref:t}),Object(f.jsxs)("calcite-tooltip-manager",{children:[Object(f.jsx)("calcite-action",{id:"propertyClear",icon:"trash",scale:"s",onClick:()=>{var t;null===(t=r.current)||void 0===t||t.clear(),e.clear()}}),Object(f.jsx)("calcite-tooltip",{label:"Tooltip label","reference-element":"propertyClear",placement:"bottom",children:"Clear selected properties"})]})]})};t.default=O},131:function(e,t,r){"use strict";var s,i=r(81),a=(r(79),r(90)),n=(r(80),r(87),r(84)),o=r(100),c=r(83),l=(r(82),r(85),r(86),r(89));let u=s=class extends l.a{constructor(e){super(e),this.name=null,this.code=null}clone(){return new s({name:this.name,code:this.code})}};Object(i.a)([Object(n.b)({type:String,json:{write:!0}})],u.prototype,"name",void 0),Object(i.a)([Object(n.b)({type:[String,Number],json:{write:!0}})],u.prototype,"code",void 0),u=s=Object(i.a)([Object(c.a)("esri.layers.support.CodedValue")],u);var d,p=u,h=r(118);let b=d=class extends h.a{constructor(e){super(e),this.codedValues=null,this.type="coded-value"}getName(e){let t=null;if(this.codedValues){const r=String(e);this.codedValues.some((e=>(String(e.code)===r&&(t=e.name),!!t)))}return t}clone(){return new d({codedValues:Object(a.a)(this.codedValues),name:this.name})}};Object(i.a)([Object(n.b)({type:[p],json:{write:!0}})],b.prototype,"codedValues",void 0),Object(i.a)([Object(o.a)({codedValue:"coded-value"})],b.prototype,"type",void 0),b=d=Object(i.a)([Object(c.a)("esri.layers.support.CodedValueDomain")],b);var y=b;t.a=y},133:function(e,t,r){"use strict";var s,i=r(81),a=(r(79),r(80),r(87),r(84),r(100)),n=r(83),o=(r(82),r(85),r(86),r(118));let c=s=class extends o.a{constructor(e){super(e),this.type="inherited"}clone(){return new s}};Object(i.a)([Object(a.a)({inherited:"inherited"})],c.prototype,"type",void 0),c=s=Object(i.a)([Object(n.a)("esri.layers.support.InheritedDomain")],c);var l=c;t.a=l},134:function(e,t,r){"use strict";var s,i=r(81),a=(r(79),r(80),r(87),r(84)),n=r(100),o=r(83),c=(r(82),r(85),r(86),r(118));let l=s=class extends c.a{constructor(e){super(e),this.maxValue=null,this.minValue=null,this.type="range"}clone(){return new s({maxValue:this.maxValue,minValue:this.minValue,name:this.name})}};Object(i.a)([Object(a.b)({type:Number,json:{type:[Number],read:{source:"range",reader:(e,t)=>t.range&&t.range[1]},write:{enabled:!1,overridePolicy(){return{enabled:null!=this.maxValue&&null==this.minValue}},target:"range",writer(e,t,r){t[r]=[this.minValue||0,e]}}}})],l.prototype,"maxValue",void 0),Object(i.a)([Object(a.b)({type:Number,json:{type:[Number],read:{source:"range",reader:(e,t)=>t.range&&t.range[0]},write:{target:"range",writer(e,t,r){t[r]=[e,this.maxValue||0]}}}})],l.prototype,"minValue",void 0),Object(i.a)([Object(n.a)({range:"range"})],l.prototype,"type",void 0),l=s=Object(i.a)([Object(o.a)("esri.layers.support.RangeDomain")],l);var u=l;t.a=u},139:function(e,t,r){"use strict";r.d(t,"a",(function(){return i})),r.d(t,"b",(function(){return n})),r.d(t,"c",(function(){return a}));var s=r(82);function i(e,t){let r={query:e};return t&&(r={...t,...r},r.query={...r.query,...t.query}),r}function a(e){return"string"==typeof e?Object(s.J)(e):e}function n(e,t,r){const s={};for(const i in e){if("declaredClass"===i)continue;const a=e[i];if(null!=a&&"function"!=typeof a)if(Array.isArray(a)){s[i]=[];for(let e=0;e<a.length;e++)s[i][e]=n(a[e])}else if("object"==typeof a)if(a.toJSON){const e=a.toJSON(r&&r[i]);s[i]=t?e:JSON.stringify(e)}else s[i]=t?a:JSON.stringify(a);else s[i]=a}return s}},146:function(e,t,r){"use strict";r.d(t,"a",(function(){return s})),r.d(t,"b",(function(){return p})),r.d(t,"c",(function(){return d})),r.d(t,"d",(function(){return u})),r.d(t,"e",(function(){return l}));r(79);var s,i,a=r(118),n=r(131),o=r(133),c=r(134);function l(e,t){switch(e.type){case"range":{const r="range"in e?e.range[0]:e.minValue,i="range"in e?e.range[1]:e.maxValue;if(+t<r||+t>i)return s.VALUE_OUT_OF_RANGE;break}case"coded-value":case"codedValue":if(null==e.codedValues||e.codedValues.every((e=>null==e||e.code!==t)))return s.INVALID_CODED_VALUE}return null}(i=s||(s={})).VALUE_OUT_OF_RANGE="domain-validation-error::value-out-of-range",i.INVALID_CODED_VALUE="domain-validation-error::invalid-coded-value";const u={key:"type",base:a.a,typeMap:{range:c.a,"coded-value":n.a,inherited:o.a}};function d(e){if(e&&"range"===e.type)return{min:"range"in e?e.range[0]:e.minValue,max:"range"in e?e.range[1]:e.maxValue}}function p(e){if(!e||!e.type)return null;switch(e.type){case"range":return c.a.fromJSON(e);case"codedValue":return n.a.fromJSON(e);case"inherited":return o.a.fromJSON(e)}return null}},149:function(e,t,r){"use strict";r.d(t,"a",(function(){return u})),r.d(t,"b",(function(){return l})),r.d(t,"c",(function(){return o})),r.d(t,"d",(function(){return c})),r.d(t,"e",(function(){return n}));var s=r(88),i=r(97);r(99);let a;async function n(){return a||(a=(async()=>{const e=await Promise.all([r.e(31),r.e(134)]).then(r.bind(null,380));return await e.arcade.load(),{arcade:e.arcade,arcadeUtils:e,Dictionary:e.Dictionary,Feature:e.arcadeFeature}})()),a}const o=(e,t,r)=>u.create(e,t,r,null,["$feature"]),c=(e,t,r)=>u.create(e,t,r,null,["$feature","$view"]),l=(e,t,r,s)=>u.create(e,t,r,s,["$feature","$view"]);class u{constructor(e,t,r,s,i,a,n,o){this.script=e,this.evaluate=i,this.fields=n,this._syntaxTree=s,this._arcade=t,this._arcadeDictionary=r,this._arcadeFeature=a,this._spatialReference=o,this._referencesGeometry=t.scriptTouchesGeometry(this._syntaxTree),this._referencesScale=this._arcade.referencesMember(this._syntaxTree,"scale")}static async create(e,t,r,a,o,c){const{arcade:l,Feature:d,Dictionary:p}=await n(),h=i.a.fromJSON(t),b=l.parseScript(e,c),y=o.reduce(((e,t)=>({...e,[t]:null})),{});let g=null;Object(s.k)(a)&&(g=new p(a),g.immutable=!0,y.$config=null);const m=l.scriptUsesGeometryEngine(b)&&l.enableGeometrySupport(),f=l.scriptUsesFeatureSet(b)&&l.enableFeatureSetSupport(),O=l.scriptIsAsync(b)&&l.enableAsyncSupport(),v={vars:y,spatialReference:h,useAsync:!!O},j=new p;j.immutable=!1,j.setField("scale",0);const S=l.compileScript(b,v);return await Promise.all([m,f,O]),new u(e,l,p,b,(e=>("$view"in e&&e.$view&&(j.setField("scale",e.$view.scale),e.$view=j),g&&(e.$config=g),S({vars:e,spatialReference:h}))),new d,r,h)}repurposeFeature(e){return e.geometry&&!e.geometry.spatialReference&&(e.geometry.spatialReference=this._spatialReference),this._arcadeFeature.repurposeFromGraphicLikeObject(e.geometry,e.attributes,{fields:this.fields}),this._arcadeFeature}repurposeAdapter(e){return this._arcadeFeature.repurposeFromAdapter(e,{fields:this.fields}),this._arcadeFeature}createDictionary(){return new this._arcadeDictionary}referencesMember(e){return this._arcade.referencesMember(this._syntaxTree,e)}referencesFunction(e){return this._arcade.referencesFunction(this._syntaxTree,e)}referencesGeometry(){return this._referencesGeometry}referencesScale(){return this._referencesScale}extractFieldLiterals(e){return this._arcade.extractFieldLiterals(this._syntaxTree,e)}}},170:function(e,t,r){"use strict";r.d(t,"a",(function(){return o})),r.d(t,"b",(function(){return c})),r.d(t,"c",(function(){return l})),r.d(t,"d",(function(){return u})),r.d(t,"e",(function(){return p})),r.d(t,"f",(function(){return h})),r.d(t,"g",(function(){return d}));var s=r(110),i=r(97),a=r(136);function n(e){return new i.a({wkt:`GEOCCS["Spherical geocentric",\n    DATUM["Not specified",\n      SPHEROID["Sphere",${e.radius},0]],\n    PRIMEM["Greenwich",0.0,\n      AUTHORITY["EPSG","8901"]],\n    UNIT["m",1.0],\n    AXIS["Geocentric X",OTHER],\n    AXIS["Geocentric Y",EAST],\n    AXIS["Geocentric Z",NORTH]\n  ]`})}const o=n(a.a),c=n(a.b),l=n(a.c),u=new i.a({wkt:`GEOCCS["WGS 84",\n  DATUM["WGS_1984",\n    SPHEROID["WGS 84",${a.a.radius},298.257223563,\n      AUTHORITY["EPSG","7030"]],\n    AUTHORITY["EPSG","6326"]],\n  PRIMEM["Greenwich",0,\n    AUTHORITY["EPSG","8901"]],\n  UNIT["m",1.0,\n    AUTHORITY["EPSG","9001"]],\n  AXIS["Geocentric X",OTHER],\n  AXIS["Geocentric Y",OTHER],\n  AXIS["Geocentric Z",NORTH],\n  AUTHORITY["EPSG","4978"]\n]`});function d(e){return e&&(Object(s.g)(e)||e===c)?c:e&&(Object(s.h)(e)||e===l)?l:o}function p(e){return e&&(Object(s.g)(e)||e===c)?a.b:e&&(Object(s.h)(e)||e===l)?a.c:a.a}function h(e){return Object(s.k)(e)?a.b:Object(s.l)(e)?a.c:a.a}},186:function(e,t,r){"use strict";r.d(t,"a",(function(){return i}));let s=0;function i(){return++s}},198:function(e,t,r){"use strict";r.d(t,"a",(function(){return i})),r.d(t,"b",(function(){return a})),r.d(t,"c",(function(){return n})),r.d(t,"d",(function(){return o}));var s=r(92);function i(e,t,r){return Object(s.j)(e.map(((e,s)=>t.apply(r,[e,s]))))}function a(e,t,r){return Object(s.j)(e.map(((e,s)=>t.apply(r,[e,s])))).then((e=>e.map((e=>e.value))))}function n(e){return e.then((e=>({ok:!0,value:e}))).catch((e=>({ok:!1,error:e})))}function o(e){return e.then((e=>({ok:!0,value:e}))).catch((e=>(Object(s.t)(e),{ok:!1,error:e})))}},258:function(e,t,r){"use strict";function s(){return function(e,t){if(!e[t])throw new TypeError(`Cannot auto bind undefined function '${t}'`);return{value:i(e[t])}}}function i(e){return function(t,...r){!function(e){const{type:t}=e;return e instanceof KeyboardEvent||"keyup"===t||"keydown"===t||"keypress"===t}(t)?e.call(this,t,...r):"Enter"!==t.key&&" "!==t.key||(t.preventDefault(),t.stopPropagation(),t.target.click())}}r.d(t,"a",(function(){return s}))},298:function(e,t,r){"use strict";function s(e){return t=>{t.hasOwnProperty("_delegatedEventNames")||(t._delegatedEventNames=t._delegatedEventNames?t._delegatedEventNames.slice():[]);const r=t._delegatedEventNames,s=Array.isArray(e)?e:function(e){return e.split(",").map((e=>e.trim()))}(e);r.push(...s)}}r.d(t,"a",(function(){return s}))},311:function(e,t,r){"use strict";r.r(t);var s=r(81),i=(r(79),r(90)),a=r(88),n=r(80),o=r(87),c=r(84),l=r(96),u=r(83),d=r(91),p=r(82),h=(r(85),r(86),r(89)),b=r(101),y=r(159),g=r(182),m=r(249),f=r(114),O=r(95);const v=n.a.getLogger("esri.portal.PortalItemResource");let j=class extends O.a{constructor(e){super(e),this.portalItem=null}normalizeCtorArgs(e){return e&&e.portalItem&&e.path?{...e,path:this.normalizePath(e.path,e.portalItem)}:e}set path(e){Object(a.k)(e)&&Object(p.s)(e)?v.error("portalitemresource:invalid-path","A portal item resource path must be relative"):this._set("path",e)}_castPath(e){return this.normalizePath(e,this.portalItem)}get url(){return this.portalItem&&this.path?`${this.portalItem.itemUrl}/resources/${this.path}`:null}get itemRelativeUrl(){return this.portalItem&&this.path?`./resources/${this.path}`:null}fetch(e="json",t){const r=this.url;if(Object(a.j)(r))throw new d.a("portal-item-resource:fetch","Portal item resource does not refer to a valid item or path");return this.portalItem.portal._request(r,{responseType:e,signal:Object(a.i)(t,"signal")})}async update(e,t){return(await r.e(19).then(r.bind(null,775))).addOrUpdateResource(this,"update",e,t)}hasPath(){return Object(a.k)(this.path)}normalizePath(e,t){return Object(a.j)(e)?e:(e=e.replace(/^\/+/,""),Object(a.k)(t)&&Object(p.s)(e)&&(e=Object(p.B)(e,t.itemUrl)),e.replace(/^\/+/,"").replace(/^(\.\/)?resources\//,""))}};Object(s.a)([Object(c.b)()],j.prototype,"portalItem",void 0),Object(s.a)([Object(c.b)({type:String,value:null})],j.prototype,"path",null),Object(s.a)([Object(f.a)("path")],j.prototype,"_castPath",null),Object(s.a)([Object(c.b)({type:String,readOnly:!0})],j.prototype,"url",null),Object(s.a)([Object(c.b)({type:String,readOnly:!0})],j.prototype,"itemRelativeUrl",null),j=Object(s.a)([Object(u.a)("esri.portal.PortalItemResource")],j);var S=j;let w=class extends O.a{constructor(e){super(e),this.created=null,this.rating=null}};Object(s.a)([Object(c.b)()],w.prototype,"created",void 0),Object(s.a)([Object(c.b)()],w.prototype,"rating",void 0),w=Object(s.a)([Object(u.a)("esri.portal.PortalRating")],w);var _,T=w;let x=_=class extends(Object(h.b)(g.a)){constructor(e){super(e),this.access=null,this.accessInformation=null,this.applicationProxies=null,this.avgRating=null,this.categories=null,this.created=null,this.culture=null,this.description=null,this.extent=null,this.groupCategories=null,this.id=null,this.itemControl=null,this.licenseInfo=null,this.modified=null,this.name=null,this.numComments=null,this.numRatings=null,this.numViews=null,this.owner=null,this.ownerFolder=null,this.portal=null,this.screenshots=null,this.size=null,this.snippet=null,this.sourceJSON=null,this.tags=null,this.title=null,this.type=null,this.typeKeywords=null,this.url=null}static from(e){return Object(o.d)(_,e)}destroy(){this.portal=null}get displayName(){const e=this.type,t=this.typeKeywords||[];let r=e;return"Feature Service"===e||"Feature Collection"===e?r=t.indexOf("Table")>-1?"Table":t.indexOf("Route Layer")>-1?"Route Layer":t.indexOf("Markup")>-1?"Markup":"Feature Layer":"Image Service"===e?r=t.indexOf("Elevation 3D Layer")>-1?"Elevation Layer":t.indexOf("Tiled Imagery")>-1?"Tiled Imagery Layer":"Imagery Layer":"Scene Service"===e?r="Scene Layer":"Scene Package"===e?r="Scene Layer Package":"Stream Service"===e?r="Feature Layer":"Geoprocessing Service"===e&&this.portal&&this.portal.isPortal?r=t.indexOf("Web Tool")>-1?"Tool":"Geoprocessing Service":"Geocoding Service"===e?r="Locator":"Geoenrichment Service"===e?r="GeoEnrichment Service":"Microsoft Powerpoint"===e?r="Microsoft PowerPoint":"GeoJson"===e?r="GeoJSON":"Globe Service"===e?r="Globe Layer":"Vector Tile Service"===e?r="Tile Layer":"netCDF"===e?r="NetCDF":"Map Service"===e?r=-1===t.indexOf("Spatiotemporal")&&(t.indexOf("Hosted Service")>-1||t.indexOf("Tiled")>-1)&&-1===t.indexOf("Relational")?"Tile Layer":"Map Image Layer":e&&e.toLowerCase().indexOf("add in")>-1?r=e.replace(/(add in)/gi,"Add-In"):"datastore catalog service"===e?r="Big Data File Share":"Compact Tile Package"===e&&(r="Tile Package (tpkx)"),r}readExtent(e){return e&&e.length?new b.a(e[0][0],e[0][1],e[1][0],e[1][1]):null}get iconUrl(){const e=this.type&&this.type.toLowerCase()||"",t=this.typeKeywords||[];let r,s=!1,i=!1,a=!1,n=!1,o=!1,c=!1;return e.indexOf("service")>0||"feature collection"===e||"kml"===e||"wms"===e||"wmts"===e||"wfs"===e?(s=t.indexOf("Hosted Service")>-1,"feature service"===e||"feature collection"===e||"kml"===e||"wfs"===e?(i=t.indexOf("Table")>-1,a=t.indexOf("Route Layer")>-1,n=t.indexOf("Markup")>-1,o=-1!==t.indexOf("Spatiotemporal"),c=-1!==t.indexOf("UtilityNetwork"),r=o&&i?"spatiotemporaltable":i?"table":a?"routelayer":n?"markup":o?"spatiotemporal":s?"featureshosted":c?"utilitynetwork":"features"):r="map service"===e||"wms"===e||"wmts"===e?s||t.indexOf("Tiled")>-1||"wmts"===e?"maptiles":"mapimages":"scene service"===e?t.indexOf("Line")>-1?"sceneweblayerline":t.indexOf("3DObject")>-1?"sceneweblayermultipatch":t.indexOf("Point")>-1?"sceneweblayerpoint":t.indexOf("IntegratedMesh")>-1?"sceneweblayermesh":t.indexOf("PointCloud")>-1?"sceneweblayerpointcloud":t.indexOf("Polygon")>-1?"sceneweblayerpolygon":t.indexOf("Building")>-1?"sceneweblayerbuilding":"sceneweblayer":"image service"===e?t.indexOf("Elevation 3D Layer")>-1?"elevationlayer":t.indexOf("Tiled Imagery")>-1?"tiledimagerylayer":"imagery":"stream service"===e?"streamlayer":"vector tile service"===e?"vectortile":"datastore catalog service"===e?"datastorecollection":"geocoding service"===e?"geocodeservice":"geoprocessing service"===e&&t.indexOf("Web Tool")>-1&&this.portal&&this.portal.isPortal?"tool":"layers"):r="web map"===e||"cityengine web scene"===e?"maps":"web scene"===e?t.indexOf("ViewingMode-Local")>-1?"webscenelocal":"websceneglobal":"web mapping application"===e||"mobile application"===e||"application"===e||"operation view"===e||"desktop application"===e?"apps":"map document"===e||"map package"===e||"published map"===e||"scene document"===e||"globe document"===e||"basemap package"===e||"mobile basemap package"===e||"mobile map package"===e||"project package"===e||"project template"===e||"pro map"===e||"layout"===e||"layer"===e&&t.indexOf("ArcGIS Pro")>-1||"explorer map"===e&&t.indexOf("Explorer Document")?"mapsgray":"service definition"===e||"csv"===e||"shapefile"===e||"cad drawing"===e||"geojson"===e||"360 vr experience"===e||"netcdf"===e||"administrative report"===e?"datafiles":"explorer add in"===e||"desktop add in"===e||"windows viewer add in"===e||"windows viewer configuration"===e?"appsgray":"arcgis pro add in"===e||"arcgis pro configuration"===e?"addindesktop":"rule package"===e||"file geodatabase"===e||"sqlite geodatabase"===e||"csv collection"===e||"kml collection"===e||"windows mobile package"===e||"map template"===e||"desktop application template"===e||"gml"===e||"arcpad package"===e||"code sample"===e||"form"===e||"document link"===e||"earth configuration"===e||"operations dashboard add in"===e||"rules package"===e||"image"===e||"workflow manager package"===e||"explorer map"===e&&t.indexOf("Explorer Mapping Application")>-1||t.indexOf("Document")>-1?"datafilesgray":"network analysis service"===e||"geoprocessing service"===e||"geodata service"===e||"geometry service"===e||"geoprocessing package"===e||"locator package"===e||"geoprocessing sample"===e||"workflow manager service"===e?"toolsgray":"layer"===e||"layer package"===e||"explorer layer"===e?"layersgray":"scene package"===e?"scenepackage":"mobile scene package"===e?"mobilescenepackage":"tile package"===e||"compact tile package"===e?"tilepackage":"task file"===e?"taskfile":"report template"===e?"report-template":"statistical data collection"===e?"statisticaldatacollection":"insights workbook"===e?"workbook":"insights model"===e?"insightsmodel":"insights page"===e?"insightspage":"insights theme"===e?"insightstheme":"hub initiative"===e?"hubinitiative":"hubpage"===e?"hubpage":"hub event"===e?"hubevent":"hub site application"===e?"hubsite":"relational database connection"===e?"relationaldatabaseconnection":"big data file share"===e?"datastorecollection":"image collection"===e?"imagecollection":"style"===e?"style":"desktop style"===e?"desktopstyle":"dashboard"===e?"dashboard":"raster function template"===e?"rasterprocessingtemplate":"vector tile package"===e?"vectortilepackage":"ortho mapping project"===e?"orthomappingproject":"ortho mapping template"===e?"orthomappingtemplate":"solution"===e?"solutions":"geopackage"===e?"geopackage":"deep learning package"===e?"deeplearningpackage":"real time analytic"===e?"realtimeanalytics":"big data analytic"===e?"bigdataanalytics":"feed"===e?"feed":"excalibur imagery project"===e?"excaliburimageryproject":"notebook"===e?"notebook":"storymap"===e?"storymap":"survey123 add in"===e?"survey123addin":"mission"===e?"mission":"mission report"===e?"missionreport":"quickcapture project"===e?"quickcaptureproject":"pro report"===e?"proreport":"urban model"===e?"urbanmodel":"web experience"===e?"experiencebuilder":"web experience template"===e?"webexperiencetemplate":"workflow"===e?"workflow":"insights script"===e?"insightsscript":"kernel gateway connection"===e?"kernelgatewayconnection":"hub initiative template"===e?"hubinitiativetemplate":"storymap theme"===e?"storymaptheme":"knowledge graph"===e?"knowledgegraph":"maps",r?Object(y.a)("esri/images/portal/"+r+"16.png"):null}get isLayer(){return["Map Service","Feature Service","Feature Collection","Scene Service","Image Service","Stream Service","Vector Tile Service","WMTS","WMS"].indexOf(this.type)>-1}get itemUrl(){const e=this.get("portal.restUrl");return e?e+"/content/items/"+this.id:null}get thumbnailUrl(){const e=this.itemUrl,t=this.thumbnail;return e&&t?this.portal._normalizeUrl(`${e}/info/${t}?f=json`):null}get userItemUrl(){const e=this.get("portal.restUrl");if(!e)return null;const t=this.owner||this.get("portal.user.username");return t?`${e}/content/users/${this.ownerFolder?`${t}/${this.ownerFolder}`:t}/items/${this.id}`:null}load(e){this.portal||(this.portal=m.a.getDefault());const t=this.portal.load(e).then((()=>this.sourceJSON?this.sourceJSON:this.id&&this.itemUrl?this.portal._request(this.itemUrl,{signal:Object(a.k)(e)?e.signal:null}):{})).then((e=>{this.sourceJSON=e,this.read(e)}));return this.addResolvingPromise(t),Promise.resolve(this)}addRating(e){const t={method:"post",query:{}};return e instanceof T&&(e=e.rating),isNaN(e)||"number"!=typeof e||(t.query.rating=e),this.portal._request(this.itemUrl+"/addRating",t).then((()=>new T({rating:e,created:new Date})))}clone(){const e={access:this.access,accessInformation:this.accessInformation,applicationProxies:Object(i.a)(this.applicationProxies),avgRating:this.avgRating,categories:Object(i.a)(this.categories),created:Object(i.a)(this.created),culture:this.culture,description:this.description,extent:Object(i.a)(this.extent),groupCategories:Object(i.a)(this.groupCategories),id:this.id,itemControl:this.itemControl,licenseInfo:this.licenseInfo,modified:Object(i.a)(this.modified),name:this.name,numComments:this.numComments,numRatings:this.numRatings,numViews:this.numViews,owner:this.owner,ownerFolder:this.ownerFolder,portal:this.portal,screenshots:Object(i.a)(this.screenshots),size:this.size,snippet:this.snippet,tags:Object(i.a)(this.tags),thumbnail:this.thumbnail,title:this.title,type:this.type,typeKeywords:Object(i.a)(this.typeKeywords),url:this.url};return this.loaded&&(e.loadStatus="loaded"),new _({sourceJSON:this.sourceJSON}).set(e)}createPostQuery(){const e=this.toJSON();for(const t in e)"tags"===t&&null!==e[t]&&(e[t]=e[t].join(", ")),"typeKeywords"===t&&null!==e[t]&&(e[t]=e[t].join(", ")),"extent"===t&&e[t]&&(e[t]=JSON.stringify(e[t]));return e}deleteRating(){return this.portal._request(this.itemUrl+"/deleteRating",{method:"post"}).then((()=>{}))}fetchData(e="json",t){return this.portal._request(this.itemUrl+"/data",{responseType:e,...t})}fetchRating(e){return this.portal._request(this.itemUrl+"/rating",e).then((e=>null!=e.rating?(e.created=new Date(e.created),new T(e)):null))}fetchRelatedItems(e,t){return this.portal._requestToTypedArray(this.itemUrl+"/relatedItems",{query:e,...t},_)}getThumbnailUrl(e){let t=this.thumbnailUrl;return t&&e&&(t+=`&w=${e}`),t}reload(){return this.portal._request(this.itemUrl,{cacheBust:!0}).then((e=>(this.sourceJSON=e,this.read(e),this)))}update(e){return this.id?this.load().then((()=>this.portal._signIn())).then((()=>{const t=e&&e.data,r={method:"post"};r.query=this.createPostQuery();for(const e in r.query)null===r.query[e]&&(r.query[e]="");return r.query.clearEmptyFields=!0,null!=t&&("string"==typeof t?r.query.text=t:"object"==typeof t&&(r.query.text=JSON.stringify(t))),this.portal._request(`${this.userItemUrl}/update`,r).then((()=>this.reload()))})):Promise.reject(new d.a("portal:item-does-not-exist","The item does not exist yet and cannot be updated"))}updateThumbnail(e){return this.id?this.load().then((()=>this.portal._signIn())).then((()=>{const t=e.thumbnail,r=e.filename,s={method:"post"};if("string"==typeof t)Object(p.u)(t)?s.query={data:t}:s.query={url:Object(p.z)(t)},Object(a.k)(r)&&(s.query.filename=r);else{const e=new FormData;Object(a.k)(r)?e.append("file",t,r):e.append("file",t),s.body=e}return this.portal._request(`${this.userItemUrl}/updateThumbnail`,s).then((()=>this.reload()))})):Promise.reject(new d.a("portal:item-does-not-exist","The item does not exist yet and cannot be updated"))}async fetchResources(e={},t){return(await r.e(19).then(r.bind(null,775))).fetchResources(this,e,t)}async addResource(e,t,s){const i=await r.e(19).then(r.bind(null,775));return e.portalItem=this,i.addOrUpdateResource(e,"add",t,s)}async removeResource(e,t){const s=await r.e(19).then(r.bind(null,775));if(e.portalItem&&e.portalItem.itemUrl!==this.itemUrl)throw new d.a("removeresource:portal-item-mismatch","The portal item associated with the provided resource does not match the item");return s.removeResource(this,e,t)}async removeAllResources(e){return(await r.e(19).then(r.bind(null,775))).removeAllResources(this,e)}resourceFromPath(e){return new S({portalItem:this,path:e})}toJSON(){const e=this.extent,t={created:this.created&&this.created.getTime(),description:this.description,extent:e&&[[e.xmin,e.ymin],[e.xmax,e.ymax]],id:this.id,modified:this.modified&&this.modified.getTime(),name:this.name,owner:this.owner,ownerFolder:this.ownerFolder,snippet:this.snippet,tags:this.tags,thumbnail:this.thumbnail,title:this.title,type:this.type,typeKeywords:this.typeKeywords,url:this.url};return Object(i.c)(t)}static fromJSON(e){if(!e)return null;if(e.declaredClass)throw new Error("JSON object is already hydrated");return new _({sourceJSON:e})}_getPostQuery(){const e=this.toJSON();for(const t in e)"tags"===t&&null!==e[t]&&(e[t]=e[t].join(", ")),"typeKeywords"===t&&null!==e[t]&&(e[t]=e[t].join(", ")),"extent"===t&&e[t]&&(e[t]=JSON.stringify(e[t]));return e}};Object(s.a)([Object(c.b)({type:["private","shared","org","public"]})],x.prototype,"access",void 0),Object(s.a)([Object(c.b)()],x.prototype,"accessInformation",void 0),Object(s.a)([Object(c.b)({json:{read:{source:"appProxies"}}})],x.prototype,"applicationProxies",void 0),Object(s.a)([Object(c.b)()],x.prototype,"avgRating",void 0),Object(s.a)([Object(c.b)()],x.prototype,"categories",void 0),Object(s.a)([Object(c.b)({type:Date})],x.prototype,"created",void 0),Object(s.a)([Object(c.b)()],x.prototype,"culture",void 0),Object(s.a)([Object(c.b)()],x.prototype,"description",void 0),Object(s.a)([Object(c.b)({readOnly:!0})],x.prototype,"displayName",null),Object(s.a)([Object(c.b)({type:b.a})],x.prototype,"extent",void 0),Object(s.a)([Object(l.a)("extent")],x.prototype,"readExtent",null),Object(s.a)([Object(c.b)()],x.prototype,"groupCategories",void 0),Object(s.a)([Object(c.b)({readOnly:!0})],x.prototype,"iconUrl",null),Object(s.a)([Object(c.b)()],x.prototype,"id",void 0),Object(s.a)([Object(c.b)({readOnly:!0})],x.prototype,"isLayer",null),Object(s.a)([Object(c.b)()],x.prototype,"itemControl",void 0),Object(s.a)([Object(c.b)({readOnly:!0})],x.prototype,"itemUrl",null),Object(s.a)([Object(c.b)()],x.prototype,"licenseInfo",void 0),Object(s.a)([Object(c.b)({type:Date})],x.prototype,"modified",void 0),Object(s.a)([Object(c.b)()],x.prototype,"name",void 0),Object(s.a)([Object(c.b)()],x.prototype,"numComments",void 0),Object(s.a)([Object(c.b)()],x.prototype,"numRatings",void 0),Object(s.a)([Object(c.b)()],x.prototype,"numViews",void 0),Object(s.a)([Object(c.b)()],x.prototype,"owner",void 0),Object(s.a)([Object(c.b)()],x.prototype,"ownerFolder",void 0),Object(s.a)([Object(c.b)({type:m.a})],x.prototype,"portal",void 0),Object(s.a)([Object(c.b)()],x.prototype,"screenshots",void 0),Object(s.a)([Object(c.b)()],x.prototype,"size",void 0),Object(s.a)([Object(c.b)()],x.prototype,"snippet",void 0),Object(s.a)([Object(c.b)()],x.prototype,"sourceJSON",void 0),Object(s.a)([Object(c.b)()],x.prototype,"tags",void 0),Object(s.a)([Object(c.b)()],x.prototype,"thumbnail",void 0),Object(s.a)([Object(c.b)({readOnly:!0})],x.prototype,"thumbnailUrl",null),Object(s.a)([Object(c.b)()],x.prototype,"title",void 0),Object(s.a)([Object(c.b)()],x.prototype,"type",void 0),Object(s.a)([Object(c.b)()],x.prototype,"typeKeywords",void 0),Object(s.a)([Object(c.b)()],x.prototype,"url",void 0),Object(s.a)([Object(c.b)({readOnly:!0})],x.prototype,"userItemUrl",null),x=_=Object(s.a)([Object(u.a)("esri.portal.PortalItem")],x);var I=x;t.default=I},321:function(e,t,r){"use strict";var s=r(81),i=(r(79),r(80),r(87),r(84)),a=r(83),n=r(82),o=(r(85),r(86),r(95));let c=class extends o.a{constructor(...e){super(...e),this.requestOptions=null,this.url=null}normalizeCtorArgs(e,t){return"string"!=typeof e?e:{url:e,...t}}get parsedUrl(){return this._parseUrl(this.url)}_parseUrl(e){return e?Object(n.J)(e):null}_encode(e,t,r){const s={};for(const i in e){if("declaredClass"===i)continue;const a=e[i];if(null!=a&&"function"!=typeof a)if(Array.isArray(a)){s[i]=[];for(let e=0;e<a.length;e++)s[i][e]=this._encode(a[e])}else if("object"==typeof a)if(a.toJSON){const e=a.toJSON(r&&r[i]);s[i]=t?e:JSON.stringify(e)}else s[i]=t?a:JSON.stringify(a);else s[i]=a}return s}};Object(s.a)([Object(i.b)({readOnly:!0})],c.prototype,"parsedUrl",null),Object(s.a)([Object(i.b)()],c.prototype,"requestOptions",void 0),Object(s.a)([Object(i.b)({type:String})],c.prototype,"url",void 0),c=Object(s.a)([Object(a.a)("esri.tasks.Task")],c);var l=c;t.a=l},433:function(e,t,r){"use strict";r.d(t,"a",(function(){return o})),r.d(t,"b",(function(){return c}));var s=r(88),i=r(105),a=r(182),n=r(198);async function o(e,t){return await e.load(),c(e,t)}async function c(e,t){const r=[],o=(...e)=>{for(const t of e)Object(s.j)(t)||(Array.isArray(t)?o(...t):i.a.isCollection(t)?t.forEach((e=>o(e))):a.a.isLoadable(t)&&r.push(t))};t(o);let c=null;if(await Object(n.b)(r,(async e=>{!1!==(await Object(n.c)(function(e){return"loadAll"in e&&"function"==typeof e.loadAll}(e)?e.loadAll():e.load())).ok||c||(c=e)})),c)throw c.loadError;return e}},481:function(e,t,r){"use strict";r.d(t,"a",(function(){return i})),r.d(t,"b",(function(){return a}));var s=r(88);function i(e){return e&&"function"==typeof e.highlight}function a(e,t,r){return Object(s.j)(e)||e>r&&(0===t||e<t)}},498:function(e,t,r){"use strict";r.d(t,"a",(function(){return n}));var s=r(81),i=(r(79),r(80),r(87),r(84)),a=r(83);r(82),r(85),r(86);const n=e=>{let t=class extends e{constructor(...e){super(...e),this.goToOverride=null,this.view=null}callGoTo(e){const{view:t}=this;return this.goToOverride?this.goToOverride(t,e):t.goTo(e.target,e.options)}};return Object(s.a)([Object(i.b)()],t.prototype,"goToOverride",void 0),Object(s.a)([Object(i.b)()],t.prototype,"view",void 0),t=Object(s.a)([Object(a.a)("esri.widgets.support.GoTo")],t),t}},539:function(e,t,r){"use strict";r.d(t,"a",(function(){return b}));var s=r(90),i=r(121),a=r(88),n=r(472),o=r(91);const c=new Set(["bing-maps","imagery","imagery-tile","map-image","open-street-map","tile","unknown","unsupported","vector-tile","web-tile"]),l=new Set(["csv","feature","geo-rss","group","imagery","imagery-tile","kml","map-image","map-notes","tile","unknown","unsupported","vector-tile","web-tile"]);function u(e){return!("feature"!==e.type||e.url||!e.source||"memory"!==e.source.type)}function d(e,t){if(t.restrictedWebMapWriting){const r=function(e){return"basemap"===e.layerContainerType?c:"operational-layers"===e.layerContainerType?l:null}(t);return!Object(a.k)(r)||r.has(e.type)&&!u(e)}return!0}function p(e,t){"maxScale"in e&&(t.maxScale=Object(n.b)(e.maxScale)),"minScale"in e&&(t.minScale=Object(n.b)(e.minScale))}function h(e,t){if(function(e,t){if(u(e)){const r=Object(i.b)("featureCollection.layers",t),s=r&&r[0]&&r[0].layerDefinition;s&&p(e,s)}else"stream"===e.type?p(e,t.layerDefinition=t.layerDefinition||{}):"group"!==e.type&&p(e,t)}(e,t),"blendMode"in e&&(t.blendMode=e.blendMode,"normal"===t.blendMode&&delete t.blendMode),t.opacity=Object(n.b)(e.opacity),t.title=e.title||"Layer",t.visibility=e.visible,"legendEnabled"in e&&"wmts"!==e.type)if(u(e)){const r=t.featureCollection;r&&(r.showLegend=e.legendEnabled)}else t.showLegend=e.legendEnabled}function b(e,t,r){if(!("write"in e)||!e.write)return r&&r.messages&&r.messages.push(new o.a("layer:unsupported",`Layers (${e.title}, ${e.id}) of type '${e.declaredClass}' cannot be persisted`,{layer:e})),null;if(d(e,r)){const t={};return e.write(t,r)?t:null}return Object(a.k)(t)&&h(e,t=Object(s.a)(t)),t}},540:function(e,t,r){"use strict";r.r(t);var s,i=r(81),a=(r(79),r(90)),n=r(88),o=r(80),c=(r(87),r(84)),l=r(83),u=r(94),d=r(82),p=(r(85),r(86),r(92)),h=r(89),b=r(97),y=r(105),g=r(290),m=r(182),f=r(249),O=r(433),v=r(311),j=r(591),S=r(539);let w=0;const _=o.a.getLogger("esri.Basemap");let T=s=class extends(Object(h.b)(m.a)){constructor(e){super(e),this.id=null,this.portalItem=null,this.spatialReference=null,this.thumbnailUrl=null,this.title="Basemap",this.id=Date.now().toString(16)+"-basemap-"+w++,this.baseLayers=new y.a,this.referenceLayers=new y.a;const t=e=>{e.parent&&e.parent!==this&&"remove"in e.parent&&e.parent.remove(e),e.parent=this,"elevation"===e.type&&_.error(`Layer '${e.title}, id:${e.id}' of type '${e.type}' is not supported as a basemap layer and will therefore be ignored.`)},r=e=>{e.parent=null};this.baseLayers.on("after-add",(e=>t(e.item))),this.referenceLayers.on("after-add",(e=>t(e.item))),this.baseLayers.on("after-remove",(e=>r(e.item))),this.referenceLayers.on("after-remove",(e=>r(e.item)))}initialize(){this.when().catch((e=>{_.error("#load()",`Failed to load basemap (title: '${this.title}', id: '${this.id}')`,e)})),this.resourceInfo&&this.read(this.resourceInfo.data,this.resourceInfo.context)}destroy(){var e;const t=this.baseLayers.removeAll();for(const s of t)s.destroy();const r=this.referenceLayers.removeAll();for(const s of r)s.destroy();this.baseLayers.destroy(),this.referenceLayers.destroy(),null==(e=this.portalItem)||e.destroy(),this.portalItem=null}normalizeCtorArgs(e){return e&&"resourceInfo"in e&&(this._set("resourceInfo",e.resourceInfo),delete(e={...e}).resourceInfo),e}set baseLayers(e){this._set("baseLayers",Object(g.b)(e,this._get("baseLayers")))}_writeBaseLayers(e,t,r){const s=[];e?(r={...r,layerContainerType:"basemap"},this.baseLayers.forEach((e=>{const t=Object(S.a)(e,r.webmap?r.webmap.getLayerJSONFromResourceInfo(e):null,r);Object(n.k)(t)&&s.push(t)})),this.referenceLayers.forEach((e=>{const t=Object(S.a)(e,r.webmap?r.webmap.getLayerJSONFromResourceInfo(e):null,r);Object(n.k)(t)&&(t.isReference=!0,s.push(t))})),t.baseMapLayers=s):t.baseMapLayers=s}set referenceLayers(e){this._set("referenceLayers",Object(g.b)(e,this._get("referenceLayers")))}writeTitle(e,t){t.title=e||"Basemap"}load(e){return this.addResolvingPromise(this._loadFromSource(e)),Promise.resolve(this)}loadAll(){return Object(O.a)(this,(e=>{e(this.baseLayers,this.referenceLayers)}))}clone(){const e={id:this.id,title:this.title,portalItem:this.portalItem,baseLayers:this.baseLayers.slice(),referenceLayers:this.referenceLayers.slice()};return this.loaded&&(e.loadStatus="loaded"),new s({resourceInfo:this.resourceInfo}).set(e)}read(e,t){this.resourceInfo||this._set("resourceInfo",{data:e,context:t}),super.read(e,t)}write(e,t){return e=e||{},t&&t.origin||(t={origin:"web-map",...t}),super.write(e,t),!this.loaded&&this.resourceInfo&&this.resourceInfo.data.baseMapLayers&&(e.baseMapLayers=this.resourceInfo.data.baseMapLayers.map((e=>{const t=Object(a.a)(e);return t.url&&Object(d.v)(t.url)&&(t.url=`https:${t.url}`),t.templateUrl&&Object(d.v)(t.templateUrl)&&(t.templateUrl=`https:${t.templateUrl}`),t}))),e}async _loadFromSource(e){const{resourceInfo:t,portalItem:r}=this;Object(p.u)(e);const s=[];if(t){const r=t.context?t.context.url:null;if(s.push(this._loadLayersFromJSON(t.data,r,e)),t.data.id&&!t.data.title){const e=t.data.id;s.push(Object(j.b)(e).then((e=>{e&&this.read({title:e},t.context)})))}}else r&&s.push(this._loadFromItem(r,e));await Promise.all(s)}async _loadLayersFromJSON(e,t,s){const i=this.resourceInfo&&this.resourceInfo.context,a=this.portalItem&&this.portalItem.portal||i&&i.portal||null,n=i&&"web-scene"===i.origin?"web-scene":"web-map",{populateOperationalLayers:o}=await r.e(151).then(r.bind(null,797)),c=[];if(Object(p.u)(s),e.baseMapLayers&&Array.isArray(e.baseMapLayers)){const r={context:{origin:n,url:t,portal:a,layerContainerType:"basemap"},defaultLayerType:"DefaultTileLayer"},s=o(this.baseLayers,e.baseMapLayers.filter((e=>!e.isReference)),r);c.push(s);const i=o(this.referenceLayers,e.baseMapLayers.filter((e=>e.isReference)),r);c.push(i)}await Object(p.j)(c)}async _loadFromItem(e,t){const r=await e.load(t),s=await r.fetchData("json",t),i=Object(d.J)(e.itemUrl);return this._set("resourceInfo",{data:s.baseMap,context:{origin:"web-map",portal:e.portal||f.a.getDefault(),url:i}}),this.read(this.resourceInfo.data,this.resourceInfo.context),this.read({spatialReference:s.spatialReference},this.resourceInfo.context),this.read({title:e.title,thumbnailUrl:e.thumbnailUrl},{origin:"portal-item",portal:e.portal||f.a.getDefault(),url:i}),this._loadLayersFromJSON(this.resourceInfo.data,i,t)}static fromId(e){const t=j.a[e];return t?s.fromJSON(t):null}};Object(i.a)([Object(c.b)({json:{write:{ignoreOrigin:!0,target:"baseMapLayers",writer(e,t,r,s){this._writeBaseLayers(e,t,s)}},origins:{"web-scene":{write:{ignoreOrigin:!0,target:{baseMapLayers:{type:y.a}},writer(e,t,r,s){this._writeBaseLayers(e,t,s)}}}}}})],T.prototype,"baseLayers",null),Object(i.a)([Object(c.b)({type:String,json:{origins:{"web-scene":{write:!0}}}})],T.prototype,"id",void 0),Object(i.a)([Object(c.b)({type:v.default})],T.prototype,"portalItem",void 0),Object(i.a)([Object(c.b)()],T.prototype,"referenceLayers",null),Object(i.a)([Object(c.b)({readOnly:!0})],T.prototype,"resourceInfo",void 0),Object(i.a)([Object(c.b)({type:b.a})],T.prototype,"spatialReference",void 0),Object(i.a)([Object(c.b)()],T.prototype,"thumbnailUrl",void 0),Object(i.a)([Object(c.b)({type:String,json:{origins:{"web-scene":{write:{isRequired:!0}}}}})],T.prototype,"title",void 0),Object(i.a)([Object(u.a)("title")],T.prototype,"writeTitle",null),T=s=Object(i.a)([Object(l.a)("esri.Basemap")],T);var x=T;t.default=x},542:function(e,t,r){"use strict";var s=r(81),i=(r(79),r(80),r(87),r(84)),a=r(83),n=(r(82),r(85),r(86),r(89)),o=r(98);let c=class extends n.a{constructor(e){super(e),this.geometries=null,this.outSpatialReference=null,this.transformation=null,this.transformForward=null}toJSON(){const e=this.geometries.map((function(e){return e.toJSON()})),t=this.geometries[0],r={};return r.outSR=this.outSpatialReference.wkid||JSON.stringify(this.outSpatialReference.toJSON()),r.inSR=t.spatialReference.wkid||JSON.stringify(t.spatialReference.toJSON()),r.geometries=JSON.stringify({geometryType:Object(o.c)(t),geometries:e}),this.transformation&&(r.transformation=this.transformation.wkid||JSON.stringify(this.transformation)),null!=this.transformForward&&(r.transformForward=this.transformForward),r}};Object(s.a)([Object(i.b)()],c.prototype,"geometries",void 0),Object(s.a)([Object(i.b)({json:{read:{source:"outSR"}}})],c.prototype,"outSpatialReference",void 0),Object(s.a)([Object(i.b)()],c.prototype,"transformation",void 0),Object(s.a)([Object(i.b)()],c.prototype,"transformForward",void 0),c=Object(s.a)([Object(a.a)("esri.tasks.support.ProjectParameters")],c);var l=c;t.a=l},591:function(e,t,r){"use strict";r.d(t,"a",(function(){return n})),r.d(t,"b",(function(){return a}));var s=r(203),i=r(159);async function a(e){if(!e)return;const t=e.indexOf("-vector")>-1?e.slice(0,e.indexOf("-vector")):e,r=await Object(s.a)("esri/t9n/basemaps");return r[e]||r[t]}const n={streets:{id:"streets",get thumbnailUrl(){return Object(i.a)("esri/images/basemap/streets.jpg")},baseMapLayers:[{id:"streets-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Street_Map/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Street Map",showLegend:!1,visibility:!0,opacity:1}]},satellite:{id:"satellite",get thumbnailUrl(){return Object(i.a)("esri/images/basemap/satellite.jpg")},baseMapLayers:[{id:"satellite-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Imagery",showLegend:!1,visibility:!0,opacity:1}]},hybrid:{id:"hybrid",get thumbnailUrl(){return Object(i.a)("esri/images/basemap/hybrid.jpg")},baseMapLayers:[{id:"hybrid-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Imagery",showLegend:!1,visibility:!0,opacity:1},{id:"hybrid-reference-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/Reference/World_Boundaries_and_Places/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Boundaries and Places",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},terrain:{id:"terrain",get thumbnailUrl(){return Object(i.a)("esri/images/basemap/terrain.jpg")},baseMapLayers:[{id:"terrain-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Terrain_Base/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Terrain Base",showLegend:!1,visibility:!0,opacity:1},{id:"terrain-reference-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/Reference/World_Reference_Overlay/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Reference Overlay",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},topo:{id:"topo",get thumbnailUrl(){return Object(i.a)("esri/images/basemap/topo.jpg")},baseMapLayers:[{id:"topo-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Topo_Map/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Topo Map",showLegend:!1,visibility:!0,opacity:1}]},gray:{id:"gray",get thumbnailUrl(){return Object(i.a)("esri/images/basemap/gray.jpg")},baseMapLayers:[{id:"gray-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Light_Gray_Base/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Light Gray Base",showLegend:!1,visibility:!0,opacity:1},{id:"gray-reference-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Light_Gray_Reference/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Light Gray Reference",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},"dark-gray":{id:"dark-gray",get thumbnailUrl(){return Object(i.a)("esri/images/basemap/dark-gray.jpg")},baseMapLayers:[{id:"dark-gray-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Dark_Gray_Base/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Dark Gray Base",showLegend:!1,visibility:!0,opacity:1},{id:"dark-gray-reference-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Dark_Gray_Reference/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Dark Gray Reference",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},oceans:{id:"oceans",get thumbnailUrl(){return Object(i.a)("esri/images/basemap/oceans.jpg")},baseMapLayers:[{id:"oceans-base-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Ocean/World_Ocean_Base/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Ocean Base",showLegend:!1,visibility:!0,opacity:1},{id:"oceans-reference-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Ocean/World_Ocean_Reference/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Ocean Reference",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},"national-geographic":{id:"national-geographic",get thumbnailUrl(){return Object(i.a)("esri/images/basemap/national-geographic.jpg")},baseMapLayers:[{id:"national-geographic-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/NatGeo_World_Map/MapServer",title:"NatGeo World Map",showLegend:!1,layerType:"ArcGISTiledMapServiceLayer",visibility:!0,opacity:1}]},osm:{id:"osm",get thumbnailUrl(){return Object(i.a)("esri/images/basemap/osm.jpg")},baseMapLayers:[{id:"osm-base-layer",layerType:"OpenStreetMap",title:"Open Street Map",showLegend:!1,visibility:!0,opacity:1}]},"dark-gray-vector":{id:"dark-gray-vector",get thumbnailUrl(){return Object(i.a)("esri/images/basemap/dark-gray-vector.jpg")},baseMapLayers:[{id:"dark-gray-base-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/5e9b3685f4c24d8781073dd928ebda50/resources/styles/root.json",layerType:"VectorTileLayer",title:"Dark Gray Base",visibility:!0,opacity:1},{id:"dark-gray-reference-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/747cb7a5329c478cbe6981076cc879c5/resources/styles/root.json",layerType:"VectorTileLayer",title:"Dark Gray Reference",isReference:!0,visibility:!0,opacity:1}]},"gray-vector":{id:"gray-vector",get thumbnailUrl(){return Object(i.a)("esri/images/basemap/gray-vector.jpg")},baseMapLayers:[{id:"gray-base-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/291da5eab3a0412593b66d384379f89f/resources/styles/root.json",layerType:"VectorTileLayer",title:"Light Gray Base",visibility:!0,opacity:1},{id:"gray-reference-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/1768e8369a214dfab4e2167d5c5f2454/resources/styles/root.json",layerType:"VectorTileLayer",title:"Light Gray Reference",isReference:!0,visibility:!0,opacity:1}]},"streets-vector":{id:"streets-vector",get thumbnailUrl(){return Object(i.a)("esri/images/basemap/streets-vector.jpg")},baseMapLayers:[{id:"streets-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/de26a3cf4cc9451298ea173c4b324736/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Streets",visibility:!0,opacity:1}]},"topo-vector":{id:"topo-vector",get thumbnailUrl(){return Object(i.a)("esri/images/basemap/topo-vector.jpg")},baseMapLayers:[{id:"world-hillshade-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Hillshade",showLegend:!1,visibility:!0,opacity:1},{id:"topo-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/7dc6cea0b1764a1f9af2e679f642f0f5/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Topo",visibility:!0,opacity:1}]},"streets-night-vector":{id:"streets-night-vector",get thumbnailUrl(){return Object(i.a)("esri/images/basemap/streets-night.jpg")},baseMapLayers:[{id:"streets-night-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/86f556a2d1fd468181855a35e344567f/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Streets Night",visibility:!0,opacity:1}]},"streets-relief-vector":{id:"streets-relief-vector",get thumbnailUrl(){return Object(i.a)("esri/images/basemap/streets-relief.jpg")},baseMapLayers:[{id:"world-hillshade-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Hillshade",showLegend:!1,visibility:!0,opacity:1},{id:"streets-relief-vector-base-layer",styleUrl:"//www.arcgis.com/sharing/rest/content/items/b266e6d17fc345b498345613930fbd76/resources/styles/root.json",title:"World Streets Relief",layerType:"VectorTileLayer",visibility:!0,opacity:1}]},"streets-navigation-vector":{id:"streets-navigation-vector",get thumbnailUrl(){return Object(i.a)("esri/images/basemap/streets-navigation.jpg")},baseMapLayers:[{id:"streets-navigation-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/63c47b7177f946b49902c24129b87252/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Streets Navigation",visibility:!0,opacity:1}]},"arcgis-imagery":{get thumbnailUrl(){return Object(i.a)("esri/images/basemap/hybrid.jpg")},title:"Imagery Hybrid",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Imagery",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/World_Imagery/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Imagery:Labels",title:"Hybrid Reference Layer",isReference:!0}]},"arcgis-imagery-standard":{get thumbnailUrl(){return Object(i.a)("esri/images/basemap/satellite.jpg")},title:"Imagery",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Imagery",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/World_Imagery/MapServer"}]},"arcgis-imagery-labels":{title:"Hybrid [Reference]",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Imagery:Labels",title:"Hybrid Reference Layer",isReference:!0}]},"arcgis-light-gray":{get thumbnailUrl(){return Object(i.a)("esri/images/basemap/gray-vector.jpg")},title:"Light Gray Canvas",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:LightGray:Base",title:"Light Gray Canvas Base"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:LightGray:Labels",title:"Light Gray Canvas Labels",isReference:!0}]},"arcgis-dark-gray":{get thumbnailUrl(){return Object(i.a)("esri/images/basemap/dark-gray.jpg")},title:"Dark Gray Canvas",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:DarkGray:Base",title:"Dark Gray Canvas Base"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:DarkGray:Labels",title:"Dark Gray Canvas Labels",isReference:!0}]},"arcgis-navigation":{get thumbnailUrl(){return Object(i.a)("esri/images/basemap/streets-navigation.jpg")},title:"Navigation",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Navigation",title:"World Navigation Map"}]},"arcgis-navigation-night":{title:"Navigation (Dark Mode)",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:NavigationNight",title:"World Navigation Map (Dark Mode)"}]},"arcgis-streets":{get thumbnailUrl(){return Object(i.a)("esri/images/basemap/streets-vector.jpg")},title:"Streets",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Streets",title:"World Street Map"}]},"arcgis-streets-night":{get thumbnailUrl(){return Object(i.a)("esri/images/basemap/streets-night.jpg")},title:"Streets (Night)",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:StreetsNight",title:"World Street Map (Night)"}]},"arcgis-streets-relief":{get thumbnailUrl(){return Object(i.a)("esri/images/basemap/streets-relief.jpg")},title:"Streets (with Relief)",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:StreetsRelief:Base",title:"World Street Map (with Relief)"}]},"arcgis-topographic":{get thumbnailUrl(){return Object(i.a)("esri/images/basemap/topo.jpg")},title:"Topographic",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Topographic:Base",title:"World Topographic Map"}]},"arcgis-oceans":{get thumbnailUrl(){return Object(i.a)("esri/images/basemap/oceans.jpg")},title:"Oceans",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Ocean Base",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Ocean/World_Ocean_Base/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Oceans:Labels",title:"World Ocean Reference",isReference:!0}]},"osm-standard":{title:"OpenStreetMap",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:Standard",title:"OpenStreetMap"}]},"osm-standard-relief":{title:"OpenStreetMap (with relief)",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:StandardRelief:Base",layerType:"VectorTileLayer",title:"OpenStreetMap Relief Base"}]},"osm-streets":{title:"OpenStreetMap (Streets)",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:Streets",title:"OpenStreetMap (Streets)"}]},"osm-streets-relief":{title:"OpenStreetMap (Streets with relief)",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:StreetsRelief:Base",layerType:"VectorTileLayer",title:"OpenStreetMap Relief Base"}]},"osm-light-gray":{title:"OpenStreetMap (Light Gray Canvas)",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:LightGray:Base",title:"OSM (Light Gray Base)"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:LightGray:Labels",title:"OSM (Light Gray Reference)",isReference:!0}]},"osm-dark-gray":{title:"OpenStreetMap (Dark Gray Canvas)",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:DarkGray:Base",title:"OSM (Dark Gray Base)"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:DarkGray:Labels",title:"OSM (Dark Gray Reference)",isReference:!0}]},"arcgis-terrain":{title:"Terrain with Labels",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Terrain:Base",title:"World Terrain Base"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Terrain:Detail",title:"World Terrain Reference",isReference:!0}]},"arcgis-community":{title:"Community",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Community",title:"Community"}]},"arcgis-charted-territory":{title:"Charted Territory",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:ChartedTerritory:Base",title:"Charted Territory"}]},"arcgis-colored-pencil":{title:"Colored Pencil",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:ColoredPencil",title:"Colored Pencil"}]},"arcgis-nova":{title:"Nova",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Nova",title:"Nova"}]},"arcgis-modern-antique":{title:"Modern Antique",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:ModernAntique:Base",title:"Modern Antique"}]},"arcgis-midcentury":{title:"Mid-Century",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Midcentury",title:"Mid-Century"}]},"arcgis-newspaper":{title:"Newspaper",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Newspaper",title:"Newspaper"}]},"arcgis-hillshade-light":{title:"Hillshade",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"}]},"arcgis-hillshade-dark":{title:"Hillshade (Dark)",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade (Dark)",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade_Dark/MapServer"}]}}},607:function(e,t,r){"use strict";r.d(t,"a",(function(){return b})),r.d(t,"b",(function(){return u})),r.d(t,"c",(function(){return d})),r.d(t,"d",(function(){return p})),r.d(t,"e",(function(){return h})),r.d(t,"f",(function(){return y})),r.d(t,"g",(function(){return g}));var s=r(80),i=r(87),a=r(82),n=r(105),o=r(591),c=r(540);const l=s.a.getLogger("esri.support.basemapUtils");function u(){return{}}function d(e){for(const t in e){const r=e[t];!1===(null==r?void 0:r.destroyed)&&r.destroy(),delete e[t]}}function p(e,t){var r;let s;if("string"==typeof e){if(!(e in o.a)){const t=Object.keys(o.a).map((e=>`"${e}"`)).join(", ");return l.warn(`Unable to find basemap definition for: ${e}. Try one of these: ${t}`),null}t&&(s=t[e]),s||(s=c.default.fromId(e),t&&(t[e]=s))}else s=Object(i.m)(c.default,e);return null!=(r=s)&&r.destroyed&&(l.warn("The provided basemap is already destroyed",{basemap:s}),s=null),s}function h(e){let t=null;const r=O(e),s=!r.baseLayers.length;for(const i in o.a){const e=_(r,S(o.a[i]),{mustMatchReferences:s});if("equal"===e){t=i;break}"base-layers-equal"===e&&(t=i)}return t}function b(e,t){return e===t||"equal"===_(O(e),O(t),{mustMatchReferences:!0})}function y(e){return!(null==e||!e.baseLayers.concat(e.referenceLayers).some(g))}function g(e){if(f(e.url))return!0;if("vector-tile"===e.type)for(const t in e.sourceNameToSource){const r=e.sourceNameToSource[t];if(f(null==r?void 0:r.sourceUrl))return!0}return!1}const m=/^(basemaps|ibasemaps).*-api\.arcgis\.com$/i;function f(e){if(!e)return!1;const t=new a.a(Object(a.z)(e));return m.test(t.authority)}function O(e){return e?!e.loaded&&e.resourceInfo?S(e.resourceInfo.data):{baseLayers:v(e.baseLayers),referenceLayers:v(e.referenceLayers)}:null}function v(e){return(n.a.isCollection(e)?e.toArray():e).map(j)}function j(e){return{type:e.type,url:I("urlTemplate"in e&&e.urlTemplate||e.url||"styleUrl"in e&&e.styleUrl),minScale:"minScale"in e&&null!=e.minScale?e.minScale:0,maxScale:"maxScale"in e&&null!=e.maxScale?e.maxScale:0,opacity:null!=e.opacity?e.opacity:1,visible:null==e.visible||!!e.visible}}function S(e){return e?{baseLayers:w(e.baseMapLayers.filter((e=>!e.isReference))),referenceLayers:w(e.baseMapLayers.filter((e=>e.isReference)))}:null}function w(e){return e.map((e=>function(e){let t;switch(e.layerType){case"VectorTileLayer":t="vector-tile";break;case"ArcGISTiledMapServiceLayer":t="tile";break;default:t="unknown"}return{type:t,url:I(e.templateUrl||e.urlTemplate||e.styleUrl||e.url),minScale:null!=e.minScale?e.minScale:0,maxScale:null!=e.maxScale?e.maxScale:0,opacity:null!=e.opacity?e.opacity:1,visible:null==e.visibility||!!e.visibility}}(e)))}function _(e,t,r){return null!=e!=(null!=t)?"not-equal":e?T(e.baseLayers,t.baseLayers)?T(e.referenceLayers,t.referenceLayers)?"equal":r.mustMatchReferences?"not-equal":"base-layers-equal":"not-equal":"equal"}function T(e,t){if(e.length!==t.length)return!1;for(let r=0;r<e.length;r++)if(!x(e[r],t[r]))return!1;return!0}function x(e,t){return e.type===t.type&&e.url===t.url&&e.minScale===t.minScale&&e.maxScale===t.maxScale&&e.visible===t.visible&&e.opacity===t.opacity}function I(e){return e?Object(a.C)(e).replace(/^\s*https?:/i,"").toLowerCase():""}},608:function(e,t,r){"use strict";r.d(t,"a",(function(){return a})),r.d(t,"b",(function(){return i}));var s=r(98);function i(e){return{geometryType:Object(s.c)(e[0]),geometries:e.map((e=>e.toJSON()))}}function a(e,t,r){const i=Object(s.b)(t);return e.map((e=>{const t=i.fromJSON(e);return t.spatialReference=r,t}))}},640:function(e,t,r){"use strict";r.d(t,"a",(function(){return a})),r.d(t,"b",(function(){return n})),r.d(t,"c",(function(){return o}));r(149);var s=r(540),i=r(607);const a={light:["streets","gray","topo","terrain","national-geographic","oceans","osm","gray-vector","streets-vector","topo-vector","streets-relief-vector","streets-navigation-vector"],dark:["satellite","hybrid","dark-gray","dark-gray-vector","streets-night-vector"]};function n(e,t=a){for(const r in t)if(t[r].indexOf(e)>-1)return r}function o(e,t,r=!0){let a=null;return"string"==typeof e&&t.indexOf(e)>-1?a=e:e instanceof s.default&&(a=Object(i.e)(e)),r?a||"gray":a}},676:function(e,t,r){"use strict";r.d(t,"a",(function(){return s}));const s=new(r(93).a)({MGRS:"mgrs",USNG:"usng",UTM:"utm",GeoRef:"geo-ref",GARS:"gars",DMS:"dms",DDM:"ddm",DD:"dd"})},677:function(e,t,r){"use strict";r.d(t,"a",(function(){return n}));var s=r(103);r(640);const i=["streets","gray","topo","terrain","national-geographic","oceans","osm","gray-vector","streets-vector","topo-vector","streets-relief-vector","streets-navigation-vector"],a=["satellite","hybrid","dark-gray","dark-gray-vector","streets-night-vector"];[].concat(i).concat(a);function n(e,t){return Math.ceil(function(e){const t=e.width,r=e.height;let i=e.pixelSizeAt(e.toMap(Object(s.f)(.5*t,.5*r),{exclude:[]}));if(i<=0&&(i=e.pixelSizeAt(e.toMap(Object(s.f)(.5*t,.95*r),{exclude:[]})),i<=0)){const t=e.camera.position.clone();t.z=0,i=2*e.pixelSizeAt(t)}return i}(t)*Object(s.h)(Object(s.k)(e)))}},678:function(e,t,r){"use strict";r.d(t,"a",(function(){return n})),r.d(t,"b",(function(){return i}));var s=r(115);function i(e,t){const r=t||e.extent,i=e.width,a=Object(s.f)(r&&r.spatialReference);return r&&i?r.width/i*a*s.j*96:0}function a(e,t){return e/(Object(s.f)(t)*s.j*96)}function n(e,t){const r=e.extent,s=e.width,i=a(t,r.spatialReference);return r.clone().expand(i*s/r.width)}},704:function(e,t,r){"use strict";r.d(t,"a",(function(){return o})),r.d(t,"b",(function(){return l})),r.d(t,"c",(function(){return u})),r.d(t,"d",(function(){return d})),r.d(t,"e",(function(){return c}));var s=r(90),i=r(88),a=r(640);var n=class{constructor(e){this.name=null,this.label=null,this.description=null,this.supportedBasemaps=null,this.basemapGroups=null,this.schemes=null;const{name:t,label:r,description:s,schemes:i}=e;this.name=t,this.label=r,this.description=s,this.schemes=i;const n=e.basemapGroups||a.a;let o=[];if(n)for(const a in n)o=o.concat(n[a]);this.supportedBasemaps=o,this.basemapGroups=n}isBasemapSupported(e){const t=Object(a.c)(e,this.supportedBasemaps);return!!(t&&this.supportedBasemaps.indexOf(t)>-1)}getRawSchemes(e){const{basemapId:t,basemapTheme:r}=function(e,t,r){let s=null,n=null;if(t&&(s=Object(a.c)(t,e,!1),s)){const e=Object(a.b)(s);Object(i.k)(e)&&(n=e)}return!s&&r&&(s="dark"===r?"dark-gray":"gray",n=r),s||n||(s="gray",n="light"),{basemapId:s,basemapTheme:n}}(this.supportedBasemaps,e.basemap,e.basemapTheme);let n=r;if(t){const e=Object(a.b)(t,this.basemapGroups);Object(i.k)(e)&&(n=e)}let o=e.geometryType;"multipoint"===o?o="point":"mesh"===o&&(o="polygon");const c=this.schemes[o]||this.schemes.default;return{schemesInfo:Object(s.a)(c[n]),basemapId:t,basemapTheme:r}}};function o(e){const t=e.themeDictionary,r=new Map;for(const s in t){const e=t[s];r.set(s,new n(e))}return r}function c(e,t){const r=[];return e.forEach((e=>{e.isBasemapSupported(t)&&r.push({name:e.name,label:e.label,description:e.description,basemaps:[...e.supportedBasemaps]})})),r}function l(e,t){if(!e)return;if(!t)return;let r=null;const s=[t.primaryScheme,...t.secondarySchemes];for(const i of s)if(i.name.toLowerCase()===e.toLowerCase()){r=i;break}return r}function u(e,t,r){if(!e&&!t)return[];if(!r)return[];const s=!(e&&e.length),i=!(t&&t.length),a=[r.primaryScheme,...r.secondarySchemes],n=[];for(const o of a){const r=!!s||e.some((e=>o.tags.indexOf(e)>-1)),a=!i&&t.some((e=>o.tags.indexOf(e)>-1));r&&!a&&n.push(o)}return n}function d(e){const t=e.theme;if(t)return t.getRawSchemes({basemap:e.basemap,geometryType:e.geometryType,basemapTheme:e.basemapTheme})}},729:function(e,t,r){"use strict";r.d(t,"a",(function(){return n}));var s=r(93),i=r(98);const a=new s.a({109006:"centimeters",9102:"decimal-degrees",109005:"decimeters",9002:"feet",109009:"inches",9036:"kilometers",9001:"meters",9035:"miles",109007:"millimeters",109012:"nautical-miles",9096:"yards"});function n(e){const{geometries:t,deviationUnit:r,maxDeviation:s}=e.toJSON(),n={maxDeviation:s};return t&&t.length&&(n.geometries=JSON.stringify({geometryType:Object(i.c)(t[0]),geometries:t}),n.sr=JSON.stringify(t[0].spatialReference)),a.write(r,n,"deviationUnit"),n}},730:function(e,t,r){"use strict";var s=r(81),i=(r(79),r(80),r(87)),a=r(84),n=r(83),o=(r(82),r(85),r(86),r(89)),c=r(98);let l=class extends o.a{constructor(e){super(e),this.deviationUnit=null,this.geometries=null,this.maxDeviation=null}};Object(s.a)([Object(a.b)({type:String,json:{write:!0}})],l.prototype,"deviationUnit",void 0),Object(s.a)([Object(a.b)({json:{read:{reader:e=>e?e.map((e=>Object(c.a)(e))):null},write:{writer:(e,t)=>{t.geometries=e.map((e=>e.toJSON()))}}}})],l.prototype,"geometries",void 0),Object(s.a)([Object(a.b)({type:Number,json:{write:!0}})],l.prototype,"maxDeviation",void 0),l=Object(s.a)([Object(n.a)("esri.tasks.support.GeneralizeParameters")],l),l.from=Object(i.m)(l);var u=l;t.a=u},731:function(e,t,r){"use strict";r.d(t,"a",(function(){return i}));const s=new(r(93).a)({preserveShape:"preserve-shape"});function i(e){const{polylines:t,lengthUnit:r,geodesic:i,calculationType:a}=e.toJSON(),n={};n.polylines=JSON.stringify(t);const o=e.polylines[0].spatialReference;return n.sr=o.wkid?o.wkid:JSON.stringify(o.toJSON()),r&&(n.lengthUnit=r),i&&(n.geodesic=i),a&&(n.calculationType=s.toJSON(a)),n}},732:function(e,t,r){"use strict";var s=r(81),i=(r(79),r(80),r(87)),a=r(84),n=r(83),o=(r(82),r(85),r(86),r(89)),c=r(138),l=r(98);r(99);let u=class extends o.a{constructor(e){super(e),this.calculationType=null,this.geodesic=null,this.lengthUnit=null,this.polylines=null}};Object(s.a)([Object(a.b)({type:String,json:{write:!0}})],u.prototype,"calculationType",void 0),Object(s.a)([Object(a.b)({type:Boolean,json:{write:!0}})],u.prototype,"geodesic",void 0),Object(s.a)([Object(a.b)({json:{write:!0}})],u.prototype,"lengthUnit",void 0),Object(s.a)([Object(a.b)({type:[c.a],json:{read:{reader:e=>e?e.map((e=>Object(l.a)(e))):null},write:{writer:(e,t)=>{t.polylines=e.map((e=>e.toJSON()))}}}})],u.prototype,"polylines",void 0),u=Object(s.a)([Object(n.a)("esri.tasks.support.LengthsParameters")],u),u.from=Object(i.m)(u);var d=u;t.a=d},733:function(e,t,r){"use strict";r.d(t,"a",(function(){return o}));var s=r(93),i=r(98);const a=new s.a({esriGeometryOffsetBevelled:"bevelled",esriGeometryOffsetMitered:"mitered",esriGeometryOffsetRounded:"rounded"}),n=new s.a({9001:"meters",9002:"feet",9036:"kilometers",9093:"miles",109012:"nautical-miles",109001:"yards"});function o(e){const{geometries:t,bevelRatio:r,offsetDistance:s,offsetHow:o,offsetUnit:c}=e.toJSON(),l={bevelRatio:r,offsetDistance:s};return t&&t.length&&(l.geometries=JSON.stringify({geometryType:Object(i.c)(t[0]),geometries:t}),l.sr=JSON.stringify(t[0].spatialReference)),o&&(l.offsetHow=a.toJSON(o)),c&&(l.offsetUnit=n.toJSON(c)),l}},734:function(e,t,r){"use strict";var s=r(81),i=(r(79),r(80),r(87)),a=r(84),n=r(83),o=(r(82),r(85),r(86),r(89)),c=r(98);let l=class extends o.a{constructor(e){super(e),this.bevelRatio=null,this.geometries=null,this.offsetDistance=null,this.offsetHow=null,this.offsetUnit=null}};Object(s.a)([Object(a.b)({type:Number,json:{write:!0}})],l.prototype,"bevelRatio",void 0),Object(s.a)([Object(a.b)({json:{read:{reader:e=>e?e.map((e=>Object(c.a)(e))):null},write:{writer:(e,t)=>{t.geometries=e.map((e=>e.toJSON()))}}}})],l.prototype,"geometries",void 0),Object(s.a)([Object(a.b)({type:Number,json:{write:!0}})],l.prototype,"offsetDistance",void 0),Object(s.a)([Object(a.b)({type:String,json:{write:!0}})],l.prototype,"offsetHow",void 0),Object(s.a)([Object(a.b)({type:String,json:{write:!0}})],l.prototype,"offsetUnit",void 0),l=Object(s.a)([Object(n.a)("esri.tasks.support.OffsetParameters")],l),l.from=Object(i.m)(l);var u=l;t.a=u},735:function(e,t,r){"use strict";r.d(t,"a",(function(){return u}));var s=r(87),i=r(98),a=r(104),n=r(542),o=r(139),c=r(608);const l=Object(s.m)(n.a);async function u(e,t,r){t=l(t);const s=Object(o.c)(e),n={...s.query,f:"json",...t.toJSON()},u=t.outSpatialReference,d=Object(i.c)(t.geometries[0]),p=Object(o.a)(n,r);return Object(a.default)(s.path+"/project",p).then((({data:{geometries:e}})=>Object(c.a)(e,d,u)))}},736:function(e,t,r){"use strict";r.d(t,"a",(function(){return n}));var s=r(93),i=r(98);const a=new s.a({esriGeometryRelationCross:"cross",esriGeometryRelationDisjoint:"disjoint",esriGeometryRelationIn:"in",esriGeometryRelationInteriorIntersection:"interior-intersection",esriGeometryRelationIntersection:"intersection",esriGeometryRelationLineCoincidence:"line-coincidence",esriGeometryRelationLineTouch:"line-touch",esriGeometryRelationOverlap:"overlap",esriGeometryRelationPointTouch:"point-touch",esriGeometryRelationTouch:"touch",esriGeometryRelationWithin:"within",esriGeometryRelationRelation:"relation"});function n(e){const{geometries1:t,geometries2:r,relation:s,relationParameter:n}=e.toJSON(),o={};if(t&&t.length){o.geometries1=JSON.stringify({geometryType:Object(i.c)(t[0]),geometries:t});const e=t[0].spatialReference;o.sr=e.wkid?e.wkid:JSON.stringify(e)}return r&&r.length>0&&(o.geometries2=JSON.stringify({geometryType:Object(i.c)(r[0]),geometries:r})),s&&(o.relation=a.toJSON(s)),n&&(o.relationParam=n),o}},737:function(e,t,r){"use strict";var s=r(81),i=(r(79),r(80),r(87)),a=r(84),n=r(83),o=(r(82),r(85),r(86),r(89)),c=r(98);let l=class extends o.a{constructor(e){super(e),this.geometries1=null,this.geometries2=null,this.relation=null,this.relationParameter=null}};Object(s.a)([Object(a.b)({json:{read:{reader:e=>e?e.map((e=>Object(c.a)(e))):null},write:{writer:(e,t)=>{t.geometries1=e.map((e=>e.toJSON()))}}}})],l.prototype,"geometries1",void 0),Object(s.a)([Object(a.b)({json:{read:{reader:e=>e?e.map((e=>Object(c.a)(e))):null},write:{writer:(e,t)=>{t.geometries2=e.map((e=>e.toJSON()))}}}})],l.prototype,"geometries2",void 0),Object(s.a)([Object(a.b)({type:String,json:{write:!0}})],l.prototype,"relation",void 0),Object(s.a)([Object(a.b)({type:String,json:{write:!0}})],l.prototype,"relationParameter",void 0),l=Object(s.a)([Object(n.a)("esri.tasks.support.RelationParameters")],l),l.from=Object(i.m)(l);var u=l;t.a=u},738:function(e,t,r){"use strict";r.d(t,"a",(function(){return i}));const s=new(r(93).a)({0:"default-curve-extension",1:"relocate-ends",2:"keep-end-attributes",4:"no-end-attributes",8:"no-extend-at-from",16:"no-extend-at-to"});function i(e){const{extendHow:t,polylines:r,trimExtendTo:i}=e.toJSON(),a={};return a.extendHow=s.toJSON(t),r&&r.length&&(a.polylines=JSON.stringify(r),a.sr=JSON.stringify(r[0].spatialReference)),i&&(a.trimExtendTo=JSON.stringify(i)),a}},739:function(e,t,r){"use strict";var s=r(81),i=(r(79),r(80),r(87)),a=r(84),n=r(83),o=(r(82),r(85),r(86),r(89)),c=r(138),l=r(98);r(99);let u=class extends o.a{constructor(e){super(e),this.extendHow="default-curve-extension",this.polylines=null,this.trimExtendTo=null}};Object(s.a)([Object(a.b)({type:String,json:{write:!0}})],u.prototype,"extendHow",void 0),Object(s.a)([Object(a.b)({type:[c.a],json:{read:{reader:e=>e?e.map((e=>Object(l.a)(e))):null},write:{writer:(e,t)=>{t.polylines=e.map((e=>e.toJSON()))}}}})],u.prototype,"polylines",void 0),Object(s.a)([Object(a.b)({json:{read:{reader:e=>e?Object(l.a)(e):null},write:{writer:(e,t)=>{t.trimExtendTo=e.toJSON()}}}})],u.prototype,"trimExtendTo",void 0),u=Object(s.a)([Object(n.a)("esri.tasks.support.TrimExtendParameters")],u),u.from=Object(i.m)(u);var d=u;t.a=d},740:function(e,t,r){"use strict";var s=r(81),i=(r(79),r(80),r(87),r(84)),a=r(83),n=(r(82),r(85),r(86),r(89)),o=r(263);let c=class extends(Object(o.a)(n.a)){constructor(e){super(e),this.autoNavigate=null,this.filter=null,this.getResults=null,this.getSuggestions=null,this.maxResults=null,this.maxSuggestions=null,this.minSuggestCharacters=null,this.outFields=null,this.placeholder="",this.popupEnabled=null,this.popupTemplate=null,this.prefix="",this.resultGraphicEnabled=null,this.resultSymbol=null,this.suggestionsEnabled=null,this.suffix="",this.withinViewEnabled=!1,this.zoomScale=null}};Object(s.a)([Object(i.b)()],c.prototype,"autoNavigate",void 0),Object(s.a)([Object(i.b)()],c.prototype,"filter",void 0),Object(s.a)([Object(i.b)()],c.prototype,"getResults",void 0),Object(s.a)([Object(i.b)()],c.prototype,"getSuggestions",void 0),Object(s.a)([Object(i.b)()],c.prototype,"maxResults",void 0),Object(s.a)([Object(i.b)()],c.prototype,"maxSuggestions",void 0),Object(s.a)([Object(i.b)()],c.prototype,"minSuggestCharacters",void 0),Object(s.a)([Object(i.b)()],c.prototype,"outFields",void 0),Object(s.a)([Object(i.b)()],c.prototype,"placeholder",void 0),Object(s.a)([Object(i.b)()],c.prototype,"popupEnabled",void 0),Object(s.a)([Object(i.b)()],c.prototype,"popupTemplate",void 0),Object(s.a)([Object(i.b)()],c.prototype,"prefix",void 0),Object(s.a)([Object(i.b)()],c.prototype,"resultGraphicEnabled",void 0),Object(s.a)([Object(i.b)()],c.prototype,"resultSymbol",void 0),Object(s.a)([Object(i.b)()],c.prototype,"suggestionsEnabled",void 0),Object(s.a)([Object(i.b)()],c.prototype,"suffix",void 0),Object(s.a)([Object(i.b)()],c.prototype,"withinViewEnabled",void 0),Object(s.a)([Object(i.b)()],c.prototype,"zoomScale",void 0),c=Object(s.a)([Object(a.a)("esri.widgets.Search.SearchSource")],c);var l=c;t.a=l},741:function(e,t,r){"use strict";r.d(t,"a",(function(){return d})),r.d(t,"b",(function(){return u})),r.d(t,"c",(function(){return l})),r.d(t,"d",(function(){return p}));var s=r(88),i=r(80),a=r(91),n=r(101),o=(r(99),r(678));const c=i.a.getLogger("esri.widgets.Search.support.geometryUtils");function l(e,t){var r,s;if(!t)return c.error("missing-parameter: view is missing."),Promise.reject(new a.a("searchgeometryutils:missing-parameter","view is missing."));if(!e)return c.error("missing-parameter: point is missing."),Promise.reject(new a.a("searchgeometryutils:missing-parameter","point is missing."));if(e.hasZ||"2d"===t.type)return Promise.resolve(e);const i=null==t||null==(r=t.map)?void 0:r.ground;return i&&i.layers.length?i.queryElevation(e,{cache:null==(s=t.basemapTerrain)?void 0:s.elevationQueryCache}).then((e=>e.geometry)):Promise.resolve(e)}function u(e){if(Object(s.j)(e))return null;switch(e.type){case"point":return e;case"extent":return e.center;case"polygon":return e.centroid;case"multipoint":return e.getPoint(0);case"polyline":return e.getPoint(0,0)}return null}function d(e,t,r){return Object(s.j)(e)?null:"extent"===e.type?e:"multipoint"===e.type||"polygon"===e.type||"polyline"===e.type?e.extent:"point"===e.type?h(e,t,r):void 0}function p(e,t,r){return Object(s.j)(e)||Object(s.j)(t)?null:h(e.center,t,r)}function h(e,t,r){const s=e.hasZ?e.z:void 0;return t&&t.map?(r?Object(o.a)(t,r):t.extent).clone().centerAt(e).set({zmax:s,zmin:s}):new n.a({xmin:e.x-.25,ymin:e.y-.25,xmax:e.x+.25,ymax:e.y+.25,spatialReference:e.spatialReference,zmin:s,zmax:s})}},742:function(e,t,r){"use strict";r.d(t,"a",(function(){return s}));const s={type:String,json:{read:{source:"token"},write:{target:"token"}}}},813:function(e,t,r){"use strict";r.d(t,"a",(function(){return y})),r.d(t,"b",(function(){return g})),r.d(t,"c",(function(){return b}));var s=r(79),i=r(156),a=r(80),n=r(91),o=(r(82),r(163),r(158)),c=r(111),l=(r(101),r(222),r(127),r(138),r(99),r(104),r(249)),u=r(542),d=(r(676),r(729),r(730),r(731),r(732),r(733),r(734),r(735));r(736),r(737),r(738),r(739);const p=a.a.getLogger("esri.widgets.support.geolocationUtils"),h={maximumAge:0,timeout:15e3,enableHighAccuracy:!0};function b(){return function(){const e=Object(s.a)("esri-geolocation");return e||p.warn("geolocation-unsupported","Geolocation unsupported."),e}()&&function(){const e=window.isSecureContext;return e||p.warn("insecure-context","Geolocation requires a secure origin."),e}()}function y(e){return e||(e=h),new Promise(((t,r)=>{setTimeout((()=>r(new n.a("geolocation:timeout","getting the current geolocation position timed out"))),15e3),navigator.geolocation.getCurrentPosition(t,r,e)}))}function g(e,t){const{position:r,view:s}=e;return function(e,t,r){if(!t)return Promise.resolve(e);const s=t.spatialReference;return s.isWGS84?Promise.resolve(e):s.isWebMercator?Promise.resolve(Object(o.b)(e)):function(e){if(i.a.geometryServiceUrl)return Promise.resolve(i.a.geometryServiceUrl);const t=l.a.getDefault();return t.load(e).catch((()=>{})).then((()=>t.get("helperServices.geometry.url")))}(r).then((t=>{if(!t)throw new n.a("geometry-service:missing-url","Geometry service URL is missing");const i=new u.a({geometries:[e],outSpatialReference:s});return Object(d.a)(t,i,r).then((e=>e[0]))}))}(function(e){const t=e&&e.coords;return t?new c.a({longitude:t.longitude,latitude:t.latitude,z:t.altitude||null,spatialReference:{wkid:4326}}):null}(function(e){const t=e&&e.coords||{},r={accuracy:t.accuracy,altitude:t.altitude,altitudeAccuracy:t.altitudeAccuracy,heading:t.heading,latitude:t.latitude,longitude:t.longitude,speed:t.speed};return e?{coords:r,timestamp:e.timestamp}:e}(r)),s,t)}},814:function(e,t,r){"use strict";r.d(t,"a",(function(){return d})),r.d(t,"b",(function(){return h})),r.d(t,"c",(function(){return g})),r.d(t,"d",(function(){return b})),r.d(t,"e",(function(){return y}));var s=r(88),i=r(127),a=r(120),n=r(815),o=r(816),c=r(817),l=r(741);const u="Single Line Input";function d(e,t){return e.location?function(e,t){const{source:r,spatialReference:s,location:i,sourceIndex:a,view:n}=e,{apiKey:c,locator:l,zoomScale:u,defaultZoomScale:d}=r,p=n&&n.scale,h=t&&t.signal,b=new o.a;return b.location=i,c&&(b.apiKey=c),s&&(b.outSpatialReference=s),l.locationToAddress(b,{signal:h}).then((e=>O([e],{sourceIndex:a,scale:p,view:n,zoomScale:u,defaultZoomScale:d})))}(e,t):function(e,t){const{source:r,suggestResult:i,spatialReference:a,view:o,maxResults:c,sourceIndex:l}=e,d=r&&r.zoomScale,h=r&&r.defaultZoomScale;if(!i.text.trim())return Promise.resolve(null);const b=!i.key&&r.prefix?r.prefix:"",y=!i.key&&r.suffix?r.suffix:"",g=`${b}${i.text}${y}`,f=new n.a,{apiKey:v,locator:j}=r,S=o&&o.scale,w=m(r,o),_=t&&t.signal;if(v&&(f.apiKey=v),!j)return Promise.resolve(null);r.categories&&(f.categories=r.categories),r.locationType&&(f.locationType=r.locationType),a&&(f.outSpatialReference=a);const T=p(o);T&&(f.location=T),f.maxLocations=c,w&&(f.searchExtent=Object(s.q)(w)),r.countryCode&&(f.countryCode=r.countryCode);const{key:x}=i;return x&&(f.magicKey=x),f.address={},f.address[r.singleLineFieldName||u]=g,r.outFields&&(f.outFields=r.outFields),j.addressToLocations(f,{signal:_}).then((e=>O(e,{key:x,scale:S,sourceIndex:l,view:o,zoomScale:d,defaultZoomScale:h})))}(e,t)}function p(e){const t=null==e?void 0:e.scale;return"number"==typeof t&&t<=3e5?e.get("extent.center"):null}function h(e,t){const{source:r,spatialReference:i,view:a,suggestTerm:n,maxSuggestions:o,sourceIndex:l}=e,u=new c.a,{apiKey:d,locator:h}=r,b=m(r,a),y=t&&t.signal;if(!h)return Promise.resolve(null);d&&(u.apiKey=d),r.categories&&(u.categories=r.categories),i&&(u.outSpatialReference=i);const g=p(a);if(g&&(u.location=g),!n.trim())return Promise.resolve(null);const{prefix:O="",suffix:v=""}=r,j=`${O}${n}${v}`;return u.text=j,b&&(u.searchExtent=Object(s.q)(b)),u.maxSuggestions=o,r.countryCode&&(u.countryCode=r.countryCode),h.suggestLocations(u,{signal:y}).then((e=>f(e,l)))}function b(e){return!!e&&/(?:geocode\-api\.arcgis\.com\/arcgis\/rest\/services\/world\/geocodeserver).*/gi.test(e)}function y(e){return!!e&&/(?:\/servers\/[\da-z\.-]+\/rest\/services\/world\/geocodeserver).*/gi.test(e)}function g(e){return!!e&&/(?:arcgis\.com\/arcgis\/rest\/services\/world\/geocodeserver).*/gi.test(e)}function m(e,t){const{filter:r,withinViewEnabled:s}=e,i=t&&t.scale,a=t&&t.extent,n=r&&r.geometry;return Object(l.a)(n,t,i)||(s&&a?a:void 0)}function f(e,t){return e.map((e=>function(e,t){return{text:e.text,key:e.magicKey,sourceIndex:t}}(e,t)))}function O(e,t){return e.map((e=>function(e,t){const{key:r,scale:n,sourceIndex:o,view:c,zoomScale:u,defaultZoomScale:d}=t,{attributes:p,extent:h,location:b,address:y}=e,g=new a.a({geometry:b,attributes:p}),m=h||b,f=Object(l.a)(m,c,n),O="number"==typeof u?Object(l.d)(f,c,u):"number"==typeof d&&"point"===m.type?Object(l.d)(f,c,d):f,v=b?`${b.x},${b.y}`:"",j=y||v,S=g.clone();return Object(s.k)(O)&&(S.geometry=i.a.fromExtent(O)),{extent:O,feature:g,target:S,key:r,name:j,sourceIndex:o}}(e,t)))}},815:function(e,t,r){"use strict";var s=r(81),i=(r(79),r(80),r(87)),a=r(84),n=r(83),o=(r(82),r(85),r(86),r(89)),c=r(97),l=r(111),u=r(101),d=(r(99),r(742));let p=class extends o.a{constructor(e){super(e),this.address=null,this.apiKey=null,this.categories=null,this.countryCode=null,this.forStorage=null,this.location=null,this.locationType=null,this.magicKey=null,this.maxLocations=null,this.outFields=null,this.outSpatialReference=null,this.searchExtent=null}};Object(s.a)([Object(a.b)({type:Object,json:{write:!0}})],p.prototype,"address",void 0),Object(s.a)([Object(a.b)(d.a)],p.prototype,"apiKey",void 0),Object(s.a)([Object(a.b)({type:[String],json:{read:{source:"category",reader:e=>e?e.split(","):null},write:{target:"category",writer:(e,t)=>{t.category=e?e.join(","):null}}}})],p.prototype,"categories",void 0),Object(s.a)([Object(a.b)({type:String,json:{write:!0}})],p.prototype,"countryCode",void 0),Object(s.a)([Object(a.b)({type:Boolean,json:{write:!0}})],p.prototype,"forStorage",void 0),Object(s.a)([Object(a.b)({type:l.a,json:{write:{writer:(e,t)=>{t.location=e?e.clone().normalize():null}}}})],p.prototype,"location",void 0),Object(s.a)([Object(a.b)({type:String,json:{write:!0}})],p.prototype,"locationType",void 0),Object(s.a)([Object(a.b)({type:String,json:{write:!0}})],p.prototype,"magicKey",void 0),Object(s.a)([Object(a.b)({type:Number,json:{write:!0}})],p.prototype,"maxLocations",void 0),Object(s.a)([Object(a.b)({type:[String],json:{write:{writer:(e,t)=>{t.outFields=e?e.join(","):null}}}})],p.prototype,"outFields",void 0),Object(s.a)([Object(a.b)({type:c.a,json:{read:{source:"outSR"},write:{target:"outSR"}}})],p.prototype,"outSpatialReference",void 0),Object(s.a)([Object(a.b)({type:u.a,json:{write:{writer:(e,t)=>{const r=e?e.shiftCentralMeridian():null;t.searchExtent=r}}}})],p.prototype,"searchExtent",void 0),p=Object(s.a)([Object(n.a)("esri.tasks.support.AddressToLocationsParameters")],p),p.from=Object(i.m)(p);var h=p;t.a=h},816:function(e,t,r){"use strict";var s=r(81),i=(r(79),r(80),r(87)),a=r(84),n=r(83),o=(r(82),r(85),r(86),r(89)),c=r(97),l=r(111),u=(r(99),r(742));let d=class extends o.a{constructor(e){super(e),this.apiKey=null,this.location=null,this.locationType=null,this.outSpatialReference=null}};Object(s.a)([Object(a.b)(u.a)],d.prototype,"apiKey",void 0),Object(s.a)([Object(a.b)({type:l.a,json:{write:{writer:(e,t)=>{const r=e?e.clone().normalize():null,s=void 0!==r;t.location=s?r:null}}}})],d.prototype,"location",void 0),Object(s.a)([Object(a.b)({type:String,json:{write:!0}})],d.prototype,"locationType",void 0),Object(s.a)([Object(a.b)({type:c.a,json:{read:{source:"outSR"},write:{target:"outSR"}}})],d.prototype,"outSpatialReference",void 0),d=Object(s.a)([Object(n.a)("esri.tasks.support.LocationToAddressParameters")],d),d.from=Object(i.m)(d);var p=d;t.a=p},817:function(e,t,r){"use strict";var s=r(81),i=(r(79),r(80),r(87)),a=r(84),n=r(83),o=(r(82),r(85),r(86),r(89)),c=r(97),l=r(111),u=r(101),d=(r(99),r(742));let p=class extends o.a{constructor(e){super(e),this.apiKey=null,this.categories=null,this.countryCode=null,this.location=null,this.maxSuggestions=null,this.outSpatialReference=null,this.searchExtent=null,this.text=null}};Object(s.a)([Object(a.b)(d.a)],p.prototype,"apiKey",void 0),Object(s.a)([Object(a.b)({type:[String],json:{read:{source:"category",reader:e=>e?e.split(","):null},write:{target:"category",writer:(e,t)=>{t.category=e?e.join(","):null}}}})],p.prototype,"categories",void 0),Object(s.a)([Object(a.b)({type:String,json:{write:!0}})],p.prototype,"countryCode",void 0),Object(s.a)([Object(a.b)({type:l.a,json:{write:{writer:(e,t)=>{t.location=e?e.clone().normalize():null}}}})],p.prototype,"location",void 0),Object(s.a)([Object(a.b)({type:Number,json:{write:!0}})],p.prototype,"maxSuggestions",void 0),Object(s.a)([Object(a.b)({type:c.a,json:{read:{source:"outSR"},write:{target:"outSR"}}})],p.prototype,"outSpatialReference",void 0),Object(s.a)([Object(a.b)({type:u.a,json:{write:{writer:(e,t)=>{const r=e?e.shiftCentralMeridian():null;t.searchExtent=JSON.stringify(r)}}}})],p.prototype,"searchExtent",void 0),Object(s.a)([Object(a.b)({type:String,json:{write:!0}})],p.prototype,"text",void 0),p=Object(s.a)([Object(n.a)("esri.tasks.support.SuggestLocationsParameters")],p),p.from=Object(i.m)(p);var h=p;t.a=h},866:function(e,t,r){"use strict";var s=r(81),i=(r(79),r(90)),a=r(80),n=(r(87),r(84)),o=r(83),c=(r(82),r(85),r(86),r(740)),l=r(88),u=r(91),d=r(127),p=r(253),h=r(278),b=(r(168),r(115)),y=r(741);const g=/https?:\/\/services.*\.arcgis\.com/i,m=/(?:\{([^}]+)\})/g,f=a.a.getLogger("esri.widgets.Search.support.layerSearchUtils");function O(e,t){const{exactMatch:r=!1,location:s,maxResults:a,spatialReference:n,source:o,sourceIndex:c,suggestResult:p,view:h}=e,{layer:g,filter:m,zoomScale:O}=o,v=h&&h.scale,M=j(o,h),N=t&&t.signal;return w(g).then((()=>{const e=g.popupTemplate;return e?e.getRequiredFields(g.fields):null})).then((e=>{var t,j;const{objectIdField:w,returnZ:E}=g,C=T(o);if(!I(g,C))throw f.error("invalid-field: displayField is invalid."),new u.a("getResults():invalid-field","displayField is invalid.");const F=e&&e.length?e:[C],A=o.outFields||F,U=S(A);if(-1!==A.indexOf(w)||U||A.push(w),!U&&!x(g,A))throw f.error("invalid-field: outField is invalid."),new u.a("getResults():invalid-field","outField is invalid.");const G=g.createQuery(),{orderByFields:D}=o;if(D&&(G.orderByFields=D),n){G.outSpatialReference=n;const e=1/Object(b.f)(n);e&&(G.maxAllowableOffset=e)}const P="mesh"===g.geometryType||"multipatch"===g.geometryType,B=(null==(t=g.capabilities)||null==(j=t.data)?void 0:j.supportsZ)&&!P;if(G.returnZ=B&&!1!==E,G.returnGeometry=!0,G.multipatchOption=P?"xyFootprint":null,A&&(G.outFields=A),s)G.geometry=s;else if(p.key)G.objectIds=[parseInt(p.key,10)];else{const e=o.searchFields||[C];if(!x(g,e))throw f.error("invalid-field: search field is invalid."),new u.a("getResults():invalid-field","search field is invalid.");if(_(g)&&(G.num=a),M&&(G.geometry=M),!p.text.trim())return[];const{prefix:t="",suffix:s=""}=o,i=R(L(`${t}${p.text}${s}`),g,e,m,r);if(!i)return[];G.where=i}return g.queryFeatures(G,{signal:N}).then((e=>function(e,t,r,s,a,n,o){return e.features.map((e=>function(e,t,r,s,a,n,o){const c=e.clone(),u=e.sourceLayer,p=u&&u.objectIdField,h=p&&e.attributes[p],b=k(e,r.searchTemplate,a),g=Object(y.a)(c.geometry,t,n),m="number"==typeof o?Object(y.d)(Object(i.a)(g),t,o):g,f=e.clone();return Object(l.k)(m)&&(f.geometry=d.a.fromExtent(m)),{extent:m,target:f,feature:c,key:h,name:b,sourceIndex:s}}(e,t,r,s,a,n,o)))}(e,h,o,c,C,v,O)))}))}function v(e,t){const{source:r,spatialReference:s,view:i,suggestTerm:a,maxSuggestions:n,sourceIndex:o}=e,{layer:c,filter:l}=r,d=t&&t.signal,p=j(r,i);return w(c).then((()=>{if(!_(c))return[];const e=T(r),t=r.searchFields||[e],i=[];r.suggestionTemplate?r.suggestionTemplate.replace(m,((e,t)=>(i.push(t),e))):i.push(e);const h=S(i);-1!==i.indexOf(c.objectIdField)||h||i.push(c.objectIdField);const b=I(c,e),y=h||x(c,i),g=x(c,t);if(!b)throw f.error("invalid-field: displayField is invalid."),new u.a("getSuggestions():invalid-field","displayField is invalid.");if(!y)throw f.error("invalid-field: outField is invalid."),new u.a("getSuggestions():invalid-field","outField is invalid.");if(!g)throw f.error("invalid-field: search field is invalid."),new u.a("getSuggestions():invalid-field","search field is invalid.");const O=c.createQuery(),{orderByFields:v}=r;if(v&&(O.orderByFields=v),O.outSpatialReference=s,O.returnGeometry=!1,O.num=n,O.outFields=i,p&&(O.geometry=p),!a.trim())return[];const{prefix:j="",suffix:w=""}=r,M=R(L(`${j}${a}${w}`),c,t,l,!1);return M?(O.where=M,c.queryFeatures(O,{signal:d}).then((t=>function(e,t,r,s){return e.features.map((e=>function(e,t,r,s){const i=e.sourceLayer,{attributes:a}=e,{objectIdField:n}=i,o=a[n];return{text:k(e,t.suggestionTemplate,s),key:o,sourceIndex:r}}(e,t,r,s)))}(t,r,o,e)))):[]}))}function j(e,t){const{filter:r,withinViewEnabled:s}=e,i=t&&t.extent;return r&&r.geometry||(s&&i?i:void 0)}function S(e){return e&&-1!==e.indexOf("*")}async function w(e){e&&await e.load()}function _(e){var t,r,s;return null!=(t=null==e||null==(r=e.capabilities)||null==(s=r.query)?void 0:s.supportsPagination)&&t}function T(e){return e.displayField||e.layer.displayField||function(e){let t="";if(e){const{fields:r}=e;r&&r.some((e=>"string"===e.type&&(t=e.name,!0)))}return t}(e.layer)}function x(e,t){return!(!e||!t)&&t.every((t=>I(e,t)))}function I(e,t){return!!e.getField(t)}function L(e){return e.replace(/\'/g,"''")}function M(e,t){const r=t&&t.where;return r?`(${e}) AND (${r})`:e}function R(e,t,r,s,i){const{definitionExpression:a}=t;let n="";if(e){const a=g.test(t.url)&&function(e){for(let t=0;t<e.length;t++)if(e.charCodeAt(t)>255)return!0;return!1}(e)?"N":"";r&&r.forEach((r=>{const o=t.getField(r),c="function"==typeof t.getFieldDomain&&t.getFieldDomain(r),l=(c&&"coded-value"===c.type?function(e,t,r){let s=null;const{codedValues:i}=e;return i&&i.some((e=>{const i=e.name,a=r?i:i.toLowerCase();return(r?t:t.toLowerCase())===a&&(s=e.code.toString(),!0)})),s}(c,e,i):null)||e||null;if(null!==l){const e=function(e,t,r,s,i){const a=t.type,n=t.name;if("string"===a||"date"===a||"global-id"===a)return M(i?`${n} = ${r}'${e}'`:`UPPER(${n}) LIKE ${r}'%${e.toUpperCase()}%'`,s);if("oid"===a||"small-integer"===a||"integer"===a||"single"===a||"double"===a){const t=Number(e);return isNaN(t)?null:M(`${n} = ${t}`,s)}return M(`${n} = ${e}`,s)}(l,o,a,s,i);e&&(n+=function(e,t){return e?` OR (${t})`:`(${t})`}(n,e))}}))}return a?`(${a}) AND (${n})`:n}function k(e,t,r){const s=e.sourceLayer,{attributes:i}=e,a="function"==typeof s.getFieldDomain&&s.getFieldDomain(r);if(t)return Object(h.a)(t,i);if(r&&i){const e=s.getField(r),t=function(e,t){return e[Object.keys(e).find((e=>e.toLowerCase()===t.toLowerCase()))]}(i,r);return null==t?"":a&&"coded-value"===a.type?function(e,t){let r=null;const{codedValues:s}=e;return s&&s.length&&s.some((e=>e.code===t&&(r=e.name,!0))),r}(a,t):"date"===(null==e?void 0:e.type)?Object(p.b)(new Date(t)):"number"==typeof t?t.toString():"string"!=typeof t?"":t.trim()}return""}var N;let E=N=class extends c.a{constructor(){super(...arguments),this.displayField=null,this.exactMatch=null,this.orderByFields=null,this.searchFields=null,this.searchTemplate=null,this.suggestionTemplate=null,this.getResults=(e,t)=>O({source:this,...e},t),this.getSuggestions=(e,t)=>v({source:this,...e},t)}set layer(e){this._set("layer",e),e&&e.load().catch((()=>{}))}get name(){return this._getLayerTitle()||""}set name(e){void 0!==e?this._override("name",e):this._clearOverride("name")}clone(){return new N({autoNavigate:this.autoNavigate,filter:this.filter,maxResults:this.maxResults,maxSuggestions:this.maxSuggestions,minSuggestCharacters:this.minSuggestCharacters,outFields:this.outFields?Object(i.a)(this.outFields):null,placeholder:this.placeholder,popupEnabled:this.popupEnabled,prefix:this.prefix,resultGraphicEnabled:this.resultGraphicEnabled,resultSymbol:this.resultSymbol?this.resultSymbol.clone():null,suggestionsEnabled:this.suggestionsEnabled,suffix:this.suffix,withinViewEnabled:this.withinViewEnabled,displayField:this.displayField,exactMatch:this.exactMatch,layer:this.layer,searchFields:this.searchFields?Object(i.a)(this.searchFields):null,suggestionTemplate:this.suggestionTemplate,zoomScale:this.zoomScale})}_getFirstStringField(){const e=this.layer;let t="";return e&&e.fields&&e.fields.some((e=>"string"===e.type&&(t=e.name,!0))),t}_getDisplayField(){return this.displayField||this.layer.displayField||this._getFirstStringField()}_getSearchFieldsString(){const{layer:e,searchFields:t}=this;return e.loaded?`: ${(t||[this._getDisplayField()]).map((t=>{const r=e.getField(t);return r&&r.alias||t})).join(", ")}`:""}_getLayerTitle(){const{layer:e}=this;if(!e)return;const{title:t}=e;return t?`${t}${this._getSearchFieldsString()}`:void 0}};Object(s.a)([Object(n.b)({json:{read:{source:"field.name"},write:{target:"field.name"}}})],E.prototype,"displayField",void 0),Object(s.a)([Object(n.b)({json:{read:{source:"field.exactMatch"},write:{target:"field.exactMatch"}}})],E.prototype,"exactMatch",void 0),Object(s.a)([Object(n.b)({value:null})],E.prototype,"layer",null),Object(s.a)([Object(n.b)()],E.prototype,"name",null),Object(s.a)([Object(n.b)({type:[String],json:{write:!0}})],E.prototype,"orderByFields",void 0),Object(s.a)([Object(n.b)()],E.prototype,"searchFields",void 0),Object(s.a)([Object(n.b)()],E.prototype,"searchTemplate",void 0),Object(s.a)([Object(n.b)()],E.prototype,"suggestionTemplate",void 0),E=N=Object(s.a)([Object(o.a)("esri.widgets.Search.LayerSearchSource")],E);var C=E;t.a=C},892:function(e,t,r){"use strict";var s,i=r(81),a=(r(79),r(90)),n=(r(80),r(87),r(84)),o=r(96),c=r(83),l=r(94),u=(r(82),r(85),r(86),r(919)),d=r(740),p=r(814);let h=s=class extends d.a{constructor(){super(...arguments),this.apiKey=null,this.categories=null,this.countryCode=null,this.defaultZoomScale=null,this.locator=null,this.locationType=null,this.name="",this.placeholder="",this.searchTemplate="",this.singleLineFieldName=null,this.suggestionsEnabled=null,this.zoomScale=null,this.getResults=(e,t)=>Object(p.a)({source:this,...e},t),this.getSuggestions=(e,t)=>Object(p.b)({source:this,...e},t)}readLocator(e,t){const{url:r}=t;return r?new u.a({url:r}):null}writeLocator(e,t){t.url=e?e.url:null}clone(){return new s({apiKey:this.apiKey,autoNavigate:this.autoNavigate,filter:this.filter,maxResults:this.maxResults,maxSuggestions:this.maxSuggestions,minSuggestCharacters:this.minSuggestCharacters,outFields:this.outFields?Object(a.a)(this.outFields):null,placeholder:this.placeholder,popupEnabled:this.popupEnabled,prefix:this.prefix,resultGraphicEnabled:this.resultGraphicEnabled,resultSymbol:this.resultSymbol?this.resultSymbol.clone():null,suggestionsEnabled:this.suggestionsEnabled,suffix:this.suffix,withinViewEnabled:this.withinViewEnabled,categories:this.categories?Object(a.a)(this.categories):null,countryCode:this.countryCode,locationType:this.locationType,locator:this.locator,searchTemplate:this.searchTemplate,singleLineFieldName:this.singleLineFieldName,zoomScale:this.zoomScale})}};Object(i.a)([Object(n.b)()],h.prototype,"apiKey",void 0),Object(i.a)([Object(n.b)()],h.prototype,"categories",void 0),Object(i.a)([Object(n.b)()],h.prototype,"countryCode",void 0),Object(i.a)([Object(n.b)({json:{write:!0}})],h.prototype,"defaultZoomScale",void 0),Object(i.a)([Object(n.b)({type:u.a})],h.prototype,"locator",void 0),Object(i.a)([Object(o.a)("locator",["url"])],h.prototype,"readLocator",null),Object(i.a)([Object(l.a)("locator")],h.prototype,"writeLocator",null),Object(i.a)([Object(n.b)()],h.prototype,"locationType",void 0),Object(i.a)([Object(n.b)({json:{write:!0}})],h.prototype,"name",void 0),Object(i.a)([Object(n.b)({json:{write:!0}})],h.prototype,"placeholder",void 0),Object(i.a)([Object(n.b)()],h.prototype,"searchTemplate",void 0),Object(i.a)([Object(n.b)({json:{write:!0}})],h.prototype,"singleLineFieldName",void 0),Object(i.a)([Object(n.b)({json:{read:{source:"suggest"},write:{target:"suggest"}}})],h.prototype,"suggestionsEnabled",void 0),Object(i.a)([Object(n.b)({json:{write:!0}})],h.prototype,"zoomScale",void 0),h=s=Object(i.a)([Object(c.a)("esri.widgets.Search.LocatorSearchSource")],h);var b=h;t.a=b},919:function(e,t,r){"use strict";var s=r(81),i=(r(79),r(80),r(87)),a=r(84),n=r(83),o=(r(82),r(85),r(86),r(97)),c=r(321),l=r(104),u=r(139);var d=r(89),p=r(111),h=r(101);let b=class extends d.a{constructor(e){super(e),this.address=null,this.attributes=null,this.extent=null,this.location=null,this.score=null}};Object(s.a)([Object(a.b)({type:String,json:{write:!0}})],b.prototype,"address",void 0),Object(s.a)([Object(a.b)({type:Object,json:{write:!0}})],b.prototype,"attributes",void 0),Object(s.a)([Object(a.b)({type:h.a,json:{write:!0}})],b.prototype,"extent",void 0),Object(s.a)([Object(a.b)({type:p.a,json:{write:!0}})],b.prototype,"location",void 0),Object(s.a)([Object(a.b)({type:Number,json:{write:!0}})],b.prototype,"score",void 0),b=Object(s.a)([Object(n.a)("esri.tasks.support.AddressCandidate")],b);var y=b,g=r(815);function m({data:e}){if(!e)return[];const{candidates:t,spatialReference:r}=e;return t?t.map((e=>{if(!e)return;const{extent:t,location:s}=e,i=!t||(a=t)&&"number"==typeof a.xmin&&"number"==typeof a.ymin&&"number"==typeof a.xmax&&"number"==typeof a.ymax;var a;return function(e){return e&&"number"==typeof e.x&&"number"==typeof e.y}(s)&&i?(t&&(t.spatialReference=r),s.spatialReference=r,y.fromJSON(e)):void 0})):[]}r(99);let f=class extends d.a{constructor(e){super(e),this.addresses=null,this.categories=null,this.countryCode=null,this.locationType=null,this.outSpatialReference=null}};Object(s.a)([Object(a.b)({type:[Object],json:{read:{reader:e=>e&&e.records?e.records.map((e=>e.attributes)):null},write:{writer:(e,t)=>{const r=[];Array.isArray(e)&&e.forEach((e=>{r.push({attributes:e})})),t.addresses={records:r}}}}})],f.prototype,"addresses",void 0),Object(s.a)([Object(a.b)({type:[String],json:{read:{source:"category",reader:e=>e?e.split(","):null},write:{target:"category",writer:(e,t)=>{t.category=e?e.join(","):null}}}})],f.prototype,"categories",void 0),Object(s.a)([Object(a.b)({type:String,json:{read:{source:"sourceCountry"},write:{target:"sourceCountry"}}})],f.prototype,"countryCode",void 0),Object(s.a)([Object(a.b)({type:String,json:{write:!0}})],f.prototype,"locationType",void 0),Object(s.a)([Object(a.b)({type:o.a,json:{read:{source:"outSR"},write:{target:"outSR"}}})],f.prototype,"outSpatialReference",void 0),f=Object(s.a)([Object(n.a)("esri.tasks.support.AddressesToLocationsParameters")],f),f.from=Object(i.m)(f);var O=f;function v(e){const{data:t}=e;if(!t)return[];const{locations:r,spatialReference:s}=t;return r?r.map((e=>{const{location:t}=e;return t&&(t.spatialReference=s),y.fromJSON(e)})):[]}var j=r(816);function S({data:e}){if(!e)return;const{address:t,location:r}=e,s=t&&t.Match_addr||"";return y.fromJSON({address:s,attributes:t||{},location:r,score:100})}let w=class extends d.a{constructor(e){super(e),this.isCollection=null,this.magicKey=null,this.text=null}};Object(s.a)([Object(a.b)({type:Boolean,json:{write:!0}})],w.prototype,"isCollection",void 0),Object(s.a)([Object(a.b)({type:String,json:{write:!0}})],w.prototype,"magicKey",void 0),Object(s.a)([Object(a.b)({type:String,json:{write:!0}})],w.prototype,"text",void 0),w=Object(s.a)([Object(n.a)("esri.tasks.support.SuggestionCandidate")],w);var _=w,T=r(817);function x(e){const{data:t}=e;if(!t)return[];const{suggestions:r}=t;return r?r.map((e=>new _(e))):[]}let I=class extends c.a{constructor(e){super(e),this.outSpatialReference=null,this.url=null}addressToLocations(e,t){!e.outSpatialReference&&this.outSpatialReference&&(e.outSpatialReference=this.outSpatialReference);const r={...this.requestOptions,...t};return async function(e,t,r){t=g.a.from(t);const s=Object(u.c)(e),{address:i,...a}=t.toJSON(),n={...i,...a,f:"json"},o=Object(u.b)({...s.query,...n}),c=Object(u.a)(o,r),d=`${s.path}/findAddressCandidates`;return Object(l.default)(d,c).then(m)}(this.url,e,r)}suggestLocations(e,t){const r={...this.requestOptions,...t};return async function(e,t,r){const s=Object(u.c)(e),i={...(t=T.a.from(t)).toJSON(),f:"json"},a=Object(u.b)({...s.query,...i}),n=Object(u.a)(a,r),o=`${s.path}/suggest`;return Object(l.default)(o,n).then(x)}(this.url,e,r)}addressesToLocations(e,t){!e.outSpatialReference&&this.outSpatialReference&&(e.outSpatialReference=this.outSpatialReference);const r={...this.requestOptions,...t};return async function(e,t,r){t=O.from(t);const s=Object(u.c)(e),i={...t.toJSON(),f:"json"},a=Object(u.b)({...s.query,...i}),n=Object(u.a)(a,r),o=`${s.path}/geocodeAddresses`;return Object(l.default)(o,n).then(v)}(this.url,e,r)}locationToAddress(e,t){!e.outSpatialReference&&this.outSpatialReference&&(e.outSpatialReference=this.outSpatialReference);const r={...this.requestOptions,...t};return async function(e,t,r){t=j.a.from(t);const s=Object(u.c)(e),i={...t.toJSON(),f:"json"},a=Object(u.b)({...s.query,...i}),n=Object(u.a)(a,r),o=`${s.path}/reverseGeocode`;return Object(l.default)(o,n).then(S)}(this.url,e,r)}};Object(s.a)([Object(a.b)({type:o.a})],I.prototype,"outSpatialReference",void 0),Object(s.a)([Object(a.b)()],I.prototype,"url",void 0),I=Object(s.a)([Object(n.a)("esri.tasks.Locator")],I);var L=I;t.a=L}}]);
//# sourceMappingURL=90.c42e5849.chunk.js.map