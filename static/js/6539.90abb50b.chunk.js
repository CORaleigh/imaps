"use strict";(globalThis.webpackChunkimaps=globalThis.webpackChunkimaps||[]).push([[6539],{68748:(e,t,i)=>{i.d(t,{a:()=>p,z:()=>c});var n=i(27366),o=i(40281),r=i(60354),s=i(41691),a=(i(93169),i(32718)),l=i(92026),d=i(49861),h=(i(63780),i(25243),i(69912));a.Z.getLogger("esri.core.support.OwningCollection");let p=class extends((0,s.p)(o.Z)){constructor(e){super(e),this.handles.add([this.on("before-add",(e=>{(0,l.Wi)(e.item)&&e.preventDefault()})),this.on("after-add",(e=>this._own(e.item))),this.on("after-remove",(e=>this._release(e.item)))])}get owner(){return this._get("owner")}set owner(e){e!==this._get("owner")&&(this._releaseAll(),this._set("owner",e),this._ownAll())}_ownAll(){for(const e of this.items)this._own(e)}_releaseAll(){for(const e of this.items)this._release(e)}_createNewInstance(e){return this.itemType?new(o.Z.ofType(this.itemType.Type))(e):new o.Z(e)}};function c(e,t){return{type:e,cast:r.R,set(i){const n=(0,r.Z)(i,this._get(t),e);n.owner=this,this._set(t,n)}}}(0,n._)([(0,d.Cb)()],p.prototype,"owner",null),p=(0,n._)([(0,h.j)("esri.core.support.OwningCollection")],p)},58971:(e,t,i)=>{i.d(t,{G6:()=>P,Ie:()=>x,J9:()=>C,RF:()=>y,U1:()=>b,vY:()=>l,ym:()=>f});var n=i(92026),o=i(77981);const r=(e,t,i)=>[t,i],s=(e,t,i)=>[t,i,e[2]],a=(e,t,i)=>[t,i,e[2],e[3]];function l(e){return e?{originPosition:"upper-left"===e.originPosition?"upperLeft":"lower-left"===e.originPosition?"lowerLeft":e.originPosition,scale:e.tolerance?[e.tolerance,e.tolerance]:[1,1],translate:(0,n.pC)(e.extent)?[e.extent.xmin,e.extent.ymax]:[0,0]}:null}function d(e,t){let{scale:i,translate:n}=e;return Math.round((t-n[0])/i[0])}function h(e,t){let{scale:i,translate:n}=e;return Math.round((n[1]-t)/i[1])}function p(e,t,i){const n=[];let o,r,s,a;for(let l=0;l<i.length;l++){const p=i[l];l>0?(s=d(e,p[0]),a=h(e,p[1]),s===o&&a===r||(n.push(t(p,s-o,a-r)),o=s,r=a)):(o=d(e,p[0]),r=h(e,p[1]),n.push(t(p,o,r)))}return n.length>0?n:null}function c(e,t){let{scale:i,translate:n}=e;return t*i[0]+n[0]}function u(e,t){let{scale:i,translate:n}=e;return n[1]-t*i[1]}function v(e,t,i){const n=new Array(i.length);if(!i.length)return n;const[o,r]=e.scale;let s=c(e,i[0][0]),a=u(e,i[0][1]);n[0]=t(i[0],s,a);for(let l=1;l<i.length;l++){const e=i[l];s+=e[0]*o,a-=e[1]*r,n[l]=t(e,s,a)}return n}function _(e,t,i){const n=new Array(i.length);for(let o=0;o<i.length;o++)n[o]=v(e,t,i[o]);return n}function g(e,t,i,n,o){return t.points=function(e,t,i,n){return p(e,i?n?a:s:n?s:r,t)}(e,i.points,n,o),t}function y(e,t,i,n,o){return t.x=d(e,i.x),t.y=h(e,i.y),t!==i&&(n&&(t.z=i.z),o&&(t.m=i.m)),t}function m(e,t,i,n,o){const l=function(e,t,i,n){const o=[],l=i?n?a:s:n?s:r;for(let r=0;r<t.length;r++){const i=p(e,l,t[r]);i&&i.length>=3&&o.push(i)}return o.length?o:null}(e,i.rings,n,o);return l?(t.rings=l,t):null}function w(e,t,i,n,o){const l=function(e,t,i,n){const o=[],l=i?n?a:s:n?s:r;for(let r=0;r<t.length;r++){const i=p(e,l,t[r]);i&&i.length>=2&&o.push(i)}return o.length?o:null}(e,i.paths,n,o);return l?(t.paths=l,t):null}function f(e,t){return e&&t?(0,o.wp)(t)?y(e,{},t,!1,!1):(0,o.l9)(t)?w(e,{},t,!1,!1):(0,o.oU)(t)?m(e,{},t,!1,!1):(0,o.aW)(t)?g(e,{},t,!1,!1):(0,o.YX)(t)?function(e,t,i,n,o){return t.xmin=d(e,i.xmin),t.ymin=h(e,i.ymin),t.xmax=d(e,i.xmax),t.ymax=h(e,i.ymax),t!==i&&(n&&(t.zmin=i.zmin,t.zmax=i.zmax),o&&(t.mmin=i.mmin,t.mmax=i.mmax)),t}(e,{},t,!1,!1):null:null}function C(e,t,i,o,l){return(0,n.pC)(i)&&(t.points=function(e,t,i,n){return v(e,i?n?a:s:n?s:r,t)}(e,i.points,o,l)),t}function b(e,t,i,o,r){return(0,n.Wi)(i)||(t.x=c(e,i.x),t.y=u(e,i.y),t!==i&&(o&&(t.z=i.z),r&&(t.m=i.m))),t}function x(e,t,i,o,l){return(0,n.pC)(i)&&(t.rings=function(e,t,i,n){return _(e,i?n?a:s:n?s:r,t)}(e,i.rings,o,l)),t}function P(e,t,i,o,l){return(0,n.pC)(i)&&(t.paths=function(e,t,i,n){return _(e,i?n?a:s:n?s:r,t)}(e,i.paths,o,l)),t}},93655:(e,t,i)=>{i.d(t,{Z:()=>u});var n=i(27366),o=i(49861),r=(i(63780),i(93169),i(25243),i(69912)),s=i(68748),a=i(30651),l=i(6693),d=i(56811),h=i(78983),p=i(64575);let c=class extends((0,l.h)((0,d.M)(a.Z))){constructor(e){super(e),this.elevationInfo=null,this.graphics=new h.J,this.screenSizePerspectiveEnabled=!0,this.type="graphics",this.internal=!1}destroy(){this.removeAll(),this.graphics.destroy()}add(e){return this.graphics.add(e),this}addMany(e){return this.graphics.addMany(e),this}removeAll(){return this.graphics.removeAll(),this}remove(e){this.graphics.remove(e)}removeMany(e){this.graphics.removeMany(e)}on(e,t){return super.on(e,t)}graphicChanged(e){this.emit("graphic-update",e)}};(0,n._)([(0,o.Cb)({type:p.ZP})],c.prototype,"elevationInfo",void 0),(0,n._)([(0,o.Cb)((0,s.z)(h.J,"graphics"))],c.prototype,"graphics",void 0),(0,n._)([(0,o.Cb)({type:["show","hide"]})],c.prototype,"listMode",void 0),(0,n._)([(0,o.Cb)()],c.prototype,"screenSizePerspectiveEnabled",void 0),(0,n._)([(0,o.Cb)({readOnly:!0})],c.prototype,"type",void 0),(0,n._)([(0,o.Cb)({constructOnly:!0})],c.prototype,"internal",void 0),c=(0,n._)([(0,r.j)("esri.layers.GraphicsLayer")],c);const u=c},96669:(e,t,i)=>{function n(e,t){return t?"xoffset"in t&&t.xoffset?Math.max(e,Math.abs(t.xoffset)):"yoffset"in t&&t.yoffset?Math.max(e,Math.abs(t.yoffset||0)):e:e}function o(e,t){return"number"==typeof e?e:e&&e.stops&&e.stops.length?function(e){let t=0,i=0;for(let n=0;n<e.length;n++){const o=e[n].size;"number"==typeof o&&(t+=o,i++)}return t/i}(e.stops):t}function r(e,t){if(!t)return e;const i=t.filter((e=>"size"===e.type)).map((t=>{const{maxSize:i,minSize:n}=t;return(o(i,e)+o(n,e))/2}));let n=0;const r=i.length;if(0===r)return e;for(let o=0;o<r;o++)n+=i[o];const s=Math.floor(n/r);return Math.max(s,e)}function s(e){const t=e&&e.renderer,i="touch"===(e&&e.event&&e.event.pointerType)?9:6;if(!t)return i;const o="visualVariables"in t?r(i,t.visualVariables):i;if("simple"===t.type)return n(o,t.symbol);if("unique-value"===t.type){let e=o;return t.uniqueValueInfos.forEach((t=>{e=n(e,t.symbol)})),e}if("class-breaks"===t.type){let e=o;return t.classBreakInfos.forEach((t=>{e=n(e,t.symbol)})),e}return"dot-density"===t.type||t.type,o}i.d(t,{k:()=>s})},78983:(e,t,i)=>{i.d(t,{J:()=>d});var n=i(27366),o=i(52639),r=(i(32718),i(25243)),s=(i(63780),i(93169),i(75366),i(42017)),a=i(69912),l=i(68748);let d=class extends l.a{_own(e){e.layer&&"remove"in e.layer&&e.layer!==this.owner&&e.layer.remove(e),e.layer=this.owner}_release(e){e.layer===this.owner&&(e.layer=null)}};(0,n._)([(0,s.c)({Type:o.Z,ensureType:(0,r.se)(o.Z)})],d.prototype,"itemType",void 0),d=(0,n._)([(0,a.j)("esri.support.GraphicsCollection")],d)},74509:(e,t,i)=>{i.d(t,{Lt:()=>d,Ou:()=>p,RL:()=>l,VW:()=>s,Zz:()=>r,vQ:()=>c,vu:()=>a,zx:()=>u});var n=i(92026),o=i(88152);function r(e,t){return(0,n.Wi)(t)||!t.mode?e?"absolute-height":"on-the-ground":t.mode}function s(e,t){return r(!!(0,n.pC)(e)&&e.hasZ,t)}function a(e){const t=h(e);return s(e.geometry,t)}function l(e){const t=h(e),i=s(e.geometry,t);return{mode:i,offset:(0,n.pC)(t)&&"on-the-ground"!==i?(0,n.Pt)(t.offset,0)*(0,o.Z7)((0,n.Pt)(t.unit,"meters")):0}}function d(e){if("on-the-ground"===a(e))return!1;const t=h(e),i=(0,n.pC)(t)&&t.featureExpressionInfo?t.featureExpressionInfo.expression:null;return!(!i||"0"===i)}function h(e){return e.layer&&"elevationInfo"in e.layer?e.layer.elevationInfo:null}function p(e,t,i){if((0,n.Wi)(i)||!i.mode)return;const o=e.hasZ?e.z:0,r=(0,n.pC)(i.offset)?i.offset:0;switch(i.mode){case"absolute-height":return o-r;case"on-the-ground":return 0;case"relative-to-ground":return o-((0,n.Pt)(t.elevationProvider.getElevation(e.x,e.y,e.z,e.spatialReference,"ground"),0)+r);case"relative-to-scene":return o-((0,n.Pt)(t.elevationProvider.getElevation(e.x,e.y,e.z,e.spatialReference,"scene"),0)+r)}}function c(e,t,i){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return v(e,t.x,t.y,t.hasZ?t.z:0,t.spatialReference,i,n)}function u(e,t,i,n){let o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;return v(e,t[0],t[1],t.length>2?t[2]:0,i,n,o)}function v(e,t,i,o,r,s){let a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;if((0,n.Wi)(s))return;const l=(0,n.pC)(a)?a.mode:"absolute-height";if("on-the-ground"===l)return 0;const{absoluteZ:d}=_(t,i,o,r,e,s);return g(d,t,i,o,r,e,a,l)}function _(e,t,i,o,r,s){const a=(0,n.pC)(s.offset)?s.offset:0;switch(s.mode){case"absolute-height":return{absoluteZ:i+a,elevation:0};case"on-the-ground":{const i=(0,n.Pt)(r.elevationProvider.getElevation(e,t,0,o,"ground"),0);return{absoluteZ:i,elevation:i}}case"relative-to-ground":{const s=(0,n.Pt)(r.elevationProvider.getElevation(e,t,i,o,"ground"),0);return{absoluteZ:i+s+a,elevation:s}}case"relative-to-scene":{const s=(0,n.Pt)(r.elevationProvider.getElevation(e,t,i,o,"scene"),0);return{absoluteZ:i+s+a,elevation:s}}}}function g(e,t,i,o,r,s,a,l){const d=(0,n.pC)(a)&&(0,n.pC)(a.offset)?a.offset:0;switch(l){case"absolute-height":return e-d;case"relative-to-ground":return e-((0,n.Pt)(s.elevationProvider.getElevation(t,i,o,r,"ground"),0)+d);case"relative-to-scene":return e-((0,n.Pt)(s.elevationProvider.getElevation(t,i,o,r,"scene"),0)+d)}}},48202:(e,t,i)=>{var n,o,r,s,a,l,d,h,p,c,u,v,_,g,y,m,w,f,C,b,x,P,S,T,O,H,V,E,L,A,M,R,I,D,k,N,Z,U,G,z,B,j,W,F,K,X,q,Y,J,Q,$,ee,te,ie,ne,oe,re,se,ae,le,de;i.d(t,{$y:()=>P,AH:()=>o,CS:()=>q,DD:()=>h,Dd:()=>L,Em:()=>x,JS:()=>K,Ky:()=>p,Lh:()=>Y,Qb:()=>re,RL:()=>n,RS:()=>ae,TF:()=>b,Tx:()=>a,UR:()=>w,UX:()=>oe,bj:()=>X,eZ:()=>d,id:()=>O,kP:()=>N,of:()=>u,r4:()=>z,sj:()=>Z,v2:()=>r,zQ:()=>E,zV:()=>m}),function(e){e[e.BUTT=0]="BUTT",e[e.ROUND=1]="ROUND",e[e.SQUARE=2]="SQUARE",e[e.UNKNOWN=4]="UNKNOWN"}(n||(n={})),function(e){e[e.BEVEL=0]="BEVEL",e[e.ROUND=1]="ROUND",e[e.MITER=2]="MITER",e[e.UNKNOWN=4]="UNKNOWN"}(o||(o={})),function(e){e[e.SCREEN=0]="SCREEN",e[e.MAP=1]="MAP"}(r||(r={})),function(e){e[e.Tint=0]="Tint",e[e.Ignore=1]="Ignore",e[e.Multiply=99]="Multiply"}(s||(s={})),function(e){e.Both="Both",e.JustBegin="JustBegin",e.JustEnd="JustEnd",e.None="None"}(a||(a={})),function(e){e[e.Mosaic=0]="Mosaic",e[e.Centered=1]="Centered"}(l||(l={})),function(e){e[e.Normal=0]="Normal",e[e.Superscript=1]="Superscript",e[e.Subscript=2]="Subscript"}(d||(d={})),function(e){e[e.MSSymbol=0]="MSSymbol",e[e.Unicode=1]="Unicode"}(h||(h={})),function(e){e[e.Unspecified=0]="Unspecified",e[e.TrueType=1]="TrueType",e[e.PSOpenType=2]="PSOpenType",e[e.TTOpenType=3]="TTOpenType",e[e.Type1=4]="Type1"}(p||(p={})),function(e){e[e.Display=0]="Display",e[e.Map=1]="Map"}(c||(c={})),function(e){e.None="None",e.Loop="Loop",e.Oscillate="Oscillate"}(u||(u={})),function(e){e[e.Z=0]="Z",e[e.X=1]="X",e[e.Y=2]="Y"}(v||(v={})),function(e){e[e.XYZ=0]="XYZ",e[e.ZXY=1]="ZXY",e[e.YXZ=2]="YXZ"}(_||(_={})),function(e){e[e.Rectangle=0]="Rectangle",e[e.RoundedRectangle=1]="RoundedRectangle",e[e.Oval=2]="Oval"}(g||(g={})),function(e){e[e.None=0]="None",e[e.Alpha=1]="Alpha",e[e.Screen=2]="Screen",e[e.Multiply=3]="Multiply",e[e.Add=4]="Add"}(y||(y={})),function(e){e[e.TTB=0]="TTB",e[e.RTL=1]="RTL",e[e.BTT=2]="BTT"}(m||(m={})),function(e){e[e.None=0]="None",e[e.SignPost=1]="SignPost",e[e.FaceNearPlane=2]="FaceNearPlane"}(w||(w={})),function(e){e[e.Float=0]="Float",e[e.String=1]="String",e[e.Boolean=2]="Boolean"}(f||(f={})),function(e){e[e.Intersect=0]="Intersect",e[e.Subtract=1]="Subtract"}(C||(C={})),function(e){e.OpenEnded="OpenEnded",e.Block="Block",e.Crossed="Crossed"}(b||(b={})),function(e){e.FullGeometry="FullGeometry",e.PerpendicularFromFirstSegment="PerpendicularFromFirstSegment",e.ReversedFirstSegment="ReversedFirstSegment",e.PerpendicularToSecondSegment="PerpendicularToSecondSegment",e.SecondSegmentWithTicks="SecondSegmentWithTicks",e.DoublePerpendicular="DoublePerpendicular",e.OppositeToFirstSegment="OppositeToFirstSegment",e.TriplePerpendicular="TriplePerpendicular",e.HalfCircleFirstSegment="HalfCircleFirstSegment",e.HalfCircleSecondSegment="HalfCircleSecondSegment",e.HalfCircleExtended="HalfCircleExtended",e.OpenCircle="OpenCircle",e.CoverageEdgesWithTicks="CoverageEdgesWithTicks",e.GapExtentWithDoubleTicks="GapExtentWithDoubleTicks",e.GapExtentMidline="GapExtentMidline",e.Chevron="Chevron",e.PerpendicularWithArc="PerpendicularWithArc",e.ClosedHalfCircle="ClosedHalfCircle",e.TripleParallelExtended="TripleParallelExtended",e.ParallelWithTicks="ParallelWithTicks",e.Parallel="Parallel",e.PerpendicularToFirstSegment="PerpendicularToFirstSegment",e.ParallelOffset="ParallelOffset",e.OffsetOpposite="OffsetOpposite",e.OffsetSame="OffsetSame",e.CircleWithArc="CircleWithArc",e.DoubleJog="DoubleJog",e.PerpendicularOffset="PerpendicularOffset",e.LineExcludingLastSegment="LineExcludingLastSegment",e.MultivertexArrow="MultivertexArrow",e.CrossedArrow="CrossedArrow",e.ChevronArrow="ChevronArrow",e.ChevronArrowOffset="ChevronArrowOffset",e.PartialFirstSegment="PartialFirstSegment",e.Arch="Arch",e.CurvedParallelTicks="CurvedParallelTicks",e.Arc90Degrees="Arc90Degrees"}(x||(x={})),function(e){e.Mitered="Mitered",e.Bevelled="Bevelled",e.Rounded="Rounded",e.Square="Square",e.TrueBuffer="TrueBuffer"}(P||(P={})),function(e){e.ClosePath="ClosePath",e.ConvexHull="ConvexHull",e.RectangularBox="RectangularBox"}(S||(S={})),function(e){e.BeginningOfLine="BeginningOfLine",e.EndOfLine="EndOfLine"}(T||(T={})),function(e){e.Mitered="Mitered",e.Bevelled="Bevelled",e.Rounded="Rounded",e.Square="Square"}(O||(O={})),function(e){e.Fast="Fast",e.Accurate="Accurate"}(H||(H={})),function(e){e.BeginningOfLine="BeginningOfLine",e.EndOfLine="EndOfLine"}(V||(V={})),function(e){e.Sinus="Sinus",e.Square="Square",e.Triangle="Triangle",e.Random="Random"}(E||(E={})),function(e){e[e.None=0]="None",e[e.Default=1]="Default",e[e.Force=2]="Force"}(L||(L={})),function(e){e[e.Buffered=0]="Buffered",e[e.Left=1]="Left",e[e.Right=2]="Right",e[e.AlongLine=3]="AlongLine"}(A||(A={})),function(e){e[e.Linear=0]="Linear",e[e.Rectangular=1]="Rectangular",e[e.Circular=2]="Circular",e[e.Buffered=3]="Buffered"}(M||(M={})),function(e){e[e.Discrete=0]="Discrete",e[e.Continuous=1]="Continuous"}(R||(R={})),function(e){e[e.AcrossLine=0]="AcrossLine",e[e.AloneLine=1]="AloneLine"}(I||(I={})),function(e){e[e.Left=0]="Left",e[e.Right=1]="Right",e[e.Center=2]="Center",e[e.Justify=3]="Justify"}(D||(D={})),function(e){e[e.Base=0]="Base",e[e.MidPoint=1]="MidPoint",e[e.ThreePoint=2]="ThreePoint",e[e.FourPoint=3]="FourPoint",e[e.Underline=4]="Underline",e[e.CircularCW=5]="CircularCW",e[e.CircularCCW=6]="CircularCCW"}(k||(k={})),function(e){e.Butt="Butt",e.Round="Round",e.Square="Square"}(N||(N={})),function(e){e.NoConstraint="NoConstraint",e.HalfPattern="HalfPattern",e.HalfGap="HalfGap",e.FullPattern="FullPattern",e.FullGap="FullGap",e.Custom="Custom"}(Z||(Z={})),function(e){e[e.None=-1]="None",e[e.Custom=0]="Custom",e[e.Circle=1]="Circle",e[e.OpenArrow=2]="OpenArrow",e[e.ClosedArrow=3]="ClosedArrow",e[e.Diamond=4]="Diamond"}(U||(U={})),function(e){e[e.ExtraLeading=0]="ExtraLeading",e[e.Multiple=1]="Multiple",e[e.Exact=2]="Exact"}(G||(G={})),function(e){e.Bevel="Bevel",e.Round="Round",e.Miter="Miter"}(z||(z={})),function(e){e[e.Default=0]="Default",e[e.String=1]="String",e[e.Numeric=2]="Numeric"}(B||(B={})),function(e){e[e.InsidePolygon=0]="InsidePolygon",e[e.PolygonCenter=1]="PolygonCenter",e[e.RandomlyInsidePolygon=2]="RandomlyInsidePolygon"}(j||(j={})),function(e){e[e.Tint=0]="Tint",e[e.Replace=1]="Replace",e[e.Multiply=2]="Multiply"}(W||(W={})),function(e){e[e.ClipAtBoundary=0]="ClipAtBoundary",e[e.RemoveIfCenterOutsideBoundary=1]="RemoveIfCenterOutsideBoundary",e[e.DoNotTouchBoundary=2]="DoNotTouchBoundary",e[e.DoNotClip=3]="DoNotClip"}(F||(F={})),function(e){e.NoConstraint="NoConstraint",e.WithMarkers="WithMarkers",e.WithFullGap="WithFullGap",e.WithHalfGap="WithHalfGap",e.Custom="Custom"}(K||(K={})),function(e){e.Fixed="Fixed",e.Random="Random",e.RandomFixedQuantity="RandomFixedQuantity"}(X||(X={})),function(e){e.LineMiddle="LineMiddle",e.LineBeginning="LineBeginning",e.LineEnd="LineEnd",e.SegmentMidpoint="SegmentMidpoint"}(q||(q={})),function(e){e.OnPolygon="OnPolygon",e.CenterOfMass="CenterOfMass",e.BoundingBoxCenter="BoundingBoxCenter"}(Y||(Y={})),function(e){e[e.Low=0]="Low",e[e.Medium=1]="Medium",e[e.High=2]="High"}(J||(J={})),function(e){e[e.MarkerCenter=0]="MarkerCenter",e[e.MarkerBounds=1]="MarkerBounds"}(Q||(Q={})),function(e){e[e.None=0]="None",e[e.PropUniform=1]="PropUniform",e[e.PropNonuniform=2]="PropNonuniform",e[e.DifUniform=3]="DifUniform",e[e.DifNonuniform=4]="DifNonuniform"}($||($={})),function(e){e.Tube="Tube",e.Strip="Strip",e.Wall="Wall"}(ee||(ee={})),function(e){e[e.Random=0]="Random",e[e.Increasing=1]="Increasing",e[e.Decreasing=2]="Decreasing",e[e.IncreasingThenDecreasing=3]="IncreasingThenDecreasing"}(te||(te={})),function(e){e[e.Relative=0]="Relative",e[e.Absolute=1]="Absolute"}(ie||(ie={})),function(e){e[e.Normal=0]="Normal",e[e.LowerCase=1]="LowerCase",e[e.Allcaps=2]="Allcaps"}(ne||(ne={})),function(e){e[e.LTR=0]="LTR",e[e.RTL=1]="RTL"}(oe||(oe={})),function(e){e.Draft="Draft",e.Picture="Picture",e.Text="Text"}(re||(re={})),function(e){e[e.Top=0]="Top",e[e.Center=1]="Center",e[e.Baseline=2]="Baseline",e[e.Bottom=3]="Bottom"}(se||(se={})),function(e){e[e.Right=0]="Right",e[e.Upright=1]="Upright"}(ae||(ae={})),function(e){e[e.Small=0]="Small",e[e.Medium=1]="Medium",e[e.Large=2]="Large"}(le||(le={})),function(e){e[e.Calm=0]="Calm",e[e.Rippled=1]="Rippled",e[e.Slight=2]="Slight",e[e.Moderate=3]="Moderate"}(de||(de={}))},85577:(e,t,i)=>{i.d(t,{r:()=>m});i(59486);var n=i(52639),o=(i(51508),i(42537)),r=i(17842),s=i(88396),a=i(6394),l=i(71353),d=i(48202),h=i(70040),p=i(76014),c=i(38561),u=i(16072),v=i(16851),_=i(75021),g=i(7882),y=i(29909);class m extends c.a{constructor(e){super(),this.graphicsLayer=e}visualizeIntersectionPoint(e,t){return this._visualizeSnappingIndicator(new g.Z({x:e.intersectionPoint[0],y:e.intersectionPoint[1],spatialReference:t.coordinateHelper.spatialReference}),C)}visualizePoint(e,t){return this._visualizeSnappingIndicator(new g.Z({x:e.point[0],y:e.point[1],spatialReference:t.coordinateHelper.spatialReference}),b)}visualizeLine(e,t){return this._visualizeSnappingIndicator(new y.Z({paths:[[e.lineStart,e.lineEnd]],spatialReference:t.coordinateHelper.spatialReference}),x)}visualizeParallelSign(e,t){return this._visualizeSnappingIndicator(new y.Z({paths:[[e.lineStart,e.lineEnd]],spatialReference:t.coordinateHelper.spatialReference}),P)}visualizeRightAngleQuad(e,t){return this._visualizeSnappingIndicator(new y.Z({paths:[[e.previousVertex,e.centerVertex,e.nextVertex]],spatialReference:t.coordinateHelper.spatialReference}),H(e))}_visualizeSnappingIndicator(e,t){const i=new n.Z({geometry:e,symbol:t});return this.graphicsLayer.add(i),(0,o.kB)((()=>{this.graphicsLayer.remove(i)}))}}const w=h.O.main.toArray(),f=[...h.O.main.toRgb(),100],C=new u.Z({outline:new v.Z({width:1.5,color:w}),size:15,color:[0,0,0,0]}),b=new u.Z({outline:{width:.5,color:[0,0,0,1]},size:10,color:w}),x=new _.Z({data:{type:"CIMSymbolReference",symbol:{type:"CIMLineSymbol",symbolLayers:[{type:"CIMSolidStroke",enable:!0,capStyle:d.kP.Butt,joinStyle:d.r4.Round,miterLimit:10,width:(0,r.Wz)(p.c.lineHintWidthTarget),color:w}]}}}),P=new _.Z({data:{type:"CIMSymbolReference",symbol:{type:"CIMLineSymbol",symbolLayers:[{type:"CIMVectorMarker",enable:!0,anchorPoint:{x:0,y:-1,z:0},anchorPointUnits:"Relative",size:5,markerPlacement:{type:"CIMMarkerPlacementOnLine",placePerPart:!0,angleToLine:!0,relativeTo:"LineMiddle"},frame:{xmin:-5,ymin:-1.5,xmax:5,ymax:1.5},markerGraphics:[{type:"CIMMarkerGraphic",geometry:{rings:[[[7,0],[-7,0],[-7,1.5],[7,1.5]]]},symbol:{type:"CIMPolygonSymbol",symbolLayers:[{type:"CIMSolidFill",enable:!0,color:w}]}}],scaleSymbolsProportionally:!0,respectFrame:!0},{type:"CIMVectorMarker",enable:!0,anchorPoint:{x:0,y:1,z:0},anchorPointUnits:"Relative",size:5,markerPlacement:{type:"CIMMarkerPlacementOnLine",placePerPart:!0,angleToLine:!0,relativeTo:"LineMiddle"},frame:{xmin:-5,ymin:-1.5,xmax:5,ymax:1.5},markerGraphics:[{type:"CIMMarkerGraphic",geometry:{rings:[[[7,0],[-7,0],[-7,-1.5],[7,-1.5]]]},symbol:{type:"CIMPolygonSymbol",symbolLayers:[{type:"CIMSolidFill",enable:!0,color:w}]}}],scaleSymbolsProportionally:!0,respectFrame:!0}]}}}),S=e=>new _.Z({data:{type:"CIMSymbolReference",symbol:{type:"CIMLineSymbol",symbolLayers:[{type:"CIMVectorMarker",enable:!0,anchorPoint:{x:.5,y:.5,z:0},anchorPointUnits:"Relative",size:(0,r.Wz)(p.c.rightAngleHintSize),rotation:e,markerPlacement:{type:"CIMMarkerPlacementOnVertices",placePerPart:!0,angleToLine:!0,placeOnEndPoints:!1},frame:{xmin:-5,ymin:-5,xmax:5,ymax:5},markerGraphics:[{type:"CIMMarkerGraphic",geometry:{paths:[[[5,-5],[-5,-5],[-5,5],[5,5],[5,-5]]]},symbol:{type:"CIMLineSymbol",symbolLayers:[{type:"CIMSolidStroke",enable:!0,capStyle:"Butt",joinStyle:"Round",miterLimit:10,width:(0,r.Wz)(p.c.rightAngleHintOutlineSize),color:w},{type:"CIMSolidFill",enable:!0,color:f}]}}],scaleSymbolsProportionally:!0,respectFrame:!0}]}}}),T=S(45),O=S(225),H=(()=>{const e=(0,a.a)(),t=(0,a.a)(),i=(0,l.c)();return n=>((0,s.g)(e,n.centerVertex,n.previousVertex),(0,s.g)(t,n.nextVertex,n.previousVertex),(0,s.m)(i,e,t),i[2]<0?T:O)})()},59968:(e,t,i)=>{i.d(t,{Z:()=>X});var n,o=i(27366),r=i(85015),s=(i(93169),i(49861)),a=(i(63780),i(25243),i(69912)),l=(i(59486),i(92026)),d=(i(32718),i(75366),i(91505)),h=i(100),p=i(84652),c=i(66978),u=i(17842),v=i(93655),_=i(65618),g=i(50951),y=i(85577),m=i(14813),w=i(84954),f=i(87268),C=i(34019),b=i(71040);let x=n=class extends d.Z.EventedAccessor{constructor(e){super(e),this._hasZ=null,this._cursorScreenPoint=null,this._activePointerId=null,this._stagedVertexUnsnapped=null,this._lastVertexUnsnapped=null,this._handles=new h.Z,this._viewHandlesKey="view-handles",this._undoRedoHandlesKey="undo-redo-handles",this._drawToolHandlesKey="draw-tool",this._nativeEventHistory={undoStack:[],redoStack:[]},this.interactiveUndoDisabled=!1,this.history=[],this.redoHistory=[],this.snapToScene=!1,this.view=null,this.elevationInfo=null,this.defaultZ=0,this._coordinateHelper=(0,m.Y6)(e.hasZ,!1,e.view.spatialReference),this._snappingManager=e.snappingManager,this._editGeometryOperations=new f.c(new w.XE(e.editGeometryType??"polygon",this._coordinateHelper)),this._snappingGraphicsLayer=new v.Z({id:n.SNAPPING_GRAPHICS_LAYER_ID,listMode:"hide",internal:!0}),this._snappingContext=new C.N({editGeometryOperations:this._editGeometryOperations,elevationInfo:{mode:"on-the-ground",offset:0},pointer:"mouse",visualizer:new y.r(this._snappingGraphicsLayer)}),this._activeComponent=new w.wA(e.view.spatialReference,g.JY.Local),this._editGeometryOperations.data.components.push(this._activeComponent)}normalizeCtorArgs(e){const t={...e};return delete t.editGeometryType,t}initialize(){this._snappingOperation=new b.y({view:this.view}),"2d"===this.view.type&&this.view.map.layers.add(this._snappingGraphicsLayer)}destroy(){this._handles.destroy(),this.view.map.layers.remove(this._snappingGraphicsLayer),this._snappingGraphicsLayer.destroy(),(0,l.pC)(this._snappingManager)&&this._snappingManager.doneSnapping(),this._snappingOperation=(0,l.SC)(this._snappingOperation),this._editGeometryOperations.destroy()}get _committedVertices(){return this._editGeometryOperations.data.components[0].vertices.map((e=>e.pos))}get vertices(){return(0,l.pC)(this._stagedVertex)?[...this._committedVertices,this._coordinateHelper.pointToArray(this._stagedVertex)]:this._committedVertices}get hasZ(){return(0,l.pC)(this._hasZ)?this._hasZ:"3d"===this.view.type}set hasZ(e){this._hasZ=e,this.notifyChange("hasZ")}get _stagedVertex(){return this._snappingOperation.stagedPoint}set _stagedVertex(e){this._snappingOperation.stagedPoint=(0,p.d9)(e)}canUndo(){return this._editGeometryOperations.canUndo}canRedo(){return this._editGeometryOperations.canRedo}undo(){this.canUndo&&this._editGeometryOperations.undo()}redo(){this.canRedo&&this._editGeometryOperations.redo()}getCoordsFromScreenPoint(e){const t=this.screenToMap(e);return(0,l.Wi)(t)?null:t.hasZ?[t.x,t.y,t.z]:[t.x,t.y]}getCoordsAndPointFromScreenPoint(e){const t=this.screenToMap(e);return(0,l.Wi)(t)?null:t.hasZ?{vertex:[t.x,t.y,t.z],mapPoint:t}:{vertex:[t.x,t.y],mapPoint:t}}screenToMap(e){let t=null;if("3d"===this.view.type)if(this.hasZ){const i=(0,l.Pt)(this.elevationInfo,P);t=this.view.sceneIntersectionHelper.intersectElevationFromScreen((0,u.s1)(e.x,e.y),i,this._getGeometryZValue())}else{const i=(0,l.Pt)(this.elevationInfo,S);t=this.view.sceneIntersectionHelper.intersectElevationFromScreen((0,u.s1)(e.x,e.y),i,0),(0,l.pC)(t)&&(t.z=void 0)}else t=this.view.toMap(e),(0,l.pC)(t)&&(t.z=this.hasZ?this._getGeometryZValue():void 0);return t}_pushCursorVertex(e,t){const i=(0,_.Tx)(e[0],e[1],null,this.view.spatialReference);this._stagedVertexUnsnapped=i;const n=this._snappingManager;if((0,l.Wi)(n))return this._stagedVertex=i,void t();(0,c.R8)(this._snappingOperation.snap(i,n,this._snappingContext)).then((()=>{t()}))}_popCursorVertex(){this._stagedVertexUnsnapped=null,this._stagedVertex=null}_getGeometryZValue(){return this.defaultZ}_abortSnapping(){this._snappingOperation.abort()}_isDuplicateOfLastVertex(e){const t=this._editGeometryOperations.data.components[0].getLastVertex();if((0,l.pC)(t)&&e[0]===t[0]&&e[1]===t[1])return!0;const{x:i,y:n}=this._coordinateHelper.vectorToDehydratedPoint(e);return!(!(0,l.pC)(this._lastVertexUnsnapped)||i!==this._lastVertexUnsnapped.x||n!==this._lastVertexUnsnapped.y)}_shouldHandlePointerEvent(e){return this._isPrimaryPointerAction(e)&&((0,l.Wi)(this._activePointerId)||this._activePointerId===e.pointerId)}_vertexAddHandler(e){const t=(0,l.pC)(this._stagedVertex)?this._coordinateHelper.pointToArray(this._stagedVertex):this.getCoordsFromScreenPoint(this._cursorScreenPoint);(0,l.pC)(t)&&this._addVertex(t,e.native)}_drawCompleteHandler(e){this._completeDrawing(e.native)}_isPrimaryPointerAction(e){return"mouse"!==e.pointerType||0===e.button}};x.SNAPPING_GRAPHICS_LAYER_ID="DrawAction-snapping-graphics-layer",(0,o._)([(0,s.Cb)({readOnly:!0})],x.prototype,"vertices",null),(0,o._)([(0,s.Cb)({type:Boolean,nonNullable:!0})],x.prototype,"interactiveUndoDisabled",void 0),(0,o._)([(0,s.Cb)({readOnly:!0})],x.prototype,"history",void 0),(0,o._)([(0,s.Cb)({readOnly:!0})],x.prototype,"redoHistory",void 0),(0,o._)([(0,s.Cb)()],x.prototype,"snapToScene",void 0),(0,o._)([(0,s.Cb)()],x.prototype,"view",void 0),(0,o._)([(0,s.Cb)()],x.prototype,"elevationInfo",void 0),(0,o._)([(0,s.Cb)({nonNullable:!0})],x.prototype,"defaultZ",void 0),(0,o._)([(0,s.Cb)()],x.prototype,"hasZ",null),(0,o._)([(0,s.Cb)()],x.prototype,"_snappingOperation",void 0),(0,o._)([(0,s.Cb)()],x.prototype,"_stagedVertex",null),x=n=(0,o._)([(0,a.j)("esri.views.draw.DrawAction")],x);const P={mode:"absolute-height",offset:0},S={mode:"on-the-ground",offset:0},T=x;class O{constructor(e,t,i,n){this.view=e,this.native=t,this.vertexIndex=i,this.vertices=n,this.defaultPrevented=!1,this.type="vertex-add"}preventDefault(){this.defaultPrevented=!0}}class H{constructor(e,t,i,n){this.view=e,this.native=t,this.vertexIndex=i,this.vertices=n,this.defaultPrevented=!1,this.type="vertex-remove"}preventDefault(){this.defaultPrevented=!0}}class V{constructor(e,t,i,n){let o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;this.view=e,this.native=t,this.vertexIndex=i,this.vertices=n,this.mapPoint=o,this.coordinates=null,this.defaultPrevented=!1,this.type="cursor-update",this.coordinates=1===n.length?n[0]:null}preventDefault(){this.defaultPrevented=!0}}class E{constructor(e,t){this.native=e,this.vertices=t,this.coordinates=null,this.defaultPrevented=!1,this.type="draw-complete",this.coordinates=1===t.length?t[0]:null}preventDefault(){this.defaultPrevented=!0}}var L=i(91806),A=i(87888),M=i(72612),R=i(7882);let I=class extends T{constructor(e){super(e),this._popVertexOnPointerMove=!1,this._addVertexOnPointerUp=!1}initialize(){this._addViewHandles(),this._addUndoRedoHandles()}destroy(){this._removeViewHandles(),this._removeUndoRedoHandles(),this.emit("destroy")}undo(){super.undo(),this.notifyChange("vertices")}redo(){super.redo(),this.notifyChange("vertices")}complete(){this._completeDrawing()}_addViewHandles(){this._removeViewHandles(),this._handles.add([this.view.on("click",(e=>{e.stopPropagation()}),L.f.TOOL),this.view.on("pointer-down",(e=>{this._shouldHandlePointerEvent(e)&&(this._abortSnapping(),this._activePointerId=e.pointerId,this._addVertexOnPointerUp=!0,this._cursorScreenPoint=(0,M.vT)(e),"touch"===e.pointerType&&this._updateCursor(e.native))}),L.f.TOOL),this.view.on("pointer-move",(e=>{this._popVertexOnPointerMove&&(this.undo(),this._popVertexOnPointerMove=!1),this._abortSnapping(),this._cursorScreenPoint=(0,M.vT)(e),"touch"!==e.pointerType&&this._updateCursor(e.native)}),L.f.TOOL),this.view.on("pointer-drag",(e=>{this._shouldHandlePointerEvent(e)&&(this._abortSnapping(),this._addVertexOnPointerUp=!1)}),L.f.TOOL),this.view.on("pointer-up",(e=>{if(this._shouldHandlePointerEvent(e))if(this._abortSnapping(),this._activePointerId=null,this._addVertexOnPointerUp)this._vertexAddHandler(e);else{const t="touch"===e.pointerType;this._updateCursor(e.native,t)}}),L.f.TOOL),this.view.on("drag",["Shift"],(e=>{e.stopPropagation()}),L.f.TOOL),this.view.on("double-click",(e=>{e.stopPropagation(),this._drawCompleteHandler(e)}),L.f.TOOL),this.view.on("double-click",["Control"],(e=>{e.stopPropagation(),this._drawCompleteHandler(e)}),L.f.TOOL),this.view.on("key-down",(e=>{const{key:t,repeat:i}=e;t===A.j.vertexAdd&&!i&&this._cursorScreenPoint?(e.stopPropagation(),this._abortSnapping(),this._vertexAddHandler(e)):t!==A.j.complete||i?t!==A.j.undo||this.interactiveUndoDisabled||i?t!==A.j.redo||this.interactiveUndoDisabled||i?t!==A.j.pan||i||e.stopPropagation():(e.stopPropagation(),this.redo()):(e.stopPropagation(),this.undo()):(e.stopPropagation(),this._drawCompleteHandler(e))}),L.f.TOOL),this.view.on("key-up",(e=>{e.key===A.j.pan&&e.stopPropagation()}),L.f.TOOL)],this._viewHandlesKey)}_addUndoRedoHandles(){this._removeUndoRedoHandles(),this._handles.add([this._editGeometryOperations.on("vertex-remove",(e=>{if(this.notifyChange("vertices"),"undo"===e.operation){const t=this._nativeEventHistory.undoStack.pop();this._nativeEventHistory.redoStack.push(t);const i=[...this._committedVertices];(0,l.pC)(this._stagedVertex)&&i.push(this._coordinateHelper.pointToArray(this._stagedVertex)),this.emit("undo",new H(this.view,t,e.vertices[0].index,i))}})),this._editGeometryOperations.on("vertex-add",(e=>{if(this.notifyChange("vertices"),"apply"===e.operation){const e=this._nativeEventHistory.undoStack[this._nativeEventHistory.undoStack.length],t=this._committedVertices.length-1,i=new O(this.view,e,t,this.vertices);this.emit("vertex-add",i),i.defaultPrevented&&(this._popVertexOnPointerMove=!0)}else if("redo"===e.operation){const t=this._nativeEventHistory.redoStack.pop();this._nativeEventHistory.undoStack.push(t);const i=[...this._committedVertices];(0,l.pC)(this._stagedVertex)&&i.push(this._coordinateHelper.pointToArray(this._stagedVertex)),this.emit("redo",new O(this.view,t,e.vertices[0].index,i))}}))],this._undoRedoHandlesKey)}_removeViewHandles(){this._handles.remove(this._viewHandlesKey)}_removeUndoRedoHandles(){this._handles.remove(this._undoRedoHandlesKey)}_addVertex(e,t){const i=this._coordinateHelper.arrayToVector(e);if(this._isDuplicateOfLastVertex(i))return;this._lastVertexUnsnapped=this._stagedVertexUnsnapped,this._popCursorVertex(),this._editGeometryOperations.appendVertex(i);const n=t||new Event("placeholder");this._nativeEventHistory.undoStack.push(n)}_updateCursor(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(this._popCursorVertex(),!this._cursorScreenPoint)return;const i=this.getCoordsAndPointFromScreenPoint(this._cursorScreenPoint);(0,l.pC)(i)&&!t&&this._pushCursorVertex(i.vertex,(()=>this.emit("cursor-update",new V(this.view,e,this._activeComponent.vertices.length,this.vertices,(0,l.pC)(this._stagedVertex)?new R.Z(this._stagedVertex):null))))}_completeDrawing(e){if(this._activePointerId=null,this._popCursorVertex(),this._abortSnapping(),(0,l.pC)(this._snappingManager)&&this._snappingManager.doneSnapping(),this.vertices.length<1)return;const t=new E(e,this.vertices);this.emit("draw-complete",t),t.defaultPrevented||this._removeViewHandles()}};I=(0,o._)([(0,a.j)("esri.views.draw.MultipointDrawAction")],I);Object.freeze(Object.defineProperty({__proto__:null,get MultipointDrawAction(){return I}},Symbol.toStringTag,{value:"Module"}));var D=i(41691),k=i(69674),N=i(54016),Z=i(45900);let U=class extends((0,D.p)(d.Z.EventedMixin(Z.m))){constructor(e){super(e),this.defaultZ=0,this.elevationInfo=null,this.hasZ=!0,this.mode=null,this.snapToScene=null,this.type="draw-3d"}initialize(){const e=(0,l.Pt)(this.elevationInfo,{mode:this.hasZ?"absolute-height":"on-the-ground",offset:0}),t=this.view;this.drawOperation=new k.w({view:t,manipulators:this.manipulators,geometryType:this.geometryType,drawingMode:this.mode,hasZ:this.hasZ,defaultZ:this.defaultZ,snapToSceneEnabled:this.snapToScene,drawSurface:"3d"===t.type?new N.iW(t,e):null,elevationDrawSurface:"3d"===t.type?new N.aL(e,this.defaultZ,t):null,hasM:!1,elevationInfo:e}),this.handles.add([this.drawOperation.on("vertex-add",(e=>this.onVertexAdd(e))),this.drawOperation.on("vertex-remove",(e=>this.onVertexRemove(e))),this.drawOperation.on("vertex-update",(e=>this.onVertexUpdate(e))),this.drawOperation.on("cursor-update",(e=>this.onCursorUpdate(e))),this.drawOperation.on("complete",(e=>this.onComplete(e)))]),this.finishToolCreation()}destroy(){this.drawOperation=(0,l.SC)(this.drawOperation),this._set("view",null)}get canRedo(){return this.drawOperation.canRedo}get canUndo(){return this.drawOperation.canUndo}set enabled(e){this.drawOperation.interactive=e,this._set("enabled",e)}get updating(){return this.drawOperation?.updating??!1}completeCreateOperation(){this.drawOperation.complete()}onDeactivate(){this.drawOperation.isCompleted||this.drawOperation.cancel()}getVertexCoords(){return this.drawOperation.vertices}onInputEvent(e){this.drawOperation.onInputEvent(e)}redo(){this.drawOperation.redo()}reset(){}undo(){this.drawOperation.undo()}onComplete(e){this.emit("complete",e)}onCursorUpdate(e){this.emit("cursor-update",e)}onVertexAdd(e){this.emit("vertex-add",e)}onVertexRemove(e){this.emit("vertex-remove",e)}onVertexUpdate(e){this.emit("vertex-update",e)}};(0,o._)([(0,s.Cb)({constructOnly:!0,nonNullable:!0})],U.prototype,"defaultZ",void 0),(0,o._)([(0,s.Cb)()],U.prototype,"drawOperation",void 0),(0,o._)([(0,s.Cb)({constructOnly:!0})],U.prototype,"elevationInfo",void 0),(0,o._)([(0,s.Cb)({value:!0})],U.prototype,"enabled",null),(0,o._)([(0,s.Cb)({constructOnly:!0})],U.prototype,"geometryType",void 0),(0,o._)([(0,s.Cb)({constructOnly:!0})],U.prototype,"hasZ",void 0),(0,o._)([(0,s.Cb)({constructOnly:!0})],U.prototype,"mode",void 0),(0,o._)([(0,s.Cb)()],U.prototype,"snapToScene",void 0),(0,o._)([(0,s.Cb)({readOnly:!0})],U.prototype,"type",void 0),(0,o._)([(0,s.Cb)({readOnly:!0})],U.prototype,"updating",null),(0,o._)([(0,s.Cb)({constructOnly:!0,nonNullable:!0})],U.prototype,"view",void 0),U=(0,o._)([(0,a.j)("esri.views.draw.DrawTool")],U);let G=class extends T{constructor(e){super(e),this._addVertexOnPointerUp=!1}initialize(){"2d"===this.view.type?this._addViewHandles():this._addDrawTool()}destroy(){"2d"===this.view.type?this._removeViewHandles():this._removeDrawTool(),this.emit("destroy")}complete(){"2d"===this.view.type?this._cursorScreenPoint&&this._completeDrawing():this._drawTool.completeCreateOperation()}_addViewHandles(){this._removeViewHandles(),this._handles.add([this.view.on("pointer-down",(e=>{this._shouldHandlePointerEvent(e)&&(this._abortSnapping(),this._activePointerId=e.pointerId,this._addVertexOnPointerUp=!0,this._cursorScreenPoint=(0,M.vT)(e),"touch"===e.pointerType&&this._updateCursor(e.native))}),L.f.TOOL),this.view.on("pointer-move",(e=>{this._abortSnapping(),this._cursorScreenPoint=(0,M.vT)(e),"touch"!==e.pointerType&&this._updateCursor(e.native)}),L.f.TOOL),this.view.on("pointer-drag",(e=>{this._shouldHandlePointerEvent(e)&&(this._abortSnapping(),this._addVertexOnPointerUp=!1)}),L.f.TOOL),this.view.on("pointer-up",(e=>{if(this._shouldHandlePointerEvent(e))if(this._abortSnapping(),this._activePointerId=null,this._addVertexOnPointerUp)e.stopPropagation(),this._vertexAddHandler(e);else{const t="touch"===e.pointerType;this._updateCursor(e.native,t)}}),L.f.TOOL),this.view.on("drag",["Shift"],(e=>{e.stopPropagation()}),L.f.TOOL),this.view.on("key-down",(e=>{e.key===A.j.complete&&this._cursorScreenPoint&&(this._abortSnapping(),this._vertexAddHandler(e))}),L.f.TOOL)],this._viewHandlesKey)}_removeViewHandles(){this._handles.remove(this._viewHandlesKey)}_addDrawTool(){this._drawTool=new U({view:this.view,elevationInfo:this.elevationInfo,hasZ:this.hasZ,geometryType:"point",mode:"click"}),this.view.addAndActivateTool(this._drawTool),this._handles.add([this._drawTool.on("cursor-update",(e=>{1===e.vertices.length&&this.emit("cursor-update",new V(this.view,null,e.vertices[0].vertexIndex,this._drawTool.getVertexCoords()))})),this._drawTool.on("complete",(e=>{this.emit("draw-complete",new E(null,this._drawTool.getVertexCoords())),this._removeDrawTool()}))],this._drawToolHandlesKey)}_removeDrawTool(){this._handles.remove(this._drawToolHandlesKey),this.view.tools.remove(this._drawTool),this._drawTool=(0,l.SC)(this._drawTool)}_addVertex(e){const t=this._coordinateHelper.arrayToVector(e);this._isDuplicateOfLastVertex(t)||(this._lastVertexUnsnapped=this._stagedVertexUnsnapped,this._popCursorVertex(),this._editGeometryOperations.appendVertex(t),this.notifyChange("vertices"),this._completeDrawing())}_updateCursor(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(this._popCursorVertex(),!this._cursorScreenPoint)return;const i=this.getCoordsAndPointFromScreenPoint(this._cursorScreenPoint);(0,l.pC)(i)&&!t&&this._pushCursorVertex(i.vertex,(()=>this.emit("cursor-update",new V(this.view,e,this._activeComponent.vertices.length,this.vertices,(0,l.pC)(this._stagedVertex)?new R.Z(this._stagedVertex):null))))}_completeDrawing(e){this._activePointerId=null,this._popCursorVertex(),this._abortSnapping(),(0,l.pC)(this._snappingManager)&&this._snappingManager.doneSnapping();const t=new E(e,this.vertices);this.emit("draw-complete",t),t.defaultPrevented||this._removeViewHandles()}};G=(0,o._)([(0,a.j)("esri.views.draw.PointDrawAction")],G);var z=i(78005);let B=class extends T{constructor(e){super(e),this._panEnabled=!1,this._popVertexOnPointerMove=!1,this._addVertexOnPointerUp=!1,this.mode=z.n}initialize(){"2d"===this.view.type?(this._addViewHandles(),this._addUndoRedoHandles()):this._addDrawTool()}destroy(){"2d"===this.view.type?(this._removeViewHandles(),this._removeUndoRedoHandles()):this._removeDrawTool(),this.emit("destroy")}get _dragEnabled(){return"freehand"===this.mode||"hybrid"===this.mode}get _clickEnabled(){return"click"===this.mode||"hybrid"===this.mode}undo(){super.undo(),this.notifyChange("vertices")}redo(){super.redo(),this.notifyChange("vertices")}complete(){"2d"===this.view.type?this._completeDrawing():this._drawTool.completeCreateOperation()}_getGeometryZValue(){return this.hasZ&&this.vertices.length>0?this.vertices[0][2]:this.defaultZ}_addViewHandles(){this._removeViewHandles(),this._handles.add([this.view.on("click",(e=>{e.stopPropagation()}),L.f.TOOL),this.view.on("pointer-down",(e=>{this._shouldHandlePointerEvent(e)&&(this._abortSnapping(),this._activePointerId=e.pointerId,this._addVertexOnPointerUp=!0,this._cursorScreenPoint=(0,M.vT)(e),"touch"===e.pointerType&&this._updateCursor(e.native))}),L.f.TOOL),this.view.on("pointer-move",(e=>{this._abortSnapping(),this._popVertexOnPointerMove&&(this.undo(),this._popVertexOnPointerMove=!1),this._cursorScreenPoint=(0,M.vT)(e),"touch"!==e.pointerType&&this._updateCursor(e.native)}),L.f.TOOL),this.view.on("pointer-drag",(e=>{this._shouldHandlePointerEvent(e)&&(this._abortSnapping(),this._cursorScreenPoint=(0,M.vT)(e),this._dragEnabled&&!this._panEnabled?this._vertexAddHandler(e):this._addVertexOnPointerUp=!1)}),L.f.TOOL),this.view.on("pointer-up",(e=>{if(this._shouldHandlePointerEvent(e))if(this._abortSnapping(),this._activePointerId=null,this._addVertexOnPointerUp){if(!this._clickEnabled)return 1===this.vertices.length&&this.vertices.pop(),void this._drawCompleteHandler(e);this._vertexAddHandler(e)}else{const t="touch"===e.pointerType;this._updateCursor(e.native,t)}}),L.f.TOOL),this.view.on("drag",(e=>{this._dragEnabled&&(0,l.pC)(this._activePointerId)&&!this._panEnabled&&e.stopPropagation()}),L.f.TOOL),this.view.on("drag",["Shift"],(e=>{e.stopPropagation()}),L.f.TOOL),this.view.on("double-click",(e=>{e.stopPropagation(),this._drawCompleteHandler(e)}),L.f.TOOL),this.view.on("double-click",["Control"],(e=>{e.stopPropagation(),this._drawCompleteHandler(e)}),L.f.TOOL),this.view.on("key-down",(e=>{const{key:t,repeat:i}=e;t===A.j.vertexAdd&&!i&&this._cursorScreenPoint?(e.stopPropagation(),this._abortSnapping(),this._vertexAddHandler(e)):t!==A.j.complete||i?t!==A.j.undo||this.interactiveUndoDisabled||i?t!==A.j.redo||this.interactiveUndoDisabled||i?t!==A.j.pan||i||(e.stopPropagation(),this._panEnabled=!0):(e.stopPropagation(),this.redo()):(e.stopPropagation(),this.undo()):(e.stopPropagation(),this._drawCompleteHandler(e))}),L.f.TOOL),this.view.on("key-up",(e=>{e.key===A.j.pan&&(e.stopPropagation(),this._panEnabled=!1)}),L.f.TOOL)],this._viewHandlesKey)}_addUndoRedoHandles(){this._removeUndoRedoHandles(),this._handles.add([this._editGeometryOperations.on("vertex-remove",(e=>{if(this.notifyChange("vertices"),"undo"===e.operation){const t=this._nativeEventHistory.undoStack.pop();this._nativeEventHistory.redoStack.push(t);const i=[...this._committedVertices];(0,l.pC)(this._stagedVertex)&&i.push(this._coordinateHelper.pointToArray(this._stagedVertex)),this.emit("undo",new H(this.view,t,e.vertices[0].index,i))}})),this._editGeometryOperations.on("vertex-add",(e=>{if(this.notifyChange("vertices"),"apply"===e.operation){const e=this._nativeEventHistory.undoStack[this._nativeEventHistory.undoStack.length],t=this._committedVertices.length-1,i=new O(this.view,e,t,this.vertices);this.emit("vertex-add",i),i.defaultPrevented&&(this._popVertexOnPointerMove=!0)}else if("redo"===e.operation){const t=this._nativeEventHistory.redoStack.pop();this._nativeEventHistory.undoStack.push(t);const i=[...this._committedVertices];(0,l.pC)(this._stagedVertex)&&i.push(this._coordinateHelper.pointToArray(this._stagedVertex)),this.emit("redo",new O(this.view,t,e.vertices[0].index,i))}}))],this._undoRedoHandlesKey)}_removeViewHandles(){this._handles.remove(this._viewHandlesKey)}_removeUndoRedoHandles(){this._handles.remove(this._undoRedoHandlesKey)}_addDrawTool(){this._drawTool=new U({view:this.view,elevationInfo:this.elevationInfo,hasZ:this.hasZ,geometryType:"polygon",mode:this.mode}),this.view.addAndActivateTool(this._drawTool),this._drawTool.on("vertex-add",(e=>{1===e.vertices.length&&this.emit("vertex-add",new O(this.view,null,e.vertices[0].vertexIndex,this._drawTool.getVertexCoords()))})),this._drawTool.on("cursor-update",(e=>{1===e.vertices.length&&this.emit("cursor-update",new V(this.view,null,e.vertices[0].vertexIndex,this._drawTool.getVertexCoords()))})),this._drawTool.on("complete",(e=>{this.emit("draw-complete",new E(null,this._drawTool.getVertexCoords())),this._removeDrawTool()}))}_removeDrawTool(){this._handles.remove(this._drawToolHandlesKey),this.view.tools.remove(this._drawTool),this._drawTool=(0,l.SC)(this._drawTool)}_addVertex(e,t){const i=this._coordinateHelper.arrayToVector(e);if(this._isDuplicateOfLastVertex(i))return;this._lastVertexUnsnapped=this._stagedVertexUnsnapped,this._popCursorVertex(),this._editGeometryOperations.appendVertex(i);const n=t||new Event("placeholder");this._nativeEventHistory.undoStack.push(n)}_updateCursor(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(this._popCursorVertex(),!this._cursorScreenPoint)return;const i=this.getCoordsAndPointFromScreenPoint(this._cursorScreenPoint);(0,l.pC)(i)&&!t&&this._pushCursorVertex(i.vertex,(()=>this.emit("cursor-update",new V(this.view,e,this._activeComponent.vertices.length,this.vertices,(0,l.pC)(this._stagedVertex)?new R.Z(this._stagedVertex):null))))}_completeDrawing(e){if(this._activePointerId=null,this._popCursorVertex(),this._committedVertices.length<3)return;this._abortSnapping(),(0,l.pC)(this._snappingManager)&&this._snappingManager.doneSnapping();const t=new E(e,this.vertices);this.emit("draw-complete",t),t.defaultPrevented||this._removeViewHandles()}};(0,o._)([(0,s.Cb)()],B.prototype,"_dragEnabled",null),(0,o._)([(0,s.Cb)()],B.prototype,"_clickEnabled",null),(0,o._)([(0,s.Cb)({type:z.A})],B.prototype,"mode",void 0),B=(0,o._)([(0,a.j)("esri.views.draw.PolygonDrawAction")],B);let j=class extends T{constructor(e){super(e),this._panEnabled=!1,this._popVertexOnPointerMove=!1,this._addVertexOnPointerUp=!1,this.mode=z.n}initialize(){"2d"===this.view.type?(this._addViewHandles(),this._addUndoRedoHandles()):this._addDrawTool()}destroy(){"2d"===this.view.type?(this._removeViewHandles(),this._removeUndoRedoHandles()):this._removeDrawTool(),this.emit("destroy")}get _clickEnabled(){return"click"===this.mode||"hybrid"===this.mode}get _dragEnabled(){return"freehand"===this.mode||"hybrid"===this.mode}undo(){super.undo(),this.notifyChange("vertices")}redo(){super.redo(),this.notifyChange("vertices")}complete(){"2d"===this.view.type?this._completeDrawing():this._drawTool.completeCreateOperation()}_addViewHandles(){this._removeViewHandles(),this._handles.add([this.view.on("click",(e=>{e.stopPropagation()}),L.f.TOOL),this.view.on("pointer-down",(e=>{this._shouldHandlePointerEvent(e)&&!this._panEnabled&&(this._abortSnapping(),this._activePointerId=e.pointerId,this._addVertexOnPointerUp=!0,this._cursorScreenPoint=(0,M.vT)(e),"touch"===e.pointerType&&this._updateCursor(e.native))}),L.f.TOOL),this.view.on("pointer-move",(e=>{this._popVertexOnPointerMove&&(this.undo(),this._popVertexOnPointerMove=!1),this._abortSnapping(),this._cursorScreenPoint=(0,M.vT)(e),"touch"!==e.pointerType&&this._updateCursor(e.native)}),L.f.TOOL),this.view.on("pointer-drag",(e=>{this._shouldHandlePointerEvent(e)&&(this._abortSnapping(),this._cursorScreenPoint=(0,M.vT)(e),this._dragEnabled&&!this._panEnabled?this._vertexAddHandler(e):this._addVertexOnPointerUp=!1)}),L.f.TOOL),this.view.on("pointer-up",(e=>{if(this._shouldHandlePointerEvent(e))if(this._abortSnapping(),this._activePointerId=null,this._addVertexOnPointerUp){if(!this._clickEnabled)return 1===this.vertices.length&&this.vertices.pop(),void this._drawCompleteHandler(e);this._vertexAddHandler(e)}else{const t="touch"===e.pointerType;this._updateCursor(e.native,t)}}),L.f.TOOL),this.view.on("drag",(e=>{this._dragEnabled&&(0,l.pC)(this._activePointerId)&&!this._panEnabled&&e.stopPropagation()}),L.f.TOOL),this.view.on("drag",["Shift"],(e=>{e.stopPropagation()}),L.f.TOOL),this.view.on("double-click",(e=>{e.stopPropagation(),this._drawCompleteHandler(e)}),L.f.TOOL),this.view.on("double-click",["Control"],(e=>{e.stopPropagation(),this._drawCompleteHandler(e)}),L.f.TOOL),this.view.on("key-down",(e=>{const{key:t,repeat:i}=e;t===A.j.vertexAdd&&!i&&this._cursorScreenPoint?(e.stopPropagation(),this._abortSnapping(),this._vertexAddHandler(e)):t!==A.j.complete||i?t!==A.j.undo||this.interactiveUndoDisabled||i?t!==A.j.redo||this.interactiveUndoDisabled||i?t!==A.j.pan||i||(e.stopPropagation(),this._panEnabled=!0):(e.stopPropagation(),this.redo()):(e.stopPropagation(),this.undo()):(e.stopPropagation(),this._drawCompleteHandler(e))}),L.f.TOOL),this.view.on("key-up",(e=>{e.key===A.j.pan&&(e.stopPropagation(),this._panEnabled=!1)}),L.f.TOOL)],this._viewHandlesKey)}_addUndoRedoHandles(){this._removeUndoRedoHandles(),this._handles.add([this._editGeometryOperations.on("vertex-remove",(e=>{if(this.notifyChange("vertices"),"undo"===e.operation){const t=this._nativeEventHistory.undoStack.pop();this._nativeEventHistory.redoStack.push(t);const i=[...this._committedVertices];(0,l.pC)(this._stagedVertex)&&i.push(this._coordinateHelper.pointToArray(this._stagedVertex)),this.emit("undo",new H(this.view,t,e.vertices[0].index,i))}})),this._editGeometryOperations.on("vertex-add",(e=>{if(this.notifyChange("vertices"),"apply"===e.operation){const e=this._nativeEventHistory.undoStack[this._nativeEventHistory.undoStack.length],t=this._committedVertices.length-1,i=new O(this.view,e,t,this.vertices);this.emit("vertex-add",i),i.defaultPrevented&&(this._popVertexOnPointerMove=!0)}else if("redo"===e.operation){const t=this._nativeEventHistory.redoStack.pop();this._nativeEventHistory.undoStack.push(t);const i=[...this._committedVertices];(0,l.pC)(this._stagedVertex)&&i.push(this._coordinateHelper.pointToArray(this._stagedVertex)),this.emit("redo",new O(this.view,t,e.vertices[0].index,i))}}))],this._undoRedoHandlesKey)}_removeViewHandles(){this._handles.remove(this._viewHandlesKey)}_removeUndoRedoHandles(){this._handles.remove(this._undoRedoHandlesKey)}_addDrawTool(){this._drawTool=new U({view:this.view,elevationInfo:this.elevationInfo,hasZ:this.hasZ,geometryType:"polyline",mode:this.mode}),this.view.addAndActivateTool(this._drawTool),this._handles.add([this._drawTool.on("vertex-add",(e=>{1===e.vertices.length&&this.emit("vertex-add",new O(this.view,null,e.vertices[0].vertexIndex,this._drawTool.getVertexCoords()))})),this._drawTool.on("cursor-update",(e=>{1===e.vertices.length&&this.emit("cursor-update",new V(this.view,null,e.vertices[0].vertexIndex,this._drawTool.getVertexCoords()))})),this._drawTool.on("complete",(e=>{this.emit("draw-complete",new E(null,this._drawTool.getVertexCoords())),this._removeDrawTool()}))],this._drawToolHandlesKey)}_removeDrawTool(){this._handles.remove(this._drawToolHandlesKey),this.view.tools.remove(this._drawTool),this._drawTool=(0,l.SC)(this._drawTool)}_addVertex(e,t){const i=this._coordinateHelper.arrayToVector(e);if(this._isDuplicateOfLastVertex(i))return;this._lastVertexUnsnapped=this._stagedVertexUnsnapped,this._popCursorVertex(),this._editGeometryOperations.appendVertex(i);const n=t||new Event("placeholder");this._nativeEventHistory.undoStack.push(n)}_updateCursor(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(this._popCursorVertex(),!this._cursorScreenPoint)return;const i=this.getCoordsAndPointFromScreenPoint(this._cursorScreenPoint);(0,l.pC)(i)&&!t&&this._pushCursorVertex(i.vertex,(()=>this.emit("cursor-update",new V(this.view,e,this._activeComponent.vertices.length,this.vertices,(0,l.pC)(this._stagedVertex)?new R.Z(this._stagedVertex):null))))}_completeDrawing(e){if(this._activePointerId=null,this._popCursorVertex(),this._committedVertices.length<2)return;this._abortSnapping(),(0,l.pC)(this._snappingManager)&&this._snappingManager.doneSnapping();const t=new E(e,this.vertices);this.emit("draw-complete",t),t.defaultPrevented||this._removeViewHandles()}};(0,o._)([(0,s.Cb)()],j.prototype,"_clickEnabled",null),(0,o._)([(0,s.Cb)()],j.prototype,"_dragEnabled",null),(0,o._)([(0,s.Cb)({type:z.A})],j.prototype,"mode",void 0),j=(0,o._)([(0,a.j)("esri.views.draw.PolylineDrawAction")],j);var W=i(3826);let F=class extends T{constructor(e){super(e),this._isDragging=!1,this._panEnabled=!1,this._addVertexOnPointerUp=!1,this.viewAlignedCoordinateSystem=null,this.mode="freehand"}initialize(){"2d"===this.view.type?this._addViewHandles():this._addDrawTool()}destroy(){"2d"===this.view.type?this._removeViewHandles():this._removeDrawTool(),this.emit("destroy")}complete(){"2d"===this.view.type?this._completeDrawing():this._drawTool.completeCreateOperation()}_getGeometryZValue(){return this.hasZ&&this.vertices.length>0?this.vertices[0][2]:this.defaultZ}_addViewHandles(){this._removeViewHandles(),"click"===this.mode?this._handles.add(this._getClickModeViewHandles(),this._viewHandlesKey):this._handles.add(this._getDragModeViewHandles(),this._viewHandlesKey)}_getDragModeViewHandles(){return[this.view.on("immediate-click",(e=>{if(e.stopPropagation(),e.mapPoint&&!this._panEnabled){const t=this.getCoordsFromScreenPoint((0,M.vT)(e));(0,l.pC)(t)&&(this._vertexAddHandler(e),this._drawCompleteHandler(e))}}),L.f.TOOL),this.view.on("pointer-down",(e=>{this._shouldHandlePointerEvent(e)&&(this._abortSnapping(),this._panEnabled||(this._resetGeometry(),this._addVertexOnPointerUp=!0,this._cursorScreenPoint=(0,M.vT)(e),this._activePointerId=e.pointerId,this._vertexAddHandler(e),this._isDragging=!1,"touch"===e.pointerType&&this._updateCursor(e.native)))}),L.f.TOOL),this.view.on("pointer-move",(e=>{this._abortSnapping(),(0,l.Wi)(this._activePointerId)&&"touch"!==e.pointerType&&(this._cursorScreenPoint=(0,M.vT)(e),this._updateCursor(e.native))}),L.f.TOOL),this.view.on("pointer-drag",(e=>{this._shouldHandlePointerEvent(e)&&(this._abortSnapping(),this._isDragging=!0,this._cursorScreenPoint=(0,M.vT)(e),this._updateCursor(e.native))}),L.f.TOOL),this.view.on("pointer-up",(e=>{this._shouldHandlePointerEvent(e)&&this._addVertexOnPointerUp&&(this._abortSnapping(),this._activePointerId=null,this._isDragging&&this._vertexAddHandler(e),2===this._committedVertices.length&&this._drawCompleteHandler(e),this._isDragging=!1)}),L.f.TOOL),this.view.on("key-down",(e=>{e.key===A.j.complete&&this._cursorScreenPoint?(this._abortSnapping(),this._vertexAddHandler(e),this._drawCompleteHandler(e)):e.key===A.j.pan&&(this._panEnabled=!0)}),L.f.TOOL),this.view.on("key-up",(e=>{e.key===A.j.pan&&(this._panEnabled=!1)}),L.f.TOOL),this.view.on("drag",(e=>{(0,l.pC)(this._activePointerId)&&e.stopPropagation()}),L.f.TOOL),this.view.on("drag",["Shift"],(e=>{e.stopPropagation()}),L.f.TOOL)]}_getClickModeViewHandles(){return[this.view.on("pointer-down",(e=>{this._abortSnapping(),this._cursorScreenPoint=(0,M.vT)(e),this._activePointerId=e.pointerId,this._isDragging=!1,"touch"===e.pointerType&&this._updateCursor(e.native)}),L.f.TOOL),this.view.on("pointer-move",(e=>{this._abortSnapping(),this._cursorScreenPoint=(0,M.vT)(e),(0,l.Wi)(this._activePointerId)&&"touch"!==e.pointerType&&this._updateCursor(e.native)}),L.f.TOOL),this.view.on("pointer-drag",(e=>{this._shouldHandlePointerEvent(e)&&(this._abortSnapping(),this._isDragging=!0)}),L.f.TOOL),this.view.on("pointer-up",(e=>{this._shouldHandlePointerEvent(e)&&(this._abortSnapping(),this._activePointerId=null,e.stopPropagation(),this._isDragging||this._vertexAddHandler(e),2!==this.vertices.length||this._isDragging||this._drawCompleteHandler(e),this._isDragging=!1)}),L.f.TOOL),this.view.on("key-down",(e=>{e.key===A.j.vertexAdd&&this._cursorScreenPoint&&(this._vertexAddHandler(e),2===this.vertices.length&&this._drawCompleteHandler(e)),e.key===A.j.complete&&this._cursorScreenPoint&&2===this.vertices.length&&(this._vertexAddHandler(e),this._drawCompleteHandler(e))}),L.f.TOOL)]}_removeViewHandles(){this._handles.remove(this._viewHandlesKey)}_addDrawTool(){this._drawTool=new U({view:this.view,elevationInfo:this.elevationInfo,hasZ:this.hasZ,geometryType:"segment",mode:this.mode}),this.view.addAndActivateTool(this._drawTool),this._handles.add([this._drawTool.on("vertex-add",(e=>{1===e.vertices.length&&this.emit("vertex-add",new O(this.view,null,e.vertices[0].vertexIndex,this._drawTool.getVertexCoords()))})),this._drawTool.on("cursor-update",(e=>{1===e.vertices.length&&this.emit("cursor-update",new V(this.view,null,e.vertices[0].vertexIndex,this._drawTool.getVertexCoords()))})),this._drawTool.on("complete",(e=>{this.emit("draw-complete",new E(null,this._drawTool.getVertexCoords())),this._removeDrawTool()}))],this._drawToolHandlesKey)}_removeDrawTool(){this._handles.remove(this._drawToolHandlesKey),this.view.tools.remove(this._drawTool),this._drawTool=(0,l.SC)(this._drawTool)}_addVertex(e,t){const i=this._coordinateHelper.arrayToVector(e);if(this._isDuplicateOfLastVertex(i))return;this._lastVertexUnsnapped=this._stagedVertexUnsnapped,this._popCursorVertex(),this._editGeometryOperations.appendVertex(i),1===this._committedVertices.length&&(this.viewAlignedCoordinateSystem=(0,W.Gn)(this.view,this._committedVertices[0]));const n=this._committedVertices.length-1,o=new O(this.view,t,n,this.vertices);this.emit("vertex-add",o)}_updateCursor(e){if(this._popCursorVertex(),!this._cursorScreenPoint)return;const t=this.getCoordsAndPointFromScreenPoint(this._cursorScreenPoint);(0,l.pC)(t)&&this._pushCursorVertex(t.vertex,(()=>this.emit("cursor-update",new V(this.view,e,this._activeComponent.vertices.length,this.vertices,(0,l.pC)(this._stagedVertex)?new R.Z(this._stagedVertex):null))))}_completeDrawing(e){if(this._activePointerId=null,this._popCursorVertex(),this._cursorScreenPoint=null,this._isDragging=!1,this._abortSnapping(),(0,l.pC)(this._snappingManager)&&this._snappingManager.doneSnapping(),this.vertices.length<1)return;const t=new E(e,this.vertices);this.emit("draw-complete",t),t.defaultPrevented||this._removeViewHandles()}_resetGeometry(){this._editGeometryOperations.destroy(),this._editGeometryOperations=new f.c(new w.XE("polygon",this._coordinateHelper)),this._activeComponent=new w.wA(this._coordinateHelper.spatialReference,g.JY.Local),this._editGeometryOperations.data.components.push(this._activeComponent)}};(0,o._)([(0,s.Cb)({type:["freehand","click"]})],F.prototype,"mode",void 0),F=(0,o._)([(0,a.j)("esri/views/2d/engine/markup/SegmentDrawAction")],F);let K=class extends r.Z{constructor(){super(...arguments),this.activeAction=null,this.type="draw",this.view=null}destroy(){this.activeAction&&(this.activeAction.destroy(),this.activeAction=null)}create(e,t){this.reset();const i={view:this.view,...t};switch(e){case"point":i.editGeometryType="point",this.activeAction=new G(i);break;case"polyline":i.editGeometryType="polyline",this.activeAction=new j(i);break;case"multipoint":i.editGeometryType="polygon",this.activeAction=new I(i);break;case"polygon":i.editGeometryType="polygon",this.activeAction=new B(i);break;case"rectangle":case"circle":case"ellipse":case"triangle":i.editGeometryType="polygon",this.activeAction=new F(i)}return this.activeAction}complete(){this.activeAction&&this.activeAction.complete(),this.activeAction=null}reset(){this.activeAction&&this.activeAction.destroy(),this.activeAction=null}};(0,o._)([(0,s.Cb)()],K.prototype,"activeAction",void 0),(0,o._)([(0,s.Cb)({readOnly:!0})],K.prototype,"type",void 0),(0,o._)([(0,s.Cb)()],K.prototype,"view",void 0),K=(0,o._)([(0,a.j)("esri.views.draw.Draw")],K);const X=K},70040:(e,t,i)=>{i.d(t,{O:()=>o,X:()=>p});var n=i(51995);const o={main:new n.Z([255,127,0]),selected:new n.Z([255,255,255]),outline:new n.Z([0,0,0,.5]),selectedOutline:new n.Z([255,255,255]),hoverOutline:new n.Z([255,255,255]),secondary:new n.Z([255,255,255]),secondaryOutline:new n.Z([100,100,100]),transparent:new n.Z([0,0,0,0])};function r(e,t){if(t)for(const i in t)e[i]=t[i]}class s{constructor(e){this.size=8,this.hoverSize=10,this.color=o.main,this.hoverColor=o.main,this.outlineColor=o.outline,this.hoverOutlineColor=o.hoverOutline,r(this,e)}}class a{constructor(e){this.color=o.secondary,this.hoverColor=o.main,r(this,e)}}class l{constructor(e){this.color=o.transparent,this.hoverColor=o.transparent,this.outlineColor=o.main,this.hoverOutlineColor=o.main,this.stagedColor=o.transparent,this.stagedOutlineColor=o.secondary,r(this,e)}}class d{constructor(e){this.vertex=new s,this.midpoint=new s({color:o.secondary,outlineColor:o.secondaryOutline,size:6}),this.selected=new s({color:o.selected,hoverColor:o.selected,hoverOutlineColor:o.hoverOutline}),r(this,e)}}class h{constructor(e){this.center=new s({color:o.secondaryOutline}),this.fill=new l,this.line=new a,this.vertex=new s({color:o.selected,outlineColor:o.main,hoverColor:o.selected,hoverOutlineColor:o.secondaryOutline}),r(this,e)}}const p=new class{constructor(e){this.reshapeGraphics=new d,this.transformGraphics=new h,r(this,e)}}},2346:(e,t,i)=>{i.d(t,{L:()=>w});var n=i(27366),o=i(85015),r=i(91505),s=i(92026),a=i(94172),l=i(17842),d=i(49861),h=(i(63780),i(93169),i(25243),i(69912)),p=i(88396),c=i(11186),u=i(71353),v=i(79803),_=i(74509),g=i(61574),y=i(64575),m=i(45008);let w=class extends o.Z{constructor(e){super(e),this.layer=null,this.interactive=!0,this.selectable=!1,this.grabbable=!0,this.dragging=!1,this.cursor=null,this.events=new r.Z.EventEmitter,this._circleCollisionCache=null,this._graphicSymbolChangedHandle=null,this._originalSymbol=null}set graphic(e){this._circleCollisionCache=null,this._originalSymbol=e.symbol,this._set("graphic",e),this.attachSymbolChanged()}get elevationInfo(){const e="elevationInfo"in this.graphic.layer&&this.graphic.layer.elevationInfo,t=(0,_.vu)(this.graphic),i=e?e.offset:0;return new y.ZP({mode:t,offset:i})}set focusedSymbol(e){e!==this._get("focusedSymbol")&&(this._set("focusedSymbol",e),this._updateGraphicSymbol(),this._circleCollisionCache=null)}grabbableForEvent(){return!0}set grabbing(e){e!==this._get("grabbing")&&(this._set("grabbing",e),this._updateGraphicSymbol())}set hovering(e){e!==this._get("hovering")&&(this._set("hovering",e),this._updateGraphicSymbol())}set selected(e){e!==this._get("selected")&&(this._set("selected",e),this._updateGraphicSymbol(),this.events.emit("select-changed",{action:e?"select":"deselect"}))}get _focused(){return this._get("hovering")||this._get("grabbing")}destroy(){this.detachSymbolChanged(),this._resetGraphicSymbol(),this._set("view",null)}intersectionDistance(e){const t=this.graphic;if(!1===t.visible)return null;const i=t.geometry;if((0,s.Wi)(i))return null;const n=this._get("focusedSymbol"),o=(0,s.pC)(n)?n:t.symbol;return"2d"===this.view.type?this._intersectDistance2D(this.view,e,i,o):this._intersectDistance3D(this.view,e,t)}attach(){this.attachSymbolChanged(),(0,s.pC)(this.layer)&&this.layer.add(this.graphic)}detach(){this.detachSymbolChanged(),this._resetGraphicSymbol(),(0,s.pC)(this.layer)&&this.layer.remove(this.graphic)}attachSymbolChanged(){this.detachSymbolChanged(),this._graphicSymbolChangedHandle=(0,a.YP)((()=>this.graphic?.symbol),(e=>{(0,s.pC)(e)&&e!==this.focusedSymbol&&e!==this._originalSymbol&&(this._originalSymbol=e,this._focused&&(0,s.pC)(this.focusedSymbol)&&(this.graphic.symbol=this.focusedSymbol))}),a.Z_)}detachSymbolChanged(){(0,s.pC)(this._graphicSymbolChangedHandle)&&(this._graphicSymbolChangedHandle.remove(),this._graphicSymbolChangedHandle=null)}_updateGraphicSymbol(){this.graphic.symbol=this._focused&&(0,s.pC)(this.focusedSymbol)?this.focusedSymbol:this._originalSymbol}_resetGraphicSymbol(){this.graphic.symbol=this._originalSymbol}_intersectDistance2D(e,t,i,n){if(n=n||(0,g.js)(i),(0,s.Wi)(n))return null;let o=this._circleCollisionCache;if("point"!==i.type||"simple-marker"!==n.type)return(0,m.D)(t,i,e)?1:null;if((0,s.Wi)(o)||!o.originalPoint.equals(i)){const t=i,r=e.spatialReference;if((0,v.Up)(t.spatialReference,r)){const e=(0,v.iV)(t,r);o={originalPoint:t.clone(),mapPoint:e,radiusPx:(0,l.F2)(n.size)},this._circleCollisionCache=o}}if((0,s.pC)(o)){const i=(0,l.md)(t,C),r=e.toScreen(o.mapPoint),s=o.radiusPx,a=r.x+(0,l.F2)(n.xoffset),d=r.y-(0,l.F2)(n.yoffset);return(0,p.s)(i,[a,d])<s*s?1:null}return null}_intersectDistance3D(e,t,i){const n=e.toMap(t,{include:[i]});return n&&(0,v.KC)(n,f,e.renderSpatialReference)?(0,c.i)(f,e.state.camera.eye):null}};(0,n._)([(0,d.Cb)({constructOnly:!0,nonNullable:!0})],w.prototype,"graphic",null),(0,n._)([(0,d.Cb)()],w.prototype,"elevationInfo",null),(0,n._)([(0,d.Cb)({constructOnly:!0,nonNullable:!0})],w.prototype,"view",void 0),(0,n._)([(0,d.Cb)({value:null})],w.prototype,"focusedSymbol",null),(0,n._)([(0,d.Cb)({constructOnly:!0})],w.prototype,"layer",void 0),(0,n._)([(0,d.Cb)()],w.prototype,"interactive",void 0),(0,n._)([(0,d.Cb)()],w.prototype,"selectable",void 0),(0,n._)([(0,d.Cb)()],w.prototype,"grabbable",void 0),(0,n._)([(0,d.Cb)({value:!1})],w.prototype,"grabbing",null),(0,n._)([(0,d.Cb)()],w.prototype,"dragging",void 0),(0,n._)([(0,d.Cb)()],w.prototype,"hovering",null),(0,n._)([(0,d.Cb)({value:!1})],w.prototype,"selected",null),(0,n._)([(0,d.Cb)()],w.prototype,"cursor",void 0),w=(0,n._)([(0,h.j)("esri.views.interactive.GraphicManipulator")],w);const f=(0,u.c)(),C=(0,l.s1)()},87888:(e,t,i)=>{i.d(t,{j:()=>n});const n={redo:"r",undo:"z",center:"Alt",constraint:"Shift",snappingToggle:"Control",cancel:"Escape",delete:["Backspace","Delete"],complete:"Enter",vertexAdd:"f",pan:" "}},52349:(e,t,i)=>{i.d(t,{Z:()=>l});var n=i(27366),o=i(85015),r=i(49861),s=(i(63780),i(93169),i(25243),i(69912));let a=class extends o.Z{constructor(e){super(e),this.enabled=!1}};(0,n._)([(0,r.Cb)({type:Boolean,nonNullable:!0})],a.prototype,"enabled",void 0),a=(0,n._)([(0,s.j)("esri.views.interactive.sketch.SketchLabelOptions")],a);const l=a},61920:(e,t,i)=>{i.d(t,{Z:()=>h});var n=i(27366),o=i(85015),r=i(49861),s=(i(63780),i(93169),i(25243),i(69912));let a=class extends o.Z{constructor(e){super(e),this.mode="absolute-height"}};(0,n._)([(0,r.Cb)({type:String,nonNullable:!0})],a.prototype,"mode",void 0),a=(0,n._)([(0,s.j)("esri.widgets.Sketch.SketchTooltipOptions.ElevationOptions")],a);let l=class extends o.Z{constructor(){super(...arguments),this.distance=!0,this.elevation=!0,this.size=!0,this.scale=!0,this.rotation=!0,this.orientation=!0,this.totalLength=!0,this.area=!0,this.radius=!0}};(0,n._)([(0,r.Cb)({type:Boolean,nonNullable:!0})],l.prototype,"distance",void 0),(0,n._)([(0,r.Cb)({type:Boolean,nonNullable:!0})],l.prototype,"elevation",void 0),(0,n._)([(0,r.Cb)({type:Boolean,nonNullable:!0})],l.prototype,"size",void 0),(0,n._)([(0,r.Cb)({type:Boolean,nonNullable:!0})],l.prototype,"scale",void 0),(0,n._)([(0,r.Cb)({type:Boolean,nonNullable:!0})],l.prototype,"rotation",void 0),(0,n._)([(0,r.Cb)({type:Boolean,nonNullable:!0})],l.prototype,"orientation",void 0),(0,n._)([(0,r.Cb)({type:Boolean,nonNullable:!0})],l.prototype,"totalLength",void 0),(0,n._)([(0,r.Cb)({type:Boolean,nonNullable:!0})],l.prototype,"area",void 0),(0,n._)([(0,r.Cb)({type:Boolean,nonNullable:!0})],l.prototype,"radius",void 0),l=(0,n._)([(0,s.j)("esri.widgets.Sketch.SketchTooltipOptions.VisibleElements")],l);let d=class extends o.Z{constructor(e){super(e),this.enabled=!1,this.elevation=new a,this.visibleElements=new l,this.visualVariables=null}};(0,n._)([(0,r.Cb)({type:Boolean,nonNullable:!0})],d.prototype,"enabled",void 0),(0,n._)([(0,r.Cb)({type:a,nonNullable:!0})],d.prototype,"elevation",void 0),(0,n._)([(0,r.Cb)({type:l,nonNullable:!0})],d.prototype,"visibleElements",void 0),(0,n._)([(0,r.Cb)()],d.prototype,"visualVariables",void 0),d=(0,n._)([(0,s.j)("esri.widgets.Sketch.SketchTooltipOptions")],d);const h=d},76014:(e,t,i)=>{i.d(t,{c:()=>h});var n=i(27366),o=i(51995),r=i(46784),s=i(49861),a=i(69912);let l=class extends r.wq{constructor(){super(...arguments),this.enabled=!0}};(0,n._)([(0,s.Cb)({type:Boolean})],l.prototype,"enabled",void 0),l=(0,n._)([(0,a.j)("esri.views.interactive.snapping.Settings.DefaultSnappingAlgorithm")],l);let d=class extends r.wq{constructor(e){super(e),this.lineSnapper=new l,this.parallelLineSnapper=new l,this.rightAngleSnapper=new l,this.rightAngleTriangleSnapper=new l,this.shortLineThreshold=15,this.distance=5,this.pointThreshold=1e-6,this.intersectionParallelLineThreshold=1e-6,this.parallelLineThreshold=1e-6,this.touchSensitivityMultiplier=1.5,this.pointOnLineThreshold=1e-6,this.orange=new o.Z([255,127,0]),this.lineHintWidthReference=3,this.lineHintWidthTarget=3,this.lineHintFadedExtensions=.3,this.parallelLineHintWidth=2,this.parallelLineHintLength=24,this.parallelLineHintOffset=1.5,this.rightAngleHintSize=24,this.rightAngleHintOutlineSize=1.5}};(0,n._)([(0,s.Cb)({type:l,constructOnly:!0,nonNullable:!0,json:{write:!0}})],d.prototype,"lineSnapper",void 0),(0,n._)([(0,s.Cb)({type:l,constructOnly:!0,nonNullable:!0,json:{write:!0}})],d.prototype,"parallelLineSnapper",void 0),(0,n._)([(0,s.Cb)({type:l,constructOnly:!0,nonNullable:!0,json:{write:!0}})],d.prototype,"rightAngleSnapper",void 0),(0,n._)([(0,s.Cb)({type:l,constructOnly:!0,nonNullable:!0,json:{write:!0}})],d.prototype,"rightAngleTriangleSnapper",void 0),(0,n._)([(0,s.Cb)({type:Number,nonNullable:!0,range:{min:-1,max:50,step:1},json:{write:!0}})],d.prototype,"shortLineThreshold",void 0),(0,n._)([(0,s.Cb)({type:Number,nonNullable:!0,range:{min:-1,max:50,step:1},json:{write:!0}})],d.prototype,"distance",void 0),(0,n._)([(0,s.Cb)({type:Number,nonNullable:!0,range:{min:0,max:1e-5},json:{write:!0}})],d.prototype,"pointThreshold",void 0),(0,n._)([(0,s.Cb)({type:Number,nonNullable:!0,range:{min:0,max:1e-5},json:{write:!0}})],d.prototype,"intersectionParallelLineThreshold",void 0),(0,n._)([(0,s.Cb)({type:Number,nonNullable:!0,range:{min:0,max:1e-5},json:{write:!0}})],d.prototype,"parallelLineThreshold",void 0),(0,n._)([(0,s.Cb)({type:Number,nonNullable:!0,range:{min:0,max:10},json:{write:!0}})],d.prototype,"touchSensitivityMultiplier",void 0),(0,n._)([(0,s.Cb)({type:Number,nonNullable:!0,range:{min:0,max:1e-5},json:{write:!0}})],d.prototype,"pointOnLineThreshold",void 0),(0,n._)([(0,s.Cb)({type:o.Z,nonNullable:!0})],d.prototype,"orange",void 0),(0,n._)([(0,s.Cb)({type:Number,nonNullable:!0,range:{min:0,max:10},json:{write:!0}})],d.prototype,"lineHintWidthReference",void 0),(0,n._)([(0,s.Cb)({type:Number,nonNullable:!0,range:{min:0,max:10},json:{write:!0}})],d.prototype,"lineHintWidthTarget",void 0),(0,n._)([(0,s.Cb)({type:Number,nonNullable:!0,range:{min:0,max:1},json:{write:!0}})],d.prototype,"lineHintFadedExtensions",void 0),(0,n._)([(0,s.Cb)({type:Number,nonNullable:!0,range:{min:0,max:10},json:{write:!0}})],d.prototype,"parallelLineHintWidth",void 0),(0,n._)([(0,s.Cb)({type:Number,nonNullable:!0,range:{min:0,max:50},json:{write:!0}})],d.prototype,"parallelLineHintLength",void 0),(0,n._)([(0,s.Cb)({type:Number,nonNullable:!0,range:{min:0,max:5},json:{write:!0}})],d.prototype,"parallelLineHintOffset",void 0),(0,n._)([(0,s.Cb)({type:Number,nonNullable:!0,range:{min:0,max:46},json:{write:!0}})],d.prototype,"rightAngleHintSize",void 0),(0,n._)([(0,s.Cb)({type:Number,nonNullable:!0,range:{min:0,max:6},json:{write:!0}})],d.prototype,"rightAngleHintOutlineSize",void 0),d=(0,n._)([(0,a.j)("esri.views.interactive.snapping.Settings.Defaults")],d);const h=new d},90609:(e,t,i)=>{i.d(t,{w:()=>r});var n=i(64674),o=i(55054);class r extends o.r{constructor(e,t){super(t),this.intersectionPoint=e}equals(e){return e instanceof r&&(0,n.Xv)(this.intersectionPoint,e.intersectionPoint)}}},53397:(e,t,i)=>{i.d(t,{w:()=>s});i(93169);var n=i(32718),o=i(64674),r=i(55054);n.Z.getLogger("esri.views.interactive.snapping.hints.LineSnappingHint");class s extends r.r{constructor(e,t,i,n){let o=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],r=!(arguments.length>5&&void 0!==arguments[5])||arguments[5];super(n),this.type=e,this.lineStart=t,this.lineEnd=i,this.fadeLeft=o,this.fadeRight=r}equals(e){return e instanceof s&&this.type===e.type&&(0,o.Xv)(this.lineStart,e.lineStart)&&(0,o.Xv)(this.lineEnd,e.lineEnd)&&this.fadeLeft===e.fadeLeft&&this.fadeRight===e.fadeRight}}},5916:(e,t,i)=>{i.d(t,{L:()=>s});i(93169);var n=i(32718),o=i(64674),r=i(55054);n.Z.getLogger("esri.views.interactive.snapping.hints.ParallelSnappingHint");class s extends r.r{constructor(e,t,i){super(i),this.lineStart=e,this.lineEnd=t}equals(e){return e instanceof s&&(0,o.Xv)(this.lineStart,e.lineStart)&&(0,o.Xv)(this.lineEnd,e.lineEnd)}}},41216:(e,t,i)=>{i.d(t,{y:()=>s});i(93169);var n=i(32718),o=i(64674),r=i(55054);n.Z.getLogger("esri.views.interactive.snapping.hints.RightAngleSnappingHint");class s extends r.r{constructor(e,t,i,n){super(n),this.previousVertex=e,this.centerVertex=t,this.nextVertex=i}equals(e){return e instanceof s&&(0,o.Xv)(this.previousVertex,e.previousVertex)&&(0,o.Xv)(this.centerVertex,e.centerVertex)&&(0,o.Xv)(this.nextVertex,e.nextVertex)}}},55054:(e,t,i)=>{i.d(t,{r:()=>n});class n{constructor(e){this.elevationInfo=e}}},64674:(e,t,i)=>{i.d(t,{Xv:()=>a,lQ:()=>l,tp:()=>s,ze:()=>n});var n,o,r=i(88396);function s(e,t){const i=e.x-t.x,n=e.y-t.y;return i*i+n*n}function a(e,t){const i=e.length===t.length&&e[0]===t[0]&&e[1]===t[1];switch(e.length){case 2:return i;case 3:return i&&e[2]===t[2];case 4:return i&&e[3]===t[3]}return!1}function l(e,t){t.sort(((t,i)=>(0,r.s)(t.targetPoint,e)-(0,r.s)(i.targetPoint,e)))}(o=n||(n={}))[o.TARGET=0]="TARGET",o[o.REFERENCE=1]="REFERENCE",o[o.REFERENCE_EXTENSION=2]="REFERENCE_EXTENSION"},45008:(e,t,i)=>{i.d(t,{D:()=>l,K:()=>a});i(59486);var n=i(92026),o=i(68860),r=i(96669),s=i(53866);function a(e,t,i){let r,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new s.Z;if("2d"===i.type)r=t*i.resolution;else if("3d"===i.type){const s=i.overlayPixelSizeInMapUnits(e),a=i.basemapSpatialReference;r=(0,n.pC)(a)&&!a.equals(i.spatialReference)?(0,o.c9)(a)/(0,o.c9)(i.spatialReference):t*s}const l=e.x-r,d=e.y-r,h=e.x+r,p=e.y+r,{spatialReference:c}=i;return a.xmin=Math.min(l,h),a.ymin=Math.min(d,p),a.xmax=Math.max(l,h),a.ymax=Math.max(d,p),a.spatialReference=c,a}function l(e,t,i){const o=i.toMap(e);return!(0,n.Wi)(o)&&a(o,(0,r.k)(),i,d).intersects(t)}const d=new s.Z},94163:(e,t,i)=>{i.d(t,{Oy:()=>d,SP:()=>n,UG:()=>y,aW:()=>c,dU:()=>g,k0:()=>p,l0:()=>_,pk:()=>v,xO:()=>u});var n,o,r=i(16889),s=i(88396),a=i(6394);function l(e,t){return e[0]*t[1]-e[1]*t[0]}function d(e,t,i){const n=(t[0]-e[0])*(i[1]-e[1])-(t[1]-e[1])*(i[0]-e[0]);return Math.abs(n)/(0,s.j)(t,i)}function h(e,t,i){const n=(0,s.h)(i,t)/(0,s.u)(i);return(0,s.f)(e,i,n)}function p(e,t,i,n){let o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:i;return(0,s.g)(w,n,i),(0,s.g)(C,t,o),h(b,C,w),(0,s.b)(e,o,b)}function c(e,t,i,n){(0,s.g)(w,n,i),(0,s.g)(C,t,i);const o=(0,s.h)(w,C)/(0,s.u)(w);return o>0?(0,s.v)(e,i,w,o):(0,s.c)(e,i)}function u(e,t,i,n){(0,s.g)(w,t,i);const o=n/(0,s.o)(w);return(0,s.v)(e,i,w,o)}function v(e,t){return p(C,t,e.start,e.end),(0,r.W8)(C[0],t[0])&&(0,r.W8)(C[1],t[1])?[(0,a.d)(t)]:[]}function _(e,t,i){return u(C,i,e,t),(0,r.W8)(C[0],i[0])&&(0,r.W8)(C[1],i[1])?[(0,a.d)(i)]:[]}function g(e,t){const i=e.start,o=e.end,r=t.start,a=t.end,d=(0,s.g)(w,o,i),h=(0,s.g)(f,a,r),p=l(d,h);if(Math.abs(p)<=m)return[];const c=(0,s.g)(C,i,r),u=l(h,c)/p,v=l(d,c)/p;if(u>=0){if(v>=0||t.type===n.LINE)return[(0,s.v)(b,i,d,u)]}else if(e.type===n.LINE&&(v>=0||t.type===n.LINE))return[(0,s.v)(b,i,d,u)];return[]}function y(e,t,i){const o=[],r=(0,s.g)(w,e.end,e.start),a=(0,s.g)(f,e.start,t),l=(0,s.u)(r),d=2*(0,s.h)(r,a),h=d*d-4*l*((0,s.u)(a)-i*i);if(0===h){const t=-d/(2*l);(e.type===n.LINE||t>=0)&&o.push((0,s.v)(b,e.start,r,t))}else if(h>0){const t=Math.sqrt(h),i=(-d+t)/(2*l);(e.type===n.LINE||i>=0)&&o.push((0,s.v)(b,e.start,r,i));const a=(-d-t)/(2*l);(e.type===n.LINE||a>=0)&&o.push((0,s.v)(C,e.start,r,a))}return o}(o=n||(n={}))[o.RAY=0]="RAY",o[o.LINE=1]="LINE";const m=1e-6,w=(0,a.a)(),f=(0,a.a)(),C=(0,a.a)(),b=(0,a.a)()},32845:(e,t,i)=>{i.d(t,{V:()=>p});var n=i(27366),o=i(85015),r=i(100),s=i(32718),a=i(92026),l=i(94172),d=i(49861),h=(i(63780),i(93169),i(25243),i(69912));let p=class extends o.Z{constructor(e){super(e),this.tool=null,this._baseHandles=new r.Z,this._loggedUnsupportedErrorOnce=!1,this.logger=s.Z.getLogger(this.declaredClass),e&&null!=e.visible&&(this.visible=e.visible)}initialize(){this._baseHandles.add((0,l.YP)((()=>({ready:(0,a.pC)(this.view)&&this.view.ready,supported:this.supported})),(e=>{let{ready:t,supported:i}=e;!t||i||this._loggedUnsupportedErrorOnce||(this.logError(this.unsupportedErrorMessage),this._loggedUnsupportedErrorOnce=!0)}),l.tX))}destroy(){this.removeTool(),this.view=null,this._baseHandles=(0,a.SC)(this._baseHandles)}get supported(){return(0,a.Wi)(this.view)||this.view.type===this.supportedViewType}get view(){return this._get("view")}set view(e){if(e===this.view)return;this.removeTool(),this._set("view",e);const t="tools";this._baseHandles.remove(t),(0,a.Wi)(e)||this._baseHandles.add(e.tools.on("after-remove",(e=>{e.item===this.tool&&this._set("tool",null)})),t)}set visible(e){this._set("visible",e),(0,a.pC)(this.tool)&&(this.tool.visible=e)}get active(){return(0,a.pC)(this.tool)&&this.tool.active}get disabled(){return(0,a.Wi)(this.view)||!this.view.ready||!this.supported}createTool(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{interactive:!1};if(this.removeTool(),(0,a.Wi)(this.view)||!this.view.ready||!this.supported)return;const t=this.constructTool();t.created?(this._set("tool",t),this.view.tools.add(t)):e.interactive?(this._set("tool",t),this.view.addAndActivateTool(t),(0,l.gx)((()=>t.created),(()=>{t.active&&(0,a.pC)(this.view)&&(this.view.activeTool=null)}),{initial:!0,once:!0})):t.destroy()}removeTool(){const e=this.tool;if((0,a.Wi)(e))return;const t=(0,a.yw)(this.view,(e=>e.tools));(0,a.pC)(t)?t.remove(e):e.destroy(),this._set("tool",null)}logError(){this.logger.error(...arguments)}};(0,n._)([(0,d.Cb)({constructOnly:!0})],p.prototype,"tool",void 0),(0,n._)([(0,d.Cb)()],p.prototype,"supported",null),(0,n._)([(0,d.Cb)({value:null})],p.prototype,"view",null),(0,n._)([(0,d.Cb)({type:Boolean,value:!0})],p.prototype,"visible",null),(0,n._)([(0,d.Cb)()],p.prototype,"active",null),(0,n._)([(0,d.Cb)()],p.prototype,"disabled",null),p=(0,n._)([(0,h.j)("esri.widgets.support.InteractiveToolViewModel")],p)}}]);
//# sourceMappingURL=6539.90abb50b.chunk.js.map