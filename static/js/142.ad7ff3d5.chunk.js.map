{"version":3,"sources":["../node_modules/@arcgis/core/views/2d/layers/features/Store2D.js","../node_modules/@arcgis/core/views/2d/arcade/callExpressionWithCursor.js","../node_modules/@arcgis/core/views/2d/layers/features/FeatureStore2D.js","../node_modules/@arcgis/core/core/CircularArray.js","../node_modules/@arcgis/core/layers/graphics/data/utils.js","../node_modules/@arcgis/core/views/2d/layers/features/support/whereUtils.js","../node_modules/@arcgis/core/layers/graphics/data/FeatureFilter.js","../node_modules/@arcgis/core/layers/graphics/data/timeSupport.js","../node_modules/@arcgis/core/layers/graphics/contains.js","../node_modules/@arcgis/core/layers/graphics/data/spatialQuerySupport.js","../node_modules/@arcgis/core/geometry/support/intersects.js","../node_modules/@arcgis/core/views/2d/layers/features/support/FeatureSetReaderPBFIndirect.js"],"names":["c","o","constructor","e","s","this","_canCacheExpressionValue","_sourceInfo","_bitsets","computed","getBitset","createBitset","invalidate","clear","a","r","t","_schema","i","console","debug","targets","name","attributes","n","d","type","push","_createArcadeComputedField","_createLabelArcadeComputedField","_computedFields","Promise","all","some","expression","referencesScale","_statisticFields","setComputedAttributes","has","set","_evaluateField","resultType","setComputedNumericAtIndex","fieldIndex","setComputedStringAtIndex","spatialReference","fieldsIndex","valueExpression","createLabelFunction","label","builder","readArcadeFeature","evaluate","referencesGeometry","$feature","getLogger","warn","$view","scale","h","I","u","getObjectId","getAttributes","readAttributes","getAttribute","readAttribute","cloneWithGeometry","getGeometry","readHydratedGeometry","getCentroid","readCentroid","l","super","featureAdapter","events","_featureSetsByInstance","Map","_objectIdToDisplayId","_spatialIndexInvalid","_indexSearchCache","_index","minX","_storage","getXMin","minY","getYMin","maxX","getXMax","maxY","getYMax","mode","storage","storeStatistics","forEach","readGeometry","isPoint","lengths","reduce","length","featureCount","vertexCount","ringCount","hasInstance","onTileData","addOrUpdate","attachStorage","getCursor","next","getDisplayId","instance","_insertFeature","emit","search","_rebuildIndex","id","find","tileId","readers","_searchIndex","bounds","getInstanceId","get","from","enqueue","insert","getIndex","createDisplayId","setDisplayId","setInstanceId","remove","delete","releaseDisplayId","removeAtIndex","isEmpty","_lookupFeature","forEachUnsafe","_getFeatureSet","setIndex","forEachInBounds","lookupFeatureByDisplayId","forEachBounds","sweepFeatures","unsetAttributeData","sweepFeatureSets","lookupObjectId","lookupDisplayId","lookupByDisplayIdUnsafe","setBounds","load","size","_start","maxSize","_buffer","Array","entries","dequeue","peek","j","esriSRUnit_Meter","esriSRUnit_Kilometer","esriSRUnit_Foot","esriSRUnit_StatuteMile","esriSRUnit_NauticalMile","esriSRUnit_USNauticalMile","U","Object","freeze","M","F","G","N","esriGeometryPoint","f","esriGeometryPolyline","g","esriGeometryPolygon","S","esriGeometryMultipoint","R","O","hasZ","hasM","J","m","geometry","p","y","async","P","outFields","orderByFields","groupByFieldsForStatistics","outStatistics","trim","onStatisticField","outSR","Z","where","test","distance","units","fromJSON","then","w","geodesicBuffer","x","b","spatialRel","toJSON","z","B","JSON","parse","stringify","E","field","_geometryBounds","_idToVisibility","_serviceInfo","hash","_hash","check","_applyFilter","_resetAllHiddenIds","update","show","hide","setKnownIds","setTrue","Set","_","createQuery","timeExtent","objectIds","_setGeometryFilter","_setIdFilter","_setAttributeFilter","_setTimeFilter","_clause","WhereClause","create","isStandardized","error","testFeature","_idsToShow","_idsToHide","hiddenIds","_spatialQueryOperator","geometryType","_timeOperator","timeInfo","_filterByGeometry","_filterById","_filterByTime","_filterByExpression","startTimeField","endTimeField","Number","POSITIVE_INFINITY","NEGATIVE_INFINITY","isNaN","Math","min","max","start","end","coords","esriSpatialRelIntersects","esriSpatialRelContains","esriSpatialRelCrosses","esriSpatialRelDisjoint","esriSpatialRelEnvelopeIntersects","esriSpatialRelIndexIntersects","esriSpatialRelOverlaps","esriSpatialRelTouches","esriSpatialRelWithin","esriSpatialRelRelation","esriGeometryEnvelope","v","resolve","bind","query","rings","createInstance","_currentIndex","_reader","_indices","copy","hasNext","getSize","_nextIndex","_getExists","setArcadeSpatialReference","hasFeatures","exceededTransferLimit","getStorage","getComputedNumeric","getComputedNumericAtIndex","setComputedNumeric","getComputedString","getComputedStringAtIndex","setComputedString","transform","joinAttributes","hasField","setField","keys","castToText","getQuantizationTransform","getAttributeHash","getGroupId","setGroupId","getXHydrated","getYHydrated","getX","getY","readLegacyFeature","readOptimizedFeature","readLegacyPointGeometry","readLegacyGeometry","readLegacyCentroid","readGeometryArea","readUnquantizedGeometry","_readAttribute","Error","_readAttributes"],"mappings":"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","file":"static/js/142.ad7ff3d5.chunk.js","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport e from\"../../../../core/has.js\";import{isNone as s}from\"../../../../core/maybe.js\";import{diff as t,hasDiff as i}from\"../../../../core/accessorSupport/diffUtils.js\";import{createRendererExpression as a}from\"../../../../support/arcadeOnDemand.js\";import r from\"../../arcade/callExpressionWithCursor.js\";const c=import(\"../../../../layers/support/labelFormatUtils.js\");class o{constructor(e,s){this._canCacheExpressionValue=!1,this._sourceInfo=e,this._bitsets={computed:s.getBitset(s.createBitset())}}invalidate(){this._bitsets.computed.clear()}async updateSchema(a,r){const c=t(this._schema,r);if(this._schema=r,!r||s(c)||!i(c,\"attributes\"))return;e(\"esri-2d-update-debug\")&&console.debug(\"Applying Update - Store:\",c),this._bitsets.computed.clear(),a.targets[r.name]=!0;const o=r.attributes,n=[],d=[];for(const e in o){const s=o[e];switch(s.type){case\"field\":break;case\"expression\":n.push(this._createArcadeComputedField(s));break;case\"label-expression\":n.push(this._createLabelArcadeComputedField(s));break;case\"statistic\":d.push(s)}}this._computedFields=await Promise.all(n),this._canCacheExpressionValue=!this._computedFields.some((e=>\"expression\"===e.type&&e.expression.referencesScale())),this._statisticFields=d}setComputedAttributes(e,s,t,i){const a=this._bitsets.computed;if(!this._canCacheExpressionValue||!a.has(t)){a.set(t);for(const a of this._computedFields){const r=this._evaluateField(s,a,i);switch(a.resultType){case\"numeric\":e.setComputedNumericAtIndex(t,a.fieldIndex,r);break;case\"string\":e.setComputedStringAtIndex(t,a.fieldIndex,r)}}}}async _createArcadeComputedField(e){const s=this._sourceInfo.spatialReference,t=this._sourceInfo.fieldsIndex;return{...e,expression:await a(e.valueExpression,s,t)}}async _createLabelArcadeComputedField(e){const s=this._sourceInfo.spatialReference,t=this._sourceInfo.fieldsIndex,{createLabelFunction:i}=await c,a=await i(e.label,t,s);return{...e,builder:a}}_evaluateField(e,s,t){switch(s.type){case\"label-expression\":{const t=e.readArcadeFeature();return s.builder.evaluate(t)||\"\"}case\"expression\":{const{expression:i}=s;return r(i,e,{$view:{scale:t}})}}}}export{o as Store2D};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport e from\"../../../core/Logger.js\";function r(r,a,t){r.referencesGeometry();const n=a.readArcadeFeature();try{return r.evaluate({...t,$feature:n})}catch(o){return e.getLogger(\"esri.views.2d.support.arcadeOnDemand\").warn(\"Feature arcade evaluation failed:\",o),null}}export{r as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport t from\"../../../../core/CircularArray.js\";import e from\"../../../../core/Evented.js\";import\"../../../../core/has.js\";import{isNone as s,isSome as a,unwrap as r}from\"../../../../core/maybe.js\";import{r as n}from\"../../../../chunks/rbush.js\";import{fromRect as i}from\"../../../../geometry/support/aaBoundingBox.js\";import{Store2D as o}from\"./Store2D.js\";import{FeatureSetReaderIndirect as d}from\"./support/FeatureSetReaderPBFIndirect.js\";function h(t,e){return t<<16|e}function c(t){return(4294901760&t)>>>16}function I(t){return 65535&t}const u={getObjectId:t=>t.getObjectId(),getAttributes:t=>t.readAttributes(),getAttribute:(t,e)=>t.readAttribute(e),cloneWithGeometry:(t,e)=>t,getGeometry:t=>t.readHydratedGeometry(),getCentroid:(t,e)=>t.readCentroid()};class l extends o{constructor(s,a,r){super(s,a),this.featureAdapter=u,this.events=new e,this._featureSetsByInstance=new Map,this._objectIdToDisplayId=new Map,this._spatialIndexInvalid=!0,this._indexSearchCache=new t(50),this._index=n(9,(t=>({minX:this._storage.getXMin(t),minY:this._storage.getYMin(t),maxX:this._storage.getXMax(t),maxY:this._storage.getYMax(t)}))),this._storage=a,this.mode=r}get storage(){return this._storage}get storeStatistics(){let t=0,e=0,s=0;return this.forEach((a=>{const r=a.readGeometry();r&&(e+=r.isPoint?1:r.lengths.reduce(((t,e)=>t+e),0),s+=r.isPoint?1:r.lengths.length,t+=1)})),{featureCount:t,vertexCount:e,ringCount:s}}hasInstance(t){return this._featureSetsByInstance.has(t)}onTileData(t,e){if(s(e.addOrUpdate))return e;if(e.addOrUpdate.attachStorage(this._storage),\"snapshot\"===this.mode){const s=e.addOrUpdate.getCursor();for(;s.next();){const e=s.getDisplayId();this.setComputedAttributes(this._storage,s,e,t.scale)}return e}this._featureSetsByInstance.set(e.addOrUpdate.instance,e.addOrUpdate);const a=e.addOrUpdate.getCursor();for(;a.next();)this._insertFeature(a,t.scale);return this._spatialIndexInvalid=!0,this.events.emit(\"changed\"),e}search(t){this._rebuildIndex();const e=t.id,s=this._indexSearchCache.find((t=>t.tileId===e));if(a(s))return s.readers;const r=new Map,n=this._searchIndex(t.bounds),i=[];for(const a of n){const t=this._storage.getInstanceId(a),e=c(t),s=I(t);r.has(e)||r.set(e,[]);r.get(e).push(s)}return r.forEach(((t,e)=>{const s=this._featureSetsByInstance.get(e);i.push(d.from(s,t))})),this._indexSearchCache.enqueue({tileId:e,readers:i}),i}insert(t){const e=t.getCursor(),s=this._storage;for(;e.next();){var a;const t=h(e.instance,e.getIndex()),r=e.getObjectId(),n=null!=(a=this._objectIdToDisplayId.get(r))?a:this._storage.createDisplayId();e.setDisplayId(n),s.setInstanceId(n,t),this._objectIdToDisplayId.set(r,n)}this._featureSetsByInstance.set(t.instance,t),this._spatialIndexInvalid=!0}remove(t){const e=this._objectIdToDisplayId.get(t);if(!e)return;const s=this._storage.getInstanceId(e),a=I(s),r=c(s),n=this._featureSetsByInstance.get(r);this._objectIdToDisplayId.delete(t),this._storage.releaseDisplayId(e),n.removeAtIndex(a),n.isEmpty&&this._featureSetsByInstance.delete(r),this._spatialIndexInvalid=!0}forEach(t){this._objectIdToDisplayId.forEach((e=>{const s=this._storage.getInstanceId(e),a=this._lookupFeature(s);t(a)}))}forEachUnsafe(t){this._objectIdToDisplayId.forEach((e=>{const s=this._storage.getInstanceId(e),a=c(s),r=I(s),n=this._getFeatureSet(a);n.setIndex(r),t(n)}))}forEachInBounds(t,e){const s=this._searchIndex(t);for(const a of s){const t=this.lookupFeatureByDisplayId(a,this._storage);e(r(t))}}forEachBounds(t,e,s){this._rebuildIndex();const a=[0,0,0,0];for(const r of t){if(!r.readGeometry())continue;const t=r.getDisplayId();a[0]=this._storage.getXMin(t),a[1]=this._storage.getYMin(t),a[2]=this._storage.getXMax(t),a[3]=this._storage.getYMax(t),e(i(s,a))}}sweepFeatures(t,e,s){this._spatialIndexInvalid=!0,this._objectIdToDisplayId.forEach(((a,r)=>{t.has(a)||(e.releaseDisplayId(a),s&&s.unsetAttributeData(a),this._objectIdToDisplayId.delete(r))})),this.events.emit(\"changed\")}sweepFeatureSets(t){this._spatialIndexInvalid=!0,this._featureSetsByInstance.forEach(((e,s)=>{t.has(s)||this._featureSetsByInstance.delete(s)}))}lookupObjectId(t,e){const a=this.lookupFeatureByDisplayId(t,e);return s(a)?null:a.getObjectId()}lookupDisplayId(t){return this._objectIdToDisplayId.get(t)}lookupFeatureByDisplayId(t,e){const s=e.getInstanceId(t);return this._lookupFeature(s)}lookupByDisplayIdUnsafe(t){const e=this._storage.getInstanceId(t),s=c(e),a=I(e),r=this._getFeatureSet(s);return r?(r.setIndex(a),r):null}_insertFeature(t,e){const s=this._storage,a=t.getObjectId(),r=h(t.instance,t.getIndex());s.getInstanceId(t.getDisplayId());let n=this._objectIdToDisplayId.get(a);n||(n=s.createDisplayId(),this._objectIdToDisplayId.set(a,n),this._spatialIndexInvalid=!0),t.setDisplayId(n),s.setInstanceId(n,r),this.setComputedAttributes(s,t,n,e)}_searchIndex(t){this._rebuildIndex();const e={minX:t[0],minY:t[1],maxX:t[2],maxY:t[3]};return this._index.search(e)}_rebuildIndex(){if(!this._spatialIndexInvalid)return;const t=[];\"snapshot\"===this.mode?this._featureSetsByInstance.forEach((e=>{const s=e.getCursor();for(;s.next();){const e=s.getDisplayId();this._storage.setBounds(e,s)&&t.push(e)}})):this._objectIdToDisplayId.forEach((e=>{const s=this._storage.getInstanceId(e);this._storage.setBounds(e,this._lookupFeature(s))&&t.push(e)})),this._index.clear(),this._index.load(t),this._indexSearchCache.clear(),this._spatialIndexInvalid=!1}_lookupFeature(t){const e=c(t),s=I(t),a=this._getFeatureSet(e);if(!a)return null;const r=a.getCursor();return r.setIndex(s),r}_getFeatureSet(t){return this._featureSetsByInstance.get(t)}}export{l as FeatureStore2D,u as featureAdapter};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport{isSome as t}from\"./maybe.js\";class s{constructor(t){this.size=0,this._start=0,this.maxSize=t,this._buffer=new Array(t)}get entries(){return this._buffer}enqueue(t){if(this.size===this.maxSize){const s=this._buffer[this._start];return this._buffer[this._start]=t,this._start=(this._start+1)%this.maxSize,s}return this._buffer[(this._start+this.size++)%this.maxSize]=t,null}dequeue(){if(0===this.size)return null;const t=this._buffer[this._start];return this._buffer[this._start]=null,this.size--,this._start=(this._start+1)%this.maxSize,t}peek(){return 0===this.size?null:this._buffer[this._start]}find(s){if(0===this.size)return null;for(const e of this._buffer)if(t(e)&&s(e))return e;return null}clear(s){let e=this.dequeue();for(;t(e);)s&&s(e),e=this.dequeue()}}export{s as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport{JSONMap as e}from\"../../../core/jsonMap.js\";import{isNone as t,isSome as r}from\"../../../core/maybe.js\";import{getUnitString as i}from\"../../../core/unitUtils.js\";import{getGeometryExtent as o}from\"../../../geometry/support/extentUtils.js\";import{fromJSON as n}from\"../../../geometry/support/jsonUtils.js\";import{normalizeCentralMeridian as s}from\"../../../geometry/support/normalizeUtils.js\";import{isGeographic as l,isWebMercator as a,WGS84 as m}from\"../../../geometry/support/spatialReferenceUtils.js\";import{getCentroidOptimizedGeometry as c}from\"../centroid.js\";import{quantizeOptimizedGeometry as u,convertToPoint as f,generalizeOptimizedGeometry as p,removeZMValues as y,convertToPolyline as g,convertToPolygon as S,convertToMultipoint as R}from\"../featureConversionUtils.js\";import d from\"../OptimizedGeometry.js\";import{checkProjectionSupport as h,project as w}from\"./projectionSupport.js\";const j=new e({esriSRUnit_Meter:\"meters\",esriSRUnit_Kilometer:\"kilometers\",esriSRUnit_Foot:\"feet\",esriSRUnit_StatuteMile:\"miles\",esriSRUnit_NauticalMile:\"nautical-miles\",esriSRUnit_USNauticalMile:\"us-nautical-miles\"}),U=Object.freeze({}),M=new d,F=new d,G=new d,N={esriGeometryPoint:f,esriGeometryPolyline:g,esriGeometryPolygon:S,esriGeometryMultipoint:R};function O(e,r,i,o=e.hasZ,n=e.hasM){if(t(r))return null;const s=e.hasZ&&o,l=e.hasM&&n;if(i){const t=u(G,r,e.hasZ,e.hasM,\"esriGeometryPoint\",i,o,n);return f(t,s,l)}return f(r,s,l)}function _(e,t,r){return\"esriGeometryPolygon\"===e.geometryType&&t&&(t.centroid||t.geometry)?(t.centroid||(t.centroid=c(new d,t.geometry,e.hasZ,e.hasM)),O(e,t.centroid,r)):null}function J(e,i,o,n,s,l,a=i,m=o){const c=i&&a,f=o&&m,g=r(n)?\"coords\"in n?n:n.geometry:null;if(t(g))return null;if(s){let t=p(F,g,i,o,e,s,a,m);return l&&(t=u(G,t,c,f,e,l)),N[e](t,c,f)}if(l){const t=u(G,g,i,o,e,l,a,m);return N[e](t,c,f)}return y(M,g,i,o,a,m),N[e](M,c,f)}async function P(e,t,r){const{outFields:i,orderByFields:o,groupByFieldsForStatistics:n,outStatistics:s}=e;if(i)for(let l=0;l<i.length;l++)i[l]=i[l].trim();if(o)for(let l=0;l<o.length;l++)o[l]=o[l].trim();if(n)for(let l=0;l<n.length;l++)n[l]=n[l].trim();if(s)for(let l=0;l<s.length;l++)s[l].onStatisticField&&(s[l].onStatisticField=s[l].onStatisticField.trim());return e.geometry&&!e.outSR&&(e.outSR=e.geometry.spatialReference),Z(e,t,r)}async function v(e,t,r){return Z(e,t,r)}async function Z(e,r,i){if(!e)return null;let{where:l}=e;if(e.where=l=l&&l.trim(),(!l||/^1 *= *1$/.test(l)||r&&r===l)&&(e.where=null),!e.geometry)return e;let a=await b(e);if(e.distance=0,e.units=null,\"esriSpatialRelEnvelopeIntersects\"===e.spatialRel){const{spatialReference:t}=e.geometry;a=o(a),a.spatialReference=t}e.geometry=a,await h(a.spatialReference,i);const m=(await s(n(a)))[0];if(t(m))throw U;const c=m.toJSON(),u=await w(c,c.spatialReference,i);if(!u)throw U;return u.spatialReference=i,e.geometry=u,e}async function b(e){const{geometry:t,distance:r,units:o}=e;if(null==r||\"vertexAttributes\"in t)return t;const n=t.spatialReference,s=o?j.fromJSON(o):i(n),c=n&&(l(n)||a(n))?t:await h(n,m).then((()=>w(t,m)));return(await x())(c.spatialReference,c,r,s)}async function x(){return(await import(\"../../../geometry/geometryEngineJSON.js\")).geodesicBuffer}function z(e){return e&&B in e?JSON.parse(JSON.stringify(e,E)):e}const B=\"_geVersion\",E=(e,t)=>e!==B?t:void 0;export{U as QUERY_ENGINE_EMPTY_RESULT,z as cleanFromGeometryEngine,_ as getCentroid,J as getGeometry,v as normalizeFilter,P as normalizeQuery,Z as normalizeQueryLike,O as transformCentroid};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport e from\"../../../../../core/Error.js\";import r from\"../../../../../core/Logger.js\";const t=r.getLogger(\"esri.views.2d.layers.features.support.whereUtils\"),a={getAttribute:(e,r)=>e.field(r)};async function s(r,s){const n=await import(\"../../../../../core/sql/WhereClause.js\");try{const o=n.WhereClause.create(r,s);if(!o.isStandardized){const r=new e(\"mapview - bad input\",\"Unable to apply filter's definition expression, as expression is not standardized.\",o);t.error(r)}return e=>{const r=e.readArcadeFeature();return o.testFeature(r,a)}}catch(o){return t.warn(\"mapview-bad-where-clause\",\"Encountered an error when evaluating where clause\",r),e=>!0}}export{s as createWhereClause};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport t from\"../../../core/Error.js\";import e from\"../../../core/Logger.js\";import{isSome as i}from\"../../../core/maybe.js\";import{create as s}from\"../../../geometry/support/aaBoundingRect.js\";import{getBoundsXY as r}from\"../../../geometry/support/boundsUtils.js\";import{getSpatialQueryOperator as o}from\"./spatialQuerySupport.js\";import{getTimeOperator as h}from\"./timeSupport.js\";import{normalizeQueryLike as a}from\"./utils.js\";import l from\"../../../rest/support/Query.js\";import{featureAdapter as n}from\"../../../views/2d/layers/features/FeatureStore2D.js\";import{createWhereClause as d}from\"../../../views/2d/layers/features/support/whereUtils.js\";const m=e.getLogger(\"esri.views.2d.layers.features.controllers.FeatureFilter\"),_=1,u=2;class p{constructor(t){this._geometryBounds=s(),this._idToVisibility=new Map,this._serviceInfo=t}get hash(){return this._hash}check(t){return this._applyFilter(t)}clear(){const t=this._resetAllHiddenIds();return this.update(),{show:t,hide:[]}}invalidate(){this._idToVisibility.forEach(((t,e)=>{this._idToVisibility.set(e,0)}))}setKnownIds(t){for(const e of t)this._idToVisibility.set(e,_)}setTrue(t){const e=[],i=[],s=new Set(t);return this._idToVisibility.forEach(((t,r)=>{const o=!!(this._idToVisibility.get(r)&_),h=s.has(r);!o&&h?e.push(r):o&&!h&&i.push(r),this._idToVisibility.set(r,h?_|u:0)})),{show:e,hide:i}}createQuery(){const{geometry:t,spatialRel:e,where:i,timeExtent:s,objectIds:r}=this;return l.fromJSON({geometry:t,spatialRel:e,where:i,timeExtent:s,objectIds:r})}async update(t,e){this._hash=JSON.stringify(t);const i=await a(t,null,e);await Promise.all([this._setGeometryFilter(i),this._setIdFilter(i),this._setAttributeFilter(i),this._setTimeFilter(i)])}async _setAttributeFilter(t){if(!t||!t.where)return this._clause=null,void(this.where=null);this._clause=await d(t.where,this._serviceInfo.fieldsIndex),this.where=t.where}_setIdFilter(t){this._idsToShow=t&&t.objectIds&&new Set(t.objectIds),this._idsToHide=t&&t.hiddenIds&&new Set(t.hiddenIds),this.objectIds=t&&t.objectIds}async _setGeometryFilter(t){if(!t||!t.geometry)return this._spatialQueryOperator=null,this.geometry=null,void(this.spatialRel=null);const e=t.geometry,i=t.spatialRel||\"esriSpatialRelIntersects\",s=await o(i,e,this._serviceInfo.geometryType,this._serviceInfo.hasZ,this._serviceInfo.hasM);r(this._geometryBounds,e),this._spatialQueryOperator=s,this.geometry=e,this.spatialRel=i}_setTimeFilter(e){if(this.timeExtent=this._timeOperator=null,e&&e.timeExtent)if(this._serviceInfo.timeInfo)this.timeExtent=e.timeExtent,this._timeOperator=h(this._serviceInfo.timeInfo,e.timeExtent,n);else{const i=new t(\"feature-layer-view:time-filter-not-available\",\"Unable to apply time filter, as layer doesn't have time metadata.\",e.timeExtent);m.error(i)}}_applyFilter(t){return this._filterByGeometry(t)&&this._filterById(t)&&this._filterByTime(t)&&this._filterByExpression(t)}_filterByExpression(t){return!this.where||this._clause(t)}_filterById(t){return(!this._idsToHide||!this._idsToHide.size||!this._idsToHide.has(t.getObjectId()))&&(!this._idsToShow||!this._idsToShow.size||this._idsToShow.has(t.getObjectId()))}_filterByGeometry(t){if(!this.geometry)return!0;const e=t.readHydratedGeometry();return!!e&&this._spatialQueryOperator(e)}_filterByTime(t){return!i(this._timeOperator)||this._timeOperator(t)}_resetAllHiddenIds(){const t=[];return this._idToVisibility.forEach(((e,i)=>{e&_||(this._idToVisibility.set(i,_),t.push(i))})),t}}export{p as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nfunction t(t,n){if(!t)return null;const e=n.featureAdapter,{startTimeField:u,endTimeField:l}=t;let r=Number.POSITIVE_INFINITY,i=Number.NEGATIVE_INFINITY;if(u&&l)n.forEach((t=>{const n=e.getAttribute(t,u),o=e.getAttribute(t,l);null==n||isNaN(n)||(r=Math.min(r,n)),null==o||isNaN(o)||(i=Math.max(i,o))}));else{const t=u||l;n.forEach((n=>{const u=e.getAttribute(n,t);null==u||isNaN(u)||(r=Math.min(r,u),i=Math.max(i,u))}))}return{start:r,end:i}}function n(t,n,r){if(!n||!t)return null;const{startTimeField:i,endTimeField:o}=t;if(!i&&!o)return null;const{start:s,end:a}=n;return null===s&&null===a?null:void 0===s&&void 0===a?l():i&&o?e(r,i,o,s,a):u(r,i||o,s,a)}function e(t,n,e,u,l){return null!=u&&null!=l?r=>{const i=t.getAttribute(r,n),o=t.getAttribute(r,e);return(null==i||i<=l)&&(null==o||o>=u)}:null!=u?n=>{const l=t.getAttribute(n,e);return null==l||l>=u}:null!=l?e=>{const u=t.getAttribute(e,n);return null==u||u<=l}:void 0}function u(t,n,e,u){return null!=e&&null!=u&&e===u?u=>t.getAttribute(u,n)===e:null!=e&&null!=u?l=>{const r=t.getAttribute(l,n);return r>=e&&r<=u}:null!=e?u=>t.getAttribute(u,n)>=e:null!=u?e=>t.getAttribute(e,n)<=u:void 0}function l(){return()=>!1}export{t as getTimeExtent,n as getTimeOperator};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nfunction n(n,t){return n?t?4:3:t?3:2}function t(n,t,r,e){return o(n,t,r,e.coords[0],e.coords[1])}function r(t,r,e,c,u,f){const s=n(u,f),{coords:i,lengths:l}=c;if(!l)return!1;for(let n=0,d=0;n<l.length;n++,d+=s)if(!o(t,r,e,i[d],i[d+1]))return!1;return!0}function o(t,r,o,c,u){if(!t)return!1;const f=n(r,o),{coords:s,lengths:i}=t;let l=!1,d=0;for(const n of i)l=e(l,s,f,d,n,c,u),d+=n*f;return l}function e(n,t,r,o,e,c,u){let f=n,s=o;for(let i=o,l=o+e*r;i<l;i+=r){s=i+r,s===l&&(s=o);const n=t[i],e=t[i+1],d=t[s],g=t[s+1];(e<u&&g>=u||g<u&&e>=u)&&n+(u-e)/(g-e)*(d-n)<c&&(f=!f)}return f}export{o as polygonContainsCoords,r as polygonContainsMultipoint,t as polygonContainsPoint};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport e from\"../../../core/Error.js\";import{extentContainsPoint as r,extentContainsMultipoint as t}from\"../../../geometry/support/contains.js\";import{getExtentIntersector as i}from\"../../../geometry/support/intersects.js\";import{isPolygon as s,isExtent as o,getJsonType as n}from\"../../../geometry/support/jsonUtils.js\";import{isValid as l}from\"../../../geometry/support/spatialReferenceUtils.js\";import{polygonContainsPoint as a,polygonContainsMultipoint as p}from\"../contains.js\";import{convertFromPolygon as m}from\"../featureConversionUtils.js\";import u from\"../OptimizedGeometry.js\";import{checkProjectionSupport as y}from\"./projectionSupport.js\";import{getGeometry as f}from\"./utils.js\";const c=\"feature-store:unsupported-query\",R={esriSpatialRelIntersects:\"intersects\",esriSpatialRelContains:\"contains\",esriSpatialRelCrosses:\"crosses\",esriSpatialRelDisjoint:\"disjoint\",esriSpatialRelEnvelopeIntersects:\"intersects\",esriSpatialRelIndexIntersects:null,esriSpatialRelOverlaps:\"overlaps\",esriSpatialRelTouches:\"touches\",esriSpatialRelWithin:\"within\",esriSpatialRelRelation:null},S={spatialRelationship:{esriSpatialRelIntersects:!0,esriSpatialRelContains:!0,esriSpatialRelWithin:!0,esriSpatialRelCrosses:!0,esriSpatialRelDisjoint:!0,esriSpatialRelTouches:!0,esriSpatialRelOverlaps:!0,esriSpatialRelEnvelopeIntersects:!0,esriSpatialRelIndexIntersects:!1,esriSpatialRelRelation:!1},queryGeometry:{esriGeometryPoint:!0,esriGeometryMultipoint:!0,esriGeometryPolyline:!0,esriGeometryPolygon:!0,esriGeometryEnvelope:!0},layerGeometry:{esriGeometryPoint:!0,esriGeometryMultipoint:!0,esriGeometryPolyline:!0,esriGeometryPolygon:!0,esriGeometryEnvelope:!1}};function G(e){return!0===S.spatialRelationship[e]}function g(e){return!0===S.queryGeometry[n(e)]}function j(e){return!0===S.layerGeometry[e]}function h(){return import(\"../../../geometry/geometryEngineJSON.js\")}function v(e,n,l,y,c){if(s(n)&&\"esriGeometryPoint\"===l&&(\"esriSpatialRelIntersects\"===e||\"esriSpatialRelContains\"===e)){const e=m(new u,n,!1,!1);return Promise.resolve((r=>a(e,!1,!1,r)))}if(s(n)&&\"esriGeometryMultipoint\"===l){const r=m(new u,n,!1,!1);if(\"esriSpatialRelContains\"===e)return Promise.resolve((e=>p(r,!1,!1,e,y,c)))}if(o(n)&&\"esriGeometryPoint\"===l&&(\"esriSpatialRelIntersects\"===e||\"esriSpatialRelContains\"===e))return Promise.resolve((e=>r(n,f(l,y,c,e))));if(o(n)&&\"esriGeometryMultipoint\"===l&&\"esriSpatialRelContains\"===e)return Promise.resolve((e=>t(n,f(l,y,c,e))));if(o(n)&&\"esriSpatialRelIntersects\"===e){const e=i(l);return Promise.resolve((r=>e(n,f(l,y,c,r))))}return h().then((r=>{const t=r[R[e]].bind(null,n.spatialReference,n);return e=>t(f(l,y,c,e))}))}async function P(r,t,i){const{spatialRel:s,geometry:o}=r;if(o){if(!G(s))throw new e(c,\"Unsupported query spatial relationship\",{query:r});if(l(o.spatialReference)&&l(i)){if(!g(o))throw new e(c,\"Unsupported query geometry type\",{query:r});if(!j(t))throw new e(c,\"Unsupported layer geometry type\",{query:r});if(r.outSR)return y(r.geometry&&r.geometry.spatialReference,r.outSR)}}}function I(e){if(o(e))return!0;if(s(e)){for(const r of e.rings){if(5!==r.length)return!1;if(r[0][0]!==r[1][0]||r[0][0]!==r[4][0]||r[2][0]!==r[3][0]||r[0][1]!==r[3][1]||r[0][1]!==r[4][1]||r[1][1]!==r[2][1])return!1}return!0}return!1}export{I as canQueryWithRBush,P as checkSpatialQuerySupport,v as getSpatialQueryOperator};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport{extentIntersectsExtent as e,getFeatureExtentIntersector as t}from\"./intersectsBase.js\";export{extentIntersectsExtent,extentIntersectsMultipoint,extentIntersectsPoint,extentIntersectsPolygon,extentIntersectsPolyline,getFeatureExtentIntersector,isSelfIntersecting,segmentIntersects}from\"./intersectsBase.js\";function n(n){return\"mesh\"===n?e:t(n)}export{n as getExtentIntersector};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport{FeatureSetReader as e}from\"./FeatureSetReader.js\";class r extends e{constructor(r,t){super(e.createInstance()),this._currentIndex=-1,this._reader=r,this._indices=t}static from(e,t){return new r(e.copy(),t)}get hasNext(){return this._currentIndex+1<this._indices.length}getSize(){return this._indices.length}getCursor(){return this.copy()}copy(){const e=new r(this._reader.copy(),this._indices);return e._currentIndex=this._currentIndex,e}next(){for(;this._nextIndex()&&!this._reader._getExists(););return this._currentIndex<this._indices.length}_nextIndex(){return++this._currentIndex<this._indices.length&&(this._reader.setIndex(this._indices[this._currentIndex]),!0)}setArcadeSpatialReference(e){this._reader.setArcadeSpatialReference(e)}attachStorage(e){this._reader.attachStorage(e)}get geometryType(){return this._reader.geometryType}get hasFeatures(){return this._reader.hasFeatures}get exceededTransferLimit(){return this._reader.exceededTransferLimit}get hasZ(){return this._reader.hasZ}get hasM(){return this._reader.hasM}getStorage(){return this._reader.getStorage()}getComputedNumeric(e){return this._reader.getComputedNumericAtIndex(0)}setComputedNumeric(e,r){return this._reader.setComputedNumericAtIndex(r,0)}getComputedString(e){return this._reader.getComputedStringAtIndex(0)}setComputedString(e,r){return this._reader.setComputedStringAtIndex(0,r)}getComputedNumericAtIndex(e){return this._reader.getComputedNumericAtIndex(e)}setComputedNumericAtIndex(e,r){this._reader.setComputedNumericAtIndex(e,r)}getComputedStringAtIndex(e){return this._reader.getComputedStringAtIndex(e)}setComputedStringAtIndex(e,r){return this._reader.setComputedStringAtIndex(e,r)}transform(e,r,t,d){const a=this.copy();return a._reader=this._reader.transform(e,r,t,d),a}readAttribute(e,r=!1){return this._reader.readAttribute(e,r)}readAttributes(){return this._reader.readAttributes()}joinAttributes(e){return this._reader.joinAttributes(e)}readArcadeFeature(){return this._reader.readArcadeFeature()}geometry(){return this._reader.geometry()}field(e){return this.readAttribute(e,!0)}hasField(e){return this._reader.hasField(e)}setField(e,r){return this._reader.setField(e,r)}keys(){return this._reader.keys()}castToText(){return this._reader.castToText()}getQuantizationTransform(){return this._reader.getQuantizationTransform()}getAttributeHash(){return this._reader.getAttributeHash()}getObjectId(){return this._reader.getObjectId()}getDisplayId(){return this._reader.getDisplayId()}setDisplayId(e){return this._reader.setDisplayId(e)}getGroupId(){return this._reader.getGroupId()}setGroupId(e){return this._reader.setGroupId(e)}getXHydrated(){return this._reader.getXHydrated()}getYHydrated(){return this._reader.getYHydrated()}getX(){return this._reader.getX()}getY(){return this._reader.getY()}setIndex(e){return this._reader.setIndex(e)}getIndex(){return this._reader.getIndex()}readLegacyFeature(){return this._reader.readLegacyFeature()}readOptimizedFeature(){return this._reader.readOptimizedFeature()}readLegacyPointGeometry(){return this._reader.readLegacyPointGeometry()}readLegacyGeometry(){return this._reader.readLegacyGeometry()}readLegacyCentroid(){return this._reader.readLegacyCentroid()}readGeometryArea(){return this._reader.readGeometryArea()}readUnquantizedGeometry(){return this._reader.readUnquantizedGeometry()}readHydratedGeometry(){return this._reader.readHydratedGeometry()}readGeometry(){return this._reader.readGeometry()}readCentroid(){return this._reader.readCentroid()}_readAttribute(e,r){throw new Error(\"Error: Should not be called. Underlying _reader should be used instead\")}_readAttributes(){throw new Error(\"Error: Should not be called. Underlying _reader should be used instead\")}}export{r as FeatureSetReaderIndirect};\n"],"sourceRoot":""}