{"version":3,"sources":["../node_modules/@arcgis/core/views/2d/layers/StreamLayerView2D.js","../node_modules/@arcgis/core/views/layers/LayerView.js","../node_modules/@arcgis/core/views/layers/support/ClipRect.js","../node_modules/@arcgis/core/views/layers/support/ClipArea.js","../node_modules/@arcgis/core/views/layers/support/Geometry.js","../node_modules/@arcgis/core/views/layers/support/Path.js","../node_modules/@arcgis/core/views/2d/layers/LayerView2D.js","../node_modules/@arcgis/core/views/2d/engine/webgl/visualVariablesUtils.js","../node_modules/@arcgis/core/renderers/support/clickToleranceUtils.js","../node_modules/@arcgis/core/views/support/drapedUtils.js","../node_modules/@arcgis/core/views/layers/support/popupUtils.js","../node_modules/@arcgis/core/AggregateGraphic.js","../node_modules/@arcgis/core/views/layers/support/FeatureFilter.js","../node_modules/@arcgis/core/views/layers/support/FeatureEffect.js","../node_modules/@arcgis/core/views/layers/FeatureLayerView.js","../node_modules/@arcgis/core/views/2d/layers/features/tileRenderers.js","../node_modules/@arcgis/core/views/2d/layers/support/FeatureLayerProxy.js","../node_modules/@arcgis/core/views/2d/tiling/TileManager.js","../node_modules/@arcgis/core/views/2d/layers/FeatureLayerView2D.js"],"names":["p","e","o","t","i","r","geometry","toJSON","where","l","c","constructor","super","arguments","this","_enabledDataReceived","errorString","connectionStatus","initialize","handles","add","layer","watch","_update","destroy","s","on","_proxy","enableEvent","remove","closed","hasEventListener","queryLatestObservations","timeInfo","endField","startField","_cleanUpQuery","then","n","fromJSON","features","forEach","sourceLayer","_createClientOptions","setProperty","set","propertyName","value","_createTileRendererHash","JSON","stringify","purgeOptions","definitionExpression","geometryDefinition","_createServiceOptions","objectIdField","fields","map","a","geometryType","spatialReference","type","source","parsedUrl","serviceFilter","enableDataReceived","maxReconnectionAttempts","maxReconnectionInterval","updateInterval","prototype","readOnly","d","EventedMixin","parent","when","catch","name","id","title","getLogger","declaredClass","error","get","canResume","getSuspendInfo","suspended","legendEnabled","updatingHandles","updating","isUpdating","_override","_clearOverride","visible","suspendInfo","view","ready","viewNotReady","loaded","layerNotLoaded","layerInvisible","Boolean","left","right","top","bottom","clone","_get","Number","String","json","write","y","base","key","typeMap","extent","polygon","types","read","m","path","ofType","rect","clips","moving","attached","lastUpdateId","updateRequested","container","h","fadeTransitionEnabled","opacity","requestUpdate","blendMode","effect","notifyChange","whenLayerView","destroyed","attach","detach","isVisibleAtScale","minScale","maxScale","processUpdate","isFulfilled","isResolved","_set","update","isRendering","scale","minDataValue","maxDataValue","minSize","maxSize","SIZE_MINMAX_VALUE","expression","valueExpression","Array","isArray","stops","SIZE_SCALE_STOPS","field","levels","SIZE_FIELD_STOPS","valueUnit","SIZE_UNIT_VALUE","NONE","xoffset","Math","max","abs","yoffset","length","size","filter","f","floor","renderer","event","pointerType","visualVariables","symbol","uniqueValueInfos","classBreakInfos","resolution","overlayPixelSizeInMapUnits","basemapSpatialReference","equals","x","xmin","min","ymin","xmax","ymax","toMap","intersects","popupTemplate","getRequiredFields","lastEditInfoEnabled","u","typeIdField","globalIdField","relationships","includes","push","indexOf","keyField","defaultPopupTemplateEnabled","defaultPopupTemplate","isAggregate","getEffectivePopupTemplate","featureReduction","popupEnabled","getObjectId","objectId","cloneProperties","esriSpatialRelIntersects","esriSpatialRelContains","esriSpatialRelCrosses","esriSpatialRelDisjoint","esriSpatialRelEnvelopeIntersects","esriSpatialRelIndexIntersects","esriSpatialRelOverlaps","esriSpatialRelTouches","esriSpatialRelWithin","esriSpatialRelRelation","esriSRUnit_Meter","esriSRUnit_Kilometer","esriSRUnit_Foot","esriSRUnit_StatuteMile","esriSRUnit_NauticalMile","esriSRUnit_USNauticalMile","spatialRelationship","hiddenIds","Set","distance","objectIds","units","timeExtent","enabled","writeWhere","enable","createQuery","reader","target","writer","from","overridePolicy","j","includedEffect","excludedEffect","excludedLabelsVisible","q","R","_updatingRequiredFieldsPromise","requiredFields","F","_handleRequiredFieldsChange","w","outFields","highlight","Error","returnGeometry","outSpatialReference","intersection","queryFeatures","queryObjectIds","queryFeatureCount","queryExtent","_loadArcadeModules","_updateRequiredFields","displayField","collectRequiredFields","floorInfo","floorField","sort","validateFetchPopupFeatures","fetchClientPopupFeatures","clientGraphics","Promise","resolve","arcadeUtils","hasGeometryOperations","createPopupQuery","attributes","concat","returnZ","returnM","b","isEmpty","E","v","g","default","_startupResolver","isReady","_controller","addResolvingPromise","_startWorker","signal","abort","_connection","close","client","tileRenderer","startup","transferList","service","config","tileInfo","tiles","invoke","updateTiles","promise","applyUpdate","setHighlight","refresh","queryStatistics","getDisplayId","getFeature","getAggregate","getAggregateValueRanges","mapValidDisplayIds","onEdits","addedFeatures","deletedFeatures","updatedFeatures","strategy","_tiles","Map","buffer","acquireTile","releaseTile","tileInfoView","clear","_releaseTile","tileKeys","getTileCoverage","state","spans","lodInfo","level","row","colFrom","colTo","getId","normalizeCol","getWorldForColumn","_getOrAcquireTile","_addPlaceholders","has","pool","release","hasMissingTiles","added","removed","_getTile","delete","_addPlaceholderChildren","_addPlaceholderParent","_addPlaceholderChild","hasData","contains","getParentKey","patchCount","K","W","X","k","I","M","_pipelineIsUpdating","_updatingPipelineConfig","_onGoingEdits","_isRefreshing","_visibilityOverrides","_effect","_highlightIds","_lastPixelBuffer","effectLists","included","V","excluded","doRefresh","_lockGPUUploads","_unlockGPUUploads","_doUpdate","_hasRequiredSupport","_getEffectiveRenderer","historicMoment","gdbVersion","labelsVisible","labelingInfo","availableFields","pixelBuffer","N","L","_createConfiguration","schema","_tileRendererHash","_initTileRenderer","_serviceOptions","effects","onConfigUpdate","_tileStrategy","openPorts","featuresTilingScheme","hasHighlight","keys","_onceTilesUpdated","mesh","targets","aggregate","_forceAttributeTextureUpload","invalidateLabels","_updateHighlight","_updateClusterSizeTask","all","_initProxy","_initServiceOptions","valueRanges","isTable","z","floors","getTime","filterHash","effectHash","streamFilter","clipsHash","hasEffects","_","isCollection","getAttribute","toArray","_addHighlight","_removeHighlight","hitTest","_hitTest","queryFeaturesJSON","count","setVisibility","timeline","record","D","_acquireTile","some","removeAllChildren","uninstall","moveStart","viewChange","moveEnd","fetchPopupFeatures","_fetchServicePopupFeatures","C","createFetchPopupFeaturesQueryGeometry","setUpdating","emitEvent","emit","_detectQueryMode","capabilities","operations","supportsEditing","mode","featureCount","fullExtent","width","height","warn","customParameters","getFeatureDefinition","dynamicDataSource","query","maxRecordCount","tileMaxRecordCount","_createMemoryServiceOptions","S","_createUpdateClusterSizeTask","_updateClusterEffectiveRendererSizeVariable","_effectiveRenderer","dynamicClusterSize","O","T","P","_aggregateValueRanges","aggregateFields","once","A","layerView","install","_createFeatureDataHash","getAttributeHash","_injectOverrides","_addFloorFilterClause","G","viewAllLevelIds","replace","join","RegExp","trim","H","U","devicePixelRatio","window","filters","supportsTextureFloat","maxTextureSize","lockGPUUploads","unlockGPUUploads","forceAttributeTextureUpload","begin","_updatingPromise","end","_createHittestResult","B","referenceId","J","Y"],"mappings":"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","file":"static/js/128.abf9b742.chunk.js","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../chunks/tslib.es6.js\";import\"../../../core/has.js\";import{isNone as t,isSome as r}from\"../../../core/maybe.js\";import\"../../../core/Logger.js\";import\"../../../core/accessorSupport/ensureType.js\";import{property as o}from\"../../../core/accessorSupport/decorators/property.js\";import{subclass as i}from\"../../../core/accessorSupport/decorators/subclass.js\";import s from\"../../../core/Error.js\";import\"../../../core/urlUtils.js\";import\"../../../core/uuid.js\";import\"../../../portal/support/resourceExtension.js\";import n from\"../../../tasks/support/FeatureSet.js\";import{toJSONGeometryType as a}from\"./support/util.js\";import c from\"./FeatureLayerView2D.js\";function p(e,o){if(t(e)&&t(o))return null;const i={};return r(o)&&(i.geometry=o.toJSON()),r(e)&&(i.where=e),i}let l=class extends c{constructor(){super(...arguments),this._enabledDataReceived=!1,this.errorString=null,this.connectionStatus=\"disconnected\"}initialize(){this.handles.add([this.layer.watch(\"purgeOptions\",(()=>this._update()))])}destroy(){this.connectionStatus=\"disconnected\"}get connectionError(){if(this.errorString)return new s(\"stream-controller\",this.errorString)}on(e,t){\"data-received\"===e&&(this._enabledDataReceived=!0,this._proxy.enableEvent(\"data-received\",!0));const r=super.on(e,t),o=this;return{remove(){r.remove(),\"data-received\"===e&&(o._proxy.closed||o.hasEventListener(\"data-received\")||o._proxy.enableEvent(\"data-received\",!1))}}}queryLatestObservations(e,t){if(!(this.layer.timeInfo.endField||this.layer.timeInfo.startField))throw new s(\"streamlayer-no-timeField\",\"queryLatestObservation can only be used with services that define a TrackIdField\");return this._proxy.queryLatestObservations(this._cleanUpQuery(e),t).then((e=>{const t=n.fromJSON(e);return t.features.forEach((e=>{e.layer=this.layer,e.sourceLayer=this.layer})),t}))}_createClientOptions(){return{...super._createClientOptions(),setProperty:e=>{this.set(e.propertyName,e.value)}}}_createTileRendererHash(e){const t=`${JSON.stringify(this.layer.purgeOptions)}.${JSON.stringify(p(this.layer.definitionExpression,this.layer.geometryDefinition))})`;return super._createTileRendererHash(e)+t}async _createServiceOptions(){const e=this.layer,{objectIdField:t}=e,r=e.fields.map((e=>e.toJSON())),o=a(e.geometryType),i=e.timeInfo&&e.timeInfo.toJSON()||null,s=e.spatialReference?e.spatialReference.toJSON():null;return{type:\"stream\",fields:r,geometryType:o,objectIdField:t,timeInfo:i,source:this.layer.parsedUrl,serviceFilter:p(this.layer.definitionExpression,this.layer.geometryDefinition),purgeOptions:this.layer.purgeOptions.toJSON(),enableDataReceived:this._enabledDataReceived,spatialReference:s,maxReconnectionAttempts:this.layer.maxReconnectionAttempts,maxReconnectionInterval:this.layer.maxReconnectionInterval,updateInterval:this.layer.updateInterval}}};e([o()],l.prototype,\"errorString\",void 0),e([o({readOnly:!0})],l.prototype,\"connectionError\",null),e([o()],l.prototype,\"connectionStatus\",void 0),l=e([i(\"esri.views.2d.layers.StreamLayerView2D\")],l);var d=l;export default d;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../chunks/tslib.es6.js\";import\"../../core/has.js\";import t from\"../../core/Logger.js\";import\"../../core/accessorSupport/ensureType.js\";import{property as r}from\"../../core/accessorSupport/decorators/property.js\";import{subclass as s}from\"../../core/accessorSupport/decorators/subclass.js\";import\"../../core/urlUtils.js\";import\"../../core/uuid.js\";import\"../../portal/support/resourceExtension.js\";import i from\"../../core/Accessor.js\";import o from\"../../core/Evented.js\";import{IdentifiableMixin as l}from\"../../core/Identifiable.js\";import{EsriPromiseMixin as n}from\"../../core/Promise.js\";import{HandleOwnerMixin as a}from\"../../core/HandleOwner.js\";let p=class extends(a(l(n(o.EventedMixin(i))))){constructor(e){super(e),this.layer=null,this.parent=null}initialize(){this.when().catch((e=>{if(\"layerview:create-error\"!==e.name){const r=this.layer&&this.layer.id||\"no id\",s=this.layer&&this.layer.title||\"no title\";throw t.getLogger(this.declaredClass).error(\"#resolve()\",`Failed to resolve layer view (layer title: '${s}', id: '${r}')`,e),e}}))}get fullOpacity(){const e=e=>null==e?1:e;return e(this.get(\"layer.opacity\"))*e(this.get(\"parent.fullOpacity\"))}get suspended(){return!this.canResume()}get suspendInfo(){return this.getSuspendInfo()}get legendEnabled(){return!this.suspended&&!0===this.layer.legendEnabled}get updating(){return!!(this.updatingHandles&&this.updatingHandles.updating||this.isUpdating())}get visible(){return!0===this.get(\"layer.visible\")}set visible(e){void 0!==e?this._override(\"visible\",e):this._clearOverride(\"visible\")}canResume(){return!this.get(\"parent.suspended\")&&this.get(\"view.ready\")&&this.get(\"layer.loaded\")&&this.visible||!1}getSuspendInfo(){const e=this.parent&&this.parent.suspended?this.parent.suspendInfo:{},t=this;return t.view&&t.view.ready||(e.viewNotReady=!0),this.layer&&this.layer.loaded||(e.layerNotLoaded=!0),this.visible||(e.layerInvisible=!0),e}isUpdating(){return!1}};e([r()],p.prototype,\"fullOpacity\",null),e([r()],p.prototype,\"layer\",void 0),e([r()],p.prototype,\"parent\",void 0),e([r({readOnly:!0})],p.prototype,\"suspended\",null),e([r({readOnly:!0})],p.prototype,\"suspendInfo\",null),e([r({readOnly:!0})],p.prototype,\"legendEnabled\",null),e([r({type:Boolean,readOnly:!0})],p.prototype,\"updating\",null),e([r()],p.prototype,\"visible\",null),p=e([s(\"esri.views.layers.LayerView\")],p);var d=p;export default d;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{_ as t}from\"../../../chunks/tslib.es6.js\";import\"../../../core/has.js\";import\"../../../core/Logger.js\";import\"../../../core/accessorSupport/ensureType.js\";import{property as r}from\"../../../core/accessorSupport/decorators/property.js\";import{subclass as o}from\"../../../core/accessorSupport/decorators/subclass.js\";import\"../../../core/urlUtils.js\";import\"../../../core/uuid.js\";import\"../../../portal/support/resourceExtension.js\";import e from\"./ClipArea.js\";var s;let i=s=class extends e{constructor(){super(...arguments),this.type=\"rect\",this.left=null,this.right=null,this.top=null,this.bottom=null}clone(){return new s({left:this.left,right:this.right,top:this.top,bottom:this.bottom})}get version(){return(this._get(\"version\")||0)+1}};t([r({type:[Number,String],json:{write:!0}})],i.prototype,\"left\",void 0),t([r({type:[Number,String],json:{write:!0}})],i.prototype,\"right\",void 0),t([r({type:[Number,String],json:{write:!0}})],i.prototype,\"top\",void 0),t([r({type:[Number,String],json:{write:!0}})],i.prototype,\"bottom\",void 0),t([r({readOnly:!0})],i.prototype,\"version\",null),i=s=t([o(\"esri.views.layers.support.ClipRect\")],i);var p=i;export default p;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{_ as r}from\"../../../chunks/tslib.es6.js\";import\"../../../core/has.js\";import\"../../../core/Logger.js\";import\"../../../core/accessorSupport/ensureType.js\";import\"../../../core/accessorSupport/decorators/property.js\";import{subclass as o}from\"../../../core/accessorSupport/decorators/subclass.js\";import\"../../../core/urlUtils.js\";import\"../../../core/uuid.js\";import\"../../../portal/support/resourceExtension.js\";import{JSONSupport as s}from\"../../../core/JSONSupport.js\";let e=class extends s{};e=r([o(\"esri.views.layers.support.ClipArea\")],e);var p=e;export default p;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{_ as r}from\"../../../chunks/tslib.es6.js\";import\"../../../core/has.js\";import\"../../../core/Logger.js\";import\"../../../core/accessorSupport/ensureType.js\";import{property as o}from\"../../../core/accessorSupport/decorators/property.js\";import{subclass as e}from\"../../../core/accessorSupport/decorators/subclass.js\";import\"../../../core/urlUtils.js\";import\"../../../core/uuid.js\";import\"../../../portal/support/resourceExtension.js\";import t from\"../../../geometry/Geometry.js\";import s from\"../../../geometry/Extent.js\";import p from\"../../../geometry/Polygon.js\";import{fromJSON as m}from\"../../../geometry/support/jsonUtils.js\";import\"../../../geometry.js\";import i from\"./ClipArea.js\";var y;const c={base:t,key:\"type\",typeMap:{extent:s,polygon:p}};let n=y=class extends i{constructor(){super(...arguments),this.type=\"geometry\",this.geometry=null}get version(){return(this._get(\"version\")||0)+1}clone(){return new y({geometry:this.geometry.clone()})}};r([o({types:c,json:{read:m,write:!0}})],n.prototype,\"geometry\",void 0),r([o({readOnly:!0})],n.prototype,\"version\",null),n=y=r([e(\"esri.views.layers.support.Geometry\")],n);var l=n;export default l;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{_ as r}from\"../../../chunks/tslib.es6.js\";import\"../../../core/has.js\";import\"../../../core/Logger.js\";import\"../../../core/accessorSupport/ensureType.js\";import{property as o}from\"../../../core/accessorSupport/decorators/property.js\";import{subclass as s}from\"../../../core/accessorSupport/decorators/subclass.js\";import\"../../../core/urlUtils.js\";import\"../../../core/uuid.js\";import\"../../../portal/support/resourceExtension.js\";import t from\"./ClipArea.js\";let e=class extends t{constructor(){super(...arguments),this.type=\"path\",this.path=[]}get version(){return(this._get(\"version\")||0)+1}};r([o({type:[[[Number]]],json:{write:!0}})],e.prototype,\"path\",void 0),r([o({readOnly:!0})],e.prototype,\"version\",null),e=r([s(\"esri.views.layers.support.Path\")],e);var p=e;export default p;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{_ as t}from\"../../../chunks/tslib.es6.js\";import\"../../../core/has.js\";import\"../../../core/Logger.js\";import\"../../../core/accessorSupport/ensureType.js\";import{property as e}from\"../../../core/accessorSupport/decorators/property.js\";import{subclass as s}from\"../../../core/accessorSupport/decorators/subclass.js\";import\"../../../core/urlUtils.js\";import\"../../../core/uuid.js\";import\"../../../portal/support/resourceExtension.js\";import i from\"../../../core/Collection.js\";import{referenceSetter as r}from\"../../../core/collectionUtils.js\";import{init as o}from\"../../../core/watchUtils.js\";import a from\"../../layers/support/ClipArea.js\";import p from\"../../layers/support/ClipRect.js\";import{Container as h}from\"../engine/Container.js\";import n from\"../../layers/support/Geometry.js\";import d from\"../../layers/support/Path.js\";const c=i.ofType({key:\"type\",base:a,typeMap:{rect:p,path:d,geometry:n}}),l=i=>{let a=class extends i{constructor(){super(...arguments),this.clips=new c,this.moving=!1,this.attached=!1,this.lastUpdateId=-1,this.updateRequested=!1}initialize(){var t;this.container||(this.container=new h),this.container.fadeTransitionEnabled=!0,this.container.opacity=0,this.container.clips=this.clips,this.handles.add([o(this,\"suspended\",(t=>{this.container&&(this.container.visible=!t),this.view&&!t&&this.updateRequested&&this.view.requestUpdate()}),!0),o(this,[\"layer.opacity\",\"container\"],(()=>{var t,e;this.container&&(this.container.opacity=null!=(t=null==(e=this.layer)?void 0:e.opacity)?t:1)}),!0),o(this,[\"layer.blendMode\"],(t=>{this.container&&(this.container.blendMode=t)}),!0),o(this,[\"layer.effect\"],(t=>{this.container&&(this.container.effect=t)}),!0),this.clips.on(\"change\",(()=>{this.container.clips=this.clips,this.notifyChange(\"clips\")}))]),null!=(t=this.view)&&t.whenLayerView?this.view.whenLayerView(this.layer).then((t=>{t!==this||this.attached||this.destroyed||(this.attach(),this.requestUpdate(),this.attached=!0)}),(()=>{})):this.when().then((()=>{this.attached||this.destroyed||(this.attach(),this.requestUpdate(),this.attached=!0)}),(()=>{}))}destroy(){this.attached&&(this.detach(),this.attached=!1),this.handles.remove(\"initialize\"),this.updateRequested=!1}get updating(){return!this.attached||!this.suspended&&(this.updateRequested||this.isUpdating())}isVisibleAtScale(t){let e=!0;const s=this.layer,i=s.minScale,r=s.maxScale;if(null!=i&&null!=r){let s=!i,o=!r;!s&&t<=i&&(s=!0),!o&&t>=r&&(o=!0),e=s&&o}return e}requestUpdate(){this.destroyed||this.updateRequested||(this.updateRequested=!0,this.suspended||this.view.requestUpdate())}processUpdate(t){!this.isFulfilled()||this.isResolved()?(this._set(\"updateParameters\",t),this.updateRequested&&!this.suspended&&(this.updateRequested=!1,this.update(t))):this.updateRequested=!1}isUpdating(){return!1}isRendering(){return!1}canResume(){return!!super.canResume()&&this.isVisibleAtScale(this.view.scale)}};return t([e({type:c,set(t){const e=r(t,this._get(\"clips\"),c);this._set(\"clips\",e)}})],a.prototype,\"clips\",void 0),t([e()],a.prototype,\"moving\",void 0),t([e()],a.prototype,\"attached\",void 0),t([e()],a.prototype,\"container\",void 0),t([e()],a.prototype,\"suspended\",void 0),t([e({readOnly:!0})],a.prototype,\"updateParameters\",void 0),t([e()],a.prototype,\"updateRequested\",void 0),t([e()],a.prototype,\"updating\",null),t([e()],a.prototype,\"view\",void 0),a=t([s(\"esri.views.2d.layers.LayerView2D\")],a),a};export{l as LayerView2DMixin};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport e from\"../../../../core/Logger.js\";import s from\"../../../../core/Error.js\";import{WGLVVFlag as i}from\"./enums.js\";import{isNumber as r}from\"./Utils.js\";const l=e.getLogger(\"esri.views.2d.engine.webgl\");function o(e){return r(e.minDataValue)&&r(e.maxDataValue)&&null!=e.minSize&&null!=e.maxSize?i.SIZE_MINMAX_VALUE:(e.expression&&\"view.scale\"===e.expression||e.valueExpression&&\"$view.scale\"===e.valueExpression)&&Array.isArray(e.stops)?i.SIZE_SCALE_STOPS:(null!=e.field||e.expression&&\"view.scale\"!==e.expression||e.valueExpression&&\"$view.scale\"!==e.valueExpression)&&(Array.isArray(e.stops)||\"levels\"in e&&e.levels)?i.SIZE_FIELD_STOPS:(null!=e.field||e.expression&&\"view.scale\"!==e.expression||e.valueExpression&&\"$view.scale\"!==e.valueExpression)&&null!=e.valueUnit?i.SIZE_UNIT_VALUE:(l.error(new s(\"mapview-bad-type\",\"Found invalid size VisualVariable\",e)),i.NONE)}export{o as getTypeOfSizeVisualVariable};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nfunction t(t,e){return e?\"xoffset\"in e&&e.xoffset?Math.max(t,Math.abs(e.xoffset)):\"yoffset\"in e&&e.yoffset?Math.max(t,Math.abs(e.yoffset||0)):t:t}function e(t){let e=0,n=0;for(let r=0;r<t.length;r++){const s=t[r].size;\"number\"==typeof s&&(e+=s,n++)}return e/n}function n(t,n){return\"number\"==typeof t?t:t&&t.stops&&t.stops.length?e(t.stops):n}function r(t,e){if(!e)return t;const r=e.filter((t=>\"size\"===t.type)).map((e=>{const{maxSize:r,minSize:s}=e;return(n(r,t)+n(s,t))/2}));let s=0;const o=r.length;if(0===o)return t;for(let n=0;n<o;n++)s+=r[n];const f=Math.floor(s/o);return Math.max(f,t)}function s(e){const n=e&&e.renderer,s=\"touch\"===(e&&e.event&&e.event.pointerType)?9:6;if(!n)return s;const o=\"visualVariables\"in n?r(s,n.visualVariables):s;if(\"simple\"===n.type)return t(o,n.symbol);if(\"unique-value\"===n.type){let e=o;return n.uniqueValueInfos.forEach((n=>{e=t(e,n.symbol)})),e}if(\"class-breaks\"===n.type){let e=o;return n.classBreakInfos.forEach((n=>{e=t(e,n.symbol)})),e}return n.type,o}export{s as calculateTolerance};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{isSome as e,isNone as t}from\"../../core/maybe.js\";import r from\"../../geometry/Extent.js\";import\"../../geometry.js\";import{getMetersPerUnitForSR as n}from\"../../core/unitUtils.js\";import{calculateTolerance as i}from\"../../renderers/support/clickToleranceUtils.js\";function a(t,i,a,o=new r){let s;if(\"2d\"===a.type)s=i*a.resolution;else if(\"3d\"===a.type){const r=a.overlayPixelSizeInMapUnits(t),o=a.basemapSpatialReference;s=e(o)&&!o.equals(a.spatialReference)?n(o)/n(a.spatialReference):i*r}const m=t.x-s,p=t.y-s,c=t.x+s,l=t.y+s,{spatialReference:f}=a;return o.xmin=Math.min(m,c),o.ymin=Math.min(p,l),o.xmax=Math.max(m,c),o.ymax=Math.max(p,l),o.spatialReference=f,o}function o(e,r,n){const o=n.toMap(e);if(t(o))return!1;return a(o,i(),n,s).intersects(r)}const s=new r;export{a as createQueryGeometry,o as intersectsDrapedGeometry};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{isSome as e}from\"../../../core/maybe.js\";import{getFeatureEditFields as p,fixFields as l,hasField as t}from\"../../../layers/support/fieldUtils.js\";async function i(i,d=i.popupTemplate){if(!e(d))return[];const o=await d.getRequiredFields(i.fields),{lastEditInfoEnabled:s}=d,{objectIdField:u,typeIdField:a,globalIdField:n,relationships:f}=i;if(o.includes(\"*\"))return[\"*\"];const r=s?await p(i):[],m=l(i.fields,[...o,...r]);return a&&m.push(a),m&&u&&t(i.fields,u)&&-1===m.indexOf(u)&&m.push(u),m&&n&&t(i.fields,n)&&-1===m.indexOf(n)&&m.push(n),f&&f.forEach((e=>{const{keyField:p}=e;m&&p&&t(i.fields,p)&&-1===m.indexOf(p)&&m.push(p)})),m}function d(p,l){return p.popupTemplate?p.popupTemplate:e(l)&&l.defaultPopupTemplateEnabled&&e(p.defaultPopupTemplate)?p.defaultPopupTemplate:null}export{d as getFetchPopupTemplate,i as getRequiredFields};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"./chunks/tslib.es6.js\";import\"./core/has.js\";import\"./core/Logger.js\";import\"./core/accessorSupport/ensureType.js\";import{property as r}from\"./core/accessorSupport/decorators/property.js\";import{subclass as o}from\"./core/accessorSupport/decorators/subclass.js\";import\"./core/urlUtils.js\";import\"./core/uuid.js\";import\"./portal/support/resourceExtension.js\";import t from\"./Graphic.js\";var p;let s=p=class extends t{constructor(){super(...arguments),this.isAggregate=!0}getEffectivePopupTemplate(e=!1){if(this.popupTemplate)return this.popupTemplate;const r=this.sourceLayer&&this.sourceLayer.featureReduction;return r&&\"popupTemplate\"in r&&r.popupEnabled?r.popupTemplate:null}getObjectId(){return this.objectId}clone(){return new p({objectId:this.objectId,...this.cloneProperties()})}};e([r({type:Boolean})],s.prototype,\"isAggregate\",void 0),e([r({type:Number,json:{read:!0}})],s.prototype,\"objectId\",void 0),s=p=e([o(\"esri.AggregateGraphic\")],s);var c=s;export default c;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../chunks/tslib.es6.js\";import\"../../../core/has.js\";import{clone as t}from\"../../../core/lang.js\";import\"../../../core/Logger.js\";import\"../../../core/accessorSupport/ensureType.js\";import{property as r}from\"../../../core/accessorSupport/decorators/property.js\";import{JSONMap as i}from\"../../../core/jsonMap.js\";import{subclass as s}from\"../../../core/accessorSupport/decorators/subclass.js\";import{writer as o}from\"../../../core/accessorSupport/decorators/writer.js\";import\"../../../core/urlUtils.js\";import\"../../../core/uuid.js\";import\"../../../portal/support/resourceExtension.js\";import{JSONSupport as n}from\"../../../core/JSONSupport.js\";import{fromJSON as a}from\"../../../geometry/support/jsonUtils.js\";import{geometryTypes as p}from\"../../../geometry.js\";import l from\"../../../TimeExtent.js\";import c from\"../../../tasks/support/Query.js\";var d;const m=new i({esriSpatialRelIntersects:\"intersects\",esriSpatialRelContains:\"contains\",esriSpatialRelCrosses:\"crosses\",esriSpatialRelDisjoint:\"disjoint\",esriSpatialRelEnvelopeIntersects:\"envelope-intersects\",esriSpatialRelIndexIntersects:\"index-intersects\",esriSpatialRelOverlaps:\"overlaps\",esriSpatialRelTouches:\"touches\",esriSpatialRelWithin:\"within\",esriSpatialRelRelation:\"relation\"}),u=new i({esriSRUnit_Meter:\"meters\",esriSRUnit_Kilometer:\"kilometers\",esriSRUnit_Foot:\"feet\",esriSRUnit_StatuteMile:\"miles\",esriSRUnit_NauticalMile:\"nautical-miles\",esriSRUnit_USNauticalMile:\"us-nautical-miles\"});let h=d=class extends n{constructor(e){super(e),this.where=null,this.geometry=null,this.spatialRelationship=\"intersects\",this.hiddenIds=new Set,this.distance=void 0,this.objectIds=null,this.units=null,this.timeExtent=null,this.enabled=!1}writeWhere(e,t){t.where=e||\"1=1\"}enable(){this._set(\"enabled\",!0)}createQuery(e={}){const{where:r,geometry:i,spatialRelationship:s,timeExtent:o,objectIds:n,units:a,distance:p}=this;return new c({geometry:t(i),objectIds:t(n),spatialRelationship:s,timeExtent:t(o),where:r,units:a,distance:p,...e})}clone(){const{where:e,geometry:r,spatialRelationship:i,hiddenIds:s,timeExtent:o,objectIds:n,units:a,distance:p}=this,l=new Set;return s.forEach((e=>l.add(e))),new d({geometry:t(r),hiddenIds:l,objectIds:t(n),spatialRelationship:i,timeExtent:t(o),where:e,units:a,distance:p})}};e([r({type:String})],h.prototype,\"where\",void 0),e([o(\"where\")],h.prototype,\"writeWhere\",null),e([r({types:p,json:{read:a,write:!0}})],h.prototype,\"geometry\",void 0),e([r({type:String,json:{read:{source:\"spatialRel\",reader:m.read},write:{target:\"spatialRel\",writer:m.write}}})],h.prototype,\"spatialRelationship\",void 0),e([r({json:{write:(e,t,r)=>t[r]=Array.from(e),read:e=>new Set(e)}})],h.prototype,\"hiddenIds\",void 0),e([r({type:Number,json:{write:{overridePolicy:e=>({enabled:e>0})}}})],h.prototype,\"distance\",void 0),e([r({type:[Number],json:{write:!0}})],h.prototype,\"objectIds\",void 0),e([r({type:String,json:{read:u.read,write:{writer:u.write,overridePolicy(e){return{enabled:e&&this.distance>0}}}}})],h.prototype,\"units\",void 0),e([r({type:l,json:{write:!0}})],h.prototype,\"timeExtent\",void 0),e([r({readOnly:!0})],h.prototype,\"enabled\",void 0),h=d=e([s(\"esri.views.layers.support.FeatureFilter\")],h);var j=h;export default j;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../chunks/tslib.es6.js\";import\"../../../core/has.js\";import\"../../../core/Logger.js\";import\"../../../core/accessorSupport/ensureType.js\";import{property as r}from\"../../../core/accessorSupport/decorators/property.js\";import{subclass as t}from\"../../../core/accessorSupport/decorators/subclass.js\";import\"../../../core/urlUtils.js\";import\"../../../core/uuid.js\";import\"../../../portal/support/resourceExtension.js\";import{JSONSupport as o}from\"../../../core/JSONSupport.js\";import s from\"./FeatureFilter.js\";var i;let c=i=class extends o{constructor(){super(...arguments),this.filter=null,this.includedEffect=null,this.excludedEffect=null,this.excludedLabelsVisible=!1}clone(){return new i({filter:this.filter&&this.filter.clone(),includedEffect:this.includedEffect,excludedEffect:this.excludedEffect,excludedLabelsVisible:this.excludedLabelsVisible})}};e([r({type:s,json:{write:!0}})],c.prototype,\"filter\",void 0),e([r({json:{write:!0}})],c.prototype,\"includedEffect\",void 0),e([r({json:{write:!0}})],c.prototype,\"excludedEffect\",void 0),e([r({type:Boolean,json:{write:!0}})],c.prototype,\"excludedLabelsVisible\",void 0),c=i=e([t(\"esri.views.layers.support.FeatureEffect\")],c);var l=c;export default l;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../chunks/tslib.es6.js\";import\"../../core/has.js\";import{isSome as t}from\"../../core/maybe.js\";import r from\"../../core/Logger.js\";import\"../../core/accessorSupport/ensureType.js\";import{property as i}from\"../../core/accessorSupport/decorators/property.js\";import{subclass as s}from\"../../core/accessorSupport/decorators/subclass.js\";import o from\"../../core/Error.js\";import\"../../core/urlUtils.js\";import\"../../core/uuid.js\";import\"../../portal/support/resourceExtension.js\";import{eachAlways as l}from\"../../core/promiseUtils.js\";import{loadArcade as a}from\"../../support/arcadeOnDemand.js\";import{fixFields as n,unpackFieldNames as u,collectLabelingFields as p,collectElevationFields as m,collectFilterFields as d,collectFeatureReductionFields as f,collectFields as c,collectField as y,featureHasFields as h}from\"../../layers/support/fieldUtils.js\";import{init as F,on as w}from\"../../core/watchUtils.js\";import{combinedViewLayerTimeExtentProperty as g}from\"../../layers/support/commonProperties.js\";import x from\"../../tasks/support/Query.js\";import v from\"./support/FeatureFilter.js\";import E from\"./support/FeatureEffect.js\";import{getFetchPopupTemplate as j,getRequiredFields as b}from\"./support/popupUtils.js\";const q=r.getLogger(\"esri.views.layers.FeatureLayerView\"),R=r=>{let R=class extends r{constructor(...e){super(...e),this._updatingRequiredFieldsPromise=null,this.effect=null,this.filter=null,this.timeExtent=null,this.layer=null,this.requiredFields=[],this.view=null}initialize(){F(this,[\"layer.renderer\",\"layer.labelingInfo\",\"layer.elevationInfo.featureExpressionInfo\",\"layer.displayField\",\"filter\",\"effect\",\"layer.timeInfo\",\"layer.floorInfo\",\"timeExtent\"],(()=>this._handleRequiredFieldsChange()),!0),w(this,\"view.floors\",\"change\",(()=>this._handleRequiredFieldsChange()))}get availableFields(){const{layer:e,layer:{fields:t},requiredFields:r}=this;return\"outFields\"in e&&e.outFields?n(t,[...u(t,e.outFields),...r]):n(t,r)}get maximumNumberOfFeatures(){return 0}set maximumNumberOfFeatures(e){q.error(\"#maximumNumberOfFeatures=\",\"Setting maximum number of features is not supported\")}get maximumNumberOfFeaturesExceeded(){return!1}highlight(e){throw new Error(\"missing implementation\")}createQuery(){const e={outFields:[\"*\"],returnGeometry:!0,outSpatialReference:this.view.spatialReference},r=t(this.filter)?this.filter.createQuery(e):new x(e);return t(this.timeExtent)&&(r.timeExtent=t(r.timeExtent)?r.timeExtent.intersection(this.timeExtent):this.timeExtent.clone()),r}queryFeatures(e,t){throw new Error(\"missing implementation\")}queryObjectIds(e,t){throw new Error(\"missing implementation\")}queryFeatureCount(e,t){throw new Error(\"missing implementation\")}queryExtent(e,t){throw new Error(\"missing implementation\")}_loadArcadeModules(e){if(e.get(\"expressionInfos.length\"))return a()}_handleRequiredFieldsChange(){const e=this._updateRequiredFields();this._set(\"_updatingRequiredFieldsPromise\",e),e.then((()=>{this._updatingRequiredFieldsPromise===e&&this._set(\"_updatingRequiredFieldsPromise\",null)}))}async _updateRequiredFields(){if(!this.layer||!this.view)return;const e=\"3d\"===this.view.type,{layer:r,layer:{fields:i,objectIdField:s,renderer:o,displayField:a}}=this,n=r.featureReduction,u=new Set,h=await l([o?o.collectRequiredFields(u,i):null,p(u,r),e?m(u,r):null,t(this.filter)?d(u,r,this.filter):null,this.effect?d(u,r,this.effect.filter):null,n?f(u,r,n):null]);r.timeInfo&&this.timeExtent&&c(u,r.fields,[r.timeInfo.startField,r.timeInfo.endField]),\"feature\"===r.type&&r.floorInfo&&c(u,r.fields,[r.floorInfo.floorField]);for(const t of h)t.error&&q.error(t.error);y(u,i,s),e&&a&&y(u,i,a);const F=Array.from(u).sort();this._set(\"requiredFields\",F)}validateFetchPopupFeatures(e){const{layer:t,layer:{popupEnabled:r}}=this;if(!r)return new o(\"featurelayerview:fetchPopupFeatures\",\"Popups are disabled\",{layer:t});return j(this.layer,e)?void 0:new o(\"featurelayerview:fetchPopupFeatures\",\"Layer does not define a popup template\",{layer:t})}async fetchClientPopupFeatures(e){const r=t(e)?e.clientGraphics:null;if(!r||0===r.length)return Promise.resolve([]);const i=[],s=[],{layer:o}=this,l=j(o,e);if(!t(l))return Promise.resolve([]);const a=await this._loadArcadeModules(l),n=a&&a.arcadeUtils.hasGeometryOperations(l),p=await this.createPopupQuery(e),m=u(o.fields,p.outFields);for(const t of r)n||!h(m,t)?s.push(t):i.push(t);return\"stream\"===o.type||0===s.length?Promise.resolve(i):(p.objectIds=s.map((e=>e.attributes[o.objectIdField])),o.queryFeatures(p).then((e=>i.concat(e.features))).catch((()=>s)))}async createPopupQuery(e){const r=this.layer,i=r.createQuery(),s=j(r,e),o=t(s)&&await this._loadArcadeModules(s),l=t(s)&&o&&o.arcadeUtils.hasGeometryOperations(s),a=!(\"point\"!==r.geometryType&&!l);return i.returnGeometry=a,i.returnZ=a,i.returnM=a,i.outFields=await b(this.layer,s),i.outSpatialReference=this.view.spatialReference,i}canResume(){return!!super.canResume()&&(!t(this.timeExtent)||!this.timeExtent.isEmpty)}};return e([i()],R.prototype,\"_updatingRequiredFieldsPromise\",void 0),e([i({readOnly:!0})],R.prototype,\"availableFields\",null),e([i({type:E})],R.prototype,\"effect\",void 0),e([i({type:v})],R.prototype,\"filter\",void 0),e([i(g)],R.prototype,\"timeExtent\",void 0),e([i()],R.prototype,\"layer\",void 0),e([i({type:Number})],R.prototype,\"maximumNumberOfFeatures\",null),e([i({readOnly:!0,type:Boolean})],R.prototype,\"maximumNumberOfFeaturesExceeded\",null),e([i({readOnly:!0})],R.prototype,\"requiredFields\",void 0),e([i()],R.prototype,\"suspended\",void 0),e([i()],R.prototype,\"view\",void 0),R=e([s(\"esri.views.layers.FeatureLayerView\")],R),R};export default R;export{R as FeatureLayerView};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nasync function e(e,a){if(!e)return null;switch(e.type){case\"class-breaks\":case\"simple\":case\"unique-value\":case\"dot-density\":case\"dictionary\":return new((await import(\"./tileRenderers/SymbolTileRenderer.js\")).default)(a);case\"heatmap\":return new((await import(\"./tileRenderers/HeatmapTileRenderer.js\")).default)(a)}}export{e as createOrReuseTileRenderer};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../../chunks/tslib.es6.js\";import\"../../../../core/has.js\";import\"../../../../core/Logger.js\";import\"../../../../core/accessorSupport/ensureType.js\";import{property as t}from\"../../../../core/accessorSupport/decorators/property.js\";import{subclass as r}from\"../../../../core/accessorSupport/decorators/subclass.js\";import\"../../../../core/urlUtils.js\";import\"../../../../core/uuid.js\";import\"../../../../portal/support/resourceExtension.js\";import{createResolver as s,createAbortController as o,ignoreAbortErrors as i,throwIfNotAbortError as n}from\"../../../../core/promiseUtils.js\";import{EsriPromise as a}from\"../../../../core/Promise.js\";import{open as c}from\"../../../../core/workers/workers.js\";function l(e){return Array.isArray(e)}let u=class extends a{constructor(e){super(e),this._startupResolver=s(),this.isReady=!1}initialize(){this._controller=o(),this.addResolvingPromise(this._startWorker(this._controller.signal))}destroy(){this._controller.abort(),this._connection&&this._connection.close()}set tileRenderer(e){this.client.tileRenderer=e}get closed(){return this._connection.closed}async startup(e,t,r,s){await this.when();const o=this._controller.signal,i=l(r.source)?{transferList:r.source,signal:o}:void 0,n={service:r,config:t,tileInfo:e.tileInfo.toJSON(),tiles:s};await this._connection.invoke(\"startup\",n,i),this._startupResolver.resolve(),this._set(\"isReady\",!0)}async updateTiles(e){return await this._startupResolver.promise,i(this._connection.invoke(\"updateTiles\",e))}async update(e){const t={config:e};return await this._startupResolver.promise,this._connection.invoke(\"update\",t)}async applyUpdate(e){return await this._startupResolver.promise,this._connection.invoke(\"applyUpdate\",e)}async setHighlight(e){return await this._startupResolver.promise,i(this._connection.invoke(\"controller.setHighlight\",e))}async refresh(){return await this._startupResolver.promise,i(this._connection.invoke(\"controller.refresh\"))}async queryFeatures(e,t){return await this._startupResolver.promise,this._connection.invoke(\"controller.queryFeatures\",e.toJSON(),t)}async queryObjectIds(e,t){return await this._startupResolver.promise,this._connection.invoke(\"controller.queryObjectIds\",e.toJSON(),t)}async queryFeatureCount(e,t){return await this._startupResolver.promise,this._connection.invoke(\"controller.queryFeatureCount\",e.toJSON(),t)}async queryExtent(e,t){return this._connection.invoke(\"controller.queryExtent\",e.toJSON(),t)}async queryLatestObservations(e,t){return await this._startupResolver.promise,this._connection.invoke(\"controller.queryLatestObservations\",e.toJSON(),t)}async queryStatistics(e){return await this._startupResolver.promise,this._connection.invoke(\"controller.queryStatistics\",e)}async getObjectId(e){return await this._startupResolver.promise,this._connection.invoke(\"controller.getObjectId\",e)}async getDisplayId(e){return await this._startupResolver.promise,this._connection.invoke(\"controller.getDisplayId\",e)}async getFeature(e){return await this._startupResolver.promise,this._connection.invoke(\"controller.getFeature\",e)}async getAggregate(e){return await this._startupResolver.promise,this._connection.invoke(\"controller.getAggregate\",e)}async getAggregateValueRanges(){return await this._startupResolver.promise,this._connection.invoke(\"controller.getAggregateValueRanges\")}async mapValidDisplayIds(e){return await this._startupResolver.promise,this._connection.invoke(\"controller.mapValidDisplayIds\",e)}async onEdits(e){await this._startupResolver.promise;const{addedFeatures:t,deletedFeatures:r,updatedFeatures:s}=e;return i(this._connection.invoke(\"controller.onEdits\",{addedFeatures:t,deletedFeatures:r,updatedFeatures:s}))}async enableEvent(e,t){return await this._startupResolver.promise,i(this._connection.invoke(\"controller.enableEvent\",{name:e,value:t}))}async _startWorker(e){try{this._connection=await c(\"Pipeline\",{client:this.client,strategy:\"dedicated\",signal:e})}catch(t){n(t)}}};e([t()],u.prototype,\"isReady\",void 0),e([t()],u.prototype,\"client\",void 0),e([t()],u.prototype,\"tileRenderer\",null),u=e([r(\"esri.views.2d.layers.support.FeatureLayerProxy\")],u);var p=u;export default p;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{isSome as e}from\"../../../core/maybe.js\";import i from\"./TileKey.js\";import t from\"./TileCoverage.js\";const l=1e-6;class s{constructor(e){this._tiles=new Map,this.buffer=0,this.acquireTile=e.acquireTile,this.releaseTile=e.releaseTile,this.tileInfoView=e.tileInfoView,this.buffer=e.buffer}destroy(){}clear(){this._tiles.forEach((e=>this._releaseTile(e)))}tileKeys(){const e=[];return this._tiles.forEach(((i,t)=>e.push(t))),e}update(e){const l=this.tileInfoView.getTileCoverage(e.state,this.buffer,\"closest\"),{spans:s,lodInfo:r}=l,{level:a}=r,o=[],d=[],h=new Set,n=new Set;for(const{row:t,colFrom:c,colTo:f}of s)for(let e=c;e<=f;e++){const l=i.getId(a,t,r.normalizeCol(e),r.getWorldForColumn(e)),s=this._getOrAcquireTile(o,l);h.add(l),s.isReady?s.visible=!0:n.add(s.key)}n.forEach((e=>this._addPlaceholders(h,e))),this._tiles.forEach((e=>{h.has(e.key.id)||(d.push(e.key.id),this._releaseTile(e))})),t.pool.release(l);return{hasMissingTiles:n.size>0,added:o,removed:d}}_getOrAcquireTile(e,t){if(!this._tiles.has(t)){const l=this.acquireTile(new i(t));e.push(t),this._tiles.set(t,l),l.visible=!1}return this._tiles.get(t)}_getTile(e){return this._tiles.get(e)}_releaseTile(e){this._tiles.delete(e.key.id),this.releaseTile(e)}_addPlaceholders(e,i){const t=this._addPlaceholderChildren(e,i);if(!(Math.abs(1-t)<l)){if(!this._addPlaceholderParent(e,i)){this._getTile(i.id).visible=!0}}}_addPlaceholderChildren(e,i){let t=0;return this._tiles.forEach((l=>{t+=this._addPlaceholderChild(e,l,i)})),t}_addPlaceholderChild(e,i,t){if(i.key.level<=t.level||!i.hasData||!t.contains(i.key))return 0;i.visible=!0,e.add(i.key.id);return 1/(1<<2*(i.key.level-t.level))}_addPlaceholderParent(i,t){let l=t.getParentKey(),s=0,r=null;for(;e(l);){if(i.has(l.id))return!0;const e=this._getTile(l.id);if(null!=e&&e.isReady)return e.visible=!0,i.add(e.key.id),!0;null!=e&&e.hasData&&e.patchCount>s&&(s=e.patchCount,r=e),l=l.getParentKey()}return!!r&&(r.visible=!0,i.add(r.key.id),!0)}}export{s as TileManager};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../chunks/tslib.es6.js\";import t from\"../../../core/has.js\";import{clone as i}from\"../../../core/lang.js\";import{andThen as r,unwrapOr as s,isSome as a,isNone as n}from\"../../../core/maybe.js\";import o from\"../../../core/Logger.js\";import\"../../../core/accessorSupport/ensureType.js\";import{property as l}from\"../../../core/accessorSupport/decorators/property.js\";import{subclass as h}from\"../../../core/accessorSupport/decorators/subclass.js\";import u from\"../../../core/Error.js\";import\"../../../core/urlUtils.js\";import\"../../../core/uuid.js\";import\"../../../portal/support/resourceExtension.js\";import{flatten as d}from\"../../../core/arrayUtils.js\";import{debounce as p,isAbortError as c,eachAlwaysValues as f,after as y}from\"../../../core/promiseUtils.js\";import g from\"../../../geometry/Extent.js\";import\"../../../geometry.js\";import m from\"../../../core/Collection.js\";import _ from\"../../../Graphic.js\";import v from\"../../../AggregateGraphic.js\";import{init as R,whenFalseOnce as b}from\"../../../core/watchUtils.js\";import{isHostedAgolService as x}from\"../../../layers/support/arcgisLayerUrl.js\";import w from\"../../../tasks/support/FeatureSet.js\";import S from\"../../../tasks/support/Query.js\";import{MAX_FILTERS as F}from\"../engine/webgl/definitions.js\";import U from\"../../webgl/capabilities.js\";import{RefreshableLayerView as I}from\"../../layers/RefreshableLayerView.js\";import E from\"../../layers/LayerView.js\";import{calculateTolerance as C}from\"../../../renderers/support/clickToleranceUtils.js\";import{createQueryGeometry as j}from\"../../support/drapedUtils.js\";import{findSizeVV as O,createClusterCountSizeVariable as T,isClusterCompatibleRenderer as P,createClusterRenderer as q}from\"./support/clusterUtils.js\";import V from\"../../layers/effects/EffectList.js\";import{computePxBuffer as L}from\"./features/support/pixelBuffering.js\";import{toJSONGeometryType as N}from\"./support/util.js\";import{createSchema as H}from\"./features/schemaUtils.js\";import G from\"../../layers/support/FeatureFilter.js\";import J from\"../../layers/support/FeatureEffect.js\";import{FeatureLayerView as k}from\"../../layers/FeatureLayerView.js\";import{LayerView2DMixin as M}from\"./LayerView2D.js\";import{createOrReuseTileRenderer as A}from\"./features/tileRenderers.js\";import z from\"./support/FeatureLayerProxy.js\";import{TileManager as D}from\"../tiling/TileManager.js\";const $=2147483648,Q=1,B=e=>(e&$)>>>31===Q;function K(e){return e&&\"openPorts\"in e}const W=o.getLogger(\"esri.views.2d.layers.FeatureLayerView2D\");let X=class extends(k(I(M(E)))){constructor(){super(...arguments),this._pipelineIsUpdating=!0,this._updatingPipelineConfig=!1,this._onGoingEdits=0,this._isRefreshing=!1,this._visibilityOverrides=new Set,this._effect=null,this._highlightIds=new Map,this._lastPixelBuffer=0,this.filter=null,this.effectLists={included:new V,excluded:new V},this.doRefresh=p((async()=>{this.isUpdating()&&await b(this,\"updating\"),this._set(\"_isRefreshing\",!0),this._lockGPUUploads();try{await this._proxy.refresh()}catch(e){c(e),0}this._unlockGPUUploads(),this._set(\"_isRefreshing\",!1)})),this._doUpdate=p((async()=>{try{if(this.destroyed||!this._hasRequiredSupport(this.layer))return;this._set(\"_updatingPipelineConfig\",!0),await b(this,\"_isRefreshing\");const{effect:t,filter:i}=this;await this._updateRequiredFields();const{renderer:r}=this._getEffectiveRenderer();this._set(\"_effectiveRenderer\",r);const s=\"feature\"===this.layer.type?this.layer.historicMoment:null,n=\"feature\"===this.layer.type?this.layer.gdbVersion:null,o={renderer:this.layer.renderer,spatialReference:this.layer.spatialReference,timeExtent:this.layer.timeExtent,definitionExpression:this.layer.definitionExpression,featureReduction:this.layer.featureReduction,fields:this.layer.fields,geometryType:this.layer.geometryType,historicMoment:s,labelsVisible:this.layer.labelsVisible,labelingInfo:this.layer.labelingInfo,availableFields:this.availableFields,effect:this.effect,filter:this.filter,gdbVersion:n,pixelBuffer:0},l=N(this.layer.geometryType),h=await L(r,l,this.layer.featureReduction),u=this._createConfiguration(o,i,t);this._lastPixelBuffer=0===h?0:Math.max(h,this._lastPixelBuffer),u.schema.source.pixelBuffer=this._lastPixelBuffer;const d=this._createTileRendererHash(r);if(d!==this._tileRendererHash){await this._initTileRenderer(r);const e=this._serviceOptions;this.effects.forEach((e=>a(e)&&a(e.filter)&&e.filter.enable())),this.tileRenderer.onConfigUpdate(r);const t={added:this._tileStrategy.tileKeys(),removed:[]},i=this.layer;\"stream\"!==i.type&&K(i.source)&&(e.source=await i.source.openPorts()),await this._proxy.startup(this.view.featuresTilingScheme,u,e,t),this.hasHighlight()&&await this._proxy.setHighlight(Array.from(this._highlightIds.keys())),await this._onceTilesUpdated(),this.tileRenderer.onConfigUpdate(r)}else{const t=await this._proxy.update(u);(t.mesh||t.targets.aggregate)&&this._lockGPUUploads();try{await this._proxy.applyUpdate(t)}catch(e){c(e)||W.error(e)}(t.mesh||t.targets.aggregate)&&this._unlockGPUUploads(),this.effects.forEach((e=>a(e)&&a(e.filter)&&e.filter.enable())),this.tileRenderer.onConfigUpdate(r),this._forceAttributeTextureUpload()}this._tileRendererHash=d,this.tileRenderer.invalidateLabels(),this.requestUpdate()}catch(e){}})),this._updateHighlight=p((async()=>this._proxy.setHighlight(Array.from(this._highlightIds.keys()))))}destroy(){var e,t;null==(e=this._proxy)||e.destroy(),r(this._updateClusterSizeTask,(e=>e.remove())),null==(t=this.tileRenderer)||t.destroy()}initialize(){this.addResolvingPromise(Promise.all([this._initProxy(),this._initServiceOptions()])),this.handles.add([this.on(\"valueRangesChanged\",(e=>{this._set(\"_aggregateValueRanges\",e.valueRanges)})),R(this,\"effect\",(e=>{this.effectLists.included.effect=null==e?void 0:e.includedEffect})),R(this,\"effect\",(e=>{this.effectLists.excluded.effect=null==e?void 0:e.excludedEffect}))])}async _initProxy(){if(\"stream\"!==this.layer.type&&\"ogc-feature\"!==this.layer.type&&this.layer.isTable)throw new u(\"featurelayerview:table-not-supported\",\"table feature layer can't be displayed\",{layer:this.layer});this._proxy&&this._proxy.destroy();const e=this._createClientOptions();return this._set(\"_proxy\",new z({client:e})),this._proxy.when()}async _initServiceOptions(){this._set(\"_serviceOptions\",await this._createServiceOptions())}get labelsVisible(){return!this.suspended&&this.layer.labelingInfo&&this.layer.labelsVisible}get effect(){return s(this._effect,null)}set effect(e){const t=this._effect;a(t)&&a(t.filter)&&t.filter.enabled&&a(e)&&a(e.filter)&&e.filter.enable(),this._effect=e,this.notifyChange(\"effect\")}get effects(){return this.effect&&[this.effect]||[]}get queryMode(){return this._serviceOptions.type}get renderingConfigHash(){if(!this.layer)return null;const e=this.availableFields,t=this.layer,i=this.view.floors,{definitionExpression:r,renderer:s,labelingInfo:n}=t,o=\"feature\"===t.type?t.gdbVersion:void 0,l=\"feature\"===t.type&&t.historicMoment?t.historicMoment.getTime():void 0,{timeExtent:h}=this,u=\"stream\"===t.type?`${JSON.stringify(t.geometryDefinition)}${t.definitionExpression}`:null,d=JSON.stringify(this.clips),p=t.featureReduction&&t.featureReduction.toJSON();return JSON.stringify({filterHash:a(this.filter)&&this.filter.toJSON(),effectHash:a(this.effect)&&this.effect.toJSON(),streamFilter:u,gdbVersion:o,definitionExpression:r,historicMoment:l,availableFields:e,renderer:s,labelingInfo:t.labelsVisible&&n,timeExtent:h,floors:i,clipsHash:d,featureReduction:p})}get hasEffects(){return this.effectLists.included.hasEffects||this.effectLists.excluded.hasEffects}highlight(e){let t;return e instanceof _?t=[e.getObjectId()]:\"number\"==typeof e||\"string\"==typeof e?t=[e]:m.isCollection(e)?t=e.map((e=>e&&e.getAttribute(this.layer.objectIdField))).toArray():Array.isArray(e)&&e.length>0&&(t=\"number\"==typeof e[0]||\"string\"==typeof e[0]?e:e.map((e=>e&&e.getAttribute(this.layer.objectIdField)))),t&&t.length?(t=t.filter((e=>null!=e)),this._addHighlight(t),{remove:()=>this._removeHighlight(t)}):{remove:()=>{}}}hasHighlight(){return!!this._highlightIds.size}hitTest(e,t){return this._hitTest(e,t)}queryStatistics(){return this._proxy.queryStatistics()}queryFeatures(e,t){return this.queryFeaturesJSON(e,t).then((e=>{const t=w.fromJSON(e);return t.features.forEach((e=>{e.layer=this.layer,e.sourceLayer=this.layer})),t}))}queryFeaturesJSON(e,t){return this._proxy.queryFeatures(this._cleanUpQuery(e),t)}queryObjectIds(e,t){return this._proxy.queryObjectIds(this._cleanUpQuery(e),t)}queryFeatureCount(e,t){return this._proxy.queryFeatureCount(this._cleanUpQuery(e),t)}queryExtent(e,t){return this._proxy.queryExtent(this._cleanUpQuery(e),t).then((e=>({count:e.count,extent:g.fromJSON(e.extent)})))}setVisibility(e,t){t?this._visibilityOverrides.delete(e):this._visibilityOverrides.add(e),this._update()}update(e){if(!this._tileStrategy||!this.tileRenderer)return;const{hasMissingTiles:t,added:i,removed:r}=this._tileStrategy.update(e);(i.length||r.length)&&this._proxy.updateTiles({added:i,removed:r}),t&&this.requestUpdate(),this.notifyChange(\"updating\")}attach(){this.view.timeline.record(`${this.layer.title} (FeatureLayer) Attach`),this._tileStrategy=new D({acquireTile:e=>this._acquireTile(e),releaseTile:e=>this._releaseTile(e),tileInfoView:this.view.featuresTilingScheme,buffer:0}),this.handles.add(R(this,\"renderingConfigHash\",(()=>this._update())),\"attach\"),\"stream\"!==this.layer.type&&this.handles.add(this.layer.on(\"edits\",(async e=>{this._set(\"_onGoingEdits\",this._onGoingEdits+1);try{const t=\"globalIdField\"in this.layer&&this.layer.globalIdField,i=e.deletedFeatures.some((e=>-1===e.objectId||!e.objectId)),r=t&&this.availableFields.includes(t);if(i&&!r)return void W.error(new u(\"mapview-apply-edits\",`Editing the specified service requires the layer's globalIdField, ${t} to be included the layer's outFields for updates to be reflected on the map`));await this._proxy.onEdits(e)}catch(t){c(t),0}this._set(\"_onGoingEdits\",Math.max(0,this._onGoingEdits-1))})),\"attach\")}detach(){this.container.removeAllChildren(),this.handles.remove(\"attach\"),this._updatingPipelineConfig=!1,this.tileRenderer&&(this.tileRenderer.uninstall(this.container),this.tileRenderer=null),this._tileStrategy&&(this._tileStrategy.destroy(),this._tileStrategy=null),this._tileRendererHash=null}moveStart(){this.requestUpdate()}viewChange(){this.requestUpdate()}moveEnd(){this.requestUpdate()}async fetchPopupFeatures(e,t){if(a(t)&&t.clientGraphics.length){const e=t.clientGraphics[0];if(e instanceof v)return[e]}const i=this.validateFetchPopupFeatures(t);if(i)throw i;if(a(t)&&0===t.clientGraphics.length)return[];const r=this.fetchClientPopupFeatures(t);if(!e)return r;const s=this._fetchServicePopupFeatures(e,t);return f([r,s]).then(d)}async _fetchServicePopupFeatures(e,t){if(\"stream\"===this.layer.type||\"ogc-feature\"===this.layer.type)return[];const i=await this.createPopupQuery(t),{layer:r}=this,{renderer:s}=r,n=a(t)?t.event:null,o=C({renderer:s,event:n});i.geometry=this.createFetchPopupFeaturesQueryGeometry(e,o);const l=new Set,{objectIdField:h}=r,u=a(t)?t.clientGraphics:null;if(u)for(const a of u)l.add(a.attributes[h]);return r.queryFeatures(i).then((e=>e.features.filter((e=>!l.has(e.attributes[h])))))}createFetchPopupFeaturesQueryGeometry(e,t){return j(e,t,this.view)}isUpdating(){return null!=this.layer.renderer&&(null!=this._updatingRequiredFieldsPromise||null==this.tileRenderer||!this._proxy||!this._proxy.isReady||this._pipelineIsUpdating||this._updatingPipelineConfig||this.tileRenderer.updating||this._onGoingEdits>0)}_createClientOptions(){return{setUpdating:e=>{this._set(\"_pipelineIsUpdating\",e)},emitEvent:e=>{this.emit(e.name,e.event)}}}async _detectQueryMode(e){if(\"path\"in e&&x(e.path)&&\"feature\"===this.layer.type&&\"point\"===this.layer.geometryType&&!this.layer.capabilities.operations.supportsEditing&&t(\"featurelayer-snapshot-enabled\"))try{const e=await this.layer.queryFeatureCount();if(e<=t(\"featurelayer-snapshot-point-min-threshold\"))return{mode:\"snapshot\",featureCount:e};const i=t(\"featurelayer-snapshot-point-max-threshold\"),r=t(\"featurelayer-snapshot-point-coverage\"),s=this.view.extent,a=this.layer.fullExtent,n=null==a?void 0:a.clone().intersection(s),o=(null==n?void 0:n.width)*(null==n?void 0:n.height),l=(null==a?void 0:a.width)*(null==a?void 0:a.height),h=0===l?0:o/l;if(e<=i&&h>=r)return{mode:\"snapshot\",featureCount:e}}catch(i){W.warn(\"mapview-feature-layer\",\"Encountered an error when querying for featureCount\",{error:i})}return{mode:\"on-demand\"}}async _createServiceOptions(){const e=this.layer;if(\"stream\"===e.type)return null;const{capabilities:t,objectIdField:r}=e,s=e.fields.map((e=>e.toJSON())),a=e.fullExtent&&e.fullExtent.toJSON(),n=N(e.geometryType),o=e.timeInfo&&e.timeInfo.toJSON()||null,l=e.spatialReference?e.spatialReference.toJSON():null,h=\"feature\"===e.type?e.customParameters:null,u=\"feature\"===e.type?e.globalIdField:null;let d;\"ogc-feature\"===e.type?d=e.source.getFeatureDefinition():K(e.source)?d=await e.source.openPorts():e.parsedUrl&&(d=i(e.parsedUrl),\"dynamicDataSource\"in e&&e.dynamicDataSource&&(d.query={layer:JSON.stringify({source:e.dynamicDataSource})}));const{mode:p,featureCount:c}=await this._detectQueryMode(d);return{type:p,featureCount:c,globalIdField:u,maxRecordCount:t.query.maxRecordCount,tileMaxRecordCount:t.query.tileMaxRecordCount,capabilities:t,fields:s,fullExtent:a,geometryType:n,objectIdField:r,source:d,timeInfo:o,spatialReference:l,customParameters:h}}async _createMemoryServiceOptions(e){const t=await e.openPorts();return{...this._createServiceOptions(),type:\"memory\",source:t}}_cleanUpQuery(e){const t=S.from(e)||this.createQuery();return t.outSpatialReference||(t.outSpatialReference=this.view.spatialReference),t}_createUpdateClusterSizeTask(e,t){return this.watch(\"_aggregateValueRanges\",(async i=>{this._updateClusterEffectiveRendererSizeVariable(e,t,i),this._updatingPipelineConfig||this.tileRenderer.onConfigUpdate(this._effectiveRenderer)}))}async _updateClusterEffectiveRendererSizeVariable(e,t,i){if(e.dynamicClusterSize&&\"visualVariables\"in e&&e.visualVariables){const r=O(e.visualVariables);if(a(r)&&\"cluster_count\"===r.field){const s=e.visualVariables.indexOf(r);e.visualVariables[s]=T(t,i);const a=e.clone();a.dynamicClusterSize=!0,this._set(\"_effectiveRenderer\",a)}}}_getEffectiveRenderer(){const e=this.layer.renderer,t=this.layer.featureReduction;if(a(this._updateClusterSizeTask)&&(this._updateClusterSizeTask.remove(),this._updateClusterSizeTask=null),t&&\"cluster\"===t.type&&P(e)){const i=t,s=[],a=q(s,e,i,this._aggregateValueRanges);return r(this._updateClusterSizeTask,(e=>e.remove())),this._updateClusterSizeTask=this._createUpdateClusterSizeTask(a,i),{renderer:a,aggregateFields:s,featureReduction:t}}return{renderer:e,aggregateFields:[],featureReduction:null}}_acquireTile(e){const t=this.tileRenderer.acquireTile(e);return t.once(\"attach\",(()=>{this.requestUpdate()})),t}_releaseTile(e){this.tileRenderer.releaseTile(e)}async _initTileRenderer(e){const t=await A(e,{layerView:this,tileInfoView:this.view.featuresTilingScheme,layer:this.layer});return this.tileRenderer&&(this._tileStrategy.clear(),this.tileRenderer.uninstall(this.container),this.tileRenderer.destroy(),this.tileRenderer=null),this.destroyed?null:(this._proxy.tileRenderer=t,this._set(\"tileRenderer\",t),this.tileRenderer.install(this.container),this.tileRenderer.onConfigUpdate(e),this.requestUpdate(),this.tileRenderer)}_createTileRendererHash(e){return`${\"heatmap\"===e.type?\"heatmap\":\"symbol\"}.${\"dot-density\"===e.type}`}_createFeatureDataHash(e,t,i){const r=e.getAttributeHash(),s=JSON.stringify(t),n=a(i)&&JSON.stringify(i.filter),o=JSON.stringify(this.timeExtent);let l=\"\";return this._visibilityOverrides.forEach((e=>l+=e)),`${r}.${s}.${n}.${o}.${l}`}get hasFilter(){const e=!!(\"floorInfo\"in this.layer&&this.layer.floorInfo&&this.view.floors&&this.view.floors.length);return!!this.filter||e||!!this._visibilityOverrides.size||!!this.timeExtent}_injectOverrides(e){const t=a(e)?e.timeExtent:null,i=a(this.timeExtent)&&a(t)?this.timeExtent.intersection(t):this.timeExtent||t;let r=null;const s=\"floorInfo\"in this.layer&&this.layer.floorInfo;if(s){const t=a(e)&&e.where;r=this._addFloorFilterClause(t)}if(!this._visibilityOverrides.size&&!i&&!s)return e;const n=a(e)&&e.clone()||new G;return n.hiddenIds=this._visibilityOverrides,n.timeExtent=i,r&&(n.where=r),n}_addFloorFilterClause(e){const t=this.layer;let i=e||\"\";if(\"floorInfo\"in t&&t.floorInfo){var r;let e=this.view.floors;if(!e||!e.length)return i;null!=(r=t.floorInfo.viewAllLevelIds)&&r.length&&(e=t.floorInfo.viewAllLevelIds);const s=e.filter((e=>\"\"!==e)).map((e=>\"'\"+e+\"'\"));s.push(\"''\");const n=t.floorInfo.floorField;let o=\"(\"+n+\" IN ({ids}) OR \"+n+\" IS NULL)\";if(o=o.replace(\"{ids}\",s.join(\", \")),a(i)&&i.includes(n)){let e=new RegExp(\"AND \\\\(\"+n+\".*NULL\\\\)\",\"g\");i=i.replace(e,\"\"),e=new RegExp(\"\\\\(\"+n+\".*NULL\\\\)\",\"g\"),i=i.replace(e,\"\"),i=i.replace(/\\s+/g,\" \").trim()}i=\"\"!==i?\"(\"+i+\") AND \"+o:o}return\"\"!==i?i:null}_createConfiguration(e,t,i){const r=\"feature\"===this.layer.type&&this.layer.historicMoment?this.layer.historicMoment.getTime():void 0,s=\"feature\"===this.layer.type?this.layer.gdbVersion:void 0,o=new Array(F),l=this._injectOverrides(t);o[0]=a(l)?l.toJSON():null,o[1]=a(i)&&i.filter?i.filter.toJSON():null;const h=H(e);if(n(h))return null;const u=U();return{definitionExpression:this.layer.definitionExpression,availableFields:this.availableFields,gdbVersion:s,historicMoment:r,devicePixelRatio:window.devicePixelRatio||1,filters:o,schema:h,supportsTextureFloat:u.supportsTextureFloat,maxTextureSize:u.maxTextureSize}}_hasRequiredSupport(e){var t;return!(\"dot-density\"===(null==(t=e.renderer)?void 0:t.type)&&!U().supportsTextureFloat)||(W.error(new u(\"webgl-missing-extension\",\"Missing WebGL extension OES_Texture_Float which is required for DotDensity\")),!1)}_onceTilesUpdated(){return this.requestUpdate(),b(this,\"_pipelineIsUpdating\",!1)}_lockGPUUploads(){this.tileRenderer&&this.tileRenderer.lockGPUUploads()}_unlockGPUUploads(){this.tileRenderer&&this.tileRenderer.unlockGPUUploads()}_forceAttributeTextureUpload(){this.tileRenderer&&this.tileRenderer.forceAttributeTextureUpload()}_update(){this.view.timeline.begin(`${this.layer.title} (FeatureLayer) Initial Pipeline Config`);const e=this._doUpdate();this._updatingPromise=e;const t=()=>{e===this._updatingPromise&&this._set(\"_updatingPipelineConfig\",!1),this.view&&this.view.timeline.end(`${this.layer.title} (FeatureLayer) Initial Pipeline Config`)};e.then(t).catch((e=>{c(e)||W.error(e),t()}))}_addHighlight(e){for(const t of e)if(this._highlightIds.has(t)){const e=this._highlightIds.get(t);this._highlightIds.set(t,e+1)}else this._highlightIds.set(t,1);this._updateHighlight().catch((e=>{c(e)||W.error(e)}))}_removeHighlight(e){for(const t of e)if(this._highlightIds.has(t)){const e=this._highlightIds.get(t)-1;0===e?this._highlightIds.delete(t):this._highlightIds.set(t,e)}this._updateHighlight().catch((e=>{c(e)||W.error(e)}))}_createHittestResult(e){return e.layer=this.layer,e.sourceLayer=this.layer,a(e.geometry)&&(e.geometry.spatialReference=this.view.spatialReference),e}async _hitTest(e,t){if(this.suspended||!this.tileRenderer)return null;const i=await this.tileRenderer.hitTest(e,t);if(0===i.length)return await y(1),null;const s=i[0];if(!B(s)){const e=await this._proxy.getFeature(s);return r(e,(e=>this._createHittestResult(_.fromJSON(e))))}const o=await this._proxy.getAggregate(s);if(n(o))return null;if(a(o.referenceId)){const e=await this._proxy.getFeature(o.referenceId);return r(e,(e=>this._createHittestResult(_.fromJSON(e))))}return this._createHittestResult(v.fromJSON(o))}};e([l()],X.prototype,\"_serviceOptions\",void 0),e([l()],X.prototype,\"_proxy\",void 0),e([l()],X.prototype,\"_pipelineIsUpdating\",void 0),e([l()],X.prototype,\"_updatingPipelineConfig\",void 0),e([l()],X.prototype,\"_effectiveRenderer\",void 0),e([l()],X.prototype,\"_aggregateValueRanges\",void 0),e([l()],X.prototype,\"_onGoingEdits\",void 0),e([l()],X.prototype,\"_isRefreshing\",void 0),e([l()],X.prototype,\"labelsVisible\",null),e([l({type:G})],X.prototype,\"filter\",void 0),e([l({type:J})],X.prototype,\"effect\",null),e([l({readOnly:!0})],X.prototype,\"effects\",null),e([l({readOnly:!0})],X.prototype,\"queryMode\",null),e([l()],X.prototype,\"renderingConfigHash\",null),e([l()],X.prototype,\"tileRenderer\",void 0),e([l()],X.prototype,\"updating\",void 0),X=e([h(\"esri.views.2d.layers.FeatureLayerView2D\")],X);var Y=X;export default Y;\n"],"sourceRoot":""}