(this.webpackJsonpimaps=this.webpackJsonpimaps||[]).push([[147],{1181:function(e,t,i){"use strict";var s,a=i(76),n=i(99),r=i(292),l=i(176),o=i(109),c=i(74),d=i(75),h=i(105),b=i(137),u=i(106),p=i(78),y=i(77),g=i(149),m=i(119),v=(i(79),i(89)),_=i(147),O=i(160),j=i(180),f=i(319);let w=s=class extends j.a{constructor(e){super(e),this.displayValueEnabled=!1,this.max=1,this.min=0,this.step=.1,this.type="slider",this.value=null}clone(){return new s({active:this.active,className:this.className,disabled:this.disabled,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible,displayValueEnabled:this.displayValueEnabled,max:this.max,min:this.min,step:this.step,value:this.value})}};Object(a.a)([Object(p.b)()],w.prototype,"displayValueEnabled",void 0),Object(a.a)([Object(p.b)()],w.prototype,"max",void 0),Object(a.a)([Object(p.b)()],w.prototype,"min",void 0),Object(a.a)([Object(p.b)()],w.prototype,"step",void 0),Object(a.a)([Object(p.b)()],w.prototype,"value",void 0),w=s=Object(a.a)([Object(y.a)("esri.support.Action.ActionSlider")],w);var I=w,L=i(347),A=i(387),C=i(118);const S="esri-layer-list-panel",k="esri-layer-list-panel__content",E="esri-layer-list-panel__content--legend",x="esri-layer-list-panel__content--string",M="esri-layer-list-panel__content--html-element",N="esri-layer-list-panel__content--widget";let V=class extends(Object(O.a)(g.a)){constructor(e,t){super(e,t),this._legend=null,this._handles=new o.a,this.content=null,this.image=null,this.listItem=null,this.open=!1,this.visible=!0}initialize(){this.own([Object(h.a)(this,"content",(e=>this._createLegend(e)))])}destroy(){const{_legend:e}=this;e&&e.destroy(),this._legend=null}get className(){const{image:e}=this,t=this._getFirstWidget();return this._get("className")||!e&&t?t.iconClass:""}set className(e){void 0!==e?this._override("className",e):this._clearOverride("className")}get title(){const e=this._getFirstWidget();return this._get("title")||e?e.label:""}set title(e){void 0!==e?this._override("title",e):this._clearOverride("title")}render(){return Object(C.a)("div",{class:S},this._renderContents())}_renderContent(e){const{_legend:t,listItem:i}=this;return e?"legend"===e?i&&i.view&&i.layer&&t?Object(C.a)("div",{class:this.classes(k,E),key:t},t.render()):null:"string"==typeof e?Object(C.a)("div",{class:this.classes(k,x),key:e,innerHTML:e}):Object(A.b)(e)?Object(C.a)("div",{class:this.classes(k,N),key:e},e.render()):e instanceof HTMLElement?Object(C.a)("div",{class:this.classes(k,M),key:e,bind:e,afterCreate:this._attachToNode}):null:null}_renderContents(){const{content:e}=this;return Array.isArray(e)?e.map((e=>this._renderContent(e))):this._renderContent(e)}_getLegendOptions(e){if(!e)return;const{layer:t,view:i}=e;return t&&i?{view:i,layerInfos:[{layer:t,title:""}]}:void 0}_createLegend(e){this._hasLegend(e)&&!this._legend&&Promise.all([i.e(1),i.e(2),i.e(4),i.e(21),i.e(98)]).then(i.bind(null,1153)).then((({default:e})=>{const{_handles:t,listItem:i}=this,s=new e(this._getLegendOptions(i));this._legend=s,this.notifyChange("className"),this.notifyChange("title");const a=Object(h.a)(this,["listItem.view","listItem.layer"],(()=>this._updateLegend(s)));t.add(a,"legends"),this.scheduleRender()}))}_hasLegend(e){const t="legend";return e===t||!!Array.isArray(e)&&e.some((e=>e===t))}_attachToNode(e){e.appendChild(this)}_updateLegend(e){const{listItem:t}=this;if(!t)return;const{layer:i,view:s}=t;e.view=s,e.layerInfos=[{layer:i,title:null}],this.scheduleRender()}_getWidget(e){return"legend"===e?this._legend:Object(A.b)(e)?e:null}_getFirstWidget(){const{content:e}=this;if(Array.isArray(e)){let t=null;return e.some((e=>{const i=this._getWidget(e);return i&&(t=i),!!i})),t}return this._getWidget(e)}};Object(a.a)([Object(p.b)()],V.prototype,"className",null),Object(a.a)([Object(p.b)()],V.prototype,"content",void 0),Object(a.a)([Object(p.b)()],V.prototype,"image",void 0),Object(a.a)([Object(p.b)()],V.prototype,"listItem",void 0),Object(a.a)([Object(p.b)()],V.prototype,"title",null),Object(a.a)([Object(p.b)()],V.prototype,"open",void 0),Object(a.a)([Object(p.b)()],V.prototype,"visible",void 0),V=Object(a.a)([Object(y.a)("esri.widgets.LayerList.ListItemPanel")],V);var P=V;const T="hide",$="hide-children";function U(e){if(e)return null!=e.listMode?e.listMode:void 0}function R(e){if(e)return e.listMode===$||"wmts"===e.type?void 0:"group"===e.type?"layers":"sublayers"}function F(e,t){e&&e.sort(((e,i)=>{const s=t.indexOf(e.uid),a=t.indexOf(i.uid);return s>a?-1:s<a?1:0}))}function B(e){const t=null==e?void 0:e.layer;return t&&"group"===t.type?t.layers:null}function H(e,t){var i;const s=null==(i=e.layer)?void 0:i.uid;return s&&t.find((e=>{var t;return(null==(t=e.layer)?void 0:t.uid)===s}))}var z;const W=n.a.ofType({key:"type",defaultKeyValue:"button",base:j.a,typeMap:{button:f.a,toggle:L.a,slider:I}}),D=n.a.ofType(W),K="layer",J="child-list-mode";let q=z=class extends(Object(O.a)(Object(_.b)(v.a))){constructor(e){super(e),this.actionsSections=new D,this.actionsOpen=!1,this.children=new(n.a.ofType(z)),this.childrenSortable=!0,this.error=null,this.layer=null,this.layerView=null,this.open=!1,this.panel=null,this.parent=null,this.sortable=!0,this.view=null,this.visible=null}initialize(){this.handles.add([Object(h.a)(this,"layer",(e=>this._watchLayerProperties(e))),Object(h.a)(this,"view",(e=>this._updateChildren(e))),Object(h.a)(this,"panel",(e=>this._setListItemOnPanel(e))),Object(h.a)(this,["layer","view"],(()=>this._getLayerView()))])}destroy(){this.view=null}castPanel(e){return this.get("panel.open")&&!e.hasOwnProperty("open")&&(e.open=!0),e?new P(e):null}get title(){const e=this.get("layer.layer");return(!e||e&&this.get("layer.layer.loaded"))&&this.get("layer.title")||this.get("layer.attributes.title")||""}set title(e){void 0!==e?this._override("title",e):this._clearOverride("title")}get updating(){const e=this.layerView;return e?e.updating:this._isLayerUpdating(this.layer)}get visibleAtCurrentScale(){return!function(e,t){if(!e||isNaN(t))return!1;const i=function(e){if(e)return null!=e.minScale?e.minScale:void 0}(e),s=function(e){if(e)return null!=e.maxScale?e.maxScale:void 0}(e),a=!isNaN(i)&&i>0&&t>i,n=!isNaN(s)&&s>0&&t<s;return a||n}(this.layer,this.get("view.scale"))}get visibilityMode(){return function(e){if(!e)return"inherited";const t=e.get("layer.capabilities.exportMap.supportsSublayerVisibility");if("boolean"==typeof t)return t?"independent":"inherited";const i=e.get("capabilities.exportMap.supportsSublayerVisibility");return"boolean"==typeof i?i?"independent":"inherited":null!=e.visibilityMode?e.visibilityMode:"independent"}(this.layer)}clone(){return new z({actionsSections:this.actionsSections.clone(),actionsOpen:this.actionsOpen,children:this.children.clone(),layer:this.layer,open:this.open,panel:this.panel,title:this.title,view:this.view,visible:this.visible})}_setListItemOnPanel(e){e&&(e.listItem=this)}_updateChildren(e){const t=this.children;t&&t.forEach((t=>t.view=e))}_addChildren(e){if(this.handles.remove(J),this.children.removeAll(),!e)return;e.forEach((t=>{this.handles.add(Object(h.d)(t,"listMode",(()=>this._addChildren(e))),J)}));const t=e.filter((e=>"hide"!==U(e)));this.children.addMany(this._makeChildren(t))}_watchSublayerChanges(e){e&&this.handles.add(e.on("change",(()=>{this._addChildren(e)})),K)}_initializeChildLayers(e){this._addChildren(e),this._watchSublayerChanges(e)}_makeChildren(e){return e.map((e=>U(e)!==T?new z({layer:e,parent:this,view:this.view}):null)).reverse()}_watchLayerProperties(e){if(!this.handles)return;if(this.handles.remove(K),this.handles.remove(J),!e)return;if(this.handles.add(Object(h.d)(e,"listMode",(()=>this._watchLayerProperties(e))),K),"hide-children"===U(e))return void this.children.removeAll();const t=R(e);t&&this.handles.add(Object(h.a)(e,t,(()=>{e.hasOwnProperty(t)&&this._initializeChildLayers(e[t])})),K)}async _getLayerView(){const{layer:e,view:t}=this;if(e&&t)try{const i=await t.whenLayerView(e);if(i.layer!==this.layer)return;this._set("layerView",i)}catch{}}_isLayerUpdating(e){return e&&"loading"===e.loadStatus}};Object(a.a)([Object(p.b)({type:D})],q.prototype,"actionsSections",void 0),Object(a.a)([Object(p.b)()],q.prototype,"actionsOpen",void 0),Object(a.a)([Object(p.b)({type:n.a})],q.prototype,"children",void 0),Object(a.a)([Object(p.b)()],q.prototype,"childrenSortable",void 0),Object(a.a)([Object(b.a)("layer.loadError?")],q.prototype,"error",void 0),Object(a.a)([Object(p.b)()],q.prototype,"layer",void 0),Object(a.a)([Object(p.b)({readOnly:!0})],q.prototype,"layerView",void 0),Object(a.a)([Object(p.b)()],q.prototype,"open",void 0),Object(a.a)([Object(p.b)({type:P})],q.prototype,"panel",void 0),Object(a.a)([Object(u.a)("panel")],q.prototype,"castPanel",null),Object(a.a)([Object(p.b)()],q.prototype,"parent",void 0),Object(a.a)([Object(p.b)()],q.prototype,"sortable",void 0),Object(a.a)([Object(p.b)()],q.prototype,"title",null),Object(a.a)([Object(p.b)({readOnly:!0})],q.prototype,"updating",null),Object(a.a)([Object(p.b)({value:null})],q.prototype,"view",void 0),Object(a.a)([Object(b.a)("layer.visible")],q.prototype,"visible",void 0),Object(a.a)([Object(p.b)({readOnly:!0})],q.prototype,"visibleAtCurrentScale",null),Object(a.a)([Object(p.b)({readOnly:!0})],q.prototype,"visibilityMode",null),q=z=Object(a.a)([Object(y.a)("esri.widgets.LayerList.ListItem")],q);var G=q;const Q="view",X="view-layers",Y="map-layers",Z="layer-views",ee="layer-list-mode",te=n.a.ofType(G);let ie=class extends m.a.EventedAccessor{constructor(e){super(e),this._handles=new o.a,this.listItemCreatedFunction=null,this.operationalItems=new te,this.view=null}initialize(){this._handles.add(Object(h.a)(this,["view","view.ready"],(()=>this._viewHandles())),Q)}destroy(){this._handles.destroy(),this._handles=null,this.view=null,this.operationalItems.removeAll()}get state(){const e=this.get("view");return this.get("view.ready")?"ready":e?"loading":"disabled"}triggerAction(e,t){e&&!e.disabled&&this.emit("trigger-action",{action:e,item:t})}moveListItem(e,t,i,s){var a,n;const r=null==e?void 0:e.layer;if(!r)return;const l=null==(a=this.view)||null==(n=a.map)?void 0:n.layers,o=t?B(t):l,c=i?B(i):l;if(!o||!c)return;const{operationalItems:d}=this,h=(null==t?void 0:t.children)||d,b=(null==i?void 0:i.children)||d,u=c.length-s;e.parent=i||null,h.includes(e)&&h.remove(e),o.includes(r)&&o.remove(r),b.includes(e)||b.add(e,u),c.includes(r)||c.add(r,u)}_createLayerViewHandles(e){const{_handles:t}=this;t.remove(Z),this._compileList(),e&&t.add(e.on("change",(()=>this._compileList())),Z)}_createMapLayerHandles(e){const{_handles:t}=this;t.remove(Y),this._compileList(),e&&t.add(e.on("change",(()=>this._compileList())),Y)}_watchItemProperties(e){this._handles.add([e.children.on("change",(()=>{this._modifyListItemChildren(e.children)}))],`children-change-${e.uid}`)}_modifyListItemChildren(e){e.forEach((e=>this._modifyListItem(e)))}_modifyListItem(e){if("function"==typeof this.listItemCreatedFunction){const t={item:e};this.listItemCreatedFunction.call(null,t)}this._modifyListItemChildren(e.children)}_createListItem(e){const{view:t}=this,i=new G({layer:e,view:t});return this._watchItemProperties(i),i}_removeAllItems(){const{_handles:e,operationalItems:t}=this;t.forEach((t=>{e.remove(`children-change-${t.uid}`)})),t.removeAll()}_getViewableLayers(e){if(e)return e.filter((e=>"hide"!==U(e)))}_watchLayersListMode(e){const{_handles:t}=this;t.remove(ee),e&&e.forEach((e=>{t.add(Object(h.d)(e,"listMode",(()=>this._compileList())),ee)}))}_compileList(){const e=this.get("view.map.layers");this._watchLayersListMode(e);const t=this._getViewableLayers(e);t&&t.length?(this._createNewItems(t),this._modifyOrRemoveItems(t),this._sortItems(t)):this._removeAllItems()}_createNewItems(e){const{operationalItems:t}=this;e.forEach((e=>{t.find((t=>t.layer===e))||t.add(this._createListItem(e))}))}_modifyOrRemoveItems(e){const{_handles:t,operationalItems:i}=this,s=[];i.forEach((i=>{i&&e&&e.find((e=>i.layer===e))?this._modifyListItem(i):(t.remove(`children-change-${i.uid}`),s.push(i))})),i.removeMany(s)}_sortItems(e){const{operationalItems:t}=this;t.sort(((t,i)=>{const s=e.indexOf(t.layer),a=e.indexOf(i.layer);return s>a?-1:s<a?1:0}))}_viewHandles(){const{_handles:e,view:t}=this;e.remove([Y,Z,X]),this._compileList(),t&&t.ready&&e.add([Object(h.a)(this,"view.map.allLayers",(e=>this._createMapLayerHandles(e))),Object(h.a)(this,"view.allLayerViews",(e=>this._createLayerViewHandles(e))),Object(h.a)(this,"listItemCreatedFunction",(()=>this._compileList()))],X)}};Object(a.a)([Object(p.b)()],ie.prototype,"listItemCreatedFunction",void 0),Object(a.a)([Object(p.b)({type:te})],ie.prototype,"operationalItems",void 0),Object(a.a)([Object(p.b)({readOnly:!0})],ie.prototype,"state",null),Object(a.a)([Object(p.b)()],ie.prototype,"view",void 0),ie=Object(a.a)([Object(y.a)("esri.widgets.LayerList.LayerListViewModel")],ie);var se=ie,ae=i(265),ne=i(164),re=i(314),le=(i(102),i(1140));function oe(e,t,i){e.splice(i,0,e.splice(t,1)[0])}const ce=n.a.ofType(G),de="data-sort-filter",he="data-layer-uid",be="esri-layer-list esri-widget esri-widget--panel",ue="esri-layer-list--new-ui",pe="esri-layer-list__no-items",ye="esri-layer-list__list",ge="esri-layer-list__list--root",me="esri-layer-list__list--exclusive",ve="esri-layer-list__list--inherited",_e="esri-layer-list__list--independent",Oe="esri-layer-list__item",je="esri-layer-list__item--error",fe="esri-layer-list__item--invisible",we="esri-layer-list__item--invisible-at-scale",Ie="esri-layer-list__item--updating",Le="esri-layer-list__item--has-children",Ae="esri-layer-list__item--selectable",Ce="esri-layer-list__item-container",Se="esri-layer-list__item-actions-menu",ke="esri-layer-list__item-actions-menu-item",Ee="esri-layer-list__item-actions-menu-item--active",xe="esri-layer-list__item-actions",Me="esri-layer-list__item-actions-list",Ne="esri-layer-list__item-action",Ve="esri-layer-list__item-action-icon",Pe="esri-layer-list__item-action-image",Te="esri-layer-list__item-action-title",$e="esri-layer-list__action-toggle",Ue="esri-layer-list__action-toggle--on",Re="esri-layer-list__item-label",Fe="esri-layer-list__item-error-message",Be="esri-layer-list__item-title",He="esri-layer-list__item-toggle",ze="esri-layer-list__item-toggle-icon",We="esri-layer-list__item-toggle-icon",De="esri-layer-list__item-radio-icon",Ke="esri-layer-list__child-toggle",Je="esri-layer-list__child-toggle--open",qe="esri-layer-list__child-toggle-icon--opened",Ge="esri-layer-list__child-toggle-icon--closed",Qe="esri-layer-list__child-toggle-icon--closed-rtl",Xe="esri-layer-list--chosen",Ye="esri-disabled",Ze="esri-disabled-element",et="esri-hidden",tt="esri-rotating",it="esri-icon-handle-horizontal",st="esri-icon-visible",at="esri-icon-non-visible",nt="esri-icon-radio-checked",rt="esri-icon-radio-unchecked",lt="esri-icon-notice-triangle",ot="esri-icon-down-arrow",ct="esri-icon-right-triangle-arrow",dt="esri-icon-left-triangle-arrow",ht="esri-icon-loading-indicator",bt="esri-icon-default-action",ut="esri-icon-layers",pt="actions",yt="action-section",gt="items",mt={exclusive:"exclusive",inherited:"inherited",independent:"independent"};function vt(e){const{actionsOpen:t,children:i}=e;t&&(e.actionsOpen=!1),i.forEach((e=>vt(e)))}const _t="root",Ot=d.a.getLogger("esri.widgets.LayerList"),jt={statusIndicators:!0};let ft=class extends g.a{constructor(e,t){super(e,t),this._handles=new o.a,this._sortableNodes=new Map,this._sortableMap=new Map,this._focusSortUid=null,this._newUI=Object(c.a)("esri-layerlist-new-ui"),this.visibleItems=null,this.iconClass=ut,this.label=void 0,this.listItemCreatedFunction=null,this.localeStrings=null,this.messages=null,this.messagesCommon=null,this.multipleSelectionEnabled=!1,this.operationalItems=null,this.selectionEnabled=!1,this.selectedItems=new ce,this.view=null,this.viewModel=new se,this.visibleElements={...jt},this._onSortableSort=({to:e,from:t,item:i,newIndex:s})=>{t&&e&&(t===e?this._sortLayers(this._sortableMap.get(t.dataset.group)):this._moveLayerFromChildList({to:e,from:t,item:i,newIndex:s}))},this._sortableCanPut=(e,t,i)=>{var s,a;const n=e.el.dataset.group,r=t.el.dataset.group,l=e.el["data-item"],o=i["data-item"],c=null==o||null==(s=o.layer)?void 0:s.type,d=null==l||null==(a=l.layer)?void 0:a.type;return n&&r&&c&&!("group"===d&&"group"===c)},this._sortableCanPull=(e,t,i)=>{var s;const a=e.el.dataset.group,n=t.el.dataset.group,r=i["data-item"],l=null==r||null==(s=r.layer)?void 0:s.type;return a&&n&&!!l},this._onSortableEnd=({oldIndex:e,from:t,to:i,item:s})=>{t!==i&&t.insertBefore(s,t.children[e])}}initialize(){const e=this.operationalItems;this._setVisibleItems(e),this.own(Object(h.b)(this,"operationalItems","change",(()=>this._itemsChanged(e))),Object(h.a)(this,"selectionEnabled",(()=>this._toggleAllSorting())))}destroy(){this._destroySortables(),this._handles.destroy(),this._handles=null}set statusIndicatorsVisible(e){Object(r.d)(Ot,"statusIndicatorsVisible",{replacement:"visibleElements.statusIndicators",version:"4.15"}),this.visibleElements={...this.visibleElements,statusIndicators:e}}castVisibleElements(e){return{...jt,...e}}triggerAction(e,t){this.viewModel.triggerAction(e,t)}render(){var e;const{visibleItems:t,_newUI:i}=this,s=null==(e=this.viewModel)?void 0:e.state,a={[ue]:i,[et]:"loading"===s,[Ye]:"disabled"===s};return Object(C.a)("div",{class:this.classes(be,a)},null!=t&&t.length?this.renderItems():this.renderNoItems())}renderNoItems(){return Object(C.a)("div",{class:pe},this.messages.noItemsToDisplay)}renderItems(){const{visibleItems:e,selectionEnabled:t,messages:i}=this;return Object(C.a)("ul",{"aria-label":i.widgetLabel,role:t?"listbox":void 0,afterCreate:this._sortNodeCreated,afterUpdate:this._sortNodeCreated,afterRemoved:this._sortNodeRemoved,"data-group":_t,bind:this,class:this.classes(ye,ge,_e)},null==e?void 0:e.map((e=>this.renderItem(e,null))).toArray())}renderActionsMenuIcon(e,t){const{messages:i}=this,s={[Ee]:e.actionsOpen},a=e.actionsOpen?i.closeActions:i.openActions;return Object(C.a)("div",{key:"actions-menu-toggle","data-item":e,bind:this,onclick:this._toggleActionsOpen,onkeydown:this._toggleActionsOpen,class:this.classes(ke,s),tabindex:"0",role:"button","aria-controls":t,"aria-label":a,title:a},Object(C.a)("span",{"aria-hidden":"true",class:it}))}renderActionsMenu(e,t,i,s){const{panel:a}=e,n=a&&a.visible?this.renderPanelButton(a):null,r=1===i&&this._getSingleActionButton(t),l=r?this.renderAction({item:e,action:r,singleAction:!0}):null,o=!r&&i?this.renderActionsMenuIcon(e,s):null;return o||n||r?Object(C.a)("div",{key:"actions-menu",class:Se},n,l,o):null}renderChildList(e,t){var i;const{selectionEnabled:s}=this,{visibilityMode:a,children:n}=e,r=!!e.error,l=!!n.length&&!r,o=!l&&s&&"group"===(null==(i=e.layer)?void 0:i.type),{exclusive:c,inherited:d}=mt,h={[me]:a===c,[ve]:a===d,[_e]:a!==d&&a!==c};return l||o?Object(C.a)("ul",{bind:this,key:"list-items",id:t,"data-group":e.uid,"data-item":e,afterCreate:this._sortNodeCreated,afterUpdate:this._sortNodeCreated,afterRemoved:this._sortNodeRemoved,class:this.classes(ye,h),"aria-expanded":e.open?"true":"false",role:s?"listbox":a===c?"radiogroup":"group",hidden:!e.open&&!o||null},null==n?void 0:n.map((t=>this.renderItem(t,e))).toArray()):null}renderChildrenToggle(e,t){const{messagesCommon:i}=this,{children:s}=e,a=!!e.error,n=!!s.length&&!a,r={[Je]:e.open},l=e.open?i.collapse:i.expand;return n?Object(C.a)("span",{onclick:this._toggleChildrenClick,onkeydown:this._toggleChildrenClick,"data-item":e,key:"toggle-children",class:this.classes(Ke,r),tabindex:"0",role:"button","aria-controls":t,"aria-label":l,title:l},Object(C.a)("span",{"aria-hidden":"true",class:this.classes(Ge,ct)}),Object(C.a)("span",{"aria-hidden":"true",class:this.classes(qe,ot)}),Object(C.a)("span",{"aria-hidden":"true",class:this.classes(Qe,dt)})):null}renderError(e){return e.error?Object(C.a)("div",{key:"esri-layer-list__error",class:Fe,role:"alert"},Object(C.a)("span",null,this.messages.layerError)):null}renderItemContent(e,t,i){const{id:s}=this,a=`${s}_${e.uid}`,n=`${a}_actions`,r=`${a}__list`,{panel:l}=e,o=this._filterActions(e.actionsSections),c=this._countActions(o);return[Object(C.a)("div",{key:"list-item-container",class:Ce},this.renderChildrenToggle(e,r),this.renderLabel(e,t,i),this.renderActionsMenu(e,o,c,n)),this.renderError(e),c?this.renderActionsSections(e,o,n):null,l&&l.open?l.render():null,this.renderChildList(e,r)]}renderItem(e,t){const{_newUI:i,id:s,selectionEnabled:a,selectedItems:n,visibleElements:r}=this,{children:l}=e,o=`${s}_${e.uid}__title`,c=!!e.error,d=!!l.length&&!c,h={[Le]:d,[je]:!!c,[Ie]:e.updating&&!t&&r.statusIndicators,[fe]:i&&!e.visible,[we]:!e.visibleAtCurrentScale,[Ae]:a};if(a){var b;const i={[he]:null==(b=e.layer)?void 0:b.uid,[de]:(!e.sortable).toString()};return Object(C.a)("li",{key:`item-with-selection-${e.uid}`,bind:this,afterCreate:this._focusListItem,afterUpdate:this._focusListItem,class:this.classes(Oe,h),"aria-labelledby":o,onclick:this._toggleSelection,onkeydown:this._selectionKeydown,"data-item":e,"data-group":t?t.uid:_t,tabIndex:0,"aria-selected":H(e,n)?"true":"false",role:"option",...i},this.renderItemContent(e,t,o))}return Object(C.a)("li",{key:`item-no-selection-${e.uid}`,bind:this,afterCreate:this._focusListItem,afterUpdate:this._focusListItem,class:this.classes(Oe,h),"aria-labelledby":o},this.renderItemContent(e,t,o))}renderItemTitle(e,t){const{messages:i}=this,s=e.title||i.untitledLayer,a=e.visibleAtCurrentScale?s:`${s} (${i.layerInvisibleAtScale})`;return Object(C.a)("span",{key:"layer-title-container",id:t,title:a,"aria-label":a,class:Be},s)}renderItemToggleIcon(e,t){const{_newUI:i}=this,{exclusive:s}=mt,a=t&&t.visibilityMode,n={[ze]:i,[We]:i&&a!==s,[De]:i&&a===s,[nt]:a===s&&e.visible,[rt]:a===s&&!e.visible,[st]:a!==s&&e.visible,[at]:a!==s&&!e.visible};return Object(C.a)("span",{key:"item-toggle-icon",class:this.classes(n),"aria-hidden":"true"})}renderItemToggle(e,t,i){const{selectionEnabled:s}=this,{exclusive:a}=mt,n=t&&t.visibilityMode,r=n===a?"radio":"switch";return Object(C.a)("span",s?{key:"item-toggle-selection-enabled",class:He,bind:this,onclick:this._toggleVisibility,onkeydown:this._toggleVisibility,"data-item":e,"data-parent-visibility":n,tabIndex:0,"aria-checked":e.visible?"true":"false",role:r,"aria-labelledby":i}:{key:"item-toggle",class:He},this.renderItemToggleIcon(e,t))}renderItemError(e){return e.error?Object(C.a)("span",{key:"notice-triangle","aria-hidden":"true",class:lt}):null}renderLabel(e,t,i){const{selectionEnabled:s,_newUI:a}=this,{inherited:n,exclusive:r}=mt,l=null==t?void 0:t.visibilityMode,o=l===r?"radio":"switch",c=[this.renderItemToggle(e,t,i),this.renderItemTitle(e,i)];a&&c.reverse();const d=Object(C.a)("div",s?{key:`item-label-no-selection-${e.uid}`,class:Re}:{key:`item-label-with-selection-${e.uid}`,class:Re,bind:this,onclick:this._toggleVisibility,onkeydown:this._toggleVisibility,"data-item":e,"data-parent-visibility":l,tabIndex:0,"aria-checked":e.visible?"true":"false",role:o,"aria-labelledby":i},c);return l===n||e.error?Object(C.a)("div",{key:`item-label-container-${e.uid}`,class:Re},this.renderItemError(e),this.renderItemTitle(e,i)):d}renderPanelButton(e){const{className:t,open:i,title:s,image:a}=e,n=a||t?t:bt,r=this._getIconImageStyles(e),l={[Ee]:i},o={[Pe]:!!r["background-image"]};return n&&(o[n]=!!n),Object(C.a)("div",{key:`panel-${e.uid}`,bind:this,"data-panel":e,onclick:this._triggerPanel,onkeydown:this._triggerPanel,class:this.classes(ke,l),role:"button",tabindex:"0",title:s,"aria-label":s},Object(C.a)("span",{class:this.classes(o),styles:r}))}renderActionsSections(e,t,i){const s=t.toArray().map(((t,i)=>Object(C.a)("ul",{key:`${e}-action-section-${i}`,class:Me},this.renderActionSection(e,t))));return Object(C.a)("div",{role:"group","aria-expanded":e.actionsOpen?"true":"false",key:"actions-section",id:i,class:xe,hidden:!e.actionsOpen||null},s)}renderActionSection(e,t){return(t&&t.toArray()).map((t=>this.renderAction({item:e,action:t})))}renderActionIcon(e){const{active:t,className:i}=e,s=this._getIconImageStyles(e),a="button"!==e.type||e.image||i?i:bt,n={[Pe]:!t&&!!s["background-image"],[ht]:t,[tt]:t};return a&&!t&&(n[a]=!0),Object(C.a)("span",{key:"action-icon","aria-hidden":"true",class:this.classes(Ve,n),styles:s})}renderActionTitle(e,t){return t?null:Object(C.a)("span",{key:"action-title",class:Te},e)}renderAction(e){const{item:t,action:i,singleAction:s}=e,{active:a,disabled:n,title:r}=i,l={[ke]:s&&"button"===i.type,[Ne]:a||!s&&"toggle"!==i.type,[$e]:!a&&"toggle"===i.type,[Ue]:!a&&"toggle"===i.type&&i.value,[Ze]:n},o=[this.renderActionIcon(i),this.renderActionTitle(r,s)];return s?Object(C.a)("div",{bind:this,"data-item":t,"data-action":i,role:"button",key:`single-action-${i.uid}`,onclick:this._triggerAction,onkeydown:this._triggerAction,classes:l,tabindex:"0",title:r,"aria-label":r},o):Object(C.a)("li",{bind:this,"data-item":t,"data-action":i,key:`action-${i.uid}`,onclick:this._triggerAction,onkeydown:this._triggerAction,classes:l,tabindex:"0",role:"button",title:r,"aria-label":r},o)}_sortNodeRemoved(e){const{_sortableMap:t}=this,i=e.dataset.group,s=t.get(i);s&&s.destroy(),t.delete(i)}_destroySortables(){const{_sortableMap:e,_sortableNodes:t}=this;e.forEach((e=>e&&e.destroy())),e.clear(),t.clear()}_moveLayerFromChildList({to:e,from:t,item:i,newIndex:s}){const a=i["data-item"],n=e["data-item"],r=t["data-item"];this.viewModel.moveListItem(a,r,n,s)}_sortLayers(e){if(!e)return;const t=e.el["data-item"],i=e.toArray();var s,a;t?function(e,t){const i=null==e?void 0:e.layer;if(!i)return;const s=R(i);s&&F(i.get(s),t)}(t,i):F(null==(s=this.view)||null==(a=s.map)?void 0:a.layers,i)}_toggleSorting(e,t){const{_sortableMap:i,selectionEnabled:s}=this,a=i.get(t),n=e["data-item"],r=(t===_t||n.childrenSortable&&function(e){const t=e&&(e.get("layer.layer")||e.layer);if(!t)return!1;const i=t.get("capabilities.exportMap.supportsDynamicLayers");return"boolean"!=typeof i||i}(n))&&s;if(a)a.option("disabled",!r);else if(r){const s=le.a.create(e,{dataIdAttr:he,group:{name:t,pull:this._sortableCanPull,put:this._sortableCanPut},filter:`[${de}="true"]`,fallbackTolerance:4,onSort:this._onSortableSort,onEnd:this._onSortableEnd,disabled:!r,chosenClass:Xe});i.set(t,s)}}_toggleAllSorting(){this._sortableNodes.forEach(((e,t)=>this._toggleSorting(e,t)))}_sortNodeCreated(e){const t=e.dataset.group;t&&(this._sortableNodes.set(t,e),this._toggleSorting(e,t))}_setVisibleItems(e){this.visibleItems=null==e?void 0:e.filter((e=>this.errorsVisible||!e.error))}_getSingleActionButton(e){return e.reduce((e=>e)).filter((e=>e&&"button"===e.type)).getItemAt(0)}_focusListItem(e){var t;const{_focusSortUid:i}=this;e&&i&&(null==(t=e["data-item"].layer)?void 0:t.uid)===i&&(e.focus(),this._focusSortUid=null)}_watchActionSectionChanges(e,t){const i=yt+t;this._handles.add(e.on("change",this.scheduleRender.bind(this)),i),e.forEach((e=>this._renderOnActionChanges(e,t)))}_renderOnActionChanges(e,t){const i=pt+t;"toggle"!==e.type?"slider"!==e.type?this._handles.add([Object(h.a)(e,["className","image","id","title","visible"],(()=>this.scheduleRender()))],i):this._handles.add([Object(h.a)(e,["className","id","title","visible","value","displayValueEnabled","max","min","step"],(()=>this.scheduleRender()))],i):this._handles.add([Object(h.a)(e,["className","image","id","title","visible","value"],(()=>this.scheduleRender()))],i)}_renderOnItemChanges(e){const t=e.uid,i=gt+t;this._handles.add([Object(h.a)(e,["actionsOpen","visible","open","updating","title","visibleAtCurrentScale","error","visibilityMode","panel","panel.title","panel.content","panel.className","sortable","childrenSortable"],(()=>this.scheduleRender())),e.actionsSections.on("change",(()=>this.scheduleRender())),e.children.on("change",(()=>this.scheduleRender()))],i),e.children.forEach((e=>this._renderOnItemChanges(e))),e.actionsSections.forEach((e=>this._watchActionSectionChanges(e,t)))}_itemsChanged(e){this._handles.removeAll(),e.forEach((e=>this._renderOnItemChanges(e))),this._setVisibleItems(e),this.scheduleRender()}_filterActions(e){return e.map((e=>e.filter((e=>e.visible))))}_countActions(e){return e.reduce(((e,t)=>e+t.length),0)}_getIconImageStyles(e){const t="esri.widgets.LayerList.ListItemPanel"===e.declaredClass||"esri.support.Action.ActionButton"===e.declaredClass||"esri.support.Action.ActionToggle"===e.declaredClass?e.image:null;return{"background-image":t?`url("${t}")`:null}}_selectionKeydown(e){const t=Object(l.a)(e);if(-1===["ArrowDown","ArrowUp"].indexOf(t))return void this._toggleSelection(e);e.stopPropagation();const i=e.currentTarget,s=i["data-item"],{_sortableMap:a,selectedItems:n}=this,r=i.dataset.group,o=a.get(r);if(!o)return;const c=H(s,n),d=o.toArray(),h=e.target,b=d.indexOf(h.dataset.layerUid);if(-1!==b){if("ArrowDown"===t){const e=b+1;if(e>=d.length)return;var u,p;c?(oe(d,b,e),o.sort(d),this._sortLayers(o),this._focusSortUid=null==(u=s.layer)?void 0:u.uid):(this._focusSortUid=null==(p=s.layer)?void 0:p.uid,this.scheduleRender())}if("ArrowUp"===t){const e=b-1;if(e<=-1)return;var y,g;c?(oe(d,b,e),o.sort(d),this._sortLayers(o),this._focusSortUid=null==(y=s.layer)?void 0:y.uid):(this._focusSortUid=null==(g=s.layer)?void 0:g.uid,this.scheduleRender())}}}_toggleActionsOpen(e){const t=e.currentTarget["data-item"],{actionsOpen:i}=t,s=!i;s&&this.operationalItems.forEach((e=>vt(e))),t.actionsOpen=s,e.stopPropagation()}_triggerPanel(e){const t=e.currentTarget["data-panel"];t&&(t.open=!t.open),e.stopPropagation()}_triggerAction(e){const t=e.currentTarget,i=t["data-action"],s=t["data-item"];"toggle"===i.type&&(i.value=!i.value),this.triggerAction(i,s),e.stopPropagation()}_toggleVisibility(e){const t=e.currentTarget,i=t.getAttribute("data-parent-visibility"),s=t["data-item"];i===mt.exclusive&&s.visible||(s.visible=!s.visible),e.stopPropagation()}_toggleChildrenClick(e){const t=e.currentTarget["data-item"];t.open=!t.open,e.stopPropagation()}_toggleSelection(e){e.stopPropagation();const{multipleSelectionEnabled:t,selectedItems:i}=this,s=e.currentTarget["data-item"],a=H(s,i),{length:n}=i;if(!t)return!n||a&&1===n?void(a?null==i.remove||i.remove(a):i.add(s)):(i.removeAll(),void i.add(s));a?null==i.remove||i.remove(a):i.add(s)}};Object(a.a)([Object(p.b)()],ft.prototype,"visibleItems",void 0),Object(a.a)([Object(p.b)()],ft.prototype,"iconClass",void 0),Object(a.a)([Object(p.b)()],ft.prototype,"errorsVisible",void 0),Object(a.a)([Object(p.b)({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],ft.prototype,"label",void 0),Object(a.a)([Object(b.a)("viewModel.listItemCreatedFunction")],ft.prototype,"listItemCreatedFunction",void 0),Object(a.a)([Object(p.b)()],ft.prototype,"localeStrings",void 0),Object(a.a)([Object(p.b)(),Object(ne.a)("esri/widgets/LayerList/t9n/LayerList")],ft.prototype,"messages",void 0),Object(a.a)([Object(p.b)(),Object(ne.a)("esri/t9n/common")],ft.prototype,"messagesCommon",void 0),Object(a.a)([Object(p.b)()],ft.prototype,"multipleSelectionEnabled",void 0),Object(a.a)([Object(b.a)("viewModel.operationalItems")],ft.prototype,"operationalItems",void 0),Object(a.a)([Object(p.b)()],ft.prototype,"selectionEnabled",void 0),Object(a.a)([Object(p.b)()],ft.prototype,"selectedItems",void 0),Object(a.a)([Object(p.b)()],ft.prototype,"statusIndicatorsVisible",null),Object(a.a)([Object(b.a)("viewModel.view")],ft.prototype,"view",void 0),Object(a.a)([Object(re.a)("trigger-action"),Object(p.b)({type:se})],ft.prototype,"viewModel",void 0),Object(a.a)([Object(p.b)()],ft.prototype,"visibleElements",void 0),Object(a.a)([Object(u.a)("visibleElements")],ft.prototype,"castVisibleElements",null),Object(a.a)([Object(b.a)("viewModel.triggerAction")],ft.prototype,"triggerAction",null),Object(a.a)([Object(ae.a)()],ft.prototype,"_toggleActionsOpen",null),Object(a.a)([Object(ae.a)()],ft.prototype,"_triggerPanel",null),Object(a.a)([Object(ae.a)()],ft.prototype,"_triggerAction",null),Object(a.a)([Object(ae.a)()],ft.prototype,"_toggleVisibility",null),Object(a.a)([Object(ae.a)()],ft.prototype,"_toggleChildrenClick",null),Object(a.a)([Object(ae.a)()],ft.prototype,"_toggleSelection",null),ft=Object(a.a)([Object(y.a)("esri.widgets.LayerList")],ft);var wt=ft;t.a=wt},180:function(e,t,i){"use strict";var s,a=i(76),n=i(89),r=i(160),l=i(78),o=(i(74),i(79),i(75),i(77));let c=s=class extends(Object(r.a)(n.a)){constructor(e){super(e),this.active=!1,this.className=null,this.disabled=!1,this.id=null,this.indicator=!1,this.title=null,this.type=null,this.visible=!0}clone(){return new s({active:this.active,className:this.className,disabled:this.disabled,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible})}};Object(a.a)([Object(l.b)()],c.prototype,"active",void 0),Object(a.a)([Object(l.b)()],c.prototype,"className",void 0),Object(a.a)([Object(l.b)()],c.prototype,"disabled",void 0),Object(a.a)([Object(l.b)()],c.prototype,"id",void 0),Object(a.a)([Object(l.b)()],c.prototype,"indicator",void 0),Object(a.a)([Object(l.b)()],c.prototype,"title",void 0),Object(a.a)([Object(l.b)()],c.prototype,"type",void 0),Object(a.a)([Object(l.b)()],c.prototype,"visible",void 0),c=s=Object(a.a)([Object(o.a)("esri.support.actions.ActionBase")],c);var d=c;t.a=d},265:function(e,t,i){"use strict";i.d(t,"a",(function(){return a}));var s=i(102);function a(){return function(e,t){if(!e[t])throw new TypeError(`Cannot auto bind undefined function '${t}'`);return{value:n(e[t])}}}function n(e){return function(t,...i){!function(e){const{type:t}=e;return e instanceof KeyboardEvent||"keyup"===t||"keydown"===t||"keypress"===t}(t)?e.call(this,t,...i):Object(s.f)(t.key)&&(t.preventDefault(),t.stopPropagation(),t.target.click())}}},319:function(e,t,i){"use strict";var s,a=i(76),n=i(78),r=(i(74),i(79),i(75),i(77)),l=i(180);let o=s=class extends l.a{constructor(e){super(e),this.image=null,this.type="button"}clone(){return new s({active:this.active,className:this.className,disabled:this.disabled,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible,image:this.image})}};Object(a.a)([Object(n.b)()],o.prototype,"image",void 0),o=s=Object(a.a)([Object(r.a)("esri.support.Action.ActionButton")],o);var c=o;t.a=c},347:function(e,t,i){"use strict";var s,a=i(76),n=i(78),r=(i(74),i(79),i(75),i(77)),l=i(180);let o=s=class extends l.a{constructor(e){super(e),this.image=null,this.type="toggle",this.value=!1}clone(){return new s({active:this.active,className:this.className,disabled:this.disabled,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible,image:this.image,value:this.value})}};Object(a.a)([Object(n.b)()],o.prototype,"image",void 0),Object(a.a)([Object(n.b)()],o.prototype,"value",void 0),o=s=Object(a.a)([Object(r.a)("esri.support.Action.ActionToggle")],o);var c=o;t.a=c},387:function(e,t,i){"use strict";i.d(t,"a",(function(){return a})),i.d(t,"b",(function(){return s}));i(265),i(164),i(292),i(74),i(75);i(314),i(118),i(102);function s(e){return e&&"function"==typeof e.render}function a(e){return e&&"function"==typeof e.postMixInProperties&&"function"==typeof e.buildRendering&&"function"==typeof e.postCreate&&"function"==typeof e.startup}}}]);
//# sourceMappingURL=147.fd67cb5d.chunk.js.map