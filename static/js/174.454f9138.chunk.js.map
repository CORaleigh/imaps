{"version":3,"sources":["../node_modules/@arcgis/core/chunks/persistableUrlUtils.js","../node_modules/@arcgis/core/layers/support/arcgisLayerUrl.js","../node_modules/@arcgis/core/layers/support/arcgisLayers.js","../node_modules/@arcgis/core/layers/support/lazyLayerLoader.js"],"names":["c","r","o","s","url","path","e","preserveProtocolRelative","portalItem","readResourcePaths","t","itemUrl","h","test","push","resourceFromPath","I","portal","i","a","u","blockedRelativeUrls","n","verifyItemRelativeUrls","rootPath","writtenUrls","isPortal","urlKey","customBaseUrl","portalHostname","U","resources","l","toKeep","resource","m","p","f","v","match","scheme","R","Object","freeze","__proto__","fromJSON","toJSON","read","write","itemIdFromResourceUrl","mapserver","imageserver","featureserver","sceneserver","streamserver","vectortileserver","values","RegExp","join","d","indexOf","title","w","slice","serverType","toLowerCase","sublayer","parseInt","serviceUrl","sublayerId","Number","replace","toUpperCase","length","y","g","O","logger","layer","layerId","nonStandardUrlAllowed","C","toString","S","L","authority","async","properties","customParameters","FeatureServer","StreamServer","VectorTileServer","tileInfo","then","format","cacheType","Point","IntegratedMesh","PointCloud","Building","Array","isArray","layers","layerType","FeatureLayer","SceneLayer","parsedUrl","Constructor","layerOrTableId","sublayerIds","tableIds","sublayerInfos","layerInfos","tableInfos","layerIds","b","sourceJSON","default","sublayerTitleMode","forEach","add","tables","find","id","type","hasOwnProperty","name","filter","serviceJSON","currentVersion","layersJSON","map","reverse","responseType","query","data","BingMapsLayer","BuildingSceneLayer","CSVLayer","ElevationLayer","GroupLayer","GeoRSSLayer","ImageryLayer","ImageryTileLayer","IntegratedMeshLayer","KMLLayer","MapImageLayer","MapNotesLayer","OGCFeatureLayer","OpenStreetMapLayer","PointCloudLayer","RouteLayer","StreamLayer","TileLayer","UnknownLayer","UnsupportedLayer","VectorTileLayer","VoxelLayer","WebTileLayer","WFSLayer","WMSLayer","WMTSLayer"],"mappings":"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","file":"static/js/174.454f9138.chunk.js","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport{isSome as r}from\"../core/maybe.js\";import{makeAbsolute as e,makeRelative as t,isAbsolute as o,normalize as s,isDataProtocol as l,changeDomain as a,hasSameOrigin as u,appUrl as n}from\"../core/urlUtils.js\";function c(r,o){const s=o&&o.url&&o.url.path;if(r&&s&&(r=e(r,s,{preserveProtocolRelative:!0}),o.portalItem&&o.readResourcePaths)){const e=t(r,o.portalItem.itemUrl);h.test(e)&&o.readResourcePaths.push(o.portalItem.resourceFromPath(e).path)}return I(r,o&&o.portal)}function i(r,a,u=0){if(!r)return r;!o(r)&&a&&a.blockedRelativeUrls&&a.blockedRelativeUrls.push(r);let n=e(r);if(a){const e=a.verifyItemRelativeUrls&&a.verifyItemRelativeUrls.rootPath||a.url&&a.url.path;if(e){const o=I(e,a.portal);n=t(I(n,a.portal),o,o),n!==r&&a.verifyItemRelativeUrls&&a.verifyItemRelativeUrls.writtenUrls.push(n)}}return n=U(n,a&&a.portal),o(n)&&(n=s(n)),null!=a&&a.resources&&null!=a&&a.portalItem&&!o(n)&&!l(n)&&0===u&&a.resources.toKeep.push({resource:a.portalItem.resourceFromPath(n)}),n}function m(r,e,t){return c(r,t)}function p(r,e,t,o){const s=i(r,o);void 0!==s&&(e[t]=s)}const f=/\\/items\\/([^\\/]+)\\/resources\\//,h=/^\\.\\/resources\\//;function v(e){const t=r(e)?e.match(f):null;return r(t)?t[1]:null}function U(r,e){return e&&!e.isPortal&&e.urlKey&&e.customBaseUrl?a(r,`${e.urlKey}.${e.customBaseUrl}`,e.portalHostname):r}function I(r,e){if(!e||e.isPortal||!e.urlKey||!e.customBaseUrl)return r;const t=`${e.urlKey}.${e.customBaseUrl}`;return u(n,`${n.scheme}://${t}`)?a(r,e.portalHostname,t):a(r,t,e.portalHostname)}var R=Object.freeze({__proto__:null,fromJSON:c,toJSON:i,read:m,write:p,itemIdFromResourceUrl:v});export{c as f,v as i,R as p,m as r,i as t,p as w};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport{isSome as e}from\"../../core/maybe.js\";import{urlToObject as r,removeTrailingSlash as t,removeQueryParameters as n,join as s,Url as i,makeAbsolute as o}from\"../../core/urlUtils.js\";import{w as u}from\"../../chunks/persistableUrlUtils.js\";const l={mapserver:\"MapServer\",imageserver:\"ImageServer\",featureserver:\"FeatureServer\",sceneserver:\"SceneServer\",streamserver:\"StreamServer\",vectortileserver:\"VectorTileServer\"},a=Object.values(l),c=new RegExp(`^((?:https?:)?\\\\/\\\\/\\\\S+?\\\\/rest\\\\/services\\\\/(.+?)\\\\/(${a.join(\"|\")}))(?:\\\\/(?:layers\\\\/)?(\\\\d+))?`,\"i\"),f=new RegExp(`^((?:https?:)?\\\\/\\\\/\\\\S+?\\\\/([^\\\\/\\\\n]+)\\\\/(${a.join(\"|\")}))(?:\\\\/(?:layers\\\\/)?(\\\\d+))?`,\"i\"),v=/(.*?)\\/(?:layers\\/)?(\\d+)\\/?$/i;function p(e){return!!c.test(e)}function d(e){const t=r(e),n=t.path.match(c)||t.path.match(f);if(!n)return null;const[,s,i,o,u]=n,a=i.indexOf(\"/\");return{title:w(-1!==a?i.slice(a+1):i),serverType:l[o.toLowerCase()],sublayer:null!=u&&\"\"!==u?parseInt(u,10):null,url:{path:s}}}function m(e){const t=r(e).path.match(v);return t?{serviceUrl:t[1],sublayerId:Number(t[2])}:null}function w(e){return(e=e.replace(/\\s*[/_]+\\s*/g,\" \"))[0].toUpperCase()+e.slice(1)}function h(r,t){const n=[];if(r){const t=d(r);e(t)&&t.title&&n.push(t.title)}if(t){const e=w(t);n.push(e)}if(2===n.length){if(-1!==n[0].toLowerCase().indexOf(n[1].toLowerCase()))return n[0];if(-1!==n[1].toLowerCase().indexOf(n[0].toLowerCase()))return n[1]}return n.join(\" - \")}function y(e){if(!e)return!1;const r=\".arcgis.com/\",t=\"//services\",n=\"//tiles\",s=\"//features\",i=-1!==(e=e.toLowerCase()).indexOf(r),o=-1!==e.indexOf(t)||-1!==e.indexOf(n)||-1!==e.indexOf(s);return i&&o}function x(e,r){return r&&e&&-1!==e.toLowerCase().indexOf(r.toLowerCase())}function g(e,r){return e?t(n(e,r)):e}function O(s){let{url:i}=s;if(!i)return{url:i};i=n(i,s.logger);const o=r(i),u=d(o.path);let l;if(e(u))null!=u.sublayer&&null==s.layer.layerId&&(l=u.sublayer),i=u.url.path;else if(s.nonStandardUrlAllowed){const r=m(o.path);e(r)&&(i=r.serviceUrl,l=r.sublayerId)}return{url:t(i),layerId:l}}function C(e,r,t,n,i){u(r,n,\"url\",i),n.url&&null!=e.layerId&&(n.url=s(n.url,t,e.layerId.toString()))}function S(e){if(!e)return!1;const r=e.toLowerCase(),t=-1!==r.indexOf(\"/services/\"),n=-1!==r.indexOf(\"/mapserver/wmsserver\"),s=-1!==r.indexOf(\"/imageserver/wmsserver\"),i=-1!==r.indexOf(\"/wmsserver\");return t&&(n||s||i)}function L(e){if(!e)return!1;const r=new i(o(e)).authority.toLowerCase();return\"server.arcgisonline.com\"===r||\"services.arcgisonline.com\"===r}function b(e){if(!e)return!1;return new i(o(e)).authority.toLowerCase().includes(\"arcgis.com\")}export{w as cleanTitle,b as isAGOLUrl,p as isArcGISUrl,y as isHostedAgolService,x as isHostedSecuredProxyService,L as isServerOrServicesAGOLUrl,S as isWmsServer,d as parse,m as parseNonStandardSublayerUrl,g as sanitizeUrl,O as sanitizeUrlWithLayerId,a as serverTypes,h as titleFromUrlAndName,C as writeUrlWithLayerId};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport e from\"../../request.js\";import r from\"../../core/Error.js\";import{isNone as a,isSome as t}from\"../../core/maybe.js\";import{getFilename as l,urlToObject as n}from\"../../core/urlUtils.js\";import{parse as s,parseNonStandardSublayerUrl as o}from\"./arcgisLayerUrl.js\";import{layerLookupMap as u}from\"./lazyLayerLoader.js\";async function i(e){var r;const a=null==(r=e.properties)?void 0:r.customParameters,t=await d(e.url,a),l={...e.properties,url:e.url};if(!t.sublayerIds)return null!=t.layerOrTableId&&(l.layerId=t.layerOrTableId,l.sourceJSON=t.sourceJSON),new t.Constructor(l);const n=new(0,(await import(\"../GroupLayer.js\")).default)({title:t.parsedUrl.title});return c(n,t,l),n}function y(e,r){return e?e.find((e=>e.id===r)):null}function c(e,r,a){function l(e,l){const n={...a,layerId:e,sublayerTitleMode:\"service-name\"};return t(l)&&(n.sourceJSON=l),new r.Constructor(n)}r.sublayerIds.forEach((a=>{const t=l(a,y(r.sublayerInfos,a));e.add(t)})),r.tableIds.forEach((a=>{const t=l(a,y(r.tableInfos,a));e.tables.add(t)}))}async function d(e,t){let l=s(e);if(a(l)&&(l=await f(e,t)),a(l))throw new r(\"arcgis-layers:url-mismatch\",\"The url '${url}' is not a valid arcgis resource\",{url:e});const{serverType:n,sublayer:o}=l;let u;const i={FeatureServer:\"FeatureLayer\",StreamServer:\"StreamLayer\",VectorTileServer:\"VectorTileLayer\"};switch(n){case\"MapServer\":u=null!=o?\"FeatureLayer\":S(e,t).then((e=>e?\"TileLayer\":\"MapImageLayer\"));break;case\"ImageServer\":u=w(e,t).then((e=>{const r=e.tileInfo&&e.tileInfo.format;return e.tileInfo?!r||\"LERC\"!==r.toUpperCase()||e.cacheType&&\"elevation\"!==e.cacheType.toLowerCase()?\"ImageryTileLayer\":\"ElevationLayer\":\"ImageryLayer\"}));break;case\"SceneServer\":u=w(l.url.path,t).then((e=>{const r={Point:\"SceneLayer\",\"3DObject\":\"SceneLayer\",IntegratedMesh:\"IntegratedMeshLayer\",PointCloud:\"PointCloudLayer\",Building:\"BuildingSceneLayer\"};if(e&&Array.isArray(e.layers)&&e.layers.length>0){const a=e.layers[0].layerType;if(null!=r[a])return r[a]}return\"SceneLayer\"}));break;default:u=i[n]}const y={FeatureLayer:!0,SceneLayer:!0},c=\"FeatureServer\"===n,d={parsedUrl:l,Constructor:null,layerOrTableId:c?o:null,sublayerIds:null,tableIds:null},p=await u;if(y[p]&&null==o){const r=await v(e,n,t);c&&(d.sublayerInfos=r.layerInfos,d.tableInfos=r.tableInfos);if(1!==r.layerIds.length+r.tableIds.length)d.sublayerIds=r.layerIds,d.tableIds=r.tableIds;else if(c){var I,b;d.layerOrTableId=null!=(I=r.layerIds[0])?I:r.tableIds[0],d.sourceJSON=null!=(b=r.layerInfos[0])?b:r.tableInfos[0]}}return d.Constructor=await m(p),d}async function f(e,r){var a;const s=await w(e,r);let u=null,i=null;const y=s.type;if(\"Feature Layer\"===y||\"Table\"===y?(u=\"FeatureServer\",i=s.id):\"indexedVector\"===y?u=\"VectorTileServer\":s.hasOwnProperty(\"mapName\")?u=\"MapServer\":s.hasOwnProperty(\"bandCount\")&&s.hasOwnProperty(\"pixelSizeX\")?u=\"ImageServer\":s.hasOwnProperty(\"maxRecordCount\")&&s.hasOwnProperty(\"allowGeometryUpdates\")?u=\"FeatureServer\":s.hasOwnProperty(\"streamUrls\")?u=\"StreamServer\":p(s)?(u=\"SceneServer\",i=s.id):s.hasOwnProperty(\"layers\")&&p(null==(a=s.layers)?void 0:a[0])&&(u=\"SceneServer\"),!u)return null;const c=null!=i?o(e):null;return{title:t(c)&&s.name||l(e),serverType:u,sublayer:i,url:{path:t(c)?c.serviceUrl:n(e).path}}}function p(e){return(null==e?void 0:e.hasOwnProperty(\"store\"))&&e.hasOwnProperty(\"id\")&&\"number\"==typeof e.id}async function v(e,r,a){var t,l;let n,s=!1;if(\"FeatureServer\"===r){const r=await b(e,a);s=!!r.layersJSON,n=r.layersJSON||r.serviceJSON}else n=await w(e,a);const o=null==(t=n)?void 0:t.layers,u=null==(l=n)?void 0:l.tables;return{layerIds:(null==o?void 0:o.map((e=>e.id)).reverse())||[],tableIds:(null==u?void 0:u.map((e=>e.id)).reverse())||[],layerInfos:s?o:[],tableInfos:s?u:[]}}function I(e){return!e.type||\"Feature Layer\"===e.type}async function b(e,r){var a,t;let l=await w(e,r);l=l||{},l.layers=(null==(a=l.layers)?void 0:a.filter(I))||[];const n={serviceJSON:l};if(l.currentVersion<10.5)return n;const s=await w(e+\"/layers\",r);return n.layersJSON={layers:(null==s||null==(t=s.layers)?void 0:t.filter(I))||[],tables:(null==s?void 0:s.tables)||[]},n}async function m(e){return(0,u[e])()}async function S(e,r){return(await w(e,r)).tileInfo}async function w(r,a){return(await e(r,{responseType:\"json\",query:{f:\"json\",...a}})).data}export{i as fromUrl};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nconst a={BingMapsLayer:async()=>(await import(\"../BingMapsLayer.js\")).default,BuildingSceneLayer:async()=>(await import(\"../BuildingSceneLayer.js\")).default,CSVLayer:async()=>(await import(\"../CSVLayer.js\")).default,ElevationLayer:async()=>(await import(\"../ElevationLayer.js\")).default,FeatureLayer:async()=>(await import(\"../FeatureLayer.js\")).default,GroupLayer:async()=>(await import(\"../GroupLayer.js\")).default,GeoRSSLayer:async()=>(await import(\"../GeoRSSLayer.js\")).default,ImageryLayer:async()=>(await import(\"../ImageryLayer.js\")).default,ImageryTileLayer:async()=>(await import(\"../ImageryTileLayer.js\")).default,IntegratedMeshLayer:async()=>(await import(\"../IntegratedMeshLayer.js\")).default,KMLLayer:async()=>(await import(\"../KMLLayer.js\")).default,MapImageLayer:async()=>(await import(\"../MapImageLayer.js\")).default,MapNotesLayer:async()=>(await import(\"../MapNotesLayer.js\")).default,OGCFeatureLayer:async()=>(await import(\"../OGCFeatureLayer.js\")).default,OpenStreetMapLayer:async()=>(await import(\"../OpenStreetMapLayer.js\")).default,PointCloudLayer:async()=>(await import(\"../PointCloudLayer.js\")).default,RouteLayer:async()=>(await import(\"../RouteLayer.js\")).default,SceneLayer:async()=>(await import(\"../SceneLayer.js\")).default,StreamLayer:async()=>(await import(\"../StreamLayer.js\")).default,TileLayer:async()=>(await import(\"../TileLayer.js\")).default,UnknownLayer:async()=>(await import(\"../UnknownLayer.js\")).default,UnsupportedLayer:async()=>(await import(\"../UnsupportedLayer.js\")).default,VectorTileLayer:async()=>(await import(\"../VectorTileLayer.js\")).default,VoxelLayer:async()=>(await import(\"../VoxelLayer.js\")).default,WebTileLayer:async()=>(await import(\"../WebTileLayer.js\")).default,WFSLayer:async()=>(await import(\"../WFSLayer.js\")).default,WMSLayer:async()=>(await import(\"../WMSLayer.js\")).default,WMTSLayer:async()=>(await import(\"../WMTSLayer.js\")).default};export{a as layerLookupMap};\n"],"sourceRoot":""}