"use strict";(globalThis.webpackChunkimaps=globalThis.webpackChunkimaps||[]).push([[5930],{27135:(e,t,i)=>{i.d(t,{J:()=>s});var n=i(43404),o=i(49861);function s(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const i=e instanceof n.X?e:new n.X(e,t),s={type:t?.ignoreUnknown??1?i.apiValues:String,json:{type:i.jsonValues,read:!t?.readOnly&&{reader:i.read},write:{writer:i.write}}};return void 0!==t?.readOnly&&(s.readOnly=!!t.readOnly),void 0!==t?.default&&(s.json.default=t.default),void 0!==t?.name&&(s.json.name=t.name),(0,o.Cb)(s)}},29616:(e,t,i)=>{i.d(t,{Qc:()=>c,WU:()=>a,lt:()=>d,ti:()=>r});var n=i(643),o=i(36257);const s={ar:[".",","],bg:[",","\xa0"],bs:[",","."],ca:[",","."],cs:[",","\xa0"],da:[",","."],de:[",","."],"de-ch":[".","\u2019"],el:[",","."],en:[".",","],"en-au":[".",","],es:[",","."],"es-mx":[".",","],et:[",","\xa0"],fi:[",","\xa0"],fr:[",","\u202f"],"fr-ch":[",","\u202f"],he:[".",","],hi:[".",",","#,##,##0.###"],hr:[",","."],hu:[",","\xa0"],id:[",","."],it:[",","."],"it-ch":[".","\u2019"],ja:[".",","],ko:[".",","],lt:[",","\xa0"],lv:[",","\xa0"],mk:[",","."],nb:[",","\xa0"],nl:[",","."],pl:[",","\xa0"],pt:[",","."],"pt-pt":[",","\xa0"],ro:[",","."],ru:[",","\xa0"],sk:[",","\xa0"],sl:[",","."],sr:[",","."],sv:[",","\xa0"],th:[".",","],tr:[",","."],uk:[",","\xa0"],vi:[",","."],zh:[".",","]};function r(e){e||(e=(0,o.Kd)());let t=e in s;if(!t){const i=e.split("-");i.length>1&&i[0]in s&&(e=i[0],t=!0),t||(e="en")}const[i,n,r="#,##0.###"]=s[e];return{decimal:i,group:n,pattern:r}}function a(e,t){const i=r((t={...t}).locale);t.customs=i;const n=t.pattern||i.pattern;return isNaN(e)||Math.abs(e)===1/0?null:function(e,t,i){const n=(i=i||{}).customs.group,o=i.customs.decimal,s=t.split(";"),r=s[0];if((t=s[e<0?1:0]||"-"+r).includes("%"))e*=100;else if(t.includes("\u2030"))e*=1e3;else{if(t.includes("\xa4"))throw new Error("currency notation not supported");if(t.includes("E"))throw new Error("exponential notation not supported")}const a=l,d=r.match(a);if(!d)throw new Error("unable to find a number expression in pattern: "+t);return!1===i.fractional&&(i.places=0),t.replace(a,function(e,t,i){!0===(i=i||{}).places&&(i.places=0),i.places===1/0&&(i.places=6);const n=t.split("."),o="string"==typeof i.places&&i.places.indexOf(",");let s=i.places;o?s=i.places.substring(o+1):s>=0||(s=(n[1]||[]).length),i.round<0||(e=Number(e.toFixed(Number(s))));const r=String(Math.abs(e)).split("."),a=r[1]||"";if(n[1]||i.places){o&&(i.places=i.places.substring(0,o));const e=void 0!==i.places?i.places:n[1]&&n[1].lastIndexOf("0")+1;e>a.length&&(r[1]=a.padEnd(Number(e),"0")),s<a.length&&(r[1]=a.substr(0,Number(s)))}else r[1]&&r.pop();const l=n[0].replace(",","");let d=l.indexOf("0");-1!==d&&(d=l.length-d,d>r[0].length&&(r[0]=r[0].padStart(d,"0")),l.includes("#")||(r[0]=r[0].substr(r[0].length-d)));let c,u,p=n[0].lastIndexOf(",");if(-1!==p){c=n[0].length-p-1;const e=n[0].substr(0,p);p=e.lastIndexOf(","),-1!==p&&(u=e.length-p-1)}const h=[];for(let v=r[0];v;){const e=v.length-c;h.push(e>0?v.substr(e):v),v=e>0?v.slice(0,e):"",u&&(c=u,u=void 0)}return r[0]=h.reverse().join(i.group||","),r.join(i.decimal||".")}(e,d[0],{decimal:o,group:n,places:i.places,round:i.round}))}(e,n,t)}const l=/[#0,]*[#0](?:\.0*#*)?/;function d(e){const t=r((e=e||{}).locale),i=e.pattern||t.pattern,o=t.group,s=t.decimal;let a=1;if(i.includes("%"))a/=100;else if(i.includes("\u2030"))a/=1e3;else if(i.includes("\xa4"))throw new Error("currency notation not supported");const d=i.split(";");1===d.length&&d.push("-"+d[0]);const c=p(d,(t=>(t="(?:"+(0,n.Qs)(t,".")+")").replace(l,(t=>{const i={signed:!1,separator:e.strict?o:[o,""],fractional:e.fractional,decimal:s,exponent:!1},n=t.split(".");let r=e.places;1===n.length&&1!==a&&(n[1]="###"),1===n.length||0===r?i.fractional=!1:(void 0===r&&(r=e.pattern?n[1].lastIndexOf("0")+1:1/0),r&&null==e.fractional&&(i.fractional=!0),!e.places&&r<n[1].length&&(r+=","+n[1].length),i.places=r);const l=n[0].split(",");return l.length>1&&(i.groupSize=l.pop().length,l.length>1&&(i.groupSize2=l.pop().length)),"("+function(e){"places"in(e=e||{})||(e.places=1/0),"string"!=typeof e.decimal&&(e.decimal="."),"fractional"in e&&!/^0/.test(String(e.places))||(e.fractional=[!0,!1]),"exponent"in e||(e.exponent=[!0,!1]),"eSigned"in e||(e.eSigned=[!0,!1]);const t=u(e),i=p(e.fractional,(t=>{let i="";return t&&0!==e.places&&(i="\\"+e.decimal,e.places===1/0?i="(?:"+i+"\\d+)?":i+="\\d{"+e.places+"}"),i}),!0);let n=t+i;return i&&(n="(?:(?:"+n+")|(?:"+i+"))"),n+p(e.exponent,(t=>t?"([eE]"+u({signed:e.eSigned})+")":""))}(i)+")"}))),!0);return{regexp:c.replace(/[\xa0 ]/g,"[\\s\\xa0]"),group:o,decimal:s,factor:a}}function c(e,t){const i=d(t),n=new RegExp("^"+i.regexp+"$").exec(e);if(!n)return NaN;let o=n[1];if(!n[1]){if(!n[2])return NaN;o=n[2],i.factor*=-1}return o=o.replace(new RegExp("["+i.group+"\\s\\xa0]","g"),"").replace(i.decimal,"."),Number(o)*i.factor}function u(e){return"signed"in(e=e||{})||(e.signed=[!0,!1]),"separator"in e?"groupSize"in e||(e.groupSize=3):e.separator="",p(e.signed,(e=>e?"[-+]":""),!0)+p(e.separator,(t=>{if(!t)return"(?:\\d+)";" "===(t=(0,n.Qs)(t))?t="\\s":"\xa0"===t&&(t="\\s\\xa0");const i=e.groupSize,o=e.groupSize2;if(o){const e="(?:0|[1-9]\\d{0,"+(o-1)+"}(?:["+t+"]\\d{"+o+"})*["+t+"]\\d{"+i+"})";return i-o>0?"(?:"+e+"|(?:0|[1-9]\\d{0,"+(i-1)+"}))":e}return"(?:0|[1-9]\\d{0,"+(i-1)+"}(?:["+t+"]\\d{"+i+"})*)"}),!0)}const p=(e,t,i)=>{if(!(e instanceof Array))return t(e);const n=[];for(let o=0;o<e.length;o++)n.push(t(e[o]));return h(n.join("|"),i)},h=(e,t)=>"("+(t?"?:":"")+e+")"},93501:(e,t,i)=>{i.d(t,{k:()=>r});var n=i(92026),o=i(68860),s=i(92975);function r(e,t,i){if((0,n.Wi)(t)||(0,n.Wi)(i)||i.vcsWkid||(0,s.fS)(t,i))return null;const r=(0,o._R)(t)/(0,o._R)(i);if(1===r)return null;switch(e){case"point":case"esriGeometryPoint":return e=>function(e,t){e&&null!=e.z&&(e.z*=t)}(e,r);case"polyline":case"esriGeometryPolyline":return e=>function(e,t){if(e)for(const i of e.paths)for(const e of i)e.length>2&&(e[2]*=t)}(e,r);case"polygon":case"esriGeometryPolygon":return e=>function(e,t){if(e)for(const i of e.rings)for(const e of i)e.length>2&&(e[2]*=t)}(e,r);case"multipoint":case"esriGeometryMultipoint":return e=>function(e,t){if(e)for(const i of e.points)i.length>2&&(i[2]*=t)}(e,r);case"extent":case"esriGeometryExtent":return e=>function(e,t){e&&null!=e.zmin&&null!=e.zmax&&(e.zmin*=t,e.zmax*=t)}(e,r);default:return null}}},39638:(e,t,i)=>{var n;function o(e,t){switch(e.type){case"range":{const i="range"in e?e.range[0]:e.minValue,o="range"in e?e.range[1]:e.maxValue;if(+t<i||+t>o)return n.VALUE_OUT_OF_RANGE;break}case"coded-value":case"codedValue":if(null==e.codedValues||e.codedValues.every((e=>null==e||e.code!==t)))return n.INVALID_CODED_VALUE}return null}function s(e){if(e&&"range"===e.type)return{min:"range"in e?e.range[0]:e.minValue,max:"range"in e?e.range[1]:e.maxValue}}i.d(t,{D3:()=>s,F3:()=>o,V$:()=>n}),function(e){e.VALUE_OUT_OF_RANGE="domain-validation-error::value-out-of-range",e.INVALID_CODED_VALUE="domain-validation-error::invalid-coded-value"}(n||(n={}))},37270:(e,t,i)=>{i.d(t,{AB:()=>m,CH:()=>M,Ec:()=>ee,Gz:()=>G,H7:()=>L,Lk:()=>_,Ll:()=>S,M$:()=>N,Mu:()=>E,O5:()=>w,Pz:()=>Y,Q0:()=>v,Qc:()=>B,Qj:()=>x,R9:()=>K,UF:()=>p,YN:()=>c,ZV:()=>P,gd:()=>g,io:()=>f,j:()=>T,os:()=>I,qN:()=>U,vP:()=>H,vl:()=>C,wF:()=>z,y2:()=>W});var n=i(10064),o=i(92026),s=i(18202),r=i(39638),a=i(819);const l=["field","field2","field3","normalizationField","rotationInfo.field","proportionalSymbolInfo.field","proportionalSymbolInfo.normalizationField","colorInfo.field","colorInfo.normalizationField"],d=["field","normalizationField"];function c(e,t){if(null!=e&&null!=t)for(const i of Array.isArray(e)?e:[e])if(u(l,i,t),"visualVariables"in i&&i.visualVariables)for(const e of i.visualVariables)u(d,e,t)}function u(e,t,i){if(e)for(const n of e){const e=(0,s.hS)(n,t),o=e&&"function"!=typeof e&&i.get(e);o&&(0,s.RB)(n,o.name,t)}}function p(e,t){if(null!=e&&t?.fields.length)if("startField"in e){const i=t.get(e.startField),n=t.get(e.endField);e.startField=i&&i.name||null,e.endField=n&&n.name||null}else{const i=t.get(e.startTimeField),n=t.get(e.endTimeField);e.startTimeField=i&&i.name||null,e.endTimeField=n&&n.name||null}}const h=new Set;function v(e,t){return e&&t?(h.clear(),g(h,e,t),Array.from(h).sort()):[]}function g(e,t,i){if(i)if(t?.fields?.length)if(i.includes("*"))for(const{name:n}of t.fields)e.add(n);else for(const n of i)m(e,t,n);else{if(i.includes("*"))return e.clear(),void e.add("*");for(const t of i)e.add(t)}}function m(e,t,i){if("string"==typeof i)if(t){const n=t.get(i);n&&e.add(n.name)}else e.add(i)}function _(e,t){return(0,o.Wi)(t)||(0,o.Wi)(e)?[]:t.includes("*")?e.fields.map((e=>e.name)):t}async function f(e,t,i){if(!i)return;const{arcadeUtils:n}=await(0,a.LC)(),o=n.extractFieldNames(i,t?.fields?.map((e=>e.name)));for(const s of o)m(e,t,s)}async function b(e,t,o){if(o&&"1=1"!==o){const s=(await Promise.all([i.e(8562),i.e(4397)]).then(i.bind(i,48562))).WhereClause.create(o,t);if(!s.isStandardized)throw new n.Z("fieldUtils:collectFilterFields","Where clause is not standardized",{where:o});g(e,t,s.fieldNames)}}function w(e){let{displayField:t,fields:i}=e;return t||(i&&i.length?y(i,"name-or-title")||y(i,"unique-identifier")||y(i,"type-or-category")||function(e){for(const t of e){if(!t||!t.name)continue;const e=t.name.toLowerCase();if(e.includes("name")||e.includes("title"))return t.name}return null}(i):null)}function y(e,t){for(const i of e)if(i&&i.valueType&&i.valueType===t)return i.name;return null}async function C(e,t){if(!t)return;const i=(0,s.hS)("elevationInfo.featureExpressionInfo",t);return i?i.collectRequiredFields(e,t.fieldsIndex):void 0}async function P(e,t,i){if(!t||!i||!("fields"in i))return;const n=[];if(i.popupTemplate?.expressionInfos&&n.push(...i.popupTemplate.expressionInfos.map((i=>f(e,t.fieldsIndex,i.expression)))),Array.isArray(i.popupTemplate?.content)){const o=i.popupTemplate.content;for(const i of o)"expression"===i.type&&i.expressionInfo&&n.push(f(e,t.fieldsIndex,i.expressionInfo.expression))}i.fields&&n.push(...i.fields.map((i=>async function(e,t,i){i.outStatistic.onStatisticValueExpression?f(e,t,i.outStatistic.onStatisticValueExpression):e.add(i.outStatistic.onStatisticField)}(e,t.fieldsIndex,i)))),await Promise.all(n)}async function S(e,t,i){t&&(t.timeInfo&&(0,o.pC)(i)&&i.timeExtent&&g(e,t.fieldsIndex,[t.timeInfo.startField,t.timeInfo.endField]),t.floorInfo&&g(e,t.fieldsIndex,[t.floorInfo.floorField]),(0,o.pC)(i)&&(0,o.pC)(i.where)&&await b(e,t.fieldsIndex,i.where))}async function x(e,t,i){t&&i&&await Promise.all(i.map((i=>async function(e,t,i){t&&i&&(i.valueExpression?await f(e,t.fieldsIndex,i.valueExpression):i.field&&m(e,t.fieldsIndex,i.field))}(e,t,i))))}function M(e){if(!e)return[];const t="editFieldsInfo"in e&&e.editFieldsInfo;return t?v(e.fieldsIndex,[t&&t.creatorField,t&&t.creationDateField,t&&t.editorField,t&&t.editDateField]):[]}function T(e){if(!e)return[];const t=e.geometryFieldsInfo;return t?v(e.fieldsIndex,[t.shapeAreaField,t.shapeLengthField]):[]}async function E(e,t){const{labelingInfo:i,fieldsIndex:n}=t;i&&i.length&&await Promise.all(i.map((t=>async function(e,t,i){if(!i)return;const n=i.getLabelExpression(),o=i.where;if("arcade"===n.type)await f(e,t,n.expression);else{const i=n.expression.match(/{[^}]*}/g);i&&i.forEach((i=>{m(e,t,i.slice(1,-1))}))}await b(e,t,o)}(e,n,t))))}function I(e){const t=e.defaultValue;return void 0!==t&&R(e,t)?t:e.nullable?null:void 0}function $(e){return"number"==typeof e&&!isNaN(e)&&isFinite(e)}function F(e){return null===e||$(e)}const D="isInteger"in Number?Number.isInteger:e=>"number"==typeof e&&isFinite(e)&&Math.floor(e)===e;function V(e){return null===e||D(e)}function k(e){return null!=e&&"string"==typeof e}function A(e){return null===e||k(e)}function O(){return!0}function R(e,t){let i;switch(e.type){case"date":case"integer":case"long":case"small-integer":case"esriFieldTypeDate":case"esriFieldTypeInteger":case"esriFieldTypeLong":case"esriFieldTypeSmallInteger":i=e.nullable?V:D;break;case"double":case"single":case"esriFieldTypeSingle":case"esriFieldTypeDouble":i=e.nullable?F:$;break;case"string":case"esriFieldTypeString":i=e.nullable?A:k;break;default:i=O}return 1===arguments.length?i:i(t)}const Z=new Set(["integer","small-integer","single","double","esriFieldTypeInteger","esriFieldTypeSmallInteger","esriFieldTypeSingle","esriFieldTypeDouble"]);function L(e){return null!=e&&Z.has(e.type)}function U(e){return null!=e&&("string"===e.type||"esriFieldTypeString"===e.type)}function W(e){return null!=e&&("date"===e.type||"esriFieldTypeDate"===e.type)}var N,G;function Y(e){return null==e||"number"==typeof e&&isNaN(e)?null:e}function B(e,t){return e.nullable&&null===t?null:L(e)&&!function(e,t){const i="string"==typeof e?X(e):e;return!!i&&(i.isInteger?D(t)&&t>=i.min&&t<=i.max:t>=i.min&&t<=i.max)}(e.type,Number(t))?N.OUT_OF_RANGE:R(e,t)?e.domain?(0,r.F3)(e.domain,t):null:G.INVALID_TYPE}function z(e){return(0,r.D3)(e.domain)||(L(e)?X(e.type):void 0)}function X(e){switch(e){case"esriFieldTypeSmallInteger":case"small-integer":return j;case"esriFieldTypeInteger":case"integer":return J;case"esriFieldTypeSingle":case"single":return q;case"esriFieldTypeDouble":case"double":return Q}}!function(e){e.OUT_OF_RANGE="numeric-range-validation-error::out-of-range"}(N||(N={})),function(e){e.INVALID_TYPE="type-validation-error::invalid-type"}(G||(G={}));const j={min:-32768,max:32767,isInteger:!0},J={min:-2147483648,max:2147483647,isInteger:!0},q={min:-34e37,max:12e37,isInteger:!1},Q={min:-Number.MAX_VALUE,max:Number.MAX_VALUE,isInteger:!1};function H(e,t,i){switch(e){case r.V$.INVALID_CODED_VALUE:return`Value ${i} is not in the coded domain - field: ${t.name}, domain: ${JSON.stringify(t.domain)}`;case r.V$.VALUE_OUT_OF_RANGE:return`Value ${i} is out of the range of valid values - field: ${t.name}, domain: ${JSON.stringify(t.domain)}`;case G.INVALID_TYPE:return`Value ${i} is not a valid value for the field type - field: ${t.name}, type: ${t.type}, nullable: ${t.nullable}`;case N.OUT_OF_RANGE:{const{min:e,max:n}=X(t.type);return`Value ${i} is out of range for the number type - field: ${t.name}, type: ${t.type}, value range is ${e} to ${n}`}}}function K(e,t){return!function(e,t,i){if(!t||!t.attributes||!e){if((0,o.pC)(i))for(const t of e)i.add(t);return!0}const n=t.attributes;let s=!1;for(const r of e)if(!(r in n)){if(s=!0,!(0,o.pC)(i))break;i.add(r)}return s}(e,t,null)}function ee(e){return["raster.itempixelvalue","raster.servicepixelvalue"].some((t=>e.toLowerCase().startsWith(t)))}},77671:(e,t,i)=>{i.d(t,{Y:()=>o});var n=i(68860);const o={readOnly:!0,get(){return(0,n.RG)(this.view)}}},22061:(e,t,i)=>{i.d(t,{Z:()=>h});var n=i(27366),o=i(51995),s=i(43404),r=i(46784),a=i(49861),l=(i(63780),i(93169),i(25243),i(38511)),d=i(69912);const c=new s.X({esriSMS:"simple-marker",esriPMS:"picture-marker",esriSLS:"simple-line",esriSFS:"simple-fill",esriPFS:"picture-fill",esriTS:"text",esriSHD:"shield-label-symbol",PointSymbol3D:"point-3d",LineSymbol3D:"line-3d",PolygonSymbol3D:"polygon-3d",WebStyleSymbol:"web-style",MeshSymbol3D:"mesh-3d",LabelSymbol3D:"label-3d",CIMSymbolReference:"cim"});let u=0,p=class extends r.wq{constructor(e){super(e),this.id="sym"+u++,this.type=null,this.color=new o.Z([0,0,0,1])}readColor(e){return e&&null!=e[0]?[e[0],e[1],e[2],e[3]/255]:e}async collectRequiredFields(e,t){}hash(){return JSON.stringify(this.toJSON())}clone(){}};(0,n._)([(0,a.Cb)({type:c.apiValues,readOnly:!0,json:{read:!1,write:{ignoreOrigin:!0,writer:c.write}}})],p.prototype,"type",void 0),(0,n._)([(0,a.Cb)({type:o.Z,json:{write:{allowNull:!0}}})],p.prototype,"color",void 0),(0,n._)([(0,l.r)("color")],p.prototype,"readColor",null),p=(0,n._)([(0,d.j)("esri.symbols.Symbol")],p);const h=p},70412:(e,t,i)=>{i.d(t,{Z:()=>Xe});var n=i(27366),o=i(98928),s=i(32718),r=i(8025),a=(i(63780),i(93169),i(89125)),l=i(49861),d=i(69912),c=i(69407),u=i(65905),p=i(52639),h=(i(59166),i(40281)),v=i(10064),g=i(91505),m=i(100),_=i(94172),f=(i(25243),i(7882)),b=i(79803),w=i(91946),y=i(43326),C=i(68260),P=i(29616),S=i(36257),x=i(52486);const M=(0,P.ti)().decimal,T={N:"north",S:"south",E:"east",W:"west"},E=new RegExp(`-?\\d+[\\.|\\${M}]?\\d*`),I=/^[\\0]+(?=\d)/;function $(e,t){const i="ar"===(0,S.Kd)(),n={ddm:`Y\xb0\u200e A'${e.abbreviatedDirections.north}, X\xb0\u200e B'${e.abbreviatedDirections.east}`,dms:`Y\xb0\u200e A' B"${e.abbreviatedDirections.north}, X\xb0\u200e C' D"${e.abbreviatedDirections.east}`,dd:`Y\xb0\u200e${e.abbreviatedDirections.north}, X\xb0\u200e${e.abbreviatedDirections.east}`,xy:"X\xb0\u200e, Y\xb0\u200e",basemap:"X, Y"},o={ddm:`${e.abbreviatedDirections.north}\xb0\u200eY 'A ,${e.abbreviatedDirections.east}\xb0\u200eX 'B`,dms:`${e.abbreviatedDirections.north}\xb0\u200eY 'A "B ,${e.abbreviatedDirections.east}\xb0\u200eX 'C "D`,dd:`${e.abbreviatedDirections.north}\xb0\u200eY ,${e.abbreviatedDirections.east}\xb0\u200eX`,xy:"X\xb0\u200e ,Y\xb0\u200e",basemap:"X ,Y"};t.forEach((e=>{const{name:t}=e;if(n[t]){const s=e.defaultPattern===e.currentPattern,r=i?o[t]:n[t];e.defaultPattern=r,s&&(e.currentPattern=r)}}))}function F(e){const t=e.match(I),i=t?t[0]:"",n=e.includes(".")?e.split(".")[1].length:0;return i+(0,P.WU)(Number(e),{pattern:"###0.###",places:n,round:-1})}function D(e){return(0,P.Qc)(e)}var V=i(99505),k=i(41201);const A="default",O="crosshair",R=new f.Z([0,0,500]),Z=["mgrs","utm","usng","dd","dms","ddm"],L="esri__coordinateConversionWidgetState",U=s.Z.getLogger("esri.widgets.CoordinateConversion.CoordinateConversionViewModel"),W="conversions",N="formats",G="view",Y="view-change";let B=class extends((0,V._)(g.Z.EventedAccessor)){constructor(e){super(e),this._conversionPromise=null,this._handles=new m.Z,this._locationGraphic=null,this._pointerCount=0,this.conversions=new h.Z,this.formats=new h.Z,this.formatterAvailable=!1,this.messages=null,this.filteredFormats=new h.Z,this.locationSymbol=new w.Z({url:(0,u.V)("esri/images/search/search-symbol-32.png"),width:24,height:24}),this.storageEnabled=!0,this.storageType="session",this.view=null,this._saveWidgetState=this._saveWidgetState.bind(this),this._handleFormatChange=this._handleFormatChange.bind(this),this._handleConversionChange=this._handleConversionChange.bind(this),this._handleViewChange=this._handleViewChange.bind(this),this._onClick=this._onClick.bind(this),this._onPointerMove=this._onPointerMove.bind(this),this._onPointerDown=this._onPointerDown.bind(this),this._onPointerUp=this._onPointerUp.bind(this)}initialize(){const e=async()=>this.messages=await(0,k.ME)("esri/widgets/CoordinateConversion/t9n/CoordinateConversion");e().then((()=>{if(!this.destroyed&&(this.formats.addMany(function(e){const t=e.abbreviatedDirections.north,i=e.abbreviatedDirections.south,n=e.abbreviatedDirections.east,o=e.abbreviatedDirections.west,s={};s[t]="N",s[i]="S",s[n]="E",s[o]="W";const r=new RegExp(`N|S|${t}|${i}`,"i"),a=new RegExp(`E|W|${n}|${o}`,"i"),l=[new x.Z({name:"basemap",coordinateSegments:[{alias:"X",description:"easting",searchPattern:E,substitution:{input:e=>D(e),output:e=>F(e)}},{alias:"Y",description:"northing",searchPattern:E,substitution:{input:e=>D(e),output:e=>F(e)}}],defaultPattern:"X, Y",viewModel:null}),new x.Z({name:"dd",coordinateSegments:[{alias:"Y",description:"degrees latitude",searchPattern:new RegExp(`\\d{1,2}[\\.|\\${M}]?\\d*(?=\\D*?[N|S|${t}|${i}])`,"i"),substitution:{input:e=>D(e),output:e=>F(e)}},{alias:e.abbreviatedDirections.north,description:"north/south indicator",searchPattern:r,substitution:{input:e=>s[e],output:t=>e.abbreviatedDirections[T[t]]}},{alias:"X",description:"degrees longitude",searchPattern:new RegExp(`\\d{1,3}[\\.|\\${M}]?\\d*(?=\\D*?[E|W|${n}|${o}])`,"i"),substitution:{input:e=>D(e),output:e=>F(e)}},{alias:e.abbreviatedDirections.east,description:"east/west indicator",searchPattern:a,substitution:{input:e=>s[e],output:t=>e.abbreviatedDirections[T[t]]}}],defaultPattern:`Y\xb0\u200e${e.abbreviatedDirections.north}, X\xb0\u200e${e.abbreviatedDirections.east}`,viewModel:null}),new x.Z({name:"ddm",coordinateSegments:[{alias:"Y",description:"degrees latitude",searchPattern:new RegExp(`\\d{1,2}(?=.*?\\s+.*?[N|S|${t}|${i}])`,"i"),substitution:{input:e=>D(e),output:e=>F(e)}},{alias:"A",description:"minutes latitude",searchPattern:new RegExp(`\\d{1,2}[\\.\\${M}]?\\d*(?=.*?[N|S|${t}||${i}])`,"i"),substitution:{input:e=>D(e),output:e=>F(e)}},{alias:e.abbreviatedDirections.north,description:"north/south indicator",searchPattern:r,substitution:{input:e=>s[e],output:t=>e.abbreviatedDirections[T[t]]}},{alias:"X",description:"degrees longitude",searchPattern:new RegExp(`\\d{1,3}(?=\\D*?\\s+.*?[E|W|${n}|${o}])`,"i"),substitution:{input:e=>D(e),output:e=>F(e)}},{alias:"B",description:"minutes longitude",searchPattern:new RegExp(`\\d{1,2}[\\.|\\|${M}]?\\d*(?=.*?[E|W|${n}|${o}])`,"i"),substitution:{input:e=>D(e),output:e=>F(e)}},{alias:e.abbreviatedDirections.east,description:"east/west indicator",searchPattern:a,substitution:{input:e=>s[e],output:t=>e.abbreviatedDirections[T[t]]}}],defaultPattern:`Y\xb0\u200e A'${e.abbreviatedDirections.north}, X\xb0\u200e B'${e.abbreviatedDirections.east}`,viewModel:null}),new x.Z({name:"dms",coordinateSegments:[{alias:"Y",description:"degrees latitude",searchPattern:new RegExp(`\\d{1,2}(?=.*?\\s+.*?[N|S|${t}|${i}])`,"i"),substitution:{input:e=>D(e),output:e=>F(e)}},{alias:"A",description:"minutes latitude",searchPattern:new RegExp(`\\d{1,2}(?=.*?[N|S|${t}|${i}])`,"i"),substitution:{input:e=>D(e),output:e=>F(e)}},{alias:"B",description:"seconds latitude",searchPattern:new RegExp(`\\d{1,2}[\\.|\\${M}]?\\d*(?=.*?[N|S|${t}|${i}])`,"i"),substitution:{input:e=>D(e),output:e=>F(e)}},{alias:e.abbreviatedDirections.north,description:"north/south indicator",searchPattern:r,substitution:{input:e=>s[e],output:t=>e.abbreviatedDirections[T[t]]}},{alias:"X",description:"degrees longitude",searchPattern:new RegExp(`\\d{1,3}(?=.*?\\s+.*?[E|W|${n}|${o}])`,"i"),substitution:{input:e=>D(e),output:e=>F(e)}},{alias:"C",description:"minutes longitude",searchPattern:new RegExp(`\\d{1,2}(?=.*?[E|W|${n}|${o}])`,"i"),substitution:{input:e=>D(e),output:e=>F(e)}},{alias:"D",description:"seconds longitude",searchPattern:new RegExp(`\\d{1,2}[\\.|\\${M}]?\\d*(?=.*?[E|W|${n}|${o}])`,"i"),substitution:{input:e=>D(e),output:e=>F(e)}},{alias:e.abbreviatedDirections.east,description:"east/west indicator",searchPattern:a,substitution:{input:e=>s[e],output:t=>e.abbreviatedDirections[T[t]]}}],defaultPattern:`Y\xb0\u200e A' B"${e.abbreviatedDirections.north}, X\xb0\u200e C' D"${e.abbreviatedDirections.east}`,viewModel:null}),new x.Z({name:"xy",coordinateSegments:[{alias:"X",description:"longitude",searchPattern:E,substitution:{input:e=>D(e),output:e=>F(e)}},{alias:"Y",description:"latitude",searchPattern:E,substitution:{input:e=>D(e),output:e=>F(e)}}],defaultPattern:"X\xb0\u200e, Y\xb0\u200e",viewModel:null}),new x.Z({name:"mgrs",coordinateSegments:[{alias:"Z",description:"grid zone",searchPattern:/\d{1,2}\w|[abyz]/i},{alias:"S",description:"grid square",searchPattern:/\w{2}/},{alias:"X",description:"easting",searchPattern:/^\d{5}(?=.?\d{5}$)|^\d{4}(?=.?\d{4}$)|^\d{3}(?=.?\d{3}$)|^\d{2}(?=.?\d{2}$)|^\d(?=.?\d$)/},{alias:"Y",description:"northing",searchPattern:/^\d{1,5}/}],defaultPattern:"Z S X Y",viewModel:null}),new x.Z({name:"usng",coordinateSegments:[{alias:"Z",description:"grid zone",searchPattern:/\d{1,2}\w|[abyz]/i},{alias:"S",description:"grid square",searchPattern:/\w{2}/},{alias:"X",description:"easting",searchPattern:/^\d{5}(?=.?\d{5}$)|^\d{4}(?=.?\d{4}$)|^\d{3}(?=.?\d{3}$)|^\d{2}(?=.?\d{2}$)|^\d(?=.?\d$)/},{alias:"Y",description:"northing",searchPattern:/^\d{1,5}/}],defaultPattern:"Z S X Y",viewModel:null}),new x.Z({name:"utm",coordinateSegments:[{alias:"Z",description:"zone number",searchPattern:/\d{1,2}|[abyz]/i},{alias:"B",description:"latitude band",searchPattern:/^\D/},{alias:"X",description:"easting",searchPattern:/\d{1,7}(?=\s*\d{7}$)/},{alias:"Y",description:"northing",searchPattern:/\d{1,7}/}],defaultPattern:"ZB X Y",viewModel:null})];return $(e,l),l}(this.messages)),this.storageEnabled&&this._loadWidgetState(),this.formats.forEach((e=>{e.viewModel=this,this._handles.add((0,_.YP)((()=>e.currentPattern),this._saveWidgetState),e.name)})),this._handles.add(this.conversions.on("change",this._handleConversionChange),W),this._handles.add(this.formats.on("change",this._handleFormatChange),N),this._handles.add((0,S.qe)((()=>{e().then((()=>{$(this.messages,this.formats)}))}))),(0,b.zD)().then((()=>{this.formatterAvailable=!0})).catch((e=>{U.error(new v.Z("coordinate-conversion:projection-load-failed","Failed to load the projection module.",{error:e})),this.formatterAvailable=!1,this._filterFormatsAndConversions()})).then((()=>this._handles.add((0,_.YP)((()=>this.view),this._handleViewChange,_.nn),Y))),0===this.conversions.length)){const e=this.formats.find((e=>"xy"===e.name))||this.formats.getItemAt(0);this.conversions.add(new y.Z({format:e}))}}))}destroy(){this._handles.removeAll(),this._cleanUpView(this.view),this.view=null}set currentLocation(e){this._set("currentLocation",e),this._updateConversions()}get currentLocation(){return this._get("currentLocation")||null}set mode(e){switch(e){case"capture":this.currentLocation=null,this._startCaptureMode(),this._set("mode",e);break;case"live":this._startLiveMode(),this._set("mode",e)}}get mode(){return this._get("mode")||"live"}get state(){const{messages:e,view:t}=this,i=t?.ready;return e?i?"ready":t?"loading":"disabled":"disabled"}get storage(){const{storageType:e}=this;return"session"===e?sessionStorage:localStorage}get waitingForConversions(){return null!=this._conversionPromise}setLocation(e){if(this.view.graphics.remove(this._locationGraphic),e){const t=e.clone();t.hasZ&&(t.z=void 0),this._locationGraphic=new p.Z({geometry:t,symbol:this.get("locationSymbol")}),this.view.graphics.add(this._locationGraphic)}}convert(e,t){return(0,C.J$)(t)?Promise.resolve().then((()=>e.convert(t))):Promise.reject(new v.Z("coordinate-conversion:invalid-point","Invalid point cannot be converted.",{point:t}))}goToLocation(e){if(this.get("view.clippingArea")||this.get("view.map.basemap.baseLayers.length")>0){const t=this.get("view.clippingArea")||this.view.map.basemap.baseLayers.getItemAt(0).fullExtent;return t?t.contains(e)?this.callGoTo({target:e}):Promise.reject(new v.Z("coordinate-conversion:go-to-failed","Point outside basemap extent.",{point:e})):this.callGoTo({target:e})}return this.callGoTo({target:e})}pause(){this.currentLocation=null,this._handles.remove(G),this.view&&(this.view.cursor=A,this.view.graphics.remove(this._locationGraphic))}previewConversion(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.currentLocation||R;return this._convertMany([e],t).then((()=>e.displayCoordinate))}resume(){"capture"===this.mode?this._startCaptureMode():this._startLiveMode()}reverseConvert(e,t){return t.reverseConvert(e)}async updateConversions(e,t){if(!t||!t.type||"point"!==t.type)throw this._clearConversions(this.conversions),new v.Z("coordinate-conversion:invalid-input-point","Point is invalid, conversions cannot be updated.",{point:t});return this._convertMany(e,t)}_cleanUpView(e){e&&(e.graphics.remove(this._locationGraphic),this._handles.remove(G),e.cursor=A)}_clearConversions(e){e.forEach((e=>{e.position={location:null,coordinate:null}}))}_convertMany(e,t){return Promise.all(e.map((e=>e.format.convert(t).then((t=>(e.position=t,e))).catch((()=>{e.position=null}))))).then((()=>e))}_handleConversionChange(e){e.added.forEach((e=>{const t=e.format;t.viewModel=this,this.currentLocation&&(this._set("waitingForConversions",!0),this.convert(t,this.currentLocation).then((t=>{e.position=t,this._set("waitingForConversions",!1)})))})),this._saveWidgetState()}_handleFormatChange(e){e.added.forEach((e=>{this._handles.add((0,_.YP)((()=>e.currentPattern),this._saveWidgetState),e.name),e.viewModel=this})),e.removed.forEach((e=>{e.viewModel=null,this._handles.remove(e.name)}))}_loadWidgetState(){try{const e=JSON.parse(this.storage.getItem(L));e&&this._setWidgetState(e)}catch(e){U.error(new v.Z("coordinate-conversion:invalid-session-storage-json","Could not read from storage.",{error:e}))}}_startCaptureMode(){this._handles.remove(G),this.view&&(this.view.cursor=O,this.currentLocation&&this.setLocation(this.currentLocation),this._handles.add(this.view.on("click",this._onClick),G))}_startLiveMode(){this._pointerCount=0,this._handles.remove(G),this.view&&(this.view.cursor=A,this.view.graphics.remove(this._locationGraphic),this._handles.add([this.view.on("pointer-down",this._onPointerDown),this.view.on("pointer-up",this._onPointerUp),this.view.on("pointer-move",this._onPointerMove)],G))}_handleViewChange(e,t){t&&t!==e&&this._cleanUpView(t),e&&("capture"===this.mode&&this._startCaptureMode(),this._startLiveMode(),t&&this._filterFormatsAndConversions())}_onClick(e){if(0===e.button){const t=this.view.toMap(e),i=t&&t.normalize();this.setLocation(i),this.currentLocation=i}}_onPointerDown(e){const{pointerType:t}=e;if(this._pointerCount++,("touch"===t||"pen"===t)&&1===this._pointerCount){const t=this.view.toMap(e);this.currentLocation=t&&t.normalize()}}_onPointerMove(e){const{pointerType:t}=e;if("mouse"===t||1===this._pointerCount){const t=this.view.toMap(e);this.currentLocation=t&&t.normalize()}}_onPointerUp(){this._pointerCount--}_setWidgetState(e){try{e.formats.forEach((t=>{const i=this.formats.find((e=>e.name===t.name));i&&e.locale===(0,S.Kd)()&&t.currentPattern&&(i.currentPattern=t.currentPattern),i&&t.index>=0&&this.conversions.add(new y.Z({format:i}))}))}catch(t){U.warn(new v.Z("coordinate-conversion:session-storage-read-error","Could not get widget state from stored JSON.",{error:t}))}}_saveWidgetState(){if(!this.storageEnabled)return;const e=this._toJSON();try{this.storage.setItem(L,JSON.stringify({formats:e,locale:(0,S.Kd)()}))}catch(t){U.error(new v.Z("coordinate-conversion:local-storage-write-error","Could not write to localStorage.",{error:t}))}}async _updateConversions(){try{await this.updateConversions(this.conversions.toArray(),this.currentLocation)}catch{}}_toJSON(){return this.formats.filter((e=>{const t=e.name;return"xy"===t||"basemap"===t||(0,C.hf)(t)})).map((e=>({name:e.name,currentPattern:e.currentPattern,defaultPattern:e.defaultPattern,index:this.conversions.findIndex((t=>t.format===e))}))).sort(((e,t)=>e.index-t.index)).toArray()}_filterFormatsAndConversions(){const{formatterAvailable:e,conversions:t,formats:i}=this;e||this._handles.add((0,_.gx)((()=>this.view.spatialReference),(e=>{const n=e.isWebMercator||e.isWGS84,o=i.filter((e=>{const{name:t}=e;return!!Z.includes(t)||"xy"===t&&!n})),s=this.filteredFormats.filter((e=>"xy"===e.name&&n&&!this.formats.includes(e))),r=t.filter((e=>o.includes(e.format)));i.removeMany(o),t.removeMany(r),this.filteredFormats.addMany(o.filter((e=>!this.filteredFormats.includes(e)))),i.addMany(s)}),{once:!0,initial:!0}),G)}};(0,n._)([(0,l.Cb)()],B.prototype,"conversions",void 0),(0,n._)([(0,l.Cb)({type:f.Z})],B.prototype,"currentLocation",null),(0,n._)([(0,l.Cb)()],B.prototype,"formats",void 0),(0,n._)([(0,l.Cb)()],B.prototype,"messages",void 0),(0,n._)([(0,l.Cb)()],B.prototype,"mode",null),(0,n._)([(0,l.Cb)()],B.prototype,"filteredFormats",void 0),(0,n._)([(0,l.Cb)({readOnly:!0})],B.prototype,"state",null),(0,n._)([(0,l.Cb)()],B.prototype,"locationSymbol",void 0),(0,n._)([(0,l.Cb)({readOnly:!0,dependsOn:["storageType"]})],B.prototype,"storage",null),(0,n._)([(0,l.Cb)()],B.prototype,"storageEnabled",void 0),(0,n._)([(0,l.Cb)()],B.prototype,"storageType",void 0),(0,n._)([(0,l.Cb)({readOnly:!0})],B.prototype,"waitingForConversions",null),(0,n._)([(0,l.Cb)()],B.prototype,"view",void 0),B=(0,n._)([(0,d.j)("esri.widgets.CoordinateConversion.CoordinateConversionViewModel")],B);const z=B;var X=i(96919),j=i(78088),J=i(80532),q=i(67005),Q=i(80975);const H="esri-coordinate-conversion esri-widget",K="esri-coordinate-conversion--capture-mode",ee="esri-coordinate-conversion--no-basemap",te="esri-coordinate-conversion__popup",ie="esri-coordinate-conversion__clipboard-popup",ne="esri-coordinate-conversion__conversion-list",oe="esri-coordinate-conversion__row",se="esri-coordinate-conversion__display",re="esri-coordinate-conversion__conversions-view--expanded",ae="esri-coordinate-conversion__conversions-view--expand-down",le="esri-coordinate-conversion__conversions-view--expand-up",de="esri-coordinate-conversion__conversions-view",ce="esri-coordinate-conversion__select-primary",ue="esri-coordinate-conversion__select-row",pe="esri-coordinate-conversion__tools",he="esri-coordinate-conversion__mode-toggle",ve="esri-coordinate-conversion__row-button",ge="esri-coordinate-conversion__back-button",me="esri-coordinate-conversion__button",_e="esri-coordinate-conversion__convert-button-span",fe="esri-coordinate-conversion__input-coordinate",be="esri-coordinate-conversion__input-form",we="esri-coordinate-conversion__input-group",ye="esri-coordinate-conversion__input-coordinate--rejected",Ce="esri-coordinate-conversion__heading",Pe="esri-coordinate-conversion__pattern-input",Se="esri-coordinate__settings",xe="esri-coordinate-conversion__settings-group",Me="esri-coordinate-conversion__settings-group-horizontal",Te="esri-coordinate-conversion__preview-coordinate",Ee="esri-disabled",Ie="esri-input",$e="esri-button",Fe="esri-widget__heading",De="esri-widget--button",Ve="esri-icon-left-arrow",ke="esri-icon-right-arrow",Ae="esri-icon-map-pin",Oe="esri-icon-up",Re="esri-icon-duplicate",Ze="esri-icon-edit",Le="esri-select",Ue="esri-icon-down",We="esri-icon-refresh",Ne="esri-icon-close",Ge="esri-icon-settings2",Ye={settingsButton:!0,inputButton:!0,captureButton:!0,expandButton:!0},Be=s.Z.getLogger("esri.widgets.CoordinateConversion");let ze=class extends c.Z{constructor(e,t){super(e,t),this._popupMessage=null,this._popupTimeoutId=null,this._clipboardPopupTimeoutId=null,this._coordinateInput=null,this._badInput=!1,this._goToEnabled=!1,this._conversionFormat=null,this._settingsFormat=null,this._previewConversion=null,this._expanded=!1,this._clipboardPopupVisible=!1,this._popupVisible=!1,this._settingsVisible=!1,this._inputVisible=!1,this.conversions=null,this.currentLocation=null,this.formats=null,this.goToOverride=null,this.headingLevel=4,this.label=void 0,this.messages=null,this.messagesCommon=null,this.mode=null,this.orientation="auto",this.locationSymbol=null,this.storageEnabled=null,this.storageType=null,this.view=null,this.viewModel=new z,this.visibleElements={...Ye}}set multipleConversions(e){!1===e&&(this._expanded=!1,this.conversions.splice(1,this.conversions.length-1)),this._set("multipleConversions",e)}get multipleConversions(){const e=this._get("multipleConversions");return"boolean"!=typeof e||e}castVisibleElements(e){return{...Ye,...e}}reverseConvert(e,t){return this.viewModel.reverseConvert(e,t)}render(){const e=this.get("viewModel.state"),t="disabled"===e?(0,q.u)("div",{key:"esri-coordinate__no-basemap"},this.messages.noBasemap):null,i=!t&&this._inputVisible?this._renderInputForm():null,n=!t&&this._settingsVisible?this._renderSettings():null,o=t||i||n?null:this._renderConversionsView(),s=this._popupVisible?this._renderPopup():null,r={[K]:"capture"===this.mode,[Ee]:"loading"===e,[ee]:"disabled"===e};return(0,q.u)("div",{class:this.classes(H,r)},s,t,o,n,i)}_addConversion(e){const t=e.target,i=t.options[t.options.selectedIndex]["data-format"],n=t["data-index"],o=new y.Z({format:i});t.options.selectedIndex=0,n>=0&&this.conversions.removeAt(n),this.conversions.add(o,n)}_findSettingsFormat(){return this._settingsFormat||this.conversions.reduceRight(((e,t)=>{const i=t.format;return i.get("hasDisplayProperties")?i:e}),null)||this.formats.find((e=>e.hasDisplayProperties))}_hidePopup(){this._popupTimeoutId&&(clearTimeout(this._popupTimeoutId),this._popupTimeoutId=null),this._popupVisible=!1,this._popupMessage=null,this.scheduleRender()}_hideClipboardPopup(){this._clipboardPopupTimeoutId&&(clearTimeout(this._clipboardPopupTimeoutId),this._clipboardPopupTimeoutId=null),this._clipboardPopupVisible=!1,this.scheduleRender()}_onConvertComplete(){this._inputVisible=!1,this._coordinateInput.value=""}_onCopy(e){const t=e.currentTarget["data-conversion"].displayCoordinate;e.clipboardData.setData("text/plain",t),this._showClipboardPopup(),e.preventDefault()}_processUserInput(e){const t=(0,o.kK)(e),i=this.viewModel;if("Enter"!==t&&t)this._badInput&&(this._badInput=!1);else{const e=this._coordinateInput["data-format"],t=this._coordinateInput.value;this._reverseConvert(t,e).then((e=>{"capture"===this.mode?i.resume():this.mode="capture",this.currentLocation=e,i.setLocation(e),this._onConvertComplete()})).catch((e=>{Be.error(e),this._showPopup(this.messages.invalidCoordinate),this._badInput=!0}))}}_reverseConvert(e,t){const i=this.viewModel;return t.reverseConvert(e).then((e=>(this._goToEnabled&&i.goToLocation(e).catch((e=>{Be.warn(e),this._showPopup(this.messages.locationOffBasemap)})),e)))}_setInputFormat(e){const t=e.target,i=t[t.options.selectedIndex]["data-format"];this._conversionFormat=i}_setPreviewConversion(){const e=this._findSettingsFormat(),t=this.viewModel;if(e){const i=this.conversions.find((t=>t.format===e));this._previewConversion=new y.Z({format:e,position:{location:this.currentLocation,coordinate:i&&i.position.coordinate}}),this._previewConversion.position.coordinate||t.previewConversion(this._previewConversion)}}_setSettingsFormat(e){const t=e.target,i=t[t.options.selectedIndex]["data-format"];this._settingsFormat=i,this._setPreviewConversion()}_showClipboardPopup(){this._clipboardPopupVisible?clearTimeout(this._clipboardPopupTimeoutId):this._clipboardPopupVisible=!0,this.scheduleRender(),this._popupTimeoutId=setTimeout((()=>{this._popupTimeoutId=null,this._hideClipboardPopup()}),750)}_showPopup(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2500;this._popupMessage=e,this._popupVisible?clearTimeout(this._popupTimeoutId):this._popupVisible=!0,this.scheduleRender(),this._popupTimeoutId=setTimeout((()=>{this._popupTimeoutId=null,this._hidePopup()}),t)}_toggleGoTo(){this._goToEnabled=!this._goToEnabled}_updateCurrentPattern(e){e.stopPropagation();const t=e.target,i=this._findSettingsFormat();i&&(i.currentPattern=t.value)}_renderConversion(e,t){const{messages:i}=this,n=`${this.id}__list-item-${t}`,o=`${e.format.label} ${i.conversionOutputSuffix}`,s=0===t,r=s||this._expanded,a=s?this._renderFirstConversion(e):this._renderTools(t,e,n),l=s&&!e.displayCoordinate?i.noLocation:e.displayCoordinate,d=(0,q.u)("div",{"aria-label":l,class:se,"data-conversion":e,role:"listitem",tabindex:"0",title:l},l),c=this._renderOptions(this.formats.filter((t=>t!==e.format)));return r?(0,q.u)("li",{"aria-label":o,class:oe,id:n,key:e,role:"group",title:o,tabindex:"0"},(0,q.u)("select",{"aria-controls":n,"aria-label":i.selectFormat,class:this.classes(Le,ue),bind:this,"data-index":t,onchange:this._addConversion,title:i.selectFormat},(0,q.u)("option",{"aria-label":e.format.label,selected:!0,title:e.format.label},e.format.label.toUpperCase()),c),d,a):null}_renderCopyButton(e){const t=this._clipboardPopupVisible&&this._renderClipboardPopup();return(0,q.u)("li",{"aria-label":this.messagesCommon.copy,bind:this,class:this.classes(De,ve),"data-conversion":e,onclick:this._copyCoordinateOutput,onkeydown:this._copyCoordinateOutput,oncopy:this._onCopy,role:"button",tabindex:"0",title:this.messagesCommon.copy},t,(0,q.u)("span",{"aria-hidden":"true",class:Re}))}_renderFirstConversion(e){const t=this.id,i={[Ue]:!this._expanded,[Oe]:this._expanded},{messages:n,messagesCommon:o,multipleConversions:s,visibleElements:r}=this,a="live"===this.mode?n.captureMode:n.liveMode,l=this._expanded?o.collapse:o.expand,d=e.displayCoordinate&&"capture"===this.mode?this._renderCopyButton(e):null,c=s&&r.expandButton&&(0,q.u)("li",{"aria-controls":`${t}__${ne}`,"aria-label":l,bind:this,class:De,key:"esri-coordinate-conversion__expand-button",onclick:this._toggleExpand,onkeydown:this._toggleExpand,role:"button",tabindex:"0",title:l},(0,q.u)("span",{"aria-hidden":"true",class:this.classes(i)})),u=!s&&r.captureButton&&(0,q.u)("li",{"aria-label":a,bind:this,class:this.classes(De,he),key:"esri-coordinate-conversion__mode-toggle",onclick:this._toggleMode,onkeydown:this._toggleMode,role:"button",tabindex:"0",title:a},(0,q.u)("span",{"aria-hidden":"true",class:Ae}));return(0,q.u)("ul",{class:pe},d,c,u)}_renderInputForm(){const e=this._conversionFormat||this.conversions.getItemAt(0).format,t=this.formats.findIndex((t=>t.name===e.name)),i=this.id,n=`${i}__${fe}`,o=`${i}__${fe}__header`,s=this._renderOptions(this.formats,!0,t),r={[ye]:this._badInput},{messages:a,messagesCommon:l,headingLevel:d}=this;return(0,q.u)("div",{"aria-labelledby":o,class:be,key:"esri-coordinate-conversion__input-form",role:"search"},(0,q.u)("div",{class:Ce},(0,q.u)("div",{"aria-label":l.back,bind:this,class:this.classes(De,ge),onclick:this._toggleInputVisibility,onkeydown:this._toggleInputVisibility,role:"button",tabindex:"0",title:l.back},this._renderBackIcon()),(0,q.u)(X.X6,{level:d,class:Fe,id:o},a.inputCoordTitle)),(0,q.u)("div",{class:we},(0,q.u)("select",{"aria-controls":n,"aria-label":a.selectFormat,bind:this,class:this.classes(Le,ue),onchange:this._setInputFormat,title:a.selectFormat},s),(0,q.u)("input",{afterCreate:Q.Yo,"aria-labelledby":o,"aria-required":"true",bind:this,class:this.classes(fe,Ie,r),"data-format":e,"data-node-ref":"_coordinateInput",id:n,onkeydown:this._processUserInput,placeholder:a.inputCoordTitle,role:"textbox",spellcheck:!1,title:a.inputCoordTitle,type:"text"})),(0,q.u)("div",{class:we},(0,q.u)("label",{"aria-label":a.goTo},(0,q.u)("input",{bind:this,checked:this._goToEnabled,onclick:this._toggleGoTo,title:a.goTo,type:"checkbox"}),a.goTo),(0,q.u)("button",{"aria-label":a.convert,bind:this,class:this.classes(me,$e),onclick:this._processUserInput,title:a.convert,type:"button"},(0,q.u)("span",{class:_e},a.convert))))}_renderConversionsView(){const e=`${this.id}__${ne}`,t=this._renderPrimaryTools(),i=this._renderOptions(this.formats),n=this.conversions.map(((e,t)=>this._renderConversion(e,t))).toArray(),{messages:o}=this,s=this._expanded?(0,q.u)("div",{class:oe},(0,q.u)("select",{"aria-controls":e,"aria-label":o.addConversion,bind:this,class:this.classes(Le,ce),onchange:this._addConversion,title:o.addConversion},(0,q.u)("option",{disabled:!0,selected:!0,value:""},o.addConversion),i),t):null,r={[re]:this._expanded,[le]:"expand-up"===this.orientation,[ae]:"expand-down"===this.orientation};return(0,q.u)("div",{class:this.classes(de,r),key:"esri-coordinate-conversion__main-view"},(0,q.u)("ul",{"aria-expanded":this._expanded?"true":"false",class:ne,id:e},n),s)}_renderOptions(e,t,i){const n=this.conversions.getItemAt(0);return e.map(((e,o)=>{const s=!(t||!n)&&(n.format.name===e.name||this.conversions.map((e=>e.format.name)).includes(e.name));return(0,q.u)("option",{"aria-label":e.label,"data-format":e,disabled:s,key:e.name,selected:o===i,value:e.label},e.label.toUpperCase())})).toArray()}_renderPopup(){return(0,q.u)("div",{class:te,role:"alert"},this._popupMessage)}_renderClipboardPopup(){return(0,q.u)("div",{class:this.classes(te,ie),role:"alert"},this.messages.copySuccessMessage)}_renderPrimaryTools(){const{messages:e,visibleElements:t}=this,i="live"===this.mode?e.captureMode:e.liveMode,n=t.inputButton&&(0,q.u)("li",{bind:this,class:De,onclick:this._toggleInputVisibility,onkeydown:this._toggleInputVisibility,role:"button",tabindex:"0",title:e.inputCoordTitle},(0,q.u)("span",{"aria-hidden":"true",class:Ze})),o=t.captureButton&&(0,q.u)("li",{bind:this,class:this.classes(De,he),onclick:this._toggleMode,onkeydown:this._toggleMode,role:"button",tabindex:"0",title:i},(0,q.u)("span",{"aria-hidden":"true",class:Ae})),s=t.settingsButton&&(0,q.u)("li",{bind:this,class:De,onclick:this._toggleSettingsVisibility,onkeydown:this._toggleSettingsVisibility,role:"button",tabindex:"0",title:e.settingsTitle},(0,q.u)("span",{"aria-hidden":"true",class:Ge}));return(0,q.u)("ul",{class:pe},n,o,s)}_renderSettings(){const e=this.id,t=`${e}__${Pe}`,i=`${e}__${Pe}__header`,n=`${e}__${Te}`,o=this.formats.filter((e=>e.hasDisplayProperties)),s=this._findSettingsFormat(),r=o.indexOf(s),a=this._renderOptions(o,!0,r),l=s.get("currentPattern"),{messages:d,messagesCommon:c,headingLevel:u}=this;return(0,q.u)("div",{"aria-labelledby":i,class:Se,key:"esri-coordinate-conversion__settings"},(0,q.u)("div",{class:Ce},(0,q.u)("div",{bind:this,class:this.classes(De,ge),onclick:this._toggleSettingsVisibility,onkeydown:this._toggleSettingsVisibility,role:"button",tabindex:"0",title:c.back},this._renderBackIcon()),(0,q.u)(X.X6,{level:u,class:Fe,id:i},d.settingsTitle)),(0,q.u)("div",{class:xe},(0,q.u)("label",{for:t},d.changeCoordinateDisplay),(0,q.u)("select",{"aria-label":d.selectFormat,class:Le,bind:this,onchange:this._setSettingsFormat,title:d.selectFormat},a),(0,q.u)("div",{class:Me},(0,q.u)("input",{"aria-controls":n,bind:this,class:this.classes(Pe,Ie),id:t,oninput:this._updateCurrentPattern,spellcheck:!1,title:d.changeCoordinateDisplay,type:"text",value:l}),(0,q.u)("div",{"aria-controls":t,bind:this,class:De,onclick:this._setDefaultPattern,onkeydown:this._setDefaultPattern,role:"button",tabindex:"0",title:d.defaultPattern},(0,q.u)("span",{"aria-hidden":"true",class:We})))),(0,q.u)("div",{class:xe},(0,q.u)("label",null,c.preview,(0,q.u)("div",{class:Te,id:n,tabindex:"0"},this._previewConversion.displayCoordinate))))}_renderBackIcon(){return(0,q.u)("span",{"aria-hidden":"true",class:(0,Q.dZ)(this.container)?ke:Ve})}_renderTools(e,t,i){const n=t.displayCoordinate&&"capture"===this.mode?this._renderCopyButton(t):null,{messages:o}=this;return(0,q.u)("ul",{class:pe,role:"listitem"},n,(0,q.u)("li",{"aria-controls":i,"aria-label":o.removeConversion,bind:this,class:this.classes(De,ve),"data-index":e,key:`${i}__${De}`,onclick:this._removeConversion,onkeydown:this._removeConversion,tabindex:"0",role:"button",title:o.removeConversion},(0,q.u)("span",{"aria-hidden":"true",class:Ne})))}_copyCoordinateOutput(e){const t=e.target;if(!("createTextRange"in document.body)){const e=window.getSelection(),i=document.createRange();i.selectNodeContents(t),e.removeAllRanges(),e.addRange(i)}document.execCommand("copy")}_removeConversion(e){const t=e.currentTarget["data-index"];this.conversions.removeAt(t)}_setDefaultPattern(e){e.stopPropagation();const t=this._findSettingsFormat();t&&(t.currentPattern=t.get("defaultPattern"))}_toggleExpand(){this._expanded=!this._expanded}_toggleInputVisibility(){this._inputVisible=!this._inputVisible,this._popupVisible&&this._hidePopup(),this._inputVisible?this.viewModel.pause():this.viewModel.resume()}_toggleMode(){this.mode="live"===this.mode?"capture":"live"}_toggleSettingsVisibility(){this._settingsVisible=!this._settingsVisible,this._popupVisible&&this._hidePopup(),this._settingsVisible?(this._setPreviewConversion(),this.viewModel.pause()):this.viewModel.resume()}};(0,n._)([(0,r.B)("viewModel.conversions")],ze.prototype,"conversions",void 0),(0,n._)([(0,r.B)("viewModel.currentLocation")],ze.prototype,"currentLocation",void 0),(0,n._)([(0,r.B)("viewModel.formats")],ze.prototype,"formats",void 0),(0,n._)([(0,r.B)("viewModel.goToOverride")],ze.prototype,"goToOverride",void 0),(0,n._)([(0,l.Cb)()],ze.prototype,"headingLevel",void 0),(0,n._)([(0,l.Cb)({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],ze.prototype,"label",void 0),(0,n._)([(0,l.Cb)(),(0,J.H)("esri/widgets/CoordinateConversion/t9n/CoordinateConversion")],ze.prototype,"messages",void 0),(0,n._)([(0,l.Cb)(),(0,J.H)("esri/t9n/common")],ze.prototype,"messagesCommon",void 0),(0,n._)([(0,r.B)("viewModel.mode")],ze.prototype,"mode",void 0),(0,n._)([(0,l.Cb)()],ze.prototype,"orientation",void 0),(0,n._)([(0,l.Cb)()],ze.prototype,"multipleConversions",null),(0,n._)([(0,r.B)("viewModel.locationSymbol")],ze.prototype,"locationSymbol",void 0),(0,n._)([(0,r.B)("viewModel.storageEnabled")],ze.prototype,"storageEnabled",void 0),(0,n._)([(0,r.B)("viewModel.storageType")],ze.prototype,"storageType",void 0),(0,n._)([(0,r.B)("viewModel.view")],ze.prototype,"view",void 0),(0,n._)([(0,l.Cb)({type:z})],ze.prototype,"viewModel",void 0),(0,n._)([(0,l.Cb)()],ze.prototype,"visibleElements",void 0),(0,n._)([(0,a.p)("visibleElements")],ze.prototype,"castVisibleElements",null),(0,n._)([(0,j.h)()],ze.prototype,"_copyCoordinateOutput",null),(0,n._)([(0,j.h)()],ze.prototype,"_removeConversion",null),(0,n._)([(0,j.h)()],ze.prototype,"_setDefaultPattern",null),(0,n._)([(0,j.h)()],ze.prototype,"_toggleExpand",null),(0,n._)([(0,j.h)()],ze.prototype,"_toggleInputVisibility",null),(0,n._)([(0,j.h)()],ze.prototype,"_toggleMode",null),(0,n._)([(0,j.h)()],ze.prototype,"_toggleSettingsVisibility",null),ze=(0,n._)([(0,d.j)("esri.widgets.CoordinateConversion")],ze);const Xe=ze},43326:(e,t,i)=>{i.d(t,{Z:()=>l});var n=i(27366),o=i(85015),s=i(49861),r=(i(63780),i(93169),i(25243),i(69912));let a=class extends o.Z{constructor(e){super(e),this.format=null,this.position={coordinate:null,location:null}}get displayCoordinate(){const e=this.get("format");return e&&e.getDisplayCoordinate(this.get("position.coordinate"))}};(0,n._)([(0,s.Cb)({readOnly:!0})],a.prototype,"displayCoordinate",null),(0,n._)([(0,s.Cb)()],a.prototype,"format",void 0),(0,n._)([(0,s.Cb)()],a.prototype,"position",void 0),a=(0,n._)([(0,r.j)("esri.widgets.CoordinateConversion.support.Conversion")],a);const l=a},52486:(e,t,i)=>{i.d(t,{Z:()=>w});var n=i(27366),o=(i(59486),i(85015)),s=i(10064),r=i(92026),a=i(49861),l=(i(63780),i(93169),i(25243),i(69912)),d=i(15075),c=i(7882),u=i(78952);function p(e){let t=null;if(e||(e=u.Z.WGS84),e.wkid){if(t=d.e.geogcs(e.wkid),!t)throw new s.Z("coordinate-formatter:invalid-spatial-reference","wkid is not valid")}else{if(!e.wkt)throw new s.Z("coordinate-formatter:invalid-spatial-reference","wkid and wkt are missing");if(t=d.e.fromString(d.f.PE_TYPE_GEOGCS,e.wkt),!t)throw new s.Z("coordinate-formatter:invalid-spatial-reference","wkt is not valid")}return t}function h(e){let t=-1;switch(e){case"automatic":t=d.b.PE_MGRS_STYLE_AUTO;break;case"new-180-in-zone-01":t=d.b.PE_MGRS_STYLE_NEW|d.b.PE_MGRS_180_ZONE_1_PLUS;break;case"new-180-in-zone-60":t=d.b.PE_MGRS_STYLE_NEW;break;case"old-180-in-zone-01":t=d.b.PE_MGRS_STYLE_OLD|d.b.PE_MGRS_180_ZONE_1_PLUS;break;case"old-180-in-zone-60":t=d.b.PE_MGRS_STYLE_OLD}return t}function v(e){let t=-1;switch(e){case"latitude-band-indicators":t=d.d.PE_UTM_OPTS_NONE;break;case"north-south-indicators":t=d.d.PE_UTM_OPTS_NS}return t}var g=i(79803),m=i(92975),_=i(81753),f=i(68260);let b=class extends o.Z{constructor(e){super(e),this.conversionInfo=null,this.coordinateSegments=null,this.defaultPattern=null,this.name=null,this.viewModel=null}get currentPattern(){return this._get("currentPattern")||this._get("defaultPattern")}set currentPattern(e){this._set("currentPattern",e)}get label(){return this._get("label")||this.name}set label(e){this._set("label",e),this.notifyChange("label")}get hasDisplayProperties(){return!(!this.defaultPattern||!this.coordinateSegments)}get spatialReference(){const e=this.get("conversionInfo.spatialReference")||u.Z.WGS84;return"basemap"===this.name?this._viewSpatialReference:e}set spatialReference(e){void 0===e&&this._clearOverride("spatialReference"),this._override("spatialReference",e)}get _viewSpatialReference(){return this.get("viewModel.view.spatialReference")||u.Z.WGS84}get _additionalCharactersPattern(){const e=this.get("coordinateSegments");if(!e)return null;const t=e.map((e=>e.alias)),i=this.currentPattern.replace(new RegExp(`["nsew${t.join()}]`,"gi"),"").replace(/\ /g,"");return new RegExp(`[${i}]`,"g")}get test(){return{additionalCharactersPattern:this._additionalCharactersPattern}}convert(e){if(!(0,f.J$)(e))return Promise.reject(new s.Z("format:invalid-point","Could not convert invalid point.",{point:e}));const t=this.get("conversionInfo.convert");return t?Promise.resolve().then((()=>t(e))):this._project(e,this.spatialReference).then((e=>this._getCoordinate(e).then((t=>({location:e,coordinate:t})))))}getConversionStrategy(){const e=this._viewSpatialReference;return this.get("conversionInfo.convert")||this.get("viewModel.formatterAvailable")||"xy"===this.name&&(e.isWebMercator||e.isWGS84)||"basemap"===this.name?"client":"server"}getDisplayCoordinate(e){if(!e)return null;if(!this.coordinateSegments||!this.currentPattern)return e;let t=this.currentPattern;const i=this._getSegmentMatches(e,!1);for(let n=this.coordinateSegments.length-1;n>=0;n--){const e=this.coordinateSegments[n];t=t.replace(e.alias,i[n])}return t}parseUserInput(e){let t=this.defaultPattern.replace(this._additionalCharactersPattern,"");e=e.replace(this._additionalCharactersPattern,"");const i=this._getSegmentMatches(e,!0);for(let n=this.coordinateSegments.length-1;n>=0;n--){const e=this.coordinateSegments[n];t=t.replace(e.alias,i[n])}return t}_getSegmentMatches(e,t){const i=[];for(let n=0;n<this.coordinateSegments.length;n++){const o=this.coordinateSegments[n],s=e.match(o.searchPattern);if(!s){i.push("");continue}let r=s[0];if(e=e.replace(r,"").trim(),o.substitution){const e=t?o.substitution.input(r):o.substitution.output(r);e&&(r=e)}i.push(r)}return i}reverseConvert(e){const t=this.parseUserInput(e),i=this.get("conversionInfo.reverseConvert");let n;if(i)n=i(t);else if("xy"===this.name||"basemap"===this.name)n=(0,f.mv)(t,this.spatialReference);else if(this.viewModel.formatterAvailable)switch(this.name){case"dd":case"ddm":case"dms":n=function(e,t){const i=[];e=(e=(e=e.replace(/[\u00B0\u00BA]/g,"^")).replace(/\u2032/g,"'")).replace(/\u2033/g,'"');const n=p(t);return d.P.dmsToGeog(n,1,[e],i)?new c.Z(i[0][0],i[0][1],t||u.Z.WGS84):null}(t,this.spatialReference);break;case"mgrs":{const e="automatic";n=function(e,t,i){const n=[],o=h(i);if(-1===o)return console.warn(`invalid conversionMode: ${i}`),null;const s=p(t);return d.b.mgrsToGeogExtended(s,1,[e],o,n)?new c.Z(n[0][0],n[0][1],t||u.Z.WGS84):null}(t,this.spatialReference,e);break}case"utm":{const e="latitude-band-indicators";n=function(e,t,i){const n=[],o=v(i);if(-1===o)return console.warn(`invalid conversionMode: ${i}`),null;const s=p(t);return d.d.utmToGeog(s,1,[e],o,n)?new c.Z(n[0][0],n[0][1],t||u.Z.WGS84):null}(t,this.spatialReference,e);break}case"usng":n=function(e,t){const i=[];!t&&/\(.+27/.test(e)&&(t=u.Z.GCS_NAD_1927);const n=p(t);return d.c.usngToGeog(n,1,[e],i)?new c.Z(i[0][0],i[0][1],t||u.Z.WGS84):null}(t,this.spatialReference);break;default:n=null}return n?this._project(n,this._viewSpatialReference):Promise.reject(new s.Z("format:invalid-input","Could not parse input into point.",{userInput:e}))}_getCoordinate(e){const t=this.get("viewModel.view.scale");if(!(0,f.J$)(e))return Promise.reject(new s.Z("format:invalid-point","Could not transform invalid point into coordinate.",{point:e}));if(this.get("viewModel.formatterAvailable")||"basemap"===this.name||"xy"===this.name)switch(this.name){case"dd":case"ddm":case"dms":{const i=(0,f.GG)(t);return Promise.resolve(function(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const n=[[e.x,e.y]],o=[],s=p(e.spatialReference);let r=0;switch(t){case"dd":r=d.P.geogToDd(s,1,n,i,o);break;case"ddm":r=d.P.geogToDdm(s,1,n,i,o);break;case"dms":r=d.P.geogToDms(s,1,n,i,o);break;default:return console.warn(`invalid format: ${t}`),null}return r?o[0]:null}(e,this.name,i))}case"mgrs":{const t=!1,i=5,n="automatic";return Promise.resolve(function(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const o=[[e.x,e.y]],s=[],r=p(e.spatialReference);let a=h(t);return-1===a?(console.warn(`invalid conversionMode: ${t}`),null):(n&&(a|=d.b.PE_MGRS_ADD_SPACES),d.b.geogToMgrsExtended(r,1,o,i,!1,a,s)?s[0]:null)}(e,n,i,t))}case"usng":{const t=!1,i=5;return Promise.resolve(function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const n=[[e.x,e.y]],o=[],s=p(e.spatialReference);return d.c.geogToUsng(s,1,n,t,!1,i,o)?o[0]:null}(e,i,t))}case"utm":{const t=!0,i="latitude-band-indicators";return Promise.resolve(function(e,t){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const n=[[e.x,e.y]],o=[],s=p(e.spatialReference);let r=v(t);return-1===r?(console.warn(`invalid conversionMode: ${t}`),null):(i&&(r|=d.d.PE_UTM_OPTS_ADD_SPACES),d.d.geogToUtm(s,1,n,r,o)?o[0]:null)}(e,i,t))}default:return Promise.resolve((0,f.zq)(e,t))}return Promise.resolve((0,f.zq)(e,t))}_project(e,t){if((0,m.fS)(e.spatialReference,t)||!t)return Promise.resolve(e);if(this.viewModel?.formatterAvailable&&(0,g.kR)())return Promise.resolve((0,g.iV)(e,t));if(!this.viewModel?.formatterAvailable){const i=(0,_.iV)(e,t);if((0,r.pC)(i))return Promise.resolve(i)}return null}};(0,n._)([(0,a.Cb)()],b.prototype,"conversionInfo",void 0),(0,n._)([(0,a.Cb)()],b.prototype,"coordinateSegments",void 0),(0,n._)([(0,a.Cb)()],b.prototype,"currentPattern",null),(0,n._)([(0,a.Cb)()],b.prototype,"label",null),(0,n._)([(0,a.Cb)()],b.prototype,"defaultPattern",void 0),(0,n._)([(0,a.Cb)({readOnly:!0})],b.prototype,"hasDisplayProperties",null),(0,n._)([(0,a.Cb)()],b.prototype,"name",void 0),(0,n._)([(0,a.Cb)({type:u.Z})],b.prototype,"spatialReference",null),(0,n._)([(0,a.Cb)()],b.prototype,"viewModel",void 0),(0,n._)([(0,a.Cb)({readOnly:!0})],b.prototype,"_viewSpatialReference",null),(0,n._)([(0,a.Cb)({readOnly:!0})],b.prototype,"_additionalCharactersPattern",null),b=(0,n._)([(0,l.j)("esri.widgets.CoordinateConversion.support.Format")],b);const w=b},68260:(e,t,i)=>{i.d(t,{GG:()=>r,J$:()=>d,hf:()=>u,mv:()=>a,zq:()=>c});i(59486);var n=i(7882),o=i(78952);function s(e,t){const i=r(t);return[e[0].toFixed(i),e[1].toFixed(i)]}function r(e){return e>=500?6:e<500&&e>=50?7:e<50&&e>=5?8:9}function a(e,t){const i=e.includes(",")?",":" ",[s,r,a]=e.split(i).map((e=>{const t=e.trim();return t?Number(t):null}));if(!l(s)||!l(r))return null;const d=new n.Z({x:s,y:r,spatialReference:t||o.Z.WGS84});return a&&(d.z=a,d.hasZ=!0),d}function l(e){return"number"==typeof e&&isFinite(e)}function d(e){return e&&l(e.x)&&l(e.y)}function c(e,t){if(e.spatialReference.isGeographic&&t){const[i,n]=s([e.x,e.y],t);return`${i}, ${n}`}return`${e.x.toFixed(3)}, ${e.y.toFixed(3)}`}function u(e){return"dd"===e||"dms"===e||"ddm"===e||"mgrs"===e||"usng"===e||"utm"===e}},94658:(e,t,i)=>{i.d(t,{Z:()=>w});var n=i(27366),o=(i(93169),i(66978)),s=i(94172),r=i(8025),a=(i(63780),i(25243),i(49861)),l=i(69912),d=i(69407),c=i(85015),u=i(68860),p=i(77671);let h=class extends c.Z{constructor(e){super(e),this.activeTool=null,this.activeViewModel=null,this.view=null}get areaUnit(){return this.defaultUnit}set areaUnit(e){void 0!==e?this._override("areaUnit",e):this._clearOverride("areaUnit")}get linearUnit(){return this.defaultUnit}set linearUnit(e){void 0!==e?this._override("linearUnit",e):this._clearOverride("linearUnit")}get state(){const{activeViewModel:e}=this;return e?e.state:"disabled"}};(0,n._)([(0,a.Cb)({type:["area","distance","direct-line"]})],h.prototype,"activeTool",void 0),(0,n._)([(0,a.Cb)()],h.prototype,"activeViewModel",void 0),(0,n._)([(0,a.Cb)({type:u.fN})],h.prototype,"areaUnit",null),(0,n._)([(0,a.Cb)(p.Y)],h.prototype,"defaultUnit",void 0),(0,n._)([(0,a.Cb)({type:u.oD})],h.prototype,"linearUnit",null),(0,n._)([(0,a.Cb)({readOnly:!0})],h.prototype,"state",null),(0,n._)([(0,a.Cb)()],h.prototype,"view",void 0),h=(0,n._)([(0,l.j)("esri.widgets.Measurement.MeasurementViewModel")],h);const v=h;i(80975);var g=i(80532),m=i(67005);const _="esri-measurement",f="esri-icon-measure";let b=class extends d.Z{constructor(e,t){super(e,t),this._widgets=new Map,this.activeTool=null,this.activeWidget=null,this.areaUnit=null,this.iconClass=f,this.label=void 0,this.linearUnit=null,this.messages=null,this.view=null,this.viewModel=new v}initialize(){this.activeWidget&&this.viewModel.set("activeViewModel",this.activeWidget.viewModel),this.view&&this.activeTool&&this._getActiveWidget().then((e=>{this._set("activeWidget",e)})),this.own([(0,s.YP)((()=>[this.view,this.activeTool]),(async()=>{this._set("activeWidget",await this._getActiveWidget())})),(0,s.YP)((()=>this.activeWidget),((e,t)=>{this.viewModel.set("activeViewModel",e?e.viewModel:null),t&&(t.visible=!1)})),(0,s.YP)((()=>[this.areaUnit,this.linearUnit,this.uiStrings]),(()=>this._updateSubWidgetProperties()))])}destroy(){this._destroyWidgets()}render(){const{activeWidget:e}=this,t=e&&!e.destroyed?e.render():null;return(0,m.u)("div",{class:_},t)}clear(){this.activeTool=null,this._destroyWidgets()}startMeasurement(){const{activeViewModel:e}=this.viewModel;e&&(0,o.R8)(e.start())}async _createWidget(e){const{areaUnit:t,linearUnit:n,view:o}=this;switch(e){case"area":{const{type:n}=o;switch(n){case"2d":return new(0,(await Promise.all([i.e(8995),i.e(5592),i.e(3109),i.e(7111),i.e(3798),i.e(9014),i.e(1009),i.e(5277),i.e(2841),i.e(8597),i.e(3406),i.e(4653),i.e(6455),i.e(5192),i.e(9058),i.e(2927),i.e(4928),i.e(4715),i.e(239),i.e(5652),i.e(3942),i.e(6828),i.e(5002),i.e(5710),i.e(1129),i.e(8431),i.e(6539),i.e(1421)]).then(i.bind(i,41421))).default)({view:o,unit:t,uiStrings:this._createUIStringsForWidget(e)});case"3d":return new(0,(await Promise.all([i.e(8995),i.e(5592),i.e(3109),i.e(7111),i.e(3798),i.e(9014),i.e(1009),i.e(1378),i.e(5277),i.e(2841),i.e(8597),i.e(3406),i.e(4653),i.e(6455),i.e(5192),i.e(9058),i.e(2927),i.e(4928),i.e(4715),i.e(239),i.e(5652),i.e(3942),i.e(6828),i.e(5158),i.e(5002),i.e(5710),i.e(5957),i.e(5269),i.e(4567),i.e(2110),i.e(9491)]).then(i.bind(i,96211))).default)({view:o,unit:t,uiStrings:this._createUIStringsForWidget(e)});default:return null}}case"distance":return new(0,(await Promise.all([i.e(8995),i.e(5592),i.e(3109),i.e(7111),i.e(3798),i.e(9014),i.e(1009),i.e(5277),i.e(2841),i.e(8597),i.e(3406),i.e(4653),i.e(6455),i.e(5192),i.e(9058),i.e(2927),i.e(4928),i.e(4715),i.e(239),i.e(5652),i.e(3942),i.e(6828),i.e(5002),i.e(5710),i.e(1129),i.e(8431),i.e(6539),i.e(5107)]).then(i.bind(i,35107))).default)({view:o,unit:n,uiStrings:this._createUIStringsForWidget(e)});case"direct-line":return new(0,(await Promise.all([i.e(8995),i.e(5592),i.e(3109),i.e(7111),i.e(3798),i.e(9014),i.e(1009),i.e(1378),i.e(5277),i.e(2841),i.e(8597),i.e(3406),i.e(4653),i.e(6455),i.e(5192),i.e(9058),i.e(2927),i.e(4928),i.e(4715),i.e(239),i.e(5652),i.e(3942),i.e(6828),i.e(5158),i.e(5002),i.e(5710),i.e(5957),i.e(5269),i.e(4567),i.e(2110),i.e(7310)]).then(i.bind(i,47899))).default)({view:o,unit:n,uiStrings:this._createUIStringsForWidget(e)});default:return null}}_destroyWidgets(){this._widgets.forEach((e=>e.destroy())),this._widgets.clear()}async _getActiveWidget(){const{activeTool:e,view:t}=this;if(!t||!e)return null;let i=null;if(this._widgets.has(e))i=this._widgets.get(e),i.visible=!0;else{if(i=await this._createWidget(e),!i)return null;await i.viewModel.start(),this._widgets.set(e,i)}return i}_createUIStringsForWidget(e){if(!this.uiStrings)return null;const t=e+"-"+this.view.type;return this.uiStrings[t]}_updateSubWidgetProperties(){this._widgets.forEach(((e,t)=>{const{areaUnit:i,linearUnit:n}=this;e.unit=function(e){return e&&("esri.widgets.AreaMeasurement2D"===e.declaredClass||"esri.widgets.AreaMeasurement3D"===e.declaredClass)}(e)?i:n,e.uiStrings=this._createUIStringsForWidget(t)}))}};(0,n._)([(0,r.B)("viewModel.activeTool")],b.prototype,"activeTool",void 0),(0,n._)([(0,a.Cb)({readOnly:!0})],b.prototype,"activeWidget",void 0),(0,n._)([(0,r.B)("viewModel.areaUnit")],b.prototype,"areaUnit",void 0),(0,n._)([(0,a.Cb)()],b.prototype,"iconClass",void 0),(0,n._)([(0,a.Cb)({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],b.prototype,"label",void 0),(0,n._)([(0,r.B)("viewModel.linearUnit")],b.prototype,"linearUnit",void 0),(0,n._)([(0,a.Cb)(),(0,g.H)("esri/widgets/Measurement/t9n/Measurement")],b.prototype,"messages",void 0),(0,n._)([(0,a.Cb)()],b.prototype,"uiStrings",void 0),(0,n._)([(0,r.B)("viewModel.view")],b.prototype,"view",void 0),(0,n._)([(0,a.Cb)({type:v})],b.prototype,"viewModel",void 0),b=(0,n._)([(0,l.j)("esri.widgets.Measurement")],b);const w=b},96919:(e,t,i)=>{i.d(t,{MJ:()=>d,X6:()=>a});var n=i(16889),o=i(80975),s=i(67005);const r="esri-widget__heading";function a(e,t){const i=l(e.level),n=`h${i}`;return delete e.level,(0,s.u)(n,{...e,class:(0,o.Sh)(r,e.class),role:"heading","aria-level":String(i)},t)}function l(e){return(0,n.uZ)(Math.ceil(e),1,6)}function d(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return l(e+t)}},78088:(e,t,i)=>{i.d(t,{h:()=>o});var n=i(80975);function o(){return function(e,t){if(!e[t])throw new TypeError(`Cannot auto bind undefined function '${t}'`);return{value:r(e[t])}}}function s(e){const{type:t}=e;return e instanceof KeyboardEvent||"keyup"===t||"keydown"===t||"keypress"===t}function r(e){return function(t){for(var i=arguments.length,o=new Array(i>1?i-1:0),r=1;r<i;r++)o[r-1]=arguments[r];s(t)?(0,n.pf)(t.key)&&(t.preventDefault(),t.stopPropagation(),t.target.click()):e.call(this,t,...o)}}}}]);
//# sourceMappingURL=5930.9fe48e34.chunk.js.map