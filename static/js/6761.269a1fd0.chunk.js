"use strict";(globalThis.webpackChunkimaps=globalThis.webpackChunkimaps||[]).push([[6761],{11873:(t,e,n)=>{function r(){return[1,0,0,0,1,0,0,0,1]}function i(t,e){return new Float64Array(t,e,9)}n.d(e,{a:()=>i,c:()=>r});Object.freeze(Object.defineProperty({__proto__:null,create:r,clone:function(t){return[t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8]]},fromValues:function(t,e,n,r,i,o,s,c,u){return[t,e,n,r,i,o,s,c,u]},createView:i},Symbol.toStringTag,{value:"Module"}))},81949:(t,e,n)=>{function r(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function i(t){return[t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15]]}function o(t,e,n,r,i,o,s,c,u,a,f,l,h,d,m,g){return[t,e,n,r,i,o,s,c,u,a,f,l,h,d,m,g]}function s(t,e){return new Float64Array(t,e,16)}n.d(e,{I:()=>c,a:()=>s,b:()=>i,c:()=>r,f:()=>o});const c=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];Object.freeze(Object.defineProperty({__proto__:null,create:r,clone:i,fromValues:o,createView:s,IDENTITY:c},Symbol.toStringTag,{value:"Module"}))},98131:(t,e,n)=>{function r(){return[0,0,0,1]}function i(t){return[t[0],t[1],t[2],t[3]]}function o(t,e){return new Float64Array(t,e,4)}n.d(e,{I:()=>s,a:()=>r,b:()=>i,c:()=>o});const s=[0,0,0,1];Object.freeze(Object.defineProperty({__proto__:null,create:r,clone:i,fromValues:function(t,e,n,r){return[t,e,n,r]},createView:o,IDENTITY:s},Symbol.toStringTag,{value:"Module"}))},23470:(t,e,n)=>{n.d(e,{a:()=>p,b:()=>y,c:()=>b,d:()=>M,g:()=>P,i:()=>S,m:()=>U,w:()=>_});n(93169);var r=n(32718),i=n(16889),o=n(92026),s=n(14226),c=n(11186),u=n(71353),a=n(90045),f=n(67077),l=n(14320),h=n(40885),d=n(40927),m=n(11185);const g=r.Z.getLogger("esri.geometry.support.sphere");function b(){return(0,f.c)()}function y(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:b();return(0,a.c)(e,t)}function _(t){return t}function p(t){t[0]=t[1]=t[2]=t[3]=0}function M(t){return t[3]}function P(t){return t}function w(t,e,n){if((0,o.Wi)(e))return!1;const{origin:r,direction:i}=e,s=E;s[0]=r[0]-t[0],s[1]=r[1]-t[1],s[2]=r[2]-t[2];const c=i[0]*i[0]+i[1]*i[1]+i[2]*i[2],u=2*(i[0]*s[0]+i[1]*s[1]+i[2]*s[2]),a=u*u-4*c*(s[0]*s[0]+s[1]*s[1]+s[2]*s[2]-t[3]*t[3]);if(a<0)return!1;const f=Math.sqrt(a);let l=(-u-f)/(2*c);const h=(-u+f)/(2*c);return(l<0||h<l&&h>0)&&(l=h),!(l<0)&&(n&&(n[0]=r[0]+i[0]*l,n[1]=r[1]+i[1]*l,n[2]=r[2]+i[2]*l),!0)}const E=(0,u.c)();function S(t,e){return w(t,e,null)}function T(t,e,n){const r=m.WM.get(),i=m.MP.get();(0,c.f)(r,e.origin,e.direction);const o=M(t);(0,c.f)(n,r,e.origin),(0,c.g)(n,n,1/(0,c.l)(n)*o);const u=A(t,e.origin),a=(0,d.EU)(e.origin,n);return(0,s.d)(i,a+u,r),(0,c.m)(n,n,i),n}function I(t,e,n){const r=(0,c.b)(m.WM.get(),e,t),i=(0,c.g)(m.WM.get(),r,t[3]/(0,c.l)(r));return(0,c.a)(n,i,t)}function A(t,e){const n=(0,c.b)(m.WM.get(),e,t),r=(0,c.l)(n),o=M(t),s=o+Math.abs(o-r);return(0,i.ZF)(o/s)}const v=(0,u.c)();function O(t,e,n,r){const o=(0,c.b)(v,e,t);switch(n){case l.R.X:{const t=(0,i.jE)(o,v)[2];return(0,c.s)(r,-Math.sin(t),Math.cos(t),0)}case l.R.Y:{const t=(0,i.jE)(o,v),e=t[1],n=t[2],s=Math.sin(e);return(0,c.s)(r,-s*Math.cos(n),-s*Math.sin(n),Math.cos(e))}case l.R.Z:return(0,c.n)(r,o);default:return}}function R(t,e){const n=(0,c.b)(B,e,t);return(0,c.l)(n)-t[3]}function U(t,e){const n=(0,c.d)(t,e),r=M(t);return n<=r*r}const B=(0,u.c)(),F=b();Object.freeze(Object.defineProperty({__proto__:null,create:b,copy:y,fromCenterAndRadius:function(t,e){return(0,f.f)(t[0],t[1],t[2],e)},wrap:_,clear:p,fromRadius:function(t,e){return t[0]=t[1]=t[2]=0,t[3]=e,t},getRadius:M,getCenter:P,fromValues:function(t,e,n,r){return(0,f.f)(t,e,n,r)},elevate:function(t,e,n){return t!==n&&(0,c.c)(n,t),n[3]=t[3]+e,n},setExtent:function(t,e,n){return g.error("sphere.setExtent is not yet supported"),t===n?n:y(t,n)},intersectRay:w,intersectsRay:S,intersectRayClosestSilhouette:function(t,e,n){if(w(t,e,n))return n;const r=T(t,e,m.WM.get());return(0,c.a)(n,e.origin,(0,c.g)(m.WM.get(),e.direction,(0,c.i)(e.origin,r)/(0,c.l)(e.direction))),n},closestPointOnSilhouette:T,closestPoint:function(t,e,n){return w(t,e,n)?n:((0,h.JI)(e,t,n),I(t,n,n))},projectPoint:I,distanceToSilhouette:function(t,e){const n=(0,c.b)(m.WM.get(),e,t),r=(0,c.p)(n),i=t[3]*t[3];return Math.sqrt(Math.abs(r-i))},angleToSilhouette:A,axisAt:O,altitudeAt:R,setAltitudeAt:function(t,e,n,r){const i=R(t,e),o=O(t,e,l.R.Z,B),s=(0,c.g)(B,o,n-i);return(0,c.a)(r,e,s)},containsPoint:U,tmpSphere:F},Symbol.toStringTag,{value:"Module"}))},6394:(t,e,n)=>{function r(){return[0,0]}function i(t){return[t[0],t[1]]}function o(t,e){return[t,e]}function s(t){const e=[0,0],n=Math.min(2,t.length);for(let r=0;r<n;++r)e[r]=t[r];return e}function c(t,e){return new Float64Array(t,e,2)}function u(){return[0,0]}function a(){return o(1,1)}function f(){return o(1,0)}function l(){return o(0,1)}n.d(e,{O:()=>d,Z:()=>h,a:()=>r,b:()=>s,c:()=>c,d:()=>i,f:()=>o});const h=[0,0],d=a(),m=f(),g=l();Object.freeze(Object.defineProperty({__proto__:null,create:r,clone:i,fromValues:o,fromArray:s,createView:c,zeros:u,ones:a,unitX:f,unitY:l,ZEROS:h,ONES:d,UNIT_X:m,UNIT_Y:g},Symbol.toStringTag,{value:"Module"}))},67077:(t,e,n)=>{function r(){return[0,0,0,0]}function i(t){return[t[0],t[1],t[2],t[3]]}function o(t,e,n,r){return[t,e,n,r]}function s(t){const e=[0,0,0,0],n=Math.min(4,t.length);for(let r=0;r<n;++r)e[r]=t[r];return e}function c(t,e){return new Float64Array(t,e,4)}function u(){return[0,0,0,0]}function a(){return o(1,1,1,1)}function f(){return o(1,0,0,0)}function l(){return o(0,1,0,0)}function h(){return o(0,0,1,0)}function d(){return o(0,0,0,1)}n.d(e,{O:()=>g,Z:()=>m,a:()=>c,b:()=>s,c:()=>r,d:()=>i,f:()=>o});const m=[0,0,0,0],g=a(),b=f(),y=l(),_=h(),p=d();Object.freeze(Object.defineProperty({__proto__:null,create:r,clone:i,fromValues:o,fromArray:s,createView:c,zeros:u,ones:a,unitX:f,unitY:l,unitZ:h,unitW:d,ZEROS:m,ONES:g,UNIT_X:b,UNIT_Y:y,UNIT_Z:_,UNIT_W:p},Symbol.toStringTag,{value:"Module"}))},21530:(t,e,n)=>{n.d(e,{x:()=>i});var r=n(70758);class i{constructor(t){this.allocator=t,this._items=[],this._itemsPtr=0,this._grow()}get(){return 0===this._itemsPtr&&(0,r.Y)((()=>this._reset())),this._itemsPtr===this._items.length&&this._grow(),this._items[this._itemsPtr++]}_reset(){const t=Math.min(3*Math.max(8,this._itemsPtr),this._itemsPtr+3*o);this._items.length=Math.min(t,this._items.length),this._itemsPtr=0}_grow(){for(let t=0;t<Math.max(8,Math.min(this._items.length,o));t++)this._items.push(this.allocator())}}const o=1024},59896:(t,e,n)=>{function r(t){return 32+t.length}function i(t){if(!t)return 0;let e=32;for(const n in t)if(t.hasOwnProperty(n)){const i=t[n];switch(typeof i){case"string":e+=r(i);break;case"number":e+=16;break;case"boolean":e+=4}}return e}function o(t,e){return 32+t.length*e}var s;n.d(e,{Y8:()=>s,do:()=>o,f2:()=>i}),function(t){t[t.KILOBYTES=1024]="KILOBYTES",t[t.MEGABYTES=1048576]="MEGABYTES",t[t.GIGABYTES=1073741824]="GIGABYTES"}(s||(s={}))},14320:(t,e,n)=>{var r;n.d(e,{R:()=>r}),function(t){t[t.X=0]="X",t[t.Y=1]="Y",t[t.Z=2]="Z"}(r||(r={}))},40885:(t,e,n)=>{n.d(e,{JG:()=>a,JI:()=>d,Jk:()=>h,Ue:()=>c,re:()=>u,zk:()=>f});n(63780);var r=n(21530),i=n(11186),o=n(71353),s=n(11185);function c(t){return t?{origin:(0,o.a)(t.origin),direction:(0,o.a)(t.direction)}:{origin:(0,o.c)(),direction:(0,o.c)()}}function u(t,e){const n=m.get();return n.origin=t,n.direction=e,n}function a(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:c();return l(t.origin,t.direction,e)}function f(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:c();return(0,i.c)(n.origin,t),(0,i.b)(n.direction,e,t),n}function l(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:c();return(0,i.c)(n.origin,t),(0,i.c)(n.direction,e),n}function h(t,e){const n=(0,i.f)(s.WM.get(),(0,i.n)(s.WM.get(),t.direction),(0,i.b)(s.WM.get(),e,t.origin));return(0,i.e)(n,n)}function d(t,e,n){const r=(0,i.e)(t.direction,(0,i.b)(n,e,t.origin));return(0,i.a)(n,t.origin,(0,i.g)(n,t.direction,r)),n}const m=new r.x((function(){return{origin:null,direction:null}}))},40927:(t,e,n)=>{n.d(e,{EU:()=>u,SR:()=>c,cp:()=>a,nF:()=>s});var r=n(16889),i=n(11186),o=n(71353);function s(t,e,n){const r=(0,i.e)(t,e)/(0,i.e)(t,t);return(0,i.g)(n,t,r)}function c(t,e){return(0,i.e)(t,e)/(0,i.l)(t)}function u(t,e){const n=(0,i.e)(t,e)/((0,i.l)(t)*(0,i.l)(e));return-(0,r.ZF)(n)}function a(t,e,n){(0,i.n)(f,t),(0,i.n)(l,e);const o=(0,i.e)(f,l),s=(0,r.ZF)(o),c=(0,i.f)(f,f,l);return(0,i.e)(c,n)<0?2*Math.PI-s:s}const f=(0,o.c)(),l=(0,o.c)()},11185:(t,e,n)=>{n.d(e,{MP:()=>b,vD:()=>y,qW:()=>d,WM:()=>m,o6:()=>g});var r=n(59896),i=n(70758),o=n(11873),s=n(81949),c=n(98131),u=n(6394),a=n(71353),f=n(67077);class l{constructor(t,e,n){this.itemByteSize=t,this.itemCreate=e,this._buffers=new Array,this._items=new Array,this._itemsPtr=0,this._itemsPerBuffer=Math.ceil(n/this.itemByteSize)}get(){0===this._itemsPtr&&(0,i.Y)((()=>this._reset()));const t=Math.floor(this._itemsPtr/this._itemsPerBuffer);for(;this._buffers.length<=t;){const t=new ArrayBuffer(this._itemsPerBuffer*this.itemByteSize);for(let e=0;e<this._itemsPerBuffer;++e)this._items.push(this.itemCreate(t,e*this.itemByteSize));this._buffers.push(t)}return this._items[this._itemsPtr++]}_reset(){const t=2*(Math.floor(this._itemsPtr/this._itemsPerBuffer)+1);for(;this._buffers.length>t;)this._buffers.pop(),this._items.length=this._buffers.length*this._itemsPerBuffer;this._itemsPtr=0}static createVec2f64(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:h;return new l(16,u.c,t)}static createVec3f64(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:h;return new l(24,a.b,t)}static createVec4f64(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:h;return new l(32,f.a,t)}static createMat3f64(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:h;return new l(72,o.a,t)}static createMat4f64(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:h;return new l(128,s.a,t)}static createQuatf64(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:h;return new l(32,c.c,t)}get test(){return{size:this._buffers.length*this._itemsPerBuffer*this.itemByteSize}}}const h=4*r.Y8.KILOBYTES,d=l.createVec2f64(),m=l.createVec3f64(),g=l.createVec4f64(),b=(l.createMat3f64(),l.createMat4f64()),y=l.createQuatf64()},6761:(t,e,n)=>{n.r(e),n.d(e,{destroyContext:()=>M,dracoDecompressPointCloudData:()=>b,filterObbsForModifications:()=>y,filterObbsForModificationsSync:()=>I,initialize:()=>O,interpretObbModificationResults:()=>T,process:()=>g,setLegacySchema:()=>p,setModifications:()=>_,setModificationsSync:()=>E,test:()=>R});var r,i,o=n(92026),s=n(18722);!function(t){t[t.None=0]="None",t[t.Int16=1]="Int16",t[t.Int32=2]="Int32"}(r||(r={})),function(t){t[t.Replace=0]="Replace",t[t.Outside=1]="Outside",t[t.Inside=2]="Inside",t[t.Finished=3]="Finished"}(i||(i={}));var c=n(65905);function u(t){return(0,c.V)(`esri/libs/i3s/${t}`)}let a;var f,l,h,d,m;n(23470);!function(t){t[t.Unmodified=0]="Unmodified",t[t.Culled=1]="Culled",t[t.NotChecked=2]="NotChecked"}(f||(f={})),function(t){t[t.Unmodified=0]="Unmodified",t[t.PotentiallyModified=1]="PotentiallyModified",t[t.Culled=2]="Culled",t[t.Unknown=3]="Unknown",t[t.NotChecked=4]="NotChecked"}(l||(l={}));!function(t){t[t.Unknown=0]="Unknown",t[t.Uncached=1]="Uncached",t[t.Cached=2]="Cached"}(h||(h={})),function(t){t[t.None=0]="None",t[t.MaxScreenThreshold=1]="MaxScreenThreshold",t[t.ScreenSpaceRelative=2]="ScreenSpaceRelative",t[t.RemovedFeatureDiameter=3]="RemovedFeatureDiameter",t[t.DistanceRangeFromDefaultCamera=4]="DistanceRangeFromDefaultCamera"}(d||(d={})),function(t){t[t.Hole=0]="Hole",t[t.Leaf=1]="Leaf"}(m||(m={}));async function g(t){await O();const e=[t.geometryBuffer];return{result:S(t,e),transferList:e}}async function b(t){await O();const e=[t.geometryBuffer],{geometryBuffer:n}=t,r=n.byteLength,i=w._malloc(r),o=new Uint8Array(w.HEAPU8.buffer,i,r);o.set(new Uint8Array(n));const c=w.dracoDecompressPointCloudData(i,o.byteLength);if(w._free(i),c.error.length>0)throw`i3s.wasm: ${c.error}`;const u=c.featureIds?.length>0?(0,s.tP)(c.featureIds):null,a=(0,s.tP)(c.positions);return u&&e.push(u.buffer),e.push(a.buffer),{result:{positions:a,featureIds:u},transferList:e}}async function y(t){await O(),I(t);const e={buffer:t.buffer};return{result:e,transferList:[e.buffer]}}async function _(t){await O(),E(t)}async function p(t){await O(),w.setLegacySchema(t.context,t.jsonSchema)}function M(t){A(t)}let P,w;function E(t){const e=t.modifications,n=w._malloc(8*e.length),r=new Float64Array(w.HEAPU8.buffer,n,e.length);for(let i=0;i<e.length;++i)r[i]=e[i];w.setModifications(t.context,n,e.length,t.isGeodetic),w._free(n)}function S(t,e){if(!w)return null;const{context:n,localOrigin:i,globalTrafo:c,mbs:u,obb:a,elevationOffset:f,geometryBuffer:l,geometryDescriptor:h,indexToVertexProjector:d,vertexToRenderProjector:m}=t,g=w._malloc(l.byteLength),b=w._malloc(33*Float64Array.BYTES_PER_ELEMENT),y=new Uint8Array(w.HEAPU8.buffer,g,l.byteLength);y.set(new Uint8Array(l));const _=new Float64Array(w.HEAPU8.buffer,b,33);v(_,i);let p=_.byteOffset+3*_.BYTES_PER_ELEMENT,M=new Float64Array(_.buffer,p);v(M,c),p+=16*_.BYTES_PER_ELEMENT,M=new Float64Array(_.buffer,p),v(M,u),p+=4*_.BYTES_PER_ELEMENT,(0,o.pC)(a)&&(M=new Float64Array(_.buffer,p),v(M,a.center),p+=3*_.BYTES_PER_ELEMENT,M=new Float64Array(_.buffer,p),v(M,a.halfSize),p+=3*_.BYTES_PER_ELEMENT,M=new Float64Array(_.buffer,p),v(M,a.quaternion));const P=h,E={isDraco:!1,isLegacy:!1,color:t.layouts.some((t=>t.some((t=>"color"===t.name)))),normal:t.needNormals&&t.layouts.some((t=>t.some((t=>"normalCompressed"===t.name)))),uv0:t.layouts.some((t=>t.some((t=>"uv0"===t.name)))),uvRegion:t.layouts.some((t=>t.some((t=>"uvRegion"===t.name)))),featureIndex:P.featureIndex},S=w.process(n,!!t.obb,g,y.byteLength,P,E,b,f,d,m,t.normalReferenceFrame);if(w._free(b),w._free(g),S.error.length>0)throw`i3s.wasm: ${S.error}`;if(S.discarded)return null;const T=S.componentOffsets.length>0?(0,s.tP)(S.componentOffsets):null,I=S.featureIds.length>0?(0,s.tP)(S.featureIds):null,A=(0,s.tP)(S.interleavedVertedData).buffer,O=S.indicesType===r.Int16?(0,s.tP)(new Uint16Array(S.indices.buffer,S.indices.byteOffset,S.indices.byteLength/2)):(0,s.tP)(new Uint32Array(S.indices.buffer,S.indices.byteOffset,S.indices.byteLength/4)),R=(0,s.tP)(S.positions),U=S.positionIndicesType===r.Int16?(0,s.tP)(new Uint16Array(S.positionIndices.buffer,S.positionIndices.byteOffset,S.positionIndices.byteLength/2)):(0,s.tP)(new Uint32Array(S.positionIndices.buffer,S.positionIndices.byteOffset,S.positionIndices.byteLength/4)),B={layout:t.layouts[0],interleavedVertexData:A,indices:O,hasColors:S.hasColors,hasModifications:S.hasModifications,positionData:{data:R,indices:U}};return I&&e.push(I.buffer),T&&e.push(T.buffer),e.push(A),e.push(O.buffer),e.push(R.buffer),e.push(U.buffer),{componentOffsets:T,featureIds:I,transformedGeometry:B,obb:S.obb}}function T(t){return 0===t?l.Unmodified:1===t?l.PotentiallyModified:2===t?l.Culled:l.Unknown}function I(t){const{context:e,buffer:n}=t,r=w._malloc(n.byteLength),i=n.byteLength/Float64Array.BYTES_PER_ELEMENT,o=new Float64Array(w.HEAPU8.buffer,r,i),s=new Float64Array(n);o.set(s),w.filterOBBs(e,r,i),s.set(o),w._free(r)}function A(t){w&&w.destroy(t)}function v(t,e){for(let n=0;n<e.length;++n)t[n]=e[n]}function O(){return w?Promise.resolve():(P||(P=(a||(a=new Promise((t=>n.e(7552).then(n.bind(n,57552)).then((t=>t.i)).then((e=>{let{default:n}=e;const r=n({locateFile:u,onRuntimeInitialized:()=>t(r)});delete r.then})))).catch((t=>{throw t}))),a).then((t=>{w=t,P=null}))),P)}const R={transform:S,destroy:A}}}]);
//# sourceMappingURL=6761.269a1fd0.chunk.js.map