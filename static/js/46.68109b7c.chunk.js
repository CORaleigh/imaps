(this.webpackJsonpimaps=this.webpackJsonpimaps||[]).push([[46],{303:function(e,t,r){"use strict";var i,a=r(91),s=r(82),n=(r(80),r(81),r(88),r(85)),o=r(95),l=r(98),c=r(175),h=r(84),d=r(96),u=(r(83),r(86),r(87),r(209)),p=r(90),b=r(117),v=Object(o.b)()({orthometric:"gravity-related-height",gravity_related_height:"gravity-related-height",ellipsoidal:"ellipsoidal"}),g=v.jsonValues.slice();Object(u.j)(g,"orthometric");var y=Object(o.b)()({meter:"meters",foot:"feet","us-foot":"us-feet","clarke-foot":"clarke-feet","clarke-yard":"clarke-yards","clarke-link":"clarke-links","sears-yard":"sears-yards","sears-foot":"sears-feet","sears-chain":"sears-chains","benoit-1895-b-chain":"benoit-1895-b-chains","indian-yard":"indian-yards","indian-1937-yard":"indian-1937-yards","gold-coast-foot":"gold-coast-feet","sears-1922-truncated-chain":"sears-1922-truncated-chains","50-kilometers":"50-kilometers","150-kilometers":"150-kilometers"}),j=i=class extends p.a{constructor(e){super(e),this.heightModel="gravity-related-height",this.heightUnit="meters",this.vertCRS=null}writeHeightModel(e,t,r){return v.write(e,t,r)}readHeightModel(e,t,r){return v.read(e)||(r&&r.messages&&r.messages.push(function(e,t){return new c.a("height-model:unsupported","Height model of value '".concat(e,"' is not supported"),t)}(e,{context:r})),null)}readHeightUnit(e,t,r){return y.read(e)||(r&&r.messages&&r.messages.push(O(e,{context:r})),null)}readHeightUnitService(e,t,r){return Object(b.x)(e)||y.read(e)||(r&&r.messages&&r.messages.push(O(e,{context:r})),null)}readVertCRS(e,t){return t.vertCRS||t.ellipsoid||t.geoid}clone(){return new i({heightModel:this.heightModel,heightUnit:this.heightUnit,vertCRS:this.vertCRS})}equals(e){return!!e&&(this===e||this.heightModel===e.heightModel&&this.heightUnit===e.heightUnit&&this.vertCRS===e.vertCRS)}static deriveUnitFromSR(e,t){var r=Object(b.i)(t);return new i({heightModel:e.heightModel,heightUnit:r,vertCRS:e.vertCRS})}write(e,t){return t=Object(a.a)({origin:"web-scene"},t),super.write(e,t)}static fromJSON(e){if(!e)return null;var t=new i;return t.read(e,{origin:"web-scene"}),t}};function O(e,t){return new c.a("height-unit:unsupported","Height unit of value '".concat(e,"' is not supported"),t)}Object(s.a)([Object(n.b)({type:v.apiValues,constructOnly:!0,json:{origins:{"web-scene":{type:g,default:"ellipsoidal"}}}})],j.prototype,"heightModel",void 0),Object(s.a)([Object(d.a)("web-scene","heightModel")],j.prototype,"writeHeightModel",null),Object(s.a)([Object(l.a)(["web-scene","service"],"heightModel")],j.prototype,"readHeightModel",null),Object(s.a)([Object(n.b)({type:y.apiValues,constructOnly:!0,json:{origins:{"web-scene":{type:y.jsonValues,write:y.write}}}})],j.prototype,"heightUnit",void 0),Object(s.a)([Object(l.a)("web-scene","heightUnit")],j.prototype,"readHeightUnit",null),Object(s.a)([Object(l.a)("service","heightUnit")],j.prototype,"readHeightUnitService",null),Object(s.a)([Object(n.b)({type:String,constructOnly:!0,json:{origins:{"web-scene":{write:!0}}}})],j.prototype,"vertCRS",void 0),Object(s.a)([Object(l.a)("service","vertCRS",["vertCRS","ellipsoid","geoid"])],j.prototype,"readVertCRS",null);var m=j=i=Object(s.a)([Object(h.a)("esri.geometry.HeightModelInfo")],j);t.a=m},768:function(e,t,r){"use strict";r.r(t);var i=r(7),a=r(91),s=r(82),n=(r(80),r(89)),o=r(81),l=(r(88),r(85)),c=r(98),h=r(84),d=r(93),u=r(83),p=(r(86),r(87),r(94)),b=r(106),v=r(218),g=r(186),y=r(303),j=r(181),O=r(283),m=r(377),f=r(273),w=r(713),S=r(821);class _ extends S.a{constructor(e){super("LercWorker","_decode",e,{strategy:"dedicated"}),this.scheduler=e}decode(e,t,r){return e&&0!==e.byteLength?this.invoke({buffer:e,options:t},r):Promise.resolve(null)}getTransferList(e){return[e.buffer]}}var k=new Map;var M=o.a.getLogger("esri.layers.ElevationLayer"),U=class extends(Object(w.a)(Object(m.a)(Object(O.a)(Object(f.a)(Object(g.a)(v.a)))))){constructor(...e){super(...e),this.copyright=null,this.heightModelInfo=null,this.path=null,this.opacity=1,this.operationalLayerType="ArcGISTiledElevationServiceLayer",this.sourceJSON=null,this.type="elevation",this.url=null,this.version=null,this._lercDecoder=function(e){var t=k.get(e);return t||(t={instance:new _(e),ref:0},k.set(e,t)),++t.ref,t.instance}()}normalizeCtorArgs(e,t){return"string"==typeof e?Object(a.a)({url:e},t):e}destroy(){(function(e){if(null!=e){var t=e.scheduler,r=k.get(t);r&&--r.ref<=0&&(r.instance.destroy(),k.delete(t))}})(this._lercDecoder),this._lercDecoder=null}set minScale(e){this.constructed&&M.warn("".concat(this.declaredClass,".minScale support has been removed (since 4.5)"))}get minScale(){}set maxScale(e){this.constructed&&M.warn("".concat(this.declaredClass,".maxScale support has been removed (since 4.5)"))}get maxScale(){}readVersion(e,t){var r=t.currentVersion;return r||(r=9.3),r}load(e){var t=Object(n.k)(e)?e.signal:null;return this.addResolvingPromise(this.loadFromPortal({supportedTypes:["Image Service"],supportsData:!1,validateItem:e=>{for(var t=0;t<e.typeKeywords.length;t++)if("elevation 3d layer"===e.typeKeywords[t].toLowerCase())return!0;throw new d.a("portal:invalid-layer-item-type","Invalid layer item type '${type}', expected '${expectedType}' ",{type:"Image Service",expectedType:"Image Service Elevation 3D Layer"})}},e).then((()=>this._fetchImageService(t)),(()=>this._fetchImageService(t)))),Promise.resolve(this)}fetchTile(e,t,r,i){var a=Object(n.k)((i=i||{signal:null}).signal)?i.signal:i.signal=Object(p.d)().signal,s={responseType:"array-buffer",signal:a},o={noDataValue:i.noDataValue,returnFileInfo:!0};return this.load().then((()=>this._fetchTileAvailability(e,t,r,i))).then((()=>Object(b.default)(this.getTileUrl(e,t,r),s))).then((e=>this._lercDecoder.decode(e.data,o,a))).then((e=>({values:e.pixelData,width:e.width,height:e.height,maxZError:e.fileInfo.maxZError,noDataValue:e.noDataValue,minValue:e.minValue,maxValue:e.maxValue})))}getTileUrl(e,t,r){var i=!this.tilemapCache&&this.supportsBlankTile,s=Object(u.D)(Object(a.a)(Object(a.a)({},this.parsedUrl.query),{},{blankTile:!i&&null}));return"".concat(this.parsedUrl.path,"/tile/").concat(e,"/").concat(t,"/").concat(r).concat(s?"?"+s:"")}queryElevation(e,t){var a=this;return Object(i.a)((function*(){var{ElevationQuery:i}=yield Promise.all([r.e(10),r.e(41)]).then(r.bind(null,1117));return Object(p.u)(t),(new i).query(a,e,t)}))()}createElevationSampler(e,t){var a=this;return Object(i.a)((function*(){var{ElevationQuery:i}=yield Promise.all([r.e(10),r.e(41)]).then(r.bind(null,1117));return Object(p.u)(t),(new i).createSampler(a,e,t)}))()}_fetchTileAvailability(e,t,r,i){return this.tilemapCache?this.tilemapCache.fetchAvailability(e,t,r,i):Promise.resolve("unknown")}_fetchImageService(e){var t=this;return Object(i.a)((function*(){if(t.sourceJSON)return t.sourceJSON;var r={query:Object(a.a)({f:"json"},t.parsedUrl.query),responseType:"json",signal:e},i=yield Object(b.default)(t.parsedUrl.path,r);i.ssl&&(t.url=t.url.replace(/^http:/i,"https:")),t.sourceJSON=i.data,t.read(i.data,{origin:"service",url:t.parsedUrl})}))()}};Object(s.a)([Object(l.b)({json:{read:{source:"copyrightText"}}})],U.prototype,"copyright",void 0),Object(s.a)([Object(l.b)({readOnly:!0,type:y.a})],U.prototype,"heightModelInfo",void 0),Object(s.a)([Object(l.b)({type:String,json:{origins:{"web-scene":{read:!0,write:!0}},read:!1}})],U.prototype,"path",void 0),Object(s.a)([Object(l.b)({type:["show","hide"]})],U.prototype,"listMode",void 0),Object(s.a)([Object(l.b)({json:{read:!1,write:!1,origins:{service:{read:!1,write:!1},"portal-item":{read:!1,write:!1},"web-document":{read:!1,write:!1}}}})],U.prototype,"minScale",null),Object(s.a)([Object(l.b)({json:{read:!1,write:!1,origins:{service:{read:!1,write:!1},"portal-item":{read:!1,write:!1},"web-document":{read:!1,write:!1}}}})],U.prototype,"maxScale",null),Object(s.a)([Object(l.b)({json:{read:!1,write:!1,origins:{"web-document":{read:!1,write:!1}}}})],U.prototype,"opacity",void 0),Object(s.a)([Object(l.b)({type:["ArcGISTiledElevationServiceLayer"]})],U.prototype,"operationalLayerType",void 0),Object(s.a)([Object(l.b)()],U.prototype,"sourceJSON",void 0),Object(s.a)([Object(l.b)({json:{read:!1},value:"elevation",readOnly:!0})],U.prototype,"type",void 0),Object(s.a)([Object(l.b)(j.n)],U.prototype,"url",void 0),Object(s.a)([Object(l.b)()],U.prototype,"version",void 0),Object(s.a)([Object(c.a)("version",["currentVersion"])],U.prototype,"readVersion",null);var x=U=Object(s.a)([Object(h.a)("esri.layers.ElevationLayer")],U);t.default=x},821:function(e,t,r){"use strict";r.d(t,"a",(function(){return d}));var i=r(91),a=r(89),s=r(81),n=r(217),o=r(209),l=r(94),c=r(275),h=s.a.getLogger("esri.core.workers.WorkerHandle");class d{constructor(e,t,r,a={}){this._mainMethod=t,this._listeners=[],this._promise=Object(c.b)(e,Object(i.a)(Object(i.a)({},a),{},{scheduler:r})).then((e=>{if(void 0===this._thread)for(var t of(this._thread=e,this._promise=null,a.hasInitialize&&this.broadcast({},"initialize"),this._listeners))this._connectListener(t);else e.close()})),this._promise.catch((t=>h.error("Failed to initialize ".concat(e," worker: ").concat(t))))}on(e,t){var r={removed:!1,eventName:e,callback:t,threadHandle:null};return this._listeners.push(r),this._connectListener(r),Object(n.c)((()=>{r.removed=!0,Object(o.i)(this._listeners,r),this._thread&&Object(a.k)(r.threadHandle)&&r.threadHandle.remove()}))}destroy(){this._thread&&(this._thread.close(),this._thread=null),this._promise=null}invoke(e,t){return this.invokeMethod(this._mainMethod,e,t)}invokeMethod(e,t,r){if(this._thread){var i=this.getTransferList(t,e);return this._thread.invoke(e,t,{transferList:i,signal:r})}return this._promise?this._promise.then((()=>(Object(l.u)(r),this.invokeMethod(e,t,r)))):Promise.reject(null)}broadcast(e,t){return this._thread?Promise.all(this._thread.broadcast(t,e)).then((()=>{})):this._promise?this._promise.then((()=>this.broadcast(e,t))):Promise.reject()}get promise(){return this._promise}_connectListener(e){this._thread&&this._thread.on(e.eventName,e.callback).then((t=>{e.removed||(e.threadHandle=t)}))}}}}]);
//# sourceMappingURL=46.68109b7c.chunk.js.map