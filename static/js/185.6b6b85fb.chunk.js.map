{"version":3,"sources":["../node_modules/@arcgis/core/symbols/support/defaultsJSON.js","../node_modules/@arcgis/core/layers/graphics/sources/geojson/GeoJSONSourceWorker.js","../node_modules/@arcgis/core/layers/graphics/sources/support/clientSideDefaults.js","../node_modules/@arcgis/core/layers/graphics/sources/geojson/geojson.js"],"names":["e","i","l","type","style","size","color","outline","width","o","S","t","font","family","weight","horizontalAlignment","kerning","haloColor","haloSize","rotated","text","xoffset","yoffset","angle","r","s","y","D","hasAttachments","capabilities","useStandardizedQueries","supportsCoordinatesQuantization","supportsReturningQueryGeometry","advancedQueryCapabilities","supportsQueryAttachments","supportsStatistics","supportsPercentileStatistics","supportsReturningGeometryCentroid","supportsQueryWithDistance","supportsDistinct","supportsReturningQueryExtent","supportsReturningGeometryProperties","supportsHavingClause","supportsOrderBy","supportsPagination","supportsQueryWithResultType","supportsSqlExpression","supportsDisjointSpatialRel","O","constructor","this","_queryEngine","destroy","_requiredFields","_fieldsIndex","_createDefaultAttributes","_checkProjection","spatialReference","u","url","responseType","data","c","d","h","geometryType","f","fields","j","hasZ","_","E","objectIdField","objectIdFieldType","objectIdFieldName","T","n","q","timeInfo","push","name","message","unknownFields","length","details","some","editable","nullable","unshift","alias","field","w","jsonValues","indexOf","R","x","startTimeField","get","endTimeField","trackIdField","I","Q","warnings","featureErrors","layerDefinition","drawingInfo","templates","F","extent","m","hasM","featureStore","p","cacheSpatialQueries","b","_nextObjectId","maxObjectId","k","g","geometry","a","_loadInitialFeatures","Promise","all","adds","updates","_applyEdits","queryFeatures","executeQuery","signal","queryFeatureCount","executeQueryForCount","queryObjectIds","executeQueryForIds","queryExtent","executeQueryForExtent","querySnapping","executeQueryForSnapping","attributes","_assignObjectId","objectId","addMany","fullExtent","start","end","timeExtent","deletes","addResults","deleteResults","updateResults","uidToObjectId","_applyAddEdits","_applyUpdateEdits","removeManyById","featureEditResults","uid","has","getFeature","add","isFinite","renderer","symbol","JSON","stringify","Function","description","prototype","attachment","isVersioned","supportsAttachment","supportsM","supportsZ","metadata","supportsAdvancedFieldProperties","operations","supportsCalculate","supportsTruncate","supportsValidateSql","supportsAdd","supportsDelete","supportsEditing","supportsChangeTracking","supportsQuery","supportsResizeAttachments","supportsSync","supportsUpdate","supportsExceedsLimitStatistics","query","queryRelated","supportsCount","editing","supportsGeometryUpdate","supportsGlobalId","supportsReturnServiceEditsInSourceSpatialReference","supportsRollbackOnFailure","supportsUpdateWithoutM","supportsUploadWithItemId","supportsDeleteByAnonymous","supportsDeleteByOthers","supportsUpdateByAnonymous","supportsUpdateByOthers","LineString","MultiLineString","MultiPoint","Point","Polygon","MultiPolygon","features","coordinates","G","P","lengths","coords","M","crs","properties","code","RegExp","test","Set","Number","NEGATIVE_INFINITY","id","Object","keys","filter","Math","max","delete","Array","from"],"mappings":"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","file":"static/js/185.6b6b85fb.chunk.js","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nconst e=[252,146,31,255],i=[153,153,153,255],l={type:\"esriSMS\",style:\"esriSMSCircle\",size:6,color:e,outline:{type:\"esriSLS\",style:\"esriSLSSolid\",width:.75,color:[153,153,153,255]}},o={type:\"esriSLS\",style:\"esriSLSSolid\",width:.75,color:e},S={type:\"esriSFS\",style:\"esriSFSSolid\",color:[252,146,31,196],outline:{type:\"esriSLS\",style:\"esriSLSSolid\",width:.75,color:[255,255,255,191]}},t={type:\"esriTS\",color:[255,255,255,255],font:{family:\"arial-unicode-ms\",size:10,weight:\"bold\"},horizontalAlignment:\"center\",kerning:!0,haloColor:[0,0,0,255],haloSize:1,rotated:!1,text:\"\",xoffset:0,yoffset:0,angle:0},r={type:\"esriSMS\",style:\"esriSMSCircle\",color:[0,0,0,255],outline:null,size:10.5},s={type:\"esriSLS\",style:\"esriSLSSolid\",color:[0,0,0,255],width:1.5},y={type:\"esriSFS\",style:\"esriSFSSolid\",color:[0,0,0,255],outline:null};export{e as defaultColor,i as defaultOutlineColor,l as defaultPointSymbolJSON,S as defaultPolygonSymbolJSON,o as defaultPolylineSymbolJSON,t as defaultTextSymbolJSON,r as errorPointSymbolJSON,y as errorPolygonSymbolJSON,s as errorPolylineSymbolJSON};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport e from\"../../../../request.js\";import t from\"../../../../core/Error.js\";import{isSome as i}from\"../../../../core/maybe.js\";import{getJsonType as s}from\"../../../../geometry/support/jsonUtils.js\";import{WGS84 as n,equals as r}from\"../../../../geometry/support/spatialReferenceUtils.js\";import{convertFromGeometry as a,convertToGeometry as o,convertFromFeatures as l,convertToFeature as u,convertFromFeature as d}from\"../../featureConversionUtils.js\";import p from\"../../data/FeatureStore.js\";import{project as y,checkProjectionSupport as f}from\"../../data/projectionSupport.js\";import m from\"../../data/QueryEngine.js\";import{validateGeoJSON as c,inferLayerProperties as h,createOptimizedFeatures as g}from\"./geojson.js\";import{createDrawingInfo as I,createDefaultTemplate as F,createDefaultAttributesFunction as b}from\"../support/clientSideDefaults.js\";import{loadGeometryEngineForSimplify as j,mixAttributes as _,createFeatureEditSuccessResult as E,createFeatureEditErrorResult as T,simplify as q}from\"../support/sourceUtils.js\";import x from\"../../../support/FieldsIndex.js\";import{kebabDict as w}from\"../../../support/fieldType.js\";import{getFieldDefaultValue as R}from\"../../../support/fieldUtils.js\";const D={hasAttachments:!1,capabilities:\"query, editing, create, delete, update\",useStandardizedQueries:!0,supportsCoordinatesQuantization:!0,supportsReturningQueryGeometry:!0,advancedQueryCapabilities:{supportsQueryAttachments:!1,supportsStatistics:!0,supportsPercentileStatistics:!0,supportsReturningGeometryCentroid:!0,supportsQueryWithDistance:!0,supportsDistinct:!0,supportsReturningQueryExtent:!0,supportsReturningGeometryProperties:!1,supportsHavingClause:!0,supportsOrderBy:!0,supportsPagination:!0,supportsQueryWithResultType:!1,supportsSqlExpression:!0,supportsDisjointSpatialRel:!0}};class O{constructor(){this._queryEngine=null}destroy(){this._queryEngine&&this._queryEngine&&this._queryEngine.destroy(),this._queryEngine=this._requiredFields=this._fieldsIndex=this._createDefaultAttributes=null}async load(s){const l=[];await this._checkProjection(s.spatialReference);let u=null;if(s.url){u=(await e(s.url,{responseType:\"json\"})).data,await c(u)}const d=h(u,{geometryType:s.geometryType}),f=s.fields||d.fields||[],j=null!=s.hasZ?s.hasZ:d.hasZ,_=d.geometryType,E=s.objectIdField||(\"number\"===d.objectIdFieldType?d.objectIdFieldName:\"OBJECTID\")||\"OBJECTID\",T=s.spatialReference||n;let q=s.timeInfo;if(\"string\"===d.objectIdFieldType&&l.push({name:\"geojson-layer:unsupported-id-type\",message:\"Feature ids are of type string and can't be honored.\"}),f===d.fields&&d.unknownFields.length>0&&l.push({name:\"geojson-layer:unknown-field-types\",message:\"Some fields types couldn't be inferred from the features and were dropped\",details:{unknownFields:d.unknownFields}}),E){let e=null;f.some((t=>t.name===E&&(e=t,!0)))?(e.type=\"esriFieldTypeOID\",e.editable=!1,e.nullable=!1):f.unshift({alias:E,name:E,type:\"esriFieldTypeOID\",editable:!1,nullable:!1})}for(const e of f){if(null==e.name&&(e.name=e.alias),null==e.alias&&(e.alias=e.name),!e.name)throw new t(\"geojson-layer:invalid-field-name\",\"field name is missing\",{field:e});if(e.name===E&&(e.type=\"esriFieldTypeOID\"),-1===w.jsonValues.indexOf(e.type))throw new t(\"geojson-layer:invalid-field-type\",`invalid type for field \"${e.name}\"`,{field:e})}const O={};this._requiredFields=[];for(const e of f)if(\"esriFieldTypeOID\"!==e.type&&\"esriFieldTypeGlobalID\"!==e.type){e.editable=null==e.editable||!!e.editable,e.nullable=null==e.nullable||!!e.nullable;const t=R(e);e.nullable||void 0!==t?O[e.name]=t:this._requiredFields.push(e)}if(this._fieldsIndex=new x(f),q){if(q.startTimeField){const e=this._fieldsIndex.get(q.startTimeField);e?(q.startTimeField=e.name,e.type=\"esriFieldTypeDate\"):q.startTimeField=null}if(q.endTimeField){const e=this._fieldsIndex.get(q.endTimeField);e?(q.endTimeField=e.name,e.type=\"esriFieldTypeDate\"):q.endTimeField=null}if(q.trackIdField){const e=this._fieldsIndex.get(q.trackIdField);e?q.trackIdField=e.name:(q.trackIdField=null,l.push({name:\"geojson-layer:invalid-timeInfo-trackIdField\",message:\"trackIdField is missing\",details:{timeInfo:q}}))}q.startTimeField||q.endTimeField||(l.push({name:\"geojson-layer:invalid-timeInfo\",message:\"startTimeField and endTimeField are missing\",details:{timeInfo:q}}),q=null)}const S=_?I(_):null,Q={warnings:l,featureErrors:[],layerDefinition:{...D,drawingInfo:S,templates:F(O),extent:null,geometryType:_,objectIdField:E,fields:f,hasZ:!!j,timeInfo:q}};this._queryEngine=new m({fields:f,geometryType:_,hasM:!1,hasZ:j,objectIdField:E,spatialReference:T,timeInfo:q,featureStore:new p({geometryType:_,hasM:!1,hasZ:j}),cacheSpatialQueries:!0}),this._createDefaultAttributes=b(O,E),this._nextObjectId=d.maxObjectId+1;const k=g(u,{geometryType:_,hasZ:j,objectIdField:\"number\"===d.objectIdFieldType?E:null});if(!r(T,n))for(const e of k)i(e.geometry)&&(e.geometry=a(y(o(e.geometry,_,j,!1),n,T)));return this._loadInitialFeatures(Q,k),Q}async applyEdits(e){const{spatialReference:t,geometryType:i}=this._queryEngine;return await Promise.all([j(t,i),f(e.adds,t),f(e.updates,t)]),this._applyEdits(e)}queryFeatures(e={},t={}){return this._queryEngine.executeQuery(e,t.signal)}queryFeatureCount(e={},t={}){return this._queryEngine.executeQueryForCount(e,t.signal)}queryObjectIds(e={},t={}){return this._queryEngine.executeQueryForIds(e,t.signal)}queryExtent(e={},t={}){return this._queryEngine.executeQueryForExtent(e,t.signal)}querySnapping(e,t={}){return this._queryEngine.executeQueryForSnapping(e,t.signal)}_loadInitialFeatures(e,t){const{featureStore:i,objectIdField:s}=this._queryEngine,n=[];for(const r of t){const t=this._createDefaultAttributes(),i=_(this._fieldsIndex,t,r.attributes,this._requiredFields,!0,e.warnings);i?e.featureErrors.push(i):(this._assignObjectId(t,r.attributes,!0),r.attributes=t,r.objectId=t[s],n.push(r))}if(i.addMany(n),e.layerDefinition.extent=this._queryEngine.fullExtent,e.layerDefinition.timeInfo){const{start:t,end:i}=this._queryEngine.timeExtent;e.layerDefinition.timeInfo.timeExtent=[t,i]}return e}_applyEdits(e){const{adds:t,updates:i,deletes:s}=e,n={addResults:[],deleteResults:[],updateResults:[],uidToObjectId:{}};if(t&&t.length&&this._applyAddEdits(n,t),i&&i.length&&this._applyUpdateEdits(n,i),s&&s.length){for(const e of s)n.deleteResults.push(E(e));this._queryEngine.featureStore.removeManyById(s)}return{fullExtent:this._queryEngine.fullExtent,timeExtent:this._queryEngine.timeExtent,featureEditResults:n}}_applyAddEdits(e,t){const{addResults:n}=e,{geometryType:r,hasM:a,hasZ:o,objectIdField:u,spatialReference:d,featureStore:p}=this._queryEngine,f=[];for(const l of t){if(l.geometry&&r!==s(l.geometry)){n.push(T(\"Incorrect geometry type.\"));continue}const t=this._createDefaultAttributes(),a=_(this._fieldsIndex,t,l.attributes,this._requiredFields);if(a)n.push(a);else{if(this._assignObjectId(t,l.attributes),l.attributes=t,null!=l.uid){const t=l.attributes[u];e.uidToObjectId[l.uid]=t}i(l.geometry)&&(l.geometry=y(q(l.geometry,d),l.geometry.spatialReference,d)),f.push(l),n.push(E(l.attributes[u]))}}p.addMany(l([],f,r,o,a,u))}_applyUpdateEdits({updateResults:e},t){const{geometryType:n,hasM:r,hasZ:a,objectIdField:o,spatialReference:l,featureStore:p}=this._queryEngine;for(const f of t){const{attributes:t,geometry:m}=f,c=t&&t[o];if(null==c){e.push(T(`Identifier field ${o} missing`));continue}if(!p.has(c)){e.push(T(`Feature with object id ${c} missing`));continue}const h=u(p.getFeature(c),n,a,r);if(i(m)){if(n!==s(m)){e.push(T(\"Incorrect geometry type.\"));continue}h.geometry=y(q(m,l),m.spatialReference,l)}if(t){const i=_(this._fieldsIndex,h.attributes,t,this._requiredFields);if(i){e.push(i);continue}}p.add(d(h,n,a,r,o)),e.push(E(c))}}_assignObjectId(e,t,i=!1){const s=this._queryEngine.objectIdField;i&&isFinite(t[s])?e[s]=t[s]:e[s]=this._nextObjectId++}async _checkProjection(e){try{await f(n,e)}catch{throw new t(\"geojson-layer\",\"Projection not supported\")}}}export{O as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport t from\"../../../../core/has.js\";import{clone as s}from\"../../../../core/lang.js\";import{queryCapabilities as e}from\"../../data/QueryEngineCapabilities.js\";import{defaultPointSymbolJSON as r,defaultPolylineSymbolJSON as p,defaultPolygonSymbolJSON as o}from\"../../../../symbols/support/defaultsJSON.js\";function u(t){return{renderer:{type:\"simple\",symbol:\"esriGeometryPoint\"===t||\"esriGeometryMultipoint\"===t?r:\"esriGeometryPolyline\"===t?p:o}}}function n(s,e){if(t(\"csp-restrictions\"))return()=>({[e]:null,...s});try{let t=`this.${e} = null;`;for(const e in s){t+=`this${e.indexOf(\".\")?`[\"${e}\"]`:`.${e}`} = ${JSON.stringify(s[e])};`}const r=new Function(t);return()=>new r}catch(r){return()=>({[e]:null,...s})}}function i(t={}){return[{name:\"New Feature\",description:\"\",prototype:{attributes:s(t)}}]}function a(t,s){return{attachment:null,data:{isVersioned:!1,supportsAttachment:!1,supportsM:!1,supportsZ:t},metadata:{supportsAdvancedFieldProperties:!1},operations:{supportsCalculate:!1,supportsTruncate:!1,supportsValidateSql:!1,supportsAdd:s,supportsDelete:s,supportsEditing:s,supportsChangeTracking:!1,supportsQuery:!0,supportsQueryAttachments:!1,supportsResizeAttachments:!1,supportsSync:!1,supportsUpdate:s,supportsExceedsLimitStatistics:!0},query:e,queryRelated:{supportsCount:!0,supportsOrderBy:!0,supportsPagination:!0},editing:{supportsGeometryUpdate:s,supportsGlobalId:!1,supportsReturnServiceEditsInSourceSpatialReference:!1,supportsRollbackOnFailure:!1,supportsUpdateWithoutM:!1,supportsUploadWithItemId:!1,supportsDeleteByAnonymous:!1,supportsDeleteByOthers:!1,supportsUpdateByAnonymous:!1,supportsUpdateByOthers:!1}}}export{a as createCapabilities,n as createDefaultAttributesFunction,i as createDefaultTemplate,u as createDrawingInfo};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport e from\"../../../../core/Error.js\";import t from\"../../OptimizedFeature.js\";import n from\"../../OptimizedGeometry.js\";const o={LineString:\"esriGeometryPolyline\",MultiLineString:\"esriGeometryPolyline\",MultiPoint:\"esriGeometryMultipoint\",Point:\"esriGeometryPoint\",Polygon:\"esriGeometryPolygon\",MultiPolygon:\"esriGeometryPolygon\"};function r(e){return o[e]}function*i(e){switch(e.type){case\"Feature\":yield e;break;case\"FeatureCollection\":for(const t of e.features)t&&(yield t)}}function*s(e){if(!e)return null;switch(e.type){case\"Point\":yield e.coordinates;break;case\"LineString\":case\"MultiPoint\":yield*e.coordinates;break;case\"MultiLineString\":case\"Polygon\":for(const t of e.coordinates)yield*t;break;case\"MultiPolygon\":for(const t of e.coordinates)for(const e of t)yield*e}}function*c(e,o={}){const{geometryType:i,objectIdField:s}=o;for(const u of e){var c;const{geometry:e,properties:l,id:f}=u;if(e&&r(e.type)!==i)continue;const a=l||{};let y=null!=(c=a[s])?c:null;s&&null!=f&&!a[s]&&(a[s]=y=f);const d=new t(e?p(new n,e,o):null,a,null,y);yield d}}function u(e){for(const t of e)if(t.length>2)return!0;return!1}function l(e){return!a(e)}function f(e){return a(e)}function a(e){let t=0;for(let n=0;n<e.length;n++){const o=e[n],r=e[(n+1)%e.length];t+=o[0]*r[1]-r[0]*o[1]}return t<=0}function y(e){const t=e[0],n=e[e.length-1];return t[0]===n[0]&&t[1]===n[1]&&t[2]===n[2]||e.push(t),e}function p(e,t,n){switch(t.type){case\"LineString\":return d(e,t,n);case\"MultiLineString\":return g(e,t,n);case\"MultiPoint\":return m(e,t,n);case\"MultiPolygon\":return h(e,t,n);case\"Point\":return w(e,t,n);case\"Polygon\":return P(e,t,n)}}function d(e,t,n){return S(e,t.coordinates,n),e}function g(e,t,n){for(const o of t.coordinates)S(e,o,n);return e}function m(e,t,n){return S(e,t.coordinates,n),e}function h(e,t,n){for(const o of t.coordinates){b(e,o[0],n);for(let t=1;t<o.length;t++)j(e,o[t],n)}return e}function w(e,t,n){return G(e,t.coordinates,n),e}function P(e,t,n){const o=t.coordinates;b(e,o[0],n);for(let r=1;r<o.length;r++)j(e,o[r],n);return e}function b(e,t,n){const o=y(t);l(o)?F(e,o,n):S(e,o,n)}function j(e,t,n){const o=y(t);f(o)?F(e,o,n):S(e,o,n)}function S(e,t,n){for(const o of t)G(e,o,n);e.lengths.push(t.length)}function F(e,t,n){for(let o=t.length-1;o>=0;o--)G(e,t[o],n);e.lengths.push(t.length)}function G(e,t,n){const[o,r,i]=t;e.coords.push(o,r),n.hasZ&&e.coords.push(i||0)}function M(e){switch(typeof e){case\"string\":return\"esriFieldTypeString\";case\"number\":return\"esriFieldTypeDouble\";default:return\"unknown\"}}function I(t){if(!t)throw new e(\"geojson-layer:empty\",\"GeoJSON data is empty\");if(\"Feature\"!==t.type&&\"FeatureCollection\"!==t.type)throw new e(\"geojson-layer:unsupported-geojson-object\",\"missing or not supported GeoJSON object type\",{data:t});const{crs:n}=t;if(!n)return;const o=\"string\"==typeof n?n:\"name\"===n.type?n.properties.name:\"EPSG\"===n.type?n.properties.code:null,r=new RegExp(\".*(CRS84H?|4326)$\",\"i\");if(!o||!r.test(o))throw new e(\"geojson-layer:unsupported-crs\",\"unsupported GeoJSON 'crs' member\",{crs:n})}function T(e,t={}){const n=[],o=new Set,c=new Set;let l,f=!1,a=Number.NEGATIVE_INFINITY,y=null,p=!1,{geometryType:d=null}=t,g=!1;for(const h of i(e)){const{geometry:e,properties:t,id:i}=h;if(!e||(d||(d=r(e.type)),r(e.type)===d)){if(!f){f=u(s(e))}if(p||(p=null!=i,p&&(l=typeof i,\"number\"===l&&(y=Object.keys(t).filter((e=>t[e]===i))))),p&&\"number\"===l&&null!=i&&(a=Math.max(a,i),y.length>1?y=y.filter((e=>t[e]===i)):1===y.length&&(y=t[y[0]]===i?y:[])),!g&&t){let e=!0;for(const r in t){if(o.has(r))continue;const i=t[r];if(null==i){e=!1,c.add(r);continue}const s=M(i);\"unknown\"!==s?(c.delete(r),o.add(r),n.push({name:r,alias:r,type:s})):c.add(r)}g=e}}}const m=y&&1===y.length&&y[0]||null;if(m)for(const r of n)r.name===m&&(r.type=\"esriFieldTypeOID\");return{fields:n,geometryType:d,hasZ:f,maxObjectId:Math.max(0,a),objectIdFieldName:m,objectIdFieldType:l,unknownFields:Array.from(c)}}function k(e,t){return Array.from(c(i(e),t))}export{k as createOptimizedFeatures,r as getGeometryType,T as inferLayerProperties,I as validateGeoJSON};\n"],"sourceRoot":""}