{"version":3,"sources":["../node_modules/@arcgis/core/geometry/HeightModelInfo.js","../node_modules/@arcgis/core/layers/support/LercDecoder.js","../node_modules/@arcgis/core/layers/ElevationLayer.js","../node_modules/@arcgis/core/core/workers/WorkerHandle.js"],"names":["p","d","r","orthometric","gravity_related_height","ellipsoidal","u","jsonValues","slice","a","g","meter","foot","m","l","constructor","e","super","this","heightModel","heightUnit","vertCRS","writeHeightModel","t","write","readHeightModel","read","messages","push","i","f","context","readHeightUnit","y","readHeightUnitService","c","readVertCRS","ellipsoid","geoid","clone","equals","h","origin","type","apiValues","constructOnly","json","origins","default","prototype","n","o","String","s","v","strategy","scheduler","decode","byteLength","invoke","buffer","options","Promise","resolve","getTransferList","Map","w","getLogger","x","copyright","heightModelInfo","path","opacity","operationalLayerType","sourceJSON","url","version","_lercDecoder","get","instance","ref","set","S","normalizeCtorArgs","destroy","delete","j","constructed","warn","declaredClass","readVersion","currentVersion","load","signal","addResolvingPromise","loadFromPortal","supportedTypes","supportsData","validateItem","typeKeywords","length","toLowerCase","expectedType","then","_fetchImageService","fetchTile","responseType","noDataValue","returnFileInfo","_fetchTileAvailability","getTileUrl","data","values","pixelData","width","height","maxZError","fileInfo","minValue","maxValue","tilemapCache","supportsBlankTile","parsedUrl","query","blankTile","ElevationQuery","createSampler","fetchAvailability","ssl","replace","source","readOnly","service","value","T","_mainMethod","_listeners","_promise","_thread","hasInitialize","broadcast","_connectListener","close","catch","error","on","removed","eventName","callback","threadHandle","remove","invokeMethod","transferList","reject","all"],"mappings":"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","file":"static/js/46.adcac331.chunk.js","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../chunks/tslib.es6.js\";import\"../core/has.js\";import\"../core/Logger.js\";import\"../core/accessorSupport/ensureType.js\";import{property as t}from\"../core/accessorSupport/decorators/property.js\";import{strict as r}from\"../core/jsonMap.js\";import{reader as o}from\"../core/accessorSupport/decorators/reader.js\";import i from\"../core/Warning.js\";import{subclass as s}from\"../core/accessorSupport/decorators/subclass.js\";import{writer as n}from\"../core/accessorSupport/decorators/writer.js\";import\"../core/urlUtils.js\";import\"../core/uuid.js\";import\"../portal/support/resourceExtension.js\";import{removeUnordered as a}from\"../core/arrayUtils.js\";import{JSONSupport as l}from\"../core/JSONSupport.js\";import{unitFromRESTJSON as c,getVerticalUnitStringForSR as h}from\"../core/unitUtils.js\";var p;const d=r()({orthometric:\"gravity-related-height\",gravity_related_height:\"gravity-related-height\",ellipsoidal:\"ellipsoidal\"}),u=d.jsonValues.slice();a(u,\"orthometric\");const g=r()({meter:\"meters\",foot:\"feet\",\"us-foot\":\"us-feet\",\"clarke-foot\":\"clarke-feet\",\"clarke-yard\":\"clarke-yards\",\"clarke-link\":\"clarke-links\",\"sears-yard\":\"sears-yards\",\"sears-foot\":\"sears-feet\",\"sears-chain\":\"sears-chains\",\"benoit-1895-b-chain\":\"benoit-1895-b-chains\",\"indian-yard\":\"indian-yards\",\"indian-1937-yard\":\"indian-1937-yards\",\"gold-coast-foot\":\"gold-coast-feet\",\"sears-1922-truncated-chain\":\"sears-1922-truncated-chains\",\"50-kilometers\":\"50-kilometers\",\"150-kilometers\":\"150-kilometers\"});let m=p=class extends l{constructor(e){super(e),this.heightModel=\"gravity-related-height\",this.heightUnit=\"meters\",this.vertCRS=null}writeHeightModel(e,t,r){return d.write(e,t,r)}readHeightModel(e,t,r){const o=d.read(e);return o||(r&&r.messages&&r.messages.push(f(e,{context:r})),null)}readHeightUnit(e,t,r){const o=g.read(e);return o||(r&&r.messages&&r.messages.push(y(e,{context:r})),null)}readHeightUnitService(e,t,r){const o=c(e)||g.read(e);return o||(r&&r.messages&&r.messages.push(y(e,{context:r})),null)}readVertCRS(e,t){return t.vertCRS||t.ellipsoid||t.geoid}clone(){return new p({heightModel:this.heightModel,heightUnit:this.heightUnit,vertCRS:this.vertCRS})}equals(e){return!!e&&(this===e||this.heightModel===e.heightModel&&this.heightUnit===e.heightUnit&&this.vertCRS===e.vertCRS)}static deriveUnitFromSR(e,t){const r=h(t);return new p({heightModel:e.heightModel,heightUnit:r,vertCRS:e.vertCRS})}write(e,t){return t={origin:\"web-scene\",...t},super.write(e,t)}static fromJSON(e){if(!e)return null;const t=new p;return t.read(e,{origin:\"web-scene\"}),t}};function y(e,t){return new i(\"height-unit:unsupported\",`Height unit of value '${e}' is not supported`,t)}function f(e,t){return new i(\"height-model:unsupported\",`Height model of value '${e}' is not supported`,t)}e([t({type:d.apiValues,constructOnly:!0,json:{origins:{\"web-scene\":{type:u,default:\"ellipsoidal\"}}}})],m.prototype,\"heightModel\",void 0),e([n(\"web-scene\",\"heightModel\")],m.prototype,\"writeHeightModel\",null),e([o([\"web-scene\",\"service\"],\"heightModel\")],m.prototype,\"readHeightModel\",null),e([t({type:g.apiValues,constructOnly:!0,json:{origins:{\"web-scene\":{type:g.jsonValues,write:g.write}}}})],m.prototype,\"heightUnit\",void 0),e([o(\"web-scene\",\"heightUnit\")],m.prototype,\"readHeightUnit\",null),e([o(\"service\",\"heightUnit\")],m.prototype,\"readHeightUnitService\",null),e([t({type:String,constructOnly:!0,json:{origins:{\"web-scene\":{write:!0}}}})],m.prototype,\"vertCRS\",void 0),e([o(\"service\",\"vertCRS\",[\"vertCRS\",\"ellipsoid\",\"geoid\"])],m.prototype,\"readVertCRS\",null),m=p=e([s(\"esri.geometry.HeightModelInfo\")],m);var v=m;export default v;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{WorkerHandle as e}from\"../../core/workers/WorkerHandle.js\";class r extends e{constructor(e){super(\"LercWorker\",\"_decode\",e,{strategy:\"dedicated\"}),this.scheduler=e}decode(e,r,t){return e&&0!==e.byteLength?this.invoke({buffer:e,options:r},t):Promise.resolve(null)}getTransferList(e){return[e.buffer]}}const t=new Map;function n(e){let n=t.get(e);return n||(n={instance:new r(e),ref:0},t.set(e,n)),++n.ref,n.instance}function s(e){if(null==e)return;const r=e.scheduler,n=t.get(r);n&&--n.ref<=0&&(n.instance.destroy(),t.delete(r))}export{n as acquireDecoder,s as releaseDecoder};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../chunks/tslib.es6.js\";import\"../core/has.js\";import{isSome as r}from\"../core/maybe.js\";import t from\"../core/Logger.js\";import\"../core/accessorSupport/ensureType.js\";import{property as o}from\"../core/accessorSupport/decorators/property.js\";import{reader as i}from\"../core/accessorSupport/decorators/reader.js\";import{subclass as s}from\"../core/accessorSupport/decorators/subclass.js\";import a from\"../core/Error.js\";import{objectToQuery as l}from\"../core/urlUtils.js\";import\"../core/uuid.js\";import\"../portal/support/resourceExtension.js\";import{createAbortController as n,throwIfAborted as p}from\"../core/promiseUtils.js\";import c from\"../request.js\";import m from\"./Layer.js\";import{MultiOriginJSONMixin as u}from\"../core/MultiOriginJSONSupport.js\";import d from\"../geometry/HeightModelInfo.js\";import{url as h}from\"./support/commonProperties.js\";import{OperationalLayer as y}from\"./mixins/OperationalLayer.js\";import{ArcGISService as v}from\"./mixins/ArcGISService.js\";import{PortalLayer as g}from\"./mixins/PortalLayer.js\";import{ArcGISCachedService as f}from\"./mixins/ArcGISCachedService.js\";import{acquireDecoder as S,releaseDecoder as j}from\"./support/LercDecoder.js\";const w=t.getLogger(\"esri.layers.ElevationLayer\");let x=class extends(f(v(y(g(u(m)))))){constructor(...e){super(...e),this.copyright=null,this.heightModelInfo=null,this.path=null,this.opacity=1,this.operationalLayerType=\"ArcGISTiledElevationServiceLayer\",this.sourceJSON=null,this.type=\"elevation\",this.url=null,this.version=null,this._lercDecoder=S()}normalizeCtorArgs(e,r){return\"string\"==typeof e?{url:e,...r}:e}destroy(){j(this._lercDecoder),this._lercDecoder=null}set minScale(e){this.constructed&&w.warn(`${this.declaredClass}.minScale support has been removed (since 4.5)`)}get minScale(){}set maxScale(e){this.constructed&&w.warn(`${this.declaredClass}.maxScale support has been removed (since 4.5)`)}get maxScale(){}readVersion(e,r){let t=r.currentVersion;return t||(t=9.3),t}load(e){const t=r(e)?e.signal:null;return this.addResolvingPromise(this.loadFromPortal({supportedTypes:[\"Image Service\"],supportsData:!1,validateItem:e=>{for(let r=0;r<e.typeKeywords.length;r++)if(\"elevation 3d layer\"===e.typeKeywords[r].toLowerCase())return!0;throw new a(\"portal:invalid-layer-item-type\",\"Invalid layer item type '${type}', expected '${expectedType}' \",{type:\"Image Service\",expectedType:\"Image Service Elevation 3D Layer\"})}},e).then((()=>this._fetchImageService(t)),(()=>this._fetchImageService(t)))),Promise.resolve(this)}fetchTile(e,t,o,i){const s=r((i=i||{signal:null}).signal)?i.signal:i.signal=n().signal,a={responseType:\"array-buffer\",signal:s},l={noDataValue:i.noDataValue,returnFileInfo:!0};return this.load().then((()=>this._fetchTileAvailability(e,t,o,i))).then((()=>c(this.getTileUrl(e,t,o),a))).then((e=>this._lercDecoder.decode(e.data,l,s))).then((e=>({values:e.pixelData,width:e.width,height:e.height,maxZError:e.fileInfo.maxZError,noDataValue:e.noDataValue,minValue:e.minValue,maxValue:e.maxValue})))}getTileUrl(e,r,t){const o=!this.tilemapCache&&this.supportsBlankTile,i=l({...this.parsedUrl.query,blankTile:!o&&null});return`${this.parsedUrl.path}/tile/${e}/${r}/${t}${i?\"?\"+i:\"\"}`}async queryElevation(e,r){const{ElevationQuery:t}=await import(\"./support/ElevationQuery.js\");p(r);return(new t).query(this,e,r)}async createElevationSampler(e,r){const{ElevationQuery:t}=await import(\"./support/ElevationQuery.js\");p(r);return(new t).createSampler(this,e,r)}_fetchTileAvailability(e,r,t,o){return this.tilemapCache?this.tilemapCache.fetchAvailability(e,r,t,o):Promise.resolve(\"unknown\")}async _fetchImageService(e){if(this.sourceJSON)return this.sourceJSON;const r={query:{f:\"json\",...this.parsedUrl.query},responseType:\"json\",signal:e},t=await c(this.parsedUrl.path,r);t.ssl&&(this.url=this.url.replace(/^http:/i,\"https:\")),this.sourceJSON=t.data,this.read(t.data,{origin:\"service\",url:this.parsedUrl})}};e([o({json:{read:{source:\"copyrightText\"}}})],x.prototype,\"copyright\",void 0),e([o({readOnly:!0,type:d})],x.prototype,\"heightModelInfo\",void 0),e([o({type:String,json:{origins:{\"web-scene\":{read:!0,write:!0}},read:!1}})],x.prototype,\"path\",void 0),e([o({type:[\"show\",\"hide\"]})],x.prototype,\"listMode\",void 0),e([o({json:{read:!1,write:!1,origins:{service:{read:!1,write:!1},\"portal-item\":{read:!1,write:!1},\"web-document\":{read:!1,write:!1}}}})],x.prototype,\"minScale\",null),e([o({json:{read:!1,write:!1,origins:{service:{read:!1,write:!1},\"portal-item\":{read:!1,write:!1},\"web-document\":{read:!1,write:!1}}}})],x.prototype,\"maxScale\",null),e([o({json:{read:!1,write:!1,origins:{\"web-document\":{read:!1,write:!1}}}})],x.prototype,\"opacity\",void 0),e([o({type:[\"ArcGISTiledElevationServiceLayer\"]})],x.prototype,\"operationalLayerType\",void 0),e([o()],x.prototype,\"sourceJSON\",void 0),e([o({json:{read:!1},value:\"elevation\",readOnly:!0})],x.prototype,\"type\",void 0),e([o(h)],x.prototype,\"url\",void 0),e([o()],x.prototype,\"version\",void 0),e([i(\"version\",[\"currentVersion\"])],x.prototype,\"readVersion\",null),x=e([s(\"esri.layers.ElevationLayer\")],x);var T=x;export default T;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{isSome as e}from\"../maybe.js\";import t from\"../Logger.js\";import{makeHandle as r}from\"../handleUtils.js\";import{remove as s}from\"../arrayUtils.js\";import{throwIfAborted as i}from\"../promiseUtils.js\";import{open as o}from\"./workers.js\";const h=t.getLogger(\"esri.core.workers.WorkerHandle\");class n{constructor(e,t,r,s={}){this._mainMethod=t,this._listeners=[],this._promise=o(e,{...s,scheduler:r}).then((e=>{if(void 0===this._thread){this._thread=e,this._promise=null,s.hasInitialize&&this.broadcast({},\"initialize\");for(const e of this._listeners)this._connectListener(e)}else e.close()})),this._promise.catch((t=>h.error(`Failed to initialize ${e} worker: ${t}`)))}on(t,i){const o={removed:!1,eventName:t,callback:i,threadHandle:null};return this._listeners.push(o),this._connectListener(o),r((()=>{o.removed=!0,s(this._listeners,o),this._thread&&e(o.threadHandle)&&o.threadHandle.remove()}))}destroy(){this._thread&&(this._thread.close(),this._thread=null),this._promise=null}invoke(e,t){return this.invokeMethod(this._mainMethod,e,t)}invokeMethod(e,t,r){if(this._thread){const s=this.getTransferList(t,e);return this._thread.invoke(e,t,{transferList:s,signal:r})}return this._promise?this._promise.then((()=>(i(r),this.invokeMethod(e,t,r)))):Promise.reject(null)}broadcast(e,t){return this._thread?Promise.all(this._thread.broadcast(t,e)).then((()=>{})):this._promise?this._promise.then((()=>this.broadcast(e,t))):Promise.reject()}get promise(){return this._promise}_connectListener(e){this._thread&&this._thread.on(e.eventName,e.callback).then((t=>{e.removed||(e.threadHandle=t)}))}}export{n as WorkerHandle};\n"],"sourceRoot":""}