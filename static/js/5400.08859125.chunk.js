"use strict";(globalThis.webpackChunkimaps=globalThis.webpackChunkimaps||[]).push([[5400],{95400:(e,t,n)=>{n.r(t),n.d(t,{default:()=>C});var i=n(85580),r=n(72791),s=n(10064),a=n(15075),l=n(585),o=n(78952);function d(){return(0,a.i)()}function c(){return(0,a.l)()}function u(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const i=[[e.x,e.y]],r=[],s=v(e.spatialReference);let l=0;switch(t){case"dd":l=a.P.geogToDd(s,1,i,n,r);break;case"ddm":l=a.P.geogToDdm(s,1,i,n,r);break;case"dms":l=a.P.geogToDms(s,1,i,n,r);break;default:return console.warn(`invalid format: ${t}`),null}return l?r[0]:null}function v(e){let t=null;if(e||(e=o.Z.WGS84),e.wkid){if(t=a.e.geogcs(e.wkid),!t)throw new s.Z("coordinate-formatter:invalid-spatial-reference","wkid is not valid")}else{if(!e.wkt)throw new s.Z("coordinate-formatter:invalid-spatial-reference","wkid and wkt are missing");if(t=a.e.fromString(a.f.PE_TYPE_GEOGCS,e.wkt),!t)throw new s.Z("coordinate-formatter:invalid-spatial-reference","wkt is not valid")}return t}function h(e){let t=-1;switch(e){case"automatic":t=a.b.PE_MGRS_STYLE_AUTO;break;case"new-180-in-zone-01":t=a.b.PE_MGRS_STYLE_NEW|a.b.PE_MGRS_180_ZONE_1_PLUS;break;case"new-180-in-zone-60":t=a.b.PE_MGRS_STYLE_NEW;break;case"old-180-in-zone-01":t=a.b.PE_MGRS_STYLE_OLD|a.b.PE_MGRS_180_ZONE_1_PLUS;break;case"old-180-in-zone-60":t=a.b.PE_MGRS_STYLE_OLD}return t}function p(e){let t=-1;switch(e){case"latitude-band-indicators":t=a.d.PE_UTM_OPTS_NONE;break;case"north-south-indicators":t=a.d.PE_UTM_OPTS_NS}return t}var g=n(79803),f=n(91946),m=n(93655);let w,b;const S=new f.Z({url:"assets/pin.svg",height:36,width:36}),_=new m.Z({id:"coordinate-widget"}),x=e=>{const t=(0,r.useRef)(!1),n=(0,r.useRef)(null),i=(0,r.useRef)(null),s=(0,r.useRef)(null),f=(0,r.useRef)(null),[m,x]=(0,r.useState)(!1),[k,y]=(0,r.useState)(!1),C=(0,r.useRef)(null),E=(0,r.useRef)(null),[M,R]=(0,r.useState)("dd"),T=(0,r.useRef)("dd"),A=(0,r.useCallback)((e=>{x((e=>!e))}),[]),P=(0,r.useCallback)((e=>{y((e=>!e))}),[]),G=(0,r.useCallback)((t=>{var n,i,r;(t.target.active=!t.target.active,t.target.active)?(null===(n=w)||void 0===n||n.remove(),N(e.view,e.clickActivated)):(null===(i=b)||void 0===i||i.remove(),e.view.popup.autoOpenEnabled=!0,null===(r=document.querySelector(".identify-widget"))||void 0===r||r.classList.add("active"),O())}),[]),Z=(0,r.useCallback)((e=>{console.log(e.target.value),R(e.target.value),T.current=e.target.value}),[T]),j=(0,r.useCallback)((async t=>{d()||await c();let r=new l.Z,u=!0;if("dd"===T.current&&(isFinite(i.current.value)&&Math.abs(i.current.value)<=90?i.current.setAttribute("status","valid"):(u=!1,i.current.setAttribute("status","invalid")),isFinite(n.current.value)&&Math.abs(n.current.value)<=180?n.current.setAttribute("status","valid"):(u=!1,n.current.setAttribute("status","invalid")),r=new l.Z({x:n.current.value,y:i.current.value,spatialReference:{wkid:4326}})),"dms"===T.current){const e=L(!0,i.current.value);i.current.setAttribute("status",e);const t=L(!1,n.current.value);n.current.setAttribute("status",t),u="valid"===e&&"valid"===t,r=function(e,t){const n=[];e=(e=(e=e.replace(/[\u00B0\u00BA]/g,"^")).replace(/\u2032/g,"'")).replace(/\u2033/g,'"');const i=v(t);return a.P.dmsToGeog(i,1,[e],n)?new l.Z(n[0][0],n[0][1],t||o.Z.WGS84):null}(`${i.current.value} ${n.current.value}`)}var f;("spft"===T.current&&(r=new l.Z({x:n.current.value,y:i.current.value,spatialReference:{wkid:4326}}),r=g.iV(r,e.view.spatialReference)),"usng"===T.current&&(r=function(e,t){const n=[];!t&&/\(.+27/.test(e)&&(t=o.Z.GCS_NAD_1927);const i=v(t);return a.c.usngToGeog(i,1,[e],n)?new l.Z(n[0][0],n[0][1],t||o.Z.WGS84):null}(s.current.value,e.view.spatialReference)),"mgrs"===T.current&&(r=function(e,t,n){const i=[],r=h(n);if(-1===r)return console.warn(`invalid conversionMode: ${n}`),null;const s=v(t);return a.b.mgrsToGeogExtended(s,1,[e],r,i)?new l.Z(i[0][0],i[0][1],t||o.Z.WGS84):null}(s.current.value,e.view.spatialReference,"automatic")),"utm"===T.current&&(r=function(e,t,n){const i=[],r=p(n);if(-1===r)return console.warn(`invalid conversionMode: ${n}`),null;const s=v(t);return a.d.utmToGeog(s,1,[e],r,i)?new l.Z(i[0][0],i[0][1],t||o.Z.WGS84):null}(s.current.value,e.view.spatialReference,"latitude-band-indicators")),e.view.constraints.geometry.contains(r))||(null===(f=E.current)||void 0===f||f.setAttribute("open",!0),setTimeout((()=>{var e;null===(e=E.current)||void 0===e||e.removeAttribute("open")}),3e3));u&&(e.view.map.findLayerById("coordinate-widget")||e.view.map.add(_),_.removeAll(),_.add({geometry:r,attributes:null,symbol:S}),e.view.goTo(r))}),[]),L=(e,t)=>(e?/^((90[\xb0|\s]\s*)(0{1,2}['|\s]\s*)(0{1,2}([.|,]0{1,20})?["|\s]\s*)|(([1-8]\d|\d)[\xb0|\s]\s*)(([0-5]\d|\d)['|\s]\s*)(([0-5]\d|\d)([.|,]\d{1,20})?["|\s]\s*))$/gm:/^[-]((180[\xb0|\s]\s*)(0{1,2}['|\s]\s*)(0{1,2}([.|,]0{1,20})?["|\s]\s*)|((1[0-7]\d|\d\d|\d)[\xb0|\s]\s*)(([0-5]\d|\d)['|\s]\s*)(([0-5]\d|\d)([.|,]\d{1,20})?["|\s]\s*))/gm).test(`${t} `)?"valid":"invalid",$=t=>{let n;n="point"===t.type?t:e.view.toMap({x:t.x,y:t.y});const i=new l.Z({x:n.longitude,y:n.latitude,spatialReference:{wkid:4326}});if("dd"===T.current){let e=u(i,"dd",7).replaceAll("078.","78.").split(" ");e[0].includes("S")&&(e[0]=`-${e[0].replace("S","")}`),e[0].includes("N")&&(e[0]=`${e[0].replace("N","")}`),e[1].includes("W")&&(e[1]=`-${e[1].replace("W","")}`),e[1].includes("E")&&(e[1]=`${e[1].replace("N","")}`),f.current.innerHTML=e.join(" ")}else if("dms"===T.current){const e=u(i,"dms",7).split(" "),t=`${e[0]}\xb0 ${e[1]}' ${e[2].replace("N",'"')} -${e[3].substring(1)}\xb0 ${e[4]}' ${e[5].replace("W",'"')}`;f.current.innerHTML=t}else if("usng"===T.current)f.current.innerHTML=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const i=[[e.x,e.y]],r=[],s=v(e.spatialReference);return a.c.geogToUsng(s,1,i,t,!1,n,r)?r[0]:null}(i,5,!0);else if("mgrs"===T.current)f.current.innerHTML=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const r=[[e.x,e.y]],s=[],l=v(e.spatialReference);let o=h(t);return-1===o?(console.warn(`invalid conversionMode: ${t}`),null):(i&&(o|=a.b.PE_MGRS_ADD_SPACES),a.b.geogToMgrsExtended(l,1,r,n,!1,o,s)?s[0]:null)}(i,"automatic",5,!0);else if("utm"===T.current)f.current.innerHTML=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const i=[[e.x,e.y]],r=[],s=v(e.spatialReference);let l=p(t);return-1===l?(console.warn(`invalid conversionMode: ${t}`),null):(n&&(l|=a.d.PE_UTM_OPTS_ADD_SPACES),a.d.geogToUtm(s,1,i,l,r)?r[0]:null)}(i,"latitude-band-indicators",!0);else if("spft"===T.current){const e=g.iV(n,{wkid:2264});f.current.innerHTML=`${e.x.toString()} E, ${e.y.toString()} N`}},N=(t,n)=>{var i;n(t),e.view.popup.autoOpenEnabled=!1,null===(i=document.querySelector(".identify-widget"))||void 0===i||i.classList.remove("active"),b=e.view.on("click",(e=>{$(e)}))},O=async()=>{d()||await c(),$(e.view.extent.center),w=e.view.on("pointer-move",(e=>{$(e)}))};return(0,r.useEffect)((()=>{if(!t.current&&e.view)return t.current=!0,e.expand&&(e.expand.hasHandles()||e.expand.watch("expanded",(t=>{var n,i;t?C.current.getAttribute("active")?O():N(e.view,e.clickActivated):(null===(n=w)||void 0===n||n.remove(),null===(i=b)||void 0===i||i.remove())}))),O(),()=>{}}),[]),{loaded:t,settingsClicked:A,showSettings:m,formats:[{value:"dd",label:"Decimal Degrees"},{value:"dms",label:"Degrees Minutes Seconds"},{value:"spft",label:"Stateplane Feet"},{value:"usng",label:"US National Grid"},{value:"mgrs",label:"MGRS"},{value:"utm",label:"UTM"}],formatChanged:Z,searchClicked:P,showSearch:k,selectedFormat:M,searchCoordinates:j,x:n,y:i,other:s,modeClicked:G,coordinateRef:f,modeActionRef:C,noticeRef:E}};var k=n(80184);function y(e){var t,n;const{loaded:r,settingsClicked:s,showSettings:a,formats:l,formatChanged:o,searchClicked:d,showSearch:c,selectedFormat:u,searchCoordinates:v,x:h,y:p,other:g,modeClicked:f,coordinateRef:m,modeActionRef:w,noticeRef:b}=x(e);return(0,k.jsxs)("div",{id:"coordinatesWidget",children:[(0,k.jsx)(i.JA,{scale:"s",ref:b,kind:"danger",closable:!0,children:(0,k.jsx)("div",{slot:"message",children:"Location outside of county"})}),(0,k.jsx)("div",{hidden:!a||void 0,children:(0,k.jsx)(i.ko,{scale:"s",label:"Coordinate Systems",onCalciteSelectChange:o,children:l.map((e=>(0,k.jsx)(i.GB,{value:e.value,children:e.label},e.value)))})}),(0,k.jsxs)("div",{hidden:!c||void 0,children:[(0,k.jsxs)(i.ZK,{scale:"s",children:["dd"===u?"Latitude":"spft"===u?"Northing":"dms"===u?"Latitude":"",(0,k.jsx)(i.e,{scale:"s",ref:p,hidden:!["dd","spft","dms"].includes(u)||void 0,id:"ycoord",placeholder:"dd"===u?"35.7582196":"spft"===u?"731166.165":"dms"===u?"35\xb0 45' 29.7116777\"":""}),(0,k.jsx)(i.Bi,{hidden:"invalid"!==(null===(t=p.current)||void 0===t?void 0:t.getAttribute("status"))||void 0,status:"invalid",children:"Value is not valid"})]}),(0,k.jsxs)(i.ZK,{scale:"s",children:["dd"===u?"Longitude":"spft"===u?"Easting":"dms"===u?"Longitude":"",(0,k.jsx)(i.e,{scale:"s",ref:h,hidden:!["dd","spft","dms"].includes(u)||void 0,id:"xcoord",placeholder:"dd"===u?"-78.8079653":"spft"===u?"2056872.973":"dms"===u?"-78\xb0 48' 31.524\"":""}),(0,k.jsx)(i.Bi,{hidden:"invalid"!==(null===(n=h.current)||void 0===n?void 0:n.getAttribute("status"))||void 0,status:"invalid",children:"Value is not valid"})]}),(0,k.jsx)(i.e,{scale:"s",ref:g,hidden:!!["dd","spft","dms"].includes(u)||void 0,id:"othercoord",placeholder:"usng"===u?"17S PV 98178 59368":"mrgs"===u?"17S PV 98136 59346":"utm"===u?"17S 698184 3959363":""}),(0,k.jsx)(i.ln,{onClick:v,width:"full",scale:"s",children:"Search"})]}),(0,k.jsxs)("div",{className:"coordinates-row",children:[(0,k.jsx)("div",{ref:m,className:"coordinates-text"}),(0,k.jsx)(i.G1,{id:"coordinateSearch",text:"",icon:"search",active:!!c||void 0,onClick:d}),(0,k.jsx)(i.$A,{closeOnClick:!0,label:"Search Coordinates",referenceElement:"coordinateSearch",children:"Search Coordinates"}),(0,k.jsx)(i.G1,{id:"coordinateUnits",text:"",icon:"gear",onClick:s,active:!!a||void 0}),(0,k.jsx)(i.$A,{closeOnClick:!0,label:"Set Units",referenceElement:"coordinateUnits",children:"Set Units"}),(0,k.jsx)(i.G1,{id:"coordinateMode",ref:w,text:"",icon:"pin",onClick:f}),(0,k.jsx)(i.$A,{closeOnClick:!0,label:"Set Mode",referenceElement:"coordinateMode",children:"Set Mode"})]})]})}const C=r.memo(y)},93655:(e,t,n)=>{n.d(t,{Z:()=>h});var i=n(27366),r=n(49861),s=(n(25243),n(63780),n(69912)),a=n(68748),l=n(30651),o=n(6693),d=n(56811),c=n(78983),u=n(64575);let v=class extends((0,o.h)((0,d.M)(l.Z))){constructor(e){super(e),this.elevationInfo=null,this.graphics=new c.J,this.screenSizePerspectiveEnabled=!0,this.type="graphics",this.internal=!1}destroy(){this.removeAll(),this.graphics.destroy()}add(e){return this.graphics.add(e),this}addMany(e){return this.graphics.addMany(e),this}removeAll(){return this.graphics.removeAll(),this}remove(e){this.graphics.remove(e)}removeMany(e){this.graphics.removeMany(e)}on(e,t){return super.on(e,t)}graphicChanged(e){this.emit("graphic-update",e)}};(0,i._)([(0,r.Cb)({type:u.Z})],v.prototype,"elevationInfo",void 0),(0,i._)([(0,r.Cb)((0,a.z)(c.J,"graphics"))],v.prototype,"graphics",void 0),(0,i._)([(0,r.Cb)({type:["show","hide"]})],v.prototype,"listMode",void 0),(0,i._)([(0,r.Cb)()],v.prototype,"screenSizePerspectiveEnabled",void 0),(0,i._)([(0,r.Cb)({readOnly:!0})],v.prototype,"type",void 0),(0,i._)([(0,r.Cb)({constructOnly:!0})],v.prototype,"internal",void 0),v=(0,i._)([(0,s.j)("esri.layers.GraphicsLayer")],v);const h=v}}]);
//# sourceMappingURL=5400.08859125.chunk.js.map