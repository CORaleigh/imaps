(this.webpackJsonpimaps=this.webpackJsonpimaps||[]).push([[29,58],{105:function(e,t,i){"use strict";i.d(t,"a",(function(){return C})),i.d(t,"b",(function(){return P})),i.d(t,"c",(function(){return g})),i.d(t,"d",(function(){return w})),i.d(t,"e",(function(){return S})),i.d(t,"f",(function(){return b})),i.d(t,"g",(function(){return m})),i.d(t,"h",(function(){return _})),i.d(t,"i",(function(){return L})),i.d(t,"j",(function(){return x})),i.d(t,"k",(function(){return ee})),i.d(t,"l",(function(){return p})),i.d(t,"m",(function(){return u})),i.d(t,"n",(function(){return f})),i.d(t,"o",(function(){return v})),i.d(t,"p",(function(){return T})),i.d(t,"q",(function(){return I})),i.d(t,"r",(function(){return A})),i.d(t,"s",(function(){return Y})),i.d(t,"t",(function(){return B})),i.d(t,"u",(function(){return q})),i.d(t,"v",(function(){return $})),i.d(t,"w",(function(){return G})),i.d(t,"x",(function(){return V})),i.d(t,"y",(function(){return y})),i.d(t,"z",(function(){return H})),i.d(t,"A",(function(){return Q}));var r=i(88),n=i(85),s=i(124),a=i(265),l=i(126);const o=["field","field2","field3","normalizationField","rotationInfo.field","proportionalSymbolInfo.field","proportionalSymbolInfo.normalizationField","colorInfo.field","colorInfo.normalizationField"],c=["field","normalizationField"];function u(e,t){if(null!=e&&null!=t)for(const i of Array.isArray(e)?e:[e])if(d(o,i,t),"visualVariables"in i&&i.visualVariables)for(const e of i.visualVariables)d(c,e,t)}function d(e,t,i){if(e)for(const r of e){const e=Object(s.b)(r,t),n=e&&"function"!=typeof e&&i.get(e);n&&Object(s.c)(r,n.name,t)}}function f(e,t){if(null!=e&&null!=t&&t.fields.length)if("startField"in e){const i=t.get(e.startField),r=t.get(e.endField);e.startField=i&&i.name||null,e.endField=r&&r.name||null}else{const i=t.get(e.startTimeField),r=t.get(e.endTimeField);e.startTimeField=i&&i.name||null,e.endTimeField=r&&r.name||null}}const h=new Set;function p(e,t){return e&&t?(h.clear(),m(h,e,t),Array.from(h).sort()):[]}function m(e,t,i){var r;if(i)if(null!=t&&null!=(r=t.fields)&&r.length)if(i.includes("*"))for(const{name:n}of t.fields)e.add(n);else for(const n of i)b(e,t,n);else{if(i.includes("*"))return e.clear(),void e.add("*");for(const t of i)e.add(t)}}function b(e,t,i){if("string"==typeof i)if(t){const r=t.get(i);r&&e.add(r.name)}else e.add(i)}function y(e,t){return Object(n.k)(t)||Object(n.k)(e)?[]:t.includes("*")?e.fields.map((e=>e.name)):t}async function g(e,t,i){var r;if(!i)return;const{arcadeUtils:n}=await Object(l.e)(),s=n.extractFieldNames(i,null==t||null==(r=t.fields)?void 0:r.map((e=>e.name)));for(const a of s)b(e,t,a)}async function O(e,t,n){if(n&&"1=1"!==n){const s=(await Promise.all([i.e(11),i.e(240)]).then(i.bind(null,316))).WhereClause.create(n,t);if(!s.isStandardized)throw new r.a("fieldUtils:collectFilterFields","Where clause is not standardized");m(e,t,s.fieldNames)}}function v({displayField:e,fields:t}){return e||(t&&t.length?j(t,"name-or-title")||j(t,"unique-identifier")||j(t,"type-or-category")||function(e){for(const t of e){if(!t||!t.name)continue;const e=t.name.toLowerCase();if(e.indexOf("name")>-1||e.indexOf("title")>-1)return t.name}return null}(t):null)}function j(e,t){for(const i of e)if(i&&i.valueType&&i.valueType===t)return i.name;return null}async function w(e,t){if(!t)return;const i=Object(s.b)("elevationInfo.featureExpressionInfo",t);return i?i.collectRequiredFields(e,t.fieldsIndex):void 0}async function S(e,t,i){var r,n;if(!t||!i||"cluster"!==i.type)return;const s=[];if(null!=(r=i.popupTemplate)&&r.expressionInfos&&s.push(...i.popupTemplate.expressionInfos.map((i=>g(e,t.fieldsIndex,i.expression)))),Array.isArray(null==(n=i.popupTemplate)?void 0:n.content)){const r=i.popupTemplate.content;for(const i of r)"expression"===i.type&&i.expressionInfo&&s.push(g(e,t.fieldsIndex,i.expressionInfo.expression))}i.fields&&s.push(...i.fields.map((i=>async function(e,t,i){i.outStatistic.onStatisticValueExpression?g(e,t,i.outStatistic.onStatisticValueExpression):e.add(i.outStatistic.onStatisticField)}(e,t.fieldsIndex,i)))),await Promise.all(s)}async function _(e,t,i){t&&(t.timeInfo&&Object(n.l)(i)&&i.timeExtent&&m(e,t.fieldsIndex,[t.timeInfo.startField,t.timeInfo.endField]),t.floorInfo&&m(e,t.fieldsIndex,[t.floorInfo.floorField]),Object(n.l)(i)&&Object(n.l)(i.where)&&await O(e,t.fieldsIndex,i.where))}async function x(e,t,i){t&&i&&await Promise.all(i.map((i=>async function(e,t,i){t&&i&&(i.valueExpression?await g(e,t.fieldsIndex,i.valueExpression):i.field&&b(e,t.fieldsIndex,i.field))}(e,t,i))))}function T(e){if(!e)return[];const t="editFieldsInfo"in e&&e.editFieldsInfo;return t?p(e.fieldsIndex,[t&&t.creatorField,t&&t.creationDateField,t&&t.editorField,t&&t.editDateField]):[]}function I(e){if(!e)return[];const t=e.geometryFieldsInfo;return t?p(e.fieldsIndex,[t.shapeAreaField,t.shapeLengthField]):[]}async function L(e,t){const{labelingInfo:i,fieldsIndex:r}=t;i&&i.length&&await Promise.all(i.map((t=>async function(e,t,i){if(!i)return;const r=i.getLabelExpression(),n=i.where;if("arcade"===r.type)await g(e,t,r.expression);else{const i=r.expression.match(/{[^}]*}/g);i&&i.forEach((i=>{b(e,t,i.slice(1,-1))}))}await O(e,t,n)}(e,r,t))))}function A(e){const t=e.defaultValue;return void 0!==t&&k(e,t)?t:e.nullable?null:void 0}function F(e){return"number"==typeof e&&!isNaN(e)&&isFinite(e)}function M(e){return null===e||F(e)}const D="isInteger"in Number?Number.isInteger:e=>"number"==typeof e&&isFinite(e)&&Math.floor(e)===e;function z(e){return null===e||D(e)}function U(e){return null!=e&&"string"==typeof e}function E(e){return null===e||U(e)}function R(){return!0}function k(e,t){let i;switch(e.type){case"date":case"integer":case"long":case"small-integer":case"esriFieldTypeDate":case"esriFieldTypeInteger":case"esriFieldTypeLong":case"esriFieldTypeSmallInteger":i=e.nullable?z:D;break;case"double":case"single":case"esriFieldTypeSingle":case"esriFieldTypeDouble":i=e.nullable?M:F;break;case"string":case"esriFieldTypeString":i=e.nullable?E:U;break;default:i=R}return 1===arguments.length?i:i(t)}const G=["integer","small-integer","single","double"],N=new Set([...G,"esriFieldTypeInteger","esriFieldTypeSmallInteger","esriFieldTypeSingle","esriFieldTypeDouble"]);function q(e){return null!=e&&N.has(e.type)}function $(e){return null!=e&&("string"===e.type||"esriFieldTypeString"===e.type)}function B(e){return null!=e&&("date"===e.type||"esriFieldTypeDate"===e.type)}var C,P;function V(e){return null==e||"number"==typeof e&&isNaN(e)?null:e}function H(e,t){return e.nullable&&null===t?null:q(e)&&!function(e,t){const i="string"==typeof e?W(e):e;return!!i&&(i.isInteger?D(t)&&t>=i.min&&t<=i.max:t>=i.min&&t<=i.max)}(e.type,Number(t))?C.OUT_OF_RANGE:k(e,t)?e.domain?Object(a.c)(e.domain,t):null:P.INVALID_TYPE}function Y(e){return Object(a.b)(e.domain)||(q(e)?W(e.type):void 0)}function W(e){switch(e){case"esriFieldTypeSmallInteger":case"small-integer":return J;case"esriFieldTypeInteger":case"integer":return X;case"esriFieldTypeSingle":case"single":return K;case"esriFieldTypeDouble":case"double":return Z}}(C||(C={})).OUT_OF_RANGE="numeric-range-validation-error::out-of-range",function(e){e.INVALID_TYPE="type-validation-error::invalid-type"}(P||(P={}));const J={min:-32768,max:32767,isInteger:!0},X={min:-2147483648,max:2147483647,isInteger:!0},K={min:-34e37,max:12e37,isInteger:!1},Z={min:-Number.MAX_VALUE,max:Number.MAX_VALUE,isInteger:!1};function Q(e,t,i){switch(e){case a.a.INVALID_CODED_VALUE:return`Value ${i} is not in the coded domain - field: ${t.name}, domain: ${JSON.stringify(t.domain)}`;case a.a.VALUE_OUT_OF_RANGE:return`Value ${i} is out of the range of valid values - field: ${t.name}, domain: ${JSON.stringify(t.domain)}`;case P.INVALID_TYPE:return`Value ${i} is not a valid value for the field type - field: ${t.name}, type: ${t.type}, nullable: ${t.nullable}`;case C.OUT_OF_RANGE:{const{min:e,max:r}=W(t.type);return`Value ${i} is out of range for the number type - field: ${t.name}, type: ${t.type}, value range is ${e} to ${r}`}}}function ee(e,t){return!function(e,t,i){if(!t||!t.attributes||!e){if(Object(n.l)(i))for(const t of e)i.add(t);return!0}const r=t.attributes;let s=!1;for(const a of e)if(!(a in r)){if(s=!0,!Object(n.l)(i))break;i.add(a)}return s}(e,t,null)}},114:function(e,t,i){"use strict";i.d(t,"a",(function(){return Y})),i.d(t,"b",(function(){return T})),i.d(t,"c",(function(){return P})),i.d(t,"d",(function(){return G})),i.d(t,"e",(function(){return k})),i.d(t,"f",(function(){return E})),i.d(t,"g",(function(){return $})),i.d(t,"h",(function(){return R})),i.d(t,"i",(function(){return u})),i.d(t,"j",(function(){return S})),i.d(t,"k",(function(){return z})),i.d(t,"l",(function(){return W})),i.d(t,"m",(function(){return j})),i.d(t,"n",(function(){return w})),i.d(t,"o",(function(){return D})),i.d(t,"p",(function(){return A})),i.d(t,"q",(function(){return F})),i.d(t,"r",(function(){return M})),i.d(t,"s",(function(){return I})),i.d(t,"t",(function(){return L})),i.d(t,"u",(function(){return U}));i(82);var r=i(90),n=i(85),s=i(197),a=i(94),l=i(138),o=i(110),c=i(284);const u=39.37,d=l.a.radius*Math.PI/200,f=/UNIT\[([^\]]+)\]\]$/i,h=c.a,p=/UNIT\[([^\]]+)\]/i,m=new Set([4261,4305,4807,4810,4811,4812,4816,4819,4821,4901,4902,37225,104139,104140]),b=Object(r.b)()({meter:"meters",foot:"feet",foot_us:"us-feet",foot_clarke:"clarke-feet",yard_clarke:"clarke-yards",link_clarke:"clarke-links",yard_sears:"sears-yards",foot_sears:"sears-feet",chain_sears:"sears-chains",chain_benoit_1895_b:"benoit-1895-b-chains",yard_indian:"indian-yards",yard_indian_1937:"indian-1937-yards",foot_gold_coast:"gold-coast-feet",chain_sears_1922_truncated:"sears-1922-truncated-chains","50_kilometers":"50-kilometers","150_kilometers":"150-kilometers"}),y=e=>e*e,g=e=>e*e*e,O={length:{baseUnit:"meters",units:{millimeters:{inBaseUnits:.001},centimeters:{inBaseUnits:.01},decimeters:{inBaseUnits:.1},meters:{inBaseUnits:1},kilometers:{inBaseUnits:1e3},inches:{inBaseUnits:.0254},feet:{inBaseUnits:.3048},yards:{inBaseUnits:.9144},miles:{inBaseUnits:1609.344},"nautical-miles":{inBaseUnits:1852},"us-feet":{inBaseUnits:1200/3937}}},area:{baseUnit:"square-meters",units:{"square-millimeters":{inBaseUnits:y(.001)},"square-centimeters":{inBaseUnits:y(.01)},"square-decimeters":{inBaseUnits:y(.1)},"square-meters":{inBaseUnits:1},"square-kilometers":{inBaseUnits:y(1e3)},"square-inches":{inBaseUnits:y(.0254)},"square-feet":{inBaseUnits:y(.3048)},"square-yards":{inBaseUnits:y(.9144)},"square-miles":{inBaseUnits:y(1609.344)},"square-us-feet":{inBaseUnits:y(1200/3937)},acres:{inBaseUnits:.0015625*y(1609.344)},ares:{inBaseUnits:100},hectares:{inBaseUnits:1e4}}},volume:{baseUnit:"liters",units:{liters:{inBaseUnits:1},"cubic-millimeters":{inBaseUnits:1e3*g(.001)},"cubic-centimeters":{inBaseUnits:1e3*g(.01)},"cubic-decimeters":{inBaseUnits:1e3*g(.1)},"cubic-meters":{inBaseUnits:1e3},"cubic-kilometers":{inBaseUnits:1e3*g(1e3)},"cubic-inches":{inBaseUnits:1e3*g(.0254)},"cubic-feet":{inBaseUnits:1e3*g(.3048)},"cubic-yards":{inBaseUnits:1e3*g(.9144)},"cubic-miles":{inBaseUnits:1e3*g(1609.344)}}},angle:{baseUnit:"radians",units:{radians:{inBaseUnits:1},degrees:{inBaseUnits:Math.PI/180}}}},v=function(){const e={};for(const t in O)for(const i in O[t].units)e[i]=t;return e}();const j=["metric","imperial","square-inches","square-feet","square-yards","square-miles","square-us-feet","square-meters","square-kilometers","acres","ares","hectares"],w=["metric","imperial","inches","feet","yards","miles","nautical-miles","us-feet","meters","kilometers"];function S(e){return"imperial"===e||"metric"===e}function _(e){const t=v[e];if(t)return t;throw new Error("unknown measure")}function x(e,t=null){return t=t||_(e),O[t].baseUnit===e}function T(e,t,i){if(t===i)return e;const r=_(t);if(r!==_(i))throw new Error("incompatible units");const n=x(t,r)?e:function(e,t,i){return e*O[i].units[t].inBaseUnits}(e,t,r);return x(i,r)?n:function(e,t,i){return e/O[i].units[t].inBaseUnits}(n,i,r)}function I(e,t){return T(e,t,"meters")<3e3?"meters":"kilometers"}function L(e,t){return T(e,t,"meters")<1e5?"meters":"kilometers"}function A(e,t){return T(e,t,"feet")<1e3?"feet":"miles"}function F(e,t){return T(e,t,"feet")<1e5?"feet":"miles"}function M(e,t){return T(e,t,"square-meters")<3e6?"square-meters":"square-kilometers"}function D(e,t){return T(e,t,"square-feet")<1e6?"square-feet":"square-miles"}function z(e,t,i){return T(e,t,"meters")/(i*Math.PI/180)}function U(e){return b.fromJSON(e.toLowerCase())||null}function E(e){if(e&&"object"==typeof e&&!Object(o.g)(e))return 1;const t=k(e);return t>1e5?1:t}function R(e){return k(e)>=(e instanceof a.a?Object(s.e)(e).metersPerDegree:1e5)?"meters":$(e)}function k(e,t=l.a.metersPerDegree){return G(e,!0)||t}function G(e,t=!1){let i,r,n=null;if(null!=e&&("object"==typeof e?(i=e.wkid,r=e.wkt):"number"==typeof e?i=e:"string"==typeof e&&(r=e)),i){if(Object(o.n)(i))return l.b.metersPerDegree;if(Object(o.o)(i))return l.c.metersPerDegree;n=h.values[h[i]],!n&&t&&m.has(i)&&(n=d)}else r&&(C(r)?n=N(f.exec(r),n):B(r)&&(n=N(p.exec(r),n)));return n}function N(e,t){return e&&e[1]?q(e[1]):t}function q(e){return parseFloat(e.split(",")[1])}function $(e){let t,i,r=null;if(null!=e&&("object"==typeof e?(t=e.wkid,i=e.wkt):"number"==typeof e?t=e:"string"==typeof e&&(i=e)),t)r=h.units[h[t]];else if(i){const e=C(i)?f:B(i)?p:null;if(e){const t=e.exec(i);t&&t[1]&&(r=function(e){const t=/[\\"\\']{1}([^\\"\\']+)/.exec(e);let i=t&&t[1];if(!i||-1===h.units.indexOf(i)){const t=q(e);i=null;const r=h.values;for(let e=0;e<r.length;++e)if(Math.abs(t-r[e])<1e-7){i=h.units[e];break}}return i}(t[1]))}}return Object(n.l)(r)?U(r):null}function B(e){return/^GEOCCS/i.test(e)}function C(e){return/^PROJCS/i.test(e)}function P(e){if(!e)return null;switch($(e)){case"feet":case"us-feet":case"clarke-feet":case"clarke-yards":case"clarke-links":case"sears-yards":case"sears-feet":case"sears-chains":case"benoit-1895-b-chains":case"indian-yards":case"indian-1937-yards":case"gold-coast-feet":case"sears-1922-truncated-chains":return"imperial";case"50-kilometers":case"150-kilometers":case"meters":return"metric";case null:case void 0:return null}return null}const V={esriAcres:"acres",esriAres:"ares",esriHectares:"hectares",esriSquareCentimeters:"square-centimeters",esriSquareDecimeters:"square-decimeters",esriSquareFeet:"square-feet",esriSquareInches:"square-inches",esriSquareKilometers:"square-kilometers",esriSquareMeters:"square-meters",esriSquareMiles:"square-miles",esriSquareMillimeters:"square-millimeters",esriSquareUsFeet:"square-us-feet",esriSquareYards:"square-yards"},H={esriCentimeters:"centimeters",esriDecimeters:"decimeters",esriFeet:"feet",esriInches:"inches",esriKilometers:"kilometers",esriMeters:"meters",esriMiles:"miles",esriMillimeters:"millimeters",esriNauticalMiles:"nautical-miles",esriYards:"yards"},Y=Object(r.b)()(V),W=Object(r.b)()(H);Object(r.b)()({...V,...H})},118:function(e,t,i){"use strict";i.d(t,"a",(function(){return L})),i.d(t,"b",(function(){return p})),i.d(t,"c",(function(){return y})),i.d(t,"d",(function(){return g})),i.d(t,"e",(function(){return a})),i.d(t,"f",(function(){return _})),i.d(t,"g",(function(){return O})),i.d(t,"h",(function(){return v})),i.d(t,"i",(function(){return w})),i.d(t,"j",(function(){return j})),i.d(t,"k",(function(){return l})),i.d(t,"l",(function(){return s})),i.d(t,"m",(function(){return T})),i.d(t,"n",(function(){return f})),i.d(t,"o",(function(){return d})),i.d(t,"p",(function(){return h})),i.d(t,"q",(function(){return c})),i.d(t,"r",(function(){return o})),i.d(t,"s",(function(){return b})),i.d(t,"t",(function(){return S})),i.d(t,"u",(function(){return x})),i.d(t,"v",(function(){return u})),i.d(t,"w",(function(){return m}));i(82),i(113);var r=i(85),n=i(96);function s(e=A){return[e[0],e[1],e[2],e[3]]}function a(e){return[e[0],e[1],e[2],e[3]]}function l(e,t){return e!==t&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3]),e}function o(e,t,i,r,n=s()){return n[0]=e,n[1]=t,n[2]=i,n[3]=r,n}function c(e,t=s()){return t[0]=e.xmin,t[1]=e.ymin,t[2]=e.xmax,t[3]=e.ymax,t}function u(e,t){return new n.a({xmin:e[0],ymin:e[1],xmax:e[2],ymax:e[3],spatialReference:t})}function d(e,t){t[0]<e[0]&&(e[0]=t[0]),t[0]>e[2]&&(e[2]=t[0]),t[1]<e[1]&&(e[1]=t[1]),t[1]>e[3]&&(e[3]=t[1])}function f(e,t,i){if(Object(r.k)(t))l(i,e);else if("length"in t)I(t)?(i[0]=Math.min(e[0],t[0]),i[1]=Math.min(e[1],t[1]),i[2]=Math.max(e[2],t[2]),i[3]=Math.max(e[3],t[3])):2!==t.length&&3!==t.length||(i[0]=Math.min(e[0],t[0]),i[1]=Math.min(e[1],t[1]),i[2]=Math.max(e[2],t[0]),i[3]=Math.max(e[3],t[1]));else switch(t.type){case"extent":i[0]=Math.min(e[0],t.xmin),i[1]=Math.min(e[1],t.ymin),i[2]=Math.max(e[2],t.xmax),i[3]=Math.max(e[3],t.ymax);break;case"point":i[0]=Math.min(e[0],t.x),i[1]=Math.min(e[1],t.y),i[2]=Math.max(e[2],t.x),i[3]=Math.max(e[3],t.y)}}function h(e,t,i=e){const r=t.length;let n=e[0],s=e[1],a=e[2],l=e[3];for(let o=0;o<r;o++){const e=t[o];n=Math.min(n,e[0]),s=Math.min(s,e[1]),a=Math.max(a,e[0]),l=Math.max(l,e[1])}return i[0]=n,i[1]=s,i[2]=a,i[3]=l,i}function p(e){for(let t=0;t<4;t++)if(!isFinite(e[t]))return!1;return!0}function m(e){return Object(r.k)(e)||e[0]>=e[2]?0:e[2]-e[0]}function b(e){return e[1]>=e[3]?0:e[3]-e[1]}function y(e){return m(e)*b(e)}function g(e,t=[0,0]){return t[0]=(e[0]+e[2])/2,t[1]=(e[1]+e[3])/2,t}function O(e,t){return j(e,t[0],t[1])}function v(e,t){return j(e,t.x,t.y)}function j(e,t,i){return t>=e[0]&&i>=e[1]&&t<=e[2]&&i<=e[3]}function w(e,t,i){return t[0]>=e[0]-i&&t[1]>=e[1]-i&&t[0]<=e[2]+i&&t[1]<=e[3]+i}function S(e,t){return Math.max(t[0],e[0])<=Math.min(t[2],e[2])&&Math.max(t[1],e[1])<=Math.min(t[3],e[3])}function _(e,t){return t[0]>=e[0]&&t[2]<=e[2]&&t[1]>=e[1]&&t[3]<=e[3]}function x(e,t,i,r=e){return r[0]=e[0]+t,r[1]=e[1]+i,r[2]=e[2]+t,r[3]=e[3]+i,r}function T(e){return e?l(e,L):s(L)}function I(e){return null!=e&&4===e.length}const L=[1/0,1/0,-1/0,-1/0],A=[0,0,0,0]},120:function(e,t,i){"use strict";i.d(t,"a",(function(){return m}));var r,n=i(79),s=i(86),a=i(85),l=i(148),o=i(81),c=(i(84),i(82),i(83),i(93)),u=i(80),d=i(92);let f=r=class extends s.a{constructor(e){super(e),this.end=null,this.start=null}static get allTime(){return h}static get empty(){return p}readEnd(e,t){return null!=t.end?new Date(t.end):null}writeEnd(e,t){t.end=e?e.getTime():null}get isAllTime(){return this.equals(r.allTime)}get isEmpty(){return this.equals(r.empty)}readStart(e,t){return null!=t.start?new Date(t.start):null}writeStart(e,t){t.start=e?e.getTime():null}clone(){return new r({end:this.end,start:this.start})}equals(e){if(!e)return!1;const t=Object(a.l)(this.start)?this.start.getTime():this.start,i=Object(a.l)(this.end)?this.end.getTime():this.end,r=Object(a.l)(e.start)?e.start.getTime():e.start,n=Object(a.l)(e.end)?e.end.getTime():e.end;return t===r&&i===n}expandTo(e){if(this.isEmpty||this.isAllTime)return this.clone();const t=Object(a.b)(this.start,(t=>Object(l.c)(t,e))),i=Object(a.b)(this.end,(t=>Object(l.b)(Object(l.c)(t,e),1,e)));return new r({start:t,end:i})}intersection(e){if(!e)return this.clone();if(this.isEmpty||e.isEmpty)return r.empty;if(this.isAllTime)return e.clone();if(e.isAllTime)return this.clone();const t=Object(a.o)(this.start,-1/0,(e=>e.getTime())),i=Object(a.o)(this.end,1/0,(e=>e.getTime())),n=Object(a.o)(e.start,-1/0,(e=>e.getTime())),s=Object(a.o)(e.end,1/0,(e=>e.getTime()));let l,o;if(n>=t&&n<=i?l=n:t>=n&&t<=s&&(l=t),i>=n&&i<=s?o=i:s>=t&&s<=i&&(o=s),!isNaN(l)&&!isNaN(o)){const e=new r;return e.start=l===-1/0?null:new Date(l),e.end=o===1/0?null:new Date(o),e}return r.empty}offset(e,t){if(this.isEmpty||this.isAllTime)return this.clone();const i=new r,{start:n,end:s}=this;return Object(a.l)(n)&&(i.start=Object(l.b)(n,e,t)),Object(a.l)(s)&&(i.end=Object(l.b)(s,e,t)),i}union(e){if(!e||e.isEmpty)return this.clone();if(this.isEmpty)return e.clone();if(this.isAllTime||e.isAllTime)return h.clone();const t=Object(a.l)(this.start)&&Object(a.l)(e.start)?new Date(Math.min(this.start.getTime(),e.start.getTime())):null,i=Object(a.l)(this.end)&&Object(a.l)(e.end)?new Date(Math.max(this.end.getTime(),e.end.getTime())):null;return new r({start:t,end:i})}};Object(n.a)([Object(o.b)({type:Date,json:{write:{allowNull:!0}}})],f.prototype,"end",void 0),Object(n.a)([Object(c.a)("end")],f.prototype,"readEnd",null),Object(n.a)([Object(d.a)("end")],f.prototype,"writeEnd",null),Object(n.a)([Object(o.b)({readOnly:!0,json:{read:!1}})],f.prototype,"isAllTime",null),Object(n.a)([Object(o.b)({readOnly:!0,json:{read:!1}})],f.prototype,"isEmpty",null),Object(n.a)([Object(o.b)({type:Date,json:{write:{allowNull:!0}}})],f.prototype,"start",void 0),Object(n.a)([Object(c.a)("start")],f.prototype,"readStart",null),Object(n.a)([Object(d.a)("start")],f.prototype,"writeStart",null),f=r=Object(n.a)([Object(u.a)("esri.TimeExtent")],f);const h=new f,p=new f({start:void 0,end:void 0}),m=f},126:function(e,t,i){"use strict";i.d(t,"a",(function(){return u})),i.d(t,"b",(function(){return c})),i.d(t,"c",(function(){return l})),i.d(t,"d",(function(){return o})),i.d(t,"e",(function(){return a}));i(97);var r=i(85),n=i(94);let s;function a(){return s||(s=(async()=>{const e=await Promise.all([i.e(41),i.e(123),i.e(196)]).then(i.bind(null,369));return{arcade:e.arcade,arcadeUtils:e,Dictionary:e.Dictionary,Feature:e.arcadeFeature}})()),s}const l=(e,t,i)=>u.create(e,t,i,null,["$feature"]),o=(e,t,i)=>u.create(e,t,i,null,["$feature","$view"]),c=(e,t,i,r)=>u.create(e,t,i,r,["$feature","$view"]);class u{constructor(e,t,i,r,n,s,a,l){this.script=e,this.evaluate=n;const o=Array.isArray(a)?a:a.fields;this.fields=o,this._syntaxTree=r,this._arcade=t,this._arcadeDictionary=i,this._arcadeFeature=s,this._spatialReference=l,this._referencesGeometry=t.scriptTouchesGeometry(this._syntaxTree),this._referencesScale=this._arcade.referencesMember(this._syntaxTree,"scale")}static async create(e,t,i,s,l,o){const{arcade:c,Feature:d,Dictionary:f}=await a(),h=n.a.fromJSON(t),p=c.parseScript(e,o),m=l.reduce(((e,t)=>({...e,[t]:null})),{});let b=null;Object(r.l)(s)&&(b=new f(s),b.immutable=!0,m.$config=null);const y=c.scriptUsesGeometryEngine(p)&&c.enableGeometrySupport(),g=c.scriptUsesFeatureSet(p)&&c.enableFeatureSetSupport(),O=c.scriptIsAsync(p)&&c.enableAsyncSupport(),v={vars:m,spatialReference:h,useAsync:!!O},j=new f;j.immutable=!1,j.setField("scale",0);const w=c.compileScript(p,v);return await Promise.all([y,g,O]),new u(e,c,f,p,(e=>("$view"in e&&e.$view&&(j.setField("scale",e.$view.scale),e.$view=j),b&&(e.$config=b),w({vars:e,spatialReference:h}))),new d,i,h)}repurposeFeature(e){return e.geometry&&!e.geometry.spatialReference&&(e.geometry.spatialReference=this._spatialReference),this._arcadeFeature.repurposeFromGraphicLikeObject(e.geometry,e.attributes,{fields:this.fields}),this._arcadeFeature}repurposeAdapter(e){return this._arcadeFeature.repurposeFromAdapter(e,{fields:this.fields}),this._arcadeFeature}createDictionary(){return new this._arcadeDictionary}referencesMember(e){return this._arcade.referencesMember(this._syntaxTree,e)}referencesFunction(e){return this._arcade.referencesFunction(this._syntaxTree,e)}referencesGeometry(){return this._referencesGeometry}referencesScale(){return this._referencesScale}extractFieldLiterals(){return this._arcade.extractExpectedFieldLiterals(this._syntaxTree)}}},131:function(e,t,i){"use strict";i.d(t,"a",(function(){return u})),i.d(t,"b",(function(){return c}));var r=i(79),n=i(99),s=i(121),a=i(81),l=i(80),o=i(264);const c=e=>{let t=class extends e{destroy(){var e,t;this.destroyed||(null==(e=this._get("handles"))||e.destroy(),null==(t=this._get("updatingHandles"))||t.destroy())}get handles(){return this._get("handles")||new s.a}get updatingHandles(){return this._get("updatingHandles")||new o.a}};return Object(r.a)([Object(a.b)({readOnly:!0})],t.prototype,"handles",null),Object(r.a)([Object(a.b)({readOnly:!0})],t.prototype,"updatingHandles",null),t=Object(r.a)([Object(l.a)("esri.core.HandleOwner")],t),t};let u=class extends(c(n.a)){};u=Object(r.a)([Object(l.a)("esri.core.HandleOwner")],u)},143:function(e,t,i){"use strict";i.d(t,"a",(function(){return v})),i.d(t,"b",(function(){return b})),i.d(t,"c",(function(){return w})),i.d(t,"d",(function(){return h})),i.d(t,"e",(function(){return m})),i.d(t,"f",(function(){return _})),i.d(t,"g",(function(){return S})),i.d(t,"h",(function(){return g})),i.d(t,"i",(function(){return O})),i.d(t,"j",(function(){return f})),i.d(t,"k",(function(){return y})),i.d(t,"l",(function(){return j})),i.d(t,"m",(function(){return d})),i.d(t,"n",(function(){return p}));var r=i(120),n=i(96),s=i(94),a=i(160),l=i(85),o=(i(91),i(148));var c=i(311),u=i(248);const d={type:Boolean,value:!0,json:{origins:{service:{read:!1,write:!1},"web-map":{read:!1,write:!1}},name:"screenSizePerspective",write:!0}},f={type:Boolean,value:!0,json:{name:"disablePopup",read:{reader:(e,t)=>!t.disablePopup},write:{enabled:!0,writer(e,t,i){t[i]=!e}}}},h={type:Boolean,value:!0,json:{name:"showLabels",write:!0}},p={type:String,json:{origins:{"portal-item":{write:!1}},write:{isRequired:!0,ignoreOrigin:!0,writer:a.f}}},m={type:Boolean,value:!0,json:{origins:{service:{read:{enabled:!1}}},name:"showLegend",write:!0}},b={value:null,type:c.a,json:{origins:{service:{name:"elevationInfo",write:!0}},name:"layerDefinition.elevationInfo",write:!0}};function y(e){return{type:e,readOnly:!0,json:{origins:{service:{read:!0}},read:!1}}}const g={type:Number,json:{origins:{"web-document":{write:!0,read:!0},"portal-item":{write:!0}}}},O={...g,json:{...g.json,origins:{"web-document":{...g.json.origins["web-document"],write:{enabled:!0,target:{opacity:{type:Number},"layerDefinition.drawingInfo.transparency":{type:Number}}}}},read:{source:["layerDefinition.drawingInfo.transparency","drawingInfo.transparency"],reader:(e,t,i)=>i&&"service"!==i.origin||!t.drawingInfo||void 0===t.drawingInfo.transparency?t.layerDefinition&&t.layerDefinition.drawingInfo&&void 0!==t.layerDefinition.drawingInfo.transparency?Object(u.b)(t.layerDefinition.drawingInfo.transparency):void 0:Object(u.b)(t.drawingInfo.transparency)}}},v={type:r.a,readOnly:!0,get(){var e,t;if(null==(e=this.layer)||!e.timeInfo)return null;const{datesInUnknownTimezone:i,timeOffset:n,useViewTime:s}=this.layer,a=null==(t=this.view)?void 0:t.timeExtent;let c=this.layer.timeExtent;i&&(c=function(e){if(!e)return e;const{start:t,end:i}=e;return new r.a({start:Object(l.l)(t)?Object(o.b)(t,t.getTimezoneOffset(),"minutes"):t,end:Object(l.l)(i)?Object(o.b)(i,i.getTimezoneOffset(),"minutes"):i})}(c));let u=s?a&&c?a.intersection(c):a||c:c;if(!u||u.isEmpty||u.isAllTime)return u;n&&(u=u.offset(-n.value,n.unit)),i&&(u=function(e){if(!e)return e;const{start:t,end:i}=e;return new r.a({start:Object(l.l)(t)?Object(o.b)(t,-t.getTimezoneOffset(),"minutes"):t,end:Object(l.l)(i)?Object(o.b)(i,-i.getTimezoneOffset(),"minutes"):i})}(u));const d=this._get("timeExtent");return u.equals(d)?d:u}},j={type:n.a,readOnly:!0,json:{origins:{service:{read:{source:["fullExtent","spatialReference"],reader:(e,t)=>{const i=n.a.fromJSON(e);return null!=t.spatialReference&&"object"==typeof t.spatialReference&&(i.spatialReference=s.a.fromJSON(t.spatialReference)),i}}}},read:!1}},w={type:String,json:{origins:{service:{read:!1},"portal-item":{read:!1}}}},S={type:Number,json:{origins:{service:{write:{enabled:!1}}},read:{source:"layerDefinition.minScale"},write:{target:"layerDefinition.minScale"}}},_={type:Number,json:{origins:{service:{write:{enabled:!1}}},read:{source:"layerDefinition.maxScale"},write:{target:"layerDefinition.maxScale"}}}},148:function(e,t,i){"use strict";i.d(t,"a",(function(){return l})),i.d(t,"b",(function(){return s})),i.d(t,"c",(function(){return a}));i(82);const r={milliseconds:1,seconds:1e3,minutes:6e4,hours:36e5,days:864e5,weeks:6048e5,months:26784e5,years:31536e6,decades:31536e7,centuries:31536e8},n={milliseconds:{getter:"getMilliseconds",setter:"setMilliseconds",multiplier:1},seconds:{getter:"getSeconds",setter:"setSeconds",multiplier:1},minutes:{getter:"getMinutes",setter:"setMinutes",multiplier:1},hours:{getter:"getHours",setter:"setHours",multiplier:1},days:{getter:"getDate",setter:"setDate",multiplier:1},weeks:{getter:"getDate",setter:"setDate",multiplier:7},months:{getter:"getMonth",setter:"setMonth",multiplier:1},years:{getter:"getFullYear",setter:"setFullYear",multiplier:1},decades:{getter:"getFullYear",setter:"setFullYear",multiplier:10},centuries:{getter:"getFullYear",setter:"setFullYear",multiplier:100}};function s(e,t,i){const r=new Date(e.getTime());if(t&&i){const e=n[i],{getter:s,setter:a,multiplier:l}=e;r[a](r[s]()+t*l)}return r}function a(e,t){switch(t){case"milliseconds":return new Date(e.getTime());case"seconds":return new Date(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds());case"minutes":return new Date(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes());case"hours":return new Date(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours());case"days":return new Date(e.getFullYear(),e.getMonth(),e.getDate());case"weeks":return new Date(e.getFullYear(),e.getMonth(),e.getDate()-e.getDay());case"months":return new Date(e.getFullYear(),e.getMonth(),1);case"years":return new Date(e.getFullYear(),0,1);case"decades":return new Date(e.getFullYear()-e.getFullYear()%10,0,1);case"centuries":return new Date(e.getFullYear()-e.getFullYear()%100,0,1);default:return new Date}}function l(e,t,i){return 0===e?0:e*r[t]/r[i]}},191:function(e,t,i){"use strict";i.d(t,"a",(function(){return v}));var r=i(79),n=i(146),s=(i(97),i(102)),a=i(88),l=i(129),o=i(178),c=i(175),u=i(87),d=i(91),f=i(100),h=i(81),p=(i(84),i(82),i(83),i(80)),m=i(96),b=i(94);let y=0;const g=u.a.getLogger("esri.layers.Layer");let O=class extends(l.a.EventedMixin(Object(o.a)(c.a))){constructor(){super(...arguments),this.attributionDataUrl=null,this.fullExtent=new m.a(-180,-90,180,90,b.a.WGS84),this.id=Date.now().toString(16)+"-layer-"+y++,this.legendEnabled=!0,this.listMode="show",this.opacity=1,this.parent=null,this.popupEnabled=!0,this.attributionVisible=!0,this.spatialReference=b.a.WGS84,this.title=null,this.type=null,this.url=null,this.visible=!0}static async fromArcGISServerUrl(e){const t="string"==typeof e?{url:e}:e,r=await i.e(225).then(i.bind(null,389));try{return await r.fromUrl(t)}catch(n){throw g.error("#fromArcGISServerUrl({ url: '"+t.url+"'})","Failed to create layer from arcgis server url",n),n}}static async fromPortalItem(e){const t="portalItem"in e?e:{portalItem:e},r=await i.e(141).then(i.bind(null,372));try{return await r.fromItem(t)}catch(s){const e=t&&t.portalItem,i=e&&e.id||"unset",r=e&&e.portal&&e.portal.url||n.a.portalUrl;throw g.error("#fromPortalItem()","Failed to create layer from portal item (portal: '"+r+"', id: '"+i+"')",s),s}}initialize(){this.when().catch((e=>{var t,i;Object(d.l)(e)||u.a.getLogger(this.declaredClass).error("#load()",`Failed to load layer (title: '${null!=(t=this.title)?t:"no title"}', id: '${null!=(i=this.id)?i:"no id"}')`,{error:e})}))}destroy(){if(this.parent){const e=this,t=this.parent;"layers"in t&&t.layers.includes(e)?t.layers.remove(e):"tables"in t&&t.tables.includes(e)?t.tables.remove(e):"baseLayers"in t&&t.baseLayers.includes(e)?t.baseLayers.remove(e):"baseLayers"in t&&t.referenceLayers.includes(e)&&t.referenceLayers.remove(e)}}get hasAttributionData(){return null!=this.attributionDataUrl}get parsedUrl(){const e=this.url;return e?Object(f.K)(e):null}async fetchAttributionData(){const e=this.attributionDataUrl;if(this.hasAttributionData&&e)return(await Object(s.default)(e,{query:{f:"json"},responseType:"json"})).data;throw new a.a("layer:no-attribution-data","Layer does not have attribution data")}};Object(r.a)([Object(h.b)({type:String})],O.prototype,"attributionDataUrl",void 0),Object(r.a)([Object(h.b)({type:m.a})],O.prototype,"fullExtent",void 0),Object(r.a)([Object(h.b)({readOnly:!0})],O.prototype,"hasAttributionData",null),Object(r.a)([Object(h.b)({type:String})],O.prototype,"id",void 0),Object(r.a)([Object(h.b)({type:Boolean,nonNullable:!0})],O.prototype,"legendEnabled",void 0),Object(r.a)([Object(h.b)({type:["show","hide","hide-children"]})],O.prototype,"listMode",void 0),Object(r.a)([Object(h.b)({type:Number,range:{min:0,max:1},nonNullable:!0})],O.prototype,"opacity",void 0),Object(r.a)([Object(h.b)()],O.prototype,"parent",void 0),Object(r.a)([Object(h.b)({readOnly:!0})],O.prototype,"parsedUrl",null),Object(r.a)([Object(h.b)({type:Boolean})],O.prototype,"popupEnabled",void 0),Object(r.a)([Object(h.b)({type:Boolean})],O.prototype,"attributionVisible",void 0),Object(r.a)([Object(h.b)({type:b.a})],O.prototype,"spatialReference",void 0),Object(r.a)([Object(h.b)({type:String})],O.prototype,"title",void 0),Object(r.a)([Object(h.b)({type:String,readOnly:!0,json:{read:!1}})],O.prototype,"type",void 0),Object(r.a)([Object(h.b)()],O.prototype,"url",void 0),Object(r.a)([Object(h.b)({type:Boolean,nonNullable:!0})],O.prototype,"visible",void 0),O=Object(r.a)([Object(p.a)("esri.layers.Layer")],O);const v=O},197:function(e,t,i){"use strict";i.d(t,"a",(function(){return l})),i.d(t,"b",(function(){return o})),i.d(t,"c",(function(){return c})),i.d(t,"d",(function(){return u})),i.d(t,"e",(function(){return h})),i.d(t,"f",(function(){return p})),i.d(t,"g",(function(){return f})),i.d(t,"h",(function(){return d}));var r=i(94),n=i(138),s=i(110);function a(e){return new r.a({wkt:`GEOCCS["Spherical geocentric",\n    DATUM["Not specified",\n      SPHEROID["Sphere",${e.radius},0]],\n    PRIMEM["Greenwich",0.0,\n      AUTHORITY["EPSG","8901"]],\n    UNIT["m",1.0],\n    AXIS["Geocentric X",OTHER],\n    AXIS["Geocentric Y",EAST],\n    AXIS["Geocentric Z",NORTH]\n  ]`})}const l=a(n.a),o=a(n.b),c=a(n.c),u=new r.a({wkt:`GEOCCS["WGS 84",\n  DATUM["WGS_1984",\n    SPHEROID["WGS 84",${n.a.radius},298.257223563,\n      AUTHORITY["EPSG","7030"]],\n    AUTHORITY["EPSG","6326"]],\n  PRIMEM["Greenwich",0,\n    AUTHORITY["EPSG","8901"]],\n  UNIT["m",1.0,\n    AUTHORITY["EPSG","9001"]],\n  AXIS["Geocentric X",OTHER],\n  AXIS["Geocentric Y",OTHER],\n  AXIS["Geocentric Z",NORTH],\n  AUTHORITY["EPSG","4978"]\n]`});function d(e){return e&&e===n.b?o:e&&e===n.c?c:l}function f(e){return e&&(Object(s.i)(e)||e===o)?o:e&&(Object(s.j)(e)||e===c)?c:l}function h(e){return e&&(Object(s.i)(e)||e===o)?n.b:e&&(Object(s.j)(e)||e===c)?n.c:n.a}function p(e){return Object(s.n)(e)?n.b:Object(s.o)(e)?n.c:n.a}},212:function(e,t,i){"use strict";i.d(t,"a",(function(){return d})),i.d(t,"b",(function(){return s})),i.d(t,"c",(function(){return a})),i.d(t,"d",(function(){return u})),i.d(t,"e",(function(){return f}));i(201),i(162);var r=i(85),n=i(217);i(168);function s(e,t,i={}){return l(e,t,i,o)}function a(e,t,i={}){return l(e,t,i,c)}function l(e,t,i={},s){let a=null;const l=i.once?(e,i)=>{s(e)&&(Object(r.s)(a),t(e,i))}:(e,i)=>{s(e)&&t(e,i)};if(a=Object(n.e)(e,l,i.sync,i.equals),i.initial){const t=e();l(t,t)}return a}function o(e){return!0}function c(e){return!!e}const u={sync:!0},d={initial:!0},f={sync:!0,initial:!0}},225:function(e,t,i){"use strict";i.d(t,"a",(function(){return p})),i.d(t,"b",(function(){return d})),i.d(t,"c",(function(){return b})),i.d(t,"d",(function(){return j})),i.d(t,"e",(function(){return v})),i.d(t,"f",(function(){return f})),i.d(t,"g",(function(){return h})),i.d(t,"h",(function(){return y})),i.d(t,"i",(function(){return g})),i.d(t,"j",(function(){return m})),i.d(t,"k",(function(){return O}));var r=i(85),n=i(100),s=i(160);const a={mapserver:"MapServer",imageserver:"ImageServer",featureserver:"FeatureServer",sceneserver:"SceneServer",streamserver:"StreamServer",vectortileserver:"VectorTileServer"},l=Object.values(a),o=new RegExp(`^((?:https?:)?\\/\\/\\S+?\\/rest\\/services\\/(.+?)\\/(${l.join("|")}))(?:\\/(?:layers\\/)?(\\d+))?`,"i"),c=new RegExp(`^((?:https?:)?\\/\\/\\S+?\\/([^\\/\\n]+)\\/(${l.join("|")}))(?:\\/(?:layers\\/)?(\\d+))?`,"i"),u=/(.*?)\/(?:layers\/)?(\d+)\/?$/i;function d(e){return!!o.test(e)}function f(e){const t=Object(n.K)(e),i=t.path.match(o)||t.path.match(c);if(!i)return null;const[,r,s,l,u]=i,d=s.indexOf("/");return{title:p(-1!==d?s.slice(d+1):s),serverType:a[l.toLowerCase()],sublayer:null!=u&&""!==u?parseInt(u,10):null,url:{path:r}}}function h(e){const t=Object(n.K)(e).path.match(u);return t?{serviceUrl:t[1],sublayerId:Number(t[2])}:null}function p(e){return(e=e.replace(/\s*[/_]+\s*/g," "))[0].toUpperCase()+e.slice(1)}function m(e,t){const i=[];if(e){const t=f(e);Object(r.l)(t)&&t.title&&i.push(t.title)}if(t){const e=p(t);i.push(e)}if(2===i.length){if(-1!==i[0].toLowerCase().indexOf(i[1].toLowerCase()))return i[0];if(-1!==i[1].toLowerCase().indexOf(i[0].toLowerCase()))return i[1]}return i.join(" - ")}function b(e){if(!e)return!1;const t=-1!==(e=e.toLowerCase()).indexOf(".arcgis.com/"),i=-1!==e.indexOf("//services")||-1!==e.indexOf("//tiles")||-1!==e.indexOf("//features");return t&&i}function y(e,t){return e?Object(n.I)(Object(n.H)(e,t)):e}function g(e){let{url:t}=e;if(!t)return{url:t};t=Object(n.H)(t,e.logger);const i=Object(n.K)(t),s=f(i.path);let a;if(Object(r.l)(s))null!=s.sublayer&&null==e.layer.layerId&&(a=s.sublayer),t=s.url.path;else if(e.nonStandardUrlAllowed){const e=h(i.path);Object(r.l)(e)&&(t=e.serviceUrl,a=e.sublayerId)}return{url:Object(n.I)(t),layerId:a}}function O(e,t,i,r,a){Object(s.f)(t,r,"url",a),r.url&&null!=e.layerId&&(r.url=Object(n.z)(r.url,i,e.layerId.toString()))}function v(e){if(!e)return!1;const t=e.toLowerCase(),i=-1!==t.indexOf("/services/"),r=-1!==t.indexOf("/mapserver/wmsserver"),n=-1!==t.indexOf("/imageserver/wmsserver"),s=-1!==t.indexOf("/wmsserver");return i&&(r||n||s)}function j(e){if(!e)return!1;const t=new n.a(Object(n.A)(e)).authority.toLowerCase();return"server.arcgisonline.com"===t||"services.arcgisonline.com"===t}},227:function(e,t,i){"use strict";i.d(t,"a",(function(){return s}));var r=i(114),n=i(138);const s={inches:Object(r.b)(1,"meters","inches"),feet:Object(r.b)(1,"meters","feet"),"us-feet":Object(r.b)(1,"meters","us-feet"),yards:Object(r.b)(1,"meters","yards"),miles:Object(r.b)(1,"meters","miles"),"nautical-miles":Object(r.b)(1,"meters","nautical-miles"),millimeters:Object(r.b)(1,"meters","millimeters"),centimeters:Object(r.b)(1,"meters","centimeters"),decimeters:Object(r.b)(1,"meters","decimeters"),meters:Object(r.b)(1,"meters","meters"),kilometers:Object(r.b)(1,"meters","kilometers"),"decimal-degrees":1/Object(r.k)(1,"meters",n.a.radius)}},239:function(e,t,i){"use strict";i.d(t,"a",(function(){return s})),i.d(t,"b",(function(){return a})),i.d(t,"c",(function(){return l}));var r=i(85),n=i(215);const s=-3;class a{constructor(e,t,i){this._namespace=e,this._storage=t,this._removeFunc=!1,this._hit=0,this._miss=0,this._storage.register(this),this._namespace+=":",i&&(this._storage.registerRemoveFunc(this._namespace,i),this._removeFunc=!0)}destroy(){this._storage.clear(this._namespace),this._removeFunc&&this._storage.deregisterRemoveFunc(this._namespace),this._storage.deregister(this),this._storage=null}get namespace(){return this._namespace.slice(0,-1)}get hitRate(){return this._hit/(this._hit+this._miss)}get size(){return this._storage.size}get maxSize(){return this._storage.maxSize}resetHitRate(){this._hit=this._miss=0}put(e,t,i,r=0){this._storage.put(this._namespace+e,t,i,r)}get(e){const t=this._storage.get(this._namespace+e);return void 0===t?++this._miss:++this._hit,t}pop(e){const t=this._storage.pop(this._namespace+e);return void 0===t?++this._miss:++this._hit,t}updateSize(e,t,i){this._storage.updateSize(this._namespace+e,t,i)}clear(){this._storage.clear(this._namespace)}clearAll(){this._storage.clearAll()}getStats(){return this._storage.getStats()}resetStats(){this._storage.resetStats()}}class l{constructor(e=10485760){this._maxSize=e,this._db=new Map,this._size=0,this._hit=0,this._miss=0,this._removeFuncs=new n.a,this._users=new n.a}destroy(){this.clearAll(),this._removeFuncs.clear(),this._users.clear(),this._db=null}register(e){this._users.push(e)}deregister(e){this._users.removeUnordered(e)}registerRemoveFunc(e,t){this._removeFuncs.push([e,t])}deregisterRemoveFunc(e){this._removeFuncs.filterInPlace((t=>t[0]!==e))}get size(){return this._size}get maxSize(){return this._maxSize}set maxSize(e){this._maxSize=Math.max(e,0),this._checkSizeLimit()}put(e,t,i,r){const n=this._db.get(e);if(n&&(this._size-=n.size,this._db.delete(e),n.entry!==t&&this._notifyRemove(e,n.entry,0)),i>this._maxSize)return void this._notifyRemove(e,t,0);if(void 0===t)return void console.warn("Refusing to cache undefined entry ");if(!i||i<0)return void console.warn("Refusing to cache entry with invalid size "+i);const a=1+Math.max(r,s)-s;this._db.set(e,{entry:t,size:i,lifetime:a,lives:a}),this._size+=i,this._checkSizeLimit()}updateSize(e,t,i){const n=this._db.get(e);if(n&&n.entry===t){for(this._size-=n.size;i>this._maxSize;){const n=this._notifyRemove(e,t,1);if(!(Object(r.l)(n)&&n>0))return void this._db.delete(e);i=n}n.size=i,this._size+=i,this._checkSizeLimit()}}pop(e){const t=this._db.get(e);if(t)return this._size-=t.size,this._db.delete(e),++this._hit,t.entry;++this._miss}get(e){const t=this._db.get(e);if(void 0!==t)return this._db.delete(e),t.lives=t.lifetime,this._db.set(e,t),++this._hit,t.entry;++this._miss}getStats(){const e={Size:Math.round(this._size/1048576)+"/"+Math.round(this._maxSize/1048576)+"MB","Hit rate":Math.round(100*this._getHitRate())+"%",Entries:this._db.size.toString()},t={},i=new Array;this._db.forEach(((e,r)=>{const n=e.lifetime;i[n]=(i[n]||0)+e.size,this._users.forAll((i=>{const n=i.namespace;if(r.startsWith(n)){const i=t[n]||0;t[n]=i+e.size}}))}));const r={};this._users.forAll((e=>{const i=e.namespace;if(!isNaN(e.hitRate)&&e.hitRate>0){const n=t[i]||0;t[i]=n,r[i]=Math.round(100*e.hitRate)+"%"}else r[i]="0%"}));const n=Object.keys(t);n.sort(((e,i)=>t[i]-t[e])),n.forEach((i=>e[i]=Math.round(t[i]/2**20)+"MB / "+r[i]));for(let a=i.length-1;a>=0;--a){const t=i[a];t&&(e["Priority "+(a+s-1)]=Math.round(t/this.size*100)+"%")}return e}resetStats(){this._hit=this._miss=0,this._users.forAll((e=>e.resetHitRate()))}clear(e){this._db.forEach(((t,i)=>{i.startsWith(e)&&(this._size-=t.size,this._db.delete(i),this._notifyRemove(i,t.entry,0))}))}clearAll(){this._db.forEach(((e,t)=>this._notifyRemove(t,e.entry,0))),this._size=0,this._db.clear()}_getHitRate(){return this._hit/(this._hit+this._miss)}_notifyRemove(e,t,i){let r;return this._removeFuncs.some((n=>{if(e.startsWith(n[0])){const e=n[1](t,i);return"number"==typeof e&&(r=e),!0}return!1})),r}_checkSizeLimit(){if(!(this._size<=this._maxSize))for(const[e,t]of this._db){if(this._db.delete(e),t.lives<=1){this._size-=t.size;const i=this._notifyRemove(e,t.entry,1);Object(r.l)(i)&&i>0&&(this._size+=i,t.lives=t.lifetime,t.size=i,this._db.set(e,t))}else--t.lives,this._db.set(e,t);if(this._size<=.9*this.maxSize)return}}}},241:function(e,t,i){"use strict";i.d(t,"a",(function(){return h}));var r=i(79),n=i(88),s=i(100),a=i(81),l=(i(84),i(82),i(83),i(80)),o=i(92),c=i(276),u=i(280);const d={"web-scene/operational-layers":{ArcGISFeatureLayer:!0,ArcGISImageServiceLayer:!0,ArcGISMapServiceLayer:!0,ArcGISSceneServiceLayer:!0,ArcGISTiledElevationServiceLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,BuildingSceneLayer:!0,GroupLayer:!0,IntegratedMeshLayer:!0,OGCFeatureLayer:!0,PointCloudLayer:!0,WebTiledLayer:!0,CSV:!0,GeoJSON:!0,VectorTileLayer:!0,WFS:!0,WMS:!0,KML:!0,RasterDataLayer:!0,Voxel:!1},"web-scene/basemap":{ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,WebTiledLayer:!0,OpenStreetMap:!0,VectorTileLayer:!0,ArcGISImageServiceLayer:!0,WMS:!0,ArcGISMapServiceLayer:!0},"web-scene/ground":{ArcGISTiledElevationServiceLayer:!0,RasterDataElevationLayer:!0},"web-map/operational-layers":{ArcGISFeatureLayer:!0,ArcGISImageServiceLayer:!0,ArcGISImageServiceVectorLayer:!0,ArcGISMapServiceLayer:!0,ArcGISStreamLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,BingMapsAerial:!0,BingMapsHybrid:!0,BingMapsRoad:!0,CSV:!0,GeoRSS:!0,GeoJSON:!0,GroupLayer:!0,KML:!0,OGCFeatureLayer:!0,SubtypeGroupLayer:!0,VectorTileLayer:!0,WFS:!0,WMS:!0,WebTiledLayer:!0},"web-map/basemap":{ArcGISImageServiceLayer:!0,ArcGISImageServiceVectorLayer:!0,ArcGISMapServiceLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,OpenStreetMap:!0,VectorTileLayer:!0,WMS:!0,WebTiledLayer:!0,BingMapsAerial:!0,BingMapsRoad:!0,BingMapsHybrid:!0},"web-map/tables":{ArcGISFeatureLayer:!0},"portal-item/operational-layers":{ArcGISSceneServiceLayer:!0,PointCloudLayer:!0,BuildingSceneLayer:!0,IntegratedMeshLayer:!0}};var f=i(143);const h=e=>{let t=class extends e{constructor(){super(...arguments),this.title=null}writeListMode(e,t,i,r){(r&&"ground"===r.layerContainerType||e&&Object(u.a)(this,i,{},r))&&(t[i]=e)}writeOperationalLayerType(e,t,i,r){!e||r&&"tables"===r.layerContainerType||(t.layerType=e)}writeTitle(e,t){t.title=e||"Layer"}read(e,t){t&&(t.layer=this),Object(c.b)(this,e,(t=>super.read(e,t)),t)}write(e,t){if(null!=t&&t.origin){const e=`${t.origin}/${t.layerContainerType||"operational-layers"}`,r=d[e];let s=r&&r[this.operationalLayerType];var i;if("ArcGISTiledElevationServiceLayer"===this.operationalLayerType&&"web-scene/operational-layers"===e&&(s=!1),!s)return null==(i=t.messages)||i.push(new n.a("layer:unsupported",`Layers (${this.title}, ${this.id}) of type '${this.declaredClass}' are not supported in the context of '${e}'`,{layer:this})),null}const r=super.write(e,{...t,layer:this}),a=!!t&&!!t.messages&&!!t.messages.filter((e=>e instanceof n.a&&"web-document-write:property-required"===e.name)).length;var l;return Object(s.t)(null==r?void 0:r.url)?(null==t||null==(l=t.messages)||l.push(new n.a("layer:invalid-url",`Layer (${this.title}, ${this.id}) of type '${this.declaredClass}' using a Blob URL cannot be written to web scenes and web maps`,{layer:this})),null):!this.url&&a?null:r}beforeSave(){}};return Object(r.a)([Object(a.b)({type:String,json:{write:{ignoreOrigin:!0},origins:{"web-scene":{write:{isRequired:!0,ignoreOrigin:!0}},"portal-item":{write:!1}}}})],t.prototype,"id",void 0),Object(r.a)([Object(a.b)({json:{write:{ignoreOrigin:!0},origins:{"web-map":{read:!1,write:!1}}}})],t.prototype,"listMode",void 0),Object(r.a)([Object(o.a)("listMode")],t.prototype,"writeListMode",null),Object(r.a)([Object(a.b)({type:String,readOnly:!0,json:{read:!1,write:{target:"layerType",ignoreOrigin:!0},origins:{"portal-item":{write:!1}}}})],t.prototype,"operationalLayerType",void 0),Object(r.a)([Object(o.a)("operationalLayerType")],t.prototype,"writeOperationalLayerType",null),Object(r.a)([Object(a.b)(f.h)],t.prototype,"opacity",void 0),Object(r.a)([Object(a.b)({type:String,json:{write:{ignoreOrigin:!0,writerEnsuresNonNull:!0},origins:{"web-scene":{write:{isRequired:!0,ignoreOrigin:!0,writerEnsuresNonNull:!0}},"portal-item":{write:!1}}},value:"Layer"})],t.prototype,"title",void 0),Object(r.a)([Object(o.a)("title")],t.prototype,"writeTitle",null),Object(r.a)([Object(a.b)({type:Boolean,json:{name:"visibility",origins:{"web-document":{name:"visibility",default:!0},"portal-item":{name:"visibility",read:{source:["visible","visibility"]}}}}})],t.prototype,"visible",void 0),t=Object(r.a)([Object(l.a)("esri.layers.mixins.OperationalLayer")],t),t}},264:function(e,t,i){"use strict";i.d(t,"a",(function(){return h}));var r=i(79),n=i(99),s=i(121),a=i(85),l=i(212),o=i(236),c=i(112),u=i(216),d=i(81),f=i(80);let h=class extends n.a{constructor(){super(...arguments),this.updating=!1,this.handleId=0,this.handles=new s.a,this.scheduleHandleId=0,this.pendingPromises=new Set}destroy(){this.removeAll(),this.handles.destroy()}add(e,t,i,r=0){const n=0!=(1&r),s=++this.handleId;n||this.installSyncUpdatingWatch(e,t,s);const a=0!=(2&r)?Object(c.a)(e,t,i,n):e.watch(t,i,n);return this.handles.add(a,s),{remove:()=>this.handles.remove(s)}}addOnCollectionPropertyChange(e,t,i,r=0){const n=0!=(2&r),s=++this.handleId;return this.handles.add([Object(c.b)(e,t,"after-changes",this.createSyncUpdatingCallback()),Object(c.b)(e,t,"change",i,n?e=>{i({added:e.items,removed:[],moved:[],target:e})}:void 0)],s),{remove:()=>{this.handles.remove(s)}}}addOnCollectionChange(e,t,i=0){const r=0!=(2&i),n=++this.handleId;return this.handles.add([e.on("after-changes",this.createSyncUpdatingCallback()),e.on("change",t)],n),r&&t({added:e.items,removed:[],moved:[],target:e}),{remove:()=>{this.handles.remove(n)}}}addPromise(e){if(Object(a.k)(e))return e;const t=++this.handleId;this.handles.add({remove:()=>{this.pendingPromises.delete(e)&&(0!==this.pendingPromises.size||this.handles.has(p)||this._set("updating",!1))}},t),this.pendingPromises.add(e),this._set("updating",!0);const i=()=>this.handles.remove(t);return e.then(i,i),e}removeAll(){this.pendingPromises.clear(),this.handles.removeAll(),this._set("updating",!1)}installSyncUpdatingWatch(e,t,i){const r=this.createSyncUpdatingCallback(),n=Object(l.b)((()=>Object(u.c)(e,t)),r,{sync:!0,equals:()=>!1});return this.handles.add(n,i),n}createSyncUpdatingCallback(){return()=>{this.handles.remove(p),++this.scheduleHandleId;const e=this.scheduleHandleId;this._get("updating")||this._set("updating",!0),this.handles.add(Object(o.b)((()=>{e===this.scheduleHandleId&&(this._set("updating",this.pendingPromises.size>0),this.handles.remove(p))})),p)}}};Object(r.a)([Object(d.b)({readOnly:!0})],h.prototype,"updating",void 0),h=Object(r.a)([Object(f.a)("esri.views.support.WatchUpdatingTracking")],h);const p=-42},265:function(e,t,i){"use strict";var r;function n(e,t){switch(e.type){case"range":{const i="range"in e?e.range[0]:e.minValue,n="range"in e?e.range[1]:e.maxValue;if(+t<i||+t>n)return r.VALUE_OUT_OF_RANGE;break}case"coded-value":case"codedValue":if(null==e.codedValues||e.codedValues.every((e=>null==e||e.code!==t)))return r.INVALID_CODED_VALUE}return null}function s(e){if(e&&"range"===e.type)return{min:"range"in e?e.range[0]:e.minValue,max:"range"in e?e.range[1]:e.maxValue}}i.d(t,"a",(function(){return r})),i.d(t,"b",(function(){return s})),i.d(t,"c",(function(){return n})),function(e){e.VALUE_OUT_OF_RANGE="domain-validation-error::value-out-of-range",e.INVALID_CODED_VALUE="domain-validation-error::invalid-coded-value"}(r||(r={}))},282:function(e,t,i){"use strict";i.d(t,"a",(function(){return n}));var r=i(239);class n{constructor(e,t){this._storage=new r.c,this._storage.maxSize=e,t&&this._storage.registerRemoveFunc("",t)}put(e,t,i){this._storage.put(e,t,i,1)}pop(e){return this._storage.pop(e)}get(e){return this._storage.get(e)}clear(){this._storage.clearAll()}destroy(){this._storage.destroy()}get maxSize(){return this._storage.maxSize}set maxSize(e){this._storage.maxSize=e}}},317:function(e,t,i){"use strict";i.d(t,"a",(function(){return c}));var r=i(79),n=i(87),s=i(85),a=i(81),l=(i(84),i(82),i(83),i(80)),o=i(225);const c=e=>{let t=class extends e{get title(){if(this._get("title")&&"defaults"!==this.originOf("title"))return this._get("title");if(this.url){const e=Object(o.f)(this.url);if(Object(s.l)(e)&&e.title)return e.title}return this._get("title")||""}set title(e){this._set("title",e)}set url(e){this._set("url",Object(o.h)(e,n.a.getLogger(this.declaredClass)))}};return Object(r.a)([Object(a.b)()],t.prototype,"title",null),Object(r.a)([Object(a.b)({type:String})],t.prototype,"url",null),t=Object(r.a)([Object(l.a)("esri.layers.mixins.ArcGISService")],t),t}},385:function(e,t,i){"use strict";i.d(t,"a",(function(){return w}));var r,n=i(79),s=i(90),a=i(86),l=i(85),o=i(114),c=i(81),u=(i(84),i(82),i(83)),d=i(93),f=i(80),h=i(92),p=i(109),m=i(94),b=i(118),y=i(110),g=i(164),O=i(511);const v=new s.a({PNG:"png",PNG8:"png8",PNG24:"png24",PNG32:"png32",JPEG:"jpg",JPG:"jpg",DIB:"dib",TIFF:"tiff",EMF:"emf",PS:"ps",PDF:"pdf",GIF:"gif",SVG:"svg",SVGZ:"svgz",Mixed:"mixed",MIXED:"mixed",LERC:"lerc",LERC2D:"lerc2d",RAW:"raw",pbf:"pbf"});let j=r=class extends a.a{constructor(e){super(e),this.dpi=96,this.format=null,this.origin=null,this.minScale=0,this.maxScale=0,this.size=null,this.spatialReference=null}static create(e={}){const{resolutionFactor:t=1,scales:i,size:n=256,spatialReference:s=m.a.WebMercator,numLODs:a=24}=e;if(!Object(y.l)(s)){const e=[];if(i)for(let t=0;t<i.length;t++){const r=i[t];e.push({level:t,scale:r,resolution:r})}else{let t=5e-4;for(let i=a-1;i>=0;i--)e.unshift({level:i,scale:t,resolution:t}),t*=2}return new r({dpi:96,lods:e,origin:new p.a(0,0,s),size:[n,n],spatialReference:s})}const l=Object(y.e)(s),c=e.origin?new p.a({x:e.origin.x,y:e.origin.y,spatialReference:s}):new p.a(l?{x:l.origin[0],y:l.origin[1],spatialReference:s}:{x:0,y:0,spatialReference:s}),u=1/(39.37*Object(o.e)(s)*96),d=[];if(i)for(let r=0;r<i.length;r++){const e=i[r],t=e*u;d.push({level:r,scale:e,resolution:t})}else{let e=Object(y.h)(s)?512/n*591657527.5917094:256/n*591657527.591555;const i=Math.ceil(a/t);d.push({level:0,scale:e,resolution:e*u});for(let r=1;r<i;r++){const i=e/2**t,n=i*u;d.push({level:r,scale:i,resolution:n}),e=i}}return new r({dpi:96,lods:d,origin:c,size:[n,n],spatialReference:s})}get isWrappable(){const{spatialReference:e,origin:t}=this;if(e&&t){const i=Object(y.e)(e);return e.isWrappable&&Math.abs(i.origin[0]-t.x)<=i.dx}return!1}readOrigin(e,t){return p.a.fromJSON({spatialReference:t.spatialReference,...e})}set lods(e){let t=0,i=0;const r=[];this._levelToLOD={},e&&(t=-1/0,i=1/0,e.forEach((e=>{r.push(e.scale),t=e.scale>t?e.scale:t,i=e.scale<i?e.scale:i,this._levelToLOD[e.level]=e}))),this._set("scales",r),this._set("minScale",t),this._set("maxScale",i),this._set("lods",e),this._initializeUpsampleLevels()}readSize(e,t){return[t.cols,t.rows]}writeSize(e,t){t.cols=e[0],t.rows=e[1]}zoomToScale(e){const t=this.scales;if(e<=0)return t[0];if(e>=t.length-1)return t[t.length-1];{const i=Math.floor(e),r=i+1;return t[i]/(t[i]/t[r])**(e-i)}}scaleToZoom(e){const t=this.scales,i=t.length-1;let r=0;for(;r<i;r++){const i=t[r],n=t[r+1];if(i<=e)return r;if(n===e)return r+1;if(i>e&&n<e)return r+Math.log(i/e)/Math.log(i/n)}return r}snapScale(e,t=.95){const i=this.scaleToZoom(e);return i%Math.floor(i)>=t?this.zoomToScale(Math.ceil(i)):this.zoomToScale(Math.floor(i))}tileAt(e,t,i,r){const n=this.lodAt(e);if(!n)return null;let s,a;if("number"==typeof t)s=t,a=i;else if(Object(y.d)(t.spatialReference,this.spatialReference))s=t.x,a=t.y,r=i;else{const e=Object(g.d)(t,this.spatialReference);if(Object(l.k)(e))return null;s=e.x,a=e.y,r=i}const o=n.resolution*this.size[0],c=n.resolution*this.size[1];return r||(r={id:null,level:0,row:0,col:0,extent:Object(b.l)()}),r.level=e,r.row=Math.floor((this.origin.y-a)/c+.001),r.col=Math.floor((s-this.origin.x)/o+.001),this.updateTileInfo(r),r}updateTileInfo(e,t=0){let i=this.lodAt(e.level);if(!i&&1===t){const t=this.lods[this.lods.length-1];t.level<e.level&&(i=t)}if(!i)return;const r=e.level-i.level,n=i.resolution*this.size[0]/2**r,s=i.resolution*this.size[1]/2**r;e.id=`${e.level}/${e.row}/${e.col}`,e.extent||(e.extent=Object(b.l)()),e.extent[0]=this.origin.x+e.col*n,e.extent[1]=this.origin.y-(e.row+1)*s,e.extent[2]=e.extent[0]+n,e.extent[3]=e.extent[1]+s}upsampleTile(e){const t=this._upsampleLevels[e.level];return!(!t||-1===t.parentLevel)&&(e.level=t.parentLevel,e.row=Math.floor(e.row/t.factor+.001),e.col=Math.floor(e.col/t.factor+.001),this.updateTileInfo(e),!0)}getTileBounds(e,t){const{resolution:i}=this.lodAt(t.level),r=i*this.size[0],n=i*this.size[1];return e[0]=this.origin.x+t.col*r,e[1]=this.origin.y-(t.row+1)*n,e[2]=e[0]+r,e[3]=e[1]+n,e}lodAt(e){return this._levelToLOD&&this._levelToLOD[e]||null}clone(){return r.fromJSON(this.write({}))}_initializeUpsampleLevels(){const e=this.lods;this._upsampleLevels=[];let t=null;for(let i=0;i<e.length;i++){const r=e[i];this._upsampleLevels[r.level]={parentLevel:t?t.level:-1,factor:t?t.resolution/r.resolution:0},t=r}}};Object(n.a)([Object(c.b)({type:Number,json:{write:!0}})],j.prototype,"compressionQuality",void 0),Object(n.a)([Object(c.b)({type:Number,json:{write:!0}})],j.prototype,"dpi",void 0),Object(n.a)([Object(c.b)({type:String,json:{read:v.read,write:v.write,origins:{"web-scene":{read:!1,write:!1}}}})],j.prototype,"format",void 0),Object(n.a)([Object(c.b)({readOnly:!0})],j.prototype,"isWrappable",null),Object(n.a)([Object(c.b)({type:p.a,json:{write:!0}})],j.prototype,"origin",void 0),Object(n.a)([Object(d.a)("origin")],j.prototype,"readOrigin",null),Object(n.a)([Object(c.b)({type:[O.a],value:null,json:{write:!0}})],j.prototype,"lods",null),Object(n.a)([Object(c.b)({readOnly:!0})],j.prototype,"minScale",void 0),Object(n.a)([Object(c.b)({readOnly:!0})],j.prototype,"maxScale",void 0),Object(n.a)([Object(c.b)({readOnly:!0})],j.prototype,"scales",void 0),Object(n.a)([Object(c.b)({cast:e=>Array.isArray(e)?e:"number"==typeof e?[e,e]:[256,256]})],j.prototype,"size",void 0),Object(n.a)([Object(d.a)("size",["rows","cols"])],j.prototype,"readSize",null),Object(n.a)([Object(h.a)("size",{cols:{type:u.a},rows:{type:u.a}})],j.prototype,"writeSize",null),Object(n.a)([Object(c.b)({type:m.a,json:{write:!0}})],j.prototype,"spatialReference",void 0),j=r=Object(n.a)([Object(f.a)("esri.layers.support.TileInfo")],j);const w=j},511:function(e,t,i){"use strict";i.d(t,"a",(function(){return u}));var r,n=i(79),s=i(86),a=i(81),l=(i(84),i(82),i(83)),o=i(80);let c=r=class extends s.a{constructor(e){super(e),this.cols=null,this.level=0,this.levelValue=null,this.origin=null,this.resolution=0,this.rows=null,this.scale=0}clone(){return new r({cols:this.cols,level:this.level,levelValue:this.levelValue,resolution:this.resolution,rows:this.rows,scale:this.scale})}};Object(n.a)([Object(a.b)({json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],c.prototype,"cols",void 0),Object(n.a)([Object(a.b)({type:l.a,json:{write:!0}})],c.prototype,"level",void 0),Object(n.a)([Object(a.b)({type:String,json:{write:!0}})],c.prototype,"levelValue",void 0),Object(n.a)([Object(a.b)({json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],c.prototype,"origin",void 0),Object(n.a)([Object(a.b)({type:Number,json:{write:!0}})],c.prototype,"resolution",void 0),Object(n.a)([Object(a.b)({json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],c.prototype,"rows",void 0),Object(n.a)([Object(a.b)({type:Number,json:{write:!0}})],c.prototype,"scale",void 0),c=r=Object(n.a)([Object(o.a)("esri.layers.support.LOD")],c);const u=c},762:function(e,t,i){"use strict";i.d(t,"a",(function(){return s})),i.d(t,"b",(function(){return n}));var r=i(385);const n={type:r.a,json:{origins:{service:{read:{source:["tileInfo","minScale","maxScale","minLOD","maxLOD"],reader:s}}}}};function s(e,t,i,n){if(!e)return null;const{minScale:s,maxScale:a,minLOD:l,maxLOD:o}=t;if(null!=l&&null!=o)return n&&n.ignoreMinMaxLOD?r.a.fromJSON(e):r.a.fromJSON({...e,lods:e.lods.filter((({level:e})=>null!=e&&e>=l&&e<=o))});if(0!==s&&0!==a){const t=e=>Math.round(1e4*e)/1e4,i=s?t(s):1/0,n=a?t(a):-1/0;return r.a.fromJSON({...e,lods:e.lods.filter((e=>{const r=t(e.scale);return r<=i&&r>=n}))})}return r.a.fromJSON(e)}},791:function(e,t,i){"use strict";i.d(t,"a",(function(){return _}));var r,n=i(79),s=i(102),a=i(99),l=i(88),o=i(131),c=i(87),u=i(282),d=i(215),f=i(91),h=i(236),p=i(100),m=i(112),b=i(81),y=i(84),g=(i(82),i(104)),O=i(80),v=i(89);class j{constructor(){this.location={left:0,top:0,width:0,height:0},this._allAvailability="unknown",this.byteSize=40}getAvailability(e,t){if("unknown"!==this._allAvailability)return this._allAvailability;const i=(e-this.location.top)*this.location.width+(t-this.location.left),r=i%8,n=i>>3,s=this._tileAvailabilityBitSet;return n<0||n>s.length?"unknown":s[n]&1<<r?"available":"unavailable"}_updateFromData(e){const t=this.location.width,i=this.location.height;let r=!0,n=!0;const s=Math.ceil(t*i/8),a=new Uint8Array(s);let l=0;for(let o=0;o<e.length;o++){const t=o%8;e[o]?(n=!1,a[l]|=1<<t):r=!1,7===t&&++l}n?this._allAvailability="unavailable":r?this._allAvailability="available":(this._allAvailability="unknown",this._tileAvailabilityBitSet=a,this.byteSize+=a.length)}static fromDefinition(e,t){const i=e.service.request||s.default,{row:r,col:n,width:a,height:o}=e,c={query:{f:"json"}};return t=t?{...c,...t}:c,i(function(e){let t;if("vector-tile"===e.service.type)t=`${e.service.url}/tilemap/${e.level}/${e.row}/${e.col}/${e.width}/${e.height}`;else{const i=e.service.tileServers;t=`${i&&i.length?i[e.row%i.length]:e.service.url}/tilemap/${e.level}/${e.row}/${e.col}/${e.width}/${e.height}`}const i=e.service.query;return i&&(t=`${t}?${i}`),t}(e),t).then((e=>e.data)).catch((e=>{if(e&&e.details&&422===e.details.httpStatus)return{location:{top:r,left:n,width:a,height:o},valid:!0,data:Object(y.b)(a*o,0)};throw e})).then((e=>{if(e.location&&(e.location.top!==r||e.location.left!==n||e.location.width!==a||e.location.height!==o))throw new l.a("tilemap:location-mismatch","Tilemap response for different location than requested",{response:e,definition:{top:r,left:n,width:a,height:o}});return j.fromJSON(e)}))}static fromJSON(e){j.validateJSON(e);const t=new j;return t.location=Object.freeze(Object(v.a)(e.location)),t._updateFromData(e.data),Object.freeze(t)}static validateJSON(e){if(!e||!e.location)throw new l.a("tilemap:missing-location","Location missing from tilemap response");if(!1===e.valid)throw new l.a("tilemap:invalid","Tilemap response was marked as invalid");if(!e.data)throw new l.a("tilemap:missing-data","Data missing from tilemap response");if(!Array.isArray(e.data))throw new l.a("tilemap:data-mismatch","Data must be an array of numbers");if(e.data.length!==e.location.width*e.location.height)throw new l.a("tilemap:data-mismatch","Number of data items does not match width/height of tilemap")}}function w(e){return`${e.level}/${e.row}/${e.col}/${e.width}/${e.height}`}const S=c.a.getLogger("esri.layers.support.TilemapCache");let _=r=class extends(Object(o.b)(a.a)){constructor(e){super(e),this._pendingTilemapRequests={},this._availableLevels={},this.levels=5,this.cacheByteSize=2097152,this.request=s.default,this._prefetchingEnabled=!0}initialize(){this._tilemapCache=new u.a(this.cacheByteSize),this.handles.add([this.watch(["layer.parsedUrl","layer.tileServers?","layer.apiKey?","layer.customParameters?"],(()=>this._initializeTilemapDefinition())),Object(m.a)(this,"layer.tileInfo.lods",(e=>this._initializeAvailableLevels(e)),!0)]),this._initializeTilemapDefinition()}castLevels(e){return e<=2?(S.error("Minimum levels for Tilemap is 3, but got ",e),3):e}get size(){return 1<<this.levels}fetchTilemap(e,t,i,r){if(!this._availableLevels[e])return Promise.reject(new l.a("tilemap-cache:level-unavailable",`Level ${e} is unavailable in the service`));const n=this._tmpTilemapDefinition,s=this._tilemapFromCache(e,t,i,n);if(s)return Promise.resolve(s);const a=r&&r.signal;return r={...r,signal:null},new Promise(((e,t)=>{Object(f.p)(a,(()=>t(Object(f.d)())));const i=w(n);let s=this._pendingTilemapRequests[i];if(!s){s=j.fromDefinition(n,r).then((e=>(this._tilemapCache.put(i,e,e.byteSize),e)));const e=()=>delete this._pendingTilemapRequests[i];this._pendingTilemapRequests[i]=s,s.then(e,e)}s.then(e,t)}))}getAvailability(e,t,i){if(!this._availableLevels[e])return"unavailable";const r=this._tilemapFromCache(e,t,i,this._tmpTilemapDefinition);return r?r.getAvailability(t,i):"unknown"}fetchAvailability(e,t,i,r){return this._availableLevels[e]?this.fetchTilemap(e,t,i,r).catch((e=>e)).then((r=>{if(r instanceof j){const n=r.getAvailability(t,i);return"unavailable"===n?Promise.reject(new l.a("tile-map:tile-unavailable","Tile is not available",{level:e,row:t,col:i})):n}if(Object(f.l)(r))throw r;return"unknown"})):Promise.reject(new l.a("tilemap-cache:level-unavailable",`Level ${e} is unavailable in the service`))}fetchAvailabilityUpsample(e,t,i,r,n){r.level=e,r.row=t,r.col=i;const s=this.layer.tileInfo;s.updateTileInfo(r);const a=this.fetchAvailability(e,t,i,n).catch((e=>{if(Object(f.l)(e))throw e;if(s.upsampleTile(r))return this.fetchAvailabilityUpsample(r.level,r.row,r.col,r);throw e}));return this._fetchAvailabilityUpsamplePrefetch(r.id,e,t,i,n,a),a}async _fetchAvailabilityUpsamplePrefetch(e,t,i,n,s,a){if(!this._prefetchingEnabled)return;const l=`prefetch-${e}`;if(this.handles.has(l))return;const o=new AbortController;a.then((()=>o.abort()),(()=>o.abort()));let c=!1;const u={remove(){c||(c=!0,o.abort())}};if(this.handles.add(u,l),await Object(h.c)(10,o.signal).catch((()=>{})),c||(c=!0,this.handles.remove(l)),Object(f.m)(o))return;const d={id:e,level:t,row:i,col:n},p={...s,signal:o.signal},m=this.layer.tileInfo;for(let f=0;r._prefetches.length<r._maxPrefetch&&m.upsampleTile(d);++f){const e=this.fetchAvailability(d.level,d.row,d.col,p);r._prefetches.push(e);const t=()=>{r._prefetches.removeUnordered(e)};e.then(t,t)}}_initializeTilemapDefinition(){var e;if(!this.layer.parsedUrl)return;const{parsedUrl:t,apiKey:i,customParameters:r}=this.layer;this._tilemapCache.clear(),this._tmpTilemapDefinition={service:{url:t.path,query:Object(p.E)({...t.query,...r,token:null!=i?i:null==(e=t.query)?void 0:e.token}),tileServers:this.layer.tileServers,request:this.request,type:this.layer.type},width:this.size,height:this.size,level:0,row:0,col:0}}_tilemapFromCache(e,t,i,r){r.level=e,r.row=t-t%this.size,r.col=i-i%this.size;const n=w(r);return this._tilemapCache.get(n)}_initializeAvailableLevels(e){this._availableLevels={},e&&e.forEach((e=>this._availableLevels[e.level]=!0))}get test(){const e=this;return{get prefetchingEnabled(){return e._prefetchingEnabled},set prefetchingEnabled(t){e._prefetchingEnabled=t},hasTilemap:(t,i,r)=>!!e._tilemapFromCache(t,i,r,e._tmpTilemapDefinition)}}};_._maxPrefetch=4,_._prefetches=new d.a({initialSize:r._maxPrefetch}),Object(n.a)([Object(b.b)({constructOnly:!0,type:Number})],_.prototype,"levels",void 0),Object(n.a)([Object(g.a)("levels")],_.prototype,"castLevels",null),Object(n.a)([Object(b.b)({readOnly:!0,type:Number})],_.prototype,"size",null),Object(n.a)([Object(b.b)({constructOnly:!0,type:Number})],_.prototype,"cacheByteSize",void 0),Object(n.a)([Object(b.b)({constructOnly:!0})],_.prototype,"layer",void 0),Object(n.a)([Object(b.b)({constructOnly:!0})],_.prototype,"request",void 0),_=r=Object(n.a)([Object(O.a)("esri.layers.support.TilemapCache")],_)},883:function(e,t,i){"use strict";i.d(t,"a",(function(){return u}));var r=i(79),n=(i(97),i(81)),s=(i(84),i(82),i(83),i(93)),a=i(80),l=i(762),o=i(791),c=i(94);const u=e=>{let t=class extends e{constructor(){super(...arguments),this.copyright=null,this.minScale=0,this.maxScale=0,this.spatialReference=null,this.tileInfo=null,this.tilemapCache=null}readMinScale(e,t){return null!=t.minLOD&&null!=t.maxLOD?e:0}readMaxScale(e,t){return null!=t.minLOD&&null!=t.maxLOD?e:0}get supportsBlankTile(){return this.version>=10.2}readTilemapCache(e,t){return t.capabilities&&t.capabilities.indexOf("Tilemap")>-1?new o.a({layer:this}):null}};return Object(r.a)([Object(n.b)({json:{read:{source:"copyrightText"}}})],t.prototype,"copyright",void 0),Object(r.a)([Object(n.b)()],t.prototype,"minScale",void 0),Object(r.a)([Object(s.a)("service","minScale")],t.prototype,"readMinScale",null),Object(r.a)([Object(n.b)()],t.prototype,"maxScale",void 0),Object(r.a)([Object(s.a)("service","maxScale")],t.prototype,"readMaxScale",null),Object(r.a)([Object(n.b)({type:c.a})],t.prototype,"spatialReference",void 0),Object(r.a)([Object(n.b)({readOnly:!0})],t.prototype,"supportsBlankTile",null),Object(r.a)([Object(n.b)(l.b)],t.prototype,"tileInfo",void 0),Object(r.a)([Object(n.b)()],t.prototype,"tilemapCache",void 0),Object(r.a)([Object(s.a)("service","tilemapCache",["capabilities"])],t.prototype,"readTilemapCache",null),Object(r.a)([Object(n.b)()],t.prototype,"version",void 0),t=Object(r.a)([Object(a.a)("esri.layers.mixins.ArcGISCachedService")],t),t}}}]);
//# sourceMappingURL=29.55694e0b.chunk.js.map