(this.webpackJsonpimaps=this.webpackJsonpimaps||[]).push([[112,58,240],{1107:function(e,t,n){"use strict";n.d(t,"a",(function(){return O})),n.d(t,"b",(function(){return P})),n.d(t,"c",(function(){return S})),n.d(t,"d",(function(){return q})),n.d(t,"e",(function(){return z})),n.d(t,"f",(function(){return E}));n(99);var r=n(103),i=n(88),s=n(975),o=n(85),a=n(91),u=n(98),c=n(187),l=n(110),h=n(205),f=n(790);function d(e){var t;return null!=(t=function(e){var t,n,r,i;const s=m.exec(e);if(!s)return null;const o=s.groups,a=+o.year,u=+o.month-1,c=+o.day,l=+(null!=(t=o.hours)?t:"0"),h=+(null!=(n=o.minutes)?n:"0"),f=+(null!=(r=o.seconds)?r:"0");if(l>23)return null;if(h>59)return null;if(f>59)return null;const d=null!=(i=o.ms)?i:"0",p=d?+d.padEnd(3,"0").substring(0,3):0;let g;if(o.isUTC)g=Date.UTC(a,u,c,l,h,f,p);else if(o.offsetSign){const e=+o.offsetHours,t=+o.offsetMinutes;g=6e4*("+"===o.offsetSign?-1:1)*(60*e+t)+Date.UTC(a,u,c,l,h,f,p)}else g=new Date(a,u,c,l,h,f,p).getTime();return Number.isNaN(g)?null:g}(e))?t:function(e){const t=new Date(e).getTime();return Number.isNaN(t)?null:t}(e)}const m=/^(?:(?<year>-?\d{4,})-(?<month>\d{2})-(?<day>\d{2}))(?:T(?<hours>\d{2}):(?<minutes>\d{2}):(?<seconds>\d{2})(?:\.(?<ms>\d+))?)?(?:(?<isUTC>Z)|(?:(?<offsetSign>\+|-)(?<offsetHours>\d{2}):(?<offsetMinutes>\d{2})))?$/;var p=n(994),g=n(154),y=n(96),b=n(101);const j="xlink:href",x="2.0.0",O="__esri_wfs_id__",w="wfs-layer:getWFSLayerTypeInfo-error",M="wfs-layer:empty-service",_="wfs-layer:feature-type-not-found",F="wfs-layer:unknown-geometry-type",v="wfs-layer:unknown-field-type",T="wfs-layer:unsupported-spatial-reference",I="wfs-layer:unsupported-wfs-version";async function S(e,t){const n=function(e){const t=k(e);(function(e){const t=e.firstElementChild.getAttribute("version");if(t&&t!==x)throw new i.a(I,`Unsupported WFS version ${t}. Supported version: ${x}`)})(t),L(t);const n=t.firstElementChild,r=Object(s.a)(function(e){return Object(p.a)(e,{FeatureTypeList:{FeatureType:e=>{const t={typeName:"undefined:undefined",name:"",title:"",description:"",extent:null,namespacePrefix:"",namespaceUri:"",supportedSpatialReferences:[]},n=new Set([4326]),r=e=>{var t,r;const i=parseInt(null==(t=e.textContent.match(/(?<wkid>\d+$)/i))||null==(r=t.groups)?void 0:r.wkid,10);Number.isNaN(i)||n.add(i)};return Object(p.b)(e,{Name:e=>{const{name:n,prefix:r}=D(e.textContent);t.typeName=`${r}:${n}`,t.name=n,t.namespacePrefix=r,t.namespaceUri=e.lookupNamespaceURI(r)},Abstract:e=>{t.description=e.textContent},Title:e=>{t.title=e.textContent},WGS84BoundingBox:e=>{t.extent=function(e){let t,n,r,i;for(const s of e.children)switch(s.localName){case"LowerCorner":[t,n]=s.textContent.split(" ").map((e=>Number.parseFloat(e)));break;case"UpperCorner":[r,i]=s.textContent.split(" ").map((e=>Number.parseFloat(e)))}return{xmin:t,ymin:n,xmax:r,ymax:i,spatialReference:l.b}}(e)},DefaultSRS:r,DefaultCRS:r,OtherSRS:r,OtherCRS:r}),t.title||(t.title=t.name),t.supportedSpatialReferences.push(...n),t}}})}(n));return{operations:R(n),get featureTypes(){return Array.from(r())},readFeatureTypes:r}}((await Object(r.default)(e,{responseType:"text",query:{SERVICE:"WFS",REQUEST:"GetCapabilities",VERSION:x,...null==t?void 0:t.customParameters},signal:null==t?void 0:t.signal})).data);return function(e,t){Object(u.x)(e)&&(Object(u.s)(e,t.operations.DescribeFeatureType.url,!0)&&(t.operations.DescribeFeatureType.url=Object(u.L)(t.operations.DescribeFeatureType.url)),Object(u.s)(e,t.operations.GetFeature.url,!0)&&(t.operations.GetFeature.url=Object(u.L)(t.operations.GetFeature.url)))}(e,n),n}const N=new Set(["json","application/json","geojson","application/json; subtype=geojson"]);function R(e){let t=!1;const n={GetCapabilities:{url:""},DescribeFeatureType:{url:""},GetFeature:{url:"",outputFormat:null,supportsPagination:!1}};if(Object(p.b)(e,{OperationsMetadata:{Operation:e=>{switch(e.getAttribute("name")){case"GetCapabilities":return{DCP:{HTTP:{Get:e=>{n.GetCapabilities.url=e.getAttribute(j)}}}};case"DescribeFeatureType":return{DCP:{HTTP:{Get:e=>{n.DescribeFeatureType.url=e.getAttribute(j)}}}};case"GetFeature":return{DCP:{HTTP:{Get:e=>{n.GetFeature.url=e.getAttribute(j)}}},Parameter:e=>{if("outputFormat"===e.getAttribute("name"))return{AllowedValues:{Value:e=>{const t=e.textContent;N.has(t.toLowerCase())&&(n.GetFeature.outputFormat=t)}}}}}}},Constraint:e=>{switch(e.getAttribute("name")){case"KVPEncoding":return{DefaultValue:e=>{t="true"===e.textContent.toLowerCase()}};case"ImplementsResultPaging":return{DefaultValue:e=>{n.GetFeature.supportsPagination="true"===e.textContent.toLowerCase()}}}}}}),!t)throw new i.a("wfs-layer:kvp-encoding-not-supported","WFS service doesn't support key/value pair (KVP) encoding");if(Object(o.j)(n.GetFeature.outputFormat))throw new i.a("wfs-layer:geojson-not-supported","WFS service doesn't support GeoJSON output format");return n}function P(e,t,n){return Object(s.b)(e,(e=>n?e.name===t&&e.namespaceUri===n:e.typeName===t||e.name===t))}async function z(e,t,n,r={}){var s;const{featureType:u,extent:h}=await async function(e,t,n,r={}){const{spatialReference:s=y.a.WGS84}=r,a=e.readFeatureTypes(),u=t?P(a,t,n):a.next().value;if(Object(o.j)(u))throw t?new i.a(_,`The type '${t}' could not be found in the service`):new i.a(M,"The service is empty");let h=new b.a({...u.extent,spatialReference:s});if(!Object(l.d)(s,l.b))try{await Object(c.f)(l.b,s,void 0,r),h=Object(c.j)(h,l.b)}catch{throw new i.a(T,"Projection not supported")}return{extent:h,spatialReference:s,featureType:u}}(e,t,n,r),{fields:f,geometryType:d,swapXY:m,objectIdField:p,geometryField:g}=await async function(e,t,n={}){const[r,s]=await Object(a.i)([V(e.operations.DescribeFeatureType.url,t,n),A(e,t,n)]);if(r.error||s.error)throw new i.a(w,`An error occurred while getting info about the feature type '${t}'`,{error:r.error||s.error});const{fields:u,errors:c}=r.value,l=r.value.geometryType||s.value.geometryType,h=s.value.swapXY;if(Object(o.j)(l))throw new i.a(F,`The geometry type could not be determined for type '${t}`,{typeName:t,geometryType:l,fields:u,errors:c});return{...E(u),geometryType:l,swapXY:h}}(e,u.typeName,r);return{url:e.operations.GetCapabilities.url,name:u.name,namespaceUri:u.namespaceUri,fields:f,geometryField:g,geometryType:d,objectIdField:p,spatialReference:null!=(s=r.spatialReference)?s:y.a.WGS84,extent:h,swapXY:m,wfsCapabilities:e,customParameters:r.customParameters}}function E(e){var t;const n=e.find((e=>"geometry"===e.type));let r=e.find((e=>"oid"===e.type));return e=e.filter((e=>"geometry"!==e.type)),r||(r=new g.a({name:O,type:"oid",alias:O}),e.unshift(r)),{geometryField:null!=(t=null==n?void 0:n.name)?t:null,objectIdField:r.name,fields:e}}async function A(e,t,n={}){var i;let s,o=!1;const[a,u]=await Promise.all([q(e.operations.GetFeature.url,t,e.operations.GetFeature.outputFormat,{...n,count:1}),Object(r.default)(e.operations.GetFeature.url,{responseType:"text",query:C(t,void 0,{...n,count:1}),signal:null==n?void 0:n.signal})]),c="FeatureCollection"===a.type&&(null==(i=a.features[0])?void 0:i.geometry);if(c){let e;switch(s=h.a.fromJSON(Object(f.b)(c.type)),c.type){case"Point":e=c.coordinates;break;case"LineString":case"MultiPoint":e=c.coordinates[0];break;case"MultiLineString":case"Polygon":e=c.coordinates[0][0];break;case"MultiPolygon":e=c.coordinates[0][0][0]}const t=/<[^>]*pos[^>]*> *(-?\d+(?:\.\d+)?) (-?\d+(?:\.\d+)?)/.exec(u.data);if(t){const n=e[0].toFixed(3),r=e[1].toFixed(3),i=parseFloat(t[1]).toFixed(3);n===parseFloat(t[2]).toFixed(3)&&r===i&&(o=!0)}}return{geometryType:s,swapXY:o}}async function V(e,t,n){return function(e,t){const{name:n}=D(e),r=k(t);L(r);const a=Object(s.b)(Object(p.a)(r.firstElementChild,{element:e=>({name:e.getAttribute("name"),typeName:D(e.getAttribute("type")).name})}),(({name:e})=>e===n));if(Object(o.k)(a)){const e=Object(s.b)(Object(p.a)(r.firstElementChild,{complexType:e=>e}),(e=>e.getAttribute("name")===a.typeName));if(Object(o.k)(e))return function(e){var t,n;const r=[],s=[];let o;const a=Object(p.a)(e,{complexContent:{extension:{sequence:{element:e=>e}}}});for(const u of a){const a=u.getAttribute("name");if(!a)continue;let c,l;if(u.hasAttribute("type")?c=D(u.getAttribute("type")).name:Object(p.b)(u,{simpleType:{restriction:e=>(c=D(e.getAttribute("base")).name,{maxLength:e=>{l=+e.getAttribute("value")}})}}),!c)continue;const h="true"===u.getAttribute("nillable");let f=!1;switch(c.toLowerCase()){case"integer":case"nonpositiveinteger":case"negativeinteger":case"long":case"int":case"short":case"byte":case"nonnegativeinteger":case"unsignedlong":case"unsignedint":case"unsignedshort":case"unsignedbyte":case"positiveinteger":s.push(new g.a({name:a,alias:a,type:"integer",nullable:h}));break;case"float":case"double":case"decimal":s.push(new g.a({name:a,alias:a,type:"double",nullable:h}));break;case"boolean":case"string":case"gyearmonth":case"gyear":case"gmonthday":case"gday":case"gmonth":case"anyuri":case"qname":case"notation":case"normalizedstring":case"token":case"language":case"idrefs":case"entities":case"nmtoken":case"nmtokens":case"name":case"ncname":case"id":case"idref":case"entity":case"duration":case"time":s.push(new g.a({name:a,alias:a,type:"string",nullable:h,length:null!=(t=l)?t:255}));break;case"datetime":case"date":s.push(new g.a({name:a,alias:a,type:"date",nullable:h,length:null!=(n=l)?n:36}));break;case"pointpropertytype":o="point",f=!0;break;case"multipointpropertytype":o="multipoint",f=!0;break;case"curvepropertytype":case"multicurvepropertytype":case"multilinestringpropertytype":o="polyline",f=!0;break;case"surfacepropertytype":case"multisurfacepropertytype":case"multipolygonpropertytype":o="polygon",f=!0;break;case"geometrypropertytype":case"multigeometrypropertytype":f=!0,r.push(new i.a(F,`geometry type '${c}' is not supported`,{type:(new XMLSerializer).serializeToString(e)}));break;default:r.push(new i.a(v,`Unknown field type '${c}'`,{type:(new XMLSerializer).serializeToString(e)}))}f&&s.push(new g.a({name:a,alias:a,type:"geometry",nullable:h}))}for(const i of s)if("integer"===i.type&&!i.nullable&&G.has(i.name.toLowerCase())){i.type="oid";break}return{geometryType:o,fields:s,errors:r}}(e)}throw new i.a(_,`Type '${e}' not found in document`,{document:(new XMLSerializer).serializeToString(r)})}(t,(await Object(r.default)(e,{responseType:"text",query:{SERVICE:"WFS",REQUEST:"DescribeFeatureType",VERSION:x,TYPENAME:t,...null==n?void 0:n.customParameters},signal:null==n?void 0:n.signal})).data)}const G=new Set(["objectid","fid"]);async function q(e,t,n,s){let{data:o}=await Object(r.default)(e,{responseType:"text",query:C(t,n,s),signal:null==s?void 0:s.signal});o=o.replace(/": +(-?\d+),(\d+)(,)?/g,'": $1.$2$3');try{var a;if(null!=s&&null!=(a=s.dateFields)&&a.length){const e=new Set(s.dateFields);return JSON.parse(o,((t,n)=>e.has(t)?d(n):n))}return JSON.parse(o)}catch(u){throw new i.a("wfs-layer:malformed-json","Error while parsing the\xa0response",{response:o,error:u})}}function C(e,t,n){return{SERVICE:"WFS",REQUEST:"GetFeature",VERSION:x,TYPENAMES:e,OUTPUTFORMAT:t,SRSNAME:"EPSG:4326",STARTINDEX:null==n?void 0:n.startIndex,COUNT:null==n?void 0:n.count,...null==n?void 0:n.customParameters}}function k(e){return(new DOMParser).parseFromString(e.trim(),"text/xml")}function D(e){const[t,n]=e.split(":");return{prefix:n?t:"",name:null!=n?n:t}}function L(e){let t,n;if(Object(p.b)(e.firstElementChild,{Exception:e=>(t=e.getAttribute("exceptionCode"),{ExceptionText:e=>{n=e.textContent}})}),t)throw new i.a(`wfs-layer:${t}`,n)}},118:function(e,t,n){"use strict";n.d(t,"a",(function(){return I})),n.d(t,"b",(function(){return m})),n.d(t,"c",(function(){return y})),n.d(t,"d",(function(){return b})),n.d(t,"e",(function(){return o})),n.d(t,"f",(function(){return _})),n.d(t,"g",(function(){return j})),n.d(t,"h",(function(){return x})),n.d(t,"i",(function(){return w})),n.d(t,"j",(function(){return O})),n.d(t,"k",(function(){return a})),n.d(t,"l",(function(){return s})),n.d(t,"m",(function(){return v})),n.d(t,"n",(function(){return f})),n.d(t,"o",(function(){return h})),n.d(t,"p",(function(){return d})),n.d(t,"q",(function(){return c})),n.d(t,"r",(function(){return u})),n.d(t,"s",(function(){return g})),n.d(t,"t",(function(){return M})),n.d(t,"u",(function(){return F})),n.d(t,"v",(function(){return l})),n.d(t,"w",(function(){return p}));n(82),n(116);var r=n(85),i=n(101);function s(e=S){return[e[0],e[1],e[2],e[3]]}function o(e){return[e[0],e[1],e[2],e[3]]}function a(e,t){return e!==t&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3]),e}function u(e,t,n,r,i=s()){return i[0]=e,i[1]=t,i[2]=n,i[3]=r,i}function c(e,t=s()){return t[0]=e.xmin,t[1]=e.ymin,t[2]=e.xmax,t[3]=e.ymax,t}function l(e,t){return new i.a({xmin:e[0],ymin:e[1],xmax:e[2],ymax:e[3],spatialReference:t})}function h(e,t){t[0]<e[0]&&(e[0]=t[0]),t[0]>e[2]&&(e[2]=t[0]),t[1]<e[1]&&(e[1]=t[1]),t[1]>e[3]&&(e[3]=t[1])}function f(e,t,n){if(Object(r.j)(t))a(n,e);else if("length"in t)T(t)?(n[0]=Math.min(e[0],t[0]),n[1]=Math.min(e[1],t[1]),n[2]=Math.max(e[2],t[2]),n[3]=Math.max(e[3],t[3])):2!==t.length&&3!==t.length||(n[0]=Math.min(e[0],t[0]),n[1]=Math.min(e[1],t[1]),n[2]=Math.max(e[2],t[0]),n[3]=Math.max(e[3],t[1]));else switch(t.type){case"extent":n[0]=Math.min(e[0],t.xmin),n[1]=Math.min(e[1],t.ymin),n[2]=Math.max(e[2],t.xmax),n[3]=Math.max(e[3],t.ymax);break;case"point":n[0]=Math.min(e[0],t.x),n[1]=Math.min(e[1],t.y),n[2]=Math.max(e[2],t.x),n[3]=Math.max(e[3],t.y)}}function d(e,t,n=e){const r=t.length;let i=e[0],s=e[1],o=e[2],a=e[3];for(let u=0;u<r;u++){const e=t[u];i=Math.min(i,e[0]),s=Math.min(s,e[1]),o=Math.max(o,e[0]),a=Math.max(a,e[1])}return n[0]=i,n[1]=s,n[2]=o,n[3]=a,n}function m(e){for(let t=0;t<4;t++)if(!isFinite(e[t]))return!1;return!0}function p(e){return Object(r.j)(e)||e[0]>=e[2]?0:e[2]-e[0]}function g(e){return e[1]>=e[3]?0:e[3]-e[1]}function y(e){return p(e)*g(e)}function b(e,t=[0,0]){return t[0]=(e[0]+e[2])/2,t[1]=(e[1]+e[3])/2,t}function j(e,t){return O(e,t[0],t[1])}function x(e,t){return O(e,t.x,t.y)}function O(e,t,n){return t>=e[0]&&n>=e[1]&&t<=e[2]&&n<=e[3]}function w(e,t,n){return t[0]>=e[0]-n&&t[1]>=e[1]-n&&t[0]<=e[2]+n&&t[1]<=e[3]+n}function M(e,t){return Math.max(t[0],e[0])<=Math.min(t[2],e[2])&&Math.max(t[1],e[1])<=Math.min(t[3],e[3])}function _(e,t){return t[0]>=e[0]&&t[2]<=e[2]&&t[1]>=e[1]&&t[3]<=e[3]}function F(e,t,n,r=e){return r[0]=e[0]+t,r[1]=e[1]+n,r[2]=e[2]+t,r[3]=e[3]+n,r}function v(e){return e?a(e,I):s(I)}function T(e){return null!=e&&4===e.length}const I=[1/0,1/0,-1/0,-1/0],S=[0,0,0,0]},123:function(e,t,n){"use strict";n.d(t,"a",(function(){return h}));var r=n(79),i=n(90),s=n(86),o=n(81),a=(n(84),n(82),n(83),n(95)),u=n(80);const c=new i.a({inherited:"inherited",codedValue:"coded-value",range:"range"});let l=class extends s.a{constructor(e){super(e),this.name=null,this.type=null}};Object(r.a)([Object(o.b)({type:String,json:{write:!0}})],l.prototype,"name",void 0),Object(r.a)([Object(a.a)(c)],l.prototype,"type",void 0),l=Object(r.a)([Object(u.a)("esri.layers.support.Domain")],l);const h=l},147:function(e,t,n){"use strict";n.d(t,"a",(function(){return c})),n.d(t,"b",(function(){return O})),n.d(t,"c",(function(){return s})),n.d(t,"d",(function(){return j})),n.d(t,"e",(function(){return d})),n.d(t,"f",(function(){return y})),n.d(t,"g",(function(){return g})),n.d(t,"h",(function(){return f})),n.d(t,"i",(function(){return a})),n.d(t,"j",(function(){return h})),n.d(t,"k",(function(){return _})),n.d(t,"l",(function(){return F})),n.d(t,"m",(function(){return l})),n.d(t,"n",(function(){return T})),n.d(t,"o",(function(){return p})),n.d(t,"p",(function(){return R})),n.d(t,"q",(function(){return v})),n.d(t,"r",(function(){return m})),n.d(t,"s",(function(){return o})),n.d(t,"t",(function(){return u})),n.d(t,"u",(function(){return b})),n.d(t,"v",(function(){return N})),n.d(t,"w",(function(){return S})),n.d(t,"x",(function(){return x}));var r=n(109),i=n(189);function s(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function o(e,t,n,r,i,s,o,a,u,c,l,h,f,d,m,p,g){return e[0]=t,e[1]=n,e[2]=r,e[3]=i,e[4]=s,e[5]=o,e[6]=a,e[7]=u,e[8]=c,e[9]=l,e[10]=h,e[11]=f,e[12]=d,e[13]=m,e[14]=p,e[15]=g,e}function a(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function u(e,t){if(e===t){const n=t[1],r=t[2],i=t[3],s=t[6],o=t[7],a=t[11];e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=n,e[6]=t[9],e[7]=t[13],e[8]=r,e[9]=s,e[11]=t[14],e[12]=i,e[13]=o,e[14]=a}else e[0]=t[0],e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=t[1],e[5]=t[5],e[6]=t[9],e[7]=t[13],e[8]=t[2],e[9]=t[6],e[10]=t[10],e[11]=t[14],e[12]=t[3],e[13]=t[7],e[14]=t[11],e[15]=t[15];return e}function c(e,t){const n=t[0],r=t[1],i=t[2],s=t[3],o=t[4],a=t[5],u=t[6],c=t[7],l=t[8],h=t[9],f=t[10],d=t[11],m=t[12],p=t[13],g=t[14],y=t[15],b=n*a-r*o,j=n*u-i*o,x=n*c-s*o,O=r*u-i*a,w=r*c-s*a,M=i*c-s*u,_=l*p-h*m,F=l*g-f*m,v=l*y-d*m,T=h*g-f*p,I=h*y-d*p,S=f*y-d*g;let N=b*S-j*I+x*T+O*v-w*F+M*_;return N?(N=1/N,e[0]=(a*S-u*I+c*T)*N,e[1]=(i*I-r*S-s*T)*N,e[2]=(p*M-g*w+y*O)*N,e[3]=(f*w-h*M-d*O)*N,e[4]=(u*v-o*S-c*F)*N,e[5]=(n*S-i*v+s*F)*N,e[6]=(g*x-m*M-y*j)*N,e[7]=(l*M-f*x+d*j)*N,e[8]=(o*I-a*v+c*_)*N,e[9]=(r*v-n*I-s*_)*N,e[10]=(m*w-p*x+y*b)*N,e[11]=(h*x-l*w-d*b)*N,e[12]=(a*F-o*T-u*_)*N,e[13]=(n*T-r*F+i*_)*N,e[14]=(p*j-m*O-g*b)*N,e[15]=(l*O-h*j+f*b)*N,e):null}function l(e,t,n){const r=t[0],i=t[1],s=t[2],o=t[3],a=t[4],u=t[5],c=t[6],l=t[7],h=t[8],f=t[9],d=t[10],m=t[11],p=t[12],g=t[13],y=t[14],b=t[15];let j=n[0],x=n[1],O=n[2],w=n[3];return e[0]=j*r+x*a+O*h+w*p,e[1]=j*i+x*u+O*f+w*g,e[2]=j*s+x*c+O*d+w*y,e[3]=j*o+x*l+O*m+w*b,j=n[4],x=n[5],O=n[6],w=n[7],e[4]=j*r+x*a+O*h+w*p,e[5]=j*i+x*u+O*f+w*g,e[6]=j*s+x*c+O*d+w*y,e[7]=j*o+x*l+O*m+w*b,j=n[8],x=n[9],O=n[10],w=n[11],e[8]=j*r+x*a+O*h+w*p,e[9]=j*i+x*u+O*f+w*g,e[10]=j*s+x*c+O*d+w*y,e[11]=j*o+x*l+O*m+w*b,j=n[12],x=n[13],O=n[14],w=n[15],e[12]=j*r+x*a+O*h+w*p,e[13]=j*i+x*u+O*f+w*g,e[14]=j*s+x*c+O*d+w*y,e[15]=j*o+x*l+O*m+w*b,e}function h(e,t,n){const r=n[0],i=n[1],s=n[2];let o,a,u,c,l,h,f,d,m,p,g,y;return t===e?(e[12]=t[0]*r+t[4]*i+t[8]*s+t[12],e[13]=t[1]*r+t[5]*i+t[9]*s+t[13],e[14]=t[2]*r+t[6]*i+t[10]*s+t[14],e[15]=t[3]*r+t[7]*i+t[11]*s+t[15]):(o=t[0],a=t[1],u=t[2],c=t[3],l=t[4],h=t[5],f=t[6],d=t[7],m=t[8],p=t[9],g=t[10],y=t[11],e[0]=o,e[1]=a,e[2]=u,e[3]=c,e[4]=l,e[5]=h,e[6]=f,e[7]=d,e[8]=m,e[9]=p,e[10]=g,e[11]=y,e[12]=o*r+l*i+m*s+t[12],e[13]=a*r+h*i+p*s+t[13],e[14]=u*r+f*i+g*s+t[14],e[15]=c*r+d*i+y*s+t[15]),e}function f(e,t,n){const r=n[0],i=n[1],s=n[2];return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e[4]=t[4]*i,e[5]=t[5]*i,e[6]=t[6]*i,e[7]=t[7]*i,e[8]=t[8]*s,e[9]=t[9]*s,e[10]=t[10]*s,e[11]=t[11]*s,e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function d(e,t,n,r){let s,o,a,u,c,l,h,f,d,m,p,g,y,b,j,x,O,w,M,_,F,v,T,I,S=r[0],N=r[1],R=r[2],P=Math.sqrt(S*S+N*N+R*R);return P<i.a?null:(P=1/P,S*=P,N*=P,R*=P,s=Math.sin(n),o=Math.cos(n),a=1-o,u=t[0],c=t[1],l=t[2],h=t[3],f=t[4],d=t[5],m=t[6],p=t[7],g=t[8],y=t[9],b=t[10],j=t[11],x=S*S*a+o,O=N*S*a+R*s,w=R*S*a-N*s,M=S*N*a-R*s,_=N*N*a+o,F=R*N*a+S*s,v=S*R*a+N*s,T=N*R*a-S*s,I=R*R*a+o,e[0]=u*x+f*O+g*w,e[1]=c*x+d*O+y*w,e[2]=l*x+m*O+b*w,e[3]=h*x+p*O+j*w,e[4]=u*M+f*_+g*F,e[5]=c*M+d*_+y*F,e[6]=l*M+m*_+b*F,e[7]=h*M+p*_+j*F,e[8]=u*v+f*T+g*I,e[9]=c*v+d*T+y*I,e[10]=l*v+m*T+b*I,e[11]=h*v+p*T+j*I,t!==e&&(e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e)}function m(e,t,n){const r=Math.sin(n),i=Math.cos(n),s=t[4],o=t[5],a=t[6],u=t[7],c=t[8],l=t[9],h=t[10],f=t[11];return t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[4]=s*i+c*r,e[5]=o*i+l*r,e[6]=a*i+h*r,e[7]=u*i+f*r,e[8]=c*i-s*r,e[9]=l*i-o*r,e[10]=h*i-a*r,e[11]=f*i-u*r,e}function p(e,t,n){const r=Math.sin(n),i=Math.cos(n),s=t[0],o=t[1],a=t[2],u=t[3],c=t[8],l=t[9],h=t[10],f=t[11];return t!==e&&(e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=s*i-c*r,e[1]=o*i-l*r,e[2]=a*i-h*r,e[3]=u*i-f*r,e[8]=s*r+c*i,e[9]=o*r+l*i,e[10]=a*r+h*i,e[11]=u*r+f*i,e}function g(e,t,n){const r=Math.sin(n),i=Math.cos(n),s=t[0],o=t[1],a=t[2],u=t[3],c=t[4],l=t[5],h=t[6],f=t[7];return t!==e&&(e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=s*i+c*r,e[1]=o*i+l*r,e[2]=a*i+h*r,e[3]=u*i+f*r,e[4]=c*i-s*r,e[5]=l*i-o*r,e[6]=h*i-a*r,e[7]=f*i-u*r,e}function y(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=t[0],e[13]=t[1],e[14]=t[2],e[15]=1,e}function b(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=t[1],e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=t[2],e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function j(e,t,n){let r,s,o,a=n[0],u=n[1],c=n[2],l=Math.sqrt(a*a+u*u+c*c);return l<i.a?null:(l=1/l,a*=l,u*=l,c*=l,r=Math.sin(t),s=Math.cos(t),o=1-s,e[0]=a*a*o+s,e[1]=u*a*o+c*r,e[2]=c*a*o-u*r,e[3]=0,e[4]=a*u*o-c*r,e[5]=u*u*o+s,e[6]=c*u*o+a*r,e[7]=0,e[8]=a*c*o+u*r,e[9]=u*c*o-a*r,e[10]=c*c*o+s,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e)}function x(e,t){const n=Math.sin(t),r=Math.cos(t);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=r,e[6]=n,e[7]=0,e[8]=0,e[9]=-n,e[10]=r,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function O(e,t){const n=Math.sin(t),r=Math.cos(t);return e[0]=r,e[1]=n,e[2]=0,e[3]=0,e[4]=-n,e[5]=r,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function w(e,t,n){const r=t[0],i=t[1],s=t[2],o=t[3],a=r+r,u=i+i,c=s+s,l=r*a,h=r*u,f=r*c,d=i*u,m=i*c,p=s*c,g=o*a,y=o*u,b=o*c;return e[0]=1-(d+p),e[1]=h+b,e[2]=f-y,e[3]=0,e[4]=h-b,e[5]=1-(l+p),e[6]=m+g,e[7]=0,e[8]=f+y,e[9]=m-g,e[10]=1-(l+d),e[11]=0,e[12]=n[0],e[13]=n[1],e[14]=n[2],e[15]=1,e}const M=Object(r.f)();function _(e,t){const n=t[0],r=t[1],i=t[2],s=t[3],o=n+n,a=r+r,u=i+i,c=n*o,l=r*o,h=r*a,f=i*o,d=i*a,m=i*u,p=s*o,g=s*a,y=s*u;return e[0]=1-h-m,e[1]=l+y,e[2]=f-g,e[3]=0,e[4]=l-y,e[5]=1-c-m,e[6]=d+p,e[7]=0,e[8]=f+g,e[9]=d-p,e[10]=1-c-h,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function F(e,t,n,r,i,s,o){const a=1/(n-t),u=1/(i-r),c=1/(s-o);return e[0]=2*s*a,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=2*s*u,e[6]=0,e[7]=0,e[8]=(n+t)*a,e[9]=(i+r)*u,e[10]=(o+s)*c,e[11]=-1,e[12]=0,e[13]=0,e[14]=o*s*2*c,e[15]=0,e}function v(e,t,n,r,i,s,o){const a=1/(t-n),u=1/(r-i),c=1/(s-o);return e[0]=-2*a,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*u,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*c,e[11]=0,e[12]=(t+n)*a,e[13]=(i+r)*u,e[14]=(o+s)*c,e[15]=1,e}function T(e,t,n,r){let s,o,u,c,l,h,f,d,m,p;const g=t[0],y=t[1],b=t[2],j=r[0],x=r[1],O=r[2],w=n[0],M=n[1],_=n[2];return Math.abs(g-w)<i.a&&Math.abs(y-M)<i.a&&Math.abs(b-_)<i.a?a(e):(f=g-w,d=y-M,m=b-_,p=1/Math.sqrt(f*f+d*d+m*m),f*=p,d*=p,m*=p,s=x*m-O*d,o=O*f-j*m,u=j*d-x*f,p=Math.sqrt(s*s+o*o+u*u),p?(p=1/p,s*=p,o*=p,u*=p):(s=0,o=0,u=0),c=d*u-m*o,l=m*s-f*u,h=f*o-d*s,p=Math.sqrt(c*c+l*l+h*h),p?(p=1/p,c*=p,l*=p,h*=p):(c=0,l=0,h=0),e[0]=s,e[1]=c,e[2]=f,e[3]=0,e[4]=o,e[5]=l,e[6]=d,e[7]=0,e[8]=u,e[9]=h,e[10]=m,e[11]=0,e[12]=-(s*g+o*y+u*b),e[13]=-(c*g+l*y+h*b),e[14]=-(f*g+d*y+m*b),e[15]=1,e)}function I(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e[3]=t[3]-n[3],e[4]=t[4]-n[4],e[5]=t[5]-n[5],e[6]=t[6]-n[6],e[7]=t[7]-n[7],e[8]=t[8]-n[8],e[9]=t[9]-n[9],e[10]=t[10]-n[10],e[11]=t[11]-n[11],e[12]=t[12]-n[12],e[13]=t[13]-n[13],e[14]=t[14]-n[14],e[15]=t[15]-n[15],e}function S(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]&&e[6]===t[6]&&e[7]===t[7]&&e[8]===t[8]&&e[9]===t[9]&&e[10]===t[10]&&e[11]===t[11]&&e[12]===t[12]&&e[13]===t[13]&&e[14]===t[14]&&e[15]===t[15]}function N(e,t){if(e===t)return!0;const n=e[0],r=e[1],s=e[2],o=e[3],a=e[4],u=e[5],c=e[6],l=e[7],h=e[8],f=e[9],d=e[10],m=e[11],p=e[12],g=e[13],y=e[14],b=e[15],j=t[0],x=t[1],O=t[2],w=t[3],M=t[4],_=t[5],F=t[6],v=t[7],T=t[8],I=t[9],S=t[10],N=t[11],R=t[12],P=t[13],z=t[14],E=t[15];return Math.abs(n-j)<=i.a*Math.max(1,Math.abs(n),Math.abs(j))&&Math.abs(r-x)<=i.a*Math.max(1,Math.abs(r),Math.abs(x))&&Math.abs(s-O)<=i.a*Math.max(1,Math.abs(s),Math.abs(O))&&Math.abs(o-w)<=i.a*Math.max(1,Math.abs(o),Math.abs(w))&&Math.abs(a-M)<=i.a*Math.max(1,Math.abs(a),Math.abs(M))&&Math.abs(u-_)<=i.a*Math.max(1,Math.abs(u),Math.abs(_))&&Math.abs(c-F)<=i.a*Math.max(1,Math.abs(c),Math.abs(F))&&Math.abs(l-v)<=i.a*Math.max(1,Math.abs(l),Math.abs(v))&&Math.abs(h-T)<=i.a*Math.max(1,Math.abs(h),Math.abs(T))&&Math.abs(f-I)<=i.a*Math.max(1,Math.abs(f),Math.abs(I))&&Math.abs(d-S)<=i.a*Math.max(1,Math.abs(d),Math.abs(S))&&Math.abs(m-N)<=i.a*Math.max(1,Math.abs(m),Math.abs(N))&&Math.abs(p-R)<=i.a*Math.max(1,Math.abs(p),Math.abs(R))&&Math.abs(g-P)<=i.a*Math.max(1,Math.abs(g),Math.abs(P))&&Math.abs(y-z)<=i.a*Math.max(1,Math.abs(y),Math.abs(z))&&Math.abs(b-E)<=i.a*Math.max(1,Math.abs(b),Math.abs(E))}function R(e){const t=i.a,n=e[0],r=e[1],s=e[2],o=e[4],a=e[5],u=e[6],c=e[8],l=e[9],h=e[10];return Math.abs(1-(n*n+o*o+c*c))<=t&&Math.abs(1-(r*r+a*a+l*l))<=t&&Math.abs(1-(s*s+u*u+h*h))<=t}const P=l,z=I;Object.freeze({__proto__:null,copy:s,set:o,identity:a,transpose:u,invert:c,adjoint:function(e,t){const n=t[0],r=t[1],i=t[2],s=t[3],o=t[4],a=t[5],u=t[6],c=t[7],l=t[8],h=t[9],f=t[10],d=t[11],m=t[12],p=t[13],g=t[14],y=t[15];return e[0]=a*(f*y-d*g)-h*(u*y-c*g)+p*(u*d-c*f),e[1]=-(r*(f*y-d*g)-h*(i*y-s*g)+p*(i*d-s*f)),e[2]=r*(u*y-c*g)-a*(i*y-s*g)+p*(i*c-s*u),e[3]=-(r*(u*d-c*f)-a*(i*d-s*f)+h*(i*c-s*u)),e[4]=-(o*(f*y-d*g)-l*(u*y-c*g)+m*(u*d-c*f)),e[5]=n*(f*y-d*g)-l*(i*y-s*g)+m*(i*d-s*f),e[6]=-(n*(u*y-c*g)-o*(i*y-s*g)+m*(i*c-s*u)),e[7]=n*(u*d-c*f)-o*(i*d-s*f)+l*(i*c-s*u),e[8]=o*(h*y-d*p)-l*(a*y-c*p)+m*(a*d-c*h),e[9]=-(n*(h*y-d*p)-l*(r*y-s*p)+m*(r*d-s*h)),e[10]=n*(a*y-c*p)-o*(r*y-s*p)+m*(r*c-s*a),e[11]=-(n*(a*d-c*h)-o*(r*d-s*h)+l*(r*c-s*a)),e[12]=-(o*(h*g-f*p)-l*(a*g-u*p)+m*(a*f-u*h)),e[13]=n*(h*g-f*p)-l*(r*g-i*p)+m*(r*f-i*h),e[14]=-(n*(a*g-u*p)-o*(r*g-i*p)+m*(r*u-i*a)),e[15]=n*(a*f-u*h)-o*(r*f-i*h)+l*(r*u-i*a),e},determinant:function(e){const t=e[0],n=e[1],r=e[2],i=e[3],s=e[4],o=e[5],a=e[6],u=e[7],c=e[8],l=e[9],h=e[10],f=e[11],d=e[12],m=e[13],p=e[14],g=e[15];return(t*o-n*s)*(h*g-f*p)-(t*a-r*s)*(l*g-f*m)+(t*u-i*s)*(l*p-h*m)+(n*a-r*o)*(c*g-f*d)-(n*u-i*o)*(c*p-h*d)+(r*u-i*a)*(c*m-l*d)},multiply:l,translate:h,scale:f,rotate:d,rotateX:m,rotateY:p,rotateZ:g,fromTranslation:y,fromScaling:b,fromRotation:j,fromXRotation:x,fromYRotation:function(e,t){const n=Math.sin(t),r=Math.cos(t);return e[0]=r,e[1]=0,e[2]=-n,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=n,e[9]=0,e[10]=r,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},fromZRotation:O,fromRotationTranslation:w,fromQuat2:function(e,t){const n=M,r=-t[0],i=-t[1],s=-t[2],o=t[3],a=t[4],u=t[5],c=t[6],l=t[7],h=r*r+i*i+s*s+o*o;return h>0?(n[0]=2*(a*o+l*r+u*s-c*i)/h,n[1]=2*(u*o+l*i+c*r-a*s)/h,n[2]=2*(c*o+l*s+a*i-u*r)/h):(n[0]=2*(a*o+l*r+u*s-c*i),n[1]=2*(u*o+l*i+c*r-a*s),n[2]=2*(c*o+l*s+a*i-u*r)),w(e,t,n),e},getTranslation:function(e,t){return e[0]=t[12],e[1]=t[13],e[2]=t[14],e},getScaling:function(e,t){const n=t[0],r=t[1],i=t[2],s=t[4],o=t[5],a=t[6],u=t[8],c=t[9],l=t[10];return e[0]=Math.sqrt(n*n+r*r+i*i),e[1]=Math.sqrt(s*s+o*o+a*a),e[2]=Math.sqrt(u*u+c*c+l*l),e},getRotation:function(e,t){const n=t[0]+t[5]+t[10];let r=0;return n>0?(r=2*Math.sqrt(n+1),e[3]=.25*r,e[0]=(t[6]-t[9])/r,e[1]=(t[8]-t[2])/r,e[2]=(t[1]-t[4])/r):t[0]>t[5]&&t[0]>t[10]?(r=2*Math.sqrt(1+t[0]-t[5]-t[10]),e[3]=(t[6]-t[9])/r,e[0]=.25*r,e[1]=(t[1]+t[4])/r,e[2]=(t[8]+t[2])/r):t[5]>t[10]?(r=2*Math.sqrt(1+t[5]-t[0]-t[10]),e[3]=(t[8]-t[2])/r,e[0]=(t[1]+t[4])/r,e[1]=.25*r,e[2]=(t[6]+t[9])/r):(r=2*Math.sqrt(1+t[10]-t[0]-t[5]),e[3]=(t[1]-t[4])/r,e[0]=(t[8]+t[2])/r,e[1]=(t[6]+t[9])/r,e[2]=.25*r),e},fromRotationTranslationScale:function(e,t,n,r){const i=t[0],s=t[1],o=t[2],a=t[3],u=i+i,c=s+s,l=o+o,h=i*u,f=i*c,d=i*l,m=s*c,p=s*l,g=o*l,y=a*u,b=a*c,j=a*l,x=r[0],O=r[1],w=r[2];return e[0]=(1-(m+g))*x,e[1]=(f+j)*x,e[2]=(d-b)*x,e[3]=0,e[4]=(f-j)*O,e[5]=(1-(h+g))*O,e[6]=(p+y)*O,e[7]=0,e[8]=(d+b)*w,e[9]=(p-y)*w,e[10]=(1-(h+m))*w,e[11]=0,e[12]=n[0],e[13]=n[1],e[14]=n[2],e[15]=1,e},fromRotationTranslationScaleOrigin:function(e,t,n,r,i){const s=t[0],o=t[1],a=t[2],u=t[3],c=s+s,l=o+o,h=a+a,f=s*c,d=s*l,m=s*h,p=o*l,g=o*h,y=a*h,b=u*c,j=u*l,x=u*h,O=r[0],w=r[1],M=r[2],_=i[0],F=i[1],v=i[2],T=(1-(p+y))*O,I=(d+x)*O,S=(m-j)*O,N=(d-x)*w,R=(1-(f+y))*w,P=(g+b)*w,z=(m+j)*M,E=(g-b)*M,A=(1-(f+p))*M;return e[0]=T,e[1]=I,e[2]=S,e[3]=0,e[4]=N,e[5]=R,e[6]=P,e[7]=0,e[8]=z,e[9]=E,e[10]=A,e[11]=0,e[12]=n[0]+_-(T*_+N*F+z*v),e[13]=n[1]+F-(I*_+R*F+E*v),e[14]=n[2]+v-(S*_+P*F+A*v),e[15]=1,e},fromQuat:_,frustum:F,perspective:function(e,t,n,r,i){const s=1/Math.tan(t/2);let o;return e[0]=s/n,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=s,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=-1,e[12]=0,e[13]=0,e[15]=0,null!=i&&i!==1/0?(o=1/(r-i),e[10]=(i+r)*o,e[14]=2*i*r*o):(e[10]=-1,e[14]=-2*r),e},perspectiveFromFieldOfView:function(e,t,n,r){const i=Math.tan(t.upDegrees*Math.PI/180),s=Math.tan(t.downDegrees*Math.PI/180),o=Math.tan(t.leftDegrees*Math.PI/180),a=Math.tan(t.rightDegrees*Math.PI/180),u=2/(o+a),c=2/(i+s);return e[0]=u,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=c,e[6]=0,e[7]=0,e[8]=-(o-a)*u*.5,e[9]=(i-s)*c*.5,e[10]=r/(n-r),e[11]=-1,e[12]=0,e[13]=0,e[14]=r*n/(n-r),e[15]=0,e},ortho:v,lookAt:T,targetTo:function(e,t,n,r){const i=t[0],s=t[1],o=t[2],a=r[0],u=r[1],c=r[2];let l=i-n[0],h=s-n[1],f=o-n[2],d=l*l+h*h+f*f;d>0&&(d=1/Math.sqrt(d),l*=d,h*=d,f*=d);let m=u*f-c*h,p=c*l-a*f,g=a*h-u*l;return d=m*m+p*p+g*g,d>0&&(d=1/Math.sqrt(d),m*=d,p*=d,g*=d),e[0]=m,e[1]=p,e[2]=g,e[3]=0,e[4]=h*g-f*p,e[5]=f*m-l*g,e[6]=l*p-h*m,e[7]=0,e[8]=l,e[9]=h,e[10]=f,e[11]=0,e[12]=i,e[13]=s,e[14]=o,e[15]=1,e},str:function(e){return"mat4("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+", "+e[8]+", "+e[9]+", "+e[10]+", "+e[11]+", "+e[12]+", "+e[13]+", "+e[14]+", "+e[15]+")"},frob:function(e){return Math.sqrt(e[0]**2+e[1]**2+e[2]**2+e[3]**2+e[4]**2+e[5]**2+e[6]**2+e[7]**2+e[8]**2+e[9]**2+e[10]**2+e[11]**2+e[12]**2+e[13]**2+e[14]**2+e[15]**2)},add:function(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e[3]=t[3]+n[3],e[4]=t[4]+n[4],e[5]=t[5]+n[5],e[6]=t[6]+n[6],e[7]=t[7]+n[7],e[8]=t[8]+n[8],e[9]=t[9]+n[9],e[10]=t[10]+n[10],e[11]=t[11]+n[11],e[12]=t[12]+n[12],e[13]=t[13]+n[13],e[14]=t[14]+n[14],e[15]=t[15]+n[15],e},subtract:I,multiplyScalar:function(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e[3]=t[3]*n,e[4]=t[4]*n,e[5]=t[5]*n,e[6]=t[6]*n,e[7]=t[7]*n,e[8]=t[8]*n,e[9]=t[9]*n,e[10]=t[10]*n,e[11]=t[11]*n,e[12]=t[12]*n,e[13]=t[13]*n,e[14]=t[14]*n,e[15]=t[15]*n,e},multiplyScalarAndAdd:function(e,t,n,r){return e[0]=t[0]+n[0]*r,e[1]=t[1]+n[1]*r,e[2]=t[2]+n[2]*r,e[3]=t[3]+n[3]*r,e[4]=t[4]+n[4]*r,e[5]=t[5]+n[5]*r,e[6]=t[6]+n[6]*r,e[7]=t[7]+n[7]*r,e[8]=t[8]+n[8]*r,e[9]=t[9]+n[9]*r,e[10]=t[10]+n[10]*r,e[11]=t[11]+n[11]*r,e[12]=t[12]+n[12]*r,e[13]=t[13]+n[13]*r,e[14]=t[14]+n[14]*r,e[15]=t[15]+n[15]*r,e},exactEquals:S,equals:N,isOrthoNormal:R,mul:P,sub:z})},154:function(e,t,n){"use strict";n.d(t,"a",(function(){return g}));var r,i=n(79),s=n(90),o=n(86),a=n(81),u=(n(84),n(82),n(83)),c=n(95),l=n(93),h=n(80),f=n(209),d=n(268);const m=new s.a({binary:"binary",coordinate:"coordinate",countOrAmount:"count-or-amount",dateAndTime:"date-and-time",description:"description",locationOrPlaceName:"location-or-place-name",measurement:"measurement",nameOrTitle:"name-or-title",none:"none",orderedOrRanked:"ordered-or-ranked",percentageOrRatio:"percentage-or-ratio",typeOrCategory:"type-or-category",uniqueIdentifier:"unique-identifier"});let p=r=class extends o.a{constructor(e){super(e),this.alias=null,this.defaultValue=void 0,this.description=null,this.domain=null,this.editable=!0,this.length=-1,this.name=null,this.nullable=!0,this.type=null,this.valueType=null}readDescription(e,{description:t}){let n;try{n=JSON.parse(t)}catch(r){}return n?n.value:null}readValueType(e,{description:t}){let n;try{n=JSON.parse(t)}catch(r){}return n?m.fromJSON(n.fieldValueType):null}clone(){return new r({alias:this.alias,defaultValue:this.defaultValue,description:this.description,domain:this.domain&&this.domain.clone()||null,editable:this.editable,length:this.length,name:this.name,nullable:this.nullable,type:this.type,valueType:this.valueType})}};Object(i.a)([Object(a.b)({type:String,json:{write:!0}})],p.prototype,"alias",void 0),Object(i.a)([Object(a.b)({type:[String,Number],json:{write:{allowNull:!0}}})],p.prototype,"defaultValue",void 0),Object(i.a)([Object(a.b)()],p.prototype,"description",void 0),Object(i.a)([Object(l.a)("description")],p.prototype,"readDescription",null),Object(i.a)([Object(a.b)({types:f.b,json:{read:{reader:f.a},write:!0}})],p.prototype,"domain",void 0),Object(i.a)([Object(a.b)({type:Boolean,json:{write:!0}})],p.prototype,"editable",void 0),Object(i.a)([Object(a.b)({type:u.a,json:{write:!0}})],p.prototype,"length",void 0),Object(i.a)([Object(a.b)({type:String,json:{write:!0}})],p.prototype,"name",void 0),Object(i.a)([Object(a.b)({type:Boolean,json:{write:!0}})],p.prototype,"nullable",void 0),Object(i.a)([Object(c.a)(d.a)],p.prototype,"type",void 0),Object(i.a)([Object(a.b)()],p.prototype,"valueType",void 0),Object(i.a)([Object(l.a)("valueType",["description"])],p.prototype,"readValueType",null),p=r=Object(i.a)([Object(h.a)("esri.layers.support.Field")],p);const g=p},160:function(e,t,n){"use strict";n.d(t,"a",(function(){return Y})),n.d(t,"b",(function(){return K})),n.d(t,"c",(function(){return X})),n.d(t,"d",(function(){return Q})),n.d(t,"e",(function(){return $})),n.d(t,"f",(function(){return L})),n.d(t,"g",(function(){return D})),n.d(t,"h",(function(){return q})),n.d(t,"i",(function(){return J})),n.d(t,"j",(function(){return H})),n.d(t,"k",(function(){return W})),n.d(t,"l",(function(){return z})),n.d(t,"m",(function(){return w})),n.d(t,"n",(function(){return C})),n.d(t,"o",(function(){return V})),n.d(t,"p",(function(){return he})),n.d(t,"q",(function(){return re})),n.d(t,"r",(function(){return oe})),n.d(t,"s",(function(){return le})),n.d(t,"t",(function(){return te})),n.d(t,"u",(function(){return ne})),n.d(t,"v",(function(){return b})),n.d(t,"w",(function(){return j})),n.d(t,"x",(function(){return ue})),n.d(t,"y",(function(){return ee})),n.d(t,"z",(function(){return ae}));var r=n(88),i=n(87),s=n(85),o=n(97),a=n(262),u=n(332),c=n(168);function l(e,t){return e?t?4:3:t?3:2}const h=i.a.getLogger("esri.layers.graphics.featureConversionUtils"),f={esriGeometryPoint:0,esriGeometryPolyline:2,esriGeometryPolygon:3,esriGeometryMultipoint:0},d=(e,t,n,r,i,s)=>{e[n]=i,e[n+1]=s},m=(e,t,n,r,i,s)=>{e[n]=i,e[n+1]=s,e[n+2]=t[r+2]},p=(e,t,n,r,i,s)=>{e[n]=i,e[n+1]=s,e[n+2]=t[r+3]},g=(e,t,n,r,i,s)=>{e[n]=i,e[n+1]=s,e[n+2]=t[r+2],e[n+3]=t[r+3]};function y(e,t,n,r){if(e){if(n)return t&&r?g:m;if(t&&r)return p}else if(t&&r)return m;return d}function b({scale:e,translate:t},n){return Math.round((n-t[0])/e[0])}function j({scale:e,translate:t},n){return Math.round((t[1]-n)/e[1])}function x({scale:e,translate:t},n){return n*e[0]+t[0]}function O({scale:e,translate:t},n){return t[1]-n*e[1]}function w(e,t,n){return e?t?n?S(e):F(e):n?T(e):M(e):null}function M(e){const t=e.coords;return{x:t[0],y:t[1]}}function _(e,t){return e.coords[0]=t.x,e.coords[1]=t.y,e}function F(e){const t=e.coords;return{x:t[0],y:t[1],z:t[2]}}function v(e,t){return e.coords[0]=t.x,e.coords[1]=t.y,e.coords[2]=t.z,e}function T(e){const t=e.coords;return{x:t[0],y:t[1],m:t[2]}}function I(e,t){return e.coords[0]=t.x,e.coords[1]=t.y,e.coords[2]=t.m,e}function S(e){const t=e.coords;return{x:t[0],y:t[1],z:t[2],m:t[3]}}function N(e,t){return e.coords[0]=t.x,e.coords[1]=t.y,e.coords[2]=t.z,e.coords[3]=t.m,e}function R(e,t){return e&&t?N:e?v:t?I:_}function P(e,t,n,r,i){const s=R(n,r);for(const o of t){const{geometry:t,attributes:n}=o;let r;t&&(r=s(new c.a,t)),e.push(new a.a(r,n,null,n[i]))}return e}function z(e,t,n){if(Object(s.j)(e))return null;const r=l(t,n),i=[];for(let s=0;s<e.coords.length;s+=r){const t=[];for(let n=0;n<r;n++)t.push(e.coords[s+n]);i.push(t)}return t?n?{points:i,hasZ:t,hasM:n}:{points:i,hasZ:t}:n?{points:i,hasM:n}:{points:i}}function E(e,t,n,r,i){const s=l(n,r);for(const o of t){const t=o.geometry,n=o.attributes;let r;t&&(r=A(new c.a,t,s)),e.push(new a.a(r,n,null,n[i]))}return e}function A(e,t,n=l(t.hasZ,t.hasM)){e.lengths[0]=t.points.length;const r=e.coords;let i=0;for(const s of t.points)for(let e=0;e<n;e++)r[i++]=s[e];return e}function V(e,t,n){if(!e)return null;const r=l(t,n),{coords:i,lengths:s}=e,o=[];let a=0;for(const u of s){const e=[];for(let t=0;t<u;t++){const t=[];for(let e=0;e<r;e++)t.push(i[a++]);e.push(t)}o.push(e)}return t?n?{paths:o,hasZ:t,hasM:n}:{paths:o,hasZ:t}:n?{paths:o,hasM:n}:{paths:o}}function G(e,t,n,r,i){const s=l(n,r);for(const o of t){const t=o.geometry,n=o.attributes;let r;t&&(r=q(new c.a,t,s)),e.push(new a.a(r,n,null,n[i]))}return e}function q(e,t,n=l(t.hasZ,t.hasM)){const{lengths:r,coords:i}=e;let s=0;for(const o of t.paths){for(const e of o)for(let t=0;t<n;t++)i[s++]=e[t];r.push(o.length)}return e}function C(e,t,n){if(!e)return null;const r=l(t,n),{coords:i,lengths:s}=e,o=[];let a=0;for(const u of s){const e=[];for(let t=0;t<u;t++){const t=[];for(let e=0;e<r;e++)t.push(i[a++]);e.push(t)}o.push(e)}return t?n?{rings:o,hasZ:t,hasM:n}:{rings:o,hasZ:t}:n?{rings:o,hasM:n}:{rings:o}}function k(e,t,n,r,i){for(const o of t){const t=o.geometry,u=o.centroid,l=o.attributes;let h;t&&(h=D(new c.a,t,n,r)),Object(s.k)(u)?e.push(new a.a(h,l,_(new c.a,u),l[i])):e.push(new a.a(h,l,null,l[i]))}return e}function D(e,t,n=t.hasZ,r=t.hasM){return L(e,t.rings,n,r),e}function L(e,t,n,r){const i=l(n,r),{lengths:s,coords:o}=e;let a=0;s.length=o.length=0;for(const u of t){for(const e of u)for(let t=0;t<i;t++)o[a++]=e[t];s.push(u.length)}return e}const Z=[],U=[];function Y(e,t,n,r,i){Z[0]=e;const[s]=X(U,Z,t,n,r,i);return Z.length=U.length=0,s}function X(e,t,n,i,s,o){if(e.length=0,!n){for(const n of t){const t=n.attributes[o];e.push(new a.a(null,n.attributes,null,t))}return e}switch(n){case"esriGeometryPoint":return P(e,t,i,s,o);case"esriGeometryMultipoint":return E(e,t,i,s,o);case"esriGeometryPolyline":return G(e,t,i,s,o);case"esriGeometryPolygon":return k(e,t,i,s,o);default:h.error("convertToFeatureSet:unknown-geometry",new r.a(`Unable to parse unknown geometry type '${n}'`)),e.length=0}return e}function $(e,t,n,i,s,o){const a=e.length;switch(n){case"esriGeometryPoint":P(e,t,i,s,o);break;case"esriGeometryMultipoint":E(e,t,i,s,o);break;case"esriGeometryPolyline":G(e,t,i,s,o);break;case"esriGeometryPolygon":k(e,t,i,s,o);break;default:h.error("convertToFeatureSet:unknown-geometry",new r.a(`Unable to parse unknown geometry type '${n}'`))}for(let r=0;r<t.length;r++)e[r+a].geometryType=n,e[r+a].insertAfter=t[r].insertAfter,e[r+a].groupId=t[r].groupId;return e}function J(e,t,n,r){U[0]=e,B(Z,U,t,n,r);const i=Z[0];return Z.length=U.length=0,i}function Q(e,t,n){if(Object(s.j)(e))return null;const i=new c.a;return"hasZ"in e&&null==t&&(t=e.hasZ),"hasM"in e&&null==n&&(n=e.hasM),Object(o.f)(e)?R(null!=t?t:null!=e.z,null!=n?n:null!=e.m)(i,e):Object(o.g)(e)?D(i,e,t,n):Object(o.h)(e)?q(i,e,l(t,n)):Object(o.e)(e)?A(i,e,l(t,n)):void h.error("convertFromGeometry:unknown-geometry",new r.a(`Unable to parse unknown geometry type '${e}'`))}function W(e,t,n,i){const o=e&&("coords"in e?e:e.geometry);if(Object(s.j)(o))return null;switch(t){case"esriGeometryPoint":{let e=M;return n&&i?e=S:n?e=F:i&&(e=T),e(o)}case"esriGeometryMultipoint":return z(o,n,i);case"esriGeometryPolyline":return V(o,n,i);case"esriGeometryPolygon":return C(o,n,i);default:return void h.error("convertToGeometry:unknown-geometry",new r.a(`Unable to parse unknown geometry type '${t}'`))}}function B(e,t,n,i,o){if(e.length=0,Object(s.j)(n))return function(e,t){for(const n of t)e.push({attributes:n.attributes});return e}(e,t);switch(n){case"esriGeometryPoint":return function(e,t,n,r){let i=M;n&&r?i=S:n?i=F:r&&(i=T);for(const o of t){const{geometry:t,attributes:n}=o,r=Object(s.k)(t)?i(t):null;e.push({attributes:n,geometry:r})}return e}(e,t,i,o);case"esriGeometryMultipoint":return function(e,t,n,r){for(const i of t){const{geometry:t,attributes:s}=i;let o;t&&(o=z(t,n,r)),e.push({attributes:s,geometry:o})}return e}(e,t,i,o);case"esriGeometryPolyline":return function(e,t,n,r){for(const i of t){const{geometry:t,attributes:o}=i;let a;Object(s.k)(t)&&(a=V(t,n,r)),e.push({attributes:o,geometry:a})}return e}(e,t,i,o);case"esriGeometryPolygon":return function(e,t,n,r){for(const i of t){const{geometry:t,attributes:o,centroid:a}=i;let u;if(Object(s.k)(t)&&(u=C(t,n,r)),Object(s.k)(a)){const t=M(a);e.push({attributes:o,centroid:t,geometry:u})}else e.push({attributes:o,geometry:u})}return e}(e,t,i,o);default:h.error("convertToFeatureSet:unknown-geometry",new r.a(`Unable to parse unknown geometry type '${n}'`))}return e}function H(e){const{objectIdFieldName:t,spatialReference:n,transform:r,fields:i,hasM:s,hasZ:o,features:a,geometryType:u,exceededTransferLimit:c,uniqueIdField:l,queryGeometry:h,queryGeometryType:f}=e,d={features:B([],a,u,o,s),fields:i,geometryType:u,objectIdFieldName:t,spatialReference:n,uniqueIdField:l,queryGeometry:W(h,f,!1,!1)};return r&&(d.transform=r),c&&(d.exceededTransferLimit=c),s&&(d.hasM=s),o&&(d.hasZ=o),d}function K(e,t){const n=new u.a,{hasM:i,hasZ:s,features:o,objectIdFieldName:a,spatialReference:c,geometryType:l,exceededTransferLimit:f,transform:d,fields:m}=e;return m&&(n.fields=m),n.geometryType=l,n.objectIdFieldName=a||t,n.spatialReference=c,n.objectIdFieldName?(o&&X(n.features,o,l,s,i,n.objectIdFieldName),f&&(n.exceededTransferLimit=f),i&&(n.hasM=i),s&&(n.hasZ=s),d&&(n.transform=d),n):(h.error(new r.a("optimized-features:invalid-objectIdFieldName","objectIdFieldName is missing")),n)}function ee(e){const{transform:t,features:n,hasM:r,hasZ:i}=e;if(!t)return e;for(const o of n)Object(s.k)(o.geometry)&&ae(o.geometry,o.geometry,r,i,t),Object(s.k)(o.centroid)&&ae(o.centroid,o.centroid,r,i,t);return e.transform=null,e}function te(e,t){const{geometryType:n,features:r,hasM:i,hasZ:s}=t;if(!e)return t;for(let o=0;o<r.length;o++){const t=r[o],a=t.weakClone();a.geometry=new c.a,ne(a.geometry,t.geometry,i,s,n,e),t.centroid&&(a.centroid=new c.a,ne(a.centroid,t.centroid,i,s,"esriGeometryPoint",e)),r[o]=a}return t.transform=e,t}function ne(e,t,n,r,i,o,a=n,u=r){if(e.lengths.length&&(e.lengths.length=0),e.coords.length&&(e.coords.length=0),Object(s.j)(t)||!t.coords.length)return null;const c=f[i],{coords:h,lengths:d}=t,m=l(n,r),p=l(n&&a,r&&u),g=y(n,r,a,u);if(!d.length)return g(e.coords,h,0,0,b(o,h[0]),j(o,h[1])),e.lengths.length&&(e.lengths.length=0),e.coords.length=m,e;let x,O,w,M,_=0,F=0,v=F;for(const s of d){if(s<c)continue;let t=0;F=v,w=x=b(o,h[_]),M=O=j(o,h[_+1]),g(e.coords,h,F,_,w,M),t++,_+=m,F+=p;for(let n=1;n<s;n++,_+=m)w=b(o,h[_]),M=j(o,h[_+1]),w===x&&M===O||(g(e.coords,h,F,_,w-x,M-O),F+=p,t++,x=w,O=M);t>=c&&(e.lengths.push(t),v=F)}return e.coords.length=v,e.coords.length?e:null}function re(e,t,n,r,i,s,o=n,a=r){if(e.lengths.length&&(e.lengths.length=0),e.coords.length&&(e.coords.length=0),!t||!t.coords.length)return null;const u=f[i],{coords:c,lengths:h}=t,d=l(n,r),m=l(n&&o,r&&a),p=y(n,r,o,a);if(!h.length)return p(e.coords,c,0,0,c[0],c[1]),e.lengths.length&&(e.lengths.length=0),e.coords.length=d,e;let g=0;const b=s*s;for(const l of h){if(l<u){g+=l*d;continue}const t=e.coords.length/m,n=g,r=g+(l-1)*d;p(e.coords,c,e.coords.length,n,c[n],c[n+1]),se(e.coords,c,d,b,p,n,r),p(e.coords,c,e.coords.length,r,c[r],c[r+1]);const i=e.coords.length/m-t;i>=u?e.lengths.push(i):e.coords.length=t*m,g+=l*d}return e.coords.length?e:null}function ie(e,t,n,r){const i=e[t],s=e[t+1],o=e[n],a=e[n+1],u=e[r],c=e[r+1];let l=o,h=a,f=u-l,d=c-h;if(0!==f||0!==d){const e=((i-l)*f+(s-h)*d)/(f*f+d*d);e>1?(l=u,h=c):e>0&&(l+=f*e,h+=d*e)}return f=i-l,d=s-h,f*f+d*d}function se(e,t,n,r,i,s,o){let a,u=r,c=0;for(let l=s+n;l<o;l+=n)a=ie(t,l,s,o),a>u&&(c=l,u=a);u>r&&(c-s>n&&se(e,t,n,r,i,s,c),i(e,t,e.length,c,t[c],t[c+1]),o-c>n&&se(e,t,n,r,i,c,o))}function oe(e,t,n,r){if(Object(s.j)(t)||!t.coords||!t.coords.length)return null;const i=l(n,r);let o=Number.POSITIVE_INFINITY,a=Number.POSITIVE_INFINITY,u=Number.NEGATIVE_INFINITY,c=Number.NEGATIVE_INFINITY;if(t&&t.coords){const e=t.coords;for(let t=0;t<e.length;t+=i){const n=e[t],r=e[t+1];o=Math.min(o,n),u=Math.max(u,n),a=Math.min(a,r),c=Math.max(c,r)}}return e[0]=o,e[1]=a,e[2]=u,e[3]=c,e}function ae(e,t,n,r,i){const{coords:s,lengths:o}=t,a=n?r?g:m:r?m:d,u=l(n,r);if(!s.length)return e!==t&&(e.lengths.length=0,e.coords.length=0),e;if(!o.length)return a(e.coords,s,0,0,x(i,s[0]),O(i,s[1])),e!==t&&(e.lengths.length=0,e.coords.length=u),e;const[c,h]=i.scale;let f=0;for(let l=0;l<o.length;l++){const t=o[l];e.lengths[l]=t;let n=x(i,s[f]),r=O(i,s[f+1]);a(e.coords,s,f,f,n,r),f+=u;for(let i=1;i<t;i++,f+=u)n+=s[f]*c,r-=s[f+1]*h,a(e.coords,s,f,f,n,r)}return e!==t&&(e.lengths.length=o.length,e.coords.length=s.length),e}function ue(e,t,n,r,i,s){const o=l(n,r),a=y(n,r,i,s),u=t.coords;e.coords.length=0,e.lengths.length=0,e.lengths.push(...t.lengths);for(let c=0;c<u.length;c+=o)a(e.coords,u,e.coords.length,c,u[c],u[c+1]);return e}function ce(e,t,n,r){let i=0,s=e[r*t],o=e[r*(t+1)];for(let a=1;a<n;a++){const n=s+e[r*(t+a)],u=o+e[r*(t+a)+1],c=(n-s)*(u+o);s=n,o=u,i+=c}return.5*i}function le(e,t){const{coords:n,lengths:r}=e;let i=0,s=0;for(let o=0;o<r.length;o++)s+=ce(n,i,r[o],t),i+=o;return Math.abs(s)}function he(e,t){if(Object(s.j)(e))return null;const n=e.clone(),r=e.coords,i=e.lengths;let o=0;for(let s=0;s<i.length;s++){const e=i[s];let a=r[t*o],u=r[t*o+1];for(let i=1;i<e;i++){const e=a+r[t*(o+i)],s=u+r[t*(o+i)+1];n.coords[t*(o+i)]=e,n.coords[t*(o+i)+1]=s,a=e,u=s}o+=e}return n}},168:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));class r{constructor(e=[],t=[],n=!1){this.lengths=null!=e?e:[],this.coords=null!=t?t:[],this.hasIndeterminateRingOrder=n}get isPoint(){return 0===this.lengths.length}get maxLength(){return Math.max(...this.lengths)}get size(){return this.lengths.reduce(((e,t)=>e+t))}forEachVertex(e){let t=0;this.lengths.length||e(this.coords[0],this.coords[1]);for(let n=0;n<this.lengths.length;n++){const r=this.lengths[n];for(let n=0;n<r;n++)e(this.coords[2*(n+t)],this.coords[2*(n+t)+1]);t+=r}}clone(e){return e?(e.set(this.coords),new r(this.lengths.slice(),e,this.hasIndeterminateRingOrder)):new r(this.lengths.slice(),this.coords.slice(),this.hasIndeterminateRingOrder)}}},172:function(e,t,n){"use strict";n.d(t,"a",(function(){return p}));var r,i=n(79),s=n(89),o=n(81),a=(n(83),n(95)),u=n(80),c=n(86);n(84),n(82);let l=r=class extends c.a{constructor(e){super(e),this.name=null,this.code=null}clone(){return new r({name:this.name,code:this.code})}};Object(i.a)([Object(o.b)({type:String,json:{write:!0}})],l.prototype,"name",void 0),Object(i.a)([Object(o.b)({type:[String,Number],json:{write:!0}})],l.prototype,"code",void 0),l=r=Object(i.a)([Object(u.a)("esri.layers.support.CodedValue")],l);const h=l;var f,d=n(123);let m=f=class extends d.a{constructor(e){super(e),this.codedValues=null,this.type="coded-value"}getName(e){let t=null;if(this.codedValues){const n=String(e);this.codedValues.some((e=>(String(e.code)===n&&(t=e.name),!!t)))}return t}clone(){return new f({codedValues:Object(s.a)(this.codedValues),name:this.name})}};Object(i.a)([Object(o.b)({type:[h],json:{write:!0}})],m.prototype,"codedValues",void 0),Object(i.a)([Object(a.a)({codedValue:"coded-value"})],m.prototype,"type",void 0),m=f=Object(i.a)([Object(u.a)("esri.layers.support.CodedValueDomain")],m);const p=m},174:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r,i=n(79),s=(n(87),n(83),n(84),n(82),n(171),n(95)),o=n(80),a=n(123);let u=r=class extends a.a{constructor(e){super(e),this.type="inherited"}clone(){return new r}};Object(i.a)([Object(s.a)({inherited:"inherited"})],u.prototype,"type",void 0),u=r=Object(i.a)([Object(o.a)("esri.layers.support.InheritedDomain")],u);const c=u},175:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var r,i=n(79),s=n(81),o=(n(84),n(82),n(83),n(95)),a=n(80),u=n(123);let c=r=class extends u.a{constructor(e){super(e),this.maxValue=null,this.minValue=null,this.type="range"}clone(){return new r({maxValue:this.maxValue,minValue:this.minValue,name:this.name})}};Object(i.a)([Object(s.b)({type:Number,json:{type:[Number],read:{source:"range",reader:(e,t)=>t.range&&t.range[1]},write:{enabled:!1,overridePolicy(){return{enabled:null!=this.maxValue&&null==this.minValue}},target:"range",writer(e,t,n){t[n]=[this.minValue||0,e]}}}})],c.prototype,"maxValue",void 0),Object(i.a)([Object(s.b)({type:Number,json:{type:[Number],read:{source:"range",reader:(e,t)=>t.range&&t.range[0]},write:{target:"range",writer(e,t,n){t[n]=[e,this.maxValue||0]}}}})],c.prototype,"minValue",void 0),Object(i.a)([Object(o.a)({range:"range"})],c.prototype,"type",void 0),c=r=Object(i.a)([Object(a.a)("esri.layers.support.RangeDomain")],c);const l=c},204:function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(r){"object"===typeof window&&(n=window)}e.exports=n},209:function(e,t,n){"use strict";n.d(t,"a",(function(){return u})),n.d(t,"b",(function(){return a}));n(82);var r=n(172),i=n(123),s=n(174),o=n(175);const a={key:"type",base:i.a,typeMap:{range:o.a,"coded-value":r.a,inherited:s.a}};function u(e){if(!e||!e.type)return null;switch(e.type){case"range":return o.a.fromJSON(e);case"codedValue":return r.a.fromJSON(e);case"inherited":return s.a.fromJSON(e)}return null}},218:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return s})),n.d(t,"b",(function(){return r})),n.d(t,"c",(function(){return i}));var r="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof e?e:"undefined"!=typeof self?self:{};function i(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function s(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}}).call(this,n(204))},223:function(e,t,n){"use strict";n.d(t,"a",(function(){return E})),n.d(t,"b",(function(){return A})),n.d(t,"c",(function(){return f})),n.d(t,"d",(function(){return y})),n.d(t,"e",(function(){return x})),n.d(t,"f",(function(){return s})),n.d(t,"g",(function(){return g})),n.d(t,"h",(function(){return I})),n.d(t,"i",(function(){return z})),n.d(t,"j",(function(){return a})),n.d(t,"k",(function(){return l})),n.d(t,"l",(function(){return h})),n.d(t,"m",(function(){return u})),n.d(t,"n",(function(){return c})),n.d(t,"o",(function(){return N})),n.d(t,"p",(function(){return o})),n.d(t,"q",(function(){return _})),n.d(t,"r",(function(){return O})),n.d(t,"s",(function(){return P})),n.d(t,"t",(function(){return j})),n.d(t,"u",(function(){return w})),n.d(t,"v",(function(){return M})),n.d(t,"w",(function(){return T})),n.d(t,"x",(function(){return v})),n.d(t,"y",(function(){return F})),n.d(t,"z",(function(){return b})),n.d(t,"A",(function(){return S}));var r=n(85),i=(n(101),n(118));function s(e=A){return[e[0],e[1],e[2],e[3],e[4],e[5]]}function o(e,t,n,r,i,o,a=s()){return a[0]=e,a[1]=t,a[2]=n,a[3]=r,a[4]=i,a[5]=o,a}function a(e,t){e[0]=Math.min(e[0],t[0]),e[1]=Math.min(e[1],t[1]),e[2]=Math.min(e[2],t[2]),e[3]=Math.max(e[3],t[3]),e[4]=Math.max(e[4],t[4]),e[5]=Math.max(e[5],t[5])}function u(e,t){e[0]=Math.min(e[0],t[0]),e[1]=Math.min(e[1],t[1]),e[3]=Math.max(e[3],t[2]),e[4]=Math.max(e[4],t[3])}function c(e,t){e[0]=Math.min(e[0],t[0]),e[1]=Math.min(e[1],t[1]),e[2]=Math.min(e[2],t[2]),e[3]=Math.max(e[3],t[0]),e[4]=Math.max(e[4],t[1]),e[5]=Math.max(e[5],t[2])}function l(e,t,n=0,r=t.length/3){let i=e[0],s=e[1],o=e[2],a=e[3],u=e[4],c=e[5];for(let l=0;l<r;l++)i=Math.min(i,t[n+3*l]),s=Math.min(s,t[n+3*l+1]),o=Math.min(o,t[n+3*l+2]),a=Math.max(a,t[n+3*l]),u=Math.max(u,t[n+3*l+1]),c=Math.max(c,t[n+3*l+2]);e[0]=i,e[1]=s,e[2]=o,e[3]=a,e[4]=u,e[5]=c}function h(e,t,n){const r=t.length;let i=e[0],s=e[1],o=e[2],a=e[3],u=e[4],c=e[5];if(n)for(let l=0;l<r;l++){const e=t[l];i=Math.min(i,e[0]),s=Math.min(s,e[1]),o=Math.min(o,e[2]),a=Math.max(a,e[0]),u=Math.max(u,e[1]),c=Math.max(c,e[2])}else for(let l=0;l<r;l++){const e=t[l];i=Math.min(i,e[0]),s=Math.min(s,e[1]),a=Math.max(a,e[0]),u=Math.max(u,e[1])}e[0]=i,e[1]=s,e[2]=o,e[3]=a,e[4]=u,e[5]=c}function f(e){for(let t=0;t<6;t++)if(!isFinite(e[t]))return!1;return!0}function d(e){return e[0]>=e[3]?0:e[3]-e[0]}function m(e){return e[1]>=e[4]?0:e[4]-e[1]}function p(e){return e[2]>=e[5]?0:e[5]-e[2]}function g(e){const t=d(e),n=p(e),r=m(e);return Math.sqrt(t*t+n*n+r*r)}function y(e,t=[0,0,0]){return t[0]=e[0]+d(e)/2,t[1]=e[1]+m(e)/2,t[2]=e[2]+p(e)/2,t}function b(e,t=[0,0,0]){return t[0]=d(e),t[1]=m(e),t[2]=p(e),t}function j(e){return Math.max(d(e),p(e),m(e))}function x(e,t){return t[0]>=e[0]&&t[1]>=e[1]&&t[2]>=e[2]&&t[0]<=e[3]&&t[1]<=e[4]&&t[2]<=e[5]}function O(e,t){return!!Object(r.j)(t)||function(e,t){return Math.max(t[0],e[0])<=Math.min(t[3],e[3])&&Math.max(t[1],e[1])<=Math.min(t[4],e[4])&&Math.max(t[2],e[2])<=Math.min(t[5],e[5])}(e,t)}function w(e,t,n,r,i=e){return i[0]=e[0]+t,i[1]=e[1]+n,i[2]=e[2]+r,i[3]=e[3]+t,i[4]=e[4]+n,i[5]=e[5]+r,i}function M(e,t,n=e){const r=e[0]+d(e)/2,i=e[1]+m(e)/2,s=e[2]+p(e)/2;return n[0]=r+(e[0]-r)*t,n[1]=i+(e[1]-i)*t,n[2]=s+(e[2]-s)*t,n[3]=r+(e[3]-r)*t,n[4]=i+(e[4]-i)*t,n[5]=s+(e[5]-s)*t,n}function _(e,t){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t}function F(e,t,n=e){return n[0]=t[0],n[1]=t[1],n[2]=t[2],n!==e&&(n[3]=e[3],n[4]=e[4],n[5]=e[5]),n}function v(e,t,n=e){return n[3]=t[0],n[4]=t[1],n[5]=t[2],n!==e&&(n[0]=e[0],n[1]=e[1],n[2]=e[2]),e}function T(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e}function I(e){return e?T(e,E):s(E)}function S(e,t){return t||(t=Object(i.l)()),t[0]=e[0],t[1]=e[1],t[2]=e[3],t[3]=e[4],t}function N(e,t){return e[0]=t[0],e[1]=t[1],e[2]=Number.NEGATIVE_INFINITY,e[3]=t[2],e[4]=t[3],e[5]=Number.POSITIVE_INFINITY,e}function R(e){return 6===e.length}function P(e){return 0===d(e)&&0===m(e)&&0===p(e)}function z(e,t,n){if(Object(r.j)(e)||Object(r.j)(t))return e===t;if(!R(e)||!R(t))return!1;if(n){for(let r=0;r<e.length;r++)if(!n(e[r],t[r]))return!1}else for(let r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}const E=[1/0,1/0,1/0,-1/0,-1/0,-1/0],A=[0,0,0,0,0,0];s()},229:function(e,t,n){"use strict";n.d(t,"a",(function(){return w})),n.d(t,"b",(function(){return M})),n.d(t,"c",(function(){return j}));var r=n(153),i=n(88),s=n(87),o=n(85),a=n(135),u=n(140),c=n(247),l=n(110),h=n(182),f=(n(99),n(103)),d=n(98),m=n(97);async function p(e,t,n){const r="string"==typeof e?Object(d.M)(e):e,i=t[0].spatialReference,s=Object(m.c)(t[0]),o={...n,query:{...r.query,f:"json",sr:i.wkid?i.wkid:JSON.stringify(i),geometries:JSON.stringify((a=t,{geometryType:Object(m.c)(a[0]),geometries:a.map((e=>e.toJSON()))}))}};var a;return function(e,t,n){const r=Object(m.b)(t);return e.map((e=>{const t=r.fromJSON(e);return t.spatialReference=n,t}))}((await Object(f.default)(r.path+"/simplify",o)).data,s,i)}const g=s.a.getLogger("esri.geometry.support.normalizeUtils");function y(e){return"polygon"===e[0].type}function b(e){return"polyline"===e[0].type}function j(e,t){if(!(e instanceof u.a||e instanceof a.a)){const e="straightLineDensify: the input geometry is neither polyline nor polygon";throw g.error(e),new i.a(e)}const n=Object(c.b)(e),r=[];for(const i of n){const e=[];r.push(e),e.push([i[0][0],i[0][1]]);for(let n=0;n<i.length-1;n++){const r=i[n][0],s=i[n][1],o=i[n+1][0],a=i[n+1][1],u=Math.sqrt((o-r)*(o-r)+(a-s)*(a-s)),c=(a-s)/u,l=(o-r)/u,h=u/t;if(h>1){for(let a=1;a<=h-1;a++){const n=a*t,i=l*n+r,o=c*n+s;e.push([i,o])}const n=(u+Math.floor(h-1)*t)/2,i=l*n+r,o=c*n+s;e.push([i,o])}e.push([o,a])}}return function(e){return"polygon"===e.type}(e)?new a.a({rings:r,spatialReference:e.spatialReference}):new u.a({paths:r,spatialReference:e.spatialReference})}function x(e,t,n){if(t){const t=j(e,1e6);e=Object(h.e)(t,!0)}return n&&(e=Object(c.e)(e,n)),e}function O(e,t,n){if(Array.isArray(e)){const r=e[0];if(r>t){const n=Object(c.d)(r,t);e[0]=r+n*(-2*t)}else if(r<n){const t=Object(c.d)(r,n);e[0]=r+t*(-2*n)}}else{const r=e.x;if(r>t){const n=Object(c.d)(r,t);e=e.clone().offset(n*(-2*t),0)}else if(r<n){const t=Object(c.d)(r,n);e=e.clone().offset(t*(-2*n),0)}}return e}async function w(e,t,n){var i;if(!Array.isArray(e))return w([e],t);const s=null!=(i=null==t?void 0:t.url)?i:r.a.geometryServiceUrl;let g,j,M,_,F,v,T,I,S=0;const N=[],R=[];for(const r of e)if(Object(o.j)(r))R.push(r);else if(g||(g=r.spatialReference,j=Object(l.e)(g),M=g.isWebMercator,v=M?102100:4326,_=c.a[v].maxX,F=c.a[v].minX,T=c.a[v].plus180Line,I=c.a[v].minus180Line),j)if("mesh"===r.type)R.push(r);else if("point"===r.type)R.push(O(r.clone(),_,F));else if("multipoint"===r.type){const e=r.clone();e.points=e.points.map((e=>O(e,_,F))),R.push(e)}else if("extent"===r.type){const e=r.clone()._normalize(!1,!1,j);R.push(e.rings?new a.a(e):e)}else if(r.extent){const e=r.extent,t=Object(c.d)(e.xmin,F)*(2*_);let n=0===t?r.clone():Object(c.e)(r.clone(),t);e.offset(t,0),e.intersects(T)&&e.xmax!==_?(S=e.xmax>S?e.xmax:S,n=x(n,M),N.push(n),R.push("cut")):e.intersects(I)&&e.xmin!==F?(S=e.xmax*(2*_)>S?e.xmax*(2*_):S,n=x(n,M,360),N.push(n),R.push("cut")):R.push(n)}else R.push(r.clone());else R.push(r);let P=Object(c.d)(S,_),z=-90;const E=P,A=new u.a;for(;P>0;){const e=360*P-180;A.addPath([[e,z],[e,-1*z]]),z*=-1,P--}if(N.length>0&&E>0){const t=function(e,t){let n=-1;for(let r=0;r<t.cutIndexes.length;r++){const i=t.cutIndexes[r],s=t.geometries[r],o=Object(c.b)(s);for(let e=0;e<o.length;e++){const t=o[e];t.some((n=>{if(n[0]<180)return!0;{let n=0;for(let e=0;e<t.length;e++){const r=t[e][0];n=r>n?r:n}n=Number(n.toFixed(9));const r=-360*Object(c.d)(n,180);for(let i=0;i<t.length;i++){const t=s.getPoint(e,i);s.setPoint(e,i,t.clone().offset(r,0))}return!0}}))}if(i===n){if(y(e))for(const t of Object(c.b)(s))e[i]=e[i].addRing(t);else if(b(e))for(const t of Object(c.b)(s))e[i]=e[i].addPath(t)}else n=i,e[i]=s}return e}(N,await async function(e,t,n,r){const i="string"==typeof e?Object(d.M)(e):e,s=t[0].spatialReference,o={...r,query:{...i.query,f:"json",sr:JSON.stringify(s),target:JSON.stringify({geometryType:Object(m.c)(t[0]),geometries:t}),cutter:JSON.stringify(n)}},a=await Object(f.default)(i.path+"/cut",o),{cutIndexes:u,geometries:c=[]}=a.data;return{cutIndexes:u,geometries:c.map((e=>{const t=Object(m.a)(e);return t.spatialReference=s,t}))}}(s,N,A,n)),r=[],i=[];for(let n=0;n<R.length;n++){const s=R[n];if("cut"!==s)i.push(s);else{const s=t.shift(),a=e[n];Object(o.k)(a)&&"polygon"===a.type&&a.rings&&a.rings.length>1&&s.rings.length>=a.rings.length?(r.push(s),i.push("simplify")):i.push(M?Object(h.b)(s):s)}}if(!r.length)return i;const a=await p(s,r,n),u=[];for(let e=0;e<i.length;e++){const t=i[e];"simplify"!==t?u.push(t):u.push(M?Object(h.b)(a.shift()):a.shift())}return u}const V=[];for(let r=0;r<R.length;r++){const e=R[r];if("cut"!==e)V.push(e);else{const e=N.shift();V.push(!0===M?Object(h.b)(e):e)}}return Promise.resolve(V)}function M(e,t){const n=Object(l.e)(t);if(n){const[t,r]=n.valid,i=r-t;if(e<t)for(;e<t;)e+=i;if(e>r)for(;e>r;)e-=i}return e}},243:function(e,t,n){"use strict";n.d(t,"a",(function(){return s})),n.d(t,"b",(function(){return u})),n.d(t,"c",(function(){return c})),n.d(t,"d",(function(){return o}));var r=n(85),i=n(212);const s=-3;var o,a;(a=o||(o={}))[a.ALL=0]="ALL",a[a.SOME=1]="SOME";class u{constructor(e,t,n){this._namespace=e,this._storage=t,this._removeFunc=!1,this._hit=0,this._miss=0,this._storage.register(this),this._namespace+=":",n&&(this._storage.registerRemoveFunc(this._namespace,n),this._removeFunc=!0)}destroy(){this._storage.clear(this._namespace),this._removeFunc&&this._storage.deregisterRemoveFunc(this._namespace),this._storage.deregister(this),this._storage=null}get namespace(){return this._namespace.slice(0,-1)}get hitRate(){return this._hit/(this._hit+this._miss)}get size(){return this._storage.size}get maxSize(){return this._storage.maxSize}resetHitRate(){this._hit=this._miss=0}put(e,t,n,r=0){this._storage.put(this._namespace+e,t,n,r)}get(e){const t=this._storage.get(this._namespace+e);return void 0===t?++this._miss:++this._hit,t}pop(e){const t=this._storage.pop(this._namespace+e);return void 0===t?++this._miss:++this._hit,t}updateSize(e,t,n){this._storage.updateSize(this._namespace+e,t,n)}clear(){this._storage.clear(this._namespace)}clearAll(){this._storage.clearAll()}getStats(){return this._storage.getStats()}resetStats(){this._storage.resetStats()}}class c{constructor(e=10485760){this._maxSize=e,this._db=new Map,this._size=0,this._hit=0,this._miss=0,this._removeFuncs=new i.a,this._users=new i.a}destroy(){this.clearAll(),this._removeFuncs.clear(),this._users.clear(),this._db=null}register(e){this._users.push(e)}deregister(e){this._users.removeUnordered(e)}registerRemoveFunc(e,t){this._removeFuncs.push([e,t])}deregisterRemoveFunc(e){this._removeFuncs.filterInPlace((t=>t[0]!==e))}get size(){return this._size}get maxSize(){return this._maxSize}set maxSize(e){this._maxSize=Math.max(e,0),this._checkSizeLimit()}put(e,t,n,r){const i=this._db.get(e);if(i&&(this._size-=i.size,this._db.delete(e),i.entry!==t&&this._notifyRemove(e,i.entry,o.ALL)),n>this._maxSize)return void this._notifyRemove(e,t,o.ALL);if(void 0===t)return void console.warn("Refusing to cache undefined entry ");if(!n||n<0)return void console.warn("Refusing to cache entry with invalid size "+n);const a=1+Math.max(r,s)-s;this._db.set(e,{entry:t,size:n,lifetime:a,lives:a}),this._size+=n,this._checkSizeLimit()}updateSize(e,t,n){const i=this._db.get(e);if(i&&i.entry===t){for(this._size-=i.size;n>this._maxSize;){const i=this._notifyRemove(e,t,o.SOME);if(!(Object(r.k)(i)&&i>0))return void this._db.delete(e);n=i}i.size=n,this._size+=n,this._checkSizeLimit()}}pop(e){const t=this._db.get(e);if(t)return this._size-=t.size,this._db.delete(e),++this._hit,t.entry;++this._miss}get(e){const t=this._db.get(e);if(void 0!==t)return this._db.delete(e),t.lives=t.lifetime,this._db.set(e,t),++this._hit,t.entry;++this._miss}getStats(){const e={Size:Math.round(this._size/1048576)+"/"+Math.round(this._maxSize/1048576)+"MB","Hit rate":Math.round(100*this._getHitRate())+"%",Entries:this._db.size.toString()},t={},n=new Array;this._db.forEach(((e,r)=>{const i=e.lifetime;n[i]=(n[i]||0)+e.size,this._users.forAll((n=>{const i=n.namespace;if(r.startsWith(i)){const n=t[i]||0;t[i]=n+e.size}}))}));const r={};this._users.forAll((e=>{const n=e.namespace;if(!isNaN(e.hitRate)&&e.hitRate>0){const i=t[n]||0;t[n]=i,r[n]=Math.round(100*e.hitRate)+"%"}else r[n]="0%"}));const i=Object.keys(t);i.sort(((e,n)=>t[n]-t[e])),i.forEach((n=>e[n]=Math.round(t[n]/2**20)+"MB / "+r[n]));for(let o=n.length-1;o>=0;--o){const t=n[o];t&&(e["Priority "+(o+s-1)]=Math.round(t/this.size*100)+"%")}return e}resetStats(){this._hit=this._miss=0,this._users.forAll((e=>e.resetHitRate()))}clear(e){this._db.forEach(((t,n)=>{n.startsWith(e)&&(this._size-=t.size,this._db.delete(n),this._notifyRemove(n,t.entry,o.ALL))}))}clearAll(){this._db.forEach(((e,t)=>this._notifyRemove(t,e.entry,o.ALL))),this._size=0,this._db.clear()}_getHitRate(){return this._hit/(this._hit+this._miss)}_notifyRemove(e,t,n){let r;return this._removeFuncs.some((i=>{if(e.startsWith(i[0])){const e=i[1](t,n);return"number"==typeof e&&(r=e),!0}return!1})),r}_checkSizeLimit(){if(!(this._size<=this._maxSize))for(const[e,t]of this._db){if(this._db.delete(e),t.lives<=1){this._size-=t.size;const n=this._notifyRemove(e,t.entry,o.SOME);Object(r.k)(n)&&n>0&&(this._size+=n,t.lives=t.lifetime,t.size=n,this._db.set(e,t))}else--t.lives,this._db.set(e,t);if(this._size<=.9*this.maxSize)return}}}},247:function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return c})),n.d(t,"c",(function(){return l})),n.d(t,"d",(function(){return a})),n.d(t,"e",(function(){return u}));var r=n(140),i=n(96),s=n(97);const o={102100:{maxX:20037508.342788905,minX:-20037508.342788905,plus180Line:new r.a({paths:[[[20037508.342788905,-20037508.342788905],[20037508.342788905,20037508.342788905]]],spatialReference:i.a.WebMercator}),minus180Line:new r.a({paths:[[[-20037508.342788905,-20037508.342788905],[-20037508.342788905,20037508.342788905]]],spatialReference:i.a.WebMercator})},4326:{maxX:180,minX:-180,plus180Line:new r.a({paths:[[[180,-180],[180,180]]],spatialReference:i.a.WGS84}),minus180Line:new r.a({paths:[[[-180,-180],[-180,180]]],spatialReference:i.a.WGS84})}};function a(e,t){return Math.ceil((e-t)/(2*t))}function u(e,t){const n=c(e);for(const r of n)for(const e of r)e[0]+=t;return e}function c(e){return Object(s.g)(e)?e.rings:e.paths}function l(e){const t=(null==e?void 0:e.isWebMercator)?102100:4326;return[o[t].minX,o[t].maxX]}},252:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(106);function i(e){return"oid"===e.type||"esriFieldTypeOID"===e.type}function s(e){return"global-id"===e.type||"esriFieldTypeGlobalID"===e.type}class o{constructor(e){if(this.fields=e,this._fieldsMap=new Map,this._dateFieldsSet=new Set,this._numericFieldsSet=new Set,this.dateFields=[],this.numericFields=[],this._requiredFields=null,!e)return;const t=[];for(const o of e){const e=o&&o.name;if(e){const u=a(e);this._fieldsMap.set(e,o),this._fieldsMap.set(u,o),t.push(u),"date"===(n=o).type||"esriFieldTypeDate"===n.type?(this.dateFields.push(o),this._dateFieldsSet.add(o)):Object(r.u)(o)&&(this._numericFieldsSet.add(o),this.numericFields.push(o)),i(o)||s(o)||(o.editable=null==o.editable||!!o.editable,o.nullable=null==o.nullable||!!o.nullable)}}var n;t.sort(),this.uid=t.join(",")}destroy(){this._fieldsMap.clear()}get requiredFields(){if(!this._requiredFields){this._requiredFields=[];for(const e of this.fields)i(e)||s(e)||e.nullable||void 0!==Object(r.r)(e)||this._requiredFields.push(e)}return this._requiredFields}has(e){return null!=this.get(e)}get(e){return null!=e?this._fieldsMap.get(e)||this._fieldsMap.get(a(e)):void 0}isDateField(e){return this._dateFieldsSet.has(this.get(e))}isNumericField(e){return this._numericFieldsSet.has(this.get(e))}normalizeFieldName(e){const t=this.get(e);if(t)return t.name}}function a(e){return e.toLowerCase().trim()}},262:function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return o})),n.d(t,"c",(function(){return s}));var r=n(85);class i{constructor(e=null,t={},n,r){this.geometry=e,this.attributes=t,this.centroid=n,this.objectId=r,this.displayId=0,this.geohashX=0,this.geohashY=0}weakClone(){const e=new i(this.geometry,this.attributes,this.centroid,this.objectId);return e.displayId=this.displayId,e.geohashX=this.geohashX,e.geohashY=this.geohashY,e}}function s(e){return!(Object(r.j)(e.geometry)||!e.geometry.coords||!e.geometry.coords.length)}class o extends i{}},268:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));const r=new(n(90).a)({esriFieldTypeSmallInteger:"small-integer",esriFieldTypeInteger:"integer",esriFieldTypeSingle:"single",esriFieldTypeDouble:"double",esriFieldTypeLong:"long",esriFieldTypeString:"string",esriFieldTypeDate:"date",esriFieldTypeOID:"oid",esriFieldTypeGeometry:"geometry",esriFieldTypeBlob:"blob",esriFieldTypeRaster:"raster",esriFieldTypeGUID:"guid",esriFieldTypeGlobalID:"global-id",esriFieldTypeXML:"xml"})},274:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(85),i=n(114),s=n(110);function o(e,t,n){if(Object(r.j)(t)||Object(r.j)(n)||n.vcsWkid||Object(s.d)(t,n))return null;const o=Object(i.f)(t)/Object(i.f)(n);if(1===o)return null;switch(e){case"point":case"esriGeometryPoint":return e=>function(e,t){e&&null!=e.z&&(e.z*=t)}(e,o);case"polyline":case"esriGeometryPolyline":return e=>function(e,t){if(e)for(const n of e.paths)for(const e of n)e.length>2&&(e[2]*=t)}(e,o);case"polygon":case"esriGeometryPolygon":return e=>function(e,t){if(e)for(const n of e.rings)for(const e of n)e.length>2&&(e[2]*=t)}(e,o);case"multipoint":case"esriGeometryMultipoint":return e=>function(e,t){if(e)for(const n of e.points)n.length>2&&(n[2]*=t)}(e,o);case"extent":case"esriGeometryExtent":return e=>function(e,t){e&&null!=e.zmin&&null!=e.zmax&&(e.zmin*=t,e.zmax*=t)}(e,o);default:return null}}},328:function(e,t,n){"use strict";n.d(t,"a",(function(){return x})),n.d(t,"b",(function(){return y})),n.d(t,"c",(function(){return u})),n.d(t,"d",(function(){return O})),n.d(t,"e",(function(){return w})),n.d(t,"f",(function(){return M})),n.d(t,"g",(function(){return _}));var r=n(85),i=n(97);const s=(e,t,n)=>[t,n],o=(e,t,n)=>[t,n,e[2]],a=(e,t,n)=>[t,n,e[2],e[3]];function u(e){return e?{originPosition:"upper-left"===e.originPosition?"upperLeft":"lower-left"===e.originPosition?"lowerLeft":e.originPosition,scale:e.tolerance?[e.tolerance,e.tolerance]:[1,1],translate:Object(r.k)(e.extent)?[e.extent.xmin,e.extent.ymax]:[0,0]}:null}function c({scale:e,translate:t},n){return Math.round((n-t[0])/e[0])}function l({scale:e,translate:t},n){return Math.round((t[1]-n)/e[1])}function h(e,t,n){const r=[];let i,s,o,a;for(let u=0;u<n.length;u++){const h=n[u];u>0?(o=c(e,h[0]),a=l(e,h[1]),o===i&&a===s||(r.push(t(h,o-i,a-s)),i=o,s=a)):(i=c(e,h[0]),s=l(e,h[1]),r.push(t(h,i,s)))}return r.length>0?r:null}function f({scale:e,translate:t},n){return n*e[0]+t[0]}function d({scale:e,translate:t},n){return t[1]-n*e[1]}function m(e,t,n){const r=new Array(n.length);if(!n.length)return r;const[i,s]=e.scale;let o=f(e,n[0][0]),a=d(e,n[0][1]);r[0]=t(n[0],o,a);for(let u=1;u<n.length;u++){const e=n[u];o+=e[0]*i,a-=e[1]*s,r[u]=t(e,o,a)}return r}function p(e,t,n){const r=new Array(n.length);for(let i=0;i<n.length;i++)r[i]=m(e,t,n[i]);return r}function g(e,t,n,r,i){return t.points=function(e,t,n,r){return h(e,n?r?a:o:r?o:s,t)}(e,n.points,r,i),t}function y(e,t,n,r,i){return t.x=c(e,n.x),t.y=l(e,n.y),t!==n&&(r&&(t.z=n.z),i&&(t.m=n.m)),t}function b(e,t,n,r,i){const u=function(e,t,n,r){const i=[],u=n?r?a:o:r?o:s;for(let s=0;s<t.length;s++){const n=h(e,u,t[s]);n&&n.length>=3&&i.push(n)}return i.length?i:null}(e,n.rings,r,i);return u?(t.rings=u,t):null}function j(e,t,n,r,i){const u=function(e,t,n,r){const i=[],u=n?r?a:o:r?o:s;for(let s=0;s<t.length;s++){const n=h(e,u,t[s]);n&&n.length>=2&&i.push(n)}return i.length?i:null}(e,n.paths,r,i);return u?(t.paths=u,t):null}function x(e,t){return e&&t?Object(i.f)(t)?y(e,{},t,!1,!1):Object(i.h)(t)?j(e,{},t,!1,!1):Object(i.g)(t)?b(e,{},t,!1,!1):Object(i.e)(t)?g(e,{},t,!1,!1):Object(i.d)(t)?function(e,t,n,r,i){return t.xmin=c(e,n.xmin),t.ymin=l(e,n.ymin),t.xmax=c(e,n.xmax),t.ymax=l(e,n.ymax),t!==n&&(r&&(t.zmin=n.zmin,t.zmax=n.zmax),i&&(t.mmin=n.mmin,t.mmax=n.mmax)),t}(e,{},t,!1,!1):null:null}function O(e,t,n,i,u){return Object(r.k)(n)&&(t.points=function(e,t,n,r){return m(e,n?r?a:o:r?o:s,t)}(e,n.points,i,u)),t}function w(e,t,n,i,s){return Object(r.j)(n)||(t.x=f(e,n.x),t.y=d(e,n.y),t!==n&&(i&&(t.z=n.z),s&&(t.m=n.m))),t}function M(e,t,n,i,u){return Object(r.k)(n)&&(t.rings=function(e,t,n,r){return p(e,n?r?a:o:r?o:s,t)}(e,n.rings,i,u)),t}function _(e,t,n,i,u){return Object(r.k)(n)&&(t.paths=function(e,t,n,r){return p(e,n?r?a:o:r?o:s,t)}(e,n.paths,i,u)),t}},332:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));class r{constructor(){this.objectIdFieldName=null,this.globalIdFieldName=null,this.geohashFieldName=null,this.geometryProperties=null,this.geometryType=null,this.spatialReference=null,this.hasZ=!1,this.hasM=!1,this.features=[],this.fields=[],this.transform=null,this.exceededTransferLimit=!1,this.uniqueIdField=null,this.queryGeometryType=null,this.queryGeometry=null}weakClone(){const e=new r;return e.objectIdFieldName=this.objectIdFieldName,e.globalIdFieldName=this.globalIdFieldName,e.geohashFieldName=this.geohashFieldName,e.geometryProperties=this.geometryProperties,e.geometryType=this.geometryType,e.spatialReference=this.spatialReference,e.hasZ=this.hasZ,e.hasM=this.hasM,e.features=this.features,e.fields=this.fields,e.transform=this.transform,e.exceededTransferLimit=this.exceededTransferLimit,e.uniqueIdField=this.uniqueIdField,e.queryGeometry=this.queryGeometry,e.queryGeometryType=this.queryGeometryType,e}}},364:function(e,t,n){"use strict";n.d(t,"a",(function(){return f})),n.d(t,"b",(function(){return p})),n.d(t,"c",(function(){return y}));var r=n(85),i=n(187),s=n(432),o=n(110),a=n(182);const u=[0,0];function c(e,t){if(!t)return null;if("x"in t){const n={x:0,y:0};return[n.x,n.y]=e(t.x,t.y,u),null!=t.z&&(n.z=t.z),null!=t.m&&(n.m=t.m),n}if("xmin"in t){const n={xmin:0,ymin:0,xmax:0,ymax:0};return[n.xmin,n.ymin]=e(t.xmin,t.ymin,u),[n.xmax,n.ymax]=e(t.xmax,t.ymax,u),t.hasZ&&(n.zmin=t.zmin,n.zmax=t.zmax,n.hasZ=!0),t.hasM&&(n.mmin=t.mmin,n.mmax=t.mmax,n.hasM=!0),n}return"rings"in t?{rings:l(t.rings,e),hasM:t.hasM,hasZ:t.hasZ}:"paths"in t?{paths:l(t.paths,e),hasM:t.hasM,hasZ:t.hasZ}:"points"in t?{points:h(t.points,e),hasM:t.hasM,hasZ:t.hasZ}:void 0}function l(e,t){const n=[];for(const r of e)n.push(h(r,t));return n}function h(e,t){const n=[];for(const r of e){const e=t(r[0],r[1],[0,0]);n.push(e),r.length>2&&e.push(r[2]),r.length>3&&e.push(r[3])}return n}async function f(e,t){if(!t)return;const n=Array.isArray(e)?e.map((e=>Object(r.k)(e.geometry)&&e.geometry.spatialReference)):[e];await Object(i.f)(n.map((e=>({source:e,dest:t}))))}const d=c.bind(null,a.c),m=c.bind(null,a.g);function p(e,t,n){if(!e)return e;if(n||(n=t,t=e.spatialReference),!Object(o.l)(t)||!Object(o.l)(n)||Object(o.d)(t,n))return e;if(Object(a.a)(t,n)){const t=Object(o.p)(n)?d(e):m(e);return t.spatialReference=n,t}return Object(i.m)(s.a,[e],t,n,null)[0]}const g=new class{constructor(){this._jobs=[],this._timer=null,this._process=this._process.bind(this)}async push(e,t,n){if(!e||!e.length||!t||!n||Object(o.d)(t,n))return e;const r={geometries:e,inSpatialReference:t,outSpatialReference:n,resolve:null};return this._jobs.push(r),new Promise((e=>{r.resolve=e,null===this._timer&&(this._timer=setTimeout(this._process,10))}))}_process(){this._timer=null;const e=this._jobs.shift();if(!e)return;const{geometries:t,inSpatialReference:n,outSpatialReference:r,resolve:u}=e;Object(a.a)(n,r)?Object(o.p)(r)?u(t.map(d)):u(t.map(m)):u(Object(i.m)(s.a,t,n,r,null)),this._jobs.length>0&&(this._timer=setTimeout(this._process,10))}};function y(e,t,n){return g.push(e,t,n)}},432:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));const r={convertToGEGeometry:function(e,t){return null==t?null:e.convertJSONToGeometry(t)},exportPoint:function(e,t,n){const r=new i(e.getPointX(t),e.getPointY(t),n),s=e.hasZ(t),o=e.hasM(t);return s&&(r.z=e.getPointZ(t)),o&&(r.m=e.getPointM(t)),r},exportPolygon:function(e,t,n){return new s(e.exportPaths(t),n,e.hasZ(t),e.hasM(t))},exportPolyline:function(e,t,n){return new o(e.exportPaths(t),n,e.hasZ(t),e.hasM(t))},exportMultipoint:function(e,t,n){return new a(e.exportPoints(t),n,e.hasZ(t),e.hasM(t))},exportExtent:function(e,t,n){const r=e.hasZ(t),i=e.hasM(t),s=new u(e.getXMin(t),e.getYMin(t),e.getXMax(t),e.getYMax(t),n);if(r){const n=e.getZExtent(t);s.zmin=n.vmin,s.zmax=n.vmax}if(i){const n=e.getMExtent(t);s.mmin=n.vmin,s.mmax=n.vmax}return s}};class i{constructor(e,t,n){this.x=e,this.y=t,this.spatialReference=n,this.z=void 0,this.m=void 0}}class s{constructor(e,t,n,r){this.rings=e,this.spatialReference=t,this.hasZ=void 0,this.hasM=void 0,n&&(this.hasZ=n),r&&(this.hasM=r)}}class o{constructor(e,t,n,r){this.paths=e,this.spatialReference=t,this.hasZ=void 0,this.hasM=void 0,n&&(this.hasZ=n),r&&(this.hasM=r)}}class a{constructor(e,t,n,r){this.points=e,this.spatialReference=t,this.hasZ=void 0,this.hasM=void 0,n&&(this.hasZ=n),r&&(this.hasM=r)}}class u{constructor(e,t,n,r,i){this.xmin=e,this.ymin=t,this.xmax=n,this.ymax=r,this.spatialReference=i,this.zmin=void 0,this.zmax=void 0,this.mmin=void 0,this.mmax=void 0}}},451:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(243);class i{constructor(e,t){this._storage=new r.c,this._storage.maxSize=e,t&&this._storage.registerRemoveFunc("",t)}put(e,t){this._storage.put(e,t,1,1)}pop(e){return this._storage.pop(e)}get(e){return this._storage.get(e)}clear(){this._storage.clearAll()}destroy(){this._storage.destroy()}}},460:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(85);function i(e,t){return e?t?4:3:t?3:2}function s(e,t,n,s,u){if(Object(r.j)(t)||!t.lengths.length)return null;const c="upperLeft"===(null==u?void 0:u.originPosition)?-1:1;e.lengths.length&&(e.lengths.length=0),e.coords.length&&(e.coords.length=0);const l=e.coords,h=[],f=n?[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY]:[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY],{lengths:d,coords:m}=t,p=i(n,s);let g=0;for(const r of d){const e=o(f,m,g,r,n,s,c);e&&h.push(e),g+=r*p}if(h.sort(((e,t)=>{let r=c*e[2]-c*t[2];return 0===r&&n&&(r=e[4]-t[4]),r})),h.length){let e=6*h[0][2];l[0]=h[0][0]/e,l[1]=h[0][1]/e,n&&(e=6*h[0][4],l[2]=0!==e?h[0][3]/e:0),(l[0]<f[0]||l[0]>f[1]||l[1]<f[2]||l[1]>f[3]||n&&(l[2]<f[4]||l[2]>f[5]))&&(l.length=0)}if(!l.length){const e=t.lengths[0]?a(m,0,d[0],n,s):null;if(!e)return null;l[0]=e[0],l[1]=e[1],n&&e.length>2&&(l[2]=e[2])}return e}function o(e,t,n,r,s,o,a=1){const u=i(s,o);let c=n,l=n+u,h=0,f=0,d=0,m=0,p=0;for(let i=0,y=r-1;i<y;i++,c+=u,l+=u){const n=t[c],r=t[c+1],i=t[c+2],o=t[l],a=t[l+1],u=t[l+2];let g=n*a-o*r;m+=g,h+=(n+o)*g,f+=(r+a)*g,s&&(g=n*u-o*i,d+=(i+u)*g,p+=g),n<e[0]&&(e[0]=n),n>e[1]&&(e[1]=n),r<e[2]&&(e[2]=r),r>e[3]&&(e[3]=r),s&&(i<e[4]&&(e[4]=i),i>e[5]&&(e[5]=i))}if(m*a>0&&(m*=-1),p*a>0&&(p*=-1),!m)return null;const g=[h,f,.5*m];return s&&(g[3]=d,g[4]=.5*p),g}function a(e,t,n,r,s){const o=i(r,s);let a=t,f=t+o,d=0,m=0,p=0,g=0;for(let i=0,y=n-1;i<y;i++,a+=o,f+=o){const t=e[a],n=e[a+1],i=e[a+2],s=e[f],o=e[f+1],y=e[f+2],b=r?c(t,n,i,s,o,y):u(t,n,s,o);if(b)if(d+=b,r){const e=h(t,n,i,s,o,y);m+=b*e[0],p+=b*e[1],g+=b*e[2]}else{const e=l(t,n,s,o);m+=b*e[0],p+=b*e[1]}}return d>0?r?[m/d,p/d,g/d]:[m/d,p/d]:n>0?r?[e[t],e[t+1],e[t+2]]:[e[t],e[t+1]]:null}function u(e,t,n,r){const i=n-e,s=r-t;return Math.sqrt(i*i+s*s)}function c(e,t,n,r,i,s){const o=r-e,a=i-t,u=s-n;return Math.sqrt(o*o+a*a+u*u)}function l(e,t,n,r){return[e+.5*(n-e),t+.5*(r-t)]}function h(e,t,n,r,i,s){return[e+.5*(r-e),t+.5*(i-t),n+.5*(s-n)]}},561:function(e,t,n){"use strict";n.d(t,"a",(function(){return p})),n.d(t,"b",(function(){return m})),n.d(t,"c",(function(){return f})),n.d(t,"d",(function(){return g})),n.d(t,"e",(function(){return d})),n.d(t,"f",(function(){return h})),n.d(t,"g",(function(){return l}));var r=n(88),i=n(451),s=n(285);const o=new class{constructor(e,t){this._cache=new i.a(e),this._invalidCache=new i.a(t)}get(e,t){const n=`${t.uid}:${e}`,r=this._cache.get(n);if(r)return r;if(void 0!==this._invalidCache.get(n))return null;try{const r=s.WhereClause.create(e,t);return this._cache.put(n,r),r}catch{return this._invalidCache.put(n,null),null}}}(50,500),a="feature-store:unsupported-query",u=" as ",c=new Set(["esriFieldTypeOID","esriFieldTypeSmallInteger","esriFieldTypeInteger","esriFieldTypeSingle","esriFieldTypeDouble","esriFieldTypeLong","esriFieldTypeDate"]);function l(e,t){if(!t)return!0;const n=o.get(t,e);if(!n)throw new r.a(a,"invalid SQL expression",{where:t});if(!n.isStandardized)throw new r.a(a,"where clause is not standard",{where:t});return d(e,n.fieldNames,"where clause contains missing fields"),!0}function h(e,t,n){if(!t)return!0;const i=o.get(t,e);if(!i)throw new r.a(a,"invalid SQL expression",{having:t});if(!i.isAggregate)throw new r.a(a,"having does not contain a valid aggregate function",{having:t});const s=i.fieldNames;if(d(e,s,"having contains missing fields"),!i.getExpressions().every((t=>{const{aggregateType:r,field:i}=t,s=e.has(i)&&e.get(i).name;return n.some((t=>{const{onStatisticField:n,statisticType:i}=t;return(e.has(n)&&e.get(n).name)===s&&i.toLowerCase().trim()===r}))})))throw new r.a(a,"expressions in having should also exist in outStatistics",{having:t});return!0}function f(e,t){return e?o.get(e,t):null}function d(e,t,n,i=!0){const s=[];for(const u of t)if("*"!==u&&!e.has(u))if(i){const t=m(u);try{const n=f(t,e);if(!n)throw new r.a(a,"invalid SQL expression",{where:t});if(!n.isStandardized)throw new r.a(a,"expression is not standard",{clause:n});d(e,n.fieldNames,"expression contains missing fields")}catch(o){const e=o&&o.details;if(e&&(e.clause||e.where))throw o;e&&e.missingFields?s.push(...e.missingFields):s.push(u)}}else s.push(u);if(s.length)throw new r.a(a,n,{missingFields:s})}function m(e){return e.split(u)[0]}function p(e){return e.split(u)[1]}function g(e,t){const n=t.get(e);return!!n&&!c.has(n.type)}},583:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return g}));var r=n(88),i=n(87),s=n(85),o=n(91),a=n(110),u=n(160),c=n(934),l=n(364),h=n(848),f=n(790),d=n(993),m=n(1107),p=n(252);class g{constructor(){this._queryEngine=null,this._customParameters=null,this._snapshotFeatures=async e=>{const{objectIdField:t}=this._queryEngine,n=await Object(m.d)(this._getFeatureUrl,this._featureType.typeName,this._getFeatureOutputFormat,{customParameters:this._customParameters,dateFields:this._queryEngine.fieldsIndex.dateFields.map((e=>e.name)),signal:e});await Object(f.d)(n),Object(o.t)(e);const r=Object(f.a)(n,{geometryType:this._queryEngine.geometryType,hasZ:!1,objectIdField:t});if(!Object(a.d)(this._queryEngine.spatialReference,a.b))for(const o of r)Object(s.k)(o.geometry)&&(o.geometry=Object(u.d)(Object(l.b)(Object(u.k)(o.geometry,this._queryEngine.geometryType,!1,!1),a.b,this._queryEngine.spatialReference)));let i=1;for(const s of r){const e={};Object(d.d)(this._fieldsIndex,e,s.attributes,!0),s.attributes=e,null==s.attributes[t]&&(s.objectId=s.attributes[t]=i++)}return r}}destroy(){var e;null==(e=this._queryEngine)||e.destroy(),this._queryEngine=null}async load(e,t){const{getFeatureUrl:n,getFeatureOutputFormat:r,spatialReference:i,fields:a,geometryType:u,featureType:l,objectIdField:f,customParameters:d}=e;this._featureType=l,this._customParameters=d,this._getFeatureUrl=n,this._getFeatureOutputFormat=r,this._fieldsIndex=new p.a(a),await this._checkProjection(i),Object(o.t)(t),this._queryEngine=new h.a({fields:a,geometryType:u,hasM:!1,hasZ:!1,objectIdField:f,spatialReference:i,timeInfo:null,featureStore:new c.a({geometryType:u,hasM:!1,hasZ:!1})});const m=await this._snapshotFeatures(Object(s.s)(t.signal));return this._queryEngine.featureStore.addMany(m),{extent:this._queryEngine.fullExtent}}async applyEdits(){throw new r.a("wfs-source:editing-not-supported","applyEdits() is not supported on WFSLayer")}async queryFeatures(e={},t={}){return await this._waitSnapshotComplete(),this._queryEngine.executeQuery(e,t.signal)}async queryFeatureCount(e={},t={}){return await this._waitSnapshotComplete(),this._queryEngine.executeQueryForCount(e,t.signal)}async queryObjectIds(e={},t={}){return await this._waitSnapshotComplete(),this._queryEngine.executeQueryForIds(e,t.signal)}async queryExtent(e={},t={}){return await this._waitSnapshotComplete(),this._queryEngine.executeQueryForExtent(e,t.signal)}async querySnapping(e,t={}){return await this._waitSnapshotComplete(),this._queryEngine.executeQueryForSnapping(e,t.signal)}async refresh(e){var t;return this._customParameters=e,null==(t=this._snapshotTask)||t.abort(),this._snapshotTask=Object(o.g)(this._snapshotFeatures),this._snapshotTask.promise.then((e=>{this._queryEngine.featureStore.clear(),e&&this._queryEngine.featureStore.addMany(e)}),(e=>{this._queryEngine.featureStore.clear(),Object(o.l)(e)||i.a.getLogger("esri.layers.WFSLayer").error(new r.a("wfs-layer:getfeature-error","An error occurred during the GetFeature request",{error:e}))})),await this._waitSnapshotComplete(),{extent:this._queryEngine.fullExtent}}async _waitSnapshotComplete(){if(this._snapshotTask&&!this._snapshotTask.finished){try{await this._snapshotTask.promise}catch{}return this._waitSnapshotComplete()}}async _checkProjection(e){try{await Object(l.a)(a.b,e)}catch{throw new r.a("unsupported-projection","Projection not supported",{spatialReference:e})}}}},600:function(e,t,n){"use strict";n.d(t,"a",(function(){return m})),n.d(t,"b",(function(){return M})),n.d(t,"c",(function(){return x})),n.d(t,"d",(function(){return O})),n.d(t,"e",(function(){return w})),n.d(t,"f",(function(){return j}));var r=n(90),i=n(85),s=n(114),o=n(400),a=n(97),u=n(229),c=n(110),l=(n(460),n(160)),h=n(168),f=n(364);const d=new r.a({esriSRUnit_Meter:"meters",esriSRUnit_Kilometer:"kilometers",esriSRUnit_Foot:"feet",esriSRUnit_StatuteMile:"miles",esriSRUnit_NauticalMile:"nautical-miles",esriSRUnit_USNauticalMile:"us-nautical-miles"}),m=Object.freeze({}),p=new h.a,g=new h.a,y=new h.a,b={esriGeometryPoint:l.m,esriGeometryPolyline:l.o,esriGeometryPolygon:l.n,esriGeometryMultipoint:l.l};function j(e,t,n,r=e.hasZ,s=e.hasM){if(Object(i.j)(t))return null;const o=e.hasZ&&r,a=e.hasM&&s;if(n){const i=Object(l.u)(y,t,e.hasZ,e.hasM,"esriGeometryPoint",n,r,s);return Object(l.m)(i,o,a)}return Object(l.m)(t,o,a)}function x(e,t,n,r,s,o,a=t,u=n){const c=t&&a,h=n&&u,f=Object(i.k)(r)?"coords"in r?r:r.geometry:null;if(Object(i.j)(f))return null;if(s){let r=Object(l.q)(g,f,t,n,e,s,a,u);return o&&(r=Object(l.u)(y,r,c,h,e,o)),b[e](r,c,h)}if(o){const r=Object(l.u)(y,f,t,n,e,o,a,u);return b[e](r,c,h)}return Object(l.x)(p,f,t,n,a,u),b[e](p,c,h)}async function O(e,t,n){const{outFields:r,orderByFields:i,groupByFieldsForStatistics:s,outStatistics:o}=e;if(r)for(let a=0;a<r.length;a++)r[a]=r[a].trim();if(i)for(let a=0;a<i.length;a++)i[a]=i[a].trim();if(s)for(let a=0;a<s.length;a++)s[a]=s[a].trim();if(o)for(let a=0;a<o.length;a++)o[a].onStatisticField&&(o[a].onStatisticField=o[a].onStatisticField.trim());return e.geometry&&!e.outSR&&(e.outSR=e.geometry.spatialReference),w(e,t,n)}async function w(e,t,r){if(!e)return null;let{where:l}=e;if(e.where=l=l&&l.trim(),(!l||/^1 *= *1$/.test(l)||t&&t===l)&&(e.where=null),!e.geometry)return e;let h=await async function(e){const{geometry:t,distance:r,units:i}=e;if(null==r||"vertexAttributes"in t)return t;const o=t.spatialReference,a=i?d.fromJSON(i):Object(s.g)(o),u=o&&(Object(c.h)(o)||Object(c.p)(o))?t:await Object(f.a)(o,c.b).then((()=>Object(f.b)(t,c.b)));return(await async function(){return(await Promise.all([n.e(6),n.e(20)]).then(n.bind(null,559))).geodesicBuffer}())(u.spatialReference,u,r,a)}(e);if(e.distance=0,e.units=null,"esriSpatialRelEnvelopeIntersects"===e.spatialRel){const{spatialReference:t}=e.geometry;h=Object(o.a)(h),h.spatialReference=t}e.geometry=h,await Object(f.a)(h.spatialReference,r);const p=(await Object(u.a)(Object(a.a)(h)))[0];if(Object(i.j)(p))throw m;const g=p.toJSON(),y=await Object(f.b)(g,g.spatialReference,r);if(!y)throw m;return y.spatialReference=r,e.geometry=y,e}function M(e){return e&&_ in e?JSON.parse(JSON.stringify(e,F)):e}const _="_geVersion",F=(e,t)=>e!==_?t:void 0},634:function(e,t,n){"use strict";function r(e,t){if(!e)return null;const n=t.featureAdapter,{startTimeField:r,endTimeField:i}=e;let s=Number.POSITIVE_INFINITY,o=Number.NEGATIVE_INFINITY;if(r&&i)t.forEach((e=>{const t=n.getAttribute(e,r),a=n.getAttribute(e,i);null==t||isNaN(t)||(s=Math.min(s,t)),null==a||isNaN(a)||(o=Math.max(o,a))}));else{const e=r||i;t.forEach((t=>{const r=n.getAttribute(t,e);null==r||isNaN(r)||(s=Math.min(s,r),o=Math.max(o,r))}))}return{start:s,end:o}}function i(e,t,n){if(!t||!e)return null;const{startTimeField:r,endTimeField:i}=e;if(!r&&!i)return null;const{start:s,end:o}=t;return null===s&&null===o?null:void 0===s&&void 0===o?()=>!1:r&&i?function(e,t,n,r,i){return null!=r&&null!=i?s=>{const o=e.getAttribute(s,t),a=e.getAttribute(s,n);return(null==o||o<=i)&&(null==a||a>=r)}:null!=r?t=>{const i=e.getAttribute(t,n);return null==i||i>=r}:null!=i?n=>{const r=e.getAttribute(n,t);return null==r||r<=i}:void 0}(n,r,i,s,o):function(e,t,n,r){return null!=n&&null!=r&&n===r?r=>e.getAttribute(r,t)===n:null!=n&&null!=r?i=>{const s=e.getAttribute(i,t);return s>=n&&s<=r}:null!=n?r=>e.getAttribute(r,t)>=n:null!=r?n=>e.getAttribute(n,t)<=r:void 0}(n,r||i,s,o)}n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return i}))},775:function(e,t,n){"use strict";n.d(t,"a",(function(){return f})),n.d(t,"b",(function(){return j}));var r=n(85),i=n(438),s=n(400),o=n(328),a=n(110),u=n(160),c=n(561),l=n(616);class h{constructor(e,t,n){this._fieldDataCache=new Map,this._returnDistinctMap=new Map,this.returnDistinctValues=e.returnDistinctValues,this.fieldsIndex=n,this.featureAdapter=t;const r=e.outFields;if(r&&-1===r.indexOf("*")){this.outFields=r;let e=0;for(const t of r){const r=Object(c.b)(t),i=this.fieldsIndex.get(r),s=i?null:Object(c.c)(r,n),o=i?i.name:Object(c.a)(t)||"FIELD_EXP_"+e++;this._fieldDataCache.set(t,{alias:o,clause:s})}}}countDistinctValues(e){return this.returnDistinctValues?(e.forEach((e=>this.getAttributes(e))),this._returnDistinctMap.size):e.length}getAttributes(e){const t=this._processAttributesForOutFields(e);return this._processAttributesForDistinctValues(t)}getFieldValue(e,t,n){const r=n?n.name:t;let i=null;return this._fieldDataCache.has(r)?i=this._fieldDataCache.get(r).clause:n||(i=Object(c.c)(t,this.fieldsIndex),this._fieldDataCache.set(r,{alias:r,clause:i})),n?this.featureAdapter.getAttribute(e,r):i.calculateValue(e,this.featureAdapter)}getNormalizedValue(e,t){const n=t.normalizationType,r=t.normalizationTotal;let i=this.getFieldValue(e,t.field,t.fieldInfo);if(n&&Number.isFinite(i)){const s=this.getFieldValue(e,t.normalizationField,t.normalizationFieldInfo);i=Object(l.i)(i,n,s,r)}return i}getExpressionValue(e,t,n){const r={attributes:this.featureAdapter.getAttributes(e)},i=n.createExecContext(r,t.viewInfo);return n.executeFunction(t.compiledFunc,i)}validateItem(e,t){return this._fieldDataCache.has(t)||this._fieldDataCache.set(t,{alias:t,clause:Object(c.c)(t,this.fieldsIndex)}),this._fieldDataCache.get(t).clause.testFeature(e,this.featureAdapter)}validateItems(e,t){return this._fieldDataCache.has(t)||this._fieldDataCache.set(t,{alias:t,clause:Object(c.c)(t,this.fieldsIndex)}),this._fieldDataCache.get(t).clause.testSet(e,this.featureAdapter)}_processAttributesForOutFields(e){const t=this.outFields;if(!t||!t.length)return this.featureAdapter.getAttributes(e);const n={};for(const r of t){const{alias:t,clause:i}=this._fieldDataCache.get(r);n[t]=i?i.calculateValue(e,this.featureAdapter):this.featureAdapter.getAttribute(e,t)}return n}_processAttributesForDistinctValues(e){if(Object(r.j)(e)||!this.returnDistinctValues)return e;const t=this.outFields,n=[];if(t)for(const r of t){const{alias:t}=this._fieldDataCache.get(r);n.push(e[t])}else for(const r in e)n.push(e[r]);const i=`${(t||["*"]).join(",")}=${n.join(",")}`;let s=this._returnDistinctMap.get(i)||0;return this._returnDistinctMap.set(i,++s),s>1?null:e}}var f,d,m=n(364),p=n(634),g=n(600),y=n(106),b=n(130);class j{constructor(e,t,n){this.items=e,this.queryGeometry=t,this.definitionExpression=n.definitionExpression,this.geometryType=n.geometryType,this.hasM=n.hasM,this.hasZ=n.hasZ,this.objectIdField=n.objectIdField,this.spatialReference=n.spatialReference,this.fieldsIndex=n.fieldsIndex,this.timeInfo=n.timeInfo,this.featureAdapter=n.featureAdapter,this.aggregateAdapter=n.aggregateAdapter}get size(){return this.items.length}createQueryResponseForCount(e){const t=new h(e,this.featureAdapter,this.fieldsIndex);if(!e.outStatistics)return t.countDistinctValues(this.items);const{groupByFieldsForStatistics:n,having:r}=e;if(!(null==n?void 0:n.length))return 1;const i=new Map,s=new Map,o=new Set,a=e.outStatistics;for(const u of a){const{statisticType:e}=u,a="exceedslimit"!==e?u.onStatisticField:void 0;if(!s.has(a)){const e=[];for(const r of n){const n=this._getAttributeValues(t,r,i);e.push(n)}s.set(a,this._calculateUniqueValues(e,t.returnDistinctValues))}const c=s.get(a);for(const n in c){const{data:e,items:i}=c[n],s=e.join(",");r&&!t.validateItems(i,r)||o.add(s)}}return o.size}async createQueryResponse(e){let t;return t=e.outStatistics?e.outStatistics.some((e=>"exceedslimit"===e.statisticType))?this._createExceedsLimitQueryResponse(e):await this._createStatisticsQueryResponse(e):this._createFeatureQueryResponse(e),e.returnQueryGeometry&&(Object(a.l)(e.outSR)&&!Object(a.d)(this.queryGeometry.spatialReference,e.outSR)?t.queryGeometry=Object(g.b)({spatialReference:e.outSR,...Object(m.b)(this.queryGeometry,this.queryGeometry.spatialReference,e.outSR)}):t.queryGeometry=Object(g.b)({spatialReference:e.outSR,...this.queryGeometry})),t}createSnappingResponse(e,t){const n=this.featureAdapter,i=function(e,t){return e?t?4:3:t?3:2}(this.hasZ,this.hasM),{x:s,y:o}=e.point,a="number"==typeof e.distance?e.distance:e.distance.x,u="number"==typeof e.distance?e.distance:e.distance.y,c={candidates:[]},l="esriGeometryPolygon"===this.geometryType,h=this._getPointCreator(e.point,this.spatialReference,t);for(const d of this.items){const t=n.getGeometry(d);if(Object(r.j)(t))continue;const{coords:m,lengths:p}=t;if(e.types&f.EDGE){let e=0;for(let t=0;t<p.length;t++){const r=p[t];for(let t=0;t<r;t++,e+=i){const l=m[e],f=m[e+1];if(t!==r-1){const t=m[e+i],r=m[e+i+1],{x:p,y:g}=x(s,o,l,f,t,r),y=(s-p)/a,b=(o-g)/u,j=y*y+b*b;j<=1&&c.candidates.push({type:"edge",objectId:n.getObjectId(d),distance:Math.sqrt(j),target:h(p,g),start:h(l,f),end:h(t,r)})}}}}if(e.types&f.VERTEX){const e=l?m.length-i:m.length;for(let t=0;t<e;t+=i){const e=m[t],r=m[t+1],i=(s-e)/a,l=(o-r)/u,f=i*i+l*l;f<=1&&c.candidates.push({type:"vertex",objectId:n.getObjectId(d),distance:Math.sqrt(f),target:h(e,r)})}}}return c.candidates.sort(((e,t)=>e.distance-t.distance)),c}_getPointCreator(e,t,n){const i=Object(r.k)(n)&&!Object(a.d)(t,n)?e=>Object(m.b)(e,t,n):e=>e;return null!=e.z&&null!=e.m?(t,n)=>i({x:t,y:n,z:e.z,m:e.m}):null!=e.z?(t,n)=>i({x:t,y:n,z:e.z}):null!=e.m?(t,n)=>i({x:t,y:n,m:e.m}):(e,t)=>i({x:e,y:t})}executeAttributesQuery(e){const t=Object(c.c)(e.where,this.fieldsIndex);if(!t)return Promise.resolve(this);if(t.isStandardized){let n=0;const r=[];for(const e of this.items)t.testFeature(e,this.featureAdapter)&&(r[n++]=e);const i=new j(r,this.queryGeometry,this);return i.definitionExpression=e.where,Promise.resolve(i)}return Promise.reject(new TypeError("Where clause is not standardized"))}executeAggregateIdsQuery(e){if(!e.aggregateIds||!e.aggregateIds.length||Object(r.j)(this.aggregateAdapter))return Promise.resolve(this);const t=new Set;for(const r of e.aggregateIds)this.aggregateAdapter.getFeatureObjectIds(r).forEach((e=>t.add(e)));const n=this.featureAdapter.getObjectId;return Promise.resolve(new j(this.items.filter((e=>t.has(n(e)))),this.queryGeometry,this))}executeObjectIdsQuery(e){if(!e.objectIds||!e.objectIds.length)return Promise.resolve(this);const t=new Set(e.objectIds),n=this.featureAdapter.getObjectId;return Promise.resolve(new j(this.items.filter((e=>t.has(n(e)))),this.queryGeometry,this))}executeTimeQuery(e){const t=Object(p.b)(this.timeInfo,e.timeExtent,this.featureAdapter);if(!Object(r.k)(t))return Promise.resolve(this);const n=this.items.filter(t);return Promise.resolve(new j(n,this.queryGeometry,this))}filterLatest(){const{trackIdField:e,startTimeField:t,endTimeField:n}=this.timeInfo,r=n||t,i=new Map,s=this.featureAdapter.getAttribute;for(const a of this.items){const t=s(a,e),n=s(a,r),o=i.get(t);(!o||n>s(o,r))&&i.set(t,a)}const o=Array.from(i.values());return Promise.resolve(new j(o,this.queryGeometry,this))}async project(e){if(!e||Object(a.d)(this.spatialReference,e))return this;const t=this.featureAdapter,n=(await Object(m.c)(this.items.map((e=>Object(g.c)(this.geometryType,this.hasZ,this.hasM,t.getGeometry(e)))),this.spatialReference,e)).map(((e,n)=>t.cloneWithGeometry(this.items[n],Object(u.d)(e,this.hasZ,this.hasM))));return new j(n,this.queryGeometry,{definitionExpression:this.definitionExpression,geometryType:this.geometryType,hasM:this.hasM,hasZ:this.hasZ,objectIdField:this.objectIdField,spatialReference:e,fieldsIndex:this.fieldsIndex,timeInfo:this.timeInfo,featureAdapter:this.featureAdapter})}async createSummaryStatisticsResponse(e,t){const{field:n,valueExpression:r,normalizationField:i,normalizationType:s,normalizationTotal:o,minValue:a,maxValue:u,scale:c}=t,h=this.fieldsIndex.isDateField(n),f=await this._getDataValues(e,{field:n,valueExpression:r,normalizationField:i,normalizationType:s,normalizationTotal:o,scale:c}),d=Object(l.j)({normalizationType:s,normalizationField:i,minValue:a,maxValue:u}),m=this.fieldsIndex.get(n),p={value:.5,fieldType:null==m?void 0:m.type},g=Object(y.v)(m)?Object(l.e)({values:f,supportsNullCount:d,percentileParams:p}):Object(l.d)({values:f,minValue:a,maxValue:u,useSampleStdDev:!s,supportsNullCount:d,percentileParams:p});return Object(l.k)(g,h)}async createUniqueValuesResponse(e,t){const{field:n,valueExpression:r,domain:i,returnAllCodedValues:s,scale:o}=t,a=await this._getDataValues(e,{field:n,valueExpression:r,scale:o}),u=Object(l.f)(a);return Object(l.g)(u,i,s)}async createClassBreaksResponse(e,t){const{field:n,valueExpression:r,normalizationField:i,normalizationType:s,normalizationTotal:o,classificationMethod:a,standardDeviationInterval:u,minValue:c,maxValue:h,numClasses:f,scale:d}=t,m=await this._getDataValues(e,{field:n,valueExpression:r,normalizationField:i,normalizationType:s,normalizationTotal:o,scale:d}),p=Object(l.a)(m,{field:n,normalizationField:i,normalizationType:s,normalizationTotal:o,classificationMethod:a,standardDeviationInterval:u,minValue:c,maxValue:h,numClasses:f});return Object(l.l)(p,a)}async createHistogramResponse(e,t){const{field:n,valueExpression:r,normalizationField:i,normalizationType:s,normalizationTotal:o,classificationMethod:a,standardDeviationInterval:u,minValue:c,maxValue:h,numBins:f,scale:d}=t,m=await this._getDataValues(e,{field:n,valueExpression:r,normalizationField:i,normalizationType:s,normalizationTotal:o,scale:d});return Object(l.b)(m,{field:n,normalizationField:i,normalizationType:s,normalizationTotal:o,classificationMethod:a,standardDeviationInterval:u,minValue:c,maxValue:h,numBins:f})}_sortFeatures(e,t,n){if(e.length>1&&t&&t.length)for(const r of t.reverse()){const t=r.split(" "),i=t[0],s=this.fieldsIndex.get(i),o=t[1]&&"desc"===t[1].toLowerCase(),a=Object(l.h)(null==s?void 0:s.type,o);e.sort(((e,t)=>{const r=n(e,i,s),o=n(t,i,s);return a(r,o)}))}}_createFeatureQueryResponse(e){const t=this.items,{geometryType:n,hasM:r,hasZ:i,objectIdField:s,spatialReference:a}=this,{outFields:u,outSR:c,quantizationParameters:l,resultRecordCount:h,resultOffset:f,returnZ:d,returnM:m}=e,p=null!=h&&t.length>(f||0)+h,y=u&&(u.includes("*")?[...this.fieldsIndex.fields]:u.map((e=>this.fieldsIndex.get(e))));return{exceededTransferLimit:p,features:this._createFeatures(e,t),fields:y,geometryType:n,hasM:r&&m,hasZ:i&&d,objectIdFieldName:s,spatialReference:Object(g.b)(c||a),transform:l&&Object(o.c)(l)||null}}_createFeatures(e,t){const n=new h(e,this.featureAdapter,this.fieldsIndex),{hasM:r,hasZ:i}=this,{orderByFields:s,quantizationParameters:a,returnGeometry:u,returnCentroid:c,maxAllowableOffset:l,resultOffset:f,resultRecordCount:d,returnZ:m=!1,returnM:p=!1}=e,y=i&&m,b=r&&p;let j=[],x=0;const O=[...t];if(this._sortFeatures(O,s,((e,t,r)=>n.getFieldValue(e,t,r))),u||c){const e=Object(o.c)(a);if(u&&!c)for(const t of O)j[x++]={attributes:n.getAttributes(t),geometry:Object(g.c)(this.geometryType,this.hasZ,this.hasM,this.featureAdapter.getGeometry(t),l,e,y,b)};else if(!u&&c)for(const t of O)j[x++]={attributes:n.getAttributes(t),centroid:Object(g.f)(this,this.featureAdapter.getCentroid(t,this),e)};else for(const t of O)j[x++]={attributes:n.getAttributes(t),centroid:Object(g.f)(this,this.featureAdapter.getCentroid(t,this),e),geometry:Object(g.c)(this.geometryType,this.hasZ,this.hasM,this.featureAdapter.getGeometry(t),l,e,y,b)}}else for(const o of O){const e=n.getAttributes(o);e&&(j[x++]={attributes:e})}const w=f||0;if(null!=d){const e=w+d;j=j.slice(w,Math.min(j.length,e))}return j}_createExceedsLimitQueryResponse(e){let t=!1,n=Number.POSITIVE_INFINITY,i=Number.POSITIVE_INFINITY,s=Number.POSITIVE_INFINITY;for(const r of e.outStatistics)if("exceedslimit"===r.statisticType){n=null!=r.maxPointCount?r.maxPointCount:Number.POSITIVE_INFINITY,i=null!=r.maxRecordCount?r.maxRecordCount:Number.POSITIVE_INFINITY,s=null!=r.maxVertexCount?r.maxVertexCount:Number.POSITIVE_INFINITY;break}if("esriGeometryPoint"===this.geometryType)t=this.items.length>n;else if(this.items.length>i)t=!0;else{const e=this.hasZ?this.hasM?4:3:this.hasM?3:2,n=this.featureAdapter;t=this.items.reduce(((e,t)=>{const i=n.getGeometry(t);return e+(Object(r.k)(i)&&i.coords.length||0)}),0)/e>s}return{fields:[{name:"exceedslimit",type:"esriFieldTypeInteger",alias:"exceedslimit",sqlType:"sqlTypeInteger",domain:null,defaultValue:null}],features:[{attributes:{exceedslimit:Number(t)}}]}}async _createStatisticsQueryResponse(e){const t={attributes:{}},n=[],r=new Map,i=new Map,s=new Map,o=new Map,a=new h(e,this.featureAdapter,this.fieldsIndex),u=e.outStatistics,{groupByFieldsForStatistics:c,having:l,orderByFields:f}=e,d=c&&c.length,m=!!d,p=m&&c[0],g=m&&!this.fieldsIndex.get(p);for(const h of u){const{outStatisticFieldName:e,statisticType:u}=h,f=h,y="exceedslimit"!==u?h.onStatisticField:void 0,b="percentile_disc"===u||"percentile_cont"===u,j="EnvelopeAggregate"===u||"CentroidAggregate"===u||"ConvexHullAggregate"===u,x=m&&1===d&&(y===p||g)&&"count"===u;if(m){if(!s.has(y)){const e=[];for(const t of c){const n=this._getAttributeValues(a,t,r);e.push(n)}s.set(y,this._calculateUniqueValues(e,a.returnDistinctValues))}const t=s.get(y);for(const n in t){const{count:i,data:s,items:u,itemPositions:h}=t[n],d=s.join(",");if(!l||a.validateItems(u,l)){const t=o.get(d)||{attributes:{}};if(j){t.aggregateGeometries||(t.aggregateGeometries={});const{aggregateGeometries:e,outStatisticFieldName:n}=await this._getAggregateGeometry(f,u);t.aggregateGeometries[n]=e}else{let n=null;if(x)n=i;else{const e=this._getAttributeValues(a,y,r),t=h.map((t=>e[t]));n=b&&"statisticParameters"in f?this._getPercentileValue(f,t):this._getStatisticValue(f,t,null,a.returnDistinctValues)}t.attributes[e]=n}c.forEach(((e,n)=>t.attributes[this.fieldsIndex.get(e)?e:`EXPR_${n+1}`]=s[n])),o.set(d,t)}}}else if(j){t.aggregateGeometries||(t.aggregateGeometries={});const{aggregateGeometries:e,outStatisticFieldName:n}=await this._getAggregateGeometry(f,this.items);t.aggregateGeometries[n]=e}else{const n=this._getAttributeValues(a,y,r);t.attributes[e]=b&&"statisticParameters"in f?this._getPercentileValue(f,n):this._getStatisticValue(f,n,i,a.returnDistinctValues)}n.push({name:e,alias:e,type:"esriFieldTypeDouble"})}const y=m?Array.from(o.values()):[t];return this._sortFeatures(y,f,((e,t)=>e.attributes[t])),{fields:n,features:y}}async _getAggregateGeometry(e,t){const r=await Promise.all([n.e(6),n.e(20)]).then(n.bind(null,559)),{statisticType:o,outStatisticFieldName:a}=e,{featureAdapter:u,spatialReference:c,geometryType:l,hasZ:h,hasM:f}=this,d=t.map((e=>Object(g.c)(l,h,f,u.getGeometry(e)))),m=r.convexHull(c,d,!0)[0],p={aggregateGeometries:null,outStatisticFieldName:null};if("EnvelopeAggregate"===o){const e=m?Object(s.b)(m):Object(s.a)(r.union(c,d));p.aggregateGeometries={...e,spatialReference:c},p.outStatisticFieldName=a||"extent"}else if("CentroidAggregate"===o){const e=m?Object(i.b)(m):Object(i.a)(Object(s.a)(r.union(c,d)));p.aggregateGeometries={x:e[0],y:e[1],spatialReference:c},p.outStatisticFieldName=a||"centroid"}else"ConvexHullAggregate"===o&&(p.aggregateGeometries=m,p.outStatisticFieldName=a||"convexHull");return p}_getStatisticValue(e,t,n,r){const{onStatisticField:i,statisticType:s}=e;let o=null;return o=null!=n&&n.has(i)?n.get(i):Object(y.v)(this.fieldsIndex.get(i))?Object(l.e)({values:t,returnDistinct:r}):Object(l.d)({values:t,minValue:null,maxValue:null,useSampleStdDev:!0}),n&&n.set(i,o),o["var"===s?"variance":s]}_getPercentileValue(e,t){const{onStatisticField:n,statisticParameters:r,statisticType:i}=e,{value:s,orderBy:o}=r,a=this.fieldsIndex.get(n),u={value:s,orderBy:o,fieldType:null==a?void 0:a.type,isDiscrete:"percentile_disc"===i};return Object(l.c)(t,u)}_getAttributeValues(e,t,n){if(n.has(t))return n.get(t);const r=this.fieldsIndex.get(t),i=this.items.map((n=>e.getFieldValue(n,t,r)));return n.set(t,i),i}_getAttributeNormalizedValues(e,t){return this.items.map((n=>e.getNormalizedValue(n,{field:t.field,fieldInfo:this.fieldsIndex.get(t.field),normalizationField:t.normalizationField,normalizationFieldInfo:this.fieldsIndex.get(t.normalizationField),normalizationType:t.normalizationType,normalizationTotal:t.normalizationTotal})))}async _getAttributeExpressionValues(e,t,n){const{arcadeUtils:r}=await Object(b.e)(),i=r.createFunction(t),s=n&&r.getViewInfo(n);return this.items.map((t=>e.getExpressionValue(t,{compiledFunc:i,viewInfo:s},r)))}_calculateUniqueValues(e,t){const n={},r=this.items,i=r.length;for(let s=0;s<i;s++){const i=r[s],o=[];for(const t of e)o.push(t[s]);const a=o.join(",");t?null==n[a]&&(n[a]={count:1,data:o,items:[i],itemPositions:[s]}):null==n[a]?n[a]={count:1,data:o,items:[i],itemPositions:[s]}:(n[a].count++,n[a].items.push(i),n[a].itemPositions.push(s))}return n}async _getDataValues(e,t){const n=new h(e,this.featureAdapter,this.fieldsIndex),{valueExpression:r,field:i,normalizationField:s,normalizationType:o,normalizationTotal:a,scale:u}=t,c=r?{viewingMode:"map",scale:u,spatialReference:e.outSR||this.spatialReference}:null;return r?this._getAttributeExpressionValues(n,r,c):this._getAttributeNormalizedValues(n,{field:i,normalizationField:s,normalizationType:o,normalizationTotal:a})}}function x(e,t,n,r,i,s){const o=i-n,a=s-r,u=o*o+a*a,c=(e-n)*o+(t-r)*a,l=Math.min(1,Math.max(0,c/u));return{x:n+o*l,y:r+a*l}}(d=f||(f={}))[d.NONE=0]="NONE",d[d.EDGE=1]="EDGE",d[d.VERTEX=2]="VERTEX"},790:function(e,t,n){"use strict";n.d(t,"a",(function(){return M})),n.d(t,"b",(function(){return u})),n.d(t,"c",(function(){return w})),n.d(t,"d",(function(){return O}));var r=n(88),i=n(262),s=n(168),o=n(106);const a={LineString:"esriGeometryPolyline",MultiLineString:"esriGeometryPolyline",MultiPoint:"esriGeometryMultipoint",Point:"esriGeometryPoint",Polygon:"esriGeometryPolygon",MultiPolygon:"esriGeometryPolygon"};function u(e){return a[e]}function*c(e){switch(e.type){case"Feature":yield e;break;case"FeatureCollection":for(const t of e.features)t&&(yield t)}}function*l(e){if(!e)return null;switch(e.type){case"Point":yield e.coordinates;break;case"LineString":case"MultiPoint":yield*e.coordinates;break;case"MultiLineString":case"Polygon":for(const t of e.coordinates)yield*t;break;case"MultiPolygon":for(const t of e.coordinates)for(const e of t)yield*e}}function h(e){for(const t of e)if(t.length>2)return!0;return!1}function f(e){let t=0;for(let n=0;n<e.length;n++){const r=e[n],i=e[(n+1)%e.length];t+=r[0]*i[1]-i[0]*r[1]}return t<=0}function d(e){const t=e[0],n=e[e.length-1];return t[0]===n[0]&&t[1]===n[1]&&t[2]===n[2]||e.push(t),e}function m(e,t,n){switch(t.type){case"LineString":case"MultiPoint":return function(e,t,n){return y(e,t.coordinates,n),e}(e,t,n);case"MultiLineString":return function(e,t,n){for(const r of t.coordinates)y(e,r,n);return e}(e,t,n);case"MultiPolygon":return function(e,t,n){for(const r of t.coordinates){p(e,r[0],n);for(let t=1;t<r.length;t++)g(e,r[t],n)}return e}(e,t,n);case"Point":return function(e,t,n){return j(e,t.coordinates,n),e}(e,t,n);case"Polygon":return function(e,t,n){const r=t.coordinates;p(e,r[0],n);for(let i=1;i<r.length;i++)g(e,r[i],n);return e}(e,t,n)}}function p(e,t,n){const r=d(t);!function(e){return!f(e)}(r)?y(e,r,n):b(e,r,n)}function g(e,t,n){const r=d(t);!function(e){return f(e)}(r)?y(e,r,n):b(e,r,n)}function y(e,t,n){for(const r of t)j(e,r,n);e.lengths.push(t.length)}function b(e,t,n){for(let r=t.length-1;r>=0;r--)j(e,t[r],n);e.lengths.push(t.length)}function j(e,t,n){const[r,i,s]=t;e.coords.push(r,i),n.hasZ&&e.coords.push(s||0)}function x(e){switch(typeof e){case"string":return"esriFieldTypeString";case"number":return"esriFieldTypeDouble";default:return"unknown"}}function O(e){if(!e)throw new r.a("geojson-layer:empty","GeoJSON data is empty");if("Feature"!==e.type&&"FeatureCollection"!==e.type)throw new r.a("geojson-layer:unsupported-geojson-object","missing or not supported GeoJSON object type",{data:e});const{crs:t}=e;if(!t)return;const n="string"==typeof t?t:"name"===t.type?t.properties.name:"EPSG"===t.type?t.properties.code:null,i=new RegExp(".*(CRS84H?|4326)$","i");if(!n||!i.test(n))throw new r.a("geojson-layer:unsupported-crs","unsupported GeoJSON 'crs' member",{crs:t})}function w(e,t={}){const n=[],r=new Set,i=new Set;let s,a=!1,f=null,d=!1,{geometryType:m=null}=t,p=!1;for(const o of c(e)){const{geometry:e,properties:t,id:c}=o;if((!e||(m||(m=u(e.type)),u(e.type)===m))&&(a||(a=h(l(e))),d||(d=null!=c,d&&(s=typeof c,f=Object.keys(t).filter((e=>t[e]===c)))),d&&null!=c&&(f.length>1?f=f.filter((e=>t[e]===c)):1===f.length&&(f=t[f[0]]===c?f:[])),!p&&t)){let e=!0;for(const s in t){if(r.has(s))continue;const o=t[s];if(null==o){e=!1,i.add(s);continue}const a=x(o);"unknown"!==a?(i.delete(s),r.add(s),n.push({name:s,alias:s,type:a})):i.add(s)}p=e}}const g=f&&1===f.length&&f[0]||null;if(g)for(const u of n)if(u.name===g&&Object(o.u)(u)){u.type="esriFieldTypeOID";break}return{fields:n,geometryType:m,hasZ:a,objectIdFieldName:g,objectIdFieldType:s,unknownFields:Array.from(i)}}function M(e,t){return Array.from(function*(e,t={}){const{geometryType:n,objectIdField:r}=t;for(const a of e){var o;const{geometry:e,properties:c,id:l}=a;if(e&&u(e.type)!==n)continue;const h=c||{};let f=null!=(o=h[r])?o:null;r&&null!=l&&!h[r]&&(h[r]=f=l);const d=new i.a(e?m(new s.a,e,t):null,h,null,f);yield d}}(c(e),t))}},975:function(e,t,n){"use strict";function r(e){const t=[];return function*(){yield*t;for(const n of e)t.push(n),yield n}}function i(e,t){for(const n of e)if(null!=n&&t(n))return n}function s(e){return null!=e&&"function"==typeof e[Symbol.iterator]}n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return i})),n.d(t,"c",(function(){return s}))},993:function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return c})),n.d(t,"c",(function(){return p})),n.d(t,"d",(function(){return h})),n.d(t,"e",(function(){return m}));var r=n(110),i=n(106);class s{constructor(){this.code=null,this.description=null}}class o{constructor(e){this.error=new s,this.globalId=null,this.objectId=null,this.success=!1,this.uniqueId=null,this.error.description=e}}function a(e){return new o(e)}class u{constructor(e){this.globalId=null,this.success=!0,this.objectId=this.uniqueId=e}}function c(e){return new u(e)}const l=new Set;function h(e,t,n,r=!1,s){l.clear();for(const o in n){const u=e.get(o);if(!u)continue;const c=n[o],h=f(u,c);if(h!==c&&s&&s.push({name:"invalid-value-type",message:"attribute value was converted to match the field type",details:{field:u,originalValue:c,sanitizedValue:h}}),l.add(u.name),u&&(r||u.editable)){const e=Object(i.z)(u,h);if(e)return a(Object(i.A)(e,u,h));t[u.name]=h}}for(const i of e.requiredFields)if(!l.has(i.name))return a(`missing required field "${i.name}"`);return null}function f(e,t){let n=t;return"string"==typeof t&&Object(i.u)(e)?n=parseFloat(t):null!=t&&Object(i.v)(e)&&"string"!=typeof t&&(n=String(t)),Object(i.x)(n)}let d;function m(e,t){if(!e||!Object(r.l)(t))return e;if("rings"in e||"paths"in e){if(!d)throw new TypeError("geometry engine not loaded");return d.simplify(t,e)}return e}async function p(e,t){!Object(r.l)(e)||"esriGeometryPolygon"!==t&&"esriGeometryPolyline"!==t||await async function(){return d||(d=await Promise.all([n.e(6),n.e(20)]).then(n.bind(null,559)),d)}()}},994:function(e,t,n){"use strict";function r(e,t){for(const n of e.children)if(n.localName in t){const e=t[n.localName];if("function"==typeof e){const t=e(n);t&&r(n,t)}else r(n,e)}}function*i(e,t){for(const n of e.children)if(n.localName in t){const e=t[n.localName];"function"==typeof e?yield e(n):yield*i(n,e)}}n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return r}))}}]);
//# sourceMappingURL=112.52264317.chunk.js.map