"use strict";(globalThis.webpackChunkimaps=globalThis.webpackChunkimaps||[]).push([[2927,4397],{84397:(e,t,r)=>{r.d(t,{a:()=>i,c:()=>n,g:()=>a});var n="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function a(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function i(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}},59026:(e,t,r)=>{r.d(t,{Z:()=>a});var n=r(18759);class a{constructor(e,t){this._storage=new n.WJ,this._storage.maxSize=e,t&&this._storage.registerRemoveFunc("",t)}put(e,t){this._storage.put(e,t,1,1)}pop(e){return this._storage.pop(e)}get(e){return this._storage.get(e)}clear(){this._storage.clearAll()}destroy(){this._storage.destroy()}}},14921:(e,t,r)=>{r.d(t,{Ed:()=>i,UI:()=>o,mt:()=>l,q6:()=>s});var n=r(92026),a=r(66978);function i(e,t,r){return(0,a.as)(e.map(((e,n)=>t.apply(r,[e,n]))))}async function o(e,t,r){return(await(0,a.as)(e.map(((e,n)=>t.apply(r,[e,n]))))).map((e=>e.value))}async function s(e){if((0,n.Wi)(e))return{ok:!1,error:new Error("no promise provided")};try{return{ok:!0,value:await e}}catch(t){return{ok:!1,error:t}}}async function l(e){try{return{ok:!0,value:await e}}catch(t){return(0,a.r9)(t),{ok:!1,error:t}}}},41644:(e,t,r)=>{r.d(t,{Bg:()=>n,sM:()=>a});r(93169);function n(e){}function a(e){return()=>e}},80724:(e,t,r)=>{var n,a;function i(e){return e&&"esri.renderers.visualVariables.SizeVariable"===e.declaredClass}function o(e){return null!=e&&!isNaN(e)&&isFinite(e)}function s(e){return e.valueExpression?n.Expression:e.field&&"string"==typeof e.field?n.Field:n.Unknown}function l(e,t){const r=t||s(e),i=e.valueUnit||"unknown";return r===n.Unknown?a.Constant:e.stops?a.Stops:null!=e.minSize&&null!=e.maxSize&&null!=e.minDataValue&&null!=e.maxDataValue?a.ClampedLinear:"unknown"===i?null!=e.minSize&&null!=e.minDataValue?e.minSize&&e.minDataValue?a.Proportional:a.Additive:a.Identity:a.RealWorldSize}r.d(t,{PS:()=>s,QW:()=>l,RY:()=>n,hL:()=>a,iY:()=>i,qh:()=>o}),function(e){e.Unknown="unknown",e.Expression="expression",e.Field="field"}(n||(n={})),function(e){e.Unknown="unknown",e.Stops="stops",e.ClampedLinear="clamped-linear",e.Proportional="proportional",e.Additive="additive",e.Constant="constant",e.Identity="identity",e.RealWorldSize="real-world-size"}(a||(a={}))},56011:(e,t,r)=>{r.r(t),r.d(t,{getAllSizes:()=>I,getColor:()=>m,getOpacity:()=>h,getRotationAngle:()=>y,getSize:()=>b,getSizeForValue:()=>k,getSizeFromNumberOrVariable:()=>g,getSizeRangeAtScale:()=>C,getVisualVariableValues:()=>w,viewScaleRE:()=>d});var n=r(51995),a=r(52639),i=r(41644),o=r(32718),s=r(92026),l=r(49229),c=r(80724);const u=o.Z.getLogger("esri.renderers.visualVariables.support.visualVariableUtils"),f=new a.Z,p=Math.PI,d=/^\s*(return\s+)?\$view\.scale\s*(;)?\s*$/i;function m(e,t,r){const a="visualVariables"in e&&e.visualVariables?e.visualVariables.find((e=>"color"===e.type)):e;if(!a)return;if("esri.renderers.visualVariables.ColorVariable"!==a.declaredClass)return void u.warn("The visualVariable should be an instance of esri.renderers.visualVariables.ColorVariable");const i="number"==typeof t,o=i?null:t,l=o&&o.attributes;let c=i?t:null;const f=a.field,{ipData:p,hasExpression:d}=a.cache;let m=a.cache.compiledFunc;if(!f&&!d){const e=a.stops;return e&&e[0]&&e[0].color}if("number"!=typeof c)if(d){if((0,s.Wi)(r)||(0,s.Wi)(r.arcade))return void u.error("Use of arcade expressions requires an arcade context");const e={viewingMode:r.viewingMode,scale:r.scale,spatialReference:r.spatialReference},t=r.arcade.arcadeUtils,n=t.getViewInfo(e),i=t.createExecContext(o,n);if(!m){const e=t.createSyntaxTree(a.valueExpression);m=t.createFunction(e),a.cache.compiledFunc=m}c=t.executeFunction(m,i)}else l&&(c=l[f]);const h=a.normalizationField,y=l?parseFloat(l[h]):void 0;if(null!=c&&(!h||i||!isNaN(y)&&0!==y)){isNaN(y)||i||(c/=y);const e=v(c,p);if(e){const t=e[0],i=e[1],o=t===i?a.stops[t].color:n.Z.blendColors(a.stops[t].color,a.stops[i].color,e[2],(0,s.pC)(r)?r.color:void 0);return new n.Z(o)}}}function h(e,t,r){const n="visualVariables"in e&&e.visualVariables?e.visualVariables.find((e=>"opacity"===e.type)):e;if(!n)return;if("esri.renderers.visualVariables.OpacityVariable"!==n.declaredClass)return void u.warn("The visualVariable should be an instance of esri.renderers.visualVariables.OpacityVariable");const a="number"==typeof t,i=a?null:t,o=i&&i.attributes;let l=a?t:null;const c=n.field,{ipData:f,hasExpression:p}=n.cache;let d=n.cache.compiledFunc;if(!c&&!p){const e=n.stops;return e&&e[0]&&e[0].opacity}if("number"!=typeof l)if(p){if((0,s.Wi)(r)||(0,s.Wi)(r.arcade))return void u.error("Use of arcade expressions requires an arcade context");const e={viewingMode:r.viewingMode,scale:r.scale,spatialReference:r.spatialReference},t=r.arcade.arcadeUtils,a=t.getViewInfo(e),o=t.createExecContext(i,a);if(!d){const e=t.createSyntaxTree(n.valueExpression);d=t.createFunction(e),n.cache.compiledFunc=d}l=t.executeFunction(d,o)}else o&&(l=o[c]);const m=n.normalizationField,h=o?parseFloat(o[m]):void 0;if(null!=l&&(!m||a||!isNaN(h)&&0!==h)){isNaN(h)||a||(l/=h);const e=v(l,f);if(e){const t=e[0],r=e[1];if(t===r)return n.stops[t].opacity;{const a=n.stops[t].opacity;return a+(n.stops[r].opacity-a)*e[2]}}}}function y(e,t,r){const n="visualVariables"in e&&e.visualVariables?e.visualVariables.find((e=>"rotation"===e.type)):e;if(!n)return;if("esri.renderers.visualVariables.RotationVariable"!==n.declaredClass)return void u.warn("The visualVariable should be an instance of esri.renderers.visualVariables.RotationVariable");const a=n.axis||"heading",i="heading"===a&&"arithmetic"===n.rotationType?90:0,o="heading"===a&&"arithmetic"===n.rotationType?-1:1,l="number"==typeof t?null:t,c=l&&l.attributes,f=n.field,{hasExpression:p}=n.cache;let d=n.cache.compiledFunc,m=0;if(!f&&!p)return m;if(p){if((0,s.Wi)(r)||(0,s.Wi)(r.arcade))return void u.error("Use of arcade expressions requires an arcade context");const e={viewingMode:r.viewingMode,scale:r.scale,spatialReference:r.spatialReference},t=r.arcade.arcadeUtils,a=t.getViewInfo(e),i=t.createExecContext(l,a);if(!d){const e=t.createSyntaxTree(n.valueExpression);d=t.createFunction(e),n.cache.compiledFunc=d}m=t.executeFunction(d,i)}else c&&(m=c[f]||0);return m="number"!=typeof m||isNaN(m)?null:i+o*m,m}function b(e,t,r){const n="visualVariables"in e&&e.visualVariables?e.visualVariables.find((e=>"size"===e.type)):e;if(!n)return;if("esri.renderers.visualVariables.SizeVariable"!==n.declaredClass)return void u.warn("The visualVariable should be an instance of esri.renderers.visualVariables.SizeVariable");const a=k(function(e,t,r){const n="number"==typeof t,a=n?null:t,i=a&&a.attributes;let o=n?t:null;const{isScaleDriven:l}=e.cache;let f=e.cache.compiledFunc;if(l){const t=(0,s.pC)(r)?r.scale:void 0,n=(0,s.pC)(r)?r.view:void 0;o=null==t||"3d"===n?function(e){let t=null,r=null;const n=e.stops;return n?(t=n[0].value,r=n[n.length-1].value):(t=e.minDataValue||0,r=e.maxDataValue||0),(t+r)/2}(e):t}else if(!n)switch(e.inputValueType){case c.RY.Expression:{if((0,s.Wi)(r)||(0,s.Wi)(r.arcade))return void u.error("Use of arcade expressions requires an arcade context");const t={viewingMode:r.viewingMode,scale:r.scale,spatialReference:r.spatialReference},n=r.arcade.arcadeUtils,i=n.getViewInfo(t),l=n.createExecContext(a,i);if(!f){const t=n.createSyntaxTree(e.valueExpression);f=n.createFunction(t),e.cache.compiledFunc=f}o=n.executeFunction(f,l);break}case c.RY.Field:i&&(o=i[e.field]);break;case c.RY.Unknown:o=null}if(!(0,c.qh)(o))return null;if(n||!e.normalizationField)return o;const p=i?parseFloat(i[e.normalizationField]):null;return(0,c.qh)(p)&&0!==p?o/p:null}(n,t,r),n,t,r,n.cache.ipData);return null==a||isNaN(a)?0:a}function g(e,t,r){return null==e?null:(0,c.iY)(e)?b(e,t,r):(0,c.qh)(e)?e:null}function M(e,t,r){return(0,c.qh)(r)&&e>r?r:(0,c.qh)(t)&&e<t?t:e}function k(e,t,r,n,a){switch(t.transformationType){case c.hL.Additive:return function(e,t,r,n){return e+(g(t.minSize,r,n)||t.minDataValue)}(e,t,r,n);case c.hL.Constant:return function(e,t,r){const n=e.stops;let a=n&&n.length&&n[0].size;return null==a&&(a=e.minSize),g(a,t,r)}(t,r,n);case c.hL.ClampedLinear:return function(e,t,r,n){const a=(e-t.minDataValue)/(t.maxDataValue-t.minDataValue),i=g(t.minSize,r,n),o=g(t.maxSize,r,n),l=(0,s.pC)(n)?n.shape:void 0;if(e<=t.minDataValue)return i;if(e>=t.maxDataValue)return o;if("area"===t.scaleBy&&l){const e="circle"===l,t=e?p*(i/2)**2:i*i,r=t+a*((e?p*(o/2)**2:o*o)-t);return e?2*Math.sqrt(r/p):Math.sqrt(r)}return i+a*(o-i)}(e,t,r,n);case c.hL.Proportional:return function(e,t,r,n){const a=(0,s.pC)(n)?n.shape:void 0,i=e/t.minDataValue,o=g(t.minSize,r,n),l=g(t.maxSize,r,n);let c=null;return c="circle"===a?2*Math.sqrt(i*(o/2)**2):"square"===a||"diamond"===a||"image"===a?Math.sqrt(i*o**2):i*o,M(c,o,l)}(e,t,r,n);case c.hL.Stops:return function(e,t,r,n,a){const[i,o,s]=v(e,a);if(i===o)return g(t.stops[i].size,r,n);{const e=g(t.stops[i].size,r,n);return e+(g(t.stops[o].size,r,n)-e)*s}}(e,t,r,n,a);case c.hL.RealWorldSize:return function(e,t,r,n){const a=((0,s.pC)(n)&&n.resolution?n.resolution:1)*l.a[t.valueUnit],i=g(t.minSize,r,n),o=g(t.maxSize,r,n),{valueRepresentation:c}=t;let u=null;return u="area"===c?2*Math.sqrt(e/p)/a:"radius"===c||"distance"===c?2*e/a:e/a,M(u,i,o)}(e,t,r,n);case c.hL.Identity:return e;case c.hL.Unknown:return null}}function C(e,t,r){const{isScaleDriven:n}=e.cache;if(!(n&&"3d"===r||t))return null;const a={scale:t,view:r};let i=g(e.minSize,f,a),o=g(e.maxSize,f,a);if(null!=i||null!=o){if(i>o){const e=o;o=i,i=e}return{minSize:i,maxSize:o}}}function w(e,t,r){if(!e.visualVariables)return;const n=[],a=[],i=[],o=[],s=[];for(const l of e.visualVariables)switch(l.type){case"color":a.push(l);break;case"opacity":i.push(l);break;case"rotation":s.push(l);break;case"size":o.push(l)}return a.forEach((e=>{const a=m(e,t,r);n.push({variable:e,value:a})})),i.forEach((e=>{const a=h(e,t,r);n.push({variable:e,value:a})})),s.forEach((e=>{const a=y(e,t,r);n.push({variable:e,value:a})})),o.forEach((e=>{const a=b(e,t,r);n.push({variable:e,value:a})})),n.filter((e=>null!=e.value))}function v(e,t){if(!t)return;let r=0,n=t.length-1;return t.some(((t,a)=>e<t?(n=a,!0):(r=a,!1))),[r,n,(e-t[r])/(t[n]-t[r])]}function I(e,t,r){const n=["proportional","proportional","proportional"];for(const a of e){const e=a.useSymbolValue?"symbol-value":b(a,t,r);switch(a.axis){case"width":n[0]=e;break;case"depth":n[1]=e;break;case"height":n[2]=e;break;case"width-and-depth":n[0]=e,n[1]=e;break;case"all":case void 0:case null:n[0]=e,n[1]=e,n[2]=e;break;default:(0,i.Bg)(a.axis)}}return n}},31027:(e,t,r)=>{function n(e,t,r,n){return function(e){return"function"==typeof e}(e)?e(t,r,n):e}function a(e){return[e.r,e.g,e.b,e.a]}function i(e,t,r){const n=e=>{let t=e.length;for(;t--;)if(!" /-,\n".includes(e.charAt(t)))return!1;return!0},a=[];let i=0,s=-1;do{if(s=t.indexOf("[",i),s>=i){if(s>i){const e=t.substr(i,s-i);a.push([e,null,n(e)])}if(i=s+1,s=t.indexOf("]",i),s>=i){if(s>i){const r=e[t.substr(i,s-i)];r&&a.push([null,r,!1])}i=s+1}}}while(-1!==s);if(i<t.length-1){const e=t.substr(i);a.push([e,null,n(e)])}return e=>{let t="",n=null;for(const r of a){const[a,i,o]=r;if(a)o?n=a:(n&&(t+=n,n=null),t+=a);else{const r=e.attributes[i];r&&(n&&(t+=n,n=null),t+=r)}}return o(t,r)}}function o(e,t){switch("string"!=typeof e&&(e=String(e)),t){case"LowerCase":return e.toLowerCase();case"Allcaps":return e.toUpperCase();default:return e}}function s(e,t,r,n,a,i){let o=!(arguments.length>6&&void 0!==arguments[6])||arguments[6];const s=t/a,l=r/i,c=Math.ceil(s/2),u=Math.ceil(l/2);for(let f=0;f<i;f++)for(let r=0;r<a;r++){const p=4*(r+(o?i-f-1:f)*a);let d=0,m=0,h=0,y=0,b=0,g=0,M=0;const k=(f+.5)*l;for(let n=Math.floor(f*l);n<(f+1)*l;n++){const a=Math.abs(k-(n+.5))/u,i=(r+.5)*s,o=a*a;for(let l=Math.floor(r*s);l<(r+1)*s;l++){let r=Math.abs(i-(l+.5))/c;const a=Math.sqrt(o+r*r);a>=-1&&a<=1&&(d=2*a*a*a-3*a*a+1,d>0&&(r=4*(l+n*t),M+=d*e[r+3],h+=d,e[r+3]<255&&(d=d*e[r+3]/250),y+=d*e[r],b+=d*e[r+1],g+=d*e[r+2],m+=d))}}n[p]=y/m,n[p+1]=b/m,n[p+2]=g/m,n[p+3]=M/h}}function l(e){return e?{r:e[0],g:e[1],b:e[2],a:e[3]/255}:{r:0,g:0,b:0,a:0}}function c(e){return e.data?.symbol}function u(e){return"CIMVectorMarker"===e.type||"CIMPictureMarker"===e.type||"CIMBarChartMarker"===e.type||"CIMCharacterMarker"===e.type||"CIMPieChartMarker"===e.type||"CIMStackedBarChartMarker"===e.type}function f(e){return"CIMGradientStroke"===e.type||"CIMPictureStroke"===e.type||"CIMSolidStroke"===e.type}function p(e){return"CIMGradientFill"===e.type||"CIMHatchFill"===e.type||"CIMPictureFill"===e.type||"CIMSolidFill"===e.type||"CIMWaterFill"===e.type}function d(e){return"CIMMarkerPlacementAlongLineRandomSize"===e.type||"CIMMarkerPlacementAlongLineSameSize"===e.type||"CIMMarkerPlacementAlongLineVariableSize"===e.type||"CIMMarkerPlacementAtExtremities"===e.type||"CIMMarkerPlacementAtMeasuredUnits"===e.type||"CIMMarkerPlacementAtRatioPositions"===e.type||"CIMMarkerPlacementOnLine"===e.type||"CIMMarkerPlacementOnVertices"===e.type}r.d(t,{Cc:()=>h,NA:()=>m,NO:()=>l,Qs:()=>i,RI:()=>y,TT:()=>s,X3:()=>o,be:()=>c,gJ:()=>d,hf:()=>n,k5:()=>p,nn:()=>a,yL:()=>f,zL:()=>u});const m=e=>isNaN(e)||!e?0:e,h=e=>{if(!e)return!1;for(const t of e)switch(t.type){case"CIMGeometricEffectBuffer":case"CIMGeometricEffectOffset":return!0}return!1};function y(){return Promise.all([r.e(9058),r.e(309)]).then(r.bind(r,50309))}},49729:(e,t,r)=>{r.d(t,{FW:()=>l,PI:()=>o,ZB:()=>d,iW:()=>u,kW:()=>i});var n=r(51995),a=r(31027);function i(e){const t=(0,a.be)(e);if("CIMTextSymbol"===t.type)return t.height;let r=0;if(t.symbolLayers)for(const n of t.symbolLayers)(0,a.zL)(n)&&n.size>r?r=n.size:(0,a.yL)(n)&&n.width>r?r=n.width:(0,a.k5)(n);return r}function o(e,t,r){const n=(0,a.be)(e),o=i(e);0!==o?s(n,t/o,!1,r):function(e,t){if("CIMTextSymbol"!==e.type){if(e.symbolLayers)for(const r of e.symbolLayers)switch(r.type){case"CIMPictureMarker":case"CIMVectorMarker":r.size=t;break;case"CIMPictureStroke":case"CIMSolidStroke":r.width=t}}else e.height=t}(n,t)}function s(e,t,r,n){if("CIMTextSymbol"!==e.type){if(r&&e.effects)for(const r of e.effects)c(r,t);if(e.symbolLayers)for(const r of e.symbolLayers)switch(r.type){case"CIMPictureMarker":case"CIMVectorMarker":l(r,t,n);break;case"CIMPictureStroke":case"CIMSolidStroke":!n?.preserveOutlineWidth&&r.width&&(r.width*=t);break;case"CIMPictureFill":r.height&&(r.height*=t),r.offsetX&&(r.offsetX*=t),r.offsetY&&(r.offsetY*=t);break;case"CIMHatchFill":s(r.lineSymbol,t,!0,{...n,preserveOutlineWidth:!1}),r.offsetX&&(r.offsetX*=t),r.offsetY&&(r.offsetY*=t),r.separation&&(r.separation*=t)}}else e.height*=t}function l(e,t,r){if(e.markerPlacement&&function(e,t){switch((0,a.gJ)(e)&&e.offset&&(e.offset*=t),e.type){case"CIMMarkerPlacementAlongLineRandomSize":case"CIMMarkerPlacementAlongLineSameSize":if(e.customEndingOffset&&(e.customEndingOffset*=t),e.offsetAlongLine&&(e.offsetAlongLine*=t),e.placementTemplate&&e.placementTemplate.length){const r=e.placementTemplate.map((e=>e*t));e.placementTemplate=r}break;case"CIMMarkerPlacementAlongLineVariableSize":if(e.maxRandomOffset&&(e.maxRandomOffset*=t),e.placementTemplate&&e.placementTemplate.length){const r=e.placementTemplate.map((e=>e*t));e.placementTemplate=r}break;case"CIMMarkerPlacementOnLine":e.startPointOffset&&(e.startPointOffset*=t);break;case"CIMMarkerPlacementAtExtremities":e.offsetAlongLine&&(e.offsetAlongLine*=t);break;case"CIMMarkerPlacementAtMeasuredUnits":case"CIMMarkerPlacementOnVertices":break;case"CIMMarkerPlacementAtRatioPositions":e.beginPosition&&(e.beginPosition*=t),e.endPosition&&(e.endPosition*=t);break;case"CIMMarkerPlacementPolygonCenter":e.offsetX&&(e.offsetX*=t),e.offsetY&&(e.offsetY*=t);break;case"CIMMarkerPlacementInsidePolygon":e.offsetX&&(e.offsetX*=t),e.offsetY&&(e.offsetY*=t),e.stepX&&(e.stepX*=t),e.stepY&&(e.stepY*=t)}}(e.markerPlacement,t),e.offsetX&&(e.offsetX*=t),e.offsetY&&(e.offsetY*=t),e.anchorPoint&&"Absolute"===e.anchorPointUnits&&(e.anchorPoint={x:e.anchorPoint.x*t,y:e.anchorPoint.y*t}),e.size*=t,"CIMVectorMarker"===e.type&&e.markerGraphics)for(const n of e.markerGraphics)e.scaleSymbolsProportionally||s(n.symbol,t,!0,r)}function c(e,t){switch(e.type){case"CIMGeometricEffectArrow":case"CIMGeometricEffectDonut":e.width&&(e.width*=t);break;case"CIMGeometricEffectBuffer":e.size&&(e.size*=t);break;case"CIMGeometricEffectCut":e.beginCut&&(e.beginCut*=t),e.endCut&&(e.endCut*=t),e.middleCut&&(e.middleCut*=t);break;case"CIMGeometricEffectDashes":if(e.customEndingOffset&&(e.customEndingOffset*=t),e.offsetAlongLine&&(e.offsetAlongLine*=t),e.dashTemplate&&e.dashTemplate.length){const r=e.dashTemplate.map((e=>e*t));e.dashTemplate=r}break;case"CIMGeometricEffectExtension":case"CIMGeometricEffectJog":case"CIMGeometricEffectRadial":e.length&&(e.length*=t);break;case"CIMGeometricEffectMove":e.offsetX&&(e.offsetX*=t),e.offsetY&&(e.offsetY*=t);break;case"CIMGeometricEffectOffset":case"CIMGeometricEffectOffsetTangent":e.offset&&(e.offset*=t);break;case"CIMGeometricEffectRegularPolygon":e.radius&&(e.radius*=t);break;case"CIMGeometricEffectTaperedPolygon":e.fromWidth&&(e.fromWidth*=t),e.length&&(e.length*=t),e.toWidth&&(e.toWidth*=t);break;case"CIMGeometricEffectWave":e.amplitude&&(e.amplitude*=t),e.period&&(e.period*=t)}}function u(e){const t=[];return f((0,a.be)(e),t),t.length?new n.Z((0,a.NO)(t[0])):null}function f(e,t){let r;r="CIMTextSymbol"===e.type?e.symbol:e;const n="CIMPolygonSymbol"===e.type;if(r.symbolLayers)for(const i of r.symbolLayers)if(!(i.colorLocked||n&&((0,a.yL)(i)||(0,a.zL)(i)&&i.markerPlacement&&(0,a.gJ)(i.markerPlacement))))switch(i.type){case"CIMPictureMarker":case"CIMPictureStroke":case"CIMPictureFill":i.tintColor&&p(t,i.tintColor);break;case"CIMVectorMarker":i.markerGraphics.forEach((e=>{f(e.symbol,t)}));break;case"CIMSolidStroke":case"CIMSolidFill":p(t,i.color);break;case"CIMHatchFill":f(i.lineSymbol,t)}}function p(e,t){for(const r of e)if(r.join(".")===t.join("."))return;e.push(t)}function d(e,t,r){t instanceof n.Z||(t=new n.Z(t));const i=(0,a.be)(e);i&&m(i,t,r)}function m(e,t,r){let n;n="CIMTextSymbol"===e.type?e.symbol:e;const i="CIMPolygonSymbol"===n.type;if(n.symbolLayers)for(const o of n.symbolLayers){if(o.colorLocked)continue;if(i)if(r){const{layersToColor:e}=r;if(((0,a.yL)(o)||(0,a.zL)(o)&&o.markerPlacement&&(0,a.gJ)(o.markerPlacement))&&"fill"===e||(0,a.k5)(o)&&"outline"===e)continue}else if((0,a.yL)(o)||(0,a.zL)(o)&&o.markerPlacement&&(0,a.gJ)(o.markerPlacement))continue;const e=t.toArray();switch(o.type){case"CIMPictureMarker":case"CIMPictureStroke":case"CIMPictureFill":o.tintColor=e;break;case"CIMVectorMarker":o.markerGraphics.forEach((e=>{m(e.symbol,t,r)}));break;case"CIMSolidStroke":case"CIMSolidFill":o.color=e;break;case"CIMHatchFill":m(o.lineSymbol,t,r)}}}},79563:(e,t,r)=>{r.d(t,{Ne:()=>b,Od:()=>m,Sp:()=>y,_M:()=>d,mx:()=>h});var n=r(65905),a=r(51995),i=r(76200),o=r(59026),s=r(17842),l=r(49729);const c="picture-fill",u="simple-fill",f="simple-marker",p=new o.Z(1e3);function d(e){const t=e.style;let r=null;if(e)switch(e.type){case f:"cross"!==t&&"x"!==t&&(r=e.color);break;case u:"solid"===t?r=e.color:"none"!==t&&(r={type:"pattern",x:0,y:0,src:(0,n.V)(`esri/symbols/patterns/${t}.png`),width:5,height:5});break;case c:r={type:"pattern",src:e.url,width:(0,s.F2)(e.width)*e.xscale,height:(0,s.F2)(e.height)*e.yscale,x:(0,s.F2)(e.xoffset),y:(0,s.F2)(e.yoffset)};break;case"text":r=e.color;break;case"cim":r=(0,l.iW)(e)}return r}function m(e,t){const r=e+"-"+t;return void 0!==p.get(r)?Promise.resolve(p.get(r)):(0,i.default)(e,{responseType:"image"}).then((e=>{const n=e.data,a=n.naturalWidth,i=n.naturalHeight,o=document.createElement("canvas");o.width=a,o.height=i;const s=o.getContext("2d");s.fillStyle=t,s.fillRect(0,0,a,i),s.globalCompositeOperation="destination-in",s.drawImage(n,0,0);const l=o.toDataURL();return p.put(r,l),l}))}function h(e){if(!e)return null;let t;switch(e.type){case u:case c:case f:t=h(e.outline);break;case"simple-line":{const r=(0,s.F2)(e.width);"none"!==e.style&&0!==r&&(t={color:e.color,style:y(e.style),width:r,cap:e.cap,join:"miter"===e.join?(0,s.F2)(e.miterLimit):e.join});break}default:t=null}return t}const y=(()=>{const e={};return t=>{if(e[t])return e[t];const r=t.replace(/-/g,"");return e[t]=r,r}})(),b=new a.Z([128,128,128])},74579:(e,t,r)=>{r.d(t,{BR:()=>x,Y6:()=>h,YW:()=>y,_h:()=>g,e3:()=>S,nf:()=>b,tb:()=>k,wJ:()=>V});var n=r(51995),a=r(51508),i=r(14921),o=r(93169),s=r(92026),l=r(17842),c=r(71353),u=r(60676),f=r(79563),p=r(32537);const d=/\/resource\/(.*?)\.svg$/,m=new n.Z("white");function h(e){if(!e)return 0;if((0,a.dU)(e)){const t=function(e){const t=e.symbolLayers&&e.symbolLayers.length;if(!t)return;const r=e.symbolLayers.getItemAt(t-1);return"outline"in r?(0,s.U2)(r,"outline","size"):void 0}(e);return(0,s.pC)(t)?t:0}const t=(0,f.mx)(e);return t&&(0,l.Wz)(t.width)||0}function y(e){if((0,s.Wi)(e)||!("symbolLayers"in e)||(0,s.Wi)(e.symbolLayers))return!1;switch(e.type){case"point-3d":return e.symbolLayers.some((e=>"object"===e.type));case"line-3d":return e.symbolLayers.some((e=>"path"===e.type));case"polygon-3d":return e.symbolLayers.some((e=>"object"===e.type||"extrude"===e.type));default:return!1}}function b(e,t){const r=t.resource.href;return!(0,o.Z)("esri-canvas-svg-support")&&e.styleOrigin&&d.test(r)?r.replace(d,"/resource/png/$1.png"):r}function g(e,t){if(!e)return null;let r=null;return(0,a.dU)(e)?r=function(e){const t=e.symbolLayers;if(!t)return null;let r=null;return t.forEach((e=>{"object"===e.type&&null!=e.resource.href||(r="water"===e.type?(0,s.Wg)(e.color):(0,s.pC)(e.material)?(0,s.Wg)(e.material.color):null)})),r?new n.Z(r):null}(e):(0,a.cT)(e)&&(r=e.color?new n.Z(e.color):null),r?M(r,t):null}function M(e,t){if(null==t)return e;const r=e.toRgba();return r[3]=r[3]*t,new n.Z(r)}function k(e,t,r){e&&(t||null!=r)&&(t&&(t=new n.Z(t)),(0,a.dU)(e)?function(e,t,r){const n=e.symbolLayers;if(!n)return;const a=e=>{const n=(0,s.pC)(e)?e:null;return M(t=t||n||null!=r&&m,r)};n.forEach((e=>{if("object"!==e.type||null==e.resource.href||t)if("water"===e.type)e.color=a(e.color);else{const t=(0,s.pC)(e.material)?e.material.color:null,n=a(t);(0,s.Wi)(e.material)?e.material=new p.b({color:n}):e.material.color=n,null!=r&&"outline"in e&&(0,s.pC)(e.outline)&&(0,s.pC)(e.outline.color)&&(e.outline.color=M(e.outline.color,r))}}))}(e,t,r):(0,a.cT)(e)&&function(e,t,r){(t=t||e.color)&&(e.color=M(t,r)),null!=r&&"outline"in e&&e.outline&&e.outline.color&&(e.outline.color=M(e.outline.color,r))}(e,t,r))}async function C(e,t){const n=e.symbolLayers;n&&await(0,i.Ed)(n,(async e=>async function(e,t){switch(e.type){case"extrude":!function(e,t){e.size="number"==typeof t[2]?t[2]:0}(e,t);break;case"icon":case"line":case"text":!function(e,t){const r=w(t);(0,s.pC)(r)&&(e.size=r)}(e,t);break;case"path":!function(e,t){const r=v(t,c.O,[e.width,void 0,e.height]);e.width=I(t[0],e.width,1,r),e.height=I(t[2],e.height,1,r)}(e,t);break;case"object":await async function(e,t){const{resourceSize:n,symbolSize:a}=await async function(e){const t=await r.e(3657).then(r.bind(r,23657)),n=await t.computeObjectLayerResourceSize(e,10),{width:a,height:i,depth:o}=e,s=[a,o,i];let l=1;for(let r=0;r<3;r++)if(null!=s[r]){l=s[r]/n[r];break}for(let r=0;r<3;r++)null==s[r]&&(s[r]=n[r]*l);return{resourceSize:n,symbolSize:s}}(e),i=v(t,n,a);e.width=I(t[0],a[0],n[0],i),e.depth=I(t[1],a[1],n[1],i),e.height=I(t[2],a[2],n[2],i)}(e,t)}}(e,t)))}function w(e){for(const t of e)if("number"==typeof t)return t;return null}function v(e,t,r){for(let n=0;n<3;n++){const a=e[n];switch(a){case"symbol-value":return null!=r[n]?r[n]/t[n]:1;case"proportional":break;default:if(a&&t[n])return a/t[n]}}return 1}function I(e,t,r,n){switch(e){case"proportional":return r*n;case"symbol-value":return null!=t?t:r;default:return e}}async function S(e,t){if(e&&t)return(0,a.dU)(e)?C(e,t):void((0,a.cT)(e)&&function(e,t){const r=w(t);if(!(0,s.Wi)(r))switch(e.type){case"simple-marker":e.size=r;break;case"picture-marker":{const t=e.width/e.height;t>1?(e.width=r,e.height=r*t):(e.width=r*t,e.height=r);break}case"simple-line":e.width=r;break;case"text":e.font.size=r}}(e,t))}function x(e,t,r){if(e&&null!=t)if((0,a.dU)(e)){const n=e.symbolLayers;n&&n.forEach((e=>{if(e&&"object"===e.type)switch(r){case"tilt":e.tilt=t;break;case"roll":e.roll=t;break;default:e.heading=t}}))}else(0,a.cT)(e)&&("simple-marker"!==e.type&&"picture-marker"!==e.type&&"text"!==e.type||(e.angle=t))}function V(e){if(!e)return null;const t=e.effects.filter((e=>"bloom"!==e.type)).map((e=>e.toJSON()));return(0,u.rM)(t)}}}]);
//# sourceMappingURL=2927.d670d059.chunk.js.map