(this.webpackJsonpimaps=this.webpackJsonpimaps||[]).push([[154],{1202:function(e,t,n){"use strict";n.r(t),n.d(t,"executeScript",(function(){return se})),n.d(t,"extend",(function(){return le})),n.d(t,"extractFieldLiterals",(function(){return fe})),n.d(t,"findFunctionCalls",(function(){return pe})),n.d(t,"functionHelper",(function(){return ue})),n.d(t,"referencesFunction",(function(){return Oe})),n.d(t,"referencesMember",(function(){return he})),n.d(t,"validateScript",(function(){return be}));var r=n(15),c=n(24),a=n(44),o=n(136),i=n(43),u=n(57),l=n(203),s=n(95),f=n(97),b=n(1017),h=n(944),O=n(971),p=n(861),d=n(894),j=n(953),v=n(954),E=n(868),g=n(910),y=n(952),N=n(1018),w=n(1019),m=n(1020),I=n(1022),T=n(1023),S=n(1080),R=n(1128);var A=100;function P(e){return e instanceof Error?Object(c.r)(e):Object(c.r)(new Error(e))}function C(e){return Object(c.s)(e)}function U(e,t){for(var n=[],r=0;r<t.arguments.length;r++)n.push(F(e,t.arguments[r]));return Object(c.b)(n)}function x(e,t,n){return Object(c.c)((function(r,c){U(e,t).then((function(a){try{r(n(e,t,a))}catch(o){c(o)}}),c)}))}function M(e,t,n){try{return U(e,t).then((function(r){try{var a=n(e,t,r);return function(e){return e&&"function"==typeof e.then}(a)?a:Object(c.s)(a)}catch(o){return P(o)}}))}catch(r){return P(r)}}function F(e,t,n){try{if(t.breakpoint&&!0!==n)return t.breakpoint().then((function(){return F(e,t,!0)}));switch(t.type){case"VariableDeclarator":return function(e,t){try{var n=null;return n=null===t.init?Object(c.s)(null):F(e,t.init),null!==e.localScope?n.then((function(n){return Object(c.c)((function(r){if(n===p.P&&(n=null),"Identifier"!==t.id.type)throw new Error("Can only assign a regular variable");var c=t.id.name.toLowerCase();e.localScope[c]={value:n,valueset:!0,node:t.init},r(p.P)}))})):n.then((function(n){return Object(c.c)((function(r){if("Identifier"!==t.id.type)throw new Error("Can only assign a regular variable");var c=t.id.name.toLowerCase();n===p.P&&(n=null),e.globalScope[c]={value:n,valueset:!0,node:t.init},r(p.P)}))}))}catch(r){return P(r)}}(e,t);case"VariableDeclaration":return H(e,t,0);case"BlockStatement":return function(e,t){try{return Y(e,t,0)}catch(n){return P(n)}}(e,t);case"FunctionDeclaration":return function(e,t){try{var r=t.id.name.toLowerCase();return e.globalScope[r]={valueset:!0,node:null,value:new b.a(t,e)},Object(c.s)(p.P)}catch(n){return P(n)}}(e,t);case"ReturnStatement":return function(e,t){return Object(c.c)((function(n,r){null===t.argument?n(new p.r(p.P)):F(e,t.argument).then((function(e){try{n(new p.r(e))}catch(t){r(t)}}),r)}))}(e,t);case"IfStatement":return function(e,t){return Object(c.c)((function(n,r){"AssignmentExpression"!==t.test.type&&"UpdateExpression"!==t.test.type?F(e,t.test).then((function(c){try{!0===c?F(e,t.consequent).then(n,r):!1===c?null!==t.alternate?F(e,t.alternate).then(n,r):n(p.P):r(new Error(Object(y.f)(t.test,"RUNTIME","CANNOT_USE_NONBOOLEAN_IN_CONDITION")))}catch(a){r(a)}}),r):r(new Error(Object(y.f)(t.test,"RUNTIME","CANNOT_USE_ASSIGNMENT_IN_CONDITION")))}))}(e,t);case"ExpressionStatement":return function(e,t){try{return"AssignmentExpression"===t.expression.type?F(e,t.expression):(t.expression.type,F(e,t.expression).then((function(e){return Object(c.c)((function(t){t(e===p.P?p.P:new p.i(e))}))})))}catch(n){return Object(c.r)(n)}}(e,t);case"UpdateExpression":return function(e,t){try{var n=t.argument;if("MemberExpression"===n.type){var r={t:null};return F(e,n.object).then((function(t){var a=null;return r.t=t,!0===n.computed?a=F(e,n.property):"Identifier"===n.property.type&&(a=Object(c.s)(n.property.name)),a})).then((function(e){return Object(c.c)((function(n){var c,a=r.t;if(Object(p.u)(a)){if(!Object(p.E)(e))throw new Error("Invalid Parameter");if(e<0&&(e=a.length+e),e<0||e>=a.length)throw new Error("Assignment outside of array bounds");c=Object(p.N)(a[e]),a[e]="++"===t.operator?c+1:c-1}else if(a instanceof d.a){if(!1===Object(p.A)(e))throw new Error("Dictionary accessor must be a string");if(!0!==a.hasField(e))throw new Error("Invalid Parameter");c=Object(p.N)(a.field(e)),a.setField(e,"++"===t.operator?c+1:c-1)}else{if(!(a instanceof g.a))throw Object(p.v)(a)?new Error("Array is Immutable"):new Error("Invalid Parameter");if(!1===Object(p.A)(e))throw new Error("Feature accessor must be a string");if(!0!==a.hasField(e))throw new Error("Invalid Parameter");c=Object(p.N)(a.field(e)),a.setField(e,"++"===t.operator?c+1:c-1)}!1===t.prefix?n(c):n("++"===t.operator?c+1:c-1)}))}))}return Object(c.c)((function(n,r){var c,a="Identifier"===t.argument.type?t.argument.name.toLowerCase():"";if(!a)throw new Error("Invalid identifier");return null!==e.localScope&&void 0!==e.localScope[a]?(c=Object(p.N)(e.localScope[a].value),e.localScope[a]={value:"++"===t.operator?c+1:c-1,valueset:!0,node:t},void(!1===t.prefix?n(c):n("++"===t.operator?c+1:c-1))):void 0!==e.globalScope[a]?(c=Object(p.N)(e.globalScope[a].value),e.globalScope[a]={value:"++"===t.operator?c+1:c-1,valueset:!0,node:t},void(!1===t.prefix?n(c):n("++"===t.operator?c+1:c-1))):void r(new Error("Variable not recognised"))}))}catch(a){return Object(c.r)(a)}}(e,t);case"AssignmentExpression":return function(e,t){return Object(c.c)((function(n,r){var a=t.left;if("MemberExpression"===a.type)F(e,t.right).then((function(o){try{F(e,a.object).then((function(i){try{var u=null;if(!0===a.computed)u=F(e,a.property);else{if("Identifier"!==a.property.type)throw new Error("Expected computed or identifier for assignemnt target");u=Object(c.s)(a.property.name)}u.then((function(e){try{if(Object(p.u)(i)){if(!Object(p.E)(e))throw new Error("Invalid Parameter");if(e<0&&(e=i.length+e),e<0||e>i.length)throw new Error("Assignment outside of array bounds");if(e===i.length){if("="!==t.operator)throw new Error("Invalid Parameter");i[e]=B(o,t.operator,i[e],t)}else i[e]=B(o,t.operator,i[e],t)}else if(i instanceof d.a){if(!1===Object(p.A)(e))throw new Error("Dictionary accessor must be a string");if(!0===i.hasField(e))i.setField(e,B(o,t.operator,i.field(e),t));else{if("="!==t.operator)throw new Error("Invalid Parameter");i.setField(e,B(o,t.operator,null,t))}}else{if(!(i instanceof g.a))throw Object(p.v)(i)?new Error("Array is Immutable"):new Error("Invalid Parameter");if(!1===Object(p.A)(e))throw new Error("Feature accessor must be a string");if(!0===i.hasField(e))i.setField(e,B(o,t.operator,i.field(e),t));else{if("="!==t.operator)throw new Error("Invalid Parameter");i.setField(e,B(o,t.operator,null,t))}}n(p.P)}catch(c){r(c)}}),r)}catch(l){r(l)}}),r)}catch(i){r(i)}}),r);else{var o=a.name.toLowerCase();if(null!==e.localScope&&void 0!==e.localScope[o])return void F(e,t.right).then((function(c){try{e.localScope[o]={value:B(c,t.operator,e.localScope[o].value,t),valueset:!0,node:t.right},n(p.P)}catch(a){r(a)}}),r);void 0!==e.globalScope[o]?F(e,t.right).then((function(c){try{e.globalScope[o]={value:B(c,t.operator,e.globalScope[o].value,t),valueset:!0,node:t.right},n(p.P)}catch(a){r(a)}}),r):r(new Error("Cannot assign undeclared variable"))}}))}(e,t);case"ForStatement":return function(e,t){try{return null!==t.init?F(e,t.init).then((function(){return Object(c.c)((function(n,r){L(e,t,{testResult:!0,lastAction:p.P},(function(e){n(e)}),(function(e){r(e)}),0)}))})):Object(c.c)((function(n,r){L(e,t,{testResult:!0,lastAction:p.P},(function(e){n(e)}),(function(e){r(e)}),0)}))}catch(n){return Object(c.r)(n)}}(e,t);case"ForInStatement":return function(e,t){return Object(c.c)((function(n,r){F(e,t.right).then((function(a){try{("VariableDeclaration"===t.left.type?F(e,t.left):Object(c.s)()).then((function(){try{var c="";if("VariableDeclaration"===t.left.type){var o=t.left.declarations[0].id;"Identifier"===o.type&&(c=o.name)}else"Identifier"===t.left.type&&(c=t.left.name);if(!c)throw new Error(Object(y.f)(t,"RUNTIME","INVALIDVARIABLE"));c=c.toLowerCase();var i=null;if(null!==e.localScope&&void 0!==e.localScope[c]&&(i=e.localScope[c]),null===i&&void 0!==e.globalScope[c]&&(i=e.globalScope[c]),null===i)return void r(new Error(Object(y.f)(t,"RUNTIME","VARIABLENOTDECLARED")));Object(p.u)(a)||Object(p.A)(a)?G(e,t,a,{reject:r,resolve:n},i):Object(p.v)(a)?function(e,t,n,r,c,a){try{if(void 0===a&&(a="i"),0===n.length)return void r.resolve(p.P);_(e,t,n,c,0,a,(function(e){r.resolve(e)}),(function(e){r.reject(e)}),0)}catch(o){r.reject(o)}}(e,t,a,{reject:r,resolve:n},i):a instanceof d.a||a instanceof g.a?function(e,t,n,r,c){try{G(e,t,n.keys(),r,c,"k")}catch(a){r.reject(a)}}(e,t,a,{reject:r,resolve:n},i):Object(p.K)(a)?V(a.iterator(e.abortSignal),e,t,a,i,(function(e){n(e)}),(function(e){r(e)}),0):G(e,t,[],{reject:r,resolve:n},i)}catch(u){r(u)}}),r)}catch(o){r(o)}}),r)}))}(e,t);case"BreakStatement":return Object(c.s)(p.G);case"EmptyStatement":return Object(c.s)(p.P);case"ContinueStatement":return Object(c.s)(p.H);case"TemplateElement":return function(e,t){return Object(c.s)(t.value?t.value.cooked:"")}(0,t);case"TemplateLiteral":return function(e,t){return Object(c.c)((function(n){var c=[];Object(E.o)(t.expressions,(function(t,n,r,a){return F(e,n).then((function(e){c[r]=Object(p.x)(e)}))})).then((function(){var e,a="",o=0,i=Object(r.a)(t.quasis);try{for(i.s();!(e=i.n()).done;){var u=e.value;a+=u.value?u.value.cooked:"",!1===u.tail&&(a+=c[o]?c[o]:"",o++)}}catch(l){i.e(l)}finally{i.f()}n(a)}))}))}(e,t);case"Identifier":return q(e,t);case"MemberExpression":return function(e,t){try{return F(e,t.object).then((function(n){try{return null===n?Object(c.r)(new Error(Object(y.f)(t,"RUNTIME","NOTFOUND"))):!1===t.computed?"Identifier"===t.property.type?n instanceof d.a||n instanceof g.a?Object(c.s)(n.field(t.property.name)):n instanceof o.a?Object(c.s)(J(n,t.property.name,e,t)):Object(c.r)(new Error(Object(y.f)(t,"RUNTIME","INVALIDTYPE"))):Object(c.r)(new Error(Object(y.f)(t,"RUNTIME","INVALIDTYPE"))):F(e,t.property).then((function(r){return Object(c.c)((function(c,a){if(n instanceof d.a||n instanceof g.a)Object(p.A)(r)?c(n.field(r)):a(new Error(Object(y.f)(t,"RUNTIME","INVALIDTYPE")));else if(n instanceof o.a)Object(p.A)(r)?c(J(n,r,e,t)):a(new Error(Object(y.f)(t,"RUNTIME","INVALIDTYPE")));else if(Object(p.u)(n))if(Object(p.E)(r)&&isFinite(r)&&Math.floor(r)===r){if(r<0&&(r=n.length+r),r>=n.length||r<0)throw new Error(Object(y.f)(t,"RUNTIME","OUTOFBOUNDS"));c(n[r])}else a(new Error(Object(y.f)(t,"RUNTIME","INVALIDTYPE")));else if(Object(p.v)(n))if(Object(p.E)(r)&&isFinite(r)&&Math.floor(r)===r){if(r<0&&(r=n.length()+r),r>=n.length()||r<0)throw new Error(Object(y.f)(t,"RUNTIME","OUTOFBOUNDS"));c(n.get(r))}else a(new Error(Object(y.f)(t,"RUNTIME","INVALIDTYPE")));else if(Object(p.A)(n))if(Object(p.E)(r)&&isFinite(r)&&Math.floor(r)===r){if(r<0&&(r=n.length+r),r>=n.length||r<0)throw new Error(Object(y.f)(t,"RUNTIME","OUTOFBOUNDS"));c(n[r])}else a(new Error(Object(y.f)(t,"RUNTIME","INVALIDTYPE")));else a(new Error(Object(y.f)(t,"RUNTIME","INVALIDTYPE")))}))}))}catch(r){return P(r)}}))}catch(n){return P(n)}}(e,t);case"Literal":return C(t.value);case"CallExpression":return function(e,t){try{if("Identifier"!==t.callee.type)return P(Object(y.f)(t,"RUNTIME","ONLYNODESSUPPORTED"));if(null!==e.localScope&&void 0!==e.localScope[t.callee.name.toLowerCase()]){var r=e.localScope[t.callee.name.toLowerCase()];return r.value instanceof p.n?r.value.fn(e,t):r.value instanceof b.a?ne(e,t,r.value.definition):P(Object(y.f)(t,"RUNTIME","NOTAFUNCTION"))}if(void 0!==e.globalScope[t.callee.name.toLowerCase()]){var c=e.globalScope[t.callee.name.toLowerCase()];return c.value instanceof p.n?c.value.fn(e,t):c.value instanceof b.a?ne(e,t,c.value.definition):P(Object(y.f)(t,"RUNTIME","NOTAFUNCTION"))}return P(Object(y.f)(t,"RUNTIME","NOTFOUND"))}catch(n){return P(n)}}(e,t);case"UnaryExpression":return function(e,t){try{return F(e,t.argument).then((function(e){return Object(c.c)((function(n,r){Object(p.C)(e)&&"!"===t.operator?n(!e):"-"===t.operator?n(-1*Object(p.N)(e)):"+"===t.operator?n(1*Object(p.N)(e)):"~"===t.operator?n(~Object(p.N)(e)):r(new Error(Object(y.f)(t,"RUNTIME","NOTSUPPORTEDUNARYOPERATOR")))}))}))}catch(n){return P(n)}}(e,t);case"BinaryExpression":return function(e,t){try{return Object(c.b)([F(e,t.left),F(e,t.right)]).then((function(e){return Object(c.c)((function(n,r){var c=e[0],a=e[1];switch(t.operator){case"|":case"<<":case">>":case">>>":case"^":case"&":n(Object(p.D)(Object(p.N)(c),Object(p.N)(a),t.operator));case"==":n(Object(p.y)(c,a));break;case"!=":n(!Object(p.y)(c,a));break;case"<":case">":case"<=":case">=":n(Object(p.B)(c,a,t.operator));break;case"+":Object(p.A)(c)||Object(p.A)(a)?n(Object(p.x)(c)+Object(p.x)(a)):n(Object(p.N)(c)+Object(p.N)(a));break;case"-":n(Object(p.N)(c)-Object(p.N)(a));break;case"*":n(Object(p.N)(c)*Object(p.N)(a));break;case"/":n(Object(p.N)(c)/Object(p.N)(a));break;case"%":n(Object(p.N)(c)%Object(p.N)(a));break;default:r(new Error(Object(y.f)(t,"RUNTIME","OPERATORNOTRECOGNISED")))}}))}))}catch(n){return P(n)}}(e,t);case"LogicalExpression":return function(e,t){return Object(c.c)((function(n,r){"AssignmentExpression"!==t.left.type&&"UpdateExpression"!==t.left.type?"AssignmentExpression"!==t.right.type&&"UpdateExpression"!==t.right.type?F(e,t.left).then((function(c){try{if(!Object(p.C)(c))throw new Error(Object(y.f)(t,"RUNTIME","ONLYBOOLEAN"));switch(t.operator){case"||":!0===c?n(c):F(e,t.right).then((function(e){try{if(!Object(p.C)(e))throw new Error(Object(y.f)(t,"RUNTIME","ONLYORORAND"));n(e)}catch(c){r(c)}}),r);break;case"&&":!1===c?n(c):F(e,t.right).then((function(e){try{if(!Object(p.C)(e))throw new Error(Object(y.f)(t,"RUNTIME","ONLYORORAND"));n(e)}catch(c){r(c)}}),r);break;default:throw new Error(Object(y.f)(t,"RUNTIME","ONLYORORAND"))}}catch(a){r(a)}}),r):r(new Error(Object(y.f)(t.right,"RUNTIME","CANNOT_USE_ASSIGNMENT_IN_CONDITION"))):r(new Error(Object(y.f)(t.left,"RUNTIME","CANNOT_USE_ASSIGNMENT_IN_CONDITION")))}))}(e,t);case"ConditionalExpression":return P(Object(y.f)(t,"RUNTIME","NOTSUPPORTED"));case"ArrayExpression":return function(e,t){try{for(var n=[],r=0;r<t.elements.length;r++)n.push(F(e,t.elements[r]));return Object(c.b)(n).then((function(e){return Object(c.c)((function(n,r){for(var c=0;c<e.length;c++){if(Object(p.w)(e[c]))return void r(new Error(Object(y.f)(t,"RUNTIME","FUNCTIONCONTEXTILLEGAL")));e[c]===p.P&&(e[c]=null)}n(e)}))}))}catch(a){return P(a)}}(e,t);case"ObjectExpression":return function(e,t){try{for(var n=[],r=0;r<t.properties.length;r++)n.push(F(e,t.properties[r]));return Object(c.b)(n).then((function(e){return Object(c.c)((function(t){for(var n={},r=0;r<e.length;r++){var c=e[r];if(Object(p.w)(c.value))throw new Error("Illegal Argument");if(!1===Object(p.A)(c.key))throw new Error("Illegal Argument");c.value===p.P?n[c.key.toString()]=null:n[c.key.toString()]=c.value}var a=new d.a(n);a.immutable=!1,t(a)}))}))}catch(a){return P(a)}}(e,t);case"Property":return function(e,t){try{return F(e,t.value).then((function(n){return Object(c.c)((function(r){"Identifier"===t.key.type?r({key:t.key.name,value:n}):F(e,t.key).then((function(e){r({key:e,value:n})}))}))}))}catch(n){return Object(c.r)(n)}}(e,t);default:return P(Object(y.f)(t,"RUNTIME","UNREOGNISED"))}}catch(a){return P(a)}}function D(e,t,n){try{return F(e,t.body).then((function(r){try{return n.lastAction=r,n.lastAction===p.G||n.lastAction instanceof p.r?(n.testResult=!1,Object(c.s)(n)):null!==t.update?F(e,t.update).then((function(){return Object(c.s)(n)})):Object(c.s)(n)}catch(a){return Object(c.r)(a)}}))}catch(r){return Object(c.r)(r)}}function L(e,t,n,r,a,o){try{(function(e,t,n){try{return null!==t.test?F(e,t.test).then((function(r){try{return!0===e.abortSignal.aborted?Object(c.r)(new Error("Cancelled")):(n.testResult=r,!1===n.testResult?Object(c.s)(n):!0!==n.testResult?Object(c.r)(new Error(Object(y.f)(t,"RUNTIME","CANNOT_USE_NONBOOLEAN_IN_CONDITION"))):D(e,t,n))}catch(a){return Object(c.r)(a)}})):D(e,t,n)}catch(o){return Object(c.r)(o)}})(e,t,n).then((function(){try{!0===n.testResult?++o>A?(o=0,setTimeout((function(){L(e,t,n,r,a,o)}),0)):L(e,t,n,r,a,o):n.lastAction instanceof p.r?r(n.lastAction):r(p.P)}catch(c){a(c)}}),(function(e){a(e)}))}catch(i){a(i)}}function k(e,t,n,r,c,a,o,i,u,l){try{if(r<=a)return void i(p.P);c.value="k"===o?n[a]:a,F(e,t.body).then((function(s){try{s instanceof p.r?i(s):s===p.G?i(p.P):++l>A?(l=0,setTimeout((function(){k(e,t,n,r,c,a+1,o,i,u,l)}),0)):k(e,t,n,r,c,a+1,o,i,u,l)}catch(f){u(f)}}),(function(e){u(e)}))}catch(s){u(s)}}function _(e,t,n,r,c,a,o,i,u){try{if(n.length()<=c)return void o(p.P);r.value="k"===a?n.get(c):c,F(e,t.body).then((function(l){l instanceof p.r?o(l):l===p.G?o(p.P):++u>A?(u=0,setTimeout((function(){_(e,t,n,r,c+1,a,o,i,u)}),0)):_(e,t,n,r,c+1,a,o,i,u)}),(function(e){i(e)}))}catch(l){i(l)}}function G(e,t,n,r,c,a){try{if(void 0===a&&(a="i"),0===n.length)return void r.resolve(p.P);k(e,t,n,n.length,c,0,a,(function(e){r.resolve(e)}),(function(e){r.reject(e)}),0)}catch(o){r.reject(o)}}function V(e,t,n,r,c,a,o,i){try{e.next().then((function(u){try{if(null===u)a(p.P);else{var l=g.a.createFromGraphicLikeObject(u.geometry,u.attributes,r);l._underlyingGraphic=u,c.value=l,F(t,n.body).then((function(u){try{u===p.G?a(p.P):u instanceof p.r?a(u):++i>A?(i=0,setTimeout((function(){V(e,t,n,r,c,a,o,i)}),0)):V(e,t,n,r,c,a,o,i)}catch(l){o(l)}}),(function(e){o(e)}))}}catch(s){o(s)}}),(function(e){o(e)}))}catch(u){o(u)}}function B(e,t,n,r){switch(t){case"=":return e===p.P?null:e;case"/=":return Object(p.N)(n)/Object(p.N)(e);case"*=":return Object(p.N)(n)*Object(p.N)(e);case"-=":return Object(p.N)(n)-Object(p.N)(e);case"+=":return Object(p.A)(n)||Object(p.A)(e)?Object(p.x)(n)+Object(p.x)(e):Object(p.N)(n)+Object(p.N)(e);case"%=":return Object(p.N)(n)%Object(p.N)(e);default:throw new Error(Object(y.f)(r,"RUNTIME","OPERATORNOTRECOGNISED"))}}function Y(e,t,n){try{return n>=t.body.length?Object(c.s)(p.P):Object(c.c)((function(r,c){F(e,t.body[n]).then((function(a){try{a instanceof p.r||a===p.G||a===p.H||n===t.body.length-1?r(a):Y(e,t,n+1).then(r,c)}catch(o){c(o)}}),c)}))}catch(r){return P(r)}}function H(e,t,n){return Object(c.c)((function(r,c){n>=t.declarations.length?r(p.P):F(e,t.declarations[n]).then((function(){n===t.declarations.length-1?r(p.P):H(e,t,n+1).then((function(){r(p.P)}),c)}),c)}))}var z=0;function J(e,t,n,r){var c;switch(t=t.toLowerCase()){case"hasz":var a=e.hasZ;return void 0!==a&&a;case"hasm":var o=e.hasM;return void 0!==o&&o;case"spatialreference":var i=e.spatialReference._arcadeCacheId;if(void 0===i){var u=!0;Object.freeze&&Object.isFrozen(e.spatialReference)&&(u=!1),u&&(z++,e.spatialReference._arcadeCacheId=z,i=z)}var l=new d.a({wkt:e.spatialReference.wkt,wkid:e.spatialReference.wkid});return void 0!==i&&(l._arcadeCacheId="SPREF"+i.toString()),l}switch(e.type){case"extent":switch(t){case"xmin":case"xmax":case"ymin":case"ymax":case"zmin":case"zmax":case"mmin":case"mmax":var s=e[t];return void 0!==s?s:null;case"type":return"Extent"}break;case"polygon":switch(t){case"rings":return void 0===(c=e.cache._arcadeCacheId)&&(c=++z,e.cache._arcadeCacheId=c),new O.a(e.rings,e.spatialReference,!0===e.hasZ,!0===e.hasM,c);case"type":return"Polygon"}break;case"point":switch(t){case"x":case"y":case"z":case"m":return void 0!==e[t]?e[t]:null;case"type":return"Point"}break;case"polyline":switch(t){case"paths":return void 0===(c=e.cache._arcadeCacheId)&&(c=++z,e.cache._arcadeCacheId=c),new O.a(e.paths,e.spatialReference,!0===e.hasZ,!0===e.hasM,c);case"type":return"Polyline"}break;case"multipoint":switch(t){case"points":return void 0===(c=e.cache._arcadeCacheId)&&(c=++z,e.cache._arcadeCacheId=c),new h.a(e.points,e.spatialReference,!0===e.hasZ,!0===e.hasM,c,1);case"type":return"Multipoint"}}throw new Error(Object(y.f)(r,"RUNTIME","PROPERTYNOTFOUND"))}function q(e,t){return Object(c.c)((function(n,r){var c=t.name.toLowerCase();if(null===e.localScope||void 0===e.localScope[c])if(void 0===e.globalScope[c])r(new Error(Object(y.f)(t,"RUNTIME","VARIABLENOTFOUND")));else{var a=e.globalScope[c];!0===a.valueset?n(a.value):null!==a.d?a.d.then(n,r):(a.d=F(e,a.node),a.d.then((function(e){try{a.value=e,a.valueset=!0,n(e)}catch(c){r(c)}}),r))}else{var o=e.localScope[c];!0===o.valueset?n(o.value):null!==o.d?o.d.then(n,r):(o.d=F(e,o.node),o.d.then((function(e){try{o.value=e,o.valueset=!0,n(e)}catch(c){r(c)}}),r))}}))}var Z={};function K(e){return null===e?"":Object(p.u)(e)||Object(p.v)(e)?"Array":Object(p.I)(e)?"Date":Object(p.A)(e)?"String":Object(p.C)(e)?"Boolean":Object(p.E)(e)?"Number":e instanceof v.a?"Attachment":e instanceof j.a?"Portal":e instanceof d.a?"Dictionary":e instanceof g.a?"Feature":e instanceof i.a?"Point":e instanceof s.a?"Polygon":e instanceof f.a?"Polyline":e instanceof l.a?"Multipoint":e instanceof u.a?"Extent":Object(p.w)(e)?"Function":Object(p.K)(e)?"FeatureSet":Object(p.L)(e)?"FeatureSetCollection":e===p.P?"":"number"==typeof e&&isNaN(e)?"Number":"Unrecognised Type"}function W(e,t,n,r){return Object(c.c)((function(c,a){F(e,t.arguments[n]).then((function(o){try{if(Object(p.y)(o,r))return void F(e,t.arguments[n+1]).then(c,a);var i=t.arguments.length-n;return 1===i?void F(e,t.arguments[n]).then(c,a):(2===i&&c(null),3===i?void F(e,t.arguments[n+2]).then(c,a):void W(e,t,n+2,r).then(c,a))}catch(u){a(u)}}),a)}))}function X(e,t,n,r){return Object(c.c)((function(c,a){!0===r?F(e,t.arguments[n+1]).then(c,a):3===t.arguments.length-n?F(e,t.arguments[n+2]).then(c,a):F(e,t.arguments[n+2]).then((function(r){try{if(!1===Object(p.C)(r))return void a(new Error("WHEN needs boolean test conditions"));X(e,t,n+2,r).then(c,a)}catch(o){a(o)}}))}))}function Q(e,t){try{var n=e.length,r=Math.floor(n/2);return 0===n?Object(c.s)([]):1===n?Object(c.s)([e[0]]):Object(c.c)((function(a,o){var i=[Q(e.slice(0,r),t),Q(e.slice(r,n),t)];Object(c.b)(i).then((function(n){try{$(n[0],n[1],t,[]).then(a,o)}catch(e){o(e)}}),o)}))}catch(a){return P(a)}}function $(e,t,n,r){return Object(c.c)((function(c,a){var o=r;e.length>0||t.length>0?e.length>0&&t.length>0?n(e[0],t[0]).then((function(i){try{isNaN(i)&&(i=1),i<=0?(o.push(e[0]),e=e.slice(1)):(o.push(t[0]),t=t.slice(1)),$(e,t,n,r).then(c,a)}catch(u){a(u)}}),a):e.length>0?(o.push(e[0]),$(e=e.slice(1),t,n,r).then(c,a)):t.length>0&&(o.push(t[0]),t=t.slice(1),$(e,t,n,r).then(c,a)):c(r)}))}function ee(e,t){var n=e.length,r=Math.floor(n/2);return t||(t=function(e,t){return e<t?-1:e===t?0:1}),0===n?[]:1===n?[e[0]]:function(e,t,n){for(var r=[];e.length>0||t.length>0;)if(e.length>0&&t.length>0){var c=n(e[0],t[0]);isNaN(c)&&(c=1),c<=0?(r.push(e[0]),e=e.slice(1)):(r.push(t[0]),t=t.slice(1))}else e.length>0?(r.push(e[0]),e=e.slice(1)):t.length>0&&(r.push(t[0]),t=t.slice(1));return r}(ee(e.slice(0,r),t),ee(e.slice(r,n),t),t)}function te(e,t,n){try{var r=e.body;if(n.length!==e.params.length)return P(new Error("Invalid Parameter calls to function."));for(var a=0;a<n.length;a++){var o=e.params[a];"Identifier"===o.type&&(t.localScope[o.name.toLowerCase()]={d:null,value:n[a],valueset:!0,node:null})}return F(t,r).then((function(e){return Object(c.c)((function(t,n){e instanceof p.r?t(e.value):e!==p.G?e!==p.H?t(e instanceof p.i?e.value:e):n(new Error("Cannot Continue from a Function")):n(new Error("Cannot Break from a Function"))}))}))}catch(i){return Object(c.r)(i)}}function ne(e,t,n){return M(e,t,(function(t,r,c){var a={spatialReference:e.spatialReference,services:e.services,console:e.console,lrucache:e.lrucache,interceptor:e.interceptor,localScope:{},abortSignal:e.abortSignal,globalScope:e.globalScope,depthCounter:e.depthCounter+1};if(a.depthCounter>64)throw new Error("Exceeded maximum function depth");return te(n,a,c)}))}function re(e){return function(){var t={abortSignal:e.context.abortSignal,spatialReference:e.context.spatialReference,console:e.context.console,lrucache:e.context.lrucache,interceptor:e.context.interceptor,services:e.context.services,localScope:{},globalScope:e.context.globalScope,depthCounter:e.context.depthCounter+1};if(t.depthCounter>64)throw new Error("Exceeded maximum function depth");return te(e.definition,t,arguments)}}Object(N.a)(Z,x),Object(w.a)(Z,x),Object(S.a)(Z,x),Object(I.a)(Z,x),Object(m.a)(Z,x),Object(T.a)(Z,x),Object(R.registerFunctions)({functions:Z,compiled:!1,signatures:null,failDefferred:null,evaluateIdentifier:null,arcadeCustomFunctionHandler:null,mode:"async",standardFunction:x,standardFunctionAsync:M}),Z.typeof=function(e,t){return x(e,t,(function(e,t,n){Object(p.J)(n,1,1);var r=K(n[0]);if("Unrecognised Type"===r)throw new Error("Unrecognised Type");return r}))},Z.iif=function(e,t){return Object(c.c)((function(n,r){Object(p.J)(null===t.arguments?[]:t.arguments,3,3),F(e,t.arguments[0]).then((function(a){try{if(!1===Object(p.C)(a))return void r(new Error("IF Function must have a boolean test condition"));Object(c.b)([F(e,t.arguments[1]),F(e,t.arguments[2])]).then((function(e){n(a?e[0]:e[1])}),r)}catch(o){r(o)}}),r)}))},Z.decode=function(e,t){return Object(c.c)((function(n,r){t.arguments.length<2?r(new Error("Missing Parameters")):2!==t.arguments.length?(t.arguments.length-1)%2!=0?F(e,t.arguments[0]).then((function(c){try{W(e,t,1,c).then(n,r)}catch(a){r(a)}}),r):r(new Error("Must have a default value result.")):F(e,t.arguments[1]).then(n,r)}))},Z.when=function(e,t){try{return t.arguments.length<3?P("Missing Parameters"):t.arguments.length%2==0?P("Must have a default value result."):F(e,t.arguments[0]).then((function(n){return Object(c.c)((function(r,c){!1!==Object(p.C)(n)?X(e,t,0,n).then(r,c):c(new Error("WHEN needs boolean test conditions"))}))}))}catch(n){return P(n)}},Z.sort=function(e,t){return M(e,t,(function(e,t,n){Object(p.J)(n,1,2);var r=n[0];if(Object(p.v)(r)&&(r=r.toArray()),!1===Object(p.u)(r))return P(Error("Illegal Argument"));if(n.length>1)return!1===Object(p.w)(n[1])?P(Error("Illegal Argument")):Q(r,re(n[1]));var a=r;if(0===a.length)return Object(c.s)([]);for(var o={},i=0;i<a.length;i++){var u=K(a[i]);""!==u&&(o[u]=!0)}if(!0===o.Array||!0===o.Dictionary||!0===o.Feature||!0===o.Point||!0===o.Polygon||!0===o.Polyline||!0===o.Multipoint||!0===o.Extent||!0===o.Function)return Object(c.s)(a.slice(0));var l=0,s="";for(var f in o)l++,s=f;return l>1||"String"===s?a=ee(a,(function(e,t){if(null==e||e===p.P)return null==t||t===p.P?0:1;if(null==t||t===p.P)return-1;var n=Object(p.x)(e),r=Object(p.x)(t);return n<r?-1:n===r?0:1})):"Number"===s?a=ee(a,(function(e,t){return e-t})):"Boolean"===s?a=ee(a,(function(e,t){return e===t?0:t?-1:1})):"Date"===s&&(a=ee(a,(function(e,t){return t-e}))),Object(c.s)(a)}))};var ce={failDefferred:P,resolveDeffered:C,fixSpatialReference:p.z,parseArguments:U,standardFunction:x,standardFunctionAsync:M,evaluateIdentifier:q,arcadeCustomFunction:re};for(var ae in Z)Z[ae]={value:new p.n(Z[ae]),valueset:!0,node:null};var oe=function(){};function ie(e){console.log(e)}(oe.prototype=Z).infinity={value:Number.POSITIVE_INFINITY,valueset:!0,node:null},oe.prototype.pi={value:Math.PI,valueset:!0,node:null};var ue=ce;function le(e){for(var t={mode:"async",compiled:!1,functions:{},signatures:[],standardFunction:x,standardFunctionAsync:M,failDefferred:P,evaluateIdentifier:q,arcadeCustomFunctionHandler:re},n=0;n<e.length;n++)e[n].registerFunctions(t);for(var r in t.functions)Z[r]={value:new p.n(t.functions[r]),valueset:!0,node:null},oe.prototype[r]=Z[r];for(var c=0;c<t.signatures.length;c++)Object(y.a)(t.signatures[c],"async")}function se(e,t){var n=t.spatialReference;null==n&&(n=new a.a({wkid:102100}));var r=function(e,t){var n=new oe;null==e&&(e={}),null==t&&(t={});var r=new d.a({newline:"\n",tab:"\t",singlequote:"'",doublequote:'"',forwardslash:"/",backwardslash:"\\"});for(var c in r.immutable=!1,n.textformatting={value:r,valueset:!0,node:null},t)n[c]={value:new p.n(t[c]),native:!0,valueset:!0,node:null};for(var a in e)e[a]&&"esri.Graphic"===e[a].declaredClass?n[a]={value:g.a.createFromGraphic(e[a]),valueset:!0,node:null}:n[a]={value:e[a],valueset:!0,node:null};return n}(t.vars,t.customfunctions);return F({spatialReference:n,services:t.services,abortSignal:void 0===t.abortSignal||null===t.abortSignal?{aborted:!1}:t.abortSignal,globalScope:r,console:t.console?t.console:ie,lrucache:t.lrucache,interceptor:t.interceptor,localScope:null,depthCounter:1},e.body[0].body).then((function(e){return Object(c.c)((function(t,n){e instanceof p.r&&(e=e.value),e instanceof p.i&&(e=e.value),e===p.P&&(e=null),e!==p.G?e!==p.H?e instanceof p.n||e instanceof b.a?n(new Error("Cannot return FUNCTION")):t(e):n(new Error("Cannot return CONTINUE")):n(new Error("Cannot return BREAK"))}))}))}function fe(e,t){return Object(y.c)(e)}function be(e,t){return Object(y.j)(e,t,"full")}function he(e,t){return Object(y.h)(e,t)}function Oe(e,t){return Object(y.g)(e,t)}function pe(e){return Object(y.d)(e)}}}]);
//# sourceMappingURL=154.793fff90.chunk.js.map