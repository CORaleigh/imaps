(this.webpackJsonpimaps=this.webpackJsonpimaps||[]).push([[126,247],{102:function(t,e,r){"use strict";r.d(e,"a",(function(){return f})),r.d(e,"b",(function(){return d})),r.d(e,"c",(function(){return h})),r.d(e,"d",(function(){return u})),r.d(e,"e",(function(){return c})),r.d(e,"f",(function(){return a})),r.d(e,"g",(function(){return l})),r.d(e,"h",(function(){return i})),r.d(e,"i",(function(){return o})),r.d(e,"j",(function(){return p})),r.d(e,"k",(function(){return s}));const n=/^-?(\d+(\.\d+)?)\s*((px)|(pt))?$/i;function i(t){return t?t/72*96:0}function o(t){return t?72*t/96:0}function s(t){if("string"==typeof t){if(n.test(t)){const e=t.match(n),r=Number(e[1]),i=e[3]&&e[3].toLowerCase(),s="-"===t.charAt(0),a="px"===i?o(r):r;return s?-a:a}return console.warn("screenUtils.toPt: input not recognized!"),null}return t}function a(t=0,e=0){return{x:t,y:e}}function l(t=0,e=0){return[t,e]}function u(t=0,e=0){return[t,e]}function c(t=0,e=0,r=0){return[t,e,r]}function f(t){return t}function d(t){return t}function h(t){return t}function p(t,e){return e?(e[0]=t.x,e[1]=t.y,e.length>2&&(e[2]=0),e):[t.x,t.y]}},1056:function(t,e,r){"use strict";r.d(e,"a",(function(){return s}));var n=r(89),i=r(698),o=r(310);class s{constructor(t){if(t instanceof i.a)this._tilemapCache=t;else{if(!t||!("index"in t))throw new Error("Invalid tilemap!");this._tilemap=t.index}}dataKey(t,e){if(this._tilemapCache){const{level:r,row:i,col:s}=t,a=new o.a(t);return this._tilemapCache.fetchAvailabilityUpsample(r,i,s,a,e).then((()=>(a.world=t.world,a))).catch((t=>{if(Object(n.m)(t))throw t;return null}))}return this._getIndexedDataKey(t)}forEach(t,e,r,n,i){this._callback=i,this._maxLevel=e+t,this._forEach(this._tilemap,e,r,n)}_forEach(t,e,r,n){0!==t&&(this._callback(e,r,n),e!==this._maxLevel&&"object"==typeof t&&(this._forEach(t[0],e+1,2*r,2*n),this._forEach(t[1],e+1,2*r,2*n+1),this._forEach(t[2],e+1,2*r+1,2*n),this._forEach(t[3],e+1,2*r+1,2*n+1)))}_getIndexedDataKey(t){const e=[t];if(t.level<0||t.row<0||t.col<0||t.row>>t.level>0||t.col>>t.level>0)return Promise.resolve(null);let r=t;for(;0!==r.level;)r=new o.a(r.level-1,r.row>>1,r.col>>1,r.world),e.push(r);let n,i,s=this._tilemap,a=e.pop();if(1===s)return Promise.resolve(a);for(;e.length;)if(n=e.pop(),i=(1&n.col)+((1&n.row)<<1),s){if(0===s[i]){a=null;break}if(1===s[i]){a=n;break}a=n,s=s[i]}return Promise.resolve(a)}}},114:function(t,e,r){"use strict";r.d(e,"a",(function(){return x})),r.d(e,"b",(function(){return S})),r.d(e,"c",(function(){return u})),r.d(e,"d",(function(){return E})),r.d(e,"e",(function(){return s})),r.d(e,"f",(function(){return M})),r.d(e,"g",(function(){return A})),r.d(e,"h",(function(){return w})),r.d(e,"i",(function(){return _})),r.d(e,"j",(function(){return a})),r.d(e,"k",(function(){return j})),r.d(e,"l",(function(){return L})),r.d(e,"m",(function(){return n})),r.d(e,"n",(function(){return F})),r.d(e,"o",(function(){return i})),r.d(e,"p",(function(){return P})),r.d(e,"q",(function(){return h})),r.d(e,"r",(function(){return p})),r.d(e,"s",(function(){return m})),r.d(e,"t",(function(){return y})),r.d(e,"u",(function(){return d})),r.d(e,"v",(function(){return f})),r.d(e,"w",(function(){return b})),r.d(e,"x",(function(){return g})),r.d(e,"y",(function(){return O})),r.d(e,"z",(function(){return v})),r.d(e,"A",(function(){return c})),r.d(e,"B",(function(){return l})),r.d(e,"C",(function(){return I})),r.d(e,"D",(function(){return o})),r.d(e,"E",(function(){return R})),r.d(e,"F",(function(){return U})),r.d(e,"G",(function(){return T}));const n=1e-30,i=4294967295,o=512,s=8,a=29,l=8,u={metrics:{width:15,height:17,left:0,top:-7,advance:14}},c=0,f=0,d=0,h=1,p=2,m=3,y=4,b=5,g=6,O=5,v=6,x=1,S=2,j=2,w=1,A=2,M=4,I=1.05,_=6,T=5,U=6,R=1.15,P=2,E=8,F=500,L=10},115:function(t,e,r){"use strict";r.d(e,"a",(function(){return z})),r.d(e,"b",(function(){return B})),r.d(e,"c",(function(){return g})),r.d(e,"d",(function(){return S})),r.d(e,"e",(function(){return j})),r.d(e,"f",(function(){return y})),r.d(e,"g",(function(){return m})),r.d(e,"h",(function(){return w})),r.d(e,"i",(function(){return _})),r.d(e,"j",(function(){return A})),r.d(e,"k",(function(){return tt})),r.d(e,"l",(function(){return p})),r.d(e,"m",(function(){return c})),r.d(e,"n",(function(){return d})),r.d(e,"o",(function(){return v})),r.d(e,"p",(function(){return M})),r.d(e,"q",(function(){return I})),r.d(e,"r",(function(){return T})),r.d(e,"s",(function(){return W})),r.d(e,"t",(function(){return q})),r.d(e,"u",(function(){return $})),r.d(e,"v",(function(){return V})),r.d(e,"w",(function(){return D})),r.d(e,"x",(function(){return G})),r.d(e,"y",(function(){return b})),r.d(e,"z",(function(){return Q})),r.d(e,"A",(function(){return Z}));var n=r(88),i=r(85),o=r(116),s=r(164),a=r(153);const l=["field","field2","field3","normalizationField","rotationInfo.field","proportionalSymbolInfo.field","proportionalSymbolInfo.normalizationField","colorInfo.field","colorInfo.normalizationField"],u=["field","normalizationField"];function c(t,e){if(null!=t&&null!=e)for(const r of Array.isArray(t)?t:[t])if(f(l,r,e),"visualVariables"in r&&r.visualVariables)for(const t of r.visualVariables)f(u,t,e)}function f(t,e,r){if(t)for(const n of t){const t=Object(o.b)(n,e),i=t&&"function"!=typeof t&&r.get(t);i&&Object(o.c)(n,i.name,e)}}function d(t,e){if(null!=t&&null!=e&&e.fields.length)if("startField"in t){const r=e.get(t.startField),n=e.get(t.endField);t.startField=r&&r.name||null,t.endField=n&&n.name||null}else{const r=e.get(t.startTimeField),n=e.get(t.endTimeField);t.startTimeField=r&&r.name||null,t.endTimeField=n&&n.name||null}}const h=new Set;function p(t,e){return t&&e?(h.clear(),m(h,t,e),Array.from(h).sort()):[]}function m(t,e,r){var n;if(r)if(null!=e&&null!=(n=e.fields)&&n.length)if(r.includes("*"))for(const{name:i}of e.fields)t.add(i);else for(const i of r)y(t,e,i);else{if(r.includes("*"))return t.clear(),void t.add("*");for(const e of r)t.add(e)}}function y(t,e,r){if("string"==typeof r)if(e){const n=e.get(r);n&&t.add(n.name)}else t.add(r)}function b(t,e){return Object(i.j)(e)||Object(i.j)(t)?[]:e.includes("*")?t.fields.map((t=>t.name)):e}async function g(t,e,r){var n;if(!r)return;const{arcadeUtils:i}=await Object(a.e)(),o=i.extractFieldNames(r,null==e||null==(n=e.fields)?void 0:n.map((t=>t.name)));for(const s of o)y(t,e,s)}async function O(t,e,i){if(i&&"1=1"!==i){const o=(await Promise.all([r.e(11),r.e(247)]).then(r.bind(null,346))).WhereClause.create(i,e);if(!o.isStandardized)throw new n.a("fieldUtils:collectFilterFields","Where clause is not standardized");m(t,e,o.fieldNames)}}function v({displayField:t,fields:e}){return t||(e&&e.length?x(e,"name-or-title")||x(e,"unique-identifier")||x(e,"type-or-category")||function(t){for(const e of t){if(!e||!e.name)continue;const t=e.name.toLowerCase();if(t.indexOf("name")>-1||t.indexOf("title")>-1)return e.name}return null}(e):null)}function x(t,e){for(const r of t)if(r&&r.valueType&&r.valueType===e)return r.name;return null}async function S(t,e){if(!e)return;const r=Object(o.b)("elevationInfo.featureExpressionInfo",e);return r?r.collectRequiredFields(t,e.fieldsIndex):void 0}async function j(t,e,r){var n;if(!e||!r||"cluster"!==r.type)return;const i=[];null!=(n=r.popupTemplate)&&n.expressionInfos&&i.push(...r.popupTemplate.expressionInfos.map((r=>g(t,e.fieldsIndex,r.expression)))),r.fields&&i.push(...r.fields.map((r=>async function(t,e,r){r.outStatistic.onStatisticValueExpression?g(t,e,r.outStatistic.onStatisticValueExpression):t.add(r.outStatistic.onStatisticField)}(t,e.fieldsIndex,r)))),await Promise.all(i)}async function w(t,e,r){e&&(e.timeInfo&&Object(i.k)(r)&&r.timeExtent&&m(t,e.fieldsIndex,[e.timeInfo.startField,e.timeInfo.endField]),e.floorInfo&&m(t,e.fieldsIndex,[e.floorInfo.floorField]),Object(i.k)(r)&&Object(i.k)(r.where)&&await O(t,e.fieldsIndex,r.where))}async function A(t,e,r){e&&r&&await Promise.all(r.map((r=>async function(t,e,r){e&&r&&(r.valueExpression?await g(t,e.fieldsIndex,r.valueExpression):r.field&&y(t,e.fieldsIndex,r.field))}(t,e,r))))}function M(t){if(!t)return[];const e="editFieldsInfo"in t&&t.editFieldsInfo;return e?p(t.fieldsIndex,[e&&e.creatorField,e&&e.creationDateField,e&&e.editorField,e&&e.editDateField]):[]}function I(t){if(!t)return[];const e=t.geometryFieldsInfo;return e?p(t.fieldsIndex,[e.shapeAreaField,e.shapeLengthField]):[]}async function _(t,e){const{labelingInfo:r,fieldsIndex:n}=e;r&&r.length&&await Promise.all(r.map((e=>async function(t,e,r){if(!r)return;const n=r.getLabelExpression(),i=r.where;if("arcade"===n.type)await g(t,e,n.expression);else{const r=n.expression.match(/{[^}]*}/g);r&&r.forEach((r=>{y(t,e,r.slice(1,-1))}))}await O(t,e,i)}(t,n,e))))}function T(t){const e=t.defaultValue;return void 0!==e&&C(t,e)?e:t.nullable?null:void 0}function U(t){return"number"==typeof t&&!isNaN(t)&&isFinite(t)}function R(t){return null===t||U(t)}const P="isInteger"in Number?Number.isInteger:t=>"number"==typeof t&&isFinite(t)&&Math.floor(t)===t;function E(t){return null===t||P(t)}function F(t){return null!=t&&"string"==typeof t}function L(t){return null===t||F(t)}function N(){return!0}function C(t,e){let r;switch(t.type){case"date":case"integer":case"long":case"small-integer":case"esriFieldTypeDate":case"esriFieldTypeInteger":case"esriFieldTypeLong":case"esriFieldTypeSmallInteger":r=t.nullable?E:P;break;case"double":case"single":case"esriFieldTypeSingle":case"esriFieldTypeDouble":r=t.nullable?R:U;break;case"string":case"esriFieldTypeString":r=t.nullable?L:F;break;default:r=N}return 1===arguments.length?r:r(e)}const D=["integer","small-integer","single","double"],k=new Set([...D,"esriFieldTypeInteger","esriFieldTypeSmallInteger","esriFieldTypeSingle","esriFieldTypeDouble"]);function $(t){return null!=t&&k.has(t.type)}function V(t){return null!=t&&("string"===t.type||"esriFieldTypeString"===t.type)}function q(t){return null!=t&&("date"===t.type||"esriFieldTypeDate"===t.type)}var z,B;function G(t){return null==t||"number"==typeof t&&isNaN(t)?null:t}function Q(t,e){return t.nullable&&null===e?null:$(t)&&!function(t,e){const r="string"==typeof t?K(t):t;return!!r&&(r.isInteger?P(e)&&e>=r.min&&e<=r.max:e>=r.min&&e<=r.max)}(t.type,Number(e))?z.OUT_OF_RANGE:C(t,e)?t.domain?Object(s.e)(t.domain,e):null:B.INVALID_TYPE}function W(t){return Object(s.c)(t.domain)||($(t)?K(t.type):void 0)}function K(t){switch(t){case"esriFieldTypeSmallInteger":case"small-integer":return J;case"esriFieldTypeInteger":case"integer":return X;case"esriFieldTypeSingle":case"single":return H;case"esriFieldTypeDouble":case"double":return Y}}(z||(z={})).OUT_OF_RANGE="numeric-range-validation-error::out-of-range",function(t){t.INVALID_TYPE="type-validation-error::invalid-type"}(B||(B={}));const J={min:-32768,max:32767,isInteger:!0},X={min:-2147483648,max:2147483647,isInteger:!0},H={min:-34e37,max:12e37,isInteger:!1},Y={min:-Number.MAX_VALUE,max:Number.MAX_VALUE,isInteger:!1};function Z(t,e,r){switch(t){case s.a.INVALID_CODED_VALUE:return`Value ${r} is not in the coded domain - field: ${e.name}, domain: ${JSON.stringify(e.domain)}`;case s.a.VALUE_OUT_OF_RANGE:return`Value ${r} is out of the range of valid values - field: ${e.name}, domain: ${JSON.stringify(e.domain)}`;case B.INVALID_TYPE:return`Value ${r} is not a valid value for the field type - field: ${e.name}, type: ${e.type}, nullable: ${e.nullable}`;case z.OUT_OF_RANGE:{const{min:t,max:n}=K(e.type);return`Value ${r} is out of range for the number type - field: ${e.name}, type: ${e.type}, value range is ${t} to ${n}`}}}function tt(t,e){return!function(t,e,r){if(!e||!e.attributes||!t){if(Object(i.k)(r))for(const e of t)r.add(e);return!0}const n=e.attributes;let o=!1;for(const s of t)if(!(s in n)){if(o=!0,!Object(i.k)(r))break;r.add(s)}return o}(t,e,null)}},125:function(t,e,r){"use strict";r.d(e,"a",(function(){return _})),r.d(e,"b",(function(){return p})),r.d(e,"c",(function(){return b})),r.d(e,"d",(function(){return g})),r.d(e,"e",(function(){return s})),r.d(e,"f",(function(){return w})),r.d(e,"g",(function(){return O})),r.d(e,"h",(function(){return v})),r.d(e,"i",(function(){return S})),r.d(e,"j",(function(){return x})),r.d(e,"k",(function(){return a})),r.d(e,"l",(function(){return o})),r.d(e,"m",(function(){return M})),r.d(e,"n",(function(){return d})),r.d(e,"o",(function(){return f})),r.d(e,"p",(function(){return h})),r.d(e,"q",(function(){return u})),r.d(e,"r",(function(){return l})),r.d(e,"s",(function(){return y})),r.d(e,"t",(function(){return j})),r.d(e,"u",(function(){return A})),r.d(e,"v",(function(){return c})),r.d(e,"w",(function(){return m}));r(79),r(108);var n=r(85),i=r(99);function o(t=T){return[t[0],t[1],t[2],t[3]]}function s(t){return[t[0],t[1],t[2],t[3]]}function a(t,e){return t!==e&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3]),t}function l(t,e,r,n,i=o()){return i[0]=t,i[1]=e,i[2]=r,i[3]=n,i}function u(t,e=o()){return e[0]=t.xmin,e[1]=t.ymin,e[2]=t.xmax,e[3]=t.ymax,e}function c(t,e){return new i.a({xmin:t[0],ymin:t[1],xmax:t[2],ymax:t[3],spatialReference:e})}function f(t,e){e[0]<t[0]&&(t[0]=e[0]),e[0]>t[2]&&(t[2]=e[0]),e[1]<t[1]&&(t[1]=e[1]),e[1]>t[3]&&(t[3]=e[1])}function d(t,e,r){if(Object(n.j)(e))a(r,t);else if("length"in e)I(e)?(r[0]=Math.min(t[0],e[0]),r[1]=Math.min(t[1],e[1]),r[2]=Math.max(t[2],e[2]),r[3]=Math.max(t[3],e[3])):2!==e.length&&3!==e.length||(r[0]=Math.min(t[0],e[0]),r[1]=Math.min(t[1],e[1]),r[2]=Math.max(t[2],e[0]),r[3]=Math.max(t[3],e[1]));else switch(e.type){case"extent":r[0]=Math.min(t[0],e.xmin),r[1]=Math.min(t[1],e.ymin),r[2]=Math.max(t[2],e.xmax),r[3]=Math.max(t[3],e.ymax);break;case"point":r[0]=Math.min(t[0],e.x),r[1]=Math.min(t[1],e.y),r[2]=Math.max(t[2],e.x),r[3]=Math.max(t[3],e.y)}}function h(t,e,r=t){const n=e.length;let i=t[0],o=t[1],s=t[2],a=t[3];for(let l=0;l<n;l++){const t=e[l];i=Math.min(i,t[0]),o=Math.min(o,t[1]),s=Math.max(s,t[0]),a=Math.max(a,t[1])}return r[0]=i,r[1]=o,r[2]=s,r[3]=a,r}function p(t){for(let e=0;e<4;e++)if(!isFinite(t[e]))return!1;return!0}function m(t){return Object(n.j)(t)||t[0]>=t[2]?0:t[2]-t[0]}function y(t){return t[1]>=t[3]?0:t[3]-t[1]}function b(t){return m(t)*y(t)}function g(t,e=[0,0]){return e[0]=(t[0]+t[2])/2,e[1]=(t[1]+t[3])/2,e}function O(t,e){return x(t,e[0],e[1])}function v(t,e){return x(t,e.x,e.y)}function x(t,e,r){return e>=t[0]&&r>=t[1]&&e<=t[2]&&r<=t[3]}function S(t,e,r){return e[0]>=t[0]-r&&e[1]>=t[1]-r&&e[0]<=t[2]+r&&e[1]<=t[3]+r}function j(t,e){return Math.max(e[0],t[0])<=Math.min(e[2],t[2])&&Math.max(e[1],t[1])<=Math.min(e[3],t[3])}function w(t,e){return e[0]>=t[0]&&e[2]<=t[2]&&e[1]>=t[1]&&e[3]<=t[3]}function A(t,e,r,n=t){return n[0]=t[0]+e,n[1]=t[1]+r,n[2]=t[2]+e,n[3]=t[3]+r,n}function M(t){return t?a(t,_):o(_)}function I(t){return null!=t&&4===t.length}const _=[1/0,1/0,-1/0,-1/0],T=[0,0,0,0]},138:function(t,e,r){"use strict";r.d(e,"a",(function(){return v})),r.d(e,"b",(function(){return l})),r.d(e,"c",(function(){return u})),r.d(e,"d",(function(){return p})),r.d(e,"e",(function(){return h})),r.d(e,"f",(function(){return o})),r.d(e,"g",(function(){return d})),r.d(e,"h",(function(){return U})),r.d(e,"i",(function(){return T})),r.d(e,"j",(function(){return a})),r.d(e,"k",(function(){return m})),r.d(e,"l",(function(){return A})),r.d(e,"m",(function(){return I})),r.d(e,"n",(function(){return c})),r.d(e,"o",(function(){return O})),r.d(e,"p",(function(){return M})),r.d(e,"q",(function(){return R})),r.d(e,"r",(function(){return y})),r.d(e,"s",(function(){return s})),r.d(e,"t",(function(){return f})),r.d(e,"u",(function(){return b})),r.d(e,"v",(function(){return j})),r.d(e,"w",(function(){return g})),r.d(e,"x",(function(){return w}));var n=r(101),i=r(171);function o(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function s(t,e,r,n,i,o,s,a,l,u,c,f,d,h,p,m,y){return t[0]=e,t[1]=r,t[2]=n,t[3]=i,t[4]=o,t[5]=s,t[6]=a,t[7]=l,t[8]=u,t[9]=c,t[10]=f,t[11]=d,t[12]=h,t[13]=p,t[14]=m,t[15]=y,t}function a(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function l(t,e){if(t===e){const r=e[1],n=e[2],i=e[3],o=e[6],s=e[7],a=e[11];t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=r,t[6]=e[9],t[7]=e[13],t[8]=n,t[9]=o,t[11]=e[14],t[12]=i,t[13]=s,t[14]=a}else t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=e[1],t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=e[2],t[9]=e[6],t[10]=e[10],t[11]=e[14],t[12]=e[3],t[13]=e[7],t[14]=e[11],t[15]=e[15];return t}function u(t,e){const r=e[0],n=e[1],i=e[2],o=e[3],s=e[4],a=e[5],l=e[6],u=e[7],c=e[8],f=e[9],d=e[10],h=e[11],p=e[12],m=e[13],y=e[14],b=e[15],g=r*a-n*s,O=r*l-i*s,v=r*u-o*s,x=n*l-i*a,S=n*u-o*a,j=i*u-o*l,w=c*m-f*p,A=c*y-d*p,M=c*b-h*p,I=f*y-d*m,_=f*b-h*m,T=d*b-h*y;let U=g*T-O*_+v*I+x*M-S*A+j*w;return U?(U=1/U,t[0]=(a*T-l*_+u*I)*U,t[1]=(i*_-n*T-o*I)*U,t[2]=(m*j-y*S+b*x)*U,t[3]=(d*S-f*j-h*x)*U,t[4]=(l*M-s*T-u*A)*U,t[5]=(r*T-i*M+o*A)*U,t[6]=(y*v-p*j-b*O)*U,t[7]=(c*j-d*v+h*O)*U,t[8]=(s*_-a*M+u*w)*U,t[9]=(n*M-r*_-o*w)*U,t[10]=(p*S-m*v+b*g)*U,t[11]=(f*v-c*S-h*g)*U,t[12]=(a*A-s*I-l*w)*U,t[13]=(r*I-n*A+i*w)*U,t[14]=(m*O-p*x-y*g)*U,t[15]=(c*x-f*O+d*g)*U,t):null}function c(t,e,r){const n=e[0],i=e[1],o=e[2],s=e[3],a=e[4],l=e[5],u=e[6],c=e[7],f=e[8],d=e[9],h=e[10],p=e[11],m=e[12],y=e[13],b=e[14],g=e[15];let O=r[0],v=r[1],x=r[2],S=r[3];return t[0]=O*n+v*a+x*f+S*m,t[1]=O*i+v*l+x*d+S*y,t[2]=O*o+v*u+x*h+S*b,t[3]=O*s+v*c+x*p+S*g,O=r[4],v=r[5],x=r[6],S=r[7],t[4]=O*n+v*a+x*f+S*m,t[5]=O*i+v*l+x*d+S*y,t[6]=O*o+v*u+x*h+S*b,t[7]=O*s+v*c+x*p+S*g,O=r[8],v=r[9],x=r[10],S=r[11],t[8]=O*n+v*a+x*f+S*m,t[9]=O*i+v*l+x*d+S*y,t[10]=O*o+v*u+x*h+S*b,t[11]=O*s+v*c+x*p+S*g,O=r[12],v=r[13],x=r[14],S=r[15],t[12]=O*n+v*a+x*f+S*m,t[13]=O*i+v*l+x*d+S*y,t[14]=O*o+v*u+x*h+S*b,t[15]=O*s+v*c+x*p+S*g,t}function f(t,e,r){const n=r[0],i=r[1],o=r[2];let s,a,l,u,c,f,d,h,p,m,y,b;return e===t?(t[12]=e[0]*n+e[4]*i+e[8]*o+e[12],t[13]=e[1]*n+e[5]*i+e[9]*o+e[13],t[14]=e[2]*n+e[6]*i+e[10]*o+e[14],t[15]=e[3]*n+e[7]*i+e[11]*o+e[15]):(s=e[0],a=e[1],l=e[2],u=e[3],c=e[4],f=e[5],d=e[6],h=e[7],p=e[8],m=e[9],y=e[10],b=e[11],t[0]=s,t[1]=a,t[2]=l,t[3]=u,t[4]=c,t[5]=f,t[6]=d,t[7]=h,t[8]=p,t[9]=m,t[10]=y,t[11]=b,t[12]=s*n+c*i+p*o+e[12],t[13]=a*n+f*i+m*o+e[13],t[14]=l*n+d*i+y*o+e[14],t[15]=u*n+h*i+b*o+e[15]),t}function d(t,e,r){const n=r[0],i=r[1],o=r[2];return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*i,t[5]=e[5]*i,t[6]=e[6]*i,t[7]=e[7]*i,t[8]=e[8]*o,t[9]=e[9]*o,t[10]=e[10]*o,t[11]=e[11]*o,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function h(t,e,r,n){let o,s,a,l,u,c,f,d,h,p,m,y,b,g,O,v,x,S,j,w,A,M,I,_,T=n[0],U=n[1],R=n[2],P=Math.sqrt(T*T+U*U+R*R);return P<i.a?null:(P=1/P,T*=P,U*=P,R*=P,o=Math.sin(r),s=Math.cos(r),a=1-s,l=e[0],u=e[1],c=e[2],f=e[3],d=e[4],h=e[5],p=e[6],m=e[7],y=e[8],b=e[9],g=e[10],O=e[11],v=T*T*a+s,x=U*T*a+R*o,S=R*T*a-U*o,j=T*U*a-R*o,w=U*U*a+s,A=R*U*a+T*o,M=T*R*a+U*o,I=U*R*a-T*o,_=R*R*a+s,t[0]=l*v+d*x+y*S,t[1]=u*v+h*x+b*S,t[2]=c*v+p*x+g*S,t[3]=f*v+m*x+O*S,t[4]=l*j+d*w+y*A,t[5]=u*j+h*w+b*A,t[6]=c*j+p*w+g*A,t[7]=f*j+m*w+O*A,t[8]=l*M+d*I+y*_,t[9]=u*M+h*I+b*_,t[10]=c*M+p*I+g*_,t[11]=f*M+m*I+O*_,e!==t&&(t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t)}function p(t,e,r){const n=Math.sin(r),i=Math.cos(r),o=e[4],s=e[5],a=e[6],l=e[7],u=e[8],c=e[9],f=e[10],d=e[11];return e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=o*i+u*n,t[5]=s*i+c*n,t[6]=a*i+f*n,t[7]=l*i+d*n,t[8]=u*i-o*n,t[9]=c*i-s*n,t[10]=f*i-a*n,t[11]=d*i-l*n,t}function m(t,e,r){const n=Math.sin(r),i=Math.cos(r),o=e[0],s=e[1],a=e[2],l=e[3],u=e[8],c=e[9],f=e[10],d=e[11];return e!==t&&(t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=o*i-u*n,t[1]=s*i-c*n,t[2]=a*i-f*n,t[3]=l*i-d*n,t[8]=o*n+u*i,t[9]=s*n+c*i,t[10]=a*n+f*i,t[11]=l*n+d*i,t}function y(t,e,r){const n=Math.sin(r),i=Math.cos(r),o=e[0],s=e[1],a=e[2],l=e[3],u=e[4],c=e[5],f=e[6],d=e[7];return e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=o*i+u*n,t[1]=s*i+c*n,t[2]=a*i+f*n,t[3]=l*i+d*n,t[4]=u*i-o*n,t[5]=c*i-s*n,t[6]=f*i-a*n,t[7]=d*i-l*n,t}function b(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=e[0],t[13]=e[1],t[14]=e[2],t[15]=1,t}function g(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=e[2],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function O(t,e){const r=Math.sin(e),n=Math.cos(e);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=n,t[6]=r,t[7]=0,t[8]=0,t[9]=-r,t[10]=n,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function v(t,e){const r=Math.sin(e),n=Math.cos(e);return t[0]=n,t[1]=r,t[2]=0,t[3]=0,t[4]=-r,t[5]=n,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function x(t,e,r){const n=e[0],i=e[1],o=e[2],s=e[3],a=n+n,l=i+i,u=o+o,c=n*a,f=n*l,d=n*u,h=i*l,p=i*u,m=o*u,y=s*a,b=s*l,g=s*u;return t[0]=1-(h+m),t[1]=f+g,t[2]=d-b,t[3]=0,t[4]=f-g,t[5]=1-(c+m),t[6]=p+y,t[7]=0,t[8]=d+b,t[9]=p-y,t[10]=1-(c+h),t[11]=0,t[12]=r[0],t[13]=r[1],t[14]=r[2],t[15]=1,t}const S=Object(n.e)();function j(t,e){return t[0]=e[12],t[1]=e[13],t[2]=e[14],t}function w(t,e){const r=e[0],n=e[1],i=e[2],o=e[3],s=r+r,a=n+n,l=i+i,u=r*s,c=n*s,f=n*a,d=i*s,h=i*a,p=i*l,m=o*s,y=o*a,b=o*l;return t[0]=1-f-p,t[1]=c+b,t[2]=d-y,t[3]=0,t[4]=c-b,t[5]=1-u-p,t[6]=h+m,t[7]=0,t[8]=d+y,t[9]=h-m,t[10]=1-u-f,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function A(t,e,r,n,i,o,s){const a=1/(r-e),l=1/(i-n),u=1/(o-s);return t[0]=2*o*a,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=2*o*l,t[6]=0,t[7]=0,t[8]=(r+e)*a,t[9]=(i+n)*l,t[10]=(s+o)*u,t[11]=-1,t[12]=0,t[13]=0,t[14]=s*o*2*u,t[15]=0,t}function M(t,e,r,n,i,o,s){const a=1/(e-r),l=1/(n-i),u=1/(o-s);return t[0]=-2*a,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*l,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*u,t[11]=0,t[12]=(e+r)*a,t[13]=(i+n)*l,t[14]=(s+o)*u,t[15]=1,t}function I(t,e,r,n){let o,s,l,u,c,f,d,h,p,m;const y=e[0],b=e[1],g=e[2],O=n[0],v=n[1],x=n[2],S=r[0],j=r[1],w=r[2];return Math.abs(y-S)<i.a&&Math.abs(b-j)<i.a&&Math.abs(g-w)<i.a?a(t):(d=y-S,h=b-j,p=g-w,m=1/Math.sqrt(d*d+h*h+p*p),d*=m,h*=m,p*=m,o=v*p-x*h,s=x*d-O*p,l=O*h-v*d,m=Math.sqrt(o*o+s*s+l*l),m?(m=1/m,o*=m,s*=m,l*=m):(o=0,s=0,l=0),u=h*l-p*s,c=p*o-d*l,f=d*s-h*o,m=Math.sqrt(u*u+c*c+f*f),m?(m=1/m,u*=m,c*=m,f*=m):(u=0,c=0,f=0),t[0]=o,t[1]=u,t[2]=d,t[3]=0,t[4]=s,t[5]=c,t[6]=h,t[7]=0,t[8]=l,t[9]=f,t[10]=p,t[11]=0,t[12]=-(o*y+s*b+l*g),t[13]=-(u*y+c*b+f*g),t[14]=-(d*y+h*b+p*g),t[15]=1,t)}function _(t,e,r){return t[0]=e[0]-r[0],t[1]=e[1]-r[1],t[2]=e[2]-r[2],t[3]=e[3]-r[3],t[4]=e[4]-r[4],t[5]=e[5]-r[5],t[6]=e[6]-r[6],t[7]=e[7]-r[7],t[8]=e[8]-r[8],t[9]=e[9]-r[9],t[10]=e[10]-r[10],t[11]=e[11]-r[11],t[12]=e[12]-r[12],t[13]=e[13]-r[13],t[14]=e[14]-r[14],t[15]=e[15]-r[15],t}function T(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]&&t[9]===e[9]&&t[10]===e[10]&&t[11]===e[11]&&t[12]===e[12]&&t[13]===e[13]&&t[14]===e[14]&&t[15]===e[15]}function U(t,e){const r=t[0],n=t[1],o=t[2],s=t[3],a=t[4],l=t[5],u=t[6],c=t[7],f=t[8],d=t[9],h=t[10],p=t[11],m=t[12],y=t[13],b=t[14],g=t[15],O=e[0],v=e[1],x=e[2],S=e[3],j=e[4],w=e[5],A=e[6],M=e[7],I=e[8],_=e[9],T=e[10],U=e[11],R=e[12],P=e[13],E=e[14],F=e[15];return Math.abs(r-O)<=i.a*Math.max(1,Math.abs(r),Math.abs(O))&&Math.abs(n-v)<=i.a*Math.max(1,Math.abs(n),Math.abs(v))&&Math.abs(o-x)<=i.a*Math.max(1,Math.abs(o),Math.abs(x))&&Math.abs(s-S)<=i.a*Math.max(1,Math.abs(s),Math.abs(S))&&Math.abs(a-j)<=i.a*Math.max(1,Math.abs(a),Math.abs(j))&&Math.abs(l-w)<=i.a*Math.max(1,Math.abs(l),Math.abs(w))&&Math.abs(u-A)<=i.a*Math.max(1,Math.abs(u),Math.abs(A))&&Math.abs(c-M)<=i.a*Math.max(1,Math.abs(c),Math.abs(M))&&Math.abs(f-I)<=i.a*Math.max(1,Math.abs(f),Math.abs(I))&&Math.abs(d-_)<=i.a*Math.max(1,Math.abs(d),Math.abs(_))&&Math.abs(h-T)<=i.a*Math.max(1,Math.abs(h),Math.abs(T))&&Math.abs(p-U)<=i.a*Math.max(1,Math.abs(p),Math.abs(U))&&Math.abs(m-R)<=i.a*Math.max(1,Math.abs(m),Math.abs(R))&&Math.abs(y-P)<=i.a*Math.max(1,Math.abs(y),Math.abs(P))&&Math.abs(b-E)<=i.a*Math.max(1,Math.abs(b),Math.abs(E))&&Math.abs(g-F)<=i.a*Math.max(1,Math.abs(g),Math.abs(F))}function R(t){const e=i.a,r=t[0],n=t[1],o=t[2],s=t[4],a=t[5],l=t[6],u=t[8],c=t[9],f=t[10];return Math.abs(1-(r*r+s*s+u*u))<=e&&Math.abs(1-(n*n+a*a+c*c))<=e&&Math.abs(1-(o*o+l*l+f*f))<=e}const P=c,E=_;Object.freeze({__proto__:null,copy:o,set:s,identity:a,transpose:l,invert:u,adjoint:function(t,e){const r=e[0],n=e[1],i=e[2],o=e[3],s=e[4],a=e[5],l=e[6],u=e[7],c=e[8],f=e[9],d=e[10],h=e[11],p=e[12],m=e[13],y=e[14],b=e[15];return t[0]=a*(d*b-h*y)-f*(l*b-u*y)+m*(l*h-u*d),t[1]=-(n*(d*b-h*y)-f*(i*b-o*y)+m*(i*h-o*d)),t[2]=n*(l*b-u*y)-a*(i*b-o*y)+m*(i*u-o*l),t[3]=-(n*(l*h-u*d)-a*(i*h-o*d)+f*(i*u-o*l)),t[4]=-(s*(d*b-h*y)-c*(l*b-u*y)+p*(l*h-u*d)),t[5]=r*(d*b-h*y)-c*(i*b-o*y)+p*(i*h-o*d),t[6]=-(r*(l*b-u*y)-s*(i*b-o*y)+p*(i*u-o*l)),t[7]=r*(l*h-u*d)-s*(i*h-o*d)+c*(i*u-o*l),t[8]=s*(f*b-h*m)-c*(a*b-u*m)+p*(a*h-u*f),t[9]=-(r*(f*b-h*m)-c*(n*b-o*m)+p*(n*h-o*f)),t[10]=r*(a*b-u*m)-s*(n*b-o*m)+p*(n*u-o*a),t[11]=-(r*(a*h-u*f)-s*(n*h-o*f)+c*(n*u-o*a)),t[12]=-(s*(f*y-d*m)-c*(a*y-l*m)+p*(a*d-l*f)),t[13]=r*(f*y-d*m)-c*(n*y-i*m)+p*(n*d-i*f),t[14]=-(r*(a*y-l*m)-s*(n*y-i*m)+p*(n*l-i*a)),t[15]=r*(a*d-l*f)-s*(n*d-i*f)+c*(n*l-i*a),t},determinant:function(t){const e=t[0],r=t[1],n=t[2],i=t[3],o=t[4],s=t[5],a=t[6],l=t[7],u=t[8],c=t[9],f=t[10],d=t[11],h=t[12],p=t[13],m=t[14],y=t[15];return(e*s-r*o)*(f*y-d*m)-(e*a-n*o)*(c*y-d*p)+(e*l-i*o)*(c*m-f*p)+(r*a-n*s)*(u*y-d*h)-(r*l-i*s)*(u*m-f*h)+(n*l-i*a)*(u*p-c*h)},multiply:c,translate:f,scale:d,rotate:h,rotateX:p,rotateY:m,rotateZ:y,fromTranslation:b,fromScaling:g,fromRotation:function(t,e,r){let n,o,s,a=r[0],l=r[1],u=r[2],c=Math.sqrt(a*a+l*l+u*u);return c<i.a?null:(c=1/c,a*=c,l*=c,u*=c,n=Math.sin(e),o=Math.cos(e),s=1-o,t[0]=a*a*s+o,t[1]=l*a*s+u*n,t[2]=u*a*s-l*n,t[3]=0,t[4]=a*l*s-u*n,t[5]=l*l*s+o,t[6]=u*l*s+a*n,t[7]=0,t[8]=a*u*s+l*n,t[9]=l*u*s-a*n,t[10]=u*u*s+o,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t)},fromXRotation:O,fromYRotation:function(t,e){const r=Math.sin(e),n=Math.cos(e);return t[0]=n,t[1]=0,t[2]=-r,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=r,t[9]=0,t[10]=n,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},fromZRotation:v,fromRotationTranslation:x,fromQuat2:function(t,e){const r=S,n=-e[0],i=-e[1],o=-e[2],s=e[3],a=e[4],l=e[5],u=e[6],c=e[7],f=n*n+i*i+o*o+s*s;return f>0?(r[0]=2*(a*s+c*n+l*o-u*i)/f,r[1]=2*(l*s+c*i+u*n-a*o)/f,r[2]=2*(u*s+c*o+a*i-l*n)/f):(r[0]=2*(a*s+c*n+l*o-u*i),r[1]=2*(l*s+c*i+u*n-a*o),r[2]=2*(u*s+c*o+a*i-l*n)),x(t,e,r),t},getTranslation:j,getScaling:function(t,e){const r=e[0],n=e[1],i=e[2],o=e[4],s=e[5],a=e[6],l=e[8],u=e[9],c=e[10];return t[0]=Math.sqrt(r*r+n*n+i*i),t[1]=Math.sqrt(o*o+s*s+a*a),t[2]=Math.sqrt(l*l+u*u+c*c),t},getRotation:function(t,e){const r=e[0]+e[5]+e[10];let n=0;return r>0?(n=2*Math.sqrt(r+1),t[3]=.25*n,t[0]=(e[6]-e[9])/n,t[1]=(e[8]-e[2])/n,t[2]=(e[1]-e[4])/n):e[0]>e[5]&&e[0]>e[10]?(n=2*Math.sqrt(1+e[0]-e[5]-e[10]),t[3]=(e[6]-e[9])/n,t[0]=.25*n,t[1]=(e[1]+e[4])/n,t[2]=(e[8]+e[2])/n):e[5]>e[10]?(n=2*Math.sqrt(1+e[5]-e[0]-e[10]),t[3]=(e[8]-e[2])/n,t[0]=(e[1]+e[4])/n,t[1]=.25*n,t[2]=(e[6]+e[9])/n):(n=2*Math.sqrt(1+e[10]-e[0]-e[5]),t[3]=(e[1]-e[4])/n,t[0]=(e[8]+e[2])/n,t[1]=(e[6]+e[9])/n,t[2]=.25*n),t},fromRotationTranslationScale:function(t,e,r,n){const i=e[0],o=e[1],s=e[2],a=e[3],l=i+i,u=o+o,c=s+s,f=i*l,d=i*u,h=i*c,p=o*u,m=o*c,y=s*c,b=a*l,g=a*u,O=a*c,v=n[0],x=n[1],S=n[2];return t[0]=(1-(p+y))*v,t[1]=(d+O)*v,t[2]=(h-g)*v,t[3]=0,t[4]=(d-O)*x,t[5]=(1-(f+y))*x,t[6]=(m+b)*x,t[7]=0,t[8]=(h+g)*S,t[9]=(m-b)*S,t[10]=(1-(f+p))*S,t[11]=0,t[12]=r[0],t[13]=r[1],t[14]=r[2],t[15]=1,t},fromRotationTranslationScaleOrigin:function(t,e,r,n,i){const o=e[0],s=e[1],a=e[2],l=e[3],u=o+o,c=s+s,f=a+a,d=o*u,h=o*c,p=o*f,m=s*c,y=s*f,b=a*f,g=l*u,O=l*c,v=l*f,x=n[0],S=n[1],j=n[2],w=i[0],A=i[1],M=i[2],I=(1-(m+b))*x,_=(h+v)*x,T=(p-O)*x,U=(h-v)*S,R=(1-(d+b))*S,P=(y+g)*S,E=(p+O)*j,F=(y-g)*j,L=(1-(d+m))*j;return t[0]=I,t[1]=_,t[2]=T,t[3]=0,t[4]=U,t[5]=R,t[6]=P,t[7]=0,t[8]=E,t[9]=F,t[10]=L,t[11]=0,t[12]=r[0]+w-(I*w+U*A+E*M),t[13]=r[1]+A-(_*w+R*A+F*M),t[14]=r[2]+M-(T*w+P*A+L*M),t[15]=1,t},fromQuat:w,frustum:A,perspective:function(t,e,r,n,i){const o=1/Math.tan(e/2);let s;return t[0]=o/r,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=o,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=i&&i!==1/0?(s=1/(n-i),t[10]=(i+n)*s,t[14]=2*i*n*s):(t[10]=-1,t[14]=-2*n),t},perspectiveFromFieldOfView:function(t,e,r,n){const i=Math.tan(e.upDegrees*Math.PI/180),o=Math.tan(e.downDegrees*Math.PI/180),s=Math.tan(e.leftDegrees*Math.PI/180),a=Math.tan(e.rightDegrees*Math.PI/180),l=2/(s+a),u=2/(i+o);return t[0]=l,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=u,t[6]=0,t[7]=0,t[8]=-(s-a)*l*.5,t[9]=(i-o)*u*.5,t[10]=n/(r-n),t[11]=-1,t[12]=0,t[13]=0,t[14]=n*r/(r-n),t[15]=0,t},ortho:M,lookAt:I,targetTo:function(t,e,r,n){const i=e[0],o=e[1],s=e[2],a=n[0],l=n[1],u=n[2];let c=i-r[0],f=o-r[1],d=s-r[2],h=c*c+f*f+d*d;h>0&&(h=1/Math.sqrt(h),c*=h,f*=h,d*=h);let p=l*d-u*f,m=u*c-a*d,y=a*f-l*c;return h=p*p+m*m+y*y,h>0&&(h=1/Math.sqrt(h),p*=h,m*=h,y*=h),t[0]=p,t[1]=m,t[2]=y,t[3]=0,t[4]=f*y-d*m,t[5]=d*p-c*y,t[6]=c*m-f*p,t[7]=0,t[8]=c,t[9]=f,t[10]=d,t[11]=0,t[12]=i,t[13]=o,t[14]=s,t[15]=1,t},str:function(t){return"mat4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+", "+t[9]+", "+t[10]+", "+t[11]+", "+t[12]+", "+t[13]+", "+t[14]+", "+t[15]+")"},frob:function(t){return Math.sqrt(t[0]**2+t[1]**2+t[2]**2+t[3]**2+t[4]**2+t[5]**2+t[6]**2+t[7]**2+t[8]**2+t[9]**2+t[10]**2+t[11]**2+t[12]**2+t[13]**2+t[14]**2+t[15]**2)},add:function(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t[2]=e[2]+r[2],t[3]=e[3]+r[3],t[4]=e[4]+r[4],t[5]=e[5]+r[5],t[6]=e[6]+r[6],t[7]=e[7]+r[7],t[8]=e[8]+r[8],t[9]=e[9]+r[9],t[10]=e[10]+r[10],t[11]=e[11]+r[11],t[12]=e[12]+r[12],t[13]=e[13]+r[13],t[14]=e[14]+r[14],t[15]=e[15]+r[15],t},subtract:_,multiplyScalar:function(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t[4]=e[4]*r,t[5]=e[5]*r,t[6]=e[6]*r,t[7]=e[7]*r,t[8]=e[8]*r,t[9]=e[9]*r,t[10]=e[10]*r,t[11]=e[11]*r,t[12]=e[12]*r,t[13]=e[13]*r,t[14]=e[14]*r,t[15]=e[15]*r,t},multiplyScalarAndAdd:function(t,e,r,n){return t[0]=e[0]+r[0]*n,t[1]=e[1]+r[1]*n,t[2]=e[2]+r[2]*n,t[3]=e[3]+r[3]*n,t[4]=e[4]+r[4]*n,t[5]=e[5]+r[5]*n,t[6]=e[6]+r[6]*n,t[7]=e[7]+r[7]*n,t[8]=e[8]+r[8]*n,t[9]=e[9]+r[9]*n,t[10]=e[10]+r[10]*n,t[11]=e[11]+r[11]*n,t[12]=e[12]+r[12]*n,t[13]=e[13]+r[13]*n,t[14]=e[14]+r[14]*n,t[15]=e[15]+r[15]*n,t},exactEquals:T,equals:U,isOrthoNormal:R,mul:P,sub:E})},207:function(t,e,r){"use strict";(function(t){r.d(e,"a",(function(){return o})),r.d(e,"b",(function(){return n})),r.d(e,"c",(function(){return i}));var n="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof t?t:"undefined"!=typeof self?self:{};function i(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function o(t){throw new Error('Could not dynamically require "'+t+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}}).call(this,r(233))},220:function(t,e,r){"use strict";r.d(e,"a",(function(){return o})),r.d(e,"b",(function(){return f})),r.d(e,"c",(function(){return h})),r.d(e,"d",(function(){return a})),r.d(e,"e",(function(){return s})),r.d(e,"f",(function(){return l}));var n=r(85),i=r(96);function o(t,e){const r=e&&e.url&&e.url.path;if(t&&r&&(t=Object(i.A)(t,r,{preserveProtocolRelative:!0}),e.portalItem&&e.readResourcePaths)){const r=Object(i.C)(t,e.portalItem.itemUrl);c.test(r)&&e.readResourcePaths.push(e.portalItem.resourceFromPath(r).path)}return d(t,e&&e.portal)}function s(t,e,r=0){if(!t)return t;!Object(i.s)(t)&&e&&e.blockedRelativeUrls&&e.blockedRelativeUrls.push(t);let n=Object(i.A)(t);if(e){const r=e.verifyItemRelativeUrls&&e.verifyItemRelativeUrls.rootPath||e.url&&e.url.path;if(r){const o=d(r,e.portal);n=Object(i.C)(d(n,e.portal),o,o),n!==t&&e.verifyItemRelativeUrls&&e.verifyItemRelativeUrls.writtenUrls.push(n)}}return n=function(t,e){return e&&!e.isPortal&&e.urlKey&&e.customBaseUrl?Object(i.h)(t,`${e.urlKey}.${e.customBaseUrl}`,e.portalHostname):t}(n,e&&e.portal),Object(i.s)(n)&&(n=Object(i.D)(n)),null!=e&&e.resources&&null!=e&&e.portalItem&&!Object(i.s)(n)&&!Object(i.u)(n)&&0===r&&e.resources.toKeep.push({resource:e.portalItem.resourceFromPath(n)}),n}function a(t,e,r){return o(t,r)}function l(t,e,r,n){const i=s(t,n);void 0!==i&&(e[r]=i)}const u=/\/items\/([^\/]+)\/resources\//,c=/^\.\/resources\//;function f(t){const e=Object(n.k)(t)?t.match(u):null;return Object(n.k)(e)?e[1]:null}function d(t,e){if(!e||e.isPortal||!e.urlKey||!e.customBaseUrl)return t;const r=`${e.urlKey}.${e.customBaseUrl}`;return Object(i.q)(i.g,`${i.g.scheme}://${r}`)?Object(i.h)(t,e.portalHostname,r):Object(i.h)(t,r,e.portalHostname)}var h=Object.freeze({__proto__:null,fromJSON:o,toJSON:s,read:a,write:l,itemIdFromResourceUrl:f})},305:function(t,e,r){"use strict";r.d(e,"a",(function(){return i})),r.d(e,"b",(function(){return o}));var n=r(84);function i(t){const e=Object(n.e)(100*(1-t));return Math.max(0,Math.min(e,100))}function o(t){const e=1-t/100;return Math.max(0,Math.min(e,1))}},310:function(t,e,r){"use strict";r.d(e,"a",(function(){return i}));var n=r(191);class i{constructor(t,e,r,n){this.set(t,e,r,n)}static getId(t,e,r,n){return"object"==typeof t?`${t.level}/${t.row}/${t.col}/${t.world}`:`${t}/${e}/${r}/${n}`}get key(){return this}get id(){return this.toString()}set id(t){this.set(t)}get hash(){const t=4095&this.row,e=4095&this.col,r=63&this.level;return(3&this.world)<<30|e<<22|t<<8|r}acquire(t,e,r,n){this.set(t,e,r,n)}contains(t){const e=t.level-this.level;return this.row===t.row>>e&&this.col===t.col>>e&&this.world===t.world}equals(t){return this.level===t.level&&this.row===t.row&&this.col===t.col&&this.world===t.world}clone(){return new i(this)}release(){this.level=0,this.row=0,this.col=0,this.world=0}set(t,e,r,n){if(null==t)this.level=0,this.row=0,this.col=0,this.world=0;else if("object"==typeof t)this.level=t.level||0,this.row=t.row||0,this.col=t.col||0,this.world=t.world||0;else if("string"==typeof t){const[e,r,n,i]=t.split("/");this.level=parseFloat(e),this.row=parseFloat(r),this.col=parseFloat(n),this.world=parseFloat(i)}else this.level=+t,this.row=+e,this.col=+r,this.world=+n||0;return this}toString(){return`${this.level}/${this.row}/${this.col}/${this.world}`}getParentKey(){return this.level<=0?null:new i(this.level-1,this.row>>1,this.col>>1,this.world)}getChildKeys(){const t=this.level+1,e=this.row<<1,r=this.col<<1,n=this.world;return[new i(t,e,r,n),new i(t,e,r+1,n),new i(t,e+1,r,n),new i(t,e+1,r+1,n)]}compareRowMajor(t){return this.row<t.row?-1:this.row>t.row?1:this.col<t.col?-1:this.col>t.col?1:0}}i.pool=new n.a(i,null,null,25,50)},497:function(t,e,r){"use strict";r.d(e,"a",(function(){return s}));var n=r(85),i=r(837);let o;function s(){return o||(o=function(){const t={available:!1,version:0,majorPerformanceCaveat:!1,maxTextureSize:0,supportsHighPrecisionFragment:!1,supportsVertexShaderSamplers:!1,supportsElementIndexUint:!1,supportsStandardDerivatives:!1,supportsInstancedArrays:!1,supportsTextureFloat:!1,supportsColorBufferFloat:!1};if(void 0===typeof WebGLRenderingContext)return t;const e=document.createElement("canvas");if(!e)return t;let r=Object(i.a)(e,1,{failIfMajorPerformanceCaveat:!0});if(Object(n.j)(r)&&(r=Object(i.a)(e,1),Object(n.k)(r)&&(t.majorPerformanceCaveat=!0)),Object(n.j)(r))return t;const o=r.getParameter(r.VERSION);if(!o)return t;const s=o.match(/^WebGL\s+([\d.]*)/);if(s){const e=parseFloat(s[1]);t.available=e>=.94;const n=r.getShaderPrecisionFormat(r.FRAGMENT_SHADER,r.HIGH_FLOAT);n&&(t.supportsHighPrecisionFragment=n.precision>0),t.supportsVertexShaderSamplers=r.getParameter(r.MAX_VERTEX_TEXTURE_IMAGE_UNITS)>0,t.supportsElementIndexUint=null!==r.getExtension("OES_element_index_uint"),t.supportsStandardDerivatives=null!==r.getExtension("OES_standard_derivatives"),t.supportsInstancedArrays=null!==r.getExtension("ANGLE_instanced_arrays"),t.supportsTextureFloat=null!==r.getExtension("OES_texture_float"),t.supportsColorBufferFloat=null!==r.getExtension("WEBGL_color_buffer_float")&&null!==r.getExtension("EXT_float_blend")}return t.maxTextureSize=r.getParameter(r.MAX_TEXTURE_SIZE),t.version=function(){if(void 0===typeof WebGL2RenderingContext)return!1;const t=document.createElement("canvas");if(!t)return!1;const e=Object(i.a)(t,2);return!!Object(n.k)(e)}()?2:1,t}()),o}},716:function(t,e,r){"use strict";r.d(e,"a",(function(){return o}));var n=r(96),i=r(166);function o(t){return{origin:"portal-item",url:Object(n.K)(t.itemUrl),portal:t.portal||i.a.getDefault(),portalItem:t,readResourcePaths:[]}}},837:function(t,e,r){"use strict";r.d(e,"a",(function(){return o})),r.d(e,"b",(function(){return i}));var n=r(85);function i(t,e,r={}){if(!window.WebGLRenderingContext)return s(t,a),null;const i=o(t,e,r);return Object(n.j)(i)?(s(t,l),null):i}function o(t,e,r={}){const n=1===e?["webgl","experimental-webgl","webkit-3d","moz-webgl"]:["webgl2"];let i=null;for(const o of n){try{i=t.getContext(o,r)}catch(l){}if(i)break}return i}function s(t,e){const r=t.parentNode;r&&(r.innerHTML='<table style="background-color: #8CE; width: 100%; height: 100%;"><tr><td align="center"><div style="display: table-cell; vertical-align: middle;"><div style="">'+e+"</div></div></td></tr></table>")}const a='This page requires a browser that supports WebGL.<br/><a href="http://get.webgl.org">Click here to upgrade your browser.</a>',l='It doesn\'t appear your computer can support WebGL.<br/><a href="http://get.webgl.org/troubleshooting/">Click here for more information.</a>'},889:function(t,e,r){"use strict";function n(t,e,r,n){const i=3*t,o=3*(r-t)-i,s=1-i-o,a=3*e,l=3*(n-e)-a,u=1-a-l;function c(t){return((s*t+o)*t+i)*t}function f(t){return(3*s*t+2*o)*t+i}return function(t,e=1e-6){return function(t){return((u*t+l)*t+a)*t}(function(t,e){let r,n,i,o,s,a;for(i=t,a=0;a<8;a++){if(o=c(i)-t,Math.abs(o)<e)return i;if(s=f(i),Math.abs(s)<1e-6)break;i-=o/s}if(r=0,n=1,i=t,i<r)return r;if(i>n)return n;for(;r<n;){if(o=c(i),Math.abs(o-t)<e)return i;t>o?r=i:n=i,i=.5*(n-r)+r}return i}(t,e))}}r.d(e,"a",(function(){return o})),r.d(e,"b",(function(){return s})),r.d(e,"c",(function(){return n}));const i=/^cubic-bezier\((.*)\)/,o={};function s(t){let e=o[t]||null;if(!e){const r=i.exec(t);if(r){const t=r[1].split(",").map((t=>parseFloat(t.trim())));4!==t.length||t.some((t=>isNaN(t)))||(e=n.apply(n,t))}}return e}o.ease=n(.25,.1,.25,1),o.linear=n(0,0,1,1),o.easeIn=o["ease-in"]=n(.42,0,1,1),o.easeOut=o["ease-out"]=n(0,0,.58,1),o.easeInOut=o["ease-in-out"]=n(.42,0,.58,1)},937:function(t,e,r){"use strict";r.r(e),r.d(e,"default",(function(){return K}));var n=r(81),i=r(100),o=r(88),s=r(145),a=r(87),l=r(202),u=r(89),c=r(96),f=r(83),d=(r(84),r(79),r(80)),h=r(94),p=r(82),m=r(91),y=r(99),b=r(93),g=r(184),O=r(979),v=r(308),x=r(319),S=r(244),j=r(243),w=r(299);const A=d.a.getLogger("esri.layers.support.SpriteSource");class M{constructor(t,e,r,n){this.baseURL=t,this.devicePixelRatio=e,this.maxTextureSize=r,this._spriteImageFormat=n,this._isRetina=!1,this._spritesData={},this.image=null,this.width=null,this.height=null,this.loadStatus="not-loaded"}get spriteNames(){const t=[];for(const e in this._spritesData)t.push(e);return t.sort(),t}getSpriteInfo(t){return this._spritesData[t]}async load(t){if(this.baseURL){this.loadStatus="loading";try{await this._loadSprites(t),this.loadStatus="loaded"}catch{this.loadStatus="failed"}}else this.loadStatus="failed"}_loadSprites(t){this._isRetina=this.devicePixelRatio>1.15;const e=Object(c.K)(this.baseURL),r=e.query?"?"+Object(c.E)(e.query):"",n=this._isRetina?"@2x":"",s=`${e.path}${n}.${this._spriteImageFormat}${r}`,a=`${e.path}${n}.json${r}`;return Promise.all([Object(i.default)(a,t),Object(i.default)(s,{responseType:"image",...t})]).then((([t,r])=>{const n=Object.keys(t.data);if(!n||0===n.length||1===n.length&&"_ssl"===n[0]||!r||!r.data)return this._spritesData=this.image=null,this.width=this.height=0,Promise.resolve(null);this._spritesData=t.data;const i=r.data,s=Math.max(this.maxTextureSize,4096);if(i.width>s||i.height>s){const t=`Sprite resource for style ${e.path} is bigger than the maximum allowed of ${s} pixels}`;throw A.error(t),new o.a("SpriteSource",t)}this.width=i.width,this.height=i.height;const a=document.createElement("canvas"),l=a.getContext("2d");a.width=i.width,a.height=i.height,l.drawImage(i,0,0,i.width,i.height);const u=l.getImageData(0,0,i.width,i.height),c=new Uint8Array(u.data);let f;for(let e=0;e<c.length;e+=4)f=c[e+3]/255,c[e]=c[e]*f,c[e+1]=c[e+1]*f,c[e+2]=c[e+2]*f;this.image=c}))}}var I=r(361),_=r(698),T=r(129),U=r(845),R=r(1056);class P{constructor(t,e,r){this.tileMapURL="",this.tilemapCache=null,this.parsedUrl=null,this.tileInfo=null,this.capabilities=null,this.tileIndex=null,this.fullExtent=null,this.name=t,this.sourceUrl=e,e&&(this.parsedUrl=Object(c.K)(this.sourceUrl));const n=this.parsedUrl.path,i=this.parsedUrl.query?"?"+Object(c.E)(this.parsedUrl.query):"",o=Object(a.a)(r),s=o.tiles;e&&s.forEach(((t,e)=>{Object(c.s)(t)||(s[e]=Object(c.z)(n,t)+i)})),this.tileServers=s,r.tileMap&&(this.tileMapURL=Object(c.z)(e,r.tileMap));const l=r.capabilities&&r.capabilities.split(",").map((t=>t.toLowerCase().trim())),u=!!r.exportTilesAllowed,f=!!l&&-1!==l.indexOf("tilemap"),d=u&&r.hasOwnProperty("maxExportTilesCount")?r.maxExportTilesCount:0;this.capabilities={operations:{supportsExportTiles:u,supportsTileMap:f},exportTiles:u?{maxExportTilesCount:+d}:null},this.tileInfo=Object(U.a)(o.tileInfo,o,null,{ignoreMinMaxLOD:!0}),f&&(this.type="vector-tile",this.tilemapCache=new _.a({layer:this}),this.tilemapCache&&(this.tileIndex=new R.a(this.tilemapCache))),this.fullExtent=y.a.fromJSON(r.fullExtent)}getRefKey(t,e){return this.tileIndex?this.tileIndex.dataKey(t,e):Promise.resolve(t)}getSourceTileUrl(t,e,r){let n=this.tileServers[e%this.tileServers.length];return n=n.replace(/\{z\}/gi,t.toString()).replace(/\{y\}/gi,e.toString()).replace(/\{x\}/gi,r.toString()),n}isCompatibleWith(t){const e=this.tileInfo,r=t.tileInfo;if(!e.spatialReference.equals(r.spatialReference))return!1;if(!e.origin.equals(r.origin))return!1;if(Math.round(e.dpi)!==Math.round(r.dpi))return!1;const n=e.lods,i=r.lods,o=Math.min(n.length,i.length);for(let s=0;s<o;s++){const t=n[s],e=i[s];if(t.level!==e.level||Math.round(t.scale)!==Math.round(e.scale))return!1}return!0}}const E=T.a.defaults&&T.a.defaults.io.corsEnabledServers;function F(t){if(!t)return;const e=Object(c.m)(t);E&&-1===E.indexOf(e)&&E.push(e)}function L(...t){let e;for(let r=0;r<t.length;++r)if(Object(c.w)(t[r])){if(e){const n=e.split("://")[0];e=n+":"+t[r].trim()}}else e=Object(c.s)(t[r])?t[r]:Object(c.z)(e,t[r]);return Object(c.I)(e)}async function N(t,e,r,n,o){let s,a,l;if(Object(u.v)(o),"string"==typeof r){const t=Object(c.D)(r);F(t);const e=Object(c.K)(t);l=await Object(i.default)(e.path,{query:{f:"json"},responseType:"json",...o}),s=t,a=t}else l={data:r},s=r.jsonUrl||null,a=n;const f=l.data;return l.ssl&&(s&&(s=s.replace(/^http:/i,"https:")),a&&(a=a.replace(/^http:/i,"https:"))),C(f)?(t.styleUrl=s||null,async function(t,e,r,n){const i=r?Object(c.G)(r):c.f;t.styleBase=i,t.style=e,t.styleUrl&&F(t.styleUrl),e["sprite-format"]&&"webp"===e["sprite-format"].toLowerCase()&&(t.spriteFormat="webp");const o=[];if(e.sources&&e.sources.esri){const r=e.sources.esri;r.url?await N(t,"esri",L(i,r.url),void 0,n):o.push(N(t,"esri",r,i,n))}for(const s of Object.keys(e.sources))"esri"!==s&&"vector"===e.sources[s].type&&(e.sources[s].url?o.push(N(t,s,L(i,e.sources[s].url),void 0,n)):e.sources[s].tiles&&o.push(N(t,s,e.sources[s],i,n)));await Promise.all(o)}(t,f,a,o)):function(t){return!C(t)}(f)?t.sourceUrl?D(t,f,a,!1,e,o):(t.sourceUrl=s||null,D(t,f,a,!0,e,o)):Promise.reject("You must specify the URL or the JSON for a service or for a style.")}function C(t){return!!t.sources}async function D(t,e,r,n,i,o){const s=r?Object(c.I)(r)+"/":c.f,a=function(t,e){if(t.hasOwnProperty("tileInfo"))return t;const r={xmin:-20037507.067161843,ymin:-20037507.067161843,xmax:20037507.067161843,ymax:20037507.067161843,spatialReference:{wkid:102100}},n=512;let i=78271.51696400007,o=295828763.7957775;const s=[],a=t.hasOwnProperty("minzoom")?parseFloat(t.minzoom):0,l=t.hasOwnProperty("maxzoom")?parseFloat(t.maxzoom):22;for(let u=0;u<=l;u++)u>=a&&s.push({level:u,scale:o,resolution:i}),i/=2,o/=2;for(const u of t.tiles)F(L(e,u));return{capabilities:"TilesOnly",initialExtent:r,fullExtent:r,minScale:0,maxScale:0,tiles:t.tiles,tileInfo:{rows:n,cols:n,dpi:96,format:"pbf",origin:{x:-20037508.342787,y:20037508.342787},lods:s,spatialReference:{wkid:102100}}}}(e,s),l=new P(i,s,a);if(!n&&t.primarySourceName in t.sourceNameToSource){const e=t.sourceNameToSource[t.primarySourceName];if(!e.isCompatibleWith(l))return Promise.resolve();null!=l.fullExtent&&(null!=e.fullExtent?e.fullExtent.union(l.fullExtent):e.fullExtent=l.fullExtent.clone()),e.tileInfo.lods.length<l.tileInfo.lods.length&&(e.tileInfo=l.tileInfo)}if(n?(t.sourceBase=s,t.source=e,t.validatedSource=a,t.primarySourceName=i,t.sourceUrl&&F(t.sourceUrl)):F(s),t.sourceNameToSource[i]=l,!t.style)return null==e.defaultStyles?Promise.reject():"string"==typeof e.defaultStyles?N(t,"",L(s,e.defaultStyles,"root.json"),void 0,o):N(t,"",e.defaultStyles,L(s,"root.json"),o)}var k=r(716),$=r(476);class V{constructor(t,e){this.lockedSchemaPixelSize=t,this.isGCS=e}getLevelRowColumn(t){return this.isGCS?[t[0],t[1]>>1,t[2]>>1]:256===this.lockedSchemaPixelSize&&t[0]>0?[t[0]-1,t[1]>>1,t[2]>>1]:t}adjustLevel(t){return this.isGCS?t:256===this.lockedSchemaPixelSize?t>0?t-1:0:t}getShift(t,e){let r=0,n=0;return(256===this.lockedSchemaPixelSize||this.isGCS)&&(t[2]%2&&(r=e),t[1]%2&&(n=e)),[r,n]}getScale(t){if(this.isGCS){if(512===this.lockedSchemaPixelSize)return 4}else if(256===this.lockedSchemaPixelSize&&0===t)return 1;return 2}static create256x256CompatibleTileInfo(t){if(!t)return null;if(256===t.size[0]&&256===t.size[1])return t;const e=t.spatialReference.isGeographic,r=[],n=t.lods.length;for(let i=0;i<n;i++){const n=t.lods[i],o=e?n.resolution:2*n.resolution;r.push(new $.a({level:n.level,scale:n.scale,resolution:o}))}return new I.a({size:[256,256],dpi:t.dpi,format:t.format,compressionQuality:t.compressionQuality,origin:t.origin,spatialReference:t.spatialReference,lods:r})}static create512x512CompatibleTileInfo(t){if(!t)return null;if(256===t.size[0]||256===t.size[1])return null;const e=[],r=t.lods.length;for(let n=0;n<r;n++){const r=t.lods[n],i=.5*r.resolution;e.push(new $.a({level:r.level,scale:r.scale,resolution:i}))}return new I.a({size:[512,512],dpi:t.dpi,format:t.format,compressionQuality:t.compressionQuality,origin:t.origin,spatialReference:t.spatialReference,lods:e})}}const q=1e-6;function z(t,e){if(t===e)return!0;if(!t&&null!=e)return!1;if(null!=t&&!e)return!1;if(!t.spatialReference.equals(e.spatialReference)||t.dpi!==e.dpi)return!1;const r=t.origin,n=e.origin;if(Math.abs(r.x-n.x)>=q||Math.abs(r.y-n.y)>=q)return!1;let i,o;t.lods[0].scale>e.lods[0].scale?(i=t,o=e):(o=t,i=e);for(let s=i.lods[0].scale;s>=o.lods[o.lods.length-1].scale-q;s/=2)if(Math.abs(s-o.lods[0].scale)<q)return!0;return!1}function B(t,e){if(t===e)return t;if(!t&&null!=e)return e;if(null!=t&&!e)return t;const r=t.size[0],n=t.format,i=t.dpi,o={x:t.origin.x,y:t.origin.y},s=t.spatialReference.toJSON(),a=t.lods[0].scale>e.lods[0].scale?t.lods[0]:e.lods[0],l=t.lods[t.lods.length-1].scale<=e.lods[e.lods.length-1].scale?t.lods[t.lods.length-1]:e.lods[e.lods.length-1],u=a.scale,c=a.resolution,f=l.scale,d=[];let h=u,p=c,m=0;for(;h>f;)d.push({level:m,resolution:p,scale:h}),m++,h/=2,p/=2;return new I.a({size:[r,r],dpi:i,format:n||"pbf",origin:o,lods:d,spatialReference:s})}var G=r(985),Q=r(497);let W=class extends(Object(x.a)(Object(w.a)(Object(O.a)(Object(v.a)(Object(S.a)(Object(j.a)(Object(l.a)(g.a)))))))){constructor(...t){super(...t),this._spriteSourceMap=new Map,this.currentStyleInfo=null,this.style=null,this.isReference=null,this.operationalLayerType="VectorTileLayer",this.type="vector-tile",this.url=null,this.symbolCollisionBoxesVisible=!1}normalizeCtorArgs(t,e){return"string"==typeof t?{url:t,...e}:t}destroy(){this._spriteSourceMap.clear()}async prefetchResources(t){await this.loadSpriteSource(s.a.devicePixelRatio||1,t)}load(t){const e=this.loadFromPortal({supportedTypes:["Vector Tile Service"],supportsData:!1},t).catch(u.u).then((async()=>{if(!this.portalItem||!this.portalItem.id)return;const e=`${this.portalItem.itemUrl}/resources/styles/root.json`;(await Object(i.default)(e,{...t,query:{f:"json"}})).data&&this.read({url:e},Object(k.a)(this.portalItem))})).catch(u.u).then((()=>this._loadStyle(t)));return this.addResolvingPromise(e),Promise.resolve(this)}get attributionDataUrl(){const t=this.currentStyleInfo,e=t&&t.serviceUrl&&Object(c.K)(t.serviceUrl);return e?this._getDefaultAttribution(e.path):null}get capabilities(){const t=this._getPrimarySource();return t?t.capabilities:{operations:{supportsExportTiles:!1,supportsTileMap:!1},exportTiles:null}}get fullExtent(){const t=this._getPrimarySource();return t?t.fullExtent:null}get parsedUrl(){return this.serviceUrl?Object(c.K)(this.serviceUrl):null}get serviceUrl(){return this.currentStyleInfo&&this.currentStyleInfo.serviceUrl||null}get spatialReference(){return this.tileInfo&&this.tileInfo.spatialReference||null}get styleUrl(){return this.currentStyleInfo&&this.currentStyleInfo.styleUrl||null}writeStyleUrl(t,e){t&&Object(c.w)(t)&&(t=`https:${t}`),e.styleUrl=t}get tileIndexType(){const t=this._getPrimarySource();return t?t.type:""}get tileIndexUrl(){const t=this._getPrimarySource();return t?t.tileMapURL:""}get tileInfo(){var t;const e=[];for(const n in this.sourceNameToSource)e.push(this.sourceNameToSource[n]);let r=(null==(t=this._getPrimarySource())?void 0:t.tileInfo)||new I.a;if(e.length>1)for(let n=0;n<e.length;n++)z(r,e[n].tileInfo)&&(r=B(r,e[n].tileInfo));return r}get tilemapCache(){const t=this._getPrimarySource();return t&&t.capabilities.operations.supportsTileMap?t.tilemapCache:null}get tileServers(){const t=this._getPrimarySource();return t?t.tileServers:[]}readVersion(t,e){return e.version?parseFloat(e.version):parseFloat(e.currentVersion)}get compatibleTileInfo256(){return V.create256x256CompatibleTileInfo(this.tileInfo)}get compatibleTileInfo512(){return V.create512x512CompatibleTileInfo(this.tileInfo)}async loadSpriteSource(t=1,e){if(!this._spriteSourceMap.has(t)){const r=Object(Q.a)(),n=new M(this.styleRepository.sprite,t,r.maxTextureSize,this.currentStyleInfo.spriteFormat);await n.load(e),this._spriteSourceMap.set(t,n)}return Promise.resolve(this._spriteSourceMap.get(t))}async loadStyle(t,e){const r=t||this.style||this.url;if(this._loadingPromise&&"string"==typeof r&&this.url===r&&!Object(u.n)(this._abortController))return this._loadingPromise;const n=this._abortController;n&&n.abort();const i=Object(u.d)();return this._loadingPromise=new Promise(((t,n)=>{const o={signal:i.signal};this._spriteSourceMap.clear(),this._getSourceAndStyle(r,o).then(t,n),Object(u.q)(e,(()=>{i.abort()}))})),this._abortController=i,this._loadingPromise}getStyleLayerId(t){return this.styleRepository.getStyleLayerId(t)}getStyleLayerIndex(t){return this.styleRepository.getStyleLayerIndex(t)}getPaintProperties(t){return Object(a.a)(this.styleRepository.getPaintProperties(t))}setPaintProperties(t,e){const r=this.styleRepository.isPainterDataDriven(t);this.styleRepository.setPaintProperties(t,e);const n=this.styleRepository.isPainterDataDriven(t);this.emit("paint-change",{layer:t,paint:e,isDataDriven:r||n})}getStyleLayer(t){return Object(a.a)(this.styleRepository.getStyleLayer(t))}setStyleLayer(t,e){this.styleRepository.setStyleLayer(t,e),this.emit("style-layer-change",{layer:t,index:e})}deleteStyleLayer(t){this.styleRepository.deleteStyleLayer(t),this.emit("delete-style-layer",{layer:t})}getLayoutProperties(t){return Object(a.a)(this.styleRepository.getLayoutProperties(t))}setLayoutProperties(t,e){this.styleRepository.setLayoutProperties(t,e),this.emit("layout-change",{layer:t,layout:e})}setStyleLayerVisibility(t,e){this.styleRepository.setStyleLayerVisibility(t,e),this.emit("style-layer-visibility-change",{layer:t,visibility:e})}getStyleLayerVisibility(t){return this.styleRepository.getStyleLayerVisibility(t)}getTileUrl(t,e,r){let n=this.tileServers[e%this.tileServers.length];return n=n.replace(/\{z\}/gi,t.toString()).replace(/\{y\}/gi,e.toString()).replace(/\{x\}/gi,r.toString()),n}write(t,e){return e&&e.origin&&!this.styleUrl?(e.messages&&e.messages.push(new o.a("vectortilelayer:unsupported",`VectorTileLayer (${this.title}, ${this.id}) with style defined by JSON only are not supported`,{layer:this})),null):super.write(t,e)}async _getSourceAndStyle(t,e){if(!t)throw new Error("invalid style!");const r=await async function(t,e){const r={source:null,sourceBase:null,sourceUrl:null,validatedSource:null,style:null,styleBase:null,styleUrl:null,sourceNameToSource:{},primarySourceName:"",spriteFormat:"png"},[n,i]="string"==typeof t?[t,null]:[null,t.jsonUrl],o=n?Object(c.K)(n):null;await N(r,"esri",t,i,e);const s={layerDefinition:r.validatedSource,url:n,parsedUrl:o,serviceUrl:r.sourceUrl,style:r.style,styleUrl:r.styleUrl,spriteUrl:r.style.sprite&&L(r.styleBase,r.style.sprite),spriteFormat:r.spriteFormat,glyphsUrl:r.style.glyphs&&L(r.styleBase,r.style.glyphs),sourceNameToSource:r.sourceNameToSource,primarySourceName:r.primarySourceName};return F(s.spriteUrl),F(s.glyphsUrl),s}(t,e);"webp"===r.spriteFormat&&(await function(t){const e={lossy:"UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",lossless:"UklGRhoAAABXRUJQVlA4TA0AAAAvAAAAEAcQERGIiP4HAA==",alpha:"UklGRkoAAABXRUJQVlA4WAoAAAAQAAAAAAAAAAAAQUxQSAwAAAARBxAR/Q9ERP8DAABWUDggGAAAABQBAJ0BKgEAAQAAAP4AAA3AAP7mtQAAAA==",animation:"UklGRlIAAABXRUJQVlA4WAoAAAASAAAAAAAAAAAAQU5JTQYAAAD/////AABBTk1GJgAAAAAAAAAAAAAAAAAAAGQAAABWUDhMDQAAAC8AAAAQBxAREYiI/gcA"};return new Promise((r=>{const n=new Image;n.onload=()=>{n.onload=n.onerror=null,r(n.width>0&&n.height>0)},n.onerror=()=>{n.onload=n.onerror=null,r(!1)},n.src="data:image/webp;base64,"+e[t]}))}("lossy")||(r.spriteFormat="png")),this._set("currentStyleInfo",{...r}),"string"==typeof t?(this.url=t,this.style=null):(this.url=null,this.style=t),this._set("sourceNameToSource",r.sourceNameToSource),this._set("primarySourceName",r.primarySourceName),this._set("styleRepository",new G.a(r.style,r)),this.read(r.layerDefinition,{origin:"service"}),this.emit("load-style",{})}_getDefaultAttribution(t){const e=t.match(/^https?:\/\/(?:basemaps|basemapsbeta|basemapsdev)(?:-api)?\.arcgis\.com(\/[^\/]+)?\/arcgis\/rest\/services\/([^\/]+(\/[^\/]+)*)\/vectortileserver/i),r=["OpenStreetMap_v2","OpenStreetMap_Daylight_v2","OpenStreetMap_Export_v2","OpenStreetMap_FTS_v2","OpenStreetMap_GCS_v2","World_Basemap","World_Basemap_v2","World_Basemap_Export_v2","World_Basemap_GCS_v2","World_Basemap_WGS84","World_Contours_v2"];if(!e)return;const n=e[2]&&e[2].toLowerCase();if(!n)return;const i=e[1]||"";for(const o of r)if(o.toLowerCase().indexOf(n)>-1)return Object(c.D)(`//static.arcgis.com/attribution/Vector${i}/${o}`)}_getPrimarySource(){return this.sourceNameToSource&&this.primarySourceName in this.sourceNameToSource?this.sourceNameToSource[this.primarySourceName]:null}async _loadStyle(t){return this._loadingPromise?this._loadingPromise:this.loadStyle(null,t)}};Object(n.a)([Object(f.b)({readOnly:!0})],W.prototype,"attributionDataUrl",null),Object(n.a)([Object(f.b)({type:["show","hide"]})],W.prototype,"listMode",void 0),Object(n.a)([Object(f.b)({readOnly:!0,dependsOn:["sourceNameToSource","primarySourceName"],json:{read:!1}})],W.prototype,"capabilities",null),Object(n.a)([Object(f.b)({readOnly:!0})],W.prototype,"currentStyleInfo",void 0),Object(n.a)([Object(f.b)({json:{read:!1},readOnly:!0,type:y.a})],W.prototype,"fullExtent",null),Object(n.a)([Object(f.b)()],W.prototype,"style",void 0),Object(n.a)([Object(f.b)({type:Boolean,json:{read:!1,write:{enabled:!0,overridePolicy:()=>({enabled:!1})}}})],W.prototype,"isReference",void 0),Object(n.a)([Object(f.b)({type:["VectorTileLayer"]})],W.prototype,"operationalLayerType",void 0),Object(n.a)([Object(f.b)({readOnly:!0})],W.prototype,"parsedUrl",null),Object(n.a)([Object(f.b)({readOnly:!0})],W.prototype,"serviceUrl",null),Object(n.a)([Object(f.b)({type:b.a,readOnly:!0})],W.prototype,"spatialReference",null),Object(n.a)([Object(f.b)({readOnly:!0})],W.prototype,"styleRepository",void 0),Object(n.a)([Object(f.b)({readOnly:!0})],W.prototype,"sourceNameToSource",void 0),Object(n.a)([Object(f.b)({readOnly:!0})],W.prototype,"primarySourceName",void 0),Object(n.a)([Object(f.b)({type:String,readOnly:!0,json:{write:{ignoreOrigin:!0},origins:{"web-document":{write:{ignoreOrigin:!0,isRequired:!0}}}}})],W.prototype,"styleUrl",null),Object(n.a)([Object(m.a)(["portal-item","web-document"],"styleUrl")],W.prototype,"writeStyleUrl",null),Object(n.a)([Object(f.b)({json:{read:!1},readOnly:!0})],W.prototype,"tileIndexType",null),Object(n.a)([Object(f.b)({json:{read:!1},readOnly:!0})],W.prototype,"tileIndexUrl",null),Object(n.a)([Object(f.b)({json:{read:!1,origins:{service:{read:!1}}},readOnly:!0,type:I.a})],W.prototype,"tileInfo",null),Object(n.a)([Object(f.b)({json:{read:!1},readOnly:!0,type:_.a})],W.prototype,"tilemapCache",null),Object(n.a)([Object(f.b)({json:{read:!1},readOnly:!0})],W.prototype,"tileServers",null),Object(n.a)([Object(f.b)({json:{read:!1},readOnly:!0,value:"vector-tile"})],W.prototype,"type",void 0),Object(n.a)([Object(f.b)({json:{origins:{"web-document":{read:{source:"styleUrl"}},"portal-item":{read:{source:"url"}}},write:!1,read:!1}})],W.prototype,"url",void 0),Object(n.a)([Object(f.b)({readOnly:!0})],W.prototype,"version",void 0),Object(n.a)([Object(h.a)("version",["version","currentVersion"])],W.prototype,"readVersion",null),Object(n.a)([Object(f.b)({readOnly:!0})],W.prototype,"compatibleTileInfo256",null),Object(n.a)([Object(f.b)({readOnly:!0})],W.prototype,"compatibleTileInfo512",null),Object(n.a)([Object(f.b)({type:Boolean})],W.prototype,"symbolCollisionBoxesVisible",void 0),W=Object(n.a)([Object(p.a)("esri.layers.VectorTileLayer")],W);var K=W}}]);
//# sourceMappingURL=126.d41cb38f.chunk.js.map