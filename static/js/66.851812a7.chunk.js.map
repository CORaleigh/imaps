{"version":3,"sources":["../node_modules/@arcgis/core/views/3d/interactive/visualElements/support/Segment.js","../node_modules/@arcgis/core/core/quantityFormatUtils.js","../node_modules/@arcgis/core/chunks/MeasurementArrow.glsl.js","../node_modules/@arcgis/core/libs/maquette/h.js","../node_modules/@arcgis/core/views/overlay/LineOverlayItem.js","../node_modules/@arcgis/core/views/overlay/TextOverlayItem.js","../node_modules/@arcgis/core/views/3d/interactive/visualElements/LabelVisualElement.js","../node_modules/@arcgis/core/views/3d/webgl-engine/shaders/MeasurementArrowTechnique.js","../node_modules/@arcgis/core/views/3d/webgl-engine/materials/MeasurementArrowMaterial.js","../node_modules/@arcgis/core/views/3d/interactive/visualElements/MeasurementArrowVisualElement.js","../node_modules/@arcgis/core/views/3d/interactive/graphics/DirectLineMeasurement3D/DirectLineMeasurement3DView.js"],"names":["_","t","e","s","this","startRenderSpace","endRenderSpace","type","i","n","r","c","u","push","worldUpAtPosition","eval","m","d","get","points","normals","f","renderSpatialReference","_start","_end","_pcpf","o","_project","a","_projectIn","h","R","p","l","toUnit","value","measure","Error","unit","b","g","vertex","uniforms","add","attributes","varyings","code","fragment","Math","sqrt","float","Object","freeze","__proto__","build","length","Array","isArray","vnodeSelector","properties","children","text","toString","domNode","hasOwnProperty","startX","startY","endX","endY","width","color","visible","_set","calculateCoordinates","height","left","top","x1","x2","y1","y2","strokeStyle","lineCap","classes","styles","visibility","style","lineWidth","beginPath","moveTo","lineTo","stroke","min","max","prototype","readOnly","bottom","center","right","x","y","fontSize","anchor","backgroundColor","textColor","textShadowColor","textShadowSize","_cssClasses","floor","padding","borderRadius","textShadow","font","replace","measureText","textAlign","textBaseline","roundedRect","fillStyle","fill","_renderTextShadow","fillText","lineJoin","arcTo","closePath","cos","PI","sin","view","_handles","_textItem","_calloutItem","_showCallout","_showText","_geometry","_text","_fontSize","_distance","_anchor","applyProps","_updateLabelPosition","attached","textItem","overlay","overlaps","geometry","_stage","_computeLabelPositionFromPoint","k","position","_computeLabelPositionFromCorner","z","_updatePosition","_computeLabelPositionFromSegment","updateVisibility","renderCoordsHelper","toRenderCoords","L","camera","projectToRenderScreen","renderToScreen","w","P","T","j","pixelRatio","segment","H","sampleLocation","abs","startPosition","endPosition","v","items","addMany","state","watch","destroyed","removeMany","removeAll","I","S","C","M","V","F","start","end","shader","rctx","generateSource","bindProjectionMatrix","program","projectionMatrix","setUniform1f","outlineSize","setUniform4fv","outlineColor","stripeLength","stripeEvenColor","stripeOddColor","bindView","polygonOffset","configuration","polygonOffsetEnabled","factor","units","depthTest","func","depthWrite","colorWrite","arguments","techniqueConfig","params","output","updateParameters","technique","techniqueRep","acquireAndReleaseExisting","material","getTechniqueConfig","bindProgram","bindPass","getPassParameters","vec3f","vec2f","f32","q","vertexBufferLayout","createBuffer","indices","vertexAttributes","data","console","warn","transformation","invTranspTransformation","normal","A","uv0","setVec","set","B","auxpos1","_parameters","_origin","_originTransform","_arrowCenter","_renderOccluded","_stripeLength","_stripesEnabled","_arrowMaterial","setParameterValues","renderOccluded","geometryChanged","arrowStripeEvenColor","arrowStripeOddColor","arrowOutlineColor","viewChanged","destroy","_createArrowGeometry","addGeometry","arrowSubdivisions","createPolylineGeometry","recreateGeometry","ready","computeScreenPixelSizeAt","arrowWidth","arrowOutlineWidth","arrowStripeLength","U","_params","_segmentVisualElement","_triangleVisualElement","_rightAngleQuad","_projectedGeodesicLine","_geodesicStartHint","_geodesicEndHint","_segmentLabel","_verticalLabel","_horizontalLabel","_segmentLabelDisplayedMeasurement","_startPosition","_endPosition","_cornerPosition","_startPositionAtSeaLevel","_endPositionAtSeaLevel","_viewMode","_geometryDirty","messages","_visualizedMeasurement","_actualVisualizedMeasurement","_visualElementOrientation","_triangleOrientationOverride","_triangleCollapseRatioThreshold","_geodesicDistanceThreshold","_initialize","triangleLineWidth","triangleColor","geodesicProjectionLineWidth","geodesicProjectionLineColor","stipplePattern","guideStippleLengthPixels","stippleIntegerRepeats","guideLineWidth","direcLabelFontSize","verticalLabelFontSize","horizontalLabelFontSize","dataObject","_update","_updateLabels","_updateSegmentStripeLength","_updateMessageBundle","then","_getActualVisualElementsOrientation","actualVisualizedMeasurement","labels","direct","horizontalLabel","segmentLabel","horizontal","vertical","verticalLabel","_updateGeometryAndViewMode","startPoint","endPoint","equals","_updateActualVisualizedMeasurement","_computeViewMode","getAltitude","G","spatialReference","previous","next","J","K","N","X","Y","W","setAltitude","setGeometryFromSegment","measurement","verticalDistance","horizontalDistance","euclideanDistance","geodesicDistance","directDistance","geodesicAngle","settings","E","D","O","notifyChange","metersPerDegree","Q","stripesEnabled","geodesicDistanceThreshold","triangleCollapseRatioThreshold","visualElementsOrientation","aboveGround","laserLineGlowColor","laserLineGlowWidth","laserLineGlowFalloff","laserLineInnerColor","laserLineInnerWidth","laserLineGlobalAlpha","laserLineEnabled","handleColor","handleOpacity","handleRadius","triangleCornerSize","triangleSubdivisions","guideLineColor","labelDistance"],"mappings":"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","file":"static/js/66.851812a7.chunk.js","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{c as e}from\"../../../../../chunks/vec3f64.js\";import{e as t,f as s,n as r,g as i,b as n}from\"../../../../../chunks/vec3.js\";import{slerpTangent as c,slerp as p}from\"../../../support/mathUtils.js\";import{getSphericalPCPF as o}from\"../../../../../geometry/projectionEllipsoid.js\";import{canProjectWithoutEngine as a,projectVectorToVector as h}from\"../../../../../geometry/projection.js\";import{sv3d as d}from\"../../../support/stack.js\";class _{constructor(t=e(),s=e()){this.startRenderSpace=t,this.endRenderSpace=s,this.type=\"euclidean\"}eval(e,i,n){return t(i,this.startRenderSpace,this.endRenderSpace,e),n&&(s(n,this.endRenderSpace,this.startRenderSpace),r(n,n)),i}createRenderGeometry(e,t){const r=[],i=[],n=(t,n)=>{const c=u;s(c,t,e),r.push([c[0],c[1],c[2]]),i.push([n[0],n[1],n[2]])},c=t.worldUpAtPosition(this.eval(.5,m),d.get());return n(this.startRenderSpace,c),n(this.endRenderSpace,c),{points:r,normals:i}}}class f{constructor(t,s,r){this.startRenderSpace=t,this.endRenderSpace=s,this.renderSpatialReference=r,this.type=\"geodesic\",this._start=e(),this._end=e(),this._pcpf=o(r),this._project=a(r,this._pcpf),this._projectIn(t,this._start),this._projectIn(s,this._end)}_projectIn(e,t){this._project?h(e,this.renderSpatialReference,t,this._pcpf):i(t,e)}eval(e,i,o){if(this._project)if(o){const t=u;c(this._start,this._end,e,i,t),n(R,i,t),h(i,this._pcpf,i,this.renderSpatialReference),h(R,this._pcpf,R,this.renderSpatialReference),s(o,R,i),r(o,o)}else p(this._start,this._end,e,i),h(i,this._pcpf,i,this.renderSpatialReference);else t(i,this._start,this._end,e),o&&(s(o,this._end,this._start),r(o,o));return i}createRenderGeometry(e,t){const r=[],i=[],n=(t,n)=>{const c=R;s(c,t,e),r.push([c[0],c[1],c[2]]),i.push([n[0],n[1],n[2]])},c=128+1&-2;for(let s=0;s<c;++s){const e=s/(c-1),r=m,i=u;this.eval(e,r),t.worldUpAtPosition(r,i),n(r,i)}return{points:r,normals:i}}}function l(e,t,s,r){switch(e){case\"euclidean\":return new _(t,s);case\"geodesic\":return new f(t,s,r)}}const m=e(),u=e(),R=e();export{_ as EuclideanSegment,f as GeodesicSegment,l as createSegment};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{formatDecimal as r,formatMetricLength as t,formatMetricVerticalLength as a,formatMetricArea as n,formatImperialLength as e,formatImperialVerticalLength as i,formatImperialArea as u,formatDMS as o}from\"./unitFormatUtils.js\";function l(t,a,n,e=2,i=\"abbr\"){return r(t,a.toUnit(n).value,n,e,i)}function f(r,a,n=2,e=\"abbr\"){if(\"length\"!==a.measure)throw new Error(\"quantity is not a length\");return t(r,a.value,a.unit,n,e)}function s(r,t,n=2,e=\"abbr\"){if(\"length\"!==t.measure)throw new Error(\"quantity is not a length\");return a(r,t.value,t.unit,n,e)}function m(r,t,a=2,e=\"abbr\"){if(\"area\"!==t.measure)throw new Error(\"quantity is not an area\");return n(r,t.value,t.unit,a,e)}function h(r,t,a=2,n=\"abbr\"){if(\"length\"!==t.measure)throw new Error(\"quantity is not a length\");return e(r,t.value,t.unit,a,n)}function b(r,t,a=2,n=\"abbr\"){if(\"length\"!==t.measure)throw new Error(\"quantity is not a length\");return i(r,t.value,t.unit,a,n)}function c(r,t,a=2,n=\"abbr\"){if(\"area\"!==t.measure)throw new Error(\"quantity is not an area\");return u(r,t.value,t.unit,a,n)}function g(r){if(\"angle\"!==r.measure)throw new Error(\"quantity is not an angle\");return o(r.value,r.unit)}export{g as formatDMS,l as formatDecimal,c as formatImperialArea,h as formatImperialLength,b as formatImperialVerticalLength,m as formatMetricArea,f as formatMetricLength,s as formatMetricVerticalLength};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{glsl as e}from\"../views/3d/webgl-engine/core/shaderModules/interfaces.js\";import{ShaderBuilder as t}from\"../views/3d/webgl-engine/core/shaderModules/ShaderBuilder.js\";function o(){const o=new t;o.vertex.uniforms.add(\"proj\",\"mat4\").add(\"view\",\"mat4\").add(\"width\",\"float\"),o.attributes.add(\"position\",\"vec3\"),o.attributes.add(\"normal\",\"vec3\"),o.attributes.add(\"uv0\",\"vec2\"),o.attributes.add(\"auxpos1\",\"float\"),o.varyings.add(\"vtc\",\"vec2\"),o.varyings.add(\"vlength\",\"float\"),o.varyings.add(\"vradius\",\"float\"),o.vertex.code.add(e`\n    void main(void) {\n      vec3 bitangent = normal;\n\n      vtc = uv0;\n      vlength = auxpos1;\n      vradius = 0.5 * width;\n\n      vec4 pos = view * vec4(position + vradius * bitangent * uv0.y, 1.0);\n      gl_Position = proj * pos;\n    }\n  `),o.fragment.uniforms.add(\"outlineSize\",\"float\").add(\"outlineColor\",\"vec4\").add(\"stripeLength\",\"float\").add(\"stripeEvenColor\",\"vec4\").add(\"stripeOddColor\",\"vec4\");const r=1/Math.sqrt(2);return o.fragment.code.add(e`\n    const float INV_SQRT2 = ${e.float(r)};\n\n    vec4 arrowColor(vec2 tc, float len) {\n      float d = INV_SQRT2 * (tc.x - abs(tc.y));\n      d = min(d, INV_SQRT2 * (len - tc.x - abs(tc.y)));\n      d = min(d, 1.0 - abs(tc.y));\n\n      if (d < 0.0) {\n        return vec4(0.0);\n      } else if (d < outlineSize) {\n        return outlineColor;\n      } else {\n        return fract(0.5 / stripeLength * tc.x * vradius) >= 0.5 ? stripeOddColor : stripeEvenColor;\n      }\n    }\n\n    void main(void) {\n      vec2 ntc = vec2(vtc.x / vradius, vtc.y);\n      vec4 color = arrowColor(ntc, vlength / vradius);\n      if (color.a == 0.0) {\n        discard;\n      }\n      gl_FragColor = color;\n    }\n  `),o}var r=Object.freeze({__proto__:null,build:o});export{r as M,o as b};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nlet e=e=>({vnodeSelector:\"\",properties:void 0,children:void 0,text:e.toString(),domNode:null}),r=(t,o,n)=>{for(let l=0,i=o.length;l<i;l++){let i=o[l];Array.isArray(i)?r(t,i,n):null!=i&&!1!==i&&(\"string\"==typeof i&&(i=e(i)),n.push(i))}};function t(e,t,o){if(Array.isArray(t))o=t,t=void 0;else if(t&&(\"string\"==typeof t||t.hasOwnProperty(\"vnodeSelector\"))||o&&(\"string\"==typeof o||o.hasOwnProperty(\"vnodeSelector\")))throw new Error(\"h called with invalid arguments\");let n,l;return o&&1===o.length&&\"string\"==typeof o[0]?n=o[0]:o&&(l=[],r(e,o,l),0===l.length&&(l=void 0)),{vnodeSelector:e,properties:t,children:l,text:\"\"===n?void 0:n,domNode:null}}export{t as h};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{_ as t}from\"../../chunks/tslib.es6.js\";import\"../../core/has.js\";import\"../../core/Logger.js\";import\"../../core/accessorSupport/ensureType.js\";import{property as e}from\"../../core/accessorSupport/decorators/property.js\";import{subclass as s}from\"../../core/accessorSupport/decorators/subclass.js\";import\"../../core/urlUtils.js\";import\"../../core/uuid.js\";import\"../../portal/support/resourceExtension.js\";import i from\"../../core/Accessor.js\";import\"../../libs/maquette/projection.js\";import{h as o}from\"../../libs/maquette/h.js\";import\"../../libs/maquette/projector.js\";let r=class extends i{constructor(t){super(t),this.startX=0,this.startY=0,this.endX=0,this.endY=0,this.width=1,this.color=[0,0,0,.5],this.visible=!0}get startPosition(){return[this.startX,this.startY]}set startPosition(t){this._set(\"startX\",t[0]),this._set(\"startY\",t[1])}get endPosition(){return[this.endX,this.endY]}set endPosition(t){this._set(\"endX\",t[0]),this._set(\"endY\",t[1])}get strokeStyle(){const t=this.color;return`rgba(${t[0]}, ${t[1]}, ${t[2]}, ${t[3]})`}get lineCap(){return\"round\"}render(){const{height:t,left:e,top:s,width:i,x1:r,x2:n,y1:p,y2:a}=this.calculateCoordinates(h),l=`stroke: ${this.strokeStyle}; stroke-width: ${this.width}; stroke-linecap: ${this.lineCap};`;return o(\"div\",{classes:{\"esri-line-overlay-item\":!0},styles:{left:e+\"px\",top:s+\"px\",width:i+\"px\",height:t+\"px\",visibility:this.visible?\"visible\":\"hidden\"}},[o(\"svg\",{width:i,height:t},[o(\"line\",{x1:r,y1:p,x2:n,y2:a,style:l})])])}renderCanvas(t){if(!this.visible)return;t.strokeStyle=this.strokeStyle,t.lineWidth=this.width,t.lineCap=this.lineCap;const e=this.calculateCoordinates(h);t.beginPath(),t.moveTo(e.left+e.x1,e.top+e.y1),t.lineTo(e.left+e.x2,e.top+e.y2),t.stroke()}calculateCoordinates(t){const e=Math.min(this.startX,this.endX),s=Math.max(this.startX,this.endX),i=Math.min(this.startY,this.endY),o=Math.max(this.startY,this.endY),r=this.width;return t.left=e-r,t.top=i-r,t.width=s-e+2*r,t.height=Math.max(20,o-i+2*r),t.x1=this.startX-e+r,t.y1=this.startY-i+r,t.x2=this.endX-e+r,t.y2=this.endY-i+r,t}};t([e()],r.prototype,\"startX\",void 0),t([e()],r.prototype,\"startY\",void 0),t([e()],r.prototype,\"endX\",void 0),t([e()],r.prototype,\"endY\",void 0),t([e()],r.prototype,\"startPosition\",null),t([e()],r.prototype,\"endPosition\",null),t([e()],r.prototype,\"width\",void 0),t([e()],r.prototype,\"color\",void 0),t([e()],r.prototype,\"visible\",void 0),t([e({readOnly:!0})],r.prototype,\"strokeStyle\",null),r=t([s(\"esri.views.overlay.LineOverlayItem\")],r);const h={left:0,top:0,width:0,height:0,x1:0,y1:0,x2:0,y2:0};var n=r;export default n;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{_ as t}from\"../../chunks/tslib.es6.js\";import\"../../core/has.js\";import\"../../core/Logger.js\";import\"../../core/accessorSupport/ensureType.js\";import{property as e}from\"../../core/accessorSupport/decorators/property.js\";import{subclass as o}from\"../../core/accessorSupport/decorators/subclass.js\";import\"../../core/urlUtils.js\";import\"../../core/uuid.js\";import\"../../portal/support/resourceExtension.js\";import i from\"../../core/Accessor.js\";import\"../../libs/maquette/projection.js\";import{h as r}from\"../../libs/maquette/h.js\";import\"../../libs/maquette/projector.js\";const s={bottom:\"esri-text-overlay-item-anchor-bottom\",\"bottom-right\":\"esri-text-overlay-item-anchor-bottom-right\",\"bottom-left\":\"esri-text-overlay-item-anchor-bottom-left\",top:\"esri-text-overlay-item-anchor-top\",\"top-right\":\"esri-text-overlay-item-anchor-top-right\",\"top-left\":\"esri-text-overlay-item-anchor-top-left\",center:\"esri-text-overlay-item-anchor-center\",right:\"esri-text-overlay-item-anchor-right\",left:\"esri-text-overlay-item-anchor-left\"};let l=class extends i{constructor(t){super(t),this.x=0,this.y=0,this.text=\"-\",this.fontSize=14,this.anchor=\"center\",this.visible=!0,this.backgroundColor=\"rgba(0, 0, 0, 0.6)\",this.textColor=\"white\",this.textShadowColor=[0,0,0],this.textShadowSize=1}get position(){return[this.x,this.y]}set position(t){this._set(\"x\",t[0]),this._set(\"y\",t[1])}get padding(){return.5*this.fontSize}render(){return r(\"div\",{classes:this._cssClasses(),styles:{left:Math.floor(this.x)+\"px\",top:Math.floor(this.y)+\"px\",visibility:this.visible?\"visible\":\"hidden\",fontSize:this.fontSize+\"px\",backgroundColor:this.backgroundColor,color:this.textColor,padding:this.padding+\"px\",borderRadius:this.padding+\"px\",textShadow:`0 0 ${this.textShadowSize}px rgb(${this.textShadowColor[0]}, ${this.textShadowColor[1]}, ${this.textShadowColor[2]})`}},[this.text])}renderCanvas(t){if(!this.visible)return;const e=t.font.replace(/^(.*?)px/,\"\");t.font=`${this.fontSize}px ${e}`;const o=this.padding,i=this.padding,r=t.measureText(this.text).width,s=this.fontSize,l=n[this.anchor];t.textAlign=\"center\",t.textBaseline=\"middle\";const h=r+2*o,a=s+2*o,x=this.x+l.x*h,p=this.y+l.y*a;this.roundedRect(t,x,p,h,a,i),t.fillStyle=this.backgroundColor,t.fill();const c=this.x+(l.x+.5)*h,d=this.y+(l.y+.5)*a;this._renderTextShadow(t,this.text,c,d),t.fillStyle=this.textColor,t.fillText(this.text,c,d)}_renderTextShadow(t,e,o,i){t.lineJoin=\"miter\",t.fillStyle=`rgba(${this.textShadowColor[0]}, ${this.textShadowColor[1]}, ${this.textShadowColor[2]}, ${1/h.length})`;const r=this.textShadowSize;for(const[s,l]of h)t.fillText(e,o+r*s,i+r*l)}roundedRect(t,e,o,i,r,s){t.beginPath(),t.moveTo(e,o+s),t.arcTo(e,o,e+s,o,s),t.lineTo(e+i-s,o),t.arcTo(e+i,o,e+i,o+s,s),t.lineTo(e+i,o+r-s),t.arcTo(e+i,o+r,e+i-s,o+r,s),t.lineTo(e+s,o+r),t.arcTo(e,o+r,e,o+r-s,s),t.closePath()}_cssClasses(){const t={\"esri-text-overlay-item\":!0};for(const e in s)t[s[e]]=this.anchor===e;return t}};t([e()],l.prototype,\"x\",void 0),t([e()],l.prototype,\"y\",void 0),t([e()],l.prototype,\"position\",null),t([e()],l.prototype,\"text\",void 0),t([e()],l.prototype,\"fontSize\",void 0),t([e()],l.prototype,\"anchor\",void 0),t([e()],l.prototype,\"visible\",void 0),t([e()],l.prototype,\"padding\",null),l=t([o(\"esri.views.overlay.TextOverlayItem\")],l);const n={bottom:{x:-.5,y:-1,textAlign:\"center\",textBaseline:\"bottom\"},\"bottom-left\":{x:0,y:-1,textAlign:\"left\",textBaseline:\"bottom\"},\"bottom-right\":{x:-1,y:-1,textAlign:\"right\",textBaseline:\"bottom\"},center:{x:-.5,y:-.5,textAlign:\"center\",textBaseline:\"middle\"},left:{x:0,y:-.5,textAlign:\"left\",textBaseline:\"middle\"},right:{x:-1,y:-.5,textAlign:\"right\",textBaseline:\"middle\"},top:{x:-.5,y:0,textAlign:\"center\",textBaseline:\"top\"},\"top-left\":{x:0,y:0,textAlign:\"left\",textBaseline:\"top\"},\"top-right\":{x:-1,y:0,textAlign:\"right\",textBaseline:\"top\"}},h=[];{const t=16;for(let e=0;e<360;e+=360/t)h.push([Math.cos(Math.PI*e/180),Math.sin(Math.PI*e/180)])}var a=l;export default a;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{isSome as t,unwrap as e}from\"../../../../core/maybe.js\";import{createRenderScreenPointArray as s,createRenderScreenPointArray3 as i,createScreenPointArray as o}from\"../../../../core/screenUtils.js\";import{c as r}from\"../../../../chunks/vec3f64.js\";import{b as a}from\"../../../../chunks/vec3.js\";import n from\"../../../../core/Handles.js\";import{n as h,h as c,e as m,a as l,s as _,l as u,d as p}from\"../../../../chunks/vec2.js\";import{VisualElement as d}from\"./VisualElement.js\";import{screenSpaceTangent as x}from\"../measurementTools/support/viewUtils.js\";import b from\"../../../overlay/LineOverlayItem.js\";import v from\"../../../overlay/TextOverlayItem.js\";class f extends d{constructor(t){super(t.view),this._handles=new n,this._textItem=null,this._calloutItem=null,this._showCallout=!0,this._showText=!0,this._geometry=null,this._text=null,this._fontSize=14,this._distance=25,this._anchor=\"right\",this.applyProps(t)}get geometry(){return this._geometry}set geometry(t){this._geometry=t,this._updateLabelPosition()}get textItem(){return this._textItem}get text(){return this._text}set text(t){this._text=t,this.attached&&(this._textItem.text=this._text)}get fontSize(){return this._fontSize}set fontSize(t){this._fontSize=t,this.attached&&(this._textItem.fontSize=this._fontSize)}get distance(){return this._distance}set distance(t){this._distance!==t&&(this._distance=t,this._updateLabelPosition())}get anchor(){return this._anchor}set anchor(t){this._anchor!==t&&(this._anchor=t,this._updateLabelPosition())}overlaps(t){return this.textItem.visible&&t.textItem.visible&&this.view.overlay.overlaps(this._textItem,t.textItem)}_updateLabelPosition(){if(this.attached){if(this._showText=!1,this._showCallout=!1,t(this.geometry)&&this.view._stage)switch(this.geometry.type){case\"point\":this._computeLabelPositionFromPoint(this.geometry,k)&&(this._textItem.position=[k[0],k[1]],this._textItem.anchor=\"center\",this._showText=!0);break;case\"corner\":this._computeLabelPositionFromCorner(this.geometry,this._distance,k,z)&&(this._showCallout=this._updatePosition(k,z),this._showText=!0);break;case\"segment\":this._computeLabelPositionFromSegment(this.geometry,this._distance,this._anchor,k,z)&&(this._showText=!0,this._showCallout=this._updatePosition(k,z))}this.updateVisibility(this.visible)}}_computeLabelPositionFromPoint(t,e){this.view.renderCoordsHelper.toRenderCoords(t,L);const s=this.view._stage.camera;return s.projectToRenderScreen(L,R),!(R[2]<0||R[2]>1)&&(s.renderToScreen(R,e),!0)}_computeLabelPositionFromCorner(t,e,s,i){if(!t)return!1;const o=this.view._stage.camera;return w(t.left,1,o,P),h(P,P),w(t.right,0,o,T),c(j,P,T),h(j,j),m(j,j),o.projectToRenderScreen(t.left.endRenderSpace,R),!(R[2]<0||R[2]>1)&&(o.renderToScreen(R,s),l(j,j,e*o.pixelRatio),c(j,j,R),o.renderToScreen(j,i),!0)}_computeLabelPositionFromSegment(t,e,s,i,o){if(!t)return!1;const r=t.segment,a=this.view._stage.camera;x(r.startRenderSpace,r.endRenderSpace,P,a),_(j,-P[1],P[0]);let n=!1;switch(s){case\"top\":n=j[1]<0;break;case\"bottom\":n=j[1]>0;break;case\"left\":n=j[0]>0;break;case\"right\":n=j[0]<0}if(n&&h(j,j),0===u(j))switch(s){case\"top\":j[1]=1;break;case\"bottom\":j[1]=-1;break;case\"left\":j[0]=-1;break;case\"right\":j[0]=1}return r.eval(H[t.sampleLocation],L),a.projectToRenderScreen(L,R),!(R[2]<0||R[2]>1)&&(a.renderToScreen(R,i),l(j,j,e*a.pixelRatio),c(j,j,R),a.renderToScreen(j,o),!0)}_updatePosition(t,e){if(e){const s=e[0]-t[0],i=e[1]-t[1];return this._textItem.position=[e[0],e[1]],this._textItem.anchor=Math.abs(s)>Math.abs(i)?s>0?\"left\":\"right\":i>0?\"top\":\"bottom\",this._calloutItem.startPosition=[t[0],t[1]],this._calloutItem.endPosition=[e[0],e[1]],!0}return this._textItem.position=[t[0],t[1]],this._textItem.anchor=\"center\",!1}createResources(){this._textItem=new v({visible:!0}),this._textItem.text=e(this._text),this._textItem.fontSize=this._fontSize,this._calloutItem=new b({visible:!0,width:2}),this._updateLabelPosition(),this.view.overlay.items.addMany([this._textItem,this._calloutItem]),this._handles.add(this.view.state.watch(\"camera\",(()=>{this._updateLabelPosition()})))}destroyResources(){this.view.overlay&&!this.view.overlay.destroyed&&this.view.overlay.items.removeMany([this._textItem,this._calloutItem]),this._handles.removeAll()}updateVisibility(t){this._textItem.visible=this._showText&&t,this._calloutItem.visible=this._showCallout&&t}}function w(t,e,s,i){t.eval(e,I,S),a(y,I,S),s.projectToRenderScreen(I,C),s.projectToRenderScreen(y,M),p(i,V,F),m(i,i)}function g(t){switch(t){case\"top\":return\"bottom\";case\"right\":return\"left\";case\"bottom\":return\"top\";case\"left\":return\"right\"}}const I=r(),y=r(),S=r(),P=s(),T=s(),j=s(),L=r(),R=i(),k=o(),z=o(),C=i(),F=C,M=i(),V=M,H={start:0,center:.5,end:1};export{f as LabelVisualElement,g as mirrorPosition,w as screenSpaceTangent};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{_ as r}from\"../../../../chunks/tslib.es6.js\";import{ReloadableShaderModule as e}from\"../core/shaderTechnique/ReloadableShaderModule.js\";import{ShaderTechnique as t}from\"../core/shaderTechnique/ShaderTechnique.js\";import{ShaderTechniqueConfiguration as o,parameter as i}from\"../core/shaderTechnique/ShaderTechniqueConfiguration.js\";import{Default3D as s}from\"../lib/DefaultVertexAttributeLocations.js\";import n from\"../../../webgl/Program.js\";import{makePipelineState as a,defaultDepthWriteParams as m,defaultColorWriteParams as l}from\"../../../webgl/renderState.js\";import{View as p}from\"../core/shaderLibrary/util/View.glsl.js\";import{M as f}from\"../../../../chunks/MeasurementArrow.glsl.js\";class h extends t{constructor(r,e){super(r,e)}initializeProgram(r){const e=h.shader.get().build();return new n(r.rctx,e.generateSource(\"vertex\"),e.generateSource(\"fragment\"),s)}bindPass(r,e,t){p.bindProjectionMatrix(this.program,t.camera.projectionMatrix),this.program.setUniform1f(\"width\",e.width),this.program.setUniform1f(\"outlineSize\",e.outlineSize),this.program.setUniform4fv(\"outlineColor\",e.outlineColor),this.program.setUniform1f(\"stripeLength\",e.stripeLength),this.program.setUniform4fv(\"stripeEvenColor\",e.stripeEvenColor),this.program.setUniform4fv(\"stripeOddColor\",e.stripeOddColor)}bindDraw(r){p.bindView(this.program,r)}initializePipeline(){return a({polygonOffset:this.configuration.polygonOffsetEnabled&&{factor:0,units:-4},depthTest:{func:513},depthWrite:m,colorWrite:l})}get primitiveType(){return 5}}h.shader=new e(f,(()=>import(\"./MeasurementArrow.glsl.js\")));class d extends o{constructor(){super(...arguments),this.polygonOffsetEnabled=!1}}r([i()],d.prototype,\"polygonOffsetEnabled\",void 0);export{h as MeasurementArrowTechnique,d as MeasurementArrowTechniqueConfiguration};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{c as e}from\"../../../../chunks/vec3f64.js\";import{s as t,n as s,f as r,c as i,k as n,i as o}from\"../../../../chunks/vec3.js\";import{newLayout as a}from\"../../support/buffer/InterleavedLayout.js\";import c from\"../lib/GLMaterial.js\";import{Material as u,materialParametersDefaults as f}from\"../lib/Material.js\";import{MeasurementArrowTechniqueConfiguration as l,MeasurementArrowTechnique as p}from\"../shaders/MeasurementArrowTechnique.js\";class h extends u{constructor(e){super(e,g),this.techniqueConfig=new l}getTechniqueConfig(){return this.techniqueConfig.polygonOffsetEnabled=this.params.polygonOffset,this.techniqueConfig}dispose(){}getPassParameters(){return this.params}intersect(){}createBufferWriter(){return new w}getGLMaterial(e){return 0===e.output?new m(e):void 0}}class m extends c{constructor(e){super(e),this.updateParameters()}updateParameters(){this.technique=this.techniqueRep.acquireAndReleaseExisting(p,this.material.getTechniqueConfig(),this.technique)}beginSlot(e){return 3===e}bind(e,t){e.bindProgram(this.technique.program),this.technique.bindPass(e,this.material.getPassParameters(),t)}}const g={width:32,outlineSize:.2,outlineColor:[1,.5,0,1],stripeLength:1,stripeEvenColor:[1,1,1,1],stripeOddColor:[1,.5,0,1],polygonOffset:!1,...f},d=a().vec3f(\"position\").vec3f(\"normal\").vec2f(\"uv0\").f32(\"auxpos1\"),v=e(),q=e(),b=e(),x=e(),C=e();class w{constructor(){this.vertexBufferLayout=d}allocate(e){return this.vertexBufferLayout.createBuffer(e)}elementCount(e){return 2*(e.indices.get(\"position\").length/2+1)}write(e,a,c,u){const f=a.vertexAttributes.get(\"position\").data,l=a.vertexAttributes.get(\"normal\").data,p=f.length/3,h=a&&a.indices&&a.indices.get(\"position\");h&&h.length!==2*(p-1)&&console.warn(\"MeasurementArrowMaterial does not support indices\");const m=v,g=q,d=b,w=x,P=C,j=e.transformation,y=e.invTranspTransformation,L=c.position,M=c.normal,A=c.uv0;let T=0;for(let v=0;v<p;++v){const e=3*v;if(t(m,f[e],f[e+1],f[e+2]),v<p-1){const e=3*(v+1);t(g,f[e],f[e+1],f[e+2]),t(P,l[e],l[e+1],l[e+2]),s(P,P),r(d,g,m),s(d,d),i(w,P,d),s(w,w)}const a=n(m,g);j&&y&&(o(m,m,j),o(g,g,j),o(w,w,y));const c=u+2*v,h=c+1;L.setVec(c,m),L.setVec(h,m),M.setVec(c,w),M.setVec(h,w),A.set(c,0,T),A.set(c,1,-1),A.set(h,0,T),A.set(h,1,1),v<p-1&&(T+=a)}const B=c.auxpos1;for(let t=0;t<2*p;++t)B.set(u+t,T)}}export{h as MeasurementArrowMaterial};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{isNone as e,isSome as r}from\"../../../../core/maybe.js\";import{c as t}from\"../../../../chunks/vec3f64.js\";import{f as s}from\"../../../../chunks/vec3.js\";import i from\"../../../../core/Handles.js\";import{a}from\"../../../../chunks/mat4f64.js\";import{sv3d as o}from\"../../support/stack.js\";import n from\"../../webgl-engine/lib/GeometryUtil.js\";import{Object3DVisualElement as h}from\"./Object3DVisualElement.js\";import{MeasurementArrowMaterial as l}from\"../../webgl-engine/materials/MeasurementArrowMaterial.js\";class d extends h{constructor(e){super(e),this._parameters=c,this._handles=null,this._origin=t(),this._originTransform=a(),this._arrowCenter=t(),this._renderOccluded=4,this._geometry=null,this._stripeLength=1,this._stripesEnabled=!0,this.applyProps(e)}get renderOccluded(){return this._renderOccluded}set renderOccluded(e){e!==this._renderOccluded&&(this._renderOccluded=e,this._arrowMaterial&&this._arrowMaterial.setParameterValues({renderOccluded:e}))}get geometry(){return this._geometry}set geometry(e){this._geometry=e,this.geometryChanged()}get stripeLength(){return this._stripeLength}set stripeLength(e){this._stripeLength=e,this.attached&&this._arrowMaterial.setParameterValues({stripeLength:this._stripeLength})}get stripesEnabled(){return this._stripesEnabled}set stripesEnabled(e){if(this._stripesEnabled=e,this.attached){const e=this._stripesEnabled?this._parameters.arrowStripeEvenColor:this._parameters.arrowStripeOddColor;this._arrowMaterial.setParameterValues({stripeEvenColor:e})}}createExternalResources(){const e=this._stripesEnabled?this._parameters.arrowStripeEvenColor:this._parameters.arrowStripeOddColor;this._arrowMaterial=new l({outlineColor:this._parameters.arrowOutlineColor,stripeEvenColor:e,stripeOddColor:this._parameters.arrowStripeOddColor,renderOccluded:this.renderOccluded,polygonOffset:!0}),this._handles=new i,this._handles.add(this.view.state.watch(\"camera\",(()=>{this.viewChanged()})))}destroyExternalResources(){this._arrowMaterial=null,this._handles.destroy(),this._handles=null}forEachExternalMaterial(e){e(this._arrowMaterial)}createGeometries(r){if(e(this._geometry)||e(this._geometry.startRenderSpace)||e(this._geometry.endRenderSpace))return;const t=this._createArrowGeometry(this._geometry.startRenderSpace,this._geometry.endRenderSpace,this._origin,this._geometry);r.addGeometry(t,this._arrowMaterial,this._originTransform),this.viewChanged()}_createArrowGeometry(e,r,t,i){const a=this.view.renderCoordsHelper,h=[],l=[],d=(e,r)=>{const i=o.get();s(i,e,t),h.push(i),l.push(r)};if(\"euclidean\"===i.type){i.eval(.5,this._arrowCenter);const t=o.get();a.worldUpAtPosition(this._arrowCenter,t),d(e,t),d(r,t)}else{i.eval(.5,this._arrowCenter);const e=this._parameters.arrowSubdivisions+1&-2;for(let r=0;r<e;++r){const t=r/(e-1),s=o.get(),n=o.get();i.eval(t,s),a.worldUpAtPosition(s,n),d(s,n)}}return n.createPolylineGeometry(h,l)}geometryChanged(){this.recreateGeometry()}viewChanged(){if(this.view.ready&&this.attached&&r(this._geometry)){const e=this.view._stage.camera.computeScreenPixelSizeAt(this._arrowCenter);this._arrowMaterial.setParameterValues({width:this._parameters.arrowWidth*e})}}}const c={arrowWidth:16,arrowOutlineColor:[1,.5,0,1],arrowOutlineWidth:.2,arrowStripeEvenColor:[1,1,1,1],arrowStripeOddColor:[1,.5,0,1],arrowStripeLength:16,arrowSubdivisions:128};export{d as MeasurementArrowVisualElement};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../../../chunks/tslib.es6.js\";import\"../../../../../core/has.js\";import{isNone as t,isSome as i}from\"../../../../../core/maybe.js\";import\"../../../../../core/Logger.js\";import\"../../../../../core/accessorSupport/ensureType.js\";import{property as s}from\"../../../../../core/accessorSupport/decorators/property.js\";import{subclass as a}from\"../../../../../core/accessorSupport/decorators/subclass.js\";import\"../../../../../core/urlUtils.js\";import\"../../../../../core/uuid.js\";import\"../../../../../portal/support/resourceExtension.js\";import n from\"../../../../../core/Accessor.js\";import{onLocaleChange as r}from\"../../../../../intl/locale.js\";import{sign as o,nextHighestPowerOfTen as l,deg2rad as h}from\"../../../../../core/mathUtils.js\";import{createRenderScreenPointArray3 as c,createRenderScreenPointArray as d}from\"../../../../../core/screenUtils.js\";import{fetchMessageBundle as u}from\"../../../../../intl/messages.js\";import\"../../../../../intl.js\";import{c as m}from\"../../../../../chunks/vec3f64.js\";import{g,a as _,b as p}from\"../../../../../chunks/vec3.js\";import v from\"../../../../../core/Handles.js\";import{getReferenceEllipsoid as b}from\"../../../../../geometry/projectionEllipsoid.js\";import{preferredImperialLengthUnit as L,convertUnit as w}from\"../../../../../core/unitUtils.js\";import{whenOnce as y}from\"../../../../../core/watchUtils.js\";import{formatDecimal as j,formatDMS as z,formatImperialLength as f,formatImperialVerticalLength as O,formatMetricLength as E,formatMetricVerticalLength as D}from\"../../../../../core/quantityFormatUtils.js\";import{g as S}from\"../../../../../chunks/vec2.js\";import{f as P}from\"../../../../../chunks/vec4f32.js\";import{createStipplePatternSimple as M}from\"../../../webgl-engine/materials/lineStippleUtils.js\";import{RightAngleQuadVisualElement as V}from\"../../visualElements/RightAngleQuadVisualElement.js\";import{screenSpaceTangent as A}from\"../../measurementTools/support/viewUtils.js\";import{LabelVisualElement as C,mirrorPosition as k}from\"../../visualElements/LabelVisualElement.js\";import{LineVisualElement as H}from\"../../visualElements/LineVisualElement.js\";import{GeodesicSegment as G,EuclideanSegment as R}from\"../../visualElements/support/Segment.js\";import{MeasurementArrowVisualElement as T}from\"../../visualElements/MeasurementArrowVisualElement.js\";let U=class extends n{constructor(e){super(e),this._params={...B},this._handles=new v,this._segmentVisualElement=null,this._triangleVisualElement=null,this._rightAngleQuad=null,this._projectedGeodesicLine=null,this._geodesicStartHint=null,this._geodesicEndHint=null,this._segmentLabel=null,this._verticalLabel=null,this._horizontalLabel=null,this._segmentLabelDisplayedMeasurement=\"euclidean\",this._startPosition=m(),this._endPosition=m(),this._cornerPosition=m(),this._startPositionAtSeaLevel=m(),this._endPositionAtSeaLevel=m(),this._viewMode=\"none\",this._geometryDirty=!0,this.state=\"pending\",this.messages=null,this._visualizedMeasurement=\"auto\",this._actualVisualizedMeasurement=\"euclidean\",this._visualElementOrientation=\"auto\",this._triangleOrientationOverride=null,this._triangleCollapseRatioThreshold=.03,this._geodesicDistanceThreshold=1e5}initialize(){this._handles.add(y(this.view,\"ready\",(()=>this._initialize()),!0))}_initialize(){switch(this.state){case\"ready\":throw new Error(\"invalid state\");case\"destroyed\":return}this._segmentVisualElement=new T({attached:!0,view:this.view,geometry:null,renderOccluded:4}),this._triangleVisualElement=new H({attached:!0,view:this.view,width:this._params.triangleLineWidth,color:this._params.triangleColor,renderOccluded:4}),this._rightAngleQuad=new V({attached:!0,view:this.view,color:I,renderOccluded:4}),this._projectedGeodesicLine=new H({attached:!0,view:this.view,width:this._params.geodesicProjectionLineWidth,color:this._params.geodesicProjectionLineColor,polygonOffset:!0,stipplePattern:M(this._params.guideStippleLengthPixels),stippleIntegerRepeats:!1,renderOccluded:4}),this._geodesicStartHint=new H({attached:!0,view:this.view,width:this._params.guideLineWidth,color:this._params.geodesicProjectionLineColor,polygonOffset:!0,stipplePattern:M(this._params.guideStippleLengthPixels),stippleIntegerRepeats:!1,renderOccluded:4}),this._geodesicEndHint=new H({attached:!0,view:this.view,width:this._params.guideLineWidth,color:this._params.geodesicProjectionLineColor,polygonOffset:!0,stipplePattern:M(this._params.guideStippleLengthPixels),stippleIntegerRepeats:!1,renderOccluded:4}),this._segmentLabel=new C({attached:!0,view:this.view,fontSize:this._params.direcLabelFontSize}),this._verticalLabel=new C({attached:!0,view:this.view,fontSize:this._params.verticalLabelFontSize}),this._horizontalLabel=new C({attached:!0,view:this.view,fontSize:this._params.horizontalLabelFontSize}),this._handles.add([this.dataObject.watch(\"visible\",(()=>this._update(!1)),!0),this.dataObject.watch(\"startPoint\",(()=>this._update()),!0),this.dataObject.watch(\"endPoint\",(()=>this._update()),!0),this.dataObject.watch(\"measurement\",(()=>this._update()),!0),this.dataObject.watch(\"settings.unit\",(()=>{this._updateLabels(),this._updateSegmentStripeLength()}),!0),this.view.state.watch(\"camera\",(()=>this._update()),!0),r((async()=>this._updateMessageBundle()))]),this._set(\"state\",\"ready\"),this._updateMessageBundle(),this._update()}async whenReady(){return y(this,\"ready\").then((()=>{}))}get ready(){return\"ready\"===this.state}get viewMode(){return this._viewMode}get visualizedMeasurement(){return this._visualizedMeasurement}set visualizedMeasurement(e){e!==this._visualizedMeasurement&&(this._visualizedMeasurement=e,this._update())}get actualVisualizedMeasurement(){return this._actualVisualizedMeasurement}get visualElementsOrientation(){return this._visualElementOrientation}set visualElementsOrientation(e){e!==this._visualElementOrientation&&(this._visualElementOrientation=e,this._update())}get allowVisualElementsOrientationChange(){return t(this._triangleOrientationOverride)}set allowVisualElementsOrientationChange(e){t(this._triangleOrientationOverride)!==e&&(t(this._triangleOrientationOverride)?this._triangleOrientationOverride=this._getActualVisualElementsOrientation():(this._triangleOrientationOverride=null,this._update()))}get triangleCollapseRatioThreshold(){return this._triangleCollapseRatioThreshold}set triangleCollapseRatioThreshold(e){this._triangleCollapseRatioThreshold=e,this._update()}get geodesicDistanceThreshold(){return this._geodesicDistanceThreshold}set geodesicDistanceThreshold(e){this._geodesicDistanceThreshold=e,this._update()}get segmentLabel(){return this._segmentLabel}get horizontalLabel(){return this._horizontalLabel}get verticalLabel(){return this._verticalLabel}get testData(){let e=null;const t=\"geodesic\"===this.actualVisualizedMeasurement;return e={direct:t?this.horizontalLabel:this.segmentLabel,horizontal:t?this.segmentLabel:this.horizontalLabel,vertical:this.verticalLabel},{labels:e,stripeLength:this._segmentVisualElement.stripeLength}}_update(e=!0){switch(this.state){case\"destroyed\":case\"pending\":return}const t=this.dataObject.visible;switch(this._geometryDirty=e,this._geometryDirty&&t&&(this._updateGeometryAndViewMode(),this._geometryDirty=!1),this._viewMode){case\"none\":this._segmentVisualElement.visible=!1,this._triangleVisualElement.visible=!1,this._rightAngleQuad.visible=!1,this._projectedGeodesicLine.visible=!1,this._geodesicStartHint.visible=!1,this._geodesicEndHint.visible=!1;break;case\"segment\":this._segmentVisualElement.visible=t,this._triangleVisualElement.visible=!1,this._rightAngleQuad.visible=!1,this._projectedGeodesicLine.visible=!1,this._geodesicStartHint.visible=!1,this._geodesicEndHint.visible=!1;break;case\"segment-and-triangle\":this._segmentVisualElement.visible=t,this._triangleVisualElement.visible=t,this._rightAngleQuad.visible=t,this._projectedGeodesicLine.visible=!1,this._geodesicStartHint.visible=!1,this._geodesicEndHint.visible=!1;break;case\"segment-and-projection\":this._segmentVisualElement.visible=t,this._projectedGeodesicLine.visible=!0,this._geodesicStartHint.visible=!0,this._geodesicEndHint.visible=!0}this._updateLabels()}destroy(){switch(this.state){case\"destroyed\":case\"pending\":return}this._handles.destroy(),this._segmentVisualElement.destroy(),this._segmentVisualElement=null,this._triangleVisualElement.destroy(),this._triangleVisualElement=null,this._rightAngleQuad.destroy(),this._rightAngleQuad=null,this._projectedGeodesicLine.destroy(),this._projectedGeodesicLine=null,this._geodesicStartHint.destroy(),this._geodesicStartHint=null,this._geodesicEndHint.destroy(),this._geodesicEndHint=null,this._segmentLabel.destroy(),this._segmentLabel=null,this._verticalLabel.destroy(),this._verticalLabel=null,this._horizontalLabel.destroy(),this._horizontalLabel=null,this.set(\"view\",null),this._set(\"state\",\"destroyed\")}_updateGeometryAndViewMode(){const e=this.view,i=e.renderCoordsHelper;if(t(this.dataObject.startPoint)||t(this.dataObject.endPoint)||this.dataObject.startPoint.equals(this.dataObject.endPoint))return this._viewMode=\"none\",void(this._actualVisualizedMeasurement=\"auto\"===this._visualizedMeasurement?\"euclidean\":this._visualizedMeasurement);i.toRenderCoords(this.dataObject.startPoint,this._startPosition),i.toRenderCoords(this.dataObject.endPoint,this._endPosition);const s=this._getActualVisualElementsOrientation(),a=this._updateActualVisualizedMeasurement();this._viewMode=this._computeViewMode(a);let n=this._startPosition,r=this._endPosition;const o=\"above-segment\"===s?1:-1,l=o*(i.getAltitude(r)-i.getAltitude(n));l<0&&(n=this._endPosition,r=this._startPosition);const h=\"geodesic\"===a?new G(this._startPosition,this._endPosition,i.spatialReference):new R(this._startPosition,this._endPosition);switch(this._segmentVisualElement.geometry=h,this._updateSegmentStripeLength(),this._segmentLabelDisplayedMeasurement=a,this._viewMode){case\"segment\":this._segmentLabel.anchor=\"above-segment\"===s?\"top\":\"bottom\",this._segmentLabel.geometry={type:\"segment\",segment:h,sampleLocation:\"center\"};break;case\"segment-and-triangle\":{const t=this._cornerPosition;i.worldUpAtPosition(n,t),_(t,t,o*Math.abs(l)),p(t,t,n),this._triangleVisualElement.geometry=[[[n[0],n[1],n[2]],[t[0],t[1],t[2]],[r[0],r[1],r[2]]]],this._rightAngleQuad.geometry={previous:n,center:t,next:r};const a=new R(n,t),c=new R(t,r),d=W(n,r,t,s,e.state.camera);this._segmentLabel.geometry={type:\"segment\",segment:h,sampleLocation:\"center\"},this._segmentLabel.anchor=d.segment,this._verticalLabel.geometry={type:\"segment\",segment:a,sampleLocation:\"center\"},this._verticalLabel.anchor=d.vertical,this._horizontalLabel.geometry={type:\"segment\",segment:c,sampleLocation:\"center\"},this._horizontalLabel.anchor=d.horizontal;break}case\"segment-and-projection\":{g(this._startPositionAtSeaLevel,this._startPosition),g(this._endPositionAtSeaLevel,this._endPosition),i.setAltitude(0,this._startPositionAtSeaLevel),i.setAltitude(0,this._endPositionAtSeaLevel);const e=new G(this._startPositionAtSeaLevel,this._endPositionAtSeaLevel,i.spatialReference);this._projectedGeodesicLine.setGeometryFromSegment(e),this._geodesicStartHint.setGeometryFromSegment(new R(this._startPositionAtSeaLevel,this._startPosition)),this._geodesicEndHint.setGeometryFromSegment(new R(this._endPositionAtSeaLevel,this._endPosition)),this._segmentLabel.geometry={type:\"segment\",segment:e,sampleLocation:\"center\"},this._segmentLabel.anchor=\"above-segment\"===s?\"top\":\"bottom\";break}}}_updateLabels(){switch(this.state){case\"pending\":case\"destroyed\":return}const e=this.messages,i=this.dataObject.measurement;if(t(i)||!e)return this._segmentLabel.visible=!1,this._horizontalLabel.visible=!1,void(this._verticalLabel.visible=!1);const s={verticalDistance:\"\",horizontalDistance:\"\",euclideanDistance:\"\",geodesicDistance:\"\"},a=i.directDistance,n=i.horizontalDistance,r=i.verticalDistance,o=i.geodesicDistance,l=i.geodesicAngle;switch(this.dataObject.settings.unit){case\"metric\":s.euclideanDistance=a&&E(e,a),s.horizontalDistance=n&&E(e,n),s.verticalDistance=r&&D(e,r),s.geodesicDistance=o&&E(e,o);break;case\"imperial\":s.euclideanDistance=a&&f(e,a),s.horizontalDistance=n&&f(e,n),s.verticalDistance=r&&O(e,r),s.geodesicDistance=o&&f(e,o);break;case\"degrees\":{const t=l&&j(e,l,\"degrees\");s.euclideanDistance=t,s.horizontalDistance=t,s.geodesicDistance=t;break}case\"degrees-minutes-seconds\":s.horizontalDistance=l&&z(l);break;default:{const t=this.dataObject.settings.unit;s.euclideanDistance=a&&j(e,a,t),s.horizontalDistance=n&&j(e,n,t),s.verticalDistance=r&&j(e,r,t),s.geodesicDistance=o&&j(e,o,t);break}}this._segmentLabel.text=\"euclidean\"===this._segmentLabelDisplayedMeasurement?s.euclideanDistance:s.geodesicDistance,this._horizontalLabel.text=s.horizontalDistance,this._verticalLabel.text=s.verticalDistance;const h=this.dataObject.visible;switch(this._viewMode){case\"none\":this._segmentLabel.visible=!1,this._horizontalLabel.visible=!1,this._verticalLabel.visible=!1;break;case\"segment\":this._segmentLabel.visible=h,this._horizontalLabel.visible=!1,this._verticalLabel.visible=!1;break;case\"segment-and-triangle\":this._segmentLabel.visible=h,this._horizontalLabel.visible=h,this._verticalLabel.visible=h;break;case\"segment-and-projection\":this._segmentLabel.visible=h,this._horizontalLabel.visible=!1,this._verticalLabel.visible=!1}this.notifyChange(\"segmentLabel\"),this.notifyChange(\"horizontalLabel\"),this.notifyChange(\"verticalLabel\")}_updateSegmentStripeLength(){const e=Q(this.view,this.dataObject);i(e)?(this._segmentVisualElement.stripeLength=e,this._segmentVisualElement.stripesEnabled=!0):this._segmentVisualElement.stripesEnabled=!1}_computeViewMode(e){const i=this.dataObject,s=i.measurement;if(\"geodesic\"===e){if(!x(i,this.geodesicDistanceThreshold))return\"segment\";if(F(this.view,this._startPosition)||F(this.view,this._endPosition))return\"segment-and-projection\"}if(t(s))return\"segment\";return Math.min(s.verticalDistance.value/s.horizontalDistance.value,s.horizontalDistance.value/s.verticalDistance.value)<this.triangleCollapseRatioThreshold?\"segment\":\"segment-and-triangle\"}_getActualVisualElementsOrientation(){return i(this._triangleOrientationOverride)?this._triangleOrientationOverride:\"auto\"===this.visualElementsOrientation?this.view.state.camera.aboveGround?\"above-segment\":\"below-segment\":this.visualElementsOrientation}_updateActualVisualizedMeasurement(){if(\"auto\"===this._visualizedMeasurement){this._actualVisualizedMeasurement=\"euclidean\";const e=this.dataObject.settings.unit;\"degrees\"!==e&&\"degrees-minutes-seconds\"!==e||(this._actualVisualizedMeasurement=\"geodesic\"),x(this.dataObject,this.geodesicDistanceThreshold)&&(this._actualVisualizedMeasurement=\"geodesic\")}else this._actualVisualizedMeasurement=this._visualizedMeasurement;return this._actualVisualizedMeasurement}_updateMessageBundle(){u(\"esri/core/t9n/Units\").then((e=>{this.messages=e,this.view&&this._updateLabels()}))}};function x(e,t){return i(e.measurement)&&e.measurement.horizontalDistance&&e.measurement.horizontalDistance.value>t}function F(e,t){if(!e.state)return!1;const i=e.state.camera,s=e.renderCoordsHelper,a=i.computeScreenPixelSizeAt(t);return s.getAltitude(t)/a>=10}function W(e,t,i,s,a){const n=J,r=K;a.projectToRenderScreen(i,n),a.projectToRenderScreen(t,r);const l={segment:\"bottom\",horizontal:\"top\",vertical:n[0]<r[0]?\"left\":\"right\"};{const s=N,n=X;if(A(e,i,s,a),A(e,t,n,a),S(s,n)>=q)l.segment=o(s[1])===o(n[1])?k(l.vertical):l.vertical;else{const e=Y;A(i,t,e,a),S(e,n)>=q&&(l.segment=o(e[0])===o(n[0])?k(l.horizontal):l.horizontal)}}if(\"below-segment\"===s){const e=e=>\"top\"===e?\"bottom\":\"top\";l.segment=e(l.segment),l.horizontal=e(l.horizontal),l.vertical=e(l.vertical)}return l}function Q(e,t){let s=null;if(i(t.measurement)){const e=t.measurement.directDistance;switch(t.settings.unit){case\"metric\":s=e&&e.toUnit(\"meters\");break;case\"imperial\":s=e&&e.toUnit(L(e.value,e.unit));break;case\"degrees\":case\"degrees-minutes-seconds\":{const e=t.measurement.geodesicAngle;s=e&&e.toUnit(\"degrees\");break}default:s=e&&e.toUnit(t.settings.unit)}}if(s){let t=1;return t=l(s.value/30),t*=\"degrees\"===s.unit?b(e.spatialReference).metersPerDegree:w(1,s.unit,\"meters\"),t}return null}e([s({readOnly:!0})],U.prototype,\"state\",void 0),e([s()],U.prototype,\"ready\",null),e([s()],U.prototype,\"messages\",void 0),e([s()],U.prototype,\"view\",void 0),e([s()],U.prototype,\"dataObject\",void 0),e([s()],U.prototype,\"viewMode\",null),e([s()],U.prototype,\"segmentLabel\",null),e([s()],U.prototype,\"horizontalLabel\",null),e([s()],U.prototype,\"verticalLabel\",null),U=e([a(\"esri.views.3d.interactive.graphics.DirectLineMeasurement3D.DirectLineMeasurement3DView\")],U);const I=P(1,.5,0,.75),B={laserLineGlowColor:[1,.5,0],laserLineGlowWidth:8,laserLineGlowFalloff:8,laserLineInnerColor:[1,1,1],laserLineInnerWidth:.75,laserLineGlobalAlpha:.75,laserLineEnabled:!0,handleColor:[1,.5,0],handleOpacity:.5,handleRadius:5,triangleColor:I,triangleLineWidth:3,triangleCornerSize:32,triangleSubdivisions:128,arrowWidth:16,arrowOutlineColor:[1,.5,0,1],arrowOutlineWidth:.2,arrowStripeEvenColor:[1,1,1,1],arrowStripeOddColor:[1,.5,0,1],arrowStripeLength:16,arrowSubdivisions:128,geodesicProjectionLineWidth:2,geodesicProjectionLineColor:I,guideLineWidth:2,guideLineColor:I,guideStippleLengthPixels:6,labelDistance:25,direcLabelFontSize:16,horizontalLabelFontSize:12,verticalLabelFontSize:12},q=Math.cos(h(12)),J=c(),K=c(),N=d(),X=d(),Y=d();export{U as DirectLineMeasurement3DView};\n"],"sourceRoot":""}