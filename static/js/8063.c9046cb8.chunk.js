"use strict";(globalThis.webpackChunkimaps=globalThis.webpackChunkimaps||[]).push([[8063],{70148:(e,t,i)=>{i.d(t,{RN:()=>d,e9:()=>l,hU:()=>p,uu:()=>h});var n=i(51995),o=i(42265),r=i(28357);function s(e,t){const i=e.a*t;return(0,r.EX)(e)>225?new n.Z([0,0,0,i]):new n.Z([255,255,255,i])}function a(e,t){const i=new n.Z(e);return i.a*=t,i}function l(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return a(o.Z.analysisTheme.accentColor,e)}function d(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return s(l(),e)}function h(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return a(o.Z.analysisTheme.textColor,e)}function p(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return s(h(),e)}},58971:(e,t,i)=>{i.d(t,{G6:()=>P,Ie:()=>x,J9:()=>C,RF:()=>y,U1:()=>b,vY:()=>l,ym:()=>f});var n=i(92026),o=i(77981);const r=(e,t,i)=>[t,i],s=(e,t,i)=>[t,i,e[2]],a=(e,t,i)=>[t,i,e[2],e[3]];function l(e){return e?{originPosition:"upper-left"===e.originPosition?"upperLeft":"lower-left"===e.originPosition?"lowerLeft":e.originPosition,scale:e.tolerance?[e.tolerance,e.tolerance]:[1,1],translate:(0,n.pC)(e.extent)?[e.extent.xmin,e.extent.ymax]:[0,0]}:null}function d(e,t){let{scale:i,translate:n}=e;return Math.round((t-n[0])/i[0])}function h(e,t){let{scale:i,translate:n}=e;return Math.round((n[1]-t)/i[1])}function p(e,t,i){const n=[];let o,r,s,a;for(let l=0;l<i.length;l++){const p=i[l];l>0?(s=d(e,p[0]),a=h(e,p[1]),s===o&&a===r||(n.push(t(p,s-o,a-r)),o=s,r=a)):(o=d(e,p[0]),r=h(e,p[1]),n.push(t(p,o,r)))}return n.length>0?n:null}function c(e,t){let{scale:i,translate:n}=e;return t*i[0]+n[0]}function u(e,t){let{scale:i,translate:n}=e;return n[1]-t*i[1]}function v(e,t,i){const n=new Array(i.length);if(!i.length)return n;const[o,r]=e.scale;let s=c(e,i[0][0]),a=u(e,i[0][1]);n[0]=t(i[0],s,a);for(let l=1;l<i.length;l++){const e=i[l];s+=e[0]*o,a-=e[1]*r,n[l]=t(e,s,a)}return n}function _(e,t,i){const n=new Array(i.length);for(let o=0;o<i.length;o++)n[o]=v(e,t,i[o]);return n}function g(e,t,i,n,o){return t.points=function(e,t,i,n){return p(e,i?n?a:s:n?s:r,t)}(e,i.points,n,o)??[],t}function y(e,t,i,n,o){return t.x=d(e,i.x),t.y=h(e,i.y),t!==i&&(n&&(t.z=i.z),o&&(t.m=i.m)),t}function m(e,t,i,n,o){const l=function(e,t,i,n){const o=[],l=i?n?a:s:n?s:r;for(let r=0;r<t.length;r++){const i=p(e,l,t[r]);i&&i.length>=3&&o.push(i)}return o.length?o:null}(e,i.rings,n,o);return l?(t.rings=l,t):null}function w(e,t,i,n,o){const l=function(e,t,i,n){const o=[],l=i?n?a:s:n?s:r;for(let r=0;r<t.length;r++){const i=p(e,l,t[r]);i&&i.length>=2&&o.push(i)}return o.length?o:null}(e,i.paths,n,o);return l?(t.paths=l,t):null}function f(e,t){return e&&t?(0,o.wp)(t)?y(e,{},t,!1,!1):(0,o.l9)(t)?w(e,{},t,!1,!1):(0,o.oU)(t)?m(e,{},t,!1,!1):(0,o.aW)(t)?g(e,{},t,!1,!1):(0,o.YX)(t)?function(e,t,i,n,o){return t.xmin=d(e,i.xmin),t.ymin=h(e,i.ymin),t.xmax=d(e,i.xmax),t.ymax=h(e,i.ymax),t!==i&&(n&&(t.zmin=i.zmin,t.zmax=i.zmax),o&&(t.mmin=i.mmin,t.mmax=i.mmax)),t}(e,{},t,!1,!1):null:null}function C(e,t,i,o,l){return(0,n.pC)(i)&&(t.points=function(e,t,i,n){return v(e,i?n?a:s:n?s:r,t)}(e,i.points,o,l)),t}function b(e,t,i,o,r){return(0,n.Wi)(i)||(t.x=c(e,i.x),t.y=u(e,i.y),t!==i&&(o&&(t.z=i.z),r&&(t.m=i.m))),t}function x(e,t,i,o,l){return(0,n.pC)(i)&&(t.rings=function(e,t,i,n){return _(e,i?n?a:s:n?s:r,t)}(e,i.rings,o,l)),t}function P(e,t,i,o,l){return(0,n.pC)(i)&&(t.paths=function(e,t,i,n){return _(e,i?n?a:s:n?s:r,t)}(e,i.paths,o,l)),t}},93655:(e,t,i)=>{i.d(t,{Z:()=>u});var n=i(27366),o=i(49861),r=(i(25243),i(63780),i(69912)),s=i(68748),a=i(30651),l=i(6693),d=i(56811),h=i(78983),p=i(64575);let c=class extends((0,l.h)((0,d.M)(a.Z))){constructor(e){super(e),this.elevationInfo=null,this.graphics=new h.J,this.screenSizePerspectiveEnabled=!0,this.type="graphics",this.internal=!1}destroy(){this.removeAll(),this.graphics.destroy()}add(e){return this.graphics.add(e),this}addMany(e){return this.graphics.addMany(e),this}removeAll(){return this.graphics.removeAll(),this}remove(e){this.graphics.remove(e)}removeMany(e){this.graphics.removeMany(e)}on(e,t){return super.on(e,t)}graphicChanged(e){this.emit("graphic-update",e)}};(0,n._)([(0,o.Cb)({type:p.Z})],c.prototype,"elevationInfo",void 0),(0,n._)([(0,o.Cb)((0,s.z)(h.J,"graphics"))],c.prototype,"graphics",void 0),(0,n._)([(0,o.Cb)({type:["show","hide"]})],c.prototype,"listMode",void 0),(0,n._)([(0,o.Cb)()],c.prototype,"screenSizePerspectiveEnabled",void 0),(0,n._)([(0,o.Cb)({readOnly:!0})],c.prototype,"type",void 0),(0,n._)([(0,o.Cb)({constructOnly:!0})],c.prototype,"internal",void 0),c=(0,n._)([(0,r.j)("esri.layers.GraphicsLayer")],c);const u=c},96669:(e,t,i)=>{function n(e,t){return t?"xoffset"in t&&t.xoffset?Math.max(e,Math.abs(t.xoffset)):"yoffset"in t&&t.yoffset?Math.max(e,Math.abs(t.yoffset||0)):e:e}function o(e,t){return"number"==typeof e?e:e&&e.stops&&e.stops.length?function(e){let t=0,i=0;for(let n=0;n<e.length;n++){const o=e[n].size;"number"==typeof o&&(t+=o,i++)}return t/i}(e.stops):t}function r(e,t){if(!t)return e;const i=t.filter((e=>"size"===e.type)).map((t=>{const{maxSize:i,minSize:n}=t;return(o(i,e)+o(n,e))/2}));let n=0;const r=i.length;if(0===r)return e;for(let o=0;o<r;o++)n+=i[o];const s=Math.floor(n/r);return Math.max(s,e)}function s(e){const t=e&&e.renderer,i="touch"===(e&&e.event&&e.event.pointerType)?9:6;if(!t)return i;const o="visualVariables"in t?r(i,t.visualVariables):i;if("simple"===t.type)return n(o,t.symbol);if("unique-value"===t.type){let e=o;return t.uniqueValueInfos?.forEach((t=>{e=n(e,t.symbol)})),e}if("class-breaks"===t.type){let e=o;return t.classBreakInfos.forEach((t=>{e=n(e,t.symbol)})),e}return"dot-density"===t.type||t.type,o}i.d(t,{k:()=>s})},48202:(e,t,i)=>{var n,o,r,s,a,l,d,h,p,c,u,v,_,g,y,m,w,f,C,b,x,P,S,T,O,V,H,L,M,E,A,k,R,I,D,Z,U,G,N,B,z,F,W,j,K,Y,X,J,q,Q,$,ee,te,ie,ne,oe,re,se,ae,le,de;i.d(t,{$y:()=>P,AH:()=>o,CS:()=>X,DD:()=>h,Dd:()=>M,Em:()=>x,JS:()=>K,Ky:()=>p,Lh:()=>J,Qb:()=>re,RL:()=>n,RS:()=>ae,TF:()=>b,Tx:()=>a,UR:()=>w,UX:()=>oe,bj:()=>Y,eZ:()=>d,id:()=>O,kP:()=>Z,of:()=>u,r4:()=>B,sj:()=>U,v2:()=>r,zQ:()=>L,zV:()=>m}),function(e){e[e.BUTT=0]="BUTT",e[e.ROUND=1]="ROUND",e[e.SQUARE=2]="SQUARE",e[e.UNKNOWN=4]="UNKNOWN"}(n||(n={})),function(e){e[e.BEVEL=0]="BEVEL",e[e.ROUND=1]="ROUND",e[e.MITER=2]="MITER",e[e.UNKNOWN=4]="UNKNOWN"}(o||(o={})),function(e){e[e.SCREEN=0]="SCREEN",e[e.MAP=1]="MAP"}(r||(r={})),function(e){e[e.Tint=0]="Tint",e[e.Ignore=1]="Ignore",e[e.Multiply=99]="Multiply"}(s||(s={})),function(e){e.Both="Both",e.JustBegin="JustBegin",e.JustEnd="JustEnd",e.None="None"}(a||(a={})),function(e){e[e.Mosaic=0]="Mosaic",e[e.Centered=1]="Centered"}(l||(l={})),function(e){e[e.Normal=0]="Normal",e[e.Superscript=1]="Superscript",e[e.Subscript=2]="Subscript"}(d||(d={})),function(e){e[e.MSSymbol=0]="MSSymbol",e[e.Unicode=1]="Unicode"}(h||(h={})),function(e){e[e.Unspecified=0]="Unspecified",e[e.TrueType=1]="TrueType",e[e.PSOpenType=2]="PSOpenType",e[e.TTOpenType=3]="TTOpenType",e[e.Type1=4]="Type1"}(p||(p={})),function(e){e[e.Display=0]="Display",e[e.Map=1]="Map"}(c||(c={})),function(e){e.None="None",e.Loop="Loop",e.Oscillate="Oscillate"}(u||(u={})),function(e){e[e.Z=0]="Z",e[e.X=1]="X",e[e.Y=2]="Y"}(v||(v={})),function(e){e[e.XYZ=0]="XYZ",e[e.ZXY=1]="ZXY",e[e.YXZ=2]="YXZ"}(_||(_={})),function(e){e[e.Rectangle=0]="Rectangle",e[e.RoundedRectangle=1]="RoundedRectangle",e[e.Oval=2]="Oval"}(g||(g={})),function(e){e[e.None=0]="None",e[e.Alpha=1]="Alpha",e[e.Screen=2]="Screen",e[e.Multiply=3]="Multiply",e[e.Add=4]="Add"}(y||(y={})),function(e){e[e.TTB=0]="TTB",e[e.RTL=1]="RTL",e[e.BTT=2]="BTT"}(m||(m={})),function(e){e[e.None=0]="None",e[e.SignPost=1]="SignPost",e[e.FaceNearPlane=2]="FaceNearPlane"}(w||(w={})),function(e){e[e.Float=0]="Float",e[e.String=1]="String",e[e.Boolean=2]="Boolean"}(f||(f={})),function(e){e[e.Intersect=0]="Intersect",e[e.Subtract=1]="Subtract"}(C||(C={})),function(e){e.OpenEnded="OpenEnded",e.Block="Block",e.Crossed="Crossed"}(b||(b={})),function(e){e.FullGeometry="FullGeometry",e.PerpendicularFromFirstSegment="PerpendicularFromFirstSegment",e.ReversedFirstSegment="ReversedFirstSegment",e.PerpendicularToSecondSegment="PerpendicularToSecondSegment",e.SecondSegmentWithTicks="SecondSegmentWithTicks",e.DoublePerpendicular="DoublePerpendicular",e.OppositeToFirstSegment="OppositeToFirstSegment",e.TriplePerpendicular="TriplePerpendicular",e.HalfCircleFirstSegment="HalfCircleFirstSegment",e.HalfCircleSecondSegment="HalfCircleSecondSegment",e.HalfCircleExtended="HalfCircleExtended",e.OpenCircle="OpenCircle",e.CoverageEdgesWithTicks="CoverageEdgesWithTicks",e.GapExtentWithDoubleTicks="GapExtentWithDoubleTicks",e.GapExtentMidline="GapExtentMidline",e.Chevron="Chevron",e.PerpendicularWithArc="PerpendicularWithArc",e.ClosedHalfCircle="ClosedHalfCircle",e.TripleParallelExtended="TripleParallelExtended",e.ParallelWithTicks="ParallelWithTicks",e.Parallel="Parallel",e.PerpendicularToFirstSegment="PerpendicularToFirstSegment",e.ParallelOffset="ParallelOffset",e.OffsetOpposite="OffsetOpposite",e.OffsetSame="OffsetSame",e.CircleWithArc="CircleWithArc",e.DoubleJog="DoubleJog",e.PerpendicularOffset="PerpendicularOffset",e.LineExcludingLastSegment="LineExcludingLastSegment",e.MultivertexArrow="MultivertexArrow",e.CrossedArrow="CrossedArrow",e.ChevronArrow="ChevronArrow",e.ChevronArrowOffset="ChevronArrowOffset",e.PartialFirstSegment="PartialFirstSegment",e.Arch="Arch",e.CurvedParallelTicks="CurvedParallelTicks",e.Arc90Degrees="Arc90Degrees"}(x||(x={})),function(e){e.Mitered="Mitered",e.Bevelled="Bevelled",e.Rounded="Rounded",e.Square="Square",e.TrueBuffer="TrueBuffer"}(P||(P={})),function(e){e.ClosePath="ClosePath",e.ConvexHull="ConvexHull",e.RectangularBox="RectangularBox"}(S||(S={})),function(e){e.BeginningOfLine="BeginningOfLine",e.EndOfLine="EndOfLine"}(T||(T={})),function(e){e.Mitered="Mitered",e.Bevelled="Bevelled",e.Rounded="Rounded",e.Square="Square"}(O||(O={})),function(e){e.Fast="Fast",e.Accurate="Accurate"}(V||(V={})),function(e){e.BeginningOfLine="BeginningOfLine",e.EndOfLine="EndOfLine"}(H||(H={})),function(e){e.Sinus="Sinus",e.Square="Square",e.Triangle="Triangle",e.Random="Random"}(L||(L={})),function(e){e[e.None=0]="None",e[e.Default=1]="Default",e[e.Force=2]="Force"}(M||(M={})),function(e){e[e.Buffered=0]="Buffered",e[e.Left=1]="Left",e[e.Right=2]="Right",e[e.AlongLine=3]="AlongLine"}(E||(E={})),function(e){e[e.Linear=0]="Linear",e[e.Rectangular=1]="Rectangular",e[e.Circular=2]="Circular",e[e.Buffered=3]="Buffered"}(A||(A={})),function(e){e[e.Discrete=0]="Discrete",e[e.Continuous=1]="Continuous"}(k||(k={})),function(e){e[e.AcrossLine=0]="AcrossLine",e[e.AloneLine=1]="AloneLine"}(R||(R={})),function(e){e[e.Left=0]="Left",e[e.Right=1]="Right",e[e.Center=2]="Center",e[e.Justify=3]="Justify"}(I||(I={})),function(e){e[e.Base=0]="Base",e[e.MidPoint=1]="MidPoint",e[e.ThreePoint=2]="ThreePoint",e[e.FourPoint=3]="FourPoint",e[e.Underline=4]="Underline",e[e.CircularCW=5]="CircularCW",e[e.CircularCCW=6]="CircularCCW"}(D||(D={})),function(e){e.Butt="Butt",e.Round="Round",e.Square="Square"}(Z||(Z={})),function(e){e.NoConstraint="NoConstraint",e.HalfPattern="HalfPattern",e.HalfGap="HalfGap",e.FullPattern="FullPattern",e.FullGap="FullGap",e.Custom="Custom"}(U||(U={})),function(e){e[e.None=-1]="None",e[e.Custom=0]="Custom",e[e.Circle=1]="Circle",e[e.OpenArrow=2]="OpenArrow",e[e.ClosedArrow=3]="ClosedArrow",e[e.Diamond=4]="Diamond"}(G||(G={})),function(e){e[e.ExtraLeading=0]="ExtraLeading",e[e.Multiple=1]="Multiple",e[e.Exact=2]="Exact"}(N||(N={})),function(e){e.Bevel="Bevel",e.Round="Round",e.Miter="Miter"}(B||(B={})),function(e){e[e.Default=0]="Default",e[e.String=1]="String",e[e.Numeric=2]="Numeric"}(z||(z={})),function(e){e[e.InsidePolygon=0]="InsidePolygon",e[e.PolygonCenter=1]="PolygonCenter",e[e.RandomlyInsidePolygon=2]="RandomlyInsidePolygon"}(F||(F={})),function(e){e[e.Tint=0]="Tint",e[e.Replace=1]="Replace",e[e.Multiply=2]="Multiply"}(W||(W={})),function(e){e[e.ClipAtBoundary=0]="ClipAtBoundary",e[e.RemoveIfCenterOutsideBoundary=1]="RemoveIfCenterOutsideBoundary",e[e.DoNotTouchBoundary=2]="DoNotTouchBoundary",e[e.DoNotClip=3]="DoNotClip"}(j||(j={})),function(e){e.NoConstraint="NoConstraint",e.WithMarkers="WithMarkers",e.WithFullGap="WithFullGap",e.WithHalfGap="WithHalfGap",e.Custom="Custom"}(K||(K={})),function(e){e.Fixed="Fixed",e.Random="Random",e.RandomFixedQuantity="RandomFixedQuantity"}(Y||(Y={})),function(e){e.LineMiddle="LineMiddle",e.LineBeginning="LineBeginning",e.LineEnd="LineEnd",e.SegmentMidpoint="SegmentMidpoint"}(X||(X={})),function(e){e.OnPolygon="OnPolygon",e.CenterOfMass="CenterOfMass",e.BoundingBoxCenter="BoundingBoxCenter"}(J||(J={})),function(e){e[e.Low=0]="Low",e[e.Medium=1]="Medium",e[e.High=2]="High"}(q||(q={})),function(e){e[e.MarkerCenter=0]="MarkerCenter",e[e.MarkerBounds=1]="MarkerBounds"}(Q||(Q={})),function(e){e[e.None=0]="None",e[e.PropUniform=1]="PropUniform",e[e.PropNonuniform=2]="PropNonuniform",e[e.DifUniform=3]="DifUniform",e[e.DifNonuniform=4]="DifNonuniform"}($||($={})),function(e){e.Tube="Tube",e.Strip="Strip",e.Wall="Wall"}(ee||(ee={})),function(e){e[e.Random=0]="Random",e[e.Increasing=1]="Increasing",e[e.Decreasing=2]="Decreasing",e[e.IncreasingThenDecreasing=3]="IncreasingThenDecreasing"}(te||(te={})),function(e){e[e.Relative=0]="Relative",e[e.Absolute=1]="Absolute"}(ie||(ie={})),function(e){e[e.Normal=0]="Normal",e[e.LowerCase=1]="LowerCase",e[e.Allcaps=2]="Allcaps"}(ne||(ne={})),function(e){e[e.LTR=0]="LTR",e[e.RTL=1]="RTL"}(oe||(oe={})),function(e){e.Draft="Draft",e.Picture="Picture",e.Text="Text"}(re||(re={})),function(e){e[e.Top=0]="Top",e[e.Center=1]="Center",e[e.Baseline=2]="Baseline",e[e.Bottom=3]="Bottom"}(se||(se={})),function(e){e[e.Right=0]="Right",e[e.Upright=1]="Upright"}(ae||(ae={})),function(e){e[e.Small=0]="Small",e[e.Medium=1]="Medium",e[e.Large=2]="Large"}(le||(le={})),function(e){e[e.Calm=0]="Calm",e[e.Rippled=1]="Rippled",e[e.Slight=2]="Slight",e[e.Moderate=3]="Moderate"}(de||(de={}))},85577:(e,t,i)=>{i.d(t,{r:()=>m});i(59486);var n=i(52639),o=(i(51508),i(42537)),r=i(17842),s=i(88396),a=i(6394),l=i(71353),d=i(48202),h=i(70040),p=i(76014),c=i(38561),u=i(16072),v=i(16851),_=i(75021),g=i(585),y=i(29909);class m extends c.a{constructor(e){super(),this._graphicsLayer=e}visualizeIntersectionPoint(e,t){return this._visualizeSnappingIndicator(new g.Z({x:e.intersectionPoint[0],y:e.intersectionPoint[1],spatialReference:t.spatialReference}),C)}visualizePoint(e,t){return this._visualizeSnappingIndicator(new g.Z({x:e.point[0],y:e.point[1],spatialReference:t.spatialReference}),b)}visualizeLine(e,t){return this._visualizeSnappingIndicator(new y.Z({paths:[[e.lineStart,e.lineEnd]],spatialReference:t.spatialReference}),x)}visualizeParallelSign(e,t){return this._visualizeSnappingIndicator(new y.Z({paths:[[e.lineStart,e.lineEnd]],spatialReference:t.spatialReference}),P)}visualizeRightAngleQuad(e,t){return this._visualizeSnappingIndicator(new y.Z({paths:[[e.previousVertex,e.centerVertex,e.nextVertex]],spatialReference:t.spatialReference}),V(e))}_visualizeSnappingIndicator(e,t){const i=new n.Z({geometry:e,symbol:t});return this._graphicsLayer.add(i),(0,o.kB)((()=>{this._graphicsLayer.remove(i)}))}}const w=h.O.main.toArray(),f=[...h.O.main.toRgb(),100],C=new u.Z({outline:new v.Z({width:1.5,color:w}),size:15,color:[0,0,0,0]}),b=new u.Z({outline:{width:.5,color:[0,0,0,1]},size:10,color:w}),x=new _.Z({data:{type:"CIMSymbolReference",symbol:{type:"CIMLineSymbol",symbolLayers:[{type:"CIMSolidStroke",enable:!0,capStyle:d.kP.Butt,joinStyle:d.r4.Round,miterLimit:10,width:(0,r.Wz)(p.c.lineHintWidthTarget),color:w}]}}}),P=new _.Z({data:{type:"CIMSymbolReference",symbol:{type:"CIMLineSymbol",symbolLayers:[{type:"CIMVectorMarker",enable:!0,anchorPoint:{x:0,y:-1,z:0},anchorPointUnits:"Relative",size:5,markerPlacement:{type:"CIMMarkerPlacementOnLine",placePerPart:!0,angleToLine:!0,relativeTo:"LineMiddle"},frame:{xmin:-5,ymin:-1.5,xmax:5,ymax:1.5},markerGraphics:[{type:"CIMMarkerGraphic",geometry:{rings:[[[7,0],[-7,0],[-7,1.5],[7,1.5]]]},symbol:{type:"CIMPolygonSymbol",symbolLayers:[{type:"CIMSolidFill",enable:!0,color:w}]}}],scaleSymbolsProportionally:!0,respectFrame:!0},{type:"CIMVectorMarker",enable:!0,anchorPoint:{x:0,y:1,z:0},anchorPointUnits:"Relative",size:5,markerPlacement:{type:"CIMMarkerPlacementOnLine",placePerPart:!0,angleToLine:!0,relativeTo:"LineMiddle"},frame:{xmin:-5,ymin:-1.5,xmax:5,ymax:1.5},markerGraphics:[{type:"CIMMarkerGraphic",geometry:{rings:[[[7,0],[-7,0],[-7,-1.5],[7,-1.5]]]},symbol:{type:"CIMPolygonSymbol",symbolLayers:[{type:"CIMSolidFill",enable:!0,color:w}]}}],scaleSymbolsProportionally:!0,respectFrame:!0}]}}}),S=e=>new _.Z({data:{type:"CIMSymbolReference",symbol:{type:"CIMLineSymbol",symbolLayers:[{type:"CIMVectorMarker",enable:!0,anchorPoint:{x:.5,y:.5,z:0},anchorPointUnits:"Relative",size:(0,r.Wz)(p.c.rightAngleHintSize),rotation:e,markerPlacement:{type:"CIMMarkerPlacementOnVertices",placePerPart:!0,angleToLine:!0,placeOnEndPoints:!1},frame:{xmin:-5,ymin:-5,xmax:5,ymax:5},markerGraphics:[{type:"CIMMarkerGraphic",geometry:{paths:[[[5,-5],[-5,-5],[-5,5],[5,5],[5,-5]]]},symbol:{type:"CIMLineSymbol",symbolLayers:[{type:"CIMSolidStroke",enable:!0,capStyle:"Butt",joinStyle:"Round",miterLimit:10,width:(0,r.Wz)(p.c.rightAngleHintOutlineSize),color:w},{type:"CIMSolidFill",enable:!0,color:f}]}}],scaleSymbolsProportionally:!0,respectFrame:!0}]}}}),T=S(45),O=S(225),V=(()=>{const e=(0,a.a)(),t=(0,a.a)(),i=(0,l.c)();return n=>((0,s.a)(e,n.centerVertex,n.previousVertex),(0,s.a)(t,n.nextVertex,n.previousVertex),(0,s.g)(i,e,t),i[2]<0?T:O)})()},9843:(e,t,i)=>{i.d(t,{Z:()=>X});var n,o=i(27366),r=i(85015),s=(i(93169),i(49861)),a=(i(25243),i(63780),i(69912)),l=(i(59486),i(92026)),d=(i(32718),i(10064),i(91505)),h=i(100),p=i(84652),c=i(66978),u=i(17842),v=i(93655),_=i(65618),g=i(50951),y=i(85577),m=i(14813),w=i(84954),f=i(87268),C=i(34019),b=i(71040);let x=n=class extends d.Z.EventedAccessor{constructor(e){super(e),this._hasZ=null,this._cursorScreenPoint=null,this._activePointerId=null,this._stagedVertexUnsnapped=null,this._lastVertexUnsnapped=null,this._handles=new h.Z,this._viewHandlesKey="view-handles",this._undoRedoHandlesKey="undo-redo-handles",this._drawToolHandlesKey="draw-tool",this._nativeEventHistory={undoStack:[],redoStack:[]},this.interactiveUndoDisabled=!1,this.history=[],this.redoHistory=[],this.snapToScene=!1,this.view=null,this.elevationInfo=null,this.defaultZ=0,this._coordinateHelper=(0,m.Y6)(!!e.hasZ,!1,e.view.spatialReference),this._snappingManager=e.snappingManager,this._editGeometryOperations=new f.c(new w.XE(e.editGeometryType??"polygon",this._coordinateHelper)),this._snappingGraphicsLayer=new v.Z({id:n.SNAPPING_GRAPHICS_LAYER_ID,listMode:"hide",internal:!0}),this._snappingContext=new C.N({editGeometryOperations:this._editGeometryOperations,elevationInfo:{mode:"on-the-ground",offset:0},pointer:"mouse",visualizer:new y.r(this._snappingGraphicsLayer)}),this._activeComponent=new w.wA(e.view.spatialReference,g.JY.Local),this._editGeometryOperations.data.components.push(this._activeComponent)}normalizeCtorArgs(e){const t={...e};return delete t.editGeometryType,t}initialize(){this._snappingOperation=new b.y({view:this.view}),"2d"===this.view.type&&this.view.map.layers.add(this._snappingGraphicsLayer)}destroy(){this._handles.destroy(),this.view.map.layers.remove(this._snappingGraphicsLayer),this._snappingGraphicsLayer.destroy(),(0,l.pC)(this._snappingManager)&&this._snappingManager.doneSnapping(),this._snappingOperation=(0,l.SC)(this._snappingOperation),this._editGeometryOperations.destroy()}get _committedVertices(){return this._editGeometryOperations.data.components[0].vertices.map((e=>e.pos))}get vertices(){return(0,l.pC)(this._stagedVertex)?[...this._committedVertices,this._coordinateHelper.pointToArray(this._stagedVertex)]:this._committedVertices}get hasZ(){return(0,l.pC)(this._hasZ)?this._hasZ:"3d"===this.view.type}set hasZ(e){this._hasZ=e,this.notifyChange("hasZ")}get _stagedVertex(){return this._snappingOperation.stagedPoint}set _stagedVertex(e){this._snappingOperation.stagedPoint=(0,p.d9)(e)}canUndo(){return this._editGeometryOperations.canUndo}canRedo(){return this._editGeometryOperations.canRedo}undo(){this.canUndo&&this._editGeometryOperations.undo()}redo(){this.canRedo&&this._editGeometryOperations.redo()}getCoordsFromScreenPoint(e){const t=e&&this.screenToMap(e);return(0,l.Wi)(t)?null:t.hasZ?[t.x,t.y,t.z]:[t.x,t.y]}getCoordsAndPointFromScreenPoint(e){const t=this.screenToMap(e);return(0,l.Wi)(t)?null:t.hasZ?{vertex:[t.x,t.y,t.z],mapPoint:t}:{vertex:[t.x,t.y],mapPoint:t}}screenToMap(e){let t=null;if("3d"===this.view.type)if(this.hasZ){const i=(0,l.Pt)(this.elevationInfo,P);t=this.view.sceneIntersectionHelper.intersectElevationFromScreen((0,u.s1)(e.x,e.y),i,this._getGeometryZValue())}else{const i=(0,l.Pt)(this.elevationInfo,S);t=this.view.sceneIntersectionHelper.intersectElevationFromScreen((0,u.s1)(e.x,e.y),i,0),(0,l.pC)(t)&&(t.z=void 0)}else t=this.view.toMap(e),(0,l.pC)(t)&&(t.z=this.hasZ?this._getGeometryZValue():void 0);return t}_pushCursorVertex(e,t){const i=(0,_.Tx)(e[0],e[1],void 0,this.view.spatialReference);this._stagedVertexUnsnapped=i;const n=this._snappingManager;if((0,l.Wi)(n))return this._stagedVertex=i,void t();(0,c.R8)(this._snappingOperation.snap({point:i},n,this._snappingContext)).then((()=>{t()}))}_popCursorVertex(){this._stagedVertexUnsnapped=null,this._stagedVertex=null}_getGeometryZValue(){return this.defaultZ}_abortSnapping(){this._snappingOperation.abort()}_isDuplicateOfLastVertex(e){const t=this._editGeometryOperations.data.components[0].getLastVertex();if((0,l.pC)(t)&&e[0]===t[0]&&e[1]===t[1])return!0;const{x:i,y:n}=this._coordinateHelper.vectorToDehydratedPoint(e);return!(!(0,l.pC)(this._lastVertexUnsnapped)||i!==this._lastVertexUnsnapped.x||n!==this._lastVertexUnsnapped.y)}_shouldHandlePointerEvent(e){return this._isPrimaryPointerAction(e)&&((0,l.Wi)(this._activePointerId)||this._activePointerId===e.pointerId)}_vertexAddHandler(e){const t=(0,l.pC)(this._stagedVertex)?this._coordinateHelper.pointToArray(this._stagedVertex):this.getCoordsFromScreenPoint(this._cursorScreenPoint);(0,l.pC)(t)&&this._addVertex(t,e.native)}_drawCompleteHandler(e){this._completeDrawing(e.native)}_isPrimaryPointerAction(e){return"mouse"!==e.pointerType||0===e.button}};x.SNAPPING_GRAPHICS_LAYER_ID="DrawAction-snapping-graphics-layer",(0,o._)([(0,s.Cb)({readOnly:!0})],x.prototype,"vertices",null),(0,o._)([(0,s.Cb)({type:Boolean,nonNullable:!0})],x.prototype,"interactiveUndoDisabled",void 0),(0,o._)([(0,s.Cb)({readOnly:!0})],x.prototype,"history",void 0),(0,o._)([(0,s.Cb)({readOnly:!0})],x.prototype,"redoHistory",void 0),(0,o._)([(0,s.Cb)()],x.prototype,"snapToScene",void 0),(0,o._)([(0,s.Cb)()],x.prototype,"view",void 0),(0,o._)([(0,s.Cb)()],x.prototype,"elevationInfo",void 0),(0,o._)([(0,s.Cb)({nonNullable:!0})],x.prototype,"defaultZ",void 0),(0,o._)([(0,s.Cb)()],x.prototype,"hasZ",null),(0,o._)([(0,s.Cb)()],x.prototype,"_snappingOperation",void 0),(0,o._)([(0,s.Cb)()],x.prototype,"_stagedVertex",null),x=n=(0,o._)([(0,a.j)("esri.views.draw.DrawAction")],x);const P={mode:"absolute-height",offset:0},S={mode:"on-the-ground",offset:0},T=x;class O{constructor(e,t,i,n){this.view=e,this.native=t,this.vertexIndex=i,this.vertices=n,this.defaultPrevented=!1,this.type="vertex-add"}preventDefault(){this.defaultPrevented=!0}}class V{constructor(e,t,i,n){this.view=e,this.native=t,this.vertexIndex=i,this.vertices=n,this.defaultPrevented=!1,this.type="vertex-remove"}preventDefault(){this.defaultPrevented=!0}}class H{constructor(e,t,i,n){let o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;this.view=e,this.native=t,this.vertexIndex=i,this.vertices=n,this.mapPoint=o,this.coordinates=null,this.defaultPrevented=!1,this.type="cursor-update",this.coordinates=1===n.length?n[0]:null}preventDefault(){this.defaultPrevented=!0}}class L{constructor(e,t){this.native=e,this.vertices=t,this.coordinates=null,this.defaultPrevented=!1,this.type="draw-complete",this.coordinates=1===t.length?t[0]:null}preventDefault(){this.defaultPrevented=!0}}var M=i(1614),E=i(87888),A=i(72612),k=i(585);let R=class extends T{constructor(e){super(e),this._popVertexOnPointerMove=!1,this._addVertexOnPointerUp=!1}initialize(){this._addViewHandles(),this._addUndoRedoHandles()}destroy(){this._removeViewHandles(),this._removeUndoRedoHandles(),this.emit("destroy")}undo(){super.undo(),this.notifyChange("vertices")}redo(){super.redo(),this.notifyChange("vertices")}complete(){this._completeDrawing()}_addViewHandles(){this._removeViewHandles(),this._handles.add([this.view.on("click",(e=>{e.stopPropagation()}),M.f.TOOL),this.view.on("pointer-down",(e=>{this._shouldHandlePointerEvent(e)&&(this._abortSnapping(),this._activePointerId=e.pointerId,this._addVertexOnPointerUp=!0,this._cursorScreenPoint=(0,A.vT)(e),"touch"===e.pointerType&&this._updateCursor(e.native))}),M.f.TOOL),this.view.on("pointer-move",(e=>{this._popVertexOnPointerMove&&(this.undo(),this._popVertexOnPointerMove=!1),this._abortSnapping(),this._cursorScreenPoint=(0,A.vT)(e),"touch"!==e.pointerType&&this._updateCursor(e.native)}),M.f.TOOL),this.view.on("pointer-drag",(e=>{this._shouldHandlePointerEvent(e)&&(this._abortSnapping(),this._addVertexOnPointerUp=!1)}),M.f.TOOL),this.view.on("pointer-up",(e=>{if(this._shouldHandlePointerEvent(e))if(this._abortSnapping(),this._activePointerId=null,this._addVertexOnPointerUp)this._vertexAddHandler(e);else{const t="touch"===e.pointerType;this._updateCursor(e.native,t)}}),M.f.TOOL),this.view.on("drag",["Shift"],(e=>{e.stopPropagation()}),M.f.TOOL),this.view.on("double-click",(e=>{e.stopPropagation(),this._drawCompleteHandler(e)}),M.f.TOOL),this.view.on("double-click",["Control"],(e=>{e.stopPropagation(),this._drawCompleteHandler(e)}),M.f.TOOL),this.view.on("key-down",(e=>{const{key:t,repeat:i}=e;t===E.j.vertexAdd&&!i&&this._cursorScreenPoint?(e.stopPropagation(),this._abortSnapping(),this._vertexAddHandler(e)):t!==E.j.complete||i?t!==E.j.undo||this.interactiveUndoDisabled||i?t!==E.j.redo||this.interactiveUndoDisabled||i?t!==E.j.pan||i||e.stopPropagation():(e.stopPropagation(),this.redo()):(e.stopPropagation(),this.undo()):(e.stopPropagation(),this._drawCompleteHandler(e))}),M.f.TOOL),this.view.on("key-up",(e=>{e.key===E.j.pan&&e.stopPropagation()}),M.f.TOOL)],this._viewHandlesKey)}_addUndoRedoHandles(){this._removeUndoRedoHandles(),this._handles.add([this._editGeometryOperations.on("vertex-remove",(e=>{if(this.notifyChange("vertices"),"undo"===e.operation){const t=this._nativeEventHistory.undoStack.pop();this._nativeEventHistory.redoStack.push(t);const i=[...this._committedVertices];(0,l.pC)(this._stagedVertex)&&i.push(this._coordinateHelper.pointToArray(this._stagedVertex)),this.emit("undo",new V(this.view,t,e.vertices[0].index,i))}})),this._editGeometryOperations.on("vertex-add",(e=>{if(this.notifyChange("vertices"),"apply"===e.operation){const e=this._nativeEventHistory.undoStack[this._nativeEventHistory.undoStack.length],t=this._committedVertices.length-1,i=new O(this.view,e,t,this.vertices);this.emit("vertex-add",i),i.defaultPrevented&&(this._popVertexOnPointerMove=!0)}else if("redo"===e.operation){const t=this._nativeEventHistory.redoStack.pop();this._nativeEventHistory.undoStack.push(t);const i=[...this._committedVertices];(0,l.pC)(this._stagedVertex)&&i.push(this._coordinateHelper.pointToArray(this._stagedVertex)),this.emit("redo",new O(this.view,t,e.vertices[0].index,i))}}))],this._undoRedoHandlesKey)}_removeViewHandles(){this._handles.remove(this._viewHandlesKey)}_removeUndoRedoHandles(){this._handles.remove(this._undoRedoHandlesKey)}_addVertex(e,t){const i=this._coordinateHelper.arrayToVector(e);if(this._isDuplicateOfLastVertex(i))return;this._popCursorVertex(),this._editGeometryOperations.appendVertex(i);const n=t||new Event("placeholder");this._nativeEventHistory.undoStack.push(n)}_updateCursor(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(this._popCursorVertex(),!this._cursorScreenPoint)return;const i=this.getCoordsAndPointFromScreenPoint(this._cursorScreenPoint);(0,l.pC)(i)&&!t&&this._pushCursorVertex(i.vertex,(()=>this.emit("cursor-update",new H(this.view,e,this._activeComponent.vertices.length,this.vertices,(0,l.pC)(this._stagedVertex)?new k.Z(this._stagedVertex):null))))}_completeDrawing(e){if(this._activePointerId=null,this._popCursorVertex(),this._abortSnapping(),(0,l.pC)(this._snappingManager)&&this._snappingManager.doneSnapping(),this.vertices.length<1)return;const t=new L(e,this.vertices);this.emit("draw-complete",t),t.defaultPrevented||this._removeViewHandles()}};R=(0,o._)([(0,a.j)("esri.views.draw.MultipointDrawAction")],R);var I=i(41691),D=i(74509),Z=i(66038),U=i(46640),G=i(45900);let N=class extends((0,I.p)(d.Z.EventedMixin(G.m))){constructor(e){super(e),this.defaultZ=0,this.elevationInfo=null,this.hasZ=!0,this.mode=null,this.snapToScene=null,this.type="draw-3d"}initialize(){const e=this.view,t=(0,D.mF)(this.hasZ,this.elevationInfo);this.drawOperation=new Z.w({view:e,manipulators:this.manipulators,geometryType:this.geometryType,drawingMode:this.mode,hasZ:this.hasZ,defaultZ:this.defaultZ,snapToSceneEnabled:this.snapToScene,drawSurface:"3d"===e.type?new U.iW(e,t):null,elevationDrawSurface:"3d"===e.type?new U.aL(t,this.defaultZ,e):null,hasM:!1,elevationInfo:t}),this.handles.add([this.drawOperation.on("vertex-add",(e=>this.onVertexAdd(e))),this.drawOperation.on("vertex-remove",(e=>this.onVertexRemove(e))),this.drawOperation.on("vertex-update",(e=>this.onVertexUpdate(e))),this.drawOperation.on("cursor-update",(e=>this.onCursorUpdate(e))),this.drawOperation.on("complete",(e=>this.onComplete(e)))]),this.finishToolCreation()}destroy(){this.drawOperation=(0,l.SC)(this.drawOperation),this._set("view",null)}get canRedo(){return this.drawOperation.canRedo}get canUndo(){return this.drawOperation.canUndo}set enabled(e){this.drawOperation.interactive=e,this._set("enabled",e)}get updating(){return this.drawOperation?.updating??!1}completeCreateOperation(){this.drawOperation.complete()}onDeactivate(){this.drawOperation.isCompleted||this.drawOperation.cancel()}getVertexCoords(){return this.drawOperation.vertices}onInputEvent(e){this.drawOperation.onInputEvent(e)}redo(){this.drawOperation.redo()}reset(){}undo(){this.drawOperation.undo()}onComplete(e){this.emit("complete",e)}onCursorUpdate(e){this.emit("cursor-update",e)}onVertexAdd(e){this.emit("vertex-add",e)}onVertexRemove(e){this.emit("vertex-remove",e)}onVertexUpdate(e){this.emit("vertex-update",e)}};(0,o._)([(0,s.Cb)({constructOnly:!0,nonNullable:!0})],N.prototype,"defaultZ",void 0),(0,o._)([(0,s.Cb)()],N.prototype,"drawOperation",void 0),(0,o._)([(0,s.Cb)({constructOnly:!0})],N.prototype,"elevationInfo",void 0),(0,o._)([(0,s.Cb)({value:!0})],N.prototype,"enabled",null),(0,o._)([(0,s.Cb)({constructOnly:!0})],N.prototype,"geometryType",void 0),(0,o._)([(0,s.Cb)({constructOnly:!0})],N.prototype,"hasZ",void 0),(0,o._)([(0,s.Cb)({constructOnly:!0})],N.prototype,"mode",void 0),(0,o._)([(0,s.Cb)()],N.prototype,"snapToScene",void 0),(0,o._)([(0,s.Cb)({readOnly:!0})],N.prototype,"type",void 0),(0,o._)([(0,s.Cb)({readOnly:!0})],N.prototype,"updating",null),(0,o._)([(0,s.Cb)({constructOnly:!0,nonNullable:!0})],N.prototype,"view",void 0),N=(0,o._)([(0,a.j)("esri.views.draw.DrawTool")],N);let B=class extends T{constructor(e){super(e),this._addVertexOnPointerUp=!1}initialize(){"2d"===this.view.type?this._addViewHandles():this._addDrawTool()}destroy(){"2d"===this.view.type?this._removeViewHandles():this._removeDrawTool(),this.emit("destroy")}complete(){"2d"===this.view.type?this._cursorScreenPoint&&this._completeDrawing():this._drawTool.completeCreateOperation()}_addViewHandles(){this._removeViewHandles(),this._handles.add([this.view.on("pointer-down",(e=>{this._shouldHandlePointerEvent(e)&&(this._abortSnapping(),this._activePointerId=e.pointerId,this._addVertexOnPointerUp=!0,this._cursorScreenPoint=(0,A.vT)(e),"touch"===e.pointerType&&this._updateCursor(e.native))}),M.f.TOOL),this.view.on("pointer-move",(e=>{this._abortSnapping(),this._cursorScreenPoint=(0,A.vT)(e),"touch"!==e.pointerType&&this._updateCursor(e.native)}),M.f.TOOL),this.view.on("pointer-drag",(e=>{this._shouldHandlePointerEvent(e)&&(this._abortSnapping(),this._addVertexOnPointerUp=!1)}),M.f.TOOL),this.view.on("pointer-up",(e=>{if(this._shouldHandlePointerEvent(e))if(this._abortSnapping(),this._activePointerId=null,this._addVertexOnPointerUp)e.stopPropagation(),this._vertexAddHandler(e);else{const t="touch"===e.pointerType;this._updateCursor(e.native,t)}}),M.f.TOOL),this.view.on("drag",["Shift"],(e=>{e.stopPropagation()}),M.f.TOOL),this.view.on("key-down",(e=>{e.key===E.j.complete&&this._cursorScreenPoint&&(this._abortSnapping(),this._vertexAddHandler(e))}),M.f.TOOL)],this._viewHandlesKey)}_removeViewHandles(){this._handles.remove(this._viewHandlesKey)}_addDrawTool(){this._drawTool=new N({view:this.view,elevationInfo:this.elevationInfo,hasZ:this.hasZ,geometryType:"point",mode:"click"}),this.view.addAndActivateTool(this._drawTool),this._handles.add([this._drawTool.on("cursor-update",(e=>{1===e.vertices.length&&this.emit("cursor-update",new H(this.view,null,e.vertices[0].vertexIndex,this._drawTool.getVertexCoords()))})),this._drawTool.on("complete",(e=>{this.emit("draw-complete",new L(null,this._drawTool.getVertexCoords())),this._removeDrawTool()}))],this._drawToolHandlesKey)}_removeDrawTool(){this._handles.remove(this._drawToolHandlesKey),this.view.tools.remove(this._drawTool),this._drawTool=(0,l.SC)(this._drawTool)}_addVertex(e){const t=this._coordinateHelper.arrayToVector(e);this._isDuplicateOfLastVertex(t)||(this._lastVertexUnsnapped=this._stagedVertexUnsnapped,this._popCursorVertex(),this._editGeometryOperations.appendVertex(t),this.notifyChange("vertices"),this._completeDrawing())}_updateCursor(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(this._popCursorVertex(),!this._cursorScreenPoint)return;const i=this.getCoordsAndPointFromScreenPoint(this._cursorScreenPoint);(0,l.pC)(i)&&!t&&this._pushCursorVertex(i.vertex,(()=>this.emit("cursor-update",new H(this.view,e,this._activeComponent.vertices.length,this.vertices,(0,l.pC)(this._stagedVertex)?new k.Z(this._stagedVertex):null))))}_completeDrawing(e){this._activePointerId=null,this._popCursorVertex(),this._abortSnapping(),(0,l.pC)(this._snappingManager)&&this._snappingManager.doneSnapping();const t=new L(e,this.vertices);this.emit("draw-complete",t),t.defaultPrevented||this._removeViewHandles()}};B=(0,o._)([(0,a.j)("esri.views.draw.PointDrawAction")],B);var z=i(78005);let F=class extends T{constructor(e){super(e),this._panEnabled=!1,this._popVertexOnPointerMove=!1,this._addVertexOnPointerUp=!1,this.mode=z.n}initialize(){"2d"===this.view.type?(this._addViewHandles(),this._addUndoRedoHandles()):this._addDrawTool()}destroy(){"2d"===this.view.type?(this._removeViewHandles(),this._removeUndoRedoHandles()):this._removeDrawTool(),this.emit("destroy")}get _dragEnabled(){return"freehand"===this.mode||"hybrid"===this.mode}get _clickEnabled(){return"click"===this.mode||"hybrid"===this.mode}undo(){super.undo(),this.notifyChange("vertices")}redo(){super.redo(),this.notifyChange("vertices")}complete(){"2d"===this.view.type?this._completeDrawing():this._drawTool.completeCreateOperation()}_getGeometryZValue(){return this.hasZ&&this.vertices.length>0?this.vertices[0][2]:this.defaultZ}_addViewHandles(){this._removeViewHandles(),this._handles.add([this.view.on("click",(e=>{e.stopPropagation()}),M.f.TOOL),this.view.on("pointer-down",(e=>{this._shouldHandlePointerEvent(e)&&(this._abortSnapping(),this._activePointerId=e.pointerId,this._addVertexOnPointerUp=!0,this._cursorScreenPoint=(0,A.vT)(e),"touch"===e.pointerType&&this._updateCursor(e.native))}),M.f.TOOL),this.view.on("pointer-move",(e=>{this._abortSnapping(),this._popVertexOnPointerMove&&(this.undo(),this._popVertexOnPointerMove=!1),this._cursorScreenPoint=(0,A.vT)(e),"touch"!==e.pointerType&&this._updateCursor(e.native)}),M.f.TOOL),this.view.on("pointer-drag",(e=>{this._shouldHandlePointerEvent(e)&&(this._abortSnapping(),this._cursorScreenPoint=(0,A.vT)(e),this._dragEnabled&&!this._panEnabled?this._vertexAddHandler(e):this._addVertexOnPointerUp=!1)}),M.f.TOOL),this.view.on("pointer-up",(e=>{if(this._shouldHandlePointerEvent(e))if(this._abortSnapping(),this._activePointerId=null,this._addVertexOnPointerUp){if(!this._clickEnabled)return 1===this.vertices.length&&this.vertices.pop(),void this._drawCompleteHandler(e);this._vertexAddHandler(e)}else{const t="touch"===e.pointerType;this._updateCursor(e.native,t)}}),M.f.TOOL),this.view.on("drag",(e=>{this._dragEnabled&&(0,l.pC)(this._activePointerId)&&!this._panEnabled&&e.stopPropagation()}),M.f.TOOL),this.view.on("drag",["Shift"],(e=>{e.stopPropagation()}),M.f.TOOL),this.view.on("double-click",(e=>{e.stopPropagation(),this._drawCompleteHandler(e)}),M.f.TOOL),this.view.on("double-click",["Control"],(e=>{e.stopPropagation(),this._drawCompleteHandler(e)}),M.f.TOOL),this.view.on("key-down",(e=>{const{key:t,repeat:i}=e;t===E.j.vertexAdd&&!i&&this._cursorScreenPoint?(e.stopPropagation(),this._abortSnapping(),this._vertexAddHandler(e)):t!==E.j.complete||i?t!==E.j.undo||this.interactiveUndoDisabled||i?t!==E.j.redo||this.interactiveUndoDisabled||i?t!==E.j.pan||i||(e.stopPropagation(),this._panEnabled=!0):(e.stopPropagation(),this.redo()):(e.stopPropagation(),this.undo()):(e.stopPropagation(),this._drawCompleteHandler(e))}),M.f.TOOL),this.view.on("key-up",(e=>{e.key===E.j.pan&&(e.stopPropagation(),this._panEnabled=!1)}),M.f.TOOL)],this._viewHandlesKey)}_addUndoRedoHandles(){this._removeUndoRedoHandles(),this._handles.add([this._editGeometryOperations.on("vertex-remove",(e=>{if(this.notifyChange("vertices"),"undo"===e.operation){const t=this._nativeEventHistory.undoStack.pop();this._nativeEventHistory.redoStack.push(t);const i=[...this._committedVertices];(0,l.pC)(this._stagedVertex)&&i.push(this._coordinateHelper.pointToArray(this._stagedVertex)),this.emit("undo",new V(this.view,t,e.vertices[0].index,i))}})),this._editGeometryOperations.on("vertex-add",(e=>{if(this.notifyChange("vertices"),"apply"===e.operation){const e=this._nativeEventHistory.undoStack[this._nativeEventHistory.undoStack.length],t=this._committedVertices.length-1,i=new O(this.view,e,t,this.vertices);this.emit("vertex-add",i),i.defaultPrevented&&(this._popVertexOnPointerMove=!0)}else if("redo"===e.operation){const t=this._nativeEventHistory.redoStack.pop();this._nativeEventHistory.undoStack.push(t);const i=[...this._committedVertices];(0,l.pC)(this._stagedVertex)&&i.push(this._coordinateHelper.pointToArray(this._stagedVertex)),this.emit("redo",new O(this.view,t,e.vertices[0].index,i))}}))],this._undoRedoHandlesKey)}_removeViewHandles(){this._handles.remove(this._viewHandlesKey)}_removeUndoRedoHandles(){this._handles.remove(this._undoRedoHandlesKey)}_addDrawTool(){this._drawTool=new N({view:this.view,elevationInfo:this.elevationInfo,hasZ:this.hasZ,geometryType:"polygon",mode:this.mode}),this.view.addAndActivateTool(this._drawTool),this._drawTool.on("vertex-add",(e=>{1===e.vertices.length&&this.emit("vertex-add",new O(this.view,null,e.vertices[0].vertexIndex,this._drawTool.getVertexCoords()))})),this._drawTool.on("cursor-update",(e=>{1===e.vertices.length&&this.emit("cursor-update",new H(this.view,null,e.vertices[0].vertexIndex,this._drawTool.getVertexCoords()))})),this._drawTool.on("complete",(e=>{this.emit("draw-complete",new L(null,this._drawTool.getVertexCoords())),this._removeDrawTool()}))}_removeDrawTool(){this._handles.remove(this._drawToolHandlesKey),this.view.tools.remove(this._drawTool),this._drawTool=(0,l.SC)(this._drawTool)}_addVertex(e,t){const i=this._coordinateHelper.arrayToVector(e);if(this._isDuplicateOfLastVertex(i))return;this._lastVertexUnsnapped=this._stagedVertexUnsnapped,this._popCursorVertex(),this._editGeometryOperations.appendVertex(i);const n=t||new Event("placeholder");this._nativeEventHistory.undoStack.push(n)}_updateCursor(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(this._popCursorVertex(),!this._cursorScreenPoint)return;const i=this.getCoordsAndPointFromScreenPoint(this._cursorScreenPoint);(0,l.pC)(i)&&!t&&this._pushCursorVertex(i.vertex,(()=>this.emit("cursor-update",new H(this.view,e,this._activeComponent.vertices.length,this.vertices,(0,l.pC)(this._stagedVertex)?new k.Z(this._stagedVertex):null))))}_completeDrawing(e){if(this._activePointerId=null,this._popCursorVertex(),this._committedVertices.length<3)return;this._abortSnapping(),(0,l.pC)(this._snappingManager)&&this._snappingManager.doneSnapping();const t=new L(e,this.vertices);this.emit("draw-complete",t),t.defaultPrevented||this._removeViewHandles()}};(0,o._)([(0,s.Cb)()],F.prototype,"_dragEnabled",null),(0,o._)([(0,s.Cb)()],F.prototype,"_clickEnabled",null),(0,o._)([(0,s.Cb)({type:z.A})],F.prototype,"mode",void 0),F=(0,o._)([(0,a.j)("esri.views.draw.PolygonDrawAction")],F);let W=class extends T{constructor(e){super(e),this._panEnabled=!1,this._popVertexOnPointerMove=!1,this._addVertexOnPointerUp=!1,this.mode=z.n}initialize(){"2d"===this.view.type?(this._addViewHandles(),this._addUndoRedoHandles()):this._addDrawTool()}destroy(){"2d"===this.view.type?(this._removeViewHandles(),this._removeUndoRedoHandles()):this._removeDrawTool(),this.emit("destroy")}get _clickEnabled(){return"click"===this.mode||"hybrid"===this.mode}get _dragEnabled(){return"freehand"===this.mode||"hybrid"===this.mode}undo(){super.undo(),this.notifyChange("vertices")}redo(){super.redo(),this.notifyChange("vertices")}complete(){"2d"===this.view.type?this._completeDrawing():this._drawTool.completeCreateOperation()}_addViewHandles(){this._removeViewHandles(),this._handles.add([this.view.on("click",(e=>{e.stopPropagation()}),M.f.TOOL),this.view.on("pointer-down",(e=>{this._shouldHandlePointerEvent(e)&&!this._panEnabled&&(this._abortSnapping(),this._activePointerId=e.pointerId,this._addVertexOnPointerUp=!0,this._cursorScreenPoint=(0,A.vT)(e),"touch"===e.pointerType&&this._updateCursor(e.native))}),M.f.TOOL),this.view.on("pointer-move",(e=>{this._popVertexOnPointerMove&&(this.undo(),this._popVertexOnPointerMove=!1),this._abortSnapping(),this._cursorScreenPoint=(0,A.vT)(e),"touch"!==e.pointerType&&this._updateCursor(e.native)}),M.f.TOOL),this.view.on("pointer-drag",(e=>{this._shouldHandlePointerEvent(e)&&(this._abortSnapping(),this._cursorScreenPoint=(0,A.vT)(e),this._dragEnabled&&!this._panEnabled?this._vertexAddHandler(e):this._addVertexOnPointerUp=!1)}),M.f.TOOL),this.view.on("pointer-up",(e=>{if(this._shouldHandlePointerEvent(e))if(this._abortSnapping(),this._activePointerId=null,this._addVertexOnPointerUp){if(!this._clickEnabled)return 1===this.vertices.length&&this.vertices.pop(),void this._drawCompleteHandler(e);this._vertexAddHandler(e)}else{const t="touch"===e.pointerType;this._updateCursor(e.native,t)}}),M.f.TOOL),this.view.on("drag",(e=>{this._dragEnabled&&(0,l.pC)(this._activePointerId)&&!this._panEnabled&&e.stopPropagation()}),M.f.TOOL),this.view.on("drag",["Shift"],(e=>{e.stopPropagation()}),M.f.TOOL),this.view.on("double-click",(e=>{e.stopPropagation(),this._drawCompleteHandler(e)}),M.f.TOOL),this.view.on("double-click",["Control"],(e=>{e.stopPropagation(),this._drawCompleteHandler(e)}),M.f.TOOL),this.view.on("key-down",(e=>{const{key:t,repeat:i}=e;t===E.j.vertexAdd&&!i&&this._cursorScreenPoint?(e.stopPropagation(),this._abortSnapping(),this._vertexAddHandler(e)):t!==E.j.complete||i?t!==E.j.undo||this.interactiveUndoDisabled||i?t!==E.j.redo||this.interactiveUndoDisabled||i?t!==E.j.pan||i||(e.stopPropagation(),this._panEnabled=!0):(e.stopPropagation(),this.redo()):(e.stopPropagation(),this.undo()):(e.stopPropagation(),this._drawCompleteHandler(e))}),M.f.TOOL),this.view.on("key-up",(e=>{e.key===E.j.pan&&(e.stopPropagation(),this._panEnabled=!1)}),M.f.TOOL)],this._viewHandlesKey)}_addUndoRedoHandles(){this._removeUndoRedoHandles(),this._handles.add([this._editGeometryOperations.on("vertex-remove",(e=>{if(this.notifyChange("vertices"),"undo"===e.operation){const t=this._nativeEventHistory.undoStack.pop();this._nativeEventHistory.redoStack.push(t);const i=[...this._committedVertices];(0,l.pC)(this._stagedVertex)&&i.push(this._coordinateHelper.pointToArray(this._stagedVertex)),this.emit("undo",new V(this.view,t,e.vertices[0].index,i))}})),this._editGeometryOperations.on("vertex-add",(e=>{if(this.notifyChange("vertices"),"apply"===e.operation){const e=this._nativeEventHistory.undoStack[this._nativeEventHistory.undoStack.length],t=this._committedVertices.length-1,i=new O(this.view,e,t,this.vertices);this.emit("vertex-add",i),i.defaultPrevented&&(this._popVertexOnPointerMove=!0)}else if("redo"===e.operation){const t=this._nativeEventHistory.redoStack.pop();this._nativeEventHistory.undoStack.push(t);const i=[...this._committedVertices];(0,l.pC)(this._stagedVertex)&&i.push(this._coordinateHelper.pointToArray(this._stagedVertex)),this.emit("redo",new O(this.view,t,e.vertices[0].index,i))}}))],this._undoRedoHandlesKey)}_removeViewHandles(){this._handles.remove(this._viewHandlesKey)}_removeUndoRedoHandles(){this._handles.remove(this._undoRedoHandlesKey)}_addDrawTool(){this._drawTool=new N({view:this.view,elevationInfo:this.elevationInfo,hasZ:this.hasZ,geometryType:"polyline",mode:this.mode}),this.view.addAndActivateTool(this._drawTool),this._handles.add([this._drawTool.on("vertex-add",(e=>{1===e.vertices.length&&this.emit("vertex-add",new O(this.view,null,e.vertices[0].vertexIndex,this._drawTool.getVertexCoords()))})),this._drawTool.on("cursor-update",(e=>{1===e.vertices.length&&this.emit("cursor-update",new H(this.view,null,e.vertices[0].vertexIndex,this._drawTool.getVertexCoords()))})),this._drawTool.on("complete",(e=>{this.emit("draw-complete",new L(null,this._drawTool.getVertexCoords())),this._removeDrawTool()}))],this._drawToolHandlesKey)}_removeDrawTool(){this._handles.remove(this._drawToolHandlesKey),this.view.tools.remove(this._drawTool),this._drawTool=(0,l.SC)(this._drawTool)}_addVertex(e,t){const i=this._coordinateHelper.arrayToVector(e);if(this._isDuplicateOfLastVertex(i))return;this._lastVertexUnsnapped=this._stagedVertexUnsnapped,this._popCursorVertex(),this._editGeometryOperations.appendVertex(i);const n=t||new Event("placeholder");this._nativeEventHistory.undoStack.push(n)}_updateCursor(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(this._popCursorVertex(),!this._cursorScreenPoint)return;const i=this.getCoordsAndPointFromScreenPoint(this._cursorScreenPoint);(0,l.pC)(i)&&!t&&this._pushCursorVertex(i.vertex,(()=>this.emit("cursor-update",new H(this.view,e,this._activeComponent.vertices.length,this.vertices,(0,l.pC)(this._stagedVertex)?new k.Z(this._stagedVertex):null))))}_completeDrawing(e){if(this._activePointerId=null,this._popCursorVertex(),this._committedVertices.length<2)return;this._abortSnapping(),(0,l.pC)(this._snappingManager)&&this._snappingManager.doneSnapping();const t=new L(e,this.vertices);this.emit("draw-complete",t),t.defaultPrevented||this._removeViewHandles()}};(0,o._)([(0,s.Cb)()],W.prototype,"_clickEnabled",null),(0,o._)([(0,s.Cb)()],W.prototype,"_dragEnabled",null),(0,o._)([(0,s.Cb)({type:z.A})],W.prototype,"mode",void 0),W=(0,o._)([(0,a.j)("esri.views.draw.PolylineDrawAction")],W);var j=i(3826);let K=class extends T{constructor(e){super(e),this._isDragging=!1,this._panEnabled=!1,this._addVertexOnPointerUp=!1,this.viewAlignedCoordinateSystem=null,this.mode="freehand"}initialize(){"2d"===this.view.type?this._addViewHandles():this._addDrawTool()}destroy(){"2d"===this.view.type?this._removeViewHandles():this._removeDrawTool(),this.emit("destroy")}complete(){"2d"===this.view.type?this._completeDrawing():this._drawTool.completeCreateOperation()}_getGeometryZValue(){return this.hasZ&&this.vertices.length>0?this.vertices[0][2]:this.defaultZ}_addViewHandles(){this._removeViewHandles(),"click"===this.mode?this._handles.add(this._getClickModeViewHandles(),this._viewHandlesKey):this._handles.add(this._getDragModeViewHandles(),this._viewHandlesKey)}_getDragModeViewHandles(){return[this.view.on("immediate-click",(e=>{if(e.stopPropagation(),e.mapPoint&&!this._panEnabled){const t=this.getCoordsFromScreenPoint((0,A.vT)(e));(0,l.pC)(t)&&(this._vertexAddHandler(e),this._drawCompleteHandler(e))}}),M.f.TOOL),this.view.on("pointer-down",(e=>{this._shouldHandlePointerEvent(e)&&(this._abortSnapping(),this._panEnabled||(this._resetGeometry(),this._addVertexOnPointerUp=!0,this._cursorScreenPoint=(0,A.vT)(e),this._activePointerId=e.pointerId,this._vertexAddHandler(e),this._isDragging=!1,"touch"===e.pointerType&&this._updateCursor(e.native)))}),M.f.TOOL),this.view.on("pointer-move",(e=>{this._abortSnapping(),(0,l.Wi)(this._activePointerId)&&"touch"!==e.pointerType&&(this._cursorScreenPoint=(0,A.vT)(e),this._updateCursor(e.native))}),M.f.TOOL),this.view.on("pointer-drag",(e=>{this._shouldHandlePointerEvent(e)&&(this._abortSnapping(),this._isDragging=!0,this._cursorScreenPoint=(0,A.vT)(e),this._updateCursor(e.native))}),M.f.TOOL),this.view.on("pointer-up",(e=>{this._shouldHandlePointerEvent(e)&&this._addVertexOnPointerUp&&(this._abortSnapping(),this._activePointerId=null,this._isDragging&&this._vertexAddHandler(e),2===this._committedVertices.length&&this._drawCompleteHandler(e),this._isDragging=!1)}),M.f.TOOL),this.view.on("key-down",(e=>{e.key===E.j.complete&&this._cursorScreenPoint?(this._abortSnapping(),this._vertexAddHandler(e),this._drawCompleteHandler(e)):e.key===E.j.pan&&(this._panEnabled=!0)}),M.f.TOOL),this.view.on("key-up",(e=>{e.key===E.j.pan&&(this._panEnabled=!1)}),M.f.TOOL),this.view.on("drag",(e=>{(0,l.pC)(this._activePointerId)&&e.stopPropagation()}),M.f.TOOL),this.view.on("drag",["Shift"],(e=>{e.stopPropagation()}),M.f.TOOL)]}_getClickModeViewHandles(){return[this.view.on("pointer-down",(e=>{this._abortSnapping(),this._cursorScreenPoint=(0,A.vT)(e),this._activePointerId=e.pointerId,this._isDragging=!1,"touch"===e.pointerType&&this._updateCursor(e.native)}),M.f.TOOL),this.view.on("pointer-move",(e=>{this._abortSnapping(),this._cursorScreenPoint=(0,A.vT)(e),(0,l.Wi)(this._activePointerId)&&"touch"!==e.pointerType&&this._updateCursor(e.native)}),M.f.TOOL),this.view.on("pointer-drag",(e=>{this._shouldHandlePointerEvent(e)&&(this._abortSnapping(),this._isDragging=!0)}),M.f.TOOL),this.view.on("pointer-up",(e=>{this._shouldHandlePointerEvent(e)&&(this._abortSnapping(),this._activePointerId=null,e.stopPropagation(),this._isDragging||this._vertexAddHandler(e),2!==this.vertices.length||this._isDragging||this._drawCompleteHandler(e),this._isDragging=!1)}),M.f.TOOL),this.view.on("key-down",(e=>{e.key===E.j.vertexAdd&&this._cursorScreenPoint&&(this._vertexAddHandler(e),2===this.vertices.length&&this._drawCompleteHandler(e)),e.key===E.j.complete&&this._cursorScreenPoint&&2===this.vertices.length&&(this._vertexAddHandler(e),this._drawCompleteHandler(e))}),M.f.TOOL)]}_removeViewHandles(){this._handles.remove(this._viewHandlesKey)}_addDrawTool(){this._drawTool=new N({view:this.view,elevationInfo:this.elevationInfo,hasZ:this.hasZ,geometryType:"segment",mode:this.mode}),this.view.addAndActivateTool(this._drawTool),this._handles.add([this._drawTool.on("vertex-add",(e=>{1===e.vertices.length&&this.emit("vertex-add",new O(this.view,null,e.vertices[0].vertexIndex,this._drawTool.getVertexCoords()))})),this._drawTool.on("cursor-update",(e=>{1===e.vertices.length&&this.emit("cursor-update",new H(this.view,null,e.vertices[0].vertexIndex,this._drawTool.getVertexCoords()))})),this._drawTool.on("complete",(e=>{this.emit("draw-complete",new L(null,this._drawTool.getVertexCoords())),this._removeDrawTool()}))],this._drawToolHandlesKey)}_removeDrawTool(){this._handles.remove(this._drawToolHandlesKey),this.view.tools.remove(this._drawTool),this._drawTool=(0,l.SC)(this._drawTool)}_addVertex(e,t){const i=this._coordinateHelper.arrayToVector(e);if(this._isDuplicateOfLastVertex(i))return;this._lastVertexUnsnapped=this._stagedVertexUnsnapped,this._popCursorVertex(),this._editGeometryOperations.appendVertex(i),1===this._committedVertices.length&&(this.viewAlignedCoordinateSystem=(0,j.Gn)(this.view,this._committedVertices[0]));const n=this._committedVertices.length-1,o=new O(this.view,t,n,this.vertices);this.emit("vertex-add",o)}_updateCursor(e){if(this._popCursorVertex(),!this._cursorScreenPoint)return;const t=this.getCoordsAndPointFromScreenPoint(this._cursorScreenPoint);(0,l.pC)(t)&&this._pushCursorVertex(t.vertex,(()=>this.emit("cursor-update",new H(this.view,e,this._activeComponent.vertices.length,this.vertices,(0,l.pC)(this._stagedVertex)?new k.Z(this._stagedVertex):null))))}_completeDrawing(e){if(this._activePointerId=null,this._popCursorVertex(),this._cursorScreenPoint=null,this._isDragging=!1,this._abortSnapping(),(0,l.pC)(this._snappingManager)&&this._snappingManager.doneSnapping(),this.vertices.length<1)return;const t=new L(e,this.vertices);this.emit("draw-complete",t),t.defaultPrevented||this._removeViewHandles()}_resetGeometry(){this._editGeometryOperations.destroy(),this._editGeometryOperations=new f.c(new w.XE("polygon",this._coordinateHelper)),this._activeComponent=new w.wA(this._coordinateHelper.spatialReference,g.JY.Local),this._editGeometryOperations.data.components.push(this._activeComponent)}};(0,o._)([(0,s.Cb)({type:["freehand","click"]})],K.prototype,"mode",void 0),K=(0,o._)([(0,a.j)("esri/views/2d/engine/markup/SegmentDrawAction")],K);let Y=class extends r.Z{constructor(){super(...arguments),this.activeAction=null,this.type="draw",this.view=null}destroy(){this.activeAction&&(this.activeAction.destroy(),this.activeAction=null)}create(e,t){this.reset();const i={view:this.view,...t};switch(e){case"point":i.editGeometryType="point",this.activeAction=new B(i);break;case"polyline":i.editGeometryType="polyline",this.activeAction=new W(i);break;case"multipoint":i.editGeometryType="polygon",this.activeAction=new R(i);break;case"polygon":i.editGeometryType="polygon",this.activeAction=new F(i);break;case"rectangle":case"circle":case"ellipse":case"triangle":i.editGeometryType="polygon",this.activeAction=new K(i)}return this.activeAction}complete(){this.activeAction&&this.activeAction.complete(),this.activeAction=null}reset(){this.activeAction&&this.activeAction.destroy(),this.activeAction=null}};(0,o._)([(0,s.Cb)()],Y.prototype,"activeAction",void 0),(0,o._)([(0,s.Cb)({readOnly:!0})],Y.prototype,"type",void 0),(0,o._)([(0,s.Cb)()],Y.prototype,"view",void 0),Y=(0,o._)([(0,a.j)("esri.views.draw.Draw")],Y);const X=Y},70040:(e,t,i)=>{i.d(t,{O:()=>o,X:()=>p});var n=i(51995);const o={main:new n.Z([255,127,0]),selected:new n.Z([255,255,255]),outline:new n.Z([0,0,0,.5]),selectedOutline:new n.Z([255,255,255]),hoverOutline:new n.Z([255,255,255]),secondary:new n.Z([255,255,255]),secondaryOutline:new n.Z([100,100,100]),transparent:new n.Z([0,0,0,0])};function r(e,t){if(t)for(const i in t)e[i]=t[i]}class s{constructor(e){this.size=8,this.hoverSize=10,this.color=o.main,this.hoverColor=o.main,this.outlineColor=o.outline,this.hoverOutlineColor=o.hoverOutline,r(this,e)}}class a{constructor(e){this.color=o.secondary,this.hoverColor=o.main,r(this,e)}}class l{constructor(e){this.color=o.transparent,this.hoverColor=o.transparent,this.outlineColor=o.main,this.hoverOutlineColor=o.main,this.stagedColor=o.transparent,this.stagedOutlineColor=o.secondary,r(this,e)}}class d{constructor(e){this.vertex=new s,this.midpoint=new s({color:o.secondary,outlineColor:o.secondaryOutline,size:6}),this.selected=new s({color:o.selected,hoverColor:o.selected,hoverOutlineColor:o.hoverOutline}),r(this,e)}}class h{constructor(e){this.center=new s({color:o.secondaryOutline}),this.fill=new l,this.line=new a,this.vertex=new s({color:o.selected,outlineColor:o.main,hoverColor:o.selected,hoverOutlineColor:o.secondaryOutline}),r(this,e)}}const p=new class{constructor(e){this.reshapeGraphics=new d,this.transformGraphics=new h,r(this,e)}}},2346:(e,t,i)=>{i.d(t,{L:()=>f});var n=i(27366),o=i(85015),r=i(91505),s=i(92026),a=i(94172),l=i(17842),d=i(49861),h=(i(25243),i(63780),i(69912)),p=i(88396),c=i(11186),u=i(71353),v=i(79803),_=i(74509),g=i(61574),y=i(64575),m=i(90297),w=i(45008);let f=class extends o.Z{set graphic(e){this._circleCollisionCache=null,this._originalSymbol=e.symbol,this._set("graphic",e),this.attachSymbolChanged()}get elevationInfo(){const{layer:e}=this.graphic,t=e&&"elevationInfo"in e?e.elevationInfo:null,i=(0,_.vu)(this.graphic),n=t?t.offset:0;return new y.Z({mode:i,offset:n})}set focusedSymbol(e){e!==this._get("focusedSymbol")&&(this._set("focusedSymbol",e),this._updateGraphicSymbol(),this._circleCollisionCache=null)}grabbableForEvent(){return!0}set grabbing(e){e!==this._get("grabbing")&&(this._set("grabbing",e),this._updateGraphicSymbol())}set hovering(e){e!==this._get("hovering")&&(this._set("hovering",e),this._updateGraphicSymbol())}set selected(e){e!==this._get("selected")&&(this._set("selected",e),this._updateGraphicSymbol(),this.events.emit("select-changed",{action:e?"select":"deselect"}))}get _focused(){return this._get("hovering")||this._get("grabbing")}constructor(e){super(e),this.layer=null,this.interactive=!0,this.selectable=!1,this.grabbable=!0,this.dragging=!1,this.cursor=null,this.events=new r.Z.EventEmitter,this._circleCollisionCache=null,this._graphicSymbolChangedHandle=null,this._originalSymbol=null}destroy(){this.detachSymbolChanged(),this._resetGraphicSymbol(),this._set("view",null)}intersectionDistance(e){const t=this.graphic;if(!1===t.visible)return null;const i=t.geometry;if((0,s.Wi)(i))return null;const n=this._get("focusedSymbol"),o=(0,s.pC)(n)?n:t.symbol;return"2d"===this.view.type?this._intersectDistance2D(this.view,e,i,o):this._intersectDistance3D(this.view,e,t)}attach(){this.attachSymbolChanged(),(0,s.pC)(this.layer)&&this.layer.add(this.graphic)}detach(){this.detachSymbolChanged(),this._resetGraphicSymbol(),(0,s.pC)(this.layer)&&this.layer.remove(this.graphic)}attachSymbolChanged(){this.detachSymbolChanged(),this._graphicSymbolChangedHandle=(0,a.YP)((()=>this.graphic?.symbol),(e=>{(0,s.pC)(e)&&e!==this.focusedSymbol&&e!==this._originalSymbol&&(this._originalSymbol=e,this._focused&&(0,s.pC)(this.focusedSymbol)&&(this.graphic.symbol=this.focusedSymbol))}),a.Z_)}detachSymbolChanged(){(0,s.pC)(this._graphicSymbolChangedHandle)&&(this._graphicSymbolChangedHandle.remove(),this._graphicSymbolChangedHandle=null)}onElevationChange(){}onViewChange(){}_updateGraphicSymbol(){this.graphic.symbol=this._focused&&(0,s.pC)(this.focusedSymbol)?this.focusedSymbol:this._originalSymbol}_resetGraphicSymbol(){this.graphic.symbol=this._originalSymbol}_intersectDistance2D(e,t,i,n){if(n=n||(0,g.js)(i),(0,s.Wi)(n))return null;let o=this._circleCollisionCache;if("point"===i.type&&"cim"===n.type&&"CIMPointSymbol"===n.data.symbol?.type&&n.data.symbol.symbolLayers){const{offsetX:o,offsetY:r,size:s}=(0,m.i)(n),a=(0,l.md)(t,b),d=s/2,h=e.toScreen(i),c=h.x+o,u=h.y+r;return(0,p.k)(a,[c,u])<d*d?1:null}if("point"!==i.type||"simple-marker"!==n.type)return(0,w.D)(t,i,e)?1:null;if((0,s.Wi)(o)||!o.originalPoint.equals(i)){const t=i,r=e.spatialReference;if((0,v.Up)(t.spatialReference,r)){const e=(0,v.iV)(t,r);o={originalPoint:t.clone(),mapPoint:e,radiusPx:(0,l.F2)(n.size)},this._circleCollisionCache=o}}if((0,s.pC)(o)){const i=(0,l.md)(t,b),r=e.toScreen?.(o.mapPoint);if(!r)return null;const s=o.radiusPx,a=r.x+(0,l.F2)(n.xoffset),d=r.y-(0,l.F2)(n.yoffset);return(0,p.k)(i,[a,d])<s*s?1:null}return null}_intersectDistance3D(e,t,i){const n=e.toMap(t,{include:[i]});return n&&(0,v.KC)(n,C,e.renderSpatialReference)?(0,c.i)(C,e.state.camera.eye):null}};(0,n._)([(0,d.Cb)({constructOnly:!0,nonNullable:!0})],f.prototype,"graphic",null),(0,n._)([(0,d.Cb)()],f.prototype,"elevationInfo",null),(0,n._)([(0,d.Cb)({constructOnly:!0,nonNullable:!0})],f.prototype,"view",void 0),(0,n._)([(0,d.Cb)({value:null})],f.prototype,"focusedSymbol",null),(0,n._)([(0,d.Cb)({constructOnly:!0})],f.prototype,"layer",void 0),(0,n._)([(0,d.Cb)()],f.prototype,"interactive",void 0),(0,n._)([(0,d.Cb)()],f.prototype,"selectable",void 0),(0,n._)([(0,d.Cb)()],f.prototype,"grabbable",void 0),(0,n._)([(0,d.Cb)({value:!1})],f.prototype,"grabbing",null),(0,n._)([(0,d.Cb)()],f.prototype,"dragging",void 0),(0,n._)([(0,d.Cb)()],f.prototype,"hovering",null),(0,n._)([(0,d.Cb)({value:!1})],f.prototype,"selected",null),(0,n._)([(0,d.Cb)()],f.prototype,"cursor",void 0),f=(0,n._)([(0,h.j)("esri.views.interactive.GraphicManipulator")],f);const C=(0,u.c)(),b=(0,l.s1)()},52349:(e,t,i)=>{i.d(t,{Z:()=>l});var n=i(27366),o=i(85015),r=i(49861),s=(i(25243),i(63780),i(69912));let a=class extends o.Z{constructor(e){super(e),this.enabled=!1}};(0,n._)([(0,r.Cb)({type:Boolean,nonNullable:!0})],a.prototype,"enabled",void 0),a=(0,n._)([(0,s.j)("esri.views.interactive.sketch.SketchLabelOptions")],a);const l=a},77560:(e,t,i)=>{i.d(t,{Z:()=>h});var n=i(27366),o=i(85015),r=i(49861),s=(i(25243),i(63780),i(69912));let a=class extends o.Z{constructor(e){super(e),this.mode="absolute-height"}toJSON(){return{mode:this.mode}}};(0,n._)([(0,r.Cb)({type:String,nonNullable:!0})],a.prototype,"mode",void 0),a=(0,n._)([(0,s.j)("esri.widgets.Sketch.SketchTooltipOptions.ElevationOptions")],a);let l=class extends o.Z{constructor(){super(...arguments),this.distance=!0,this.elevation=!0,this.size=!0,this.scale=!0,this.rotation=!0,this.orientation=!0,this.totalLength=!0,this.area=!0,this.radius=!0,this.helpMessage=!1}toJSON(){return{distance:this.distance,size:this.size,scale:this.scale,rotation:this.rotation,orientation:this.orientation,totalLength:this.totalLength,area:this.area,radius:this.radius}}};(0,n._)([(0,r.Cb)({type:Boolean,nonNullable:!0})],l.prototype,"distance",void 0),(0,n._)([(0,r.Cb)({type:Boolean,nonNullable:!0})],l.prototype,"elevation",void 0),(0,n._)([(0,r.Cb)({type:Boolean,nonNullable:!0})],l.prototype,"size",void 0),(0,n._)([(0,r.Cb)({type:Boolean,nonNullable:!0})],l.prototype,"scale",void 0),(0,n._)([(0,r.Cb)({type:Boolean,nonNullable:!0})],l.prototype,"rotation",void 0),(0,n._)([(0,r.Cb)({type:Boolean,nonNullable:!0})],l.prototype,"orientation",void 0),(0,n._)([(0,r.Cb)({type:Boolean,nonNullable:!0})],l.prototype,"totalLength",void 0),(0,n._)([(0,r.Cb)({type:Boolean,nonNullable:!0})],l.prototype,"area",void 0),(0,n._)([(0,r.Cb)({type:Boolean,nonNullable:!0})],l.prototype,"radius",void 0),(0,n._)([(0,r.Cb)({type:Boolean,nonNullable:!0})],l.prototype,"helpMessage",void 0),l=(0,n._)([(0,s.j)("esri.widgets.Sketch.SketchTooltipOptions.VisibleElements")],l);let d=class extends o.Z{constructor(e){super(e),this.enabled=!1,this.elevation=new a,this.visibleElements=new l,this.visualVariables=null}toJSON(){return{enabled:this.enabled,elevation:this.elevation,visibleElements:this.visibleElements}}};(0,n._)([(0,r.Cb)({type:Boolean,nonNullable:!0})],d.prototype,"enabled",void 0),(0,n._)([(0,r.Cb)({type:a,nonNullable:!0})],d.prototype,"elevation",void 0),(0,n._)([(0,r.Cb)({type:l,nonNullable:!0})],d.prototype,"visibleElements",void 0),(0,n._)([(0,r.Cb)()],d.prototype,"visualVariables",void 0),d=(0,n._)([(0,s.j)("esri.widgets.Sketch.SketchTooltipOptions")],d);const h=d},90297:(e,t,i)=>{i.d(t,{i:()=>r});var n=i(92026),o=i(17842);function r(e){let t=0,i=0,r=0;return e?("cim"===e.type&&e.data.symbol&&"symbolLayers"in e.data.symbol&&e.data.symbol.symbolLayers&&e.data.symbol.symbolLayers.map((e=>{"CIMVectorMarker"===e.type&&e.anchorPoint&&(Math.abs(e.anchorPoint.x)>t&&(t=e.anchorPoint.x),Math.abs(e.anchorPoint.y)>i&&(i=e.anchorPoint.y),(0,n.pC)(e.size)&&e.size>r&&(r=e.size))})),t=(0,o.F2)(t),i=(0,o.F2)(i),r=(0,o.F2)(r),{offsetX:t,offsetY:i,size:r}):{offsetX:t,offsetY:i,size:r}}},28357:(e,t,i)=>{i.d(t,{EX:()=>r});var n=i(51995);function o(e){let{r:t,g:i,b:o,a:r}=e;return r<1&&(t=Math.round(r*t+255*(1-r)),i=Math.round(r*i+255*(1-r)),o=Math.round(r*o+255*(1-r))),new n.Z({r:t,g:i,b:o})}function r(e){const{r:t,g:i,b:n}=o(e);return.2126*t+.7152*i+.0722*n}},45008:(e,t,i)=>{i.d(t,{D:()=>l,K:()=>a});i(59486);var n=i(92026),o=i(68860),r=i(96669),s=i(53866);function a(e,t,i){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new s.Z,a=0;if("2d"===i.type)a=t*(i.resolution??0);else if("3d"===i.type){const r=i.overlayPixelSizeInMapUnits(e),s=i.basemapSpatialReference;a=(0,n.pC)(s)&&!s.equals(i.spatialReference)?(0,o.c9)(s)/(0,o.c9)(i.spatialReference):t*r}const l=e.x-a,d=e.y-a,h=e.x+a,p=e.y+a,{spatialReference:c}=i;return r.xmin=Math.min(l,h),r.ymin=Math.min(d,p),r.xmax=Math.max(l,h),r.ymax=Math.max(d,p),r.spatialReference=c,r}function l(e,t,i){const o=i.toMap(e);return!(0,n.Wi)(o)&&a(o,(0,r.k)(),i,d).intersects(t)}const d=new s.Z},32845:(e,t,i)=>{i.d(t,{V:()=>p});var n=i(27366),o=i(85015),r=i(100),s=i(32718),a=i(92026),l=i(94172),d=i(49861),h=(i(25243),i(63780),i(69912));let p=class extends o.Z{constructor(e){super(e),this.tool=null,this._baseHandles=new r.Z,this._loggedUnsupportedErrorOnce=!1,this.logger=s.Z.getLogger(this.declaredClass),e&&null!=e.visible&&(this.visible=e.visible)}initialize(){this._baseHandles.add((0,l.YP)((()=>({ready:(0,a.pC)(this.view)&&this.view.ready,supported:this.supported})),(e=>{let{ready:t,supported:i}=e;!t||i||this._loggedUnsupportedErrorOnce||(this.logError(this.unsupportedErrorMessage),this._loggedUnsupportedErrorOnce=!0)}),l.tX))}destroy(){this.removeTool(),this.view=null,this._baseHandles=(0,a.SC)(this._baseHandles)}get active(){return(0,a.pC)(this.tool)&&this.tool.active}get disabled(){return(0,a.Wi)(this.view)||!this.view.ready||!this.supported}get supported(){return(0,a.Wi)(this.view)||this.view.type===this.supportedViewType}get view(){return this._get("view")}set view(e){if(e===this.view)return;this.removeTool(),this._set("view",e);const t="tools";this._baseHandles.remove(t),(0,a.Wi)(e)||this._baseHandles.add(e.tools.on("after-remove",(e=>{e.item===this.tool&&this._set("tool",null)})),t)}set visible(e){this._set("visible",e),(0,a.pC)(this.tool)&&(this.tool.visible=e)}createTool(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{interactive:!1};if(this.removeTool(),(0,a.Wi)(this.view)||!this.view.ready||!this.supported)return;const t=this.constructTool();t.created?(this._set("tool",t),this.view.tools.add(t)):e.interactive?(this._set("tool",t),this.view.addAndActivateTool(t),(0,l.gx)((()=>t.created),(()=>{t.active&&(0,a.pC)(this.view)&&(this.view.activeTool=null)}),{initial:!0,once:!0})):t.destroy()}removeTool(){const e=this.tool;if((0,a.Wi)(e))return;const t=(0,a.yw)(this.view,(e=>e.tools));(0,a.pC)(t)?t.remove(e):e.destroy(),this._set("tool",null)}logError(){this.logger.error(...arguments)}};(0,n._)([(0,d.Cb)({constructOnly:!0})],p.prototype,"tool",void 0),(0,n._)([(0,d.Cb)()],p.prototype,"active",null),(0,n._)([(0,d.Cb)()],p.prototype,"disabled",null),(0,n._)([(0,d.Cb)()],p.prototype,"supported",null),(0,n._)([(0,d.Cb)({value:null})],p.prototype,"view",null),(0,n._)([(0,d.Cb)({type:Boolean,value:!0})],p.prototype,"visible",null),p=(0,n._)([(0,h.j)("esri.widgets.support.InteractiveToolViewModel")],p)}}]);
//# sourceMappingURL=8063.c9046cb8.chunk.js.map