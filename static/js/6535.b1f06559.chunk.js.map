{"version":3,"file":"static/js/6535.b1f06559.chunk.js","mappings":"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","sources":["../node_modules/@arcgis/core/node_modules/@stencil/core/internal/client|lazy|/^/.//.*/.entry/.js.*$/|include: //.entry/.js$/|exclude: //.system/.entry/.js$/|groupOptions: {}|namespace object","Components/PropertyPanel/utils/propertytemplate.tsx","Components/PropertyPanel/PropertyInfo/PropertyInfo.tsx"],"sourcesContent":["function webpackEmptyAsyncContext(req) {\n\t// Here Promise.resolve().then() is used instead of new Promise() to prevent\n\t// uncaught exception popping up in devtools\n\treturn Promise.resolve().then(() => {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t});\n}\nwebpackEmptyAsyncContext.keys = () => ([]);\nwebpackEmptyAsyncContext.resolve = webpackEmptyAsyncContext;\nwebpackEmptyAsyncContext.id = 67435;\nmodule.exports = webpackEmptyAsyncContext;","import FeatureLayer from '@arcgis/core/layers/FeatureLayer';\nimport PopupTemplate from '@arcgis/core/PopupTemplate';\nimport ExpressionInfo from '@arcgis/core/popup/ExpressionInfo';\nimport CustomContent from '@arcgis/core/popup/content/CustomContent';\n//import Locator from '@arcgis/core/tasks/Locator';\n//import * as geodesicUtils from '@arcgis/core/geometry/support/geodesicUtils';\nimport Feature from '@arcgis/core/widgets/Feature';\nimport FieldInfo from '@arcgis/core/popup/FieldInfo';\nimport React, { lazy, Suspense } from 'react';\nimport ReactDOM from 'react-dom';\nimport { services } from '../../../config/config';\nimport * as geometryEngine from '@arcgis/core/geometry/geometryEngine';\n\nconst AddressTable = lazy(() => import('../AddressTable/AddressTable'));\n\nconst arcadeExpressionInfos = [\n  {\n    name: 'mailing-address',\n    title: 'mailing-address',\n    expression:\n      'When(IsEmpty($feature.ADDR3),$feature.ADDR1 + TextFormatting.NewLine + $feature.ADDR2,$feature.ADDR1 + TextFormatting.NewLine + $feature.ADDR2 + TextFormatting.NewLine + $feature.ADDR3)',\n  },\n  {\n    name: 'property-values',\n    title: 'property-values',\n    expression:\n      '\"Building Value\"+TextFormatting.NewLine+\"$\"+$feature.BLDG_VAL+TextFormatting.NewLine+\"Land Value\"+TextFormatting.NewLine+\"$\"+$feature.LAND_VAL+TextFormatting.NewLine+\"Total Value\"+TextFormatting.NewLine+\"$\"+$feature.TOTAL_VALUE_ASSD',\n  },\n\n  {\n    name: 'pin',\n    title: 'PIN',\n    expression: \"var num = $feature.PIN_NUM;var ext = $feature.PIN_EXT;return When(ext == '000',num,num+' '+ext);\",\n  },\n  {\n    name: 'build_val',\n    title: 'Building Value',\n    expression: \"var value = $feature.BLDG_VAL;When(IsEmpty(value),'--', '$'+Text(value, '#,###'));\",\n  },\n  {\n    name: 'land_val',\n    title: 'Land Value',\n    expression: \"var value = $feature.LAND_VAL;When(IsEmpty(value),'--', '$'+Text(value, '#,###'));\",\n  },\n  {\n    name: 'total_val',\n    title: 'Total Value',\n    expression: \"var value = $feature.TOTAL_VALUE_ASSD;When(IsEmpty(value),'--', '$'+Text(value, '#,###'));\",\n  },\n  {\n    name: 'sale_price',\n    title: 'Sale Price',\n    expression: \"var value = $feature.TOTSALPRICE;When(IsEmpty(value),'--', '$'+Text(value, '#,###'));\",\n  },\n  {\n    name: 'city',\n    title: 'City',\n    expression: \"var city = $feature.CITY_DECODE;When(IsEmpty(city),'', Proper(city));\",\n  },\n  {\n    name: 'township',\n    title: 'Township',\n    expression: \"var ts = $feature.TOWNSHIP_DECODE;When(IsEmpty(ts),'', Proper(ts));\",\n  },\n  {\n    name: 'jurisdiction',\n    title: 'Jurisdiction',\n    expression:\n      'var juris = $feature.PLANNING_JURISDICTION;When(' +\n      \"juris == 'RA', 'Raleigh',\" +\n      \"juris == 'CA', 'Cary',\" +\n      \"juris == 'AP', 'Apex',\" +\n      \"juris == 'AN', 'Angier',\" +\n      \"juris == 'CL', 'Clayton',\" +\n      \"juris == 'DU', 'Durham',\" +\n      \"juris == 'FV', 'Fuquay-Varina',\" +\n      \"juris == 'GA', 'Garner',\" +\n      \"juris == 'HS', 'Holly Springs',\" +\n      \"juris == 'KN', 'Knightdale',\" +\n      \"juris == 'MO', 'Morrisville',\" +\n      \"juris == 'RO', 'Rolesville',\" +\n      \"juris == 'WF', 'Wake Forest',\" +\n      \"juris == 'WE', 'Wendell',\" +\n      \"juris == 'ZB', 'Zebulon',\" +\n      \"juris == 'WC', 'Wake County',\" +\n      \" '');\",\n  },\n  {\n    name: 'general',\n    title: 'general',\n    expression:\n      '\"PIN\"+TextFormatting.NewLine+$feature.PIN_NUM+\" \"+$feature.PIN_EXT+TextFormatting.NewLine+' +\n      '\"REID\"+TextFormatting.NewLine+$feature.REID+TextFormatting.NewLine+\"City\"+TextFormatting.NewLine+' +\n      'Proper($feature.CITY_DECODE)+TextFormatting.NewLine+\"Jurisdiction\"+TextFormatting.NewLine+' +\n      '$feature.PLANNING_JURISDICTION+TextFormatting.NewLine+\"Township\"+TextFormatting.NewLine+Proper($feature.TOWNSHIP_DECODE)+\"Map Name\"+TextFormatting.NewLine+' +\n      '$feature.MAP_NAME+TextFormatting.NewLine+\"Land Class\"+TextFormatting.NewLine+Proper($feature.LAND_CLASS_DECODE)',\n  },\n  // {\n  //   name: 'addresses',\n  //   title: 'Addresses',\n  //   expression:\n  //     \"var rel = FeatureSetByRelationshipName($feature, 'CONDO_PROPERTY', ['*'], true);var test = Array(Count(rel));var cnt = 0;var f = First(rel);var fs = FeatureSetByPortalItem(Portal('https://ral.maps.arcgis.com/'), '318be24592ea4dcba042511b3125fd53', 2, ['ADDRESS','FEATURETYPE']);var containfs = Contains(f, fs);var addresses = Array(Count(containfs));var cnt = 0;for (var i in containfs){        addresses[cnt] = {'ADDRESS': i['ADDRESS'], 'FEATURETYPE': i['FEATURETYPE']};    cnt+=1;}function sortAddresses(a,b) {    return  a['ADDRESS'] > b['ADDRESS'];}var sorted =  Sort(addresses, sortAddresses);var list = '';for (var i in sorted) {    list += sorted[i]['ADDRESS'] + ' (' + sorted[i]['FEATURETYPE'] + ')' + TextFormatting.NewLine;}return list;\",\n  // },\n] as ExpressionInfo[];\n\nconst scrollToService = (e: any) => {\n  const rect = (e.detail.requestedAccordionItem as HTMLElement).getBoundingClientRect();\n  const div = document.querySelector('#featureWidget')?.parentElement;\n  setTimeout(() => {\n    div?.scrollTo({ top: rect.top + div.scrollTop - 155, behavior: 'smooth' });\n  }, 100);\n};\nconst serviceChanged = (graphic: __esri.Graphic, view: __esri.MapView | __esri.SceneView, e: any) => {\n  if (\n    !e.detail.requestedAccordionItem.hasAttribute('active') &&\n    e.detail.requestedAccordionItem.childElementCount === 0\n  ) {\n    const loader = document.createElement('calcite-loader');\n    loader.setAttribute('inline', '');\n    const header = e.detail.requestedAccordionItem.shadowRoot.querySelector('.accordion-item-header') as HTMLElement;\n    header.insertBefore(loader, header.childNodes[1]);\n    const serviceGroup: any = services.find((service) => {\n      return service.group.title === e.detail.requestedAccordionItem.getAttribute('item-title');\n    });\n    const promises: Promise<__esri.FeatureSet>[] = [];\n\n    if (serviceGroup) {\n      const layers = view.map.allLayers.filter((layer) => {\n        return serviceGroup.group.layers.includes(layer.title);\n      });\n      layers.forEach((layer) => {\n        if (layer.type === 'feature') {\n          promises.push(\n            (layer as __esri.FeatureLayer).queryFeatures({\n              geometry: geometryEngine.geodesicBuffer(graphic.geometry, -5, 9002) as __esri.Geometry,\n              outFields: ['*'],\n              returnGeometry: true,\n            }),\n          );\n        }\n      });\n    }\n\n    if (promises.length) {\n      return Promise.all(promises).then((results) => {\n        let hasFeatures = false;\n        results.forEach((result) => {\n          if (result.features.length) {\n            hasFeatures = true;\n            result.features.forEach((feature: __esri.Graphic) => {\n              const div = document.createElement('div');\n              e.detail.requestedAccordionItem.append(div);\n              new Feature({ container: div, graphic: feature });\n            });\n          }\n        });\n        if (!hasFeatures) {\n          const div = document.createElement('div');\n          div.textContent = 'No information available.';\n          div.style.margin = '0.5em';\n          e.detail.requestedAccordionItem.append(div);\n        }\n        scrollToService(e);\n        header.removeChild(loader);\n      });\n    } else {\n      header.removeChild(loader);\n      return 'No services found.';\n    }\n  } else {\n    scrollToService(e);\n  }\n};\nconst deedCreator = (e: any) => {\n  return (e.graphic.layer as FeatureLayer)\n    .queryRelatedFeatures({\n      relationshipId: (e.graphic.layer as FeatureLayer).relationships.find((r) => {\n        return r.name === 'CONDO_BOOKS';\n      })?.id,\n      objectIds: [e.graphic.getAttribute('OBJECTID')],\n      outFields: ['BOM_DOC_NUM', 'DEED_DOC_NUM'],\n    })\n    .then((result) => {\n      const deed = result[e.graphic.getAttribute('OBJECTID')].features[0].getAttribute('DEED_DOC_NUM');\n      const bom = result[e.graphic.getAttribute('OBJECTID')].features[0].getAttribute('BOM_DOC_NUM');\n      const div = document.createElement('div');\n      div.setAttribute('style', 'display: flex;flex-direction: row;justify-content: space-around;');\n      if (deed) {\n        const deedBtn = document.createElement('calcite-button');\n        deedBtn.setAttribute('scale', 'm');\n        deedBtn.setAttribute('target', '_blank');\n        deedBtn.setAttribute('appearance', 'clear');\n        deedBtn.setAttribute('icon-start', 'file-text');\n        // deedBtn.setAttribute(\n        //   'href',\n        //   'http://services.wakegov.com/booksweb/pdfview.aspx?docid=' + deed + '&RecordDate=',\n        // );\n        deedBtn.setAttribute('rel', 'noreferrer');\n        deedBtn.onclick = () => {\n          window.open('http://services.wakegov.com/booksweb/pdfview.aspx?docid=' + deed + '&RecordDate=', 'deedwindow');\n        };\n        deedBtn.textContent = 'Deed';\n        div.append(deedBtn);\n      }\n      if (bom) {\n        const bombtn = document.createElement('calcite-button');\n        bombtn.setAttribute('scale', 'm');\n        bombtn.setAttribute('target', '_blank');\n        bombtn.setAttribute('appearance', 'clear');\n        bombtn.setAttribute('icon-start', 'map');\n        //bombtn.setAttribute('href', 'http://services.wakegov.com/booksweb/pdfview.aspx?docid=' + bom + '&RecordDate=');\n        bombtn.setAttribute('rel', 'noreferrer');\n        bombtn.textContent = 'Book of Maps';\n        bombtn.onclick = () => {\n          window.open('http://services.wakegov.com/booksweb/pdfview.aspx?docid=' + bom + '&RecordDate=', 'bomwindow');\n        };\n        div.append(bombtn);\n      }\n\n      return div;\n    });\n};\n\nconst wellCreator = (e: any, view: __esri.MapView) => {\n  const layer = view.map.allLayers.find((layer: __esri.Layer) => {\n    return layer.title.includes('Wells');\n  }) as FeatureLayer;\n  return layer\n    .queryFeatures({\n      where: `PIN_NUM = '${e.graphic.attributes['PIN_NUM']}'`,\n      returnGeometry: false,\n    })\n    .then((featureSet) => {\n      const div = document.createElement('div');\n      div.setAttribute('style', 'display: flex;flex-direction: row;justify-content: space-around;');\n\n      if (featureSet.features.length) {\n        const pin = featureSet.features[0].getAttribute('PIN_NUM');\n        const btn = document.createElement('calcite-button');\n        btn.setAttribute('scale', 'm');\n        btn.setAttribute('target', '_blank');\n        btn.setAttribute('appearance', 'clear');\n        btn.setAttribute('icon-start', 'link');\n        // btn.setAttribute('href', 'https://maps.wakegov.com/water-analysis/index.html#/?pin=' + pin);\n        btn.setAttribute('rel', 'noreferrer');\n\n        btn.textContent = 'Wells';\n        btn.onclick = () => {\n          window.open('https://maps.wakegov.com/water-analysis/index.html#/?pin=' + pin, 'wells');\n        };\n        div.append(btn);\n      }\n      const layer = view.map.allLayers.find((layer: __esri.Layer) => {\n        return layer.title.includes('Septic');\n      }) as FeatureLayer;\n      layer\n        .queryFeatures({\n          where: `PIN_NUM = '${e.graphic.attributes['PIN_NUM']}'`,\n          returnGeometry: false,\n        })\n        .then((featureSet) => {\n          if (featureSet.features.length) {\n            const pin = featureSet.features[0].getAttribute('PIN_NUM');\n            const btn = document.createElement('calcite-button');\n            btn.setAttribute('scale', 'm');\n            btn.setAttribute('target', '_blank');\n            btn.setAttribute('appearance', 'clear');\n            btn.setAttribute('rel', 'noreferrer');\n            //btn.setAttribute('href', 'https://maps.wakegov.com/septic/index.html#/?pin=' + pin);\n            btn.setAttribute('icon-start', 'link');\n            btn.textContent = 'Septic';\n            btn.onclick = () => {\n              window.open('https://maps.wakegov.com/septic/index.html#/?pin=' + pin, 'septic');\n            };\n            div.append(btn);\n          }\n        });\n      return div;\n    });\n};\n\nexport const getPhotos = (feature: __esri.Graphic): Promise<__esri.MediaInfo[]> => {\n  return new Promise(function (resolve) {\n    const relationship = (feature.layer as FeatureLayer)?.relationships.find((r) => {\n      return r.name === 'CONDO_PHOTOS';\n    });\n    // const media = ((feature.layer as FeatureLayer).popupTemplate.content as __esri.Content[]).find(\n    //     (content: __esri.Content) => {\n    //         return content?.type === 'media';\n    //     },\n    // );\n\n    // (media as __esri.MediaContent).mediaInfos = [];\n    const mediaInfos: any[] = [];\n    const layer: FeatureLayer = feature.layer as FeatureLayer;\n    layer\n      ?.queryRelatedFeatures({\n        relationshipId: relationship?.id,\n        objectIds: [feature.getAttribute('OBJECTID')],\n        outFields: ['*'],\n      })\n      .then((result) => {\n        for (const key in result) {\n          result[key].features.forEach((feature: __esri.Graphic) => {\n            mediaInfos.push({\n              title: '',\n              type: 'image',\n              caption: '',\n              value: {\n                sourceURL: `https://services.wakegov.com/realestate/photos/mvideo/${feature.getAttribute(\n                  'IMAGEDIR',\n                )}/${feature.getAttribute('IMAGENAME')}`,\n              },\n            });\n          });\n        }\n\n        resolve(mediaInfos);\n      });\n  });\n};\n\n// export const featureLayer = view.map.allLayers.find((layer) => {\n// \treturn layer.title.includes('Property') && layer.type === 'feature';\n// });\n// export const condosTable = view.map.allLayers.find((layer) => {\n// \treturn layer.title.includes('Condos') && layer.type === 'feature';\n// });\n// export const addressTable = view.map.allLayers.find((layer) => {\n// \treturn layer.title.includes('Addresses') && layer.type === 'feature';\n// });\n// export const featureLayer = new FeatureLayer({\n// \tportalItem: {\n// \t\tid: '08050bf067bb4b20adea4b0b4f0a39e3',\n// \t},\n// \tspatialReference: { wkid: 102100 },\n// });\n\n// export const condosTable = new FeatureLayer({\n// \tportalItem: {\n// \t\tid: '08050bf067bb4b20adea4b0b4f0a39e3',\n// \t},\n// \tlayerId: 1,\n// \tspatialReference: { wkid: 102100 },\n// });\n// condosTable.load();\n// export const addressTable = new FeatureLayer({\n// \tportalItem: {\n// \t\tid: '08050bf067bb4b20adea4b0b4f0a39e3',\n// \t},\n// \tlayerId: 4,\n// \tspatialReference: { wkid: 102100 },\n// });\n// addressTable.load();\n\nfunction getFieldInfos(condoTable: FeatureLayer): FieldInfo[] {\n  let fieldConfigs: FieldInfo[] = [];\n  condoTable.fields.forEach((field) => {\n    fieldConfigs.push(\n      new FieldInfo({\n        fieldName: field.name,\n        label: field.alias,\n        visible: ['SITE_ADDRESS', 'OWNER', 'PIN_NUM', 'PIN_EXT', 'REID'].includes(field.name),\n      }),\n    );\n  });\n  const ext = fieldConfigs.find((fc) => {\n    return fc.fieldName === 'PIN_EXT';\n  }) as FieldInfo;\n  const pin = fieldConfigs.find((fc) => {\n    return fc.fieldName === 'PIN_NUM';\n  }) as FieldInfo;\n  const reid = fieldConfigs.find((fc) => {\n    return fc.fieldName === 'REID';\n  }) as FieldInfo;\n  const owner = fieldConfigs.find((fc) => {\n    return fc.fieldName === 'OWNER';\n  }) as FieldInfo;\n  const address = fieldConfigs.find((fc) => {\n    return fc.fieldName === 'SITE_ADDRESS';\n  }) as FieldInfo;\n  fieldConfigs = fieldConfigs.filter((fc) => {\n    return !['SITE_ADDRESS', 'OWNER', 'PIN_NUM', 'PIN_EXT', 'REID'].includes(fc.fieldName);\n  });\n  fieldConfigs.unshift(ext);\n  fieldConfigs.unshift(pin);\n  fieldConfigs.unshift(reid);\n  fieldConfigs.unshift(owner);\n  fieldConfigs.unshift(address);\n  return fieldConfigs;\n}\nexport const createTemplate = (view: __esri.MapView | __esri.SceneView, condoTable: FeatureLayer): PopupTemplate => {\n  // const propertyLayer = view.map.allLayers.find((layer) => {\n  //   return layer.title.includes('Property') && layer.type === 'feature';\n  // }) as FeatureLayer;\n  const popupTemplate = new PopupTemplate({\n    expressionInfos: arcadeExpressionInfos,\n    fieldInfos: getFieldInfos(condoTable).map((field) => {\n      return {\n        fieldName: field.fieldName,\n        label: field.label,\n        visible: ['SITE_ADDRESS', 'OWNER', 'PIN_NUM', 'PIN_EXT', 'REID'].includes(field.fieldName),\n      };\n    }),\n    content: [\n      {\n        type: 'text',\n        text: '<h1>{SITE_ADDRESS}</h1>',\n      },\n      new CustomContent({\n        outFields: ['*'],\n        creator: (e: any) => {\n          const div = document.createElement('div');\n          div.setAttribute('style', 'display: flex;flex-direction: row;justify-content: space-around;');\n          const btn = document.createElement('calcite-button');\n          btn.setAttribute('scale', 'm');\n          btn.setAttribute('target', '_blank');\n          btn.setAttribute('appearance', 'clear');\n          btn.setAttribute('icon-start', 'link');\n          btn.setAttribute('rel', 'noreferrer');\n          // btn.setAttribute(\n          //   'href',\n          //   `https://maps.google.com?q=${e.graphic.getAttribute('SITE_ADDRESS')},${e.graphic.getAttribute(\n          //     'CITY_DECODE',\n          //   )},NC`,\n          // );\n\n          btn.textContent = 'Google Maps';\n          btn.onclick = () => {\n            window.open(\n              `https://maps.google.com?q=${e.graphic.getAttribute('SITE_ADDRESS')},${e.graphic.getAttribute(\n                'CITY_DECODE',\n              )},NC`,\n              'googlewindow',\n            );\n          };\n          div.append(btn);\n          const tax = document.createElement('calcite-button');\n          tax.setAttribute('scale', 'm');\n          tax.setAttribute('target', '_blank');\n          // tax.setAttribute(\n          //   'href',\n          //   'http://services.wakegov.com/realestate/Account.asp?id=' + e.graphic.getAttribute('REID'),\n          // );\n          tax.setAttribute('rel', 'noreferrer');\n\n          tax.setAttribute('appearance', 'clear');\n          tax.setAttribute('icon-start', 'locator');\n          tax.onclick = () => {\n            window.open(\n              'http://services.wakegov.com/realestate/Account.asp?id=' + e.graphic.getAttribute('REID'),\n              'taxwindow',\n            );\n          };\n          tax.textContent = 'Tax Page';\n          div.append(tax);\n          return div;\n          // (e.graphic.layer as FeatureLayer).relationships.find((r) => {\n          //   return r.name.includes('PROPERTY');\n          // })?.relatedTableId;\n\n          // return propertyLayer\n          //   ?.queryFeatures({\n          //     where: `REID = '${e.graphic.getAttribute('REID')}'`,\n          //     outFields: ['OBJECTID', 'PIN_NUM'],\n          //     returnGeometry: true,\n          //     returnCentroid: true,\n          //     outSpatialReference: { wkid: 4326 },\n          //   })\n          //   .then((result) => {\n          //     return new Locator({\n          //       url: 'https://maps.raleighnc.gov/arcgis/rest/services/Locators/Locator/GeocodeServer',\n          //       outSpatialReference: { wkid: 4326 },\n          //     })\n          //       .addressToLocations({\n          //         address: { singleLine: e.graphic.getAttribute('SITE_ADDRESS') },\n          //         outFields: ['*'],\n          //       })\n          //       .then((candidates: __esri.AddressCandidate[]) => {\n          //         if (candidates.length) {\n          //           // const candidate = candidates.find((candidate) => {\n          //           // \treturn candidate.attributes['Loc_name'] === 'WakeStreets';\n          //           // });\n          //           const candidate = candidates[0];\n          //           if (candidate) {\n          //             const dist = geodesicUtils.geodesicDistance(candidate.location, {\n          //               x: (result.features[0]?.geometry as __esri.Polygon).centroid.longitude,\n          //               y: (result.features[0]?.geometry as __esri.Polygon).centroid.latitude,\n          //               spatialReference: { wkid: 4326 } as any,\n          //             } as any);\n          //             const cbll =\n          //               (result.features[0]?.geometry as __esri.Polygon).centroid.latitude +\n          //               ',' +\n          //               (result.features[0]?.geometry as __esri.Polygon).centroid.longitude;\n          //             const div = document.createElement('div');\n          //             div.setAttribute('style', 'display: flex;flex-direction: row;justify-content: space-around;');\n          //             const btn = document.createElement('calcite-button');\n          //             btn.setAttribute('scale', 'm');\n          //             btn.setAttribute('target', '_blank');\n          //             btn.setAttribute('round', '');\n          //             btn.setAttribute('icon-start', '360-view');\n          //             btn.setAttribute('rel', 'noreferrer');\n          //             btn.setAttribute(\n          //               'href',\n          //               'https://maps.google.com?layer=c&cbll=' +\n          //                 cbll +\n          //                 '&cbp=0,' +\n          //                 dist.azimuth?.toString() +\n          //                 ',0,0,0',\n          //             );\n\n          //             btn.textContent = 'Street View';\n\n          //             div.append(btn);\n          //             const tax = document.createElement('calcite-button');\n          //             tax.setAttribute('scale', 'm');\n          //             tax.setAttribute('target', '_blank');\n          //             tax.setAttribute(\n          //               'href',\n          //               'http://services.wakegov.com/realestate/Account.asp?id=' + e.graphic.getAttribute('REID'),\n          //             );\n          //             tax.setAttribute('rel', 'noreferrer');\n\n          //             tax.setAttribute('round', '');\n          //             tax.setAttribute('icon-start', 'locator');\n          //             tax.textContent = 'Tax Page';\n          //             div.append(tax);\n          //             return div;\n          //           }\n          //         }\n          //       });\n          //   });\n        },\n      }),\n      new CustomContent({\n        outFields: ['PIN_NUM'],\n        creator: (e) => {\n          return wellCreator(e, view as __esri.MapView);\n        },\n      }),\n      {\n        type: 'text',\n        text: '<h2>General</h1>',\n      },\n      {\n        type: 'fields',\n        fieldInfos: [\n          {\n            fieldName: 'expression/pin',\n            label: 'PIN',\n          },\n          {\n            fieldName: 'REID',\n            label: 'REID',\n          },\n          {\n            fieldName: 'expression/city',\n            label: 'City',\n          },\n          {\n            fieldName: 'expression/jurisdiction',\n            label: 'Jurisdiction',\n          },\n          {\n            fieldName: 'expression/township',\n            label: 'Township',\n          },\n          {\n            fieldName: 'MAP_NAME',\n            label: 'Map Name',\n          },\n          {\n            fieldName: 'LAND_CLASS_DECODE',\n            label: 'Land Class',\n          },\n        ],\n      },\n\n      // {\n      //   type: 'custom',\n      //   text: '<calcite-button scale=\"s\" href=\"#\" class=\"streetView\" target=\"_blank\">Street View</calcite-button>'\n      // },\n      {\n        type: 'text',\n        text: '<h2>Owner</h1>',\n      },\n      {\n        type: 'text',\n        text:\n          // '<h1 class=\"text-green\">{SITE_ADDRESS}</h1>' +\n          // '<h2>General</h2>{expression/general}' +\n          '{OWNER}<br/>{expression/mailing-address}',\n      },\n      {\n        type: 'text',\n        text: '<h2>Valuation</h1>',\n      },\n      {\n        type: 'fields',\n        fieldInfos: [\n          {\n            fieldName: 'expression/build_val',\n          },\n          {\n            fieldName: 'expression/land_val',\n          },\n          {\n            fieldName: 'expression/total_val',\n          },\n          {\n            fieldName: 'BILLING_CLASS_DECODE',\n            label: 'Billing Class',\n          },\n        ],\n      },\n      {\n        type: 'text',\n        text: '<h2>Last Sale</h1>',\n      },\n      {\n        type: 'fields',\n        fieldInfos: [\n          {\n            fieldName: 'SALE_DATE',\n            format: {\n              dateFormat: 'short-date',\n            },\n            label: 'Date Sold',\n          },\n          {\n            fieldName: 'expression/sale_price',\n          },\n        ],\n      },\n      {\n        type: 'text',\n        text: '<h2>Deeds</h1>',\n      },\n      {\n        type: 'fields',\n        fieldInfos: [\n          {\n            fieldName: 'DEED_BOOK',\n            label: 'Book',\n          },\n          {\n            fieldName: 'DEED_PAGE',\n            label: 'Page',\n          },\n          {\n            fieldName: 'DEED_DATE',\n            format: {\n              dateFormat: 'short-date',\n            },\n            label: 'Deed Date',\n          },\n          {\n            fieldName: 'DEED_ACRES',\n            format: {\n              places: 2,\n            },\n            label: 'Deed Acres',\n          },\n          {\n            fieldName: 'PROPDESC',\n            label: 'Property Description',\n          },\n        ],\n      },\n\n      new CustomContent({\n        outFields: ['OBJECTID', 'REID'],\n        creator: deedCreator,\n      }),\n      {\n        type: 'text',\n        text: '<h2>Building</h1>',\n      },\n      {\n        type: 'fields',\n        fieldInfos: [\n          {\n            fieldName: 'HEATEDAREA',\n            format: {\n              digitSeparator: true,\n            },\n            label: 'Heated Area',\n          },\n          {\n            fieldName: 'YEAR_BUILT',\n            format: {\n              digitSeparator: false,\n            },\n            label: 'Year Built',\n          },\n          {\n            fieldName: 'DESIGN_STYLE_DECODE',\n            label: 'Design/Style',\n          },\n          {\n            fieldName: 'TYPE_USE_DECODE',\n            label: 'Use Type',\n          },\n          {\n            fieldName: 'TOTSTRUCTS',\n            label: 'Total Structures',\n          },\n          {\n            fieldName: 'TOTUNITS',\n            label: 'Total Units',\n          },\n        ],\n      },\n      {\n        type: 'media',\n        mediaInfos: [],\n      },\n      {\n        type: 'text',\n        text: '<h2>Services</h1>',\n      },\n      new CustomContent({\n        outFields: ['*'],\n        creator: (e: any) => {\n          const accordion = document.createElement('calcite-accordion');\n          accordion.setAttribute('selection-mode', 'single');\n          accordion.setAttribute('icon-type', 'chevron');\n          services.forEach((service) => {\n            const item = document.createElement('calcite-accordion-item');\n            item.setAttribute('item-title', service.group.title);\n            accordion.append(item);\n          });\n          //const f = serviceChanged.bind(e.Graphic);\n          // setTimeout(f, 1000);\n          const graphic = e.graphic;\n          accordion.addEventListener(\n            'calciteAccordionChange',\n            (e: any) => {\n              serviceChanged(graphic, view, e);\n            },\n            { passive: true },\n          );\n          return accordion;\n        },\n      }),\n      new CustomContent({\n        outFields: ['*'],\n        creator: (e: any) => {\n          const container = document.createElement('div');\n          container.setAttribute('style', 'max-height: 500px;min-height: 100px');\n          const title = document.createElement('h2');\n          title.textContent = 'Addresses';\n          container.append(title);\n          const tablediv = document.createElement('div');\n          container.append(tablediv);\n          const graphic: __esri.Graphic = e.graphic;\n          (view as __esri.MapView).graphics.removeMany(\n            (view as __esri.MapView).graphics.filter((graphic) => {\n              return graphic.getAttribute('type') === 'address';\n            }),\n          );\n          const addresses = new FeatureLayer({\n            portalItem: {\n              id: '318be24592ea4dcba042511b3125fd53',\n            },\n            outFields: ['ADDRESS', 'FEATURETYPE'],\n            customParameters: {\n              outSR: view.spatialReference,\n              orderByFields: 'ADDRESS',\n              returnGeometry: true,\n            },\n          });\n          return (\n            addresses\n              //.queryFeatureCount({ where: `NCPIN = '${graphic.getAttribute('PIN_NUM')}'` })\n              .queryFeatureCount({ geometry: graphic.geometry })\n              .then((count) => {\n                if (count > 0) {\n                  const suspense = (\n                    <Suspense fallback={''}>\n                      <AddressTable\n                        layer={addresses}\n                        view={view}\n                        geometry={graphic.geometry}\n                        pin={graphic.getAttribute('PIN_NUM')}\n                      />\n                    </Suspense>\n                  );\n                  ReactDOM.render(suspense, tablediv);\n\n                  return container;\n                }\n              })\n          );\n        },\n      }),\n      // {\n      //   type: 'text',\n      //   text: '<h2>Addresses</h1>',\n      // },\n      // {\n      //   type: 'text',\n      //   text: '{expression/addresses}',\n      // },\n    ],\n  });\n  return popupTemplate;\n  // condosTable.popupTemplate = popupTemplate;\n};\n","/* eslint-disable @typescript-eslint/explicit-module-boundary-types */\nimport React, { useEffect, useRef, useState } from 'react';\nimport Feature from '@arcgis/core/widgets/Feature';\nimport { createTemplate, getPhotos } from '../utils/propertytemplate';\nimport './PropertyInfo.scss';\nexport const PropertyInfo = (props: any) => {\n  const listRef = useRef<HTMLDivElement>(null);\n  const [loaded, setLoaded] = useState(false);\n  const featureWidget = useRef<Feature>();\n  const [view, setView] = useState<__esri.MapView>();\n  useEffect(() => {\n    if (!loaded && props.view) {\n      setView(props.view);\n      featureWidget.current = new Feature({\n        container: listRef.current as HTMLDivElement,\n        view: view,\n      });\n      setLoaded(true);\n    }\n  }); // only after initial render\n  useEffect(() => {\n    if (featureWidget.current) {\n      if (props.feature) {\n        getPhotos(props.feature).then((mediaInfos: __esri.MediaInfo[]) => {\n          props.feature.popupTemplate = createTemplate(\n            view as __esri.MapView,\n            props.feature.layer as __esri.FeatureLayer,\n          );\n          const media = (props.feature.popupTemplate.content as __esri.Content[]).find((content: __esri.Content) => {\n            return content?.type === 'media';\n          }) as __esri.MediaContent;\n          media.mediaInfos = mediaInfos;\n          if (featureWidget.current) {\n            featureWidget.current.graphic = props.feature;\n          }\n          const scroll = document.querySelector('.esri-feature')?.scrollTop;\n          setTimeout(() => {\n            document.querySelector('.esri-feature')?.scrollTo({ top: scroll, behavior: 'smooth' });\n          }, 1000);\n        });\n      } else {\n        featureWidget.current.graphic = props.feature;\n      }\n    }\n  }, [props.feature]);\n  return <div id=\"featureWidget\" ref={listRef}></div>;\n};\nexport default PropertyInfo;\n"],"names":["webpackEmptyAsyncContext","req","Promise","resolve","then","e","Error","code","keys","id","module","exports","AddressTable","lazy","arcadeExpressionInfos","name","title","expression","scrollToService","rect","detail","requestedAccordionItem","getBoundingClientRect","div","document","querySelector","parentElement","setTimeout","scrollTo","top","scrollTop","behavior","deedCreator","graphic","layer","queryRelatedFeatures","relationshipId","relationships","find","r","objectIds","getAttribute","outFields","result","deed","features","bom","createElement","setAttribute","deedBtn","onclick","window","open","textContent","append","bombtn","getFieldInfos","condoTable","fieldConfigs","fields","forEach","field","push","FieldInfo","fieldName","label","alias","visible","includes","ext","fc","pin","reid","owner","address","filter","unshift","createTemplate","view","popupTemplate","PopupTemplate","expressionInfos","fieldInfos","map","content","type","text","CustomContent","creator","btn","tax","allLayers","queryFeatures","where","attributes","returnGeometry","featureSet","length","wellCreator","format","dateFormat","places","digitSeparator","mediaInfos","accordion","services","service","item","group","addEventListener","hasAttribute","childElementCount","loader","header","shadowRoot","insertBefore","childNodes","serviceGroup","promises","layers","geometry","geometryEngine","geodesicBuffer","all","results","hasFeatures","feature","Feature","container","style","margin","removeChild","serviceChanged","passive","tablediv","graphics","removeMany","addresses","FeatureLayer","portalItem","customParameters","outSR","spatialReference","orderByFields","queryFeatureCount","count","suspense","Suspense","fallback","ReactDOM","PropertyInfo","props","listRef","useRef","loaded","setLoaded","useState","featureWidget","setView","useEffect","current","relationship","key","caption","value","sourceURL","scroll","ref"],"sourceRoot":""}