(this.webpackJsonpimaps=this.webpackJsonpimaps||[]).push([[118,273,274],{122:function(e,t,r){"use strict";r.d(t,"a",(function(){return I})),r.d(t,"b",(function(){return b})),r.d(t,"c",(function(){return h})),r.d(t,"d",(function(){return F})),r.d(t,"e",(function(){return l})),r.d(t,"f",(function(){return C})),r.d(t,"g",(function(){return s})),r.d(t,"h",(function(){return L})),r.d(t,"i",(function(){return T})),r.d(t,"j",(function(){return w})),r.d(t,"k",(function(){return M})),r.d(t,"l",(function(){return o})),r.d(t,"m",(function(){return B})),r.d(t,"n",(function(){return i})),r.d(t,"o",(function(){return U})),r.d(t,"p",(function(){return n})),r.d(t,"q",(function(){return N})),r.d(t,"r",(function(){return d})),r.d(t,"s",(function(){return y})),r.d(t,"t",(function(){return p})),r.d(t,"u",(function(){return _})),r.d(t,"v",(function(){return c})),r.d(t,"w",(function(){return x})),r.d(t,"x",(function(){return v})),r.d(t,"y",(function(){return g})),r.d(t,"z",(function(){return m})),r.d(t,"A",(function(){return V})),r.d(t,"B",(function(){return f})),r.d(t,"C",(function(){return u})),r.d(t,"D",(function(){return A})),r.d(t,"E",(function(){return a})),r.d(t,"F",(function(){return S})),r.d(t,"G",(function(){return P})),r.d(t,"H",(function(){return k}));var i=1e-30,n=4294967295,a=512,s=8,o=29,l=16,u=8,h={metrics:{width:15,height:17,left:0,top:-7,advance:14}},f=0,x=0,c=0,d=1,y=2,p=3,_=4,v=5,g=6,m=5,V=6,I=1,b=2,B=2,w=1,T=2,L=4,A=2.5,M=6,k=5,P=6,S=1.15,N=2,C=7,U=500,F=128},1225:function(e,t,r){"use strict";r.r(t);var i,n,a=r(7),s=r(94),o=r(774),l=r(89);(n=i||(i={}))[n.INITIALIZED=0]="INITIALIZED",n[n.NO_DATA=1]="NO_DATA",n[n.READY=2]="READY",n[n.MODIFIED=3]="MODIFIED",n[n.INVALID=4]="INVALID";var u=r(644),h=r(683),f=r(495),x=r(446);function c(e){return!(e<11904)&&(e>=12704&&e<=12735||e>=12544&&e<=12591||e>=65072&&e<=65103||e>=63744&&e<=64255||e>=13056&&e<=13311||e>=11904&&e<=12031||e>=12736&&e<=12783||e>=12288&&e<=12351||e>=13312&&e<=19903||e>=19968&&e<=40959||e>=12800&&e<=13055||e>=65280&&e<=65519||e>=12352&&e<=12447||e>=12272&&e<=12287||e>=12032&&e<=12255||e>=12784&&e<=12799||e>=12448&&e<=12543||e>=65040&&e<=65055||e>=42128&&e<=42191||e>=40960&&e<=42127)}function d(e){switch(e){case 10:case 32:case 38:case 40:case 41:case 43:case 45:case 47:case 173:case 183:case 8203:case 8208:case 8211:case 8231:return!0}return!1}function y(e){switch(e){case 9:case 10:case 11:case 12:case 13:case 32:return!0}return!1}var p=24;class _{constructor(e,t,r,i,n,a,s){this._glyphItems=e,this._maxWidth=t,this._lineHeight=r,this._letterSpacing=i,this._hAnchor=n,this._vAnchor=a,this._justify=s}getShaping(e,t,r){for(var i,n=this._letterSpacing,a=this._lineHeight,s=this._justify,o=this._maxWidth,l=[],u=0,h=0,f=e.length,x=0;x<f;x++){var p=e.charCodeAt(x),_=r&&(746===(i=p)||747===i||!(i<4352)&&(i>=12704&&i<=12735||i>=12544&&i<=12591||i>=65072&&i<=65103&&!(i>=65097&&i<=65103)||i>=63744&&i<=64255||i>=13056&&i<=13311||i>=11904&&i<=12031||i>=12736&&i<=12783||i>=12288&&i<=12351&&!(i>=12296&&i<=12305||i>=12308&&i<=12319||12336===i)||i>=13312&&i<=19903||i>=19968&&i<=40959||i>=12800&&i<=13055||i>=12592&&i<=12687||i>=43360&&i<=43391||i>=55216&&i<=55295||i>=4352&&i<=4607||i>=44032&&i<=55215||i>=12352&&i<=12447||i>=12272&&i<=12287||i>=12688&&i<=12703||i>=12032&&i<=12255||i>=12784&&i<=12799||i>=12448&&i<=12543&&12540!==i||i>=65280&&i<=65519&&!(65288===i||65289===i||65293===i||i>=65306&&i<=65310||65339===i||65341===i||65343===i||i>=65371&&i<=65503||65507===i||i>=65512&&i<=65519)||i>=65104&&i<=65135&&!(i>=65112&&i<=65118||i>=65123&&i<=65126)||i>=5120&&i<=5759||i>=6320&&i<=6399||i>=65040&&i<=65055||i>=19904&&i<=19967||i>=40960&&i<=42127||i>=42128&&i<=42191)),v=void 0;for(var g of this._glyphItems)if(v=g[p])break;l.push({codePoint:p,x:u,y:h,vertical:_,glyphMosaicItem:v}),v&&(u+=v.metrics.advance+n)}var m=u;o>0&&(m=u/Math.max(1,Math.ceil(u/o)));for(var V=e.indexOf("\u200b")>=0,I=[],b=0;b<f-1;b++){var B=l[b].codePoint,w=c(B);if(d(B)||w){var T=0;if(10===B)T-=1e4;else if(w&&V)T+=150;else{40!==B&&65288!==B||(T+=50);var L=l[b+1].codePoint;41!==L&&65289!==L||(T+=50)}I.push(this._buildBreak(b+1,l[b].x,m,I,T,!1))}}for(var A=this._optimalBreaks(this._buildBreak(f,u,m,I,0,!0)),M=0,k=t?-a:a,P=0,S=0;S<A.length;S++){for(var N=A[S],C=P;C<N&&y(l[C].codePoint);)l[C].glyphMosaicItem=null,++C;for(var U=N-1;U>C&&y(l[U].codePoint);)l[U].glyphMosaicItem=null,--U;if(C<=U){for(var F=l[C].x,E=C;E<=U;E++)l[E].x-=F,l[E].y=h;var D=l[U].x;l[U].glyphMosaicItem&&(D+=l[U].glyphMosaicItem.metrics.advance),M=Math.max(D,M),s&&this._applyJustification(l,C,U)}P=N,h+=k}if(l.length>0){var O=A.length-1,R=(s-this._hAnchor)*M,z=(-this._vAnchor*(O+1)+.5)*a;for(var j of(t&&O&&(z+=O*a),l))j.x+=R,j.y+=z}return l.filter((e=>e.glyphMosaicItem))}static getTextBox(e,t){if(!e.length)return null;var r=1/0,i=1/0,n=0,a=0;for(var s of e){var o=s.glyphMosaicItem.metrics.advance,l=s.x,u=s.y-17,h=l+o,f=u+t;r=Math.min(r,l),n=Math.max(n,h),i=Math.min(i,u),a=Math.max(a,f)}return{x:r,y:i,width:n-r,height:a-i}}static getBox(e){if(!e.length)return null;var t=1/0,r=1/0,i=0,n=0;for(var a of e){var{height:s,left:o,top:l,width:u}=a.glyphMosaicItem.metrics,h=a.x,f=a.y-(s-Math.abs(l)),x=h+u+o,c=f+s;t=Math.min(t,h),i=Math.max(i,x),r=Math.min(r,f),n=Math.max(n,c)}return{x:t,y:r,width:i-t,height:n-r}}static addDecoration(e,t){var r=e.length;if(0!==r){for(var i=e[0].x+e[0].glyphMosaicItem.metrics.left,n=e[0].y,a=1;a<r;a++){var s=e[a];if(s.y!==n){var o=e[a-1].x+e[a-1].glyphMosaicItem.metrics.left+e[a-1].glyphMosaicItem.metrics.width;e.push({codePoint:0,x:i,y:n+t-3,vertical:!1,glyphMosaicItem:{sdf:!0,rect:new x.a(4,0,4,8),metrics:{width:o-i,height:8,left:0,top:0,advance:0},page:0,code:0}}),n=s.y,i=s.x+s.glyphMosaicItem.metrics.left}}var l=e[r-1].x+e[r-1].glyphMosaicItem.metrics.left+e[r-1].glyphMosaicItem.metrics.width;e.push({codePoint:0,x:i,y:n+t-3,vertical:!1,glyphMosaicItem:{sdf:!0,rect:new x.a(4,0,4,8),metrics:{width:l-i,height:8,left:0,top:0,advance:0},page:0,code:0}})}}_breakScore(e,t,r,i){var n=(e-t)*(e-t);return i?e<t?n/2:2*n:n+Math.abs(r)*r}_buildBreak(e,t,r,i,n,a){var s=null,o=this._breakScore(t,r,n,a);for(var l of i){var u=t-l.x,h=this._breakScore(u,r,n,a)+l.score;h<=o&&(s=l,o=h)}return{index:e,x:t,score:o,previousBreak:s}}_optimalBreaks(e){return e?this._optimalBreaks(e.previousBreak).concat(e.index):[]}_applyJustification(e,t,r){for(var i=e[r],n=i.vertical?p:i.glyphMosaicItem?i.glyphMosaicItem.metrics.advance:0,a=(i.x+n)*this._justify,s=t;s<=r;s++)e[s].x-=a}}var v=.5;class g{constructor(e,t,r=0,i=-1,n=.5){this.x=e,this.y=t,this.angle=r,this.segment=i,this.minzoom=n}}class m{constructor(e,t,r,i,n,a=.5,s=u.c){this.anchor=e,this.labelAngle=t,this.glyphAngle=r,this.page=i,this.alternateVerticalGlyph=n,this.minzoom=a,this.maxzoom=s}}class V{constructor(e,t,r,i,n,a,s,o,l,u,h,f){this.tl=e,this.tr=t,this.bl=r,this.br=i,this.mosaicRect=n,this.labelAngle=a,this.minAngle=s,this.maxAngle=o,this.anchor=l,this.minzoom=u,this.maxzoom=h,this.page=f}}class I{constructor(e){this.shapes=e}}class b{getIconPlacement(e,t,r){var i=new f.a(e.x,e.y),n=0===r.rotationAlignment,a=r.keepUpright,s=r.rotate*u.b;n&&(s+=e.angle);var o=new I([]);return r.allowOverlap&&r.ignorePlacement||!h.c||(o.iconColliders=[]),this._addIconPlacement(o,i,t,r,s),n&&a&&this._addIconPlacement(o,i,t,r,s+u.d),o}_addIconPlacement(e,t,r,i,n){var a=r.pixelRatio,s=r.width/a,o=r.height/a,l=i.offset,x=l[0],c=l[1];switch(i.anchor){case 0:x-=s/2,c-=o/2;break;case 1:c-=o/2;break;case 2:x-=s,c-=o/2;break;case 3:x-=s/2;break;case 4:x-=s/2,c-=o;break;case 5:break;case 7:c-=o;break;case 6:x-=s;break;case 8:x-=s,c-=o}var d=r.rect,y=2/a,p=x-y,_=c-y,g=p+d.width/a,m=_+d.height/a,I=new f.a(p,_),b=new f.a(g,m),B=new f.a(p,m),w=new f.a(g,_);if(0!==n){var T=Math.cos(n),L=Math.sin(n);I.rotate(T,L),b.rotate(T,L),B.rotate(T,L),w.rotate(T,L)}var A=new V(I,w,B,b,d,n,0,256,t,v,u.c,0);if(e.shapes.push(A),(!i.allowOverlap||!i.ignorePlacement)&&h.c){var M=i.size,k=i.padding,P={xTile:t.x,yTile:t.y,dxPixels:x*M-k,dyPixels:c*M-k,hard:!i.optional,partIndex:0,width:s*M+2*k,height:o*M+2*k,angle:n,minLod:v,maxLod:u.c};e.iconColliders.push(P)}}getTextPlacement(e,t,r,i){var n=new f.a(e.x,e.y),a=i.rotate*u.b,s=0===i.rotationAlignment,o=i.keepUpright,l=i.padding,h=v,x=s?e.angle:0,c=e.segment>=0&&s,d=i.allowOverlap&&i.ignorePlacement?null:[],y=[],g=!c,b=Number.POSITIVE_INFINITY,B=Number.NEGATIVE_INFINITY,w=b,T=B,L=(c||s)&&o,A=i.size/p,M=!1;for(var k of t)if(k.vertical){M=!0;break}var P,S=0,N=0;if(!c&&M){var C=_.getTextBox(t,i.lineHeight*p);switch(i.anchor){case 1:S=C.height/2,N=-C.width/2;break;case 2:S=-C.height/2,N=C.width/2;break;case 3:S=C.height/2,N=C.width/2;break;case 4:S=-C.height/2,N=-C.width/2;break;case 5:S=C.height;break;case 7:N=-C.width;break;case 6:N=C.width;break;case 8:S=-C.height}}for(var U of(S+=i.offset[0]*p,N+=i.offset[1]*p,t)){var F=U.glyphMosaicItem;if(F&&!F.rect.isEmpty){var E=F.rect,D=F.metrics,O=F.page;if(d&&g){if(void 0!==P&&P!==U.y){var R=void 0,z=void 0,j=void 0,Z=void 0;M?(R=-T+S,z=b+N,j=T-w,Z=B-b):(R=b+S,z=w+N,j=B-b,Z=T-w);var G={xTile:e.x,yTile:e.y,dxPixels:R*A-l,dyPixels:z*A-l,hard:!i.optional,partIndex:1,width:j*A+2*l,height:Z*A+2*l,angle:a,minLod:v,maxLod:u.c};d.push(G),w=b=Number.POSITIVE_INFINITY,T=B=Number.NEGATIVE_INFINITY}P=U.y}var q=[];if(c){var K=.5*F.metrics.width,Y=(U.x+D.left-4+K)*A*8;if(h=this._placeGlyph(e,h,Y,r,e.segment,1,U.vertical,O,q),o&&(h=this._placeGlyph(e,h,Y,r,e.segment,-1,U.vertical,O,q)),h>=2)break}else q.push(new m(n,x,x,O,!1)),s&&o&&q.push(new m(n,x+u.d,x+u.d,O,!1));var H=U.x+D.left,W=U.y-17-D.top,J=H+D.width,X=W+D.height,$=void 0,Q=void 0,ee=void 0,te=void 0,re=void 0,ie=void 0,ne=void 0,ae=void 0;if(!c&&M)if(U.vertical){var se=(H+J)/2-D.height/2,oe=(W+X)/2+D.width/2;$=new f.a(-oe-4+S,se-4+N),Q=new f.a($.x+E.width,$.y+E.height),ee=new f.a($.x,Q.y),te=new f.a(Q.x,$.y)}else $=new f.a(4-W+S,H-4+N),Q=new f.a($.x-E.height,$.y+E.width),ee=new f.a(Q.x,$.y),te=new f.a($.x,Q.y);else $=new f.a(H-4+S,W-4+N),Q=new f.a($.x+E.width,$.y+E.height),ee=new f.a($.x,Q.y),te=new f.a(Q.x,$.y);for(var le of q){var ue=void 0,he=void 0,fe=void 0,xe=void 0;if(le.alternateVerticalGlyph){if(!re){var ce=(W+X)/2+N;re=new f.a((H+J)/2+S-D.height/2-4,ce+D.width/2+4),ie=new f.a(re.x+E.height,re.y-E.width),ne=new f.a(ie.x,re.y),ae=new f.a(re.x,ie.y)}ue=re,he=ne,fe=ae,xe=ie}else ue=$,he=ee,fe=te,xe=Q;var de=W,ye=X,pe=le.glyphAngle+a;if(0!==pe){var _e=Math.cos(pe),ve=Math.sin(pe);ue=ue.clone(),he=he.clone(),fe=fe.clone(),xe=xe.clone(),ue.rotate(_e,ve),xe.rotate(_e,ve),he.rotate(_e,ve),fe.rotate(_e,ve)}var ge=0,me=256;if(c&&M?U.vertical?le.alternateVerticalGlyph?(ge=32,me=96):(ge=224,me=32):(ge=224,me=96):(ge=192,me=64),y.push(new V(ue,fe,he,xe,E,le.labelAngle,ge,me,le.anchor,le.minzoom,le.maxzoom,le.page)),d&&(!L||this._legible(le.labelAngle)))if(g)H<b&&(b=H),de<w&&(w=de),J>B&&(B=J),ye>T&&(T=ye);else if(le.minzoom<2){var Ve={xTile:e.x,yTile:e.y,dxPixels:(H+S)*A-l,dyPixels:(de+S)*A-l,hard:!i.optional,partIndex:1,width:(J-H)*A+2*l,height:(ye-de)*A+2*l,angle:pe,minLod:le.minzoom,maxLod:le.maxzoom};d.push(Ve)}}}}if(h>=2)return null;if(d&&g){var Ie,be,Be,we;M?(Ie=-T+S,be=b+N,Be=T-w,we=B-b):(Ie=b+S,be=w+N,Be=B-b,we=T-w);var Te={xTile:e.x,yTile:e.y,dxPixels:Ie*A-l,dyPixels:be*A-l,hard:!i.optional,partIndex:1,width:Be*A+2*l,height:we*A+2*l,angle:a,minLod:v,maxLod:u.c};d.push(Te)}var Le=new I(y);return d&&d.length>0&&(Le.textColliders=d),Le}_legible(e){var t=Object(u.h)(e);return t<65||t>=193}_placeGlyph(e,t,r,i,n,a,s,o,l){var h=a,x=h<0?Object(u.g)(e.angle+u.d,u.a):e.angle,c=0;r<0&&(h*=-1,r*=-1,c=u.d),h>0&&++n;var d=new f.a(e.x,e.y),y=i[n],p=u.c;if(i.length<=n)return p;for(;;){var _=y.x-d.x,v=y.y-d.y,g=Math.sqrt(_*_+v*v),V=Math.max(r/g,t),I=_/g,b=v/g,B=Object(u.g)(Math.atan2(b,I)+c,u.a);if(l.push(new m(d,x,B,o,!1,V,p)),s&&l.push(new m(d,x,B,o,!0,V,p)),V<=t)return V;d=y.clone();do{if(n+=h,i.length<=n||n<0)return V;y=i[n]}while(d.isEqual(y));var w=y.x-d.x,T=y.y-d.y,L=Math.sqrt(w*w+T*T);w*=g/L,T*=g/L,d.x-=w,d.y-=T,p=V}}}var B=r(362),w=r(537);var T=class{constructor(e,t){this.values={};for(var r=t.keys,i=t.values;e.next();)switch(e.tag()){case 1:this.id=e.getUInt64();break;case 2:for(var n=e.getMessage(),a=this.values;!n.empty();){var s=n.getUInt32(),o=n.getUInt32();a[r[s]]=i[o]}n.release();break;case 3:this.type=e.getUInt32();break;case 4:this._pbfGeometry=e.getMessage();break;default:e.skip()}}getGeometry(e){if(void 0!==this._geometry)return this._geometry;if(!this._pbfGeometry)return null;var t,r,i=this._pbfGeometry;this._pbfGeometry=null,e?e.reset(this.type):t=[];for(var n,a=1,s=0,o=0,l=0;!i.empty();){if(0===s){var u=i.getUInt32();a=7&u,s=u>>3}switch(s--,a){case 1:o+=i.getSInt32(),l+=i.getSInt32(),e?e.moveTo(o,l):(r&&t.push(r),(r=[]).push(new f.a(o,l)));break;case 2:o+=i.getSInt32(),l+=i.getSInt32(),e?e.lineTo(o,l):r.push(new f.a(o,l));break;case 7:e?e.close():r&&!r[0].equals(o,l)&&r.push(r[0].clone());break;default:throw i.release(),new Error("Invalid path operation")}}return e?n=e.result():(r&&t.push(r),n=t),i.release(),this._geometry=n,n}},L=r(749);class A extends L.a{constructor(){super(12)}add(e,t,r){var i=this.array;i.push(e),i.push(t),i.push(r)}}L.a;class M{constructor(e){for(this.extent=4096,this.keys=[],this.values=[],this._pbfLayer=e.clone();e.next();)switch(e.tag()){case 1:this.name=e.getString();break;case 3:this.keys.push(e.getString());break;case 4:this.values.push(e.processMessage(M._parseValue));break;case 5:this.extent=e.getUInt32();break;default:e.skip()}}getData(){return this._pbfLayer}static _parseValue(e){for(;e.next();)switch(e.tag()){case 1:return e.getString();case 2:return e.getFloat();case 3:return e.getDouble();case 4:return e.getInt64();case 5:return e.getUInt64();case 6:return e.getSInt64();case 7:return e.getBool();default:e.skip()}return null}}var k=M;class P extends L.a{constructor(e){super(e)}add(e,t,r,i,n,a,s,o){var l=this.array,u=L.a.i1616to32(e,t);l.push(u);u=L.a.i8888to32(Math.round(31*r),Math.round(31*i),Math.round(31*n),Math.round(31*a)),l.push(u),u=L.a.i1616to32(s,0),l.push(u),o&&l.push(...o)}}class S extends L.a{constructor(e){super(e)}add(e,t,r){var i=this.array;i.push(L.a.i1616to32(e,t)),r&&i.push(...r)}}class N extends L.a{constructor(e){super(e)}add(e,t,r,i,n,a,s){var o=this.array,l=this.index,u=L.a.i1616to32(e,t);o.push(u);return u=L.a.i8888to32(Math.round(15*r),Math.round(15*i),n,a),o.push(u),s&&o.push(...s),l}}class C extends L.a{constructor(e){super(e)}add(e,t,r,i,n,a,s,o,l,h,f,x){var c=this.array,d=L.a.i1616to32(e,t);c.push(d),d=L.a.i1616to32(Math.round(8*r),Math.round(8*i)),c.push(d),d=L.a.i8888to32(n/4,a/4,o,l),c.push(d),d=L.a.i8888to32(0,Object(u.h)(s),10*h,Math.min(10*f,255)),c.push(d),x&&c.push(...x)}}class U extends L.a{constructor(e){super(e)}add(e,t,r,i,n){var a=this.array,s=L.a.i1616to32(2*e+r,2*t+i);a.push(s),n&&a.push(...n)}}var F=class{constructor(e,t){this.layerExtent=4096,this._features=[],this.layer=e,this.zoom=t,this._filter=e.getFeatureFilter()}pushFeature(e){this._filter&&!this._filter.filter(e,this.zoom)||this._features.push(e)}hasFeatures(){return this._features.length>0}};var E=class extends F{constructor(e,t,r,i){super(e,t),this.type=4,this._circleVertexBuffer=r,this._circleIndexBuffer=i}get circleIndexStart(){return this._circleIndexStart}get circleIndexCount(){return this._circleIndexCount}processFeatures(e){var t=this._circleVertexBuffer,r=this._circleIndexBuffer;this._circleIndexStart=3*r.index,this._circleIndexCount=0;var i=this.layer,n=this.zoom;for(var a of(e&&e.setExtent(this.layerExtent),this._features)){var s=a.getGeometry(e);if(s){var o=i.circleMaterial.encodeAttributes(a,n,i);for(var l of s)if(l)for(var u of l){var h=t.index;t.add(u.x,u.y,0,0,o),t.add(u.x,u.y,0,1,o),t.add(u.x,u.y,1,0,o),t.add(u.x,u.y,1,1,o),r.add(h+0,h+1,h+2),r.add(h+1,h+2,h+3),this._circleIndexCount+=6}}}}serialize(){var e=6;e+=this.layerUIDs.length,e+=this._circleVertexBuffer.array.length,e+=this._circleIndexBuffer.array.length;var t=new Uint32Array(e),r=new Int32Array(t.buffer),i=0;t[i++]=this.type,t[i++]=this.layerUIDs.length;for(var n=0;n<this.layerUIDs.length;n++)t[i++]=this.layerUIDs[n];t[i++]=this._circleIndexStart,t[i++]=this._circleIndexCount,t[i++]=this._circleVertexBuffer.array.length;for(var a=0;a<this._circleVertexBuffer.array.length;a++)r[i++]=this._circleVertexBuffer.array[a];t[i++]=this._circleIndexBuffer.array.length;for(var s=0;s<this._circleIndexBuffer.array.length;s++)t[i++]=this._circleIndexBuffer.array[s];return t.buffer}},D=r(315),O=r(536),R=new(r(538).a);class z extends F{constructor(e,t,r,i,n,a){super(e,t),this.type=1,this._fillVertexBuffer=r,this._fillIndexBuffer=i,this._outlineVertexBuffer=n,this._outlineIndexBuffer=a}get fillIndexStart(){return this._fillIndexStart}get fillIndexCount(){return this._fillIndexCount}get outlineIndexStart(){return this._outlineIndexStart}get outlineIndexCount(){return this._outlineIndexCount}processFeatures(e){this._fillIndexStart=3*this._fillIndexBuffer.index,this._fillIndexCount=0,this._outlineIndexStart=3*this._outlineIndexBuffer.index,this._outlineIndexCount=0;var t=this.layer,r=this.zoom;e&&e.setExtent(this.layerExtent);var i=void 0===t.getPaintValue("fill-pattern",r)&&t.getPaintValue("fill-antialias",r);if(t.outlineUsesFillColor){if(i&&!t.hasDataDrivenOpacity){var n=t.getPaintValue("fill-opacity",r),a=t.getPaintValue("fill-opacity",r+1);n<1&&a<1&&(i=!1)}if(i&&!t.hasDataDrivenColor){var s=t.getPaintValue("fill-color",r),o=t.getPaintValue("fill-color",r+1);s[3]<1&&o[3]<1&&(i=!1)}}var{fillMaterial:l,outlineMaterial:u,hasDataDrivenFill:h,hasDataDrivenOutline:f}=t;for(var x of this._features){var c=h?l.encodeAttributes(x,r,t):null,d=i&&f?u.encodeAttributes(x,r,t):null,y=x.getGeometry(e),p=null==e?void 0:e.validateTessellation;this._processFeature(y,i,t.outlineUsesFillColor,c,d,p)}}serialize(){var e=10;e+=this.layerUIDs.length,e+=this._fillVertexBuffer.array.length,e+=this._fillIndexBuffer.array.length,e+=this._outlineVertexBuffer.array.length,e+=this._outlineIndexBuffer.array.length;var t=new Uint32Array(e),r=new Int32Array(t.buffer),i=0;t[i++]=this.type,t[i++]=this.layerUIDs.length;for(var n=0;n<this.layerUIDs.length;n++)t[i++]=this.layerUIDs[n];t[i++]=this._fillIndexStart,t[i++]=this._fillIndexCount,t[i++]=this._outlineIndexStart,t[i++]=this._outlineIndexCount,t[i++]=this._fillVertexBuffer.array.length;for(var a=0;a<this._fillVertexBuffer.array.length;a++)r[i++]=this._fillVertexBuffer.array[a];t[i++]=this._fillIndexBuffer.array.length;for(var s=0;s<this._fillIndexBuffer.array.length;s++)t[i++]=this._fillIndexBuffer.array[s];t[i++]=this._outlineVertexBuffer.array.length;for(var o=0;o<this._outlineVertexBuffer.array.length;o++)r[i++]=this._outlineVertexBuffer.array[o];t[i++]=this._outlineIndexBuffer.array.length;for(var l=0;l<this._outlineIndexBuffer.array.length;l++)t[i++]=this._outlineIndexBuffer.array[l];return t.buffer}_processFeature(e,t,r,i,n,a){if(e){var s=e.length,o=!n||0===n.length;if(t&&(!r||o))for(var l=0;l<s;l++)this._processOutline(e[l],n);for(var u,h=0;h<s;h++){var f=z._area(e[h]);f>128?(void 0!==u&&this._processFill(e,u,i,a),u=[h]):f<-128&&void 0!==u&&u.push(h)}void 0!==u&&this._processFill(e,u,i,a)}}_processOutline(e,t){var r,i,n,a=this._outlineVertexBuffer,s=this._outlineIndexBuffer,o=s.index,l=new f.a(0,0),u=new f.a(0,0),h=new f.a(0,0),x=-1,c=-1,d=-1,y=-1,p=-1,_=!1,v=e.length;if(!(v<2)){for(var g=e[0],m=e[v-1];v&&m.isEqual(g);)m=e[--v-1];if(!(v-0<2)){for(var V=0;V<v;++V){0===V?(r=e[v-1],i=e[0],n=e[1],l.assignSub(i,r),l.normalize(),l.rightPerpendicular()):(r=i,i=n,n=V!==v-1?e[V+1]:e[0],l.assign(u));var I=this._isClipEdge(r,i);-1===y&&(_=I),u.assignSub(n,i),u.normalize(),u.rightPerpendicular();var b=l.x*u.y-l.y*u.x;h.assignAdd(l,u),h.normalize();var B=-h.x*-l.x+-h.y*-l.y,w=Math.abs(0!==B?1/B:1);w>8&&(w=8),b>=0?(d=a.add(i.x,i.y,l.x,l.y,0,1,t),-1===y&&(y=d),x>=0&&c>=0&&d>=0&&!I&&s.add(x,c,d),c=a.add(i.x,i.y,w*-h.x,w*-h.y,0,-1,t),-1===p&&(p=c),x>=0&&c>=0&&d>=0&&!I&&s.add(x,c,d),x=c,c=d,d=a.add(i.x,i.y,h.x,h.y,0,1,t),x>=0&&c>=0&&d>=0&&!I&&s.add(x,c,d),c=a.add(i.x,i.y,u.x,u.y,0,1,t),x>=0&&c>=0&&d>=0&&!I&&s.add(x,c,d)):(d=a.add(i.x,i.y,w*h.x,w*h.y,0,1,t),-1===y&&(y=d),x>=0&&c>=0&&d>=0&&!I&&s.add(x,c,d),c=a.add(i.x,i.y,-l.x,-l.y,0,-1,t),-1===p&&(p=c),x>=0&&c>=0&&d>=0&&!I&&s.add(x,c,d),x=c,c=d,d=a.add(i.x,i.y,-h.x,-h.y,0,-1,t),x>=0&&c>=0&&d>=0&&!I&&s.add(x,c,d),(x=a.add(i.x,i.y,-u.x,-u.y,0,-1,t))>=0&&c>=0&&d>=0&&!I&&s.add(x,c,d))}x>=0&&c>=0&&y>=0&&!_&&s.add(x,c,y),x>=0&&y>=0&&p>=0&&!_&&s.add(x,p,y),this._outlineIndexCount+=3*(s.index-o)}}}_processFill(e,t,r,i){var n;t.length>1&&(n=[]);var a=0;for(var s of t)0!==a&&n.push(a),a+=e[s].length;var o=2*a,l=D.a.acquire();for(var u of t)for(var h=e[u],f=h.length,x=0;x<f;++x)l.push(h[x].x,h[x].y);var c=Object(O.b)(l,n,2);if(i&&Object(O.a)(l,n,2,c)>0){var d=[],y=[];if(function(e,t,r,i){for(var n of(R.beginPolygon(e,t),i)){var a=r[n];if(!(a.length<3)){R.beginContour();for(var s=0;s<a.length;++s){var o=[a[s].x,a[s].y,0];R.addVertex(o,o)}R.endContour()}}R.endPolygon()}(d,y,e,t),y.length>0){for(var p=this._fillVertexBuffer.index,_=0;_<d.length;)this._fillVertexBuffer.add(d[_++],d[_++],r);for(var v=0;v<y.length;)this._fillIndexBuffer.add(p+y[v+0],p+y[v+1],p+y[v+2]),v+=3;this._fillIndexCount+=y.length}}else{var g=c.length;if(g>0){for(var m=this._fillVertexBuffer.index,V=0;V<o;)this._fillVertexBuffer.add(l[V++],l[V++],r);for(var I=0;I<g;)this._fillIndexBuffer.add(m+c[I++],m+c[I++],m+c[I++]);this._fillIndexCount+=g}}D.a.release(l)}_isClipEdge(e,t){return e.x===t.x?e.x<=-64||e.x>=4160:e.y===t.y&&(e.y<=-64||e.y>=4160)}static _area(e){for(var t=0,r=e.length-1,i=0;i<r;i++)t+=(e[i].x-e[i+1].x)*(e[i].y+e[i+1].y);return.5*(t+=(e[r].x-e[0].x)*(e[r].y+e[0].y))}}var j=z,Z=r(232),G=r(539),q=1/3.8;var K=e=>t=>{t.entry0=e._lineVertexBuffer.index,e._lineVertexBuffer.add(t.currentVertex.x,t.currentVertex.y,t.prevNormal.x,t.prevNormal.y,0,-1,t.distance,e._ddValues),t.entry2=e._lineVertexBuffer.index,e._lineVertexBuffer.add(t.currentVertex.x,t.currentVertex.y,-t.prevNormal.x,-t.prevNormal.y,0,1,t.distance,e._ddValues),t.exit0=e._lineVertexBuffer.index,e._lineVertexBuffer.add(t.currentVertex.x,t.currentVertex.y,t.nextNormal.x,t.nextNormal.y,0,-1,t.distance,e._ddValues),t.exit2=e._lineVertexBuffer.index,e._lineVertexBuffer.add(t.currentVertex.x,t.currentVertex.y,-t.nextNormal.x,-t.nextNormal.y,0,1,t.distance,e._ddValues)},Y=e=>t=>{e._lineIndexBuffer.add(t.leftExit0,t.rightEntry0,t.leftExit2),e._lineIndexBuffer.add(t.rightEntry0,t.rightEntry2,t.leftExit2)},H=e=>t=>{var r,i=2===e._joinType?e._miterLimitCosine:e._roundLimitCosine,n=t.isCap&&0!==e._capType,a=!1;if(t.cosine>.97?(t.exit0=t.entry0=e._lineVertexBuffer.index,e._lineVertexBuffer.add(t.currentVertex.x,t.currentVertex.y,t.bisector.x/t.cosine,t.bisector.y/t.cosine,0,-1,t.distance,e._ddValues),t.exit2=t.entry2=e._lineVertexBuffer.index,e._lineVertexBuffer.add(t.currentVertex.x,t.currentVertex.y,-t.bisector.x/t.cosine,-t.bisector.y/t.cosine,0,1,t.distance,e._ddValues)):t.cosine<1-.97?(t.entry0=e._lineVertexBuffer.index,e._lineVertexBuffer.add(t.currentVertex.x,t.currentVertex.y,t.prevNormal.x,t.prevNormal.y,0,-1,t.distance,e._ddValues),t.entry2=e._lineVertexBuffer.index,e._lineVertexBuffer.add(t.currentVertex.x,t.currentVertex.y,-t.prevNormal.x,-t.prevNormal.y,0,1,t.distance,e._ddValues),t.exit0=e._lineVertexBuffer.index,e._lineVertexBuffer.add(t.currentVertex.x,t.currentVertex.y,t.nextNormal.x,t.nextNormal.y,0,-1,t.distance,e._ddValues),t.exit2=e._lineVertexBuffer.index,e._lineVertexBuffer.add(t.currentVertex.x,t.currentVertex.y,-t.nextNormal.x,-t.nextNormal.y,0,1,t.distance,e._ddValues)):t.canSplit?(Object(G.c)(),t.sign>0?(t.splitInner?(t.exit0=e._lineVertexBuffer.index,e._lineVertexBuffer.add(t.currentVertex.x,t.currentVertex.y,t.leftInner.x,t.leftInner.y,0,-1,t.distance,e._ddValues),t.entry0=e._lineVertexBuffer.index,e._lineVertexBuffer.add(t.currentVertex.x,t.currentVertex.y,t.rightInner.x,t.rightInner.y,0,-1,t.distance,e._ddValues)):(t.exit0=t.entry0=e._lineVertexBuffer.index,e._lineVertexBuffer.add(t.currentVertex.x,t.currentVertex.y,t.bisector.x/t.cosine,t.bisector.y/t.cosine,0,-1,t.distance,e._ddValues)),t.cosine<i?(a=!t.isCap,t.entry2=e._lineVertexBuffer.index,e._lineVertexBuffer.add(t.currentVertex.x,t.currentVertex.y,-t.prevNormal.x,-t.prevNormal.y,0,1,t.distance,e._ddValues),t.exit2=e._lineVertexBuffer.index,e._lineVertexBuffer.add(t.currentVertex.x,t.currentVertex.y,-t.nextNormal.x,-t.nextNormal.y,0,1,t.distance,e._ddValues)):t.splitOuter?(a=a||t.gapOuter,t.entry2=e._lineVertexBuffer.index,e._lineVertexBuffer.add(t.currentVertex.x,t.currentVertex.y,-t.leftOuter.x,-t.leftOuter.y,0,1,t.distance,e._ddValues),t.exit2=e._lineVertexBuffer.index,e._lineVertexBuffer.add(t.currentVertex.x,t.currentVertex.y,-t.rightOuter.x,-t.rightOuter.y,0,1,t.distance,e._ddValues)):(t.entry2=t.exit2=e._lineVertexBuffer.index,e._lineVertexBuffer.add(t.currentVertex.x,t.currentVertex.y,-t.bisector.x/t.cosine,-t.bisector.y/t.cosine,0,1,t.distance,e._ddValues))):(t.splitInner?(t.exit2=e._lineVertexBuffer.index,e._lineVertexBuffer.add(t.currentVertex.x,t.currentVertex.y,-t.leftInner.x,-t.leftInner.y,0,1,t.distance,e._ddValues),t.entry2=e._lineVertexBuffer.index,e._lineVertexBuffer.add(t.currentVertex.x,t.currentVertex.y,-t.rightInner.x,-t.rightInner.y,0,1,t.distance,e._ddValues)):(t.exit2=t.entry2=e._lineVertexBuffer.index,e._lineVertexBuffer.add(t.currentVertex.x,t.currentVertex.y,-t.bisector.x/t.cosine,-t.bisector.y/t.cosine,0,1,t.distance,e._ddValues)),t.cosine<i?(a=!t.isCap,t.entry0=e._lineVertexBuffer.index,e._lineVertexBuffer.add(t.currentVertex.x,t.currentVertex.y,t.prevNormal.x,t.prevNormal.y,0,-1,t.distance,e._ddValues),t.exit0=e._lineVertexBuffer.index,e._lineVertexBuffer.add(t.currentVertex.x,t.currentVertex.y,t.nextNormal.x,t.nextNormal.y,0,-1,t.distance,e._ddValues)):t.splitOuter?(a=a||t.gapOuter,t.entry0=e._lineVertexBuffer.index,e._lineVertexBuffer.add(t.currentVertex.x,t.currentVertex.y,t.leftOuter.x,t.leftOuter.y,0,-1,t.distance,e._ddValues),t.exit0=e._lineVertexBuffer.index,e._lineVertexBuffer.add(t.currentVertex.x,t.currentVertex.y,t.rightOuter.x,t.rightOuter.y,0,-1,t.distance,e._ddValues)):(t.exit0=t.entry0=e._lineVertexBuffer.index,e._lineVertexBuffer.add(t.currentVertex.x,t.currentVertex.y,t.bisector.x/t.cosine,t.bisector.y/t.cosine,0,-1,t.distance,e._ddValues)))):t.sign>0?(t.exit0=t.entry0=e._lineVertexBuffer.index,e._lineVertexBuffer.add(t.currentVertex.x,t.currentVertex.y,t.bisector.x/t.cosine,t.bisector.y/t.cosine,0,-1,t.distance,e._ddValues),t.cosine<i?(a=!t.isCap,t.entry2=e._lineVertexBuffer.index,e._lineVertexBuffer.add(t.currentVertex.x,t.currentVertex.y,-t.prevNormal.x,-t.prevNormal.y,0,1,t.distance,e._ddValues),t.exit2=e._lineVertexBuffer.index,e._lineVertexBuffer.add(t.currentVertex.x,t.currentVertex.y,-t.nextNormal.x,-t.nextNormal.y,0,1,t.distance,e._ddValues)):(t.entry2=t.exit2=e._lineVertexBuffer.index,e._lineVertexBuffer.add(t.currentVertex.x,t.currentVertex.y,-t.bisector.x/t.cosine,-t.bisector.y/t.cosine,0,1,t.distance,e._ddValues))):(t.exit2=t.entry2=e._lineVertexBuffer.index,e._lineVertexBuffer.add(t.currentVertex.x,t.currentVertex.y,-t.bisector.x/t.cosine,-t.bisector.y/t.cosine,0,1,t.distance,e._ddValues),t.cosine<i?(a=!t.isCap,t.entry0=e._lineVertexBuffer.index,e._lineVertexBuffer.add(t.currentVertex.x,t.currentVertex.y,t.prevNormal.x,t.prevNormal.y,0,-1,t.distance,e._ddValues),t.exit0=e._lineVertexBuffer.index,e._lineVertexBuffer.add(t.currentVertex.x,t.currentVertex.y,t.nextNormal.x,t.nextNormal.y,0,-1,t.distance,e._ddValues)):(t.exit0=t.entry0=e._lineVertexBuffer.index,e._lineVertexBuffer.add(t.currentVertex.x,t.currentVertex.y,t.bisector.x/t.cosine,t.bisector.y/t.cosine,0,-1,t.distance,e._ddValues))),t.canSplit&&(t.splitInner||t.splitOuter)||a||n?(r=t.entry1=t.exit1=e._lineVertexBuffer.index,e._lineVertexBuffer.add(t.currentVertex.x,t.currentVertex.y,0,0,0,0,t.distance,e._ddValues)):r=t.entry1=t.exit1=null,a&&1!==e._joinType)e._lineIndexBuffer.add(r,t.sign>0?t.exit2:t.entry0,t.sign>0?t.entry2:t.exit0);else if(n&&1===e._capType||a&&1===e._joinType){var s,o,l,u,h,f;if(t.isCap){var x=Math.PI;f=x/(h=Math.ceil(x/.8)),t.isFirstVertex?(s=t.prevNormal.x,o=t.prevNormal.y,l=t.entry0,u=t.entry2):t.isLastVertex&&(s=-t.nextNormal.x,o=-t.nextNormal.y,l=t.exit2,u=t.exit0)}else{var c=2*Math.acos(t.cosine);f=c/(h=Math.ceil(c/.8)),s=t.sign>0?-t.prevNormal.x:t.nextNormal.x,o=t.sign>0?-t.prevNormal.y:t.nextNormal.y,l=t.sign>0?t.entry2:t.exit0,u=t.sign>0?t.exit2:t.entry0}var d,y,p=Math.cos(f),_=Math.sin(f),v=_*s+p*o;s=p*s-_*o,o=v;for(var g=0;g<h;++g){if(d=y,g<h-1)if(t.isCap){var m=t.isFirstVertex?-1:1;y=e._lineVertexBuffer.index,e._lineVertexBuffer.add(t.currentVertex.x,t.currentVertex.y,s,o,m,0,t.distance,e._ddValues)}else y=e._lineVertexBuffer.index,e._lineVertexBuffer.add(t.currentVertex.x,t.currentVertex.y,s,o,0,t.sign,t.distance,e._ddValues);e._lineIndexBuffer.add(0===g?l:d,r,g===h-1?u:y);var V=_*s+p*o;s=p*s-_*o,o=V}}else if(n&&2===e._capType){var I,b,B=t.isFirstVertex?1:-1;e._hasPattern?(I=e._lineVertexBuffer.index,e._lineVertexBuffer.add(t.currentVertex.x,t.currentVertex.y,t.prevNormal.x-B*t.inbound.x,t.prevNormal.y-B*t.inbound.y,-B,-1,t.distance,e._ddValues),b=e._lineVertexBuffer.index,e._lineVertexBuffer.add(t.currentVertex.x,t.currentVertex.y,-t.prevNormal.x-B*t.inbound.x,-t.prevNormal.y-B*t.inbound.y,-B,1,t.distance,e._ddValues)):(I=e._lineVertexBuffer.index,e._lineVertexBuffer.add(t.currentVertex.x,t.currentVertex.y,t.prevNormal.x-B*t.inbound.x,t.prevNormal.y-B*t.inbound.y,0,-1,t.distance,e._ddValues),b=e._lineVertexBuffer.index,e._lineVertexBuffer.add(t.currentVertex.x,t.currentVertex.y,-t.prevNormal.x-B*t.inbound.x,-t.prevNormal.y-B*t.inbound.y,0,1,t.distance,e._ddValues)),B>0?(e._lineIndexBuffer.add(r,t.entry2,b),e._lineIndexBuffer.add(r,b,I),e._lineIndexBuffer.add(r,I,t.entry0)):(e._lineIndexBuffer.add(r,b,t.exit2),e._lineIndexBuffer.add(r,I,b),e._lineIndexBuffer.add(r,t.exit0,I))}},W=e=>t=>{e._lineIndexBuffer.add(t.leftExit0,t.rightEntry0,null!=t.leftExit1?t.leftExit1:t.leftExit2),e._lineIndexBuffer.add(t.rightEntry0,null!=t.rightEntry1?t.rightEntry1:t.rightEntry2,null!=t.leftExit1?t.leftExit1:t.leftExit2),null!=t.leftExit1&&null!=t.rightEntry1?(e._lineIndexBuffer.add(t.leftExit1,t.rightEntry1,t.leftExit2),e._lineIndexBuffer.add(t.rightEntry1,t.rightEntry2,t.leftExit2)):null!=t.leftExit1?e._lineIndexBuffer.add(t.leftExit1,t.rightEntry2,t.leftExit2):null!=t.rightEntry1&&e._lineIndexBuffer.add(t.rightEntry1,t.rightEntry2,t.leftExit2)},J=class extends F{constructor(e,t,r,i){super(e,t),this.type=2,this._tessellationOptions={},this.tessellationProperties={_lineVertexBuffer:null,_lineIndexBuffer:null,_hasPattern:null,_ddValues:null,_capType:null,_joinType:null,_miterLimitCosine:null,_roundLimitCosine:null},this.tessellationProperties._lineVertexBuffer=r,this.tessellationProperties._lineIndexBuffer=i,this.tessellationProperties._hasPattern=e.getPaintValue("line-pattern",this.zoom)||e.getPaintValue("line-dasharray",this.zoom).length>0,this._isThinLine=e.isThinLine,this._isThinLine?this._tessellationCallbacks={vertex:K(this.tessellationProperties),bridge:Y(this.tessellationProperties)}:this._tessellationCallbacks={vertex:H(this.tessellationProperties),bridge:W(this.tessellationProperties)}}get lineIndexStart(){return this._lineIndexStart}get lineIndexCount(){return this._lineIndexCount}processFeatures(e){this._lineIndexStart=3*this.tessellationProperties._lineIndexBuffer.index,this._lineIndexCount=0;var t=this.layer,r=this.zoom;for(var i of(e&&e.setExtent(this.layerExtent),this._features)){var n=t.hasDataDrivenLine?t.lineMaterial.encodeAttributes(i,r,t):null;this.tessellationProperties._capType=t.getLayoutValue("line-cap",r,i),this.tessellationProperties._joinType=t.getLayoutValue("line-join",r,i),this.tessellationProperties._miterLimitCosine=Object(Z.b)(t.getLayoutValue("line-miter-limit",r,i)),this.tessellationProperties._roundLimitCosine=Object(Z.b)(t.getLayoutValue("line-round-limit",r,i));var a=i.getGeometry(e);this._processFeature(a,n)}Object(G.b)()}serialize(){var e=6;e+=this.layerUIDs.length,e+=this.tessellationProperties._lineVertexBuffer.array.length,e+=this.tessellationProperties._lineIndexBuffer.array.length;var t=new Uint32Array(e),r=new Int32Array(t.buffer),i=0;t[i++]=this.type,t[i++]=this.layerUIDs.length;for(var n=0;n<this.layerUIDs.length;n++)t[i++]=this.layerUIDs[n];t[i++]=this._lineIndexStart,t[i++]=this._lineIndexCount,t[i++]=this.tessellationProperties._lineVertexBuffer.array.length;for(var a=0;a<this.tessellationProperties._lineVertexBuffer.array.length;a++)r[i++]=this.tessellationProperties._lineVertexBuffer.array[a];t[i++]=this.tessellationProperties._lineIndexBuffer.array.length;for(var s=0;s<this.tessellationProperties._lineIndexBuffer.array.length;s++)t[i++]=this.tessellationProperties._lineIndexBuffer.array[s];return t.buffer}_processFeature(e,t){if(e)for(var r=e.length,i=0;i<r;i++)this._processGeometry(e[i],t)}_processGeometry(e,t){if(!(e.length<2)){for(var r,i,n=e[0],a=1;a<e.length;)(r=e[a].x-n.x)*r+(i=e[a].y-n.y)*i<1e-6?e.splice(a,1):(n=e[a],++a);if(!(e.length<2)){var s=3*this.tessellationProperties._lineIndexBuffer.index;this._tessellationOptions.trackDistance=this.tessellationProperties._hasPattern,this._tessellationOptions.initialDistance=0,this._tessellationOptions.thin=this._isThinLine,this._tessellationOptions.wrapDistance=65535,this._tessellationOptions.outerBisectorAutoSplitThreshold=q,this._tessellationOptions.enableOuterBisectorSplit=this.tessellationProperties._hasPattern,this._tessellationOptions.innerBisectorAutoSplitThreshold=q,this._tessellationOptions.enableInnerBisectorSplit=this.tessellationProperties._hasPattern,this.tessellationProperties._ddValues=t,Object(G.d)(e,this._tessellationOptions,this._tessellationCallbacks),this._lineIndexCount+=3*this.tessellationProperties._lineIndexBuffer.index-s}}}},X=r(143),$=r(524),Q=r(796);function ee(e,t){return e.iconMosaicItem&&t.iconMosaicItem?e.iconMosaicItem.page===t.iconMosaicItem.page?0:e.iconMosaicItem.page-t.iconMosaicItem.page:e.iconMosaicItem&&!t.iconMosaicItem?1:!e.iconMosaicItem&&t.iconMosaicItem?-1:0}class te extends F{constructor(e,t,r,i,n,a,s,o){super(e,t),this.type=3,this._markerMap=new Map,this._glyphMap=new Map,this._glyphBufferDataStorage=new Map,this._isIconSDF=!1,this._iconVertexBuffer=r,this._iconIndexBuffer=i,this._textVertexBuffer=n,this._textIndexBuffer=a,this._placementEngine=s,this._workerTileHandler=o}get markerPageMap(){return this._markerMap}get glyphsPageMap(){return this._glyphMap}get symbolInstances(){return this._symbolInstances}getResources(e,t,r){var i=this.layer,n=this.zoom;e&&e.setExtent(this.layerExtent);var a,s,o,l,u=i.getLayoutProperty("icon-image"),h=i.getLayoutProperty("text-field"),f=i.getLayoutProperty("text-transform"),x=i.getLayoutProperty("text-font"),c=[];for(var d of(u&&!u.isDataDriven&&(a=u.getValue(n)),h&&!h.isDataDriven&&(s=h.getValue(n)),f&&f.isDataDriven||(o=i.getLayoutValue("text-transform",n),f=null),x&&x.isDataDriven||(l=i.getLayoutValue("text-font",n),x=null),this._features)){var y=d.getGeometry(e);if(y&&0!==y.length){var p=void 0,_=void 0;u&&((p=u.isDataDriven?u.getValue(n,d):this._replaceKeys(a,d.values))&&t.add(p));var v=!1;if(h&&(_=h.isDataDriven?h.getValue(n,d):this._replaceKeys(s,d.values))){switch(_=_.replace(/\\n/g,"\n"),f&&(o=f.getValue(n,d)),o){case 2:_=_.toLowerCase();break;case 1:_=_.toUpperCase()}if(te._bidiEngine.hasBidiChar(_)){var g;g="rtl"===te._bidiEngine.checkContextual(_)?"IDNNN":"ICNNN",_=te._bidiEngine.bidiTransform(_,g,"VLYSN"),v=!0}var m=_.length;if(m>0)for(var V of(x&&(l=x.getValue(n,d)),l)){var I=r[V];I||(I=r[V]=new Set);for(var b=0;b<m;b++){var B=_.charCodeAt(b);I.add(B)}}}if(p||_){var w=i.getLayoutValue("symbol-sort-key",n,d),T={feature:d,sprite:p,label:_,rtl:v,geometry:y,hash:(_?Object(X.b)(_):0)^(p?Object(X.b)(p):0),priority:w,textFont:l};c.push(T)}}}this._symbolFeatures=c}processFeatures(e){e&&e.setExtent(this.layerExtent);var t,r=this.layer,i=this.zoom,n=r.getLayoutValue("symbol-placement",i),a=0!==n,s=8*r.getLayoutValue("symbol-spacing",i),o=r.getLayoutProperty("icon-image"),l=r.getLayoutProperty("text-field"),h=o?new Q.d(r,i,a):null,f=l?new Q.g(r,i,a):null,x=this._workerTileHandler;o&&(t=x.getSpriteItems()),this._iconIndexStart=3*this._iconIndexBuffer.index,this._textIndexStart=3*this._textIndexBuffer.index,this._iconIndexCount=0,this._textIndexCount=0,this._markerMap.clear(),this._glyphMap.clear();var c=[],d=1;f&&f.size&&(d=f.size/p);var y=f?f.maxAngle*u.b:0,v=f?8*f.size:0;for(var m of this._symbolFeatures){var V=void 0;h&&t&&m.sprite&&((V=t[m.sprite])&&V.sdf&&(this._isIconSDF=!0));var I=void 0;V&&h.update(i,m.feature);var b=0,B=m.label;if(B){f.update(i,m.feature);var w=a?f.keepUpright:f.writingMode&&f.writingMode.indexOf(1)>=0,T=.5;switch(f.anchor){case 5:case 1:case 7:T=0;break;case 6:case 2:case 8:T=1}var L=.5;switch(f.anchor){case 5:case 3:case 6:L=0;break;case 7:case 4:case 8:L=1}var A=.5;switch(f.justify){case 0:A=T;break;case 1:A=0;break;case 3:A=1}var M=f.letterSpacing*p,k=a?0:f.maxWidth*p,P=f.lineHeight*p,S=m.textFont.map((e=>x.getGlyphItems(e)));if((I=new _(S,k,P,M,T,L,A).getShaping(B,m.rtl,w))&&I.length>0){var N=1e30,C=-1e30;for(var U of I)N=Math.min(N,U.x),C=Math.max(C,U.x);b=(C-N+48)*d*8}}for(var F of m.geometry){var E=[];if(1===n){if(I&&I.length>0&&f&&f.size){var D=8*f.size*(2+Math.min(2,4*Math.abs(f.offset[1])));F=te._smoothVertices(F,D)}te._pushAnchors(E,F,s,b)}else 2===n?te._pushCenterAnchor(E,F):3===m.feature.type?te._pushCentroid(E,F):E.push(new g(F[0].x,F[0].y));for(var O of E)if(!(O.x<0||O.x>4096||O.y<0||O.y>4096)&&(!(a&&b>0&&0===f.rotationAlignment)||te._honorsTextMaxAngle(F,O,b,y,v))){var R={shaping:I,line:F,iconMosaicItem:V,anchor:O,symbolFeature:m,textColliders:[],iconColliders:[],textVertexRanges:[],iconVertexRanges:[]};c.push(R),this._processFeature(R,h,f)}}}c.sort(ee),this._addPlacedGlyphs(),this._symbolInstances=c}serialize(){var e=11;e+=this.layerUIDs.length,e+=3*this.markerPageMap.size,e+=3*this.glyphsPageMap.size,e+=te.symbolsSerializationLength(this._symbolInstances),e+=this._iconVertexBuffer.array.length,e+=this._iconIndexBuffer.array.length,e+=this._textVertexBuffer.array.length,e+=this._textIndexBuffer.array.length;var t=new Uint32Array(e),r=new Int32Array(t.buffer),i=new Float32Array(t.buffer),n=0;t[n++]=this.type,t[n++]=this.layerUIDs.length;for(var a=0;a<this.layerUIDs.length;a++)t[n++]=this.layerUIDs[a];for(var[s,[o,l]]of(t[n++]=this._isIconSDF?1:0,t[n++]=this.markerPageMap.size,this.markerPageMap))t[n++]=s,t[n++]=o,t[n++]=l;for(var[u,[h,f]]of(t[n++]=this.glyphsPageMap.size,this.glyphsPageMap))t[n++]=u,t[n++]=h,t[n++]=f;t[n++]=this._iconVertexBuffer.index/4,t[n++]=this._textVertexBuffer.index/4,n=te.serializeSymbols(t,r,i,n,this._symbolInstances),t[n++]=this._iconVertexBuffer.array.length;for(var x=0;x<this._iconVertexBuffer.array.length;x++)r[n++]=this._iconVertexBuffer.array[x];t[n++]=this._iconIndexBuffer.array.length;for(var c=0;c<this._iconIndexBuffer.array.length;c++)t[n++]=this._iconIndexBuffer.array[c];t[n++]=this._textVertexBuffer.array.length;for(var d=0;d<this._textVertexBuffer.array.length;d++)r[n++]=this._textVertexBuffer.array[d];t[n++]=this._textIndexBuffer.array.length;for(var y=0;y<this._textIndexBuffer.array.length;y++)t[n++]=this._textIndexBuffer.array[y];return t.buffer}static symbolsSerializationLength(e){var t=0;for(var r of(t+=1,e||[])){for(var i of(t+=4,t+=1,r.textColliders))t+=10;for(var n of r.iconColliders)t+=10;t+=1,t+=2*r.textVertexRanges.length,t+=1,t+=2*r.iconVertexRanges.length}return t}static serializeSymbols(e,t,r,i,n){for(var a of(n=n||[],t[i++]=n.length,n)){for(var s of(t[i++]=a.anchor.x,t[i++]=a.anchor.y,t[i++]=a.symbolFeature.hash,t[i++]=a.symbolFeature.priority,t[i++]=a.textColliders.length+a.iconColliders.length,a.textColliders))t[i++]=s.xTile,t[i++]=s.yTile,t[i++]=s.dxPixels,t[i++]=s.dyPixels,t[i++]=s.hard?1:0,t[i++]=s.partIndex,r[i++]=s.minLod,r[i++]=s.maxLod,t[i++]=s.width,t[i++]=s.height;for(var o of a.iconColliders)t[i++]=o.xTile,t[i++]=o.yTile,t[i++]=o.dxPixels,t[i++]=o.dyPixels,t[i++]=o.hard?1:0,t[i++]=o.partIndex,r[i++]=o.minLod,r[i++]=o.maxLod,t[i++]=o.width,t[i++]=o.height;for(var[l,u]of(t[i++]=a.textVertexRanges.length,a.textVertexRanges))t[i++]=l,t[i++]=u;for(var[h,f]of(t[i++]=a.iconVertexRanges.length,a.iconVertexRanges))t[i++]=h,t[i++]=f}return i}_replaceKeys(e,t){return e.replace(/{([^{}]+)}/g,(function(e,r){return r in t?t[r]:""}))}_processFeature(e,t,r){var{line:i,iconMosaicItem:n,shaping:a,anchor:s}=e,o=this.zoom,l=this.layer,h=!!n,f=!0;h&&(f=t.optional||!n);var x,c,d=a&&a.length>0,y=!0;if(d&&(y=r.optional),h&&(x=this._placementEngine.getIconPlacement(s,n,t)),(x||f)&&(d&&(c=this._placementEngine.getTextPlacement(s,a,i,r)),c||y)){if(x&&c||(y||f?y||c?f||x||(c=null):x=null:(x=null,c=null)),c){var p=l.hasDataDrivenText?l.textMaterial.encodeAttributes(e.symbolFeature.feature,o,l):null;if(this._storePlacedGlyphs(e,c.shapes,o,r.rotationAlignment,p),c.textColliders)for(var _ of(e.textColliders=c.textColliders,c.textColliders)){_.minLod=Math.max(o+Object(u.f)(_.minLod),0),_.maxLod=Math.min(o+Object(u.f)(_.maxLod),25);var v=_.angle;if(v){var g=Math.cos(v),m=Math.sin(v),V=_.dxPixels*g-_.dyPixels*m,I=_.dxPixels*m+_.dyPixels*g,b=(_.dxPixels+_.width)*g-_.dyPixels*m,B=(_.dxPixels+_.width)*m+_.dyPixels*g,w=_.dxPixels*g-(_.dyPixels+_.height)*m,T=_.dxPixels*m+(_.dyPixels+_.height)*g,L=(_.dxPixels+_.width)*g-(_.dyPixels+_.height)*m,A=(_.dxPixels+_.width)*m+(_.dyPixels+_.height)*g,M=Math.min(V,b,w,L),k=Math.max(V,b,w,L),P=Math.min(I,B,T,A),S=Math.max(I,B,T,A);_.dxPixels=M,_.dyPixels=P,_.width=k-M,_.height=S-P}}}if(x){var N=l.hasDataDrivenIcon?l.iconMaterial.encodeAttributes(e.symbolFeature.feature,o,l):null;if(this._addPlacedIcons(e,x.shapes,o,n.page,1===t.rotationAlignment,N),x.iconColliders)for(var C of(e.iconColliders=x.iconColliders,x.iconColliders)){C.minLod=Math.max(o+Object(u.f)(C.minLod),0),C.maxLod=Math.min(o+Object(u.f)(C.maxLod),25);var U=C.angle;if(U){var F=Math.cos(U),E=Math.sin(U),D=C.dxPixels*F-C.dyPixels*E,O=C.dxPixels*E+C.dyPixels*F,R=(C.dxPixels+C.width)*F-C.dyPixels*E,z=(C.dxPixels+C.width)*E+C.dyPixels*F,j=C.dxPixels*F-(C.dyPixels+C.height)*E,Z=C.dxPixels*E+(C.dyPixels+C.height)*F,G=(C.dxPixels+C.width)*F-(C.dyPixels+C.height)*E,q=(C.dxPixels+C.width)*E+(C.dyPixels+C.height)*F,K=Math.min(D,R,j,G),Y=Math.max(D,R,j,G),H=Math.min(O,z,Z,q),W=Math.max(O,z,Z,q);C.dxPixels=K,C.dyPixels=H,C.width=Y-K,C.height=W-H}}}}}_addPlacedIcons(e,t,r,i,n,a){var s=Math.max(r-1,0),o=this._iconVertexBuffer,l=this._iconIndexBuffer,h=this._markerMap;for(var f of t){var x=n?0:Math.max(r+Object(u.f)(f.minzoom),s),c=n?25:Math.min(r+Object(u.f)(f.maxzoom),25);if(!(c<=x)){var d=f.tl,y=f.tr,p=f.bl,_=f.br,v=f.mosaicRect,g=f.labelAngle,m=f.minAngle,V=f.maxAngle,I=f.anchor,b=o.index,B=v.x,w=v.y,T=B+v.width,L=w+v.height,A=o.index;o.add(I.x,I.y,d.x,d.y,B,w,g,m,V,x,c,a),o.add(I.x,I.y,y.x,y.y,T,w,g,m,V,x,c,a),o.add(I.x,I.y,p.x,p.y,B,L,g,m,V,x,c,a),o.add(I.x,I.y,_.x,_.y,T,L,g,m,V,x,c,a),e.iconVertexRanges.length>0&&e.iconVertexRanges[0][0]+e.iconVertexRanges[0][1]===A?e.iconVertexRanges[0][1]+=4:e.iconVertexRanges.push([A,4]),l.add(b+0,b+1,b+2),l.add(b+1,b+2,b+3),h.has(i)?h.get(i)[1]+=6:h.set(i,[this._iconIndexStart+this._iconIndexCount,6]),this._iconIndexCount+=6}}}_addPlacedGlyphs(){var e=this._textVertexBuffer,t=this._textIndexBuffer,r=this._glyphMap;for(var[i,n]of this._glyphBufferDataStorage)for(var a of n){var s=e.index,o=a.symbolInstance,l=a.ddAttributes,u=e.index;e.add(a.glyphAnchor[0],a.glyphAnchor[1],a.tl[0],a.tl[1],a.xmin,a.ymin,a.labelAngle,a.minAngle,a.maxAngle,a.minLod,a.maxLod,l),e.add(a.glyphAnchor[0],a.glyphAnchor[1],a.tr[0],a.tr[1],a.xmax,a.ymin,a.labelAngle,a.minAngle,a.maxAngle,a.minLod,a.maxLod,l),e.add(a.glyphAnchor[0],a.glyphAnchor[1],a.bl[0],a.bl[1],a.xmin,a.ymax,a.labelAngle,a.minAngle,a.maxAngle,a.minLod,a.maxLod,l),e.add(a.glyphAnchor[0],a.glyphAnchor[1],a.br[0],a.br[1],a.xmax,a.ymax,a.labelAngle,a.minAngle,a.maxAngle,a.minLod,a.maxLod,l),o.textVertexRanges.length>0&&o.textVertexRanges[0][0]+o.textVertexRanges[0][1]===u?o.textVertexRanges[0][1]+=4:o.textVertexRanges.push([u,4]),t.add(s+0,s+1,s+2),t.add(s+1,s+2,s+3),r.has(i)?r.get(i)[1]+=6:r.set(i,[this._textIndexStart+this._textIndexCount,6]),this._textIndexCount+=6}this._glyphBufferDataStorage.clear()}_storePlacedGlyphs(e,t,r,i,n){var a,s,o,l,h,f,x,c,d,y,p,_=Math.max(r-1,0),v=1===i;for(var g of t)a=v?0:Math.max(r+Object(u.f)(g.minzoom),_),(s=v?25:Math.min(r+Object(u.f)(g.maxzoom),25))<=a||(o=g.tl,l=g.tr,h=g.bl,f=g.br,x=g.labelAngle,c=g.minAngle,d=g.maxAngle,y=g.anchor,p=g.mosaicRect,this._glyphBufferDataStorage.has(g.page)||this._glyphBufferDataStorage.set(g.page,[]),this._glyphBufferDataStorage.get(g.page).push({glyphAnchor:[y.x,y.y],tl:[o.x,o.y],tr:[l.x,l.y],bl:[h.x,h.y],br:[f.x,f.y],xmin:p.x,ymin:p.y,xmax:p.x+p.width,ymax:p.y+p.height,labelAngle:x,minAngle:c,maxAngle:d,minLod:a,maxLod:s,placementLod:_,symbolInstance:e,ddAttributes:n}))}static _pushAnchors(e,t,r,i){r+=i;for(var n=0,a=t.length-1,s=0;s<a;s++)n+=f.a.distance(t[s],t[s+1]);var o=i||r;if(!(n<=(o*=.5)))for(var l=o/n,h=0,x=-(r=n/Math.max(Math.round(n/r),1))/2,c=t.length-1,d=0;d<c;d++){for(var y=t[d],p=t[d+1],_=p.x-y.x,v=p.y-y.y,m=Math.sqrt(_*_+v*v),V=void 0;x+r<h+m;){var I=((x+=r)-h)/m,b=Object(u.e)(y.x,p.x,I),B=Object(u.e)(y.y,p.y,I);void 0===V&&(V=Math.atan2(v,_)),e.push(new g(b,B,V,d,l))}h+=m}}static _pushCenterAnchor(e,t){for(var r=0,i=t.length-1,n=0;n<i;n++)r+=f.a.distance(t[n],t[n+1]);for(var a=r/2,s=0,o=t.length-1,l=0;l<o;l++){var h=t[l],x=t[l+1],c=x.x-h.x,d=x.y-h.y,y=Math.sqrt(c*c+d*d);if(a<s+y){var p=(a-s)/y,_=Object(u.e)(h.x,x.x,p),v=Object(u.e)(h.y,x.y,p),m=Math.atan2(d,c);return void e.push(new g(_,v,m,l,0))}s+=y}}static _deviation(e,t,r){var i=(t.x-e.x)*(r.x-t.x)+(t.y-e.y)*(r.y-t.y),n=(t.x-e.x)*(r.y-t.y)-(t.y-e.y)*(r.x-t.x);return Math.atan2(n,i)}static _honorsTextMaxAngle(e,t,r,i,n){for(var a=0,s=r/2,o=new f.a(t.x,t.y),l=t.segment+1;a>-s;){if(--l<0)return!1;a-=f.a.distance(e[l],o),o=e[l]}a+=f.a.distance(e[l],e[l+1]);for(var u=[],h=0,x=e.length;a<s;){var c=e[l],d=void 0,y=l;do{if(++y===x)return!1;d=e[y]}while(d.isEqual(c));var p=void 0,_=y;do{if(++_===x)return!1;p=e[_]}while(p.isEqual(d));var v=this._deviation(c,d,p);for(u.push({deviation:v,distToAnchor:a}),h+=v;a-u[0].distToAnchor>n;)h-=u.shift().deviation;if(Math.abs(h)>i)return!1;a+=f.a.distance(d,p),l=y}return!0}static _smoothVertices(e,t){if(t<=0)return e;var r=e.length;if(r<3)return e;var i=[],n=0,a=0;i.push(0);for(var s=1;s<r;s++){var o=f.a.distance(e[s],e[s-1]);o>0&&(n+=o,i.push(n),++a!==s&&(e[a]=e[s]))}if((r=a+1)<3)return e;t=Math.min(t,.2*n);var l=e[0].x,u=e[0].y,h=e[r-1].x,x=e[r-1].y,c=f.a.sub(e[0],e[1]);c.normalize(),e[0].x+=t*c.x,e[0].y+=t*c.y,c.assignSub(e[r-1],e[r-2]),c.normalize(),e[r-1].x+=t*c.x,e[r-1].y+=t*c.y,i[0]-=t,i[r-1]+=t;var d=[];d.push(new f.a(l,u));for(var y=1e-6,p=.5*t,_=1;_<r-1;_++){for(var v=0,g=0,m=0,V=_-1;V>=0;V--){var I=p+i[V+1]-i[_];if(I<0)break;var b=i[V+1]-i[V],B=i[_]-i[V]<p?1:I/b;if(B<y)break;var w=B*B,T=B*I-.5*w*b,L=B*b/t,A=e[V+1],M=e[V].x-A.x,k=e[V].y-A.y;v+=L/T*(A.x*B*I+.5*w*(I*M-b*A.x)-w*B*b*M/3),g+=L/T*(A.y*B*I+.5*w*(I*k-b*A.y)-w*B*b*k/3),m+=L}for(var P=_+1;P<r;P++){var S=p-i[P-1]+i[_];if(S<0)break;var N=i[P]-i[P-1],C=i[P]-i[_]<p?1:S/N;if(C<y)break;var U=C*C,F=C*S-.5*U*N,E=C*N/t,D=e[P-1],O=e[P].x-D.x,R=e[P].y-D.y;v+=E/F*(D.x*C*S+.5*U*(S*O-N*D.x)-U*C*N*O/3),g+=E/F*(D.y*C*S+.5*U*(S*R-N*D.y)-U*C*N*R/3),m+=E}d.push(new f.a(v/m,g/m))}return d.push(new f.a(h,x)),e[0].x=l,e[0].y=u,e[r-1].x=h,e[r-1].y=x,d}static _pushCentroid(e,t){var r=4096,i=4096,n=t.length-1,a=0,s=0,o=0,l=t[0].x,u=t[0].y;l>r&&(l=r),l<0&&(l=0),u>i&&(u=i),u<0&&(u=0);for(var h=1;h<n;h++){var f=t[h].x,x=t[h].y,c=t[h+1].x,d=t[h+1].y;f>r&&(f=r),f<0&&(f=0),x>i&&(x=i),x<0&&(x=0),c>r&&(c=r),c<0&&(c=0),d>i&&(d=i),d<0&&(d=0);var y=(f-l)*(d-u)-(c-l)*(x-u);a+=y*(l+f+c),s+=y*(u+x+d),o+=y}a/=3*o,s/=3*o,isNaN(a)||isNaN(s)||e.push(new g(a,s))}}te._bidiEngine=new $.a;var re=te;var ie=class{constructor(e,t,r,i,n){if(this._pbfTiles={},this._tileClippers={},this._client=r,this._tile=t,n)for(var a of(this._styleLayerUIDs=new Set,n))this._styleLayerUIDs.add(a);this._styleRepository=i,this._layers=this._styleRepository.layers;var[s,o,l]=t.tileKey.split("/").map(parseFloat);this._level=s;var u=Math.max(8,Math.round(1*this._level)-8);for(var h of Object.keys(e)){var f=e[h];if(this._pbfTiles[h]=new B.a(new Uint8Array(f.protobuff),new DataView(f.protobuff)),f.refKey){var[x]=f.refKey.split("/").map(parseFloat),c=s-x;if(c>0){var d=(1<<c)-1,y=o&d,p=l&d;this._tileClippers[h]=new w.b(c,y,p,8,u)}}this._tileClippers[h]||(this._tileClippers[h]=new w.a)}}_canParseStyleLayer(e){return!this._styleLayerUIDs||this._styleLayerUIDs.has(e)}parse(e){var t=this;return Object(a.a)((function*(){var r=t._initialize(e),{returnedBuckets:n}=r;t._processLayers(r),t._linkReferences(r),t._filterFeatures(r);var a=new Set,s={};for(var o of n)3===o.type&&o.getResources(o.tileClipper,a,s);if(t._tile.status===i.INVALID)return Promise.resolve([]);var l=t._fetchResources(a,s,e);return Promise.all(l).then((()=>t._processFeatures(r.returnedBuckets)))}))()}_initialize(e){return{signal:e&&e.signal,sourceNameToTileData:this._parseTileData(this._pbfTiles),layers:this._layers,zoom:this._level,sourceNameToTileClipper:this._tileClippers,sourceNameToUniqueSourceLayerBuckets:{},sourceNameToUniqueSourceLayers:{},returnedBuckets:[],layerIdToBucket:{},referencerUIDToReferencedId:new Map}}_processLayers(e){for(var{sourceNameToTileData:t,layers:r,zoom:i,sourceNameToTileClipper:n,sourceNameToUniqueSourceLayerBuckets:a,sourceNameToUniqueSourceLayers:s,returnedBuckets:o,layerIdToBucket:l,referencerUIDToReferencedId:u}=e,h=r.length-1;h>=0;h--){var f=r[h];if(!(!this._canParseStyleLayer(f.uid)||f.minzoom&&i<Math.floor(f.minzoom)||f.maxzoom&&i>=f.maxzoom||0===f.type)&&(t[f.source]&&n[f.source])){var x=t[f.source],c=n[f.source],d=f.sourceLayer,y=x[d];if(y){var p=s[f.source];if(p||(p=s[f.source]=new Set),p.add(f.sourceLayer),f.refLayerId)u.set(f.uid,f.refLayerId);else{var _=this._createBucket(f);if(_){_.layerUIDs=[f.uid],_.layerExtent=y.extent,_.tileClipper=c;var v=a[f.source];v||(v=a[f.source]={});var g=v[d];g||(g=v[d]=[]),g.push(_),o.push(_),l[f.id.toLowerCase()]=_}}}}}}_linkReferences(e){var{layerIdToBucket:t,referencerUIDToReferencedId:r}=e;r.forEach(((e,r)=>{e=e.toLowerCase(),t[e]&&t[e].layerUIDs.push(r)}))}_filterFeatures(e){var{signal:t,sourceNameToTileData:r,sourceNameToUniqueSourceLayerBuckets:i,sourceNameToUniqueSourceLayers:n}=e,a=10*this._level,o=10*(this._level+1),l=[],u=[],h=function(e){n[e].forEach((t=>{l.push(t),u.push(e)}))};for(var f of Object.keys(n))h(f);for(var x=0;x<l.length;x++){var c=u[x],d=l[x];if(r[c]&&i[c]){var y=r[c][d],p=i[c][d];if(p&&0!==p.length){if(Object(s.n)(t))return;for(var _=y.getData();_.nextTag(2);){var v=_.getMessage(),g=new T(v,y);v.release();var m=g.values;if(m){var V=m._minzoom;if(V&&V>=o)continue;var I=m._maxzoom;if(I&&I<=a)continue}for(var b of p)b.pushFeature(g)}}}}}_fetchResources(e,t,r){var i,n,a=[],s=this._tile.getWorkerTileHandler();for(var o in e.size>0&&(i=s.fetchSprites(e,this._client,r),a.push(i)),t){var l=t[o];l.size>0&&(n=s.fetchGlyphs(this._tile.tileKey,o,l,this._client,r),a.push(n))}return a}_processFeatures(e){var t=e.filter((e=>e.hasFeatures()||this._canParseStyleLayer(e.layer.uid)));for(var r of t)r.processFeatures(r.tileClipper);return t}_parseTileData(e){var t={};for(var r of Object.keys(e)){for(var i=e[r],n={};i.next();)switch(i.tag()){case 3:var a=i.getMessage(),s=new k(a);a.release(),n[s.name]=s;break;default:i.skip()}t[r]=n}return t}_createBucket(e){switch(e.type){case 0:return null;case 1:return this._createFillBucket(e);case 2:return this._createLineBucket(e);case 4:return this._createCircleBucket(e);case 3:return this._createSymbolBucket(e)}}_createFillBucket(e){return new j(e,this._level,new S(e.fillMaterial.getStride()),new A,new N(e.outlineMaterial.getStride()),new A)}_createLineBucket(e){return new J(e,this._level,new P(e.lineMaterial.getStride()),new A)}_createCircleBucket(e){return new E(e,this._level,new U(e.circleMaterial.getStride()),new A)}_createSymbolBucket(e){var t=this._tile;return new re(e,this._level,new C(e.iconMaterial.getStride()),new A,new C(e.textMaterial.getStride()),new A,t.placementEngine,t.getWorkerTileHandler())}};var ne=class{constructor(e,t,r,n){this.status=i.INITIALIZED,this.placementEngine=new b,this.tileKey=e,this.refKeys=t,this._workerTileHandler=r,this._styleRepository=n}release(){this.tileKey="",this.refKeys=null,this.status=i.INITIALIZED,this._workerTileHandler=null}parse(e,t,r){var n=this;return Object(a.a)((function*(){var a,o=r&&r.signal;if(Object(l.k)(o)){var u=()=>{o.removeEventListener("abort",u),n.status=i.INVALID};o.addEventListener("abort",u)}try{a=yield n._parse(e,r)}catch(c){if(Object(s.m)(c))throw c;return{result:[],transferList:[]}}n.status=i.READY;var h=[];for(var f of a){var x=f.serialize();h.push(x)}return{result:h,transferList:h.length<=t&&h}}))()}setObsolete(){this.status=i.INVALID}getLayers(){return this._workerTileHandler.getLayers()}getWorkerTileHandler(){return this._workerTileHandler}_parse(e,t){var r=this;return Object(a.a)((function*(){var n=e.sourceName2DataAndRefKey;return 0===Object.keys(n).length?[]:(r.status=i.MODIFIED,new ie(n,r,t.client,r._styleRepository,e.styleLayerUIDs).parse(t))}))()}};t.default=class{constructor(){this._spriteInfo={},this._glyphInfo={}}reset(){return this._spriteInfo={},this._glyphInfo={},Promise.resolve()}getLayers(){var e;return null==(e=this._styleRepository)?void 0:e.layers}createTileAndParse(e,t){var r=this;return Object(a.a)((function*(){var{key:i}=e,n={};for(var a of Object.keys(e.sourceName2DataAndRefKey)){var o=e.sourceName2DataAndRefKey[a];n[a]=o.refKey}var l=new ne(i,n,r,r._styleRepository);try{return yield l.parse(e,r._vectorTileLayerMaxBuffers,t)}catch(u){if(l.setObsolete(),l.release(),!Object(s.m)(u))throw u;return null}}))()}updateStyle(e){if(e&&0!==e.length&&this._styleRepository){var t=this._styleRepository;for(var r of e){var i=r.type,n=r.data;switch(i){case 0:t.setPaintProperties(n.layerName,n.paint);break;case 1:t.setLayoutProperties(n.layerName,n.layout);break;case 3:t.deleteStyleLayer(n.layerName);break;case 2:t.setStyleLayer(n.layer,n.index)}}}}setStyle(e){this._styleRepository=new o.a(e.style),this._spriteInfo={},this._glyphInfo={},this._vectorTileLayerMaxBuffers=e.vectorTileLayerMaxBuffers}fetchSprites(e,t,r){var i=[],n=this._spriteInfo;return e.forEach((e=>{void 0===n[e]&&i.push(e)})),0===i.length?Promise.resolve():t.invoke("getSprites",i,{signal:r&&r.signal}).then((e=>{for(var t in e){var r=e[t];n[t]=r}}))}getSpriteItems(){return this._spriteInfo}fetchGlyphs(e,t,r,i,n){var a=[],s=this._glyphInfo[t];return s?r.forEach((e=>{s[e]||a.push(e)})):(s=this._glyphInfo[t]=[],r.forEach((e=>a.push(e)))),0===a.length?Promise.resolve():i.invoke("getGlyphs",{tileID:e,font:t,codePoints:a},n).then((e=>{for(var t=0;t<e.length;t++)e[t]&&(s[t]=e[t])}))}getGlyphItems(e){return this._glyphInfo[e]}}},133:function(e,t,r){"use strict";(function(e){r.d(t,"a",(function(){return a})),r.d(t,"b",(function(){return n})),r.d(t,"c",(function(){return i}));"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof e||"undefined"!=typeof self&&self;function i(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function n(e,t,r){return e(r={path:t,exports:{},require:function(e,t){return a(null==t&&r.path)}},r.exports),r.exports}function a(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}}).call(this,r(172))},362:function(e,t,r){"use strict";var i=r(80),n=r(221),a=4294967296,s=Object(i.a)("esri-text-decoder")?new TextDecoder("utf-8"):null,o=Object(i.a)("safari")||Object(i.a)("ios")?6:Object(i.a)("ff")?12:32;class l{constructor(e,t,r=0,i=(e?e.byteLength:0)){this._tag=0,this._dataType=99,this.init(e,t,r,i)}init(e,t,r,i){this._data=e,this._dataView=t,this._pos=r,this._end=i}clone(){return new l(this._data,this._dataView,this._pos,this._end)}pos(){return this._pos}move(e){this._pos=e}nextTag(e){for(;;){if(this._pos===this._end)return!1;var t=this._decodeVarint();if(this._tag=t>>3,this._dataType=7&t,!e||e===this._tag)break;this.skip()}return!0}next(){if(this._pos===this._end)return!1;var e=this._decodeVarint();return this._tag=e>>3,this._dataType=7&e,!0}empty(){return this._pos>=this._end}tag(){return this._tag}getInt32(){return this._decodeVarint()}getInt64(){return this._decodeVarint()}getUInt32(){var e=4294967295;return e=(127&this._data[this._pos])>>>0,this._data[this._pos++]<128?e:(e=(e|(127&this._data[this._pos])<<7)>>>0,this._data[this._pos++]<128?e:(e=(e|(127&this._data[this._pos])<<14)>>>0,this._data[this._pos++]<128?e:(e=(e|(127&this._data[this._pos])<<21)>>>0,this._data[this._pos++]<128?e:(e=(e|(15&this._data[this._pos])<<28)>>>0,this._data[this._pos++]<128?e:void 0))))}getUInt64(){return this._decodeVarint()}getSInt32(){var e=this.getUInt32();return e>>>1^-(1&e)|0}getSInt64(){return this._decodeSVarint()}getBool(){var e=0!==this._data[this._pos];return this._skip(1),e}getEnum(){return this._decodeVarint()}getFixed64(){var e=this._dataView,t=this._pos,r=e.getUint32(t,!0)+e.getUint32(t+4,!0)*a;return this._skip(8),r}getSFixed64(){var e=this._dataView,t=this._pos,r=e.getUint32(t,!0)+e.getInt32(t+4,!0)*a;return this._skip(8),r}getDouble(){var e=this._dataView.getFloat64(this._pos,!0);return this._skip(8),e}getFixed32(){var e=this._dataView.getUint32(this._pos,!0);return this._skip(4),e}getSFixed32(){var e=this._dataView.getInt32(this._pos,!0);return this._skip(4),e}getFloat(){var e=this._dataView.getFloat32(this._pos,!0);return this._skip(4),e}getString(){var e=this._getLength(),t=this._pos,r=this._toString(this._data,t,t+e);return this._skip(e),r}getBytes(){var e=this._getLength(),t=this._pos,r=this._toBytes(this._data,t,t+e);return this._skip(e),r}getLength(){return this._getLengthUnsafe()}processMessageWithArgs(e,t,r,i){var n=this.getMessage(),a=e(n,t,r,i);return n.release(),a}processMessage(e){var t=this.getMessage(),r=e(t);return t.release(),r}getMessage(){var e=this._getLength(),t=l.pool.acquire();return t.init(this._data,this._dataView,this._pos,this._pos+e),this._skip(e),t}release(){l.pool.release(this)}dataType(){return this._dataType}skip(){switch(this._dataType){case 0:this._decodeVarint();break;case 1:this._skip(8);break;case 2:this._skip(this._getLength());break;case 5:this._skip(4);break;default:throw new Error("Invalid data type!")}}skipLen(e){this._skip(e)}_skip(e){if(this._pos+e>this._end)throw new Error("Attempt to skip past the end of buffer!");this._pos+=e}_decodeVarint(){var e,t=this._data,r=this._pos,i=0;if(this._end-r>=10)do{if(i|=127&(e=t[r++]),0==(128&e))break;if(i|=(127&(e=t[r++]))<<7,0==(128&e))break;if(i|=(127&(e=t[r++]))<<14,0==(128&e))break;if(i|=(127&(e=t[r++]))<<21,0==(128&e))break;if(i+=268435456*(127&(e=t[r++])),0==(128&e))break;if(i+=34359738368*(127&(e=t[r++])),0==(128&e))break;if(i+=4398046511104*(127&(e=t[r++])),0==(128&e))break;if(i+=562949953421312*(127&(e=t[r++])),0==(128&e))break;if(i+=72057594037927940*(127&(e=t[r++])),0==(128&e))break;if(i+=0x8000000000000000*(127&(e=t[r++])),0==(128&e))break;throw new Error("Varint too long!")}while(0);else{for(var n=1;r!==this._end&&0!=(128&(e=t[r]));)++r,i+=(127&e)*n,n*=128;if(r===this._end)throw new Error("Varint overrun!");++r,i+=e*n}return this._pos=r,i}_decodeSVarint(){var e=this._decodeVarint();return e%2?-(e+1)/2:e/2}_getLength(){if(2!==this._dataType)throw new Error("Not a delimited data type!");return this._decodeVarint()}_getLengthUnsafe(){return this.getUInt32()}_toString(e,t,r){if((r=Math.min(this._end,r))-t>o&&s){var i=e.subarray(t,r);return s.decode(i)}for(var n="",a="",l=t;l<r;++l){var u=e[l];128&u?a+="%"+u.toString(16):(n+=decodeURIComponent(a)+String.fromCharCode(u),a="")}return a.length&&(n+=decodeURIComponent(a)),n}_toBytes(e,t,r){return r=Math.min(this._end,r),new Uint8Array(e.buffer,t,r-t)}}l.pool=new n.a(l,null,(e=>{e._data=null,e._dataView=null})),t.a=l},373:function(e,t,r){"use strict";function i(){return new Float32Array(4)}function n(e){var t=new Float32Array(4);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t}function a(e,t,r,i){var n=new Float32Array(4);return n[0]=e,n[1]=t,n[2]=r,n[3]=i,n}function s(){return i()}function o(){return a(1,1,1,1)}function l(){return a(1,0,0,0)}function u(){return a(0,1,0,0)}function h(){return a(0,0,1,0)}function f(){return a(0,0,0,1)}r.d(t,"a",(function(){return n})),r.d(t,"b",(function(){return i})),r.d(t,"c",(function(){return a}));var x=s(),c=o(),d=l(),y=u(),p=h(),_=f();Object.freeze({__proto__:null,create:i,clone:n,fromValues:a,createView:function(e,t){return new Float32Array(e,t,4)},zeros:s,ones:o,unitX:l,unitY:u,unitZ:h,unitW:f,ZEROS:x,ONES:c,UNIT_X:d,UNIT_Y:y,UNIT_Z:p,UNIT_W:_})},399:function(e,t,r){"use strict";r.d(t,"a",(function(){return h})),r.d(t,"b",(function(){return l})),r.d(t,"c",(function(){return u})),r.d(t,"d",(function(){return o}));Number.POSITIVE_INFINITY;var i=Math.PI,n=128/i,a=1/Math.LN2;function s(e,t){return(e%=t)>=0?e:e+t}function o(e){return s(e*n,256)}function l(e){return s(.7111111111111111*e,256)}function u(e){return Math.log(e)*a}function h(e,t,r){return e>=t&&e<=r||e>=r&&e<=t}},446:function(e,t,r){"use strict";t.a=class{constructor(e=0,t=0,r=0,i=0){this.x=e,this.y=t,this.width=r,this.height=i}get isEmpty(){return this.width<=0||this.height<=0}union(e){this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.width=Math.max(this.width,e.width),this.height=Math.max(this.height,e.height)}}},524:function(e,t,r){"use strict";var i=[["(",")"],[")","("],["<",">"],[">","<"],["[","]"],["]","["],["{","}"],["}","{"],["\xab","\xbb"],["\xbb","\xab"],["\u2039","\u203a"],["\u203a","\u2039"],["\u207d","\u207e"],["\u207e","\u207d"],["\u208d","\u208e"],["\u208e","\u208d"],["\u2264","\u2265"],["\u2265","\u2264"],["\u2329","\u232a"],["\u232a","\u2329"],["\ufe59","\ufe5a"],["\ufe5a","\ufe59"],["\ufe5b","\ufe5c"],["\ufe5c","\ufe5b"],["\ufe5d","\ufe5e"],["\ufe5e","\ufe5d"],["\ufe64","\ufe65"],["\ufe65","\ufe64"]],n=["\u0622","\u0623","\u0625","\u0627"],a=["\ufef5","\ufef7","\ufef9","\ufefb"],s=["\ufef6","\ufef8","\ufefa","\ufefc"],o=["\u0627","\u0628","\u062a","\u062b","\u062c","\u062d","\u062e","\u062f","\u0630","\u0631","\u0632","\u0633","\u0634","\u0635","\u0636","\u0637","\u0638","\u0639","\u063a","\u0641","\u0642","\u0643","\u0644","\u0645","\u0646","\u0647","\u0648","\u064a","\u0625","\u0623","\u0622","\u0629","\u0649","\u0644","\u0645","\u0646","\u0647","\u0648","\u064a","\u0625","\u0623","\u0622","\u0629","\u0649","\u06cc","\u0626","\u0624"],l=["\ufe8d","\ufe8f","\ufe95","\ufe99","\ufe9d","\ufea1","\ufea5","\ufea9","\ufeab","\ufead","\ufeaf","\ufeb1","\ufeb5","\ufeb9","\ufebd","\ufec1","\ufec5","\ufec9","\ufecd","\ufed1","\ufed5","\ufed9","\ufedd","\ufee1","\ufee5","\ufee9","\ufeed","\ufef1","\ufe87","\ufe83","\ufe81","\ufe93","\ufeef","\ufbfc","\ufe89","\ufe85","\ufe70","\ufe72","\ufe74","\ufe76","\ufe78","\ufe7a","\ufe7c","\ufe7e","\ufe80","\ufe89","\ufe85"],u=["\ufe8e","\ufe90","\ufe96","\ufe9a","\ufe9e","\ufea2","\ufea6","\ufeaa","\ufeac","\ufeae","\ufeb0","\ufeb2","\ufeb6","\ufeba","\ufebe","\ufec2","\ufec6","\ufeca","\ufece","\ufed2","\ufed6","\ufeda","\ufede","\ufee2","\ufee6","\ufeea","\ufeee","\ufef2","\ufe88","\ufe84","\ufe82","\ufe94","\ufef0","\ufbfd","\ufe8a","\ufe86","\ufe70","\ufe72","\ufe74","\ufe76","\ufe78","\ufe7a","\ufe7c","\ufe7e","\ufe80","\ufe8a","\ufe86"],h=["\ufe8e","\ufe92","\ufe98","\ufe9c","\ufea0","\ufea4","\ufea8","\ufeaa","\ufeac","\ufeae","\ufeb0","\ufeb4","\ufeb8","\ufebc","\ufec0","\ufec4","\ufec8","\ufecc","\ufed0","\ufed4","\ufed8","\ufedc","\ufee0","\ufee4","\ufee8","\ufeec","\ufeee","\ufef4","\ufe88","\ufe84","\ufe82","\ufe94","\ufef0","\ufbff","\ufe8c","\ufe86","\ufe71","\ufe72","\ufe74","\ufe77","\ufe79","\ufe7b","\ufe7d","\ufe7f","\ufe80","\ufe8c","\ufe86"],f=["\ufe8d","\ufe91","\ufe97","\ufe9b","\ufe9f","\ufea3","\ufea7","\ufea9","\ufeab","\ufead","\ufeaf","\ufeb3","\ufeb7","\ufebb","\ufebf","\ufec3","\ufec7","\ufecb","\ufecf","\ufed3","\ufed7","\ufedb","\ufedf","\ufee3","\ufee7","\ufeeb","\ufeed","\ufef3","\ufe87","\ufe83","\ufe81","\ufe93","\ufeef","\ufbfe","\ufe8b","\ufe85","\ufe70","\ufe72","\ufe74","\ufe76","\ufe78","\ufe7a","\ufe7c","\ufe7e","\ufe80","\ufe8b","\ufe85"],x=["\u0621","\u0622","\u0623","\u0624","\u0625","\u0627","\u0629","\u062f","\u0630","\u0631","\u0632","\u0648","\u0649"],c=["\u064b","\u064b","\u064c","\u061f","\u064d","\u061f","\u064e","\u064e","\u064f","\u064f","\u0650","\u0650","\u0651","\u0651","\u0652","\u0652","\u0621","\u0622","\u0622","\u0623","\u0623","\u0624","\u0624","\u0625","\u0625","\u0626","\u0626","\u0626","\u0626","\u0627","\u0627","\u0628","\u0628","\u0628","\u0628","\u0629","\u0629","\u062a","\u062a","\u062a","\u062a","\u062b","\u062b","\u062b","\u062b","\u062c","\u062c","\u062c","\u062c","\u062d","\u062d","\u062d","\u062d","\u062e","\u062e","\u062e","\u062e","\u062f","\u062f","\u0630","\u0630","\u0631","\u0631","\u0632","\u0632","\u0633","\u0633","\u0633","\u0633","\u0634","\u0634","\u0634","\u0634","\u0635","\u0635","\u0635","\u0635","\u0636","\u0636","\u0636","\u0636","\u0637","\u0637","\u0637","\u0637","\u0638","\u0638","\u0638","\u0638","\u0639","\u0639","\u0639","\u0639","\u063a","\u063a","\u063a","\u063a","\u0641","\u0641","\u0641","\u0641","\u0642","\u0642","\u0642","\u0642","\u0643","\u0643","\u0643","\u0643","\u0644","\u0644","\u0644","\u0644","\u0645","\u0645","\u0645","\u0645","\u0646","\u0646","\u0646","\u0646","\u0647","\u0647","\u0647","\u0647","\u0648","\u0648","\u0649","\u0649","\u064a","\u064a","\u064a","\u064a","\ufef5","\ufef6","\ufef7","\ufef8","\ufef9","\ufefa","\ufefb","\ufefc","\u061f","\u061f","\u061f"],d=["\u0621","\u0641"],y=["\u063a","\u064a"],p=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],_=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],v=10,g=11,m=12,V=18,I=["UBAT_L","UBAT_R","UBAT_EN","UBAT_AN","UBAT_ON","UBAT_B","UBAT_S","UBAT_AL","UBAT_WS","UBAT_CS","UBAT_ES","UBAT_ET","UBAT_NSM","UBAT_LRE","UBAT_RLE","UBAT_PDF","UBAT_LRO","UBAT_RLO","UBAT_BN"],b=100,B=[100,0,0,0,0,101,102,103,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,104,4,4,4,0,4,0,4,0,4,4,4,0,0,4,4,0,0,0,0,0,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,0,0,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,0,0,4,4,0,0,4,4,0,0,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,0,0,0,105,7,7,106,107],w=[[V,V,V,V,V,V,V,V,V,6,5,6,8,5,V,V,V,V,V,V,V,V,V,V,V,V,V,V,5,5,5,6,8,4,4,g,g,g,4,4,4,4,4,v,9,v,9,9,2,2,2,2,2,2,2,2,2,2,9,4,4,4,4,4,4,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4,4,4,4,4,4,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4,4,4,4,V,V,V,V,V,V,5,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,9,4,g,g,g,g,4,4,4,4,0,4,4,V,4,4,g,g,2,2,4,0,4,4,4,2,0,4,4,4,4,4,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4,4,4,4,4,4,4,4,4,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4,4,0,0,0,0,0,0,0,4,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4,0,4,4,4,4,4,4,4,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,1,m,1,m,m,1,m,m,1,m,4,4,4,4,4,4,4,4,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,4,4,4,4,4,1,1,1,1,1,4,4,4,4,4,4,4,4,4,4,4],[3,3,3,3,4,4,4,4,7,g,g,7,9,7,4,4,m,m,m,m,m,m,m,m,m,m,m,7,4,4,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,3,3,3,3,3,3,3,3,3,3,g,3,3,7,7,7,m,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,m,m,m,m,m,m,m,3,4,m,m,m,m,m,m,7,7,m,m,4,m,m,m,m,7,7,2,2,2,2,2,2,2,2,2,2,7,7,7,7,7,7],[7,7,7,7,7,7,7,7,7,7,7,7,7,7,4,7,7,m,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,4,4,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,m,m,m,m,m,m,m,m,m,m,m,7,4,4,4,4,4,4,4,4,4,4,4,4,4,4,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,m,m,m,m,m,m,m,m,m,1,1,4,4,4,4,1,4,4,4,4,4],[8,8,8,8,8,8,8,8,8,8,8,V,V,V,0,1,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,8,5,13,14,15,16,17,9,g,g,g,g,g,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,9,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,8,V,V,V,V,V,4,4,4,4,4,V,V,V,V,V,V,2,0,4,4,2,2,2,2,2,2,v,v,4,4,4,0,2,2,2,2,2,2,2,2,2,2,v,v,4,4,4,4,0,0,0,0,0,0,0,0,0,0,0,0,0,4,4,4,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4],[0,0,0,0,0,0,0,4,4,4,4,4,4,4,4,4,4,4,4,0,0,0,0,0,4,4,4,4,4,1,m,1,1,1,1,1,1,1,1,1,1,v,1,1,1,1,1,1,1,1,1,1,1,1,1,4,1,1,1,1,1,4,1,4,1,1,4,1,1,4,1,1,1,1,1,1,1,1,1,1,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7],[m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,m,m,m,m,m,m,m,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,9,4,9,4,4,9,4,4,4,4,4,4,4,4,4,g,4,4,v,v,4,4,4,4,4,g,g,4,4,4,4,4,7,7,7,7,7,4,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,4,4,V],[4,4,4,g,g,g,4,4,4,4,4,v,9,v,9,9,2,2,2,2,2,2,2,2,2,2,9,4,4,4,4,4,4,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4,4,4,4,4,4,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4,4,4,4,4,4,4,4,4,4,4,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4,4,4,0,0,0,0,0,0,4,4,0,0,0,0,0,0,4,4,0,0,0,0,0,0,4,4,0,0,0,4,4,4,g,g,4,4,4,g,g,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4]];function T(e,t,r,i,n){var a=function(e,t,r){if(void 0===t.inFormat&&(t.inFormat=r.defInFormat),void 0===t.outFormat&&(t.outFormat=r.defOutFormat),void 0===t.swap&&(t.swap=r.defSwap),t.inFormat===t.outFormat)return t;var i,n=t.inFormat.substring(0,1),a=t.outFormat.substring(0,1),s=t.inFormat.substring(1,4),o=t.outFormat.substring(1,4);return"C"===s.charAt(0)&&(i=L(e),s="ltr"===i||"rtl"===i?i.toUpperCase():"L"===t.inFormat.charAt(2)?"LTR":"RTL",t.inFormat=n+s),"C"===o.charAt(0)&&("rtl"===(i=L(e))?o="RTL":"ltr"===i?(i=function(e){var t=e.split("");return t.reverse(),L(t.join(""))}(e),o=i.toUpperCase()):o="L"===t.outFormat.charAt(2)?"LTR":"RTL",t.outFormat=a+o),t}(e,{inFormat:t,outFormat:r,swap:i},n);if(a.inFormat===a.outFormat)return e;t=a.inFormat,r=a.outFormat,i=a.swap;var s=t.substring(0,1),o=t.substring(1,4),l=r.substring(0,1),u=r.substring(1,4);if(n.inFormat=t,n.outFormat=r,n.swap=i,"L"===s&&"VLTR"===r){if("LTR"===o)return n.dir=Q,A(e,n);if("RTL"===o)return n.dir=ee,A(e,n)}if("V"===s&&"V"===l)return n.dir="RTL"===o?ee:Q,P(e,n);if("L"===s&&"VRTL"===r)return"LTR"===o?(n.dir=Q,e=A(e,n)):(n.dir=ee,e=A(e,n)),P(e);if("VLTR"===t&&"LLTR"===r)return n.dir=Q,A(e,n);if("V"===s&&"L"===l&&o!==u)return e=P(e),"RTL"===o?T(e,"LLTR","VLTR",i,n):T(e,"LRTL","VRTL",i,n);if("VRTL"===t&&"LRTL"===r)return T(e,"LRTL","VRTL",i,n);if("L"===s&&"L"===l){var h=n.swap;return n.swap=h.substr(0,1)+"N","RTL"===o?(n.dir=ee,e=A(e,n),n.swap="N"+h.substr(1,2),n.dir=Q,e=A(e,n)):(n.dir=Q,e=A(e,n),n.swap="N"+h.substr(1,2),e=T(e,"VLTR","LRTL",n.swap,n)),e}return e}function L(e){var t=/[A-Za-z\u05d0-\u065f\u066a-\u06ef\u06fa-\u07ff\ufb1d-\ufdff\ufe70-\ufefc]/.exec(e);return t?t[0]<="z"?"ltr":"rtl":""}function A(e,t){var r=e.split(""),i=[];return M(r,i,t),function(e,t,r){if(0!==r.hiLevel&&r.swap.substr(0,1)!==r.swap.substr(1,2))for(var i=0;i<e.length;i++)1===t[i]&&(e[i]=D(e[i]))}(r,i,t),F(2,r,i,t),F(1,r,i,t),W=i,r.join("")}function M(e,t,r){var i=e.length,n=r.dir?_:p,a=0,s=-1,o=[],l=[];r.hiLevel=r.dir,r.lastArabic=!1,r.hasUbatAl=!1,r.hasUbatB=!1,r.hasUbatS=!1;for(var u=0;u<i;u++)o[u]=k(e[u]);for(var h=0;h<i;h++){var f=a,x=E(e,o,l,h,r);l[h]=x;var c=240&(a=n[f][x]),d=n[a&=15][X];if(t[h]=d,c>0)if(16===c){for(var y=s;y<h;y++)t[y]=1;s=-1}else s=-1;if(n[a][$])-1===s&&(s=h);else if(s>-1){for(var v=s;v<h;v++)t[v]=d;s=-1}5===o[h]&&(t[h]=0),r.hiLevel|=d}r.hasUbatS&&function(e,t,r,i){for(var n=0;n<r;n++)if(6===e[n]){t[n]=i.dir;for(var a=n-1;a>=0&&8===e[a];a--)t[a]=i.dir}}(o,t,i,r)}function k(e){var t=e.charCodeAt(0),r=B[t>>8];return r<b?r:w[r-b][255&t]}function P(e,t){var r=e.split("");if(t){var i=[];M(r,i,t),W=i}return r.reverse(),Y.reverse(),r.join("")}function S(e,t,r){for(var i=0;i<t;i++)if(e[i]===r)return i;return-1}function N(e){for(var t=0;t<d.length;t++)if(e>=d[t]&&e<=y[t])return!0;return!1}function C(e,t,r,i){for(;t*r<i&&j(e[t]);)t+=r;return!!(t*r<i&&N(e[t]))}function U(e,t,r,i){for(;t*r<i&&j(e[t]);)t+=r;var a;if(!(t*r<i))return!1;a=e[t];for(var s=0;s<n.length;s++)if(n[s]===a)return!0;return!1}function F(e,t,r,i){if(!(i.hiLevel<e)){if(1===e&&i.dir===ee&&!i.hasUbatB)return t.reverse(),void Y.reverse();for(var n,a,s,o,l,u=t.length,h=0;h<u;){if(r[h]>=e){for(n=h+1;n<u&&r[n]>=e;)n++;for(a=h,s=n-1;a<s;a++,s--)o=t[a],t[a]=t[s],t[s]=o,l=Y[a],Y[a]=Y[s],Y[s]=l;h=n}h++}}}function E(e,t,r,i,n){var a=t[i];return{UBAT_L:()=>(n.lastArabic=!1,0),UBAT_R:()=>(n.lastArabic=!1,1),UBAT_ON:()=>4,UBAT_AN:()=>3,UBAT_EN:()=>n.lastArabic?3:2,UBAT_AL:()=>(n.lastArabic=!0,n.hasUbatAl=!0,1),UBAT_WS:()=>4,UBAT_CS:()=>{var e,a;return i<1||i+1>=t.length||2!==(e=r[i-1])&&3!==e||2!==(a=t[i+1])&&3!==a?4:(n.lastArabic&&(a=3),a===e?a:4)},UBAT_ES:()=>2===(i>0?r[i-1]:5)&&i+1<t.length&&2===t[i+1]?2:4,UBAT_ET:()=>{if(i>0&&2===r[i-1])return 2;if(n.lastArabic)return 4;for(var e=i+1,a=t.length;e<a&&t[e]===g;)e++;return e<a&&2===t[e]?2:4},UBAT_NSM:()=>{if("VLTR"===n.inFormat){for(var a=t.length,s=i+1;s<a&&t[s]===m;)s++;if(s<a){var o=e[i].charCodeAt[0],l=o>=1425&&o<=2303||64286===o,u=t[s];if(l&&(1===u||7===u))return 1}}return i<1||5===t[i-1]?4:r[i-1]},UBAT_B:()=>(n.lastArabic=!0,n.hasUbatB=!0,n.dir),UBAT_S:()=>(n.hasUbatS=!0,4),UBAT_LRE:()=>(n.lastArabic=!1,4),UBAT_RLE:()=>(n.lastArabic=!1,4),UBAT_LRO:()=>(n.lastArabic=!1,4),UBAT_RLO:()=>(n.lastArabic=!1,4),UBAT_PDF:()=>(n.lastArabic=!1,4),UBAT_BN:()=>4}[I[a]]()}function D(e){for(var t,r=0,n=i.length-1;r<=n;)if(t=Math.floor((r+n)/2),e<i[t][0])n=t-1;else{if(!(e>i[t][0]))return i[t][1];r=t+1}return e}function O(e){for(var t=0;t<x.length;t++)if(x[t]===e)return!0;return!1}function R(e){for(var t=0;t<o.length;t++)if(e===o[t])return h[t];return e}function z(e,t){for(var r=0;r<o.length;r++)if(e===o[r])return t[r];return e}function j(e){return e>="\u064b"&&e<="\u0655"}function Z(e){return"L"===e?"LTR":"R"===e?"RTL":"C"===e?"CLR":"D"===e?"CRL":""}function G(e,t,r,i){for(;t*r<i&&j(e[t]);)t+=r;return t*r<i&&(e[t]=" ",!0)}function q(e,t){for(var r=0;r<n.length;r++)if(e===n[r])return t[r];return e}function K(e,t,r,i){for(var n=0;n<e.length;n++)(e[n]>t||!r&&e[n]===t)&&(e[n]+=i)}var Y=[],H=[],W=[],J={dir:0,defInFormat:"LLTR",defoutFormat:"VLTR",defSwap:"YN",inFormat:"LLTR",outFormat:"VLTR",swap:"YN",hiLevel:0,lastArabic:!1,hasUbatAl:!1,hasBlockSep:!1,hasSegSep:!1,defOutFormat:""},X=5,$=6,Q=0,ee=1,te=/^[(I|V)][(L|R|C|D)][(Y|N)][(S|N)][N]$/,re=/[\u0591-\u06ff\ufb1d-\ufefc]/;t.a=class{constructor(){this.inputFormat="ILYNN",this.outputFormat="VLNNN",this.sourceToTarget=[],this.targetToSource=[],this.levels=[]}bidiTransform(e,t,r){if(this.sourceToTarget=[],this.targetToSource=[],!e)return"";if(function(e,t,r){Y=[],W=[];for(var i=0;i<r;i++)e[i]=i,t[i]=i,Y[i]=i}(this.sourceToTarget,this.targetToSource,e.length),!this.checkParameters(t,r))return e;t=this.inputFormat,r=this.outputFormat;var i,o=J,h=Z(t.charAt(1)),x=Z(r.charAt(1)),d=("I"===t.charAt(0)?"L":t.charAt(0))+h,y=("I"===r.charAt(0)?"L":r.charAt(0))+x,p=t.charAt(2)+r.charAt(2);o.defInFormat=d,o.defOutFormat=y,o.defSwap=p;var _=T(e,d,y,p,o),v=!1;return"R"===r.charAt(1)?v=!0:"C"!==r.charAt(1)&&"D"!==r.charAt(1)||(v="rtl"===this.checkContextual(_)),this.sourceToTarget=Y,this.targetToSource=function(e){for(var t=new Array(e.length),r=0;r<e.length;r++)t[e[r]]=r;return t}(this.sourceToTarget),H=this.targetToSource,i=t.charAt(3)===r.charAt(3)?_:"S"===r.charAt(3)?function(e,t,r){if(0===t.length)return"";void 0===e&&(e=!0),void 0===r&&(r=!0);var i=(t=String(t)).split(""),n=0,o=1,h=i.length;e||(n=i.length-1,o=-1,h=1);for(var x=function(e,t,r,i,n){for(var o=0,h=[],x=0,c=t;c*r<i;c+=r)if(N(e[c])||j(e[c])){if("\u0644"===e[c]&&U(e,c+r,r,i)){e[c]=q(e[c+r],0===o?a:s),G(e,c+=r,r,i),n&&(h[x]=c,x++),o=0;continue}var d=e[c];1===o?e[c]=C(e,c+r,r,i)?R(e[c]):z(e[c],u):!0===C(e,c+r,r,i)?e[c]=z(e[c],f):e[c]=z(e[c],l),j(d)||(o=1),!0===O(d)&&(o=0)}else o=0;return h}(i,n,o,h,r),c="",d=0;d<i.length;d++)r&&S(x,x.length,d)>-1?(K(H,d,!e,-1),Y.splice(d,1)):c+=i[d];return c}(v,_,!0):function(e,t,r){if(0===e.length)return"";void 0===r&&(r=!0),void 0===t&&(t=!0);for(var i="",a=(e=String(e)).split(""),s=0;s<e.length;s++){var o=!1;if(a[s]>="\ufe70"&&a[s]<"\ufeff"){var l=e.charCodeAt(s);a[s]>="\ufef5"&&a[s]<="\ufefc"?(t?(s>0&&r&&" "===a[s-1]?i=i.substring(0,i.length-1)+"\u0644":(i+="\u0644",o=!0),i+=n[(l-65269)/2]):(i+=n[(l-65269)/2],i+="\u0644",s+1<e.length&&r&&" "===a[s+1]?s++:o=!0),o&&(K(H,s,!0,1),Y.splice(s,0,Y[s]))):i+=c[l-65136]}else i+=a[s]}return i}(_,v,!0),this.sourceToTarget=Y,this.targetToSource=H,this.levels=W,i}_inputFormatSetter(e){if(!te.test(e))throw new Error("dojox/string/BidiEngine: the bidi layout string is wrong!");this.inputFormat=e}_outputFormatSetter(e){if(!te.test(e))throw new Error("dojox/string/BidiEngine: the bidi layout string is wrong!");this.outputFormat=e}checkParameters(e,t){return e?this._inputFormatSetter(e):e=this.inputFormat,t?this._outputFormatSetter(t):t=this.outputFormat,e!==t}checkContextual(e){var t=L(e);if("ltr"!==t&&"rtl"!==t){try{t=document.dir.toLowerCase()}catch(r){}"ltr"!==t&&"rtl"!==t&&(t="ltr")}return t}hasBidiChar(e){return re.test(e)}}},536:function(e,t,r){"use strict";function i(e,t,r){var i,a,o,l,u,h=t&&t.length,f=h?t[0]*r:e.length,c=n(e,0,f,r,!0),d=new Array;if(!c||c.next===c.prev)return d;if(h&&(c=x(e,t,c,r)),e.length>80*r){i=o=e[0],a=l=e[1];for(var y=r;y<f;y+=r){var p=e[y],_=e[y+1];i=Math.min(i,p),a=Math.min(a,_),o=Math.max(o,p),l=Math.max(l,_)}u=0!==(u=Math.max(o-i,l-a))?1/u:0}return s(c,d,r,i,a,u),d}function n(e,t,r,i,n){var a;if(n===v(e,t,r,i)>0)for(var s=t;s<r;s+=i)a=u(s,e[s],e[s+1],a);else for(var o=r-i;o>=t;o-=i)a=u(o,e[o],e[o+1],a);return a&&I(a,a.next)&&(h(a),a=a.next),a}function a(e,t=e){if(!e)return e;var r,i=e;do{if(r=!1,i.steiner||!I(i,i.next)&&0!==p(i.prev,i,i.next))i=i.next;else{if(h(i),(i=t=i.prev)===i.next)break;r=!0}}while(r||i!==t);return t}function s(e,t,r,i,n,u,f=0){if(e){!f&&u&&(e=d(e,i,n,u));for(var x=e;e.prev!==e.next;){var c=e.prev,y=e.next;if(u?l(e,i,n,u):o(e))t.push(c.index/r),t.push(e.index/r),t.push(y.index/r),h(e),e=y.next,x=y.next;else if((e=y)===x){f?1===f?s(e=B(e,t,r),t,r,i,n,u,2):2===f&&w(e,t,r,i,n,u):s(a(e),t,r,i,n,u,1);break}}}}function o(e){var t=e.prev,r=e,i=e.next;if(p(t,r,i)>=0)return!1;for(var n=e.next.next,a=n,s=0;n!==e.prev&&(0===s||n!==a);){if(s++,g(t.x,t.y,r.x,r.y,i.x,i.y,n.x,n.y)&&p(n.prev,n,n.next)>=0)return!1;n=n.next}return!0}function l(e,t,r,i){var n=e.prev,a=e,s=e.next;if(p(n,a,s)>=0)return!1;for(var o=n.x<a.x?n.x<s.x?n.x:s.x:a.x<s.x?a.x:s.x,l=n.y<a.y?n.y<s.y?n.y:s.y:a.y<s.y?a.y:s.y,u=n.x>a.x?n.x>s.x?n.x:s.x:a.x>s.x?a.x:s.x,h=n.y>a.y?n.y>s.y?n.y:s.y:a.y>s.y?a.y:s.y,f=V(o,l,t,r,i),x=V(u,h,t,r,i),c=e.prevZ,d=e.nextZ;c&&c.z>=f&&d&&d.z<=x;){if(c!==e.prev&&c!==e.next&&g(n.x,n.y,a.x,a.y,s.x,s.y,c.x,c.y)&&p(c.prev,c,c.next)>=0)return!1;if(c=c.prevZ,d!==e.prev&&d!==e.next&&g(n.x,n.y,a.x,a.y,s.x,s.y,d.x,d.y)&&p(d.prev,d,d.next)>=0)return!1;d=d.nextZ}for(;c&&c.z>=f;){if(c!==e.prev&&c!==e.next&&g(n.x,n.y,a.x,a.y,s.x,s.y,c.x,c.y)&&p(c.prev,c,c.next)>=0)return!1;c=c.prevZ}for(;d&&d.z<=x;){if(d!==e.prev&&d!==e.next&&g(n.x,n.y,a.x,a.y,s.x,s.y,d.x,d.y)&&p(d.prev,d,d.next)>=0)return!1;d=d.nextZ}return!0}function u(e,t,r,i){var n=new A(e,t,r);return i?(n.next=i.next,n.prev=i,i.next.prev=n,i.next=n):(n.prev=n,n.next=n),n}function h(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function f(e){var t=e,r=e;do{(t.x<r.x||t.x===r.x&&t.y<r.y)&&(r=t),t=t.next}while(t!==e);return r}function x(e,t,r,i){for(var s=new Array,o=0,l=t.length;o<l;o++){var u=n(e,t[o]*i,o<l-1?t[o+1]*i:e.length,i,!1);u===u.next&&(u.steiner=!0),s.push(f(u))}for(var h of(s.sort(b),s))c(h,r),r=a(r,r.next);return r}function c(e,t){if(t=function(e,t){var r,i=t,n=e.x,a=e.y,s=-1/0;do{if(a<=i.y&&a>=i.next.y&&i.next.y!==i.y){var o=i.x+(a-i.y)*(i.next.x-i.x)/(i.next.y-i.y);if(o<=n&&o>s){if(s=o,o===n){if(a===i.y)return i;if(a===i.next.y)return i.next}r=i.x<i.next.x?i:i.next}}i=i.next}while(i!==t);if(!r)return null;if(n===s)return r.prev;var l,u=r,h=r.x,f=r.y,x=1/0;for(i=r.next;i!==u;)n>=i.x&&i.x>=h&&n!==i.x&&g(a<f?n:s,a,h,f,a<f?s:n,a,i.x,i.y)&&(((l=Math.abs(a-i.y)/(n-i.x))<x||l===x&&i.x>r.x)&&m(i,e)&&(r=i,x=l)),i=i.next;return r}(e,t)){var r=L(t,e);a(r,r.next)}}function d(e,t,r,i){for(var n;n!==e;n=n.next){if(null===(n=n||e).z&&(n.z=V(n.x,n.y,t,r,i)),n.prev.next!==n||n.next.prev!==n)return n.prev.next=n,n.next.prev=n,d(e,t,r,i);n.prevZ=n.prev,n.nextZ=n.next}return e.prevZ.nextZ=null,e.prevZ=null,function(e){for(var t,r=1;;){var i=void 0,n=e;e=null,t=null;for(var a=0;n;){a++,i=n;for(var s=0;s<r&&i;s++)i=i.nextZ;for(var o=r;s>0||o>0&&i;){var l=void 0;0===s?(l=i,i=i.nextZ,o--):0!==o&&i?n.z<=i.z?(l=n,n=n.nextZ,s--):(l=i,i=i.nextZ,o--):(l=n,n=n.nextZ,s--),t?t.nextZ=l:e=l,l.prevZ=t,t=l}n=i}if(t.nextZ=null,r*=2,a<2)return e}}(e)}function y(e,t,r,i){var n=t&&t.length,a=n?t[0]*r:e.length,s=Math.abs(v(e,0,a,r));if(n)for(var o=0,l=t.length;o<l;o++){var u=t[o]*r,h=o<l-1?t[o+1]*r:e.length;s-=Math.abs(v(e,u,h,r))}for(var f=0,x=0;x<i.length;x+=3){var c=i[x]*r,d=i[x+1]*r,y=i[x+2]*r;f+=Math.abs((e[c]-e[y])*(e[d+1]-e[c+1])-(e[c]-e[d])*(e[y+1]-e[c+1]))}return 0===s&&0===f?0:Math.abs((f-s)/s)}function p(e,t,r){return(t.y-e.y)*(r.x-t.x)-(t.x-e.x)*(r.y-t.y)}function _(e,t,r,i){return!!(I(e,t)&&I(r,i)||I(e,i)&&I(r,t))||p(e,t,r)>0!=p(e,t,i)>0&&p(r,i,e)>0!=p(r,i,t)>0}function v(e,t,r,i){for(var n=0,a=t,s=r-i;a<r;a+=i)n+=(e[s]-e[a])*(e[a+1]+e[s+1]),s=a;return n}function g(e,t,r,i,n,a,s,o){return(n-s)*(t-o)-(e-s)*(a-o)>=0&&(e-s)*(i-o)-(r-s)*(t-o)>=0&&(r-s)*(a-o)-(n-s)*(i-o)>=0}function m(e,t){return p(e.prev,e,e.next)<0?p(e,t,e.next)>=0&&p(e,e.prev,t)>=0:p(e,t,e.prev)<0||p(e,e.next,t)<0}function V(e,t,r,i,n){return(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-r)*n)|e<<8))|e<<4))|e<<2))|e<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-i)*n)|t<<8))|t<<4))|t<<2))|t<<1))<<1}function I(e,t){return e.x===t.x&&e.y===t.y}function b(e,t){return e.x-t.x}function B(e,t,r){var i=e;do{var n=i.prev,a=i.next.next;!I(n,a)&&_(n,i,i.next,a)&&m(n,a)&&m(a,n)&&(t.push(n.index/r),t.push(i.index/r),t.push(a.index/r),h(i),h(i.next),i=e=a),i=i.next}while(i!==e);return i}function w(e,t,r,i,n,o){var l=e;do{for(var u=l.next.next;u!==l.prev;){if(l.index!==u.index&&T(l,u)){var h=L(l,u);return l=a(l,l.next),h=a(h,h.next),s(l,t,r,i,n,o),void s(h,t,r,i,n,o)}u=u.next}l=l.next}while(l!==e)}function T(e,t){return e.next.index!==t.index&&e.prev.index!==t.index&&!function(e,t){var r=e;do{if(r.index!==e.index&&r.next.index!==e.index&&r.index!==t.index&&r.next.index!==t.index&&_(r,r.next,e,t))return!0;r=r.next}while(r!==e);return!1}(e,t)&&m(e,t)&&m(t,e)&&function(e,t){var r=e,i=!1,n=(e.x+t.x)/2,a=(e.y+t.y)/2;do{r.y>a!=r.next.y>a&&r.next.y!==r.y&&n<(r.next.x-r.x)*(a-r.y)/(r.next.y-r.y)+r.x&&(i=!i),r=r.next}while(r!==e);return i}(e,t)}function L(e,t){var r=new A(e.index,e.x,e.y),i=new A(t.index,t.x,t.y),n=e.next,a=t.prev;return e.next=t,t.prev=e,r.next=n,n.prev=r,i.next=r,r.prev=i,a.next=i,i.prev=a,i}r.d(t,"a",(function(){return y})),r.d(t,"b",(function(){return i}));class A{constructor(e,t,r){this.index=e,this.x=t,this.y=r,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}}},683:function(e,t,r){"use strict";r.d(t,"a",(function(){return n})),r.d(t,"b",(function(){return a})),r.d(t,"c",(function(){return i})),r.d(t,"d",(function(){return s}));var i=!0,n=32,a=1.5,s=200},731:function(e,t,r){"use strict";function i(e,t,r,i){var n=3*e,a=3*(r-e)-n,s=1-n-a,o=3*t,l=3*(i-t)-o,u=1-o-l;function h(e){return((s*e+a)*e+n)*e}function f(e){return(3*s*e+2*a)*e+n}return function(e,t=1e-6){return function(e){return((u*e+l)*e+o)*e}(function(e,t){var r,i,n,a,s,o;for(n=e,o=0;o<8;o++){if(a=h(n)-e,Math.abs(a)<t)return n;if(s=f(n),Math.abs(s)<1e-6)break;n-=a/s}if((n=e)<(r=0))return r;if(n>(i=1))return i;for(;r<i;){if(a=h(n),Math.abs(a-e)<t)return n;e>a?r=n:i=n,n=.5*(i-r)+r}return n}(e,t))}}r.d(t,"a",(function(){return a})),r.d(t,"b",(function(){return s})),r.d(t,"c",(function(){return i}));var n=/^cubic-bezier\((.*)\)/,a={};function s(e){var t=a[e]||null;if(!t){var r=n.exec(e);if(r){var s=r[1].split(",").map((e=>parseFloat(e.trim())));4!==s.length||s.some((e=>isNaN(e)))||(t=i.apply(i,s))}}return t}a.ease=i(.25,.1,.25,1),a.linear=i(0,0,1,1),a.easeIn=a["ease-in"]=i(.42,0,1,1),a.easeOut=a["ease-out"]=i(0,0,.58,1),a.easeInOut=a["ease-in-out"]=i(.42,0,.58,1)}}]);
//# sourceMappingURL=118.74191eb0.chunk.js.map