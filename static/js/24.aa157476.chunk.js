(this.webpackJsonpimaps=this.webpackJsonpimaps||[]).push([[24],{1014:function(t,e,r){"use strict";r.d(e,"a",(function(){return i})),r.d(e,"b",(function(){return s}));var n=r(743);function o(t,e,r){const n=t.typedBuffer,o=t.typedBufferStride,s=e.typedBuffer,i=e.typedBufferStride,a=r?r.count:e.count;let c=(r&&r.dstIndex?r.dstIndex:0)*o,u=(r&&r.srcIndex?r.srcIndex:0)*i;for(let f=0;f<a;++f)n[c]=s[u],n[c+1]=s[u+1],c+=o,u+=i}function s(t,e,r){const s=t.typedBuffer,i=t.typedBufferStride,a=e.typedBuffer,c=e.typedBufferStride,u=r?r.count:e.count;let f=(r&&r.dstIndex?r.dstIndex:0)*i,d=(r&&r.srcIndex?r.srcIndex:0)*c;if(Object(n.b)(e.elementType)){const t=Object(n.d)(e.elementType);if(Object(n.c)(e.elementType))for(let e=0;e<u;++e)s[f]=Math.max(a[d]/t,-1),s[f+1]=Math.max(a[d+1]/t,-1),f+=i,d+=c;else for(let e=0;e<u;++e)s[f]=a[d]/t,s[f+1]=a[d+1]/t,f+=i,d+=c}else o(t,e,r);return t}function i(t,e,r,n){var o,s;const i=t.typedBuffer,a=t.typedBufferStride,c=null!=(o=null==n?void 0:n.count)?o:t.count;let u=(null!=(s=null==n?void 0:n.dstIndex)?s:0)*a;for(let f=0;f<c;++f)i[u]=e,i[u+1]=r,u+=a}Object.freeze({__proto__:null,copy:o,normalizeIntegerBuffer:s,fill:i})},1015:function(t,e,r){"use strict";function n(t,e,r){const n=t.typedBuffer,o=t.typedBufferStride,s=e.typedBuffer,i=e.typedBufferStride,a=r?r.count:e.count;let c=(r&&r.dstIndex?r.dstIndex:0)*o,u=(r&&r.srcIndex?r.srcIndex:0)*i;for(let f=0;f<a;++f)n[c]=s[u],n[c+1]=s[u+1],n[c+2]=s[u+2],n[c+3]=s[u+3],c+=o,u+=i}function o(t,e,r,n,o,s){var i,a;const c=t.typedBuffer,u=t.typedBufferStride,f=null!=(i=null==s?void 0:s.count)?i:t.count;let d=(null!=(a=null==s?void 0:s.dstIndex)?a:0)*u;for(let l=0;l<f;++l)c[d]=e,c[d+1]=r,c[d+2]=n,c[d+3]=o,d+=u}r.d(e,"a",(function(){return n})),r.d(e,"b",(function(){return o}));Object.freeze({__proto__:null,copy:n,fill:o})},1150:function(t,e,r){"use strict";r.d(e,"a",(function(){return i})),r.d(e,"b",(function(){return s})),r.d(e,"c",(function(){return o}));var n=r(1216);function o(t,e,r){if(t.count!==e.count)return void n.a.error("source and destination buffers need to have the same number of elements");const o=t.count,s=r[0],i=r[1],a=r[2],c=r[3],u=r[4],f=r[5],d=r[6],l=r[7],p=r[8],h=t.typedBuffer,b=t.typedBufferStride,m=e.typedBuffer,y=e.typedBufferStride;for(let n=0;n<o;n++){const t=n*b,e=n*y,r=m[e],o=m[e+1],O=m[e+2],w=m[e+3];h[t]=s*r+c*o+d*O,h[t+1]=i*r+u*o+l*O,h[t+2]=a*r+f*o+p*O,h[t+3]=w}}function s(t,e,r){const n=Math.min(t.count,e.count),o=t.typedBuffer,s=t.typedBufferStride,i=e.typedBuffer,a=e.typedBufferStride;for(let c=0;c<n;c++){const t=c*s,e=c*a;o[t]=r*i[e],o[t+1]=r*i[e+1],o[t+2]=r*i[e+2],o[t+3]=r*i[e+3]}}function i(t,e,r){const n=Math.min(t.count,e.count),o=t.typedBuffer,s=t.typedBufferStride,i=e.typedBuffer,a=e.typedBufferStride;for(let c=0;c<n;c++){const t=c*s,e=c*a;o[t]=i[e]>>r,o[t+1]=i[e+1]>>r,o[t+2]=i[e+2]>>r,o[t+3]=i[e+3]>>r}}Object.freeze({__proto__:null,transformMat4:function(t,e,r){if(t.count!==e.count)return void n.a.error("source and destination buffers need to have the same number of elements");const o=t.count,s=r[0],i=r[1],a=r[2],c=r[3],u=r[4],f=r[5],d=r[6],l=r[7],p=r[8],h=r[9],b=r[10],m=r[11],y=r[12],O=r[13],w=r[14],_=r[15],T=t.typedBuffer,g=t.typedBufferStride,x=e.typedBuffer,j=e.typedBufferStride;for(let n=0;n<o;n++){const t=n*g,e=n*j,r=x[e],o=x[e+1],S=x[e+2],I=x[e+3];T[t]=s*r+u*o+p*S+y*I,T[t+1]=i*r+f*o+h*S+O*I,T[t+2]=a*r+d*o+b*S+w*I,T[t+3]=c*r+l*o+m*S+_*I}},transformMat3:o,scale:s,shiftRight:i})},1151:function(t,e,r){"use strict";function n(t,e){const r=t.count;e||(e=new t.TypedArrayConstructor(r));for(let n=0;n<r;n++)e[n]=t.get(n);return e}r.d(e,"a",(function(){return n}));Object.freeze({__proto__:null,copy:function(t,e,r){const n=t.typedBuffer,o=t.typedBufferStride,s=e.typedBuffer,i=e.typedBufferStride,a=r?r.count:e.count;let c=(r&&r.dstIndex?r.dstIndex:0)*o,u=(r&&r.srcIndex?r.srcIndex:0)*i;for(let f=0;f<a;++f)n[c]=s[u],c+=o,u+=i},makeDense:n})},1152:function(t,e,r){"use strict";r.d(e,"a",(function(){return u}));var n=r(103),o=r(298),s=r(88),i=r(85),a=r(91),c=r(98);class u{constructor(t){this.streamDataRequester=t}async loadJSON(t,e){return this._load("json",t,e)}async loadBinary(t,e){return Object(c.w)(t)?(Object(a.t)(e),Object(c.i)(t)):this._load("binary",t,e)}async loadImage(t,e){return this._load("image",t,e)}async _load(t,e,r){if(Object(i.j)(this.streamDataRequester))return(await Object(n.default)(e,{responseType:f[t]})).data;const c=await Object(o.c)(this.streamDataRequester.request(e,t,r));if(!0===c.ok)return c.value;throw Object(a.s)(c.error),new s.a("",`Request for resource failed: ${c.error}`)}}const f={image:"image",binary:"array-buffer",json:"json"}},1153:function(t,e,r){"use strict";r.d(e,"a",(function(){return a})),r.d(e,"b",(function(){return i})),r.d(e,"c",(function(){return s}));var n=r(549),o=r(562);function s(t,e=o.d){return"number"==typeof t?e(t):Object(n.i)(t)||Object(n.k)(t)?new Uint32Array(t):t}function i(t){const e="number"==typeof t?t:t.length;if(e<3)return new Uint16Array(0);const r=e-2,n=r<=65536?new Uint16Array(3*r):new Uint32Array(3*r);if("number"==typeof t){let t=0;for(let e=0;e<r;e+=1)e%2==0?(n[t++]=e,n[t++]=e+1,n[t++]=e+2):(n[t++]=e+1,n[t++]=e,n[t++]=e+2)}else{let e=0;for(let o=0;o<r;o+=1)if(o%2==0){const r=t[o],s=t[o+1],i=t[o+2];n[e++]=r,n[e++]=s,n[e++]=i}else{const r=t[o+1],s=t[o],i=t[o+2];n[e++]=r,n[e++]=s,n[e++]=i}}return n}function a(t){const e="number"==typeof t?t:t.length;if(e<3)return new Uint16Array(0);const r=e-2,n=r<=65536?new Uint16Array(3*r):new Uint32Array(3*r);if("number"==typeof t){let t=0;for(let e=0;e<r;++e)n[t++]=0,n[t++]=e+1,n[t++]=e+2;return n}{const e=t[0];let o=t[1],s=0;for(let i=0;i<r;++i){const r=t[i+2];n[s++]=e,n[s++]=o,n[s++]=r,o=r}return n}}},1154:function(t,e,r){"use strict";r.d(e,"a",(function(){return n}));const n=2.1},1179:function(t,e,r){"use strict";r.d(e,"a",(function(){return P}));var n=r(85),o=r(200),s=r(88);const i=r(87).a.getLogger("esri.views.3d.glTF");var a=r(94);var c,u,f,d=r(222),l=r(424),p=r(98),h=r(719),b=r(147),m=r(543),y=r(462),O=r(421),w=r(1151);class _{constructor(t){this.data=t,this.offset4=0,this.dataUint32=new Uint32Array(this.data,0,Math.floor(this.data.byteLength/4))}readUint32(){const t=this.offset4;return this.offset4+=1,this.dataUint32[t]}readUint8Array(t){const e=4*this.offset4;return this.offset4+=t/4,new Uint8Array(this.data,e,t)}remainingBytes(){return this.data.byteLength-4*this.offset4}}(f=c||(c={})).SCALAR="SCALAR",f.VEC2="VEC2",f.VEC3="VEC3",f.VEC4="VEC4",f.MAT2="MAT2",f.MAT3="MAT3",f.MAT4="MAT4",function(t){t[t.ARRAY_BUFFER=34962]="ARRAY_BUFFER",t[t.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER"}(u||(u={}));const T={baseColorFactor:[1,1,1,1],metallicFactor:1,roughnessFactor:1},g={pbrMetallicRoughness:T,emissiveFactor:[0,0,0],alphaMode:"OPAQUE",alphaCutoff:.5,doubleSided:!1},x={ESRI_externalColorMixMode:"tint"},j=(t={})=>{const e={...T,...t.pbrMetallicRoughness},r=function(t){switch(t.ESRI_externalColorMixMode){case"multiply":case"tint":case"ignore":case"replace":break;default:Object(d.a)(t.ESRI_externalColorMixMode),t.ESRI_externalColorMixMode="tint"}return t}({...x,...t.extras});return{...g,...t,pbrMetallicRoughness:e,extras:r}};const S={magFilter:a.z.LINEAR,minFilter:a.z.LINEAR_MIPMAP_LINEAR,wrapS:a.B.REPEAT,wrapT:a.B.REPEAT};const I=1179937895,A=1313821514,v=5130562;class E{constructor(t,e,r,n,o){this.context=t,this.errorContext=e,this.uri=r,this.json=n,this.glbBuffer=o,this.bufferLoaders=new Map,this.textureLoaders=new Map,this.textureCache=new Map,this.materialCache=new Map,this.nodeParentMap=new Map,this.nodeTransformCache=new Map,this.baseUri=function(t){let e,r;return t.replace(/^(.*\/)?([^/]*)$/,((t,n,o)=>(e=n||"",r=o||"",""))),{dirPart:e,filePart:r}}(this.uri).dirPart,this._checkVersionSupported(),this._checkRequiredExtensionsSupported(),e.errorUnsupportedIf(null==n.scenes,"Scenes must be defined."),e.errorUnsupportedIf(null==n.meshes,"Meshes must be defined"),e.errorUnsupportedIf(null==n.nodes,"Nodes must be defined."),this._computeNodeParents()}static async load(t,e,r,n){if(Object(p.w)(r)){const n=Object(p.h)(r);if("model/gltf-binary"!==n.mediaType)try{const o=JSON.parse(n.isBase64?atob(n.data):n.data);return new E(t,e,r,o)}catch{}const o=Object(p.i)(r);if(E._isGLBData(o))return this._fromGLBData(t,e,r,o)}if(r.endsWith(".gltf")){const o=await t.loadJSON(r,n);return new E(t,e,r,o)}const o=await t.loadBinary(r,n);if(E._isGLBData(o))return this._fromGLBData(t,e,r,o);const s=await t.loadJSON(r,n);return new E(t,e,r,s)}static _isGLBData(t){const e=new _(t);return e.remainingBytes()>=4&&e.readUint32()===I}static async _fromGLBData(t,e,r,n){const o=await E._parseGLBData(e,n);return new E(t,e,r,o.json,o.binaryData)}static async _parseGLBData(t,e){const r=new _(e);t.assert(r.remainingBytes()>=12,"GLB binary data is insufficiently large.");const n=r.readUint32(),o=r.readUint32(),s=r.readUint32();t.assert(n===I,"Magic first 4 bytes do not fit to expected GLB value."),t.assert(e.byteLength>=s,"GLB binary data is smaller than header specifies."),t.errorUnsupportedIf(2!==o,"An unsupported GLB container version was detected. Only version 2 is supported.");let i,a,c=0;for(;r.remainingBytes()>=8;){const e=r.readUint32(),n=r.readUint32();0===c?(t.assert(n===A,"First GLB chunk must be JSON."),t.assert(e>=0,"No JSON data found."),i=await M(r.readUint8Array(e))):1===c?(t.errorUnsupportedIf(n!==v,"Second GLB chunk expected to be BIN."),a=r.readUint8Array(e)):t.warnUnsupported("More than 2 GLB chunks detected. Skipping."),c+=1}return i||t.error("No GLB JSON chunk detected."),{json:i,binaryData:a}}async getBuffer(t,e){const r=this.json.buffers[t],n=this.errorContext;if(null==r.uri)return n.assert(null!=this.glbBuffer,"GLB buffer not present"),this.glbBuffer;const o=await this._getBufferLoader(t,e);return n.assert(o.byteLength===r.byteLength,"Buffer byte lengths should match."),o}async _getBufferLoader(t,e){const r=this.bufferLoaders.get(t);if(r)return r;const n=this.json.buffers[t],o=this.context.loadBinary(this._resolveUri(n.uri),e).then((t=>new Uint8Array(t)));return this.bufferLoaders.set(t,o),o}async getAccessor(t,e){const r=this.errorContext;r.errorUnsupportedIf(!this.json.accessors,"Accessors missing.");const n=this.json.accessors[t];r.errorUnsupportedIf(null==(null==n?void 0:n.bufferView),"Some accessor does not specify a bufferView."),r.errorUnsupportedIf(n.type in[c.MAT2,c.MAT3,c.MAT4],`AttributeType ${n.type} is not supported`);const o=this.json.bufferViews[n.bufferView],s=await this.getBuffer(o.buffer,e),i=R[n.type],a=C[n.componentType],u=i*a,f=o.byteStride||u;return{raw:s.buffer,byteStride:f,byteOffset:s.byteOffset+(o.byteOffset||0)+(n.byteOffset||0),entryCount:n.count,isDenselyPacked:f===u,componentCount:i,componentByteSize:a,componentType:n.componentType,min:n.min,max:n.max,normalized:!!n.normalized}}async getIndexData(t,e){if(null==t.indices)return null;const r=await this.getAccessor(t.indices,e);if(r.isDenselyPacked)switch(r.componentType){case a.k.UNSIGNED_BYTE:return new Uint8Array(r.raw,r.byteOffset,r.entryCount);case a.k.UNSIGNED_SHORT:return new Uint16Array(r.raw,r.byteOffset,r.entryCount);case a.k.UNSIGNED_INT:return new Uint32Array(r.raw,r.byteOffset,r.entryCount)}else switch(r.componentType){case a.k.UNSIGNED_BYTE:return Object(w.a)(this._wrapAccessor(O.l,r));case a.k.UNSIGNED_SHORT:return Object(w.a)(this._wrapAccessor(O.j,r));case a.k.UNSIGNED_INT:return Object(w.a)(this._wrapAccessor(O.k,r))}}async getPositionData(t,e){const r=this.errorContext;r.errorUnsupportedIf(null==t.attributes.POSITION,"No POSITION vertex data found.");const n=await this.getAccessor(t.attributes.POSITION,e);return r.errorUnsupportedIf(n.componentType!==a.k.FLOAT,"Expected type FLOAT for POSITION vertex attribute, but found "+L[n.componentType]),r.errorUnsupportedIf(3!==n.componentCount,"POSITION vertex attribute must have 3 components, but found "+n.componentCount.toFixed()),this._wrapAccessor(O.u,n)}async getNormalData(t,e){const r=this.errorContext;r.assert(null!=t.attributes.NORMAL,"No NORMAL vertex data found.");const n=await this.getAccessor(t.attributes.NORMAL,e);return r.errorUnsupportedIf(n.componentType!==a.k.FLOAT,"Expected type FLOAT for NORMAL vertex attribute, but found "+L[n.componentType]),r.errorUnsupportedIf(3!==n.componentCount,"NORMAL vertex attribute must have 3 components, but found "+n.componentCount.toFixed()),this._wrapAccessor(O.u,n)}async getTangentData(t,e){const r=this.errorContext;r.assert(null!=t.attributes.TANGENT,"No TANGENT vertex data found.");const n=await this.getAccessor(t.attributes.TANGENT,e);return r.errorUnsupportedIf(n.componentType!==a.k.FLOAT,"Expected type FLOAT for TANGENT vertex attribute, but found "+L[n.componentType]),r.errorUnsupportedIf(4!==n.componentCount,"TANGENT vertex attribute must have 4 components, but found "+n.componentCount.toFixed()),new O.C(n.raw,n.byteOffset,n.byteStride,n.byteOffset+n.byteStride*n.entryCount)}async getTextureCoordinates(t,e){const r=this.errorContext;r.assert(null!=t.attributes.TEXCOORD_0,"No TEXCOORD_0 vertex data found.");const n=await this.getAccessor(t.attributes.TEXCOORD_0,e);return r.errorUnsupportedIf(2!==n.componentCount,"TEXCOORD_0 vertex attribute must have 2 components, but found "+n.componentCount.toFixed()),n.componentType===a.k.FLOAT?this._wrapAccessor(O.m,n):(r.errorUnsupportedIf(!n.normalized,"Integer component types are only supported for a normalized accessor for TEXCOORD_0."),function(t){switch(t.componentType){case a.k.BYTE:return new O.q(t.raw,t.byteOffset,t.byteStride,t.byteOffset+t.byteStride*t.entryCount);case a.k.UNSIGNED_BYTE:return new O.t(t.raw,t.byteOffset,t.byteStride,t.byteOffset+t.byteStride*t.entryCount);case a.k.SHORT:return new O.o(t.raw,t.byteOffset,t.byteStride,t.byteOffset+t.byteStride*t.entryCount);case a.k.UNSIGNED_SHORT:return new O.r(t.raw,t.byteOffset,t.byteStride,t.byteOffset+t.byteStride*t.entryCount);case a.k.UNSIGNED_INT:return new O.s(t.raw,t.byteOffset,t.byteStride,t.byteOffset+t.byteStride*t.entryCount);case a.k.FLOAT:return new O.m(t.raw,t.byteOffset,t.byteStride,t.byteOffset+t.byteStride*t.entryCount);default:return void Object(d.a)(t.componentType)}}(n))}async getVertexColors(t,e){const r=this.errorContext;r.assert(null!=t.attributes.COLOR_0,"No COLOR_0 vertex data found.");const n=await this.getAccessor(t.attributes.COLOR_0,e);if(r.errorUnsupportedIf(4!==n.componentCount&&3!==n.componentCount,"COLOR_0 attribute must have 3 or 4 components, but found "+n.componentCount.toFixed()),4===n.componentCount){if(n.componentType===a.k.FLOAT)return this._wrapAccessor(O.C,n);if(n.componentType===a.k.UNSIGNED_BYTE)return this._wrapAccessor(O.J,n);if(n.componentType===a.k.UNSIGNED_SHORT)return this._wrapAccessor(O.H,n)}else if(3===n.componentCount){if(n.componentType===a.k.FLOAT)return this._wrapAccessor(O.u,n);if(n.componentType===a.k.UNSIGNED_BYTE)return this._wrapAccessor(O.B,n);if(n.componentType===a.k.UNSIGNED_SHORT)return this._wrapAccessor(O.z,n)}r.errorUnsupported("Unsupported component type for COLOR_0 attribute: "+L[n.componentType])}hasPositions(t){return void 0!==t.attributes.POSITION}hasNormals(t){return void 0!==t.attributes.NORMAL}hasVertexColors(t){return void 0!==t.attributes.COLOR_0}hasTextureCoordinates(t){return void 0!==t.attributes.TEXCOORD_0}hasTangents(t){return void 0!==t.attributes.TANGENT}async getMaterial(t,e,r){let n=this.materialCache.get(t.material);if(!n){const o=null!=t.material?j(this.json.materials[t.material]):j(),s=o.pbrMetallicRoughness,i=this.hasVertexColors(t),a=this.getTexture(s.baseColorTexture,e),c=this.getTexture(o.normalTexture,e),u=r?this.getTexture(o.occlusionTexture,e):null,f=r?this.getTexture(o.emissiveTexture,e):null,d=r?this.getTexture(s.metallicRoughnessTexture,e):null,l=null!=t.material?t.material:-1;n={alphaMode:o.alphaMode,alphaCutoff:o.alphaCutoff,color:s.baseColorFactor,doubleSided:!!o.doubleSided,colorTexture:await a,normalTexture:await c,name:o.name,id:l,occlusionTexture:await u,emissiveTexture:await f,emissiveFactor:o.emissiveFactor,metallicFactor:s.metallicFactor,roughnessFactor:s.roughnessFactor,metallicRoughnessTexture:await d,vertexColors:i,ESRI_externalColorMixMode:o.extras.ESRI_externalColorMixMode}}return n}async getTexture(t,e){if(!t)return null;this.errorContext.errorUnsupportedIf(0!==(t.texCoord||0),"Only TEXCOORD with index 0 is supported.");const r=t.index,n=this.errorContext,o=this.json.textures[r],s=(t=>({...S,...t}))(null!=o.sampler?this.json.samplers[o.sampler]:{});n.errorUnsupportedIf(null==o.source,"Source is expected to be defined for a texture.");const i=this.json.images[o.source],a=await this._loadTextureImageData(r,o,e);return Object(l.b)(this.textureCache,r,(()=>{const t=t=>33071===t||33648===t||10497===t,e=t=>(n.error(`Unexpected TextureSampler WrapMode: ${t}. Using default REPEAT(10497).`),10497);return{data:a,wrapS:t(s.wrapS)?s.wrapS:e(s.wrapS),wrapT:t(s.wrapT)?s.wrapT:e(s.wrapT),minFilter:s.minFilter,name:i.name,id:r}}))}getNodeTransform(t){if(void 0===t)return B;let e=this.nodeTransformCache.get(t);if(!e){const r=this.getNodeTransform(this._getNodeParent(t)),n=this.json.nodes[t];n.matrix?e=Object(b.m)(Object(o.d)(),r,n.matrix):n.translation||n.rotation||n.scale?(e=Object(o.c)(r),n.translation&&Object(b.j)(e,e,n.translation),n.rotation&&(U[3]=Object(m.b)(U,n.rotation),Object(b.e)(e,e,U[3],U)),n.scale&&Object(b.h)(e,e,n.scale)):e=r,this.nodeTransformCache.set(t,e)}return e}_wrapAccessor(t,e){return new t(e.raw,e.byteOffset,e.byteStride,e.byteOffset+e.byteStride*(e.entryCount-1)+e.componentByteSize*e.componentCount)}_resolveUri(t){return Object(p.C)(t,this.baseUri)}_getNodeParent(t){return this.nodeParentMap.get(t)}_checkVersionSupported(){const t=h.a.parse(this.json.asset.version,"glTF");N.validate(t)}_checkRequiredExtensionsSupported(){const t=this.json,e=this.errorContext;t.extensionsRequired&&0!==t.extensionsRequired.length&&e.errorUnsupported("gltf loader was not able to load unsupported feature. Required extensions: "+t.extensionsRequired.join(", "))}_computeNodeParents(){this.json.nodes.forEach(((t,e)=>{t.children&&t.children.forEach((t=>{this.nodeParentMap.set(t,e)}))}))}async _loadTextureImageData(t,e,r){const n=this.textureLoaders.get(t);if(n)return n;const o=this._createTextureLoader(e,r);return this.textureLoaders.set(t,o),o}async _createTextureLoader(t,e){const r=this.json.images[t.source];if(r.uri)return this.context.loadImage(this._resolveUri(r.uri),e);const n=this.errorContext;n.errorUnsupportedIf(null==r.bufferView,"Image bufferView must be defined."),n.errorUnsupportedIf(null==r.mimeType,"Image mimeType must be defined.");const o=this.json.bufferViews[r.bufferView],s=await this.getBuffer(o.buffer,e);return n.errorUnsupportedIf(null!=o.byteStride,"byteStride not supported for image buffer"),async function(t,e){return new Promise(((r,n)=>{const o=new Blob([t],{type:e}),s=URL.createObjectURL(o),i=new Image;i.addEventListener("load",(()=>{URL.revokeObjectURL(s),"decode"in i?i.decode().then((()=>r(i)),(()=>r(i))):r(i)})),i.addEventListener("error",(t=>{URL.revokeObjectURL(s),n(t)})),i.src=s}))}(new Uint8Array(s.buffer,s.byteOffset+(o.byteOffset||0),o.byteLength),r.mimeType)}}const N=new h.a(2,0,"glTF"),B=Object(b.x)(Object(o.d)(),Math.PI/2),U=Object(y.b)(),R={SCALAR:1,VEC2:2,VEC3:3,VEC4:4},C={[a.k.BYTE]:1,[a.k.UNSIGNED_BYTE]:1,[a.k.SHORT]:2,[a.k.UNSIGNED_SHORT]:2,[a.k.FLOAT]:4,[a.k.UNSIGNED_INT]:4};async function M(t){return new Promise(((e,r)=>{const n=new Blob([t]),o=new FileReader;o.onload=()=>{const t=o.result;e(JSON.parse(t))},o.onerror=t=>{r(t)},o.readAsText(n)}))}const L={5120:"BYTE",5121:"UNSIGNED_BYTE",5122:"SHORT",5123:"UNSIGNED_SHORT",5125:"UNSIGNED_INT",5126:"FLOAT"};let F=0;async function P(t,e,r={},s=!0){const i=await E.load(t,V,e,r),c="gltf_"+F++,u={lods:[],materials:new Map,textures:new Map,meta:k(i)},f=!(!i.json.asset.extras||"symbolResource"!==i.json.asset.extras.ESRI_type),d=new Map;await async function(t,e){const r=t.json,n=r.scenes[r.scene||0].nodes,o=n.length>1,s=[];for(const a of n){const t=r.nodes[a];s.push(i(a,0)),D(t)&&!o&&t.extensions.MSFT_lod.ids.forEach(((t,e)=>i(t,e+1)))}async function i(n,o){const a=r.nodes[n],c=t.getNodeTransform(n);if(V.warnUnsupportedIf(null!=a.weights,"Morph targets are not supported."),null!=a.mesh){const t=r.meshes[a.mesh];for(const r of t.primitives)s.push(e(r,c,o,t.name))}for(const t of a.children||[])s.push(i(t,o))}await Promise.all(s)}(i,(async(t,e,f,l)=>{var p;const h=null!=(p=d.get(f))?p:0;d.set(f,h+1);const b=void 0!==t.mode?t.mode:a.r.TRIANGLES,m=b===a.r.TRIANGLES||b===a.r.TRIANGLE_STRIP||b===a.r.TRIANGLE_FAN?b:null;if(Object(n.j)(m))return void V.warnUnsupported("Unsupported primitive mode ("+Y[b]+"). Skipping primitive.");if(!i.hasPositions(t))return void V.warn("Skipping primitive without POSITION vertex attribute.");const y=i.getPositionData(t,r),O=i.getMaterial(t,r,s),w=i.hasNormals(t)?i.getNormalData(t,r):null,_=i.hasTangents(t)?i.getTangentData(t,r):null,T=i.hasTextureCoordinates(t)?i.getTextureCoordinates(t,r):null,g=i.hasVertexColors(t)?i.getVertexColors(t,r):null,x=i.getIndexData(t,r),j={transform:Object(o.c)(e),attributes:{position:await y,normal:w?await w:null,texCoord0:T?await T:null,color:g?await g:null,tangent:_?await _:null},indices:await x,primitiveType:m,material:G(u,await O,c)};let S=null;Object(n.k)(u.meta)&&Object(n.k)(u.meta.ESRI_lod)&&"screenSpaceRadius"===u.meta.ESRI_lod.metric&&(S=u.meta.ESRI_lod.thresholds[f]),u.lods[f]=u.lods[f]||{parts:[],name:l,lodThreshold:S},u.lods[f].parts[h]=j}));for(const n of u.lods)n.parts=n.parts.filter((t=>!!t));return{model:u,meta:{isEsriSymbolResource:f,uri:i.uri},customMeta:{}}}function k(t){const e=t.json;let r=null;return e.nodes.forEach((t=>{const e=t.extras;Object(n.k)(e)&&(e.ESRI_proxyEllipsoid||e.ESRI_lod)&&(r=e)})),r}function D(t){return t.extensions&&t.extensions.MSFT_lod&&Array.isArray(t.extensions.MSFT_lod.ids)}function G(t,e,r){const n=e=>{const n=`${r}_tex_${e&&e.id}${e&&e.name?"_"+e.name:""}`;if(e&&!t.textures.has(n)){const r=function(t,e={}){return{data:t,parameters:{wrap:{s:a.B.REPEAT,t:a.B.REPEAT,...e.wrap},noUnpackFlip:!0,mipmap:!1,...e}}}(e.data,{wrap:{s:e.wrapS,t:e.wrapT},mipmap:z.some((t=>t===e.minFilter)),noUnpackFlip:!0});t.textures.set(n,r)}return n},o=`${r}_mat_${e.id}_${e.name}`;if(!t.materials.has(o)){const r=function(t={}){return{color:[1,1,1],opacity:1,alphaMode:"OPAQUE",alphaCutoff:.5,doubleSided:!1,castShadows:!0,receiveShadows:!0,receiveAmbientOcclustion:!0,textureColor:null,textureNormal:null,textureOcclusion:null,textureEmissive:null,textureMetallicRoughness:null,emissiveFactor:[0,0,0],metallicFactor:1,roughnessFactor:1,colorMixMode:"multiply",...t}}({color:[e.color[0],e.color[1],e.color[2]],opacity:e.color[3],alphaMode:e.alphaMode,alphaCutoff:e.alphaCutoff,doubleSided:e.doubleSided,colorMixMode:e.ESRI_externalColorMixMode,textureColor:e.colorTexture?n(e.colorTexture):void 0,textureNormal:e.normalTexture?n(e.normalTexture):void 0,textureOcclusion:e.occlusionTexture?n(e.occlusionTexture):void 0,textureEmissive:e.emissiveTexture?n(e.emissiveTexture):void 0,textureMetallicRoughness:e.metallicRoughnessTexture?n(e.metallicRoughnessTexture):void 0,emissiveFactor:[e.emissiveFactor[0],e.emissiveFactor[1],e.emissiveFactor[2]],metallicFactor:e.metallicFactor,roughnessFactor:e.roughnessFactor});t.materials.set(o,r)}return o}const V=new class{error(t){throw new s.a("gltf-loader-error",t)}errorUnsupported(t){throw new s.a("gltf-loader-unsupported-feature",t)}errorUnsupportedIf(t,e){t&&this.errorUnsupported(e)}assert(t,e){t||this.error(e)}warn(t){i.warn(t)}warnUnsupported(t){this.warn("[Unsupported Feature] "+t)}warnUnsupportedIf(t,e){t&&this.warnUnsupported(e)}},z=[a.z.LINEAR_MIPMAP_LINEAR,a.z.LINEAR_MIPMAP_NEAREST],Y=["POINTS","LINES","LINE_LOOP","LINE_STRIP","TRIANGLES","TRIANGLE_STRIP","TRIANGLE_FAN"]},1182:function(t,e,r){"use strict";r.d(e,"a",(function(){return o}));var n=r(743);Object.freeze({__proto__:null,copy:function(t,e,r){const n=t.typedBuffer,o=t.typedBufferStride,s=e.typedBuffer,i=e.typedBufferStride,a=r?r.count:e.count;let c=(r&&r.dstIndex?r.dstIndex:0)*o,u=(r&&r.srcIndex?r.srcIndex:0)*i;for(let f=0;f<a;++f){for(let t=0;t<9;++t)n[c+t]=s[u+t];c+=o,u+=i}}});Object.freeze({__proto__:null,copy:function(t,e,r){const n=t.typedBuffer,o=t.typedBufferStride,s=e.typedBuffer,i=e.typedBufferStride,a=r?r.count:e.count;let c=(r&&r.dstIndex?r.dstIndex:0)*o,u=(r&&r.srcIndex?r.srcIndex:0)*i;for(let f=0;f<a;++f){for(let t=0;t<16;++t)n[c+t]=s[u+t];c+=o,u+=i}}});r(1151),r(1014),r(883),r(1015);function o(t,e){return new t(new ArrayBuffer(e*t.ElementCount*Object(n.a)(t.ElementType)))}},257:function(t,e,r){"use strict";function n(){return[0,0,0,0]}function o(t){return[t[0],t[1],t[2],t[3]]}function s(t,e,r,n){return[t,e,r,n]}function i(t){const e=[0,0,0,0],r=Math.min(4,t.length);for(let n=0;n<r;++n)e[n]=t[n];return e}function a(t,e){return new Float64Array(t,e,4)}function c(){return[0,0,0,0]}function u(){return s(1,1,1,1)}function f(){return s(1,0,0,0)}function d(){return s(0,1,0,0)}function l(){return s(0,0,1,0)}function p(){return s(0,0,0,1)}r.d(e,"a",(function(){return b})),r.d(e,"b",(function(){return h})),r.d(e,"c",(function(){return a})),r.d(e,"d",(function(){return o})),r.d(e,"e",(function(){return n})),r.d(e,"f",(function(){return i})),r.d(e,"g",(function(){return s}));const h=[0,0,0,0],b=u(),m=f(),y=d(),O=l(),w=p();Object.freeze({__proto__:null,create:n,clone:o,fromValues:s,fromArray:i,createView:a,zeros:c,ones:u,unitX:f,unitY:d,unitZ:l,unitW:p,ZEROS:h,ONES:b,UNIT_X:m,UNIT_Y:y,UNIT_Z:O,UNIT_W:w})},288:function(t,e,r){"use strict";r.d(e,"a",(function(){return m})),r.d(e,"b",(function(){return y})),r.d(e,"c",(function(){return p})),r.d(e,"d",(function(){return h})),r.d(e,"e",(function(){return b}));var n=r(409),o=r(337),s=r(367),i=r(200),a=r(462),c=r(219),u=r(109),f=r(257);class d{constructor(t,e,r){this.itemByteSize=t,this.itemCreate=e,this._buffers=new Array,this._items=new Array,this._itemsPtr=0,this._itemsPerBuffer=Math.ceil(r/this.itemByteSize)}get(){0===this._itemsPtr&&Object(o.a)((()=>this._reset()));const t=Math.floor(this._itemsPtr/this._itemsPerBuffer);for(;this._buffers.length<=t;){const t=new ArrayBuffer(this._itemsPerBuffer*this.itemByteSize);for(let e=0;e<this._itemsPerBuffer;++e)this._items.push(this.itemCreate(t,e*this.itemByteSize));this._buffers.push(t)}return this._items[this._itemsPtr++]}_reset(){const t=2*(Math.floor(this._itemsPtr/this._itemsPerBuffer)+1);for(;this._buffers.length>t;)this._buffers.pop(),this._items.length=this._buffers.length*this._itemsPerBuffer;this._itemsPtr=0}static createVec2f64(t=l){return new d(16,c.c,t)}static createVec3f64(t=l){return new d(24,u.e,t)}static createVec4f64(t=l){return new d(32,f.c,t)}static createMat3f64(t=l){return new d(72,s.a,t)}static createMat4f64(t=l){return new d(128,i.b,t)}static createQuatf64(t=l){return new d(32,a.d,t)}get test(){return{size:this._buffers.length*this._itemsPerBuffer*this.itemByteSize}}}const l=4*n.a.KILOBYTES,p=d.createVec2f64(),h=d.createVec3f64(),b=d.createVec4f64(),m=(d.createMat3f64(),d.createMat4f64()),y=d.createQuatf64()},485:function(t,e,r){"use strict";r.d(e,"a",(function(){return o}));var n=r(337);class o{constructor(t){this.allocator=t,this._items=[],this._itemsPtr=0,this._grow()}get(){return 0===this._itemsPtr&&Object(n.a)((()=>this._reset())),this._itemsPtr===this._items.length&&this._grow(),this._items[this._itemsPtr++]}_reset(){const t=Math.min(3*Math.max(8,this._itemsPtr),this._itemsPtr+3*s);this._items.length=Math.min(t,this._items.length),this._itemsPtr=0}_grow(){for(let t=0;t<Math.max(8,Math.min(this._items.length,s));t++)this._items.push(this.allocator())}}const s=1024},499:function(t,e,r){"use strict";r.d(e,"a",(function(){return m})),r.d(e,"b",(function(){return b})),r.d(e,"c",(function(){return u})),r.d(e,"d",(function(){return c})),r.d(e,"e",(function(){return l})),r.d(e,"f",(function(){return d})),r.d(e,"g",(function(){return f})),r.d(e,"h",(function(){return p})),r.d(e,"i",(function(){return h}));var n=r(116),o=r(485),s=r(117),i=r(109),a=r(288);function c(t){return t?{origin:Object(i.d)(t.origin),vector:Object(i.d)(t.vector)}:{origin:Object(i.f)(),vector:Object(i.f)()}}function u(t,e=c()){return f(t.origin,t.vector,e)}function f(t,e,r=c()){return Object(s.k)(r.origin,t),Object(s.k)(r.vector,e),r}function d(t,e,r=c()){return Object(s.k)(r.origin,t),Object(s.j)(r.vector,e,t),r}function l(t,e){const r=Object(s.j)(a.d.get(),e,t.origin),o=Object(s.h)(t.vector,r),i=Object(s.h)(t.vector,t.vector),c=Object(n.e)(o/i,0,1),u=Object(s.j)(a.d.get(),Object(s.e)(a.d.get(),t.vector,c),r);return Object(s.h)(u,u)}function p(t,e,r){return Object(s.f)(r,t.origin,Object(s.e)(r,t.vector,e))}function h(t,e,r,o,i){const{vector:c,origin:u}=t,f=Object(s.j)(a.d.get(),e,u),d=Object(s.h)(c,f)/Object(s.t)(c);return Object(s.e)(i,c,Object(n.e)(d,r,o)),Object(s.f)(i,i,t.origin)}function b(t,e){if(y(t,function(t,e){const r=w.get();return r.origin=t,r.vector=e,r}(e.origin,e.direction),!1,O)){const{tA:e,pB:r,distance2:n}=O;if(e>=0&&e<=1)return n;if(e<0)return Object(s.l)(t.origin,r);if(e>1)return Object(s.l)(Object(s.f)(a.d.get(),t.origin,t.vector),r)}return null}function m(t,e,r){return!!y(t,e,!0,O)&&(Object(s.k)(r,O.pA),!0)}function y(t,e,r,o){const i=1e-6,c=t.origin,u=Object(s.f)(a.d.get(),c,t.vector),f=e.origin,d=Object(s.f)(a.d.get(),f,e.vector),l=a.d.get(),p=a.d.get();if(l[0]=c[0]-f[0],l[1]=c[1]-f[1],l[2]=c[2]-f[2],p[0]=d[0]-f[0],p[1]=d[1]-f[1],p[2]=d[2]-f[2],Math.abs(p[0])<i&&Math.abs(p[1])<i&&Math.abs(p[2])<i)return!1;const h=a.d.get();if(h[0]=u[0]-c[0],h[1]=u[1]-c[1],h[2]=u[2]-c[2],Math.abs(h[0])<i&&Math.abs(h[1])<i&&Math.abs(h[2])<i)return!1;const b=l[0]*p[0]+l[1]*p[1]+l[2]*p[2],m=p[0]*h[0]+p[1]*h[1]+p[2]*h[2],y=l[0]*h[0]+l[1]*h[1]+l[2]*h[2],O=p[0]*p[0]+p[1]*p[1]+p[2]*p[2],w=(h[0]*h[0]+h[1]*h[1]+h[2]*h[2])*O-m*m;if(Math.abs(w)<i)return!1;let _=(b*m-y*O)/w,T=(b+m*_)/O;r&&(_=Object(n.e)(_,0,1),T=Object(n.e)(T,0,1));const g=a.d.get(),x=a.d.get();return g[0]=c[0]+_*h[0],g[1]=c[1]+_*h[1],g[2]=c[2]+_*h[2],x[0]=f[0]+T*p[0],x[1]=f[1]+T*p[1],x[2]=f[2]+T*p[2],o.tA=_,o.tB=T,o.pA=g,o.pB=x,o.distance2=Object(s.l)(g,x),!0}const O={tA:0,tB:0,pA:Object(i.f)(),pB:Object(i.f)(),distance2:0},w=new o.a((()=>({origin:null,vector:null})))},562:function(t,e,r){"use strict";r.d(e,"a",(function(){return m})),r.d(e,"b",(function(){return b})),r.d(e,"c",(function(){return h})),r.d(e,"d",(function(){return l})),r.d(e,"e",(function(){return p}));var n=r(117),o=r(109),s=r(485),i=(r(151),r(499));r(288);new s.a(i.d),new s.a((()=>({p0:null,p1:null,p2:null})));const a=Object(o.f)(),c=Object(o.f)();let u=(()=>{const t=new Uint32Array(131072);for(let e=0;e<t.length;++e)t[e]=e;return t})();const f=new Uint16Array([0]),d=(()=>{const t=new Uint16Array(65536);for(let e=0;e<t.length;++e)t[e]=e;return t})();function l(t){if(1===t)return f;if(t<d.length)return new Uint16Array(d.buffer,0,t);if(t>u.length){const e=Math.max(2*u.length,t);u=new Uint32Array(e);for(let t=0;t<u.length;t++)u[t]=t}return new Uint32Array(u.buffer,0,t)}function p(t){if(1===t)return new Uint16Array(f);if(t<d.length)return new Uint16Array(d.slice(0,t));if(t>u.length){const e=new Uint32Array(t);for(let t=0;t<e.length;t++)e[t]=t;return e}return new Uint32Array(u.slice(0,t))}function h(t,e,r){if(!t)return!1;const{size:o,data:s}=t;Object(n.w)(r,0,0,0),Object(n.w)(_,0,0,0);let i=0,u=0;for(let p=0;p<e.length-2;p+=3){const t=e[p+0]*o,h=e[p+1]*o,b=e[p+2]*o;Object(n.w)(y,s[t+0],s[t+1],s[t+2]),Object(n.w)(O,s[h+0],s[h+1],s[h+2]),Object(n.w)(w,s[b+0],s[b+1],s[b+2]);const m=(f=y,d=O,l=w,Object(n.j)(a,d,f),Object(n.j)(c,l,f),Object(n.p)(Object(n.g)(a,a,c))/2);m?(Object(n.f)(y,y,O),Object(n.f)(y,y,w),Object(n.e)(y,y,1/3*m),Object(n.f)(r,r,y),i+=m):(Object(n.f)(_,_,y),Object(n.f)(_,_,O),Object(n.f)(_,_,w),u+=3)}var f,d,l;return(0!==u||0!==i)&&(0!==i?(Object(n.e)(r,r,1/i),!0):0!==u&&(Object(n.e)(r,_,1/u),!0))}function b(t,e,r){if(!t||!e)return!1;const{size:o,data:s}=t;Object(n.w)(r,0,0,0);let i=-1,a=0;for(let n=0;n<e.length;n++){const t=e[n]*o;i!==t&&(r[0]+=s[t+0],r[1]+=s[t+1],r[2]+=s[t+2],a++),i=t}return a>1&&Object(n.e)(r,r,1/a),a>0}function m(t,e,r,o){if(!t)return!1;const{size:s,data:i}=t;Object(n.w)(o,0,0,0),Object(n.w)(_,0,0,0);let a=0,c=0;const u=e?e.length-1:i.length/s-1,f=u+(r?2:0);for(let d=0;d<f;d+=2){const t=d<u?d:u,r=d<u?d+1:0,f=(e?e[t]:t)*s,l=(e?e[r]:r)*s;y[0]=i[f+0],y[1]=i[f+1],y[2]=i[f+2],O[0]=i[l+0],O[1]=i[l+1],O[2]=i[l+2],Object(n.e)(y,Object(n.f)(y,y,O),.5);const p=Object(n.n)(y,O);p>0?(Object(n.f)(o,o,Object(n.e)(y,y,p)),a+=p):(Object(n.f)(_,_,y),c++)}return 0!==a?(Object(n.e)(o,o,1/a),!0):0!==c&&(Object(n.e)(o,_,1/c),!0)}const y=Object(o.f)(),O=Object(o.f)(),w=Object(o.f)(),_=Object(o.f)()},719:function(t,e,r){"use strict";r.d(e,"a",(function(){return o}));var n=r(88);class o{constructor(t,e,r=""){this.major=t,this.minor=e,this._context=r}lessThan(t,e){return this.major<t||t===this.major&&this.minor<e}since(t,e){return!this.lessThan(t,e)}validate(t){if(this.major!==t.major){const e=this._context&&this._context+":",r=this._context&&this._context+" ";throw new n.a(e+"unsupported-version",`Required major ${r}version is '${this.major}', but got '\${version.major}.\${version.minor}'`,{version:t})}}clone(){return new o(this.major,this.minor,this._context)}static parse(t,e=""){const[r,s]=t.split("."),i=/^\s*\d+\s*$/;if(!r||!r.match||!r.match(i))throw new n.a((e&&e+":")+"invalid-version","Expected major version to be a number, but got '${version}'",{version:t});if(!s||!s.match||!s.match(i))throw new n.a((e&&e+":")+"invalid-version","Expected minor version to be a number, but got '${version}'",{version:t});const a=parseInt(r,10),c=parseInt(s,10);return new o(a,c,e)}}},743:function(t,e,r){"use strict";r.d(e,"a",(function(){return n})),r.d(e,"b",(function(){return s})),r.d(e,"c",(function(){return o})),r.d(e,"d",(function(){return i}));r(82);function n(t){switch(t){case"u8":case"i8":return 1;case"u16":case"i16":return 2;case"u32":case"i32":case"f32":return 4;case"f64":return 8;default:return}}function o(t){switch(t){case"u8":case"u16":case"u32":return!1;case"i8":case"i16":case"i32":case"f32":case"f64":return!0;default:return}}function s(t){switch(t){case"u8":case"u16":case"u32":case"i8":case"i16":case"i32":return!0;case"f32":case"f64":return!1;default:return}}function i(t){switch(t){case"u8":return 255;case"u16":return 65535;case"u32":return 4294967295;case"i8":return 127;case"i16":return 32767;case"i32":return 2147483647;case"f32":return 3402823e32;case"f64":return 179769e303;default:return}}}}]);
//# sourceMappingURL=24.aa157476.chunk.js.map