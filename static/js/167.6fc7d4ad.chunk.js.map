{"version":3,"sources":["Components/Layers/utils/layers.ts","Components/Layers/Layers.tsx","../node_modules/@stencil/core/internal/client lazy /^/.//.*/.entry/.js.*$/ include: //.entry/.js$/ exclude: //.system/.entry/.js$/ groupOptions: {} namespace object"],"names":["layerListItemCreated","event","item","layer","type","undefined","slider","document","createElement","setAttribute","Math","round","opacity","toString","id","addEventListener","parseInt","target","getAttribute","passive","panel","content","open","visible","watch","parent","filterLayers","value","layerList","operationalItems","forEach","layers","title","toLowerCase","includes","listMode","sublayer","length","querySelector","uid","parentElement","removeAttribute","Layers","props","ref","useRef","input","list","useEffect","console","log","active","LayerList","container","current","view","listItemCreatedFunction","visibleElements","statusIndicators","removeEventListener","destroy","className","clearable","placeholder","scale","icon","onClick","resetLayers","webpackEmptyAsyncContext","req","Promise","resolve","then","e","Error","code","keys","module","exports"],"mappings":"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","file":"static/js/167.6fc7d4ad.chunk.js","sourcesContent":["/* eslint-disable @typescript-eslint/explicit-module-boundary-types */\n/* eslint-disable @typescript-eslint/no-explicit-any */\n\nexport const layerListItemCreated = (event: any): void => {\n  const item = event.item;\n  if (item.layer.type != 'group' && item.layer.type != undefined) {\n    const slider = document.createElement('calcite-slider');\n    slider.setAttribute('min', '0');\n    slider.setAttribute('max', '100');\n    slider.setAttribute('step', '1');\n    slider.setAttribute('snap', '');\n    slider.setAttribute('min-label', '0%');\n    slider.setAttribute('max-label', '100%');\n    slider.setAttribute('label-handles', '');\n    slider.setAttribute('value', Math.round(item?.layer.opacity * 100).toString());\n    slider.setAttribute('data', item.layer.id);\n    slider.addEventListener(\n      'calciteSliderUpdate',\n      (event) => {\n        item.layer.opacity = Math.round(parseInt((event?.target as any)?.getAttribute('value'))) / 100;\n      },\n      { passive: true },\n    );\n    item.panel = {\n      content: [slider, 'legend'],\n      open: item.layer.visible,\n    };\n    item.layer.watch('visible', (visible: boolean) => {\n      item.panel.open = visible;\n      if (visible) {\n        if (item.layer.parent) {\n          if (item.layer.parent.type === 'group') {\n            item.layer.parent.visible = true;\n          }\n        }\n        if (item.layer.parent.parent) {\n          if (item.layer.parent.parent.type === 'group') {\n            item.layer.parent.parent.visible = true;\n          }\n        }\n      }\n    });\n  }\n};\nexport const filterLayers = (value: string, layerList: __esri.LayerList): void => {\n  layerList.operationalItems.forEach((item: __esri.ListItem) => {\n    if (item.layer.type === 'group') {\n      let open = false;\n      (item.layer as __esri.GroupLayer).layers.forEach((layer) => {\n        if (layer.title.toLowerCase().includes(value.toLowerCase())) {\n          layer.listMode = 'show';\n          open = true;\n        } else {\n          layer.listMode = 'hide';\n        }\n        //handle second level group layers\n        if (layer.type === 'group') {\n          (layer as __esri.GroupLayer).layers.forEach((sublayer) => {\n            if (sublayer.title.toLowerCase().includes(value.toLowerCase())) {\n              layer.listMode = 'show';\n              sublayer.listMode = 'show';\n              open = true;\n            } else {\n              sublayer.listMode = 'hide';\n            }\n          });\n        }\n      });\n      if (!value.length) {\n        item.open = false;\n        document\n          .querySelector(`#layerListDiv_${(item as any).uid}__title`)\n          ?.parentElement?.parentElement?.parentElement?.removeAttribute('hidden');\n      } else if (!open) {\n        item.open = false;\n        document\n          .querySelector(`#layerListDiv_${(item as any).uid}__title`)\n          ?.parentElement?.parentElement?.parentElement?.setAttribute('hidden', '');\n      } else {\n        item.open = true;\n        document\n          .querySelector(`#layerListDiv_${(item as any).uid}__title`)\n          ?.parentElement?.parentElement?.parentElement?.removeAttribute('hidden');\n      }\n    }\n  });\n};\n\nexport const resetLayers = (list: __esri.LayerList) => {\n  list?.operationalItems.forEach((item) => {\n    item.visible = item.title === 'Property';\n  });\n};\n","/* eslint-disable @typescript-eslint/no-explicit-any */\n/* eslint-disable @typescript-eslint/explicit-module-boundary-types */\nimport React, { useEffect, useRef } from 'react';\nimport LayerList from '@arcgis/core/widgets/LayerList';\nimport { filterLayers, layerListItemCreated, resetLayers } from './utils/layers';\nimport './Layers.scss';\nexport const Layers = (props: any) => {\n  const ref = useRef<HTMLDivElement>(null);\n  const input = useRef<HTMLCalciteInputElement>(null);\n  const list = useRef<__esri.LayerList>();\n  useEffect(() => {\n    console.log(props.active);\n  }, [props.active]);\n  useEffect(() => {\n    const layerList = new LayerList({\n      container: ref.current as HTMLDivElement,\n      view: props.view,\n      listItemCreatedFunction: layerListItemCreated,\n      visibleElements: {\n        statusIndicators: true,\n      },\n    });\n    list.current = layerList;\n\n    input.current?.addEventListener('calciteInputInput', (event: any) => {\n      filterLayers(event.target.value, layerList as LayerList);\n    });\n    return () => {\n      input.current?.removeEventListener('calciteInputInput', (event: any) => {\n        filterLayers(event.target.value, layerList as LayerList);\n      });\n      layerList && layerList.destroy();\n    };\n  }, [props.view]); // only after initial render\n  return (\n    <div className=\"panel\">\n      <div className=\"row sticky\">\n        <calcite-input\n          ref={input}\n          clearable\n          placeholder=\"Filter by layer name\"\n          scale=\"m\"\n          id=\"layerSearch\"\n        ></calcite-input>\n        <calcite-action\n          icon=\"viewHide\"\n          scale=\"m\"\n          onClick={() => {\n            resetLayers(list.current as __esri.LayerList);\n          }}\n        ></calcite-action>\n      </div>\n      <div ref={ref}></div>\n    </div>\n  );\n};\n\nexport default Layers;\n","function webpackEmptyAsyncContext(req) {\n\t// Here Promise.resolve().then() is used instead of new Promise() to prevent\n\t// uncaught exception popping up in devtools\n\treturn Promise.resolve().then(function() {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t});\n}\nwebpackEmptyAsyncContext.keys = function() { return []; };\nwebpackEmptyAsyncContext.resolve = webpackEmptyAsyncContext;\nmodule.exports = webpackEmptyAsyncContext;\nwebpackEmptyAsyncContext.id = 523;"],"sourceRoot":""}