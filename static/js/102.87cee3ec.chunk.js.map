{"version":3,"sources":["../node_modules/@arcgis/core/views/3d/webgl-engine/shaders/MeasurementArrowTechnique.js","../node_modules/@arcgis/core/views/3d/webgl-engine/materials/MeasurementArrowMaterial.js","../node_modules/@arcgis/core/views/3d/interactive/visualElements/MeasurementArrowVisualElement.js","../node_modules/@arcgis/core/views/3d/interactive/graphics/DirectLineMeasurement3D/DirectLineMeasurement3DView.js","../node_modules/@arcgis/core/chunks/vec4f32.js","../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/shading/VisualVariables.glsl.js","../node_modules/@arcgis/core/views/3d/interactive/visualElements/Object3DVisualElement.js","../node_modules/@arcgis/core/views/3d/webgl-engine/materials/VisualVariableMaterialParameters.js","../node_modules/@arcgis/core/views/3d/webgl-engine/shaders/RibbonLineTechnique.js","../node_modules/@arcgis/core/views/3d/webgl-engine/materials/RibbonLineMaterial.js","../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/shading/PiUtils.glsl.js","../node_modules/@arcgis/core/core/MapUtils.js","../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/shading/LineStipple.glsl.js","../node_modules/@arcgis/core/views/3d/layers/graphics/elevationAlignmentUtils.js","../node_modules/@arcgis/core/chunks/RibbonLine.glsl.js","../node_modules/@arcgis/core/views/3d/webgl-engine/lib/DefaultTextureUnits.js","../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/attributes/RibbonVertexPosition.glsl.js","../node_modules/@arcgis/core/views/3d/interactive/visualElements/RightAngleQuadVisualElement.js","../node_modules/@arcgis/core/views/3d/interactive/visualElements/support/Segment.js","../node_modules/@arcgis/core/core/quantityFormatUtils.js","../node_modules/@arcgis/core/chunks/MeasurementArrow.glsl.js","../node_modules/@arcgis/core/libs/maquette/h.js","../node_modules/@arcgis/core/views/overlay/LineOverlayItem.js","../node_modules/@arcgis/core/views/overlay/TextOverlayItem.js","../node_modules/@arcgis/core/views/3d/interactive/visualElements/LabelVisualElement.js"],"names":["h","t","constructor","r","e","super","initializeProgram","shader","get","build","n","rctx","generateSource","s","bindPass","p","bindProjectionMatrix","this","program","camera","projectionMatrix","setUniform1f","width","outlineSize","setUniform4fv","outlineColor","stripeLength","stripeEvenColor","stripeOddColor","bindDraw","bindView","initializePipeline","a","polygonOffset","configuration","polygonOffsetEnabled","factor","units","depthTest","func","depthWrite","m","colorWrite","l","f","d","o","arguments","i","prototype","u","g","techniqueConfig","getTechniqueConfig","params","dispose","getPassParameters","intersect","createBufferWriter","w","getGLMaterial","output","c","updateParameters","technique","techniqueRep","acquireAndReleaseExisting","material","beginSlot","bind","bindProgram","vec3f","vec2f","f32","v","q","b","x","C","vertexBufferLayout","allocate","createBuffer","elementCount","indices","length","write","vertexAttributes","data","console","warn","P","j","transformation","y","invTranspTransformation","L","position","M","normal","A","uv0","T","setVec","set","B","auxpos1","_parameters","_handles","_origin","_originTransform","_arrowCenter","_renderOccluded","_geometry","_stripeLength","_stripesEnabled","applyProps","_arrowMaterial","setParameterValues","renderOccluded","geometryChanged","attached","arrowStripeEvenColor","arrowStripeOddColor","createExternalResources","arrowOutlineColor","add","view","state","watch","viewChanged","destroyExternalResources","destroy","forEachExternalMaterial","createGeometries","startRenderSpace","endRenderSpace","_createArrowGeometry","addGeometry","renderCoordsHelper","push","type","eval","worldUpAtPosition","arrowSubdivisions","createPolylineGeometry","recreateGeometry","ready","_stage","computeScreenPixelSizeAt","arrowWidth","arrowOutlineWidth","arrowStripeLength","U","_params","_segmentVisualElement","_triangleVisualElement","_rightAngleQuad","_projectedGeodesicLine","_geodesicStartHint","_geodesicEndHint","_segmentLabel","_verticalLabel","_horizontalLabel","_segmentLabelDisplayedMeasurement","_startPosition","_endPosition","_cornerPosition","_startPositionAtSeaLevel","_endPositionAtSeaLevel","_viewMode","_geometryDirty","messages","_visualizedMeasurement","_actualVisualizedMeasurement","_visualElementOrientation","_triangleOrientationOverride","_triangleCollapseRatioThreshold","_geodesicDistanceThreshold","initialize","_initialize","Error","geometry","H","triangleLineWidth","color","triangleColor","V","I","geodesicProjectionLineWidth","geodesicProjectionLineColor","stipplePattern","guideStippleLengthPixels","stippleIntegerRepeats","guideLineWidth","fontSize","direcLabelFontSize","verticalLabelFontSize","horizontalLabelFontSize","dataObject","_update","_updateLabels","_updateSegmentStripeLength","async","_updateMessageBundle","_set","then","_getActualVisualElementsOrientation","actualVisualizedMeasurement","direct","horizontalLabel","segmentLabel","horizontal","vertical","verticalLabel","labels","visible","_updateGeometryAndViewMode","startPoint","endPoint","equals","toRenderCoords","_updateActualVisualizedMeasurement","_computeViewMode","getAltitude","G","spatialReference","R","anchor","segment","sampleLocation","_","Math","abs","previous","center","next","J","K","projectToRenderScreen","N","X","S","k","Y","W","setAltitude","setGeometryFromSegment","measurement","verticalDistance","horizontalDistance","euclideanDistance","geodesicDistance","directDistance","geodesicAngle","settings","unit","E","D","O","z","text","notifyChange","toUnit","value","metersPerDegree","Q","stripesEnabled","geodesicDistanceThreshold","F","min","triangleCollapseRatioThreshold","visualElementsOrientation","aboveGround","readOnly","laserLineGlowColor","laserLineGlowWidth","laserLineGlowFalloff","laserLineInnerColor","laserLineInnerWidth","laserLineGlobalAlpha","laserLineEnabled","handleColor","handleOpacity","handleRadius","triangleCornerSize","triangleSubdivisions","guideLineColor","labelDistance","cos","Float32Array","Object","freeze","__proto__","create","clone","fromValues","createView","zeros","ones","unitX","unitY","unitZ","unitW","ZEROS","ONES","UNIT_X","UNIT_Y","UNIT_Z","UNIT_W","vvInstancingEnabled","vvSize","vvColor","attributes","vertex","uniforms","code","constants","vvSizeEnabled","setUniform3fv","vvSizeMinSize","vvSizeMaxSize","vvSizeOffset","vvSizeFactor","vvColorEnabled","setUniform1fv","vvColorValues","vvColorColors","bindUniforms","bindUniformsWithOpacity","vvOpacityEnabled","vvOpacityValues","vvOpacityOpacities","bindUniformsForSymbols","vvSymbolAnchor","setUniformMatrix3fv","vvSymbolRotationMatrix","_resources","_transform","object","layer","commit","recreate","createResources","removeMany","geometries","removeAllGeometries","setVisible","addMany","destroyResources","isPickable","castShadow","remove","updateVisibility","Default","vvSizeValue","subdivisionFactor","auxpos2","size","sizeFeatureAttribute","colorFeatureAttribute","opacityFeatureAttribute","stippleTextureBind","stippleTextureRepository","OITEnabled","transparencyPassType","slicePlaneEnabled","sliceHighlightDisabled","sliceEnabledForVertexPrograms","stippleEnabled","stippleOffColorEnabled","stippleUVMaxEnabled","stippleIntegerRepeatsEnabled","roundCaps","roundJoins","vvOpacity","falloffEnabled","innerColorEnabled","multipassTerrainEnabled","cullAboveGround","release","bindOutputHighlight","setUniform2fv","inverseViewport","join","miterLimit","nearFar","pixelRatio","setUniform2f","fullViewport","swap","setUniform1i","stippleOffColor","setUniform4f","falloff","innerColor","innerWidth","bindUniformsWithOrigin","setPipelineState","blending","transparent","writeDepth","stencilWrite","sceneHasOcludees","stencilTest","occluder","_occluderPipelineTransparent","_occluderPipelineOpaque","_occluderPipelineMaskWrite","_occludeePipelineState","getPipelineState","pipeline","count","getLogger","_vertexAttributeLocations","layout","createLayout","isClosed","cap","intersectDrapedLineGeometry","intersectLineGeometry","options","selectionMode","screenToWorldRatio","Number","MAX_VALUE","error","has","point","Z","unprojectFromRenderScreen","$","fromPoints","eye","ee","te","ie","se","signedDistance","frustum","distance2","rayBeginPoint","rayEndPoint","closestLineSegmentPoint","computeAttachmentOrigin","vec4f","validateParameterValues","requiresTransparent","colorRequiresTransparent","targetSlot","_updateOccludeeState","hasOccludees","ensureParameters","vvFastUpdate","numJoinSubdivisions","numCapSubdivisions","buffer","stride","fragment","varyings","mode","requiresAlignment","applyElevationAlignmentBuffer","array","offset","verticalDistanceToGround","sampledElevation","geometryZWithOffset","NONE","UPDATE","RECREATE","calculateOffsetRenderUnits","featureExpressionInfoContext","meterUnitOffset","getElevation","extensions","include","float","DIFFUSE","NORMAL","EMISSION","OCCLUSION","METALLIC_ROUGHNESS","SSAO","SHADOW_MAP","_quadMaterial","_outlineMaterial","_maxSize","_position","_up","_right","_color","_outlineColor","_outlineSize","_size","_outlineRenderOccluded","_updateQuadMaterial","_updateOutlineMaterial","_updateTransform","quadMaterialParameters","outlineMaterialParameters","removeAll","_createQuadGeometry","_createOutlineGeometry","_quadGeometryData","exclusive","Uint16Array","createRenderGeometry","points","normals","renderSpatialReference","_start","_end","_pcpf","_project","_projectIn","measure","sqrt","Array","isArray","vnodeSelector","properties","children","toString","domNode","hasOwnProperty","startX","startY","endX","endY","render","height","left","top","x1","x2","y1","y2","calculateCoordinates","strokeStyle","lineCap","classes","styles","visibility","style","renderCanvas","lineWidth","beginPath","moveTo","lineTo","stroke","max","bottom","right","backgroundColor","textColor","textShadowColor","textShadowSize","_cssClasses","floor","padding","borderRadius","textShadow","font","replace","measureText","textAlign","textBaseline","roundedRect","fillStyle","fill","_renderTextShadow","fillText","lineJoin","arcTo","closePath","PI","sin","_textItem","_calloutItem","_showCallout","_showText","_text","_fontSize","_distance","_anchor","_updateLabelPosition","overlaps","textItem","overlay","_computeLabelPositionFromPoint","_computeLabelPositionFromCorner","_updatePosition","_computeLabelPositionFromSegment","renderToScreen","startPosition","endPosition","items","destroyed","start","end"],"mappings":"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","file":"static/js/102.87cee3ec.chunk.js","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{_ as r}from\"../../../../chunks/tslib.es6.js\";import{ReloadableShaderModule as e}from\"../core/shaderTechnique/ReloadableShaderModule.js\";import{ShaderTechnique as t}from\"../core/shaderTechnique/ShaderTechnique.js\";import{ShaderTechniqueConfiguration as o,parameter as i}from\"../core/shaderTechnique/ShaderTechniqueConfiguration.js\";import{Default3D as s}from\"../lib/DefaultVertexAttributeLocations.js\";import n from\"../../../webgl/Program.js\";import{makePipelineState as a,defaultDepthWriteParams as m,defaultColorWriteParams as l}from\"../../../webgl/renderState.js\";import{View as p}from\"../core/shaderLibrary/util/View.glsl.js\";import{M as f}from\"../../../../chunks/MeasurementArrow.glsl.js\";class h extends t{constructor(r,e){super(r,e)}initializeProgram(r){const e=h.shader.get().build();return new n(r.rctx,e.generateSource(\"vertex\"),e.generateSource(\"fragment\"),s)}bindPass(r,e,t){p.bindProjectionMatrix(this.program,t.camera.projectionMatrix),this.program.setUniform1f(\"width\",e.width),this.program.setUniform1f(\"outlineSize\",e.outlineSize),this.program.setUniform4fv(\"outlineColor\",e.outlineColor),this.program.setUniform1f(\"stripeLength\",e.stripeLength),this.program.setUniform4fv(\"stripeEvenColor\",e.stripeEvenColor),this.program.setUniform4fv(\"stripeOddColor\",e.stripeOddColor)}bindDraw(r){p.bindView(this.program,r)}initializePipeline(){return a({polygonOffset:this.configuration.polygonOffsetEnabled&&{factor:0,units:-4},depthTest:{func:513},depthWrite:m,colorWrite:l})}get primitiveType(){return 5}}h.shader=new e(f,(()=>import(\"./MeasurementArrow.glsl.js\")));class d extends o{constructor(){super(...arguments),this.polygonOffsetEnabled=!1}}r([i()],d.prototype,\"polygonOffsetEnabled\",void 0);export{h as MeasurementArrowTechnique,d as MeasurementArrowTechniqueConfiguration};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{c as e}from\"../../../../chunks/vec3f64.js\";import{s as t,n as s,f as r,c as i,k as n,i as o}from\"../../../../chunks/vec3.js\";import{newLayout as a}from\"../../support/buffer/InterleavedLayout.js\";import c from\"../lib/GLMaterial.js\";import{Material as u,materialParametersDefaults as f}from\"../lib/Material.js\";import{MeasurementArrowTechniqueConfiguration as l,MeasurementArrowTechnique as p}from\"../shaders/MeasurementArrowTechnique.js\";class h extends u{constructor(e){super(e,g),this.techniqueConfig=new l}getTechniqueConfig(){return this.techniqueConfig.polygonOffsetEnabled=this.params.polygonOffset,this.techniqueConfig}dispose(){}getPassParameters(){return this.params}intersect(){}createBufferWriter(){return new w}getGLMaterial(e){return 0===e.output?new m(e):void 0}}class m extends c{constructor(e){super(e),this.updateParameters()}updateParameters(){this.technique=this.techniqueRep.acquireAndReleaseExisting(p,this.material.getTechniqueConfig(),this.technique)}beginSlot(e){return 3===e}bind(e,t){e.bindProgram(this.technique.program),this.technique.bindPass(e,this.material.getPassParameters(),t)}}const g={width:32,outlineSize:.2,outlineColor:[1,.5,0,1],stripeLength:1,stripeEvenColor:[1,1,1,1],stripeOddColor:[1,.5,0,1],polygonOffset:!1,...f},d=a().vec3f(\"position\").vec3f(\"normal\").vec2f(\"uv0\").f32(\"auxpos1\"),v=e(),q=e(),b=e(),x=e(),C=e();class w{constructor(){this.vertexBufferLayout=d}allocate(e){return this.vertexBufferLayout.createBuffer(e)}elementCount(e){return 2*(e.indices.get(\"position\").length/2+1)}write(e,a,c,u){const f=a.vertexAttributes.get(\"position\").data,l=a.vertexAttributes.get(\"normal\").data,p=f.length/3,h=a&&a.indices&&a.indices.get(\"position\");h&&h.length!==2*(p-1)&&console.warn(\"MeasurementArrowMaterial does not support indices\");const m=v,g=q,d=b,w=x,P=C,j=e.transformation,y=e.invTranspTransformation,L=c.position,M=c.normal,A=c.uv0;let T=0;for(let v=0;v<p;++v){const e=3*v;if(t(m,f[e],f[e+1],f[e+2]),v<p-1){const e=3*(v+1);t(g,f[e],f[e+1],f[e+2]),t(P,l[e],l[e+1],l[e+2]),s(P,P),r(d,g,m),s(d,d),i(w,P,d),s(w,w)}const a=n(m,g);j&&y&&(o(m,m,j),o(g,g,j),o(w,w,y));const c=u+2*v,h=c+1;L.setVec(c,m),L.setVec(h,m),M.setVec(c,w),M.setVec(h,w),A.set(c,0,T),A.set(c,1,-1),A.set(h,0,T),A.set(h,1,1),v<p-1&&(T+=a)}const B=c.auxpos1;for(let t=0;t<2*p;++t)B.set(u+t,T)}}export{h as MeasurementArrowMaterial};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{isNone as e,isSome as r}from\"../../../../core/maybe.js\";import{c as t}from\"../../../../chunks/vec3f64.js\";import{f as s}from\"../../../../chunks/vec3.js\";import i from\"../../../../core/Handles.js\";import{a}from\"../../../../chunks/mat4f64.js\";import{sv3d as o}from\"../../support/stack.js\";import n from\"../../webgl-engine/lib/GeometryUtil.js\";import{Object3DVisualElement as h}from\"./Object3DVisualElement.js\";import{MeasurementArrowMaterial as l}from\"../../webgl-engine/materials/MeasurementArrowMaterial.js\";class d extends h{constructor(e){super(e),this._parameters=c,this._handles=null,this._origin=t(),this._originTransform=a(),this._arrowCenter=t(),this._renderOccluded=4,this._geometry=null,this._stripeLength=1,this._stripesEnabled=!0,this.applyProps(e)}get renderOccluded(){return this._renderOccluded}set renderOccluded(e){e!==this._renderOccluded&&(this._renderOccluded=e,this._arrowMaterial&&this._arrowMaterial.setParameterValues({renderOccluded:e}))}get geometry(){return this._geometry}set geometry(e){this._geometry=e,this.geometryChanged()}get stripeLength(){return this._stripeLength}set stripeLength(e){this._stripeLength=e,this.attached&&this._arrowMaterial.setParameterValues({stripeLength:this._stripeLength})}get stripesEnabled(){return this._stripesEnabled}set stripesEnabled(e){if(this._stripesEnabled=e,this.attached){const e=this._stripesEnabled?this._parameters.arrowStripeEvenColor:this._parameters.arrowStripeOddColor;this._arrowMaterial.setParameterValues({stripeEvenColor:e})}}createExternalResources(){const e=this._stripesEnabled?this._parameters.arrowStripeEvenColor:this._parameters.arrowStripeOddColor;this._arrowMaterial=new l({outlineColor:this._parameters.arrowOutlineColor,stripeEvenColor:e,stripeOddColor:this._parameters.arrowStripeOddColor,renderOccluded:this.renderOccluded,polygonOffset:!0}),this._handles=new i,this._handles.add(this.view.state.watch(\"camera\",(()=>{this.viewChanged()})))}destroyExternalResources(){this._arrowMaterial=null,this._handles.destroy(),this._handles=null}forEachExternalMaterial(e){e(this._arrowMaterial)}createGeometries(r){if(e(this._geometry)||e(this._geometry.startRenderSpace)||e(this._geometry.endRenderSpace))return;const t=this._createArrowGeometry(this._geometry.startRenderSpace,this._geometry.endRenderSpace,this._origin,this._geometry);r.addGeometry(t,this._arrowMaterial,this._originTransform),this.viewChanged()}_createArrowGeometry(e,r,t,i){const a=this.view.renderCoordsHelper,h=[],l=[],d=(e,r)=>{const i=o.get();s(i,e,t),h.push(i),l.push(r)};if(\"euclidean\"===i.type){i.eval(.5,this._arrowCenter);const t=o.get();a.worldUpAtPosition(this._arrowCenter,t),d(e,t),d(r,t)}else{i.eval(.5,this._arrowCenter);const e=this._parameters.arrowSubdivisions+1&-2;for(let r=0;r<e;++r){const t=r/(e-1),s=o.get(),n=o.get();i.eval(t,s),a.worldUpAtPosition(s,n),d(s,n)}}return n.createPolylineGeometry(h,l)}geometryChanged(){this.recreateGeometry()}viewChanged(){if(this.view.ready&&this.attached&&r(this._geometry)){const e=this.view._stage.camera.computeScreenPixelSizeAt(this._arrowCenter);this._arrowMaterial.setParameterValues({width:this._parameters.arrowWidth*e})}}}const c={arrowWidth:16,arrowOutlineColor:[1,.5,0,1],arrowOutlineWidth:.2,arrowStripeEvenColor:[1,1,1,1],arrowStripeOddColor:[1,.5,0,1],arrowStripeLength:16,arrowSubdivisions:128};export{d as MeasurementArrowVisualElement};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../../../chunks/tslib.es6.js\";import\"../../../../../core/has.js\";import{isNone as t,isSome as i}from\"../../../../../core/maybe.js\";import\"../../../../../core/Logger.js\";import\"../../../../../core/accessorSupport/ensureType.js\";import{property as s}from\"../../../../../core/accessorSupport/decorators/property.js\";import{subclass as a}from\"../../../../../core/accessorSupport/decorators/subclass.js\";import\"../../../../../core/urlUtils.js\";import\"../../../../../core/uuid.js\";import\"../../../../../portal/support/resourceExtension.js\";import n from\"../../../../../core/Accessor.js\";import{onLocaleChange as r}from\"../../../../../intl/locale.js\";import{sign as o,nextHighestPowerOfTen as l,deg2rad as h}from\"../../../../../core/mathUtils.js\";import{createRenderScreenPointArray3 as c,createRenderScreenPointArray as d}from\"../../../../../core/screenUtils.js\";import{fetchMessageBundle as u}from\"../../../../../intl/messages.js\";import\"../../../../../intl.js\";import{c as m}from\"../../../../../chunks/vec3f64.js\";import{g,a as _,b as p}from\"../../../../../chunks/vec3.js\";import v from\"../../../../../core/Handles.js\";import{getReferenceEllipsoid as b}from\"../../../../../geometry/projectionEllipsoid.js\";import{preferredImperialLengthUnit as L,convertUnit as w}from\"../../../../../core/unitUtils.js\";import{whenOnce as y}from\"../../../../../core/watchUtils.js\";import{formatDecimal as j,formatDMS as z,formatImperialLength as f,formatImperialVerticalLength as O,formatMetricLength as E,formatMetricVerticalLength as D}from\"../../../../../core/quantityFormatUtils.js\";import{g as S}from\"../../../../../chunks/vec2.js\";import{f as P}from\"../../../../../chunks/vec4f32.js\";import{createStipplePatternSimple as M}from\"../../../webgl-engine/materials/lineStippleUtils.js\";import{RightAngleQuadVisualElement as V}from\"../../visualElements/RightAngleQuadVisualElement.js\";import{screenSpaceTangent as A}from\"../../measurementTools/support/viewUtils.js\";import{LabelVisualElement as C,mirrorPosition as k}from\"../../visualElements/LabelVisualElement.js\";import{LineVisualElement as H}from\"../../visualElements/LineVisualElement.js\";import{GeodesicSegment as G,EuclideanSegment as R}from\"../../visualElements/support/Segment.js\";import{MeasurementArrowVisualElement as T}from\"../../visualElements/MeasurementArrowVisualElement.js\";let U=class extends n{constructor(e){super(e),this._params={...B},this._handles=new v,this._segmentVisualElement=null,this._triangleVisualElement=null,this._rightAngleQuad=null,this._projectedGeodesicLine=null,this._geodesicStartHint=null,this._geodesicEndHint=null,this._segmentLabel=null,this._verticalLabel=null,this._horizontalLabel=null,this._segmentLabelDisplayedMeasurement=\"euclidean\",this._startPosition=m(),this._endPosition=m(),this._cornerPosition=m(),this._startPositionAtSeaLevel=m(),this._endPositionAtSeaLevel=m(),this._viewMode=\"none\",this._geometryDirty=!0,this.state=\"pending\",this.messages=null,this._visualizedMeasurement=\"auto\",this._actualVisualizedMeasurement=\"euclidean\",this._visualElementOrientation=\"auto\",this._triangleOrientationOverride=null,this._triangleCollapseRatioThreshold=.03,this._geodesicDistanceThreshold=1e5}initialize(){this._handles.add(y(this.view,\"ready\",(()=>this._initialize()),!0))}_initialize(){switch(this.state){case\"ready\":throw new Error(\"invalid state\");case\"destroyed\":return}this._segmentVisualElement=new T({attached:!0,view:this.view,geometry:null,renderOccluded:4}),this._triangleVisualElement=new H({attached:!0,view:this.view,width:this._params.triangleLineWidth,color:this._params.triangleColor,renderOccluded:4}),this._rightAngleQuad=new V({attached:!0,view:this.view,color:I,renderOccluded:4}),this._projectedGeodesicLine=new H({attached:!0,view:this.view,width:this._params.geodesicProjectionLineWidth,color:this._params.geodesicProjectionLineColor,polygonOffset:!0,stipplePattern:M(this._params.guideStippleLengthPixels),stippleIntegerRepeats:!1,renderOccluded:4}),this._geodesicStartHint=new H({attached:!0,view:this.view,width:this._params.guideLineWidth,color:this._params.geodesicProjectionLineColor,polygonOffset:!0,stipplePattern:M(this._params.guideStippleLengthPixels),stippleIntegerRepeats:!1,renderOccluded:4}),this._geodesicEndHint=new H({attached:!0,view:this.view,width:this._params.guideLineWidth,color:this._params.geodesicProjectionLineColor,polygonOffset:!0,stipplePattern:M(this._params.guideStippleLengthPixels),stippleIntegerRepeats:!1,renderOccluded:4}),this._segmentLabel=new C({attached:!0,view:this.view,fontSize:this._params.direcLabelFontSize}),this._verticalLabel=new C({attached:!0,view:this.view,fontSize:this._params.verticalLabelFontSize}),this._horizontalLabel=new C({attached:!0,view:this.view,fontSize:this._params.horizontalLabelFontSize}),this._handles.add([this.dataObject.watch(\"visible\",(()=>this._update(!1)),!0),this.dataObject.watch(\"startPoint\",(()=>this._update()),!0),this.dataObject.watch(\"endPoint\",(()=>this._update()),!0),this.dataObject.watch(\"measurement\",(()=>this._update()),!0),this.dataObject.watch(\"settings.unit\",(()=>{this._updateLabels(),this._updateSegmentStripeLength()}),!0),this.view.state.watch(\"camera\",(()=>this._update()),!0),r((async()=>this._updateMessageBundle()))]),this._set(\"state\",\"ready\"),this._updateMessageBundle(),this._update()}async whenReady(){return y(this,\"ready\").then((()=>{}))}get ready(){return\"ready\"===this.state}get viewMode(){return this._viewMode}get visualizedMeasurement(){return this._visualizedMeasurement}set visualizedMeasurement(e){e!==this._visualizedMeasurement&&(this._visualizedMeasurement=e,this._update())}get actualVisualizedMeasurement(){return this._actualVisualizedMeasurement}get visualElementsOrientation(){return this._visualElementOrientation}set visualElementsOrientation(e){e!==this._visualElementOrientation&&(this._visualElementOrientation=e,this._update())}get allowVisualElementsOrientationChange(){return t(this._triangleOrientationOverride)}set allowVisualElementsOrientationChange(e){t(this._triangleOrientationOverride)!==e&&(t(this._triangleOrientationOverride)?this._triangleOrientationOverride=this._getActualVisualElementsOrientation():(this._triangleOrientationOverride=null,this._update()))}get triangleCollapseRatioThreshold(){return this._triangleCollapseRatioThreshold}set triangleCollapseRatioThreshold(e){this._triangleCollapseRatioThreshold=e,this._update()}get geodesicDistanceThreshold(){return this._geodesicDistanceThreshold}set geodesicDistanceThreshold(e){this._geodesicDistanceThreshold=e,this._update()}get segmentLabel(){return this._segmentLabel}get horizontalLabel(){return this._horizontalLabel}get verticalLabel(){return this._verticalLabel}get testData(){let e=null;const t=\"geodesic\"===this.actualVisualizedMeasurement;return e={direct:t?this.horizontalLabel:this.segmentLabel,horizontal:t?this.segmentLabel:this.horizontalLabel,vertical:this.verticalLabel},{labels:e,stripeLength:this._segmentVisualElement.stripeLength}}_update(e=!0){switch(this.state){case\"destroyed\":case\"pending\":return}const t=this.dataObject.visible;switch(this._geometryDirty=e,this._geometryDirty&&t&&(this._updateGeometryAndViewMode(),this._geometryDirty=!1),this._viewMode){case\"none\":this._segmentVisualElement.visible=!1,this._triangleVisualElement.visible=!1,this._rightAngleQuad.visible=!1,this._projectedGeodesicLine.visible=!1,this._geodesicStartHint.visible=!1,this._geodesicEndHint.visible=!1;break;case\"segment\":this._segmentVisualElement.visible=t,this._triangleVisualElement.visible=!1,this._rightAngleQuad.visible=!1,this._projectedGeodesicLine.visible=!1,this._geodesicStartHint.visible=!1,this._geodesicEndHint.visible=!1;break;case\"segment-and-triangle\":this._segmentVisualElement.visible=t,this._triangleVisualElement.visible=t,this._rightAngleQuad.visible=t,this._projectedGeodesicLine.visible=!1,this._geodesicStartHint.visible=!1,this._geodesicEndHint.visible=!1;break;case\"segment-and-projection\":this._segmentVisualElement.visible=t,this._projectedGeodesicLine.visible=!0,this._geodesicStartHint.visible=!0,this._geodesicEndHint.visible=!0}this._updateLabels()}destroy(){switch(this.state){case\"destroyed\":case\"pending\":return}this._handles.destroy(),this._segmentVisualElement.destroy(),this._segmentVisualElement=null,this._triangleVisualElement.destroy(),this._triangleVisualElement=null,this._rightAngleQuad.destroy(),this._rightAngleQuad=null,this._projectedGeodesicLine.destroy(),this._projectedGeodesicLine=null,this._geodesicStartHint.destroy(),this._geodesicStartHint=null,this._geodesicEndHint.destroy(),this._geodesicEndHint=null,this._segmentLabel.destroy(),this._segmentLabel=null,this._verticalLabel.destroy(),this._verticalLabel=null,this._horizontalLabel.destroy(),this._horizontalLabel=null,this.set(\"view\",null),this._set(\"state\",\"destroyed\")}_updateGeometryAndViewMode(){const e=this.view,i=e.renderCoordsHelper;if(t(this.dataObject.startPoint)||t(this.dataObject.endPoint)||this.dataObject.startPoint.equals(this.dataObject.endPoint))return this._viewMode=\"none\",void(this._actualVisualizedMeasurement=\"auto\"===this._visualizedMeasurement?\"euclidean\":this._visualizedMeasurement);i.toRenderCoords(this.dataObject.startPoint,this._startPosition),i.toRenderCoords(this.dataObject.endPoint,this._endPosition);const s=this._getActualVisualElementsOrientation(),a=this._updateActualVisualizedMeasurement();this._viewMode=this._computeViewMode(a);let n=this._startPosition,r=this._endPosition;const o=\"above-segment\"===s?1:-1,l=o*(i.getAltitude(r)-i.getAltitude(n));l<0&&(n=this._endPosition,r=this._startPosition);const h=\"geodesic\"===a?new G(this._startPosition,this._endPosition,i.spatialReference):new R(this._startPosition,this._endPosition);switch(this._segmentVisualElement.geometry=h,this._updateSegmentStripeLength(),this._segmentLabelDisplayedMeasurement=a,this._viewMode){case\"segment\":this._segmentLabel.anchor=\"above-segment\"===s?\"top\":\"bottom\",this._segmentLabel.geometry={type:\"segment\",segment:h,sampleLocation:\"center\"};break;case\"segment-and-triangle\":{const t=this._cornerPosition;i.worldUpAtPosition(n,t),_(t,t,o*Math.abs(l)),p(t,t,n),this._triangleVisualElement.geometry=[[[n[0],n[1],n[2]],[t[0],t[1],t[2]],[r[0],r[1],r[2]]]],this._rightAngleQuad.geometry={previous:n,center:t,next:r};const a=new R(n,t),c=new R(t,r),d=W(n,r,t,s,e.state.camera);this._segmentLabel.geometry={type:\"segment\",segment:h,sampleLocation:\"center\"},this._segmentLabel.anchor=d.segment,this._verticalLabel.geometry={type:\"segment\",segment:a,sampleLocation:\"center\"},this._verticalLabel.anchor=d.vertical,this._horizontalLabel.geometry={type:\"segment\",segment:c,sampleLocation:\"center\"},this._horizontalLabel.anchor=d.horizontal;break}case\"segment-and-projection\":{g(this._startPositionAtSeaLevel,this._startPosition),g(this._endPositionAtSeaLevel,this._endPosition),i.setAltitude(0,this._startPositionAtSeaLevel),i.setAltitude(0,this._endPositionAtSeaLevel);const e=new G(this._startPositionAtSeaLevel,this._endPositionAtSeaLevel,i.spatialReference);this._projectedGeodesicLine.setGeometryFromSegment(e),this._geodesicStartHint.setGeometryFromSegment(new R(this._startPositionAtSeaLevel,this._startPosition)),this._geodesicEndHint.setGeometryFromSegment(new R(this._endPositionAtSeaLevel,this._endPosition)),this._segmentLabel.geometry={type:\"segment\",segment:e,sampleLocation:\"center\"},this._segmentLabel.anchor=\"above-segment\"===s?\"top\":\"bottom\";break}}}_updateLabels(){switch(this.state){case\"pending\":case\"destroyed\":return}const e=this.messages,i=this.dataObject.measurement;if(t(i)||!e)return this._segmentLabel.visible=!1,this._horizontalLabel.visible=!1,void(this._verticalLabel.visible=!1);const s={verticalDistance:\"\",horizontalDistance:\"\",euclideanDistance:\"\",geodesicDistance:\"\"},a=i.directDistance,n=i.horizontalDistance,r=i.verticalDistance,o=i.geodesicDistance,l=i.geodesicAngle;switch(this.dataObject.settings.unit){case\"metric\":s.euclideanDistance=a&&E(e,a),s.horizontalDistance=n&&E(e,n),s.verticalDistance=r&&D(e,r),s.geodesicDistance=o&&E(e,o);break;case\"imperial\":s.euclideanDistance=a&&f(e,a),s.horizontalDistance=n&&f(e,n),s.verticalDistance=r&&O(e,r),s.geodesicDistance=o&&f(e,o);break;case\"degrees\":{const t=l&&j(e,l,\"degrees\");s.euclideanDistance=t,s.horizontalDistance=t,s.geodesicDistance=t;break}case\"degrees-minutes-seconds\":s.horizontalDistance=l&&z(l);break;default:{const t=this.dataObject.settings.unit;s.euclideanDistance=a&&j(e,a,t),s.horizontalDistance=n&&j(e,n,t),s.verticalDistance=r&&j(e,r,t),s.geodesicDistance=o&&j(e,o,t);break}}this._segmentLabel.text=\"euclidean\"===this._segmentLabelDisplayedMeasurement?s.euclideanDistance:s.geodesicDistance,this._horizontalLabel.text=s.horizontalDistance,this._verticalLabel.text=s.verticalDistance;const h=this.dataObject.visible;switch(this._viewMode){case\"none\":this._segmentLabel.visible=!1,this._horizontalLabel.visible=!1,this._verticalLabel.visible=!1;break;case\"segment\":this._segmentLabel.visible=h,this._horizontalLabel.visible=!1,this._verticalLabel.visible=!1;break;case\"segment-and-triangle\":this._segmentLabel.visible=h,this._horizontalLabel.visible=h,this._verticalLabel.visible=h;break;case\"segment-and-projection\":this._segmentLabel.visible=h,this._horizontalLabel.visible=!1,this._verticalLabel.visible=!1}this.notifyChange(\"segmentLabel\"),this.notifyChange(\"horizontalLabel\"),this.notifyChange(\"verticalLabel\")}_updateSegmentStripeLength(){const e=Q(this.view,this.dataObject);i(e)?(this._segmentVisualElement.stripeLength=e,this._segmentVisualElement.stripesEnabled=!0):this._segmentVisualElement.stripesEnabled=!1}_computeViewMode(e){const i=this.dataObject,s=i.measurement;if(\"geodesic\"===e){if(!x(i,this.geodesicDistanceThreshold))return\"segment\";if(F(this.view,this._startPosition)||F(this.view,this._endPosition))return\"segment-and-projection\"}if(t(s))return\"segment\";return Math.min(s.verticalDistance.value/s.horizontalDistance.value,s.horizontalDistance.value/s.verticalDistance.value)<this.triangleCollapseRatioThreshold?\"segment\":\"segment-and-triangle\"}_getActualVisualElementsOrientation(){return i(this._triangleOrientationOverride)?this._triangleOrientationOverride:\"auto\"===this.visualElementsOrientation?this.view.state.camera.aboveGround?\"above-segment\":\"below-segment\":this.visualElementsOrientation}_updateActualVisualizedMeasurement(){if(\"auto\"===this._visualizedMeasurement){this._actualVisualizedMeasurement=\"euclidean\";const e=this.dataObject.settings.unit;\"degrees\"!==e&&\"degrees-minutes-seconds\"!==e||(this._actualVisualizedMeasurement=\"geodesic\"),x(this.dataObject,this.geodesicDistanceThreshold)&&(this._actualVisualizedMeasurement=\"geodesic\")}else this._actualVisualizedMeasurement=this._visualizedMeasurement;return this._actualVisualizedMeasurement}_updateMessageBundle(){u(\"esri/core/t9n/Units\").then((e=>{this.messages=e,this.view&&this._updateLabels()}))}};function x(e,t){return i(e.measurement)&&e.measurement.horizontalDistance&&e.measurement.horizontalDistance.value>t}function F(e,t){if(!e.state)return!1;const i=e.state.camera,s=e.renderCoordsHelper,a=i.computeScreenPixelSizeAt(t);return s.getAltitude(t)/a>=10}function W(e,t,i,s,a){const n=J,r=K;a.projectToRenderScreen(i,n),a.projectToRenderScreen(t,r);const l={segment:\"bottom\",horizontal:\"top\",vertical:n[0]<r[0]?\"left\":\"right\"};{const s=N,n=X;if(A(e,i,s,a),A(e,t,n,a),S(s,n)>=q)l.segment=o(s[1])===o(n[1])?k(l.vertical):l.vertical;else{const e=Y;A(i,t,e,a),S(e,n)>=q&&(l.segment=o(e[0])===o(n[0])?k(l.horizontal):l.horizontal)}}if(\"below-segment\"===s){const e=e=>\"top\"===e?\"bottom\":\"top\";l.segment=e(l.segment),l.horizontal=e(l.horizontal),l.vertical=e(l.vertical)}return l}function Q(e,t){let s=null;if(i(t.measurement)){const e=t.measurement.directDistance;switch(t.settings.unit){case\"metric\":s=e&&e.toUnit(\"meters\");break;case\"imperial\":s=e&&e.toUnit(L(e.value,e.unit));break;case\"degrees\":case\"degrees-minutes-seconds\":{const e=t.measurement.geodesicAngle;s=e&&e.toUnit(\"degrees\");break}default:s=e&&e.toUnit(t.settings.unit)}}if(s){let t=1;return t=l(s.value/30),t*=\"degrees\"===s.unit?b(e.spatialReference).metersPerDegree:w(1,s.unit,\"meters\"),t}return null}e([s({readOnly:!0})],U.prototype,\"state\",void 0),e([s()],U.prototype,\"ready\",null),e([s()],U.prototype,\"messages\",void 0),e([s()],U.prototype,\"view\",void 0),e([s()],U.prototype,\"dataObject\",void 0),e([s()],U.prototype,\"viewMode\",null),e([s()],U.prototype,\"segmentLabel\",null),e([s()],U.prototype,\"horizontalLabel\",null),e([s()],U.prototype,\"verticalLabel\",null),U=e([a(\"esri.views.3d.interactive.graphics.DirectLineMeasurement3D.DirectLineMeasurement3DView\")],U);const I=P(1,.5,0,.75),B={laserLineGlowColor:[1,.5,0],laserLineGlowWidth:8,laserLineGlowFalloff:8,laserLineInnerColor:[1,1,1],laserLineInnerWidth:.75,laserLineGlobalAlpha:.75,laserLineEnabled:!0,handleColor:[1,.5,0],handleOpacity:.5,handleRadius:5,triangleColor:I,triangleLineWidth:3,triangleCornerSize:32,triangleSubdivisions:128,arrowWidth:16,arrowOutlineColor:[1,.5,0,1],arrowOutlineWidth:.2,arrowStripeEvenColor:[1,1,1,1],arrowStripeOddColor:[1,.5,0,1],arrowStripeLength:16,arrowSubdivisions:128,geodesicProjectionLineWidth:2,geodesicProjectionLineColor:I,guideLineWidth:2,guideLineColor:I,guideStippleLengthPixels:6,labelDistance:25,direcLabelFontSize:16,horizontalLabelFontSize:12,verticalLabelFontSize:12},q=Math.cos(h(12)),J=c(),K=c(),N=d(),X=d(),Y=d();export{U as DirectLineMeasurement3DView};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nfunction n(){return new Float32Array(4)}function r(n){const r=new Float32Array(4);return r[0]=n[0],r[1]=n[1],r[2]=n[2],r[3]=n[3],r}function t(n,r,t,a){const e=new Float32Array(4);return e[0]=n,e[1]=r,e[2]=t,e[3]=a,e}function a(n,r){return new Float32Array(n,r,4)}function e(){return n()}function u(){return t(1,1,1,1)}function o(){return t(1,0,0,0)}function s(){return t(0,1,0,0)}function c(){return t(0,0,1,0)}function i(){return t(0,0,0,1)}const f=e(),l=u(),_=o(),w=s(),N=c(),U=i();var y=Object.freeze({__proto__:null,create:n,clone:r,fromValues:t,createView:a,zeros:e,ones:u,unitX:o,unitY:s,unitZ:c,unitW:i,ZEROS:f,ONES:l,UNIT_X:_,UNIT_Y:w,UNIT_Z:N,UNIT_W:U});export{l as O,_ as U,f as Z,r as a,a as b,n as c,s as d,c as e,t as f,i as g,w as h,N as i,U as j,u as o,o as u,y as v,e as z};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{glsl as v}from\"../../shaderModules/interfaces.js\";function e(e,o){o.vvInstancingEnabled&&(o.vvSize||o.vvColor)&&e.attributes.add(\"instanceFeatureAttribute\",\"vec4\"),o.vvSize?(e.vertex.uniforms.add(\"vvSizeMinSize\",\"vec3\"),e.vertex.uniforms.add(\"vvSizeMaxSize\",\"vec3\"),e.vertex.uniforms.add(\"vvSizeOffset\",\"vec3\"),e.vertex.uniforms.add(\"vvSizeFactor\",\"vec3\"),e.vertex.uniforms.add(\"vvSymbolRotationMatrix\",\"mat3\"),e.vertex.uniforms.add(\"vvSymbolAnchor\",\"vec3\"),e.vertex.code.add(v`\n      vec3 vvScale(vec4 _featureAttribute) {\n        return clamp(vvSizeOffset + _featureAttribute.x * vvSizeFactor, vvSizeMinSize, vvSizeMaxSize);\n      }\n\n      vec4 vvTransformPosition(vec3 position, vec4 _featureAttribute) {\n        return vec4(vvSymbolRotationMatrix * ( vvScale(_featureAttribute) * (position + vvSymbolAnchor)), 1.0);\n      }\n    `),e.vertex.code.add(v`\n      const float eps = 1.192092896e-07;\n      vec4 vvTransformNormal(vec3 _normal, vec4 _featureAttribute) {\n        vec3 vvScale = clamp(vvSizeOffset + _featureAttribute.x * vvSizeFactor, vvSizeMinSize + eps, vvSizeMaxSize);\n        return vec4(vvSymbolRotationMatrix * _normal / vvScale, 1.0);\n      }\n\n      ${o.vvInstancingEnabled?v`\n      vec4 vvLocalNormal(vec3 _normal) {\n        return vvTransformNormal(_normal, instanceFeatureAttribute);\n      }\n\n      vec4 localPosition() {\n        return vvTransformPosition(position, instanceFeatureAttribute);\n      }`:\"\"}\n    `)):e.vertex.code.add(v`\n      vec4 localPosition() { return vec4(position, 1.0); }\n\n      vec4 vvLocalNormal(vec3 _normal) { return vec4(_normal, 1.0); }\n    `),o.vvColor?(e.vertex.constants.add(\"vvColorNumber\",\"int\",8),e.vertex.code.add(v`\n      uniform float vvColorValues[vvColorNumber];\n      uniform vec4 vvColorColors[vvColorNumber];\n\n      vec4 vvGetColor(vec4 featureAttribute, float values[vvColorNumber], vec4 colors[vvColorNumber]) {\n        float value = featureAttribute.y;\n        if (value <= values[0]) {\n          return colors[0];\n        }\n\n        for (int i = 1; i < vvColorNumber; ++i) {\n          if (values[i] >= value) {\n            float f = (value - values[i-1]) / (values[i] - values[i-1]);\n            return mix(colors[i-1], colors[i], f);\n          }\n        }\n        return colors[vvColorNumber - 1];\n      }\n\n      ${o.vvInstancingEnabled?v`\n      vec4 vvColor() {\n        return vvGetColor(instanceFeatureAttribute, vvColorValues, vvColorColors);\n      }`:\"\"}\n    `)):e.vertex.code.add(v`\n      vec4 vvColor() { return vec4(1.0); }\n    `)}!function(v){function e(v,e){e.vvSizeEnabled&&(v.setUniform3fv(\"vvSizeMinSize\",e.vvSizeMinSize),v.setUniform3fv(\"vvSizeMaxSize\",e.vvSizeMaxSize),v.setUniform3fv(\"vvSizeOffset\",e.vvSizeOffset),v.setUniform3fv(\"vvSizeFactor\",e.vvSizeFactor)),e.vvColorEnabled&&(v.setUniform1fv(\"vvColorValues\",e.vvColorValues),v.setUniform4fv(\"vvColorColors\",e.vvColorColors))}function o(v,o){e(v,o),o.vvOpacityEnabled&&(v.setUniform1fv(\"vvOpacityValues\",o.vvOpacityValues),v.setUniform1fv(\"vvOpacityOpacities\",o.vvOpacityOpacities))}function r(v,o){e(v,o),o.vvSizeEnabled&&(v.setUniform3fv(\"vvSymbolAnchor\",o.vvSymbolAnchor),v.setUniformMatrix3fv(\"vvSymbolRotationMatrix\",o.vvSymbolRotationMatrix))}v.bindUniforms=e,v.bindUniformsWithOpacity=o,v.bindUniformsForSymbols=r}(e||(e={}));export{e as VisualVariables};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{isSome as e,isNone as s}from\"../../../../core/maybe.js\";import{c as r}from\"../../../../chunks/mat4.js\";import{a as t}from\"../../../../chunks/mat4f64.js\";import{Object3D as o}from\"../../webgl-engine/lib/Object3D.js\";import{WebGLLayer as i}from\"../../webgl-engine/lib/WebGLLayer.js\";import{VisualElement as c}from\"./VisualElement.js\";class a extends c{constructor(e){super(e.view),this._resources=null,this._transform=t()}get object(){return e(this._resources)?this._resources.object:null}get transform(){return this._transform}set transform(s){r(this._transform,s),e(this._resources)&&(this._resources.object.transformation=this._transform,this._resources.layer.commit())}recreate(){this.attached&&this.createResources()}recreateGeometry(){if(s(this._resources))return;const e=this._resources.object,r=this.view._stage;r.removeMany(e.geometries),e.removeAllGeometries(),this.createGeometries(e),this.visible||e.setVisible(this.visible),r.addMany(e.geometries),this._resources.layer.commit()}createResources(){this.destroyResources();const e=this.view._stage;if(!e)return;const s=new i({isPickable:!1});e.add(s);const r=new o({castShadow:!1});r.transformation=this._transform,this.createExternalResources(),this.createGeometries(r),e.addMany(r.geometries),this.forEachExternalMaterial((s=>e.add(s))),e.add(r),s.add(r),s.commit(),this.visible||(r.setVisible(!1),s.commit()),this._resources={layer:s,object:r}}destroyResources(){const e=this.view._stage;!s(this._resources)&&e&&(e.remove(this._resources.object),e.remove(this._resources.layer),this.forEachExternalMaterial((s=>{e.remove(s),s.dispose()})),e.removeMany(this._resources.object.geometries),this._resources.object.dispose(),this.destroyExternalResources(),this._resources=null)}updateVisibility(e){s(this._resources)||(this._resources.object.setVisible(e),this._resources.layer.commit())}}export{a as Object3DVisualElement};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{a as v}from\"../../../../chunks/mat3f64.js\";import{f as a}from\"../../../../chunks/vec3f32.js\";var e;!function(e){e.Default={vvSizeEnabled:!1,vvSizeMinSize:a(1,1,1),vvSizeMaxSize:a(100,100,100),vvSizeOffset:a(0,0,0),vvSizeFactor:a(1,1,1),vvSizeValue:a(1,1,1),vvColorEnabled:!1,vvColorValues:[0,0,0,0,0,0,0,0],vvColorColors:[1,0,0,0,1,0,0,0,1,0,0,0,1,0,0,0,1,0,0,0,1,0,0,0,1,0,0,0,1,0,0,0],vvOpacityEnabled:!1,vvOpacityValues:[0,0,0,0,0,0,0,0],vvOpacityOpacities:[1,1,1,1,1,1,1,1],vvSymbolAnchor:[0,0,0],vvSymbolRotationMatrix:v()}}(e||(e={}));var o=e;export default o;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../../chunks/tslib.es6.js\";import{isSome as t,unwrap as i,unwrapOr as r}from\"../../../../core/maybe.js\";import{ReloadableShaderModule as o}from\"../core/shaderTechnique/ReloadableShaderModule.js\";import{ShaderTechnique as s}from\"../core/shaderTechnique/ShaderTechnique.js\";import{ShaderTechniqueConfiguration as n,parameter as l}from\"../core/shaderTechnique/ShaderTechniqueConfiguration.js\";import p from\"../../../webgl/Program.js\";import{makePipelineState as a,defaultDepthWriteParams as d,defaultColorWriteParams as c}from\"../../../webgl/renderState.js\";import{View as u}from\"../core/shaderLibrary/util/View.glsl.js\";import{Slice as h}from\"../core/shaderLibrary/Slice.glsl.js\";import{OutputHighlight as f}from\"../core/shaderLibrary/output/OutputHighlight.glsl.js\";import{VisualVariables as m}from\"../core/shaderLibrary/shading/VisualVariables.glsl.js\";import{blendingDefault as g,OITBlending as b,OITDepthTest as v,OITDepthWrite as y,OITPolygonOffset as T}from\"../lib/OrderIndependentTransparency.js\";import{bindMultipassTerrainUniforms as E}from\"../core/shaderLibrary/shading/MultipassTerrainTest.glsl.js\";import{stencilWriteMaskOn as P,stencilToolMaskBaseParams as O,stencilBaseAllZerosParams as x,depthCompareAlways as C,stencilToolTransparentOccluderParams as S,stencilWriteMaskOff as j,stencilToolMaskOccluderParams as W,depthCompareLess as R}from\"../lib/StencilUtils.js\";import{R as U}from\"../../../../chunks/RibbonLine.glsl.js\";const w={position:0,subdivisionFactor:1,uv0:2,auxpos1:3,auxpos2:4,size:6,sizeFeatureAttribute:6,color:5,colorFeatureAttribute:5,opacityFeatureAttribute:7};class z extends s{constructor(e,t){super(e,t),this.stipplePattern=null,this.stippleTextureBind=null,this.stippleTextureRepository=e.stippleTextureRepository}initializeProgram(e){const t=z.shader.get(),i=this.configuration,r=t.build({OITEnabled:0===i.transparencyPassType,output:i.output,slicePlaneEnabled:i.slicePlaneEnabled,sliceHighlightDisabled:!1,sliceEnabledForVertexPrograms:!1,stippleEnabled:i.stippleEnabled,stippleOffColorEnabled:i.stippleOffColorEnabled,stippleUVMaxEnabled:i.stippleIntegerRepeatsEnabled,stippleIntegerRepeatsEnabled:i.stippleIntegerRepeatsEnabled,roundCaps:i.roundCaps,roundJoins:i.roundJoins,vvColor:i.vvColor,vvSize:i.vvSize,vvInstancingEnabled:!0,vvOpacity:i.vvOpacity,falloffEnabled:i.falloffEnabled,innerColorEnabled:i.innerColorEnabled,multipassTerrainEnabled:i.multipassTerrainEnabled,cullAboveGround:i.cullAboveGround});return new p(e.rctx,r.generateSource(\"vertex\"),r.generateSource(\"fragment\"),w)}dispose(){super.dispose(),this.stippleTextureRepository.release(this.stipplePattern),this.stipplePattern=null,this.stippleTextureBind=null}bindPass(e,o,s){if(u.bindProjectionMatrix(this.program,s.camera.projectionMatrix),4===this.configuration.output&&f.bindOutputHighlight(e,this.program,s),s.multipassTerrainEnabled&&(this.program.setUniform2fv(\"inverseViewport\",s.inverseViewport),E(this.program,e,s)),this.program.setUniform1f(\"intrinsicWidth\",o.width),this.program.setUniform4fv(\"intrinsicColor\",o.color),this.program.setUniform1f(\"miterLimit\",\"miter\"!==o.join?0:o.miterLimit),this.program.setUniform2fv(\"cameraNearFar\",s.camera.nearFar),this.program.setUniform1f(\"pixelRatio\",s.camera.pixelRatio),this.program.setUniform2f(\"screenSize\",s.camera.fullViewport[2],s.camera.fullViewport[3]),m.bindUniformsWithOpacity(this.program,o),this.stipplePattern!==o.stipplePattern){const e=o.stipplePattern;this.stippleTextureBind=this.stippleTextureRepository.swap(this.stipplePattern,e),this.stipplePattern=e}if(this.configuration.stippleEnabled){const r=t(this.stippleTextureBind)?this.stippleTextureBind(e,0)*s.camera.pixelRatio:1;if(this.program.setUniform1i(\"stipplePatternTexture\",0),this.program.setUniform1f(\"stipplePatternPixelSizeInv\",1/r),this.configuration.stippleOffColorEnabled){const e=i(o.stippleOffColor);this.program.setUniform4f(\"stippleOffColor\",e[0],e[1],e[2],e.length>3?e[3]:1)}}this.configuration.falloffEnabled&&this.program.setUniform1f(\"falloff\",o.falloff),this.configuration.innerColorEnabled&&(this.program.setUniform4fv(\"innerColor\",r(o.innerColor,o.color)),this.program.setUniform1f(\"innerWidth\",o.innerWidth*s.camera.pixelRatio))}bindDraw(e){u.bindView(this.program,e),h.bindUniformsWithOrigin(this.program,this.configuration,e)}setPipelineState(e,t){const i=this.configuration,r=3===e,o=2===e;return a({blending:0===i.output||7===i.output?r?g:b(e):null,depthTest:{func:v(e)},depthWrite:r?!i.transparent&&i.writeDepth&&d:y(e),colorWrite:c,stencilWrite:i.sceneHasOcludees?P:null,stencilTest:i.sceneHasOcludees?t?O:x:null,polygonOffset:r||o?i.polygonOffset&&V:T})}initializePipeline(){const e=this.configuration,t=e.polygonOffset&&V;return e.occluder&&(this._occluderPipelineTransparent=a({blending:g,polygonOffset:t,depthTest:C,depthWrite:null,colorWrite:c,stencilWrite:null,stencilTest:S}),this._occluderPipelineOpaque=a({blending:g,polygonOffset:t,depthTest:C,depthWrite:null,colorWrite:c,stencilWrite:j,stencilTest:W}),this._occluderPipelineMaskWrite=a({blending:null,polygonOffset:t,depthTest:R,depthWrite:null,colorWrite:null,stencilWrite:P,stencilTest:O})),this._occludeePipelineState=this.setPipelineState(this.configuration.transparencyPassType,!0),this.setPipelineState(this.configuration.transparencyPassType,!1)}get primitiveType(){return 5}getPipelineState(e,t){return t?this._occludeePipelineState:this.configuration.occluder?11===e?this._occluderPipelineTransparent:10===e?this._occluderPipelineOpaque:this._occluderPipelineMaskWrite:this.pipeline}}z.shader=new o(U,(()=>import(\"./RibbonLine.glsl.js\")));const V={factor:0,units:-4};class I extends n{constructor(){super(...arguments),this.output=0,this.occluder=!1,this.slicePlaneEnabled=!1,this.transparent=!1,this.polygonOffset=!1,this.writeDepth=!1,this.stippleEnabled=!1,this.stippleOffColorEnabled=!1,this.stippleIntegerRepeatsEnabled=!1,this.roundCaps=!1,this.roundJoins=!1,this.vvSize=!1,this.vvColor=!1,this.vvOpacity=!1,this.falloffEnabled=!1,this.innerColorEnabled=!1,this.sceneHasOcludees=!1,this.transparencyPassType=3,this.multipassTerrainEnabled=!1,this.cullAboveGround=!0}}e([l({count:8})],I.prototype,\"output\",void 0),e([l()],I.prototype,\"occluder\",void 0),e([l()],I.prototype,\"slicePlaneEnabled\",void 0),e([l()],I.prototype,\"transparent\",void 0),e([l()],I.prototype,\"polygonOffset\",void 0),e([l()],I.prototype,\"writeDepth\",void 0),e([l()],I.prototype,\"stippleEnabled\",void 0),e([l()],I.prototype,\"stippleOffColorEnabled\",void 0),e([l()],I.prototype,\"stippleIntegerRepeatsEnabled\",void 0),e([l()],I.prototype,\"roundCaps\",void 0),e([l()],I.prototype,\"roundJoins\",void 0),e([l()],I.prototype,\"vvSize\",void 0),e([l()],I.prototype,\"vvColor\",void 0),e([l()],I.prototype,\"vvOpacity\",void 0),e([l()],I.prototype,\"falloffEnabled\",void 0),e([l()],I.prototype,\"innerColorEnabled\",void 0),e([l()],I.prototype,\"sceneHasOcludees\",void 0),e([l({count:4})],I.prototype,\"transparencyPassType\",void 0),e([l()],I.prototype,\"multipassTerrainEnabled\",void 0),e([l()],I.prototype,\"cullAboveGround\",void 0);export{z as RibbonLineTechnique,I as RibbonLineTechniqueConfiguration,w as ribbonVertexAttributeLocations};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{isSome as e}from\"../../../../core/maybe.js\";import t from\"../../../../core/Logger.js\";import{clamp as i}from\"../../../../core/mathUtils.js\";import{createRenderScreenPointArray3 as s}from\"../../../../core/screenUtils.js\";import{c as r}from\"../../../../chunks/vec3f64.js\";import{s as n,f as a,d as o,a as u,b as c,g as l,l as h,k as p,i as m}from\"../../../../chunks/vec3.js\";import{c as d}from\"../../../../chunks/vec2.js\";import{newLayout as f}from\"../../support/buffer/InterleavedLayout.js\";import{plane as v,lineSegment as g}from\"../../support/geometryUtils.js\";import{isTranslationMatrix as b}from\"../lib/Util.js\";import{computeAttachmentOriginLines as C}from\"../lib/geometryDataUtils.js\";import{isInstanceHidden as q}from\"./renderers/utils.js\";import S from\"../lib/GLMaterial.js\";import{Material as A,materialParametersDefaults as y}from\"../lib/Material.js\";import P from\"./VisualVariableMaterialParameters.js\";import{ribbonVertexAttributeLocations as x,RibbonLineTechniqueConfiguration as z,RibbonLineTechnique as E}from\"../shaders/RibbonLineTechnique.js\";const j=t.getLogger(\"esri.views.3d.webgl-engine.materials.RibbonLineMaterial\");class O extends A{constructor(e){super(e,R),this._vertexAttributeLocations=x,this.techniqueConfig=new z,this.layout=this.createLayout()}isClosed(e,t){return M(this.params,e,t)}dispose(){}getPassParameters(){return this.params}getTechniqueConfig(t,i){this.techniqueConfig.output=t;const s=e(this.params.stipplePattern);return this.techniqueConfig.stippleEnabled=s,this.techniqueConfig.stippleIntegerRepeatsEnabled=s&&this.params.stippleIntegerRepeats,this.techniqueConfig.stippleOffColorEnabled=s&&e(this.params.stippleOffColor),this.techniqueConfig.slicePlaneEnabled=this.params.slicePlaneEnabled,this.techniqueConfig.sceneHasOcludees=this.params.sceneHasOcludees,this.techniqueConfig.roundJoins=\"round\"===this.params.join,this.techniqueConfig.roundCaps=\"round\"===this.params.cap,this.techniqueConfig.transparent=this.params.transparent,this.techniqueConfig.polygonOffset=this.params.polygonOffset,this.techniqueConfig.writeDepth=this.params.writeDepth,this.techniqueConfig.vvColor=this.params.vvColorEnabled,this.techniqueConfig.vvOpacity=this.params.vvOpacityEnabled,this.techniqueConfig.vvSize=this.params.vvSizeEnabled,this.techniqueConfig.innerColorEnabled=this.params.innerWidth>0&&e(this.params.innerColor),this.techniqueConfig.falloffEnabled=this.params.falloff>0,this.techniqueConfig.occluder=8===this.params.renderOccluded,this.techniqueConfig.transparencyPassType=i?i.transparencyPassType:3,this.techniqueConfig.multipassTerrainEnabled=!!i&&i.multipassTerrainEnabled,this.techniqueConfig.cullAboveGround=!i||i.cullAboveGround,this.techniqueConfig}intersect(e,t,i,s,r,n,a,o,u){u?this.intersectDrapedLineGeometry(e,s,n,a):this.intersectLineGeometry(e,t,i,s,this.params.width,a)}intersectDrapedLineGeometry(e,t,s,r){if(!t.options.selectionMode)return;const n=e.vertexAttributes.get(\"position\").data,a=e.vertexAttributes.get(\"size\");let o=this.params.width;if(this.params.vvSizeEnabled){const t=e.vertexAttributes.get(\"sizeFeatureAttribute\").data[0];o*=i(this.params.vvSizeOffset[0]+t*this.params.vvSizeFactor[0],this.params.vvSizeMinSize[0],this.params.vvSizeMaxSize[0])}else a&&(o*=a.data[0]);const u=s[0],c=s[1],l=(o/2+4)*e.screenToWorldRatio;let h=Number.MAX_VALUE;for(let p=0;p<n.length-5;p+=3){const e=n[p],t=n[p+1],s=u-e,r=c-t,a=n[p+3]-e,o=n[p+4]-t,l=i((a*s+o*r)/(a*a+o*o),0,1),m=a*l-s,d=o*l-r,f=m*m+d*d;f<h&&(h=f)}h<l*l&&r()}intersectLineGeometry(e,t,s,r,m,f){if(!r.options.selectionMode||q(t))return;if(!b(s))return void j.error(\"intersection assumes a translation-only matrix\");const C=e.vertexAttributes,S=C.get(\"position\").data;let A=m;if(this.params.vvSizeEnabled){const e=C.get(\"sizeFeatureAttribute\").data[0];A*=i(this.params.vvSizeOffset[0]+e*this.params.vvSizeFactor[0],this.params.vvSizeMinSize[0],this.params.vvSizeMaxSize[0])}else C.has(\"size\")&&(A*=C.get(\"size\").data[0]);const y=r.camera,P=_;d(P,r.point);const x=A*y.pixelRatio/2+4*y.pixelRatio;n(Z[0],P[0]-x,P[1]+x,0),n(Z[1],P[0]+x,P[1]+x,0),n(Z[2],P[0]+x,P[1]-x,0),n(Z[3],P[0]-x,P[1]-x,0);for(let i=0;i<4;i++)if(!y.unprojectFromRenderScreen(Z[i],$[i]))return;v.fromPoints(y.eye,$[0],$[1],ee),v.fromPoints(y.eye,$[1],$[2],te),v.fromPoints(y.eye,$[2],$[3],ie),v.fromPoints(y.eye,$[3],$[0],se);let z=Number.MAX_VALUE;const E=T(this.params,C,e.indices)?S.length-2:S.length-5;for(let i=0;i<E;i+=3){G[0]=S[i]+s[12],G[1]=S[i+1]+s[13],G[2]=S[i+2]+s[14];const e=(i+3)%S.length;if(V[0]=S[e]+s[12],V[1]=S[e+1]+s[13],V[2]=S[e+2]+s[14],v.signedDistance(ee,G)<0&&v.signedDistance(ee,V)<0||v.signedDistance(te,G)<0&&v.signedDistance(te,V)<0||v.signedDistance(ie,G)<0&&v.signedDistance(ie,V)<0||v.signedDistance(se,G)<0&&v.signedDistance(se,V)<0)continue;if(y.projectToRenderScreen(G,k),y.projectToRenderScreen(V,H),k[2]<0&&H[2]>0){a(B,G,V);const e=y.frustum,t=-v.signedDistance(e[4],G)/o(B,v.normal(e[4]));u(B,B,t),c(G,G,B),y.projectToRenderScreen(G,k)}else if(k[2]>0&&H[2]<0){a(B,V,G);const e=y.frustum,t=-v.signedDistance(e[4],V)/o(B,v.normal(e[4]));u(B,B,t),c(V,V,B),y.projectToRenderScreen(V,H)}else if(k[2]<0&&H[2]<0)continue;k[2]=0,H[2]=0;const t=g.distance2(g.fromPoints(k,H,N),P);t<z&&(z=t,l(W,G),l(I,V))}const O=r.rayBeginPoint,L=r.rayEndPoint;if(z<x*x){let e=Number.MAX_VALUE;if(g.closestLineSegmentPoint(g.fromPoints(W,I,N),g.fromPoints(O,L,X),J)){a(J,J,O);const t=h(J);u(J,J,1/t),e=t/p(O,L)}f(e,J)}}computeAttachmentOrigin(e,t){const i=e.vertexAttributes;if(!i)return null;const s=e.indices,r=i.get(\"position\");return C(r,s?s.get(\"position\"):null,s&&T(this.params,i,s),t)}createLayout(){const e=f().vec3f(\"position\").f32(\"subdivisionFactor\").vec2f(\"uv0\").vec3f(\"auxpos1\").vec3f(\"auxpos2\");return this.params.vvSizeEnabled?e.f32(\"sizeFeatureAttribute\"):e.f32(\"size\"),this.params.vvColorEnabled?e.f32(\"colorFeatureAttribute\"):e.vec4f(\"color\"),this.params.vvOpacityEnabled&&e.f32(\"opacityFeatureAttribute\"),e}createBufferWriter(){return new D(this.layout,this.params)}getGLMaterial(e){return 0===e.output||7===e.output||4===e.output||1===e.output?new L(e):void 0}validateParameterValues(e){\"miter\"!==e.join&&(e.miterLimit=0),this.requiresTransparent(e)&&(e.transparent=!0)}requiresTransparent(e){return!!((e.color&&e.color[3])<1||e.innerWidth>0&&this.colorRequiresTransparent(e.innerColor)||e.stipplePattern&&this.colorRequiresTransparent(e.stippleOffColor)||e.falloff>0)}colorRequiresTransparent(t){return e(t)&&t[3]<1&&t[3]>0}}class L extends S{constructor(e){super(e),this.updateParameters()}updateParameters(e){this.technique=this.techniqueRep.acquireAndReleaseExisting(E,this.material.getTechniqueConfig(this.output,e),this.technique)}beginSlot(e){return this.technique.configuration.occluder?3===e||10===e||11===e:0===this.output||7===this.output?(this.targetSlot=this.technique.configuration.writeDepth?5:8,e===this.targetSlot):3===e}_updateOccludeeState(e){e.hasOccludees!==this.material.params.sceneHasOcludees&&this.material.setParameterValues({sceneHasOcludees:e.hasOccludees})}ensureParameters(e){0!==this.output&&7!==this.output||this._updateOccludeeState(e),this.updateParameters(e)}bind(e,t){e.bindProgram(this.technique.program),this.technique.bindPass(e,this.material.getPassParameters(),t)}getPipelineState(e,t){return this.technique.getPipelineState(e,t)}}const R={width:0,color:[1,1,1,1],join:\"miter\",cap:\"butt\",miterLimit:5,writeDepth:!0,polygonOffset:!1,stipplePattern:null,stippleIntegerRepeats:!1,stippleOffColor:null,slicePlaneEnabled:!1,vvFastUpdate:!1,transparent:!1,isClosed:!1,falloff:0,innerWidth:0,innerColor:null,sceneHasOcludees:!1,...y,...P.Default};class D{constructor(e,t){switch(this.params=t,this.numJoinSubdivisions=0,this.vertexBufferLayout=e,this.params.join){case\"miter\":case\"bevel\":this.numJoinSubdivisions=t.stipplePattern?1:0;break;case\"round\":this.numJoinSubdivisions=U}}isClosed(e){return T(this.params,e.vertexAttributes,e.indices)}numCapSubdivisions(e){if(this.isClosed(e))return 0;switch(this.params.cap){case\"butt\":return 0;case\"square\":return 1;case\"round\":return F}}allocate(e){return this.vertexBufferLayout.createBuffer(e)}elementCount(e){const t=2*this.numCapSubdivisions(e)+2,i=e.indices.get(\"position\").length/2+1,s=this.isClosed(e);let r=s?2:2*t;const n=s?0:1,a=s?i:i-1;if(e.vertexAttributes.has(\"subdivisions\")){const t=e.vertexAttributes.get(\"subdivisions\").data;for(let e=n;e<a;++e){r+=4+2*t[e]}}else{r+=(a-n)*(2*this.numJoinSubdivisions+4)}return r+=2,r}write(e,t,i,s){const r=K,a=Q,o=Y,u=t.vertexAttributes.get(\"position\").data,c=t.indices&&t.indices.get(\"position\"),h=this.numCapSubdivisions(t);c&&c.length!==2*(u.length/3-1)&&console.warn(\"RibbonLineMaterial does not support indices\");let p=null;t.vertexAttributes.has(\"subdivisions\")&&(p=t.vertexAttributes.get(\"subdivisions\").data);let d=1,f=0;this.params.vvSizeEnabled?f=t.vertexAttributes.get(\"sizeFeatureAttribute\").data[0]:t.vertexAttributes.has(\"size\")&&(d=t.vertexAttributes.get(\"size\").data[0]);let v=[1,1,1,1],g=0;this.params.vvColorEnabled?g=t.vertexAttributes.get(\"colorFeatureAttribute\").data[0]:t.vertexAttributes.has(\"color\")&&(v=t.vertexAttributes.get(\"color\").data);let b=0;this.params.vvOpacityEnabled&&(b=t.vertexAttributes.get(\"opacityFeatureAttribute\").data[0]);const C=u.length/3,q=e.transformation,S=new Float32Array(i.buffer),A=this.vertexBufferLayout.stride/4;let y=s*A;const P=y,x=(e,t,i,s,r,n,a)=>{if(S[y++]=t[0],S[y++]=t[1],S[y++]=t[2],S[y++]=s,S[y++]=r,S[y++]=n,S[y++]=e[0],S[y++]=e[1],S[y++]=e[2],S[y++]=i[0],S[y++]=i[1],S[y++]=i[2],this.params.vvSizeEnabled?S[y++]=f:S[y++]=d,this.params.vvColorEnabled)S[y++]=g;else{const e=Math.min(4*a,v.length-4);S[y++]=v[e+0],S[y++]=v[e+1],S[y++]=v[e+2],S[y++]=v[e+3]}this.params.vvOpacityEnabled&&(S[y++]=b)};y+=A,n(a,u[0],u[1],u[2]),q&&m(a,a,q);const z=this.isClosed(t);if(z){const e=u.length-3;n(r,u[e],u[e+1],u[e+2]),q&&m(r,r,q)}else{l(r,a),n(o,u[3],u[4],u[5]),q&&m(o,o,q);for(let e=0;e<h;++e){const t=1-e/h;x(r,a,o,t,1,-4,0),x(r,a,o,t,1,4,0)}x(r,a,o,0,0,-4,0),x(r,a,o,0,0,4,0),l(r,a),l(a,o)}const E=z?C:C-1;for(let j=z?0:1;j<E;j++){const e=(j+1)%C*3;n(o,u[e+0],u[e+1],u[e+2]),q&&m(o,o,q),x(r,a,o,0,1,-1,j),x(r,a,o,0,1,1,j);const t=p?p[j]:this.numJoinSubdivisions;for(let i=0;i<t;++i){const e=(i+1)/(t+1);x(r,a,o,e,1,-2,j),x(r,a,o,e,1,2,j)}x(r,a,o,1,0,-2,j),x(r,a,o,1,0,2,j),l(r,a),l(a,o)}if(z){y=w(S,P+A,S,y,2*A)}else{x(r,a,o,0,1,-5,E),x(r,a,o,0,1,5,E);for(let e=0;e<h;++e){const t=(e+1)/h;x(r,a,o,t,1,-5,E),x(r,a,o,t,1,5,E)}}w(S,P+A,S,P,A);y=w(S,y-A,S,y,A)}}function w(e,t,i,s,r){for(let n=0;n<r;n++)i[s++]=e[t++];return s}function T(e,t,i){return M(e,t.get(\"position\").data,i?i.get(\"position\"):null)}function M(e,t,i){return!!e.isClosed&&(i?i.length>2:t.length>6)}const F=3,U=1,G=r(),V=r(),B=r(),J=r(),_=r(),k=s(),H=s(),W=r(),I=r(),N=g.create(),X=g.create(),K=r(),Q=r(),Y=r(),Z=[s(),s(),s(),s()],$=[r(),r(),r(),r()],ee=v.create(),te=v.create(),ie=v.create(),se=v.create();export{O as RibbonLineMaterial};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{glsl as o}from\"../../shaderModules/interfaces.js\";function t(t){t.vertex.code.add(o`\n    const float PI = 3.141592653589793;\n  `),t.fragment.code.add(o`\n    const float PI = 3.141592653589793;\n    const float LIGHT_NORMALIZATION = 1.0 / PI;\n    const float INV_PI = 0.3183098861837907;\n    const float HALF_PI = 1.570796326794897;\n    `)}export{t as PiUtils};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nfunction n(n,r){for(const[o,t]of n)if(r(t,o))return!0;return!1}function r(n,r){for(const[o,t]of n)if(r(t,o))return t;return null}export{r as findInMap,n as someMap};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{glsl as e}from\"../../shaderModules/interfaces.js\";function p(e,p){e.constants.add(\"stippleAlphaColorDiscard\",\"float\",.001),e.constants.add(\"stippleAlphaHighlightDiscard\",\"float\",.5),p.stippleEnabled?t(e,p):l(e)}function t(p,t){p.vertex.uniforms.add(\"stipplePatternPixelSizeInv\",\"float\"),t.stippleUVMaxEnabled&&p.varyings.add(\"stipplePatternUvMax\",\"float\"),p.varyings.add(\"stipplePatternUv\",\"float\"),p.fragment.uniforms.add(\"stipplePatternTexture\",\"sampler2D\"),t.stippleOffColorEnabled&&p.fragment.uniforms.add(\"stippleOffColor\",\"vec4\"),p.fragment.code.add(e`\n  float getStippleAlpha() {\n    float stipplePatternUvClamped = stipplePatternUv * gl_FragCoord.w;\n    ${t.stippleUVMaxEnabled?\"stipplePatternUvClamped = clamp(stipplePatternUvClamped, 0.0, stipplePatternUvMax);\":\"\"}\n\n    return texture2D(stipplePatternTexture, vec2(mod(stipplePatternUvClamped, 1.0), 0.5)).a;\n  }`),t.stippleOffColorEnabled?p.fragment.code.add(e`\n    #define discardByStippleAlpha(stippleAlpha, threshold) {}\n    #define blendStipple(color, stippleAlpha) mix(color, stippleOffColor, stippleAlpha)\n    `):p.fragment.code.add(e`\n    #define discardByStippleAlpha(stippleAlpha, threshold) if (stippleAlpha < threshold) { discard; }\n    #define blendStipple(color, stippleAlpha) vec4(color.rgb, color.a * stippleAlpha)\n    `)}function l(p){p.fragment.code.add(e`\n  float getStippleAlpha() { return 1.0; }\n\n  #define discardByStippleAlpha(_stippleAlpha_, _threshold_) {}\n  #define blendStipple(color, _stippleAlpha_) color\n  `)}export{p as LineStipple};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{neverReached as e}from\"../../../../core/compilerUtils.js\";import{unwrapOr as t}from\"../../../../core/maybe.js\";import{c as n}from\"../../../../chunks/vec3f64.js\";import{c as o}from\"../../../../chunks/mat4.js\";import{projectBuffer as r,computeLinearTransformation as i}from\"../../../../geometry/projection.js\";import{a as s}from\"../../../../chunks/mat4f64.js\";import{isDehydratedPoint as a}from\"../../../../layers/graphics/dehydratedFeatures.js\";import{isSamplePosition as l,getElevationAtPoint as c}from\"../../support/ElevationProvider.js\";import{updateVertexAttributeAuxpos1w as u}from\"./graphicUtils.js\";function f(e,t,n,o,i,s,a,l,c,u,f){const m=j[f.mode];let p,d,g=0;if(r(e,t,n,o,c.spatialReference,i,l))return m.requiresAlignment(f)?(g=m.applyElevationAlignmentBuffer(o,i,s,a,l,c,u,f),p=s,d=a):(p=o,d=i),r(p,c.spatialReference,d,s,u.spatialReference,a,l)?g:void 0}function m(n,o,r,i,s){const u=(a(n)?n.z:l(n)?n.array[n.offset+2]:n[2])||0;switch(r.mode){case\"on-the-ground\":{const e=t(c(o,n,\"ground\"),0);return s&&(s.verticalDistanceToGround=0,s.sampledElevation=e),e}case\"relative-to-ground\":{const e=t(c(o,n,\"ground\"),0),a=r.geometryZWithOffset(u,i);return s&&(s.verticalDistanceToGround=a,s.sampledElevation=e),a+e}case\"relative-to-scene\":{const e=t(c(o,n,\"scene\"),0),a=r.geometryZWithOffset(u,i);return s&&(s.verticalDistanceToGround=a,s.sampledElevation=e),a+e}case\"absolute-height\":{const e=r.geometryZWithOffset(u,i);if(s){const r=t(c(o,n,\"ground\"),0);s.verticalDistanceToGround=e-r,s.sampledElevation=r}return e}default:return e(r.mode),0}}function p(e,t,n){return null==t||null==n?e.definedChanged:\"on-the-ground\"===t&&\"on-the-ground\"===n?e.staysOnTheGround:t===n||\"on-the-ground\"!==t&&\"on-the-ground\"!==n?T.UPDATE:e.onTheGroundChanged}function d(e){return\"relative-to-ground\"===e||\"relative-to-scene\"===e}function g(e){return\"absolute-height\"!==e}function v(e,t,n,r,s){const a=m(t,n,s,r,O);u(e,O.verticalDistanceToGround);const l=O.sampledElevation,c=o(x,e.transformation);C[0]=t.x,C[1]=t.y,C[2]=a;return i(t.spatialReference,C,c,r.spatialReference)?e.transformation=c:console.warn(\"Could not locate symbol object properly, it might be misplaced\"),l}function E(e,n,o,r,i,s){let a=0;const l=s.spatialReference;n*=3,r*=3;for(let c=0;c<i;++c){const i=e[n+0],c=e[n+1],u=e[n+2],f=t(s.getElevation(i,c,u,l,\"ground\"),0);a+=f,o[r+0]=i,o[r+1]=c,o[r+2]=f,n+=3,r+=3}return a/i}function h(e,n,o,r,i,s,a,l){let c=0;const u=l.calculateOffsetRenderUnits(a),f=l.featureExpressionInfoContext,m=s.spatialReference;n*=3,r*=3;for(let p=0;p<i;++p){const i=e[n+0],a=e[n+1],l=e[n+2],p=t(s.getElevation(i,a,l,m,\"ground\"),0);c+=p,o[r+0]=i,o[r+1]=a,o[r+2]=null==f?l+p+u:p+u,n+=3,r+=3}return c/i}function y(e,n,o,r,i,s,a,l){let c=0;const u=l.calculateOffsetRenderUnits(a),f=l.featureExpressionInfoContext,m=s.spatialReference;n*=3,r*=3;for(let p=0;p<i;++p){const i=e[n+0],a=e[n+1],l=e[n+2],p=t(s.getElevation(i,a,l,m,\"scene\"),0);c+=p,o[r+0]=i,o[r+1]=a,o[r+2]=null==f?l+p+u:p+u,n+=3,r+=3}return c/i}function A(e){const t=e.meterUnitOffset,n=e.featureExpressionInfoContext;return 0!==t||null!=n}function R(e,t,n,o,r,i,s,a){const l=a.calculateOffsetRenderUnits(s),c=a.featureExpressionInfoContext;t*=3,o*=3;for(let u=0;u<r;++u){const r=e[t+0],i=e[t+1],s=e[t+2];n[o+0]=r,n[o+1]=i,n[o+2]=null==c?s+l:l,t+=3,o+=3}return 0}var T;!function(e){e[e.NONE=0]=\"NONE\",e[e.UPDATE=1]=\"UPDATE\",e[e.RECREATE=2]=\"RECREATE\"}(T||(T={}));const j={\"absolute-height\":{applyElevationAlignmentBuffer:R,requiresAlignment:A},\"on-the-ground\":{applyElevationAlignmentBuffer:E,requiresAlignment:()=>!0},\"relative-to-ground\":{applyElevationAlignmentBuffer:h,requiresAlignment:()=>!0},\"relative-to-scene\":{applyElevationAlignmentBuffer:y,requiresAlignment:()=>!0}},x=s(),O={verticalDistanceToGround:0,sampledElevation:0},C=n();export{T as SymbolUpdateType,v as applyElevationAlignmentForHUD,f as applyPerVertexElevationAlignment,p as elevationModeChangeUpdateType,m as evaluateElevationAlignmentAtPoint,d as needsElevationUpdates2D,g as needsElevationUpdates3D};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{glsl as e}from\"../views/3d/webgl-engine/core/shaderModules/interfaces.js\";import{ShaderBuilder as t}from\"../views/3d/webgl-engine/core/shaderModules/ShaderBuilder.js\";import{ColorConversion as i}from\"../views/3d/webgl-engine/core/shaderLibrary/util/ColorConversion.glsl.js\";import{Slice as r}from\"../views/3d/webgl-engine/core/shaderLibrary/Slice.glsl.js\";import{ReadLinearDepth as n}from\"../views/3d/webgl-engine/core/shaderLibrary/output/ReadLinearDepth.glsl.js\";import{symbolAlphaCutoff as o}from\"../views/3d/webgl-engine/core/shaderLibrary/util/AlphaDiscard.glsl.js\";import{multipassTerrainTest as a}from\"../views/3d/webgl-engine/core/shaderLibrary/shading/MultipassTerrainTest.glsl.js\";import{RibbonVertexPosition as s}from\"../views/3d/webgl-engine/core/shaderLibrary/attributes/RibbonVertexPosition.glsl.js\";import{OutputDepth as l}from\"../views/3d/webgl-engine/core/shaderLibrary/output/OutputDepth.glsl.js\";import{LineStipple as p}from\"../views/3d/webgl-engine/core/shaderLibrary/shading/LineStipple.glsl.js\";import{PiUtils as d}from\"../views/3d/webgl-engine/core/shaderLibrary/shading/PiUtils.glsl.js\";function c(c){const f=new t;f.extensions.add(\"GL_OES_standard_derivatives\"),f.include(d),f.include(s,c),f.include(p,c),1===c.output&&f.include(l,c),f.vertex.uniforms.add(\"proj\",\"mat4\").add(\"view\",\"mat4\").add(\"cameraNearFar\",\"vec2\").add(\"pixelRatio\",\"float\").add(\"miterLimit\",\"float\").add(\"screenSize\",\"vec2\"),f.attributes.add(\"position\",\"vec3\"),f.attributes.add(\"subdivisionFactor\",\"float\"),f.attributes.add(\"uv0\",\"vec2\"),f.attributes.add(\"auxpos1\",\"vec3\"),f.attributes.add(\"auxpos2\",\"vec3\"),f.varyings.add(\"vColor\",\"vec4\"),f.varyings.add(\"vpos\",\"vec3\"),f.varyings.add(\"linearDepth\",\"float\"),c.multipassTerrainEnabled&&f.varyings.add(\"depth\",\"float\");const v=c.falloffEnabled,m=c.innerColorEnabled;return m&&f.varyings.add(\"vLineDistance\",\"float\"),v&&f.varyings.add(\"vLineDistanceNorm\",\"float\"),c.falloffEnabled&&f.fragment.uniforms.add(\"falloff\",\"float\"),c.innerColorEnabled&&(f.fragment.uniforms.add(\"innerColor\",\"vec4\"),f.fragment.uniforms.add(\"innerWidth\",\"float\")),f.vertex.code.add(e`\n\t\t#define PERPENDICULAR(v) vec2(v.y, -v.x);\n\t\t#define ISOUTSIDE (left.x * right.y - left.y * right.x)*uv0.y > 0.0\n\n\t\tfloat interp(float ncp, vec4 a, vec4 b) {\n\t\t\treturn (-ncp - a.z) / (b.z - a.z);\n\t\t}\n\n\t\tvec2 rotate(vec2 v, float a) {\n\t\t\tfloat s = sin(a);\n\t\t\tfloat c = cos(a);\n\t\t\tmat2 m = mat2(c, -s, s, c);\n\t\t\treturn m * v;\n\t\t}\n`),f.vertex.code.add(e`\n    vec4 projectAndScale(vec4 pos) {\n      vec4 posNdc = proj * pos;\n\n      // Note that posNdc is in -1:1, scaling by screenSize converts this to a coordinate system\n      // that is twice scaled (going from -size:size).\n      posNdc.xy *= screenSize / posNdc.w;\n      return posNdc;\n    }\n`),f.vertex.code.add(e`\n    void clipAndTransform(inout vec4 pos, inout vec4 prev, inout vec4 next, in bool isStartVertex) {\n      float vnp = cameraNearFar[0] * 0.99;\n\n      //current pos behind ncp --> we need to clip\n      if(pos.z > -cameraNearFar[0]) {\n        if (!isStartVertex) {\n          //previous in front of ncp\n          if(prev.z < -cameraNearFar[0]) {\n            pos = mix(prev, pos, interp(vnp, prev, pos));\n            next = pos;\n          } else {\n            pos = vec4(0.0, 0.0, 0.0, 1.0);\n          }\n        }\n        //next in front of ncp\n        if(isStartVertex) {\n          if(next.z < -cameraNearFar[0]) {\n            pos = mix(pos, next, interp(vnp, pos, next));\n            prev = pos;\n          } else {\n            pos = vec4(0.0, 0.0, 0.0, 1.0);\n          }\n        }\n      } else {\n        //current position visible\n        //previous behind ncp\n        if (prev.z > -cameraNearFar[0]) {\n          prev = mix(pos, prev, interp(vnp, pos, prev));\n        }\n        //next behind ncp\n        if (next.z > -cameraNearFar[0]) {\n          next = mix(next, pos, interp(vnp, next, pos));\n        }\n      }\n\n      ${c.multipassTerrainEnabled?\"depth = pos.z;\":\"\"}\n      linearDepth = (-pos.z - cameraNearFar[0]) / (cameraNearFar[1] - cameraNearFar[0]);\n\n      pos = projectAndScale(pos);\n      next = projectAndScale(next);\n      prev = projectAndScale(prev);\n    }\n`),f.vertex.code.add(e`\n  void main(void) {\n    float coverage = 1.0;\n    vpos = position;\n\n    // Check for special value of uv0.y which is used by the Renderer when graphics\n    // are removed before the VBO is recompacted. If this is the case, then we just\n    // project outside of clip space.\n    if (uv0.y == 0.0) {\n      // Project out of clip space\n      gl_Position = vec4(1e038, 1e038, 1e038, 1.0);\n    }\n    else {\n      bool isStartVertex = abs(abs(uv0.y)-3.0) == 1.0;\n      bool isJoin = abs(uv0.y)-3.0 < 0.0;\n\n      float lineWidth = getSize() * pixelRatio;\n\n      // convert sub-pixel coverage to alpha\n      if (lineWidth < 1.0) {\n        coverage = lineWidth;\n        lineWidth = 1.0;\n      }else{\n        // Ribbon lines cannot properly render non-integer sizes. Round width to integer size if\n        // larger than one for better quality. Note that we do render < 1 pixels more or less correctly\n        // so we only really care to round anything larger than 1.\n        lineWidth = floor(lineWidth + 0.5);\n      }\n\n      vec4 pos  = view * vec4(position.xyz, 1.0);\n      vec4 prev = view * vec4(auxpos1.xyz, 1.0);\n      vec4 next = view * vec4(auxpos2.xyz, 1.0);\n\n      clipAndTransform(pos, prev, next, isStartVertex);\n\n      vec2 left = (pos.xy - prev.xy);\n      vec2 right = (next.xy - pos.xy);\n\n      float leftLen = length(left);\n      float rightLen = length(right);\n  `),c.stippleEnabled&&f.vertex.code.add(e`\n      // uv0.x is either 0 or 1, depending on whether this is considered the start of a line segment\n      // or the end. If start, then use pos->next, otherwise use prev->pos to define the line segment\n      // vector\n      vec4 stippleSegmentInfo = mix(vec4(pos.xy, right), vec4(prev.xy, left), uv0.x);\n      vec2 stippleSegmentOrigin = stippleSegmentInfo.xy;\n\n      // Scale s.t. it's in units of stipple pattern size.\n      vec2 stippleSegmentDirection = stippleSegmentInfo.zw;\n    `),f.vertex.code.add(e`\n    left = (leftLen > 0.001) ? left/leftLen : vec2(0.0, 0.0);\n    right = (rightLen > 0.001) ? right/rightLen : vec2(0.0, 0.0);\n\n    vec2 capDisplacementDir = vec2(0, 0);\n    vec2 joinDisplacementDir = vec2(0, 0);\n    float displacementLen = lineWidth;\n\n    if (isJoin) {\n\n      // JOIN handling ---------------------------------------------------\n      // determine if vertex is on the \"outside or \"inside\" of the join\n      bool isOutside = ISOUTSIDE;\n\n      // compute miter join position first\n      joinDisplacementDir = normalize(left + right);\n      joinDisplacementDir = PERPENDICULAR(joinDisplacementDir);\n\n      // compute miter stretch\n      if (leftLen > 0.001 && rightLen > 0.001) {\n        float nDotSeg = dot(joinDisplacementDir, left);\n        displacementLen /= length(nDotSeg * left - joinDisplacementDir);\n\n        // limit displacement of inner vertices\n        if (!isOutside) {\n          displacementLen = min(displacementLen, min(leftLen, rightLen)/abs(nDotSeg));\n        }\n      }\n\n      if (isOutside && (displacementLen > miterLimit * lineWidth)) {\n    `),c.roundJoins?f.vertex.code.add(e`\n        vec2 startDir;\n        vec2 endDir;\n\n        if (leftLen < 0.001) {\n          startDir = right;\n        }\n        else{\n          startDir = left;\n        }\n        startDir = normalize(startDir);\n        startDir = PERPENDICULAR(startDir);\n\n        if (rightLen < 0.001) {\n          endDir = left;\n        }\n        else{\n          endDir = right;\n        }\n        endDir = normalize(endDir);\n        endDir = PERPENDICULAR(endDir);\n\n        float rotationAngle = acos(clamp(dot(startDir, endDir), -1.0, 1.0));\n        joinDisplacementDir = rotate(startDir, -sign(uv0.y) * subdivisionFactor * rotationAngle);\n      `):f.vertex.code.add(e`\n        // convert to bevel join if miterLimit is exceeded\n        if (leftLen < 0.001) {\n          joinDisplacementDir = right;\n        }\n        else if (rightLen < 0.001) {\n          joinDisplacementDir = left;\n        }\n        else {\n          joinDisplacementDir = isStartVertex ? right : left;\n        }\n        joinDisplacementDir = normalize(joinDisplacementDir);\n        joinDisplacementDir = PERPENDICULAR(joinDisplacementDir);\n  `),f.vertex.code.add(e`\n        displacementLen = lineWidth;\n      }\n    } else {\n    // CAP handling ---------------------------------------------------\n    if (leftLen < 0.001) {\n      joinDisplacementDir = right;\n    }\n    else if (rightLen < 0.001) {\n      joinDisplacementDir = left;\n    }\n    else {\n      joinDisplacementDir = isStartVertex ? right : left;\n    }\n    joinDisplacementDir = normalize(joinDisplacementDir);\n    joinDisplacementDir = PERPENDICULAR(joinDisplacementDir);\n    displacementLen = lineWidth;\n\n    capDisplacementDir = isStartVertex ? -right : left;\n  `),c.roundCaps?f.vertex.code.add(e`\n    float angle = subdivisionFactor*PI*0.5;\n    joinDisplacementDir *= cos(angle);\n    capDisplacementDir *= sin(angle);\n    `):f.vertex.code.add(e`\n    capDisplacementDir *= subdivisionFactor;\n    `),f.vertex.code.add(e`\n  }\n\n  // Displacement (in pixels) caused by join/or cap\n  vec2 dpos = joinDisplacementDir * sign(uv0.y) * displacementLen + capDisplacementDir * displacementLen;\n\n  ${v||m?e`float lineDist = lineWidth * sign(uv0.y) * pos.w;`:\"\"}\n\n  ${m?e`vLineDistance = lineDist;`:\"\"}\n  ${v?e`vLineDistanceNorm = lineDist / lineWidth;`:\"\"}\n\n  pos.xy += dpos;\n  `),c.stippleEnabled&&(f.vertex.code.add(e`\n    {\n      // Compute the stipple pattern UV coordinate from the actual position, based on the origin\n      // and direction of the line segment on which the stipple pattern is based.\n\n      // Project the vector from the origin of the segment to the vertex onto the line segment.\n      // Note the 0.5 factor due to projected positions being at twice the screen size scale (see projectAndScale)\n      vec2 posVec = pos.xy - stippleSegmentOrigin;\n\n      float stippleSegmentDirectionLength = length(stippleSegmentDirection);\n    `),c.stippleIntegerRepeatsEnabled&&f.vertex.code.add(e`\n      float numberOfPatternRepeats = stippleSegmentDirectionLength * 0.5 * stipplePatternPixelSizeInv;\n      float roundedNumberOfPatternRepeats = floor(numberOfPatternRepeats);\n      stipplePatternUvMax = roundedNumberOfPatternRepeats;\n      `),f.vertex.code.add(e`\n      if (stippleSegmentDirectionLength >= 0.001) {\n        // Project the vertex position onto the line segment.\n        float projectedLength = dot(stippleSegmentDirection, posVec) / stippleSegmentDirectionLength * 0.5;\n     ${c.stippleIntegerRepeatsEnabled?\"float wholeNumberOfRepeatsScale = roundedNumberOfPatternRepeats / numberOfPatternRepeats;\":\"float wholeNumberOfRepeatsScale = 1.0;\"}\n        stipplePatternUv = projectedLength * wholeNumberOfRepeatsScale * stipplePatternPixelSizeInv * pos.w;\n        } else {\n          stipplePatternUv = 1.0;\n        }\n      }\n    `)),f.vertex.code.add(e`\n      // Convert back into NDC\n      pos.xy = pos.xy / screenSize * pos.w;\n\n      vColor = getColor();\n      vColor.a *= coverage;\n\n      gl_Position = pos;\n    }\n  }\n  `),c.multipassTerrainEnabled&&(f.fragment.include(n),f.include(a,c)),f.include(r,c),f.fragment.uniforms.add(\"intrinsicColor\",\"vec4\"),f.fragment.include(i),f.fragment.code.add(e`\n  void main() {\n    discardBySlice(vpos);\n    ${c.multipassTerrainEnabled?\"terrainDepthTest(gl_FragCoord, depth);\":\"\"}\n    float stippleAlpha = getStippleAlpha();\n    discardByStippleAlpha(stippleAlpha, stippleAlphaColorDiscard);\n\n    vec4 color = intrinsicColor * vColor;\n  `),c.innerColorEnabled&&(f.fragment.uniforms.add(\"pixelRatio\",\"float\"),f.fragment.code.add(e`\n    float distToInner = abs(vLineDistance * gl_FragCoord.w) - innerWidth;\n    float innerAA = clamp(0.5 - distToInner, 0.0, 1.0);\n    float innerAlpha = innerColor.a + color.a * (1.0 - innerColor.a);\n    color = mix(color, vec4(innerColor.rgb, innerAlpha), innerAA);\n    `)),f.fragment.code.add(e`\n    vec4 finalColor = blendStipple(color, stippleAlpha);\n  `),c.falloffEnabled&&f.fragment.code.add(e`\n    finalColor.a *= pow(max(0.0, 1.0 - abs(vLineDistanceNorm * gl_FragCoord.w)), falloff);\n    `),f.fragment.code.add(e`\n    if (finalColor.a < ${e.float(o)}) {\n      discard;\n    }\n\n    ${7===c.output?e`gl_FragColor = vec4(finalColor.a);`:\"\"}\n    ${0===c.output?e`gl_FragColor = highlightSlice(finalColor, vpos);`:\"\"}\n    ${0===c.output&&c.OITEnabled?\"gl_FragColor = premultiplyAlpha(gl_FragColor);\":\"\"}\n    ${4===c.output?e`gl_FragColor = vec4(1.0);`:\"\"}\n    ${1===c.output?e`outputDepth(linearDepth);`:\"\"}\n  }\n  `),f}var f=Object.freeze({__proto__:null,build:c});export{f as R,c as b};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nconst S={DIFFUSE:0,NORMAL:1,EMISSION:2,OCCLUSION:3,METALLIC_ROUGHNESS:4,SSAO:6,SHADOW_MAP:7};export{S as DefaultTextureUnits};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{glsl as e}from\"../../shaderModules/interfaces.js\";function t(t,i){t.vertex.uniforms.add(\"intrinsicWidth\",\"float\"),i.vvSize?(t.attributes.add(\"sizeFeatureAttribute\",\"float\"),t.vertex.uniforms.add(\"vvSizeMinSize\",\"vec3\"),t.vertex.uniforms.add(\"vvSizeMaxSize\",\"vec3\"),t.vertex.uniforms.add(\"vvSizeOffset\",\"vec3\"),t.vertex.uniforms.add(\"vvSizeFactor\",\"vec3\"),t.vertex.code.add(e`\n    float getSize() {\n      return intrinsicWidth * clamp(vvSizeOffset + sizeFeatureAttribute * vvSizeFactor, vvSizeMinSize, vvSizeMaxSize).x;\n    }\n    `)):(t.attributes.add(\"size\",\"float\"),t.vertex.code.add(e`\n    float getSize(){\n      return intrinsicWidth * size;\n    }\n    `)),i.vvOpacity?(t.attributes.add(\"opacityFeatureAttribute\",\"float\"),t.vertex.constants.add(\"vvOpacityNumber\",\"int\",8),t.vertex.code.add(e`\n    uniform float vvOpacityValues[vvOpacityNumber];\n    uniform float vvOpacityOpacities[vvOpacityNumber];\n\n    float interpolateOpacity( float value ){\n      if (value <= vvOpacityValues[0]) {\n        return vvOpacityOpacities[0];\n      }\n\n      for (int i = 1; i < vvOpacityNumber; ++i) {\n        if (vvOpacityValues[i] >= value) {\n          float f = (value - vvOpacityValues[i-1]) / (vvOpacityValues[i] - vvOpacityValues[i-1]);\n          return mix(vvOpacityOpacities[i-1], vvOpacityOpacities[i], f);\n        }\n      }\n\n      return vvOpacityOpacities[vvOpacityNumber - 1];\n    }\n\n    vec4 applyOpacity( vec4 color ){\n      return vec4(color.xyz, interpolateOpacity(opacityFeatureAttribute));\n    }\n    `)):t.vertex.code.add(e`\n    vec4 applyOpacity( vec4 color ){\n      return color;\n    }\n    `),i.vvColor?(t.attributes.add(\"colorFeatureAttribute\",\"float\"),t.vertex.constants.add(\"vvColorNumber\",\"int\",8),t.vertex.code.add(e`\n    uniform float vvColorValues[vvColorNumber];\n    uniform vec4 vvColorColors[vvColorNumber];\n\n    vec4 interpolateColor( float value ) {\n      if (value <= vvColorValues[0]) {\n        return vvColorColors[0];\n      }\n\n      for (int i = 1; i < vvColorNumber; ++i) {\n        if (vvColorValues[i] >= value) {\n          float f = (value - vvColorValues[i-1]) / (vvColorValues[i] - vvColorValues[i-1]);\n          return mix(vvColorColors[i-1], vvColorColors[i], f);\n        }\n      }\n\n      return vvColorColors[vvColorNumber - 1];\n    }\n\n    vec4 getColor(){\n      return applyOpacity(interpolateColor(colorFeatureAttribute));\n    }\n    `)):(t.attributes.add(\"color\",\"vec4\"),t.vertex.code.add(e`\n    vec4 getColor(){\n      return applyOpacity(color);\n    }\n    `))}export{t as RibbonVertexPosition};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{isSome as e}from\"../../../../core/maybe.js\";import{c as t}from\"../../../../chunks/vec3f64.js\";import{k as i,n as r,f as s,g as a,b as o}from\"../../../../chunks/vec3.js\";import l from\"../../../../core/Handles.js\";import{i as n,t as u,s as h}from\"../../../../chunks/mat4.js\";import{a as d}from\"../../../../chunks/mat4f64.js\";import{c}from\"../../../../chunks/vec4.js\";import{f as _}from\"../../../../chunks/vec4f32.js\";import{sv3d as m}from\"../../support/stack.js\";import{Geometry as p}from\"../../webgl-engine/lib/Geometry.js\";import M from\"../../webgl-engine/lib/GeometryUtil.js\";import{RibbonLineMaterial as f}from\"../../webgl-engine/materials/RibbonLineMaterial.js\";import{ColorMaterial as g}from\"../../webgl-engine/materials/ColorMaterial.js\";import{Object3DVisualElement as O}from\"./Object3DVisualElement.js\";class y extends O{constructor(e){super(e),this._handles=new l,this._quadMaterial=null,this._outlineMaterial=null,this._maxSize=0,this._position=t(),this._up=t(),this._right=t(),this._renderOccluded=4,this._color=_(1,0,0,1),this._outlineColor=_(0,0,0,1),this._outlineSize=0,this._size=32,this._outlineRenderOccluded=16,this.applyProps(e)}get renderOccluded(){return this._renderOccluded}set renderOccluded(e){e!==this._renderOccluded&&(this._renderOccluded=e,this._updateQuadMaterial())}get color(){return this._color}set color(e){c(this._color,e),this._updateQuadMaterial()}get outlineColor(){return this._outlineColor}set outlineColor(e){c(this._outlineColor,e),this._updateOutlineMaterial()}get outlineSize(){return this._outlineSize}set outlineSize(e){const t=0===this._outlineSize!=(0===e);this._outlineSize=e,t?this.recreateGeometry():this._updateOutlineMaterial()}get size(){return this._size}set size(e){e!==this._size&&(this._size=e,this._updateTransform())}get outlineRenderOccluded(){return this._outlineRenderOccluded}set outlineRenderOccluded(e){this._outlineRenderOccluded=e,this._updateOutlineMaterial()}set geometry({previous:e,center:t,next:o}){this._maxSize=Math.min(i(t,e),i(t,o))/3,r(this._up,s(this._up,e,t)),r(this._right,s(this._right,o,t)),a(this._position,t),this.recreateGeometry()}createExternalResources(){this._quadMaterial=new g(this.quadMaterialParameters),this._outlineMaterial=new f(this.outlineMaterialParameters),this._handles.add(this.view.state.watch(\"camera\",(()=>this._updateTransform())))}destroyExternalResources(){this._quadMaterial=null,this._outlineMaterial=null,this._handles.removeAll()}forEachExternalMaterial(e){e(this._quadMaterial),e(this._outlineMaterial)}createGeometries(e){this._createQuadGeometry(e),this._createOutlineGeometry(e),this._updateTransform(e)}_createQuadGeometry(e){const t=this._quadGeometryData(this._up,this._right);e.addGeometry(t,this._quadMaterial)}_createOutlineGeometry(e){if(0===this._outlineSize)return;const t=o(m.get(),this._up,this._right),i=M.createPolylineGeometry([this._up,t,this._right]);e.addGeometry(i,this._outlineMaterial)}_updateTransform(t=this.object){const i=this.view.state.camera,r=this._size*i.computeScreenPixelSizeAt(this._position),s=Math.min(this._maxSize,r);n(z),u(z,z,this._position),h(z,z,[s,s,s]),e(t)&&(t.transformation=z)}_quadGeometryData(e,t){const i=o(m.get(),e,t);return new p([[\"position\",{size:3,data:[0,0,0,...t,...e,...i],exclusive:!0}]],[[\"position\",new Uint16Array([0,1,2,1,2,3])]])}get quadMaterialParameters(){return{color:this._color,transparent:!0,writeDepth:!1,polygonOffset:!0,renderOccluded:this._renderOccluded}}_updateQuadMaterial(){this._quadMaterial&&this._quadMaterial.setParameterValues(this.quadMaterialParameters)}get outlineMaterialParameters(){return{color:this._outlineColor,width:this._outlineSize,renderOccluded:this._outlineRenderOccluded}}_updateOutlineMaterial(){this._outlineMaterial&&this._outlineMaterial.setParameterValues(this.outlineMaterialParameters)}}const z=d();export{y as RightAngleQuadVisualElement};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{c as e}from\"../../../../../chunks/vec3f64.js\";import{e as t,f as s,n as r,g as i,b as n}from\"../../../../../chunks/vec3.js\";import{slerpTangent as c,slerp as p}from\"../../../support/mathUtils.js\";import{getSphericalPCPF as o}from\"../../../../../geometry/projectionEllipsoid.js\";import{canProjectWithoutEngine as a,projectVectorToVector as h}from\"../../../../../geometry/projection.js\";import{sv3d as d}from\"../../../support/stack.js\";class _{constructor(t=e(),s=e()){this.startRenderSpace=t,this.endRenderSpace=s,this.type=\"euclidean\"}eval(e,i,n){return t(i,this.startRenderSpace,this.endRenderSpace,e),n&&(s(n,this.endRenderSpace,this.startRenderSpace),r(n,n)),i}createRenderGeometry(e,t){const r=[],i=[],n=(t,n)=>{const c=u;s(c,t,e),r.push([c[0],c[1],c[2]]),i.push([n[0],n[1],n[2]])},c=t.worldUpAtPosition(this.eval(.5,m),d.get());return n(this.startRenderSpace,c),n(this.endRenderSpace,c),{points:r,normals:i}}}class f{constructor(t,s,r){this.startRenderSpace=t,this.endRenderSpace=s,this.renderSpatialReference=r,this.type=\"geodesic\",this._start=e(),this._end=e(),this._pcpf=o(r),this._project=a(r,this._pcpf),this._projectIn(t,this._start),this._projectIn(s,this._end)}_projectIn(e,t){this._project?h(e,this.renderSpatialReference,t,this._pcpf):i(t,e)}eval(e,i,o){if(this._project)if(o){const t=u;c(this._start,this._end,e,i,t),n(R,i,t),h(i,this._pcpf,i,this.renderSpatialReference),h(R,this._pcpf,R,this.renderSpatialReference),s(o,R,i),r(o,o)}else p(this._start,this._end,e,i),h(i,this._pcpf,i,this.renderSpatialReference);else t(i,this._start,this._end,e),o&&(s(o,this._end,this._start),r(o,o));return i}createRenderGeometry(e,t){const r=[],i=[],n=(t,n)=>{const c=R;s(c,t,e),r.push([c[0],c[1],c[2]]),i.push([n[0],n[1],n[2]])},c=128+1&-2;for(let s=0;s<c;++s){const e=s/(c-1),r=m,i=u;this.eval(e,r),t.worldUpAtPosition(r,i),n(r,i)}return{points:r,normals:i}}}function l(e,t,s,r){switch(e){case\"euclidean\":return new _(t,s);case\"geodesic\":return new f(t,s,r)}}const m=e(),u=e(),R=e();export{_ as EuclideanSegment,f as GeodesicSegment,l as createSegment};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{formatDecimal as r,formatMetricLength as t,formatMetricVerticalLength as a,formatMetricArea as n,formatImperialLength as e,formatImperialVerticalLength as i,formatImperialArea as u,formatDMS as o}from\"./unitFormatUtils.js\";function l(t,a,n,e=2,i=\"abbr\"){return r(t,a.toUnit(n).value,n,e,i)}function f(r,a,n=2,e=\"abbr\"){if(\"length\"!==a.measure)throw new Error(\"quantity is not a length\");return t(r,a.value,a.unit,n,e)}function s(r,t,n=2,e=\"abbr\"){if(\"length\"!==t.measure)throw new Error(\"quantity is not a length\");return a(r,t.value,t.unit,n,e)}function m(r,t,a=2,e=\"abbr\"){if(\"area\"!==t.measure)throw new Error(\"quantity is not an area\");return n(r,t.value,t.unit,a,e)}function h(r,t,a=2,n=\"abbr\"){if(\"length\"!==t.measure)throw new Error(\"quantity is not a length\");return e(r,t.value,t.unit,a,n)}function b(r,t,a=2,n=\"abbr\"){if(\"length\"!==t.measure)throw new Error(\"quantity is not a length\");return i(r,t.value,t.unit,a,n)}function c(r,t,a=2,n=\"abbr\"){if(\"area\"!==t.measure)throw new Error(\"quantity is not an area\");return u(r,t.value,t.unit,a,n)}function g(r){if(\"angle\"!==r.measure)throw new Error(\"quantity is not an angle\");return o(r.value,r.unit)}export{g as formatDMS,l as formatDecimal,c as formatImperialArea,h as formatImperialLength,b as formatImperialVerticalLength,m as formatMetricArea,f as formatMetricLength,s as formatMetricVerticalLength};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{glsl as e}from\"../views/3d/webgl-engine/core/shaderModules/interfaces.js\";import{ShaderBuilder as t}from\"../views/3d/webgl-engine/core/shaderModules/ShaderBuilder.js\";function o(){const o=new t;o.vertex.uniforms.add(\"proj\",\"mat4\").add(\"view\",\"mat4\").add(\"width\",\"float\"),o.attributes.add(\"position\",\"vec3\"),o.attributes.add(\"normal\",\"vec3\"),o.attributes.add(\"uv0\",\"vec2\"),o.attributes.add(\"auxpos1\",\"float\"),o.varyings.add(\"vtc\",\"vec2\"),o.varyings.add(\"vlength\",\"float\"),o.varyings.add(\"vradius\",\"float\"),o.vertex.code.add(e`\n    void main(void) {\n      vec3 bitangent = normal;\n\n      vtc = uv0;\n      vlength = auxpos1;\n      vradius = 0.5 * width;\n\n      vec4 pos = view * vec4(position + vradius * bitangent * uv0.y, 1.0);\n      gl_Position = proj * pos;\n    }\n  `),o.fragment.uniforms.add(\"outlineSize\",\"float\").add(\"outlineColor\",\"vec4\").add(\"stripeLength\",\"float\").add(\"stripeEvenColor\",\"vec4\").add(\"stripeOddColor\",\"vec4\");const r=1/Math.sqrt(2);return o.fragment.code.add(e`\n    const float INV_SQRT2 = ${e.float(r)};\n\n    vec4 arrowColor(vec2 tc, float len) {\n      float d = INV_SQRT2 * (tc.x - abs(tc.y));\n      d = min(d, INV_SQRT2 * (len - tc.x - abs(tc.y)));\n      d = min(d, 1.0 - abs(tc.y));\n\n      if (d < 0.0) {\n        return vec4(0.0);\n      } else if (d < outlineSize) {\n        return outlineColor;\n      } else {\n        return fract(0.5 / stripeLength * tc.x * vradius) >= 0.5 ? stripeOddColor : stripeEvenColor;\n      }\n    }\n\n    void main(void) {\n      vec2 ntc = vec2(vtc.x / vradius, vtc.y);\n      vec4 color = arrowColor(ntc, vlength / vradius);\n      if (color.a == 0.0) {\n        discard;\n      }\n      gl_FragColor = color;\n    }\n  `),o}var r=Object.freeze({__proto__:null,build:o});export{r as M,o as b};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nlet e=e=>({vnodeSelector:\"\",properties:void 0,children:void 0,text:e.toString(),domNode:null}),r=(t,o,n)=>{for(let l=0,i=o.length;l<i;l++){let i=o[l];Array.isArray(i)?r(t,i,n):null!=i&&!1!==i&&(\"string\"==typeof i&&(i=e(i)),n.push(i))}};function t(e,t,o){if(Array.isArray(t))o=t,t=void 0;else if(t&&(\"string\"==typeof t||t.hasOwnProperty(\"vnodeSelector\"))||o&&(\"string\"==typeof o||o.hasOwnProperty(\"vnodeSelector\")))throw new Error(\"h called with invalid arguments\");let n,l;return o&&1===o.length&&\"string\"==typeof o[0]?n=o[0]:o&&(l=[],r(e,o,l),0===l.length&&(l=void 0)),{vnodeSelector:e,properties:t,children:l,text:\"\"===n?void 0:n,domNode:null}}export{t as h};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{_ as t}from\"../../chunks/tslib.es6.js\";import\"../../core/has.js\";import\"../../core/Logger.js\";import\"../../core/accessorSupport/ensureType.js\";import{property as e}from\"../../core/accessorSupport/decorators/property.js\";import{subclass as s}from\"../../core/accessorSupport/decorators/subclass.js\";import\"../../core/urlUtils.js\";import\"../../core/uuid.js\";import\"../../portal/support/resourceExtension.js\";import i from\"../../core/Accessor.js\";import\"../../libs/maquette/projection.js\";import{h as o}from\"../../libs/maquette/h.js\";import\"../../libs/maquette/projector.js\";let r=class extends i{constructor(t){super(t),this.startX=0,this.startY=0,this.endX=0,this.endY=0,this.width=1,this.color=[0,0,0,.5],this.visible=!0}get startPosition(){return[this.startX,this.startY]}set startPosition(t){this._set(\"startX\",t[0]),this._set(\"startY\",t[1])}get endPosition(){return[this.endX,this.endY]}set endPosition(t){this._set(\"endX\",t[0]),this._set(\"endY\",t[1])}get strokeStyle(){const t=this.color;return`rgba(${t[0]}, ${t[1]}, ${t[2]}, ${t[3]})`}get lineCap(){return\"round\"}render(){const{height:t,left:e,top:s,width:i,x1:r,x2:n,y1:p,y2:a}=this.calculateCoordinates(h),l=`stroke: ${this.strokeStyle}; stroke-width: ${this.width}; stroke-linecap: ${this.lineCap};`;return o(\"div\",{classes:{\"esri-line-overlay-item\":!0},styles:{left:e+\"px\",top:s+\"px\",width:i+\"px\",height:t+\"px\",visibility:this.visible?\"visible\":\"hidden\"}},[o(\"svg\",{width:i,height:t},[o(\"line\",{x1:r,y1:p,x2:n,y2:a,style:l})])])}renderCanvas(t){if(!this.visible)return;t.strokeStyle=this.strokeStyle,t.lineWidth=this.width,t.lineCap=this.lineCap;const e=this.calculateCoordinates(h);t.beginPath(),t.moveTo(e.left+e.x1,e.top+e.y1),t.lineTo(e.left+e.x2,e.top+e.y2),t.stroke()}calculateCoordinates(t){const e=Math.min(this.startX,this.endX),s=Math.max(this.startX,this.endX),i=Math.min(this.startY,this.endY),o=Math.max(this.startY,this.endY),r=this.width;return t.left=e-r,t.top=i-r,t.width=s-e+2*r,t.height=Math.max(20,o-i+2*r),t.x1=this.startX-e+r,t.y1=this.startY-i+r,t.x2=this.endX-e+r,t.y2=this.endY-i+r,t}};t([e()],r.prototype,\"startX\",void 0),t([e()],r.prototype,\"startY\",void 0),t([e()],r.prototype,\"endX\",void 0),t([e()],r.prototype,\"endY\",void 0),t([e()],r.prototype,\"startPosition\",null),t([e()],r.prototype,\"endPosition\",null),t([e()],r.prototype,\"width\",void 0),t([e()],r.prototype,\"color\",void 0),t([e()],r.prototype,\"visible\",void 0),t([e({readOnly:!0})],r.prototype,\"strokeStyle\",null),r=t([s(\"esri.views.overlay.LineOverlayItem\")],r);const h={left:0,top:0,width:0,height:0,x1:0,y1:0,x2:0,y2:0};var n=r;export default n;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{_ as t}from\"../../chunks/tslib.es6.js\";import\"../../core/has.js\";import\"../../core/Logger.js\";import\"../../core/accessorSupport/ensureType.js\";import{property as e}from\"../../core/accessorSupport/decorators/property.js\";import{subclass as o}from\"../../core/accessorSupport/decorators/subclass.js\";import\"../../core/urlUtils.js\";import\"../../core/uuid.js\";import\"../../portal/support/resourceExtension.js\";import i from\"../../core/Accessor.js\";import\"../../libs/maquette/projection.js\";import{h as r}from\"../../libs/maquette/h.js\";import\"../../libs/maquette/projector.js\";const s={bottom:\"esri-text-overlay-item-anchor-bottom\",\"bottom-right\":\"esri-text-overlay-item-anchor-bottom-right\",\"bottom-left\":\"esri-text-overlay-item-anchor-bottom-left\",top:\"esri-text-overlay-item-anchor-top\",\"top-right\":\"esri-text-overlay-item-anchor-top-right\",\"top-left\":\"esri-text-overlay-item-anchor-top-left\",center:\"esri-text-overlay-item-anchor-center\",right:\"esri-text-overlay-item-anchor-right\",left:\"esri-text-overlay-item-anchor-left\"};let l=class extends i{constructor(t){super(t),this.x=0,this.y=0,this.text=\"-\",this.fontSize=14,this.anchor=\"center\",this.visible=!0,this.backgroundColor=\"rgba(0, 0, 0, 0.6)\",this.textColor=\"white\",this.textShadowColor=[0,0,0],this.textShadowSize=1}get position(){return[this.x,this.y]}set position(t){this._set(\"x\",t[0]),this._set(\"y\",t[1])}get padding(){return.5*this.fontSize}render(){return r(\"div\",{classes:this._cssClasses(),styles:{left:Math.floor(this.x)+\"px\",top:Math.floor(this.y)+\"px\",visibility:this.visible?\"visible\":\"hidden\",fontSize:this.fontSize+\"px\",backgroundColor:this.backgroundColor,color:this.textColor,padding:this.padding+\"px\",borderRadius:this.padding+\"px\",textShadow:`0 0 ${this.textShadowSize}px rgb(${this.textShadowColor[0]}, ${this.textShadowColor[1]}, ${this.textShadowColor[2]})`}},[this.text])}renderCanvas(t){if(!this.visible)return;const e=t.font.replace(/^(.*?)px/,\"\");t.font=`${this.fontSize}px ${e}`;const o=this.padding,i=this.padding,r=t.measureText(this.text).width,s=this.fontSize,l=n[this.anchor];t.textAlign=\"center\",t.textBaseline=\"middle\";const h=r+2*o,a=s+2*o,x=this.x+l.x*h,p=this.y+l.y*a;this.roundedRect(t,x,p,h,a,i),t.fillStyle=this.backgroundColor,t.fill();const c=this.x+(l.x+.5)*h,d=this.y+(l.y+.5)*a;this._renderTextShadow(t,this.text,c,d),t.fillStyle=this.textColor,t.fillText(this.text,c,d)}_renderTextShadow(t,e,o,i){t.lineJoin=\"miter\",t.fillStyle=`rgba(${this.textShadowColor[0]}, ${this.textShadowColor[1]}, ${this.textShadowColor[2]}, ${1/h.length})`;const r=this.textShadowSize;for(const[s,l]of h)t.fillText(e,o+r*s,i+r*l)}roundedRect(t,e,o,i,r,s){t.beginPath(),t.moveTo(e,o+s),t.arcTo(e,o,e+s,o,s),t.lineTo(e+i-s,o),t.arcTo(e+i,o,e+i,o+s,s),t.lineTo(e+i,o+r-s),t.arcTo(e+i,o+r,e+i-s,o+r,s),t.lineTo(e+s,o+r),t.arcTo(e,o+r,e,o+r-s,s),t.closePath()}_cssClasses(){const t={\"esri-text-overlay-item\":!0};for(const e in s)t[s[e]]=this.anchor===e;return t}};t([e()],l.prototype,\"x\",void 0),t([e()],l.prototype,\"y\",void 0),t([e()],l.prototype,\"position\",null),t([e()],l.prototype,\"text\",void 0),t([e()],l.prototype,\"fontSize\",void 0),t([e()],l.prototype,\"anchor\",void 0),t([e()],l.prototype,\"visible\",void 0),t([e()],l.prototype,\"padding\",null),l=t([o(\"esri.views.overlay.TextOverlayItem\")],l);const n={bottom:{x:-.5,y:-1,textAlign:\"center\",textBaseline:\"bottom\"},\"bottom-left\":{x:0,y:-1,textAlign:\"left\",textBaseline:\"bottom\"},\"bottom-right\":{x:-1,y:-1,textAlign:\"right\",textBaseline:\"bottom\"},center:{x:-.5,y:-.5,textAlign:\"center\",textBaseline:\"middle\"},left:{x:0,y:-.5,textAlign:\"left\",textBaseline:\"middle\"},right:{x:-1,y:-.5,textAlign:\"right\",textBaseline:\"middle\"},top:{x:-.5,y:0,textAlign:\"center\",textBaseline:\"top\"},\"top-left\":{x:0,y:0,textAlign:\"left\",textBaseline:\"top\"},\"top-right\":{x:-1,y:0,textAlign:\"right\",textBaseline:\"top\"}},h=[];{const t=16;for(let e=0;e<360;e+=360/t)h.push([Math.cos(Math.PI*e/180),Math.sin(Math.PI*e/180)])}var a=l;export default a;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{isSome as t,unwrap as e}from\"../../../../core/maybe.js\";import{createRenderScreenPointArray as s,createRenderScreenPointArray3 as i,createScreenPointArray as o}from\"../../../../core/screenUtils.js\";import{c as r}from\"../../../../chunks/vec3f64.js\";import{b as a}from\"../../../../chunks/vec3.js\";import n from\"../../../../core/Handles.js\";import{n as h,h as c,e as m,a as l,s as _,l as u,d as p}from\"../../../../chunks/vec2.js\";import{VisualElement as d}from\"./VisualElement.js\";import{screenSpaceTangent as x}from\"../measurementTools/support/viewUtils.js\";import b from\"../../../overlay/LineOverlayItem.js\";import v from\"../../../overlay/TextOverlayItem.js\";class f extends d{constructor(t){super(t.view),this._handles=new n,this._textItem=null,this._calloutItem=null,this._showCallout=!0,this._showText=!0,this._geometry=null,this._text=null,this._fontSize=14,this._distance=25,this._anchor=\"right\",this.applyProps(t)}get geometry(){return this._geometry}set geometry(t){this._geometry=t,this._updateLabelPosition()}get textItem(){return this._textItem}get text(){return this._text}set text(t){this._text=t,this.attached&&(this._textItem.text=this._text)}get fontSize(){return this._fontSize}set fontSize(t){this._fontSize=t,this.attached&&(this._textItem.fontSize=this._fontSize)}get distance(){return this._distance}set distance(t){this._distance!==t&&(this._distance=t,this._updateLabelPosition())}get anchor(){return this._anchor}set anchor(t){this._anchor!==t&&(this._anchor=t,this._updateLabelPosition())}overlaps(t){return this.textItem.visible&&t.textItem.visible&&this.view.overlay.overlaps(this._textItem,t.textItem)}_updateLabelPosition(){if(this.attached){if(this._showText=!1,this._showCallout=!1,t(this.geometry)&&this.view._stage)switch(this.geometry.type){case\"point\":this._computeLabelPositionFromPoint(this.geometry,k)&&(this._textItem.position=[k[0],k[1]],this._textItem.anchor=\"center\",this._showText=!0);break;case\"corner\":this._computeLabelPositionFromCorner(this.geometry,this._distance,k,z)&&(this._showCallout=this._updatePosition(k,z),this._showText=!0);break;case\"segment\":this._computeLabelPositionFromSegment(this.geometry,this._distance,this._anchor,k,z)&&(this._showText=!0,this._showCallout=this._updatePosition(k,z))}this.updateVisibility(this.visible)}}_computeLabelPositionFromPoint(t,e){this.view.renderCoordsHelper.toRenderCoords(t,L);const s=this.view._stage.camera;return s.projectToRenderScreen(L,R),!(R[2]<0||R[2]>1)&&(s.renderToScreen(R,e),!0)}_computeLabelPositionFromCorner(t,e,s,i){if(!t)return!1;const o=this.view._stage.camera;return w(t.left,1,o,P),h(P,P),w(t.right,0,o,T),c(j,P,T),h(j,j),m(j,j),o.projectToRenderScreen(t.left.endRenderSpace,R),!(R[2]<0||R[2]>1)&&(o.renderToScreen(R,s),l(j,j,e*o.pixelRatio),c(j,j,R),o.renderToScreen(j,i),!0)}_computeLabelPositionFromSegment(t,e,s,i,o){if(!t)return!1;const r=t.segment,a=this.view._stage.camera;x(r.startRenderSpace,r.endRenderSpace,P,a),_(j,-P[1],P[0]);let n=!1;switch(s){case\"top\":n=j[1]<0;break;case\"bottom\":n=j[1]>0;break;case\"left\":n=j[0]>0;break;case\"right\":n=j[0]<0}if(n&&h(j,j),0===u(j))switch(s){case\"top\":j[1]=1;break;case\"bottom\":j[1]=-1;break;case\"left\":j[0]=-1;break;case\"right\":j[0]=1}return r.eval(H[t.sampleLocation],L),a.projectToRenderScreen(L,R),!(R[2]<0||R[2]>1)&&(a.renderToScreen(R,i),l(j,j,e*a.pixelRatio),c(j,j,R),a.renderToScreen(j,o),!0)}_updatePosition(t,e){if(e){const s=e[0]-t[0],i=e[1]-t[1];return this._textItem.position=[e[0],e[1]],this._textItem.anchor=Math.abs(s)>Math.abs(i)?s>0?\"left\":\"right\":i>0?\"top\":\"bottom\",this._calloutItem.startPosition=[t[0],t[1]],this._calloutItem.endPosition=[e[0],e[1]],!0}return this._textItem.position=[t[0],t[1]],this._textItem.anchor=\"center\",!1}createResources(){this._textItem=new v({visible:!0}),this._textItem.text=e(this._text),this._textItem.fontSize=this._fontSize,this._calloutItem=new b({visible:!0,width:2}),this._updateLabelPosition(),this.view.overlay.items.addMany([this._textItem,this._calloutItem]),this._handles.add(this.view.state.watch(\"camera\",(()=>{this._updateLabelPosition()})))}destroyResources(){this.view.overlay&&!this.view.overlay.destroyed&&this.view.overlay.items.removeMany([this._textItem,this._calloutItem]),this._handles.removeAll()}updateVisibility(t){this._textItem.visible=this._showText&&t,this._calloutItem.visible=this._showCallout&&t}}function w(t,e,s,i){t.eval(e,I,S),a(y,I,S),s.projectToRenderScreen(I,C),s.projectToRenderScreen(y,M),p(i,V,F),m(i,i)}function g(t){switch(t){case\"top\":return\"bottom\";case\"right\":return\"left\";case\"bottom\":return\"top\";case\"left\":return\"right\"}}const I=r(),y=r(),S=r(),P=s(),T=s(),j=s(),L=r(),R=i(),k=o(),z=o(),C=i(),F=C,M=i(),V=M,H={start:0,center:.5,end:1};export{f as LabelVisualElement,g as mirrorPosition,w as screenSpaceTangent};\n"],"sourceRoot":""}