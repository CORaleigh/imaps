{"version":3,"sources":["../node_modules/@arcgis/core/identity/IdentityForm.js","../../index.js","../../src/index.js","../node_modules/@arcgis/core/identity/IdentityModal.js","../node_modules/@arcgis/core/identity/OAuthCredential.js","../node_modules/@arcgis/core/identity/OAuthInfo.js","../node_modules/@arcgis/core/identity/ServerInfo.js","../node_modules/@arcgis/core/identity/IdentityManagerBase.js","../node_modules/@arcgis/core/identity/IdentityManager.js","../node_modules/@arcgis/core/core/JSONSupport.js","../node_modules/@arcgis/core/core/accessorSupport/write.js","../node_modules/@arcgis/core/widgets/support/decorators/messageBundle.js","../node_modules/@arcgis/core/core/accessorSupport/read.js","../node_modules/@arcgis/core/widgets/support/decorators/accessibleHandler.js","../node_modules/@arcgis/core/widgets/support/decorators/vmEvent.js","../node_modules/@arcgis/core/widgets/support/decorators/propUtils.js","../node_modules/@arcgis/core/widgets/support/widget.js"],"names":["l","a","u","constructor","s","e","super","this","_usernameInputNode","_passwordInputNode","messages","signingIn","server","resource","error","oAuthPrompt","render","t","i","d","n","class","r","oAuthInfo","info","test","lblItem","c","lblUser","value","required","autocomplete","spellcheck","type","bind","afterCreate","o","m","lblPwd","h","classes","disabled","lblSigning","lblOk","lblCancel","onclick","_cancel","b","details","httpStatus","invalidUser","noAuthService","onsubmit","_submit","_set","emit","preventDefault","username","password","prototype","candidateSelectors","candidateSelector","matches","Element","getCandidates","candidates","Array","el","includeContainer","getTabindex","tabindexAttr","parseInt","node","isNaN","isContentEditable","sortOrderedTabbables","isInput","isNonTabbableRadio","isRadio","radioScope","queryRadios","name","window","radioSet","err","console","checked","nodes","getCheckedRadio","isTabbableRadio","isNodeMatchingSelectorFocusable","isHiddenInput","getComputedStyle","nodeUnderDetails","displayCheck","width","height","isHidden","options","child","isDetailsWithSummary","isNodeMatchingSelectorTabbable","focusableCandidateSelector","isFocusable","Error","activeFocusTraps","trapQueue","activateTrap","activeTrap","trapIndex","deactivateTrap","delay","setTimeout","fn","findIndex","idx","arr","valueOrHandler","params","createFocusTrap","doc","config","returnFocusOnDeactivate","escapeDeactivates","delayInitialFocus","state","containers","tabbableGroups","nodeFocusedBeforeActivation","mostRecentlyFocusedNode","active","paused","containersContain","container","getNodeForOption","optionValue","getInitialFocusNode","firstTabbableGroup","updateTabbableNodes","tabbableNodes","regularTabbables","orderedTabbables","candidate","candidateTabindex","documentOrder","tabIndex","tabbable","firstTabbableNode","lastTabbableNode","tryFocus","preventScroll","isSelectableInput","checkPointerDown","trap","returnFocus","checkFocusIn","targetContained","checkKey","isEscapeEvent","isTabEvent","destinationNode","startOfGroupIndex","destinationGroupIndex","lastOfGroupIndex","checkTab","checkClick","addListeners","activeFocusDelay","capture","passive","removeListeners","activate","onActivate","activateOptions","deactivate","clearTimeout","onDeactivate","deactivateOptions","pause","unpause","updateContainerElements","elementsAsArray","concat","containerElements","filter","element","document","createElement","content","open","_close","body","appendChild","own","watch","_toggleFocusTrap","destroy","_destroyFocusTrap","id","title","close","p","role","_createFocusTrap","_renderContent","_focusTrap","requestAnimationFrame","initialFocus","cancelAnimationFrame","innerHTML","HTMLElement","_attachToNode","readOnly","aliasOf","storage","appId","expires","ssl","token","userId","_init","isValid","Date","now","minTimeUntilExpiration","save","_load","authNamespace","portalUrl","setItem","JSON","stringify","log","replace","FormData","append","navigator","sendBeacon","XMLHttpRequest","send","_oAuthCred","getItem","parse","declaredClass","expiration","forceLogin","forceUserId","locale","popup","popupCallbackUrl","popupWindowFeatures","preserveUrlHash","clone","fromJSON","toJSON","json","write","adminTokenServiceUrl","currentVersion","hasPortal","hasServer","owningSystemUrl","owningTenant","shortLivedTokenValidity","tokenServiceUrl","webTierAuth","R","host","P","some","C","D","localStorage","sessionStorage","j","I","_portalConfig","esriGeowConfig","serverInfos","oAuthInfos","credentials","_soReqs","_xoReqs","_portals","defaultOAuthInfo","defaultTokenValidity","dialog","formConstructor","y","tokenValidity","normalizeWebTierAuth","_appUrlObj","location","href","_busy","_rejectOnPersistedPageShow","_oAuthHash","_gwTokenUrl","_agsRest","_agsPortal","_agsAdmin","_adminSvcs","_gwDomains","regex","customBaseUrl","_legacyFed","_regexSDirUrl","_regexServerType","_gwUser","_gwItem","_gwGroup","_rePortalTokenSvc","_createDefaultOAuthInfo","_hasTestedIfAppIsOnPortal","_getOAuthHash","addEventListener","_pageShowHandler","registerServers","findServerInfo","forEach","push","registerOAuthInfos","findOAuthInfo","splice","indexOf","registerToken","_sanitizeUrl","_isServerRsrc","O","_getServerInstanceRoot","_getTokenSvcUrl","_findCredential","Object","assign","q","scope","resources","emitTokenChange","refreshServerTokens","map","initialize","length","T","_hasSameServerInstance","findCredential","_getIdenticalSvcIdx","getCredential","prompt","v","signal","S","abort","reject","w","promise","_isAdminResource","resolve","_restInfoPms","_selfReq","origin","selfDfd","_getPortalSelf","_enqueue","getResourceName","_isRESTService","generateToken","toLowerCase","_","f","g","isAdmin","serverUrl","customParameters","scheme","uri","port","query","request","referer","client","method","authMode","useProxy","_useProxy","ioArgs","withCredentials","A","then","data","validity","isBusy","checkSignInStatus","checkAppAccess","credential","_doPortalSignIn","force","client_id","valid","viewOnlyUserTypeApp","catch","viewOnly","setOAuthResponseHash","_oAuthDfd","clearInterval","_oAuthIntervalId","_oAuthOnHashHandle","remove","charAt","substring","error_description","sinfo_","oinfo_","access_token","Number","expires_in","persist","setOAuthRedirectionHandler","_oAuthRedirectFunc","setProtocolErrorHandler","_protocolFunc","signIn","U","on","oAuthSignIn","oAuthWin_","closed","resUrl_","oAuthPopupConfirmation","_doOAuthSignIn","destroyCredentials","slice","enablePostMessageAuth","_postMessageAuthHandle","endsWith","source","postMessage","message","disablePostMessageAuth","hash","hasOwnProperty","persisted","_errbackFunc","_addResource","_removeResource","_findOAuthInfo","_isIdProvider","_isPortalDomain","String","_getOrigin","search","substr","_normalizeAGOLorgDomain","proxyUrl","path","_isIdenticalService","_getSuffix","restBaseUrl","adminUrl","_exchangeToken","_getPlatformSelf","headers","Promise","allSSL","portalMode","supportsOAuth","protocol","_checkProtocol","trim","resourceUrl","serverInfo","options_","admin_","refresh_","focus","_doSignIn","creationTime","shift","parent","x","_pendingDfd","oAuthState","user","portalToken","tokenExpiration","parseFloat","_generateOAuthInfo","accountId","redirect_uri","urlKey","top","response_type","force_login","prepopulatedusername","redirectToUserOrgUrl","setInterval","detail","authorizeParams","authorizeUrl","EventedAccessor","tokenRefreshBuffer","refreshToken","k","_enqueued","_refreshTimer","_startRefreshTimer","read","call","isDefaultToJSON","getLogger","writer","get","overridePolicy","enabled","allowNull","isRequired","propertyName","target","default","defaultEquals","isArray","ignoreOrigin","store","originOf","metadatas","keys","pendingOperations","all","writtenProperties","propName","oldOrigin","newOrigin","_messageBundleProps","bundlePath","getOwnPropertyNames","set","setDefaultOrigin","reader","ignoreDefaults","loaded","loadWarnings","TypeError","KeyboardEvent","key","stopPropagation","click","_delegatedEventNames","split","postMixInProperties","buildRendering","postCreate","startup"],"mappings":"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","file":"static/js/123.8862d3d6.chunk.js","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{_ as s}from\"../chunks/tslib.es6.js\";import\"../core/has.js\";import\"../core/Logger.js\";import\"../core/accessorSupport/ensureType.js\";import{property as e}from\"../core/accessorSupport/decorators/property.js\";import{subclass as t}from\"../core/accessorSupport/decorators/subclass.js\";import\"../core/urlUtils.js\";import\"../core/uuid.js\";import\"../portal/support/resourceExtension.js\";import{substitute as r}from\"../intl/substitute.js\";import{storeNode as o}from\"../widgets/support/widgetUtils.js\";import{messageBundle as i}from\"../widgets/support/decorators/messageBundle.js\";import{j as n}from\"../chunks/index.js\";import u from\"../widgets/Widget.js\";const l={base:\"esri-identity-form\",group:\"esri-identity-form__group\",label:\"esri-identity-form__label\",footer:\"esri-identity-form__footer\",esriInput:\"esri-input\",esriButton:\"esri-button\",esriButtonSecondary:\"esri-button--secondary\"},p=\"ArcGIS Online\";let a=class extends u{constructor(s,e){super(s,e),this._usernameInputNode=null,this._passwordInputNode=null,this.messages=null,this.signingIn=!1,this.server=null,this.resource=null,this.error=null,this.oAuthPrompt=!1}render(){const{error:s,server:e,resource:t,signingIn:i,oAuthPrompt:u,messages:a}=this,d=n(\"div\",{class:l.group},r(u?a.oAuthInfo:a.info,{server:/\\.arcgis\\.com/i.test(e)?p:e,resource:`(${t||a.lblItem})`})),c=u?null:n(\"div\",{class:l.group},n(\"label\",{class:l.label},a.lblUser,n(\"input\",{value:\"\",required:!0,autocomplete:\"off\",spellcheck:!1,type:\"text\",bind:this,afterCreate:o,\"data-node-ref\":\"_usernameInputNode\",class:l.esriInput}))),m=u?null:n(\"div\",{class:l.group},n(\"label\",{class:l.label},a.lblPwd,n(\"input\",{value:\"\",required:!0,type:\"password\",bind:this,afterCreate:o,\"data-node-ref\":\"_passwordInputNode\",class:l.esriInput}))),h=n(\"div\",{class:this.classes(l.group,l.footer)},n(\"input\",{type:\"submit\",disabled:!!i,value:i?a.lblSigning:a.lblOk,class:l.esriButton}),n(\"input\",{type:\"button\",value:a.lblCancel,bind:this,onclick:this._cancel,class:this.classes(l.esriButton,l.esriButtonSecondary)})),b=s?n(\"div\",null,s.details&&s.details.httpStatus?a.invalidUser:a.noAuthService):null;return n(\"form\",{class:l.base,bind:this,onsubmit:this._submit},d,b,c,m,h)}_cancel(){this._set(\"signingIn\",!1),this._usernameInputNode&&(this._usernameInputNode.value=\"\"),this._passwordInputNode&&(this._passwordInputNode.value=\"\"),this.emit(\"cancel\")}_submit(s){s.preventDefault(),this._set(\"signingIn\",!0);const e=this.oAuthPrompt?{}:{username:this._usernameInputNode&&this._usernameInputNode.value,password:this._passwordInputNode&&this._passwordInputNode.value};this.emit(\"submit\",e)}};s([e(),i(\"esri/identity/t9n/identity\")],a.prototype,\"messages\",void 0),s([e()],a.prototype,\"signingIn\",void 0),s([e()],a.prototype,\"server\",void 0),s([e()],a.prototype,\"resource\",void 0),s([e()],a.prototype,\"error\",void 0),s([e()],a.prototype,\"oAuthPrompt\",void 0),a=s([t(\"esri.identity.IdentityForm\")],a);var d=a;export default d;\n","import { tabbable, isFocusable } from 'tabbable';\n\nlet activeFocusDelay;\n\nconst activeFocusTraps = (function () {\n  const trapQueue = [];\n  return {\n    activateTrap(trap) {\n      if (trapQueue.length > 0) {\n        const activeTrap = trapQueue[trapQueue.length - 1];\n        if (activeTrap !== trap) {\n          activeTrap.pause();\n        }\n      }\n\n      const trapIndex = trapQueue.indexOf(trap);\n      if (trapIndex === -1) {\n        trapQueue.push(trap);\n      } else {\n        // move this existing trap to the front of the queue\n        trapQueue.splice(trapIndex, 1);\n        trapQueue.push(trap);\n      }\n    },\n\n    deactivateTrap(trap) {\n      const trapIndex = trapQueue.indexOf(trap);\n      if (trapIndex !== -1) {\n        trapQueue.splice(trapIndex, 1);\n      }\n\n      if (trapQueue.length > 0) {\n        trapQueue[trapQueue.length - 1].unpause();\n      }\n    },\n  };\n})();\n\nconst isSelectableInput = function (node) {\n  return (\n    node.tagName &&\n    node.tagName.toLowerCase() === 'input' &&\n    typeof node.select === 'function'\n  );\n};\n\nconst isEscapeEvent = function (e) {\n  return e.key === 'Escape' || e.key === 'Esc' || e.keyCode === 27;\n};\n\nconst isTabEvent = function (e) {\n  return e.key === 'Tab' || e.keyCode === 9;\n};\n\nconst delay = function (fn) {\n  return setTimeout(fn, 0);\n};\n\n// Array.find/findIndex() are not supported on IE; this replicates enough\n//  of Array.findIndex() for our needs\nconst findIndex = function (arr, fn) {\n  let idx = -1;\n\n  arr.every(function (value, i) {\n    if (fn(value)) {\n      idx = i;\n      return false; // break\n    }\n\n    return true; // next\n  });\n\n  return idx;\n};\n\n/**\n * Get an option's value when it could be a plain value, or a handler that provides\n *  the value.\n * @param {*} value Option's value to check.\n * @param {...*} [params] Any parameters to pass to the handler, if `value` is a function.\n * @returns {*} The `value`, or the handler's returned value.\n */\nconst valueOrHandler = function (value, ...params) {\n  return typeof value === 'function' ? value(...params) : value;\n};\n\nconst createFocusTrap = function (elements, userOptions) {\n  const doc = document;\n\n  const config = {\n    returnFocusOnDeactivate: true,\n    escapeDeactivates: true,\n    delayInitialFocus: true,\n    ...userOptions,\n  };\n\n  const state = {\n    // @type {Array<HTMLElement>}\n    containers: [],\n\n    // list of objects identifying the first and last tabbable nodes in all containers/groups in\n    //  the trap\n    // NOTE: it's possible that a group has no tabbable nodes if nodes get removed while the trap\n    //  is active, but the trap should never get to a state where there isn't at least one group\n    //  with at least one tabbable node in it (that would lead to an error condition that would\n    //  result in an error being thrown)\n    // @type {Array<{ container: HTMLElement, firstTabbableNode: HTMLElement|null, lastTabbableNode: HTMLElement|null }>}\n    tabbableGroups: [],\n\n    nodeFocusedBeforeActivation: null,\n    mostRecentlyFocusedNode: null,\n    active: false,\n    paused: false,\n  };\n\n  let trap; // eslint-disable-line prefer-const -- some private functions reference it, and its methods reference private functions, so we must declare here and define later\n\n  const containersContain = function (element) {\n    return state.containers.some((container) => container.contains(element));\n  };\n\n  const getNodeForOption = function (optionName) {\n    const optionValue = config[optionName];\n    if (!optionValue) {\n      return null;\n    }\n\n    let node = optionValue;\n\n    if (typeof optionValue === 'string') {\n      node = doc.querySelector(optionValue);\n      if (!node) {\n        throw new Error(`\\`${optionName}\\` refers to no known node`);\n      }\n    }\n\n    if (typeof optionValue === 'function') {\n      node = optionValue();\n      if (!node) {\n        throw new Error(`\\`${optionName}\\` did not return a node`);\n      }\n    }\n\n    return node;\n  };\n\n  const getInitialFocusNode = function () {\n    let node;\n\n    if (getNodeForOption('initialFocus') !== null) {\n      node = getNodeForOption('initialFocus');\n    } else if (containersContain(doc.activeElement)) {\n      node = doc.activeElement;\n    } else {\n      const firstTabbableGroup = state.tabbableGroups[0];\n      const firstTabbableNode =\n        firstTabbableGroup && firstTabbableGroup.firstTabbableNode;\n      node = firstTabbableNode || getNodeForOption('fallbackFocus');\n    }\n\n    if (!node) {\n      throw new Error(\n        'Your focus-trap needs to have at least one focusable element'\n      );\n    }\n\n    return node;\n  };\n\n  const updateTabbableNodes = function () {\n    state.tabbableGroups = state.containers\n      .map((container) => {\n        const tabbableNodes = tabbable(container);\n\n        if (tabbableNodes.length > 0) {\n          return {\n            container,\n            firstTabbableNode: tabbableNodes[0],\n            lastTabbableNode: tabbableNodes[tabbableNodes.length - 1],\n          };\n        }\n\n        return undefined;\n      })\n      .filter((group) => !!group); // remove groups with no tabbable nodes\n\n    // throw if no groups have tabbable nodes and we don't have a fallback focus node either\n    if (\n      state.tabbableGroups.length <= 0 &&\n      !getNodeForOption('fallbackFocus')\n    ) {\n      throw new Error(\n        'Your focus-trap must have at least one container with at least one tabbable node in it at all times'\n      );\n    }\n  };\n\n  const tryFocus = function (node) {\n    if (node === doc.activeElement) {\n      return;\n    }\n    if (!node || !node.focus) {\n      tryFocus(getInitialFocusNode());\n      return;\n    }\n\n    node.focus({ preventScroll: !!config.preventScroll });\n    state.mostRecentlyFocusedNode = node;\n\n    if (isSelectableInput(node)) {\n      node.select();\n    }\n  };\n\n  const getReturnFocusNode = function (previousActiveElement) {\n    const node = getNodeForOption('setReturnFocus');\n\n    return node ? node : previousActiveElement;\n  };\n\n  // This needs to be done on mousedown and touchstart instead of click\n  // so that it precedes the focus event.\n  const checkPointerDown = function (e) {\n    if (containersContain(e.target)) {\n      // allow the click since it ocurred inside the trap\n      return;\n    }\n\n    if (valueOrHandler(config.clickOutsideDeactivates, e)) {\n      // immediately deactivate the trap\n      trap.deactivate({\n        // if, on deactivation, we should return focus to the node originally-focused\n        //  when the trap was activated (or the configured `setReturnFocus` node),\n        //  then assume it's also OK to return focus to the outside node that was\n        //  just clicked, causing deactivation, as long as that node is focusable;\n        //  if it isn't focusable, then return focus to the original node focused\n        //  on activation (or the configured `setReturnFocus` node)\n        // NOTE: by setting `returnFocus: false`, deactivate() will do nothing,\n        //  which will result in the outside click setting focus to the node\n        //  that was clicked, whether it's focusable or not; by setting\n        //  `returnFocus: true`, we'll attempt to re-focus the node originally-focused\n        //  on activation (or the configured `setReturnFocus` node)\n        returnFocus: config.returnFocusOnDeactivate && !isFocusable(e.target),\n      });\n      return;\n    }\n\n    // This is needed for mobile devices.\n    // (If we'll only let `click` events through,\n    // then on mobile they will be blocked anyways if `touchstart` is blocked.)\n    if (valueOrHandler(config.allowOutsideClick, e)) {\n      // allow the click outside the trap to take place\n      return;\n    }\n\n    // otherwise, prevent the click\n    e.preventDefault();\n  };\n\n  // In case focus escapes the trap for some strange reason, pull it back in.\n  const checkFocusIn = function (e) {\n    const targetContained = containersContain(e.target);\n    // In Firefox when you Tab out of an iframe the Document is briefly focused.\n    if (targetContained || e.target instanceof Document) {\n      if (targetContained) {\n        state.mostRecentlyFocusedNode = e.target;\n      }\n    } else {\n      // escaped! pull it back in to where it just left\n      e.stopImmediatePropagation();\n      tryFocus(state.mostRecentlyFocusedNode || getInitialFocusNode());\n    }\n  };\n\n  // Hijack Tab events on the first and last focusable nodes of the trap,\n  // in order to prevent focus from escaping. If it escapes for even a\n  // moment it can end up scrolling the page and causing confusion so we\n  // kind of need to capture the action at the keydown phase.\n  const checkTab = function (e) {\n    updateTabbableNodes();\n\n    let destinationNode = null;\n\n    if (state.tabbableGroups.length > 0) {\n      // make sure the target is actually contained in a group\n      const containerIndex = findIndex(state.tabbableGroups, ({ container }) =>\n        container.contains(e.target)\n      );\n\n      if (containerIndex < 0) {\n        // target not found in any group: quite possible focus has escaped the trap,\n        //  so bring it back in to...\n        if (e.shiftKey) {\n          // ...the last node in the last group\n          destinationNode =\n            state.tabbableGroups[state.tabbableGroups.length - 1]\n              .lastTabbableNode;\n        } else {\n          // ...the first node in the first group\n          destinationNode = state.tabbableGroups[0].firstTabbableNode;\n        }\n      } else if (e.shiftKey) {\n        // REVERSE\n        const startOfGroupIndex = findIndex(\n          state.tabbableGroups,\n          ({ firstTabbableNode }) => e.target === firstTabbableNode\n        );\n\n        if (startOfGroupIndex >= 0) {\n          const destinationGroupIndex =\n            startOfGroupIndex === 0\n              ? state.tabbableGroups.length - 1\n              : startOfGroupIndex - 1;\n\n          const destinationGroup = state.tabbableGroups[destinationGroupIndex];\n          destinationNode = destinationGroup.lastTabbableNode;\n        }\n      } else {\n        // FORWARD\n        const lastOfGroupIndex = findIndex(\n          state.tabbableGroups,\n          ({ lastTabbableNode }) => e.target === lastTabbableNode\n        );\n\n        if (lastOfGroupIndex >= 0) {\n          const destinationGroupIndex =\n            lastOfGroupIndex === state.tabbableGroups.length - 1\n              ? 0\n              : lastOfGroupIndex + 1;\n\n          const destinationGroup = state.tabbableGroups[destinationGroupIndex];\n          destinationNode = destinationGroup.firstTabbableNode;\n        }\n      }\n    } else {\n      destinationNode = getNodeForOption('fallbackFocus');\n    }\n\n    if (destinationNode) {\n      e.preventDefault();\n      tryFocus(destinationNode);\n    }\n  };\n\n  const checkKey = function (e) {\n    if (config.escapeDeactivates !== false && isEscapeEvent(e)) {\n      e.preventDefault();\n      trap.deactivate();\n      return;\n    }\n\n    if (isTabEvent(e)) {\n      checkTab(e);\n      return;\n    }\n  };\n\n  const checkClick = function (e) {\n    if (valueOrHandler(config.clickOutsideDeactivates, e)) {\n      return;\n    }\n\n    if (containersContain(e.target)) {\n      return;\n    }\n\n    if (valueOrHandler(config.allowOutsideClick, e)) {\n      return;\n    }\n\n    e.preventDefault();\n    e.stopImmediatePropagation();\n  };\n\n  //\n  // EVENT LISTENERS\n  //\n\n  const addListeners = function () {\n    if (!state.active) {\n      return;\n    }\n\n    // There can be only one listening focus trap at a time\n    activeFocusTraps.activateTrap(trap);\n\n    // Delay ensures that the focused element doesn't capture the event\n    // that caused the focus trap activation.\n    activeFocusDelay = config.delayInitialFocus\n      ? delay(function () {\n          tryFocus(getInitialFocusNode());\n        })\n      : tryFocus(getInitialFocusNode());\n\n    doc.addEventListener('focusin', checkFocusIn, true);\n    doc.addEventListener('mousedown', checkPointerDown, {\n      capture: true,\n      passive: false,\n    });\n    doc.addEventListener('touchstart', checkPointerDown, {\n      capture: true,\n      passive: false,\n    });\n    doc.addEventListener('click', checkClick, {\n      capture: true,\n      passive: false,\n    });\n    doc.addEventListener('keydown', checkKey, {\n      capture: true,\n      passive: false,\n    });\n\n    return trap;\n  };\n\n  const removeListeners = function () {\n    if (!state.active) {\n      return;\n    }\n\n    doc.removeEventListener('focusin', checkFocusIn, true);\n    doc.removeEventListener('mousedown', checkPointerDown, true);\n    doc.removeEventListener('touchstart', checkPointerDown, true);\n    doc.removeEventListener('click', checkClick, true);\n    doc.removeEventListener('keydown', checkKey, true);\n\n    return trap;\n  };\n\n  //\n  // TRAP DEFINITION\n  //\n\n  trap = {\n    activate(activateOptions) {\n      if (state.active) {\n        return this;\n      }\n\n      updateTabbableNodes();\n\n      state.active = true;\n      state.paused = false;\n      state.nodeFocusedBeforeActivation = doc.activeElement;\n\n      const onActivate =\n        activateOptions && activateOptions.onActivate\n          ? activateOptions.onActivate\n          : config.onActivate;\n      if (onActivate) {\n        onActivate();\n      }\n\n      addListeners();\n      return this;\n    },\n\n    deactivate(deactivateOptions) {\n      if (!state.active) {\n        return this;\n      }\n\n      clearTimeout(activeFocusDelay);\n\n      removeListeners();\n      state.active = false;\n      state.paused = false;\n\n      activeFocusTraps.deactivateTrap(trap);\n\n      const onDeactivate =\n        deactivateOptions && deactivateOptions.onDeactivate !== undefined\n          ? deactivateOptions.onDeactivate\n          : config.onDeactivate;\n      if (onDeactivate) {\n        onDeactivate();\n      }\n\n      const returnFocus =\n        deactivateOptions && deactivateOptions.returnFocus !== undefined\n          ? deactivateOptions.returnFocus\n          : config.returnFocusOnDeactivate;\n\n      if (returnFocus) {\n        delay(function () {\n          tryFocus(getReturnFocusNode(state.nodeFocusedBeforeActivation));\n        });\n      }\n\n      return this;\n    },\n\n    pause() {\n      if (state.paused || !state.active) {\n        return this;\n      }\n\n      state.paused = true;\n      removeListeners();\n\n      return this;\n    },\n\n    unpause() {\n      if (!state.paused || !state.active) {\n        return this;\n      }\n\n      state.paused = false;\n      updateTabbableNodes();\n      addListeners();\n\n      return this;\n    },\n\n    updateContainerElements(containerElements) {\n      const elementsAsArray = [].concat(containerElements).filter(Boolean);\n\n      state.containers = elementsAsArray.map((element) =>\n        typeof element === 'string' ? doc.querySelector(element) : element\n      );\n\n      if (state.active) {\n        updateTabbableNodes();\n      }\n\n      return this;\n    },\n  };\n\n  // initialize container elements\n  trap.updateContainerElements(elements);\n\n  return trap;\n};\n\nexport { createFocusTrap };\n","const candidateSelectors = [\n  'input',\n  'select',\n  'textarea',\n  'a[href]',\n  'button',\n  '[tabindex]',\n  'audio[controls]',\n  'video[controls]',\n  '[contenteditable]:not([contenteditable=\"false\"])',\n  'details>summary:first-of-type',\n  'details',\n];\nconst candidateSelector = /* #__PURE__ */ candidateSelectors.join(',');\n\nconst matches =\n  typeof Element === 'undefined'\n    ? function () {}\n    : Element.prototype.matches ||\n      Element.prototype.msMatchesSelector ||\n      Element.prototype.webkitMatchesSelector;\n\nconst getCandidates = function (el, includeContainer, filter) {\n  let candidates = Array.prototype.slice.apply(\n    el.querySelectorAll(candidateSelector)\n  );\n  if (includeContainer && matches.call(el, candidateSelector)) {\n    candidates.unshift(el);\n  }\n  candidates = candidates.filter(filter);\n  return candidates;\n};\n\nconst isContentEditable = function (node) {\n  return node.contentEditable === 'true';\n};\n\nconst getTabindex = function (node) {\n  const tabindexAttr = parseInt(node.getAttribute('tabindex'), 10);\n\n  if (!isNaN(tabindexAttr)) {\n    return tabindexAttr;\n  }\n\n  // Browsers do not return `tabIndex` correctly for contentEditable nodes;\n  // so if they don't have a tabindex attribute specifically set, assume it's 0.\n  if (isContentEditable(node)) {\n    return 0;\n  }\n\n  // in Chrome, <details/>, <audio controls/> and <video controls/> elements get a default\n  //  `tabIndex` of -1 when the 'tabindex' attribute isn't specified in the DOM,\n  //  yet they are still part of the regular tab order; in FF, they get a default\n  //  `tabIndex` of 0; since Chrome still puts those elements in the regular tab\n  //  order, consider their tab index to be 0.\n  if (\n    (node.nodeName === 'AUDIO' ||\n      node.nodeName === 'VIDEO' ||\n      node.nodeName === 'DETAILS') &&\n    node.getAttribute('tabindex') === null\n  ) {\n    return 0;\n  }\n\n  return node.tabIndex;\n};\n\nconst sortOrderedTabbables = function (a, b) {\n  return a.tabIndex === b.tabIndex\n    ? a.documentOrder - b.documentOrder\n    : a.tabIndex - b.tabIndex;\n};\n\nconst isInput = function (node) {\n  return node.tagName === 'INPUT';\n};\n\nconst isHiddenInput = function (node) {\n  return isInput(node) && node.type === 'hidden';\n};\n\nconst isDetailsWithSummary = function (node) {\n  const r =\n    node.tagName === 'DETAILS' &&\n    Array.prototype.slice\n      .apply(node.children)\n      .some((child) => child.tagName === 'SUMMARY');\n  return r;\n};\n\nconst getCheckedRadio = function (nodes, form) {\n  for (let i = 0; i < nodes.length; i++) {\n    if (nodes[i].checked && nodes[i].form === form) {\n      return nodes[i];\n    }\n  }\n};\n\nconst isTabbableRadio = function (node) {\n  if (!node.name) {\n    return true;\n  }\n  const radioScope = node.form || node.ownerDocument;\n\n  const queryRadios = function (name) {\n    return radioScope.querySelectorAll(\n      'input[type=\"radio\"][name=\"' + name + '\"]'\n    );\n  };\n\n  let radioSet;\n  if (\n    typeof window !== 'undefined' &&\n    typeof window.CSS !== 'undefined' &&\n    typeof window.CSS.escape === 'function'\n  ) {\n    radioSet = queryRadios(window.CSS.escape(node.name));\n  } else {\n    try {\n      radioSet = queryRadios(node.name);\n    } catch (err) {\n      // eslint-disable-next-line no-console\n      console.error(\n        'Looks like you have a radio button with a name attribute containing invalid CSS selector characters and need the CSS.escape polyfill: %s',\n        err.message\n      );\n      return false;\n    }\n  }\n\n  const checked = getCheckedRadio(radioSet, node.form);\n  return !checked || checked === node;\n};\n\nconst isRadio = function (node) {\n  return isInput(node) && node.type === 'radio';\n};\n\nconst isNonTabbableRadio = function (node) {\n  return isRadio(node) && !isTabbableRadio(node);\n};\n\nconst isHidden = function (node, displayCheck) {\n  if (getComputedStyle(node).visibility === 'hidden') {\n    return true;\n  }\n\n  const isDirectSummary = matches.call(node, 'details>summary:first-of-type');\n  const nodeUnderDetails = isDirectSummary ? node.parentElement : node;\n  if (matches.call(nodeUnderDetails, 'details:not([open]) *')) {\n    return true;\n  }\n  if (!displayCheck || displayCheck === 'full') {\n    while (node) {\n      if (getComputedStyle(node).display === 'none') {\n        return true;\n      }\n      node = node.parentElement;\n    }\n  } else if (displayCheck === 'non-zero-area') {\n    const { width, height } = node.getBoundingClientRect();\n    return width === 0 && height === 0;\n  }\n\n  return false;\n};\n\nconst isNodeMatchingSelectorFocusable = function (options, node) {\n  if (\n    node.disabled ||\n    isHiddenInput(node) ||\n    isHidden(node, options.displayCheck) ||\n    /* For a details element with a summary, the summary element gets the focused  */\n    isDetailsWithSummary(node)\n  ) {\n    return false;\n  }\n  return true;\n};\n\nconst isNodeMatchingSelectorTabbable = function (options, node) {\n  if (\n    !isNodeMatchingSelectorFocusable(options, node) ||\n    isNonTabbableRadio(node) ||\n    getTabindex(node) < 0\n  ) {\n    return false;\n  }\n  return true;\n};\n\nconst tabbable = function (el, options) {\n  options = options || {};\n\n  const regularTabbables = [];\n  const orderedTabbables = [];\n\n  const candidates = getCandidates(\n    el,\n    options.includeContainer,\n    isNodeMatchingSelectorTabbable.bind(null, options)\n  );\n\n  candidates.forEach(function (candidate, i) {\n    const candidateTabindex = getTabindex(candidate);\n    if (candidateTabindex === 0) {\n      regularTabbables.push(candidate);\n    } else {\n      orderedTabbables.push({\n        documentOrder: i,\n        tabIndex: candidateTabindex,\n        node: candidate,\n      });\n    }\n  });\n\n  const tabbableNodes = orderedTabbables\n    .sort(sortOrderedTabbables)\n    .map((a) => a.node)\n    .concat(regularTabbables);\n\n  return tabbableNodes;\n};\n\nconst focusable = function (el, options) {\n  options = options || {};\n\n  const candidates = getCandidates(\n    el,\n    options.includeContainer,\n    isNodeMatchingSelectorFocusable.bind(null, options)\n  );\n\n  return candidates;\n};\n\nconst isTabbable = function (node, options) {\n  options = options || {};\n  if (!node) {\n    throw new Error('No node provided');\n  }\n  if (matches.call(node, candidateSelector) === false) {\n    return false;\n  }\n  return isNodeMatchingSelectorTabbable(options, node);\n};\n\nconst focusableCandidateSelector = /* #__PURE__ */ candidateSelectors\n  .concat('iframe')\n  .join(',');\n\nconst isFocusable = function (node, options) {\n  options = options || {};\n  if (!node) {\n    throw new Error('No node provided');\n  }\n  if (matches.call(node, focusableCandidateSelector) === false) {\n    return false;\n  }\n  return isNodeMatchingSelectorFocusable(options, node);\n};\n\nexport { tabbable, focusable, isTabbable, isFocusable };\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{_ as t}from\"../chunks/tslib.es6.js\";import\"../core/has.js\";import\"../core/Logger.js\";import\"../core/accessorSupport/ensureType.js\";import{makeHandle as e}from\"../core/handleUtils.js\";import{property as o}from\"../core/accessorSupport/decorators/property.js\";import{subclass as s}from\"../core/accessorSupport/decorators/subclass.js\";import\"../core/urlUtils.js\";import\"../core/uuid.js\";import\"../portal/support/resourceExtension.js\";import{messageBundle as i}from\"../widgets/support/decorators/messageBundle.js\";import{j as r}from\"../chunks/index.js\";import{isWidget as n}from\"../widgets/support/widget.js\";import a from\"../widgets/Widget.js\";import{createFocusTrap as c}from\"focus-trap\";const l={base:\"esri-identity-modal\",open:\"esri-identity-modal--open\",closed:\"esri-identity-modal--closed\",title:\"esri-identity-modal__title\",dialog:\"esri-identity-modal__dialog\",content:\"esri-identity-modal__content\",closeButton:\"esri-identity-modal__close-button\",iconClose:\"esri-icon-close\"};let d=class extends a{constructor(t,e){super(t,e),this.container=document.createElement(\"div\"),this.content=null,this.open=!1,this._close=()=>{this.open=!1},document.body.appendChild(this.container),this.own(this.watch(\"open\",(()=>this._toggleFocusTrap())))}destroy(){this._destroyFocusTrap()}render(){const t=this.id,{open:e,content:o,title:s,messages:i}=this,n=e&&!!o,a={[l.open]:n,[l.closed]:!n},c=r(\"button\",{class:l.closeButton,\"aria-label\":i.close,title:i.close,bind:this,onclick:this._close},r(\"span\",{\"aria-hidden\":\"true\",class:l.iconClose})),d=`${t}_title`,p=`${t}_content`,u=s?r(\"h1\",{id:d,class:l.title},s):null,m=n?r(\"div\",{bind:this,class:l.dialog,role:\"dialog\",\"aria-labelledby\":d,\"aria-describedby\":p,afterCreate:this._createFocusTrap},c,u,this._renderContent(p)):null;return r(\"div\",{tabIndex:-1,class:this.classes(l.base,a)},m)}_destroyFocusTrap(){var t;null==(t=this._focusTrap)||t.deactivate({onDeactivate:null}),this._focusTrap=null}_toggleFocusTrap(){const{_focusTrap:t,open:e}=this;t&&(e?t.activate():t.deactivate())}_createFocusTrap(t){this._destroyFocusTrap();const o=requestAnimationFrame((()=>{this._focusTrap=c(t,{initialFocus:\"input\",onDeactivate:this._close}),this._toggleFocusTrap()}));this.own(e((()=>cancelAnimationFrame(o))))}_renderContent(t){const e=this.content;return\"string\"==typeof e?r(\"div\",{class:l.content,id:t,innerHTML:e}):n(e)?r(\"div\",{class:l.content,id:t},e.render()):e instanceof HTMLElement?r(\"div\",{class:l.content,id:t,bind:e,afterCreate:this._attachToNode}):null}_attachToNode(t){const e=this;t.appendChild(e)}};t([o({readOnly:!0})],d.prototype,\"container\",void 0),t([o()],d.prototype,\"content\",void 0),t([o()],d.prototype,\"open\",void 0),t([o(),i(\"esri/t9n/common\")],d.prototype,\"messages\",void 0),t([o({aliasOf:\"messages.auth.signIn\"})],d.prototype,\"title\",void 0),d=t([s(\"esri.identity.IdentityModal\")],d);var p=d;export default p;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nconst t=\"esriJSAPIOAuth\";class s{constructor(t,s){this.oAuthInfo=null,this.storage=null,this.appId=null,this.expires=null,this.ssl=null,this.token=null,this.userId=null,this.oAuthInfo=t,this.storage=s,this._init()}isValid(){let t=!1;if(this.oAuthInfo&&this.token&&this.userId){const s=Date.now();if(this.expires>s){(this.expires-s)/1e3>60*this.oAuthInfo.minTimeUntilExpiration&&(t=!0)}}return t}save(){if(!this.storage)return;const s=this._load(),e=this.oAuthInfo;if(e&&e.authNamespace&&e.portalUrl){let o=s[e.authNamespace];o||(o=s[e.authNamespace]={}),o[e.portalUrl]={appId:this.appId=e.appId,expires:this.expires,ssl:this.ssl,token:this.token,userId:this.userId};try{this.storage.setItem(t,JSON.stringify(s))}catch(i){console.log(i)}}}destroy(){const s=this._load(),e=this.oAuthInfo;if(e&&e.appId&&e.portalUrl&&this.token&&this.expires>Date.now()){const t=e.portalUrl.replace(/^http:/i,\"https:\")+\"/sharing/rest/oauth2/revokeToken\",s=new FormData;if(s.append(\"f\",\"json\"),s.append(\"auth_token\",this.token),s.append(\"client_id\",e.appId),s.append(\"token_type_hint\",\"access_token\"),\"function\"==typeof navigator.sendBeacon)navigator.sendBeacon(t,s);else{const e=new XMLHttpRequest;e.open(\"POST\",t),e.send(s)}}if(e&&e.authNamespace&&e.portalUrl&&this.storage){const o=s[e.authNamespace];if(o){delete o[e.portalUrl];try{this.storage.setItem(t,JSON.stringify(s))}catch(i){console.log(i)}}}e&&(e._oAuthCred=null,this.oAuthInfo=null)}_init(){const t=this._load(),s=this.oAuthInfo;if(s&&s.authNamespace&&s.portalUrl){let e=t[s.authNamespace];e&&(e=e[s.portalUrl],e&&(this.appId=e.appId,this.expires=e.expires,this.ssl=e.ssl,this.token=e.token,this.userId=e.userId))}}_load(){let s={};if(this.storage){const i=this.storage.getItem(t);if(i)try{s=JSON.parse(i)}catch(e){console.log(e)}}return s}}s.prototype.declaredClass=\"esri.identity.OAuthCredential\";export default s;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{_ as o}from\"../chunks/tslib.es6.js\";import\"../core/has.js\";import\"../core/Logger.js\";import\"../core/accessorSupport/ensureType.js\";import{property as r}from\"../core/accessorSupport/decorators/property.js\";import{subclass as t}from\"../core/accessorSupport/decorators/subclass.js\";import\"../core/urlUtils.js\";import\"../core/uuid.js\";import\"../portal/support/resourceExtension.js\";import{JSONSupport as e}from\"../core/JSONSupport.js\";var p;let s=p=class extends e{constructor(o){super(o),this._oAuthCred=null,this.appId=null,this.authNamespace=\"/\",this.expiration=20160,this.forceLogin=!1,this.forceUserId=!1,this.locale=null,this.minTimeUntilExpiration=30,this.popup=!1,this.popupCallbackUrl=\"oauth-callback.html\",this.popupWindowFeatures=\"height=490,width=800,resizable,scrollbars,status\",this.portalUrl=\"https://www.arcgis.com\",this.preserveUrlHash=!1,this.userId=null}clone(){return p.fromJSON(this.toJSON())}};o([r({json:{write:!0}})],s.prototype,\"appId\",void 0),o([r({json:{write:!0}})],s.prototype,\"authNamespace\",void 0),o([r({json:{write:!0}})],s.prototype,\"expiration\",void 0),o([r({json:{write:!0}})],s.prototype,\"forceLogin\",void 0),o([r({json:{write:!0}})],s.prototype,\"forceUserId\",void 0),o([r({json:{write:!0}})],s.prototype,\"locale\",void 0),o([r({json:{write:!0}})],s.prototype,\"minTimeUntilExpiration\",void 0),o([r({json:{write:!0}})],s.prototype,\"popup\",void 0),o([r({json:{write:!0}})],s.prototype,\"popupCallbackUrl\",void 0),o([r({json:{write:!0}})],s.prototype,\"popupWindowFeatures\",void 0),o([r({json:{write:!0}})],s.prototype,\"portalUrl\",void 0),o([r({json:{write:!0}})],s.prototype,\"preserveUrlHash\",void 0),o([r({json:{write:!0}})],s.prototype,\"userId\",void 0),s=p=o([t(\"esri.identity.OAuthInfo\")],s);var i=s;export default i;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{_ as r}from\"../chunks/tslib.es6.js\";import\"../core/has.js\";import\"../core/Logger.js\";import\"../core/accessorSupport/ensureType.js\";import{property as o}from\"../core/accessorSupport/decorators/property.js\";import{subclass as e}from\"../core/accessorSupport/decorators/subclass.js\";import\"../core/urlUtils.js\";import\"../core/uuid.js\";import\"../portal/support/resourceExtension.js\";import{JSONSupport as t}from\"../core/JSONSupport.js\";let s=class extends t{constructor(r){super(r),this.adminTokenServiceUrl=null,this.currentVersion=null,this.hasPortal=null,this.hasServer=null,this.owningSystemUrl=null,this.owningTenant=null,this.server=null,this.shortLivedTokenValidity=null,this.tokenServiceUrl=null,this.webTierAuth=null}};r([o({json:{write:!0}})],s.prototype,\"adminTokenServiceUrl\",void 0),r([o({json:{write:!0}})],s.prototype,\"currentVersion\",void 0),r([o({json:{write:!0}})],s.prototype,\"hasPortal\",void 0),r([o({json:{write:!0}})],s.prototype,\"hasServer\",void 0),r([o({json:{write:!0}})],s.prototype,\"owningSystemUrl\",void 0),r([o({json:{write:!0}})],s.prototype,\"owningTenant\",void 0),r([o({json:{write:!0}})],s.prototype,\"server\",void 0),r([o({json:{write:!0}})],s.prototype,\"shortLivedTokenValidity\",void 0),r([o({json:{write:!0}})],s.prototype,\"tokenServiceUrl\",void 0),r([o({json:{write:!0}})],s.prototype,\"webTierAuth\",void 0),s=r([e(\"esri.identity.ServerInfo\")],s);var i=s;export default i;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../chunks/tslib.es6.js\";import t from\"../core/global.js\";import\"../core/has.js\";import{fixJson as s}from\"../core/lang.js\";import{getDeepValue as r}from\"../core/object.js\";import i from\"../config.js\";import\"../core/Logger.js\";import\"../core/accessorSupport/ensureType.js\";import{property as o}from\"../core/accessorSupport/decorators/property.js\";import{subclass as n}from\"../core/accessorSupport/decorators/subclass.js\";import a from\"../core/Error.js\";import{urlToObject as h,hasSameOrigin as l,Url as c,queryToObject as d,normalize as u,getProxyRule as p,makeAbsolute as _,objectToQuery as f}from\"../core/urlUtils.js\";import\"../core/uuid.js\";import\"../portal/support/resourceExtension.js\";import{on as g}from\"../core/events.js\";import{createAbortController as m,createResolver as v,onAbort as S,isAborted as w}from\"../core/promiseUtils.js\";import I from\"../core/Evented.js\";import{id as k}from\"../kernel.js\";import A from\"../request.js\";import y from\"./IdentityForm.js\";import U from\"./IdentityModal.js\";import x from\"./OAuthCredential.js\";import T from\"./OAuthInfo.js\";import O from\"./ServerInfo.js\";const R={},b=e=>{const t=new c(e.owningSystemUrl).host,s=new c(e.server).host,r=/.+\\.arcgis\\.com$/i;return r.test(t)&&r.test(s)},P=(e,t)=>!!(b(e)&&t&&t.some((t=>t.test(e.server))));let C=null,D=null;try{C=window.localStorage,D=window.sessionStorage}catch{}let j=class extends I{constructor(){super(),this._portalConfig=t.esriGeowConfig,this.serverInfos=[],this.oAuthInfos=[],this.credentials=[],this._soReqs=[],this._xoReqs=[],this._portals=[],this.defaultOAuthInfo=null,this.defaultTokenValidity=60,this.dialog=null,this.formConstructor=y,this.tokenValidity=null,this.normalizeWebTierAuth=!1,this._appUrlObj=h(window.location.href),this._busy=null,this._rejectOnPersistedPageShow=!1,this._oAuthHash=null,this._gwTokenUrl=\"/sharing/rest/generateToken\",this._agsRest=\"/rest/services\",this._agsPortal=/\\/sharing(\\/|$)/i,this._agsAdmin=/(https?:\\/\\/[^\\/]+\\/[^\\/]+)\\/admin\\/?(\\/.*)?$/i,this._adminSvcs=/\\/rest\\/admin\\/services(\\/|$)/i,this._gwDomains=[{regex:/^https?:\\/\\/www\\.arcgis\\.com/i,customBaseUrl:\"maps.arcgis.com\",tokenServiceUrl:\"https://www.arcgis.com/sharing/rest/generateToken\"},{regex:/^https?:\\/\\/(?:dev|[a-z\\d-]+\\.mapsdev)\\.arcgis\\.com/i,customBaseUrl:\"mapsdev.arcgis.com\",tokenServiceUrl:\"https://dev.arcgis.com/sharing/rest/generateToken\"},{regex:/^https?:\\/\\/(?:devext|[a-z\\d-]+\\.mapsdevext)\\.arcgis\\.com/i,customBaseUrl:\"mapsdevext.arcgis.com\",tokenServiceUrl:\"https://devext.arcgis.com/sharing/rest/generateToken\"},{regex:/^https?:\\/\\/(?:qaext|[a-z\\d-]+\\.mapsqa)\\.arcgis\\.com/i,customBaseUrl:\"mapsqa.arcgis.com\",tokenServiceUrl:\"https://qaext.arcgis.com/sharing/rest/generateToken\"},{regex:/^https?:\\/\\/[a-z\\d-]+\\.maps\\.arcgis\\.com/i,customBaseUrl:\"maps.arcgis.com\",tokenServiceUrl:\"https://www.arcgis.com/sharing/rest/generateToken\"}],this._legacyFed=[],this._regexSDirUrl=/http.+\\/rest\\/services\\/?/gi,this._regexServerType=/(\\/(FeatureServer|GPServer|GeoDataServer|GeocodeServer|GeoenrichmentServer|GeometryServer|GlobeServer|ImageServer|MapServer|MobileServer|NAServer|NetworkDiagramServer|ParcelFabricServer|RelationalCatalogServer|SceneServer|StreamServer|UtilityNetworkServer|ValidationServer|VectorTileServer|VersionManagementServer)).*/gi,this._gwUser=/http.+\\/users\\/([^\\/]+)\\/?.*/i,this._gwItem=/http.+\\/items\\/([^\\/]+)\\/?.*/i,this._gwGroup=/http.+\\/groups\\/([^\\/]+)\\/?.*/i,this._rePortalTokenSvc=/\\/sharing(\\/rest)?\\/generatetoken/i,this._createDefaultOAuthInfo=!0,this._hasTestedIfAppIsOnPortal=!1,this._getOAuthHash(),window.addEventListener(\"pageshow\",(e=>{this._pageShowHandler(e)}))}registerServers(e){const t=this.serverInfos;t?(e=e.filter((e=>!this.findServerInfo(e.server))),this.serverInfos=t.concat(e)):this.serverInfos=e,e.forEach((e=>{e.owningSystemUrl&&this._portals.push(e.owningSystemUrl),e.hasPortal&&this._portals.push(e.server)}))}registerOAuthInfos(e){const t=this.oAuthInfos;if(t){for(const s of e){const e=this.findOAuthInfo(s.portalUrl);e&&t.splice(t.indexOf(e),1)}this.oAuthInfos=t.concat(e)}else this.oAuthInfos=e}registerToken(e){e={...e};const t=this._sanitizeUrl(e.server),s=this._isServerRsrc(t);let r,i=this.findServerInfo(t),o=!0;i||(i=new O,i.server=this._getServerInstanceRoot(t),s?i.hasServer=!0:(i.tokenServiceUrl=this._getTokenSvcUrl(t),i.hasPortal=!0),this.registerServers([i])),r=this._findCredential(t),r?(delete e.server,Object.assign(r,e),o=!1):(r=new q({userId:e.userId,server:i.server,token:e.token,expires:e.expires,ssl:e.ssl,scope:s?\"server\":\"portal\"}),r.resources=[t],this.credentials.push(r)),r.emitTokenChange(!1),o||r.refreshServerTokens()}toJSON(){return s({serverInfos:this.serverInfos.map((e=>e.toJSON())),oAuthInfos:this.oAuthInfos.map((e=>e.toJSON())),credentials:this.credentials.map((e=>e.toJSON()))})}initialize(e){if(!e)return;\"string\"==typeof e&&(e=JSON.parse(e));const t=e.serverInfos,s=e.oAuthInfos,r=e.credentials;if(t){const e=[];t.forEach((t=>{t.server&&t.tokenServiceUrl&&e.push(t.declaredClass?t:new O(t))})),e.length&&this.registerServers(e)}if(s){const e=[];s.forEach((t=>{t.appId&&e.push(t.declaredClass?t:new T(t))})),e.length&&this.registerOAuthInfos(e)}r&&r.forEach((e=>{e.server&&e.token&&e.expires&&e.expires>Date.now()&&((e=e.declaredClass?e:new q(e)).emitTokenChange(),this.credentials.push(e))}))}findServerInfo(e){let t;e=this._sanitizeUrl(e);for(const s of this.serverInfos)if(this._hasSameServerInstance(s.server,e)){t=s;break}return t}findOAuthInfo(e){let t;e=this._sanitizeUrl(e);for(const s of this.oAuthInfos)if(this._hasSameServerInstance(s.portalUrl,e)){t=s;break}return t}findCredential(e,t){let s;e=this._sanitizeUrl(e);const r=this._isServerRsrc(e)?\"server\":\"portal\";if(t){for(const i of this.credentials)if(this._hasSameServerInstance(i.server,e)&&t===i.userId&&i.scope===r){s=i;break}}else for(const i of this.credentials)if(this._hasSameServerInstance(i.server,e)&&-1!==this._getIdenticalSvcIdx(e,i)&&i.scope===r){s=i;break}return s}getCredential(e,t){let s,r,i=!0;t&&(s=!!t.token,r=t.error,i=!1!==t.prompt),t={...t},e=this._sanitizeUrl(e);const o=m(),n=v();if(t.signal&&S(t.signal,(()=>{o.abort()})),S(o,(()=>{n.reject(new a(\"identity-manager:user-aborted\",\"ABORTED\"))})),w(o))return n.promise;t.signal=o.signal;const h=this._isAdminResource(e),c=s?this.findCredential(e):null;let d;if(c&&r&&r.details&&498===r.details.httpStatus)c.destroy();else if(c)return d=new a(\"identity-manager:not-authorized\",\"You are currently signed in as: '\"+c.userId+\"'. You do not have access to this resource: \"+e,{error:r}),n.reject(d),n.promise;const u=this._findCredential(e,t);if(u)return n.resolve(u),n.promise;let p=this.findServerInfo(e);if(p)!p.hasServer&&this._isServerRsrc(e)&&(p._restInfoPms=this._getTokenSvcUrl(e),p.hasServer=!0);else{const t=this._getTokenSvcUrl(e);if(!t)return d=new a(\"identity-manager:unknown-resource\",\"Unknown resource - could not find token service endpoint.\"),n.reject(d),n.promise;p=new O,p.server=this._getServerInstanceRoot(e),\"string\"==typeof t?(p.tokenServiceUrl=t,p.hasPortal=!0):(p._restInfoPms=t,p.hasServer=!0),this.registerServers([p])}return p.hasPortal&&void 0===p._selfReq&&(i||l(p.tokenServiceUrl,window.location.origin)||this._gwDomains.some((e=>e.tokenServiceUrl===p.tokenServiceUrl)))&&(p._selfReq={owningTenant:t&&t.owningTenant,selfDfd:this._getPortalSelf(p.tokenServiceUrl.replace(this._rePortalTokenSvc,\"/sharing/rest/portals/self\"),e)}),this._enqueue(e,p,t,n,h)}getResourceName(e){return this._isRESTService(e)?e.replace(this._regexSDirUrl,\"\").replace(this._regexServerType,\"\")||\"\":this._gwUser.test(e)&&e.replace(this._gwUser,\"$1\")||this._gwItem.test(e)&&e.replace(this._gwItem,\"$1\")||this._gwGroup.test(e)&&e.replace(this._gwGroup,\"$1\")||\"\"}generateToken(e,t,s){const r=this._rePortalTokenSvc.test(e.tokenServiceUrl),i=new c(window.location.href.toLowerCase()),o=e.shortLivedTokenValidity;let n,h,d,u,p,_,f,g;t&&(g=this.tokenValidity||o||this.defaultTokenValidity,g>o&&o>0&&(g=o)),s&&(n=s.isAdmin,h=s.serverUrl,d=s.token,_=s.signal,f=s.ssl,e.customParameters=s.customParameters),n?u=e.adminTokenServiceUrl:(u=e.tokenServiceUrl,p=new c(u.toLowerCase()),e.webTierAuth&&s&&s.serverUrl&&!f&&\"http\"===i.scheme&&(l(i.uri,u,!0)||\"https\"===p.scheme&&i.host===p.host&&\"7080\"===i.port&&\"7443\"===p.port)&&(u=u.replace(/^https:/i,\"http:\").replace(/:7443/i,\":7080\")));const m={query:{request:\"getToken\",username:null==t?void 0:t.username,password:null==t?void 0:t.password,serverUrl:h,token:d,expiration:g,referer:n||r?window.location.host:null,client:n?\"referer\":null,f:\"json\",...e.customParameters},method:\"post\",authMode:\"anonymous\",useProxy:this._useProxy(e,s),signal:_,...null==s?void 0:s.ioArgs};r||(m.withCredentials=!1);return A(u,m).then((s=>{const r=s.data;if(!r||!r.token)return new a(\"identity-manager:authentication-failed\",\"Unable to generate token\");const i=e.server;return R[i]||(R[i]={}),t&&(R[i][t.username]=t.password),r.validity=g,r}))}isBusy(){return!!this._busy}checkSignInStatus(e){return this.checkAppAccess(e,\"\").then((e=>e.credential))}checkAppAccess(e,t,s){let r=!1;return this.getCredential(e,{prompt:!1}).then((i=>{let o;const n={f:\"json\"};if(\"portal\"===i.scope)if(t&&(this._doPortalSignIn(e)||s&&s.force))o=i.server+\"/sharing/rest/oauth2/validateAppAccess\",n.client_id=t;else{if(!i.token)return{credential:i};o=i.server+\"/sharing/rest\"}else{if(!i.token)return{credential:i};o=i.server+\"/rest/services\"}return i.token&&(n.token=i.token),A(o,{query:n,authMode:\"anonymous\"}).then((e=>{if(!1===e.data.valid)throw new a(\"identity-manager:not-authorized\",`You are currently signed in as: '${i.userId}'.`,e.data);return r=!!e.data.viewOnlyUserTypeApp,{credential:i}})).catch((e=>{if(\"identity-manager:not-authorized\"===e.name)throw e;const t=e.details&&e.details.httpStatus;if(498===t)throw i.destroy(),new a(\"identity-manager:not-authenticated\",\"User is not signed in.\");if(400===t)throw new a(\"identity-manager:invalid-request\");return{credential:i}}))})).then((e=>({credential:e.credential,viewOnly:r})))}setOAuthResponseHash(e){var t;const s=this._oAuthDfd;if(this._oAuthDfd=null,!s||!e)return;clearInterval(this._oAuthIntervalId),null==(t=this._oAuthOnHashHandle)||t.remove(),\"#\"===e.charAt(0)&&(e=e.substring(1));const r=d(e);if(r.error){const e=\"access_denied\"===r.error,t=new a(e?\"identity-manager:user-aborted\":\"identity-manager:authentication-failed\",e?\"ABORTED\":\"OAuth: \"+r.error+\" - \"+r.error_description);s.reject(t)}else{const e=s.sinfo_,t=s.oinfo_,i=t._oAuthCred,o=new q({userId:r.username,server:e.server,token:r.access_token,expires:Date.now()+1e3*Number(r.expires_in),ssl:\"true\"===r.ssl,_oAuthCred:i});t.userId=o.userId,i.storage=r.persist?C:D,i.token=o.token,i.expires=o.expires,i.userId=o.userId,i.ssl=o.ssl,i.save(),s.resolve(o)}}setOAuthRedirectionHandler(e){this._oAuthRedirectFunc=e}setProtocolErrorHandler(e){this._protocolFunc=e}signIn(e,t,s={}){const r=v(),i=()=>{var e,t,s,r,i;null==(e=h)||e.remove(),null==(t=l)||t.remove(),null==(s=c)||s.remove(),null==(r=n)||r.destroy(),null==(i=this.dialog)||i.destroy(),this.dialog=n=h=l=c=null},o=()=>{i(),this._oAuthDfd=null,r.reject(new a(\"identity-manager:user-aborted\",\"ABORTED\"))};s.signal&&S(s.signal,(()=>{o()}));let n=new this.formConstructor;n.resource=this.getResourceName(e),n.server=t.server,this.dialog=new U,this.dialog.content=n,this.dialog.open=!0,this.emit(\"dialog-create\");let h=n.on(\"cancel\",o),l=this.dialog.watch(\"open\",o),c=n.on(\"submit\",(e=>{this.generateToken(t,e,{isAdmin:s.isAdmin,signal:s.signal}).then((o=>{i();const n=new q({userId:e.username,server:t.server,token:o.token,expires:null!=o.expires?Number(o.expires):null,ssl:!!o.ssl,isAdmin:s.isAdmin,validity:o.validity});r.resolve(n)})).catch((e=>{n.error=e,n.signingIn=!1}))}));return r.promise}oAuthSignIn(e,t,s,r){this._oAuthDfd=v();const i=this._oAuthDfd;null!=r&&r.signal&&S(r.signal,(()=>{const e=this._oAuthDfd&&this._oAuthDfd.oAuthWin_;e&&!e.closed?e.close():this.dialog&&h()})),i.resUrl_=e,i.sinfo_=t,i.oinfo_=s;const o=!r||!1!==r.oAuthPopupConfirmation;if(!s.popup||!o)return this._doOAuthSignIn(e,t,s),i.promise;const n=new this.formConstructor;n.oAuthPrompt=!0,n.server=t.server,this.dialog=new U,this.dialog.content=n,this.dialog.open=!0,this.emit(\"dialog-create\");const h=()=>{u(),this._oAuthDfd=null,i.reject(new a(\"identity-manager:user-aborted\",\"ABORTED\"))},l=n.on(\"cancel\",h),c=this.dialog.watch(\"open\",h),d=n.on(\"submit\",(()=>{u(),this._doOAuthSignIn(e,t,s)})),u=()=>{l.remove(),c.remove(),d.remove(),n.destroy(),this.dialog.destroy(),this.dialog=null};return i.promise}destroyCredentials(){if(this.credentials){this.credentials.slice().forEach((e=>{e.destroy()}))}this.emit(\"credentials-destroy\")}enablePostMessageAuth(e=\"https://www.arcgis.com/sharing/rest\"){this._postMessageAuthHandle&&this._postMessageAuthHandle.remove(),this._postMessageAuthHandle=g(window,\"message\",(t=>{var s;if((t.origin===window.location.origin||t.origin.endsWith(\".arcgis.com\"))&&\"arcgis:auth:requestCredential\"===(null==(s=t.data)?void 0:s.type)){const s=t.source;this.getCredential(e).then((e=>{s.postMessage({type:\"arcgis:auth:credential\",credential:{expires:e.expires,server:e.server,ssl:e.ssl,token:e.token,userId:e.userId}},t.origin)})).catch((e=>{s.postMessage({type:\"arcgis:auth:error\",error:{name:e.name,message:e.message}},t.origin)}))}}))}disablePostMessageAuth(){this._postMessageAuthHandle&&(this._postMessageAuthHandle.remove(),this._postMessageAuthHandle=null)}_getOAuthHash(){let e=window.location.hash;if(e){\"#\"===e.charAt(0)&&(e=e.substring(1));const t=d(e);let s=!1;if(t.access_token&&t.expires_in&&t.state&&t.hasOwnProperty(\"username\"))try{t.state=JSON.parse(t.state),\"object\"==typeof t.state&&t.state.portalUrl&&(this._oAuthHash=t,s=!0)}catch{}else t.error&&t.error_description&&(console.log(\"IdentityManager OAuth Error: \",t.error,\" - \",t.error_description),\"access_denied\"===t.error&&(s=!0));s&&(window.location.hash=\"object\"==typeof t.state&&t.state.hash||\"\")}}_pageShowHandler(e){if(e.persisted&&this.isBusy()&&this._rejectOnPersistedPageShow){const e=new a(\"identity-manager:user-aborted\",\"ABORTED\");this._errbackFunc(e)}}_findCredential(e,t){let s,r,i,o,n=-1;const a=t&&t.token,h=t&&t.resource,l=this._isServerRsrc(e)?\"server\":\"portal\",c=this.credentials.filter((t=>this._hasSameServerInstance(t.server,e)&&t.scope===l));if(e=h||e,c.length)if(1===c.length){if(s=c[0],o=this.findServerInfo(s.server),r=o&&o.owningSystemUrl,i=r&&this.findCredential(r,s.userId),n=this._getIdenticalSvcIdx(e,s),!a)return-1===n&&s.resources.push(e),this._addResource(e,i),s;-1!==n&&(s.resources.splice(n,1),this._removeResource(e,i))}else{let t,s;if(c.some((a=>(s=this._getIdenticalSvcIdx(e,a),-1!==s&&(t=a,o=this.findServerInfo(t.server),r=o&&o.owningSystemUrl,i=r&&this.findCredential(r,t.userId),n=s,!0)))),a)t&&(t.resources.splice(n,1),this._removeResource(e,i));else if(t)return this._addResource(e,i),t}}_findOAuthInfo(e){let t=this.findOAuthInfo(e);if(!t)for(const s of this.oAuthInfos)if(this._isIdProvider(s.portalUrl,e)){t=s;break}return t}_addResource(e,t){t&&-1===this._getIdenticalSvcIdx(e,t)&&t.resources.push(e)}_removeResource(e,t){let s=-1;t&&(s=this._getIdenticalSvcIdx(e,t),s>-1&&t.resources.splice(s,1))}_useProxy(e,t){return t&&t.isAdmin&&!l(e.adminTokenServiceUrl,window.location.href)||!this._isPortalDomain(e.tokenServiceUrl)&&\"10.1\"===String(e.currentVersion)&&!l(e.tokenServiceUrl,window.location.href)}_getOrigin(e){const t=new c(e);return t.scheme+\"://\"+t.host+(null!=t.port?\":\"+t.port:\"\")}_getServerInstanceRoot(e){const t=e.toLowerCase();let s=t.indexOf(this._agsRest);return-1===s&&this._isAdminResource(e)&&(s=this._agsAdmin.test(e)?e.replace(this._agsAdmin,\"$1\").length:e.search(this._adminSvcs)),-1===s&&(s=t.indexOf(\"/sharing\")),-1===s&&\"/\"===t.substr(-1)&&(s=t.length-1),s>-1?e.substring(0,s):e}_hasSameServerInstance(e,t){return\"/\"===e.substr(-1)&&(e=e.slice(0,-1)),e=e.toLowerCase(),t=this._getServerInstanceRoot(t).toLowerCase(),e=this._normalizeAGOLorgDomain(e),t=this._normalizeAGOLorgDomain(t),(e=e.substr(e.indexOf(\":\")))===(t=t.substr(t.indexOf(\":\")))}_normalizeAGOLorgDomain(e){const t=/^https?:\\/\\/(?:cdn|[a-z\\d-]+\\.maps)\\.arcgis\\.com/i,s=/^https?:\\/\\/(?:cdndev|[a-z\\d-]+\\.mapsdevext)\\.arcgis\\.com/i,r=/^https?:\\/\\/(?:cdnqa|[a-z\\d-]+\\.mapsqa)\\.arcgis\\.com/i;return t.test(e)?e=e.replace(t,\"https://www.arcgis.com\"):s.test(e)?e=e.replace(s,\"https://devext.arcgis.com\"):r.test(e)&&(e=e.replace(r,\"https://qaext.arcgis.com\")),e}_sanitizeUrl(e){const t=(i.request.proxyUrl||\"\").toLowerCase(),s=t?e.toLowerCase().indexOf(t+\"?\"):-1;return-1!==s&&(e=e.substring(s+t.length+1)),e=u(e),h(e).path}_isRESTService(e){return e.indexOf(this._agsRest)>-1}_isAdminResource(e){return this._agsAdmin.test(e)||this._adminSvcs.test(e)}_isServerRsrc(e){return this._isRESTService(e)||this._isAdminResource(e)}_isIdenticalService(e,t){let s;if(this._isRESTService(e)&&this._isRESTService(t)){const r=this._getSuffix(e).toLowerCase(),i=this._getSuffix(t).toLowerCase();if(s=r===i,!s){const e=/(.*)\\/(MapServer|FeatureServer).*/gi;s=r.replace(e,\"$1\")===i.replace(e,\"$1\")}}else this._isAdminResource(e)&&this._isAdminResource(t)?s=!0:this._isServerRsrc(e)||this._isServerRsrc(t)||!this._isPortalDomain(e)||(s=!0);return s}_isPortalDomain(e){const t=new c(e.toLowerCase()),s=this._portalConfig;let r=this._gwDomains.some((e=>e.regex.test(t.uri)));return!r&&s&&(r=this._hasSameServerInstance(this._getServerInstanceRoot(s.restBaseUrl),t.uri)),r||i.portalUrl&&(r=l(t,i.portalUrl,!0)),r||(r=this._portals.some((e=>this._hasSameServerInstance(e,t.uri)))),r=r||this._agsPortal.test(t.path),r}_isIdProvider(e,t){let s=-1,r=-1;this._gwDomains.forEach(((i,o)=>{-1===s&&i.regex.test(e)&&(s=o),-1===r&&i.regex.test(t)&&(r=o)}));let i=!1;if(s>-1&&r>-1&&(0===s||4===s?0!==r&&4!==r||(i=!0):1===s?1!==r&&2!==r||(i=!0):2===s?2===r&&(i=!0):3===s&&3===r&&(i=!0)),!i){const s=this.findServerInfo(t),r=s&&s.owningSystemUrl;r&&b(s)&&this._isPortalDomain(r)&&this._isIdProvider(e,r)&&(i=!0)}return i}_getIdenticalSvcIdx(e,t){let s=-1;for(let r=0;r<t.resources.length;r++){const i=t.resources[r];if(this._isIdenticalService(e,i)){s=r;break}}return s}_getSuffix(e){return e.replace(this._regexSDirUrl,\"\").replace(this._regexServerType,\"$1\")}_getTokenSvcUrl(e){let t,s,r;if(this._isRESTService(e)||this._isAdminResource(e)){const r=this._getServerInstanceRoot(e);return t=r+\"/admin/generateToken\",s=A(e=r+\"/rest/info\",{query:{f:\"json\"}}).then((e=>e.data)),{adminUrl:t,promise:s}}if(this._isPortalDomain(e)){let t=\"\";if(this._gwDomains.some((s=>(s.regex.test(e)&&(t=s.tokenServiceUrl),!!t))),t||this._portals.some((s=>(this._hasSameServerInstance(s,e)&&(t=s+this._gwTokenUrl),!!t))),t||(r=e.toLowerCase().indexOf(\"/sharing\"),-1!==r&&(t=e.substring(0,r)+this._gwTokenUrl)),t||(t=this._getOrigin(e)+this._gwTokenUrl),t){const s=new c(e).port;/^http:\\/\\//i.test(e)&&\"7080\"===s&&(t=t.replace(/:7080/i,\":7443\")),t=t.replace(/http:/i,\"https:\")}return t}if(-1!==e.toLowerCase().indexOf(\"premium.arcgisonline.com\"))return\"https://premium.arcgisonline.com/server/tokens\"}_exchangeToken(e,t,s){return A(`${e}/sharing/rest/oauth2/exchangeToken`,{authMode:\"anonymous\",method:\"post\",query:{f:\"json\",client_id:t,token:s}}).then((e=>e.data.token))}_getPlatformSelf(e,t){return A(`${e}/sharing/rest/oauth2/platformSelf`,{authMode:\"anonymous\",headers:{\"X-Esri-Auth-Client-Id\":t,\"X-Esri-Auth-Redirect-Uri\":window.location.href.replace(/#.*$/,\"\")},method:\"post\",query:{f:\"json\"},withCredentials:!0}).then((e=>e.data))}_getPortalSelf(e,t){let s;if(this._gwDomains.some((t=>(t.regex.test(e)&&(s=t.customBaseUrl),!!s))),s)return Promise.resolve({allSSL:!0,currentVersion:\"4.4\",customBaseUrl:s,portalMode:\"multitenant\",supportsOAuth:!0});\"https:\"===window.location.protocol?e=e.replace(/^http:/i,\"https:\").replace(/:7080/i,\":7443\"):/^http:/i.test(t)&&(e=e.replace(/^https:/i,\"http:\").replace(/:7443/i,\":7080\"));return A(e,{query:{f:\"json\"},authMode:\"anonymous\",withCredentials:!0}).then((e=>e.data))}_doPortalSignIn(e){const t=this._portalConfig,s=window.location.href,r=this.findServerInfo(e);return!(!t&&!this._isPortalDomain(s)||!(r?r.hasPortal||r.owningSystemUrl&&this._isPortalDomain(r.owningSystemUrl):this._isPortalDomain(e))||!(this._isIdProvider(s,e)||t&&(this._hasSameServerInstance(this._getServerInstanceRoot(t.restBaseUrl),e)||this._isIdProvider(t.restBaseUrl,e))||l(s,e,!0)))}_checkProtocol(e,t,s,r){let i=!0;const o=r?t.adminTokenServiceUrl:t.tokenServiceUrl;if(0===o.trim().toLowerCase().indexOf(\"https:\")&&0!==window.location.href.toLowerCase().indexOf(\"https:\")&&p(o)&&(i=!!this._protocolFunc&&!!this._protocolFunc({resourceUrl:e,serverInfo:t}),!i)){s(new a(\"identity-manager:aborted\",\"Aborted the Sign-In process to avoid sending password over insecure connection.\"))}return i}_enqueue(e,t,s,r,i,o){return r||(r=v()),r.resUrl_=e,r.sinfo_=t,r.options_=s,r.admin_=i,r.refresh_=o,this._busy?this._hasSameServerInstance(this._getServerInstanceRoot(e),this._busy.resUrl_)?(this._oAuthDfd&&this._oAuthDfd.oAuthWin_&&this._oAuthDfd.oAuthWin_.focus(),this._soReqs.push(r)):this._xoReqs.push(r):this._doSignIn(r),r.promise}_doSignIn(e){this._busy=e,this._rejectOnPersistedPageShow=!1;const t=t=>{const s=e.options_&&e.options_.resource,r=e.resUrl_,i=e.refresh_;let o=!1;-1===this.credentials.indexOf(t)&&(i&&-1!==this.credentials.indexOf(i)?(i.userId=t.userId,i.token=t.token,i.expires=t.expires,i.validity=t.validity,i.ssl=t.ssl,i.creationTime=t.creationTime,o=!0,t=i):this.credentials.push(t)),t.resources||(t.resources=[]),t.resources.push(s||r),t.scope=this._isServerRsrc(r)?\"server\":\"portal\",t.emitTokenChange();const n=this._soReqs,a={};this._soReqs=[],n.forEach((e=>{if(!this._isIdenticalService(r,e.resUrl_)){const s=this._getSuffix(e.resUrl_);a[s]||(a[s]=!0,t.resources.push(e.resUrl_))}})),e.resolve(t),n.forEach((e=>{this._hasSameServerInstance(this._getServerInstanceRoot(r),e.resUrl_)?e.resolve(t):this._soReqs.push(e)})),this._busy=e.resUrl_=e.sinfo_=e.refresh_=null,o||this.emit(\"credential-create\",{credential:t}),this._soReqs.length?this._doSignIn(this._soReqs.shift()):this._xoReqs.length&&this._doSignIn(this._xoReqs.shift())},s=t=>{e.reject(t),this._busy=e.resUrl_=e.sinfo_=e.refresh_=null,this._soReqs.length?this._doSignIn(this._soReqs.shift()):this._xoReqs.length&&this._doSignIn(this._xoReqs.shift())},i=(r,i,o,n)=>{var h,c;const d=e.sinfo_,u=!e.options_||!1!==e.options_.prompt,p=d.hasPortal&&this._findOAuthInfo(e.resUrl_);let _,f;if(r)t(new q({userId:r,server:d.server,token:o||null,expires:null!=n?Number(n):null,ssl:!!i}));else if(window!==window.parent&&null!=(h=this._appUrlObj.query)&&h[\"arcgis-auth-origin\"]&&null!=(c=this._appUrlObj.query)&&c[\"arcgis-auth-portal\"]&&this._hasSameServerInstance(this._getServerInstanceRoot(this._appUrlObj.query[\"arcgis-auth-portal\"]),e.resUrl_)){var m;window.parent.postMessage({type:\"arcgis:auth:requestCredential\"},this._appUrlObj.query[\"arcgis-auth-origin\"]);const r=g(window,\"message\",(e=>{e.source===window.parent&&e.data&&(\"arcgis:auth:credential\"===e.data.type?(r.remove(),t(new q(e.data.credential))):\"arcgis:auth:error\"===e.data.type&&(r.remove(),s(a.fromJSON(e.data.error))))}));S(null==(m=e.options_)?void 0:m.signal,(()=>{r.remove()}))}else if(p){let r=p._oAuthCred;if(!r){const e=new x(p,C),t=new x(p,D);e.isValid()&&t.isValid()?e.expires>t.expires?(r=e,t.destroy()):(r=t,e.destroy()):r=e.isValid()?e:t,p._oAuthCred=r}if(r.isValid())_=new q({userId:r.userId,server:d.server,token:r.token,expires:r.expires,ssl:r.ssl,_oAuthCred:r}),p.appId!==r.appId&&this._doPortalSignIn(e.resUrl_)?e._pendingDfd=this._exchangeToken(_.server,p.appId,_.token).then((e=>{_.token=e,r.token=e,r.save(),t(_)})).catch((()=>{t(_)})):t(_);else if(this._oAuthHash&&this._hasSameServerInstance(p.portalUrl,this._oAuthHash.state.portalUrl)){const e=this._oAuthHash;_=new q({userId:e.username,server:d.server,token:e.access_token,expires:Date.now()+1e3*Number(e.expires_in),ssl:\"true\"===e.ssl,oAuthState:e.state,_oAuthCred:r}),p.userId=_.userId,r.storage=e.persist?C:D,r.token=_.token,r.expires=_.expires,r.userId=_.userId,r.ssl=_.ssl,r.save(),this._oAuthHash=null,t(_)}else{const r=()=>{u?e._pendingDfd=this.oAuthSignIn(e.resUrl_,d,p,e.options_).then(t,s):(f=new a(\"identity-manager:not-authenticated\",\"User is not signed in.\"),s(f))};this._doPortalSignIn(e.resUrl_)?e._pendingDfd=this._getPlatformSelf(d.server,p.appId).then((({portalUrl:e,token:s,username:i})=>{!e||l(e,window.location.origin,!0)?(_=new q({server:d.server,userId:i,token:s}),t(_)):r()})).catch(r):r()}}else if(u){if(this._checkProtocol(e.resUrl_,d,s,e.admin_)){let r=e.options_;e.admin_&&(r=r||{},r.isAdmin=!0),e._pendingDfd=this.signIn(e.resUrl_,d,r).then(t,s)}}else f=new a(\"identity-manager:not-authenticated\",\"User is not signed in.\"),s(f)},o=()=>{const r=e.sinfo_,i=r.owningSystemUrl,o=e.options_;let n,a,h,l;if(o&&(n=o.token,a=o.error,h=o.prompt),l=this._findCredential(i,{token:n,resource:e.resUrl_}),!l)for(const e of this.credentials)if(this._isIdProvider(i,e.server)){l=e;break}if(l){const i=this.findCredential(e.resUrl_,l.userId);if(i)t(i);else if(P(r,this._legacyFed)){const e=l.toJSON();e.server=r.server,e.resources=null,t(new q(e))}else{(e._pendingDfd=this.generateToken(this.findServerInfo(l.server),null,{serverUrl:e.resUrl_,token:l.token,signal:e.options_.signal,ssl:l.ssl})).then((s=>{t(new q({userId:l.userId,server:r.server,token:s.token,expires:null!=s.expires?Number(s.expires):null,ssl:!!s.ssl,isAdmin:e.admin_,validity:s.validity}))}),s)}}else{this._busy=null,n&&(e.options_.token=null);(e._pendingDfd=this.getCredential(i.replace(/\\/?$/,\"/sharing\"),{resource:e.resUrl_,owningTenant:r.owningTenant,signal:e.options_.signal,token:n,error:a,prompt:h})).then((()=>{this._enqueue(e.resUrl_,e.sinfo_,e.options_,e,e.admin_)}),(e=>{s(e)}))}};this._errbackFunc=s;const n=e.sinfo_.owningSystemUrl,h=this._isServerRsrc(e.resUrl_),c=e.sinfo_._restInfoPms;c?c.promise.then((t=>{const s=e.sinfo_;if(s._restInfoPms){s.adminTokenServiceUrl=s._restInfoPms.adminUrl,s._restInfoPms=null,s.tokenServiceUrl=r(\"authInfo.tokenServicesUrl\",t)||r(\"authInfo.tokenServiceUrl\",t)||r(\"tokenServiceUrl\",t),s.shortLivedTokenValidity=r(\"authInfo.shortLivedTokenValidity\",t),s.currentVersion=t.currentVersion,s.owningTenant=t.owningTenant;const e=s.owningSystemUrl=t.owningSystemUrl;e&&this._portals.push(e)}h&&s.owningSystemUrl?o():i()}),(()=>{e.sinfo_._restInfoPms=null;const t=new a(\"identity-manager:server-identification-failed\",\"Unknown resource - could not find token service endpoint.\");s(t)})):h&&n?o():e.sinfo_._selfReq?e.sinfo_._selfReq.selfDfd.then((t=>{const s={};let r,i,o,n;return t&&(r=t.user&&t.user.username,s.username=r,s.allSSL=t.allSSL,i=t.supportsOAuth,o=t.currentVersion,\"multitenant\"===t.portalMode&&(n=t.customBaseUrl)),e.sinfo_.webTierAuth=!!r,r&&this.normalizeWebTierAuth?this.generateToken(e.sinfo_,null,{ssl:s.allSSL}).catch((()=>null)).then((e=>(s.portalToken=e&&e.token,s.tokenExpiration=e&&e.expires,s))):!r&&i&&parseFloat(o)>=4.4&&!this._findOAuthInfo(e.resUrl_)?this._generateOAuthInfo({portalUrl:e.sinfo_.server,customBaseUrl:n,owningTenant:e.sinfo_._selfReq.owningTenant}).catch((()=>null)).then((()=>s)):s})).catch((()=>null)).then((t=>{e.sinfo_._selfReq=null,t?i(t.username,t.allSSL,t.portalToken,t.tokenExpiration):i()})):i()}_generateOAuthInfo(e){let t,s,r=e.portalUrl;const i=e.customBaseUrl,o=e.owningTenant,n=!this.defaultOAuthInfo&&this._createDefaultOAuthInfo&&!this._hasTestedIfAppIsOnPortal;if(n){s=window.location.href;let e=s.indexOf(\"?\");e>-1&&(s=s.slice(0,e)),e=s.search(/\\/(apps|home)\\//),s=e>-1?s.slice(0,e):null}return n&&s?(this._hasTestedIfAppIsOnPortal=!0,t=A(s+\"/sharing/rest\",{query:{f:\"json\"}}).then((()=>{this.defaultOAuthInfo=new T({appId:\"arcgisonline\",popupCallbackUrl:s+\"/home/oauth-callback.html\"})}))):t=Promise.resolve(),t.then((()=>{if(this.defaultOAuthInfo)return r=r.replace(/^http:/i,\"https:\"),A(r+\"/sharing/rest/oauth2/validateRedirectUri\",{query:{accountId:o,client_id:this.defaultOAuthInfo.appId,redirect_uri:_(this.defaultOAuthInfo.popupCallbackUrl),f:\"json\"}}).then((e=>{if(e.data.valid){const t=this.defaultOAuthInfo.clone();e.data.urlKey&&i?t.portalUrl=\"https://\"+e.data.urlKey.toLowerCase()+\".\"+i:t.portalUrl=r,t.popup=window!==window.top||!(l(r,window.location.origin)||this._gwDomains.some((e=>e.regex.test(r)&&e.regex.test(window.location.origin)))),this.oAuthInfos.push(t)}}))}))}_doOAuthSignIn(e,s,r){const i={portalUrl:r.portalUrl};!r.popup&&r.preserveUrlHash&&window.location.hash&&(i.hash=window.location.hash);const o={client_id:r.appId,response_type:\"token\",state:JSON.stringify(i),expiration:r.expiration,locale:r.locale,redirect_uri:r.popup?_(r.popupCallbackUrl):window.location.href.replace(/#.*$/,\"\")};r.forceLogin&&(o.force_login=!0),r.forceUserId&&r.userId&&(o.prepopulatedusername=r.userId),!r.popup&&this._doPortalSignIn(e)&&(o.redirectToUserOrgUrl=!0);const n=r.portalUrl.replace(/^http:/i,\"https:\")+\"/sharing/oauth2/authorize\",h=n+\"?\"+f(o);if(r.popup){const e=window.open(h,\"esriJSAPIOAuth\",r.popupWindowFeatures);if(e)e.focus(),this._oAuthDfd.oAuthWin_=e,this._oAuthIntervalId=setInterval((()=>{if(e.closed){clearInterval(this._oAuthIntervalId),this._oAuthOnHashHandle.remove();const e=this._oAuthDfd;if(e){const t=new a(\"identity-manager:user-aborted\",\"ABORTED\");e.reject(t)}}}),500),this._oAuthOnHashHandle=g(t,\"arcgis:auth:hash\",(e=>{this.setOAuthResponseHash(e.detail)}));else{const e=new a(\"identity-manager:popup-blocked\",\"ABORTED\");this._oAuthDfd.reject(e)}}else this._rejectOnPersistedPageShow=!0,this._oAuthRedirectFunc?this._oAuthRedirectFunc({authorizeParams:o,authorizeUrl:n,resourceUrl:e,serverInfo:s,oAuthInfo:r}):window.location.href=h}};j=e([n(\"esri.identity.IdentityManagerBase\")],j);let q=class extends I.EventedAccessor{constructor(e){super(e),this._oAuthCred=null,this.tokenRefreshBuffer=2,e&&e._oAuthCred&&(this._oAuthCred=e._oAuthCred)}initialize(){this.resources=this.resources||[],null==this.creationTime&&(this.creationTime=Date.now())}refreshToken(){const e=k.findServerInfo(this.server),t=e&&e.owningSystemUrl,s=!!t&&\"server\"===this.scope,r=s&&P(e,k._legacyFed),i=e.webTierAuth,o=i&&k.normalizeWebTierAuth,n=R[this.server],a=n&&n[this.userId];let h,l=this.resources&&this.resources[0],c=s&&k.findServerInfo(t),d={username:this.userId,password:a};if(i&&!o)return;s&&!c&&k.serverInfos.some((e=>(k._isIdProvider(t,e.server)&&(c=e),!!c)));const u=c&&k.findCredential(c.server,this.userId);if(!s||u){if(!r){if(s)h={serverUrl:l,token:u&&u.token,ssl:u&&u.ssl};else if(o)d=null,h={ssl:this.ssl};else{if(!a){let t;return l&&(l=k._sanitizeUrl(l),this._enqueued=1,t=k._enqueue(l,e,null,null,this.isAdmin,this),t.then((()=>{this._enqueued=0,this.refreshServerTokens()})).catch((()=>{this._enqueued=0}))),t}this.isAdmin&&(h={isAdmin:!0})}return k.generateToken(s?c:e,s?null:d,h).then((e=>{this.token=e.token,this.expires=null!=e.expires?Number(e.expires):null,this.creationTime=Date.now(),this.validity=e.validity,this.emitTokenChange(),this.refreshServerTokens()})).catch((()=>{}))}u.refreshToken()}}refreshServerTokens(){\"portal\"===this.scope&&k.credentials.forEach((e=>{const t=k.findServerInfo(e.server),s=t&&t.owningSystemUrl;e!==this&&e.userId===this.userId&&s&&\"server\"===e.scope&&(k._hasSameServerInstance(this.server,s)||k._isIdProvider(s,this.server))&&(P(t,k._legacyFed)?(e.token=this.token,e.expires=this.expires,e.creationTime=this.creationTime,e.validity=this.validity,e.emitTokenChange()):e.refreshToken())}))}emitTokenChange(e){clearTimeout(this._refreshTimer);const t=this.server&&k.findServerInfo(this.server),s=t&&t.owningSystemUrl,r=s&&k.findServerInfo(s);!1===e||s&&\"portal\"!==this.scope&&(!r||!r.webTierAuth||k.normalizeWebTierAuth)||null==this.expires&&null==this.validity||this._startRefreshTimer(),this.emit(\"token-change\")}destroy(){this.userId=this.server=this.token=this.expires=this.validity=this.resources=this.creationTime=null,this._oAuthCred&&(this._oAuthCred.destroy(),this._oAuthCred=null);const e=k.credentials.indexOf(this);e>-1&&k.credentials.splice(e,1),this.emitTokenChange(),this.emit(\"destroy\")}toJSON(){const e=s({userId:this.userId,server:this.server,token:this.token,expires:this.expires,validity:this.validity,ssl:this.ssl,isAdmin:this.isAdmin,creationTime:this.creationTime,scope:this.scope}),t=this.resources;return t&&t.length>0&&(e.resources=t.slice()),e}_startRefreshTimer(){clearTimeout(this._refreshTimer);const e=6e4*this.tokenRefreshBuffer,t=2**31-1;let s=(this.validity?this.creationTime+6e4*this.validity:this.expires)-Date.now();s<0?s=0:s>t&&(s=t),this._refreshTimer=setTimeout(this.refreshToken.bind(this),s>e?s-e:s)}};e([o()],q.prototype,\"creationTime\",void 0),e([o()],q.prototype,\"expires\",void 0),e([o()],q.prototype,\"isAdmin\",void 0),e([o()],q.prototype,\"oAuthState\",void 0),e([o()],q.prototype,\"resources\",void 0),e([o()],q.prototype,\"scope\",void 0),e([o()],q.prototype,\"server\",void 0),e([o()],q.prototype,\"ssl\",void 0),e([o()],q.prototype,\"token\",void 0),e([o()],q.prototype,\"tokenRefreshBuffer\",void 0),e([o()],q.prototype,\"userId\",void 0),e([o()],q.prototype,\"validity\",void 0),q=e([n(\"esri.identity.Credential\")],q);export{q as Credential,j as IdentityManagerBase};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{_ as s}from\"../chunks/tslib.es6.js\";import{subclass as e}from\"../core/accessorSupport/decorators/subclass.js\";import{setId as r}from\"../kernel.js\";import{IdentityManagerBase as t}from\"./IdentityManagerBase.js\";let o=class extends t{};o=s([e(\"esri.identity.IdentityManager\")],o);const a=new o;r(a);export default a;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{_ as r}from\"../chunks/tslib.es6.js\";import{subclass as t}from\"./accessorSupport/decorators/subclass.js\";import s from\"./Accessor.js\";import{read as e}from\"./accessorSupport/read.js\";import{write as o}from\"./accessorSupport/write.js\";const i=s=>{let i=class extends s{constructor(...r){super(...r)}read(r,t){e(this,r,t)}write(r={},t){return o(this,r,t)}toJSON(r){return this.write({},r)}static fromJSON(r,t){return c.call(this,r,t)}};return i=r([t(\"esri.core.JSONSupport\")],i),i.prototype.toJSON.isDefaultToJSON=!0,i};function c(r,t){if(!r)return null;if(r.declaredClass)throw new Error(\"JSON object is already hydrated\");const s=new this;return s.read(r,t),s}function n(r){return r&&\"read\"in r&&\"write\"in r&&\"toJSON\"in r}let a=class extends(i(s)){};a=r([t(\"esri.core.JSONSupport\")],a);export{a as JSONSupport,i as JSONSupportMixin,n as isJSONSupport};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport r from\"../Logger.js\";import{getProperties as e,merge as t}from\"./utils.js\";import{originSpecificWritePropertyDefinition as i}from\"./extensions/serializableProperty.js\";import o from\"../Error.js\";import{idToReadableName as n,nameToId as s}from\"./PropertyOrigin.js\";import{equals as u}from\"../arrayUtils.js\";const l=r.getLogger(\"esri.core.accessorSupport.write\");function a(r,e,t,i,o){var n,s;const u={};return null==(n=e.write)||null==(s=n.writer)||s.call(r,i,u,t,o),u}function f(r,e,t,i,n,u){if(!i||!i.write)return!1;const a=r.get(t);if(!n&&i.write.overridePolicy){const e=i.write.overridePolicy.call(r,a,t,u);void 0!==e&&(n=e)}if(n||(n=i.write),!n||!1===n.enabled)return!1;if((null===a&&!n.allowNull||void 0===a)&&n.isRequired){const e=new o(\"web-document-write:property-required\",`Missing value for required property '${t}' on '${r.declaredClass}'`,{propertyName:t,target:r});return e&&u&&u.messages?u.messages.push(e):e&&!u&&l.error(e.name,e.message),!1}if(void 0===a)return!1;if(null===a&&!n.allowNull)return!1;if(c(r,t,u,i,a))return!1;if(void 0!==i.default)return!0;if(!n.ignoreOrigin&&u&&u.origin){if(e.store.originOf(t)<s(u.origin))return!1}return!0}function c(r,e,t,i,o){const n=i.default;if(void 0===n)return!1;if(null!=i.defaultEquals)return i.defaultEquals(o);if(\"function\"==typeof n){if(Array.isArray(o)){const i=n.call(r,e,t);return u(i,o)}return!1}return n===o}function p(r,t,o,n){const s=e(r),u=s.metadatas,l=i(u[t],n);return!!l&&f(r,s,t,l,o,n)}function g(r,o,s){if(r&&\"function\"==typeof r.toJSON&&(!r.toJSON.isDefaultToJSON||!r.write))return t(o,r.toJSON());const u=e(r),l=u.metadatas;for(const e in l){const g=i(l[e],s);if(!f(r,u,e,g,void 0,s))continue;const d=r.get(e),m=a(r,g,g.write&&\"string\"==typeof g.write.target?g.write.target:e,d,s);var c,p;if(Object.keys(m).length>0)o=t(o,m),null!=s&&null!=(c=s.resources)&&null!=(p=c.pendingOperations)&&p.length&&Promise.all(s.resources.pendingOperations).then((()=>t(o,m))),s&&s.writtenProperties&&s.writtenProperties.push({target:r,propName:e,oldOrigin:n(u.store.originOf(e)),newOrigin:s.origin})}return o}export default g;export{p as willPropertyWrite,g as write};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nfunction e(e){return function(s,n){s.hasOwnProperty(\"_messageBundleProps\")||(s._messageBundleProps=s._messageBundleProps?s._messageBundleProps.slice():[]);s._messageBundleProps.push({bundlePath:e,propertyName:n})}}export{e as messageBundle};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{getProperties as e}from\"./utils.js\";import{valueOf as t,exists as r}from\"./get.js\";import{originSpecificReadPropertyDefinition as o,originSpecificPropertyDefinition as n}from\"./extensions/serializableProperty.js\";function s(e,t,o){if(!e||!e.read||!1===e.read.enabled||!e.read.source)return!1;const n=e.read.source;if(\"string\"==typeof n){if(n===t)return!0;if(n.indexOf(\".\")>-1&&0===n.indexOf(t)&&r(n,o))return!0}else for(const s of n){if(s===t)return!0;if(s.indexOf(\".\")>-1&&0===s.indexOf(t)&&r(s,o))return!0}return!1}function i(e){return e&&(!e.read||!1!==e.read.enabled&&!e.read.source)}function f(e,t,r,n,f){let a=o(t[r],f);i(a)&&(e[r]=!0);for(const i of Object.getOwnPropertyNames(t))a=o(t[i],f),s(a,r,n)&&(e[i]=!0)}function a(e,t,r,o){const s=r.metadatas,i=n(s[t],\"any\",o),f=i&&i.default;if(void 0===f)return;const a=\"function\"==typeof f?f.call(e,t,o):f;void 0!==a&&r.set(t,a)}const c={origin:\"service\"};function u(r,n,s=c){if(!n||\"object\"!=typeof n)return;const i=e(r),u=i.metadatas,d={};for(const e of Object.getOwnPropertyNames(n))f(d,u,e,n,s);i.setDefaultOrigin(s.origin);for(const e of Object.getOwnPropertyNames(d)){const f=o(u[e],s).read,a=f&&f.source;let c;c=a&&\"string\"==typeof a?t(n,a):n[e],f&&f.reader&&(c=f.reader.call(r,c,n,s)),void 0!==c&&i.set(e,c)}if(!s||!s.ignoreDefaults)for(const e of Object.getOwnPropertyNames(u))d[e]||a(r,e,i,s);i.setDefaultOrigin(\"user\")}function d(e,t,r,o=c){var n;const s={...o,messages:[]};r(s),null==(n=s.messages)||n.forEach((t=>{\"warning\"!==t.type||e.loaded?o&&o.messages&&o.messages.push(t):e.loadWarnings.push(t)}))}export default u;export{u as read,d as readLoadable};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nfunction n(){return function(n,t){if(!n[t])throw new TypeError(`Cannot auto bind undefined function '${t}'`);return{value:e(n[t])}}}function t(n){const{type:t}=n;return n instanceof KeyboardEvent||\"keyup\"===t||\"keydown\"===t||\"keypress\"===t}function e(n){return function(e,...r){t(e)?\"Enter\"!==e.key&&\" \"!==e.key||(e.preventDefault(),e.stopPropagation(),e.target.click()):n.call(this,e,...r)}}export{n as accessibleHandler};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{splitProps as e}from\"./propUtils.js\";function t(t){return a=>{a.hasOwnProperty(\"_delegatedEventNames\")||(a._delegatedEventNames=a._delegatedEventNames?a._delegatedEventNames.slice():[]);const r=a._delegatedEventNames,s=Array.isArray(t)?t:e(t);r.push(...s)}}export{t as vmEvent};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nfunction n(n){return n.split(\",\").map((n=>n.trim()))}function t(n,t){return n.map((n=>r(n,t)))}function r(n,t){return 0===n.indexOf(t)?n:`${t}.${n}`}export{t as normalizePropNames,n as splitProps};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nexport{additionalAllowedTags,classes,cssTransition,discardNode,getThemeName,isDarkTheme,isRTL,keepMenuItemWithinView,renderingSanitizer,safeAttrs,storeNode}from\"./widgetUtils.js\";export{accessibleHandler}from\"./decorators/accessibleHandler.js\";export{messageBundle}from\"./decorators/messageBundle.js\";export{renderable}from\"./decorators/renderable.js\";export{vmEvent}from\"./decorators/vmEvent.js\";export{j as tsx}from\"../../chunks/index.js\";function e(e){return e&&\"function\"==typeof e.render}function r(e){return e&&\"function\"==typeof e.postMixInProperties&&\"function\"==typeof e.buildRendering&&\"function\"==typeof e.postCreate&&\"function\"==typeof e.startup}export{r as hasDomNode,e as isWidget};\n"],"sourceRoot":""}