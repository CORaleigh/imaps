{"version":3,"file":"static/js/5465.0f7aa9aa.chunk.js","mappings":"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","sources":["../node_modules/@arcgis/core/renderers/support/DictionaryLoader.js","../node_modules/@arcgis/core/symbols/CIMSymbol.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.24/esri/copyright.txt for details.\n*/\nimport e from\"../../Color.js\";import t from\"../../request.js\";import s from\"../../core/Error.js\";import o from\"../../core/Logger.js\";import i from\"../../core/LRUCache.js\";import{isSome as r}from\"../../core/maybe.js\";import{isAbortError as n}from\"../../core/promiseUtils.js\";import{numericHash as l}from\"../../core/string.js\";import{loadArcade as a,createDictionaryExpression as c}from\"../../support/arcadeOnDemand.js\";import m from\"../../symbols/CIMSymbol.js\";const f=o.getLogger(\"esri.renderers.support.DictionaryLoader\"),h={type:\"CIMSimpleLineCallout\",lineSymbol:{type:\"CIMLineSymbol\",symbolLayers:[{type:\"CIMSolidStroke\",width:.5,color:[0,0,0,255]}]}};class y{constructor(e,t,s){this.config=null,this.fieldMap=null,this.url=null,this._ongoingRequests=new Map,this._symbolCache=new i(100),this.url=e,this.config=t,this.fieldMap=s}getSymbolFields(){return this._symbolFields}async getSymbolAsync(t,s){let o;this._dictionaryPromise||(this._dictionaryPromise=this.fetchResources(s));try{o=await this._dictionaryPromise}catch(d){if(n(d))return this._dictionaryPromise=null,null}const i={};if(this.fieldMap)for(const e of this._symbolFields){const s=this.fieldMap[e];if(s&&null!=t.attributes[s]){const o=\"\"+t.attributes[s];i[e]=o}else i[e]=\"\"}const a=o(i,s);if(!a||\"string\"!=typeof a)return null;const c=l(a).toString(),m=this._symbolCache.get(c);if(m)return m.catch((()=>{this._symbolCache.pop(c)})),m;const f=a.split(\";\"),h=[],y=[];for(const r of f)if(r)if(r.includes(\"po:\")){const t=r.substr(3).split(\"|\");if(3===t.length){const s=t[0],o=t[1];let i=t[2];if(\"DashTemplate\"===o)i=i.split(\" \").map((e=>Number(e)));else if(\"Color\"===o){const t=new e(i).toRgba();i=[t[0],t[1],t[2],255*t[3]]}else i=Number(i);y.push({primitiveName:s,propertyName:o,value:i})}}else if(r.includes(\"|\")){for(const e of r.split(\"|\"))if(this._itemNames.has(e)){h.push(e);break}}else this._itemNames.has(r)&&h.push(r);const u=!r(t.geometry)||!t.geometry.hasZ&&\"point\"===t.geometry.type,p=this._cimPartsToCIMSymbol(h,y,u,s);return this._symbolCache.put(c,p,1),p}async fetchResources(e){if(this._dictionaryPromise)return this._dictionaryPromise;if(!this.url)return void f.error(\"no valid URL!\");const o=t(this.url+\"/resources/styles/dictionary-info.json\",{responseType:\"json\",query:{f:\"json\"},signal:r(e)?e.signal:null}),[{data:i}]=await Promise.all([o,a()]);if(!i)throw this._dictionaryPromise=null,new s(\"esri.renderers.DictionaryRenderer\",\"Bad dictionary data!\");const n=i.expression,l=i.authoringInfo;this._refSymbolUrlTemplate=this.url+\"/\"+i.cimRefTemplateUrl,this._itemNames=new Set(i.itemsNames),this._symbolFields=l.symbol;const m={};if(this.config){const e=this.config;for(const t in e)m[t]=e[t]}if(l.configuration)for(const t of l.configuration)m.hasOwnProperty(t.name)||(m[t.name]=t.value);const h=[];if(r(e)&&e.fields&&this.fieldMap)for(const t of this._symbolFields){const s=this.fieldMap[t],o=e.fields.filter((e=>e.name===s));o.length>0&&h.push({...o[0],name:t})}return this._dictionaryPromise=c(n,r(e)?e.spatialReference:null,h,m).then((e=>{const t={scale:0};return(s,o)=>{const i=e.repurposeFeature({geometry:null,attributes:s});return t.scale=r(o)?o.scale:void 0,e.evaluate({$feature:i,$view:t})}})).catch((e=>(f.error(\"Creating dictinoary expression failed:\",e),null))),this._dictionaryPromise}async _cimPartsToCIMSymbol(e,t,s,o){const i=new Array(e.length);for(let l=0;l<e.length;l++)i[l]=this._getSymbolPart(e[l],o);const r=await Promise.all(i),n=this.fieldMap;for(const l of r)u(l,n);return new m({data:this._combineSymbolParts(r,t,s)})}async _getSymbolPart(e,s){if(this._ongoingRequests.has(e))return this._ongoingRequests.get(e).then((e=>e.data));const o=this._refSymbolUrlTemplate.replace(/\\{itemName\\}/gi,e),i=t(o,{responseType:\"json\",query:{f:\"json\"},...s});this._ongoingRequests.set(e,i);try{return(await i).data}catch(r){throw this._ongoingRequests.delete(e),r}}_combineSymbolParts(e,t,s){if(!e||0===e.length)return null;const o={...e[0]};if(e.length>1){o.symbolLayers=[];for(const t of e){const e=t;o.symbolLayers.unshift(...e.symbolLayers)}}return s&&(o.callout=h),{type:\"CIMSymbolReference\",symbol:o,primitiveOverrides:t}}}function u(e,t){if(!e)return;const s=e.symbolLayers;if(!s)return;let o=s.length;for(;o--;){const e=s[o];if(e&&!1!==e.enable&&\"CIMVectorMarker\"===e.type)p(e,t)}}function p(e,t){const s=e.markerGraphics;if(s)for(const o of s){if(!o)continue;const e=o.symbol;if(e)switch(e.type){case\"CIMPointSymbol\":case\"CIMLineSymbol\":case\"CIMPolygonSymbol\":u(e,t);break;case\"CIMTextSymbol\":e.fieldMap=t}}}export{y as DictionaryLoader};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.24/esri/copyright.txt for details.\n*/\nimport{_ as r}from\"../chunks/tslib.es6.js\";import{clone as o}from\"../core/lang.js\";import{numericHash as t}from\"../core/string.js\";import{property as e}from\"../core/accessorSupport/decorators/property.js\";import\"../core/accessorSupport/ensureType.js\";import{enumeration as s}from\"../core/accessorSupport/decorators/enumeration.js\";import{reader as a}from\"../core/accessorSupport/decorators/reader.js\";import{subclass as i}from\"../core/accessorSupport/decorators/subclass.js\";import{writer as p}from\"../core/accessorSupport/decorators/writer.js\";import{collectArcadeFieldNames as c}from\"../layers/support/fieldUtils.js\";import n from\"./Symbol.js\";var m;let l=m=class extends n{constructor(r){super(r),this.data=null,this.type=\"cim\"}readData(r,o){return o}writeData(r,o){if(r)for(const t in r)o[t]=r[t]}async collectRequiredFields(r,o){if(\"CIMSymbolReference\"===this.data.type){const t=this.data.primitiveOverrides;if(t){const e=t.map((t=>{const e=t.valueExpressionInfo;return c(r,o,e.expression)}));await Promise.all(e)}}}clone(){return new m({data:o(this.data)})}hash(){return t(JSON.stringify(this.data)).toString()}};r([e({json:{write:!1}})],l.prototype,\"color\",void 0),r([e({json:{write:!0}})],l.prototype,\"data\",void 0),r([a(\"data\",[\"symbol\"])],l.prototype,\"readData\",null),r([p(\"data\",{})],l.prototype,\"writeData\",null),r([s({CIMSymbolReference:\"cim\"},{readOnly:!0})],l.prototype,\"type\",void 0),l=m=r([i(\"esri.symbols.CIMSymbol\")],l);const d=l;export{d as default};\n"],"names":["f","o","h","type","lineSymbol","symbolLayers","width","color","y","constructor","e","t","s","this","config","fieldMap","url","_ongoingRequests","Map","_symbolCache","i","getSymbolFields","_symbolFields","_dictionaryPromise","fetchResources","d","n","attributes","a","c","l","toString","m","get","catch","pop","split","r","includes","substr","length","map","Number","toRgba","push","primitiveName","propertyName","value","_itemNames","has","u","geometry","hasZ","p","_cimPartsToCIMSymbol","put","error","responseType","query","signal","data","Promise","all","expression","authoringInfo","_refSymbolUrlTemplate","cimRefTemplateUrl","Set","itemsNames","symbol","configuration","hasOwnProperty","name","fields","filter","spatialReference","then","scale","repurposeFeature","evaluate","$feature","$view","Array","_getSymbolPart","_combineSymbolParts","replace","set","delete","unshift","callout","primitiveOverrides","enable","markerGraphics","super","readData","writeData","valueExpressionInfo","clone","hash","JSON","stringify","json","write","prototype","CIMSymbolReference","readOnly"],"sourceRoot":""}