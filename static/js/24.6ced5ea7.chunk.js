(this.webpackJsonpimaps=this.webpackJsonpimaps||[]).push([[24],{108:function(e,t,r){"use strict";r.d(t,"a",(function(){return f})),r.d(t,"b",(function(){return w})),r.d(t,"c",(function(){return j})),r.d(t,"d",(function(){return d})),r.d(t,"e",(function(){return p})),r.d(t,"f",(function(){return O})),r.d(t,"g",(function(){return _})),r.d(t,"h",(function(){return v})),r.d(t,"i",(function(){return b})),r.d(t,"j",(function(){return m})),r.d(t,"k",(function(){return g})),r.d(t,"l",(function(){return y})),r.d(t,"m",(function(){return s}));r(92);var i=r(165),n=r(94);function a(e,t,r,i,n){var a=e.watch(t,((t,n,a,s)=>{r&&!r(t)||null==i||i.call(e,t,n,a,s)}),n);if(Array.isArray(t))for(var s of t){var l=e.get(s);r&&r(l)&&(null==i||i.call(e,l,l,t,e))}else{var o=e.get(t);r&&r(o)&&(null==i||i.call(e,o,o,t,e))}return a}function s(e,t,r,i,s){var l="function"==typeof i?i:null,o="object"==typeof i?i:null;"boolean"==typeof i&&(s=i);var c,u=!1;function h(){c&&(c.remove(),c=null)}var f=Object(n.f)();Object(n.p)(o,(()=>{h(),f.reject(Object(n.e)())}));var d={then:f.promise.then.bind(f.promise),catch:f.promise.catch.bind(f.promise),remove:h};return Object.freeze(d),c=a(e,t,r,((t,r,i,n)=>{u=!0,h(),l&&l.call(e,t,r,i,n),f.resolve({value:t,oldValue:r,propertyName:i,target:n})}),s),u&&h(),d}function l(e){return!!e}function o(e){return!e}function c(e){return!0===e}function u(e){return!1===e}var h=/\?(\.|$)/g;function f(e,t,r,i){var n=Array.isArray(t)?t:t.indexOf(",")>-1?t.split(","):[t],a=d(e,t,r,i);for(var s of n){var l=s.trim().replace(h,"$1"),o=e.get(l);r.call(e,o,o,l,e)}return a}function d(e,t,r,i){return e.watch(t,r,i)}function p(e,t,r,i){return a(e,t,l,r,i)}function m(e,t,r,i){return s(e,t,l,r,i)}function v(e,t,r,i){return a(e,t,o,r,i)}function b(e,t,r,i){return s(e,t,o,r,i)}function g(e,t,r,i){return a(e,t,c,r,i)}function y(e,t,r,i){return s(e,t,c,r,i)}function O(e,t,r,i){return a(e,t,u,r,i)}function _(e,t,r,i){return s(e,t,u,r,i)}function j(e,t,r,i){var n=!1,a=e.watch(t,((t,i,a,s)=>{n||r.call(e,t,i,a,s)}),i);return{remove(){a.remove()},pause(){n=!0},resume(){n=!1}}}function w(e,t,r,n,a,s,l){var o={};function c(t){var i=o[t];i&&(s&&s(i.target,t,e,r),i.handle.remove(),delete o[t])}var u=f(e,t,((t,s,l)=>{c(l),Object(i.b)(t)&&(o[l]={handle:Object(i.c)(t,r,n),target:t},a&&a(t,l,e,r))}),l);return{remove(){for(var e in u.remove(),o)c(e)}}}},115:function(e,t,r){"use strict";var i=r(82),n=r(89),a=r(85),s=r(84),l=r(97),o=r(107),c=class extends l.a{constructor(e){super(e),this._groups=new Map}destroy(){this.removeAll()}get size(){var e=0;return this._groups.forEach((t=>{e+=t.length})),e}add(e,t){if(!this._isHandle(e)&&!Array.isArray(e)&&!o.a.isCollection(e))return this;var r=this._getOrCreateGroup(t);return Array.isArray(e)||o.a.isCollection(e)?e.forEach((e=>this._isHandle(e)&&r.push(e))):r.push(e),this.notifyChange("size"),this}forEach(e,t){if("function"==typeof e)this._groups.forEach((t=>t.forEach(e)));else{var r=this._getGroup(e);r&&t&&r.forEach(t)}}has(e){return this._groups.has(this._ensureGroupKey(e))}remove(e){if(Array.isArray(e)||o.a.isCollection(e))return e.forEach(this.remove,this),this;if(!this.has(e))return this;for(var t=this._getGroup(e),r=0;r<t.length;r++)t[r].remove();return this._deleteGroup(e),this.notifyChange("size"),this}removeAll(){return this._groups.forEach((e=>{for(var t=0;t<e.length;t++)e[t].remove()})),this._groups.clear(),this.notifyChange("size"),this}_isHandle(e){return e&&!!e.remove}_getOrCreateGroup(e){if(this.has(e))return this._getGroup(e);var t=[];return this._groups.set(this._ensureGroupKey(e),t),t}_getGroup(e){return Object(n.d)(this._groups.get(this._ensureGroupKey(e)))}_deleteGroup(e){return this._groups.delete(this._ensureGroupKey(e))}_ensureGroupKey(e){return e||"_default_"}};Object(i.a)([Object(a.b)({readOnly:!0})],c.prototype,"size",null);var u=c=Object(i.a)([Object(s.a)("esri.core.Handles")],c);t.a=u},117:function(e,t,r){"use strict";r.d(t,"a",(function(){return P})),r.d(t,"b",(function(){return x})),r.d(t,"c",(function(){return F})),r.d(t,"d",(function(){return G})),r.d(t,"e",(function(){return q})),r.d(t,"f",(function(){return L})),r.d(t,"g",(function(){return N})),r.d(t,"h",(function(){return V})),r.d(t,"i",(function(){return R})),r.d(t,"j",(function(){return u})),r.d(t,"k",(function(){return T})),r.d(t,"l",(function(){return w})),r.d(t,"m",(function(){return E})),r.d(t,"n",(function(){return J})),r.d(t,"o",(function(){return S})),r.d(t,"p",(function(){return _})),r.d(t,"q",(function(){return j})),r.d(t,"r",(function(){return I})),r.d(t,"s",(function(){return z})),r.d(t,"t",(function(){return U})),r.d(t,"u",(function(){return D})),r.d(t,"v",(function(){return M})),r.d(t,"w",(function(){return A})),r.d(t,"x",(function(){return k}));var i=r(91),n=(r(80),r(95)),a=r(257),s=r(112),l=r(99),o=r(139),c=r(173),u=39.37,h=o.a.radius*Math.PI/200,f=/UNIT\[([^\]]+)\]\]$/i,d=a.a,p=/UNIT\[([^\]]+)\]/i,m=new Set([4261,4305,4807,4810,4811,4812,4816,4819,4821,4901,4902,37225,104139,104140]),v=Object(n.b)()({meter:"meters",foot:"feet",foot_us:"us-feet",foot_clarke:"clarke-feet",yard_clarke:"clarke-yards",link_clarke:"clarke-links",yard_sears:"sears-yards",foot_sears:"sears-feet",chain_sears:"sears-chains",chain_benoit_1895_b:"benoit-1895-b-chains",yard_indian:"indian-yards",yard_indian_1937:"indian-1937-yards",foot_gold_coast:"gold-coast-feet",chain_sears_1922_truncated:"sears-1922-truncated-chains","50_kilometers":"50-kilometers","150_kilometers":"150-kilometers"}),b=e=>e*e,g=e=>e*e*e,y={length:{baseUnit:"meters",units:{millimeters:{inBaseUnits:.001},centimeters:{inBaseUnits:.01},decimeters:{inBaseUnits:.1},meters:{inBaseUnits:1},kilometers:{inBaseUnits:1e3},inches:{inBaseUnits:.0254},feet:{inBaseUnits:.3048},yards:{inBaseUnits:.9144},miles:{inBaseUnits:1609.344},"nautical-miles":{inBaseUnits:1852},"us-feet":{inBaseUnits:1200/3937}}},area:{baseUnit:"square-meters",units:{"square-millimeters":{inBaseUnits:b(.001)},"square-centimeters":{inBaseUnits:b(.01)},"square-decimeters":{inBaseUnits:b(.1)},"square-meters":{inBaseUnits:1},"square-kilometers":{inBaseUnits:b(1e3)},"square-inches":{inBaseUnits:b(.0254)},"square-feet":{inBaseUnits:b(.3048)},"square-yards":{inBaseUnits:b(.9144)},"square-miles":{inBaseUnits:b(1609.344)},"square-us-feet":{inBaseUnits:b(1200/3937)},acres:{inBaseUnits:.0015625*b(1609.344)},ares:{inBaseUnits:100},hectares:{inBaseUnits:1e4}}},volume:{baseUnit:"liters",units:{liters:{inBaseUnits:1},"cubic-millimeters":{inBaseUnits:1e3*g(.001)},"cubic-centimeters":{inBaseUnits:1e3*g(.01)},"cubic-decimeters":{inBaseUnits:1e3*g(.1)},"cubic-meters":{inBaseUnits:1e3},"cubic-kilometers":{inBaseUnits:1e3*g(1e3)},"cubic-inches":{inBaseUnits:1e3*g(.0254)},"cubic-feet":{inBaseUnits:1e3*g(.3048)},"cubic-yards":{inBaseUnits:1e3*g(.9144)},"cubic-miles":{inBaseUnits:1e3*g(1609.344)}}},angle:{baseUnit:"radians",units:{radians:{inBaseUnits:1},degrees:{inBaseUnits:Math.PI/180}}}},O=function(){var e={};for(var t in y)for(var r in y[t].units)e[r]=t;return e}();var _=["metric","imperial","square-inches","square-feet","square-yards","square-miles","square-us-feet","square-meters","square-kilometers","acres","ares","hectares"],j=["metric","imperial","inches","feet","yards","miles","nautical-miles","us-feet","meters","kilometers"];function w(e){return"imperial"===e||"metric"===e}function S(e){var t=O[e];if(t)return t;throw new Error("unknown measure")}function x(e){return function(e){return y[e].baseUnit}(S(e))}function T(e,t=null){return t=t||S(e),y[t].baseUnit===e}function F(e,t,r){if(t===r)return e;var i=S(t);if(i!==S(r))throw new Error("incompatible units");var n=T(t,i)?e:function(e,t,r){return e*y[r].units[t].inBaseUnits}(e,t,i);return T(r,i)?n:function(e,t,r){return e/y[r].units[t].inBaseUnits}(n,r,i)}function M(e,t){return F(e,t,"meters")<3e3?"meters":"kilometers"}function A(e,t){return F(e,t,"meters")<1e5?"meters":"kilometers"}function z(e,t){return F(e,t,"feet")<1e3?"feet":"miles"}function U(e,t){return F(e,t,"feet")<1e5?"feet":"miles"}function D(e,t){return F(e,t,"square-meters")<3e6?"square-meters":"square-kilometers"}function I(e,t){return F(e,t,"square-feet")<1e6?"square-feet":"square-miles"}function E(e,t,r){return F(e,t,"meters")/(r*Math.PI/180)}function k(e){return v.fromJSON(e.toLowerCase())||null}function N(e){if(e&&"object"==typeof e&&!Object(s.e)(e))return 1;var t=L(e);return t>1e5?1:t}function R(e){return L(e)>=(e instanceof l.a?Object(c.e)(e).metersPerDegree:1e5)?"meters":V(e)}function L(e,t=o.a.metersPerDegree){return q(e,!0)||t}function q(e,t=!1){var r,i,n=null;if(null!=e&&("object"==typeof e?(r=e.wkid,i=e.wkt):"number"==typeof e?r=e:"string"==typeof e&&(i=e)),r){if(Object(s.k)(r))return o.b.metersPerDegree;if(Object(s.l)(r))return o.c.metersPerDegree;!(n=d.values[d[r]])&&t&&m.has(r)&&(n=h)}else if(i)if(-1!==i.search(/^PROJCS/i)){var a=f.exec(i);a&&a[1]&&(n=parseFloat(a[1].split(",")[1]))}else if(-1!==i.search(/^GEOCCS/i)){var l=p.exec(i);l&&l[1]&&(n=parseFloat(l[1].split(",")[1]))}return n}function V(e){var t,r,i=null;if(null!=e&&("object"==typeof e?(t=e.wkid,r=e.wkt):"number"==typeof e?t=e:"string"==typeof e&&(r=e)),t)i=d.units[d[t]];else if(r&&-1!==r.search(/^PROJCS/i)){var n=f.exec(r);n&&n[1]&&(i=(n=/[\\"\\']{1}([^\\"\\']+)/.exec(n[1]))&&n[1])}return i?k(i):null}function G(e){if(!e)return null;switch(V(e)){case"feet":case"us-feet":case"clarke-feet":case"clarke-yards":case"clarke-links":case"sears-yards":case"sears-feet":case"sears-chains":case"benoit-1895-b-chains":case"indian-yards":case"indian-1937-yards":case"gold-coast-feet":case"sears-1922-truncated-chains":return"imperial";case"50-kilometers":case"150-kilometers":case"meters":return"metric";case null:case void 0:return null}return null}var C={esriAcres:"acres",esriAres:"ares",esriHectares:"hectares",esriSquareCentimeters:"square-centimeters",esriSquareDecimeters:"square-decimeters",esriSquareFeet:"square-feet",esriSquareInches:"square-inches",esriSquareKilometers:"square-kilometers",esriSquareMeters:"square-meters",esriSquareMiles:"square-miles",esriSquareMillimeters:"square-millimeters",esriSquareUsFeet:"square-us-feet",esriSquareYards:"square-yards"},B={esriCentimeters:"centimeters",esriDecimeters:"decimeters",esriFeet:"feet",esriInches:"inches",esriKilometers:"kilometers",esriMeters:"meters",esriMiles:"miles",esriMillimeters:"millimeters",esriNauticalMiles:"nautical-miles",esriYards:"yards"},P=Object(n.b)()(C),J=Object(n.b)()(B);Object(n.b)()(Object(i.a)(Object(i.a)({},C),B))},118:function(e,t,r){"use strict";r.d(t,"a",(function(){return W})),r.d(t,"b",(function(){return $})),r.d(t,"c",(function(){return _})),r.d(t,"d",(function(){return x})),r.d(t,"e",(function(){return A})),r.d(t,"f",(function(){return b})),r.d(t,"g",(function(){return v})),r.d(t,"h",(function(){return U})),r.d(t,"i",(function(){return k})),r.d(t,"j",(function(){return ce})),r.d(t,"k",(function(){return m})),r.d(t,"l",(function(){return h})),r.d(t,"m",(function(){return d})),r.d(t,"n",(function(){return w})),r.d(t,"o",(function(){return I})),r.d(t,"p",(function(){return E})),r.d(t,"q",(function(){return y})),r.d(t,"r",(function(){return q})),r.d(t,"s",(function(){return re})),r.d(t,"t",(function(){return O})),r.d(t,"u",(function(){return Q})),r.d(t,"v",(function(){return K})),r.d(t,"w",(function(){return Z})),r.d(t,"x",(function(){return ee})),r.d(t,"y",(function(){return g})),r.d(t,"z",(function(){return te})),r.d(t,"A",(function(){return oe}));var i=r(7),n=r(124),a=r(89),s=r(93),l=r(149),o=r(152),c=["field","field2","field3","normalizationField","rotationInfo.field","proportionalSymbolInfo.field","proportionalSymbolInfo.normalizationField","colorInfo.field","colorInfo.normalizationField"],u=["field","normalizationField"];function h(e,t){if(null!=e&&null!=t)for(var r of Array.isArray(e)?e:[e])if(f(c,r,t),"visualVariables"in r&&r.visualVariables)for(var i of r.visualVariables)f(u,i,t)}function f(e,t,r){if(e)for(var i of e){var a=Object(n.b)(i,t),s=a&&"function"!=typeof a&&y(r,a);s&&Object(n.c)(i,s.name,t)}}function d(e,t){if(null!=e&&null!=t)if("startField"in e){var r=y(t,e.startField),i=y(t,e.endField);e.startField=r&&r.name||null,e.endField=i&&i.name||null}else{var n=y(t,e.startTimeField),a=y(t,e.endTimeField);e.startTimeField=n&&n.name||null,e.endTimeField=a&&a.name||null}}var p=new Set;function m(e,t){return e&&t?(p.clear(),v(p,e,t),Array.from(p).sort()):[]}function v(e,t,r){if(r)if(t&&t.length)if(r.includes("*"))for(var{name:i}of t)e.add(i);else for(var n of r)b(e,t,n);else{if(r.includes("*"))return e.clear(),void e.add("*");for(var a of r)e.add(a)}}function b(e,t,r){if(t&&t.length){var i=y(t,r);i&&e.add(i.name)}else"string"==typeof r&&e.add(r)}function g(e,t){return Object(a.j)(t)||Object(a.j)(e)?[]:t.includes("*")?e.map((e=>e.name)):t}function y(e,t){if("string"!=typeof t)return null;if(null!=e)for(var r of(t=t.toLowerCase(),e))if(r&&r.name.toLowerCase()===t)return r;return null}function O(e,t){if(!e||!t||"string"!=typeof t)return!1;for(var r of(t=t.toLowerCase(),e))if(r&&r.name.toLowerCase()===t)return!0;return!1}function _(e,t,r){return j.apply(this,arguments)}function j(){return(j=Object(i.a)((function*(e,t,r){if(r){var{arcadeUtils:i}=yield Object(o.e)(),n=i.extractFieldNames(r);for(var a of n)b(e,t,a)}}))).apply(this,arguments)}function w({displayField:e,fields:t}){return e||(t&&t.length?S(t,"name-or-title")||S(t,"unique-identifier")||S(t,"type-or-category")||function(e){for(var t of e)if(t&&t.name){var r=t.name.toLowerCase();if(r.indexOf("name")>-1||r.indexOf("title")>-1)return t.name}return null}(t):null)}function S(e,t){for(var r of e)if(r&&r.valueType&&r.valueType===t)return r.name;return null}function x(e,t){return T.apply(this,arguments)}function T(){return(T=Object(i.a)((function*(e,t){if(t){var{fields:r}=t,i=Object(n.b)("elevationInfo.featureExpressionInfo",t);return i?i.collectRequiredFields(e,r):void 0}}))).apply(this,arguments)}function F(e,t,r){return M.apply(this,arguments)}function M(){return(M=Object(i.a)((function*(e,t,r){r.outStatistic.onStatisticValueExpression?_(e,t,r.outStatistic.onStatisticValueExpression):e.add(r.outStatistic.onStatisticField)}))).apply(this,arguments)}function A(e,t,r){return z.apply(this,arguments)}function z(){return(z=Object(i.a)((function*(e,t,r){t&&r&&"cluster"===r.type&&r.fields&&(yield Promise.all(r.fields.map((r=>F(e,t.fields,r)))))}))).apply(this,arguments)}function U(e,t,r){return D.apply(this,arguments)}function D(){return(D=Object(i.a)((function*(e,t,i){if(t&&(t.timeInfo&&Object(a.k)(i)&&i.timeExtent&&v(e,t.fields,[t.timeInfo.startField,t.timeInfo.endField]),t.floorInfo&&v(e,t.fields,[t.floorInfo.floorField]),Object(a.k)(i)&&Object(a.k)(i.where)&&i.where&&"1=1"!==i.where)){var n=(yield Promise.all([r.e(11),r.e(273)]).then(r.bind(null,272))).WhereClause.create(i.where,t.fieldsIndex);if(!n.isStandardized)throw new s.a("fieldUtils:collectFilterFields","Where clause is not standardized");v(e,t.fields,n.fieldNames)}}))).apply(this,arguments)}function I(e){if(!e)return[];var t="editFieldsInfo"in e&&e.editFieldsInfo;return t?m(e.fields,[t&&t.creatorField,t&&t.creationDateField,t&&t.editorField,t&&t.editDateField]):[]}function E(e){if(!e)return[];var t=e.geometryFieldsInfo;return t?m(e.fields,[t.shapeAreaField,t.shapeLengthField]):[]}function k(e,t){return N.apply(this,arguments)}function N(){return(N=Object(i.a)((function*(e,t){var{labelingInfo:r,fields:i}=t;r&&r.length&&(yield Promise.all(r.map((t=>R(e,i,t)))))}))).apply(this,arguments)}function R(e,t,r){return L.apply(this,arguments)}function L(){return(L=Object(i.a)((function*(e,t,r){if(r){var i=r.getLabelExpression(),n=r.where;if("arcade"===i.type)yield _(e,t,i.expression);else{var a=i.expression.match(/{[^}]*}/g);a&&a.forEach((r=>{b(e,t,r.slice(1,-1))}))}var s=/['"]+/g;if(n){var l=n.split(" ");3===l.length&&b(e,t,l[0].replace(s,"")),7===l.length&&(b(e,t,l[0].replace(s,"")),b(e,t,l[4].replace(s,"")))}}}))).apply(this,arguments)}function q(e){var t=e.defaultValue;return void 0!==t&&Y(e,t)?t:e.nullable?null:void 0}function V(e){return"number"==typeof e&&!isNaN(e)&&isFinite(e)}function G(e){return null===e||V(e)}var C="isInteger"in Number?Number.isInteger:e=>"number"==typeof e&&isFinite(e)&&Math.floor(e)===e;function B(e){return null===e||C(e)}function P(e){return null!=e&&"string"==typeof e}function J(e){return null===e||P(e)}function H(){return!0}function Y(e,t){var r;switch(e.type){case"date":case"integer":case"long":case"small-integer":case"esriFieldTypeDate":case"esriFieldTypeInteger":case"esriFieldTypeLong":case"esriFieldTypeSmallInteger":r=e.nullable?B:C;break;case"double":case"single":case"esriFieldTypeSingle":case"esriFieldTypeDouble":r=e.nullable?G:V;break;case"string":case"esriFieldTypeString":r=e.nullable?J:P;break;default:r=H}return 1===arguments.length?r:r(t)}var W,$,X=new Set(["integer","small-integer","single","double","esriFieldTypeInteger","esriFieldTypeSmallInteger","esriFieldTypeSingle","esriFieldTypeDouble"]);function K(e){return null!=e&&X.has(e.type)}function Z(e){return null!=e&&("string"===e.type||"esriFieldTypeString"===e.type)}function Q(e){return null!=e&&("date"===e.type||"esriFieldTypeDate"===e.type)}function ee(e){return null==e||"number"==typeof e&&isNaN(e)?null:e}function te(e,t){return e.nullable&&null===t?null:K(e)&&!function(e,t){var r="string"==typeof e?ie(e):e;return!!r&&(r.isInteger?C(t)&&t>=r.min&&t<=r.max:t>=r.min&&t<=r.max)}(e.type,Number(t))?W.OUT_OF_RANGE:Y(e,t)?e.domain?Object(l.e)(e.domain,t):null:$.INVALID_TYPE}function re(e){return Object(l.c)(e.domain)||(K(e)?ie(e.type):void 0)}function ie(e){switch(e){case"esriFieldTypeSmallInteger":case"small-integer":return ne;case"esriFieldTypeInteger":case"integer":return ae;case"esriFieldTypeSingle":case"single":return se;case"esriFieldTypeDouble":case"double":return le}}(W||(W={})).OUT_OF_RANGE="numeric-range-validation-error::out-of-range",function(e){e.INVALID_TYPE="type-validation-error::invalid-type"}($||($={}));var ne={min:-32768,max:32767,isInteger:!0},ae={min:-2147483648,max:2147483647,isInteger:!0},se={min:-34e37,max:12e37,isInteger:!1},le={min:-Number.MAX_VALUE,max:Number.MAX_VALUE,isInteger:!1};function oe(e,t,r){switch(e){case l.a.INVALID_CODED_VALUE:return"Value ".concat(r," is not in the coded domain - field: ").concat(t.name,", domain: ").concat(JSON.stringify(t.domain));case l.a.VALUE_OUT_OF_RANGE:return"Value ".concat(r," is out of the range of valid values - field: ").concat(t.name,", domain: ").concat(JSON.stringify(t.domain));case $.INVALID_TYPE:return"Value ".concat(r," is not a valid value for the field type - field: ").concat(t.name,", type: ").concat(t.type,", nullable: ").concat(t.nullable);case W.OUT_OF_RANGE:var{min:i,max:n}=ie(t.type);return"Value ".concat(r," is out of range for the number type - field: ").concat(t.name,", type: ").concat(t.type,", value range is ").concat(i," to ").concat(n)}}function ce(e,t){return!function(e,t,r){if(!t||!t.attributes||!e){if(Object(a.k)(r))for(var i of e)r.add(i);return!0}var n=t.attributes,s=!1;for(var l of e)if(!(l in n)){if(s=!0,!Object(a.k)(r))break;r.add(l)}return s}(e,t,null)}},121:function(e,t,r){"use strict";var i=r(82),n=(r(80),r(81),r(88),r(85)),a=r(95),s=r(102),l=r(84),o=(r(83),r(86),r(87),r(90)),c=new a.a({inherited:"inherited",codedValue:"coded-value",range:"range"}),u=class extends o.a{constructor(e){super(e),this.name=null,this.type=null}};Object(i.a)([Object(n.b)({type:String,json:{write:!0}})],u.prototype,"name",void 0),Object(i.a)([Object(s.a)(c)],u.prototype,"type",void 0);var h=u=Object(i.a)([Object(l.a)("esri.layers.support.Domain")],u);t.a=h},125:function(e,t,r){"use strict";r.d(t,"a",(function(){return w})),r.d(t,"b",(function(){return d})),r.d(t,"c",(function(){return a})),r.d(t,"d",(function(){return y})),r.d(t,"e",(function(){return p})),r.d(t,"f",(function(){return m})),r.d(t,"g",(function(){return b})),r.d(t,"h",(function(){return v})),r.d(t,"i",(function(){return n})),r.d(t,"j",(function(){return _})),r.d(t,"k",(function(){return c})),r.d(t,"l",(function(){return u})),r.d(t,"m",(function(){return l})),r.d(t,"n",(function(){return s})),r.d(t,"o",(function(){return f})),r.d(t,"p",(function(){return g})),r.d(t,"q",(function(){return O})),r.d(t,"r",(function(){return o})),r.d(t,"s",(function(){return h}));r(80),r(89);var i=r(103);function n(e=S){return[e[0],e[1],e[2],e[3]]}function a(e){return[e[0],e[1],e[2],e[3]]}function s(e,t,r,i,a=n()){return a[0]=e,a[1]=t,a[2]=r,a[3]=i,a}function l(e,t=n()){return t[0]=e.xmin,t[1]=e.ymin,t[2]=e.xmax,t[3]=e.ymax,t}function o(e,t){return new i.a({xmin:e[0],ymin:e[1],xmax:e[2],ymax:e[3],spatialReference:t})}function c(e,t,r=e){if("length"in t)j(t)?(r[0]=Math.min(e[0],t[0]),r[1]=Math.min(e[1],t[1]),r[2]=Math.max(e[2],t[2]),r[3]=Math.max(e[3],t[3])):2!==t.length&&3!==t.length||(r[0]=Math.min(e[0],t[0]),r[1]=Math.min(e[1],t[1]),r[2]=Math.max(e[2],t[0]),r[3]=Math.max(e[3],t[1]));else switch(t.type){case"extent":r[0]=Math.min(e[0],t.xmin),r[1]=Math.min(e[1],t.ymin),r[2]=Math.max(e[2],t.xmax),r[3]=Math.max(e[3],t.ymax);break;case"point":r[0]=Math.min(e[0],t.x),r[1]=Math.min(e[1],t.y),r[2]=Math.max(e[2],t.x),r[3]=Math.max(e[3],t.y)}return r}function u(e,t,r=e){for(var i=t.length,n=e[0],a=e[1],s=e[2],l=e[3],o=0;o<i;o++){var c=t[o];n=Math.min(n,c[0]),a=Math.min(a,c[1]),s=Math.max(s,c[0]),l=Math.max(l,c[1])}return r[0]=n,r[1]=a,r[2]=s,r[3]=l,r}function h(e){return e[0]>=e[2]?0:e[2]-e[0]}function f(e){return e[1]>=e[3]?0:e[3]-e[1]}function d(e){return h(e)*f(e)}function p(e,t){return v(e,t[0],t[1])}function m(e,t){return v(e,t.x,t.y)}function v(e,t,r){return t>=e[0]&&r>=e[1]&&t<=e[2]&&r<=e[3]}function b(e,t,r){return t[0]>=e[0]-r&&t[1]>=e[1]-r&&t[0]<=e[2]+r&&t[1]<=e[3]+r}function g(e,t){return Math.max(t[0],e[0])<=Math.min(t[2],e[2])&&Math.max(t[1],e[1])<=Math.min(t[3],e[3])}function y(e,t){return t[0]>=e[0]&&t[2]<=e[2]&&t[1]>=e[1]&&t[3]<=e[3]}function O(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e}function _(e){return e?O(e,w):n(w)}function j(e){return 4===e.length}var w=[1/0,1/0,-1/0,-1/0],S=[0,0,0,0]},134:function(e,t,r){"use strict";var i,n=r(82),a=(r(80),r(92)),s=(r(81),r(88),r(85)),l=r(102),o=r(84),c=(r(83),r(86),r(87),r(90)),u=i=class extends c.a{constructor(e){super(e),this.name=null,this.code=null}clone(){return new i({name:this.name,code:this.code})}};Object(n.a)([Object(s.b)({type:String,json:{write:!0}})],u.prototype,"name",void 0),Object(n.a)([Object(s.b)({type:[String,Number],json:{write:!0}})],u.prototype,"code",void 0);var h,f=u=i=Object(n.a)([Object(o.a)("esri.layers.support.CodedValue")],u),d=r(121),p=h=class extends d.a{constructor(e){super(e),this.codedValues=null,this.type="coded-value"}getName(e){var t=null;if(this.codedValues){var r=String(e);this.codedValues.some((e=>(String(e.code)===r&&(t=e.name),!!t)))}return t}clone(){return new h({codedValues:Object(a.a)(this.codedValues),name:this.name})}};Object(n.a)([Object(s.b)({type:[f],json:{write:!0}})],p.prototype,"codedValues",void 0),Object(n.a)([Object(l.a)({codedValue:"coded-value"})],p.prototype,"type",void 0);var m=p=h=Object(n.a)([Object(o.a)("esri.layers.support.CodedValueDomain")],p);t.a=m},136:function(e,t,r){"use strict";var i,n=r(82),a=(r(80),r(81),r(88),r(85),r(102)),s=r(84),l=(r(83),r(86),r(87),r(121)),o=i=class extends l.a{constructor(e){super(e),this.type="inherited"}clone(){return new i}};Object(n.a)([Object(a.a)({inherited:"inherited"})],o.prototype,"type",void 0);var c=o=i=Object(n.a)([Object(s.a)("esri.layers.support.InheritedDomain")],o);t.a=c},137:function(e,t,r){"use strict";var i,n=r(82),a=(r(80),r(81),r(88),r(85)),s=r(102),l=r(84),o=(r(83),r(86),r(87),r(121)),c=i=class extends o.a{constructor(e){super(e),this.maxValue=null,this.minValue=null,this.type="range"}clone(){return new i({maxValue:this.maxValue,minValue:this.minValue,name:this.name})}};Object(n.a)([Object(a.b)({type:Number,json:{type:[Number],read:{source:"range",reader:(e,t)=>t.range&&t.range[1]},write:{enabled:!1,overridePolicy(){return{enabled:null!=this.maxValue&&null==this.minValue}},target:"range",writer(e,t,r){t[r]=[this.minValue||0,e]}}}})],c.prototype,"maxValue",void 0),Object(n.a)([Object(a.b)({type:Number,json:{type:[Number],read:{source:"range",reader:(e,t)=>t.range&&t.range[0]},write:{target:"range",writer(e,t,r){t[r]=[e,this.maxValue||0]}}}})],c.prototype,"minValue",void 0),Object(n.a)([Object(s.a)({range:"range"})],c.prototype,"type",void 0);var u=c=i=Object(n.a)([Object(l.a)("esri.layers.support.RangeDomain")],c);t.a=u},140:function(e,t,r){"use strict";r.d(t,"a",(function(){return n})),r.d(t,"b",(function(){return o})),r.d(t,"c",(function(){return l})),r.d(t,"d",(function(){return s})),r.d(t,"e",(function(){return c}));r(80);var i=r(95);function n(e){return e}var a={milliseconds:{getter:"getMilliseconds",setter:"setMilliseconds",multiplier:1},seconds:{getter:"getSeconds",setter:"setSeconds",multiplier:1},minutes:{getter:"getMinutes",setter:"setMinutes",multiplier:1},hours:{getter:"getHours",setter:"setHours",multiplier:1},days:{getter:"getDate",setter:"setDate",multiplier:1},weeks:{getter:"getDate",setter:"setDate",multiplier:7},months:{getter:"getMonth",setter:"setMonth",multiplier:1},years:{getter:"getFullYear",setter:"setFullYear",multiplier:1},decades:{getter:"getFullYear",setter:"setFullYear",multiplier:10},centuries:{getter:"getFullYear",setter:"setFullYear",multiplier:100}},s=Object(i.b)()({esriTimeUnitsMilliseconds:"milliseconds",esriTimeUnitsSeconds:"seconds",esriTimeUnitsMinutes:"minutes",esriTimeUnitsHours:"hours",esriTimeUnitsDays:"days",esriTimeUnitsWeeks:"weeks",esriTimeUnitsMonths:"months",esriTimeUnitsYears:"years",esriTimeUnitsDecades:"decades",esriTimeUnitsCenturies:"centuries",esriTimeUnitsUnknown:null});function l(e,t,r){var i=new Date(e.getTime());if(t&&r){var n=a[r],{getter:s,setter:l,multiplier:o}=n;i[l](i[s]()+t*o)}return i}var o={milliseconds:1,seconds:1e3,minutes:6e4,hours:36e5,days:864e5,weeks:6048e5,months:26784e5,years:31536e6,decades:31536e7,centuries:31536e8};function c(e,t){switch(t){case"milliseconds":return new Date(e.getTime());case"seconds":return new Date(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds());case"minutes":return new Date(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes());case"hours":return new Date(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours());case"days":return new Date(e.getFullYear(),e.getMonth(),e.getDate());case"weeks":return new Date(e.getFullYear(),e.getMonth(),e.getDate()-e.getDay());case"months":return new Date(e.getFullYear(),e.getMonth(),1);case"years":return new Date(e.getFullYear(),0,1);case"decades":return new Date(e.getFullYear()-e.getFullYear()%10,0,1);case"centuries":return new Date(e.getFullYear()-e.getFullYear()%100,0,1);default:return null}}},149:function(e,t,r){"use strict";r.d(t,"a",(function(){return i})),r.d(t,"b",(function(){return f})),r.d(t,"c",(function(){return h})),r.d(t,"d",(function(){return u})),r.d(t,"e",(function(){return c}));r(80);var i,n,a=r(121),s=r(134),l=r(136),o=r(137);function c(e,t){switch(e.type){case"range":var r="range"in e?e.range[0]:e.minValue,n="range"in e?e.range[1]:e.maxValue;if(+t<r||+t>n)return i.VALUE_OUT_OF_RANGE;break;case"coded-value":case"codedValue":if(null==e.codedValues||e.codedValues.every((e=>null==e||e.code!==t)))return i.INVALID_CODED_VALUE}return null}(n=i||(i={})).VALUE_OUT_OF_RANGE="domain-validation-error::value-out-of-range",n.INVALID_CODED_VALUE="domain-validation-error::invalid-coded-value";var u={key:"type",base:a.a,typeMap:{range:o.a,"coded-value":s.a,inherited:l.a}};function h(e){if(e&&"range"===e.type)return{min:"range"in e?e.range[0]:e.minValue,max:"range"in e?e.range[1]:e.maxValue}}function f(e){if(!e||!e.type)return null;switch(e.type){case"range":return o.a.fromJSON(e);case"codedValue":return s.a.fromJSON(e);case"inherited":return l.a.fromJSON(e)}return null}},150:function(e,t,r){"use strict";var i,n=r(82),a=(r(80),r(81),r(88),r(85)),s=r(98),l=r(84),o=r(96),c=(r(83),r(86),r(87),r(90)),u=r(140),h=i=class extends c.a{constructor(e){super(e),this.end=null,this.start=null}static get allTime(){return f}static get empty(){return d}readEnd(e,t){return null!=t.end?new Date(t.end):null}writeEnd(e,t){t.end=e?e.getTime():null}get isAllTime(){return this.equals(i.allTime)}get isEmpty(){return this.equals(i.empty)}readStart(e,t){return null!=t.start?new Date(t.start):null}writeStart(e,t){t.start=e?e.getTime():null}clone(){return new i({end:this.end,start:this.start})}expandTo(e){if(this.isEmpty||this.isAllTime)return this.clone();var t=this.start?Object(u.e)(this.start,e):null,r=this.end?Object(u.c)(Object(u.e)(this.end,e),1,e):null;return new i({start:t,end:r})}intersection(e){var t,r,n,a,s,l,o,c;if(!e)return this.clone();if(this.isEmpty||e.isEmpty)return i.empty;if(this.isAllTime)return e.clone();if(e.isAllTime)return this.clone();var u,h,f=null!=(t=null==(r=this.start)?void 0:r.getTime())?t:-1/0,d=null!=(n=null==(a=this.end)?void 0:a.getTime())?n:1/0,p=null!=(s=null==(l=e.start)?void 0:l.getTime())?s:-1/0,m=null!=(o=null==(c=e.end)?void 0:c.getTime())?o:1/0;if(p>=f&&p<=d?u=p:f>=p&&f<=m&&(u=f),d>=p&&d<=m?h=d:m>=f&&m<=d&&(h=m),!isNaN(u)&&!isNaN(h)){var v=new i;return v.start=u===-1/0?null:new Date(u),v.end=h===1/0?null:new Date(h),v}return i.empty}offset(e,t){if(this.isEmpty||this.isAllTime)return this.clone();var r=new i,{start:n,end:a}=this;return n&&(r.start=Object(u.c)(n,e,t)),a&&(r.end=Object(u.c)(a,e,t)),r}equals(e){if(!e)return!1;var t=this.start?this.start.getTime():this.start,r=this.end?this.end.getTime():this.end,i=e.start?e.start.getTime():e.start,n=e.end?e.end.getTime():e.end;return t===i&&r===n}union(e){if(!e||e.isEmpty)return this.clone();if(this.isEmpty)return e.clone();if(this.isAllTime||e.isAllTime)return f.clone();var t=this.start&&e.start?new Date(Math.min(this.start.getTime(),e.start.getTime())):null,r=this.end&&e.end?new Date(Math.max(this.end.getTime(),e.end.getTime())):null;return new i({start:t,end:r})}};Object(n.a)([Object(a.b)({type:Date,json:{write:{allowNull:!0}}})],h.prototype,"end",void 0),Object(n.a)([Object(s.a)("end")],h.prototype,"readEnd",null),Object(n.a)([Object(o.a)("end")],h.prototype,"writeEnd",null),Object(n.a)([Object(a.b)({readOnly:!0,json:{read:!1}})],h.prototype,"isAllTime",null),Object(n.a)([Object(a.b)({readOnly:!0,json:{read:!1}})],h.prototype,"isEmpty",null),Object(n.a)([Object(a.b)({type:Date,json:{write:{allowNull:!0}}})],h.prototype,"start",void 0),Object(n.a)([Object(s.a)("start")],h.prototype,"readStart",null),Object(n.a)([Object(o.a)("start")],h.prototype,"writeStart",null);var f=new(h=i=Object(n.a)([Object(l.a)("esri.TimeExtent")],h)),d=new h({start:void 0,end:void 0}),p=h;t.a=p},152:function(e,t,r){"use strict";r.d(t,"a",(function(){return d})),r.d(t,"b",(function(){return f})),r.d(t,"c",(function(){return u})),r.d(t,"d",(function(){return h})),r.d(t,"e",(function(){return o}));var i,n=r(91),a=r(7),s=r(89),l=r(99);r(101);function o(){return c.apply(this,arguments)}function c(){return(c=Object(a.a)((function*(){return i||(i=Object(a.a)((function*(){var e=yield Promise.all([r.e(31),r.e(134)]).then(r.bind(null,383));return yield e.arcade.load(),{arcade:e.arcade,arcadeUtils:e,Dictionary:e.Dictionary,Feature:e.arcadeFeature}}))()),i}))).apply(this,arguments)}var u=(e,t,r)=>d.create(e,t,r,null,["$feature"]),h=(e,t,r)=>d.create(e,t,r,null,["$feature","$view"]),f=(e,t,r,i)=>d.create(e,t,r,i,["$feature","$view"]);class d{constructor(e,t,r,i,n,a,s,l){this.script=e,this.evaluate=n,this.fields=s,this._syntaxTree=i,this._arcade=t,this._arcadeDictionary=r,this._arcadeFeature=a,this._spatialReference=l,this._referencesGeometry=t.scriptTouchesGeometry(this._syntaxTree),this._referencesScale=this._arcade.referencesMember(this._syntaxTree,"scale")}static create(e,t,r,i,c,u){return Object(a.a)((function*(){var{arcade:a,Feature:h,Dictionary:f}=yield o(),p=l.a.fromJSON(t),m=a.parseScript(e,u),v=c.reduce(((e,t)=>Object(n.a)(Object(n.a)({},e),{},{[t]:null})),{}),b=null;Object(s.k)(i)&&((b=new f(i)).immutable=!0,v.$config=null);var g=a.scriptUsesGeometryEngine(m)&&a.enableGeometrySupport(),y=a.scriptUsesFeatureSet(m)&&a.enableFeatureSetSupport(),O=a.scriptIsAsync(m)&&a.enableAsyncSupport(),_={vars:v,spatialReference:p,useAsync:!!O},j=new f;j.immutable=!1,j.setField("scale",0);var w=a.compileScript(m,_);return yield Promise.all([g,y,O]),new d(e,a,f,m,(e=>("$view"in e&&e.$view&&(j.setField("scale",e.$view.scale),e.$view=j),b&&(e.$config=b),w({vars:e,spatialReference:p}))),new h,r,p)}))()}repurposeFeature(e){return e.geometry&&!e.geometry.spatialReference&&(e.geometry.spatialReference=this._spatialReference),this._arcadeFeature.repurposeFromGraphicLikeObject(e.geometry,e.attributes,{fields:this.fields}),this._arcadeFeature}repurposeAdapter(e){return this._arcadeFeature.repurposeFromAdapter(e,{fields:this.fields}),this._arcadeFeature}createDictionary(){return new this._arcadeDictionary}referencesMember(e){return this._arcade.referencesMember(this._syntaxTree,e)}referencesFunction(e){return this._arcade.referencesFunction(this._syntaxTree,e)}referencesGeometry(){return this._referencesGeometry}referencesScale(){return this._referencesScale}extractFieldLiterals(e){return this._arcade.extractFieldLiterals(this._syntaxTree,e)}}},173:function(e,t,r){"use strict";r.d(t,"a",(function(){return l})),r.d(t,"b",(function(){return o})),r.d(t,"c",(function(){return c})),r.d(t,"d",(function(){return u})),r.d(t,"e",(function(){return f})),r.d(t,"f",(function(){return d})),r.d(t,"g",(function(){return h}));var i=r(112),n=r(99),a=r(139);function s(e){return new n.a({wkt:'GEOCCS["Spherical geocentric",\n    DATUM["Not specified",\n      SPHEROID["Sphere",'.concat(e.radius,',0]],\n    PRIMEM["Greenwich",0.0,\n      AUTHORITY["EPSG","8901"]],\n    UNIT["m",1.0],\n    AXIS["Geocentric X",OTHER],\n    AXIS["Geocentric Y",EAST],\n    AXIS["Geocentric Z",NORTH]\n  ]')})}var l=s(a.a),o=s(a.b),c=s(a.c),u=new n.a({wkt:'GEOCCS["WGS 84",\n  DATUM["WGS_1984",\n    SPHEROID["WGS 84",'.concat(a.a.radius,',298.257223563,\n      AUTHORITY["EPSG","7030"]],\n    AUTHORITY["EPSG","6326"]],\n  PRIMEM["Greenwich",0,\n    AUTHORITY["EPSG","8901"]],\n  UNIT["m",1.0,\n    AUTHORITY["EPSG","9001"]],\n  AXIS["Geocentric X",OTHER],\n  AXIS["Geocentric Y",OTHER],\n  AXIS["Geocentric Z",NORTH],\n  AUTHORITY["EPSG","4978"]\n]')});function h(e){return e&&(Object(i.g)(e)||e===o)?o:e&&(Object(i.h)(e)||e===c)?c:l}function f(e){return e&&(Object(i.g)(e)||e===o)?a.b:e&&(Object(i.h)(e)||e===c)?a.c:a.a}function d(e){return Object(i.k)(e)?a.b:Object(i.l)(e)?a.c:a.a}},186:function(e,t,r){"use strict";r.d(t,"a",(function(){return y})),r.d(t,"b",(function(){return O}));var i=r(82),n=r(126),a=r(84),s=r(144),l=r(97),o=r(228),c=r(89),u=r(253),h=r(92);class f{constructor(){this._propertyOriginMap=new Map,this._originStores=new Array(s.a),this._values=new Map}clone(e){var t=this,r=new f,i=this._originStores[0];i&&i.forEach(((e,t)=>{r.set(t,Object(h.a)(e),0)}));for(var n=function(i){var n=t._originStores[i];n&&n.forEach(((t,n)=>{e&&e.has(n)||r.set(n,Object(h.a)(t),i)}))},a=2;a<s.a;a++)n(a);return r}get(e,t){var r=void 0===t?this._values:this._originStores[t];return r?r.get(e):void 0}keys(e){var t=null==e?this._values:this._originStores[e];return t?[...t.keys()]:[]}set(e,t,r=6){var i=this._originStores[r];if(i||(i=new Map,this._originStores[r]=i),i.set(e,t),!this._values.has(e)||Object(c.d)(this._propertyOriginMap.get(e))<=r){var n=this._values.get(e);return this._values.set(e,t),this._propertyOriginMap.set(e,r),n!==t}return!1}delete(e,t=6){var r=this._originStores[t];if(r){var i=r.get(e);if(r.delete(e),this._values.has(e)&&this._propertyOriginMap.get(e)===t){this._values.delete(e);for(var n=t-1;n>=0;n--){var a=this._originStores[n];if(a&&a.has(e)){this._values.set(e,a.get(e)),this._propertyOriginMap.set(e,n);break}}}return i}}has(e,t){var r=void 0===t?this._values:this._originStores[t];return!!r&&r.has(e)}revert(e,t){for(;t>0&&!this.has(e,t);)--t;var r=this._originStores[t],i=r&&r.get(e),n=this._values.get(e);return this._values.set(e,i),this._propertyOriginMap.set(e,t),n!==i}originOf(e){return this._propertyOriginMap.get(e)||0}forEach(e){this._values.forEach(e)}}var d=f,p=e=>{var t=class extends e{constructor(...e){super(...e);var t=Object(c.d)(Object(n.a)(this)),r=t.metadatas,i=t.store,a=new d;t.store=a,i.keys().forEach((e=>{a.set(e,i.get(e),0)})),Object.keys(r).forEach((e=>{t.internalGet(e)&&a.set(e,t.internalGet(e),0)}))}read(e,t){Object(u.a)(this,e,t)}getAtOrigin(e,t){var r=m(this),i=Object(s.d)(t);if("string"==typeof e)return r.get(e,i);var n={};return e.forEach((e=>{n[e]=r.get(e,i)})),n}originOf(e){return Object(s.b)(this.originIdOf(e))}originIdOf(e){return m(this).originOf(e)}revert(e,t){var r=m(this),i=Object(s.d)(t),a=Object(n.a)(this);("string"==typeof e?"*"===e?r.keys(i):[e]:e).forEach((e=>{a.propertyInvalidated(e),r.revert(e,i),a.propertyCommitted(e)}))}};return t=Object(i.a)([Object(a.a)("esri.core.ReadOnlyMultiOriginJSONSupport")],t)};function m(e){return Object(n.a)(e).store}var v=class extends(p(l.a)){};v=Object(i.a)([Object(a.a)("esri.core.ReadOnlyMultiOriginJSONSupport")],v);var b=e=>{var t=class extends e{constructor(...e){super(...e)}clear(e,t="user"){return g(this).delete(e,Object(s.d)(t))}write(e={},t){return Object(o.b)(this,e=e||{},t),e}setAtOrigin(e,t,r){Object(n.a)(this).setAtOrigin(e,t,Object(s.d)(r))}removeOrigin(e){var t=g(this),r=Object(s.d)(e),i=t.keys(r);for(var n of i)t.originOf(n)===r&&t.set(n,t.get(n,r),6)}updateOrigin(e,t){for(var r=g(this),i=Object(s.d)(t),n=this.get(e),a=i+1;a<s.a;++a)r.delete(e,a);r.set(e,n,i)}toJSON(e){return this.write({},e)}};return(t=Object(i.a)([Object(a.a)("esri.core.WriteableMultiOriginJSONSupport")],t)).prototype.toJSON.isDefaultToJSON=!0,t};function g(e){return Object(n.a)(e).store}var y=e=>{var t=class extends(b(p(e))){constructor(...e){super(...e)}};return t=Object(i.a)([Object(a.a)("esri.core.MultiOriginJSONSupport")],t)},O=class extends(y(l.a)){};O=Object(i.a)([Object(a.a)("esri.core.MultiOriginJSONSupport")],O)},193:function(e,t,r){"use strict";r.d(t,"a",(function(){return a}));var i=r(139),n=r(117),a={inches:Object(n.c)(1,"meters","inches"),feet:Object(n.c)(1,"meters","feet"),"us-feet":Object(n.c)(1,"meters","us-feet"),yards:Object(n.c)(1,"meters","yards"),miles:Object(n.c)(1,"meters","miles"),"nautical-miles":Object(n.c)(1,"meters","nautical-miles"),millimeters:Object(n.c)(1,"meters","millimeters"),centimeters:Object(n.c)(1,"meters","centimeters"),decimeters:Object(n.c)(1,"meters","decimeters"),meters:Object(n.c)(1,"meters","meters"),kilometers:Object(n.c)(1,"meters","kilometers"),"decimal-degrees":1/Object(n.m)(1,"meters",i.a.radius)}},213:function(e,t,r){"use strict";r.d(t,"a",(function(){return n})),r.d(t,"b",(function(){return a}));var i=r(176);class n{constructor(e,t,r){this._namespace=e,this._storage=t,this._removeFunc=!1,this._hit=0,this._miss=0,this._storage.register(this),this._namespace+=":",r&&(this._storage.registerRemoveFunc(this._namespace,r),this._removeFunc=!0)}destroy(){this._storage.clear(this._namespace),this._removeFunc&&this._storage.deregisterRemoveFunc(this._namespace),this._storage.deregister(this),this._storage=null}get namespace(){return this._namespace.slice(0,-1)}get hitRate(){return this._hit/(this._hit+this._miss)}get size(){return this._storage.size}get maxSize(){return this._storage.maxSize}resetHitRate(){this._hit=this._miss=0}put(e,t,r,i=0){this._storage.put(this._namespace+e,t,r,i)}get(e){var t=this._storage.get(this._namespace+e);return void 0===t?++this._miss:++this._hit,t}pop(e){var t=this._storage.pop(this._namespace+e);return void 0===t?++this._miss:++this._hit,t}updateSize(e,t,r){this._storage.updateSize(this._namespace+e,t,r)}clear(){this._storage.clear(this._namespace)}clearAll(){this._storage.clearAll()}getStats(){return this._storage.getStats()}resetStats(){this._storage.resetStats()}}class a{constructor(e=10485760){this._maxSize=e,this._db=new Map,this._size=0,this._hit=0,this._miss=0,this._removeFuncs=new i.a,this._users=new i.a}destroy(){this.clearAll(),this._removeFuncs.clear(),this._users.clear(),this._db=null}register(e){this._users.push(e)}deregister(e){this._users.removeUnordered(e)}registerRemoveFunc(e,t){this._removeFuncs.push([e,t])}deregisterRemoveFunc(e){this._removeFuncs.filterInPlace((t=>t[0]!==e))}get size(){return this._size}get maxSize(){return this._maxSize}set maxSize(e){this._maxSize=Math.max(e,0),this._checkSizeLimit()}put(e,t,r,i){var n=this._db.get(e);if(n&&(this._size-=n.size,this._db.delete(e),n.entry!==t&&this._notifyRemoved(e,n.entry)),r>this._maxSize)this._notifyRemoved(e,t);else if(void 0!==t)if(!r||r<0)console.warn("Refusing to cache entry with invalid size "+r);else{var a=1+Math.max(i,-3)- -3;this._db.set(e,{entry:t,size:r,lifetime:a,lives:a}),this._size+=r,this._checkSizeLimit()}else console.warn("Refusing to cache undefined entry ")}updateSize(e,t,r){var i=this._db.get(e);if(i&&i.entry===t){if(this._size-=i.size,r>this._maxSize)return this._db.delete(e),void this._notifyRemoved(e,t);i.size=r,this._size+=r,this._checkSizeLimit()}}pop(e){var t=this._db.get(e);if(t)return this._size-=t.size,this._db.delete(e),++this._hit,t.entry;++this._miss}get(e){var t=this._db.get(e);if(void 0!==t)return this._db.delete(e),t.lives=t.lifetime,this._db.set(e,t),++this._hit,t.entry;++this._miss}getStats(){var e={Size:Math.round(this._size/1048576)+"/"+Math.round(this._maxSize/1048576)+"MB","Hit rate":Math.round(100*this._getHitRate())+"%",Entries:this._db.size.toString()},t={},r=new Array;this._db.forEach(((e,i)=>{var n=e.lifetime;r[n]=(r[n]||0)+e.size,this._users.forAll((r=>{var n=r.namespace;if(i.startsWith(n)){var a=t[n]||0;t[n]=a+e.size}}))}));var i={};this._users.forAll((e=>{var r=e.namespace;if(!isNaN(e.hitRate)&&e.hitRate>0){var n=t[r]||0;t[r]=n,i[r]=Math.round(100*e.hitRate)+"%"}else i[r]="0%"}));var n=Object.keys(t);n.forEach((e=>t[e]=t[e]/this._size*100)),n.sort(((e,r)=>t[r]-t[e])),n.forEach((r=>e[r]=Math.round(t[r])+"% / "+i[r]));for(var a=r.length-1;a>=0;--a){var s=r[a];s&&(e["Priority "+(a+-3-1)]=Math.round(s/this.size*100)+"%")}return e}resetStats(){this._hit=this._miss=0,this._users.forAll((e=>e.resetHitRate()))}clear(e){this._db.forEach(((t,r)=>{r.startsWith(e)&&(this._size-=t.size,this._db.delete(r),this._notifyRemoved(r,t.entry))}))}clearAll(){this._db.forEach(((e,t)=>this._notifyRemoved(t,e.entry))),this._size=0,this._db.clear()}_getHitRate(){return this._hit/(this._hit+this._miss)}_notifyRemoved(e,t){this._removeFuncs.forAll((r=>{e.startsWith(r[0])&&r[1](t)}))}_checkSizeLimit(){if(!(this._size<=this._maxSize))for(var[e,t]of this._db)if(this._db.delete(e),t.lives<=1?(this._size-=t.size,this._notifyRemoved(e,t.entry)):(--t.lives,this._db.set(e,t)),this._size<=.9*this.maxSize)return}}},235:function(e,t,r){"use strict";var i=r(213);t.a=class{constructor(e,t){this._storage=new i.b,this._storage.maxSize=e,t&&this._storage.registerRemoveFunc("",t)}put(e,t,r){this._storage.put(e,t,r,1)}pop(e){return this._storage.pop(e)}get(e){return this._storage.get(e)}clear(){this._storage.clearAll()}destroy(){this._storage.destroy()}get maxSize(){return this._storage.maxSize}set maxSize(e){this._storage.maxSize=e}}},242:function(e,t,r){"use strict";r.d(t,"a",(function(){return d})),r.d(t,"b",(function(){return u})),r.d(t,"c",(function(){return m})),r.d(t,"d",(function(){return O})),r.d(t,"e",(function(){return y})),r.d(t,"f",(function(){return h})),r.d(t,"g",(function(){return f})),r.d(t,"h",(function(){return v})),r.d(t,"i",(function(){return b})),r.d(t,"j",(function(){return p})),r.d(t,"k",(function(){return g}));var i=r(89),n=r(83),a=r(258),s=["MapServer","ImageServer","FeatureServer","SceneServer","StreamServer","VectorTileServer"],l=new RegExp("^((?:https?:)?\\/\\/\\S+?\\/rest\\/services\\/(.+?)\\/(".concat(s.join("|"),"))(?:\\/(?:layers\\/)?(\\d+))?"),"i"),o=new RegExp("^((?:https?:)?\\/\\/\\S+?\\/([^\\/\\n]+)\\/(".concat(s.join("|"),"))(?:\\/(?:layers\\/)?(\\d+))?"),"i"),c=/(.*)\/(\d+)\/?$/i;function u(e){return!!l.test(e)}function h(e){var t=Object(n.J)(e),r=t.path.match(l)||t.path.match(o);if(!r)return null;var[,i,a,s,c]=r,u=a.indexOf("/");return{title:d(-1!==u?a.slice(u+1):a),serverType:s,sublayer:null!=c&&""!==c?parseInt(c,10):null,url:{path:i}}}function f(e){var t=Object(n.J)(e).path.match(c);return t?{serviceUrl:t[1],sublayerId:Number(t[2])}:null}function d(e){return(e=e.replace(/\s*[/_]+\s*/g," "))[0].toUpperCase()+e.slice(1)}function p(e,t){var r=[];if(e){var n=h(e);Object(i.k)(n)&&n.title&&r.push(n.title)}if(t){var a=d(t);r.push(a)}if(2===r.length){if(-1!==r[0].toLowerCase().indexOf(r[1].toLowerCase()))return r[0];if(-1!==r[1].toLowerCase().indexOf(r[0].toLowerCase()))return r[1]}return r.join(" - ")}function m(e){if(!e)return!1;var t=-1!==(e=e.toLowerCase()).indexOf(".arcgis.com/"),r=-1!==e.indexOf("//services")||-1!==e.indexOf("//tiles")||-1!==e.indexOf("//features");return t&&r}function v(e,t){return e?Object(n.H)(Object(n.G)(e,t)):e}function b(e){var{url:t}=e;if(!t)return{url:t};t=Object(n.G)(t,e.logger);var r,a=Object(n.J)(t),s=h(a.path);if(Object(i.k)(s))null!=s.sublayer&&null==e.layer.layerId&&(r=s.sublayer),t=s.url.path;else if(e.nonStandardUrlAllowed){var l=f(a.path);Object(i.k)(l)&&(t=l.serviceUrl,r=l.sublayerId)}return{url:Object(n.H)(t),layerId:r}}function g(e,t,r,i,s){Object(a.f)(t,i,"url",s),i.url&&null!=e.layerId&&(i.url=Object(n.y)(i.url,r,e.layerId.toString()))}function y(e){if(!e)return!1;var t=e.toLowerCase(),r=-1!==t.indexOf("/services/"),i=-1!==t.indexOf("/mapserver/wmsserver"),n=-1!==t.indexOf("/imageserver/wmsserver"),a=-1!==t.indexOf("/wmsserver");return r&&(i||n||a)}function O(e){if(!e)return!1;var t=new n.a(Object(n.z)(e)).authority.toLowerCase();return"server.arcgisonline.com"===t||"services.arcgisonline.com"===t}},336:function(e,t,r){"use strict";var i,n=r(91),a=r(82),s=(r(80),r(81),r(88)),l=r(85),o=r(95),c=r(98),u=r(84),h=r(96),f=(r(83),r(86),r(87),r(90)),d=r(112),p=r(99),m=r(161),v=r(113),b=(r(101),r(117)),g=r(125),y=r(460),O=new o.a({PNG:"png",PNG8:"png8",PNG24:"png24",PNG32:"png32",JPEG:"jpg",JPG:"jpg",DIB:"dib",TIFF:"tiff",EMF:"emf",PS:"ps",PDF:"pdf",GIF:"gif",SVG:"svg",SVGZ:"svgz",Mixed:"mixed",MIXED:"mixed",LERC:"lerc",LERC2D:"lerc2d",RAW:"raw",pbf:"pbf"}),_=i=class extends f.a{constructor(e){super(e),this.dpi=96,this.format=null,this.origin=null,this.minScale=0,this.maxScale=0,this.size=null,this.spatialReference=null}static create(e={size:256,spatialReference:p.a.WebMercator}){var t=e.resolutionFactor||1,r=e.scales,n=e.size||256,a=e.spatialReference||p.a.WebMercator;if(!Object(d.i)(a)){var s=[];if(r)for(var l=0;l<r.length;l++){var o=r[l];s.push({level:l,scale:o,resolution:o})}else for(var c=5e-4,u=23;u>=0;u--)s.unshift({level:u,scale:c,resolution:c}),c*=2;return new i({dpi:96,lods:s,origin:new v.a(0,0,a),size:[n,n],spatialReference:a})}var h=Object(d.d)(a),f=e.origin?new v.a({x:e.origin.x,y:e.origin.y,spatialReference:a}):new v.a(h?{x:h.origin[0],y:h.origin[1],spatialReference:a}:{x:0,y:0,spatialReference:a}),m=1/(39.37*Object(b.f)(a)*96),g=[];if(r)for(var y=0;y<r.length;y++){var O=r[y],_=O*m;g.push({level:y,scale:O,resolution:_})}else{var j=Object(d.f)(a)?512/n*591657527.5917094:256/n*591657527.591555,w=Math.ceil(24/t);g.push({level:0,scale:j,resolution:j*m});for(var S=1;S<w;S++){var x=j/Math.pow(2,t),T=x*m;g.push({level:S,scale:x,resolution:T}),j=x}}return new i({dpi:96,lods:g,origin:f,size:[n,n],spatialReference:a})}get isWrappable(){var{spatialReference:e,origin:t}=this;if(e&&t){var r=Object(d.d)(e);return e.isWrappable&&Math.abs(r.origin[0]-t.x)<=r.dx}return!1}readOrigin(e,t){return v.a.fromJSON(Object(n.a)({spatialReference:t.spatialReference},e))}set lods(e){var t=0,r=0,i=[];this._levelToLOD={},e&&(t=-1/0,r=1/0,e.forEach((e=>{i.push(e.scale),t=e.scale>t?e.scale:t,r=e.scale<r?e.scale:r,this._levelToLOD[e.level]=e}))),this._set("scales",i),this._set("minScale",t),this._set("maxScale",r),this._set("lods",e),this._initializeUpsampleLevels()}readSize(e,t){return[t.cols,t.rows]}writeSize(e,t){t.cols=e[0],t.rows=e[0]}zoomToScale(e){var t=this.scales;if(e<=0)return t[0];if(e>=t.length)return t[t.length-1];var r=Math.round(e-.5),i=Math.round(e);return t[i]+(i-e)*(t[r]-t[i])}scaleToZoom(e){for(var t=this.scales,r=t.length-1,i=0;i<r;i++){var n=t[i],a=t[i+1];if(n<=e)return i;if(a===e)return i+1;if(n>e&&a<e)return i+1-(e-a)/(n-a)}return i}snapScale(e,t=.95){var r=this.scaleToZoom(e);return r%Math.floor(r)>=t?this.zoomToScale(Math.ceil(r)):this.zoomToScale(Math.floor(r))}tileAt(e,t,r,i){var n,a,s=this.lodAt(e);if(!s)return null;if("number"==typeof t)n=t,a=r;else if(Object(d.c)(t.spatialReference,this.spatialReference))n=t.x,a=t.y,i=r;else{var l=Object(m.d)(t,this.spatialReference);if(!l)return null;n=l.x,a=l.y,i=r}var o=s.resolution*this.size[0],c=s.resolution*this.size[1];return i||(i={id:null,level:0,row:0,col:0,extent:Object(g.i)()}),i.level=e,i.row=Math.floor((this.origin.y-a)/c+.001),i.col=Math.floor((n-this.origin.x)/o+.001),this.updateTileInfo(i),i}updateTileInfo(e,t=0){var r=this.lodAt(e.level);if(!r&&1===t){var i=this.lods[this.lods.length-1];i.level<e.level&&(r=i)}if(r){var n=e.level-r.level,a=r.resolution*this.size[0]/Math.pow(2,n),s=r.resolution*this.size[1]/Math.pow(2,n);e.id="".concat(e.level,"/").concat(e.row,"/").concat(e.col),e.extent||(e.extent=Object(g.i)()),e.extent[0]=this.origin.x+e.col*a,e.extent[1]=this.origin.y-(e.row+1)*s,e.extent[2]=e.extent[0]+a,e.extent[3]=e.extent[1]+s}}upsampleTile(e){var t=this._upsampleLevels[e.level];return!(!t||-1===t.parentLevel)&&(e.level=t.parentLevel,e.row=Math.floor(e.row/t.factor+.001),e.col=Math.floor(e.col/t.factor+.001),this.updateTileInfo(e),!0)}getTileBounds(e,t){var{resolution:r}=this.lodAt(t.level),i=r*this.size[0],n=r*this.size[1];return e[0]=this.origin.x+t.col*i,e[1]=this.origin.y-(t.row+1)*n,e[2]=e[0]+i,e[3]=e[1]+n,e}lodAt(e){return this._levelToLOD&&this._levelToLOD[e]||null}clone(){return i.fromJSON(this.write({}))}_initializeUpsampleLevels(){var e=this.lods;this._upsampleLevels=[];for(var t=null,r=0;r<e.length;r++){var i=e[r];this._upsampleLevels[i.level]={parentLevel:t?t.level:-1,factor:t?t.resolution/i.resolution:0},t=i}}};Object(a.a)([Object(l.b)({type:Number,json:{write:!0}})],_.prototype,"compressionQuality",void 0),Object(a.a)([Object(l.b)({type:Number,json:{write:!0}})],_.prototype,"dpi",void 0),Object(a.a)([Object(l.b)({type:String,json:{read:O.read,write:O.write,origins:{"web-scene":{read:!1,write:!1}}}})],_.prototype,"format",void 0),Object(a.a)([Object(l.b)({readOnly:!0})],_.prototype,"isWrappable",null),Object(a.a)([Object(l.b)({type:v.a,json:{write:!0}})],_.prototype,"origin",void 0),Object(a.a)([Object(c.a)("origin")],_.prototype,"readOrigin",null),Object(a.a)([Object(l.b)({type:[y.a],value:null,json:{write:!0}})],_.prototype,"lods",null),Object(a.a)([Object(l.b)({readOnly:!0})],_.prototype,"minScale",void 0),Object(a.a)([Object(l.b)({readOnly:!0})],_.prototype,"maxScale",void 0),Object(a.a)([Object(l.b)({readOnly:!0})],_.prototype,"scales",void 0),Object(a.a)([Object(l.b)({cast:e=>Array.isArray(e)?e:"number"==typeof e?[e,e]:[256,256]})],_.prototype,"size",void 0),Object(a.a)([Object(c.a)("size",["rows","cols"])],_.prototype,"readSize",null),Object(a.a)([Object(h.a)("size",{cols:{type:s.a},rows:{type:s.a}})],_.prototype,"writeSize",null),Object(a.a)([Object(l.b)({type:p.a,json:{write:!0}})],_.prototype,"spatialReference",void 0);var j=_=i=Object(a.a)([Object(u.a)("esri.layers.support.TileInfo")],_);t.a=j},460:function(e,t,r){"use strict";var i,n=r(82),a=(r(80),r(81),r(88)),s=r(85),l=r(84),o=(r(83),r(86),r(87),r(90)),c=i=class extends o.a{constructor(e){super(e),this.level=0,this.levelValue=null,this.resolution=0,this.scale=0}clone(){return new i({level:this.level,levelValue:this.levelValue,resolution:this.resolution,scale:this.scale})}};Object(n.a)([Object(s.b)({type:a.a,json:{write:!0}})],c.prototype,"level",void 0),Object(n.a)([Object(s.b)({type:String,json:{write:!0}})],c.prototype,"levelValue",void 0),Object(n.a)([Object(s.b)({type:Number,json:{write:!0}})],c.prototype,"resolution",void 0),Object(n.a)([Object(s.b)({type:Number,json:{write:!0}})],c.prototype,"scale",void 0);var u=c=i=Object(n.a)([Object(l.a)("esri.layers.support.LOD")],c);t.a=u},592:function(e,t,r){"use strict";r.d(t,"a",(function(){return T}));var i=r(7),n=r(91),a=r(82),s=(r(80),r(81)),l=r(85),o=r(116),c=r(84),u=r(93),h=r(83),f=(r(86),r(87),r(176)),d=r(94),p=r(241),m=r(97),v=r(106),b=r(115),g=r(108),y=r(235),O=r(92),_=r(209);class j{constructor(){this.location={left:0,top:0,width:0,height:0},this._allAvailability="unknown",this.byteSize=40}getAvailability(e,t){if("unknown"!==this._allAvailability)return this._allAvailability;var r=(e-this.location.top)*this.location.width+(t-this.location.left),i=r%8,n=r>>3,a=this._tileAvailabilityBitSet;return n<0||n>a.length?"unknown":a[n]&1<<i?"available":"unavailable"}_updateFromData(e){for(var t=this.location.width,r=this.location.height,i=!0,n=!0,a=Math.ceil(t*r/8),s=new Uint8Array(a),l=0,o=0;o<e.length;o++){var c=o%8;e[o]?(n=!1,s[l]|=1<<c):i=!1,7===c&&++l}n?this._allAvailability="unavailable":i?this._allAvailability="available":(this._allAvailability="unknown",this._tileAvailabilityBitSet=s,this.byteSize+=s.length)}static fromDefinition(e,t){var r=e.service.request||v.default,{row:i,col:a,width:s,height:l}=e,o={query:{f:"json"}};return t=t?Object(n.a)(Object(n.a)({},o),t):o,r(function(e){var t;if("vector-tile"===e.service.type)t="".concat(e.service.url,"/tilemap/").concat(e.level,"/").concat(e.row,"/").concat(e.col,"/").concat(e.width,"/").concat(e.height);else{var r=e.service.tileServers;t="".concat(r&&r.length?r[e.row%r.length]:e.service.url,"/tilemap/").concat(e.level,"/").concat(e.row,"/").concat(e.col,"/").concat(e.width,"/").concat(e.height)}var i=e.service.query;return i&&(t="".concat(t,"?").concat(i)),t}(e),t).then((e=>e.data)).catch((e=>{if(e&&e.details&&422===e.details.httpStatus)return{location:{top:i,left:a,width:s,height:l},valid:!0,data:Object(_.b)(s*l,0)};throw e})).then((e=>{if(e.location&&(e.location.top!==i||e.location.left!==a||e.location.width!==s||e.location.height!==l))throw new u.a("tilemap:location-mismatch","Tilemap response for different location than requested",{response:e,definition:{top:i,left:a,width:s,height:l}});return j.fromJSON(e)}))}static fromJSON(e){j.validateJSON(e);var t=new j;return t.location=Object.freeze(Object(O.a)(e.location)),t._updateFromData(e.data),Object.freeze(t)}static validateJSON(e){if(!e||!e.location)throw new u.a("tilemap:missing-location","Location missing from tilemap response");if(!1===e.valid)throw new u.a("tilemap:invalid","Tilemap response was marked as invalid");if(!e.data)throw new u.a("tilemap:missing-data","Data missing from tilemap response");if(!Array.isArray(e.data))throw new u.a("tilemap:data-mismatch","Data must be an array of numbers");if(e.data.length!==e.location.width*e.location.height)throw new u.a("tilemap:data-mismatch","Number of data items does not match width/height of tilemap")}}function w(e){return"".concat(e.level,"/").concat(e.row,"/").concat(e.col,"/").concat(e.width,"/").concat(e.height)}var S,x=s.a.getLogger("esri.layers.support.TilemapCache"),T=S=class extends m.a{constructor(e){super(e),this._handles=new b.a,this._pendingTilemapRequests={},this._availableLevels={},this.levels=5,this.cacheByteSize=2097152,this.request=v.default,this._prefetchingEnabled=!0}initialize(){this._tilemapCache=new y.a(this.cacheByteSize),this._handles.add([this.watch(["layer.parsedUrl","layer.tileServers?"],(()=>this._initializeTilemapDefinition())),Object(g.a)(this,"layer.tileInfo.lods",(e=>this._initializeAvailableLevels(e)),!0)]),this._initializeTilemapDefinition()}destroy(){this._handles&&(this._handles.destroy(),this._handles=null)}castLevels(e){return e<=2?(x.error("Minimum levels for Tilemap is 3, but got ",e),3):e}get size(){return 1<<this.levels}fetchTilemap(e,t,r,i){if(!this._availableLevels[e])return Promise.reject(new u.a("tilemap-cache:level-unavailable","Level ".concat(e," is unavailable in the service")));var a=this._tmpTilemapDefinition,s=this._tilemapFromCache(e,t,r,a);if(s)return Promise.resolve(s);var l=i&&i.signal;return i=Object(n.a)(Object(n.a)({},i),{},{signal:null}),new Promise(((e,t)=>{Object(d.p)(l,(()=>t(Object(d.e)())));var r=w(a),n=this._pendingTilemapRequests[r];if(!n){n=j.fromDefinition(a,i).then((e=>(this._tilemapCache.put(r,e,e.byteSize),e)));var s=()=>delete this._pendingTilemapRequests[r];this._pendingTilemapRequests[r]=n,n.then(s,s)}n.then(e,t)}))}getAvailability(e,t,r){if(!this._availableLevels[e])return"unavailable";var i=this._tilemapFromCache(e,t,r,this._tmpTilemapDefinition);return i?i.getAvailability(t,r):"unknown"}getAvailabilityUpsample(e,t,r,i){i.level=e,i.row=t,i.col=r;var n=this.layer.tileInfo;for(n.updateTileInfo(i);;){var a=this.getAvailability(i.level,i.row,i.col);if("unavailable"!==a)return a;if(!n.upsampleTile(i))return"unavailable"}}fetchAvailability(e,t,r,i){return this._availableLevels[e]?this.fetchTilemap(e,t,r,i).catch((e=>e)).then((i=>{if(i instanceof j){var n=i.getAvailability(t,r);return"unavailable"===n?Promise.reject(new u.a("tile-map:tile-unavailable","Tile is not available",{level:e,row:t,col:r})):n}if(Object(d.m)(i))throw i;return"unknown"})):Promise.reject(new u.a("tilemap-cache:level-unavailable","Level ".concat(e," is unavailable in the service")))}fetchAvailabilityUpsample(e,t,r,i,n){i.level=e,i.row=t,i.col=r;var a=this.layer.tileInfo;a.updateTileInfo(i);var s=this.fetchAvailability(e,t,r,n).catch((e=>{if(Object(d.m)(e))throw e;if(a.upsampleTile(i))return this.fetchAvailabilityUpsample(i.level,i.row,i.col,i);throw e}));return this._fetchAvailabilityUpsamplePrefetch(i.id,e,t,r,n,s),s}_fetchAvailabilityUpsamplePrefetch(e,t,r,a,s,l){var o=this;return Object(i.a)((function*(){if(o._prefetchingEnabled){var i="prefetch-".concat(e);if(!o._handles.has(i)){var c=Object(d.d)();l.then((()=>c.abort()),(()=>c.abort()));var u=!1,h={remove(){u||(u=!0,c.abort())}};if(o._handles.add(h,i),yield Object(p.c)(10,c.signal).catch((()=>{})),u||(u=!0,o._handles.remove(i)),!Object(d.n)(c))for(var f={id:e,level:t,row:r,col:a},m=Object(n.a)(Object(n.a)({},s),{},{signal:c.signal}),v=o.layer.tileInfo,b=function(e){var t=o.fetchAvailability(f.level,f.row,f.col,m);S._prefetches.push(t);var r=()=>{S._prefetches.removeUnordered(t)};t.then(r,r)},g=0;S._prefetches.length<S._maxPrefetch&&v.upsampleTile(f);++g)b()}}}))()}_initializeTilemapDefinition(){if(this.layer.parsedUrl){var e=this.layer.parsedUrl,t=e.query;this._tilemapCache.clear(),this._tmpTilemapDefinition={service:{url:e.path,query:t?Object(h.D)(t):null,tileServers:this.layer.tileServers,request:this.request,type:this.layer.type},width:this.size,height:this.size,level:0,row:0,col:0}}}_tilemapFromCache(e,t,r,i){i.level=e,i.row=t-t%this.size,i.col=r-r%this.size;var n=w(i);return this._tilemapCache.get(n)}_initializeAvailableLevels(e){this._availableLevels={},e&&e.forEach((e=>this._availableLevels[e.level]=!0))}get test(){var e=this;return{get prefetchingEnabled(){return e._prefetchingEnabled},set prefetchingEnabled(t){e._prefetchingEnabled=t},hasTilemap:(t,r,i)=>!!e._tilemapFromCache(t,r,i,e._tmpTilemapDefinition)}}};T._maxPrefetch=4,T._prefetches=new f.a({initialSize:S._maxPrefetch}),Object(a.a)([Object(l.b)({constructOnly:!0,type:Number})],T.prototype,"levels",void 0),Object(a.a)([Object(o.a)("levels")],T.prototype,"castLevels",null),Object(a.a)([Object(l.b)({readOnly:!0,type:Number})],T.prototype,"size",null),Object(a.a)([Object(l.b)({constructOnly:!0,type:Number})],T.prototype,"cacheByteSize",void 0),Object(a.a)([Object(l.b)({constructOnly:!0})],T.prototype,"layer",void 0),Object(a.a)([Object(l.b)({constructOnly:!0})],T.prototype,"request",void 0),T=S=Object(a.a)([Object(c.a)("esri.layers.support.TilemapCache")],T)},682:function(e,t,r){"use strict";r.d(t,"a",(function(){return s})),r.d(t,"b",(function(){return a}));var i=r(91),n=r(336),a={type:n.a,json:{origins:{service:{read:{source:["tileInfo","minScale","maxScale","minLOD","maxLOD"],reader:s}}}}};function s(e,t,r,a){if(!e)return null;var{minScale:s,maxScale:l,minLOD:o,maxLOD:c}=t;if(null!=o&&null!=c)return a&&a.ignoreMinMaxLOD?n.a.fromJSON(e):n.a.fromJSON(Object(i.a)(Object(i.a)({},e),{},{lods:e.lods.filter((({level:e})=>null!=e&&e>=o&&e<=c))}));if(0!==s&&0!==l){var u=e=>Math.round(1e4*e)/1e4,h=s?u(s):1/0,f=l?u(l):-1/0;return n.a.fromJSON(Object(i.a)(Object(i.a)({},e),{},{lods:e.lods.filter((e=>{var t=u(e.scale);return t<=h&&t>=f}))}))}return n.a.fromJSON(e)}},713:function(e,t,r){"use strict";r.d(t,"a",(function(){return u}));var i=r(82),n=(r(80),r(81),r(88),r(85)),a=r(98),s=r(84),l=(r(83),r(86),r(87),r(99)),o=(r(101),r(682)),c=r(592),u=e=>{var t=class extends e{constructor(){super(...arguments),this.copyright=null,this.minScale=0,this.maxScale=0,this.spatialReference=null,this.tileInfo=null,this.tilemapCache=null}readMinScale(e,t){return null!=t.minLOD&&null!=t.maxLOD?e:0}readMaxScale(e,t){return null!=t.minLOD&&null!=t.maxLOD?e:0}get supportsBlankTile(){return this.version>=10.2}readTilemapCache(e,t){return t.capabilities&&t.capabilities.indexOf("Tilemap")>-1?new c.a({layer:this}):null}};return Object(i.a)([Object(n.b)({json:{read:{source:"copyrightText"}}})],t.prototype,"copyright",void 0),Object(i.a)([Object(n.b)()],t.prototype,"minScale",void 0),Object(i.a)([Object(a.a)("service","minScale")],t.prototype,"readMinScale",null),Object(i.a)([Object(n.b)()],t.prototype,"maxScale",void 0),Object(i.a)([Object(a.a)("service","maxScale")],t.prototype,"readMaxScale",null),Object(i.a)([Object(n.b)({type:l.a})],t.prototype,"spatialReference",void 0),Object(i.a)([Object(n.b)({readOnly:!0})],t.prototype,"supportsBlankTile",null),Object(i.a)([Object(n.b)(o.b)],t.prototype,"tileInfo",void 0),Object(i.a)([Object(n.b)()],t.prototype,"tilemapCache",void 0),Object(i.a)([Object(a.a)("service","tilemapCache",["capabilities"])],t.prototype,"readTilemapCache",null),Object(i.a)([Object(n.b)()],t.prototype,"version",void 0),t=Object(i.a)([Object(s.a)("esri.layers.mixins.ArcGISCachedService")],t)}}}]);
//# sourceMappingURL=24.6ced5ea7.chunk.js.map