(this.webpackJsonpimaps=this.webpackJsonpimaps||[]).push([[22],{1050:function(t,e,r){"use strict";r.d(e,"a",(function(){return i})),r.d(e,"b",(function(){return s})),r.d(e,"c",(function(){return o}));var n=r(1107);function o(t,e,r){if(t.count!==e.count)return void n.a.error("source and destination buffers need to have the same number of elements");const o=t.count,s=r[0],i=r[1],a=r[2],c=r[3],u=r[4],f=r[5],d=r[6],l=r[7],p=r[8],h=t.typedBuffer,b=t.typedBufferStride,m=e.typedBuffer,y=e.typedBufferStride;for(let n=0;n<o;n++){const t=n*b,e=n*y,r=m[e],o=m[e+1],O=m[e+2],w=m[e+3];h[t]=s*r+c*o+d*O,h[t+1]=i*r+u*o+l*O,h[t+2]=a*r+f*o+p*O,h[t+3]=w}}function s(t,e,r){const n=Math.min(t.count,e.count),o=t.typedBuffer,s=t.typedBufferStride,i=e.typedBuffer,a=e.typedBufferStride;for(let c=0;c<n;c++){const t=c*s,e=c*a;o[t]=r*i[e],o[t+1]=r*i[e+1],o[t+2]=r*i[e+2],o[t+3]=r*i[e+3]}}function i(t,e,r){const n=Math.min(t.count,e.count),o=t.typedBuffer,s=t.typedBufferStride,i=e.typedBuffer,a=e.typedBufferStride;for(let c=0;c<n;c++){const t=c*s,e=c*a;o[t]=i[e]>>r,o[t+1]=i[e+1]>>r,o[t+2]=i[e+2]>>r,o[t+3]=i[e+3]>>r}}Object.freeze({__proto__:null,transformMat4:function(t,e,r){if(t.count!==e.count)return void n.a.error("source and destination buffers need to have the same number of elements");const o=t.count,s=r[0],i=r[1],a=r[2],c=r[3],u=r[4],f=r[5],d=r[6],l=r[7],p=r[8],h=r[9],b=r[10],m=r[11],y=r[12],O=r[13],w=r[14],g=r[15],x=t.typedBuffer,j=t.typedBufferStride,T=e.typedBuffer,v=e.typedBufferStride;for(let n=0;n<o;n++){const t=n*j,e=n*v,r=T[e],o=T[e+1],S=T[e+2],I=T[e+3];x[t]=s*r+u*o+p*S+y*I,x[t+1]=i*r+f*o+h*S+O*I,x[t+2]=a*r+d*o+b*S+w*I,x[t+3]=c*r+l*o+m*S+g*I}},transformMat3:o,scale:s,shiftRight:i})},1051:function(t,e,r){"use strict";function n(t,e){const r=t.count;e||(e=new t.TypedArrayConstructor(r));for(let n=0;n<r;n++)e[n]=t.get(n);return e}r.d(e,"a",(function(){return n}));Object.freeze({__proto__:null,copy:function(t,e,r){const n=t.typedBuffer,o=t.typedBufferStride,s=e.typedBuffer,i=e.typedBufferStride,a=r?r.count:e.count;let c=(r&&r.dstIndex?r.dstIndex:0)*o,u=(r&&r.srcIndex?r.srcIndex:0)*i;for(let f=0;f<a;++f)n[c]=s[u],c+=o,u+=i},makeDense:n})},1052:function(t,e,r){"use strict";r.d(e,"a",(function(){return u}));var n=r(100),o=r(156),s=r(88),i=r(85),a=r(89),c=r(96);class u{constructor(t){this.streamDataRequester=t}async loadJSON(t,e){return this.load("json",t,e)}async loadBinary(t,e){return Object(c.u)(t)?(Object(a.v)(e),Object(c.j)(t)):this.load("binary",t,e)}async loadImage(t,e){return this.load("image",t,e)}async load(t,e,r){if(Object(i.j)(this.streamDataRequester))return(await Object(n.default)(e,{responseType:f[t]})).data;const c=await Object(o.c)(this.streamDataRequester.request(e,t,r));if(!0===c.ok)return c.value;throw Object(a.u)(c.error),new s.a("",`Request for resource failed: ${c.error}`)}}const f={image:"image",binary:"array-buffer",json:"json"}},1053:function(t,e,r){"use strict";r.d(e,"a",(function(){return a})),r.d(e,"b",(function(){return i})),r.d(e,"c",(function(){return s}));var n=r(321),o=r(445);function s(t,e=o.d){return"number"==typeof t?e(t):Object(n.i)(t)||Object(n.k)(t)?new Uint32Array(t):t}function i(t){const e="number"==typeof t?t:t.length;if(e<3)return new Uint16Array(0);const r=e-2,n=r<=65536?new Uint16Array(3*r):new Uint32Array(3*r);if("number"==typeof t){let t=0;for(let e=0;e<r;e+=1)e%2==0?(n[t++]=e,n[t++]=e+1,n[t++]=e+2):(n[t++]=e+1,n[t++]=e,n[t++]=e+2)}else{let e=0;for(let o=0;o<r;o+=1)if(o%2==0){const r=t[o],s=t[o+1],i=t[o+2];n[e++]=r,n[e++]=s,n[e++]=i}else{const r=t[o+1],s=t[o],i=t[o+2];n[e++]=r,n[e++]=s,n[e++]=i}}return n}function a(t){const e="number"==typeof t?t:t.length;if(e<3)return new Uint16Array(0);const r=e-2,n=r<=65536?new Uint16Array(3*r):new Uint32Array(3*r);if("number"==typeof t){let t=0;for(let e=0;e<r;++e)n[t++]=0,n[t++]=e+1,n[t++]=e+2;return n}{const e=t[0];let o=t[1],s=0;for(let i=0;i<r;++i){const r=t[i+2];n[s++]=e,n[s++]=o,n[s++]=r,o=r}return n}}},1054:function(t,e,r){"use strict";r.d(e,"a",(function(){return n}));const n=2.1},1072:function(t,e,r){"use strict";r.d(e,"a",(function(){return R}));var n=r(85),o=r(168),s=r(88);const i=r(80).a.getLogger("esri.views.3d.glTF");var a=r(197),c=r(414),u=r(96),f=r(616),d=r(135),l=r(485),p=r(384),h=r(342),b=r(1051);class m{constructor(t){this.data=t,this.offset4=0,this.dataUint32=new Uint32Array(this.data,0,Math.floor(this.data.byteLength/4))}readUint32(){const t=this.offset4;return this.offset4+=1,this.dataUint32[t]}readUint8Array(t){const e=4*this.offset4;return this.offset4+=t/4,new Uint8Array(this.data,e,t)}remainingBytes(){return this.data.byteLength-4*this.offset4}}const y={baseColorFactor:[1,1,1,1],metallicFactor:1,roughnessFactor:1},O={pbrMetallicRoughness:y,emissiveFactor:[0,0,0],alphaMode:"OPAQUE",alphaCutoff:.5,doubleSided:!1},w={ESRI_externalColorMixMode:"tint"},g=(t={})=>{const e={...y,...t.pbrMetallicRoughness},r=function(t){switch(t.ESRI_externalColorMixMode){case"multiply":case"tint":case"ignore":case"replace":break;default:Object(a.a)(t.ESRI_externalColorMixMode),t.ESRI_externalColorMixMode="tint"}return t}({...w,...t.extras});return{...O,...t,pbrMetallicRoughness:e,extras:r}};const x={magFilter:9729,minFilter:9987,wrapS:10497,wrapT:10497};const j=1179937895,T=1313821514,v=5130562;class S{constructor(t,e,r,n,o){this.context=t,this.errorContext=e,this.uri=r,this.json=n,this.glbBuffer=o,this.bufferLoaders=new Map,this.textureLoaders=new Map,this.textureCache=new Map,this.materialCache=new Map,this.nodeParentMap=new Map,this.nodeTransformCache=new Map,this.baseUri=function(t){let e,r;return t.replace(/^(.*\/)?([^/]*)$/,((t,n,o)=>(e=n||"",r=o||"",""))),{dirPart:e,filePart:r}}(this.uri).dirPart,this.checkVersionSupported(),this.checkRequiredExtensionsSupported(),e.errorUnsupportedIf(null==n.scenes,"Scenes must be defined."),e.errorUnsupportedIf(null==n.meshes,"Meshes must be defined"),e.errorUnsupportedIf(null==n.nodes,"Nodes must be defined."),this.computeNodeParents()}static async load(t,e,r,n){if(Object(u.u)(r)){const n=Object(u.i)(r);if("model/gltf-binary"!==n.mediaType)try{const o=JSON.parse(n.isBase64?atob(n.data):n.data);return new S(t,e,r,o)}catch{}const o=Object(u.j)(r);if(S.isGLBData(o))return this.fromGLBData(t,e,r,o)}if(r.endsWith(".gltf")){const o=await t.loadJSON(r,n);return new S(t,e,r,o)}const o=await t.loadBinary(r,n);if(S.isGLBData(o))return this.fromGLBData(t,e,r,o);const s=await t.loadJSON(r,n);return new S(t,e,r,s)}static isGLBData(t){const e=new m(t);return e.remainingBytes()>=4&&e.readUint32()===j}static async fromGLBData(t,e,r,n){const o=await S.parseGLBData(e,n);return new S(t,e,r,o.json,o.binaryData)}static async parseGLBData(t,e){const r=new m(e);t.assert(r.remainingBytes()>=12,"GLB binary data is insufficiently large.");const n=r.readUint32(),o=r.readUint32(),s=r.readUint32();t.assert(n===j,"Magic first 4 bytes do not fit to expected GLB value."),t.assert(e.byteLength>=s,"GLB binary data is smaller than header specifies."),t.errorUnsupportedIf(2!==o,"An unsupported GLB container version was detected. Only version 2 is supported.");let i,a,c=0;for(;r.remainingBytes()>=8;){const e=r.readUint32(),n=r.readUint32();0===c?(t.assert(n===T,"First GLB chunk must be JSON."),t.assert(e>=0,"No JSON data found."),i=await M(r.readUint8Array(e))):1===c?(t.errorUnsupportedIf(n!==v,"Second GLB chunk expected to be BIN."),a=r.readUint8Array(e)):t.warnUnsupported("More than 2 GLB chunks detected. Skipping."),c+=1}return i||t.error("No GLB JSON chunk detected."),{json:i,binaryData:a}}async getBuffer(t,e){const r=this.json.buffers[t],n=this.errorContext;if(null==r.uri)return n.assert(null!=this.glbBuffer,"GLB buffer not present"),this.glbBuffer;const o=await this.getBufferLoader(t,e);return n.assert(o.byteLength===r.byteLength,"Buffer byte lengths should match."),o}async getBufferLoader(t,e){const r=this.bufferLoaders.get(t);if(r)return r;const n=this.json.buffers[t],o=this.context.loadBinary(this.resolveUri(n.uri),e).then((t=>new Uint8Array(t)));return this.bufferLoaders.set(t,o),o}async getAccessor(t,e){const r=this.errorContext;r.errorUnsupportedIf(!this.json.accessors,"Accessors missing.");const n=this.json.accessors[t];r.errorUnsupportedIf(null==(null==n?void 0:n.bufferView),"Some accessor does not specify a bufferView."),r.errorUnsupportedIf(n.type in["MAT2","MAT3","MAT4"],`AttributeType ${n.type} is not supported`);const o=this.json.bufferViews[n.bufferView],s=await this.getBuffer(o.buffer,e),i=U[n.type],a=A[n.componentType],c=i*a,u=o.byteStride||c;return{raw:s.buffer,byteStride:u,byteOffset:s.byteOffset+(o.byteOffset||0)+(n.byteOffset||0),entryCount:n.count,isDenselyPacked:u===c,componentCount:i,componentByteSize:a,componentType:n.componentType,min:n.min,max:n.max,normalized:!!n.normalized}}async getIndexData(t,e){if(null==t.indices)return null;const r=await this.getAccessor(t.indices,e);if(r.isDenselyPacked)switch(r.componentType){case 5121:return new Uint8Array(r.raw,r.byteOffset,r.entryCount);case 5123:return new Uint16Array(r.raw,r.byteOffset,r.entryCount);case 5125:return new Uint32Array(r.raw,r.byteOffset,r.entryCount)}else switch(r.componentType){case 5121:return Object(b.a)(this.wrapAccessor(h.l,r));case 5123:return Object(b.a)(this.wrapAccessor(h.j,r));case 5125:return Object(b.a)(this.wrapAccessor(h.k,r))}}async getPositionData(t,e){const r=this.errorContext;r.errorUnsupportedIf(null==t.attributes.POSITION,"No POSITION vertex data found.");const n=await this.getAccessor(t.attributes.POSITION,e);return r.errorUnsupportedIf(5126!==n.componentType,"Expected type FLOAT for POSITION vertex attribute, but found "+_[n.componentType]),r.errorUnsupportedIf(3!==n.componentCount,"POSITION vertex attribute must have 3 components, but found "+n.componentCount.toFixed()),this.wrapAccessor(h.u,n)}async getNormalData(t,e){const r=this.errorContext;r.assert(null!=t.attributes.NORMAL,"No NORMAL vertex data found.");const n=await this.getAccessor(t.attributes.NORMAL,e);return r.errorUnsupportedIf(5126!==n.componentType,"Expected type FLOAT for NORMAL vertex attribute, but found "+_[n.componentType]),r.errorUnsupportedIf(3!==n.componentCount,"NORMAL vertex attribute must have 3 components, but found "+n.componentCount.toFixed()),this.wrapAccessor(h.u,n)}async getTangentData(t,e){const r=this.errorContext;r.assert(null!=t.attributes.TANGENT,"No TANGENT vertex data found.");const n=await this.getAccessor(t.attributes.TANGENT,e);return r.errorUnsupportedIf(5126!==n.componentType,"Expected type FLOAT for TANGENT vertex attribute, but found "+_[n.componentType]),r.errorUnsupportedIf(4!==n.componentCount,"TANGENT vertex attribute must have 4 components, but found "+n.componentCount.toFixed()),new h.C(n.raw,n.byteOffset,n.byteStride,n.byteOffset+n.byteStride*n.entryCount)}async getTextureCoordinates(t,e){const r=this.errorContext;r.assert(null!=t.attributes.TEXCOORD_0,"No TEXCOORD_0 vertex data found.");const n=await this.getAccessor(t.attributes.TEXCOORD_0,e);return r.errorUnsupportedIf(2!==n.componentCount,"TEXCOORD_0 vertex attribute must have 2 components, but found "+n.componentCount.toFixed()),5126===n.componentType?this.wrapAccessor(h.m,n):(r.errorUnsupportedIf(!n.normalized,"Integer component types are only supported for a normalized accessor for TEXCOORD_0."),function(t){switch(t.componentType){case 5120:return new h.q(t.raw,t.byteOffset,t.byteStride,t.byteOffset+t.byteStride*t.entryCount);case 5121:return new h.t(t.raw,t.byteOffset,t.byteStride,t.byteOffset+t.byteStride*t.entryCount);case 5122:return new h.o(t.raw,t.byteOffset,t.byteStride,t.byteOffset+t.byteStride*t.entryCount);case 5123:return new h.r(t.raw,t.byteOffset,t.byteStride,t.byteOffset+t.byteStride*t.entryCount);case 5125:return new h.s(t.raw,t.byteOffset,t.byteStride,t.byteOffset+t.byteStride*t.entryCount);case 5126:return new h.m(t.raw,t.byteOffset,t.byteStride,t.byteOffset+t.byteStride*t.entryCount);default:return void Object(a.a)(t.componentType)}}(n))}async getVertexColors(t,e){const r=this.errorContext;r.assert(null!=t.attributes.COLOR_0,"No COLOR_0 vertex data found.");const n=await this.getAccessor(t.attributes.COLOR_0,e);if(r.errorUnsupportedIf(4!==n.componentCount&&3!==n.componentCount,"COLOR_0 attribute must have 3 or 4 components, but found "+n.componentCount.toFixed()),4===n.componentCount){if(5126===n.componentType)return this.wrapAccessor(h.C,n);if(5121===n.componentType)return this.wrapAccessor(h.J,n);if(5123===n.componentType)return this.wrapAccessor(h.H,n)}else if(3===n.componentCount){if(5126===n.componentType)return this.wrapAccessor(h.u,n);if(5121===n.componentType)return this.wrapAccessor(h.B,n);if(5123===n.componentType)return this.wrapAccessor(h.z,n)}r.errorUnsupported("Unsupported component type for COLOR_0 attribute: "+_[n.componentType])}hasPositions(t){return void 0!==t.attributes.POSITION}hasNormals(t){return void 0!==t.attributes.NORMAL}hasVertexColors(t){return void 0!==t.attributes.COLOR_0}hasTextureCoordinates(t){return void 0!==t.attributes.TEXCOORD_0}hasTangents(t){return void 0!==t.attributes.TANGENT}async getMaterial(t,e,r){let n=this.materialCache.get(t.material);if(!n){const o=null!=t.material?g(this.json.materials[t.material]):g(),s=o.pbrMetallicRoughness,i=this.hasVertexColors(t),a=this.getTexture(s.baseColorTexture,e),c=this.getTexture(o.normalTexture,e),u=r?this.getTexture(o.occlusionTexture,e):null,f=r?this.getTexture(o.emissiveTexture,e):null,d=r?this.getTexture(s.metallicRoughnessTexture,e):null,l=null!=t.material?t.material:-1;n={alphaMode:o.alphaMode,alphaCutoff:o.alphaCutoff,color:s.baseColorFactor,doubleSided:!!o.doubleSided,colorTexture:await a,normalTexture:await c,name:o.name,id:l,occlusionTexture:await u,emissiveTexture:await f,emissiveFactor:o.emissiveFactor,metallicFactor:s.metallicFactor,roughnessFactor:s.roughnessFactor,metallicRoughnessTexture:await d,vertexColors:i,ESRI_externalColorMixMode:o.extras.ESRI_externalColorMixMode}}return n}async getTexture(t,e){if(!t)return null;this.errorContext.errorUnsupportedIf(0!==(t.texCoord||0),"Only TEXCOORD with index 0 is supported.");const r=t.index,n=this.errorContext,o=this.json.textures[r],s=(t=>({...x,...t}))(null!=o.sampler?this.json.samplers[o.sampler]:{});n.errorUnsupportedIf(null==o.source,"Source is expected to be defined for a texture.");const i=this.json.images[o.source],a=await this.loadTextureImageData(r,o,e);return Object(c.b)(this.textureCache,r,(()=>{const t=t=>33071===t||33648===t||10497===t,e=t=>(n.error(`Unexpected TextureSampler WrapMode: ${t}. Using default REPEAT(10497).`),10497);return{data:a,wrapS:t(s.wrapS)?s.wrapS:e(s.wrapS),wrapT:t(s.wrapT)?s.wrapT:e(s.wrapT),minFilter:s.minFilter,name:i.name,id:r}}))}getNodeTransform(t){if(void 0===t)return B;let e=this.nodeTransformCache.get(t);if(!e){const r=this.getNodeTransform(this.getNodeParent(t)),n=this.json.nodes[t];n.matrix?e=Object(d.n)(Object(o.d)(),r,n.matrix):n.translation||n.rotation||n.scale?(e=Object(o.c)(r),n.translation&&Object(d.t)(e,e,n.translation),n.rotation&&(C[3]=Object(l.b)(C,n.rotation),Object(d.e)(e,e,C[3],C)),n.scale&&Object(d.g)(e,e,n.scale)):e=r,this.nodeTransformCache.set(t,e)}return e}wrapAccessor(t,e){return new t(e.raw,e.byteOffset,e.byteStride,e.byteOffset+e.byteStride*(e.entryCount-1)+e.componentByteSize*e.componentCount)}resolveUri(t){return Object(u.A)(t,this.baseUri)}getNodeParent(t){return this.nodeParentMap.get(t)}checkVersionSupported(){const t=f.a.parse(this.json.asset.version,"glTF");I.validate(t)}checkRequiredExtensionsSupported(){const t=this.json,e=this.errorContext;t.extensionsRequired&&0!==t.extensionsRequired.length&&e.errorUnsupported("gltf loader was not able to load unsupported feature. Required extensions: "+t.extensionsRequired.join(", "))}computeNodeParents(){this.json.nodes.forEach(((t,e)=>{t.children&&t.children.forEach((t=>{this.nodeParentMap.set(t,e)}))}))}async loadTextureImageData(t,e,r){const n=this.textureLoaders.get(t);if(n)return n;const o=this.createTextureLoader(e,r);return this.textureLoaders.set(t,o),o}async createTextureLoader(t,e){const r=this.json.images[t.source];if(r.uri)return this.context.loadImage(this.resolveUri(r.uri),e);const n=this.errorContext;n.errorUnsupportedIf(null==r.bufferView,"Image bufferView must be defined."),n.errorUnsupportedIf(null==r.mimeType,"Image mimeType must be defined.");const o=this.json.bufferViews[r.bufferView],s=await this.getBuffer(o.buffer,e);return n.errorUnsupportedIf(null!=o.byteStride,"byteStride not supported for image buffer"),async function(t,e){return new Promise(((r,n)=>{const o=new Blob([t],{type:e}),s=URL.createObjectURL(o),i=new Image;i.addEventListener("load",(()=>{URL.revokeObjectURL(s),"decode"in i?i.decode().then((()=>r(i)),(()=>r(i))):r(i)})),i.addEventListener("error",(t=>{URL.revokeObjectURL(s),n(t)})),i.src=s}))}(new Uint8Array(s.buffer,s.byteOffset+(o.byteOffset||0),o.byteLength),r.mimeType)}}const I=new f.a(2,0,"glTF"),B=Object(d.o)(Object(o.d)(),Math.PI/2),C=Object(p.b)(),U={SCALAR:1,VEC2:2,VEC3:3,VEC4:4},A={5120:1,5121:1,5122:2,5123:2,5126:4,5125:4};async function M(t){return new Promise(((e,r)=>{const n=new Blob([t]),o=new FileReader;o.onload=()=>{const t=o.result;e(JSON.parse(t))},o.onerror=t=>{r(t)},o.readAsText(n)}))}const _={5120:"BYTE",5121:"UNSIGNED_BYTE",5122:"SHORT",5123:"UNSIGNED_SHORT",5125:"UNSIGNED_INT",5126:"FLOAT"};let N=0;async function R(t,e,r={},s=!0){const i=await S.load(t,F,e,r),a="gltf_"+N++,c={lods:[],materials:new Map,textures:new Map,meta:L(i)},u=!(!i.json.asset.extras||"symbolResource"!==i.json.asset.extras.ESRI_type),f=new Map;await async function(t,e){const r=t.json,n=r.scenes[r.scene||0].nodes,o=n.length>1,s=[];for(const a of n){const t=r.nodes[a];s.push(i(a,0)),E(t)&&!o&&t.extensions.MSFT_lod.ids.forEach(((t,e)=>i(t,e+1)))}async function i(n,o){const a=r.nodes[n],c=t.getNodeTransform(n);if(F.warnUnsupportedIf(null!=a.weights,"Morph targets are not supported."),null!=a.mesh){const t=r.meshes[a.mesh];for(const r of t.primitives)s.push(e(r,c,o,t.name))}for(const t of a.children||[])s.push(i(t,o))}await Promise.all(s)}(i,(async(t,e,u,d)=>{var l;const p=null!=(l=f.get(u))?l:0;f.set(u,p+1);const h=void 0!==t.mode?t.mode:4,b=4===h||5===h||6===h?h:null;if(Object(n.j)(b))return void F.warnUnsupported("Unsupported primitive mode ("+D[h]+"). Skipping primitive.");if(!i.hasPositions(t))return void F.warn("Skipping primitive without POSITION vertex attribute.");const m=i.getPositionData(t,r),y=i.getMaterial(t,r,s),O=i.hasNormals(t)?i.getNormalData(t,r):null,w=i.hasTangents(t)?i.getTangentData(t,r):null,g=i.hasTextureCoordinates(t)?i.getTextureCoordinates(t,r):null,x=i.hasVertexColors(t)?i.getVertexColors(t,r):null,j=i.getIndexData(t,r),T={transform:Object(o.c)(e),attributes:{position:await m,normal:O?await O:null,texCoord0:g?await g:null,color:x?await x:null,tangent:w?await w:null},indices:await j,primitiveType:b,material:P(c,await y,a)};let v=null;Object(n.k)(c.meta)&&Object(n.k)(c.meta.ESRI_lod)&&"screenSpaceRadius"===c.meta.ESRI_lod.metric&&(v=c.meta.ESRI_lod.thresholds[u]),c.lods[u]=c.lods[u]||{parts:[],name:d,lodThreshold:v},c.lods[u].parts[p]=T}));for(const n of c.lods)n.parts=n.parts.filter((t=>!!t));return{model:c,meta:{isEsriSymbolResource:u,uri:i.uri},customMeta:{}}}function L(t){const e=t.json;let r=null;return e.nodes.forEach((t=>{const e=t.extras;Object(n.k)(e)&&(e.ESRI_proxyEllipsoid||e.ESRI_lod)&&(r=e)})),r}function E(t){return t.extensions&&t.extensions.MSFT_lod&&Array.isArray(t.extensions.MSFT_lod.ids)}function P(t,e,r){const n=e=>{const n=`${r}_tex_${e&&e.id}${e&&e.name?"_"+e.name:""}`;if(e&&!t.textures.has(n)){const r=function(t,e={}){return{data:t,parameters:{wrap:{s:10497,t:10497,...e.wrap},noUnpackFlip:!0,mipmap:!1,...e}}}(e.data,{wrap:{s:e.wrapS,t:e.wrapT},mipmap:k.some((t=>t===e.minFilter)),noUnpackFlip:!0});t.textures.set(n,r)}return n},o=`${r}_mat_${e.id}_${e.name}`;if(!t.materials.has(o)){const r=function(t={}){return{color:[1,1,1],opacity:1,alphaMode:"OPAQUE",alphaCutoff:.5,doubleSided:!1,castShadows:!0,receiveShadows:!0,receiveAmbientOcclustion:!0,textureColor:null,textureNormal:null,textureOcclusion:null,textureEmissive:null,textureMetallicRoughness:null,emissiveFactor:[0,0,0],metallicFactor:1,roughnessFactor:1,colorMixMode:"multiply",...t}}({color:[e.color[0],e.color[1],e.color[2]],opacity:e.color[3],alphaMode:e.alphaMode,alphaCutoff:e.alphaCutoff,doubleSided:e.doubleSided,colorMixMode:e.ESRI_externalColorMixMode,textureColor:e.colorTexture?n(e.colorTexture):void 0,textureNormal:e.normalTexture?n(e.normalTexture):void 0,textureOcclusion:e.occlusionTexture?n(e.occlusionTexture):void 0,textureEmissive:e.emissiveTexture?n(e.emissiveTexture):void 0,textureMetallicRoughness:e.metallicRoughnessTexture?n(e.metallicRoughnessTexture):void 0,emissiveFactor:[e.emissiveFactor[0],e.emissiveFactor[1],e.emissiveFactor[2]],metallicFactor:e.metallicFactor,roughnessFactor:e.roughnessFactor});t.materials.set(o,r)}return o}const F=new class{error(t){throw new s.a("gltf-loader-error",t)}errorUnsupported(t){throw new s.a("gltf-loader-unsupported-feature",t)}errorUnsupportedIf(t,e){t&&this.errorUnsupported(e)}assert(t,e){t||this.error(e)}warn(t){i.warn(t)}warnUnsupported(t){this.warn("[Unsupported Feature] "+t)}warnUnsupportedIf(t,e){t&&this.warnUnsupported(e)}},k=[9987,9985],D=["POINTS","LINES","LINE_LOOP","LINE_STRIP","TRIANGLES","TRIANGLE_STRIP","TRIANGLE_FAN"]},1079:function(t,e,r){"use strict";r.d(e,"a",(function(){return o}));var n=r(634);Object.freeze({__proto__:null,copy:function(t,e,r){const n=t.typedBuffer,o=t.typedBufferStride,s=e.typedBuffer,i=e.typedBufferStride,a=r?r.count:e.count;let c=(r&&r.dstIndex?r.dstIndex:0)*o,u=(r&&r.srcIndex?r.srcIndex:0)*i;for(let f=0;f<a;++f){for(let t=0;t<9;++t)n[c+t]=s[u+t];c+=o,u+=i}}});Object.freeze({__proto__:null,copy:function(t,e,r){const n=t.typedBuffer,o=t.typedBufferStride,s=e.typedBuffer,i=e.typedBufferStride,a=r?r.count:e.count;let c=(r&&r.dstIndex?r.dstIndex:0)*o,u=(r&&r.srcIndex?r.srcIndex:0)*i;for(let f=0;f<a;++f){for(let t=0;t<16;++t)n[c+t]=s[u+t];c+=o,u+=i}}}),r(1051),r(908),r(793),r(909);function o(t,e){return new t(new ArrayBuffer(e*t.ElementCount*Object(n.a)(t.ElementType)))}},221:function(t,e,r){"use strict";function n(){return[0,0,0,0]}function o(t){return[t[0],t[1],t[2],t[3]]}function s(t,e,r,n){return[t,e,r,n]}function i(t){const e=[0,0,0,0],r=Math.min(4,t.length);for(let n=0;n<r;++n)e[n]=t[n];return e}function a(t,e){return new Float64Array(t,e,4)}function c(){return[0,0,0,0]}function u(){return s(1,1,1,1)}function f(){return s(1,0,0,0)}function d(){return s(0,1,0,0)}function l(){return s(0,0,1,0)}function p(){return s(0,0,0,1)}r.d(e,"a",(function(){return b})),r.d(e,"b",(function(){return h})),r.d(e,"c",(function(){return a})),r.d(e,"d",(function(){return i})),r.d(e,"e",(function(){return n})),r.d(e,"f",(function(){return o})),r.d(e,"g",(function(){return s}));const h=[0,0,0,0],b=u(),m=f(),y=d(),O=l(),w=p();Object.freeze({__proto__:null,create:n,clone:o,fromValues:s,fromArray:i,createView:a,zeros:c,ones:u,unitX:f,unitY:d,unitZ:l,unitW:p,ZEROS:h,ONES:b,UNIT_X:m,UNIT_Y:y,UNIT_Z:O,UNIT_W:w})},261:function(t,e,r){"use strict";r.d(e,"a",(function(){return m})),r.d(e,"b",(function(){return y})),r.d(e,"c",(function(){return p})),r.d(e,"d",(function(){return h})),r.d(e,"e",(function(){return b}));var n=r(85),o=r(369),s=r(304),i=r(168),a=r(384),c=r(215),u=r(101),f=r(221);class d{constructor(t,e,r){this.itemByteSize=t,this.itemCreate=e,this.buffers=[],this.items=[],this.itemsPerBuffer=0,this.itemsPtr=0,this.itemsPerBuffer=Math.ceil(r/this.itemByteSize),this.tickHandle=o.a.before((()=>this.reset()))}destroy(){this.tickHandle&&(this.tickHandle.remove(),this.tickHandle=Object(n.p)(this.tickHandle)),this.itemsPtr=0,this.items=Object(n.p)(this.items),this.buffers=Object(n.p)(this.buffers)}get(){0===this.itemsPtr&&Object(o.a)((()=>{}));const t=Math.floor(this.itemsPtr/this.itemsPerBuffer);for(;this.buffers.length<=t;){const t=new ArrayBuffer(this.itemsPerBuffer*this.itemByteSize);for(let e=0;e<this.itemsPerBuffer;++e)this.items.push(this.itemCreate(t,e*this.itemByteSize));this.buffers.push(t)}return this.items[this.itemsPtr++]}reset(){const t=2*(Math.floor(this.itemsPtr/this.itemsPerBuffer)+1);for(;this.buffers.length>t;)this.buffers.pop(),this.items.length=this.buffers.length*this.itemsPerBuffer;this.itemsPtr=0}static createVec2f64(t=l){return new d(16,c.c,t)}static createVec3f64(t=l){return new d(24,u.d,t)}static createVec4f64(t=l){return new d(32,f.c,t)}static createMat3f64(t=l){return new d(72,s.a,t)}static createMat4f64(t=l){return new d(128,i.b,t)}static createQuatf64(t=l){return new d(32,a.d,t)}get test(){return{size:this.buffers.length*this.itemsPerBuffer*this.itemByteSize}}}const l=4096,p=d.createVec2f64(),h=d.createVec3f64(),b=d.createVec4f64(),m=(d.createMat3f64(),d.createMat4f64()),y=d.createQuatf64()},393:function(t,e,r){"use strict";r.d(e,"a",(function(){return s}));var n=r(85),o=r(369);class s{constructor(t){this.allocator=t,this.items=[],this.itemsPtr=0,this.tickHandle=o.a.before((()=>this.reset())),this.grow()}destroy(){this.tickHandle&&(this.tickHandle.remove(),this.tickHandle=Object(n.p)(this.tickHandle)),this.items=Object(n.p)(this.items)}get(){return 0===this.itemsPtr&&Object(o.a)((()=>{})),this.itemsPtr===this.items.length&&this.grow(),this.items[this.itemsPtr++]}reset(){const t=Math.min(3*Math.max(8,this.itemsPtr),this.itemsPtr+3*i);this.items.length=Math.min(t,this.items.length),this.itemsPtr=0}grow(){for(let t=0;t<Math.max(8,Math.min(this.items.length,i));t++)this.items.push(this.allocator())}}const i=1024},401:function(t,e,r){"use strict";r.d(e,"a",(function(){return m})),r.d(e,"b",(function(){return b})),r.d(e,"c",(function(){return u})),r.d(e,"d",(function(){return c})),r.d(e,"e",(function(){return l})),r.d(e,"f",(function(){return d})),r.d(e,"g",(function(){return f})),r.d(e,"h",(function(){return p})),r.d(e,"i",(function(){return h}));var n=r(107),o=r(393),s=r(111),i=r(101),a=r(261);function c(t){return t?{origin:Object(i.c)(t.origin),vector:Object(i.c)(t.vector)}:{origin:Object(i.e)(),vector:Object(i.e)()}}function u(t,e=c()){return f(t.origin,t.vector,e)}function f(t,e,r=c()){return Object(s.k)(r.origin,t),Object(s.k)(r.vector,e),r}function d(t,e,r=c()){return Object(s.k)(r.origin,t),Object(s.j)(r.vector,e,t),r}function l(t,e){const r=Object(s.j)(a.d.get(),e,t.origin),o=Object(s.h)(t.vector,r),i=Object(s.h)(t.vector,t.vector),c=Object(n.f)(o/i,0,1),u=Object(s.j)(a.d.get(),Object(s.e)(a.d.get(),t.vector,c),r);return Object(s.h)(u,u)}function p(t,e,r){return Object(s.f)(r,t.origin,Object(s.e)(r,t.vector,e))}function h(t,e,r,o,i){const{vector:c,origin:u}=t,f=Object(s.j)(a.d.get(),e,u),d=Object(s.h)(c,f)/Object(s.t)(c);return Object(s.e)(i,c,Object(n.f)(d,r,o)),Object(s.f)(i,i,t.origin)}function b(t,e){if(y(t,function(t,e){const r=w.get();return r.origin=t,r.vector=e,r}(e.origin,e.direction),!1,O)){const{tA:e,pB:r,distance2:n}=O;if(e>=0&&e<=1)return n;if(e<0)return Object(s.l)(t.origin,r);if(e>1)return Object(s.l)(Object(s.f)(a.d.get(),t.origin,t.vector),r)}return null}function m(t,e,r){return!!y(t,e,!0,O)&&(Object(s.k)(r,O.pA),!0)}function y(t,e,r,o){const i=1e-6,c=t.origin,u=Object(s.f)(a.d.get(),c,t.vector),f=e.origin,d=Object(s.f)(a.d.get(),f,e.vector),l=a.d.get(),p=a.d.get();if(l[0]=c[0]-f[0],l[1]=c[1]-f[1],l[2]=c[2]-f[2],p[0]=d[0]-f[0],p[1]=d[1]-f[1],p[2]=d[2]-f[2],Math.abs(p[0])<i&&Math.abs(p[1])<i&&Math.abs(p[2])<i)return!1;const h=a.d.get();if(h[0]=u[0]-c[0],h[1]=u[1]-c[1],h[2]=u[2]-c[2],Math.abs(h[0])<i&&Math.abs(h[1])<i&&Math.abs(h[2])<i)return!1;const b=l[0]*p[0]+l[1]*p[1]+l[2]*p[2],m=p[0]*h[0]+p[1]*h[1]+p[2]*h[2],y=l[0]*h[0]+l[1]*h[1]+l[2]*h[2],O=p[0]*p[0]+p[1]*p[1]+p[2]*p[2],w=(h[0]*h[0]+h[1]*h[1]+h[2]*h[2])*O-m*m;if(Math.abs(w)<i)return!1;let g=(b*m-y*O)/w,x=(b+m*g)/O;r&&(g=Object(n.f)(g,0,1),x=Object(n.f)(x,0,1));const j=a.d.get(),T=a.d.get();return j[0]=c[0]+g*h[0],j[1]=c[1]+g*h[1],j[2]=c[2]+g*h[2],T[0]=f[0]+x*p[0],T[1]=f[1]+x*p[1],T[2]=f[2]+x*p[2],o.tA=g,o.tB=x,o.pA=j,o.pB=T,o.distance2=Object(s.l)(j,T),!0}const O={tA:0,tB:0,pA:Object(i.e)(),pB:Object(i.e)(),distance2:0},w=new o.a((()=>({origin:null,vector:null})))},445:function(t,e,r){"use strict";r.d(e,"a",(function(){return m})),r.d(e,"b",(function(){return b})),r.d(e,"c",(function(){return h})),r.d(e,"d",(function(){return l})),r.d(e,"e",(function(){return p}));var n=r(111),o=r(101),s=r(393),i=(r(146),r(401));r(261);new s.a(i.d),new s.a((()=>({p0:null,p1:null,p2:null})));const a=Object(o.e)(),c=Object(o.e)();let u=(()=>{const t=new Uint32Array(131072);for(let e=0;e<t.length;++e)t[e]=e;return t})();const f=new Uint16Array([0]),d=(()=>{const t=new Uint16Array(65536);for(let e=0;e<t.length;++e)t[e]=e;return t})();function l(t){if(1===t)return f;if(t<d.length)return new Uint16Array(d.buffer,0,t);if(t>u.length){const e=Math.max(2*u.length,t);u=new Uint32Array(e);for(let t=0;t<u.length;t++)u[t]=t}return new Uint32Array(u.buffer,0,t)}function p(t){if(1===t)return new Uint16Array(f);if(t<d.length)return new Uint16Array(d.slice(0,t));if(t>u.length){const e=new Uint32Array(t);for(let t=0;t<e.length;t++)e[t]=t;return e}return new Uint32Array(u.slice(0,t))}function h(t,e,r){if(!t)return!1;const{size:o,data:s}=t;Object(n.w)(r,0,0,0),Object(n.w)(g,0,0,0);let i=0,u=0;for(let p=0;p<e.length-2;p+=3){const t=e[p+0]*o,h=e[p+1]*o,b=e[p+2]*o;Object(n.w)(y,s[t+0],s[t+1],s[t+2]),Object(n.w)(O,s[h+0],s[h+1],s[h+2]),Object(n.w)(w,s[b+0],s[b+1],s[b+2]);const m=(f=y,d=O,l=w,Object(n.j)(a,d,f),Object(n.j)(c,l,f),Object(n.p)(Object(n.g)(a,a,c))/2);m?(Object(n.f)(y,y,O),Object(n.f)(y,y,w),Object(n.e)(y,y,1/3*m),Object(n.f)(r,r,y),i+=m):(Object(n.f)(g,g,y),Object(n.f)(g,g,O),Object(n.f)(g,g,w),u+=3)}var f,d,l;return(0!==u||0!==i)&&(0!==i?(Object(n.e)(r,r,1/i),!0):0!==u&&(Object(n.e)(r,g,1/u),!0))}function b(t,e,r){if(!t||!e)return!1;const{size:o,data:s}=t;Object(n.w)(r,0,0,0);let i=-1,a=0;for(let n=0;n<e.length;n++){const t=e[n]*o;i!==t&&(r[0]+=s[t+0],r[1]+=s[t+1],r[2]+=s[t+2],a++),i=t}return a>1&&Object(n.e)(r,r,1/a),a>0}function m(t,e,r,o){if(!t)return!1;const{size:s,data:i}=t;Object(n.w)(o,0,0,0),Object(n.w)(g,0,0,0);let a=0,c=0;const u=e?e.length-1:i.length/s-1,f=u+(r?2:0);for(let d=0;d<f;d+=2){const t=d<u?d:u,r=d<u?d+1:0,f=(e?e[t]:t)*s,l=(e?e[r]:r)*s;y[0]=i[f+0],y[1]=i[f+1],y[2]=i[f+2],O[0]=i[l+0],O[1]=i[l+1],O[2]=i[l+2],Object(n.e)(y,Object(n.f)(y,y,O),.5);const p=Object(n.n)(y,O);p>0?(Object(n.f)(o,o,Object(n.e)(y,y,p)),a+=p):(Object(n.f)(g,g,y),c++)}return 0!==a?(Object(n.e)(o,o,1/a),!0):0!==c&&(Object(n.e)(o,g,1/c),!0)}const y=Object(o.e)(),O=Object(o.e)(),w=Object(o.e)(),g=Object(o.e)()},616:function(t,e,r){"use strict";r.d(e,"a",(function(){return o}));var n=r(88);class o{constructor(t,e,r=""){this.major=t,this.minor=e,this._context=r}lessThan(t,e){return this.major<t||t===this.major&&this.minor<e}since(t,e){return!this.lessThan(t,e)}validate(t){if(this.major!==t.major){const e=this._context&&this._context+":",r=this._context&&this._context+" ";throw new n.a(e+"unsupported-version",`Required major ${r}version is '${this.major}', but got '\${version.major}.\${version.minor}'`,{version:t})}}clone(){return new o(this.major,this.minor,this._context)}static parse(t,e=""){const[r,s]=t.split("."),i=/^\s*\d+\s*$/;if(!r||!r.match||!r.match(i))throw new n.a((e&&e+":")+"invalid-version","Expected major version to be a number, but got '${version}'",{version:t});if(!s||!s.match||!s.match(i))throw new n.a((e&&e+":")+"invalid-version","Expected minor version to be a number, but got '${version}'",{version:t});const a=parseInt(r,10),c=parseInt(s,10);return new o(a,c,e)}}},634:function(t,e,r){"use strict";r.d(e,"a",(function(){return n})),r.d(e,"b",(function(){return s})),r.d(e,"c",(function(){return o})),r.d(e,"d",(function(){return i}));r(79);function n(t){switch(t){case"u8":return 1;case"u16":return 2;case"u32":return 4;case"i8":return 1;case"i16":return 2;case"i32":case"f32":return 4;case"f64":return 8;default:return}}function o(t){switch(t){case"u8":case"u16":case"u32":return!1;case"i8":case"i16":case"i32":case"f32":case"f64":return!0;default:return}}function s(t){switch(t){case"u8":case"u16":case"u32":case"i8":case"i16":case"i32":return!0;case"f32":case"f64":return!1;default:return}}function i(t){switch(t){case"u8":return 255;case"u16":return 65535;case"u32":return 4294967295;case"i8":return 127;case"i16":return 32767;case"i32":return 2147483647;case"f32":return 3402823e32;case"f64":return 179769e303;default:return}}},908:function(t,e,r){"use strict";r.d(e,"a",(function(){return i})),r.d(e,"b",(function(){return s}));var n=r(634);function o(t,e,r){const n=t.typedBuffer,o=t.typedBufferStride,s=e.typedBuffer,i=e.typedBufferStride,a=r?r.count:e.count;let c=(r&&r.dstIndex?r.dstIndex:0)*o,u=(r&&r.srcIndex?r.srcIndex:0)*i;for(let f=0;f<a;++f)n[c]=s[u],n[c+1]=s[u+1],c+=o,u+=i}function s(t,e,r){const s=t.typedBuffer,i=t.typedBufferStride,a=e.typedBuffer,c=e.typedBufferStride,u=r?r.count:e.count;let f=(r&&r.dstIndex?r.dstIndex:0)*i,d=(r&&r.srcIndex?r.srcIndex:0)*c;if(Object(n.b)(e.elementType)){const t=Object(n.d)(e.elementType);if(Object(n.c)(e.elementType))for(let e=0;e<u;++e)s[f]=Math.max(a[d]/t,-1),s[f+1]=Math.max(a[d+1]/t,-1),f+=i,d+=c;else for(let e=0;e<u;++e)s[f]=a[d]/t,s[f+1]=a[d+1]/t,f+=i,d+=c}else o(t,e,r);return t}function i(t,e,r,n){var o,s;const i=t.typedBuffer,a=t.typedBufferStride,c=null!=(o=null==n?void 0:n.count)?o:t.count;let u=(null!=(s=null==n?void 0:n.dstIndex)?s:0)*a;for(let f=0;f<c;++f)i[u]=e,i[u+1]=r,u+=a}Object.freeze({__proto__:null,copy:o,normalizeIntegerBuffer:s,fill:i})},909:function(t,e,r){"use strict";function n(t,e,r){const n=t.typedBuffer,o=t.typedBufferStride,s=e.typedBuffer,i=e.typedBufferStride,a=r?r.count:e.count;let c=(r&&r.dstIndex?r.dstIndex:0)*o,u=(r&&r.srcIndex?r.srcIndex:0)*i;for(let f=0;f<a;++f)n[c]=s[u],n[c+1]=s[u+1],n[c+2]=s[u+2],n[c+3]=s[u+3],c+=o,u+=i}function o(t,e,r,n,o,s){var i,a;const c=t.typedBuffer,u=t.typedBufferStride,f=null!=(i=null==s?void 0:s.count)?i:t.count;let d=(null!=(a=null==s?void 0:s.dstIndex)?a:0)*u;for(let l=0;l<f;++l)c[d]=e,c[d+1]=r,c[d+2]=n,c[d+3]=o,d+=u}r.d(e,"a",(function(){return n})),r.d(e,"b",(function(){return o}));Object.freeze({__proto__:null,copy:n,fill:o})}}]);
//# sourceMappingURL=22.26cc03e0.chunk.js.map