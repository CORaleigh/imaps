(this.webpackJsonpimaps=this.webpackJsonpimaps||[]).push([[280],{614:function(e,a,t){"use strict";t.r(a),t.d(a,"getPatternDescriptor",(function(){return L})),t.d(a,"getSymbolLayerFill",(function(){return x})),t.d(a,"previewSymbol3D",(function(){return R}));var r=t(91),l=t(7),s=(t(80),t(89)),i=t(81),n=t(93),o=t(94),c=t(105),h=t(885),u=t(162),p=t(886),m=t(466),b=t(801),f=t(422),v=t(414),y=t(824),d=t(825),j=22,O=120,k=i.a.getLogger("esri.symbols.support.previewSymbol3D");function g(e){var a=e.outline,t=Object(s.k)(e.material)?e.material.color:null,r=Object(s.k)(t)?t.toHex():null;if(Object(s.j)(a))return"fill"===e.type&&"#ffffff"===r?{color:"#bdc3c7",width:.75}:null;var l=Object(c.h)(a.size)||0;return{color:"rgba("+(Object(s.k)(a.color)?a.color.toRgba():"255,255,255,1")+")",width:Math.min(l,80)}}function w(e,a=1){var t=e.a,r=Object(m.b)(e),l=r.h,s=r.s/a,i=100-(100-r.v)/a,{r:n,g:o,b:c}=Object(m.e)({h:l,s:s,v:i});return[n,o,c,t]}function M(e){return"water"===e.type?Object(s.j)(e.color)?null:e.color:Object(s.j)(e.material)||Object(s.j)(e.material.color)?null:e.material.color}function x(e,a=0){var t=M(e);if(!t){if("fill"===e.type)return null;var r=f.a.r,l=Object(y.b)(r,a);return[l,l,l,100]}for(var s=t.toRgba(),i=0;i<3;i++)s[i]=Object(y.b)(s[i],a);return s}function L(e,a){return z.apply(this,arguments)}function z(){return(z=Object(l.a)((function*(e,a){var t=e.style;return"none"===t?null:{type:"pattern",x:0,y:0,src:yield Object(f.c)(Object(u.a)("esri/symbols/patterns/".concat(t,".png")),a.toCss(!0)),width:5,height:5}}))).apply(this,arguments)}function S(e){return e.outline?g(e):{color:"rgba(0, 0, 0, 1)",width:1.5}}function P(e,a){var t=M(e);if(!t)return null;var r="rgba(";return r+=Object(y.b)(t.r,a)+",",r+=Object(y.b)(t.g,a)+",",(r+=Object(y.b)(t.b,a)+",")+t.a+");"}function D(e,a){var t=P(e,a);return t?{color:t,width:Math.min(e.size?Object(c.h)(e.size):.75,80)}:{}}function I(e,a,t){var r=.75*t;return{type:"linear",x1:r?.25*r:0,y1:r?.5*r:0,x2:r||4,y2:r?.5*r:4,colors:[{color:e,offset:0},{color:a,offset:1}]}}function C(e,a){var t,r=a&&a.size?Object(c.h)(a.size):null,l=a&&a.maxSize?Object(c.h)(a.maxSize):null,s=a&&a.disableUpsampling,i=e.symbolLayers,n=[],m=0,f=0,w=i.getItemAt(i.length-1);return w&&"icon"===w.type&&(t=w.size&&Object(c.h)(w.size)),i.forEach((i=>{if("icon"===i.type||"object"===i.type){var o="icon"===i.type?i.size&&Object(c.h)(i.size):0,k=r||o?Math.ceil(Math.min(r||o,l||O)):j;if(i&&i.resource&&i.resource.href){var w=function(e,a){var t=a&&a.resource,r=t&&t.href;if(e.thumbnail&&e.thumbnail.url)return Promise.resolve(e.thumbnail.url);if(r&&"object"!==a.type)return Promise.resolve(Object(v.f)(e,a));var l=Object(u.a)("esri/images/Legend/legend3dsymboldefault.png");return e.styleOrigin&&(e.styleOrigin.styleName||e.styleOrigin.styleUrl)?Object(b.resolveWebStyleSymbol)(e.styleOrigin,{portal:e.styleOrigin.portal},"webRef").catch((e=>e)).then((e=>{var a;return(null==e||null==(a=e.thumbnail)?void 0:a.url)||l})):Promise.resolve(l)}(e,i).then((function(e){var a=i.get("material.color"),t=function(e){return"icon"===e.type?"multiply":"tint"}(i);return Object(d.b)(e,k,a,t,s)})).then((function(e){var a=e.width,t=e.height;return m=Math.max(m,a),f=Math.max(f,t),[{shape:{type:"image",x:0,y:0,width:a,height:t,src:e.url},fill:null,stroke:null}]}));n.push(w)}else{var M,L=k;"icon"===i.type&&t&&r&&(L=k*(o/t));var z="tall"===(null==a?void 0:a.symbolConfig)||(null==a||null==(M=a.symbolConfig)?void 0:M.isTall)||"object"===i.type&&function(e){var a=e.depth,t=e.height,r=e.width;return r&&a&&t&&r===a&&r<t}(i);m=Math.max(m,z?20:L),f=Math.max(f,L),n.push(Promise.resolve(function(e,a,t){var r=[];if(!e)return r;switch(e.type){case"icon":var l=a,s=a;switch(e.resource&&e.resource.primitive||h.b){case"circle":r.push({shape:{type:"circle",cx:0,cy:0,r:.5*a},fill:x(e,0),stroke:g(e)});break;case"square":r.push({shape:{type:"path",path:[{command:"M",values:[0,s]},{command:"L",values:[0,0]},{command:"L",values:[l,0]},{command:"L",values:[l,s]},{command:"Z",values:[]}]},fill:x(e,0),stroke:g(e)});break;case"triangle":r.push({shape:{type:"path",path:[{command:"M",values:[0,s]},{command:"L",values:[.5*l,0]},{command:"L",values:[l,s]},{command:"Z",values:[]}]},fill:x(e,0),stroke:g(e)});break;case"cross":r.push({shape:{type:"path",path:[{command:"M",values:[.5*l,0]},{command:"L",values:[.5*l,s]},{command:"M",values:[0,.5*s]},{command:"L",values:[l,.5*s]}]},stroke:S(e)});break;case"x":r.push({shape:{type:"path",path:[{command:"M",values:[0,0]},{command:"L",values:[l,s]},{command:"M",values:[l,0]},{command:"L",values:[0,s]}]},stroke:S(e)});break;case"kite":r.push({shape:{type:"path",path:[{command:"M",values:[0,.5*s]},{command:"L",values:[.5*l,0]},{command:"L",values:[l,.5*s]},{command:"L",values:[.5*l,s]},{command:"Z",values:[]}]},fill:x(e,0),stroke:g(e)})}break;case"object":switch(e.resource&&e.resource.primitive||p.b){case"cone":var i=I(x(e,0),x(e,-.6),t?20:a),n=Object(y.c)(a,t);r.push({shape:n[0],fill:i}),r.push({shape:n[1],fill:i});break;case"inverted-cone":var o=x(e,0),c=I(o,x(e,-.6),a),u=Object(y.h)(a);r.push({shape:u[0],fill:c}),r.push({shape:u[1],fill:o});break;case"cube":var m=Object(y.d)(a,t);r.push({shape:m[0],fill:x(e,0)}),r.push({shape:m[1],fill:x(e,-.3)}),r.push({shape:m[2],fill:x(e,-.5)});break;case"cylinder":var b=I(x(e,0),x(e,-.6),t?20:a),f=Object(y.e)(a,t);r.push({shape:f[0],fill:b}),r.push({shape:f[1],fill:b}),r.push({shape:f[2],fill:x(e,0)});break;case"diamond":var v=Object(y.f)(a);r.push({shape:v[0],fill:x(e,-.3)}),r.push({shape:v[1],fill:x(e,0)}),r.push({shape:v[2],fill:x(e,-.3)}),r.push({shape:v[3],fill:x(e,-.7)});break;case"sphere":var d=I(x(e,0),x(e,-.6));d.x1=0,d.y1=0,d.x2=.25*a,d.y2=.25*a,r.push({shape:{type:"circle",cx:0,cy:0,r:.5*a},fill:d});break;case"tetrahedron":var j=Object(y.j)(a);r.push({shape:j[0],fill:x(e,-.3)}),r.push({shape:j[1],fill:x(e,0)}),r.push({shape:j[2],fill:x(e,-.6)})}}return r}(i,L,z)))}}})),Object(o.j)(n).then((function(e){var t=[];return e.forEach((function(e){e.value?t.push(e.value):e.error&&k.warn("error while building swatchInfo!",e.error)})),Object(d.a)(t,[m,f],{node:a&&a.node,scale:!1,opacity:a&&a.opacity})}))}function E(){return(E=Object(l.a)((function*(e,a){for(var t="mesh-3d"===e.type,l=e.symbolLayers,i=a&&a.size?Object(c.h)(a.size):null,n=a&&a.maxSize?Object(c.h)(a.maxSize):null,o=i||j,h=[],u=0,p=0,m=!1,b=0;b<l.length;b++){var f=l.getItemAt(b),v=[];if(!t||"fill"===f.type){var k=y.l.fill[0];switch(f.type){case"fill":var z=g(f),S=Math.min(o,n||O);u=Math.max(u,S),p=Math.max(p,S),m=!0;var P=x(f,0),I="pattern"in f&&f.pattern,C=M(f);!t&&Object(s.k)(I)&&"style"===I.type&&"solid"!==I.style&&C&&(P=yield L(I,C)),v.push({shape:k,fill:P,stroke:z});break;case"line":var E={stroke:D(f,0),shape:k};u=Math.max(u,j),p=Math.max(p,j),v.push(E);break;case"extrude":var R=Object(r.a)({join:"round"},D(f,-.4)),Z=x(f,0),q=x(f,-.2),A=Math.min(o,n||O),H=Object(y.g)(A);R.width=1,v.push({shape:H[0],fill:q,stroke:R}),v.push({shape:H[1],fill:q,stroke:R}),v.push({shape:H[2],fill:Z,stroke:R});var J=.7*j+.5*A;u=Math.max(u,22),p=Math.max(p,J);break;case"water":var N=M(f),T=w(N),U=w(N,2),F=w(N,3),W=Object(y.k)();m=!0,v.push({shape:W[0],fill:T}),v.push({shape:W[1],fill:U}),v.push({shape:W[2],fill:F});var B=Math.min(o,n||O);u=Math.max(u,B),p=Math.max(p,B)}h.push(v)}}return Promise.resolve(Object(d.a)(h,[u,p],{node:a&&a.node,scale:m,opacity:a&&a.opacity}))}))).apply(this,arguments)}function R(e,a){if(0===e.symbolLayers.length)return Promise.reject(new n.a("symbolPreview: renderPreviewHTML3D","No symbolLayers in the symbol."));var t=null;switch(e.type){case"point-3d":t=C(e,a);break;case"line-3d":t=function(e,a){var t,l=e.symbolLayers,s=[],i=Object(v.h)(e),n=a&&a.size?Object(c.h)(a.size):null,o=(a&&a.maxSize?Object(c.h)(a.maxSize):null)||80,h=0,u=0;return l.forEach(((e,a)=>{if(e&&("line"===e.type||"path"===e.type)){var l=[];switch(e.type){case"line":var i=D(e,0),c=i&&i.width||0;0===a&&(t=c);var p=Math.min(n||c,o),m=0===a?p:n?p*(c/t):p,b=m>20?2*m:40;u=Math.max(u,m),h=Math.max(h,b),i.width=m,l.push({shape:{type:"path",path:[{command:"M",values:[0,.5*u]},{command:"L",values:[h,.5*u]}]},stroke:i});break;case"path":var f=Math.min(n||j,o),v=x(e,0),d=x(e,-.2),O=P(e,-.4),k=O?{color:O,width:1}:{};if("quad"===e.profile){var g,w,M=null!=(g=e.width)?g:e.size,L=null!=(w=e.height)?w:e.size,z=Object(y.i)(M&&L?M/L:1,0===L,0===M),S=Object(r.a)(Object(r.a)({},k),{},{join:"bevel"});l.push({shape:z[0],fill:d,stroke:S}),l.push({shape:z[1],fill:d,stroke:S}),l.push({shape:z[2],fill:v,stroke:S})}else l.push({shape:y.l.pathSymbol3DLayer[0],fill:d,stroke:k}),l.push({shape:y.l.pathSymbol3DLayer[1],fill:v,stroke:k});u=Math.max(u,f),h=u}s.push(l)}})),Promise.resolve(Object(d.a)(s,[h,u],{node:a&&a.node,scale:i,opacity:a&&a.opacity}))}(e,a);break;case"polygon-3d":case"mesh-3d":t=function(e,a){return E.apply(this,arguments)}(e,a)}return t||Promise.reject(new n.a("symbolPreview: swatchInfo3D","symbol not supported."))}}}]);
//# sourceMappingURL=280.cfc43b61.chunk.js.map