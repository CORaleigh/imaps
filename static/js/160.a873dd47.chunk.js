(this.webpackJsonpimaps=this.webpackJsonpimaps||[]).push([[160],{391:function(e,t,n){"use strict";n.d(t,"a",(function(){return c})),n.d(t,"b",(function(){return i}));var r=n(139),s=n(723),o=n(588),a=n(184),l=n(858);function i(e,t,n,a){const i=function(e,t,n){if(!e)return null;if(n&&"web-scene"===n.origin&&!(e instanceof s.a)&&!(e instanceof o.a)){const s="cim"!==e.type?Object(l.a)(e):{symbol:null,error:new r.a("symbol-conversion:unsupported-cim-symbol","CIM symbol is unsupported in web scenes",{symbol:e})};return s.symbol?s.symbol.write(t,n):(n.messages&&n.messages.push(new r.a("symbol:unsupported",`Symbols of type '${e.declaredClass}' are not supported in scenes. Use 3D symbology instead when working with WebScene and SceneView`,{symbol:e,context:n,error:s.error})),null)}return n&&"web-map"===n.origin&&"web-style"===e.type?(n.messages&&n.messages.push(new r.a("symbol:unsupported",`Symbols of type '${e.declaredClass}' are not supported in webmaps. Use CIMSymbol instead when working with WebMap in MapView.`,{symbol:e,context:n})),null):e.write(t,n)}(e,{},a);i&&(t[n]=i)}function c(e,t){return Object(a.d)(e,null,t)}},841:function(e,t,n){"use strict";n.r(t),n.d(t,"fetchStyle",(function(){return h})),n.d(t,"fetchSymbolFromStyle",(function(){return j})),n.d(t,"resolveWebStyleSymbol",(function(){return g})),n.d(t,"styleNameFromItem",(function(){return O}));var r=n(139),s=n(131),o=n(242),a=n(150),l=n(401),i=n(229),c=n(981),m=n(927),u=n(184),y=n(391),f=n(932),b=n(128);function p(e){return!!Object(b.a)(`enable-feature:${e}`)}const d={};function w(e,t,n){const s=t.portal||i.a.getDefault();let o;const a=`${s.url} - ${s.user&&s.user.username} - ${e}`;return d[a]||(d[a]=function(e,t,n){return t.load(n).then((()=>{const r=new l.a({disableExtraQuery:!0,query:`owner:${N} AND type:${v} AND typekeywords:"${e}"`});return t.queryItems(r,n)})).then((({results:t})=>{let s=null;const o=e.toLowerCase();if(t&&Array.isArray(t))for(const e of t)if(e.typeKeywords.some((e=>e.toLowerCase()===o))&&e.type===v&&e.owner===N){s=e;break}if(!s)throw new r.a("symbolstyleutils:style-not-found",`The style '${e}' could not be found`,{styleName:e});return s.load(n)}))}(e,s,n).then((e=>(o=e,e.fetchData()))).then((t=>({data:t,baseUrl:o.itemUrl,styleName:e})))),d[a]}function h(e,t,n){return e.styleUrl?function(e,t){return $(e,t).then((t=>({data:t.data,baseUrl:Object(s.F)(e),styleUrl:e})))}(e.styleUrl,n):e.styleName?w(e.styleName,t,n):Promise.reject(new r.a("symbolstyleutils:style-url-and-name-missing","Either styleUrl or styleName is required to resolve a style"))}function g(e,t,n,o){return e.name?e.styleName&&"Esri2DPointSymbolsStyle"===e.styleName?function(e,t,n){const r=U.replace(/\{SymbolName\}/gi,e.name);return $(r,n).then((e=>{const n=S(e.data);return Object(y.a)(n,{portal:t.portal,url:Object(s.J)(Object(s.F)(r)),origin:"portal-item"})}))}(e,t,o):h(e,t,o).then((r=>j(r,e.name,t,n,o))):Promise.reject(new r.a("symbolstyleutils:style-symbol-reference-name-missing","Missing name in style symbol reference"))}function j(e,t,n,a,l){const i=e.data,b={portal:n.portal,url:Object(s.J)(e.baseUrl),origin:"portal-item"},d=i.items.find((e=>e.name===t));if(!d){const e=`The symbol name '${t}' could not be found`;return Promise.reject(new r.a("symbolstyleutils:symbol-name-not-found",e,{symbolName:t}))}let w=Object(o.a)(function(e,t){if("cimRef"===t)return e.cimRef;if(e.formatInfos&&!p("force-wosr"))for(const n of e.formatInfos)if("gltf"===n.type)return n.href;return e.webRef}(d,a),b),h=d.thumbnail&&d.thumbnail.href;const g=d.thumbnail&&d.thumbnail.imageData;Object(f.b)()&&(w=Object(f.a)(w),h=Object(f.a)(h));const j={portal:n.portal,url:Object(s.J)(Object(s.F)(w)),origin:"portal-item"};return $(w,l).then((r=>{const s="cimRef"===a?S(r.data):r.data,l=Object(y.a)(s,j);if(l&&Object(u.c)(l)){if(h){const e=Object(o.a)(h,b);l.thumbnail=new m.a({url:e})}else g&&(l.thumbnail=new m.a({url:`data:image/png;base64,${g}`}));e.styleUrl?l.styleOrigin=new c.a({portal:n.portal,styleUrl:e.styleUrl,name:t}):e.styleName&&(l.styleOrigin=new c.a({portal:n.portal,styleName:e.styleName,name:t}))}return l}))}function S(e){return null===e||"CIMSymbolReference"===e.type?e:{type:"CIMSymbolReference",symbol:e}}function O(e){for(const t of e.typeKeywords)if(/^Esri.*Style$/.test(t)&&"Esri Style"!==t)return t}function $(e,t){const n={responseType:"json",query:{f:"json"},...t};return Object(a.default)(Object(s.C)(e),n)}const N="esri_en",v="Style",U="https://cdn.arcgis.com/sharing/rest/content/items/220936cc6ed342c9937abd8f180e7d1e/resources/styles/cim/{SymbolName}.json?f=json"},858:function(e,t,n){"use strict";n.d(t,"a",(function(){return p}));var r=n(139),s=n(274),o=n(853),a=n(854),l=n(669),i=n(813),c=n(814),m=n(269),u=n(343),y=n(416),f=n(588),b=n(184);function p(e,t=!1,n=!1,p=!0){if(!e)return{symbol:null};let d;if(Object(b.c)(e)||e instanceof f.a)d=e.clone();else if("cim"===e.type)d=i.a.fromCIMSymbol(e);else if(e instanceof s.a)d=a.a.fromSimpleLineSymbol(e);else if(e instanceof u.a)d=i.a.fromSimpleMarkerSymbol(e);else if(e instanceof l.a)d=i.a.fromPictureMarkerSymbol(e);else if(e instanceof m.a)d=c.a.fromSimpleFillSymbol(e);else{if(!(e instanceof y.a))return{error:new r.a("symbol-conversion:unsupported-2d-symbol",`2D symbol of type '${e.type||e.declaredClass}' is unsupported in 3D`,{symbol:e})};d=p?o.a.fromTextSymbol(e):i.a.fromTextSymbol(e)}if(t&&(d.id=e.id),n&&Object(b.c)(d))for(let r=0;r<d.symbolLayers.length;++r)d.symbolLayers.getItemAt(r)._ignoreDrivers=!0;return{symbol:d}}},932:function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return s}));var r=n(257);function s(e){return e=e||r.a.location.hostname,m.some((t=>{var n;return null!=(null==(n=e)?void 0:n.match(t))}))}function o(e,t){return e&&(t=t||r.a.location.hostname)?null!=t.match(a)||null!=t.match(i)?e.replace("static.arcgis.com","staticdev.arcgis.com"):null!=t.match(l)||null!=t.match(c)?e.replace("static.arcgis.com","staticqa.arcgis.com"):e:e}const a=/^devext.arcgis.com$/,l=/^qaext.arcgis.com$/,i=/^[\w-]*\.mapsdevext.arcgis.com$/,c=/^[\w-]*\.mapsqa.arcgis.com$/,m=[/^([\w-]*\.)?[\w-]*\.zrh-dev-local.esri.com$/,a,l,/^jsapps.esri.com$/,i,c]}}]);
//# sourceMappingURL=160.a873dd47.chunk.js.map