(this.webpackJsonpimaps=this.webpackJsonpimaps||[]).push([[104,47,56,168,232,247],{109:function(e,t,r){"use strict";r.d(t,"a",(function(){return o})),r.d(t,"b",(function(){return g})),r.d(t,"c",(function(){return y})),r.d(t,"d",(function(){return a})),r.d(t,"e",(function(){return c})),r.d(t,"f",(function(){return f})),r.d(t,"g",(function(){return b})),r.d(t,"h",(function(){return u})),r.d(t,"i",(function(){return d})),r.d(t,"j",(function(){return l})),r.d(t,"k",(function(){return h})),r.d(t,"l",(function(){return p})),r.d(t,"m",(function(){return j}));var n=r(180),i=(r(87),r(89));const s=/\?(\.|$)/g;function o(e,t,r,n){const i=Array.isArray(t)?t:t.indexOf(",")>-1?t.split(","):[t],o=a(e,t,r,n);for(const a of i){const t=a.trim().replace(s,"$1"),n=e.get(t);r.call(e,n,n,t,e)}return o}function a(e,t,r,n){return e.watch(t,r,n)}function c(e,t,r,n){return m(e,t,O,r,n)}function l(e,t,r,n){return j(e,t,O,r,n)}function u(e,t,r,n){return m(e,t,v,r,n)}function d(e,t,r,n){return j(e,t,v,r,n)}function h(e,t,r,n){return m(e,t,w,r,n)}function p(e,t,r,n){return j(e,t,w,r,n)}function f(e,t,r,n){return m(e,t,S,r,n)}function b(e,t,r,n){return j(e,t,S,r,n)}function y(e,t,r,n){let i=!1;const s=e.watch(t,((t,n,s,o)=>{i||r.call(e,t,n,s,o)}),n);return{remove(){s.remove()},pause(){i=!0},resume(){i=!1}}}function g(e,t,r,i,s,a,c){const l={};function u(t){const n=l[t];n&&(a&&a(n.target,t,e,r),n.handle.remove(),delete l[t])}const d=o(e,t,((t,o,a)=>{u(a),Object(n.b)(t)&&(l[a]={handle:Object(n.c)(t,r,i),target:t},s&&s(t,a,e,r))}),c);return{remove(){d.remove();for(const e in l)u(e)}}}function m(e,t,r,n,i){const s=e.watch(t,((t,i,s,o)=>{r&&!r(t)||null==n||n.call(e,t,i,s,o)}),i);if(Array.isArray(t))for(const o of t){const i=e.get(o);r&&r(i)&&(null==n||n.call(e,i,i,t,e))}else{const i=e.get(t);r&&r(i)&&(null==n||n.call(e,i,i,t,e))}return s}function j(e,t,r,n,s){const o="function"==typeof n?n:null,a="object"==typeof n?n:null;"boolean"==typeof n&&(s=n);let c,l=!1;function u(){c&&(c.remove(),c=null)}const d=Object(i.f)();Object(i.q)(a,(()=>{u(),d.reject(Object(i.e)())}));const h={then:d.promise.then.bind(d.promise),catch:d.promise.catch.bind(d.promise),remove:u};return Object.freeze(h),c=m(e,t,r,((t,r,n,i)=>{l=!0,u(),o&&o.call(e,t,r,n,i),d.resolve({value:t,oldValue:r,propertyName:n,target:i})}),s),l&&u(),h}function O(e){return!!e}function v(e){return!e}function w(e){return!0===e}function S(e){return!1===e}},115:function(e,t,r){"use strict";r.d(t,"a",(function(){return G})),r.d(t,"b",(function(){return B})),r.d(t,"c",(function(){return m})),r.d(t,"d",(function(){return w})),r.d(t,"e",(function(){return S})),r.d(t,"f",(function(){return y})),r.d(t,"g",(function(){return b})),r.d(t,"h",(function(){return x})),r.d(t,"i",(function(){return I})),r.d(t,"j",(function(){return T})),r.d(t,"k",(function(){return ee})),r.d(t,"l",(function(){return f})),r.d(t,"m",(function(){return u})),r.d(t,"n",(function(){return h})),r.d(t,"o",(function(){return O})),r.d(t,"p",(function(){return F})),r.d(t,"q",(function(){return _})),r.d(t,"r",(function(){return M})),r.d(t,"s",(function(){return $})),r.d(t,"t",(function(){return V})),r.d(t,"u",(function(){return L})),r.d(t,"v",(function(){return U})),r.d(t,"w",(function(){return z})),r.d(t,"x",(function(){return J})),r.d(t,"y",(function(){return g})),r.d(t,"z",(function(){return H})),r.d(t,"A",(function(){return X}));var n=r(88),i=r(85),s=r(116),o=r(164),a=r(153);const c=["field","field2","field3","normalizationField","rotationInfo.field","proportionalSymbolInfo.field","proportionalSymbolInfo.normalizationField","colorInfo.field","colorInfo.normalizationField"],l=["field","normalizationField"];function u(e,t){if(null!=e&&null!=t)for(const r of Array.isArray(e)?e:[e])if(d(c,r,t),"visualVariables"in r&&r.visualVariables)for(const e of r.visualVariables)d(l,e,t)}function d(e,t,r){if(e)for(const n of e){const e=Object(s.b)(n,t),i=e&&"function"!=typeof e&&r.get(e);i&&Object(s.c)(n,i.name,t)}}function h(e,t){if(null!=e&&null!=t&&t.fields.length)if("startField"in e){const r=t.get(e.startField),n=t.get(e.endField);e.startField=r&&r.name||null,e.endField=n&&n.name||null}else{const r=t.get(e.startTimeField),n=t.get(e.endTimeField);e.startTimeField=r&&r.name||null,e.endTimeField=n&&n.name||null}}const p=new Set;function f(e,t){return e&&t?(p.clear(),b(p,e,t),Array.from(p).sort()):[]}function b(e,t,r){var n;if(r)if(null!=t&&null!=(n=t.fields)&&n.length)if(r.includes("*"))for(const{name:i}of t.fields)e.add(i);else for(const i of r)y(e,t,i);else{if(r.includes("*"))return e.clear(),void e.add("*");for(const t of r)e.add(t)}}function y(e,t,r){if("string"==typeof r)if(t){const n=t.get(r);n&&e.add(n.name)}else e.add(r)}function g(e,t){return Object(i.j)(t)||Object(i.j)(e)?[]:t.includes("*")?e.fields.map((e=>e.name)):t}async function m(e,t,r){var n;if(!r)return;const{arcadeUtils:i}=await Object(a.e)(),s=i.extractFieldNames(r,null==t||null==(n=t.fields)?void 0:n.map((e=>e.name)));for(const o of s)y(e,t,o)}async function j(e,t,i){if(i&&"1=1"!==i){const s=(await Promise.all([r.e(11),r.e(247)]).then(r.bind(null,346))).WhereClause.create(i,t);if(!s.isStandardized)throw new n.a("fieldUtils:collectFilterFields","Where clause is not standardized");b(e,t,s.fieldNames)}}function O({displayField:e,fields:t}){return e||(t&&t.length?v(t,"name-or-title")||v(t,"unique-identifier")||v(t,"type-or-category")||function(e){for(const t of e){if(!t||!t.name)continue;const e=t.name.toLowerCase();if(e.indexOf("name")>-1||e.indexOf("title")>-1)return t.name}return null}(t):null)}function v(e,t){for(const r of e)if(r&&r.valueType&&r.valueType===t)return r.name;return null}async function w(e,t){if(!t)return;const r=Object(s.b)("elevationInfo.featureExpressionInfo",t);return r?r.collectRequiredFields(e,t.fieldsIndex):void 0}async function S(e,t,r){var n;if(!t||!r||"cluster"!==r.type)return;const i=[];null!=(n=r.popupTemplate)&&n.expressionInfos&&i.push(...r.popupTemplate.expressionInfos.map((r=>m(e,t.fieldsIndex,r.expression)))),r.fields&&i.push(...r.fields.map((r=>async function(e,t,r){r.outStatistic.onStatisticValueExpression?m(e,t,r.outStatistic.onStatisticValueExpression):e.add(r.outStatistic.onStatisticField)}(e,t.fieldsIndex,r)))),await Promise.all(i)}async function x(e,t,r){t&&(t.timeInfo&&Object(i.k)(r)&&r.timeExtent&&b(e,t.fieldsIndex,[t.timeInfo.startField,t.timeInfo.endField]),t.floorInfo&&b(e,t.fieldsIndex,[t.floorInfo.floorField]),Object(i.k)(r)&&Object(i.k)(r.where)&&await j(e,t.fieldsIndex,r.where))}async function T(e,t,r){t&&r&&await Promise.all(r.map((r=>async function(e,t,r){t&&r&&(r.valueExpression?await m(e,t.fieldsIndex,r.valueExpression):r.field&&y(e,t.fieldsIndex,r.field))}(e,t,r))))}function F(e){if(!e)return[];const t="editFieldsInfo"in e&&e.editFieldsInfo;return t?f(e.fieldsIndex,[t&&t.creatorField,t&&t.creationDateField,t&&t.editorField,t&&t.editDateField]):[]}function _(e){if(!e)return[];const t=e.geometryFieldsInfo;return t?f(e.fieldsIndex,[t.shapeAreaField,t.shapeLengthField]):[]}async function I(e,t){const{labelingInfo:r,fieldsIndex:n}=t;r&&r.length&&await Promise.all(r.map((t=>async function(e,t,r){if(!r)return;const n=r.getLabelExpression(),i=r.where;if("arcade"===n.type)await m(e,t,n.expression);else{const r=n.expression.match(/{[^}]*}/g);r&&r.forEach((r=>{y(e,t,r.slice(1,-1))}))}await j(e,t,i)}(e,n,t))))}function M(e){const t=e.defaultValue;return void 0!==t&&D(e,t)?t:e.nullable?null:void 0}function k(e){return"number"==typeof e&&!isNaN(e)&&isFinite(e)}function R(e){return null===e||k(e)}const P="isInteger"in Number?Number.isInteger:e=>"number"==typeof e&&isFinite(e)&&Math.floor(e)===e;function N(e){return null===e||P(e)}function C(e){return null!=e&&"string"==typeof e}function E(e){return null===e||C(e)}function q(){return!0}function D(e,t){let r;switch(e.type){case"date":case"integer":case"long":case"small-integer":case"esriFieldTypeDate":case"esriFieldTypeInteger":case"esriFieldTypeLong":case"esriFieldTypeSmallInteger":r=e.nullable?N:P;break;case"double":case"single":case"esriFieldTypeSingle":case"esriFieldTypeDouble":r=e.nullable?R:k;break;case"string":case"esriFieldTypeString":r=e.nullable?E:C;break;default:r=q}return 1===arguments.length?r:r(t)}const z=["integer","small-integer","single","double"],A=new Set([...z,"esriFieldTypeInteger","esriFieldTypeSmallInteger","esriFieldTypeSingle","esriFieldTypeDouble"]);function L(e){return null!=e&&A.has(e.type)}function U(e){return null!=e&&("string"===e.type||"esriFieldTypeString"===e.type)}function V(e){return null!=e&&("date"===e.type||"esriFieldTypeDate"===e.type)}var G,B;function J(e){return null==e||"number"==typeof e&&isNaN(e)?null:e}function H(e,t){return e.nullable&&null===t?null:L(e)&&!function(e,t){const r="string"==typeof e?W(e):e;return!!r&&(r.isInteger?P(t)&&t>=r.min&&t<=r.max:t>=r.min&&t<=r.max)}(e.type,Number(t))?G.OUT_OF_RANGE:D(e,t)?e.domain?Object(o.e)(e.domain,t):null:B.INVALID_TYPE}function $(e){return Object(o.c)(e.domain)||(L(e)?W(e.type):void 0)}function W(e){switch(e){case"esriFieldTypeSmallInteger":case"small-integer":return Z;case"esriFieldTypeInteger":case"integer":return Q;case"esriFieldTypeSingle":case"single":return K;case"esriFieldTypeDouble":case"double":return Y}}(G||(G={})).OUT_OF_RANGE="numeric-range-validation-error::out-of-range",function(e){e.INVALID_TYPE="type-validation-error::invalid-type"}(B||(B={}));const Z={min:-32768,max:32767,isInteger:!0},Q={min:-2147483648,max:2147483647,isInteger:!0},K={min:-34e37,max:12e37,isInteger:!1},Y={min:-Number.MAX_VALUE,max:Number.MAX_VALUE,isInteger:!1};function X(e,t,r){switch(e){case o.a.INVALID_CODED_VALUE:return`Value ${r} is not in the coded domain - field: ${t.name}, domain: ${JSON.stringify(t.domain)}`;case o.a.VALUE_OUT_OF_RANGE:return`Value ${r} is out of the range of valid values - field: ${t.name}, domain: ${JSON.stringify(t.domain)}`;case B.INVALID_TYPE:return`Value ${r} is not a valid value for the field type - field: ${t.name}, type: ${t.type}, nullable: ${t.nullable}`;case G.OUT_OF_RANGE:{const{min:e,max:n}=W(t.type);return`Value ${r} is out of range for the number type - field: ${t.name}, type: ${t.type}, value range is ${e} to ${n}`}}}function ee(e,t){return!function(e,t,r){if(!t||!t.attributes||!e){if(Object(i.k)(r))for(const t of e)r.add(t);return!0}const n=t.attributes;let s=!1;for(const o of e)if(!(o in n)){if(s=!0,!Object(i.k)(r))break;r.add(o)}return s}(e,t,null)}},117:function(e,t,r){"use strict";r.d(t,"a",(function(){return u}));var n=r(81),i=r(92),s=r(103),o=r(85),a=r(83),c=r(82);let l=class extends i.a{constructor(e){super(e),this._groups=new Map}destroy(){this.removeAll()}get size(){let e=0;return this._groups.forEach((t=>{e+=t.length})),e}add(e,t){if(!this._isHandle(e)&&!Array.isArray(e)&&!s.a.isCollection(e))return this;const r=this._getOrCreateGroup(t);return Array.isArray(e)||s.a.isCollection(e)?e.forEach((e=>this._isHandle(e)&&r.push(e))):r.push(e),this.notifyChange("size"),this}forEach(e,t){if("function"==typeof e)this._groups.forEach((t=>t.forEach(e)));else{const r=this._getGroup(e);r&&t&&r.forEach(t)}}has(e){return this._groups.has(this._ensureGroupKey(e))}remove(e){if(Array.isArray(e)||s.a.isCollection(e))return e.forEach(this.remove,this),this;if(!this.has(e))return this;const t=this._getGroup(e);for(let r=0;r<t.length;r++)t[r].remove();return this._deleteGroup(e),this.notifyChange("size"),this}removeAll(){return this._groups.forEach((e=>{for(let t=0;t<e.length;t++)e[t].remove()})),this._groups.clear(),this.notifyChange("size"),this}_isHandle(e){return e&&!!e.remove}_getOrCreateGroup(e){if(this.has(e))return this._getGroup(e);const t=[];return this._groups.set(this._ensureGroupKey(e),t),t}_getGroup(e){return Object(o.d)(this._groups.get(this._ensureGroupKey(e)))}_deleteGroup(e){return this._groups.delete(this._ensureGroupKey(e))}_ensureGroupKey(e){return e||"_default_"}};Object(n.a)([Object(a.b)({readOnly:!0})],l.prototype,"size",null),l=Object(n.a)([Object(c.a)("esri.core.Handles")],l);var u=l},121:function(e,t,r){"use strict";r.d(t,"a",(function(){return b}));var n,i=r(81),s=r(86),o=r(85),a=r(159),c=r(83),l=(r(79),r(84),r(80),r(94)),u=r(82),d=r(91);let h=n=class extends s.a{constructor(e){super(e),this.end=null,this.start=null}static get allTime(){return p}static get empty(){return f}readEnd(e,t){return null!=t.end?new Date(t.end):null}writeEnd(e,t){t.end=e?e.getTime():null}get isAllTime(){return this.equals(n.allTime)}get isEmpty(){return this.equals(n.empty)}readStart(e,t){return null!=t.start?new Date(t.start):null}writeStart(e,t){t.start=e?e.getTime():null}clone(){return new n({end:this.end,start:this.start})}equals(e){if(!e)return!1;const t=Object(o.k)(this.start)?this.start.getTime():this.start,r=Object(o.k)(this.end)?this.end.getTime():this.end,n=Object(o.k)(e.start)?e.start.getTime():e.start,i=Object(o.k)(e.end)?e.end.getTime():e.end;return t===n&&r===i}expandTo(e){if(this.isEmpty||this.isAllTime)return this.clone();const t=Object(o.b)(this.start,(t=>Object(a.c)(t,e))),r=Object(o.b)(this.end,(t=>Object(a.b)(Object(a.c)(t,e),1,e)));return new n({start:t,end:r})}intersection(e){if(!e)return this.clone();if(this.isEmpty||e.isEmpty)return n.empty;if(this.isAllTime)return e.clone();if(e.isAllTime)return this.clone();const t=Object(o.n)(this.start,-1/0,(e=>e.getTime())),r=Object(o.n)(this.end,1/0,(e=>e.getTime())),i=Object(o.n)(e.start,-1/0,(e=>e.getTime())),s=Object(o.n)(e.end,1/0,(e=>e.getTime()));let a,c;if(i>=t&&i<=r?a=i:t>=i&&t<=s&&(a=t),r>=i&&r<=s?c=r:s>=t&&s<=r&&(c=s),!isNaN(a)&&!isNaN(c)){const e=new n;return e.start=a===-1/0?null:new Date(a),e.end=c===1/0?null:new Date(c),e}return n.empty}offset(e,t){if(this.isEmpty||this.isAllTime)return this.clone();const r=new n,{start:i,end:s}=this;return Object(o.k)(i)&&(r.start=Object(a.b)(i,e,t)),Object(o.k)(s)&&(r.end=Object(a.b)(s,e,t)),r}union(e){if(!e||e.isEmpty)return this.clone();if(this.isEmpty)return e.clone();if(this.isAllTime||e.isAllTime)return p.clone();const t=Object(o.k)(this.start)&&Object(o.k)(e.start)?new Date(Math.min(this.start.getTime(),e.start.getTime())):null,r=Object(o.k)(this.end)&&Object(o.k)(e.end)?new Date(Math.max(this.end.getTime(),e.end.getTime())):null;return new n({start:t,end:r})}};Object(i.a)([Object(c.b)({type:Date,json:{write:{allowNull:!0}}})],h.prototype,"end",void 0),Object(i.a)([Object(l.a)("end")],h.prototype,"readEnd",null),Object(i.a)([Object(d.a)("end")],h.prototype,"writeEnd",null),Object(i.a)([Object(c.b)({readOnly:!0,json:{read:!1}})],h.prototype,"isAllTime",null),Object(i.a)([Object(c.b)({readOnly:!0,json:{read:!1}})],h.prototype,"isEmpty",null),Object(i.a)([Object(c.b)({type:Date,json:{write:{allowNull:!0}}})],h.prototype,"start",void 0),Object(i.a)([Object(l.a)("start")],h.prototype,"readStart",null),Object(i.a)([Object(d.a)("start")],h.prototype,"writeStart",null),h=n=Object(i.a)([Object(u.a)("esri.TimeExtent")],h);const p=new h,f=new h({start:void 0,end:void 0});var b=h},125:function(e,t,r){"use strict";r.d(t,"a",(function(){return I})),r.d(t,"b",(function(){return f})),r.d(t,"c",(function(){return g})),r.d(t,"d",(function(){return m})),r.d(t,"e",(function(){return o})),r.d(t,"f",(function(){return x})),r.d(t,"g",(function(){return j})),r.d(t,"h",(function(){return O})),r.d(t,"i",(function(){return w})),r.d(t,"j",(function(){return v})),r.d(t,"k",(function(){return a})),r.d(t,"l",(function(){return s})),r.d(t,"m",(function(){return F})),r.d(t,"n",(function(){return h})),r.d(t,"o",(function(){return d})),r.d(t,"p",(function(){return p})),r.d(t,"q",(function(){return l})),r.d(t,"r",(function(){return c})),r.d(t,"s",(function(){return y})),r.d(t,"t",(function(){return S})),r.d(t,"u",(function(){return T})),r.d(t,"v",(function(){return u})),r.d(t,"w",(function(){return b}));r(79),r(108);var n=r(85),i=r(99);function s(e=M){return[e[0],e[1],e[2],e[3]]}function o(e){return[e[0],e[1],e[2],e[3]]}function a(e,t){return e!==t&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3]),e}function c(e,t,r,n,i=s()){return i[0]=e,i[1]=t,i[2]=r,i[3]=n,i}function l(e,t=s()){return t[0]=e.xmin,t[1]=e.ymin,t[2]=e.xmax,t[3]=e.ymax,t}function u(e,t){return new i.a({xmin:e[0],ymin:e[1],xmax:e[2],ymax:e[3],spatialReference:t})}function d(e,t){t[0]<e[0]&&(e[0]=t[0]),t[0]>e[2]&&(e[2]=t[0]),t[1]<e[1]&&(e[1]=t[1]),t[1]>e[3]&&(e[3]=t[1])}function h(e,t,r){if(Object(n.j)(t))a(r,e);else if("length"in t)_(t)?(r[0]=Math.min(e[0],t[0]),r[1]=Math.min(e[1],t[1]),r[2]=Math.max(e[2],t[2]),r[3]=Math.max(e[3],t[3])):2!==t.length&&3!==t.length||(r[0]=Math.min(e[0],t[0]),r[1]=Math.min(e[1],t[1]),r[2]=Math.max(e[2],t[0]),r[3]=Math.max(e[3],t[1]));else switch(t.type){case"extent":r[0]=Math.min(e[0],t.xmin),r[1]=Math.min(e[1],t.ymin),r[2]=Math.max(e[2],t.xmax),r[3]=Math.max(e[3],t.ymax);break;case"point":r[0]=Math.min(e[0],t.x),r[1]=Math.min(e[1],t.y),r[2]=Math.max(e[2],t.x),r[3]=Math.max(e[3],t.y)}}function p(e,t,r=e){const n=t.length;let i=e[0],s=e[1],o=e[2],a=e[3];for(let c=0;c<n;c++){const e=t[c];i=Math.min(i,e[0]),s=Math.min(s,e[1]),o=Math.max(o,e[0]),a=Math.max(a,e[1])}return r[0]=i,r[1]=s,r[2]=o,r[3]=a,r}function f(e){for(let t=0;t<4;t++)if(!isFinite(e[t]))return!1;return!0}function b(e){return Object(n.j)(e)||e[0]>=e[2]?0:e[2]-e[0]}function y(e){return e[1]>=e[3]?0:e[3]-e[1]}function g(e){return b(e)*y(e)}function m(e,t=[0,0]){return t[0]=(e[0]+e[2])/2,t[1]=(e[1]+e[3])/2,t}function j(e,t){return v(e,t[0],t[1])}function O(e,t){return v(e,t.x,t.y)}function v(e,t,r){return t>=e[0]&&r>=e[1]&&t<=e[2]&&r<=e[3]}function w(e,t,r){return t[0]>=e[0]-r&&t[1]>=e[1]-r&&t[0]<=e[2]+r&&t[1]<=e[3]+r}function S(e,t){return Math.max(t[0],e[0])<=Math.min(t[2],e[2])&&Math.max(t[1],e[1])<=Math.min(t[3],e[3])}function x(e,t){return t[0]>=e[0]&&t[2]<=e[2]&&t[1]>=e[1]&&t[3]<=e[3]}function T(e,t,r,n=e){return n[0]=e[0]+t,n[1]=e[1]+r,n[2]=e[2]+t,n[3]=e[3]+r,n}function F(e){return e?a(e,I):s(I)}function _(e){return null!=e&&4===e.length}const I=[1/0,1/0,-1/0,-1/0],M=[0,0,0,0]},1343:function(e,t,r){"use strict";r.r(t),r.d(t,"FeatureServiceSnappingSourceWorker",(function(){return W})),r.d(t,"default",(function(){return Z}));var n=r(81),i=r(123),s=r(117),o=r(85),a=r(89),c=r(109),l=r(83),u=(r(79),r(84),r(80)),d=r(82),h=r(93),p=r(850),f=r(773),b=r(361),y=r(257),g=r(143),m=r(168),j=r(92);let O=class extends j.a{constructor(){super(...arguments),this.updating=!1,this.pending=[]}push(e,t){this.pending.push({promise:e,callback:t}),1===this.pending.length&&this.process()}process(){if(!this.pending.length)return void(this.updating=!1);this.updating=!0;const e=this.pending[0];e.promise.then((t=>e.callback(t))).catch((()=>{})).then((()=>{this.pending.shift(),this.process()}))}};Object(n.a)([Object(l.b)()],O.prototype,"updating",void 0),O=Object(n.a)([Object(d.a)("esri.core.AsyncSequence")],O);var v=r(156),w=r(178),S=r(99),x=r(125),T=r(165),F=r(379),_=r(221),I=r(157);class M{constructor(e,t){this.data=e,this.resolution=t,this.state={type:0},this.alive=!0}process(e){switch(this.state.type){case 0:return this.state=this.gotoFetchCount(this.state,e),this.state.task.promise.then(e.resume,e.resume);case 1:case 3:break;case 2:return this.state=this.gotoFetchFeatures(this.state,e),this.state.task.promise.then(e.resume,e.resume);case 4:this.state=this.goToDone(this.state,e)}return null}get debugInfo(){return{data:this.data,featureCount:this.featureCount,state:this.stateToString}}get featureCount(){switch(this.state.type){case 0:case 1:return 0;case 2:return this.state.featureCount;case 3:return this.state.previous.featureCount;case 4:return this.state.features.length;case 5:return this.state.previous.features.length}}get stateToString(){switch(this.state.type){case 0:return"created";case 1:return"fetch-count";case 2:return"fetched-count";case 3:return"fetch-features";case 4:return"fetched-features";case 5:return"done"}}gotoFetchCount(e,t){return{type:1,previous:e,task:Object(a.h)((async e=>{const r=await Object(I.d)(t.fetchCount(this,e));1===this.state.type&&(this.state=this.gotoFetchedCount(this.state,r.ok?r.value:1/0))}))}}gotoFetchedCount(e,t){return{type:2,featureCount:t,previous:e}}gotoFetchFeatures(e,t){return{type:3,previous:e,task:Object(a.h)((async r=>{const n=await Object(I.d)(t.fetchFeatures(this,e.featureCount,r));3===this.state.type&&(this.state=this.gotoFetchedFeatures(this.state,n.ok?n.value:[]))}))}}gotoFetchedFeatures(e,t){return{type:4,previous:e,features:t}}goToDone(e,t){return t.finish(this,e.features),{type:5,previous:e}}reset(){const e=this.state;switch(this.state={type:0},e.type){case 0:case 2:case 4:case 5:break;case 1:case 3:e.task.abort()}}intersects(e){return!(!Object(o.j)(e)&&this.data.extent)||(Object(x.q)(e,k),Object(x.t)(this.data.extent,k))}}const k=Object(x.l)(),R=u.a.getLogger("esri.views.interactive.snapping.featureSources.featureServiceSource.FeatureServiceTiledFetcher");let P=class extends v.a{constructor(e){super(e),this.tilesOfInterest=[],this.availability=0,this.pendingTiles=new Map,this.pendingEdits=new O,this.pendingEditsAbortController=Object(a.d)()}get minimumVerticesPerFeature(){var e;switch(null==(e=this.store)?void 0:e.featureStore.geometryType){case"esriGeometryPoint":case"esriGeometryMultipoint":return 1;case"esriGeometryPolygon":return 4;case"esriGeometryPolyline":return 2}}set filter(e){const t=this._get("filter"),r=this.filterProperties(e);JSON.stringify(t)!==JSON.stringify(r)&&this._set("filter",r)}set customParameters(e){const t=this._get("customParameters");JSON.stringify(t)!==JSON.stringify(e)&&this._set("customParameters",e)}get configuration(){return{filter:this.filter,customParameters:this.customParameters,tileInfo:this.tileInfo,tileSize:this.tileSize}}set tileInfo(e){const t=this._get("tileInfo");t!==e&&(Object(o.k)(e)&&Object(o.k)(t)&&JSON.stringify(e)===JSON.stringify(t)||(this._set("tileInfo",e),this.store.tileInfo=e))}set tileSize(e){this._get("tileSize")!==e&&this._set("tileSize",e)}get updating(){return this.updatingHandles.updating||this.pendingEdits.updating}initialize(){this.initializeFetchExtent(),this.updatingHandles.add(this,"configuration",(()=>this.refresh())),this.updatingHandles.add(this,"tilesOfInterest",((e,t)=>{Object(m.c)(e,t,(({id:e},{id:t})=>e===t))||this.process()}),1)}destroy(){this.pendingTiles.forEach((e=>this.deletePendingTile(e))),this.pendingTiles.clear(),this.store.destroy(),this.tilesOfInterest.length=0,this.pendingEditsAbortController.abort(),this.pendingEditsAbortController=null}refresh(){this.store.refresh(),this.pendingTiles.forEach((e=>this.deletePendingTile(e))),this.process()}applyEdits(e){this.pendingEdits.push(e,(async e=>{if(0===e.addedFeatures.length&&0===e.updatedFeatures.length&&0===e.deletedFeatures.length)return;for(const[,r]of this.pendingTiles)r.reset();const t={...e,deletedFeatures:e.deletedFeatures.map((({objectId:e,globalId:t})=>e&&-1!==e?e:this.lookupObjectIdByGlobalId(t)))};await this.updatingHandles.addPromise(this.store.processEdits(t,((e,t)=>this.queryFeaturesById(e,t)),this.pendingEditsAbortController.signal)),this.processPendingTiles()}))}initializeFetchExtent(){if(!this.capabilities.query.supportsExtent)return;const e=Object(a.h)((async e=>{try{var t;const r=await Object(_.executeQueryForExtent)(this.url,new g.a({where:"1=1",outSpatialReference:this.spatialReference,cacheHint:!!this.capabilities.query.supportsCacheHint||void 0}),{query:this.configuration.customParameters,signal:e});this.store.extent=S.a.fromJSON(null==(t=r.data)?void 0:t.extent)}catch(r){Object(a.u)(r),R.warn("Failed to fetch data extent",r)}}));this.updatingHandles.addPromise(e.promise.then((()=>this.process()))),this.handles.add(Object(w.c)((()=>e.abort())))}get debugInfo(){return{numberOfFeatures:this.store.featureStore.numFeatures,tilesOfInterest:this.tilesOfInterest,pendingTiles:Array.from(this.pendingTiles.values()).map((e=>e.debugInfo)),storedTiles:this.store.debugInfo}}process(){this.markTilesNotAlive(),this.createPendingTiles(),this.deletePendingTiles(),this.processPendingTiles()}markTilesNotAlive(){for(const[,e]of this.pendingTiles)e.alive=!1}createPendingTiles(){const e=this.collectMissingTilesInfo();if(this.setAvailability(Object(o.j)(e)?1:e.coveredArea/e.fullArea),!Object(o.j)(e))for(const{data:t,resolution:r}of e.missingTiles){const e=this.pendingTiles.get(t.id);e?(e.resolution=r,e.alive=!0):this.createPendingTile(t,r)}}collectMissingTilesInfo(){let e=null;for(let t=this.tilesOfInterest.length-1;t>=0;t--){const r=this.tilesOfInterest[t],n=this.store.process(r,((e,t)=>this.verifyTileComplexity(e,t)));Object(o.j)(e)?e=n:e.prepend(n)}return e}deletePendingTiles(){for(const[,e]of this.pendingTiles)e.alive||this.deletePendingTile(e)}processPendingTiles(){const e={fetchCount:(e,t)=>this.fetchCount(e,t),fetchFeatures:(e,t,r)=>this.fetchFeatures(e,t,r),finish:(e,t)=>this.finishPendingTile(e,t),resume:()=>this.processPendingTiles()};if(this.ensureFetchAllCounts(e))for(const[,t]of this.pendingTiles)this.verifyTileComplexity(this.store.getFeatureCount(t.data),t.resolution)&&this.updatingHandles.addPromise(t.process(e))}verifyTileComplexity(e,t){return this.verifyVertexComplexity(e)&&this.verifyFeatureDensity(e,t)}verifyVertexComplexity(e){return e*this.minimumVerticesPerFeature<E}verifyFeatureDensity(e,t){if(Object(o.j)(this.tileInfo))return!1;const r=this.tileSize*t;return e*(q/(r*r))<D}ensureFetchAllCounts(e){let t=!0;for(const[,r]of this.pendingTiles)r.state.type<2&&this.updatingHandles.addPromise(r.process(e)),r.state.type<=1&&(t=!1);return t}finishPendingTile(e,t){this.store.add(e.data,t),this.deletePendingTile(e),this.updateAvailability()}updateAvailability(){const e=this.collectMissingTilesInfo();this.setAvailability(Object(o.j)(e)?1:e.coveredArea/e.fullArea)}setAvailability(e){this._set("availability",e)}createPendingTile(e,t){const r=new M(e,t);return this.pendingTiles.set(e.id,r),r}deletePendingTile(e){e.reset(),this.pendingTiles.delete(e.data.id)}async fetchCount(e,t){return this.store.fetchCount(e.data,this.url,this.createCountQuery(e),{query:this.customParameters,timeout:C,signal:t})}async fetchFeatures(e,t,r){let n,i=0,s=0,a=t;for(;;){const c=this.createFeaturesQuery(e),l=this.setPagingParameters(c,i,a),{features:u,exceededTransferLimit:d}=await this.queryFeatures(c,r);if(l&&(i+=Object(o.s)(c.num)),s+=u.length,n=n?n.concat(u):u,a=t-s,!l||!d||a<=0)return n}}filterProperties(e){return Object(o.j)(e)?{where:"1=1",gdbVersion:void 0,timeExtent:void 0}:{where:e.where||"1=1",timeExtent:e.timeExtent,gdbVersion:e.gdbVersion}}lookupObjectIdByGlobalId(e){const t=this.globalIdField,r=this.objectIdField;if(Object(o.j)(t))throw new Error("Expected globalIdField to be defined");let n=null;if(this.store.featureStore.forEach((i=>{var s;e===i.attributes[t]&&(n=null!=(s=i.objectId)?s:i.attributes[r])})),Object(o.j)(n))throw new Error(`Expected to find a feature with globalId ${e}`);return n}queryFeaturesById(e,t){const r=this.createFeaturesQuery(null);return r.objectIds=e,this.queryFeatures(r,t)}queryFeatures(e,t){return this.capabilities.query.supportsFormatPBF?this.queryFeaturesPBF(e,t):this.queryFeaturesJSON(e,t)}async queryFeaturesPBF(e,t){const{sourceSpatialReference:r}=this,{data:n}=await Object(_.executeQueryPBF)(this.url,e,new F.b({sourceSpatialReference:r}),{query:this.configuration.customParameters,timeout:C,signal:t});return Object(T.y)(n)}async queryFeaturesJSON(e,t){const{sourceSpatialReference:r}=this,{data:n}=await Object(_.executeQuery)(this.url,e,r,{query:this.configuration.customParameters,timeout:C,signal:t});return Object(T.b)(n,this.objectIdField)}createCountQuery(e){const t=this.createBaseQuery(e);return this.capabilities.query.supportsCacheHint&&(t.cacheHint=!0),t}createFeaturesQuery(e){const t=this.createBaseQuery(e);return t.outFields=this.globalIdField?[this.globalIdField,this.objectIdField]:[this.objectIdField],t.returnGeometry=!0,Object(o.k)(e)&&(this.capabilities.query.supportsResultType?t.resultType="tile":this.capabilities.query.supportsCacheHint&&(t.cacheHint=!0)),t}createBaseQuery(e){const t=new g.a({returnZ:!1,returnM:!1,geometry:Object(o.k)(this.tileInfo)&&Object(o.k)(e)?Object(x.v)(e.data.extent,this.tileInfo.spatialReference):void 0}),r=this.configuration.filter;return Object(o.k)(r)&&(t.where=r.where,t.gdbVersion=r.gdbVersion,t.timeExtent=r.timeExtent),t.outSpatialReference=this.spatialReference,t}setPagingParameters(e,t,r){if(!this.capabilities.query.supportsPagination)return!1;const{supportsMaxRecordCountFactor:n,supportsCacheHint:i,tileMaxRecordCount:s,maxRecordCount:o,supportsResultType:a}=this.capabilities.query,c=n?g.a.MAX_MAX_RECORD_COUNT_FACTOR:1,l=c*((a||i)&&s?s:o||N);return e.start=t,n?(e.maxRecordCountFactor=Math.min(c,Math.ceil(r/l)),e.num=Math.min(r,e.maxRecordCountFactor*l)):e.num=Math.min(r,l),!0}};Object(n.a)([Object(l.b)({constructOnly:!0})],P.prototype,"url",void 0),Object(n.a)([Object(l.b)({constructOnly:!0})],P.prototype,"objectIdField",void 0),Object(n.a)([Object(l.b)({constructOnly:!0})],P.prototype,"globalIdField",void 0),Object(n.a)([Object(l.b)({constructOnly:!0})],P.prototype,"capabilities",void 0),Object(n.a)([Object(l.b)({constructOnly:!0})],P.prototype,"sourceSpatialReference",void 0),Object(n.a)([Object(l.b)({constructOnly:!0})],P.prototype,"spatialReference",void 0),Object(n.a)([Object(l.b)({constructOnly:!0})],P.prototype,"store",void 0),Object(n.a)([Object(l.b)({readOnly:!0})],P.prototype,"minimumVerticesPerFeature",null),Object(n.a)([Object(l.b)()],P.prototype,"filter",null),Object(n.a)([Object(l.b)()],P.prototype,"customParameters",null),Object(n.a)([Object(l.b)({readOnly:!0})],P.prototype,"configuration",null),Object(n.a)([Object(l.b)()],P.prototype,"tileInfo",null),Object(n.a)([Object(l.b)()],P.prototype,"tileSize",null),Object(n.a)([Object(l.b)()],P.prototype,"tilesOfInterest",void 0),Object(n.a)([Object(l.b)({readOnly:!0})],P.prototype,"updating",null),Object(n.a)([Object(l.b)({readOnly:!0})],P.prototype,"availability",void 0),P=Object(n.a)([Object(d.a)("esri.views.interactive.snapping.featureSources.featureServiceSource.FeatureServiceTiledFetcher")],P);const N=2e3,C=6e5,E=1e6,q=25,D=1;var z=r(536),A=r(1111);class L{constructor(){this._store=new Map,this._byteSize=0}set(e,t){this.delete(e),this._store.set(e,t),this._byteSize+=t.byteSize}delete(e){const t=this._store.get(e);return!!this._store.delete(e)&&(this._byteSize-=t.byteSize,!0)}get(e){return this.used(e),this._store.get(e)}has(e){return this.used(e),this._store.has(e)}clear(){this._store.clear()}applyByteSizeLimit(e,t){for(const[r,n]of this._store){if(this._byteSize<=e)break;this.delete(r),t(n)}}values(){return this._store.values()}[Symbol.iterator](){return this._store[Symbol.iterator]()}used(e){const t=this._store.get(e);t&&(this._store.delete(e),this._store.set(e,t))}}let U=class extends j.a{constructor(e){super(e),this.tileInfo=null,this.extent=null,this.maximumByteSize=10485760,this.tileBounds=new A.a,this.tiles=new L,this.refCounts=new Map,this.tileFeatureCounts=new Map,this.tmpBoundingRect=Object(x.l)()}add(e,t){const r=[];for(const n of t)0===this.referenceFeature(n.objectId)&&r.push(n);this.addTileStorage(e,new Set(t.map((({objectId:e})=>e))),function(e){return e.reduce(((e,t)=>e+function(e){return 32+function(e){if(Object(o.j)(e))return 0;const t=Object(z.b)(e.lengths,4);return 32+Object(z.b)(e.coords,8)+t}(e.geometry)+Object(z.a)(e.attributes)}(t)),0)}(t)),this.featureStore.addMany(r),this.tiles.applyByteSizeLimit(this.maximumByteSize,(e=>this.removeTileStorage(e)))}destroy(){this.clear(),this.tileFeatureCounts.clear()}clear(){this.featureStore.clear(),this.tileBounds.clear(),this.tiles.clear(),this.refCounts.clear()}refresh(){this.clear(),this.tileFeatureCounts.clear()}processEdits(e,t,r){return this.processEditsDelete(e.deletedFeatures.concat(e.updatedFeatures)),this.processEditsRefetch(e.addedFeatures.concat(e.updatedFeatures),t,r)}addTileStorage(e,t,r){this.tiles.set(e.id,new V(e,t,r)),this.tileBounds.set(e.id,e.extent),this.tileFeatureCounts.set(e.id,t.size)}remove({id:e}){const t=this.tiles.get(e);t&&this.removeTileStorage(t)}removeTileStorage(e){const t=[];for(const n of e.objectIds)1===this.unreferenceFeature(n)&&t.push(n);this.featureStore.removeManyById(t);const r=e.data.id;this.tiles.delete(r),this.tileBounds.delete(r)}processEditsDelete(e){this.featureStore.removeManyById(e);for(const[,t]of this.tiles){for(const r of e)t.objectIds.delete(r);this.tileFeatureCounts.set(t.data.id,t.objectIds.size)}for(const t of e)this.refCounts.delete(t)}async processEditsRefetch(e,t,r){const n=(await t(e,r)).features,{hasZ:i,hasM:s}=this.featureStore;for(const a of n){const e=Object(T.r)(this.tmpBoundingRect,a.geometry,i,s);Object(o.j)(e)||this.tileBounds.forEachInBounds(e,(e=>{const t=this.tiles.get(e);this.featureStore.add(a),t.objectIds.has(a.objectId)||(t.objectIds.add(a.objectId),this.referenceFeature(a.objectId),this.tileFeatureCounts.set(t.data.id,t.objectIds.size))}))}}process(e,t=(()=>!0)){if(Object(o.j)(this.tileInfo)||!e.extent||Object(o.k)(this.extent)&&!Object(x.t)(Object(x.q)(this.extent,this.tmpBoundingRect),e.extent))return new B(e);if(this.tiles.has(e.id))return new B(e);const r=this.createTileTree(e,this.tileInfo);return this.simplify(r,t,null,0,1),this.collectMissingTiles(e,r,this.tileInfo)}get debugInfo(){return Array.from(this.tiles.values()).map((({data:e})=>({data:e,featureCount:this.tileFeatureCounts.get(e.id)||0})))}getFeatureCount(e){const t=this.tileFeatureCounts.get(e.id);return null!=t?t:0}async fetchCount(e,t,r,n){const i=this.tileFeatureCounts.get(e.id);if(null!=i)return i;const s=await Object(_.executeQueryForCount)(t,r,n);return this.tileFeatureCounts.set(e.id,s.data.count),s.data.count}createTileTree(e,t){const r=new G(e.level,e.row,e.col);return t.updateTileInfo(r,1),this.tileBounds.forEachInBounds(e.extent,(n=>{const i=this.tiles.get(n).data;this.tilesAreRelated(e,i)&&this.populateChildren(r,i,t,this.tileFeatureCounts.get(i.id)||0)})),r}tilesAreRelated(e,t){if(!e||!t)return!1;if(e.level===t.level)return e.row===t.row&&e.col===t.col;const r=e.level<t.level,n=r?e:t,i=r?t:e,s=1<<i.level-n.level;return Math.floor(i.row/s)===n.row&&Math.floor(i.col/s)===n.col}populateChildren(e,t,r,n){const i=t.level-e.level-1;if(i<0)return void(e.isLeaf=!0);const s=t.row>>i,a=t.col>>i,c=e.row<<1,l=a-(e.col<<1)+(s-c<<1),u=e.children[l];if(Object(o.k)(u))this.populateChildren(u,t,r,n);else{const i=new G(e.level+1,s,a);r.updateTileInfo(i,1),e.children[l]=i,this.populateChildren(i,t,r,n)}}simplify(e,t,r,n,i){const s=i*i;if(e.isLeaf)return t(this.getFeatureCount(e),i)?0:(this.remove(e),Object(o.k)(r)&&(r.children[n]=null),s);const a=i/2,c=a*a;let l=0;for(let u=0;u<e.children.length;u++){const r=e.children[u];l+=Object(o.k)(r)?this.simplify(r,t,e,u,a):c}return 0===l?this.mergeChildren(e):1-l/s<H&&(this.purge(e),Object(o.k)(r)&&(r.children[n]=null),l=s),l}mergeChildren(e){const t=new Set;let r=0;this.forEachLeaf(e,(e=>{const n=this.tiles.get(e.id);if(n){r+=n.byteSize;for(const e of n.objectIds)t.has(e)||(t.add(e),this.referenceFeature(e));this.remove(e)}})),this.addTileStorage(e,t,r),e.isLeaf=!0,e.children[0]=e.children[1]=e.children[2]=e.children[3]=null,this.tileFeatureCounts.set(e.id,t.size)}forEachLeaf(e,t){for(const r of e.children)Object(o.j)(r)||(r.isLeaf?t(r):this.forEachLeaf(r,t))}purge(e){if(!Object(o.j)(e))if(e.isLeaf)this.remove(e);else for(let t=0;t<e.children.length;t++){const r=e.children[t];this.purge(r),e.children[t]=null}}collectMissingTiles(e,t,r){const n=new J(r,e,this.extent);return this.collectMissingTilesRecurse(t,n,1),n.info}collectMissingTilesRecurse(e,t,r){if(e.isLeaf)return;if(!e.hasChildren)return void t.addMissing(e.level,e.row,e.col,r);const n=r/2;for(let i=0;i<e.children.length;i++){const r=e.children[i];Object(o.j)(r)?t.addMissing(e.level+1,(e.row<<1)+((2&i)>>1),(e.col<<1)+(1&i),n):this.collectMissingTilesRecurse(r,t,n)}}referenceFeature(e){const t=(this.refCounts.get(e)||0)+1;return this.refCounts.set(e,t),1===t?0:2}unreferenceFeature(e){const t=(this.refCounts.get(e)||0)-1;return 0===t?(this.refCounts.delete(e),1):(t>0&&this.refCounts.set(e,t),2)}get test(){return{tiles:Array.from(this.tiles.values()).map((e=>`${e.data.id}:[${Array.from(e.objectIds)}]`)),featureReferences:Array.from(this.refCounts.keys()).map((e=>`${e}:${this.refCounts.get(e)}`))}}};Object(n.a)([Object(l.b)({constructOnly:!0})],U.prototype,"featureStore",void 0),Object(n.a)([Object(l.b)()],U.prototype,"tileInfo",void 0),Object(n.a)([Object(l.b)()],U.prototype,"extent",void 0),Object(n.a)([Object(l.b)()],U.prototype,"maximumByteSize",void 0),U=Object(n.a)([Object(d.a)("esri.views.interactive.snapping.featureSources.featureServiceSource.FeatureServiceTileStore")],U);class V{constructor(e,t,r){this.data=e,this.objectIds=t,this.byteSize=r}}class G{constructor(e,t,r){this.level=e,this.row=t,this.col=r,this.isLeaf=!1,this.extent=null,this.children=[null,null,null,null]}get hasChildren(){return!this.isLeaf&&(Object(o.k)(this.children[0])||Object(o.k)(this.children[1])||Object(o.k)(this.children[2])||Object(o.k)(this.children[3]))}}class B{constructor(e,t=[]){this.missingTiles=t,this.fullArea=0,this.coveredArea=0,this.fullArea=Object(x.c)(e.extent),this.coveredArea=this.fullArea}prepend(e){this.missingTiles=e.missingTiles.concat(this.missingTiles),this.coveredArea+=e.coveredArea,this.fullArea+=e.fullArea}}class J{constructor(e,t,r){this.tileInfo=e,this.extent=null,this.info=new B(t),Object(o.k)(r)&&(this.extent=Object(x.q)(r))}addMissing(e,t,r,n){const i={id:null,level:e,row:t,col:r};this.tileInfo.updateTileInfo(i,1),!Object(o.k)(i.extent)||Object(o.k)(this.extent)&&!Object(x.t)(this.extent,i.extent)||(this.info.missingTiles.push({data:i,resolution:n}),this.info.coveredArea-=Object(x.c)(i.extent))}}const H=.18751;var $=r(300);let W=class extends i.a.EventedAccessor{constructor(){super(...arguments),this.isInitializing=!0,this.whenSetup=Object(a.f)(),this.handles=new s.a,this.updatingHandles=new $.a,this.pendingApplyEdits=new Map}get updating(){return this.featureFetcher.updating||this.isInitializing||this.updatingHandles.updating}destroy(){this.featureFetcher.destroy(),this.queryEngine.destroy(),this.featureStore.clear(),this.handles.destroy()}async setup(e){const{geometryType:t,objectIdField:r,timeInfo:n,fields:i}=e.serviceInfo;return this.featureStore=new p.a({...e.serviceInfo,hasZ:!1,hasM:!1}),this.queryEngine=new f.a({spatialReference:e.spatialReference,featureStore:this.featureStore,geometryType:t,fields:i,hasZ:!1,hasM:!1,objectIdField:r,timeInfo:n?y.a.fromJSON(n):null}),this.featureFetcher=new P({store:new U({featureStore:this.featureStore}),url:e.serviceInfo.url,objectIdField:e.serviceInfo.objectIdField,globalIdField:e.serviceInfo.globalIdField,capabilities:e.serviceInfo.capabilities,spatialReference:h.a.fromJSON(e.spatialReference),sourceSpatialReference:h.a.fromJSON(e.serviceInfo.spatialReference)}),this.handles.add([this.featureFetcher.watch("availability",(e=>this.emit("notify-availability",{availability:e})),!0),this.watch("updating",(()=>this.notifyUpdating()))]),this.whenSetup.resolve(),this.isInitializing=!1,this.configure(e.configuration)}async configure(e){return await this.updatingHandles.addPromise(this.whenSetup.promise),this.updateFeatureFetcherConfiguration(e),{result:{}}}async fetchCandidates(e,t){return await this.whenSetup.promise,Object(a.v)(t),{result:await this.queryEngine.executeQueryForSnapping({point:e.point,distance:e.distance,types:e.types,query:Object(o.k)(e.filter)?e.filter:{where:"1=1"}},Object(o.k)(t)?t.signal:null)}}async updateTiles(e,t){return await this.updatingHandles.addPromise(this.whenSetup.promise),Object(a.v)(t),this.featureFetcher.tileSize=e.tileSize,this.featureFetcher.tilesOfInterest=e.tiles,this.featureFetcher.tileInfo=Object(o.k)(e.tileInfo)?b.a.fromJSON(e.tileInfo):null,{result:{}}}async refresh(e,t){return await this.updatingHandles.addPromise(this.whenSetup.promise),Object(a.v)(t),this.featureFetcher.refresh(),{result:{}}}async whenNotUpdating(e,t){return await this.updatingHandles.addPromise(this.whenSetup.promise),Object(a.v)(t),await Object(a.y)(Object(c.i)(this,"updating"),t),{result:{}}}async getDebugInfo(e,t){return Object(a.v)(t),{result:this.featureFetcher.debugInfo}}async beginApplyEdits(e,t){this.updatingHandles.addPromise(this.whenSetup.promise),Object(a.v)(t);const r=Object(a.f)();return this.pendingApplyEdits.set(e.id,r),this.featureFetcher.applyEdits(r.promise),this.updatingHandles.addPromise(r.promise),{result:{}}}async endApplyEdits(e,t){const r=this.pendingApplyEdits.get(e.id);return r&&r.resolve(e.edits),Object(a.v)(t),{result:{}}}updateFeatureFetcherConfiguration(e){this.featureFetcher.filter=Object(o.k)(e.filter)?g.a.fromJSON(e.filter):null,this.featureFetcher.customParameters=e.customParameters}notifyUpdating(){this.emit("notify-updating",{updating:this.updating})}};function Z(){return new W}Object(n.a)([Object(l.b)({readOnly:!0})],W.prototype,"updating",null),Object(n.a)([Object(l.b)()],W.prototype,"isInitializing",void 0),W=Object(n.a)([Object(d.a)("esri.views.interactive.snapping.featureSources.featureServiceSource.FeatureServiceSnappingSourceWorker")],W)},138:function(e,t,r){"use strict";r.d(t,"a",(function(){return O})),r.d(t,"b",(function(){return c})),r.d(t,"c",(function(){return l})),r.d(t,"d",(function(){return f})),r.d(t,"e",(function(){return p})),r.d(t,"f",(function(){return s})),r.d(t,"g",(function(){return h})),r.d(t,"h",(function(){return k})),r.d(t,"i",(function(){return M})),r.d(t,"j",(function(){return a})),r.d(t,"k",(function(){return b})),r.d(t,"l",(function(){return T})),r.d(t,"m",(function(){return _})),r.d(t,"n",(function(){return u})),r.d(t,"o",(function(){return j})),r.d(t,"p",(function(){return F})),r.d(t,"q",(function(){return R})),r.d(t,"r",(function(){return y})),r.d(t,"s",(function(){return o})),r.d(t,"t",(function(){return d})),r.d(t,"u",(function(){return g})),r.d(t,"v",(function(){return S})),r.d(t,"w",(function(){return m})),r.d(t,"x",(function(){return x}));var n=r(101),i=r(171);function s(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function o(e,t,r,n,i,s,o,a,c,l,u,d,h,p,f,b,y){return e[0]=t,e[1]=r,e[2]=n,e[3]=i,e[4]=s,e[5]=o,e[6]=a,e[7]=c,e[8]=l,e[9]=u,e[10]=d,e[11]=h,e[12]=p,e[13]=f,e[14]=b,e[15]=y,e}function a(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function c(e,t){if(e===t){const r=t[1],n=t[2],i=t[3],s=t[6],o=t[7],a=t[11];e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=r,e[6]=t[9],e[7]=t[13],e[8]=n,e[9]=s,e[11]=t[14],e[12]=i,e[13]=o,e[14]=a}else e[0]=t[0],e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=t[1],e[5]=t[5],e[6]=t[9],e[7]=t[13],e[8]=t[2],e[9]=t[6],e[10]=t[10],e[11]=t[14],e[12]=t[3],e[13]=t[7],e[14]=t[11],e[15]=t[15];return e}function l(e,t){const r=t[0],n=t[1],i=t[2],s=t[3],o=t[4],a=t[5],c=t[6],l=t[7],u=t[8],d=t[9],h=t[10],p=t[11],f=t[12],b=t[13],y=t[14],g=t[15],m=r*a-n*o,j=r*c-i*o,O=r*l-s*o,v=n*c-i*a,w=n*l-s*a,S=i*l-s*c,x=u*b-d*f,T=u*y-h*f,F=u*g-p*f,_=d*y-h*b,I=d*g-p*b,M=h*g-p*y;let k=m*M-j*I+O*_+v*F-w*T+S*x;return k?(k=1/k,e[0]=(a*M-c*I+l*_)*k,e[1]=(i*I-n*M-s*_)*k,e[2]=(b*S-y*w+g*v)*k,e[3]=(h*w-d*S-p*v)*k,e[4]=(c*F-o*M-l*T)*k,e[5]=(r*M-i*F+s*T)*k,e[6]=(y*O-f*S-g*j)*k,e[7]=(u*S-h*O+p*j)*k,e[8]=(o*I-a*F+l*x)*k,e[9]=(n*F-r*I-s*x)*k,e[10]=(f*w-b*O+g*m)*k,e[11]=(d*O-u*w-p*m)*k,e[12]=(a*T-o*_-c*x)*k,e[13]=(r*_-n*T+i*x)*k,e[14]=(b*j-f*v-y*m)*k,e[15]=(u*v-d*j+h*m)*k,e):null}function u(e,t,r){const n=t[0],i=t[1],s=t[2],o=t[3],a=t[4],c=t[5],l=t[6],u=t[7],d=t[8],h=t[9],p=t[10],f=t[11],b=t[12],y=t[13],g=t[14],m=t[15];let j=r[0],O=r[1],v=r[2],w=r[3];return e[0]=j*n+O*a+v*d+w*b,e[1]=j*i+O*c+v*h+w*y,e[2]=j*s+O*l+v*p+w*g,e[3]=j*o+O*u+v*f+w*m,j=r[4],O=r[5],v=r[6],w=r[7],e[4]=j*n+O*a+v*d+w*b,e[5]=j*i+O*c+v*h+w*y,e[6]=j*s+O*l+v*p+w*g,e[7]=j*o+O*u+v*f+w*m,j=r[8],O=r[9],v=r[10],w=r[11],e[8]=j*n+O*a+v*d+w*b,e[9]=j*i+O*c+v*h+w*y,e[10]=j*s+O*l+v*p+w*g,e[11]=j*o+O*u+v*f+w*m,j=r[12],O=r[13],v=r[14],w=r[15],e[12]=j*n+O*a+v*d+w*b,e[13]=j*i+O*c+v*h+w*y,e[14]=j*s+O*l+v*p+w*g,e[15]=j*o+O*u+v*f+w*m,e}function d(e,t,r){const n=r[0],i=r[1],s=r[2];let o,a,c,l,u,d,h,p,f,b,y,g;return t===e?(e[12]=t[0]*n+t[4]*i+t[8]*s+t[12],e[13]=t[1]*n+t[5]*i+t[9]*s+t[13],e[14]=t[2]*n+t[6]*i+t[10]*s+t[14],e[15]=t[3]*n+t[7]*i+t[11]*s+t[15]):(o=t[0],a=t[1],c=t[2],l=t[3],u=t[4],d=t[5],h=t[6],p=t[7],f=t[8],b=t[9],y=t[10],g=t[11],e[0]=o,e[1]=a,e[2]=c,e[3]=l,e[4]=u,e[5]=d,e[6]=h,e[7]=p,e[8]=f,e[9]=b,e[10]=y,e[11]=g,e[12]=o*n+u*i+f*s+t[12],e[13]=a*n+d*i+b*s+t[13],e[14]=c*n+h*i+y*s+t[14],e[15]=l*n+p*i+g*s+t[15]),e}function h(e,t,r){const n=r[0],i=r[1],s=r[2];return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e[3]=t[3]*n,e[4]=t[4]*i,e[5]=t[5]*i,e[6]=t[6]*i,e[7]=t[7]*i,e[8]=t[8]*s,e[9]=t[9]*s,e[10]=t[10]*s,e[11]=t[11]*s,e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function p(e,t,r,n){let s,o,a,c,l,u,d,h,p,f,b,y,g,m,j,O,v,w,S,x,T,F,_,I,M=n[0],k=n[1],R=n[2],P=Math.sqrt(M*M+k*k+R*R);return P<i.a?null:(P=1/P,M*=P,k*=P,R*=P,s=Math.sin(r),o=Math.cos(r),a=1-o,c=t[0],l=t[1],u=t[2],d=t[3],h=t[4],p=t[5],f=t[6],b=t[7],y=t[8],g=t[9],m=t[10],j=t[11],O=M*M*a+o,v=k*M*a+R*s,w=R*M*a-k*s,S=M*k*a-R*s,x=k*k*a+o,T=R*k*a+M*s,F=M*R*a+k*s,_=k*R*a-M*s,I=R*R*a+o,e[0]=c*O+h*v+y*w,e[1]=l*O+p*v+g*w,e[2]=u*O+f*v+m*w,e[3]=d*O+b*v+j*w,e[4]=c*S+h*x+y*T,e[5]=l*S+p*x+g*T,e[6]=u*S+f*x+m*T,e[7]=d*S+b*x+j*T,e[8]=c*F+h*_+y*I,e[9]=l*F+p*_+g*I,e[10]=u*F+f*_+m*I,e[11]=d*F+b*_+j*I,t!==e&&(e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e)}function f(e,t,r){const n=Math.sin(r),i=Math.cos(r),s=t[4],o=t[5],a=t[6],c=t[7],l=t[8],u=t[9],d=t[10],h=t[11];return t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[4]=s*i+l*n,e[5]=o*i+u*n,e[6]=a*i+d*n,e[7]=c*i+h*n,e[8]=l*i-s*n,e[9]=u*i-o*n,e[10]=d*i-a*n,e[11]=h*i-c*n,e}function b(e,t,r){const n=Math.sin(r),i=Math.cos(r),s=t[0],o=t[1],a=t[2],c=t[3],l=t[8],u=t[9],d=t[10],h=t[11];return t!==e&&(e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=s*i-l*n,e[1]=o*i-u*n,e[2]=a*i-d*n,e[3]=c*i-h*n,e[8]=s*n+l*i,e[9]=o*n+u*i,e[10]=a*n+d*i,e[11]=c*n+h*i,e}function y(e,t,r){const n=Math.sin(r),i=Math.cos(r),s=t[0],o=t[1],a=t[2],c=t[3],l=t[4],u=t[5],d=t[6],h=t[7];return t!==e&&(e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=s*i+l*n,e[1]=o*i+u*n,e[2]=a*i+d*n,e[3]=c*i+h*n,e[4]=l*i-s*n,e[5]=u*i-o*n,e[6]=d*i-a*n,e[7]=h*i-c*n,e}function g(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=t[0],e[13]=t[1],e[14]=t[2],e[15]=1,e}function m(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=t[1],e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=t[2],e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function j(e,t){const r=Math.sin(t),n=Math.cos(t);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=n,e[6]=r,e[7]=0,e[8]=0,e[9]=-r,e[10]=n,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function O(e,t){const r=Math.sin(t),n=Math.cos(t);return e[0]=n,e[1]=r,e[2]=0,e[3]=0,e[4]=-r,e[5]=n,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function v(e,t,r){const n=t[0],i=t[1],s=t[2],o=t[3],a=n+n,c=i+i,l=s+s,u=n*a,d=n*c,h=n*l,p=i*c,f=i*l,b=s*l,y=o*a,g=o*c,m=o*l;return e[0]=1-(p+b),e[1]=d+m,e[2]=h-g,e[3]=0,e[4]=d-m,e[5]=1-(u+b),e[6]=f+y,e[7]=0,e[8]=h+g,e[9]=f-y,e[10]=1-(u+p),e[11]=0,e[12]=r[0],e[13]=r[1],e[14]=r[2],e[15]=1,e}const w=Object(n.e)();function S(e,t){return e[0]=t[12],e[1]=t[13],e[2]=t[14],e}function x(e,t){const r=t[0],n=t[1],i=t[2],s=t[3],o=r+r,a=n+n,c=i+i,l=r*o,u=n*o,d=n*a,h=i*o,p=i*a,f=i*c,b=s*o,y=s*a,g=s*c;return e[0]=1-d-f,e[1]=u+g,e[2]=h-y,e[3]=0,e[4]=u-g,e[5]=1-l-f,e[6]=p+b,e[7]=0,e[8]=h+y,e[9]=p-b,e[10]=1-l-d,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function T(e,t,r,n,i,s,o){const a=1/(r-t),c=1/(i-n),l=1/(s-o);return e[0]=2*s*a,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=2*s*c,e[6]=0,e[7]=0,e[8]=(r+t)*a,e[9]=(i+n)*c,e[10]=(o+s)*l,e[11]=-1,e[12]=0,e[13]=0,e[14]=o*s*2*l,e[15]=0,e}function F(e,t,r,n,i,s,o){const a=1/(t-r),c=1/(n-i),l=1/(s-o);return e[0]=-2*a,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*c,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*l,e[11]=0,e[12]=(t+r)*a,e[13]=(i+n)*c,e[14]=(o+s)*l,e[15]=1,e}function _(e,t,r,n){let s,o,c,l,u,d,h,p,f,b;const y=t[0],g=t[1],m=t[2],j=n[0],O=n[1],v=n[2],w=r[0],S=r[1],x=r[2];return Math.abs(y-w)<i.a&&Math.abs(g-S)<i.a&&Math.abs(m-x)<i.a?a(e):(h=y-w,p=g-S,f=m-x,b=1/Math.sqrt(h*h+p*p+f*f),h*=b,p*=b,f*=b,s=O*f-v*p,o=v*h-j*f,c=j*p-O*h,b=Math.sqrt(s*s+o*o+c*c),b?(b=1/b,s*=b,o*=b,c*=b):(s=0,o=0,c=0),l=p*c-f*o,u=f*s-h*c,d=h*o-p*s,b=Math.sqrt(l*l+u*u+d*d),b?(b=1/b,l*=b,u*=b,d*=b):(l=0,u=0,d=0),e[0]=s,e[1]=l,e[2]=h,e[3]=0,e[4]=o,e[5]=u,e[6]=p,e[7]=0,e[8]=c,e[9]=d,e[10]=f,e[11]=0,e[12]=-(s*y+o*g+c*m),e[13]=-(l*y+u*g+d*m),e[14]=-(h*y+p*g+f*m),e[15]=1,e)}function I(e,t,r){return e[0]=t[0]-r[0],e[1]=t[1]-r[1],e[2]=t[2]-r[2],e[3]=t[3]-r[3],e[4]=t[4]-r[4],e[5]=t[5]-r[5],e[6]=t[6]-r[6],e[7]=t[7]-r[7],e[8]=t[8]-r[8],e[9]=t[9]-r[9],e[10]=t[10]-r[10],e[11]=t[11]-r[11],e[12]=t[12]-r[12],e[13]=t[13]-r[13],e[14]=t[14]-r[14],e[15]=t[15]-r[15],e}function M(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]&&e[6]===t[6]&&e[7]===t[7]&&e[8]===t[8]&&e[9]===t[9]&&e[10]===t[10]&&e[11]===t[11]&&e[12]===t[12]&&e[13]===t[13]&&e[14]===t[14]&&e[15]===t[15]}function k(e,t){const r=e[0],n=e[1],s=e[2],o=e[3],a=e[4],c=e[5],l=e[6],u=e[7],d=e[8],h=e[9],p=e[10],f=e[11],b=e[12],y=e[13],g=e[14],m=e[15],j=t[0],O=t[1],v=t[2],w=t[3],S=t[4],x=t[5],T=t[6],F=t[7],_=t[8],I=t[9],M=t[10],k=t[11],R=t[12],P=t[13],N=t[14],C=t[15];return Math.abs(r-j)<=i.a*Math.max(1,Math.abs(r),Math.abs(j))&&Math.abs(n-O)<=i.a*Math.max(1,Math.abs(n),Math.abs(O))&&Math.abs(s-v)<=i.a*Math.max(1,Math.abs(s),Math.abs(v))&&Math.abs(o-w)<=i.a*Math.max(1,Math.abs(o),Math.abs(w))&&Math.abs(a-S)<=i.a*Math.max(1,Math.abs(a),Math.abs(S))&&Math.abs(c-x)<=i.a*Math.max(1,Math.abs(c),Math.abs(x))&&Math.abs(l-T)<=i.a*Math.max(1,Math.abs(l),Math.abs(T))&&Math.abs(u-F)<=i.a*Math.max(1,Math.abs(u),Math.abs(F))&&Math.abs(d-_)<=i.a*Math.max(1,Math.abs(d),Math.abs(_))&&Math.abs(h-I)<=i.a*Math.max(1,Math.abs(h),Math.abs(I))&&Math.abs(p-M)<=i.a*Math.max(1,Math.abs(p),Math.abs(M))&&Math.abs(f-k)<=i.a*Math.max(1,Math.abs(f),Math.abs(k))&&Math.abs(b-R)<=i.a*Math.max(1,Math.abs(b),Math.abs(R))&&Math.abs(y-P)<=i.a*Math.max(1,Math.abs(y),Math.abs(P))&&Math.abs(g-N)<=i.a*Math.max(1,Math.abs(g),Math.abs(N))&&Math.abs(m-C)<=i.a*Math.max(1,Math.abs(m),Math.abs(C))}function R(e){const t=i.a,r=e[0],n=e[1],s=e[2],o=e[4],a=e[5],c=e[6],l=e[8],u=e[9],d=e[10];return Math.abs(1-(r*r+o*o+l*l))<=t&&Math.abs(1-(n*n+a*a+u*u))<=t&&Math.abs(1-(s*s+c*c+d*d))<=t}const P=u,N=I;Object.freeze({__proto__:null,copy:s,set:o,identity:a,transpose:c,invert:l,adjoint:function(e,t){const r=t[0],n=t[1],i=t[2],s=t[3],o=t[4],a=t[5],c=t[6],l=t[7],u=t[8],d=t[9],h=t[10],p=t[11],f=t[12],b=t[13],y=t[14],g=t[15];return e[0]=a*(h*g-p*y)-d*(c*g-l*y)+b*(c*p-l*h),e[1]=-(n*(h*g-p*y)-d*(i*g-s*y)+b*(i*p-s*h)),e[2]=n*(c*g-l*y)-a*(i*g-s*y)+b*(i*l-s*c),e[3]=-(n*(c*p-l*h)-a*(i*p-s*h)+d*(i*l-s*c)),e[4]=-(o*(h*g-p*y)-u*(c*g-l*y)+f*(c*p-l*h)),e[5]=r*(h*g-p*y)-u*(i*g-s*y)+f*(i*p-s*h),e[6]=-(r*(c*g-l*y)-o*(i*g-s*y)+f*(i*l-s*c)),e[7]=r*(c*p-l*h)-o*(i*p-s*h)+u*(i*l-s*c),e[8]=o*(d*g-p*b)-u*(a*g-l*b)+f*(a*p-l*d),e[9]=-(r*(d*g-p*b)-u*(n*g-s*b)+f*(n*p-s*d)),e[10]=r*(a*g-l*b)-o*(n*g-s*b)+f*(n*l-s*a),e[11]=-(r*(a*p-l*d)-o*(n*p-s*d)+u*(n*l-s*a)),e[12]=-(o*(d*y-h*b)-u*(a*y-c*b)+f*(a*h-c*d)),e[13]=r*(d*y-h*b)-u*(n*y-i*b)+f*(n*h-i*d),e[14]=-(r*(a*y-c*b)-o*(n*y-i*b)+f*(n*c-i*a)),e[15]=r*(a*h-c*d)-o*(n*h-i*d)+u*(n*c-i*a),e},determinant:function(e){const t=e[0],r=e[1],n=e[2],i=e[3],s=e[4],o=e[5],a=e[6],c=e[7],l=e[8],u=e[9],d=e[10],h=e[11],p=e[12],f=e[13],b=e[14],y=e[15];return(t*o-r*s)*(d*y-h*b)-(t*a-n*s)*(u*y-h*f)+(t*c-i*s)*(u*b-d*f)+(r*a-n*o)*(l*y-h*p)-(r*c-i*o)*(l*b-d*p)+(n*c-i*a)*(l*f-u*p)},multiply:u,translate:d,scale:h,rotate:p,rotateX:f,rotateY:b,rotateZ:y,fromTranslation:g,fromScaling:m,fromRotation:function(e,t,r){let n,s,o,a=r[0],c=r[1],l=r[2],u=Math.sqrt(a*a+c*c+l*l);return u<i.a?null:(u=1/u,a*=u,c*=u,l*=u,n=Math.sin(t),s=Math.cos(t),o=1-s,e[0]=a*a*o+s,e[1]=c*a*o+l*n,e[2]=l*a*o-c*n,e[3]=0,e[4]=a*c*o-l*n,e[5]=c*c*o+s,e[6]=l*c*o+a*n,e[7]=0,e[8]=a*l*o+c*n,e[9]=c*l*o-a*n,e[10]=l*l*o+s,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e)},fromXRotation:j,fromYRotation:function(e,t){const r=Math.sin(t),n=Math.cos(t);return e[0]=n,e[1]=0,e[2]=-r,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=r,e[9]=0,e[10]=n,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},fromZRotation:O,fromRotationTranslation:v,fromQuat2:function(e,t){const r=w,n=-t[0],i=-t[1],s=-t[2],o=t[3],a=t[4],c=t[5],l=t[6],u=t[7],d=n*n+i*i+s*s+o*o;return d>0?(r[0]=2*(a*o+u*n+c*s-l*i)/d,r[1]=2*(c*o+u*i+l*n-a*s)/d,r[2]=2*(l*o+u*s+a*i-c*n)/d):(r[0]=2*(a*o+u*n+c*s-l*i),r[1]=2*(c*o+u*i+l*n-a*s),r[2]=2*(l*o+u*s+a*i-c*n)),v(e,t,r),e},getTranslation:S,getScaling:function(e,t){const r=t[0],n=t[1],i=t[2],s=t[4],o=t[5],a=t[6],c=t[8],l=t[9],u=t[10];return e[0]=Math.sqrt(r*r+n*n+i*i),e[1]=Math.sqrt(s*s+o*o+a*a),e[2]=Math.sqrt(c*c+l*l+u*u),e},getRotation:function(e,t){const r=t[0]+t[5]+t[10];let n=0;return r>0?(n=2*Math.sqrt(r+1),e[3]=.25*n,e[0]=(t[6]-t[9])/n,e[1]=(t[8]-t[2])/n,e[2]=(t[1]-t[4])/n):t[0]>t[5]&&t[0]>t[10]?(n=2*Math.sqrt(1+t[0]-t[5]-t[10]),e[3]=(t[6]-t[9])/n,e[0]=.25*n,e[1]=(t[1]+t[4])/n,e[2]=(t[8]+t[2])/n):t[5]>t[10]?(n=2*Math.sqrt(1+t[5]-t[0]-t[10]),e[3]=(t[8]-t[2])/n,e[0]=(t[1]+t[4])/n,e[1]=.25*n,e[2]=(t[6]+t[9])/n):(n=2*Math.sqrt(1+t[10]-t[0]-t[5]),e[3]=(t[1]-t[4])/n,e[0]=(t[8]+t[2])/n,e[1]=(t[6]+t[9])/n,e[2]=.25*n),e},fromRotationTranslationScale:function(e,t,r,n){const i=t[0],s=t[1],o=t[2],a=t[3],c=i+i,l=s+s,u=o+o,d=i*c,h=i*l,p=i*u,f=s*l,b=s*u,y=o*u,g=a*c,m=a*l,j=a*u,O=n[0],v=n[1],w=n[2];return e[0]=(1-(f+y))*O,e[1]=(h+j)*O,e[2]=(p-m)*O,e[3]=0,e[4]=(h-j)*v,e[5]=(1-(d+y))*v,e[6]=(b+g)*v,e[7]=0,e[8]=(p+m)*w,e[9]=(b-g)*w,e[10]=(1-(d+f))*w,e[11]=0,e[12]=r[0],e[13]=r[1],e[14]=r[2],e[15]=1,e},fromRotationTranslationScaleOrigin:function(e,t,r,n,i){const s=t[0],o=t[1],a=t[2],c=t[3],l=s+s,u=o+o,d=a+a,h=s*l,p=s*u,f=s*d,b=o*u,y=o*d,g=a*d,m=c*l,j=c*u,O=c*d,v=n[0],w=n[1],S=n[2],x=i[0],T=i[1],F=i[2],_=(1-(b+g))*v,I=(p+O)*v,M=(f-j)*v,k=(p-O)*w,R=(1-(h+g))*w,P=(y+m)*w,N=(f+j)*S,C=(y-m)*S,E=(1-(h+b))*S;return e[0]=_,e[1]=I,e[2]=M,e[3]=0,e[4]=k,e[5]=R,e[6]=P,e[7]=0,e[8]=N,e[9]=C,e[10]=E,e[11]=0,e[12]=r[0]+x-(_*x+k*T+N*F),e[13]=r[1]+T-(I*x+R*T+C*F),e[14]=r[2]+F-(M*x+P*T+E*F),e[15]=1,e},fromQuat:x,frustum:T,perspective:function(e,t,r,n,i){const s=1/Math.tan(t/2);let o;return e[0]=s/r,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=s,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=-1,e[12]=0,e[13]=0,e[15]=0,null!=i&&i!==1/0?(o=1/(n-i),e[10]=(i+n)*o,e[14]=2*i*n*o):(e[10]=-1,e[14]=-2*n),e},perspectiveFromFieldOfView:function(e,t,r,n){const i=Math.tan(t.upDegrees*Math.PI/180),s=Math.tan(t.downDegrees*Math.PI/180),o=Math.tan(t.leftDegrees*Math.PI/180),a=Math.tan(t.rightDegrees*Math.PI/180),c=2/(o+a),l=2/(i+s);return e[0]=c,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=l,e[6]=0,e[7]=0,e[8]=-(o-a)*c*.5,e[9]=(i-s)*l*.5,e[10]=n/(r-n),e[11]=-1,e[12]=0,e[13]=0,e[14]=n*r/(r-n),e[15]=0,e},ortho:F,lookAt:_,targetTo:function(e,t,r,n){const i=t[0],s=t[1],o=t[2],a=n[0],c=n[1],l=n[2];let u=i-r[0],d=s-r[1],h=o-r[2],p=u*u+d*d+h*h;p>0&&(p=1/Math.sqrt(p),u*=p,d*=p,h*=p);let f=c*h-l*d,b=l*u-a*h,y=a*d-c*u;return p=f*f+b*b+y*y,p>0&&(p=1/Math.sqrt(p),f*=p,b*=p,y*=p),e[0]=f,e[1]=b,e[2]=y,e[3]=0,e[4]=d*y-h*b,e[5]=h*f-u*y,e[6]=u*b-d*f,e[7]=0,e[8]=u,e[9]=d,e[10]=h,e[11]=0,e[12]=i,e[13]=s,e[14]=o,e[15]=1,e},str:function(e){return"mat4("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+", "+e[8]+", "+e[9]+", "+e[10]+", "+e[11]+", "+e[12]+", "+e[13]+", "+e[14]+", "+e[15]+")"},frob:function(e){return Math.sqrt(e[0]**2+e[1]**2+e[2]**2+e[3]**2+e[4]**2+e[5]**2+e[6]**2+e[7]**2+e[8]**2+e[9]**2+e[10]**2+e[11]**2+e[12]**2+e[13]**2+e[14]**2+e[15]**2)},add:function(e,t,r){return e[0]=t[0]+r[0],e[1]=t[1]+r[1],e[2]=t[2]+r[2],e[3]=t[3]+r[3],e[4]=t[4]+r[4],e[5]=t[5]+r[5],e[6]=t[6]+r[6],e[7]=t[7]+r[7],e[8]=t[8]+r[8],e[9]=t[9]+r[9],e[10]=t[10]+r[10],e[11]=t[11]+r[11],e[12]=t[12]+r[12],e[13]=t[13]+r[13],e[14]=t[14]+r[14],e[15]=t[15]+r[15],e},subtract:I,multiplyScalar:function(e,t,r){return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e[4]=t[4]*r,e[5]=t[5]*r,e[6]=t[6]*r,e[7]=t[7]*r,e[8]=t[8]*r,e[9]=t[9]*r,e[10]=t[10]*r,e[11]=t[11]*r,e[12]=t[12]*r,e[13]=t[13]*r,e[14]=t[14]*r,e[15]=t[15]*r,e},multiplyScalarAndAdd:function(e,t,r,n){return e[0]=t[0]+r[0]*n,e[1]=t[1]+r[1]*n,e[2]=t[2]+r[2]*n,e[3]=t[3]+r[3]*n,e[4]=t[4]+r[4]*n,e[5]=t[5]+r[5]*n,e[6]=t[6]+r[6]*n,e[7]=t[7]+r[7]*n,e[8]=t[8]+r[8]*n,e[9]=t[9]+r[9]*n,e[10]=t[10]+r[10]*n,e[11]=t[11]+r[11]*n,e[12]=t[12]+r[12]*n,e[13]=t[13]+r[13]*n,e[14]=t[14]+r[14]*n,e[15]=t[15]+r[15]*n,e},exactEquals:M,equals:k,isOrthoNormal:R,mul:P,sub:N})},143:function(e,t,r){"use strict";r.d(t,"a",(function(){return F}));var n,i=r(81),s=r(98),o=r(121),a=r(90),c=r(86),l=r(87),u=r(85),d=r(83),h=r(107),p=(r(79),r(80),r(97)),f=r(82),b=r(91),y=r(84),g=r(95),m=r(185),j=r(292),O=r(267),v=r(93),w=r(110);const S=new a.a({esriSpatialRelIntersects:"intersects",esriSpatialRelContains:"contains",esriSpatialRelCrosses:"crosses",esriSpatialRelDisjoint:"disjoint",esriSpatialRelEnvelopeIntersects:"envelope-intersects",esriSpatialRelIndexIntersects:"index-intersects",esriSpatialRelOverlaps:"overlaps",esriSpatialRelTouches:"touches",esriSpatialRelWithin:"within",esriSpatialRelRelation:"relation"}),x=new a.a({esriSRUnit_Meter:"meters",esriSRUnit_Kilometer:"kilometers",esriSRUnit_Foot:"feet",esriSRUnit_StatuteMile:"miles",esriSRUnit_NauticalMile:"nautical-miles",esriSRUnit_USNauticalMile:"us-nautical-miles"});let T=n=class extends c.a{constructor(e){super(e),this.aggregateIds=null,this.cacheHint=void 0,this.datumTransformation=null,this.distance=void 0,this.dynamicDataSource=void 0,this.formatOf3DObjects=null,this.gdbVersion=null,this.geometry=null,this.geometryPrecision=void 0,this.groupByFieldsForStatistics=null,this.having=null,this.historicMoment=null,this.maxAllowableOffset=void 0,this.maxRecordCountFactor=1,this.multipatchOption=null,this.num=void 0,this.objectIds=null,this.orderByFields=null,this.outFields=null,this.outSpatialReference=null,this.outStatistics=null,this.parameterValues=null,this.pixelSize=null,this.quantizationParameters=null,this.rangeValues=null,this.relationParameter=null,this.resultType=null,this.returnCentroid=!1,this.returnDistinctValues=!1,this.returnExceededLimitFeatures=!0,this.returnGeometry=!1,this.returnQueryGeometry=!1,this.returnM=void 0,this.returnZ=void 0,this.sourceSpatialReference=null,this.spatialRelationship="intersects",this.start=void 0,this.sqlFormat=null,this.text=null,this.timeExtent=null,this.timeReferenceUnknownClient=!1,this.units=null,this.where=null}static from(e){return Object(y.d)(n,e)}castDatumTransformation(e){return"number"==typeof e||"object"==typeof e?e:null}writeHistoricMoment(e,t){t.historicMoment=e&&e.getTime()}writeParameterValues(e,t){if(e){const r={};for(const t in e){const n=e[t];Array.isArray(n)?r[t]=n.map((e=>e instanceof Date?e.getTime():e)):n instanceof Date?r[t]=n.getTime():r[t]=n}t.parameterValues=r}}writeStart(e,t){t.resultOffset=this.start,t.resultRecordCount=this.num||10,t.where="1=1"}writeWhere(e,t){t.where=e||"1=1"}clone(){return new n(Object(l.a)({aggregateIds:this.aggregateIds,cacheHint:this.cacheHint,datumTransformation:this.datumTransformation,distance:this.distance,gdbVersion:this.gdbVersion,geometry:this.geometry,geometryPrecision:this.geometryPrecision,groupByFieldsForStatistics:this.groupByFieldsForStatistics,having:this.having,historicMoment:Object(u.k)(this.historicMoment)?new Date(this.historicMoment.getTime()):null,maxAllowableOffset:this.maxAllowableOffset,maxRecordCountFactor:this.maxRecordCountFactor,multipatchOption:this.multipatchOption,num:this.num,objectIds:this.objectIds,orderByFields:this.orderByFields,outFields:this.outFields,outSpatialReference:this.outSpatialReference,outStatistics:this.outStatistics,parameterValues:this.parameterValues,pixelSize:this.pixelSize,quantizationParameters:this.quantizationParameters,rangeValues:this.rangeValues,relationParameter:this.relationParameter,resultType:this.resultType,returnDistinctValues:this.returnDistinctValues,returnGeometry:this.returnGeometry,returnCentroid:this.returnCentroid,returnExceededLimitFeatures:this.returnExceededLimitFeatures,returnQueryGeometry:this.returnQueryGeometry,returnM:this.returnM,returnZ:this.returnZ,dynamicDataSource:this.dynamicDataSource,sourceSpatialReference:this.sourceSpatialReference,spatialRelationship:this.spatialRelationship,start:this.start,sqlFormat:this.sqlFormat,text:this.text,timeExtent:this.timeExtent,timeReferenceUnknownClient:this.timeReferenceUnknownClient,units:this.units,where:this.where}))}};T.MAX_MAX_RECORD_COUNT_FACTOR=5,Object(i.a)([Object(d.b)({json:{write:!0}})],T.prototype,"aggregateIds",void 0),Object(i.a)([Object(d.b)({type:Boolean,json:{write:!0}})],T.prototype,"cacheHint",void 0),Object(i.a)([Object(d.b)({json:{write:!0}})],T.prototype,"datumTransformation",void 0),Object(i.a)([Object(h.a)("datumTransformation")],T.prototype,"castDatumTransformation",null),Object(i.a)([Object(d.b)({type:Number,json:{write:{overridePolicy:e=>({enabled:e>0})}}})],T.prototype,"distance",void 0),Object(i.a)([Object(d.b)({type:m.a,json:{write:!0}})],T.prototype,"dynamicDataSource",void 0),Object(i.a)([Object(d.b)({type:String,json:{write:!0}})],T.prototype,"formatOf3DObjects",void 0),Object(i.a)([Object(d.b)({type:String,json:{write:!0}})],T.prototype,"gdbVersion",void 0),Object(i.a)([Object(d.b)({types:s.a,json:{read:g.a,write:!0}})],T.prototype,"geometry",void 0),Object(i.a)([Object(d.b)({type:Number,json:{write:!0}})],T.prototype,"geometryPrecision",void 0),Object(i.a)([Object(d.b)({type:[String],json:{write:!0}})],T.prototype,"groupByFieldsForStatistics",void 0),Object(i.a)([Object(d.b)({type:String,json:{write:!0}})],T.prototype,"having",void 0),Object(i.a)([Object(d.b)({type:Date})],T.prototype,"historicMoment",void 0),Object(i.a)([Object(b.a)("historicMoment")],T.prototype,"writeHistoricMoment",null),Object(i.a)([Object(d.b)({type:Number,json:{write:!0}})],T.prototype,"maxAllowableOffset",void 0),Object(i.a)([Object(d.b)({type:Number,cast:e=>e<1?1:e>n.MAX_MAX_RECORD_COUNT_FACTOR?n.MAX_MAX_RECORD_COUNT_FACTOR:e,json:{write:{overridePolicy:e=>({enabled:e>1})}}})],T.prototype,"maxRecordCountFactor",void 0),Object(i.a)([Object(d.b)({type:["xyFootprint"],json:{write:!0}})],T.prototype,"multipatchOption",void 0),Object(i.a)([Object(d.b)({type:Number,json:{read:{source:"resultRecordCount"}}})],T.prototype,"num",void 0),Object(i.a)([Object(d.b)({json:{write:!0}})],T.prototype,"objectIds",void 0),Object(i.a)([Object(d.b)({type:[String],json:{write:!0}})],T.prototype,"orderByFields",void 0),Object(i.a)([Object(d.b)({type:[String],json:{write:!0}})],T.prototype,"outFields",void 0),Object(i.a)([Object(d.b)({type:v.a,json:{name:"outSR",write:!0}})],T.prototype,"outSpatialReference",void 0),Object(i.a)([Object(d.b)({type:[O.a],json:{write:{enabled:!0,overridePolicy(){return{enabled:Object(u.k)(this.outStatistics)&&this.outStatistics.length>0}}}}})],T.prototype,"outStatistics",void 0),Object(i.a)([Object(d.b)({json:{write:!0}})],T.prototype,"parameterValues",void 0),Object(i.a)([Object(b.a)("parameterValues")],T.prototype,"writeParameterValues",null),Object(i.a)([Object(d.b)({type:w.a,json:{write:!0}})],T.prototype,"pixelSize",void 0),Object(i.a)([Object(d.b)({type:j.a,json:{write:!0}})],T.prototype,"quantizationParameters",void 0),Object(i.a)([Object(d.b)({type:[Object],json:{write:!0}})],T.prototype,"rangeValues",void 0),Object(i.a)([Object(d.b)({type:String,json:{read:{source:"relationParam"},write:{target:"relationParam",overridePolicy(){return{enabled:"relation"===this.spatialRelationship}}}}})],T.prototype,"relationParameter",void 0),Object(i.a)([Object(d.b)({type:String,json:{write:!0}})],T.prototype,"resultType",void 0),Object(i.a)([Object(d.b)({type:Boolean,json:{default:!1,write:!0}})],T.prototype,"returnCentroid",void 0),Object(i.a)([Object(d.b)({type:Boolean,json:{default:!1,write:!0}})],T.prototype,"returnDistinctValues",void 0),Object(i.a)([Object(d.b)({type:Boolean,json:{default:!0,write:!0}})],T.prototype,"returnExceededLimitFeatures",void 0),Object(i.a)([Object(d.b)({type:Boolean,json:{write:!0}})],T.prototype,"returnGeometry",void 0),Object(i.a)([Object(d.b)({type:Boolean,json:{default:!1,write:!0}})],T.prototype,"returnQueryGeometry",void 0),Object(i.a)([Object(d.b)({type:Boolean,json:{default:!1,write:!0}})],T.prototype,"returnM",void 0),Object(i.a)([Object(d.b)({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],T.prototype,"returnZ",void 0),Object(i.a)([Object(d.b)({type:v.a,json:{write:!0}})],T.prototype,"sourceSpatialReference",void 0),Object(i.a)([Object(p.a)(S,{ignoreUnknown:!1,name:"spatialRel"})],T.prototype,"spatialRelationship",void 0),Object(i.a)([Object(d.b)({type:Number,json:{read:{source:"resultOffset"}}})],T.prototype,"start",void 0),Object(i.a)([Object(b.a)("start"),Object(b.a)("num")],T.prototype,"writeStart",null),Object(i.a)([Object(d.b)({type:String,json:{write:!0}})],T.prototype,"sqlFormat",void 0),Object(i.a)([Object(d.b)({type:String,json:{write:!0}})],T.prototype,"text",void 0),Object(i.a)([Object(d.b)({type:o.a,json:{write:!0}})],T.prototype,"timeExtent",void 0),Object(i.a)([Object(d.b)({type:Boolean,json:{default:!1,write:!0}})],T.prototype,"timeReferenceUnknownClient",void 0),Object(i.a)([Object(p.a)(x,{ignoreUnknown:!1}),Object(d.b)({json:{write:{overridePolicy(e){return{enabled:e&&this.distance>0}}}}})],T.prototype,"units",void 0),Object(i.a)([Object(d.b)({type:String,json:{write:{overridePolicy(e){return{enabled:null!=e||this.start>0}}}}})],T.prototype,"where",void 0),Object(i.a)([Object(b.a)("where")],T.prototype,"writeWhere",null),T=n=Object(i.a)([Object(f.a)("esri.rest.support.Query")],T);var F=T},154:function(e,t,r){"use strict";r.d(t,"a",(function(){return y}));var n,i=r(81),s=r(90),o=r(86),a=r(83),c=(r(79),r(84)),l=(r(80),r(97)),u=r(94),d=r(82),h=r(164),p=r(250);const f=new s.a({binary:"binary",coordinate:"coordinate",countOrAmount:"count-or-amount",dateAndTime:"date-and-time",description:"description",locationOrPlaceName:"location-or-place-name",measurement:"measurement",nameOrTitle:"name-or-title",none:"none",orderedOrRanked:"ordered-or-ranked",percentageOrRatio:"percentage-or-ratio",typeOrCategory:"type-or-category",uniqueIdentifier:"unique-identifier"});let b=n=class extends o.a{constructor(e){super(e),this.alias=null,this.defaultValue=void 0,this.description=null,this.domain=null,this.editable=!0,this.length=-1,this.name=null,this.nullable=!0,this.type=null,this.valueType=null}readDescription(e,{description:t}){let r;try{r=JSON.parse(t)}catch(n){}return r?r.value:null}readValueType(e,{description:t}){let r;try{r=JSON.parse(t)}catch(n){}return r?f.fromJSON(r.fieldValueType):null}clone(){return new n({alias:this.alias,defaultValue:this.defaultValue,description:this.description,domain:this.domain&&this.domain.clone()||null,editable:this.editable,length:this.length,name:this.name,nullable:this.nullable,type:this.type,valueType:this.valueType})}};Object(i.a)([Object(a.b)({type:String,json:{write:!0}})],b.prototype,"alias",void 0),Object(i.a)([Object(a.b)({type:[String,Number],json:{write:{allowNull:!0}}})],b.prototype,"defaultValue",void 0),Object(i.a)([Object(a.b)()],b.prototype,"description",void 0),Object(i.a)([Object(u.a)("description")],b.prototype,"readDescription",null),Object(i.a)([Object(a.b)({types:h.d,json:{read:{reader:h.b},write:!0}})],b.prototype,"domain",void 0),Object(i.a)([Object(a.b)({type:Boolean,json:{write:!0}})],b.prototype,"editable",void 0),Object(i.a)([Object(a.b)({type:c.a,json:{write:!0}})],b.prototype,"length",void 0),Object(i.a)([Object(a.b)({type:String,json:{write:!0}})],b.prototype,"name",void 0),Object(i.a)([Object(a.b)({type:Boolean,json:{write:!0}})],b.prototype,"nullable",void 0),Object(i.a)([Object(l.a)(p.a)],b.prototype,"type",void 0),Object(i.a)([Object(a.b)()],b.prototype,"valueType",void 0),Object(i.a)([Object(u.a)("valueType",["description"])],b.prototype,"readValueType",null),b=n=Object(i.a)([Object(d.a)("esri.layers.support.Field")],b);var y=b},156:function(e,t,r){"use strict";r.d(t,"a",(function(){return u})),r.d(t,"b",(function(){return l}));var n=r(81),i=r(92),s=r(117),o=r(83),a=r(82),c=r(300);const l=e=>{let t=class extends e{destroy(){this.destroyed||(this.handles.destroy(),this.updatingHandles.destroy())}get handles(){return this._get("handles")||new s.a}get updatingHandles(){return this._get("updatingHandles")||new c.a}};return Object(n.a)([Object(o.b)({readOnly:!0})],t.prototype,"handles",null),Object(n.a)([Object(o.b)({readOnly:!0})],t.prototype,"updatingHandles",null),t=Object(n.a)([Object(a.a)("esri.core.HandleOwner")],t),t};let u=class extends(l(i.a)){};u=Object(n.a)([Object(a.a)("esri.core.HandleOwner")],u)},157:function(e,t,r){"use strict";r.d(t,"a",(function(){return s})),r.d(t,"b",(function(){return o})),r.d(t,"c",(function(){return a})),r.d(t,"d",(function(){return c}));var n=r(85),i=r(89);function s(e,t,r){return Object(i.j)(e.map(((e,n)=>t.apply(r,[e,n]))))}function o(e,t,r){return Object(i.j)(e.map(((e,n)=>t.apply(r,[e,n])))).then((e=>e.map((e=>e.value))))}function a(e){return Object(n.j)(e)?Object(i.t)():e.then((e=>({ok:!0,value:e}))).catch((e=>({ok:!1,error:e})))}function c(e){return e.then((e=>({ok:!0,value:e}))).catch((e=>(Object(i.u)(e),{ok:!1,error:e})))}},159:function(e,t,r){"use strict";r.d(t,"a",(function(){return a})),r.d(t,"b",(function(){return s})),r.d(t,"c",(function(){return o}));r(79);const n={milliseconds:1,seconds:1e3,minutes:6e4,hours:36e5,days:864e5,weeks:6048e5,months:26784e5,years:31536e6,decades:31536e7,centuries:31536e8},i={milliseconds:{getter:"getMilliseconds",setter:"setMilliseconds",multiplier:1},seconds:{getter:"getSeconds",setter:"setSeconds",multiplier:1},minutes:{getter:"getMinutes",setter:"setMinutes",multiplier:1},hours:{getter:"getHours",setter:"setHours",multiplier:1},days:{getter:"getDate",setter:"setDate",multiplier:1},weeks:{getter:"getDate",setter:"setDate",multiplier:7},months:{getter:"getMonth",setter:"setMonth",multiplier:1},years:{getter:"getFullYear",setter:"setFullYear",multiplier:1},decades:{getter:"getFullYear",setter:"setFullYear",multiplier:10},centuries:{getter:"getFullYear",setter:"setFullYear",multiplier:100}};function s(e,t,r){const n=new Date(e.getTime());if(t&&r){const e=i[r],{getter:s,setter:o,multiplier:a}=e;n[o](n[s]()+t*a)}return n}function o(e,t){switch(t){case"milliseconds":return new Date(e.getTime());case"seconds":return new Date(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds());case"minutes":return new Date(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes());case"hours":return new Date(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours());case"days":return new Date(e.getFullYear(),e.getMonth(),e.getDate());case"weeks":return new Date(e.getFullYear(),e.getMonth(),e.getDate()-e.getDay());case"months":return new Date(e.getFullYear(),e.getMonth(),1);case"years":return new Date(e.getFullYear(),0,1);case"decades":return new Date(e.getFullYear()-e.getFullYear()%10,0,1);case"centuries":return new Date(e.getFullYear()-e.getFullYear()%100,0,1);default:return new Date}}function a(e,t,r){return 0===e?0:e*n[t]/n[r]}},165:function(e,t,r){"use strict";r.d(t,"a",(function(){return J})),r.d(t,"b",(function(){return X})),r.d(t,"c",(function(){return H})),r.d(t,"d",(function(){return Z})),r.d(t,"e",(function(){return $})),r.d(t,"f",(function(){return V})),r.d(t,"g",(function(){return U})),r.d(t,"h",(function(){return z})),r.d(t,"i",(function(){return W})),r.d(t,"j",(function(){return Y})),r.d(t,"k",(function(){return Q})),r.d(t,"l",(function(){return N})),r.d(t,"m",(function(){return w})),r.d(t,"n",(function(){return A})),r.d(t,"o",(function(){return q})),r.d(t,"p",(function(){return de})),r.d(t,"q",(function(){return ne})),r.d(t,"r",(function(){return oe})),r.d(t,"s",(function(){return ue})),r.d(t,"t",(function(){return te})),r.d(t,"u",(function(){return re})),r.d(t,"v",(function(){return m})),r.d(t,"w",(function(){return j})),r.d(t,"x",(function(){return ce})),r.d(t,"y",(function(){return ee})),r.d(t,"z",(function(){return ae}));var n=r(88),i=r(80),s=r(85),o=r(95),a=r(237),c=r(279),l=r(167);function u(e,t){return e?t?4:3:t?3:2}const d=i.a.getLogger("esri.tasks.support.optimizedFeatureSet"),h={esriGeometryPoint:0,esriGeometryPolyline:2,esriGeometryPolygon:3,esriGeometryMultipoint:0},p=(e,t,r,n,i,s)=>{e[r]=i,e[r+1]=s},f=(e,t,r,n,i,s)=>{e[r]=i,e[r+1]=s,e[r+2]=t[n+2]},b=(e,t,r,n,i,s)=>{e[r]=i,e[r+1]=s,e[r+2]=t[n+3]},y=(e,t,r,n,i,s)=>{e[r]=i,e[r+1]=s,e[r+2]=t[n+2],e[r+3]=t[n+3]};function g(e,t,r,n){if(e){if(r)return t&&n?y:f;if(t&&n)return b}else if(t&&n)return f;return p}function m({scale:e,translate:t},r){return Math.round((r-t[0])/e[0])}function j({scale:e,translate:t},r){return Math.round((t[1]-r)/e[1])}function O({scale:e,translate:t},r){return r*e[0]+t[0]}function v({scale:e,translate:t},r){return t[1]-r*e[1]}function w(e,t,r){return e?t?r?M(e):T(e):r?_(e):S(e):null}function S(e){const t=e.coords;return{x:t[0],y:t[1]}}function x(e,t){return e.coords[0]=t.x,e.coords[1]=t.y,e}function T(e){const t=e.coords;return{x:t[0],y:t[1],z:t[2]}}function F(e,t){return e.coords[0]=t.x,e.coords[1]=t.y,e.coords[2]=t.z,e}function _(e){const t=e.coords;return{x:t[0],y:t[1],m:t[2]}}function I(e,t){return e.coords[0]=t.x,e.coords[1]=t.y,e.coords[2]=t.m,e}function M(e){const t=e.coords;return{x:t[0],y:t[1],z:t[2],m:t[3]}}function k(e,t){return e.coords[0]=t.x,e.coords[1]=t.y,e.coords[2]=t.z,e.coords[3]=t.m,e}function R(e,t){return e&&t?k:e?F:t?I:x}function P(e,t,r,n,i){const s=R(r,n);for(const o of t){const{geometry:t,attributes:r}=o;let n;t&&(n=s(new l.a,t)),e.push(new a.b(n,r,null,r[i]))}return e}function N(e,t,r){if(Object(s.j)(e))return null;const n=u(t,r),i=[];for(let s=0;s<e.coords.length;s+=n){const t=[];for(let r=0;r<n;r++)t.push(e.coords[s+r]);i.push(t)}return t?r?{points:i,hasZ:t,hasM:r}:{points:i,hasZ:t}:r?{points:i,hasM:r}:{points:i}}function C(e,t,r,n,i){const s=u(r,n);for(const o of t){const t=o.geometry,r=o.attributes;let n;t&&(n=E(new l.a,t,s)),e.push(new a.b(n,r,null,r[i]))}return e}function E(e,t,r=u(t.hasZ,t.hasM)){e.lengths[0]=t.points.length;const n=e.coords;let i=0;for(const s of t.points)for(let e=0;e<r;e++)n[i++]=s[e];return e}function q(e,t,r){if(!e)return null;const n=u(t,r),{coords:i,lengths:s}=e,o=[];let a=0;for(const c of s){const e=[];for(let t=0;t<c;t++){const t=[];for(let e=0;e<n;e++)t.push(i[a++]);e.push(t)}o.push(e)}return t?r?{paths:o,hasZ:t,hasM:r}:{paths:o,hasZ:t}:r?{paths:o,hasM:r}:{paths:o}}function D(e,t,r,n,i){const s=u(r,n);for(const o of t){const t=o.geometry,r=o.attributes;let n;t&&(n=z(new l.a,t,s)),e.push(new a.b(n,r,null,r[i]))}return e}function z(e,t,r=u(t.hasZ,t.hasM)){const{lengths:n,coords:i}=e;let s=0;for(const o of t.paths){for(const e of o)for(let t=0;t<r;t++)i[s++]=e[t];n.push(o.length)}return e}function A(e,t,r){if(!e)return null;const n=u(t,r),{coords:i,lengths:s}=e,o=[];let a=0;for(const c of s){const e=[];for(let t=0;t<c;t++){const t=[];for(let e=0;e<n;e++)t.push(i[a++]);e.push(t)}o.push(e)}return t?r?{rings:o,hasZ:t,hasM:r}:{rings:o,hasZ:t}:r?{rings:o,hasM:r}:{rings:o}}function L(e,t,r,n,i){for(const o of t){const t=o.geometry,c=o.centroid,u=o.attributes;let d;t&&(d=U(new l.a,t,r,n)),Object(s.k)(c)?e.push(new a.b(d,u,x(new l.a,c),u[i])):e.push(new a.b(d,u,null,u[i]))}return e}function U(e,t,r=t.hasZ,n=t.hasM){return V(e,t.rings,r,n),e}function V(e,t,r,n){const i=u(r,n),{lengths:s,coords:o}=e;let a=0;s.length=o.length=0;for(const c of t){for(const e of c)for(let t=0;t<i;t++)o[a++]=e[t];s.push(c.length)}return e}const G=[],B=[];function J(e,t,r,n,i){G[0]=e;const[s]=H(B,G,t,r,n,i);return G.length=B.length=0,s}function H(e,t,r,i,s,o){if(e.length=0,!r){for(const r of t){const t=r.attributes[o];e.push(new a.b(null,r.attributes,null,t))}return e}switch(r){case"esriGeometryPoint":return P(e,t,i,s,o);case"esriGeometryMultipoint":return C(e,t,i,s,o);case"esriGeometryPolyline":return D(e,t,i,s,o);case"esriGeometryPolygon":return L(e,t,i,s,o);default:d.error("convertToFeatureSet:unknown-geometry",new n.a(`Unable to parse unknown geometry type '${r}'`)),e.length=0}return e}function $(e,t,r,i,s,o){const a=e.length;switch(r){case"esriGeometryPoint":P(e,t,i,s,o);break;case"esriGeometryMultipoint":C(e,t,i,s,o);break;case"esriGeometryPolyline":D(e,t,i,s,o);break;case"esriGeometryPolygon":L(e,t,i,s,o);break;default:d.error("convertToFeatureSet:unknown-geometry",new n.a(`Unable to parse unknown geometry type '${r}'`))}for(let n=0;n<t.length;n++)e[n+a].geometryType=r,e[n+a].insertAfter=t[n].insertAfter,e[n+a].groupId=t[n].groupId;return e}function W(e,t,r,n){B[0]=e,K(G,B,t,r,n);const i=G[0];return G.length=B.length=0,i}function Z(e,t,r){if(Object(s.j)(e))return null;const i=new l.a;return"hasZ"in e&&null==t&&(t=e.hasZ),"hasM"in e&&null==r&&(r=e.hasM),Object(o.f)(e)?R(null!=t?t:null!=e.z,null!=r?r:null!=e.m)(i,e):Object(o.g)(e)?U(i,e,t,r):Object(o.h)(e)?z(i,e,u(t,r)):Object(o.e)(e)?E(i,e,u(t,r)):void d.error("convertFromGeometry:unknown-geometry",new n.a(`Unable to parse unknown geometry type '${e}'`))}function Q(e,t,r,i){const o=e&&("coords"in e?e:e.geometry);if(Object(s.j)(o))return null;switch(t){case"esriGeometryPoint":{let e=S;return r&&i?e=M:r?e=T:i&&(e=_),e(o)}case"esriGeometryMultipoint":return N(o,r,i);case"esriGeometryPolyline":return q(o,r,i);case"esriGeometryPolygon":return A(o,r,i);default:return void d.error("convertToGeometry:unknown-geometry",new n.a(`Unable to parse unknown geometry type '${t}'`))}}function K(e,t,r,i,o){if(e.length=0,Object(s.j)(r))return function(e,t){for(const r of t)e.push({attributes:r.attributes});return e}(e,t);switch(r){case"esriGeometryPoint":return function(e,t,r,n){let i=S;r&&n?i=M:r?i=T:n&&(i=_);for(const o of t){const{geometry:t,attributes:r}=o,n=Object(s.k)(t)?i(t):null;e.push({attributes:r,geometry:n})}return e}(e,t,i,o);case"esriGeometryMultipoint":return function(e,t,r,n){for(const i of t){const{geometry:t,attributes:s}=i;let o;t&&(o=N(t,r,n)),e.push({attributes:s,geometry:o})}return e}(e,t,i,o);case"esriGeometryPolyline":return function(e,t,r,n){for(const i of t){const{geometry:t,attributes:o}=i;let a;Object(s.k)(t)&&(a=q(t,r,n)),e.push({attributes:o,geometry:a})}return e}(e,t,i,o);case"esriGeometryPolygon":return function(e,t,r,n){for(const i of t){const{geometry:t,attributes:o,centroid:a}=i;let c;if(Object(s.k)(t)&&(c=A(t,r,n)),a){const t=S(a);e.push({attributes:o,centroid:t,geometry:c})}else e.push({attributes:o,geometry:c})}return e}(e,t,i,o);default:d.error("convertToFeatureSet:unknown-geometry",new n.a(`Unable to parse unknown geometry type '${r}'`))}return e}function Y(e){const{objectIdFieldName:t,spatialReference:r,transform:n,fields:i,hasM:s,hasZ:o,features:a,geometryType:c,exceededTransferLimit:l,uniqueIdField:u,queryGeometry:d,queryGeometryType:h}=e,p={features:K([],a,c,o,s),fields:i,geometryType:c,objectIdFieldName:t,spatialReference:r,uniqueIdField:u,queryGeometry:Q(d,h,!1,!1)};return n&&(p.transform=n),l&&(p.exceededTransferLimit=l),s&&(p.hasM=s),o&&(p.hasZ=o),p}function X(e,t){const r=new c.a,{hasM:i,hasZ:s,features:o,objectIdFieldName:a,spatialReference:l,geometryType:u,exceededTransferLimit:h,transform:p,fields:f}=e;return f&&(r.fields=f),r.geometryType=u,r.objectIdFieldName=a||t,r.spatialReference=l,r.objectIdFieldName?(o&&H(r.features,o,u,s,i,r.objectIdFieldName),h&&(r.exceededTransferLimit=h),i&&(r.hasM=i),s&&(r.hasZ=s),p&&(r.transform=p),r):(d.error(new n.a("optimized-features:invalid-objectIdFieldName","objectIdFieldName is missing")),r)}function ee(e){const{transform:t,features:r,hasM:n,hasZ:i}=e;if(!t)return e;for(const o of r)Object(s.k)(o.geometry)&&ae(o.geometry,o.geometry,n,i,t),o.centroid&&ae(o.centroid,o.centroid,n,i,t);return e.transform=null,e}function te(e,t){const{geometryType:r,features:n,hasM:i,hasZ:s}=t;if(!e)return t;for(let o=0;o<n.length;o++){const t=n[o],a=t.weakClone();a.geometry=new l.a,re(a.geometry,t.geometry,i,s,r,e),t.centroid&&(a.centroid=new l.a,re(a.centroid,t.centroid,i,s,"esriGeometryPoint",e)),n[o]=a}return t.transform=e,t}function re(e,t,r,n,i,o,a=r,c=n){if(e.lengths.length&&(e.lengths.length=0),e.coords.length&&(e.coords.length=0),Object(s.j)(t)||!t.coords.length)return null;const l=h[i],{coords:d,lengths:p}=t,f=u(r,n),b=u(r&&a,n&&c),y=g(r,n,a,c);if(!p.length)return y(e.coords,d,0,0,m(o,d[0]),j(o,d[1])),e.lengths.length&&(e.lengths.length=0),e.coords.length=f,e;let O,v,w,S,x=0,T=0,F=T;for(const s of p){if(s<l)continue;let t=0;T=F,w=O=m(o,d[x]),S=v=j(o,d[x+1]),y(e.coords,d,T,x,w,S),t++,x+=f,T+=b;for(let r=1;r<s;r++,x+=f)w=m(o,d[x]),S=j(o,d[x+1]),w===O&&S===v||(y(e.coords,d,T,x,w-O,S-v),T+=b,t++,O=w,v=S);t>=l&&(e.lengths.push(t),F=T)}return e.coords.length=F,e.coords.length?e:null}function ne(e,t,r,n,i,s,o=r,a=n){if(e.lengths.length&&(e.lengths.length=0),e.coords.length&&(e.coords.length=0),!t||!t.coords.length)return null;const c=h[i],{coords:l,lengths:d}=t,p=u(r,n),f=u(r&&o,n&&a),b=g(r,n,o,a);if(!d.length)return b(e.coords,l,0,0,l[0],l[1]),e.lengths.length&&(e.lengths.length=0),e.coords.length=p,e;let y=0;const m=s*s;for(const u of d){if(u<c){y+=u*p;continue}const t=e.coords.length/f,r=y,n=y+(u-1)*p;b(e.coords,l,e.coords.length,r,l[r],l[r+1]),se(e.coords,l,p,m,b,r,n),b(e.coords,l,e.coords.length,n,l[n],l[n+1]);const i=e.coords.length/f-t;i>=c?e.lengths.push(i):e.coords.length=t*f,y+=u*p}return e.coords.length?e:null}function ie(e,t,r,n){const i=e[t],s=e[t+1],o=e[r],a=e[r+1],c=e[n],l=e[n+1];let u=o,d=a,h=c-u,p=l-d;if(0!==h||0!==p){const e=((i-u)*h+(s-d)*p)/(h*h+p*p);e>1?(u=c,d=l):e>0&&(u+=h*e,d+=p*e)}return h=i-u,p=s-d,h*h+p*p}function se(e,t,r,n,i,s,o){let a,c=n,l=0;for(let u=s+r;u<o;u+=r)a=ie(t,u,s,o),a>c&&(l=u,c=a);c>n&&(l-s>r&&se(e,t,r,n,i,s,l),i(e,t,e.length,l,t[l],t[l+1]),o-l>r&&se(e,t,r,n,i,l,o))}function oe(e,t,r,n){if(Object(s.j)(t)||!t.coords||!t.coords.length)return null;const i=u(r,n);let o=Number.POSITIVE_INFINITY,a=Number.POSITIVE_INFINITY,c=Number.NEGATIVE_INFINITY,l=Number.NEGATIVE_INFINITY;if(t&&t.coords){const e=t.coords;for(let t=0;t<e.length;t+=i){const r=e[t],n=e[t+1];o=Math.min(o,r),c=Math.max(c,r),a=Math.min(a,n),l=Math.max(l,n)}}return e[0]=o,e[1]=a,e[2]=c,e[3]=l,e}function ae(e,t,r,n,i){const{coords:s,lengths:o}=t,a=r?n?y:f:n?f:p,c=u(r,n);if(!s.length)return e!==t&&(e.lengths.length=0,e.coords.length=0),e;if(!o.length)return a(e.coords,s,0,0,O(i,s[0]),v(i,s[1])),e!==t&&(e.lengths.length=0,e.coords.length=c),e;const[l,d]=i.scale;let h=0;for(let u=0;u<o.length;u++){const t=o[u];e.lengths[u]=t;let r=O(i,s[h]),n=v(i,s[h+1]);a(e.coords,s,h,h,r,n),h+=c;for(let i=1;i<t;i++,h+=c)r+=s[h]*l,n-=s[h+1]*d,a(e.coords,s,h,h,r,n)}return e!==t&&(e.lengths.length=o.length,e.coords.length=s.length),e}function ce(e,t,r,n,i,s){const o=u(r,n),a=g(r,n,i,s),c=t.coords;e.coords.length=0,e.lengths.length=0,e.lengths.push(...t.lengths);for(let l=0;l<c.length;l+=o)a(e.coords,c,e.coords.length,l,c[l],c[l+1]);return e}function le(e,t,r,n){let i=0,s=e[n*t],o=e[n*(t+1)];for(let a=1;a<r;a++){const r=s+e[n*(t+a)],c=o+e[n*(t+a)+1],l=(r-s)*(c+o);s=r,o=c,i+=l}return.5*i}function ue(e,t){const{coords:r,lengths:n}=e;let i=0,s=0;for(let o=0;o<n.length;o++)s+=le(r,i,n[o],t),i+=o;return Math.abs(s)}function de(e,t){if(Object(s.j)(e))return null;const r=e.clone(),n=e.coords,i=e.lengths;let o=0;for(let s=0;s<i.length;s++){const e=i[s];let a=n[t*o],c=n[t*o+1];for(let i=1;i<e;i++){const e=a+n[t*(o+i)],s=c+n[t*(o+i)+1];r.coords[t*(o+i)]=e,r.coords[t*(o+i)+1]=s,a=e,c=s}o+=e}return r}},167:function(e,t,r){"use strict";r.d(t,"a",(function(){return n}));class n{constructor(e=[],t=[],r=!1){this.lengths=null!=e?e:[],this.coords=null!=t?t:[],this.hasIndeterminateRingOrder=r}get isPoint(){return 0===this.lengths.length}get maxLength(){return Math.max(...this.lengths)}get size(){return this.lengths.reduce(((e,t)=>e+t))}forEachVertex(e){let t=0;this.lengths.length||e(this.coords[0],this.coords[1]);for(let r=0;r<this.lengths.length;r++){const n=this.lengths[r];for(let r=0;r<n;r++)e(this.coords[2*(r+t)],this.coords[2*(r+t)+1]);t+=n}}clone(e){return e?(e.set(this.coords),new n(this.lengths.slice(),e,this.hasIndeterminateRingOrder)):new n(this.lengths.slice(),this.coords.slice(),this.hasIndeterminateRingOrder)}}},182:function(e,t,r){"use strict";r.d(t,"a",(function(){return i}));var n=r(90);const i=Object(n.b)()({esriTimeUnitsMilliseconds:"milliseconds",esriTimeUnitsSeconds:"seconds",esriTimeUnitsMinutes:"minutes",esriTimeUnitsHours:"hours",esriTimeUnitsDays:"days",esriTimeUnitsWeeks:"weeks",esriTimeUnitsMonths:"months",esriTimeUnitsYears:"years",esriTimeUnitsDecades:"decades",esriTimeUnitsCenturies:"centuries",esriTimeUnitsUnknown:void 0})},185:function(e,t,r){"use strict";r.d(t,"a",(function(){return P}));var n,i=r(81),s=r(90),o=r(86),a=r(83),c=(r(79),r(107)),l=(r(80),r(97)),u=r(94),d=r(82),h=r(84),p=r(188),f=r(154),b=r(290),y=(r(98),r(93)),g=r(172);let m=n=class extends o.a{constructor(e){super(e),this.type="query-table"}clone(){var e;const{workspaceId:t,query:r,oidFields:i,spatialReference:s,geometryType:o}=this,a={workspaceId:t,query:r,oidFields:i,spatialReference:null!=(e=null==s?void 0:s.clone())?e:void 0,geometryType:o};return new n(a)}};var j;Object(i.a)([Object(l.a)({queryTable:"query-table"})],m.prototype,"type",void 0),Object(i.a)([Object(a.b)({type:String,json:{write:!0}})],m.prototype,"workspaceId",void 0),Object(i.a)([Object(a.b)({type:String,json:{write:!0}})],m.prototype,"query",void 0),Object(i.a)([Object(a.b)({type:String,json:{write:!0}})],m.prototype,"oidFields",void 0),Object(i.a)([Object(a.b)({type:y.a,json:{write:!0}})],m.prototype,"spatialReference",void 0),Object(i.a)([Object(l.a)(g.a)],m.prototype,"geometryType",void 0),m=n=Object(i.a)([Object(d.a)("esri.layers.support.source.QueryTableDataSource")],m);let O=j=class extends o.a{constructor(e){super(e),this.type="raster"}clone(){const{workspaceId:e,dataSourceName:t}=this;return new j({workspaceId:e,dataSourceName:t})}};var v;Object(i.a)([Object(l.a)({raster:"raster"})],O.prototype,"type",void 0),Object(i.a)([Object(a.b)({type:String,json:{write:!0}})],O.prototype,"dataSourceName",void 0),Object(i.a)([Object(a.b)({type:String,json:{write:!0}})],O.prototype,"workspaceId",void 0),O=j=Object(i.a)([Object(d.a)("esri.layers.support.source.RasterDataSource")],O);let w=v=class extends o.a{constructor(e){super(e),this.type="table"}clone(){const{workspaceId:e,gdbVersion:t,dataSourceName:r}=this;return new v({workspaceId:e,gdbVersion:t,dataSourceName:r})}};var S,x;Object(i.a)([Object(l.a)({table:"table"})],w.prototype,"type",void 0),Object(i.a)([Object(a.b)({type:String,json:{write:!0}})],w.prototype,"workspaceId",void 0),Object(i.a)([Object(a.b)({type:String,json:{write:!0}})],w.prototype,"gdbVersion",void 0),Object(i.a)([Object(a.b)({type:String,json:{write:!0}})],w.prototype,"dataSourceName",void 0),w=v=Object(i.a)([Object(d.a)("esri.layers.support.source.TableDataSource")],w);const T=Object(s.b)()({esriLeftInnerJoin:"left-inner-join",esriLeftOuterJoin:"left-outer-join"});let F=S=class extends o.a{constructor(e){super(e),this.type="join-table"}readLeftTableSource(e,t,r){return I()(e,t,r)}castLeftTableSource(e){return Object(h.k)(k(),e)}readRightTableSource(e,t,r){return I()(e,t,r)}castRightTableSource(e){return Object(h.k)(k(),e)}clone(){var e,t;const{leftTableKey:r,rightTableKey:n,leftTableSource:i,rightTableSource:s,joinType:o}=this,a={leftTableKey:r,rightTableKey:n,leftTableSource:null!=(e=null==i?void 0:i.clone())?e:void 0,rightTableSource:null!=(t=null==s?void 0:s.clone())?t:void 0,joinType:o};return new S(a)}};Object(i.a)([Object(l.a)({joinTable:"join-table"})],F.prototype,"type",void 0),Object(i.a)([Object(a.b)({type:String,json:{write:!0}})],F.prototype,"leftTableKey",void 0),Object(i.a)([Object(a.b)({type:String,json:{write:!0}})],F.prototype,"rightTableKey",void 0),Object(i.a)([Object(a.b)({json:{write:!0}})],F.prototype,"leftTableSource",void 0),Object(i.a)([Object(u.a)("leftTableSource")],F.prototype,"readLeftTableSource",null),Object(i.a)([Object(c.a)("leftTableSource")],F.prototype,"castLeftTableSource",null),Object(i.a)([Object(a.b)({json:{write:!0}})],F.prototype,"rightTableSource",void 0),Object(i.a)([Object(u.a)("rightTableSource")],F.prototype,"readRightTableSource",null),Object(i.a)([Object(c.a)("rightTableSource")],F.prototype,"castRightTableSource",null),Object(i.a)([Object(l.a)(T)],F.prototype,"joinType",void 0),F=S=Object(i.a)([Object(d.a)("esri.layers.support.source.JoinTableDataSource")],F);let _=null;function I(){return _||(_=Object(p.b)({types:k()})),_}let M=null;function k(){return M||(M={key:"type",base:null,typeMap:{"data-layer":P,"map-layer":b.a}}),M}const R={key:"type",base:null,typeMap:{"join-table":F,"query-table":m,raster:O,table:w}};let P=x=class extends o.a{constructor(e){super(e),this.type="data-layer"}clone(){const{fields:e,dataSource:t}=this;return new x({fields:e,dataSource:t})}};Object(i.a)([Object(l.a)({dataLayer:"data-layer"})],P.prototype,"type",void 0),Object(i.a)([Object(a.b)({type:[f.a],json:{write:!0}})],P.prototype,"fields",void 0),Object(i.a)([Object(a.b)({types:R,json:{write:!0}})],P.prototype,"dataSource",void 0),P=x=Object(i.a)([Object(d.a)("esri.layers.support.source.DataLayerSource")],P),P.from=Object(h.m)(P)},196:function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return _}));var n=r(81),i=r(133),s=r(88),o=r(86),a=r(87),c=r(142),l=r(85),u=r(96),d=r(83),h=r(84),p=(r(79),r(80)),f=r(94),b=r(82),y=r(99),g=r(166),m=r(92),j=r(107);const O=p.a.getLogger("esri.portal.PortalItemResource");let v=class extends m.a{constructor(e){super(e),this.portalItem=null}normalizeCtorArgs(e){return e&&e.portalItem&&e.path?{...e,path:this.normalizePath(e.path,e.portalItem)}:e}set path(e){Object(l.k)(e)&&Object(u.s)(e)?O.error("portalitemresource:invalid-path","A portal item resource path must be relative"):this._set("path",e)}_castPath(e){return this.normalizePath(e,this.portalItem)}get url(){return this.portalItem&&this.path?`${this.portalItem.itemUrl}/resources/${this.path}`:null}get itemRelativeUrl(){return this.portalItem&&this.path?`./resources/${this.path}`:null}fetch(e="json",t){const r=this.url;if(Object(l.j)(r))throw new s.a("portal-item-resource:fetch","Portal item resource does not refer to a valid item or path");return this.portalItem.portal._request(r,{responseType:e,query:{token:this.portalItem.apiKey},signal:Object(l.i)(t,"signal")})}async update(e,t){return(await r.e(21).then(r.bind(null,846))).addOrUpdateResource(this,"update",e,t)}hasPath(){return Object(l.k)(this.path)}normalizePath(e,t){return Object(l.j)(e)?e:(e=e.replace(/^\/+/,""),Object(l.k)(t)&&Object(u.s)(e)&&(e=Object(u.C)(e,t.itemUrl)),e.replace(/^\/+/,"").replace(/^(\.\/)?resources\//,""))}};Object(n.a)([Object(d.b)()],v.prototype,"portalItem",void 0),Object(n.a)([Object(d.b)({type:String,value:null})],v.prototype,"path",null),Object(n.a)([Object(j.a)("path")],v.prototype,"_castPath",null),Object(n.a)([Object(d.b)({type:String,readOnly:!0})],v.prototype,"url",null),Object(n.a)([Object(d.b)({type:String,readOnly:!0})],v.prototype,"itemRelativeUrl",null),v=Object(n.a)([Object(b.a)("esri.portal.PortalItemResource")],v);var w=v;let S=class extends m.a{constructor(e){super(e),this.created=null,this.rating=null}};Object(n.a)([Object(d.b)()],S.prototype,"created",void 0),Object(n.a)([Object(d.b)()],S.prototype,"rating",void 0),S=Object(n.a)([Object(b.a)("esri.portal.PortalRating")],S);var x,T=S;let F=x=class extends(Object(o.b)(c.a)){constructor(e){super(e),this.access=null,this.accessInformation=null,this.apiKey=null,this.applicationProxies=null,this.avgRating=null,this.categories=null,this.created=null,this.culture=null,this.description=null,this.extent=null,this.groupCategories=null,this.id=null,this.itemControl=null,this.licenseInfo=null,this.modified=null,this.name=null,this.numComments=null,this.numRatings=null,this.numViews=null,this.owner=null,this.ownerFolder=null,this.portal=null,this.screenshots=null,this.size=null,this.snippet=null,this.sourceJSON=null,this.tags=null,this.title=null,this.type=null,this.typeKeywords=null,this.url=null}static from(e){return Object(h.d)(x,e)}destroy(){this.portal=null}get displayName(){const e=this.type,t=this.typeKeywords||[];let r=e;return"Feature Service"===e||"Feature Collection"===e?r=t.indexOf("Table")>-1?"Table":t.indexOf("Route Layer")>-1?"Route Layer":t.indexOf("Markup")>-1?"Markup":"Feature Layer":"Image Service"===e?r=t.indexOf("Elevation 3D Layer")>-1?"Elevation Layer":t.indexOf("Tiled Imagery")>-1?"Tiled Imagery Layer":"Imagery Layer":"Scene Service"===e?r="Scene Layer":"Scene Package"===e?r="Scene Layer Package":"Stream Service"===e?r="Feature Layer":"Geoprocessing Service"===e&&this.portal&&this.portal.isPortal?r=t.indexOf("Web Tool")>-1?"Tool":"Geoprocessing Service":"Geocoding Service"===e?r="Locator":"Geoenrichment Service"===e?r="GeoEnrichment Service":"Microsoft Powerpoint"===e?r="Microsoft PowerPoint":"GeoJson"===e?r="GeoJSON":"Globe Service"===e?r="Globe Layer":"Vector Tile Service"===e?r="Tile Layer":"netCDF"===e?r="NetCDF":"Map Service"===e?r=-1===t.indexOf("Spatiotemporal")&&(t.indexOf("Hosted Service")>-1||t.indexOf("Tiled")>-1)&&-1===t.indexOf("Relational")?"Tile Layer":"Map Image Layer":e&&e.toLowerCase().indexOf("add in")>-1?r=e.replace(/(add in)/gi,"Add-In"):"datastore catalog service"===e?r="Big Data File Share":"Compact Tile Package"===e?r="Tile Package (tpkx)":"OGCFeatureServer"===e&&(r="OGC Feature Layer"),r}readExtent(e){return e&&e.length?new y.a(e[0][0],e[0][1],e[1][0],e[1][1]):null}get iconUrl(){const e=this.type&&this.type.toLowerCase()||"",t=this.typeKeywords||[];let r,n=!1,s=!1,o=!1,a=!1,c=!1,l=!1;return e.indexOf("service")>0||"feature collection"===e||"kml"===e||"wms"===e||"wmts"===e||"wfs"===e?(n=t.indexOf("Hosted Service")>-1,"feature service"===e||"feature collection"===e||"kml"===e||"wfs"===e?(s=t.indexOf("Table")>-1,o=t.indexOf("Route Layer")>-1,a=t.indexOf("Markup")>-1,c=-1!==t.indexOf("Spatiotemporal"),l=-1!==t.indexOf("UtilityNetwork"),r=c&&s?"spatiotemporaltable":s?"table":o?"routelayer":a?"markup":c?"spatiotemporal":n?"featureshosted":l?"utilitynetwork":"features"):r="map service"===e||"wms"===e||"wmts"===e?n||t.indexOf("Tiled")>-1||"wmts"===e?"maptiles":"mapimages":"scene service"===e?t.indexOf("Line")>-1?"sceneweblayerline":t.indexOf("3DObject")>-1?"sceneweblayermultipatch":t.indexOf("Point")>-1?"sceneweblayerpoint":t.indexOf("IntegratedMesh")>-1?"sceneweblayermesh":t.indexOf("PointCloud")>-1?"sceneweblayerpointcloud":t.indexOf("Polygon")>-1?"sceneweblayerpolygon":t.indexOf("Building")>-1?"sceneweblayerbuilding":t.indexOf("Voxel")>-1?"sceneweblayervoxel":"sceneweblayer":"image service"===e?t.indexOf("Elevation 3D Layer")>-1?"elevationlayer":t.indexOf("Tiled Imagery")>-1?"tiledimagerylayer":"imagery":"stream service"===e?"streamlayer":"vector tile service"===e?"vectortile":"datastore catalog service"===e?"datastorecollection":"geocoding service"===e?"geocodeservice":"geoprocessing service"===e&&t.indexOf("Web Tool")>-1&&this.portal&&this.portal.isPortal?"tool":"layers"):r="web map"===e||"cityengine web scene"===e?"maps":"web scene"===e?t.indexOf("ViewingMode-Local")>-1?"webscenelocal":"websceneglobal":"web mapping application"===e||"mobile application"===e||"application"===e||"operation view"===e||"desktop application"===e?"apps":"map document"===e||"map package"===e||"published map"===e||"scene document"===e||"globe document"===e||"basemap package"===e||"mobile basemap package"===e||"mobile map package"===e||"project package"===e||"project template"===e||"pro map"===e||"layout"===e||"layer"===e&&t.indexOf("ArcGIS Pro")>-1||"explorer map"===e&&t.indexOf("Explorer Document")?"mapsgray":"service definition"===e||"csv"===e||"shapefile"===e||"cad drawing"===e||"geojson"===e||"360 vr experience"===e||"netcdf"===e||"administrative report"===e?"datafiles":"explorer add in"===e||"desktop add in"===e||"windows viewer add in"===e||"windows viewer configuration"===e?"appsgray":"arcgis pro add in"===e||"arcgis pro configuration"===e?"addindesktop":"rule package"===e||"file geodatabase"===e||"sqlite geodatabase"===e||"csv collection"===e||"kml collection"===e||"windows mobile package"===e||"map template"===e||"desktop application template"===e||"gml"===e||"arcpad package"===e||"code sample"===e||"form"===e||"document link"===e||"earth configuration"===e||"operations dashboard add in"===e||"rules package"===e||"image"===e||"workflow manager package"===e||"explorer map"===e&&t.indexOf("Explorer Mapping Application")>-1||t.indexOf("Document")>-1?"datafilesgray":"network analysis service"===e||"geoprocessing service"===e||"geodata service"===e||"geometry service"===e||"geoprocessing package"===e||"locator package"===e||"geoprocessing sample"===e||"workflow manager service"===e?"toolsgray":"layer"===e||"layer package"===e||"explorer layer"===e?"layersgray":"scene package"===e?"scenepackage":"mobile scene package"===e?"mobilescenepackage":"tile package"===e||"compact tile package"===e?"tilepackage":"task file"===e?"taskfile":"report template"===e?"report-template":"statistical data collection"===e?"statisticaldatacollection":"insights workbook"===e?"workbook":"insights model"===e?"insightsmodel":"insights page"===e?"insightspage":"insights theme"===e?"insightstheme":"hub initiative"===e?"hubinitiative":"hubpage"===e?"hubpage":"hub event"===e?"hubevent":"hub site application"===e?"hubsite":"relational database connection"===e?"relationaldatabaseconnection":"big data file share"===e?"datastorecollection":"image collection"===e?"imagecollection":"style"===e?"style":"desktop style"===e?"desktopstyle":"dashboard"===e?"dashboard":"raster function template"===e?"rasterprocessingtemplate":"vector tile package"===e?"vectortilepackage":"ortho mapping project"===e?"orthomappingproject":"ortho mapping template"===e?"orthomappingtemplate":"solution"===e?"solutions":"geopackage"===e?"geopackage":"deep learning package"===e?"deeplearningpackage":"real time analytic"===e?"realtimeanalytics":"big data analytic"===e?"bigdataanalytics":"feed"===e?"feed":"excalibur imagery project"===e?"excaliburimageryproject":"notebook"===e?"notebook":"storymap"===e?"storymap":"survey123 add in"===e?"survey123addin":"mission"===e?"mission":"mission report"===e?"missionreport":"quickcapture project"===e?"quickcaptureproject":"pro report"===e?"proreport":"urban model"===e?"urbanmodel":"web experience"===e?"experiencebuilder":"web experience template"===e?"webexperiencetemplate":"workflow"===e?"workflow":"insights script"===e?"insightsscript":"kernel gateway connection"===e?"kernelgatewayconnection":"hub initiative template"===e?"hubinitiativetemplate":"storymap theme"===e?"storymaptheme":"knowledge graph"===e?"knowledgegraph":"native application"===e?"nativeapp":"native application installer"===e?"nativeappinstaller":"link chart"===e?"linkchart":"investigation"===e?"investigation":"ogcfeatureserver"===e?"features":"pro project"===e?"proproject":"insights workbook package"===e?"insightsworkbookpackage":"apache parquet"===e?"apacheparquet":"maps",r?Object(i.a)("esri/images/portal/"+r+"16.png"):null}get isLayer(){return["Map Service","Feature Service","Feature Collection","Scene Service","Image Service","Stream Service","Vector Tile Service","WMTS","WMS"].indexOf(this.type)>-1}get itemUrl(){const e=this.get("portal.restUrl");return e?e+"/content/items/"+this.id:null}get thumbnailUrl(){const e=this.itemUrl,t=this.thumbnail;return e&&t?this.portal._normalizeUrl(`${e}/info/${t}?f=json`):null}get userItemUrl(){const e=this.get("portal.restUrl");if(!e)return null;const t=this.owner||this.get("portal.user.username");return t?`${e}/content/users/${this.ownerFolder?`${t}/${this.ownerFolder}`:t}/items/${this.id}`:null}load(e){this.portal||(this.portal=g.a.getDefault());const t=this.portal.load(e).then((()=>this.sourceJSON?this.sourceJSON:this.id&&this.itemUrl?this.portal._request(this.itemUrl,{signal:Object(l.k)(e)?e.signal:null,query:{token:this.apiKey}}):{})).then((e=>{this.sourceJSON=e,this.read(e)}));return this.addResolvingPromise(t),Promise.resolve(this)}addRating(e){const t={method:"post",query:{}};return e instanceof T&&(e=e.rating),isNaN(e)||"number"!=typeof e||(t.query.rating=e),this.portal._request(this.itemUrl+"/addRating",t).then((()=>new T({rating:e,created:new Date})))}clone(){const e={access:this.access,accessInformation:this.accessInformation,applicationProxies:Object(a.a)(this.applicationProxies),avgRating:this.avgRating,categories:Object(a.a)(this.categories),created:Object(a.a)(this.created),culture:this.culture,description:this.description,extent:Object(a.a)(this.extent),groupCategories:Object(a.a)(this.groupCategories),id:this.id,itemControl:this.itemControl,licenseInfo:this.licenseInfo,modified:Object(a.a)(this.modified),name:this.name,numComments:this.numComments,numRatings:this.numRatings,numViews:this.numViews,owner:this.owner,ownerFolder:this.ownerFolder,portal:this.portal,screenshots:Object(a.a)(this.screenshots),size:this.size,snippet:this.snippet,tags:Object(a.a)(this.tags),thumbnail:this.thumbnail,title:this.title,type:this.type,typeKeywords:Object(a.a)(this.typeKeywords),url:this.url};return this.loaded&&(e.loadStatus="loaded"),new x({sourceJSON:this.sourceJSON}).set(e)}createPostQuery(){const e=this.toJSON();for(const t in e)"tags"===t&&null!==e[t]&&(e[t]=e[t].join(", ")),"typeKeywords"===t&&null!==e[t]&&(e[t]=e[t].join(", ")),"extent"===t&&e[t]&&(e[t]=JSON.stringify(e[t]));return e}deleteRating(){return this.portal._request(this.itemUrl+"/deleteRating",{method:"post"}).then((()=>{}))}fetchData(e="json",t){return this.portal._request(this.itemUrl+"/data",{responseType:e,...t,query:{token:this.apiKey}})}fetchRating(e){return this.portal._request(this.itemUrl+"/rating",{query:{token:this.apiKey},...e}).then((e=>null!=e.rating?(e.created=new Date(e.created),new T(e)):null))}fetchRelatedItems(e,t){return this.portal._requestToTypedArray(this.itemUrl+"/relatedItems",{query:{...e,token:this.apiKey},...t},x)}getThumbnailUrl(e){let t=this.thumbnailUrl;return t&&e&&(t+=`&w=${e}`),t}reload(){return this.portal._request(this.itemUrl,{cacheBust:!0,query:{token:this.apiKey}}).then((e=>(this.sourceJSON=e,this.read(e),this)))}update(e){return this.id?this.load().then((()=>this.portal._signIn())).then((()=>{const t=e&&e.data,r={method:"post"};r.query=this.createPostQuery();for(const e in r.query)null===r.query[e]&&(r.query[e]="");return r.query.clearEmptyFields=!0,null!=t&&("string"==typeof t?r.query.text=t:"object"==typeof t&&(r.query.text=JSON.stringify(t))),this.portal._request(`${this.userItemUrl}/update`,r).then((()=>this.reload()))})):Promise.reject(new s.a("portal:item-does-not-exist","The item does not exist yet and cannot be updated"))}updateThumbnail(e){return this.id?this.load().then((()=>this.portal._signIn())).then((()=>{const t=e.thumbnail,r=e.filename,n={method:"post"};if("string"==typeof t)Object(u.u)(t)?n.query={data:t}:n.query={url:Object(u.A)(t)},Object(l.k)(r)&&(n.query.filename=r);else{const e=new FormData;Object(l.k)(r)?e.append("file",t,r):e.append("file",t),n.body=e}return this.portal._request(`${this.userItemUrl}/updateThumbnail`,n).then((()=>this.reload()))})):Promise.reject(new s.a("portal:item-does-not-exist","The item does not exist yet and cannot be updated"))}async fetchResources(e={},t){return(await r.e(21).then(r.bind(null,846))).fetchResources(this,e,t)}async addResource(e,t,n){const i=await r.e(21).then(r.bind(null,846));return e.portalItem=this,i.addOrUpdateResource(e,"add",t,n)}async removeResource(e,t){const n=await r.e(21).then(r.bind(null,846));if(e.portalItem&&e.portalItem.itemUrl!==this.itemUrl)throw new s.a("removeresource:portal-item-mismatch","The portal item associated with the provided resource does not match the item");return n.removeResource(this,e,t)}async removeAllResources(e){return(await r.e(21).then(r.bind(null,846))).removeAllResources(this,e)}resourceFromPath(e){return new w({portalItem:this,path:e})}toJSON(){const e=this.extent,t={created:this.created&&this.created.getTime(),description:this.description,extent:e&&[[e.xmin,e.ymin],[e.xmax,e.ymax]],id:this.id,modified:this.modified&&this.modified.getTime(),name:this.name,owner:this.owner,ownerFolder:this.ownerFolder,snippet:this.snippet,tags:this.tags,thumbnail:this.thumbnail,title:this.title,type:this.type,typeKeywords:this.typeKeywords,url:this.url};return Object(a.c)(t)}static fromJSON(e){if(!e)return null;if(e.declaredClass)throw new Error("JSON object is already hydrated");return new x({sourceJSON:e})}_getPostQuery(){const e=this.toJSON();for(const t in e)"tags"===t&&null!==e[t]&&(e[t]=e[t].join(", ")),"typeKeywords"===t&&null!==e[t]&&(e[t]=e[t].join(", ")),"extent"===t&&e[t]&&(e[t]=JSON.stringify(e[t]));return e}};Object(n.a)([Object(d.b)({type:["private","shared","org","public"]})],F.prototype,"access",void 0),Object(n.a)([Object(d.b)()],F.prototype,"accessInformation",void 0),Object(n.a)([Object(d.b)({type:String})],F.prototype,"apiKey",void 0),Object(n.a)([Object(d.b)({json:{read:{source:"appProxies"}}})],F.prototype,"applicationProxies",void 0),Object(n.a)([Object(d.b)()],F.prototype,"avgRating",void 0),Object(n.a)([Object(d.b)()],F.prototype,"categories",void 0),Object(n.a)([Object(d.b)({type:Date})],F.prototype,"created",void 0),Object(n.a)([Object(d.b)()],F.prototype,"culture",void 0),Object(n.a)([Object(d.b)()],F.prototype,"description",void 0),Object(n.a)([Object(d.b)({readOnly:!0})],F.prototype,"displayName",null),Object(n.a)([Object(d.b)({type:y.a})],F.prototype,"extent",void 0),Object(n.a)([Object(f.a)("extent")],F.prototype,"readExtent",null),Object(n.a)([Object(d.b)()],F.prototype,"groupCategories",void 0),Object(n.a)([Object(d.b)({readOnly:!0})],F.prototype,"iconUrl",null),Object(n.a)([Object(d.b)()],F.prototype,"id",void 0),Object(n.a)([Object(d.b)({readOnly:!0})],F.prototype,"isLayer",null),Object(n.a)([Object(d.b)()],F.prototype,"itemControl",void 0),Object(n.a)([Object(d.b)({readOnly:!0})],F.prototype,"itemUrl",null),Object(n.a)([Object(d.b)()],F.prototype,"licenseInfo",void 0),Object(n.a)([Object(d.b)({type:Date})],F.prototype,"modified",void 0),Object(n.a)([Object(d.b)()],F.prototype,"name",void 0),Object(n.a)([Object(d.b)()],F.prototype,"numComments",void 0),Object(n.a)([Object(d.b)()],F.prototype,"numRatings",void 0),Object(n.a)([Object(d.b)()],F.prototype,"numViews",void 0),Object(n.a)([Object(d.b)()],F.prototype,"owner",void 0),Object(n.a)([Object(d.b)()],F.prototype,"ownerFolder",void 0),Object(n.a)([Object(d.b)({type:g.a})],F.prototype,"portal",void 0),Object(n.a)([Object(d.b)()],F.prototype,"screenshots",void 0),Object(n.a)([Object(d.b)()],F.prototype,"size",void 0),Object(n.a)([Object(d.b)()],F.prototype,"snippet",void 0),Object(n.a)([Object(d.b)()],F.prototype,"sourceJSON",void 0),Object(n.a)([Object(d.b)()],F.prototype,"tags",void 0),Object(n.a)([Object(d.b)()],F.prototype,"thumbnail",void 0),Object(n.a)([Object(d.b)({readOnly:!0})],F.prototype,"thumbnailUrl",null),Object(n.a)([Object(d.b)()],F.prototype,"title",void 0),Object(n.a)([Object(d.b)()],F.prototype,"type",void 0),Object(n.a)([Object(d.b)()],F.prototype,"typeKeywords",void 0),Object(n.a)([Object(d.b)()],F.prototype,"url",void 0),Object(n.a)([Object(d.b)({readOnly:!0})],F.prototype,"userItemUrl",null),F=x=Object(n.a)([Object(b.a)("esri.portal.PortalItem")],F);var _=F},207:function(e,t,r){"use strict";(function(e){r.d(t,"a",(function(){return s})),r.d(t,"b",(function(){return n})),r.d(t,"c",(function(){return i}));var n="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof e?e:"undefined"!=typeof self?self:{};function i(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function s(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}}).call(this,r(233))},221:function(e,t,r){"use strict";r.r(t),r.d(t,"executeQuery",(function(){return p})),r.d(t,"executeQueryForCount",(function(){return g})),r.d(t,"executeQueryForExtent",(function(){return m})),r.d(t,"executeQueryForIds",(function(){return y})),r.d(t,"executeQueryPBF",(function(){return f})),r.d(t,"executeQueryPBFBuffer",(function(){return b})),r.d(t,"queryToQueryStringParameters",(function(){return h})),r.d(t,"runQuery",(function(){return j}));var n=r(100),i=r(85),s=r(96),o=r(95),a=r(224),c=r(400),l=r(261),u=r(263);const d="Layer does not support extent calculation.";function h(e,t){const r=e.geometry,n=e.toJSON(),s=n;if(Object(i.k)(r)&&(s.geometry=JSON.stringify(r),s.geometryType=Object(o.c)(r),s.inSR=r.spatialReference.wkid||JSON.stringify(r.spatialReference)),n.groupByFieldsForStatistics&&(s.groupByFieldsForStatistics=n.groupByFieldsForStatistics.join(",")),n.objectIds&&(s.objectIds=n.objectIds.join(",")),n.orderByFields&&(s.orderByFields=n.orderByFields.join(",")),!n.outFields||!n.returnDistinctValues&&(null!=t&&t.returnCountOnly||null!=t&&t.returnExtentOnly||null!=t&&t.returnIdsOnly)?delete s.outFields:-1!==n.outFields.indexOf("*")?s.outFields="*":s.outFields=n.outFields.join(","),n.outSR?s.outSR=n.outSR.wkid||JSON.stringify(n.outSR):r&&(n.returnGeometry||n.returnCentroid)&&(s.outSR=s.inSR),n.returnGeometry&&delete n.returnGeometry,n.outStatistics&&(s.outStatistics=JSON.stringify(n.outStatistics)),n.pixelSize&&(s.pixelSize=JSON.stringify(n.pixelSize)),n.quantizationParameters&&(s.quantizationParameters=JSON.stringify(n.quantizationParameters)),n.parameterValues&&(s.parameterValues=JSON.stringify(n.parameterValues)),n.rangeValues&&(s.rangeValues=JSON.stringify(n.rangeValues)),n.dynamicDataSource&&(s.layer=JSON.stringify({source:n.dynamicDataSource}),delete n.dynamicDataSource),n.timeExtent){const e=n.timeExtent,{start:t,end:r}=e;null==t&&null==r||(s.time=t===r?t:`${null==t?"null":t},${null==r?"null":r}`),delete n.timeExtent}return s}async function p(e,t,r,n){const s=Object(i.k)(t.timeExtent)&&t.timeExtent.isEmpty?{data:{features:[]}}:await j(e,t,"json",n);return Object(l.a)(t,r,s.data),s}async function f(e,t,r,n){if(Object(i.k)(t.timeExtent)&&t.timeExtent.isEmpty)return Promise.resolve({data:r.createFeatureResult()});const s=await b(e,t,n),o=s;return o.data=Object(c.a)(s.data,r),o}function b(e,t,r){return j(e,t,"pbf",r)}function y(e,t,r){return Object(i.k)(t.timeExtent)&&t.timeExtent.isEmpty?Promise.resolve({data:{objectIds:[]}}):j(e,t,"json",r,{returnIdsOnly:!0})}function g(e,t,r){return Object(i.k)(t.timeExtent)&&t.timeExtent.isEmpty?Promise.resolve({data:{count:0}}):j(e,t,"json",r,{returnIdsOnly:!0,returnCountOnly:!0})}function m(e,t,r){return Object(i.k)(t.timeExtent)&&t.timeExtent.isEmpty?Promise.resolve({data:{count:0,extent:null}}):j(e,t,"json",r,{returnExtentOnly:!0,returnCountOnly:!0}).then((e=>{const t=e.data;if(t.hasOwnProperty("extent"))return e;if(t.features)throw new Error(d);if(t.hasOwnProperty("count"))throw new Error(d);return e}))}function j(e,t,r,o={},c={}){const l="string"==typeof e?Object(s.K)(e):e,d=t.geometry?[t.geometry]:[];return o.responseType="pbf"===r?"array-buffer":"json",Object(a.a)(d,null,o).then((e=>{const a=e&&e[0];Object(i.k)(a)&&((t=t.clone()).geometry=a);const d=Object(u.a)({...l.query,f:r,...c,...h(t,c)});return Object(n.default)(Object(s.z)(l.path,"query"),{...o,query:{...d,...o.query}})}))}},224:function(e,t,r){"use strict";r.d(t,"a",(function(){return w})),r.d(t,"b",(function(){return S})),r.d(t,"c",(function(){return j}));var n=r(129),i=r(88),s=r(80),o=r(85),a=r(124),c=r(132),l=r(231),u=r(106),d=r(158),h=(r(98),r(100)),p=r(96),f=r(95);async function b(e,t,r){const n="string"==typeof e?Object(p.K)(e):e,i=t[0].spatialReference,s=Object(f.c)(t[0]),o={...r,query:{...n.query,f:"json",sr:i.wkid?i.wkid:JSON.stringify(i),geometries:JSON.stringify((a=t,{geometryType:Object(f.c)(a[0]),geometries:a.map((e=>e.toJSON()))}))}};var a;return function(e,t,r){const n=Object(f.b)(t);return e.map((e=>{const t=n.fromJSON(e);return t.spatialReference=r,t}))}((await Object(h.default)(n.path+"/simplify",o)).data,s,i)}const y=s.a.getLogger("esri.geometry.support.normalizeUtils");function g(e){return"polygon"===e[0].type}function m(e){return"polyline"===e[0].type}function j(e,t){if(!(e instanceof c.a||e instanceof a.a)){const e="straightLineDensify: the input geometry is neither polyline nor polygon";throw y.error(e),new i.a(e)}const r=Object(l.b)(e),n=[];for(const i of r){const e=[];n.push(e),e.push([i[0][0],i[0][1]]);for(let r=0;r<i.length-1;r++){const n=i[r][0],s=i[r][1],o=i[r+1][0],a=i[r+1][1],c=Math.sqrt((o-n)*(o-n)+(a-s)*(a-s)),l=(a-s)/c,u=(o-n)/c,d=c/t;if(d>1){for(let a=1;a<=d-1;a++){const r=a*t,i=u*r+n,o=l*r+s;e.push([i,o])}const r=(c+Math.floor(d-1)*t)/2,i=u*r+n,o=l*r+s;e.push([i,o])}e.push([o,a])}}return function(e){return"polygon"===e.type}(e)?new a.a({rings:n,spatialReference:e.spatialReference}):new c.a({paths:n,spatialReference:e.spatialReference})}function O(e,t,r){if(t){const t=j(e,1e6);e=Object(d.e)(t,!0)}return r&&(e=Object(l.e)(e,r)),e}function v(e,t,r){if(Array.isArray(e)){const n=e[0];if(n>t){const r=Object(l.d)(n,t);e[0]=n+r*(-2*t)}else if(n<r){const t=Object(l.d)(n,r);e[0]=n+t*(-2*r)}}else{const n=e.x;if(n>t){const r=Object(l.d)(n,t);e=e.clone().offset(r*(-2*t),0)}else if(n<r){const t=Object(l.d)(n,r);e=e.clone().offset(t*(-2*r),0)}}return e}async function w(e,t,r){if(!Array.isArray(e))return w([e],t);const i=t?t.url:n.a.geometryServiceUrl;let s,y,j,S,x,T,F,_,I=0;const M=[],k=[];for(const n of e)if(Object(o.j)(n))k.push(n);else if(s||(s=n.spatialReference,y=Object(u.e)(s),j=s.isWebMercator,T=j?102100:4326,S=l.a[T].maxX,x=l.a[T].minX,F=l.a[T].plus180Line,_=l.a[T].minus180Line),y)if("mesh"===n.type)k.push(n);else if("point"===n.type)k.push(v(n.clone(),S,x));else if("multipoint"===n.type){const e=n.clone();e.points=e.points.map((e=>v(e,S,x))),k.push(e)}else if("extent"===n.type){const e=n.clone()._normalize(!1,!1,y);k.push(e.rings?new a.a(e):e)}else if(n.extent){const e=n.extent,t=Object(l.d)(e.xmin,x)*(2*S);let r=0===t?n.clone():Object(l.e)(n.clone(),t);e.offset(t,0),e.intersects(F)&&e.xmax!==S?(I=e.xmax>I?e.xmax:I,r=O(r,j),M.push(r),k.push("cut")):e.intersects(_)&&e.xmin!==x?(I=e.xmax*(2*S)>I?e.xmax*(2*S):I,r=O(r,j,360),M.push(r),k.push("cut")):k.push(r)}else k.push(n.clone());else k.push(n);let R=Object(l.d)(I,S),P=-90;const N=R,C=new c.a;for(;R>0;){const e=360*R-180;C.addPath([[e,P],[e,-1*P]]),P*=-1,R--}if(M.length>0&&N>0){const t=function(e,t){let r=-1;for(let n=0;n<t.cutIndexes.length;n++){const i=t.cutIndexes[n],s=t.geometries[n],o=Object(l.b)(s);for(let e=0;e<o.length;e++){const t=o[e];t.some((r=>{if(r[0]<180)return!0;{let r=0;for(let e=0;e<t.length;e++){const n=t[e][0];r=n>r?n:r}r=Number(r.toFixed(9));const n=-360*Object(l.d)(r,180);for(let i=0;i<t.length;i++){const t=s.getPoint(e,i);s.setPoint(e,i,t.clone().offset(n,0))}return!0}}))}if(i===r){if(g(e))for(const t of Object(l.b)(s))e[i]=e[i].addRing(t);else if(m(e))for(const t of Object(l.b)(s))e[i]=e[i].addPath(t)}else r=i,e[i]=s}return e}(M,await async function(e,t,r,n){const i="string"==typeof e?Object(p.K)(e):e,s=t[0].spatialReference,o={...n,query:{...i.query,f:"json",sr:JSON.stringify(s),target:JSON.stringify({geometryType:Object(f.c)(t[0]),geometries:t}),cutter:JSON.stringify(r)}},a=await Object(h.default)(i.path+"/cut",o),{cutIndexes:c,geometries:l=[]}=a.data;return{cutIndexes:c,geometries:l.map((e=>{const t=Object(f.a)(e);return t.spatialReference=s,t}))}}(i,M,C,r)),n=[],s=[];for(let r=0;r<k.length;r++){const i=k[r];if("cut"!==i)s.push(i);else{const i=t.shift(),a=e[r];Object(o.k)(a)&&"polygon"===a.type&&a.rings&&a.rings.length>1&&i.rings.length>=a.rings.length?(n.push(i),s.push("simplify")):s.push(j?Object(d.b)(i):i)}}if(!n.length)return s;const a=await b(i,n,r),c=[];for(let e=0;e<s.length;e++){const t=s[e];"simplify"!==t?c.push(t):c.push(j?Object(d.b)(a.shift()):a.shift())}return c}const E=[];for(let n=0;n<k.length;n++){const e=k[n];if("cut"!==e)E.push(e);else{const e=M.shift();E.push(!0===j?Object(d.b)(e):e)}}return Promise.resolve(E)}function S(e,t){const r=Object(u.e)(t);if(r){const[t,n]=r.valid,i=n-t;if(e<t)for(;e<t;)e+=i;if(e>n)for(;e>n;)e-=i}return e}},228:function(e,t,r){"use strict";r.d(t,"a",(function(){return i})),r.d(t,"b",(function(){return s}));var n=r(186);class i{constructor(e,t,r){this._namespace=e,this._storage=t,this._removeFunc=!1,this._hit=0,this._miss=0,this._storage.register(this),this._namespace+=":",r&&(this._storage.registerRemoveFunc(this._namespace,r),this._removeFunc=!0)}destroy(){this._storage.clear(this._namespace),this._removeFunc&&this._storage.deregisterRemoveFunc(this._namespace),this._storage.deregister(this),this._storage=null}get namespace(){return this._namespace.slice(0,-1)}get hitRate(){return this._hit/(this._hit+this._miss)}get size(){return this._storage.size}get maxSize(){return this._storage.maxSize}resetHitRate(){this._hit=this._miss=0}put(e,t,r,n=0){this._storage.put(this._namespace+e,t,r,n)}get(e){const t=this._storage.get(this._namespace+e);return void 0===t?++this._miss:++this._hit,t}pop(e){const t=this._storage.pop(this._namespace+e);return void 0===t?++this._miss:++this._hit,t}updateSize(e,t,r){this._storage.updateSize(this._namespace+e,t,r)}clear(){this._storage.clear(this._namespace)}clearAll(){this._storage.clearAll()}getStats(){return this._storage.getStats()}resetStats(){this._storage.resetStats()}}class s{constructor(e=10485760){this._maxSize=e,this._db=new Map,this._size=0,this._hit=0,this._miss=0,this._removeFuncs=new n.a,this._users=new n.a}destroy(){this.clearAll(),this._removeFuncs.clear(),this._users.clear(),this._db=null}register(e){this._users.push(e)}deregister(e){this._users.removeUnordered(e)}registerRemoveFunc(e,t){this._removeFuncs.push([e,t])}deregisterRemoveFunc(e){this._removeFuncs.filterInPlace((t=>t[0]!==e))}get size(){return this._size}get maxSize(){return this._maxSize}set maxSize(e){this._maxSize=Math.max(e,0),this._checkSizeLimit()}put(e,t,r,n){const i=this._db.get(e);if(i&&(this._size-=i.size,this._db.delete(e),i.entry!==t&&this._notifyRemoved(e,i.entry)),r>this._maxSize)return void this._notifyRemoved(e,t);if(void 0===t)return void console.warn("Refusing to cache undefined entry ");if(!r||r<0)return void console.warn("Refusing to cache entry with invalid size "+r);const s=1+Math.max(n,-3)- -3;this._db.set(e,{entry:t,size:r,lifetime:s,lives:s}),this._size+=r,this._checkSizeLimit()}updateSize(e,t,r){const n=this._db.get(e);if(n&&n.entry===t){if(this._size-=n.size,r>this._maxSize)return this._db.delete(e),void this._notifyRemoved(e,t);n.size=r,this._size+=r,this._checkSizeLimit()}}pop(e){const t=this._db.get(e);if(t)return this._size-=t.size,this._db.delete(e),++this._hit,t.entry;++this._miss}get(e){const t=this._db.get(e);if(void 0!==t)return this._db.delete(e),t.lives=t.lifetime,this._db.set(e,t),++this._hit,t.entry;++this._miss}getStats(){const e={Size:Math.round(this._size/1048576)+"/"+Math.round(this._maxSize/1048576)+"MB","Hit rate":Math.round(100*this._getHitRate())+"%",Entries:this._db.size.toString()},t={},r=new Array;this._db.forEach(((e,n)=>{const i=e.lifetime;r[i]=(r[i]||0)+e.size,this._users.forAll((r=>{const i=r.namespace;if(n.startsWith(i)){const r=t[i]||0;t[i]=r+e.size}}))}));const n={};this._users.forAll((e=>{const r=e.namespace;if(!isNaN(e.hitRate)&&e.hitRate>0){const i=t[r]||0;t[r]=i,n[r]=Math.round(100*e.hitRate)+"%"}else n[r]="0%"}));const i=Object.keys(t);i.forEach((e=>t[e]=t[e]/this._size*100)),i.sort(((e,r)=>t[r]-t[e])),i.forEach((r=>e[r]=Math.round(t[r])+"% / "+n[r]));for(let s=r.length-1;s>=0;--s){const t=r[s];t&&(e["Priority "+(s+-3-1)]=Math.round(t/this.size*100)+"%")}return e}resetStats(){this._hit=this._miss=0,this._users.forAll((e=>e.resetHitRate()))}clear(e){this._db.forEach(((t,r)=>{r.startsWith(e)&&(this._size-=t.size,this._db.delete(r),this._notifyRemoved(r,t.entry))}))}clearAll(){this._db.forEach(((e,t)=>this._notifyRemoved(t,e.entry))),this._size=0,this._db.clear()}_getHitRate(){return this._hit/(this._hit+this._miss)}_notifyRemoved(e,t){this._removeFuncs.forAll((r=>{e.startsWith(r[0])&&r[1](t)}))}_checkSizeLimit(){if(!(this._size<=this._maxSize))for(const[e,t]of this._db)if(this._db.delete(e),t.lives<=1?(this._size-=t.size,this._notifyRemoved(e,t.entry)):(--t.lives,this._db.set(e,t)),this._size<=.9*this.maxSize)return}}},230:function(e,t,r){"use strict";function n(e){return"date"===e.type||"esriFieldTypeDate"===e.type}r.d(t,"a",(function(){return i}));class i{constructor(e){if(this.fields=e,this._fieldsMap=new Map,this._dateFieldsSet=new Set,this.dateFields=[],!e)return;const t=[];for(const r of e){const e=r&&r.name;if(e){const i=s(e);this._fieldsMap.set(e,r),this._fieldsMap.set(i,r),t.push(i),n(r)&&(this.dateFields.push(r),this._dateFieldsSet.add(r))}}t.sort(),this.uid=t.join(",")}destroy(){this._fieldsMap.clear()}has(e){return null!=this.get(e)}get(e){return null!=e?this._fieldsMap.get(e)||this._fieldsMap.get(s(e)):void 0}isDateField(e){return this._dateFieldsSet.has(this.get(e))}normalizeFieldName(e){const t=this.get(e);if(t)return t.name}}function s(e){return e.toLowerCase().trim()}},231:function(e,t,r){"use strict";r.d(t,"a",(function(){return o})),r.d(t,"b",(function(){return l})),r.d(t,"c",(function(){return u})),r.d(t,"d",(function(){return a})),r.d(t,"e",(function(){return c}));var n=r(132),i=r(93),s=r(95);const o={102100:{maxX:20037508.342788905,minX:-20037508.342788905,plus180Line:new n.a({paths:[[[20037508.342788905,-20037508.342788905],[20037508.342788905,20037508.342788905]]],spatialReference:i.a.WebMercator}),minus180Line:new n.a({paths:[[[-20037508.342788905,-20037508.342788905],[-20037508.342788905,20037508.342788905]]],spatialReference:i.a.WebMercator})},4326:{maxX:180,minX:-180,plus180Line:new n.a({paths:[[[180,-180],[180,180]]],spatialReference:i.a.WGS84}),minus180Line:new n.a({paths:[[[-180,-180],[-180,180]]],spatialReference:i.a.WGS84})}};function a(e,t){return Math.ceil((e-t)/(2*t))}function c(e,t){const r=l(e);for(const n of r)for(const e of n)e[0]+=t;return e}function l(e){return Object(s.g)(e)?e.rings:e.paths}function u(e){const t=(null==e?void 0:e.isWebMercator)?102100:4326;return[o[t].minX,o[t].maxX]}},236:function(e,t,r){"use strict";r.d(t,"a",(function(){return d}));var n,i=r(81),s=r(86),o=r(159),a=r(83),c=(r(79),r(84),r(80),r(82)),l=r(182);let u=n=class extends s.a{constructor(e){super(e),this.value=0,this.unit="milliseconds"}toMilliseconds(){return Object(o.a)(this.value,this.unit,"milliseconds")}clone(){return new n({value:this.value,unit:this.unit})}};Object(i.a)([Object(a.b)({type:Number,json:{write:!0},nonNullable:!0})],u.prototype,"value",void 0),Object(i.a)([Object(a.b)({type:l.a.apiValues,json:{type:l.a.jsonValues,read:l.a.read,write:l.a.write},nonNullable:!0})],u.prototype,"unit",void 0),u=n=Object(i.a)([Object(c.a)("esri.TimeInterval")],u);var d=u},237:function(e,t,r){"use strict";r.d(t,"a",(function(){return o})),r.d(t,"b",(function(){return i})),r.d(t,"c",(function(){return s}));var n=r(85);class i{constructor(e=null,t={},r,n){this.geometry=e,this.attributes=t,this.centroid=r,this.objectId=n,this.displayId=0,this.geohashX=0,this.geohashY=0}weakClone(){const e=new i(this.geometry,this.attributes,this.centroid,this.objectId);return e.displayId=this.displayId,e.geohashX=this.geohashX,e.geohashY=this.geohashY,e}}function s(e){return!(Object(n.j)(e.geometry)||!e.geometry.coords||!e.geometry.coords.length)}class o extends i{}},240:function(e,t,r){"use strict";r.d(t,"a",(function(){return o})),r.d(t,"b",(function(){return c}));var n=r(85),i=r(112),s=r(106);function o(e,t,r){if(Object(n.j)(t)||Object(n.j)(r)||r.vcsWkid||Object(s.d)(t,r))return null;const o=Object(i.g)(t)/Object(i.g)(r);if(1===o)return null;switch(e){case"point":case"esriGeometryPoint":return e=>function(e,t){e&&null!=e.z&&(e.z*=t)}(e,o);case"polyline":case"esriGeometryPolyline":return e=>function(e,t){if(e)for(const r of e.paths)for(const e of r)e.length>2&&(e[2]*=t)}(e,o);case"polygon":case"esriGeometryPolygon":return e=>function(e,t){if(e)for(const r of e.rings)for(const e of r)e.length>2&&(e[2]*=t)}(e,o);case"multipoint":case"esriGeometryMultipoint":return e=>function(e,t){if(e)for(const r of e.points)r.length>2&&(r[2]*=t)}(e,o);default:return null}}function a(e,t,r){if(null==e.hasM||e.hasZ)for(const n of t)for(const e of n)e.length>2&&(e[2]*=r)}function c(e,t,r){if(!e&&!t||!r)return;const n=Object(i.g)(r);l(e,r,n),l(t,r,n)}function l(e,t,r){if(e)for(const n of e)u(n.geometry,t,r)}function u(e,t,r){if(Object(n.j)(e)||!e.spatialReference||Object(s.d)(e.spatialReference,t))return;const o=Object(i.g)(e.spatialReference)/r;if(1!==o)if("x"in e)null!=e.z&&(e.z*=o);else if("rings"in e)a(e,e.rings,o);else if("paths"in e)a(e,e.paths,o);else if("points"in e&&(null==e.hasM||e.hasZ))for(const n of e.points)n.length>2&&(n[2]*=o)}},250:function(e,t,r){"use strict";r.d(t,"a",(function(){return n}));const n=new(r(90).a)({esriFieldTypeSmallInteger:"small-integer",esriFieldTypeInteger:"integer",esriFieldTypeSingle:"single",esriFieldTypeDouble:"double",esriFieldTypeLong:"long",esriFieldTypeString:"string",esriFieldTypeDate:"date",esriFieldTypeOID:"oid",esriFieldTypeGeometry:"geometry",esriFieldTypeBlob:"blob",esriFieldTypeRaster:"raster",esriFieldTypeGUID:"guid",esriFieldTypeGlobalID:"global-id",esriFieldTypeXML:"xml"})},257:function(e,t,r){"use strict";r.d(t,"a",(function(){return j}));var n,i=r(81),s=r(121),o=r(236),a=r(86),c=r(87),l=r(85),u=r(83),d=(r(84),r(79),r(80),r(94)),h=r(82),p=r(91);let f=n=class extends a.a{constructor(e){super(e),this.respectsDaylightSaving=!1,this.timezone=null}readRespectsDaylightSaving(e,t){return void 0!==t.respectsDaylightSaving?t.respectsDaylightSaving:void 0!==t.respectDaylightSaving&&t.respectDaylightSaving}clone(){const{respectsDaylightSaving:e,timezone:t}=this;return new n({respectsDaylightSaving:e,timezone:t})}};Object(i.a)([Object(u.b)({type:Boolean,json:{write:!0}})],f.prototype,"respectsDaylightSaving",void 0),Object(i.a)([Object(d.a)("respectsDaylightSaving",["respectsDaylightSaving","respectDaylightSaving"])],f.prototype,"readRespectsDaylightSaving",null),Object(i.a)([Object(u.b)({type:String,json:{read:{source:"timeZone"},write:{target:"timeZone"}}})],f.prototype,"timezone",void 0),f=n=Object(i.a)([Object(h.a)("esri.layers.support.TimeReference")],f);var b,y=f,g=r(182);let m=b=class extends a.a{constructor(e){super(e),this.cumulative=!1,this.endField=null,this.fullTimeExtent=null,this.hasLiveData=!1,this.interval=null,this.startField=null,this.timeReference=null,this.trackIdField=null,this.useTime=!0}readFullTimeExtent(e,t){if(!t.timeExtent||!Array.isArray(t.timeExtent)||2!==t.timeExtent.length)return null;const r=new Date(t.timeExtent[0]),n=new Date(t.timeExtent[1]);return new s.a({start:r,end:n})}writeFullTimeExtent(e,t){e&&Object(l.k)(e.start)&&Object(l.k)(e.end)?t.timeExtent=[e.start.getTime(),e.end.getTime()]:t.timeExtent=null}readInterval(e,t){return t.timeInterval&&t.timeIntervalUnits?new o.a({value:t.timeInterval,unit:g.a.fromJSON(t.timeIntervalUnits)}):t.defaultTimeInterval&&t.defaultTimeIntervalUnits?new o.a({value:t.defaultTimeInterval,unit:g.a.fromJSON(t.defaultTimeIntervalUnits)}):null}writeInterval(e,t){if(e){const r=e.toJSON();t.timeInterval=r.value,t.timeIntervalUnits=r.unit}else t.timeInterval=null,t.timeIntervalUnits=null}clone(){const{cumulative:e,endField:t,hasLiveData:r,interval:n,startField:i,timeReference:s,fullTimeExtent:o,trackIdField:a,useTime:l}=this;return new b({cumulative:e,endField:t,hasLiveData:r,interval:n,startField:i,timeReference:Object(c.a)(s),fullTimeExtent:Object(c.a)(o),trackIdField:a,useTime:l})}};Object(i.a)([Object(u.b)({type:Boolean,json:{read:{source:"exportOptions.timeDataCumulative"},write:{target:"exportOptions.timeDataCumulative"}}})],m.prototype,"cumulative",void 0),Object(i.a)([Object(u.b)({type:String,json:{read:{source:"endTimeField"},write:{target:"endTimeField",allowNull:!0}}})],m.prototype,"endField",void 0),Object(i.a)([Object(u.b)({type:s.a,json:{write:{enabled:!0,allowNull:!0}}})],m.prototype,"fullTimeExtent",void 0),Object(i.a)([Object(d.a)("fullTimeExtent",["timeExtent"])],m.prototype,"readFullTimeExtent",null),Object(i.a)([Object(p.a)("fullTimeExtent")],m.prototype,"writeFullTimeExtent",null),Object(i.a)([Object(u.b)({type:Boolean,json:{write:!0}})],m.prototype,"hasLiveData",void 0),Object(i.a)([Object(u.b)({type:o.a,json:{write:{enabled:!0,allowNull:!0}}})],m.prototype,"interval",void 0),Object(i.a)([Object(d.a)("interval",["timeInterval","timeIntervalUnits","defaultTimeInterval","defaultTimeIntervalUnits"])],m.prototype,"readInterval",null),Object(i.a)([Object(p.a)("interval")],m.prototype,"writeInterval",null),Object(i.a)([Object(u.b)({type:String,json:{read:{source:"startTimeField"},write:{target:"startTimeField",allowNull:!0}}})],m.prototype,"startField",void 0),Object(i.a)([Object(u.b)({type:y,json:{write:{enabled:!0,allowNull:!0}}})],m.prototype,"timeReference",void 0),Object(i.a)([Object(u.b)({type:String,json:{write:{enabled:!0,allowNull:!0}}})],m.prototype,"trackIdField",void 0),Object(i.a)([Object(u.b)({type:Boolean,json:{read:{source:"exportOptions.useTime"},write:{target:"exportOptions.useTime"}}})],m.prototype,"useTime",void 0),m=b=Object(i.a)([Object(h.a)("esri.layers.support.TimeInfo")],m);var j=m},261:function(e,t,r){"use strict";r.d(t,"a",(function(){return i}));var n=r(240);function i(e,t,r){if(!r||!r.features||!r.hasZ)return;const i=Object(n.a)(r.geometryType,t,e.outSpatialReference);if(i)for(const n of r.features)i(n.geometry)}},263:function(e,t,r){"use strict";function n(e){const t={};for(const r in e){if("declaredClass"===r)continue;const i=e[r];if(null!=i&&"function"!=typeof i)if(Array.isArray(i)){t[r]=[];for(let e=0;e<i.length;e++)t[r][e]=n(i[e])}else"object"==typeof i?i.toJSON&&(t[r]=JSON.stringify(i)):t[r]=i}return t}r.d(t,"a",(function(){return n}))},267:function(e,t,r){"use strict";r.d(t,"a",(function(){return p}));var n,i=r(81),s=r(90),o=r(86),a=r(87),c=r(83),l=(r(84),r(79),r(80),r(82)),u=r(91);const d=new s.a({count:"count",sum:"sum",min:"min",max:"max",avg:"avg",stddev:"stddev",var:"var",exceedslimit:"exceedslimit",percentile_cont:"percentile-continuous",percentile_disc:"percentile-discrete"});let h=n=class extends o.a{constructor(e){super(e),this.maxPointCount=void 0,this.maxRecordCount=void 0,this.maxVertexCount=void 0,this.onStatisticField=null,this.outStatisticFieldName=null,this.statisticType=null,this.statisticParameters=null}writeStatisticParameters(e,t){"percentile-continuous"!==this.statisticType&&"percentile-discrete"!==this.statisticType||(t.statisticParameters=Object(a.a)(e))}clone(){return new n({maxPointCount:this.maxPointCount,maxRecordCount:this.maxRecordCount,maxVertexCount:this.maxVertexCount,onStatisticField:this.onStatisticField,outStatisticFieldName:this.outStatisticFieldName,statisticType:this.statisticType,statisticParameters:Object(a.a)(this.statisticParameters)})}};Object(i.a)([Object(c.b)({type:Number,json:{write:!0}})],h.prototype,"maxPointCount",void 0),Object(i.a)([Object(c.b)({type:Number,json:{write:!0}})],h.prototype,"maxRecordCount",void 0),Object(i.a)([Object(c.b)({type:Number,json:{write:!0}})],h.prototype,"maxVertexCount",void 0),Object(i.a)([Object(c.b)({type:String,json:{write:!0}})],h.prototype,"onStatisticField",void 0),Object(i.a)([Object(c.b)({type:String,json:{write:!0}})],h.prototype,"outStatisticFieldName",void 0),Object(i.a)([Object(c.b)({type:String,json:{read:{source:"statisticType",reader:d.read},write:{target:"statisticType",writer:d.write}}})],h.prototype,"statisticType",void 0),Object(i.a)([Object(c.b)({type:Object})],h.prototype,"statisticParameters",void 0),Object(i.a)([Object(u.a)("statisticParameters")],h.prototype,"writeStatisticParameters",null),h=n=Object(i.a)([Object(l.a)("esri.rest.support.StatisticDefinition")],h);var p=h},274:function(e,t,r){"use strict";r.d(t,"a",(function(){return C})),r.d(t,"b",(function(){return E})),r.d(t,"c",(function(){return h})),r.d(t,"d",(function(){return g})),r.d(t,"e",(function(){return O})),r.d(t,"f",(function(){return s})),r.d(t,"g",(function(){return y})),r.d(t,"h",(function(){return I})),r.d(t,"i",(function(){return N})),r.d(t,"j",(function(){return a})),r.d(t,"k",(function(){return u})),r.d(t,"l",(function(){return d})),r.d(t,"m",(function(){return c})),r.d(t,"n",(function(){return l})),r.d(t,"o",(function(){return k})),r.d(t,"p",(function(){return o})),r.d(t,"q",(function(){return x})),r.d(t,"r",(function(){return v})),r.d(t,"s",(function(){return P})),r.d(t,"t",(function(){return j})),r.d(t,"u",(function(){return w})),r.d(t,"v",(function(){return S})),r.d(t,"w",(function(){return _})),r.d(t,"x",(function(){return F})),r.d(t,"y",(function(){return T})),r.d(t,"z",(function(){return m})),r.d(t,"A",(function(){return M}));var n=r(85),i=(r(99),r(125));function s(e=E){return[e[0],e[1],e[2],e[3],e[4],e[5]]}function o(e,t,r,n,i,o,a=s()){return a[0]=e,a[1]=t,a[2]=r,a[3]=n,a[4]=i,a[5]=o,a}function a(e,t){e[0]=Math.min(e[0],t[0]),e[1]=Math.min(e[1],t[1]),e[2]=Math.min(e[2],t[2]),e[3]=Math.max(e[3],t[3]),e[4]=Math.max(e[4],t[4]),e[5]=Math.max(e[5],t[5])}function c(e,t){e[0]=Math.min(e[0],t[0]),e[1]=Math.min(e[1],t[1]),e[3]=Math.max(e[3],t[2]),e[4]=Math.max(e[4],t[3])}function l(e,t){e[0]=Math.min(e[0],t[0]),e[1]=Math.min(e[1],t[1]),e[2]=Math.min(e[2],t[2]),e[3]=Math.max(e[3],t[0]),e[4]=Math.max(e[4],t[1]),e[5]=Math.max(e[5],t[2])}function u(e,t,r=0,n=t.length/3){let i=e[0],s=e[1],o=e[2],a=e[3],c=e[4],l=e[5];for(let u=0;u<n;u++)i=Math.min(i,t[r+3*u]),s=Math.min(s,t[r+3*u+1]),o=Math.min(o,t[r+3*u+2]),a=Math.max(a,t[r+3*u]),c=Math.max(c,t[r+3*u+1]),l=Math.max(l,t[r+3*u+2]);e[0]=i,e[1]=s,e[2]=o,e[3]=a,e[4]=c,e[5]=l}function d(e,t,r){const n=t.length;let i=e[0],s=e[1],o=e[2],a=e[3],c=e[4],l=e[5];if(r)for(let u=0;u<n;u++){const e=t[u];i=Math.min(i,e[0]),s=Math.min(s,e[1]),o=Math.min(o,e[2]),a=Math.max(a,e[0]),c=Math.max(c,e[1]),l=Math.max(l,e[2])}else for(let u=0;u<n;u++){const e=t[u];i=Math.min(i,e[0]),s=Math.min(s,e[1]),a=Math.max(a,e[0]),c=Math.max(c,e[1])}e[0]=i,e[1]=s,e[2]=o,e[3]=a,e[4]=c,e[5]=l}function h(e){for(let t=0;t<6;t++)if(!isFinite(e[t]))return!1;return!0}function p(e){return e[0]>=e[3]?0:e[3]-e[0]}function f(e){return e[1]>=e[4]?0:e[4]-e[1]}function b(e){return e[2]>=e[5]?0:e[5]-e[2]}function y(e){const t=p(e),r=b(e),n=f(e);return Math.sqrt(t*t+r*r+n*n)}function g(e,t=[0,0,0]){return t[0]=e[0]+p(e)/2,t[1]=e[1]+f(e)/2,t[2]=e[2]+b(e)/2,t}function m(e,t=[0,0,0]){return t[0]=p(e),t[1]=f(e),t[2]=b(e),t}function j(e){return Math.max(p(e),b(e),f(e))}function O(e,t){return t[0]>=e[0]&&t[1]>=e[1]&&t[2]>=e[2]&&t[0]<=e[3]&&t[1]<=e[4]&&t[2]<=e[5]}function v(e,t){return!!Object(n.j)(t)||function(e,t){return Math.max(t[0],e[0])<=Math.min(t[3],e[3])&&Math.max(t[1],e[1])<=Math.min(t[4],e[4])&&Math.max(t[2],e[2])<=Math.min(t[5],e[5])}(e,t)}function w(e,t,r,n,i=e){return i[0]=e[0]+t,i[1]=e[1]+r,i[2]=e[2]+n,i[3]=e[3]+t,i[4]=e[4]+r,i[5]=e[5]+n,i}function S(e,t,r=e){const n=e[0]+p(e)/2,i=e[1]+f(e)/2,s=e[2]+b(e)/2;return r[0]=n+(e[0]-n)*t,r[1]=i+(e[1]-i)*t,r[2]=s+(e[2]-s)*t,r[3]=n+(e[3]-n)*t,r[4]=i+(e[4]-i)*t,r[5]=s+(e[5]-s)*t,r}function x(e,t){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t}function T(e,t,r=e){return r[0]=t[0],r[1]=t[1],r[2]=t[2],r!==e&&(r[3]=e[3],r[4]=e[4],r[5]=e[5]),r}function F(e,t,r=e){return r[3]=t[0],r[4]=t[1],r[5]=t[2],r!==e&&(r[0]=e[0],r[1]=e[1],r[2]=e[2]),e}function _(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e}function I(e){return e?_(e,C):s(C)}function M(e,t){return t||(t=Object(i.l)()),t[0]=e[0],t[1]=e[1],t[2]=e[3],t[3]=e[4],t}function k(e,t){return e[0]=t[0],e[1]=t[1],e[2]=Number.NEGATIVE_INFINITY,e[3]=t[2],e[4]=t[3],e[5]=Number.POSITIVE_INFINITY,e}function R(e){return 6===e.length}function P(e){return 0===p(e)&&0===f(e)&&0===b(e)}function N(e,t,r){if(Object(n.j)(e)||Object(n.j)(t))return e===t;if(!R(e)||!R(t))return!1;if(r){for(let n=0;n<e.length;n++)if(!r(e[n],t[n]))return!1}else for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}const C=[1/0,1/0,1/0,-1/0,-1/0,-1/0],E=[0,0,0,0,0,0];s()},279:function(e,t,r){"use strict";r.d(t,"a",(function(){return n}));class n{constructor(){this.objectIdFieldName=null,this.globalIdFieldName=null,this.geohashFieldName=null,this.geometryProperties=null,this.geometryType=null,this.spatialReference=null,this.hasZ=!1,this.hasM=!1,this.features=[],this.fields=[],this.transform=null,this.exceededTransferLimit=!1,this.uniqueIdField=null,this.queryGeometryType=null,this.queryGeometry=null}weakClone(){const e=new n;return e.objectIdFieldName=this.objectIdFieldName,e.globalIdFieldName=this.globalIdFieldName,e.geohashFieldName=this.geohashFieldName,e.geometryProperties=this.geometryProperties,e.geometryType=this.geometryType,e.spatialReference=this.spatialReference,e.hasZ=this.hasZ,e.hasM=this.hasM,e.features=this.features,e.fields=this.fields,e.transform=this.transform,e.exceededTransferLimit=this.exceededTransferLimit,e.uniqueIdField=this.uniqueIdField,e.queryGeometry=this.queryGeometry,e.queryGeometryType=this.queryGeometryType,e}}},290:function(e,t,r){"use strict";r.d(t,"a",(function(){return u}));var n,i=r(81),s=r(86),o=r(83),a=(r(79),r(84)),c=(r(80),r(97)),l=r(82);let u=n=class extends s.a{constructor(e){super(e),this.type="map-layer"}clone(){const{mapLayerId:e,gdbVersion:t}=this;return new n({mapLayerId:e,gdbVersion:t})}};Object(i.a)([Object(c.a)({mapLayer:"map-layer"})],u.prototype,"type",void 0),Object(i.a)([Object(o.b)({type:a.a,json:{write:!0}})],u.prototype,"mapLayerId",void 0),Object(i.a)([Object(o.b)({type:String,json:{write:!0}})],u.prototype,"gdbVersion",void 0),u=n=Object(i.a)([Object(l.a)("esri.layers.support.source.MapLayerSource")],u)},292:function(e,t,r){"use strict";r.d(t,"a",(function(){return p}));var n,i=r(81),s=(r(98),r(90)),o=r(86),a=r(87),c=r(83),l=(r(84),r(79),r(80),r(82)),u=r(99);const d=new s.a({upperLeft:"upper-left",lowerLeft:"lower-left"});let h=n=class extends o.a{constructor(e){super(e),this.extent=null,this.mode="view",this.originPosition="upper-left",this.tolerance=1}clone(){return new n(Object(a.a)({extent:this.extent,mode:this.mode,originPosition:this.originPosition,tolerance:this.tolerance}))}};Object(i.a)([Object(c.b)({type:u.a,json:{write:{overridePolicy(){return{enabled:"view"===this.mode}}}}})],h.prototype,"extent",void 0),Object(i.a)([Object(c.b)({type:["view","edit"],json:{write:!0}})],h.prototype,"mode",void 0),Object(i.a)([Object(c.b)({type:String,json:{read:d.read,write:d.write}})],h.prototype,"originPosition",void 0),Object(i.a)([Object(c.b)({type:Number,json:{write:{overridePolicy(){return{enabled:"view"===this.mode}}}}})],h.prototype,"tolerance",void 0),h=n=Object(i.a)([Object(l.a)("esri.rest.support.QuantizationParameters")],h);var p=h},300:function(e,t,r){"use strict";r.d(t,"a",(function(){return p}));var n=r(81),i=r(92),s=r(117),o=r(85),a=r(229),c=r(109),l=r(193),u=r(194),d=r(83),h=r(82);let p=class extends i.a{constructor(){super(...arguments),this.updating=!1,this.handleId=0,this.handles=new s.a,this.scheduleHandleId=0,this.pendingPromises=new Set}destroy(){this.removeAll(),this.handles.destroy()}add(e,t,r,n=0){const i=0!=(1&n),s=++this.handleId;i||this.installSyncUpdatingWatch(e,t,s);const o=0!=(2&n)?Object(c.a)(e,t,r,i):e.watch(t,r,i);return this.handles.add(o,s),{remove:()=>this.handles.remove(s)}}addOnCollectionPropertyChange(e,t,r,n=0){const i=0!=(2&n),s=++this.handleId;return this.handles.add([Object(c.b)(e,t,"after-changes",this.createSyncUpdatingCallback()),Object(c.b)(e,t,"change",r,i?e=>{r({added:e.items,removed:[],moved:[],target:e})}:void 0)],s),{remove:()=>{this.handles.remove(s)}}}addOnCollectionChange(e,t,r=0){const n=0!=(2&r),i=++this.handleId;return this.handles.add([e.on("after-changes",this.createSyncUpdatingCallback()),e.on("change",t)],i),n&&t({added:e.items,removed:[],moved:[],target:e}),{remove:()=>{this.handles.remove(i)}}}addPromise(e){if(Object(o.j)(e))return e;const t=++this.handleId;this.handles.add({remove:()=>{this.pendingPromises.delete(e)&&(0!==this.pendingPromises.size||this.handles.has(f)||this._set("updating",!1))}},t),this.pendingPromises.add(e),this._set("updating",!0);const r=()=>this.handles.remove(t);return e.then(r,r),e}removeAll(){this.pendingPromises.clear(),this.handles.removeAll(),this._set("updating",!1)}installSyncUpdatingWatch(e,t,r){const n=this.createSyncUpdatingCallback(),i=Object(u.b)((()=>Object(l.c)(e,t)),n);return this.handles.add(i,r),i}createSyncUpdatingCallback(){return()=>{this.handles.remove(f),++this.scheduleHandleId;const e=this.scheduleHandleId;this._get("updating")||this._set("updating",!0),this.handles.add(Object(a.b)((()=>{e===this.scheduleHandleId&&(this._set("updating",this.pendingPromises.size>0),this.handles.remove(f))})),f)}}};Object(n.a)([Object(d.b)({readOnly:!0})],p.prototype,"updating",void 0),p=Object(n.a)([Object(h.a)("esri.views.support.WatchUpdatingTracking")],p);const f=-42},360:function(e,t,r){"use strict";r.d(t,"a",(function(){return c}));var n=r(79),i=r(191);const s=4294967296,o=Object(n.a)("esri-text-decoder")?new TextDecoder("utf-8"):null,a=Object(n.a)("safari")||Object(n.a)("ios")?6:Object(n.a)("ff")?12:32;class c{constructor(e,t,r=0,n=(e?e.byteLength:0)){this._tag=0,this._dataType=99,this.init(e,t,r,n)}init(e,t,r,n){this._data=e,this._dataView=t,this._pos=r,this._end=n}clone(){return new c(this._data,this._dataView,this._pos,this._end)}pos(){return this._pos}move(e){this._pos=e}nextTag(e){for(;;){if(this._pos===this._end)return!1;const t=this._decodeVarint();if(this._tag=t>>3,this._dataType=7&t,!e||e===this._tag)break;this.skip()}return!0}next(){if(this._pos===this._end)return!1;const e=this._decodeVarint();return this._tag=e>>3,this._dataType=7&e,!0}empty(){return this._pos>=this._end}tag(){return this._tag}getInt32(){return this._decodeVarint()}getInt64(){return this._decodeVarint()}getUInt32(){let e=4294967295;return e=(127&this._data[this._pos])>>>0,this._data[this._pos++]<128?e:(e=(e|(127&this._data[this._pos])<<7)>>>0,this._data[this._pos++]<128?e:(e=(e|(127&this._data[this._pos])<<14)>>>0,this._data[this._pos++]<128?e:(e=(e|(127&this._data[this._pos])<<21)>>>0,this._data[this._pos++]<128?e:(e=(e|(15&this._data[this._pos])<<28)>>>0,this._data[this._pos++]<128?e:void 0))))}getUInt64(){return this._decodeVarint()}getSInt32(){const e=this.getUInt32();return e>>>1^-(1&e)|0}getSInt64(){return this._decodeSVarint()}getBool(){const e=0!==this._data[this._pos];return this._skip(1),e}getEnum(){return this._decodeVarint()}getFixed64(){const e=this._dataView,t=this._pos,r=e.getUint32(t,!0)+e.getUint32(t+4,!0)*s;return this._skip(8),r}getSFixed64(){const e=this._dataView,t=this._pos,r=e.getUint32(t,!0)+e.getInt32(t+4,!0)*s;return this._skip(8),r}getDouble(){const e=this._dataView.getFloat64(this._pos,!0);return this._skip(8),e}getFixed32(){const e=this._dataView.getUint32(this._pos,!0);return this._skip(4),e}getSFixed32(){const e=this._dataView.getInt32(this._pos,!0);return this._skip(4),e}getFloat(){const e=this._dataView.getFloat32(this._pos,!0);return this._skip(4),e}getString(){const e=this._getLength(),t=this._pos,r=this._toString(this._data,t,t+e);return this._skip(e),r}getBytes(){const e=this._getLength(),t=this._pos,r=this._toBytes(this._data,t,t+e);return this._skip(e),r}getLength(){return this._getLengthUnsafe()}processMessageWithArgs(e,t,r,n){const i=this.getMessage(),s=e(i,t,r,n);return i.release(),s}processMessage(e){const t=this.getMessage(),r=e(t);return t.release(),r}getMessage(){const e=this._getLength(),t=c.pool.acquire();return t.init(this._data,this._dataView,this._pos,this._pos+e),this._skip(e),t}release(){c.pool.release(this)}dataType(){return this._dataType}skip(){switch(this._dataType){case 0:this._decodeVarint();break;case 1:this._skip(8);break;case 2:this._skip(this._getLength());break;case 5:this._skip(4);break;default:throw new Error("Invalid data type!")}}skipLen(e){this._skip(e)}_skip(e){if(this._pos+e>this._end)throw new Error("Attempt to skip past the end of buffer!");this._pos+=e}_decodeVarint(){const e=this._data;let t,r=this._pos,n=0;if(this._end-r>=10)do{if(t=e[r++],n|=127&t,0==(128&t))break;if(t=e[r++],n|=(127&t)<<7,0==(128&t))break;if(t=e[r++],n|=(127&t)<<14,0==(128&t))break;if(t=e[r++],n|=(127&t)<<21,0==(128&t))break;if(t=e[r++],n+=268435456*(127&t),0==(128&t))break;if(t=e[r++],n+=34359738368*(127&t),0==(128&t))break;if(t=e[r++],n+=4398046511104*(127&t),0==(128&t))break;if(t=e[r++],n+=562949953421312*(127&t),0==(128&t))break;if(t=e[r++],n+=72057594037927940*(127&t),0==(128&t))break;if(t=e[r++],n+=0x8000000000000000*(127&t),0==(128&t))break;throw new Error("Varint too long!")}while(0);else{let i=1;for(;r!==this._end&&(t=e[r],0!=(128&t));)++r,n+=(127&t)*i,i*=128;if(r===this._end)throw new Error("Varint overrun!");++r,n+=t*i}return this._pos=r,n}_decodeSVarint(){const e=this._decodeVarint();return e%2?-(e+1)/2:e/2}_getLength(){if(2!==this._dataType)throw new Error("Not a delimited data type!");return this._decodeVarint()}_getLengthUnsafe(){return this.getUInt32()}_toString(e,t,r){if((r=Math.min(this._end,r))-t>a&&o){const n=e.subarray(t,r);return o.decode(n)}let n="",i="";for(let s=t;s<r;++s){const t=e[s];128&t?i+="%"+t.toString(16):(n+=decodeURIComponent(i)+String.fromCharCode(t),i="")}return i.length&&(n+=decodeURIComponent(i)),n}_toBytes(e,t,r){return r=Math.min(this._end,r),new Uint8Array(e.buffer,t,r-t)}}c.pool=new i.a(c,null,(e=>{e._data=null,e._dataView=null}))},361:function(e,t,r){"use strict";r.d(t,"a",(function(){return w}));var n,i=r(81),s=r(90),o=r(86),a=r(85),c=r(112),l=r(83),u=(r(79),r(84)),d=(r(80),r(94)),h=r(82),p=r(91),f=r(110),b=r(93),y=r(125),g=r(106),m=r(158),j=r(476);const O=new s.a({PNG:"png",PNG8:"png8",PNG24:"png24",PNG32:"png32",JPEG:"jpg",JPG:"jpg",DIB:"dib",TIFF:"tiff",EMF:"emf",PS:"ps",PDF:"pdf",GIF:"gif",SVG:"svg",SVGZ:"svgz",Mixed:"mixed",MIXED:"mixed",LERC:"lerc",LERC2D:"lerc2d",RAW:"raw",pbf:"pbf"});let v=n=class extends o.a{constructor(e){super(e),this.dpi=96,this.format=null,this.origin=null,this.minScale=0,this.maxScale=0,this.size=null,this.spatialReference=null}static create(e={}){const{resolutionFactor:t=1,scales:r,size:i=256,spatialReference:s=b.a.WebMercator,numLODs:o=24}=e;if(!Object(g.l)(s)){const e=[];if(r)for(let t=0;t<r.length;t++){const n=r[t];e.push({level:t,scale:n,resolution:n})}else{let t=5e-4;for(let r=o-1;r>=0;r--)e.unshift({level:r,scale:t,resolution:t}),t*=2}return new n({dpi:96,lods:e,origin:new f.a(0,0,s),size:[i,i],spatialReference:s})}const a=Object(g.e)(s),l=e.origin?new f.a({x:e.origin.x,y:e.origin.y,spatialReference:s}):new f.a(a?{x:a.origin[0],y:a.origin[1],spatialReference:s}:{x:0,y:0,spatialReference:s}),u=1/(39.37*Object(c.f)(s)*96),d=[];if(r)for(let n=0;n<r.length;n++){const e=r[n],t=e*u;d.push({level:n,scale:e,resolution:t})}else{let e=Object(g.h)(s)?512/i*591657527.5917094:256/i*591657527.591555;const r=Math.ceil(o/t);d.push({level:0,scale:e,resolution:e*u});for(let n=1;n<r;n++){const r=e/2**t,i=r*u;d.push({level:n,scale:r,resolution:i}),e=r}}return new n({dpi:96,lods:d,origin:l,size:[i,i],spatialReference:s})}get isWrappable(){const{spatialReference:e,origin:t}=this;if(e&&t){const r=Object(g.e)(e);return e.isWrappable&&Math.abs(r.origin[0]-t.x)<=r.dx}return!1}readOrigin(e,t){return f.a.fromJSON({spatialReference:t.spatialReference,...e})}set lods(e){let t=0,r=0;const n=[];this._levelToLOD={},e&&(t=-1/0,r=1/0,e.forEach((e=>{n.push(e.scale),t=e.scale>t?e.scale:t,r=e.scale<r?e.scale:r,this._levelToLOD[e.level]=e}))),this._set("scales",n),this._set("minScale",t),this._set("maxScale",r),this._set("lods",e),this._initializeUpsampleLevels()}readSize(e,t){return[t.cols,t.rows]}writeSize(e,t){t.cols=e[0],t.rows=e[1]}zoomToScale(e){const t=this.scales;if(e<=0)return t[0];if(e>=t.length-1)return t[t.length-1];{const r=Math.floor(e),n=r+1;return t[r]/(t[r]/t[n])**(e-r)}}scaleToZoom(e){const t=this.scales,r=t.length-1;let n=0;for(;n<r;n++){const r=t[n],i=t[n+1];if(r<=e)return n;if(i===e)return n+1;if(r>e&&i<e)return n+Math.log(r/e)/Math.log(r/i)}return n}snapScale(e,t=.95){const r=this.scaleToZoom(e);return r%Math.floor(r)>=t?this.zoomToScale(Math.ceil(r)):this.zoomToScale(Math.floor(r))}tileAt(e,t,r,n){const i=this.lodAt(e);if(!i)return null;let s,o;if("number"==typeof t)s=t,o=r;else if(Object(g.d)(t.spatialReference,this.spatialReference))s=t.x,o=t.y,n=r;else{const e=Object(m.d)(t,this.spatialReference);if(Object(a.j)(e))return null;s=e.x,o=e.y,n=r}const c=i.resolution*this.size[0],l=i.resolution*this.size[1];return n||(n={id:null,level:0,row:0,col:0,extent:Object(y.l)()}),n.level=e,n.row=Math.floor((this.origin.y-o)/l+.001),n.col=Math.floor((s-this.origin.x)/c+.001),this.updateTileInfo(n),n}updateTileInfo(e,t=0){let r=this.lodAt(e.level);if(!r&&1===t){const t=this.lods[this.lods.length-1];t.level<e.level&&(r=t)}if(!r)return;const n=e.level-r.level,i=r.resolution*this.size[0]/2**n,s=r.resolution*this.size[1]/2**n;e.id=`${e.level}/${e.row}/${e.col}`,e.extent||(e.extent=Object(y.l)()),e.extent[0]=this.origin.x+e.col*i,e.extent[1]=this.origin.y-(e.row+1)*s,e.extent[2]=e.extent[0]+i,e.extent[3]=e.extent[1]+s}upsampleTile(e){const t=this._upsampleLevels[e.level];return!(!t||-1===t.parentLevel)&&(e.level=t.parentLevel,e.row=Math.floor(e.row/t.factor+.001),e.col=Math.floor(e.col/t.factor+.001),this.updateTileInfo(e),!0)}getTileBounds(e,t){const{resolution:r}=this.lodAt(t.level),n=r*this.size[0],i=r*this.size[1];return e[0]=this.origin.x+t.col*n,e[1]=this.origin.y-(t.row+1)*i,e[2]=e[0]+n,e[3]=e[1]+i,e}lodAt(e){return this._levelToLOD&&this._levelToLOD[e]||null}clone(){return n.fromJSON(this.write({}))}_initializeUpsampleLevels(){const e=this.lods;this._upsampleLevels=[];let t=null;for(let r=0;r<e.length;r++){const n=e[r];this._upsampleLevels[n.level]={parentLevel:t?t.level:-1,factor:t?t.resolution/n.resolution:0},t=n}}};Object(i.a)([Object(l.b)({type:Number,json:{write:!0}})],v.prototype,"compressionQuality",void 0),Object(i.a)([Object(l.b)({type:Number,json:{write:!0}})],v.prototype,"dpi",void 0),Object(i.a)([Object(l.b)({type:String,json:{read:O.read,write:O.write,origins:{"web-scene":{read:!1,write:!1}}}})],v.prototype,"format",void 0),Object(i.a)([Object(l.b)({readOnly:!0})],v.prototype,"isWrappable",null),Object(i.a)([Object(l.b)({type:f.a,json:{write:!0}})],v.prototype,"origin",void 0),Object(i.a)([Object(d.a)("origin")],v.prototype,"readOrigin",null),Object(i.a)([Object(l.b)({type:[j.a],value:null,json:{write:!0}})],v.prototype,"lods",null),Object(i.a)([Object(l.b)({readOnly:!0})],v.prototype,"minScale",void 0),Object(i.a)([Object(l.b)({readOnly:!0})],v.prototype,"maxScale",void 0),Object(i.a)([Object(l.b)({readOnly:!0})],v.prototype,"scales",void 0),Object(i.a)([Object(l.b)({cast:e=>Array.isArray(e)?e:"number"==typeof e?[e,e]:[256,256]})],v.prototype,"size",void 0),Object(i.a)([Object(d.a)("size",["rows","cols"])],v.prototype,"readSize",null),Object(i.a)([Object(p.a)("size",{cols:{type:u.a},rows:{type:u.a}})],v.prototype,"writeSize",null),Object(i.a)([Object(l.b)({type:b.a,json:{write:!0}})],v.prototype,"spatialReference",void 0),v=n=Object(i.a)([Object(h.a)("esri.layers.support.TileInfo")],v);var w=v},379:function(e,t,r){"use strict";r.d(t,"a",(function(){return c})),r.d(t,"b",(function(){return l}));var n=r(112),i=r(106),s=r(237),o=r(279),a=r(167);const c=["esriGeometryPoint","esriGeometryMultipoint","esriGeometryPolyline","esriGeometryPolygon"];class l{constructor(e){this.options=e,this.geometryTypes=c,this._coordinatePtr=0,this._vertexDimension=0}createFeatureResult(){return new o.a}prepareFeatures(e){this._vertexDimension=2,e.hasZ&&this._vertexDimension++,e.hasM&&this._vertexDimension++}finishFeatureResult(e){if(!e||!e.features||!e.hasZ||!this.options.sourceSpatialReference||!e.spatialReference||Object(i.d)(e.spatialReference,this.options.sourceSpatialReference)||e.spatialReference.vcsWkid)return;const t=Object(n.g)(this.options.sourceSpatialReference)/Object(n.g)(e.spatialReference);if(1!==t)for(const r of e.features){if(!Object(s.c)(r))continue;const e=r.geometry.coords;for(let r=2;r<e.length;r+=3)e[r]*=t}}addFeature(e,t){e.features.push(t)}createFeature(){return new s.b}createSpatialReference(){return{wkid:0}}createGeometry(){return new a.a}addField(e,t){e.fields.push(t)}allocateCoordinates(e){e.coords.length=e.lengths.reduce(((e,t)=>e+t),0)*this._vertexDimension,this._coordinatePtr=0}addCoordinate(e,t){e.coords[this._coordinatePtr++]=t}addCoordinatePoint(e,t){e.coords.push(t)}addLength(e,t){e.lengths.push(t)}addQueryGeometry(e,t){e.queryGeometry=t.queryGeometry,e.queryGeometryType=t.queryGeometryType}createPointGeometry(){return new a.a}}},391:function(e,t,r){"use strict";r.d(t,"a",(function(){return M})),r.d(t,"b",(function(){return d})),r.d(t,"c",(function(){return x}));var n=r(88),i=r(85),s=r(360),o=r(167),a=r(379);const c=["esriFieldTypeSmallInteger","esriFieldTypeInteger","esriFieldTypeSingle","esriFieldTypeDouble","esriFieldTypeString","esriFieldTypeDate","esriFieldTypeOID","esriFieldTypeGeometry","esriFieldTypeBlob","esriFieldTypeRaster","esriFieldTypeGUID","esriFieldTypeGlobalID","esriFieldTypeXML"],l=["sqlTypeBigInt","sqlTypeBinary","sqlTypeBit","sqlTypeChar","sqlTypeDate","sqlTypeDecimal","sqlTypeDouble","sqlTypeFloat","sqlTypeGeometry","sqlTypeGUID","sqlTypeInteger","sqlTypeLongNVarchar","sqlTypeLongVarbinary","sqlTypeLongVarchar","sqlTypeNChar","sqlTypeNVarchar","sqlTypeOther","sqlTypeReal","sqlTypeSmallInt","sqlTypeSqlXml","sqlTypeTime","sqlTypeTimestamp","sqlTypeTimestamp2","sqlTypeTinyInt","sqlTypeVarbinary","sqlTypeVarchar"],u=["upperLeft","lowerLeft"];function d(e){return e>=c.length?null:c[e]}function h(e){return e>=l.length?null:l[e]}function p(e){return e>=u.length?null:u[e]}function f(e,t){return t>=e.geometryTypes.length?null:e.geometryTypes[t]}function b(e,t,r){const n=t.createPointGeometry(r);for(;e.next();)switch(e.tag()){case 3:{const r=e.getUInt32(),i=e.pos()+r;let s=0;for(;e.pos()<i;)t.addCoordinatePoint(n,e.getSInt64(),s++);break}default:e.skip()}return n}function y(e,t,r){const n=t.createGeometry(r),i=2+(r.hasZ?1:0)+(r.hasM?1:0);for(;e.next();)switch(e.tag()){case 2:{const r=e.getUInt32(),i=e.pos()+r;let s=0;for(;e.pos()<i;)t.addLength(n,e.getUInt32(),s++);break}case 3:{const r=e.getUInt32(),s=e.pos()+r;let o=0;for(t.allocateCoordinates(n);e.pos()<s;)t.addCoordinate(n,e.getSInt64(),o),o++,o===i&&(o=0);break}default:e.skip()}return n}function g(e){const t=new o.a;let r="esriGeometryPoint";for(;e.next();)switch(e.tag()){case 2:{const r=e.getUInt32(),n=e.pos()+r;for(;e.pos()<n;)t.lengths.push(e.getUInt32());break}case 3:{const r=e.getUInt32(),n=e.pos()+r;for(;e.pos()<n;)t.coords.push(e.getSInt64());break}case 1:r=a.a[e.getEnum()];break;default:e.skip()}return{queryGeometry:t,queryGeometryType:r}}function m(e){for(;e.next();)switch(e.tag()){case 1:return e.getString();case 2:return e.getFloat();case 3:return e.getDouble();case 4:return e.getSInt32();case 5:return e.getUInt32();case 6:return e.getInt64();case 7:return e.getUInt64();case 8:return e.getSInt64();case 9:return e.getBool();default:return e.skip(),null}return null}function j(e){const t={type:d(0)};for(;e.next();)switch(e.tag()){case 1:t.name=e.getString();break;case 2:t.type=d(e.getEnum());break;case 3:t.alias=e.getString();break;case 4:t.sqlType=h(e.getEnum());break;default:e.skip();break;case 6:t.defaultValue=e.getString()}return t}function O(e){const t={};for(;e.next();)switch(e.tag()){case 1:t.name=e.getString();break;case 2:t.isSystemMaintained=e.getBool();break;default:e.skip()}return t}function v(e,t,r,n){const i=t.createFeature(r);let s=0;for(;e.next();)switch(e.tag()){case 1:{const t=n[s++].name;i.attributes[t]=e.processMessage(m);break}case 2:i.geometry=e.processMessageWithArgs(y,t,r);break;case 4:i.centroid=e.processMessageWithArgs(b,t,r);break;default:e.skip()}return i}function w(e){const t=[1,1,1,1];for(;e.next();)switch(e.tag()){case 1:t[0]=e.getDouble();break;case 2:t[1]=e.getDouble();break;case 4:t[2]=e.getDouble();break;case 3:t[3]=e.getDouble();break;default:e.skip()}return t}function S(e){const t=[0,0,0,0];for(;e.next();)switch(e.tag()){case 1:t[0]=e.getDouble();break;case 2:t[1]=e.getDouble();break;case 4:t[2]=e.getDouble();break;case 3:t[3]=e.getDouble();break;default:e.skip()}return t}function x(e){const t={originPosition:p(0)};for(;e.next();)switch(e.tag()){case 1:t.originPosition=p(e.getEnum());break;case 2:t.scale=e.processMessage(w);break;case 3:t.translate=e.processMessage(S);break;default:e.skip()}return t}function T(e){const t={};for(;e.next();)switch(e.tag()){case 1:t.shapeAreaFieldName=e.getString();break;case 2:t.shapeLengthFieldName=e.getString();break;case 3:t.units=e.getString();break;default:e.skip()}return t}function F(e,t){const r=t.createSpatialReference();for(;e.next();)switch(e.tag()){case 1:r.wkid=e.getUInt32();break;case 5:r.wkt=e.getString();break;case 2:r.latestWkid=e.getUInt32();break;case 3:r.vcsWkid=e.getUInt32();break;case 4:r.latestVcsWkid=e.getUInt32();break;default:e.skip()}return r}function _(e,t){const r=t.createFeatureResult();r.geometryType=f(t,0);let n=!1;for(;e.next();)switch(e.tag()){case 1:r.objectIdFieldName=e.getString();break;case 3:r.globalIdFieldName=e.getString();break;case 4:r.geohashFieldName=e.getString();break;case 5:r.geometryProperties=e.processMessage(T);break;case 7:r.geometryType=f(t,e.getEnum());break;case 8:r.spatialReference=e.processMessageWithArgs(F,t);break;case 10:r.hasZ=e.getBool();break;case 11:r.hasM=e.getBool();break;case 12:r.transform=e.processMessage(x);break;case 9:{const t=e.getBool();r.exceededTransferLimit=t;break}case 13:t.addField(r,e.processMessage(j));break;case 15:n||(t.prepareFeatures(r),n=!0),t.addFeature(r,e.processMessageWithArgs(v,t,r,r.fields));break;case 2:r.uniqueIdField=e.processMessage(O);break;default:e.skip()}return t.finishFeatureResult(r),r}function I(e,t){const r={};let n=null;for(;e.next();)switch(e.tag()){case 4:n=e.processMessageWithArgs(g);break;case 1:r.featureResult=e.processMessageWithArgs(_,t);break;default:e.skip()}return Object(i.k)(n)&&r.featureResult&&t.addQueryGeometry(r,n),r}function M(e,t){try{const r=2,n=new s.a(new Uint8Array(e),new DataView(e)),i={};for(;n.next();)n.tag()===r?i.queryResult=n.processMessageWithArgs(I,t):n.skip();return i}catch(r){throw new n.a("query:parsing-pbf","Error while parsing FeatureSet PBF payload",{error:r})}}},392:function(e,t,r){"use strict";r.d(t,"a",(function(){return s})),r.d(t,"b",(function(){return c})),r.d(t,"c",(function(){return l})),r.d(t,"d",(function(){return i}));var n=r(139);const i=Math.PI/180,s=/SPHEROID\[([^\]]+)]/i,o=n.a.radius,a=n.a.eccentricitySquared,c={a1:o*a,a2:o*a*o*a,a3:o*a*a/2,a4:o*a*o*a*2.5,a5:o*a+o*a*a/2,a6:1-a},l={4267:{a:6378206.4,f:1/294.9786982},4269:{a:6378137,f:1/298.257222101},4326:{a:n.a.radius,f:n.a.flattening},104900:{a:2439700,f:0},104901:{a:6051e3,f:0},104902:{a:6051800,f:0},104903:{a:n.c.radius,f:n.c.flattening},104904:{a:3393400,f:1/192.0430107526882},104905:{a:n.b.radius,f:n.b.flattening},104906:{a:6200,f:0},104907:{a:11100,f:0},104908:{a:71492e3,f:.06487439154031222},104909:{a:8200,f:0},104910:{a:83500,f:0},104911:{a:1e4,f:0},104912:{a:2409300,f:0},104913:{a:15e3,f:0},104914:{a:4e4,f:0},104915:{a:1562090,f:0},104916:{a:2632345,f:0},104917:{a:85e3,f:0},104918:{a:1821460,f:0},104919:{a:5e3,f:0},104920:{a:12e3,f:0},104921:{a:3e4,f:3},104922:{a:18e3,f:0},104923:{a:14e3,f:0},104924:{a:49300,f:0},104925:{a:60268e3,f:1/10.2079945799458},104926:{a:16e3,f:0},104927:{a:9500,f:0},104928:{a:56e4,f:0},104929:{a:249400,f:0},104930:{a:59500,f:0},104931:{a:16e3,f:0},104932:{a:133e3,f:0},104933:{a:718e3,f:0},104934:{a:888e3,f:0},104935:{a:1986300,f:0},104936:{a:1e4,f:0},104937:{a:41900,f:0},104938:{a:11e4,f:0},104939:{a:50100,f:0},104940:{a:764e3,f:0},104941:{a:11e3,f:0},104942:{a:529800,f:0},104943:{a:2575e3,f:0},104944:{a:25559e3,f:1/43.61604095563141},104945:{a:578900,f:0},104946:{a:33e3,f:0},104947:{a:21e3,f:0},104948:{a:13e3,f:0},104949:{a:31e3,f:0},104950:{a:27e3,f:0},104951:{a:42e3,f:0},104952:{a:235800,f:0},104953:{a:761400,f:0},104954:{a:15e3,f:0},104955:{a:54e3,f:0},104956:{a:77e3,f:0},104957:{a:27e3,f:0},104958:{a:788900,f:0},104959:{a:584700,f:0},104960:{a:24764e3,f:.01708124697141011},104961:{a:74e3,f:0},104962:{a:79e3,f:0},104963:{a:104e3,f:.14423076923076922},104964:{a:29e3,f:0},104965:{a:17e4,f:0},104966:{a:208e3,f:0},104967:{a:4e4,f:0},104968:{a:1352600,f:0},104969:{a:1195e3,f:0},104970:{a:593e3,f:0},104971:{a:n.b.radius,f:0},104972:{a:47e4,f:0},104973:{a:255e3,f:0},104974:{a:2439400,f:0}}},400:function(e,t,r){"use strict";r.d(t,"a",(function(){return i}));var n=r(391);function i(e,t){const r=Object(n.a)(e,t),i=r.queryResult.featureResult,s=r.queryResult.queryGeometry,o=r.queryResult.queryGeometryType;if(i&&i.features&&i.features.length&&i.objectIdFieldName){const e=i.objectIdFieldName;for(const t of i.features)t.attributes&&(t.objectId=t.attributes[e])}return i&&(i.queryGeometry=s,i.queryGeometryType=o),i}},401:function(e,t,r){"use strict";r.d(t,"a",(function(){return i}));var n=r(228);class i{constructor(e,t){this._storage=new n.b,this._storage.maxSize=e,t&&this._storage.registerRemoveFunc("",t)}put(e,t){this._storage.put(e,t,1,1)}pop(e){return this._storage.pop(e)}get(e){return this._storage.get(e)}clear(){this._storage.clearAll()}destroy(){this._storage.destroy()}}},476:function(e,t,r){"use strict";r.d(t,"a",(function(){return u}));var n,i=r(81),s=r(86),o=r(83),a=(r(79),r(84)),c=(r(80),r(82));let l=n=class extends s.a{constructor(e){super(e),this.cols=null,this.level=0,this.levelValue=null,this.resolution=0,this.rows=null,this.scale=0}clone(){return new n({cols:this.cols,level:this.level,levelValue:this.levelValue,resolution:this.resolution,rows:this.rows,scale:this.scale})}};Object(i.a)([Object(o.b)({type:Number,json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],l.prototype,"cols",void 0),Object(i.a)([Object(o.b)({type:a.a,json:{write:!0}})],l.prototype,"level",void 0),Object(i.a)([Object(o.b)({type:String,json:{write:!0}})],l.prototype,"levelValue",void 0),Object(i.a)([Object(o.b)({type:Number,json:{write:!0}})],l.prototype,"resolution",void 0),Object(i.a)([Object(o.b)({type:Number,json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],l.prototype,"rows",void 0),Object(i.a)([Object(o.b)({type:Number,json:{write:!0}})],l.prototype,"scale",void 0),l=n=Object(i.a)([Object(c.a)("esri.layers.support.LOD")],l);var u=l},536:function(e,t,r){"use strict";function n(e){return 32+e.length}function i(e){if(!e)return 0;let t=32;for(const r in e)if(e.hasOwnProperty(r)){const i=e[r];switch(typeof i){case"string":t+=n(i);break;case"number":t+=16;break;case"boolean":t+=4}}return t}function s(e,t){return 32+e.length*t}r.d(t,"a",(function(){return i})),r.d(t,"b",(function(){return s}))}}]);
//# sourceMappingURL=104.37c6f297.chunk.js.map