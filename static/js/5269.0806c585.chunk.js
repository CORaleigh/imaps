"use strict";(globalThis.webpackChunkimaps=globalThis.webpackChunkimaps||[]).push([[5269,256],{70444:(e,t,n)=>{n.d(t,{S$:()=>a,Ue:()=>s,Ws:()=>l,iL:()=>h});var i=n(21530),r=n(11186),o=n(40885);n(11185);function s(e){return e?{ray:(0,o.Ue)(e.ray),c0:e.c0,c1:e.c1}:{ray:(0,o.Ue)(),c0:0,c1:Number.MAX_VALUE}}function h(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:s();return(0,o.JG)(e,t.ray),t.c0=0,t.c1=Number.MAX_VALUE,t}function l(e,t){return d(e,e.c0,t)}function a(e,t){return d(e,e.c1,t)}function d(e,t,n){return(0,r.a)(n,e.ray.origin,(0,r.g)(n,e.ray.direction,t))}new i.x((()=>({c0:0,c1:0,ray:null})))},95773:(e,t,n)=>{n.d(t,{JG:()=>O,Nu:()=>i,Ue:()=>f,hr:()=>E,q_:()=>m,zq:()=>g});var i,r,o,s=n(21530),h=n(14226),l=n(11186),a=n(71353),d=n(90045),c=n(67077),_=n(70444),u=n(55652),T=n(11185);function f(e){return e?[(0,u.Ue)(e[0]),(0,u.Ue)(e[1]),(0,u.Ue)(e[2]),(0,u.Ue)(e[3]),(0,u.Ue)(e[4]),(0,u.Ue)(e[5])]:[(0,u.Ue)(),(0,u.Ue)(),(0,u.Ue)(),(0,u.Ue)(),(0,u.Ue)(),(0,u.Ue)()]}function O(e,t){for(let n=0;n<A.NUM;n++)(0,u.JG)(e[n],t[n])}function m(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:b;const r=(0,h.m)(T.MP.get(),t,e);(0,h.a)(r,r);for(let o=0;o<N.NUM;++o){const e=(0,d.t)(T.o6.get(),p[o],r);(0,l.s)(i[o],e[0]/e[3],e[1]/e[3],e[2]/e[3])}R(n,i)}function R(e,t){(0,u.zk)(t[r.FAR_BOTTOM_LEFT],t[r.NEAR_BOTTOM_LEFT],t[r.NEAR_TOP_LEFT],e[i.LEFT]),(0,u.zk)(t[r.NEAR_BOTTOM_RIGHT],t[r.FAR_BOTTOM_RIGHT],t[r.FAR_TOP_RIGHT],e[i.RIGHT]),(0,u.zk)(t[r.FAR_BOTTOM_LEFT],t[r.FAR_BOTTOM_RIGHT],t[r.NEAR_BOTTOM_RIGHT],e[i.BOTTOM]),(0,u.zk)(t[r.NEAR_TOP_LEFT],t[r.NEAR_TOP_RIGHT],t[r.FAR_TOP_RIGHT],e[i.TOP]),(0,u.zk)(t[r.NEAR_BOTTOM_LEFT],t[r.NEAR_BOTTOM_RIGHT],t[r.NEAR_TOP_RIGHT],e[i.NEAR]),(0,u.zk)(t[r.FAR_BOTTOM_RIGHT],t[r.FAR_BOTTOM_LEFT],t[r.FAR_TOP_LEFT],e[i.FAR])}function E(e,t){for(let n=0;n<A.NUM;n++){const i=e[n];if(i[0]*t[0]+i[1]*t[1]+i[2]*t[2]+i[3]>=t[3])return!1}return!0}function g(e,t){for(let n=0;n<A.NUM;n++){const i=e[n];if(!(0,u.Er)(i,t))return!1}return!0}(o=i||(i={}))[o.LEFT=0]="LEFT",o[o.RIGHT=1]="RIGHT",o[o.BOTTOM=2]="BOTTOM",o[o.TOP=3]="TOP",o[o.NEAR=4]="NEAR",o[o.FAR=5]="FAR",function(e){e[e.NEAR_BOTTOM_LEFT=0]="NEAR_BOTTOM_LEFT",e[e.NEAR_BOTTOM_RIGHT=1]="NEAR_BOTTOM_RIGHT",e[e.NEAR_TOP_RIGHT=2]="NEAR_TOP_RIGHT",e[e.NEAR_TOP_LEFT=3]="NEAR_TOP_LEFT",e[e.FAR_BOTTOM_LEFT=4]="FAR_BOTTOM_LEFT",e[e.FAR_BOTTOM_RIGHT=5]="FAR_BOTTOM_RIGHT",e[e.FAR_TOP_RIGHT=6]="FAR_TOP_RIGHT",e[e.FAR_TOP_LEFT=7]="FAR_TOP_LEFT"}(r||(r={}));r.FAR_BOTTOM_RIGHT,r.NEAR_BOTTOM_RIGHT,r.NEAR_BOTTOM_LEFT,r.FAR_BOTTOM_LEFT,r.NEAR_BOTTOM_LEFT,r.NEAR_BOTTOM_RIGHT,r.NEAR_TOP_RIGHT,r.NEAR_TOP_LEFT,r.FAR_BOTTOM_RIGHT,r.FAR_BOTTOM_LEFT,r.FAR_TOP_LEFT,r.FAR_TOP_RIGHT,r.NEAR_BOTTOM_RIGHT,r.FAR_BOTTOM_RIGHT,r.FAR_TOP_RIGHT,r.NEAR_TOP_RIGHT,r.FAR_BOTTOM_LEFT,r.NEAR_BOTTOM_LEFT,r.NEAR_TOP_LEFT,r.FAR_TOP_LEFT,r.FAR_TOP_LEFT,r.NEAR_TOP_LEFT,r.NEAR_TOP_RIGHT,r.FAR_TOP_RIGHT;var A,N;!function(e){e[e.NUM=6]="NUM"}(A||(A={})),function(e){e[e.NUM=8]="NUM"}(N||(N={}));const p=[(0,c.f)(-1,-1,-1,1),(0,c.f)(1,-1,-1,1),(0,c.f)(1,1,-1,1),(0,c.f)(-1,1,-1,1),(0,c.f)(-1,-1,1,1),(0,c.f)(1,-1,1,1),(0,c.f)(1,1,1,1),(0,c.f)(-1,1,1,1)],b=(new s.x(_.Ue),[(0,a.c)(),(0,a.c)(),(0,a.c)(),(0,a.c)(),(0,a.c)(),(0,a.c)(),(0,a.c)(),(0,a.c)()])},50256:(e,t,n)=>{n.d(t,{K:()=>o});var i=n(8548),r=n(61109);function o(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const n=e.stride;return e.fieldNames.filter((t=>{const n=e.fields.get(t).optional;return!(n&&n.glPadding)})).map((i=>{const o=e.fields.get(i),h=o.constructor.ElementCount,l=s(o.constructor.ElementType),a=o.offset,d=!(!o.optional||!o.optional.glNormalized);return new r.G(i,h,l,a,n,d,t)}))}function s(e){const t=h[e];if(t)return t;throw new Error("BufferType not supported in WebGL")}const h={u8:i.g.UNSIGNED_BYTE,u16:i.g.UNSIGNED_SHORT,u32:i.g.UNSIGNED_INT,i8:i.g.BYTE,i16:i.g.SHORT,i32:i.g.INT,f32:i.g.FLOAT}},78329:(e,t,n)=>{n.d(t,{Z:()=>v});var i=n(92026),r=n(13005),o=n(27546),s=n(11186),h=n(71353),l=n(95773),a=n(40885),d=n(23470),c=n(97731);class _{constructor(e,t){this._objectToBoundingSphere=e,this._maximumObjectsPerNode=10,this._maximumDepth=20,this._degenerateObjects=new Set,this._root=new u,this._objectCount=0,t&&(void 0!==t.maximumObjectsPerNode&&(this._maximumObjectsPerNode=t.maximumObjectsPerNode),void 0!==t.maximumDepth&&(this._maximumDepth=t.maximumDepth))}get bounds(){return this._root.bounds}get halfSize(){return this._root.halfSize}get root(){return this._root.node}get maximumObjectsPerNode(){return this._maximumObjectsPerNode}get maximumDepth(){return this._maximumDepth}get objectCount(){return this._objectCount}destroy(){this._degenerateObjects.clear(),u.clearPool(),b[0]=null,I.prune(),H.prune()}add(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.length;this._objectCount+=t,this._grow(e,t);const n=u.acquire();for(let i=0;i<t;i++){const t=e[i];this._isDegenerate(t)?this._degenerateObjects.add(t):(n.init(this._root),this._add(t,n))}u.release(n)}remove(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this._objectCount-=e.length;const n=u.acquire();for(const r of e){const e=(0,i.pC)(t)?t:(0,d.b)(this._objectToBoundingSphere(r),x);g(e[3])?(n.init(this._root),this._remove(r,e,n)):this._degenerateObjects.delete(r)}u.release(n),this._shrink()}update(e,t){if(!g(t[3])&&this._isDegenerate(e))return;const n=function(e){return b[0]=e,b}(e);this.remove(n,t),this.add(n)}forEachAlongRay(e,t,n){const i=(0,a.re)(e,t);this._forEachNode(this._root,(e=>{if(!this._intersectsNode(i,e))return!1;const t=e.node;return t.terminals.forAll((e=>{this._intersectsObject(i,e)&&n(e)})),null!==t.residents&&t.residents.forAll((e=>{this._intersectsObject(i,e)&&n(e)})),!0}))}forEachAlongRayWithVerticalOffset(e,t,n,i){const r=(0,a.re)(e,t);this._forEachNode(this._root,(e=>{if(!this._intersectsNodeWithOffset(r,e,i))return!1;const t=e.node;return t.terminals.forAll((e=>{this._intersectsObjectWithOffset(r,e,i)&&n(e)})),null!==t.residents&&t.residents.forAll((e=>{this._intersectsObjectWithOffset(r,e,i)&&n(e)})),!0}))}forEach(e){this._forEachNode(this._root,(t=>{const n=t.node;return n.terminals.forAll(e),null!==n.residents&&n.residents.forAll(e),!0})),this._degenerateObjects.forEach(e)}forEachDegenerateObject(e){this._degenerateObjects.forEach(e)}findClosest(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:()=>!0,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1/0,o=1/0,h=1/0,a=null;const c=R(e,t),_=s=>{if(--r,!i(s))return;const c=this._objectToBoundingSphere(s);if(!(0,l.hr)(n,c))return;const _=E(e,t,(0,d.g)(c)),u=_-c[3],T=_+c[3];u<o&&(o=u,h=T,a=s)};return this._forEachNodeDepthOrdered(this._root,(i=>{if(r<=0||!(0,l.hr)(n,i.bounds))return!1;if((0,s.g)(M,c,i.halfSize),(0,s.a)(M,M,i.bounds),E(e,t,M)>h)return!1;const o=i.node;return o.terminals.forAll((e=>_(e))),null!==o.residents&&o.residents.forAll((e=>_(e))),!0}),e,t),a}forEachInDepthRange(e,t,n,i,r,o,h){let a=-1/0,c=1/0;const u={setRange:e=>{n===_.DepthOrder.FRONT_TO_BACK?(a=Math.max(a,e.near),c=Math.min(c,e.far)):(a=Math.max(a,-e.far),c=Math.min(c,-e.near))}};u.setRange(i);const T=E(t,n,e),f=R(t,n),O=R(t,-n),m=e=>{if(!h(e))return;const i=this._objectToBoundingSphere(e),s=(0,d.g)(i),_=E(t,n,s)-T,f=_-i[3],O=_+i[3];f>c||O<a||!(0,l.hr)(o,i)||r(e,u)};this._forEachNodeDepthOrdered(this._root,(e=>{if(!(0,l.hr)(o,e.bounds))return!1;if((0,s.g)(M,f,e.halfSize),(0,s.a)(M,M,e.bounds),E(t,n,M)-T>c)return!1;if((0,s.g)(M,O,e.halfSize),(0,s.a)(M,M,e.bounds),E(t,n,M)-T<a)return!1;const i=e.node;return i.terminals.forAll((e=>m(e))),null!==i.residents&&i.residents.forAll((e=>m(e))),!0}),t,n)}forEachNode(e){this._forEachNode(this._root,(t=>e(t.node,t.bounds,t.halfSize)))}forEachNeighbor(e,t){const n=(0,d.d)(t),i=(0,d.g)(t),r=t=>{const r=this._objectToBoundingSphere(t),o=(0,d.d)(r),h=n+o;(0,s.d)((0,d.g)(r),i)-h*h<=0&&e(t)};this._forEachNode(this._root,(e=>{const t=(0,d.d)(e.bounds),o=n+t;if((0,s.d)((0,d.g)(e.bounds),i)-o*o>0)return!1;const h=e.node;return h.terminals.forAll((e=>r(e))),null!==h.residents&&h.residents.forAll((e=>r(e))),!0})),this.forEachDegenerateObject(r)}_intersectsNode(e,t){return O(t.bounds,2*-t.halfSize,B),O(t.bounds,2*t.halfSize,S),(0,c.yK)(e.origin,e.direction,B,S)}_intersectsNodeWithOffset(e,t,n){return O(t.bounds,2*-t.halfSize,B),O(t.bounds,2*t.halfSize,S),n.applyToMinMax(B,S),(0,c.yK)(e.origin,e.direction,B,S)}_intersectsObject(e,t){const n=this._objectToBoundingSphere(t);return!(n[3]>0)||(0,d.i)(n,e)}_intersectsObjectWithOffset(e,t,n){const i=this._objectToBoundingSphere(t);return!(i[3]>0)||(0,d.i)(n.applyToBoundingSphere(i),e)}_forEachNode(e,t){let n=u.acquire().init(e);const i=[n];for(;0!==i.length;){if(n=i.pop(),t(n)&&!n.isLeaf())for(let e=0;e<n.node.children.length;e++)n.node.children[e]&&i.push(u.acquire().init(n).advance(e));u.release(n)}}_forEachNodeDepthOrdered(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:_.DepthOrder.FRONT_TO_BACK,r=u.acquire().init(e);const o=[r];for(function(e,t,n){if(!H.length)for(let i=0;i<8;++i)H.push({index:0,distance:0});for(let i=0;i<8;++i){const n=A[i];H.data[i].index=i,H.data[i].distance=E(e,t,n)}H.sort(((e,t)=>e.distance-t.distance));for(let i=0;i<8;++i)n[i]=H.data[i].index}(n,i,z);0!==o.length;){if(r=o.pop(),t(r)&&!r.isLeaf())for(let e=7;e>=0;--e){const t=z[e];r.node.children[t]&&o.push(u.acquire().init(r).advance(t))}u.release(r)}}_remove(e,t,n){I.clear();const i=n.advanceTo(t,((e,t)=>{I.push(e.node),I.push(t)}))?n.node.terminals:n.node.residents;if(i.removeUnordered(e),0===i.length)for(let r=I.length-2;r>=0;r-=2){const e=I.data[r],t=I.data[r+1];if(!this._purge(e,t))break}}_nodeIsEmpty(e){if(0!==e.terminals.length)return!1;if(null!==e.residents)return 0===e.residents.length;for(let t=0;t<e.children.length;t++)if(e.children[t])return!1;return!0}_purge(e,t){return t>=0&&(e.children[t]=null),!!this._nodeIsEmpty(e)&&(null===e.residents&&(e.residents=new o.Z({shrink:!0})),!0)}_add(e,t){t.advanceTo(this._objectToBoundingSphere(e))?t.node.terminals.push(e):(t.node.residents.push(e),t.node.residents.length>this._maximumObjectsPerNode&&t.depth<this._maximumDepth&&this._split(t))}_split(e){const t=e.node.residents;e.node.residents=null;for(let n=0;n<t.length;n++){const i=u.acquire().init(e);this._add(t.getItemAt(n),i),u.release(i)}}_grow(e,t){if(0!==t&&(m(e,t,(e=>this._objectToBoundingSphere(e)),G),g(G[3])&&!this._fitsInsideTree(G)))if(this._nodeIsEmpty(this._root.node))(0,d.b)(G,this._root.bounds),this._root.halfSize=1.25*G[3];else{const e=this._rootBoundsForRootAsSubNode(G);this._placingRootViolatesMaxDepth(e)?this._rebuildTree(G,e):this._growRootAsSubNode(e),u.release(e)}}_rebuildTree(e,t){(0,s.c)(L,t.bounds),L[3]=t.halfSize,m([e,L],2,(e=>e),P);const n=u.acquire().init(this._root);this._root.initFrom(null,P,1.25*P[3]),this._forEachNode(n,(e=>(this.add(e.node.terminals.data,e.node.terminals.length),null!==e.node.residents&&this.add(e.node.residents.data,e.node.residents.length),!0))),u.release(n)}_placingRootViolatesMaxDepth(e){const t=Math.log(e.halfSize/this._root.halfSize)*Math.LOG2E;let n=0;return this._forEachNode(this._root,(e=>(n=Math.max(n,e.depth),n+t<=this._maximumDepth))),n+t>this._maximumDepth}_rootBoundsForRootAsSubNode(e){const t=e[3],n=e;let i=-1/0;const r=this._root.bounds,o=this._root.halfSize;for(let s=0;s<3;s++){const e=r[s]-o-(n[s]-t),h=n[s]+t-(r[s]+o),l=Math.max(0,Math.ceil(e/(2*o))),a=Math.max(0,Math.ceil(h/(2*o)))+1,d=2**Math.ceil(Math.log(l+a)*Math.LOG2E);i=Math.max(i,d),j[s].min=l,j[s].max=a}for(let s=0;s<3;s++){let e=j[s].min,t=j[s].max;const n=(i-(e+t))/2;e+=Math.ceil(n),t+=Math.floor(n);const h=r[s]-o-e*o*2;F[s]=h+(t+e)*o}return F[3]=i*o*p,u.acquire().initFrom(null,F,i*o,0)}_growRootAsSubNode(e){const t=this._root.node;(0,s.c)(G,this._root.bounds),G[3]=this._root.halfSize,this._root.init(e),e.advanceTo(G,null,!0),e.node.children=t.children,e.node.residents=t.residents,e.node.terminals=t.terminals}_shrink(){for(;;){const e=this._findShrinkIndex();if(-1===e)break;this._root.advance(e),this._root.depth=0}}_findShrinkIndex(){if(0!==this._root.node.terminals.length||this._root.isLeaf())return-1;let e=null;const t=this._root.node.children;let n=0,i=0;for(;i<t.length&&null==e;)n=i++,e=t[n];for(;i<t.length;)if(t[i++])return-1;return n}_isDegenerate(e){return!g(this._objectToBoundingSphere(e)[3])}_fitsInsideTree(e){const t=this._root.bounds,n=this._root.halfSize;return e[3]<=n&&e[0]>=t[0]-n&&e[0]<=t[0]+n&&e[1]>=t[1]-n&&e[1]<=t[1]+n&&e[2]>=t[2]-n&&e[2]<=t[2]+n}}class u{constructor(){this.bounds=(0,d.c)(),this.halfSize=0,this.initFrom(null,null,0,0)}init(e){return this.initFrom(e.node,e.bounds,e.halfSize,e.depth)}initFrom(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:this.depth;return this.node=(0,i.pC)(e)?e:u.createEmptyNode(),(0,i.pC)(t)&&(0,d.b)(t,this.bounds),this.halfSize=n,this.depth=r,this}advance(e){let t=this.node.children[e];t||(t=u.createEmptyNode(),this.node.children[e]=t),this.node=t,this.halfSize/=2,this.depth++;const n=A[e];return this.bounds[0]+=n[0]*this.halfSize,this.bounds[1]+=n[1]*this.halfSize,this.bounds[2]+=n[2]*this.halfSize,this.bounds[3]=this.halfSize*p,this}advanceTo(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];for(;;){if(this.isTerminalFor(e))return t&&t(this,-1),!0;if(this.isLeaf()){if(!n)return t&&t(this,-1),!1;this.node.residents=null}const i=this._childIndex(e);t&&t(this,i),this.advance(i)}}isLeaf(){return null!=this.node.residents}isTerminalFor(e){return e[3]>this.halfSize/2}_childIndex(e){const t=this.bounds;return(t[0]<e[0]?1:0)+(t[1]<e[1]?2:0)+(t[2]<e[2]?4:0)}static createEmptyNode(){return{children:[null,null,null,null,null,null,null,null],terminals:new o.Z({shrink:!0}),residents:new o.Z({shrink:!0})}}static acquire(){return u._pool.acquire()}static release(e){u._pool.release(e)}static clearPool(){u._pool.prune()}}function T(e,t){e[0]=Math.min(e[0],t[0]-t[3]),e[1]=Math.min(e[1],t[1]-t[3]),e[2]=Math.min(e[2],t[2]-t[3])}function f(e,t){e[0]=Math.max(e[0],t[0]+t[3]),e[1]=Math.max(e[1],t[1]+t[3]),e[2]=Math.max(e[2],t[2]+t[3])}function O(e,t,n){n[0]=e[0]+t,n[1]=e[1]+t,n[2]=e[2]+t}function m(e,t,n,i){if(1===t){const t=n(e[0]);(0,d.b)(t,i)}else{B[0]=1/0,B[1]=1/0,B[2]=1/0,S[0]=-1/0,S[1]=-1/0,S[2]=-1/0;for(let i=0;i<t;i++){const t=n(e[i]);g(t[3])&&(T(B,t),f(S,t))}(0,s.h)(i,B,S,.5),i[3]=Math.max(S[0]-B[0],S[1]-B[1],S[2]-B[2])/2}}function R(e,t){let n=1/0,i=null;for(let r=0;r<8;++r){const o=E(e,t,N[r]);o<n&&(n=o,i=N[r])}return i}function E(e,t,n){return t*(e[0]*n[0]+e[1]*n[1]+e[2]*n[2])}function g(e){return!isNaN(e)&&e!==-1/0&&e!==1/0&&e>0}u._pool=new r.Z(u),function(e){var t;(t=e.DepthOrder||(e.DepthOrder={}))[t.FRONT_TO_BACK=1]="FRONT_TO_BACK",t[t.BACK_TO_FRONT=-1]="BACK_TO_FRONT"}(_||(_={}));const A=[(0,h.f)(-1,-1,-1),(0,h.f)(1,-1,-1),(0,h.f)(-1,1,-1),(0,h.f)(1,1,-1),(0,h.f)(-1,-1,1),(0,h.f)(1,-1,1),(0,h.f)(-1,1,1),(0,h.f)(1,1,1)],N=[(0,h.f)(-1,-1,-1),(0,h.f)(-1,-1,1),(0,h.f)(-1,1,-1),(0,h.f)(-1,1,1),(0,h.f)(1,-1,-1),(0,h.f)(1,-1,1),(0,h.f)(1,1,-1),(0,h.f)(1,1,1)],p=Math.sqrt(3),b=[null];const F=(0,d.c)(),M=(0,h.c)(),B=(0,h.c)(),S=(0,h.c)(),I=new o.Z,x=(0,d.c)(),G=(0,d.c)(),L=(0,d.c)(),P=(0,d.c)(),j=[{min:0,max:0},{min:0,max:0},{min:0,max:0}],H=new o.Z,z=[0,0,0,0,0,0,0,0],v=_}}]);
//# sourceMappingURL=5269.0806c585.chunk.js.map