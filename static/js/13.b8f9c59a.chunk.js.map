{"version":3,"sources":["../node_modules/@arcgis/core/layers/support/commonProperties.js","../node_modules/@arcgis/core/support/timeUtils.js","../node_modules/@arcgis/core/layers/Layer.js","../node_modules/@arcgis/core/core/accessorSupport/MultiOriginStore.js","../node_modules/@arcgis/core/core/ReadOnlyMultiOriginJSONSupport.js","../node_modules/@arcgis/core/core/MultiOriginJSONSupport.js","../node_modules/@arcgis/core/layers/mixins/PortalLayer.js","../node_modules/@arcgis/core/layers/mixins/operationalLayers.js","../node_modules/@arcgis/core/layers/mixins/OperationalLayer.js","../node_modules/@arcgis/core/layers/mixins/ArcGISService.js"],"names":["l","type","Boolean","value","json","origins","service","read","write","name","p","reader","e","r","disablePopup","enabled","writer","i","m","f","String","isRequired","ignoreOrigin","n","d","c","a","y","readOnly","u","Number","default","w","target","opacity","source","origin","drawingInfo","transparency","layerDefinition","s","g","get","this","layer","timeInfo","datesInUnknownTimezone","timeOffset","useViewTime","view","timeExtent","start","end","o","t","getTimezoneOffset","intersection","isEmpty","isAllTime","offset","unit","_get","equals","v","fromJSON","spatialReference","j","b","I","h","getLogger","EventedMixin","constructor","super","arguments","attributionDataUrl","fullExtent","WGS84","id","Date","now","toString","legendEnabled","listMode","parent","popupEnabled","attributionVisible","title","url","visible","fromUrl","error","portalItem","fromItem","portal","portalUrl","initialize","when","catch","declaredClass","destroy","layers","includes","remove","tables","baseLayers","referenceLayers","hasAttributionData","query","responseType","data","prototype","nonNullable","range","min","max","_propertyOriginMap","Map","_originStores","Array","_values","clone","forEach","set","has","keys","delete","revert","originOf","metadatas","store","Object","internalGet","getAtOrigin","originIdOf","invalidate","commit","clear","setAtOrigin","removeOrigin","updateOrigin","toJSON","isDefaultToJSON","O","resourceReferences","paths","userHasEditingPrivileges","_set","readPortalItem","itemId","writePortalItem","load","instance","supportedTypes","validateItem","supportsData","warn","fetchUserHasEditingPrivileges","findCredential","P","credential","user","fetchEditingUser","privileges","findServerInfo","owningSystemUrl","getDefault","loaded","restUrl","signal","authMode","ok","messages","push","ArcGISFeatureLayer","ArcGISImageServiceLayer","ArcGISMapServiceLayer","ArcGISSceneServiceLayer","ArcGISTiledElevationServiceLayer","ArcGISTiledImageServiceLayer","ArcGISTiledMapServiceLayer","BuildingSceneLayer","GroupLayer","IntegratedMeshLayer","OGCFeatureLayer","PointCloudLayer","WebTiledLayer","CSV","VectorTileLayer","WFS","WMS","KML","RasterDataLayer","Voxel","OpenStreetMap","RasterDataElevationLayer","ArcGISImageServiceVectorLayer","ArcGISStreamLayer","BingMapsAerial","BingMapsHybrid","BingMapsRoad","GeoRSS","SubtypeGroupLayer","writeListMode","layerContainerType","writeOperationalLayerType","layerType","writeTitle","operationalLayerType","filter","length","beforeSave","allowNull"],"mappings":"kpBAI4Y,MAAMA,EAAE,CAACC,KAAKC,QAAQC,OAAM,EAAGC,KAAK,CAACC,QAAQ,CAACC,QAAQ,CAACC,MAAK,EAAGC,OAAM,GAAI,UAAU,CAACD,MAAK,EAAGC,OAAM,IAAKC,KAAK,wBAAwBD,OAAM,IAAKE,EAAE,CAACT,KAAKC,QAAQC,OAAM,EAAGC,KAAK,CAACK,KAAK,eAAeF,KAAK,CAACI,OAAO,CAACC,EAAEC,KAAKA,EAAEC,cAAcN,MAAM,CAACO,SAAQ,EAAGC,OAAOJ,EAAEC,EAAEI,GAAGJ,EAAEI,IAAIL,MAAMM,EAAE,CAACjB,KAAKC,QAAQC,OAAM,EAAGC,KAAK,CAACK,KAAK,aAAaD,OAAM,IAAKW,EAAE,CAAClB,KAAKmB,OAAOhB,KAAK,CAACC,QAAQ,CAAC,cAAc,CAACG,OAAM,IAAKA,MAAM,CAACa,YAAW,EAAGC,cAAa,EAAGN,OAAOO,OAAKC,EAAE,CAACvB,KAAKC,QAAQC,OAAM,EAAGC,KAAK,CAACC,QAAQ,CAACC,QAAQ,CAACC,KAAK,CAACQ,SAAQ,KAAMN,KAAK,aAAaD,OAAM,IAAKiB,EAAE,CAACtB,MAAM,KAAKF,KAAKyB,IAAEtB,KAAK,CAACC,QAAQ,CAACC,QAAQ,CAACG,KAAK,gBAAgBD,OAAM,IAAKC,KAAK,gCAAgCD,OAAM,IAAK,SAASmB,EAAEf,GAAG,MAAM,CAACX,KAAKW,EAAEgB,UAAS,EAAGxB,KAAK,CAACC,QAAQ,CAACC,QAAQ,CAACC,MAAK,IAAKA,MAAK,IAAK,MAAMsB,EAAE,CAAC5B,KAAK6B,OAAO1B,KAAK,CAACC,QAAQ,CAAC,eAAe,CAAC0B,QAAQ,EAAEvB,OAAM,EAAGD,MAAK,GAAI,cAAc,CAACC,OAAM,MAAOwB,EAAE,IAAIH,EAAEzB,KAAK,IAAIyB,EAAEzB,KAAKC,QAAQ,CAAC,eAAe,IAAIwB,EAAEzB,KAAKC,QAAQ,gBAAgBG,MAAM,CAACO,SAAQ,EAAGkB,OAAO,CAACC,QAAQ,CAACjC,KAAK6B,QAAQ,2CAA2C,CAAC7B,KAAK6B,YAAYvB,KAAK,CAAC4B,OAAO,CAAC,2CAA2C,4BAA4BxB,OAAO,CAACC,EAAEC,EAAEI,IAAIA,GAAG,YAAYA,EAAEmB,SAASvB,EAAEwB,kBAAa,IAASxB,EAAEwB,YAAYC,aAAazB,EAAE0B,iBAAiB1B,EAAE0B,gBAAgBF,kBAAa,IAASxB,EAAE0B,gBAAgBF,YAAYC,aAAaE,YAAE3B,EAAE0B,gBAAgBF,YAAYC,mBAAc,EAAOE,YAAE3B,EAAEwB,YAAYC,iBAAiBG,EAAE,CAACxC,KAAKW,IAAEgB,UAAS,EAAGc,MAAM,IAAI9B,EAAEC,EAAE,GAAG,OAAOD,EAAE+B,KAAKC,SAAShC,EAAEiC,SAAS,OAAO,KAAK,MAAMC,uBAAuB7B,EAAE8B,WAAWxB,EAAEyB,YAAYtB,GAAGiB,KAAKC,MAAMJ,EAAE,OAAO3B,EAAE8B,KAAKM,WAAM,EAAOpC,EAAEqC,WAAW,IAAIlD,EAAE2C,KAAKC,MAAMM,WAAWjC,IAAIjB,ECAh8B,SAAWY,GAAG,IAAIA,EAAE,OAAOA,EAAE,MAAMuC,MAAMlC,EAAEmC,IAAIC,GAAGzC,EAAE,OAAO,IAAI0C,IAAE,CAACH,MAAM5B,YAAEN,GAAGJ,YAAEI,EAAEA,EAAEsC,oBAAoB,WAAWtC,EAAEmC,IAAI7B,YAAE8B,GAAGxC,YAAEwC,EAAEA,EAAEE,oBAAoB,WAAWF,IDAgyBC,CAAEtD,IAAI,IAAIU,EAAEgB,EAAEc,GAAGxC,EAAEwC,EAAEgB,aAAaxD,GAAGwC,GAAGxC,EAAEA,EAAE,IAAIU,GAAGA,EAAE+C,SAAS/C,EAAEgD,UAAU,OAAOhD,EAAEa,IAAIb,EAAEA,EAAEiD,QAAQpC,EAAEpB,MAAMoB,EAAEqC,OAAO3C,IAAIP,ECAluC,SAAWE,GAAG,IAAIA,EAAE,OAAOA,EAAE,MAAMuC,MAAMlC,EAAEmC,IAAIC,GAAGzC,EAAE,OAAO,IAAI0C,IAAE,CAACH,MAAM5B,YAAEN,GAAGJ,YAAEI,GAAGA,EAAEsC,oBAAoB,WAAWtC,EAAEmC,IAAI7B,YAAE8B,GAAGxC,YAAEwC,GAAGA,EAAEE,oBAAoB,WAAWF,IDAgkCA,CAAE3C,IAAI,MAAMQ,EAAEyB,KAAKkB,KAAK,cAAc,OAAOnD,EAAEoD,OAAO5C,GAAGA,EAAER,IAAIqD,EAAE,CAAC9D,KAAKY,IAAEe,UAAS,EAAGxB,KAAK,CAACC,QAAQ,CAACC,QAAQ,CAACC,KAAK,CAAC4B,OAAO,CAAC,aAAa,oBAAoBxB,OAAO,CAACC,EAAEW,KAAK,MAAM+B,EAAEzC,IAAEmD,SAASpD,GAAG,OAAO,MAAMW,EAAE0C,kBAAkB,iBAAiB1C,EAAE0C,mBAAmBX,EAAEW,iBAAiBhD,IAAE+C,SAASzC,EAAE0C,mBAAmBX,MAAM/C,MAAK,IAAK2D,EAAE,CAACjE,KAAKmB,OAAOhB,KAAK,CAACC,QAAQ,CAACC,QAAQ,CAACC,MAAK,GAAI,cAAc,CAACA,MAAK,MAAO4D,EAAE,CAAClE,KAAK6B,OAAO1B,KAAK,CAACC,QAAQ,CAACC,QAAQ,CAACE,MAAM,CAACO,SAAQ,KAAMR,KAAK,CAAC4B,OAAO,4BAA4B3B,MAAM,CAACyB,OAAO,8BAA8BmC,EAAE,CAACnE,KAAK6B,OAAO1B,KAAK,CAACC,QAAQ,CAACC,QAAQ,CAACE,MAAM,CAACO,SAAQ,KAAMR,KAAK,CAAC4B,OAAO,4BAA4B3B,MAAM,CAACyB,OAAO,+B,iCEJ5wF,iLAImtB,IAAIf,EAAE,EAAE,MAAMmD,EAAErE,IAAEsE,UAAU,qBAAqB,IAAInD,EAAE,cAAcF,IAAEsD,aAAa7C,YAAEc,OAAKgC,cAAcC,SAASC,WAAW/B,KAAKgC,mBAAmB,KAAKhC,KAAKiC,WAAW,IAAI/C,KAAG,KAAK,GAAG,IAAI,GAAGL,IAAEqD,OAAOlC,KAAKmC,GAAGC,KAAKC,MAAMC,SAAS,IAAI,UAAU/D,IAAIyB,KAAKuC,eAAc,EAAGvC,KAAKwC,SAAS,OAAOxC,KAAKT,QAAQ,EAAES,KAAKyC,OAAO,KAAKzC,KAAK0C,cAAa,EAAG1C,KAAK2C,oBAAmB,EAAG3C,KAAKsB,iBAAiBzC,IAAEqD,MAAMlC,KAAK4C,MAAM,KAAK5C,KAAK1C,KAAK,KAAK0C,KAAK6C,IAAI,KAAK7C,KAAK8C,SAAQ,EAAmC,iCAACnC,GAAG,MAAMzC,EAAE,iBAAiByC,EAAE,CAACkC,IAAIlC,GAAGA,EAAE1C,QAAQ,gCAAoC,IAAI,aAAaA,EAAE8E,QAAQ7E,GAAG,MAAMwC,GAAG,MAAMgB,EAAEsB,MAAM,gCAAgC9E,EAAE2E,IAAI,MAAM,gDAAgDnC,GAAGA,GAA8B,4BAACC,GAAG,MAAM1C,EAAE,eAAe0C,EAAEA,EAAE,CAACsC,WAAWtC,GAAGD,QAAQ,gCAA4C,IAAI,aAAaA,EAAEwC,SAASjF,GAAG,MAAMK,GAAG,MAAMqC,EAAE1C,GAAGA,EAAEgF,WAAWvC,EAAEC,GAAGA,EAAEwB,IAAI,QAAQpD,EAAE4B,GAAGA,EAAEwC,QAAQxC,EAAEwC,OAAON,KAAK3E,IAAEkF,UAAU,MAAM1B,EAAEsB,MAAM,oBAAoB,qDAAqDjE,EAAE,WAAW2B,EAAE,KAAKpC,GAAGA,GAAG+E,aAAarD,KAAKsD,OAAOC,OAAO5C,IAAI,IAAIzC,EAAED,EAAEF,YAAE4C,IAAItD,IAAEsE,UAAU3B,KAAKwD,eAAeR,MAAM,UAAW,iCAAgC,OAAO9E,EAAE8B,KAAK4C,OAAO1E,EAAE,qBAAqB,OAAOD,EAAE+B,KAAKmC,IAAIlE,EAAE,YAAY,CAAC+E,MAAMrC,OAAO8C,UAAU,GAAGzD,KAAKyC,OAAO,CAAC,MAAM9B,EAAEX,KAAK9B,EAAE8B,KAAKyC,OAAO,WAAWvE,GAAGA,EAAEwF,OAAOC,SAAShD,GAAGzC,EAAEwF,OAAOE,OAAOjD,GAAG,WAAWzC,GAAGA,EAAE2F,OAAOF,SAAShD,GAAGzC,EAAE2F,OAAOD,OAAOjD,GAAG,eAAezC,GAAGA,EAAE4F,WAAWH,SAAShD,GAAGzC,EAAE4F,WAAWF,OAAOjD,GAAG,eAAezC,GAAGA,EAAE6F,gBAAgBJ,SAAShD,IAAIzC,EAAE6F,gBAAgBH,OAAOjD,IAA0B,yBAAG,OAAO,MAAMX,KAAKgC,mBAAgC,gBAAG,MAAMrB,EAAEX,KAAK6C,IAAI,OAAOlC,EAAE/B,YAAE+B,GAAG,KAA+B,6BAAG,MAAMA,EAAEX,KAAKgC,mBAAmB,GAAGhC,KAAKgE,oBAAoBrD,EAAG,aAAa1C,kBAAE0C,EAAE,CAACsD,MAAM,CAACzF,EAAE,QAAQ0F,aAAa,UAAUC,KAAK,MAAM,IAAIzD,IAAE,4BAA4B,0CAA0CC,YAAE,CAAC3B,YAAE,CAAC1B,KAAKmB,UAAUD,EAAE4F,UAAU,0BAAqB,GAAQzD,YAAE,CAAC3B,YAAE,CAAC1B,KAAK4B,OAAKV,EAAE4F,UAAU,kBAAa,GAAQzD,YAAE,CAAC3B,YAAE,CAACC,UAAS,KAAMT,EAAE4F,UAAU,qBAAqB,MAAMzD,YAAE,CAAC3B,YAAE,CAAC1B,KAAKmB,UAAUD,EAAE4F,UAAU,UAAK,GAAQzD,YAAE,CAAC3B,YAAE,CAAC1B,KAAKC,QAAQ8G,aAAY,KAAM7F,EAAE4F,UAAU,qBAAgB,GAAQzD,YAAE,CAAC3B,YAAE,CAAC1B,KAAK,CAAC,OAAO,OAAO,oBAAoBkB,EAAE4F,UAAU,gBAAW,GAAQzD,YAAE,CAAC3B,YAAE,CAAC1B,KAAK6B,OAAOmF,MAAM,CAACC,IAAI,EAAEC,IAAI,GAAGH,aAAY,KAAM7F,EAAE4F,UAAU,eAAU,GAAQzD,YAAE,CAAC3B,eAAKR,EAAE4F,UAAU,cAAS,GAAQzD,YAAE,CAAC3B,YAAE,CAACC,UAAS,KAAMT,EAAE4F,UAAU,YAAY,MAAMzD,YAAE,CAAC3B,YAAE,CAAC1B,KAAKC,WAAWiB,EAAE4F,UAAU,oBAAe,GAAQzD,YAAE,CAAC3B,YAAE,CAAC1B,KAAKC,WAAWiB,EAAE4F,UAAU,0BAAqB,GAAQzD,YAAE,CAAC3B,YAAE,CAAC1B,KAAKuB,OAAKL,EAAE4F,UAAU,wBAAmB,GAAQzD,YAAE,CAAC3B,YAAE,CAAC1B,KAAKmB,UAAUD,EAAE4F,UAAU,aAAQ,GAAQzD,YAAE,CAAC3B,YAAE,CAAC1B,KAAKmB,OAAOQ,UAAS,EAAGxB,KAAK,CAACG,MAAK,MAAOY,EAAE4F,UAAU,YAAO,GAAQzD,YAAE,CAAC3B,eAAKR,EAAE4F,UAAU,WAAM,GAAQzD,YAAE,CAAC3B,YAAE,CAAC1B,KAAKC,QAAQ8G,aAAY,KAAM7F,EAAE4F,UAAU,eAAU,GAAQ5F,EAAEmC,YAAE,CAAC7B,YAAE,sBAAsBN,GAAG,IAAIgD,EAAEhD,G,kJCAr9G,MAAMN,EAAE2D,cAAc7B,KAAKyE,mBAAmB,IAAIC,IAAI1E,KAAK2E,cAAc,IAAIC,MAAM3G,KAAG+B,KAAK6E,QAAQ,IAAIH,IAAII,MAAMjF,GAAG,MAAMvB,EAAE,IAAIJ,EAAEwC,EAAEV,KAAK2E,cAAc,GAAGjE,GAAGA,EAAEqE,SAAS,CAAClF,EAAE5B,KAAKK,EAAE0G,IAAI/G,EAAE0C,YAAEd,GAAG,MAAM,IAAI,IAAI3B,EAAE,EAAEA,EAAED,IAAEC,IAAI,CAAC,MAAMD,EAAE+B,KAAK2E,cAAczG,GAAGD,GAAGA,EAAE8G,SAAS,CAAC9G,EAAEyC,KAAKb,GAAGA,EAAEoF,IAAIvE,IAAIpC,EAAE0G,IAAItE,EAAEC,YAAE1C,GAAGC,MAAM,OAAOI,EAAEyB,IAAIY,EAAEd,GAAG,MAAM5B,OAAE,IAAS4B,EAAEG,KAAK6E,QAAQ7E,KAAK2E,cAAc9E,GAAG,OAAO5B,EAAEA,EAAE8B,IAAIY,QAAG,EAAOuE,KAAKvE,GAAG,MAAMd,EAAE,MAAMc,EAAEX,KAAK6E,QAAQ7E,KAAK2E,cAAchE,GAAG,OAAOd,EAAE,IAAIA,EAAEqF,QAAQ,GAAGF,IAAIrE,EAAE1C,EAAEC,EAAE,GAAG,IAAII,EAAE0B,KAAK2E,cAAczG,GAAG,GAAGI,IAAIA,EAAE,IAAIoG,IAAI1E,KAAK2E,cAAczG,GAAGI,GAAGA,EAAE0G,IAAIrE,EAAE1C,IAAI+B,KAAK6E,QAAQI,IAAItE,IAAId,YAAEG,KAAKyE,mBAAmB1E,IAAIY,KAAKzC,EAAE,CAAC,MAAM2B,EAAEG,KAAK6E,QAAQ9E,IAAIY,GAAG,OAAOX,KAAK6E,QAAQG,IAAIrE,EAAE1C,GAAG+B,KAAKyE,mBAAmBO,IAAIrE,EAAEzC,GAAG2B,IAAI5B,EAAE,OAAM,EAAGkH,OAAOxE,EAAEd,EAAE,GAAG,MAAM5B,EAAE+B,KAAK2E,cAAc9E,GAAG,IAAI5B,EAAE,OAAO,MAAMC,EAAED,EAAE8B,IAAIY,GAAG,GAAG1C,EAAEkH,OAAOxE,GAAGX,KAAK6E,QAAQI,IAAItE,IAAIX,KAAKyE,mBAAmB1E,IAAIY,KAAKd,EAAE,CAACG,KAAK6E,QAAQM,OAAOxE,GAAG,IAAI,IAAI1C,EAAE4B,EAAE,EAAE5B,GAAG,EAAEA,IAAI,CAAC,MAAM4B,EAAEG,KAAK2E,cAAc1G,GAAG,GAAG4B,GAAGA,EAAEoF,IAAItE,GAAG,CAACX,KAAK6E,QAAQG,IAAIrE,EAAEd,EAAEE,IAAIY,IAAIX,KAAKyE,mBAAmBO,IAAIrE,EAAE1C,GAAG,QAAQ,OAAOC,EAAE+G,IAAItE,EAAEd,GAAG,MAAM5B,OAAE,IAAS4B,EAAEG,KAAK6E,QAAQ7E,KAAK2E,cAAc9E,GAAG,QAAQ5B,GAAGA,EAAEgH,IAAItE,GAAGyE,OAAOzE,EAAEd,GAAG,KAAKA,EAAE,IAAIG,KAAKiF,IAAItE,EAAEd,MAAMA,EAAE,MAAM5B,EAAE+B,KAAK2E,cAAc9E,GAAG3B,EAAED,GAAGA,EAAE8B,IAAIY,GAAGrC,EAAE0B,KAAK6E,QAAQ9E,IAAIY,GAAG,OAAOX,KAAK6E,QAAQG,IAAIrE,EAAEzC,GAAG8B,KAAKyE,mBAAmBO,IAAIrE,EAAEd,GAAGvB,IAAIJ,EAAEmH,SAAS1E,GAAG,OAAOX,KAAKyE,mBAAmB1E,IAAIY,IAAI,EAAEoE,QAAQpE,GAAGX,KAAK6E,QAAQE,QAAQpE,I,8BCAvlC,MAAM5B,EAAE4B,IAAI,IAAI5B,EAAE,cAAc4B,EAAEkB,eAAe3D,GAAG4D,SAAS5D,GAAG,MAAMyC,EAAEd,YAAEf,YAAEkB,OAAOU,EAAEC,EAAE2E,UAAUhH,EAAEqC,EAAE4E,MAAM3G,EAAE,IAAIX,EAAE0C,EAAE4E,MAAM3G,EAAEN,EAAE4G,OAAOH,SAAS7G,IAAIU,EAAEoG,IAAI9G,EAAEI,EAAEyB,IAAI7B,GAAG,MAAMsH,OAAON,KAAKxE,GAAGqE,SAAS7G,IAAIyC,EAAE8E,YAAYvH,IAAIU,EAAEoG,IAAI9G,EAAEyC,EAAE8E,YAAYvH,GAAG,MAAMN,KAAKM,EAAEyC,GAAG/B,YAAEoB,KAAK9B,EAAEyC,GAAG+E,YAAYxH,EAAEyC,GAAG,MAAMd,EAAEX,EAAEc,MAAM/B,EAAEK,YAAEqC,GAAG,GAAG,iBAAiBzC,EAAE,OAAO2B,EAAEE,IAAI7B,EAAED,GAAG,MAAMyC,EAAE,GAAG,OAAOxC,EAAE6G,SAAS7G,IAAIwC,EAAExC,GAAG2B,EAAEE,IAAI7B,EAAED,MAAMyC,EAAE2E,SAASnH,GAAG,OAAOwC,YAAEV,KAAK2F,WAAWzH,IAAIyH,WAAWzH,GAAG,OAAOgB,EAAEc,MAAMqF,SAASnH,GAAGkH,OAAOlH,EAAEyC,GAAG,MAAMd,EAAEX,EAAEc,MAAM/B,EAAEK,YAAEqC,GAAGD,EAAE5B,YAAEkB,MAAM,IAAIpB,EAAEA,EAAE,iBAAiBV,EAAE,MAAMA,EAAE2B,EAAEqF,KAAKjH,GAAG,CAACC,GAAGA,EAAEU,EAAEmG,SAAS7G,IAAIwC,EAAEkF,WAAW1H,GAAG2B,EAAEuF,OAAOlH,EAAED,GAAGyC,EAAEmF,OAAO3H,QAAQ,OAAOa,EAAEb,YAAE,CAACH,YAAE,6CAA6CgB,GAAGA,GAAG,SAASG,EAAEhB,GAAG,OAAOY,YAAEZ,GAAGqH,MAAM,IAAI/G,EAAE,cAAcO,EAAE4B,QAAMnC,EAAEN,YAAE,CAACH,YAAE,6CAA6CS,G,aCA5zB,MAAMT,EAAE4C,IAAI,IAAId,EAAE,cAAcc,EAAEkB,eAAe3D,GAAG4D,SAAS5D,GAAG4H,MAAM5H,EAAEyC,EAAE,QAAQ,OAAOzB,EAAEc,MAAMmF,OAAOjH,EAAED,YAAE0C,IAAI9C,MAAMK,EAAE,GAAGyC,GAAG,OAAO7B,YAAEkB,KAAK9B,EAAEA,GAAG,GAAGyC,GAAGzC,EAAE6H,YAAY7H,EAAEyC,EAAEd,GAAGvB,YAAE0B,MAAM+F,YAAY7H,EAAEyC,EAAE1C,YAAE4B,IAAImG,aAAa9H,GAAG,MAAMyC,EAAEzB,EAAEc,MAAMH,EAAE5B,YAAEC,GAAGwC,EAAEC,EAAEuE,KAAKrF,GAAG,IAAI,MAAM5B,KAAKyC,EAAEC,EAAE0E,SAASpH,KAAK4B,GAAGc,EAAEqE,IAAI/G,EAAE0C,EAAEZ,IAAI9B,EAAE4B,GAAG,GAAGoG,aAAa/H,EAAEyC,GAAG,MAAMd,EAAEX,EAAEc,MAAM1B,EAAEL,YAAE0C,GAAG7B,EAAEkB,KAAKD,IAAI7B,GAAG,IAAI,IAAID,EAAEK,EAAE,EAAEL,EAAEyC,MAAIzC,EAAE4B,EAAEsF,OAAOjH,EAAED,GAAG4B,EAAEmF,IAAI9G,EAAEY,EAAER,GAAG4H,OAAOhI,GAAG,OAAO8B,KAAKnC,MAAM,GAAGK,KAAK,OAAO2B,EAAE3B,YAAE,CAACU,YAAE,8CAA8CiB,GAAGA,EAAEuE,UAAU8B,OAAOC,iBAAgB,EAAGtG,GAAG,SAASX,EAAEhB,GAAG,OAAOI,YAAEJ,GAAGqH,MAAM,MAAMlI,EAAEsD,IAAI,IAAI1C,EAAE,cAAcF,EAAE8B,EAAEc,KAAKkB,eAAe3D,GAAG4D,SAAS5D,KAAK,OAAOD,EAAEC,YAAE,CAACU,YAAE,qCAAqCX,GAAGA,GAAG,IAAImI,EAAE,cAAc/I,EAAEsD,QAAMyF,EAAElI,YAAE,CAACU,YAAE,qCAAqCwH,I,iCCJlrC,0LAIi8B,MAAM7E,EAAEjD,IAAEqD,UAAU,kCAAkCtC,EAAEf,IAAI,IAAIe,EAAE,cAAcf,EAAEuD,cAAcC,SAASC,WAAW/B,KAAKqG,mBAAmB,CAACpD,WAAW,KAAKqD,MAAM,IAAItG,KAAKuG,0BAAyB,EAAG9C,UAAU,IAAI9C,EAAE,OAAOA,EAAEX,KAAKiD,aAAatC,EAAE8C,UAAUzD,KAAKiD,WAAW,KAAmB,eAACtC,GAAGA,IAAIX,KAAKkB,KAAK,gBAAgBlB,KAAKgG,aAAa,eAAehG,KAAKwG,KAAK,aAAa7F,IAAI8F,eAAe9F,EAAE1C,EAAEC,GAAG,GAAGD,EAAEyI,OAAO,OAAO,IAAIjF,UAAE,CAACU,GAAGlE,EAAEyI,OAAOvD,OAAOjF,GAAGA,EAAEiF,SAASwD,gBAAgBhG,EAAE1C,GAAG0C,GAAGA,EAAEwB,KAAKlE,EAAEyI,OAAO/F,EAAEwB,IAAwB,qBAACxB,EAAE1C,GAAG,GAAG+B,KAAKiD,YAAYjD,KAAKiD,WAAWd,GAAG,IAAI,MAAMjE,QAAQ,gCAA+C,OAAOU,YAAEX,SAASC,EAAE0I,KAAK,CAACC,SAAS7G,KAAK8G,eAAenG,EAAEmG,eAAeC,aAAapG,EAAEoG,aAAaC,aAAarG,EAAEqG,cAAc/I,GAAG,MAAMC,GAAG,MAAMH,YAAEG,IAAIqD,EAAE0F,KAAM,yBAAwBjH,KAAK4C,UAAU5C,KAAKmC,oBAAoBnC,KAAKiD,WAAWd,UAAUjE,KAAKA,GAAsC,oCAACyC,GAAGX,KAAKwG,KAAK,iCAAiCxG,KAAKkH,8BAA8BvG,GAAG4C,OAAO5C,IAAIpC,YAAEoC,IAAG,MAA0C,oCAACA,GAAG,MAAMzC,EAAE8B,KAAK6C,IAAI,MAAM5E,SAAE,EAAOA,IAAEkJ,eAAenH,KAAK6C,KAAK,KAAK,IAAI3E,EAAE,OAAM,EAAG,MAAM2B,EAAEuH,EAAEC,aAAanJ,EAAEkJ,EAAEE,WAAWtH,KAAKuH,iBAAiB5G,GAAG,OAAOyG,EAAEC,WAAWnJ,EAAEkJ,EAAEE,KAAKzH,EAAEd,YAAEc,IAAI,MAAMA,EAAE2H,YAAY3H,EAAE2H,WAAW7D,SAAS,sBAA4C,uBAAChD,GAAG,IAAID,EAAEpC,EAAE,MAAMS,EAAE,OAAO2B,EAAEV,KAAKiD,aAAa,OAAO3E,EAAEoC,EAAEyC,aAAQ,EAAO7E,EAAEgJ,KAAK,GAAGvI,EAAE,OAAOA,EAAE,MAAMH,EAAEX,IAAEwJ,eAAezH,KAAK6C,KAAK,GAAG,MAAMjE,IAAIA,EAAE8I,gBAAgB,OAAO,KAAK,MAAM3J,EAAG,GAAEa,EAAE8I,+BAA+BnJ,EAAEuB,IAAE6H,aAAa,GAAGpJ,GAAGA,EAAEqJ,QAAQ1I,YAAEX,EAAEsJ,WAAW3I,YAAEnB,GAAG,OAAOQ,EAAE+I,KAAK,MAAMxI,EAAG,GAAEf,mBAAmBc,EAAExB,YAAEsD,GAAGA,EAAEmH,OAAO,KAAKpG,QAAQ7B,YAAE3B,kBAAEY,EAAE,CAACiJ,SAAS,YAAY9D,MAAM,CAACzF,EAAE,QAAQsJ,OAAOjJ,KAAK,OAAO6C,EAAEsG,GAAG5G,UAAEC,SAASK,EAAElE,MAAM2G,MAAM,KAAKvG,KAAK+C,EAAE1C,GAAGA,IAAIA,EAAEgC,MAAMD,MAAM8B,MAAMlE,KAAK+C,EAAE1C,GAAGJ,MAAM8C,EAAE1C,GAAG,MAAMC,EAAED,GAAGA,EAAEkF,OAAOtD,EAAEG,KAAKiD,YAAYjD,KAAKiD,WAAWd,KAAKnC,KAAKiD,WAAWE,QAAQrD,IAAE6H,cAAc,OAAOzJ,GAAG2B,IAAIf,YAAEe,EAAEgI,QAAQ3J,EAAE2J,UAAU5J,EAAEgK,UAAUhK,EAAEgK,SAASC,KAAK,IAAIxH,IAAE,qBAAsB,cAAaV,KAAK4C,UAAU5C,KAAKmC,0OAA0O,CAAClC,MAAMD,QAAQ,MAAM8B,MAAMjE,MAAM8C,EAAE,IAAI1C,EAAEgC,MAAMD,SAAS,OAAOW,YAAE,CAAC9B,YAAE,CAACvB,KAAKmE,aAAKpC,EAAE+E,UAAU,aAAa,MAAMzD,YAAE,CAACe,YAAE,eAAe,aAAa,CAAC,YAAYrC,EAAE+E,UAAU,iBAAiB,MAAMzD,YAAE,CAAC3B,YAAE,eAAe,aAAa,CAAC0H,OAAO,CAACpJ,KAAKmB,WAAWY,EAAE+E,UAAU,kBAAkB,MAAMzD,YAAE,CAAC9B,eAAKQ,EAAE+E,UAAU,0BAAqB,GAAQzD,YAAE,CAAC9B,YAAE,CAACI,UAAS,KAAMI,EAAE+E,UAAU,gCAA2B,GAAQ/E,EAAEsB,YAAE,CAACnC,YAAE,mCAAmCa,GAAGA,GAAG+H,EAAE,CAACC,WAAW,KAAKC,KAAK,O,qJCA3pH,MAAMrJ,EAAE,CAAC,+BAA+B,CAACkK,oBAAmB,EAAGC,yBAAwB,EAAGC,uBAAsB,EAAGC,yBAAwB,EAAGC,kCAAiC,EAAGC,8BAA6B,EAAGC,4BAA2B,EAAGC,oBAAmB,EAAGC,YAAW,EAAGC,qBAAoB,EAAGC,iBAAgB,EAAGC,iBAAgB,EAAGC,eAAc,EAAGC,KAAI,EAAGC,iBAAgB,EAAGC,KAAI,EAAGC,KAAI,EAAGC,KAAI,EAAGC,iBAAgB,EAAGC,OAAM,GAAI,oBAAoB,CAACd,8BAA6B,EAAGC,4BAA2B,EAAGM,eAAc,EAAGQ,eAAc,EAAGN,iBAAgB,EAAGb,yBAAwB,EAAGe,KAAI,EAAGd,uBAAsB,GAAI,mBAAmB,CAACE,kCAAiC,EAAGiB,0BAAyB,GAAI,6BAA6B,CAACrB,oBAAmB,EAAGC,yBAAwB,EAAGqB,+BAA8B,EAAGpB,uBAAsB,EAAGqB,mBAAkB,EAAGlB,8BAA6B,EAAGC,4BAA2B,EAAGkB,gBAAe,EAAGC,gBAAe,EAAGC,cAAa,EAAGb,KAAI,EAAGc,QAAO,EAAGnB,YAAW,EAAGS,KAAI,EAAGP,iBAAgB,EAAGkB,mBAAkB,EAAGd,iBAAgB,EAAGC,KAAI,EAAGC,KAAI,EAAGJ,eAAc,GAAI,kBAAkB,CAACX,yBAAwB,EAAGqB,+BAA8B,EAAGpB,uBAAsB,EAAGG,8BAA6B,EAAGC,4BAA2B,EAAGc,eAAc,EAAGN,iBAAgB,EAAGE,KAAI,EAAGJ,eAAc,EAAGY,gBAAe,EAAGE,cAAa,EAAGD,gBAAe,GAAI,iBAAiB,CAACzB,oBAAmB,GAAI,iCAAiC,CAACG,yBAAwB,EAAGQ,iBAAgB,EAAGJ,oBAAmB,EAAGE,qBAAoB,I,aCA33B,MAAMvL,EAAEA,IAAI,IAAI2B,EAAE,cAAc3B,EAAEwE,cAAcC,SAASC,WAAW/B,KAAK4C,MAAM,KAAKoH,cAAc/L,EAAEC,EAAEI,EAAEqC,IAAIA,GAAG,WAAWA,EAAEsJ,oBAAoBhM,GAAGc,YAAEiB,KAAK1B,EAAE,GAAGqC,MAAMzC,EAAEI,GAAGL,GAAGiM,0BAA0BjM,EAAEC,EAAEI,EAAEqC,IAAI1C,GAAG0C,GAAG,WAAWA,EAAEsJ,qBAAqB/L,EAAEiM,UAAUlM,GAAGmM,WAAWnM,EAAEC,GAAGA,EAAE0E,MAAM3E,GAAG,QAAQL,KAAKK,EAAEC,GAAGA,IAAIA,EAAE+B,MAAMD,MAAMH,YAAEG,KAAK/B,GAAGC,GAAG4D,MAAMlE,KAAKK,EAAEC,IAAIA,GAAGL,MAAMI,EAAEK,GAAG,GAAGA,GAAGA,EAAEmB,OAAO,CAAC,MAAMxB,EAAG,GAAEK,EAAEmB,UAAUnB,EAAE2L,oBAAoB,uBAAuBtJ,EAAE5C,EAAEE,GAAG,IAAIyC,EAAEC,GAAGA,EAAEX,KAAKqK,sBAAsB,GAAG,qCAAqCrK,KAAKqK,sBAAsB,iCAAiCpM,IAAIyC,GAAE,IAAKA,EAAE,OAAOpC,EAAE2J,UAAU3J,EAAE2J,SAASC,KAAK,IAAIhK,IAAE,oBAAqB,WAAU8B,KAAK4C,UAAU5C,KAAKmC,gBAAgBnC,KAAKwD,uDAAuDvF,KAAK,CAACgC,MAAMD,QAAQ,KAAK,MAAMW,EAAEmB,MAAMjE,MAAMI,EAAE,IAAIK,EAAE2B,MAAMD,OAAOU,IAAIpC,KAAKA,EAAE2J,YAAY3J,EAAE2J,SAASqC,QAAQrM,GAAGA,aAAaC,KAAG,yCAAyCD,EAAEH,OAAOyM,OAAO,OAAOvK,KAAK6C,KAAKnC,EAAE,KAAKC,EAAE6J,gBAAgB,OAAOvM,YAAE,CAACK,YAAE,CAAChB,KAAKmB,OAAOhB,KAAK,CAACI,MAAM,CAACc,cAAa,GAAIjB,QAAQ,CAAC,YAAY,CAACG,MAAM,CAACa,YAAW,EAAGC,cAAa,IAAK,cAAc,CAACd,OAAM,QAASmB,EAAEoF,UAAU,UAAK,GAAQnG,YAAE,CAACK,YAAE,CAACb,KAAK,CAACI,MAAM,CAACc,cAAa,GAAIjB,QAAQ,CAAC,UAAU,CAACE,MAAK,EAAGC,OAAM,QAASmB,EAAEoF,UAAU,gBAAW,GAAQnG,YAAE,CAACyC,YAAE,aAAa1B,EAAEoF,UAAU,gBAAgB,MAAMnG,YAAE,CAACK,YAAE,CAAChB,KAAKmB,OAAOQ,UAAS,EAAGxB,KAAK,CAACG,MAAK,EAAGC,MAAM,CAACyB,OAAO,YAAYX,cAAa,GAAIjB,QAAQ,CAAC,cAAc,CAACG,OAAM,QAASmB,EAAEoF,UAAU,4BAAuB,GAAQnG,YAAE,CAACyC,YAAE,yBAAyB1B,EAAEoF,UAAU,4BAA4B,MAAMnG,YAAE,CAACK,YAAEM,MAAII,EAAEoF,UAAU,eAAU,GAAQnG,YAAE,CAACK,YAAE,CAAChB,KAAKmB,OAAOhB,KAAK,CAACI,MAAM,CAACc,cAAa,EAAG8L,WAAU,GAAI/M,QAAQ,CAAC,YAAY,CAACG,MAAM,CAACa,YAAW,EAAGC,cAAa,EAAG8L,WAAU,IAAK,cAAc,CAAC5M,OAAM,KAAML,MAAM,WAAWwB,EAAEoF,UAAU,aAAQ,GAAQnG,YAAE,CAACyC,YAAE,UAAU1B,EAAEoF,UAAU,aAAa,MAAMnG,YAAE,CAACK,YAAE,CAAChB,KAAKC,QAAQE,KAAK,CAACK,KAAK,aAAaJ,QAAQ,CAAC,eAAe,CAACI,KAAK,aAAasB,SAAQ,GAAI,cAAc,CAACtB,KAAK,aAAaF,KAAK,CAAC4B,OAAO,CAAC,UAAU,qBAAqBR,EAAEoF,UAAU,eAAU,GAAQpF,EAAEf,YAAE,CAAC0C,YAAE,wCAAwC3B,GAAGA,I,iCCJ5uF,qGAI0a,MAAMjB,EAAEA,IAAI,IAAIe,EAAE,cAAcf,EAAW,YAAG,GAAGiC,KAAKkB,KAAK,UAAU,aAAalB,KAAKqF,SAAS,SAAS,OAAOrF,KAAKkB,KAAK,SAAS,GAAGlB,KAAK6C,IAAI,CAAC,MAAMlC,EAAErC,YAAE0B,KAAK6C,KAAK,GAAG5E,YAAE0C,IAAIA,EAAEiC,MAAM,OAAOjC,EAAEiC,MAAM,OAAO5C,KAAKkB,KAAK,UAAU,GAAY,UAACP,GAAGX,KAAKwG,KAAK,QAAQ7F,GAAU,QAACA,GAAGX,KAAKwG,KAAK,MAAMnJ,YAAEsD,EAAEzC,IAAEyD,UAAU3B,KAAKwD,mBAAmB,OAAO7C,YAAE,CAACd,eAAKf,EAAEsF,UAAU,QAAQ,MAAMzD,YAAE,CAACd,YAAE,CAACvC,KAAKmB,UAAUK,EAAEsF,UAAU,MAAM,MAAMtF,EAAE6B,YAAE,CAACD,YAAE,qCAAqC5B,GAAGA","file":"static/js/13.b8f9c59a.chunk.js","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport e from\"../../TimeExtent.js\";import r from\"../../geometry/Extent.js\";import i from\"../../geometry/SpatialReference.js\";import{w as n}from\"../../chunks/persistableUrlUtils.js\";import{toLocalTimeExtent as t,toUTCTimeExtent as o}from\"../../support/timeUtils.js\";import a from\"../../symbols/support/ElevationInfo.js\";import{transparencyToOpacity as s}from\"../../webdoc/support/opacityUtils.js\";const l={type:Boolean,value:!0,json:{origins:{service:{read:!1,write:!1},\"web-map\":{read:!1,write:!1}},name:\"screenSizePerspective\",write:!0}},p={type:Boolean,value:!0,json:{name:\"disablePopup\",read:{reader:(e,r)=>!r.disablePopup},write:{enabled:!0,writer(e,r,i){r[i]=!e}}}},m={type:Boolean,value:!0,json:{name:\"showLabels\",write:!0}},f={type:String,json:{origins:{\"portal-item\":{write:!1}},write:{isRequired:!0,ignoreOrigin:!0,writer:n}}},d={type:Boolean,value:!0,json:{origins:{service:{read:{enabled:!1}}},name:\"showLegend\",write:!0}},c={value:null,type:a,json:{origins:{service:{name:\"elevationInfo\",write:!0}},name:\"layerDefinition.elevationInfo\",write:!0}};function y(e){return{type:e,readOnly:!0,json:{origins:{service:{read:!0}},read:!1}}}const u={type:Number,json:{origins:{\"web-document\":{default:1,write:!0,read:!0},\"portal-item\":{write:!0}}}},w={...u,json:{...u.json,origins:{\"web-document\":{...u.json.origins[\"web-document\"],write:{enabled:!0,target:{opacity:{type:Number},\"layerDefinition.drawingInfo.transparency\":{type:Number}}}}},read:{source:[\"layerDefinition.drawingInfo.transparency\",\"drawingInfo.transparency\"],reader:(e,r,i)=>i&&\"service\"!==i.origin||!r.drawingInfo||void 0===r.drawingInfo.transparency?r.layerDefinition&&r.layerDefinition.drawingInfo&&void 0!==r.layerDefinition.drawingInfo.transparency?s(r.layerDefinition.drawingInfo.transparency):void 0:s(r.drawingInfo.transparency)}}},g={type:e,readOnly:!0,get(){var e,r;if(null==(e=this.layer)||!e.timeInfo)return null;const{datesInUnknownTimezone:i,timeOffset:n,useViewTime:a}=this.layer,s=null==(r=this.view)?void 0:r.timeExtent;let l=this.layer.timeExtent;i&&(l=t(l));let p=a?s&&l?s.intersection(l):s||l:l;if(!p||p.isEmpty||p.isAllTime)return p;n&&(p=p.offset(-n.value,n.unit)),i&&(p=o(p));const m=this._get(\"timeExtent\");return p.equals(m)?m:p}},v={type:r,readOnly:!0,json:{origins:{service:{read:{source:[\"fullExtent\",\"spatialReference\"],reader:(e,n)=>{const t=r.fromJSON(e);return null!=n.spatialReference&&\"object\"==typeof n.spatialReference&&(t.spatialReference=i.fromJSON(n.spatialReference)),t}}}},read:!1}},j={type:String,json:{origins:{service:{read:!1},\"portal-item\":{read:!1}}}},b={type:Number,json:{origins:{service:{write:{enabled:!1}}},read:{source:\"layerDefinition.minScale\"},write:{target:\"layerDefinition.minScale\"}}},I={type:Number,json:{origins:{service:{write:{enabled:!1}}},read:{source:\"layerDefinition.maxScale\"},write:{target:\"layerDefinition.maxScale\"}}};export{g as combinedViewLayerTimeExtentProperty,c as elevationInfo,j as id,m as labelsVisible,d as legendEnabled,I as maxScale,b as minScale,u as opacity,w as opacityDrawingInfo,p as popupEnabled,y as readOnlyService,v as sceneLayerFullExtent,l as screenSizePerspectiveEnabled,f as url};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport t from\"../TimeExtent.js\";import{unwrap as e,isSome as n,isNone as i}from\"../core/maybe.js\";import{eachAlways as o}from\"../core/promiseUtils.js\";import{offsetDate as r}from\"../core/timeUtils.js\";function m(t){return\"feature\"===(null==t?void 0:t.type)}function s(t){return\"map-image\"===(null==t?void 0:t.type)}function f(t){return void 0!==t.timeInfo}async function u(n,r){if(0===n.length)return t.allTime;const u=n.filter(f);await Promise.all(u.map((t=>t.load({signal:r}))));const a=[],l=[];for(const t of u)(m(t)||s(t))&&t.timeInfo.hasLiveData?a.push(t):l.push(t);const c=t=>i(t)||t.isAllTime,p=l.map((t=>t.timeInfo.fullTimeExtent));if(p.some(c))return t.allTime;const T=a.map((async t=>{const{timeExtent:n}=await t.fetchRecomputedExtents({signal:r});return n||e(t.timeInfo.fullTimeExtent)})),d=(await o(T)).map((t=>t.value));if(d.some(c))return t.allTime;return d.concat(p).reduce(((t,e)=>t.union(e)))}function a(e){if(!e)return e;const{start:i,end:o}=e;return new t({start:n(i)?r(i,-i.getTimezoneOffset(),\"minutes\"):i,end:n(o)?r(o,-o.getTimezoneOffset(),\"minutes\"):o})}function l(e){if(!e)return e;const{start:i,end:o}=e;return new t({start:n(i)?r(i,i.getTimezoneOffset(),\"minutes\"):i,end:n(o)?r(o,o.getTimezoneOffset(),\"minutes\"):o})}export{u as getTimeExtentFromLayers,l as toLocalTimeExtent,a as toUTCTimeExtent};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport{_ as t}from\"../chunks/tslib.es6.js\";import r from\"../config.js\";import\"../geometry.js\";import e from\"../request.js\";import o from\"../core/Error.js\";import i from\"../core/Evented.js\";import{IdentifiableMixin as a}from\"../core/Identifiable.js\";import s from\"../core/Loadable.js\";import l from\"../core/Logger.js\";import{isAbortError as p}from\"../core/promiseUtils.js\";import{urlToObject as n}from\"../core/urlUtils.js\";import{property as y}from\"../core/accessorSupport/decorators/property.js\";import\"../core/has.js\";import\"../core/accessorSupport/ensureType.js\";import{subclass as c}from\"../core/accessorSupport/decorators/subclass.js\";import u from\"../geometry/Extent.js\";import d from\"../geometry/SpatialReference.js\";let m=0;const h=l.getLogger(\"esri.layers.Layer\");let f=class extends(i.EventedMixin(a(s))){constructor(){super(...arguments),this.attributionDataUrl=null,this.fullExtent=new u(-180,-90,180,90,d.WGS84),this.id=Date.now().toString(16)+\"-layer-\"+m++,this.legendEnabled=!0,this.listMode=\"show\",this.opacity=1,this.parent=null,this.popupEnabled=!0,this.attributionVisible=!0,this.spatialReference=d.WGS84,this.title=null,this.type=null,this.url=null,this.visible=!0}static async fromArcGISServerUrl(t){const r=\"string\"==typeof t?{url:t}:t,e=await import(\"./support/arcgisLayers.js\");try{return await e.fromUrl(r)}catch(o){throw h.error(\"#fromArcGISServerUrl({ url: '\"+r.url+\"'})\",\"Failed to create layer from arcgis server url\",o),o}}static async fromPortalItem(t){const e=\"portalItem\"in t?t:{portalItem:t},o=await import(\"../portal/support/portalLayers.js\");try{return await o.fromItem(e)}catch(i){const t=e&&e.portalItem,o=t&&t.id||\"unset\",a=t&&t.portal&&t.portal.url||r.portalUrl;throw h.error(\"#fromPortalItem()\",\"Failed to create layer from portal item (portal: '\"+a+\"', id: '\"+o+\"')\",i),i}}initialize(){this.when().catch((t=>{var r,e;p(t)||l.getLogger(this.declaredClass).error(\"#load()\",`Failed to load layer (title: '${null!=(r=this.title)?r:\"no title\"}', id: '${null!=(e=this.id)?e:\"no id\"}')`,{error:t})}))}destroy(){if(this.parent){const t=this,r=this.parent;\"layers\"in r&&r.layers.includes(t)?r.layers.remove(t):\"tables\"in r&&r.tables.includes(t)?r.tables.remove(t):\"baseLayers\"in r&&r.baseLayers.includes(t)?r.baseLayers.remove(t):\"baseLayers\"in r&&r.referenceLayers.includes(t)&&r.referenceLayers.remove(t)}}get hasAttributionData(){return null!=this.attributionDataUrl}get parsedUrl(){const t=this.url;return t?n(t):null}async fetchAttributionData(){const t=this.attributionDataUrl;if(this.hasAttributionData&&t){return(await e(t,{query:{f:\"json\"},responseType:\"json\"})).data}throw new o(\"layer:no-attribution-data\",\"Layer does not have attribution data\")}};t([y({type:String})],f.prototype,\"attributionDataUrl\",void 0),t([y({type:u})],f.prototype,\"fullExtent\",void 0),t([y({readOnly:!0})],f.prototype,\"hasAttributionData\",null),t([y({type:String})],f.prototype,\"id\",void 0),t([y({type:Boolean,nonNullable:!0})],f.prototype,\"legendEnabled\",void 0),t([y({type:[\"show\",\"hide\",\"hide-children\"]})],f.prototype,\"listMode\",void 0),t([y({type:Number,range:{min:0,max:1},nonNullable:!0})],f.prototype,\"opacity\",void 0),t([y()],f.prototype,\"parent\",void 0),t([y({readOnly:!0})],f.prototype,\"parsedUrl\",null),t([y({type:Boolean})],f.prototype,\"popupEnabled\",void 0),t([y({type:Boolean})],f.prototype,\"attributionVisible\",void 0),t([y({type:d})],f.prototype,\"spatialReference\",void 0),t([y({type:String})],f.prototype,\"title\",void 0),t([y({type:String,readOnly:!0,json:{read:!1}})],f.prototype,\"type\",void 0),t([y()],f.prototype,\"url\",void 0),t([y({type:Boolean,nonNullable:!0})],f.prototype,\"visible\",void 0),f=t([c(\"esri.layers.Layer\")],f);var b=f;export{b as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport{clone as t}from\"../lang.js\";import{assumeNonNull as s}from\"../maybe.js\";import{OriginIdNum as e}from\"./PropertyOrigin.js\";class r{constructor(){this._propertyOriginMap=new Map,this._originStores=new Array(e),this._values=new Map}clone(s){const i=new r,o=this._originStores[0];o&&o.forEach(((s,e)=>{i.set(e,t(s),0)}));for(let r=2;r<e;r++){const e=this._originStores[r];e&&e.forEach(((e,o)=>{s&&s.has(o)||i.set(o,t(e),r)}))}return i}get(t,s){const e=void 0===s?this._values:this._originStores[s];return e?e.get(t):void 0}keys(t){const s=null==t?this._values:this._originStores[t];return s?[...s.keys()]:[]}set(t,e,r=6){let i=this._originStores[r];if(i||(i=new Map,this._originStores[r]=i),i.set(t,e),!this._values.has(t)||s(this._propertyOriginMap.get(t))<=r){const s=this._values.get(t);return this._values.set(t,e),this._propertyOriginMap.set(t,r),s!==e}return!1}delete(t,s=6){const e=this._originStores[s];if(!e)return;const r=e.get(t);if(e.delete(t),this._values.has(t)&&this._propertyOriginMap.get(t)===s){this._values.delete(t);for(let e=s-1;e>=0;e--){const s=this._originStores[e];if(s&&s.has(t)){this._values.set(t,s.get(t)),this._propertyOriginMap.set(t,e);break}}}return r}has(t,s){const e=void 0===s?this._values:this._originStores[s];return!!e&&e.has(t)}revert(t,s){for(;s>0&&!this.has(t,s);)--s;const e=this._originStores[s],r=e&&e.get(t),i=this._values.get(t);return this._values.set(t,r),this._propertyOriginMap.set(t,s),i!==r}originOf(t){return this._propertyOriginMap.get(t)||0}forEach(t){this._values.forEach(t)}}export{r as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport{_ as r}from\"../chunks/tslib.es6.js\";import t from\"./Accessor.js\";import{assumeNonNull as s}from\"./maybe.js\";import e from\"./accessorSupport/MultiOriginStore.js\";import{idToName as o,nameToId as i}from\"./accessorSupport/PropertyOrigin.js\";import{read as n}from\"./accessorSupport/read.js\";import{getProperties as c}from\"./accessorSupport/utils.js\";import{subclass as p}from\"./accessorSupport/decorators/subclass.js\";const a=t=>{let a=class extends t{constructor(...r){super(...r);const t=s(c(this)),o=t.metadatas,i=t.store,n=new e;t.store=n,i.keys().forEach((r=>{n.set(r,i.get(r),0)})),Object.keys(o).forEach((r=>{t.internalGet(r)&&n.set(r,t.internalGet(r),0)}))}read(r,t){n(this,r,t)}getAtOrigin(r,t){const s=u(this),e=i(t);if(\"string\"==typeof r)return s.get(r,e);const o={};return r.forEach((r=>{o[r]=s.get(r,e)})),o}originOf(r){return o(this.originIdOf(r))}originIdOf(r){return u(this).originOf(r)}revert(r,t){const s=u(this),e=i(t),o=c(this);let n;n=\"string\"==typeof r?\"*\"===r?s.keys(e):[r]:r,n.forEach((r=>{o.invalidate(r),s.revert(r,e),o.commit(r)}))}};return a=r([p(\"esri.core.ReadOnlyMultiOriginJSONSupport\")],a),a};function u(r){return c(r).store}let f=class extends(a(t)){};f=r([p(\"esri.core.ReadOnlyMultiOriginJSONSupport\")],f);export{a as ReadOnlyMultiOriginJSONMixin,f as ReadOnlyMultiOriginJSONSupport};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport{_ as r}from\"../chunks/tslib.es6.js\";import t from\"./Accessor.js\";import{ReadOnlyMultiOriginJSONMixin as s}from\"./ReadOnlyMultiOriginJSONSupport.js\";import{nameToId as e,OriginIdNum as o}from\"./accessorSupport/PropertyOrigin.js\";import{getProperties as i}from\"./accessorSupport/utils.js\";import{write as c}from\"./accessorSupport/write.js\";import{subclass as n}from\"./accessorSupport/decorators/subclass.js\";const p=t=>{let s=class extends t{constructor(...r){super(...r)}clear(r,t=\"user\"){return u(this).delete(r,e(t))}write(r={},t){return c(this,r=r||{},t),r}setAtOrigin(r,t,s){i(this).setAtOrigin(r,t,e(s))}removeOrigin(r){const t=u(this),s=e(r),o=t.keys(s);for(const e of o)t.originOf(e)===s&&t.set(e,t.get(e,s),6)}updateOrigin(r,t){const s=u(this),i=e(t),c=this.get(r);for(let e=i+1;e<o;++e)s.delete(r,e);s.set(r,c,i)}toJSON(r){return this.write({},r)}};return s=r([n(\"esri.core.WriteableMultiOriginJSONSupport\")],s),s.prototype.toJSON.isDefaultToJSON=!0,s};function u(r){return i(r).store}const l=t=>{let e=class extends(p(s(t))){constructor(...r){super(...r)}};return e=r([n(\"esri.core.MultiOriginJSONSupport\")],e),e};let O=class extends(l(t)){};O=r([n(\"esri.core.MultiOriginJSONSupport\")],O);export{l as MultiOriginJSONMixin,O as MultiOriginJSONSupport};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport{_ as t}from\"../../chunks/tslib.es6.js\";import{id as e}from\"../../kernel.js\";import r from\"../../request.js\";import{result as s}from\"../../core/asyncUtils.js\";import o from\"../../core/Error.js\";import i from\"../../core/Logger.js\";import{isNone as a,isSome as l}from\"../../core/maybe.js\";import{throwIfAborted as n,isAbortError as p,throwIfAbortError as m}from\"../../core/promiseUtils.js\";import{normalize as u,hasSamePortal as c}from\"../../core/urlUtils.js\";import{property as d}from\"../../core/accessorSupport/decorators/property.js\";import\"../../core/has.js\";import\"../../core/accessorSupport/ensureType.js\";import{reader as h}from\"../../core/accessorSupport/decorators/reader.js\";import{subclass as f}from\"../../core/accessorSupport/decorators/subclass.js\";import{writer as y}from\"../../core/accessorSupport/decorators/writer.js\";import g from\"../../portal/Portal.js\";import I from\"../../portal/PortalItem.js\";import v from\"../../portal/PortalUser.js\";const j=i.getLogger(\"esri.layers.mixins.PortalLayer\"),w=i=>{let w=class extends i{constructor(){super(...arguments),this.resourceReferences={portalItem:null,paths:[]},this.userHasEditingPrivileges=!0}destroy(){var t;null==(t=this.portalItem)||t.destroy(),this.portalItem=null}set portalItem(t){t!==this._get(\"portalItem\")&&(this.removeOrigin(\"portal-item\"),this._set(\"portalItem\",t))}readPortalItem(t,e,r){if(e.itemId)return new I({id:e.itemId,portal:r&&r.portal})}writePortalItem(t,e){t&&t.id&&(e.itemId=t.id)}async loadFromPortal(t,e){if(this.portalItem&&this.portalItem.id)try{const r=await import(\"../../portal/support/layersLoader.js\");return n(e),await r.load({instance:this,supportedTypes:t.supportedTypes,validateItem:t.validateItem,supportsData:t.supportsData},e)}catch(r){throw p(r)||j.warn(`Failed to load layer (${this.title}, ${this.id}) portal item (${this.portalItem.id})\\n  ${r}`),r}}async finishLoadEditablePortalLayer(t){this._set(\"userHasEditingPrivileges\",await this.fetchUserHasEditingPrivileges(t).catch((t=>(m(t),!0))))}async fetchUserHasEditingPrivileges(t){const r=this.url?null==e?void 0:e.findCredential(this.url):null;if(!r)return!0;const s=P.credential===r?P.user:await this.fetchEditingUser(t);return P.credential=r,P.user=s,a(s)||null==s.privileges||s.privileges.includes(\"features:user:edit\")}async fetchEditingUser(t){var o,i;const a=null==(o=this.portalItem)||null==(i=o.portal)?void 0:i.user;if(a)return a;const n=e.findServerInfo(this.url);if(null==n||!n.owningSystemUrl)return null;const p=`${n.owningSystemUrl}/sharing/rest`,m=g.getDefault();if(m&&m.loaded&&u(m.restUrl)===u(p))return m.user;const c=`${p}/community/self`,d=l(t)?t.signal:null,h=await s(r(c,{authMode:\"no-prompt\",query:{f:\"json\"},signal:d}));return h.ok?v.fromJSON(h.value.data):null}read(t,e){e&&(e.layer=this),super.read(t,e)}write(t,e){const r=e&&e.portal,s=this.portalItem&&this.portalItem.id&&(this.portalItem.portal||g.getDefault());return r&&s&&!c(s.restUrl,r.restUrl)?(e.messages&&e.messages.push(new o(\"layer:cross-portal\",`The layer '${this.title} (${this.id})' cannot be persisted because it refers to an item on a different portal than the one being saved to. To save the scene, set the layer.portalItem to null or save the scene to the same portal as the item associated with the layer`,{layer:this})),null):super.write(t,{...e,layer:this})}};return t([d({type:I})],w.prototype,\"portalItem\",null),t([h(\"web-document\",\"portalItem\",[\"itemId\"])],w.prototype,\"readPortalItem\",null),t([y(\"web-document\",\"portalItem\",{itemId:{type:String}})],w.prototype,\"writePortalItem\",null),t([d()],w.prototype,\"resourceReferences\",void 0),t([d({readOnly:!0})],w.prototype,\"userHasEditingPrivileges\",void 0),w=t([f(\"esri.layers.mixins.PortalLayer\")],w),w},P={credential:null,user:null};export{w as PortalLayer};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nconst e={\"web-scene/operational-layers\":{ArcGISFeatureLayer:!0,ArcGISImageServiceLayer:!0,ArcGISMapServiceLayer:!0,ArcGISSceneServiceLayer:!0,ArcGISTiledElevationServiceLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,BuildingSceneLayer:!0,GroupLayer:!0,IntegratedMeshLayer:!0,OGCFeatureLayer:!0,PointCloudLayer:!0,WebTiledLayer:!0,CSV:!0,VectorTileLayer:!0,WFS:!0,WMS:!0,KML:!0,RasterDataLayer:!0,Voxel:!0},\"web-scene/basemap\":{ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,WebTiledLayer:!0,OpenStreetMap:!0,VectorTileLayer:!0,ArcGISImageServiceLayer:!0,WMS:!0,ArcGISMapServiceLayer:!0},\"web-scene/ground\":{ArcGISTiledElevationServiceLayer:!0,RasterDataElevationLayer:!0},\"web-map/operational-layers\":{ArcGISFeatureLayer:!0,ArcGISImageServiceLayer:!0,ArcGISImageServiceVectorLayer:!0,ArcGISMapServiceLayer:!0,ArcGISStreamLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,BingMapsAerial:!0,BingMapsHybrid:!0,BingMapsRoad:!0,CSV:!0,GeoRSS:!0,GroupLayer:!0,KML:!0,OGCFeatureLayer:!0,SubtypeGroupLayer:!0,VectorTileLayer:!0,WFS:!0,WMS:!0,WebTiledLayer:!0},\"web-map/basemap\":{ArcGISImageServiceLayer:!0,ArcGISImageServiceVectorLayer:!0,ArcGISMapServiceLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,OpenStreetMap:!0,VectorTileLayer:!0,WMS:!0,WebTiledLayer:!0,BingMapsAerial:!0,BingMapsRoad:!0,BingMapsHybrid:!0},\"web-map/tables\":{ArcGISFeatureLayer:!0},\"portal-item/operational-layers\":{ArcGISSceneServiceLayer:!0,PointCloudLayer:!0,BuildingSceneLayer:!0,IntegratedMeshLayer:!0}};export{e as supportedTypes};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../chunks/tslib.es6.js\";import r from\"../../core/Error.js\";import{property as i}from\"../../core/accessorSupport/decorators/property.js\";import\"../../core/has.js\";import\"../../core/accessorSupport/ensureType.js\";import\"../../core/Logger.js\";import{subclass as t}from\"../../core/accessorSupport/decorators/subclass.js\";import{writer as o}from\"../../core/accessorSupport/decorators/writer.js\";import{readLoadable as s}from\"../../core/accessorSupport/read.js\";import{willPropertyWrite as a}from\"../../core/accessorSupport/write.js\";import{supportedTypes as p}from\"./operationalLayers.js\";import{opacity as n}from\"../support/commonProperties.js\";const l=l=>{let y=class extends l{constructor(){super(...arguments),this.title=null}writeListMode(e,r,i,t){(t&&\"ground\"===t.layerContainerType||e&&a(this,i,{},t))&&(r[i]=e)}writeOperationalLayerType(e,r,i,t){!e||t&&\"tables\"===t.layerContainerType||(r.layerType=e)}writeTitle(e,r){r.title=e||\"Layer\"}read(e,r){r&&(r.layer=this),s(this,e,(r=>super.read(e,r)),r)}write(e,i){if(i&&i.origin){const e=`${i.origin}/${i.layerContainerType||\"operational-layers\"}`,t=p[e];let o=t&&t[this.operationalLayerType];if(\"ArcGISTiledElevationServiceLayer\"===this.operationalLayerType&&\"web-scene/operational-layers\"===e&&(o=!1),!o)return i.messages&&i.messages.push(new r(\"layer:unsupported\",`Layers (${this.title}, ${this.id}) of type '${this.declaredClass}' are not supported in the context of '${e}'`,{layer:this})),null}const t=super.write(e,{...i,layer:this}),o=!!i&&!!i.messages&&!!i.messages.filter((e=>e instanceof r&&\"web-document-write:property-required\"===e.name)).length;return!this.url&&o?null:t}beforeSave(){}};return e([i({type:String,json:{write:{ignoreOrigin:!0},origins:{\"web-scene\":{write:{isRequired:!0,ignoreOrigin:!0}},\"portal-item\":{write:!1}}}})],y.prototype,\"id\",void 0),e([i({json:{write:{ignoreOrigin:!0},origins:{\"web-map\":{read:!1,write:!1}}}})],y.prototype,\"listMode\",void 0),e([o(\"listMode\")],y.prototype,\"writeListMode\",null),e([i({type:String,readOnly:!0,json:{read:!1,write:{target:\"layerType\",ignoreOrigin:!0},origins:{\"portal-item\":{write:!1}}}})],y.prototype,\"operationalLayerType\",void 0),e([o(\"operationalLayerType\")],y.prototype,\"writeOperationalLayerType\",null),e([i(n)],y.prototype,\"opacity\",void 0),e([i({type:String,json:{write:{ignoreOrigin:!0,allowNull:!0},origins:{\"web-scene\":{write:{isRequired:!0,ignoreOrigin:!0,allowNull:!0}},\"portal-item\":{write:!1}}},value:\"Layer\"})],y.prototype,\"title\",void 0),e([o(\"title\")],y.prototype,\"writeTitle\",null),e([i({type:Boolean,json:{name:\"visibility\",origins:{\"web-document\":{name:\"visibility\",default:!0},\"portal-item\":{name:\"visibility\",read:{source:[\"visible\",\"visibility\"]}}}}})],y.prototype,\"visible\",void 0),y=e([t(\"esri.layers.mixins.OperationalLayer\")],y),y};function y(e){return\"operationalLayerType\"in e}export{l as OperationalLayer,y as isOperationalLayer};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport{_ as t}from\"../../chunks/tslib.es6.js\";import r from\"../../core/Logger.js\";import{isSome as e}from\"../../core/maybe.js\";import{property as s}from\"../../core/accessorSupport/decorators/property.js\";import\"../../core/has.js\";import\"../../core/accessorSupport/ensureType.js\";import{subclass as o}from\"../../core/accessorSupport/decorators/subclass.js\";import{parse as i,sanitizeUrl as l}from\"../support/arcgisLayerUrl.js\";const p=p=>{let c=class extends p{get title(){if(this._get(\"title\")&&\"defaults\"!==this.originOf(\"title\"))return this._get(\"title\");if(this.url){const t=i(this.url);if(e(t)&&t.title)return t.title}return this._get(\"title\")||\"\"}set title(t){this._set(\"title\",t)}set url(t){this._set(\"url\",l(t,r.getLogger(this.declaredClass)))}};return t([s()],c.prototype,\"title\",null),t([s({type:String})],c.prototype,\"url\",null),c=t([o(\"esri.layers.mixins.ArcGISService\")],c),c};export{p as ArcGISService};\n"],"sourceRoot":""}