"use strict";(globalThis.webpackChunkimaps=globalThis.webpackChunkimaps||[]).push([[3518],{47991:(t,e,n)=>{n.d(e,{SR:()=>u,Ui:()=>l});var i=n(92026),s=n(65156),o=n(376),r=n(69662),a=n(77981),h=n(76335),c=n(92975);function l(t){return d(t,!0)}function u(t){return d(t,!1)}function d(t,e){if((0,i.Wi)(t))return null;const n=t.spatialReference,s=(0,c.C5)(n),r="toJSON"in t?t.toJSON():t;if(!s)return r;const l=(0,c.sS)(n)?102100:4326,u=h.UZ[l].maxX,d=h.UZ[l].minX;if((0,a.wp)(r))return _(r,u,d);if((0,a.aW)(r))return r.points=r.points.map((t=>_(t,u,d))),r;if((0,a.YX)(r))return p(r,s);if((0,a.oU)(r)||(0,a.l9)(r)){const t=(0,o.$P)(v,r),n={xmin:t[0],ymin:t[1],xmax:t[2],ymax:t[3]},i=(0,h.XZ)(n.xmin,d)*(2*u),s=0===i?r:(0,h.Sy)(r,i);return n.xmin+=i,n.xmax+=i,n.xmax>u?m(s,u,e):n.xmin<d?m(s,d,e):s}return r}function p(t,e){if(!e)return t;const n=function(t,e){const n=[],{ymin:i,ymax:s,xmin:o,xmax:r}=t,a=t.xmax-t.xmin,[h,c]=e.valid,{x:l,frameId:u}=y(t.xmin,e),{x:d,frameId:p}=y(t.xmax,e),_=l===d&&a>0;if(a>2*c){const t={xmin:o<r?l:d,ymin:i,xmax:c,ymax:s},e={xmin:h,ymin:i,xmax:o<r?d:l,ymax:s},a={xmin:0,ymin:i,xmax:c,ymax:s},_={xmin:h,ymin:i,xmax:0,ymax:s},y=[],f=[];g(t,a)&&y.push(u),g(t,_)&&f.push(u),g(e,a)&&y.push(p),g(e,_)&&f.push(p);for(let n=u+1;n<p;n++)y.push(n),f.push(n);n.push(new x(t,[u]),new x(e,[p]),new x(a,y),new x(_,f))}else l>d||_?n.push(new x({xmin:l,ymin:i,xmax:c,ymax:s},[u]),new x({xmin:h,ymin:i,xmax:d,ymax:s},[p])):n.push(new x({xmin:l,ymin:i,xmax:d,ymax:s},[u]));return n}(t,e).map((t=>t.extent));return n.length<2?n[0]||t:n.length>2?(t.xmin=e.valid[0],t.xmax=e.valid[1],t):{rings:n.map((t=>[[t.xmin,t.ymin],[t.xmin,t.ymax],[t.xmax,t.ymax],[t.xmax,t.ymin],[t.xmin,t.ymin]]))}}function _(t,e,n){if(Array.isArray(t)){const i=t[0];if(i>e){const n=(0,h.XZ)(i,e);t[0]=i+n*(-2*e)}else if(i<n){const e=(0,h.XZ)(i,n);t[0]=i+e*(-2*n)}}else{const i=t.x;if(i>e){const n=(0,h.XZ)(i,e);t.x+=n*(-2*e)}else if(i<n){const e=(0,h.XZ)(i,n);t.x+=e*(-2*n)}}return t}function y(t,e){const[n,i]=e.valid,s=2*i;let o,r=0;return t>i?(o=Math.ceil(Math.abs(t-i)/s),t-=o*s,r=o):t<n&&(o=Math.ceil(Math.abs(t-n)/s),t+=o*s,r=-o),{x:t,frameId:r}}function g(t,e){const{xmin:n,ymin:i,xmax:s,ymax:o}=e;return f(t,n,i)&&f(t,n,o)&&f(t,s,o)&&f(t,s,i)}function f(t,e,n){return e>=t.xmin&&e<=t.xmax&&n>=t.ymin&&n<=t.ymax}function m(t,e){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const i=!(0,a.l9)(t);if(i&&(0,r.Zy)(t),n)return(new C).cut(t,e);const s=i?t.rings:t.paths,o=i?4:2,h=s.length,c=-2*e;for(let r=0;r<h;r++){const t=s[r];if(t&&t.length>=o){const e=[];for(const n of t)e.push([n[0]+c,n[1]]);s.push(e)}}return i?t.rings=s:t.paths=s,t}class x{constructor(t,e){this.extent=t,this.frameIds=e}}const v=(0,s.Ue)();class C{constructor(){this._linesIn=[],this._linesOut=[]}cut(t,e){let n;if(this._xCut=e,t.rings)this._closed=!0,n=t.rings,this._minPts=4;else{if(!t.paths)return null;this._closed=!1,n=t.paths,this._minPts=2}for(const s of n){if(!s||s.length<this._minPts)continue;let t=!0;for(const e of s)t?(this.moveTo(e),t=!1):this.lineTo(e);this._closed&&this.close()}this._pushLineIn(),this._pushLineOut(),n=[];for(const s of this._linesIn)s&&s.length>=this._minPts&&n.push(s);const i=-2*this._xCut;for(const s of this._linesOut)if(s&&s.length>=this._minPts){for(const t of s)t[0]+=i;n.push(s)}return this._closed?t.rings=n:t.paths=n,t}moveTo(t){this._pushLineIn(),this._pushLineOut(),this._prevSide=this._side(t[0]),this._moveTo(t[0],t[1],this._prevSide),this._prevPt=t,this._firstPt=t}lineTo(t){const e=this._side(t[0]);if(e*this._prevSide==-1){const n=this._intersect(this._prevPt,t);this._lineTo(this._xCut,n,0),this._prevSide=0,this._lineTo(t[0],t[1],e)}else this._lineTo(t[0],t[1],e);this._prevSide=e,this._prevPt=t}close(){const t=this._firstPt,e=this._prevPt;t[0]===e[0]&&t[1]===e[1]||this.lineTo(t),this._checkClosingPt(this._lineIn),this._checkClosingPt(this._lineOut)}_moveTo(t,e,n){this._closed?(this._lineIn.push([n<=0?t:this._xCut,e]),this._lineOut.push([n>=0?t:this._xCut,e])):(n<=0&&this._lineIn.push([t,e]),n>=0&&this._lineOut.push([t,e]))}_lineTo(t,e,n){this._closed?(this._addPolyVertex(this._lineIn,n<=0?t:this._xCut,e),this._addPolyVertex(this._lineOut,n>=0?t:this._xCut,e)):n<0?(0===this._prevSide&&this._pushLineOut(),this._lineIn.push([t,e])):n>0?(0===this._prevSide&&this._pushLineIn(),this._lineOut.push([t,e])):this._prevSide<0?(this._lineIn.push([t,e]),this._lineOut.push([t,e])):this._prevSide>0&&(this._lineOut.push([t,e]),this._lineIn.push([t,e]))}_addPolyVertex(t,e,n){const i=t.length;i>1&&t[i-1][0]===e&&t[i-2][0]===e?t[i-1][1]=n:t.push([e,n])}_checkClosingPt(t){const e=t.length;e>3&&t[0][0]===this._xCut&&t[e-2][0]===this._xCut&&t[1][0]===this._xCut&&(t[0][1]=t[e-2][1],t.pop())}_side(t){return t<this._xCut?-1:t>this._xCut?1:0}_intersect(t,e){const n=(this._xCut-t[0])/(e[0]-t[0]);return t[1]+n*(e[1]-t[1])}_pushLineIn(){this._lineIn&&this._lineIn.length>=this._minPts&&this._linesIn.push(this._lineIn),this._lineIn=[]}_pushLineOut(){this._lineOut&&this._lineOut.length>=this._minPts&&this._linesOut.push(this._lineOut),this._lineOut=[]}}},36700:(t,e,n)=>{n.d(e,{x:()=>r});var i=n(95122),s=n(75691),o=n(61309);class r extends s.a{constructor(t){super({...t,constraint:new i.Hk(t.targetPoint)})}get hints(){return[new o.n(this.targetPoint,this.isDraped,this.domain)]}}},33518:(t,e,n)=>{n.r(e),n.d(e,{GraphicsSnappingSource:()=>E});var i=n(27366),s=n(85015),o=n(63780),r=n(14921),a=n(41691),h=n(92026),c=n(66978),l=n(94172),u=n(49861),d=(n(25243),n(69912)),p=n(80885),_=n(79803),y=n(47991),g=n(27823),f=n(83406),m=n(3182),x=n(68928),v=n(14e3),C=n(74509),S=n(74579),w=n(64674),b=n(52824),I=n(59877),P=n(53580),k=n(48817);const O="graphics-collections";let E=class extends((0,a.p)(s.Z)){get updating(){return this.updatingHandles.updating}get _hasZ(){const t=this.view;return(0,h.pC)(t)&&"3d"===t.type&&"map-notes"!==this.layerSource.layer.type}get _snappingElevationAligner(){const{view:t}=this,{layer:e}=this.layerSource,n=(0,h.pC)(t)&&"3d"===t.type;if(!n||"map-notes"===e.type)return(0,I.p)();return(0,I.p)(n,{elevationInfo:e.elevationInfo,alignPointsInFeatures:async(n,i)=>(await(0,c.Hl)(t.whenLayerView(e),i)).elevationAlignPointsInFeatures(n,i),spatialReference:t.spatialReference})}get _snappingElevationFilter(){const{view:t}=this,e=(0,h.pC)(t)&&"3d"===t.type&&"map-notes"!==this.layerSource.layer.type;return(0,P.c)(e)}get _symbologySnappingFetcher(){const{view:t}=this,{layer:e}=this.layerSource,n=(0,h.pC)(t)&&"3d"===t.type,i=this._extrudedPolygonSymbolsCount>0;return n&&"map-notes"!==e.type&&i?(0,k.k)(i,(async(n,i)=>{const s=await t.whenLayerView(e);return(0,c.k_)(i),s.queryForSymbologySnapping({candidates:n,spatialReference:t.spatialReference},i)})):(0,k.k)()}constructor(t){super(t),this.availability=1,this._sources={multipoint:null,point:null,polygon:null,polyline:null},this._loadedWkids=new Set,this._loadedWkts=new Set,this._pendingAdds=[],this._extrudedPolygonSymbolsCount=0}destroy(){for(const t of this._pendingAdds)t.task.abort();this._pendingAdds.length=0,this._mapSources((t=>this._destroySource(t)))}initialize(){this.updatingHandles.add((()=>this.getGraphicsLayers()),(t=>{this.updatingHandles.removeHandles(O);for(const e of t)this._addMany(e.graphics.toArray()),this.handles.add([e.on("graphic-update",(t=>this._onGraphicUpdate(t))),this.updatingHandles.addOnCollectionChange((()=>e.graphics),(t=>this._onGraphicsChanged(t)))],O)}),l.nn);const{view:t}=this,{layer:e}=this.layerSource;(0,h.pC)(t)&&"3d"===t.type&&"map-notes"!==e.type&&this.addHandles([t.elevationProvider.on("elevation-change",(t=>{let{context:n}=t;(0,C.W_)(n,e.elevationInfo)&&this._snappingElevationAligner.notifyElevationSourceChange()})),(0,l.YP)((()=>e.elevationInfo),(()=>this._snappingElevationAligner.notifyElevationSourceChange()),l.nn),(0,l.on)((()=>e),["edits","apply-edits","graphic-update"],(()=>this._symbologySnappingFetcher.notifySymbologyChange()))])}async fetchCandidates(t,e){const{point:n}=t,i=await(0,c.WW)(this._mapSources((n=>this._fetchCandidatesForSource(n,t,e))));(0,c.k_)(e);const s=this._getGroundElevation,o=i.flat().map((t=>(0,b.X)(t,s)));return(0,w.lQ)(n,o),o}get _getGroundElevation(){return(0,b.g)(this.view)}async _fetchCandidatesForSource(t,e,n){const i=(0,w.rh)(e,(0,h.Wg)(this.view)?.type??"2d"),s=await t.queryEngine.executeQueryForSnapping(i,n);(0,c.k_)(n);const o=await this._snappingElevationAligner.alignCandidates(s.candidates,n);(0,c.k_)(n);const r=await this._symbologySnappingFetcher.fetch(o,n);(0,c.k_)(n);const a=0===r.length?o:[...o,...r];return this._snappingElevationFilter.filter(i,a)}refresh(){}_onGraphicUpdate(t){if(this.getGraphicsLayers().some((e=>e.graphics.includes(t.graphic))))switch(t.property){case"geometry":case"visible":this._remove(t.graphic),this._addMany([t.graphic])}}_onGraphicsChanged(t){for(const e of t.removed)this._remove(e);this._addMany(t.added)}_addMany(t){const e=[],n=new Map;for(const i of t)(0,h.Wi)(i.geometry)||(this._needsInitializeProjection(i.geometry.spatialReference)?(e.push(i.geometry.spatialReference),n.set(i.uid,i)):this._add(i));this._createPendingAdd(e,n)}_createPendingAdd(t,e){if(!t.length)return;const n=(0,r.vr)((async n=>{await(0,_.iQ)(t.map((t=>({source:t,dest:this.spatialReference}))),{signal:n}),this._markLoadedSpatialReferences(t);for(const[,t]of e)this._add(t)}));this.updatingHandles.addPromise(n.promise);const i={task:n,graphics:e},s=()=>(0,o.e$)(this._pendingAdds,i);n.promise.then(s,s),this._pendingAdds.push(i)}_markLoadedSpatialReferences(t){for(const e of t)null!=e.wkid&&this._loadedWkids.add(e.wkid),null!=e.wkt&&this._loadedWkts.add(e.wkt)}_add(t){if((0,h.Wi)(t.geometry)||!t.visible)return;let e=t.geometry;if("mesh"===e.type)return;"extent"===e.type&&(e=p.Z.fromExtent(e));const n=this._ensureSource(e.type);if((0,h.Wi)(n))return;const i=this._createOptimizedFeature(t.uid,e);(0,h.Wi)(i)||(n.featureStore.add(i),(0,S.QL)(t.symbol)&&this._extrudedPolygonSymbolsCount++)}_needsInitializeProjection(t){return(null==t.wkid||!this._loadedWkids.has(t.wkid))&&(null==t.wkt||!this._loadedWkts.has(t.wkt))&&!(0,_.Up)(t,this.spatialReference)}_createOptimizedFeature(t,e){const n=(0,_.iV)((0,y.SR)(e),this.spatialReference);if(!n)return null;const i=this._ensureGeometryHasZ(n),s=(0,f.GH)(i,this._hasZ,!1);return new m.u_(s,{[z]:t},null,t)}_ensureGeometryHasZ(t){if(!this._hasZ)return t;const e=t=>{for(;t.length<3;)t.push(0)},n=t.clone();switch(n.hasZ=!0,n.type){case"point":n.z=n.z??0;break;case"multipoint":n.points.forEach(e);break;case"polyline":n.paths.forEach((t=>t.forEach(e)));break;case"polygon":n.rings.forEach((t=>t.forEach(e)))}return n}_ensureSource(t){const e=this._sources[t];if((0,h.pC)(e))return e;const n=this._createSource(t);return this._sources[t]=n,n}_createSource(t){const e=g.M.toJSON(t),n=this._hasZ,i=new x.Z({geometryType:e,hasZ:n,hasM:!1});return{featureStore:i,queryEngine:new v.q({featureStore:i,fields:[{name:z,type:"esriFieldTypeOID",alias:z}],geometryType:e,hasM:!1,hasZ:n,objectIdField:z,spatialReference:this.spatialReference,scheduler:(0,h.pC)(this.view)&&"3d"===this.view.type?this.view.resourceController.scheduler:null}),type:t}}_remove(t){this._mapSources((e=>this._removeFromSource(e,t)));for(const e of this._pendingAdds)e.graphics.delete(t.uid),0===e.graphics.size&&e.task.abort()}_removeFromSource(t,e){const n=e.uid;t.featureStore.has(n)&&(t.featureStore.removeById(e.uid),(0,S.QL)(e.symbol)&&this._extrudedPolygonSymbolsCount--)}_destroySource(t){t.queryEngine.destroy(),this._sources[t.type]=null}_mapSources(t){const{point:e,polygon:n,polyline:i,multipoint:s}=this._sources,o=[];return(0,h.pC)(e)&&o.push(t(e)),(0,h.pC)(n)&&o.push(t(n)),(0,h.pC)(i)&&o.push(t(i)),(0,h.pC)(s)&&o.push(t(s)),o}};(0,i._)([(0,u.Cb)()],E.prototype,"getGraphicsLayers",void 0),(0,i._)([(0,u.Cb)({constructOnly:!0})],E.prototype,"layerSource",void 0),(0,i._)([(0,u.Cb)({constructOnly:!0})],E.prototype,"spatialReference",void 0),(0,i._)([(0,u.Cb)({constructOnly:!0})],E.prototype,"view",void 0),(0,i._)([(0,u.Cb)({readOnly:!0})],E.prototype,"updating",null),(0,i._)([(0,u.Cb)({readOnly:!0})],E.prototype,"availability",void 0),(0,i._)([(0,u.Cb)()],E.prototype,"_hasZ",null),(0,i._)([(0,u.Cb)()],E.prototype,"_snappingElevationAligner",null),(0,i._)([(0,u.Cb)()],E.prototype,"_snappingElevationFilter",null),(0,i._)([(0,u.Cb)()],E.prototype,"_symbologySnappingFetcher",null),(0,i._)([(0,u.Cb)()],E.prototype,"_extrudedPolygonSymbolsCount",void 0),(0,i._)([(0,u.Cb)()],E.prototype,"_getGroundElevation",null),E=(0,i._)([(0,d.j)("esri.views.interactive.snapping.featureSources.GraphicsSnappingSource")],E);const z="OBJECTID"},52824:(t,e,n)=>{n.d(e,{X:()=>l,g:()=>u});var i=n(92026),s=n(71353),o=n(1700),r=n(97760),a=n(95905),h=n(36700);function c(t){let{x:e,y:n,z:i}=t;return(0,o.uc)((0,s.f)(e,n,i??0))}function l(t,e){switch(t.type){case"edge":return t.draped?new r.k({edgeStart:c(t.start),edgeEnd:c(t.end),targetPoint:c(t.target),objectId:t.objectId,getGroundElevation:e}):new a.L({edgeStart:c(t.start),edgeEnd:c(t.end),targetPoint:c(t.target),objectId:t.objectId,isDraped:!1});case"vertex":return new h.x({targetPoint:c(t.target),objectId:t.objectId,isDraped:!1})}}function u(t){return(0,i.pC)(t)&&"3d"===t.type?(e,n,i)=>t.elevationProvider.getElevation(e,n,i??0,t.spatialReference,"ground"):()=>null}},59877:(t,e,n)=>{n.d(e,{p:()=>c});n(93169);var i=n(16054),s=n(77427),o=n(92026),r=n(66978),a=n(68860),h=n(88152);function c(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=arguments.length>1?arguments[1]:void 0;if(t){const{elevationInfo:t,alignPointsInFeatures:n,spatialReference:i}=e;return new u(t,n,i)}return new l}class l{async alignCandidates(t,e){return t}notifyElevationSourceChange(){}}class u{constructor(t,e,n){this._elevationInfo=t,this._alignPointsInFeatures=e,this.spatialReference=n,this._alignmentsCache=new i.Z(1024),this._cacheVersion=0,this._metersPerVerticalUnit=(0,a._R)(n)}async alignCandidates(t,e){const n=this._elevationInfo;return(0,o.pC)(n)&&"absolute-height"===n.mode&&!n.featureExpressionInfo?(this._alignAbsoluteElevationCandidates(t,n),t):this._alignComputedElevationCandidates(t,e)}notifyElevationSourceChange(){this._alignmentsCache.clear(),this._cacheVersion++}_alignAbsoluteElevationCandidates(t,e){const{offset:n,unit:i}=e;if((0,o.Wi)(n))return;const s=n*((0,h.Z7)(i??"meters")/this._metersPerVerticalUnit);for(const o of t)switch(o.type){case"edge":o.start.z+=s,o.end.z+=s;continue;case"vertex":o.target.z+=s;continue}}async _alignComputedElevationCandidates(t,e){const n=new Map;for(const r of t)(0,s.s1)(n,r.objectId,_).push(r);const[i,o,a]=this._prepareQuery(n),h=await this._alignPointsInFeatures(i,e);if((0,r.k_)(e),a!==this._cacheVersion)return this._alignComputedElevationCandidates(t,e);this._applyCacheAndResponse(i,h,o);const{drapedObjectIds:c,failedObjectIds:l}=h,u=[];for(const s of t){const{objectId:t}=s;c.has(t)&&"edge"===s.type&&(s.draped=!0),l.has(t)||u.push(s)}return u}_prepareQuery(t){const e=[],n=[];for(const[i,s]of t){const t=[];for(const e of s)this._addToQueriesOrCachedResult(i,e.target,t,n),"edge"===e.type&&(this._addToQueriesOrCachedResult(i,e.start,t,n),this._addToQueriesOrCachedResult(i,e.end,t,n));0!==t.length&&e.push({objectId:i,points:t})}return[e,n,this._cacheVersion]}_addToQueriesOrCachedResult(t,e,n,i){const s=p(t,e),r=this._alignmentsCache.get(s);(0,o.pC)(r)?i.push(new d(e,r)):n.push(e)}_applyCacheAndResponse(t,e,n){let{elevations:i,drapedObjectIds:s,failedObjectIds:o}=e;for(const h of n)h.apply();let r=0;const a=this._alignmentsCache;for(const{objectId:h,points:c}of t){if(o.has(h)){r+=c.length;continue}const t=!s.has(h);for(const e of c){const n=p(h,e),s=i[r++];e.z=s,t&&a.put(n,s,1)}}}}class d{constructor(t,e){this.point=t,this.z=e}apply(){this.point.z=this.z}}function p(t,e){let{x:n,y:i,z:s}=e;return`${t}-${n}-${i}-${s??0}}`}function _(){return[]}},53580:(t,e,n)=>{n.d(e,{c:()=>r});n(93169);class i{filter(t,e){return e}notifyElevationSourceChange(){}}class s{filter(t,e){const{point:n,distance:i}=t,{z:s}=n;if(null==s)return e;if(0===e.length)return e;const r=function(t){return"number"==typeof t?{x:t,y:t,z:t}:t}(i),a=this._updateCandidatesTo3D(e,n,r).filter(o);return a.sort(c),a}_updateCandidatesTo3D(t,e,n){for(const i of t)switch(i.type){case"edge":a(i,e,n);continue;case"vertex":h(i,e,n);continue}return t}}function o(t){return t.distance<=1}function r(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return t?new s:new i}function a(t,e,n){let{x:i,y:s,z:o}=n;const{start:r,end:a,target:h}=t;t.draped||function(t,e,n,i){const s=i.x-n.x,o=i.y-n.y,r=i.z-n.z,a=s*s+o*o+r*r,h=(e.x-n.x)*s+(e.y-n.y)*o+r*(e.z-n.z),c=Math.min(1,Math.max(0,h/a)),l=n.x+s*c,u=n.y+o*c,d=n.z+r*c;t.x=l,t.y=u,t.z=d}(h,e,r,a);const c=(e.x-h.x)/i,l=(e.y-h.y)/s,u=(e.z-h.z)/o;t.distance=Math.sqrt(c*c+l*l+u*u)}function h(t,e,n){let{x:i,y:s,z:o}=n;const{target:r}=t,a=(e.x-r.x)/i,h=(e.y-r.y)/s,c=(e.z-r.z)/o,l=Math.sqrt(a*a+h*h+c*c);t.distance=l}function c(t,e){return t.distance-e.distance}},48817:(t,e,n)=>{n.d(e,{k:()=>a});n(93169);var i=n(84652),s=n(16054),o=n(66978),r=n(643);function a(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=arguments.length>1?arguments[1]:void 0;return t?new c(e):new h}class h{async fetch(){return[]}notifySymbologyChange(){}}class c{constructor(t){this._getSymbologyCandidates=t,this._candidatesCache=new s.Z(1024),this._cacheVersion=0}async fetch(t,e){if(0===t.length)return[];const n=[],s=[],r=this._candidatesCache;for(const o of t){const t=l(o),e=r.get(t);if(e)for(const n of e)s.push((0,i.d9)(n));else n.push(o),r.put(t,[],1)}if(0===n.length)return s;const a=this._cacheVersion,{candidates:h,sourceCandidateIndices:c}=await this._getSymbologyCandidates(n,e);if((0,o.k_)(e),a!==this._cacheVersion)return this.fetch(t,e);const u=[],{length:d}=h;for(let o=0;o<d;++o){const t=h[o],e=l(n[c[o]]),s=r.get(e);s.push(t),r.put(e,s,s.length),u.push((0,i.d9)(t))}return s.concat(u)}notifySymbologyChange(){this._candidatesCache.clear(),this._cacheVersion++}}function l(t){switch(t.type){case"vertex":{const{objectId:e,target:n}=t,i=`${e}-vertex-${n.x}-${n.y}-${n.z??0}`;return(0,r.hP)(i).toString()}case"edge":{const{objectId:e,start:n,end:i}=t,s=`${e}-edge-${n.x}-${n.y}-${n.z??0}-to-${i.x}-${i.y}-${i.z??0}`;return(0,r.hP)(s).toString()}default:return""}}},61309:(t,e,n)=>{n.d(e,{n:()=>o});var i=n(11186),s=n(55054);class o extends s.r{constructor(t,e,n){super(e,n),this.point=t}equals(t){return t instanceof o&&(0,i.k)(this.point,t.point)}}}}]);
//# sourceMappingURL=3518.6597733b.chunk.js.map