(this.webpackJsonpimaps=this.webpackJsonpimaps||[]).push([[104,55,180,232,245,301],{1096:function(e,t,r){"use strict";r.d(t,"a",(function(){return xt}));var i=r(81),a=r(155),s=r(966),o=r(613),n=r(171),l=r(106),c=r(88),d=r(168),u=r(446),p=r(80),b=r(85),h=r(291),y=r(261),m=r(91),g=r(98),O=r(110),j=r(83),v=(r(79),r(84)),f=r(92),w=r(82),k=r(90),S=r(745),_=r(303),I=r(94),T=r(181),L=r(219),M=r(101),x=r(99);const A=p.a.getLogger("esri.networks.Network");let U=class extends(Object(h.a)(d.a)){constructor(e){super(e),this.id=null,this.title=null,this.layerUrl=null,this.dataElement=null,this.fullExtent=null,this.spatialReference=null,this.type=null}initialize(){this.when().catch((e=>{var t,r;Object(m.m)(e)||A.error("#load()",`Failed to load layer (title: '${null!=(t=this.title)?t:"no title"}', id: '${null!=(r=this.id)?r:"no id"}')`,{error:e})}))}get datasetName(){var e;return null==(e=this.dataElement)?void 0:e.name}get owner(){var e;return null==(e=this.dataElement)?void 0:e.userIdentity}get schemaGeneration(){var e;return null==(e=this.dataElement)?void 0:e.schemaGeneration}get parsedUrl(){const e=this.layerUrl;return e?Object(g.K)(e):null}get featureServiceUrl(){const e=this.parsedUrl&&Object(L.f)(this.parsedUrl.path);return Object(b.k)(e)?e.url.path:null}get networkServiceUrl(){return this.featureServiceUrl?this.featureServiceUrl.replace(/\/FeatureServer/i,"/UtilityNetworkServer"):null}get layerId(){const e=this.parsedUrl&&Object(L.f)(this.parsedUrl.path);return Object(b.k)(e)?e.sublayer:null}async load(e){return this.addResolvingPromise(this._fetchDataElement(this.featureServiceUrl,this.layerId.toString(),e)),this.addResolvingPromise(this._fetchLayerMetaData(this.layerUrl,e)),this}getLayerIdBySourceId(e){if(this.dataElement){const t=this.dataElement.domainNetworks;for(const r of t){for(const t of r.edgeSources?r.edgeSources:[])if(t.sourceId===e)return t.layerId;for(const t of r.junctionSources?r.junctionSources:[])if(t.sourceId===e)return t.layerId}return null}return null}async _fetchLayerMetaData(e,t){const r=await Object(M.default)(e,{responseType:"json",query:{f:"json"},...t});this.read(r.data,{origin:"service"})}async _fetchDataElement(e,t,r){if(this.dataElement)return;const i=await Object(M.default)(`${e}/queryDataElements`,{responseType:"json",query:{layers:JSON.stringify([t]),f:"json"},...r}).then((e=>{var t;return null==(t=e.data.layerDataElements)?void 0:t[0]}));i&&this.read(i,{origin:"service"})}};Object(i.a)([Object(j.b)({type:String,nonNullable:!0,json:{origins:{"web-map":{read:!0,write:{isRequired:!0}}},read:!1}})],U.prototype,"id",void 0),Object(i.a)([Object(j.b)({type:String,nonNullable:!0,json:{origins:{"web-map":{read:!0,write:{isRequired:!0}}},read:!1}})],U.prototype,"title",void 0),Object(i.a)([Object(j.b)({type:String,nonNullable:!0,json:{origins:{"web-map":{read:{source:"url"},write:{target:"url",isRequired:!0}}},read:!1}})],U.prototype,"layerUrl",void 0),Object(i.a)([Object(j.b)({type:Object,json:{origins:{service:{read:!0}},read:!1}})],U.prototype,"dataElement",void 0),Object(i.a)([Object(j.b)({type:x.a,json:{origins:{service:{read:{source:"extent"}}},read:!1}})],U.prototype,"fullExtent",void 0),Object(i.a)([Object(j.b)({type:I.a,json:{origins:{service:{read:{source:"extent.spatialReference"}}},read:!1}})],U.prototype,"spatialReference",void 0),Object(i.a)([Object(j.b)({type:["utility","trace"],readOnly:!0,json:{read:!1,write:!1}})],U.prototype,"type",void 0),Object(i.a)([Object(j.b)({readOnly:!0})],U.prototype,"datasetName",null),Object(i.a)([Object(j.b)({readOnly:!0})],U.prototype,"owner",null),Object(i.a)([Object(j.b)({readOnly:!0})],U.prototype,"schemaGeneration",null),Object(i.a)([Object(j.b)({readOnly:!0})],U.prototype,"parsedUrl",null),Object(i.a)([Object(j.b)({readOnly:!0})],U.prototype,"featureServiceUrl",null),Object(i.a)([Object(j.b)({readOnly:!0})],U.prototype,"networkServiceUrl",null),Object(i.a)([Object(j.b)({readOnly:!0})],U.prototype,"layerId",null),U=Object(i.a)([Object(w.a)("esri.networks.Network")],U);var N=U,B=r(86);let E=class extends B.a{constructor(e){super(e),this.conditionBarriers=[],this.outputConditions=[],this.functions=[],this.functionBarriers=[],this.traversabilityScope=null,this.shortestPathNetworkAttributeName=null,this.includeBarriers=null,this.validateConsistency=null,this.ignoreBarriersAtStartingPoints=null}};Object(i.a)([Object(j.b)({type:[Object],json:{write:!0}})],E.prototype,"conditionBarriers",void 0),Object(i.a)([Object(j.b)({type:[Object],json:{write:!0}})],E.prototype,"outputConditions",void 0),Object(i.a)([Object(j.b)({type:[Object],json:{write:!0}})],E.prototype,"functions",void 0),Object(i.a)([Object(j.b)({type:[Object],json:{write:!0}})],E.prototype,"functionBarriers",void 0),Object(i.a)([Object(j.b)({type:["junctions","edges","junctionsAndEdges"],json:{write:!0}})],E.prototype,"traversabilityScope",void 0),Object(i.a)([Object(j.b)({type:String,json:{write:!0}})],E.prototype,"shortestPathNetworkAttributeName",void 0),Object(i.a)([Object(j.b)({type:Boolean,json:{write:!0}})],E.prototype,"includeBarriers",void 0),Object(i.a)([Object(j.b)({type:Boolean,json:{write:!0}})],E.prototype,"validateConsistency",void 0),Object(i.a)([Object(j.b)({type:Boolean,json:{write:!0}})],E.prototype,"ignoreBarriersAtStartingPoints",void 0),E=Object(i.a)([Object(w.a)("esri.networks.support.TraceConfiguration")],E);var C=E,R=r(89);const F=new R.a({connected:"connected",upstream:"upstream",downstream:"downstream",shortestPath:"shortest-path",subnetwork:"subnetwork","subnetwork controllers":"subnetwork-controllers",loops:"loops",isolation:"isolation"});let G=class extends C{constructor(e){super(e),this.filterBarriers=[],this.domainNetworkName=null,this.filterBitsetNetworkAttributeName=null,this.filterFunctionBarriers=[],this.filterScope=null,this.includeContainers=null,this.includeContent=null,this.includeIsolated=null,this.includeStructures=null,this.includeUpToFirstSpatialContainer=null,this.nearestNeighbor=null,this.outputFilterCategories=[],this.outputFilters=[],this.propagators=[],this.subnetworkName=null,this.targetTierName=null,this.tierName=null,this.validateLocatability=null}};Object(i.a)([Object(j.b)({type:[Object],json:{write:!0}})],G.prototype,"filterBarriers",void 0),Object(i.a)([Object(j.b)({type:String,json:{write:!0}})],G.prototype,"domainNetworkName",void 0),Object(i.a)([Object(j.b)({type:String,json:{write:!0}})],G.prototype,"filterBitsetNetworkAttributeName",void 0),Object(i.a)([Object(j.b)({type:[Object],json:{write:!0}})],G.prototype,"filterFunctionBarriers",void 0),Object(i.a)([Object(j.b)({type:["junctions","edges","junctionsAndEdges"],json:{write:!0}})],G.prototype,"filterScope",void 0),Object(i.a)([Object(j.b)({type:Boolean,json:{write:!0}})],G.prototype,"includeContainers",void 0),Object(i.a)([Object(j.b)({type:Boolean,json:{write:!0}})],G.prototype,"includeContent",void 0),Object(i.a)([Object(j.b)({type:Boolean,json:{write:!0}})],G.prototype,"includeIsolated",void 0),Object(i.a)([Object(j.b)({type:Boolean,json:{write:!0}})],G.prototype,"includeStructures",void 0),Object(i.a)([Object(j.b)({type:Boolean,json:{write:!0}})],G.prototype,"includeUpToFirstSpatialContainer",void 0),Object(i.a)([Object(j.b)({type:Object,json:{write:!0}})],G.prototype,"nearestNeighbor",void 0),Object(i.a)([Object(j.b)({type:[Object],json:{write:!0}})],G.prototype,"outputFilterCategories",void 0),Object(i.a)([Object(j.b)({type:[Object],json:{write:!0}})],G.prototype,"outputFilters",void 0),Object(i.a)([Object(j.b)({type:[Object],json:{write:!0}})],G.prototype,"propagators",void 0),Object(i.a)([Object(j.b)({type:String,json:{write:!0}})],G.prototype,"subnetworkName",void 0),Object(i.a)([Object(j.b)({type:String,json:{write:!0}})],G.prototype,"targetTierName",void 0),Object(i.a)([Object(j.b)({type:String,json:{write:!0}})],G.prototype,"tierName",void 0),Object(i.a)([Object(j.b)({type:Boolean,json:{write:!0}})],G.prototype,"validateLocatability",void 0),G=Object(i.a)([Object(w.a)("esri.networks.support.UNTraceConfiguration")],G);var P=G;let D=class extends h.b{constructor(e){super(e),this.globalId=null,this.title=null,this.traceConfiguration=null,this.creationDate=null,this.creator=null,this.description=null,this.minStartingPoints=null,this.resultTypes=[],this.tags=[],this.traceType=null}readTraceConfiguration(e,t){return void 0!==e.tierName?P.fromJSON(e):C.fromJSON(e)}};Object(i.a)([Object(j.b)({type:String,nonNullable:!0,json:{origins:{"web-map":{read:{source:"id"},write:{target:"id",isRequired:!0}},service:{read:{source:"globalId"}}},read:!1}})],D.prototype,"globalId",void 0),Object(i.a)([Object(j.b)({type:String,nonNullable:!0,json:{origins:{"web-map":{read:{source:"title"},write:{target:"title",isRequired:!0}},service:{read:{source:"name"}}},read:!1}})],D.prototype,"title",void 0),Object(i.a)([Object(j.b)({type:C,json:{origins:{service:{read:!0}},read:!1}})],D.prototype,"traceConfiguration",void 0),Object(i.a)([Object(f.a)("service","traceConfiguration")],D.prototype,"readTraceConfiguration",null),Object(i.a)([Object(j.b)({type:Date,json:{origins:{service:{read:!0}},read:!1}})],D.prototype,"creationDate",void 0),Object(i.a)([Object(j.b)({type:String,json:{origins:{service:{read:!0}},read:!1}})],D.prototype,"creator",void 0),Object(i.a)([Object(j.b)({type:String,json:{origins:{service:{read:!0}},read:!1}})],D.prototype,"description",void 0),Object(i.a)([Object(j.b)({type:["none","one","many"],json:{origins:{service:{read:{source:"minNumStartingPoints"}}},read:!1}})],D.prototype,"minStartingPoints",void 0),Object(i.a)([Object(j.b)({type:[Object],json:{origins:{service:{read:!0}},read:!1}})],D.prototype,"resultTypes",void 0),Object(i.a)([Object(j.b)({type:[String],json:{origins:{service:{read:!0}},read:!1}})],D.prototype,"tags",void 0),Object(i.a)([Object(j.b)({type:F.apiValues,json:{type:F.jsonValues,origins:{service:{read:F.read}},read:!1}})],D.prototype,"traceType",void 0),D=Object(i.a)([Object(w.a)("esri.networks.support.NamedTraceConfiguration")],D);var V=D;let W=class extends B.a{constructor(e){super(e),this.id=null,this.name=null}};Object(i.a)([Object(j.b)({type:Number,json:{read:{source:"terminalId"},write:{target:"terminalId"}}})],W.prototype,"id",void 0),Object(i.a)([Object(j.b)({type:String,json:{read:{source:"terminalName"},write:{target:"terminalName"}}})],W.prototype,"name",void 0),Object(i.a)([Object(j.b)({type:Boolean,json:{write:!0}})],W.prototype,"isUpstreamTerminal",void 0),W=Object(i.a)([Object(w.a)("esri.networks.support.Terminal")],W);var q=W;const J=new R.a({esriUNTMBidirectional:"bidirectional",esriUNTMDirectional:"directional"});let $=class extends B.a{constructor(e){super(e),this.defaultConfiguration=null,this.id=null,this.name=null,this.terminals=[],this.traversabilityModel=null}};Object(i.a)([Object(j.b)({type:String,json:{write:!0}})],$.prototype,"defaultConfiguration",void 0),Object(i.a)([Object(j.b)({type:Number,json:{read:{source:"terminalConfigurationId"},write:{target:"terminalConfigurationId"}}})],$.prototype,"id",void 0),Object(i.a)([Object(j.b)({type:String,json:{read:{source:"terminalConfigurationName"},write:{target:"terminalConfigurationName"}}})],$.prototype,"name",void 0),Object(i.a)([Object(j.b)({type:[q],json:{write:!0}})],$.prototype,"terminals",void 0),Object(i.a)([Object(j.b)({type:J.apiValues,json:{type:J.jsonValues,read:J.read,write:J.write}})],$.prototype,"traversabilityModel",void 0),$=Object(i.a)([Object(w.a)("esri.networks.support.TerminalConfiguration")],$);var H=$;let K=class extends N{constructor(e){super(e),this.sharedNamedTraceConfigurations=[],this.type="utility"}get serviceTerritoryFeatureLayerId(){var e;return null==(e=this.dataElement)?void 0:e.serviceTerritoryFeatureLayerId}get terminalConfigurations(){var e;return(null==(e=this.dataElement)?void 0:e.terminalConfigurations.map((e=>H.fromJSON(e))))||[]}get domainNetworkNames(){var e;return(null==(e=this.dataElement)?void 0:e.domainNetworks.map((e=>e.domainNetworkName)))||[]}async load(e){return this.addResolvingPromise(super.load(e)),this.addResolvingPromise(this._loadNamedTraceConfigurationsFromNetwork(e)),this}getTerminalConfiguration(e){let t=null,r=null;const i=e.layer;let a=null;if("feature"!==(null==i?void 0:i.type))return null;if(a=i.layerId,null===a)return null;const s=e.attributes;if(null==s)return null;for(const u of Object.keys(s))"ASSETGROUP"===u.toUpperCase()&&(t=e.getAttribute(u)),"ASSETTYPE"===u.toUpperCase()&&(r=e.getAttribute(u));if(!this.dataElement)return null;let o=null;const n=this.dataElement.domainNetworks;for(const u of n){var l;const e=null==(l=u.junctionSources)?void 0:l.find((e=>e.layerId===a));if(e){var c;const i=null==(c=e.assetGroups)?void 0:c.find((e=>e.assetGroupCode===t));if(i){var d;const e=null==(d=i.assetTypes)?void 0:d.find((e=>e.assetTypeCode===r));if(e){o=e.terminalConfigurationId;break}}}}if(null!=o){const e=this.dataElement.terminalConfigurations,t=null==e?void 0:e.find((e=>e.terminalConfigurationId===o));return t?H.fromJSON(t):null}return null}getTierNames(e){var t;const r=null==(t=this.dataElement)?void 0:t.domainNetworks.find((t=>t.domainNetworkName===e));return(null==r?void 0:r.tiers.map((e=>e.name)))||[]}async _loadNamedTraceConfigurationsFromNetwork(e){var t;if(0===(null==(t=this.sharedNamedTraceConfigurations)?void 0:t.length))return;const r=this.sharedNamedTraceConfigurations.map((e=>e.globalId)),i=await this._fetchTraceConfigData(this.networkServiceUrl,r,e);for(const a of this.sharedNamedTraceConfigurations){const e=null==i?void 0:i.find((e=>e.globalId===a.globalId));e&&a.read(e,{origin:"service"})}}_fetchTraceConfigData(e,t,r){return Object(M.default)(`${e}/traceConfigurations/query`,{responseType:"json",query:{globalIds:JSON.stringify(t),f:"json"},...r}).then((e=>e.data.traceConfigurations))}};Object(i.a)([Object(j.b)({type:[V],json:{origins:{"web-map":{read:{source:"traceConfigurations"},write:{target:"traceConfigurations"}},service:{read:{source:"traceConfigurations"}}},read:!1}})],K.prototype,"sharedNamedTraceConfigurations",void 0),Object(i.a)([Object(j.b)({type:["utility"],readOnly:!0,json:{read:!1,write:!1}})],K.prototype,"type",void 0),Object(i.a)([Object(j.b)({readOnly:!0})],K.prototype,"serviceTerritoryFeatureLayerId",null),Object(i.a)([Object(j.b)({readOnly:!0})],K.prototype,"terminalConfigurations",null),Object(i.a)([Object(j.b)({readOnly:!0})],K.prototype,"domainNetworkNames",null),K=Object(i.a)([Object(w.a)("esri.networks.UtilityNetwork")],K);var z=K,Y=r(180),Q=r(434),Z=r(712),X=r(559),ee=r(654);let te=class extends B.a{constructor(e){super(e),this.facilityIdField=null,this.layerId=null,this.nameField=null,this.siteIdField=null,this.sublayerId=null}};Object(i.a)([Object(j.b)({type:String,json:{write:!0}})],te.prototype,"facilityIdField",void 0),Object(i.a)([Object(j.b)({type:String,json:{write:!0}})],te.prototype,"layerId",void 0),Object(i.a)([Object(j.b)({type:String,json:{write:!0}})],te.prototype,"nameField",void 0),Object(i.a)([Object(j.b)({type:String,json:{write:!0}})],te.prototype,"siteIdField",void 0),Object(i.a)([Object(j.b)({type:Number,json:{read:{source:"subLayerId"},write:{target:"subLayerId"},origins:{"web-scene":{read:!1,write:!1}}}})],te.prototype,"sublayerId",void 0),te=Object(i.a)([Object(w.a)("esri.layers.support.FacilityLayerInfo")],te);var re=te;let ie=class extends B.a{constructor(e){super(e),this.facilityIdField=null,this.layerId=null,this.levelIdField=null,this.levelNumberField=null,this.longNameField=null,this.shortNameField=null,this.sublayerId=null,this.verticalOrderField=null}};Object(i.a)([Object(j.b)({type:String,json:{write:!0}})],ie.prototype,"facilityIdField",void 0),Object(i.a)([Object(j.b)({type:String,json:{write:!0}})],ie.prototype,"layerId",void 0),Object(i.a)([Object(j.b)({type:String,json:{write:!0}})],ie.prototype,"levelIdField",void 0),Object(i.a)([Object(j.b)({type:String,json:{write:!0}})],ie.prototype,"levelNumberField",void 0),Object(i.a)([Object(j.b)({type:String,json:{write:!0}})],ie.prototype,"longNameField",void 0),Object(i.a)([Object(j.b)({type:String,json:{write:!0}})],ie.prototype,"shortNameField",void 0),Object(i.a)([Object(j.b)({type:Number,json:{read:{source:"subLayerId"},write:{target:"subLayerId"},origins:{"web-scene":{read:!1,write:!1}}}})],ie.prototype,"sublayerId",void 0),Object(i.a)([Object(j.b)({type:String,json:{write:!0}})],ie.prototype,"verticalOrderField",void 0),ie=Object(i.a)([Object(w.a)("esri.layers.support.LevelLayerInfo")],ie);var ae=ie;let se=class extends B.a{constructor(e){super(e),this.layerId=null,this.nameField=null,this.siteIdField=null,this.sublayerId=null}};Object(i.a)([Object(j.b)({type:String,json:{write:!0}})],se.prototype,"layerId",void 0),Object(i.a)([Object(j.b)({type:String,json:{write:!0}})],se.prototype,"nameField",void 0),Object(i.a)([Object(j.b)({type:String,json:{write:!0}})],se.prototype,"siteIdField",void 0),Object(i.a)([Object(j.b)({type:Number,json:{read:{source:"subLayerId"},write:{target:"subLayerId"},origins:{"web-scene":{read:!1,write:!1}}}})],se.prototype,"sublayerId",void 0),se=Object(i.a)([Object(w.a)("esri.layers.support.SiteLayerInfo")],se);var oe=se;let ne=class extends B.a{constructor(e){super(e),this.levelLayer=null,this.facilityLayer=null,this.siteLayer=null}};Object(i.a)([Object(j.b)({type:ae,json:{write:!0}})],ne.prototype,"levelLayer",void 0),Object(i.a)([Object(j.b)({type:re,json:{write:!0}})],ne.prototype,"facilityLayer",void 0),Object(i.a)([Object(j.b)({type:oe,json:{write:!0}})],ne.prototype,"siteLayer",void 0),ne=Object(i.a)([Object(w.a)("esri.support.MapFloorInfo")],ne);var le,ce=ne,de=r(87);let ue=le=class extends B.a{constructor(e){super(e),this.activeRange=null,this.currentRangeExtent=null,this.fullRangeExtent=null}clone(){return new le(Object(de.a)({activeRange:this.activeRange,currentRangeExtent:this.currentRangeExtent,fullRangeExtent:this.fullRangeExtent}))}};Object(i.a)([Object(j.b)({type:String,nonNullable:!0,json:{read:{source:"activeRangeName"},write:{target:"activeRangeName",isRequired:!0}}})],ue.prototype,"activeRange",void 0),Object(i.a)([Object(j.b)({type:[Number],json:{write:!0}})],ue.prototype,"currentRangeExtent",void 0),Object(i.a)([Object(j.b)({type:[Number],json:{write:!0}})],ue.prototype,"fullRangeExtent",void 0),ue=le=Object(i.a)([Object(w.a)("esri.webdoc.RangeInfo")],ue);var pe,be=ue;let he=pe=class extends B.a{constructor(e){super(e),this.enabled=!1,this.longNames=!1,this.minimized=!1,this.pinnedLevels=!1,this.site=null,this.facility=null,this.level=null}clone(){return new pe(Object(de.a)({enabled:this.enabled,longNames:this.longNames,minimized:this.minimized,pinnedLevels:this.pinnedLevels,site:this.site,facility:this.facility,level:this.level}))}};Object(i.a)([Object(j.b)({type:Boolean,json:{read:{source:"enabled"},write:{target:"enabled"}}})],he.prototype,"enabled",void 0),Object(i.a)([Object(j.b)({type:Boolean,json:{read:{source:"longNames"},write:{target:"longNames"}}})],he.prototype,"longNames",void 0),Object(i.a)([Object(j.b)({type:Boolean,json:{read:{source:"minimized"},write:{target:"minimized"}}})],he.prototype,"minimized",void 0),Object(i.a)([Object(j.b)({type:Boolean,json:{read:{source:"pinnedLevels"},write:{target:"pinnedLevels"}}})],he.prototype,"pinnedLevels",void 0),Object(i.a)([Object(j.b)({type:String,json:{read:{source:"site"},write:{target:"site"}}})],he.prototype,"site",void 0),Object(i.a)([Object(j.b)({type:String,json:{read:{source:"facility"},write:{target:"facility"}}})],he.prototype,"facility",void 0),Object(i.a)([Object(j.b)({type:String,json:{read:{source:"level"},write:{target:"level"}}})],he.prototype,"level",void 0),he=pe=Object(i.a)([Object(w.a)("esri.webdoc.widgets.FloorFilter")],he);var ye,me=he;const ge=new R.a({slider:"slider",picker:"picker"});let Oe=ye=class extends B.a{constructor(e){super(e),this.interactionMode=null,this.numStops=null,this.stopInterval=null}clone(){return new ye({interactionMode:this.interactionMode,numStops:this.numStops,stopInterval:this.stopInterval})}};Object(i.a)([Object(j.b)({type:ge.apiValues,nonNullable:!0,json:{type:ge.jsonValues,default:null,read:{reader:ge.read},write:{isRequired:!0,writer:ge.write}}})],Oe.prototype,"interactionMode",void 0),Object(i.a)([Object(j.b)({type:Number,json:{read:{source:"numberOfStops"},write:{target:"numberOfStops",overridePolicy(){const e=null!=this.stopInterval;return{enabled:!e,isRequired:!e}}}}})],Oe.prototype,"numStops",void 0),Object(i.a)([Object(j.b)({type:Number,json:{write:{overridePolicy(){return{isRequired:null==this.numStops}}}}})],Oe.prototype,"stopInterval",void 0),Oe=ye=Object(i.a)([Object(w.a)("esri.webdoc.widgets.Range")],Oe);var je,ve=Oe,fe=r(121),we=r(237),ke=r(112);let Se=je=class extends B.a{constructor(e){super(e),this.currentTimeExtent=null,this.fullTimeExtent=null,this.loop=!1,this.numStops=null,this.numThumbs=null,this.stopDelay=null,this.stopInterval=null,this.stops=null}readCurrentTimeExtent(e){if(!e)return;const t=null!=e[0]?new Date(e[0]):null,r=null!=e[1]?new Date(e[1]):null;return new fe.a({start:t,end:r})}writeCurrentTimeExtent(e,t,r){e&&Object(ke.c)(r,[Object(b.k)(e.start)?e.start.getTime():null,Object(b.k)(e.end)?e.end.getTime():null],t)}readFullTimeExtent(e,t){const r=t.properties;if(!r)return;const i=null!=r.endTime?new Date(r.endTime):null,a=null!=r.startTime?new Date(r.startTime):null;return new fe.a({start:a,end:i})}writeFullTimeExtent(e,t){if(!e)return;const r=t.properties=t.properties||{},i=e.end,a=e.start;i&&(r.endTime=Object(b.k)(i)?i.getTime():null),a&&(r.startTime=Object(b.k)(a)?a.getTime():null)}readStopInterval(e,t,r){return e?we.a.fromJSON({value:e.interval,unit:e.units},r):null}writeStopInterval(e,t,r,i){if(!e)return;const a=e.toJSON(i);Object(ke.c)(r,{interval:a.value,units:a.unit},t)}readStops(e){return e&&e.length?e.map((e=>new Date(e))):null}writeStops(e,t,r){e&&e.length&&Object(ke.c)(r,e.map((e=>e.getTime())),t)}clone(){return new je(Object(de.a)({currentTimeExtent:this.currentTimeExtent,fullTimeExtent:this.fullTimeExtent,loop:this.loop,numStops:this.numStops,numThumbs:this.numThumbs,stopDelay:this.stopDelay,stopInterval:this.stopInterval,stops:this.stops}))}};Object(i.a)([Object(j.b)({type:fe.a,json:{read:{source:"properties.currentTimeExtent"},write:{target:"properties.currentTimeExtent"}}})],Se.prototype,"currentTimeExtent",void 0),Object(i.a)([Object(f.a)("currentTimeExtent")],Se.prototype,"readCurrentTimeExtent",null),Object(i.a)([Object(k.a)("currentTimeExtent")],Se.prototype,"writeCurrentTimeExtent",null),Object(i.a)([Object(j.b)({type:fe.a,json:{read:{source:["properties.endTime","properties.startTime"]},write:{target:{"properties.endTime":{type:Number},"properties.startTime":{type:Number}}}}})],Se.prototype,"fullTimeExtent",void 0),Object(i.a)([Object(f.a)("fullTimeExtent")],Se.prototype,"readFullTimeExtent",null),Object(i.a)([Object(k.a)("fullTimeExtent")],Se.prototype,"writeFullTimeExtent",null),Object(i.a)([Object(j.b)({type:Boolean,nonNullable:!0,json:{default:!1,read:{source:"properties.loop"},write:{target:"properties.loop"}}})],Se.prototype,"loop",void 0),Object(i.a)([Object(j.b)({type:Number,json:{read:{source:"properties.numberOfStops"},write:{target:"properties.numberOfStops",overridePolicy(){var e;const t=!!this.stopInterval,r=!(null==(e=this.stops)||!e.length),i=!(t||r);return{enabled:i,isRequired:i}}}}})],Se.prototype,"numStops",void 0),Object(i.a)([Object(j.b)({type:[1,2],nonNullable:!0,json:{read:{source:"properties.thumbCount"},write:{target:"properties.thumbCount",isRequired:!0}}})],Se.prototype,"numThumbs",void 0),Object(i.a)([Object(j.b)({type:Number,nonNullable:!0,json:{read:{source:"properties.thumbMovingRate"},write:{target:"properties.thumbMovingRate",isRequired:!0}}})],Se.prototype,"stopDelay",void 0),Object(i.a)([Object(j.b)({type:we.a,json:{read:{source:"properties.timeStopInterval"},write:{target:"properties.timeStopInterval",overridePolicy(){var e;const t=null!=this.numStops,r=!(null==(e=this.stops)||!e.length);return{enabled:!r,isRequired:!(t||r)}}}}})],Se.prototype,"stopInterval",void 0),Object(i.a)([Object(f.a)("stopInterval")],Se.prototype,"readStopInterval",null),Object(i.a)([Object(k.a)("stopInterval")],Se.prototype,"writeStopInterval",null),Object(i.a)([Object(j.b)({type:[Date],json:{read:{source:"properties.stops"},write:{target:"properties.stops",overridePolicy(){return{isRequired:null==this.numStops&&!this.stopInterval}}}}})],Se.prototype,"stops",void 0),Object(i.a)([Object(f.a)("stops")],Se.prototype,"readStops",null),Object(i.a)([Object(k.a)("stops")],Se.prototype,"writeStops",null),Se=je=Object(i.a)([Object(w.a)("esri.webdoc.widgets.TimeSlider")],Se);var _e,Ie=Se;let Te=_e=class extends B.a{constructor(e){super(e),this.range=null,this.timeSlider=null,this.floorFilter=null}clone(){return new _e(Object(de.a)({range:this.range,timeSlider:this.timeSlider,floorFilter:this.floorFilter}))}};Object(i.a)([Object(j.b)({type:ve,json:{write:!0}})],Te.prototype,"range",void 0),Object(i.a)([Object(j.b)({type:Ie,json:{write:!0}})],Te.prototype,"timeSlider",void 0),Object(i.a)([Object(j.b)({type:me,json:{write:!0}})],Te.prototype,"floorFilter",void 0),Te=_e=Object(i.a)([Object(w.a)("esri.webdoc.Widgets")],Te);var Le=Te;const Me={width:600,height:400},xe=1.5;var Ae=r(558);function Ue(e){return{enabled:!(null==e||!e.length)}}var Ne,Be=r(93),Ee=r(267);let Ce=Ne=class extends B.a{constructor(e){super(e),this.exactMatch=!1,this.name=null,this.type=null}clone(){return new Ne({exactMatch:this.exactMatch,type:this.type,name:this.name})}};Object(i.a)([Object(j.b)({type:Boolean,json:{write:!0}})],Ce.prototype,"exactMatch",void 0),Object(i.a)([Object(j.b)({type:String,json:{write:!0}})],Ce.prototype,"name",void 0),Object(i.a)([Object(Be.a)(Ee.a)],Ce.prototype,"type",void 0),Ce=Ne=Object(i.a)([Object(w.a)("esri.webdoc.applicationProperties.SearchLayerField")],Ce);var Re,Fe=Ce;let Ge=Re=class extends B.a{constructor(e){super(e),this.field=null,this.id=null,this.subLayer=null}clone(){return new Re(Object(de.a)({field:this.field,id:this.id,subLayer:this.subLayer}))}};Object(i.a)([Object(j.b)({type:Fe,json:{write:{isRequired:!0}}})],Ge.prototype,"field",void 0),Object(i.a)([Object(j.b)({type:String,json:{write:{isRequired:!0}}})],Ge.prototype,"id",void 0),Object(i.a)([Object(j.b)({type:v.a,json:{write:!0}})],Ge.prototype,"subLayer",void 0),Ge=Re=Object(i.a)([Object(w.a)("esri.webdoc.applicationProperties.SearchLayer")],Ge);var Pe,De=Ge;let Ve=Pe=class extends B.a{constructor(e){super(e),this.exactMatch=!1,this.name=null,this.type=null}clone(){return new Pe({exactMatch:this.exactMatch,type:this.type,name:this.name})}};Object(i.a)([Object(j.b)({type:Boolean,json:{write:!0}})],Ve.prototype,"exactMatch",void 0),Object(i.a)([Object(j.b)({type:String,json:{write:!0}})],Ve.prototype,"name",void 0),Object(i.a)([Object(Be.a)(Ee.a)],Ve.prototype,"type",void 0),Ve=Pe=Object(i.a)([Object(w.a)("esri.webdoc.applicationProperties.SearchTableField")],Ve);var We,qe=Ve;let Je=We=class extends B.a{constructor(e){super(e),this.field=null,this.id=null}clone(){return new We(Object(de.a)({field:this.field,id:this.id}))}};Object(i.a)([Object(j.b)({type:qe,json:{write:{isRequired:!0}}})],Je.prototype,"field",void 0),Object(i.a)([Object(j.b)({type:String,json:{write:{isRequired:!0}}})],Je.prototype,"id",void 0),Je=We=Object(i.a)([Object(w.a)("esri.webdoc.applicationProperties.SearchTable")],Je);var $e,He=Je;const Ke=l.a.ofType(De),ze=l.a.ofType(He);let Ye=$e=class extends B.a{constructor(e){super(e),this.addressSearchEnabled=!0,this.enabled=!0,this.hintText=null,this.layers=new Ke,this.tables=new ze}readAddressSearchEnabled(e){return!e}writeAddressSearchEnabled(e,t,r){t[r]=!e}clone(){return new $e(Object(de.a)({addressSearchEnabled:this.addressSearchEnabled,enabled:this.enabled,hintText:this.hintText,layers:this.layers,tables:this.tables}))}};Object(i.a)([Object(j.b)({type:Boolean,nonNullable:!0,json:{read:{source:"disablePlaceFinder"},write:{target:"disablePlaceFinder",isRequired:!0},origins:{"web-scene":{read:!1,write:!1}}}})],Ye.prototype,"addressSearchEnabled",void 0),Object(i.a)([Object(f.a)("addressSearchEnabled")],Ye.prototype,"readAddressSearchEnabled",null),Object(i.a)([Object(k.a)("addressSearchEnabled")],Ye.prototype,"writeAddressSearchEnabled",null),Object(i.a)([Object(j.b)({type:Boolean,nonNullable:!0,json:{write:!0,origins:{"web-map":{write:{isRequired:!0}},"web-scene":{default:!0,write:!0}}}})],Ye.prototype,"enabled",void 0),Object(i.a)([Object(j.b)({type:String,json:{write:!0}})],Ye.prototype,"hintText",void 0),Object(i.a)([Object(j.b)({type:Ke,json:{write:{overridePolicy:Ue},origins:{"web-scene":{write:{isRequired:!0}}}}})],Ye.prototype,"layers",void 0),Object(i.a)([Object(j.b)({type:ze,json:{read:!0,write:{overridePolicy:Ue}}})],Ye.prototype,"tables",void 0),Ye=$e=Object(i.a)([Object(w.a)("esri.webdoc.applicationProperties.Search")],Ye);var Qe,Ze=Ye;let Xe=Qe=class extends B.a{constructor(e){super(e),this.search=null}clone(){return new Qe(Object(de.a)({search:this.search}))}};Object(i.a)([Object(j.b)({type:Ze,json:{write:!0}})],Xe.prototype,"search",void 0),Xe=Qe=Object(i.a)([Object(w.a)("esri.webdoc.applicationProperties.Viewing")],Xe);var et,tt=Xe;let rt=et=class extends B.a{constructor(e){super(e),this.editing=null,this.offline=null,this.viewing=null}clone(){return new et(Object(de.a)({editing:this.editing,offline:this.offline,viewing:this.viewing}))}};Object(i.a)([Object(j.b)({json:{write:!0}})],rt.prototype,"editing",void 0),Object(i.a)([Object(j.b)({json:{write:!0}})],rt.prototype,"offline",void 0),Object(i.a)([Object(j.b)({type:tt,json:{write:!0}})],rt.prototype,"viewing",void 0),rt=et=Object(i.a)([Object(w.a)("esri.webmap.ApplicationProperties")],rt);var it,at=rt,st=r(985),ot=r(96),nt=r(867);let lt=it=class extends ot.a{constructor(e){super(e),this.background=null,this.rangeInfo=null,this.spatialReference=null,this.viewpoint=null}clone(){return new it(Object(de.a)({background:this.background,rangeInfo:this.rangeInfo,spatialReference:this.spatialReference,viewpoint:this.viewpoint}))}};Object(i.a)([Object(j.b)({type:nt.a})],lt.prototype,"background",void 0),Object(i.a)([Object(j.b)({type:be})],lt.prototype,"rangeInfo",void 0),Object(i.a)([Object(j.b)({type:I.a})],lt.prototype,"spatialReference",void 0),Object(i.a)([Object(j.b)({type:o.a})],lt.prototype,"viewpoint",void 0),lt=it=Object(i.a)([Object(w.a)("esri.webmap.InitialViewProperties")],lt);var ct=lt,dt=r(627);class ut extends dt.a{constructor(e,t){super(e,t,"webmap")}}const pt=new ut(2,22),bt="Web Map",ht=l.a.ofType(st.a),yt=l.a.ofType(z),mt=p.a.getLogger("esri.WebMap"),gt=new Map;gt.set("image/jpeg","jpeg"),gt.set("image/jpg","jpg"),gt.set("image/png","png"),gt.set("image/gif","gif");const Ot="ArcGIS API for JavaScript",jt="CollectorDisabled",vt="Collector",ft="Data Editing",wt="OfflineDisabled",kt="Offline",St="Workforce Project",_t="Workforce Worker",It="Workforce Dispatcher",Tt="DeveloperBasemap",Lt=["NatGeo_World_Map","Ocean_Basemap","USA_Topo_Maps","World_Imagery","World_Street_Map","World_Terrain_Base","World_Topo_Map","World_Hillshade","Canvas/World_Light_Gray_Base","Canvas/World_Light_Gray_Reference","Canvas/World_Dark_Gray_Base","Canvas/World_Dark_Gray_Reference","Ocean/World_Ocean_Base","Ocean/World_Ocean_Reference","Reference/World_Boundaries_and_Places","Reference/World_Reference_Overlay","Reference/World_Transportation"].map((e=>e.toLowerCase()));let Mt=class extends(Object(h.a)(d.a.LoadableMixin(Object(y.b)(s.a)))){constructor(e){super(e),this.applicationProperties=null,this.bookmarks=new ht,this.floorInfo=null,this.initialViewProperties=new ct,this.portalItem=null,this.presentation=null,this.sourceVersion=null,this.widgets=null,this.utilityNetworks=null,this.authoringApp=this.authoringAppVersion=null,this._isAuthoringAppSetByUser=this._isAuthoringAppVersionSetByUser=!1}destroy(){const e=this.portalItem;this.portalItem=null,null==e||e.destroy()}initialize(){if(this.when().catch((e=>{mt.error("#load()","Failed to load web map",e)})),this.resourceInfo){let t;try{t=this._validateJSON(this.resourceInfo)}catch(e){return void this.addResolvingPromise(Promise.reject(e))}this.read(t)}}set authoringApp(e){this._isAuthoringAppSetByUser=!0,this._set("authoringApp",e)}writeAuthoringApp(e,t){e&&this._isAuthoringAppSetByUser?t.authoringApp=e:t.authoringApp=Ot}set authoringAppVersion(e){this._isAuthoringAppVersionSetByUser=!0,this._set("authoringAppVersion",e)}writeAuthoringAppVersion(e,t){e&&this._isAuthoringAppVersionSetByUser?t.authoringAppVersion=e:t.authoringAppVersion=a.d}readInitialViewProperties(e,t){var r;const i=new ct;t.background&&(i.background=nt.a.fromJSON(t.background));const a=null==(r=t.initialState)?void 0:r.viewpoint;return a&&(a.rotation&&ut.parse(t.version||"","webmap").lessThan(2,20)&&"ArcGIS Pro"===t.authoringApp&&(a.rotation*=-1),i.viewpoint=o.a.fromJSON(a)),t.mapRangeInfo&&(i.rangeInfo=be.fromJSON(t.mapRangeInfo)),t.spatialReference&&(i.spatialReference=I.a.fromJSON(t.spatialReference)),i}writeInitialViewProperties(e,t,r,i){if(!e)return;const a=e.background;a&&a.color&&(t.background=a.write(null,i)),e.viewpoint&&(t.initialState={viewpoint:e.viewpoint.write(null,i)}),e.rangeInfo&&(t.mapRangeInfo=e.rangeInfo.toJSON(i)),e.spatialReference&&(t.spatialReference=e.spatialReference.write(null,i))}writeLayers(e,t,r,i){t[r]=this._writeLayers(e,i,"operational-layers")}readSourceVersion(e,t){const[r,i]=t.version.split(".");return new ut(parseInt(r,10),parseInt(i,10))}writeSourceVersion(e,t,r){t[r]=`${pt.major}.${pt.minor}`}writeTables(e,t,r,i){const a=this._writeLayers(e,i,"tables");a.length&&(t[r]=a)}get thumbnailUrl(){return this.portalItem&&this.portalItem.thumbnailUrl||null}set thumbnailUrl(e){e?(this._override("thumbnailUrl",e),this._thumbnailFilename=this._generateCustomThumbnailFilename(e)):this._clearThumbnailOverride()}load(e){return this.addResolvingPromise(this._loadFromSource()),Promise.resolve(this)}loadAll(){return Object(u.a)(this,(e=>{e(this.ground,this.basemap,this.layers,this.tables)}))}read(e,t){t={...t,origin:"web-map"};const r=this._getAuthoringPropsState();Object(_.b)(this,e,(t=>super.read(e,t)),t),this._restoreAuthoringPropsFromState(r)}write(e,t){if("loaded"!==this.loadStatus){const e=new c.a("webmap:not-loaded","Web map must be loaded before it can be serialized");throw mt.error("#toJSON()","Web map must be loaded before it can be serialized",this.loadError||this.loadStatus),e}return this._removeDanglingLayerRefs(),t={...t,origin:"web-map",restrictedWebMapWriting:!0,webmap:this},super.write(e,t)}async save(e){e=e||{},this._validateItem(),await this._updateFromPromise,await this.load(),await this._loadLayerContainers(),await this._beforeSave(),this._validateMap();const t=this.portalItem,r={origin:"web-map",messages:[],writtenProperties:[],url:t.itemUrl&&Object(g.K)(t.itemUrl),portal:t.portal||Y.a.getDefault()},i=this.write(null,r);return this._validateJSONForWriting(r,e),await this._updateItemProperties(t),await this._updateItem(t,i,r),await this._updateItemThumbnail(),t}async saveAs(e,t){t=t||{};const r=this._getPortalItem(e);await this._updateFromPromise,await this.load(),await this._loadLayerContainers(),await this._beforeSave(),this._validateMap();const i={origin:"web-map",messages:[],writtenProperties:[],url:null,portal:r.portal},a=this.write(null,i);this._validateJSONForWriting(i,t),await this._updateItemPropertiesForSaveAs(r);const s=this._getThumbnailState();return await this._createItem(r,a,i,t),this._restoreThumbnailFromState(s),await this._updateItemThumbnail(),r}async updateFrom(e,t){const r=this._updateFromInternal(e,t);this._updateFromPromise=r,await r,r===this._updateFromPromise&&(this._updateFromPromise=null)}getLayerJSONFromResourceInfo(e){var t,r,i,a;const s=this.resourceInfo;return this._collectAllLayersJSON(Object(n.d)([null==s||null==(t=s.baseMap)?void 0:t.baseMapLayers,null==s?void 0:s.operationalLayers,null==(r=this.basemap)||null==(i=r.resourceInfo)||null==(a=i.data)?void 0:a.baseMapLayers])).find((t=>t.id===e.id))}_collectAllLayersJSON(e){return e.reduce(((e,t)=>(e.push(t),"GroupLayer"===t.layerType&&(e=e.concat(this._collectAllLayersJSON(t.layers||[]))),e)),[])}_writeLayers(e,t,r){return t={...t,layerContainerType:r},e.map((e=>Object(b.s)(Object(Ae.a)(e,"tables"===r?null:this.getLayerJSONFromResourceInfo(e),t)))).filter(Boolean).toArray()}_loadFromSource(){return this.resourceInfo?this._loadFromJSON(this.resourceInfo,{origin:"web-map"}):this.portalItem&&this.portalItem.id?this._loadFromItem(this.portalItem):Promise.resolve(null)}_loadFromItem(e){return e.load().catch((e=>{throw new c.a("webmap:load-portal-item","Failed to load portal item",{error:e})})).then((()=>{if("Web Map"!==e.type)throw new c.a("webmap:invalid-portal-item","Invalid portal item type '${type}', expected 'Web Map'",{type:e.type})})).then((()=>e.fetchData())).then((t=>(this.resourceInfo=t,this._readAndLoadFromJSON(t,{origin:"web-map",portal:e.portal||Y.a.getDefault()})))).then((()=>this._computeInitialViewpoint()))}_readAndLoadFromJSON(e,t){const r=this._validateJSON(e);return this.read(r,t),this._loadFromJSON(r,t)}_validateJSON(e){const t=ut.parse(e.version||"","webmap");return pt.validate(t),e.version=`${t.major}.${t.minor}`,e}_loadFromJSON(e,t){const i={context:{...t,layerContainerType:"operational-layers"}};return this.portalItem&&(i.context.portal=this.portalItem.portal||Y.a.getDefault()),r.e(47).then(r.bind(null,861)).then((({populateOperationalLayers:t})=>{const r=[],a=e.operationalLayers;a&&a.length&&r.push(t(this.layers,a,i));const s={...i,context:{...i.context,layerContainerType:"tables"},defaultLayerType:"ArcGISFeatureLayer"},o=e.tables;return o&&o.length&&r.push(t(this.tables,o,s)),Object(m.j)(r).then((()=>{}))}))}async _computeInitialViewpoint(){var e,t;let r=this.initialViewProperties;if(null==(e=r)||null==(t=e.viewpoint)?void 0:t.targetGeometry)return;const i=await this._getExtentFromItem();i&&(r=r?r.clone():new ct,r.viewpoint=new o.a,r.viewpoint.targetGeometry=i,this.initialViewProperties=r)}async _getExtentFromItem(){var e,t;const i=null==(e=this.initialViewProperties)?void 0:e.spatialReference,a=null==(t=this.portalItem)?void 0:t.extent;return i&&a?i.isWGS84?a.clone():i.isWebMercator?Object(T.b)(a):(await r.e(36).then(r.bind(null,1e3))).create(this.portalItem).then((e=>{const t=new X.a;return t.geometries=[a],t.outSpatialReference=i,e.project(t)})).then((e=>e[0])).catch((e=>(mt.error("Error projecting item's extent:",e),null))):null}_removeDanglingLayerRefs(){const e=this.applicationProperties,t=e&&e.viewing&&e.viewing.search,r=e=>!!this.allLayers.find((t=>t.id===e));t&&t.layers&&(t.layers=t.layers.filter((e=>r(e.id)))),t&&t.tables&&(t.tables=t.tables.filter((e=>!!this.tables.find((t=>t.id===e.id)))));const i=e&&e.editing&&e.editing.locationTracking;i&&i.info&&!r(i.info.layerId)&&(e.editing=null);const a=this.presentation&&this.presentation.slides;a&&a.forEach((e=>{e.visibleLayers&&(e.visibleLayers=e.visibleLayers.filter((e=>r(e.id))))}))}_validateMap(){if(!this.basemap||!this.basemap.baseLayers.length)throw new c.a("webmap:save","Map does not have a valid basemap with a base layer.")}_validateItem(){if(!this.portalItem)throw mt.error("save: requires the portalItem property to be set"),new c.a("webmap:portal-item-not-set","Portal item to save to has not been set on the WebMap");this._validateItemType(this.portalItem)}_validateItemType(e){if(e.type!==bt)throw new c.a("webmap:portal-item-wrong-type",`Portal item needs to have type "${bt}"`)}_loadLayerContainers(){const e=[];return this.basemap&&e.push(this.basemap.load()),this.ground&&e.push(this.ground.load()),Object(m.j)(e).then((()=>{}))}async _beforeSave(){const e=[];for(const t of this.allLayers)if("beforeSave"in t&&"function"==typeof t.beforeSave){const r=t.beforeSave();r&&e.push(r)}await Object(m.j)(e)}_loadAllLayers(){const e=this._getAllLayersAndTables().map((e=>e.load()));return Object(m.j)(e).then((()=>{}))}_getAllLayersAndTables(){return this.allLayers.concat(this.allTables)}_validateJSONForWriting(e,t){let r=e.messages.filter((e=>"error"===e.type)).map((e=>new c.a(e.name,e.message,e.details)));if(t.ignoreUnsupported&&(r=r.filter((e=>"layer:unsupported"!==e.name&&"symbol:unsupported"!==e.name&&"symbol-layer:unsupported"!==e.name&&"property:unsupported"!==e.name&&"url:unsupported"!==e.name))),r.length>0)throw new c.a("webmap:save","Failed to save webmap due to unsupported or invalid content. See 'details.errors' for more detailed information",{errors:r})}async _updateItemProperties(e){e.extent=await this._getWGS84Extent(this.initialViewProperties.viewpoint.targetGeometry),await this._updateTypeKeywords(e)}async _updateItemPropertiesForSaveAs(e){Object(Z.c)(e,jt),Object(Z.c)(e,wt),Object(Z.c)(e,St),Object(Z.c)(e,_t),Object(Z.c)(e,It),Object(Z.c)(e,"Offline Map Areas"),Object(Z.c)(e,"FieldMapsDisabled"),await this._updateItemProperties(e)}async _getWGS84Extent(e){const t=e.clone().normalize();let r;if(t.length>1)for(const i of t)r?i.width>r.width&&(r=i):r=i;else r=t[0];return this._projectToWGS84(r)}async _projectToWGS84(e){const t=e.spatialReference;if(t.isWGS84)return e.clone();if(t.isWebMercator)return Object(T.e)(e);const i=await r.e(36).then(r.bind(null,1e3)),a=await i.create(this.portalItem),s=new X.a;return s.geometries=[e],s.outSpatialReference=I.a.WGS84,(await a.project(s))[0]}async _updateTypeKeywords(e){Object(Z.a)(e,Ot),await this._loadAllLayers(),this._evalCollectorKeyword(e),this._evalDataEditingKeyword(e),this._evalOfflineKeyword(e),this._evalDeveloperBasemapKeyword(e),e.typeKeywords&&(e.typeKeywords=e.typeKeywords.filter(((e,t,r)=>r.indexOf(e)===t)))}_evalCollectorKeyword(e){Object(Z.b)(e,jt)||Object(Z.b)(e,St)||Object(Z.b)(e,_t)||Object(Z.b)(e,It)||!this._hasEditableFeatureLayer()?Object(Z.c)(e,vt):Object(Z.a)(e,vt)}_evalDataEditingKeyword(e){this._hasEditableFeatureLayer()?Object(Z.a)(e,ft):Object(Z.c)(e,ft)}_evalOfflineKeyword(e){!Object(Z.b)(e,wt)&&this._isOfflineCapableMap()?Object(Z.a)(e,kt):Object(Z.c)(e,kt)}_evalDeveloperBasemapKeyword(e){Object(ee.f)(this.basemap)?Object(Z.a)(e,Tt):Object(Z.c)(e,Tt)}_hasEditableFeatureLayer(){return this._getAllLayersAndTables().some((e=>e.loaded&&this._isFeatureServiceLayer(e)&&e.capabilities.operations.supportsEditing&&e.editingEnabled))}_isFeatureServiceLayer(e){return!("feature"!==e.type||!e.source||"feature-layer"!==e.source.type)}_isOfflineCapableMap(){return this._getAllLayersAndTables().filter((e=>"group"!==e.type)).every((e=>e.loaded&&this._isOfflineCapableLayer(e)))}_isOfflineCapableLayer(e){return this._isFeatureServiceLayer(e)&&e.capabilities.operations.supportsSync||("tile"===e.type||"vector-tile"===e.type)&&(e.capabilities.operations.supportsExportTiles||this._isExportableAGOLTileLayer(e)||Object(ee.g)(e))&&e.spatialReference.equals(this.initialViewProperties.spatialReference)}_isExportableAGOLTileLayer(e){return"tile"===e.type&&Object(L.d)(e.url)&&Lt.some((t=>e.url.toLowerCase().indexOf("/"+t+"/")>-1))}async _updateItem(e,t,r){await e.update({data:t}),this._syncUpInstanceWithItem(e,t,r)}async _createItem(e,t,r,i){const a=this.portalItem,s=!!(a&&a.id&&a.portal.user),o=e.portal;if(await o._signIn(),!await this._canCopyItem(a,s,o))throw new c.a("webmap:save-as-copy-not-allowed","Owner of this map does not allow others to save a copy");await o.user.addItem({item:e,folder:i.folder,data:t}),this.portalItem=e,this._syncUpInstanceWithItem(e,t,r)}async _canCopyItem(e,t,r){return!(Object(b.k)(e)&&e.id&&e.typeKeywords&&e.typeKeywords.indexOf("useOnly")>-1)||e.portal.portalHostname===r.portalHostname&&(t||await e.reload(),"admin"===e.itemControl||"update"===e.itemControl)}_syncUpInstanceWithItem(e,t,r){h.b.prototype.read.call(this,{version:t.version,authoringApp:t.authoringApp,authoringAppVersion:t.authoringAppVersion},{origin:"web-map",ignoreDefaults:!0,url:e.itemUrl&&Object(g.K)(e.itemUrl)}),Object(S.a)(r),this.resourceInfo=t}async _updateItemThumbnail(){this.thumbnailUrl&&this._isOverridden("thumbnailUrl")&&(await this.portalItem.updateThumbnail({thumbnail:this.thumbnailUrl,filename:this._thumbnailFilename}),this._clearThumbnailOverride())}_getPortalItem(e){let t=Q.default.from(e);return t.id&&(t=t.clone(),t.id=null),t.type||(t.type=bt),t.portal||(t.portal=Y.a.getDefault()),this._validateItemType(t),t}async _updateFromInternal(e,t){t=t||{},await Object(O.l)(e,"ready"),this._updateInitialViewProperties(e,t),await this._updateThumbnailUrl(e,t)}_updateInitialViewProperties(e,t){var r;if(t.backgroundExcluded||(this.initialViewProperties.background=null==(r=e.background)?void 0:r.clone()),this.initialViewProperties.spatialReference=e.spatialReference.clone(),t.viewpointExcluded||(this.initialViewProperties.viewpoint=new o.a({rotation:e.rotation,scale:t.scalePreserved?e.scale:null,targetGeometry:this._getViewExtent(e)})),!t.widgetsExcluded)for(const i of e.persistableViewModels)i.updateWebDocument(this)}_getViewExtent(e){const t=e.center.clone().normalize(),r=e.extent.clone(),i=r.width/2;return r.xmin=t.x-i,r.xmax=t.x+i,r}async _updateThumbnailUrl(e,t){if(t.thumbnailExcluded)return;const r=function(e,t){t=t||Me;let{width:r,height:i}=t;const a=r/i;return a<xe?i=r/xe:a>xe&&(r=i*xe),r>e.width&&(i*=e.width/r,r=e.width),i>e.height&&(r*=e.height/i,i=e.height),{width:Math.round(r),height:Math.round(i)}}(e,t.thumbnailSize),i=await e.takeScreenshot({format:"png",width:r.width,height:r.height});this._setAutoGeneratedThumbnail(i.dataUrl)}_setAutoGeneratedThumbnail(e){this.thumbnailUrl=e,this._thumbnailFilename=null}_clearThumbnailOverride(){this._clearOverride("thumbnailUrl"),this.clear("thumbnailUrl","user"),this._thumbnailFilename=null}_generateCustomThumbnailFilename(e){if(Object(g.u)(e)){const t=Object(g.i)(e),r=t&&t.mediaType,i=r&&gt.get(r.toLowerCase())||null,a=`thumbnail${Date.now()}`;return i?`${a}.${i}`:a}return null}_getThumbnailState(){let e=this.thumbnailUrl;return e&&(e=this._isOverridden("thumbnailUrl")?e:Object(g.d)(e,"w","8192")),{thumbnailUrl:e,filename:this._thumbnailFilename}}_restoreThumbnailFromState(e){this.thumbnailUrl=e.thumbnailUrl,this._thumbnailFilename=e.filename}_getAuthoringPropsState(){return{authoringApp:this.authoringApp,authoringAppVersion:this.authoringAppVersion,isAuthoringAppSetByUser:this._isAuthoringAppSetByUser,isAuthoringAppVersionSetByUser:this._isAuthoringAppVersionSetByUser}}_restoreAuthoringPropsFromState(e){e.isAuthoringAppSetByUser?this.authoringApp=e.authoringApp:this._isAuthoringAppSetByUser=!1,e.isAuthoringAppVersionSetByUser?this.authoringAppVersion=e.authoringAppVersion:this._isAuthoringAppVersionSetByUser=!1}static fromJSON(e){const t=e;if(!t)throw new c.a("webmap:empty-resource","Expected a JSON resource but got nothing");return new this({resourceInfo:t})}};Mt.VERSION=pt,Object(i.a)([Object(j.b)({type:at,json:{write:!0}})],Mt.prototype,"applicationProperties",void 0),Object(i.a)([Object(j.b)({type:String,json:{write:{allowNull:!0,ignoreOrigin:!0}}})],Mt.prototype,"authoringApp",null),Object(i.a)([Object(k.a)("authoringApp")],Mt.prototype,"writeAuthoringApp",null),Object(i.a)([Object(j.b)({type:String,json:{write:{allowNull:!0,ignoreOrigin:!0}}})],Mt.prototype,"authoringAppVersion",null),Object(i.a)([Object(k.a)("authoringAppVersion")],Mt.prototype,"writeAuthoringAppVersion",null),Object(i.a)([Object(j.b)({json:{read:{source:"baseMap"},write:{target:"baseMap"}}})],Mt.prototype,"basemap",void 0),Object(i.a)([Object(j.b)({type:ht,json:{write:{overridePolicy:e=>({enabled:!!(e&&e.length>0),ignoreOrigin:!0})}}})],Mt.prototype,"bookmarks",void 0),Object(i.a)([Object(j.b)({type:ce,json:{read:{source:"mapFloorInfo"},write:{target:"mapFloorInfo"}}})],Mt.prototype,"floorInfo",void 0),Object(i.a)([Object(j.b)({type:ct,nonNullable:!0,json:{read:{source:["background","initialState.viewpoint","mapRangeInfo","spatialReference"]},write:{ignoreOrigin:!0,target:{background:{type:nt.a},"initialState.viewpoint":{type:o.a},mapRangeInfo:{type:be},spatialReference:{type:I.a}}}}})],Mt.prototype,"initialViewProperties",void 0),Object(i.a)([Object(f.a)("initialViewProperties")],Mt.prototype,"readInitialViewProperties",null),Object(i.a)([Object(k.a)("initialViewProperties")],Mt.prototype,"writeInitialViewProperties",null),Object(i.a)([Object(j.b)({json:{read:!1,write:{target:"operationalLayers",ignoreOrigin:!0}}})],Mt.prototype,"layers",void 0),Object(i.a)([Object(k.a)("layers")],Mt.prototype,"writeLayers",null),Object(i.a)([Object(j.b)({type:Q.default})],Mt.prototype,"portalItem",void 0),Object(i.a)([Object(j.b)({json:{write:!0}})],Mt.prototype,"presentation",void 0),Object(i.a)([Object(j.b)()],Mt.prototype,"resourceInfo",void 0),Object(i.a)([Object(j.b)({readOnly:!0,type:ut,json:{read:{source:"version"},write:{allowNull:!0,ignoreOrigin:!0,target:"version",isRequired:!0}}})],Mt.prototype,"sourceVersion",void 0),Object(i.a)([Object(f.a)("sourceVersion")],Mt.prototype,"readSourceVersion",null),Object(i.a)([Object(k.a)("sourceVersion")],Mt.prototype,"writeSourceVersion",null),Object(i.a)([Object(j.b)({json:{read:!1,write:{ignoreOrigin:!0}}})],Mt.prototype,"tables",void 0),Object(i.a)([Object(k.a)("tables")],Mt.prototype,"writeTables",null),Object(i.a)([Object(j.b)()],Mt.prototype,"thumbnailUrl",null),Object(i.a)([Object(j.b)({type:Le,json:{write:!0}})],Mt.prototype,"widgets",void 0),Object(i.a)([Object(j.b)({type:yt,json:{read:!0,write:!0}})],Mt.prototype,"utilityNetworks",void 0),Mt=Object(i.a)([Object(w.a)("esri.WebMap")],Mt);var xt=Mt},121:function(e,t,r){"use strict";r.d(t,"a",(function(){return y}));var i,a=r(81),s=r(86),o=r(85),n=r(153),l=r(83),c=(r(79),r(84),r(80),r(92)),d=r(82),u=r(90);let p=i=class extends s.a{constructor(e){super(e),this.end=null,this.start=null}static get allTime(){return b}static get empty(){return h}readEnd(e,t){return null!=t.end?new Date(t.end):null}writeEnd(e,t){t.end=e?e.getTime():null}get isAllTime(){return this.equals(i.allTime)}get isEmpty(){return this.equals(i.empty)}readStart(e,t){return null!=t.start?new Date(t.start):null}writeStart(e,t){t.start=e?e.getTime():null}clone(){return new i({end:this.end,start:this.start})}equals(e){if(!e)return!1;const t=Object(o.k)(this.start)?this.start.getTime():this.start,r=Object(o.k)(this.end)?this.end.getTime():this.end,i=Object(o.k)(e.start)?e.start.getTime():e.start,a=Object(o.k)(e.end)?e.end.getTime():e.end;return t===i&&r===a}expandTo(e){if(this.isEmpty||this.isAllTime)return this.clone();const t=Object(o.b)(this.start,(t=>Object(n.c)(t,e))),r=Object(o.b)(this.end,(t=>Object(n.b)(Object(n.c)(t,e),1,e)));return new i({start:t,end:r})}intersection(e){if(!e)return this.clone();if(this.isEmpty||e.isEmpty)return i.empty;if(this.isAllTime)return e.clone();if(e.isAllTime)return this.clone();const t=Object(o.n)(this.start,-1/0,(e=>e.getTime())),r=Object(o.n)(this.end,1/0,(e=>e.getTime())),a=Object(o.n)(e.start,-1/0,(e=>e.getTime())),s=Object(o.n)(e.end,1/0,(e=>e.getTime()));let n,l;if(a>=t&&a<=r?n=a:t>=a&&t<=s&&(n=t),r>=a&&r<=s?l=r:s>=t&&s<=r&&(l=s),!isNaN(n)&&!isNaN(l)){const e=new i;return e.start=n===-1/0?null:new Date(n),e.end=l===1/0?null:new Date(l),e}return i.empty}offset(e,t){if(this.isEmpty||this.isAllTime)return this.clone();const r=new i,{start:a,end:s}=this;return Object(o.k)(a)&&(r.start=Object(n.b)(a,e,t)),Object(o.k)(s)&&(r.end=Object(n.b)(s,e,t)),r}union(e){if(!e||e.isEmpty)return this.clone();if(this.isEmpty)return e.clone();if(this.isAllTime||e.isAllTime)return b.clone();const t=Object(o.k)(this.start)&&Object(o.k)(e.start)?new Date(Math.min(this.start.getTime(),e.start.getTime())):null,r=Object(o.k)(this.end)&&Object(o.k)(e.end)?new Date(Math.max(this.end.getTime(),e.end.getTime())):null;return new i({start:t,end:r})}};Object(a.a)([Object(l.b)({type:Date,json:{write:{allowNull:!0}}})],p.prototype,"end",void 0),Object(a.a)([Object(c.a)("end")],p.prototype,"readEnd",null),Object(a.a)([Object(u.a)("end")],p.prototype,"writeEnd",null),Object(a.a)([Object(l.b)({readOnly:!0,json:{read:!1}})],p.prototype,"isAllTime",null),Object(a.a)([Object(l.b)({readOnly:!0,json:{read:!1}})],p.prototype,"isEmpty",null),Object(a.a)([Object(l.b)({type:Date,json:{write:{allowNull:!0}}})],p.prototype,"start",void 0),Object(a.a)([Object(c.a)("start")],p.prototype,"readStart",null),Object(a.a)([Object(u.a)("start")],p.prototype,"writeStart",null),p=i=Object(a.a)([Object(d.a)("esri.TimeExtent")],p);const b=new p,h=new p({start:void 0,end:void 0});var y=p},131:function(e,t,r){"use strict";r.d(t,"a",(function(){return s})),r.d(t,"b",(function(){return u})),r.d(t,"c",(function(){return b})),r.d(t,"d",(function(){return n})),r.d(t,"e",(function(){return o})),r.d(t,"f",(function(){return l}));var i=r(85),a=r(98);function s(e,t){const r=t&&t.url&&t.url.path;if(e&&r&&(e=Object(a.A)(e,r,{preserveProtocolRelative:!0}),t.portalItem&&t.readResourcePaths)){const r=Object(a.C)(e,t.portalItem.itemUrl);d.test(r)&&t.readResourcePaths.push(t.portalItem.resourceFromPath(r).path)}return p(e,t&&t.portal)}function o(e,t,r=0){if(!e)return e;!Object(a.s)(e)&&t&&t.blockedRelativeUrls&&t.blockedRelativeUrls.push(e);let i=Object(a.A)(e);if(t){const r=t.verifyItemRelativeUrls&&t.verifyItemRelativeUrls.rootPath||t.url&&t.url.path;if(r){const s=p(r,t.portal);i=Object(a.C)(p(i,t.portal),s,s),i!==e&&t.verifyItemRelativeUrls&&t.verifyItemRelativeUrls.writtenUrls.push(i)}}return i=function(e,t){return t&&!t.isPortal&&t.urlKey&&t.customBaseUrl?Object(a.h)(e,`${t.urlKey}.${t.customBaseUrl}`,t.portalHostname):e}(i,t&&t.portal),Object(a.s)(i)&&(i=Object(a.D)(i)),null!=t&&t.resources&&null!=t&&t.portalItem&&!Object(a.s)(i)&&!Object(a.u)(i)&&0===r&&t.resources.toKeep.push({resource:t.portalItem.resourceFromPath(i)}),i}function n(e,t,r){return s(e,r)}function l(e,t,r,i){const a=o(e,i);void 0!==a&&(t[r]=a)}const c=/\/items\/([^\/]+)\/resources\//,d=/^\.\/resources\//;function u(e){const t=Object(i.k)(e)?e.match(c):null;return Object(i.k)(t)?t[1]:null}function p(e,t){if(!t||t.isPortal||!t.urlKey||!t.customBaseUrl)return e;const r=`${t.urlKey}.${t.customBaseUrl}`;return Object(a.q)(a.g,`${a.g.scheme}://${r}`)?Object(a.h)(e,t.portalHostname,r):Object(a.h)(e,r,t.portalHostname)}var b=Object.freeze({__proto__:null,fromJSON:s,toJSON:o,read:n,write:l,itemIdFromResourceUrl:u})},1354:function(e,t,r){"use strict";r.r(t),r.d(t,"Bookmarks",(function(){return Pe}));var i=r(1),a=r(81),s=r(193),o=r(120),n=r(110),l=r(146),c=(r(79),r(102)),d=r(80),u=r(83),p=r(82),b=r(910),h=r(162),y=r(96);r(84);let m=class extends y.a{constructor(e){super(e)}get editedBookmark(){const{bookmark:e}=this;return e?this._get("editedBookmark")||e.clone():null}get state(){return this._get("state")}set state(e){this.validationState=void 0,this.loading=void 0,this._set("state",e)}};Object(a.a)([Object(u.b)()],m.prototype,"bookmark",void 0),Object(a.a)([Object(u.b)({readOnly:!0})],m.prototype,"editedBookmark",null),Object(a.a)([Object(u.b)()],m.prototype,"state",null),Object(a.a)([Object(u.b)()],m.prototype,"validationState",void 0),Object(a.a)([Object(u.b)()],m.prototype,"loading",void 0),m=Object(a.a)([Object(p.a)("esri.widgets.Bookmarks.UserState")],m);var g=m,O=r(613),j=r(106),v=r(88),f=r(125),w=r(985),k=r(554);const S="esri.widgets.Bookmarks.BookmarksViewModel",_=d.a.getLogger(S),I=j.a.ofType(w.a),T={width:128,height:128,format:"png"},L={takeScreenshot:!0,captureViewpoint:!0,captureRotation:!0,captureScale:!0};let M=class extends(Object(k.a)(f.a.EventedAccessor)){constructor(e){super(e),this.activeBookmark=null}destroy(){this.view=null,this._set("activeBookmark",null)}set bookmarks(e){void 0!==e?this._override("bookmarks",e):this._clearOverride("bookmarks")}get bookmarks(){return this.get("view.map.bookmarks")||new I}set defaultCreateOptions(e){this._set("defaultCreateOptions",{...L,...e})}get defaultCreateOptions(){return L}set defaultEditOptions(e){this._set("defaultEditOptions",{...L,...e})}get defaultEditOptions(){return L}get state(){const e=this.get("view");return e&&!e.ready?"loading":"ready"}get view(){return this._get("view")}set view(e){e&&"2d"!==e.type&&_.error(new v.a("view:invalid-view","SceneView is not supported",{view:e})),this._set("view",e)}async createBookmark(e){const{view:t,defaultCreateOptions:r}=this;if(!t){const e=new v.a("create-bookmark:invalid-view","Cannot create a bookmark without a view.");return _.error(e),Promise.reject(e)}const{takeScreenshot:i,screenshotSettings:a,captureViewpoint:s,captureRotation:o,captureScale:n}={...r,...e},l=i?await this._createThumbnail(a):void 0;return new w.a({...l&&{thumbnail:l},...s&&{viewpoint:this._createViewpoint({view:t,captureScale:n,captureRotation:o})}})}async editBookmark(e,t){const{view:r,defaultEditOptions:i}=this;if(!r){const e=new v.a("edit-bookmark:invalid-view","Cannot edit a bookmark without a view.");return _.error(e),Promise.reject(e)}const{takeScreenshot:a,screenshotSettings:s,captureViewpoint:o,captureRotation:n,captureScale:l}={...i,...t},c=a?await this._createThumbnail(s):void 0;return c&&(e.thumbnail=c),o&&(e.viewpoint=this._createViewpoint({view:r,captureScale:l,captureRotation:n})),this.emit("bookmark-edit",{bookmark:e}),e}goTo(e){const{view:t}=this;if(!t){const e=new v.a("go-to:invalid-view","Cannot go to a bookmark without a view");return _.error(e),Promise.reject(e)}const r=null==e?void 0:e.viewpoint;if(!r){const t=new v.a("go-to:invalid-bookmark","Cannot go to a bookmark that does not contain a 'viewpoint'.",{bookmark:e});return _.error(t),Promise.reject(t)}this._set("activeBookmark",e);const i={target:r},a=this.callGoTo(i);return this.emit("bookmark-select",{bookmark:e}),a.catch((()=>{})).then((()=>this._set("activeBookmark",null))),a}async _createThumbnail(e){const t=await this.view.takeScreenshot({...T,...e});return new b.a({url:t.dataUrl})}_createViewpoint({view:e,captureRotation:t,captureScale:r}){var i,a;const s=null==(i=e.viewpoint)?void 0:i.clone();return new O.a({targetGeometry:null==(a=e.extent)?void 0:a.clone(),rotation:t&&(null==s?void 0:s.rotation)||0,scale:r&&(null==s?void 0:s.scale)||0})}};Object(a.a)([Object(u.b)({readOnly:!0})],M.prototype,"activeBookmark",void 0),Object(a.a)([Object(u.b)({type:I})],M.prototype,"bookmarks",null),Object(a.a)([Object(u.b)()],M.prototype,"defaultCreateOptions",null),Object(a.a)([Object(u.b)()],M.prototype,"defaultEditOptions",null),Object(a.a)([Object(u.b)({readOnly:!0})],M.prototype,"state",null),Object(a.a)([Object(u.b)({value:null})],M.prototype,"view",null),M=Object(a.a)([Object(p.a)(S)],M);var x=M,A=r(905),U=r(840),N=r(361),B=r(109),E=r(177),C=r(339),R=r(129),F=r(1125);const G="data-bookmark-uid",P="esri-bookmarks esri-widget--panel",D="esri-bookmarks__loader-container",V="esri-bookmarks__loader",W="esri-bookmarks__list",q="esri-bookmarks__list--sortable",J="esri-bookmarks__bookmark",$="esri-bookmarks__bookmark-button",H="esri-bookmarks__bookmark-image-container",K="esri-bookmarks__bookmark-edit-button",z="esri-bookmarks_bookmark-drag-handle",Y="esri-bookmarks_bookmark-drag-handle-icon",Q="esri-bookmarks__bookmark-icon",Z="esri-bookmarks__image",X="esri-bookmarks__bookmark-name",ee="esri-bookmarks__bookmark--active",te="esri-widget__content--empty",re="esri-bookmarks__no-bookmarks-heading",ie="esri-widget__no-bookmark-icon",ae="esri-bookmarks__no-bookmarks-description",se="esri-bookmarks__adding-bookmark",oe="esri-bookmarks__add-bookmark",ne="esri-bookmarks__add-bookmark-button",le="esri-bookmarks__add-bookmark-icon",ce="esri-bookmarks__authoring-card",de="esri-bookmarks__authoring-container",ue="esri-bookmarks__authoring-form",pe="esri-bookmarks__authoring-label",be="esri-bookmarks__authoring-actions",he="esri-bookmarks__authoring-input--invalid",ye="esri-bookmarks__authoring-delete-button",me="esri-bookmarks__authoring-cancel-button",ge="esri-widget",Oe="esri-widget--disabled",je="esri-button",ve="esri-button--tertiary",fe="esri-input",we="esri-icon-handle-vertical",ke="esri-icon-plus",Se="esri-icon-edit",_e="esri-icon-handle-horizontal",Ie="esri-icon-refresh",Te="esri-icon-link",Le="esri-icon-erase",Me="esri-icon-bookmark",xe="esri-widget__heading",Ae="esri-icon-loading-indicator",Ue="esri-rotating",Ne={addBookmark:!0,thumbnail:!0},Be=/^https:\/\/.*/i;let Ee=class extends h.a{constructor(e,t){super(e,t),this._handles=new o.a,this._addInputNode=null,this._editInputNode=null,this._urlEditInputNode=null,this._addBookmarkButtonNode=null,this._focusAddBookmarkButton=!1,this._focusEditInputBox=!1,this._focusAddInputBox=!1,this._focusUrlEditInputBox=!1,this._sortable=null,this._sortableNode=null,this._focusSortUid=null,this._selectedSortUid=null,this._sortableSavedItems=null,this._userState=null,this.defaultCreateOptions=null,this.defaultEditOptions=null,this.bookmarks=null,this.disabled=!1,this.editingEnabled=!1,this.headingLevel=2,this.goToOverride=null,this.iconClass=Me,this.label=void 0,this.messages=null,this.messagesCommon=null,this.messagesUnits=null,this.view=null,this.viewModel=new x,this.visibleElements={...Ne}}initialize(){this.own([Object(n.a)(this,"viewModel.bookmarks",(()=>this._bookmarksInitialized())),Object(n.a)(this,"editingEnabled",(()=>this._toggleSorting()))])}destroy(){this._destroySortable(),this._handles.destroy(),this._handles=null,this._editMenu.destroy()}get _editMenuItems(){var e,t;const{messages:r,_userState:i}=this,a=null==i||null==(e=i.editedBookmark)||null==(t=e.thumbnail)?void 0:t.url;return[new U.a({label:null==r?void 0:r.menu.refreshThumbnail,iconClass:Ie,clickFunction:()=>this._refreshThumbnail()}),new U.a({label:Be.test(a)?null==r?void 0:r.menu.editImageUrl:null==r?void 0:r.menu.useImageUrl,iconClass:Te,clickFunction:()=>this._startUseImageUrl()}),a?new U.a({label:null==r?void 0:r.menu.removeThumbnail,iconClass:Le,clickFunction:()=>this._removeThumbnail()}):null].filter(Boolean)}get _editMenu(){const{_editMenuItems:e,messages:t}=this,r=this._get("_editMenu");r&&r.destroy();const i=new A.a({iconClass:_e,label:null==t?void 0:t.menu.label});return i.items=e,i}castVisibleElements(e){return{...Ne,...e}}endAddBookmark(){this._userState=null}goTo(e){return this.viewModel.goTo(e)}render(){const{state:e}=this.viewModel,t="loading"===e?this.renderLoading():this.renderBookmarks();return Object(R.a)("div",{class:this.classes(P,ge,{[Oe]:this.disabled})},t)}startAddBookmark(){this._userState=new g({state:"add"}),this._focusAddInputBox=!0,this.scheduleRender()}renderLoading(){return Object(R.a)("div",{class:D,key:"loader"},Object(R.a)("div",{class:V}))}renderNoBookmarksContainer(){const{messages:e}=this;return Object(R.a)("div",{class:te,key:"no-bookmarks"},Object(R.a)("span",{"aria-hidden":"true",class:this.classes(ie,Me)}),Object(R.a)(N.a,{level:this.headingLevel,class:this.classes(xe,re)},null==e?void 0:e.noBookmarksHeading),Object(R.a)("p",{class:ae},null==e?void 0:e.noBookmarksDescription))}renderAddBookmarkLoading(){var e;return Object(R.a)("div",{key:"adding-bookmark",class:se},Object(R.a)("span",{"aria-hidden":"true",class:this.classes(Ae,Ue)}),null==(e=this.messages)?void 0:e.addingBookmark)}renderBookmarkItems(e){if(!e)return null;const{_userState:t,editingEnabled:r}=this;return e.map((e=>r&&e&&t&&("edit"===t.state||"edit-thumbnail"===t.state)&&t.bookmark===e?"edit-thumbnail"===t.state?this.renderEditingBookmarkUrl(t.editedBookmark):this.renderEditingBookmark(t.editedBookmark):this.renderBookmark(e))).toArray()}renderBookmarksContainer(e){var t;const{_userState:r,editingEnabled:i}=this,a="add"===(null==r?void 0:r.state),s=i&&!a?this.renderAddBookmarkButton():null,o=i?a&&r.loading?this.renderAddBookmarkLoading():"add"===(null==r?void 0:r.state)?this.renderAddingBookmark():null:null;return[Object(R.a)("ul",{key:"bookmark-list","aria-label":null==(t=this.messages)?void 0:t.widgetLabel,class:this.classes(W,{[q]:this.editingEnabled}),afterCreate:this._sortNodeCreated,afterRemoved:this._destroySortable,"data-node-ref":"_sortableNode",bind:this},this.renderBookmarkItems(e)),s,o]}renderAddBookmarkButton(){var e;return this.visibleElements.addBookmark?Object(R.a)("div",{key:"add-bookmark-item",class:oe},Object(R.a)("button",{class:this.classes(je,ve,ne),onclick:this.startAddBookmark,afterCreate:this._storeAddBookmarkButton,afterUpdate:this._storeAddBookmarkButton,"data-node-ref":"_addBookmarkButtonNode",bind:this,type:"button"},Object(R.a)("span",{"aria-hidden":"true",class:this.classes(le,ke)}),null==(e=this.messages)?void 0:e.addBookmark)):null}renderBookmarks(){const{bookmarks:e}=this.viewModel,t=e&&e.filter(Boolean),r=t&&t.length,i=r||this.editingEnabled?this.renderBookmarksContainer(t):null;return[r?null:this.renderNoBookmarksContainer(),i]}renderEditContainer(e){const{messagesCommon:t}=this;return Object(R.a)("div",{key:"edit-container"},Object(R.a)("button",{title:null==t?void 0:t.edit,"aria-label":null==t?void 0:t.edit,"data-bookmark":e,onclick:this._showEditBookmarkForm,bind:this,class:K,type:"button"},Object(R.a)("span",{"aria-hidden":"true",class:Se})))}renderDragHandle(e){const{messagesCommon:t}=this,r={[G]:e.uid};return Object(R.a)("div",{role:"button",tabIndex:0,key:"drag-handle",bind:this,class:z,onkeydown:this._dragHandleKeydown,afterCreate:this._focusDragHandle,afterUpdate:this._focusDragHandle,onblur:this._dragHandleBlur,"aria-pressed":this._selectedSortUid===e.uid?"true":"false","aria-label":null==t?void 0:t.dragHandleLabel,title:null==t?void 0:t.dragHandleTitle,...r},Object(R.a)("span",{"aria-hidden":"true",class:this.classes(Y,we)}))}renderBookmarkImageIcon(){return Object(R.a)("span",{"aria-hidden":"true",class:this.classes(Q,Me)})}renderBookmarkImage(e){const{visibleElements:t}=this,{thumbnail:r}=e,i=r&&r.url||"";return t.thumbnail&&i?Object(R.a)("img",{src:i,alt:"",class:Z}):null}renderBookmarkButton(e){const{messagesCommon:t}=this,{name:r}=e,i=r||(null==t?void 0:t.untitled),a=Object(R.a)("div",{class:H},this.renderBookmarkImage(e)||this.renderBookmarkImageIcon());return Object(R.a)("button",{key:"bookmark-button",class:$,bind:this,"data-bookmark":e,onclick:this._goToBookmark,type:"button"},a,Object(R.a)("span",{class:X},i))}renderBookmark(e){const{activeBookmark:t}=this.viewModel,r={[ee]:t===e},i=this.editingEnabled?this.renderEditContainer(e):null,a={[G]:e.uid},s=this.editingEnabled?this.renderDragHandle(e):null;return Object(R.a)("li",{key:e,class:this.classes(J,r),...a},s,this.renderBookmarkButton(e),i)}renderEditingBookmarkName(e){const{messages:t,_userState:r}=this,i="name-required"===r.validationState;return Object(R.a)("label",{class:pe},null==t?void 0:t.title,i?Object(R.a)("strong",null,null==t?void 0:t.invalidTitle):null,Object(R.a)("input",{required:!0,bind:this,class:this.classes(fe,i?he:null),type:"text",value:e.name,afterCreate:this._storeEditInput,afterUpdate:this._focusEditInput,"data-bookmark":e,"data-node-ref":"_editInputNode",placeholder:null==t?void 0:t.titlePlaceholder}))}renderEditingBookmarkUrlActions(){const{messagesCommon:e}=this;return Object(R.a)("div",{class:be},Object(R.a)("input",{type:"button",value:null==e?void 0:e.back,class:this.classes(je,ve),onclick:this._closeUrlEditBookmarkForm,bind:this}),Object(R.a)("input",{class:je,type:"submit",value:null==e?void 0:e.add}))}renderEditingBookmarkActions(){const{messagesCommon:e}=this,{bookmark:t}=this._userState;return Object(R.a)("div",{class:be},Object(R.a)("input",{type:"button",value:null==e?void 0:e.delete,class:this.classes(je,ve,ye),"data-bookmark":t,onclick:this._deleteBookmark,bind:this}),Object(R.a)("input",{type:"button",value:null==e?void 0:e.cancel,class:this.classes(je,ve),onclick:this._closeEditBookmarkForm,bind:this}),Object(R.a)("input",{class:je,type:"submit",value:null==e?void 0:e.save}))}renderEditingBookmarkUrlInput(e){var t;const{messages:r,_userState:i}=this,a=null==(t=e.thumbnail)?void 0:t.url,s=Be.test(a)?a:null,o="absolute-url-required"===i.validationState;return Object(R.a)("label",{class:pe},o?Object(R.a)("strong",null,null==r?void 0:r.invalidImageUrl):null,Object(R.a)("input",{required:!0,bind:this,class:this.classes(fe,o?he:null),type:"text",value:s,afterCreate:this._storeUrlEditInput,afterUpdate:this._focusUrlEditInput,"data-bookmark":e,"data-node-ref":"_urlEditInputNode",title:null==r?void 0:r.imageUrlTooltip,placeholder:r&&`https://<${r.imageUrlPlaceholder}>`}))}renderEditingBookmarkUrl(e){const t={[G]:e.uid};return Object(R.a)("li",{key:"edit-bookmark-url-form",class:ce,...t},Object(R.a)("form",{class:ue,onsubmit:this._editBookmarkUrlSubmit,bind:this},this.renderEditingBookmarkUrlInput(e),this.renderEditingBookmarkUrlActions()))}renderEditingBookmark(e){const t={[G]:e.uid};return Object(R.a)("li",{key:"edit-bookmark-form",class:ce,...t},Object(R.a)("form",{class:ue,onsubmit:this._editBookmarkSubmit,bind:this},Object(R.a)("div",{class:de},Object(R.a)("div",{class:H},this.renderBookmarkImage(e),this._editMenu.render()),this.renderEditingBookmarkName(e)),this.renderEditingBookmarkActions()))}renderAddingBookmarkName(){const{_userState:e,messages:t}=this,r="name-required"===e.validationState;return Object(R.a)("label",{class:pe},null==t?void 0:t.title,r?Object(R.a)("strong",null,null==t?void 0:t.invalidTitle):null,Object(R.a)("input",{required:!0,bind:this,class:this.classes(fe,r?he:null),type:"text",afterCreate:this._storeAddInput,afterUpdate:this._focusAddInput,"data-node-ref":"_addInputNode",value:"",placeholder:null==t?void 0:t.titlePlaceholder}))}renderAddingBookmarkActions(){const{messagesCommon:e}=this;return Object(R.a)("div",{class:this.classes(be)},Object(R.a)("input",{type:"button",value:null==e?void 0:e.cancel,class:this.classes(je,ve,me),onclick:this._endAddBookmark.bind(this),bind:this}),Object(R.a)("input",{class:je,type:"submit",value:null==e?void 0:e.add}))}renderAddingBookmark(){return Object(R.a)("div",{key:"add-bookmark-form",class:ce},Object(R.a)("form",{class:ue,onsubmit:this._addBookmarkSubmit,bind:this},this.renderAddingBookmarkName(),this.renderAddingBookmarkActions()))}_dragHandleBlur(){this._selectedSortUid=null,this.scheduleRender()}_dragHandleKeydown(e){const{_sortableSavedItems:t}=this,r=Object(s.a)(e);if(-1===["ArrowDown","ArrowUp","Escape","Tab"," ","Enter"].indexOf(r))return;const{_sortable:i,_selectedSortUid:a}=this,o=i.toArray(),n=e.target.getAttribute(G),l=o.indexOf(n);if(Object(B.g)(r)){const e=a&&a===n;return this._selectedSortUid=e?null:n,this._sortableSavedItems=e?null:this._sortable.toArray(),void this.scheduleRender()}if("Tab"===r)return this._selectedSortUid=null,void this.scheduleRender();if("Escape"===r&&t)return e.stopPropagation(),this._selectedSortUid=null,this._updateSortItems(t,i,n),void this.scheduleRender();if(-1===l||!a)return;const c="ArrowUp"===r?l-1:l+1;c>=o.length||c<=-1||(function(e,t,r){e.splice(r,0,e.splice(t,1)[0])}(o,l,c),this._updateSortItems(o,i,n))}_updateSortItems(e,t,r){t.sort(e),this._sortBookmarks(t),this._focusSortUid=r,this._selectedSortUid=r}_focusDragHandle(e){const{_focusSortUid:t}=this;e&&t&&e.getAttribute(G)===t&&(e.focus(),this._focusSortUid=null)}_toggleSorting(){const{_sortable:e,_sortableNode:t,editingEnabled:r}=this;if(t)if(e)e.option("disabled",!r);else{const e=F.a.create(t,{dataIdAttr:G,handle:`.${z}`,group:"bookmarks",disabled:!r,onSort:()=>this._sortBookmarks(e)});this._sortable=e}}_sortNodeCreated(e){this._sortableNode=e,this._toggleSorting()}_sortBookmarks(e){const{bookmarks:t}=this.viewModel;if(!t)return;const r=e.toArray();t.sort(((e,t)=>{const i=r.indexOf(e.uid),a=r.indexOf(t.uid);return i>a?1:i<a?-1:0}))}_destroySortable(){const{_sortable:e}=this;e&&e.destroy(),this._sortable=null}_endAddBookmark(){this._focusAddBookmarkButton=!0,this.endAddBookmark()}_bookmarksInitialized(){const e="bookmarks-init",{_handles:t}=this;t.remove(e),t.add(Object(n.b)(this,"viewModel.bookmarks","change",(()=>this._bookmarksChanged())),e)}_bookmarksChanged(){const e="bookmarks-change",{bookmarks:t}=this.viewModel,{_handles:r}=this;r.remove(e);const i=t.map((e=>Object(n.d)(e,["active","name","thumbnail.url"],(()=>this.scheduleRender()))));r.add(i,e),this.scheduleRender()}_showEditBookmarkForm(e){const t=e.currentTarget["data-bookmark"];this._focusEditInputBox=!0,this._userState=new g({bookmark:t,state:"edit"}),this.viewModel.goTo(t),this.scheduleRender()}_closeUrlEditBookmarkForm(){this._focusEditInputBox=!0,this._userState.state="edit"}_closeEditBookmarkForm(){this._userState=null}_addBookmarkSubmit(e){e.preventDefault();const{_addInputNode:t,_userState:r}=this,i=t&&t.value.trim();i?(r.loading=!0,this.viewModel.createBookmark().then((e=>{e.name=i,this.viewModel.bookmarks.add(e),this._endAddBookmark()}))):r.validationState="name-required"}async _editBookmarkAndClose(e,t){await this.viewModel.editBookmark(e,t),this._closeEditBookmarkForm()}_editBookmarkSubmit(e){e.preventDefault();const{_editInputNode:t,_userState:r}=this,i=t&&t.value.trim();i?(r.bookmark.name=i,r.bookmark.thumbnail=r.editedBookmark.thumbnail,this._editBookmarkAndClose(r.bookmark,{takeScreenshot:!1})):r.validationState="name-required"}_storeAddBookmarkButton(e){this._addBookmarkButtonNode=e,this._focusAddBookmark()}_storeEditInput(e){this._editInputNode=e,this._focusEditInput()}_storeAddInput(e){this._addInputNode=e,this._focusAddInput()}_storeUrlEditInput(e){this._urlEditInputNode=e,this._focusUrlEditInput()}_focusUrlEditInput(){this._urlEditInputNode&&this._focusUrlEditInputBox&&(this._focusUrlEditInputBox=!1,this._urlEditInputNode.focus())}_focusAddInput(){this._addInputNode&&this._focusAddInputBox&&(this._focusAddInputBox=!1,this._addInputNode.focus())}_focusAddBookmark(){this._addBookmarkButtonNode&&this._focusAddBookmarkButton&&(this._focusAddBookmarkButton=!1,this._addBookmarkButtonNode.focus())}_focusEditInput(){this._editInputNode&&this._focusEditInputBox&&(this._focusEditInputBox=!1,this._editInputNode.focus())}_deleteBookmark(e){const t=e.currentTarget["data-bookmark"];this.viewModel.bookmarks.remove(t)}_goToBookmark(e){const t=e.currentTarget["data-bookmark"];this.endAddBookmark(),this._closeEditBookmarkForm(),this.viewModel.goTo(t)}async _refreshThumbnail(){const{_userState:e,_editMenu:t,viewModel:r}=this;e.validationState=void 0,await r.editBookmark(this._userState.editedBookmark,{takeScreenshot:!0,captureViewpoint:!1,captureRotation:!1,captureScale:!1}),t.open=!1,this._focusEditInputBox=!0,this.scheduleRender()}_removeThumbnail(){const{_userState:e,_editMenu:t}=this;e.editedBookmark.thumbnail=null,e.validationState=void 0,t.open=!1,this._focusEditInputBox=!0,this.scheduleRender()}_startUseImageUrl(){this._userState.state="edit-thumbnail",this._editMenu.open=!1,this._focusUrlEditInputBox=!0,this.scheduleRender()}_editBookmarkUrlSubmit(e){e.preventDefault();const{_urlEditInputNode:t,_userState:r}=this,i=t.value;Be.test(i)?(i&&(r.editedBookmark.thumbnail=new b.a({url:i})),this._closeUrlEditBookmarkForm()):r.validationState="absolute-url-required"}};Object(a.a)([Object(u.b)({type:g})],Ee.prototype,"_userState",void 0),Object(a.a)([Object(u.b)({readOnly:!0})],Ee.prototype,"_editMenuItems",null),Object(a.a)([Object(u.b)({readOnly:!0})],Ee.prototype,"_editMenu",null),Object(a.a)([Object(l.a)("viewModel.defaultCreateOptions")],Ee.prototype,"defaultCreateOptions",void 0),Object(a.a)([Object(l.a)("viewModel.defaultEditOptions")],Ee.prototype,"defaultEditOptions",void 0),Object(a.a)([Object(l.a)("viewModel.bookmarks")],Ee.prototype,"bookmarks",void 0),Object(a.a)([Object(u.b)()],Ee.prototype,"disabled",void 0),Object(a.a)([Object(u.b)()],Ee.prototype,"editingEnabled",void 0),Object(a.a)([Object(u.b)()],Ee.prototype,"headingLevel",void 0),Object(a.a)([Object(l.a)("viewModel.goToOverride")],Ee.prototype,"goToOverride",void 0),Object(a.a)([Object(u.b)()],Ee.prototype,"iconClass",void 0),Object(a.a)([Object(u.b)({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],Ee.prototype,"label",void 0),Object(a.a)([Object(u.b)(),Object(E.a)("esri/widgets/Bookmarks/t9n/Bookmarks")],Ee.prototype,"messages",void 0),Object(a.a)([Object(u.b)(),Object(E.a)("esri/t9n/common")],Ee.prototype,"messagesCommon",void 0),Object(a.a)([Object(u.b)(),Object(E.a)("esri/core/t9n/Units")],Ee.prototype,"messagesUnits",void 0),Object(a.a)([Object(u.b)()],Ee.prototype,"uiStrings",void 0),Object(a.a)([Object(l.a)("viewModel.view")],Ee.prototype,"view",void 0),Object(a.a)([Object(u.b)({type:x}),Object(C.a)(["select-bookmark","bookmark-edit","bookmark-select"])],Ee.prototype,"viewModel",void 0),Object(a.a)([Object(u.b)()],Ee.prototype,"visibleElements",void 0),Object(a.a)([Object(c.a)("visibleElements")],Ee.prototype,"castVisibleElements",null),Object(a.a)([Object(u.b)()],Ee.prototype,"endAddBookmark",null),Object(a.a)([Object(u.b)()],Ee.prototype,"startAddBookmark",null),Ee=Object(a.a)([Object(p.a)("esri.widgets.Bookmarks")],Ee);var Ce=Ee,Re=r(1096),Fe=r(91),Ge=r(0);const Pe=e=>{const t=Object(i.useRef)(null);return Object(i.useEffect)((()=>{const r=new Ce({container:t.current,view:e.view,editingEnabled:!0});return Fe.c((e=>{if(window.localStorage.getItem("imaps")){const t=Re.a.fromJSON(JSON.parse(window.localStorage.getItem("imaps")));t.load().then((()=>{e(t.bookmarks)}))}})).then((e=>{r.bookmarks.removeAll(),r.bookmarks.addMany(e)})),()=>{r&&r.destroy()}}),[e.id]),Object(Ge.jsx)("div",{ref:t})};t.default=Pe},153:function(e,t,r){"use strict";r.d(t,"a",(function(){return n})),r.d(t,"b",(function(){return s})),r.d(t,"c",(function(){return o}));r(79);const i={milliseconds:1,seconds:1e3,minutes:6e4,hours:36e5,days:864e5,weeks:6048e5,months:26784e5,years:31536e6,decades:31536e7,centuries:31536e8},a={milliseconds:{getter:"getMilliseconds",setter:"setMilliseconds",multiplier:1},seconds:{getter:"getSeconds",setter:"setSeconds",multiplier:1},minutes:{getter:"getMinutes",setter:"setMinutes",multiplier:1},hours:{getter:"getHours",setter:"setHours",multiplier:1},days:{getter:"getDate",setter:"setDate",multiplier:1},weeks:{getter:"getDate",setter:"setDate",multiplier:7},months:{getter:"getMonth",setter:"setMonth",multiplier:1},years:{getter:"getFullYear",setter:"setFullYear",multiplier:1},decades:{getter:"getFullYear",setter:"setFullYear",multiplier:10},centuries:{getter:"getFullYear",setter:"setFullYear",multiplier:100}};function s(e,t,r){const i=new Date(e.getTime());if(t&&r){const e=a[r],{getter:s,setter:o,multiplier:n}=e;i[o](i[s]()+t*n)}return i}function o(e,t){switch(t){case"milliseconds":return new Date(e.getTime());case"seconds":return new Date(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds());case"minutes":return new Date(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes());case"hours":return new Date(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours());case"days":return new Date(e.getFullYear(),e.getMonth(),e.getDate());case"weeks":return new Date(e.getFullYear(),e.getMonth(),e.getDate()-e.getDay());case"months":return new Date(e.getFullYear(),e.getMonth(),1);case"years":return new Date(e.getFullYear(),0,1);case"decades":return new Date(e.getFullYear()-e.getFullYear()%10,0,1);case"centuries":return new Date(e.getFullYear()-e.getFullYear()%100,0,1);default:return new Date}}function n(e,t,r){return 0===e?0:e*i[t]/i[r]}},182:function(e,t,r){"use strict";r.d(t,"a",(function(){return v}));var i=r(81),a=r(137),s=(r(97),r(101)),o=r(88),n=r(125),l=r(144),c=r(168),d=r(80),u=r(91),p=r(98),b=r(83),h=(r(79),r(84),r(82)),y=r(99),m=r(94);let g=0;const O=d.a.getLogger("esri.layers.Layer");let j=class extends(n.a.EventedMixin(Object(l.a)(c.a))){constructor(){super(...arguments),this.attributionDataUrl=null,this.fullExtent=new y.a(-180,-90,180,90,m.a.WGS84),this.id=Date.now().toString(16)+"-layer-"+g++,this.legendEnabled=!0,this.listMode="show",this.opacity=1,this.parent=null,this.popupEnabled=!0,this.attributionVisible=!0,this.spatialReference=m.a.WGS84,this.title=null,this.type=null,this.url=null,this.visible=!0}static async fromArcGISServerUrl(e){const t="string"==typeof e?{url:e}:e,i=await r.e(182).then(r.bind(null,371));try{return await i.fromUrl(t)}catch(a){throw O.error("#fromArcGISServerUrl({ url: '"+t.url+"'})","Failed to create layer from arcgis server url",a),a}}static async fromPortalItem(e){const t="portalItem"in e?e:{portalItem:e},i=await r.e(134).then(r.bind(null,355));try{return await i.fromItem(t)}catch(s){const e=t&&t.portalItem,r=e&&e.id||"unset",i=e&&e.portal&&e.portal.url||a.a.portalUrl;throw O.error("#fromPortalItem()","Failed to create layer from portal item (portal: '"+i+"', id: '"+r+"')",s),s}}initialize(){this.when().catch((e=>{var t,r;Object(u.m)(e)||d.a.getLogger(this.declaredClass).error("#load()",`Failed to load layer (title: '${null!=(t=this.title)?t:"no title"}', id: '${null!=(r=this.id)?r:"no id"}')`,{error:e})}))}destroy(){if(this.parent){const e=this,t=this.parent;"layers"in t&&t.layers.includes(e)?t.layers.remove(e):"tables"in t&&t.tables.includes(e)?t.tables.remove(e):"baseLayers"in t&&t.baseLayers.includes(e)?t.baseLayers.remove(e):"baseLayers"in t&&t.referenceLayers.includes(e)&&t.referenceLayers.remove(e)}}get hasAttributionData(){return null!=this.attributionDataUrl}get parsedUrl(){const e=this.url;return e?Object(p.K)(e):null}async fetchAttributionData(){const e=this.attributionDataUrl;if(this.hasAttributionData&&e)return(await Object(s.default)(e,{query:{f:"json"},responseType:"json"})).data;throw new o.a("layer:no-attribution-data","Layer does not have attribution data")}};Object(i.a)([Object(b.b)({type:String})],j.prototype,"attributionDataUrl",void 0),Object(i.a)([Object(b.b)({type:y.a})],j.prototype,"fullExtent",void 0),Object(i.a)([Object(b.b)({readOnly:!0})],j.prototype,"hasAttributionData",null),Object(i.a)([Object(b.b)({type:String})],j.prototype,"id",void 0),Object(i.a)([Object(b.b)({type:Boolean,nonNullable:!0})],j.prototype,"legendEnabled",void 0),Object(i.a)([Object(b.b)({type:["show","hide","hide-children"]})],j.prototype,"listMode",void 0),Object(i.a)([Object(b.b)({type:Number,range:{min:0,max:1},nonNullable:!0})],j.prototype,"opacity",void 0),Object(i.a)([Object(b.b)()],j.prototype,"parent",void 0),Object(i.a)([Object(b.b)({readOnly:!0})],j.prototype,"parsedUrl",null),Object(i.a)([Object(b.b)({type:Boolean})],j.prototype,"popupEnabled",void 0),Object(i.a)([Object(b.b)({type:Boolean})],j.prototype,"attributionVisible",void 0),Object(i.a)([Object(b.b)({type:m.a})],j.prototype,"spatialReference",void 0),Object(i.a)([Object(b.b)({type:String})],j.prototype,"title",void 0),Object(i.a)([Object(b.b)({type:String,readOnly:!0,json:{read:!1}})],j.prototype,"type",void 0),Object(i.a)([Object(b.b)()],j.prototype,"url",void 0),Object(i.a)([Object(b.b)({type:Boolean,nonNullable:!0})],j.prototype,"visible",void 0),j=Object(i.a)([Object(h.a)("esri.layers.Layer")],j);var v=j},184:function(e,t,r){"use strict";r.d(t,"a",(function(){return a}));var i=r(89);const a=Object(i.b)()({esriTimeUnitsMilliseconds:"milliseconds",esriTimeUnitsSeconds:"seconds",esriTimeUnitsMinutes:"minutes",esriTimeUnitsHours:"hours",esriTimeUnitsDays:"days",esriTimeUnitsWeeks:"weeks",esriTimeUnitsMonths:"months",esriTimeUnitsYears:"years",esriTimeUnitsDecades:"decades",esriTimeUnitsCenturies:"centuries",esriTimeUnitsUnknown:void 0})},205:function(e,t,r){"use strict";r.d(t,"a",(function(){return i})),r.d(t,"b",(function(){return a}));r(79);function i(e){}function a(e){return()=>e}},219:function(e,t,r){"use strict";r.d(t,"a",(function(){return h})),r.d(t,"b",(function(){return u})),r.d(t,"c",(function(){return m})),r.d(t,"d",(function(){return f})),r.d(t,"e",(function(){return v})),r.d(t,"f",(function(){return p})),r.d(t,"g",(function(){return b})),r.d(t,"h",(function(){return g})),r.d(t,"i",(function(){return O})),r.d(t,"j",(function(){return y})),r.d(t,"k",(function(){return j}));var i=r(85),a=r(98),s=r(131);const o={mapserver:"MapServer",imageserver:"ImageServer",featureserver:"FeatureServer",sceneserver:"SceneServer",streamserver:"StreamServer",vectortileserver:"VectorTileServer"},n=Object.values(o),l=new RegExp(`^((?:https?:)?\\/\\/\\S+?\\/rest\\/services\\/(.+?)\\/(${n.join("|")}))(?:\\/(?:layers\\/)?(\\d+))?`,"i"),c=new RegExp(`^((?:https?:)?\\/\\/\\S+?\\/([^\\/\\n]+)\\/(${n.join("|")}))(?:\\/(?:layers\\/)?(\\d+))?`,"i"),d=/(.*?)\/(?:layers\/)?(\d+)\/?$/i;function u(e){return!!l.test(e)}function p(e){const t=Object(a.K)(e),r=t.path.match(l)||t.path.match(c);if(!r)return null;const[,i,s,n,d]=r,u=s.indexOf("/");return{title:h(-1!==u?s.slice(u+1):s),serverType:o[n.toLowerCase()],sublayer:null!=d&&""!==d?parseInt(d,10):null,url:{path:i}}}function b(e){const t=Object(a.K)(e).path.match(d);return t?{serviceUrl:t[1],sublayerId:Number(t[2])}:null}function h(e){return(e=e.replace(/\s*[/_]+\s*/g," "))[0].toUpperCase()+e.slice(1)}function y(e,t){const r=[];if(e){const t=p(e);Object(i.k)(t)&&t.title&&r.push(t.title)}if(t){const e=h(t);r.push(e)}if(2===r.length){if(-1!==r[0].toLowerCase().indexOf(r[1].toLowerCase()))return r[0];if(-1!==r[1].toLowerCase().indexOf(r[0].toLowerCase()))return r[1]}return r.join(" - ")}function m(e){if(!e)return!1;const t=-1!==(e=e.toLowerCase()).indexOf(".arcgis.com/"),r=-1!==e.indexOf("//services")||-1!==e.indexOf("//tiles")||-1!==e.indexOf("//features");return t&&r}function g(e,t){return e?Object(a.I)(Object(a.H)(e,t)):e}function O(e){let{url:t}=e;if(!t)return{url:t};t=Object(a.H)(t,e.logger);const r=Object(a.K)(t),s=p(r.path);let o;if(Object(i.k)(s))null!=s.sublayer&&null==e.layer.layerId&&(o=s.sublayer),t=s.url.path;else if(e.nonStandardUrlAllowed){const e=b(r.path);Object(i.k)(e)&&(t=e.serviceUrl,o=e.sublayerId)}return{url:Object(a.I)(t),layerId:o}}function j(e,t,r,i,o){Object(s.f)(t,i,"url",o),i.url&&null!=e.layerId&&(i.url=Object(a.z)(i.url,r,e.layerId.toString()))}function v(e){if(!e)return!1;const t=e.toLowerCase(),r=-1!==t.indexOf("/services/"),i=-1!==t.indexOf("/mapserver/wmsserver"),a=-1!==t.indexOf("/imageserver/wmsserver"),s=-1!==t.indexOf("/wmsserver");return r&&(i||a||s)}function f(e){if(!e)return!1;const t=new a.a(Object(a.A)(e)).authority.toLowerCase();return"server.arcgisonline.com"===t||"services.arcgisonline.com"===t}},237:function(e,t,r){"use strict";r.d(t,"a",(function(){return u}));var i,a=r(81),s=r(86),o=r(153),n=r(83),l=(r(79),r(84),r(80),r(82)),c=r(184);let d=i=class extends s.a{constructor(e){super(e),this.value=0,this.unit="milliseconds"}toMilliseconds(){return Object(o.a)(this.value,this.unit,"milliseconds")}clone(){return new i({value:this.value,unit:this.unit})}};Object(a.a)([Object(n.b)({type:Number,json:{write:!0},nonNullable:!0})],d.prototype,"value",void 0),Object(a.a)([Object(n.b)({type:c.a.apiValues,json:{type:c.a.jsonValues,read:c.a.read,write:c.a.write},nonNullable:!0})],d.prototype,"unit",void 0),d=i=Object(a.a)([Object(l.a)("esri.TimeInterval")],d);var u=d},240:function(e,t,r){"use strict";r.d(t,"a",(function(){return a})),r.d(t,"b",(function(){return s}));var i=r(84);function a(e){const t=Object(i.e)(100*(1-e));return Math.max(0,Math.min(t,100))}function s(e){const t=1-e/100;return Math.max(0,Math.min(t,1))}},266:function(e,t,r){"use strict";r.d(t,"a",(function(){return s})),r.d(t,"b",(function(){return o})),r.d(t,"c",(function(){return n})),r.d(t,"d",(function(){return l}));var i=r(85),a=r(91);function s(e,t,r){return Object(a.j)(e.map(((e,i)=>t.apply(r,[e,i]))))}function o(e,t,r){return Object(a.j)(e.map(((e,i)=>t.apply(r,[e,i])))).then((e=>e.map((e=>e.value))))}function n(e){return Object(i.j)(e)?Object(a.t)():e.then((e=>({ok:!0,value:e}))).catch((e=>({ok:!1,error:e})))}function l(e){return e.then((e=>({ok:!0,value:e}))).catch((e=>(Object(a.u)(e),{ok:!1,error:e})))}},267:function(e,t,r){"use strict";r.d(t,"a",(function(){return i}));const i=new(r(89).a)({esriFieldTypeSmallInteger:"small-integer",esriFieldTypeInteger:"integer",esriFieldTypeSingle:"single",esriFieldTypeDouble:"double",esriFieldTypeLong:"long",esriFieldTypeString:"string",esriFieldTypeDate:"date",esriFieldTypeOID:"oid",esriFieldTypeGeometry:"geometry",esriFieldTypeBlob:"blob",esriFieldTypeRaster:"raster",esriFieldTypeGUID:"guid",esriFieldTypeGlobalID:"global-id",esriFieldTypeXML:"xml"})},291:function(e,t,r){"use strict";r.d(t,"a",(function(){return O})),r.d(t,"b",(function(){return j}));var i=r(81),a=r(96),s=r(85),o=r(87),n=r(312);class l{constructor(){this._propertyOriginMap=new Map,this._originStores=new Array(n.a),this._values=new Map}clone(e){const t=new l,r=this._originStores[0];r&&r.forEach(((e,r)=>{t.set(r,Object(o.a)(e),0)}));for(let i=2;i<n.a;i++){const r=this._originStores[i];r&&r.forEach(((r,a)=>{e&&e.has(a)||t.set(a,Object(o.a)(r),i)}))}return t}get(e,t){const r=void 0===t?this._values:this._originStores[t];return r?r.get(e):void 0}keys(e){const t=null==e?this._values:this._originStores[e];return t?[...t.keys()]:[]}set(e,t,r=6){let i=this._originStores[r];if(i||(i=new Map,this._originStores[r]=i),i.set(e,t),!this._values.has(e)||Object(s.d)(this._propertyOriginMap.get(e))<=r){const i=this._values.get(e);return this._values.set(e,t),this._propertyOriginMap.set(e,r),i!==t}return!1}delete(e,t=6){const r=this._originStores[t];if(!r)return;const i=r.get(e);if(r.delete(e),this._values.has(e)&&this._propertyOriginMap.get(e)===t){this._values.delete(e);for(let r=t-1;r>=0;r--){const t=this._originStores[r];if(t&&t.has(e)){this._values.set(e,t.get(e)),this._propertyOriginMap.set(e,r);break}}}return i}has(e,t){const r=void 0===t?this._values:this._originStores[t];return!!r&&r.has(e)}revert(e,t){for(;t>0&&!this.has(e,t);)--t;const r=this._originStores[t],i=r&&r.get(e),a=this._values.get(e);return this._values.set(e,i),this._propertyOriginMap.set(e,t),a!==i}originOf(e){return this._propertyOriginMap.get(e)||0}forEach(e){this._values.forEach(e)}}var c=r(303),d=r(152),u=r(82);const p=e=>{let t=class extends e{constructor(...e){super(...e);const t=Object(s.d)(Object(d.a)(this)),r=t.metadatas,i=t.store,a=new l;t.store=a,i.keys().forEach((e=>{a.set(e,i.get(e),0)})),Object.keys(r).forEach((e=>{t.internalGet(e)&&a.set(e,t.internalGet(e),0)}))}read(e,t){Object(c.a)(this,e,t)}getAtOrigin(e,t){const r=b(this),i=Object(n.d)(t);if("string"==typeof e)return r.get(e,i);const a={};return e.forEach((e=>{a[e]=r.get(e,i)})),a}originOf(e){return Object(n.b)(this.originIdOf(e))}originIdOf(e){return b(this).originOf(e)}revert(e,t){const r=b(this),i=Object(n.d)(t),a=Object(d.a)(this);let s;s="string"==typeof e?"*"===e?r.keys(i):[e]:e,s.forEach((e=>{a.invalidate(e),r.revert(e,i),a.commit(e)}))}};return t=Object(i.a)([Object(u.a)("esri.core.ReadOnlyMultiOriginJSONSupport")],t),t};function b(e){return Object(d.a)(e).store}let h=class extends(p(a.a)){};h=Object(i.a)([Object(u.a)("esri.core.ReadOnlyMultiOriginJSONSupport")],h);var y=r(305);const m=e=>{let t=class extends e{constructor(...e){super(...e)}clear(e,t="user"){return g(this).delete(e,Object(n.d)(t))}write(e={},t){return Object(y.b)(this,e=e||{},t),e}setAtOrigin(e,t,r){Object(d.a)(this).setAtOrigin(e,t,Object(n.d)(r))}removeOrigin(e){const t=g(this),r=Object(n.d)(e),i=t.keys(r);for(const a of i)t.originOf(a)===r&&t.set(a,t.get(a,r),6)}updateOrigin(e,t){const r=g(this),i=Object(n.d)(t),a=this.get(e);for(let s=i+1;s<n.a;++s)r.delete(e,s);r.set(e,a,i)}toJSON(e){return this.write({},e)}};return t=Object(i.a)([Object(u.a)("esri.core.WriteableMultiOriginJSONSupport")],t),t.prototype.toJSON.isDefaultToJSON=!0,t};function g(e){return Object(d.a)(e).store}const O=e=>{let t=class extends(m(p(e))){constructor(...e){super(...e)}};return t=Object(i.a)([Object(u.a)("esri.core.MultiOriginJSONSupport")],t),t};let j=class extends(O(a.a)){};j=Object(i.a)([Object(u.a)("esri.core.MultiOriginJSONSupport")],j)},361:function(e,t,r){"use strict";r.d(t,"a",(function(){return n}));var i=r(108),a=r(109),s=(r(79),r(80),r(129));const o="esri-widget__heading";function n(e,t){const r=`h${Object(i.f)(Math.ceil(e.level),1,6)}`;return delete e.level,Object(s.a)(r,{...e,class:Object(a.a)(o,e.class)},t)}},434:function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return T}));var i=r(81),a=r(160),s=r(88),o=r(86),n=r(87),l=r(168),c=r(85),d=r(98),u=r(83),p=r(84),b=(r(79),r(80)),h=r(92),y=r(82),m=r(99),g=r(180),O=r(96),j=r(102);const v=b.a.getLogger("esri.portal.PortalItemResource");let f=class extends O.a{constructor(e){super(e),this.portalItem=null}normalizeCtorArgs(e){return e&&e.portalItem&&e.path?{...e,path:this.normalizePath(e.path,e.portalItem)}:e}set path(e){Object(c.k)(e)&&Object(d.s)(e)?v.error("portalitemresource:invalid-path","A portal item resource path must be relative"):this._set("path",e)}_castPath(e){return this.normalizePath(e,this.portalItem)}get url(){return this.portalItem&&this.path?`${this.portalItem.itemUrl}/resources/${this.path}`:null}get itemRelativeUrl(){return this.portalItem&&this.path?`./resources/${this.path}`:null}fetch(e="json",t){const r=this.url;if(Object(c.j)(r))throw new s.a("portal-item-resource:fetch","Portal item resource does not refer to a valid item or path");return this.portalItem.portal._request(r,{responseType:e,query:{token:this.portalItem.apiKey},signal:Object(c.i)(t,"signal")})}async update(e,t){return(await r.e(21).then(r.bind(null,878))).addOrUpdateResource(this,"update",e,t)}hasPath(){return Object(c.k)(this.path)}normalizePath(e,t){return Object(c.j)(e)?e:(e=e.replace(/^\/+/,""),Object(c.k)(t)&&Object(d.s)(e)&&(e=Object(d.C)(e,t.itemUrl)),e.replace(/^\/+/,"").replace(/^(\.\/)?resources\//,""))}};Object(i.a)([Object(u.b)()],f.prototype,"portalItem",void 0),Object(i.a)([Object(u.b)({type:String,value:null})],f.prototype,"path",null),Object(i.a)([Object(j.a)("path")],f.prototype,"_castPath",null),Object(i.a)([Object(u.b)({type:String,readOnly:!0})],f.prototype,"url",null),Object(i.a)([Object(u.b)({type:String,readOnly:!0})],f.prototype,"itemRelativeUrl",null),f=Object(i.a)([Object(y.a)("esri.portal.PortalItemResource")],f);var w=f;let k=class extends O.a{constructor(e){super(e),this.created=null,this.rating=null}};Object(i.a)([Object(u.b)()],k.prototype,"created",void 0),Object(i.a)([Object(u.b)()],k.prototype,"rating",void 0),k=Object(i.a)([Object(y.a)("esri.portal.PortalRating")],k);var S,_=k;let I=S=class extends(Object(o.b)(l.a)){constructor(e){super(e),this.access=null,this.accessInformation=null,this.apiKey=null,this.applicationProxies=null,this.avgRating=null,this.categories=null,this.created=null,this.culture=null,this.description=null,this.extent=null,this.groupCategories=null,this.id=null,this.itemControl=null,this.licenseInfo=null,this.modified=null,this.name=null,this.numComments=null,this.numRatings=null,this.numViews=null,this.owner=null,this.ownerFolder=null,this.portal=null,this.screenshots=null,this.size=null,this.snippet=null,this.sourceJSON=null,this.tags=null,this.title=null,this.type=null,this.typeKeywords=null,this.url=null}static from(e){return Object(p.d)(S,e)}destroy(){this.portal=null}get displayName(){const e=this.type,t=this.typeKeywords||[];let r=e;return"Feature Service"===e||"Feature Collection"===e?r=t.indexOf("Table")>-1?"Table":t.indexOf("Route Layer")>-1?"Route Layer":t.indexOf("Markup")>-1?"Markup":"Feature Layer":"Image Service"===e?r=t.indexOf("Elevation 3D Layer")>-1?"Elevation Layer":t.indexOf("Tiled Imagery")>-1?"Tiled Imagery Layer":"Imagery Layer":"Scene Service"===e?r="Scene Layer":"Scene Package"===e?r="Scene Layer Package":"Stream Service"===e?r="Feature Layer":"Geoprocessing Service"===e&&this.portal&&this.portal.isPortal?r=t.indexOf("Web Tool")>-1?"Tool":"Geoprocessing Service":"Geocoding Service"===e?r="Locator":"Geoenrichment Service"===e?r="GeoEnrichment Service":"Microsoft Powerpoint"===e?r="Microsoft PowerPoint":"GeoJson"===e?r="GeoJSON":"Globe Service"===e?r="Globe Layer":"Vector Tile Service"===e?r="Tile Layer":"netCDF"===e?r="NetCDF":"Map Service"===e?r=-1===t.indexOf("Spatiotemporal")&&(t.indexOf("Hosted Service")>-1||t.indexOf("Tiled")>-1)&&-1===t.indexOf("Relational")?"Tile Layer":"Map Image Layer":e&&e.toLowerCase().indexOf("add in")>-1?r=e.replace(/(add in)/gi,"Add-In"):"datastore catalog service"===e?r="Big Data File Share":"Compact Tile Package"===e?r="Tile Package (tpkx)":"OGCFeatureServer"===e&&(r="OGC Feature Layer"),r}readExtent(e){return e&&e.length?new m.a(e[0][0],e[0][1],e[1][0],e[1][1]):null}get iconUrl(){const e=this.type&&this.type.toLowerCase()||"",t=this.typeKeywords||[];let r,i=!1,s=!1,o=!1,n=!1,l=!1,c=!1;return e.indexOf("service")>0||"feature collection"===e||"kml"===e||"wms"===e||"wmts"===e||"wfs"===e?(i=t.indexOf("Hosted Service")>-1,"feature service"===e||"feature collection"===e||"kml"===e||"wfs"===e?(s=t.indexOf("Table")>-1,o=t.indexOf("Route Layer")>-1,n=t.indexOf("Markup")>-1,l=-1!==t.indexOf("Spatiotemporal"),c=-1!==t.indexOf("UtilityNetwork"),r=l&&s?"spatiotemporaltable":s?"table":o?"routelayer":n?"markup":l?"spatiotemporal":i?"featureshosted":c?"utilitynetwork":"features"):r="map service"===e||"wms"===e||"wmts"===e?i||t.indexOf("Tiled")>-1||"wmts"===e?"maptiles":"mapimages":"scene service"===e?t.indexOf("Line")>-1?"sceneweblayerline":t.indexOf("3DObject")>-1?"sceneweblayermultipatch":t.indexOf("Point")>-1?"sceneweblayerpoint":t.indexOf("IntegratedMesh")>-1?"sceneweblayermesh":t.indexOf("PointCloud")>-1?"sceneweblayerpointcloud":t.indexOf("Polygon")>-1?"sceneweblayerpolygon":t.indexOf("Building")>-1?"sceneweblayerbuilding":t.indexOf("Voxel")>-1?"sceneweblayervoxel":"sceneweblayer":"image service"===e?t.indexOf("Elevation 3D Layer")>-1?"elevationlayer":t.indexOf("Tiled Imagery")>-1?"tiledimagerylayer":"imagery":"stream service"===e?"streamlayer":"vector tile service"===e?"vectortile":"datastore catalog service"===e?"datastorecollection":"geocoding service"===e?"geocodeservice":"geoprocessing service"===e&&t.indexOf("Web Tool")>-1&&this.portal&&this.portal.isPortal?"tool":"layers"):r="web map"===e||"cityengine web scene"===e?"maps":"web scene"===e?t.indexOf("ViewingMode-Local")>-1?"webscenelocal":"websceneglobal":"web mapping application"===e||"mobile application"===e||"application"===e||"operation view"===e||"desktop application"===e?"apps":"map document"===e||"map package"===e||"published map"===e||"scene document"===e||"globe document"===e||"basemap package"===e||"mobile basemap package"===e||"mobile map package"===e||"project package"===e||"project template"===e||"pro map"===e||"layout"===e||"layer"===e&&t.indexOf("ArcGIS Pro")>-1||"explorer map"===e&&t.indexOf("Explorer Document")?"mapsgray":"service definition"===e||"csv"===e||"shapefile"===e||"cad drawing"===e||"geojson"===e||"360 vr experience"===e||"netcdf"===e||"administrative report"===e?"datafiles":"explorer add in"===e||"desktop add in"===e||"windows viewer add in"===e||"windows viewer configuration"===e?"appsgray":"arcgis pro add in"===e||"arcgis pro configuration"===e?"addindesktop":"rule package"===e||"file geodatabase"===e||"sqlite geodatabase"===e||"csv collection"===e||"kml collection"===e||"windows mobile package"===e||"map template"===e||"desktop application template"===e||"gml"===e||"arcpad package"===e||"code sample"===e||"form"===e||"document link"===e||"earth configuration"===e||"operations dashboard add in"===e||"rules package"===e||"image"===e||"workflow manager package"===e||"explorer map"===e&&t.indexOf("Explorer Mapping Application")>-1||t.indexOf("Document")>-1?"datafilesgray":"network analysis service"===e||"geoprocessing service"===e||"geodata service"===e||"geometry service"===e||"geoprocessing package"===e||"locator package"===e||"geoprocessing sample"===e||"workflow manager service"===e?"toolsgray":"layer"===e||"layer package"===e||"explorer layer"===e?"layersgray":"scene package"===e?"scenepackage":"mobile scene package"===e?"mobilescenepackage":"tile package"===e||"compact tile package"===e?"tilepackage":"task file"===e?"taskfile":"report template"===e?"report-template":"statistical data collection"===e?"statisticaldatacollection":"insights workbook"===e?"workbook":"insights model"===e?"insightsmodel":"insights page"===e?"insightspage":"insights theme"===e?"insightstheme":"hub initiative"===e?"hubinitiative":"hubpage"===e?"hubpage":"hub event"===e?"hubevent":"hub site application"===e?"hubsite":"relational database connection"===e?"relationaldatabaseconnection":"big data file share"===e?"datastorecollection":"image collection"===e?"imagecollection":"style"===e?"style":"desktop style"===e?"desktopstyle":"dashboard"===e?"dashboard":"raster function template"===e?"rasterprocessingtemplate":"vector tile package"===e?"vectortilepackage":"ortho mapping project"===e?"orthomappingproject":"ortho mapping template"===e?"orthomappingtemplate":"solution"===e?"solutions":"geopackage"===e?"geopackage":"deep learning package"===e?"deeplearningpackage":"real time analytic"===e?"realtimeanalytics":"big data analytic"===e?"bigdataanalytics":"feed"===e?"feed":"excalibur imagery project"===e?"excaliburimageryproject":"notebook"===e?"notebook":"storymap"===e?"storymap":"survey123 add in"===e?"survey123addin":"mission"===e?"mission":"mission report"===e?"missionreport":"quickcapture project"===e?"quickcaptureproject":"pro report"===e?"proreport":"urban model"===e?"urbanmodel":"web experience"===e?"experiencebuilder":"web experience template"===e?"webexperiencetemplate":"workflow"===e?"workflow":"insights script"===e?"insightsscript":"kernel gateway connection"===e?"kernelgatewayconnection":"hub initiative template"===e?"hubinitiativetemplate":"storymap theme"===e?"storymaptheme":"knowledge graph"===e?"knowledgegraph":"native application"===e?"nativeapp":"native application installer"===e?"nativeappinstaller":"link chart"===e?"linkchart":"investigation"===e?"investigation":"ogcfeatureserver"===e?"features":"pro project"===e?"proproject":"insights workbook package"===e?"insightsworkbookpackage":"apache parquet"===e?"apacheparquet":"maps",r?Object(a.a)("esri/images/portal/"+r+"16.png"):null}get isLayer(){return["Map Service","Feature Service","Feature Collection","Scene Service","Image Service","Stream Service","Vector Tile Service","WMTS","WMS"].indexOf(this.type)>-1}get itemUrl(){const e=this.get("portal.restUrl");return e?e+"/content/items/"+this.id:null}get thumbnailUrl(){const e=this.itemUrl,t=this.thumbnail;return e&&t?this.portal._normalizeUrl(`${e}/info/${t}?f=json`):null}get userItemUrl(){const e=this.get("portal.restUrl");if(!e)return null;const t=this.owner||this.get("portal.user.username");return t?`${e}/content/users/${this.ownerFolder?`${t}/${this.ownerFolder}`:t}/items/${this.id}`:null}load(e){this.portal||(this.portal=g.a.getDefault());const t=this.portal.load(e).then((()=>this.sourceJSON?this.sourceJSON:this.id&&this.itemUrl?this.portal._request(this.itemUrl,{signal:Object(c.k)(e)?e.signal:null,query:{token:this.apiKey}}):{})).then((e=>{this.sourceJSON=e,this.read(e)}));return this.addResolvingPromise(t),Promise.resolve(this)}addRating(e){const t={method:"post",query:{}};return e instanceof _&&(e=e.rating),isNaN(e)||"number"!=typeof e||(t.query.rating=e),this.portal._request(this.itemUrl+"/addRating",t).then((()=>new _({rating:e,created:new Date})))}clone(){const e={access:this.access,accessInformation:this.accessInformation,applicationProxies:Object(n.a)(this.applicationProxies),avgRating:this.avgRating,categories:Object(n.a)(this.categories),created:Object(n.a)(this.created),culture:this.culture,description:this.description,extent:Object(n.a)(this.extent),groupCategories:Object(n.a)(this.groupCategories),id:this.id,itemControl:this.itemControl,licenseInfo:this.licenseInfo,modified:Object(n.a)(this.modified),name:this.name,numComments:this.numComments,numRatings:this.numRatings,numViews:this.numViews,owner:this.owner,ownerFolder:this.ownerFolder,portal:this.portal,screenshots:Object(n.a)(this.screenshots),size:this.size,snippet:this.snippet,tags:Object(n.a)(this.tags),thumbnail:this.thumbnail,title:this.title,type:this.type,typeKeywords:Object(n.a)(this.typeKeywords),url:this.url};return this.loaded&&(e.loadStatus="loaded"),new S({sourceJSON:this.sourceJSON}).set(e)}createPostQuery(){const e=this.toJSON();for(const t in e)"tags"===t&&null!==e[t]&&(e[t]=e[t].join(", ")),"typeKeywords"===t&&null!==e[t]&&(e[t]=e[t].join(", ")),"extent"===t&&e[t]&&(e[t]=JSON.stringify(e[t]));return e}deleteRating(){return this.portal._request(this.itemUrl+"/deleteRating",{method:"post"}).then((()=>{}))}fetchData(e="json",t){return this.portal._request(this.itemUrl+"/data",{responseType:e,...t,query:{token:this.apiKey}})}fetchRating(e){return this.portal._request(this.itemUrl+"/rating",{query:{token:this.apiKey},...e}).then((e=>null!=e.rating?(e.created=new Date(e.created),new _(e)):null))}fetchRelatedItems(e,t){return this.portal._requestToTypedArray(this.itemUrl+"/relatedItems",{query:{...e,token:this.apiKey},...t},S)}getThumbnailUrl(e){let t=this.thumbnailUrl;return t&&e&&(t+=`&w=${e}`),t}reload(){return this.portal._request(this.itemUrl,{cacheBust:!0,query:{token:this.apiKey}}).then((e=>(this.sourceJSON=e,this.read(e),this)))}update(e){return this.id?this.load().then((()=>this.portal._signIn())).then((()=>{const t=e&&e.data,r={method:"post"};r.query=this.createPostQuery();for(const e in r.query)null===r.query[e]&&(r.query[e]="");return r.query.clearEmptyFields=!0,null!=t&&("string"==typeof t?r.query.text=t:"object"==typeof t&&(r.query.text=JSON.stringify(t))),this.portal._request(`${this.userItemUrl}/update`,r).then((()=>this.reload()))})):Promise.reject(new s.a("portal:item-does-not-exist","The item does not exist yet and cannot be updated"))}updateThumbnail(e){return this.id?this.load().then((()=>this.portal._signIn())).then((()=>{const t=e.thumbnail,r=e.filename,i={method:"post"};if("string"==typeof t)Object(d.u)(t)?i.query={data:t}:i.query={url:Object(d.A)(t)},Object(c.k)(r)&&(i.query.filename=r);else{const e=new FormData;Object(c.k)(r)?e.append("file",t,r):e.append("file",t),i.body=e}return this.portal._request(`${this.userItemUrl}/updateThumbnail`,i).then((()=>this.reload()))})):Promise.reject(new s.a("portal:item-does-not-exist","The item does not exist yet and cannot be updated"))}async fetchResources(e={},t){return(await r.e(21).then(r.bind(null,878))).fetchResources(this,e,t)}async addResource(e,t,i){const a=await r.e(21).then(r.bind(null,878));return e.portalItem=this,a.addOrUpdateResource(e,"add",t,i)}async removeResource(e,t){const i=await r.e(21).then(r.bind(null,878));if(e.portalItem&&e.portalItem.itemUrl!==this.itemUrl)throw new s.a("removeresource:portal-item-mismatch","The portal item associated with the provided resource does not match the item");return i.removeResource(this,e,t)}async removeAllResources(e){return(await r.e(21).then(r.bind(null,878))).removeAllResources(this,e)}resourceFromPath(e){return new w({portalItem:this,path:e})}toJSON(){const e=this.extent,t={created:this.created&&this.created.getTime(),description:this.description,extent:e&&[[e.xmin,e.ymin],[e.xmax,e.ymax]],id:this.id,modified:this.modified&&this.modified.getTime(),name:this.name,owner:this.owner,ownerFolder:this.ownerFolder,snippet:this.snippet,tags:this.tags,thumbnail:this.thumbnail,title:this.title,type:this.type,typeKeywords:this.typeKeywords,url:this.url};return Object(n.c)(t)}static fromJSON(e){if(!e)return null;if(e.declaredClass)throw new Error("JSON object is already hydrated");return new S({sourceJSON:e})}_getPostQuery(){const e=this.toJSON();for(const t in e)"tags"===t&&null!==e[t]&&(e[t]=e[t].join(", ")),"typeKeywords"===t&&null!==e[t]&&(e[t]=e[t].join(", ")),"extent"===t&&e[t]&&(e[t]=JSON.stringify(e[t]));return e}};Object(i.a)([Object(u.b)({type:["private","shared","org","public"]})],I.prototype,"access",void 0),Object(i.a)([Object(u.b)()],I.prototype,"accessInformation",void 0),Object(i.a)([Object(u.b)({type:String})],I.prototype,"apiKey",void 0),Object(i.a)([Object(u.b)({json:{read:{source:"appProxies"}}})],I.prototype,"applicationProxies",void 0),Object(i.a)([Object(u.b)()],I.prototype,"avgRating",void 0),Object(i.a)([Object(u.b)()],I.prototype,"categories",void 0),Object(i.a)([Object(u.b)({type:Date})],I.prototype,"created",void 0),Object(i.a)([Object(u.b)()],I.prototype,"culture",void 0),Object(i.a)([Object(u.b)()],I.prototype,"description",void 0),Object(i.a)([Object(u.b)({readOnly:!0})],I.prototype,"displayName",null),Object(i.a)([Object(u.b)({type:m.a})],I.prototype,"extent",void 0),Object(i.a)([Object(h.a)("extent")],I.prototype,"readExtent",null),Object(i.a)([Object(u.b)()],I.prototype,"groupCategories",void 0),Object(i.a)([Object(u.b)({readOnly:!0})],I.prototype,"iconUrl",null),Object(i.a)([Object(u.b)()],I.prototype,"id",void 0),Object(i.a)([Object(u.b)({readOnly:!0})],I.prototype,"isLayer",null),Object(i.a)([Object(u.b)()],I.prototype,"itemControl",void 0),Object(i.a)([Object(u.b)({readOnly:!0})],I.prototype,"itemUrl",null),Object(i.a)([Object(u.b)()],I.prototype,"licenseInfo",void 0),Object(i.a)([Object(u.b)({type:Date})],I.prototype,"modified",void 0),Object(i.a)([Object(u.b)()],I.prototype,"name",void 0),Object(i.a)([Object(u.b)()],I.prototype,"numComments",void 0),Object(i.a)([Object(u.b)()],I.prototype,"numRatings",void 0),Object(i.a)([Object(u.b)()],I.prototype,"numViews",void 0),Object(i.a)([Object(u.b)()],I.prototype,"owner",void 0),Object(i.a)([Object(u.b)()],I.prototype,"ownerFolder",void 0),Object(i.a)([Object(u.b)({type:g.a})],I.prototype,"portal",void 0),Object(i.a)([Object(u.b)()],I.prototype,"screenshots",void 0),Object(i.a)([Object(u.b)()],I.prototype,"size",void 0),Object(i.a)([Object(u.b)()],I.prototype,"snippet",void 0),Object(i.a)([Object(u.b)()],I.prototype,"sourceJSON",void 0),Object(i.a)([Object(u.b)()],I.prototype,"tags",void 0),Object(i.a)([Object(u.b)()],I.prototype,"thumbnail",void 0),Object(i.a)([Object(u.b)({readOnly:!0})],I.prototype,"thumbnailUrl",null),Object(i.a)([Object(u.b)()],I.prototype,"title",void 0),Object(i.a)([Object(u.b)()],I.prototype,"type",void 0),Object(i.a)([Object(u.b)()],I.prototype,"typeKeywords",void 0),Object(i.a)([Object(u.b)()],I.prototype,"url",void 0),Object(i.a)([Object(u.b)({readOnly:!0})],I.prototype,"userItemUrl",null),I=S=Object(i.a)([Object(y.a)("esri.portal.PortalItem")],I);var T=I},446:function(e,t,r){"use strict";r.d(t,"a",(function(){return n})),r.d(t,"b",(function(){return l}));var i=r(266),a=r(106),s=r(168),o=r(85);async function n(e,t){return await e.load(),l(e,t)}async function l(e,t){const r=[],n=(...e)=>{for(const t of e)Object(o.j)(t)||(Array.isArray(t)?n(...t):a.a.isCollection(t)?t.forEach((e=>n(e))):s.a.isLoadable(t)&&r.push(t))};t(n);let l=null;if(await Object(i.b)(r,(async e=>{!1!==(await Object(i.c)(function(e){return"loadAll"in e&&"function"==typeof e.loadAll}(e)?e.loadAll():e.load())).ok||l||(l=e)})),l)throw l.loadError;return e}},514:function(e,t,r){"use strict";r.d(t,"a",(function(){return O})),r.d(t,"b",(function(){return g})),r.d(t,"c",(function(){return l})),r.d(t,"d",(function(){return o})),r.d(t,"e",(function(){return b})),r.d(t,"f",(function(){return n})),r.d(t,"g",(function(){return d})),r.d(t,"h",(function(){return u})),r.d(t,"i",(function(){return c}));var i=r(108),a=r(111),s=r(105);function o(e){const t=e[0]*e[0]+e[4]*e[4]+e[8]*e[8],r=e[1]*e[1]+e[5]*e[5]+e[9]*e[9],i=e[2]*e[2]+e[6]*e[6]+e[10]*e[10];return Math.sqrt(Math.max(t,r,i))}function n(e,t){const r=Math.sqrt(t[0]*t[0]+t[4]*t[4]+t[8]*t[8]),i=Math.sqrt(t[1]*t[1]+t[5]*t[5]+t[9]*t[9]),s=Math.sqrt(t[2]*t[2]+t[6]*t[6]+t[10]*t[10]);return Object(a.w)(e,r,i,s),e}function l(e,t,r){r=r||e;const i=Object(a.h)(e,t);Object(a.w)(r,e[0]-i*t[0],e[1]-i*t[1],e[2]-i*t[2]),Object(a.r)(r,r)}function c(e,t,r){Math.abs(e[0])>Math.abs(e[1])?Object(a.w)(t,0,1,0):Object(a.w)(t,1,0,0),Object(a.g)(r,e,t),Object(a.r)(t,t),Object(a.g)(t,r,e),Object(a.r)(r,r)}function d(e,t,r,i=Object(s.e)()){const o=Object(a.p)(e),n=Object(a.p)(t),l=Object(a.h)(e,t)/(o*n);if(l<.9999999999999999){const s=Math.acos(l),c=((1-r)*o+r*n)/Math.sin(s),d=c/o*Math.sin((1-r)*s),u=c/n*Math.sin(r*s);return Object(a.e)(j,e,d),Object(a.e)(v,t,u),Object(a.f)(i,j,v)}return Object(a.i)(i,e,t,r)}function u(e,t,r,i=Object(s.e)(),o=Object(s.e)()){const n=Object(a.p)(e),l=Object(a.p)(t),c=Object(a.h)(e,t)/(n*l);if(c<.9999999999999999){const s=Math.acos(c),d=Math.sin(s),u=Math.sin(r*s),p=Math.sin((1-r)*s),b=(1-r)*n+r*l;{const r=b/d,s=r/l*u;Object(a.e)(j,e,r/n*p),Object(a.e)(v,t,s),Object(a.f)(i,j,v)}{const i=1/n*(-Math.cos((1-r)*s)*s*b+p*(-n+l));Object(a.e)(j,e,i);const c=1/l*(Math.cos(r*s)*s*b+u*(-n+l));Object(a.e)(v,t,c),Object(a.f)(o,j,v),Object(a.e)(o,o,1/d)}return o}return Object(a.i)(i,e,t,r),Object(a.j)(o,t,e),Object(a.r)(o,o),o}class p{constructor(e,t){this.min=e,this.max=t,this.range=t-e}ndiff(e,t=0){return Math.ceil((e-t)/this.range)*this.range+t}_normalize(e,t,r,i=0,a=!1){return(r-=i)<e?r+=this.ndiff(e-r):r>t&&(r-=this.ndiff(r-t)),a&&r===t&&(r=e),r+i}normalize(e,t=0,r=!1){return this._normalize(this.min,this.max,e,t,r)}clamp(e,t=0){return Object(i.f)(e-t,this.min,this.max)+t}monotonic(e,t,r){return e<t?t:t+this.ndiff(e-t,r)}minimalMonotonic(e,t,r){return this._normalize(e,e+this.range,t,r)}center(e,t,r){return t=this.monotonic(e,t,r),this.normalize((e+t)/2,r)}diff(e,t,r){return this.monotonic(e,t,r)-e}shortestSignedDiff(e,t){e=this.normalize(e);const r=(t=this.normalize(t))-e,i=t<e?this.minimalMonotonic(e,t)-e:t-this.minimalMonotonic(t,e);return Math.abs(r)<Math.abs(i)?r:i}contains(e,t,r){return t=this.minimalMonotonic(e,t),(r=this.minimalMonotonic(e,r))>e&&r<t}}function b(e,t,r,i){Object(a.j)(h,t,e),Object(a.j)(y,r,e),Object(a.g)(i,h,y),Object(a.r)(i,i),i[3]=-Object(a.h)(e,i)}const h=Object(s.e)(),y=Object(s.e)();function m(e){for(const t in e){const r=e[t];r instanceof Function&&(e[t]=r.bind(e))}return e}m(new p(0,2*Math.PI));const g=m(new p(-Math.PI,Math.PI)),O=m(new p(0,360)),j=(Object(s.e)(),Object(s.e)()),v=Object(s.e)()},554:function(e,t,r){"use strict";r.d(t,"a",(function(){return o}));var i=r(81),a=r(83),s=(r(79),r(84),r(80),r(82));const o=e=>{let t=class extends e{constructor(...e){super(...e),this.goToOverride=null,this.view=null}callGoTo(e){const{view:t}=this;return this.goToOverride?this.goToOverride(t,e):t.goTo(e.target,e.options)}};return Object(i.a)([Object(a.b)()],t.prototype,"goToOverride",void 0),Object(i.a)([Object(a.b)()],t.prototype,"view",void 0),t=Object(i.a)([Object(s.a)("esri.widgets.support.GoTo")],t),t}},558:function(e,t,r){"use strict";r.d(t,"a",(function(){return h}));var i=r(88),a=r(87),s=r(85),o=r(112),n=r(414);const l=new Set(["bing-maps","imagery","imagery-tile","map-image","open-street-map","tile","unknown","unsupported","vector-tile","web-tile","wms","wmts"]),c=new Set(["csv","feature","geo-rss","group","imagery","imagery-tile","kml","map-image","map-notes","ogc-feature","tile","unknown","unsupported","vector-tile","web-tile","wfs","wms","wmts"]);function d(e){return!("feature"!==e.type||e.url||!e.source||"memory"!==e.source.type)}function u(e,t){if(t.restrictedWebMapWriting){const r=function(e){return"basemap"===e.layerContainerType?l:"operational-layers"===e.layerContainerType?c:null}(t);return!Object(s.k)(r)||r.has(e.type)&&!d(e)}return!0}function p(e,t){"maxScale"in e&&(t.maxScale=Object(n.b)(e.maxScale)),"minScale"in e&&(t.minScale=Object(n.b)(e.minScale))}function b(e,t){if(function(e,t){if(d(e)){const r=Object(o.b)("featureCollection.layers",t),i=r&&r[0]&&r[0].layerDefinition;i&&p(e,i)}else"stream"===e.type?p(e,t.layerDefinition=t.layerDefinition||{}):"group"!==e.type&&p(e,t)}(e,t),"blendMode"in e&&(t.blendMode=e.blendMode,"normal"===t.blendMode&&delete t.blendMode),t.opacity=Object(n.b)(e.opacity),t.title=e.title||"Layer",t.visibility=e.visible,"legendEnabled"in e&&"wmts"!==e.type)if(d(e)){const r=t.featureCollection;r&&(r.showLegend=e.legendEnabled)}else t.showLegend=e.legendEnabled}function h(e,t,r){if(!("write"in e)||!e.write)return r&&r.messages&&r.messages.push(new i.a("layer:unsupported",`Layers (${e.title}, ${e.id}) of type '${e.declaredClass}' cannot be persisted`,{layer:e})),null;if(u(e,r)){const t={};return e.write(t,r)?t:null}return Object(s.k)(t)&&b(e,t=Object(a.a)(t)),t}},559:function(e,t,r){"use strict";r.d(t,"a",(function(){return c}));var i=r(81),a=r(86),s=r(83),o=(r(79),r(84),r(80),r(82)),n=r(95);let l=class extends a.a{constructor(e){super(e),this.geometries=null,this.outSpatialReference=null,this.transformation=null,this.transformForward=null}toJSON(){const e=this.geometries.map((function(e){return e.toJSON()})),t=this.geometries[0],r={};return r.outSR=this.outSpatialReference.wkid||JSON.stringify(this.outSpatialReference.toJSON()),r.inSR=t.spatialReference.wkid||JSON.stringify(t.spatialReference.toJSON()),r.geometries=JSON.stringify({geometryType:Object(n.c)(t),geometries:e}),this.transformation&&(r.transformation=this.transformation.wkid||JSON.stringify(this.transformation)),null!=this.transformForward&&(r.transformForward=this.transformForward),r}};Object(i.a)([Object(s.b)()],l.prototype,"geometries",void 0),Object(i.a)([Object(s.b)({json:{read:{source:"outSR"}}})],l.prototype,"outSpatialReference",void 0),Object(i.a)([Object(s.b)()],l.prototype,"transformation",void 0),Object(i.a)([Object(s.b)()],l.prototype,"transformForward",void 0),l=Object(i.a)([Object(o.a)("esri.rest.support.ProjectParameters")],l);var c=l},572:function(e,t){function r(e){return Promise.resolve().then((function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}))}r.keys=function(){return[]},r.resolve=r,e.exports=r,r.id=572},573:function(e,t,r){"use strict";r.d(t,"a",(function(){return u}));var i=r(81),a=r(106),s=r(158),o=r(85),n=r(83),l=(r(79),r(84),r(80),r(82)),c=r(204);let d=class extends(Object(s.b)(a.a)){constructor(e){super(e),this.getCollections=null}initialize(){this.handles.add(Object(c.a)((()=>this.refresh())))}destroy(){this.getCollections=null}refresh(){const e=Object(o.k)(this.getCollections)?this.getCollections():null;if(Object(o.j)(e))return void this.removeAll();let t=0;for(const r of e)Object(o.k)(r)&&(t=this._processCollection(t,r));this.splice(t,this.length)}_createNewInstance(e){return new a.a(e)}_processCollection(e,t){if(!t)return e;const r=this.itemFilterFunction?this.itemFilterFunction:e=>!!e;for(const i of t)if(i){if(r(i)){const t=this.indexOf(i,e);t>=0?t!==e&&this.reorder(i,e):this.add(i,e),++e}if(this.getChildrenFunction){const t=this.getChildrenFunction(i);if(Array.isArray(t))for(const r of t)e=this._processCollection(e,r);else e=this._processCollection(e,t)}}return e}};Object(i.a)([Object(n.b)()],d.prototype,"getCollections",void 0),Object(i.a)([Object(n.b)()],d.prototype,"getChildrenFunction",void 0),Object(i.a)([Object(n.b)()],d.prototype,"itemFilterFunction",void 0),d=Object(i.a)([Object(l.a)("esri.core.CollectionFlattener")],d);var u=d},613:function(e,t,r){"use strict";r.d(t,"a",(function(){return k}));var i,a=r(81),s=r(86),o=r(108),n=r(83),l=(r(79),r(102)),c=(r(80),r(92)),d=r(82),u=r(90),p=r(84),b=r(114),h=r(514);let y=i=class extends s.a{constructor(...e){super(...e),this.position=new b.a([0,0,0]),this.heading=0,this.tilt=0,this.fov=55}normalizeCtorArgs(e,t,r,i){if(e&&"object"==typeof e&&("x"in e||Array.isArray(e))){const a={position:e};return null!=t&&(a.heading=t),null!=r&&(a.tilt=r),null!=i&&(a.fov=i),a}return e}writePosition(e,t,r,i){const a=e.clone();a.x=Object(p.i)(e.x||0),a.y=Object(p.i)(e.y||0),a.z=e.hasZ?Object(p.i)(e.z||0):e.z,t[r]=a.write(null,i)}readPosition(e,t){const r=new b.a;return r.read(e,t),r.x=Object(p.i)(r.x||0),r.y=Object(p.i)(r.y||0),r.z=r.hasZ?Object(p.i)(r.z||0):r.z,r}equals(e){return!!e&&this.tilt===e.tilt&&this.heading===e.heading&&this.fov===e.fov&&this.position.equals(e.position)}clone(){return new i({position:this.position.clone(),heading:this.heading,tilt:this.tilt,fov:this.fov})}};Object(a.a)([Object(n.b)({type:b.a,json:{write:{isRequired:!0}}})],y.prototype,"position",void 0),Object(a.a)([Object(u.a)("position")],y.prototype,"writePosition",null),Object(a.a)([Object(c.a)("position")],y.prototype,"readPosition",null),Object(a.a)([Object(n.b)({type:Number,nonNullable:!0,json:{write:{isRequired:!0}}}),Object(l.a)((e=>h.a.normalize(Object(p.i)(e))))],y.prototype,"heading",void 0),Object(a.a)([Object(n.b)({type:Number,nonNullable:!0,json:{write:{isRequired:!0}}}),Object(l.a)((e=>Object(o.f)(Object(p.i)(e),-180,180)))],y.prototype,"tilt",void 0),Object(a.a)([Object(n.b)({type:Number,nonNullable:!0,json:{read:!1,write:!1}})],y.prototype,"fov",void 0),y=i=Object(a.a)([Object(d.a)("esri.Camera")],y);var m,g=y,O=r(97),j=r(85),v=r(95);let f=m=class extends s.a{constructor(e){super(e),this.rotation=0,this.scale=0,this.targetGeometry=null,this.camera=null}castRotation(e){return(e%=360)<0&&(e+=360),e}clone(){return new m({rotation:this.rotation,scale:this.scale,targetGeometry:Object(j.k)(this.targetGeometry)?this.targetGeometry.clone():null,camera:Object(j.k)(this.camera)?this.camera.clone():null})}};function w(){return{enabled:!this.camera}}Object(a.a)([Object(n.b)({type:Number,json:{write:!0,origins:{"web-map":{default:0,write:!0},"web-scene":{write:{overridePolicy:w}}}}})],f.prototype,"rotation",void 0),Object(a.a)([Object(l.a)("rotation")],f.prototype,"castRotation",null),Object(a.a)([Object(n.b)({type:Number,json:{write:!0,origins:{"web-map":{default:0,write:!0},"web-scene":{write:{overridePolicy:w}}}}})],f.prototype,"scale",void 0),Object(a.a)([Object(n.b)({types:O.a,json:{read:v.a,write:!0,origins:{"web-scene":{read:v.a,write:{overridePolicy:w}}}}})],f.prototype,"targetGeometry",void 0),Object(a.a)([Object(n.b)({type:g,json:{write:!0}})],f.prototype,"camera",void 0),f=m=Object(a.a)([Object(d.a)("esri.Viewpoint")],f);var k=f},615:function(e,t,r){"use strict";r.d(t,"a",(function(){return o})),r.d(t,"b",(function(){return s}));var i=r(160),a=r(188);async function s(e){if(!e)return;const t=e.indexOf("-vector")>-1?e.slice(0,e.indexOf("-vector")):e,r=await Object(a.a)("esri/t9n/basemaps");return r[e]||r[t]}const o={streets:{id:"streets",classic:!0,get thumbnailUrl(){return Object(i.a)("esri/images/basemap/streets.jpg")},baseMapLayers:[{id:"streets-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Street_Map/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Street Map",showLegend:!1,visibility:!0,opacity:1}]},satellite:{id:"satellite",classic:!0,get thumbnailUrl(){return Object(i.a)("esri/images/basemap/satellite.jpg")},baseMapLayers:[{id:"satellite-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Imagery",showLegend:!1,visibility:!0,opacity:1}]},hybrid:{id:"hybrid",classic:!0,get thumbnailUrl(){return Object(i.a)("esri/images/basemap/hybrid.jpg")},baseMapLayers:[{id:"hybrid-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Imagery",showLegend:!1,visibility:!0,opacity:1},{id:"hybrid-reference-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/Reference/World_Boundaries_and_Places/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Boundaries and Places",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},terrain:{id:"terrain",classic:!0,get thumbnailUrl(){return Object(i.a)("esri/images/basemap/terrain.jpg")},baseMapLayers:[{id:"terrain-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Terrain_Base/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Terrain Base",showLegend:!1,visibility:!0,opacity:1},{id:"terrain-reference-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/Reference/World_Reference_Overlay/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Reference Overlay",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},topo:{id:"topo",classic:!0,get thumbnailUrl(){return Object(i.a)("esri/images/basemap/topo.jpg")},baseMapLayers:[{id:"topo-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Topo_Map/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Topo Map",showLegend:!1,visibility:!0,opacity:1}]},gray:{id:"gray",classic:!0,get thumbnailUrl(){return Object(i.a)("esri/images/basemap/gray.jpg")},baseMapLayers:[{id:"gray-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Light_Gray_Base/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Light Gray Base",showLegend:!1,visibility:!0,opacity:1},{id:"gray-reference-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Light_Gray_Reference/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Light Gray Reference",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},"dark-gray":{id:"dark-gray",classic:!0,get thumbnailUrl(){return Object(i.a)("esri/images/basemap/dark-gray.jpg")},baseMapLayers:[{id:"dark-gray-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Dark_Gray_Base/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Dark Gray Base",showLegend:!1,visibility:!0,opacity:1},{id:"dark-gray-reference-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Dark_Gray_Reference/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Dark Gray Reference",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},oceans:{id:"oceans",classic:!0,get thumbnailUrl(){return Object(i.a)("esri/images/basemap/oceans.jpg")},baseMapLayers:[{id:"oceans-base-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Ocean/World_Ocean_Base/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Ocean Base",showLegend:!1,visibility:!0,opacity:1},{id:"oceans-reference-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Ocean/World_Ocean_Reference/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Ocean Reference",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},"national-geographic":{id:"national-geographic",classic:!0,get thumbnailUrl(){return Object(i.a)("esri/images/basemap/national-geographic.jpg")},baseMapLayers:[{id:"national-geographic-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/NatGeo_World_Map/MapServer",title:"NatGeo World Map",showLegend:!1,layerType:"ArcGISTiledMapServiceLayer",visibility:!0,opacity:1}]},osm:{id:"osm",classic:!0,get thumbnailUrl(){return Object(i.a)("esri/images/basemap/osm.jpg")},baseMapLayers:[{id:"osm-base-layer",layerType:"OpenStreetMap",title:"Open Street Map",showLegend:!1,visibility:!0,opacity:1}]},"dark-gray-vector":{id:"dark-gray-vector",classic:!0,get thumbnailUrl(){return Object(i.a)("esri/images/basemap/dark-gray-vector.jpg")},baseMapLayers:[{id:"dark-gray-base-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/5e9b3685f4c24d8781073dd928ebda50/resources/styles/root.json",layerType:"VectorTileLayer",title:"Dark Gray Base",visibility:!0,opacity:1},{id:"dark-gray-reference-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/747cb7a5329c478cbe6981076cc879c5/resources/styles/root.json",layerType:"VectorTileLayer",title:"Dark Gray Reference",isReference:!0,visibility:!0,opacity:1}]},"gray-vector":{id:"gray-vector",classic:!0,get thumbnailUrl(){return Object(i.a)("esri/images/basemap/gray-vector.jpg")},baseMapLayers:[{id:"gray-base-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/291da5eab3a0412593b66d384379f89f/resources/styles/root.json",layerType:"VectorTileLayer",title:"Light Gray Base",visibility:!0,opacity:1},{id:"gray-reference-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/1768e8369a214dfab4e2167d5c5f2454/resources/styles/root.json",layerType:"VectorTileLayer",title:"Light Gray Reference",isReference:!0,visibility:!0,opacity:1}]},"streets-vector":{id:"streets-vector",classic:!0,get thumbnailUrl(){return Object(i.a)("esri/images/basemap/streets-vector.jpg")},baseMapLayers:[{id:"streets-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/de26a3cf4cc9451298ea173c4b324736/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Streets",visibility:!0,opacity:1}]},"topo-vector":{id:"topo-vector",classic:!0,get thumbnailUrl(){return Object(i.a)("esri/images/basemap/topo-vector.jpg")},baseMapLayers:[{id:"world-hillshade-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Hillshade",showLegend:!1,visibility:!0,opacity:1},{id:"topo-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/7dc6cea0b1764a1f9af2e679f642f0f5/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Topo",visibility:!0,opacity:1}]},"streets-night-vector":{id:"streets-night-vector",classic:!0,get thumbnailUrl(){return Object(i.a)("esri/images/basemap/streets-night.jpg")},baseMapLayers:[{id:"streets-night-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/86f556a2d1fd468181855a35e344567f/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Streets Night",visibility:!0,opacity:1}]},"streets-relief-vector":{id:"streets-relief-vector",classic:!0,get thumbnailUrl(){return Object(i.a)("esri/images/basemap/streets-relief.jpg")},baseMapLayers:[{id:"world-hillshade-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Hillshade",showLegend:!1,visibility:!0,opacity:1},{id:"streets-relief-vector-base-layer",styleUrl:"//www.arcgis.com/sharing/rest/content/items/b266e6d17fc345b498345613930fbd76/resources/styles/root.json",title:"World Streets Relief",layerType:"VectorTileLayer",visibility:!0,opacity:1}]},"streets-navigation-vector":{id:"streets-navigation-vector",classic:!0,get thumbnailUrl(){return Object(i.a)("esri/images/basemap/streets-navigation.jpg")},baseMapLayers:[{id:"streets-navigation-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/63c47b7177f946b49902c24129b87252/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Streets Navigation",visibility:!0,opacity:1}]},"arcgis-imagery":{get thumbnailUrl(){return Object(i.a)("esri/images/basemap/hybrid.jpg")},title:"Imagery Hybrid",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Imagery",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/World_Imagery/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Imagery:Labels",title:"Hybrid Reference Layer",isReference:!0}]},"arcgis-imagery-standard":{get thumbnailUrl(){return Object(i.a)("esri/images/basemap/satellite.jpg")},title:"Imagery",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Imagery",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/World_Imagery/MapServer"}]},"arcgis-imagery-labels":{title:"Hybrid [Reference]",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Imagery:Labels",title:"Hybrid Reference Layer",isReference:!0}]},"arcgis-light-gray":{get thumbnailUrl(){return Object(i.a)("esri/images/basemap/gray-vector.jpg")},title:"Light Gray Canvas",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:LightGray:Base",title:"Light Gray Canvas Base"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:LightGray:Labels",title:"Light Gray Canvas Labels",isReference:!0}]},"arcgis-dark-gray":{get thumbnailUrl(){return Object(i.a)("esri/images/basemap/dark-gray.jpg")},title:"Dark Gray Canvas",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:DarkGray:Base",title:"Dark Gray Canvas Base"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:DarkGray:Labels",title:"Dark Gray Canvas Labels",isReference:!0}]},"arcgis-navigation":{get thumbnailUrl(){return Object(i.a)("esri/images/basemap/streets-navigation.jpg")},title:"Navigation",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Navigation",title:"World Navigation Map"}]},"arcgis-navigation-night":{title:"Navigation (Dark Mode)",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:NavigationNight",title:"World Navigation Map (Dark Mode)"}]},"arcgis-streets":{get thumbnailUrl(){return Object(i.a)("esri/images/basemap/streets-vector.jpg")},title:"Streets",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Streets",title:"World Street Map"}]},"arcgis-streets-night":{get thumbnailUrl(){return Object(i.a)("esri/images/basemap/streets-night.jpg")},title:"Streets (Night)",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:StreetsNight",title:"World Street Map (Night)"}]},"arcgis-streets-relief":{get thumbnailUrl(){return Object(i.a)("esri/images/basemap/streets-relief.jpg")},title:"Streets (with Relief)",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:StreetsRelief:Base",title:"World Street Map (with Relief)"}]},"arcgis-topographic":{get thumbnailUrl(){return Object(i.a)("esri/images/basemap/topo.jpg")},title:"Topographic",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Topographic:Base",title:"World Topographic Map"}]},"arcgis-oceans":{get thumbnailUrl(){return Object(i.a)("esri/images/basemap/oceans.jpg")},title:"Oceans",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Ocean Base",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Ocean/World_Ocean_Base/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Oceans:Labels",title:"World Ocean Reference",isReference:!0}]},"osm-standard":{title:"OpenStreetMap",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:Standard",title:"OpenStreetMap"}]},"osm-standard-relief":{title:"OpenStreetMap (with relief)",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:StandardRelief:Base",layerType:"VectorTileLayer",title:"OpenStreetMap Relief Base"}]},"osm-streets":{title:"OpenStreetMap (Streets)",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:Streets",title:"OpenStreetMap (Streets)"}]},"osm-streets-relief":{title:"OpenStreetMap (Streets with relief)",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:StreetsRelief:Base",layerType:"VectorTileLayer",title:"OpenStreetMap Relief Base"}]},"osm-light-gray":{title:"OpenStreetMap (Light Gray Canvas)",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:LightGray:Base",title:"OSM (Light Gray Base)"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:LightGray:Labels",title:"OSM (Light Gray Reference)",isReference:!0}]},"osm-dark-gray":{title:"OpenStreetMap (Dark Gray Canvas)",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:DarkGray:Base",title:"OSM (Dark Gray Base)"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:DarkGray:Labels",title:"OSM (Dark Gray Reference)",isReference:!0}]},"arcgis-terrain":{title:"Terrain with Labels",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Terrain:Base",title:"World Terrain Base"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Terrain:Detail",title:"World Terrain Reference",isReference:!0}]},"arcgis-community":{title:"Community",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Community",title:"Community"}]},"arcgis-charted-territory":{title:"Charted Territory",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:ChartedTerritory:Base",title:"Charted Territory"}]},"arcgis-colored-pencil":{title:"Colored Pencil",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:ColoredPencil",title:"Colored Pencil"}]},"arcgis-nova":{title:"Nova",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Nova",title:"Nova"}]},"arcgis-modern-antique":{title:"Modern Antique",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:ModernAntique:Base",title:"Modern Antique"}]},"arcgis-midcentury":{title:"Mid-Century",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Midcentury",title:"Mid-Century"}]},"arcgis-newspaper":{title:"Newspaper",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Newspaper",title:"Newspaper"}]},"arcgis-hillshade-light":{title:"Hillshade",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"}]},"arcgis-hillshade-dark":{title:"Hillshade (Dark)",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade (Dark)",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade_Dark/MapServer"}]}}},627:function(e,t,r){"use strict";r.d(t,"a",(function(){return a}));var i=r(88);class a{constructor(e,t,r=""){this.major=e,this.minor=t,this._context=r}lessThan(e,t){return this.major<e||e===this.major&&this.minor<t}since(e,t){return!this.lessThan(e,t)}validate(e){if(this.major!==e.major){const t=this._context&&this._context+":",r=this._context&&this._context+" ";throw new i.a(t+"unsupported-version",`Required major ${r}version is '${this.major}', but got '\${version.major}.\${version.minor}'`,{version:e})}}clone(){return new a(this.major,this.minor,this._context)}static parse(e,t=""){const[r,s]=e.split("."),o=/^\s*\d+\s*$/;if(!r||!r.match||!r.match(o))throw new i.a((t&&t+":")+"invalid-version","Expected major version to be a number, but got '${version}'",{version:e});if(!s||!s.match||!s.match(o))throw new i.a((t&&t+":")+"invalid-version","Expected minor version to be a number, but got '${version}'",{version:e});const n=parseInt(r,10),l=parseInt(s,10);return new a(n,l,t)}}},643:function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return I}));var i,a=r(81),s=r(106),o=r(317),n=r(86),l=r(87),c=r(168),d=r(446),u=r(80),p=r(85),b=r(91),h=r(98),y=r(83),m=(r(84),r(79),r(82)),g=r(90),O=r(94),j=r(180),v=r(434),f=r(615),w=r(558);let k=0;const S=u.a.getLogger("esri.Basemap");let _=i=class extends(Object(n.b)(c.a)){constructor(e){super(e),this.id=null,this.portalItem=null,this.spatialReference=null,this.thumbnailUrl=null,this.title="Basemap",this.id=Date.now().toString(16)+"-basemap-"+k++,this.baseLayers=new s.a,this.referenceLayers=new s.a;const t=e=>{e.parent&&e.parent!==this&&"remove"in e.parent&&e.parent.remove(e),e.parent=this,"elevation"===e.type&&S.error(`Layer '${e.title}, id:${e.id}' of type '${e.type}' is not supported as a basemap layer and will therefore be ignored.`)},r=e=>{e.parent=null};this.baseLayers.on("after-add",(e=>t(e.item))),this.referenceLayers.on("after-add",(e=>t(e.item))),this.baseLayers.on("after-remove",(e=>r(e.item))),this.referenceLayers.on("after-remove",(e=>r(e.item)))}initialize(){this.when().catch((e=>{S.error("#load()",`Failed to load basemap (title: '${this.title}', id: '${this.id}')`,e)})),this.resourceInfo&&this.read(this.resourceInfo.data,this.resourceInfo.context)}destroy(){var e;const t=this.baseLayers.removeAll();for(const i of t)i.destroy();const r=this.referenceLayers.removeAll();for(const i of r)i.destroy();this.baseLayers.destroy(),this.referenceLayers.destroy(),null==(e=this.portalItem)||e.destroy(),this.portalItem=null}normalizeCtorArgs(e){return e&&"resourceInfo"in e&&(this._set("resourceInfo",e.resourceInfo),delete(e={...e}).resourceInfo),e}set baseLayers(e){this._set("baseLayers",Object(o.b)(e,this._get("baseLayers")))}_writeBaseLayers(e,t,r){const i=[];e?(r={...r,layerContainerType:"basemap"},this.baseLayers.forEach((e=>{const t=Object(w.a)(e,r.webmap?r.webmap.getLayerJSONFromResourceInfo(e):null,r);Object(p.k)(t)&&i.push(t)})),this.referenceLayers.forEach((e=>{const t=Object(w.a)(e,r.webmap?r.webmap.getLayerJSONFromResourceInfo(e):null,r);Object(p.k)(t)&&(t.isReference=!0,i.push(t))})),t.baseMapLayers=i):t.baseMapLayers=i}set referenceLayers(e){this._set("referenceLayers",Object(o.b)(e,this._get("referenceLayers")))}writeTitle(e,t){t.title=e||"Basemap"}load(e){return this.addResolvingPromise(this._loadFromSource(e)),Promise.resolve(this)}loadAll(){return Object(d.a)(this,(e=>{e(this.baseLayers,this.referenceLayers)}))}clone(){const e={id:this.id,title:this.title,portalItem:this.portalItem,baseLayers:this.baseLayers.slice(),referenceLayers:this.referenceLayers.slice()};return this.loaded&&(e.loadStatus="loaded"),new i({resourceInfo:this.resourceInfo}).set(e)}read(e,t){this.resourceInfo||this._set("resourceInfo",{data:e,context:t}),super.read(e,t)}write(e,t){return e=e||{},t&&t.origin||(t={origin:"web-map",...t}),super.write(e,t),!this.loaded&&this.resourceInfo&&this.resourceInfo.data.baseMapLayers&&(e.baseMapLayers=this.resourceInfo.data.baseMapLayers.map((e=>{const t=Object(l.a)(e);return t.url&&Object(h.w)(t.url)&&(t.url=`https:${t.url}`),t.templateUrl&&Object(h.w)(t.templateUrl)&&(t.templateUrl=`https:${t.templateUrl}`),t}))),e}async _loadFromSource(e){const{resourceInfo:t,portalItem:r}=this;Object(b.v)(e);const i=[];if(t){const r=t.context?t.context.url:null;if(i.push(this._loadLayersFromJSON(t.data,r,e)),t.data.id&&!t.data.title){const e=t.data.id;i.push(Object(f.b)(e).then((e=>{e&&this.read({title:e},t.context)})))}}else r&&i.push(this._loadFromItem(r,e));await Promise.all(i)}async _loadLayersFromJSON(e,t,i){const a=this.resourceInfo&&this.resourceInfo.context,s=this.portalItem&&this.portalItem.portal||a&&a.portal||null,o=a&&"web-scene"===a.origin?"web-scene":"web-map",{populateOperationalLayers:n}=await r.e(142).then(r.bind(null,861)),l=[];if(Object(b.v)(i),e.baseMapLayers&&Array.isArray(e.baseMapLayers)){const r={context:{origin:o,url:t,portal:s,layerContainerType:"basemap"},defaultLayerType:"DefaultTileLayer"},i=n(this.baseLayers,e.baseMapLayers.filter((e=>!e.isReference)),r);l.push(i);const a=n(this.referenceLayers,e.baseMapLayers.filter((e=>e.isReference)),r);l.push(a)}await Object(b.j)(l)}async _loadFromItem(e,t){const r=await e.load(t),i=await r.fetchData("json",t),a=Object(h.K)(e.itemUrl);return this._set("resourceInfo",{data:i.baseMap,context:{origin:"web-map",portal:e.portal||j.a.getDefault(),url:a}}),this.read(this.resourceInfo.data,this.resourceInfo.context),this.read({spatialReference:i.spatialReference},this.resourceInfo.context),this.read({title:e.title,thumbnailUrl:e.thumbnailUrl},{origin:"portal-item",portal:e.portal||j.a.getDefault(),url:a}),this._loadLayersFromJSON(this.resourceInfo.data,a,t)}static fromId(e){const t=f.a[e];return t?i.fromJSON(t):null}};Object(a.a)([Object(y.b)({json:{write:{ignoreOrigin:!0,target:"baseMapLayers",writer(e,t,r,i){this._writeBaseLayers(e,t,i)}},origins:{"web-scene":{write:{ignoreOrigin:!0,target:{baseMapLayers:{type:s.a}},writer(e,t,r,i){this._writeBaseLayers(e,t,i)}}}}}})],_.prototype,"baseLayers",null),Object(a.a)([Object(y.b)({type:String,json:{origins:{"web-scene":{write:!0}}}})],_.prototype,"id",void 0),Object(a.a)([Object(y.b)({type:v.default})],_.prototype,"portalItem",void 0),Object(a.a)([Object(y.b)()],_.prototype,"referenceLayers",null),Object(a.a)([Object(y.b)({readOnly:!0})],_.prototype,"resourceInfo",void 0),Object(a.a)([Object(y.b)({type:O.a})],_.prototype,"spatialReference",void 0),Object(a.a)([Object(y.b)()],_.prototype,"thumbnailUrl",void 0),Object(a.a)([Object(y.b)({type:String,json:{origins:{"web-scene":{write:{isRequired:!0}}}}})],_.prototype,"title",void 0),Object(a.a)([Object(g.a)("title")],_.prototype,"writeTitle",null),_=i=Object(a.a)([Object(m.a)("esri.Basemap")],_);var I=_},654:function(e,t,r){"use strict";r.d(t,"a",(function(){return y})),r.d(t,"b",(function(){return u})),r.d(t,"c",(function(){return p})),r.d(t,"d",(function(){return b})),r.d(t,"e",(function(){return h})),r.d(t,"f",(function(){return m})),r.d(t,"g",(function(){return g}));var i=r(643),a=r(137),s=r(106),o=r(80),n=r(98),l=r(84),c=r(615);const d=o.a.getLogger("esri.support.basemapUtils");function u(){return{}}function p(e){for(const t in e){const r=e[t];!1===(null==r?void 0:r.destroyed)&&r.destroy(),delete e[t]}}function b(e,t){var r;let s;if("string"==typeof e){if(!(e in c.a)){const t=Object.entries(c.a).filter((([e,t])=>a.a.apiKey&&!t.classic||!a.a.apiKey&&t.classic)).map((([e])=>`"${e}"`)).join(", ");return d.warn(`Unable to find basemap definition for: ${e}. Try one of these: ${t}`),null}t&&(s=t[e]),s||(s=i.default.fromId(e),t&&(t[e]=s))}else s=Object(l.m)(i.default,e);return null!=(r=s)&&r.destroyed&&(d.warn("The provided basemap is already destroyed",{basemap:s}),s=null),s}function h(e){let t=null;const r=v(e),i=!r.baseLayers.length;for(const a in c.a){const e=_(r,k(c.a[a]),{mustMatchReferences:i});if("equal"===e){t=a;break}"base-layers-equal"===e&&(t=a)}return t}function y(e,t){return e===t||"equal"===_(v(e),v(t),{mustMatchReferences:!0})}function m(e){return!(null==e||!e.baseLayers.concat(e.referenceLayers).some(g))}function g(e){if(j(e.url))return!0;if("vector-tile"===e.type)for(const t in e.sourceNameToSource){const r=e.sourceNameToSource[t];if(j(null==r?void 0:r.sourceUrl))return!0}return!1}const O=/^(basemaps|ibasemaps).*-api\.arcgis\.com$/i;function j(e){if(!e)return!1;const t=new n.a(Object(n.A)(e));return O.test(t.authority)}function v(e){return e?!e.loaded&&e.resourceInfo?k(e.resourceInfo.data):{baseLayers:f(e.baseLayers),referenceLayers:f(e.referenceLayers)}:null}function f(e){return(s.a.isCollection(e)?e.toArray():e).map(w)}function w(e){return{type:e.type,url:L("urlTemplate"in e&&e.urlTemplate||e.url||"styleUrl"in e&&e.styleUrl),minScale:"minScale"in e&&null!=e.minScale?e.minScale:0,maxScale:"maxScale"in e&&null!=e.maxScale?e.maxScale:0,opacity:null!=e.opacity?e.opacity:1,visible:null==e.visible||!!e.visible}}function k(e){return e?{baseLayers:S(e.baseMapLayers.filter((e=>!e.isReference))),referenceLayers:S(e.baseMapLayers.filter((e=>e.isReference)))}:null}function S(e){return e.map((e=>function(e){let t;switch(e.layerType){case"VectorTileLayer":t="vector-tile";break;case"ArcGISTiledMapServiceLayer":t="tile";break;default:t="unknown"}return{type:t,url:L(e.templateUrl||e.urlTemplate||e.styleUrl||e.url),minScale:null!=e.minScale?e.minScale:0,maxScale:null!=e.maxScale?e.maxScale:0,opacity:null!=e.opacity?e.opacity:1,visible:null==e.visibility||!!e.visibility}}(e)))}function _(e,t,r){return null!=e!=(null!=t)?"not-equal":e?I(e.baseLayers,t.baseLayers)?I(e.referenceLayers,t.referenceLayers)?"equal":r.mustMatchReferences?"not-equal":"base-layers-equal":"not-equal":"equal"}function I(e,t){if(e.length!==t.length)return!1;for(let r=0;r<e.length;r++)if(!T(e[r],t[r]))return!1;return!0}function T(e,t){return e.type===t.type&&e.url===t.url&&e.minScale===t.minScale&&e.maxScale===t.maxScale&&e.visible===t.visible&&e.opacity===t.opacity}function L(e){return e?Object(n.D)(e).replace(/^\s*https?:/i,"").toLowerCase():""}},668:function(e,t,r){"use strict";function i(e){return e&&"getAtOrigin"in e&&"originOf"in e}r.d(t,"a",(function(){return i}))},712:function(e,t,r){"use strict";function i(e,t){if(!a(e,t)){const r=e.typeKeywords;r?r.push(t):e.typeKeywords=[t]}}function a(e,t){return!!e.typeKeywords&&e.typeKeywords.indexOf(t)>-1}function s(e,t){const r=e.typeKeywords;if(r){const e=r.indexOf(t);e>-1&&r.splice(e,1)}}r.d(t,"a",(function(){return i})),r.d(t,"b",(function(){return a})),r.d(t,"c",(function(){return s}))},743:function(e,t,r){"use strict";r.d(t,"a",(function(){return h}));var i=r(81),a=r(106),s=r(317),o=r(80),n=r(91),l=r(83),c=(r(79),r(84),r(82)),d=r(182);function u(e){return e&&"group"===e.type}function p(e,t,r){let i,a;if(e)for(let s=0,o=e.length;s<o;s++){if(i=e.getItemAt(s),i[t]===r)return i;if(u(i)&&(a=p(i.layers,t,r),a))return a}}const b=o.a.getLogger("esri.support.LayersMixin"),h=e=>{let t=class extends e{constructor(...e){super(...e),this.layers=new a.a;const t=e=>{e.parent=this,this.layerAdded(e),"elevation"!==e.type&&"base-elevation"!==e.type||b.error(`Layer 'title:${e.title}, id:${e.id}' of type '${e.type}' is not supported as an operational layer and will therefore be ignored.`)},r=e=>{e.parent=null,this.layerRemoved(e)};this.layers.on("before-add",(e=>(e=>{e.parent&&"remove"in e.parent&&e.parent.remove(e)})(e.item))),this.layers.on("after-add",(e=>t(e.item))),this.layers.on("after-remove",(e=>r(e.item)))}destroy(){const e=this.layers.removeAll();for(const t of e)this.layerRemoved(t),t.destroy();this.layers.destroy()}set layers(e){this._set("layers",Object(s.b)(e,this._get("layers")))}add(e,t){const r=this.layers;if(t=r.getNextIndex(t),e instanceof d.a){const i=e;i.parent===this?this.reorder(i,t):r.add(i,t)}else Object(n.p)(e)?e.then((e=>{this.destroyed||this.add(e,t)})):b.error("#add()","The item being added is not a Layer or a Promise that resolves to a Layer.")}addMany(e,t){const r=this.layers;t=r.getNextIndex(t),e.slice().forEach((e=>{e.parent!==this?(r.add(e,t),t+=1):this.reorder(e,t)}))}findLayerById(e){return p(this.layers,"id",e)}findLayerByUid(e){return p(this.layers,"uid",e)}remove(e){return this.layers.remove(e)}removeMany(e){return this.layers.removeMany(e)}removeAll(){return this.layers.removeAll()}reorder(e,t){return this.layers.reorder(e,t)}layerAdded(e){}layerRemoved(e){}};return Object(i.a)([Object(l.b)()],t.prototype,"layers",null),t=Object(i.a)([Object(c.a)("esri.support.LayersMixin")],t),t}},744:function(e,t,r){"use strict";r.d(t,"a",(function(){return b}));var i=r(81),a=r(106),s=r(317),o=r(80),n=r(83),l=(r(79),r(84),r(82));const c="esri.support.TablesMixin",d=o.a.getLogger(c);function u(e){return e&&"group"===e.type}function p(e,t,r){if(e)for(let i=0,a=e.length;i<a;i++){const a=e.getItemAt(i);if(a[t]===r)return a;if(u(a)){const e=p(a.tables,t,r);if(e)return e}}}const b=e=>{let t=class extends e{constructor(...e){super(...e),this.tables=new a.a,this.tables.on("after-add",(e=>{const t=e.item;t.parent&&t.parent!==this&&"tables"in t.parent&&t.parent.tables.remove(t),t.parent=this,"feature"!==t.type&&d.error(`Layer 'title:${t.title}, id:${t.id}' of type '${t.type}' is not supported as a table and will therefore be ignored.`)})),this.tables.on("after-remove",(e=>{e.item.parent=null}))}destroy(){const e=this.tables.removeAll();for(const t of e)t.destroy();this.tables.destroy()}set tables(e){this._set("tables",Object(s.b)(e,this._get("tables")))}findTableById(e){return p(this.tables,"id",e)}findTableByUid(e){return p(this.tables,"uid",e)}};return Object(i.a)([Object(n.b)()],t.prototype,"tables",null),t=Object(i.a)([Object(l.a)(c)],t),t}},745:function(e,t,r){"use strict";r.d(t,"a",(function(){return a}));var i=r(668);function a(e){e&&e.writtenProperties&&e.writtenProperties.forEach((e=>{const t=e.target;e.newOrigin&&e.oldOrigin!==e.newOrigin&&Object(i.a)(t)&&t.updateOrigin(e.propName,e.newOrigin)}))}},867:function(e,t,r){"use strict";r.d(t,"a",(function(){return u}));var i,a=r(81),s=r(104),o=r(86),n=r(87),l=r(83),c=(r(84),r(79),r(80),r(82));let d=i=class extends o.a{constructor(e){super(e),this.color=new s.a([0,0,0,1])}clone(){return new i(Object(n.a)({color:this.color}))}};Object(a.a)([Object(l.b)({type:s.a,json:{write:!0}})],d.prototype,"color",void 0),d=i=Object(a.a)([Object(c.a)("esri.webmap.background.ColorBackground")],d);var u=d},910:function(e,t,r){"use strict";r.d(t,"a",(function(){return c}));var i,a=r(81),s=r(86),o=r(83),n=(r(79),r(84),r(80),r(82));let l=i=class extends s.a{constructor(){super(...arguments),this.url=""}destroy(){this.url=""}clone(){return new i({url:this.url})}};Object(a.a)([Object(o.b)({type:String,json:{write:{isRequired:!0}}})],l.prototype,"url",void 0),l=i=Object(a.a)([Object(n.a)("esri.webdoc.support.Thumbnail")],l);var c=l},93:function(e,t,r){"use strict";r.d(t,"a",(function(){return s}));var i=r(89),a=r(83);function s(e,t={}){var r;const s=e instanceof i.a?e:new i.a(e,t),o={type:null==(r=null==t?void 0:t.ignoreUnknown)||r?s.apiValues:String,readOnly:null==t?void 0:t.readOnly,json:{type:s.jsonValues,read:(null==t||!t.readOnly)&&{reader:s.read},write:{writer:s.write}}};return void 0!==(null==t?void 0:t.default)&&(o.json.default=t.default),void 0!==(null==t?void 0:t.name)&&(o.json.name=t.name),Object(a.b)(o)}},966:function(e,t,r){"use strict";r.d(t,"a",(function(){return D}));var i,a=r(81),s=r(643),o=r(104),n=r(106),l=r(317),c=r(205),d=r(88),u=r(86),p=r(87),b=r(168),h=r(446),y=r(80),m=r(91),g=r(83),O=r(84),j=(r(79),r(82)),v=r(90),f=r(93);let w=i=class extends u.a{constructor(e){super(e),this.type="none"}clone(){return new i({type:this.type})}};Object(a.a)([Object(f.a)({none:"none",stayAbove:"stay-above"})],w.prototype,"type",void 0),w=i=Object(a.a)([Object(j.a)("esri.ground.NavigationConstraint")],w);var k,S=r(240);const _=y.a.getLogger("esri.Ground");let I=k=class extends(Object(u.b)(b.a)){constructor(e){super(e),this.opacity=1,this.surfaceColor=null,this.navigationConstraint=null,this.layers=new n.a;const t=e=>{e.parent&&e.parent!==this&&"remove"in e.parent&&e.parent.remove(e),e.parent=this,"elevation"!==e.type&&"base-elevation"!==e.type&&_.error(`Layer '${e.title}, id:${e.id}' of type '${e.type}' is not supported as a ground layer and will therefore be ignored. Only layers of type 'elevation' are supported.`)};this.layers.on("after-add",(e=>t(e.item))),this.layers.on("after-remove",(e=>(e=>{e.parent=null})(e.item)))}initialize(){this.when().catch((e=>{_.error("#load()","Failed to load ground",e)})),this.resourceInfo&&this.read(this.resourceInfo.data,this.resourceInfo.context)}destroy(){const e=this.layers.removeAll();for(const t of e)t.destroy();this.layers.destroy()}normalizeCtorArgs(e){return e&&"resourceInfo"in e&&(this._set("resourceInfo",e.resourceInfo),delete(e={...e}).resourceInfo),e}set layers(e){this._set("layers",Object(l.b)(e,this._get("layers")))}writeLayers(e,t,r,i){const a=[];e?(i={...i,layerContainerType:"ground"},e.forEach((e=>{if("write"in e){const t={};Object(c.b)(e)().write(t,i)&&a.push(t)}else i&&i.messages&&i.messages.push(new d.a("layer:unsupported",`Layers (${e.title}, ${e.id}) of type '${e.declaredClass}' cannot be persisted in the ground`,{layer:e}))})),t.layers=a):t.layers=a}load(e){return this.addResolvingPromise(this._loadFromSource(e)),Promise.resolve(this)}loadAll(){return Object(h.a)(this,(e=>{e(this.layers)}))}async queryElevation(e,t){await this.load({signal:null==t?void 0:t.signal});const{ElevationQuery:i}=await Promise.all([r.e(6),r.e(25),r.e(50)]).then(r.bind(null,1361));Object(m.v)(t);const a=new i,s=this.layers.filter(T).toArray();return a.queryAll(s,e,t)}async createElevationSampler(e,t){await this.load({signal:null==t?void 0:t.signal});const{ElevationQuery:i}=await Promise.all([r.e(6),r.e(25),r.e(50)]).then(r.bind(null,1361));Object(m.v)(t);const a=new i,s=this.layers.filter(T).toArray();return a.createSamplerAll(s,e,t)}clone(){const e={opacity:this.opacity,surfaceColor:Object(p.a)(this.surfaceColor),navigationConstraint:Object(p.a)(this.navigationConstraint),layers:this.layers.slice()};return this.loaded&&(e.loadStatus="loaded"),new k({resourceInfo:this.resourceInfo}).set(e)}read(e,t){this.resourceInfo||this._set("resourceInfo",{data:e,context:t}),super.read(e,t)}_loadFromSource(e){const t=this.resourceInfo;return t?this._loadLayersFromJSON(t.data,t.context,e):Promise.resolve(null)}_loadLayersFromJSON(e,t,i){const a=t&&t.origin||"web-scene",s=t&&t.portal||null,o=t&&t.url||null;return r.e(47).then(r.bind(null,861)).then((({populateOperationalLayers:t})=>{Object(m.v)(i);const r=[];if(e.layers&&Array.isArray(e.layers)){const i={context:{origin:a,url:o,portal:s,layerContainerType:"ground"},defaultLayerType:"ArcGISTiledElevationServiceLayer"};r.push(t(this.layers,e.layers,i))}return Object(m.j)(r)})).then((()=>{}))}};function T(e){return"elevation"===e.type||function(e){return e&&"createElevationSampler"in e}(e)}Object(a.a)([Object(g.b)({json:{read:!1}})],I.prototype,"layers",null),Object(a.a)([Object(v.a)("layers")],I.prototype,"writeLayers",null),Object(a.a)([Object(g.b)({readOnly:!0})],I.prototype,"resourceInfo",void 0),Object(a.a)([Object(g.b)({type:Number,nonNullable:!0,range:{min:0,max:1},json:{type:O.a,read:{reader:S.b,source:"transparency"},write:{writer:(e,t)=>{t.transparency=Object(S.a)(e)},target:"transparency"}}})],I.prototype,"opacity",void 0),Object(a.a)([Object(g.b)({type:o.a,json:{type:[O.a],write:(e,t)=>{t.surfaceColor=e.toJSON().slice(0,3)}}})],I.prototype,"surfaceColor",void 0),Object(a.a)([Object(g.b)({type:w,json:{write:!0}})],I.prototype,"navigationConstraint",void 0),I=k=Object(a.a)([Object(j.a)("esri.Ground")],I);var L=I,M=r(96),x=r(573),A=r(125),U=r(102);function N(e){var t;return!!(e&&e.loaded&&"capabilities"in e&&null!=e&&null!=(t=e.capabilities)&&t.operations&&"supportsEditing"in e.capabilities.operations&&!0===e.capabilities.operations.supportsEditing)&&!("editingEnabled"in e&&!e.editingEnabled)}var B=r(654);const E=y.a.getLogger("esri.support.groundUtils"),C={"world-elevation":{id:"worldElevation",url:"//elevation3d.arcgis.com/arcgis/rest/services/WorldElevation3D/Terrain3D/ImageServer",layerType:"ArcGISTiledElevationServiceLayer"},"world-topobathymetry":{id:"worldTopoBathymetry",url:"//elevation3d.arcgis.com/arcgis/rest/services/WorldElevation3D/TopoBathy3D/ImageServer",layerType:"ArcGISTiledElevationServiceLayer"}};var R=r(743),F=r(744);const G=y.a.getLogger("esri.Map");let P=class extends(Object(F.a)(Object(R.a)(A.a.EventedMixin(M.a)))){constructor(e){super(e),this.allLayers=new x.a({getCollections:()=>{var e,t,r;return[null==(e=this.basemap)?void 0:e.baseLayers,null==(t=this.ground)?void 0:t.layers,this.layers,null==(r=this.basemap)?void 0:r.referenceLayers]},getChildrenFunction:e=>"layers"in e?e.layers:null}),this.allTables=new x.a({getCollections:()=>[this.tables,this.layers],getChildrenFunction:e=>{const t=[];return"tables"in e&&t.push(e.tables),"layers"in e&&t.push(e.layers),t},itemFilterFunction:e=>{const t=e.parent;return t&&"tables"in t&&t.tables.includes(e)}}),this.basemap=null,this.editableLayers=new x.a({getCollections:()=>[this.allLayers],itemFilterFunction:N}),this.ground=new L,this._basemapCache=Object(B.b)()}destroy(){var e,t;this.allLayers.destroy(),this.allTables.destroy(),this.editableLayers.destroy(),null==(e=this.ground)||e.destroy(),null==(t=this.basemap)||t.destroy(),Object(B.c)(this._basemapCache),this._basemapCache=null}castBasemap(e){return Object(B.d)(e,this._basemapCache)}castGround(e){return function(e){let t;"string"==typeof e?e in C?t=new L({resourceInfo:{data:{layers:[C[e]]}}}):E.warn(`Unable to find ground definition for: ${e}. Try "world-elevation"`):t=Object(O.m)(L,e);return t}(e)||(G.error("Map.ground may not be set to null or undefined"),this._get("ground"))}findLayerById(e){return this.allLayers.find((t=>t.id===e))}findTableById(e){return this.allTables.find((t=>t.id===e))}};Object(a.a)([Object(g.b)({readOnly:!0,dependsOn:[]})],P.prototype,"allLayers",void 0),Object(a.a)([Object(g.b)({readOnly:!0})],P.prototype,"allTables",void 0),Object(a.a)([Object(g.b)({type:s.default})],P.prototype,"basemap",void 0),Object(a.a)([Object(U.a)("basemap")],P.prototype,"castBasemap",null),Object(a.a)([Object(g.b)({readOnly:!0})],P.prototype,"editableLayers",void 0),Object(a.a)([Object(g.b)({type:L,nonNullable:!0})],P.prototype,"ground",void 0),Object(a.a)([Object(U.a)("ground")],P.prototype,"castGround",null),P=Object(a.a)([Object(j.a)("esri.Map")],P);var D=P},985:function(e,t,r){"use strict";r.d(t,"a",(function(){return S}));var i,a=r(81),s=r(613),o=r(310),n=r(88),l=r(144),c=r(86),d=r(87),u=r(80),p=r(85),b=r(83),h=r(102),y=(r(79),r(92)),m=r(82),g=r(90),O=r(84),j=r(99),v=r(910);const f="esri.webmap.Bookmark",w=u.a.getLogger(f);let k=i=class extends(Object(l.a)(c.a)){constructor(e){super(e),this.name=null,this.thumbnail=new v.a}set extent(e){Object(o.d)(w,"extent",{replacement:"viewpoint",version:"4.17"}),this._set("viewpoint",new s.a({targetGeometry:e.clone()})),this._set("extent",e)}castThumbnail(e){return"string"==typeof e?new v.a({url:e}):Object(O.m)(v.a,e)}set viewpoint(e){const{targetGeometry:t,scale:r}=e;Object(p.k)(t)&&("extent"===t.type?this._set("extent",t.clone()):"point"===t.type&&Object(p.j)(r)&&w.warn("Bookmark.viewpoint should include 'scale' when its targetGeometry is a point.",e)),this._set("viewpoint",e)}readViewpoint(e,t){const{extent:r,viewpoint:i}=t;return s.a.fromJSON(i||{targetGeometry:r})}writeViewpoint(e,t,r,i){if(!e)return;const{targetGeometry:a}=e;if(Object(p.k)(a)&&"extent"!==a.type){const e="Bookmark.viewpoint cannot be written to JSON when the viewpoint's targetGeometry is not an extent.";null!=i&&i.messages?i.messages.push(new n.a("property:unsupported",e)):w.error(e)}else t[r]=e.toJSON()}clone(){return new i(Object(d.a)({name:this.name,thumbnail:this.thumbnail,viewpoint:this.viewpoint}))}};Object(a.a)([Object(b.b)({type:j.a,nonNullable:!0,json:{read:!1,write:{isRequired:!0}}})],k.prototype,"extent",null),Object(a.a)([Object(b.b)({type:String,nonNullable:!0,json:{write:{isRequired:!0}}})],k.prototype,"name",void 0),Object(a.a)([Object(b.b)({type:v.a,json:{write:{overridePolicy:e=>({enabled:!(!e||!e.url)})}}})],k.prototype,"thumbnail",void 0),Object(a.a)([Object(h.a)("thumbnail")],k.prototype,"castThumbnail",null),Object(a.a)([Object(b.b)({type:s.a,nonNullable:!0,json:{write:!0}})],k.prototype,"viewpoint",null),Object(a.a)([Object(y.a)("viewpoint",["extent","viewpoint"])],k.prototype,"readViewpoint",null),Object(a.a)([Object(g.a)("viewpoint")],k.prototype,"writeViewpoint",null),k=i=Object(a.a)([Object(m.a)(f)],k);var S=k}}]);
//# sourceMappingURL=104.4a7e8e62.chunk.js.map