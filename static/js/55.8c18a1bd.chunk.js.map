{"version":3,"sources":["../node_modules/@arcgis/core/layers/graphics/sources/support/sourceUtils.js","../node_modules/@arcgis/core/layers/graphics/objectIdUtils.js","../node_modules/@arcgis/core/layers/graphics/sources/support/MemorySourceWorker.js","../node_modules/@arcgis/core/core/libs/rbush/PooledRBush.js","../node_modules/@arcgis/core/layers/graphics/data/BoundsStore.js","../node_modules/@arcgis/core/layers/graphics/sources/support/clientSideDefaults.js","../node_modules/@arcgis/core/layers/graphics/data/optimizedFeatureQueryEngineAdapter.js","../node_modules/@arcgis/core/layers/graphics/data/FeatureStore.js"],"names":["o","this","code","description","l","t","error","globalId","objectId","success","uniqueId","u","a","c","p","f","Set","d","e","r","s","clear","get","m","push","name","message","details","field","originalValue","sanitizedValue","add","editable","n","i","has","parseFloat","String","h","TypeError","simplify","g","y","attributes","isFinite","Math","max","x","T","xmin","ymin","xmax","ymax","spatialReference","q","hasAttachments","capabilities","useStandardizedQueries","supportsCoordinatesQuantization","supportsReturningQueryGeometry","advancedQueryCapabilities","supportsQueryAttachments","supportsStatistics","supportsPercentileStatistics","supportsReturningGeometryCentroid","supportsQueryWithDistance","supportsDistinct","supportsReturningQueryExtent","supportsReturningGeometryProperties","supportsHavingClause","supportsOrderBy","supportsPagination","supportsQueryWithResultType","supportsSqlExpression","supportsDisjointSpatialRel","R","z","hasZ","D","hasM","O","_queryEngine","_nextObjectId","destroy","_requiredFields","_fieldsIndex","_createDefaultAttributes","features","_inferLayerProperties","fields","b","F","_","j","geometryType","E","objectIdField","timeInfo","some","type","nullable","unshift","alias","jsonValues","indexOf","startTimeField","endTimeField","trackIdField","w","warnings","featureErrors","layerDefinition","drawingInfo","templates","extent","assignedObjectIds","I","featureStore","cacheSpatialQueries","length","S","_loadInitialFeatures","Promise","all","adds","updates","_applyEdits","executeQuery","signal","executeQueryForCount","executeQueryForIds","executeQueryForExtent","executeQueryForSnapping","geometry","toLowerCase","uid","_assignObjectId","addMany","fullExtent","timeExtent","start","end","deletes","addResults","deleteResults","updateResults","uidToObjectId","_applyAddEdits","_applyUpdateEdits","removeManyById","featureEditResults","getFeature","compareMinX","compareMinY","toBBox","_maxEntries","_minEntries","ceil","_initFormat","M","prune","X","Y","B","_all","data","children","leaf","pop","insert","_build","slice","height","_splitRoot","_insert","indexHint","splice","_condense","pushArray","log","sqrt","min","_chooseSubtree","_split","_adjustParentBBoxes","_chooseSplitAxis","_chooseSplitIndex","console","_allDistMargin","sort","Function","join","minX","minY","maxX","maxY","deallocator","arguments","_indexInvalid","_boundsToLoad","_boundsById","Map","_idByBounds","_index","_loadIndex","Array","size","forEach","load","filter","delete","remove","search","set","renderer","symbol","JSON","stringify","prototype","getObjectId","getAttributes","getAttribute","cloneWithGeometry","getGeometry","getCentroid","centroid","geometryInfo","_boundsStore","_featuresById","_markedIds","events","featureAdapter","numFeatures","coords","featureCount","vertexCount","_add","_emitChanged","_remove","invalidateIndex","forEachInBounds","emit","displayId","onFeatureAdd","getLogger","feature","onFeatureRemove"],"mappings":"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","file":"static/js/55.8c18a1bd.chunk.js","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{isValid as t}from\"../../../../geometry/support/spatialReferenceUtils.js\";import{sanitizeNullFieldValue as e,validateFieldValue as n,validationErrorToString as i,isNumericField as r,isStringField as s}from\"../../../support/fieldUtils.js\";class o{constructor(){this.code=null,this.description=null}}class l{constructor(t){this.error=new o,this.globalId=null,this.objectId=null,this.success=!1,this.uniqueId=null,this.error.description=t}}function u(t){return new l(t)}class a{constructor(t){this.globalId=null,this.success=!0,this.objectId=this.uniqueId=t}}function c(t){return new a(t)}const f=new Set;function d(t,e,r,s,o=!1,l){f.clear();for(const a in s){const e=t.get(a);if(!e)continue;const c=s[a],d=m(e,c);if(d!==c&&l&&l.push({name:\"invalid-value-type\",message:\"attribute value was converted to match the field type\",details:{field:e,originalValue:c,sanitizedValue:d}}),f.add(e.name),e&&(o||e.editable)){const t=n(e,d);if(t)return u(i(t,e,d));r[e.name]=d}}for(const n of e)if(!f.has(n.name))return u(`missing required field \"${n.name}\"`);return null}function m(t,n){let i=n;return\"string\"==typeof n&&r(t)?i=parseFloat(n):null!=n&&s(t)&&\"string\"!=typeof n&&(i=String(n)),e(i)}let p;function h(e,n){if(!e||!t(n))return e;if(\"rings\"in e||\"paths\"in e){if(!p)throw new TypeError(\"geometry engine not loaded\");return p.simplify(n,e)}return e}async function g(){return p||(p=await import(\"../../../../geometry/geometryEngineJSON.js\"),p)}async function y(e,n){!t(e)||\"esriGeometryPolygon\"!==n&&\"esriGeometryPolyline\"!==n||await g()}export{u as createFeatureEditErrorResult,c as createFeatureEditSuccessResult,g as loadGeometryEngine,y as loadGeometryEngineForSimplify,d as mixAttributes,h as simplify};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nconst t=1;function n(t,n){let o=0;for(const r of n){var e;const n=null==(e=r.attributes)?void 0:e[t];\"number\"==typeof n&&isFinite(n)&&(o=Math.max(o,n))}return o}export{n as findLastObjectIdFromFeatures,t as initialObjectId};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport e from\"../../../../core/Error.js\";import{WGS84 as t}from\"../../../../geometry/support/spatialReferenceUtils.js\";import{getJsonType as i,isPoint as s}from\"../../../../geometry/support/jsonUtils.js\";import{getFieldDefaultValue as r}from\"../../../support/fieldUtils.js\";import{kebabDict as n}from\"../../../support/fieldType.js\";import{convertFromFeatures as a,convertToFeature as l,convertFromFeature as o}from\"../../featureConversionUtils.js\";import d from\"../../../support/FieldsIndex.js\";import{initialObjectId as u,findLastObjectIdFromFeatures as p}from\"../../objectIdUtils.js\";import{createDefaultAttributesFunction as f,createDrawingInfo as y,createDefaultTemplate as c}from\"./clientSideDefaults.js\";import{checkProjectionSupport as m,project as h}from\"../../data/projectionSupport.js\";import g from\"../../data/FeatureStore.js\";import I from\"../../data/QueryEngine.js\";import{loadGeometryEngineForSimplify as b,createFeatureEditErrorResult as F,mixAttributes as _,createFeatureEditSuccessResult as j,simplify as E}from\"./sourceUtils.js\";const x=t,T={xmin:-180,ymin:-90,xmax:180,ymax:90,spatialReference:t},q={hasAttachments:!1,capabilities:\"query, editing, create, delete, update\",useStandardizedQueries:!0,supportsCoordinatesQuantization:!0,supportsReturningQueryGeometry:!0,advancedQueryCapabilities:{supportsQueryAttachments:!1,supportsStatistics:!0,supportsPercentileStatistics:!0,supportsReturningGeometryCentroid:!0,supportsQueryWithDistance:!0,supportsDistinct:!0,supportsReturningQueryExtent:!0,supportsReturningGeometryProperties:!1,supportsHavingClause:!0,supportsOrderBy:!0,supportsPagination:!0,supportsQueryWithResultType:!1,supportsSqlExpression:!0,supportsDisjointSpatialRel:!0}};function R(e){return s(e)?null!=e.z:!!e.hasZ}function D(e){return s(e)?null!=e.m:!!e.hasM}class O{constructor(){this._queryEngine=null,this._nextObjectId=null}destroy(){this._queryEngine&&this._queryEngine&&this._queryEngine.destroy(),this._queryEngine=this._requiredFields=this._fieldsIndex=this._createDefaultAttributes=null}async load(t){const i=[],{features:s}=t,a=this._inferLayerProperties(s,t.fields),l=t.fields||[],o=null!=t.hasM?t.hasM:a.hasM,h=null!=t.hasZ?t.hasZ:a.hasZ,b=!t.spatialReference&&!a.spatialReference,F=b?x:t.spatialReference||a.spatialReference,_=b?T:null,j=t.geometryType||a.geometryType,E=!j;let R=t.objectIdField||a.objectIdField,D=t.timeInfo;if(!E&&(b&&i.push({name:\"feature-layer:spatial-reference-not-found\",message:\"Spatial reference not provided or found in features. Defaults to WGS84\"}),!j))throw new e(\"feature-layer:missing-property\",\"geometryType not set and couldn't be inferred from the provided features\");if(!R)throw new e(\"feature-layer:missing-property\",\"objectIdField not set and couldn't be found in the provided fields\");if(a.objectIdField&&R!==a.objectIdField&&(i.push({name:\"feature-layer:duplicated-oid-field\",message:`Provided objectIdField \"${R}\" doesn't match the field name \"${a.objectIdField}\", found in the provided fields`}),R=a.objectIdField),R&&!a.objectIdField){let e=null;l.some((t=>t.name===R&&(e=t,!0)))?(e.type=\"esriFieldTypeOID\",e.editable=!1,e.nullable=!1):l.unshift({alias:R,name:R,type:\"esriFieldTypeOID\",editable:!1,nullable:!1})}for(const r of l){if(null==r.name&&(r.name=r.alias),null==r.alias&&(r.alias=r.name),!r.name)throw new e(\"feature-layer:invalid-field-name\",\"field name is missing\",{field:r});if(r.name===R&&(r.type=\"esriFieldTypeOID\"),-1===n.jsonValues.indexOf(r.type))throw new e(\"feature-layer:invalid-field-type\",`invalid type for field \"${r.name}\"`,{field:r})}const O={};this._requiredFields=[];for(const e of l)if(\"esriFieldTypeOID\"!==e.type&&\"esriFieldTypeGlobalID\"!==e.type){e.editable=null==e.editable||!!e.editable,e.nullable=null==e.nullable||!!e.nullable;const t=r(e);e.nullable||void 0!==t?O[e.name]=t:this._requiredFields.push(e)}if(this._fieldsIndex=new d(l),this._createDefaultAttributes=f(O,R),D){if(D.startTimeField){const e=this._fieldsIndex.get(D.startTimeField);e?(D.startTimeField=e.name,e.type=\"esriFieldTypeDate\"):D.startTimeField=null}if(D.endTimeField){const e=this._fieldsIndex.get(D.endTimeField);e?(D.endTimeField=e.name,e.type=\"esriFieldTypeDate\"):D.endTimeField=null}if(D.trackIdField){const e=this._fieldsIndex.get(D.trackIdField);e?D.trackIdField=e.name:(D.trackIdField=null,i.push({name:\"feature-layer:invalid-timeInfo-trackIdField\",message:\"trackIdField is missing\",details:{timeInfo:D}}))}D.startTimeField||D.endTimeField||(i.push({name:\"feature-layer:invalid-timeInfo\",message:\"startTimeField and endTimeField are missing or invalid\",details:{timeInfo:D}}),D=null)}const w={warnings:i,featureErrors:[],layerDefinition:{...q,drawingInfo:y(j),templates:c(O),extent:_,geometryType:j,objectIdField:R,fields:l,hasZ:!!h,hasM:!!o,timeInfo:D},assignedObjectIds:{}};if(this._queryEngine=new I({fields:l,geometryType:j,hasM:o,hasZ:h,objectIdField:R,spatialReference:F,featureStore:new g({geometryType:j,hasM:o,hasZ:h}),timeInfo:D,cacheSpatialQueries:!0}),!s||!s.length)return this._nextObjectId=u,w;const S=p(R,s);return this._nextObjectId=S+1,await m(s,F),this._loadInitialFeatures(w,s)}async applyEdits(e){const{spatialReference:t,geometryType:i}=this._queryEngine;return await Promise.all([b(t,i),m(e.adds,t),m(e.updates,t)]),this._applyEdits(e)}queryFeatures(e,t={}){return this._queryEngine.executeQuery(e,t.signal)}queryFeatureCount(e,t={}){return this._queryEngine.executeQueryForCount(e,t.signal)}queryObjectIds(e,t={}){return this._queryEngine.executeQueryForIds(e,t.signal)}queryExtent(e,t={}){return this._queryEngine.executeQueryForExtent(e,t.signal)}querySnapping(e,t={}){return this._queryEngine.executeQueryForSnapping(e,t.signal)}_inferLayerProperties(e,t){let s,r,n=null,a=null,l=null;for(const o of e){const e=o.geometry;if(e&&(n||(n=i(e)),a||(a=e.spatialReference),null==s&&(s=R(e)),null==r&&(r=D(e)),n&&a&&null!=s&&null!=r))break}if(t&&t.length){let e=null;t.some((t=>{const i=\"esriFieldTypeOID\"===t.type,s=!t.type&&t.name&&\"objectid\"===t.name.toLowerCase();return e=t,i||s}))&&(l=e.name)}return{geometryType:n,spatialReference:a,objectIdField:l,hasM:r,hasZ:s}}_loadInitialFeatures(e,t){const{geometryType:s,hasM:r,hasZ:n,objectIdField:l,spatialReference:o,featureStore:d}=this._queryEngine,u=[];for(const a of t){if(null!=a.uid&&(e.assignedObjectIds[a.uid]=-1),a.geometry&&s!==i(a.geometry)){e.featureErrors.push(F(\"Incorrect geometry type.\"));continue}const t=this._createDefaultAttributes(),r=_(this._fieldsIndex,this._requiredFields,t,a.attributes,!0,e.warnings);r?e.featureErrors.push(r):(this._assignObjectId(t,a.attributes,!0),a.attributes=t,null!=a.uid&&(e.assignedObjectIds[a.uid]=a.attributes[l]),a.geometry&&(a.geometry=h(a.geometry,a.geometry.spatialReference,o)),u.push(a))}if(d.addMany(a([],u,s,n,r,l)),e.layerDefinition.extent=this._queryEngine.fullExtent,e.layerDefinition.timeInfo){const{start:t,end:i}=this._queryEngine.timeExtent;e.layerDefinition.timeInfo.timeExtent=[t,i]}return e}_applyEdits(e){const{adds:t,updates:i,deletes:s}=e,r={addResults:[],deleteResults:[],updateResults:[],uidToObjectId:{}};if(t&&t.length&&this._applyAddEdits(r,t),i&&i.length&&this._applyUpdateEdits(r,i),s&&s.length){for(const e of s)r.deleteResults.push(j(e));this._queryEngine.featureStore.removeManyById(s)}return{fullExtent:this._queryEngine.fullExtent,featureEditResults:r}}_applyAddEdits(e,t){const{addResults:s}=e,{geometryType:r,hasM:n,hasZ:l,objectIdField:o,spatialReference:d,featureStore:u}=this._queryEngine,p=[];for(const a of t){if(a.geometry&&r!==i(a.geometry)){s.push(F(\"Incorrect geometry type.\"));continue}const t=this._createDefaultAttributes(),n=_(this._fieldsIndex,this._requiredFields,t,a.attributes);if(n)s.push(n);else{if(this._assignObjectId(t,a.attributes),a.attributes=t,null!=a.uid){const t=a.attributes[o];e.uidToObjectId[a.uid]=t}a.geometry&&(a.geometry=h(E(a.geometry,d),a.geometry.spatialReference,d)),p.push(a),s.push(j(a.attributes[o]))}}u.addMany(a([],p,r,l,n,o))}_applyUpdateEdits({updateResults:e},t){const{geometryType:s,hasM:r,hasZ:n,objectIdField:a,spatialReference:d,featureStore:u}=this._queryEngine;for(const p of t){const{attributes:t,geometry:f}=p,y=t&&t[a];if(null==y){e.push(F(`Identifier field ${a} missing`));continue}if(!u.has(y)){e.push(F(`Feature with object id ${y} missing`));continue}const c=l(u.getFeature(y),s,n,r);if(f){if(s!==i(f)){e.push(F(\"Incorrect geometry type.\"));continue}c.geometry=h(E(f,d),f.spatialReference,d)}if(t){const i=_(this._fieldsIndex,this._requiredFields,c.attributes,t);if(i){e.push(i);continue}}u.add(o(c,s,n,r,a)),e.push(j(y))}}_assignObjectId(e,t,i=!1){const s=this._queryEngine.objectIdField;i&&t&&isFinite(t[s])?e[s]=t[s]:e[s]=this._nextObjectId++}}export default O;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{assumeNonNull as t}from\"../../maybe.js\";import{indexOf as i,PositionHint as n}from\"../../arrayUtils.js\";import e from\"../../PooledArray.js\";import{q as s}from\"../../../chunks/quickselect.js\";class h{constructor(t=9,i){this.compareMinX=l,this.compareMinY=c,this.toBBox=function(t){return t},this._maxEntries=Math.max(4,t||9),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),i&&(\"function\"==typeof i?this.toBBox=i:this._initFormat(i)),this.clear()}destroy(){this.clear(),M.prune(),X.prune(),Y.prune(),B.prune()}all(t){this._all(this.data,t)}search(t,i){let n=this.data;const e=this.toBBox;if(p(t,n))for(M.clear();n;){for(let s=0,h=n.children.length;s<h;s++){const h=n.children[s],a=n.leaf?e(h):h;p(t,a)&&(n.leaf?i(h):x(t,a)?this._all(h,i):M.push(h))}n=M.pop()}}collides(t){let i=this.data;const n=this.toBBox;if(!p(t,i))return!1;for(M.clear();i;){for(let e=0,s=i.children.length;e<s;e++){const s=i.children[e],h=i.leaf?n(s):s;if(p(t,h)){if(i.leaf||x(t,h))return!0;M.push(s)}}i=M.pop()}return!1}load(t){if(!t.length)return this;if(t.length<this._minEntries){for(let i=0,n=t.length;i<n;i++)this.insert(t[i]);return this}let i=this._build(t.slice(0,t.length),0,t.length-1,0);if(this.data.children.length)if(this.data.height===i.height)this._splitRoot(this.data,i);else{if(this.data.height<i.height){const t=this.data;this.data=i,i=t}this._insert(i,this.data.height-i.height-1,!0)}else this.data=i;return this}insert(t){return t&&this._insert(t,this.data.height-1),this}clear(){return this.data=new b([]),this}remove(n){if(!n)return this;let e,s=this.data,h=null,a=0,r=!1;const o=this.toBBox(n);for(Y.clear(),B.clear();s||Y.length>0;){var l;if(!s)s=t(Y.pop()),h=Y.data[Y.length-1],a=null!=(l=B.pop())?l:0,r=!0;if(s.leaf&&(e=i(s.children,n,s.children.length,s.indexHint),-1!==e))return s.children.splice(e,1),Y.push(s),this._condense(Y),this;r||s.leaf||!x(s,o)?h?(a++,s=h.children[a],r=!1):s=null:(Y.push(s),B.push(a),a=0,h=s,s=s.children[0])}return this}toJSON(){return this.data}fromJSON(t){return this.data=t,this}_all(t,i){let n=t;for(X.clear();n;){var e;if(!0===n.leaf)for(const t of n.children)i(t);else X.pushArray(n.children);n=null!=(e=X.pop())?e:null}}_build(t,i,n,e){const s=n-i+1;let h=this._maxEntries;if(s<=h){const e=new b(t.slice(i,n+1));return a(e,this.toBBox),e}e||(e=Math.ceil(Math.log(s)/Math.log(h)),h=Math.ceil(s/h**(e-1)));const r=new j([]);r.height=e;const o=Math.ceil(s/h),l=o*Math.ceil(Math.sqrt(h));g(t,i,n,l,this.compareMinX);for(let a=i;a<=n;a+=l){const i=Math.min(a+l-1,n);g(t,a,i,o,this.compareMinY);for(let n=a;n<=i;n+=o){const s=Math.min(n+o-1,i);r.children.push(this._build(t,n,s,e-1))}}return a(r,this.toBBox),r}_chooseSubtree(t,i,n,e){for(;e.push(i),!0!==i.leaf&&e.length-1!==n;){let n,e=1/0,s=1/0;for(let h=0,a=i.children.length;h<a;h++){const a=i.children[h],r=m(a),o=d(t,a)-r;o<s?(s=o,e=r<e?r:e,n=a):o===s&&r<e&&(e=r,n=a)}i=n||i.children[0]}return i}_insert(t,i,n){const e=this.toBBox,s=n?t:e(t);Y.clear();const h=this._chooseSubtree(s,this.data,i,Y);for(h.children.push(t),o(h,s);i>=0&&Y.data[i].children.length>this._maxEntries;)this._split(Y,i),i--;this._adjustParentBBoxes(s,Y,i)}_split(t,i){const n=t.data[i],e=n.children.length,s=this._minEntries;this._chooseSplitAxis(n,s,e);const h=this._chooseSplitIndex(n,s,e);if(!h)return void console.log(\"  Error: assertion failed at PooledRBush._split: no valid split index\");const r=n.children.splice(h,n.children.length-h),o=n.leaf?new b(r):new j(r);o.height=n.height,a(n,this.toBBox),a(o,this.toBBox),i?t.data[i-1].children.push(o):this._splitRoot(n,o)}_splitRoot(t,i){this.data=new j([t,i]),this.data.height=t.height+1,a(this.data,this.toBBox)}_chooseSplitIndex(t,i,n){let e,s,h;e=s=1/0;for(let a=i;a<=n-i;a++){const i=r(t,0,a,this.toBBox),o=r(t,a,n,this.toBBox),l=f(i,o),c=m(i)+m(o);l<e?(e=l,h=a,s=c<s?c:s):l===e&&c<s&&(s=c,h=a)}return h}_chooseSplitAxis(t,i,n){const e=t.leaf?this.compareMinX:l,s=t.leaf?this.compareMinY:c;this._allDistMargin(t,i,n,e)<this._allDistMargin(t,i,n,s)&&t.children.sort(e)}_allDistMargin(t,i,n,e){t.children.sort(e);const s=this.toBBox,h=r(t,0,i,s),a=r(t,n-i,n,s);let l=u(h)+u(a);for(let r=i;r<n-i;r++){const i=t.children[r];o(h,t.leaf?s(i):i),l+=u(h)}for(let r=n-i-1;r>=i;r--){const i=t.children[r];o(a,t.leaf?s(i):i),l+=u(a)}return l}_adjustParentBBoxes(t,i,n){for(let e=n;e>=0;e--)o(i.data[e],t)}_condense(t){for(let n=t.length-1;n>=0;n--){const e=t.data[n];if(0===e.children.length)if(n>0){const s=t.data[n-1],h=s.children;h.splice(i(h,e,h.length,s.indexHint),1)}else this.clear();else a(e,this.toBBox)}}_initFormat(t){const i=[\"return a\",\" - b\",\";\"];this.compareMinX=new Function(\"a\",\"b\",i.join(t[0])),this.compareMinY=new Function(\"a\",\"b\",i.join(t[1])),this.toBBox=new Function(\"a\",\"return {minX: a\"+t[0]+\", minY: a\"+t[1]+\", maxX: a\"+t[2]+\", maxY: a\"+t[3]+\"};\")}}function a(t,i){r(t,0,t.children.length,i,t)}function r(t,i,n,e,s){s||(s=new b([])),s.minX=1/0,s.minY=1/0,s.maxX=-1/0,s.maxY=-1/0;for(let h,a=i;a<n;a++)h=t.children[a],o(s,t.leaf?e(h):h);return s}function o(t,i){t.minX=Math.min(t.minX,i.minX),t.minY=Math.min(t.minY,i.minY),t.maxX=Math.max(t.maxX,i.maxX),t.maxY=Math.max(t.maxY,i.maxY)}function l(t,i){return t.minX-i.minX}function c(t,i){return t.minY-i.minY}function m(t){return(t.maxX-t.minX)*(t.maxY-t.minY)}function u(t){return t.maxX-t.minX+(t.maxY-t.minY)}function d(t,i){return(Math.max(i.maxX,t.maxX)-Math.min(i.minX,t.minX))*(Math.max(i.maxY,t.maxY)-Math.min(i.minY,t.minY))}function f(t,i){const n=Math.max(t.minX,i.minX),e=Math.max(t.minY,i.minY),s=Math.min(t.maxX,i.maxX),h=Math.min(t.maxY,i.maxY);return Math.max(0,s-n)*Math.max(0,h-e)}function x(t,i){return t.minX<=i.minX&&t.minY<=i.minY&&i.maxX<=t.maxX&&i.maxY<=t.maxY}function p(t,i){return i.minX<=t.maxX&&i.minY<=t.maxY&&i.maxX>=t.minX&&i.maxY>=t.minY}function g(i,n,e,h,a){const r=[n,e];for(;r.length;){const n=t(r.pop()),e=t(r.pop());if(n-e<=h)continue;const o=e+Math.ceil((n-e)/h/2)*h;s(i,o,e,n,a),r.push(e,o,o,n)}}const M=new e,X=new e,Y=new e,B=new e({deallocator:void 0});class _{constructor(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0}}class w extends _{constructor(){super(...arguments),this.height=1,this.indexHint=new n}}class b extends w{constructor(t){super(),this.children=t,this.leaf=!0}}class j extends w{constructor(t){super(),this.children=t,this.leaf=!1}}export default h;export{_ as BBox,h as PooledRBush};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport i from\"../../../core/has.js\";import{PooledRBush as s}from\"../../../core/libs/rbush/PooledRBush.js\";const d=5e4,n={minX:0,minY:0,maxX:0,maxY:0};function t(i,s,d){n.minX=s[0],n.minY=s[1],n.maxX=s[2],n.maxY=s[3],i.search(n,d)}class e{constructor(){this._indexInvalid=!1,this._boundsToLoad=[],this._boundsById=new Map,this._idByBounds=new Map,this._index=new s(9,i(\"csp-restrictions\")?i=>({minX:i[0],minY:i[1],maxX:i[2],maxY:i[3]}):[\"[0]\",\"[1]\",\"[2]\",\"[3]\"]),this._loadIndex=()=>{if(this._indexInvalid){const i=new Array(this._idByBounds.size);let s=0;this._idByBounds.forEach(((d,n)=>{i[s++]=n})),this._indexInvalid=!1,this._index.clear(),this._index.load(i)}else this._boundsToLoad.length&&(this._index.load(this._boundsToLoad.filter((i=>this._idByBounds.has(i)))),this._boundsToLoad.length=0)}}clear(){this._indexInvalid=!1,this._boundsToLoad.length=0,this._boundsById.clear(),this._idByBounds.clear(),this._index.clear()}delete(i){const s=this._boundsById.get(i);this._boundsById.delete(i),s&&(this._idByBounds.delete(s),this._indexInvalid||this._index.remove(s))}forEachInBounds(i,s){this._loadIndex(),t(this._index,i,(i=>s(this._idByBounds.get(i))))}get(i){return this._boundsById.get(i)}has(i){return this._boundsById.has(i)}invalidateIndex(){this._indexInvalid||(this._indexInvalid=!0,this._boundsToLoad.length=0)}set(i,s){if(!this._indexInvalid){const s=this._boundsById.get(i);s&&(this._index.remove(s),this._idByBounds.delete(s))}this._boundsById.set(i,s),s&&(this._idByBounds.set(s,i),this._indexInvalid||(this._boundsToLoad.push(s),this._boundsToLoad.length>d&&this._loadIndex()))}}export{e as BoundsStore};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport t from\"../../../../core/has.js\";import{clone as r}from\"../../../../core/lang.js\";import{defaultPointSymbolJSON as e,defaultPolylineSymbolJSON as n,defaultPolygonSymbolJSON as o}from\"../../../../symbols/support/defaultsJSON.js\";function i(t){return{renderer:{type:\"simple\",symbol:\"esriGeometryPoint\"===t||\"esriGeometryMultipoint\"===t?e:\"esriGeometryPolyline\"===t?n:o}}}function s(r,e){if(t(\"csp-restrictions\"))return()=>({[e]:null,...r});try{let t=`this.${e} = null;`;for(const e in r){t+=`this${e.indexOf(\".\")?`[\"${e}\"]`:`.${e}`} = ${JSON.stringify(r[e])};`}const n=new Function(t);return()=>new n}catch(n){return()=>({[e]:null,...r})}}function u(t={}){return[{name:\"New Feature\",description:\"\",prototype:{attributes:r(t)}}]}export{s as createDefaultAttributesFunction,u as createDefaultTemplate,i as createDrawingInfo};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport t from\"../OptimizedFeature.js\";import e from\"../OptimizedGeometry.js\";import{getCentroidOptimizedGeometry as r}from\"../centroid.js\";const o={getObjectId:t=>t.objectId,getAttributes:t=>t.attributes,getAttribute:(t,e)=>t.attributes[e],cloneWithGeometry:(e,r)=>new t(r,e.attributes,null,e.objectId),getGeometry:t=>t.geometry,getCentroid:(t,o)=>(t.centroid||(t.centroid=r(new e,t.geometry,o.hasZ,o.hasM)),t.centroid)};export default o;export{o as optimizedFeatureQueryEngineAdapter};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{isSome as e}from\"../../../core/maybe.js\";import t from\"../../../core/Logger.js\";import r from\"../../../core/Error.js\";import s from\"../../../core/Evented.js\";import{create as o,NEGATIVE_INFINITY as i}from\"../../../geometry/support/aaBoundingRect.js\";import{getBoundsOptimizedGeometry as a}from\"../featureConversionUtils.js\";import{fromRect as d}from\"../../../geometry/support/aaBoundingBox.js\";import{BoundsStore as n}from\"./BoundsStore.js\";import{optimizedFeatureQueryEngineAdapter as h}from\"./optimizedFeatureQueryEngineAdapter.js\";class u{constructor(e){this.geometryInfo=e,this._boundsStore=new n,this._featuresById=new Map,this._markedIds=new Set,this.events=new s,this.featureAdapter=h}get geometryType(){return this.geometryInfo.geometryType}get hasM(){return this.geometryInfo.hasM}get hasZ(){return this.geometryInfo.hasZ}get numFeatures(){return this._featuresById.size}get fullBounds(){if(!this.numFeatures)return null;const e=o(i);return this._featuresById.forEach((t=>{const r=this._boundsStore.get(t.objectId);r&&(e[0]=Math.min(r[0],e[0]),e[1]=Math.min(r[1],e[1]),e[2]=Math.max(r[2],e[2]),e[3]=Math.max(r[3],e[3]))})),e}get storeStatistics(){let e=0;return this._featuresById.forEach((t=>{t.geometry&&t.geometry.coords&&(e+=t.geometry.coords.length)})),{featureCount:this._featuresById.size,vertexCount:e/(this.hasZ?this.hasM?4:3:this.hasM?3:2)}}add(e){this._add(e),this._emitChanged()}addMany(e){for(const t of e)this._add(t);this._emitChanged()}clear(){this._featuresById.clear(),this._boundsStore.clear(),this._emitChanged()}removeById(e){const t=this._featuresById.get(e);return t?(this._remove(t),this._emitChanged(),t):null}removeManyById(e){this._boundsStore.invalidateIndex();for(const t of e){const e=this._featuresById.get(t);e&&this._remove(e)}this._emitChanged()}forEachBounds(e,t,r){for(const s of e){const e=this._boundsStore.get(s.objectId);e&&t(d(r,e))}}getFeature(e){return this._featuresById.get(e)}has(e){return this._featuresById.has(e)}forEach(e){this._featuresById.forEach((t=>e(t)))}forEachInBounds(e,t){this._boundsStore.forEachInBounds(e,(e=>{t(this._featuresById.get(e))}))}startMarkingUsedFeatures(){this._boundsStore.invalidateIndex(),this._markedIds.clear()}sweep(){let e=!1;this._featuresById.forEach(((t,r)=>{this._markedIds.has(r)||(e=!0,this._remove(t))})),this._markedIds.clear(),e&&this._emitChanged()}_emitChanged(){this.events.emit(\"changed\",void 0)}_add(s){if(!s)return;const i=s.objectId;if(null==i)return void t.getLogger(\"esri.layers.graphics.data.FeatureStore\").error(new r(\"featurestore:invalid-feature\",\"feature id is missing\",{feature:s}));const d=this._featuresById.get(i);let n;if(this._markedIds.add(i),d?(s.displayId=d.displayId,n=this._boundsStore.get(i),this._boundsStore.delete(i)):e(this.onFeatureAdd)&&this.onFeatureAdd(s),!s.geometry||!s.geometry.coords||!s.geometry.coords.length)return this._boundsStore.set(i,null),void this._featuresById.set(i,s);n=a(n||o(),s.geometry,this.geometryInfo.hasZ,this.geometryInfo.hasM),this._boundsStore.set(i,n),this._featuresById.set(i,s)}_remove(t){return e(this.onFeatureRemove)&&this.onFeatureRemove(t),this._markedIds.delete(t.objectId),this._boundsStore.delete(t.objectId),this._featuresById.delete(t.objectId),t}}export default u;\n"],"sourceRoot":""}