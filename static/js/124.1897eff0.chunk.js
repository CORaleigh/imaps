(this.webpackJsonpimaps=this.webpackJsonpimaps||[]).push([[124,248],{100:function(t,e,r){"use strict";r.d(e,"a",(function(){return h})),r.d(e,"b",(function(){return p})),r.d(e,"c",(function(){return f})),r.d(e,"d",(function(){return u})),r.d(e,"e",(function(){return c})),r.d(e,"f",(function(){return a})),r.d(e,"g",(function(){return l})),r.d(e,"h",(function(){return i})),r.d(e,"i",(function(){return o})),r.d(e,"j",(function(){return d})),r.d(e,"k",(function(){return s}));const n=/^-?(\d+(\.\d+)?)\s*((px)|(pt))?$/i;function i(t){return t?t/72*96:0}function o(t){return t?72*t/96:0}function s(t){if("string"==typeof t){if(n.test(t)){const e=t.match(n),r=Number(e[1]),i=e[3]&&e[3].toLowerCase(),s="-"===t.charAt(0),a="px"===i?o(r):r;return s?-a:a}return console.warn("screenUtils.toPt: input not recognized!"),null}return t}function a(t=0,e=0){return{x:t,y:e}}function l(t=0,e=0){return[t,e]}function u(t=0,e=0){return[t,e]}function c(t=0,e=0,r=0){return[t,e,r]}function h(t){return t}function p(t){return t}function f(t){return t}function d(t,e){return e?(e[0]=t.x,e[1]=t.y,e.length>2&&(e[2]=0),e):[t.x,t.y]}},1077:function(t,e,r){"use strict";r.d(e,"a",(function(){return s}));var n=r(91),i=r(740),o=r(336);class s{constructor(t){if(t instanceof i.a)this._tilemapCache=t;else{if(!t||!("index"in t))throw new Error("Invalid tilemap!");this._tilemap=t.index}}dataKey(t,e){if(this._tilemapCache){const{level:r,row:i,col:s}=t,a=new o.a(t);return this._tilemapCache.fetchAvailabilityUpsample(r,i,s,a,e).then((()=>(a.world=t.world,a))).catch((t=>{if(Object(n.m)(t))throw t;return null}))}return this._getIndexedDataKey(t)}forEach(t,e,r,n,i){this._callback=i,this._maxLevel=e+t,this._forEach(this._tilemap,e,r,n)}_forEach(t,e,r,n){0!==t&&(this._callback(e,r,n),e!==this._maxLevel&&"object"==typeof t&&(this._forEach(t[0],e+1,2*r,2*n),this._forEach(t[1],e+1,2*r,2*n+1),this._forEach(t[2],e+1,2*r+1,2*n),this._forEach(t[3],e+1,2*r+1,2*n+1)))}_getIndexedDataKey(t){const e=[t];if(t.level<0||t.row<0||t.col<0||t.row>>t.level>0||t.col>>t.level>0)return Promise.resolve(null);let r=t;for(;0!==r.level;)r=new o.a(r.level-1,r.row>>1,r.col>>1,r.world),e.push(r);let n,i,s=this._tilemap,a=e.pop();if(1===s)return Promise.resolve(a);for(;e.length;)if(n=e.pop(),i=(1&n.col)+((1&n.row)<<1),s){if(0===s[i]){a=null;break}if(1===s[i]){a=n;break}a=n,s=s[i]}return Promise.resolve(a)}}},117:function(t,e,r){"use strict";r.d(e,"a",(function(){return v})),r.d(e,"b",(function(){return A})),r.d(e,"c",(function(){return u})),r.d(e,"d",(function(){return E})),r.d(e,"e",(function(){return s})),r.d(e,"f",(function(){return x})),r.d(e,"g",(function(){return j})),r.d(e,"h",(function(){return M})),r.d(e,"i",(function(){return I})),r.d(e,"j",(function(){return a})),r.d(e,"k",(function(){return w})),r.d(e,"l",(function(){return L})),r.d(e,"m",(function(){return n})),r.d(e,"n",(function(){return C})),r.d(e,"o",(function(){return i})),r.d(e,"p",(function(){return U})),r.d(e,"q",(function(){return f})),r.d(e,"r",(function(){return d})),r.d(e,"s",(function(){return y})),r.d(e,"t",(function(){return b})),r.d(e,"u",(function(){return p})),r.d(e,"v",(function(){return h})),r.d(e,"w",(function(){return m})),r.d(e,"x",(function(){return g})),r.d(e,"y",(function(){return S})),r.d(e,"z",(function(){return O})),r.d(e,"A",(function(){return c})),r.d(e,"B",(function(){return l})),r.d(e,"C",(function(){return _})),r.d(e,"D",(function(){return o})),r.d(e,"E",(function(){return T})),r.d(e,"F",(function(){return P})),r.d(e,"G",(function(){return R}));const n=1e-30,i=4294967295,o=512,s=8,a=29,l=8,u={metrics:{width:15,height:17,left:0,top:-7,advance:14}},c=0,h=0,p=0,f=1,d=2,y=3,b=4,m=5,g=6,S=5,O=6,v=1,A=2,w=2,M=1,j=2,x=4,_=1.05,I=6,R=5,P=6,T=1.15,U=2,E=8,C=500,L=10},138:function(t,e,r){"use strict";r.d(e,"a",(function(){return O})),r.d(e,"b",(function(){return l})),r.d(e,"c",(function(){return u})),r.d(e,"d",(function(){return d})),r.d(e,"e",(function(){return f})),r.d(e,"f",(function(){return o})),r.d(e,"g",(function(){return p})),r.d(e,"h",(function(){return P})),r.d(e,"i",(function(){return R})),r.d(e,"j",(function(){return a})),r.d(e,"k",(function(){return y})),r.d(e,"l",(function(){return j})),r.d(e,"m",(function(){return _})),r.d(e,"n",(function(){return c})),r.d(e,"o",(function(){return S})),r.d(e,"p",(function(){return x})),r.d(e,"q",(function(){return T})),r.d(e,"r",(function(){return b})),r.d(e,"s",(function(){return s})),r.d(e,"t",(function(){return h})),r.d(e,"u",(function(){return m})),r.d(e,"v",(function(){return w})),r.d(e,"w",(function(){return g})),r.d(e,"x",(function(){return M}));var n=r(105),i=r(195);function o(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function s(t,e,r,n,i,o,s,a,l,u,c,h,p,f,d,y,b){return t[0]=e,t[1]=r,t[2]=n,t[3]=i,t[4]=o,t[5]=s,t[6]=a,t[7]=l,t[8]=u,t[9]=c,t[10]=h,t[11]=p,t[12]=f,t[13]=d,t[14]=y,t[15]=b,t}function a(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function l(t,e){if(t===e){const r=e[1],n=e[2],i=e[3],o=e[6],s=e[7],a=e[11];t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=r,t[6]=e[9],t[7]=e[13],t[8]=n,t[9]=o,t[11]=e[14],t[12]=i,t[13]=s,t[14]=a}else t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=e[1],t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=e[2],t[9]=e[6],t[10]=e[10],t[11]=e[14],t[12]=e[3],t[13]=e[7],t[14]=e[11],t[15]=e[15];return t}function u(t,e){const r=e[0],n=e[1],i=e[2],o=e[3],s=e[4],a=e[5],l=e[6],u=e[7],c=e[8],h=e[9],p=e[10],f=e[11],d=e[12],y=e[13],b=e[14],m=e[15],g=r*a-n*s,S=r*l-i*s,O=r*u-o*s,v=n*l-i*a,A=n*u-o*a,w=i*u-o*l,M=c*y-h*d,j=c*b-p*d,x=c*m-f*d,_=h*b-p*y,I=h*m-f*y,R=p*m-f*b;let P=g*R-S*I+O*_+v*x-A*j+w*M;return P?(P=1/P,t[0]=(a*R-l*I+u*_)*P,t[1]=(i*I-n*R-o*_)*P,t[2]=(y*w-b*A+m*v)*P,t[3]=(p*A-h*w-f*v)*P,t[4]=(l*x-s*R-u*j)*P,t[5]=(r*R-i*x+o*j)*P,t[6]=(b*O-d*w-m*S)*P,t[7]=(c*w-p*O+f*S)*P,t[8]=(s*I-a*x+u*M)*P,t[9]=(n*x-r*I-o*M)*P,t[10]=(d*A-y*O+m*g)*P,t[11]=(h*O-c*A-f*g)*P,t[12]=(a*j-s*_-l*M)*P,t[13]=(r*_-n*j+i*M)*P,t[14]=(y*S-d*v-b*g)*P,t[15]=(c*v-h*S+p*g)*P,t):null}function c(t,e,r){const n=e[0],i=e[1],o=e[2],s=e[3],a=e[4],l=e[5],u=e[6],c=e[7],h=e[8],p=e[9],f=e[10],d=e[11],y=e[12],b=e[13],m=e[14],g=e[15];let S=r[0],O=r[1],v=r[2],A=r[3];return t[0]=S*n+O*a+v*h+A*y,t[1]=S*i+O*l+v*p+A*b,t[2]=S*o+O*u+v*f+A*m,t[3]=S*s+O*c+v*d+A*g,S=r[4],O=r[5],v=r[6],A=r[7],t[4]=S*n+O*a+v*h+A*y,t[5]=S*i+O*l+v*p+A*b,t[6]=S*o+O*u+v*f+A*m,t[7]=S*s+O*c+v*d+A*g,S=r[8],O=r[9],v=r[10],A=r[11],t[8]=S*n+O*a+v*h+A*y,t[9]=S*i+O*l+v*p+A*b,t[10]=S*o+O*u+v*f+A*m,t[11]=S*s+O*c+v*d+A*g,S=r[12],O=r[13],v=r[14],A=r[15],t[12]=S*n+O*a+v*h+A*y,t[13]=S*i+O*l+v*p+A*b,t[14]=S*o+O*u+v*f+A*m,t[15]=S*s+O*c+v*d+A*g,t}function h(t,e,r){const n=r[0],i=r[1],o=r[2];let s,a,l,u,c,h,p,f,d,y,b,m;return e===t?(t[12]=e[0]*n+e[4]*i+e[8]*o+e[12],t[13]=e[1]*n+e[5]*i+e[9]*o+e[13],t[14]=e[2]*n+e[6]*i+e[10]*o+e[14],t[15]=e[3]*n+e[7]*i+e[11]*o+e[15]):(s=e[0],a=e[1],l=e[2],u=e[3],c=e[4],h=e[5],p=e[6],f=e[7],d=e[8],y=e[9],b=e[10],m=e[11],t[0]=s,t[1]=a,t[2]=l,t[3]=u,t[4]=c,t[5]=h,t[6]=p,t[7]=f,t[8]=d,t[9]=y,t[10]=b,t[11]=m,t[12]=s*n+c*i+d*o+e[12],t[13]=a*n+h*i+y*o+e[13],t[14]=l*n+p*i+b*o+e[14],t[15]=u*n+f*i+m*o+e[15]),t}function p(t,e,r){const n=r[0],i=r[1],o=r[2];return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*i,t[5]=e[5]*i,t[6]=e[6]*i,t[7]=e[7]*i,t[8]=e[8]*o,t[9]=e[9]*o,t[10]=e[10]*o,t[11]=e[11]*o,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function f(t,e,r,n){let o,s,a,l,u,c,h,p,f,d,y,b,m,g,S,O,v,A,w,M,j,x,_,I,R=n[0],P=n[1],T=n[2],U=Math.sqrt(R*R+P*P+T*T);return U<i.a?null:(U=1/U,R*=U,P*=U,T*=U,o=Math.sin(r),s=Math.cos(r),a=1-s,l=e[0],u=e[1],c=e[2],h=e[3],p=e[4],f=e[5],d=e[6],y=e[7],b=e[8],m=e[9],g=e[10],S=e[11],O=R*R*a+s,v=P*R*a+T*o,A=T*R*a-P*o,w=R*P*a-T*o,M=P*P*a+s,j=T*P*a+R*o,x=R*T*a+P*o,_=P*T*a-R*o,I=T*T*a+s,t[0]=l*O+p*v+b*A,t[1]=u*O+f*v+m*A,t[2]=c*O+d*v+g*A,t[3]=h*O+y*v+S*A,t[4]=l*w+p*M+b*j,t[5]=u*w+f*M+m*j,t[6]=c*w+d*M+g*j,t[7]=h*w+y*M+S*j,t[8]=l*x+p*_+b*I,t[9]=u*x+f*_+m*I,t[10]=c*x+d*_+g*I,t[11]=h*x+y*_+S*I,e!==t&&(t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t)}function d(t,e,r){const n=Math.sin(r),i=Math.cos(r),o=e[4],s=e[5],a=e[6],l=e[7],u=e[8],c=e[9],h=e[10],p=e[11];return e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=o*i+u*n,t[5]=s*i+c*n,t[6]=a*i+h*n,t[7]=l*i+p*n,t[8]=u*i-o*n,t[9]=c*i-s*n,t[10]=h*i-a*n,t[11]=p*i-l*n,t}function y(t,e,r){const n=Math.sin(r),i=Math.cos(r),o=e[0],s=e[1],a=e[2],l=e[3],u=e[8],c=e[9],h=e[10],p=e[11];return e!==t&&(t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=o*i-u*n,t[1]=s*i-c*n,t[2]=a*i-h*n,t[3]=l*i-p*n,t[8]=o*n+u*i,t[9]=s*n+c*i,t[10]=a*n+h*i,t[11]=l*n+p*i,t}function b(t,e,r){const n=Math.sin(r),i=Math.cos(r),o=e[0],s=e[1],a=e[2],l=e[3],u=e[4],c=e[5],h=e[6],p=e[7];return e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=o*i+u*n,t[1]=s*i+c*n,t[2]=a*i+h*n,t[3]=l*i+p*n,t[4]=u*i-o*n,t[5]=c*i-s*n,t[6]=h*i-a*n,t[7]=p*i-l*n,t}function m(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=e[0],t[13]=e[1],t[14]=e[2],t[15]=1,t}function g(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=e[2],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function S(t,e){const r=Math.sin(e),n=Math.cos(e);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=n,t[6]=r,t[7]=0,t[8]=0,t[9]=-r,t[10]=n,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function O(t,e){const r=Math.sin(e),n=Math.cos(e);return t[0]=n,t[1]=r,t[2]=0,t[3]=0,t[4]=-r,t[5]=n,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function v(t,e,r){const n=e[0],i=e[1],o=e[2],s=e[3],a=n+n,l=i+i,u=o+o,c=n*a,h=n*l,p=n*u,f=i*l,d=i*u,y=o*u,b=s*a,m=s*l,g=s*u;return t[0]=1-(f+y),t[1]=h+g,t[2]=p-m,t[3]=0,t[4]=h-g,t[5]=1-(c+y),t[6]=d+b,t[7]=0,t[8]=p+m,t[9]=d-b,t[10]=1-(c+f),t[11]=0,t[12]=r[0],t[13]=r[1],t[14]=r[2],t[15]=1,t}const A=Object(n.e)();function w(t,e){return t[0]=e[12],t[1]=e[13],t[2]=e[14],t}function M(t,e){const r=e[0],n=e[1],i=e[2],o=e[3],s=r+r,a=n+n,l=i+i,u=r*s,c=n*s,h=n*a,p=i*s,f=i*a,d=i*l,y=o*s,b=o*a,m=o*l;return t[0]=1-h-d,t[1]=c+m,t[2]=p-b,t[3]=0,t[4]=c-m,t[5]=1-u-d,t[6]=f+y,t[7]=0,t[8]=p+b,t[9]=f-y,t[10]=1-u-h,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function j(t,e,r,n,i,o,s){const a=1/(r-e),l=1/(i-n),u=1/(o-s);return t[0]=2*o*a,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=2*o*l,t[6]=0,t[7]=0,t[8]=(r+e)*a,t[9]=(i+n)*l,t[10]=(s+o)*u,t[11]=-1,t[12]=0,t[13]=0,t[14]=s*o*2*u,t[15]=0,t}function x(t,e,r,n,i,o,s){const a=1/(e-r),l=1/(n-i),u=1/(o-s);return t[0]=-2*a,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*l,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*u,t[11]=0,t[12]=(e+r)*a,t[13]=(i+n)*l,t[14]=(s+o)*u,t[15]=1,t}function _(t,e,r,n){let o,s,l,u,c,h,p,f,d,y;const b=e[0],m=e[1],g=e[2],S=n[0],O=n[1],v=n[2],A=r[0],w=r[1],M=r[2];return Math.abs(b-A)<i.a&&Math.abs(m-w)<i.a&&Math.abs(g-M)<i.a?a(t):(p=b-A,f=m-w,d=g-M,y=1/Math.sqrt(p*p+f*f+d*d),p*=y,f*=y,d*=y,o=O*d-v*f,s=v*p-S*d,l=S*f-O*p,y=Math.sqrt(o*o+s*s+l*l),y?(y=1/y,o*=y,s*=y,l*=y):(o=0,s=0,l=0),u=f*l-d*s,c=d*o-p*l,h=p*s-f*o,y=Math.sqrt(u*u+c*c+h*h),y?(y=1/y,u*=y,c*=y,h*=y):(u=0,c=0,h=0),t[0]=o,t[1]=u,t[2]=p,t[3]=0,t[4]=s,t[5]=c,t[6]=f,t[7]=0,t[8]=l,t[9]=h,t[10]=d,t[11]=0,t[12]=-(o*b+s*m+l*g),t[13]=-(u*b+c*m+h*g),t[14]=-(p*b+f*m+d*g),t[15]=1,t)}function I(t,e,r){return t[0]=e[0]-r[0],t[1]=e[1]-r[1],t[2]=e[2]-r[2],t[3]=e[3]-r[3],t[4]=e[4]-r[4],t[5]=e[5]-r[5],t[6]=e[6]-r[6],t[7]=e[7]-r[7],t[8]=e[8]-r[8],t[9]=e[9]-r[9],t[10]=e[10]-r[10],t[11]=e[11]-r[11],t[12]=e[12]-r[12],t[13]=e[13]-r[13],t[14]=e[14]-r[14],t[15]=e[15]-r[15],t}function R(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]&&t[9]===e[9]&&t[10]===e[10]&&t[11]===e[11]&&t[12]===e[12]&&t[13]===e[13]&&t[14]===e[14]&&t[15]===e[15]}function P(t,e){const r=t[0],n=t[1],o=t[2],s=t[3],a=t[4],l=t[5],u=t[6],c=t[7],h=t[8],p=t[9],f=t[10],d=t[11],y=t[12],b=t[13],m=t[14],g=t[15],S=e[0],O=e[1],v=e[2],A=e[3],w=e[4],M=e[5],j=e[6],x=e[7],_=e[8],I=e[9],R=e[10],P=e[11],T=e[12],U=e[13],E=e[14],C=e[15];return Math.abs(r-S)<=i.a*Math.max(1,Math.abs(r),Math.abs(S))&&Math.abs(n-O)<=i.a*Math.max(1,Math.abs(n),Math.abs(O))&&Math.abs(o-v)<=i.a*Math.max(1,Math.abs(o),Math.abs(v))&&Math.abs(s-A)<=i.a*Math.max(1,Math.abs(s),Math.abs(A))&&Math.abs(a-w)<=i.a*Math.max(1,Math.abs(a),Math.abs(w))&&Math.abs(l-M)<=i.a*Math.max(1,Math.abs(l),Math.abs(M))&&Math.abs(u-j)<=i.a*Math.max(1,Math.abs(u),Math.abs(j))&&Math.abs(c-x)<=i.a*Math.max(1,Math.abs(c),Math.abs(x))&&Math.abs(h-_)<=i.a*Math.max(1,Math.abs(h),Math.abs(_))&&Math.abs(p-I)<=i.a*Math.max(1,Math.abs(p),Math.abs(I))&&Math.abs(f-R)<=i.a*Math.max(1,Math.abs(f),Math.abs(R))&&Math.abs(d-P)<=i.a*Math.max(1,Math.abs(d),Math.abs(P))&&Math.abs(y-T)<=i.a*Math.max(1,Math.abs(y),Math.abs(T))&&Math.abs(b-U)<=i.a*Math.max(1,Math.abs(b),Math.abs(U))&&Math.abs(m-E)<=i.a*Math.max(1,Math.abs(m),Math.abs(E))&&Math.abs(g-C)<=i.a*Math.max(1,Math.abs(g),Math.abs(C))}function T(t){const e=i.a,r=t[0],n=t[1],o=t[2],s=t[4],a=t[5],l=t[6],u=t[8],c=t[9],h=t[10];return Math.abs(1-(r*r+s*s+u*u))<=e&&Math.abs(1-(n*n+a*a+c*c))<=e&&Math.abs(1-(o*o+l*l+h*h))<=e}const U=c,E=I;Object.freeze({__proto__:null,copy:o,set:s,identity:a,transpose:l,invert:u,adjoint:function(t,e){const r=e[0],n=e[1],i=e[2],o=e[3],s=e[4],a=e[5],l=e[6],u=e[7],c=e[8],h=e[9],p=e[10],f=e[11],d=e[12],y=e[13],b=e[14],m=e[15];return t[0]=a*(p*m-f*b)-h*(l*m-u*b)+y*(l*f-u*p),t[1]=-(n*(p*m-f*b)-h*(i*m-o*b)+y*(i*f-o*p)),t[2]=n*(l*m-u*b)-a*(i*m-o*b)+y*(i*u-o*l),t[3]=-(n*(l*f-u*p)-a*(i*f-o*p)+h*(i*u-o*l)),t[4]=-(s*(p*m-f*b)-c*(l*m-u*b)+d*(l*f-u*p)),t[5]=r*(p*m-f*b)-c*(i*m-o*b)+d*(i*f-o*p),t[6]=-(r*(l*m-u*b)-s*(i*m-o*b)+d*(i*u-o*l)),t[7]=r*(l*f-u*p)-s*(i*f-o*p)+c*(i*u-o*l),t[8]=s*(h*m-f*y)-c*(a*m-u*y)+d*(a*f-u*h),t[9]=-(r*(h*m-f*y)-c*(n*m-o*y)+d*(n*f-o*h)),t[10]=r*(a*m-u*y)-s*(n*m-o*y)+d*(n*u-o*a),t[11]=-(r*(a*f-u*h)-s*(n*f-o*h)+c*(n*u-o*a)),t[12]=-(s*(h*b-p*y)-c*(a*b-l*y)+d*(a*p-l*h)),t[13]=r*(h*b-p*y)-c*(n*b-i*y)+d*(n*p-i*h),t[14]=-(r*(a*b-l*y)-s*(n*b-i*y)+d*(n*l-i*a)),t[15]=r*(a*p-l*h)-s*(n*p-i*h)+c*(n*l-i*a),t},determinant:function(t){const e=t[0],r=t[1],n=t[2],i=t[3],o=t[4],s=t[5],a=t[6],l=t[7],u=t[8],c=t[9],h=t[10],p=t[11],f=t[12],d=t[13],y=t[14],b=t[15];return(e*s-r*o)*(h*b-p*y)-(e*a-n*o)*(c*b-p*d)+(e*l-i*o)*(c*y-h*d)+(r*a-n*s)*(u*b-p*f)-(r*l-i*s)*(u*y-h*f)+(n*l-i*a)*(u*d-c*f)},multiply:c,translate:h,scale:p,rotate:f,rotateX:d,rotateY:y,rotateZ:b,fromTranslation:m,fromScaling:g,fromRotation:function(t,e,r){let n,o,s,a=r[0],l=r[1],u=r[2],c=Math.sqrt(a*a+l*l+u*u);return c<i.a?null:(c=1/c,a*=c,l*=c,u*=c,n=Math.sin(e),o=Math.cos(e),s=1-o,t[0]=a*a*s+o,t[1]=l*a*s+u*n,t[2]=u*a*s-l*n,t[3]=0,t[4]=a*l*s-u*n,t[5]=l*l*s+o,t[6]=u*l*s+a*n,t[7]=0,t[8]=a*u*s+l*n,t[9]=l*u*s-a*n,t[10]=u*u*s+o,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t)},fromXRotation:S,fromYRotation:function(t,e){const r=Math.sin(e),n=Math.cos(e);return t[0]=n,t[1]=0,t[2]=-r,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=r,t[9]=0,t[10]=n,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},fromZRotation:O,fromRotationTranslation:v,fromQuat2:function(t,e){const r=A,n=-e[0],i=-e[1],o=-e[2],s=e[3],a=e[4],l=e[5],u=e[6],c=e[7],h=n*n+i*i+o*o+s*s;return h>0?(r[0]=2*(a*s+c*n+l*o-u*i)/h,r[1]=2*(l*s+c*i+u*n-a*o)/h,r[2]=2*(u*s+c*o+a*i-l*n)/h):(r[0]=2*(a*s+c*n+l*o-u*i),r[1]=2*(l*s+c*i+u*n-a*o),r[2]=2*(u*s+c*o+a*i-l*n)),v(t,e,r),t},getTranslation:w,getScaling:function(t,e){const r=e[0],n=e[1],i=e[2],o=e[4],s=e[5],a=e[6],l=e[8],u=e[9],c=e[10];return t[0]=Math.sqrt(r*r+n*n+i*i),t[1]=Math.sqrt(o*o+s*s+a*a),t[2]=Math.sqrt(l*l+u*u+c*c),t},getRotation:function(t,e){const r=e[0]+e[5]+e[10];let n=0;return r>0?(n=2*Math.sqrt(r+1),t[3]=.25*n,t[0]=(e[6]-e[9])/n,t[1]=(e[8]-e[2])/n,t[2]=(e[1]-e[4])/n):e[0]>e[5]&&e[0]>e[10]?(n=2*Math.sqrt(1+e[0]-e[5]-e[10]),t[3]=(e[6]-e[9])/n,t[0]=.25*n,t[1]=(e[1]+e[4])/n,t[2]=(e[8]+e[2])/n):e[5]>e[10]?(n=2*Math.sqrt(1+e[5]-e[0]-e[10]),t[3]=(e[8]-e[2])/n,t[0]=(e[1]+e[4])/n,t[1]=.25*n,t[2]=(e[6]+e[9])/n):(n=2*Math.sqrt(1+e[10]-e[0]-e[5]),t[3]=(e[1]-e[4])/n,t[0]=(e[8]+e[2])/n,t[1]=(e[6]+e[9])/n,t[2]=.25*n),t},fromRotationTranslationScale:function(t,e,r,n){const i=e[0],o=e[1],s=e[2],a=e[3],l=i+i,u=o+o,c=s+s,h=i*l,p=i*u,f=i*c,d=o*u,y=o*c,b=s*c,m=a*l,g=a*u,S=a*c,O=n[0],v=n[1],A=n[2];return t[0]=(1-(d+b))*O,t[1]=(p+S)*O,t[2]=(f-g)*O,t[3]=0,t[4]=(p-S)*v,t[5]=(1-(h+b))*v,t[6]=(y+m)*v,t[7]=0,t[8]=(f+g)*A,t[9]=(y-m)*A,t[10]=(1-(h+d))*A,t[11]=0,t[12]=r[0],t[13]=r[1],t[14]=r[2],t[15]=1,t},fromRotationTranslationScaleOrigin:function(t,e,r,n,i){const o=e[0],s=e[1],a=e[2],l=e[3],u=o+o,c=s+s,h=a+a,p=o*u,f=o*c,d=o*h,y=s*c,b=s*h,m=a*h,g=l*u,S=l*c,O=l*h,v=n[0],A=n[1],w=n[2],M=i[0],j=i[1],x=i[2],_=(1-(y+m))*v,I=(f+O)*v,R=(d-S)*v,P=(f-O)*A,T=(1-(p+m))*A,U=(b+g)*A,E=(d+S)*w,C=(b-g)*w,L=(1-(p+y))*w;return t[0]=_,t[1]=I,t[2]=R,t[3]=0,t[4]=P,t[5]=T,t[6]=U,t[7]=0,t[8]=E,t[9]=C,t[10]=L,t[11]=0,t[12]=r[0]+M-(_*M+P*j+E*x),t[13]=r[1]+j-(I*M+T*j+C*x),t[14]=r[2]+x-(R*M+U*j+L*x),t[15]=1,t},fromQuat:M,frustum:j,perspective:function(t,e,r,n,i){const o=1/Math.tan(e/2);let s;return t[0]=o/r,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=o,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=i&&i!==1/0?(s=1/(n-i),t[10]=(i+n)*s,t[14]=2*i*n*s):(t[10]=-1,t[14]=-2*n),t},perspectiveFromFieldOfView:function(t,e,r,n){const i=Math.tan(e.upDegrees*Math.PI/180),o=Math.tan(e.downDegrees*Math.PI/180),s=Math.tan(e.leftDegrees*Math.PI/180),a=Math.tan(e.rightDegrees*Math.PI/180),l=2/(s+a),u=2/(i+o);return t[0]=l,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=u,t[6]=0,t[7]=0,t[8]=-(s-a)*l*.5,t[9]=(i-o)*u*.5,t[10]=n/(r-n),t[11]=-1,t[12]=0,t[13]=0,t[14]=n*r/(r-n),t[15]=0,t},ortho:x,lookAt:_,targetTo:function(t,e,r,n){const i=e[0],o=e[1],s=e[2],a=n[0],l=n[1],u=n[2];let c=i-r[0],h=o-r[1],p=s-r[2],f=c*c+h*h+p*p;f>0&&(f=1/Math.sqrt(f),c*=f,h*=f,p*=f);let d=l*p-u*h,y=u*c-a*p,b=a*h-l*c;return f=d*d+y*y+b*b,f>0&&(f=1/Math.sqrt(f),d*=f,y*=f,b*=f),t[0]=d,t[1]=y,t[2]=b,t[3]=0,t[4]=h*b-p*y,t[5]=p*d-c*b,t[6]=c*y-h*d,t[7]=0,t[8]=c,t[9]=h,t[10]=p,t[11]=0,t[12]=i,t[13]=o,t[14]=s,t[15]=1,t},str:function(t){return"mat4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+", "+t[9]+", "+t[10]+", "+t[11]+", "+t[12]+", "+t[13]+", "+t[14]+", "+t[15]+")"},frob:function(t){return Math.sqrt(t[0]**2+t[1]**2+t[2]**2+t[3]**2+t[4]**2+t[5]**2+t[6]**2+t[7]**2+t[8]**2+t[9]**2+t[10]**2+t[11]**2+t[12]**2+t[13]**2+t[14]**2+t[15]**2)},add:function(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t[2]=e[2]+r[2],t[3]=e[3]+r[3],t[4]=e[4]+r[4],t[5]=e[5]+r[5],t[6]=e[6]+r[6],t[7]=e[7]+r[7],t[8]=e[8]+r[8],t[9]=e[9]+r[9],t[10]=e[10]+r[10],t[11]=e[11]+r[11],t[12]=e[12]+r[12],t[13]=e[13]+r[13],t[14]=e[14]+r[14],t[15]=e[15]+r[15],t},subtract:I,multiplyScalar:function(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t[4]=e[4]*r,t[5]=e[5]*r,t[6]=e[6]*r,t[7]=e[7]*r,t[8]=e[8]*r,t[9]=e[9]*r,t[10]=e[10]*r,t[11]=e[11]*r,t[12]=e[12]*r,t[13]=e[13]*r,t[14]=e[14]*r,t[15]=e[15]*r,t},multiplyScalarAndAdd:function(t,e,r,n){return t[0]=e[0]+r[0]*n,t[1]=e[1]+r[1]*n,t[2]=e[2]+r[2]*n,t[3]=e[3]+r[3]*n,t[4]=e[4]+r[4]*n,t[5]=e[5]+r[5]*n,t[6]=e[6]+r[6]*n,t[7]=e[7]+r[7]*n,t[8]=e[8]+r[8]*n,t[9]=e[9]+r[9]*n,t[10]=e[10]+r[10]*n,t[11]=e[11]+r[11]*n,t[12]=e[12]+r[12]*n,t[13]=e[13]+r[13]*n,t[14]=e[14]+r[14]*n,t[15]=e[15]+r[15]*n,t},exactEquals:R,equals:P,isOrthoNormal:T,mul:U,sub:E})},226:function(t,e,r){"use strict";(function(t){r.d(e,"a",(function(){return o})),r.d(e,"b",(function(){return n})),r.d(e,"c",(function(){return i}));var n="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof t?t:"undefined"!=typeof self?self:{};function i(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function o(t){throw new Error('Could not dynamically require "'+t+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}}).call(this,r(252))},240:function(t,e,r){"use strict";r.d(e,"a",(function(){return i})),r.d(e,"b",(function(){return o}));var n=r(84);function i(t){const e=Object(n.e)(100*(1-t));return Math.max(0,Math.min(e,100))}function o(t){const e=1-t/100;return Math.max(0,Math.min(e,1))}},336:function(t,e,r){"use strict";r.d(e,"a",(function(){return i}));var n=r(225);class i{constructor(t,e,r,n){this.set(t,e,r,n)}static getId(t,e,r,n){return"object"==typeof t?`${t.level}/${t.row}/${t.col}/${t.world}`:`${t}/${e}/${r}/${n}`}get key(){return this}get id(){return this.toString()}set id(t){this.set(t)}get hash(){const t=4095&this.row,e=4095&this.col,r=63&this.level;return(3&this.world)<<30|e<<22|t<<8|r}acquire(t,e,r,n){this.set(t,e,r,n)}contains(t){const e=t.level-this.level;return this.row===t.row>>e&&this.col===t.col>>e&&this.world===t.world}equals(t){return this.level===t.level&&this.row===t.row&&this.col===t.col&&this.world===t.world}clone(){return new i(this)}release(){this.level=0,this.row=0,this.col=0,this.world=0}set(t,e,r,n){if(null==t)this.level=0,this.row=0,this.col=0,this.world=0;else if("object"==typeof t)this.level=t.level||0,this.row=t.row||0,this.col=t.col||0,this.world=t.world||0;else if("string"==typeof t){const[e,r,n,i]=t.split("/");this.level=parseFloat(e),this.row=parseFloat(r),this.col=parseFloat(n),this.world=parseFloat(i)}else this.level=+t,this.row=+e,this.col=+r,this.world=+n||0;return this}toString(){return`${this.level}/${this.row}/${this.col}/${this.world}`}getParentKey(){return this.level<=0?null:new i(this.level-1,this.row>>1,this.col>>1,this.world)}getChildKeys(){const t=this.level+1,e=this.row<<1,r=this.col<<1,n=this.world;return[new i(t,e,r,n),new i(t,e,r+1,n),new i(t,e+1,r,n),new i(t,e+1,r+1,n)]}compareRowMajor(t){return this.row<t.row?-1:this.row>t.row?1:this.col<t.col?-1:this.col>t.col?1:0}}i.pool=new n.a(i,null,null,25,50)},540:function(t,e,r){"use strict";r.d(e,"a",(function(){return s}));var n=r(85),i=r(871);let o;function s(){return o||(o=function(){const t={available:!1,version:0,majorPerformanceCaveat:!1,maxTextureSize:0,supportsHighPrecisionFragment:!1,supportsVertexShaderSamplers:!1,supportsElementIndexUint:!1,supportsStandardDerivatives:!1,supportsInstancedArrays:!1,supportsTextureFloat:!1,supportsColorBufferFloat:!1};if(void 0===typeof WebGLRenderingContext)return t;const e=document.createElement("canvas");if(!e)return t;let r=Object(i.a)(e,1,{failIfMajorPerformanceCaveat:!0});if(Object(n.j)(r)&&(r=Object(i.a)(e,1),Object(n.k)(r)&&(t.majorPerformanceCaveat=!0)),Object(n.j)(r))return t;const o=r.getParameter(r.VERSION);if(!o)return t;const s=o.match(/^WebGL\s+([\d.]*)/);if(s){const e=parseFloat(s[1]);t.available=e>=.94;const n=r.getShaderPrecisionFormat(r.FRAGMENT_SHADER,r.HIGH_FLOAT);n&&(t.supportsHighPrecisionFragment=n.precision>0),t.supportsVertexShaderSamplers=r.getParameter(r.MAX_VERTEX_TEXTURE_IMAGE_UNITS)>0,t.supportsElementIndexUint=null!==r.getExtension("OES_element_index_uint"),t.supportsStandardDerivatives=null!==r.getExtension("OES_standard_derivatives"),t.supportsInstancedArrays=null!==r.getExtension("ANGLE_instanced_arrays"),t.supportsTextureFloat=null!==r.getExtension("OES_texture_float"),t.supportsColorBufferFloat=null!==r.getExtension("WEBGL_color_buffer_float")&&null!==r.getExtension("EXT_float_blend")}return t.maxTextureSize=r.getParameter(r.MAX_TEXTURE_SIZE),t.version=function(){if(void 0===typeof WebGL2RenderingContext)return!1;const t=document.createElement("canvas");if(!t)return!1;const e=Object(i.a)(t,2);return!!Object(n.k)(e)}()?2:1,t}()),o}},754:function(t,e,r){"use strict";r.d(e,"a",(function(){return o}));var n=r(98),i=r(180);function o(t){return{origin:"portal-item",url:Object(n.K)(t.itemUrl),portal:t.portal||i.a.getDefault(),portalItem:t,readResourcePaths:[]}}},871:function(t,e,r){"use strict";r.d(e,"a",(function(){return o})),r.d(e,"b",(function(){return i}));var n=r(85);function i(t,e,r={}){if(!window.WebGLRenderingContext)return s(t,a),null;const i=o(t,e,r);return Object(n.j)(i)?(s(t,l),null):i}function o(t,e,r={}){const n=1===e?["webgl","experimental-webgl","webkit-3d","moz-webgl"]:["webgl2"];let i=null;for(const o of n){try{i=t.getContext(o,r)}catch(l){}if(i)break}return i}function s(t,e){const r=t.parentNode;r&&(r.innerHTML='<table style="background-color: #8CE; width: 100%; height: 100%;"><tr><td align="center"><div style="display: table-cell; vertical-align: middle;"><div style="">'+e+"</div></div></td></tr></table>")}const a='This page requires a browser that supports WebGL.<br/><a href="http://get.webgl.org">Click here to upgrade your browser.</a>',l='It doesn\'t appear your computer can support WebGL.<br/><a href="http://get.webgl.org/troubleshooting/">Click here for more information.</a>'},915:function(t,e,r){"use strict";function n(t,e,r,n){const i=3*t,o=3*(r-t)-i,s=1-i-o,a=3*e,l=3*(n-e)-a,u=1-a-l;function c(t){return((s*t+o)*t+i)*t}function h(t){return(3*s*t+2*o)*t+i}return function(t,e=1e-6){return function(t){return((u*t+l)*t+a)*t}(function(t,e){let r,n,i,o,s,a;for(i=t,a=0;a<8;a++){if(o=c(i)-t,Math.abs(o)<e)return i;if(s=h(i),Math.abs(s)<1e-6)break;i-=o/s}if(r=0,n=1,i=t,i<r)return r;if(i>n)return n;for(;r<n;){if(o=c(i),Math.abs(o-t)<e)return i;t>o?r=i:n=i,i=.5*(n-r)+r}return i}(t,e))}}r.d(e,"a",(function(){return o})),r.d(e,"b",(function(){return s})),r.d(e,"c",(function(){return n}));const i=/^cubic-bezier\((.*)\)/,o={};function s(t){let e=o[t]||null;if(!e){const r=i.exec(t);if(r){const t=r[1].split(",").map((t=>parseFloat(t.trim())));4!==t.length||t.some((t=>isNaN(t)))||(e=n.apply(n,t))}}return e}o.ease=n(.25,.1,.25,1),o.linear=n(0,0,1,1),o.easeIn=o["ease-in"]=n(.42,0,1,1),o.easeOut=o["ease-out"]=n(0,0,.58,1),o.easeInOut=o["ease-in-out"]=n(.42,0,.58,1)},964:function(t,e,r){"use strict";r.r(e),r.d(e,"default",(function(){return K}));var n=r(81),i=r(101),o=r(88),s=r(135),a=r(87),l=r(291),u=r(91),c=r(98),h=r(83),p=(r(84),r(79),r(80)),f=r(92),d=r(82),y=r(90),b=r(99),m=r(94),g=r(182),S=r(1001),O=r(316),v=r(340),A=r(244),w=r(341),M=r(324);const j=p.a.getLogger("esri.layers.support.SpriteSource");class x{constructor(t,e,r,n){this.baseURL=t,this.devicePixelRatio=e,this.maxTextureSize=r,this._spriteImageFormat=n,this._isRetina=!1,this._spritesData={},this.image=null,this.width=null,this.height=null,this.loadStatus="not-loaded"}get spriteNames(){const t=[];for(const e in this._spritesData)t.push(e);return t.sort(),t}getSpriteInfo(t){return this._spritesData[t]}async load(t){if(this.baseURL){this.loadStatus="loading";try{await this._loadSprites(t),this.loadStatus="loaded"}catch{this.loadStatus="failed"}}else this.loadStatus="failed"}_loadSprites(t){this._isRetina=this.devicePixelRatio>1.15;const e=Object(c.K)(this.baseURL),r=e.query?"?"+Object(c.E)(e.query):"",n=this._isRetina?"@2x":"",s=`${e.path}${n}.${this._spriteImageFormat}${r}`,a=`${e.path}${n}.json${r}`;return Promise.all([Object(i.default)(a,t),Object(i.default)(s,{responseType:"image",...t})]).then((([t,r])=>{const n=Object.keys(t.data);if(!n||0===n.length||1===n.length&&"_ssl"===n[0]||!r||!r.data)return this._spritesData=this.image=null,this.width=this.height=0,Promise.resolve(null);this._spritesData=t.data;const i=r.data,s=Math.max(this.maxTextureSize,4096);if(i.width>s||i.height>s){const t=`Sprite resource for style ${e.path} is bigger than the maximum allowed of ${s} pixels}`;throw j.error(t),new o.a("SpriteSource",t)}this.width=i.width,this.height=i.height;const a=document.createElement("canvas"),l=a.getContext("2d");a.width=i.width,a.height=i.height,l.drawImage(i,0,0,i.width,i.height);const u=l.getImageData(0,0,i.width,i.height),c=new Uint8Array(u.data);let h;for(let e=0;e<c.length;e+=4)h=c[e+3]/255,c[e]=c[e]*h,c[e+1]=c[e+1]*h,c[e+2]=c[e+2]*h;this.image=c}))}}var _=r(383),I=r(740),R=r(137),P=r(877),T=r(1077);class U{constructor(t,e,r){this.tileMapURL="",this.tilemapCache=null,this.parsedUrl=null,this.tileInfo=null,this.capabilities=null,this.tileIndex=null,this.fullExtent=null,this.name=t,this.sourceUrl=e,e&&(this.parsedUrl=Object(c.K)(this.sourceUrl));const n=this.parsedUrl.path,i=this.parsedUrl.query?"?"+Object(c.E)(this.parsedUrl.query):"",o=Object(a.a)(r),s=o.tiles;e&&s.forEach(((t,e)=>{Object(c.s)(t)||(s[e]=Object(c.z)(n,t)+i)})),this.tileServers=s,r.tileMap&&(this.tileMapURL=Object(c.z)(e,r.tileMap));const l=r.capabilities&&r.capabilities.split(",").map((t=>t.toLowerCase().trim())),u=!!r.exportTilesAllowed,h=!!l&&-1!==l.indexOf("tilemap"),p=u&&r.hasOwnProperty("maxExportTilesCount")?r.maxExportTilesCount:0;this.capabilities={operations:{supportsExportTiles:u,supportsTileMap:h},exportTiles:u?{maxExportTilesCount:+p}:null},this.tileInfo=Object(P.a)(o.tileInfo,o,null,{ignoreMinMaxLOD:!0}),h&&(this.type="vector-tile",this.tilemapCache=new I.a({layer:this}),this.tilemapCache&&(this.tileIndex=new T.a(this.tilemapCache))),this.fullExtent=b.a.fromJSON(r.fullExtent)}getRefKey(t,e){return this.tileIndex?this.tileIndex.dataKey(t,e):Promise.resolve(t)}getSourceTileUrl(t,e,r){let n=this.tileServers[e%this.tileServers.length];return n=n.replace(/\{z\}/gi,t.toString()).replace(/\{y\}/gi,e.toString()).replace(/\{x\}/gi,r.toString()),n}isCompatibleWith(t){const e=this.tileInfo,r=t.tileInfo;if(!e.spatialReference.equals(r.spatialReference))return!1;if(!e.origin.equals(r.origin))return!1;if(Math.round(e.dpi)!==Math.round(r.dpi))return!1;const n=e.lods,i=r.lods,o=Math.min(n.length,i.length);for(let s=0;s<o;s++){const t=n[s],e=i[s];if(t.level!==e.level||Math.round(t.scale)!==Math.round(e.scale))return!1}return!0}}const E=R.a.defaults&&R.a.defaults.io.corsEnabledServers;function C(t){if(!t)return;const e=Object(c.m)(t);E&&-1===E.indexOf(e)&&E.push(e)}function L(...t){let e;for(let r=0;r<t.length;++r)if(Object(c.w)(t[r])){if(e){const n=e.split("://")[0];e=n+":"+t[r].trim()}}else e=Object(c.s)(t[r])?t[r]:Object(c.z)(e,t[r]);return Object(c.I)(e)}async function D(t,e,r,n,o){let s,a,l;if(Object(u.v)(o),"string"==typeof r){const t=Object(c.D)(r);C(t);const e=Object(c.K)(t);l=await Object(i.default)(e.path,{query:{f:"json"},responseType:"json",...o}),s=t,a=t}else l={data:r},s=r.jsonUrl||null,a=n;const h=l.data;return l.ssl&&(s&&(s=s.replace(/^http:/i,"https:")),a&&(a=a.replace(/^http:/i,"https:"))),N(h)?(t.styleUrl=s||null,async function(t,e,r,n){const i=r?Object(c.G)(r):c.f;t.styleBase=i,t.style=e,t.styleUrl&&C(t.styleUrl),e["sprite-format"]&&"webp"===e["sprite-format"].toLowerCase()&&(t.spriteFormat="webp");const o=[];if(e.sources&&e.sources.esri){const r=e.sources.esri;r.url?await D(t,"esri",L(i,r.url),void 0,n):o.push(D(t,"esri",r,i,n))}for(const s of Object.keys(e.sources))"esri"!==s&&"vector"===e.sources[s].type&&(e.sources[s].url?o.push(D(t,s,L(i,e.sources[s].url),void 0,n)):e.sources[s].tiles&&o.push(D(t,s,e.sources[s],i,n)));await Promise.all(o)}(t,h,a,o)):function(t){return!N(t)}(h)?t.sourceUrl?q(t,h,a,!1,e,o):(t.sourceUrl=s||null,q(t,h,a,!0,e,o)):Promise.reject("You must specify the URL or the JSON for a service or for a style.")}function N(t){return!!t.sources}async function q(t,e,r,n,i,o){const s=r?Object(c.I)(r)+"/":c.f,a=function(t,e){if(t.hasOwnProperty("tileInfo"))return t;const r={xmin:-20037507.067161843,ymin:-20037507.067161843,xmax:20037507.067161843,ymax:20037507.067161843,spatialReference:{wkid:102100}},n=512;let i=78271.51696400007,o=295828763.7957775;const s=[],a=t.hasOwnProperty("minzoom")?parseFloat(t.minzoom):0,l=t.hasOwnProperty("maxzoom")?parseFloat(t.maxzoom):22;for(let u=0;u<=l;u++)u>=a&&s.push({level:u,scale:o,resolution:i}),i/=2,o/=2;for(const u of t.tiles)C(L(e,u));return{capabilities:"TilesOnly",initialExtent:r,fullExtent:r,minScale:0,maxScale:0,tiles:t.tiles,tileInfo:{rows:n,cols:n,dpi:96,format:"pbf",origin:{x:-20037508.342787,y:20037508.342787},lods:s,spatialReference:{wkid:102100}}}}(e,s),l=new U(i,s,a);if(!n&&t.primarySourceName in t.sourceNameToSource){const e=t.sourceNameToSource[t.primarySourceName];if(!e.isCompatibleWith(l))return Promise.resolve();null!=l.fullExtent&&(null!=e.fullExtent?e.fullExtent.union(l.fullExtent):e.fullExtent=l.fullExtent.clone()),e.tileInfo.lods.length<l.tileInfo.lods.length&&(e.tileInfo=l.tileInfo)}if(n?(t.sourceBase=s,t.source=e,t.validatedSource=a,t.primarySourceName=i,t.sourceUrl&&C(t.sourceUrl)):C(s),t.sourceNameToSource[i]=l,!t.style)return null==e.defaultStyles?Promise.reject():"string"==typeof e.defaultStyles?D(t,"",L(s,e.defaultStyles,"root.json"),void 0,o):D(t,"",e.defaultStyles,L(s,"root.json"),o)}var k=r(754),z=r(500);class B{constructor(t,e){this.lockedSchemaPixelSize=t,this.isGCS=e}getLevelRowColumn(t){return this.isGCS?[t[0],t[1]>>1,t[2]>>1]:256===this.lockedSchemaPixelSize&&t[0]>0?[t[0]-1,t[1]>>1,t[2]>>1]:t}adjustLevel(t){return this.isGCS?t:256===this.lockedSchemaPixelSize?t>0?t-1:0:t}getShift(t,e){let r=0,n=0;return(256===this.lockedSchemaPixelSize||this.isGCS)&&(t[2]%2&&(r=e),t[1]%2&&(n=e)),[r,n]}getScale(t){if(this.isGCS){if(512===this.lockedSchemaPixelSize)return 4}else if(256===this.lockedSchemaPixelSize&&0===t)return 1;return 2}static create256x256CompatibleTileInfo(t){if(!t)return null;if(256===t.size[0]&&256===t.size[1])return t;const e=t.spatialReference.isGeographic,r=[],n=t.lods.length;for(let i=0;i<n;i++){const n=t.lods[i],o=e?n.resolution:2*n.resolution;r.push(new z.a({level:n.level,scale:n.scale,resolution:o}))}return new _.a({size:[256,256],dpi:t.dpi,format:t.format,compressionQuality:t.compressionQuality,origin:t.origin,spatialReference:t.spatialReference,lods:r})}static create512x512CompatibleTileInfo(t){if(!t)return null;if(256===t.size[0]||256===t.size[1])return null;const e=[],r=t.lods.length;for(let n=0;n<r;n++){const r=t.lods[n],i=.5*r.resolution;e.push(new z.a({level:r.level,scale:r.scale,resolution:i}))}return new _.a({size:[512,512],dpi:t.dpi,format:t.format,compressionQuality:t.compressionQuality,origin:t.origin,spatialReference:t.spatialReference,lods:e})}}const F=1e-6;function G(t,e){if(t===e)return!0;if(!t&&null!=e)return!1;if(null!=t&&!e)return!1;if(!t.spatialReference.equals(e.spatialReference)||t.dpi!==e.dpi)return!1;const r=t.origin,n=e.origin;if(Math.abs(r.x-n.x)>=F||Math.abs(r.y-n.y)>=F)return!1;let i,o;t.lods[0].scale>e.lods[0].scale?(i=t,o=e):(o=t,i=e);for(let s=i.lods[0].scale;s>=o.lods[o.lods.length-1].scale-F;s/=2)if(Math.abs(s-o.lods[0].scale)<F)return!0;return!1}function $(t,e){if(t===e)return t;if(!t&&null!=e)return e;if(null!=t&&!e)return t;const r=t.size[0],n=t.format,i=t.dpi,o={x:t.origin.x,y:t.origin.y},s=t.spatialReference.toJSON(),a=t.lods[0].scale>e.lods[0].scale?t.lods[0]:e.lods[0],l=t.lods[t.lods.length-1].scale<=e.lods[e.lods.length-1].scale?t.lods[t.lods.length-1]:e.lods[e.lods.length-1],u=a.scale,c=a.resolution,h=l.scale,p=[];let f=u,d=c,y=0;for(;f>h;)p.push({level:y,resolution:d,scale:f}),y++,f/=2,d/=2;return new _.a({size:[r,r],dpi:i,format:n||"pbf",origin:o,lods:p,spatialReference:s})}var Q=r(1009),V=r(540);let W=class extends(Object(v.a)(Object(M.a)(Object(S.a)(Object(O.a)(Object(A.a)(Object(w.a)(Object(l.a)(g.a)))))))){constructor(...t){super(...t),this._spriteSourceMap=new Map,this.currentStyleInfo=null,this.style=null,this.isReference=null,this.operationalLayerType="VectorTileLayer",this.type="vector-tile",this.url=null,this.symbolCollisionBoxesVisible=!1}normalizeCtorArgs(t,e){return"string"==typeof t?{url:t,...e}:t}destroy(){this._spriteSourceMap.clear()}async prefetchResources(t){await this.loadSpriteSource(s.a.devicePixelRatio||1,t)}load(t){const e=this.loadFromPortal({supportedTypes:["Vector Tile Service"],supportsData:!1},t).catch(u.u).then((async()=>{if(!this.portalItem||!this.portalItem.id)return;const e=`${this.portalItem.itemUrl}/resources/styles/root.json`;(await Object(i.default)(e,{...t,query:{f:"json"}})).data&&this.read({url:e},Object(k.a)(this.portalItem))})).catch(u.u).then((()=>this._loadStyle(t)));return this.addResolvingPromise(e),Promise.resolve(this)}get attributionDataUrl(){const t=this.currentStyleInfo,e=t&&t.serviceUrl&&Object(c.K)(t.serviceUrl);return e?this._getDefaultAttribution(e.path):null}get capabilities(){const t=this._getPrimarySource();return t?t.capabilities:{operations:{supportsExportTiles:!1,supportsTileMap:!1},exportTiles:null}}get fullExtent(){const t=this._getPrimarySource();return t?t.fullExtent:null}get parsedUrl(){return this.serviceUrl?Object(c.K)(this.serviceUrl):null}get serviceUrl(){return this.currentStyleInfo&&this.currentStyleInfo.serviceUrl||null}get spatialReference(){return this.tileInfo&&this.tileInfo.spatialReference||null}get styleUrl(){return this.currentStyleInfo&&this.currentStyleInfo.styleUrl||null}writeStyleUrl(t,e){t&&Object(c.w)(t)&&(t=`https:${t}`),e.styleUrl=t}get tileIndexType(){const t=this._getPrimarySource();return t?t.type:""}get tileIndexUrl(){const t=this._getPrimarySource();return t?t.tileMapURL:""}get tileInfo(){var t;const e=[];for(const n in this.sourceNameToSource)e.push(this.sourceNameToSource[n]);let r=(null==(t=this._getPrimarySource())?void 0:t.tileInfo)||new _.a;if(e.length>1)for(let n=0;n<e.length;n++)G(r,e[n].tileInfo)&&(r=$(r,e[n].tileInfo));return r}get tilemapCache(){const t=this._getPrimarySource();return t&&t.capabilities.operations.supportsTileMap?t.tilemapCache:null}get tileServers(){const t=this._getPrimarySource();return t?t.tileServers:[]}readVersion(t,e){return e.version?parseFloat(e.version):parseFloat(e.currentVersion)}get compatibleTileInfo256(){return B.create256x256CompatibleTileInfo(this.tileInfo)}get compatibleTileInfo512(){return B.create512x512CompatibleTileInfo(this.tileInfo)}async loadSpriteSource(t=1,e){if(!this._spriteSourceMap.has(t)){const r=Object(V.a)(),n=new x(this.styleRepository.sprite,t,r.maxTextureSize,this.currentStyleInfo.spriteFormat);await n.load(e),this._spriteSourceMap.set(t,n)}return Promise.resolve(this._spriteSourceMap.get(t))}async loadStyle(t,e){const r=t||this.style||this.url;if(this._loadingPromise&&"string"==typeof r&&this.url===r&&!Object(u.n)(this._abortController))return this._loadingPromise;const n=this._abortController;n&&n.abort();const i=Object(u.d)();return this._loadingPromise=new Promise(((t,n)=>{const o={signal:i.signal};this._spriteSourceMap.clear(),this._getSourceAndStyle(r,o).then(t,n),Object(u.q)(e,(()=>{i.abort()}))})),this._abortController=i,this._loadingPromise}getStyleLayerId(t){return this.styleRepository.getStyleLayerId(t)}getStyleLayerIndex(t){return this.styleRepository.getStyleLayerIndex(t)}getPaintProperties(t){return Object(a.a)(this.styleRepository.getPaintProperties(t))}setPaintProperties(t,e){const r=this.styleRepository.isPainterDataDriven(t);this.styleRepository.setPaintProperties(t,e);const n=this.styleRepository.isPainterDataDriven(t);this.emit("paint-change",{layer:t,paint:e,isDataDriven:r||n})}getStyleLayer(t){return Object(a.a)(this.styleRepository.getStyleLayer(t))}setStyleLayer(t,e){this.styleRepository.setStyleLayer(t,e),this.emit("style-layer-change",{layer:t,index:e})}deleteStyleLayer(t){this.styleRepository.deleteStyleLayer(t),this.emit("delete-style-layer",{layer:t})}getLayoutProperties(t){return Object(a.a)(this.styleRepository.getLayoutProperties(t))}setLayoutProperties(t,e){this.styleRepository.setLayoutProperties(t,e),this.emit("layout-change",{layer:t,layout:e})}setStyleLayerVisibility(t,e){this.styleRepository.setStyleLayerVisibility(t,e),this.emit("style-layer-visibility-change",{layer:t,visibility:e})}getStyleLayerVisibility(t){return this.styleRepository.getStyleLayerVisibility(t)}getTileUrl(t,e,r){let n=this.tileServers[e%this.tileServers.length];return n=n.replace(/\{z\}/gi,t.toString()).replace(/\{y\}/gi,e.toString()).replace(/\{x\}/gi,r.toString()),n}write(t,e){return e&&e.origin&&!this.styleUrl?(e.messages&&e.messages.push(new o.a("vectortilelayer:unsupported",`VectorTileLayer (${this.title}, ${this.id}) with style defined by JSON only are not supported`,{layer:this})),null):super.write(t,e)}async _getSourceAndStyle(t,e){if(!t)throw new Error("invalid style!");const r=await async function(t,e){const r={source:null,sourceBase:null,sourceUrl:null,validatedSource:null,style:null,styleBase:null,styleUrl:null,sourceNameToSource:{},primarySourceName:"",spriteFormat:"png"},[n,i]="string"==typeof t?[t,null]:[null,t.jsonUrl],o=n?Object(c.K)(n):null;await D(r,"esri",t,i,e);const s={layerDefinition:r.validatedSource,url:n,parsedUrl:o,serviceUrl:r.sourceUrl,style:r.style,styleUrl:r.styleUrl,spriteUrl:r.style.sprite&&L(r.styleBase,r.style.sprite),spriteFormat:r.spriteFormat,glyphsUrl:r.style.glyphs&&L(r.styleBase,r.style.glyphs),sourceNameToSource:r.sourceNameToSource,primarySourceName:r.primarySourceName};return C(s.spriteUrl),C(s.glyphsUrl),s}(t,e);"webp"===r.spriteFormat&&(await function(t){const e={lossy:"UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",lossless:"UklGRhoAAABXRUJQVlA4TA0AAAAvAAAAEAcQERGIiP4HAA==",alpha:"UklGRkoAAABXRUJQVlA4WAoAAAAQAAAAAAAAAAAAQUxQSAwAAAARBxAR/Q9ERP8DAABWUDggGAAAABQBAJ0BKgEAAQAAAP4AAA3AAP7mtQAAAA==",animation:"UklGRlIAAABXRUJQVlA4WAoAAAASAAAAAAAAAAAAQU5JTQYAAAD/////AABBTk1GJgAAAAAAAAAAAAAAAAAAAGQAAABWUDhMDQAAAC8AAAAQBxAREYiI/gcA"};return new Promise((r=>{const n=new Image;n.onload=()=>{n.onload=n.onerror=null,r(n.width>0&&n.height>0)},n.onerror=()=>{n.onload=n.onerror=null,r(!1)},n.src="data:image/webp;base64,"+e[t]}))}("lossy")||(r.spriteFormat="png")),this._set("currentStyleInfo",{...r}),"string"==typeof t?(this.url=t,this.style=null):(this.url=null,this.style=t),this._set("sourceNameToSource",r.sourceNameToSource),this._set("primarySourceName",r.primarySourceName),this._set("styleRepository",new Q.a(r.style,r)),this.read(r.layerDefinition,{origin:"service"}),this.emit("load-style",{})}_getDefaultAttribution(t){const e=t.match(/^https?:\/\/(?:basemaps|basemapsbeta|basemapsdev)(?:-api)?\.arcgis\.com(\/[^\/]+)?\/arcgis\/rest\/services\/([^\/]+(\/[^\/]+)*)\/vectortileserver/i),r=["OpenStreetMap_v2","OpenStreetMap_Daylight_v2","OpenStreetMap_Export_v2","OpenStreetMap_FTS_v2","OpenStreetMap_GCS_v2","World_Basemap","World_Basemap_v2","World_Basemap_Export_v2","World_Basemap_GCS_v2","World_Basemap_WGS84","World_Contours_v2"];if(!e)return;const n=e[2]&&e[2].toLowerCase();if(!n)return;const i=e[1]||"";for(const o of r)if(o.toLowerCase().indexOf(n)>-1)return Object(c.D)(`//static.arcgis.com/attribution/Vector${i}/${o}`)}_getPrimarySource(){return this.sourceNameToSource&&this.primarySourceName in this.sourceNameToSource?this.sourceNameToSource[this.primarySourceName]:null}async _loadStyle(t){return this._loadingPromise?this._loadingPromise:this.loadStyle(null,t)}};Object(n.a)([Object(h.b)({readOnly:!0})],W.prototype,"attributionDataUrl",null),Object(n.a)([Object(h.b)({type:["show","hide"]})],W.prototype,"listMode",void 0),Object(n.a)([Object(h.b)({readOnly:!0,dependsOn:["sourceNameToSource","primarySourceName"],json:{read:!1}})],W.prototype,"capabilities",null),Object(n.a)([Object(h.b)({readOnly:!0})],W.prototype,"currentStyleInfo",void 0),Object(n.a)([Object(h.b)({json:{read:!1},readOnly:!0,type:b.a})],W.prototype,"fullExtent",null),Object(n.a)([Object(h.b)()],W.prototype,"style",void 0),Object(n.a)([Object(h.b)({type:Boolean,json:{read:!1,write:{enabled:!0,overridePolicy:()=>({enabled:!1})}}})],W.prototype,"isReference",void 0),Object(n.a)([Object(h.b)({type:["VectorTileLayer"]})],W.prototype,"operationalLayerType",void 0),Object(n.a)([Object(h.b)({readOnly:!0})],W.prototype,"parsedUrl",null),Object(n.a)([Object(h.b)({readOnly:!0})],W.prototype,"serviceUrl",null),Object(n.a)([Object(h.b)({type:m.a,readOnly:!0})],W.prototype,"spatialReference",null),Object(n.a)([Object(h.b)({readOnly:!0})],W.prototype,"styleRepository",void 0),Object(n.a)([Object(h.b)({readOnly:!0})],W.prototype,"sourceNameToSource",void 0),Object(n.a)([Object(h.b)({readOnly:!0})],W.prototype,"primarySourceName",void 0),Object(n.a)([Object(h.b)({type:String,readOnly:!0,json:{write:{ignoreOrigin:!0},origins:{"web-document":{write:{ignoreOrigin:!0,isRequired:!0}}}}})],W.prototype,"styleUrl",null),Object(n.a)([Object(y.a)(["portal-item","web-document"],"styleUrl")],W.prototype,"writeStyleUrl",null),Object(n.a)([Object(h.b)({json:{read:!1},readOnly:!0})],W.prototype,"tileIndexType",null),Object(n.a)([Object(h.b)({json:{read:!1},readOnly:!0})],W.prototype,"tileIndexUrl",null),Object(n.a)([Object(h.b)({json:{read:!1,origins:{service:{read:!1}}},readOnly:!0,type:_.a})],W.prototype,"tileInfo",null),Object(n.a)([Object(h.b)({json:{read:!1},readOnly:!0,type:I.a})],W.prototype,"tilemapCache",null),Object(n.a)([Object(h.b)({json:{read:!1},readOnly:!0})],W.prototype,"tileServers",null),Object(n.a)([Object(h.b)({json:{read:!1},readOnly:!0,value:"vector-tile"})],W.prototype,"type",void 0),Object(n.a)([Object(h.b)({json:{origins:{"web-document":{read:{source:"styleUrl"}},"portal-item":{read:{source:"url"}}},write:!1,read:!1}})],W.prototype,"url",void 0),Object(n.a)([Object(h.b)({readOnly:!0})],W.prototype,"version",void 0),Object(n.a)([Object(f.a)("version",["version","currentVersion"])],W.prototype,"readVersion",null),Object(n.a)([Object(h.b)({readOnly:!0})],W.prototype,"compatibleTileInfo256",null),Object(n.a)([Object(h.b)({readOnly:!0})],W.prototype,"compatibleTileInfo512",null),Object(n.a)([Object(h.b)({type:Boolean})],W.prototype,"symbolCollisionBoxesVisible",void 0),W=Object(n.a)([Object(d.a)("esri.layers.VectorTileLayer")],W);var K=W}}]);
//# sourceMappingURL=124.1897eff0.chunk.js.map