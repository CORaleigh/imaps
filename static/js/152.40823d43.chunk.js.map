{"version":3,"sources":["../node_modules/@arcgis/core/geometry/support/rotate.js","../node_modules/@arcgis/core/views/draw/support/Box.js","../node_modules/@arcgis/core/renderers/support/clickToleranceUtils.js","../node_modules/@arcgis/core/views/support/drapedUtils.js","../node_modules/@arcgis/core/views/interactive/GraphicManipulator.js","../node_modules/@arcgis/core/views/draw/support/input/GraphicMoverEvents.js","../node_modules/@arcgis/core/views/draw/support/GraphicMover.js"],"names":["i","n","e","t","r","length","o","slice","push","s","x","y","l","a","c","spatialReference","f","Math","PI","m","cos","sin","p","u","center","rings","xmin","ymin","ymax","xmax","extent","paths","h","reverse","g","z","points","R","constructor","this","graphics","mover","dx","dy","type","M","I","C","angle","E","j","O","xScale","yScale","L","B","G","transformGraphics","Y","centerIndicator","d","style","size","color","fill","default","outline","outlineColor","join","width","active","stagedColor","handles","vertex","hover","hoverSize","hoverColor","hoverOutlineColor","rotator","rotatorLine","line","N","EventedAccessor","super","_activeHandleGraphic","_graphicAttributes","esriSketchTool","_handles","_mover","_rotateGraphicOffset","_angleOfRotation","_rotateLineGraphic","_startInfo","_totalDx","_totalDy","_xScale","_yScale","callbacks","onMoveStart","onMove","onMoveStop","onScaleStart","onScale","onScaleStop","onRotateStart","onRotate","onRotateStop","onGraphicClick","centerGraphic","backgroundGraphic","enableMovement","enableRotation","enableScaling","handleGraphics","layer","preserveAspectRatio","rotateGraphic","showCenterGraphic","view","_getBounds","v","Number","POSITIVE_INFINITY","NEGATIVE_INFINITY","min","max","initialize","_setup","add","_","w","_scaleGraphic","_updateGraphics","_updateRotateGraphic","_updateRotateLineGraphic","refresh","_resetGraphics","destroy","_reset","removeAll","get","_set","isUIGraphic","concat","includes","move","geometry","_emitMoveStopEvent","scale","_emitScaleStopEvent","rotate","k","_emitRotateStopEvent","reset","state","_setupGraphics","_setupMover","_resetGraphicStateVars","cursor","removeMany","remove","enableMoveAllGraphics","_onGraphicClickCallback","onGraphicMoveStart","_onGraphicMoveStartCallback","onGraphicMove","_onGraphicMoveCallback","onGraphicMoveStop","_onGraphicMoveStopCallback","onGraphicPointerOver","_onGraphicPointerOverCallback","onGraphicPointerOut","_onGraphicPointerOutCallback","_getStartInfo","_getBoxBounds","abs","height","centerX","centerY","startX","startY","graphicInfos","_getGraphicInfos","box","map","_getGraphicInfo","viewEvent","stopPropagation","emit","symbols","graphic","_hideGraphicsBeforeUpdate","symbol","_emitRotateStartEvent","_emitScaleStartEvent","_emitMoveStartEvent","_emitScaleEvent","_rotateGraphic","_emitRotateEvent","_moveGraphic","_emitMoveEvent","_showGraphicsAfterUpdate","rotation","index","resolution","transform","indexOf","_updateX","_updateY","b","_updateBackgroundGraphic","S","_hasExtentGraphic","addMany","_updateHandleGraphics","_updateCenterGraphic","visible","forEach","_getCoordinates","_updateXY","some","prototype","readOnly","value","A","xoffset","yoffset","stops","filter","maxSize","minSize","floor","renderer","event","pointerType","visualVariables","uniqueValueInfos","classBreakInfos","overlayPixelSizeInMapUnits","basemapSpatialReference","equals","toMap","intersects","getLogger","interactive","selectable","grabbable","dragging","events","EventEmitter","_circleCollisionCache","_graphicSymbolChangedHandle","_originalSymbol","attachSymbolChanged","error","elevationInfo","offset","mode","_get","_updateGraphicSymbol","grabbableForEvent","action","detachSymbolChanged","_resetGraphicSymbol","intersectionDistance","_intersectDistance2D","_intersectDistance3D","attach","detach","watch","focusedSymbol","_focused","originalPoint","clone","mapPoint","radiusPx","toScreen","include","renderSpatialReference","camera","eye","constructOnly","nonNullable","allGraphics","totalDx","totalDy","defaultPrevented","preventDefault","_activeGraphic","_dragEvent","_hoverGraphic","_initialDragGeometry","_viewHandles","_manipulators","onGraphicDoubleClick","onGraphicPointerDown","onGraphicPointerUp","_setUpManipulators","on","_clickHandler","TOOL","_doubleClickHandler","_pointerDownHandler","_pointerMoveHandler","_pointerUpHandler","_dragHandler","_keyDownHandler","updateGeometry","set","_findTargetGraphic","origin","key","MAX_VALUE"],"mappings":"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","file":"static/js/152.40823d43.chunk.js","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport n from\"../Point.js\";import e from\"../Multipoint.js\";import t from\"../Polygon.js\";import r from\"../Polyline.js\";import\"../../geometry.js\";function i(n){let e=0,t=0;const r=n.length;let i,o=n[t];for(t=0;t<r-1;t++)i=n[t+1],e+=(i[0]-o[0])*(i[1]+o[1]),o=i;return e>=0}function o(n,e,t,r){const i=[];for(const o of n){const n=o.slice(0);i.push(n);const s=e*(o[0]-r.x)-t*(o[1]-r.y)+r.x,l=t*(o[0]-r.x)+e*(o[1]-r.y)+r.y;n[0]=s,n[1]=l}return i}function s(s,l,a){const c=s.spatialReference,f=l*Math.PI/180,m=Math.cos(f),x=Math.sin(f);var p,u;\"xmin\"in s&&(a=null!=(p=a)?p:s.center,s=new t({spatialReference:c,rings:[[[s.xmin,s.ymin],[s.xmin,s.ymax],[s.xmax,s.ymax],[s.xmax,s.ymin],[s.xmin,s.ymin]]]}));if(\"paths\"in s){var y;a=null!=(y=a)?y:s.extent.center;const n=[];for(const e of s.paths)n.push(o(e,m,x,a));return new r({spatialReference:c,paths:n})}if(\"rings\"in s){var h;a=null!=(h=a)?h:s.extent.center;const n=[];for(const e of s.rings){const t=i(e),r=o(e,m,x,a);i(r)!==t&&r.reverse(),n.push(r)}return new t({spatialReference:c,rings:n})}if(\"x\"in s){var g;a=null!=(g=a)?g:s;const e=new n({x:m*(s.x-a.x)-x*(s.y-a.y)+a.x,y:x*(s.x-a.x)+m*(s.y-a.y)+a.y,spatialReference:c});return null!=s.z&&(e.z=s.z),null!=s.m&&(e.m=s.m),e}return\"points\"in s?(a=null!=(u=a)?u:s.extent.center,new e({points:o(s.points,m,x,a),spatialReference:c})):null}export default s;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{_ as t}from\"../../../chunks/tslib.es6.js\";import\"../../../core/has.js\";import{isSome as e}from\"../../../core/maybe.js\";import\"../../../core/Logger.js\";import\"../../../core/accessorSupport/ensureType.js\";import{property as i}from\"../../../core/accessorSupport/decorators/property.js\";import{subclass as s}from\"../../../core/accessorSupport/decorators/subclass.js\";import\"../../../core/urlUtils.js\";import\"../../../core/uuid.js\";import\"../../../portal/support/resourceExtension.js\";import r from\"../../../geometry/Point.js\";import{geometryToCoordinates as a}from\"../../../geometry/support/coordsUtils.js\";import{getRingsOrPathsBounds as o}from\"../../../geometry/support/boundsUtils.js\";import h from\"../../../geometry/Polygon.js\";import c from\"../../../geometry/Polyline.js\";import\"../../../geometry.js\";import n from\"../../../core/Evented.js\";import l from\"../../../symbols/SimpleLineSymbol.js\";import p from\"../../../symbols/SimpleFillSymbol.js\";import d from\"../../../symbols/SimpleMarkerSymbol.js\";import m from\"../../../Graphic.js\";import u from\"../../../core/Handles.js\";import{whenOnce as _,pausable as g}from\"../../../core/watchUtils.js\";import{create as v}from\"../../../geometry/support/aaBoundingRect.js\";import{settings as G}from\"./settings.js\";import{cloneMove as y,scale as f,getScaleRatio as b,getRotationAngle as S}from\"./drawUtils.js\";import{addUniqueLayer as w}from\"./layerUtils.js\";import k from\"../../../geometry/support/rotate.js\";import x from\"./GraphicMover.js\";class R{constructor(t,e,i,s){this.graphics=t,this.mover=e,this.dx=i,this.dy=s,this.type=\"move-start\"}}class M{constructor(t,e,i,s){this.graphics=t,this.mover=e,this.dx=i,this.dy=s,this.type=\"move\"}}class I{constructor(t,e,i,s){this.graphics=t,this.mover=e,this.dx=i,this.dy=s,this.type=\"move-stop\"}}class C{constructor(t,e,i){this.graphics=t,this.mover=e,this.angle=i,this.type=\"rotate-start\"}}class E{constructor(t,e,i){this.graphics=t,this.mover=e,this.angle=i,this.type=\"rotate\"}}class j{constructor(t,e,i){this.graphics=t,this.mover=e,this.angle=i,this.type=\"rotate-stop\"}}class O{constructor(t,e,i,s){this.graphics=t,this.mover=e,this.xScale=i,this.yScale=s,this.type=\"scale-start\"}}class L{constructor(t,e,i,s){this.graphics=t,this.mover=e,this.xScale=i,this.yScale=s,this.type=\"scale\"}}class z{constructor(t,e,i,s){this.graphics=t,this.mover=e,this.xScale=i,this.yScale=s,this.type=\"scale-stop\"}}const B=G.transformGraphics,Y={centerIndicator:new d({style:\"cross\",size:B.center.size,color:B.center.color}),fill:{default:new p({color:B.fill.color,outline:{color:B.fill.outlineColor,join:\"round\",width:1}}),active:new p({color:B.fill.stagedColor,outline:{color:B.fill.outlineColor,join:\"round\",style:\"dash\",width:1}})},handles:{default:new d({style:\"square\",size:B.vertex.size,color:B.vertex.color,outline:{color:B.vertex.outlineColor,width:1}}),hover:new d({style:\"square\",size:B.vertex.hoverSize,color:B.vertex.hoverColor,outline:{color:B.vertex.hoverOutlineColor,width:1}})},rotator:{default:new d({style:\"circle\",size:B.vertex.size,color:B.vertex.color,outline:{color:B.vertex.outlineColor,width:1}}),hover:new d({style:\"circle\",size:B.vertex.hoverSize,color:B.vertex.hoverColor,outline:{color:B.vertex.hoverOutlineColor,width:1}})},rotatorLine:new l({color:B.line.color,width:1})};let N=class extends n.EventedAccessor{constructor(t){super(t),this._activeHandleGraphic=null,this._graphicAttributes={esriSketchTool:\"box\"},this._handles=new u,this._mover=null,this._rotateGraphicOffset=20,this._angleOfRotation=0,this._rotateLineGraphic=null,this._startInfo=null,this._totalDx=0,this._totalDy=0,this._xScale=1,this._yScale=1,this.type=\"box\",this.callbacks={onMoveStart(){},onMove(){},onMoveStop(){},onScaleStart(){},onScale(){},onScaleStop(){},onRotateStart(){},onRotate(){},onRotateStop(){},onGraphicClick(){}},this.centerGraphic=null,this.backgroundGraphic=null,this.enableMovement=!0,this.enableRotation=!0,this.enableScaling=!0,this.graphics=[],this.handleGraphics=[],this.layer=null,this.preserveAspectRatio=!1,this.rotateGraphic=null,this.showCenterGraphic=!0,this.view=null,this._getBounds=(()=>{const t=v();return(e,i)=>{e[0]=Number.POSITIVE_INFINITY,e[1]=Number.POSITIVE_INFINITY,e[2]=Number.NEGATIVE_INFINITY,e[3]=Number.NEGATIVE_INFINITY;for(const s of i){if(!s)continue;let i,r,h,c;if(\"point\"===s.type)i=h=s.x,r=c=s.y;else if(\"multipoint\"===s.type){const e=a(s);[i,r,h,c]=o(t,[e])}else if(\"extent\"===s.type)[i,r,h,c]=[s.xmin,s.ymin,s.xmax,s.ymax];else{const e=a(s);[i,r,h,c]=o(t,e)}e[0]=Math.min(i,e[0]),e[1]=Math.min(r,e[1]),e[2]=Math.max(h,e[2]),e[3]=Math.max(c,e[3])}return e}})()}initialize(){this._setup(),this._handles.add([_(this,\"view.ready\",(()=>{const{layer:t,view:e}=this;w(e,t)})),g(this,\"preserveAspectRatio\",(()=>{this._activeHandleGraphic&&(this._scaleGraphic(this._activeHandleGraphic),this._updateGraphics())})),g(this,\"view.scale\",(()=>{this._updateRotateGraphic(),this._updateRotateLineGraphic()})),g(this,\"graphics\",(()=>this.refresh())),g(this,\"layer\",((t,e)=>{e&&this._resetGraphics(e),this.refresh()}))])}destroy(){this._reset(),this._handles&&(this._handles.removeAll(),this._handles=null)}get state(){const t=!!this.get(\"view.ready\"),e=!(!this.get(\"graphics.length\")||!this.get(\"layer\"));return t&&e?\"active\":t?\"ready\":\"disabled\"}set symbols(t){const{centerIndicator:e=Y.centerIndicator,fill:i=Y.fill,handles:s=Y.handles,rotator:r=Y.rotator,rotatorLine:a=Y.rotatorLine}=t||{};this._set(\"symbols\",{centerIndicator:e,fill:i,handles:s,rotator:r,rotatorLine:a})}isUIGraphic(t){let e=[];return this.handleGraphics.length&&(e=e.concat(this.handleGraphics)),this.backgroundGraphic&&e.push(this.backgroundGraphic),this.centerGraphic&&e.push(this.centerGraphic),this.rotateGraphic&&e.push(this.rotateGraphic),this._rotateLineGraphic&&e.push(this._rotateLineGraphic),e.length&&e.includes(t)}move(t,e){if(this._mover&&this.graphics.length){for(const i of this.graphics){const s=i.geometry,r=y(s,t,e,this.view);i.geometry=r}this.refresh(),this._emitMoveStopEvent(t,e,null)}}scale(t,e){if(this._mover&&this.graphics.length){for(const i of this.graphics){const s=i.geometry,r=f(s,t,e);i.geometry=r}this.refresh(),this._emitScaleStopEvent(t,e,null)}}rotate(t,e){if(this._mover&&this.graphics.length){if(!e){const t=this.handleGraphics[1].geometry.x,i=this.handleGraphics[3].geometry.y;e=new r(t,i,this.view.spatialReference)}for(const i of this.graphics){const s=i.geometry,r=k(s,t,e);i.geometry=r}this.refresh(),this._emitRotateStopEvent(t,null)}}refresh(){this._reset(),this._setup()}reset(){this.graphics=[]}_setup(){\"active\"===this.state&&(this._setupGraphics(),this._setupMover(),this._updateGraphics())}_reset(){this._resetGraphicStateVars(),this._resetGraphics(),this._mover&&this._mover.destroy(),this._mover=null,this.view.cursor=\"default\"}_resetGraphicStateVars(){this._startInfo=null,this._activeHandleGraphic=null,this._totalDx=0,this._totalDy=0,this._xScale=1,this._yScale=1,this._angleOfRotation=0}_resetGraphics(t){const e=t||this.layer;e&&(e.removeMany(this.handleGraphics),e.remove(this.backgroundGraphic),e.remove(this.centerGraphic),e.remove(this.rotateGraphic),e.remove(this._rotateLineGraphic));for(const i of this.handleGraphics)i.destroy();this._set(\"handleGraphics\",[]),this.backgroundGraphic&&(this.backgroundGraphic.destroy(),this._set(\"backgroundGraphic\",null)),this.centerGraphic&&(this.centerGraphic.destroy(),this._set(\"centerGraphic\",null)),this.rotateGraphic&&(this.rotateGraphic.destroy(),this._set(\"rotateGraphic\",null)),this._rotateLineGraphic&&(this._rotateLineGraphic.destroy(),this._rotateLineGraphic=null)}_setupMover(){let t=[].concat(this.handleGraphics);this.enableMovement&&(t=t.concat(this.graphics,this.backgroundGraphic)),this.enableRotation&&t.push(this.rotateGraphic),this.showCenterGraphic&&t.push(this.centerGraphic),this._mover=new x({enableMoveAllGraphics:!1,view:this.view,graphics:t,callbacks:{onGraphicClick:t=>this._onGraphicClickCallback(t),onGraphicMoveStart:t=>this._onGraphicMoveStartCallback(t),onGraphicMove:t=>this._onGraphicMoveCallback(t),onGraphicMoveStop:t=>this._onGraphicMoveStopCallback(t),onGraphicPointerOver:t=>this._onGraphicPointerOverCallback(t),onGraphicPointerOut:t=>this._onGraphicPointerOutCallback(t)}})}_getStartInfo(t){const[e,i,s,r]=this._getBoxBounds(v()),a=Math.abs(s-e),o=Math.abs(r-i),h=(s+e)/2,c=(r+i)/2,{x:n,y:l}=t.geometry;return{width:a,height:o,centerX:h,centerY:c,startX:n,startY:l,graphicInfos:this._getGraphicInfos(),box:this.backgroundGraphic.geometry,rotate:this.rotateGraphic.geometry}}_getGraphicInfos(){return this.graphics.map((t=>this._getGraphicInfo(t)))}_getGraphicInfo(t){const e=t.geometry,[i,s,r,a]=this._getBounds(v(),[e]);return{width:Math.abs(r-i),height:Math.abs(a-s),centerX:(r+i)/2,centerY:(a+s)/2,geometry:e}}_onGraphicClickCallback(t){t.viewEvent.stopPropagation(),this.emit(\"graphic-click\",t),this.callbacks.onGraphicClick&&this.callbacks.onGraphicClick(t)}_onGraphicMoveStartCallback(t){const{_angleOfRotation:e,_xScale:i,_yScale:s,backgroundGraphic:r,handleGraphics:a,rotateGraphic:o,symbols:h}=this,c=t.graphic;this._resetGraphicStateVars(),this._hideGraphicsBeforeUpdate(),r.symbol=h.fill.active,this._startInfo=this._getStartInfo(c),c===o?(this.view.cursor=\"grabbing\",this._emitRotateStartEvent(e,c)):a.includes(c)?(this._activeHandleGraphic=c,this._emitScaleStartEvent(i,s,c)):this._emitMoveStartEvent(t.dx,t.dy,c)}_onGraphicMoveCallback(t){const e=t.graphic;if(this._startInfo)if(this.handleGraphics.includes(e))this._scaleGraphic(e),this._emitScaleEvent(this._xScale,this._yScale,e);else if(e===this.rotateGraphic)this._rotateGraphic(e),this._emitRotateEvent(this._angleOfRotation,e);else{const i=t.dx,s=t.dy;this._totalDx+=i,this._totalDy+=s,this._moveGraphic(e,i,s),this._emitMoveEvent(i,s,e)}}_onGraphicMoveStopCallback(t){const e=t.graphic;if(!this._startInfo)return void this.refresh();const{_angleOfRotation:i,_totalDx:s,_totalDy:r,_xScale:a,_yScale:o,backgroundGraphic:h,handleGraphics:c,rotateGraphic:n,symbols:l}=this;this._updateGraphics(),this._showGraphicsAfterUpdate(),h.symbol=l.fill.default,e===n?(this.view.cursor=\"pointer\",this._emitRotateStopEvent(i,e)):c.includes(e)?this._emitScaleStopEvent(a,o,e):this._emitMoveStopEvent(s,r,e),this._resetGraphicStateVars()}_onGraphicPointerOverCallback(t){const{backgroundGraphic:e,handleGraphics:i,graphics:s,rotateGraphic:r,symbols:a,view:o}=this,h=t.graphic;if(h===r)return r.symbol=a.rotator.hover,void(o.cursor=\"pointer\");if(s.includes(h)||h===e)return void(o.cursor=\"move\");if(!i.includes(h))return void(o.cursor=\"pointer\");t.graphic.symbol=a.handles.hover;const c=o.rotation;let n,l=t.index;switch(l<8&&(c>=0&&c<45?l%=8:l=c>=45&&c<90?(l+1)%8:c>=90&&c<135?(l+2)%8:c>=135&&c<180?(l+3)%8:c>=180&&c<225?(l+4)%8:c>=225&&c<270?(l+5)%8:c>=270&&c<315?(l+6)%8:(l+7)%8),l){case 0:n=\"nwse-resize\";break;case 1:n=\"ns-resize\";break;case 2:n=\"nesw-resize\";break;case 3:n=\"ew-resize\";break;case 4:n=\"nwse-resize\";break;case 5:n=\"ns-resize\";break;case 6:n=\"nesw-resize\";break;case 7:n=\"ew-resize\";break;default:n=\"pointer\"}o.cursor=n}_onGraphicPointerOutCallback(t){const{handleGraphics:e,rotateGraphic:i,symbols:s,view:r}=this;t.graphic===i?i.symbol=s.rotator.default:e.includes(t.graphic)&&(t.graphic.symbol=s.handles.default),r.cursor=\"default\"}_scaleGraphic(t){const{_startInfo:e,handleGraphics:i,preserveAspectRatio:s,view:a}=this,{centerX:o,centerY:h,startX:c,startY:n}=e,{resolution:l,transform:p}=a.state,d=i.indexOf(t);1!==d&&5!==d||this._updateX(t,o),3!==d&&7!==d||this._updateY(t,h);const{x:m,y:u}=t.geometry,_=p[0]*m+p[2]*u+p[4],g=p[1]*m+p[3]*u+p[5],v=e.graphicInfos.map((t=>t.geometry));if(s){const t=p[0]*o+p[2]*h+p[4],e=p[1]*o+p[3]*h+p[5],i=p[0]*c+p[2]*n+p[4],s=p[1]*c+p[3]*n+p[5];this._xScale=this._yScale=b(t,e,i,s,_,g);for(const r of v){const t=v.indexOf(r);this.graphics[t].geometry=f(r,this._xScale,this._yScale,[o,h])}this._updateBackgroundGraphic()}else{const{width:t,height:i}=e;let s=m-c,p=n-u;if(1===d||5===d?s=0:3!==d&&7!==d||(p=0),0===s&&0===p)return;const _=t+(c>o?s:-1*s),g=i+(n<h?p:-1*p),G=o+s/2,b=h+p/2;this._xScale=_/t||1,this._yScale=g/i||1,1===d||5===d?this._xScale=1:3!==d&&7!==d||(this._yScale=1);const S=(G-o)/l,w=(b-h)/l,k=f(e.box,this._xScale,this._yScale);this.backgroundGraphic.geometry=y(k,S,w,a,!0);const{centerX:x,centerY:R}=this._getGraphicInfo(this.backgroundGraphic),M=(x-o)/l,I=-1*(R-h)/l;for(const e of v){const t=v.indexOf(e),i=f(e,this._xScale,this._yScale,[o,h]);this.graphics[t].geometry=y(i,M,I,a,!0)}this.centerGraphic.geometry=new r(x,R,a.spatialReference)}}_rotateGraphic(t){const{centerX:e,centerY:i,startX:s,startY:a,box:o,rotate:h}=this._startInfo,{x:c,y:n}=t.geometry,l=new r(e,i,this.view.spatialReference);this._angleOfRotation=S(e,i,s,a,c,n);const p=this._startInfo.graphicInfos.map((t=>t.geometry));for(const r of p){const t=p.indexOf(r),e=k(r,this._angleOfRotation,l);this.graphics[t].geometry=e}this.backgroundGraphic.geometry=k(o,this._angleOfRotation,l),this.rotateGraphic.geometry=k(h,this._angleOfRotation,l)}_moveGraphic(t,e,i){if(this.graphics.includes(t)){const s=this.backgroundGraphic.geometry;this.backgroundGraphic.geometry=y(s,e,i,this.view);for(const r of this.graphics)r!==t&&(r.geometry=y(r.geometry,e,i,this.view))}else if(t===this.centerGraphic){const t=this.backgroundGraphic.geometry;this.backgroundGraphic.geometry=y(t,e,i,this.view)}if(t===this.backgroundGraphic||t===this.centerGraphic)for(const s of this.graphics)s.geometry=y(s.geometry,e,i,this.view)}_setupGraphics(){const{_graphicAttributes:t,symbols:e}=this;this._set(\"centerGraphic\",new m(null,e.centerIndicator,t)),this.showCenterGraphic&&this.layer.add(this.centerGraphic),this._set(\"backgroundGraphic\",new m(null,e.fill.default,t)),this.layer.add(this.backgroundGraphic),this._rotateLineGraphic=new m(null,e.rotatorLine,t),this._set(\"rotateGraphic\",new m(null,e.rotator.default,t)),this.enableRotation&&!this._hasExtentGraphic()&&(this.layer.add(this._rotateLineGraphic),this.layer.add(this.rotateGraphic));for(let i=0;i<8;i++)this.handleGraphics.push(new m(null,e.handles.default,t));this.enableScaling&&this.layer.addMany(this.handleGraphics)}_updateGraphics(){this._updateBackgroundGraphic(),this._updateHandleGraphics(),this._updateCenterGraphic(),this._updateRotateGraphic(),this._updateRotateLineGraphic()}_hideGraphicsBeforeUpdate(){this.centerGraphic.visible=!1,this.rotateGraphic.visible=!1,this._rotateLineGraphic.visible=!1,this.handleGraphics.forEach((t=>t.visible=!1))}_showGraphicsAfterUpdate(){this.enableRotation&&(this._rotateLineGraphic.visible=!0,this.rotateGraphic.visible=!0),this.showCenterGraphic&&(this.centerGraphic.visible=!0),this.enableScaling&&this.handleGraphics.forEach((t=>t.visible=!0))}_updateHandleGraphics(){const t=this._getCoordinates(!0);this.handleGraphics.forEach(((e,i)=>{const[s,r]=t[i];this._updateXY(e,s,r)}))}_updateBackgroundGraphic(){const t=this._getCoordinates();this.backgroundGraphic.geometry=new h({rings:t,spatialReference:this.view.spatialReference})}_updateCenterGraphic(){const[t,e,i,s]=this._getBoxBounds(v()),a=(i+t)/2,o=(s+e)/2;this.centerGraphic.geometry=new r(a,o,this.view.spatialReference)}_updateRotateGraphic(){if(!this.handleGraphics.length)return;const{x:t,y:e}=this.handleGraphics[1].geometry,i=e+this.view.state.resolution*this._rotateGraphicOffset;this.rotateGraphic.geometry=new r(t,i,this.view.spatialReference)}_updateRotateLineGraphic(){if(!this.handleGraphics.length||!this.rotateGraphic||!this.rotateGraphic.geometry)return;const t=this.handleGraphics[1].geometry,e=this.rotateGraphic.geometry;this._rotateLineGraphic.geometry=new c({paths:[[t.x,t.y],[e.x,e.y]],spatialReference:this.view.spatialReference})}_updateXY(t,e,i){t.geometry=new r(e,i,this.view.spatialReference)}_updateX(t,e){const i=t.geometry.y;t.geometry=new r(e,i,this.view.spatialReference)}_updateY(t,e){const i=t.geometry.x;t.geometry=new r(i,e,this.view.spatialReference)}_hasExtentGraphic(){return this.graphics.some((t=>t&&e(t.geometry)&&\"extent\"===t.geometry.type))}_getBoxBounds(t){const e=this.graphics.map((t=>t.geometry));return this._getBounds(t,e)}_getCoordinates(t){const[e,i,s,r]=this._getBoxBounds(v());if(t){const t=(e+s)/2,a=(r+i)/2;return[[e,r],[t,r],[s,r],[s,a],[s,i],[t,i],[e,i],[e,a]]}return[[e,r],[s,r],[s,i],[e,i]]}_emitMoveStartEvent(t,e,i){const s=new R(this.graphics,i,t,e);this.emit(\"move-start\",s),this.callbacks.onMoveStart&&this.callbacks.onMoveStart(s)}_emitMoveEvent(t,e,i){const s=new M(this.graphics,i,t,e);this.emit(\"move\",s),this.callbacks.onMove&&this.callbacks.onMove(s)}_emitMoveStopEvent(t,e,i){const s=new I(this.graphics,i,t,e);this.emit(\"move-stop\",s),this.callbacks.onMoveStop&&this.callbacks.onMoveStop(s)}_emitRotateStartEvent(t,e){const i=new C(this.graphics,e,t);this.emit(\"rotate-start\",i),this.callbacks.onRotateStart&&this.callbacks.onRotateStart(i)}_emitRotateEvent(t,e){const i=new E(this.graphics,e,t);this.emit(\"rotate\",i),this.callbacks.onRotate&&this.callbacks.onRotate(i)}_emitRotateStopEvent(t,e){const i=new j(this.graphics,e,t);this.emit(\"rotate-stop\",i),this.callbacks.onRotateStop&&this.callbacks.onRotateStop(i)}_emitScaleStartEvent(t,e,i){const s=new O(this.graphics,i,t,e);this.emit(\"scale-start\",s),this.callbacks.onScaleStart&&this.callbacks.onScaleStart(s)}_emitScaleEvent(t,e,i){const s=new L(this.graphics,i,t,e);this.emit(\"scale\",s),this.callbacks.onScale&&this.callbacks.onScale(s)}_emitScaleStopEvent(t,e,i){const s=new z(this.graphics,i,t,e);this.emit(\"scale-stop\",s),this.callbacks.onScaleStop&&this.callbacks.onScaleStop(s)}};t([i()],N.prototype,\"_rotateLineGraphic\",void 0),t([i({readOnly:!0})],N.prototype,\"type\",void 0),t([i()],N.prototype,\"callbacks\",void 0),t([i({readOnly:!0})],N.prototype,\"centerGraphic\",void 0),t([i({readOnly:!0})],N.prototype,\"backgroundGraphic\",void 0),t([i()],N.prototype,\"enableMovement\",void 0),t([i()],N.prototype,\"enableRotation\",void 0),t([i()],N.prototype,\"enableScaling\",void 0),t([i()],N.prototype,\"graphics\",void 0),t([i({readOnly:!0})],N.prototype,\"handleGraphics\",void 0),t([i()],N.prototype,\"layer\",void 0),t([i()],N.prototype,\"preserveAspectRatio\",void 0),t([i({readOnly:!0})],N.prototype,\"rotateGraphic\",void 0),t([i()],N.prototype,\"showCenterGraphic\",void 0),t([i({readOnly:!0})],N.prototype,\"state\",null),t([i({value:Y})],N.prototype,\"symbols\",null),t([i()],N.prototype,\"view\",void 0),N=t([s(\"esri.views.draw.support.Box\")],N);var A=N;export default A;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nfunction t(t,e){return e?\"xoffset\"in e&&e.xoffset?Math.max(t,Math.abs(e.xoffset)):\"yoffset\"in e&&e.yoffset?Math.max(t,Math.abs(e.yoffset||0)):t:t}function e(t){let e=0,n=0;for(let r=0;r<t.length;r++){const s=t[r].size;\"number\"==typeof s&&(e+=s,n++)}return e/n}function n(t,n){return\"number\"==typeof t?t:t&&t.stops&&t.stops.length?e(t.stops):n}function r(t,e){if(!e)return t;const r=e.filter((t=>\"size\"===t.type)).map((e=>{const{maxSize:r,minSize:s}=e;return(n(r,t)+n(s,t))/2}));let s=0;const o=r.length;if(0===o)return t;for(let n=0;n<o;n++)s+=r[n];const f=Math.floor(s/o);return Math.max(f,t)}function s(e){const n=e&&e.renderer,s=\"touch\"===(e&&e.event&&e.event.pointerType)?9:6;if(!n)return s;const o=\"visualVariables\"in n?r(s,n.visualVariables):s;if(\"simple\"===n.type)return t(o,n.symbol);if(\"unique-value\"===n.type){let e=o;return n.uniqueValueInfos.forEach((n=>{e=t(e,n.symbol)})),e}if(\"class-breaks\"===n.type){let e=o;return n.classBreakInfos.forEach((n=>{e=t(e,n.symbol)})),e}return n.type,o}export{s as calculateTolerance};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{isSome as e,isNone as t}from\"../../core/maybe.js\";import r from\"../../geometry/Extent.js\";import\"../../geometry.js\";import{getMetersPerUnitForSR as n}from\"../../core/unitUtils.js\";import{calculateTolerance as i}from\"../../renderers/support/clickToleranceUtils.js\";function a(t,i,a,o=new r){let s;if(\"2d\"===a.type)s=i*a.resolution;else if(\"3d\"===a.type){const r=a.overlayPixelSizeInMapUnits(t),o=a.basemapSpatialReference;s=e(o)&&!o.equals(a.spatialReference)?n(o)/n(a.spatialReference):i*r}const m=t.x-s,p=t.y-s,c=t.x+s,l=t.y+s,{spatialReference:f}=a;return o.xmin=Math.min(m,c),o.ymin=Math.min(p,l),o.xmax=Math.max(m,c),o.ymax=Math.max(p,l),o.spatialReference=f,o}function o(e,r,n){const o=n.toMap(e);if(t(o))return!1;return a(o,i(),n,s).intersects(r)}const s=new r;export{a as createQueryGeometry,o as intersectsDrapedGeometry};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../chunks/tslib.es6.js\";import\"../../core/has.js\";import{get as t,isNone as o,isSome as i}from\"../../core/maybe.js\";import s from\"../../core/Logger.js\";import\"../../core/accessorSupport/ensureType.js\";import{property as r}from\"../../core/accessorSupport/decorators/property.js\";import{subclass as l}from\"../../core/accessorSupport/decorators/subclass.js\";import\"../../core/urlUtils.js\";import\"../../core/uuid.js\";import\"../../portal/support/resourceExtension.js\";import a from\"../../core/Accessor.js\";import n from\"../../core/Evented.js\";import{pt2px as c,screenPointObjectToArray as h,createScreenPointArray as p}from\"../../core/screenUtils.js\";import{c as m}from\"../../chunks/vec3f64.js\";import{k as u}from\"../../chunks/vec3.js\";import{canProjectWithoutEngine as y,project as g,projectPointToVector as d}from\"../../geometry/projection.js\";import b from\"../../symbols/support/ElevationInfo.js\";import{getDefaultSymbol2D as f}from\"../../symbols/support/defaults.js\";import{j as _}from\"../../chunks/vec2.js\";import{getGraphicEffectiveElevationMode as v}from\"../../support/elevationInfoUtils.js\";import{intersectsDrapedGeometry as S}from\"../support/drapedUtils.js\";const j=s.getLogger(\"esri.views.interactive.GraphicManipulator\");let C=class extends a{constructor(e){super(e),this.layer=null,this.interactive=!0,this.selectable=!1,this.grabbable=!0,this.dragging=!1,this.cursor=null,this.events=new n.EventEmitter,this._circleCollisionCache=null,this._graphicSymbolChangedHandle=null,this._originalSymbol=null}set graphic(e){\"mesh\"!==t(e.geometry,\"type\")?(this._circleCollisionCache=null,this._originalSymbol=e.symbol,this._set(\"graphic\",e),this.attachSymbolChanged()):j.error(\"Mesh geometries are not supported\")}get elevationInfo(){const e=\"elevationInfo\"in this.graphic.layer&&this.graphic.layer.elevationInfo,t=v(this.graphic),o=e?e.offset:0;return new b({mode:t,offset:o})}set focusedSymbol(e){e!==this._get(\"focusedSymbol\")&&(this._set(\"focusedSymbol\",e),this._updateGraphicSymbol(),this._circleCollisionCache=null)}grabbableForEvent(){return!0}set grabbing(e){e!==this._get(\"grabbing\")&&(this._set(\"grabbing\",e),this._updateGraphicSymbol())}set hovering(e){e!==this._get(\"hovering\")&&(this._set(\"hovering\",e),this._updateGraphicSymbol())}set selected(e){e!==this._get(\"selected\")&&(this._set(\"selected\",e),this._updateGraphicSymbol(),this.events.emit(\"select-changed\",{action:e?\"select\":\"deselect\"}))}get _focused(){return this._get(\"hovering\")||this._get(\"grabbing\")}destroy(){this.detachSymbolChanged(),this._resetGraphicSymbol(),this._set(\"view\",null)}intersectionDistance(e){const t=this.graphic;if(!1===t.visible)return null;const s=t.geometry;if(o(s))return null;const r=this._get(\"focusedSymbol\"),l=i(r)?r:t.symbol;return\"2d\"===this.view.type?this._intersectDistance2D(this.view,e,s,l):this._intersectDistance3D(this.view,e,t)}attach(){this.attachSymbolChanged(),i(this.layer)&&this.layer.add(this.graphic)}detach(){this.detachSymbolChanged(),this._resetGraphicSymbol(),i(this.layer)&&this.layer.remove(this.graphic)}attachSymbolChanged(){this.detachSymbolChanged(),this._graphicSymbolChangedHandle=this.graphic.watch(\"symbol\",(e=>{i(e)&&e!==this.focusedSymbol&&e!==this._originalSymbol&&(this._originalSymbol=e,this._focused&&i(this.focusedSymbol)&&(this.graphic.symbol=this.focusedSymbol))}),!0)}detachSymbolChanged(){i(this._graphicSymbolChangedHandle)&&(this._graphicSymbolChangedHandle.remove(),this._graphicSymbolChangedHandle=null)}_updateGraphicSymbol(){this.graphic.symbol=this._focused&&i(this.focusedSymbol)?this.focusedSymbol:this._originalSymbol}_resetGraphicSymbol(){this.graphic.symbol=this._originalSymbol}_intersectDistance2D(e,t,s,r){if(r=r||f(s),o(r))return null;const l=1;let a=this._circleCollisionCache;if(\"point\"!==s.type||\"simple-marker\"!==r.type)return S(t,s,e)?l:null;if(o(a)||!a.originalPoint.equals(s)){const t=s,o=e.spatialReference;if(y(t.spatialReference,o)){const e=g(t,o);a={originalPoint:t.clone(),mapPoint:e,radiusPx:c(r.size)},this._circleCollisionCache=a}}if(i(a)){const o=h(t,G),i=e.toScreen(a.mapPoint),s=a.radiusPx,n=i.x+c(r.xoffset),p=i.y-c(r.yoffset);return _(o,[n,p])<s*s?l:null}return null}_intersectDistance3D(e,t,o){const i=e.toMap(t,{include:[o]});return i&&d(i,w,e.renderSpatialReference)?u(w,e.state.camera.eye):null}};e([r({constructOnly:!0,nonNullable:!0})],C.prototype,\"graphic\",null),e([r({readOnly:!0})],C.prototype,\"elevationInfo\",null),e([r({constructOnly:!0,nonNullable:!0})],C.prototype,\"view\",void 0),e([r({value:null})],C.prototype,\"focusedSymbol\",null),e([r({constructOnly:!0})],C.prototype,\"layer\",void 0),e([r()],C.prototype,\"interactive\",void 0),e([r()],C.prototype,\"selectable\",void 0),e([r()],C.prototype,\"grabbable\",void 0),e([r({value:!1})],C.prototype,\"grabbing\",null),e([r()],C.prototype,\"dragging\",void 0),e([r()],C.prototype,\"hovering\",null),e([r({value:!1})],C.prototype,\"selected\",null),e([r()],C.prototype,\"cursor\",void 0),C=e([l(\"esri.views.interactive.GraphicManipulator\")],C);const w=m(),G=p();export{C as GraphicManipulator};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nclass t{constructor(t,i,s,h,e){this.graphic=t,this.index=i,this.x=s,this.y=h,this.viewEvent=e,this.type=\"graphic-click\"}}class i{constructor(t,i,s,h,e){this.graphic=t,this.index=i,this.x=s,this.y=h,this.viewEvent=e,this.type=\"graphic-double-click\"}}class s{constructor(t,i,s,h,e,r,c,a,n,p){this.graphic=t,this.allGraphics=i,this.index=s,this.x=h,this.y=e,this.dx=r,this.dy=c,this.totalDx=a,this.totalDy=n,this.viewEvent=p,this.defaultPrevented=!1,this.type=\"graphic-move-start\"}preventDefault(){this.defaultPrevented=!0}}class h{constructor(t,i,s,h,e,r,c,a,n,p){this.graphic=t,this.allGraphics=i,this.index=s,this.x=h,this.y=e,this.dx=r,this.dy=c,this.totalDx=a,this.totalDy=n,this.viewEvent=p,this.defaultPrevented=!1,this.type=\"graphic-move\"}preventDefault(){this.defaultPrevented=!0}}class e{constructor(t,i,s,h,e,r,c,a,n,p){this.graphic=t,this.allGraphics=i,this.index=s,this.x=h,this.y=e,this.dx=r,this.dy=c,this.totalDx=a,this.totalDy=n,this.viewEvent=p,this.defaultPrevented=!1,this.type=\"graphic-move-stop\"}preventDefault(){this.defaultPrevented=!0}}class r{constructor(t,i,s,h,e){this.graphic=t,this.index=i,this.x=s,this.y=h,this.viewEvent=e,this.type=\"graphic-pointer-over\"}}class c{constructor(t,i,s,h,e){this.graphic=t,this.index=i,this.x=s,this.y=h,this.viewEvent=e,this.type=\"graphic-pointer-out\"}}class a{constructor(t,i,s,h,e){this.graphic=t,this.index=i,this.x=s,this.y=h,this.viewEvent=e,this.type=\"graphic-pointer-down\"}}class n{constructor(t,i,s,h,e){this.graphic=t,this.index=i,this.x=s,this.y=h,this.viewEvent=e,this.type=\"graphic-pointer-up\"}}export{t as GraphicClickEvent,i as GraphicDoubleClickEvent,h as GraphicMoveEvent,s as GraphicMoveStartEvent,e as GraphicMoveStopEvent,a as GraphicPointerDownEvent,c as GraphicPointerOutEvent,r as GraphicPointerOverEvent,n as GraphicPointerUpEvent};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{_ as i}from\"../../../chunks/tslib.es6.js\";import\"../../../core/has.js\";import{clone as t}from\"../../../core/lang.js\";import{isSome as e}from\"../../../core/maybe.js\";import\"../../../core/Logger.js\";import\"../../../core/accessorSupport/ensureType.js\";import{property as r}from\"../../../core/accessorSupport/decorators/property.js\";import{subclass as s}from\"../../../core/accessorSupport/decorators/subclass.js\";import\"../../../core/urlUtils.js\";import\"../../../core/uuid.js\";import\"../../../portal/support/resourceExtension.js\";import a from\"../../../core/Evented.js\";import o from\"../../../core/Handles.js\";import{watch as h,whenOnce as c}from\"../../../core/watchUtils.js\";import{ViewEventPriorities as n}from\"../../input/InputManager.js\";import{createScreenPointFromEvent as p}from\"../../support/screenUtils.js\";import{cloneMove as l}from\"./drawUtils.js\";import{GraphicManipulator as v}from\"../../interactive/GraphicManipulator.js\";import{GraphicClickEvent as d,GraphicDoubleClickEvent as g,GraphicPointerDownEvent as _,GraphicPointerUpEvent as m,GraphicPointerOutEvent as G,GraphicMoveStartEvent as u,GraphicMoveEvent as y,GraphicMoveStopEvent as f,GraphicPointerOverEvent as w}from\"./input/GraphicMoverEvents.js\";let k=class extends a.EventedAccessor{constructor(i){super(i),this._activeGraphic=null,this._dragEvent=null,this._handles=new o,this._hoverGraphic=null,this._initialDragGeometry=null,this._viewHandles=new o,this._manipulators=[],this.type=\"graphic-mover\",this.callbacks={onGraphicClick(){},onGraphicDoubleClick(){},onGraphicMoveStart(){},onGraphicMove(){},onGraphicMoveStop(){},onGraphicPointerOver(){},onGraphicPointerOut(){},onGraphicPointerDown(){},onGraphicPointerUp(){}},this.enableMoveAllGraphics=!1,this.graphics=[],this.view=null}initialize(){this._setUpManipulators(),this._handles.add([h(this,[\"graphics\",\"graphics.length\"],(()=>{this._setUpManipulators()})),c(this,\"view.ready\",(()=>{this._viewHandles.add([this.view.on(\"immediate-click\",(i=>this._clickHandler(i)),n.TOOL),this.view.on(\"double-click\",(i=>this._doubleClickHandler(i)),n.TOOL),this.view.on(\"pointer-down\",(i=>this._pointerDownHandler(i)),n.TOOL),this.view.on(\"pointer-move\",(i=>this._pointerMoveHandler(i)),n.TOOL),this.view.on(\"pointer-up\",(i=>this._pointerUpHandler(i)),n.TOOL),this.view.on(\"drag\",(i=>this._dragHandler(i)),n.TOOL),this.view.on(\"key-down\",(i=>this._keyDownHandler(i)),n.TOOL)])}))])}destroy(){this.reset(),this._manipulators.forEach((i=>i.destroy())),this._manipulators=null,this._viewHandles.removeAll(),this._handles.removeAll()}get state(){const i=!!this.get(\"view.ready\"),t=!!this.get(\"graphics.length\"),e=this._activeGraphic;return i&&t?e?\"moving\":\"active\":i?\"ready\":\"disabled\"}reset(){this._activeGraphic=null,this._hoverGraphic=null,this._dragEvent=null}updateGeometry(i,t){const e=this.graphics[i];e&&e.set(\"geometry\",t)}_clickHandler(i){const t=this._findTargetGraphic(p(i));if(t){const e=new d(t,this.graphics.indexOf(t),i.x,i.y,i);this.emit(\"graphic-click\",e),this.callbacks.onGraphicClick&&this.callbacks.onGraphicClick(e)}}_doubleClickHandler(i){const t=this._findTargetGraphic(p(i));if(t){const e=new g(t,this.graphics.indexOf(t),i.x,i.y,i);this.emit(\"graphic-double-click\",e),this.callbacks.onGraphicDoubleClick&&this.callbacks.onGraphicDoubleClick(e)}}_pointerDownHandler(i){const t=this._findTargetGraphic(p(i));if(t){this._activeGraphic=t;const{x:e,y:r}=i,s=new _(t,this.graphics.indexOf(t),e,r,i);this.emit(\"graphic-pointer-down\",s),this.callbacks.onGraphicPointerDown&&this.callbacks.onGraphicPointerDown(s)}else this._activeGraphic=null}_pointerUpHandler(i){if(this._activeGraphic){const{x:t,y:e}=i,r=this.graphics.indexOf(this._activeGraphic),s=new m(this._activeGraphic,r,t,e,i);this.emit(\"graphic-pointer-up\",s),this.callbacks.onGraphicPointerUp&&this.callbacks.onGraphicPointerUp(s)}}_pointerMoveHandler(i){if(this._dragEvent)return;const t=this._findTargetGraphic(p(i));if(t){const{x:e,y:r}=i;if(this._hoverGraphic){if(this._hoverGraphic===t)return;const s=this.graphics.indexOf(this._hoverGraphic),a=new G(this.graphics[s],s,e,r,i);this._hoverGraphic=null,this.emit(\"graphic-pointer-out\",a),this.callbacks.onGraphicPointerOut&&this.callbacks.onGraphicPointerOut(a)}const s=this.graphics.indexOf(t),a=new w(t,s,e,r,i);return this._hoverGraphic=t,this.emit(\"graphic-pointer-over\",a),void(this.callbacks.onGraphicPointerOver&&this.callbacks.onGraphicPointerOver(a))}if(this._hoverGraphic){const{x:t,y:e}=i,r=this.graphics.indexOf(this._hoverGraphic),s=new G(this.graphics[r],r,t,e,i);this._hoverGraphic=null,this.emit(\"graphic-pointer-out\",s),this.callbacks.onGraphicPointerOut&&this.callbacks.onGraphicPointerOut(s)}}_dragHandler(i){if(\"start\"!==i.action&&!this._dragEvent||!this._activeGraphic||!this._activeGraphic.geometry)return;i.stopPropagation();const{action:e,x:r,y:s}=i,a=this.graphics.indexOf(this._activeGraphic),o=this._activeGraphic.geometry,h=this._dragEvent?r-this._dragEvent.x:0,c=this._dragEvent?s-this._dragEvent.y:0,n=r-i.origin.x,p=s-i.origin.y;if(this._activeGraphic.geometry=l(o,h,c,this.view),this.enableMoveAllGraphics&&this.graphics.forEach((i=>{i!==this._activeGraphic&&(i.geometry=l(i.geometry,h,c,this.view))})),this._dragEvent=i,\"start\"===e){this._initialDragGeometry=t(o);const e=new u(this._activeGraphic,this.graphics,a,r,s,h,c,n,p,i);this.emit(\"graphic-move-start\",e),this.callbacks.onGraphicMoveStart&&this.callbacks.onGraphicMoveStart(e),e.defaultPrevented&&this._activeGraphic.set(\"geometry\",o)}else if(\"update\"===e){const t=new y(this._activeGraphic,this.graphics,a,r,s,h,c,n,p,i);this.emit(\"graphic-move\",t),this.callbacks.onGraphicMove&&this.callbacks.onGraphicMove(t),t.defaultPrevented&&this._activeGraphic.set(\"geometry\",o)}else{const t=new f(this._activeGraphic,this.graphics,a,r,s,h,c,n,p,i);this._dragEvent=null,this._activeGraphic=null,this.emit(\"graphic-move-stop\",t),this.callbacks.onGraphicMoveStop&&this.callbacks.onGraphicMoveStop(t),t.defaultPrevented&&this.graphics[a].set(\"geometry\",this._initialDragGeometry),this._initialDragGeometry=null}}_keyDownHandler(i){\"a\"!==i.key&&\"d\"!==i.key&&\"n\"!==i.key||\"moving\"!==this.state||i.stopPropagation()}_findTargetGraphic(i){let t=null,r=Number.MAX_VALUE;return this._manipulators.forEach((s=>{const a=s.intersectionDistance(i);e(a)&&a<r&&(r=a,t=s.graphic)})),t}_setUpManipulators(){const{graphics:i,view:t}=this;this._manipulators.forEach((i=>i.destroy())),this._manipulators=null!=i&&i.length?i.map((i=>new v({graphic:i,view:t}))):[]}};i([r()],k.prototype,\"_activeGraphic\",void 0),i([r({readOnly:!0})],k.prototype,\"type\",void 0),i([r()],k.prototype,\"callbacks\",void 0),i([r()],k.prototype,\"enableMoveAllGraphics\",void 0),i([r()],k.prototype,\"graphics\",void 0),i([r({readOnly:!0})],k.prototype,\"state\",null),i([r()],k.prototype,\"view\",void 0),k=i([s(\"esri.views.draw.support.GraphicMover\")],k);var b=k;export default b;\n"],"sourceRoot":""}