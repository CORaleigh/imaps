(this.webpackJsonpimaps=this.webpackJsonpimaps||[]).push([[150],{1233:function(e,t,i){"use strict";i.r(t),i.d(t,"FeatureServiceSnappingSource",(function(){return q}));var r=i(91),a=i(7),s=i(82),n=(i(80),i(89)),l=(i(81),i(88),i(217)),o=i(85),c=i(84),d=(i(83),i(86),i(87),i(344)),u=i(97),h=i(113),p=i(108),b=i(331),v=i(167),O=i(868),f=i(484),y=i(111),g=i(200),j=i(255);function w(e,t){return j.a.fromAABoundingRect(t.extent,m),j.a.distance(m,Object(y.v)(S,e.x,e.y,0))}var m=j.a.create(),S=Object(g.c)(),I=class extends(Object(v.b)(u.a)){constructor(e){super(e),this.pointOfInterest=null}get tiles(){var e=this.tilesCoveringView,t=Object(n.k)(this.pointOfInterest)?this.pointOfInterest:this.view.center;return e.sort(((e,i)=>w(t,e)-w(t,i))),e}scaleEnabled(){return Object(f.b)(this.view.scale,this.layer.minScale||0,this.layer.maxScale||0)}get tilesCoveringView(){if(!this.view.ready||!this.view.featuresTilingScheme||!this.view.state||Object(n.j)(this.tileInfo))return[];if(!this.scaleEnabled)return[];var{spans:e,lodInfo:t}=this.view.featuresTilingScheme.getTileCoverage(this.view.state,0),{level:i}=t,r=[];for(var{row:a,colFrom:s,colTo:l}of e)for(var o=s;o<=l;o++){var c={id:null,level:i,row:a,col:t.normalizeCol(o)};this.tileInfo.updateTileInfo(c),r.push(c)}return r}get tileInfo(){var e,t;return null!=(e=null==(t=this.view.featuresTilingScheme)?void 0:t.tileInfo)?e:null}get tileSize(){return Object(n.k)(this.tileInfo)?this.tileInfo.size[0]:256}initialize(){this.handles.add(this.watch("view.state.viewpoint",(()=>this.notifyChange("tilesCoveringView")),!0))}};Object(s.a)([Object(o.b)({readOnly:!0})],I.prototype,"tiles",null),Object(s.a)([Object(o.b)({readOnly:!0})],I.prototype,"scaleEnabled",null),Object(s.a)([Object(o.b)({readOnly:!0})],I.prototype,"tilesCoveringView",null),Object(s.a)([Object(o.b)({readOnly:!0})],I.prototype,"tileInfo",null),Object(s.a)([Object(o.b)({readOnly:!0})],I.prototype,"tileSize",null),Object(s.a)([Object(o.b)({constructOnly:!0})],I.prototype,"view",void 0),Object(s.a)([Object(o.b)({constructOnly:!0})],I.prototype,"layer",void 0),Object(s.a)([Object(o.b)()],I.prototype,"pointOfInterest",void 0),I=Object(s.a)([Object(c.a)("esri.views.interactive.snapping.featureSources.featureServiceSource.FeatureServiceTiles2D")],I);var k=class extends v.a{constructor(e){super(e),this.pointOfInterest=null}get tiles(){var e=this.tilesCoveringView,t=this.effectivePointOfInterest;if(Object(n.k)(t))for(var i=e.map((e=>w(t,e))),r=1;r<i.length;r++)if(i[r-1]>i[r])return e.sort(((e,i)=>w(t,e)-w(t,i))),e.slice();return e}get tilesCoveringView(){var e,t;return this.filterTiles(null==(e=this.view.featureTiles)||null==(t=e.tiles)?void 0:t.toArray()).map(_)}get tileInfo(){var e,t;return null!=(e=null==(t=this.view.featureTiles)?void 0:t.tilingScheme.toTileInfo())?e:null}get tileSize(){var e,t;return null!=(e=null==(t=this.view.featureTiles)?void 0:t.tileSize)?e:256}get effectivePointOfInterest(){var e,t=this.pointOfInterest;return Object(n.k)(t)?t:null==(e=this.view.pointsOfInterest)?void 0:e.focus.location}initialize(){this.handles.add(Object(p.a)(this.view,"featureTiles",(e=>{this.handles.remove(T),e&&this.handles.add(e.addClient(),T)})))}filterTiles(e){return Object(n.j)(e)?[]:e.filter((e=>Math.abs(e.measures.screenRect[3]-e.measures.screenRect[1])>H&&2===e.measures.visibility))}};function _({lij:[e,t,i],extent:r}){return{id:"".concat(e,"/").concat(t,"/").concat(i),level:e,row:t,col:i,extent:r}}Object(s.a)([Object(o.b)({readOnly:!0})],k.prototype,"tiles",null),Object(s.a)([Object(o.b)({readOnly:!0})],k.prototype,"tilesCoveringView",null),Object(s.a)([Object(o.b)({readOnly:!0})],k.prototype,"tileInfo",null),Object(s.a)([Object(o.b)({readOnly:!0})],k.prototype,"tileSize",null),Object(s.a)([Object(o.b)({constructOnly:!0})],k.prototype,"view",void 0),Object(s.a)([Object(o.b)()],k.prototype,"pointOfInterest",void 0),Object(s.a)([Object(o.b)()],k.prototype,"effectivePointOfInterest",null),k=Object(s.a)([Object(c.a)("esri.views.interactive.snapping.featureSources.featureServiceSource.FeatureServiceTiles3D")],k);var H=50,T="feature-tiles",z=i(130),x=i(115),P=i(125),M=i(110),R=i(109),E=i(767),N=i(772),L=i(211),C=i(345),F=i(123),A=[[0,179,255],[117,62,128],[0,104,255],[215,189,166],[32,0,193],[98,162,206],[102,112,129],[52,125,0],[142,118,246],[138,83,0],[92,122,255],[122,55,83],[0,142,255],[81,40,179],[0,200,244],[13,24,127],[0,170,147],[19,58,241],[22,44,35]],D=class extends u.a{constructor(e){super(e),this.updating=!1,this.enablePolygons=!0,this.enableLabels=!0,this._polygons=new Map,this._labels=new Map,this._enabled=!0}initialize(){this._symbols=A.map((e=>new L.a({color:[e[0],e[1],e[2],.6],outline:{color:"black",width:1}}))),this.update()}destroy(){this._enabled=!1,this.clear()}get enabled(){return this._enabled}set enabled(e){this._enabled!==e&&(this._enabled=e,this.update())}update(){if(this._enabled){var e=this.getTiles(),t=new Array,i=new Set((this._labels.size,this._labels.keys()));e.forEach(((r,a)=>{var s=r.lij.toString();i.delete(s);var l=r.lij[0],o=r.geometry;if(this.enablePolygons&&!this._polygons.has(s)){var c=new F.a({geometry:o,symbol:this._symbols[l%this._symbols.length]});this._polygons.set(s,c),t.push(c)}if(this.enableLabels){var d=(e=>{if(Object(n.k)(e.label))return e.label;var t=e.lij.toString();return Object(n.k)(e.loadPriority)&&(t+=" (".concat(e.loadPriority,")")),t})(r),u=a/(e.length-1),h=Object(M.l)(0,200,u),p=Object(M.l)(20,6,u)/.75,b=Object(n.k)(r.loadPriority)&&r.loadPriority>=e.length,v=new R.a([h,b?0:h,b?0:h]),O="3d"===this.view.type?()=>new N.a({verticalOffset:{screenLength:40/.75},callout:{type:"line",color:"white",border:{color:"black"}},symbolLayers:[new E.a({text:d,halo:{color:"white",size:1/.75},material:{color:v},size:p})]}):()=>new C.a({text:d,haloColor:"white",haloSize:1/.75,color:v,size:p});if(this._labels.has(s)){var f=this._labels.get(s),y=O();(Object(n.j)(f.symbol)||JSON.stringify(y)!==JSON.stringify(f.symbol))&&(f.symbol=y)}else{var g=new F.a({geometry:o.extent.center,symbol:O()});this._labels.set(s,g),t.push(g)}}}));var r=new Array;i.forEach((e=>{this._polygons.has(e)&&(r.push(this._polygons.get(e)),this._polygons.delete(e)),this._labels.has(e)&&(r.push(this._labels.get(e)),this._labels.delete(e))})),this.view.graphics.removeMany(r),this.view.graphics.addMany(t)}else this.clear()}clear(){this.view.graphics.removeMany(Array.from(this._polygons.values())),this.view.graphics.removeMany(Array.from(this._labels.values())),this._polygons.clear(),this._labels.clear()}};Object(s.a)([Object(o.b)({constructOnly:!0})],D.prototype,"view",void 0),Object(s.a)([Object(o.b)({readOnly:!0})],D.prototype,"updating",void 0),Object(s.a)([Object(o.b)()],D.prototype,"enabled",null),D=Object(s.a)([Object(c.a)("esri.views.support.TileTreeDebugger")],D);var J=class extends D{constructor(e){super(e),this.handles=new x.a}initialize(){var e=setInterval((()=>this.fetchDebugInfo()),2e3);this.handles.add(Object(l.c)((()=>clearInterval(e))))}destroy(){this.handles.destroy()}getTiles(){if(!this.debugInfo)return[];var e=new Map,t=new Map;this.debugInfo.storedTiles.forEach((t=>{e.set(t.data.id,t.featureCount)})),this.debugInfo.pendingTiles.forEach((i=>{e.set(i.data.id,i.featureCount),t.set(i.data.id,i.state)}));var i=i=>{var r,a=t.get(i),s=null!=(r=e.get(i))?r:"?";return a?"".concat(a,":").concat(s,"\n").concat(i):"store:".concat(s,"\n").concat(i)},r=new Map;return this.debugInfo.storedTiles.forEach((e=>{r.set(e.data.id,e.data)})),this.debugInfo.pendingTiles.forEach((e=>{r.set(e.data.id,e.data)})),Array.from(r.values()).map((e=>({lij:[e.level,e.row,e.col],geometry:z.a.fromExtent(Object(P.r)(e.extent,this.view.spatialReference)),label:i(e.id)})))}fetchDebugInfo(){this.handle.getDebugInfo(null).then((e=>{this.debugInfo=e,this.update()}))}};Object(s.a)([Object(o.b)({constructOnly:!0})],J.prototype,"handle",void 0),J=Object(s.a)([Object(c.a)("esri.views.interactive.snapping.featureSources.WorkerTileTreeDebugger")],J);var U=i(94),V=i(183),W=i(821),G=class extends v.a{constructor(e){super(e),this.availability=0,this.workerHandleUpdating=!0,this.editId=0}get updating(){return this.updatingHandles.updating||this.workerHandleUpdating}destroy(){this.workerHandle.destroy()}initialize(){this.workerHandle=new B(this.scheduler),this.handles.add([this.workerHandle.on("notify-updating",(({updating:e})=>this.workerHandleUpdating=e)),this.workerHandle.on("notify-availability",(({availability:e})=>this._set("availability",e)))])}setup(e,t){var i=this;return Object(a.a)((function*(){var r=i.serviceInfoFromLayer(e.layer);if(!Object(n.j)(r)){var a={configuration:i.convertConfiguration(e.configuration),serviceInfo:r,spatialReference:e.spatialReference.toJSON()};yield i.updatingHandles.addPromise(i.workerHandle.invokeMethod("setup",a,t)),i.updatingHandles.addPromise(i.workerHandle.invokeMethod("whenNotUpdating",{},t))}}))()}configure(e,t){var i=this;return Object(a.a)((function*(){var r=i.convertConfiguration(e);yield i.updatingHandles.addPromise(i.workerHandle.invokeMethod("configure",r,t)),i.updatingHandles.addPromise(i.workerHandle.invokeMethod("whenNotUpdating",{},t))}))()}refresh(e){var t=this;return Object(a.a)((function*(){yield t.updatingHandles.addPromise(t.workerHandle.invokeMethod("refresh",{},e)),t.updatingHandles.addPromise(t.workerHandle.invokeMethod("whenNotUpdating",{},e))}))()}fetchCandidates(e,t){var i=this;return Object(a.a)((function*(){var r={distance:e.distance,point:e.coordinateHelper.toPoint(e.point,new h.a).toJSON(),types:e.types,filter:Object(n.k)(e.filter)?e.filter.createQuery().toJSON():null};return i.workerHandle.invoke(r,t)}))()}updateTiles(e,t){var i=this;return Object(a.a)((function*(){var r={tiles:e.tiles,tileInfo:Object(n.k)(e.tileInfo)?e.tileInfo.toJSON():null,tileSize:e.tileSize};yield i.workerHandle.invokeMethod("updateTiles",r,t),i.updatingHandles.addPromise(i.workerHandle.invokeMethod("whenNotUpdating",{},t))}))()}applyEdits(e,t){var i=this;return Object(a.a)((function*(){var r,a,s,n,l,o,c=i.editId++,d={id:c};yield i.workerHandle.invokeMethod("beginApplyEdits",d,t),i.updatingHandles.addPromise(i.workerHandle.invokeMethod("whenNotUpdating",{},t));var u=yield Object(U.x)(e.result,t),h={id:c,edits:{addedFeatures:null!=(r=null==(a=u.addedFeatures)?void 0:a.map((({objectId:e})=>e)))?r:[],deletedFeatures:null!=(s=null==(n=u.deletedFeatures)?void 0:n.map((({objectId:e})=>e)))?s:[],updatedFeatures:null!=(l=null==(o=u.updatedFeatures)?void 0:o.map((({objectId:e})=>e)))?l:[]}};yield i.workerHandle.invokeMethod("endApplyEdits",h,t),i.updatingHandles.addPromise(i.workerHandle.invokeMethod("whenNotUpdating",{},t))}))()}getDebugInfo(e){return this.workerHandle.invokeMethod("getDebugInfo",{},e)}convertConfiguration(e){return{filter:Object(n.k)(e.filter)?e.filter.toJSON():null,customParameters:e.customParameters}}serviceInfoFromLayer(e){var t;return"multipatch"===e.geometryType||"mesh"===e.geometryType?null:{url:e.parsedUrl.path,fields:e.fields.map((e=>e.toJSON())),geometryType:V.a.toJSON(e.geometryType),capabilities:e.capabilities,objectIdField:e.objectIdField,spatialReference:e.spatialReference.toJSON(),timeInfo:null==(t=e.timeInfo)?void 0:t.toJSON()}}};Object(s.a)([Object(o.b)({constructOnly:!0})],G.prototype,"scheduler",void 0),Object(s.a)([Object(o.b)({readOnly:!0})],G.prototype,"updating",null),Object(s.a)([Object(o.b)({readOnly:!0})],G.prototype,"availability",void 0),Object(s.a)([Object(o.b)()],G.prototype,"workerHandleUpdating",void 0),G=Object(s.a)([Object(c.a)("esri.views.interactive.snapping.featureSources.featureServiceSource.FeatureServiceSnappingSourceWorkerHandle")],G);class B extends W.a{constructor(e){super("FeatureServiceSnappingSourceWorker","fetchCandidates",e,{strategy:"dedicated"})}getTransferList(){return[]}}var Q=i(460),Z=i(336),X=class extends u.a{constructor(e){super(e),this.pointOfInterest=null}get tiles(){return[{id:"0/0/0",level:0,row:0,col:0,extent:Object(P.n)(-1e8,-1e8,1e8,1e8)}]}get tileInfo(){return new Z.a({origin:new h.a({x:-1e8,y:1e8,spatialReference:this.layer.spatialReference}),size:[512,512],lods:[new Q.a({level:0,scale:1,resolution:390625})],spatialReference:this.layer.spatialReference})}get tileSize(){return this.tileInfo.size[0]}};Object(s.a)([Object(o.b)({readOnly:!0})],X.prototype,"tiles",null),Object(s.a)([Object(o.b)({readOnly:!0})],X.prototype,"tileInfo",null),Object(s.a)([Object(o.b)({readOnly:!0})],X.prototype,"tileSize",null),Object(s.a)([Object(o.b)({constructOnly:!0})],X.prototype,"layer",void 0),Object(s.a)([Object(o.b)()],X.prototype,"pointOfInterest",void 0),X=Object(s.a)([Object(c.a)("esri.views.interactive.snapping.featureSources.featureServiceSource.FeatureServiceTilesSimple")],X);var q=class extends(Object(v.b)(u.a)){constructor(e){super(e)}get updateTilesParameters(){return{tiles:this.tilesOfInterest.tiles,tileInfo:this.tilesOfInterest.tileInfo,tileSize:this.tilesOfInterest.tileSize}}get updating(){return this.workerHandle.updating||this.updatingHandles.updating}get configuration(){return{filter:this.layer.createQuery(),customParameters:this.layer.customParameters}}get availability(){return this.workerHandle.availability}get layer(){return this.layerSource.layer}initialize(){if(Object(n.k)(this.view))switch(this.view.type){case"2d":this.tilesOfInterest=new I({view:this.view,layer:this.layer});break;case"3d":this.tilesOfInterest=new k({view:this.view})}else this.tilesOfInterest=new X({layer:this.layer});if(this.workerHandle=new G({scheduler:Object(n.k)(this.view)&&"3d"===this.view.type?this.view.resourceController.scheduler:null}),this.handles.add([Object(l.a)(this.workerHandle)]),this.workerHandle.setup({layer:this.layer,spatialReference:this.spatialReference,configuration:this.configuration},null),this.updatingHandles.add(this,"updateTilesParameters",(()=>this.workerHandle.updateTiles(this.updateTilesParameters,null)),2),this.handles.add([Object(d.a)((()=>this.configuration),(e=>this.workerHandle.configure(e,null)))]),Object(n.k)(this.view)){var e=this.view;this.handles.add(Object(p.a)(b.a,"FEATURE_SERVICE_SNAPPING_SOURCE_TILE_TREE_SHOW_TILES",(t=>{t&&!this.debug?(this.debug=new J({view:e,handle:this.workerHandle}),this.handles.add(Object(l.a)(this.debug),"debug")):!t&&this.debug&&this.handles.remove("debug")})))}this.handles.add(this.layerSource.layer.on("apply-edits",(e=>{this.workerHandle.applyEdits(e,null)})))}refresh(){this.workerHandle.refresh(null)}fetchCandidates(e,t){var i=this;return Object(a.a)((function*(){i.tilesOfInterest.pointOfInterest=e.coordinateHelper.toPoint(e.point,new h.a);var{candidates:a}=yield i.workerHandle.fetchCandidates(Object(r.a)(Object(r.a)({},e),{},{filter:null}),t);return{candidates:a.map((t=>Object(O.a)(t,e.coordinateHelper)))}}))()}getDebugInfo(e){return this.workerHandle.getDebugInfo(e)}};Object(s.a)([Object(o.b)({constructOnly:!0})],q.prototype,"spatialReference",void 0),Object(s.a)([Object(o.b)({constructOnly:!0})],q.prototype,"layerSource",void 0),Object(s.a)([Object(o.b)({constructOnly:!0})],q.prototype,"view",void 0),Object(s.a)([Object(o.b)()],q.prototype,"tilesOfInterest",void 0),Object(s.a)([Object(o.b)({readOnly:!0})],q.prototype,"updateTilesParameters",null),Object(s.a)([Object(o.b)({readOnly:!0})],q.prototype,"updating",null),Object(s.a)([Object(o.b)({readOnly:!0})],q.prototype,"configuration",null),Object(s.a)([Object(o.b)({readOnly:!0})],q.prototype,"availability",null),q=Object(s.a)([Object(c.a)("esri.views.interactive.snapping.featureSources.FeatureServiceSnappingSource")],q)},336:function(e,t,i){"use strict";var r,a=i(91),s=i(82),n=(i(80),i(81),i(88)),l=i(85),o=i(95),c=i(98),d=i(84),u=i(96),h=(i(83),i(86),i(87),i(90)),p=i(112),b=i(99),v=i(161),O=i(113),f=(i(101),i(117)),y=i(125),g=i(460),j=new o.a({PNG:"png",PNG8:"png8",PNG24:"png24",PNG32:"png32",JPEG:"jpg",JPG:"jpg",DIB:"dib",TIFF:"tiff",EMF:"emf",PS:"ps",PDF:"pdf",GIF:"gif",SVG:"svg",SVGZ:"svgz",Mixed:"mixed",MIXED:"mixed",LERC:"lerc",LERC2D:"lerc2d",RAW:"raw",pbf:"pbf"}),w=r=class extends h.a{constructor(e){super(e),this.dpi=96,this.format=null,this.origin=null,this.minScale=0,this.maxScale=0,this.size=null,this.spatialReference=null}static create(e={size:256,spatialReference:b.a.WebMercator}){var t=e.resolutionFactor||1,i=e.scales,a=e.size||256,s=e.spatialReference||b.a.WebMercator;if(!Object(p.i)(s)){var n=[];if(i)for(var l=0;l<i.length;l++){var o=i[l];n.push({level:l,scale:o,resolution:o})}else for(var c=5e-4,d=23;d>=0;d--)n.unshift({level:d,scale:c,resolution:c}),c*=2;return new r({dpi:96,lods:n,origin:new O.a(0,0,s),size:[a,a],spatialReference:s})}var u=Object(p.d)(s),h=e.origin?new O.a({x:e.origin.x,y:e.origin.y,spatialReference:s}):new O.a(u?{x:u.origin[0],y:u.origin[1],spatialReference:s}:{x:0,y:0,spatialReference:s}),v=1/(39.37*Object(f.f)(s)*96),y=[];if(i)for(var g=0;g<i.length;g++){var j=i[g],w=j*v;y.push({level:g,scale:j,resolution:w})}else{var m=Object(p.f)(s)?512/a*591657527.5917094:256/a*591657527.591555,S=Math.ceil(24/t);y.push({level:0,scale:m,resolution:m*v});for(var I=1;I<S;I++){var k=m/Math.pow(2,t),_=k*v;y.push({level:I,scale:k,resolution:_}),m=k}}return new r({dpi:96,lods:y,origin:h,size:[a,a],spatialReference:s})}get isWrappable(){var{spatialReference:e,origin:t}=this;if(e&&t){var i=Object(p.d)(e);return e.isWrappable&&Math.abs(i.origin[0]-t.x)<=i.dx}return!1}readOrigin(e,t){return O.a.fromJSON(Object(a.a)({spatialReference:t.spatialReference},e))}set lods(e){var t=0,i=0,r=[];this._levelToLOD={},e&&(t=-1/0,i=1/0,e.forEach((e=>{r.push(e.scale),t=e.scale>t?e.scale:t,i=e.scale<i?e.scale:i,this._levelToLOD[e.level]=e}))),this._set("scales",r),this._set("minScale",t),this._set("maxScale",i),this._set("lods",e),this._initializeUpsampleLevels()}readSize(e,t){return[t.cols,t.rows]}writeSize(e,t){t.cols=e[0],t.rows=e[0]}zoomToScale(e){var t=this.scales;if(e<=0)return t[0];if(e>=t.length)return t[t.length-1];var i=Math.round(e-.5),r=Math.round(e);return t[r]+(r-e)*(t[i]-t[r])}scaleToZoom(e){for(var t=this.scales,i=t.length-1,r=0;r<i;r++){var a=t[r],s=t[r+1];if(a<=e)return r;if(s===e)return r+1;if(a>e&&s<e)return r+1-(e-s)/(a-s)}return r}snapScale(e,t=.95){var i=this.scaleToZoom(e);return i%Math.floor(i)>=t?this.zoomToScale(Math.ceil(i)):this.zoomToScale(Math.floor(i))}tileAt(e,t,i,r){var a,s,n=this.lodAt(e);if(!n)return null;if("number"==typeof t)a=t,s=i;else if(Object(p.c)(t.spatialReference,this.spatialReference))a=t.x,s=t.y,r=i;else{var l=Object(v.d)(t,this.spatialReference);if(!l)return null;a=l.x,s=l.y,r=i}var o=n.resolution*this.size[0],c=n.resolution*this.size[1];return r||(r={id:null,level:0,row:0,col:0,extent:Object(y.i)()}),r.level=e,r.row=Math.floor((this.origin.y-s)/c+.001),r.col=Math.floor((a-this.origin.x)/o+.001),this.updateTileInfo(r),r}updateTileInfo(e,t=0){var i=this.lodAt(e.level);if(!i&&1===t){var r=this.lods[this.lods.length-1];r.level<e.level&&(i=r)}if(i){var a=e.level-i.level,s=i.resolution*this.size[0]/Math.pow(2,a),n=i.resolution*this.size[1]/Math.pow(2,a);e.id="".concat(e.level,"/").concat(e.row,"/").concat(e.col),e.extent||(e.extent=Object(y.i)()),e.extent[0]=this.origin.x+e.col*s,e.extent[1]=this.origin.y-(e.row+1)*n,e.extent[2]=e.extent[0]+s,e.extent[3]=e.extent[1]+n}}upsampleTile(e){var t=this._upsampleLevels[e.level];return!(!t||-1===t.parentLevel)&&(e.level=t.parentLevel,e.row=Math.floor(e.row/t.factor+.001),e.col=Math.floor(e.col/t.factor+.001),this.updateTileInfo(e),!0)}getTileBounds(e,t){var{resolution:i}=this.lodAt(t.level),r=i*this.size[0],a=i*this.size[1];return e[0]=this.origin.x+t.col*r,e[1]=this.origin.y-(t.row+1)*a,e[2]=e[0]+r,e[3]=e[1]+a,e}lodAt(e){return this._levelToLOD&&this._levelToLOD[e]||null}clone(){return r.fromJSON(this.write({}))}_initializeUpsampleLevels(){var e=this.lods;this._upsampleLevels=[];for(var t=null,i=0;i<e.length;i++){var r=e[i];this._upsampleLevels[r.level]={parentLevel:t?t.level:-1,factor:t?t.resolution/r.resolution:0},t=r}}};Object(s.a)([Object(l.b)({type:Number,json:{write:!0}})],w.prototype,"compressionQuality",void 0),Object(s.a)([Object(l.b)({type:Number,json:{write:!0}})],w.prototype,"dpi",void 0),Object(s.a)([Object(l.b)({type:String,json:{read:j.read,write:j.write,origins:{"web-scene":{read:!1,write:!1}}}})],w.prototype,"format",void 0),Object(s.a)([Object(l.b)({readOnly:!0})],w.prototype,"isWrappable",null),Object(s.a)([Object(l.b)({type:O.a,json:{write:!0}})],w.prototype,"origin",void 0),Object(s.a)([Object(c.a)("origin")],w.prototype,"readOrigin",null),Object(s.a)([Object(l.b)({type:[g.a],value:null,json:{write:!0}})],w.prototype,"lods",null),Object(s.a)([Object(l.b)({readOnly:!0})],w.prototype,"minScale",void 0),Object(s.a)([Object(l.b)({readOnly:!0})],w.prototype,"maxScale",void 0),Object(s.a)([Object(l.b)({readOnly:!0})],w.prototype,"scales",void 0),Object(s.a)([Object(l.b)({cast:e=>Array.isArray(e)?e:"number"==typeof e?[e,e]:[256,256]})],w.prototype,"size",void 0),Object(s.a)([Object(c.a)("size",["rows","cols"])],w.prototype,"readSize",null),Object(s.a)([Object(u.a)("size",{cols:{type:n.a},rows:{type:n.a}})],w.prototype,"writeSize",null),Object(s.a)([Object(l.b)({type:b.a,json:{write:!0}})],w.prototype,"spatialReference",void 0);var m=w=r=Object(s.a)([Object(d.a)("esri.layers.support.TileInfo")],w);t.a=m},460:function(e,t,i){"use strict";var r,a=i(82),s=(i(80),i(81),i(88)),n=i(85),l=i(84),o=(i(83),i(86),i(87),i(90)),c=r=class extends o.a{constructor(e){super(e),this.level=0,this.levelValue=null,this.resolution=0,this.scale=0}clone(){return new r({level:this.level,levelValue:this.levelValue,resolution:this.resolution,scale:this.scale})}};Object(a.a)([Object(n.b)({type:s.a,json:{write:!0}})],c.prototype,"level",void 0),Object(a.a)([Object(n.b)({type:String,json:{write:!0}})],c.prototype,"levelValue",void 0),Object(a.a)([Object(n.b)({type:Number,json:{write:!0}})],c.prototype,"resolution",void 0),Object(a.a)([Object(n.b)({type:Number,json:{write:!0}})],c.prototype,"scale",void 0);var d=c=r=Object(a.a)([Object(l.a)("esri.layers.support.LOD")],c);t.a=d},821:function(e,t,i){"use strict";i.d(t,"a",(function(){return u}));var r=i(91),a=i(89),s=i(81),n=i(217),l=i(209),o=i(94),c=i(275),d=s.a.getLogger("esri.core.workers.WorkerHandle");class u{constructor(e,t,i,a={}){this._mainMethod=t,this._listeners=[],this._promise=Object(c.b)(e,Object(r.a)(Object(r.a)({},a),{},{scheduler:i})).then((e=>{if(void 0===this._thread)for(var t of(this._thread=e,this._promise=null,a.hasInitialize&&this.broadcast({},"initialize"),this._listeners))this._connectListener(t);else e.close()})),this._promise.catch((t=>d.error("Failed to initialize ".concat(e," worker: ").concat(t))))}on(e,t){var i={removed:!1,eventName:e,callback:t,threadHandle:null};return this._listeners.push(i),this._connectListener(i),Object(n.c)((()=>{i.removed=!0,Object(l.i)(this._listeners,i),this._thread&&Object(a.k)(i.threadHandle)&&i.threadHandle.remove()}))}destroy(){this._thread&&(this._thread.close(),this._thread=null),this._promise=null}invoke(e,t){return this.invokeMethod(this._mainMethod,e,t)}invokeMethod(e,t,i){if(this._thread){var r=this.getTransferList(t,e);return this._thread.invoke(e,t,{transferList:r,signal:i})}return this._promise?this._promise.then((()=>(Object(o.u)(i),this.invokeMethod(e,t,i)))):Promise.reject(null)}broadcast(e,t){return this._thread?Promise.all(this._thread.broadcast(t,e)).then((()=>{})):this._promise?this._promise.then((()=>this.broadcast(e,t))):Promise.reject()}get promise(){return this._promise}_connectListener(e){this._thread&&this._thread.on(e.eventName,e.callback).then((t=>{e.removed||(e.threadHandle=t)}))}}},868:function(e,t,i){"use strict";i.d(t,"a",(function(){return d}));var r=i(91),a=i(530),s=i(691),n=i(552);class l extends s.a{constructor(e){super(Object(r.a)(Object(r.a)({},e),{},{constraint:new n.b(e.coordinateHelper,e.edgeStart,e.edgeEnd)}))}get hints(){return[new a.a(1,this.constraint.start,this.constraint.end)]}}var o=i(662);class c extends s.a{constructor(e){super(Object(r.a)(Object(r.a)({},e),{},{constraint:new n.d(e.coordinateHelper,e.targetPoint)}))}get hints(){return[new o.a(this.targetPoint)]}}function d(e,t){switch(e.type){case"edge":return new l({coordinateHelper:t,edgeStart:t.fromPoint(e.start),edgeEnd:t.fromPoint(e.end),targetPoint:t.fromPoint(e.target),objectId:e.objectId});case"vertex":return new c({coordinateHelper:t,targetPoint:t.fromPoint(e.target),objectId:e.objectId})}}}}]);
//# sourceMappingURL=150.602fe09f.chunk.js.map