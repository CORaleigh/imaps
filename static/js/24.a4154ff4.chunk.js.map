{"version":3,"sources":["../node_modules/@arcgis/core/AggregateGraphic.js","../node_modules/@arcgis/core/layers/effects/FeatureEffectView.js","../node_modules/@arcgis/core/views/2d/layers/support/FeatureCommandQueue.js","../node_modules/@arcgis/core/views/2d/layers/support/FeatureLayerProxy.js","../node_modules/@arcgis/core/views/2d/tiling/TileManager.js","../node_modules/@arcgis/core/views/layers/FeatureLayerView.js","../node_modules/@arcgis/core/views/2d/layers/FeatureLayerView2D.js","../node_modules/@arcgis/core/views/2d/layers/features/tileRenderers.js","../node_modules/@arcgis/core/geometry/support/quantizationUtils.js","../node_modules/@arcgis/core/symbols/cim/ExpandedCIM.js","../node_modules/@arcgis/core/views/2d/layers/support/webStyleUtils.js","../node_modules/@arcgis/core/views/2d/layers/support/cimSymbolUtils.js","../node_modules/@arcgis/core/core/floatRGBA.js","../node_modules/@arcgis/core/core/devEnvironmentUtils.js","../node_modules/@arcgis/core/views/layers/LayerView.js","../node_modules/@arcgis/core/views/2d/arcade/callExpressionWithFeature.js","../node_modules/@arcgis/core/views/layers/support/ClipArea.js","../node_modules/@arcgis/core/views/layers/support/ClipRect.js","../node_modules/@arcgis/core/views/layers/support/Geometry.js","../node_modules/@arcgis/core/views/layers/support/Path.js","../node_modules/@arcgis/core/views/2d/layers/LayerView2D.js","../node_modules/@arcgis/core/views/2d/engine/webgl/visualVariablesUtils.js","../node_modules/@arcgis/core/renderers/support/clickToleranceUtils.js","../node_modules/@arcgis/core/views/support/drapedUtils.js","../node_modules/@arcgis/core/views/layers/RefreshableLayerView.js","../node_modules/@arcgis/core/views/layers/support/popupUtils.js"],"names":["p","s","r","constructor","super","arguments","this","isAggregate","getEffectivePopupTemplate","e","popupTemplate","sourceLayer","featureReduction","popupEnabled","getObjectId","objectId","clone","cloneProperties","t","type","Boolean","prototype","Number","json","read","o","c","_filter","duration","i","_excludedEffectView","_includedEffectView","excludedEffects","effects","featureEffect","_get","_transitionTo","filter","hasEffects","includedEffects","scale","_set","transitioning","transitionStep","end","f","includedEffect","excludedEffect","canTransitionTo","effect","value","l","n","some","globalId","d","error","map","a","Set","values","add","delete","u","_hasGlobalIds","normalizeCtorArgs","_queueProcessor","concurrency","process","destroy","clear","updating","length","push","last","finally","notifyChange","popLast","_mergeEdits","addedFeatures","deletedFeatures","updatedFeatures","edits","addOrModified","removed","h","Array","from","readOnly","_startupResolver","isReady","initialize","_controller","AbortController","addResolvingPromise","_startWorker","signal","abort","_connection","close","tileRenderer","client","closed","when","isArray","source","transferList","service","config","tileInfo","toJSON","tiles","invoke","resolve","promise","query","params","name","strategy","_tiles","Map","buffer","acquireTile","releaseTile","tileInfoView","forEach","_releaseTile","tileKeys","update","getTileCoverage","state","spans","lodInfo","level","row","colFrom","colTo","getId","normalizeCol","getWorldForColumn","_getOrAcquireTile","visible","key","_addPlaceholders","has","id","pool","release","hasMissingTiles","size","added","set","get","_getTile","_addPlaceholderChildren","Math","abs","_addPlaceholderParent","_addPlaceholderChild","hasData","contains","getParentKey","patchCount","P","getLogger","O","_updatingRequiredFieldsPromise","timeExtent","layer","requiredFields","view","_handleRequiredFieldsChange","availableFields","fieldsIndex","outFields","m","y","replacement","version","_override","_clearOverride","maximumNumberOfFeatures","maximumNumberOfFeaturesExceeded","highlight","Error","createQuery","returnGeometry","outSpatialReference","spatialReference","j","_","where","intersection","queryFeatures","queryObjectIds","queryFeatureCount","queryExtent","validateFetchPopupFeatures","fetchClientPopupFeatures","_loadArcadeModules","content","R","_updateRequiredFields","then","objectIdField","renderer","orderBy","collectRequiredFields","F","w","g","E","timeInfo","x","startField","endField","floorInfo","floorField","v","subtypeField","sublayers","Promise","all","displayField","sort","clientGraphics","q","createPopupQuery","arcadeUtils","hasGeometryOperations","b","objectIds","keys","features","geometryType","I","returnZ","returnM","canResume","isEmpty","Q","M","A","k","H","U","L","_pipelineIsUpdating","_commandsQueue","_doEdit","_doRefresh","dataChanged","_doUpdate","_visibilityOverrides","_highlightIds","_lastPixelBuffer","_updateHighlight","async","_proxy","setHighlight","_uploadsLocked","_needsClusterSizeUpdate","featureEffectView","_lastDefinitionExpression","_updateClusterSizeTask","remove","_initProxy","_initServiceOptions","handles","on","valueRanges","initial","sync","isTable","_createClientOptions","V","_createServiceOptions","orderByFields","_serviceOptions","labelsVisible","items","suspended","labelingInfo","queryMode","renderingConfigHash","floors","definitionExpression","gdbVersion","historicMoment","getTime","JSON","stringify","customParameters","apiKey","geometryDefinition","clips","reduce","sublayerHash","filterHash","effectHash","streamFilter","clipsHash","event","z","queryVisibleFeatures","geometry","fetchPopupFeatures","isCollection","toArray","_addHighlight","_removeHighlight","hasHighlight","hitTest","aggregates","getFeatures","_createHittestResult","fromJSON","getAggregates","queryStatistics","querySummaryStatistics","_cleanUpQuery","queryUniqueValues","queryClassBreaks","queryHistogram","queryFeaturesJSON","_setLayersForFeature","count","extent","B","setVisibility","_update","_tileStrategy","updateTiles","requestUpdate","attach","timeline","record","title","N","_acquireTile","featuresTilingScheme","_edit","detach","container","removeAllChildren","uninstall","_tileRendererHash","moveStart","viewChange","moveEnd","isUpdating","console","log","setUpdating","emitEvent","emit","editingInfo","lastEditDate","refreshInterval","capabilities","supportsPagination","operations","supportsEditing","mode","featureCount","fullExtent","width","height","warn","fields","globalIdField","getFeatureDefinition","openPorts","parsedUrl","dynamicDataSource","datesInUnknownTimezone","_detectQueryMode","valueExpression","field","timeReferenceUnknownClient","maxRecordCount","tileMaxRecordCount","_validateEdit","includes","destroyed","_hasRequiredSupport","_getEffectiveRenderer","_createSchemaConfig","C","resourceManager","_createConfiguration","max","schema","pixelBuffer","_createTileRendererHash","_initTileRenderer","onConfigUpdate","startup","_onceTilesUpdated","mesh","targets","aggregate","_lockGPUUploads","applyUpdate","_unlockGPUUploads","_updateClusterSizeVariable","_forceAttributeTextureUpload","invalidateLabels","onEdits","refresh","_effectiveRenderer","_createUpdateClusterSizeTask","watch","_updateClusterEffectiveRendererSizeVariable","dynamicClusterSize","visualVariables","indexOf","T","_aggregateValueRanges","aggregateFields","once","default","layerView","install","hasFilter","_injectOverrides","_addFloorFilterClause","hiddenIds","viewAllLevelIds","replace","join","RegExp","trim","S","J","devicePixelRatio","window","filters","supportsTextureFloat","maxTextureSize","lockGPUUploads","unlockGPUUploads","forceAttributeTextureUpload","token","catch","D","originPosition","tolerance","translate","xmin","ymax","round","points","rings","paths","ymin","xmax","zmin","zmax","mmin","mmax","G","marker","MARKER","fill","FILL","line","LINE","text","TEXT","minScale","maxScale","layers","data","hash","_createHash","rendererKey","isOutline","isOutlinedFill","placement","stride","vvFlags","materialKey","maxVVSize","scaleInfo","templateHash","reject","styleName","portal","getDefault","url","baseUrl","origin","find","symbolName","cim","materialHash","mosaicHash","dashTemplate","path","fontName","floor","Uint8ClampedArray","globalThis","location","hostname","match","EventedMixin","parent","declaredClass","fullOpacity","suspendInfo","getSuspendInfo","legendEnabled","updatingHandles","updatingProgress","ready","viewNotReady","loaded","layerNotLoaded","layerInvisible","referencesGeometry","repurposeFeature","evaluate","$feature","transform","hasZ","hasM","left","right","top","bottom","String","write","base","typeMap","polygon","types","ofType","rect","moving","attached","lastUpdateId","updateRequested","fadeTransitionEnabled","opacity","blendMode","whenLayerView","isVisibleAtScale","processUpdate","isFulfilled","isResolved","isRendering","minDataValue","maxDataValue","minSize","maxSize","SIZE_MINMAX_VALUE","expression","stops","SIZE_SCALE_STOPS","levels","SIZE_FIELD_STOPS","valueUnit","SIZE_UNIT_VALUE","NONE","xoffset","yoffset","pointerType","symbol","uniqueValueInfos","classBreakInfos","resolution","overlayPixelSizeInMapUnits","basemapSpatialReference","equals","min","toMap","intersects","doRefresh","getRequiredFields","lastEditInfoEnabled","typeIdField","relationships","keyField","defaultPopupTemplateEnabled","defaultPopupTemplate"],"mappings":"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","file":"static/js/24.a4154ff4.chunk.js","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"./chunks/tslib.es6.js\";import r from\"./Graphic.js\";import{property as t}from\"./core/accessorSupport/decorators/property.js\";import\"./core/arrayUtils.js\";import\"./core/has.js\";import\"./core/accessorSupport/ensureType.js\";import{subclass as o}from\"./core/accessorSupport/decorators/subclass.js\";var p;let s=p=class extends r{constructor(){super(...arguments),this.isAggregate=!0}getEffectivePopupTemplate(e=!1){if(this.popupTemplate)return this.popupTemplate;const r=this.sourceLayer&&this.sourceLayer.featureReduction;return r&&\"popupTemplate\"in r&&r.popupEnabled?r.popupTemplate:null}getObjectId(){return this.objectId}clone(){return new p({objectId:this.objectId,...this.cloneProperties()})}};e([t({type:Boolean})],s.prototype,\"isAggregate\",void 0),e([t({type:Number,json:{read:!0}})],s.prototype,\"objectId\",void 0),s=p=e([o(\"esri.AggregateGraphic\")],s);const c=s;export{c as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../chunks/tslib.es6.js\";import t from\"../../core/Accessor.js\";import i from\"../../core/has.js\";import{unwrap as s}from\"../../core/maybe.js\";import{property as f}from\"../../core/accessorSupport/decorators/property.js\";import\"../../core/arrayUtils.js\";import\"../../core/accessorSupport/ensureType.js\";import{subclass as c}from\"../../core/accessorSupport/decorators/subclass.js\";import r from\"./EffectView.js\";let o=class extends t{constructor(e){super(e),this._filter=null,this.duration=i(\"mapview-transitions-duration\"),this._excludedEffectView=new r(e),this._includedEffectView=new r(e)}get excludedEffects(){return this._excludedEffectView.effects}set featureEffect(e){this._get(\"featureEffect\")!==e&&this._transitionTo(e)}get filter(){var e;return this._filter||(null==(e=s(this.featureEffect))?void 0:e.filter)||null}get hasEffects(){return this._excludedEffectView.hasEffects||this._includedEffectView.hasEffects}get includedEffects(){return this._includedEffectView.effects}set scale(e){this._set(\"scale\",e),this._excludedEffectView.scale=e,this._includedEffectView.scale=e}get transitioning(){return this._excludedEffectView.transitioning||this._includedEffectView.transitioning}transitionStep(e,t){this._set(\"scale\",t),this.transitioning?(this._includedEffectView.transitionStep(e,t),this._excludedEffectView.transitionStep(e,t),this.transitioning||(this._filter=null)):(this._excludedEffectView.scale=t,this._includedEffectView.scale=t)}end(){this._includedEffectView.end(),this._excludedEffectView.end(),this._filter=null}_transitionTo(e){const t=this._get(\"featureEffect\"),i=s(e),f=s(null==i?void 0:i.includedEffect),c=s(null==i?void 0:i.excludedEffect),r=this._includedEffectView.canTransitionTo(f)&&this._excludedEffectView.canTransitionTo(c);this._includedEffectView.effect=f,this._excludedEffectView.effect=c,this._set(\"featureEffect\",i),this._filter=(null==i?void 0:i.filter)||(null==t?void 0:t.filter)||null,r||this.end()}};e([f()],o.prototype,\"_filter\",void 0),e([f()],o.prototype,\"_excludedEffectView\",void 0),e([f()],o.prototype,\"_includedEffectView\",void 0),e([f()],o.prototype,\"duration\",void 0),e([f()],o.prototype,\"excludedEffects\",null),e([f()],o.prototype,\"featureEffect\",null),e([f()],o.prototype,\"filter\",null),e([f()],o.prototype,\"hasEffects\",null),e([f()],o.prototype,\"includedEffects\",null),e([f({value:0})],o.prototype,\"scale\",null),e([f()],o.prototype,\"transitioning\",null),o=e([c(\"esri.layers.effects.FeatureEffectView\")],o);const l=o;export{l as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../../chunks/tslib.es6.js\";import r from\"../../../../core/Accessor.js\";import{property as s}from\"../../../../core/accessorSupport/decorators/property.js\";import\"../../../../core/arrayUtils.js\";import\"../../../../core/has.js\";import\"../../../../core/accessorSupport/ensureType.js\";import{subclass as t}from\"../../../../core/accessorSupport/decorators/subclass.js\";import{QueueProcessor as o}from\"../../../support/QueueProcessor.js\";function n(e){return e.some((e=>e.globalId))}function d(e){return e.filter((e=>!e.error)).map((e=>{var r;return null!=(r=e.objectId)?r:e.globalId}))}function a(e,r){const s=new Set(e);for(const t of r.values())s.add(t);return s}function i(e,r){const s=new Set(e);for(const t of r.values())s.delete(t);return s}let u=class extends r{constructor(e){super(e),this._hasGlobalIds=!1}normalizeCtorArgs(e){return this._queueProcessor=new o({concurrency:1,process:e.process}),{}}destroy(){this._queueProcessor.clear()}get updating(){return this._queueProcessor.length>0}push(e){const r=this._queueProcessor,s=r.last();switch(e.type){case\"update\":case\"refresh\":if((null==s?void 0:s.type)===e.type)return;r.push(e).finally((()=>this.notifyChange(\"updating\")));break;case\"edit\":{const t=\"processed-edit\"===(null==s?void 0:s.type)?s:null;t&&r.popLast();const o=this._mergeEdits(t,e);for(const e of o)r.push(e).finally((()=>this.notifyChange(\"updating\")));break}}this.notifyChange(\"updating\")}_mergeEdits(e,r){var s,t;const{addedFeatures:o,deletedFeatures:u,updatedFeatures:c}=r.edits;if(this._hasGlobalIds=this._hasGlobalIds||n(o)||n(c)||n(u),this._hasGlobalIds){return[e,{type:\"processed-edit\",edits:{addOrModified:[...o,...c],removed:u}}]}const l=new Set(d(null!=(s=null==e?void 0:e.edits.addOrModified)?s:[])),p=new Set(d(null!=(t=null==e?void 0:e.edits.removed)?t:[])),f=new Set([...d(o),...d(c)]),h=new Set(d(u));return[{type:\"processed-edit\",edits:{addOrModified:Array.from(a(i(l,h),f)).map((e=>({objectId:e}))),removed:Array.from(a(i(p,f),h)).map((e=>({objectId:e})))}}]}};e([s({readOnly:!0})],u.prototype,\"updating\",null),u=e([t(\"esri.views.2d.layers.support.FeatureCommandQueue\")],u);const c=u;export{c as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../../chunks/tslib.es6.js\";import{EsriPromise as t}from\"../../../../core/Promise.js\";import{createResolver as r,ignoreAbortErrors as s,throwIfNotAbortError as o}from\"../../../../core/promiseUtils.js\";import{open as i}from\"../../../../core/workers/workers.js\";import{property as n}from\"../../../../core/accessorSupport/decorators/property.js\";import\"../../../../core/arrayUtils.js\";import\"../../../../core/has.js\";import\"../../../../core/accessorSupport/ensureType.js\";import{subclass as a}from\"../../../../core/accessorSupport/decorators/subclass.js\";function c(e){return Array.isArray(e)}let l=class extends t{constructor(e){super(e),this._startupResolver=r(),this.isReady=!1}initialize(){this._controller=new AbortController,this.addResolvingPromise(this._startWorker(this._controller.signal))}destroy(){this._controller.abort(),this._connection&&this._connection.close()}set tileRenderer(e){this.client.tileRenderer=e}get closed(){return this._connection.closed}async startup(e,t,r,s){await this.when();const o=this._controller.signal,i=c(r.source)?{transferList:r.source,signal:o}:void 0,n={service:r,config:t,tileInfo:e.tileInfo.toJSON(),tiles:s};await this._connection.invoke(\"startup\",n,i),this._startupResolver.resolve(),this._set(\"isReady\",!0)}async updateTiles(e){return await this._startupResolver.promise,s(this._connection.invoke(\"updateTiles\",e))}async update(e){const t={config:e};return await this._startupResolver.promise,this._connection.invoke(\"update\",t)}async applyUpdate(e){return await this._startupResolver.promise,this._connection.invoke(\"applyUpdate\",e)}async setHighlight(e){return await this._startupResolver.promise,s(this._connection.invoke(\"controller.setHighlight\",e))}async refresh(e){return await this._startupResolver.promise,s(this._connection.invoke(\"controller.refresh\",e))}async querySummaryStatistics(e,t,r){return await this._startupResolver.promise,this._connection.invoke(\"controller.querySummaryStatistics\",{query:e.toJSON(),params:t},r)}async queryUniqueValues(e,t,r){return await this._startupResolver.promise,this._connection.invoke(\"controller.queryUniqueValues\",{query:e.toJSON(),params:t},r)}async queryClassBreaks(e,t,r){return await this._startupResolver.promise,this._connection.invoke(\"controller.queryClassBreaks\",{query:e.toJSON(),params:t},r)}async queryHistogram(e,t,r){return await this._startupResolver.promise,this._connection.invoke(\"controller.queryHistogram\",{query:e.toJSON(),params:t},r)}async queryFeatures(e,t){return await this._startupResolver.promise,this._connection.invoke(\"controller.queryFeatures\",e.toJSON(),t)}async queryVisibleFeatures(e,t){return await this._startupResolver.promise,this._connection.invoke(\"controller.queryVisibleFeatures\",e.toJSON(),t)}async queryObjectIds(e,t){return await this._startupResolver.promise,this._connection.invoke(\"controller.queryObjectIds\",e.toJSON(),t)}async queryFeatureCount(e,t){return await this._startupResolver.promise,this._connection.invoke(\"controller.queryFeatureCount\",e.toJSON(),t)}async queryExtent(e,t){return this._connection.invoke(\"controller.queryExtent\",e.toJSON(),t)}async queryLatestObservations(e,t){return await this._startupResolver.promise,this._connection.invoke(\"controller.queryLatestObservations\",e.toJSON(),t)}async queryStatistics(e){return await this._startupResolver.promise,this._connection.invoke(\"controller.queryStatistics\",e)}async getObjectId(e){return await this._startupResolver.promise,this._connection.invoke(\"controller.getObjectId\",e)}async getDisplayId(e){return await this._startupResolver.promise,this._connection.invoke(\"controller.getDisplayId\",e)}async getFeatures(e){return await this._startupResolver.promise,this._connection.invoke(\"controller.getFeatures\",e)}async getAggregates(){return await this._startupResolver.promise,this._connection.invoke(\"controller.getAggregates\")}async getAggregateValueRanges(){return await this._startupResolver.promise,this._connection.invoke(\"controller.getAggregateValueRanges\")}async mapValidDisplayIds(e){return await this._startupResolver.promise,this._connection.invoke(\"controller.mapValidDisplayIds\",e)}async onEdits(e){return await this._startupResolver.promise,s(this._connection.invoke(\"controller.onEdits\",e))}async enableEvent(e,t){return await this._startupResolver.promise,s(this._connection.invoke(\"controller.enableEvent\",{name:e,value:t}))}async _startWorker(e){try{this._connection=await i(\"Pipeline\",{client:this.client,strategy:\"dedicated\",signal:e})}catch(t){o(t)}}};e([n()],l.prototype,\"isReady\",void 0),e([n()],l.prototype,\"client\",void 0),e([n()],l.prototype,\"tileRenderer\",null),l=e([a(\"esri.views.2d.layers.support.FeatureLayerProxy\")],l);const u=l;export{u as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport{isSome as e}from\"../../../core/maybe.js\";import i from\"./TileCoverage.js\";import t from\"./TileKey.js\";const l=1e-6;class s{constructor(e){this._tiles=new Map,this.buffer=0,this.acquireTile=e.acquireTile,this.releaseTile=e.releaseTile,this.tileInfoView=e.tileInfoView,this.buffer=e.buffer}destroy(){}clear(){this._tiles.forEach((e=>this._releaseTile(e)))}tileKeys(){const e=[];return this._tiles.forEach(((i,t)=>e.push(t))),e}update(e){const l=this.tileInfoView.getTileCoverage(e.state,this.buffer,\"closest\"),{spans:s,lodInfo:r}=l,{level:a}=r,o=[],d=[],h=new Set,n=new Set;for(const{row:i,colFrom:c,colTo:f}of s)for(let e=c;e<=f;e++){const l=t.getId(a,i,r.normalizeCol(e),r.getWorldForColumn(e)),s=this._getOrAcquireTile(o,l);h.add(l),s.isReady?s.visible=!0:n.add(s.key)}n.forEach((e=>this._addPlaceholders(h,e))),this._tiles.forEach((e=>{h.has(e.key.id)||(d.push(e.key.id),this._releaseTile(e))})),i.pool.release(l);return{hasMissingTiles:n.size>0,added:o,removed:d}}_getOrAcquireTile(e,i){if(!this._tiles.has(i)){const l=this.acquireTile(new t(i));e.push(i),this._tiles.set(i,l),l.visible=!1}return this._tiles.get(i)}_getTile(e){return this._tiles.get(e)}_releaseTile(e){this._tiles.delete(e.key.id),this.releaseTile(e)}_addPlaceholders(e,i){const t=this._addPlaceholderChildren(e,i);if(!(Math.abs(1-t)<l)){if(!this._addPlaceholderParent(e,i)){this._getTile(i.id).visible=!0}}}_addPlaceholderChildren(e,i){let t=0;return this._tiles.forEach((l=>{t+=this._addPlaceholderChild(e,l,i)})),t}_addPlaceholderChild(e,i,t){if(i.key.level<=t.level||!i.hasData||!t.contains(i.key))return 0;i.visible=!0,e.add(i.key.id);return 1/(1<<2*(i.key.level-t.level))}_addPlaceholderParent(i,t){let l=t.getParentKey(),s=0,r=null;for(;e(l);){if(i.has(l.id))return!0;const e=this._getTile(l.id);if(null!=e&&e.isReady)return e.visible=!0,i.add(e.key.id),!0;null!=e&&e.hasData&&e.patchCount>s&&(s=e.patchCount,r=e),l=l.getParentKey()}return!!r&&(r.visible=!0,i.add(r.key.id),!0)}}export{s as TileManager};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../chunks/tslib.es6.js\";import{deprecatedProperty as t}from\"../../core/deprecate.js\";import r from\"../../core/Error.js\";import i from\"../../core/Logger.js\";import{isSome as s,isNone as o}from\"../../core/maybe.js\";import{eachAlways as a}from\"../../core/promiseUtils.js\";import{init as n,on as l}from\"../../core/watchUtils.js\";import{property as u}from\"../../core/accessorSupport/decorators/property.js\";import\"../../core/arrayUtils.js\";import\"../../core/has.js\";import\"../../core/accessorSupport/ensureType.js\";import{subclass as p}from\"../../core/accessorSupport/decorators/subclass.js\";import{combinedViewLayerTimeExtentProperty as f}from\"../../layers/support/commonProperties.js\";import d from\"../../layers/support/FeatureEffect.js\";import c from\"../../layers/support/FeatureFilter.js\";import{fixFields as m,unpackFieldNames as y,collectLabelingFields as h,collectElevationFields as F,collectFilterFields as w,collectFeatureReductionFields as g,collectOrderByInfos as E,collectFields as x,collectField as v,featureHasFields as b}from\"../../layers/support/fieldUtils.js\";import j from\"../../rest/support/Query.js\";import{loadArcade as R}from\"../../support/arcadeOnDemand.js\";import{getFetchPopupTemplate as q,getRequiredFields as I}from\"./support/popupUtils.js\";import{getFloorFilterClause as _}from\"../support/floorFilterUtils.js\";const P=i.getLogger(\"esri.views.layers.FeatureLayerView\"),O=i=>{let O=class extends i{constructor(...e){super(...e),this._updatingRequiredFieldsPromise=null,this.filter=null,this.timeExtent=null,this.layer=null,this.requiredFields=[],this.view=null}initialize(){n(this,[\"layer.renderer\",\"layer.labelingInfo\",\"layer.elevationInfo.featureExpressionInfo\",\"layer.displayField\",\"filter\",\"featureEffect\",\"layer.timeInfo\",\"layer.floorInfo\",\"timeExtent\"],(()=>this._handleRequiredFieldsChange()),!0),l(this,\"view.floors\",\"change\",(()=>this._handleRequiredFieldsChange())),l(this,\"layer.sublayer\",\"change\",(()=>this._handleRequiredFieldsChange()))}get availableFields(){const{layer:e,layer:{fieldsIndex:t},requiredFields:r}=this;return\"outFields\"in e&&e.outFields?m(t,[...y(t,e.outFields),...r]):m(t,r)}set effect(e){t(P,\"effect\",{replacement:\"featureEffect\",version:\"4.22\"}),this.featureEffect=e}get effect(){return t(P,\"effect\",{replacement:\"featureEffect\",version:\"4.22\"}),this.featureEffect}get featureEffect(){return this.layer&&\"featureEffect\"in this.layer?this.layer.featureEffect:null}set featureEffect(e){void 0!==e?this._override(\"featureEffect\",e):this._clearOverride(\"featureEffect\")}get maximumNumberOfFeatures(){return 0}set maximumNumberOfFeatures(e){P.error(\"#maximumNumberOfFeatures=\",\"Setting maximum number of features is not supported\")}get maximumNumberOfFeaturesExceeded(){return!1}highlight(e){throw new Error(\"missing implementation\")}createQuery(){const e={outFields:[\"*\"],returnGeometry:!0,outSpatialReference:this.view.spatialReference},t=s(this.filter)?this.filter.createQuery(e):new j(e);if(\"feature\"===this.layer.type){const e=_(this);s(e)&&(t.where=t.where?`(${t.where}) AND (${e})`:e)}return s(this.timeExtent)&&(t.timeExtent=s(t.timeExtent)?t.timeExtent.intersection(this.timeExtent):this.timeExtent.clone()),t}queryFeatures(e,t){throw new Error(\"missing implementation\")}queryObjectIds(e,t){throw new Error(\"missing implementation\")}queryFeatureCount(e,t){throw new Error(\"missing implementation\")}queryExtent(e,t){throw new Error(\"missing implementation\")}async fetchPopupFeatures(e,t){const r=this.validateFetchPopupFeatures(t);if(r)throw r;return this.fetchClientPopupFeatures(t)}_loadArcadeModules(e){if(e.get(\"expressionInfos.length\")||Array.isArray(e.content)&&e.content.some((e=>\"expression\"===e.type)))return R()}_handleRequiredFieldsChange(){const e=this._updateRequiredFields();this._set(\"_updatingRequiredFieldsPromise\",e),e.then((()=>{this._updatingRequiredFieldsPromise===e&&this._set(\"_updatingRequiredFieldsPromise\",null)}))}async _updateRequiredFields(){if(!this.layer||!this.view)return;const e=\"3d\"===this.view.type,{layer:t,layer:{fieldsIndex:r,objectIdField:i}}=this,o=\"renderer\"in t&&t.renderer,n=\"orderBy\"in t&&t.orderBy,l=t.featureReduction,u=new Set,p=await a([o?o.collectRequiredFields(u,r):null,h(u,t),e?F(u,t):null,s(this.filter)?w(u,t,this.filter):null,s(this.featureEffect)?w(u,t,this.featureEffect.filter):null,l?g(u,t,l):null,n?E(u,t,n):null]);if(t.timeInfo&&this.timeExtent&&x(u,t.fieldsIndex,[t.timeInfo.startField,t.timeInfo.endField]),\"feature\"===t.type&&t.floorInfo&&x(u,t.fieldsIndex,[t.floorInfo.floorField]),\"subtype-group\"===t.type){v(u,r,t.subtypeField);const e=t.sublayers.map((e=>{var t;return Promise.all([null==(t=e.renderer)?void 0:t.collectRequiredFields(u,r),h(u,e)])}));await a(e)}for(const s of p)s.error&&P.error(s.error);v(u,r,i),e&&\"displayField\"in t&&t.displayField&&v(u,r,t.displayField);const f=Array.from(u).sort();this._set(\"requiredFields\",f)}validateFetchPopupFeatures(e){if(o(e))return null;for(const t of e.clientGraphics){const i=t.layer;if(\"popupEnabled\"in i&&!i.popupEnabled)return new r(\"featurelayerview:fetchPopupFeatures\",\"Popups are disabled\",{layer:i});if(\"popupTemplate\"in i){if(!q(i,e))return new r(\"featurelayerview:fetchPopupFeatures\",\"Layer does not define a popup template\",{layer:i})}if(t.isAggregate&&!(i.featureReduction&&\"popupTemplate\"in i.featureReduction&&i.featureReduction.popupEnabled&&i.featureReduction.popupTemplate))return new r(\"featurelayerview:fetchPopupFeatures\",\"Popups are disabled\",{layer:i})}}async fetchClientPopupFeatures(e){const t=s(e)?e.clientGraphics:null;if(!t||0===t.length)return[];const r=new Array(t.length),i=new Map,o=await this.createPopupQuery(e);for(let a=0;a<t.length;a++){const n=t[a];if(n.isAggregate){r[a]=n;continue}const{layer:l}=n;if(!(\"popupEnabled\"in l))continue;const u=y(this.layer.fieldsIndex,o.outFields),p=q(l,e);if(!s(p))continue;const f=await this._loadArcadeModules(p);f&&f.arcadeUtils.hasGeometryOperations(p)||!b(u,n)?i.set(n.getObjectId(),a):r[a]=n}if(\"stream\"===this.layer.type||0===i.size)return r.filter(Boolean);o.objectIds=Array.from(i.keys());try{const e=await this.layer.queryFeatures(o);for(const t of e.features){r[i.get(t.getObjectId())]=t}}catch{}return r.filter(Boolean)}async createPopupQuery(e){const t=this.layer.createQuery(),r=new Set;let i=!1;const o=s(e)&&e.clientGraphics?e.clientGraphics.map((e=>e.layer)):[this.layer];for(const a of o){if(!(\"popupEnabled\"in a))continue;const t=q(a,e);if(!s(t))continue;const o=await this._loadArcadeModules(t),n=o&&o.arcadeUtils.hasGeometryOperations(t);i=!(\"point\"!==this.layer.geometryType&&!n);const l=await I(this.layer,t);for(const e of l)r.add(e)}if(t.returnGeometry=i,t.returnZ=i,t.returnM=i,t.outFields=Array.from(r),t.outSpatialReference=this.view.spatialReference,\"feature\"===this.layer.type){const e=_(this);s(e)&&(t.where=t.where?`(${t.where}) AND (${e})`:e)}return t}canResume(){return!!super.canResume()&&(!s(this.timeExtent)||!this.timeExtent.isEmpty)}};return e([u()],O.prototype,\"_updatingRequiredFieldsPromise\",void 0),e([u({readOnly:!0})],O.prototype,\"availableFields\",null),e([u()],O.prototype,\"effect\",null),e([u({type:d})],O.prototype,\"featureEffect\",null),e([u({type:c})],O.prototype,\"filter\",void 0),e([u(f)],O.prototype,\"timeExtent\",void 0),e([u()],O.prototype,\"layer\",void 0),e([u({type:Number})],O.prototype,\"maximumNumberOfFeatures\",null),e([u({readOnly:!0,type:Boolean})],O.prototype,\"maximumNumberOfFeaturesExceeded\",null),e([u({readOnly:!0})],O.prototype,\"requiredFields\",void 0),e([u()],O.prototype,\"suspended\",void 0),e([u()],O.prototype,\"view\",void 0),O=e([p(\"esri.views.layers.FeatureLayerView\")],O),O};export{O as FeatureLayerView,O as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../chunks/tslib.es6.js\";import t from\"../../../AggregateGraphic.js\";import\"../../../geometry.js\";import i from\"../../../Graphic.js\";import r from\"../../../core/Collection.js\";import s from\"../../../core/Error.js\";import a from\"../../../core/has.js\";import{clone as n}from\"../../../core/lang.js\";import o from\"../../../core/Logger.js\";import{andThen as l,isSome as h,unwrap as u,isNone as d}from\"../../../core/maybe.js\";import{debounce as p,isAbortError as c}from\"../../../core/promiseUtils.js\";import{react as y}from\"../../../core/reactiveUtils.js\";import{init as f,whenFalseOnce as g}from\"../../../core/watchUtils.js\";import{property as m}from\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/accessorSupport/ensureType.js\";import{subclass as _}from\"../../../core/accessorSupport/decorators/subclass.js\";import v from\"../../../layers/effects/FeatureEffectView.js\";import b from\"../../../layers/support/FeatureFilter.js\";import{calculateTolerance as R}from\"../../../renderers/support/clickToleranceUtils.js\";import x from\"../../../rest/support/FeatureSet.js\";import w from\"../../../rest/support/Query.js\";import{MAX_FILTERS as S}from\"../engine/webgl/definitions.js\";import{LayerView2DMixin as U}from\"./LayerView2D.js\";import{createSchema as F}from\"./features/schemaUtils.js\";import{createOrReuseTileRenderer as I}from\"./features/tileRenderers.js\";import{computePxBuffer as C}from\"./features/support/pixelBuffering.js\";import{findSizeVV as O,createClusterCountSizeVariable as E,isClusterCompatibleRenderer as q,createClusterRenderer as T}from\"./support/clusterUtils.js\";import j from\"./support/FeatureCommandQueue.js\";import V from\"./support/FeatureLayerProxy.js\";import{toJSONGeometryType as P}from\"./support/util.js\";import{TileManager as N}from\"../tiling/TileManager.js\";import{FeatureLayerView as k}from\"../../layers/FeatureLayerView.js\";import L from\"../../layers/LayerView.js\";import{RefreshableLayerView as H}from\"../../layers/RefreshableLayerView.js\";import{createQueryGeometry as z}from\"../../support/drapedUtils.js\";import J from\"../../webgl/capabilities.js\";import B from\"../../../geometry/Extent.js\";function Q(e){return e&&\"openPorts\"in e}const M=o.getLogger(\"esri.views.2d.layers.FeatureLayerView2D\");let A=class extends(k(H(U(L)))){constructor(){super(...arguments),this._pipelineIsUpdating=!0,this._commandsQueue=new j({process:e=>{switch(e.type){case\"processed-edit\":return this._doEdit(e);case\"refresh\":return this._doRefresh(e.dataChanged);case\"update\":return this._doUpdate()}}}),this._visibilityOverrides=new Set,this._highlightIds=new Map,this._lastPixelBuffer=0,this._updateHighlight=p((async()=>this._proxy.setHighlight(Array.from(this._highlightIds.keys())))),this._uploadsLocked=!1,this._needsClusterSizeUpdate=!1,this.featureEffectView=new v,this._lastDefinitionExpression=null}destroy(){var e,t;l(this._updateClusterSizeTask,(e=>e.remove())),null==(e=this._proxy)||e.destroy(),null==(t=this.tileRenderer)||t.destroy(),this._commandsQueue.destroy()}initialize(){this.addResolvingPromise(Promise.all([this._initProxy(),this._initServiceOptions()])),this.handles.add([this.on(\"valueRangesChanged\",(e=>{this._set(\"_aggregateValueRanges\",e.valueRanges)})),y((()=>this.featureEffect),(e=>{this.featureEffectView.featureEffect=e}),{initial:!0,sync:!0})])}async _initProxy(){if(\"isTable\"in this.layer&&this.layer.isTable)throw new s(\"featurelayerview:table-not-supported\",\"table feature layer can't be displayed\",{layer:this.layer});this._proxy&&this._proxy.destroy();const e=this._createClientOptions();return this._set(\"_proxy\",new V({client:e})),this._proxy.when()}async _initServiceOptions(){this._set(\"_serviceOptions\",await this._createServiceOptions())}get orderByFields(){return\"stream\"!==this._serviceOptions.type&&this._serviceOptions.orderByFields}get labelsVisible(){const e=\"subtype-group\"===this.layer.type?this.layer.sublayers.items:[this.layer];return!this.suspended&&e.some((e=>e.labelingInfo&&e.labelsVisible))}get queryMode(){return this._serviceOptions.type}get renderingConfigHash(){if(!this.layer)return null;const e=this.availableFields,t=this.layer,i=this.view.floors,{definitionExpression:r}=t,s=\"subtype-group\"!==this.layer.type&&this.layer.labelsVisible&&this.layer.labelingInfo,a=\"renderer\"in t&&t.renderer,n=\"feature\"===t.type?t.gdbVersion:void 0,o=\"feature\"===t.type&&t.historicMoment?t.historicMoment.getTime():void 0,{timeExtent:l}=this,u=\"customParameters\"in t?JSON.stringify(t.customParameters):void 0,d=\"apiKey\"in t?t.apiKey:void 0,p=\"stream\"===t.type?`${JSON.stringify(t.geometryDefinition)}${t.definitionExpression}`:null,c=JSON.stringify(this.clips),y=t.featureReduction&&t.featureReduction.toJSON(),f=\"orderBy\"in this.layer&&JSON.stringify(this.layer.orderBy),g=\"sublayers\"in this.layer&&this.layer.sublayers.items.reduce(((e,t)=>e+`${t.visible?1:0}.${JSON.stringify(t.renderer)}.${t.labelsVisible}\\n.${JSON.stringify(t.labelingInfo)}`),\"\");return JSON.stringify({orderBy:f,sublayerHash:g,filterHash:h(this.filter)&&this.filter.toJSON(),effectHash:h(this.featureEffect)&&this.featureEffect.toJSON(),streamFilter:p,gdbVersion:n,definitionExpression:r,historicMoment:o,availableFields:e,renderer:a,labelingInfo:s,timeExtent:l,floors:i,clipsHash:c,featureReduction:y,customParameters:u,apiKey:d})}async fetchPopupFeatures(e,t){var i;if(h(t)&&0===t.clientGraphics.length)return[];if(!(\"cluster\"===(null==(i=this.layer.featureReduction)?void 0:i.type))){const i=R({renderer:\"renderer\"in this.layer&&this.layer.renderer,event:h(t)&&t.event}),r=z(e,i,this.view),{features:s}=await this.queryVisibleFeatures(new w({geometry:r,outFields:[\"*\"],returnGeometry:!0}));t=h(t)?t:{};const a=new Set(t.clientGraphics.map((e=>e.getObjectId())));for(const e of s)a.has(e.getObjectId())||t.clientGraphics.push(e)}return super.fetchPopupFeatures(e,t)}highlight(e){var t;let s;return e instanceof i?s=[e.getObjectId()]:\"number\"==typeof e||\"string\"==typeof e?s=[e]:Array.isArray(e)&&e.length>0?s=\"number\"==typeof e[0]||\"string\"==typeof e[0]?e:e.map((e=>null==e?void 0:e.getObjectId())):r.isCollection(e)&&e.length>0&&(s=e.map((e=>null==e?void 0:e.getObjectId())).toArray()),s=null==(t=s)?void 0:t.filter((e=>null!=e)),s&&s.length?(this._addHighlight(s),{remove:()=>this._removeHighlight(s)}):{remove:()=>{}}}hasHighlight(){return!!this._highlightIds.size}async hitTest(e,r){if(!this.tileRenderer)return null;const s=await this.tileRenderer.hitTest(r);if(0===s.length)return null;const{features:a,aggregates:n}=await this._proxy.getFeatures(s);return[...n.map((e=>this._createHittestResult(t.fromJSON(e)))),...a.map((e=>this._createHittestResult(i.fromJSON(e))))]}async queryAggregates(){return(await this._proxy.getAggregates()).map((e=>t.fromJSON(e)))}queryStatistics(){return this._proxy.queryStatistics()}async querySummaryStatistics(e,t,i){const r={...t,scale:this.view.scale};return this._proxy.querySummaryStatistics(this._cleanUpQuery(e),r,i)}async queryUniqueValues(e,t,i){const r={...t,scale:this.view.scale};return this._proxy.queryUniqueValues(this._cleanUpQuery(e),r,i)}async queryClassBreaks(e,t,i){const r={...t,scale:this.view.scale};return this._proxy.queryClassBreaks(this._cleanUpQuery(e),r,i)}async queryHistogram(e,t,i){const r={...t,scale:this.view.scale};return this._proxy.queryHistogram(this._cleanUpQuery(e),r,i)}queryFeatures(e,t){return this.queryFeaturesJSON(e,t).then((e=>{const t=x.fromJSON(e);return t.features.forEach((e=>this._setLayersForFeature(e))),t}))}queryVisibleFeatures(e,t){return this._proxy.queryVisibleFeatures(this._cleanUpQuery(e),t).then((e=>{const t=x.fromJSON(e);return t.features.forEach((e=>this._setLayersForFeature(e))),t}))}queryFeaturesJSON(e,t){return this._proxy.queryFeatures(this._cleanUpQuery(e),t)}queryObjectIds(e,t){return this._proxy.queryObjectIds(this._cleanUpQuery(e),t)}queryFeatureCount(e,t){return this._proxy.queryFeatureCount(this._cleanUpQuery(e),t)}queryExtent(e,t){return this._proxy.queryExtent(this._cleanUpQuery(e),t).then((e=>({count:e.count,extent:B.fromJSON(e.extent)})))}setVisibility(e,t){t?this._visibilityOverrides.delete(e):this._visibilityOverrides.add(e),this._update()}update(e){if(!this._tileStrategy||!this.tileRenderer)return;const{hasMissingTiles:t,added:i,removed:r}=this._tileStrategy.update(e);(i.length||r.length)&&this._proxy.updateTiles({added:i,removed:r}),t&&this.requestUpdate(),this.notifyChange(\"updating\")}attach(){this.view.timeline.record(`${this.layer.title} (FeatureLayer) Attach`),this._tileStrategy=new N({acquireTile:e=>this._acquireTile(e),releaseTile:e=>this._releaseTile(e),tileInfoView:this.view.featuresTilingScheme,buffer:0}),this.handles.add(f(this,\"renderingConfigHash\",(()=>this._update())),\"attach\"),\"stream\"!==this.layer.type&&this.handles.add(this.layer.on(\"edits\",(e=>this._edit(e))),\"attach\")}detach(){this.container.removeAllChildren(),this.handles.remove(\"attach\"),this.tileRenderer&&(this.tileRenderer.uninstall(this.container),this.tileRenderer=null),this._tileStrategy&&(this._tileStrategy.destroy(),this._tileStrategy=null),this._tileRendererHash=null}moveStart(){this.requestUpdate()}viewChange(){this.requestUpdate()}moveEnd(){this.requestUpdate()}isUpdating(){var e;const t=\"renderer\"in this.layer&&null!=this.layer.renderer,i=this._commandsQueue.updating,r=null!=this._updatingRequiredFieldsPromise,s=!this._proxy||!this._proxy.isReady,n=this._pipelineIsUpdating,o=null===this.tileRenderer||(null==(e=this.tileRenderer)?void 0:e.updating),l=t&&(i||r||s||n||o);return a(\"esri-2d-log-updating\")&&console.log(`Updating FLV2D: ${l}\\n  -> hasRenderer ${t}\\n  -> hasPendingCommand ${i}\\n  -> updatingRequiredFields ${r}\\n  -> updatingProxy ${s}\\n  -> updatingPipeline ${n}\\n  -> updatingTileRenderer ${o}\\n`),l}_createClientOptions(){return{setUpdating:e=>{this._set(\"_pipelineIsUpdating\",e)},emitEvent:e=>{this.emit(e.name,e.event)}}}async _detectQueryMode(e){var t;const i=\"path\"in e,r=\"editingInfo\"in this.layer&&(null==(t=this.layer.editingInfo)?void 0:t.lastEditDate),s=!!this.layer.refreshInterval,n=!r&&s;if(i&&(\"feature\"===this.layer.type||\"subtype-group\"===this.layer.type)&&\"point\"===this.layer.geometryType&&this.layer.capabilities.query.supportsPagination&&!this.layer.capabilities.operations.supportsEditing&&!n&&a(\"featurelayer-snapshot-enabled\"))try{const e=await this.layer.queryFeatureCount();if(e<=a(\"featurelayer-snapshot-point-min-threshold\"))return{mode:\"snapshot\",featureCount:e};const t=a(\"featurelayer-snapshot-point-max-threshold\"),i=a(\"featurelayer-snapshot-point-coverage\"),r=this.view.extent,s=u(this.layer.fullExtent),n=null==s?void 0:s.clone().intersection(r),o=h(n)?n.width*n.height:0,l=(null==s?void 0:s.width)*(null==s?void 0:s.height),d=0===l?0:o/l;if(e<=t&&d>=i)return{mode:\"snapshot\",featureCount:e}}catch(o){M.warn(\"mapview-feature-layer\",\"Encountered an error when querying for featureCount\",{error:o})}return{mode:\"on-demand\"}}async _createServiceOptions(){var e;const t=this.layer;if(\"stream\"===t.type)return null;const{capabilities:i,objectIdField:r}=t,s=t.fields.map((e=>e.toJSON())),a=h(t.fullExtent)&&t.fullExtent.toJSON(),o=P(t.geometryType),l=t.timeInfo&&t.timeInfo.toJSON()||null,u=t.spatialReference?t.spatialReference.toJSON():null,d=\"feature\"===t.type?t.globalIdField:null;let p;\"ogc-feature\"===t.type?p=t.source.getFeatureDefinition():Q(t.source)?p=await t.source.openPorts():t.parsedUrl&&(p=n(t.parsedUrl),\"dynamicDataSource\"in t&&t.dynamicDataSource&&(p.query={layer:JSON.stringify({source:t.dynamicDataSource})}));const c=\"datesInUnknownTimezone\"in this.layer&&this.layer.datesInUnknownTimezone,y=null!=(e=\"subtypeField\"in this.layer&&this.layer.subtypeField)?e:null,{mode:f,featureCount:g}=await this._detectQueryMode(p);let m=this.layer.objectIdField;if(\"feature\"===this.layer.type&&h(this.layer.orderBy)&&this.layer.orderBy.length){const e=!this.layer.orderBy[0].valueExpression&&this.layer.orderBy[0].field;e&&(m=e)}return{type:f,timeReferenceUnknownClient:c,subtypeField:y,featureCount:g,globalIdField:d,maxRecordCount:i.query.maxRecordCount,tileMaxRecordCount:i.query.tileMaxRecordCount,capabilities:i,fields:s,fullExtent:a,geometryType:o,objectIdField:r,source:p,timeInfo:l,spatialReference:u,orderByFields:m}}async _createMemoryServiceOptions(e){const t=await e.openPorts();return{...this._createServiceOptions(),type:\"memory\",source:t}}_cleanUpQuery(e){const t=w.from(e)||this.createQuery();return t.outSpatialReference||(t.outSpatialReference=this.view.spatialReference),t}async _update(){return this._commandsQueue.push({type:\"update\"})}async _edit(e){if(this._validateEdit(e))return this._commandsQueue.push({type:\"edit\",edits:e})}async doRefresh(e){return this._commandsQueue.push({type:\"refresh\",dataChanged:e})}_validateEdit(e){const t=\"globalIdField\"in this.layer&&this.layer.globalIdField,i=e.deletedFeatures.some((e=>-1===e.objectId||!e.objectId)),r=t&&this.availableFields.includes(t);return i&&!r?(M.error(new s(\"mapview-apply-edits\",`Editing the specified service requires the layer's globalIdField, ${t} to be included the layer's outFields for updates to be reflected on the map`)),null):e}async _doUpdate(){try{if(this.destroyed||!this._hasRequiredSupport(this.layer)||!this._tileStrategy)return;const{featureEffectView:t,filter:i}=this;await this._updateRequiredFields();const{renderer:r}=this._getEffectiveRenderer();this._set(\"_effectiveRenderer\",r);const s=this._createSchemaConfig(),a=P(this.layer.geometryType),n=await C(r,a,this.view.resourceManager,this.layer.fields,this.layer.spatialReference,this.layer.featureReduction),o=this._createConfiguration(s,i,t.filter),l=this._lastDefinitionExpression!==o.definitionExpression;this._lastDefinitionExpression=o.definitionExpression,this._lastPixelBuffer=0===n?0:Math.max(n,this._lastPixelBuffer),o.schema.source.pixelBuffer=this._lastPixelBuffer;const h=this._createTileRendererHash(r);if(\"snapshot\"===this._serviceOptions.type&&(o.schema.source.featureCount=this._serviceOptions.featureCount),h!==this._tileRendererHash){await this._initTileRenderer(r);const e=this._serviceOptions;this.tileRenderer.onConfigUpdate(r);const t=this.layer;\"stream\"!==t.type&&Q(t.source)&&(e.source=await t.source.openPorts()),\"stream\"===t.type&&await this._initServiceOptions();const i={added:this._tileStrategy.tileKeys(),removed:[]};await this._proxy.startup(this.view.featuresTilingScheme,o,e,i),this.hasHighlight()&&await this._proxy.setHighlight(Array.from(this._highlightIds.keys())),await this._onceTilesUpdated(),this.tileRenderer.onConfigUpdate(r)}else{\"snapshot\"===this._serviceOptions.type&&l&&(o.schema.source.featureCount=await this.layer.queryFeatureCount());const t=await this._proxy.update(o);(t.mesh||t.targets.aggregate)&&this._lockGPUUploads();try{await this._proxy.applyUpdate(t)}catch(e){c(e)||M.error(e)}(t.mesh||t.targets.aggregate)&&this._unlockGPUUploads(),this.tileRenderer.onConfigUpdate(r),this._updateClusterSizeVariable(),this._forceAttributeTextureUpload()}this._tileRendererHash=h,this.tileRenderer.invalidateLabels(),this.requestUpdate()}catch(e){}}async _doEdit(e){try{await this._proxy.onEdits(e)}catch(t){c(t),0}}async _doRefresh(e){this._lockGPUUploads();try{await this._proxy.refresh(e)}catch(t){c(t),0}this._unlockGPUUploads()}_updateClusterSizeVariable(){this._needsClusterSizeUpdate&&(this.tileRenderer.onConfigUpdate(this._effectiveRenderer),this._needsClusterSizeUpdate=!1)}_createUpdateClusterSizeTask(e,t){return this.watch(\"_aggregateValueRanges\",(async i=>{this._updateClusterEffectiveRendererSizeVariable(e,t,i),this._needsClusterSizeUpdate=!0,this._uploadsLocked||this._updateClusterSizeVariable()}))}async _updateClusterEffectiveRendererSizeVariable(e,t,i){if(e.dynamicClusterSize&&\"visualVariables\"in e&&e.visualVariables){const r=O(e.visualVariables);if(h(r)&&\"cluster_count\"===r.field){const s=e.visualVariables.indexOf(r);e.visualVariables[s]=E(t,i);const a=e.clone();a.dynamicClusterSize=!0,this._set(\"_effectiveRenderer\",a)}}}_getEffectiveRenderer(){const e=\"renderer\"in this.layer&&this.layer.renderer,t=this.layer.featureReduction;if(h(this._updateClusterSizeTask)&&(this._updateClusterSizeTask.remove(),this._updateClusterSizeTask=null),t&&\"cluster\"===t.type&&q(e)){const i=t,r=[],s=T(r,e,i,this._aggregateValueRanges);return l(this._updateClusterSizeTask,(e=>e.remove())),this._updateClusterSizeTask=this._createUpdateClusterSizeTask(s,i),{renderer:s,aggregateFields:r,featureReduction:t}}return{renderer:e,aggregateFields:[],featureReduction:null}}_acquireTile(e){const t=this.tileRenderer.acquireTile(e);return t.once(\"attach\",(()=>{this.requestUpdate()})),t}_releaseTile(e){this.tileRenderer.releaseTile(e)}async _initTileRenderer(e){const t=await I(e,{layerView:this,tileInfoView:this.view.featuresTilingScheme,layer:this.layer});return this.tileRenderer&&(this._tileStrategy.clear(),this.tileRenderer.uninstall(this.container),this.tileRenderer.destroy(),this.tileRenderer=null),this.destroyed?null:(this._proxy.tileRenderer=t,this._set(\"tileRenderer\",t),this.tileRenderer.install(this.container),this.tileRenderer.onConfigUpdate(e),this.requestUpdate(),this.tileRenderer)}_createTileRendererHash(e){return`${\"heatmap\"===e.type?\"heatmap\":\"symbol\"}.${\"dot-density\"===e.type}`}get hasFilter(){const e=!!(\"floorInfo\"in this.layer&&this.layer.floorInfo&&this.view.floors&&this.view.floors.length);return!!this.filter||e||!!this._visibilityOverrides.size||!!this.timeExtent}_injectOverrides(e){const t=h(e)?e.timeExtent:null,i=h(this.timeExtent)&&h(t)?this.timeExtent.intersection(t):this.timeExtent||t;let r=null;const s=\"floorInfo\"in this.layer&&this.layer.floorInfo;if(s){const t=h(e)&&e.where;r=this._addFloorFilterClause(t)}if(!this._visibilityOverrides.size&&!i&&!s)return h(e)?e.toJSON():null;(e=h(e)&&e.clone()||new b).timeExtent=i,r&&(e.where=r);const a=e.toJSON();return a.hiddenIds=Array.from(this._visibilityOverrides),a}_addFloorFilterClause(e){const t=this.layer;let i=e||\"\";if(\"floorInfo\"in t&&t.floorInfo){var r;let e=this.view.floors;if(!e||!e.length)return i;null!=(r=t.floorInfo.viewAllLevelIds)&&r.length&&(e=t.floorInfo.viewAllLevelIds);const s=e.filter((e=>\"\"!==e)).map((e=>\"'\"+e+\"'\"));s.push(\"''\");const a=t.floorInfo.floorField;let n=\"(\"+a+\" IN ({ids}) OR \"+a+\" IS NULL)\";if(n=n.replace(\"{ids}\",s.join(\", \")),h(i)&&i.includes(a)){let e=new RegExp(\"AND \\\\(\"+a+\".*NULL\\\\)\",\"g\");i=i.replace(e,\"\"),e=new RegExp(\"\\\\(\"+a+\".*NULL\\\\)\",\"g\"),i=i.replace(e,\"\"),i=i.replace(/\\s+/g,\" \").trim()}i=\"\"!==i?\"(\"+i+\") AND \"+n:n}return\"\"!==i?i:null}_createConfiguration(e,t,i){const r=\"feature\"===this.layer.type&&this.layer.historicMoment?this.layer.historicMoment.getTime():void 0,s=\"feature\"===this.layer.type?this.layer.gdbVersion:void 0,a=new Array(S),n=this._injectOverrides(t);a[0]=n,a[1]=h(i)?i.toJSON():null;const o=F(e);if(d(o))return null;const l=J();return{definitionExpression:this.layer.definitionExpression,availableFields:this.availableFields,gdbVersion:s,historicMoment:r,devicePixelRatio:window.devicePixelRatio||1,filters:a,schema:o,supportsTextureFloat:l.supportsTextureFloat,maxTextureSize:l.maxTextureSize}}_hasRequiredSupport(e){var t;return!(\"renderer\"in e&&\"dot-density\"===(null==(t=e.renderer)?void 0:t.type)&&!J().supportsTextureFloat)||(M.error(new s(\"webgl-missing-extension\",\"Missing WebGL extension OES_Texture_Float which is required for DotDensity\")),!1)}_onceTilesUpdated(){return this.requestUpdate(),g(this,\"_pipelineIsUpdating\",!1)}_lockGPUUploads(){this.tileRenderer&&(this._uploadsLocked=!0,this.tileRenderer.lockGPUUploads())}_unlockGPUUploads(){this.tileRenderer&&(this._uploadsLocked=!1,this.tileRenderer.unlockGPUUploads())}_forceAttributeTextureUpload(){this.tileRenderer&&this.tileRenderer.forceAttributeTextureUpload()}_createSchemaConfig(){const e=\"feature\"===this.layer.type?this.layer.historicMoment:null,t=\"feature\"===this.layer.type?this.layer.gdbVersion:null;return{renderer:\"renderer\"in this.layer&&this.layer.renderer,spatialReference:this.layer.spatialReference,timeExtent:this.layer.timeExtent,definitionExpression:this.layer.definitionExpression,featureReduction:this.layer.featureReduction,fields:this.layer.fields,geometryType:this.layer.geometryType,historicMoment:e,labelsVisible:\"labelsVisible\"in this.layer&&this.layer.labelsVisible,labelingInfo:\"labelingInfo\"in this.layer&&this.layer.labelingInfo,availableFields:this.availableFields,featureEffect:this.featureEffect,filter:this.filter,gdbVersion:t,pixelBuffer:0,orderBy:\"orderBy\"in this.layer&&this.layer.orderBy?this.layer.orderBy:null,customParameters:{...\"customParameters\"in this.layer?this.layer.customParameters:void 0,token:\"apiKey\"in this.layer?this.layer.apiKey:void 0}}}_addHighlight(e){for(const t of e)if(this._highlightIds.has(t)){const e=this._highlightIds.get(t);this._highlightIds.set(t,e+1)}else this._highlightIds.set(t,1);this._updateHighlight().catch((e=>{c(e)||M.error(e)}))}_removeHighlight(e){for(const t of e)if(this._highlightIds.has(t)){const e=this._highlightIds.get(t)-1;0===e?this._highlightIds.delete(t):this._highlightIds.set(t,e)}this._updateHighlight().catch((e=>{c(e)||M.error(e)}))}_setLayersForFeature(e){const t=this.layer;e.layer=t,e.sourceLayer=t}_createHittestResult(e){return this._setLayersForFeature(e),h(e.geometry)&&(e.geometry.spatialReference=this.view.spatialReference),e}};e([m()],A.prototype,\"_serviceOptions\",void 0),e([m()],A.prototype,\"_proxy\",void 0),e([m()],A.prototype,\"_pipelineIsUpdating\",void 0),e([m()],A.prototype,\"_effectiveRenderer\",void 0),e([m()],A.prototype,\"_aggregateValueRanges\",void 0),e([m()],A.prototype,\"_commandsQueue\",void 0),e([m()],A.prototype,\"featureEffectView\",void 0),e([m()],A.prototype,\"labelsVisible\",null),e([m({readOnly:!0})],A.prototype,\"queryMode\",null),e([m()],A.prototype,\"renderingConfigHash\",null),e([m()],A.prototype,\"tileRenderer\",void 0),e([m()],A.prototype,\"updating\",void 0),A=e([_(\"esri.views.2d.layers.FeatureLayerView2D\")],A);const D=A;export{D as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nasync function e(e,a){if(!e)return null;switch(e.type){case\"class-breaks\":case\"simple\":case\"unique-value\":case\"dot-density\":case\"dictionary\":return new((await import(\"./tileRenderers/SymbolTileRenderer.js\")).default)(a);case\"heatmap\":return new((await import(\"./tileRenderers/HeatmapTileRenderer.js\")).default)(a)}}export{e as createOrReuseTileRenderer};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport{isSome as n,isNone as t}from\"../../core/maybe.js\";import{isPoint as e,isPolyline as r,isPolygon as u,isMultipoint as i,isExtent as o}from\"./jsonUtils.js\";function l(n){return n&&\"upperLeft\"===n.originPosition}const a=(n,t,e)=>[t,e],m=(n,t,e)=>[t,e,n[2]],c=(n,t,e)=>[t,e,n[2],n[3]];function s(t){if(!t)return null;return{originPosition:\"upper-left\"===t.originPosition?\"upperLeft\":\"lower-left\"===t.originPosition?\"lowerLeft\":t.originPosition,scale:t.tolerance?[t.tolerance,t.tolerance]:[1,1],translate:n(t.extent)?[t.extent.xmin,t.extent.ymax]:[0,0]}}function f(t,e){if(t===e||null==t&&null==e)return!0;if(null==t||null==e)return!1;let r,u,i,o,a,m;return l(t)?(r=t.translate[0],u=t.translate[1],i=t.scale[0]):(r=n(t.extent)?t.extent.xmin:0,u=n(t.extent)?t.extent.ymax:0,i=t.tolerance),l(e)?(o=e.translate[0],a=e.translate[1],m=e.scale[0]):(o=n(e.extent)?e.extent.xmin:0,a=n(e.extent)?e.extent.ymax:0,m=e.tolerance),r===o&&u===a&&i===m}function x({scale:n,translate:t},e){return Math.round((e-t[0])/n[0])}function h({scale:n,translate:t},e){return Math.round((t[1]-e)/n[1])}function I(n,t,e){const r=[];let u,i,o,l;for(let a=0;a<e.length;a++){const m=e[a];a>0?(o=x(n,m[0]),l=h(n,m[1]),o===u&&l===i||(r.push(t(m,o-u,l-i)),u=o,i=l)):(u=x(n,m[0]),i=h(n,m[1]),r.push(t(m,u,i)))}return r.length>0?r:null}function g(n,t,e){return t[0]=x(n,e[0]),t[3]=h(n,e[1]),t[2]=x(n,e[2]),t[1]=h(n,e[3]),t}function p(n,t,e,r){return I(n,e?r?c:m:r?m:a,t)}function N(n,t,e,r){const u=[],i=e?r?c:m:r?m:a;for(let o=0;o<t.length;o++){const e=I(n,i,t[o]);e&&e.length>=3&&u.push(e)}return u.length?u:null}function y(n,t,e,r){const u=[],i=e?r?c:m:r?m:a;for(let o=0;o<t.length;o++){const e=I(n,i,t[o]);e&&e.length>=2&&u.push(e)}return u.length?u:null}function z({scale:n,translate:t},e){return e*n[0]+t[0]}function T({scale:n,translate:t},e){return t[1]-e*n[1]}function M(n,t,e){const r=new Array(e.length);if(!e.length)return r;const[u,i]=n.scale;let o=z(n,e[0][0]),l=T(n,e[0][1]);r[0]=t(e[0],o,l);for(let a=1;a<e.length;a++){const n=e[a];o+=n[0]*u,l-=n[1]*i,r[a]=t(n,o,l)}return r}function E(n,t,e){const r=new Array(e.length);for(let u=0;u<e.length;u++)r[u]=M(n,t,e[u]);return r}function P(n,t,e){return e?(t[0]=z(n,e[0]),t[1]=T(n,e[3]),t[2]=z(n,e[2]),t[3]=T(n,e[1]),t):[z(n,t[0]),T(n,t[3]),z(n,t[2]),T(n,t[1])]}function b(n,t,e,r){return M(n,e?r?c:m:r?m:a,t)}function F(n,t,e,r){return E(n,e?r?c:m:r?m:a,t)}function V(n,t,e,r){return E(n,e?r?c:m:r?m:a,t)}function Y(n,t,e){let[r,u]=e[0],i=Math.min(r,t[0]),o=Math.min(u,t[1]),l=Math.max(r,t[2]),a=Math.max(u,t[3]);for(let m=1;m<e.length;m++){const[n,t]=e[m];r+=n,u+=t,n<0&&(i=Math.min(i,r)),n>0&&(l=Math.max(l,r)),t<0?o=Math.min(o,u):t>0&&(a=Math.max(a,u))}return n[0]=i,n[1]=o,n[2]=l,n[3]=a,n}function _(n,t){if(!t.length)return null;n[0]=n[1]=Number.POSITIVE_INFINITY,n[2]=n[3]=Number.NEGATIVE_INFINITY;for(let e=0;e<t.length;e++)Y(n,n,t[e]);return n}function A(n){const t=[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY];return Y(t,t,n)}function w(n){return _([0,0,0,0],n)}function j(n){return _([0,0,0,0],n)}function G(n,t,e,r,u){return t.xmin=x(n,e.xmin),t.ymin=h(n,e.ymin),t.xmax=x(n,e.xmax),t.ymax=h(n,e.ymax),t!==e&&(r&&(t.zmin=e.zmin,t.zmax=e.zmax),u&&(t.mmin=e.mmin,t.mmax=e.mmax)),t}function L(n,t,e,r,u){return t.points=p(n,e.points,r,u),t}function O(n,t,e,r,u){return t.x=x(n,e.x),t.y=h(n,e.y),t!==e&&(r&&(t.z=e.z),u&&(t.m=e.m)),t}function S(n,t,e,r,u){const i=N(n,e.rings,r,u);return i?(t.rings=i,t):null}function d(n,t,e,r,u){const i=y(n,e.paths,r,u);return i?(t.paths=i,t):null}function U(n,t){return n&&t?e(t)?O(n,{},t,!1,!1):r(t)?d(n,{},t,!1,!1):u(t)?S(n,{},t,!1,!1):i(t)?L(n,{},t,!1,!1):o(t)?G(n,{},t,!1,!1):null:null}function k(n,t,e,r,u){return t.xmin=z(n,e.xmin),t.ymin=T(n,e.ymin),t.xmax=z(n,e.xmax),t.ymax=T(n,e.ymax),t!==e&&(r&&(t.zmin=e.zmin,t.zmax=e.zmax),u&&(t.mmin=e.mmin,t.mmax=e.mmax)),t}function q(t,e,r,u,i){return n(r)&&(e.points=b(t,r.points,u,i)),e}function v(n,e,r,u,i){return t(r)||(e.x=z(n,r.x),e.y=T(n,r.y),e!==r&&(u&&(e.z=r.z),i&&(e.m=r.m))),e}function B(t,e,r,u,i){return n(r)&&(e.rings=V(t,r.rings,u,i)),e}function C(t,e,r,u,i){return n(r)&&(e.paths=F(t,r.paths,u,i)),e}export{f as equals,Y as getQuantizedBoundsCoordsArray,_ as getQuantizedBoundsCoordsArrayArray,w as getQuantizedBoundsPaths,A as getQuantizedBoundsPoints,j as getQuantizedBoundsRings,g as quantizeBounds,G as quantizeExtent,U as quantizeGeometry,L as quantizeMultipoint,y as quantizePaths,O as quantizePoint,p as quantizePoints,S as quantizePolygon,d as quantizePolyline,N as quantizeRings,x as quantizeX,h as quantizeY,s as toQuantizationTransform,P as unquantizeBounds,M as unquantizeCoordsArray,E as unquantizeCoordsArrayArray,k as unquantizeExtent,q as unquantizeMultipoint,F as unquantizePaths,v as unquantizePoint,b as unquantizePoints,B as unquantizePolygon,C as unquantizePolyline,V as unquantizeRings,z as unquantizeX,T as unquantizeY};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport{WGLGeometryType as e}from\"../../views/2d/engine/webgl/enums.js\";import{createMaterialKey as t}from\"../../views/2d/engine/webgl/materialKey/MaterialKey.js\";const a={marker:e.MARKER,fill:e.FILL,line:e.LINE,text:e.TEXT};class l{constructor(e,l,s,n){const r={minScale:null==l?void 0:l.minScale,maxScale:null==l?void 0:l.maxScale},c=i(r);this.layers=e,this.data=l,this.hash=this._createHash()+c,this.rendererKey=s;const m={isOutline:!1,isOutlinedFill:!1,placement:null,stride:{fill:\"default\"},vvFlags:s};for(const i of e){const e=a[i.type];i.materialKey=t(e,m),i.maxVVSize=n,i.scaleInfo=r,i.templateHash+=c}}get type(){return\"expanded-cim\"}_createHash(){let e=\"\";for(const t of this.layers)e+=t.templateHash;return e}}function i(e){return e.minScale||e.maxScale?e.minScale+\"-\"+e.maxScale:\"\"}export{l as ExpandedCIM};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport{isDevEnvironment as t,adjustStaticAGOUrl as r}from\"../../../../core/devEnvironmentUtils.js\";import e from\"../../../../core/Error.js\";import{throwIfAborted as o}from\"../../../../core/promiseUtils.js\";import{urlToObject as n}from\"../../../../core/urlUtils.js\";import s from\"../../../../portal/Portal.js\";import{f as l}from\"../../../../chunks/persistableUrlUtils.js\";import{fetchStyle as m,Style2DUrlTemplate as a,requestJSON as i,makeCIMSymbolRef as c,symbolUrlFromStyleItem as u}from\"../../../../symbols/support/styleUtils.js\";async function y(t,r,n){if(!t.name)return Promise.reject(new e(\"style-symbol-reference-name-missing\",\"Missing name in style symbol reference\"));if(t.styleName&&\"Esri2DPointSymbolsStyle\"===t.styleName)return f(t,n);try{return p(await m(t,r,n),t.name,r,n)}catch(s){return o(s),null}}async function f(t,r){const e=a.replace(/\\{SymbolName\\}/gi,t.name);try{const t=await i(e,r);return c(t.data)}catch(n){return o(n),null}}async function p(m,a,y,f){const p=m.data,b={portal:y&&y.portal||s.getDefault(),url:n(m.baseUrl),origin:\"portal-item\"},d=p.items.find((t=>t.name===a));if(!d){throw new e(\"symbolstyleutils:symbol-name-not-found\",`The symbol name '${a}' could not be found`,{symbolName:a})}let j=l(u(d,\"cimRef\"),b);t()&&(j=r(j));try{const t=await i(j,f);return c(t.data)}catch(U){return o(U),null}}export{y as fetchCIMSymbolReference};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport{analyzeCIMSymbol as e}from\"../../../../symbols/cim/cimAnalyzer.js\";import{ExpandedCIM as t}from\"../../../../symbols/cim/ExpandedCIM.js\";import{fetchCIMSymbolReference as a}from\"./webStyleUtils.js\";const r=async(e,t,a,r)=>Promise.all(e.map((e=>l(e,t,a,r)))),n=async(a,r,n)=>new t(await e(a.data,r,n),a.data,a.rendererKey,a.maxVVSize),l=async(e,t,r,l)=>{if(!e)return null;if(\"cim\"===e.type)return n(e,t,r);if(\"web-style\"===e.type){const i={type:\"cim\",data:await a(e,null,l),rendererKey:e.rendererKey,maxVVSize:e.maxVVSize};return n(i,t,r)}return e};function i(e){if(!e)return null;const{type:t,cim:a,url:r,materialHash:n}=e,l={cim:a,type:t,mosaicHash:n,url:r,size:null,dashTemplate:null,path:null,text:null,fontName:null};switch(t){case\"marker\":l.size=e.size,l.path=e.path;break;case\"line\":l.dashTemplate=e.dashTemplate;break;case\"text\":l.text=e.text,l.fontName=e.fontName}return l}export{i as cimLayerToRasterizationInfo,l as expandSymbol,r as expandSymbols};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport{clamp as t}from\"./mathUtils.js\";function o(o,r,e=0){const i=t(o,0,f);for(let t=0;t<4;t++)r[e+t]=Math.floor(256*l(i*n[t]))}function r(t,o=0){let r=0;for(let n=0;n<4;n++)r+=t[o+n]*e[n];return r}const n=[1,256,65536,16777216],e=[1/256,1/65536,1/16777216,1/4294967296],f=r(new Uint8ClampedArray([255,255,255,255]));function l(t){return t-Math.floor(t)}export{o as packFloatRGBA,r as unpackFloatRGBA};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nfunction c(c){return c=c||globalThis.location.hostname,n.some((a=>{var o;return null!=(null==(o=c)?void 0:o.match(a))}))}function a(c,a){return c&&(a=a||globalThis.location.hostname)?null!=a.match(t)||null!=a.match(r)?c.replace(\"static.arcgis.com\",\"staticdev.arcgis.com\"):null!=a.match(l)||null!=a.match(s)?c.replace(\"static.arcgis.com\",\"staticqa.arcgis.com\"):c:c}function o(c){c=c||globalThis.location.hostname;return[/^zrh-.+?\\.esri\\.com$/].concat(n).some((a=>{var o;return null!=(null==(o=c)?void 0:o.match(a))}))}const t=/^devext.arcgis.com$/,l=/^qaext.arcgis.com$/,r=/^[\\w-]*\\.mapsdevext.arcgis.com$/,s=/^[\\w-]*\\.mapsqa.arcgis.com$/,n=[/^([\\w-]*\\.)?[\\w-]*\\.zrh-dev-local.esri.com$/,t,l,/^jsapps.esri.com$/,r,s];export{a as adjustStaticAGOUrl,c as isDevEnvironment,o as isTelemetryDevEnvironment};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../chunks/tslib.es6.js\";import t from\"../../core/Accessor.js\";import r from\"../../core/Evented.js\";import{HandleOwnerMixin as s}from\"../../core/HandleOwner.js\";import{IdentifiableMixin as i}from\"../../core/Identifiable.js\";import o from\"../../core/Logger.js\";import{unwrapOr as l}from\"../../core/maybe.js\";import{EsriPromiseMixin as n}from\"../../core/Promise.js\";import{property as a}from\"../../core/accessorSupport/decorators/property.js\";import\"../../core/arrayUtils.js\";import\"../../core/has.js\";import\"../../core/accessorSupport/ensureType.js\";import{subclass as p}from\"../../core/accessorSupport/decorators/subclass.js\";let d=class extends(s(i(n(r.EventedMixin(t))))){constructor(e){super(e),this.layer=null,this.parent=null}initialize(){this.when().catch((e=>{if(\"layerview:create-error\"!==e.name){const t=this.layer&&this.layer.id||\"no id\",r=this.layer&&this.layer.title||\"no title\";throw o.getLogger(this.declaredClass).error(\"#resolve()\",`Failed to resolve layer view (layer title: '${r}', id: '${t}')`,e),e}}))}get fullOpacity(){return l(this.get(\"layer.opacity\"),1)*l(this.get(\"parent.fullOpacity\"),1)}get suspended(){return!this.canResume()}get suspendInfo(){return this.getSuspendInfo()}get legendEnabled(){return!this.suspended&&!0===this.layer.legendEnabled}get updating(){return!!(this.updatingHandles&&this.updatingHandles.updating||this.isUpdating())}get updatingProgress(){return this.updating?0:1}get visible(){var e;return!0===(null==(e=this.layer)?void 0:e.visible)}set visible(e){void 0!==e?this._override(\"visible\",e):this._clearOverride(\"visible\")}canResume(){return!this.get(\"parent.suspended\")&&this.get(\"view.ready\")&&this.get(\"layer.loaded\")&&this.visible||!1}getSuspendInfo(){const e=this.parent&&this.parent.suspended?this.parent.suspendInfo:{},t=this;return t.view&&t.view.ready||(e.viewNotReady=!0),this.layer&&this.layer.loaded||(e.layerNotLoaded=!0),this.visible||(e.layerInvisible=!0),e}isUpdating(){return!1}};e([a()],d.prototype,\"fullOpacity\",null),e([a()],d.prototype,\"layer\",void 0),e([a()],d.prototype,\"parent\",void 0),e([a({readOnly:!0})],d.prototype,\"suspended\",null),e([a({readOnly:!0})],d.prototype,\"suspendInfo\",null),e([a({readOnly:!0})],d.prototype,\"legendEnabled\",null),e([a({type:Boolean,readOnly:!0})],d.prototype,\"updating\",null),e([a({readOnly:!0})],d.prototype,\"updatingProgress\",null),e([a()],d.prototype,\"visible\",null),d=e([p(\"esri.views.layers.LayerView\")],d);const u=d;export{u as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport e from\"../../../core/Error.js\";import r from\"../../../core/Logger.js\";import{unquantizeMultipoint as t,unquantizePolyline as o,unquantizePolygon as n,unquantizePoint as a}from\"../../../geometry/support/quantizationUtils.js\";function s(e,t,o,n,a){const s=e.referencesGeometry()&&a?u(t,n,a):t,i=e.repurposeFeature(s);try{return e.evaluate({...o,$feature:i})}catch(c){return r.getLogger(\"esri.views.2d.support.arcadeOnDemand\").warn(\"Feature arcade evaluation failed:\",c),null}}const i=new Map;function u(e,r,t){const{transform:o,hasZ:n,hasM:a}=t;i.has(r)||i.set(r,c(r));const s=i.get(r)(e.geometry,o,n,a);return{...e,geometry:s}}function c(s){const i={};switch(s){case\"esriGeometryPoint\":return(e,r,t,o)=>a(r,i,e,t,o);case\"esriGeometryPolygon\":return(e,r,t,o)=>n(r,i,e,t,o);case\"esriGeometryPolyline\":return(e,r,t,n)=>o(r,i,e,t,n);case\"esriGeometryMultipoint\":return(e,r,o,n)=>t(r,i,e,o,n);default:return r.getLogger(\"esri.views.2d.support.arcadeOnDemand\").error(new e(\"mapview-arcade\",`Unable to handle geometryType: ${s}`)),e=>e}}export{s as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport{_ as r}from\"../../../chunks/tslib.es6.js\";import{JSONSupport as s}from\"../../../core/JSONSupport.js\";import\"../../../core/Logger.js\";import\"../../../core/accessorSupport/ensureType.js\";import\"../../../core/arrayUtils.js\";import\"../../../core/has.js\";import\"../../../core/accessorSupport/set.js\";import{subclass as o}from\"../../../core/accessorSupport/decorators/subclass.js\";let e=class extends s{};e=r([o(\"esri.views.layers.support.ClipArea\")],e);const t=e;export{t as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport{_ as t}from\"../../../chunks/tslib.es6.js\";import{property as r}from\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/arrayUtils.js\";import\"../../../core/has.js\";import\"../../../core/accessorSupport/ensureType.js\";import{subclass as o}from\"../../../core/accessorSupport/decorators/subclass.js\";import e from\"./ClipArea.js\";var s;let i=s=class extends e{constructor(){super(...arguments),this.type=\"rect\",this.left=null,this.right=null,this.top=null,this.bottom=null}clone(){return new s({left:this.left,right:this.right,top:this.top,bottom:this.bottom})}get version(){return(this._get(\"version\")||0)+1}};t([r({type:[Number,String],json:{write:!0}})],i.prototype,\"left\",void 0),t([r({type:[Number,String],json:{write:!0}})],i.prototype,\"right\",void 0),t([r({type:[Number,String],json:{write:!0}})],i.prototype,\"top\",void 0),t([r({type:[Number,String],json:{write:!0}})],i.prototype,\"bottom\",void 0),t([r({readOnly:!0})],i.prototype,\"version\",null),i=s=t([o(\"esri.views.layers.support.ClipRect\")],i);const p=i;export{p as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport{_ as r}from\"../../../chunks/tslib.es6.js\";import\"../../../geometry.js\";import{property as e}from\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/arrayUtils.js\";import\"../../../core/has.js\";import\"../../../core/accessorSupport/ensureType.js\";import{subclass as o}from\"../../../core/accessorSupport/decorators/subclass.js\";import t from\"../../../geometry/Geometry.js\";import{fromJSON as s}from\"../../../geometry/support/jsonUtils.js\";import p from\"./ClipArea.js\";import m from\"../../../geometry/Extent.js\";import i from\"../../../geometry/Polygon.js\";var y;const n={base:t,key:\"type\",typeMap:{extent:m,polygon:i}};let c=y=class extends p{constructor(){super(...arguments),this.type=\"geometry\",this.geometry=null}get version(){return(this._get(\"version\")||0)+1}clone(){return new y({geometry:this.geometry.clone()})}};r([e({types:n,json:{read:s,write:!0}})],c.prototype,\"geometry\",void 0),r([e({readOnly:!0})],c.prototype,\"version\",null),c=y=r([o(\"esri.views.layers.support.Geometry\")],c);const a=c;export{a as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport{_ as r}from\"../../../chunks/tslib.es6.js\";import{property as s}from\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/arrayUtils.js\";import\"../../../core/has.js\";import\"../../../core/accessorSupport/ensureType.js\";import{subclass as o}from\"../../../core/accessorSupport/decorators/subclass.js\";import t from\"./ClipArea.js\";let e=class extends t{constructor(){super(...arguments),this.type=\"path\",this.path=[]}get version(){return(this._get(\"version\")||0)+1}};r([s({type:[[[Number]]],json:{write:!0}})],e.prototype,\"path\",void 0),r([s({readOnly:!0})],e.prototype,\"version\",null),e=r([o(\"esri.views.layers.support.Path\")],e);const p=e;export{p as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport{_ as t}from\"../../../chunks/tslib.es6.js\";import e from\"../../../core/Collection.js\";import{referenceSetter as s}from\"../../../core/collectionUtils.js\";import{init as i}from\"../../../core/watchUtils.js\";import{property as r}from\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/arrayUtils.js\";import\"../../../core/has.js\";import\"../../../core/accessorSupport/ensureType.js\";import{subclass as a}from\"../../../core/accessorSupport/decorators/subclass.js\";import{Container as o}from\"../engine/Container.js\";import p from\"../../layers/support/ClipArea.js\";import h from\"../../layers/support/ClipRect.js\";import n from\"../../layers/support/Geometry.js\";import d from\"../../layers/support/Path.js\";const c=e.ofType({key:\"type\",base:p,typeMap:{rect:h,path:d,geometry:n}}),l=e=>{let p=class extends e{constructor(){super(...arguments),this.clips=new c,this.moving=!1,this.attached=!1,this.lastUpdateId=-1,this.updateRequested=!1}initialize(){var t;this.container||(this.container=new o),this.container.fadeTransitionEnabled=!0,this.container.opacity=0,this.container.clips=this.clips,this.handles.add([i(this,\"suspended\",(t=>{this.container&&(this.container.visible=!t),this.view&&!t&&this.updateRequested&&this.view.requestUpdate()}),!0),i(this,[\"layer.opacity\",\"container\"],(()=>{var t,e;this.container&&(this.container.opacity=null!=(t=null==(e=this.layer)?void 0:e.opacity)?t:1)}),!0),i(this,[\"layer.blendMode\"],(t=>{this.container&&(this.container.blendMode=t)}),!0),i(this,[\"layer.effect\"],(t=>{this.container&&(this.container.effect=t)}),!0),this.clips.on(\"change\",(()=>{this.container.clips=this.clips,this.notifyChange(\"clips\")}))]),null!=(t=this.view)&&t.whenLayerView?this.view.whenLayerView(this.layer).then((t=>{t!==this||this.attached||this.destroyed||(this.attach(),this.requestUpdate(),this.attached=!0)}),(()=>{})):this.when().then((()=>{this.attached||this.destroyed||(this.attach(),this.requestUpdate(),this.attached=!0)}),(()=>{}))}destroy(){this.attached&&(this.detach(),this.attached=!1),this.handles.remove(\"initialize\"),this.updateRequested=!1}get updating(){return!this.attached||!this.suspended&&(this.updateRequested||this.isUpdating())||!(!this.updatingHandles||!this.updatingHandles.updating)}isVisibleAtScale(t){let e=!0;const s=this.layer,i=s.minScale,r=s.maxScale;if(null!=i&&null!=r){let s=!i,a=!r;!s&&t<=i&&(s=!0),!a&&t>=r&&(a=!0),e=s&&a}return e}requestUpdate(){this.destroyed||this.updateRequested||(this.updateRequested=!0,this.suspended||this.view.requestUpdate())}processUpdate(t){!this.isFulfilled()||this.isResolved()?(this._set(\"updateParameters\",t),this.updateRequested&&!this.suspended&&(this.updateRequested=!1,this.update(t))):this.updateRequested=!1}hitTest(t,e){return Promise.resolve(null)}isUpdating(){return!1}isRendering(){return!1}canResume(){return!!super.canResume()&&this.isVisibleAtScale(this.view.scale)}};return t([r({type:c,set(t){const e=s(t,this._get(\"clips\"),c);this._set(\"clips\",e)}})],p.prototype,\"clips\",void 0),t([r()],p.prototype,\"moving\",void 0),t([r()],p.prototype,\"attached\",void 0),t([r()],p.prototype,\"container\",void 0),t([r()],p.prototype,\"suspended\",void 0),t([r({readOnly:!0})],p.prototype,\"updateParameters\",void 0),t([r()],p.prototype,\"updateRequested\",void 0),t([r()],p.prototype,\"updating\",null),t([r()],p.prototype,\"view\",void 0),p=t([a(\"esri.views.2d.layers.LayerView2D\")],p),p};export{l as LayerView2DMixin};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport e from\"../../../../core/Error.js\";import s from\"../../../../core/Logger.js\";import{WGLVVFlag as i}from\"./enums.js\";import{isNumber as r}from\"./Utils.js\";const l=s.getLogger(\"esri.views.2d.engine.webgl\");function o(s){return r(s.minDataValue)&&r(s.maxDataValue)&&null!=s.minSize&&null!=s.maxSize?i.SIZE_MINMAX_VALUE:(s.expression&&\"view.scale\"===s.expression||s.valueExpression&&\"$view.scale\"===s.valueExpression)&&Array.isArray(s.stops)?i.SIZE_SCALE_STOPS:(null!=s.field||s.expression&&\"view.scale\"!==s.expression||s.valueExpression&&\"$view.scale\"!==s.valueExpression)&&(Array.isArray(s.stops)||\"levels\"in s&&s.levels)?i.SIZE_FIELD_STOPS:(null!=s.field||s.expression&&\"view.scale\"!==s.expression||s.valueExpression&&\"$view.scale\"!==s.valueExpression)&&null!=s.valueUnit?i.SIZE_UNIT_VALUE:(l.error(new e(\"mapview-bad-type\",\"Found invalid size VisualVariable\",s)),i.NONE)}export{o as getTypeOfSizeVisualVariable};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nfunction t(t,e){return e?\"xoffset\"in e&&e.xoffset?Math.max(t,Math.abs(e.xoffset)):\"yoffset\"in e&&e.yoffset?Math.max(t,Math.abs(e.yoffset||0)):t:t}function e(t){let e=0,n=0;for(let r=0;r<t.length;r++){const s=t[r].size;\"number\"==typeof s&&(e+=s,n++)}return e/n}function n(t,n){return\"number\"==typeof t?t:t&&t.stops&&t.stops.length?e(t.stops):n}function r(t,e){if(!e)return t;const r=e.filter((t=>\"size\"===t.type)).map((e=>{const{maxSize:r,minSize:s}=e;return(n(r,t)+n(s,t))/2}));let s=0;const o=r.length;if(0===o)return t;for(let n=0;n<o;n++)s+=r[n];const f=Math.floor(s/o);return Math.max(f,t)}function s(e){const n=e&&e.renderer,s=\"touch\"===(e&&e.event&&e.event.pointerType)?9:6;if(!n)return s;const o=\"visualVariables\"in n?r(s,n.visualVariables):s;if(\"simple\"===n.type)return t(o,n.symbol);if(\"unique-value\"===n.type){let e=o;return n.uniqueValueInfos.forEach((n=>{e=t(e,n.symbol)})),e}if(\"class-breaks\"===n.type){let e=o;return n.classBreakInfos.forEach((n=>{e=t(e,n.symbol)})),e}return n.type,o}export{s as calculateTolerance};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport\"../../geometry.js\";import{isSome as e,isNone as t}from\"../../core/maybe.js\";import{getMetersPerUnitForSR as r}from\"../../core/unitUtils.js\";import{calculateTolerance as n}from\"../../renderers/support/clickToleranceUtils.js\";import i from\"../../geometry/Extent.js\";function a(t,n,a,o=new i){let s;if(\"2d\"===a.type)s=n*a.resolution;else if(\"3d\"===a.type){const i=a.overlayPixelSizeInMapUnits(t),o=a.basemapSpatialReference;s=e(o)&&!o.equals(a.spatialReference)?r(o)/r(a.spatialReference):n*i}const m=t.x-s,p=t.y-s,c=t.x+s,l=t.y+s,{spatialReference:f}=a;return o.xmin=Math.min(m,c),o.ymin=Math.min(p,l),o.xmax=Math.max(m,c),o.ymax=Math.max(p,l),o.spatialReference=f,o}function o(e,r,i){const o=i.toMap(e);if(t(o))return!1;return a(o,n(),i,s).intersects(r)}const s=new i;export{a as createQueryGeometry,o as intersectsDrapedGeometry};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport{_ as r}from\"../../chunks/tslib.es6.js\";import e from\"../../core/Logger.js\";import{isAbortError as s}from\"../../core/promiseUtils.js\";import{on as o}from\"../../core/watchUtils.js\";import{property as t}from\"../../core/accessorSupport/decorators/property.js\";import\"../../core/arrayUtils.js\";import\"../../core/has.js\";import\"../../core/accessorSupport/ensureType.js\";import{subclass as a}from\"../../core/accessorSupport/decorators/subclass.js\";const i=i=>{let c=class extends i{initialize(){this.handles.add(o(this,\"layer\",\"refresh\",(r=>{this.doRefresh(r.dataChanged).catch((r=>{s(r)||e.getLogger(this.declaredClass).error(r)}))})),\"RefreshableLayerView\")}};return r([t()],c.prototype,\"layer\",void 0),c=r([a(\"esri.layers.mixins.RefreshableLayerView\")],c),c};export{i as RefreshableLayerView,i as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport{isSome as e}from\"../../../core/maybe.js\";import{getFeatureEditFields as p,fixFields as l}from\"../../../layers/support/fieldUtils.js\";async function t(t,d=t.popupTemplate){if(!e(d))return[];const i=await d.getRequiredFields(t.fieldsIndex),{lastEditInfoEnabled:n}=d,{objectIdField:s,typeIdField:a,globalIdField:o,relationships:u}=t;if(i.includes(\"*\"))return[\"*\"];const f=n?await p(t):[],r=l(t.fieldsIndex,[...i,...f]);return a&&r.push(a),r&&s&&t.fieldsIndex.has(s)&&-1===r.indexOf(s)&&r.push(s),r&&o&&t.fieldsIndex.has(o)&&-1===r.indexOf(o)&&r.push(o),u&&u.forEach((e=>{const{keyField:p}=e;r&&p&&t.fieldsIndex.has(p)&&-1===r.indexOf(p)&&r.push(p)})),r}function d(p,l){return p.popupTemplate?p.popupTemplate:e(l)&&l.defaultPopupTemplateEnabled&&e(p.defaultPopupTemplate)?p.defaultPopupTemplate:null}export{d as getFetchPopupTemplate,t as getRequiredFields};\n"],"sourceRoot":""}