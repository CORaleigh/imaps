/*! For license information please see 92.f9d8ba6e.chunk.js.LICENSE.txt */
(this.webpackJsonpimaps=this.webpackJsonpimaps||[]).push([[92,50,278,283],{104:function(e,t,r){"use strict";function n(){return[0,0,0]}function i(e){return[e[0],e[1],e[2]]}function a(e,t,r){return[e,t,r]}function o(e){for(var t=[0,0,0],r=Math.min(3,e.length),n=0;n<r;++n)t[n]=e[n];return t}function s(e,t){return new Float64Array(e,t,3)}function l(){return[0,0,0]}function c(){return a(1,1,1)}function u(){return a(1,0,0)}function d(){return a(0,1,0)}function p(){return a(0,0,1)}r.d(t,"a",(function(){return b})),r.d(t,"b",(function(){return h})),r.d(t,"c",(function(){return s})),r.d(t,"d",(function(){return i})),r.d(t,"e",(function(){return n})),r.d(t,"f",(function(){return o})),r.d(t,"g",(function(){return a}));var h=[0,0,0],b=c(),m=u(),f=d(),v=p();Object.freeze({__proto__:null,create:n,clone:i,fromValues:a,fromArray:o,createView:s,zeros:l,ones:c,unitX:u,unitY:d,unitZ:p,ZEROS:h,ONES:b,UNIT_X:m,UNIT_Y:f,UNIT_Z:v})},1052:function(e,t,r){"use strict";var n=r(7),i=r(91),a=r(82),o=(r(80),r(89)),s=r(81),l=r(88),c=r(85),u=r(98),d=r(84),p=r(96),h=r(93),b=r(83),m=(r(86),r(87),r(209)),f=r(94),v=r(253),g=r(99),y=r(161),O=r(107),j=r(160),w=r(227),k=r(185),_=r(252),S=r(436),I=r(314),x=r(542),T=r(610),E=r(864),A=r(559),M=r(186),C=r(108),N=r(676),P=r(242),D=r(657),B=r(90),F=class extends B.a{constructor(e){super(e),this.layerId=null,this.facilityIdField=null,this.siteIdField=null,this.nameField=null}};Object(a.a)([Object(c.b)({type:String,json:{write:!0,origins:{"web-scene":{write:!1}}}})],F.prototype,"layerId",void 0),Object(a.a)([Object(c.b)({type:String,json:{write:!0,origins:{"web-scene":{write:!1}}}})],F.prototype,"facilityIdField",void 0),Object(a.a)([Object(c.b)({type:String,json:{write:!0,origins:{"web-scene":{write:!1}}}})],F.prototype,"siteIdField",void 0),Object(a.a)([Object(c.b)({type:String,json:{write:!0,origins:{"web-scene":{write:!1}}}})],F.prototype,"nameField",void 0);var L=F=Object(a.a)([Object(d.a)("esri.layers.support.FacilityLayerInfo")],F),R=class extends B.a{constructor(e){super(e),this.layerId=null,this.levelIdField=null,this.facilityIdField=null,this.longNameField=null,this.shortNameField=null,this.levelNumberField=null,this.verticalOrderField=null}};Object(a.a)([Object(c.b)({type:String,json:{write:!0,origins:{"web-scene":{write:!1}}}})],R.prototype,"layerId",void 0),Object(a.a)([Object(c.b)({type:String,json:{write:!0,origins:{"web-scene":{write:!1}}}})],R.prototype,"levelIdField",void 0),Object(a.a)([Object(c.b)({type:String,json:{write:!0,origins:{"web-scene":{write:!1}}}})],R.prototype,"facilityIdField",void 0),Object(a.a)([Object(c.b)({type:String,json:{write:!0,origins:{"web-scene":{write:!1}}}})],R.prototype,"longNameField",void 0),Object(a.a)([Object(c.b)({type:String,json:{write:!0,origins:{"web-scene":{write:!1}}}})],R.prototype,"shortNameField",void 0),Object(a.a)([Object(c.b)({type:String,json:{write:!0,origins:{"web-scene":{write:!1}}}})],R.prototype,"levelNumberField",void 0),Object(a.a)([Object(c.b)({type:String,json:{write:!0,origins:{"web-scene":{write:!1}}}})],R.prototype,"verticalOrderField",void 0);var U=R=Object(a.a)([Object(d.a)("esri.layers.support.LevelLayerInfo")],R),q=class extends B.a{constructor(e){super(e),this.layerId=null,this.siteIdField=null,this.nameField=null}};Object(a.a)([Object(c.b)({type:String,json:{write:!0,origins:{"web-scene":{write:!1}}}})],q.prototype,"layerId",void 0),Object(a.a)([Object(c.b)({type:String,json:{write:!0,origins:{"web-scene":{write:!1}}}})],q.prototype,"siteIdField",void 0),Object(a.a)([Object(c.b)({type:String,json:{write:!0,origins:{"web-scene":{write:!1}}}})],q.prototype,"nameField",void 0);var V=q=Object(a.a)([Object(d.a)("esri.layers.support.SiteLayerInfo")],q),W=class extends B.a{constructor(e){super(e),this.levelLayer=null,this.facilityLayer=null,this.siteLayer=null}};Object(a.a)([Object(c.b)({type:U,json:{write:!0,origins:{"web-scene":{write:!1}}}})],W.prototype,"levelLayer",void 0),Object(a.a)([Object(c.b)({type:L,json:{write:!0,origins:{"web-scene":{write:!1}}}})],W.prototype,"facilityLayer",void 0),Object(a.a)([Object(c.b)({type:V,json:{write:!0,origins:{"web-scene":{write:!1}}}})],W.prototype,"siteLayer",void 0);var G,J=W=Object(a.a)([Object(d.a)("esri.support.MapFloorInfo")],W),z=r(545),Y=r(92),H=G=class extends B.a{constructor(e){super(e),this.activeRange=null,this.currentRangeExtent=null,this.fullRangeExtent=null}clone(){return new G(Object(Y.a)({activeRange:this.activeRange,currentRangeExtent:this.currentRangeExtent,fullRangeExtent:this.fullRangeExtent}))}};Object(a.a)([Object(c.b)({type:String,nonNullable:!0,json:{read:{source:"activeRangeName"},write:{target:"activeRangeName",isRequired:!0}}})],H.prototype,"activeRange",void 0),Object(a.a)([Object(c.b)({type:[Number],json:{write:!0}})],H.prototype,"currentRangeExtent",void 0),Object(a.a)([Object(c.b)({type:[Number],json:{write:!0}})],H.prototype,"fullRangeExtent",void 0);var X,K=H=G=Object(a.a)([Object(d.a)("esri.webdoc.RangeInfo")],H),$=X=class extends B.a{constructor(e){super(e),this.enabled=!1,this.longNames=!1,this.minimized=!1,this.pinnedLevels=!1,this.site=null,this.facility=null,this.level=null}clone(){return new X(Object(Y.a)({enabled:this.enabled,longNames:this.longNames,minimized:this.minimized,pinnedLevels:this.pinnedLevels,site:this.site,facility:this.facility,level:this.level}))}};Object(a.a)([Object(c.b)({type:Boolean,json:{read:{source:"enabled"},write:{target:"enabled"}}})],$.prototype,"enabled",void 0),Object(a.a)([Object(c.b)({type:Boolean,json:{read:{source:"longNames"},write:{target:"longNames"}}})],$.prototype,"longNames",void 0),Object(a.a)([Object(c.b)({type:Boolean,json:{read:{source:"minimized"},write:{target:"minimized"}}})],$.prototype,"minimized",void 0),Object(a.a)([Object(c.b)({type:Boolean,json:{read:{source:"pinnedLevels"},write:{target:"pinnedLevels"}}})],$.prototype,"pinnedLevels",void 0),Object(a.a)([Object(c.b)({type:String,json:{read:{source:"site"},write:{target:"site"}}})],$.prototype,"site",void 0),Object(a.a)([Object(c.b)({type:String,json:{read:{source:"facility"},write:{target:"facility"}}})],$.prototype,"facility",void 0),Object(a.a)([Object(c.b)({type:String,json:{read:{source:"level"},write:{target:"level"}}})],$.prototype,"level",void 0);var Z,Q=$=X=Object(a.a)([Object(d.a)("esri.webdoc.widgets.FloorFilter")],$),ee=new(r(95).a)({slider:"slider",picker:"picker"}),te=Z=class extends B.a{constructor(e){super(e),this.interactionMode=null,this.numStops=null,this.stopInterval=null}clone(){return new Z({interactionMode:this.interactionMode,numStops:this.numStops,stopInterval:this.stopInterval})}};Object(a.a)([Object(c.b)({type:ee.apiValues,nonNullable:!0,json:{type:ee.jsonValues,default:null,read:{reader:ee.read},write:{isRequired:!0,writer:ee.write}}})],te.prototype,"interactionMode",void 0),Object(a.a)([Object(c.b)({type:Number,json:{read:{source:"numberOfStops"},write:{target:"numberOfStops",overridePolicy(){var e=null!=this.stopInterval;return{enabled:!e,isRequired:!e}}}}})],te.prototype,"numStops",void 0),Object(a.a)([Object(c.b)({type:Number,json:{write:{overridePolicy(){return{isRequired:null==this.numStops}}}}})],te.prototype,"stopInterval",void 0);var re,ne=te=Z=Object(a.a)([Object(d.a)("esri.webdoc.widgets.Range")],te),ie=r(124),ae=r(150),oe=r(222),se=re=class extends B.a{constructor(e){super(e),this.currentTimeExtent=null,this.fullTimeExtent=null,this.loop=!1,this.numStops=null,this.numThumbs=null,this.stopDelay=null,this.stopInterval=null,this.stops=null}readCurrentTimeExtent(e){if(e){var t=null!=e[0]?new Date(e[0]):null,r=null!=e[1]?new Date(e[1]):null;return new ae.a({start:t,end:r})}}writeCurrentTimeExtent(e,t,r){e&&Object(ie.c)(r,[e.start?e.start.getTime():null,e.end?e.end.getTime():null],t)}readFullTimeExtent(e,t){var r=t.properties;if(r){var n=null!=r.endTime?new Date(r.endTime):null,i=null!=r.startTime?new Date(r.startTime):null;return new ae.a({start:i,end:n})}}writeFullTimeExtent(e,t){if(e){var r=t.properties=t.properties||{},n=e.end,i=e.start;n&&(r.endTime=n?n.getTime():null),i&&(r.startTime=i?i.getTime():null)}}readStopInterval(e,t,r){return e?oe.a.fromJSON({value:e.interval,unit:e.units},r):null}writeStopInterval(e,t,r,n){if(e){var i=e.toJSON(n);Object(ie.c)(r,{interval:i.value,units:i.unit},t)}}readStops(e){return e&&e.length?e.map((e=>new Date(e))):null}writeStops(e,t,r){e&&e.length&&Object(ie.c)(r,e.map((e=>e.getTime())),t)}clone(){return new re(Object(Y.a)({currentTimeExtent:this.currentTimeExtent,fullTimeExtent:this.fullTimeExtent,loop:this.loop,numStops:this.numStops,numThumbs:this.numThumbs,stopDelay:this.stopDelay,stopInterval:this.stopInterval,stops:this.stops}))}};Object(a.a)([Object(c.b)({type:ae.a,json:{read:{source:"properties.currentTimeExtent"},write:{target:"properties.currentTimeExtent"}}})],se.prototype,"currentTimeExtent",void 0),Object(a.a)([Object(u.a)("currentTimeExtent")],se.prototype,"readCurrentTimeExtent",null),Object(a.a)([Object(p.a)("currentTimeExtent")],se.prototype,"writeCurrentTimeExtent",null),Object(a.a)([Object(c.b)({type:ae.a,json:{read:{source:["properties.endTime","properties.startTime"]},write:{target:{"properties.endTime":{type:Number},"properties.startTime":{type:Number}}}}})],se.prototype,"fullTimeExtent",void 0),Object(a.a)([Object(u.a)("fullTimeExtent")],se.prototype,"readFullTimeExtent",null),Object(a.a)([Object(p.a)("fullTimeExtent")],se.prototype,"writeFullTimeExtent",null),Object(a.a)([Object(c.b)({type:Boolean,nonNullable:!0,json:{default:!1,read:{source:"properties.loop"},write:{target:"properties.loop"}}})],se.prototype,"loop",void 0),Object(a.a)([Object(c.b)({type:Number,json:{read:{source:"properties.numberOfStops"},write:{target:"properties.numberOfStops",overridePolicy(){var e,t=!!this.stopInterval,r=!(null==(e=this.stops)||!e.length),n=!(t||r);return{enabled:n,isRequired:n}}}}})],se.prototype,"numStops",void 0),Object(a.a)([Object(c.b)({type:[1,2],nonNullable:!0,json:{read:{source:"properties.thumbCount"},write:{target:"properties.thumbCount",isRequired:!0}}})],se.prototype,"numThumbs",void 0),Object(a.a)([Object(c.b)({type:Number,nonNullable:!0,json:{read:{source:"properties.thumbMovingRate"},write:{target:"properties.thumbMovingRate",isRequired:!0}}})],se.prototype,"stopDelay",void 0),Object(a.a)([Object(c.b)({type:oe.a,json:{read:{source:"properties.timeStopInterval"},write:{target:"properties.timeStopInterval",overridePolicy(){var e,t=null!=this.numStops,r=!(null==(e=this.stops)||!e.length);return{enabled:!r,isRequired:!(t||r)}}}}})],se.prototype,"stopInterval",void 0),Object(a.a)([Object(u.a)("stopInterval")],se.prototype,"readStopInterval",null),Object(a.a)([Object(p.a)("stopInterval")],se.prototype,"writeStopInterval",null),Object(a.a)([Object(c.b)({type:[Date],json:{read:{source:"properties.stops"},write:{target:"properties.stops",overridePolicy(){return{isRequired:null==this.numStops&&!this.stopInterval}}}}})],se.prototype,"stops",void 0),Object(a.a)([Object(u.a)("stops")],se.prototype,"readStops",null),Object(a.a)([Object(p.a)("stops")],se.prototype,"writeStops",null);var le,ce=se=re=Object(a.a)([Object(d.a)("esri.webdoc.widgets.TimeSlider")],se),ue=le=class extends B.a{constructor(e){super(e),this.range=null,this.timeSlider=null,this.floorFilter=null}clone(){return new le(Object(Y.a)({range:this.range,timeSlider:this.timeSlider,floorFilter:this.floorFilter}))}};Object(a.a)([Object(c.b)({type:ne,json:{write:!0}})],ue.prototype,"range",void 0),Object(a.a)([Object(c.b)({type:ce,json:{write:!0}})],ue.prototype,"timeSlider",void 0),Object(a.a)([Object(c.b)({type:Q,json:{write:!0}})],ue.prototype,"floorFilter",void 0);var de=ue=le=Object(a.a)([Object(d.a)("esri.webdoc.Widgets")],ue),pe={width:600,height:400},he=1.5;function be(e){return{enabled:!(null==e||!e.length)}}var me,fe=r(102),ve=r(237),ge=me=class extends B.a{constructor(e){super(e),this.exactMatch=!1,this.name=null,this.type=null}clone(){return new me({exactMatch:this.exactMatch,type:this.type,name:this.name})}};Object(a.a)([Object(c.b)({type:Boolean,json:{write:!0}})],ge.prototype,"exactMatch",void 0),Object(a.a)([Object(c.b)({type:String,json:{write:!0}})],ge.prototype,"name",void 0),Object(a.a)([Object(fe.a)(ve.a)],ge.prototype,"type",void 0);var ye,Oe=ge=me=Object(a.a)([Object(d.a)("esri.webdoc.applicationProperties.SearchLayerField")],ge),je=ye=class extends B.a{constructor(e){super(e),this.field=null,this.id=null,this.subLayer=null}clone(){return new ye(Object(Y.a)({field:this.field,id:this.id,subLayer:this.subLayer}))}};Object(a.a)([Object(c.b)({type:Oe,json:{write:{isRequired:!0}}})],je.prototype,"field",void 0),Object(a.a)([Object(c.b)({type:String,json:{write:{isRequired:!0}}})],je.prototype,"id",void 0),Object(a.a)([Object(c.b)({type:l.a,json:{write:!0}})],je.prototype,"subLayer",void 0);var we,ke=je=ye=Object(a.a)([Object(d.a)("esri.webdoc.applicationProperties.SearchLayer")],je),_e=we=class extends B.a{constructor(e){super(e),this.exactMatch=!1,this.name=null,this.type=null}clone(){return new we({exactMatch:this.exactMatch,type:this.type,name:this.name})}};Object(a.a)([Object(c.b)({type:Boolean,json:{write:!0}})],_e.prototype,"exactMatch",void 0),Object(a.a)([Object(c.b)({type:String,json:{write:!0}})],_e.prototype,"name",void 0),Object(a.a)([Object(fe.a)(ve.a)],_e.prototype,"type",void 0);var Se,Ie=_e=we=Object(a.a)([Object(d.a)("esri.webdoc.applicationProperties.SearchTableField")],_e),xe=Se=class extends B.a{constructor(e){super(e),this.field=null,this.id=null}clone(){return new Se(Object(Y.a)({field:this.field,id:this.id}))}};Object(a.a)([Object(c.b)({type:Ie,json:{write:{isRequired:!0}}})],xe.prototype,"field",void 0),Object(a.a)([Object(c.b)({type:String,json:{write:{isRequired:!0}}})],xe.prototype,"id",void 0);var Te,Ee=xe=Se=Object(a.a)([Object(d.a)("esri.webdoc.applicationProperties.SearchTable")],xe),Ae=O.a.ofType(ke),Me=O.a.ofType(Ee),Ce=Te=class extends B.a{constructor(e){super(e),this.addressSearchEnabled=!0,this.enabled=!0,this.hintText=null,this.layers=new Ae,this.tables=new Me}readAddressSearchEnabled(e){return!e}writeAddressSearchEnabled(e,t,r){t[r]=!e}clone(){return new Te(Object(Y.a)({addressSearchEnabled:this.addressSearchEnabled,enabled:this.enabled,hintText:this.hintText,layers:this.layers,tables:this.tables}))}};Object(a.a)([Object(c.b)({type:Boolean,nonNullable:!0,json:{read:{source:"disablePlaceFinder"},write:{target:"disablePlaceFinder",isRequired:!0},origins:{"web-scene":{read:!1,write:!1}}}})],Ce.prototype,"addressSearchEnabled",void 0),Object(a.a)([Object(u.a)("addressSearchEnabled")],Ce.prototype,"readAddressSearchEnabled",null),Object(a.a)([Object(p.a)("addressSearchEnabled")],Ce.prototype,"writeAddressSearchEnabled",null),Object(a.a)([Object(c.b)({type:Boolean,nonNullable:!0,json:{write:!0,origins:{"web-map":{write:{isRequired:!0}},"web-scene":{default:!0,write:!0}}}})],Ce.prototype,"enabled",void 0),Object(a.a)([Object(c.b)({type:String,json:{write:!0}})],Ce.prototype,"hintText",void 0),Object(a.a)([Object(c.b)({type:Ae,json:{write:{overridePolicy:be},origins:{"web-scene":{write:{isRequired:!0}}}}})],Ce.prototype,"layers",void 0),Object(a.a)([Object(c.b)({type:Me,json:{read:!0,write:{overridePolicy:be},origins:{"web-scene":{read:!1,write:!1}}}})],Ce.prototype,"tables",void 0);var Ne,Pe=Ce=Te=Object(a.a)([Object(d.a)("esri.webdoc.applicationProperties.Search")],Ce),De=Ne=class extends B.a{constructor(e){super(e),this.search=null}clone(){return new Ne(Object(Y.a)({search:this.search}))}};Object(a.a)([Object(c.b)({type:Pe,json:{write:!0}})],De.prototype,"search",void 0);var Be,Fe=De=Ne=Object(a.a)([Object(d.a)("esri.webdoc.applicationProperties.Viewing")],De),Le=Be=class extends B.a{constructor(e){super(e),this.editing=null,this.offline=null,this.viewing=null}clone(){return new Be(Object(Y.a)({editing:this.editing,offline:this.offline,viewing:this.viewing}))}};Object(a.a)([Object(c.b)({json:{write:!0}})],Le.prototype,"editing",void 0),Object(a.a)([Object(c.b)({json:{write:!0}})],Le.prototype,"offline",void 0),Object(a.a)([Object(c.b)({type:Fe,json:{write:!0}})],Le.prototype,"viewing",void 0);var Re,Ue=Le=Be=Object(a.a)([Object(d.a)("esri.webmap.ApplicationProperties")],Le),qe=r(881),Ve=r(770),We=r(97),Ge=Re=class extends We.a{constructor(e){super(e),this.background=null,this.rangeInfo=null,this.spatialReference=null,this.viewpoint=null}clone(){return new Re(Object(Y.a)({background:this.background,rangeInfo:this.rangeInfo,spatialReference:this.spatialReference,viewpoint:this.viewpoint}))}};Object(a.a)([Object(c.b)({type:Ve.a})],Ge.prototype,"background",void 0),Object(a.a)([Object(c.b)({type:K})],Ge.prototype,"rangeInfo",void 0),Object(a.a)([Object(c.b)({type:g.a})],Ge.prototype,"spatialReference",void 0),Object(a.a)([Object(c.b)({type:A.a})],Ge.prototype,"viewpoint",void 0);var Je=Ge=Re=Object(a.a)([Object(d.a)("esri.webmap.InitialViewProperties")],Ge),ze=r(595);class Ye extends ze.a{constructor(e,t){super(e,t,"webmap")}}var He=new Ye(2,20),Xe="Web Map",Ke=O.a.ofType(qe.a),$e=s.a.getLogger("esri.WebMap"),Ze=new Map;Ze.set("image/jpeg","jpeg"),Ze.set("image/jpg","jpg"),Ze.set("image/png","png"),Ze.set("image/gif","gif");var Qe="ArcGIS API for JavaScript",et="CollectorDisabled",tt="Collector",rt="Data Editing",nt="OfflineDisabled",it="Offline",at="Workforce Project",ot="Workforce Worker",st="Workforce Dispatcher",lt="DeveloperBasemap",ct=["NatGeo_World_Map","Ocean_Basemap","USA_Topo_Maps","World_Imagery","World_Street_Map","World_Terrain_Base","World_Topo_Map","World_Hillshade","Canvas/World_Light_Gray_Base","Canvas/World_Light_Gray_Reference","Canvas/World_Dark_Gray_Base","Canvas/World_Dark_Gray_Reference","Ocean/World_Ocean_Base","Ocean/World_Ocean_Reference","Reference/World_Boundaries_and_Places","Reference/World_Reference_Overlay","Reference/World_Transportation"].map((e=>e.toLowerCase())),ut=class extends(Object(M.a)(k.a.LoadableMixin(Object(w.b)(E.a)))){constructor(e){super(e),this.applicationProperties=null,this.bookmarks=new Ke,this.floorInfo=null,this.initialViewProperties=new Je,this.portalItem=null,this.presentation=null,this.sourceVersion=null,this.widgets=null,this.authoringApp=this.authoringAppVersion=null,this._isAuthoringAppSetByUser=this._isAuthoringAppVersionSetByUser=!1}destroy(){var e=this.portalItem;this.portalItem=null,null==e||e.destroy()}initialize(){if(this.when().catch((e=>{$e.error("#load()","Failed to load web map",e)})),this.resourceInfo){var e;try{e=this._validateJSON(this.resourceInfo)}catch(t){return void this.addResolvingPromise(Promise.reject(t))}this.read(e)}}set authoringApp(e){this._isAuthoringAppSetByUser=!0,this._set("authoringApp",e)}writeAuthoringApp(e,t){e&&this._isAuthoringAppSetByUser?t.authoringApp=e:t.authoringApp=Qe}set authoringAppVersion(e){this._isAuthoringAppVersionSetByUser=!0,this._set("authoringAppVersion",e)}writeAuthoringAppVersion(e,t){e&&this._isAuthoringAppVersionSetByUser?t.authoringAppVersion=e:t.authoringAppVersion=j.d}readInitialViewProperties(e,t){var r,n=new Je;t.background&&(n.background=Ve.a.fromJSON(t.background));var i=null==(r=t.initialState)?void 0:r.viewpoint;return i&&(i.rotation&&Ye.parse(t.version||"","webmap").lessThan(2,20)&&"ArcGIS Pro"===t.authoringApp&&(i.rotation*=-1),n.viewpoint=A.a.fromJSON(i)),t.mapRangeInfo&&(n.rangeInfo=K.fromJSON(t.mapRangeInfo)),t.spatialReference&&(n.spatialReference=g.a.fromJSON(t.spatialReference)),n}writeInitialViewProperties(e,t,r,n){if(e){var i=e.background;i&&i.color&&(t.background=i.write(null,n)),e.viewpoint&&(t.initialState={viewpoint:e.viewpoint.write(null,n)}),e.rangeInfo&&(t.mapRangeInfo=e.rangeInfo.toJSON(n)),e.spatialReference&&(t.spatialReference=e.spatialReference.write(null,n))}}writeLayers(e,t,r,n){t[r]=this._writeLayers(e,n,"operational-layers")}readSourceVersion(e,t){var[r,n]=t.version.split(".");return new Ye(parseInt(r,10),parseInt(n,10))}writeSourceVersion(e,t,r){t[r]="".concat(He.major,".").concat(He.minor)}writeTables(e,t,r,n){var i=this._writeLayers(e,n,"tables");i.length&&(t[r]=i)}get thumbnailUrl(){return this.portalItem&&this.portalItem.thumbnailUrl||null}set thumbnailUrl(e){e?(this._override("thumbnailUrl",e),this._thumbnailFilename=this._generateCustomThumbnailFilename(e)):this._clearThumbnailOverride()}load(e){return this.addResolvingPromise(this._loadFromSource()),Promise.resolve(this)}loadAll(){return Object(S.a)(this,(e=>{e(this.ground,this.basemap,this.layers,this.tables)}))}read(e,t){t=Object(i.a)(Object(i.a)({},t),{},{origin:"web-map"});var r=this._getAuthoringPropsState();Object(v.b)(this,e,(t=>super.read(e,t)),t),this._restoreAuthoringPropsFromState(r)}write(e,t){if("loaded"!==this.loadStatus){var r=new h.a("webmap:not-loaded","Web map must be loaded before it can be serialized");throw $e.error("#toJSON()","Web map must be loaded before it can be serialized",this.loadError||this.loadStatus),r}return this._removeDanglingLayerRefs(),t=Object(i.a)(Object(i.a)({},t),{},{origin:"web-map",restrictedWebMapWriting:!0,webmap:this}),super.write(e,t)}save(e){var t=this;return Object(n.a)((function*(){e=e||{},t._validateItem(),yield t._updateFromPromise,yield t.load(),yield t._loadLayerContainers(),yield t._beforeSave(),t._validateMap();var r=t.portalItem,n={origin:"web-map",messages:[],writtenProperties:[],url:r.itemUrl&&Object(b.J)(r.itemUrl),portal:r.portal||_.a.getDefault()},i=t.write(null,n);return t._validateJSONForWriting(n,e),yield t._updateItemProperties(r),yield t._updateItem(r,i,n),yield t._updateItemThumbnail(),r}))()}saveAs(e,t){var r=this;return Object(n.a)((function*(){t=t||{};var n=r._getPortalItem(e);yield r._updateFromPromise,yield r.load(),yield r._loadLayerContainers(),yield r._beforeSave(),r._validateMap();var i={origin:"web-map",messages:[],writtenProperties:[],url:null,portal:n.portal},a=r.write(null,i);r._validateJSONForWriting(i,t),yield r._updateItemPropertiesForSaveAs(n);var o=r._getThumbnailState();return yield r._createItem(n,a,i,t),r._restoreThumbnailFromState(o),yield r._updateItemThumbnail(),n}))()}updateFrom(e,t){var r=this;return Object(n.a)((function*(){var n=r._updateFromInternal(e,t);r._updateFromPromise=n,yield n,n===r._updateFromPromise&&(r._updateFromPromise=null)}))()}getLayerJSONFromResourceInfo(e){var t,r,n,i,a=this.resourceInfo;return this._collectAllLayersJSON(Object(m.d)([null==a||null==(t=a.baseMap)?void 0:t.baseMapLayers,null==a?void 0:a.operationalLayers,null==(r=this.basemap)||null==(n=r.resourceInfo)||null==(i=n.data)?void 0:i.baseMapLayers])).find((t=>t.id===e.id))}_collectAllLayersJSON(e){return e.reduce(((e,t)=>(e.push(t),"GroupLayer"===t.layerType&&(e=e.concat(this._collectAllLayersJSON(t.layers||[]))),e)),[])}_writeLayers(e,t,r){return t=Object(i.a)(Object(i.a)({},t),{},{layerContainerType:r}),e.map((e=>Object(o.q)(Object(x.a)(e,"tables"===r?null:this.getLayerJSONFromResourceInfo(e),t)))).filter(Boolean).toArray()}_loadFromSource(){return this.resourceInfo?this._loadFromJSON(this.resourceInfo,{origin:"web-map"}):this.portalItem&&this.portalItem.id?this._loadFromItem(this.portalItem):Promise.resolve(null)}_loadFromItem(e){return e.load().catch((e=>{throw new h.a("webmap:load-portal-item","Failed to load portal item",{error:e})})).then((()=>{if("Web Map"!==e.type)throw new h.a("webmap:invalid-portal-item","Invalid portal item type '${type}', expected 'Web Map'",{type:e.type})})).then((()=>e.fetchData())).then((t=>(this.resourceInfo=t,this._readAndLoadFromJSON(t,{origin:"web-map",portal:e.portal||_.a.getDefault()})))).then((()=>this._computeInitialViewpoint()))}_readAndLoadFromJSON(e,t){var r=this._validateJSON(e);return this.read(r,t),this._loadFromJSON(r,t)}_validateJSON(e){var t=Ye.parse(e.version||"","webmap");return He.validate(t),e.version="".concat(t.major,".").concat(t.minor),e}_loadFromJSON(e,t){var n={context:Object(i.a)(Object(i.a)({},t),{},{layerContainerType:"operational-layers"})};return this.portalItem&&(n.context.portal=this.portalItem.portal||_.a.getDefault()),r.e(45).then(r.bind(null,800)).then((({populateOperationalLayers:t})=>{var r=[],a=e.operationalLayers;a&&a.length&&r.push(t(this.layers,a,n));var o=Object(i.a)(Object(i.a)({},n),{},{context:Object(i.a)(Object(i.a)({},n.context),{},{layerContainerType:"tables"}),defaultLayerType:"ArcGISFeatureLayer"}),s=e.tables;return s&&s.length&&r.push(t(this.tables,s,o)),Object(f.j)(r).then((()=>{}))}))}_computeInitialViewpoint(){var e=this;return Object(n.a)((function*(){var t,r,n=e.initialViewProperties;if(!(null==(t=n)||null==(r=t.viewpoint)?void 0:r.targetGeometry)){var i=yield e._getExtentFromItem();i&&((n=n?n.clone():new Je).viewpoint=new A.a,n.viewpoint.targetGeometry=i,e.initialViewProperties=n)}}))()}_getExtentFromItem(){var e=this;return Object(n.a)((function*(){var t,n,i=null==(t=e.initialViewProperties)?void 0:t.spatialReference,a=null==(n=e.portalItem)?void 0:n.extent;return i&&a?i.isWGS84?a.clone():i.isWebMercator?Object(y.b)(a):(yield r.e(29).then(r.bind(null,1080))).create(e.portalItem).then((e=>{var t=new z.a;return t.geometries=[a],t.outSpatialReference=i,e.project(t)})).then((e=>e[0])).catch((e=>($e.error("Error projecting item's extent:",e),null))):null}))()}_removeDanglingLayerRefs(){var e=this.applicationProperties,t=e&&e.viewing&&e.viewing.search,r=e=>!!this.allLayers.find((t=>t.id===e));t&&t.layers&&(t.layers=t.layers.filter((e=>r(e.id)))),t&&t.tables&&(t.tables=t.tables.filter((e=>!!this.tables.find((t=>t.id===e.id)))));var n=e&&e.editing&&e.editing.locationTracking;n&&n.info&&!r(n.info.layerId)&&(e.editing=null);var i=this.presentation&&this.presentation.slides;i&&i.forEach((e=>{e.visibleLayers&&(e.visibleLayers=e.visibleLayers.filter((e=>r(e.id))))}))}_validateMap(){if(!this.basemap||!this.basemap.baseLayers.length)throw new h.a("webmap:save","Map does not have a valid basemap with a base layer.")}_validateItem(){if(!this.portalItem)throw $e.error("save: requires the portalItem property to be set"),new h.a("webmap:portal-item-not-set","Portal item to save to has not been set on the WebMap");this._validateItemType(this.portalItem)}_validateItemType(e){if(e.type!==Xe)throw new h.a("webmap:portal-item-wrong-type",'Portal item needs to have type "'.concat(Xe,'"'))}_loadLayerContainers(){var e=[];return this.basemap&&e.push(this.basemap.load()),this.ground&&e.push(this.ground.load()),Object(f.j)(e).then((()=>{}))}_beforeSave(){var e=this;return Object(n.a)((function*(){var t=[];for(var r of e.allLayers)if("beforeSave"in r&&"function"==typeof r.beforeSave){var n=r.beforeSave();n&&t.push(n)}yield Object(f.j)(t)}))()}_loadAllLayers(){var e=this._getAllLayersAndTables().map((e=>e.load()));return Object(f.j)(e).then((()=>{}))}_getAllLayersAndTables(){return this.allLayers.concat(this.allTables)}_validateJSONForWriting(e,t){var r=e.messages.filter((e=>"error"===e.type)).map((e=>new h.a(e.name,e.message,e.details)));if(t.ignoreUnsupported&&(r=r.filter((e=>"layer:unsupported"!==e.name&&"symbol:unsupported"!==e.name&&"symbol-layer:unsupported"!==e.name&&"property:unsupported"!==e.name&&"url:unsupported"!==e.name))),r.length>0)throw new h.a("webmap:save","Failed to save webmap due to unsupported or invalid content. See 'details.errors' for more detailed information",{errors:r})}_updateItemProperties(e){var t=this;return Object(n.a)((function*(){e.extent=yield t._getWGS84Extent(t.initialViewProperties.viewpoint.targetGeometry),yield t._updateTypeKeywords(e)}))()}_updateItemPropertiesForSaveAs(e){var t=this;return Object(n.a)((function*(){Object(D.c)(e,et),Object(D.c)(e,nt),Object(D.c)(e,at),Object(D.c)(e,ot),Object(D.c)(e,st),Object(D.c)(e,"Offline Map Areas"),Object(D.c)(e,"FieldMapsDisabled"),yield t._updateItemProperties(e)}))()}_getWGS84Extent(e){var t=this;return Object(n.a)((function*(){var r,n=e.clone().normalize();if(n.length>1)for(var i of n)r?i.width>r.width&&(r=i):r=i;else r=n[0];return t._projectToWGS84(r)}))()}_projectToWGS84(e){var t=this;return Object(n.a)((function*(){var n=e.spatialReference;if(n.isWGS84)return e.clone();if(n.isWebMercator)return Object(y.e)(e);var i=yield r.e(29).then(r.bind(null,1080)),a=yield i.create(t.portalItem),o=new z.a;return o.geometries=[e],o.outSpatialReference=g.a.WGS84,(yield a.project(o))[0]}))()}_updateTypeKeywords(e){var t=this;return Object(n.a)((function*(){Object(D.a)(e,Qe),yield t._loadAllLayers(),t._evalCollectorKeyword(e),t._evalDataEditingKeyword(e),t._evalOfflineKeyword(e),t._evalDeveloperBasemapKeyword(e),e.typeKeywords&&(e.typeKeywords=e.typeKeywords.filter(((e,t,r)=>r.indexOf(e)===t)))}))()}_evalCollectorKeyword(e){Object(D.b)(e,et)||Object(D.b)(e,at)||Object(D.b)(e,ot)||Object(D.b)(e,st)||!this._hasEditableFeatureLayer()?Object(D.c)(e,tt):Object(D.a)(e,tt)}_evalDataEditingKeyword(e){this._hasEditableFeatureLayer()?Object(D.a)(e,rt):Object(D.c)(e,rt)}_evalOfflineKeyword(e){!Object(D.b)(e,nt)&&this._isOfflineCapableMap()?Object(D.a)(e,it):Object(D.c)(e,it)}_evalDeveloperBasemapKeyword(e){Object(T.f)(this.basemap)?Object(D.a)(e,lt):Object(D.c)(e,lt)}_hasEditableFeatureLayer(){return this._getAllLayersAndTables().some((e=>e.loaded&&this._isFeatureServiceLayer(e)&&e.capabilities.operations.supportsEditing&&e.editingEnabled))}_isFeatureServiceLayer(e){return!("feature"!==e.type||!e.source||"feature-layer"!==e.source.type)}_isOfflineCapableMap(){return this._getAllLayersAndTables().filter((e=>"group"!==e.type)).every((e=>e.loaded&&this._isOfflineCapableLayer(e)))}_isOfflineCapableLayer(e){return this._isFeatureServiceLayer(e)&&e.capabilities.operations.supportsSync||("tile"===e.type||"vector-tile"===e.type)&&(e.capabilities.operations.supportsExportTiles||this._isExportableAGOLTileLayer(e)||Object(T.g)(e))&&e.spatialReference.equals(this.initialViewProperties.spatialReference)}_isExportableAGOLTileLayer(e){return"tile"===e.type&&Object(P.d)(e.url)&&ct.some((t=>e.url.toLowerCase().indexOf("/"+t+"/")>-1))}_updateItem(e,t,r){var i=this;return Object(n.a)((function*(){yield e.update({data:t}),i._syncUpInstanceWithItem(e,t,r)}))()}_createItem(e,t,r,i){var a=this;return Object(n.a)((function*(){var n=a.portalItem,o=!!(n&&n.id&&n.portal.user),s=e.portal;if(yield s._signIn(),!(yield a._canCopyItem(n,o,s)))throw new h.a("webmap:save-as-copy-not-allowed","Owner of this map does not allow others to save a copy");yield s.user.addItem({item:e,folder:i.folder,data:t}),a.portalItem=e,a._syncUpInstanceWithItem(e,t,r)}))()}_canCopyItem(e,t,r){return Object(n.a)((function*(){return!(Object(o.k)(e)&&e.id&&e.typeKeywords&&e.typeKeywords.indexOf("useOnly")>-1)||e.portal.portalHostname===r.portalHostname&&(t||(yield e.reload()),"admin"===e.itemControl||"update"===e.itemControl)}))()}_syncUpInstanceWithItem(e,t,r){M.b.prototype.read.call(this,{version:t.version,authoringApp:t.authoringApp,authoringAppVersion:t.authoringAppVersion},{origin:"web-map",ignoreDefaults:!0,url:e.itemUrl&&Object(b.J)(e.itemUrl)}),Object(N.a)(r),this.resourceInfo=t}_updateItemThumbnail(){var e=this;return Object(n.a)((function*(){e.thumbnailUrl&&e._isOverridden("thumbnailUrl")&&(yield e.portalItem.updateThumbnail({thumbnail:e.thumbnailUrl,filename:e._thumbnailFilename}),e._clearThumbnailOverride())}))()}_getPortalItem(e){var t=I.default.from(e);return t.id&&((t=t.clone()).id=null),t.type||(t.type=Xe),t.portal||(t.portal=_.a.getDefault()),this._validateItemType(t),t}_updateFromInternal(e,t){var r=this;return Object(n.a)((function*(){t=t||{},yield Object(C.l)(e,"ready"),r._updateInitialViewProperties(e,t),yield r._updateThumbnailUrl(e,t)}))()}_updateInitialViewProperties(e,t){var r;if(t.backgroundExcluded||(this.initialViewProperties.background=null==(r=e.background)?void 0:r.clone()),this.initialViewProperties.spatialReference=e.spatialReference.clone(),t.viewpointExcluded||(this.initialViewProperties.viewpoint=new A.a({rotation:e.rotation,scale:t.scalePreserved?e.scale:null,targetGeometry:this._getViewExtent(e)})),!t.widgetsExcluded)for(var n of e.persistableViewModels)n.updateWebDocument(this)}_getViewExtent(e){var t=e.center.clone().normalize(),r=e.extent.clone(),n=r.width/2;return r.xmin=t.x-n,r.xmax=t.x+n,r}_updateThumbnailUrl(e,t){var r=this;return Object(n.a)((function*(){if(!t.thumbnailExcluded){var n=function(e,t){t=t||pe;var{width:r,height:n}=t,i=r/n;return i<he?n=r/he:i>he&&(r=n*he),r>e.width&&(n*=e.width/r,r=e.width),n>e.height&&(r*=e.height/n,n=e.height),{width:Math.round(r),height:Math.round(n)}}(e,t.thumbnailSize),i=yield e.takeScreenshot({format:"png",width:n.width,height:n.height});r._setAutoGeneratedThumbnail(i.dataUrl)}}))()}_setAutoGeneratedThumbnail(e){this.thumbnailUrl=e,this._thumbnailFilename=null}_clearThumbnailOverride(){this._clearOverride("thumbnailUrl"),this.clear("thumbnailUrl","user"),this._thumbnailFilename=null}_generateCustomThumbnailFilename(e){if(Object(b.u)(e)){var t=Object(b.i)(e),r=t&&t.mediaType,n=r&&Ze.get(r.toLowerCase())||null,i="thumbnail".concat(Date.now());return n?"".concat(i,".").concat(n):i}return null}_getThumbnailState(){var e=this.thumbnailUrl;return e&&(e=this._isOverridden("thumbnailUrl")?e:Object(b.d)(e,"w","8192")),{thumbnailUrl:e,filename:this._thumbnailFilename}}_restoreThumbnailFromState(e){this.thumbnailUrl=e.thumbnailUrl,this._thumbnailFilename=e.filename}_getAuthoringPropsState(){return{authoringApp:this.authoringApp,authoringAppVersion:this.authoringAppVersion,isAuthoringAppSetByUser:this._isAuthoringAppSetByUser,isAuthoringAppVersionSetByUser:this._isAuthoringAppVersionSetByUser}}_restoreAuthoringPropsFromState(e){e.isAuthoringAppSetByUser?this.authoringApp=e.authoringApp:this._isAuthoringAppSetByUser=!1,e.isAuthoringAppVersionSetByUser?this.authoringAppVersion=e.authoringAppVersion:this._isAuthoringAppVersionSetByUser=!1}static fromJSON(e){var t=e;if(!t)throw new h.a("webmap:empty-resource","Expected a JSON resource but got nothing");return new this({resourceInfo:t})}};ut.VERSION=He,Object(a.a)([Object(c.b)({type:Ue,json:{write:!0}})],ut.prototype,"applicationProperties",void 0),Object(a.a)([Object(c.b)({type:String,json:{write:{allowNull:!0,ignoreOrigin:!0}}})],ut.prototype,"authoringApp",null),Object(a.a)([Object(p.a)("authoringApp")],ut.prototype,"writeAuthoringApp",null),Object(a.a)([Object(c.b)({type:String,json:{write:{allowNull:!0,ignoreOrigin:!0}}})],ut.prototype,"authoringAppVersion",null),Object(a.a)([Object(p.a)("authoringAppVersion")],ut.prototype,"writeAuthoringAppVersion",null),Object(a.a)([Object(c.b)({json:{read:{source:"baseMap"},write:{target:"baseMap"}}})],ut.prototype,"basemap",void 0),Object(a.a)([Object(c.b)({type:Ke,json:{write:{overridePolicy:e=>({enabled:!!(e&&e.length>0),ignoreOrigin:!0})}}})],ut.prototype,"bookmarks",void 0),Object(a.a)([Object(c.b)({type:J,json:{read:{source:"mapFloorInfo"},write:{target:"mapFloorInfo"}}})],ut.prototype,"floorInfo",void 0),Object(a.a)([Object(c.b)({type:Je,nonNullable:!0,json:{read:{source:["background","initialState.viewpoint","mapRangeInfo","spatialReference"]},write:{ignoreOrigin:!0,target:{background:{type:Ve.a},"initialState.viewpoint":{type:A.a},mapRangeInfo:{type:K},spatialReference:{type:g.a}}}}})],ut.prototype,"initialViewProperties",void 0),Object(a.a)([Object(u.a)("initialViewProperties")],ut.prototype,"readInitialViewProperties",null),Object(a.a)([Object(p.a)("initialViewProperties")],ut.prototype,"writeInitialViewProperties",null),Object(a.a)([Object(c.b)({json:{read:!1,write:{target:"operationalLayers",ignoreOrigin:!0}}})],ut.prototype,"layers",void 0),Object(a.a)([Object(p.a)("layers")],ut.prototype,"writeLayers",null),Object(a.a)([Object(c.b)({type:I.default})],ut.prototype,"portalItem",void 0),Object(a.a)([Object(c.b)({json:{write:!0}})],ut.prototype,"presentation",void 0),Object(a.a)([Object(c.b)()],ut.prototype,"resourceInfo",void 0),Object(a.a)([Object(c.b)({readOnly:!0,type:Ye,json:{read:{source:"version"},write:{allowNull:!0,ignoreOrigin:!0,target:"version",isRequired:!0}}})],ut.prototype,"sourceVersion",void 0),Object(a.a)([Object(u.a)("sourceVersion")],ut.prototype,"readSourceVersion",null),Object(a.a)([Object(p.a)("sourceVersion")],ut.prototype,"writeSourceVersion",null),Object(a.a)([Object(c.b)({json:{read:!1,write:{ignoreOrigin:!0}}})],ut.prototype,"tables",void 0),Object(a.a)([Object(p.a)("tables")],ut.prototype,"writeTables",null),Object(a.a)([Object(c.b)()],ut.prototype,"thumbnailUrl",null),Object(a.a)([Object(c.b)({type:de,json:{write:!0}})],ut.prototype,"widgets",void 0);var dt=ut=Object(a.a)([Object(d.a)("esri.WebMap")],ut);t.a=dt},111:function(e,t,r){"use strict";r.d(t,"a",(function(){return d})),r.d(t,"b",(function(){return h})),r.d(t,"c",(function(){return S})),r.d(t,"d",(function(){return p})),r.d(t,"e",(function(){return l})),r.d(t,"f",(function(){return O})),r.d(t,"g",(function(){return y})),r.d(t,"h",(function(){return j})),r.d(t,"i",(function(){return c})),r.d(t,"j",(function(){return o})),r.d(t,"k",(function(){return m})),r.d(t,"l",(function(){return w})),r.d(t,"m",(function(){return P})),r.d(t,"n",(function(){return b})),r.d(t,"o",(function(){return a})),r.d(t,"p",(function(){return T})),r.d(t,"q",(function(){return g})),r.d(t,"r",(function(){return f})),r.d(t,"s",(function(){return v})),r.d(t,"t",(function(){return _})),r.d(t,"u",(function(){return E})),r.d(t,"v",(function(){return s})),r.d(t,"w",(function(){return k})),r.d(t,"x",(function(){return D})),r.d(t,"y",(function(){return N})),r.d(t,"z",(function(){return C}));var n=r(104),i=r(184);function a(e){var t=e[0],r=e[1],n=e[2];return Math.sqrt(t*t+r*r+n*n)}function o(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}function s(e,t,r,n){return e[0]=t,e[1]=r,e[2]=n,e}function l(e,t,r){return e[0]=t[0]+r[0],e[1]=t[1]+r[1],e[2]=t[2]+r[2],e}function c(e,t,r){return e[0]=t[0]-r[0],e[1]=t[1]-r[1],e[2]=t[2]-r[2],e}function u(e,t,r){return e[0]=t[0]*r[0],e[1]=t[1]*r[1],e[2]=t[2]*r[2],e}function d(e,t,r){return e[0]=t[0]/r[0],e[1]=t[1]/r[1],e[2]=t[2]/r[2],e}function p(e,t,r){return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e}function h(e,t,r,n){return e[0]=t[0]+r[0]*n,e[1]=t[1]+r[1]*n,e[2]=t[2]+r[2]*n,e}function b(e,t){var r=t[0]-e[0],n=t[1]-e[1],i=t[2]-e[2];return Math.sqrt(r*r+n*n+i*i)}function m(e,t){var r=t[0]-e[0],n=t[1]-e[1],i=t[2]-e[2];return r*r+n*n+i*i}function f(e){var t=e[0],r=e[1],n=e[2];return t*t+r*r+n*n}function v(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e}function g(e,t){var r=t[0],n=t[1],i=t[2],a=r*r+n*n+i*i;return a>0&&(a=1/Math.sqrt(a),e[0]=t[0]*a,e[1]=t[1]*a,e[2]=t[2]*a),e}function y(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function O(e,t,r){var n=t[0],i=t[1],a=t[2],o=r[0],s=r[1],l=r[2];return e[0]=i*l-a*s,e[1]=a*o-n*l,e[2]=n*s-i*o,e}function j(e,t,r,n){var i=t[0],a=t[1],o=t[2];return e[0]=i+n*(r[0]-i),e[1]=a+n*(r[1]-a),e[2]=o+n*(r[2]-o),e}function w(e,t,r){var n=t[0],i=t[1],a=t[2];return e[0]=r[0]*n+r[4]*i+r[8]*a+r[12],e[1]=r[1]*n+r[5]*i+r[9]*a+r[13],e[2]=r[2]*n+r[6]*i+r[10]*a+r[14],e}function k(e,t,r){var n=t[0],i=t[1],a=t[2];return e[0]=n*r[0]+i*r[3]+a*r[6],e[1]=n*r[1]+i*r[4]+a*r[7],e[2]=n*r[2]+i*r[5]+a*r[8],e}function _(e,t,r){var n=r[0],i=r[1],a=r[2],o=r[3],s=t[0],l=t[1],c=t[2],u=i*c-a*l,d=a*s-n*c,p=n*l-i*s,h=i*p-a*d,b=a*u-n*p,m=n*d-i*u,f=2*o;return u*=f,d*=f,p*=f,h*=2,b*=2,m*=2,e[0]=s+u+h,e[1]=l+d+b,e[2]=c+p+m,e}function S(e,t,r,n){var i=[],a=[];return i[0]=t[0]-r[0],i[1]=t[1]-r[1],i[2]=t[2]-r[2],a[0]=i[0]*Math.cos(n)-i[1]*Math.sin(n),a[1]=i[0]*Math.sin(n)+i[1]*Math.cos(n),a[2]=i[2],e[0]=a[0]+r[0],e[1]=a[1]+r[1],e[2]=a[2]+r[2],e}var I=Object(n.e)(),x=Object(n.e)();function T(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]}var E=c,A=u,M=d,C=b,N=m,P=a,D=f;Object.freeze({__proto__:null,length:a,copy:o,set:s,add:l,subtract:c,multiply:u,divide:d,ceil:function(e,t){return e[0]=Math.ceil(t[0]),e[1]=Math.ceil(t[1]),e[2]=Math.ceil(t[2]),e},floor:function(e,t){return e[0]=Math.floor(t[0]),e[1]=Math.floor(t[1]),e[2]=Math.floor(t[2]),e},min:function(e,t,r){return e[0]=Math.min(t[0],r[0]),e[1]=Math.min(t[1],r[1]),e[2]=Math.min(t[2],r[2]),e},max:function(e,t,r){return e[0]=Math.max(t[0],r[0]),e[1]=Math.max(t[1],r[1]),e[2]=Math.max(t[2],r[2]),e},round:function(e,t){return e[0]=Math.round(t[0]),e[1]=Math.round(t[1]),e[2]=Math.round(t[2]),e},scale:p,scaleAndAdd:h,distance:b,squaredDistance:m,squaredLength:f,negate:v,inverse:function(e,t){return e[0]=1/t[0],e[1]=1/t[1],e[2]=1/t[2],e},normalize:g,dot:y,cross:O,lerp:j,hermite:function(e,t,r,n,i,a){var o=a*a,s=o*(2*a-3)+1,l=o*(a-2)+a,c=o*(a-1),u=o*(3-2*a);return e[0]=t[0]*s+r[0]*l+n[0]*c+i[0]*u,e[1]=t[1]*s+r[1]*l+n[1]*c+i[1]*u,e[2]=t[2]*s+r[2]*l+n[2]*c+i[2]*u,e},bezier:function(e,t,r,n,i,a){var o=1-a,s=o*o,l=a*a,c=s*o,u=3*a*s,d=3*l*o,p=l*a;return e[0]=t[0]*c+r[0]*u+n[0]*d+i[0]*p,e[1]=t[1]*c+r[1]*u+n[1]*d+i[1]*p,e[2]=t[2]*c+r[2]*u+n[2]*d+i[2]*p,e},random:function(e,t){t=t||1;var r=2*Object(i.b)()*Math.PI,n=2*Object(i.b)()-1,a=Math.sqrt(1-n*n)*t;return e[0]=Math.cos(r)*a,e[1]=Math.sin(r)*a,e[2]=n*t,e},transformMat4:w,transformMat3:k,transformQuat:_,rotateX:function(e,t,r,n){var i=[],a=[];return i[0]=t[0]-r[0],i[1]=t[1]-r[1],i[2]=t[2]-r[2],a[0]=i[0],a[1]=i[1]*Math.cos(n)-i[2]*Math.sin(n),a[2]=i[1]*Math.sin(n)+i[2]*Math.cos(n),e[0]=a[0]+r[0],e[1]=a[1]+r[1],e[2]=a[2]+r[2],e},rotateY:function(e,t,r,n){var i=[],a=[];return i[0]=t[0]-r[0],i[1]=t[1]-r[1],i[2]=t[2]-r[2],a[0]=i[2]*Math.sin(n)+i[0]*Math.cos(n),a[1]=i[1],a[2]=i[2]*Math.cos(n)-i[0]*Math.sin(n),e[0]=a[0]+r[0],e[1]=a[1]+r[1],e[2]=a[2]+r[2],e},rotateZ:S,angle:function(e,t){o(I,e),o(x,t),g(I,I),g(x,x);var r=y(I,x);return r>1?0:r<-1?Math.PI:Math.acos(r)},str:function(e){return"vec3("+e[0]+", "+e[1]+", "+e[2]+")"},exactEquals:T,equals:function(e,t){var r=e[0],n=e[1],a=e[2],o=t[0],s=t[1],l=t[2];return Math.abs(r-o)<=i.a*Math.max(1,Math.abs(r),Math.abs(o))&&Math.abs(n-s)<=i.a*Math.max(1,Math.abs(n),Math.abs(s))&&Math.abs(a-l)<=i.a*Math.max(1,Math.abs(a),Math.abs(l))},sub:E,mul:A,div:M,dist:C,sqrDist:N,len:P,sqrLen:D})},124:function(e,t,r){"use strict";r.d(t,"a",(function(){return i})),r.d(t,"b",(function(){return a})),r.d(t,"c",(function(){return o}));var n=r(92);function i(e,t,r=!1){return l(e,t,r)}function a(e,t){if(null!=t)return t[e]||s(e.split("."),!1,t)}function o(e,t,r){var n=e.split("."),i=n.pop(),a=s(n,!0,r);a&&i&&(a[i]=t)}function s(e,t,r){var n=r;for(var i of e){if(null==n)return;if(!(i in n)){if(!t)return;n[i]={}}n=n[i]}return n}function l(e,t,r){return t?Object.keys(t).reduce((function(e,i){var a=e[i],o=t[i];return a===o?e:void 0===a?(e[i]=Object(n.a)(o),e):(Array.isArray(o)||Array.isArray(e)?(a=a?Array.isArray(a)?e[i]=a.concat():e[i]=[a]:e[i]=[],o&&(Array.isArray(o)||(o=[o]),r?o.forEach((e=>{-1===a.indexOf(e)&&a.push(e)})):e[i]=o.concat())):o&&"object"==typeof o?e[i]=l(a,o,r):e.hasOwnProperty(i)&&!t.hasOwnProperty(i)||(e[i]=o),e)}),e||{}):e}},1242:function(e,t,r){"use strict";r.r(t),r.d(t,"Bookmarks",(function(){return We}));var n=r(1),i=r(7),a=r(91),o=r(82),s=(r(80),r(81)),l=r(85),c=r(145),u=r(116),d=r(288),p=r(84),h=(r(83),r(86),r(87),r(165)),b=r(115),m=r(108),f=r(807),v=(r(114),r(163)),g=r(301),y=r(129),O=r(154),j=r(954),w=(r(88),r(97)),k=class extends w.a{constructor(e){super(e)}get editedBookmark(){var{bookmark:e}=this;return e?this._get("editedBookmark")||e.clone():null}get state(){return this._get("state")}set state(e){this.validationState=void 0,this.loading=void 0,this._set("state",e)}};Object(o.a)([Object(l.b)()],k.prototype,"bookmark",void 0),Object(o.a)([Object(l.b)({readOnly:!0})],k.prototype,"editedBookmark",null),Object(o.a)([Object(l.b)()],k.prototype,"state",null),Object(o.a)([Object(l.b)()],k.prototype,"validationState",void 0),Object(o.a)([Object(l.b)()],k.prototype,"loading",void 0);var _=k=Object(o.a)([Object(p.a)("esri.widgets.Bookmarks.UserState")],k),S=r(93),I=r(131),x=r(107),T=r(559),E=r(881),A=r(501),M="esri.widgets.Bookmarks.BookmarksViewModel",C=s.a.getLogger(M),N=x.a.ofType(E.a),P={width:128,height:128,format:"png"},D={takeScreenshot:!0,captureViewpoint:!0,captureRotation:!0,captureScale:!0},B=class extends(Object(A.a)(I.a.EventedAccessor)){constructor(e){super(e),this.activeBookmark=null}destroy(){this.view=null,this._set("activeBookmark",null)}set bookmarks(e){void 0!==e?this._override("bookmarks",e):this._clearOverride("bookmarks")}get bookmarks(){return this.get("view.map.bookmarks")||new N}set defaultCreateOptions(e){this._set("defaultCreateOptions",Object(a.a)(Object(a.a)({},D),e))}get defaultCreateOptions(){return D}set defaultEditOptions(e){this._set("defaultEditOptions",Object(a.a)(Object(a.a)({},D),e))}get defaultEditOptions(){return D}get state(){var e=this.get("view");return e&&!e.ready?"loading":"ready"}get view(){return this._get("view")}set view(e){e&&"2d"!==e.type&&C.error(new S.a("view:invalid-view","SceneView is not supported",{view:e})),this._set("view",e)}createBookmark(e){var t=this;return Object(i.a)((function*(){var{view:r,defaultCreateOptions:n}=t;if(!r){var i=new S.a("create-bookmark:invalid-view","Cannot create a bookmark without a view.");return C.error(i),Promise.reject(i)}var{takeScreenshot:o,screenshotSettings:s,captureExtent:l,captureViewpoint:c,captureRotation:u,captureScale:d}=Object(a.a)(Object(a.a)({},n),e),p=o?yield t._createThumbnail(s):void 0;return new E.a(Object(a.a)(Object(a.a)({},p&&{thumbnail:p}),(c||l)&&{viewpoint:t._createViewpoint({view:r,captureScale:d,captureRotation:u})}))}))()}editBookmark(e,t){var r=this;return Object(i.a)((function*(){var{view:n,defaultEditOptions:i}=r;if(!n){var o=new S.a("edit-bookmark:invalid-view","Cannot edit a bookmark without a view.");return C.error(o),Promise.reject(o)}var{takeScreenshot:s,screenshotSettings:l,captureExtent:c,captureViewpoint:u,captureRotation:d,captureScale:p}=Object(a.a)(Object(a.a)({},i),t),h=s?yield r._createThumbnail(l):void 0;return h&&(e.thumbnail=h),(u||c)&&(e.viewpoint=r._createViewpoint({view:n,captureScale:p,captureRotation:d})),r.emit("bookmark-edit",{bookmark:e}),e}))()}goTo(e){var{view:t}=this;if(!t){var r=new S.a("go-to:invalid-view","Cannot go to a bookmark without a view");return C.error(r),Promise.reject(r)}var n=null==e?void 0:e.viewpoint;if(!n){var i=new S.a("go-to:invalid-bookmark","Cannot go to a bookmark that does not contain a 'viewpoint'.",{bookmark:e});return C.error(i),Promise.reject(i)}this._set("activeBookmark",e);var a={target:n},o=this.callGoTo(a);return this.emit("select-bookmark",{bookmark:e}),this.emit("bookmark-select",{bookmark:e}),o.catch((()=>{})).then((()=>this._set("activeBookmark",null))),o}_createThumbnail(e){var t=this;return Object(i.a)((function*(){var r=yield t.view.takeScreenshot(Object(a.a)(Object(a.a)({},P),e));return new f.a({url:r.dataUrl})}))()}_createViewpoint({view:e,captureRotation:t,captureScale:r}){var n,i,a=null==(n=e.viewpoint)?void 0:n.clone();return new T.a({targetGeometry:null==(i=e.extent)?void 0:i.clone(),rotation:t&&(null==a?void 0:a.rotation)||0,scale:r&&(null==a?void 0:a.scale)||0})}};Object(o.a)([Object(l.b)({readOnly:!0})],B.prototype,"activeBookmark",void 0),Object(o.a)([Object(l.b)({type:N})],B.prototype,"bookmarks",null),Object(o.a)([Object(l.b)()],B.prototype,"defaultCreateOptions",null),Object(o.a)([Object(l.b)()],B.prototype,"defaultEditOptions",null),Object(o.a)([Object(l.b)({readOnly:!0})],B.prototype,"state",null),Object(o.a)([Object(l.b)({value:null})],B.prototype,"view",null);var F=B=Object(o.a)([Object(p.a)(M)],B),L=r(752),R=r(799);var U="data-bookmark-uid",q="esri-bookmarks esri-widget--panel",V="esri-bookmarks__loader-container",W="esri-bookmarks__loader",G="esri-bookmarks__list",J="esri-bookmarks__list--sortable",z="esri-bookmarks__bookmark",Y="esri-bookmarks__bookmark-button",H="esri-bookmarks__bookmark-image-container",X="esri-bookmarks__bookmark-edit-button",K="esri-bookmarks_bookmark-drag-handle",$="esri-bookmarks_bookmark-drag-handle-icon",Z="esri-bookmarks__bookmark-icon",Q="esri-bookmarks__image",ee="esri-bookmarks__bookmark-name",te="esri-bookmarks__bookmark--active",re="esri-widget__content--empty",ne="esri-bookmarks__no-bookmarks-heading",ie="esri-widget__no-bookmark-icon",ae="esri-bookmarks__no-bookmarks-description",oe="esri-bookmarks__adding-bookmark",se="esri-bookmarks__add-bookmark",le="esri-bookmarks__add-bookmark-button",ce="esri-bookmarks__add-bookmark-icon",ue="esri-bookmarks__authoring-card",de="esri-bookmarks__authoring-container",pe="esri-bookmarks__authoring-form",he="esri-bookmarks__authoring-label",be="esri-bookmarks__authoring-actions",me="esri-bookmarks__authoring-input--invalid",fe="esri-bookmarks__authoring-delete-button",ve="esri-bookmarks__authoring-cancel-button",ge="esri-widget",ye="esri-widget--disabled",Oe="esri-button",je="esri-button--tertiary",we="esri-input",ke="esri-icon-handle-vertical",_e="esri-icon-plus",Se="esri-icon-edit",Ie="esri-icon-handle-horizontal",xe="esri-icon-refresh",Te="esri-icon-link",Ee="esri-icon-erase",Ae="esri-icon-bookmark",Me="esri-widget__heading",Ce="esri-icon-loading-indicator",Ne="esri-rotating",Pe={addBookmark:!0,thumbnail:!0},De=/^https:\/\/.*/i,Be="esri.widgets.Bookmarks",Fe=s.a.getLogger(Be),Le=class extends O.a{constructor(e,t){super(e,t),this._handles=new b.a,this._addInputNode=null,this._editInputNode=null,this._urlEditInputNode=null,this._addBookmarkButtonNode=null,this._focusAddBookmarkButton=!1,this._focusEditInputBox=!1,this._focusAddInputBox=!1,this._focusUrlEditInputBox=!1,this._sortable=null,this._sortableNode=null,this._focusSortUid=null,this._selectedSortUid=null,this._sortableSavedItems=null,this._userState=null,this.defaultCreateOptions=null,this.defaultEditOptions=null,this.bookmarks=null,this.disabled=!1,this.editingEnabled=!1,this.goToOverride=null,this.iconClass=Ae,this.label=void 0,this.messages=null,this.messagesCommon=null,this.messagesUnits=null,this.view=null,this.viewModel=new F,this.visibleElements=Object(a.a)({},Pe)}initialize(){this.own([Object(m.a)(this,"viewModel.bookmarks",(()=>this._bookmarksInitialized())),Object(m.a)(this,"editingEnabled",(()=>this._toggleSorting()))])}destroy(){this._destroySortable(),this._handles.destroy(),this._handles=null,this._editMenu.destroy()}get _editMenuItems(){var e,t,{messages:r,_userState:n}=this,i=null==n||null==(e=n.editedBookmark)||null==(t=e.thumbnail)?void 0:t.url;return[new L.a({label:null==r?void 0:r.menu.refreshThumbnail,iconClass:xe,clickFunction:()=>this._refreshThumbnail()}),new L.a({label:De.test(i)?null==r?void 0:r.menu.editImageUrl:null==r?void 0:r.menu.useImageUrl,iconClass:Te,clickFunction:()=>this._startUseImageUrl()}),i?new L.a({label:null==r?void 0:r.menu.removeThumbnail,iconClass:Ee,clickFunction:()=>this._removeThumbnail()}):null].filter(Boolean)}get _editMenu(){var{_editMenuItems:e,messages:t}=this,r=this._get("_editMenu");r&&r.destroy();var n=new R.a({iconClass:Ie,label:null==t?void 0:t.menu.label});return n.items=e,n}get bookmarkCreationOptions(){return Object(d.c)(Fe,"bookmarkCreationOptions",{replacement:"defaultCreateOptions",version:"4.18"}),this.viewModel.defaultCreateOptions}set bookmarkCreationOptions(e){void 0!==e.captureExtent&&Object(d.c)(Fe,"bookmarkCreationOptions.captureExtent",{replacement:"defaultCreateOptions.captureViewpoint",version:"4.17"}),Object(d.c)(Fe,"bookmarkCreationOptions",{replacement:"defaultCreateOptions",version:"4.18"}),this.viewModel.defaultCreateOptions=e}castVisibleElements(e){return Object(a.a)(Object(a.a)({},Pe),e)}endAddBookmark(){this._userState=null}goTo(e){return this.viewModel.goTo(e)}render(){var{state:e}=this.viewModel,t="loading"===e?this.renderLoading():this.renderBookmarks();return Object(y.a)("div",{class:this.classes(q,ge,{[ye]:this.disabled})},t)}startAddBookmark(){this._userState=new _({state:"add"}),this._focusAddInputBox=!0,this.scheduleRender()}renderLoading(){return Object(y.a)("div",{class:V,key:"loader"},Object(y.a)("div",{class:W}))}renderNoBookmarksContainer(){var{messages:e}=this;return Object(y.a)("div",{class:re,key:"no-bookmarks"},Object(y.a)("span",{"aria-hidden":"true",class:this.classes(ie,Ae)}),Object(y.a)("h1",{class:this.classes(Me,ne)},null==e?void 0:e.noBookmarksHeading),Object(y.a)("p",{class:ae},null==e?void 0:e.noBookmarksDescription))}renderAddBookmarkLoading(){var e;return Object(y.a)("div",{key:"adding-bookmark",class:oe},Object(y.a)("span",{"aria-hidden":"true",class:this.classes(Ce,Ne)}),null==(e=this.messages)?void 0:e.addingBookmark)}renderBookmarkItems(e){if(!e)return null;var{_userState:t,editingEnabled:r}=this;return e.map((e=>r&&e&&t&&("edit"===t.state||"edit-thumbnail"===t.state)&&t.bookmark===e?"edit-thumbnail"===t.state?this.renderEditingBookmarkUrl(t.editedBookmark):this.renderEditingBookmark(t.editedBookmark):this.renderBookmark(e))).toArray()}renderBookmarksContainer(e){var t,{_userState:r,editingEnabled:n}=this,i="add"===(null==r?void 0:r.state),a=n&&!i?this.renderAddBookmarkButton():null,o=n?i&&r.loading?this.renderAddBookmarkLoading():"add"===(null==r?void 0:r.state)?this.renderAddingBookmark():null:null;return[Object(y.a)("ul",{key:"bookmark-list","aria-label":null==(t=this.messages)?void 0:t.widgetLabel,class:this.classes(G,{[J]:this.editingEnabled}),afterCreate:this._sortNodeCreated,afterRemoved:this._destroySortable,"data-node-ref":"_sortableNode",bind:this},this.renderBookmarkItems(e)),a,o]}renderAddBookmarkButton(){var e;return this.visibleElements.addBookmark?Object(y.a)("div",{key:"add-bookmark-item",class:se},Object(y.a)("button",{class:this.classes(Oe,je,le),onclick:this.startAddBookmark,afterCreate:this._storeAddBookmarkButton,afterUpdate:this._storeAddBookmarkButton,"data-node-ref":"_addBookmarkButtonNode",bind:this,type:"button"},Object(y.a)("span",{"aria-hidden":"true",class:this.classes(ce,_e)}),null==(e=this.messages)?void 0:e.addBookmark)):null}renderBookmarks(){var{bookmarks:e}=this.viewModel,t=e&&e.filter(Boolean),r=t&&t.length,n=r||this.editingEnabled?this.renderBookmarksContainer(t):null;return[r?null:this.renderNoBookmarksContainer(),n]}renderEditContainer(e){var{messagesCommon:t}=this;return Object(y.a)("div",{key:"edit-container"},Object(y.a)("button",{title:null==t?void 0:t.edit,"aria-label":null==t?void 0:t.edit,"data-bookmark":e,onclick:this._showEditBookmarkForm,bind:this,class:X,type:"button"},Object(y.a)("span",{"aria-hidden":"true",class:Se})))}renderDragHandle(e){var{messagesCommon:t}=this,r={[U]:e.uid};return Object(y.a)("div",Object.assign({role:"button",tabIndex:0,key:"drag-handle",bind:this,class:K,onkeydown:this._dragHandleKeydown,afterCreate:this._focusDragHandle,afterUpdate:this._focusDragHandle,onblur:this._dragHandleBlur,"aria-pressed":this._selectedSortUid===e.uid?"true":"false","aria-label":null==t?void 0:t.dragHandleLabel,title:null==t?void 0:t.dragHandleTitle},r),Object(y.a)("span",{"aria-hidden":"true",class:this.classes($,ke)}))}renderBookmarkImageIcon(){return Object(y.a)("span",{"aria-hidden":"true",class:this.classes(Z,Ae)})}renderBookmarkImage(e){var{visibleElements:t}=this,{thumbnail:r}=e,n=r&&r.url||"";return t.thumbnail&&n?Object(y.a)("img",{src:n,alt:"",class:Q}):null}renderBookmarkButton(e){var{messagesCommon:t}=this,{name:r}=e,n=r||(null==t?void 0:t.untitled),i=Object(y.a)("div",{class:H},this.renderBookmarkImage(e)||this.renderBookmarkImageIcon());return Object(y.a)("button",{key:"bookmark-button",class:Y,bind:this,"data-bookmark":e,onclick:this._goToBookmark,type:"button"},i,Object(y.a)("span",{class:ee},n))}renderBookmark(e){var{activeBookmark:t}=this.viewModel,r={[te]:t===e},n=this.editingEnabled?this.renderEditContainer(e):null,i={[U]:e.uid},a=this.editingEnabled?this.renderDragHandle(e):null;return Object(y.a)("li",Object.assign({key:e,class:this.classes(z,r)},i),a,this.renderBookmarkButton(e),n)}renderEditingBookmarkName(e){var{messages:t,_userState:r}=this,n="name-required"===r.validationState;return Object(y.a)("label",{class:he},null==t?void 0:t.title,n?Object(y.a)("strong",null,null==t?void 0:t.invalidTitle):null,Object(y.a)("input",{required:!0,bind:this,class:this.classes(we,n?me:null),type:"text",value:e.name,afterCreate:this._storeEditInput,afterUpdate:this._focusEditInput,"data-bookmark":e,"data-node-ref":"_editInputNode",placeholder:null==t?void 0:t.titlePlaceholder}))}renderEditingBookmarkUrlActions(){var{messagesCommon:e}=this;return Object(y.a)("div",{class:be},Object(y.a)("input",{type:"button",value:null==e?void 0:e.back,class:this.classes(Oe,je),onclick:this._closeUrlEditBookmarkForm,bind:this}),Object(y.a)("input",{class:Oe,type:"submit",value:null==e?void 0:e.add}))}renderEditingBookmarkActions(){var{messagesCommon:e}=this,{bookmark:t}=this._userState;return Object(y.a)("div",{class:be},Object(y.a)("input",{type:"button",value:null==e?void 0:e.delete,class:this.classes(Oe,je,fe),"data-bookmark":t,onclick:this._deleteBookmark,bind:this}),Object(y.a)("input",{type:"button",value:null==e?void 0:e.cancel,class:this.classes(Oe,je),onclick:this._closeEditBookmarkForm,bind:this}),Object(y.a)("input",{class:Oe,type:"submit",value:null==e?void 0:e.save}))}renderEditingBookmarkUrlInput(e){var t,{messages:r,_userState:n}=this,i=null==(t=e.thumbnail)?void 0:t.url,a=De.test(i)?i:null,o="absolute-url-required"===n.validationState;return Object(y.a)("label",{class:he},o?Object(y.a)("strong",null,null==r?void 0:r.invalidImageUrl):null,Object(y.a)("input",{required:!0,bind:this,class:this.classes(we,o?me:null),type:"text",value:a,afterCreate:this._storeUrlEditInput,afterUpdate:this._focusUrlEditInput,"data-bookmark":e,"data-node-ref":"_urlEditInputNode",title:null==r?void 0:r.imageUrlTooltip,placeholder:null==r?void 0:r.imageUrlPlaceholder}))}renderEditingBookmarkUrl(e){var t={[U]:e.uid};return Object(y.a)("li",Object.assign({key:"edit-bookmark-url-form",class:ue},t),Object(y.a)("form",{class:pe,onsubmit:this._editBookmarkUrlSubmit,bind:this},this.renderEditingBookmarkUrlInput(e),this.renderEditingBookmarkUrlActions()))}renderEditingBookmark(e){var t={[U]:e.uid};return Object(y.a)("li",Object.assign({key:"edit-bookmark-form",class:ue},t),Object(y.a)("form",{class:pe,onsubmit:this._editBookmarkSubmit,bind:this},Object(y.a)("div",{class:de},Object(y.a)("div",{class:H},this.renderBookmarkImage(e),this._editMenu.render()),this.renderEditingBookmarkName(e)),this.renderEditingBookmarkActions()))}renderAddingBookmarkName(){var{_userState:e,messages:t}=this,r="name-required"===e.validationState;return Object(y.a)("label",{class:he},null==t?void 0:t.title,r?Object(y.a)("strong",null,null==t?void 0:t.invalidTitle):null,Object(y.a)("input",{required:!0,bind:this,class:this.classes(we,r?me:null),type:"text",afterCreate:this._storeAddInput,afterUpdate:this._focusAddInput,"data-node-ref":"_addInputNode",value:"",placeholder:null==t?void 0:t.titlePlaceholder}))}renderAddingBookmarkActions(){var{messagesCommon:e}=this;return Object(y.a)("div",{class:this.classes(be)},Object(y.a)("input",{type:"button",value:null==e?void 0:e.cancel,class:this.classes(Oe,je,ve),onclick:this._endAddBookmark.bind(this),bind:this}),Object(y.a)("input",{class:Oe,type:"submit",value:null==e?void 0:e.add}))}renderAddingBookmark(){return Object(y.a)("div",{key:"add-bookmark-form",class:ue},Object(y.a)("form",{class:pe,onsubmit:this._addBookmarkSubmit,bind:this},this.renderAddingBookmarkName(),this.renderAddingBookmarkActions()))}_dragHandleBlur(){this._selectedSortUid=null,this.scheduleRender()}_dragHandleKeydown(e){var{_sortableSavedItems:t}=this,r=Object(h.a)(e);if(-1!==["ArrowDown","ArrowUp","Escape","Tab"," ","Enter"].indexOf(r)){var{_sortable:n,_selectedSortUid:i}=this,a=n.toArray(),o=e.target.getAttribute(U),s=a.indexOf(o);if(" "===r||"Enter"===r){var l=i&&i===o;return this._selectedSortUid=l?null:o,this._sortableSavedItems=l?null:this._sortable.toArray(),void this.scheduleRender()}if("Tab"===r)return this._selectedSortUid=null,void this.scheduleRender();if("Escape"===r&&t)return e.stopPropagation(),this._selectedSortUid=null,this._updateSortItems(t,n,o),void this.scheduleRender();if(-1!==s&&i){var c="ArrowUp"===r?s-1:s+1;c>=a.length||c<=-1||(function(e,t,r){e.splice(r,0,e.splice(t,1)[0])}(a,s,c),this._updateSortItems(a,n,o))}}}_updateSortItems(e,t,r){t.sort(e),this._sortBookmarks(t),this._focusSortUid=r,this._selectedSortUid=r}_focusDragHandle(e){var{_focusSortUid:t}=this;e&&t&&e.getAttribute(U)===t&&(e.focus(),this._focusSortUid=null)}_toggleSorting(){var{_sortable:e,_sortableNode:t,editingEnabled:r}=this;if(t)if(e)e.option("disabled",!r);else{var n=j.a.create(t,{dataIdAttr:U,handle:".".concat(K),group:"bookmarks",disabled:!r,onSort:()=>this._sortBookmarks(n)});this._sortable=n}}_sortNodeCreated(e){this._sortableNode=e,this._toggleSorting()}_sortBookmarks(e){var{bookmarks:t}=this.viewModel;if(t){var r=e.toArray();t.sort(((e,t)=>{var n=r.indexOf(e.uid),i=r.indexOf(t.uid);return n>i?1:n<i?-1:0}))}}_destroySortable(){var{_sortable:e}=this;e&&e.destroy(),this._sortable=null}_endAddBookmark(){this._focusAddBookmarkButton=!0,this.endAddBookmark()}_bookmarksInitialized(){var e="bookmarks-init",{_handles:t}=this;t.remove(e),t.add(Object(m.b)(this,"viewModel.bookmarks","change",(()=>this._bookmarksChanged())),e)}_bookmarksChanged(){var e="bookmarks-change",{bookmarks:t}=this.viewModel,{_handles:r}=this;r.remove(e);var n=t.map((e=>Object(m.d)(e,["active","name","thumbnail.url"],(()=>this.scheduleRender()))));r.add(n,e),this.scheduleRender()}_showEditBookmarkForm(e){var t=e.currentTarget["data-bookmark"];this._focusEditInputBox=!0,this._userState=new _({bookmark:t,state:"edit"}),this.viewModel.goTo(t),this.scheduleRender()}_closeUrlEditBookmarkForm(){this._focusEditInputBox=!0,this._userState.state="edit"}_closeEditBookmarkForm(){this._userState=null}_addBookmarkSubmit(e){e.preventDefault();var{_addInputNode:t,_userState:r}=this,n=t&&t.value.trim();n?(r.loading=!0,this.viewModel.createBookmark().then((e=>{e.name=n,this.viewModel.bookmarks.add(e),this._endAddBookmark()}))):r.validationState="name-required"}_editBookmarkAndClose(e,t){var r=this;return Object(i.a)((function*(){yield r.viewModel.editBookmark(e,t),r._closeEditBookmarkForm()}))()}_editBookmarkSubmit(e){e.preventDefault();var{_editInputNode:t,_userState:r}=this,n=t&&t.value.trim();n?(r.bookmark.name=n,r.bookmark.thumbnail=r.editedBookmark.thumbnail,this._editBookmarkAndClose(r.bookmark,{takeScreenshot:!1})):r.validationState="name-required"}_storeAddBookmarkButton(e){this._addBookmarkButtonNode=e,this._focusAddBookmark()}_storeEditInput(e){this._editInputNode=e,this._focusEditInput()}_storeAddInput(e){this._addInputNode=e,this._focusAddInput()}_storeUrlEditInput(e){this._urlEditInputNode=e,this._focusUrlEditInput()}_focusUrlEditInput(){this._urlEditInputNode&&this._focusUrlEditInputBox&&(this._focusUrlEditInputBox=!1,this._urlEditInputNode.focus())}_focusAddInput(){this._addInputNode&&this._focusAddInputBox&&(this._focusAddInputBox=!1,this._addInputNode.focus())}_focusAddBookmark(){this._addBookmarkButtonNode&&this._focusAddBookmarkButton&&(this._focusAddBookmarkButton=!1,this._addBookmarkButtonNode.focus())}_focusEditInput(){this._editInputNode&&this._focusEditInputBox&&(this._focusEditInputBox=!1,this._editInputNode.focus())}_deleteBookmark(e){var t=e.currentTarget["data-bookmark"];this.viewModel.bookmarks.remove(t)}_goToBookmark(e){var t=e.currentTarget["data-bookmark"];this.endAddBookmark(),this._closeEditBookmarkForm(),this.viewModel.goTo(t)}_refreshThumbnail(){var e=this;return Object(i.a)((function*(){var{_userState:t,_editMenu:r,viewModel:n}=e;t.validationState=void 0,yield n.editBookmark(e._userState.editedBookmark,{takeScreenshot:!0,captureExtent:!1,captureViewpoint:!1,captureRotation:!1,captureScale:!1}),r.open=!1,e._focusEditInputBox=!0,e.scheduleRender()}))()}_removeThumbnail(){var{_userState:e,_editMenu:t}=this;e.editedBookmark.thumbnail=null,e.validationState=void 0,t.open=!1,this._focusEditInputBox=!0,this.scheduleRender()}_startUseImageUrl(){this._userState.state="edit-thumbnail",this._editMenu.open=!1,this._focusUrlEditInputBox=!0,this.scheduleRender()}_editBookmarkUrlSubmit(e){e.preventDefault();var{_urlEditInputNode:t,_userState:r}=this,n=t.value;De.test(n)?(n&&(r.editedBookmark.thumbnail=new f.a({url:n})),this._closeUrlEditBookmarkForm()):r.validationState="absolute-url-required"}};Object(o.a)([Object(l.b)({type:_})],Le.prototype,"_userState",void 0),Object(o.a)([Object(l.b)({readOnly:!0})],Le.prototype,"_editMenuItems",null),Object(o.a)([Object(l.b)({readOnly:!0})],Le.prototype,"_editMenu",null),Object(o.a)([Object(l.b)()],Le.prototype,"bookmarkCreationOptions",null),Object(o.a)([Object(c.a)("viewModel.defaultCreateOptions")],Le.prototype,"defaultCreateOptions",void 0),Object(o.a)([Object(c.a)("viewModel.defaultEditOptions")],Le.prototype,"defaultEditOptions",void 0),Object(o.a)([Object(c.a)("viewModel.bookmarks")],Le.prototype,"bookmarks",void 0),Object(o.a)([Object(l.b)()],Le.prototype,"disabled",void 0),Object(o.a)([Object(l.b)()],Le.prototype,"editingEnabled",void 0),Object(o.a)([Object(c.a)("viewModel.goToOverride")],Le.prototype,"goToOverride",void 0),Object(o.a)([Object(l.b)()],Le.prototype,"iconClass",void 0),Object(o.a)([Object(l.b)({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],Le.prototype,"label",void 0),Object(o.a)([Object(l.b)(),Object(v.a)("esri/widgets/Bookmarks/t9n/Bookmarks")],Le.prototype,"messages",void 0),Object(o.a)([Object(l.b)(),Object(v.a)("esri/t9n/common")],Le.prototype,"messagesCommon",void 0),Object(o.a)([Object(l.b)(),Object(v.a)("esri/core/t9n/Units")],Le.prototype,"messagesUnits",void 0),Object(o.a)([Object(c.a)("viewModel.view")],Le.prototype,"view",void 0),Object(o.a)([Object(l.b)({type:F}),Object(g.a)(["select-bookmark","bookmark-edit","bookmark-select"])],Le.prototype,"viewModel",void 0),Object(o.a)([Object(l.b)()],Le.prototype,"visibleElements",void 0),Object(o.a)([Object(u.a)("visibleElements")],Le.prototype,"castVisibleElements",null),Object(o.a)([Object(l.b)()],Le.prototype,"endAddBookmark",null),Object(o.a)([Object(l.b)()],Le.prototype,"startAddBookmark",null);var Re=Le=Object(o.a)([Object(p.a)(Be)],Le),Ue=r(1052),qe=r(94),Ve=r(0),We=e=>{var t=Object(n.useRef)(null);return Object(n.useEffect)((()=>{var r=new Re({container:t.current,view:e.view,editingEnabled:!0});return qe.c((e=>{if(window.localStorage.getItem("imaps")){var t=Ue.a.fromJSON(JSON.parse(window.localStorage.getItem("imaps")));t.load().then((()=>{e(t.bookmarks)}))}})).then((e=>{r.bookmarks.removeAll(),r.bookmarks.addMany(e)})),()=>{r&&r.destroy()}}),[e.id]),Object(Ve.jsx)("div",{ref:t})};t.default=We},140:function(e,t,r){"use strict";r.d(t,"a",(function(){return i})),r.d(t,"b",(function(){return l})),r.d(t,"c",(function(){return s})),r.d(t,"d",(function(){return o})),r.d(t,"e",(function(){return c}));r(80);var n=r(95);function i(e){return e}var a={milliseconds:{getter:"getMilliseconds",setter:"setMilliseconds",multiplier:1},seconds:{getter:"getSeconds",setter:"setSeconds",multiplier:1},minutes:{getter:"getMinutes",setter:"setMinutes",multiplier:1},hours:{getter:"getHours",setter:"setHours",multiplier:1},days:{getter:"getDate",setter:"setDate",multiplier:1},weeks:{getter:"getDate",setter:"setDate",multiplier:7},months:{getter:"getMonth",setter:"setMonth",multiplier:1},years:{getter:"getFullYear",setter:"setFullYear",multiplier:1},decades:{getter:"getFullYear",setter:"setFullYear",multiplier:10},centuries:{getter:"getFullYear",setter:"setFullYear",multiplier:100}},o=Object(n.b)()({esriTimeUnitsMilliseconds:"milliseconds",esriTimeUnitsSeconds:"seconds",esriTimeUnitsMinutes:"minutes",esriTimeUnitsHours:"hours",esriTimeUnitsDays:"days",esriTimeUnitsWeeks:"weeks",esriTimeUnitsMonths:"months",esriTimeUnitsYears:"years",esriTimeUnitsDecades:"decades",esriTimeUnitsCenturies:"centuries",esriTimeUnitsUnknown:null});function s(e,t,r){var n=new Date(e.getTime());if(t&&r){var i=a[r],{getter:o,setter:s,multiplier:l}=i;n[s](n[o]()+t*l)}return n}var l={milliseconds:1,seconds:1e3,minutes:6e4,hours:36e5,days:864e5,weeks:6048e5,months:26784e5,years:31536e6,decades:31536e7,centuries:31536e8};function c(e,t){switch(t){case"milliseconds":return new Date(e.getTime());case"seconds":return new Date(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds());case"minutes":return new Date(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes());case"hours":return new Date(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours());case"days":return new Date(e.getFullYear(),e.getMonth(),e.getDate());case"weeks":return new Date(e.getFullYear(),e.getMonth(),e.getDate()-e.getDay());case"months":return new Date(e.getFullYear(),e.getMonth(),1);case"years":return new Date(e.getFullYear(),0,1);case"decades":return new Date(e.getFullYear()-e.getFullYear()%10,0,1);case"centuries":return new Date(e.getFullYear()-e.getFullYear()%100,0,1);default:return null}}},143:function(e,t,r){"use strict";r.d(t,"a",(function(){return s})),r.d(t,"b",(function(){return l})),r.d(t,"c",(function(){return o})),r.d(t,"d",(function(){return c}));var n=r(124),i=/\{([^\}]+)\}/g;function a(e){return null==e?"":e}function o(e,t){return e.replace(i,"object"==typeof t?(e,r)=>a(Object(n.b)(r,t)):(e,r)=>a(t(r)))}function s(e,t){return e.replace(/([\.$?*|{}\(\)\[\]\\\/\+\-^])/g,(e=>t&&-1!==t.indexOf(e)?e:"\\".concat(e)))}function l(e){for(var t=0,r=0;r<e.length;r++)t=(t<<5)-t+e.charCodeAt(r),t|=0;return t}function c(e){return(new DOMParser).parseFromString(e||"","text/html").body.innerText||""}},150:function(e,t,r){"use strict";var n,i=r(82),a=(r(80),r(81),r(88),r(85)),o=r(98),s=r(84),l=r(96),c=(r(83),r(86),r(87),r(90)),u=r(140),d=n=class extends c.a{constructor(e){super(e),this.end=null,this.start=null}static get allTime(){return p}static get empty(){return h}readEnd(e,t){return null!=t.end?new Date(t.end):null}writeEnd(e,t){t.end=e?e.getTime():null}get isAllTime(){return this.equals(n.allTime)}get isEmpty(){return this.equals(n.empty)}readStart(e,t){return null!=t.start?new Date(t.start):null}writeStart(e,t){t.start=e?e.getTime():null}clone(){return new n({end:this.end,start:this.start})}expandTo(e){if(this.isEmpty||this.isAllTime)return this.clone();var t=this.start?Object(u.e)(this.start,e):null,r=this.end?Object(u.c)(Object(u.e)(this.end,e),1,e):null;return new n({start:t,end:r})}intersection(e){var t,r,i,a,o,s,l,c;if(!e)return this.clone();if(this.isEmpty||e.isEmpty)return n.empty;if(this.isAllTime)return e.clone();if(e.isAllTime)return this.clone();var u,d,p=null!=(t=null==(r=this.start)?void 0:r.getTime())?t:-1/0,h=null!=(i=null==(a=this.end)?void 0:a.getTime())?i:1/0,b=null!=(o=null==(s=e.start)?void 0:s.getTime())?o:-1/0,m=null!=(l=null==(c=e.end)?void 0:c.getTime())?l:1/0;if(b>=p&&b<=h?u=b:p>=b&&p<=m&&(u=p),h>=b&&h<=m?d=h:m>=p&&m<=h&&(d=m),!isNaN(u)&&!isNaN(d)){var f=new n;return f.start=u===-1/0?null:new Date(u),f.end=d===1/0?null:new Date(d),f}return n.empty}offset(e,t){if(this.isEmpty||this.isAllTime)return this.clone();var r=new n,{start:i,end:a}=this;return i&&(r.start=Object(u.c)(i,e,t)),a&&(r.end=Object(u.c)(a,e,t)),r}equals(e){if(!e)return!1;var t=this.start?this.start.getTime():this.start,r=this.end?this.end.getTime():this.end,n=e.start?e.start.getTime():e.start,i=e.end?e.end.getTime():e.end;return t===n&&r===i}union(e){if(!e||e.isEmpty)return this.clone();if(this.isEmpty)return e.clone();if(this.isAllTime||e.isAllTime)return p.clone();var t=this.start&&e.start?new Date(Math.min(this.start.getTime(),e.start.getTime())):null,r=this.end&&e.end?new Date(Math.max(this.end.getTime(),e.end.getTime())):null;return new n({start:t,end:r})}};Object(i.a)([Object(a.b)({type:Date,json:{write:{allowNull:!0}}})],d.prototype,"end",void 0),Object(i.a)([Object(o.a)("end")],d.prototype,"readEnd",null),Object(i.a)([Object(l.a)("end")],d.prototype,"writeEnd",null),Object(i.a)([Object(a.b)({readOnly:!0,json:{read:!1}})],d.prototype,"isAllTime",null),Object(i.a)([Object(a.b)({readOnly:!0,json:{read:!1}})],d.prototype,"isEmpty",null),Object(i.a)([Object(a.b)({type:Date,json:{write:{allowNull:!0}}})],d.prototype,"start",void 0),Object(i.a)([Object(o.a)("start")],d.prototype,"readStart",null),Object(i.a)([Object(l.a)("start")],d.prototype,"writeStart",null);var p=new(d=n=Object(i.a)([Object(s.a)("esri.TimeExtent")],d)),h=new d({start:void 0,end:void 0}),b=d;t.a=b},158:function(e,t,r){"use strict";(function(e){var r="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof e?e:void 0;t.a=r}).call(this,r(172))},159:function(e,t,r){"use strict";var n=r(158),i=(r(80),r(124)),a={apiKey:void 0,applicationUrl:n.a.location&&n.a.location.href,assetsPath:"",fontsUrl:"https://static.arcgis.com/fonts",geometryService:null,geometryServiceUrl:"https://utility.arcgisonline.com/arcgis/rest/services/Geometry/GeometryServer",geoRSSServiceUrl:"https://utility.arcgis.com/sharing/rss",kmlServiceUrl:"https://utility.arcgis.com/sharing/kml",portalUrl:"https://www.arcgis.com",workers:{loaderConfig:{has:{},paths:{},map:{},packages:[]}},request:{httpsDomains:["arcgis.com","arcgisonline.com","esrikr.com","premiumservices.blackbridge.com","esripremium.accuweather.com","gbm.digitalglobe.com","firstlook.digitalglobe.com","msi.digitalglobe.com"],interceptors:[],maxUrlLength:2e3,proxyRules:[],proxyUrl:null,timeout:6e4,trustedServers:[],useIdentity:!0},log:{interceptors:[],level:null}};if(n.a.esriConfig&&(Object(i.a)(a,n.a.esriConfig,!0),delete a.has),!a.assetsPath){a.assetsPath="https://js.arcgis.com/".concat("4.19.0".slice(0,-2),"/@arcgis/core/assets")}a.baseUrl&&console.warn("[esri.config]","baseUrl has been replaced by assetsPath"),Object.defineProperty(a,"baseUrl",{set(){console.warn("[esri.config]","baseUrl has been replaced by assetsPath")}}),a.request.corsEnabledServers=[],a.request.corsEnabledServers.push=function(){return console.warn("[esri.config]","request.corsEnabledServers is not supported and will be removed in a future release. See http://esriurl.com/cors8664"),0},t.a=a},165:function(e,t,r){"use strict";function n(e){return e&&("function"==typeof e.on||"function"==typeof e.addEventListener)}function i(e,t,r){if(!n(e))throw new TypeError("target is not a Evented or EventTarget object");if("on"in e)return e.on(t,r);if(Array.isArray(t)){var i=t.slice();for(var a of i)e.addEventListener(a,r);return{remove(){for(var t of i)e.removeEventListener(t,r)}}}return e.addEventListener(t,r),{remove(){e.removeEventListener(t,r)}}}function a(e,t,r){if(!n(e))throw new TypeError("target is not a Evented or EventTarget object");if("once"in e)return e.once(t,r);var a=i(e,t,(t=>{a.remove(),r.call(e,t)}));return{remove(){a.remove()}}}r.d(t,"a",(function(){return s})),r.d(t,"b",(function(){return n})),r.d(t,"c",(function(){return i})),r.d(t,"d",(function(){return a}));var o={Win:"Meta",Scroll:"ScrollLock",Spacebar:" ",Down:"ArrowDown",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Del:"Delete",Apps:"ContextMenu",Esc:"Escape",Multiply:"*",Add:"+",Subtract:"-",Decimal:".",Divide:"/"};function s({key:e}){return o[e]||e}},167:function(e,t,r){"use strict";r.d(t,"a",(function(){return u})),r.d(t,"b",(function(){return c}));var n=r(82),i=r(85),a=r(84),o=r(97),s=r(115),l=r(297),c=e=>{var t=class extends e{destroy(){this.destroyed||(this.handles.destroy(),this.updatingHandles.destroy())}get handles(){return this._get("handles")||new s.a}get updatingHandles(){return this._get("updatingHandles")||new l.a}};return Object(n.a)([Object(i.b)({readOnly:!0})],t.prototype,"handles",null),Object(n.a)([Object(i.b)({readOnly:!0})],t.prototype,"updatingHandles",null),t=Object(n.a)([Object(a.a)("esri.core.HandleOwner")],t)},u=class extends(c(o.a)){};u=Object(n.a)([Object(a.a)("esri.core.HandleOwner")],u)},172:function(e,t){var r;r=function(){return this}();try{r=r||new Function("return this")()}catch(n){"object"===typeof window&&(r=window)}e.exports=r},180:function(e,t,r){"use strict";r.d(t,"a",(function(){return n})),r.d(t,"b",(function(){return i}));r(80);function n(e){}function i(e){return()=>e}},184:function(e,t,r){"use strict";r.d(t,"a",(function(){return n})),r.d(t,"b",(function(){return i})),r.d(t,"c",(function(){return l})),r.d(t,"d",(function(){return s}));var n=1e-6,i=Math.random,a=Math.PI/180,o=180/Math.PI;function s(e){return e*a}function l(e){return e*o}Object.freeze({__proto__:null,EPSILON:n,RANDOM:i,toRadian:s,toDegree:l,equals:function(e,t){return Math.abs(e-t)<=n*Math.max(1,Math.abs(e),Math.abs(t))}})},186:function(e,t,r){"use strict";r.d(t,"a",(function(){return y})),r.d(t,"b",(function(){return O}));var n=r(82),i=r(126),a=r(84),o=r(144),s=r(97),l=r(228),c=r(89),u=r(253),d=r(92);class p{constructor(){this._propertyOriginMap=new Map,this._originStores=new Array(o.a),this._values=new Map}clone(e){var t=this,r=new p,n=this._originStores[0];n&&n.forEach(((e,t)=>{r.set(t,Object(d.a)(e),0)}));for(var i=function(n){var i=t._originStores[n];i&&i.forEach(((t,i)=>{e&&e.has(i)||r.set(i,Object(d.a)(t),n)}))},a=2;a<o.a;a++)i(a);return r}get(e,t){var r=void 0===t?this._values:this._originStores[t];return r?r.get(e):void 0}keys(e){var t=null==e?this._values:this._originStores[e];return t?[...t.keys()]:[]}set(e,t,r=6){var n=this._originStores[r];if(n||(n=new Map,this._originStores[r]=n),n.set(e,t),!this._values.has(e)||Object(c.d)(this._propertyOriginMap.get(e))<=r){var i=this._values.get(e);return this._values.set(e,t),this._propertyOriginMap.set(e,r),i!==t}return!1}delete(e,t=6){var r=this._originStores[t];if(r){var n=r.get(e);if(r.delete(e),this._values.has(e)&&this._propertyOriginMap.get(e)===t){this._values.delete(e);for(var i=t-1;i>=0;i--){var a=this._originStores[i];if(a&&a.has(e)){this._values.set(e,a.get(e)),this._propertyOriginMap.set(e,i);break}}}return n}}has(e,t){var r=void 0===t?this._values:this._originStores[t];return!!r&&r.has(e)}revert(e,t){for(;t>0&&!this.has(e,t);)--t;var r=this._originStores[t],n=r&&r.get(e),i=this._values.get(e);return this._values.set(e,n),this._propertyOriginMap.set(e,t),i!==n}originOf(e){return this._propertyOriginMap.get(e)||0}forEach(e){this._values.forEach(e)}}var h=p,b=e=>{var t=class extends e{constructor(...e){super(...e);var t=Object(c.d)(Object(i.a)(this)),r=t.metadatas,n=t.store,a=new h;t.store=a,n.keys().forEach((e=>{a.set(e,n.get(e),0)})),Object.keys(r).forEach((e=>{t.internalGet(e)&&a.set(e,t.internalGet(e),0)}))}read(e,t){Object(u.a)(this,e,t)}getAtOrigin(e,t){var r=m(this),n=Object(o.d)(t);if("string"==typeof e)return r.get(e,n);var i={};return e.forEach((e=>{i[e]=r.get(e,n)})),i}originOf(e){return Object(o.b)(this.originIdOf(e))}originIdOf(e){return m(this).originOf(e)}revert(e,t){var r=m(this),n=Object(o.d)(t),a=Object(i.a)(this);("string"==typeof e?"*"===e?r.keys(n):[e]:e).forEach((e=>{a.propertyInvalidated(e),r.revert(e,n),a.propertyCommitted(e)}))}};return t=Object(n.a)([Object(a.a)("esri.core.ReadOnlyMultiOriginJSONSupport")],t)};function m(e){return Object(i.a)(e).store}var f=class extends(b(s.a)){};f=Object(n.a)([Object(a.a)("esri.core.ReadOnlyMultiOriginJSONSupport")],f);var v=e=>{var t=class extends e{constructor(...e){super(...e)}clear(e,t="user"){return g(this).delete(e,Object(o.d)(t))}write(e={},t){return Object(l.b)(this,e=e||{},t),e}setAtOrigin(e,t,r){Object(i.a)(this).setAtOrigin(e,t,Object(o.d)(r))}removeOrigin(e){var t=g(this),r=Object(o.d)(e),n=t.keys(r);for(var i of n)t.originOf(i)===r&&t.set(i,t.get(i,r),6)}updateOrigin(e,t){for(var r=g(this),n=Object(o.d)(t),i=this.get(e),a=n+1;a<o.a;++a)r.delete(e,a);r.set(e,i,n)}toJSON(e){return this.write({},e)}};return(t=Object(n.a)([Object(a.a)("esri.core.WriteableMultiOriginJSONSupport")],t)).prototype.toJSON.isDefaultToJSON=!0,t};function g(e){return Object(i.a)(e).store}var y=e=>{var t=class extends(v(b(e))){constructor(...e){super(...e)}};return t=Object(n.a)([Object(a.a)("esri.core.MultiOriginJSONSupport")],t)},O=class extends(y(s.a)){};O=Object(n.a)([Object(a.a)("esri.core.MultiOriginJSONSupport")],O)},218:function(e,t,r){"use strict";var n=r(7),i=r(82),a=(r(80),r(159)),o=r(81),s=(r(88),r(85)),l=r(84),c=r(93),u=r(83),d=(r(86),r(87),r(94)),p=r(99),h=r(103),b=(r(101),r(131)),m=r(266),f=r(106),v=r(185),g=0,y=o.a.getLogger("esri.layers.Layer"),O=class extends(b.a.EventedMixin(Object(m.a)(v.a))){constructor(){super(...arguments),this.attributionDataUrl=null,this.fullExtent=new h.a(-180,-90,180,90,p.a.WGS84),this.id=Date.now().toString(16)+"-layer-"+g++,this.legendEnabled=!0,this.listMode="show",this.opacity=1,this.parent=null,this.popupEnabled=!0,this.attributionVisible=!0,this.spatialReference=p.a.WGS84,this.title=null,this.type=null,this.url=null,this.visible=!0}static fromArcGISServerUrl(e){return Object(n.a)((function*(){var t="string"==typeof e?{url:e}:e,n=yield r.e(201).then(r.bind(null,632));try{return yield n.fromUrl(t)}catch(i){throw y.error("#fromArcGISServerUrl({ url: '"+t.url+"'})","Failed to create layer from arcgis server url",i),i}}))()}static fromPortalItem(e){return Object(n.a)((function*(){var t="portalItem"in e?e:{portalItem:e},n=yield r.e(169).then(r.bind(null,571));try{return yield n.fromItem(t)}catch(l){var i=t&&t.portalItem,o=i&&i.id||"unset",s=i&&i.portal&&i.portal.url||a.a.portalUrl;throw y.error("#fromPortalItem()","Failed to create layer from portal item (portal: '"+s+"', id: '"+o+"')",l),l}}))()}initialize(){this.when().catch((e=>{var t,r;Object(d.m)(e)||o.a.getLogger(this.declaredClass).error("#load()","Failed to load layer (title: '".concat(null!=(t=this.title)?t:"no title","', id: '").concat(null!=(r=this.id)?r:"no id","')"),{error:e})}))}destroy(){if(this.parent){var e=this,t=this.parent;"layers"in t&&t.layers.includes(e)?t.layers.remove(e):"tables"in t&&t.tables.includes(e)?t.tables.remove(e):"baseLayers"in t&&t.baseLayers.includes(e)?t.baseLayers.remove(e):"baseLayers"in t&&t.referenceLayers.includes(e)&&t.referenceLayers.remove(e)}}get hasAttributionData(){return null!=this.attributionDataUrl}get parsedUrl(){var e=this.url;return e?Object(u.J)(e):null}fetchAttributionData(){var e=this;return Object(n.a)((function*(){var t=e.attributionDataUrl;if(e.hasAttributionData&&t)return(yield Object(f.default)(t,{query:{f:"json"},responseType:"json"})).data;throw new c.a("layer:no-attribution-data","Layer does not have attribution data")}))()}};Object(i.a)([Object(s.b)({type:String})],O.prototype,"attributionDataUrl",void 0),Object(i.a)([Object(s.b)({type:h.a})],O.prototype,"fullExtent",void 0),Object(i.a)([Object(s.b)({readOnly:!0})],O.prototype,"hasAttributionData",null),Object(i.a)([Object(s.b)({type:String})],O.prototype,"id",void 0),Object(i.a)([Object(s.b)({type:Boolean,nonNullable:!0})],O.prototype,"legendEnabled",void 0),Object(i.a)([Object(s.b)({type:["show","hide","hide-children"]})],O.prototype,"listMode",void 0),Object(i.a)([Object(s.b)({type:Number,range:{min:0,max:1},nonNullable:!0})],O.prototype,"opacity",void 0),Object(i.a)([Object(s.b)()],O.prototype,"parent",void 0),Object(i.a)([Object(s.b)({readOnly:!0})],O.prototype,"parsedUrl",null),Object(i.a)([Object(s.b)({type:Boolean})],O.prototype,"popupEnabled",void 0),Object(i.a)([Object(s.b)({type:Boolean})],O.prototype,"attributionVisible",void 0),Object(i.a)([Object(s.b)({type:p.a})],O.prototype,"spatialReference",void 0),Object(i.a)([Object(s.b)({type:String})],O.prototype,"title",void 0),Object(i.a)([Object(s.b)({type:String,readOnly:!0,json:{read:!1}})],O.prototype,"type",void 0),Object(i.a)([Object(s.b)()],O.prototype,"url",void 0),Object(i.a)([Object(s.b)({type:Boolean,nonNullable:!0})],O.prototype,"visible",void 0);var j=O=Object(i.a)([Object(l.a)("esri.layers.Layer")],O);t.a=j},222:function(e,t,r){"use strict";var n,i=r(82),a=(r(80),r(81),r(88),r(85)),o=r(84),s=(r(83),r(86),r(87),r(90)),l=r(140),c=n=class extends s.a{constructor(e){super(e),this.value=0,this.unit="milliseconds"}toMilliseconds(){return this.value*l.b[this.unit]}clone(){return new n({value:this.value,unit:this.unit})}};Object(i.a)([Object(a.b)({type:Number,json:{write:!0},nonNullable:!0})],c.prototype,"value",void 0),Object(i.a)([Object(a.b)({type:l.d.apiValues,json:{type:l.d.jsonValues,read:l.d.read,write:l.d.write},nonNullable:!0})],c.prototype,"unit",void 0);var u=c=n=Object(i.a)([Object(o.a)("esri.TimeInterval")],c);t.a=u},237:function(e,t,r){"use strict";r.d(t,"a",(function(){return n}));var n=new(r(95).a)({esriFieldTypeSmallInteger:"small-integer",esriFieldTypeInteger:"integer",esriFieldTypeSingle:"single",esriFieldTypeDouble:"double",esriFieldTypeLong:"long",esriFieldTypeString:"string",esriFieldTypeDate:"date",esriFieldTypeOID:"oid",esriFieldTypeGeometry:"geometry",esriFieldTypeBlob:"blob",esriFieldTypeRaster:"raster",esriFieldTypeGUID:"guid",esriFieldTypeGlobalID:"global-id",esriFieldTypeXML:"xml"})},242:function(e,t,r){"use strict";r.d(t,"a",(function(){return h})),r.d(t,"b",(function(){return u})),r.d(t,"c",(function(){return m})),r.d(t,"d",(function(){return O})),r.d(t,"e",(function(){return y})),r.d(t,"f",(function(){return d})),r.d(t,"g",(function(){return p})),r.d(t,"h",(function(){return f})),r.d(t,"i",(function(){return v})),r.d(t,"j",(function(){return b})),r.d(t,"k",(function(){return g}));var n=r(89),i=r(83),a=r(258),o=["MapServer","ImageServer","FeatureServer","SceneServer","StreamServer","VectorTileServer"],s=new RegExp("^((?:https?:)?\\/\\/\\S+?\\/rest\\/services\\/(.+?)\\/(".concat(o.join("|"),"))(?:\\/(?:layers\\/)?(\\d+))?"),"i"),l=new RegExp("^((?:https?:)?\\/\\/\\S+?\\/([^\\/\\n]+)\\/(".concat(o.join("|"),"))(?:\\/(?:layers\\/)?(\\d+))?"),"i"),c=/(.*)\/(\d+)\/?$/i;function u(e){return!!s.test(e)}function d(e){var t=Object(i.J)(e),r=t.path.match(s)||t.path.match(l);if(!r)return null;var[,n,a,o,c]=r,u=a.indexOf("/");return{title:h(-1!==u?a.slice(u+1):a),serverType:o,sublayer:null!=c&&""!==c?parseInt(c,10):null,url:{path:n}}}function p(e){var t=Object(i.J)(e).path.match(c);return t?{serviceUrl:t[1],sublayerId:Number(t[2])}:null}function h(e){return(e=e.replace(/\s*[/_]+\s*/g," "))[0].toUpperCase()+e.slice(1)}function b(e,t){var r=[];if(e){var i=d(e);Object(n.k)(i)&&i.title&&r.push(i.title)}if(t){var a=h(t);r.push(a)}if(2===r.length){if(-1!==r[0].toLowerCase().indexOf(r[1].toLowerCase()))return r[0];if(-1!==r[1].toLowerCase().indexOf(r[0].toLowerCase()))return r[1]}return r.join(" - ")}function m(e){if(!e)return!1;var t=-1!==(e=e.toLowerCase()).indexOf(".arcgis.com/"),r=-1!==e.indexOf("//services")||-1!==e.indexOf("//tiles")||-1!==e.indexOf("//features");return t&&r}function f(e,t){return e?Object(i.H)(Object(i.G)(e,t)):e}function v(e){var{url:t}=e;if(!t)return{url:t};t=Object(i.G)(t,e.logger);var r,a=Object(i.J)(t),o=d(a.path);if(Object(n.k)(o))null!=o.sublayer&&null==e.layer.layerId&&(r=o.sublayer),t=o.url.path;else if(e.nonStandardUrlAllowed){var s=p(a.path);Object(n.k)(s)&&(t=s.serviceUrl,r=s.sublayerId)}return{url:Object(i.H)(t),layerId:r}}function g(e,t,r,n,o){Object(a.f)(t,n,"url",o),n.url&&null!=e.layerId&&(n.url=Object(i.y)(n.url,r,e.layerId.toString()))}function y(e){if(!e)return!1;var t=e.toLowerCase(),r=-1!==t.indexOf("/services/"),n=-1!==t.indexOf("/mapserver/wmsserver"),i=-1!==t.indexOf("/imageserver/wmsserver"),a=-1!==t.indexOf("/wmsserver");return r&&(n||i||a)}function O(e){if(!e)return!1;var t=new i.a(Object(i.z)(e)).authority.toLowerCase();return"server.arcgisonline.com"===t||"services.arcgisonline.com"===t}},295:function(e,t,r){"use strict";function n(e,t){if(e.forEach)e.forEach(t);else for(var r=0;r<e.length;r++)t(e[r],r,e)}function i(e,t,r){if(e.slice)return e.slice(t,r);void 0===t?t=0:(t<0&&(t+=e.length),t=Math.min(e.length,Math.max(0,t))),void 0===r?r=e.length:(r<0&&(r+=e.length),r=Math.min(e.length,Math.max(0,r)));for(var n=Math.max(0,r-t),i=new(0,e.constructor)(n),a=0;a<n;a++)i[a]=e[t+a];return i}function a(e){return e instanceof ArrayBuffer||e&&e.constructor&&"ArrayBuffer"===e.constructor.name}function o(e){return e instanceof Int8Array||e&&e.constructor&&"Int8Array"===e.constructor.name}function s(e){return e instanceof Uint8Array||e&&e.constructor&&"Uint8Array"===e.constructor.name}function l(e){return e instanceof Uint8ClampedArray||e&&e.constructor&&"Uint8ClampedArray"===e.constructor.name}function c(e){return e instanceof Int16Array||e&&e.constructor&&"Int16Array"===e.constructor.name}function u(e){return e instanceof Uint16Array||e&&e.constructor&&"Uint16Array"===e.constructor.name}function d(e){return e instanceof Int32Array||e&&e.constructor&&"Int32Array"===e.constructor.name}function p(e){return e instanceof Uint32Array||e&&e.constructor&&"Uint32Array"===e.constructor.name}function h(e){return e instanceof Float32Array||e&&e.constructor&&"Float32Array"===e.constructor.name}function b(e){return e instanceof Float64Array||e&&e.constructor&&"Float64Array"===e.constructor.name}function m(e){for(var t=new Array(e.length),r=0;r<e.length;r++)t[r]=e[r];return t}function f(e){return e?128+e.buffer.byteLength+64:0}r.d(t,"a",(function(){return f})),r.d(t,"b",(function(){return n})),r.d(t,"c",(function(){return a})),r.d(t,"d",(function(){return h})),r.d(t,"e",(function(){return b})),r.d(t,"f",(function(){return c})),r.d(t,"g",(function(){return d})),r.d(t,"h",(function(){return o})),r.d(t,"i",(function(){return u})),r.d(t,"j",(function(){return p})),r.d(t,"k",(function(){return s})),r.d(t,"l",(function(){return l})),r.d(t,"m",(function(){return i})),r.d(t,"n",(function(){return m}))},297:function(e,t,r){"use strict";r.d(t,"a",(function(){return h}));var n=r(82),i=r(89),a=r(240),o=r(85),s=r(84),l=r(241),c=r(344),u=r(97),d=r(115),p=r(108),h=class extends u.a{constructor(){super(...arguments),this.updating=!1,this.handleId=0,this.handles=new d.a,this.scheduleHandleId=0,this.pendingPromises=new Set}destroy(){this.removeAll(),this.handles.destroy()}add(e,t,r,n=0){var i=0!=(1&n),a=++this.handleId;i||this.installSyncUpdatingWatch(e,t,a);var o=0!=(2&n)?Object(p.a)(e,t,r,i):e.watch(t,r,i);return this.handles.add(o,a),{remove:()=>{this.handles.remove(a)}}}addOnCollectionPropertyChange(e,t,r,n=0){var i=0!=(2&n),a=++this.handleId;return this.handles.add([Object(p.b)(e,t,"after-changes",this.createSyncUpdatingCallback()),Object(p.b)(e,t,"change",r,i?e=>{r({added:e.items,removed:[],moved:[],target:e})}:void 0)],a),{remove:()=>{this.handles.remove(a)}}}addOnCollectionChange(e,t,r=0){var n=0!=(2&r),i=++this.handleId;return this.handles.add([e.on("after-changes",this.createSyncUpdatingCallback()),e.on("change",t)],i),n&&t({added:e.items,removed:[],moved:[],target:e}),{remove:()=>{this.handles.remove(i)}}}addPromise(e){if(Object(i.j)(e))return e;var t=++this.handleId;this.handles.add({remove:()=>{this.pendingPromises.delete(e)&&(0!==this.pendingPromises.size||this.handles.has(b)||this._set("updating",!1))}},t),this.pendingPromises.add(e),this._set("updating",!0);var r=()=>this.handles.remove(t);return e.then(r,r),e}removeAll(){this.pendingPromises.clear(),this.handles.removeAll(),this._set("updating",!1)}installSyncUpdatingWatch(e,t,r){var n=this.createSyncUpdatingCallback(),i=Object(c.a)((()=>Object(a.c)(e,t)),n);return this.handles.add(i,r),i}createSyncUpdatingCallback(){return()=>{this.handles.remove(b),++this.scheduleHandleId;var e=this.scheduleHandleId;this._get("updating")||this._set("updating",!0),this.handles.add(Object(l.b)((()=>{e===this.scheduleHandleId&&(this._set("updating",this.pendingPromises.size>0),this.handles.remove(b))})),b)}}};Object(n.a)([Object(o.b)({readOnly:!0})],h.prototype,"updating",void 0),h=Object(n.a)([Object(s.a)("esri.views.support.WatchUpdatingTracking")],h);var b=-42},301:function(e,t,r){"use strict";function n(e){return t=>{t.hasOwnProperty("_delegatedEventNames")||(t._delegatedEventNames=t._delegatedEventNames?t._delegatedEventNames.slice():[]);var r=t._delegatedEventNames,n=Array.isArray(e)?e:function(e){return e.split(",").map((e=>e.trim()))}(e);r.push(...n)}}r.d(t,"a",(function(){return n}))},314:function(e,t,r){"use strict";r.r(t);var n=r(7),i=r(91),a=r(82),o=(r(80),r(92)),s=r(89),l=r(81),c=r(88),u=r(85),d=r(98),p=r(84),h=r(93),b=r(83),m=(r(86),r(87),r(90)),f=r(103),v=r(162),g=r(185),y=r(252),O=r(116),j=r(97),w=l.a.getLogger("esri.portal.PortalItemResource"),k=class extends j.a{constructor(e){super(e),this.portalItem=null}normalizeCtorArgs(e){return e&&e.portalItem&&e.path?Object(i.a)(Object(i.a)({},e),{},{path:this.normalizePath(e.path,e.portalItem)}):e}set path(e){Object(s.k)(e)&&Object(b.s)(e)?w.error("portalitemresource:invalid-path","A portal item resource path must be relative"):this._set("path",e)}_castPath(e){return this.normalizePath(e,this.portalItem)}get url(){return this.portalItem&&this.path?"".concat(this.portalItem.itemUrl,"/resources/").concat(this.path):null}get itemRelativeUrl(){return this.portalItem&&this.path?"./resources/".concat(this.path):null}fetch(e="json",t){var r=this.url;if(Object(s.j)(r))throw new h.a("portal-item-resource:fetch","Portal item resource does not refer to a valid item or path");return this.portalItem.portal._request(r,{responseType:e,signal:Object(s.i)(t,"signal")})}update(e,t){var i=this;return Object(n.a)((function*(){return(yield r.e(19).then(r.bind(null,778))).addOrUpdateResource(i,"update",e,t)}))()}hasPath(){return Object(s.k)(this.path)}normalizePath(e,t){return Object(s.j)(e)?e:(e=e.replace(/^\/+/,""),Object(s.k)(t)&&Object(b.s)(e)&&(e=Object(b.B)(e,t.itemUrl)),e.replace(/^\/+/,"").replace(/^(\.\/)?resources\//,""))}};Object(a.a)([Object(u.b)()],k.prototype,"portalItem",void 0),Object(a.a)([Object(u.b)({type:String,value:null})],k.prototype,"path",null),Object(a.a)([Object(O.a)("path")],k.prototype,"_castPath",null),Object(a.a)([Object(u.b)({type:String,readOnly:!0})],k.prototype,"url",null),Object(a.a)([Object(u.b)({type:String,readOnly:!0})],k.prototype,"itemRelativeUrl",null);var _=k=Object(a.a)([Object(p.a)("esri.portal.PortalItemResource")],k),S=class extends j.a{constructor(e){super(e),this.created=null,this.rating=null}};Object(a.a)([Object(u.b)()],S.prototype,"created",void 0),Object(a.a)([Object(u.b)()],S.prototype,"rating",void 0);var I,x=S=Object(a.a)([Object(p.a)("esri.portal.PortalRating")],S),T=I=class extends(Object(m.b)(g.a)){constructor(e){super(e),this.access=null,this.accessInformation=null,this.applicationProxies=null,this.avgRating=null,this.categories=null,this.created=null,this.culture=null,this.description=null,this.extent=null,this.groupCategories=null,this.id=null,this.itemControl=null,this.licenseInfo=null,this.modified=null,this.name=null,this.numComments=null,this.numRatings=null,this.numViews=null,this.owner=null,this.ownerFolder=null,this.portal=null,this.screenshots=null,this.size=null,this.snippet=null,this.sourceJSON=null,this.tags=null,this.title=null,this.type=null,this.typeKeywords=null,this.url=null}static from(e){return Object(c.d)(I,e)}destroy(){this.portal=null}get displayName(){var e=this.type,t=this.typeKeywords||[],r=e;return"Feature Service"===e||"Feature Collection"===e?r=t.indexOf("Table")>-1?"Table":t.indexOf("Route Layer")>-1?"Route Layer":t.indexOf("Markup")>-1?"Markup":"Feature Layer":"Image Service"===e?r=t.indexOf("Elevation 3D Layer")>-1?"Elevation Layer":t.indexOf("Tiled Imagery")>-1?"Tiled Imagery Layer":"Imagery Layer":"Scene Service"===e?r="Scene Layer":"Scene Package"===e?r="Scene Layer Package":"Stream Service"===e?r="Feature Layer":"Geoprocessing Service"===e&&this.portal&&this.portal.isPortal?r=t.indexOf("Web Tool")>-1?"Tool":"Geoprocessing Service":"Geocoding Service"===e?r="Locator":"Geoenrichment Service"===e?r="GeoEnrichment Service":"Microsoft Powerpoint"===e?r="Microsoft PowerPoint":"GeoJson"===e?r="GeoJSON":"Globe Service"===e?r="Globe Layer":"Vector Tile Service"===e?r="Tile Layer":"netCDF"===e?r="NetCDF":"Map Service"===e?r=-1===t.indexOf("Spatiotemporal")&&(t.indexOf("Hosted Service")>-1||t.indexOf("Tiled")>-1)&&-1===t.indexOf("Relational")?"Tile Layer":"Map Image Layer":e&&e.toLowerCase().indexOf("add in")>-1?r=e.replace(/(add in)/gi,"Add-In"):"datastore catalog service"===e?r="Big Data File Share":"Compact Tile Package"===e&&(r="Tile Package (tpkx)"),r}readExtent(e){return e&&e.length?new f.a(e[0][0],e[0][1],e[1][0],e[1][1]):null}get iconUrl(){var e,t=this.type&&this.type.toLowerCase()||"",r=this.typeKeywords||[],n=!1,i=!1,a=!1,o=!1,s=!1,l=!1;return t.indexOf("service")>0||"feature collection"===t||"kml"===t||"wms"===t||"wmts"===t||"wfs"===t?(n=r.indexOf("Hosted Service")>-1,"feature service"===t||"feature collection"===t||"kml"===t||"wfs"===t?(i=r.indexOf("Table")>-1,a=r.indexOf("Route Layer")>-1,o=r.indexOf("Markup")>-1,s=-1!==r.indexOf("Spatiotemporal"),l=-1!==r.indexOf("UtilityNetwork"),e=s&&i?"spatiotemporaltable":i?"table":a?"routelayer":o?"markup":s?"spatiotemporal":n?"featureshosted":l?"utilitynetwork":"features"):e="map service"===t||"wms"===t||"wmts"===t?n||r.indexOf("Tiled")>-1||"wmts"===t?"maptiles":"mapimages":"scene service"===t?r.indexOf("Line")>-1?"sceneweblayerline":r.indexOf("3DObject")>-1?"sceneweblayermultipatch":r.indexOf("Point")>-1?"sceneweblayerpoint":r.indexOf("IntegratedMesh")>-1?"sceneweblayermesh":r.indexOf("PointCloud")>-1?"sceneweblayerpointcloud":r.indexOf("Polygon")>-1?"sceneweblayerpolygon":r.indexOf("Building")>-1?"sceneweblayerbuilding":"sceneweblayer":"image service"===t?r.indexOf("Elevation 3D Layer")>-1?"elevationlayer":r.indexOf("Tiled Imagery")>-1?"tiledimagerylayer":"imagery":"stream service"===t?"streamlayer":"vector tile service"===t?"vectortile":"datastore catalog service"===t?"datastorecollection":"geocoding service"===t?"geocodeservice":"geoprocessing service"===t&&r.indexOf("Web Tool")>-1&&this.portal&&this.portal.isPortal?"tool":"layers"):e="web map"===t||"cityengine web scene"===t?"maps":"web scene"===t?r.indexOf("ViewingMode-Local")>-1?"webscenelocal":"websceneglobal":"web mapping application"===t||"mobile application"===t||"application"===t||"operation view"===t||"desktop application"===t?"apps":"map document"===t||"map package"===t||"published map"===t||"scene document"===t||"globe document"===t||"basemap package"===t||"mobile basemap package"===t||"mobile map package"===t||"project package"===t||"project template"===t||"pro map"===t||"layout"===t||"layer"===t&&r.indexOf("ArcGIS Pro")>-1||"explorer map"===t&&r.indexOf("Explorer Document")?"mapsgray":"service definition"===t||"csv"===t||"shapefile"===t||"cad drawing"===t||"geojson"===t||"360 vr experience"===t||"netcdf"===t||"administrative report"===t?"datafiles":"explorer add in"===t||"desktop add in"===t||"windows viewer add in"===t||"windows viewer configuration"===t?"appsgray":"arcgis pro add in"===t||"arcgis pro configuration"===t?"addindesktop":"rule package"===t||"file geodatabase"===t||"sqlite geodatabase"===t||"csv collection"===t||"kml collection"===t||"windows mobile package"===t||"map template"===t||"desktop application template"===t||"gml"===t||"arcpad package"===t||"code sample"===t||"form"===t||"document link"===t||"earth configuration"===t||"operations dashboard add in"===t||"rules package"===t||"image"===t||"workflow manager package"===t||"explorer map"===t&&r.indexOf("Explorer Mapping Application")>-1||r.indexOf("Document")>-1?"datafilesgray":"network analysis service"===t||"geoprocessing service"===t||"geodata service"===t||"geometry service"===t||"geoprocessing package"===t||"locator package"===t||"geoprocessing sample"===t||"workflow manager service"===t?"toolsgray":"layer"===t||"layer package"===t||"explorer layer"===t?"layersgray":"scene package"===t?"scenepackage":"mobile scene package"===t?"mobilescenepackage":"tile package"===t||"compact tile package"===t?"tilepackage":"task file"===t?"taskfile":"report template"===t?"report-template":"statistical data collection"===t?"statisticaldatacollection":"insights workbook"===t?"workbook":"insights model"===t?"insightsmodel":"insights page"===t?"insightspage":"insights theme"===t?"insightstheme":"hub initiative"===t?"hubinitiative":"hubpage"===t?"hubpage":"hub event"===t?"hubevent":"hub site application"===t?"hubsite":"relational database connection"===t?"relationaldatabaseconnection":"big data file share"===t?"datastorecollection":"image collection"===t?"imagecollection":"style"===t?"style":"desktop style"===t?"desktopstyle":"dashboard"===t?"dashboard":"raster function template"===t?"rasterprocessingtemplate":"vector tile package"===t?"vectortilepackage":"ortho mapping project"===t?"orthomappingproject":"ortho mapping template"===t?"orthomappingtemplate":"solution"===t?"solutions":"geopackage"===t?"geopackage":"deep learning package"===t?"deeplearningpackage":"real time analytic"===t?"realtimeanalytics":"big data analytic"===t?"bigdataanalytics":"feed"===t?"feed":"excalibur imagery project"===t?"excaliburimageryproject":"notebook"===t?"notebook":"storymap"===t?"storymap":"survey123 add in"===t?"survey123addin":"mission"===t?"mission":"mission report"===t?"missionreport":"quickcapture project"===t?"quickcaptureproject":"pro report"===t?"proreport":"urban model"===t?"urbanmodel":"web experience"===t?"experiencebuilder":"web experience template"===t?"webexperiencetemplate":"workflow"===t?"workflow":"insights script"===t?"insightsscript":"kernel gateway connection"===t?"kernelgatewayconnection":"hub initiative template"===t?"hubinitiativetemplate":"storymap theme"===t?"storymaptheme":"knowledge graph"===t?"knowledgegraph":"maps",e?Object(v.a)("esri/images/portal/"+e+"16.png"):null}get isLayer(){return["Map Service","Feature Service","Feature Collection","Scene Service","Image Service","Stream Service","Vector Tile Service","WMTS","WMS"].indexOf(this.type)>-1}get itemUrl(){var e=this.get("portal.restUrl");return e?e+"/content/items/"+this.id:null}get thumbnailUrl(){var e=this.itemUrl,t=this.thumbnail;return e&&t?this.portal._normalizeUrl("".concat(e,"/info/").concat(t,"?f=json")):null}get userItemUrl(){var e=this.get("portal.restUrl");if(!e)return null;var t=this.owner||this.get("portal.user.username");return t?"".concat(e,"/content/users/").concat(this.ownerFolder?"".concat(t,"/").concat(this.ownerFolder):t,"/items/").concat(this.id):null}load(e){this.portal||(this.portal=y.a.getDefault());var t=this.portal.load(e).then((()=>this.sourceJSON?this.sourceJSON:this.id&&this.itemUrl?this.portal._request(this.itemUrl,{signal:Object(s.k)(e)?e.signal:null}):{})).then((e=>{this.sourceJSON=e,this.read(e)}));return this.addResolvingPromise(t),Promise.resolve(this)}addRating(e){var t={method:"post",query:{}};return e instanceof x&&(e=e.rating),isNaN(e)||"number"!=typeof e||(t.query.rating=e),this.portal._request(this.itemUrl+"/addRating",t).then((()=>new x({rating:e,created:new Date})))}clone(){var e={access:this.access,accessInformation:this.accessInformation,applicationProxies:Object(o.a)(this.applicationProxies),avgRating:this.avgRating,categories:Object(o.a)(this.categories),created:Object(o.a)(this.created),culture:this.culture,description:this.description,extent:Object(o.a)(this.extent),groupCategories:Object(o.a)(this.groupCategories),id:this.id,itemControl:this.itemControl,licenseInfo:this.licenseInfo,modified:Object(o.a)(this.modified),name:this.name,numComments:this.numComments,numRatings:this.numRatings,numViews:this.numViews,owner:this.owner,ownerFolder:this.ownerFolder,portal:this.portal,screenshots:Object(o.a)(this.screenshots),size:this.size,snippet:this.snippet,tags:Object(o.a)(this.tags),thumbnail:this.thumbnail,title:this.title,type:this.type,typeKeywords:Object(o.a)(this.typeKeywords),url:this.url};return this.loaded&&(e.loadStatus="loaded"),new I({sourceJSON:this.sourceJSON}).set(e)}createPostQuery(){var e=this.toJSON();for(var t in e)"tags"===t&&null!==e[t]&&(e[t]=e[t].join(", ")),"typeKeywords"===t&&null!==e[t]&&(e[t]=e[t].join(", ")),"extent"===t&&e[t]&&(e[t]=JSON.stringify(e[t]));return e}deleteRating(){return this.portal._request(this.itemUrl+"/deleteRating",{method:"post"}).then((()=>{}))}fetchData(e="json",t){return this.portal._request(this.itemUrl+"/data",Object(i.a)({responseType:e},t))}fetchRating(e){return this.portal._request(this.itemUrl+"/rating",e).then((e=>null!=e.rating?(e.created=new Date(e.created),new x(e)):null))}fetchRelatedItems(e,t){return this.portal._requestToTypedArray(this.itemUrl+"/relatedItems",Object(i.a)({query:e},t),I)}getThumbnailUrl(e){var t=this.thumbnailUrl;return t&&e&&(t+="&w=".concat(e)),t}reload(){return this.portal._request(this.itemUrl,{cacheBust:!0}).then((e=>(this.sourceJSON=e,this.read(e),this)))}update(e){return this.id?this.load().then((()=>this.portal._signIn())).then((()=>{var t=e&&e.data,r={method:"post"};for(var n in r.query=this.createPostQuery(),r.query)null===r.query[n]&&(r.query[n]="");return r.query.clearEmptyFields=!0,null!=t&&("string"==typeof t?r.query.text=t:"object"==typeof t&&(r.query.text=JSON.stringify(t))),this.portal._request("".concat(this.userItemUrl,"/update"),r).then((()=>this.reload()))})):Promise.reject(new h.a("portal:item-does-not-exist","The item does not exist yet and cannot be updated"))}updateThumbnail(e){return this.id?this.load().then((()=>this.portal._signIn())).then((()=>{var t=e.thumbnail,r=e.filename,n={method:"post"};if("string"==typeof t)Object(b.u)(t)?n.query={data:t}:n.query={url:Object(b.z)(t)},Object(s.k)(r)&&(n.query.filename=r);else{var i=new FormData;Object(s.k)(r)?i.append("file",t,r):i.append("file",t),n.body=i}return this.portal._request("".concat(this.userItemUrl,"/updateThumbnail"),n).then((()=>this.reload()))})):Promise.reject(new h.a("portal:item-does-not-exist","The item does not exist yet and cannot be updated"))}fetchResources(e={},t){var i=this;return Object(n.a)((function*(){return(yield r.e(19).then(r.bind(null,778))).fetchResources(i,e,t)}))()}addResource(e,t,i){var a=this;return Object(n.a)((function*(){var n=yield r.e(19).then(r.bind(null,778));return e.portalItem=a,n.addOrUpdateResource(e,"add",t,i)}))()}removeResource(e,t){var i=this;return Object(n.a)((function*(){var n=yield r.e(19).then(r.bind(null,778));if(e.portalItem&&e.portalItem.itemUrl!==i.itemUrl)throw new h.a("removeresource:portal-item-mismatch","The portal item associated with the provided resource does not match the item");return n.removeResource(i,e,t)}))()}removeAllResources(e){var t=this;return Object(n.a)((function*(){return(yield r.e(19).then(r.bind(null,778))).removeAllResources(t,e)}))()}resourceFromPath(e){return new _({portalItem:this,path:e})}toJSON(){var e=this.extent,t={created:this.created&&this.created.getTime(),description:this.description,extent:e&&[[e.xmin,e.ymin],[e.xmax,e.ymax]],id:this.id,modified:this.modified&&this.modified.getTime(),name:this.name,owner:this.owner,ownerFolder:this.ownerFolder,snippet:this.snippet,tags:this.tags,thumbnail:this.thumbnail,title:this.title,type:this.type,typeKeywords:this.typeKeywords,url:this.url};return Object(o.c)(t)}static fromJSON(e){if(!e)return null;if(e.declaredClass)throw new Error("JSON object is already hydrated");return new I({sourceJSON:e})}_getPostQuery(){var e=this.toJSON();for(var t in e)"tags"===t&&null!==e[t]&&(e[t]=e[t].join(", ")),"typeKeywords"===t&&null!==e[t]&&(e[t]=e[t].join(", ")),"extent"===t&&e[t]&&(e[t]=JSON.stringify(e[t]));return e}};Object(a.a)([Object(u.b)({type:["private","shared","org","public"]})],T.prototype,"access",void 0),Object(a.a)([Object(u.b)()],T.prototype,"accessInformation",void 0),Object(a.a)([Object(u.b)({json:{read:{source:"appProxies"}}})],T.prototype,"applicationProxies",void 0),Object(a.a)([Object(u.b)()],T.prototype,"avgRating",void 0),Object(a.a)([Object(u.b)()],T.prototype,"categories",void 0),Object(a.a)([Object(u.b)({type:Date})],T.prototype,"created",void 0),Object(a.a)([Object(u.b)()],T.prototype,"culture",void 0),Object(a.a)([Object(u.b)()],T.prototype,"description",void 0),Object(a.a)([Object(u.b)({readOnly:!0})],T.prototype,"displayName",null),Object(a.a)([Object(u.b)({type:f.a})],T.prototype,"extent",void 0),Object(a.a)([Object(d.a)("extent")],T.prototype,"readExtent",null),Object(a.a)([Object(u.b)()],T.prototype,"groupCategories",void 0),Object(a.a)([Object(u.b)({readOnly:!0})],T.prototype,"iconUrl",null),Object(a.a)([Object(u.b)()],T.prototype,"id",void 0),Object(a.a)([Object(u.b)({readOnly:!0})],T.prototype,"isLayer",null),Object(a.a)([Object(u.b)()],T.prototype,"itemControl",void 0),Object(a.a)([Object(u.b)({readOnly:!0})],T.prototype,"itemUrl",null),Object(a.a)([Object(u.b)()],T.prototype,"licenseInfo",void 0),Object(a.a)([Object(u.b)({type:Date})],T.prototype,"modified",void 0),Object(a.a)([Object(u.b)()],T.prototype,"name",void 0),Object(a.a)([Object(u.b)()],T.prototype,"numComments",void 0),Object(a.a)([Object(u.b)()],T.prototype,"numRatings",void 0),Object(a.a)([Object(u.b)()],T.prototype,"numViews",void 0),Object(a.a)([Object(u.b)()],T.prototype,"owner",void 0),Object(a.a)([Object(u.b)()],T.prototype,"ownerFolder",void 0),Object(a.a)([Object(u.b)({type:y.a})],T.prototype,"portal",void 0),Object(a.a)([Object(u.b)()],T.prototype,"screenshots",void 0),Object(a.a)([Object(u.b)()],T.prototype,"size",void 0),Object(a.a)([Object(u.b)()],T.prototype,"snippet",void 0),Object(a.a)([Object(u.b)()],T.prototype,"sourceJSON",void 0),Object(a.a)([Object(u.b)()],T.prototype,"tags",void 0),Object(a.a)([Object(u.b)()],T.prototype,"thumbnail",void 0),Object(a.a)([Object(u.b)({readOnly:!0})],T.prototype,"thumbnailUrl",null),Object(a.a)([Object(u.b)()],T.prototype,"title",void 0),Object(a.a)([Object(u.b)()],T.prototype,"type",void 0),Object(a.a)([Object(u.b)()],T.prototype,"typeKeywords",void 0),Object(a.a)([Object(u.b)()],T.prototype,"url",void 0),Object(a.a)([Object(u.b)({readOnly:!0})],T.prototype,"userItemUrl",null);var E=T=I=Object(a.a)([Object(p.a)("esri.portal.PortalItem")],T);t.default=E},330:function(e,t,r){"use strict";r.d(t,"a",(function(){return c})),r.d(t,"b",(function(){return y})),r.d(t,"c",(function(){return g})),r.d(t,"d",(function(){return u})),r.d(t,"e",(function(){return s})),r.d(t,"f",(function(){return o})),r.d(t,"g",(function(){return b})),r.d(t,"h",(function(){return d})),r.d(t,"i",(function(){return p})),r.d(t,"j",(function(){return l}));var n=r(110),i=r(104),a=r(111);function o(e){var t=e[0]*e[0]+e[4]*e[4]+e[8]*e[8],r=e[1]*e[1]+e[5]*e[5]+e[9]*e[9],n=e[2]*e[2]+e[6]*e[6]+e[10]*e[10];return Math.sqrt(Math.max(Math.max(t,r),n))}function s(e,t,r){r=r||e;var n=Object(a.g)(e,t);Object(a.v)(r,e[0]-n*t[0],e[1]-n*t[1],e[2]-n*t[2]),Object(a.q)(r,r)}function l(e,t,r){Math.abs(e[0])>Math.abs(e[1])?Object(a.v)(t,0,1,0):Object(a.v)(t,1,0,0),Object(a.f)(r,e,t),Object(a.q)(t,t),Object(a.f)(t,r,e),Object(a.q)(r,r)}function c(e,t){var r=Object(a.o)(e),i=Object(n.c)(e[2]/r),o=Math.atan2(e[1]/r,e[0]/r);return Object(a.v)(t,r,i,o),t}function u(e,t,r){var n=r[0]-t[0],i=r[1]-t[1],a=r[2]-t[2],o=n*n+i*i+a*a;return o?(o=1/Math.sqrt(o),e[0]=n*o,e[1]=i*o,e[2]=a*o,e):(e[0]=0,e[1]=0,e[2]=0,e)}function d(e,t,r,n=Object(i.e)()){var o=Object(a.o)(e),s=Object(a.o)(t),l=Object(a.g)(e,t)/(o*s);if(l<.9999999999999999){var c=Math.acos(l),u=((1-r)*o+r*s)/Math.sin(c),d=u/o*Math.sin((1-r)*c),p=u/s*Math.sin(r*c);return Object(a.d)(O,e,d),Object(a.d)(j,t,p),Object(a.e)(n,O,j)}return Object(a.h)(n,e,t,r)}function p(e,t,r,n=Object(i.e)(),o=Object(i.e)()){var s=Object(a.o)(e),l=Object(a.o)(t),c=Object(a.g)(e,t)/(s*l);if(c<.9999999999999999){var u=Math.acos(c),d=Math.sin(u),p=Math.sin(r*u),h=Math.sin((1-r)*u),b=(1-r)*s+r*l,m=b/d,f=m/l*p;Object(a.d)(O,e,m/s*h),Object(a.d)(j,t,f),Object(a.e)(n,O,j);var v=1/s*(-Math.cos((1-r)*u)*u*b+h*(-s+l));Object(a.d)(O,e,v);var g=1/l*(Math.cos(r*u)*u*b+p*(-s+l));return Object(a.d)(j,t,g),Object(a.e)(o,O,j),Object(a.d)(o,o,1/d),o}return Object(a.h)(n,e,t,r),Object(a.i)(o,t,e),Object(a.q)(o,o),o}class h{constructor(e,t){this.min=e,this.max=t,this.range=t-e}ndiff(e,t=0){return Math.ceil((e-t)/this.range)*this.range+t}_normalize(e,t,r,n=0,i=!1){return(r-=n)<e?r+=this.ndiff(e-r):r>t&&(r-=this.ndiff(r-t)),i&&r===t&&(r=e),r+n}normalize(e,t=0,r=!1){return this._normalize(this.min,this.max,e,t,r)}clamp(e,t=0){return Object(n.d)(e-t,this.min,this.max)+t}monotonic(e,t,r){return e<t?t:t+this.ndiff(e-t,r)}minimalMonotonic(e,t,r){return this._normalize(e,e+this.range,t,r)}center(e,t,r){return t=this.monotonic(e,t,r),this.normalize((e+t)/2,r)}diff(e,t,r){return this.monotonic(e,t,r)-e}shortestSignedDiff(e,t){e=this.normalize(e);var r=(t=this.normalize(t))-e,n=t<e?this.minimalMonotonic(e,t)-e:t-this.minimalMonotonic(t,e);return Math.abs(r)<Math.abs(n)?r:n}contains(e,t,r){return t=this.minimalMonotonic(e,t),(r=this.minimalMonotonic(e,r))>e&&r<t}}function b(e,t,r,n){Object(a.i)(m,t,e),Object(a.i)(f,r,e),Object(a.f)(n,m,f),Object(a.q)(n,n),n[3]=-Object(a.g)(e,n)}var m=Object(i.e)(),f=Object(i.e)();function v(e){for(var t in e){var r=e[t];r instanceof Function&&(e[t]=r.bind(e))}return e}v(new h(0,2*Math.PI));var g=v(new h(-Math.PI,Math.PI)),y=v(new h(0,360)),O=(Object(i.e)(),Object(i.e)()),j=Object(i.e)()},409:function(e,t,r){"use strict";var n=r(124);class i{constructor(e,t,r){this.name=e,this.details=r,this.message=void 0,this instanceof i&&(this.message=t&&function(e,t){return e.replace(/\$\{([^\s\:\}]*)(?:\:([^\s\:\}]+))?\}/g,(function(e,r){if(""===r)return"$";var i=Object(n.b)(r,t),a=null==i?"":i;if(void 0===a)throw new Error('could not find key "'.concat(r,'" in template'));return a.toString()}))}(t,r)||"")}toString(){return"["+this.name+"]: "+this.message}}t.a=i},455:function(e,t,r){"use strict";var n=r(158);var i,a=(i=n.a,{setTimeout:(e,t)=>{var r=i.setTimeout(e,t);return{remove:()=>i.clearTimeout(r)}}});t.a=a},499:function(e,t,r){"use strict";var n=r(82),i=r(85),a=r(84),o=r(107),s=r(115),l=class extends o.a{constructor(e){super(e),this._handles=new s.a,this.root=null}initialize(){this._handles.add(this.rootCollectionNames.map((e=>this.watch("root."+e,(()=>this.updateCollections()),!0)))),this.updateCollections()}destroy(){this.root=null,this.refresh(),this._handles.destroy(),this._handles=null}updateCollections(){this._collections=this.rootCollectionNames.map((e=>this.get("root."+e))).filter((e=>null!=e)),this.refresh()}refresh(){var e=this._handles;e.remove("collections");var t=new Array,r=0;for(var n of this._collections)r=this._processCollection(t,r,n);for(var i of(this.splice(r,this.length),t))e.add(i.on("after-changes",(()=>this.refresh())),"collections")}_createNewInstance(e){return new o.a(e)}_processCollection(e,t,r){return r?(e.push(r),r.forEach((r=>{if(r){if(!this.itemFilterFunction||this.itemFilterFunction(r)){var n=this.indexOf(r,t);n>=0?n!==t&&this.reorder(r,t):this.add(r,t),++t}this.getChildrenFunction&&(t=this._processCollection(e,t,this.getChildrenFunction(r)))}})),t):t}};Object(n.a)([Object(i.b)()],l.prototype,"rootCollectionNames",void 0),Object(n.a)([Object(i.b)()],l.prototype,"root",void 0),Object(n.a)([Object(i.b)()],l.prototype,"getChildrenFunction",void 0),Object(n.a)([Object(i.b)()],l.prototype,"itemFilterFunction",void 0);var c=l=Object(n.a)([Object(a.a)("esri.core.CollectionFlattener")],l);t.a=c},501:function(e,t,r){"use strict";r.d(t,"a",(function(){return o}));var n=r(82),i=(r(80),r(81),r(88),r(85)),a=r(84),o=(r(83),r(86),r(87),e=>{var t=class extends e{constructor(...e){super(...e),this.goToOverride=null,this.view=null}callGoTo(e){var{view:t}=this;return this.goToOverride?this.goToOverride(t,e):t.goTo(e.target,e.options)}};return Object(n.a)([Object(i.b)()],t.prototype,"goToOverride",void 0),Object(n.a)([Object(i.b)()],t.prototype,"view",void 0),t=Object(n.a)([Object(a.a)("esri.widgets.support.GoTo")],t)})},545:function(e,t,r){"use strict";var n=r(82),i=(r(80),r(81),r(88),r(85)),a=r(84),o=(r(83),r(86),r(87),r(90)),s=r(100),l=class extends o.a{constructor(e){super(e),this.geometries=null,this.outSpatialReference=null,this.transformation=null,this.transformForward=null}toJSON(){var e=this.geometries.map((function(e){return e.toJSON()})),t=this.geometries[0],r={};return r.outSR=this.outSpatialReference.wkid||JSON.stringify(this.outSpatialReference.toJSON()),r.inSR=t.spatialReference.wkid||JSON.stringify(t.spatialReference.toJSON()),r.geometries=JSON.stringify({geometryType:Object(s.c)(t),geometries:e}),this.transformation&&(r.transformation=this.transformation.wkid||JSON.stringify(this.transformation)),null!=this.transformForward&&(r.transformForward=this.transformForward),r}};Object(n.a)([Object(i.b)()],l.prototype,"geometries",void 0),Object(n.a)([Object(i.b)({json:{read:{source:"outSR"}}})],l.prototype,"outSpatialReference",void 0),Object(n.a)([Object(i.b)()],l.prototype,"transformation",void 0),Object(n.a)([Object(i.b)()],l.prototype,"transformForward",void 0);var c=l=Object(n.a)([Object(a.a)("esri.tasks.support.ProjectParameters")],l);t.a=c},559:function(e,t,r){"use strict";var n,i=r(82),a=(r(80),r(89)),o=(r(81),r(85)),s=r(116),l=r(84),c=(r(83),r(86),r(87),r(90)),u=r(100),d=r(101),p=r(88),h=r(98),b=r(96),m=r(113),f=r(110),v=r(330),g=n=class extends c.a{constructor(...e){super(...e),this.position=new m.a([0,0,0]),this.heading=0,this.tilt=0,this.fov=55}normalizeCtorArgs(e,t,r,n){if(e&&"object"==typeof e&&("x"in e||Array.isArray(e))){var i={position:e};return null!=t&&(i.heading=t),null!=r&&(i.tilt=r),null!=n&&(i.fov=n),i}return e}writePosition(e,t,r,n){var i=e.clone();i.x=Object(p.i)(e.x||0),i.y=Object(p.i)(e.y||0),i.z=e.hasZ?Object(p.i)(e.z||0):e.z,t[r]=i.write(null,n)}readPosition(e,t){var r=new m.a;return r.read(e,t),r.x=Object(p.i)(r.x||0),r.y=Object(p.i)(r.y||0),r.z=r.hasZ?Object(p.i)(r.z||0):r.z,r}equals(e){return!!e&&this.tilt===e.tilt&&this.heading===e.heading&&this.fov===e.fov&&this.position.equals(e.position)}clone(){return new n({position:this.position.clone(),heading:this.heading,tilt:this.tilt,fov:this.fov})}};Object(i.a)([Object(o.b)({type:m.a,json:{write:{isRequired:!0}}})],g.prototype,"position",void 0),Object(i.a)([Object(b.a)("position")],g.prototype,"writePosition",null),Object(i.a)([Object(h.a)("position")],g.prototype,"readPosition",null),Object(i.a)([Object(o.b)({type:Number,nonNullable:!0,json:{write:{isRequired:!0}}}),Object(s.a)((e=>v.b.normalize(Object(p.i)(e))))],g.prototype,"heading",void 0),Object(i.a)([Object(o.b)({type:Number,nonNullable:!0,json:{write:{isRequired:!0}}}),Object(s.a)((e=>Object(f.d)(Object(p.i)(e),-180,180)))],g.prototype,"tilt",void 0),Object(i.a)([Object(o.b)({type:Number,nonNullable:!0,json:{read:!1,write:!1}})],g.prototype,"fov",void 0);var y,O=g=n=Object(i.a)([Object(l.a)("esri.Camera")],g),j=y=class extends c.a{constructor(e){super(e),this.rotation=0,this.scale=0,this.targetGeometry=null,this.camera=null}castRotation(e){return(e%=360)<0&&(e+=360),e}clone(){return new y({rotation:this.rotation,scale:this.scale,targetGeometry:Object(a.k)(this.targetGeometry)?this.targetGeometry.clone():null,camera:Object(a.k)(this.camera)?this.camera.clone():null})}};function w(){return{enabled:!this.camera}}Object(i.a)([Object(o.b)({type:Number,json:{write:!0,origins:{"web-map":{default:0,write:!0},"web-scene":{write:{overridePolicy:w}}}}})],j.prototype,"rotation",void 0),Object(i.a)([Object(s.a)("rotation")],j.prototype,"castRotation",null),Object(i.a)([Object(o.b)({type:Number,json:{write:!0,origins:{"web-map":{default:0,write:!0},"web-scene":{write:{overridePolicy:w}}}}})],j.prototype,"scale",void 0),Object(i.a)([Object(o.b)({types:d.a,json:{read:u.a,write:!0,origins:{"web-scene":{read:u.a,write:{overridePolicy:w}}}}})],j.prototype,"targetGeometry",void 0),Object(i.a)([Object(o.b)({type:O,json:{write:!0}})],j.prototype,"camera",void 0);var k=j=y=Object(i.a)([Object(l.a)("esri.Viewpoint")],j);t.a=k},595:function(e,t,r){"use strict";r.d(t,"a",(function(){return i}));var n=r(93);class i{constructor(e,t,r=""){this.major=e,this.minor=t,this._context=r}lessThan(e,t){return this.major<e||e===this.major&&this.minor<t}since(e,t){return!this.lessThan(e,t)}validate(e){if(this.major!==e.major){var t=this._context&&this._context+":",r=this._context&&this._context+" ";throw new n.a(t+"unsupported-version","Required major ".concat(r,"version is '").concat(this.major,"', but got '${version.major}.${version.minor}'"),{version:e})}}clone(){return new i(this.major,this.minor,this._context)}static parse(e,t=""){var[r,a]=e.split("."),o=/^\s*\d+\s*$/;if(!r||!r.match||!r.match(o))throw new n.a((t&&t+":")+"invalid-version","Expected major version to be a number, but got '${version}'",{version:e});if(!a||!a.match||!a.match(o))throw new n.a((t&&t+":")+"invalid-version","Expected minor version to be a number, but got '${version}'",{version:e});var s=parseInt(r,10),l=parseInt(a,10);return new i(s,l,t)}}},610:function(e,t,r){"use strict";r.d(t,"a",(function(){return b})),r.d(t,"b",(function(){return u})),r.d(t,"c",(function(){return d})),r.d(t,"d",(function(){return p})),r.d(t,"e",(function(){return h})),r.d(t,"f",(function(){return m})),r.d(t,"g",(function(){return f}));var n=r(81),i=r(88),a=r(83),o=r(107),s=r(594),l=r(543),c=n.a.getLogger("esri.support.basemapUtils");function u(){return{}}function d(e){for(var t in e){var r=e[t];!1===(null==r?void 0:r.destroyed)&&r.destroy(),delete e[t]}}function p(e,t){var r,n;if("string"==typeof e){if(!(e in s.a)){var a=Object.keys(s.a).map((e=>'"'.concat(e,'"'))).join(", ");return c.warn("Unable to find basemap definition for: ".concat(e,". Try one of these: ").concat(a)),null}t&&(n=t[e]),n||(n=l.default.fromId(e),t&&(t[e]=n))}else n=Object(i.m)(l.default,e);return null!=(r=n)&&r.destroyed&&(c.warn("The provided basemap is already destroyed",{basemap:n}),n=null),n}function h(e){var t=null,r=y(e),n=!r.baseLayers.length;for(var i in s.a){var a=_(r,w(s.a[i]),{mustMatchReferences:n});if("equal"===a){t=i;break}"base-layers-equal"===a&&(t=i)}return t}function b(e,t){return e===t||"equal"===_(y(e),y(t),{mustMatchReferences:!0})}function m(e){return!(null==e||!e.baseLayers.concat(e.referenceLayers).some(f))}function f(e){if(g(e.url))return!0;if("vector-tile"===e.type)for(var t in e.sourceNameToSource){var r=e.sourceNameToSource[t];if(g(null==r?void 0:r.sourceUrl))return!0}return!1}var v=/^(basemaps|ibasemaps).*-api\.arcgis\.com$/i;function g(e){if(!e)return!1;var t=new a.a(Object(a.z)(e));return v.test(t.authority)}function y(e){return e?!e.loaded&&e.resourceInfo?w(e.resourceInfo.data):{baseLayers:O(e.baseLayers),referenceLayers:O(e.referenceLayers)}:null}function O(e){return(o.a.isCollection(e)?e.toArray():e).map(j)}function j(e){return{type:e.type,url:x("urlTemplate"in e&&e.urlTemplate||e.url||"styleUrl"in e&&e.styleUrl),minScale:"minScale"in e&&null!=e.minScale?e.minScale:0,maxScale:"maxScale"in e&&null!=e.maxScale?e.maxScale:0,opacity:null!=e.opacity?e.opacity:1,visible:null==e.visible||!!e.visible}}function w(e){return e?{baseLayers:k(e.baseMapLayers.filter((e=>!e.isReference))),referenceLayers:k(e.baseMapLayers.filter((e=>e.isReference)))}:null}function k(e){return e.map((e=>function(e){var t;switch(e.layerType){case"VectorTileLayer":t="vector-tile";break;case"ArcGISTiledMapServiceLayer":t="tile";break;default:t="unknown"}return{type:t,url:x(e.templateUrl||e.urlTemplate||e.styleUrl||e.url),minScale:null!=e.minScale?e.minScale:0,maxScale:null!=e.maxScale?e.maxScale:0,opacity:null!=e.opacity?e.opacity:1,visible:null==e.visibility||!!e.visibility}}(e)))}function _(e,t,r){return null!=e!=(null!=t)?"not-equal":e?S(e.baseLayers,t.baseLayers)?S(e.referenceLayers,t.referenceLayers)?"equal":r.mustMatchReferences?"not-equal":"base-layers-equal":"not-equal":"equal"}function S(e,t){if(e.length!==t.length)return!1;for(var r=0;r<e.length;r++)if(!I(e[r],t[r]))return!1;return!0}function I(e,t){return e.type===t.type&&e.url===t.url&&e.minScale===t.minScale&&e.maxScale===t.maxScale&&e.visible===t.visible&&e.opacity===t.opacity}function x(e){return e?Object(a.C)(e).replace(/^\s*https?:/i,"").toLowerCase():""}},624:function(e,t,r){"use strict";function n(e){return e&&"getAtOrigin"in e&&"originOf"in e}r.d(t,"a",(function(){return n}))},657:function(e,t,r){"use strict";function n(e,t){if(!i(e,t)){var r=e.typeKeywords;r?r.push(t):e.typeKeywords=[t]}}function i(e,t){return!!e.typeKeywords&&e.typeKeywords.indexOf(t)>-1}function a(e,t){var r=e.typeKeywords;if(r){var n=r.indexOf(t);n>-1&&r.splice(n,1)}}r.d(t,"a",(function(){return n})),r.d(t,"b",(function(){return i})),r.d(t,"c",(function(){return a}))},674:function(e,t,r){"use strict";r.d(t,"a",(function(){return b}));var n=r(82),i=(r(80),r(81)),a=(r(88),r(85)),o=r(84),s=(r(83),r(86),r(87),r(94)),l=r(107),c=r(293),u=r(218);function d(e){return e&&"group"===e.type}function p(e,t,r){var n,i;if(e)for(var a=0,o=e.length;a<o;a++){if((n=e.getItemAt(a))[t]===r)return n;if(d(n)&&(i=p(n.layers,t,r)))return i}}var h=i.a.getLogger("esri.support.LayersMixin"),b=e=>{var t=class extends e{constructor(...e){super(...e),this.layers=new l.a;var t=e=>{e.parent=this,this.layerAdded(e),"elevation"!==e.type&&"base-elevation"!==e.type||h.error("Layer 'title:".concat(e.title,", id:").concat(e.id,"' of type '").concat(e.type,"' is not supported as an operational layer and will therefore be ignored."))},r=e=>{e.parent=null,this.layerRemoved(e)};this.layers.on("before-add",(e=>(e=>{e.parent&&"remove"in e.parent&&e.parent.remove(e)})(e.item))),this.layers.on("after-add",(e=>t(e.item))),this.layers.on("after-remove",(e=>r(e.item)))}destroy(){var e=this.layers.removeAll();for(var t of e)this.layerRemoved(t),t.destroy();this.layers.destroy()}set layers(e){this._set("layers",Object(c.b)(e,this._get("layers")))}add(e,t){var r=this.layers;t=r.getNextIndex(t),e instanceof u.a?e.parent===this?this.reorder(e,t):r.add(e,t):Object(s.o)(e)?e.then((e=>{this.destroyed||this.add(e,t)})):h.error("#add()","The item being added is not a Layer or a Promise that resolves to a Layer.")}addMany(e,t){var r=this.layers;t=r.getNextIndex(t),e.slice().forEach((e=>{e.parent!==this?(r.add(e,t),t+=1):this.reorder(e,t)}))}findLayerById(e){return p(this.layers,"id",e)}findLayerByUid(e){return p(this.layers,"uid",e)}remove(e){return this.layers.remove(e)}removeMany(e){return this.layers.removeMany(e)}removeAll(){return this.layers.removeAll()}reorder(e,t){return this.layers.reorder(e,t)}layerAdded(e){}layerRemoved(e){}};return Object(n.a)([Object(a.b)()],t.prototype,"layers",null),t=Object(n.a)([Object(o.a)("esri.support.LayersMixin")],t)}},675:function(e,t,r){"use strict";r.d(t,"a",(function(){return h}));var n=r(82),i=(r(80),r(81)),a=(r(88),r(85)),o=r(84),s=(r(83),r(86),r(87),r(107)),l=r(293),c="esri.support.TablesMixin",u=i.a.getLogger(c);function d(e){return e&&"group"===e.type}function p(e,t,r){if(e)for(var n=0,i=e.length;n<i;n++){var a=e.getItemAt(n);if(a[t]===r)return a;if(d(a)){var o=p(a.tables,t,r);if(o)return o}}}var h=e=>{var t=class extends e{constructor(...e){super(...e),this.tables=new s.a,this.tables.on("after-add",(e=>{var t=e.item;t.parent&&t.parent!==this&&"tables"in t.parent&&t.parent.tables.remove(t),t.parent=this,"feature"!==t.type&&u.error("Layer 'title:".concat(t.title,", id:").concat(t.id,"' of type '").concat(t.type,"' is not supported as a table and will therefore be ignored."))})),this.tables.on("after-remove",(e=>{e.item.parent=null}))}destroy(){var e=this.tables.removeAll();for(var t of e)t.destroy();this.tables.destroy()}set tables(e){this._set("tables",Object(l.b)(e,this._get("tables")))}findTableById(e){return p(this.tables,"id",e)}findTableByUid(e){return p(this.tables,"uid",e)}};return Object(n.a)([Object(a.b)()],t.prototype,"tables",null),t=Object(n.a)([Object(o.a)(c)],t)}},676:function(e,t,r){"use strict";r.d(t,"a",(function(){return i}));var n=r(624);function i(e){e&&e.writtenProperties&&e.writtenProperties.forEach((e=>{var t=e.target;e.newOrigin&&e.oldOrigin!==e.newOrigin&&Object(n.a)(t)&&t.updateOrigin(e.propName,e.newOrigin)}))}},770:function(e,t,r){"use strict";var n,i=r(82),a=(r(80),r(92)),o=(r(81),r(88),r(85)),s=r(84),l=(r(83),r(86),r(87),r(90)),c=r(109),u=n=class extends l.a{constructor(e){super(e),this.color=new c.a([0,0,0,1])}clone(){return new n(Object(a.a)({color:this.color}))}};Object(i.a)([Object(o.b)({type:c.a,json:{write:!0}})],u.prototype,"color",void 0);var d=u=n=Object(i.a)([Object(s.a)("esri.webmap.background.ColorBackground")],u);t.a=d},80:function(e,t,r){"use strict";var n,i,a,o,s,l=r(91),c=r(158);function u(e){return"function"==typeof a[e]?a[e]=a[e](c.a):a[e]}a=null!=(n=c.a.dojoConfig)&&n.has||null!=(i=c.a.esriConfig)&&i.has?Object(l.a)(Object(l.a)({},null==(o=c.a.dojoConfig)?void 0:o.has),null==(s=c.a.esriConfig)?void 0:s.has):{},u.add=(e,t,r,n)=>((n||void 0===a[e])&&(a[e]=t),r&&u(e)),u.cache=a,u.add("esri-deprecation-warnings",!0),(()=>{u.add("host-webworker",void 0!==c.a.WorkerGlobalScope&&self instanceof c.a.WorkerGlobalScope);var e="undefined"!=typeof window&&"undefined"!=typeof location&&"undefined"!=typeof document&&window.location===location&&window.document===document;if(u.add("host-browser",e),u.add("host-node","object"==typeof c.a.process&&c.a.process.versions&&c.a.process.versions.node&&c.a.process.versions.v8),u.add("dom",e),u("host-browser")){var t=navigator,r=t.userAgent,n=t.appVersion,i=parseFloat(n);if(u.add("wp",parseFloat(r.split("Windows Phone")[1])||void 0),u.add("msapp",parseFloat(r.split("MSAppHost/")[1])||void 0),u.add("khtml",n.indexOf("Konqueror")>=0?i:void 0),u.add("edge",parseFloat(r.split("Edge/")[1])||void 0),u.add("opr",parseFloat(r.split("OPR/")[1])||void 0),u.add("webkit",!u("wp")&&!u("edge")&&parseFloat(r.split("WebKit/")[1])||void 0),u.add("chrome",!u("edge")&&!u("opr")&&parseFloat(r.split("Chrome/")[1])||void 0),u.add("android",!u("wp")&&parseFloat(r.split("Android ")[1])||void 0),u.add("safari",!(n.indexOf("Safari")>=0)||u("wp")||u("chrome")||u("android")||u("edge")||u("opr")?void 0:parseFloat(n.split("Version/")[1])),u.add("mac",n.indexOf("Macintosh")>=0),u.add("quirks","BackCompat"===document.compatMode),!u("wp")&&r.match(/(iPhone|iPod|iPad)/)){var a=RegExp.$1.replace(/P/,"p"),o=r.match(/OS ([\d_]+)/)?RegExp.$1:"1",s=parseFloat(o.replace(/_/,".").replace(/_/g,""));u.add(a,s),u.add("ios",s)}u.add("trident",parseFloat(n.split("Trident/")[1])||void 0),u.add("svg","undefined"!=typeof SVGAngle),u("webkit")||(r.indexOf("Opera")>=0&&u.add("opera",i>=9.8&&parseFloat(r.split("Version/")[1])||i),!(r.indexOf("Gecko")>=0)||u("wp")||u("khtml")||u("trident")||u("edge")||u.add("mozilla",i),u("mozilla")&&u.add("ff",parseFloat(r.split("Firefox/")[1]||r.split("Minefield/")[1])||void 0))}})(),(()=>{if(c.a.navigator){var e=navigator.userAgent,t=e.match(/Android|webOS|iPhone|iPad|iPod|BlackBerry|Opera Mini|IEMobile/i),r=e.match(/iPhone/i);t&&u.add("esri-mobile",t),r&&u.add("esri-iPhone",r),u.add("esri-geolocation",!!navigator.geolocation)}u.add("esri-canvas-svg-support",!u("trident")),u.add("esri-wasm","WebAssembly"in c.a),u.add("esri-shared-array-buffer",(()=>{var e="SharedArrayBuffer"in c.a,t=!1===c.a.crossOriginIsolated;return e&&!t})),u.add("esri-atomics","Atomics"in c.a),u.add("esri-workers","Worker"in c.a),u.add("esri-text-decoder","TextDecoder"in c.a),u.add("esri-text-encoder","TextEncoder"in c.a),u.add("featurelayer-snapshot-enabled",!0),u.add("featurelayer-snapshot-point-min-threshold",8e4),u.add("featurelayer-snapshot-point-max-threshold",4e5),u.add("featurelayer-snapshot-point-coverage",.1),u.add("featurelayer-advanced-symbols",!1),u.add("featurelayer-pbf",!0),u.add("featurelayer-pbf-statistics",!1),u.add("feature-layers-workers",!0),u.add("mapview-transitions-duration",200),u.add("mapserver-pbf-enabled",!1),u("host-webworker")||u("host-browser")&&(u.add("csp-restrictions",(()=>{try{new Function}catch(e){return!0}return!1})),u.add("esri-image-decode",(()=>{if("decode"in new Image){var e=new Image;return e.src='data:image/svg+xml;charset=UTF-8,<svg version="1.1" xmlns="http://www.w3.org/2000/svg"></svg>',void e.decode().then((()=>{u.add("esri-image-decode",!0,!0,!0)})).catch((()=>{u.add("esri-image-decode",!1,!0,!0)}))}return!1})),u.add("esri-url-encodes-apostrophe",(()=>{var e=c.a.document.createElement("a");return e.href="?'",e.href.indexOf("?%27")>-1})),u.add("vectortilelayer-max-buffers",(()=>u("ff")?160:Number.POSITIVE_INFINITY)))})(),t.a=u},807:function(e,t,r){"use strict";var n,i=r(82),a=(r(80),r(81),r(88),r(85)),o=r(84),s=(r(83),r(86),r(87),r(90)),l=n=class extends s.a{constructor(){super(...arguments),this.url=""}destroy(){this.url=""}clone(){return new n({url:this.url})}};Object(i.a)([Object(a.b)({type:String,json:{write:{isRequired:!0}}})],l.prototype,"url",void 0);var c=l=n=Object(i.a)([Object(o.a)("esri.webdoc.support.Thumbnail")],l);t.a=c},81:function(e,t,r){"use strict";r(80);var n=r(159),i=r(89),a=r(143),o={info:0,warn:1,error:2,none:3};class s{constructor(e){this.level=null,this._module="",this._parent=null,this.writer=null,this._loggedMessages={error:new Map,warn:new Map,info:new Map},null!=e.level&&(this.level=e.level),null!=e.writer&&(this.writer=e.writer),this._module=e.module,s._loggers[this.module]=this;var t=this.module.lastIndexOf(".");-1!==t&&(this._parent=s.getLogger(this.module.slice(0,t)))}get module(){return this._module}get parent(){return this._parent}error(...e){this._log("error","always",...e)}warn(...e){this._log("warn","always",...e)}info(...e){this._log("info","always",...e)}errorOnce(...e){this._log("error","once",...e)}warnOnce(...e){this._log("warn","once",...e)}infoOnce(...e){this._log("info","once",...e)}errorOncePerTick(...e){this._log("error","oncePerTick",...e)}warnOncePerTick(...e){this._log("warn","oncePerTick",...e)}infoOncePerTick(...e){this._log("info","oncePerTick",...e)}get test(){var e=this;return{loggedMessages:e._loggedMessages,clearLoggedWarnings:()=>e._loggedMessages.warn.clear()}}static get testSingleton(){return{resetLoggers(e={}){var t=s._loggers;return s._loggers=e,t},set throttlingDisabled(e){s._throttlingDisabled=e}}}static getLogger(e){var t=s._loggers[e];return t||(t=new s({module:e})),t}_log(e,t,...r){if(this._matchLevel(e)){if("always"!==t&&!s._throttlingDisabled){var i=this._argsToKey(r),a=this._loggedMessages[e].get(i);if("once"===t&&null!=a||"oncePerTick"===t&&a&&a>=s._tickCounter)return;this._loggedMessages[e].set(i,s._tickCounter),s._scheduleTickCounterIncrement()}for(var o of n.a.log.interceptors)if(o(e,this.module,...r))return;this._inheritedWriter()(e,this.module,...r)}}_parentWithMember(e,t){for(var r=this;Object(i.k)(r);){var n=r[e];if(Object(i.k)(n))return n;r=r.parent}return t}_inheritedWriter(){return this._parentWithMember("writer",this._consoleWriter)}_consoleWriter(e,t,...r){console[e]("[".concat(t,"]"),...r)}_matchLevel(e){var t=n.a.log.level?n.a.log.level:"warn";return o[this._parentWithMember("level",t)]<=o[e]}_argsToKey(...e){return Object(a.b)(JSON.stringify(e,((e,t)=>"object"!=typeof t||Array.isArray(t)?t:"[Object]")))}static _scheduleTickCounterIncrement(){s._tickCounterScheduled||(s._tickCounterScheduled=!0,Promise.resolve().then((()=>{s._tickCounter++,s._tickCounterScheduled=!1})))}}s._loggers={},s._tickCounter=0,s._tickCounterScheduled=!1,s._throttlingDisabled=!1,t.a=s},864:function(e,t,r){"use strict";var n,i,a=r(82),o=(r(80),r(81)),s=r(85),l=r(116),c=r(84),u=(r(83),r(86),r(87),r(97)),d=r(131),p=r(543),h=r(7),b=r(91),m=r(180),f=r(92),v=r(88),g=r(96),y=r(93),O=r(94),j=r(90),w=r(107),k=r(109),_=r(483),S=r(293),I=r(185),x=r(436),T=r(102),E=n=class extends j.a{constructor(e){super(e),this.type="none"}clone(){return new n({type:this.type})}};Object(a.a)([Object(T.a)({none:"none",stayAbove:"stay-above"})],E.prototype,"type",void 0),E=n=Object(a.a)([Object(c.a)("esri.ground.NavigationConstraint")],E);var A=o.a.getLogger("esri.Ground"),M=i=class extends(Object(j.b)(I.a)){constructor(e){super(e),this.opacity=1,this.surfaceColor=null,this.navigationConstraint=null,this.layers=new w.a;var t=e=>{e.parent&&e.parent!==this&&"remove"in e.parent&&e.parent.remove(e),e.parent=this,"elevation"!==e.type&&"base-elevation"!==e.type&&A.error("Layer '".concat(e.title,", id:").concat(e.id,"' of type '").concat(e.type,"' is not supported as a ground layer and will therefore be ignored. Only layers of type 'elevation' are supported."))};this.layers.on("after-add",(e=>t(e.item))),this.layers.on("after-remove",(e=>(e=>{e.parent=null})(e.item)))}initialize(){this.when().catch((e=>{A.error("#load()","Failed to load ground",e)})),this.resourceInfo&&this.read(this.resourceInfo.data,this.resourceInfo.context)}destroy(){var e=this.layers.removeAll();for(var t of e)t.destroy();this.layers.destroy()}normalizeCtorArgs(e){return e&&"resourceInfo"in e&&(this._set("resourceInfo",e.resourceInfo),delete(e=Object(b.a)({},e)).resourceInfo),e}set layers(e){this._set("layers",Object(S.b)(e,this._get("layers")))}writeLayers(e,t,r,n){var i=[];e?(n=Object(b.a)(Object(b.a)({},n),{},{layerContainerType:"ground"}),e.forEach((e=>{if("write"in e){var t={};Object(m.b)(e)().write(t,n)&&i.push(t)}else n&&n.messages&&n.messages.push(new y.a("layer:unsupported","Layers (".concat(e.title,", ").concat(e.id,") of type '").concat(e.declaredClass,"' cannot be persisted in the ground"),{layer:e}))})),t.layers=i):t.layers=i}load(e){return this.addResolvingPromise(this._loadFromSource(e)),Promise.resolve(this)}loadAll(){return Object(x.a)(this,(e=>{e(this.layers)}))}queryElevation(e,t){var n=this;return Object(h.a)((function*(){yield n.load({signal:null==t?void 0:t.signal});var{ElevationQuery:i}=yield Promise.all([r.e(10),r.e(44)]).then(r.bind(null,1117));Object(O.u)(t);var a=new i,o=n.layers.filter(C).toArray();return a.queryAll(o,e,t)}))()}createElevationSampler(e,t){var n=this;return Object(h.a)((function*(){yield n.load({signal:null==t?void 0:t.signal});var{ElevationQuery:i}=yield Promise.all([r.e(10),r.e(44)]).then(r.bind(null,1117));Object(O.u)(t);var a=new i,o=n.layers.filter(C).toArray();return a.createSamplerAll(o,e,t)}))()}clone(){var e={opacity:this.opacity,surfaceColor:Object(f.a)(this.surfaceColor),navigationConstraint:Object(f.a)(this.navigationConstraint),layers:this.layers.slice()};return this.loaded&&(e.loadStatus="loaded"),new i({resourceInfo:this.resourceInfo}).set(e)}read(e,t){this.resourceInfo||this._set("resourceInfo",{data:e,context:t}),super.read(e,t)}_loadFromSource(e){var t=this.resourceInfo;return t?this._loadLayersFromJSON(t.data,t.context,e):Promise.resolve(null)}_loadLayersFromJSON(e,t,n){var i=t&&t.origin||"web-scene",a=t&&t.portal||null,o=t&&t.url||null;return r.e(45).then(r.bind(null,800)).then((({populateOperationalLayers:t})=>{Object(O.u)(n);var r=[];if(e.layers&&Array.isArray(e.layers)){var s={context:{origin:i,url:o,portal:a,layerContainerType:"ground"},defaultLayerType:"ArcGISTiledElevationServiceLayer"};r.push(t(this.layers,e.layers,s))}return Object(O.j)(r)})).then((()=>{}))}};function C(e){return"elevation"===e.type||function(e){return e&&"createElevationSampler"in e}(e)}Object(a.a)([Object(s.b)({json:{read:!1}})],M.prototype,"layers",null),Object(a.a)([Object(g.a)("layers")],M.prototype,"writeLayers",null),Object(a.a)([Object(s.b)({readOnly:!0})],M.prototype,"resourceInfo",void 0),Object(a.a)([Object(s.b)({type:Number,nonNullable:!0,range:{min:0,max:1},json:{type:v.a,read:{reader:_.b,source:"transparency"},write:{writer:(e,t)=>{t.transparency=Object(_.a)(e)},target:"transparency"}}})],M.prototype,"opacity",void 0),Object(a.a)([Object(s.b)({type:k.a,json:{type:[v.a],write:(e,t)=>{t.surfaceColor=e.toJSON().slice(0,3)}}})],M.prototype,"surfaceColor",void 0),Object(a.a)([Object(s.b)({type:E,json:{write:!0}})],M.prototype,"navigationConstraint",void 0);var N=M=i=Object(a.a)([Object(c.a)("esri.Ground")],M),P=r(499),D=r(610),B=o.a.getLogger("esri.support.groundUtils"),F={"world-elevation":{id:"worldElevation",url:"//elevation3d.arcgis.com/arcgis/rest/services/WorldElevation3D/Terrain3D/ImageServer",layerType:"ArcGISTiledElevationServiceLayer"},"world-topobathymetry":{id:"worldTopoBathymetry",url:"//elevation3d.arcgis.com/arcgis/rest/services/WorldElevation3D/TopoBathy3D/ImageServer",layerType:"ArcGISTiledElevationServiceLayer"}};var L=r(674),R=r(675),U=o.a.getLogger("esri.Map"),q=class extends(Object(R.a)(Object(L.a)(d.a.EventedMixin(u.a)))){constructor(e){super(e),this.allLayers=new P.a({root:this,rootCollectionNames:["basemap.baseLayers","ground.layers","layers","basemap.referenceLayers"],getChildrenFunction:e=>e.layers}),this.allTables=this._createTablesFlattener(this),this.basemap=null,this.ground=new N,this._basemapCache=Object(D.b)()}destroy(){var e,t;this.allLayers.destroy(),this.allTables.destroy(),null==(e=this.ground)||e.destroy(),null==(t=this.basemap)||t.destroy(),Object(D.c)(this._basemapCache),this._basemapCache=null}castBasemap(e){return Object(D.d)(e,this._basemapCache)}castGround(e){return function(e){var t;return"string"==typeof e?e in F?t=new N({resourceInfo:{data:{layers:[F[e]]}}}):B.warn("Unable to find ground definition for: ".concat(e,'. Try "world-elevation"')):t=Object(v.m)(N,e),t}(e)||(U.error("Map.ground may not be set to null or undefined"),this._get("ground"))}findLayerById(e){return this.allLayers.find((t=>t.id===e))}findTableById(e){return this.allTables.find((t=>t.id===e))}_createTablesFlattener(e){return new P.a({root:e,rootCollectionNames:["tables","layers"],getChildrenFunction:e=>e&&"group"===e.type?this._createTablesFlattener(e):null,itemFilterFunction:e=>this._isMapOrGroupLayer(e.parent)&&e.parent.tables.includes(e)})}_isMapOrGroupLayer(e){return e&&(e===this||this._isGroupLayer(e))}_isGroupLayer(e){return e&&"group"===e.type}};Object(a.a)([Object(s.b)({readOnly:!0,dependsOn:[]})],q.prototype,"allLayers",void 0),Object(a.a)([Object(s.b)({readOnly:!0})],q.prototype,"allTables",void 0),Object(a.a)([Object(s.b)({type:p.default})],q.prototype,"basemap",void 0),Object(a.a)([Object(l.a)("basemap")],q.prototype,"castBasemap",null),Object(a.a)([Object(s.b)({type:N,nonNullable:!0})],q.prototype,"ground",void 0),Object(a.a)([Object(l.a)("ground")],q.prototype,"castGround",null);var V=q=Object(a.a)([Object(c.a)("esri.Map")],q);t.a=V},881:function(e,t,r){"use strict";var n,i=r(82),a=(r(80),r(92)),o=r(89),s=r(81),l=r(88),c=r(85),u=r(116),d=r(288),p=r(98),h=r(84),b=r(93),m=(r(83),r(86),r(87),r(90)),f=r(103),v=r(266),g=r(559),y=r(807),O="esri.webmap.Bookmark",j=s.a.getLogger(O),w=n=class extends(Object(v.a)(m.a)){constructor(e){super(e),this.name=null,this.thumbnail=new y.a}set extent(e){Object(d.c)(j,"extent",{replacement:"viewpoint",version:"4.17"}),this._set("viewpoint",new g.a({targetGeometry:e.clone()})),this._set("extent",e)}castThumbnail(e){return"string"==typeof e?new y.a({url:e}):Object(l.m)(y.a,e)}set viewpoint(e){var t=e.targetGeometry;if(Object(o.j)(t)||"extent"!==t.type){var r=new b.a("invalid-viewpoint","'viewpoint.targetGeometry' should be an extent",{viewpoint:e});j.error(r)}else this._set("extent",t.clone()),this._set("viewpoint",e)}readViewpoint(e,t){var{extent:r,viewpoint:n}=t;return g.a.fromJSON(n||{targetGeometry:r})}clone(){return new n(Object(a.a)({name:this.name,thumbnail:this.thumbnail,viewpoint:this.viewpoint}))}};Object(i.a)([Object(c.b)({type:f.a,nonNullable:!0,json:{read:!1,write:{isRequired:!0}}})],w.prototype,"extent",null),Object(i.a)([Object(c.b)({type:String,nonNullable:!0,json:{write:{isRequired:!0}}})],w.prototype,"name",void 0),Object(i.a)([Object(c.b)({type:y.a,json:{write:{overridePolicy:e=>({enabled:!(!e||!e.url)})}}})],w.prototype,"thumbnail",void 0),Object(i.a)([Object(u.a)("thumbnail")],w.prototype,"castThumbnail",null),Object(i.a)([Object(c.b)({type:g.a,nonNullable:!0,json:{write:!0}})],w.prototype,"viewpoint",null),Object(i.a)([Object(p.a)("viewpoint",["extent","viewpoint"])],w.prototype,"readViewpoint",null);var k=w=n=Object(i.a)([Object(h.a)(O)],w);t.a=k},89:function(e,t,r){"use strict";r.d(t,"a",(function(){return h})),r.d(t,"b",(function(){return g})),r.d(t,"c",(function(){return o})),r.d(t,"d",(function(){return j})),r.d(t,"e",(function(){return u})),r.d(t,"f",(function(){return d})),r.d(t,"g",(function(){return y})),r.d(t,"h",(function(){return f})),r.d(t,"i",(function(){return O})),r.d(t,"j",(function(){return i})),r.d(t,"k",(function(){return n})),r.d(t,"l",(function(){return a})),r.d(t,"m",(function(){return m})),r.d(t,"n",(function(){return v})),r.d(t,"o",(function(){return b})),r.d(t,"p",(function(){return p})),r.d(t,"q",(function(){return s})),r.d(t,"r",(function(){return c})),r.d(t,"s",(function(){return l}));function n(e){return null!=e}function i(e){return null==e}function a(e){return void 0===e}function o(e,t){return n(e)?t(e):null}function s(e){return e}function l(e,t){if(i(e))throw new Error(t);return e}function c(e,t){return n(e)?e:"function"==typeof t?t():t}function u(e){return n(e)&&e.destroy(),null}function d(e){return n(e)&&e.dispose(),null}function p(e){return n(e)&&e.remove(),null}function h(e){return n(e)&&e.abort(),null}function b(e){return null}function m(e,t){var r=new Array;for(var n of e)r.push(v(n,null,t));return r}function f(e,t){for(var r of e)v(r,null,t)}function v(e,t,r){return n(e)?r(e):t}function g(e,t){return n(e)?t(e):null}function y(e){return e.filter((e=>n(e)))}function O(e,...t){for(var r=e,n=0;n<t.length&&r;)r=r[t[n++]];return r}function j(e){return e}},92:function(e,t,r){"use strict";r.d(t,"a",(function(){return a})),r.d(t,"b",(function(){return o})),r.d(t,"c",(function(){return i}));r(80);var n=r(295);function i(e,t){var r;if(t)for(r in e)e.hasOwnProperty(r)&&(void 0===e[r]?delete e[r]:e[r]instanceof Object&&i(e[r],!0));else for(r in e)e.hasOwnProperty(r)&&void 0===e[r]&&delete e[r];return e}function a(e){if(!e||"object"!=typeof e||"function"==typeof e)return e;if(Object(n.h)(e)||Object(n.k)(e)||Object(n.l)(e)||Object(n.f)(e)||Object(n.i)(e)||Object(n.g)(e)||Object(n.j)(e)||Object(n.d)(e)||Object(n.e)(e))return Object(n.m)(e);if(e instanceof Date)return new Date(e.getTime());if(e instanceof ArrayBuffer)return e.slice(0,e.byteLength);if(e instanceof Map){var t=new Map;return e.forEach(((e,r)=>{t.set(r,a(e))})),t}if(e instanceof Set){var r=new Set;return e.forEach((e=>{r.add(a(e))})),r}var i,o=e;if("function"==typeof o.clone)i=o.clone();else if("function"==typeof o.map&&"function"==typeof o.forEach)i=o.map(a);else if("function"==typeof o.notifyChange&&"function"==typeof o.watch)i=o.clone();else for(var s of(i={},Object.getOwnPropertyNames(e)))i[s]=a(e[s]);return i}function o(e,t){return e===t||"number"==typeof e&&isNaN(e)&&"number"==typeof t&&isNaN(t)||"function"==typeof(e||{}).getTime&&"function"==typeof(t||{}).getTime&&e.getTime()===t.getTime()||!1}},93:function(e,t,r){"use strict";var n=r(92),i=r(81),a=r(409);class o extends a.a{constructor(e,t,r){if(super(e,t,r),!(this instanceof o))return new o(e,t,r)}toJSON(){if(null!=this.details)try{return{name:this.name,message:this.message,details:JSON.parse(JSON.stringify(this.details,((e,t)=>{if(t&&"object"==typeof t&&"function"==typeof t.toJSON)return t;try{return Object(n.a)(t)}catch(o){return"[object]"}})))}}catch(e){throw i.a.getLogger("esri.core.Error").error(e),e}return{name:this.name,message:this.message,details:this.details}}static fromJSON(e){return new o(e.name,e.message,e.details)}}o.prototype.type="error",t.a=o},94:function(e,t,r){"use strict";r.d(t,"a",(function(){return I})),r.d(t,"b",(function(){return s})),r.d(t,"c",(function(){return l})),r.d(t,"d",(function(){return u})),r.d(t,"e",(function(){return c})),r.d(t,"f",(function(){return j})),r.d(t,"g",(function(){return A})),r.d(t,"h",(function(){return M})),r.d(t,"i",(function(){return E})),r.d(t,"j",(function(){return w})),r.d(t,"k",(function(){return k})),r.d(t,"l",(function(){return O})),r.d(t,"m",(function(){return y})),r.d(t,"n",(function(){return h})),r.d(t,"o",(function(){return x})),r.d(t,"p",(function(){return f})),r.d(t,"q",(function(){return v})),r.d(t,"r",(function(){return _})),r.d(t,"s",(function(){return S})),r.d(t,"t",(function(){return b})),r.d(t,"u",(function(){return d})),r.d(t,"v",(function(){return m})),r.d(t,"w",(function(){return T})),r.d(t,"x",(function(){return g}));var n=r(89),i=(r(81),r(93)),a=r(455),o=r(165);function s(e){return Promise.all(e)}function l(e){return new Promise(((t,r)=>{try{e(t,r)}catch(n){Promise.resolve().then((()=>r(n)))}}))}function c(e="Aborted"){return new i.a("AbortError",e)}function u(){return new AbortController}function d(e){if(h(e))throw c()}function p(e){return Object(n.k)(e)?"aborted"in e?e:e.signal:e}function h(e){var t=p(e);return Object(n.k)(t)&&t.aborted}function b(e){if(y(e))throw e}function m(e){if(!y(e))throw e}function f(e,t){var r=p(e);if(!Object(n.j)(r)){if(!r.aborted)return Object(o.d)(r,"abort",(()=>t()));t()}}function v(e,t){var r=p(e);if(!Object(n.j)(r))return d(r),Object(o.d)(r,"abort",(()=>t(c())))}function g(e,t){var r=p(t);return Object(n.j)(r)?e:new Promise(((r,i)=>{var a=f(t,(()=>i(c()))),o=()=>a=Object(n.p)(a);e.then(o,o),e.then(r,i)}))}function y(e){return e&&"AbortError"===e.name}function O(e){return e.catch((e=>{if(!y(e))throw e}))}function j(){var e=null,t=new Promise(((t,r)=>{e={promise:void 0,resolve:t,reject:r}}));return e.promise=t,e}function w(e){if(e){if("function"!=typeof e.forEach){var t=Object.keys(e);return w(t.map((t=>e[t]))).then((e=>{var r={};return t.forEach(((t,n)=>r[t]=e[n])),r}))}var r=e;return l((e=>{var t=[],n=r.length;0===n&&e(t),r.forEach((r=>{var i={promise:r||Promise.resolve(r)};t.push(i),i.promise.then((e=>{i.value=e})).catch((e=>{i.error=e})).then((()=>{0===--n&&e(t)}))}))}))}}function k(e){return w(e).then((e=>e.filter((e=>!!e.value)).map((e=>e.value))))}function _(e){return Promise.reject(e)}function S(e){return Promise.resolve(e)}function I(e,t,r){var n=u();return f(r,(()=>n.abort())),new Promise(((r,i)=>{var a=setTimeout((()=>{a=0,r(t)}),e);f(n,(()=>{a&&(clearTimeout(a),i(c()))}))}))}function x(e){return e&&"function"==typeof e.then}function T(e){return e&&"object"==typeof e&&"then"in e&&"function"==typeof e.then?e:Promise.resolve(e)}function E(e,t=-1){var r,i,a,o,s=null,l=(...d)=>{if(r){i=d,o&&o.reject(c()),o=j();var p=Object(n.d)(o.promise);if(s){var h=s;s=null,h.abort()}return p}if(a=o||j(),o=null,t>0){var b=u(),m=r=T(e(...d,b.signal));I(t).then((()=>{r===m&&(o?b.abort():s=b)}))}else r=1,r=T(e(...d));var f=()=>{var e=i;i=a=r=s=null,null!=e&&l(...e)},v=r,g=a;return v.then(f,f),v.then(g.resolve,g.reject),Object(n.d)(g.promise)};return l}function A(){var e,t,r=new Promise(((r,n)=>{e=r,t=n})),n=t=>{e(t)};return n.resolve=t=>e(t),n.reject=e=>t(e),n.timeout=(e,t)=>a.a.setTimeout((()=>n.reject(t)),e),n.promise=r,n}function M(e){var t=u(),r=e(t.signal),n={promise:r,finished:!1,abort:()=>{t&&(t.abort(),t=null)}},i=()=>{n&&(n.finished=!0,n=null),t=null};return r.then(i,i),n}},954:function(e,t,r){"use strict";function n(e){return(n="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function a(){return(a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function o(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){i(e,t,r[t])}))}return e}function s(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function l(e){if("undefined"!==typeof window&&window.navigator)return!!navigator.userAgent.match(e)}var c=l(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),u=l(/Edge/i),d=l(/firefox/i),p=l(/safari/i)&&!l(/chrome/i)&&!l(/android/i),h=l(/iP(ad|od|hone)/i),b=l(/chrome/i)&&l(/android/i),m={capture:!1,passive:!1};function f(e,t,r){e.addEventListener(t,r,!c&&m)}function v(e,t,r){e.removeEventListener(t,r,!c&&m)}function g(e,t){if(t){if(">"===t[0]&&(t=t.substring(1)),e)try{if(e.matches)return e.matches(t);if(e.msMatchesSelector)return e.msMatchesSelector(t);if(e.webkitMatchesSelector)return e.webkitMatchesSelector(t)}catch(r){return!1}return!1}}function y(e){return e.host&&e!==document&&e.host.nodeType?e.host:e.parentNode}function O(e,t,r,n){if(e){r=r||document;do{if(null!=t&&(">"===t[0]?e.parentNode===r&&g(e,t):g(e,t))||n&&e===r)return e;if(e===r)break}while(e=y(e))}return null}var j,w=/\s+/g;function k(e,t,r){if(e&&t)if(e.classList)e.classList[r?"add":"remove"](t);else{var n=(" "+e.className+" ").replace(w," ").replace(" "+t+" "," ");e.className=(n+(r?" "+t:"")).replace(w," ")}}function _(e,t,r){var n=e&&e.style;if(n){if(void 0===r)return document.defaultView&&document.defaultView.getComputedStyle?r=document.defaultView.getComputedStyle(e,""):e.currentStyle&&(r=e.currentStyle),void 0===t?r:r[t];t in n||-1!==t.indexOf("webkit")||(t="-webkit-"+t),n[t]=r+("string"===typeof r?"":"px")}}function S(e,t){var r="";if("string"===typeof e)r=e;else do{var n=_(e,"transform");n&&"none"!==n&&(r=n+" "+r)}while(!t&&(e=e.parentNode));var i=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return i&&new i(r)}function I(e,t,r){if(e){var n=e.getElementsByTagName(t),i=0,a=n.length;if(r)for(;i<a;i++)r(n[i],i);return n}return[]}function x(){var e=document.scrollingElement;return e||document.documentElement}function T(e,t,r,n,i){if(e.getBoundingClientRect||e===window){var a,o,s,l,u,d,p;if(e!==window&&e.parentNode&&e!==x()?(o=(a=e.getBoundingClientRect()).top,s=a.left,l=a.bottom,u=a.right,d=a.height,p=a.width):(o=0,s=0,l=window.innerHeight,u=window.innerWidth,d=window.innerHeight,p=window.innerWidth),(t||r)&&e!==window&&(i=i||e.parentNode,!c))do{if(i&&i.getBoundingClientRect&&("none"!==_(i,"transform")||r&&"static"!==_(i,"position"))){var h=i.getBoundingClientRect();o-=h.top+parseInt(_(i,"border-top-width")),s-=h.left+parseInt(_(i,"border-left-width")),l=o+a.height,u=s+a.width;break}}while(i=i.parentNode);if(n&&e!==window){var b=S(i||e),m=b&&b.a,f=b&&b.d;b&&(l=(o/=f)+(d/=f),u=(s/=m)+(p/=m))}return{top:o,left:s,bottom:l,right:u,width:p,height:d}}}function E(e,t,r){for(var n=P(e,!0),i=T(e)[t];n;){var a=T(n)[r];if(!("top"===r||"left"===r?i>=a:i<=a))return n;if(n===x())break;n=P(n,!1)}return!1}function A(e,t,r){for(var n=0,i=0,a=e.children;i<a.length;){if("none"!==a[i].style.display&&a[i]!==Fe.ghost&&a[i]!==Fe.dragged&&O(a[i],r.draggable,e,!1)){if(n===t)return a[i];n++}i++}return null}function M(e,t){for(var r=e.lastElementChild;r&&(r===Fe.ghost||"none"===_(r,"display")||t&&!g(r,t));)r=r.previousElementSibling;return r||null}function C(e,t){var r=0;if(!e||!e.parentNode)return-1;for(;e=e.previousElementSibling;)"TEMPLATE"===e.nodeName.toUpperCase()||e===Fe.clone||t&&!g(e,t)||r++;return r}function N(e){var t=0,r=0,n=x();if(e)do{var i=S(e),a=i.a,o=i.d;t+=e.scrollLeft*a,r+=e.scrollTop*o}while(e!==n&&(e=e.parentNode));return[t,r]}function P(e,t){if(!e||!e.getBoundingClientRect)return x();var r=e,n=!1;do{if(r.clientWidth<r.scrollWidth||r.clientHeight<r.scrollHeight){var i=_(r);if(r.clientWidth<r.scrollWidth&&("auto"==i.overflowX||"scroll"==i.overflowX)||r.clientHeight<r.scrollHeight&&("auto"==i.overflowY||"scroll"==i.overflowY)){if(!r.getBoundingClientRect||r===document.body)return x();if(n||t)return r;n=!0}}}while(r=r.parentNode);return x()}function D(e,t){return Math.round(e.top)===Math.round(t.top)&&Math.round(e.left)===Math.round(t.left)&&Math.round(e.height)===Math.round(t.height)&&Math.round(e.width)===Math.round(t.width)}function B(e,t){return function(){if(!j){var r=arguments,n=this;1===r.length?e.call(n,r[0]):e.apply(n,r),j=setTimeout((function(){j=void 0}),t)}}}function F(e,t,r){e.scrollLeft+=t,e.scrollTop+=r}function L(e){var t=window.Polymer,r=window.jQuery||window.Zepto;return t&&t.dom?t.dom(e).cloneNode(!0):r?r(e).clone(!0)[0]:e.cloneNode(!0)}var R="Sortable"+(new Date).getTime();function U(){var e,t=[];return{captureAnimationState:function(){(t=[],this.options.animation)&&[].slice.call(this.el.children).forEach((function(e){if("none"!==_(e,"display")&&e!==Fe.ghost){t.push({target:e,rect:T(e)});var r=o({},t[t.length-1].rect);if(e.thisAnimationDuration){var n=S(e,!0);n&&(r.top-=n.f,r.left-=n.e)}e.fromRect=r}}))},addAnimationState:function(e){t.push(e)},removeAnimationState:function(e){t.splice(function(e,t){for(var r in e)if(e.hasOwnProperty(r))for(var n in t)if(t.hasOwnProperty(n)&&t[n]===e[r][n])return Number(r);return-1}(t,{target:e}),1)},animateAll:function(r){var n=this;if(!this.options.animation)return clearTimeout(e),void("function"===typeof r&&r());var i=!1,a=0;t.forEach((function(e){var t=0,r=e.target,o=r.fromRect,s=T(r),l=r.prevFromRect,c=r.prevToRect,u=e.rect,d=S(r,!0);d&&(s.top-=d.f,s.left-=d.e),r.toRect=s,r.thisAnimationDuration&&D(l,s)&&!D(o,s)&&(u.top-s.top)/(u.left-s.left)===(o.top-s.top)/(o.left-s.left)&&(t=function(e,t,r,n){return Math.sqrt(Math.pow(t.top-e.top,2)+Math.pow(t.left-e.left,2))/Math.sqrt(Math.pow(t.top-r.top,2)+Math.pow(t.left-r.left,2))*n.animation}(u,l,c,n.options)),D(s,o)||(r.prevFromRect=o,r.prevToRect=s,t||(t=n.options.animation),n.animate(r,u,s,t)),t&&(i=!0,a=Math.max(a,t),clearTimeout(r.animationResetTimer),r.animationResetTimer=setTimeout((function(){r.animationTime=0,r.prevFromRect=null,r.fromRect=null,r.prevToRect=null,r.thisAnimationDuration=null}),t),r.thisAnimationDuration=t)})),clearTimeout(e),i?e=setTimeout((function(){"function"===typeof r&&r()}),a):"function"===typeof r&&r(),t=[]},animate:function(e,t,r,n){if(n){_(e,"transition",""),_(e,"transform","");var i=S(this.el),a=i&&i.a,o=i&&i.d,s=(t.left-r.left)/(a||1),l=(t.top-r.top)/(o||1);e.animatingX=!!s,e.animatingY=!!l,_(e,"transform","translate3d("+s+"px,"+l+"px,0)"),this.forRepaintDummy=function(e){return e.offsetWidth}(e),_(e,"transition","transform "+n+"ms"+(this.options.easing?" "+this.options.easing:"")),_(e,"transform","translate3d(0,0,0)"),"number"===typeof e.animated&&clearTimeout(e.animated),e.animated=setTimeout((function(){_(e,"transition",""),_(e,"transform",""),e.animated=!1,e.animatingX=!1,e.animatingY=!1}),n)}}}}var q=[],V={initializeByDefault:!0},W={mount:function(e){for(var t in V)V.hasOwnProperty(t)&&!(t in e)&&(e[t]=V[t]);q.forEach((function(t){if(t.pluginName===e.pluginName)throw"Sortable: Cannot mount plugin ".concat(e.pluginName," more than once")})),q.push(e)},pluginEvent:function(e,t,r){var n=this;this.eventCanceled=!1,r.cancel=function(){n.eventCanceled=!0};var i=e+"Global";q.forEach((function(n){t[n.pluginName]&&(t[n.pluginName][i]&&t[n.pluginName][i](o({sortable:t},r)),t.options[n.pluginName]&&t[n.pluginName][e]&&t[n.pluginName][e](o({sortable:t},r)))}))},initializePlugins:function(e,t,r,n){for(var i in q.forEach((function(n){var i=n.pluginName;if(e.options[i]||n.initializeByDefault){var o=new n(e,t,e.options);o.sortable=e,o.options=e.options,e[i]=o,a(r,o.defaults)}})),e.options)if(e.options.hasOwnProperty(i)){var o=this.modifyOption(e,i,e.options[i]);"undefined"!==typeof o&&(e.options[i]=o)}},getEventProperties:function(e,t){var r={};return q.forEach((function(n){"function"===typeof n.eventProperties&&a(r,n.eventProperties.call(t[n.pluginName],e))})),r},modifyOption:function(e,t,r){var n;return q.forEach((function(i){e[i.pluginName]&&i.optionListeners&&"function"===typeof i.optionListeners[t]&&(n=i.optionListeners[t].call(e[i.pluginName],r))})),n}};function G(e){var t=e.sortable,r=e.rootEl,n=e.name,i=e.targetEl,a=e.cloneEl,s=e.toEl,l=e.fromEl,d=e.oldIndex,p=e.newIndex,h=e.oldDraggableIndex,b=e.newDraggableIndex,m=e.originalEvent,f=e.putSortable,v=e.extraEventProperties;if(t=t||r&&r[R]){var g,y=t.options,O="on"+n.charAt(0).toUpperCase()+n.substr(1);!window.CustomEvent||c||u?(g=document.createEvent("Event")).initEvent(n,!0,!0):g=new CustomEvent(n,{bubbles:!0,cancelable:!0}),g.to=s||r,g.from=l||r,g.item=i||r,g.clone=a,g.oldIndex=d,g.newIndex=p,g.oldDraggableIndex=h,g.newDraggableIndex=b,g.originalEvent=m,g.pullMode=f?f.lastPutMode:void 0;var j=o({},v,W.getEventProperties(n,t));for(var w in j)g[w]=j[w];r&&r.dispatchEvent(g),y[O]&&y[O].call(t,g)}}var J=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=r.evt,i=s(r,["evt"]);W.pluginEvent.bind(Fe)(e,t,o({dragEl:Y,parentEl:H,ghostEl:X,rootEl:K,nextEl:$,lastDownEl:Z,cloneEl:Q,cloneHidden:ee,dragStarted:he,putSortable:oe,activeSortable:Fe.active,originalEvent:n,oldIndex:te,oldDraggableIndex:ne,newIndex:re,newDraggableIndex:ie,hideGhostForTarget:Ne,unhideGhostForTarget:Pe,cloneNowHidden:function(){ee=!0},cloneNowShown:function(){ee=!1},dispatchSortableEvent:function(e){z({sortable:t,name:e,originalEvent:n})}},i))};function z(e){G(o({putSortable:oe,cloneEl:Q,targetEl:Y,rootEl:K,oldIndex:te,oldDraggableIndex:ne,newIndex:re,newDraggableIndex:ie},e))}var Y,H,X,K,$,Z,Q,ee,te,re,ne,ie,ae,oe,se,le,ce,ue,de,pe,he,be,me,fe,ve,ge=!1,ye=!1,Oe=[],je=!1,we=!1,ke=[],_e=!1,Se=[],Ie="undefined"!==typeof document,xe=h,Te=u||c?"cssFloat":"float",Ee=Ie&&!b&&!h&&"draggable"in document.createElement("div"),Ae=function(){if(Ie){if(c)return!1;var e=document.createElement("x");return e.style.cssText="pointer-events:auto","auto"===e.style.pointerEvents}}(),Me=function(e,t){var r=_(e),n=parseInt(r.width)-parseInt(r.paddingLeft)-parseInt(r.paddingRight)-parseInt(r.borderLeftWidth)-parseInt(r.borderRightWidth),i=A(e,0,t),a=A(e,1,t),o=i&&_(i),s=a&&_(a),l=o&&parseInt(o.marginLeft)+parseInt(o.marginRight)+T(i).width,c=s&&parseInt(s.marginLeft)+parseInt(s.marginRight)+T(a).width;if("flex"===r.display)return"column"===r.flexDirection||"column-reverse"===r.flexDirection?"vertical":"horizontal";if("grid"===r.display)return r.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(i&&o.float&&"none"!==o.float){var u="left"===o.float?"left":"right";return!a||"both"!==s.clear&&s.clear!==u?"horizontal":"vertical"}return i&&("block"===o.display||"flex"===o.display||"table"===o.display||"grid"===o.display||l>=n&&"none"===r[Te]||a&&"none"===r[Te]&&l+c>n)?"vertical":"horizontal"},Ce=function(e){function t(e,r){return function(n,i,a,o){var s=n.options.group.name&&i.options.group.name&&n.options.group.name===i.options.group.name;if(null==e&&(r||s))return!0;if(null==e||!1===e)return!1;if(r&&"clone"===e)return e;if("function"===typeof e)return t(e(n,i,a,o),r)(n,i,a,o);var l=(r?n:i).options.group.name;return!0===e||"string"===typeof e&&e===l||e.join&&e.indexOf(l)>-1}}var r={},i=e.group;i&&"object"==n(i)||(i={name:i}),r.name=i.name,r.checkPull=t(i.pull,!0),r.checkPut=t(i.put),r.revertClone=i.revertClone,e.group=r},Ne=function(){!Ae&&X&&_(X,"display","none")},Pe=function(){!Ae&&X&&_(X,"display","")};Ie&&document.addEventListener("click",(function(e){if(ye)return e.preventDefault(),e.stopPropagation&&e.stopPropagation(),e.stopImmediatePropagation&&e.stopImmediatePropagation(),ye=!1,!1}),!0);var De=function(e){if(Y){var t=function(e,t){var r;return Oe.some((function(n){if(!M(n)){var i=T(n),a=n[R].options.emptyInsertThreshold,o=e>=i.left-a&&e<=i.right+a,s=t>=i.top-a&&t<=i.bottom+a;return a&&o&&s?r=n:void 0}})),r}((e=e.touches?e.touches[0]:e).clientX,e.clientY);if(t){var r={};for(var n in e)e.hasOwnProperty(n)&&(r[n]=e[n]);r.target=r.rootEl=t,r.preventDefault=void 0,r.stopPropagation=void 0,t[R]._onDragOver(r)}}},Be=function(e){Y&&Y.parentNode[R]._isOutsideThisEl(e.target)};function Fe(e,t){if(!e||!e.nodeType||1!==e.nodeType)throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(e));this.el=e,this.options=t=a({},t),e[R]=this;var r={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(e.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return Me(e,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(e,t){e.setData("Text",t.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:!1!==Fe.supportPointer&&"PointerEvent"in window&&!p,emptyInsertThreshold:5};for(var n in W.initializePlugins(this,e,r),r)!(n in t)&&(t[n]=r[n]);for(var i in Ce(t),this)"_"===i.charAt(0)&&"function"===typeof this[i]&&(this[i]=this[i].bind(this));this.nativeDraggable=!t.forceFallback&&Ee,this.nativeDraggable&&(this.options.touchStartThreshold=1),t.supportPointer?f(e,"pointerdown",this._onTapStart):(f(e,"mousedown",this._onTapStart),f(e,"touchstart",this._onTapStart)),this.nativeDraggable&&(f(e,"dragover",this),f(e,"dragenter",this)),Oe.push(this.el),t.store&&t.store.get&&this.sort(t.store.get(this)||[]),a(this,U())}function Le(e,t,r,n,i,a,o,s){var l,d,p=e[R],h=p.options.onMove;return!window.CustomEvent||c||u?(l=document.createEvent("Event")).initEvent("move",!0,!0):l=new CustomEvent("move",{bubbles:!0,cancelable:!0}),l.to=t,l.from=e,l.dragged=r,l.draggedRect=n,l.related=i||t,l.relatedRect=a||T(t),l.willInsertAfter=s,l.originalEvent=o,e.dispatchEvent(l),h&&(d=h.call(p,l,o)),d}function Re(e){e.draggable=!1}function Ue(){_e=!1}function qe(e){for(var t=e.tagName+e.className+e.src+e.href+e.textContent,r=t.length,n=0;r--;)n+=t.charCodeAt(r);return n.toString(36)}function Ve(e){return setTimeout(e,0)}function We(e){return clearTimeout(e)}Fe.prototype={constructor:Fe,_isOutsideThisEl:function(e){this.el.contains(e)||e===this.el||(be=null)},_getDirection:function(e,t){return"function"===typeof this.options.direction?this.options.direction.call(this,e,t,Y):this.options.direction},_onTapStart:function(e){if(e.cancelable){var t=this,r=this.el,n=this.options,i=n.preventOnFilter,a=e.type,o=e.touches&&e.touches[0]||e.pointerType&&"touch"===e.pointerType&&e,s=(o||e).target,l=e.target.shadowRoot&&(e.path&&e.path[0]||e.composedPath&&e.composedPath()[0])||s,c=n.filter;if(function(e){Se.length=0;var t=e.getElementsByTagName("input"),r=t.length;for(;r--;){var n=t[r];n.checked&&Se.push(n)}}(r),!Y&&!(/mousedown|pointerdown/.test(a)&&0!==e.button||n.disabled)&&!l.isContentEditable&&(this.nativeDraggable||!p||!s||"SELECT"!==s.tagName.toUpperCase())&&(!(s=O(s,n.draggable,r,!1))||!s.animated)&&Z!==s){if(te=C(s),ne=C(s,n.draggable),"function"===typeof c){if(c.call(this,e,s,this))return z({sortable:t,rootEl:l,name:"filter",targetEl:s,toEl:r,fromEl:r}),J("filter",t,{evt:e}),void(i&&e.cancelable&&e.preventDefault())}else if(c&&(c=c.split(",").some((function(n){if(n=O(l,n.trim(),r,!1))return z({sortable:t,rootEl:n,name:"filter",targetEl:s,fromEl:r,toEl:r}),J("filter",t,{evt:e}),!0}))))return void(i&&e.cancelable&&e.preventDefault());n.handle&&!O(l,n.handle,r,!1)||this._prepareDragStart(e,o,s)}}},_prepareDragStart:function(e,t,r){var n,i=this,a=i.el,o=i.options,s=a.ownerDocument;if(r&&!Y&&r.parentNode===a){var l=T(r);if(K=a,H=(Y=r).parentNode,$=Y.nextSibling,Z=r,ae=o.group,Fe.dragged=Y,se={target:Y,clientX:(t||e).clientX,clientY:(t||e).clientY},de=se.clientX-l.left,pe=se.clientY-l.top,this._lastX=(t||e).clientX,this._lastY=(t||e).clientY,Y.style["will-change"]="all",n=function(){J("delayEnded",i,{evt:e}),Fe.eventCanceled?i._onDrop():(i._disableDelayedDragEvents(),!d&&i.nativeDraggable&&(Y.draggable=!0),i._triggerDragStart(e,t),z({sortable:i,name:"choose",originalEvent:e}),k(Y,o.chosenClass,!0))},o.ignore.split(",").forEach((function(e){I(Y,e.trim(),Re)})),f(s,"dragover",De),f(s,"mousemove",De),f(s,"touchmove",De),f(s,"mouseup",i._onDrop),f(s,"touchend",i._onDrop),f(s,"touchcancel",i._onDrop),d&&this.nativeDraggable&&(this.options.touchStartThreshold=4,Y.draggable=!0),J("delayStart",this,{evt:e}),!o.delay||o.delayOnTouchOnly&&!t||this.nativeDraggable&&(u||c))n();else{if(Fe.eventCanceled)return void this._onDrop();f(s,"mouseup",i._disableDelayedDrag),f(s,"touchend",i._disableDelayedDrag),f(s,"touchcancel",i._disableDelayedDrag),f(s,"mousemove",i._delayedDragTouchMoveHandler),f(s,"touchmove",i._delayedDragTouchMoveHandler),o.supportPointer&&f(s,"pointermove",i._delayedDragTouchMoveHandler),i._dragStartTimer=setTimeout(n,o.delay)}}},_delayedDragTouchMoveHandler:function(e){var t=e.touches?e.touches[0]:e;Math.max(Math.abs(t.clientX-this._lastX),Math.abs(t.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){Y&&Re(Y),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var e=this.el.ownerDocument;v(e,"mouseup",this._disableDelayedDrag),v(e,"touchend",this._disableDelayedDrag),v(e,"touchcancel",this._disableDelayedDrag),v(e,"mousemove",this._delayedDragTouchMoveHandler),v(e,"touchmove",this._delayedDragTouchMoveHandler),v(e,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(e,t){t=t||"touch"==e.pointerType&&e,!this.nativeDraggable||t?this.options.supportPointer?f(document,"pointermove",this._onTouchMove):f(document,t?"touchmove":"mousemove",this._onTouchMove):(f(Y,"dragend",this),f(K,"dragstart",this._onDragStart));try{document.selection?Ve((function(){document.selection.empty()})):window.getSelection().removeAllRanges()}catch(r){}},_dragStarted:function(e,t){if(ge=!1,K&&Y){J("dragStarted",this,{evt:t}),this.nativeDraggable&&f(document,"dragover",Be);var r=this.options;!e&&k(Y,r.dragClass,!1),k(Y,r.ghostClass,!0),Fe.active=this,e&&this._appendGhost(),z({sortable:this,name:"start",originalEvent:t})}else this._nulling()},_emulateDragOver:function(){if(le){this._lastX=le.clientX,this._lastY=le.clientY,Ne();for(var e=document.elementFromPoint(le.clientX,le.clientY),t=e;e&&e.shadowRoot&&(e=e.shadowRoot.elementFromPoint(le.clientX,le.clientY))!==t;)t=e;if(Y.parentNode[R]._isOutsideThisEl(e),t)do{if(t[R]){if(t[R]._onDragOver({clientX:le.clientX,clientY:le.clientY,target:e,rootEl:t})&&!this.options.dragoverBubble)break}e=t}while(t=t.parentNode);Pe()}},_onTouchMove:function(e){if(se){var t=this.options,r=t.fallbackTolerance,n=t.fallbackOffset,i=e.touches?e.touches[0]:e,a=X&&S(X,!0),o=X&&a&&a.a,s=X&&a&&a.d,l=xe&&ve&&N(ve),c=(i.clientX-se.clientX+n.x)/(o||1)+(l?l[0]-ke[0]:0)/(o||1),u=(i.clientY-se.clientY+n.y)/(s||1)+(l?l[1]-ke[1]:0)/(s||1);if(!Fe.active&&!ge){if(r&&Math.max(Math.abs(i.clientX-this._lastX),Math.abs(i.clientY-this._lastY))<r)return;this._onDragStart(e,!0)}if(X){a?(a.e+=c-(ce||0),a.f+=u-(ue||0)):a={a:1,b:0,c:0,d:1,e:c,f:u};var d="matrix(".concat(a.a,",").concat(a.b,",").concat(a.c,",").concat(a.d,",").concat(a.e,",").concat(a.f,")");_(X,"webkitTransform",d),_(X,"mozTransform",d),_(X,"msTransform",d),_(X,"transform",d),ce=c,ue=u,le=i}e.cancelable&&e.preventDefault()}},_appendGhost:function(){if(!X){var e=this.options.fallbackOnBody?document.body:K,t=T(Y,!0,xe,!0,e),r=this.options;if(xe){for(ve=e;"static"===_(ve,"position")&&"none"===_(ve,"transform")&&ve!==document;)ve=ve.parentNode;ve!==document.body&&ve!==document.documentElement?(ve===document&&(ve=x()),t.top+=ve.scrollTop,t.left+=ve.scrollLeft):ve=x(),ke=N(ve)}k(X=Y.cloneNode(!0),r.ghostClass,!1),k(X,r.fallbackClass,!0),k(X,r.dragClass,!0),_(X,"transition",""),_(X,"transform",""),_(X,"box-sizing","border-box"),_(X,"margin",0),_(X,"top",t.top),_(X,"left",t.left),_(X,"width",t.width),_(X,"height",t.height),_(X,"opacity","0.8"),_(X,"position",xe?"absolute":"fixed"),_(X,"zIndex","100000"),_(X,"pointerEvents","none"),Fe.ghost=X,e.appendChild(X),_(X,"transform-origin",de/parseInt(X.style.width)*100+"% "+pe/parseInt(X.style.height)*100+"%")}},_onDragStart:function(e,t){var r=this,n=e.dataTransfer,i=r.options;J("dragStart",this,{evt:e}),Fe.eventCanceled?this._onDrop():(J("setupClone",this),Fe.eventCanceled||((Q=L(Y)).draggable=!1,Q.style["will-change"]="",this._hideClone(),k(Q,this.options.chosenClass,!1),Fe.clone=Q),r.cloneId=Ve((function(){J("clone",r),Fe.eventCanceled||(r.options.removeCloneOnHide||K.insertBefore(Q,Y),r._hideClone(),z({sortable:r,name:"clone"}))})),!t&&k(Y,i.dragClass,!0),t?(ye=!0,r._loopId=setInterval(r._emulateDragOver,50)):(v(document,"mouseup",r._onDrop),v(document,"touchend",r._onDrop),v(document,"touchcancel",r._onDrop),n&&(n.effectAllowed="move",i.setData&&i.setData.call(r,n,Y)),f(document,"drop",r),_(Y,"transform","translateZ(0)")),ge=!0,r._dragStartId=Ve(r._dragStarted.bind(r,t,e)),f(document,"selectstart",r),he=!0,p&&_(document.body,"user-select","none"))},_onDragOver:function(e){var t,r,n,i,a=this.el,s=e.target,l=this.options,c=l.group,u=Fe.active,d=ae===c,p=l.sort,h=oe||u,b=this,m=!1;if(!_e){if(void 0!==e.preventDefault&&e.cancelable&&e.preventDefault(),s=O(s,l.draggable,a,!0),B("dragOver"),Fe.eventCanceled)return m;if(Y.contains(e.target)||s.animated&&s.animatingX&&s.animatingY||b._ignoreWhileAnimating===s)return U(!1);if(ye=!1,u&&!l.disabled&&(d?p||(n=!K.contains(Y)):oe===this||(this.lastPutMode=ae.checkPull(this,u,Y,e))&&c.checkPut(this,u,Y,e))){if(i="vertical"===this._getDirection(e,s),t=T(Y),B("dragOverValid"),Fe.eventCanceled)return m;if(n)return H=K,L(),this._hideClone(),B("revert"),Fe.eventCanceled||($?K.insertBefore(Y,$):K.appendChild(Y)),U(!0);var f=M(a,l.draggable);if(!f||function(e,t,r){var n=T(M(r.el,r.options.draggable)),i=10;return t?e.clientX>n.right+i||e.clientX<=n.right&&e.clientY>n.bottom&&e.clientX>=n.left:e.clientX>n.right&&e.clientY>n.top||e.clientX<=n.right&&e.clientY>n.bottom+i}(e,i,this)&&!f.animated){if(f===Y)return U(!1);if(f&&a===e.target&&(s=f),s&&(r=T(s)),!1!==Le(K,a,Y,t,s,r,e,!!s))return L(),a.appendChild(Y),H=a,q(),U(!0)}else if(s.parentNode===a){r=T(s);var v,g,y,j=Y.parentNode!==a,w=!function(e,t,r){var n=r?e.left:e.top,i=r?e.right:e.bottom,a=r?e.width:e.height,o=r?t.left:t.top,s=r?t.right:t.bottom,l=r?t.width:t.height;return n===o||i===s||n+a/2===o+l/2}(Y.animated&&Y.toRect||t,s.animated&&s.toRect||r,i),S=i?"top":"left",I=E(s,"top","top")||E(Y,"top","top"),x=I?I.scrollTop:void 0;if(be!==s&&(g=r[S],je=!1,we=!w&&l.invertSwap||j),0!==(v=function(e,t,r,n,i,a,o,s){var l=n?e.clientY:e.clientX,c=n?r.height:r.width,u=n?r.top:r.left,d=n?r.bottom:r.right,p=!1;if(!o)if(s&&fe<c*i){if(!je&&(1===me?l>u+c*a/2:l<d-c*a/2)&&(je=!0),je)p=!0;else if(1===me?l<u+fe:l>d-fe)return-me}else if(l>u+c*(1-i)/2&&l<d-c*(1-i)/2)return function(e){return C(Y)<C(e)?1:-1}(t);if((p=p||o)&&(l<u+c*a/2||l>d-c*a/2))return l>u+c/2?1:-1;return 0}(e,s,r,i,w?1:l.swapThreshold,null==l.invertedSwapThreshold?l.swapThreshold:l.invertedSwapThreshold,we,be===s))){var A=C(Y);do{A-=v,y=H.children[A]}while(y&&("none"===_(y,"display")||y===X))}if(0===v||y===s)return U(!1);be=s,me=v;var N=s.nextElementSibling,P=!1,D=Le(K,a,Y,t,s,r,e,P=1===v);if(!1!==D)return 1!==D&&-1!==D||(P=1===D),_e=!0,setTimeout(Ue,30),L(),P&&!N?a.appendChild(Y):s.parentNode.insertBefore(Y,P?N:s),I&&F(I,0,x-I.scrollTop),H=Y.parentNode,void 0===g||we||(fe=Math.abs(g-T(s)[S])),q(),U(!0)}if(a.contains(Y))return U(!1)}return!1}function B(l,c){J(l,b,o({evt:e,isOwner:d,axis:i?"vertical":"horizontal",revert:n,dragRect:t,targetRect:r,canSort:p,fromSortable:h,target:s,completed:U,onMove:function(r,n){return Le(K,a,Y,t,r,T(r),e,n)},changed:q},c))}function L(){B("dragOverAnimationCapture"),b.captureAnimationState(),b!==h&&h.captureAnimationState()}function U(t){return B("dragOverCompleted",{insertion:t}),t&&(d?u._hideClone():u._showClone(b),b!==h&&(k(Y,oe?oe.options.ghostClass:u.options.ghostClass,!1),k(Y,l.ghostClass,!0)),oe!==b&&b!==Fe.active?oe=b:b===Fe.active&&oe&&(oe=null),h===b&&(b._ignoreWhileAnimating=s),b.animateAll((function(){B("dragOverAnimationComplete"),b._ignoreWhileAnimating=null})),b!==h&&(h.animateAll(),h._ignoreWhileAnimating=null)),(s===Y&&!Y.animated||s===a&&!s.animated)&&(be=null),l.dragoverBubble||e.rootEl||s===document||(Y.parentNode[R]._isOutsideThisEl(e.target),!t&&De(e)),!l.dragoverBubble&&e.stopPropagation&&e.stopPropagation(),m=!0}function q(){re=C(Y),ie=C(Y,l.draggable),z({sortable:b,name:"change",toEl:a,newIndex:re,newDraggableIndex:ie,originalEvent:e})}},_ignoreWhileAnimating:null,_offMoveEvents:function(){v(document,"mousemove",this._onTouchMove),v(document,"touchmove",this._onTouchMove),v(document,"pointermove",this._onTouchMove),v(document,"dragover",De),v(document,"mousemove",De),v(document,"touchmove",De)},_offUpEvents:function(){var e=this.el.ownerDocument;v(e,"mouseup",this._onDrop),v(e,"touchend",this._onDrop),v(e,"pointerup",this._onDrop),v(e,"touchcancel",this._onDrop),v(document,"selectstart",this)},_onDrop:function(e){var t=this.el,r=this.options;re=C(Y),ie=C(Y,r.draggable),J("drop",this,{evt:e}),H=Y&&Y.parentNode,re=C(Y),ie=C(Y,r.draggable),Fe.eventCanceled||(ge=!1,we=!1,je=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),We(this.cloneId),We(this._dragStartId),this.nativeDraggable&&(v(document,"drop",this),v(t,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),p&&_(document.body,"user-select",""),_(Y,"transform",""),e&&(he&&(e.cancelable&&e.preventDefault(),!r.dropBubble&&e.stopPropagation()),X&&X.parentNode&&X.parentNode.removeChild(X),(K===H||oe&&"clone"!==oe.lastPutMode)&&Q&&Q.parentNode&&Q.parentNode.removeChild(Q),Y&&(this.nativeDraggable&&v(Y,"dragend",this),Re(Y),Y.style["will-change"]="",he&&!ge&&k(Y,oe?oe.options.ghostClass:this.options.ghostClass,!1),k(Y,this.options.chosenClass,!1),z({sortable:this,name:"unchoose",toEl:H,newIndex:null,newDraggableIndex:null,originalEvent:e}),K!==H?(re>=0&&(z({rootEl:H,name:"add",toEl:H,fromEl:K,originalEvent:e}),z({sortable:this,name:"remove",toEl:H,originalEvent:e}),z({rootEl:H,name:"sort",toEl:H,fromEl:K,originalEvent:e}),z({sortable:this,name:"sort",toEl:H,originalEvent:e})),oe&&oe.save()):re!==te&&re>=0&&(z({sortable:this,name:"update",toEl:H,originalEvent:e}),z({sortable:this,name:"sort",toEl:H,originalEvent:e})),Fe.active&&(null!=re&&-1!==re||(re=te,ie=ne),z({sortable:this,name:"end",toEl:H,originalEvent:e}),this.save())))),this._nulling()},_nulling:function(){J("nulling",this),K=Y=H=X=$=Q=Z=ee=se=le=he=re=ie=te=ne=be=me=oe=ae=Fe.dragged=Fe.ghost=Fe.clone=Fe.active=null,Se.forEach((function(e){e.checked=!0})),Se.length=ce=ue=0},handleEvent:function(e){switch(e.type){case"drop":case"dragend":this._onDrop(e);break;case"dragenter":case"dragover":Y&&(this._onDragOver(e),function(e){e.dataTransfer&&(e.dataTransfer.dropEffect="move");e.cancelable&&e.preventDefault()}(e));break;case"selectstart":e.preventDefault()}},toArray:function(){for(var e,t=[],r=this.el.children,n=0,i=r.length,a=this.options;n<i;n++)O(e=r[n],a.draggable,this.el,!1)&&t.push(e.getAttribute(a.dataIdAttr)||qe(e));return t},sort:function(e,t){var r={},n=this.el;this.toArray().forEach((function(e,t){var i=n.children[t];O(i,this.options.draggable,n,!1)&&(r[e]=i)}),this),t&&this.captureAnimationState(),e.forEach((function(e){r[e]&&(n.removeChild(r[e]),n.appendChild(r[e]))})),t&&this.animateAll()},save:function(){var e=this.options.store;e&&e.set&&e.set(this)},closest:function(e,t){return O(e,t||this.options.draggable,this.el,!1)},option:function(e,t){var r=this.options;if(void 0===t)return r[e];var n=W.modifyOption(this,e,t);r[e]="undefined"!==typeof n?n:t,"group"===e&&Ce(r)},destroy:function(){J("destroy",this);var e=this.el;e[R]=null,v(e,"mousedown",this._onTapStart),v(e,"touchstart",this._onTapStart),v(e,"pointerdown",this._onTapStart),this.nativeDraggable&&(v(e,"dragover",this),v(e,"dragenter",this)),Array.prototype.forEach.call(e.querySelectorAll("[draggable]"),(function(e){e.removeAttribute("draggable")})),this._onDrop(),this._disableDelayedDragEvents(),Oe.splice(Oe.indexOf(this.el),1),this.el=e=null},_hideClone:function(){if(!ee){if(J("hideClone",this),Fe.eventCanceled)return;_(Q,"display","none"),this.options.removeCloneOnHide&&Q.parentNode&&Q.parentNode.removeChild(Q),ee=!0}},_showClone:function(e){if("clone"===e.lastPutMode){if(ee){if(J("showClone",this),Fe.eventCanceled)return;Y.parentNode!=K||this.options.group.revertClone?$?K.insertBefore(Q,$):K.appendChild(Q):K.insertBefore(Q,Y),this.options.group.revertClone&&this.animate(Y,Q),_(Q,"display",""),ee=!1}}else this._hideClone()}},Ie&&f(document,"touchmove",(function(e){(Fe.active||ge)&&e.cancelable&&e.preventDefault()})),Fe.utils={on:f,off:v,css:_,find:I,is:function(e,t){return!!O(e,t,e,!1)},extend:function(e,t){if(e&&t)for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);return e},throttle:B,closest:O,toggleClass:k,clone:L,index:C,nextTick:Ve,cancelNextTick:We,detectDirection:Me,getChild:A},Fe.get=function(e){return e[R]},Fe.mount=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];t[0].constructor===Array&&(t=t[0]),t.forEach((function(e){if(!e.prototype||!e.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(e));e.utils&&(Fe.utils=o({},Fe.utils,e.utils)),W.mount(e)}))},Fe.create=function(e,t){return new Fe(e,t)},Fe.version="1.13.0";var Ge,Je,ze,Ye,He,Xe,Ke=[],$e=!1;function Ze(){Ke.forEach((function(e){clearInterval(e.pid)})),Ke=[]}function Qe(){clearInterval(Xe)}var et=B((function(e,t,r,n){if(t.scroll){var i,a=(e.touches?e.touches[0]:e).clientX,o=(e.touches?e.touches[0]:e).clientY,s=t.scrollSensitivity,l=t.scrollSpeed,c=x(),u=!1;Je!==r&&(Je=r,Ze(),Ge=t.scroll,i=t.scrollFn,!0===Ge&&(Ge=P(r,!0)));var d=0,p=Ge;do{var h=p,b=T(h),m=b.top,f=b.bottom,v=b.left,g=b.right,y=b.width,O=b.height,j=void 0,w=void 0,k=h.scrollWidth,S=h.scrollHeight,I=_(h),E=h.scrollLeft,A=h.scrollTop;h===c?(j=y<k&&("auto"===I.overflowX||"scroll"===I.overflowX||"visible"===I.overflowX),w=O<S&&("auto"===I.overflowY||"scroll"===I.overflowY||"visible"===I.overflowY)):(j=y<k&&("auto"===I.overflowX||"scroll"===I.overflowX),w=O<S&&("auto"===I.overflowY||"scroll"===I.overflowY));var M=j&&(Math.abs(g-a)<=s&&E+y<k)-(Math.abs(v-a)<=s&&!!E),C=w&&(Math.abs(f-o)<=s&&A+O<S)-(Math.abs(m-o)<=s&&!!A);if(!Ke[d])for(var N=0;N<=d;N++)Ke[N]||(Ke[N]={});Ke[d].vx==M&&Ke[d].vy==C&&Ke[d].el===h||(Ke[d].el=h,Ke[d].vx=M,Ke[d].vy=C,clearInterval(Ke[d].pid),0==M&&0==C||(u=!0,Ke[d].pid=setInterval(function(){n&&0===this.layer&&Fe.active._onTouchMove(He);var t=Ke[this.layer].vy?Ke[this.layer].vy*l:0,r=Ke[this.layer].vx?Ke[this.layer].vx*l:0;"function"===typeof i&&"continue"!==i.call(Fe.dragged.parentNode[R],r,t,e,He,Ke[this.layer].el)||F(Ke[this.layer].el,r,t)}.bind({layer:d}),24))),d++}while(t.bubbleScroll&&p!==c&&(p=P(p,!1)));$e=u}}),30),tt=function(e){var t=e.originalEvent,r=e.putSortable,n=e.dragEl,i=e.activeSortable,a=e.dispatchSortableEvent,o=e.hideGhostForTarget,s=e.unhideGhostForTarget;if(t){var l=r||i;o();var c=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:t,u=document.elementFromPoint(c.clientX,c.clientY);s(),l&&!l.el.contains(u)&&(a("spill"),this.onSpill({dragEl:n,putSortable:r}))}};function rt(){}function nt(){}rt.prototype={startIndex:null,dragStart:function(e){var t=e.oldDraggableIndex;this.startIndex=t},onSpill:function(e){var t=e.dragEl,r=e.putSortable;this.sortable.captureAnimationState(),r&&r.captureAnimationState();var n=A(this.sortable.el,this.startIndex,this.options);n?this.sortable.el.insertBefore(t,n):this.sortable.el.appendChild(t),this.sortable.animateAll(),r&&r.animateAll()},drop:tt},a(rt,{pluginName:"revertOnSpill"}),nt.prototype={onSpill:function(e){var t=e.dragEl,r=e.putSortable||this.sortable;r.captureAnimationState(),t.parentNode&&t.parentNode.removeChild(t),r.animateAll()},drop:tt},a(nt,{pluginName:"removeOnSpill"});Fe.mount(new function(){function e(){for(var e in this.defaults={scroll:!0,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0},this)"_"===e.charAt(0)&&"function"===typeof this[e]&&(this[e]=this[e].bind(this))}return e.prototype={dragStarted:function(e){var t=e.originalEvent;this.sortable.nativeDraggable?f(document,"dragover",this._handleAutoScroll):this.options.supportPointer?f(document,"pointermove",this._handleFallbackAutoScroll):t.touches?f(document,"touchmove",this._handleFallbackAutoScroll):f(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(e){var t=e.originalEvent;this.options.dragOverBubble||t.rootEl||this._handleAutoScroll(t)},drop:function(){this.sortable.nativeDraggable?v(document,"dragover",this._handleAutoScroll):(v(document,"pointermove",this._handleFallbackAutoScroll),v(document,"touchmove",this._handleFallbackAutoScroll),v(document,"mousemove",this._handleFallbackAutoScroll)),Qe(),Ze(),clearTimeout(j),j=void 0},nulling:function(){He=Je=Ge=$e=Xe=ze=Ye=null,Ke.length=0},_handleFallbackAutoScroll:function(e){this._handleAutoScroll(e,!0)},_handleAutoScroll:function(e,t){var r=this,n=(e.touches?e.touches[0]:e).clientX,i=(e.touches?e.touches[0]:e).clientY,a=document.elementFromPoint(n,i);if(He=e,t||u||c||p){et(e,this.options,a,t);var o=P(a,!0);!$e||Xe&&n===ze&&i===Ye||(Xe&&Qe(),Xe=setInterval((function(){var a=P(document.elementFromPoint(n,i),!0);a!==o&&(o=a,Ze()),et(e,r.options,a,t)}),10),ze=n,Ye=i)}else{if(!this.options.bubbleScroll||P(a,!0)===x())return void Ze();et(e,this.options,P(a,!1),!1)}}},a(e,{pluginName:"scroll",initializeByDefault:!0})}),Fe.mount(nt,rt),t.a=Fe}}]);
//# sourceMappingURL=92.f9d8ba6e.chunk.js.map