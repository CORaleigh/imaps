(this.webpackJsonpimaps=this.webpackJsonpimaps||[]).push([[194,260],{1184:function(e,t,i){},1397:function(e,t,i){"use strict";i.r(t),i.d(t,"Layers",(function(){return p}));var l=i(1),n=i(1183),r=i(107),a=i(370);const o=e=>{const t=e.item;if("group"!=t.layer.type&&void 0!=t.layer.type){const e=document.createElement("calcite-slider");e.setAttribute("min","0"),e.setAttribute("max","100"),e.setAttribute("step","1"),e.setAttribute("snap",""),e.setAttribute("min-label","0%"),e.setAttribute("max-label","100%"),e.setAttribute("label-handles",""),e.setAttribute("value",Math.round(100*(null===t||void 0===t?void 0:t.layer.opacity)).toString()),e.setAttribute("data",t.layer.id),e.addEventListener("calciteSliderUpdate",(e=>{var i;t.layer.opacity=Math.round(parseInt(null===e||void 0===e||null===(i=e.target)||void 0===i?void 0:i.getAttribute("value")))/100}),{passive:!0}),t.panel={content:[e,"legend"],open:!1}}t.open=t.layer.visible,t.layer.watch("visible",(e=>{t.open=e,e&&(t.layer.parent&&"group"===t.layer.parent.type&&(t.layer.parent.visible=!0),t.layer.parent.parent&&"group"===t.layer.parent.parent.type&&(t.layer.parent.parent.visible=!0))})),u(t)},s=[{expression:"First(Split($feature['SITE_ADDRESS'], ' '))",title:"Address"},{expression:"$feature['PIN_NUM']",title:"PIN"},{expression:"$feature['REID']",title:"REID"},{expression:'When(IsEmpty($feature["SALE_DATE"]),null, Concatenate(Month($feature["SALE_DATE"])+1, \'/\',Day($feature["SALE_DATE"]), \'/\',Year($feature["SALE_DATE"])))',title:"Sale Date"},{expression:"Text($feature.TOTSALPRICE,'$#,###')",title:"Sale Price"}],u=e=>{if("Property"===e.layer.title&&"group"!=e.layer.type&&0===e.actionsSections.length){const t=new r.a;t.addMany(s.map((e=>new a.a({active:!1,title:e.title,visible:!0})))),e.actionsSections.push(t),e.actionsOpen=!0,setTimeout((()=>{const e=document.createElement("h4");e.textContent="Labels",e.setAttribute("style","padding: 0.5em;margin: 0;");const t=document.querySelector(".esri-layer-list__item-actions");(null===t||void 0===t?void 0:t.parentElement)&&t.prepend(e)}),500)}},c=(e,t)=>{e||(e=""),t.operationalItems.forEach((i=>{if("group"===i.layer.type){let d=!1;var l,n,r,a,o,s,u,c;if(i.layer.layers.forEach((t=>{t.title.toLowerCase().includes(e.toLowerCase())?(t.listMode="show",d=!0):t.listMode="hide","group"===t.type&&t.layers.forEach((i=>{i.title.toLowerCase().includes(e.toLowerCase())?(t.listMode="show",i.listMode="show",d=!0):i.listMode="hide"}))})),i.open=e.length>0&&d,!e.length||d)null===(l=document.getElementById(`${t.id}_${i.uid}__title`))||void 0===l||null===(n=l.parentElement)||void 0===n||null===(r=n.parentElement)||void 0===r||null===(a=r.parentElement)||void 0===a||a.removeAttribute("hidden");if(!d)null===(o=document.getElementById(`${t.id}_${i.uid}__title`))||void 0===o||null===(s=o.parentElement)||void 0===s||null===(u=s.parentElement)||void 0===u||null===(c=u.parentElement)||void 0===c||c.setAttribute("hidden","")}}))};i(1184);var d=i(0);const p=e=>{const t=Object(l.useRef)(null),i=Object(l.useRef)(null),r=Object(l.useRef)();return Object(l.useEffect)((()=>{var l,a;const u=new n.a({container:t.current,view:e.view,listItemCreatedFunction:o,visibleElements:{statusIndicators:!0}});return r.current=u,u.on("trigger-action",(e=>{"Property"===e.item.layer.title&&(e=>{if("Property"===e.item.layer.title){e.item.layer.labelsVisible||(e.item.layer.labelsVisible=!0);const t=e.item.actionsSections.getItemAt(0).filter((e=>e.value)).map((e=>e.title)),i=s.filter((e=>t.includes(e.title))),l=i.map((e=>e.expression)),n=l.join("+ TextFormatting.NewLine+");e.item.layer.labelingInfo=[],e.item.layer.labelingInfo=[{symbol:{type:"text",color:"black",haloColor:"white",haloSize:1,font:{family:"AvenirNext LT Pro Regular",style:"normal",weight:"bold"}},labelExpressionInfo:{expression:n},maxScale:0,minScale:5e3}]}})(e)})),null===(l=i.current)||void 0===l||l.addEventListener("calciteInputInput",(e=>{c(e.target.value,u)})),null===(a=i.current)||void 0===a||a.addEventListener("focusout",(e=>{c(e.target.value,u)})),()=>{var e;null===(e=i.current)||void 0===e||e.removeEventListener("calciteInputInput",(e=>{c(e.target.value,u)})),u&&u.destroy()}}),[e.view]),Object(d.jsxs)("div",{className:"panel",children:[Object(d.jsxs)("div",{className:"row sticky",children:[Object(d.jsx)("calcite-input",{ref:i,clearable:!0,placeholder:"Filter by layer name",scale:"m",id:"layerSearch"}),Object(d.jsx)("calcite-action",{icon:"viewHide",scale:"m",onClick:()=>{(e=>{null===e||void 0===e||e.operationalItems.forEach((e=>{e.visible="Property"===e.title}))})(r.current)}})]}),Object(d.jsx)("div",{ref:t})]})};t.default=p},587:function(e,t){function i(e){return Promise.resolve().then((function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}))}i.keys=function(){return[]},i.resolve=i,e.exports=i,i.id=587}}]);
//# sourceMappingURL=194.b2ff63a9.chunk.js.map