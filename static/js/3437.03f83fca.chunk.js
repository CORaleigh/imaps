(globalThis.webpackChunkimaps=globalThis.webpackChunkimaps||[]).push([[3437],{67435:e=>{function t(e){return Promise.resolve().then((()=>{var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}))}t.keys=()=>[],t.resolve=t,t.id=67435,e.exports=t},75072:(e,t,r)=>{"use strict";r.r(t),r.d(t,{LocationSearch:()=>j,default:()=>N});var n=r(72791),s=r(14076),o=r(83942),i=r(83589),l=(r(76200),r(23084),r(55465),r(27366)),a=(r(59486),r(46784)),c=r(49861),u=(r(63780),r(93169),r(25243)),d=r(69912),p=r(78952);let g=class extends a.wq{constructor(e){super(e),this.addresses=null,this.categories=null,this.countryCode=null,this.locationType=null,this.outSpatialReference=null}};(0,l._)([(0,c.Cb)({type:[Object],json:{read:{reader:e=>e&&e.records?e.records.map((e=>e.attributes)):null},write:{writer:(e,t)=>{const r=[];Array.isArray(e)&&e.forEach((e=>{r.push({attributes:e})})),t.addresses={records:r}}}}})],g.prototype,"addresses",void 0),(0,l._)([(0,c.Cb)({type:[String],json:{read:{source:"category",reader:e=>e?e.split(","):null},write:{target:"category",writer:(e,t)=>{t.category=e?e.join(","):null}}}})],g.prototype,"categories",void 0),(0,l._)([(0,c.Cb)({type:String,json:{read:{source:"sourceCountry"},write:{target:"sourceCountry"}}})],g.prototype,"countryCode",void 0),(0,l._)([(0,c.Cb)({type:String,json:{write:!0}})],g.prototype,"locationType",void 0),(0,l._)([(0,c.Cb)({type:p.Z,json:{read:{source:"outSR"},write:{target:"outSR"}}})],g.prototype,"outSpatialReference",void 0),g=(0,l._)([(0,d.j)("esri.rest.support.AddressesToLocationsParameters")],g),g.from=(0,u.se)(g);r(88736),r(1360);var f=r(20804),h=r(44443),m=r(91946),v=r(16455),y=r(52639),b=r(61459),w=r(51995);const x=e=>{e.graphics.removeMany(e.graphics.filter((e=>"location"===e.getAttribute("type"))))},S=(e,t)=>{"point"===t.type?e.graphics.add(new y.Z({geometry:t,attributes:{type:"location"},symbol:new m.Z({url:"assets/pin.svg",height:36,width:36})})):e.graphics.add(new y.Z({geometry:t,attributes:{type:"location"},symbol:new b.Z({color:new w.Z([0,255,255,.25]),outline:{color:new w.Z([0,255,255,1]),width:2}})}))};var E=r(80184);const j=e=>{const t=(0,n.useRef)(null),r=(0,n.useRef)(),l=(0,n.useRef)(),a=(0,n.useRef)(null),[c,u]=(0,n.useState)([]),d=(0,n.useRef)([]),p=(0,n.useRef)(),g=(0,n.useRef)(null);return(0,n.useEffect)((()=>{var n;const c=[],b=new s.Z({view:e.view,maxSuggestions:30,searchAllEnabled:!0,popupEnabled:!1,container:t.current});b.watch("activeSource",(e=>{e&&("Intersection"!=e.name&&a.current&&(a.current.hidden=!0),b.clear())})),r.current=b,new Promise((e=>{const t=new v.default({portalItem:{id:"edb2153e06c2477995f95b27e5c24661"},title:"Intersection"});t.load().then((()=>{const r=new f.Z({name:"Intersection",placeholder:"Enter first street name",layer:t,autoNavigate:!1,resultGraphicEnabled:!1});e(r)}))})).then((e=>{b.sources.add(e)})),new Promise((e=>{e(new h.Z({name:"Street Address",placeholder:"Enter an address",url:"https://maps.raleighnc.gov/arcgis/rest/services/Locators/Locator/GeocodeServer",autoNavigate:!0,resultSymbol:new m.Z({url:"assets/pin.svg",height:36,width:36})}))})).then((e=>{b.sources.add(e)}));const w=new o.Z({view:e.view,container:g.current});return l.current=w,c.push(b.on("search-complete",(t=>{var r,n,s,o,i;(u([]),x(e.view),w.graphic=new y.Z,"Intersection"===t.results[0].source.name)?(p.current=null===t||void 0===t||null===(r=t.results[0])||void 0===r||null===(n=r.results[0])||void 0===n?void 0:n.feature,((e,t)=>new Promise((r=>{e.queryFeatures({geometry:t,outFields:["OBJECTID","CARTONAME"],returnGeometry:!0}).then((e=>{r(e.features)}))})))((null===t||void 0===t||null===(s=t.results[0])||void 0===s?void 0:s.source).layer,null===t||void 0===t||null===(o=t.results[0])||void 0===o||null===(i=o.results[0])||void 0===i?void 0:i.feature.geometry).then((e=>{u(e),d.current=e}))):t.results[0].results.forEach((t=>{w.graphic=t.feature,S(e.view,t.feature.geometry)}))}))),c.push(b.allSources.on("after-add",(e=>{if(e.item.layer){const t=e.item;t.name=e.item.layer.title,t.placeholder=e.item.layer.title}e.item.locator&&e.item.name.includes("World Geocoding")&&b.allSources.remove(e.item)}))),null===(n=a.current)||void 0===n||n.addEventListener("calciteComboboxItemChange",(t=>{setTimeout((()=>{((e,t,r,n)=>{const s=t.find((t=>t.getObjectId()===e));(0,i.h)("https://maps.raleighnc.gov/arcgis/rest/services/Locators/Locator/GeocodeServer",{address:{outSpatialReference:n.spatialReference,SingleLine:`${r.getAttribute("CARTONAME")} & ${s.getAttribute("CARTONAME")}`}}).then((e=>{e.length&&(n.goTo({target:e[0].location,zoom:17},{duration:1e3,easing:"ease"}),x(n),S(n,e[0].location))}))})(parseInt(t.detail.value),d.current,p.current,e.view)}))})),()=>{c.forEach((e=>{e.remove()})),w&&w.destroy(),b&&b.destroy()}}),[e.view]),(0,E.jsxs)("div",{className:"panel",children:[(0,E.jsxs)("div",{className:"flex",children:[(0,E.jsx)("div",{ref:t}),(0,E.jsx)("calcite-action",{icon:"trash",scale:"s",onClick:()=>{var t;null===(t=r.current)||void 0===t||t.clear(),x(e.view),l.current&&(l.current.graphic=new y.Z)}})]}),(0,E.jsx)("calcite-combobox",{id:"intersections",ref:a,label:"Intersections",placeholder:"Select intersecting street","selection-mode":"single",hidden:0===c.length?"":null,"max-items":"10",children:c.map((e=>(0,E.jsx)("calcite-combobox-item",{value:e.getObjectId(),"text-label":e.getAttribute("CARTONAME")},e.getObjectId())))}),(0,E.jsx)("div",{ref:g})]})},N=j},29616:(e,t,r)=>{"use strict";r.d(t,{Qc:()=>u,WU:()=>l,lt:()=>c,ti:()=>i});var n=r(643),s=r(36257);const o={ar:[".",","],bg:[",","\xa0"],bs:[",","."],ca:[",","."],cs:[",","\xa0"],da:[",","."],de:[",","."],"de-ch":[".","\u2019"],el:[",","."],en:[".",","],"en-au":[".",","],es:[",","."],"es-mx":[".",","],et:[",","\xa0"],fi:[",","\xa0"],fr:[",","\u202f"],"fr-ch":[",","\u202f"],he:[".",","],hi:[".",",","#,##,##0.###"],hr:[",","."],hu:[",","\xa0"],id:[",","."],it:[",","."],"it-ch":[".","\u2019"],ja:[".",","],ko:[".",","],lt:[",","\xa0"],lv:[",","\xa0"],mk:[",","."],nb:[",","\xa0"],nl:[",","."],pl:[",","\xa0"],pt:[",","."],"pt-pt":[",","\xa0"],ro:[",","."],ru:[",","\xa0"],sk:[",","\xa0"],sl:[",","."],sr:[",","."],sv:[",","\xa0"],th:[".",","],tr:[",","."],uk:[",","\xa0"],vi:[",","."],zh:[".",","]};function i(e){e||(e=(0,s.Kd)());let t=e in o;if(!t){const r=e.split("-");r.length>1&&r[0]in o&&(e=r[0],t=!0),t||(e="en")}const[r,n,i="#,##0.###"]=o[e];return{decimal:r,group:n,pattern:i}}function l(e,t){const r=i((t={...t}).locale);t.customs=r;const n=t.pattern||r.pattern;return isNaN(e)||Math.abs(e)===1/0?null:function(e,t,r){const n=(r=r||{}).customs.group,s=r.customs.decimal,o=t.split(";"),i=o[0];if((t=o[e<0?1:0]||"-"+i).includes("%"))e*=100;else if(t.includes("\u2030"))e*=1e3;else{if(t.includes("\xa4"))throw new Error("currency notation not supported");if(t.includes("E"))throw new Error("exponential notation not supported")}const l=a,c=i.match(l);if(!c)throw new Error("unable to find a number expression in pattern: "+t);return!1===r.fractional&&(r.places=0),t.replace(l,function(e,t,r){!0===(r=r||{}).places&&(r.places=0),r.places===1/0&&(r.places=6);const n=t.split("."),s="string"==typeof r.places&&r.places.indexOf(",");let o=r.places;s?o=r.places.substring(s+1):o>=0||(o=(n[1]||[]).length),r.round<0||(e=Number(e.toFixed(Number(o))));const i=String(Math.abs(e)).split("."),l=i[1]||"";if(n[1]||r.places){s&&(r.places=r.places.substring(0,s));const e=void 0!==r.places?r.places:n[1]&&n[1].lastIndexOf("0")+1;e>l.length&&(i[1]=l.padEnd(Number(e),"0")),o<l.length&&(i[1]=l.substr(0,Number(o)))}else i[1]&&i.pop();const a=n[0].replace(",","");let c=a.indexOf("0");-1!==c&&(c=a.length-c,c>i[0].length&&(i[0]=i[0].padStart(c,"0")),a.includes("#")||(i[0]=i[0].substr(i[0].length-c)));let u,d,p=n[0].lastIndexOf(",");if(-1!==p){u=n[0].length-p-1;const e=n[0].substr(0,p);p=e.lastIndexOf(","),-1!==p&&(d=e.length-p-1)}const g=[];for(let f=i[0];f;){const e=f.length-u;g.push(e>0?f.substr(e):f),f=e>0?f.slice(0,e):"",d&&(u=d,d=void 0)}return i[0]=g.reverse().join(r.group||","),i.join(r.decimal||".")}(e,c[0],{decimal:s,group:n,places:r.places,round:r.round}))}(e,n,t)}const a=/[#0,]*[#0](?:\.0*#*)?/;function c(e){const t=i((e=e||{}).locale),r=e.pattern||t.pattern,s=t.group,o=t.decimal;let l=1;if(r.includes("%"))l/=100;else if(r.includes("\u2030"))l/=1e3;else if(r.includes("\xa4"))throw new Error("currency notation not supported");const c=r.split(";");1===c.length&&c.push("-"+c[0]);const u=p(c,(t=>(t="(?:"+(0,n.Qs)(t,".")+")").replace(a,(t=>{const r={signed:!1,separator:e.strict?s:[s,""],fractional:e.fractional,decimal:o,exponent:!1},n=t.split(".");let i=e.places;1===n.length&&1!==l&&(n[1]="###"),1===n.length||0===i?r.fractional=!1:(void 0===i&&(i=e.pattern?n[1].lastIndexOf("0")+1:1/0),i&&null==e.fractional&&(r.fractional=!0),!e.places&&i<n[1].length&&(i+=","+n[1].length),r.places=i);const a=n[0].split(",");return a.length>1&&(r.groupSize=a.pop().length,a.length>1&&(r.groupSize2=a.pop().length)),"("+function(e){"places"in(e=e||{})||(e.places=1/0),"string"!=typeof e.decimal&&(e.decimal="."),"fractional"in e&&!/^0/.test(String(e.places))||(e.fractional=[!0,!1]),"exponent"in e||(e.exponent=[!0,!1]),"eSigned"in e||(e.eSigned=[!0,!1]);const t=d(e),r=p(e.fractional,(t=>{let r="";return t&&0!==e.places&&(r="\\"+e.decimal,e.places===1/0?r="(?:"+r+"\\d+)?":r+="\\d{"+e.places+"}"),r}),!0);let n=t+r;return r&&(n="(?:(?:"+n+")|(?:"+r+"))"),n+p(e.exponent,(t=>t?"([eE]"+d({signed:e.eSigned})+")":""))}(r)+")"}))),!0);return{regexp:u.replace(/[\xa0 ]/g,"[\\s\\xa0]"),group:s,decimal:o,factor:l}}function u(e,t){const r=c(t),n=new RegExp("^"+r.regexp+"$").exec(e);if(!n)return NaN;let s=n[1];if(!n[1]){if(!n[2])return NaN;s=n[2],r.factor*=-1}return s=s.replace(new RegExp("["+r.group+"\\s\\xa0]","g"),"").replace(r.decimal,"."),Number(s)*r.factor}function d(e){return"signed"in(e=e||{})||(e.signed=[!0,!1]),"separator"in e?"groupSize"in e||(e.groupSize=3):e.separator="",p(e.signed,(e=>e?"[-+]":""),!0)+p(e.separator,(t=>{if(!t)return"(?:\\d+)";" "===(t=(0,n.Qs)(t))?t="\\s":"\xa0"===t&&(t="\\s\\xa0");const r=e.groupSize,s=e.groupSize2;if(s){const e="(?:0|[1-9]\\d{0,"+(s-1)+"}(?:["+t+"]\\d{"+s+"})*["+t+"]\\d{"+r+"})";return r-s>0?"(?:"+e+"|(?:0|[1-9]\\d{0,"+(r-1)+"}))":e}return"(?:0|[1-9]\\d{0,"+(r-1)+"}(?:["+t+"]\\d{"+r+"})*)"}),!0)}const p=(e,t,r)=>{if(!(e instanceof Array))return t(e);const n=[];for(let s=0;s<e.length;s++)n.push(t(e[s]));return g(n.join("|"),r)},g=(e,t)=>"("+(t?"?:":"")+e+")"},93501:(e,t,r)=>{"use strict";r.d(t,{k:()=>i});var n=r(92026),s=r(68860),o=r(92975);function i(e,t,r){if((0,n.Wi)(t)||(0,n.Wi)(r)||r.vcsWkid||(0,o.fS)(t,r))return null;const i=(0,s._R)(t)/(0,s._R)(r);if(1===i)return null;switch(e){case"point":case"esriGeometryPoint":return e=>function(e,t){e&&null!=e.z&&(e.z*=t)}(e,i);case"polyline":case"esriGeometryPolyline":return e=>function(e,t){if(e)for(const r of e.paths)for(const e of r)e.length>2&&(e[2]*=t)}(e,i);case"polygon":case"esriGeometryPolygon":return e=>function(e,t){if(e)for(const r of e.rings)for(const e of r)e.length>2&&(e[2]*=t)}(e,i);case"multipoint":case"esriGeometryMultipoint":return e=>function(e,t){if(e)for(const r of e.points)r.length>2&&(r[2]*=t)}(e,i);case"extent":case"esriGeometryExtent":return e=>function(e,t){e&&null!=e.zmin&&null!=e.zmax&&(e.zmin*=t,e.zmax*=t)}(e,i);default:return null}}},96919:(e,t,r)=>{"use strict";r.d(t,{MJ:()=>c,X6:()=>l});var n=r(16889),s=r(80975),o=r(67005);const i="esri-widget__heading";function l(e,t){const r=a(e.level),n=`h${r}`;return delete e.level,(0,o.u)(n,{...e,class:(0,s.Sh)(i,e.class),role:"heading","aria-level":String(r)},t)}function a(e){return(0,n.uZ)(Math.ceil(e),1,6)}function c(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return a(e+t)}}}]);
//# sourceMappingURL=3437.03f83fca.chunk.js.map