{"version":3,"file":"static/js/2224.9d75915d.chunk.js","mappings":"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","sources":["../node_modules/@arcgis/core/layers/save/featureLayerUtils.js","../node_modules/@arcgis/core/layers/support/fetchService.js","../node_modules/@arcgis/core/portal/support/jsonContext.js","../node_modules/@arcgis/core/support/requestPresets.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport{difference as e}from\"../../core/arrayUtils.js\";import t from\"../../core/Error.js\";import r from\"../../core/Logger.js\";import{isNone as a,isSome as o}from\"../../core/maybe.js\";import{debounce as s,eachAlways as l}from\"../../core/promiseUtils.js\";import{updateOrigins as i}from\"../../core/accessorSupport/originUtils.js\";import n from\"../FeatureLayer.js\";import{parse as u}from\"../support/arcgisLayerUrl.js\";import{fetchFeatureService as p}from\"../support/fetchService.js\";import{isFeatureCollectionLayer as c,isFeatureServiceLayer as y}from\"../support/layerUtils.js\";import d from\"../../portal/Portal.js\";import m from\"../../portal/PortalItem.js\";import{createForItemWrite as f}from\"../../portal/support/jsonContext.js\";import{addTypeKeyword as w,TypeKeyword as h,getWGS84ExtentForItem as v,removeTypeKeyword as b}from\"../../portal/support/portalItemUtils.js\";const I=r.getLogger(\"esri.layers.FeatureLayer\"),S=\"Feature Service\";function g(e,t){return`Layer (title: ${e.title}, id: ${e.id}) of type '${e.declaredClass}' ${t}`}function j(e,r){if(r.type!==S)throw new t(\"feature-layer:portal-item-wrong-type\",g(e,`should have portal item of type \"${S}\"`))}async function L(e){if(await e.load(),c(e))throw new t(\"feature-layer:save\",g(e,\"using an in-memory source cannot be saved to a portal item\"))}function P(e,r){let a=(e.messages??[]).filter((({type:e})=>\"error\"===e)).map((({name:e,message:r,details:a})=>new t(e,r,a)));if(r?.ignoreUnsupported&&(a=a.filter((({name:e})=>\"layer:unsupported\"!==e&&\"symbol:unsupported\"!==e&&\"symbol-layer:unsupported\"!==e&&\"property:unsupported\"!==e&&\"url:unsupported\"!==e))),a.length>0)throw new t(\"feature-layer:save\",\"Failed to save feature layer due to unsupported or invalid content. See 'details.errors' for more detailed information\",{errors:a})}async function J(e,t,r){\"beforeSave\"in e&&\"function\"==typeof e.beforeSave&&await e.beforeSave();const a=e.write({},t);return P(t,r),a}function N(e){const{layer:t,layerJSON:r}=e;return t.isTable?{layers:[],tables:[r]}:{layers:[r],tables:[]}}function O(e){w(e,h.JSAPI),e.typeKeywords&&(e.typeKeywords=e.typeKeywords.filter(((e,t,r)=>r.indexOf(e)===t)))}function E(e){const r=e.portalItem;if(!r)throw I.error(\"save: requires the portalItem property to be set\"),new t(\"feature-layer:portal-item-not-set\",g(e,\"requires the portalItem property to be set\"));if(!r.loaded)throw new t(\"feature-layer:portal-item-not-loaded\",g(e,\"cannot be saved to a portal item that does not exist or is inaccessible\"));j(e,r)}async function T(e,t){return/\\/\\d+\\/?$/.test(e.url??\"\")?N(t[0]):$(e,t)}async function $(e,t){const{layer:{url:r,customParameters:a,apiKey:o}}=t[0];let s=await e.fetchData(\"json\");s&&null!=s.layers&&null!=s.tables||(s=await x(s,{url:r??\"\",customParameters:a,apiKey:o},t.map((e=>e.layer.layerId))));for(const l of t)K(l.layer,l.layerJSON,s);return s}async function x(e,t,r){var a,o;e||(e={}),(a=e).layers||(a.layers=[]),(o=e).tables||(o.tables=[]);const{url:s,customParameters:l,apiKey:i}=t,{serviceJSON:n,layersJSON:u}=await p(s,{customParameters:l,apiKey:i}),c=A(e.layers,n.layers,r),y=A(e.tables,n.tables,r);e.layers=c.itemResources,e.tables=y.itemResources;const d=[...c.added,...y.added],m=u?[...u.layers,...u.tables]:[];return await U(e,d,s,m),e}function A(t,r,a){const o=e(t,r,((e,t)=>e.id===t.id));t=t.filter((e=>!o.removed.some((t=>t.id===e.id))));const s=o.added.map((({id:e})=>({id:e})));return s.forEach((({id:e})=>{t.push({id:e})})),{itemResources:t,added:s.filter((({id:e})=>!a.includes(e)))}}async function U(e,t,r,o){const s=t.map((({id:e})=>new n({url:r,layerId:e,sourceJSON:o.find((({id:t})=>t===e))})));await l(s.map((e=>e.load()))),s.forEach((t=>{const{layerId:r,loaded:o,defaultPopupTemplate:s}=t;if(!o||a(s))return;K(t,{id:r,popupInfo:s.toJSON()},e)}))}function K(e,t,r){e.isTable?F(r.tables,t):F(r.layers,t)}function F(e,t){if(!e)return;const r=e.findIndex((({id:e})=>e===t.id));-1===r?e.push(t):e[r]=t}function R(e){const{portalItem:t}=e;return y(e)&&!e.dynamicDataSource&&!!t?.loaded&&t.type===S}async function D(e){if(!e?.length)throw new t(\"feature-layer-utils-saveall:missing-parameters\",\"'layers' array should contain at least one feature layer\");await Promise.all(e.map((e=>e.load())));for(const o of e)if(!R(o))throw new t(\"feature-layer-utils-saveall:invalid-parameters\",`'layers' array should only contain layers or tables in a feature service loaded from 'Feature Service' item. ${g(o,\"does not conform\")}`,{layer:o});const r=e.map((e=>e.portalItem.id));if(new Set(r).size>1)throw new t(\"feature-layer-utils-saveall:invalid-parameters\",\"All layers in the 'layers' array should be loaded from the same portal item\");const a=e.map((e=>e.layerId));if(new Set(a).size!==a.length)throw new t(\"feature-layer-utils-saveall:invalid-parameters\",\"'layers' array should contain only one instance each of layer or table in a feature service\")}function q(e,t){var r,a;let o=m.from(t);return o.id&&(o=o.clone(),o.id=null),(r=o).type??(r.type=S),(a=o).portal??(a.portal=d.getDefault()),j(e,o),o}async function z(e,t){const{url:r,layerId:a,title:s,fullExtent:l,isTable:i}=e,n=u(r),p=o(n)&&\"FeatureServer\"===n.serverType;t.url=p?r:`${r}/${a}`,t.title||(t.title=s),t.extent=null,!i&&o(l)&&(t.extent=await v(l)),b(t,h.METADATA),b(t,h.MULTI_LAYER),w(t,h.SINGLE_LAYER),i&&w(t,h.TABLE),O(t)}async function C(e,t,r){const a=e.portal;await(a?.signIn()),await(a?.user?.addItem({item:e,data:t,folder:r?.folder}))}const M=s(Y);async function Y(e,t){await L(e),E(e);const r=e.portalItem,a=f(r),o=await J(e,a,t),s=await T(r,[{layer:e,layerJSON:o}]);return O(r),await r.update({data:s}),i(a),r}const _=s((async(e,t)=>{await D(e);const r=e[0].portalItem,a=f(r),o=await Promise.all(e.map((e=>J(e,a,t)))),s=await T(r,e.map(((e,t)=>({layer:e,layerJSON:o[t]}))));return O(r),await r.update({data:s}),await Promise.all(e.slice(1).map((e=>e.portalItem.reload()))),i(a),r.clone()})),B=s(G);async function G(e,t,r){await L(e);const a=q(e,t),o=f(a),s=N({layer:e,layerJSON:await J(e,o,r)});return await z(e,a),await C(a,s,r),e.portalItem=a,i(o),a}export{M as save,_ as saveAll,B as saveAs};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport{fetchArcGISServiceJSON as e}from\"../../support/requestPresets.js\";async function r(r,s){const a=await e(r,s);a.layers=a.layers.filter(t);const n={serviceJSON:a};if((a.currentVersion??0)<10.5)return n;const i=await e(r+\"/layers\",s);return n.layersJSON={layers:i.layers.filter(t),tables:i.tables},n}function t(e){return!e.type||\"Feature Layer\"===e.type}export{r as fetchFeatureService};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport{urlToObject as r}from\"../../core/urlUtils.js\";import t from\"../Portal.js\";function e(e){return{origin:\"portal-item\",url:r(e.itemUrl),portal:e.portal||t.getDefault(),portalItem:e,readResourcePaths:[]}}function o(e){return{origin:\"portal-item\",messages:[],writtenProperties:[],url:e.itemUrl?r(e.itemUrl):null,portal:e.portal||t.getDefault(),portalItem:e}}export{e as createForItemRead,o as createForItemWrite};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport e from\"../request.js\";async function t(t,o){const{data:r}=await e(t,{responseType:\"json\",query:{f:\"json\",...o?.customParameters,token:o?.apiKey}});return r}export{t as fetchArcGISServiceJSON};\n"],"names":["I","r","S","g","e","t","title","id","declaredClass","j","type","async","L","load","c","J","beforeSave","a","write","messages","filter","map","name","message","details","ignoreUnsupported","length","errors","P","N","layer","layerJSON","isTable","layers","tables","O","w","h","typeKeywords","indexOf","T","test","url","customParameters","apiKey","o","s","fetchData","l","i","serviceJSON","n","layersJSON","u","p","A","y","itemResources","d","added","m","layerId","sourceJSON","find","forEach","loaded","defaultPopupTemplate","K","popupInfo","toJSON","U","x","$","removed","some","push","includes","F","findIndex","R","portalItem","dynamicDataSource","M","error","E","f","update","data","_","Promise","all","Set","size","D","slice","reload","clone","B","portal","q","fullExtent","serverType","extent","v","b","z","signIn","user","addItem","item","folder","C","currentVersion","origin","itemUrl","readResourcePaths","writtenProperties","responseType","query","token"],"sourceRoot":""}