(this.webpackJsonpimaps=this.webpackJsonpimaps||[]).push([[108,58,179,240],{118:function(t,e,r){"use strict";r.d(e,"a",(function(){return F})),r.d(e,"b",(function(){return f})),r.d(e,"c",(function(){return y})),r.d(e,"d",(function(){return g})),r.d(e,"e",(function(){return o})),r.d(e,"f",(function(){return S})),r.d(e,"g",(function(){return j})),r.d(e,"h",(function(){return O})),r.d(e,"i",(function(){return w})),r.d(e,"j",(function(){return v})),r.d(e,"k",(function(){return a})),r.d(e,"l",(function(){return s})),r.d(e,"m",(function(){return _})),r.d(e,"n",(function(){return d})),r.d(e,"o",(function(){return h})),r.d(e,"p",(function(){return p})),r.d(e,"q",(function(){return l})),r.d(e,"r",(function(){return c})),r.d(e,"s",(function(){return m})),r.d(e,"t",(function(){return x})),r.d(e,"u",(function(){return M})),r.d(e,"v",(function(){return u})),r.d(e,"w",(function(){return b}));r(82),r(113);var n=r(85),i=r(96);function s(t=I){return[t[0],t[1],t[2],t[3]]}function o(t){return[t[0],t[1],t[2],t[3]]}function a(t,e){return t!==e&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3]),t}function c(t,e,r,n,i=s()){return i[0]=t,i[1]=e,i[2]=r,i[3]=n,i}function l(t,e=s()){return e[0]=t.xmin,e[1]=t.ymin,e[2]=t.xmax,e[3]=t.ymax,e}function u(t,e){return new i.a({xmin:t[0],ymin:t[1],xmax:t[2],ymax:t[3],spatialReference:e})}function h(t,e){e[0]<t[0]&&(t[0]=e[0]),e[0]>t[2]&&(t[2]=e[0]),e[1]<t[1]&&(t[1]=e[1]),e[1]>t[3]&&(t[3]=e[1])}function d(t,e,r){if(Object(n.k)(e))a(r,t);else if("length"in e)T(e)?(r[0]=Math.min(t[0],e[0]),r[1]=Math.min(t[1],e[1]),r[2]=Math.max(t[2],e[2]),r[3]=Math.max(t[3],e[3])):2!==e.length&&3!==e.length||(r[0]=Math.min(t[0],e[0]),r[1]=Math.min(t[1],e[1]),r[2]=Math.max(t[2],e[0]),r[3]=Math.max(t[3],e[1]));else switch(e.type){case"extent":r[0]=Math.min(t[0],e.xmin),r[1]=Math.min(t[1],e.ymin),r[2]=Math.max(t[2],e.xmax),r[3]=Math.max(t[3],e.ymax);break;case"point":r[0]=Math.min(t[0],e.x),r[1]=Math.min(t[1],e.y),r[2]=Math.max(t[2],e.x),r[3]=Math.max(t[3],e.y)}}function p(t,e,r=t){const n=e.length;let i=t[0],s=t[1],o=t[2],a=t[3];for(let c=0;c<n;c++){const t=e[c];i=Math.min(i,t[0]),s=Math.min(s,t[1]),o=Math.max(o,t[0]),a=Math.max(a,t[1])}return r[0]=i,r[1]=s,r[2]=o,r[3]=a,r}function f(t){for(let e=0;e<4;e++)if(!isFinite(t[e]))return!1;return!0}function b(t){return Object(n.k)(t)||t[0]>=t[2]?0:t[2]-t[0]}function m(t){return t[1]>=t[3]?0:t[3]-t[1]}function y(t){return b(t)*m(t)}function g(t,e=[0,0]){return e[0]=(t[0]+t[2])/2,e[1]=(t[1]+t[3])/2,e}function j(t,e){return v(t,e[0],e[1])}function O(t,e){return v(t,e.x,e.y)}function v(t,e,r){return e>=t[0]&&r>=t[1]&&e<=t[2]&&r<=t[3]}function w(t,e,r){return e[0]>=t[0]-r&&e[1]>=t[1]-r&&e[0]<=t[2]+r&&e[1]<=t[3]+r}function x(t,e){return Math.max(e[0],t[0])<=Math.min(e[2],t[2])&&Math.max(e[1],t[1])<=Math.min(e[3],t[3])}function S(t,e){return e[0]>=t[0]&&e[2]<=t[2]&&e[1]>=t[1]&&e[3]<=t[3]}function M(t,e,r,n=t){return n[0]=t[0]+e,n[1]=t[1]+r,n[2]=t[2]+e,n[3]=t[3]+r,n}function _(t){return t?a(t,F):s(F)}function T(t){return null!=t&&4===t.length}const F=[1/0,1/0,-1/0,-1/0],I=[0,0,0,0]},120:function(t,e,r){"use strict";r.d(e,"a",(function(){return b}));var n,i=r(79),s=r(86),o=r(85),a=r(148),c=r(81),l=(r(84),r(82),r(83),r(93)),u=r(80),h=r(92);let d=n=class extends s.a{constructor(t){super(t),this.end=null,this.start=null}static get allTime(){return p}static get empty(){return f}readEnd(t,e){return null!=e.end?new Date(e.end):null}writeEnd(t,e){e.end=t?t.getTime():null}get isAllTime(){return this.equals(n.allTime)}get isEmpty(){return this.equals(n.empty)}readStart(t,e){return null!=e.start?new Date(e.start):null}writeStart(t,e){e.start=t?t.getTime():null}clone(){return new n({end:this.end,start:this.start})}equals(t){if(!t)return!1;const e=Object(o.l)(this.start)?this.start.getTime():this.start,r=Object(o.l)(this.end)?this.end.getTime():this.end,n=Object(o.l)(t.start)?t.start.getTime():t.start,i=Object(o.l)(t.end)?t.end.getTime():t.end;return e===n&&r===i}expandTo(t){if(this.isEmpty||this.isAllTime)return this.clone();const e=Object(o.b)(this.start,(e=>Object(a.c)(e,t))),r=Object(o.b)(this.end,(e=>Object(a.b)(Object(a.c)(e,t),1,t)));return new n({start:e,end:r})}intersection(t){if(!t)return this.clone();if(this.isEmpty||t.isEmpty)return n.empty;if(this.isAllTime)return t.clone();if(t.isAllTime)return this.clone();const e=Object(o.o)(this.start,-1/0,(t=>t.getTime())),r=Object(o.o)(this.end,1/0,(t=>t.getTime())),i=Object(o.o)(t.start,-1/0,(t=>t.getTime())),s=Object(o.o)(t.end,1/0,(t=>t.getTime()));let a,c;if(i>=e&&i<=r?a=i:e>=i&&e<=s&&(a=e),r>=i&&r<=s?c=r:s>=e&&s<=r&&(c=s),!isNaN(a)&&!isNaN(c)){const t=new n;return t.start=a===-1/0?null:new Date(a),t.end=c===1/0?null:new Date(c),t}return n.empty}offset(t,e){if(this.isEmpty||this.isAllTime)return this.clone();const r=new n,{start:i,end:s}=this;return Object(o.l)(i)&&(r.start=Object(a.b)(i,t,e)),Object(o.l)(s)&&(r.end=Object(a.b)(s,t,e)),r}union(t){if(!t||t.isEmpty)return this.clone();if(this.isEmpty)return t.clone();if(this.isAllTime||t.isAllTime)return p.clone();const e=Object(o.l)(this.start)&&Object(o.l)(t.start)?new Date(Math.min(this.start.getTime(),t.start.getTime())):null,r=Object(o.l)(this.end)&&Object(o.l)(t.end)?new Date(Math.max(this.end.getTime(),t.end.getTime())):null;return new n({start:e,end:r})}};Object(i.a)([Object(c.b)({type:Date,json:{write:{allowNull:!0}}})],d.prototype,"end",void 0),Object(i.a)([Object(l.a)("end")],d.prototype,"readEnd",null),Object(i.a)([Object(h.a)("end")],d.prototype,"writeEnd",null),Object(i.a)([Object(c.b)({readOnly:!0,json:{read:!1}})],d.prototype,"isAllTime",null),Object(i.a)([Object(c.b)({readOnly:!0,json:{read:!1}})],d.prototype,"isEmpty",null),Object(i.a)([Object(c.b)({type:Date,json:{write:{allowNull:!0}}})],d.prototype,"start",void 0),Object(i.a)([Object(l.a)("start")],d.prototype,"readStart",null),Object(i.a)([Object(h.a)("start")],d.prototype,"writeStart",null),d=n=Object(i.a)([Object(u.a)("esri.TimeExtent")],d);const p=new d,f=new d({start:void 0,end:void 0}),b=d},123:function(t,e,r){"use strict";r.d(e,"a",(function(){return h}));var n=r(79),i=r(90),s=r(86),o=r(81),a=(r(84),r(82),r(83),r(95)),c=r(80);const l=new i.a({inherited:"inherited",codedValue:"coded-value",range:"range"});let u=class extends s.a{constructor(t){super(t),this.name=null,this.type=null}};Object(n.a)([Object(o.b)({type:String,json:{write:!0}})],u.prototype,"name",void 0),Object(n.a)([Object(a.a)(l)],u.prototype,"type",void 0),u=Object(n.a)([Object(c.a)("esri.layers.support.Domain")],u);const h=u},131:function(t,e,r){"use strict";r.d(e,"a",(function(){return u})),r.d(e,"b",(function(){return l}));var n=r(79),i=r(99),s=r(121),o=r(81),a=r(80),c=r(264);const l=t=>{let e=class extends t{destroy(){var t,e;this.destroyed||(null==(t=this._get("handles"))||t.destroy(),null==(e=this._get("updatingHandles"))||e.destroy())}get handles(){return this._get("handles")||new s.a}get updatingHandles(){return this._get("updatingHandles")||new c.a}};return Object(n.a)([Object(o.b)({readOnly:!0})],e.prototype,"handles",null),Object(n.a)([Object(o.b)({readOnly:!0})],e.prototype,"updatingHandles",null),e=Object(n.a)([Object(a.a)("esri.core.HandleOwner")],e),e};let u=class extends(l(i.a)){};u=Object(n.a)([Object(a.a)("esri.core.HandleOwner")],u)},135:function(t,e,r){"use strict";r.d(e,"a",(function(){return _}));var n,i=r(79),s=r(97),o=r(120),a=r(90),c=r(86),l=r(89),u=r(85),h=r(81),d=r(104),p=r(95),f=r(80),b=r(92),m=r(83),y=r(98),g=r(193),j=r(323),O=r(296),v=r(94),w=r(109);const x=new a.a({esriSpatialRelIntersects:"intersects",esriSpatialRelContains:"contains",esriSpatialRelCrosses:"crosses",esriSpatialRelDisjoint:"disjoint",esriSpatialRelEnvelopeIntersects:"envelope-intersects",esriSpatialRelIndexIntersects:"index-intersects",esriSpatialRelOverlaps:"overlaps",esriSpatialRelTouches:"touches",esriSpatialRelWithin:"within",esriSpatialRelRelation:"relation"}),S=new a.a({esriSRUnit_Meter:"meters",esriSRUnit_Kilometer:"kilometers",esriSRUnit_Foot:"feet",esriSRUnit_StatuteMile:"miles",esriSRUnit_NauticalMile:"nautical-miles",esriSRUnit_USNauticalMile:"us-nautical-miles"});let M=n=class extends c.a{constructor(t){super(t),this.aggregateIds=null,this.cacheHint=void 0,this.datumTransformation=null,this.distance=void 0,this.dynamicDataSource=void 0,this.formatOf3DObjects=null,this.gdbVersion=null,this.geometry=null,this.geometryPrecision=void 0,this.groupByFieldsForStatistics=null,this.having=null,this.historicMoment=null,this.maxAllowableOffset=void 0,this.maxRecordCountFactor=1,this.multipatchOption=null,this.num=void 0,this.objectIds=null,this.orderByFields=null,this.outFields=null,this.outSpatialReference=null,this.outStatistics=null,this.parameterValues=null,this.pixelSize=null,this.quantizationParameters=null,this.rangeValues=null,this.relationParameter=null,this.resultType=null,this.returnCentroid=!1,this.returnDistinctValues=!1,this.returnExceededLimitFeatures=!0,this.returnGeometry=!1,this.returnQueryGeometry=!1,this.returnM=void 0,this.returnZ=void 0,this.sourceSpatialReference=null,this.spatialRelationship="intersects",this.start=void 0,this.sqlFormat=null,this.text=null,this.timeExtent=null,this.timeReferenceUnknownClient=!1,this.units=null,this.where=null}static from(t){return Object(m.d)(n,t)}castDatumTransformation(t){return"number"==typeof t||"object"==typeof t?t:null}writeHistoricMoment(t,e){e.historicMoment=t&&t.getTime()}writeParameterValues(t,e){if(t){const r={};for(const e in t){const n=t[e];Array.isArray(n)?r[e]=n.map((t=>t instanceof Date?t.getTime():t)):n instanceof Date?r[e]=n.getTime():r[e]=n}e.parameterValues=r}}writeStart(t,e){e.resultOffset=this.start,e.resultRecordCount=this.num||10,e.where="1=1"}writeWhere(t,e){e.where=t||"1=1"}clone(){return new n(Object(l.a)({aggregateIds:this.aggregateIds,cacheHint:this.cacheHint,datumTransformation:this.datumTransformation,distance:this.distance,gdbVersion:this.gdbVersion,geometry:this.geometry,geometryPrecision:this.geometryPrecision,groupByFieldsForStatistics:this.groupByFieldsForStatistics,having:this.having,historicMoment:Object(u.l)(this.historicMoment)?new Date(this.historicMoment.getTime()):null,maxAllowableOffset:this.maxAllowableOffset,maxRecordCountFactor:this.maxRecordCountFactor,multipatchOption:this.multipatchOption,num:this.num,objectIds:this.objectIds,orderByFields:this.orderByFields,outFields:this.outFields,outSpatialReference:this.outSpatialReference,outStatistics:this.outStatistics,parameterValues:this.parameterValues,pixelSize:this.pixelSize,quantizationParameters:this.quantizationParameters,rangeValues:this.rangeValues,relationParameter:this.relationParameter,resultType:this.resultType,returnDistinctValues:this.returnDistinctValues,returnGeometry:this.returnGeometry,returnCentroid:this.returnCentroid,returnExceededLimitFeatures:this.returnExceededLimitFeatures,returnQueryGeometry:this.returnQueryGeometry,returnM:this.returnM,returnZ:this.returnZ,dynamicDataSource:this.dynamicDataSource,sourceSpatialReference:this.sourceSpatialReference,spatialRelationship:this.spatialRelationship,start:this.start,sqlFormat:this.sqlFormat,text:this.text,timeExtent:this.timeExtent,timeReferenceUnknownClient:this.timeReferenceUnknownClient,units:this.units,where:this.where}))}};M.MAX_MAX_RECORD_COUNT_FACTOR=5,Object(i.a)([Object(h.b)({json:{write:!0}})],M.prototype,"aggregateIds",void 0),Object(i.a)([Object(h.b)({type:Boolean,json:{write:!0}})],M.prototype,"cacheHint",void 0),Object(i.a)([Object(h.b)({json:{write:!0}})],M.prototype,"datumTransformation",void 0),Object(i.a)([Object(d.a)("datumTransformation")],M.prototype,"castDatumTransformation",null),Object(i.a)([Object(h.b)({type:Number,json:{write:{overridePolicy:t=>({enabled:t>0})}}})],M.prototype,"distance",void 0),Object(i.a)([Object(h.b)({type:g.a,json:{write:!0}})],M.prototype,"dynamicDataSource",void 0),Object(i.a)([Object(h.b)({type:String,json:{write:!0}})],M.prototype,"formatOf3DObjects",void 0),Object(i.a)([Object(h.b)({type:String,json:{write:!0}})],M.prototype,"gdbVersion",void 0),Object(i.a)([Object(h.b)({types:s.a,json:{read:y.a,write:!0}})],M.prototype,"geometry",void 0),Object(i.a)([Object(h.b)({type:Number,json:{write:!0}})],M.prototype,"geometryPrecision",void 0),Object(i.a)([Object(h.b)({type:[String],json:{write:!0}})],M.prototype,"groupByFieldsForStatistics",void 0),Object(i.a)([Object(h.b)({type:String,json:{write:!0}})],M.prototype,"having",void 0),Object(i.a)([Object(h.b)({type:Date})],M.prototype,"historicMoment",void 0),Object(i.a)([Object(b.a)("historicMoment")],M.prototype,"writeHistoricMoment",null),Object(i.a)([Object(h.b)({type:Number,json:{write:!0}})],M.prototype,"maxAllowableOffset",void 0),Object(i.a)([Object(h.b)({type:Number,cast:t=>t<1?1:t>n.MAX_MAX_RECORD_COUNT_FACTOR?n.MAX_MAX_RECORD_COUNT_FACTOR:t,json:{write:{overridePolicy:t=>({enabled:t>1})}}})],M.prototype,"maxRecordCountFactor",void 0),Object(i.a)([Object(h.b)({type:["xyFootprint"],json:{write:!0}})],M.prototype,"multipatchOption",void 0),Object(i.a)([Object(h.b)({type:Number,json:{read:{source:"resultRecordCount"}}})],M.prototype,"num",void 0),Object(i.a)([Object(h.b)({json:{write:!0}})],M.prototype,"objectIds",void 0),Object(i.a)([Object(h.b)({type:[String],json:{write:!0}})],M.prototype,"orderByFields",void 0),Object(i.a)([Object(h.b)({type:[String],json:{write:!0}})],M.prototype,"outFields",void 0),Object(i.a)([Object(h.b)({type:v.a,json:{name:"outSR",write:!0}})],M.prototype,"outSpatialReference",void 0),Object(i.a)([Object(h.b)({type:[O.a],json:{write:{enabled:!0,overridePolicy(){return{enabled:Object(u.l)(this.outStatistics)&&this.outStatistics.length>0}}}}})],M.prototype,"outStatistics",void 0),Object(i.a)([Object(h.b)({json:{write:!0}})],M.prototype,"parameterValues",void 0),Object(i.a)([Object(b.a)("parameterValues")],M.prototype,"writeParameterValues",null),Object(i.a)([Object(h.b)({type:w.a,json:{write:!0}})],M.prototype,"pixelSize",void 0),Object(i.a)([Object(h.b)({type:j.a,json:{write:!0}})],M.prototype,"quantizationParameters",void 0),Object(i.a)([Object(h.b)({type:[Object],json:{write:!0}})],M.prototype,"rangeValues",void 0),Object(i.a)([Object(h.b)({type:String,json:{read:{source:"relationParam"},write:{target:"relationParam",overridePolicy(){return{enabled:"relation"===this.spatialRelationship}}}}})],M.prototype,"relationParameter",void 0),Object(i.a)([Object(h.b)({type:String,json:{write:!0}})],M.prototype,"resultType",void 0),Object(i.a)([Object(h.b)({type:Boolean,json:{default:!1,write:!0}})],M.prototype,"returnCentroid",void 0),Object(i.a)([Object(h.b)({type:Boolean,json:{default:!1,write:!0}})],M.prototype,"returnDistinctValues",void 0),Object(i.a)([Object(h.b)({type:Boolean,json:{default:!0,write:!0}})],M.prototype,"returnExceededLimitFeatures",void 0),Object(i.a)([Object(h.b)({type:Boolean,json:{write:!0}})],M.prototype,"returnGeometry",void 0),Object(i.a)([Object(h.b)({type:Boolean,json:{default:!1,write:!0}})],M.prototype,"returnQueryGeometry",void 0),Object(i.a)([Object(h.b)({type:Boolean,json:{default:!1,write:!0}})],M.prototype,"returnM",void 0),Object(i.a)([Object(h.b)({type:Boolean,json:{write:{overridePolicy:t=>({enabled:t})}}})],M.prototype,"returnZ",void 0),Object(i.a)([Object(h.b)({type:v.a,json:{write:!0}})],M.prototype,"sourceSpatialReference",void 0),Object(i.a)([Object(p.a)(x,{ignoreUnknown:!1,name:"spatialRel"})],M.prototype,"spatialRelationship",void 0),Object(i.a)([Object(h.b)({type:Number,json:{read:{source:"resultOffset"}}})],M.prototype,"start",void 0),Object(i.a)([Object(b.a)("start"),Object(b.a)("num")],M.prototype,"writeStart",null),Object(i.a)([Object(h.b)({type:String,json:{write:!0}})],M.prototype,"sqlFormat",void 0),Object(i.a)([Object(h.b)({type:String,json:{write:!0}})],M.prototype,"text",void 0),Object(i.a)([Object(h.b)({type:o.a,json:{write:!0}})],M.prototype,"timeExtent",void 0),Object(i.a)([Object(h.b)({type:Boolean,json:{default:!1,write:!0}})],M.prototype,"timeReferenceUnknownClient",void 0),Object(i.a)([Object(p.a)(S,{ignoreUnknown:!1}),Object(h.b)({json:{write:{overridePolicy(t){return{enabled:t&&this.distance>0}}}}})],M.prototype,"units",void 0),Object(i.a)([Object(h.b)({type:String,json:{write:{overridePolicy(t){return{enabled:null!=t||this.start>0}}}}})],M.prototype,"where",void 0),Object(i.a)([Object(b.a)("where")],M.prototype,"writeWhere",null),M=n=Object(i.a)([Object(f.a)("esri.rest.support.Query")],M);const _=M},148:function(t,e,r){"use strict";r.d(e,"a",(function(){return a})),r.d(e,"b",(function(){return s})),r.d(e,"c",(function(){return o}));r(82);const n={milliseconds:1,seconds:1e3,minutes:6e4,hours:36e5,days:864e5,weeks:6048e5,months:26784e5,years:31536e6,decades:31536e7,centuries:31536e8},i={milliseconds:{getter:"getMilliseconds",setter:"setMilliseconds",multiplier:1},seconds:{getter:"getSeconds",setter:"setSeconds",multiplier:1},minutes:{getter:"getMinutes",setter:"setMinutes",multiplier:1},hours:{getter:"getHours",setter:"setHours",multiplier:1},days:{getter:"getDate",setter:"setDate",multiplier:1},weeks:{getter:"getDate",setter:"setDate",multiplier:7},months:{getter:"getMonth",setter:"setMonth",multiplier:1},years:{getter:"getFullYear",setter:"setFullYear",multiplier:1},decades:{getter:"getFullYear",setter:"setFullYear",multiplier:10},centuries:{getter:"getFullYear",setter:"setFullYear",multiplier:100}};function s(t,e,r){const n=new Date(t.getTime());if(e&&r){const t=i[r],{getter:s,setter:o,multiplier:a}=t;n[o](n[s]()+e*a)}return n}function o(t,e){switch(e){case"milliseconds":return new Date(t.getTime());case"seconds":return new Date(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds());case"minutes":return new Date(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes());case"hours":return new Date(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours());case"days":return new Date(t.getFullYear(),t.getMonth(),t.getDate());case"weeks":return new Date(t.getFullYear(),t.getMonth(),t.getDate()-t.getDay());case"months":return new Date(t.getFullYear(),t.getMonth(),1);case"years":return new Date(t.getFullYear(),0,1);case"decades":return new Date(t.getFullYear()-t.getFullYear()%10,0,1);case"centuries":return new Date(t.getFullYear()-t.getFullYear()%100,0,1);default:return new Date}}function a(t,e,r){return 0===t?0:t*n[e]/n[r]}},149:function(t,e,r){"use strict";r.d(e,"a",(function(){return O})),r.d(e,"b",(function(){return h})),r.d(e,"c",(function(){return l})),r.d(e,"d",(function(){return s})),r.d(e,"e",(function(){return f})),r.d(e,"f",(function(){return p})),r.d(e,"g",(function(){return d})),r.d(e,"h",(function(){return x})),r.d(e,"i",(function(){return S})),r.d(e,"j",(function(){return a})),r.d(e,"k",(function(){return b})),r.d(e,"l",(function(){return R})),r.d(e,"m",(function(){return _})),r.d(e,"n",(function(){return u})),r.d(e,"o",(function(){return I})),r.d(e,"p",(function(){return M})),r.d(e,"q",(function(){return F})),r.d(e,"r",(function(){return m})),r.d(e,"s",(function(){return o})),r.d(e,"t",(function(){return c})),r.d(e,"u",(function(){return j})),r.d(e,"v",(function(){return y})),r.d(e,"w",(function(){return g}));var n=r(106),i=r(176);function s(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function o(t,e,r,n,i,s,o,a,c,l,u,h,d,p,f,b,m){return t[0]=e,t[1]=r,t[2]=n,t[3]=i,t[4]=s,t[5]=o,t[6]=a,t[7]=c,t[8]=l,t[9]=u,t[10]=h,t[11]=d,t[12]=p,t[13]=f,t[14]=b,t[15]=m,t}function a(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function c(t,e){if(t===e){const r=e[1],n=e[2],i=e[3],s=e[6],o=e[7],a=e[11];t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=r,t[6]=e[9],t[7]=e[13],t[8]=n,t[9]=s,t[11]=e[14],t[12]=i,t[13]=o,t[14]=a}else t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=e[1],t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=e[2],t[9]=e[6],t[10]=e[10],t[11]=e[14],t[12]=e[3],t[13]=e[7],t[14]=e[11],t[15]=e[15];return t}function l(t,e){const r=e[0],n=e[1],i=e[2],s=e[3],o=e[4],a=e[5],c=e[6],l=e[7],u=e[8],h=e[9],d=e[10],p=e[11],f=e[12],b=e[13],m=e[14],y=e[15],g=r*a-n*o,j=r*c-i*o,O=r*l-s*o,v=n*c-i*a,w=n*l-s*a,x=i*l-s*c,S=u*b-h*f,M=u*m-d*f,_=u*y-p*f,T=h*m-d*b,F=h*y-p*b,I=d*y-p*m;let R=g*I-j*F+O*T+v*_-w*M+x*S;return R?(R=1/R,t[0]=(a*I-c*F+l*T)*R,t[1]=(i*F-n*I-s*T)*R,t[2]=(b*x-m*w+y*v)*R,t[3]=(d*w-h*x-p*v)*R,t[4]=(c*_-o*I-l*M)*R,t[5]=(r*I-i*_+s*M)*R,t[6]=(m*O-f*x-y*j)*R,t[7]=(u*x-d*O+p*j)*R,t[8]=(o*F-a*_+l*S)*R,t[9]=(n*_-r*F-s*S)*R,t[10]=(f*w-b*O+y*g)*R,t[11]=(h*O-u*w-p*g)*R,t[12]=(a*M-o*T-c*S)*R,t[13]=(r*T-n*M+i*S)*R,t[14]=(b*j-f*v-m*g)*R,t[15]=(u*v-h*j+d*g)*R,t):null}function u(t,e,r){const n=e[0],i=e[1],s=e[2],o=e[3],a=e[4],c=e[5],l=e[6],u=e[7],h=e[8],d=e[9],p=e[10],f=e[11],b=e[12],m=e[13],y=e[14],g=e[15];let j=r[0],O=r[1],v=r[2],w=r[3];return t[0]=j*n+O*a+v*h+w*b,t[1]=j*i+O*c+v*d+w*m,t[2]=j*s+O*l+v*p+w*y,t[3]=j*o+O*u+v*f+w*g,j=r[4],O=r[5],v=r[6],w=r[7],t[4]=j*n+O*a+v*h+w*b,t[5]=j*i+O*c+v*d+w*m,t[6]=j*s+O*l+v*p+w*y,t[7]=j*o+O*u+v*f+w*g,j=r[8],O=r[9],v=r[10],w=r[11],t[8]=j*n+O*a+v*h+w*b,t[9]=j*i+O*c+v*d+w*m,t[10]=j*s+O*l+v*p+w*y,t[11]=j*o+O*u+v*f+w*g,j=r[12],O=r[13],v=r[14],w=r[15],t[12]=j*n+O*a+v*h+w*b,t[13]=j*i+O*c+v*d+w*m,t[14]=j*s+O*l+v*p+w*y,t[15]=j*o+O*u+v*f+w*g,t}function h(t,e,r){const n=r[0],i=r[1],s=r[2];let o,a,c,l,u,h,d,p,f,b,m,y;return e===t?(t[12]=e[0]*n+e[4]*i+e[8]*s+e[12],t[13]=e[1]*n+e[5]*i+e[9]*s+e[13],t[14]=e[2]*n+e[6]*i+e[10]*s+e[14],t[15]=e[3]*n+e[7]*i+e[11]*s+e[15]):(o=e[0],a=e[1],c=e[2],l=e[3],u=e[4],h=e[5],d=e[6],p=e[7],f=e[8],b=e[9],m=e[10],y=e[11],t[0]=o,t[1]=a,t[2]=c,t[3]=l,t[4]=u,t[5]=h,t[6]=d,t[7]=p,t[8]=f,t[9]=b,t[10]=m,t[11]=y,t[12]=o*n+u*i+f*s+e[12],t[13]=a*n+h*i+b*s+e[13],t[14]=c*n+d*i+m*s+e[14],t[15]=l*n+p*i+y*s+e[15]),t}function d(t,e,r){const n=r[0],i=r[1],s=r[2];return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*i,t[5]=e[5]*i,t[6]=e[6]*i,t[7]=e[7]*i,t[8]=e[8]*s,t[9]=e[9]*s,t[10]=e[10]*s,t[11]=e[11]*s,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function p(t,e,r,n){let s,o,a,c,l,u,h,d,p,f,b,m,y,g,j,O,v,w,x,S,M,_,T,F,I=n[0],R=n[1],C=n[2],P=Math.sqrt(I*I+R*R+C*C);return P<i.a?null:(P=1/P,I*=P,R*=P,C*=P,s=Math.sin(r),o=Math.cos(r),a=1-o,c=e[0],l=e[1],u=e[2],h=e[3],d=e[4],p=e[5],f=e[6],b=e[7],m=e[8],y=e[9],g=e[10],j=e[11],O=I*I*a+o,v=R*I*a+C*s,w=C*I*a-R*s,x=I*R*a-C*s,S=R*R*a+o,M=C*R*a+I*s,_=I*C*a+R*s,T=R*C*a-I*s,F=C*C*a+o,t[0]=c*O+d*v+m*w,t[1]=l*O+p*v+y*w,t[2]=u*O+f*v+g*w,t[3]=h*O+b*v+j*w,t[4]=c*x+d*S+m*M,t[5]=l*x+p*S+y*M,t[6]=u*x+f*S+g*M,t[7]=h*x+b*S+j*M,t[8]=c*_+d*T+m*F,t[9]=l*_+p*T+y*F,t[10]=u*_+f*T+g*F,t[11]=h*_+b*T+j*F,e!==t&&(t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t)}function f(t,e,r){const n=Math.sin(r),i=Math.cos(r),s=e[4],o=e[5],a=e[6],c=e[7],l=e[8],u=e[9],h=e[10],d=e[11];return e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=s*i+l*n,t[5]=o*i+u*n,t[6]=a*i+h*n,t[7]=c*i+d*n,t[8]=l*i-s*n,t[9]=u*i-o*n,t[10]=h*i-a*n,t[11]=d*i-c*n,t}function b(t,e,r){const n=Math.sin(r),i=Math.cos(r),s=e[0],o=e[1],a=e[2],c=e[3],l=e[8],u=e[9],h=e[10],d=e[11];return e!==t&&(t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=s*i-l*n,t[1]=o*i-u*n,t[2]=a*i-h*n,t[3]=c*i-d*n,t[8]=s*n+l*i,t[9]=o*n+u*i,t[10]=a*n+h*i,t[11]=c*n+d*i,t}function m(t,e,r){const n=Math.sin(r),i=Math.cos(r),s=e[0],o=e[1],a=e[2],c=e[3],l=e[4],u=e[5],h=e[6],d=e[7];return e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=s*i+l*n,t[1]=o*i+u*n,t[2]=a*i+h*n,t[3]=c*i+d*n,t[4]=l*i-s*n,t[5]=u*i-o*n,t[6]=h*i-a*n,t[7]=d*i-c*n,t}function y(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=e[0],t[13]=e[1],t[14]=e[2],t[15]=1,t}function g(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=e[2],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function j(t,e){const r=Math.sin(e),n=Math.cos(e);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=n,t[6]=r,t[7]=0,t[8]=0,t[9]=-r,t[10]=n,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function O(t,e){const r=Math.sin(e),n=Math.cos(e);return t[0]=n,t[1]=r,t[2]=0,t[3]=0,t[4]=-r,t[5]=n,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function v(t,e,r){const n=e[0],i=e[1],s=e[2],o=e[3],a=n+n,c=i+i,l=s+s,u=n*a,h=n*c,d=n*l,p=i*c,f=i*l,b=s*l,m=o*a,y=o*c,g=o*l;return t[0]=1-(p+b),t[1]=h+g,t[2]=d-y,t[3]=0,t[4]=h-g,t[5]=1-(u+b),t[6]=f+m,t[7]=0,t[8]=d+y,t[9]=f-m,t[10]=1-(u+p),t[11]=0,t[12]=r[0],t[13]=r[1],t[14]=r[2],t[15]=1,t}const w=Object(n.f)();function x(t,e){const r=e[0],n=e[1],i=e[2],s=e[3],o=r+r,a=n+n,c=i+i,l=r*o,u=n*o,h=n*a,d=i*o,p=i*a,f=i*c,b=s*o,m=s*a,y=s*c;return t[0]=1-h-f,t[1]=u+y,t[2]=d-m,t[3]=0,t[4]=u-y,t[5]=1-l-f,t[6]=p+b,t[7]=0,t[8]=d+m,t[9]=p-b,t[10]=1-l-h,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function S(t,e,r,n,i,s,o){const a=1/(r-e),c=1/(i-n),l=1/(s-o);return t[0]=2*s*a,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=2*s*c,t[6]=0,t[7]=0,t[8]=(r+e)*a,t[9]=(i+n)*c,t[10]=(o+s)*l,t[11]=-1,t[12]=0,t[13]=0,t[14]=o*s*2*l,t[15]=0,t}function M(t,e,r,n,i,s,o){const a=1/(e-r),c=1/(n-i),l=1/(s-o);return t[0]=-2*a,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*c,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*l,t[11]=0,t[12]=(e+r)*a,t[13]=(i+n)*c,t[14]=(o+s)*l,t[15]=1,t}function _(t,e,r,n){let s,o,c,l,u,h,d,p,f,b;const m=e[0],y=e[1],g=e[2],j=n[0],O=n[1],v=n[2],w=r[0],x=r[1],S=r[2];return Math.abs(m-w)<i.a&&Math.abs(y-x)<i.a&&Math.abs(g-S)<i.a?a(t):(d=m-w,p=y-x,f=g-S,b=1/Math.sqrt(d*d+p*p+f*f),d*=b,p*=b,f*=b,s=O*f-v*p,o=v*d-j*f,c=j*p-O*d,b=Math.sqrt(s*s+o*o+c*c),b?(b=1/b,s*=b,o*=b,c*=b):(s=0,o=0,c=0),l=p*c-f*o,u=f*s-d*c,h=d*o-p*s,b=Math.sqrt(l*l+u*u+h*h),b?(b=1/b,l*=b,u*=b,h*=b):(l=0,u=0,h=0),t[0]=s,t[1]=l,t[2]=d,t[3]=0,t[4]=o,t[5]=u,t[6]=p,t[7]=0,t[8]=c,t[9]=h,t[10]=f,t[11]=0,t[12]=-(s*m+o*y+c*g),t[13]=-(l*m+u*y+h*g),t[14]=-(d*m+p*y+f*g),t[15]=1,t)}function T(t,e,r){return t[0]=e[0]-r[0],t[1]=e[1]-r[1],t[2]=e[2]-r[2],t[3]=e[3]-r[3],t[4]=e[4]-r[4],t[5]=e[5]-r[5],t[6]=e[6]-r[6],t[7]=e[7]-r[7],t[8]=e[8]-r[8],t[9]=e[9]-r[9],t[10]=e[10]-r[10],t[11]=e[11]-r[11],t[12]=e[12]-r[12],t[13]=e[13]-r[13],t[14]=e[14]-r[14],t[15]=e[15]-r[15],t}function F(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]&&t[9]===e[9]&&t[10]===e[10]&&t[11]===e[11]&&t[12]===e[12]&&t[13]===e[13]&&t[14]===e[14]&&t[15]===e[15]}function I(t,e){if(t===e)return!0;const r=t[0],n=t[1],s=t[2],o=t[3],a=t[4],c=t[5],l=t[6],u=t[7],h=t[8],d=t[9],p=t[10],f=t[11],b=t[12],m=t[13],y=t[14],g=t[15],j=e[0],O=e[1],v=e[2],w=e[3],x=e[4],S=e[5],M=e[6],_=e[7],T=e[8],F=e[9],I=e[10],R=e[11],C=e[12],P=e[13],B=e[14],z=e[15];return Math.abs(r-j)<=i.a*Math.max(1,Math.abs(r),Math.abs(j))&&Math.abs(n-O)<=i.a*Math.max(1,Math.abs(n),Math.abs(O))&&Math.abs(s-v)<=i.a*Math.max(1,Math.abs(s),Math.abs(v))&&Math.abs(o-w)<=i.a*Math.max(1,Math.abs(o),Math.abs(w))&&Math.abs(a-x)<=i.a*Math.max(1,Math.abs(a),Math.abs(x))&&Math.abs(c-S)<=i.a*Math.max(1,Math.abs(c),Math.abs(S))&&Math.abs(l-M)<=i.a*Math.max(1,Math.abs(l),Math.abs(M))&&Math.abs(u-_)<=i.a*Math.max(1,Math.abs(u),Math.abs(_))&&Math.abs(h-T)<=i.a*Math.max(1,Math.abs(h),Math.abs(T))&&Math.abs(d-F)<=i.a*Math.max(1,Math.abs(d),Math.abs(F))&&Math.abs(p-I)<=i.a*Math.max(1,Math.abs(p),Math.abs(I))&&Math.abs(f-R)<=i.a*Math.max(1,Math.abs(f),Math.abs(R))&&Math.abs(b-C)<=i.a*Math.max(1,Math.abs(b),Math.abs(C))&&Math.abs(m-P)<=i.a*Math.max(1,Math.abs(m),Math.abs(P))&&Math.abs(y-B)<=i.a*Math.max(1,Math.abs(y),Math.abs(B))&&Math.abs(g-z)<=i.a*Math.max(1,Math.abs(g),Math.abs(z))}function R(t){const e=i.a,r=t[0],n=t[1],s=t[2],o=t[4],a=t[5],c=t[6],l=t[8],u=t[9],h=t[10];return Math.abs(1-(r*r+o*o+l*l))<=e&&Math.abs(1-(n*n+a*a+u*u))<=e&&Math.abs(1-(s*s+c*c+h*h))<=e}const C=u,P=T;Object.freeze({__proto__:null,copy:s,set:o,identity:a,transpose:c,invert:l,adjoint:function(t,e){const r=e[0],n=e[1],i=e[2],s=e[3],o=e[4],a=e[5],c=e[6],l=e[7],u=e[8],h=e[9],d=e[10],p=e[11],f=e[12],b=e[13],m=e[14],y=e[15];return t[0]=a*(d*y-p*m)-h*(c*y-l*m)+b*(c*p-l*d),t[1]=-(n*(d*y-p*m)-h*(i*y-s*m)+b*(i*p-s*d)),t[2]=n*(c*y-l*m)-a*(i*y-s*m)+b*(i*l-s*c),t[3]=-(n*(c*p-l*d)-a*(i*p-s*d)+h*(i*l-s*c)),t[4]=-(o*(d*y-p*m)-u*(c*y-l*m)+f*(c*p-l*d)),t[5]=r*(d*y-p*m)-u*(i*y-s*m)+f*(i*p-s*d),t[6]=-(r*(c*y-l*m)-o*(i*y-s*m)+f*(i*l-s*c)),t[7]=r*(c*p-l*d)-o*(i*p-s*d)+u*(i*l-s*c),t[8]=o*(h*y-p*b)-u*(a*y-l*b)+f*(a*p-l*h),t[9]=-(r*(h*y-p*b)-u*(n*y-s*b)+f*(n*p-s*h)),t[10]=r*(a*y-l*b)-o*(n*y-s*b)+f*(n*l-s*a),t[11]=-(r*(a*p-l*h)-o*(n*p-s*h)+u*(n*l-s*a)),t[12]=-(o*(h*m-d*b)-u*(a*m-c*b)+f*(a*d-c*h)),t[13]=r*(h*m-d*b)-u*(n*m-i*b)+f*(n*d-i*h),t[14]=-(r*(a*m-c*b)-o*(n*m-i*b)+f*(n*c-i*a)),t[15]=r*(a*d-c*h)-o*(n*d-i*h)+u*(n*c-i*a),t},determinant:function(t){const e=t[0],r=t[1],n=t[2],i=t[3],s=t[4],o=t[5],a=t[6],c=t[7],l=t[8],u=t[9],h=t[10],d=t[11],p=t[12],f=t[13],b=t[14],m=t[15];return(e*o-r*s)*(h*m-d*b)-(e*a-n*s)*(u*m-d*f)+(e*c-i*s)*(u*b-h*f)+(r*a-n*o)*(l*m-d*p)-(r*c-i*o)*(l*b-h*p)+(n*c-i*a)*(l*f-u*p)},multiply:u,translate:h,scale:d,rotate:p,rotateX:f,rotateY:b,rotateZ:m,fromTranslation:y,fromScaling:g,fromRotation:function(t,e,r){let n,s,o,a=r[0],c=r[1],l=r[2],u=Math.sqrt(a*a+c*c+l*l);return u<i.a?null:(u=1/u,a*=u,c*=u,l*=u,n=Math.sin(e),s=Math.cos(e),o=1-s,t[0]=a*a*o+s,t[1]=c*a*o+l*n,t[2]=l*a*o-c*n,t[3]=0,t[4]=a*c*o-l*n,t[5]=c*c*o+s,t[6]=l*c*o+a*n,t[7]=0,t[8]=a*l*o+c*n,t[9]=c*l*o-a*n,t[10]=l*l*o+s,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t)},fromXRotation:j,fromYRotation:function(t,e){const r=Math.sin(e),n=Math.cos(e);return t[0]=n,t[1]=0,t[2]=-r,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=r,t[9]=0,t[10]=n,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},fromZRotation:O,fromRotationTranslation:v,fromQuat2:function(t,e){const r=w,n=-e[0],i=-e[1],s=-e[2],o=e[3],a=e[4],c=e[5],l=e[6],u=e[7],h=n*n+i*i+s*s+o*o;return h>0?(r[0]=2*(a*o+u*n+c*s-l*i)/h,r[1]=2*(c*o+u*i+l*n-a*s)/h,r[2]=2*(l*o+u*s+a*i-c*n)/h):(r[0]=2*(a*o+u*n+c*s-l*i),r[1]=2*(c*o+u*i+l*n-a*s),r[2]=2*(l*o+u*s+a*i-c*n)),v(t,e,r),t},getTranslation:function(t,e){return t[0]=e[12],t[1]=e[13],t[2]=e[14],t},getScaling:function(t,e){const r=e[0],n=e[1],i=e[2],s=e[4],o=e[5],a=e[6],c=e[8],l=e[9],u=e[10];return t[0]=Math.sqrt(r*r+n*n+i*i),t[1]=Math.sqrt(s*s+o*o+a*a),t[2]=Math.sqrt(c*c+l*l+u*u),t},getRotation:function(t,e){const r=e[0]+e[5]+e[10];let n=0;return r>0?(n=2*Math.sqrt(r+1),t[3]=.25*n,t[0]=(e[6]-e[9])/n,t[1]=(e[8]-e[2])/n,t[2]=(e[1]-e[4])/n):e[0]>e[5]&&e[0]>e[10]?(n=2*Math.sqrt(1+e[0]-e[5]-e[10]),t[3]=(e[6]-e[9])/n,t[0]=.25*n,t[1]=(e[1]+e[4])/n,t[2]=(e[8]+e[2])/n):e[5]>e[10]?(n=2*Math.sqrt(1+e[5]-e[0]-e[10]),t[3]=(e[8]-e[2])/n,t[0]=(e[1]+e[4])/n,t[1]=.25*n,t[2]=(e[6]+e[9])/n):(n=2*Math.sqrt(1+e[10]-e[0]-e[5]),t[3]=(e[1]-e[4])/n,t[0]=(e[8]+e[2])/n,t[1]=(e[6]+e[9])/n,t[2]=.25*n),t},fromRotationTranslationScale:function(t,e,r,n){const i=e[0],s=e[1],o=e[2],a=e[3],c=i+i,l=s+s,u=o+o,h=i*c,d=i*l,p=i*u,f=s*l,b=s*u,m=o*u,y=a*c,g=a*l,j=a*u,O=n[0],v=n[1],w=n[2];return t[0]=(1-(f+m))*O,t[1]=(d+j)*O,t[2]=(p-g)*O,t[3]=0,t[4]=(d-j)*v,t[5]=(1-(h+m))*v,t[6]=(b+y)*v,t[7]=0,t[8]=(p+g)*w,t[9]=(b-y)*w,t[10]=(1-(h+f))*w,t[11]=0,t[12]=r[0],t[13]=r[1],t[14]=r[2],t[15]=1,t},fromRotationTranslationScaleOrigin:function(t,e,r,n,i){const s=e[0],o=e[1],a=e[2],c=e[3],l=s+s,u=o+o,h=a+a,d=s*l,p=s*u,f=s*h,b=o*u,m=o*h,y=a*h,g=c*l,j=c*u,O=c*h,v=n[0],w=n[1],x=n[2],S=i[0],M=i[1],_=i[2],T=(1-(b+y))*v,F=(p+O)*v,I=(f-j)*v,R=(p-O)*w,C=(1-(d+y))*w,P=(m+g)*w,B=(f+j)*x,z=(m-g)*x,k=(1-(d+b))*x;return t[0]=T,t[1]=F,t[2]=I,t[3]=0,t[4]=R,t[5]=C,t[6]=P,t[7]=0,t[8]=B,t[9]=z,t[10]=k,t[11]=0,t[12]=r[0]+S-(T*S+R*M+B*_),t[13]=r[1]+M-(F*S+C*M+z*_),t[14]=r[2]+_-(I*S+P*M+k*_),t[15]=1,t},fromQuat:x,frustum:S,perspective:function(t,e,r,n,i){const s=1/Math.tan(e/2);let o;return t[0]=s/r,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=s,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=i&&i!==1/0?(o=1/(n-i),t[10]=(i+n)*o,t[14]=2*i*n*o):(t[10]=-1,t[14]=-2*n),t},perspectiveFromFieldOfView:function(t,e,r,n){const i=Math.tan(e.upDegrees*Math.PI/180),s=Math.tan(e.downDegrees*Math.PI/180),o=Math.tan(e.leftDegrees*Math.PI/180),a=Math.tan(e.rightDegrees*Math.PI/180),c=2/(o+a),l=2/(i+s);return t[0]=c,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=l,t[6]=0,t[7]=0,t[8]=-(o-a)*c*.5,t[9]=(i-s)*l*.5,t[10]=n/(r-n),t[11]=-1,t[12]=0,t[13]=0,t[14]=n*r/(r-n),t[15]=0,t},ortho:M,lookAt:_,targetTo:function(t,e,r,n){const i=e[0],s=e[1],o=e[2],a=n[0],c=n[1],l=n[2];let u=i-r[0],h=s-r[1],d=o-r[2],p=u*u+h*h+d*d;p>0&&(p=1/Math.sqrt(p),u*=p,h*=p,d*=p);let f=c*d-l*h,b=l*u-a*d,m=a*h-c*u;return p=f*f+b*b+m*m,p>0&&(p=1/Math.sqrt(p),f*=p,b*=p,m*=p),t[0]=f,t[1]=b,t[2]=m,t[3]=0,t[4]=h*m-d*b,t[5]=d*f-u*m,t[6]=u*b-h*f,t[7]=0,t[8]=u,t[9]=h,t[10]=d,t[11]=0,t[12]=i,t[13]=s,t[14]=o,t[15]=1,t},str:function(t){return"mat4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+", "+t[9]+", "+t[10]+", "+t[11]+", "+t[12]+", "+t[13]+", "+t[14]+", "+t[15]+")"},frob:function(t){return Math.sqrt(t[0]**2+t[1]**2+t[2]**2+t[3]**2+t[4]**2+t[5]**2+t[6]**2+t[7]**2+t[8]**2+t[9]**2+t[10]**2+t[11]**2+t[12]**2+t[13]**2+t[14]**2+t[15]**2)},add:function(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t[2]=e[2]+r[2],t[3]=e[3]+r[3],t[4]=e[4]+r[4],t[5]=e[5]+r[5],t[6]=e[6]+r[6],t[7]=e[7]+r[7],t[8]=e[8]+r[8],t[9]=e[9]+r[9],t[10]=e[10]+r[10],t[11]=e[11]+r[11],t[12]=e[12]+r[12],t[13]=e[13]+r[13],t[14]=e[14]+r[14],t[15]=e[15]+r[15],t},subtract:T,multiplyScalar:function(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t[4]=e[4]*r,t[5]=e[5]*r,t[6]=e[6]*r,t[7]=e[7]*r,t[8]=e[8]*r,t[9]=e[9]*r,t[10]=e[10]*r,t[11]=e[11]*r,t[12]=e[12]*r,t[13]=e[13]*r,t[14]=e[14]*r,t[15]=e[15]*r,t},multiplyScalarAndAdd:function(t,e,r,n){return t[0]=e[0]+r[0]*n,t[1]=e[1]+r[1]*n,t[2]=e[2]+r[2]*n,t[3]=e[3]+r[3]*n,t[4]=e[4]+r[4]*n,t[5]=e[5]+r[5]*n,t[6]=e[6]+r[6]*n,t[7]=e[7]+r[7]*n,t[8]=e[8]+r[8]*n,t[9]=e[9]+r[9]*n,t[10]=e[10]+r[10]*n,t[11]=e[11]+r[11]*n,t[12]=e[12]+r[12]*n,t[13]=e[13]+r[13]*n,t[14]=e[14]+r[14]*n,t[15]=e[15]+r[15]*n,t},exactEquals:F,equals:I,isOrthoNormal:R,mul:C,sub:P})},153:function(t,e,r){"use strict";r.d(e,"a",(function(){return m}));var n,i=r(79),s=r(90),o=r(86),a=r(81),c=(r(84),r(82),r(83)),l=r(95),u=r(93),h=r(80),d=r(198),p=r(268);const f=new s.a({binary:"binary",coordinate:"coordinate",countOrAmount:"count-or-amount",dateAndTime:"date-and-time",description:"description",locationOrPlaceName:"location-or-place-name",measurement:"measurement",nameOrTitle:"name-or-title",none:"none",orderedOrRanked:"ordered-or-ranked",percentageOrRatio:"percentage-or-ratio",typeOrCategory:"type-or-category",uniqueIdentifier:"unique-identifier"});let b=n=class extends o.a{constructor(t){super(t),this.alias=null,this.defaultValue=void 0,this.description=null,this.domain=null,this.editable=!0,this.length=-1,this.name=null,this.nullable=!0,this.type=null,this.valueType=null}readDescription(t,{description:e}){let r;try{r=JSON.parse(e)}catch(n){}return r?r.value:null}readValueType(t,{description:e}){let r;try{r=JSON.parse(e)}catch(n){}return r?f.fromJSON(r.fieldValueType):null}clone(){return new n({alias:this.alias,defaultValue:this.defaultValue,description:this.description,domain:this.domain&&this.domain.clone()||null,editable:this.editable,length:this.length,name:this.name,nullable:this.nullable,type:this.type,valueType:this.valueType})}};Object(i.a)([Object(a.b)({type:String,json:{write:!0}})],b.prototype,"alias",void 0),Object(i.a)([Object(a.b)({type:[String,Number],json:{write:{allowNull:!0}}})],b.prototype,"defaultValue",void 0),Object(i.a)([Object(a.b)()],b.prototype,"description",void 0),Object(i.a)([Object(u.a)("description")],b.prototype,"readDescription",null),Object(i.a)([Object(a.b)({types:d.b,json:{read:{reader:d.a},write:!0}})],b.prototype,"domain",void 0),Object(i.a)([Object(a.b)({type:Boolean,json:{write:!0}})],b.prototype,"editable",void 0),Object(i.a)([Object(a.b)({type:c.a,json:{write:!0}})],b.prototype,"length",void 0),Object(i.a)([Object(a.b)({type:String,json:{write:!0}})],b.prototype,"name",void 0),Object(i.a)([Object(a.b)({type:Boolean,json:{write:!0}})],b.prototype,"nullable",void 0),Object(i.a)([Object(l.a)(p.a)],b.prototype,"type",void 0),Object(i.a)([Object(a.b)()],b.prototype,"valueType",void 0),Object(i.a)([Object(u.a)("valueType",["description"])],b.prototype,"readValueType",null),b=n=Object(i.a)([Object(h.a)("esri.layers.support.Field")],b);const m=b},163:function(t,e,r){"use strict";r.d(e,"a",(function(){return c}));var n=r(79),i=r(86),s=r(81),o=(r(84),r(82),r(83),r(80));let a=class extends i.a{constructor(t){super(t),this.type=null}};Object(n.a)([Object(s.b)({readOnly:!0,json:{read:!1,write:!0}})],a.prototype,"type",void 0),a=Object(n.a)([Object(o.a)("esri.rest.support.ColorRamp")],a);const c=a},165:function(t,e,r){"use strict";r.d(e,"a",(function(){return b}));var n,i=r(79),s=r(89),o=r(81),a=(r(83),r(95)),c=r(80),l=r(86);r(84),r(82);let u=n=class extends l.a{constructor(t){super(t),this.name=null,this.code=null}clone(){return new n({name:this.name,code:this.code})}};Object(i.a)([Object(o.b)({type:String,json:{write:!0}})],u.prototype,"name",void 0),Object(i.a)([Object(o.b)({type:[String,Number],json:{write:!0}})],u.prototype,"code",void 0),u=n=Object(i.a)([Object(c.a)("esri.layers.support.CodedValue")],u);const h=u;var d,p=r(123);let f=d=class extends p.a{constructor(t){super(t),this.codedValues=null,this.type="coded-value"}getName(t){let e=null;if(this.codedValues){const r=String(t);this.codedValues.some((t=>(String(t.code)===r&&(e=t.name),!!e)))}return e}clone(){return new d({codedValues:Object(s.a)(this.codedValues),name:this.name})}};Object(i.a)([Object(o.b)({type:[h],json:{write:!0}})],f.prototype,"codedValues",void 0),Object(i.a)([Object(a.a)({codedValue:"coded-value"})],f.prototype,"type",void 0),f=d=Object(i.a)([Object(c.a)("esri.layers.support.CodedValueDomain")],f);const b=f},166:function(t,e,r){"use strict";r.d(e,"a",(function(){return l}));var n,i=r(79),s=(r(87),r(83),r(84),r(82),r(174),r(95)),o=r(80),a=r(123);let c=n=class extends a.a{constructor(t){super(t),this.type="inherited"}clone(){return new n}};Object(i.a)([Object(s.a)({inherited:"inherited"})],c.prototype,"type",void 0),c=n=Object(i.a)([Object(o.a)("esri.layers.support.InheritedDomain")],c);const l=c},167:function(t,e,r){"use strict";r.d(e,"a",(function(){return u}));var n,i=r(79),s=r(81),o=(r(84),r(82),r(83),r(95)),a=r(80),c=r(123);let l=n=class extends c.a{constructor(t){super(t),this.maxValue=null,this.minValue=null,this.type="range"}clone(){return new n({maxValue:this.maxValue,minValue:this.minValue,name:this.name})}};Object(i.a)([Object(s.b)({type:Number,json:{type:[Number],read:{source:"range",reader:(t,e)=>e.range&&e.range[1]},write:{enabled:!1,overridePolicy(){return{enabled:null!=this.maxValue&&null==this.minValue}},target:"range",writer(t,e,r){e[r]=[this.minValue||0,t]}}}})],l.prototype,"maxValue",void 0),Object(i.a)([Object(s.b)({type:Number,json:{type:[Number],read:{source:"range",reader:(t,e)=>e.range&&e.range[0]},write:{target:"range",writer(t,e,r){e[r]=[t,this.maxValue||0]}}}})],l.prototype,"minValue",void 0),Object(i.a)([Object(o.a)({range:"range"})],l.prototype,"type",void 0),l=n=Object(i.a)([Object(a.a)("esri.layers.support.RangeDomain")],l);const u=l},180:function(t,e,r){"use strict";r.d(e,"a",(function(){return X})),r.d(e,"b",(function(){return K})),r.d(e,"c",(function(){return U})),r.d(e,"d",(function(){return J})),r.d(e,"e",(function(){return H})),r.d(e,"f",(function(){return L})),r.d(e,"g",(function(){return V})),r.d(e,"h",(function(){return D})),r.d(e,"i",(function(){return Z})),r.d(e,"j",(function(){return $})),r.d(e,"k",(function(){return Q})),r.d(e,"l",(function(){return B})),r.d(e,"m",(function(){return w})),r.d(e,"n",(function(){return A})),r.d(e,"o",(function(){return N})),r.d(e,"p",(function(){return ht})),r.d(e,"q",(function(){return nt})),r.d(e,"r",(function(){return ot})),r.d(e,"s",(function(){return ut})),r.d(e,"t",(function(){return et})),r.d(e,"u",(function(){return rt})),r.d(e,"v",(function(){return g})),r.d(e,"w",(function(){return j})),r.d(e,"x",(function(){return ct})),r.d(e,"y",(function(){return tt})),r.d(e,"z",(function(){return at}));var n=r(88),i=r(87),s=r(85),o=r(98),a=r(261),c=r(334),l=r(188);function u(t,e){return t?e?4:3:e?3:2}const h=i.a.getLogger("esri.tasks.support.optimizedFeatureSet"),d={esriGeometryPoint:0,esriGeometryPolyline:2,esriGeometryPolygon:3,esriGeometryMultipoint:0},p=(t,e,r,n,i,s)=>{t[r]=i,t[r+1]=s},f=(t,e,r,n,i,s)=>{t[r]=i,t[r+1]=s,t[r+2]=e[n+2]},b=(t,e,r,n,i,s)=>{t[r]=i,t[r+1]=s,t[r+2]=e[n+3]},m=(t,e,r,n,i,s)=>{t[r]=i,t[r+1]=s,t[r+2]=e[n+2],t[r+3]=e[n+3]};function y(t,e,r,n){if(t){if(r)return e&&n?m:f;if(e&&n)return b}else if(e&&n)return f;return p}function g({scale:t,translate:e},r){return Math.round((r-e[0])/t[0])}function j({scale:t,translate:e},r){return Math.round((e[1]-r)/t[1])}function O({scale:t,translate:e},r){return r*t[0]+e[0]}function v({scale:t,translate:e},r){return e[1]-r*t[1]}function w(t,e,r){return t?e?r?I(t):M(t):r?T(t):x(t):null}function x(t){const e=t.coords;return{x:e[0],y:e[1]}}function S(t,e){return t.coords[0]=e.x,t.coords[1]=e.y,t}function M(t){const e=t.coords;return{x:e[0],y:e[1],z:e[2]}}function _(t,e){return t.coords[0]=e.x,t.coords[1]=e.y,t.coords[2]=e.z,t}function T(t){const e=t.coords;return{x:e[0],y:e[1],m:e[2]}}function F(t,e){return t.coords[0]=e.x,t.coords[1]=e.y,t.coords[2]=e.m,t}function I(t){const e=t.coords;return{x:e[0],y:e[1],z:e[2],m:e[3]}}function R(t,e){return t.coords[0]=e.x,t.coords[1]=e.y,t.coords[2]=e.z,t.coords[3]=e.m,t}function C(t,e){return t&&e?R:t?_:e?F:S}function P(t,e,r,n,i){const s=C(r,n);for(const o of e){const{geometry:e,attributes:r}=o;let n;e&&(n=s(new l.a,e)),t.push(new a.b(n,r,null,r[i]))}return t}function B(t,e,r){if(Object(s.k)(t))return null;const n=u(e,r),i=[];for(let s=0;s<t.coords.length;s+=n){const e=[];for(let r=0;r<n;r++)e.push(t.coords[s+r]);i.push(e)}return e?r?{points:i,hasZ:e,hasM:r}:{points:i,hasZ:e}:r?{points:i,hasM:r}:{points:i}}function z(t,e,r,n,i){const s=u(r,n);for(const o of e){const e=o.geometry,r=o.attributes;let n;e&&(n=k(new l.a,e,s)),t.push(new a.b(n,r,null,r[i]))}return t}function k(t,e,r=u(e.hasZ,e.hasM)){t.lengths[0]=e.points.length;const n=t.coords;let i=0;for(const s of e.points)for(let t=0;t<r;t++)n[i++]=s[t];return t}function N(t,e,r){if(!t)return null;const n=u(e,r),{coords:i,lengths:s}=t,o=[];let a=0;for(const c of s){const t=[];for(let e=0;e<c;e++){const e=[];for(let t=0;t<n;t++)e.push(i[a++]);t.push(e)}o.push(t)}return e?r?{paths:o,hasZ:e,hasM:r}:{paths:o,hasZ:e}:r?{paths:o,hasM:r}:{paths:o}}function E(t,e,r,n,i){const s=u(r,n);for(const o of e){const e=o.geometry,r=o.attributes;let n;e&&(n=D(new l.a,e,s)),t.push(new a.b(n,r,null,r[i]))}return t}function D(t,e,r=u(e.hasZ,e.hasM)){const{lengths:n,coords:i}=t;let s=0;for(const o of e.paths){for(const t of o)for(let e=0;e<r;e++)i[s++]=t[e];n.push(o.length)}return t}function A(t,e,r){if(!t)return null;const n=u(e,r),{coords:i,lengths:s}=t,o=[];let a=0;for(const c of s){const t=[];for(let e=0;e<c;e++){const e=[];for(let t=0;t<n;t++)e.push(i[a++]);t.push(e)}o.push(t)}return e?r?{rings:o,hasZ:e,hasM:r}:{rings:o,hasZ:e}:r?{rings:o,hasM:r}:{rings:o}}function q(t,e,r,n,i){for(const o of e){const e=o.geometry,c=o.centroid,u=o.attributes;let h;e&&(h=V(new l.a,e,r,n)),Object(s.l)(c)?t.push(new a.b(h,u,S(new l.a,c),u[i])):t.push(new a.b(h,u,null,u[i]))}return t}function V(t,e,r=e.hasZ,n=e.hasM){return L(t,e.rings,r,n),t}function L(t,e,r,n){const i=u(r,n),{lengths:s,coords:o}=t;let a=0;s.length=o.length=0;for(const c of e){for(const t of c)for(let e=0;e<i;e++)o[a++]=t[e];s.push(c.length)}return t}const Y=[],G=[];function X(t,e,r,n,i){Y[0]=t;const[s]=U(G,Y,e,r,n,i);return Y.length=G.length=0,s}function U(t,e,r,i,s,o){if(t.length=0,!r){for(const r of e){const e=r.attributes[o];t.push(new a.b(null,r.attributes,null,e))}return t}switch(r){case"esriGeometryPoint":return P(t,e,i,s,o);case"esriGeometryMultipoint":return z(t,e,i,s,o);case"esriGeometryPolyline":return E(t,e,i,s,o);case"esriGeometryPolygon":return q(t,e,i,s,o);default:h.error("convertToFeatureSet:unknown-geometry",new n.a(`Unable to parse unknown geometry type '${r}'`)),t.length=0}return t}function H(t,e,r,i,s,o){const a=t.length;switch(r){case"esriGeometryPoint":P(t,e,i,s,o);break;case"esriGeometryMultipoint":z(t,e,i,s,o);break;case"esriGeometryPolyline":E(t,e,i,s,o);break;case"esriGeometryPolygon":q(t,e,i,s,o);break;default:h.error("convertToFeatureSet:unknown-geometry",new n.a(`Unable to parse unknown geometry type '${r}'`))}for(let n=0;n<e.length;n++)t[n+a].geometryType=r,t[n+a].insertAfter=e[n].insertAfter,t[n+a].groupId=e[n].groupId;return t}function Z(t,e,r,n){G[0]=t,W(Y,G,e,r,n);const i=Y[0];return Y.length=G.length=0,i}function J(t,e,r){if(Object(s.k)(t))return null;const i=new l.a;return"hasZ"in t&&null==e&&(e=t.hasZ),"hasM"in t&&null==r&&(r=t.hasM),Object(o.f)(t)?C(null!=e?e:null!=t.z,null!=r?r:null!=t.m)(i,t):Object(o.g)(t)?V(i,t,e,r):Object(o.h)(t)?D(i,t,u(e,r)):Object(o.e)(t)?k(i,t,u(e,r)):void h.error("convertFromGeometry:unknown-geometry",new n.a(`Unable to parse unknown geometry type '${t}'`))}function Q(t,e,r,i){const o=t&&("coords"in t?t:t.geometry);if(Object(s.k)(o))return null;switch(e){case"esriGeometryPoint":{let t=x;return r&&i?t=I:r?t=M:i&&(t=T),t(o)}case"esriGeometryMultipoint":return B(o,r,i);case"esriGeometryPolyline":return N(o,r,i);case"esriGeometryPolygon":return A(o,r,i);default:return void h.error("convertToGeometry:unknown-geometry",new n.a(`Unable to parse unknown geometry type '${e}'`))}}function W(t,e,r,i,o){if(t.length=0,Object(s.k)(r))return function(t,e){for(const r of e)t.push({attributes:r.attributes});return t}(t,e);switch(r){case"esriGeometryPoint":return function(t,e,r,n){let i=x;r&&n?i=I:r?i=M:n&&(i=T);for(const o of e){const{geometry:e,attributes:r}=o,n=Object(s.l)(e)?i(e):null;t.push({attributes:r,geometry:n})}return t}(t,e,i,o);case"esriGeometryMultipoint":return function(t,e,r,n){for(const i of e){const{geometry:e,attributes:s}=i;let o;e&&(o=B(e,r,n)),t.push({attributes:s,geometry:o})}return t}(t,e,i,o);case"esriGeometryPolyline":return function(t,e,r,n){for(const i of e){const{geometry:e,attributes:o}=i;let a;Object(s.l)(e)&&(a=N(e,r,n)),t.push({attributes:o,geometry:a})}return t}(t,e,i,o);case"esriGeometryPolygon":return function(t,e,r,n){for(const i of e){const{geometry:e,attributes:o,centroid:a}=i;let c;if(Object(s.l)(e)&&(c=A(e,r,n)),a){const e=x(a);t.push({attributes:o,centroid:e,geometry:c})}else t.push({attributes:o,geometry:c})}return t}(t,e,i,o);default:h.error("convertToFeatureSet:unknown-geometry",new n.a(`Unable to parse unknown geometry type '${r}'`))}return t}function $(t){const{objectIdFieldName:e,spatialReference:r,transform:n,fields:i,hasM:s,hasZ:o,features:a,geometryType:c,exceededTransferLimit:l,uniqueIdField:u,queryGeometry:h,queryGeometryType:d}=t,p={features:W([],a,c,o,s),fields:i,geometryType:c,objectIdFieldName:e,spatialReference:r,uniqueIdField:u,queryGeometry:Q(h,d,!1,!1)};return n&&(p.transform=n),l&&(p.exceededTransferLimit=l),s&&(p.hasM=s),o&&(p.hasZ=o),p}function K(t,e){const r=new c.a,{hasM:i,hasZ:s,features:o,objectIdFieldName:a,spatialReference:l,geometryType:u,exceededTransferLimit:d,transform:p,fields:f}=t;return f&&(r.fields=f),r.geometryType=u,r.objectIdFieldName=a||e,r.spatialReference=l,r.objectIdFieldName?(o&&U(r.features,o,u,s,i,r.objectIdFieldName),d&&(r.exceededTransferLimit=d),i&&(r.hasM=i),s&&(r.hasZ=s),p&&(r.transform=p),r):(h.error(new n.a("optimized-features:invalid-objectIdFieldName","objectIdFieldName is missing")),r)}function tt(t){const{transform:e,features:r,hasM:n,hasZ:i}=t;if(!e)return t;for(const o of r)Object(s.l)(o.geometry)&&at(o.geometry,o.geometry,n,i,e),o.centroid&&at(o.centroid,o.centroid,n,i,e);return t.transform=null,t}function et(t,e){const{geometryType:r,features:n,hasM:i,hasZ:s}=e;if(!t)return e;for(let o=0;o<n.length;o++){const e=n[o],a=e.weakClone();a.geometry=new l.a,rt(a.geometry,e.geometry,i,s,r,t),e.centroid&&(a.centroid=new l.a,rt(a.centroid,e.centroid,i,s,"esriGeometryPoint",t)),n[o]=a}return e.transform=t,e}function rt(t,e,r,n,i,o,a=r,c=n){if(t.lengths.length&&(t.lengths.length=0),t.coords.length&&(t.coords.length=0),Object(s.k)(e)||!e.coords.length)return null;const l=d[i],{coords:h,lengths:p}=e,f=u(r,n),b=u(r&&a,n&&c),m=y(r,n,a,c);if(!p.length)return m(t.coords,h,0,0,g(o,h[0]),j(o,h[1])),t.lengths.length&&(t.lengths.length=0),t.coords.length=f,t;let O,v,w,x,S=0,M=0,_=M;for(const s of p){if(s<l)continue;let e=0;M=_,w=O=g(o,h[S]),x=v=j(o,h[S+1]),m(t.coords,h,M,S,w,x),e++,S+=f,M+=b;for(let r=1;r<s;r++,S+=f)w=g(o,h[S]),x=j(o,h[S+1]),w===O&&x===v||(m(t.coords,h,M,S,w-O,x-v),M+=b,e++,O=w,v=x);e>=l&&(t.lengths.push(e),_=M)}return t.coords.length=_,t.coords.length?t:null}function nt(t,e,r,n,i,s,o=r,a=n){if(t.lengths.length&&(t.lengths.length=0),t.coords.length&&(t.coords.length=0),!e||!e.coords.length)return null;const c=d[i],{coords:l,lengths:h}=e,p=u(r,n),f=u(r&&o,n&&a),b=y(r,n,o,a);if(!h.length)return b(t.coords,l,0,0,l[0],l[1]),t.lengths.length&&(t.lengths.length=0),t.coords.length=p,t;let m=0;const g=s*s;for(const u of h){if(u<c){m+=u*p;continue}const e=t.coords.length/f,r=m,n=m+(u-1)*p;b(t.coords,l,t.coords.length,r,l[r],l[r+1]),st(t.coords,l,p,g,b,r,n),b(t.coords,l,t.coords.length,n,l[n],l[n+1]);const i=t.coords.length/f-e;i>=c?t.lengths.push(i):t.coords.length=e*f,m+=u*p}return t.coords.length?t:null}function it(t,e,r,n){const i=t[e],s=t[e+1],o=t[r],a=t[r+1],c=t[n],l=t[n+1];let u=o,h=a,d=c-u,p=l-h;if(0!==d||0!==p){const t=((i-u)*d+(s-h)*p)/(d*d+p*p);t>1?(u=c,h=l):t>0&&(u+=d*t,h+=p*t)}return d=i-u,p=s-h,d*d+p*p}function st(t,e,r,n,i,s,o){let a,c=n,l=0;for(let u=s+r;u<o;u+=r)a=it(e,u,s,o),a>c&&(l=u,c=a);c>n&&(l-s>r&&st(t,e,r,n,i,s,l),i(t,e,t.length,l,e[l],e[l+1]),o-l>r&&st(t,e,r,n,i,l,o))}function ot(t,e,r,n){if(Object(s.k)(e)||!e.coords||!e.coords.length)return null;const i=u(r,n);let o=Number.POSITIVE_INFINITY,a=Number.POSITIVE_INFINITY,c=Number.NEGATIVE_INFINITY,l=Number.NEGATIVE_INFINITY;if(e&&e.coords){const t=e.coords;for(let e=0;e<t.length;e+=i){const r=t[e],n=t[e+1];o=Math.min(o,r),c=Math.max(c,r),a=Math.min(a,n),l=Math.max(l,n)}}return t[0]=o,t[1]=a,t[2]=c,t[3]=l,t}function at(t,e,r,n,i){const{coords:s,lengths:o}=e,a=r?n?m:f:n?f:p,c=u(r,n);if(!s.length)return t!==e&&(t.lengths.length=0,t.coords.length=0),t;if(!o.length)return a(t.coords,s,0,0,O(i,s[0]),v(i,s[1])),t!==e&&(t.lengths.length=0,t.coords.length=c),t;const[l,h]=i.scale;let d=0;for(let u=0;u<o.length;u++){const e=o[u];t.lengths[u]=e;let r=O(i,s[d]),n=v(i,s[d+1]);a(t.coords,s,d,d,r,n),d+=c;for(let i=1;i<e;i++,d+=c)r+=s[d]*l,n-=s[d+1]*h,a(t.coords,s,d,d,r,n)}return t!==e&&(t.lengths.length=o.length,t.coords.length=s.length),t}function ct(t,e,r,n,i,s){const o=u(r,n),a=y(r,n,i,s),c=e.coords;t.coords.length=0,t.lengths.length=0,t.lengths.push(...e.lengths);for(let l=0;l<c.length;l+=o)a(t.coords,c,t.coords.length,l,c[l],c[l+1]);return t}function lt(t,e,r,n){let i=0,s=t[n*e],o=t[n*(e+1)];for(let a=1;a<r;a++){const r=s+t[n*(e+a)],c=o+t[n*(e+a)+1],l=(r-s)*(c+o);s=r,o=c,i+=l}return.5*i}function ut(t,e){const{coords:r,lengths:n}=t;let i=0,s=0;for(let o=0;o<n.length;o++)s+=lt(r,i,n[o],e),i+=o;return Math.abs(s)}function ht(t,e){if(Object(s.k)(t))return null;const r=t.clone(),n=t.coords,i=t.lengths;let o=0;for(let s=0;s<i.length;s++){const t=i[s];let a=n[e*o],c=n[e*o+1];for(let i=1;i<t;i++){const t=a+n[e*(o+i)],s=c+n[e*(o+i)+1];r.coords[e*(o+i)]=t,r.coords[e*(o+i)+1]=s,a=t,c=s}o+=t}return r}},183:function(t,e,r){"use strict";r.d(e,"a",(function(){return i}));var n=r(90);const i=Object(n.b)()({esriTimeUnitsMilliseconds:"milliseconds",esriTimeUnitsSeconds:"seconds",esriTimeUnitsMinutes:"minutes",esriTimeUnitsHours:"hours",esriTimeUnitsDays:"days",esriTimeUnitsWeeks:"weeks",esriTimeUnitsMonths:"months",esriTimeUnitsYears:"years",esriTimeUnitsDecades:"decades",esriTimeUnitsCenturies:"centuries",esriTimeUnitsUnknown:void 0})},188:function(t,e,r){"use strict";r.d(e,"a",(function(){return n}));class n{constructor(t=[],e=[],r=!1){this.lengths=null!=t?t:[],this.coords=null!=e?e:[],this.hasIndeterminateRingOrder=r}get isPoint(){return 0===this.lengths.length}get maxLength(){return Math.max(...this.lengths)}get size(){return this.lengths.reduce(((t,e)=>t+e))}forEachVertex(t){let e=0;this.lengths.length||t(this.coords[0],this.coords[1]);for(let r=0;r<this.lengths.length;r++){const n=this.lengths[r];for(let r=0;r<n;r++)t(this.coords[2*(r+e)],this.coords[2*(r+e)+1]);e+=n}}clone(t){return t?(t.set(this.coords),new n(this.lengths.slice(),t,this.hasIndeterminateRingOrder)):new n(this.lengths.slice(),this.coords.slice(),this.hasIndeterminateRingOrder)}}},193:function(t,e,r){"use strict";r.d(e,"a",(function(){return P}));var n,i=r(79),s=r(90),o=r(86),a=r(81),c=(r(84),r(82),r(104)),l=r(95),u=r(93),h=r(80),d=r(83),p=r(173),f=r(153),b=r(321),m=(r(97),r(94)),y=r(171);let g=n=class extends o.a{constructor(t){super(t),this.type="query-table"}clone(){var t;const{workspaceId:e,query:r,oidFields:i,spatialReference:s,geometryType:o}=this,a={workspaceId:e,query:r,oidFields:i,spatialReference:null!=(t=null==s?void 0:s.clone())?t:void 0,geometryType:o};return new n(a)}};var j;Object(i.a)([Object(l.a)({queryTable:"query-table"})],g.prototype,"type",void 0),Object(i.a)([Object(a.b)({type:String,json:{write:!0}})],g.prototype,"workspaceId",void 0),Object(i.a)([Object(a.b)({type:String,json:{write:!0}})],g.prototype,"query",void 0),Object(i.a)([Object(a.b)({type:String,json:{write:!0}})],g.prototype,"oidFields",void 0),Object(i.a)([Object(a.b)({type:m.a,json:{write:!0}})],g.prototype,"spatialReference",void 0),Object(i.a)([Object(l.a)(y.a)],g.prototype,"geometryType",void 0),g=n=Object(i.a)([Object(h.a)("esri.layers.support.source.QueryTableDataSource")],g);let O=j=class extends o.a{constructor(t){super(t),this.type="raster"}clone(){const{workspaceId:t,dataSourceName:e}=this;return new j({workspaceId:t,dataSourceName:e})}};var v;Object(i.a)([Object(l.a)({raster:"raster"})],O.prototype,"type",void 0),Object(i.a)([Object(a.b)({type:String,json:{write:!0}})],O.prototype,"dataSourceName",void 0),Object(i.a)([Object(a.b)({type:String,json:{write:!0}})],O.prototype,"workspaceId",void 0),O=j=Object(i.a)([Object(h.a)("esri.layers.support.source.RasterDataSource")],O);let w=v=class extends o.a{constructor(t){super(t),this.type="table"}clone(){const{workspaceId:t,gdbVersion:e,dataSourceName:r}=this;return new v({workspaceId:t,gdbVersion:e,dataSourceName:r})}};var x,S;Object(i.a)([Object(l.a)({table:"table"})],w.prototype,"type",void 0),Object(i.a)([Object(a.b)({type:String,json:{write:!0}})],w.prototype,"workspaceId",void 0),Object(i.a)([Object(a.b)({type:String,json:{write:!0}})],w.prototype,"gdbVersion",void 0),Object(i.a)([Object(a.b)({type:String,json:{write:!0}})],w.prototype,"dataSourceName",void 0),w=v=Object(i.a)([Object(h.a)("esri.layers.support.source.TableDataSource")],w);const M=Object(s.b)()({esriLeftInnerJoin:"left-inner-join",esriLeftOuterJoin:"left-outer-join"});let _=x=class extends o.a{constructor(t){super(t),this.type="join-table"}readLeftTableSource(t,e,r){return F()(t,e,r)}castLeftTableSource(t){return Object(d.k)(R(),t)}readRightTableSource(t,e,r){return F()(t,e,r)}castRightTableSource(t){return Object(d.k)(R(),t)}clone(){var t,e;const{leftTableKey:r,rightTableKey:n,leftTableSource:i,rightTableSource:s,joinType:o}=this,a={leftTableKey:r,rightTableKey:n,leftTableSource:null!=(t=null==i?void 0:i.clone())?t:void 0,rightTableSource:null!=(e=null==s?void 0:s.clone())?e:void 0,joinType:o};return new x(a)}};Object(i.a)([Object(l.a)({joinTable:"join-table"})],_.prototype,"type",void 0),Object(i.a)([Object(a.b)({type:String,json:{write:!0}})],_.prototype,"leftTableKey",void 0),Object(i.a)([Object(a.b)({type:String,json:{write:!0}})],_.prototype,"rightTableKey",void 0),Object(i.a)([Object(a.b)({json:{write:!0}})],_.prototype,"leftTableSource",void 0),Object(i.a)([Object(u.a)("leftTableSource")],_.prototype,"readLeftTableSource",null),Object(i.a)([Object(c.a)("leftTableSource")],_.prototype,"castLeftTableSource",null),Object(i.a)([Object(a.b)({json:{write:!0}})],_.prototype,"rightTableSource",void 0),Object(i.a)([Object(u.a)("rightTableSource")],_.prototype,"readRightTableSource",null),Object(i.a)([Object(c.a)("rightTableSource")],_.prototype,"castRightTableSource",null),Object(i.a)([Object(l.a)(M)],_.prototype,"joinType",void 0),_=x=Object(i.a)([Object(h.a)("esri.layers.support.source.JoinTableDataSource")],_);let T=null;function F(){return T||(T=Object(p.b)({types:R()})),T}let I=null;function R(){return I||(I={key:"type",base:null,typeMap:{"data-layer":P,"map-layer":b.a}}),I}const C={key:"type",base:null,typeMap:{"join-table":_,"query-table":g,raster:O,table:w}};let P=S=class extends o.a{constructor(t){super(t),this.type="data-layer"}clone(){const{fields:t,dataSource:e}=this;return new S({fields:t,dataSource:e})}};Object(i.a)([Object(l.a)({dataLayer:"data-layer"})],P.prototype,"type",void 0),Object(i.a)([Object(a.b)({type:[f.a],json:{write:!0}})],P.prototype,"fields",void 0),Object(i.a)([Object(a.b)({types:C,json:{write:!0}})],P.prototype,"dataSource",void 0),P=S=Object(i.a)([Object(h.a)("esri.layers.support.source.DataLayerSource")],P),P.from=Object(d.m)(P)},194:function(t,e){var r;r=function(){return this}();try{r=r||new Function("return this")()}catch(n){"object"===typeof window&&(r=window)}t.exports=r},198:function(t,e,r){"use strict";r.d(e,"a",(function(){return c})),r.d(e,"b",(function(){return a}));r(82);var n=r(165),i=r(123),s=r(166),o=r(167);const a={key:"type",base:i.a,typeMap:{range:o.a,"coded-value":n.a,inherited:s.a}};function c(t){if(!t||!t.type)return null;switch(t.type){case"range":return o.a.fromJSON(t);case"codedValue":return n.a.fromJSON(t);case"inherited":return s.a.fromJSON(t)}return null}},200:function(t,e,r){"use strict";r.d(e,"a",(function(){return p}));var n,i=r(79),s=r(103),o=r(89),a=r(81),c=r(83),l=r(95),u=r(80),h=r(163);let d=n=class extends h.a{constructor(t){super(t),this.algorithm=null,this.fromColor=null,this.toColor=null,this.type="algorithmic"}clone(){return new n({fromColor:Object(o.a)(this.fromColor),toColor:Object(o.a)(this.toColor),algorithm:this.algorithm})}};Object(i.a)([Object(l.a)({esriCIELabAlgorithm:"cie-lab",esriHSVAlgorithm:"hsv",esriLabLChAlgorithm:"lab-lch"})],d.prototype,"algorithm",void 0),Object(i.a)([Object(a.b)({type:s.a,json:{type:[c.a],write:!0}})],d.prototype,"fromColor",void 0),Object(i.a)([Object(a.b)({type:s.a,json:{type:[c.a],write:!0}})],d.prototype,"toColor",void 0),Object(i.a)([Object(a.b)({type:["algorithmic"]})],d.prototype,"type",void 0),d=n=Object(i.a)([Object(u.a)("esri.rest.support.AlgorithmicColorRamp")],d);const p=d},212:function(t,e,r){"use strict";r.d(e,"a",(function(){return h})),r.d(e,"b",(function(){return s})),r.d(e,"c",(function(){return o})),r.d(e,"d",(function(){return u})),r.d(e,"e",(function(){return d}));r(201),r(162);var n=r(85),i=r(217);r(168);function s(t,e,r={}){return a(t,e,r,c)}function o(t,e,r={}){return a(t,e,r,l)}function a(t,e,r={},s){let o=null;const a=r.once?(t,r)=>{s(t)&&(Object(n.s)(o),e(t,r))}:(t,r)=>{s(t)&&e(t,r)};if(o=Object(i.e)(t,a,r.sync,r.equals),r.initial){const e=t();a(e,e)}return o}function c(t){return!0}function l(t){return!!t}const u={sync:!0},h={initial:!0},d={sync:!0,initial:!0}},221:function(t,e,r){"use strict";(function(t){r.d(e,"a",(function(){return s})),r.d(e,"b",(function(){return n})),r.d(e,"c",(function(){return i}));var n="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof t?t:"undefined"!=typeof self?self:{};function i(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function s(t){throw new Error('Could not dynamically require "'+t+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}}).call(this,r(194))},223:function(t,e,r){"use strict";r.d(e,"a",(function(){return z})),r.d(e,"b",(function(){return k})),r.d(e,"c",(function(){return d})),r.d(e,"d",(function(){return y})),r.d(e,"e",(function(){return O})),r.d(e,"f",(function(){return s})),r.d(e,"g",(function(){return m})),r.d(e,"h",(function(){return F})),r.d(e,"i",(function(){return B})),r.d(e,"j",(function(){return a})),r.d(e,"k",(function(){return u})),r.d(e,"l",(function(){return h})),r.d(e,"m",(function(){return c})),r.d(e,"n",(function(){return l})),r.d(e,"o",(function(){return R})),r.d(e,"p",(function(){return o})),r.d(e,"q",(function(){return S})),r.d(e,"r",(function(){return v})),r.d(e,"s",(function(){return P})),r.d(e,"t",(function(){return j})),r.d(e,"u",(function(){return w})),r.d(e,"v",(function(){return x})),r.d(e,"w",(function(){return T})),r.d(e,"x",(function(){return _})),r.d(e,"y",(function(){return M})),r.d(e,"z",(function(){return g})),r.d(e,"A",(function(){return I}));var n=r(85),i=(r(96),r(118));function s(t=k){return[t[0],t[1],t[2],t[3],t[4],t[5]]}function o(t,e,r,n,i,o,a=s()){return a[0]=t,a[1]=e,a[2]=r,a[3]=n,a[4]=i,a[5]=o,a}function a(t,e){t[0]=Math.min(t[0],e[0]),t[1]=Math.min(t[1],e[1]),t[2]=Math.min(t[2],e[2]),t[3]=Math.max(t[3],e[3]),t[4]=Math.max(t[4],e[4]),t[5]=Math.max(t[5],e[5])}function c(t,e){t[0]=Math.min(t[0],e[0]),t[1]=Math.min(t[1],e[1]),t[3]=Math.max(t[3],e[2]),t[4]=Math.max(t[4],e[3])}function l(t,e){t[0]=Math.min(t[0],e[0]),t[1]=Math.min(t[1],e[1]),t[2]=Math.min(t[2],e[2]),t[3]=Math.max(t[3],e[0]),t[4]=Math.max(t[4],e[1]),t[5]=Math.max(t[5],e[2])}function u(t,e,r=0,n=e.length/3){let i=t[0],s=t[1],o=t[2],a=t[3],c=t[4],l=t[5];for(let u=0;u<n;u++)i=Math.min(i,e[r+3*u]),s=Math.min(s,e[r+3*u+1]),o=Math.min(o,e[r+3*u+2]),a=Math.max(a,e[r+3*u]),c=Math.max(c,e[r+3*u+1]),l=Math.max(l,e[r+3*u+2]);t[0]=i,t[1]=s,t[2]=o,t[3]=a,t[4]=c,t[5]=l}function h(t,e,r){const n=e.length;let i=t[0],s=t[1],o=t[2],a=t[3],c=t[4],l=t[5];if(r)for(let u=0;u<n;u++){const t=e[u];i=Math.min(i,t[0]),s=Math.min(s,t[1]),o=Math.min(o,t[2]),a=Math.max(a,t[0]),c=Math.max(c,t[1]),l=Math.max(l,t[2])}else for(let u=0;u<n;u++){const t=e[u];i=Math.min(i,t[0]),s=Math.min(s,t[1]),a=Math.max(a,t[0]),c=Math.max(c,t[1])}t[0]=i,t[1]=s,t[2]=o,t[3]=a,t[4]=c,t[5]=l}function d(t){for(let e=0;e<6;e++)if(!isFinite(t[e]))return!1;return!0}function p(t){return t[0]>=t[3]?0:t[3]-t[0]}function f(t){return t[1]>=t[4]?0:t[4]-t[1]}function b(t){return t[2]>=t[5]?0:t[5]-t[2]}function m(t){const e=p(t),r=b(t),n=f(t);return Math.sqrt(e*e+r*r+n*n)}function y(t,e=[0,0,0]){return e[0]=t[0]+p(t)/2,e[1]=t[1]+f(t)/2,e[2]=t[2]+b(t)/2,e}function g(t,e=[0,0,0]){return e[0]=p(t),e[1]=f(t),e[2]=b(t),e}function j(t){return Math.max(p(t),b(t),f(t))}function O(t,e){return e[0]>=t[0]&&e[1]>=t[1]&&e[2]>=t[2]&&e[0]<=t[3]&&e[1]<=t[4]&&e[2]<=t[5]}function v(t,e){return!!Object(n.k)(e)||function(t,e){return Math.max(e[0],t[0])<=Math.min(e[3],t[3])&&Math.max(e[1],t[1])<=Math.min(e[4],t[4])&&Math.max(e[2],t[2])<=Math.min(e[5],t[5])}(t,e)}function w(t,e,r,n,i=t){return i[0]=t[0]+e,i[1]=t[1]+r,i[2]=t[2]+n,i[3]=t[3]+e,i[4]=t[4]+r,i[5]=t[5]+n,i}function x(t,e,r=t){const n=t[0]+p(t)/2,i=t[1]+f(t)/2,s=t[2]+b(t)/2;return r[0]=n+(t[0]-n)*e,r[1]=i+(t[1]-i)*e,r[2]=s+(t[2]-s)*e,r[3]=n+(t[3]-n)*e,r[4]=i+(t[4]-i)*e,r[5]=s+(t[5]-s)*e,r}function S(t,e){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}function M(t,e,r=t){return r[0]=e[0],r[1]=e[1],r[2]=e[2],r!==t&&(r[3]=t[3],r[4]=t[4],r[5]=t[5]),r}function _(t,e,r=t){return r[3]=e[0],r[4]=e[1],r[5]=e[2],r!==t&&(r[0]=t[0],r[1]=t[1],r[2]=t[2]),t}function T(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t}function F(t){return t?T(t,z):s(z)}function I(t,e){return e||(e=Object(i.l)()),e[0]=t[0],e[1]=t[1],e[2]=t[3],e[3]=t[4],e}function R(t,e){return t[0]=e[0],t[1]=e[1],t[2]=Number.NEGATIVE_INFINITY,t[3]=e[2],t[4]=e[3],t[5]=Number.POSITIVE_INFINITY,t}function C(t){return 6===t.length}function P(t){return 0===p(t)&&0===f(t)&&0===b(t)}function B(t,e,r){if(Object(n.k)(t)||Object(n.k)(e))return t===e;if(!C(t)||!C(e))return!1;if(r){for(let n=0;n<t.length;n++)if(!r(t[n],e[n]))return!1}else for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}const z=[1/0,1/0,1/0,-1/0,-1/0,-1/0],k=[0,0,0,0,0,0];s()},230:function(t,e,r){"use strict";r.d(e,"a",(function(){return h}));var n,i=r(79),s=r(86),o=r(148),a=r(81),c=(r(84),r(82),r(83),r(80)),l=r(183);let u=n=class extends s.a{constructor(t){super(t),this.value=0,this.unit="milliseconds"}toMilliseconds(){return Object(o.a)(this.value,this.unit,"milliseconds")}clone(){return new n({value:this.value,unit:this.unit})}};Object(i.a)([Object(a.b)({type:Number,json:{write:!0},nonNullable:!0})],u.prototype,"value",void 0),Object(i.a)([Object(a.b)({type:l.a.apiValues,json:{type:l.a.jsonValues,read:l.a.read,write:l.a.write},nonNullable:!0})],u.prototype,"unit",void 0),u=n=Object(i.a)([Object(c.a)("esri.TimeInterval")],u);const h=u},239:function(t,e,r){"use strict";r.d(e,"a",(function(){return s})),r.d(e,"b",(function(){return o})),r.d(e,"c",(function(){return a}));var n=r(85),i=r(215);const s=-3;class o{constructor(t,e,r){this._namespace=t,this._storage=e,this._removeFunc=!1,this._hit=0,this._miss=0,this._storage.register(this),this._namespace+=":",r&&(this._storage.registerRemoveFunc(this._namespace,r),this._removeFunc=!0)}destroy(){this._storage.clear(this._namespace),this._removeFunc&&this._storage.deregisterRemoveFunc(this._namespace),this._storage.deregister(this),this._storage=null}get namespace(){return this._namespace.slice(0,-1)}get hitRate(){return this._hit/(this._hit+this._miss)}get size(){return this._storage.size}get maxSize(){return this._storage.maxSize}resetHitRate(){this._hit=this._miss=0}put(t,e,r,n=0){this._storage.put(this._namespace+t,e,r,n)}get(t){const e=this._storage.get(this._namespace+t);return void 0===e?++this._miss:++this._hit,e}pop(t){const e=this._storage.pop(this._namespace+t);return void 0===e?++this._miss:++this._hit,e}updateSize(t,e,r){this._storage.updateSize(this._namespace+t,e,r)}clear(){this._storage.clear(this._namespace)}clearAll(){this._storage.clearAll()}getStats(){return this._storage.getStats()}resetStats(){this._storage.resetStats()}}class a{constructor(t=10485760){this._maxSize=t,this._db=new Map,this._size=0,this._hit=0,this._miss=0,this._removeFuncs=new i.a,this._users=new i.a}destroy(){this.clearAll(),this._removeFuncs.clear(),this._users.clear(),this._db=null}register(t){this._users.push(t)}deregister(t){this._users.removeUnordered(t)}registerRemoveFunc(t,e){this._removeFuncs.push([t,e])}deregisterRemoveFunc(t){this._removeFuncs.filterInPlace((e=>e[0]!==t))}get size(){return this._size}get maxSize(){return this._maxSize}set maxSize(t){this._maxSize=Math.max(t,0),this._checkSizeLimit()}put(t,e,r,n){const i=this._db.get(t);if(i&&(this._size-=i.size,this._db.delete(t),i.entry!==e&&this._notifyRemove(t,i.entry,0)),r>this._maxSize)return void this._notifyRemove(t,e,0);if(void 0===e)return void console.warn("Refusing to cache undefined entry ");if(!r||r<0)return void console.warn("Refusing to cache entry with invalid size "+r);const o=1+Math.max(n,s)-s;this._db.set(t,{entry:e,size:r,lifetime:o,lives:o}),this._size+=r,this._checkSizeLimit()}updateSize(t,e,r){const i=this._db.get(t);if(i&&i.entry===e){for(this._size-=i.size;r>this._maxSize;){const i=this._notifyRemove(t,e,1);if(!(Object(n.l)(i)&&i>0))return void this._db.delete(t);r=i}i.size=r,this._size+=r,this._checkSizeLimit()}}pop(t){const e=this._db.get(t);if(e)return this._size-=e.size,this._db.delete(t),++this._hit,e.entry;++this._miss}get(t){const e=this._db.get(t);if(void 0!==e)return this._db.delete(t),e.lives=e.lifetime,this._db.set(t,e),++this._hit,e.entry;++this._miss}getStats(){const t={Size:Math.round(this._size/1048576)+"/"+Math.round(this._maxSize/1048576)+"MB","Hit rate":Math.round(100*this._getHitRate())+"%",Entries:this._db.size.toString()},e={},r=new Array;this._db.forEach(((t,n)=>{const i=t.lifetime;r[i]=(r[i]||0)+t.size,this._users.forAll((r=>{const i=r.namespace;if(n.startsWith(i)){const r=e[i]||0;e[i]=r+t.size}}))}));const n={};this._users.forAll((t=>{const r=t.namespace;if(!isNaN(t.hitRate)&&t.hitRate>0){const i=e[r]||0;e[r]=i,n[r]=Math.round(100*t.hitRate)+"%"}else n[r]="0%"}));const i=Object.keys(e);i.sort(((t,r)=>e[r]-e[t])),i.forEach((r=>t[r]=Math.round(e[r]/2**20)+"MB / "+n[r]));for(let o=r.length-1;o>=0;--o){const e=r[o];e&&(t["Priority "+(o+s-1)]=Math.round(e/this.size*100)+"%")}return t}resetStats(){this._hit=this._miss=0,this._users.forAll((t=>t.resetHitRate()))}clear(t){this._db.forEach(((e,r)=>{r.startsWith(t)&&(this._size-=e.size,this._db.delete(r),this._notifyRemove(r,e.entry,0))}))}clearAll(){this._db.forEach(((t,e)=>this._notifyRemove(e,t.entry,0))),this._size=0,this._db.clear()}_getHitRate(){return this._hit/(this._hit+this._miss)}_notifyRemove(t,e,r){let n;return this._removeFuncs.some((i=>{if(t.startsWith(i[0])){const t=i[1](e,r);return"number"==typeof t&&(n=t),!0}return!1})),n}_checkSizeLimit(){if(!(this._size<=this._maxSize))for(const[t,e]of this._db){if(this._db.delete(t),e.lives<=1){this._size-=e.size;const r=this._notifyRemove(t,e.entry,1);Object(n.l)(r)&&r>0&&(this._size+=r,e.lives=e.lifetime,e.size=r,this._db.set(t,e))}else--e.lives,this._db.set(t,e);if(this._size<=.9*this.maxSize)return}}}},244:function(t,e,r){"use strict";r.d(e,"a",(function(){return o}));var n=r(105);function i(t){return"oid"===t.type||"esriFieldTypeOID"===t.type}function s(t){return"global-id"===t.type||"esriFieldTypeGlobalID"===t.type}class o{constructor(t){if(this.fields=t,this._fieldsMap=new Map,this._dateFieldsSet=new Set,this._numericFieldsSet=new Set,this.dateFields=[],this.numericFields=[],this._requiredFields=null,!t)return;const e=[];for(const o of t){const t=o&&o.name;if(t){const c=a(t);this._fieldsMap.set(t,o),this._fieldsMap.set(c,o),e.push(c),"date"===(r=o).type||"esriFieldTypeDate"===r.type?(this.dateFields.push(o),this._dateFieldsSet.add(o)):Object(n.u)(o)&&(this._numericFieldsSet.add(o),this.numericFields.push(o)),i(o)||s(o)||(o.editable=null==o.editable||!!o.editable,o.nullable=null==o.nullable||!!o.nullable)}}var r;e.sort(),this.uid=e.join(",")}destroy(){this._fieldsMap.clear()}get requiredFields(){if(!this._requiredFields){this._requiredFields=[];for(const t of this.fields)i(t)||s(t)||t.nullable||void 0!==Object(n.r)(t)||this._requiredFields.push(t)}return this._requiredFields}has(t){return null!=this.get(t)}get(t){return null!=t?this._fieldsMap.get(t)||this._fieldsMap.get(a(t)):void 0}isDateField(t){return this._dateFieldsSet.has(this.get(t))}isNumericField(t){return this._numericFieldsSet.has(this.get(t))}normalizeFieldName(t){const e=this.get(t);if(e)return e.name}}function a(t){return t.toLowerCase().trim()}},247:function(t,e,r){"use strict";r.d(e,"a",(function(){return p}));var n=r(79),i=r(103),s=r(90),o=r(86),a=r(81),c=(r(84),r(82),r(83),r(93)),l=r(80);const u=new s.a({esriSMS:"simple-marker",esriPMS:"picture-marker",esriSLS:"simple-line",esriSFS:"simple-fill",esriPFS:"picture-fill",esriTS:"text",esriSHD:"shield-label-symbol",PointSymbol3D:"point-3d",LineSymbol3D:"line-3d",PolygonSymbol3D:"polygon-3d",WebStyleSymbol:"web-style",MeshSymbol3D:"mesh-3d",LabelSymbol3D:"label-3d",CIMSymbolReference:"cim"});let h=0,d=class extends o.a{constructor(t){super(t),this.id="sym"+h++,this.type=null}set color(t){this._set("color",t)}readColor(t){return t&&null!=t[0]?[t[0],t[1],t[2],t[3]/255]:t}async collectRequiredFields(t,e){}hash(){return JSON.stringify(this.toJSON())}clone(){}};Object(n.a)([Object(a.b)({type:u.apiValues,readOnly:!0,json:{read:!1,write:{ignoreOrigin:!0,writer:u.write}}})],d.prototype,"type",void 0),Object(n.a)([Object(a.b)({type:i.a,value:new i.a([0,0,0,1]),json:{write:{allowNull:!0}}})],d.prototype,"color",null),Object(n.a)([Object(c.a)("color")],d.prototype,"readColor",null),d=Object(n.a)([Object(l.a)("esri.symbols.Symbol")],d);const p=d},254:function(t,e,r){"use strict";r.d(e,"a",(function(){return j}));var n,i=r(79),s=r(120),o=r(230),a=r(86),c=r(89),l=r(85),u=r(81),h=(r(83),r(93)),d=r(80),p=r(92);r(84),r(82);let f=n=class extends a.a{constructor(t){super(t),this.respectsDaylightSaving=!1,this.timezone=null}readRespectsDaylightSaving(t,e){return void 0!==e.respectsDaylightSaving?e.respectsDaylightSaving:void 0!==e.respectDaylightSaving&&e.respectDaylightSaving}clone(){const{respectsDaylightSaving:t,timezone:e}=this;return new n({respectsDaylightSaving:t,timezone:e})}};Object(i.a)([Object(u.b)({type:Boolean,json:{write:!0}})],f.prototype,"respectsDaylightSaving",void 0),Object(i.a)([Object(h.a)("respectsDaylightSaving",["respectsDaylightSaving","respectDaylightSaving"])],f.prototype,"readRespectsDaylightSaving",null),Object(i.a)([Object(u.b)({type:String,json:{read:{source:"timeZone"},write:{target:"timeZone"}}})],f.prototype,"timezone",void 0),f=n=Object(i.a)([Object(d.a)("esri.layers.support.TimeReference")],f);const b=f;var m,y=r(183);let g=m=class extends a.a{constructor(t){super(t),this.cumulative=!1,this.endField=null,this.fullTimeExtent=null,this.hasLiveData=!1,this.interval=null,this.startField=null,this.timeReference=null,this.trackIdField=null,this.useTime=!0}readFullTimeExtent(t,e){if(!e.timeExtent||!Array.isArray(e.timeExtent)||2!==e.timeExtent.length)return null;const r=new Date(e.timeExtent[0]),n=new Date(e.timeExtent[1]);return new s.a({start:r,end:n})}writeFullTimeExtent(t,e){t&&Object(l.l)(t.start)&&Object(l.l)(t.end)?e.timeExtent=[t.start.getTime(),t.end.getTime()]:e.timeExtent=null}readInterval(t,e){return e.timeInterval&&e.timeIntervalUnits?new o.a({value:e.timeInterval,unit:y.a.fromJSON(e.timeIntervalUnits)}):e.defaultTimeInterval&&e.defaultTimeIntervalUnits?new o.a({value:e.defaultTimeInterval,unit:y.a.fromJSON(e.defaultTimeIntervalUnits)}):null}writeInterval(t,e){if(t){const r=t.toJSON();e.timeInterval=r.value,e.timeIntervalUnits=r.unit}else e.timeInterval=null,e.timeIntervalUnits=null}clone(){const{cumulative:t,endField:e,hasLiveData:r,interval:n,startField:i,timeReference:s,fullTimeExtent:o,trackIdField:a,useTime:l}=this;return new m({cumulative:t,endField:e,hasLiveData:r,interval:n,startField:i,timeReference:Object(c.a)(s),fullTimeExtent:Object(c.a)(o),trackIdField:a,useTime:l})}};Object(i.a)([Object(u.b)({type:Boolean,json:{read:{source:"exportOptions.timeDataCumulative"},write:{target:"exportOptions.timeDataCumulative"}}})],g.prototype,"cumulative",void 0),Object(i.a)([Object(u.b)({type:String,json:{read:{source:"endTimeField"},write:{target:"endTimeField",allowNull:!0}}})],g.prototype,"endField",void 0),Object(i.a)([Object(u.b)({type:s.a,json:{write:{enabled:!0,allowNull:!0}}})],g.prototype,"fullTimeExtent",void 0),Object(i.a)([Object(h.a)("fullTimeExtent",["timeExtent"])],g.prototype,"readFullTimeExtent",null),Object(i.a)([Object(p.a)("fullTimeExtent")],g.prototype,"writeFullTimeExtent",null),Object(i.a)([Object(u.b)({type:Boolean,json:{write:!0}})],g.prototype,"hasLiveData",void 0),Object(i.a)([Object(u.b)({type:o.a,json:{write:{enabled:!0,allowNull:!0}}})],g.prototype,"interval",void 0),Object(i.a)([Object(h.a)("interval",["timeInterval","timeIntervalUnits","defaultTimeInterval","defaultTimeIntervalUnits"])],g.prototype,"readInterval",null),Object(i.a)([Object(p.a)("interval")],g.prototype,"writeInterval",null),Object(i.a)([Object(u.b)({type:String,json:{read:{source:"startTimeField"},write:{target:"startTimeField",allowNull:!0}}})],g.prototype,"startField",void 0),Object(i.a)([Object(u.b)({type:b,json:{write:{enabled:!0,allowNull:!0}}})],g.prototype,"timeReference",void 0),Object(i.a)([Object(u.b)({type:String,json:{write:{enabled:!0,allowNull:!0}}})],g.prototype,"trackIdField",void 0),Object(i.a)([Object(u.b)({type:Boolean,json:{read:{source:"exportOptions.useTime"},write:{target:"exportOptions.useTime"}}})],g.prototype,"useTime",void 0),g=m=Object(i.a)([Object(d.a)("esri.layers.support.TimeInfo")],g);const j=g},261:function(t,e,r){"use strict";r.d(e,"a",(function(){return o})),r.d(e,"b",(function(){return i})),r.d(e,"c",(function(){return s}));var n=r(85);class i{constructor(t=null,e={},r,n){this.geometry=t,this.attributes=e,this.centroid=r,this.objectId=n,this.displayId=0,this.geohashX=0,this.geohashY=0}weakClone(){const t=new i(this.geometry,this.attributes,this.centroid,this.objectId);return t.displayId=this.displayId,t.geohashX=this.geohashX,t.geohashY=this.geohashY,t}}function s(t){return!(Object(n.k)(t.geometry)||!t.geometry.coords||!t.geometry.coords.length)}class o extends i{}},264:function(t,e,r){"use strict";r.d(e,"a",(function(){return p}));var n=r(79),i=r(99),s=r(121),o=r(85),a=r(212),c=r(236),l=r(112),u=r(216),h=r(81),d=r(80);let p=class extends i.a{constructor(){super(...arguments),this.updating=!1,this.handleId=0,this.handles=new s.a,this.scheduleHandleId=0,this.pendingPromises=new Set}destroy(){this.removeAll(),this.handles.destroy()}add(t,e,r,n=0){const i=0!=(1&n),s=++this.handleId;i||this.installSyncUpdatingWatch(t,e,s);const o=0!=(2&n)?Object(l.a)(t,e,r,i):t.watch(e,r,i);return this.handles.add(o,s),{remove:()=>this.handles.remove(s)}}addOnCollectionPropertyChange(t,e,r,n=0){const i=0!=(2&n),s=++this.handleId;return this.handles.add([Object(l.b)(t,e,"after-changes",this.createSyncUpdatingCallback()),Object(l.b)(t,e,"change",r,i?t=>{r({added:t.items,removed:[],moved:[],target:t})}:void 0)],s),{remove:()=>{this.handles.remove(s)}}}addOnCollectionChange(t,e,r=0){const n=0!=(2&r),i=++this.handleId;return this.handles.add([t.on("after-changes",this.createSyncUpdatingCallback()),t.on("change",e)],i),n&&e({added:t.items,removed:[],moved:[],target:t}),{remove:()=>{this.handles.remove(i)}}}addPromise(t){if(Object(o.k)(t))return t;const e=++this.handleId;this.handles.add({remove:()=>{this.pendingPromises.delete(t)&&(0!==this.pendingPromises.size||this.handles.has(f)||this._set("updating",!1))}},e),this.pendingPromises.add(t),this._set("updating",!0);const r=()=>this.handles.remove(e);return t.then(r,r),t}removeAll(){this.pendingPromises.clear(),this.handles.removeAll(),this._set("updating",!1)}installSyncUpdatingWatch(t,e,r){const n=this.createSyncUpdatingCallback(),i=Object(a.b)((()=>Object(u.c)(t,e)),n,{sync:!0,equals:()=>!1});return this.handles.add(i,r),i}createSyncUpdatingCallback(){return()=>{this.handles.remove(f),++this.scheduleHandleId;const t=this.scheduleHandleId;this._get("updating")||this._set("updating",!0),this.handles.add(Object(c.b)((()=>{t===this.scheduleHandleId&&(this._set("updating",this.pendingPromises.size>0),this.handles.remove(f))})),f)}}};Object(n.a)([Object(h.b)({readOnly:!0})],p.prototype,"updating",void 0),p=Object(n.a)([Object(d.a)("esri.views.support.WatchUpdatingTracking")],p);const f=-42},268:function(t,e,r){"use strict";r.d(e,"a",(function(){return n}));const n=new(r(90).a)({esriFieldTypeSmallInteger:"small-integer",esriFieldTypeInteger:"integer",esriFieldTypeSingle:"single",esriFieldTypeDouble:"double",esriFieldTypeLong:"long",esriFieldTypeString:"string",esriFieldTypeDate:"date",esriFieldTypeOID:"oid",esriFieldTypeGeometry:"geometry",esriFieldTypeBlob:"blob",esriFieldTypeRaster:"raster",esriFieldTypeGUID:"guid",esriFieldTypeGlobalID:"global-id",esriFieldTypeXML:"xml"})},269:function(t,e,r){"use strict";r.d(e,"a",(function(){return o}));var n=r(85),i=r(114),s=r(110);function o(t,e,r){if(Object(n.k)(e)||Object(n.k)(r)||r.vcsWkid||Object(s.d)(e,r))return null;const o=Object(i.f)(e)/Object(i.f)(r);if(1===o)return null;switch(t){case"point":case"esriGeometryPoint":return t=>function(t,e){t&&null!=t.z&&(t.z*=e)}(t,o);case"polyline":case"esriGeometryPolyline":return t=>function(t,e){if(t)for(const r of t.paths)for(const t of r)t.length>2&&(t[2]*=e)}(t,o);case"polygon":case"esriGeometryPolygon":return t=>function(t,e){if(t)for(const r of t.rings)for(const t of r)t.length>2&&(t[2]*=e)}(t,o);case"multipoint":case"esriGeometryMultipoint":return t=>function(t,e){if(t)for(const r of t.points)r.length>2&&(r[2]*=e)}(t,o);case"extent":case"esriGeometryExtent":return t=>function(t,e){t&&null!=t.zmin&&null!=t.zmax&&(t.zmin*=e,t.zmax*=e)}(t,o);default:return null}}},278:function(t,e,r){"use strict";r.d(e,"a",(function(){return h}));var n,i=r(79),s=r(89),o=r(81),a=(r(83),r(80)),c=r(200),l=r(163);let u=n=class extends l.a{constructor(t){super(t),this.colorRamps=null,this.type="multipart"}clone(){return new n({colorRamps:Object(s.a)(this.colorRamps)})}};Object(i.a)([Object(o.b)({type:[c.a],json:{write:!0}})],u.prototype,"colorRamps",void 0),Object(i.a)([Object(o.b)({type:["multipart"]})],u.prototype,"type",void 0),u=n=Object(i.a)([Object(a.a)("esri.rest.support.MultipartColorRamp")],u);const h=u},287:function(t,e,r){"use strict";r.d(e,"a",(function(){return s})),r.d(e,"b",(function(){return o})),r.d(e,"c",(function(){return a})),r.d(e,"d",(function(){return c}));var n=r(85),i=r(91);function s(t,e,r){return Object(i.i)(t.map(((t,n)=>e.apply(r,[t,n]))))}function o(t,e,r){return Object(i.i)(t.map(((t,n)=>e.apply(r,[t,n])))).then((t=>t.map((t=>t.value))))}function a(t){return Object(n.k)(t)?Object(i.s)():t.then((t=>({ok:!0,value:t}))).catch((t=>({ok:!1,error:t})))}function c(t){return t.then((t=>({ok:!0,value:t}))).catch((t=>(Object(i.t)(t),{ok:!1,error:t})))}},288:function(t,e,r){"use strict";r.d(e,"a",(function(){return a})),r.d(e,"b",(function(){return o}));var n=r(200),i=r(163),s=r(278);const o={key:"type",base:i.a,typeMap:{algorithmic:n.a,multipart:s.a}};function a(t){return t&&t.type?"algorithmic"===t.type?n.a.fromJSON(t):"multipart"===t.type?s.a.fromJSON(t):null:null}},289:function(t,e,r){"use strict";r.d(e,"a",(function(){return s}));var n=r(85),i=r(269);function s(t,e,r){if(!r||!r.features||!r.hasZ)return;const s=Object(i.a)(r.geometryType,e,t.outSpatialReference);if(!Object(n.k)(s))for(const n of r.features)s(n.geometry)}},296:function(t,e,r){"use strict";r.d(e,"a",(function(){return p}));var n,i=r(79),s=r(90),o=r(86),a=r(89),c=r(81),l=(r(83),r(80)),u=r(92);const h=new s.a({count:"count",sum:"sum",min:"min",max:"max",avg:"avg",stddev:"stddev",var:"var",exceedslimit:"exceedslimit",percentile_cont:"percentile-continuous",percentile_disc:"percentile-discrete"});let d=n=class extends o.a{constructor(t){super(t),this.maxPointCount=void 0,this.maxRecordCount=void 0,this.maxVertexCount=void 0,this.onStatisticField=null,this.outStatisticFieldName=null,this.statisticType=null,this.statisticParameters=null}writeStatisticParameters(t,e){"percentile-continuous"!==this.statisticType&&"percentile-discrete"!==this.statisticType||(e.statisticParameters=Object(a.a)(t))}clone(){return new n({maxPointCount:this.maxPointCount,maxRecordCount:this.maxRecordCount,maxVertexCount:this.maxVertexCount,onStatisticField:this.onStatisticField,outStatisticFieldName:this.outStatisticFieldName,statisticType:this.statisticType,statisticParameters:Object(a.a)(this.statisticParameters)})}};Object(i.a)([Object(c.b)({type:Number,json:{write:!0}})],d.prototype,"maxPointCount",void 0),Object(i.a)([Object(c.b)({type:Number,json:{write:!0}})],d.prototype,"maxRecordCount",void 0),Object(i.a)([Object(c.b)({type:Number,json:{write:!0}})],d.prototype,"maxVertexCount",void 0),Object(i.a)([Object(c.b)({type:String,json:{write:!0}})],d.prototype,"onStatisticField",void 0),Object(i.a)([Object(c.b)({type:String,json:{write:!0}})],d.prototype,"outStatisticFieldName",void 0),Object(i.a)([Object(c.b)({type:String,json:{read:{source:"statisticType",reader:h.read},write:{target:"statisticType",writer:h.write}}})],d.prototype,"statisticType",void 0),Object(i.a)([Object(c.b)({type:Object})],d.prototype,"statisticParameters",void 0),Object(i.a)([Object(u.a)("statisticParameters")],d.prototype,"writeStatisticParameters",null),d=n=Object(i.a)([Object(l.a)("esri.rest.support.StatisticDefinition")],d);const p=d},321:function(t,e,r){"use strict";r.d(e,"a",(function(){return u}));var n,i=r(79),s=r(86),o=r(81),a=(r(84),r(82),r(83)),c=r(95),l=r(80);let u=n=class extends s.a{constructor(t){super(t),this.type="map-layer"}clone(){const{mapLayerId:t,gdbVersion:e}=this;return new n({mapLayerId:t,gdbVersion:e})}};Object(i.a)([Object(c.a)({mapLayer:"map-layer"})],u.prototype,"type",void 0),Object(i.a)([Object(o.b)({type:a.a,json:{write:!0}})],u.prototype,"mapLayerId",void 0),Object(i.a)([Object(o.b)({type:String,json:{write:!0}})],u.prototype,"gdbVersion",void 0),u=n=Object(i.a)([Object(l.a)("esri.layers.support.source.MapLayerSource")],u)},323:function(t,e,r){"use strict";r.d(e,"a",(function(){return p}));var n,i=r(79),s=(r(97),r(90)),o=r(86),a=r(89),c=r(81),l=(r(83),r(80)),u=r(96);const h=new s.a({upperLeft:"upper-left",lowerLeft:"lower-left"});let d=n=class extends o.a{constructor(t){super(t),this.extent=null,this.mode="view",this.originPosition="upper-left",this.tolerance=1}clone(){return new n(Object(a.a)({extent:this.extent,mode:this.mode,originPosition:this.originPosition,tolerance:this.tolerance}))}};Object(i.a)([Object(c.b)({type:u.a,json:{write:{overridePolicy(){return{enabled:"view"===this.mode}}}}})],d.prototype,"extent",void 0),Object(i.a)([Object(c.b)({type:["view","edit"],json:{write:!0}})],d.prototype,"mode",void 0),Object(i.a)([Object(c.b)({type:String,json:{read:h.read,write:h.write}})],d.prototype,"originPosition",void 0),Object(i.a)([Object(c.b)({type:Number,json:{write:{overridePolicy(){return{enabled:"view"===this.mode}}}}})],d.prototype,"tolerance",void 0),d=n=Object(i.a)([Object(l.a)("esri.rest.support.QuantizationParameters")],d);const p=d},334:function(t,e,r){"use strict";r.d(e,"a",(function(){return n}));class n{constructor(){this.objectIdFieldName=null,this.globalIdFieldName=null,this.geohashFieldName=null,this.geometryProperties=null,this.geometryType=null,this.spatialReference=null,this.hasZ=!1,this.hasM=!1,this.features=[],this.fields=[],this.transform=null,this.exceededTransferLimit=!1,this.uniqueIdField=null,this.queryGeometryType=null,this.queryGeometry=null}weakClone(){const t=new n;return t.objectIdFieldName=this.objectIdFieldName,t.globalIdFieldName=this.globalIdFieldName,t.geohashFieldName=this.geohashFieldName,t.geometryProperties=this.geometryProperties,t.geometryType=this.geometryType,t.spatialReference=this.spatialReference,t.hasZ=this.hasZ,t.hasM=this.hasM,t.features=this.features,t.fields=this.fields,t.transform=this.transform,t.exceededTransferLimit=this.exceededTransferLimit,t.uniqueIdField=this.uniqueIdField,t.queryGeometry=this.queryGeometry,t.queryGeometryType=this.queryGeometryType,t}}},385:function(t,e,r){"use strict";r.d(e,"a",(function(){return w}));var n,i=r(79),s=r(90),o=r(86),a=r(85),c=r(114),l=r(81),u=(r(84),r(82),r(83)),h=r(93),d=r(80),p=r(92),f=r(109),b=r(94),m=r(118),y=r(110),g=r(164),j=r(511);const O=new s.a({PNG:"png",PNG8:"png8",PNG24:"png24",PNG32:"png32",JPEG:"jpg",JPG:"jpg",DIB:"dib",TIFF:"tiff",EMF:"emf",PS:"ps",PDF:"pdf",GIF:"gif",SVG:"svg",SVGZ:"svgz",Mixed:"mixed",MIXED:"mixed",LERC:"lerc",LERC2D:"lerc2d",RAW:"raw",pbf:"pbf"});let v=n=class extends o.a{constructor(t){super(t),this.dpi=96,this.format=null,this.origin=null,this.minScale=0,this.maxScale=0,this.size=null,this.spatialReference=null}static create(t={}){const{resolutionFactor:e=1,scales:r,size:i=256,spatialReference:s=b.a.WebMercator,numLODs:o=24}=t;if(!Object(y.l)(s)){const t=[];if(r)for(let e=0;e<r.length;e++){const n=r[e];t.push({level:e,scale:n,resolution:n})}else{let e=5e-4;for(let r=o-1;r>=0;r--)t.unshift({level:r,scale:e,resolution:e}),e*=2}return new n({dpi:96,lods:t,origin:new f.a(0,0,s),size:[i,i],spatialReference:s})}const a=Object(y.e)(s),l=t.origin?new f.a({x:t.origin.x,y:t.origin.y,spatialReference:s}):new f.a(a?{x:a.origin[0],y:a.origin[1],spatialReference:s}:{x:0,y:0,spatialReference:s}),u=1/(39.37*Object(c.e)(s)*96),h=[];if(r)for(let n=0;n<r.length;n++){const t=r[n],e=t*u;h.push({level:n,scale:t,resolution:e})}else{let t=Object(y.h)(s)?512/i*591657527.5917094:256/i*591657527.591555;const r=Math.ceil(o/e);h.push({level:0,scale:t,resolution:t*u});for(let n=1;n<r;n++){const r=t/2**e,i=r*u;h.push({level:n,scale:r,resolution:i}),t=r}}return new n({dpi:96,lods:h,origin:l,size:[i,i],spatialReference:s})}get isWrappable(){const{spatialReference:t,origin:e}=this;if(t&&e){const r=Object(y.e)(t);return t.isWrappable&&Math.abs(r.origin[0]-e.x)<=r.dx}return!1}readOrigin(t,e){return f.a.fromJSON({spatialReference:e.spatialReference,...t})}set lods(t){let e=0,r=0;const n=[];this._levelToLOD={},t&&(e=-1/0,r=1/0,t.forEach((t=>{n.push(t.scale),e=t.scale>e?t.scale:e,r=t.scale<r?t.scale:r,this._levelToLOD[t.level]=t}))),this._set("scales",n),this._set("minScale",e),this._set("maxScale",r),this._set("lods",t),this._initializeUpsampleLevels()}readSize(t,e){return[e.cols,e.rows]}writeSize(t,e){e.cols=t[0],e.rows=t[1]}zoomToScale(t){const e=this.scales;if(t<=0)return e[0];if(t>=e.length-1)return e[e.length-1];{const r=Math.floor(t),n=r+1;return e[r]/(e[r]/e[n])**(t-r)}}scaleToZoom(t){const e=this.scales,r=e.length-1;let n=0;for(;n<r;n++){const r=e[n],i=e[n+1];if(r<=t)return n;if(i===t)return n+1;if(r>t&&i<t)return n+Math.log(r/t)/Math.log(r/i)}return n}snapScale(t,e=.95){const r=this.scaleToZoom(t);return r%Math.floor(r)>=e?this.zoomToScale(Math.ceil(r)):this.zoomToScale(Math.floor(r))}tileAt(t,e,r,n){const i=this.lodAt(t);if(!i)return null;let s,o;if("number"==typeof e)s=e,o=r;else if(Object(y.d)(e.spatialReference,this.spatialReference))s=e.x,o=e.y,n=r;else{const t=Object(g.d)(e,this.spatialReference);if(Object(a.k)(t))return null;s=t.x,o=t.y,n=r}const c=i.resolution*this.size[0],l=i.resolution*this.size[1];return n||(n={id:null,level:0,row:0,col:0,extent:Object(m.l)()}),n.level=t,n.row=Math.floor((this.origin.y-o)/l+.001),n.col=Math.floor((s-this.origin.x)/c+.001),this.updateTileInfo(n),n}updateTileInfo(t,e=0){let r=this.lodAt(t.level);if(!r&&1===e){const e=this.lods[this.lods.length-1];e.level<t.level&&(r=e)}if(!r)return;const n=t.level-r.level,i=r.resolution*this.size[0]/2**n,s=r.resolution*this.size[1]/2**n;t.id=`${t.level}/${t.row}/${t.col}`,t.extent||(t.extent=Object(m.l)()),t.extent[0]=this.origin.x+t.col*i,t.extent[1]=this.origin.y-(t.row+1)*s,t.extent[2]=t.extent[0]+i,t.extent[3]=t.extent[1]+s}upsampleTile(t){const e=this._upsampleLevels[t.level];return!(!e||-1===e.parentLevel)&&(t.level=e.parentLevel,t.row=Math.floor(t.row/e.factor+.001),t.col=Math.floor(t.col/e.factor+.001),this.updateTileInfo(t),!0)}getTileBounds(t,e){const{resolution:r}=this.lodAt(e.level),n=r*this.size[0],i=r*this.size[1];return t[0]=this.origin.x+e.col*n,t[1]=this.origin.y-(e.row+1)*i,t[2]=t[0]+n,t[3]=t[1]+i,t}lodAt(t){return this._levelToLOD&&this._levelToLOD[t]||null}clone(){return n.fromJSON(this.write({}))}_initializeUpsampleLevels(){const t=this.lods;this._upsampleLevels=[];let e=null;for(let r=0;r<t.length;r++){const n=t[r];this._upsampleLevels[n.level]={parentLevel:e?e.level:-1,factor:e?e.resolution/n.resolution:0},e=n}}};Object(i.a)([Object(l.b)({type:Number,json:{write:!0}})],v.prototype,"compressionQuality",void 0),Object(i.a)([Object(l.b)({type:Number,json:{write:!0}})],v.prototype,"dpi",void 0),Object(i.a)([Object(l.b)({type:String,json:{read:O.read,write:O.write,origins:{"web-scene":{read:!1,write:!1}}}})],v.prototype,"format",void 0),Object(i.a)([Object(l.b)({readOnly:!0})],v.prototype,"isWrappable",null),Object(i.a)([Object(l.b)({type:f.a,json:{write:!0}})],v.prototype,"origin",void 0),Object(i.a)([Object(h.a)("origin")],v.prototype,"readOrigin",null),Object(i.a)([Object(l.b)({type:[j.a],value:null,json:{write:!0}})],v.prototype,"lods",null),Object(i.a)([Object(l.b)({readOnly:!0})],v.prototype,"minScale",void 0),Object(i.a)([Object(l.b)({readOnly:!0})],v.prototype,"maxScale",void 0),Object(i.a)([Object(l.b)({readOnly:!0})],v.prototype,"scales",void 0),Object(i.a)([Object(l.b)({cast:t=>Array.isArray(t)?t:"number"==typeof t?[t,t]:[256,256]})],v.prototype,"size",void 0),Object(i.a)([Object(h.a)("size",["rows","cols"])],v.prototype,"readSize",null),Object(i.a)([Object(p.a)("size",{cols:{type:u.a},rows:{type:u.a}})],v.prototype,"writeSize",null),Object(i.a)([Object(l.b)({type:b.a,json:{write:!0}})],v.prototype,"spatialReference",void 0),v=n=Object(i.a)([Object(d.a)("esri.layers.support.TileInfo")],v);const w=v},435:function(t,e,r){"use strict";r.d(e,"a",(function(){return s})),r.d(e,"b",(function(){return c})),r.d(e,"c",(function(){return l})),r.d(e,"d",(function(){return i}));var n=r(138);const i=Math.PI/180,s=/SPHEROID\[([^\]]+)]/i,o=n.a.radius,a=n.a.eccentricitySquared,c={a1:o*a,a2:o*a*o*a,a3:o*a*a/2,a4:o*a*o*a*2.5,a5:o*a+o*a*a/2,a6:1-a},l={4267:{a:6378206.4,f:1/294.9786982},4269:{a:6378137,f:1/298.257222101},4326:{a:n.a.radius,f:n.a.flattening},104900:{a:2439700,f:0},104901:{a:6051e3,f:0},104902:{a:6051800,f:0},104903:{a:n.c.radius,f:n.c.flattening},104904:{a:3393400,f:1/192.0430107526882},104905:{a:n.b.radius,f:n.b.flattening},104906:{a:6200,f:0},104907:{a:11100,f:0},104908:{a:71492e3,f:.06487439154031222},104909:{a:8200,f:0},104910:{a:83500,f:0},104911:{a:1e4,f:0},104912:{a:2409300,f:0},104913:{a:15e3,f:0},104914:{a:4e4,f:0},104915:{a:1562090,f:0},104916:{a:2632345,f:0},104917:{a:85e3,f:0},104918:{a:1821460,f:0},104919:{a:5e3,f:0},104920:{a:12e3,f:0},104921:{a:3e4,f:3},104922:{a:18e3,f:0},104923:{a:14e3,f:0},104924:{a:49300,f:0},104925:{a:60268e3,f:1/10.2079945799458},104926:{a:16e3,f:0},104927:{a:9500,f:0},104928:{a:56e4,f:0},104929:{a:249400,f:0},104930:{a:59500,f:0},104931:{a:16e3,f:0},104932:{a:133e3,f:0},104933:{a:718e3,f:0},104934:{a:888e3,f:0},104935:{a:1986300,f:0},104936:{a:1e4,f:0},104937:{a:41900,f:0},104938:{a:11e4,f:0},104939:{a:50100,f:0},104940:{a:764e3,f:0},104941:{a:11e3,f:0},104942:{a:529800,f:0},104943:{a:2575e3,f:0},104944:{a:25559e3,f:1/43.61604095563141},104945:{a:578900,f:0},104946:{a:33e3,f:0},104947:{a:21e3,f:0},104948:{a:13e3,f:0},104949:{a:31e3,f:0},104950:{a:27e3,f:0},104951:{a:42e3,f:0},104952:{a:235800,f:0},104953:{a:761400,f:0},104954:{a:15e3,f:0},104955:{a:54e3,f:0},104956:{a:77e3,f:0},104957:{a:27e3,f:0},104958:{a:788900,f:0},104959:{a:584700,f:0},104960:{a:24764e3,f:.01708124697141011},104961:{a:74e3,f:0},104962:{a:79e3,f:0},104963:{a:104e3,f:.14423076923076922},104964:{a:29e3,f:0},104965:{a:17e4,f:0},104966:{a:208e3,f:0},104967:{a:4e4,f:0},104968:{a:1352600,f:0},104969:{a:1195e3,f:0},104970:{a:593e3,f:0},104971:{a:n.b.radius,f:0},104972:{a:47e4,f:0},104973:{a:255e3,f:0},104974:{a:2439400,f:0}}},473:function(t,e,r){"use strict";r.d(e,"a",(function(){return i}));var n=r(239);class i{constructor(t,e){this._storage=new n.c,this._storage.maxSize=t,e&&this._storage.registerRemoveFunc("",e)}put(t,e){this._storage.put(t,e,1,1)}pop(t){return this._storage.pop(t)}get(t){return this._storage.get(t)}clear(){this._storage.clearAll()}destroy(){this._storage.destroy()}}},511:function(t,e,r){"use strict";r.d(e,"a",(function(){return u}));var n,i=r(79),s=r(86),o=r(81),a=(r(84),r(82),r(83)),c=r(80);let l=n=class extends s.a{constructor(t){super(t),this.cols=null,this.level=0,this.levelValue=null,this.origin=null,this.resolution=0,this.rows=null,this.scale=0}clone(){return new n({cols:this.cols,level:this.level,levelValue:this.levelValue,resolution:this.resolution,rows:this.rows,scale:this.scale})}};Object(i.a)([Object(o.b)({json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],l.prototype,"cols",void 0),Object(i.a)([Object(o.b)({type:a.a,json:{write:!0}})],l.prototype,"level",void 0),Object(i.a)([Object(o.b)({type:String,json:{write:!0}})],l.prototype,"levelValue",void 0),Object(i.a)([Object(o.b)({json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],l.prototype,"origin",void 0),Object(i.a)([Object(o.b)({type:Number,json:{write:!0}})],l.prototype,"resolution",void 0),Object(i.a)([Object(o.b)({json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],l.prototype,"rows",void 0),Object(i.a)([Object(o.b)({type:Number,json:{write:!0}})],l.prototype,"scale",void 0),l=n=Object(i.a)([Object(c.a)("esri.layers.support.LOD")],l);const u=l},534:function(t,e,r){"use strict";r.r(e),r.d(e,"FeatureServiceSnappingSourceWorker",(function(){return Z})),r.d(e,"default",(function(){return J}));var n=r(79),i=r(129),s=r(121),o=r(85),a=r(91),c=r(112),l=r(81),u=r(84),h=(r(82),r(83),r(80)),d=r(94),p=r(768),f=r(870),b=r(385),m=r(254),y=r(135),g=r(99);let j=class extends g.a{constructor(){super(...arguments),this.updating=!1,this.pending=[]}push(t,e){this.pending.push({promise:t,callback:e}),1===this.pending.length&&this.process()}process(){if(!this.pending.length)return void(this.updating=!1);this.updating=!0;const t=this.pending[0];t.promise.then((e=>t.callback(e))).catch((()=>{})).then((()=>{this.pending.shift(),this.process()}))}};Object(n.a)([Object(l.b)()],j.prototype,"updating",void 0),j=Object(n.a)([Object(h.a)("esri.core.AsyncSequence")],j);var O=r(131),v=r(162),w=r(87),x=r(96),S=r(118),M=r(180),_=r(445),T=r(238),F=r(287);class I{constructor(t,e){this.data=t,this.resolution=e,this.state={type:0},this.alive=!0}process(t){switch(this.state.type){case 0:return this.state=this.gotoFetchCount(this.state,t),this.state.task.promise.then(t.resume,t.resume);case 1:case 3:break;case 2:return this.state=this.gotoFetchFeatures(this.state,t),this.state.task.promise.then(t.resume,t.resume);case 4:this.state=this.goToDone(this.state,t)}return null}get debugInfo(){return{data:this.data,featureCount:this.featureCount,state:this.stateToString}}get featureCount(){switch(this.state.type){case 0:case 1:return 0;case 2:return this.state.featureCount;case 3:return this.state.previous.featureCount;case 4:return this.state.features.length;case 5:return this.state.previous.features.length}}get stateToString(){switch(this.state.type){case 0:return"created";case 1:return"fetch-count";case 2:return"fetched-count";case 3:return"fetch-features";case 4:return"fetched-features";case 5:return"done"}}gotoFetchCount(t,e){return{type:1,previous:t,task:Object(a.g)((async t=>{const r=await Object(F.d)(e.fetchCount(this,t));1===this.state.type&&(this.state=this.gotoFetchedCount(this.state,r.ok?r.value:1/0))}))}}gotoFetchedCount(t,e){return{type:2,featureCount:e,previous:t}}gotoFetchFeatures(t,e){return{type:3,previous:t,task:Object(a.g)((async r=>{const n=await Object(F.d)(e.fetchFeatures(this,t.featureCount,r));3===this.state.type&&(this.state=this.gotoFetchedFeatures(this.state,n.ok?n.value:[]))}))}}gotoFetchedFeatures(t,e){return{type:4,previous:t,features:e}}goToDone(t,e){return e.finish(this,t.features),{type:5,previous:t}}reset(){const t=this.state;switch(this.state={type:0},t.type){case 0:case 2:case 4:case 5:break;case 1:case 3:t.task.abort()}}intersects(t){return!(!Object(o.k)(t)&&this.data.extent)||(Object(S.q)(t,R),Object(S.t)(this.data.extent,R))}}const R=Object(S.l)(),C=w.a.getLogger("esri.views.interactive.snapping.featureSources.featureServiceSource.FeatureServiceTiledFetcher");let P=class extends O.a{constructor(t){super(t),this.tilesOfInterest=[],this.availability=0,this.pendingTiles=new Map,this.pendingEdits=new j,this.pendingEditsAbortController=new AbortController}get minimumVerticesPerFeature(){var t;switch(null==(t=this.store)?void 0:t.featureStore.geometryType){case"esriGeometryPoint":case"esriGeometryMultipoint":return 1;case"esriGeometryPolygon":return 4;case"esriGeometryPolyline":return 2}}set filter(t){const e=this._get("filter"),r=this.filterProperties(t);JSON.stringify(e)!==JSON.stringify(r)&&this._set("filter",r)}set customParameters(t){const e=this._get("customParameters");JSON.stringify(e)!==JSON.stringify(t)&&this._set("customParameters",t)}get configuration(){return{filter:this.filter,customParameters:this.customParameters,tileInfo:this.tileInfo,tileSize:this.tileSize}}set tileInfo(t){const e=this._get("tileInfo");e!==t&&(Object(o.l)(t)&&Object(o.l)(e)&&JSON.stringify(t)===JSON.stringify(e)||(this._set("tileInfo",t),this.store.tileInfo=t))}set tileSize(t){this._get("tileSize")!==t&&this._set("tileSize",t)}get updating(){return this.updatingHandles.updating||this.pendingEdits.updating}initialize(){this.initializeFetchExtent(),this.updatingHandles.add(this,"configuration",(()=>this.refresh())),this.updatingHandles.add(this,"tilesOfInterest",((t,e)=>{Object(u.c)(t,e,(({id:t},{id:e})=>t===e))||this.process()}),1)}destroy(){this.pendingTiles.forEach((t=>this.deletePendingTile(t))),this.pendingTiles.clear(),this.store.destroy(),this.tilesOfInterest.length=0,this.pendingEditsAbortController.abort(),this.pendingEditsAbortController=null}refresh(){this.store.refresh(),this.pendingTiles.forEach((t=>this.deletePendingTile(t))),this.process()}applyEdits(t){this.pendingEdits.push(t,(async t=>{if(0===t.addedFeatures.length&&0===t.updatedFeatures.length&&0===t.deletedFeatures.length)return;for(const[,r]of this.pendingTiles)r.reset();const e={...t,deletedFeatures:t.deletedFeatures.map((({objectId:t,globalId:e})=>t&&-1!==t?t:this.lookupObjectIdByGlobalId(e)))};await this.updatingHandles.addPromise(this.store.processEdits(e,((t,e)=>this.queryFeaturesById(t,e)),this.pendingEditsAbortController.signal)),this.processPendingTiles()}))}initializeFetchExtent(){if(!this.capabilities.query.supportsExtent)return;const t=Object(a.g)((async t=>{try{var e;const r=await Object(T.executeQueryForExtent)(this.url,new y.a({where:"1=1",outSpatialReference:this.spatialReference,cacheHint:!!this.capabilities.query.supportsCacheHint||void 0}),{query:this.configuration.customParameters,signal:t});this.store.extent=x.a.fromJSON(null==(e=r.data)?void 0:e.extent)}catch(r){Object(a.t)(r),C.warn("Failed to fetch data extent",r)}}));this.updatingHandles.addPromise(t.promise.then((()=>this.process()))),this.handles.add(Object(v.c)((()=>t.abort())))}get debugInfo(){return{numberOfFeatures:this.store.featureStore.numFeatures,tilesOfInterest:this.tilesOfInterest,pendingTiles:Array.from(this.pendingTiles.values()).map((t=>t.debugInfo)),storedTiles:this.store.debugInfo}}process(){this.markTilesNotAlive(),this.createPendingTiles(),this.deletePendingTiles(),this.processPendingTiles()}markTilesNotAlive(){for(const[,t]of this.pendingTiles)t.alive=!1}createPendingTiles(){const t=this.collectMissingTilesInfo();if(this.setAvailability(Object(o.k)(t)?1:t.coveredArea/t.fullArea),!Object(o.k)(t))for(const{data:e,resolution:r}of t.missingTiles){const t=this.pendingTiles.get(e.id);t?(t.resolution=r,t.alive=!0):this.createPendingTile(e,r)}}collectMissingTilesInfo(){let t=null;for(let e=this.tilesOfInterest.length-1;e>=0;e--){const r=this.tilesOfInterest[e],n=this.store.process(r,((t,e)=>this.verifyTileComplexity(t,e)));Object(o.k)(t)?t=n:t.prepend(n)}return t}deletePendingTiles(){for(const[,t]of this.pendingTiles)t.alive||this.deletePendingTile(t)}processPendingTiles(){const t={fetchCount:(t,e)=>this.fetchCount(t,e),fetchFeatures:(t,e,r)=>this.fetchFeatures(t,e,r),finish:(t,e)=>this.finishPendingTile(t,e),resume:()=>this.processPendingTiles()};if(this.ensureFetchAllCounts(t))for(const[,e]of this.pendingTiles)this.verifyTileComplexity(this.store.getFeatureCount(e.data),e.resolution)&&this.updatingHandles.addPromise(e.process(t))}verifyTileComplexity(t,e){return this.verifyVertexComplexity(t)&&this.verifyFeatureDensity(t,e)}verifyVertexComplexity(t){return t*this.minimumVerticesPerFeature<k}verifyFeatureDensity(t,e){if(Object(o.k)(this.tileInfo))return!1;const r=this.tileSize*e;return t*(N/(r*r))<E}ensureFetchAllCounts(t){let e=!0;for(const[,r]of this.pendingTiles)r.state.type<2&&this.updatingHandles.addPromise(r.process(t)),r.state.type<=1&&(e=!1);return e}finishPendingTile(t,e){this.store.add(t.data,e),this.deletePendingTile(t),this.updateAvailability()}updateAvailability(){const t=this.collectMissingTilesInfo();this.setAvailability(Object(o.k)(t)?1:t.coveredArea/t.fullArea)}setAvailability(t){this._set("availability",t)}createPendingTile(t,e){const r=new I(t,e);return this.pendingTiles.set(t.id,r),r}deletePendingTile(t){t.reset(),this.pendingTiles.delete(t.data.id)}async fetchCount(t,e){return this.store.fetchCount(t.data,this.url,this.createCountQuery(t),{query:this.customParameters,timeout:z,signal:e})}async fetchFeatures(t,e,r){let n,i=0,s=0,a=e;for(;;){const c=this.createFeaturesQuery(t),l=this.setPagingParameters(c,i,a),{features:u,exceededTransferLimit:h}=await this.queryFeatures(c,r);if(l&&(i+=Object(o.t)(c.num)),s+=u.length,n=n?n.concat(u):u,a=e-s,!l||!h||a<=0)return n}}filterProperties(t){return Object(o.k)(t)?{where:"1=1",gdbVersion:void 0,timeExtent:void 0}:{where:t.where||"1=1",timeExtent:t.timeExtent,gdbVersion:t.gdbVersion}}lookupObjectIdByGlobalId(t){const e=this.globalIdField,r=this.objectIdField;if(Object(o.k)(e))throw new Error("Expected globalIdField to be defined");let n=null;if(this.store.featureStore.forEach((i=>{var s;t===i.attributes[e]&&(n=null!=(s=i.objectId)?s:i.attributes[r])})),Object(o.k)(n))throw new Error(`Expected to find a feature with globalId ${t}`);return n}queryFeaturesById(t,e){const r=this.createFeaturesQuery(null);return r.objectIds=t,this.queryFeatures(r,e)}queryFeatures(t,e){return this.capabilities.query.supportsFormatPBF?this.queryFeaturesPBF(t,e):this.queryFeaturesJSON(t,e)}async queryFeaturesPBF(t,e){const{sourceSpatialReference:r}=this,{data:n}=await Object(T.executeQueryPBF)(this.url,t,new _.b({sourceSpatialReference:r}),{query:this.configuration.customParameters,timeout:z,signal:e});return Object(M.y)(n)}async queryFeaturesJSON(t,e){const{sourceSpatialReference:r}=this,{data:n}=await Object(T.executeQuery)(this.url,t,r,{query:this.configuration.customParameters,timeout:z,signal:e});return Object(M.b)(n,this.objectIdField)}createCountQuery(t){const e=this.createBaseQuery(t);return this.capabilities.query.supportsCacheHint&&(e.cacheHint=!0),e}createFeaturesQuery(t){const e=this.createBaseQuery(t);return e.outFields=this.globalIdField?[this.globalIdField,this.objectIdField]:[this.objectIdField],e.returnGeometry=!0,Object(o.l)(t)&&(this.capabilities.query.supportsResultType?e.resultType="tile":this.capabilities.query.supportsCacheHint&&(e.cacheHint=!0)),e}createBaseQuery(t){const e=new y.a({returnZ:!1,returnM:!1,geometry:Object(o.l)(this.tileInfo)&&Object(o.l)(t)?Object(S.v)(t.data.extent,this.tileInfo.spatialReference):void 0}),r=this.configuration.filter;return Object(o.l)(r)&&(e.where=r.where,e.gdbVersion=r.gdbVersion,e.timeExtent=r.timeExtent),e.outSpatialReference=this.spatialReference,e}setPagingParameters(t,e,r){if(!this.capabilities.query.supportsPagination)return!1;const{supportsMaxRecordCountFactor:n,supportsCacheHint:i,tileMaxRecordCount:s,maxRecordCount:o,supportsResultType:a}=this.capabilities.query,c=n?y.a.MAX_MAX_RECORD_COUNT_FACTOR:1,l=c*((a||i)&&s?s:o||B);return t.start=e,n?(t.maxRecordCountFactor=Math.min(c,Math.ceil(r/l)),t.num=Math.min(r,t.maxRecordCountFactor*l)):t.num=Math.min(r,l),!0}};Object(n.a)([Object(l.b)({constructOnly:!0})],P.prototype,"url",void 0),Object(n.a)([Object(l.b)({constructOnly:!0})],P.prototype,"objectIdField",void 0),Object(n.a)([Object(l.b)({constructOnly:!0})],P.prototype,"globalIdField",void 0),Object(n.a)([Object(l.b)({constructOnly:!0})],P.prototype,"capabilities",void 0),Object(n.a)([Object(l.b)({constructOnly:!0})],P.prototype,"sourceSpatialReference",void 0),Object(n.a)([Object(l.b)({constructOnly:!0})],P.prototype,"spatialReference",void 0),Object(n.a)([Object(l.b)({constructOnly:!0})],P.prototype,"store",void 0),Object(n.a)([Object(l.b)({readOnly:!0})],P.prototype,"minimumVerticesPerFeature",null),Object(n.a)([Object(l.b)()],P.prototype,"filter",null),Object(n.a)([Object(l.b)()],P.prototype,"customParameters",null),Object(n.a)([Object(l.b)({readOnly:!0})],P.prototype,"configuration",null),Object(n.a)([Object(l.b)()],P.prototype,"tileInfo",null),Object(n.a)([Object(l.b)()],P.prototype,"tileSize",null),Object(n.a)([Object(l.b)()],P.prototype,"tilesOfInterest",void 0),Object(n.a)([Object(l.b)({readOnly:!0})],P.prototype,"updating",null),Object(n.a)([Object(l.b)({readOnly:!0})],P.prototype,"availability",void 0),P=Object(n.a)([Object(h.a)("esri.views.interactive.snapping.featureSources.featureServiceSource.FeatureServiceTiledFetcher")],P);const B=2e3,z=6e5,k=1e6,N=25,E=1;var D=r(598),A=r(800);class q{constructor(){this._store=new Map,this._byteSize=0}set(t,e){this.delete(t),this._store.set(t,e),this._byteSize+=e.byteSize}delete(t){const e=this._store.get(t);return!!this._store.delete(t)&&(this._byteSize-=e.byteSize,!0)}get(t){return this.used(t),this._store.get(t)}has(t){return this.used(t),this._store.has(t)}clear(){this._store.clear()}applyByteSizeLimit(t,e){for(const[r,n]of this._store){if(this._byteSize<=t)break;this.delete(r),e(n)}}values(){return this._store.values()}[Symbol.iterator](){return this._store[Symbol.iterator]()}used(t){const e=this._store.get(t);e&&(this._store.delete(t),this._store.set(t,e))}}let V=class extends g.a{constructor(t){super(t),this.tileInfo=null,this.extent=null,this.maximumByteSize=10485760,this.tileBounds=new A.a,this.tiles=new q,this.refCounts=new Map,this.tileFeatureCounts=new Map,this.tmpBoundingRect=Object(S.l)()}add(t,e){const r=[];for(const n of e)0===this.referenceFeature(n.objectId)&&r.push(n);this.addTileStorage(t,new Set(e.map((({objectId:t})=>t))),function(t){return t.reduce(((t,e)=>t+function(t){return 32+function(t){if(Object(o.k)(t))return 0;const e=Object(D.b)(t.lengths,4);return 32+Object(D.b)(t.coords,8)+e}(t.geometry)+Object(D.a)(t.attributes)}(e)),0)}(e)),this.featureStore.addMany(r),this.tiles.applyByteSizeLimit(this.maximumByteSize,(t=>this.removeTileStorage(t)))}destroy(){this.clear(),this.tileFeatureCounts.clear()}clear(){this.featureStore.clear(),this.tileBounds.clear(),this.tiles.clear(),this.refCounts.clear()}refresh(){this.clear(),this.tileFeatureCounts.clear()}processEdits(t,e,r){return this.processEditsDelete(t.deletedFeatures.concat(t.updatedFeatures)),this.processEditsRefetch(t.addedFeatures.concat(t.updatedFeatures),e,r)}addTileStorage(t,e,r){this.tiles.set(t.id,new L(t,e,r)),this.tileBounds.set(t.id,t.extent),this.tileFeatureCounts.set(t.id,e.size)}remove({id:t}){const e=this.tiles.get(t);e&&this.removeTileStorage(e)}removeTileStorage(t){const e=[];for(const n of t.objectIds)1===this.unreferenceFeature(n)&&e.push(n);this.featureStore.removeManyById(e);const r=t.data.id;this.tiles.delete(r),this.tileBounds.delete(r)}processEditsDelete(t){this.featureStore.removeManyById(t);for(const[,e]of this.tiles){for(const r of t)e.objectIds.delete(r);this.tileFeatureCounts.set(e.data.id,e.objectIds.size)}for(const e of t)this.refCounts.delete(e)}async processEditsRefetch(t,e,r){const n=(await e(t,r)).features,{hasZ:i,hasM:s}=this.featureStore;for(const a of n){const t=Object(M.r)(this.tmpBoundingRect,a.geometry,i,s);Object(o.k)(t)||this.tileBounds.forEachInBounds(t,(t=>{const e=this.tiles.get(t);this.featureStore.add(a),e.objectIds.has(a.objectId)||(e.objectIds.add(a.objectId),this.referenceFeature(a.objectId),this.tileFeatureCounts.set(e.data.id,e.objectIds.size))}))}}process(t,e=(()=>!0)){if(Object(o.k)(this.tileInfo)||!t.extent||Object(o.l)(this.extent)&&!Object(S.t)(Object(S.q)(this.extent,this.tmpBoundingRect),t.extent))return new G(t);if(this.tiles.has(t.id))return new G(t);const r=this.createTileTree(t,this.tileInfo);return this.simplify(r,e,null,0,1),this.collectMissingTiles(t,r,this.tileInfo)}get debugInfo(){return Array.from(this.tiles.values()).map((({data:t})=>({data:t,featureCount:this.tileFeatureCounts.get(t.id)||0})))}getFeatureCount(t){const e=this.tileFeatureCounts.get(t.id);return null!=e?e:0}async fetchCount(t,e,r,n){const i=this.tileFeatureCounts.get(t.id);if(null!=i)return i;const s=await Object(T.executeQueryForCount)(e,r,n);return this.tileFeatureCounts.set(t.id,s.data.count),s.data.count}createTileTree(t,e){const r=new Y(t.level,t.row,t.col);return e.updateTileInfo(r,1),this.tileBounds.forEachInBounds(t.extent,(n=>{const i=this.tiles.get(n).data;this.tilesAreRelated(t,i)&&this.populateChildren(r,i,e,this.tileFeatureCounts.get(i.id)||0)})),r}tilesAreRelated(t,e){if(!t||!e)return!1;if(t.level===e.level)return t.row===e.row&&t.col===e.col;const r=t.level<e.level,n=r?t:e,i=r?e:t,s=1<<i.level-n.level;return Math.floor(i.row/s)===n.row&&Math.floor(i.col/s)===n.col}populateChildren(t,e,r,n){const i=e.level-t.level-1;if(i<0)return void(t.isLeaf=!0);const s=e.row>>i,a=e.col>>i,c=t.row<<1,l=a-(t.col<<1)+(s-c<<1),u=t.children[l];if(Object(o.l)(u))this.populateChildren(u,e,r,n);else{const i=new Y(t.level+1,s,a);r.updateTileInfo(i,1),t.children[l]=i,this.populateChildren(i,e,r,n)}}simplify(t,e,r,n,i){const s=i*i;if(t.isLeaf)return e(this.getFeatureCount(t),i)?0:(this.remove(t),Object(o.l)(r)&&(r.children[n]=null),s);const a=i/2,c=a*a;let l=0;for(let u=0;u<t.children.length;u++){const r=t.children[u];l+=Object(o.l)(r)?this.simplify(r,e,t,u,a):c}return 0===l?this.mergeChildren(t):1-l/s<U&&(this.purge(t),Object(o.l)(r)&&(r.children[n]=null),l=s),l}mergeChildren(t){const e=new Set;let r=0;this.forEachLeaf(t,(t=>{const n=this.tiles.get(t.id);if(n){r+=n.byteSize;for(const t of n.objectIds)e.has(t)||(e.add(t),this.referenceFeature(t));this.remove(t)}})),this.addTileStorage(t,e,r),t.isLeaf=!0,t.children[0]=t.children[1]=t.children[2]=t.children[3]=null,this.tileFeatureCounts.set(t.id,e.size)}forEachLeaf(t,e){for(const r of t.children)Object(o.k)(r)||(r.isLeaf?e(r):this.forEachLeaf(r,e))}purge(t){if(!Object(o.k)(t))if(t.isLeaf)this.remove(t);else for(let e=0;e<t.children.length;e++){const r=t.children[e];this.purge(r),t.children[e]=null}}collectMissingTiles(t,e,r){const n=new X(r,t,this.extent);return this.collectMissingTilesRecurse(e,n,1),n.info}collectMissingTilesRecurse(t,e,r){if(t.isLeaf)return;if(!t.hasChildren)return void e.addMissing(t.level,t.row,t.col,r);const n=r/2;for(let i=0;i<t.children.length;i++){const r=t.children[i];Object(o.k)(r)?e.addMissing(t.level+1,(t.row<<1)+((2&i)>>1),(t.col<<1)+(1&i),n):this.collectMissingTilesRecurse(r,e,n)}}referenceFeature(t){const e=(this.refCounts.get(t)||0)+1;return this.refCounts.set(t,e),1===e?0:2}unreferenceFeature(t){const e=(this.refCounts.get(t)||0)-1;return 0===e?(this.refCounts.delete(t),1):(e>0&&this.refCounts.set(t,e),2)}get test(){return{tiles:Array.from(this.tiles.values()).map((t=>`${t.data.id}:[${Array.from(t.objectIds)}]`)),featureReferences:Array.from(this.refCounts.keys()).map((t=>`${t}:${this.refCounts.get(t)}`))}}};Object(n.a)([Object(l.b)({constructOnly:!0})],V.prototype,"featureStore",void 0),Object(n.a)([Object(l.b)()],V.prototype,"tileInfo",void 0),Object(n.a)([Object(l.b)()],V.prototype,"extent",void 0),Object(n.a)([Object(l.b)()],V.prototype,"maximumByteSize",void 0),V=Object(n.a)([Object(h.a)("esri.views.interactive.snapping.featureSources.featureServiceSource.FeatureServiceTileStore")],V);class L{constructor(t,e,r){this.data=t,this.objectIds=e,this.byteSize=r}}class Y{constructor(t,e,r){this.level=t,this.row=e,this.col=r,this.isLeaf=!1,this.extent=null,this.children=[null,null,null,null]}get hasChildren(){return!this.isLeaf&&(Object(o.l)(this.children[0])||Object(o.l)(this.children[1])||Object(o.l)(this.children[2])||Object(o.l)(this.children[3]))}}class G{constructor(t,e=[]){this.missingTiles=e,this.fullArea=0,this.coveredArea=0,this.fullArea=Object(S.c)(t.extent),this.coveredArea=this.fullArea}prepend(t){this.missingTiles=t.missingTiles.concat(this.missingTiles),this.coveredArea+=t.coveredArea,this.fullArea+=t.fullArea}}class X{constructor(t,e,r){this.tileInfo=t,this.extent=null,this.info=new G(e),Object(o.l)(r)&&(this.extent=Object(S.q)(r))}addMissing(t,e,r,n){const i={id:null,level:t,row:e,col:r};this.tileInfo.updateTileInfo(i,1),!Object(o.l)(i.extent)||Object(o.l)(this.extent)&&!Object(S.t)(this.extent,i.extent)||(this.info.missingTiles.push({data:i,resolution:n}),this.info.coveredArea-=Object(S.c)(i.extent))}}const U=.18751;var H=r(264);let Z=class extends i.a.EventedAccessor{constructor(){super(...arguments),this.isInitializing=!0,this.whenSetup=Object(a.e)(),this.handles=new s.a,this.updatingHandles=new H.a,this.pendingApplyEdits=new Map}get updating(){return this.featureFetcher.updating||this.isInitializing||this.updatingHandles.updating}destroy(){this.featureFetcher.destroy(),this.queryEngine.destroy(),this.featureStore.clear(),this.handles.destroy()}async setup(t){const{geometryType:e,objectIdField:r,timeInfo:n,fields:i}=t.serviceInfo;return this.featureStore=new p.a({...t.serviceInfo,hasZ:!1,hasM:!1}),this.queryEngine=new f.a({spatialReference:t.spatialReference,featureStore:this.featureStore,geometryType:e,fields:i,hasZ:!1,hasM:!1,objectIdField:r,timeInfo:n?m.a.fromJSON(n):null}),this.featureFetcher=new P({store:new V({featureStore:this.featureStore}),url:t.serviceInfo.url,objectIdField:t.serviceInfo.objectIdField,globalIdField:t.serviceInfo.globalIdField,capabilities:t.serviceInfo.capabilities,spatialReference:d.a.fromJSON(t.spatialReference),sourceSpatialReference:d.a.fromJSON(t.serviceInfo.spatialReference)}),this.handles.add([this.featureFetcher.watch("availability",(t=>this.emit("notify-availability",{availability:t})),!0),this.watch("updating",(()=>this.notifyUpdating()))]),this.whenSetup.resolve(),this.isInitializing=!1,this.configure(t.configuration)}async configure(t){return await this.updatingHandles.addPromise(this.whenSetup.promise),this.updateFeatureFetcherConfiguration(t),{result:{}}}async fetchCandidates(t,e){return await this.whenSetup.promise,Object(a.u)(e),{result:await this.queryEngine.executeQueryForSnapping({point:t.point,distance:t.distance,types:t.types,query:Object(o.l)(t.filter)?t.filter:{where:"1=1"}},Object(o.l)(e)?e.signal:null)}}async updateTiles(t,e){return await this.updatingHandles.addPromise(this.whenSetup.promise),Object(a.u)(e),this.featureFetcher.tileSize=t.tileSize,this.featureFetcher.tilesOfInterest=t.tiles,this.featureFetcher.tileInfo=Object(o.l)(t.tileInfo)?b.a.fromJSON(t.tileInfo):null,{result:{}}}async refresh(t,e){return await this.updatingHandles.addPromise(this.whenSetup.promise),Object(a.u)(e),this.featureFetcher.refresh(),{result:{}}}async whenNotUpdating(t,e){return await this.updatingHandles.addPromise(this.whenSetup.promise),Object(a.u)(e),await Object(a.y)(Object(c.i)(this,"updating"),e),{result:{}}}async getDebugInfo(t,e){return Object(a.u)(e),{result:this.featureFetcher.debugInfo}}async beginApplyEdits(t,e){this.updatingHandles.addPromise(this.whenSetup.promise),Object(a.u)(e);const r=Object(a.e)();return this.pendingApplyEdits.set(t.id,r),this.featureFetcher.applyEdits(r.promise),this.updatingHandles.addPromise(r.promise),{result:{}}}async endApplyEdits(t,e){const r=this.pendingApplyEdits.get(t.id);return r&&r.resolve(t.edits),Object(a.u)(e),{result:{}}}updateFeatureFetcherConfiguration(t){this.featureFetcher.filter=Object(o.l)(t.filter)?y.a.fromJSON(t.filter):null,this.featureFetcher.customParameters=t.customParameters}notifyUpdating(){this.emit("notify-updating",{updating:this.updating})}};function J(){return new Z}Object(n.a)([Object(l.b)({readOnly:!0})],Z.prototype,"updating",null),Object(n.a)([Object(l.b)()],Z.prototype,"isInitializing",void 0),Z=Object(n.a)([Object(h.a)("esri.views.interactive.snapping.featureSources.featureServiceSource.FeatureServiceSnappingSourceWorker")],Z)},598:function(t,e,r){"use strict";function n(t){return 32+t.length}function i(t){if(!t)return 0;let e=32;for(const r in t)if(t.hasOwnProperty(r)){const i=t[r];switch(typeof i){case"string":e+=n(i);break;case"number":e+=16;break;case"boolean":e+=4}}return e}function s(t,e){return 32+t.length*e}r.d(e,"a",(function(){return i})),r.d(e,"b",(function(){return s}))},703:function(t,e,r){"use strict";r.d(e,"a",(function(){return a}));var n=r(84),i=r(85),s=r(215),o=r(698);class a{constructor(t=9,e){this.compareMinX=h,this.compareMinY=d,this.toBBox=function(t){return t},this._maxEntries=Math.max(4,t||9),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),e&&("function"==typeof e?this.toBBox=e:this._initFormat(e)),this.clear()}destroy(){this.clear(),O.prune(),v.prune(),w.prune(),x.prune()}all(t){this._all(this.data,t)}search(t,e){let r=this.data;const n=this.toBBox;if(g(t,r))for(O.clear();r;){for(let i=0,s=r.children.length;i<s;i++){const s=r.children[i],o=r.leaf?n(s):s;g(t,o)&&(r.leaf?e(s):y(t,o)?this._all(s,e):O.push(s))}r=O.pop()}}collides(t){let e=this.data;const r=this.toBBox;if(!g(t,e))return!1;for(O.clear();e;){for(let n=0,i=e.children.length;n<i;n++){const i=e.children[n],s=e.leaf?r(i):i;if(g(t,s)){if(e.leaf||y(t,s))return!0;O.push(i)}}e=O.pop()}return!1}load(t){if(!t.length)return this;if(t.length<this._minEntries){for(let e=0,r=t.length;e<r;e++)this.insert(t[e]);return this}let e=this._build(t.slice(0,t.length),0,t.length-1,0);if(this.data.children.length)if(this.data.height===e.height)this._splitRoot(this.data,e);else{if(this.data.height<e.height){const t=this.data;this.data=e,e=t}this._insert(e,this.data.height-e.height-1,!0)}else this.data=e;return this}insert(t){return t&&this._insert(t,this.data.height-1),this}clear(){return this.data=new M([]),this}remove(t){if(!t)return this;let e,r=this.data,s=null,o=0,a=!1;const c=this.toBBox(t);for(w.clear(),x.clear();r||w.length>0;){var l;if(r||(r=Object(i.d)(w.pop()),s=w.data[w.length-1],o=null!=(l=x.pop())?l:0,a=!0),r.leaf&&(e=Object(n.e)(r.children,t,r.children.length,r.indexHint),-1!==e))return r.children.splice(e,1),w.push(r),this._condense(w),this;a||r.leaf||!y(r,c)?s?(o++,r=s.children[o],a=!1):r=null:(w.push(r),x.push(o),o=0,s=r,r=r.children[0])}return this}toJSON(){return this.data}fromJSON(t){return this.data=t,this}_all(t,e){let r=t;for(v.clear();r;){var n;if(!0===r.leaf)for(const t of r.children)e(t);else v.pushArray(r.children);r=null!=(n=v.pop())?n:null}}_build(t,e,r,n){const i=r-e+1;let s=this._maxEntries;if(i<=s){const n=new M(t.slice(e,r+1));return c(n,this.toBBox),n}n||(n=Math.ceil(Math.log(i)/Math.log(s)),s=Math.ceil(i/s**(n-1)));const o=new _([]);o.height=n;const a=Math.ceil(i/s),l=a*Math.ceil(Math.sqrt(s));j(t,e,r,l,this.compareMinX);for(let c=e;c<=r;c+=l){const e=Math.min(c+l-1,r);j(t,c,e,a,this.compareMinY);for(let r=c;r<=e;r+=a){const i=Math.min(r+a-1,e);o.children.push(this._build(t,r,i,n-1))}}return c(o,this.toBBox),o}_chooseSubtree(t,e,r,n){for(;n.push(e),!0!==e.leaf&&n.length-1!==r;){let r,n=1/0,i=1/0;for(let s=0,o=e.children.length;s<o;s++){const o=e.children[s],a=p(o),c=b(t,o)-a;c<i?(i=c,n=a<n?a:n,r=o):c===i&&a<n&&(n=a,r=o)}e=r||e.children[0]}return e}_insert(t,e,r){const n=this.toBBox,i=r?t:n(t);w.clear();const s=this._chooseSubtree(i,this.data,e,w);for(s.children.push(t),u(s,i);e>=0&&w.data[e].children.length>this._maxEntries;)this._split(w,e),e--;this._adjustParentBBoxes(i,w,e)}_split(t,e){const r=t.data[e],n=r.children.length,i=this._minEntries;this._chooseSplitAxis(r,i,n);const s=this._chooseSplitIndex(r,i,n);if(!s)return void console.log("  Error: assertion failed at PooledRBush._split: no valid split index");const o=r.children.splice(s,r.children.length-s),a=r.leaf?new M(o):new _(o);a.height=r.height,c(r,this.toBBox),c(a,this.toBBox),e?t.data[e-1].children.push(a):this._splitRoot(r,a)}_splitRoot(t,e){this.data=new _([t,e]),this.data.height=t.height+1,c(this.data,this.toBBox)}_chooseSplitIndex(t,e,r){let n,i,s;n=i=1/0;for(let o=e;o<=r-e;o++){const e=l(t,0,o,this.toBBox),a=l(t,o,r,this.toBBox),c=m(e,a),u=p(e)+p(a);c<n?(n=c,s=o,i=u<i?u:i):c===n&&u<i&&(i=u,s=o)}return s}_chooseSplitAxis(t,e,r){const n=t.leaf?this.compareMinX:h,i=t.leaf?this.compareMinY:d;this._allDistMargin(t,e,r,n)<this._allDistMargin(t,e,r,i)&&t.children.sort(n)}_allDistMargin(t,e,r,n){t.children.sort(n);const i=this.toBBox,s=l(t,0,e,i),o=l(t,r-e,r,i);let a=f(s)+f(o);for(let c=e;c<r-e;c++){const e=t.children[c];u(s,t.leaf?i(e):e),a+=f(s)}for(let c=r-e-1;c>=e;c--){const e=t.children[c];u(o,t.leaf?i(e):e),a+=f(o)}return a}_adjustParentBBoxes(t,e,r){for(let n=r;n>=0;n--)u(e.data[n],t)}_condense(t){for(let e=t.length-1;e>=0;e--){const r=t.data[e];if(0===r.children.length)if(e>0){const i=t.data[e-1],s=i.children;s.splice(Object(n.e)(s,r,s.length,i.indexHint),1)}else this.clear();else c(r,this.toBBox)}}_initFormat(t){const e=["return a"," - b",";"];this.compareMinX=new Function("a","b",e.join(t[0])),this.compareMinY=new Function("a","b",e.join(t[1])),this.toBBox=new Function("a","return {minX: a"+t[0]+", minY: a"+t[1]+", maxX: a"+t[2]+", maxY: a"+t[3]+"};")}}function c(t,e){l(t,0,t.children.length,e,t)}function l(t,e,r,n,i){i||(i=new M([])),i.minX=1/0,i.minY=1/0,i.maxX=-1/0,i.maxY=-1/0;for(let s,o=e;o<r;o++)s=t.children[o],u(i,t.leaf?n(s):s);return i}function u(t,e){t.minX=Math.min(t.minX,e.minX),t.minY=Math.min(t.minY,e.minY),t.maxX=Math.max(t.maxX,e.maxX),t.maxY=Math.max(t.maxY,e.maxY)}function h(t,e){return t.minX-e.minX}function d(t,e){return t.minY-e.minY}function p(t){return(t.maxX-t.minX)*(t.maxY-t.minY)}function f(t){return t.maxX-t.minX+(t.maxY-t.minY)}function b(t,e){return(Math.max(e.maxX,t.maxX)-Math.min(e.minX,t.minX))*(Math.max(e.maxY,t.maxY)-Math.min(e.minY,t.minY))}function m(t,e){const r=Math.max(t.minX,e.minX),n=Math.max(t.minY,e.minY),i=Math.min(t.maxX,e.maxX),s=Math.min(t.maxY,e.maxY);return Math.max(0,i-r)*Math.max(0,s-n)}function y(t,e){return t.minX<=e.minX&&t.minY<=e.minY&&e.maxX<=t.maxX&&e.maxY<=t.maxY}function g(t,e){return e.minX<=t.maxX&&e.minY<=t.maxY&&e.maxX>=t.minX&&e.maxY>=t.minY}function j(t,e,r,n,s){const a=[e,r];for(;a.length;){const e=Object(i.d)(a.pop()),r=Object(i.d)(a.pop());if(e-r<=n)continue;const c=r+Math.ceil((e-r)/n/2)*n;Object(o.a)(t,c,r,e,s),a.push(r,c,c,e)}}const O=new s.a,v=new s.a,w=new s.a,x=new s.a({deallocator:void 0});class S extends class{constructor(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0}}{constructor(){super(...arguments),this.height=1,this.indexHint=new n.a}}class M extends S{constructor(t){super(),this.children=t,this.leaf=!0}}class _ extends S{constructor(t){super(),this.children=t,this.leaf=!1}}},768:function(t,e,r){"use strict";r.d(e,"a",(function(){return d}));var n=r(88),i=r(129),s=r(87),o=r(85),a=r(223),c=r(118),l=r(180),u=r(800),h=r(769);class d{constructor(t){this.geometryInfo=t,this._boundsStore=new u.a,this._featuresById=new Map,this._markedIds=new Set,this.events=new i.a,this.featureAdapter=h.a}get geometryType(){return this.geometryInfo.geometryType}get hasM(){return this.geometryInfo.hasM}get hasZ(){return this.geometryInfo.hasZ}get numFeatures(){return this._featuresById.size}get fullBounds(){if(!this.numFeatures)return null;const t=Object(c.l)(c.a);return this._featuresById.forEach((e=>{const r=this._boundsStore.get(e.objectId);r&&(t[0]=Math.min(r[0],t[0]),t[1]=Math.min(r[1],t[1]),t[2]=Math.max(r[2],t[2]),t[3]=Math.max(r[3],t[3]))})),t}get storeStatistics(){let t=0;return this._featuresById.forEach((e=>{Object(o.l)(e.geometry)&&e.geometry.coords&&(t+=e.geometry.coords.length)})),{featureCount:this._featuresById.size,vertexCount:t/(this.hasZ?this.hasM?4:3:this.hasM?3:2)}}add(t){this._add(t),this._emitChanged()}addMany(t){for(const e of t)this._add(e);this._emitChanged()}clear(){this._featuresById.clear(),this._boundsStore.clear(),this._emitChanged()}removeById(t){const e=this._featuresById.get(t);return e?(this._remove(e),this._emitChanged(),e):null}removeManyById(t){this._boundsStore.invalidateIndex();for(const e of t){const t=this._featuresById.get(e);t&&this._remove(t)}this._emitChanged()}forEachBounds(t,e,r){for(const n of t){const t=this._boundsStore.get(n.objectId);t&&e(Object(a.o)(r,t))}}getFeature(t){return this._featuresById.get(t)}has(t){return this._featuresById.has(t)}forEach(t){this._featuresById.forEach((e=>t(e)))}forEachInBounds(t,e){this._boundsStore.forEachInBounds(t,(t=>{e(this._featuresById.get(t))}))}startMarkingUsedFeatures(){this._boundsStore.invalidateIndex(),this._markedIds.clear()}sweep(){let t=!1;this._featuresById.forEach(((e,r)=>{this._markedIds.has(r)||(t=!0,this._remove(e))})),this._markedIds.clear(),t&&this._emitChanged()}_emitChanged(){this.events.emit("changed",void 0)}_add(t){if(!t)return;const e=t.objectId;if(null==e)return void s.a.getLogger("esri.layers.graphics.data.FeatureStore").error(new n.a("featurestore:invalid-feature","feature id is missing",{feature:t}));const r=this._featuresById.get(e);let i;if(this._markedIds.add(e),r?(t.displayId=r.displayId,i=this._boundsStore.get(e),this._boundsStore.delete(e)):Object(o.l)(this.onFeatureAdd)&&this.onFeatureAdd(t),Object(o.k)(t.geometry)||!t.geometry.coords||!t.geometry.coords.length)return this._boundsStore.set(e,null),void this._featuresById.set(e,t);i=Object(l.r)(Object(o.l)(i)?i:Object(c.l)(),t.geometry,this.geometryInfo.hasZ,this.geometryInfo.hasM),Object(o.l)(i)&&this._boundsStore.set(e,i),this._featuresById.set(e,t)}_remove(t){return Object(o.l)(this.onFeatureRemove)&&this.onFeatureRemove(t),this._markedIds.delete(t.objectId),this._boundsStore.delete(t.objectId),this._featuresById.delete(t.objectId),t}}},769:function(t,e,r){"use strict";r.d(e,"a",(function(){return o}));var n=r(480),i=r(261),s=r(188);const o={getObjectId:t=>t.objectId,getAttributes:t=>t.attributes,getAttribute:(t,e)=>t.attributes[e],cloneWithGeometry:(t,e)=>new i.b(e,t.attributes,null,t.objectId),getGeometry:t=>t.geometry,getCentroid:(t,e)=>(t.centroid||(t.centroid=Object(n.a)(new s.a,t.geometry,e.hasZ,e.hasM)),t.centroid)}},800:function(t,e,r){"use strict";r.d(e,"a",(function(){return o}));var n=r(82),i=r(703);const s={minX:0,minY:0,maxX:0,maxY:0};class o{constructor(){this._indexInvalid=!1,this._boundsToLoad=[],this._boundsById=new Map,this._idByBounds=new Map,this._index=new i.a(9,Object(n.a)("esri-csp-restrictions")?t=>({minX:t[0],minY:t[1],maxX:t[2],maxY:t[3]}):["[0]","[1]","[2]","[3]"]),this._loadIndex=()=>{if(this._indexInvalid){const t=new Array(this._idByBounds.size);let e=0;this._idByBounds.forEach(((r,n)=>{t[e++]=n})),this._indexInvalid=!1,this._index.clear(),this._index.load(t)}else this._boundsToLoad.length&&(this._index.load(this._boundsToLoad.filter((t=>this._idByBounds.has(t)))),this._boundsToLoad.length=0)}}clear(){this._indexInvalid=!1,this._boundsToLoad.length=0,this._boundsById.clear(),this._idByBounds.clear(),this._index.clear()}delete(t){const e=this._boundsById.get(t);this._boundsById.delete(t),e&&(this._idByBounds.delete(e),this._indexInvalid||this._index.remove(e))}forEachInBounds(t,e){this._loadIndex(),function(t,e,r){s.minX=e[0],s.minY=e[1],s.maxX=e[2],s.maxY=e[3],t.search(s,r)}(this._index,t,(t=>e(this._idByBounds.get(t))))}get(t){return this._boundsById.get(t)}has(t){return this._boundsById.has(t)}invalidateIndex(){this._indexInvalid||(this._indexInvalid=!0,this._boundsToLoad.length=0)}set(t,e){if(!this._indexInvalid){const e=this._boundsById.get(t);e&&(this._index.remove(e),this._idByBounds.delete(e))}this._boundsById.set(t,e),e&&(this._idByBounds.set(e,t),this._indexInvalid||(this._boundsToLoad.push(e),this._boundsToLoad.length>5e4&&this._loadIndex()))}}},95:function(t,e,r){"use strict";r.d(e,"a",(function(){return s}));var n=r(90),i=r(81);function s(t,e={}){var r;const s=t instanceof n.a?t:new n.a(t,e),o={type:null==(r=null==e?void 0:e.ignoreUnknown)||r?s.apiValues:String,readOnly:null==e?void 0:e.readOnly,json:{type:s.jsonValues,read:(null==e||!e.readOnly)&&{reader:s.read},write:{writer:s.write}}};return void 0!==(null==e?void 0:e.default)&&(o.json.default=e.default),void 0!==(null==e?void 0:e.name)&&(o.json.name=e.name),Object(i.b)(o)}}}]);
//# sourceMappingURL=108.75e52341.chunk.js.map