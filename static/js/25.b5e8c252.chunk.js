(this.webpackJsonpimaps=this.webpackJsonpimaps||[]).push([[25],{107:function(e,t,r){"use strict";r.d(t,"a",(function(){return d})),r.d(t,"b",(function(){return w})),r.d(t,"c",(function(){return _})),r.d(t,"d",(function(){return f})),r.d(t,"e",(function(){return m})),r.d(t,"f",(function(){return v})),r.d(t,"g",(function(){return j})),r.d(t,"h",(function(){return b})),r.d(t,"i",(function(){return y})),r.d(t,"j",(function(){return p})),r.d(t,"k",(function(){return g})),r.d(t,"l",(function(){return O})),r.d(t,"m",(function(){return a}));var i=r(178),n=(r(84),r(86));function s(e,t,r,i,n){const s=e.watch(t,((t,n,s,a)=>{r&&!r(t)||null==i||i.call(e,t,n,s,a)}),n);if(Array.isArray(t))for(const a of t){const n=e.get(a);r&&r(n)&&(null==i||i.call(e,n,n,t,e))}else{const n=e.get(t);r&&r(n)&&(null==i||i.call(e,n,n,t,e))}return s}function a(e,t,r,i,a){const l="function"==typeof i?i:null,o="object"==typeof i?i:null;"boolean"==typeof i&&(a=i);let c,u=!1;function h(){c&&(c.remove(),c=null)}const d=Object(n.f)();Object(n.q)(o,(()=>{h(),d.reject(Object(n.e)())}));const f={then:d.promise.then.bind(d.promise),catch:d.promise.catch.bind(d.promise),remove:h};return Object.freeze(f),c=s(e,t,r,((t,r,i,n)=>{u=!0,h(),l&&l.call(e,t,r,i,n),d.resolve({value:t,oldValue:r,propertyName:i,target:n})}),a),u&&h(),f}function l(e){return!!e}function o(e){return!e}function c(e){return!0===e}function u(e){return!1===e}const h=/\?(\.|$)/g;function d(e,t,r,i){const n=Array.isArray(t)?t:t.indexOf(",")>-1?t.split(","):[t],s=f(e,t,r,i);for(const a of n){const t=a.trim().replace(h,"$1"),i=e.get(t);r.call(e,i,i,t,e)}return s}function f(e,t,r,i){return e.watch(t,r,i)}function m(e,t,r,i){return s(e,t,l,r,i)}function p(e,t,r,i){return a(e,t,l,r,i)}function b(e,t,r,i){return s(e,t,o,r,i)}function y(e,t,r,i){return a(e,t,o,r,i)}function g(e,t,r,i){return s(e,t,c,r,i)}function O(e,t,r,i){return a(e,t,c,r,i)}function v(e,t,r,i){return s(e,t,u,r,i)}function j(e,t,r,i){return a(e,t,u,r,i)}function _(e,t,r,i){let n=!1;const s=e.watch(t,((t,i,s,a)=>{n||r.call(e,t,i,s,a)}),i);return{remove(){s.remove()},pause(){n=!0},resume(){n=!1}}}function w(e,t,r,n,s,a,l){const o={};function c(t){const i=o[t];i&&(a&&a(i.target,t,e,r),i.handle.remove(),delete o[t])}const u=d(e,t,((t,a,l)=>{c(l),Object(i.b)(t)&&(o[l]={handle:Object(i.c)(t,r,n),target:t},s&&s(t,l,e,r))}),l);return{remove(){u.remove();for(const e in o)c(e)}}}},110:function(e,t,r){"use strict";r.d(t,"a",(function(){return C})),r.d(t,"b",(function(){return S})),r.d(t,"c",(function(){return T})),r.d(t,"d",(function(){return P})),r.d(t,"e",(function(){return L})),r.d(t,"f",(function(){return q})),r.d(t,"g",(function(){return R})),r.d(t,"h",(function(){return N})),r.d(t,"i",(function(){return F})),r.d(t,"j",(function(){return c})),r.d(t,"k",(function(){return x})),r.d(t,"l",(function(){return _})),r.d(t,"m",(function(){return k})),r.d(t,"n",(function(){return B})),r.d(t,"o",(function(){return w})),r.d(t,"p",(function(){return v})),r.d(t,"q",(function(){return j})),r.d(t,"r",(function(){return I})),r.d(t,"s",(function(){return M})),r.d(t,"t",(function(){return D})),r.d(t,"u",(function(){return U})),r.d(t,"v",(function(){return z})),r.d(t,"w",(function(){return A})),r.d(t,"x",(function(){return E}));r(76);var i=r(87),n=r(154),s=r(90),a=r(127),l=r(102),o=r(247);const c=39.37,u=a.a.radius*Math.PI/200,h=/UNIT\[([^\]]+)\]\]$/i,d=o.a,f=/UNIT\[([^\]]+)\]/i,m=new Set([4261,4305,4807,4810,4811,4812,4816,4819,4821,4901,4902,37225,104139,104140]),p=Object(i.b)()({meter:"meters",foot:"feet",foot_us:"us-feet",foot_clarke:"clarke-feet",yard_clarke:"clarke-yards",link_clarke:"clarke-links",yard_sears:"sears-yards",foot_sears:"sears-feet",chain_sears:"sears-chains",chain_benoit_1895_b:"benoit-1895-b-chains",yard_indian:"indian-yards",yard_indian_1937:"indian-1937-yards",foot_gold_coast:"gold-coast-feet",chain_sears_1922_truncated:"sears-1922-truncated-chains","50_kilometers":"50-kilometers","150_kilometers":"150-kilometers"}),b=e=>e*e,y=e=>e*e*e,g={length:{baseUnit:"meters",units:{millimeters:{inBaseUnits:.001},centimeters:{inBaseUnits:.01},decimeters:{inBaseUnits:.1},meters:{inBaseUnits:1},kilometers:{inBaseUnits:1e3},inches:{inBaseUnits:.0254},feet:{inBaseUnits:.3048},yards:{inBaseUnits:.9144},miles:{inBaseUnits:1609.344},"nautical-miles":{inBaseUnits:1852},"us-feet":{inBaseUnits:1200/3937}}},area:{baseUnit:"square-meters",units:{"square-millimeters":{inBaseUnits:b(.001)},"square-centimeters":{inBaseUnits:b(.01)},"square-decimeters":{inBaseUnits:b(.1)},"square-meters":{inBaseUnits:1},"square-kilometers":{inBaseUnits:b(1e3)},"square-inches":{inBaseUnits:b(.0254)},"square-feet":{inBaseUnits:b(.3048)},"square-yards":{inBaseUnits:b(.9144)},"square-miles":{inBaseUnits:b(1609.344)},"square-us-feet":{inBaseUnits:b(1200/3937)},acres:{inBaseUnits:.0015625*b(1609.344)},ares:{inBaseUnits:100},hectares:{inBaseUnits:1e4}}},volume:{baseUnit:"liters",units:{liters:{inBaseUnits:1},"cubic-millimeters":{inBaseUnits:1e3*y(.001)},"cubic-centimeters":{inBaseUnits:1e3*y(.01)},"cubic-decimeters":{inBaseUnits:1e3*y(.1)},"cubic-meters":{inBaseUnits:1e3},"cubic-kilometers":{inBaseUnits:1e3*y(1e3)},"cubic-inches":{inBaseUnits:1e3*y(.0254)},"cubic-feet":{inBaseUnits:1e3*y(.3048)},"cubic-yards":{inBaseUnits:1e3*y(.9144)},"cubic-miles":{inBaseUnits:1e3*y(1609.344)}}},angle:{baseUnit:"radians",units:{radians:{inBaseUnits:1},degrees:{inBaseUnits:Math.PI/180}}}},O=function(){const e={};for(const t in g)for(const r in g[t].units)e[r]=t;return e}();const v=["metric","imperial","square-inches","square-feet","square-yards","square-miles","square-us-feet","square-meters","square-kilometers","acres","ares","hectares"],j=["metric","imperial","inches","feet","yards","miles","nautical-miles","us-feet","meters","kilometers"];function _(e){return"imperial"===e||"metric"===e}function w(e){const t=O[e];if(t)return t;throw new Error("unknown measure")}function S(e){return function(e){return g[e].baseUnit}(w(e))}function x(e,t=null){return t=t||w(e),g[t].baseUnit===e}function T(e,t,r){if(t===r)return e;const i=w(t);if(i!==w(r))throw new Error("incompatible units");const n=x(t,i)?e:function(e,t,r){return e*g[r].units[t].inBaseUnits}(e,t,i);return x(r,i)?n:function(e,t,r){return e/g[r].units[t].inBaseUnits}(n,r,i)}function z(e,t){return T(e,t,"meters")<3e3?"meters":"kilometers"}function A(e,t){return T(e,t,"meters")<1e5?"meters":"kilometers"}function M(e,t){return T(e,t,"feet")<1e3?"feet":"miles"}function D(e,t){return T(e,t,"feet")<1e5?"feet":"miles"}function U(e,t){return T(e,t,"square-meters")<3e6?"square-meters":"square-kilometers"}function I(e,t){return T(e,t,"square-feet")<1e6?"square-feet":"square-miles"}function k(e,t,r){return T(e,t,"meters")/(r*Math.PI/180)}function E(e){return p.fromJSON(e.toLowerCase())||null}function R(e){if(e&&"object"==typeof e&&!Object(l.f)(e))return 1;const t=q(e);return t>1e5?1:t}function F(e){return q(e)>=(e instanceof s.a?Object(n.e)(e).metersPerDegree:1e5)?"meters":N(e)}function q(e,t=a.a.metersPerDegree){return L(e,!0)||t}function L(e,t=!1){let r,i,n=null;if(null!=e&&("object"==typeof e?(r=e.wkid,i=e.wkt):"number"==typeof e?r=e:"string"==typeof e&&(i=e)),r){if(Object(l.l)(r))return a.b.metersPerDegree;if(Object(l.m)(r))return a.c.metersPerDegree;n=d.values[d[r]],!n&&t&&m.has(r)&&(n=u)}else if(i)if(-1!==i.search(/^PROJCS/i)){const e=h.exec(i);e&&e[1]&&(n=parseFloat(e[1].split(",")[1]))}else if(-1!==i.search(/^GEOCCS/i)){const e=f.exec(i);e&&e[1]&&(n=parseFloat(e[1].split(",")[1]))}return n}function N(e){let t,r,i=null;if(null!=e&&("object"==typeof e?(t=e.wkid,r=e.wkt):"number"==typeof e?t=e:"string"==typeof e&&(r=e)),t)i=d.units[d[t]];else if(r&&-1!==r.search(/^PROJCS/i)){let e=h.exec(r);e&&e[1]&&(e=/[\\"\\']{1}([^\\"\\']+)/.exec(e[1]),i=e&&e[1])}return i?E(i):null}function P(e){if(!e)return null;switch(N(e)){case"feet":case"us-feet":case"clarke-feet":case"clarke-yards":case"clarke-links":case"sears-yards":case"sears-feet":case"sears-chains":case"benoit-1895-b-chains":case"indian-yards":case"indian-1937-yards":case"gold-coast-feet":case"sears-1922-truncated-chains":return"imperial";case"50-kilometers":case"150-kilometers":case"meters":return"metric";case null:case void 0:return null}return null}const G={esriAcres:"acres",esriAres:"ares",esriHectares:"hectares",esriSquareCentimeters:"square-centimeters",esriSquareDecimeters:"square-decimeters",esriSquareFeet:"square-feet",esriSquareInches:"square-inches",esriSquareKilometers:"square-kilometers",esriSquareMeters:"square-meters",esriSquareMiles:"square-miles",esriSquareMillimeters:"square-millimeters",esriSquareUsFeet:"square-us-feet",esriSquareYards:"square-yards"},$={esriCentimeters:"centimeters",esriDecimeters:"decimeters",esriFeet:"feet",esriInches:"inches",esriKilometers:"kilometers",esriMeters:"meters",esriMiles:"miles",esriMillimeters:"millimeters",esriNauticalMiles:"nautical-miles",esriYards:"yards"},C=Object(i.b)()(G),B=Object(i.b)()($);Object(i.b)()({...G,...$})},111:function(e,t,r){"use strict";var i=r(78),n=r(91),s=r(101),a=r(82),l=r(80),o=r(79);let c=class extends n.a{constructor(e){super(e),this._groups=new Map}destroy(){this.removeAll()}get size(){let e=0;return this._groups.forEach((t=>{e+=t.length})),e}add(e,t){if(!this._isHandle(e)&&!Array.isArray(e)&&!s.a.isCollection(e))return this;const r=this._getOrCreateGroup(t);return Array.isArray(e)||s.a.isCollection(e)?e.forEach((e=>this._isHandle(e)&&r.push(e))):r.push(e),this.notifyChange("size"),this}forEach(e,t){if("function"==typeof e)this._groups.forEach((t=>t.forEach(e)));else{const r=this._getGroup(e);r&&t&&r.forEach(t)}}has(e){return this._groups.has(this._ensureGroupKey(e))}remove(e){if(Array.isArray(e)||s.a.isCollection(e))return e.forEach(this.remove,this),this;if(!this.has(e))return this;const t=this._getGroup(e);for(let r=0;r<t.length;r++)t[r].remove();return this._deleteGroup(e),this.notifyChange("size"),this}removeAll(){return this._groups.forEach((e=>{for(let t=0;t<e.length;t++)e[t].remove()})),this._groups.clear(),this.notifyChange("size"),this}_isHandle(e){return e&&!!e.remove}_getOrCreateGroup(e){if(this.has(e))return this._getGroup(e);const t=[];return this._groups.set(this._ensureGroupKey(e),t),t}_getGroup(e){return Object(a.d)(this._groups.get(this._ensureGroupKey(e)))}_deleteGroup(e){return this._groups.delete(this._ensureGroupKey(e))}_ensureGroupKey(e){return e||"_default_"}};Object(i.a)([Object(l.b)({readOnly:!0})],c.prototype,"size",null),c=Object(i.a)([Object(o.a)("esri.core.Handles")],c);var u=c;t.a=u},114:function(e,t,r){"use strict";var i=r(78),n=r(87),s=r(83),a=r(80),l=(r(76),r(81),r(77),r(92)),o=r(79);const c=new n.a({inherited:"inherited",codedValue:"coded-value",range:"range"});let u=class extends s.a{constructor(e){super(e),this.name=null,this.type=null}};Object(i.a)([Object(a.b)({type:String,json:{write:!0}})],u.prototype,"name",void 0),Object(i.a)([Object(l.a)(c)],u.prototype,"type",void 0),u=Object(i.a)([Object(o.a)("esri.layers.support.Domain")],u);var h=u;t.a=h},119:function(e,t,r){"use strict";r.d(t,"a",(function(){return z})),r.d(t,"b",(function(){return d})),r.d(t,"c",(function(){return p})),r.d(t,"d",(function(){return b})),r.d(t,"e",(function(){return s})),r.d(t,"f",(function(){return _})),r.d(t,"g",(function(){return y})),r.d(t,"h",(function(){return g})),r.d(t,"i",(function(){return v})),r.d(t,"j",(function(){return O})),r.d(t,"k",(function(){return n})),r.d(t,"l",(function(){return x})),r.d(t,"m",(function(){return u})),r.d(t,"n",(function(){return c})),r.d(t,"o",(function(){return h})),r.d(t,"p",(function(){return l})),r.d(t,"q",(function(){return a})),r.d(t,"r",(function(){return m})),r.d(t,"s",(function(){return j})),r.d(t,"t",(function(){return w})),r.d(t,"u",(function(){return S})),r.d(t,"v",(function(){return o})),r.d(t,"w",(function(){return f}));r(76),r(82);var i=r(96);function n(e=A){return[e[0],e[1],e[2],e[3]]}function s(e){return[e[0],e[1],e[2],e[3]]}function a(e,t,r,i,s=n()){return s[0]=e,s[1]=t,s[2]=r,s[3]=i,s}function l(e,t=n()){return t[0]=e.xmin,t[1]=e.ymin,t[2]=e.xmax,t[3]=e.ymax,t}function o(e,t){return new i.a({xmin:e[0],ymin:e[1],xmax:e[2],ymax:e[3],spatialReference:t})}function c(e,t){t[0]<e[0]&&(e[0]=t[0]),t[0]>e[2]&&(e[2]=t[0]),t[1]<e[1]&&(e[1]=t[1]),t[1]>e[3]&&(e[3]=t[1])}function u(e,t,r=e){if("length"in t)T(t)?(r[0]=Math.min(e[0],t[0]),r[1]=Math.min(e[1],t[1]),r[2]=Math.max(e[2],t[2]),r[3]=Math.max(e[3],t[3])):2!==t.length&&3!==t.length||(r[0]=Math.min(e[0],t[0]),r[1]=Math.min(e[1],t[1]),r[2]=Math.max(e[2],t[0]),r[3]=Math.max(e[3],t[1]));else switch(t.type){case"extent":r[0]=Math.min(e[0],t.xmin),r[1]=Math.min(e[1],t.ymin),r[2]=Math.max(e[2],t.xmax),r[3]=Math.max(e[3],t.ymax);break;case"point":r[0]=Math.min(e[0],t.x),r[1]=Math.min(e[1],t.y),r[2]=Math.max(e[2],t.x),r[3]=Math.max(e[3],t.y)}return r}function h(e,t,r=e){const i=t.length;let n=e[0],s=e[1],a=e[2],l=e[3];for(let o=0;o<i;o++){const e=t[o];n=Math.min(n,e[0]),s=Math.min(s,e[1]),a=Math.max(a,e[0]),l=Math.max(l,e[1])}return r[0]=n,r[1]=s,r[2]=a,r[3]=l,r}function d(e){for(let t=0;t<4;t++)if(!isFinite(e[t]))return!1;return!0}function f(e){return e[0]>=e[2]?0:e[2]-e[0]}function m(e){return e[1]>=e[3]?0:e[3]-e[1]}function p(e){return f(e)*m(e)}function b(e,t=[0,0]){return t[0]=(e[0]+e[2])/2,t[1]=(e[1]+e[3])/2,t}function y(e,t){return O(e,t[0],t[1])}function g(e,t){return O(e,t.x,t.y)}function O(e,t,r){return t>=e[0]&&r>=e[1]&&t<=e[2]&&r<=e[3]}function v(e,t,r){return t[0]>=e[0]-r&&t[1]>=e[1]-r&&t[0]<=e[2]+r&&t[1]<=e[3]+r}function j(e,t){return Math.max(t[0],e[0])<=Math.min(t[2],e[2])&&Math.max(t[1],e[1])<=Math.min(t[3],e[3])}function _(e,t){return t[0]>=e[0]&&t[2]<=e[2]&&t[1]>=e[1]&&t[3]<=e[3]}function w(e,t,r,i=e){return i[0]=e[0]+t,i[1]=e[1]+r,i[2]=e[2]+t,i[3]=e[3]+r,i}function S(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e}function x(e){return e?S(e,z):n(z)}function T(e){return 4===e.length}const z=[1/0,1/0,-1/0,-1/0],A=[0,0,0,0]},130:function(e,t,r){"use strict";var i,n=r(78),s=r(84),a=r(80),l=(r(81),r(76),r(77),r(92)),o=r(79),c=r(83);let u=i=class extends c.a{constructor(e){super(e),this.name=null,this.code=null}clone(){return new i({name:this.name,code:this.code})}};Object(n.a)([Object(a.b)({type:String,json:{write:!0}})],u.prototype,"name",void 0),Object(n.a)([Object(a.b)({type:[String,Number],json:{write:!0}})],u.prototype,"code",void 0),u=i=Object(n.a)([Object(o.a)("esri.layers.support.CodedValue")],u);var h,d=u,f=r(114);let m=h=class extends f.a{constructor(e){super(e),this.codedValues=null,this.type="coded-value"}getName(e){let t=null;if(this.codedValues){const r=String(e);this.codedValues.some((e=>(String(e.code)===r&&(t=e.name),!!t)))}return t}clone(){return new h({codedValues:Object(s.a)(this.codedValues),name:this.name})}};Object(n.a)([Object(a.b)({type:[d],json:{write:!0}})],m.prototype,"codedValues",void 0),Object(n.a)([Object(l.a)({codedValue:"coded-value"})],m.prototype,"type",void 0),m=h=Object(n.a)([Object(o.a)("esri.layers.support.CodedValueDomain")],m);var p=m;t.a=p},131:function(e,t,r){"use strict";var i,n=r(78),s=r(83),a=r(82),l=r(168),o=r(80),c=(r(76),r(81),r(77),r(89)),u=r(79),h=r(88);let d=i=class extends s.a{constructor(e){super(e),this.end=null,this.start=null}static get allTime(){return f}static get empty(){return m}readEnd(e,t){return null!=t.end?new Date(t.end):null}writeEnd(e,t){t.end=e?e.getTime():null}get isAllTime(){return this.equals(i.allTime)}get isEmpty(){return this.equals(i.empty)}readStart(e,t){return null!=t.start?new Date(t.start):null}writeStart(e,t){t.start=e?e.getTime():null}clone(){return new i({end:this.end,start:this.start})}expandTo(e){if(this.isEmpty||this.isAllTime)return this.clone();const t=Object(a.b)(this.start,(t=>Object(l.c)(t,e))),r=Object(a.b)(this.end,(t=>Object(l.b)(Object(l.c)(t,e),1,e)));return new i({start:t,end:r})}intersection(e){if(!e)return this.clone();if(this.isEmpty||e.isEmpty)return i.empty;if(this.isAllTime)return e.clone();if(e.isAllTime)return this.clone();const t=Object(a.n)(this.start,-1/0,(e=>e.getTime())),r=Object(a.n)(this.end,1/0,(e=>e.getTime())),n=Object(a.n)(e.start,-1/0,(e=>e.getTime())),s=Object(a.n)(e.end,1/0,(e=>e.getTime()));let l,o;if(n>=t&&n<=r?l=n:t>=n&&t<=s&&(l=t),r>=n&&r<=s?o=r:s>=t&&s<=r&&(o=s),!isNaN(l)&&!isNaN(o)){const e=new i;return e.start=l===-1/0?null:new Date(l),e.end=o===1/0?null:new Date(o),e}return i.empty}offset(e,t){if(this.isEmpty||this.isAllTime)return this.clone();const r=new i,{start:n,end:s}=this;return Object(a.k)(n)&&(r.start=Object(l.b)(n,e,t)),Object(a.k)(s)&&(r.end=Object(l.b)(s,e,t)),r}equals(e){if(!e)return!1;const t=Object(a.k)(this.start)?this.start.getTime():this.start,r=Object(a.k)(this.end)?this.end.getTime():this.end,i=Object(a.k)(e.start)?e.start.getTime():e.start,n=Object(a.k)(e.end)?e.end.getTime():e.end;return t===i&&r===n}union(e){if(!e||e.isEmpty)return this.clone();if(this.isEmpty)return e.clone();if(this.isAllTime||e.isAllTime)return f.clone();const t=Object(a.k)(this.start)&&Object(a.k)(e.start)?new Date(Math.min(this.start.getTime(),e.start.getTime())):null,r=Object(a.k)(this.end)&&Object(a.k)(e.end)?new Date(Math.max(this.end.getTime(),e.end.getTime())):null;return new i({start:t,end:r})}};Object(n.a)([Object(o.b)({type:Date,json:{write:{allowNull:!0}}})],d.prototype,"end",void 0),Object(n.a)([Object(c.a)("end")],d.prototype,"readEnd",null),Object(n.a)([Object(h.a)("end")],d.prototype,"writeEnd",null),Object(n.a)([Object(o.b)({readOnly:!0,json:{read:!1}})],d.prototype,"isAllTime",null),Object(n.a)([Object(o.b)({readOnly:!0,json:{read:!1}})],d.prototype,"isEmpty",null),Object(n.a)([Object(o.b)({type:Date,json:{write:{allowNull:!0}}})],d.prototype,"start",void 0),Object(n.a)([Object(c.a)("start")],d.prototype,"readStart",null),Object(n.a)([Object(h.a)("start")],d.prototype,"writeStart",null),d=i=Object(n.a)([Object(u.a)("esri.TimeExtent")],d);const f=new d,m=new d({start:void 0,end:void 0});var p=d;t.a=p},133:function(e,t,r){"use strict";var i,n=r(78),s=(r(80),r(76),r(81),r(77),r(92)),a=r(79),l=r(114);let o=i=class extends l.a{constructor(e){super(e),this.type="inherited"}clone(){return new i}};Object(n.a)([Object(s.a)({inherited:"inherited"})],o.prototype,"type",void 0),o=i=Object(n.a)([Object(a.a)("esri.layers.support.InheritedDomain")],o);var c=o;t.a=c},134:function(e,t,r){"use strict";var i,n=r(78),s=r(80),a=(r(76),r(81),r(77),r(92)),l=r(79),o=r(114);let c=i=class extends o.a{constructor(e){super(e),this.maxValue=null,this.minValue=null,this.type="range"}clone(){return new i({maxValue:this.maxValue,minValue:this.minValue,name:this.name})}};Object(n.a)([Object(s.b)({type:Number,json:{type:[Number],read:{source:"range",reader:(e,t)=>t.range&&t.range[1]},write:{enabled:!1,overridePolicy(){return{enabled:null!=this.maxValue&&null==this.minValue}},target:"range",writer(e,t,r){t[r]=[this.minValue||0,e]}}}})],c.prototype,"maxValue",void 0),Object(n.a)([Object(s.b)({type:Number,json:{type:[Number],read:{source:"range",reader:(e,t)=>t.range&&t.range[0]},write:{target:"range",writer(e,t,r){t[r]=[e,this.maxValue||0]}}}})],c.prototype,"minValue",void 0),Object(n.a)([Object(a.a)({range:"range"})],c.prototype,"type",void 0),c=i=Object(n.a)([Object(l.a)("esri.layers.support.RangeDomain")],c);var u=c;t.a=u},146:function(e,t,r){"use strict";r.d(t,"a",(function(){return u})),r.d(t,"b",(function(){return c})),r.d(t,"c",(function(){return l})),r.d(t,"d",(function(){return o})),r.d(t,"e",(function(){return a}));r(93);var i=r(82),n=r(90);let s;async function a(){return s||(s=(async()=>{const e=await Promise.all([r.e(34),r.e(124)]).then(r.bind(null,378));return await e.arcade.load(),{arcade:e.arcade,arcadeUtils:e,Dictionary:e.Dictionary,Feature:e.arcadeFeature}})()),s}const l=(e,t,r)=>u.create(e,t,r,null,["$feature"]),o=(e,t,r)=>u.create(e,t,r,null,["$feature","$view"]),c=(e,t,r,i)=>u.create(e,t,r,i,["$feature","$view"]);class u{constructor(e,t,r,i,n,s,a,l){this.script=e,this.evaluate=n;const o=Array.isArray(a)?a:a.fields;this.fields=o,this._syntaxTree=i,this._arcade=t,this._arcadeDictionary=r,this._arcadeFeature=s,this._spatialReference=l,this._referencesGeometry=t.scriptTouchesGeometry(this._syntaxTree),this._referencesScale=this._arcade.referencesMember(this._syntaxTree,"scale")}static async create(e,t,r,s,l,o){const{arcade:c,Feature:h,Dictionary:d}=await a(),f=n.a.fromJSON(t),m=c.parseScript(e,o),p=l.reduce(((e,t)=>({...e,[t]:null})),{});let b=null;Object(i.k)(s)&&(b=new d(s),b.immutable=!0,p.$config=null);const y=c.scriptUsesGeometryEngine(m)&&c.enableGeometrySupport(),g=c.scriptUsesFeatureSet(m)&&c.enableFeatureSetSupport(),O=c.scriptIsAsync(m)&&c.enableAsyncSupport(),v={vars:p,spatialReference:f,useAsync:!!O},j=new d;j.immutable=!1,j.setField("scale",0);const _=c.compileScript(m,v);return await Promise.all([y,g,O]),new u(e,c,d,m,(e=>("$view"in e&&e.$view&&(j.setField("scale",e.$view.scale),e.$view=j),b&&(e.$config=b),_({vars:e,spatialReference:f}))),new h,r,f)}repurposeFeature(e){return e.geometry&&!e.geometry.spatialReference&&(e.geometry.spatialReference=this._spatialReference),this._arcadeFeature.repurposeFromGraphicLikeObject(e.geometry,e.attributes,{fields:this.fields}),this._arcadeFeature}repurposeAdapter(e){return this._arcadeFeature.repurposeFromAdapter(e,{fields:this.fields}),this._arcadeFeature}createDictionary(){return new this._arcadeDictionary}referencesMember(e){return this._arcade.referencesMember(this._syntaxTree,e)}referencesFunction(e){return this._arcade.referencesFunction(this._syntaxTree,e)}referencesGeometry(){return this._referencesGeometry}referencesScale(){return this._referencesScale}extractFieldLiterals(e){return this._arcade.extractFieldLiterals(this._syntaxTree,e)}}},154:function(e,t,r){"use strict";r.d(t,"a",(function(){return l})),r.d(t,"b",(function(){return o})),r.d(t,"c",(function(){return c})),r.d(t,"d",(function(){return u})),r.d(t,"e",(function(){return f})),r.d(t,"f",(function(){return m})),r.d(t,"g",(function(){return d})),r.d(t,"h",(function(){return h}));var i=r(90),n=r(127),s=r(102);function a(e){return new i.a({wkt:`GEOCCS["Spherical geocentric",\n    DATUM["Not specified",\n      SPHEROID["Sphere",${e.radius},0]],\n    PRIMEM["Greenwich",0.0,\n      AUTHORITY["EPSG","8901"]],\n    UNIT["m",1.0],\n    AXIS["Geocentric X",OTHER],\n    AXIS["Geocentric Y",EAST],\n    AXIS["Geocentric Z",NORTH]\n  ]`})}const l=a(n.a),o=a(n.b),c=a(n.c),u=new i.a({wkt:`GEOCCS["WGS 84",\n  DATUM["WGS_1984",\n    SPHEROID["WGS 84",${n.a.radius},298.257223563,\n      AUTHORITY["EPSG","7030"]],\n    AUTHORITY["EPSG","6326"]],\n  PRIMEM["Greenwich",0,\n    AUTHORITY["EPSG","8901"]],\n  UNIT["m",1.0,\n    AUTHORITY["EPSG","9001"]],\n  AXIS["Geocentric X",OTHER],\n  AXIS["Geocentric Y",OTHER],\n  AXIS["Geocentric Z",NORTH],\n  AUTHORITY["EPSG","4978"]\n]`});function h(e){return e&&e===n.b?o:e&&e===n.c?c:l}function d(e){return e&&(Object(s.h)(e)||e===o)?o:e&&(Object(s.i)(e)||e===c)?c:l}function f(e){return e&&(Object(s.h)(e)||e===o)?n.b:e&&(Object(s.i)(e)||e===c)?n.c:n.a}function m(e){return Object(s.l)(e)?n.b:Object(s.m)(e)?n.c:n.a}},156:function(e,t,r){"use strict";r.d(t,"a",(function(){return i})),r.d(t,"b",(function(){return d})),r.d(t,"c",(function(){return h})),r.d(t,"d",(function(){return u})),r.d(t,"e",(function(){return c}));r(76);var i,n,s=r(130),a=r(114),l=r(133),o=r(134);function c(e,t){switch(e.type){case"range":{const r="range"in e?e.range[0]:e.minValue,n="range"in e?e.range[1]:e.maxValue;if(+t<r||+t>n)return i.VALUE_OUT_OF_RANGE;break}case"coded-value":case"codedValue":if(null==e.codedValues||e.codedValues.every((e=>null==e||e.code!==t)))return i.INVALID_CODED_VALUE}return null}(n=i||(i={})).VALUE_OUT_OF_RANGE="domain-validation-error::value-out-of-range",n.INVALID_CODED_VALUE="domain-validation-error::invalid-coded-value";const u={key:"type",base:a.a,typeMap:{range:o.a,"coded-value":s.a,inherited:l.a}};function h(e){if(e&&"range"===e.type)return{min:"range"in e?e.range[0]:e.minValue,max:"range"in e?e.range[1]:e.maxValue}}function d(e){if(!e||!e.type)return null;switch(e.type){case"range":return o.a.fromJSON(e);case"codedValue":return s.a.fromJSON(e);case"inherited":return l.a.fromJSON(e)}return null}},162:function(e,t,r){"use strict";r.d(t,"a",(function(){return a}));var i=r(78),n=r(79);let s=0;const a=e=>{let t=class extends e{constructor(...e){super(...e),Object.defineProperty(this,"uid",{writable:!1,configurable:!1,value:Date.now().toString(16)+"-object-"+s++})}};return t=Object(i.a)([Object(n.a)("esri.core.Identifiable")],t),t};let l=class extends(a(class{})){};l=Object(i.a)([Object(n.a)("esri.core.Identifiable")],l)},168:function(e,t,r){"use strict";r.d(t,"a",(function(){return l})),r.d(t,"b",(function(){return s})),r.d(t,"c",(function(){return a}));r(76);const i={milliseconds:1,seconds:1e3,minutes:6e4,hours:36e5,days:864e5,weeks:6048e5,months:26784e5,years:31536e6,decades:31536e7,centuries:31536e8},n={milliseconds:{getter:"getMilliseconds",setter:"setMilliseconds",multiplier:1},seconds:{getter:"getSeconds",setter:"setSeconds",multiplier:1},minutes:{getter:"getMinutes",setter:"setMinutes",multiplier:1},hours:{getter:"getHours",setter:"setHours",multiplier:1},days:{getter:"getDate",setter:"setDate",multiplier:1},weeks:{getter:"getDate",setter:"setDate",multiplier:7},months:{getter:"getMonth",setter:"setMonth",multiplier:1},years:{getter:"getFullYear",setter:"setFullYear",multiplier:1},decades:{getter:"getFullYear",setter:"setFullYear",multiplier:10},centuries:{getter:"getFullYear",setter:"setFullYear",multiplier:100}};function s(e,t,r){const i=new Date(e.getTime());if(t&&r){const e=n[r],{getter:s,setter:a,multiplier:l}=e;i[a](i[s]()+t*l)}return i}function a(e,t){switch(t){case"milliseconds":return new Date(e.getTime());case"seconds":return new Date(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds());case"minutes":return new Date(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes());case"hours":return new Date(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours());case"days":return new Date(e.getFullYear(),e.getMonth(),e.getDate());case"weeks":return new Date(e.getFullYear(),e.getMonth(),e.getDate()-e.getDay());case"months":return new Date(e.getFullYear(),e.getMonth(),1);case"years":return new Date(e.getFullYear(),0,1);case"decades":return new Date(e.getFullYear()-e.getFullYear()%10,0,1);case"centuries":return new Date(e.getFullYear()-e.getFullYear()%100,0,1);default:return new Date}}function l(e,t,r){return 0===e?0:e*i[t]/i[r]}},196:function(e,t,r){"use strict";r.d(t,"a",(function(){return f})),r.d(t,"b",(function(){return u})),r.d(t,"c",(function(){return p})),r.d(t,"d",(function(){return v})),r.d(t,"e",(function(){return O})),r.d(t,"f",(function(){return h})),r.d(t,"g",(function(){return d})),r.d(t,"h",(function(){return b})),r.d(t,"i",(function(){return y})),r.d(t,"j",(function(){return m})),r.d(t,"k",(function(){return g}));var i=r(82),n=r(94),s=r(264);const a=["MapServer","ImageServer","FeatureServer","SceneServer","StreamServer","VectorTileServer"],l=new RegExp(`^((?:https?:)?\\/\\/\\S+?\\/rest\\/services\\/(.+?)\\/(${a.join("|")}))(?:\\/(?:layers\\/)?(\\d+))?`,"i"),o=new RegExp(`^((?:https?:)?\\/\\/\\S+?\\/([^\\/\\n]+)\\/(${a.join("|")}))(?:\\/(?:layers\\/)?(\\d+))?`,"i"),c=/(.*?)\/(?:layers\/)?(\d+)\/?$/i;function u(e){return!!l.test(e)}function h(e){const t=Object(n.K)(e),r=t.path.match(l)||t.path.match(o);if(!r)return null;const[,i,s,a,c]=r,u=s.indexOf("/");return{title:f(-1!==u?s.slice(u+1):s),serverType:a,sublayer:null!=c&&""!==c?parseInt(c,10):null,url:{path:i}}}function d(e){const t=Object(n.K)(e).path.match(c);return t?{serviceUrl:t[1],sublayerId:Number(t[2])}:null}function f(e){return(e=e.replace(/\s*[/_]+\s*/g," "))[0].toUpperCase()+e.slice(1)}function m(e,t){const r=[];if(e){const t=h(e);Object(i.k)(t)&&t.title&&r.push(t.title)}if(t){const e=f(t);r.push(e)}if(2===r.length){if(-1!==r[0].toLowerCase().indexOf(r[1].toLowerCase()))return r[0];if(-1!==r[1].toLowerCase().indexOf(r[0].toLowerCase()))return r[1]}return r.join(" - ")}function p(e){if(!e)return!1;const t=-1!==(e=e.toLowerCase()).indexOf(".arcgis.com/"),r=-1!==e.indexOf("//services")||-1!==e.indexOf("//tiles")||-1!==e.indexOf("//features");return t&&r}function b(e,t){return e?Object(n.I)(Object(n.H)(e,t)):e}function y(e){let{url:t}=e;if(!t)return{url:t};t=Object(n.H)(t,e.logger);const r=Object(n.K)(t),s=h(r.path);let a;if(Object(i.k)(s))null!=s.sublayer&&null==e.layer.layerId&&(a=s.sublayer),t=s.url.path;else if(e.nonStandardUrlAllowed){const e=d(r.path);Object(i.k)(e)&&(t=e.serviceUrl,a=e.sublayerId)}return{url:Object(n.I)(t),layerId:a}}function g(e,t,r,i,a){Object(s.f)(t,i,"url",a),i.url&&null!=e.layerId&&(i.url=Object(n.z)(i.url,r,e.layerId.toString()))}function O(e){if(!e)return!1;const t=e.toLowerCase(),r=-1!==t.indexOf("/services/"),i=-1!==t.indexOf("/mapserver/wmsserver"),n=-1!==t.indexOf("/imageserver/wmsserver"),s=-1!==t.indexOf("/wmsserver");return r&&(i||n||s)}function v(e){if(!e)return!1;const t=new n.a(Object(n.A)(e)).authority.toLowerCase();return"server.arcgisonline.com"===t||"services.arcgisonline.com"===t}},198:function(e,t,r){"use strict";r.d(t,"a",(function(){return s}));var i=r(110),n=r(127);const s={inches:Object(i.c)(1,"meters","inches"),feet:Object(i.c)(1,"meters","feet"),"us-feet":Object(i.c)(1,"meters","us-feet"),yards:Object(i.c)(1,"meters","yards"),miles:Object(i.c)(1,"meters","miles"),"nautical-miles":Object(i.c)(1,"meters","nautical-miles"),millimeters:Object(i.c)(1,"meters","millimeters"),centimeters:Object(i.c)(1,"meters","centimeters"),decimeters:Object(i.c)(1,"meters","decimeters"),meters:Object(i.c)(1,"meters","meters"),kilometers:Object(i.c)(1,"meters","kilometers"),"decimal-degrees":1/Object(i.m)(1,"meters",n.a.radius)}},215:function(e,t,r){"use strict";r.d(t,"a",(function(){return n})),r.d(t,"b",(function(){return s}));var i=r(167);class n{constructor(e,t,r){this._namespace=e,this._storage=t,this._removeFunc=!1,this._hit=0,this._miss=0,this._storage.register(this),this._namespace+=":",r&&(this._storage.registerRemoveFunc(this._namespace,r),this._removeFunc=!0)}destroy(){this._storage.clear(this._namespace),this._removeFunc&&this._storage.deregisterRemoveFunc(this._namespace),this._storage.deregister(this),this._storage=null}get namespace(){return this._namespace.slice(0,-1)}get hitRate(){return this._hit/(this._hit+this._miss)}get size(){return this._storage.size}get maxSize(){return this._storage.maxSize}resetHitRate(){this._hit=this._miss=0}put(e,t,r,i=0){this._storage.put(this._namespace+e,t,r,i)}get(e){const t=this._storage.get(this._namespace+e);return void 0===t?++this._miss:++this._hit,t}pop(e){const t=this._storage.pop(this._namespace+e);return void 0===t?++this._miss:++this._hit,t}updateSize(e,t,r){this._storage.updateSize(this._namespace+e,t,r)}clear(){this._storage.clear(this._namespace)}clearAll(){this._storage.clearAll()}getStats(){return this._storage.getStats()}resetStats(){this._storage.resetStats()}}class s{constructor(e=10485760){this._maxSize=e,this._db=new Map,this._size=0,this._hit=0,this._miss=0,this._removeFuncs=new i.a,this._users=new i.a}destroy(){this.clearAll(),this._removeFuncs.clear(),this._users.clear(),this._db=null}register(e){this._users.push(e)}deregister(e){this._users.removeUnordered(e)}registerRemoveFunc(e,t){this._removeFuncs.push([e,t])}deregisterRemoveFunc(e){this._removeFuncs.filterInPlace((t=>t[0]!==e))}get size(){return this._size}get maxSize(){return this._maxSize}set maxSize(e){this._maxSize=Math.max(e,0),this._checkSizeLimit()}put(e,t,r,i){const n=this._db.get(e);if(n&&(this._size-=n.size,this._db.delete(e),n.entry!==t&&this._notifyRemoved(e,n.entry)),r>this._maxSize)return void this._notifyRemoved(e,t);if(void 0===t)return void console.warn("Refusing to cache undefined entry ");if(!r||r<0)return void console.warn("Refusing to cache entry with invalid size "+r);const s=1+Math.max(i,-3)- -3;this._db.set(e,{entry:t,size:r,lifetime:s,lives:s}),this._size+=r,this._checkSizeLimit()}updateSize(e,t,r){const i=this._db.get(e);if(i&&i.entry===t){if(this._size-=i.size,r>this._maxSize)return this._db.delete(e),void this._notifyRemoved(e,t);i.size=r,this._size+=r,this._checkSizeLimit()}}pop(e){const t=this._db.get(e);if(t)return this._size-=t.size,this._db.delete(e),++this._hit,t.entry;++this._miss}get(e){const t=this._db.get(e);if(void 0!==t)return this._db.delete(e),t.lives=t.lifetime,this._db.set(e,t),++this._hit,t.entry;++this._miss}getStats(){const e={Size:Math.round(this._size/1048576)+"/"+Math.round(this._maxSize/1048576)+"MB","Hit rate":Math.round(100*this._getHitRate())+"%",Entries:this._db.size.toString()},t={},r=new Array;this._db.forEach(((e,i)=>{const n=e.lifetime;r[n]=(r[n]||0)+e.size,this._users.forAll((r=>{const n=r.namespace;if(i.startsWith(n)){const r=t[n]||0;t[n]=r+e.size}}))}));const i={};this._users.forAll((e=>{const r=e.namespace;if(!isNaN(e.hitRate)&&e.hitRate>0){const n=t[r]||0;t[r]=n,i[r]=Math.round(100*e.hitRate)+"%"}else i[r]="0%"}));const n=Object.keys(t);n.forEach((e=>t[e]=t[e]/this._size*100)),n.sort(((e,r)=>t[r]-t[e])),n.forEach((r=>e[r]=Math.round(t[r])+"% / "+i[r]));for(let s=r.length-1;s>=0;--s){const t=r[s];t&&(e["Priority "+(s+-3-1)]=Math.round(t/this.size*100)+"%")}return e}resetStats(){this._hit=this._miss=0,this._users.forAll((e=>e.resetHitRate()))}clear(e){this._db.forEach(((t,r)=>{r.startsWith(e)&&(this._size-=t.size,this._db.delete(r),this._notifyRemoved(r,t.entry))}))}clearAll(){this._db.forEach(((e,t)=>this._notifyRemoved(t,e.entry))),this._size=0,this._db.clear()}_getHitRate(){return this._hit/(this._hit+this._miss)}_notifyRemoved(e,t){this._removeFuncs.forAll((r=>{e.startsWith(r[0])&&r[1](t)}))}_checkSizeLimit(){if(!(this._size<=this._maxSize))for(const[e,t]of this._db)if(this._db.delete(e),t.lives<=1?(this._size-=t.size,this._notifyRemoved(e,t.entry)):(--t.lives,this._db.set(e,t)),this._size<=.9*this.maxSize)return}}},219:function(e,t,r){"use strict";r.d(t,"a",(function(){return v}));var i=r(78),n=r(123),s=r(97),a=r(158),l=r(85),o=r(77),c=r(82),u=r(86),h=r(94),d=r(80),f=(r(76),r(81),r(89)),m=r(79),p=r(88),b=r(176),y=r(223),g=r(284);const O=o.a.getLogger("esri.layers.mixins.PortalLayer"),v=e=>{let t=class extends e{constructor(){super(...arguments),this.resourceReferences={portalItem:null,paths:[]},this.userHasEditingPrivileges=!0}destroy(){var e;null==(e=this.portalItem)||e.destroy(),this.portalItem=null}set portalItem(e){e!==this._get("portalItem")&&(this.removeOrigin("portal-item"),this._set("portalItem",e))}readPortalItem(e,t,r){if(t.itemId)return new y.default({id:t.itemId,portal:r&&r.portal})}writePortalItem(e,t){e&&e.id&&(t.itemId=e.id)}async loadFromPortal(e,t){if(this.portalItem&&this.portalItem.id)try{const i=await r.e(158).then(r.bind(null,335));return Object(u.v)(t),await i.load({instance:this,supportedTypes:e.supportedTypes,validateItem:e.validateItem,supportsData:e.supportsData},t)}catch(i){throw Object(u.m)(i)||O.warn(`Failed to load layer (${this.title}, ${this.id}) portal item (${this.portalItem.id})\n  ${i}`),i}}async finishLoadEditablePortalLayer(e){this._set("userHasEditingPrivileges",await this.fetchUserHasEditingPrivileges(e).catch((e=>(Object(u.u)(e),!0))))}async fetchUserHasEditingPrivileges(e){const t=this.url?null==n.b?void 0:n.b.findCredential(this.url):null;if(!t)return!0;const r=j.credential===t?j.user:await this.fetchEditingUser(e);return j.credential=t,j.user=r,Object(c.j)(r)||null==r.privileges||r.privileges.includes("features:user:edit")}async fetchEditingUser(e){var t,r;const i=null==(t=this.portalItem)||null==(r=t.portal)?void 0:r.user;if(i)return i;const l=n.b.findServerInfo(this.url);if(null==l||!l.owningSystemUrl)return null;const o=`${l.owningSystemUrl}/sharing/rest`,u=b.a.getDefault();if(u&&u.loaded&&Object(h.D)(u.restUrl)===Object(h.D)(o))return u.user;const d=`${o}/community/self`,f=Object(c.k)(e)?e.signal:null,m=await Object(a.c)(Object(s.default)(d,{authMode:"no-prompt",query:{f:"json"},signal:f}));return m.ok?g.default.fromJSON(m.value.data):null}read(e,t){t&&(t.layer=this),super.read(e,t)}write(e,t){const r=t&&t.portal,i=this.portalItem&&this.portalItem.id&&(this.portalItem.portal||b.a.getDefault());return r&&i&&!Object(h.r)(i.restUrl,r.restUrl)?(t.messages&&t.messages.push(new l.a("layer:cross-portal",`The layer '${this.title} (${this.id})' cannot be persisted because it refers to an item on a different portal than the one being saved to. To save the scene, set the layer.portalItem to null or save the scene to the same portal as the item associated with the layer`,{layer:this})),null):super.write(e,{...t,layer:this})}};return Object(i.a)([Object(d.b)({type:y.default})],t.prototype,"portalItem",null),Object(i.a)([Object(f.a)("web-document","portalItem",["itemId"])],t.prototype,"readPortalItem",null),Object(i.a)([Object(p.a)("web-document","portalItem",{itemId:{type:String}})],t.prototype,"writePortalItem",null),Object(i.a)([Object(d.b)()],t.prototype,"resourceReferences",void 0),Object(i.a)([Object(d.b)({readOnly:!0})],t.prototype,"userHasEditingPrivileges",void 0),t=Object(i.a)([Object(m.a)("esri.layers.mixins.PortalLayer")],t),t},j={credential:null,user:null}},249:function(e,t,r){"use strict";var i=r(215);t.a=class{constructor(e,t){this._storage=new i.b,this._storage.maxSize=e,t&&this._storage.registerRemoveFunc("",t)}put(e,t,r){this._storage.put(e,t,r,1)}pop(e){return this._storage.pop(e)}get(e){return this._storage.get(e)}clear(){this._storage.clearAll()}destroy(){this._storage.destroy()}get maxSize(){return this._storage.maxSize}set maxSize(e){this._storage.maxSize=e}}},288:function(e,t,r){"use strict";r.d(t,"a",(function(){return c}));var i=r(78),n=r(77),s=r(82),a=r(80),l=(r(76),r(81),r(79)),o=r(196);const c=e=>{let t=class extends e{get title(){if(this._get("title")&&"defaults"!==this.originOf("title"))return this._get("title");if(this.url){const e=Object(o.f)(this.url);if(Object(s.k)(e)&&e.title)return e.title}return this._get("title")||""}set title(e){this._set("title",e)}set url(e){this._set("url",Object(o.h)(e,n.a.getLogger(this.declaredClass)))}};return Object(i.a)([Object(a.b)()],t.prototype,"title",null),Object(i.a)([Object(a.b)({type:String})],t.prototype,"url",null),t=Object(i.a)([Object(l.a)("esri.layers.mixins.ArcGISService")],t),t}},359:function(e,t,r){"use strict";var i,n=r(78),s=r(87),a=r(83),l=r(110),o=r(80),c=(r(76),r(81)),u=(r(77),r(89)),h=r(79),d=r(88),f=r(106),m=r(90),p=r(119),b=r(102),y=r(152),g=r(478);const O=new s.a({PNG:"png",PNG8:"png8",PNG24:"png24",PNG32:"png32",JPEG:"jpg",JPG:"jpg",DIB:"dib",TIFF:"tiff",EMF:"emf",PS:"ps",PDF:"pdf",GIF:"gif",SVG:"svg",SVGZ:"svgz",Mixed:"mixed",MIXED:"mixed",LERC:"lerc",LERC2D:"lerc2d",RAW:"raw",pbf:"pbf"});let v=i=class extends a.a{constructor(e){super(e),this.dpi=96,this.format=null,this.origin=null,this.minScale=0,this.maxScale=0,this.size=null,this.spatialReference=null}static create(e={}){const{resolutionFactor:t=1,scales:r,size:n=256,spatialReference:s=m.a.WebMercator,numLODs:a=24}=e;if(!Object(b.j)(s)){const e=[];if(r)for(let t=0;t<r.length;t++){const i=r[t];e.push({level:t,scale:i,resolution:i})}else{let t=5e-4;for(let r=a-1;r>=0;r--)e.unshift({level:r,scale:t,resolution:t}),t*=2}return new i({dpi:96,lods:e,origin:new f.a(0,0,s),size:[n,n],spatialReference:s})}const o=Object(b.d)(s),c=e.origin?new f.a({x:e.origin.x,y:e.origin.y,spatialReference:s}):new f.a(o?{x:o.origin[0],y:o.origin[1],spatialReference:s}:{x:0,y:0,spatialReference:s}),u=1/(39.37*Object(l.f)(s)*96),h=[];if(r)for(let i=0;i<r.length;i++){const e=r[i],t=e*u;h.push({level:i,scale:e,resolution:t})}else{let e=Object(b.g)(s)?512/n*591657527.5917094:256/n*591657527.591555;const r=Math.ceil(a/t);h.push({level:0,scale:e,resolution:e*u});for(let i=1;i<r;i++){const r=e/2**t,n=r*u;h.push({level:i,scale:r,resolution:n}),e=r}}return new i({dpi:96,lods:h,origin:c,size:[n,n],spatialReference:s})}get isWrappable(){const{spatialReference:e,origin:t}=this;if(e&&t){const r=Object(b.d)(e);return e.isWrappable&&Math.abs(r.origin[0]-t.x)<=r.dx}return!1}readOrigin(e,t){return f.a.fromJSON({spatialReference:t.spatialReference,...e})}set lods(e){let t=0,r=0;const i=[];this._levelToLOD={},e&&(t=-1/0,r=1/0,e.forEach((e=>{i.push(e.scale),t=e.scale>t?e.scale:t,r=e.scale<r?e.scale:r,this._levelToLOD[e.level]=e}))),this._set("scales",i),this._set("minScale",t),this._set("maxScale",r),this._set("lods",e),this._initializeUpsampleLevels()}readSize(e,t){return[t.cols,t.rows]}writeSize(e,t){t.cols=e[0],t.rows=e[0]}zoomToScale(e){const t=this.scales;if(e<=0)return t[0];if(e>=t.length-1)return t[t.length-1];{const r=Math.floor(e),i=r+1;return t[r]/(t[r]/t[i])**(e-r)}}scaleToZoom(e){const t=this.scales,r=t.length-1;let i=0;for(;i<r;i++){const r=t[i],n=t[i+1];if(r<=e)return i;if(n===e)return i+1;if(r>e&&n<e)return i+Math.log(r/e)/Math.log(r/n)}return i}snapScale(e,t=.95){const r=this.scaleToZoom(e);return r%Math.floor(r)>=t?this.zoomToScale(Math.ceil(r)):this.zoomToScale(Math.floor(r))}tileAt(e,t,r,i){const n=this.lodAt(e);if(!n)return null;let s,a;if("number"==typeof t)s=t,a=r;else if(Object(b.c)(t.spatialReference,this.spatialReference))s=t.x,a=t.y,i=r;else{const e=Object(y.d)(t,this.spatialReference);if(!e)return null;s=e.x,a=e.y,i=r}const l=n.resolution*this.size[0],o=n.resolution*this.size[1];return i||(i={id:null,level:0,row:0,col:0,extent:Object(p.k)()}),i.level=e,i.row=Math.floor((this.origin.y-a)/o+.001),i.col=Math.floor((s-this.origin.x)/l+.001),this.updateTileInfo(i),i}updateTileInfo(e,t=0){let r=this.lodAt(e.level);if(!r&&1===t){const t=this.lods[this.lods.length-1];t.level<e.level&&(r=t)}if(!r)return;const i=e.level-r.level,n=r.resolution*this.size[0]/2**i,s=r.resolution*this.size[1]/2**i;e.id=`${e.level}/${e.row}/${e.col}`,e.extent||(e.extent=Object(p.k)()),e.extent[0]=this.origin.x+e.col*n,e.extent[1]=this.origin.y-(e.row+1)*s,e.extent[2]=e.extent[0]+n,e.extent[3]=e.extent[1]+s}upsampleTile(e){const t=this._upsampleLevels[e.level];return!(!t||-1===t.parentLevel)&&(e.level=t.parentLevel,e.row=Math.floor(e.row/t.factor+.001),e.col=Math.floor(e.col/t.factor+.001),this.updateTileInfo(e),!0)}getTileBounds(e,t){const{resolution:r}=this.lodAt(t.level),i=r*this.size[0],n=r*this.size[1];return e[0]=this.origin.x+t.col*i,e[1]=this.origin.y-(t.row+1)*n,e[2]=e[0]+i,e[3]=e[1]+n,e}lodAt(e){return this._levelToLOD&&this._levelToLOD[e]||null}clone(){return i.fromJSON(this.write({}))}_initializeUpsampleLevels(){const e=this.lods;this._upsampleLevels=[];let t=null;for(let r=0;r<e.length;r++){const i=e[r];this._upsampleLevels[i.level]={parentLevel:t?t.level:-1,factor:t?t.resolution/i.resolution:0},t=i}}};Object(n.a)([Object(o.b)({type:Number,json:{write:!0}})],v.prototype,"compressionQuality",void 0),Object(n.a)([Object(o.b)({type:Number,json:{write:!0}})],v.prototype,"dpi",void 0),Object(n.a)([Object(o.b)({type:String,json:{read:O.read,write:O.write,origins:{"web-scene":{read:!1,write:!1}}}})],v.prototype,"format",void 0),Object(n.a)([Object(o.b)({readOnly:!0})],v.prototype,"isWrappable",null),Object(n.a)([Object(o.b)({type:f.a,json:{write:!0}})],v.prototype,"origin",void 0),Object(n.a)([Object(u.a)("origin")],v.prototype,"readOrigin",null),Object(n.a)([Object(o.b)({type:[g.a],value:null,json:{write:!0}})],v.prototype,"lods",null),Object(n.a)([Object(o.b)({readOnly:!0})],v.prototype,"minScale",void 0),Object(n.a)([Object(o.b)({readOnly:!0})],v.prototype,"maxScale",void 0),Object(n.a)([Object(o.b)({readOnly:!0})],v.prototype,"scales",void 0),Object(n.a)([Object(o.b)({cast:e=>Array.isArray(e)?e:"number"==typeof e?[e,e]:[256,256]})],v.prototype,"size",void 0),Object(n.a)([Object(u.a)("size",["rows","cols"])],v.prototype,"readSize",null),Object(n.a)([Object(d.a)("size",{cols:{type:c.a},rows:{type:c.a}})],v.prototype,"writeSize",null),Object(n.a)([Object(o.b)({type:m.a,json:{write:!0}})],v.prototype,"spatialReference",void 0),v=i=Object(n.a)([Object(h.a)("esri.layers.support.TileInfo")],v);var j=v;t.a=j},478:function(e,t,r){"use strict";var i,n=r(78),s=r(83),a=r(80),l=(r(76),r(81)),o=(r(77),r(79));let c=i=class extends s.a{constructor(e){super(e),this.level=0,this.levelValue=null,this.resolution=0,this.scale=0}clone(){return new i({level:this.level,levelValue:this.levelValue,resolution:this.resolution,scale:this.scale})}};Object(n.a)([Object(a.b)({type:l.a,json:{write:!0}})],c.prototype,"level",void 0),Object(n.a)([Object(a.b)({type:String,json:{write:!0}})],c.prototype,"levelValue",void 0),Object(n.a)([Object(a.b)({type:Number,json:{write:!0}})],c.prototype,"resolution",void 0),Object(n.a)([Object(a.b)({type:Number,json:{write:!0}})],c.prototype,"scale",void 0),c=i=Object(n.a)([Object(o.a)("esri.layers.support.LOD")],c);var u=c;t.a=u},691:function(e,t,r){"use strict";r.d(t,"a",(function(){return S}));var i=r(78),n=r(97),s=r(91),a=r(85),l=r(111),o=r(77),c=r(249),u=r(167),h=r(86),d=r(218),f=r(94),m=r(107),p=r(80),b=(r(76),r(108)),y=r(79),g=r(173),O=r(84);class v{constructor(){this.location={left:0,top:0,width:0,height:0},this._allAvailability="unknown",this.byteSize=40}getAvailability(e,t){if("unknown"!==this._allAvailability)return this._allAvailability;const r=(e-this.location.top)*this.location.width+(t-this.location.left),i=r%8,n=r>>3,s=this._tileAvailabilityBitSet;return n<0||n>s.length?"unknown":s[n]&1<<i?"available":"unavailable"}_updateFromData(e){const t=this.location.width,r=this.location.height;let i=!0,n=!0;const s=Math.ceil(t*r/8),a=new Uint8Array(s);let l=0;for(let o=0;o<e.length;o++){const t=o%8;e[o]?(n=!1,a[l]|=1<<t):i=!1,7===t&&++l}n?this._allAvailability="unavailable":i?this._allAvailability="available":(this._allAvailability="unknown",this._tileAvailabilityBitSet=a,this.byteSize+=a.length)}static fromDefinition(e,t){const r=e.service.request||n.default,{row:i,col:s,width:l,height:o}=e,c={query:{f:"json"}};return t=t?{...c,...t}:c,r(function(e){let t;if("vector-tile"===e.service.type)t=`${e.service.url}/tilemap/${e.level}/${e.row}/${e.col}/${e.width}/${e.height}`;else{const r=e.service.tileServers;t=`${r&&r.length?r[e.row%r.length]:e.service.url}/tilemap/${e.level}/${e.row}/${e.col}/${e.width}/${e.height}`}const r=e.service.query;return r&&(t=`${t}?${r}`),t}(e),t).then((e=>e.data)).catch((e=>{if(e&&e.details&&422===e.details.httpStatus)return{location:{top:i,left:s,width:l,height:o},valid:!0,data:Object(g.b)(l*o,0)};throw e})).then((e=>{if(e.location&&(e.location.top!==i||e.location.left!==s||e.location.width!==l||e.location.height!==o))throw new a.a("tilemap:location-mismatch","Tilemap response for different location than requested",{response:e,definition:{top:i,left:s,width:l,height:o}});return v.fromJSON(e)}))}static fromJSON(e){v.validateJSON(e);const t=new v;return t.location=Object.freeze(Object(O.a)(e.location)),t._updateFromData(e.data),Object.freeze(t)}static validateJSON(e){if(!e||!e.location)throw new a.a("tilemap:missing-location","Location missing from tilemap response");if(!1===e.valid)throw new a.a("tilemap:invalid","Tilemap response was marked as invalid");if(!e.data)throw new a.a("tilemap:missing-data","Data missing from tilemap response");if(!Array.isArray(e.data))throw new a.a("tilemap:data-mismatch","Data must be an array of numbers");if(e.data.length!==e.location.width*e.location.height)throw new a.a("tilemap:data-mismatch","Number of data items does not match width/height of tilemap")}}function j(e){return`${e.level}/${e.row}/${e.col}/${e.width}/${e.height}`}var _;const w=o.a.getLogger("esri.layers.support.TilemapCache");let S=_=class extends s.a{constructor(e){super(e),this._handles=new l.a,this._pendingTilemapRequests={},this._availableLevels={},this.levels=5,this.cacheByteSize=2097152,this.request=n.default,this._prefetchingEnabled=!0}initialize(){this._tilemapCache=new c.a(this.cacheByteSize),this._handles.add([this.watch(["layer.parsedUrl","layer.tileServers?"],(()=>this._initializeTilemapDefinition())),Object(m.a)(this,"layer.tileInfo.lods",(e=>this._initializeAvailableLevels(e)),!0)]),this._initializeTilemapDefinition()}destroy(){this._handles&&(this._handles.destroy(),this._handles=null)}castLevels(e){return e<=2?(w.error("Minimum levels for Tilemap is 3, but got ",e),3):e}get size(){return 1<<this.levels}fetchTilemap(e,t,r,i){if(!this._availableLevels[e])return Promise.reject(new a.a("tilemap-cache:level-unavailable",`Level ${e} is unavailable in the service`));const n=this._tmpTilemapDefinition,s=this._tilemapFromCache(e,t,r,n);if(s)return Promise.resolve(s);const l=i&&i.signal;return i={...i,signal:null},new Promise(((e,t)=>{Object(h.q)(l,(()=>t(Object(h.e)())));const r=j(n);let s=this._pendingTilemapRequests[r];if(!s){s=v.fromDefinition(n,i).then((e=>(this._tilemapCache.put(r,e,e.byteSize),e)));const e=()=>delete this._pendingTilemapRequests[r];this._pendingTilemapRequests[r]=s,s.then(e,e)}s.then(e,t)}))}getAvailability(e,t,r){if(!this._availableLevels[e])return"unavailable";const i=this._tilemapFromCache(e,t,r,this._tmpTilemapDefinition);return i?i.getAvailability(t,r):"unknown"}getAvailabilityUpsample(e,t,r,i){i.level=e,i.row=t,i.col=r;const n=this.layer.tileInfo;for(n.updateTileInfo(i);;){const e=this.getAvailability(i.level,i.row,i.col);if("unavailable"!==e)return e;if(!n.upsampleTile(i))return"unavailable"}}fetchAvailability(e,t,r,i){return this._availableLevels[e]?this.fetchTilemap(e,t,r,i).catch((e=>e)).then((i=>{if(i instanceof v){const n=i.getAvailability(t,r);return"unavailable"===n?Promise.reject(new a.a("tile-map:tile-unavailable","Tile is not available",{level:e,row:t,col:r})):n}if(Object(h.m)(i))throw i;return"unknown"})):Promise.reject(new a.a("tilemap-cache:level-unavailable",`Level ${e} is unavailable in the service`))}fetchAvailabilityUpsample(e,t,r,i,n){i.level=e,i.row=t,i.col=r;const s=this.layer.tileInfo;s.updateTileInfo(i);const a=this.fetchAvailability(e,t,r,n).catch((e=>{if(Object(h.m)(e))throw e;if(s.upsampleTile(i))return this.fetchAvailabilityUpsample(i.level,i.row,i.col,i);throw e}));return this._fetchAvailabilityUpsamplePrefetch(i.id,e,t,r,n,a),a}async _fetchAvailabilityUpsamplePrefetch(e,t,r,i,n,s){if(!this._prefetchingEnabled)return;const a=`prefetch-${e}`;if(this._handles.has(a))return;const l=Object(h.d)();s.then((()=>l.abort()),(()=>l.abort()));let o=!1;const c={remove(){o||(o=!0,l.abort())}};if(this._handles.add(c,a),await Object(d.c)(10,l.signal).catch((()=>{})),o||(o=!0,this._handles.remove(a)),Object(h.n)(l))return;const u={id:e,level:t,row:r,col:i},f={...n,signal:l.signal},m=this.layer.tileInfo;for(let h=0;_._prefetches.length<_._maxPrefetch&&m.upsampleTile(u);++h){const e=this.fetchAvailability(u.level,u.row,u.col,f);_._prefetches.push(e);const t=()=>{_._prefetches.removeUnordered(e)};e.then(t,t)}}_initializeTilemapDefinition(){if(!this.layer.parsedUrl)return;const e=this.layer.parsedUrl,t=e.query;this._tilemapCache.clear(),this._tmpTilemapDefinition={service:{url:e.path,query:t?Object(f.E)(t):null,tileServers:this.layer.tileServers,request:this.request,type:this.layer.type},width:this.size,height:this.size,level:0,row:0,col:0}}_tilemapFromCache(e,t,r,i){i.level=e,i.row=t-t%this.size,i.col=r-r%this.size;const n=j(i);return this._tilemapCache.get(n)}_initializeAvailableLevels(e){this._availableLevels={},e&&e.forEach((e=>this._availableLevels[e.level]=!0))}get test(){const e=this;return{get prefetchingEnabled(){return e._prefetchingEnabled},set prefetchingEnabled(t){e._prefetchingEnabled=t},hasTilemap:(t,r,i)=>!!e._tilemapFromCache(t,r,i,e._tmpTilemapDefinition)}}};S._maxPrefetch=4,S._prefetches=new u.a({initialSize:_._maxPrefetch}),Object(i.a)([Object(p.b)({constructOnly:!0,type:Number})],S.prototype,"levels",void 0),Object(i.a)([Object(b.a)("levels")],S.prototype,"castLevels",null),Object(i.a)([Object(p.b)({readOnly:!0,type:Number})],S.prototype,"size",null),Object(i.a)([Object(p.b)({constructOnly:!0,type:Number})],S.prototype,"cacheByteSize",void 0),Object(i.a)([Object(p.b)({constructOnly:!0})],S.prototype,"layer",void 0),Object(i.a)([Object(p.b)({constructOnly:!0})],S.prototype,"request",void 0),S=_=Object(i.a)([Object(y.a)("esri.layers.support.TilemapCache")],S)},823:function(e,t,r){"use strict";r.d(t,"a",(function(){return s})),r.d(t,"b",(function(){return n}));var i=r(359);const n={type:i.a,json:{origins:{service:{read:{source:["tileInfo","minScale","maxScale","minLOD","maxLOD"],reader:s}}}}};function s(e,t,r,n){if(!e)return null;const{minScale:s,maxScale:a,minLOD:l,maxLOD:o}=t;if(null!=l&&null!=o)return n&&n.ignoreMinMaxLOD?i.a.fromJSON(e):i.a.fromJSON({...e,lods:e.lods.filter((({level:e})=>null!=e&&e>=l&&e<=o))});if(0!==s&&0!==a){const t=e=>Math.round(1e4*e)/1e4,r=s?t(s):1/0,n=a?t(a):-1/0;return i.a.fromJSON({...e,lods:e.lods.filter((e=>{const i=t(e.scale);return i<=r&&i>=n}))})}return i.a.fromJSON(e)}},92:function(e,t,r){"use strict";r.d(t,"a",(function(){return s}));var i=r(87),n=r(80);function s(e,t={}){var r;const s=e instanceof i.a?e:new i.a(e,t),a={type:null==(r=null==t?void 0:t.ignoreUnknown)||r?s.apiValues:String,readOnly:null==t?void 0:t.readOnly,json:{type:s.jsonValues,read:(null==t||!t.readOnly)&&{reader:s.read},write:{writer:s.write}}};return void 0!==(null==t?void 0:t.default)&&(a.json.default=t.default),void 0!==(null==t?void 0:t.name)&&(a.json.name=t.name),Object(n.b)(a)}},959:function(e,t,r){"use strict";r.d(t,"a",(function(){return u}));var i=r(78),n=(r(93),r(80)),s=(r(76),r(81),r(77),r(89)),a=r(79),l=r(823),o=r(691),c=r(90);const u=e=>{let t=class extends e{constructor(){super(...arguments),this.copyright=null,this.minScale=0,this.maxScale=0,this.spatialReference=null,this.tileInfo=null,this.tilemapCache=null}readMinScale(e,t){return null!=t.minLOD&&null!=t.maxLOD?e:0}readMaxScale(e,t){return null!=t.minLOD&&null!=t.maxLOD?e:0}get supportsBlankTile(){return this.version>=10.2}readTilemapCache(e,t){return t.capabilities&&t.capabilities.indexOf("Tilemap")>-1?new o.a({layer:this}):null}};return Object(i.a)([Object(n.b)({json:{read:{source:"copyrightText"}}})],t.prototype,"copyright",void 0),Object(i.a)([Object(n.b)()],t.prototype,"minScale",void 0),Object(i.a)([Object(s.a)("service","minScale")],t.prototype,"readMinScale",null),Object(i.a)([Object(n.b)()],t.prototype,"maxScale",void 0),Object(i.a)([Object(s.a)("service","maxScale")],t.prototype,"readMaxScale",null),Object(i.a)([Object(n.b)({type:c.a})],t.prototype,"spatialReference",void 0),Object(i.a)([Object(n.b)({readOnly:!0})],t.prototype,"supportsBlankTile",null),Object(i.a)([Object(n.b)(l.b)],t.prototype,"tileInfo",void 0),Object(i.a)([Object(n.b)()],t.prototype,"tilemapCache",void 0),Object(i.a)([Object(s.a)("service","tilemapCache",["capabilities"])],t.prototype,"readTilemapCache",null),Object(i.a)([Object(n.b)()],t.prototype,"version",void 0),t=Object(i.a)([Object(a.a)("esri.layers.mixins.ArcGISCachedService")],t),t}}}]);
//# sourceMappingURL=25.b5e8c252.chunk.js.map