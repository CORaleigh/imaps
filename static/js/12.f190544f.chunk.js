(this.webpackJsonpimaps=this.webpackJsonpimaps||[]).push([[12],{275:function(e,t,r){"use strict";r.d(t,"a",(function(){return pe})),r.d(t,"b",(function(){return Ee})),r.d(t,"c",(function(){return be}));var s,n,i=r(91),a=r(7),o=r(80),l=r(93),c=r(94),u=r(226),h=r(89),d=r(165),_=r(160),g=r(289),p={geometryEngineWorker:()=>Promise.all([r.e(9),r.e(162)]).then(r.bind(null,1126)),CSVSourceWorker:()=>Promise.all([r.e(10),r.e(11),r.e(16),r.e(22),r.e(112)]).then(r.bind(null,1263)),EdgeProcessingWorker:()=>Promise.all([r.e(39),r.e(140)]).then(r.bind(null,1235)),ElevationSamplerWorker:()=>r.e(163).then(r.bind(null,1127)),GeoJSONSourceWorker:()=>Promise.all([r.e(10),r.e(11),r.e(16),r.e(22),r.e(106)]).then(r.bind(null,1128)),LercWorker:()=>r.e(219).then(r.bind(null,1129)),MemorySourceWorker:()=>Promise.all([r.e(10),r.e(11),r.e(16),r.e(22),r.e(105)]).then(r.bind(null,1130)),PBFDecoderWorker:()=>Promise.all([r.e(35),r.e(125)]).then(r.bind(null,1264)),Pipeline:()=>Promise.all([r.e(1),r.e(2),r.e(6),r.e(10),r.e(75)]).then(r.bind(null,1222)),PointCloudWorker:()=>Promise.all([r.e(10),r.e(102)]).then(r.bind(null,1240)),RasterWorker:()=>r.e(107).then(r.bind(null,1131)),SceneLayerWorker:()=>r.e(289).then(r.bind(null,1265)),WorkerTileHandler:()=>Promise.all([r.e(42),r.e(43),r.e(118)]).then(r.bind(null,1225)),FeatureServiceSnappingSourceWorker:()=>Promise.all([r.e(10),r.e(11),r.e(16),r.e(35),r.e(97)]).then(r.bind(null,1236))};(n=s||(s={}))[n.HANDSHAKE=0]="HANDSHAKE",n[n.OPEN=1]="OPEN",n[n.OPENED=2]="OPENED",n[n.RESPONSE=3]="RESPONSE",n[n.INVOKE=4]="INVOKE",n[n.ABORT=5]="ABORT",n[n.CLOSE=6]="CLOSE",n[n.OPEN_PORT=7]="OPEN_PORT",n[n.ON=8]="ON";var b=0;function f(){return b++}function m(e){return e?"string"==typeof e?JSON.stringify({name:"message",message:e}):e.toJSON?JSON.stringify(e):JSON.stringify({name:e.name,message:e.message,details:e.details||{stack:e.stack}}):null}function E(e,t,r,n){var i;t.type!==s.OPEN_PORT?t.type===s.INVOKE||t.type===s.RESPONSE?(!function(e){return e&&"object"==typeof e&&("result"in e||"transferList"in e)}(r)?(i=O(n),t.data=r):(i=O(r.transferList),t.data=r.result),i?e.postMessage(t,i):e.postMessage(t)):e.postMessage(t):e.postMessage(t,[t.port])}function v(e){if(!e)return null;var t=e.data;return t?"string"==typeof t?JSON.parse(t):t:null}function O(e){if(!e||!e.length)return null;if(Object(o.a)("esri-workers-arraybuffer-transfer"))return e;var t=e.filter((e=>!function(e){return e instanceof ArrayBuffer||e&&e.constructor&&"ArrayBuffer"===e.constructor.name}(e)));return t.length?t:null}var{CLOSE:k,ABORT:I,INVOKE:T,RESPONSE:y,OPEN_PORT:w,ON:S}=s;class P{constructor(e){this._timer=null,this._cancelledJobIds=new Set,this._invokeMessages=[],this._invoke=e,this._timer=null,this._process=this._process.bind(this)}push(e){e.type===s.ABORT?this._cancelledJobIds.add(e.jobId):(this._invokeMessages.push(e),null===this._timer&&(this._timer=setTimeout(this._process,0)))}clear(){this._invokeMessages.length=0,this._cancelledJobIds.clear(),this._timer=null}_process(){for(var e of(this._timer=null,this._invokeMessages))this._cancelledJobIds.has(e.jobId)||this._invoke(e);this._cancelledJobIds.clear(),this._invokeMessages.length=0}}class R{constructor(e,t){this._port=e,this._outJobs=new Map,this._inJobs=new Map,this._invokeQueue=new P((e=>this._onInvokeMessage(e))),this._messageQueue=new Array,this._client=t.client,this._onMessage=this._onMessage.bind(this),this._channel=t.channel,Object(h.k)(t.scheduler)&&(this._frameTask=t.scheduler.registerTask(g.b.REMOTE_CLIENT,(e=>this._update(e)),(()=>this._messageQueue.length>0))),this._port.addEventListener("message",this._onMessage),this._port.start()}static connect(e){var t,r=new MessageChannel;t="function"==typeof e?new e:"default"in e&&"function"==typeof e.default?new e.default:e;var s=new R(r.port1,{channel:r,client:t});return"object"==typeof t&&"remoteClient"in t&&(t.remoteClient=s),R.clients.set(s,t),r.port2}static loadWorker(e){var t=p[e];return t?t():Promise.resolve(null)}close(){this._post({type:k}),this._close()}isBusy(){return this._outJobs.size>0}invoke(e,t,r){var s=r&&r.signal,n=r&&r.transferList;if(!this._port)return Promise.reject(new l.a("worker:port-closed","Cannot call invoke('".concat(e,"'), port is closed"),{methodName:e,data:t}));var i=f();return new Promise(((r,a)=>{var o=Object(c.q)(s,(()=>{var e,t=this._outJobs.get(i);t&&(this._outJobs.delete(i),null==(e=t.abortHandle)||e.remove(),this._post({type:I,jobId:i}),a(Object(c.e)()))})),l={resolve:r,reject:a,abortHandle:o,debugInfo:e};this._outJobs.set(i,l),this._post({type:T,jobId:i,methodName:e,abortable:null!=s},t,n)}))}on(e,t){var r=new MessageChannel;function n(e){t(e.data)}return this._port.postMessage({type:s.ON,eventType:e,port:r.port2},[r.port2]),r.port1.addEventListener("message",n),r.port1.start(),{remove(){r.port1.postMessage({type:s.CLOSE}),r.port1.close(),r.port1.removeEventListener("message",n)}}}openPort(){var e=new MessageChannel;return this._post({type:w,port:e.port2}),e.port1}_close(){this._channel&&(this._channel=null),this._port.removeEventListener("message",this._onMessage),this._port.close(),this._outJobs.forEach((e=>{var t;null==(t=e.abortHandle)||t.remove(),e.reject(Object(c.e)("Worker closing, aborting job calling '".concat(e.debugInfo,"'")))})),this._inJobs.clear(),this._outJobs.clear(),this._invokeQueue.clear(),this._port=this._client=null,this._frameTask=Object(h.p)(this._frameTask)}_onMessage(e){Object(h.k)(this._frameTask)?this._messageQueue.push(e):this._processMessage(e)}_processMessage(e){var t=v(e);if(t)switch(t.type){case y:this._onResponseMessage(t);break;case T:this._invokeQueue.push(t);break;case I:this._onAbortMessage(t);break;case k:this._onCloseMessage();break;case w:this._onOpenPortMessage(t);break;case S:this._onOnMessage(t)}}_onAbortMessage(e){var t=this._inJobs,r=e.jobId,s=t.get(r);this._invokeQueue.push(e),s&&(s.controller&&s.controller.abort(),t.delete(r))}_onCloseMessage(){var e=this._client;this._close(),e&&"destroy"in e&&R.clients.get(this)===e&&e.destroy(),R.clients.delete(this),e&&e.remoteClient&&(e.remoteClient=null)}_onInvokeMessage(e){var t,{methodName:r,jobId:s,data:n,abortable:i}=e,a=i?Object(c.d)():null,o=this._inJobs,l=this._client,u=l[r];try{if(!u&&r&&-1!==r.indexOf("."))for(var h=r.split("."),d=0;d<h.length-1;d++)u=(l=l[h[d]])[h[d+1]];if("function"!=typeof u)throw new TypeError("".concat(r," is not a function"));t=u.call(l,n,{client:this,signal:a?a.signal:null})}catch(_){return void this._post({type:y,jobId:s,error:m(_)})}Object(c.o)(t)?(o.set(s,{controller:a,promise:t}),t.then((e=>{o.has(s)&&(o.delete(s),this._post({type:y,jobId:s},e))}),(e=>{o.has(s)&&(o.delete(s),Object(c.m)(e)||this._post({type:y,jobId:s,error:m(e||{message:"Error encountered at method ".concat(r)})}))}))):this._post({type:y,jobId:s},t)}_onOpenPortMessage(e){new R(e.port,{client:this._client})}_onOnMessage(e){var{port:t}=e,r=this._client.on(e.eventType,(e=>{t.postMessage(e)})),n=Object(d.c)(e.port,"message",(e=>{v(e).type===s.CLOSE&&(n.remove(),r.remove(),t.close())}))}_onResponseMessage(e){var t,{jobId:r,error:s,data:n}=e,i=this._outJobs;if(i.has(r)){var a=i.get(r);i.delete(r),null==(t=a.abortHandle)||t.remove(),s?a.reject(l.a.fromJSON(JSON.parse(s))):a.resolve(n)}}_update(e){for(;!e.done&&this._messageQueue.length>0;)this._processMessage(this._messageQueue.shift()),e.madeProgress()}_post(e,t,r){return E(this._port,e,t,r)}}R.kernelInfo={revision:u.b,version:_.d,buildDate:u.a},R.clients=new Map;var j=R,A=r(81),N=r(217),L=A.a.getLogger("esri.core.workers.Connection");var C=class{constructor(){this._clients=new Array,this._clientPromises=new Array,this._clientIdx=0}destroy(){this.close()}get closed(){return!this._clients||!this._clients.length}open(e,t){var r=this;return new Promise(((s,n)=>{var i=!0,a=e=>{Object(c.u)(t.signal),i&&(i=!1,e())};this._clients.length=e.length,this._clientPromises.length=e.length;for(var o=function(i){var o=e[i];Object(c.o)(o)?r._clientPromises[i]=o.then((e=>(r._clients[i]=new j(e,t),a(s),r._clients[i])),(()=>(a(n),null))):(r._clients[i]=new j(o,t),r._clientPromises[i]=Promise.resolve(r._clients[i]),a(s))},l=0;l<e.length;++l)o(l)}))}broadcast(e,t,r){for(var s=new Array(this._clientPromises.length),n=0;n<this._clientPromises.length;++n){var i=this._clientPromises[n];s[n]=i.then((s=>s.invoke(e,t,r)))}return s}close(){for(var e of this._clientPromises)e.then((e=>e.close()));this._clients.length=0,this._clientPromises.length=0}getAvailableClient(){for(var e,t=0;t<this._clients.length;++t){var r=this._clients[t];if(r){if(!r.isBusy())return Promise.resolve(r)}else(e=e||[]).push(this._clientPromises[t])}return e?Promise.race(e):(this._clientIdx=(this._clientIdx+1)%this._clients.length,Promise.resolve(this._clients[this._clientIdx]))}invoke(e,t,r){var s=null;return Array.isArray(r)?(L.warn("invoke()","The transferList parameter is deprecated, use the options object instead"),s={transferList:r}):s=r,this.closed?Promise.reject(new Error("Connection closed")):this.getAvailableClient().then((r=>r.invoke(e,t,s)))}on(e,t){return Promise.all(this._clientPromises).then((()=>Object(N.b)(this._clients.map((r=>r.on(e,t))))))}openPorts(){var e=this;return new Promise((t=>{for(var r=new Array(this._clientPromises.length),s=r.length,n=function(n){e._clientPromises[n].then((e=>{r[n]=e.openPort(),0==--s&&t(r)}))},i=0;i<this._clientPromises.length;++i)n(i)}))}get test(){return{numClients:this._clients.length}}},M=r(159),U=r(83),F=r(148),D=r(162),H=(r(171),{});var J=function(e){var t,r={async:e.async,isDebug:e.isDebug,locale:e.locale,baseUrl:e.baseUrl,has:Object(i.a)({},e.has),map:Object(i.a)({},e.map),packages:e.packages&&e.packages.concat()||[],paths:Object(i.a)({},e.paths)};return e.hasOwnProperty("async")||(r.async=!0),e.hasOwnProperty("isDebug")||(r.isDebug=!1),e.baseUrl||(r.baseUrl=H.baseUrl),null==(t=H.packages)||t.forEach((e=>{!function(e,t){for(var r of e)if(r.name===t.name)return;e.push(t)}(r.packages,e)})),r},W=r(158);class G{constructor(){var e=document.createDocumentFragment();["addEventListener","dispatchEvent","removeEventListener"].forEach((t=>{this[t]=(...r)=>e[t](...r)}))}}var B=W.a.MutationObserver||W.a.WebKitMutationObserver,x=function(){var e;if(W.a.process&&W.a.process.nextTick)e=e=>{W.a.process.nextTick(e)};else if(W.a.Promise)e=e=>{W.a.Promise.resolve().then(e)};else if(B){var t=[],r=document.createElement("div");new B((()=>{for(;t.length>0;)t.shift()()})).observe(r,{attributes:!0}),e=e=>{t.push(e),r.setAttribute("queueStatus","1")}}return e}(),Q=(()=>{var e=W.a.MessageEvent;try{new e("message",{data:null})}catch(t){return(e,t={})=>{var{data:r,bubbles:s=!1,cancelable:n=!1}=t,i=document.createEvent("Event");return i.initEvent(e,s,n),i.data=r,i}}return(t,r)=>new e(t,r)})();var V=class{constructor(){this._dispatcher=new G,this._workerPostMessage({type:s.HANDSHAKE})}terminate(){}get onmessage(){return this._onmessageHandler}set onmessage(e){this._onmessageHandler&&this.removeEventListener("message",this._onmessageHandler),this._onmessageHandler=e,e&&this.addEventListener("message",e)}get onmessageerror(){return this._onmessageerrorHandler}set onmessageerror(e){this._onmessageerrorHandler&&this.removeEventListener("messageerror",this._onmessageerrorHandler),this._onmessageerrorHandler=e,e&&this.addEventListener("messageerror",e)}get onerror(){return this._onerrorHandler}set onerror(e){this._onerrorHandler&&this.removeEventListener("error",this._onerrorHandler),this._onerrorHandler=e,e&&this.addEventListener("error",e)}postMessage(e){x((()=>{this._workerMessageHandler(Q("message",{data:e}))}))}dispatchEvent(e){return this._dispatcher.dispatchEvent(e)}addEventListener(e,t,r){this._dispatcher.addEventListener(e,t,r)}removeEventListener(e,t,r){this._dispatcher.removeEventListener(e,t,r)}_workerPostMessage(e){x((()=>{this.dispatchEvent(Q("message",{data:e}))}))}_workerMessageHandler(e){var t=this;return Object(a.a)((function*(){var r=v(e);if(r&&r.type===s.OPEN){var{modulePath:n,jobId:i}=r,a=yield j.loadWorker(n);a||(a=yield import(n));var o=j.connect(a);t._workerPostMessage({type:s.OPENED,jobId:i,data:o})}}))()}},q=A.a.getLogger("esri.core.workers");o.a.add("esri-workers-arraybuffer-transfer",!Object(o.a)("safari")||Object(o.a)("safari")>=12);var Y,K,{HANDSHAKE:z}=s,X='let globalId=0;const outgoing=new Map,configuration=JSON.parse("{CONFIGURATION}");self.esriConfig=configuration.esriConfig;const workerPath=self.esriConfig.workers.workerPath,HANDSHAKE=0,OPEN=1,OPENED=2,RESPONSE=3,INVOKE=4,ABORT=5;function createAbortError(){const e=new Error("Aborted");return e.name="AbortError",e}function receiveMessage(e){return e&&e.data?"string"==typeof e.data?JSON.parse(e.data):e.data:null}function invokeStaticMessage(e,o,r){const t=r&&r.signal,n=globalId++;return new Promise(((r,i)=>{if(t){if(t.aborted)return i(createAbortError());t.addEventListener("abort",(()=>{outgoing.get(n)&&(outgoing.delete(n),self.postMessage({type:5,jobId:n}),i(createAbortError()))}))}outgoing.set(n,{resolve:r,reject:i}),self.postMessage({type:4,jobId:n,methodName:e,abortable:null!=t,data:o})}))}let workerRevisionChecked=!1;function checkWorkerRevision(e){if(!workerRevisionChecked&&e.kernelInfo){workerRevisionChecked=!0;const{revision:o,buildDate:r,version:t}=configuration.kernelInfo,{revision:n,buildDate:i,version:s}=e.kernelInfo;o!==n&&console.warn(`[esri.core.workers] Version mismatch detected between ArcGIS API for JavaScript and assets:\nAPI version: ${t} [Date: ${r}, Revision: ${o.slice(0,8)}]\nAssets version: ${s} [Date: ${i}, Revision: ${n.slice(0,8)}]`)}}function messageHandler(e){const o=receiveMessage(e);if(!o)return;const r=o.jobId;switch(o.type){case 1:let e;function t(o){const t=e.connect(o);self.postMessage({type:2,jobId:r,data:t},[t])}"function"==typeof define&&define.amd?require([workerPath],(r=>{e=r.default||r,checkWorkerRevision(e),e.loadWorker(o.modulePath).then((e=>e||new Promise((e=>{require([o.modulePath],e)})))).then(t)})):"System"in self&&"function"==typeof System.import?System.import(workerPath).then((r=>(e=r.default,checkWorkerRevision(e),e.loadWorker(o.modulePath)))).then((e=>e||System.import(o.modulePath))).then(t):(self.RemoteClient||importScripts(workerPath),e=self.RemoteClient.default||self.RemoteClient,checkWorkerRevision(e),e.loadWorker(o.modulePath).then(t));break;case 3:if(outgoing.has(r)){const e=outgoing.get(r);outgoing.delete(r),o.error?e.reject(JSON.parse(o.error)):e.resolve(o.data)}}}self.dojoConfig=configuration.loaderConfig,esriConfig.workers.loaderUrl&&(self.importScripts(esriConfig.workers.loaderUrl),"function"==typeof require&&"function"==typeof require.config&&require.config(configuration.loaderConfig)),self.addEventListener("message",messageHandler),self.postMessage({type:0});',$="Failed to create Worker. Fallback to execute module in main thread";function Z(){return(Z=Object(a.a)((function*(){if(!Object(o.a)("esri-workers"))return ee(new V);if(!Y&&!K)try{var e=X.replace('"{CONFIGURATION}"',"'".concat(re(),"'"));Y=URL.createObjectURL(new Blob([e],{type:"text/javascript"}))}catch(r){K=r||{}}var t;if(Y)try{t=new Worker(Y,{name:"esri-worker-"+se++})}catch(r){q.warn($,K),t=new V}else q.warn($,K),t=new V;return ee(t)}))).apply(this,arguments)}function ee(e){return te.apply(this,arguments)}function te(){return(te=Object(a.a)((function*(e){return new Promise((t=>{function r(n){var i=v(n);i&&i.type===z&&(e.removeEventListener("message",r),e.removeEventListener("error",s),t(e))}function s(t){t.preventDefault(),e.removeEventListener("message",r),e.removeEventListener("error",s),q.warn("Failed to create Worker. Fallback to execute module in main thread",t),(e=new V).addEventListener("message",r),e.addEventListener("error",s)}e.addEventListener("message",r),e.addEventListener("error",s)}))}))).apply(this,arguments)}function re(){var e;if(null!=M.a.default){var t=Object(i.a)({},M.a);delete t.default,e=JSON.parse(JSON.stringify(t))}else e=JSON.parse(JSON.stringify(M.a));e.assetsPath=Object(U.z)(e.assetsPath),e.request.interceptors=[],e.log.interceptors=[],e.locale=Object(F.b)(),e.has={"csp-restrictions":Object(o.a)("csp-restrictions"),"esri-2d-debug":!1,"esri-2d-update-debug":Object(o.a)("esri-2d-update-debug"),"esri-2d-query-centroid-enabled":Object(o.a)("esri-2d-query-centroid-enabled"),"featurelayer-pbf":Object(o.a)("featurelayer-pbf"),"featurelayer-snapshot-point-threshold":Object(o.a)("featurelayer-snapshot-point-threshold"),"esri-atomics":Object(o.a)("esri-atomics"),"esri-shared-array-buffer":Object(o.a)("esri-shared-array-buffer"),"esri-tiles-debug":Object(o.a)("esri-tiles-debug"),"esri-workers-arraybuffer-transfer":Object(o.a)("esri-workers-arraybuffer-transfer"),"host-webworker":1},e.workers.loaderUrl&&(e.workers.loaderUrl=Object(U.z)(e.workers.loaderUrl)),e.workers.workerPath?e.workers.workerPath=Object(U.z)(e.workers.workerPath):e.workers.workerPath=Object(U.z)(Object(D.a)("esri/core/workers/RemoteClient.js"));var r=M.a.workers.loaderConfig,s=J({baseUrl:null==r?void 0:r.baseUrl,locale:Object(F.b)(),has:Object(i.a)({"csp-restrictions":Object(o.a)("csp-restrictions"),"dojo-test-sniff":0,"host-webworker":1},null==r?void 0:r.has),map:Object(i.a)({},null==r?void 0:r.map),paths:Object(i.a)({},null==r?void 0:r.paths),packages:(null==r?void 0:r.packages)||[]}),n={version:_.d,buildDate:u.a,revision:u.b};return JSON.stringify({esriConfig:e,loaderConfig:s,kernelInfo:n})}var se=0,ne=A.a.getLogger("esri.core.workers"),{ABORT:ie,INVOKE:ae,OPEN:oe,OPENED:le,RESPONSE:ce}=s;class ue{constructor(e,t){this._outJobs=new Map,this._inJobs=new Map,this.worker=e,this.id=t,e.addEventListener("message",this._onMessage.bind(this)),e.addEventListener("error",(e=>{e.preventDefault(),ne.error(e)}))}static create(e){return Object(a.a)((function*(){var t=yield function(){return Z.apply(this,arguments)}();return new ue(t,e)}))()}terminate(){this.worker.terminate()}open(e,t={}){var r=this;return Object(a.a)((function*(){var{signal:s}=t,n=f();return new Promise(((t,i)=>{var a={resolve:t,reject:i,abortHandle:Object(c.q)(s,(()=>{r._outJobs.delete(n),r._post({type:ie,jobId:n})}))};r._outJobs.set(n,a),r._post({type:oe,jobId:n,modulePath:e})}))}))()}_onMessage(e){var t=v(e);if(t)switch(t.type){case le:this._onOpenedMessage(t);break;case ce:this._onResponseMessage(t);break;case ie:this._onAbortMessage(t);break;case ae:this._onInvokeMessage(t)}}_onAbortMessage(e){var t=this._inJobs,r=e.jobId,s=t.get(r);s&&(s.controller&&s.controller.abort(),t.delete(r))}_onInvokeMessage(e){var t,{methodName:r,jobId:s,data:n,abortable:i}=e,a=i?Object(c.d)():null,o=this._inJobs,l=_.e[r];try{if("function"!=typeof l)throw new TypeError("".concat(r," is not a function"));t=l.call(null,n,{signal:a?a.signal:null})}catch(u){return void this._post({type:ce,jobId:s,error:m(u)})}Object(c.o)(t)?(o.set(s,{controller:a,promise:t}),t.then((e=>{o.has(s)&&(o.delete(s),this._post({type:ce,jobId:s},e))}),(e=>{o.has(s)&&(o.delete(s),e||(e={message:"Error encountered at method"+r}),Object(c.m)(e)||this._post({type:ce,jobId:s,error:m(e||{message:"Error encountered at method ".concat(r)})}))}))):this._post({type:ce,jobId:s},t)}_onOpenedMessage(e){var t,{jobId:r,data:s}=e,n=this._outJobs.get(r);n&&(this._outJobs.delete(r),null==(t=n.abortHandle)||t.remove(),n.resolve(s))}_onResponseMessage(e){var t,{jobId:r,error:s,data:n}=e,i=this._outJobs.get(r);i&&(this._outJobs.delete(r),null==(t=i.abortHandle)||t.remove(),s?i.reject(l.a.fromJSON(JSON.parse(s))):i.resolve(n))}_post(e,t,r){return E(this.worker,e,t,r)}}var he=ue,de=Object(o.a)("esri-workers-debug")?1:Object(o.a)("host-browser")?navigator.hardwareConcurrency-1:0;de||(de=Object(o.a)("safari")&&Object(o.a)("mac")||Object(o.a)("trident")?7:2);var _e=0,ge=[];function pe(){ke()}function be(e,t){return fe(e,{client:t})}function fe(e,t){return me.apply(this,arguments)}function me(){return(me=Object(a.a)((function*(e,t){var r=new C;return yield r.open(e,t),r}))).apply(this,arguments)}function Ee(e){return ve.apply(this,arguments)}function ve(){return(ve=Object(a.a)((function*(e,t={}){if("string"!=typeof e)throw new l.a("workers:undefined-module","modulePath is missing");var r=t.strategy||"distributed";if(Object(o.a)("host-webworker")&&!Object(o.a)("esri-workers")&&(r="local"),"local"===r){var s=yield j.loadWorker(e);s||(s=yield import(e)),Object(c.u)(t.signal);var n=t.client||s;return fe([j.connect(s)],Object(i.a)(Object(i.a)({},t),{},{client:n}))}if(yield ke(),Object(c.u)(t.signal),"dedicated"===r){var a=_e++%de;return fe([yield ge[a].open(e,t)],t)}if(t.maxNumWorkers&&t.maxNumWorkers>0){var u=Math.min(t.maxNumWorkers,de);if(u<de){for(var h=new Array(u),d=0;d<u;++d){var _=_e++%de;h[d]=ge[_].open(e,t)}return fe(h,t)}}return fe(ge.map((r=>r.open(e,t))),t)}))).apply(this,arguments)}var Oe=null;function ke(){return Ie.apply(this,arguments)}function Ie(){return(Ie=Object(a.a)((function*(){if(Oe)return Oe;Object(c.d)();for(var e=[],t=function(t){var r=he.create(t).then((e=>(ge[t]=e,e)));e.push(r)},r=0;r<de;r++)t(r);return Oe=Promise.all(e)}))).apply(this,arguments)}},289:function(e,t,r){"use strict";r.d(t,"a",(function(){return T})),r.d(t,"b",(function(){return s}));var s,n,i=r(82),a=(r(80),r(89)),o=r(81),l=(r(88),r(85)),c=r(84),u=(r(83),r(86),r(87),r(343)),h=r(176),d=r(94),_=r(97),g=r(108),p=r(323),b=r(331),f=o.a.getLogger("esri.views.support.Scheduler");(n=s||(s={})).REMOTE_CLIENT="worker messages",n.SLIDE="slide",n.STAGE="stage",n.STREAM_DATA_LOADER="stream loader",n.ELEVATION_QUERY="elevation query",n.TERRAIN_SURFACE="terrain",n.SURFACE_GEOMETRY_UPDATES="surface geometry updates",n.GRAPHICS_CORE="Graphics3D",n.I3S_CONTROLLER="I3S",n.POINT_CLOUD_LAYER="point cloud",n.FEATURE_TILE_FETCHER="feature fetcher",n.LABELER="labeler",n.GRAPHICS_DECONFLICTOR="graphics deconflictor",n.FILTER_VISIBILITY="Graphics3D filter visibility",n.FEATURE_QUERY_ENGINE="feature query",n.SCALE_VISIBILITY="Graphics3D scale visibility",n.FRUSTUM_VISIBILITY="Graphics3D frustum visibility",n.POINT_OF_INTEREST_FREQUENT="POI frequent",n.POINT_OF_INTEREST_INFREQUENT="POI infrequent",n.FEATURE_TILE_TREE="feature tile tree",n.FEATURE_TILE_TREE_ACTIVE="fast feature tile tree",n.ELEVATION_ALIGNMENT="elevation alignment",n.TEXT_TEXTURE_ATLAS="text texture atlas",n.TEXTURE_UNLOAD="texture unload",n.OVERLAY_MANAGER="overlay manager",n.LINE_OF_SIGHT_TOOL="line of sight tool",n.LINE_OF_SIGHT_TOOL_INTERACTIVE="interactive line of sight tool",n.ELEVATION_PROFILE="elevation profile",n.SNAPPING="snapping",n[n.TEST_PRIO=1]="TEST_PRIO";var m={[s.REMOTE_CLIENT]:0,[s.SLIDE]:0,[s.STREAM_DATA_LOADER]:0,[s.ELEVATION_QUERY]:0,[s.STAGE]:1,[s.TERRAIN_SURFACE]:1,[s.SURFACE_GEOMETRY_UPDATES]:1,[s.GRAPHICS_CORE]:2,[s.I3S_CONTROLLER]:2,[s.POINT_CLOUD_LAYER]:2,[s.FEATURE_TILE_FETCHER]:2,[s.LABELER]:8,[s.GRAPHICS_DECONFLICTOR]:4,[s.FILTER_VISIBILITY]:4,[s.FEATURE_QUERY_ENGINE]:8,[s.SCALE_VISIBILITY]:4,[s.FRUSTUM_VISIBILITY]:4,[s.POINT_OF_INTEREST_FREQUENT]:6,[s.POINT_OF_INTEREST_INFREQUENT]:30,[s.FEATURE_TILE_TREE]:16,[s.FEATURE_TILE_TREE_ACTIVE]:0,[s.ELEVATION_ALIGNMENT]:12,[s.TEXT_TEXTURE_ATLAS]:12,[s.TEXTURE_UNLOAD]:12,[s.OVERLAY_MANAGER]:12,[s.LINE_OF_SIGHT_TOOL]:16,[s.LINE_OF_SIGHT_TOOL_INTERACTIVE]:0,[s.SNAPPING]:0};function E(e){return e in m?m[e]:"number"==typeof e?e:1}var v,O,k=1e3/30;!function(e){var t=class extends _.a{constructor(e){for(var t in super(e),this.updating=!0,this.performanceInfo={total:new u.a("total"),tasks:new Array},this._budget=null,this._state=1,this._tasks=new h.a,this._runQueue=new h.a,this._load=0,this._idleStateCallbacks=new h.a,this._idleUpdatesStartFired=!1,this._maxReschedule=y,this._forceTask=!1,this._debug=!1,this._debugHandle=Object(g.a)(b.a,"SCHEDULER_LOG_SLOW_TASKS",(e=>this._debug=e)),this._budget=new n(e.nowFunc),S.length=0,s)w.set(s[t],this.performanceInfo.tasks.length),this.performanceInfo.tasks.push(new u.a(s[t])),S.push(0);var r,i=this;this._test={get state(){return Object(a.j)(r)?i._state:r},set state(e){r=e},FRAME_SAFETY_BUDGET:6.5,INTERACTING_BUDGET:k,IDLE_BUDGET:100,get budget(){return i._budget.budget},usedBudget:0,updateTask:e=>this._updateTask(e),getState:e=>this._getState(e),getRuntime:e=>this._getRuntime(e),resetRuntimes:()=>this._resetRuntimes(),getRunning:()=>this._getRunning()}}destroy(){this._debugHandle&&this._debugHandle.remove()}registerTask(e,t,s){var n=E(e),i=new r(this,e,t,s,n);return this._tasks.push(i),i}registerIdleStateCallbacks(e,t){var r={idleBegin:e,idleEnd:t};this._idleStateCallbacks.push(r),2===this.state&&this._idleUpdatesStartFired&&r.idleBegin();var s=this;return{remove:()=>this._removeIdleStateCallbacks(r),set idleBegin(e){s._idleUpdatesStartFired&&(r.idleEnd(),2===s._state&&e()),r.idleBegin=e},set idleEnd(e){r.idleEnd=e}}}get now(){return this.nowFunc()}get load(){return this._load}set state(e){this._state!==e&&(this._state=e,2!==this.state&&this._idleUpdatesStartFired&&(this._idleUpdatesStartFired=!1,this._idleStateCallbacks.forAll((e=>e.idleEnd()))))}get state(){return Object(a.j)(this._test.state)?this._state:this._test.state}updateBudget(e){this._test.usedBudget=0;var t=6.5,r=e.frameDuration,s=1;switch(this.state){case 2:t=0,r=Math.max(100,e.frameDuration),s=30;break;case 1:r=Math.max(k,e.frameDuration)}return r-=e.elapsedFrameTime+t,2!==this.state&&r<1&&!this._forceTask?(this._forceTask=!0,!1):(r=Math.max(r,s),this._budget.reset(r,this.state),this._maxReschedule=y,this._updateLoad(),this._schedule())}frame(){switch(this._forceTask=!1,this.state){case 2:this._idleUpdatesStartFired||(this._idleUpdatesStartFired=!0,this._idleStateCallbacks.forAll((e=>e.idleBegin()))),this._runIdle();break;case 1:this._runInteracting();break;default:this._runAnimating()}this._test.usedBudget=this._budget.elapsed}_removeIdleStateCallbacks(e){this._idleUpdatesStartFired&&e.idleEnd(),this._idleStateCallbacks.removeUnordered(e)}removeTask(e){this._tasks.removeUnordered(e),this._runQueue.removeUnordered(e)}_updateTask(e){this._tasks.forAll((t=>{t.name===e&&t.setPriority(e)}))}_getState(e){if(this._runQueue.some((t=>t.name===e)))return O.SCHEDULED;var t=O.IDLE;return this._tasks.forAll((r=>{r.name===e&&r.needsUpdate&&(r.schedulePriority<=1?t=O.READY:t!==O.READY&&(t=O.WAITING))})),t}_getRuntime(e){var t=0;return this._tasks.forAll((r=>{r.name===e&&(t+=r.runtime)})),t}_resetRuntimes(){this._tasks.forAll((e=>e.runtime=0))}_getRunning(){var e=new Map;if(this._tasks.forAll((t=>{t.needsUpdate&&e.set(t.name,(e.get(t.name)||0)+1)})),0===e.size)return null;var t="";return e.forEach(((e,r)=>{t+=e>1?" ".concat(e,"x ").concat(r):" ".concat(r)})),t}_runIdle(){this._run()}_runInteracting(){this._run()}_runAnimating(){this._run()}_updateLoad(){var e=this._tasks.reduce(((e,t)=>t.needsUpdate?++e:e),0);this._load=.9*this._load+e*(1-.9)}_schedule(){var e=this;if(this._maxReschedule<=0)return!1;var t=function(){var t=!1,r=0;if(e._tasks.forAll((s=>{if(s.needsUpdate&&0!==s.schedulePriority&&0!==s.priority)switch(t=!0,r=Math.max(r,s.priority),s.schedulePriority){case 1:s.schedulePriority=0,e._runQueue.push(s);break;default:--s.schedulePriority}})),!t)return{v:(e.updating=!1,!1)};e._maxReschedule===y&&(e._maxReschedule=r),--e._maxReschedule};for(this._runQueue.filterInPlace((e=>!!e.needsUpdate||(e.schedulePriority=e.priority,!1))),this._tasks.forAll((e=>{0===e.priority&&e.needsUpdate&&!this._runQueue.some((t=>t===e))&&this._runQueue.unshift(e)}));0===this._runQueue.length;){var r=t();if("object"===typeof r)return r.v}return this.updating=!0,!0}_run(){for(var e=this._budget.now(),t=0;t<S.length;++t)S[t]=0;do{for(;this._runQueue.length>0;){var r=this._budget.now(),s=this._runQueue.pop();this._budget.resetProgress();try{s.update(this._budget)}catch(i){f.error('Exception in task "'.concat(s.name,'"'),i)}s.schedulePriority=s.priority;var n=this._budget.now()-r;if(s.runtime+=n,S[w.get(s.task)]+=n,this._debug&&this._budget.elapsed>2*this._budget.budget&&console.log("Task",s.name,"used",this._budget.elapsed,"of max",this._budget.budget,"ms"),this._budget.remaining<=0)return void this._recordFrameTaskTimes(S,this._budget.now()-e)}}while(this._schedule());this._recordFrameTaskTimes(S,this._budget.now()-e)}_recordFrameTaskTimes(e,t){for(var r=0;r<e.length;++r)this.performanceInfo.tasks[r].record(e[r]);this.performanceInfo.total.record(t)}get test(){return this._test}};Object(i.a)([Object(l.b)()],t.prototype,"updating",void 0),Object(i.a)([Object(l.b)()],t.prototype,"nowFunc",void 0),t=Object(i.a)([Object(c.a)("esri.views.support.Scheduler")],t),e.Scheduler=t;var r=class extends _.a{constructor(e,t,r,s,n){super({}),this._scheduler=e,this.name=t,this.update=r,this._needsUpdateCB=s,this._priority=n,this.runtime=0,this._queue=new p.a,this.updating=!1,this.schedulePriority=this._priority}normalizeCtorArgs(){return{}}remove(){this.processQueue(I),this._scheduler.removeTask(this),this.schedule=T.schedule,this.reschedule=T.reschedule}get priority(){return this._priority}setPriority(e){this.name=e;var t=E(e);0!==this._priority&&0===this.schedulePriority||(this.schedulePriority=t),this._priority=t}get task(){return this.name}set task(e){this.setPriority(e)}get needsUpdate(){return this.updating||this._needsUpdateCB()}schedule(e,t){return this.updating=!0,this._queue.push(e,t)}reschedule(e,t){return this.updating=!0,this._queue.unshift(e,t)}processQueue(e){for(;!e.done&&this._queue.process();)e.madeProgress();this.updating=this._queue.length>0}};Object(i.a)([Object(l.b)()],r.prototype,"updating",void 0),r=Object(i.a)([Object(c.a)("esri.views.support.SchedulerTask")],r);class n{constructor(e){this.now=e,this._begin=0,this._budget=0,this._state=2,this._didWork=!1,this._enabled=!0}run(e){return!this.done&&(!0===e()&&(this._didWork=!0),!0)}get done(){return this._didWork&&this.elapsed>=this._budget&&this._enabled}get budget(){return this._budget}madeProgress(){this._didWork=!0}get state(){return this._state}get enabled(){return this._enabled}set enabled(e){this._enabled=e}reset(e,t){this._begin=this.now(),this._budget=e,this._state=t,this._didWork=!1}get remaining(){return Math.max(this._budget-this.elapsed,0)}get elapsed(){return this.now()-this._begin}resetProgress(){this._didWork=!1}get hasProgressed(){return this._didWork}}e.Budget=n}(v||(v={})),function(e){e.SCHEDULED="s",e.READY="r",e.WAITING="w",e.IDLE="i"}(O||(O={}));var I=(()=>{var e=new v.Budget((()=>performance.now()));return e.enabled=!1,e})();var T=new class{remove(){}processQueue(){}schedule(e){return Object(d.w)(e())}reschedule(e){return Object(d.w)(e())}},y=Number.MAX_SAFE_INTEGER,w=new Map,S=new Array},323:function(e,t,r){"use strict";var s=r(94);class n{constructor(e,t,r,s){this.resolve=e,this.reject=t,this.callback=r,this.signal=s}}t.a=class{constructor(){this._tasks=new Array}get length(){return this._tasks.length}push(e,t){return new Promise(((r,s)=>this._tasks.push(new n(r,s,e,t))))}unshift(e,t){return new Promise(((r,s)=>this._tasks.unshift(new n(r,s,e,t))))}process(){if(0===this._tasks.length)return!1;var e=this._tasks.shift();try{Object(s.u)(e.signal);var t=e.callback();t&&"object"==typeof t&&"then"in t&&"function"==typeof t.then?t.then(e.resolve,e.reject):e.resolve(t)}catch(r){e.reject(r)}return!0}cancelAll(){var e=Object(s.e)();for(var t of this._tasks)t.reject(e);this._tasks.length=0}}},331:function(e,t,r){"use strict";var s=r(82),n=(r(80),r(81),r(88),r(85)),i=r(84),a=(r(83),r(86),r(87),r(97)),o=class extends a.a{constructor(){super(...arguments),this.SCHEDULER_LOG_SLOW_TASKS=!1,this.FEATURE_SERVICE_SNAPPING_SOURCE_TILE_TREE_SHOW_TILES=!1}};Object(s.a)([Object(n.b)()],o.prototype,"SCHEDULER_LOG_SLOW_TASKS",void 0),Object(s.a)([Object(n.b)()],o.prototype,"FEATURE_SERVICE_SNAPPING_SOURCE_TILE_TREE_SHOW_TILES",void 0);var l=new(o=Object(s.a)([Object(i.a)("esri.views.support.DebugFlags")],o));t.a=l}}]);
//# sourceMappingURL=12.f190544f.chunk.js.map