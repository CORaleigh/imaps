(this.webpackJsonpimaps=this.webpackJsonpimaps||[]).push([[108,58,178,243],{105:function(e,t,n){"use strict";n.d(t,"a",(function(){return G})),n.d(t,"b",(function(){return Y})),n.d(t,"c",(function(){return g})),n.d(t,"d",(function(){return w})),n.d(t,"e",(function(){return x})),n.d(t,"f",(function(){return m})),n.d(t,"g",(function(){return b})),n.d(t,"h",(function(){return S})),n.d(t,"i",(function(){return I})),n.d(t,"j",(function(){return M})),n.d(t,"k",(function(){return ee})),n.d(t,"l",(function(){return p})),n.d(t,"m",(function(){return u})),n.d(t,"n",(function(){return h})),n.d(t,"o",(function(){return O})),n.d(t,"p",(function(){return _})),n.d(t,"q",(function(){return F})),n.d(t,"r",(function(){return T})),n.d(t,"s",(function(){return H})),n.d(t,"t",(function(){return L})),n.d(t,"u",(function(){return V})),n.d(t,"v",(function(){return q})),n.d(t,"w",(function(){return B})),n.d(t,"x",(function(){return U})),n.d(t,"y",(function(){return y})),n.d(t,"z",(function(){return X})),n.d(t,"A",(function(){return K}));var i=n(88),r=n(85),s=n(125),o=n(229),a=n(124);const l=["field","field2","field3","normalizationField","rotationInfo.field","proportionalSymbolInfo.field","proportionalSymbolInfo.normalizationField","colorInfo.field","colorInfo.normalizationField"],c=["field","normalizationField"];function u(e,t){if(null!=e&&null!=t)for(const n of Array.isArray(e)?e:[e])if(d(l,n,t),"visualVariables"in n&&n.visualVariables)for(const e of n.visualVariables)d(c,e,t)}function d(e,t,n){if(e)for(const i of e){const e=Object(s.b)(i,t),r=e&&"function"!=typeof e&&n.get(e);r&&Object(s.c)(i,r.name,t)}}function h(e,t){if(null!=e&&null!=t&&t.fields.length)if("startField"in e){const n=t.get(e.startField),i=t.get(e.endField);e.startField=n&&n.name||null,e.endField=i&&i.name||null}else{const n=t.get(e.startTimeField),i=t.get(e.endTimeField);e.startTimeField=n&&n.name||null,e.endTimeField=i&&i.name||null}}const f=new Set;function p(e,t){return e&&t?(f.clear(),b(f,e,t),Array.from(f).sort()):[]}function b(e,t,n){var i;if(n)if(null!=t&&null!=(i=t.fields)&&i.length)if(n.includes("*"))for(const{name:r}of t.fields)e.add(r);else for(const r of n)m(e,t,r);else{if(n.includes("*"))return e.clear(),void e.add("*");for(const t of n)e.add(t)}}function m(e,t,n){if("string"==typeof n)if(t){const i=t.get(n);i&&e.add(i.name)}else e.add(n)}function y(e,t){return Object(r.k)(t)||Object(r.k)(e)?[]:t.includes("*")?e.fields.map((e=>e.name)):t}async function g(e,t,n){var i;if(!n)return;const{arcadeUtils:r}=await Object(a.e)(),s=r.extractFieldNames(n,null==t||null==(i=t.fields)?void 0:i.map((e=>e.name)));for(const o of s)m(e,t,o)}async function j(e,t,r){if(r&&"1=1"!==r){const s=(await Promise.all([n.e(11),n.e(243)]).then(n.bind(null,293))).WhereClause.create(r,t);if(!s.isStandardized)throw new i.a("fieldUtils:collectFilterFields","Where clause is not standardized");b(e,t,s.fieldNames)}}function O({displayField:e,fields:t}){return e||(t&&t.length?v(t,"name-or-title")||v(t,"unique-identifier")||v(t,"type-or-category")||function(e){for(const t of e){if(!t||!t.name)continue;const e=t.name.toLowerCase();if(e.indexOf("name")>-1||e.indexOf("title")>-1)return t.name}return null}(t):null)}function v(e,t){for(const n of e)if(n&&n.valueType&&n.valueType===t)return n.name;return null}async function w(e,t){if(!t)return;const n=Object(s.b)("elevationInfo.featureExpressionInfo",t);return n?n.collectRequiredFields(e,t.fieldsIndex):void 0}async function x(e,t,n){var i,r;if(!t||!n||"cluster"!==n.type)return;const s=[];if(null!=(i=n.popupTemplate)&&i.expressionInfos&&s.push(...n.popupTemplate.expressionInfos.map((n=>g(e,t.fieldsIndex,n.expression)))),Array.isArray(null==(r=n.popupTemplate)?void 0:r.content)){const i=n.popupTemplate.content;for(const n of i)"expression"===n.type&&n.expressionInfo&&s.push(g(e,t.fieldsIndex,n.expressionInfo.expression))}n.fields&&s.push(...n.fields.map((n=>async function(e,t,n){n.outStatistic.onStatisticValueExpression?g(e,t,n.outStatistic.onStatisticValueExpression):e.add(n.outStatistic.onStatisticField)}(e,t.fieldsIndex,n)))),await Promise.all(s)}async function S(e,t,n){t&&(t.timeInfo&&Object(r.l)(n)&&n.timeExtent&&b(e,t.fieldsIndex,[t.timeInfo.startField,t.timeInfo.endField]),t.floorInfo&&b(e,t.fieldsIndex,[t.floorInfo.floorField]),Object(r.l)(n)&&Object(r.l)(n.where)&&await j(e,t.fieldsIndex,n.where))}async function M(e,t,n){t&&n&&await Promise.all(n.map((n=>async function(e,t,n){t&&n&&(n.valueExpression?await g(e,t.fieldsIndex,n.valueExpression):n.field&&m(e,t.fieldsIndex,n.field))}(e,t,n))))}function _(e){if(!e)return[];const t="editFieldsInfo"in e&&e.editFieldsInfo;return t?p(e.fieldsIndex,[t&&t.creatorField,t&&t.creationDateField,t&&t.editorField,t&&t.editDateField]):[]}function F(e){if(!e)return[];const t=e.geometryFieldsInfo;return t?p(e.fieldsIndex,[t.shapeAreaField,t.shapeLengthField]):[]}async function I(e,t){const{labelingInfo:n,fieldsIndex:i}=t;n&&n.length&&await Promise.all(n.map((t=>async function(e,t,n){if(!n)return;const i=n.getLabelExpression(),r=n.where;if("arcade"===i.type)await g(e,t,i.expression);else{const n=i.expression.match(/{[^}]*}/g);n&&n.forEach((n=>{m(e,t,n.slice(1,-1))}))}await j(e,t,r)}(e,i,t))))}function T(e){const t=e.defaultValue;return void 0!==t&&D(e,t)?t:e.nullable?null:void 0}function R(e){return"number"==typeof e&&!isNaN(e)&&isFinite(e)}function C(e){return null===e||R(e)}const P="isInteger"in Number?Number.isInteger:e=>"number"==typeof e&&isFinite(e)&&Math.floor(e)===e;function E(e){return null===e||P(e)}function N(e){return null!=e&&"string"==typeof e}function k(e){return null===e||N(e)}function z(){return!0}function D(e,t){let n;switch(e.type){case"date":case"integer":case"long":case"small-integer":case"esriFieldTypeDate":case"esriFieldTypeInteger":case"esriFieldTypeLong":case"esriFieldTypeSmallInteger":n=e.nullable?E:P;break;case"double":case"single":case"esriFieldTypeSingle":case"esriFieldTypeDouble":n=e.nullable?C:R;break;case"string":case"esriFieldTypeString":n=e.nullable?k:N;break;default:n=z}return 1===arguments.length?n:n(t)}const B=["integer","small-integer","single","double"],A=new Set([...B,"esriFieldTypeInteger","esriFieldTypeSmallInteger","esriFieldTypeSingle","esriFieldTypeDouble"]);function V(e){return null!=e&&A.has(e.type)}function q(e){return null!=e&&("string"===e.type||"esriFieldTypeString"===e.type)}function L(e){return null!=e&&("date"===e.type||"esriFieldTypeDate"===e.type)}var G,Y;function U(e){return null==e||"number"==typeof e&&isNaN(e)?null:e}function X(e,t){return e.nullable&&null===t?null:V(e)&&!function(e,t){const n="string"==typeof e?Z(e):e;return!!n&&(n.isInteger?P(t)&&t>=n.min&&t<=n.max:t>=n.min&&t<=n.max)}(e.type,Number(t))?G.OUT_OF_RANGE:D(e,t)?e.domain?Object(o.c)(e.domain,t):null:Y.INVALID_TYPE}function H(e){return Object(o.b)(e.domain)||(V(e)?Z(e.type):void 0)}function Z(e){switch(e){case"esriFieldTypeSmallInteger":case"small-integer":return J;case"esriFieldTypeInteger":case"integer":return $;case"esriFieldTypeSingle":case"single":return Q;case"esriFieldTypeDouble":case"double":return W}}(G||(G={})).OUT_OF_RANGE="numeric-range-validation-error::out-of-range",function(e){e.INVALID_TYPE="type-validation-error::invalid-type"}(Y||(Y={}));const J={min:-32768,max:32767,isInteger:!0},$={min:-2147483648,max:2147483647,isInteger:!0},Q={min:-34e37,max:12e37,isInteger:!1},W={min:-Number.MAX_VALUE,max:Number.MAX_VALUE,isInteger:!1};function K(e,t,n){switch(e){case o.a.INVALID_CODED_VALUE:return`Value ${n} is not in the coded domain - field: ${t.name}, domain: ${JSON.stringify(t.domain)}`;case o.a.VALUE_OUT_OF_RANGE:return`Value ${n} is out of the range of valid values - field: ${t.name}, domain: ${JSON.stringify(t.domain)}`;case Y.INVALID_TYPE:return`Value ${n} is not a valid value for the field type - field: ${t.name}, type: ${t.type}, nullable: ${t.nullable}`;case G.OUT_OF_RANGE:{const{min:e,max:i}=Z(t.type);return`Value ${n} is out of range for the number type - field: ${t.name}, type: ${t.type}, value range is ${e} to ${i}`}}}function ee(e,t){return!function(e,t,n){if(!t||!t.attributes||!e){if(Object(r.l)(n))for(const t of e)n.add(t);return!0}const i=t.attributes;let s=!1;for(const o of e)if(!(o in i)){if(s=!0,!Object(r.l)(n))break;n.add(o)}return s}(e,t,null)}},118:function(e,t,n){"use strict";n.d(t,"a",(function(){return I})),n.d(t,"b",(function(){return p})),n.d(t,"c",(function(){return y})),n.d(t,"d",(function(){return g})),n.d(t,"e",(function(){return o})),n.d(t,"f",(function(){return S})),n.d(t,"g",(function(){return j})),n.d(t,"h",(function(){return O})),n.d(t,"i",(function(){return w})),n.d(t,"j",(function(){return v})),n.d(t,"k",(function(){return a})),n.d(t,"l",(function(){return s})),n.d(t,"m",(function(){return _})),n.d(t,"n",(function(){return h})),n.d(t,"o",(function(){return d})),n.d(t,"p",(function(){return f})),n.d(t,"q",(function(){return c})),n.d(t,"r",(function(){return l})),n.d(t,"s",(function(){return m})),n.d(t,"t",(function(){return x})),n.d(t,"u",(function(){return M})),n.d(t,"v",(function(){return u})),n.d(t,"w",(function(){return b}));n(82),n(113);var i=n(85),r=n(96);function s(e=T){return[e[0],e[1],e[2],e[3]]}function o(e){return[e[0],e[1],e[2],e[3]]}function a(e,t){return e!==t&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3]),e}function l(e,t,n,i,r=s()){return r[0]=e,r[1]=t,r[2]=n,r[3]=i,r}function c(e,t=s()){return t[0]=e.xmin,t[1]=e.ymin,t[2]=e.xmax,t[3]=e.ymax,t}function u(e,t){return new r.a({xmin:e[0],ymin:e[1],xmax:e[2],ymax:e[3],spatialReference:t})}function d(e,t){t[0]<e[0]&&(e[0]=t[0]),t[0]>e[2]&&(e[2]=t[0]),t[1]<e[1]&&(e[1]=t[1]),t[1]>e[3]&&(e[3]=t[1])}function h(e,t,n){if(Object(i.k)(t))a(n,e);else if("length"in t)F(t)?(n[0]=Math.min(e[0],t[0]),n[1]=Math.min(e[1],t[1]),n[2]=Math.max(e[2],t[2]),n[3]=Math.max(e[3],t[3])):2!==t.length&&3!==t.length||(n[0]=Math.min(e[0],t[0]),n[1]=Math.min(e[1],t[1]),n[2]=Math.max(e[2],t[0]),n[3]=Math.max(e[3],t[1]));else switch(t.type){case"extent":n[0]=Math.min(e[0],t.xmin),n[1]=Math.min(e[1],t.ymin),n[2]=Math.max(e[2],t.xmax),n[3]=Math.max(e[3],t.ymax);break;case"point":n[0]=Math.min(e[0],t.x),n[1]=Math.min(e[1],t.y),n[2]=Math.max(e[2],t.x),n[3]=Math.max(e[3],t.y)}}function f(e,t,n=e){const i=t.length;let r=e[0],s=e[1],o=e[2],a=e[3];for(let l=0;l<i;l++){const e=t[l];r=Math.min(r,e[0]),s=Math.min(s,e[1]),o=Math.max(o,e[0]),a=Math.max(a,e[1])}return n[0]=r,n[1]=s,n[2]=o,n[3]=a,n}function p(e){for(let t=0;t<4;t++)if(!isFinite(e[t]))return!1;return!0}function b(e){return Object(i.k)(e)||e[0]>=e[2]?0:e[2]-e[0]}function m(e){return e[1]>=e[3]?0:e[3]-e[1]}function y(e){return b(e)*m(e)}function g(e,t=[0,0]){return t[0]=(e[0]+e[2])/2,t[1]=(e[1]+e[3])/2,t}function j(e,t){return v(e,t[0],t[1])}function O(e,t){return v(e,t.x,t.y)}function v(e,t,n){return t>=e[0]&&n>=e[1]&&t<=e[2]&&n<=e[3]}function w(e,t,n){return t[0]>=e[0]-n&&t[1]>=e[1]-n&&t[0]<=e[2]+n&&t[1]<=e[3]+n}function x(e,t){return Math.max(t[0],e[0])<=Math.min(t[2],e[2])&&Math.max(t[1],e[1])<=Math.min(t[3],e[3])}function S(e,t){return t[0]>=e[0]&&t[2]<=e[2]&&t[1]>=e[1]&&t[3]<=e[3]}function M(e,t,n,i=e){return i[0]=e[0]+t,i[1]=e[1]+n,i[2]=e[2]+t,i[3]=e[3]+n,i}function _(e){return e?a(e,I):s(I)}function F(e){return null!=e&&4===e.length}const I=[1/0,1/0,-1/0,-1/0],T=[0,0,0,0]},119:function(e,t,n){"use strict";n.d(t,"a",(function(){return b}));var i,r=n(79),s=n(86),o=n(85),a=n(153),l=n(81),c=(n(84),n(82),n(83),n(93)),u=n(80),d=n(92);let h=i=class extends s.a{constructor(e){super(e),this.end=null,this.start=null}static get allTime(){return f}static get empty(){return p}readEnd(e,t){return null!=t.end?new Date(t.end):null}writeEnd(e,t){t.end=e?e.getTime():null}get isAllTime(){return this.equals(i.allTime)}get isEmpty(){return this.equals(i.empty)}readStart(e,t){return null!=t.start?new Date(t.start):null}writeStart(e,t){t.start=e?e.getTime():null}clone(){return new i({end:this.end,start:this.start})}equals(e){if(!e)return!1;const t=Object(o.l)(this.start)?this.start.getTime():this.start,n=Object(o.l)(this.end)?this.end.getTime():this.end,i=Object(o.l)(e.start)?e.start.getTime():e.start,r=Object(o.l)(e.end)?e.end.getTime():e.end;return t===i&&n===r}expandTo(e){if(this.isEmpty||this.isAllTime)return this.clone();const t=Object(o.b)(this.start,(t=>Object(a.c)(t,e))),n=Object(o.b)(this.end,(t=>Object(a.b)(Object(a.c)(t,e),1,e)));return new i({start:t,end:n})}intersection(e){if(!e)return this.clone();if(this.isEmpty||e.isEmpty)return i.empty;if(this.isAllTime)return e.clone();if(e.isAllTime)return this.clone();const t=Object(o.o)(this.start,-1/0,(e=>e.getTime())),n=Object(o.o)(this.end,1/0,(e=>e.getTime())),r=Object(o.o)(e.start,-1/0,(e=>e.getTime())),s=Object(o.o)(e.end,1/0,(e=>e.getTime()));let a,l;if(r>=t&&r<=n?a=r:t>=r&&t<=s&&(a=t),n>=r&&n<=s?l=n:s>=t&&s<=n&&(l=s),!isNaN(a)&&!isNaN(l)){const e=new i;return e.start=a===-1/0?null:new Date(a),e.end=l===1/0?null:new Date(l),e}return i.empty}offset(e,t){if(this.isEmpty||this.isAllTime)return this.clone();const n=new i,{start:r,end:s}=this;return Object(o.l)(r)&&(n.start=Object(a.b)(r,e,t)),Object(o.l)(s)&&(n.end=Object(a.b)(s,e,t)),n}union(e){if(!e||e.isEmpty)return this.clone();if(this.isEmpty)return e.clone();if(this.isAllTime||e.isAllTime)return f.clone();const t=Object(o.l)(this.start)&&Object(o.l)(e.start)?new Date(Math.min(this.start.getTime(),e.start.getTime())):null,n=Object(o.l)(this.end)&&Object(o.l)(e.end)?new Date(Math.max(this.end.getTime(),e.end.getTime())):null;return new i({start:t,end:n})}};Object(r.a)([Object(l.b)({type:Date,json:{write:{allowNull:!0}}})],h.prototype,"end",void 0),Object(r.a)([Object(c.a)("end")],h.prototype,"readEnd",null),Object(r.a)([Object(d.a)("end")],h.prototype,"writeEnd",null),Object(r.a)([Object(l.b)({readOnly:!0,json:{read:!1}})],h.prototype,"isAllTime",null),Object(r.a)([Object(l.b)({readOnly:!0,json:{read:!1}})],h.prototype,"isEmpty",null),Object(r.a)([Object(l.b)({type:Date,json:{write:{allowNull:!0}}})],h.prototype,"start",void 0),Object(r.a)([Object(c.a)("start")],h.prototype,"readStart",null),Object(r.a)([Object(d.a)("start")],h.prototype,"writeStart",null),h=i=Object(r.a)([Object(u.a)("esri.TimeExtent")],h);const f=new h,p=new h({start:void 0,end:void 0}),b=h},123:function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var i=n(79),r=n(90),s=n(86),o=n(81),a=(n(84),n(82),n(83),n(94)),l=n(80);const c=new r.a({inherited:"inherited",codedValue:"coded-value",range:"range"});let u=class extends s.a{constructor(e){super(e),this.name=null,this.type=null}};Object(i.a)([Object(o.b)({type:String,json:{write:!0}})],u.prototype,"name",void 0),Object(i.a)([Object(a.a)(c)],u.prototype,"type",void 0),u=Object(i.a)([Object(l.a)("esri.layers.support.Domain")],u);const d=u},130:function(e,t,n){"use strict";n.d(t,"a",(function(){return u})),n.d(t,"b",(function(){return c}));var i=n(79),r=n(99),s=n(122),o=n(81),a=n(80),l=n(271);const c=e=>{let t=class extends e{destroy(){var e,t;this.destroyed||(null==(e=this._get("handles"))||e.destroy(),null==(t=this._get("updatingHandles"))||t.destroy())}get handles(){return this._get("handles")||new s.a}get updatingHandles(){return this._get("updatingHandles")||new l.a}};return Object(i.a)([Object(o.b)({readOnly:!0})],t.prototype,"handles",null),Object(i.a)([Object(o.b)({readOnly:!0})],t.prototype,"updatingHandles",null),t=Object(i.a)([Object(a.a)("esri.core.HandleOwner")],t),t};let u=class extends(c(r.a)){};u=Object(i.a)([Object(a.a)("esri.core.HandleOwner")],u)},134:function(e,t,n){"use strict";n.d(t,"a",(function(){return _}));var i,r=n(79),s=n(98),o=n(119),a=n(90),l=n(86),c=n(89),u=n(85),d=n(81),h=n(104),f=n(94),p=n(80),b=n(92),m=n(83),y=n(97),g=n(193),j=n(321),O=n(295),v=n(95),w=n(109);const x=new a.a({esriSpatialRelIntersects:"intersects",esriSpatialRelContains:"contains",esriSpatialRelCrosses:"crosses",esriSpatialRelDisjoint:"disjoint",esriSpatialRelEnvelopeIntersects:"envelope-intersects",esriSpatialRelIndexIntersects:"index-intersects",esriSpatialRelOverlaps:"overlaps",esriSpatialRelTouches:"touches",esriSpatialRelWithin:"within",esriSpatialRelRelation:"relation"}),S=new a.a({esriSRUnit_Meter:"meters",esriSRUnit_Kilometer:"kilometers",esriSRUnit_Foot:"feet",esriSRUnit_StatuteMile:"miles",esriSRUnit_NauticalMile:"nautical-miles",esriSRUnit_USNauticalMile:"us-nautical-miles"});let M=i=class extends l.a{constructor(e){super(e),this.aggregateIds=null,this.cacheHint=void 0,this.datumTransformation=null,this.distance=void 0,this.dynamicDataSource=void 0,this.formatOf3DObjects=null,this.gdbVersion=null,this.geometry=null,this.geometryPrecision=void 0,this.groupByFieldsForStatistics=null,this.having=null,this.historicMoment=null,this.maxAllowableOffset=void 0,this.maxRecordCountFactor=1,this.multipatchOption=null,this.num=void 0,this.objectIds=null,this.orderByFields=null,this.outFields=null,this.outSpatialReference=null,this.outStatistics=null,this.parameterValues=null,this.pixelSize=null,this.quantizationParameters=null,this.rangeValues=null,this.relationParameter=null,this.resultType=null,this.returnCentroid=!1,this.returnDistinctValues=!1,this.returnExceededLimitFeatures=!0,this.returnGeometry=!1,this.returnQueryGeometry=!1,this.returnM=void 0,this.returnZ=void 0,this.sourceSpatialReference=null,this.spatialRelationship="intersects",this.start=void 0,this.sqlFormat=null,this.text=null,this.timeExtent=null,this.timeReferenceUnknownClient=!1,this.units=null,this.where=null}static from(e){return Object(m.d)(i,e)}castDatumTransformation(e){return"number"==typeof e||"object"==typeof e?e:null}writeHistoricMoment(e,t){t.historicMoment=e&&e.getTime()}writeParameterValues(e,t){if(e){const n={};for(const t in e){const i=e[t];Array.isArray(i)?n[t]=i.map((e=>e instanceof Date?e.getTime():e)):i instanceof Date?n[t]=i.getTime():n[t]=i}t.parameterValues=n}}writeStart(e,t){t.resultOffset=this.start,t.resultRecordCount=this.num||10,t.where="1=1"}writeWhere(e,t){t.where=e||"1=1"}clone(){return new i(Object(c.a)({aggregateIds:this.aggregateIds,cacheHint:this.cacheHint,datumTransformation:this.datumTransformation,distance:this.distance,gdbVersion:this.gdbVersion,geometry:this.geometry,geometryPrecision:this.geometryPrecision,groupByFieldsForStatistics:this.groupByFieldsForStatistics,having:this.having,historicMoment:Object(u.l)(this.historicMoment)?new Date(this.historicMoment.getTime()):null,maxAllowableOffset:this.maxAllowableOffset,maxRecordCountFactor:this.maxRecordCountFactor,multipatchOption:this.multipatchOption,num:this.num,objectIds:this.objectIds,orderByFields:this.orderByFields,outFields:this.outFields,outSpatialReference:this.outSpatialReference,outStatistics:this.outStatistics,parameterValues:this.parameterValues,pixelSize:this.pixelSize,quantizationParameters:this.quantizationParameters,rangeValues:this.rangeValues,relationParameter:this.relationParameter,resultType:this.resultType,returnDistinctValues:this.returnDistinctValues,returnGeometry:this.returnGeometry,returnCentroid:this.returnCentroid,returnExceededLimitFeatures:this.returnExceededLimitFeatures,returnQueryGeometry:this.returnQueryGeometry,returnM:this.returnM,returnZ:this.returnZ,dynamicDataSource:this.dynamicDataSource,sourceSpatialReference:this.sourceSpatialReference,spatialRelationship:this.spatialRelationship,start:this.start,sqlFormat:this.sqlFormat,text:this.text,timeExtent:this.timeExtent,timeReferenceUnknownClient:this.timeReferenceUnknownClient,units:this.units,where:this.where}))}};M.MAX_MAX_RECORD_COUNT_FACTOR=5,Object(r.a)([Object(d.b)({json:{write:!0}})],M.prototype,"aggregateIds",void 0),Object(r.a)([Object(d.b)({type:Boolean,json:{write:!0}})],M.prototype,"cacheHint",void 0),Object(r.a)([Object(d.b)({json:{write:!0}})],M.prototype,"datumTransformation",void 0),Object(r.a)([Object(h.a)("datumTransformation")],M.prototype,"castDatumTransformation",null),Object(r.a)([Object(d.b)({type:Number,json:{write:{overridePolicy:e=>({enabled:e>0})}}})],M.prototype,"distance",void 0),Object(r.a)([Object(d.b)({type:g.a,json:{write:!0}})],M.prototype,"dynamicDataSource",void 0),Object(r.a)([Object(d.b)({type:String,json:{write:!0}})],M.prototype,"formatOf3DObjects",void 0),Object(r.a)([Object(d.b)({type:String,json:{write:!0}})],M.prototype,"gdbVersion",void 0),Object(r.a)([Object(d.b)({types:s.a,json:{read:y.a,write:!0}})],M.prototype,"geometry",void 0),Object(r.a)([Object(d.b)({type:Number,json:{write:!0}})],M.prototype,"geometryPrecision",void 0),Object(r.a)([Object(d.b)({type:[String],json:{write:!0}})],M.prototype,"groupByFieldsForStatistics",void 0),Object(r.a)([Object(d.b)({type:String,json:{write:!0}})],M.prototype,"having",void 0),Object(r.a)([Object(d.b)({type:Date})],M.prototype,"historicMoment",void 0),Object(r.a)([Object(b.a)("historicMoment")],M.prototype,"writeHistoricMoment",null),Object(r.a)([Object(d.b)({type:Number,json:{write:!0}})],M.prototype,"maxAllowableOffset",void 0),Object(r.a)([Object(d.b)({type:Number,cast:e=>e<1?1:e>i.MAX_MAX_RECORD_COUNT_FACTOR?i.MAX_MAX_RECORD_COUNT_FACTOR:e,json:{write:{overridePolicy:e=>({enabled:e>1})}}})],M.prototype,"maxRecordCountFactor",void 0),Object(r.a)([Object(d.b)({type:["xyFootprint"],json:{write:!0}})],M.prototype,"multipatchOption",void 0),Object(r.a)([Object(d.b)({type:Number,json:{read:{source:"resultRecordCount"}}})],M.prototype,"num",void 0),Object(r.a)([Object(d.b)({json:{write:!0}})],M.prototype,"objectIds",void 0),Object(r.a)([Object(d.b)({type:[String],json:{write:!0}})],M.prototype,"orderByFields",void 0),Object(r.a)([Object(d.b)({type:[String],json:{write:!0}})],M.prototype,"outFields",void 0),Object(r.a)([Object(d.b)({type:v.a,json:{name:"outSR",write:!0}})],M.prototype,"outSpatialReference",void 0),Object(r.a)([Object(d.b)({type:[O.a],json:{write:{enabled:!0,overridePolicy(){return{enabled:Object(u.l)(this.outStatistics)&&this.outStatistics.length>0}}}}})],M.prototype,"outStatistics",void 0),Object(r.a)([Object(d.b)({json:{write:!0}})],M.prototype,"parameterValues",void 0),Object(r.a)([Object(b.a)("parameterValues")],M.prototype,"writeParameterValues",null),Object(r.a)([Object(d.b)({type:w.a,json:{write:!0}})],M.prototype,"pixelSize",void 0),Object(r.a)([Object(d.b)({type:j.a,json:{write:!0}})],M.prototype,"quantizationParameters",void 0),Object(r.a)([Object(d.b)({type:[Object],json:{write:!0}})],M.prototype,"rangeValues",void 0),Object(r.a)([Object(d.b)({type:String,json:{read:{source:"relationParam"},write:{target:"relationParam",overridePolicy(){return{enabled:"relation"===this.spatialRelationship}}}}})],M.prototype,"relationParameter",void 0),Object(r.a)([Object(d.b)({type:String,json:{write:!0}})],M.prototype,"resultType",void 0),Object(r.a)([Object(d.b)({type:Boolean,json:{default:!1,write:!0}})],M.prototype,"returnCentroid",void 0),Object(r.a)([Object(d.b)({type:Boolean,json:{default:!1,write:!0}})],M.prototype,"returnDistinctValues",void 0),Object(r.a)([Object(d.b)({type:Boolean,json:{default:!0,write:!0}})],M.prototype,"returnExceededLimitFeatures",void 0),Object(r.a)([Object(d.b)({type:Boolean,json:{write:!0}})],M.prototype,"returnGeometry",void 0),Object(r.a)([Object(d.b)({type:Boolean,json:{default:!1,write:!0}})],M.prototype,"returnQueryGeometry",void 0),Object(r.a)([Object(d.b)({type:Boolean,json:{default:!1,write:!0}})],M.prototype,"returnM",void 0),Object(r.a)([Object(d.b)({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],M.prototype,"returnZ",void 0),Object(r.a)([Object(d.b)({type:v.a,json:{write:!0}})],M.prototype,"sourceSpatialReference",void 0),Object(r.a)([Object(f.a)(x,{ignoreUnknown:!1,name:"spatialRel"})],M.prototype,"spatialRelationship",void 0),Object(r.a)([Object(d.b)({type:Number,json:{read:{source:"resultOffset"}}})],M.prototype,"start",void 0),Object(r.a)([Object(b.a)("start"),Object(b.a)("num")],M.prototype,"writeStart",null),Object(r.a)([Object(d.b)({type:String,json:{write:!0}})],M.prototype,"sqlFormat",void 0),Object(r.a)([Object(d.b)({type:String,json:{write:!0}})],M.prototype,"text",void 0),Object(r.a)([Object(d.b)({type:o.a,json:{write:!0}})],M.prototype,"timeExtent",void 0),Object(r.a)([Object(d.b)({type:Boolean,json:{default:!1,write:!0}})],M.prototype,"timeReferenceUnknownClient",void 0),Object(r.a)([Object(f.a)(S,{ignoreUnknown:!1}),Object(d.b)({json:{write:{overridePolicy(e){return{enabled:e&&this.distance>0}}}}})],M.prototype,"units",void 0),Object(r.a)([Object(d.b)({type:String,json:{write:{overridePolicy(e){return{enabled:null!=e||this.start>0}}}}})],M.prototype,"where",void 0),Object(r.a)([Object(b.a)("where")],M.prototype,"writeWhere",null),M=i=Object(r.a)([Object(p.a)("esri.rest.support.Query")],M);const _=M},149:function(e,t,n){"use strict";n.d(t,"a",(function(){return O})),n.d(t,"b",(function(){return d})),n.d(t,"c",(function(){return c})),n.d(t,"d",(function(){return s})),n.d(t,"e",(function(){return p})),n.d(t,"f",(function(){return f})),n.d(t,"g",(function(){return h})),n.d(t,"h",(function(){return x})),n.d(t,"i",(function(){return S})),n.d(t,"j",(function(){return a})),n.d(t,"k",(function(){return b})),n.d(t,"l",(function(){return R})),n.d(t,"m",(function(){return _})),n.d(t,"n",(function(){return u})),n.d(t,"o",(function(){return T})),n.d(t,"p",(function(){return M})),n.d(t,"q",(function(){return I})),n.d(t,"r",(function(){return m})),n.d(t,"s",(function(){return o})),n.d(t,"t",(function(){return l})),n.d(t,"u",(function(){return j})),n.d(t,"v",(function(){return y})),n.d(t,"w",(function(){return g}));var i=n(106),r=n(173);function s(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function o(e,t,n,i,r,s,o,a,l,c,u,d,h,f,p,b,m){return e[0]=t,e[1]=n,e[2]=i,e[3]=r,e[4]=s,e[5]=o,e[6]=a,e[7]=l,e[8]=c,e[9]=u,e[10]=d,e[11]=h,e[12]=f,e[13]=p,e[14]=b,e[15]=m,e}function a(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function l(e,t){if(e===t){const n=t[1],i=t[2],r=t[3],s=t[6],o=t[7],a=t[11];e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=n,e[6]=t[9],e[7]=t[13],e[8]=i,e[9]=s,e[11]=t[14],e[12]=r,e[13]=o,e[14]=a}else e[0]=t[0],e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=t[1],e[5]=t[5],e[6]=t[9],e[7]=t[13],e[8]=t[2],e[9]=t[6],e[10]=t[10],e[11]=t[14],e[12]=t[3],e[13]=t[7],e[14]=t[11],e[15]=t[15];return e}function c(e,t){const n=t[0],i=t[1],r=t[2],s=t[3],o=t[4],a=t[5],l=t[6],c=t[7],u=t[8],d=t[9],h=t[10],f=t[11],p=t[12],b=t[13],m=t[14],y=t[15],g=n*a-i*o,j=n*l-r*o,O=n*c-s*o,v=i*l-r*a,w=i*c-s*a,x=r*c-s*l,S=u*b-d*p,M=u*m-h*p,_=u*y-f*p,F=d*m-h*b,I=d*y-f*b,T=h*y-f*m;let R=g*T-j*I+O*F+v*_-w*M+x*S;return R?(R=1/R,e[0]=(a*T-l*I+c*F)*R,e[1]=(r*I-i*T-s*F)*R,e[2]=(b*x-m*w+y*v)*R,e[3]=(h*w-d*x-f*v)*R,e[4]=(l*_-o*T-c*M)*R,e[5]=(n*T-r*_+s*M)*R,e[6]=(m*O-p*x-y*j)*R,e[7]=(u*x-h*O+f*j)*R,e[8]=(o*I-a*_+c*S)*R,e[9]=(i*_-n*I-s*S)*R,e[10]=(p*w-b*O+y*g)*R,e[11]=(d*O-u*w-f*g)*R,e[12]=(a*M-o*F-l*S)*R,e[13]=(n*F-i*M+r*S)*R,e[14]=(b*j-p*v-m*g)*R,e[15]=(u*v-d*j+h*g)*R,e):null}function u(e,t,n){const i=t[0],r=t[1],s=t[2],o=t[3],a=t[4],l=t[5],c=t[6],u=t[7],d=t[8],h=t[9],f=t[10],p=t[11],b=t[12],m=t[13],y=t[14],g=t[15];let j=n[0],O=n[1],v=n[2],w=n[3];return e[0]=j*i+O*a+v*d+w*b,e[1]=j*r+O*l+v*h+w*m,e[2]=j*s+O*c+v*f+w*y,e[3]=j*o+O*u+v*p+w*g,j=n[4],O=n[5],v=n[6],w=n[7],e[4]=j*i+O*a+v*d+w*b,e[5]=j*r+O*l+v*h+w*m,e[6]=j*s+O*c+v*f+w*y,e[7]=j*o+O*u+v*p+w*g,j=n[8],O=n[9],v=n[10],w=n[11],e[8]=j*i+O*a+v*d+w*b,e[9]=j*r+O*l+v*h+w*m,e[10]=j*s+O*c+v*f+w*y,e[11]=j*o+O*u+v*p+w*g,j=n[12],O=n[13],v=n[14],w=n[15],e[12]=j*i+O*a+v*d+w*b,e[13]=j*r+O*l+v*h+w*m,e[14]=j*s+O*c+v*f+w*y,e[15]=j*o+O*u+v*p+w*g,e}function d(e,t,n){const i=n[0],r=n[1],s=n[2];let o,a,l,c,u,d,h,f,p,b,m,y;return t===e?(e[12]=t[0]*i+t[4]*r+t[8]*s+t[12],e[13]=t[1]*i+t[5]*r+t[9]*s+t[13],e[14]=t[2]*i+t[6]*r+t[10]*s+t[14],e[15]=t[3]*i+t[7]*r+t[11]*s+t[15]):(o=t[0],a=t[1],l=t[2],c=t[3],u=t[4],d=t[5],h=t[6],f=t[7],p=t[8],b=t[9],m=t[10],y=t[11],e[0]=o,e[1]=a,e[2]=l,e[3]=c,e[4]=u,e[5]=d,e[6]=h,e[7]=f,e[8]=p,e[9]=b,e[10]=m,e[11]=y,e[12]=o*i+u*r+p*s+t[12],e[13]=a*i+d*r+b*s+t[13],e[14]=l*i+h*r+m*s+t[14],e[15]=c*i+f*r+y*s+t[15]),e}function h(e,t,n){const i=n[0],r=n[1],s=n[2];return e[0]=t[0]*i,e[1]=t[1]*i,e[2]=t[2]*i,e[3]=t[3]*i,e[4]=t[4]*r,e[5]=t[5]*r,e[6]=t[6]*r,e[7]=t[7]*r,e[8]=t[8]*s,e[9]=t[9]*s,e[10]=t[10]*s,e[11]=t[11]*s,e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function f(e,t,n,i){let s,o,a,l,c,u,d,h,f,p,b,m,y,g,j,O,v,w,x,S,M,_,F,I,T=i[0],R=i[1],C=i[2],P=Math.sqrt(T*T+R*R+C*C);return P<r.a?null:(P=1/P,T*=P,R*=P,C*=P,s=Math.sin(n),o=Math.cos(n),a=1-o,l=t[0],c=t[1],u=t[2],d=t[3],h=t[4],f=t[5],p=t[6],b=t[7],m=t[8],y=t[9],g=t[10],j=t[11],O=T*T*a+o,v=R*T*a+C*s,w=C*T*a-R*s,x=T*R*a-C*s,S=R*R*a+o,M=C*R*a+T*s,_=T*C*a+R*s,F=R*C*a-T*s,I=C*C*a+o,e[0]=l*O+h*v+m*w,e[1]=c*O+f*v+y*w,e[2]=u*O+p*v+g*w,e[3]=d*O+b*v+j*w,e[4]=l*x+h*S+m*M,e[5]=c*x+f*S+y*M,e[6]=u*x+p*S+g*M,e[7]=d*x+b*S+j*M,e[8]=l*_+h*F+m*I,e[9]=c*_+f*F+y*I,e[10]=u*_+p*F+g*I,e[11]=d*_+b*F+j*I,t!==e&&(e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e)}function p(e,t,n){const i=Math.sin(n),r=Math.cos(n),s=t[4],o=t[5],a=t[6],l=t[7],c=t[8],u=t[9],d=t[10],h=t[11];return t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[4]=s*r+c*i,e[5]=o*r+u*i,e[6]=a*r+d*i,e[7]=l*r+h*i,e[8]=c*r-s*i,e[9]=u*r-o*i,e[10]=d*r-a*i,e[11]=h*r-l*i,e}function b(e,t,n){const i=Math.sin(n),r=Math.cos(n),s=t[0],o=t[1],a=t[2],l=t[3],c=t[8],u=t[9],d=t[10],h=t[11];return t!==e&&(e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=s*r-c*i,e[1]=o*r-u*i,e[2]=a*r-d*i,e[3]=l*r-h*i,e[8]=s*i+c*r,e[9]=o*i+u*r,e[10]=a*i+d*r,e[11]=l*i+h*r,e}function m(e,t,n){const i=Math.sin(n),r=Math.cos(n),s=t[0],o=t[1],a=t[2],l=t[3],c=t[4],u=t[5],d=t[6],h=t[7];return t!==e&&(e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=s*r+c*i,e[1]=o*r+u*i,e[2]=a*r+d*i,e[3]=l*r+h*i,e[4]=c*r-s*i,e[5]=u*r-o*i,e[6]=d*r-a*i,e[7]=h*r-l*i,e}function y(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=t[0],e[13]=t[1],e[14]=t[2],e[15]=1,e}function g(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=t[1],e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=t[2],e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function j(e,t){const n=Math.sin(t),i=Math.cos(t);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=i,e[6]=n,e[7]=0,e[8]=0,e[9]=-n,e[10]=i,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function O(e,t){const n=Math.sin(t),i=Math.cos(t);return e[0]=i,e[1]=n,e[2]=0,e[3]=0,e[4]=-n,e[5]=i,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function v(e,t,n){const i=t[0],r=t[1],s=t[2],o=t[3],a=i+i,l=r+r,c=s+s,u=i*a,d=i*l,h=i*c,f=r*l,p=r*c,b=s*c,m=o*a,y=o*l,g=o*c;return e[0]=1-(f+b),e[1]=d+g,e[2]=h-y,e[3]=0,e[4]=d-g,e[5]=1-(u+b),e[6]=p+m,e[7]=0,e[8]=h+y,e[9]=p-m,e[10]=1-(u+f),e[11]=0,e[12]=n[0],e[13]=n[1],e[14]=n[2],e[15]=1,e}const w=Object(i.f)();function x(e,t){const n=t[0],i=t[1],r=t[2],s=t[3],o=n+n,a=i+i,l=r+r,c=n*o,u=i*o,d=i*a,h=r*o,f=r*a,p=r*l,b=s*o,m=s*a,y=s*l;return e[0]=1-d-p,e[1]=u+y,e[2]=h-m,e[3]=0,e[4]=u-y,e[5]=1-c-p,e[6]=f+b,e[7]=0,e[8]=h+m,e[9]=f-b,e[10]=1-c-d,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function S(e,t,n,i,r,s,o){const a=1/(n-t),l=1/(r-i),c=1/(s-o);return e[0]=2*s*a,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=2*s*l,e[6]=0,e[7]=0,e[8]=(n+t)*a,e[9]=(r+i)*l,e[10]=(o+s)*c,e[11]=-1,e[12]=0,e[13]=0,e[14]=o*s*2*c,e[15]=0,e}function M(e,t,n,i,r,s,o){const a=1/(t-n),l=1/(i-r),c=1/(s-o);return e[0]=-2*a,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*l,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*c,e[11]=0,e[12]=(t+n)*a,e[13]=(r+i)*l,e[14]=(o+s)*c,e[15]=1,e}function _(e,t,n,i){let s,o,l,c,u,d,h,f,p,b;const m=t[0],y=t[1],g=t[2],j=i[0],O=i[1],v=i[2],w=n[0],x=n[1],S=n[2];return Math.abs(m-w)<r.a&&Math.abs(y-x)<r.a&&Math.abs(g-S)<r.a?a(e):(h=m-w,f=y-x,p=g-S,b=1/Math.sqrt(h*h+f*f+p*p),h*=b,f*=b,p*=b,s=O*p-v*f,o=v*h-j*p,l=j*f-O*h,b=Math.sqrt(s*s+o*o+l*l),b?(b=1/b,s*=b,o*=b,l*=b):(s=0,o=0,l=0),c=f*l-p*o,u=p*s-h*l,d=h*o-f*s,b=Math.sqrt(c*c+u*u+d*d),b?(b=1/b,c*=b,u*=b,d*=b):(c=0,u=0,d=0),e[0]=s,e[1]=c,e[2]=h,e[3]=0,e[4]=o,e[5]=u,e[6]=f,e[7]=0,e[8]=l,e[9]=d,e[10]=p,e[11]=0,e[12]=-(s*m+o*y+l*g),e[13]=-(c*m+u*y+d*g),e[14]=-(h*m+f*y+p*g),e[15]=1,e)}function F(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e[3]=t[3]-n[3],e[4]=t[4]-n[4],e[5]=t[5]-n[5],e[6]=t[6]-n[6],e[7]=t[7]-n[7],e[8]=t[8]-n[8],e[9]=t[9]-n[9],e[10]=t[10]-n[10],e[11]=t[11]-n[11],e[12]=t[12]-n[12],e[13]=t[13]-n[13],e[14]=t[14]-n[14],e[15]=t[15]-n[15],e}function I(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]&&e[6]===t[6]&&e[7]===t[7]&&e[8]===t[8]&&e[9]===t[9]&&e[10]===t[10]&&e[11]===t[11]&&e[12]===t[12]&&e[13]===t[13]&&e[14]===t[14]&&e[15]===t[15]}function T(e,t){if(e===t)return!0;const n=e[0],i=e[1],s=e[2],o=e[3],a=e[4],l=e[5],c=e[6],u=e[7],d=e[8],h=e[9],f=e[10],p=e[11],b=e[12],m=e[13],y=e[14],g=e[15],j=t[0],O=t[1],v=t[2],w=t[3],x=t[4],S=t[5],M=t[6],_=t[7],F=t[8],I=t[9],T=t[10],R=t[11],C=t[12],P=t[13],E=t[14],N=t[15];return Math.abs(n-j)<=r.a*Math.max(1,Math.abs(n),Math.abs(j))&&Math.abs(i-O)<=r.a*Math.max(1,Math.abs(i),Math.abs(O))&&Math.abs(s-v)<=r.a*Math.max(1,Math.abs(s),Math.abs(v))&&Math.abs(o-w)<=r.a*Math.max(1,Math.abs(o),Math.abs(w))&&Math.abs(a-x)<=r.a*Math.max(1,Math.abs(a),Math.abs(x))&&Math.abs(l-S)<=r.a*Math.max(1,Math.abs(l),Math.abs(S))&&Math.abs(c-M)<=r.a*Math.max(1,Math.abs(c),Math.abs(M))&&Math.abs(u-_)<=r.a*Math.max(1,Math.abs(u),Math.abs(_))&&Math.abs(d-F)<=r.a*Math.max(1,Math.abs(d),Math.abs(F))&&Math.abs(h-I)<=r.a*Math.max(1,Math.abs(h),Math.abs(I))&&Math.abs(f-T)<=r.a*Math.max(1,Math.abs(f),Math.abs(T))&&Math.abs(p-R)<=r.a*Math.max(1,Math.abs(p),Math.abs(R))&&Math.abs(b-C)<=r.a*Math.max(1,Math.abs(b),Math.abs(C))&&Math.abs(m-P)<=r.a*Math.max(1,Math.abs(m),Math.abs(P))&&Math.abs(y-E)<=r.a*Math.max(1,Math.abs(y),Math.abs(E))&&Math.abs(g-N)<=r.a*Math.max(1,Math.abs(g),Math.abs(N))}function R(e){const t=r.a,n=e[0],i=e[1],s=e[2],o=e[4],a=e[5],l=e[6],c=e[8],u=e[9],d=e[10];return Math.abs(1-(n*n+o*o+c*c))<=t&&Math.abs(1-(i*i+a*a+u*u))<=t&&Math.abs(1-(s*s+l*l+d*d))<=t}const C=u,P=F;Object.freeze({__proto__:null,copy:s,set:o,identity:a,transpose:l,invert:c,adjoint:function(e,t){const n=t[0],i=t[1],r=t[2],s=t[3],o=t[4],a=t[5],l=t[6],c=t[7],u=t[8],d=t[9],h=t[10],f=t[11],p=t[12],b=t[13],m=t[14],y=t[15];return e[0]=a*(h*y-f*m)-d*(l*y-c*m)+b*(l*f-c*h),e[1]=-(i*(h*y-f*m)-d*(r*y-s*m)+b*(r*f-s*h)),e[2]=i*(l*y-c*m)-a*(r*y-s*m)+b*(r*c-s*l),e[3]=-(i*(l*f-c*h)-a*(r*f-s*h)+d*(r*c-s*l)),e[4]=-(o*(h*y-f*m)-u*(l*y-c*m)+p*(l*f-c*h)),e[5]=n*(h*y-f*m)-u*(r*y-s*m)+p*(r*f-s*h),e[6]=-(n*(l*y-c*m)-o*(r*y-s*m)+p*(r*c-s*l)),e[7]=n*(l*f-c*h)-o*(r*f-s*h)+u*(r*c-s*l),e[8]=o*(d*y-f*b)-u*(a*y-c*b)+p*(a*f-c*d),e[9]=-(n*(d*y-f*b)-u*(i*y-s*b)+p*(i*f-s*d)),e[10]=n*(a*y-c*b)-o*(i*y-s*b)+p*(i*c-s*a),e[11]=-(n*(a*f-c*d)-o*(i*f-s*d)+u*(i*c-s*a)),e[12]=-(o*(d*m-h*b)-u*(a*m-l*b)+p*(a*h-l*d)),e[13]=n*(d*m-h*b)-u*(i*m-r*b)+p*(i*h-r*d),e[14]=-(n*(a*m-l*b)-o*(i*m-r*b)+p*(i*l-r*a)),e[15]=n*(a*h-l*d)-o*(i*h-r*d)+u*(i*l-r*a),e},determinant:function(e){const t=e[0],n=e[1],i=e[2],r=e[3],s=e[4],o=e[5],a=e[6],l=e[7],c=e[8],u=e[9],d=e[10],h=e[11],f=e[12],p=e[13],b=e[14],m=e[15];return(t*o-n*s)*(d*m-h*b)-(t*a-i*s)*(u*m-h*p)+(t*l-r*s)*(u*b-d*p)+(n*a-i*o)*(c*m-h*f)-(n*l-r*o)*(c*b-d*f)+(i*l-r*a)*(c*p-u*f)},multiply:u,translate:d,scale:h,rotate:f,rotateX:p,rotateY:b,rotateZ:m,fromTranslation:y,fromScaling:g,fromRotation:function(e,t,n){let i,s,o,a=n[0],l=n[1],c=n[2],u=Math.sqrt(a*a+l*l+c*c);return u<r.a?null:(u=1/u,a*=u,l*=u,c*=u,i=Math.sin(t),s=Math.cos(t),o=1-s,e[0]=a*a*o+s,e[1]=l*a*o+c*i,e[2]=c*a*o-l*i,e[3]=0,e[4]=a*l*o-c*i,e[5]=l*l*o+s,e[6]=c*l*o+a*i,e[7]=0,e[8]=a*c*o+l*i,e[9]=l*c*o-a*i,e[10]=c*c*o+s,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e)},fromXRotation:j,fromYRotation:function(e,t){const n=Math.sin(t),i=Math.cos(t);return e[0]=i,e[1]=0,e[2]=-n,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=n,e[9]=0,e[10]=i,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},fromZRotation:O,fromRotationTranslation:v,fromQuat2:function(e,t){const n=w,i=-t[0],r=-t[1],s=-t[2],o=t[3],a=t[4],l=t[5],c=t[6],u=t[7],d=i*i+r*r+s*s+o*o;return d>0?(n[0]=2*(a*o+u*i+l*s-c*r)/d,n[1]=2*(l*o+u*r+c*i-a*s)/d,n[2]=2*(c*o+u*s+a*r-l*i)/d):(n[0]=2*(a*o+u*i+l*s-c*r),n[1]=2*(l*o+u*r+c*i-a*s),n[2]=2*(c*o+u*s+a*r-l*i)),v(e,t,n),e},getTranslation:function(e,t){return e[0]=t[12],e[1]=t[13],e[2]=t[14],e},getScaling:function(e,t){const n=t[0],i=t[1],r=t[2],s=t[4],o=t[5],a=t[6],l=t[8],c=t[9],u=t[10];return e[0]=Math.sqrt(n*n+i*i+r*r),e[1]=Math.sqrt(s*s+o*o+a*a),e[2]=Math.sqrt(l*l+c*c+u*u),e},getRotation:function(e,t){const n=t[0]+t[5]+t[10];let i=0;return n>0?(i=2*Math.sqrt(n+1),e[3]=.25*i,e[0]=(t[6]-t[9])/i,e[1]=(t[8]-t[2])/i,e[2]=(t[1]-t[4])/i):t[0]>t[5]&&t[0]>t[10]?(i=2*Math.sqrt(1+t[0]-t[5]-t[10]),e[3]=(t[6]-t[9])/i,e[0]=.25*i,e[1]=(t[1]+t[4])/i,e[2]=(t[8]+t[2])/i):t[5]>t[10]?(i=2*Math.sqrt(1+t[5]-t[0]-t[10]),e[3]=(t[8]-t[2])/i,e[0]=(t[1]+t[4])/i,e[1]=.25*i,e[2]=(t[6]+t[9])/i):(i=2*Math.sqrt(1+t[10]-t[0]-t[5]),e[3]=(t[1]-t[4])/i,e[0]=(t[8]+t[2])/i,e[1]=(t[6]+t[9])/i,e[2]=.25*i),e},fromRotationTranslationScale:function(e,t,n,i){const r=t[0],s=t[1],o=t[2],a=t[3],l=r+r,c=s+s,u=o+o,d=r*l,h=r*c,f=r*u,p=s*c,b=s*u,m=o*u,y=a*l,g=a*c,j=a*u,O=i[0],v=i[1],w=i[2];return e[0]=(1-(p+m))*O,e[1]=(h+j)*O,e[2]=(f-g)*O,e[3]=0,e[4]=(h-j)*v,e[5]=(1-(d+m))*v,e[6]=(b+y)*v,e[7]=0,e[8]=(f+g)*w,e[9]=(b-y)*w,e[10]=(1-(d+p))*w,e[11]=0,e[12]=n[0],e[13]=n[1],e[14]=n[2],e[15]=1,e},fromRotationTranslationScaleOrigin:function(e,t,n,i,r){const s=t[0],o=t[1],a=t[2],l=t[3],c=s+s,u=o+o,d=a+a,h=s*c,f=s*u,p=s*d,b=o*u,m=o*d,y=a*d,g=l*c,j=l*u,O=l*d,v=i[0],w=i[1],x=i[2],S=r[0],M=r[1],_=r[2],F=(1-(b+y))*v,I=(f+O)*v,T=(p-j)*v,R=(f-O)*w,C=(1-(h+y))*w,P=(m+g)*w,E=(p+j)*x,N=(m-g)*x,k=(1-(h+b))*x;return e[0]=F,e[1]=I,e[2]=T,e[3]=0,e[4]=R,e[5]=C,e[6]=P,e[7]=0,e[8]=E,e[9]=N,e[10]=k,e[11]=0,e[12]=n[0]+S-(F*S+R*M+E*_),e[13]=n[1]+M-(I*S+C*M+N*_),e[14]=n[2]+_-(T*S+P*M+k*_),e[15]=1,e},fromQuat:x,frustum:S,perspective:function(e,t,n,i,r){const s=1/Math.tan(t/2);let o;return e[0]=s/n,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=s,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=-1,e[12]=0,e[13]=0,e[15]=0,null!=r&&r!==1/0?(o=1/(i-r),e[10]=(r+i)*o,e[14]=2*r*i*o):(e[10]=-1,e[14]=-2*i),e},perspectiveFromFieldOfView:function(e,t,n,i){const r=Math.tan(t.upDegrees*Math.PI/180),s=Math.tan(t.downDegrees*Math.PI/180),o=Math.tan(t.leftDegrees*Math.PI/180),a=Math.tan(t.rightDegrees*Math.PI/180),l=2/(o+a),c=2/(r+s);return e[0]=l,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=c,e[6]=0,e[7]=0,e[8]=-(o-a)*l*.5,e[9]=(r-s)*c*.5,e[10]=i/(n-i),e[11]=-1,e[12]=0,e[13]=0,e[14]=i*n/(n-i),e[15]=0,e},ortho:M,lookAt:_,targetTo:function(e,t,n,i){const r=t[0],s=t[1],o=t[2],a=i[0],l=i[1],c=i[2];let u=r-n[0],d=s-n[1],h=o-n[2],f=u*u+d*d+h*h;f>0&&(f=1/Math.sqrt(f),u*=f,d*=f,h*=f);let p=l*h-c*d,b=c*u-a*h,m=a*d-l*u;return f=p*p+b*b+m*m,f>0&&(f=1/Math.sqrt(f),p*=f,b*=f,m*=f),e[0]=p,e[1]=b,e[2]=m,e[3]=0,e[4]=d*m-h*b,e[5]=h*p-u*m,e[6]=u*b-d*p,e[7]=0,e[8]=u,e[9]=d,e[10]=h,e[11]=0,e[12]=r,e[13]=s,e[14]=o,e[15]=1,e},str:function(e){return"mat4("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+", "+e[8]+", "+e[9]+", "+e[10]+", "+e[11]+", "+e[12]+", "+e[13]+", "+e[14]+", "+e[15]+")"},frob:function(e){return Math.sqrt(e[0]**2+e[1]**2+e[2]**2+e[3]**2+e[4]**2+e[5]**2+e[6]**2+e[7]**2+e[8]**2+e[9]**2+e[10]**2+e[11]**2+e[12]**2+e[13]**2+e[14]**2+e[15]**2)},add:function(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e[3]=t[3]+n[3],e[4]=t[4]+n[4],e[5]=t[5]+n[5],e[6]=t[6]+n[6],e[7]=t[7]+n[7],e[8]=t[8]+n[8],e[9]=t[9]+n[9],e[10]=t[10]+n[10],e[11]=t[11]+n[11],e[12]=t[12]+n[12],e[13]=t[13]+n[13],e[14]=t[14]+n[14],e[15]=t[15]+n[15],e},subtract:F,multiplyScalar:function(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e[3]=t[3]*n,e[4]=t[4]*n,e[5]=t[5]*n,e[6]=t[6]*n,e[7]=t[7]*n,e[8]=t[8]*n,e[9]=t[9]*n,e[10]=t[10]*n,e[11]=t[11]*n,e[12]=t[12]*n,e[13]=t[13]*n,e[14]=t[14]*n,e[15]=t[15]*n,e},multiplyScalarAndAdd:function(e,t,n,i){return e[0]=t[0]+n[0]*i,e[1]=t[1]+n[1]*i,e[2]=t[2]+n[2]*i,e[3]=t[3]+n[3]*i,e[4]=t[4]+n[4]*i,e[5]=t[5]+n[5]*i,e[6]=t[6]+n[6]*i,e[7]=t[7]+n[7]*i,e[8]=t[8]+n[8]*i,e[9]=t[9]+n[9]*i,e[10]=t[10]+n[10]*i,e[11]=t[11]+n[11]*i,e[12]=t[12]+n[12]*i,e[13]=t[13]+n[13]*i,e[14]=t[14]+n[14]*i,e[15]=t[15]+n[15]*i,e},exactEquals:I,equals:T,isOrthoNormal:R,mul:C,sub:P})},153:function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return s})),n.d(t,"c",(function(){return o}));n(82);const i={milliseconds:1,seconds:1e3,minutes:6e4,hours:36e5,days:864e5,weeks:6048e5,months:26784e5,years:31536e6,decades:31536e7,centuries:31536e8},r={milliseconds:{getter:"getMilliseconds",setter:"setMilliseconds",multiplier:1},seconds:{getter:"getSeconds",setter:"setSeconds",multiplier:1},minutes:{getter:"getMinutes",setter:"setMinutes",multiplier:1},hours:{getter:"getHours",setter:"setHours",multiplier:1},days:{getter:"getDate",setter:"setDate",multiplier:1},weeks:{getter:"getDate",setter:"setDate",multiplier:7},months:{getter:"getMonth",setter:"setMonth",multiplier:1},years:{getter:"getFullYear",setter:"setFullYear",multiplier:1},decades:{getter:"getFullYear",setter:"setFullYear",multiplier:10},centuries:{getter:"getFullYear",setter:"setFullYear",multiplier:100}};function s(e,t,n){const i=new Date(e.getTime());if(t&&n){const e=r[n],{getter:s,setter:o,multiplier:a}=e;i[o](i[s]()+t*a)}return i}function o(e,t){switch(t){case"milliseconds":return new Date(e.getTime());case"seconds":return new Date(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds());case"minutes":return new Date(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes());case"hours":return new Date(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours());case"days":return new Date(e.getFullYear(),e.getMonth(),e.getDate());case"weeks":return new Date(e.getFullYear(),e.getMonth(),e.getDate()-e.getDay());case"months":return new Date(e.getFullYear(),e.getMonth(),1);case"years":return new Date(e.getFullYear(),0,1);case"decades":return new Date(e.getFullYear()-e.getFullYear()%10,0,1);case"centuries":return new Date(e.getFullYear()-e.getFullYear()%100,0,1);default:return new Date}}function a(e,t,n){return 0===e?0:e*i[t]/i[n]}},154:function(e,t,n){"use strict";n.d(t,"a",(function(){return m}));var i,r=n(79),s=n(90),o=n(86),a=n(81),l=(n(84),n(82),n(83)),c=n(94),u=n(93),d=n(80),h=n(196),f=n(267);const p=new s.a({binary:"binary",coordinate:"coordinate",countOrAmount:"count-or-amount",dateAndTime:"date-and-time",description:"description",locationOrPlaceName:"location-or-place-name",measurement:"measurement",nameOrTitle:"name-or-title",none:"none",orderedOrRanked:"ordered-or-ranked",percentageOrRatio:"percentage-or-ratio",typeOrCategory:"type-or-category",uniqueIdentifier:"unique-identifier"});let b=i=class extends o.a{constructor(e){super(e),this.alias=null,this.defaultValue=void 0,this.description=null,this.domain=null,this.editable=!0,this.length=-1,this.name=null,this.nullable=!0,this.type=null,this.valueType=null}readDescription(e,{description:t}){let n;try{n=JSON.parse(t)}catch(i){}return n?n.value:null}readValueType(e,{description:t}){let n;try{n=JSON.parse(t)}catch(i){}return n?p.fromJSON(n.fieldValueType):null}clone(){return new i({alias:this.alias,defaultValue:this.defaultValue,description:this.description,domain:this.domain&&this.domain.clone()||null,editable:this.editable,length:this.length,name:this.name,nullable:this.nullable,type:this.type,valueType:this.valueType})}};Object(r.a)([Object(a.b)({type:String,json:{write:!0}})],b.prototype,"alias",void 0),Object(r.a)([Object(a.b)({type:[String,Number],json:{write:{allowNull:!0}}})],b.prototype,"defaultValue",void 0),Object(r.a)([Object(a.b)()],b.prototype,"description",void 0),Object(r.a)([Object(u.a)("description")],b.prototype,"readDescription",null),Object(r.a)([Object(a.b)({types:h.b,json:{read:{reader:h.a},write:!0}})],b.prototype,"domain",void 0),Object(r.a)([Object(a.b)({type:Boolean,json:{write:!0}})],b.prototype,"editable",void 0),Object(r.a)([Object(a.b)({type:l.a,json:{write:!0}})],b.prototype,"length",void 0),Object(r.a)([Object(a.b)({type:String,json:{write:!0}})],b.prototype,"name",void 0),Object(r.a)([Object(a.b)({type:Boolean,json:{write:!0}})],b.prototype,"nullable",void 0),Object(r.a)([Object(c.a)(f.a)],b.prototype,"type",void 0),Object(r.a)([Object(a.b)()],b.prototype,"valueType",void 0),Object(r.a)([Object(u.a)("valueType",["description"])],b.prototype,"readValueType",null),b=i=Object(r.a)([Object(d.a)("esri.layers.support.Field")],b);const m=b},162:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var i=n(79),r=n(86),s=n(81),o=(n(84),n(82),n(83),n(80));let a=class extends r.a{constructor(e){super(e),this.type=null}};Object(i.a)([Object(s.b)({readOnly:!0,json:{read:!1,write:!0}})],a.prototype,"type",void 0),a=Object(i.a)([Object(o.a)("esri.rest.support.ColorRamp")],a);const l=a},165:function(e,t,n){"use strict";n.d(t,"a",(function(){return b}));var i,r=n(79),s=n(89),o=n(81),a=(n(83),n(94)),l=n(80),c=n(86);n(84),n(82);let u=i=class extends c.a{constructor(e){super(e),this.name=null,this.code=null}clone(){return new i({name:this.name,code:this.code})}};Object(r.a)([Object(o.b)({type:String,json:{write:!0}})],u.prototype,"name",void 0),Object(r.a)([Object(o.b)({type:[String,Number],json:{write:!0}})],u.prototype,"code",void 0),u=i=Object(r.a)([Object(l.a)("esri.layers.support.CodedValue")],u);const d=u;var h,f=n(123);let p=h=class extends f.a{constructor(e){super(e),this.codedValues=null,this.type="coded-value"}getName(e){let t=null;if(this.codedValues){const n=String(e);this.codedValues.some((e=>(String(e.code)===n&&(t=e.name),!!t)))}return t}clone(){return new h({codedValues:Object(s.a)(this.codedValues),name:this.name})}};Object(r.a)([Object(o.b)({type:[d],json:{write:!0}})],p.prototype,"codedValues",void 0),Object(r.a)([Object(a.a)({codedValue:"coded-value"})],p.prototype,"type",void 0),p=h=Object(r.a)([Object(l.a)("esri.layers.support.CodedValueDomain")],p);const b=p},167:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var i,r=n(79),s=(n(87),n(83),n(84),n(82),n(176),n(94)),o=n(80),a=n(123);let l=i=class extends a.a{constructor(e){super(e),this.type="inherited"}clone(){return new i}};Object(r.a)([Object(s.a)({inherited:"inherited"})],l.prototype,"type",void 0),l=i=Object(r.a)([Object(o.a)("esri.layers.support.InheritedDomain")],l);const c=l},168:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var i,r=n(79),s=n(81),o=(n(84),n(82),n(83),n(94)),a=n(80),l=n(123);let c=i=class extends l.a{constructor(e){super(e),this.maxValue=null,this.minValue=null,this.type="range"}clone(){return new i({maxValue:this.maxValue,minValue:this.minValue,name:this.name})}};Object(r.a)([Object(s.b)({type:Number,json:{type:[Number],read:{source:"range",reader:(e,t)=>t.range&&t.range[1]},write:{enabled:!1,overridePolicy(){return{enabled:null!=this.maxValue&&null==this.minValue}},target:"range",writer(e,t,n){t[n]=[this.minValue||0,e]}}}})],c.prototype,"maxValue",void 0),Object(r.a)([Object(s.b)({type:Number,json:{type:[Number],read:{source:"range",reader:(e,t)=>t.range&&t.range[0]},write:{target:"range",writer(e,t,n){t[n]=[e,this.maxValue||0]}}}})],c.prototype,"minValue",void 0),Object(r.a)([Object(o.a)({range:"range"})],c.prototype,"type",void 0),c=i=Object(r.a)([Object(a.a)("esri.layers.support.RangeDomain")],c);const u=c},180:function(e,t,n){"use strict";n.d(t,"a",(function(){return U})),n.d(t,"b",(function(){return K})),n.d(t,"c",(function(){return X})),n.d(t,"d",(function(){return J})),n.d(t,"e",(function(){return H})),n.d(t,"f",(function(){return L})),n.d(t,"g",(function(){return q})),n.d(t,"h",(function(){return B})),n.d(t,"i",(function(){return Z})),n.d(t,"j",(function(){return W})),n.d(t,"k",(function(){return $})),n.d(t,"l",(function(){return E})),n.d(t,"m",(function(){return w})),n.d(t,"n",(function(){return A})),n.d(t,"o",(function(){return z})),n.d(t,"p",(function(){return de})),n.d(t,"q",(function(){return ie})),n.d(t,"r",(function(){return oe})),n.d(t,"s",(function(){return ue})),n.d(t,"t",(function(){return te})),n.d(t,"u",(function(){return ne})),n.d(t,"v",(function(){return g})),n.d(t,"w",(function(){return j})),n.d(t,"x",(function(){return le})),n.d(t,"y",(function(){return ee})),n.d(t,"z",(function(){return ae}));var i=n(88),r=n(87),s=n(85),o=n(97),a=n(262),l=n(333),c=n(186);function u(e,t){return e?t?4:3:t?3:2}const d=r.a.getLogger("esri.tasks.support.optimizedFeatureSet"),h={esriGeometryPoint:0,esriGeometryPolyline:2,esriGeometryPolygon:3,esriGeometryMultipoint:0},f=(e,t,n,i,r,s)=>{e[n]=r,e[n+1]=s},p=(e,t,n,i,r,s)=>{e[n]=r,e[n+1]=s,e[n+2]=t[i+2]},b=(e,t,n,i,r,s)=>{e[n]=r,e[n+1]=s,e[n+2]=t[i+3]},m=(e,t,n,i,r,s)=>{e[n]=r,e[n+1]=s,e[n+2]=t[i+2],e[n+3]=t[i+3]};function y(e,t,n,i){if(e){if(n)return t&&i?m:p;if(t&&i)return b}else if(t&&i)return p;return f}function g({scale:e,translate:t},n){return Math.round((n-t[0])/e[0])}function j({scale:e,translate:t},n){return Math.round((t[1]-n)/e[1])}function O({scale:e,translate:t},n){return n*e[0]+t[0]}function v({scale:e,translate:t},n){return t[1]-n*e[1]}function w(e,t,n){return e?t?n?T(e):M(e):n?F(e):x(e):null}function x(e){const t=e.coords;return{x:t[0],y:t[1]}}function S(e,t){return e.coords[0]=t.x,e.coords[1]=t.y,e}function M(e){const t=e.coords;return{x:t[0],y:t[1],z:t[2]}}function _(e,t){return e.coords[0]=t.x,e.coords[1]=t.y,e.coords[2]=t.z,e}function F(e){const t=e.coords;return{x:t[0],y:t[1],m:t[2]}}function I(e,t){return e.coords[0]=t.x,e.coords[1]=t.y,e.coords[2]=t.m,e}function T(e){const t=e.coords;return{x:t[0],y:t[1],z:t[2],m:t[3]}}function R(e,t){return e.coords[0]=t.x,e.coords[1]=t.y,e.coords[2]=t.z,e.coords[3]=t.m,e}function C(e,t){return e&&t?R:e?_:t?I:S}function P(e,t,n,i,r){const s=C(n,i);for(const o of t){const{geometry:t,attributes:n}=o;let i;t&&(i=s(new c.a,t)),e.push(new a.b(i,n,null,n[r]))}return e}function E(e,t,n){if(Object(s.k)(e))return null;const i=u(t,n),r=[];for(let s=0;s<e.coords.length;s+=i){const t=[];for(let n=0;n<i;n++)t.push(e.coords[s+n]);r.push(t)}return t?n?{points:r,hasZ:t,hasM:n}:{points:r,hasZ:t}:n?{points:r,hasM:n}:{points:r}}function N(e,t,n,i,r){const s=u(n,i);for(const o of t){const t=o.geometry,n=o.attributes;let i;t&&(i=k(new c.a,t,s)),e.push(new a.b(i,n,null,n[r]))}return e}function k(e,t,n=u(t.hasZ,t.hasM)){e.lengths[0]=t.points.length;const i=e.coords;let r=0;for(const s of t.points)for(let e=0;e<n;e++)i[r++]=s[e];return e}function z(e,t,n){if(!e)return null;const i=u(t,n),{coords:r,lengths:s}=e,o=[];let a=0;for(const l of s){const e=[];for(let t=0;t<l;t++){const t=[];for(let e=0;e<i;e++)t.push(r[a++]);e.push(t)}o.push(e)}return t?n?{paths:o,hasZ:t,hasM:n}:{paths:o,hasZ:t}:n?{paths:o,hasM:n}:{paths:o}}function D(e,t,n,i,r){const s=u(n,i);for(const o of t){const t=o.geometry,n=o.attributes;let i;t&&(i=B(new c.a,t,s)),e.push(new a.b(i,n,null,n[r]))}return e}function B(e,t,n=u(t.hasZ,t.hasM)){const{lengths:i,coords:r}=e;let s=0;for(const o of t.paths){for(const e of o)for(let t=0;t<n;t++)r[s++]=e[t];i.push(o.length)}return e}function A(e,t,n){if(!e)return null;const i=u(t,n),{coords:r,lengths:s}=e,o=[];let a=0;for(const l of s){const e=[];for(let t=0;t<l;t++){const t=[];for(let e=0;e<i;e++)t.push(r[a++]);e.push(t)}o.push(e)}return t?n?{rings:o,hasZ:t,hasM:n}:{rings:o,hasZ:t}:n?{rings:o,hasM:n}:{rings:o}}function V(e,t,n,i,r){for(const o of t){const t=o.geometry,l=o.centroid,u=o.attributes;let d;t&&(d=q(new c.a,t,n,i)),Object(s.l)(l)?e.push(new a.b(d,u,S(new c.a,l),u[r])):e.push(new a.b(d,u,null,u[r]))}return e}function q(e,t,n=t.hasZ,i=t.hasM){return L(e,t.rings,n,i),e}function L(e,t,n,i){const r=u(n,i),{lengths:s,coords:o}=e;let a=0;s.length=o.length=0;for(const l of t){for(const e of l)for(let t=0;t<r;t++)o[a++]=e[t];s.push(l.length)}return e}const G=[],Y=[];function U(e,t,n,i,r){G[0]=e;const[s]=X(Y,G,t,n,i,r);return G.length=Y.length=0,s}function X(e,t,n,r,s,o){if(e.length=0,!n){for(const n of t){const t=n.attributes[o];e.push(new a.b(null,n.attributes,null,t))}return e}switch(n){case"esriGeometryPoint":return P(e,t,r,s,o);case"esriGeometryMultipoint":return N(e,t,r,s,o);case"esriGeometryPolyline":return D(e,t,r,s,o);case"esriGeometryPolygon":return V(e,t,r,s,o);default:d.error("convertToFeatureSet:unknown-geometry",new i.a(`Unable to parse unknown geometry type '${n}'`)),e.length=0}return e}function H(e,t,n,r,s,o){const a=e.length;switch(n){case"esriGeometryPoint":P(e,t,r,s,o);break;case"esriGeometryMultipoint":N(e,t,r,s,o);break;case"esriGeometryPolyline":D(e,t,r,s,o);break;case"esriGeometryPolygon":V(e,t,r,s,o);break;default:d.error("convertToFeatureSet:unknown-geometry",new i.a(`Unable to parse unknown geometry type '${n}'`))}for(let i=0;i<t.length;i++)e[i+a].geometryType=n,e[i+a].insertAfter=t[i].insertAfter,e[i+a].groupId=t[i].groupId;return e}function Z(e,t,n,i){Y[0]=e,Q(G,Y,t,n,i);const r=G[0];return G.length=Y.length=0,r}function J(e,t,n){if(Object(s.k)(e))return null;const r=new c.a;return"hasZ"in e&&null==t&&(t=e.hasZ),"hasM"in e&&null==n&&(n=e.hasM),Object(o.f)(e)?C(null!=t?t:null!=e.z,null!=n?n:null!=e.m)(r,e):Object(o.g)(e)?q(r,e,t,n):Object(o.h)(e)?B(r,e,u(t,n)):Object(o.e)(e)?k(r,e,u(t,n)):void d.error("convertFromGeometry:unknown-geometry",new i.a(`Unable to parse unknown geometry type '${e}'`))}function $(e,t,n,r){const o=e&&("coords"in e?e:e.geometry);if(Object(s.k)(o))return null;switch(t){case"esriGeometryPoint":{let e=x;return n&&r?e=T:n?e=M:r&&(e=F),e(o)}case"esriGeometryMultipoint":return E(o,n,r);case"esriGeometryPolyline":return z(o,n,r);case"esriGeometryPolygon":return A(o,n,r);default:return void d.error("convertToGeometry:unknown-geometry",new i.a(`Unable to parse unknown geometry type '${t}'`))}}function Q(e,t,n,r,o){if(e.length=0,Object(s.k)(n))return function(e,t){for(const n of t)e.push({attributes:n.attributes});return e}(e,t);switch(n){case"esriGeometryPoint":return function(e,t,n,i){let r=x;n&&i?r=T:n?r=M:i&&(r=F);for(const o of t){const{geometry:t,attributes:n}=o,i=Object(s.l)(t)?r(t):null;e.push({attributes:n,geometry:i})}return e}(e,t,r,o);case"esriGeometryMultipoint":return function(e,t,n,i){for(const r of t){const{geometry:t,attributes:s}=r;let o;t&&(o=E(t,n,i)),e.push({attributes:s,geometry:o})}return e}(e,t,r,o);case"esriGeometryPolyline":return function(e,t,n,i){for(const r of t){const{geometry:t,attributes:o}=r;let a;Object(s.l)(t)&&(a=z(t,n,i)),e.push({attributes:o,geometry:a})}return e}(e,t,r,o);case"esriGeometryPolygon":return function(e,t,n,i){for(const r of t){const{geometry:t,attributes:o,centroid:a}=r;let l;if(Object(s.l)(t)&&(l=A(t,n,i)),a){const t=x(a);e.push({attributes:o,centroid:t,geometry:l})}else e.push({attributes:o,geometry:l})}return e}(e,t,r,o);default:d.error("convertToFeatureSet:unknown-geometry",new i.a(`Unable to parse unknown geometry type '${n}'`))}return e}function W(e){const{objectIdFieldName:t,spatialReference:n,transform:i,fields:r,hasM:s,hasZ:o,features:a,geometryType:l,exceededTransferLimit:c,uniqueIdField:u,queryGeometry:d,queryGeometryType:h}=e,f={features:Q([],a,l,o,s),fields:r,geometryType:l,objectIdFieldName:t,spatialReference:n,uniqueIdField:u,queryGeometry:$(d,h,!1,!1)};return i&&(f.transform=i),c&&(f.exceededTransferLimit=c),s&&(f.hasM=s),o&&(f.hasZ=o),f}function K(e,t){const n=new l.a,{hasM:r,hasZ:s,features:o,objectIdFieldName:a,spatialReference:c,geometryType:u,exceededTransferLimit:h,transform:f,fields:p}=e;return p&&(n.fields=p),n.geometryType=u,n.objectIdFieldName=a||t,n.spatialReference=c,n.objectIdFieldName?(o&&X(n.features,o,u,s,r,n.objectIdFieldName),h&&(n.exceededTransferLimit=h),r&&(n.hasM=r),s&&(n.hasZ=s),f&&(n.transform=f),n):(d.error(new i.a("optimized-features:invalid-objectIdFieldName","objectIdFieldName is missing")),n)}function ee(e){const{transform:t,features:n,hasM:i,hasZ:r}=e;if(!t)return e;for(const o of n)Object(s.l)(o.geometry)&&ae(o.geometry,o.geometry,i,r,t),o.centroid&&ae(o.centroid,o.centroid,i,r,t);return e.transform=null,e}function te(e,t){const{geometryType:n,features:i,hasM:r,hasZ:s}=t;if(!e)return t;for(let o=0;o<i.length;o++){const t=i[o],a=t.weakClone();a.geometry=new c.a,ne(a.geometry,t.geometry,r,s,n,e),t.centroid&&(a.centroid=new c.a,ne(a.centroid,t.centroid,r,s,"esriGeometryPoint",e)),i[o]=a}return t.transform=e,t}function ne(e,t,n,i,r,o,a=n,l=i){if(e.lengths.length&&(e.lengths.length=0),e.coords.length&&(e.coords.length=0),Object(s.k)(t)||!t.coords.length)return null;const c=h[r],{coords:d,lengths:f}=t,p=u(n,i),b=u(n&&a,i&&l),m=y(n,i,a,l);if(!f.length)return m(e.coords,d,0,0,g(o,d[0]),j(o,d[1])),e.lengths.length&&(e.lengths.length=0),e.coords.length=p,e;let O,v,w,x,S=0,M=0,_=M;for(const s of f){if(s<c)continue;let t=0;M=_,w=O=g(o,d[S]),x=v=j(o,d[S+1]),m(e.coords,d,M,S,w,x),t++,S+=p,M+=b;for(let n=1;n<s;n++,S+=p)w=g(o,d[S]),x=j(o,d[S+1]),w===O&&x===v||(m(e.coords,d,M,S,w-O,x-v),M+=b,t++,O=w,v=x);t>=c&&(e.lengths.push(t),_=M)}return e.coords.length=_,e.coords.length?e:null}function ie(e,t,n,i,r,s,o=n,a=i){if(e.lengths.length&&(e.lengths.length=0),e.coords.length&&(e.coords.length=0),!t||!t.coords.length)return null;const l=h[r],{coords:c,lengths:d}=t,f=u(n,i),p=u(n&&o,i&&a),b=y(n,i,o,a);if(!d.length)return b(e.coords,c,0,0,c[0],c[1]),e.lengths.length&&(e.lengths.length=0),e.coords.length=f,e;let m=0;const g=s*s;for(const u of d){if(u<l){m+=u*f;continue}const t=e.coords.length/p,n=m,i=m+(u-1)*f;b(e.coords,c,e.coords.length,n,c[n],c[n+1]),se(e.coords,c,f,g,b,n,i),b(e.coords,c,e.coords.length,i,c[i],c[i+1]);const r=e.coords.length/p-t;r>=l?e.lengths.push(r):e.coords.length=t*p,m+=u*f}return e.coords.length?e:null}function re(e,t,n,i){const r=e[t],s=e[t+1],o=e[n],a=e[n+1],l=e[i],c=e[i+1];let u=o,d=a,h=l-u,f=c-d;if(0!==h||0!==f){const e=((r-u)*h+(s-d)*f)/(h*h+f*f);e>1?(u=l,d=c):e>0&&(u+=h*e,d+=f*e)}return h=r-u,f=s-d,h*h+f*f}function se(e,t,n,i,r,s,o){let a,l=i,c=0;for(let u=s+n;u<o;u+=n)a=re(t,u,s,o),a>l&&(c=u,l=a);l>i&&(c-s>n&&se(e,t,n,i,r,s,c),r(e,t,e.length,c,t[c],t[c+1]),o-c>n&&se(e,t,n,i,r,c,o))}function oe(e,t,n,i){if(Object(s.k)(t)||!t.coords||!t.coords.length)return null;const r=u(n,i);let o=Number.POSITIVE_INFINITY,a=Number.POSITIVE_INFINITY,l=Number.NEGATIVE_INFINITY,c=Number.NEGATIVE_INFINITY;if(t&&t.coords){const e=t.coords;for(let t=0;t<e.length;t+=r){const n=e[t],i=e[t+1];o=Math.min(o,n),l=Math.max(l,n),a=Math.min(a,i),c=Math.max(c,i)}}return e[0]=o,e[1]=a,e[2]=l,e[3]=c,e}function ae(e,t,n,i,r){const{coords:s,lengths:o}=t,a=n?i?m:p:i?p:f,l=u(n,i);if(!s.length)return e!==t&&(e.lengths.length=0,e.coords.length=0),e;if(!o.length)return a(e.coords,s,0,0,O(r,s[0]),v(r,s[1])),e!==t&&(e.lengths.length=0,e.coords.length=l),e;const[c,d]=r.scale;let h=0;for(let u=0;u<o.length;u++){const t=o[u];e.lengths[u]=t;let n=O(r,s[h]),i=v(r,s[h+1]);a(e.coords,s,h,h,n,i),h+=l;for(let r=1;r<t;r++,h+=l)n+=s[h]*c,i-=s[h+1]*d,a(e.coords,s,h,h,n,i)}return e!==t&&(e.lengths.length=o.length,e.coords.length=s.length),e}function le(e,t,n,i,r,s){const o=u(n,i),a=y(n,i,r,s),l=t.coords;e.coords.length=0,e.lengths.length=0,e.lengths.push(...t.lengths);for(let c=0;c<l.length;c+=o)a(e.coords,l,e.coords.length,c,l[c],l[c+1]);return e}function ce(e,t,n,i){let r=0,s=e[i*t],o=e[i*(t+1)];for(let a=1;a<n;a++){const n=s+e[i*(t+a)],l=o+e[i*(t+a)+1],c=(n-s)*(l+o);s=n,o=l,r+=c}return.5*r}function ue(e,t){const{coords:n,lengths:i}=e;let r=0,s=0;for(let o=0;o<i.length;o++)s+=ce(n,r,i[o],t),r+=o;return Math.abs(s)}function de(e,t){if(Object(s.k)(e))return null;const n=e.clone(),i=e.coords,r=e.lengths;let o=0;for(let s=0;s<r.length;s++){const e=r[s];let a=i[t*o],l=i[t*o+1];for(let r=1;r<e;r++){const e=a+i[t*(o+r)],s=l+i[t*(o+r)+1];n.coords[t*(o+r)]=e,n.coords[t*(o+r)+1]=s,a=e,l=s}o+=e}return n}},182:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var i=n(90);const r=Object(i.b)()({esriTimeUnitsMilliseconds:"milliseconds",esriTimeUnitsSeconds:"seconds",esriTimeUnitsMinutes:"minutes",esriTimeUnitsHours:"hours",esriTimeUnitsDays:"days",esriTimeUnitsWeeks:"weeks",esriTimeUnitsMonths:"months",esriTimeUnitsYears:"years",esriTimeUnitsDecades:"decades",esriTimeUnitsCenturies:"centuries",esriTimeUnitsUnknown:void 0})},186:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));class i{constructor(e=[],t=[],n=!1){this.lengths=null!=e?e:[],this.coords=null!=t?t:[],this.hasIndeterminateRingOrder=n}get isPoint(){return 0===this.lengths.length}get maxLength(){return Math.max(...this.lengths)}get size(){return this.lengths.reduce(((e,t)=>e+t))}forEachVertex(e){let t=0;this.lengths.length||e(this.coords[0],this.coords[1]);for(let n=0;n<this.lengths.length;n++){const i=this.lengths[n];for(let n=0;n<i;n++)e(this.coords[2*(n+t)],this.coords[2*(n+t)+1]);t+=i}}clone(e){return e?(e.set(this.coords),new i(this.lengths.slice(),e,this.hasIndeterminateRingOrder)):new i(this.lengths.slice(),this.coords.slice(),this.hasIndeterminateRingOrder)}}},193:function(e,t,n){"use strict";n.d(t,"a",(function(){return P}));var i,r=n(79),s=n(90),o=n(86),a=n(81),l=(n(84),n(82),n(104)),c=n(94),u=n(93),d=n(80),h=n(83),f=n(172),p=n(154),b=n(318),m=(n(98),n(95)),y=n(169);let g=i=class extends o.a{constructor(e){super(e),this.type="query-table"}clone(){var e;const{workspaceId:t,query:n,oidFields:r,spatialReference:s,geometryType:o}=this,a={workspaceId:t,query:n,oidFields:r,spatialReference:null!=(e=null==s?void 0:s.clone())?e:void 0,geometryType:o};return new i(a)}};var j;Object(r.a)([Object(c.a)({queryTable:"query-table"})],g.prototype,"type",void 0),Object(r.a)([Object(a.b)({type:String,json:{write:!0}})],g.prototype,"workspaceId",void 0),Object(r.a)([Object(a.b)({type:String,json:{write:!0}})],g.prototype,"query",void 0),Object(r.a)([Object(a.b)({type:String,json:{write:!0}})],g.prototype,"oidFields",void 0),Object(r.a)([Object(a.b)({type:m.a,json:{write:!0}})],g.prototype,"spatialReference",void 0),Object(r.a)([Object(c.a)(y.a)],g.prototype,"geometryType",void 0),g=i=Object(r.a)([Object(d.a)("esri.layers.support.source.QueryTableDataSource")],g);let O=j=class extends o.a{constructor(e){super(e),this.type="raster"}clone(){const{workspaceId:e,dataSourceName:t}=this;return new j({workspaceId:e,dataSourceName:t})}};var v;Object(r.a)([Object(c.a)({raster:"raster"})],O.prototype,"type",void 0),Object(r.a)([Object(a.b)({type:String,json:{write:!0}})],O.prototype,"dataSourceName",void 0),Object(r.a)([Object(a.b)({type:String,json:{write:!0}})],O.prototype,"workspaceId",void 0),O=j=Object(r.a)([Object(d.a)("esri.layers.support.source.RasterDataSource")],O);let w=v=class extends o.a{constructor(e){super(e),this.type="table"}clone(){const{workspaceId:e,gdbVersion:t,dataSourceName:n}=this;return new v({workspaceId:e,gdbVersion:t,dataSourceName:n})}};var x,S;Object(r.a)([Object(c.a)({table:"table"})],w.prototype,"type",void 0),Object(r.a)([Object(a.b)({type:String,json:{write:!0}})],w.prototype,"workspaceId",void 0),Object(r.a)([Object(a.b)({type:String,json:{write:!0}})],w.prototype,"gdbVersion",void 0),Object(r.a)([Object(a.b)({type:String,json:{write:!0}})],w.prototype,"dataSourceName",void 0),w=v=Object(r.a)([Object(d.a)("esri.layers.support.source.TableDataSource")],w);const M=Object(s.b)()({esriLeftInnerJoin:"left-inner-join",esriLeftOuterJoin:"left-outer-join"});let _=x=class extends o.a{constructor(e){super(e),this.type="join-table"}readLeftTableSource(e,t,n){return I()(e,t,n)}castLeftTableSource(e){return Object(h.k)(R(),e)}readRightTableSource(e,t,n){return I()(e,t,n)}castRightTableSource(e){return Object(h.k)(R(),e)}clone(){var e,t;const{leftTableKey:n,rightTableKey:i,leftTableSource:r,rightTableSource:s,joinType:o}=this,a={leftTableKey:n,rightTableKey:i,leftTableSource:null!=(e=null==r?void 0:r.clone())?e:void 0,rightTableSource:null!=(t=null==s?void 0:s.clone())?t:void 0,joinType:o};return new x(a)}};Object(r.a)([Object(c.a)({joinTable:"join-table"})],_.prototype,"type",void 0),Object(r.a)([Object(a.b)({type:String,json:{write:!0}})],_.prototype,"leftTableKey",void 0),Object(r.a)([Object(a.b)({type:String,json:{write:!0}})],_.prototype,"rightTableKey",void 0),Object(r.a)([Object(a.b)({json:{write:!0}})],_.prototype,"leftTableSource",void 0),Object(r.a)([Object(u.a)("leftTableSource")],_.prototype,"readLeftTableSource",null),Object(r.a)([Object(l.a)("leftTableSource")],_.prototype,"castLeftTableSource",null),Object(r.a)([Object(a.b)({json:{write:!0}})],_.prototype,"rightTableSource",void 0),Object(r.a)([Object(u.a)("rightTableSource")],_.prototype,"readRightTableSource",null),Object(r.a)([Object(l.a)("rightTableSource")],_.prototype,"castRightTableSource",null),Object(r.a)([Object(c.a)(M)],_.prototype,"joinType",void 0),_=x=Object(r.a)([Object(d.a)("esri.layers.support.source.JoinTableDataSource")],_);let F=null;function I(){return F||(F=Object(f.b)({types:R()})),F}let T=null;function R(){return T||(T={key:"type",base:null,typeMap:{"data-layer":P,"map-layer":b.a}}),T}const C={key:"type",base:null,typeMap:{"join-table":_,"query-table":g,raster:O,table:w}};let P=S=class extends o.a{constructor(e){super(e),this.type="data-layer"}clone(){const{fields:e,dataSource:t}=this;return new S({fields:e,dataSource:t})}};Object(r.a)([Object(c.a)({dataLayer:"data-layer"})],P.prototype,"type",void 0),Object(r.a)([Object(a.b)({type:[p.a],json:{write:!0}})],P.prototype,"fields",void 0),Object(r.a)([Object(a.b)({types:C,json:{write:!0}})],P.prototype,"dataSource",void 0),P=S=Object(r.a)([Object(d.a)("esri.layers.support.source.DataLayerSource")],P),P.from=Object(h.m)(P)},196:function(e,t,n){"use strict";n.d(t,"a",(function(){return l})),n.d(t,"b",(function(){return a}));n(82);var i=n(165),r=n(123),s=n(167),o=n(168);const a={key:"type",base:r.a,typeMap:{range:o.a,"coded-value":i.a,inherited:s.a}};function l(e){if(!e||!e.type)return null;switch(e.type){case"range":return o.a.fromJSON(e);case"codedValue":return i.a.fromJSON(e);case"inherited":return s.a.fromJSON(e)}return null}},198:function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(i){"object"===typeof window&&(n=window)}e.exports=n},200:function(e,t,n){"use strict";n.d(t,"a",(function(){return f}));var i,r=n(79),s=n(103),o=n(89),a=n(81),l=n(83),c=n(94),u=n(80),d=n(162);let h=i=class extends d.a{constructor(e){super(e),this.algorithm=null,this.fromColor=null,this.toColor=null,this.type="algorithmic"}clone(){return new i({fromColor:Object(o.a)(this.fromColor),toColor:Object(o.a)(this.toColor),algorithm:this.algorithm})}};Object(r.a)([Object(c.a)({esriCIELabAlgorithm:"cie-lab",esriHSVAlgorithm:"hsv",esriLabLChAlgorithm:"lab-lch"})],h.prototype,"algorithm",void 0),Object(r.a)([Object(a.b)({type:s.a,json:{type:[l.a],write:!0}})],h.prototype,"fromColor",void 0),Object(r.a)([Object(a.b)({type:s.a,json:{type:[l.a],write:!0}})],h.prototype,"toColor",void 0),Object(r.a)([Object(a.b)({type:["algorithmic"]})],h.prototype,"type",void 0),h=i=Object(r.a)([Object(u.a)("esri.rest.support.AlgorithmicColorRamp")],h);const f=h},213:function(e,t,n){"use strict";n.d(t,"a",(function(){return d})),n.d(t,"b",(function(){return s})),n.d(t,"c",(function(){return o})),n.d(t,"d",(function(){return u})),n.d(t,"e",(function(){return h}));n(202),n(166);var i=n(85),r=n(217);n(171);function s(e,t,n={}){return a(e,t,n,l)}function o(e,t,n={}){return a(e,t,n,c)}function a(e,t,n={},s){let o=null;const a=n.once?(e,n)=>{s(e)&&(Object(i.s)(o),t(e,n))}:(e,n)=>{s(e)&&t(e,n)};if(o=Object(r.e)(e,a,n.sync,n.equals),n.initial){const t=e();a(t,t)}return o}function l(e){return!0}function c(e){return!!e}const u={sync:!0},d={initial:!0},h={sync:!0,initial:!0}},220:function(e,t,n){"use strict";n.d(t,"a",(function(){return N})),n.d(t,"b",(function(){return k})),n.d(t,"c",(function(){return h})),n.d(t,"d",(function(){return y})),n.d(t,"e",(function(){return O})),n.d(t,"f",(function(){return s})),n.d(t,"g",(function(){return m})),n.d(t,"h",(function(){return I})),n.d(t,"i",(function(){return E})),n.d(t,"j",(function(){return a})),n.d(t,"k",(function(){return u})),n.d(t,"l",(function(){return d})),n.d(t,"m",(function(){return l})),n.d(t,"n",(function(){return c})),n.d(t,"o",(function(){return R})),n.d(t,"p",(function(){return o})),n.d(t,"q",(function(){return S})),n.d(t,"r",(function(){return v})),n.d(t,"s",(function(){return P})),n.d(t,"t",(function(){return j})),n.d(t,"u",(function(){return w})),n.d(t,"v",(function(){return x})),n.d(t,"w",(function(){return F})),n.d(t,"x",(function(){return _})),n.d(t,"y",(function(){return M})),n.d(t,"z",(function(){return g})),n.d(t,"A",(function(){return T}));var i=n(85),r=(n(96),n(118));function s(e=k){return[e[0],e[1],e[2],e[3],e[4],e[5]]}function o(e,t,n,i,r,o,a=s()){return a[0]=e,a[1]=t,a[2]=n,a[3]=i,a[4]=r,a[5]=o,a}function a(e,t){e[0]=Math.min(e[0],t[0]),e[1]=Math.min(e[1],t[1]),e[2]=Math.min(e[2],t[2]),e[3]=Math.max(e[3],t[3]),e[4]=Math.max(e[4],t[4]),e[5]=Math.max(e[5],t[5])}function l(e,t){e[0]=Math.min(e[0],t[0]),e[1]=Math.min(e[1],t[1]),e[3]=Math.max(e[3],t[2]),e[4]=Math.max(e[4],t[3])}function c(e,t){e[0]=Math.min(e[0],t[0]),e[1]=Math.min(e[1],t[1]),e[2]=Math.min(e[2],t[2]),e[3]=Math.max(e[3],t[0]),e[4]=Math.max(e[4],t[1]),e[5]=Math.max(e[5],t[2])}function u(e,t,n=0,i=t.length/3){let r=e[0],s=e[1],o=e[2],a=e[3],l=e[4],c=e[5];for(let u=0;u<i;u++)r=Math.min(r,t[n+3*u]),s=Math.min(s,t[n+3*u+1]),o=Math.min(o,t[n+3*u+2]),a=Math.max(a,t[n+3*u]),l=Math.max(l,t[n+3*u+1]),c=Math.max(c,t[n+3*u+2]);e[0]=r,e[1]=s,e[2]=o,e[3]=a,e[4]=l,e[5]=c}function d(e,t,n){const i=t.length;let r=e[0],s=e[1],o=e[2],a=e[3],l=e[4],c=e[5];if(n)for(let u=0;u<i;u++){const e=t[u];r=Math.min(r,e[0]),s=Math.min(s,e[1]),o=Math.min(o,e[2]),a=Math.max(a,e[0]),l=Math.max(l,e[1]),c=Math.max(c,e[2])}else for(let u=0;u<i;u++){const e=t[u];r=Math.min(r,e[0]),s=Math.min(s,e[1]),a=Math.max(a,e[0]),l=Math.max(l,e[1])}e[0]=r,e[1]=s,e[2]=o,e[3]=a,e[4]=l,e[5]=c}function h(e){for(let t=0;t<6;t++)if(!isFinite(e[t]))return!1;return!0}function f(e){return e[0]>=e[3]?0:e[3]-e[0]}function p(e){return e[1]>=e[4]?0:e[4]-e[1]}function b(e){return e[2]>=e[5]?0:e[5]-e[2]}function m(e){const t=f(e),n=b(e),i=p(e);return Math.sqrt(t*t+n*n+i*i)}function y(e,t=[0,0,0]){return t[0]=e[0]+f(e)/2,t[1]=e[1]+p(e)/2,t[2]=e[2]+b(e)/2,t}function g(e,t=[0,0,0]){return t[0]=f(e),t[1]=p(e),t[2]=b(e),t}function j(e){return Math.max(f(e),b(e),p(e))}function O(e,t){return t[0]>=e[0]&&t[1]>=e[1]&&t[2]>=e[2]&&t[0]<=e[3]&&t[1]<=e[4]&&t[2]<=e[5]}function v(e,t){return!!Object(i.k)(t)||function(e,t){return Math.max(t[0],e[0])<=Math.min(t[3],e[3])&&Math.max(t[1],e[1])<=Math.min(t[4],e[4])&&Math.max(t[2],e[2])<=Math.min(t[5],e[5])}(e,t)}function w(e,t,n,i,r=e){return r[0]=e[0]+t,r[1]=e[1]+n,r[2]=e[2]+i,r[3]=e[3]+t,r[4]=e[4]+n,r[5]=e[5]+i,r}function x(e,t,n=e){const i=e[0]+f(e)/2,r=e[1]+p(e)/2,s=e[2]+b(e)/2;return n[0]=i+(e[0]-i)*t,n[1]=r+(e[1]-r)*t,n[2]=s+(e[2]-s)*t,n[3]=i+(e[3]-i)*t,n[4]=r+(e[4]-r)*t,n[5]=s+(e[5]-s)*t,n}function S(e,t){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t}function M(e,t,n=e){return n[0]=t[0],n[1]=t[1],n[2]=t[2],n!==e&&(n[3]=e[3],n[4]=e[4],n[5]=e[5]),n}function _(e,t,n=e){return n[3]=t[0],n[4]=t[1],n[5]=t[2],n!==e&&(n[0]=e[0],n[1]=e[1],n[2]=e[2]),e}function F(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e}function I(e){return e?F(e,N):s(N)}function T(e,t){return t||(t=Object(r.l)()),t[0]=e[0],t[1]=e[1],t[2]=e[3],t[3]=e[4],t}function R(e,t){return e[0]=t[0],e[1]=t[1],e[2]=Number.NEGATIVE_INFINITY,e[3]=t[2],e[4]=t[3],e[5]=Number.POSITIVE_INFINITY,e}function C(e){return 6===e.length}function P(e){return 0===f(e)&&0===p(e)&&0===b(e)}function E(e,t,n){if(Object(i.k)(e)||Object(i.k)(t))return e===t;if(!C(e)||!C(t))return!1;if(n){for(let i=0;i<e.length;i++)if(!n(e[i],t[i]))return!1}else for(let i=0;i<e.length;i++)if(e[i]!==t[i])return!1;return!0}const N=[1/0,1/0,1/0,-1/0,-1/0,-1/0],k=[0,0,0,0,0,0];s()},221:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return s})),n.d(t,"b",(function(){return i})),n.d(t,"c",(function(){return r}));var i="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof e?e:"undefined"!=typeof self?self:{};function r(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function s(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}}).call(this,n(198))},226:function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var i,r=n(79),s=n(86),o=n(153),a=n(81),l=(n(84),n(82),n(83),n(80)),c=n(182);let u=i=class extends s.a{constructor(e){super(e),this.value=0,this.unit="milliseconds"}toMilliseconds(){return Object(o.a)(this.value,this.unit,"milliseconds")}clone(){return new i({value:this.value,unit:this.unit})}};Object(r.a)([Object(a.b)({type:Number,json:{write:!0},nonNullable:!0})],u.prototype,"value",void 0),Object(r.a)([Object(a.b)({type:c.a.apiValues,json:{type:c.a.jsonValues,read:c.a.read,write:c.a.write},nonNullable:!0})],u.prototype,"unit",void 0),u=i=Object(r.a)([Object(l.a)("esri.TimeInterval")],u);const d=u},229:function(e,t,n){"use strict";var i;function r(e,t){switch(e.type){case"range":{const n="range"in e?e.range[0]:e.minValue,r="range"in e?e.range[1]:e.maxValue;if(+t<n||+t>r)return i.VALUE_OUT_OF_RANGE;break}case"coded-value":case"codedValue":if(null==e.codedValues||e.codedValues.every((e=>null==e||e.code!==t)))return i.INVALID_CODED_VALUE}return null}function s(e){if(e&&"range"===e.type)return{min:"range"in e?e.range[0]:e.minValue,max:"range"in e?e.range[1]:e.maxValue}}n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return s})),n.d(t,"c",(function(){return r})),function(e){e.VALUE_OUT_OF_RANGE="domain-validation-error::value-out-of-range",e.INVALID_CODED_VALUE="domain-validation-error::invalid-coded-value"}(i||(i={}))},241:function(e,t,n){"use strict";n.d(t,"a",(function(){return s})),n.d(t,"b",(function(){return o})),n.d(t,"c",(function(){return a}));var i=n(85),r=n(219);const s=-3;class o{constructor(e,t,n){this._namespace=e,this._storage=t,this._removeFunc=!1,this._hit=0,this._miss=0,this._storage.register(this),this._namespace+=":",n&&(this._storage.registerRemoveFunc(this._namespace,n),this._removeFunc=!0)}destroy(){this._storage.clear(this._namespace),this._removeFunc&&this._storage.deregisterRemoveFunc(this._namespace),this._storage.deregister(this),this._storage=null}get namespace(){return this._namespace.slice(0,-1)}get hitRate(){return this._hit/(this._hit+this._miss)}get size(){return this._storage.size}get maxSize(){return this._storage.maxSize}resetHitRate(){this._hit=this._miss=0}put(e,t,n,i=0){this._storage.put(this._namespace+e,t,n,i)}get(e){const t=this._storage.get(this._namespace+e);return void 0===t?++this._miss:++this._hit,t}pop(e){const t=this._storage.pop(this._namespace+e);return void 0===t?++this._miss:++this._hit,t}updateSize(e,t,n){this._storage.updateSize(this._namespace+e,t,n)}clear(){this._storage.clear(this._namespace)}clearAll(){this._storage.clearAll()}getStats(){return this._storage.getStats()}resetStats(){this._storage.resetStats()}}class a{constructor(e=10485760){this._maxSize=e,this._db=new Map,this._size=0,this._hit=0,this._miss=0,this._removeFuncs=new r.a,this._users=new r.a}destroy(){this.clearAll(),this._removeFuncs.clear(),this._users.clear(),this._db=null}register(e){this._users.push(e)}deregister(e){this._users.removeUnordered(e)}registerRemoveFunc(e,t){this._removeFuncs.push([e,t])}deregisterRemoveFunc(e){this._removeFuncs.filterInPlace((t=>t[0]!==e))}get size(){return this._size}get maxSize(){return this._maxSize}set maxSize(e){this._maxSize=Math.max(e,0),this._checkSizeLimit()}put(e,t,n,i){const r=this._db.get(e);if(r&&(this._size-=r.size,this._db.delete(e),r.entry!==t&&this._notifyRemove(e,r.entry,0)),n>this._maxSize)return void this._notifyRemove(e,t,0);if(void 0===t)return void console.warn("Refusing to cache undefined entry ");if(!n||n<0)return void console.warn("Refusing to cache entry with invalid size "+n);const o=1+Math.max(i,s)-s;this._db.set(e,{entry:t,size:n,lifetime:o,lives:o}),this._size+=n,this._checkSizeLimit()}updateSize(e,t,n){const r=this._db.get(e);if(r&&r.entry===t){for(this._size-=r.size;n>this._maxSize;){const r=this._notifyRemove(e,t,1);if(!(Object(i.l)(r)&&r>0))return void this._db.delete(e);n=r}r.size=n,this._size+=n,this._checkSizeLimit()}}pop(e){const t=this._db.get(e);if(t)return this._size-=t.size,this._db.delete(e),++this._hit,t.entry;++this._miss}get(e){const t=this._db.get(e);if(void 0!==t)return this._db.delete(e),t.lives=t.lifetime,this._db.set(e,t),++this._hit,t.entry;++this._miss}getStats(){const e={Size:Math.round(this._size/1048576)+"/"+Math.round(this._maxSize/1048576)+"MB","Hit rate":Math.round(100*this._getHitRate())+"%",Entries:this._db.size.toString()},t={},n=new Array;this._db.forEach(((e,i)=>{const r=e.lifetime;n[r]=(n[r]||0)+e.size,this._users.forAll((n=>{const r=n.namespace;if(i.startsWith(r)){const n=t[r]||0;t[r]=n+e.size}}))}));const i={};this._users.forAll((e=>{const n=e.namespace;if(!isNaN(e.hitRate)&&e.hitRate>0){const r=t[n]||0;t[n]=r,i[n]=Math.round(100*e.hitRate)+"%"}else i[n]="0%"}));const r=Object.keys(t);r.sort(((e,n)=>t[n]-t[e])),r.forEach((n=>e[n]=Math.round(t[n]/2**20)+"MB / "+i[n]));for(let o=n.length-1;o>=0;--o){const t=n[o];t&&(e["Priority "+(o+s-1)]=Math.round(t/this.size*100)+"%")}return e}resetStats(){this._hit=this._miss=0,this._users.forAll((e=>e.resetHitRate()))}clear(e){this._db.forEach(((t,n)=>{n.startsWith(e)&&(this._size-=t.size,this._db.delete(n),this._notifyRemove(n,t.entry,0))}))}clearAll(){this._db.forEach(((e,t)=>this._notifyRemove(t,e.entry,0))),this._size=0,this._db.clear()}_getHitRate(){return this._hit/(this._hit+this._miss)}_notifyRemove(e,t,n){let i;return this._removeFuncs.some((r=>{if(e.startsWith(r[0])){const e=r[1](t,n);return"number"==typeof e&&(i=e),!0}return!1})),i}_checkSizeLimit(){if(!(this._size<=this._maxSize))for(const[e,t]of this._db){if(this._db.delete(e),t.lives<=1){this._size-=t.size;const n=this._notifyRemove(e,t.entry,1);Object(i.l)(n)&&n>0&&(this._size+=n,t.lives=t.lifetime,t.size=n,this._db.set(e,t))}else--t.lives,this._db.set(e,t);if(this._size<=.9*this.maxSize)return}}}},243:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var i=n(105);function r(e){return"oid"===e.type||"esriFieldTypeOID"===e.type}function s(e){return"global-id"===e.type||"esriFieldTypeGlobalID"===e.type}class o{constructor(e){if(this.fields=e,this._fieldsMap=new Map,this._dateFieldsSet=new Set,this._numericFieldsSet=new Set,this.dateFields=[],this.numericFields=[],this._requiredFields=null,!e)return;const t=[];for(const o of e){const e=o&&o.name;if(e){const l=a(e);this._fieldsMap.set(e,o),this._fieldsMap.set(l,o),t.push(l),"date"===(n=o).type||"esriFieldTypeDate"===n.type?(this.dateFields.push(o),this._dateFieldsSet.add(o)):Object(i.u)(o)&&(this._numericFieldsSet.add(o),this.numericFields.push(o)),r(o)||s(o)||(o.editable=null==o.editable||!!o.editable,o.nullable=null==o.nullable||!!o.nullable)}}var n;t.sort(),this.uid=t.join(",")}destroy(){this._fieldsMap.clear()}get requiredFields(){if(!this._requiredFields){this._requiredFields=[];for(const e of this.fields)r(e)||s(e)||e.nullable||void 0!==Object(i.r)(e)||this._requiredFields.push(e)}return this._requiredFields}has(e){return null!=this.get(e)}get(e){return null!=e?this._fieldsMap.get(e)||this._fieldsMap.get(a(e)):void 0}isDateField(e){return this._dateFieldsSet.has(this.get(e))}isNumericField(e){return this._numericFieldsSet.has(this.get(e))}normalizeFieldName(e){const t=this.get(e);if(t)return t.name}}function a(e){return e.toLowerCase().trim()}},246:function(e,t,n){"use strict";n.d(t,"a",(function(){return f}));var i=n(79),r=n(103),s=n(90),o=n(86),a=n(81),l=(n(84),n(82),n(83),n(93)),c=n(80);const u=new s.a({esriSMS:"simple-marker",esriPMS:"picture-marker",esriSLS:"simple-line",esriSFS:"simple-fill",esriPFS:"picture-fill",esriTS:"text",esriSHD:"shield-label-symbol",PointSymbol3D:"point-3d",LineSymbol3D:"line-3d",PolygonSymbol3D:"polygon-3d",WebStyleSymbol:"web-style",MeshSymbol3D:"mesh-3d",LabelSymbol3D:"label-3d",CIMSymbolReference:"cim"});let d=0,h=class extends o.a{constructor(e){super(e),this.id="sym"+d++,this.type=null}set color(e){this._set("color",e)}readColor(e){return e&&null!=e[0]?[e[0],e[1],e[2],e[3]/255]:e}async collectRequiredFields(e,t){}hash(){return JSON.stringify(this.toJSON())}clone(){}};Object(i.a)([Object(a.b)({type:u.apiValues,readOnly:!0,json:{read:!1,write:{ignoreOrigin:!0,writer:u.write}}})],h.prototype,"type",void 0),Object(i.a)([Object(a.b)({type:r.a,value:new r.a([0,0,0,1]),json:{write:{allowNull:!0}}})],h.prototype,"color",null),Object(i.a)([Object(l.a)("color")],h.prototype,"readColor",null),h=Object(i.a)([Object(c.a)("esri.symbols.Symbol")],h);const f=h},256:function(e,t,n){"use strict";n.d(t,"a",(function(){return j}));var i,r=n(79),s=n(119),o=n(226),a=n(86),l=n(89),c=n(85),u=n(81),d=(n(83),n(93)),h=n(80),f=n(92);n(84),n(82);let p=i=class extends a.a{constructor(e){super(e),this.respectsDaylightSaving=!1,this.timezone=null}readRespectsDaylightSaving(e,t){return void 0!==t.respectsDaylightSaving?t.respectsDaylightSaving:void 0!==t.respectDaylightSaving&&t.respectDaylightSaving}clone(){const{respectsDaylightSaving:e,timezone:t}=this;return new i({respectsDaylightSaving:e,timezone:t})}};Object(r.a)([Object(u.b)({type:Boolean,json:{write:!0}})],p.prototype,"respectsDaylightSaving",void 0),Object(r.a)([Object(d.a)("respectsDaylightSaving",["respectsDaylightSaving","respectDaylightSaving"])],p.prototype,"readRespectsDaylightSaving",null),Object(r.a)([Object(u.b)({type:String,json:{read:{source:"timeZone"},write:{target:"timeZone"}}})],p.prototype,"timezone",void 0),p=i=Object(r.a)([Object(h.a)("esri.layers.support.TimeReference")],p);const b=p;var m,y=n(182);let g=m=class extends a.a{constructor(e){super(e),this.cumulative=!1,this.endField=null,this.fullTimeExtent=null,this.hasLiveData=!1,this.interval=null,this.startField=null,this.timeReference=null,this.trackIdField=null,this.useTime=!0}readFullTimeExtent(e,t){if(!t.timeExtent||!Array.isArray(t.timeExtent)||2!==t.timeExtent.length)return null;const n=new Date(t.timeExtent[0]),i=new Date(t.timeExtent[1]);return new s.a({start:n,end:i})}writeFullTimeExtent(e,t){e&&Object(c.l)(e.start)&&Object(c.l)(e.end)?t.timeExtent=[e.start.getTime(),e.end.getTime()]:t.timeExtent=null}readInterval(e,t){return t.timeInterval&&t.timeIntervalUnits?new o.a({value:t.timeInterval,unit:y.a.fromJSON(t.timeIntervalUnits)}):t.defaultTimeInterval&&t.defaultTimeIntervalUnits?new o.a({value:t.defaultTimeInterval,unit:y.a.fromJSON(t.defaultTimeIntervalUnits)}):null}writeInterval(e,t){if(e){const n=e.toJSON();t.timeInterval=n.value,t.timeIntervalUnits=n.unit}else t.timeInterval=null,t.timeIntervalUnits=null}clone(){const{cumulative:e,endField:t,hasLiveData:n,interval:i,startField:r,timeReference:s,fullTimeExtent:o,trackIdField:a,useTime:c}=this;return new m({cumulative:e,endField:t,hasLiveData:n,interval:i,startField:r,timeReference:Object(l.a)(s),fullTimeExtent:Object(l.a)(o),trackIdField:a,useTime:c})}};Object(r.a)([Object(u.b)({type:Boolean,json:{read:{source:"exportOptions.timeDataCumulative"},write:{target:"exportOptions.timeDataCumulative"}}})],g.prototype,"cumulative",void 0),Object(r.a)([Object(u.b)({type:String,json:{read:{source:"endTimeField"},write:{target:"endTimeField",allowNull:!0}}})],g.prototype,"endField",void 0),Object(r.a)([Object(u.b)({type:s.a,json:{write:{enabled:!0,allowNull:!0}}})],g.prototype,"fullTimeExtent",void 0),Object(r.a)([Object(d.a)("fullTimeExtent",["timeExtent"])],g.prototype,"readFullTimeExtent",null),Object(r.a)([Object(f.a)("fullTimeExtent")],g.prototype,"writeFullTimeExtent",null),Object(r.a)([Object(u.b)({type:Boolean,json:{write:!0}})],g.prototype,"hasLiveData",void 0),Object(r.a)([Object(u.b)({type:o.a,json:{write:{enabled:!0,allowNull:!0}}})],g.prototype,"interval",void 0),Object(r.a)([Object(d.a)("interval",["timeInterval","timeIntervalUnits","defaultTimeInterval","defaultTimeIntervalUnits"])],g.prototype,"readInterval",null),Object(r.a)([Object(f.a)("interval")],g.prototype,"writeInterval",null),Object(r.a)([Object(u.b)({type:String,json:{read:{source:"startTimeField"},write:{target:"startTimeField",allowNull:!0}}})],g.prototype,"startField",void 0),Object(r.a)([Object(u.b)({type:b,json:{write:{enabled:!0,allowNull:!0}}})],g.prototype,"timeReference",void 0),Object(r.a)([Object(u.b)({type:String,json:{write:{enabled:!0,allowNull:!0}}})],g.prototype,"trackIdField",void 0),Object(r.a)([Object(u.b)({type:Boolean,json:{read:{source:"exportOptions.useTime"},write:{target:"exportOptions.useTime"}}})],g.prototype,"useTime",void 0),g=m=Object(r.a)([Object(h.a)("esri.layers.support.TimeInfo")],g);const j=g},262:function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return r})),n.d(t,"c",(function(){return s}));var i=n(85);class r{constructor(e=null,t={},n,i){this.geometry=e,this.attributes=t,this.centroid=n,this.objectId=i,this.displayId=0,this.geohashX=0,this.geohashY=0}weakClone(){const e=new r(this.geometry,this.attributes,this.centroid,this.objectId);return e.displayId=this.displayId,e.geohashX=this.geohashX,e.geohashY=this.geohashY,e}}function s(e){return!(Object(i.k)(e.geometry)||!e.geometry.coords||!e.geometry.coords.length)}class o extends r{}},267:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));const i=new(n(90).a)({esriFieldTypeSmallInteger:"small-integer",esriFieldTypeInteger:"integer",esriFieldTypeSingle:"single",esriFieldTypeDouble:"double",esriFieldTypeLong:"long",esriFieldTypeString:"string",esriFieldTypeDate:"date",esriFieldTypeOID:"oid",esriFieldTypeGeometry:"geometry",esriFieldTypeBlob:"blob",esriFieldTypeRaster:"raster",esriFieldTypeGUID:"guid",esriFieldTypeGlobalID:"global-id",esriFieldTypeXML:"xml"})},268:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var i=n(85),r=n(114),s=n(110);function o(e,t,n){if(Object(i.k)(t)||Object(i.k)(n)||n.vcsWkid||Object(s.d)(t,n))return null;const o=Object(r.f)(t)/Object(r.f)(n);if(1===o)return null;switch(e){case"point":case"esriGeometryPoint":return e=>function(e,t){e&&null!=e.z&&(e.z*=t)}(e,o);case"polyline":case"esriGeometryPolyline":return e=>function(e,t){if(e)for(const n of e.paths)for(const e of n)e.length>2&&(e[2]*=t)}(e,o);case"polygon":case"esriGeometryPolygon":return e=>function(e,t){if(e)for(const n of e.rings)for(const e of n)e.length>2&&(e[2]*=t)}(e,o);case"multipoint":case"esriGeometryMultipoint":return e=>function(e,t){if(e)for(const n of e.points)n.length>2&&(n[2]*=t)}(e,o);case"extent":case"esriGeometryExtent":return e=>function(e,t){e&&null!=e.zmin&&null!=e.zmax&&(e.zmin*=t,e.zmax*=t)}(e,o);default:return null}}},271:function(e,t,n){"use strict";n.d(t,"a",(function(){return f}));var i=n(79),r=n(99),s=n(122),o=n(85),a=n(213),l=n(248),c=n(112),u=n(223),d=n(81),h=n(80);let f=class extends r.a{constructor(){super(...arguments),this.updating=!1,this.handleId=0,this.handles=new s.a,this.scheduleHandleId=0,this.pendingPromises=new Set}destroy(){this.removeAll(),this.handles.destroy()}add(e,t,n,i=0){const r=0!=(1&i),s=++this.handleId;r||this.installSyncUpdatingWatch(e,t,s);const o=0!=(2&i)?Object(c.a)(e,t,n,r):e.watch(t,n,r);return this.handles.add(o,s),{remove:()=>this.handles.remove(s)}}addOnCollectionPropertyChange(e,t,n,i=0){const r=0!=(2&i),s=++this.handleId;return this.handles.add([Object(c.b)(e,t,"after-changes",this.createSyncUpdatingCallback()),Object(c.b)(e,t,"change",n,r?e=>{n({added:e.items,removed:[],moved:[],target:e})}:void 0)],s),{remove:()=>{this.handles.remove(s)}}}addOnCollectionChange(e,t,n=0){const i=0!=(2&n),r=++this.handleId;return this.handles.add([e.on("after-changes",this.createSyncUpdatingCallback()),e.on("change",t)],r),i&&t({added:e.items,removed:[],moved:[],target:e}),{remove:()=>{this.handles.remove(r)}}}addPromise(e){if(Object(o.k)(e))return e;const t=++this.handleId;this.handles.add({remove:()=>{this.pendingPromises.delete(e)&&(0!==this.pendingPromises.size||this.handles.has(p)||this._set("updating",!1))}},t),this.pendingPromises.add(e),this._set("updating",!0);const n=()=>this.handles.remove(t);return e.then(n,n),e}removeAll(){this.pendingPromises.clear(),this.handles.removeAll(),this._set("updating",!1)}installSyncUpdatingWatch(e,t,n){const i=this.createSyncUpdatingCallback(),r=Object(a.b)((()=>Object(u.c)(e,t)),i,{sync:!0,equals:()=>!1});return this.handles.add(r,n),r}createSyncUpdatingCallback(){return()=>{this.handles.remove(p),++this.scheduleHandleId;const e=this.scheduleHandleId;this._get("updating")||this._set("updating",!0),this.handles.add(Object(l.b)((()=>{e===this.scheduleHandleId&&(this._set("updating",this.pendingPromises.size>0),this.handles.remove(p))})),p)}}};Object(i.a)([Object(d.b)({readOnly:!0})],f.prototype,"updating",void 0),f=Object(i.a)([Object(h.a)("esri.views.support.WatchUpdatingTracking")],f);const p=-42},277:function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var i,r=n(79),s=n(89),o=n(81),a=(n(83),n(80)),l=n(200),c=n(162);let u=i=class extends c.a{constructor(e){super(e),this.colorRamps=null,this.type="multipart"}clone(){return new i({colorRamps:Object(s.a)(this.colorRamps)})}};Object(r.a)([Object(o.b)({type:[l.a],json:{write:!0}})],u.prototype,"colorRamps",void 0),Object(r.a)([Object(o.b)({type:["multipart"]})],u.prototype,"type",void 0),u=i=Object(r.a)([Object(a.a)("esri.rest.support.MultipartColorRamp")],u);const d=u},282:function(e,t,n){"use strict";n.d(t,"a",(function(){return s})),n.d(t,"b",(function(){return o})),n.d(t,"c",(function(){return a})),n.d(t,"d",(function(){return l}));var i=n(85),r=n(91);function s(e,t,n){return Object(r.i)(e.map(((e,i)=>t.apply(n,[e,i]))))}function o(e,t,n){return Object(r.i)(e.map(((e,i)=>t.apply(n,[e,i])))).then((e=>e.map((e=>e.value))))}function a(e){return Object(i.k)(e)?Object(r.s)():e.then((e=>({ok:!0,value:e}))).catch((e=>({ok:!1,error:e})))}function l(e){return e.then((e=>({ok:!0,value:e}))).catch((e=>(Object(r.t)(e),{ok:!1,error:e})))}},284:function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return o}));var i=n(200),r=n(162),s=n(277);const o={key:"type",base:r.a,typeMap:{algorithmic:i.a,multipart:s.a}};function a(e){return e&&e.type?"algorithmic"===e.type?i.a.fromJSON(e):"multipart"===e.type?s.a.fromJSON(e):null:null}},288:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var i=n(85),r=n(268);function s(e,t,n){if(!n||!n.features||!n.hasZ)return;const s=Object(r.a)(n.geometryType,t,e.outSpatialReference);if(!Object(i.k)(s))for(const i of n.features)s(i.geometry)}},295:function(e,t,n){"use strict";n.d(t,"a",(function(){return f}));var i,r=n(79),s=n(90),o=n(86),a=n(89),l=n(81),c=(n(83),n(80)),u=n(92);const d=new s.a({count:"count",sum:"sum",min:"min",max:"max",avg:"avg",stddev:"stddev",var:"var",exceedslimit:"exceedslimit",percentile_cont:"percentile-continuous",percentile_disc:"percentile-discrete"});let h=i=class extends o.a{constructor(e){super(e),this.maxPointCount=void 0,this.maxRecordCount=void 0,this.maxVertexCount=void 0,this.onStatisticField=null,this.outStatisticFieldName=null,this.statisticType=null,this.statisticParameters=null}writeStatisticParameters(e,t){"percentile-continuous"!==this.statisticType&&"percentile-discrete"!==this.statisticType||(t.statisticParameters=Object(a.a)(e))}clone(){return new i({maxPointCount:this.maxPointCount,maxRecordCount:this.maxRecordCount,maxVertexCount:this.maxVertexCount,onStatisticField:this.onStatisticField,outStatisticFieldName:this.outStatisticFieldName,statisticType:this.statisticType,statisticParameters:Object(a.a)(this.statisticParameters)})}};Object(r.a)([Object(l.b)({type:Number,json:{write:!0}})],h.prototype,"maxPointCount",void 0),Object(r.a)([Object(l.b)({type:Number,json:{write:!0}})],h.prototype,"maxRecordCount",void 0),Object(r.a)([Object(l.b)({type:Number,json:{write:!0}})],h.prototype,"maxVertexCount",void 0),Object(r.a)([Object(l.b)({type:String,json:{write:!0}})],h.prototype,"onStatisticField",void 0),Object(r.a)([Object(l.b)({type:String,json:{write:!0}})],h.prototype,"outStatisticFieldName",void 0),Object(r.a)([Object(l.b)({type:String,json:{read:{source:"statisticType",reader:d.read},write:{target:"statisticType",writer:d.write}}})],h.prototype,"statisticType",void 0),Object(r.a)([Object(l.b)({type:Object})],h.prototype,"statisticParameters",void 0),Object(r.a)([Object(u.a)("statisticParameters")],h.prototype,"writeStatisticParameters",null),h=i=Object(r.a)([Object(c.a)("esri.rest.support.StatisticDefinition")],h);const f=h},318:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var i,r=n(79),s=n(86),o=n(81),a=(n(84),n(82),n(83)),l=n(94),c=n(80);let u=i=class extends s.a{constructor(e){super(e),this.type="map-layer"}clone(){const{mapLayerId:e,gdbVersion:t}=this;return new i({mapLayerId:e,gdbVersion:t})}};Object(r.a)([Object(l.a)({mapLayer:"map-layer"})],u.prototype,"type",void 0),Object(r.a)([Object(o.b)({type:a.a,json:{write:!0}})],u.prototype,"mapLayerId",void 0),Object(r.a)([Object(o.b)({type:String,json:{write:!0}})],u.prototype,"gdbVersion",void 0),u=i=Object(r.a)([Object(c.a)("esri.layers.support.source.MapLayerSource")],u)},321:function(e,t,n){"use strict";n.d(t,"a",(function(){return f}));var i,r=n(79),s=(n(98),n(90)),o=n(86),a=n(89),l=n(81),c=(n(83),n(80)),u=n(96);const d=new s.a({upperLeft:"upper-left",lowerLeft:"lower-left"});let h=i=class extends o.a{constructor(e){super(e),this.extent=null,this.mode="view",this.originPosition="upper-left",this.tolerance=1}clone(){return new i(Object(a.a)({extent:this.extent,mode:this.mode,originPosition:this.originPosition,tolerance:this.tolerance}))}};Object(r.a)([Object(l.b)({type:u.a,json:{write:{overridePolicy(){return{enabled:"view"===this.mode}}}}})],h.prototype,"extent",void 0),Object(r.a)([Object(l.b)({type:["view","edit"],json:{write:!0}})],h.prototype,"mode",void 0),Object(r.a)([Object(l.b)({type:String,json:{read:d.read,write:d.write}})],h.prototype,"originPosition",void 0),Object(r.a)([Object(l.b)({type:Number,json:{write:{overridePolicy(){return{enabled:"view"===this.mode}}}}})],h.prototype,"tolerance",void 0),h=i=Object(r.a)([Object(c.a)("esri.rest.support.QuantizationParameters")],h);const f=h},333:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));class i{constructor(){this.objectIdFieldName=null,this.globalIdFieldName=null,this.geohashFieldName=null,this.geometryProperties=null,this.geometryType=null,this.spatialReference=null,this.hasZ=!1,this.hasM=!1,this.features=[],this.fields=[],this.transform=null,this.exceededTransferLimit=!1,this.uniqueIdField=null,this.queryGeometryType=null,this.queryGeometry=null}weakClone(){const e=new i;return e.objectIdFieldName=this.objectIdFieldName,e.globalIdFieldName=this.globalIdFieldName,e.geohashFieldName=this.geohashFieldName,e.geometryProperties=this.geometryProperties,e.geometryType=this.geometryType,e.spatialReference=this.spatialReference,e.hasZ=this.hasZ,e.hasM=this.hasM,e.features=this.features,e.fields=this.fields,e.transform=this.transform,e.exceededTransferLimit=this.exceededTransferLimit,e.uniqueIdField=this.uniqueIdField,e.queryGeometry=this.queryGeometry,e.queryGeometryType=this.queryGeometryType,e}}},404:function(e,t,n){"use strict";n.d(t,"a",(function(){return w}));var i,r=n(79),s=n(90),o=n(86),a=n(85),l=n(114),c=n(81),u=(n(84),n(82),n(83)),d=n(93),h=n(80),f=n(92),p=n(109),b=n(95),m=n(118),y=n(110),g=n(163),j=n(516);const O=new s.a({PNG:"png",PNG8:"png8",PNG24:"png24",PNG32:"png32",JPEG:"jpg",JPG:"jpg",DIB:"dib",TIFF:"tiff",EMF:"emf",PS:"ps",PDF:"pdf",GIF:"gif",SVG:"svg",SVGZ:"svgz",Mixed:"mixed",MIXED:"mixed",LERC:"lerc",LERC2D:"lerc2d",RAW:"raw",pbf:"pbf"});let v=i=class extends o.a{constructor(e){super(e),this.dpi=96,this.format=null,this.origin=null,this.minScale=0,this.maxScale=0,this.size=null,this.spatialReference=null}static create(e={}){const{resolutionFactor:t=1,scales:n,size:r=256,spatialReference:s=b.a.WebMercator,numLODs:o=24}=e;if(!Object(y.l)(s)){const e=[];if(n)for(let t=0;t<n.length;t++){const i=n[t];e.push({level:t,scale:i,resolution:i})}else{let t=5e-4;for(let n=o-1;n>=0;n--)e.unshift({level:n,scale:t,resolution:t}),t*=2}return new i({dpi:96,lods:e,origin:new p.a(0,0,s),size:[r,r],spatialReference:s})}const a=Object(y.e)(s),c=e.origin?new p.a({x:e.origin.x,y:e.origin.y,spatialReference:s}):new p.a(a?{x:a.origin[0],y:a.origin[1],spatialReference:s}:{x:0,y:0,spatialReference:s}),u=1/(39.37*Object(l.e)(s)*96),d=[];if(n)for(let i=0;i<n.length;i++){const e=n[i],t=e*u;d.push({level:i,scale:e,resolution:t})}else{let e=Object(y.h)(s)?512/r*591657527.5917094:256/r*591657527.591555;const n=Math.ceil(o/t);d.push({level:0,scale:e,resolution:e*u});for(let i=1;i<n;i++){const n=e/2**t,r=n*u;d.push({level:i,scale:n,resolution:r}),e=n}}return new i({dpi:96,lods:d,origin:c,size:[r,r],spatialReference:s})}get isWrappable(){const{spatialReference:e,origin:t}=this;if(e&&t){const n=Object(y.e)(e);return e.isWrappable&&Math.abs(n.origin[0]-t.x)<=n.dx}return!1}readOrigin(e,t){return p.a.fromJSON({spatialReference:t.spatialReference,...e})}set lods(e){let t=0,n=0;const i=[];this._levelToLOD={},e&&(t=-1/0,n=1/0,e.forEach((e=>{i.push(e.scale),t=e.scale>t?e.scale:t,n=e.scale<n?e.scale:n,this._levelToLOD[e.level]=e}))),this._set("scales",i),this._set("minScale",t),this._set("maxScale",n),this._set("lods",e),this._initializeUpsampleLevels()}readSize(e,t){return[t.cols,t.rows]}writeSize(e,t){t.cols=e[0],t.rows=e[1]}zoomToScale(e){const t=this.scales;if(e<=0)return t[0];if(e>=t.length-1)return t[t.length-1];{const n=Math.floor(e),i=n+1;return t[n]/(t[n]/t[i])**(e-n)}}scaleToZoom(e){const t=this.scales,n=t.length-1;let i=0;for(;i<n;i++){const n=t[i],r=t[i+1];if(n<=e)return i;if(r===e)return i+1;if(n>e&&r<e)return i+Math.log(n/e)/Math.log(n/r)}return i}snapScale(e,t=.95){const n=this.scaleToZoom(e);return n%Math.floor(n)>=t?this.zoomToScale(Math.ceil(n)):this.zoomToScale(Math.floor(n))}tileAt(e,t,n,i){const r=this.lodAt(e);if(!r)return null;let s,o;if("number"==typeof t)s=t,o=n;else if(Object(y.d)(t.spatialReference,this.spatialReference))s=t.x,o=t.y,i=n;else{const e=Object(g.d)(t,this.spatialReference);if(Object(a.k)(e))return null;s=e.x,o=e.y,i=n}const l=r.resolution*this.size[0],c=r.resolution*this.size[1];return i||(i={id:null,level:0,row:0,col:0,extent:Object(m.l)()}),i.level=e,i.row=Math.floor((this.origin.y-o)/c+.001),i.col=Math.floor((s-this.origin.x)/l+.001),this.updateTileInfo(i),i}updateTileInfo(e,t=0){let n=this.lodAt(e.level);if(!n&&1===t){const t=this.lods[this.lods.length-1];t.level<e.level&&(n=t)}if(!n)return;const i=e.level-n.level,r=n.resolution*this.size[0]/2**i,s=n.resolution*this.size[1]/2**i;e.id=`${e.level}/${e.row}/${e.col}`,e.extent||(e.extent=Object(m.l)()),e.extent[0]=this.origin.x+e.col*r,e.extent[1]=this.origin.y-(e.row+1)*s,e.extent[2]=e.extent[0]+r,e.extent[3]=e.extent[1]+s}upsampleTile(e){const t=this._upsampleLevels[e.level];return!(!t||-1===t.parentLevel)&&(e.level=t.parentLevel,e.row=Math.floor(e.row/t.factor+.001),e.col=Math.floor(e.col/t.factor+.001),this.updateTileInfo(e),!0)}getTileBounds(e,t){const{resolution:n}=this.lodAt(t.level),i=n*this.size[0],r=n*this.size[1];return e[0]=this.origin.x+t.col*i,e[1]=this.origin.y-(t.row+1)*r,e[2]=e[0]+i,e[3]=e[1]+r,e}lodAt(e){return this._levelToLOD&&this._levelToLOD[e]||null}clone(){return i.fromJSON(this.write({}))}_initializeUpsampleLevels(){const e=this.lods;this._upsampleLevels=[];let t=null;for(let n=0;n<e.length;n++){const i=e[n];this._upsampleLevels[i.level]={parentLevel:t?t.level:-1,factor:t?t.resolution/i.resolution:0},t=i}}};Object(r.a)([Object(c.b)({type:Number,json:{write:!0}})],v.prototype,"compressionQuality",void 0),Object(r.a)([Object(c.b)({type:Number,json:{write:!0}})],v.prototype,"dpi",void 0),Object(r.a)([Object(c.b)({type:String,json:{read:O.read,write:O.write,origins:{"web-scene":{read:!1,write:!1}}}})],v.prototype,"format",void 0),Object(r.a)([Object(c.b)({readOnly:!0})],v.prototype,"isWrappable",null),Object(r.a)([Object(c.b)({type:p.a,json:{write:!0}})],v.prototype,"origin",void 0),Object(r.a)([Object(d.a)("origin")],v.prototype,"readOrigin",null),Object(r.a)([Object(c.b)({type:[j.a],value:null,json:{write:!0}})],v.prototype,"lods",null),Object(r.a)([Object(c.b)({readOnly:!0})],v.prototype,"minScale",void 0),Object(r.a)([Object(c.b)({readOnly:!0})],v.prototype,"maxScale",void 0),Object(r.a)([Object(c.b)({readOnly:!0})],v.prototype,"scales",void 0),Object(r.a)([Object(c.b)({cast:e=>Array.isArray(e)?e:"number"==typeof e?[e,e]:[256,256]})],v.prototype,"size",void 0),Object(r.a)([Object(d.a)("size",["rows","cols"])],v.prototype,"readSize",null),Object(r.a)([Object(f.a)("size",{cols:{type:u.a},rows:{type:u.a}})],v.prototype,"writeSize",null),Object(r.a)([Object(c.b)({type:b.a,json:{write:!0}})],v.prototype,"spatialReference",void 0),v=i=Object(r.a)([Object(h.a)("esri.layers.support.TileInfo")],v);const w=v},435:function(e,t,n){"use strict";n.d(t,"a",(function(){return s})),n.d(t,"b",(function(){return l})),n.d(t,"c",(function(){return c})),n.d(t,"d",(function(){return r}));var i=n(140);const r=Math.PI/180,s=/SPHEROID\[([^\]]+)]/i,o=i.a.radius,a=i.a.eccentricitySquared,l={a1:o*a,a2:o*a*o*a,a3:o*a*a/2,a4:o*a*o*a*2.5,a5:o*a+o*a*a/2,a6:1-a},c={4267:{a:6378206.4,f:1/294.9786982},4269:{a:6378137,f:1/298.257222101},4326:{a:i.a.radius,f:i.a.flattening},104900:{a:2439700,f:0},104901:{a:6051e3,f:0},104902:{a:6051800,f:0},104903:{a:i.c.radius,f:i.c.flattening},104904:{a:3393400,f:1/192.0430107526882},104905:{a:i.b.radius,f:i.b.flattening},104906:{a:6200,f:0},104907:{a:11100,f:0},104908:{a:71492e3,f:.06487439154031222},104909:{a:8200,f:0},104910:{a:83500,f:0},104911:{a:1e4,f:0},104912:{a:2409300,f:0},104913:{a:15e3,f:0},104914:{a:4e4,f:0},104915:{a:1562090,f:0},104916:{a:2632345,f:0},104917:{a:85e3,f:0},104918:{a:1821460,f:0},104919:{a:5e3,f:0},104920:{a:12e3,f:0},104921:{a:3e4,f:3},104922:{a:18e3,f:0},104923:{a:14e3,f:0},104924:{a:49300,f:0},104925:{a:60268e3,f:1/10.2079945799458},104926:{a:16e3,f:0},104927:{a:9500,f:0},104928:{a:56e4,f:0},104929:{a:249400,f:0},104930:{a:59500,f:0},104931:{a:16e3,f:0},104932:{a:133e3,f:0},104933:{a:718e3,f:0},104934:{a:888e3,f:0},104935:{a:1986300,f:0},104936:{a:1e4,f:0},104937:{a:41900,f:0},104938:{a:11e4,f:0},104939:{a:50100,f:0},104940:{a:764e3,f:0},104941:{a:11e3,f:0},104942:{a:529800,f:0},104943:{a:2575e3,f:0},104944:{a:25559e3,f:1/43.61604095563141},104945:{a:578900,f:0},104946:{a:33e3,f:0},104947:{a:21e3,f:0},104948:{a:13e3,f:0},104949:{a:31e3,f:0},104950:{a:27e3,f:0},104951:{a:42e3,f:0},104952:{a:235800,f:0},104953:{a:761400,f:0},104954:{a:15e3,f:0},104955:{a:54e3,f:0},104956:{a:77e3,f:0},104957:{a:27e3,f:0},104958:{a:788900,f:0},104959:{a:584700,f:0},104960:{a:24764e3,f:.01708124697141011},104961:{a:74e3,f:0},104962:{a:79e3,f:0},104963:{a:104e3,f:.14423076923076922},104964:{a:29e3,f:0},104965:{a:17e4,f:0},104966:{a:208e3,f:0},104967:{a:4e4,f:0},104968:{a:1352600,f:0},104969:{a:1195e3,f:0},104970:{a:593e3,f:0},104971:{a:i.b.radius,f:0},104972:{a:47e4,f:0},104973:{a:255e3,f:0},104974:{a:2439400,f:0}}},465:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var i=n(241);class r{constructor(e,t){this._storage=new i.c,this._storage.maxSize=e,t&&this._storage.registerRemoveFunc("",t)}put(e,t){this._storage.put(e,t,1,1)}pop(e){return this._storage.pop(e)}get(e){return this._storage.get(e)}clear(){this._storage.clearAll()}destroy(){this._storage.destroy()}}},516:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var i,r=n(79),s=n(86),o=n(81),a=(n(84),n(82),n(83)),l=n(80);let c=i=class extends s.a{constructor(e){super(e),this.cols=null,this.level=0,this.levelValue=null,this.origin=null,this.resolution=0,this.rows=null,this.scale=0}clone(){return new i({cols:this.cols,level:this.level,levelValue:this.levelValue,resolution:this.resolution,rows:this.rows,scale:this.scale})}};Object(r.a)([Object(o.b)({json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],c.prototype,"cols",void 0),Object(r.a)([Object(o.b)({type:a.a,json:{write:!0}})],c.prototype,"level",void 0),Object(r.a)([Object(o.b)({type:String,json:{write:!0}})],c.prototype,"levelValue",void 0),Object(r.a)([Object(o.b)({json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],c.prototype,"origin",void 0),Object(r.a)([Object(o.b)({type:Number,json:{write:!0}})],c.prototype,"resolution",void 0),Object(r.a)([Object(o.b)({json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],c.prototype,"rows",void 0),Object(r.a)([Object(o.b)({type:Number,json:{write:!0}})],c.prototype,"scale",void 0),c=i=Object(r.a)([Object(l.a)("esri.layers.support.LOD")],c);const u=c},530:function(e,t,n){"use strict";n.r(t),n.d(t,"FeatureServiceSnappingSourceWorker",(function(){return Z})),n.d(t,"default",(function(){return J}));var i=n(79),r=n(131),s=n(122),o=n(85),a=n(91),l=n(112),c=n(81),u=n(84),d=(n(82),n(83),n(80)),h=n(95),f=n(764),p=n(863),b=n(404),m=n(256),y=n(134),g=n(99);let j=class extends g.a{constructor(){super(...arguments),this.updating=!1,this.pending=[]}push(e,t){this.pending.push({promise:e,callback:t}),1===this.pending.length&&this.process()}process(){if(!this.pending.length)return void(this.updating=!1);this.updating=!0;const e=this.pending[0];e.promise.then((t=>e.callback(t))).catch((()=>{})).then((()=>{this.pending.shift(),this.process()}))}};Object(i.a)([Object(c.b)()],j.prototype,"updating",void 0),j=Object(i.a)([Object(d.a)("esri.core.AsyncSequence")],j);var O=n(130),v=n(166),w=n(87),x=n(96),S=n(118),M=n(180),_=n(444),F=n(237),I=n(282);class T{constructor(e,t){this.data=e,this.resolution=t,this.state={type:0},this.alive=!0}process(e){switch(this.state.type){case 0:return this.state=this.gotoFetchCount(this.state,e),this.state.task.promise.then(e.resume,e.resume);case 1:case 3:break;case 2:return this.state=this.gotoFetchFeatures(this.state,e),this.state.task.promise.then(e.resume,e.resume);case 4:this.state=this.goToDone(this.state,e)}return null}get debugInfo(){return{data:this.data,featureCount:this.featureCount,state:this.stateToString}}get featureCount(){switch(this.state.type){case 0:case 1:return 0;case 2:return this.state.featureCount;case 3:return this.state.previous.featureCount;case 4:return this.state.features.length;case 5:return this.state.previous.features.length}}get stateToString(){switch(this.state.type){case 0:return"created";case 1:return"fetch-count";case 2:return"fetched-count";case 3:return"fetch-features";case 4:return"fetched-features";case 5:return"done"}}gotoFetchCount(e,t){return{type:1,previous:e,task:Object(a.g)((async e=>{const n=await Object(I.d)(t.fetchCount(this,e));1===this.state.type&&(this.state=this.gotoFetchedCount(this.state,n.ok?n.value:1/0))}))}}gotoFetchedCount(e,t){return{type:2,featureCount:t,previous:e}}gotoFetchFeatures(e,t){return{type:3,previous:e,task:Object(a.g)((async n=>{const i=await Object(I.d)(t.fetchFeatures(this,e.featureCount,n));3===this.state.type&&(this.state=this.gotoFetchedFeatures(this.state,i.ok?i.value:[]))}))}}gotoFetchedFeatures(e,t){return{type:4,previous:e,features:t}}goToDone(e,t){return t.finish(this,e.features),{type:5,previous:e}}reset(){const e=this.state;switch(this.state={type:0},e.type){case 0:case 2:case 4:case 5:break;case 1:case 3:e.task.abort()}}intersects(e){return!(!Object(o.k)(e)&&this.data.extent)||(Object(S.q)(e,R),Object(S.t)(this.data.extent,R))}}const R=Object(S.l)(),C=w.a.getLogger("esri.views.interactive.snapping.featureSources.featureServiceSource.FeatureServiceTiledFetcher");let P=class extends O.a{constructor(e){super(e),this.tilesOfInterest=[],this.availability=0,this.pendingTiles=new Map,this.pendingEdits=new j,this.pendingEditsAbortController=new AbortController}get minimumVerticesPerFeature(){var e;switch(null==(e=this.store)?void 0:e.featureStore.geometryType){case"esriGeometryPoint":case"esriGeometryMultipoint":return 1;case"esriGeometryPolygon":return 4;case"esriGeometryPolyline":return 2}}set filter(e){const t=this._get("filter"),n=this.filterProperties(e);JSON.stringify(t)!==JSON.stringify(n)&&this._set("filter",n)}set customParameters(e){const t=this._get("customParameters");JSON.stringify(t)!==JSON.stringify(e)&&this._set("customParameters",e)}get configuration(){return{filter:this.filter,customParameters:this.customParameters,tileInfo:this.tileInfo,tileSize:this.tileSize}}set tileInfo(e){const t=this._get("tileInfo");t!==e&&(Object(o.l)(e)&&Object(o.l)(t)&&JSON.stringify(e)===JSON.stringify(t)||(this._set("tileInfo",e),this.store.tileInfo=e))}set tileSize(e){this._get("tileSize")!==e&&this._set("tileSize",e)}get updating(){return this.updatingHandles.updating||this.pendingEdits.updating}initialize(){this.initializeFetchExtent(),this.updatingHandles.add(this,"configuration",(()=>this.refresh())),this.updatingHandles.add(this,"tilesOfInterest",((e,t)=>{Object(u.c)(e,t,(({id:e},{id:t})=>e===t))||this.process()}),1)}destroy(){this.pendingTiles.forEach((e=>this.deletePendingTile(e))),this.pendingTiles.clear(),this.store.destroy(),this.tilesOfInterest.length=0,this.pendingEditsAbortController.abort(),this.pendingEditsAbortController=null}refresh(){this.store.refresh(),this.pendingTiles.forEach((e=>this.deletePendingTile(e))),this.process()}applyEdits(e){this.pendingEdits.push(e,(async e=>{if(0===e.addedFeatures.length&&0===e.updatedFeatures.length&&0===e.deletedFeatures.length)return;for(const[,n]of this.pendingTiles)n.reset();const t={...e,deletedFeatures:e.deletedFeatures.map((({objectId:e,globalId:t})=>e&&-1!==e?e:this.lookupObjectIdByGlobalId(t)))};await this.updatingHandles.addPromise(this.store.processEdits(t,((e,t)=>this.queryFeaturesById(e,t)),this.pendingEditsAbortController.signal)),this.processPendingTiles()}))}initializeFetchExtent(){if(!this.capabilities.query.supportsExtent)return;const e=Object(a.g)((async e=>{try{var t;const n=await Object(F.executeQueryForExtent)(this.url,new y.a({where:"1=1",outSpatialReference:this.spatialReference,cacheHint:!!this.capabilities.query.supportsCacheHint||void 0}),{query:this.configuration.customParameters,signal:e});this.store.extent=x.a.fromJSON(null==(t=n.data)?void 0:t.extent)}catch(n){Object(a.t)(n),C.warn("Failed to fetch data extent",n)}}));this.updatingHandles.addPromise(e.promise.then((()=>this.process()))),this.handles.add(Object(v.c)((()=>e.abort())))}get debugInfo(){return{numberOfFeatures:this.store.featureStore.numFeatures,tilesOfInterest:this.tilesOfInterest,pendingTiles:Array.from(this.pendingTiles.values()).map((e=>e.debugInfo)),storedTiles:this.store.debugInfo}}process(){this.markTilesNotAlive(),this.createPendingTiles(),this.deletePendingTiles(),this.processPendingTiles()}markTilesNotAlive(){for(const[,e]of this.pendingTiles)e.alive=!1}createPendingTiles(){const e=this.collectMissingTilesInfo();if(this.setAvailability(Object(o.k)(e)?1:e.coveredArea/e.fullArea),!Object(o.k)(e))for(const{data:t,resolution:n}of e.missingTiles){const e=this.pendingTiles.get(t.id);e?(e.resolution=n,e.alive=!0):this.createPendingTile(t,n)}}collectMissingTilesInfo(){let e=null;for(let t=this.tilesOfInterest.length-1;t>=0;t--){const n=this.tilesOfInterest[t],i=this.store.process(n,((e,t)=>this.verifyTileComplexity(e,t)));Object(o.k)(e)?e=i:e.prepend(i)}return e}deletePendingTiles(){for(const[,e]of this.pendingTiles)e.alive||this.deletePendingTile(e)}processPendingTiles(){const e={fetchCount:(e,t)=>this.fetchCount(e,t),fetchFeatures:(e,t,n)=>this.fetchFeatures(e,t,n),finish:(e,t)=>this.finishPendingTile(e,t),resume:()=>this.processPendingTiles()};if(this.ensureFetchAllCounts(e))for(const[,t]of this.pendingTiles)this.verifyTileComplexity(this.store.getFeatureCount(t.data),t.resolution)&&this.updatingHandles.addPromise(t.process(e))}verifyTileComplexity(e,t){return this.verifyVertexComplexity(e)&&this.verifyFeatureDensity(e,t)}verifyVertexComplexity(e){return e*this.minimumVerticesPerFeature<k}verifyFeatureDensity(e,t){if(Object(o.k)(this.tileInfo))return!1;const n=this.tileSize*t;return e*(z/(n*n))<D}ensureFetchAllCounts(e){let t=!0;for(const[,n]of this.pendingTiles)n.state.type<2&&this.updatingHandles.addPromise(n.process(e)),n.state.type<=1&&(t=!1);return t}finishPendingTile(e,t){this.store.add(e.data,t),this.deletePendingTile(e),this.updateAvailability()}updateAvailability(){const e=this.collectMissingTilesInfo();this.setAvailability(Object(o.k)(e)?1:e.coveredArea/e.fullArea)}setAvailability(e){this._set("availability",e)}createPendingTile(e,t){const n=new T(e,t);return this.pendingTiles.set(e.id,n),n}deletePendingTile(e){e.reset(),this.pendingTiles.delete(e.data.id)}async fetchCount(e,t){return this.store.fetchCount(e.data,this.url,this.createCountQuery(e),{query:this.customParameters,timeout:N,signal:t})}async fetchFeatures(e,t,n){let i,r=0,s=0,a=t;for(;;){const l=this.createFeaturesQuery(e),c=this.setPagingParameters(l,r,a),{features:u,exceededTransferLimit:d}=await this.queryFeatures(l,n);if(c&&(r+=Object(o.t)(l.num)),s+=u.length,i=i?i.concat(u):u,a=t-s,!c||!d||a<=0)return i}}filterProperties(e){return Object(o.k)(e)?{where:"1=1",gdbVersion:void 0,timeExtent:void 0}:{where:e.where||"1=1",timeExtent:e.timeExtent,gdbVersion:e.gdbVersion}}lookupObjectIdByGlobalId(e){const t=this.globalIdField,n=this.objectIdField;if(Object(o.k)(t))throw new Error("Expected globalIdField to be defined");let i=null;if(this.store.featureStore.forEach((r=>{var s;e===r.attributes[t]&&(i=null!=(s=r.objectId)?s:r.attributes[n])})),Object(o.k)(i))throw new Error(`Expected to find a feature with globalId ${e}`);return i}queryFeaturesById(e,t){const n=this.createFeaturesQuery(null);return n.objectIds=e,this.queryFeatures(n,t)}queryFeatures(e,t){return this.capabilities.query.supportsFormatPBF?this.queryFeaturesPBF(e,t):this.queryFeaturesJSON(e,t)}async queryFeaturesPBF(e,t){const{sourceSpatialReference:n}=this,{data:i}=await Object(F.executeQueryPBF)(this.url,e,new _.b({sourceSpatialReference:n}),{query:this.configuration.customParameters,timeout:N,signal:t});return Object(M.y)(i)}async queryFeaturesJSON(e,t){const{sourceSpatialReference:n}=this,{data:i}=await Object(F.executeQuery)(this.url,e,n,{query:this.configuration.customParameters,timeout:N,signal:t});return Object(M.b)(i,this.objectIdField)}createCountQuery(e){const t=this.createBaseQuery(e);return this.capabilities.query.supportsCacheHint&&(t.cacheHint=!0),t}createFeaturesQuery(e){const t=this.createBaseQuery(e);return t.outFields=this.globalIdField?[this.globalIdField,this.objectIdField]:[this.objectIdField],t.returnGeometry=!0,Object(o.l)(e)&&(this.capabilities.query.supportsResultType?t.resultType="tile":this.capabilities.query.supportsCacheHint&&(t.cacheHint=!0)),t}createBaseQuery(e){const t=new y.a({returnZ:!1,returnM:!1,geometry:Object(o.l)(this.tileInfo)&&Object(o.l)(e)?Object(S.v)(e.data.extent,this.tileInfo.spatialReference):void 0}),n=this.configuration.filter;return Object(o.l)(n)&&(t.where=n.where,t.gdbVersion=n.gdbVersion,t.timeExtent=n.timeExtent),t.outSpatialReference=this.spatialReference,t}setPagingParameters(e,t,n){if(!this.capabilities.query.supportsPagination)return!1;const{supportsMaxRecordCountFactor:i,supportsCacheHint:r,tileMaxRecordCount:s,maxRecordCount:o,supportsResultType:a}=this.capabilities.query,l=i?y.a.MAX_MAX_RECORD_COUNT_FACTOR:1,c=l*((a||r)&&s?s:o||E);return e.start=t,i?(e.maxRecordCountFactor=Math.min(l,Math.ceil(n/c)),e.num=Math.min(n,e.maxRecordCountFactor*c)):e.num=Math.min(n,c),!0}};Object(i.a)([Object(c.b)({constructOnly:!0})],P.prototype,"url",void 0),Object(i.a)([Object(c.b)({constructOnly:!0})],P.prototype,"objectIdField",void 0),Object(i.a)([Object(c.b)({constructOnly:!0})],P.prototype,"globalIdField",void 0),Object(i.a)([Object(c.b)({constructOnly:!0})],P.prototype,"capabilities",void 0),Object(i.a)([Object(c.b)({constructOnly:!0})],P.prototype,"sourceSpatialReference",void 0),Object(i.a)([Object(c.b)({constructOnly:!0})],P.prototype,"spatialReference",void 0),Object(i.a)([Object(c.b)({constructOnly:!0})],P.prototype,"store",void 0),Object(i.a)([Object(c.b)({readOnly:!0})],P.prototype,"minimumVerticesPerFeature",null),Object(i.a)([Object(c.b)()],P.prototype,"filter",null),Object(i.a)([Object(c.b)()],P.prototype,"customParameters",null),Object(i.a)([Object(c.b)({readOnly:!0})],P.prototype,"configuration",null),Object(i.a)([Object(c.b)()],P.prototype,"tileInfo",null),Object(i.a)([Object(c.b)()],P.prototype,"tileSize",null),Object(i.a)([Object(c.b)()],P.prototype,"tilesOfInterest",void 0),Object(i.a)([Object(c.b)({readOnly:!0})],P.prototype,"updating",null),Object(i.a)([Object(c.b)({readOnly:!0})],P.prototype,"availability",void 0),P=Object(i.a)([Object(d.a)("esri.views.interactive.snapping.featureSources.featureServiceSource.FeatureServiceTiledFetcher")],P);const E=2e3,N=6e5,k=1e6,z=25,D=1;var B=n(595),A=n(795);class V{constructor(){this._store=new Map,this._byteSize=0}set(e,t){this.delete(e),this._store.set(e,t),this._byteSize+=t.byteSize}delete(e){const t=this._store.get(e);return!!this._store.delete(e)&&(this._byteSize-=t.byteSize,!0)}get(e){return this.used(e),this._store.get(e)}has(e){return this.used(e),this._store.has(e)}clear(){this._store.clear()}applyByteSizeLimit(e,t){for(const[n,i]of this._store){if(this._byteSize<=e)break;this.delete(n),t(i)}}values(){return this._store.values()}[Symbol.iterator](){return this._store[Symbol.iterator]()}used(e){const t=this._store.get(e);t&&(this._store.delete(e),this._store.set(e,t))}}let q=class extends g.a{constructor(e){super(e),this.tileInfo=null,this.extent=null,this.maximumByteSize=10485760,this.tileBounds=new A.a,this.tiles=new V,this.refCounts=new Map,this.tileFeatureCounts=new Map,this.tmpBoundingRect=Object(S.l)()}add(e,t){const n=[];for(const i of t)0===this.referenceFeature(i.objectId)&&n.push(i);this.addTileStorage(e,new Set(t.map((({objectId:e})=>e))),function(e){return e.reduce(((e,t)=>e+function(e){return 32+function(e){if(Object(o.k)(e))return 0;const t=Object(B.b)(e.lengths,4);return 32+Object(B.b)(e.coords,8)+t}(e.geometry)+Object(B.a)(e.attributes)}(t)),0)}(t)),this.featureStore.addMany(n),this.tiles.applyByteSizeLimit(this.maximumByteSize,(e=>this.removeTileStorage(e)))}destroy(){this.clear(),this.tileFeatureCounts.clear()}clear(){this.featureStore.clear(),this.tileBounds.clear(),this.tiles.clear(),this.refCounts.clear()}refresh(){this.clear(),this.tileFeatureCounts.clear()}processEdits(e,t,n){return this.processEditsDelete(e.deletedFeatures.concat(e.updatedFeatures)),this.processEditsRefetch(e.addedFeatures.concat(e.updatedFeatures),t,n)}addTileStorage(e,t,n){this.tiles.set(e.id,new L(e,t,n)),this.tileBounds.set(e.id,e.extent),this.tileFeatureCounts.set(e.id,t.size)}remove({id:e}){const t=this.tiles.get(e);t&&this.removeTileStorage(t)}removeTileStorage(e){const t=[];for(const i of e.objectIds)1===this.unreferenceFeature(i)&&t.push(i);this.featureStore.removeManyById(t);const n=e.data.id;this.tiles.delete(n),this.tileBounds.delete(n)}processEditsDelete(e){this.featureStore.removeManyById(e);for(const[,t]of this.tiles){for(const n of e)t.objectIds.delete(n);this.tileFeatureCounts.set(t.data.id,t.objectIds.size)}for(const t of e)this.refCounts.delete(t)}async processEditsRefetch(e,t,n){const i=(await t(e,n)).features,{hasZ:r,hasM:s}=this.featureStore;for(const a of i){const e=Object(M.r)(this.tmpBoundingRect,a.geometry,r,s);Object(o.k)(e)||this.tileBounds.forEachInBounds(e,(e=>{const t=this.tiles.get(e);this.featureStore.add(a),t.objectIds.has(a.objectId)||(t.objectIds.add(a.objectId),this.referenceFeature(a.objectId),this.tileFeatureCounts.set(t.data.id,t.objectIds.size))}))}}process(e,t=(()=>!0)){if(Object(o.k)(this.tileInfo)||!e.extent||Object(o.l)(this.extent)&&!Object(S.t)(Object(S.q)(this.extent,this.tmpBoundingRect),e.extent))return new Y(e);if(this.tiles.has(e.id))return new Y(e);const n=this.createTileTree(e,this.tileInfo);return this.simplify(n,t,null,0,1),this.collectMissingTiles(e,n,this.tileInfo)}get debugInfo(){return Array.from(this.tiles.values()).map((({data:e})=>({data:e,featureCount:this.tileFeatureCounts.get(e.id)||0})))}getFeatureCount(e){const t=this.tileFeatureCounts.get(e.id);return null!=t?t:0}async fetchCount(e,t,n,i){const r=this.tileFeatureCounts.get(e.id);if(null!=r)return r;const s=await Object(F.executeQueryForCount)(t,n,i);return this.tileFeatureCounts.set(e.id,s.data.count),s.data.count}createTileTree(e,t){const n=new G(e.level,e.row,e.col);return t.updateTileInfo(n,1),this.tileBounds.forEachInBounds(e.extent,(i=>{const r=this.tiles.get(i).data;this.tilesAreRelated(e,r)&&this.populateChildren(n,r,t,this.tileFeatureCounts.get(r.id)||0)})),n}tilesAreRelated(e,t){if(!e||!t)return!1;if(e.level===t.level)return e.row===t.row&&e.col===t.col;const n=e.level<t.level,i=n?e:t,r=n?t:e,s=1<<r.level-i.level;return Math.floor(r.row/s)===i.row&&Math.floor(r.col/s)===i.col}populateChildren(e,t,n,i){const r=t.level-e.level-1;if(r<0)return void(e.isLeaf=!0);const s=t.row>>r,a=t.col>>r,l=e.row<<1,c=a-(e.col<<1)+(s-l<<1),u=e.children[c];if(Object(o.l)(u))this.populateChildren(u,t,n,i);else{const r=new G(e.level+1,s,a);n.updateTileInfo(r,1),e.children[c]=r,this.populateChildren(r,t,n,i)}}simplify(e,t,n,i,r){const s=r*r;if(e.isLeaf)return t(this.getFeatureCount(e),r)?0:(this.remove(e),Object(o.l)(n)&&(n.children[i]=null),s);const a=r/2,l=a*a;let c=0;for(let u=0;u<e.children.length;u++){const n=e.children[u];c+=Object(o.l)(n)?this.simplify(n,t,e,u,a):l}return 0===c?this.mergeChildren(e):1-c/s<X&&(this.purge(e),Object(o.l)(n)&&(n.children[i]=null),c=s),c}mergeChildren(e){const t=new Set;let n=0;this.forEachLeaf(e,(e=>{const i=this.tiles.get(e.id);if(i){n+=i.byteSize;for(const e of i.objectIds)t.has(e)||(t.add(e),this.referenceFeature(e));this.remove(e)}})),this.addTileStorage(e,t,n),e.isLeaf=!0,e.children[0]=e.children[1]=e.children[2]=e.children[3]=null,this.tileFeatureCounts.set(e.id,t.size)}forEachLeaf(e,t){for(const n of e.children)Object(o.k)(n)||(n.isLeaf?t(n):this.forEachLeaf(n,t))}purge(e){if(!Object(o.k)(e))if(e.isLeaf)this.remove(e);else for(let t=0;t<e.children.length;t++){const n=e.children[t];this.purge(n),e.children[t]=null}}collectMissingTiles(e,t,n){const i=new U(n,e,this.extent);return this.collectMissingTilesRecurse(t,i,1),i.info}collectMissingTilesRecurse(e,t,n){if(e.isLeaf)return;if(!e.hasChildren)return void t.addMissing(e.level,e.row,e.col,n);const i=n/2;for(let r=0;r<e.children.length;r++){const n=e.children[r];Object(o.k)(n)?t.addMissing(e.level+1,(e.row<<1)+((2&r)>>1),(e.col<<1)+(1&r),i):this.collectMissingTilesRecurse(n,t,i)}}referenceFeature(e){const t=(this.refCounts.get(e)||0)+1;return this.refCounts.set(e,t),1===t?0:2}unreferenceFeature(e){const t=(this.refCounts.get(e)||0)-1;return 0===t?(this.refCounts.delete(e),1):(t>0&&this.refCounts.set(e,t),2)}get test(){return{tiles:Array.from(this.tiles.values()).map((e=>`${e.data.id}:[${Array.from(e.objectIds)}]`)),featureReferences:Array.from(this.refCounts.keys()).map((e=>`${e}:${this.refCounts.get(e)}`))}}};Object(i.a)([Object(c.b)({constructOnly:!0})],q.prototype,"featureStore",void 0),Object(i.a)([Object(c.b)()],q.prototype,"tileInfo",void 0),Object(i.a)([Object(c.b)()],q.prototype,"extent",void 0),Object(i.a)([Object(c.b)()],q.prototype,"maximumByteSize",void 0),q=Object(i.a)([Object(d.a)("esri.views.interactive.snapping.featureSources.featureServiceSource.FeatureServiceTileStore")],q);class L{constructor(e,t,n){this.data=e,this.objectIds=t,this.byteSize=n}}class G{constructor(e,t,n){this.level=e,this.row=t,this.col=n,this.isLeaf=!1,this.extent=null,this.children=[null,null,null,null]}get hasChildren(){return!this.isLeaf&&(Object(o.l)(this.children[0])||Object(o.l)(this.children[1])||Object(o.l)(this.children[2])||Object(o.l)(this.children[3]))}}class Y{constructor(e,t=[]){this.missingTiles=t,this.fullArea=0,this.coveredArea=0,this.fullArea=Object(S.c)(e.extent),this.coveredArea=this.fullArea}prepend(e){this.missingTiles=e.missingTiles.concat(this.missingTiles),this.coveredArea+=e.coveredArea,this.fullArea+=e.fullArea}}class U{constructor(e,t,n){this.tileInfo=e,this.extent=null,this.info=new Y(t),Object(o.l)(n)&&(this.extent=Object(S.q)(n))}addMissing(e,t,n,i){const r={id:null,level:e,row:t,col:n};this.tileInfo.updateTileInfo(r,1),!Object(o.l)(r.extent)||Object(o.l)(this.extent)&&!Object(S.t)(this.extent,r.extent)||(this.info.missingTiles.push({data:r,resolution:i}),this.info.coveredArea-=Object(S.c)(r.extent))}}const X=.18751;var H=n(271);let Z=class extends r.a.EventedAccessor{constructor(){super(...arguments),this.isInitializing=!0,this.whenSetup=Object(a.e)(),this.handles=new s.a,this.updatingHandles=new H.a,this.pendingApplyEdits=new Map}get updating(){return this.featureFetcher.updating||this.isInitializing||this.updatingHandles.updating}destroy(){this.featureFetcher.destroy(),this.queryEngine.destroy(),this.featureStore.clear(),this.handles.destroy()}async setup(e){const{geometryType:t,objectIdField:n,timeInfo:i,fields:r}=e.serviceInfo;return this.featureStore=new f.a({...e.serviceInfo,hasZ:!1,hasM:!1}),this.queryEngine=new p.a({spatialReference:e.spatialReference,featureStore:this.featureStore,geometryType:t,fields:r,hasZ:!1,hasM:!1,objectIdField:n,timeInfo:i?m.a.fromJSON(i):null}),this.featureFetcher=new P({store:new q({featureStore:this.featureStore}),url:e.serviceInfo.url,objectIdField:e.serviceInfo.objectIdField,globalIdField:e.serviceInfo.globalIdField,capabilities:e.serviceInfo.capabilities,spatialReference:h.a.fromJSON(e.spatialReference),sourceSpatialReference:h.a.fromJSON(e.serviceInfo.spatialReference)}),this.handles.add([this.featureFetcher.watch("availability",(e=>this.emit("notify-availability",{availability:e})),!0),this.watch("updating",(()=>this.notifyUpdating()))]),this.whenSetup.resolve(),this.isInitializing=!1,this.configure(e.configuration)}async configure(e){return await this.updatingHandles.addPromise(this.whenSetup.promise),this.updateFeatureFetcherConfiguration(e),{result:{}}}async fetchCandidates(e,t){return await this.whenSetup.promise,Object(a.u)(t),{result:await this.queryEngine.executeQueryForSnapping({point:e.point,distance:e.distance,types:e.types,query:Object(o.l)(e.filter)?e.filter:{where:"1=1"}},Object(o.l)(t)?t.signal:null)}}async updateTiles(e,t){return await this.updatingHandles.addPromise(this.whenSetup.promise),Object(a.u)(t),this.featureFetcher.tileSize=e.tileSize,this.featureFetcher.tilesOfInterest=e.tiles,this.featureFetcher.tileInfo=Object(o.l)(e.tileInfo)?b.a.fromJSON(e.tileInfo):null,{result:{}}}async refresh(e,t){return await this.updatingHandles.addPromise(this.whenSetup.promise),Object(a.u)(t),this.featureFetcher.refresh(),{result:{}}}async whenNotUpdating(e,t){return await this.updatingHandles.addPromise(this.whenSetup.promise),Object(a.u)(t),await Object(a.y)(Object(l.i)(this,"updating"),t),{result:{}}}async getDebugInfo(e,t){return Object(a.u)(t),{result:this.featureFetcher.debugInfo}}async beginApplyEdits(e,t){this.updatingHandles.addPromise(this.whenSetup.promise),Object(a.u)(t);const n=Object(a.e)();return this.pendingApplyEdits.set(e.id,n),this.featureFetcher.applyEdits(n.promise),this.updatingHandles.addPromise(n.promise),{result:{}}}async endApplyEdits(e,t){const n=this.pendingApplyEdits.get(e.id);return n&&n.resolve(e.edits),Object(a.u)(t),{result:{}}}updateFeatureFetcherConfiguration(e){this.featureFetcher.filter=Object(o.l)(e.filter)?y.a.fromJSON(e.filter):null,this.featureFetcher.customParameters=e.customParameters}notifyUpdating(){this.emit("notify-updating",{updating:this.updating})}};function J(){return new Z}Object(i.a)([Object(c.b)({readOnly:!0})],Z.prototype,"updating",null),Object(i.a)([Object(c.b)()],Z.prototype,"isInitializing",void 0),Z=Object(i.a)([Object(d.a)("esri.views.interactive.snapping.featureSources.featureServiceSource.FeatureServiceSnappingSourceWorker")],Z)},595:function(e,t,n){"use strict";function i(e){return 32+e.length}function r(e){if(!e)return 0;let t=32;for(const n in e)if(e.hasOwnProperty(n)){const r=e[n];switch(typeof r){case"string":t+=i(r);break;case"number":t+=16;break;case"boolean":t+=4}}return t}function s(e,t){return 32+e.length*t}n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return s}))},697:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var i=n(84),r=n(85),s=n(219),o=n(693);class a{constructor(e=9,t){this.compareMinX=d,this.compareMinY=h,this.toBBox=function(e){return e},this._maxEntries=Math.max(4,e||9),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),t&&("function"==typeof t?this.toBBox=t:this._initFormat(t)),this.clear()}destroy(){this.clear(),O.prune(),v.prune(),w.prune(),x.prune()}all(e){this._all(this.data,e)}search(e,t){let n=this.data;const i=this.toBBox;if(g(e,n))for(O.clear();n;){for(let r=0,s=n.children.length;r<s;r++){const s=n.children[r],o=n.leaf?i(s):s;g(e,o)&&(n.leaf?t(s):y(e,o)?this._all(s,t):O.push(s))}n=O.pop()}}collides(e){let t=this.data;const n=this.toBBox;if(!g(e,t))return!1;for(O.clear();t;){for(let i=0,r=t.children.length;i<r;i++){const r=t.children[i],s=t.leaf?n(r):r;if(g(e,s)){if(t.leaf||y(e,s))return!0;O.push(r)}}t=O.pop()}return!1}load(e){if(!e.length)return this;if(e.length<this._minEntries){for(let t=0,n=e.length;t<n;t++)this.insert(e[t]);return this}let t=this._build(e.slice(0,e.length),0,e.length-1,0);if(this.data.children.length)if(this.data.height===t.height)this._splitRoot(this.data,t);else{if(this.data.height<t.height){const e=this.data;this.data=t,t=e}this._insert(t,this.data.height-t.height-1,!0)}else this.data=t;return this}insert(e){return e&&this._insert(e,this.data.height-1),this}clear(){return this.data=new M([]),this}remove(e){if(!e)return this;let t,n=this.data,s=null,o=0,a=!1;const l=this.toBBox(e);for(w.clear(),x.clear();n||w.length>0;){var c;if(n||(n=Object(r.d)(w.pop()),s=w.data[w.length-1],o=null!=(c=x.pop())?c:0,a=!0),n.leaf&&(t=Object(i.e)(n.children,e,n.children.length,n.indexHint),-1!==t))return n.children.splice(t,1),w.push(n),this._condense(w),this;a||n.leaf||!y(n,l)?s?(o++,n=s.children[o],a=!1):n=null:(w.push(n),x.push(o),o=0,s=n,n=n.children[0])}return this}toJSON(){return this.data}fromJSON(e){return this.data=e,this}_all(e,t){let n=e;for(v.clear();n;){var i;if(!0===n.leaf)for(const e of n.children)t(e);else v.pushArray(n.children);n=null!=(i=v.pop())?i:null}}_build(e,t,n,i){const r=n-t+1;let s=this._maxEntries;if(r<=s){const i=new M(e.slice(t,n+1));return l(i,this.toBBox),i}i||(i=Math.ceil(Math.log(r)/Math.log(s)),s=Math.ceil(r/s**(i-1)));const o=new _([]);o.height=i;const a=Math.ceil(r/s),c=a*Math.ceil(Math.sqrt(s));j(e,t,n,c,this.compareMinX);for(let l=t;l<=n;l+=c){const t=Math.min(l+c-1,n);j(e,l,t,a,this.compareMinY);for(let n=l;n<=t;n+=a){const r=Math.min(n+a-1,t);o.children.push(this._build(e,n,r,i-1))}}return l(o,this.toBBox),o}_chooseSubtree(e,t,n,i){for(;i.push(t),!0!==t.leaf&&i.length-1!==n;){let n,i=1/0,r=1/0;for(let s=0,o=t.children.length;s<o;s++){const o=t.children[s],a=f(o),l=b(e,o)-a;l<r?(r=l,i=a<i?a:i,n=o):l===r&&a<i&&(i=a,n=o)}t=n||t.children[0]}return t}_insert(e,t,n){const i=this.toBBox,r=n?e:i(e);w.clear();const s=this._chooseSubtree(r,this.data,t,w);for(s.children.push(e),u(s,r);t>=0&&w.data[t].children.length>this._maxEntries;)this._split(w,t),t--;this._adjustParentBBoxes(r,w,t)}_split(e,t){const n=e.data[t],i=n.children.length,r=this._minEntries;this._chooseSplitAxis(n,r,i);const s=this._chooseSplitIndex(n,r,i);if(!s)return void console.log("  Error: assertion failed at PooledRBush._split: no valid split index");const o=n.children.splice(s,n.children.length-s),a=n.leaf?new M(o):new _(o);a.height=n.height,l(n,this.toBBox),l(a,this.toBBox),t?e.data[t-1].children.push(a):this._splitRoot(n,a)}_splitRoot(e,t){this.data=new _([e,t]),this.data.height=e.height+1,l(this.data,this.toBBox)}_chooseSplitIndex(e,t,n){let i,r,s;i=r=1/0;for(let o=t;o<=n-t;o++){const t=c(e,0,o,this.toBBox),a=c(e,o,n,this.toBBox),l=m(t,a),u=f(t)+f(a);l<i?(i=l,s=o,r=u<r?u:r):l===i&&u<r&&(r=u,s=o)}return s}_chooseSplitAxis(e,t,n){const i=e.leaf?this.compareMinX:d,r=e.leaf?this.compareMinY:h;this._allDistMargin(e,t,n,i)<this._allDistMargin(e,t,n,r)&&e.children.sort(i)}_allDistMargin(e,t,n,i){e.children.sort(i);const r=this.toBBox,s=c(e,0,t,r),o=c(e,n-t,n,r);let a=p(s)+p(o);for(let l=t;l<n-t;l++){const t=e.children[l];u(s,e.leaf?r(t):t),a+=p(s)}for(let l=n-t-1;l>=t;l--){const t=e.children[l];u(o,e.leaf?r(t):t),a+=p(o)}return a}_adjustParentBBoxes(e,t,n){for(let i=n;i>=0;i--)u(t.data[i],e)}_condense(e){for(let t=e.length-1;t>=0;t--){const n=e.data[t];if(0===n.children.length)if(t>0){const r=e.data[t-1],s=r.children;s.splice(Object(i.e)(s,n,s.length,r.indexHint),1)}else this.clear();else l(n,this.toBBox)}}_initFormat(e){const t=["return a"," - b",";"];this.compareMinX=new Function("a","b",t.join(e[0])),this.compareMinY=new Function("a","b",t.join(e[1])),this.toBBox=new Function("a","return {minX: a"+e[0]+", minY: a"+e[1]+", maxX: a"+e[2]+", maxY: a"+e[3]+"};")}}function l(e,t){c(e,0,e.children.length,t,e)}function c(e,t,n,i,r){r||(r=new M([])),r.minX=1/0,r.minY=1/0,r.maxX=-1/0,r.maxY=-1/0;for(let s,o=t;o<n;o++)s=e.children[o],u(r,e.leaf?i(s):s);return r}function u(e,t){e.minX=Math.min(e.minX,t.minX),e.minY=Math.min(e.minY,t.minY),e.maxX=Math.max(e.maxX,t.maxX),e.maxY=Math.max(e.maxY,t.maxY)}function d(e,t){return e.minX-t.minX}function h(e,t){return e.minY-t.minY}function f(e){return(e.maxX-e.minX)*(e.maxY-e.minY)}function p(e){return e.maxX-e.minX+(e.maxY-e.minY)}function b(e,t){return(Math.max(t.maxX,e.maxX)-Math.min(t.minX,e.minX))*(Math.max(t.maxY,e.maxY)-Math.min(t.minY,e.minY))}function m(e,t){const n=Math.max(e.minX,t.minX),i=Math.max(e.minY,t.minY),r=Math.min(e.maxX,t.maxX),s=Math.min(e.maxY,t.maxY);return Math.max(0,r-n)*Math.max(0,s-i)}function y(e,t){return e.minX<=t.minX&&e.minY<=t.minY&&t.maxX<=e.maxX&&t.maxY<=e.maxY}function g(e,t){return t.minX<=e.maxX&&t.minY<=e.maxY&&t.maxX>=e.minX&&t.maxY>=e.minY}function j(e,t,n,i,s){const a=[t,n];for(;a.length;){const t=Object(r.d)(a.pop()),n=Object(r.d)(a.pop());if(t-n<=i)continue;const l=n+Math.ceil((t-n)/i/2)*i;Object(o.a)(e,l,n,t,s),a.push(n,l,l,t)}}const O=new s.a,v=new s.a,w=new s.a,x=new s.a({deallocator:void 0});class S extends class{constructor(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0}}{constructor(){super(...arguments),this.height=1,this.indexHint=new i.a}}class M extends S{constructor(e){super(),this.children=e,this.leaf=!0}}class _ extends S{constructor(e){super(),this.children=e,this.leaf=!1}}},764:function(e,t,n){"use strict";n.d(t,"a",(function(){return h}));var i=n(88),r=n(131),s=n(87),o=n(85),a=n(220),l=n(118),c=n(180),u=n(795),d=n(765);class h{constructor(e){this.geometryInfo=e,this._boundsStore=new u.a,this._featuresById=new Map,this._markedIds=new Set,this.events=new r.a,this.featureAdapter=d.a}get geometryType(){return this.geometryInfo.geometryType}get hasM(){return this.geometryInfo.hasM}get hasZ(){return this.geometryInfo.hasZ}get numFeatures(){return this._featuresById.size}get fullBounds(){if(!this.numFeatures)return null;const e=Object(l.l)(l.a);return this._featuresById.forEach((t=>{const n=this._boundsStore.get(t.objectId);n&&(e[0]=Math.min(n[0],e[0]),e[1]=Math.min(n[1],e[1]),e[2]=Math.max(n[2],e[2]),e[3]=Math.max(n[3],e[3]))})),e}get storeStatistics(){let e=0;return this._featuresById.forEach((t=>{Object(o.l)(t.geometry)&&t.geometry.coords&&(e+=t.geometry.coords.length)})),{featureCount:this._featuresById.size,vertexCount:e/(this.hasZ?this.hasM?4:3:this.hasM?3:2)}}add(e){this._add(e),this._emitChanged()}addMany(e){for(const t of e)this._add(t);this._emitChanged()}clear(){this._featuresById.clear(),this._boundsStore.clear(),this._emitChanged()}removeById(e){const t=this._featuresById.get(e);return t?(this._remove(t),this._emitChanged(),t):null}removeManyById(e){this._boundsStore.invalidateIndex();for(const t of e){const e=this._featuresById.get(t);e&&this._remove(e)}this._emitChanged()}forEachBounds(e,t,n){for(const i of e){const e=this._boundsStore.get(i.objectId);e&&t(Object(a.o)(n,e))}}getFeature(e){return this._featuresById.get(e)}has(e){return this._featuresById.has(e)}forEach(e){this._featuresById.forEach((t=>e(t)))}forEachInBounds(e,t){this._boundsStore.forEachInBounds(e,(e=>{t(this._featuresById.get(e))}))}startMarkingUsedFeatures(){this._boundsStore.invalidateIndex(),this._markedIds.clear()}sweep(){let e=!1;this._featuresById.forEach(((t,n)=>{this._markedIds.has(n)||(e=!0,this._remove(t))})),this._markedIds.clear(),e&&this._emitChanged()}_emitChanged(){this.events.emit("changed",void 0)}_add(e){if(!e)return;const t=e.objectId;if(null==t)return void s.a.getLogger("esri.layers.graphics.data.FeatureStore").error(new i.a("featurestore:invalid-feature","feature id is missing",{feature:e}));const n=this._featuresById.get(t);let r;if(this._markedIds.add(t),n?(e.displayId=n.displayId,r=this._boundsStore.get(t),this._boundsStore.delete(t)):Object(o.l)(this.onFeatureAdd)&&this.onFeatureAdd(e),Object(o.k)(e.geometry)||!e.geometry.coords||!e.geometry.coords.length)return this._boundsStore.set(t,null),void this._featuresById.set(t,e);r=Object(c.r)(Object(o.l)(r)?r:Object(l.l)(),e.geometry,this.geometryInfo.hasZ,this.geometryInfo.hasM),Object(o.l)(r)&&this._boundsStore.set(t,r),this._featuresById.set(t,e)}_remove(e){return Object(o.l)(this.onFeatureRemove)&&this.onFeatureRemove(e),this._markedIds.delete(e.objectId),this._boundsStore.delete(e.objectId),this._featuresById.delete(e.objectId),e}}},765:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var i=n(473),r=n(262),s=n(186);const o={getObjectId:e=>e.objectId,getAttributes:e=>e.attributes,getAttribute:(e,t)=>e.attributes[t],cloneWithGeometry:(e,t)=>new r.b(t,e.attributes,null,e.objectId),getGeometry:e=>e.geometry,getCentroid:(e,t)=>(e.centroid||(e.centroid=Object(i.a)(new s.a,e.geometry,t.hasZ,t.hasM)),e.centroid)}},795:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var i=n(82),r=n(697);const s={minX:0,minY:0,maxX:0,maxY:0};class o{constructor(){this._indexInvalid=!1,this._boundsToLoad=[],this._boundsById=new Map,this._idByBounds=new Map,this._index=new r.a(9,Object(i.a)("esri-csp-restrictions")?e=>({minX:e[0],minY:e[1],maxX:e[2],maxY:e[3]}):["[0]","[1]","[2]","[3]"]),this._loadIndex=()=>{if(this._indexInvalid){const e=new Array(this._idByBounds.size);let t=0;this._idByBounds.forEach(((n,i)=>{e[t++]=i})),this._indexInvalid=!1,this._index.clear(),this._index.load(e)}else this._boundsToLoad.length&&(this._index.load(this._boundsToLoad.filter((e=>this._idByBounds.has(e)))),this._boundsToLoad.length=0)}}clear(){this._indexInvalid=!1,this._boundsToLoad.length=0,this._boundsById.clear(),this._idByBounds.clear(),this._index.clear()}delete(e){const t=this._boundsById.get(e);this._boundsById.delete(e),t&&(this._idByBounds.delete(t),this._indexInvalid||this._index.remove(t))}forEachInBounds(e,t){this._loadIndex(),function(e,t,n){s.minX=t[0],s.minY=t[1],s.maxX=t[2],s.maxY=t[3],e.search(s,n)}(this._index,e,(e=>t(this._idByBounds.get(e))))}get(e){return this._boundsById.get(e)}has(e){return this._boundsById.has(e)}invalidateIndex(){this._indexInvalid||(this._indexInvalid=!0,this._boundsToLoad.length=0)}set(e,t){if(!this._indexInvalid){const t=this._boundsById.get(e);t&&(this._index.remove(t),this._idByBounds.delete(t))}this._boundsById.set(e,t),t&&(this._idByBounds.set(t,e),this._indexInvalid||(this._boundsToLoad.push(t),this._boundsToLoad.length>5e4&&this._loadIndex()))}}},94:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var i=n(90),r=n(81);function s(e,t={}){var n;const s=e instanceof i.a?e:new i.a(e,t),o={type:null==(n=null==t?void 0:t.ignoreUnknown)||n?s.apiValues:String,readOnly:null==t?void 0:t.readOnly,json:{type:s.jsonValues,read:(null==t||!t.readOnly)&&{reader:s.read},write:{writer:s.write}}};return void 0!==(null==t?void 0:t.default)&&(o.json.default=t.default),void 0!==(null==t?void 0:t.name)&&(o.json.name=t.name),Object(r.b)(o)}}}]);
//# sourceMappingURL=108.5607dac1.chunk.js.map