"use strict";(globalThis.webpackChunkimaps=globalThis.webpackChunkimaps||[]).push([[9014],{67077:(e,t,i)=>{function r(){return[0,0,0,0]}function s(e){return[e[0],e[1],e[2],e[3]]}function o(e,t,i,r){return[e,t,i,r]}function n(e){const t=[0,0,0,0],i=Math.min(4,e.length);for(let r=0;r<i;++r)t[r]=e[r];return t}function l(e,t){return new Float64Array(e,t,4)}function a(){return[0,0,0,0]}function u(){return o(1,1,1,1)}function p(){return o(1,0,0,0)}function c(){return o(0,1,0,0)}function d(){return o(0,0,1,0)}function y(){return o(0,0,0,1)}i.d(t,{O:()=>b,Z:()=>h,a:()=>l,b:()=>n,c:()=>r,d:()=>s,f:()=>o});const h=[0,0,0,0],b=u(),f=p(),m=c(),g=d(),_=y();Object.freeze(Object.defineProperty({__proto__:null,create:r,clone:s,fromValues:o,fromArray:n,createView:l,zeros:a,ones:u,unitX:p,unitY:c,unitZ:d,unitW:y,ZEROS:h,ONES:b,UNIT_X:f,UNIT_Y:m,UNIT_Z:g,UNIT_W:_},Symbol.toStringTag,{value:"Module"}))},16054:(e,t,i)=>{i.d(t,{Z:()=>s});var r=i(18759);class s{constructor(e,t){this._storage=new r.WJ,this._storage.maxSize=e,t&&this._storage.registerRemoveFunc("",t)}put(e,t,i){this._storage.put(e,t,i,1)}pop(e){return this._storage.pop(e)}get(e){return this._storage.get(e)}clear(){this._storage.clearAll()}destroy(){this._storage.destroy()}get maxSize(){return this._storage.maxSize}set maxSize(e){this._storage.maxSize=e}}},78451:(e,t,i)=>{i.d(t,{Z:()=>h});var r,s=i(27366),o=i(84652),n=i(49861),l=(i(25243),i(69912)),a=i(31201),u=i(37270),p=i(49018),c=i(86893),d=i(75465);let y=r=class extends((0,c.W)(p.Z)){constructor(e){super(e),this.config=null,this.fieldMap=null,this.scaleExpression=null,this.scaleExpressionTitle=null,this.url=null,this.type="dictionary"}get _loader(){return new d.DictionaryLoader(this.url,this.config,this.fieldMap)}writeData(e,t){e&&(t.scalingExpressionInfo={expression:e,returnType:"number"})}writeVisualVariables(e,t,i,r){r?.origin||super.writeVisualVariables(e,t,i,r)}clone(){return new r({config:(0,o.d9)(this.config),scaleExpression:this.scaleExpression,scaleExpressionTitle:this.scaleExpressionTitle,fieldMap:(0,o.d9)(this.fieldMap),url:(0,o.d9)(this.url),visualVariables:(0,o.d9)(this.visualVariables)})}async getSymbolAsync(e,t){return this._loader.getSymbolAsync(e,t)}async collectRequiredFields(e,t){await this.collectVVRequiredFields(e,t),this.scaleExpression&&await(0,u.io)(e,t,this.scaleExpression);for(const i in this.fieldMap){const r=this.fieldMap[i];t.has(r)&&e.add(r)}}get arcadeRequired(){return!0}getSymbol(){return null}getSymbols(){return[]}getAttributeHash(){return this.visualVariables&&this.visualVariables.reduce(((e,t)=>e+t.getAttributeHash()),"")}getMeshHash(){return`${this.url}-${JSON.stringify(this.fieldMap)}`}getSymbolFields(){return this._loader.getSymbolFields()}};(0,s._)([(0,n.Cb)({type:d.DictionaryLoader})],y.prototype,"_loader",null),(0,s._)([(0,n.Cb)({type:Object,json:{read:{source:"configuration"},write:{target:"configuration"}}})],y.prototype,"config",void 0),(0,s._)([(0,n.Cb)({type:Object,json:{write:!0}})],y.prototype,"fieldMap",void 0),(0,s._)([(0,n.Cb)({type:String,json:{read:{source:"scalingExpressionInfo.expression"},write:!0}})],y.prototype,"scaleExpression",void 0),(0,s._)([(0,a.c)("scaleExpression")],y.prototype,"writeData",null),(0,s._)([(0,n.Cb)({type:String,json:{read:{source:"scalingExpressionInfo.title"},write:{target:"scalingExpressionInfo.title",overridePolicy(e){return{enabled:!!e&&!!this.scaleExpression}}}}})],y.prototype,"scaleExpressionTitle",void 0),(0,s._)([(0,n.Cb)({type:String,json:{write:!0}})],y.prototype,"url",void 0),(0,s._)([(0,a.c)("visualVariables")],y.prototype,"writeVisualVariables",null),y=r=(0,s._)([(0,l.j)("esri.renderers.DictionaryRenderer")],y);const h=y},98689:(e,t,i)=>{i.d(t,{Z:()=>S});var r,s=i(27366),o=i(51995),n=i(84652),l=i(8025),a=(i(25243),i(27135)),u=i(49861),p=i(69912),c=i(37270),d=i(49018),y=i(86893),h=i(44184),b=i(46784);i(63780),i(93169);let f=r=class extends b.wq{constructor(){super(...arguments),this.unit=null}clone(){return new r({unit:this.unit})}};(0,s._)([(0,u.Cb)({type:String,json:{write:!0}})],f.prototype,"unit",void 0),f=r=(0,s._)([(0,p.j)("esri.renderers.support.DotDensityLegendOptions")],f);const m=f;var g,_=i(61459),w=i(16851);let v=g=class extends((0,y.W)(d.Z)){constructor(e){super(e),this.attributes=null,this.backgroundColor=new o.Z([0,0,0,0]),this.blendDots=!0,this.dotBlendingEnabled=!0,this.dotShape="square",this.dotSize=1,this.legendOptions=null,this.outline=new w.Z,this.dotValue=null,this.referenceDotValue=null,this.referenceScale=null,this.seed=1,this.type="dot-density"}calculateDotValue(e){if(null==this.referenceScale)return this.dotValue;const t=e/this.referenceScale*this.dotValue;return t<1?1:t}getSymbol(){return new _.Z({outline:this.outline})}async getSymbolAsync(){return this.getSymbol()}getSymbols(){return[this.getSymbol()]}getAttributeHash(){return this.attributes&&this.attributes.reduce(((e,t)=>e+t.getAttributeHash()),"")}getMeshHash(){return JSON.stringify(this.outline)}clone(){return new g({attributes:(0,n.d9)(this.attributes),backgroundColor:(0,n.d9)(this.backgroundColor),dotBlendingEnabled:(0,n.d9)(this.dotBlendingEnabled),dotShape:(0,n.d9)(this.dotShape),dotSize:(0,n.d9)(this.dotSize),dotValue:(0,n.d9)(this.dotValue),legendOptions:(0,n.d9)(this.legendOptions),outline:(0,n.d9)(this.outline),referenceScale:(0,n.d9)(this.referenceScale),visualVariables:(0,n.d9)(this.visualVariables),authoringInfo:this.authoringInfo&&this.authoringInfo.clone()})}getControllerHash(){return`${this.attributes.map((e=>e.field||e.valueExpression||""))}-${this.outline&&JSON.stringify(this.outline.toJSON())||""}`}async collectRequiredFields(e,t){await this.collectVVRequiredFields(e,t);for(const i of this.attributes)i.valueExpression&&await(0,c.io)(e,t,i.valueExpression),i.field&&e.add(i.field)}};(0,s._)([(0,u.Cb)({type:[h.Z],json:{write:!0}})],v.prototype,"attributes",void 0),(0,s._)([(0,u.Cb)({type:o.Z,json:{write:!0}})],v.prototype,"backgroundColor",void 0),(0,s._)([(0,u.Cb)({type:Boolean}),(0,l.B)("dotBlendingEnabled")],v.prototype,"blendDots",void 0),(0,s._)([(0,u.Cb)({type:Boolean,json:{write:!0}})],v.prototype,"dotBlendingEnabled",void 0),(0,s._)([(0,u.Cb)({type:String,json:{write:!1}})],v.prototype,"dotShape",void 0),(0,s._)([(0,u.Cb)({type:Number,json:{write:!0,origins:{"web-map":{write:!1},"web-scene":{write:!1}}}})],v.prototype,"dotSize",void 0),(0,s._)([(0,u.Cb)({type:m,json:{write:!0}})],v.prototype,"legendOptions",void 0),(0,s._)([(0,u.Cb)({type:w.Z,json:{default:null,write:!0}})],v.prototype,"outline",void 0),(0,s._)([(0,u.Cb)({type:Number,json:{write:!0}})],v.prototype,"dotValue",void 0),(0,s._)([(0,u.Cb)({type:Number}),(0,l.B)("dotValue")],v.prototype,"referenceDotValue",void 0),(0,s._)([(0,u.Cb)({type:Number,json:{write:!0}})],v.prototype,"referenceScale",void 0),(0,s._)([(0,u.Cb)({type:Number,json:{write:!0}})],v.prototype,"seed",void 0),(0,s._)([(0,a.J)({dotDensity:"dot-density"})],v.prototype,"type",void 0),v=g=(0,s._)([(0,p.j)("esri.renderers.DotDensityRenderer")],v);const S=v},57823:(e,t,i)=>{i.d(t,{Z:()=>I});var r=i(27366),s=i(51995),o=(i(51508),i(44927)),n=i(84652),l=i(32718),a=i(99346),u=i(17842),p=i(49861),c=i(23879),d=(i(25243),i(27135)),y=i(69912),h=i(37270),b=i(49018),f=i(25472),m=i(6711),g=i(11582),_=i(46784);i(63780),i(93169);let w=class extends((0,g.J)(_.wq)){constructor(){super(...arguments),this.minLabel=null,this.maxLabel=null,this.title=null}};(0,r._)([(0,p.Cb)({type:String,json:{write:!0}})],w.prototype,"minLabel",void 0),(0,r._)([(0,p.Cb)({type:String,json:{write:!0}})],w.prototype,"maxLabel",void 0),(0,r._)([(0,p.Cb)({type:String,json:{write:!0}})],w.prototype,"title",void 0),w=(0,r._)([(0,y.j)("esri.renderers.support.HeatmapLegendOptions")],w);var v,S=i(27811),x=i(16072);const C=l.Z.getLogger("esri.renderers.HeatmapRenderer");function j(e){if(null!=e){const{maxDensity:t,minDensity:i,radius:r}=e;if(null!=t||null!=i||null!=r){const{blurRadius:t,maxPixelIntensity:i,minPixelIntensity:r,...s}=e;return s}}return e}let Z=v=class extends b.Z{constructor(e){super(e),this.authoringInfo=null,this.colorStops=[new m.Z({ratio:0,color:new s.Z("rgba(255, 140, 0, 0)")}),new m.Z({ratio:.75,color:new s.Z("rgba(255, 140, 0, 1)")}),new m.Z({ratio:.9,color:new s.Z("rgba(255, 0,   0, 1)")})],this.field=null,this.fieldOffset=0,this.legendOptions=null,this.maxDensity=.04,this.minDensity=0,this.radius=18,this.referenceScale=0,this.type="heatmap",this.valueExpression=null,this.valueExpressionTitle=null,this._warnedProps={blurRadius:!1,maxPixelIntensity:!1,minPixelIntensity:!1}}normalizeCtorArgs(e){return j(e)}get blurRadius(){return(0,S.AJ)(this.radius)}set blurRadius(e){const t=this.maxPixelIntensity,i=this.minPixelIntensity;this._set("radius",(0,S.k0)(e)),this._warnAboutDeprecatedGaussianBlurProp("blurRadius","radius"),this._set("maxDensity",t*this._pixelIntensityToDensity),this._set("minDensity",i*this._pixelIntensityToDensity)}get maxPixelIntensity(){return this.maxDensity/this._pixelIntensityToDensity}set maxPixelIntensity(e){this._set("maxDensity",e*this._pixelIntensityToDensity),this._warnAboutDeprecatedGaussianBlurProp("maxPixelIntensity","maxDensity")}get minPixelIntensity(){return this.minDensity/this._pixelIntensityToDensity}set minPixelIntensity(e){this._set("minDensity",e*this._pixelIntensityToDensity),this._warnAboutDeprecatedGaussianBlurProp("minPixelIntensity","minDensity")}get _pixelIntensityToDensity(){return 24/(S.nu**2*this.blurRadius**4)}_warnAboutDeprecatedGaussianBlurProp(e,t){this._warnedProps[e]||"user"===(0,c.vw)(this).getDefaultOrigin()&&(this._warnedProps[e]=!0,(0,a.Os)((()=>{(0,o.Mr)(C,e,{replacement:`${String(t)} (suggested value: ${this._get(t)})`,version:"4.24"})})))}read(e,t){e=j(e),super.read(e,t)}getSymbol(){const e=0!==this.referenceScale?5:1,t=Math.min(this.radius*e,(0,u.Wz)(256));return new x.Z({size:t})}async getSymbolAsync(){return this.getSymbol()}getSymbols(){return[this.getSymbol()]}async collectRequiredFields(e,t){const i=this.field,r=this.valueExpression;i&&"string"==typeof i&&await(0,h.AB)(e,t,i),r&&"string"==typeof r&&await(0,h.io)(e,t,r)}getAttributeHash(){return null}getMeshHash(){return`${JSON.stringify(this.colorStops)}.${this.blurRadius}.${this.field}`}clone(){return new v({colorStops:(0,n.d9)(this.colorStops),field:this.field,legendOptions:(0,n.d9)(this.legendOptions),maxDensity:this.maxDensity,minDensity:this.minDensity,radius:this.radius,referenceScale:this.referenceScale,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle})}};(0,r._)([(0,p.Cb)({type:f.Z,json:{write:!1}})],Z.prototype,"authoringInfo",void 0),(0,r._)([(0,p.Cb)({type:Number,json:{origins:{"portal-item":{write:!0},"web-map":{write:!0}}}})],Z.prototype,"blurRadius",null),(0,r._)([(0,p.Cb)({type:[m.Z],json:{write:!0}})],Z.prototype,"colorStops",void 0),(0,r._)([(0,p.Cb)({type:String,json:{write:!0}})],Z.prototype,"field",void 0),(0,r._)([(0,p.Cb)({type:Number,json:{write:{overridePolicy:(e,t,i)=>({enabled:null==i})},origins:{"web-scene":{write:!1}}}})],Z.prototype,"fieldOffset",void 0),(0,r._)([(0,p.Cb)({type:w,json:{write:!0}})],Z.prototype,"legendOptions",void 0),(0,r._)([(0,p.Cb)({type:Number,json:{write:!0}})],Z.prototype,"maxDensity",void 0),(0,r._)([(0,p.Cb)({type:Number,json:{origins:{"portal-item":{write:!0},"web-map":{write:!0}}}})],Z.prototype,"maxPixelIntensity",null),(0,r._)([(0,p.Cb)({type:Number,json:{write:!0}})],Z.prototype,"minDensity",void 0),(0,r._)([(0,p.Cb)({type:Number,json:{origins:{"portal-item":{write:!0},"web-map":{write:!0}}}})],Z.prototype,"minPixelIntensity",null),(0,r._)([(0,p.Cb)({type:Number,cast:u.t_,json:{write:!0}})],Z.prototype,"radius",void 0),(0,r._)([(0,p.Cb)({type:Number,range:{min:0},json:{default:0,write:!0}})],Z.prototype,"referenceScale",void 0),(0,r._)([(0,d.J)({heatmap:"heatmap"})],Z.prototype,"type",void 0),(0,r._)([(0,p.Cb)({type:String,json:{write:!0,origins:{"web-document":{write:!1},"portal-item":{write:!1}}}})],Z.prototype,"valueExpression",void 0),(0,r._)([(0,p.Cb)({type:String})],Z.prototype,"valueExpressionTitle",void 0),(0,r._)([(0,p.Cb)({readOnly:!0})],Z.prototype,"_pixelIntensityToDensity",null),Z=v=(0,r._)([(0,y.j)("esri.renderers.HeatmapRenderer")],Z);const I=Z},32066:(e,t,i)=>{i.d(t,{Z:()=>v});var r=i(27366),s=i(51995),o=(i(51508),i(11582)),n=i(17842),l=i(49861),a=(i(63780),i(93169),i(25243),i(27135)),u=i(69912),p=i(37270),c=i(49018),d=i(86893),y=i(44184),h=i(46784);let b=class extends((0,o.J)(h.wq)){constructor(){super(...arguments),this.color=new s.Z([0,0,0,0]),this.label=null,this.threshold=0}};(0,r._)([(0,l.Cb)({type:s.Z,json:{write:!0}})],b.prototype,"color",void 0),(0,r._)([(0,l.Cb)({type:String,json:{write:!0}})],b.prototype,"label",void 0),(0,r._)([(0,l.Cb)({type:Number,range:{min:0,max:1},json:{write:!0}})],b.prototype,"threshold",void 0),b=(0,r._)([(0,u.j)("esri.renderers.support.OthersCategory")],b);let f=class extends((0,o.J)(h.wq)){constructor(){super(...arguments),this.title=null}};(0,r._)([(0,l.Cb)({type:String,json:{write:!0}})],f.prototype,"title",void 0),f=(0,r._)([(0,u.j)("esri.renderers.support.PieChartLegendOptions")],f);var m=i(16072),g=i(61459),_=i(16851);let w=class extends((0,d.W)((0,o.J)(c.Z))){constructor(e){super(e),this.attributes=null,this.backgroundFillSymbol=null,this.defaultColor=new s.Z([0,0,0,0]),this.defaultLabel=null,this.holePercentage=0,this.othersCategory=new b,this.legendOptions=null,this.outline=null,this.size=12,this.type="pie-chart"}getSymbol(){return new m.Z({size:this.size?this.size/2+(this.outline?.width||0):0})}async getSymbolAsync(){return this.getSymbol()}getSymbols(){return[this.getSymbol(),this.backgroundFillSymbol]}getAttributeHash(){return this.visualVariables&&this.visualVariables.reduce(((e,t)=>e+t.getAttributeHash()),"")}getMeshHash(){return this.getSymbols().reduce(((e,t)=>e+JSON.stringify(t)),"")}async collectRequiredFields(e,t){await this.collectVVRequiredFields(e,t);for(const i of this.attributes)i.valueExpression&&await(0,p.io)(e,t,i.valueExpression),i.field&&e.add(i.field)}};(0,r._)([(0,l.Cb)({type:[y.Z],json:{write:!0}})],w.prototype,"attributes",void 0),(0,r._)([(0,l.Cb)({type:g.Z,json:{default:null,write:!0}})],w.prototype,"backgroundFillSymbol",void 0),(0,r._)([(0,l.Cb)({type:s.Z,json:{write:!0}})],w.prototype,"defaultColor",void 0),(0,r._)([(0,l.Cb)({type:String,json:{write:!0}})],w.prototype,"defaultLabel",void 0),(0,r._)([(0,l.Cb)({type:Number,range:{min:0,max:1},json:{write:!0}})],w.prototype,"holePercentage",void 0),(0,r._)([(0,l.Cb)({type:b,json:{write:!0}})],w.prototype,"othersCategory",void 0),(0,r._)([(0,l.Cb)({type:f,json:{write:!0}})],w.prototype,"legendOptions",void 0),(0,r._)([(0,l.Cb)({type:_.Z,json:{default:null,write:!0}})],w.prototype,"outline",void 0),(0,r._)([(0,l.Cb)({type:Number,cast:n.t_,json:{write:!0}})],w.prototype,"size",void 0),(0,r._)([(0,a.J)({pieChart:"pie-chart"})],w.prototype,"type",void 0),w=(0,r._)([(0,u.j)("esri.renderers.PieChartRenderer")],w);const v=w},34999:(e,t,i)=>{i.d(t,{Z:()=>y});var r,s=i(27366),o=i(84652),n=i(49861),l=(i(25243),i(27135)),a=i(69912),u=i(49018),p=i(86893),c=i(17364);let d=r=class extends((0,p.W)(u.Z)){constructor(e){super(e),this.description=null,this.label=null,this.symbol=null,this.type="simple"}async collectRequiredFields(e,t){await Promise.all([this.collectSymbolFields(e,t),this.collectVVRequiredFields(e,t)])}async collectSymbolFields(e,t){await Promise.all(this.getSymbols().map((i=>i.collectRequiredFields(e,t))))}getSymbol(e,t){return this.symbol}async getSymbolAsync(e,t){return this.symbol}getSymbols(){return this.symbol?[this.symbol]:[]}getAttributeHash(){return this.visualVariables&&this.visualVariables.reduce(((e,t)=>e+t.getAttributeHash()),"")}getMeshHash(){return this.getSymbols().reduce(((e,t)=>e+JSON.stringify(t)),"")}get arcadeRequired(){return this.arcadeRequiredForVisualVariables}clone(){return new r({description:this.description,label:this.label,symbol:this.symbol&&this.symbol.clone(),visualVariables:(0,o.d9)(this.visualVariables),authoringInfo:this.authoringInfo&&this.authoringInfo.clone()})}};(0,s._)([(0,n.Cb)({type:String,json:{write:!0}})],d.prototype,"description",void 0),(0,s._)([(0,n.Cb)({type:String,json:{write:!0}})],d.prototype,"label",void 0),(0,s._)([(0,n.Cb)(c.G)],d.prototype,"symbol",void 0),(0,s._)([(0,l.J)({simple:"simple"})],d.prototype,"type",void 0),d=r=(0,s._)([(0,a.j)("esri.renderers.SimpleRenderer")],d);const y=d},44184:(e,t,i)=>{i.d(t,{Z:()=>h});var r,s=i(27366),o=i(51995),n=i(46784),l=i(32718),a=i(49861),u=(i(63780),i(93169),i(89125)),p=i(69912),c=i(25243);const d=l.Z.getLogger("esri.renderers.support.AttributeColorInfo");let y=r=class extends n.wq{constructor(e){super(e),this.color=null,this.field=null,this.label=null,this.valueExpression=null,this.valueExpressionTitle=null}castField(e){return null==e?e:"function"==typeof e?(d.error(".field: field must be a string value"),null):(0,c.Zs)(e)}getAttributeHash(){return`${this.field}-${this.valueExpression}`}clone(){return new r({color:this.color&&this.color.clone(),field:this.field,label:this.label,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle})}};(0,s._)([(0,a.Cb)({type:o.Z,json:{type:[Number],write:!0}})],y.prototype,"color",void 0),(0,s._)([(0,a.Cb)({type:String,json:{write:!0}})],y.prototype,"field",void 0),(0,s._)([(0,u.p)("field")],y.prototype,"castField",null),(0,s._)([(0,a.Cb)({type:String,json:{write:!0}})],y.prototype,"label",void 0),(0,s._)([(0,a.Cb)({type:String,json:{write:!0}})],y.prototype,"valueExpression",void 0),(0,s._)([(0,a.Cb)({type:String,json:{write:!0}})],y.prototype,"valueExpressionTitle",void 0),y=r=(0,s._)([(0,p.j)("esri.renderers.support.AttributeColorInfo")],y);const h=y},75465:(e,t,i)=>{i.r(t),i.d(t,{DictionaryLoader:()=>b});var r=i(51995),s=i(76200),o=i(10064),n=i(32718),l=i(16054),a=i(92026),u=i(66978),p=i(643),c=i(819),d=i(75021);const y=n.Z.getLogger("esri.renderers.support.DictionaryLoader"),h={type:"CIMSimpleLineCallout",lineSymbol:{type:"CIMLineSymbol",symbolLayers:[{type:"CIMSolidStroke",width:.5,color:[0,0,0,255]}]}};class b{constructor(e,t,i){this.config=null,this.fieldMap=null,this.url=null,this._ongoingRequests=new Map,this._symbolCache=new l.Z(100),this.url=e,this.config=t,this.fieldMap=i}getSymbolFields(){return this._symbolFields}async getSymbolAsync(e,t){let i;this._dictionaryPromise||(this._dictionaryPromise=this.fetchResources(t));try{i=await this._dictionaryPromise}catch(f){if((0,u.D_)(f))return this._dictionaryPromise=null,null}const s={};if(this.fieldMap)for(const r of this._symbolFields){const t=this.fieldMap[r];if(t&&null!=e.attributes[t]){const i=""+e.attributes[t];s[r]=i}else s[r]=""}const o=i(s,t);if(!o||"string"!=typeof o)return null;const n=(0,p.hP)(o).toString(),l=this._symbolCache.get(n);if(l)return l.catch((()=>{this._symbolCache.pop(n)})),l;const c=o.split(";"),d=[],y=[];for(const a of c)if(a)if(a.includes("po:")){const e=a.substr(3).split("|");if(3===e.length){const t=e[0],i=e[1];let s=e[2];if("DashTemplate"===i)s=s.split(" ").map((e=>Number(e)));else if("Color"===i){const e=new r.Z(s).toRgba();s=[e[0],e[1],e[2],255*e[3]]}else s=Number(s);y.push({primitiveName:t,propertyName:i,value:s})}}else if(a.includes("|")){for(const e of a.split("|"))if(this._itemNames.has(e)){d.push(e);break}}else this._itemNames.has(a)&&d.push(a);const h=!(0,a.pC)(e.geometry)||!e.geometry.hasZ&&"point"===e.geometry.type,b=this._cimPartsToCIMSymbol(d,y,h,t);return this._symbolCache.put(n,b,1),b}async fetchResources(e){if(this._dictionaryPromise)return this._dictionaryPromise;if(!this.url)return void y.error("no valid URL!");const t=(0,s.default)(this.url+"/resources/styles/dictionary-info.json",{responseType:"json",query:{f:"json"},signal:(0,a.pC)(e)?e.signal:null}),[{data:i}]=await Promise.all([t,(0,c.LC)()]);if(!i)throw this._dictionaryPromise=null,new o.Z("esri.renderers.DictionaryRenderer","Bad dictionary data!");const r=i.expression,n=i.authoringInfo;this._refSymbolUrlTemplate=this.url+"/"+i.cimRefTemplateUrl,this._itemNames=new Set(i.itemsNames),this._symbolFields=n.symbol;const l={};if(this.config){const e=this.config;for(const t in e)l[t]=e[t]}if(n.configuration)for(const s of n.configuration)l.hasOwnProperty(s.name)||(l[s.name]=s.value);const u=[];if((0,a.pC)(e)&&e.fields&&this.fieldMap)for(const s of this._symbolFields){const t=this.fieldMap[s],i=e.fields.filter((e=>e.name===t));i.length>0&&u.push({...i[0],name:s})}return this._dictionaryPromise=(0,c.pp)(r,(0,a.pC)(e)?e.spatialReference:null,u,l).then((e=>{const t={scale:0};return(i,r)=>{const s=e.repurposeFeature({geometry:null,attributes:i});return t.scale=(0,a.pC)(r)?r.scale:void 0,e.evaluate({$feature:s,$view:t})}})).catch((e=>(y.error("Creating dictinoary expression failed:",e),null))),this._dictionaryPromise}async _cimPartsToCIMSymbol(e,t,i,r){const s=new Array(e.length);for(let l=0;l<e.length;l++)s[l]=this._getSymbolPart(e[l],r);const o=await Promise.all(s),n=this.fieldMap;for(const l of o)f(l,n);return new d.Z({data:this._combineSymbolParts(o,t,i)})}async _getSymbolPart(e,t){if(this._ongoingRequests.has(e))return this._ongoingRequests.get(e).then((e=>e.data));const i=this._refSymbolUrlTemplate.replace(/\{itemName\}/gi,e),r=(0,s.default)(i,{responseType:"json",query:{f:"json"},...t});this._ongoingRequests.set(e,r);try{return(await r).data}catch(o){throw this._ongoingRequests.delete(e),o}}_combineSymbolParts(e,t,i){if(!e||0===e.length)return null;const r={...e[0]};if(e.length>1){r.symbolLayers=[];for(const t of e){const e=t;r.symbolLayers.unshift(...e.symbolLayers)}}return i&&(r.callout=h),{type:"CIMSymbolReference",symbol:r,primitiveOverrides:t}}}function f(e,t){if(!e)return;const i=e.symbolLayers;if(!i)return;let r=i.length;for(;r--;){const e=i[r];e&&!1!==e.enable&&"CIMVectorMarker"===e.type&&m(e,t)}}function m(e,t){const i=e.markerGraphics;if(i)for(const r of i){if(!r)continue;const e=r.symbol;if(e)switch(e.type){case"CIMPointSymbol":case"CIMLineSymbol":case"CIMPolygonSymbol":f(e,t);break;case"CIMTextSymbol":e.fieldMap=t}}}},6711:(e,t,i)=>{i.d(t,{Z:()=>c});var r,s=i(27366),o=i(51995),n=i(46784),l=i(49861),a=(i(63780),i(93169),i(25243)),u=i(69912);let p=r=class extends n.wq{constructor(e){super(e),this.color=null,this.ratio=null}clone(){return new r({color:this.color,ratio:this.ratio})}};(0,s._)([(0,l.Cb)({type:o.Z,json:{type:[a.z8],default:null,write:!0}})],p.prototype,"color",void 0),(0,s._)([(0,l.Cb)({type:Number,json:{write:!0}})],p.prototype,"ratio",void 0),p=r=(0,s._)([(0,u.j)("esri.renderers.support.HeatmapColorStop")],p);const c=p},27811:(e,t,i)=>{i.d(t,{AJ:()=>u,If:()=>h,QM:()=>d,hy:()=>y,k0:()=>a,nu:()=>l,uI:()=>c,wx:()=>b});var r=i(16889),s=i(17842),o=i(90045),n=i(67077);const l=2.4;function a(e){return(0,s.Wz)(e*l)}function u(e){return(0,s.F2)(e)/l}function p(e,t,i,s){let{color:n,ratio:l}=t,{color:a,ratio:u}=i;if(u===l){const e=1e-6;1===u?l-=e:u+=e}const p=(0,r.uZ)((s-l)/(u-l),0,1);(0,o.l)(e,n.toArray(),a.toArray(),p)}function c(e){const t=new Uint8ClampedArray(2048);if(e=e.filter((e=>{let{ratio:t}=e;return t>=0&&t<=1})).sort(((e,t)=>e.ratio-t.ratio)).map((e=>{let{color:t,ratio:i}=e;return{color:t,ratio:Math.max(i,.001)}})),e.length<1)return t;let i=e[0],r=e[0],s=1;const o=(0,n.c)();for(let n=0;n<512;n++){const l=(n+.5)/512;for(;l>r.ratio&&s<e.length;)i=r,r=e[s++];p(o,i,r,l),t.set(o,4*n)}return t}function d(e,t,i,r){const{radius:o,fieldOffset:n,field:l}=t,a=Math.round((0,s.F2)(o)),u=new Float64Array(i*r);let p,c=Number.NEGATIVE_INFINITY;const d=function(e,t){return null!=e?"string"==typeof t?t=>-1*+t.readAttribute(e):i=>+i.readAttribute(e)+t:e=>1}(l,n),y=new Set;for(const s of e){const e=s.getCursor();for(;e.next();){const t=e.getObjectId();if(y.has(t))continue;y.add(t);const s=e.readLegacyPointGeometry(),o=128;if(s.x<-o||s.x>=i+o||s.y<-o||s.y>r+o)continue;const n=+d(e),l=Math.max(0,Math.round(s.x)-a),b=Math.max(0,Math.round(s.y)-a),f=Math.min(r,Math.round(s.y)+a),m=Math.min(i,Math.round(s.x)+a);for(let e=b;e<f;e++)for(let t=l;t<m;t++){const r=e*i+t,o=h(s.x-t,s.y-e,a);p=u[r]+=o*n,p>c&&(c=p)}}}return{matrix:u.buffer,max:c}}function y(e,t,i,s,o,n){e.canvas.width=e.canvas.height=t,e.clearRect(0,0,t,t);const l=e.getImageData(0,0,t,t);i&&s&&l.data.set(new Uint8ClampedArray(function(e,t,i,s,o){const n=new Uint32Array(e*e),l="buffer"in t?t:new Float64Array(t),a="buffer"in i?new Uint32Array(i.buffer):new Uint32Array(new Uint8Array(i).buffer),u=a.length/(o-s);for(let p=0;p<l.length;p++){const e=l[p],t=Math.floor((e-s)*u);n[p]=a[(0,r.uZ)(t,0,a.length-1)]}return n.buffer}(t,i,s,o,n))),e.putImageData(l,0,0)}function h(e,t,i){const r=Math.sqrt(e**2+t**2)/i;return r>1?0:3/(Math.PI*i**2)*(1-r**2)**2}function b(e,t){return"function"==typeof e?e:e?"string"==typeof t?t=>-1*+t[e]:i=>+i[e]+t:()=>1}},9014:(e,t,i)=>{i.d(t,{a:()=>a,i:()=>n});var r=i(51370),s=i(47492),o=i(40464);function n(e,t){return a(e,null,t)}const l=(0,s.d)({types:o.A});function a(e,t,i){return e?e&&(e.styleName||e.styleUrl)&&"uniqueValue"!==e.type?(i&&i.messages&&i.messages.push(new r.Z("renderer:unsupported","Only UniqueValueRenderer can be referenced from a web style, but found '"+e.type+"'",{definition:e,context:i})),null):l(e,t,i):null}},40464:(e,t,i)=>{i.d(t,{A:()=>c,o:()=>d});var r=i(94931),s=i(78451),o=i(98689),n=i(57823),l=i(32066),a=i(49018),u=i(34999),p=i(79850);const c={key:"type",base:a.Z,typeMap:{heatmap:n.Z,simple:u.Z,"unique-value":p.Z,"class-breaks":r.Z,"dot-density":o.Z,dictionary:s.Z,"pie-chart":l.Z},errorContext:"renderer"},d={key:"type",base:a.Z,typeMap:{simple:u.Z,"unique-value":p.Z,"class-breaks":r.Z,heatmap:n.Z},errorContext:"renderer"}}}]);
//# sourceMappingURL=9014.c152f5cb.chunk.js.map