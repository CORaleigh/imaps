(this.webpackJsonpimaps=this.webpackJsonpimaps||[]).push([[56,5,10,12,13,26,33,34,35,39,70,82,114,134,164,168,273,274,282],Array(80).concat([function(e,t,r){"use strict";var i,n,a,o,s,c=r(91),l=r(158);function u(e){return"function"==typeof a[e]?a[e]=a[e](l.a):a[e]}a=null!=(i=l.a.dojoConfig)&&i.has||null!=(n=l.a.esriConfig)&&n.has?Object(c.a)(Object(c.a)({},null==(o=l.a.dojoConfig)?void 0:o.has),null==(s=l.a.esriConfig)?void 0:s.has):{},u.add=(e,t,r,i)=>((i||void 0===a[e])&&(a[e]=t),r&&u(e)),u.cache=a,u.add("esri-deprecation-warnings",!0),(()=>{u.add("host-webworker",void 0!==l.a.WorkerGlobalScope&&self instanceof l.a.WorkerGlobalScope);var e="undefined"!=typeof window&&"undefined"!=typeof location&&"undefined"!=typeof document&&window.location===location&&window.document===document;if(u.add("host-browser",e),u.add("host-node","object"==typeof l.a.process&&l.a.process.versions&&l.a.process.versions.node&&l.a.process.versions.v8),u.add("dom",e),u("host-browser")){var t=navigator,r=t.userAgent,i=t.appVersion,n=parseFloat(i);if(u.add("wp",parseFloat(r.split("Windows Phone")[1])||void 0),u.add("msapp",parseFloat(r.split("MSAppHost/")[1])||void 0),u.add("khtml",i.indexOf("Konqueror")>=0?n:void 0),u.add("edge",parseFloat(r.split("Edge/")[1])||void 0),u.add("opr",parseFloat(r.split("OPR/")[1])||void 0),u.add("webkit",!u("wp")&&!u("edge")&&parseFloat(r.split("WebKit/")[1])||void 0),u.add("chrome",!u("edge")&&!u("opr")&&parseFloat(r.split("Chrome/")[1])||void 0),u.add("android",!u("wp")&&parseFloat(r.split("Android ")[1])||void 0),u.add("safari",!(i.indexOf("Safari")>=0)||u("wp")||u("chrome")||u("android")||u("edge")||u("opr")?void 0:parseFloat(i.split("Version/")[1])),u.add("mac",i.indexOf("Macintosh")>=0),u.add("quirks","BackCompat"===document.compatMode),!u("wp")&&r.match(/(iPhone|iPod|iPad)/)){var a=RegExp.$1.replace(/P/,"p"),o=r.match(/OS ([\d_]+)/)?RegExp.$1:"1",s=parseFloat(o.replace(/_/,".").replace(/_/g,""));u.add(a,s),u.add("ios",s)}u.add("trident",parseFloat(i.split("Trident/")[1])||void 0),u.add("svg","undefined"!=typeof SVGAngle),u("webkit")||(r.indexOf("Opera")>=0&&u.add("opera",n>=9.8&&parseFloat(r.split("Version/")[1])||n),!(r.indexOf("Gecko")>=0)||u("wp")||u("khtml")||u("trident")||u("edge")||u.add("mozilla",n),u("mozilla")&&u.add("ff",parseFloat(r.split("Firefox/")[1]||r.split("Minefield/")[1])||void 0))}})(),(()=>{if(l.a.navigator){var e=navigator.userAgent,t=e.match(/Android|webOS|iPhone|iPad|iPod|BlackBerry|Opera Mini|IEMobile/i),r=e.match(/iPhone/i);t&&u.add("esri-mobile",t),r&&u.add("esri-iPhone",r),u.add("esri-geolocation",!!navigator.geolocation)}u.add("esri-canvas-svg-support",!u("trident")),u.add("esri-wasm","WebAssembly"in l.a),u.add("esri-shared-array-buffer",(()=>{var e="SharedArrayBuffer"in l.a,t=!1===l.a.crossOriginIsolated;return e&&!t})),u.add("esri-atomics","Atomics"in l.a),u.add("esri-workers","Worker"in l.a),u.add("esri-text-decoder","TextDecoder"in l.a),u.add("esri-text-encoder","TextEncoder"in l.a),u.add("featurelayer-snapshot-enabled",!0),u.add("featurelayer-snapshot-point-min-threshold",8e4),u.add("featurelayer-snapshot-point-max-threshold",4e5),u.add("featurelayer-snapshot-point-coverage",.1),u.add("featurelayer-advanced-symbols",!1),u.add("featurelayer-pbf",!0),u.add("featurelayer-pbf-statistics",!1),u.add("feature-layers-workers",!0),u.add("mapview-transitions-duration",200),u.add("mapserver-pbf-enabled",!1),u("host-webworker")||u("host-browser")&&(u.add("csp-restrictions",(()=>{try{new Function}catch(e){return!0}return!1})),u.add("esri-image-decode",(()=>{if("decode"in new Image){var e=new Image;return e.src='data:image/svg+xml;charset=UTF-8,<svg version="1.1" xmlns="http://www.w3.org/2000/svg"></svg>',void e.decode().then((()=>{u.add("esri-image-decode",!0,!0,!0)})).catch((()=>{u.add("esri-image-decode",!1,!0,!0)}))}return!1})),u.add("esri-url-encodes-apostrophe",(()=>{var e=l.a.document.createElement("a");return e.href="?'",e.href.indexOf("?%27")>-1})),u.add("vectortilelayer-max-buffers",(()=>u("ff")?160:Number.POSITIVE_INFINITY)))})(),t.a=u},function(e,t,r){"use strict";r(80);var i=r(159),n=r(89),a=r(143),o={info:0,warn:1,error:2,none:3};class s{constructor(e){this.level=null,this._module="",this._parent=null,this.writer=null,this._loggedMessages={error:new Map,warn:new Map,info:new Map},null!=e.level&&(this.level=e.level),null!=e.writer&&(this.writer=e.writer),this._module=e.module,s._loggers[this.module]=this;var t=this.module.lastIndexOf(".");-1!==t&&(this._parent=s.getLogger(this.module.slice(0,t)))}get module(){return this._module}get parent(){return this._parent}error(...e){this._log("error","always",...e)}warn(...e){this._log("warn","always",...e)}info(...e){this._log("info","always",...e)}errorOnce(...e){this._log("error","once",...e)}warnOnce(...e){this._log("warn","once",...e)}infoOnce(...e){this._log("info","once",...e)}errorOncePerTick(...e){this._log("error","oncePerTick",...e)}warnOncePerTick(...e){this._log("warn","oncePerTick",...e)}infoOncePerTick(...e){this._log("info","oncePerTick",...e)}get test(){var e=this;return{loggedMessages:e._loggedMessages,clearLoggedWarnings:()=>e._loggedMessages.warn.clear()}}static get testSingleton(){return{resetLoggers(e={}){var t=s._loggers;return s._loggers=e,t},set throttlingDisabled(e){s._throttlingDisabled=e}}}static getLogger(e){var t=s._loggers[e];return t||(t=new s({module:e})),t}_log(e,t,...r){if(this._matchLevel(e)){if("always"!==t&&!s._throttlingDisabled){var n=this._argsToKey(r),a=this._loggedMessages[e].get(n);if("once"===t&&null!=a||"oncePerTick"===t&&a&&a>=s._tickCounter)return;this._loggedMessages[e].set(n,s._tickCounter),s._scheduleTickCounterIncrement()}for(var o of i.a.log.interceptors)if(o(e,this.module,...r))return;this._inheritedWriter()(e,this.module,...r)}}_parentWithMember(e,t){for(var r=this;Object(n.k)(r);){var i=r[e];if(Object(n.k)(i))return i;r=r.parent}return t}_inheritedWriter(){return this._parentWithMember("writer",this._consoleWriter)}_consoleWriter(e,t,...r){console[e]("[".concat(t,"]"),...r)}_matchLevel(e){var t=i.a.log.level?i.a.log.level:"warn";return o[this._parentWithMember("level",t)]<=o[e]}_argsToKey(...e){return Object(a.b)(JSON.stringify(e,((e,t)=>"object"!=typeof t||Array.isArray(t)?t:"[Object]")))}static _scheduleTickCounterIncrement(){s._tickCounterScheduled||(s._tickCounterScheduled=!0,Promise.resolve().then((()=>{s._tickCounter++,s._tickCounterScheduled=!1})))}}s._loggers={},s._tickCounter=0,s._tickCounterScheduled=!1,s._throttlingDisabled=!1,t.a=s},function(e,t,r){"use strict";function i(e,t,r,i){var n,a=arguments.length,o=a<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,i);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(o=(a<3?n(o):a>3?n(t,r,o):n(t,r))||o);return a>3&&o&&Object.defineProperty(t,r,o),o}r.d(t,"a",(function(){return i}))},function(e,t,r){"use strict";r.d(t,"a",(function(){return y})),r.d(t,"b",(function(){return P})),r.d(t,"c",(function(){return I})),r.d(t,"d",(function(){return ue})),r.d(t,"e",(function(){return de})),r.d(t,"f",(function(){return _})),r.d(t,"g",(function(){return O})),r.d(t,"h",(function(){return oe})),r.d(t,"i",(function(){return Y})),r.d(t,"j",(function(){return Z})),r.d(t,"k",(function(){return ne})),r.d(t,"l",(function(){return D})),r.d(t,"m",(function(){return H})),r.d(t,"n",(function(){return he})),r.d(t,"o",(function(){return k})),r.d(t,"p",(function(){return T})),r.d(t,"q",(function(){return L})),r.d(t,"r",(function(){return F})),r.d(t,"s",(function(){return B})),r.d(t,"t",(function(){return W})),r.d(t,"u",(function(){return J})),r.d(t,"v",(function(){return K})),r.d(t,"w",(function(){return ce})),r.d(t,"x",(function(){return N})),r.d(t,"y",(function(){return q})),r.d(t,"z",(function(){return z})),r.d(t,"A",(function(){return Q})),r.d(t,"B",(function(){return G})),r.d(t,"C",(function(){return U})),r.d(t,"D",(function(){return M})),r.d(t,"E",(function(){return x})),r.d(t,"F",(function(){return ie})),r.d(t,"G",(function(){return le})),r.d(t,"H",(function(){return ae})),r.d(t,"I",(function(){return ee})),r.d(t,"J",(function(){return w}));var i=r(91),n=(r(158),r(159)),a=r(89),o=r(81),s=r(93),c=o.a.getLogger("esri.core.urlUtils"),l=n.a.request,u="esri/config: esriConfig.request.proxyUrl is not set.",d=/^\s*[a-z][a-z0-9-+.]*:(?![0-9])/i,h=/^\s*http:/i,p=/^\s*https:/i,f=/^\s*file:/i,b=/:\d+$/,v=/^https?:\/\/[^/]+\.arcgis.com\/sharing(\/|$)/i,m=new RegExp("^(([^:/?#]+):)?(//([^/?#]*))?([^?#]*)(\\?([^#]*))?(#(.*))?$"),g=new RegExp("^((([^\\[:]+):)?([^@]+)@)?(\\[([^\\]]+)\\]|([^\\[:]*))(:([0-9]+))?$");class y{constructor(e=""){this.uri=e,this.scheme=null,this.authority=null,this.path=null,this.query=null,this.fragment=null,this.user=null,this.password=null,this.host=null,this.port=null;var t=Object(a.d)(this.uri.match(m));this.scheme=t[2]||(t[1]?"":null),this.authority=t[4]||(t[3]?"":null),this.path=t[5],this.query=t[7]||(t[6]?"":null),this.fragment=t[9]||(t[8]?"":null),null!=this.authority&&(t=Object(a.d)(this.authority.match(g)),this.user=t[3]||null,this.password=t[4]||null,this.host=t[6]||t[7],this.port=t[9]||null)}toString(){return this.uri}}var O=new y(n.a.applicationUrl),j={},_=(()=>{var e=Object(a.d)(O.path),t=e.substring(0,e.lastIndexOf(e.split("/")[e.split("/").length-1]));return"".concat("".concat(O.scheme,"://").concat(O.host).concat(null!=O.port?":".concat(O.port):""),t)})();function w(e){var t={path:null,query:null},r=new y(e),i=e.indexOf("?");return null===r.query?t.path=e:(t.path=e.substring(0,i),t.query=x(r.query)),r.fragment&&(t.hash=r.fragment,null===r.query&&(t.path=t.path.substring(0,t.path.length-(r.fragment.length+1)))),t}function x(e){var t=e.split("&"),r={};for(var i of t)if(i){var n=i.indexOf("="),a=void 0,o=void 0;n<0?(a=decodeURIComponent(i),o=""):(a=decodeURIComponent(i.slice(0,n)),o=decodeURIComponent(i.slice(n+1)));var s=r[a];"string"==typeof s&&(s=r[a]=[s]),Array.isArray(s)?s.push(o):r[a]=o}return r}function S(e){return e&&"object"==typeof e&&"toJSON"in e&&"function"==typeof e.toJSON}function M(e,t){return e?t&&"function"==typeof t?Object.keys(e).map((r=>encodeURIComponent(r)+"="+encodeURIComponent(t(r,e[r])))).join("&"):Object.keys(e).map((r=>{var i=e[r];if(null==i)return"";var n=encodeURIComponent(r)+"=",a=t&&t[r];return a?n+encodeURIComponent(a(i)):Array.isArray(i)?i.map((e=>S(e)?n+encodeURIComponent(JSON.stringify(e)):n+encodeURIComponent(e))).join("&"):S(i)?n+encodeURIComponent(JSON.stringify(i)):n+encodeURIComponent(i)})).filter((e=>e)).join("&"):""}function T(e=!1){var t,r=l.proxyUrl;if("string"==typeof e){t=function(e){return p.test(e)||"https"===O.scheme&&K(e)}(e);var i=k(e);i&&(r=i.proxyUrl)}else t=!!e;if(!r)throw c.warn(u),new s.a("urlutils:proxy-not-set",u);return t&&te()&&(r=ee(r)),w(r)}function P(e){var t,r,n=k(e);if(n){var a=C(n.proxyUrl);t=a.path,r=a.query?x(a.query):null}if(t){var o=w(e);e=t+"?"+o.path;var s=M(Object(i.a)(Object(i.a)({},r),o.query));s&&(e="".concat(e,"?").concat(s))}return e}var E={path:"",query:""};function C(e){var t=e.indexOf("?");return-1!==t?(E.path=e.slice(0,t),E.query=e.slice(t+1)):(E.path=e,E.query=null),E}function A(e){return(e=re(e=function(e){return e&&"/"===e[e.length-1]?e:"".concat(e,"/")}(e=C(e).path),!0)).toLowerCase()}function I(e){for(var t={proxyUrl:e.proxyUrl,urlPrefix:A(e.urlPrefix)},r=l.proxyRules,i=t.urlPrefix,n=r.length,a=0;a<r.length;a++){var o=r[a].urlPrefix;if(0===i.indexOf(o)){if(i.length===o.length)return-1;n=a;break}0===o.indexOf(i)&&(n=a+1)}return r.splice(n,0,t),n}function k(e){for(var t=l.proxyRules,r=A(e),i=0;i<t.length;i++)if(0===r.indexOf(t[i].urlPrefix))return t[i]}function F(e,t){return e=R(e),t=R(t),re(e)===re(t)}function R(e){var t=(e=U(e)).indexOf("/sharing");return t>0?e.substring(0,t):e.replace(/\/+$/,"")}function D(e){var t=t=>null==t||t instanceof RegExp&&t.test(e)||"string"==typeof t&&e.startsWith(t),r=l.interceptors;if(r)for(var i of r)if(Array.isArray(i.urls)){if(i.urls.some(t))return i}else if(t(i.urls))return i;return null}function L(e,t,r=!1){var i=se(e),n=se(t);return!(!r&&i.scheme!==n.scheme)&&null!=i.host&&null!=n.host&&i.host.toLowerCase()===n.host.toLowerCase()&&i.port===n.port}function N(e){if("string"==typeof e){if(!B(e))return!0;e=se(e)}if(L(e,O))return!0;for(var t=l.trustedServers||[],r=0;r<t.length;r++)for(var i=V(t[r]),n=0;n<i.length;n++)if(L(e,i[n]))return!0;return!1}function V(e){return j[e]||($(e)||K(e)?j[e]=[new y(z(e))]:j[e]=[new y("http://".concat(e)),new y("https://".concat(e))]),j[e]}function z(e,t=_,r){return K(e)?r&&r.preserveProtocolRelative?e:"http"===O.scheme&&O.authority===H(e).slice(2)?"http:".concat(e):"https:".concat(e):$(e)?e:Object(a.d)(q("/"===e[0]?function(e){var t=e.indexOf("//"),r=e.indexOf("/",t+2);return-1===r?e:e.slice(0,r)}(t):t,e))}function G(e,t=_,r){if(!B(e))return e;var i=U(e),n=i.toLowerCase(),a=U(t).toLowerCase().replace(/\/+$/,""),o=r?U(r).toLowerCase().replace(/\/+$/,""):null;if(o&&0!==a.indexOf(o))return e;for(var s=(e,t,r)=>-1===(r=e.indexOf(t,r))?e.length:r,c=s(n,"/",n.indexOf("//")+2),l=-1;n.slice(0,c+1)===a.slice(0,c)+"/"&&(l=c+1,c!==n.length);)c=s(n,"/",c+1);if(-1===l)return e;if(o&&l<o.length)return e;e=i.slice(l);var u=a.slice(l-1).replace(/[^/]+/g,"").length;if(u>0)for(var d=0;d<u;d++)e="../".concat(e);else e="./".concat(e);return e}function U(e){return function(e){var t=l.httpsDomains;if(!function(e){return h.test(e)||"http"===O.scheme&&K(e)}(e))return e;var r,i=e.indexOf("/",7);if(r=(r=-1===i?e:e.slice(0,i)).toLowerCase().slice(7),b.test(r)){if(!r.endsWith(":80"))return e;r=r.slice(0,-3),e=e.replace(":80","")}return"http"===O.scheme&&r===O.authority&&!v.test(e)||(te()&&r===O.authority||t&&t.some((e=>r===e||r.endsWith(".".concat(e))))||te()&&!k(e))&&(e=ee(e)),e}(e=function(e){return e.replace(/^(https?:\/\/)(arcgis\.com)/i,"$1www.$2")}(e=function(e){if(/^https?:\/\//i.test(e)){var t=C(e);e=(e=t.path.replace(/\/{2,}/g,"/")).replace("/","//"),t.query&&(e+="?".concat(t.query))}return e}(e=z(e=e.trim()))))}function q(...e){var t=e.filter(a.k);if(t&&t.length){var r=[];if(B(t[0])){var i=t[0],n=i.indexOf("//");-1!==n&&(r.push(i.slice(0,n+1)),function(e){return f.test(e)}(t[0])&&(r[0]+="/"),t[0]=i.slice(n+2))}else"/"===t[0][0]&&r.push("");for(var o=t.reduce(((e,t)=>t?e.concat(t.split("/")):e),[]),s=0;s<o.length;s++){var c=o[s];".."===c&&r.length>0&&".."!==r[r.length-1]?r.pop():(!c&&s===o.length-1||c&&("."!==c||0===r.length))&&r.push(c)}return r.join("/")}}function H(e,t=!1){if(W(e)||J(e))return null;var r=e.indexOf("://");if(-1===r&&K(e))r=2;else{if(-1===r)return null;r+=3}var i=e.indexOf("/",r);return-1!==i&&(e=e.slice(0,i)),t&&(e=re(e,!0)),e}function B(e){return K(e)||$(e)}function W(e){return null!=e&&"blob:"===e.slice(0,5)}function J(e){return"data:"===e.slice(0,5)}function Z(e){var t=Y(e);if(!t||!t.isBase64)return null;for(var r=atob(t.data),i=new Uint8Array(r.length),n=0;n<r.length;n++)i[n]=r.charCodeAt(n);return i.buffer}var X=/^data:(.*?)(;base64)?,(.*)$/;function Y(e){var t=e.match(X);if(!t)return null;var[,r,i,n]=t;return{mediaType:r,isBase64:!!i,data:n}}function Q(e){return e.isBase64?"data:".concat(e.mediaType,";base64,").concat(e.data):"data:".concat(e.mediaType,",").concat(e.data)}function K(e){return null!=e&&void 0!==e&&"/"===e[0]&&"/"===e[1]}function $(e){return d.test(e)}function ee(e){return K(e)?"https:".concat(e):e.replace(h,"https:")}function te(){return"https"===O.scheme}function re(e,t=!1){return K(e)?e.slice(2):(e=e.replace(d,""),t&&e.length>1&&"/"===e[0]&&"/"===e[1]&&(e=e.slice(2)),e)}function ie(e){var t=0;if(B(e)){var r=e.indexOf("//");-1!==r&&(t=r+2)}var i=e.lastIndexOf("/");return i<t?e:e.slice(0,i+1)}function ne(e,t){if(!e)return"";var r=w(e).path.replace(/\/+$/,""),i=r.substring(r.lastIndexOf("/")+1);if(null==t||!t.length)return i;var n=new RegExp(".(".concat(t.join("|"),")$"),"ig");return i.replace(n,"")}function ae(e){return e.replace(/\/+$/,"")}function oe(e,t,r){if(!(t&&r&&e&&B(e)))return e;var i=e.indexOf("//"),n=e.indexOf("/",i+2),a=e.indexOf(":",i+2),o=Math.min(n<0?e.length:n,a<0?e.length:a);return e.slice(i+2,o).toLowerCase()!==t.toLowerCase()?e:"".concat(e.slice(0,i+2)).concat(r).concat(e.slice(o))}function se(e){return"string"==typeof e?new y(z(e)):(e.scheme||(e.scheme=O.scheme),e)}function ce(e){return fe.test(e)}function le(e,t){var r=w(e),i=Object.keys(r.query||{});return i.length>0&&t&&t.warn("removeQueryParameters()","Url query parameters are not supported, the following parameters have been removed: ".concat(i.join(", "),".")),r.path}function ue(e,t,r){var i=w(e),n=i.query||{};return n[t]=String(r),"".concat(i.path,"?").concat(M(n))}function de(e,t){var r=w(e),i=r.query||{};for(var n in t)i[n]=t[n];var a=M(i);return a?"".concat(r.path,"?").concat(a):r.path}function he(e){if(Object(a.j)(e))return null;var t=e.match(pe);return t?t[1]:null}var pe=/.*?\.([^\/]*)$/,fe=/(^data:image\/svg|\.svg$)/i},function(e,t,r){"use strict";r.d(t,"a",(function(){return s}));r(80);var i=r(294),n=[r(402).a];var a=new Set,o=new Set;function s(e){return t=>{t.prototype.declaredClass=e,function(e,t){for(var r of n)if(r.processPrototypePropertyMetadata)for(var i in e){var a=e[i];r.processPrototypePropertyMetadata(i,a,e,t)}}(Object(i.a)(t.prototype).properties,e),function(e){var t=e.prototype,r=t.declaredClass,a=Object(i.a)(t).properties;!function(e,t){for(var r of n)if(r.processClassPropertyMetadata)for(var i in e){var a=e[i];r.processClassPropertyMetadata(i,a,e,t)}}(a,r);var o={},s=function(e){var t=a[e];o[e]={enumerable:!0,configurable:!0,get:c(e,t),set(r){var i=this.__accessor__;if(void 0!==i){if(!Object.isFrozen(this)){if(i.initialized&&t.readOnly)throw new TypeError("[accessor] cannot assign to read-only property '".concat(e,"' of ").concat(this.declaredClass));if(2===i.lifecycle&&t.constructOnly)throw new TypeError("[accessor] cannot assign to construct-only property '".concat(e,"' of ").concat(this.declaredClass));i.set(e,r)}}else Object.defineProperty(this,e,{enumerable:!0,configurable:!0,writable:!0,value:r})}}};for(var l of Object.getOwnPropertyNames(a))s(l);Object.defineProperties(e.prototype,o)}(t);for(var r=[],s=[],l=t.prototype;l;)l.hasOwnProperty("initialize")&&!a.has(l.initialize)&&(a.add(l.initialize),r.push(l.initialize)),l.hasOwnProperty("destroy")&&!o.has(l.destroy)&&(o.add(l.destroy),s.push(l.destroy)),l=Object.getPrototypeOf(l);a.clear(),o.clear();class u extends t{constructor(...e){if(super(...e),this.constructor===u&&"function"==typeof this.postscript){if(r.length&&Object.defineProperty(this,"initialize",{enumerable:!1,configurable:!0,value(){for(var e=r.length-1;e>=0;e--)r[e].call(this)}}),s.length){var t=!1;Object.defineProperty(this,"destroy",{enumerable:!1,configurable:!0,value(){if(!t){t=!0;for(var e=0;e<s.length;e++)s[e].call(this)}}})}this.postscript(...e)}}}return u.__accessorMetadata__=Object(i.a)(t.prototype),u.prototype.declaredClass=e,u}}function c(e,t){return null==t.get?function(){return this.__accessor__.getterStatic(e)}:function(){return this.__accessor__.getterComputed(e)}}},function(e,t,r){"use strict";r.d(t,"a",(function(){return d})),r.d(t,"b",(function(){return l})),r.d(t,"c",(function(){return u}));var i=r(81),n=r(88),a=r(240),o=r(294),s=r(476),c=i.a.getLogger("esri.core.accessorSupport.decorators.property");function l(e={}){return(t,r,i)=>{if(t===Function.prototype)throw new Error("Inappropriate use of @property() on a static field: ".concat(t.name,".").concat(r,". Accessor does not support static properties."));var l=Object(o.b)(t,r);i&&(i.get||i.set?(l.get=i.get||l.get,l.set=i.set||l.set):"value"in i&&("value"in e&&c.warn('@property() will redefine the value of "'.concat(r,'" on "').concat(t.constructor.name,'" already defined in the metadata'),e),l.value=e.value=i.value)),null!=e.readOnly&&(l.readOnly=e.readOnly);var u=e.aliasOf;if(u){var h,p="string"==typeof u?u:u.source,f="string"==typeof u?null:!0===u.overridable;l.dependsOn=[p],l.get=function(){var e=Object(a.b)(this,p);if("function"==typeof e){h||(h=p.split(".").slice(0,-1).join("."));var t=Object(a.b)(this,h);t&&(e=e.bind(t))}return e},l.readOnly||(l.set=f?function(e){void 0!==e?this._override(r,e):this._clearOverride(r)}:function(e){Object(s.a)(this,p,e)})}var b=e.type,v=e.types;l.cast||(b?l.cast=function(e){var t=0,r=e;if(Object(n.n)(e))return Object(n.f)(e);for(;Array.isArray(r)&&1===r.length&&"string"!=typeof r[0]&&"number"!=typeof r[0];)r=r[0],t++;var i=r;if(Object(n.o)(i))return 0===t?Object(n.j)(i):Object(n.h)(Object(n.j)(i),t);if(1===t)return Object(n.b)(i);if(t>1)return Object(n.g)(i,t);var a=e;return a.from?a.from:Object(n.m)(a)}(b):v&&(Array.isArray(v)?l.cast=Object(n.c)(Object(n.k)(v[0])):l.cast=Object(n.k)(v))),e.range&&(l.cast=d(l.cast,e.range)),Object(o.c)(l,e)}}function u(e,t,r){var i=Object(o.b)(e,r);i.json||(i.json={});var n=i.json;return void 0!==t&&(n.origins||(n.origins={}),n.origins[t]||(n.origins[t]={}),n=n.origins[t]),n}function d(e,t){return r=>{var i=+e(r);return null!=t.step&&(i=Math.round(i/t.step)*t.step),null!=t.min&&(i=Math.max(t.min,i)),null!=t.max&&(i=Math.min(t.max,i)),i}}},function(e,t,r){"use strict";r.d(t,"a",(function(){return n}));var i=r(158);function n(){var e=a.getRandomValues(new Uint16Array(8));e[3]=4095&e[3]|16384,e[4]=16383&e[4]|32768;var t=t=>e[t].toString(16);return t(0)+t(1)+"-"+t(2)+"-"+t(3)+"-"+t(4)+"-"+t(5)+t(6)+t(7)}var a=i.a.crypto||i.a.msCrypto},function(e,t,r){"use strict";r.d(t,"a",(function(){return n}));var i=r(83);function n(e){return a[function(e){return e instanceof Blob?e.type:function(e){var t=Object(i.n)(e);return c[t]||o}(e.url)}(e)]||s}var a={},o="text/plain",s=a[o],c={png:"image/png",jpeg:"image/jpeg",jpg:"image/jpg",bmp:"image/bmp",gif:"image/gif",json:"application/json",txt:"text/plain",xml:"application/xml",svg:"image/svg+xml",zip:"application/zip",pbf:"application/vnd.mapbox-vector-tile",gz:"application/gzip"};for(var l in c)a[c[l]]=l},function(e,t,r){"use strict";r.d(t,"a",(function(){return M})),r.d(t,"b",(function(){return y})),r.d(t,"c",(function(){return g})),r.d(t,"d",(function(){return f})),r.d(t,"e",(function(){return c})),r.d(t,"f",(function(){return E})),r.d(t,"g",(function(){return _})),r.d(t,"h",(function(){return j})),r.d(t,"i",(function(){return s})),r.d(t,"j",(function(){return x})),r.d(t,"k",(function(){return S})),r.d(t,"l",(function(){return o})),r.d(t,"m",(function(){return m})),r.d(t,"n",(function(){return P})),r.d(t,"o",(function(){return w})),r.d(t,"p",(function(){return T}));r(80);var i=r(81).a.getLogger("esri.core.Accessor");function n(e){return null==e?e:new Date(e)}function a(e){return null==e?e:!!e}function o(e){return null==e?e:e.toString()}function s(e){return null==e?e:(e=parseFloat(e),isNaN(e)?0:e)}function c(e){return null==e?e:Math.round(parseFloat(e))}function l(e){return e&&e.constructor&&void 0!==e.constructor.__accessorMetadata__}function u(e,t){return null!=t&&e&&!(t instanceof e)}function d(e){return e&&"isCollection"in e}function h(e){return e&&e.Type?"function"==typeof e.Type?e.Type:e.Type.base:null}function p(e,t){return!!l(t)&&(i.error("Accessor#set","Assigning an instance of '"+(t.declaredClass||"unknown")+"' which is not a subclass of '"+b(e)+"'"),!0)}function f(e,t){return null==t?t:d(e)?function(e,t){if(!t||!t.constructor||!d(t.constructor))return p(e,t)?t:new e(t);var r=h(e.prototype.itemType),i=h(t.constructor.prototype.itemType);return r?i?r===i?t:r.prototype.isPrototypeOf(i.prototype)?new e(t):(p(e,t),t):new e(t):t}(e,t):u(e,t)?p(e,t)?t:new e(t):t}function b(e){return e&&e.prototype&&e.prototype.declaredClass||"unknown"}function v(e){switch(e){case Number:return s;case M:return c;case Boolean:return a;case String:return o;case Date:return n;default:return f.bind(null,e)}}function m(e,t){var r=v(e);return 1===arguments.length?r:r(t)}function g(e,t,r){return 1===arguments.length?g.bind(null,e):t?Array.isArray(t)?t.map((t=>e(t,r))):[e(t,r)]:t}function y(e,t){return 1===arguments.length?g(m.bind(null,e)):g(m.bind(null,e),t)}function O(e,t,r){return 0!==t&&Array.isArray(r)?r.map((r=>O(e,t-1,r))):e(r)}function j(e,t,r){if(2===arguments.length)return j.bind(null,e,t);if(!r)return r;for(var i=t,n=r=O(e,t,r);i>0&&Array.isArray(n);)i--,n=n[0];if(void 0!==n)for(var a=0;a<i;a++)r=[r];return r}function _(e,t,r){return 2===arguments.length?j(m.bind(null,e),t):j(m.bind(null,e),t,r)}function w(e){return!!Array.isArray(e)&&!e.some((t=>{var r=typeof t;return!("string"===r||"number"===r||"function"===r&&e.length>1)}))}function x(e,t){if(2===arguments.length)return x(e).call(null,t);var r=new Set,n=e.filter((e=>"function"!=typeof e)),a=e.filter((e=>"function"==typeof e));for(var o of e)"string"!=typeof o&&"number"!=typeof o||r.add(o);var s=null,c=null;return(e,t)=>{if(null==e)return e;var o=typeof e,l="string"===o||"number"===o;return l&&(r.has(e)||a.some((e=>"string"===o&&e===String||"number"===o&&e===Number)))||"object"===o&&a.some((t=>!u(e,t)))?e:(l&&n.length?(s||(s=n.map((e=>"string"==typeof e?"'".concat(e,"'"):"".concat(e))).join(", ")),i.error("Accessor#set","'".concat(e,"' is not a valid value for this property, only the following values are valid: ").concat(s))):"object"==typeof e&&a.length?(c||(c=a.map((e=>b(e))).join(", ")),i.error("Accessor#set","'".concat(e,"' is not a valid value for this property, value must be one of ").concat(c))):i.error("Accessor#set","'".concat(e,"' is not a valid value for this property")),t&&(t.valid=!1),null)}}function S(e,t){if(2===arguments.length)return S(e).call(null,t);var r={},n=[],a=[];for(var o in e.typeMap){var s=e.typeMap[o];r[o]=m(s),n.push(b(s)),a.push(o)}var c=()=>"'".concat(n.join("', '"),"'"),d=()=>"'".concat(a.join("', '"),"'"),h="string"==typeof e.key?t=>t[e.key]:e.key;return t=>{if(e.base&&!u(e.base,t))return t;if(null==t)return t;var n=h(t)||e.defaultKeyValue,a=r[n];if(!a)return i.error("Accessor#set","Invalid property value, value needs to be one of ".concat(c(),", or a plain object that can autocast (having .type = ").concat(d(),")")),null;if(!u(e.typeMap[n],t))return t;if("string"==typeof e.key&&!l(t)){var o={};for(var s in t)s!==e.key&&(o[s]=t[s]);return a(o)}return a(t)}}class M{}var T={native:e=>({type:"native",value:e}),array:e=>({type:"array",value:e}),oneOf:e=>({type:"one-of",values:e})};function P(e){if(!e||!("type"in e))return!1;switch(e.type){case"native":case"array":case"one-of":return!0}return!1}function E(e){switch(e.type){case"native":return m(e.value);case"array":return g(E(e.value));case"one-of":return function(e){var t=null;return(r,n)=>A(r,e)?r:(null==t&&(t=C(e)),i.error("Accessor#set","Invalid property value, value needs to be of type ".concat(t)),n&&(n.valid=!1),null)}(e);default:return null}}function C(e){switch(e.type){case"native":switch(e.value){case Number:return"number";case String:return"string";case Boolean:return"boolean";case M:return"integer";case Date:return"date";default:return b(e.value)}case"array":return"array of ".concat(C(e.value));case"one-of":var t=e.values.map((e=>C(e)));return"one of ".concat(t.slice(0,t.length-1)," or ").concat(t[t.length-1])}return"unknown"}function A(e,t){if(null==e)return!0;switch(t.type){case"native":switch(t.value){case Number:case M:return"number"==typeof e;case Boolean:return"boolean"==typeof e;case String:return"string"==typeof e}return e instanceof t.value;case"array":return!!Array.isArray(e)&&!e.some((e=>!A(e,t.value)));case"one-of":return t.values.some((t=>A(e,t)))}}},function(e,t,r){"use strict";r.d(t,"a",(function(){return p})),r.d(t,"b",(function(){return g})),r.d(t,"c",(function(){return o})),r.d(t,"d",(function(){return j})),r.d(t,"e",(function(){return u})),r.d(t,"f",(function(){return d})),r.d(t,"g",(function(){return y})),r.d(t,"h",(function(){return v})),r.d(t,"i",(function(){return O})),r.d(t,"j",(function(){return n})),r.d(t,"k",(function(){return i})),r.d(t,"l",(function(){return a})),r.d(t,"m",(function(){return b})),r.d(t,"n",(function(){return m})),r.d(t,"o",(function(){return f})),r.d(t,"p",(function(){return h})),r.d(t,"q",(function(){return s})),r.d(t,"r",(function(){return l})),r.d(t,"s",(function(){return c}));function i(e){return null!=e}function n(e){return null==e}function a(e){return void 0===e}function o(e,t){return i(e)?t(e):null}function s(e){return e}function c(e,t){if(n(e))throw new Error(t);return e}function l(e,t){return i(e)?e:"function"==typeof t?t():t}function u(e){return i(e)&&e.destroy(),null}function d(e){return i(e)&&e.dispose(),null}function h(e){return i(e)&&e.remove(),null}function p(e){return i(e)&&e.abort(),null}function f(e){return null}function b(e,t){var r=new Array;for(var i of e)r.push(m(i,null,t));return r}function v(e,t){for(var r of e)m(r,null,t)}function m(e,t,r){return i(e)?r(e):t}function g(e,t){return i(e)?t(e):null}function y(e){return e.filter((e=>i(e)))}function O(e,...t){for(var r=e,i=0;i<t.length&&r;)r=r[t[i++]];return r}function j(e){return e}},function(e,t,r){"use strict";r.d(t,"a",(function(){return u})),r.d(t,"b",(function(){return c}));var i=r(82),n=r(84),a=r(97),o=r(253),s=r(228),c=e=>{var t=class extends e{constructor(...e){super(...e)}read(e,t){Object(o.a)(this,e,t)}write(e={},t){return Object(s.b)(this,e,t)}toJSON(e){return this.write({},e)}static fromJSON(e,t){return l.call(this,e,t)}};return(t=Object(i.a)([Object(n.a)("esri.core.JSONSupport")],t)).prototype.toJSON.isDefaultToJSON=!0,t};function l(e,t){if(!e)return null;if(e.declaredClass)throw new Error("JSON object is already hydrated");var r=new this;return r.read(e,t),r}var u=class extends(c(a.a)){};u=Object(i.a)([Object(n.a)("esri.core.JSONSupport")],u)},,function(e,t,r){"use strict";r.d(t,"a",(function(){return a})),r.d(t,"b",(function(){return o})),r.d(t,"c",(function(){return n}));r(80);var i=r(295);function n(e,t){var r;if(t)for(r in e)e.hasOwnProperty(r)&&(void 0===e[r]?delete e[r]:e[r]instanceof Object&&n(e[r],!0));else for(r in e)e.hasOwnProperty(r)&&void 0===e[r]&&delete e[r];return e}function a(e){if(!e||"object"!=typeof e||"function"==typeof e)return e;if(Object(i.h)(e)||Object(i.k)(e)||Object(i.l)(e)||Object(i.f)(e)||Object(i.i)(e)||Object(i.g)(e)||Object(i.j)(e)||Object(i.d)(e)||Object(i.e)(e))return Object(i.m)(e);if(e instanceof Date)return new Date(e.getTime());if(e instanceof ArrayBuffer)return e.slice(0,e.byteLength);if(e instanceof Map){var t=new Map;return e.forEach(((e,r)=>{t.set(r,a(e))})),t}if(e instanceof Set){var r=new Set;return e.forEach((e=>{r.add(a(e))})),r}var n,o=e;if("function"==typeof o.clone)n=o.clone();else if("function"==typeof o.map&&"function"==typeof o.forEach)n=o.map(a);else if("function"==typeof o.notifyChange&&"function"==typeof o.watch)n=o.clone();else for(var s of(n={},Object.getOwnPropertyNames(e)))n[s]=a(e[s]);return n}function o(e,t){return e===t||"number"==typeof e&&isNaN(e)&&"number"==typeof t&&isNaN(t)||"function"==typeof(e||{}).getTime&&"function"==typeof(t||{}).getTime&&e.getTime()===t.getTime()||!1}},function(e,t,r){"use strict";var i=r(92),n=r(81),a=r(409);class o extends a.a{constructor(e,t,r){if(super(e,t,r),!(this instanceof o))return new o(e,t,r)}toJSON(){if(null!=this.details)try{return{name:this.name,message:this.message,details:JSON.parse(JSON.stringify(this.details,((e,t)=>{if(t&&"object"==typeof t&&"function"==typeof t.toJSON)return t;try{return Object(i.a)(t)}catch(o){return"[object]"}})))}}catch(e){throw n.a.getLogger("esri.core.Error").error(e),e}return{name:this.name,message:this.message,details:this.details}}static fromJSON(e){return new o(e.name,e.message,e.details)}}o.prototype.type="error",t.a=o},function(e,t,r){"use strict";r.d(t,"a",(function(){return M})),r.d(t,"b",(function(){return s})),r.d(t,"c",(function(){return c})),r.d(t,"d",(function(){return u})),r.d(t,"e",(function(){return l})),r.d(t,"f",(function(){return j})),r.d(t,"g",(function(){return C})),r.d(t,"h",(function(){return A})),r.d(t,"i",(function(){return E})),r.d(t,"j",(function(){return _})),r.d(t,"k",(function(){return w})),r.d(t,"l",(function(){return O})),r.d(t,"m",(function(){return y})),r.d(t,"n",(function(){return p})),r.d(t,"o",(function(){return T})),r.d(t,"p",(function(){return v})),r.d(t,"q",(function(){return m})),r.d(t,"r",(function(){return x})),r.d(t,"s",(function(){return S})),r.d(t,"t",(function(){return f})),r.d(t,"u",(function(){return d})),r.d(t,"v",(function(){return b})),r.d(t,"w",(function(){return P})),r.d(t,"x",(function(){return g}));var i=r(89),n=(r(81),r(93)),a=r(455),o=r(165);function s(e){return Promise.all(e)}function c(e){return new Promise(((t,r)=>{try{e(t,r)}catch(i){Promise.resolve().then((()=>r(i)))}}))}function l(e="Aborted"){return new n.a("AbortError",e)}function u(){return new AbortController}function d(e){if(p(e))throw l()}function h(e){return Object(i.k)(e)?"aborted"in e?e:e.signal:e}function p(e){var t=h(e);return Object(i.k)(t)&&t.aborted}function f(e){if(y(e))throw e}function b(e){if(!y(e))throw e}function v(e,t){var r=h(e);if(!Object(i.j)(r)){if(!r.aborted)return Object(o.d)(r,"abort",(()=>t()));t()}}function m(e,t){var r=h(e);if(!Object(i.j)(r))return d(r),Object(o.d)(r,"abort",(()=>t(l())))}function g(e,t){var r=h(t);return Object(i.j)(r)?e:new Promise(((r,n)=>{var a=v(t,(()=>n(l()))),o=()=>a=Object(i.p)(a);e.then(o,o),e.then(r,n)}))}function y(e){return e&&"AbortError"===e.name}function O(e){return e.catch((e=>{if(!y(e))throw e}))}function j(){var e=null,t=new Promise(((t,r)=>{e={promise:void 0,resolve:t,reject:r}}));return e.promise=t,e}function _(e){if(e){if("function"!=typeof e.forEach){var t=Object.keys(e);return _(t.map((t=>e[t]))).then((e=>{var r={};return t.forEach(((t,i)=>r[t]=e[i])),r}))}var r=e;return c((e=>{var t=[],i=r.length;0===i&&e(t),r.forEach((r=>{var n={promise:r||Promise.resolve(r)};t.push(n),n.promise.then((e=>{n.value=e})).catch((e=>{n.error=e})).then((()=>{0===--i&&e(t)}))}))}))}}function w(e){return _(e).then((e=>e.filter((e=>!!e.value)).map((e=>e.value))))}function x(e){return Promise.reject(e)}function S(e){return Promise.resolve(e)}function M(e,t,r){var i=u();return v(r,(()=>i.abort())),new Promise(((r,n)=>{var a=setTimeout((()=>{a=0,r(t)}),e);v(i,(()=>{a&&(clearTimeout(a),n(l()))}))}))}function T(e){return e&&"function"==typeof e.then}function P(e){return e&&"object"==typeof e&&"then"in e&&"function"==typeof e.then?e:Promise.resolve(e)}function E(e,t=-1){var r,n,a,o,s=null,c=(...d)=>{if(r){n=d,o&&o.reject(l()),o=j();var h=Object(i.d)(o.promise);if(s){var p=s;s=null,p.abort()}return h}if(a=o||j(),o=null,t>0){var f=u(),b=r=P(e(...d,f.signal));M(t).then((()=>{r===b&&(o?f.abort():s=f)}))}else r=1,r=P(e(...d));var v=()=>{var e=n;n=a=r=s=null,null!=e&&c(...e)},m=r,g=a;return m.then(v,v),m.then(g.resolve,g.reject),Object(i.d)(g.promise)};return c}function C(){var e,t,r=new Promise(((r,i)=>{e=r,t=i})),i=t=>{e(t)};return i.resolve=t=>e(t),i.reject=e=>t(e),i.timeout=(e,t)=>a.a.setTimeout((()=>i.reject(t)),e),i.promise=r,i}function A(e){var t=u(),r=e(t.signal),i={promise:r,finished:!1,abort:()=>{t&&(t.abort(),t=null)}},n=()=>{i&&(i.finished=!0,i=null),t=null};return r.then(n,n),i}},function(e,t,r){"use strict";r.d(t,"a",(function(){return i})),r.d(t,"b",(function(){return n}));class i{constructor(e,t={ignoreUnknown:!1}){this.jsonToAPI=e,this.options=t,this.apiValues=[],this.jsonValues=[],this.apiToJSON=this.invertMap(e),this.apiValues=this.getKeysSorted(this.apiToJSON),this.jsonValues=this.getKeysSorted(this.jsonToAPI),this.read=e=>this.fromJSON(e),this.write=(e,t,r)=>{var i=this.toJSON(e);void 0!==i&&(t[r]=i)},this.write.isJSONMapWriter=!0}toJSON(e){return this.apiToJSON.hasOwnProperty(e)?this.apiToJSON[e]:this.options.ignoreUnknown?void 0:e}fromJSON(e){return this.jsonToAPI.hasOwnProperty(e)?this.jsonToAPI[e]:this.options.ignoreUnknown?void 0:e}invertMap(e){var t={};for(var r in e)t[e[r]]=r;return t}getKeysSorted(e){var t=[];for(var r in e)t.push(r);return t.sort(),t}}function n(){return function(e){return new i(e,{ignoreUnknown:!0})}}},function(e,t,r){"use strict";r.d(t,"a",(function(){return a}));var i=r(124),n=r(85);function a(e,t,r){var a,o;return void 0===t?(o=e,a=[void 0]):"string"!=typeof t?(o=e,a=[void 0],r=t):(o=t,a=Array.isArray(e)?e:[e]),(e,t)=>{var s=e.constructor.prototype;a.forEach((a=>{var c=Object(n.c)(e,a,o);c.write&&"object"!=typeof c.write&&(c.write={}),r&&Object(i.c)("write.target",r,c),Object(i.c)("write.writer",s[t],c)}))}}},function(e,t,r){"use strict";var i=r(81),n=r(240),a=r(294),o=r(476),s=r(85),c=r(288),l=r(84),u=(r(80),r(92)),d=r(126),h=r(144),p=r(221),f=r(477),b=!1;function v(e){return void 0!==e.flags}class m{constructor(e,t,r){this.host=e,this.propertyName=t,this.metadata=r,this.flags=1,this._observers=null,this._accessed=null,this._handles=[],this.flags=1|(r.nonNullable?8:0)|(r.hasOwnProperty("value")?16:0)|(void 0===r.get?32:0)|(void 0===r.dependsOn?64:0)}destroy(){this._accessed&&(this._accessed.clear(),this._accessed=null),this._observers&&(this._observers.clear(),this._observers=null),this._clearObservationHandles()}onObservableAccessed(e){e!==this&&(null===this._accessed&&(this._accessed=new Set),this._accessed.add(e))}onTrackingEnd(){this._clearObservationHandles(),this.flags|=32;var e=this._accessed;if(null!==e){var t=this._handles;for(var r of e)t.push(r.observe(this));e.clear()}}observe(e){return null===this._observers&&(this._observers=new Set),new f.a(this._observers.add(e),e)}notify(){2&~this.flags&&(this.flags|=1),this._notifyObservers()}invalidate(){this.notify()}commit(){this.flags&=-2,this._notifyObservers()}_notifyObservers(){if(null!==this._observers){var e=this._observers.size,t=new Array(e),r=e-1;for(var i of this._observers)t[r--]=i;for(var n=!b;t.length;){var a=t.pop();if(v(a)){if(2&~a.flags&&(a.flags|=1),null===a._observers)continue;for(var o of a._observers)t.push(o)}else n&&a.notify()}}}_clearObservationHandles(){for(var e of this._handles)e.remove();this._handles.length=0}}class g{constructor(){this._values=new Map}clone(e){var t=new g;return this._values.forEach(((r,i)=>{e&&e.has(i)||t.set(i,Object(u.a)(r))})),t}get(e){return this._values.get(e)}originOf(){return 6}keys(){return[...this._values.keys()]}set(e,t){this._values.set(e,t)}delete(e){this._values.delete(e)}has(e){return this._values.has(e)}forEach(e){this._values.forEach(e)}}var y=r(329);function O(e,t,r){return void 0!==e}function j(e,t,r,i){return void 0!==e&&(!(null==r&&8&e.flags)||(i.lifecycle,!1))}i.a.getLogger("esri.core.accessorSupport.Properties");var _=new p.a(class{constructor(){this.value=null,this.valid=!0}acquire(){this.valid=!0}release(){this.value=null}}),w=class{constructor(e){this.host=e,this.properties=new Map,this.ctorArgs=null,this.destroyed=!1,this.lifecycle=0,this.store=new g,this._origin=6;var t=this.host.constructor.__accessorMetadata__,r=t.properties;for(var i in r){var n=new m(e,i,r[i]);this.properties.set(i,n)}this.metadatas=r,this._autoDestroy=t.autoDestroy}initialize(){this.lifecycle=1}constructed(){this.lifecycle=2}destroy(){if(this.destroyed=!0,this._autoDestroy)for(var[e,t]of this.properties){var r=this.internalGet(e);r&&((a=r)&&"function"==typeof a.destroy)&&(r.destroy(),8&~t.flags&&this._internalSet(t,null)),t.destroy()}else for(var[i,n]of this.properties)n.destroy();var a}get initialized(){return 0!==this.lifecycle}get(e){return this.properties.get(e).metadata.get?this.getterComputed(e):this.getterStatic(e)}getterStatic(e){var t=this.properties.get(e);if(void 0!==t)return Object(y.c)(t),this.store.has(e)?this.store.get(e):t.metadata.value}getterComputed(e){var t=this.properties.get(e);Object(y.c)(t);var r,i=this.store,n=t.flags,a=this.store.get(e);if(4&n)return a;if(i.has(e)&&(1&~n||b))return a;t.flags|=4;var o=t.metadata.get;64&n?r=Object(y.b)(t,o,this.host):(Object(y.d)(this.host,t),r=o.call(this.host)),i.set(e,r,1);var s=this.store.get(e);return s===a?t.flags&=-2:t.commit(),t.flags&=-5,s}originOf(e){var t=this.store.originOf(e);if(void 0===t){var r=this.properties.get(e);if(void 0!==r&&16&r.flags)return"defaults"}return Object(h.b)(t)}has(e){return!!this.properties.has(e)&&this.store.has(e)}keys(){return[...this.properties.keys()]}internalGet(e){var t=this.properties.get(e);if(O(t))return this.store.has(e)?this.store.get(e):t.metadata.value}internalSet(e,t){var r=this.properties.get(e);O(r)&&this._internalSet(r,t)}getDependsInfo(e,t,r){var i=this.properties.get(t);if(!O(i))return"";var n=new Set,a=Object(y.b)({onObservableAccessed:e=>n.add(e),onTrackingEnd:()=>{}},(()=>{var t;return null==(t=i.metadata.get)?void 0:t.call(e)})),o="".concat(r).concat(e.declaredClass.split(".").pop(),".").concat(t,": ").concat(a,"\n");if(0===n.size)return o;for(var s of(r+="  ",n))if(s instanceof m){var c=s.host,l=s.propertyName,u=Object(d.a)(c);o+=u?u.getDependsInfo(c,l,r):"".concat(r).concat(l,": undefined\n")}return o}setAtOrigin(e,t,r){var i=this.properties.get(e);if(O(i))return this._setAtOrigin(i,t,r)}isOverridden(e){var t=this.properties.get(e);return void 0!==t&&!!(2&t.flags)}clearOverride(e){var t=this.properties.get(e);void 0!==t&&2&t.flags&&(t.flags&=-3,t.invalidate())}override(e,t){var r=this.properties.get(e);if(j(r,0,t,this)){var i=r.metadata.cast;if(i){var n=this._cast(i,t),{valid:a,value:o}=n;if(_.release(n),!a)return;t=o}r.flags|=2,this._internalSet(r,t)}}set(e,t){var r=this.properties.get(e);if(j(r,0,t,this)){var i=r.metadata.cast;if(i){var n=this._cast(i,t),{valid:a,value:o}=n;if(_.release(n),!a)return;t=o}var s=r.metadata.set;s?s.call(this.host,t):this._internalSet(r,t)}}setDefaultOrigin(e){this._origin=Object(h.d)(e)}getDefaultOrigin(){return Object(h.b)(this._origin)}propertyInvalidated(e){var t=this.properties.get(e);void 0!==t&&t.invalidate()}propertyCommitted(e){var t=this.properties.get(e);void 0!==t&&t.commit()}_internalSet(e,t){var r=0!==this.lifecycle?this._origin:0;this._setAtOrigin(e,t,r)}_setAtOrigin(e,t,r){var i=this.store,n=e.propertyName;i.has(n,r)&&Object(u.b)(t,i.get(n))&&2&~e.flags&&r===i.originOf(n)||(b=!0,e.invalidate(),b=!1,i.set(n,t,r),e.commit(),Object(y.a)(this.host,e))}_cast(e,t){var r=_.acquire();return r.valid=!0,r.value=t,e&&(r.value=e.call(this.host,t,r)),r}},x=r(564);function S(e){if(null==e)return{value:e};if(Array.isArray(e))return{type:[e[0]],value:null};switch(typeof e){case"object":return e.constructor&&e.constructor.__accessorMetadata__||e instanceof Date?{type:e.constructor,value:e}:e;case"boolean":return{type:Boolean,value:e};case"string":return{type:String,value:e};case"number":return{type:Number,value:e};case"function":return{type:e,value:null};default:return}}class M{constructor(...e){if(this.constructor===M)throw new Error("[accessor] cannot instantiate Accessor. This can be fixed by creating a subclass of Accessor");Object.defineProperty(this,"__accessor__",{enumerable:!1,value:new w(this)}),e.length>0&&this.normalizeCtorArgs&&(this.__accessor__.ctorArgs=this.normalizeCtorArgs.apply(this,e))}static createSubclass(e={}){if(Array.isArray(e))throw new Error("Multi-inheritance unsupported since 4.16");var{properties:t,declaredClass:r,constructor:i}=e;delete e.declaredClass,delete e.properties,delete e.constructor;var n=this;class o extends n{constructor(...e){super(...e),this.inherited=null,i&&i.apply(this,e)}}Object(a.a)(o.prototype);var c=function(t){var r=e[t];o.prototype[t]="function"==typeof r?function(...e){var a,o=this.inherited;this.inherited=function(...e){if(n.prototype[t])return n.prototype[t].apply(this,e)};try{a=r.apply(this,e)}catch(i){throw this.inherited=o,i}return this.inherited=o,a}:e[t]};for(var u in e)c(u);for(var d in t){var h=S(t[d]);Object(s.b)(h)(o.prototype,d)}return Object(l.a)(r)(o)}postscript(e){var t=this.__accessor__,r=t.ctorArgs||e;t.initialize(),r&&(this.set(r),t.ctorArgs=null),t.constructed(),this.initialize()}initialize(){}destroy(){this.destroyed||(Object(x.c)(this),this.__accessor__.destroy())}get initialized(){return this.__accessor__&&this.__accessor__.initialized||!1}get constructed(){return this.__accessor__&&2===this.__accessor__.lifecycle||!1}get destroyed(){return this.__accessor__&&this.__accessor__.destroyed||!1}commitProperty(e){this.get(e)}get(e){return Object(n.b)(this,e)}hasOwnProperty(e){return this.__accessor__?this.__accessor__.has(e):Object.prototype.hasOwnProperty.call(this,e)}isInstanceOf(e){return Object(c.b)(i.a.getLogger(this.declaredClass),"isInstanceOf",{replacement:"Use instanceof directly",version:"4.16"}),this instanceof e}keys(){return this.__accessor__?this.__accessor__.keys():[]}set(e,t){return Object(o.a)(this,e,t),this}watch(e,t,r){return Object(x.d)(this,e,t,r)}_clearOverride(e){return this.__accessor__.clearOverride(e)}_override(e,t){return this.__accessor__.override(e,t)}_isOverridden(e){return this.__accessor__.isOverridden(e)}notifyChange(e){this.__accessor__.propertyInvalidated(e)}_get(e){return this.__accessor__.internalGet(e)}_set(e,t){return this.__accessor__.internalSet(e,t),this}}t.a=M},function(e,t,r){"use strict";r.d(t,"a",(function(){return a}));var i=r(124),n=r(85);function a(e,t,r){var a,o;return void 0===t||Array.isArray(t)?(o=e,r=t,a=[void 0]):(o=t,a=Array.isArray(e)?e:[e]),(e,t)=>{var s=e.constructor.prototype;a.forEach((a=>{var c=Object(n.c)(e,a,o);c.read&&"object"!=typeof c.read&&(c.read={}),Object(i.c)("read.reader",s[t],c),r&&(c.read.source=(c.read.source||[]).concat(r))}))}}},function(e,t,r){"use strict";var i,n=r(82),a=r(92),o=r(88),s=r(85),c=r(84),l=r(96),u=r(90),d=r(112),h=i=class extends u.a{constructor(e){super(e),this.latestWkid=null,this.wkid=null,this.wkt=null,this.vcsWkid=null,this.latestVcsWkid=null,this.imageCoordinateSystem=null}static fromJSON(e){if(!e)return null;if(e.wkid){if(102100===e.wkid)return i.WebMercator;if(4326===e.wkid)return i.WGS84}var t=new i;return t.read(e),t}normalizeCtorArgs(e){return e&&"object"==typeof e?e:{["string"==typeof e?"wkt":"wkid"]:e}}get isWGS84(){return Object(d.j)(this)}get isWebMercator(){return Object(d.m)(this)}get isGeographic(){return Object(d.f)(this)}get isWrappable(){return Object(d.n)(this)}writeWkt(e,t){this.wkid||(t.wkt=e)}clone(){if(this===i.WGS84)return i.WGS84;if(this===i.WebMercator)return i.WebMercator;var e=new i;return null!=this.wkid?(e.wkid=this.wkid,null!=this.latestWkid&&(e.latestWkid=this.latestWkid),null!=this.vcsWkid&&(e.vcsWkid=this.vcsWkid),null!=this.latestVcsWkid&&(e.latestVcsWkid=this.latestVcsWkid)):null!=this.wkt&&(e.wkt=this.wkt),this.imageCoordinateSystem&&(e.imageCoordinateSystem=Object(a.a)(this.imageCoordinateSystem)),e}equals(e){if(null==e)return!1;if(this.imageCoordinateSystem||e.imageCoordinateSystem){if(null==this.imageCoordinateSystem||null==e.imageCoordinateSystem)return!1;var{id:t,referenceServiceName:r}=e.imageCoordinateSystem,{geodataXform:i}=e.imageCoordinateSystem,n=this.imageCoordinateSystem;return null==t||i?JSON.stringify(n)===JSON.stringify(e.imageCoordinateSystem):r?n.id===t&&n.referenceServiceName===r:n.id===t}return Object(d.c)(this,e)}toJSON(e){return this.write(void 0,e)}};h.GCS_NAD_1927=null,h.WGS84=null,h.WebMercator=null,Object(n.a)([Object(s.b)({readOnly:!0})],h.prototype,"isWGS84",null),Object(n.a)([Object(s.b)({readOnly:!0})],h.prototype,"isWebMercator",null),Object(n.a)([Object(s.b)({readOnly:!0})],h.prototype,"isGeographic",null),Object(n.a)([Object(s.b)({readOnly:!0})],h.prototype,"isWrappable",null),Object(n.a)([Object(s.b)({type:o.a,json:{write:!0}})],h.prototype,"latestWkid",void 0),Object(n.a)([Object(s.b)({type:o.a,json:{write:!0,origins:{"web-scene":{write:{overridePolicy(){return{isRequired:null===this.wkt}}}}}}})],h.prototype,"wkid",void 0),Object(n.a)([Object(s.b)({type:String,json:{origins:{"web-scene":{write:{overridePolicy(){return{isRequired:null===this.wkid}}}}}}})],h.prototype,"wkt",void 0),Object(n.a)([Object(l.a)("wkt"),Object(l.a)("web-scene","wkt")],h.prototype,"writeWkt",null),Object(n.a)([Object(s.b)({type:o.a,json:{write:!0}})],h.prototype,"vcsWkid",void 0),Object(n.a)([Object(s.b)({type:o.a,json:{write:!0}})],h.prototype,"latestVcsWkid",void 0),Object(n.a)([Object(s.b)()],h.prototype,"imageCoordinateSystem",void 0),(h=i=Object(n.a)([Object(c.a)("esri.geometry.SpatialReference")],h)).prototype.toJSON.isDefaultToJSON=!0,h.GCS_NAD_1927=new h({wkid:4267,wkt:'GEOGCS["GCS_North_American_1927",DATUM["D_North_American_1927",SPHEROID["Clarke_1866",6378206.4,294.9786982]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]]'}),h.WGS84=new h(d.a),h.WebMercator=new h(d.b),Object.freeze&&(Object.freeze(h.GCS_NAD_1927),Object.freeze(h.WGS84),Object.freeze(h.WebMercator));var p=h;t.a=p},function(e,t,r){"use strict";r.d(t,"a",(function(){return f})),r.d(t,"b",(function(){return m})),r.d(t,"c",(function(){return b})),r.d(t,"d",(function(){return l})),r.d(t,"e",(function(){return u})),r.d(t,"f",(function(){return d})),r.d(t,"g",(function(){return p})),r.d(t,"h",(function(){return h}));var i=r(166),n=r(113),a=r(103),o=r(225),s=r(130),c=r(141);function l(e){return void 0!==e.xmin&&void 0!==e.ymin&&void 0!==e.xmax&&void 0!==e.ymax}function u(e){return void 0!==e.points}function d(e){return void 0!==e.x&&void 0!==e.y}function h(e){return void 0!==e.paths}function p(e){return void 0!==e.rings}function f(e){return e?e instanceof i.a?e:d(e)?n.a.fromJSON(e):h(e)?c.a.fromJSON(e):p(e)?s.a.fromJSON(e):u(e)?o.a.fromJSON(e):l(e)?a.a.fromJSON(e):null:null}function b(e){return e?d(e)?"esriGeometryPoint":h(e)?"esriGeometryPolyline":p(e)?"esriGeometryPolygon":l(e)?"esriGeometryEnvelope":u(e)?"esriGeometryMultipoint":null:null}var v={esriGeometryPoint:n.a,esriGeometryPolyline:c.a,esriGeometryPolygon:s.a,esriGeometryEnvelope:a.a,esriGeometryMultipoint:o.a};function m(e){return e&&v[e]||null}},function(e,t,r){"use strict";r.d(t,"a",(function(){return u}));var i=r(88),n=(r(99),r(166)),a=r(113),o=r(103),s=r(225),c=r(130),l=r(141);r(183),r(100);var u={base:n.a,key:"type",typeMap:{extent:o.a,multipoint:s.a,point:a.a,polyline:l.a,polygon:c.a}};Object(i.k)(u)},function(e,t,r){"use strict";r.d(t,"a",(function(){return a}));var i=r(85),n=r(95);function a(e,t={ignoreUnknown:!0}){var r=e instanceof n.a?e:new n.a(e,t),a={type:null!=t&&t.ignoreUnknown?r.apiValues:String,readOnly:null==t?void 0:t.readOnly,json:{type:r.jsonValues,read:(null==t||!t.readOnly)&&{reader:r.read},write:{writer:r.write}}};return void 0!==(null==t?void 0:t.default)&&(a.json.default=t.default),Object(i.b)(a)}},function(e,t,r){"use strict";var i,n=r(82),a=(r(80),r(89)),o=r(143),s=(r(81),r(88),r(85)),c=r(84),l=(r(83),r(86),r(87),r(112)),u=r(99),d=r(166),h=r(161),p=r(113),f=r(309),b=r(354);function v(e,t,r){return null==t?r:null==r?t:e(t,r)}var m=i=class extends d.a{constructor(...e){super(...e),this.type="extent",this.xmin=0,this.ymin=0,this.mmin=void 0,this.zmin=void 0,this.xmax=0,this.ymax=0,this.mmax=void 0,this.zmax=void 0}normalizeCtorArgs(e,t,r,i,n){return function(e){return e&&("esri.geometry.SpatialReference"===e.declaredClass||null!=e.wkid)}(e)?{spatialReference:e,xmin:0,ymin:0,xmax:0,ymax:0}:"object"==typeof e?(e.spatialReference=null==e.spatialReference?u.a.WGS84:e.spatialReference,e):{xmin:e,ymin:t,xmax:r,ymax:i,spatialReference:null==n?u.a.WGS84:n}}static fromBounds(e,t){return new i({xmin:e[0],ymin:e[1],xmax:e[2],ymax:e[3],spatialReference:t})}get cache(){return this.commitProperty("xmin"),this.commitProperty("ymin"),this.commitProperty("zmin"),this.commitProperty("mmin"),this.commitProperty("xmax"),this.commitProperty("ymax"),this.commitProperty("zmax"),this.commitProperty("mmax"),this.commitProperty("spatialReference"),{}}get center(){var e=new p.a({x:.5*(this.xmin+this.xmax),y:.5*(this.ymin+this.ymax),spatialReference:this.spatialReference});return this.hasZ&&(e.z=.5*(this.zmin+this.zmax)),this.hasM&&(e.m=.5*(this.mmin+this.mmax)),e}get extent(){return this.clone()}get hasM(){return null!=this.mmin&&null!=this.mmax}get hasZ(){return null!=this.zmin&&null!=this.zmax}get height(){return Math.abs(this.ymax-this.ymin)}get width(){return Math.abs(this.xmax-this.xmin)}centerAt(e){var t=this.center;return null!=e.z&&this.hasZ?this.offset(e.x-t.x,e.y-t.y,e.z-t.z):this.offset(e.x-t.x,e.y-t.y)}clone(){var e=new i;return e.xmin=this.xmin,e.ymin=this.ymin,e.xmax=this.xmax,e.ymax=this.ymax,e.spatialReference=this.spatialReference,null!=this.zmin&&(e.zmin=this.zmin,e.zmax=this.zmax),null!=this.mmin&&(e.mmin=this.mmin,e.mmax=this.mmax),e}contains(e){if(!e)return!1;var t=this.spatialReference,r=e.spatialReference;return t&&r&&!t.equals(r)&&Object(h.a)(t,r)&&(e=t.isWebMercator?Object(h.b)(e):Object(h.e)(e,!0)),"point"===e.type?Object(f.e)(this,e):"extent"===e.type&&Object(f.c)(this,e)}equals(e){if(!e)return!1;var t=this.spatialReference,r=e.spatialReference;return t&&r&&!t.equals(r)&&Object(h.a)(t,r)&&(e=t.isWebMercator?Object(h.b)(e):Object(h.e)(e,!0)),this.xmin===e.xmin&&this.ymin===e.ymin&&this.zmin===e.zmin&&this.mmin===e.mmin&&this.xmax===e.xmax&&this.ymax===e.ymax&&this.zmax===e.zmax&&this.mmax===e.mmax}expand(e){var t=.5*(1-e),r=this.width*t,i=this.height*t;if(this.xmin+=r,this.ymin+=i,this.xmax-=r,this.ymax-=i,this.hasZ){var n=(this.zmax-this.zmin)*t;this.zmin+=n,this.zmax-=n}if(this.hasM){var a=(this.mmax-this.mmin)*t;this.mmin+=a,this.mmax-=a}return this}intersects(e){if(Object(a.j)(e))return!1;"mesh"===e.type&&(e=e.extent);var t=this.spatialReference,r=e.spatialReference;return t&&r&&!t.equals(r)&&Object(h.a)(t,r)&&(e=t.isWebMercator?Object(h.b)(e):Object(h.e)(e,!0)),Object(b.b)(e.type)(this,e)}normalize(){var e=this._normalize(!1,!0);return Array.isArray(e)?e:[e]}offset(e,t,r){return this.xmin+=e,this.ymin+=t,this.xmax+=e,this.ymax+=t,null!=r&&(this.zmin+=r,this.zmax+=r),this}shiftCentralMeridian(){return this._normalize(!0)}union(e){return this.xmin=Math.min(this.xmin,e.xmin),this.ymin=Math.min(this.ymin,e.ymin),this.xmax=Math.max(this.xmax,e.xmax),this.ymax=Math.max(this.ymax,e.ymax),(this.hasZ||e.hasZ)&&(this.zmin=v(Math.min,this.zmin,e.zmin),this.zmax=v(Math.max,this.zmax,e.zmax)),(this.hasM||e.hasM)&&(this.mmin=v(Math.min,this.mmin,e.mmin),this.mmax=v(Math.max,this.mmax,e.mmax)),this}intersection(e){return this.intersects(e)?(this.xmin=Math.max(this.xmin,e.xmin),this.ymin=Math.max(this.ymin,e.ymin),this.xmax=Math.min(this.xmax,e.xmax),this.ymax=Math.min(this.ymax,e.ymax),(this.hasZ||e.hasZ)&&(this.zmin=v(Math.max,this.zmin,e.zmin),this.zmax=v(Math.min,this.zmax,e.zmax)),(this.hasM||e.hasM)&&(this.mmin=v(Math.max,this.mmin,e.mmin),this.mmax=v(Math.min,this.mmax,e.mmax)),this):null}toJSON(e){return this.write(null,e)}_shiftCM(e=Object(l.d)(this.spatialReference)){if(!e||!this.spatialReference)return this;var t=this.spatialReference,r=this._getCM(e);if(r){var i=t.isWebMercator?Object(h.e)(r):r;this.xmin-=r.x,this.xmax-=r.x,t.isWebMercator||(i.x=this._normalizeX(i.x,e).x),this.spatialReference=new u.a(Object(o.c)(t.isWGS84?e.altTemplate:e.wkTemplate,{Central_Meridian:i.x}))}return this}_getCM(e){var t=null,[r,i]=e.valid,n=this.xmin,a=this.xmax;return n>=r&&n<=i&&a>=r&&a<=i||(t=this.center),t}_normalize(e,t,r){var i=this.spatialReference;if(!i)return this;if(!(r=r||Object(l.d)(i)))return this;var n=this._getParts(r).map((e=>e.extent));if(n.length<2)return n[0]||this;if(n.length>2)return e?this._shiftCM(r):this.set({xmin:r.valid[0],xmax:r.valid[1]});if(e)return this._shiftCM(r);if(t)return n;var a=!0,o=!0;return n.forEach((e=>{e.hasZ||(a=!1),e.hasM||(o=!1)})),{rings:n.map((e=>{var t=[[e.xmin,e.ymin],[e.xmin,e.ymax],[e.xmax,e.ymax],[e.xmax,e.ymin],[e.xmin,e.ymin]];if(a)for(var r=(e.zmax-e.zmin)/2,i=0;i<t.length;i++)t[i].push(r);if(o)for(var n=(e.mmax-e.mmin)/2,s=0;s<t.length;s++)t[s].push(n);return t})),hasZ:a,hasM:o,spatialReference:i}}_getParts(e){var t=this.cache._parts;if(!t){t=[];var r,{ymin:n,ymax:a,spatialReference:o}=this,s=this.width,c=this.xmin,u=this.xmax;e=e||Object(l.d)(o);var[d,h]=e.valid,p=(r=this._normalizeX(this.xmin,e)).x,f=r.frameId,b=(r=this._normalizeX(this.xmax,e)).x,v=r.frameId,m=p===b&&s>0;if(s>2*h){var g=new i(c<u?p:b,n,h,a,o),y=new i(d,n,c<u?b:p,a,o),O=new i(0,n,h,a,o),j=new i(d,n,0,a,o),_=[],w=[];g.contains(O)&&_.push(f),g.contains(j)&&w.push(f),y.contains(O)&&_.push(v),y.contains(j)&&w.push(v);for(var x=f+1;x<v;x++)_.push(x),w.push(x);t.push({extent:g,frameIds:[f]},{extent:y,frameIds:[v]},{extent:O,frameIds:_},{extent:j,frameIds:w})}else p>b||m?t.push({extent:new i(p,n,h,a,o),frameIds:[f]},{extent:new i(d,n,b,a,o),frameIds:[v]}):t.push({extent:new i(p,n,b,a,o),frameIds:[f]});this.cache._parts=t}var S=this.hasZ,M=this.hasM;if(S||M){var T={};S&&(T.zmin=this.zmin,T.zmax=this.zmax),M&&(T.mmin=this.mmin,T.mmax=this.mmax);for(var P=0;P<t.length;P++)t[P].extent.set(T)}return t}_normalizeX(e,t){var r,[i,n]=t.valid,a=2*n,o=0;return e>n?(e-=(r=Math.ceil(Math.abs(e-n)/a))*a,o=r):e<i&&(e+=(r=Math.ceil(Math.abs(e-i)/a))*a,o=-r),{x:e,frameId:o}}};Object(n.a)([Object(s.b)({readOnly:!0})],m.prototype,"cache",null),Object(n.a)([Object(s.b)({readOnly:!0})],m.prototype,"center",null),Object(n.a)([Object(s.b)({readOnly:!0})],m.prototype,"extent",null),Object(n.a)([Object(s.b)({readOnly:!0,json:{write:{enabled:!1,overridePolicy:null}}})],m.prototype,"hasM",null),Object(n.a)([Object(s.b)({readOnly:!0,json:{write:{enabled:!1,overridePolicy:null}}})],m.prototype,"hasZ",null),Object(n.a)([Object(s.b)({readOnly:!0})],m.prototype,"height",null),Object(n.a)([Object(s.b)({readOnly:!0})],m.prototype,"width",null),Object(n.a)([Object(s.b)({type:Number,json:{type:[Number,String],write:{enabled:!0,allowNull:!0}}})],m.prototype,"xmin",void 0),Object(n.a)([Object(s.b)({type:Number,json:{write:!0}})],m.prototype,"ymin",void 0),Object(n.a)([Object(s.b)({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy(){return{enabled:this.hasM}}}}})],m.prototype,"mmin",void 0),Object(n.a)([Object(s.b)({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy(){return{enabled:this.hasZ}}}}})],m.prototype,"zmin",void 0),Object(n.a)([Object(s.b)({type:Number,json:{write:!0}})],m.prototype,"xmax",void 0),Object(n.a)([Object(s.b)({type:Number,json:{write:!0}})],m.prototype,"ymax",void 0),Object(n.a)([Object(s.b)({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy(){return{enabled:this.hasM}}}}})],m.prototype,"mmax",void 0),Object(n.a)([Object(s.b)({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy(){return{enabled:this.hasZ}}}}})],m.prototype,"zmax",void 0),(m=i=Object(n.a)([Object(c.a)("esri.geometry.Extent")],m)).prototype.toJSON.isDefaultToJSON=!0;var g=m;t.a=g},function(e,t,r){"use strict";function i(){return[0,0,0]}function n(e){return[e[0],e[1],e[2]]}function a(e,t,r){return[e,t,r]}function o(e){for(var t=[0,0,0],r=Math.min(3,e.length),i=0;i<r;++i)t[i]=e[i];return t}function s(e,t){return new Float64Array(e,t,3)}function c(){return[0,0,0]}function l(){return a(1,1,1)}function u(){return a(1,0,0)}function d(){return a(0,1,0)}function h(){return a(0,0,1)}r.d(t,"a",(function(){return f})),r.d(t,"b",(function(){return p})),r.d(t,"c",(function(){return s})),r.d(t,"d",(function(){return n})),r.d(t,"e",(function(){return i})),r.d(t,"f",(function(){return o})),r.d(t,"g",(function(){return a}));var p=[0,0,0],f=l(),b=u(),v=d(),m=h();Object.freeze({__proto__:null,create:i,clone:n,fromValues:a,fromArray:o,createView:s,zeros:c,ones:l,unitX:u,unitY:d,unitZ:h,ZEROS:p,ONES:f,UNIT_X:b,UNIT_Y:v,UNIT_Z:m})},,function(e,t,r){"use strict";r.r(t);var i=r(91),n=r(7),a=r(158),o=r(80),s=r(92),c=r(159),l=r(89),u=r(93),d=r(83),h=r(94),p=r(160),f=["elevation3d.arcgis.com","js.arcgis.com","jsdev.arcgis.com","jsqa.arcgis.com","static.arcgis.com"];function b(e){var t=Object(d.m)(e,!0);return t&&t.endsWith(".arcgis.com")&&!f.includes(t)&&!e.endsWith("/sharing/rest/generateToken")}var v,m=r(498);function g(e,t){return y.apply(this,arguments)}function y(){return(y=Object(n.a)((function*(e,t){var r=Object(d.u)(e),n=Object(d.t)(e);n||r||(e=Object(d.C)(e));var a={url:e,requestOptions:Object(i.a)({},Object(l.q)(t))},s=Object(d.l)(e);if(s){var c=yield N(s,a);if(null!=c)return{data:c,getHeader:S,requestOptions:a.requestOptions,url:a.url};s.after||s.error||(s=null)}if(e=a.url,"image"===(t=a.requestOptions).responseType){if(Object(o.a)("host-webworker")||Object(o.a)("host-node"))throw P("request:invalid-parameters",new Error("responseType 'image' is not supported in Web Workers or Node environment"),a)}else if(r)throw P("request:invalid-parameters",new Error("Data URLs are not supported for responseType = "+t.responseType),a);if("head"===t.method){if(t.body)throw P("request:invalid-parameters",new Error("body parameter cannot be set when method is 'head'"),a);if(r||n)throw P("request:invalid-parameters",new Error("data and blob URLs are not supported for method 'head'"),a)}if(yield E(),v)return v.execute(e,t);var u=Object(h.d)();Object(h.p)(t,(()=>u.abort()));var p={controller:u,credential:null,credentialToken:null,fetchOptions:null,hasToken:!1,interceptor:s,params:a,redoRequest:!1,useIdentity:O.useIdentity,useProxy:!1,useSSL:!1,withCredentials:!1},f=yield U(p);return s&&s.after&&s.after(f),f}))).apply(this,arguments)}var O=c.a.request,j="FormData"in a.a,_=[499,498,403,401],w=["COM_0056","COM_0057","SB_0008"],x=[/\/arcgis\/tokens/i,/\/sharing(\/rest)?\/generatetoken/i,/\/rest\/info/i],S=()=>null;function M(e){if(!Object(d.t)(e)&&!Object(d.u)(e)){var t=Object(d.m)(e);t&&-1===g._corsServers.indexOf(t)&&g._corsServers.push(t)}}function T(e){var t=Object(d.m)(e);return!t||t.endsWith(".arcgis.com")||-1!==g._corsServers.indexOf(t)||Object(d.x)(t)}function P(e,t,r,i){var n="Error",a={url:r.url,requestOptions:r.requestOptions,getHeader:S,ssl:!1};if(t instanceof u.a)return t.details?(t.details=Object(s.a)(t.details),t.details.url=r.url,t.details.requestOptions=r.requestOptions):t.details=a,t;if(t){var o=i&&(e=>i.headers.get(e)),c=i&&i.status,l=t.message;l&&(n=l),o&&(a.getHeader=o),a.httpStatus=(null!=t.httpCode?t.httpCode:t.code)||c||0,a.subCode=t.subcode,a.messageCode=t.messageCode,"string"==typeof t.details?a.messages=[t.details]:a.messages=t.details}return Object(h.m)(t)?Object(h.e)():new u.a(e,n,a)}function E(){return C.apply(this,arguments)}function C(){return(C=Object(n.a)((function*(){Object(o.a)("host-webworker")?v||(v=yield r.e(275).then(r.bind(null,1124))):g._abortableFetch||(g._abortableFetch=a.a.fetch.bind(a.a))}))).apply(this,arguments)}function A(){return I.apply(this,arguments)}function I(){return(I=Object(n.a)((function*(){p.b||(yield Promise.all([r.e(26),r.e(166)]).then(r.bind(null,1092)))}))).apply(this,arguments)}function k(e){return F.apply(this,arguments)}function F(){return(F=Object(n.a)((function*(e){var t,r=e.params.url,i=e.params.requestOptions,n=e.controller.signal,o=i.body,s=null,l=null,u=null;(j&&"HTMLFormElement"in a.a&&(o instanceof FormData?s=o:o instanceof HTMLFormElement&&(l=o,s=new FormData(l))),"string"==typeof o&&(u=o),e.fetchOptions={cache:i.cacheBust&&!g._abortableFetch.polyfill?"no-cache":"default",credentials:"same-origin",headers:i.headers||{},method:"head"===i.method?"HEAD":"GET",mode:"cors",redirect:"follow",signal:n},(s||u)&&(e.fetchOptions.body=s||u),"anonymous"===i.authMode&&(e.useIdentity=!1),e.hasToken=!!(/token=/i.test(r)||i.query&&i.query.token||s&&s.get&&s.get("token")||l&&l.elements.token),!e.hasToken&&c.a.apiKey&&b(r)&&(i.query||(i.query={}),i.query.token=c.a.apiKey,e.hasToken=!0),!e.useIdentity||e.hasToken||e.credentialToken||R(r)||Object(h.n)(n))||("immediate"===i.authMode?(yield A(),t=yield p.b.getCredential(r,{signal:n}),e.credential=t):"no-prompt"===i.authMode?(yield A(),t=yield p.b.getCredential(r,{prompt:!1,signal:n}).catch((()=>{})),e.credential=t):p.b&&(t=p.b.findCredential(r)),t&&(e.credentialToken=t.token,e.useSSL=!!t.ssl))}))).apply(this,arguments)}function R(e){return x.some((t=>t.test(e)))}function D(e){return L.apply(this,arguments)}function L(){return(L=Object(n.a)((function*(e){var t=e.params.url,r=e.params.requestOptions,n=e.fetchOptions,a=Object(d.t)(t)||Object(d.u)(t),s=r.responseType||"json",c=a?0:null!=r.timeout?r.timeout:O.timeout,l=!1;if(!a){e.useSSL&&(t=Object(d.I)(t)),r.cacheBust&&"default"===n.cache&&(t=Object(d.d)(t,"request.preventCache",Date.now()));var u=Object(i.a)({},r.query);e.credentialToken&&(u.token=e.credentialToken);var f=Object(d.D)(u);Object(o.a)("esri-url-encodes-apostrophe")&&(f=f.replace(/'/g,"%27"));var b,v=t.length+1+f.length;l="delete"===r.method||"post"===r.method||"put"===r.method||!!r.body||v>O.maxUrlLength;var m=r.useProxy||!!Object(d.o)(t);if(m){var y=Object(d.p)(t);b=y.path,!l&&b.length+1+v>O.maxUrlLength&&(l=!0),y.query&&(u=Object(i.a)(Object(i.a)({},y.query),u))}if("HEAD"===n.method&&(l||m)){if(l){if(v>O.maxUrlLength)throw P("request:invalid-parameters",new Error("URL exceeds maximum length"),e.params);throw P("request:invalid-parameters",new Error("cannot use POST request when method is 'head'"),e.params)}if(m)throw P("request:invalid-parameters",new Error("cannot use proxy when method is 'head'"),e.params)}if(l?(n.method="delete"===r.method?"DELETE":"put"===r.method?"PUT":"POST",r.body?t=Object(d.e)(t,u):(n.body=Object(d.D)(u),n.headers["Content-Type"]="application/x-www-form-urlencoded")):t=Object(d.e)(t,u),m&&(e.useProxy=!0,t="".concat(b,"?").concat(t)),u.token&&j&&n.body instanceof FormData){var _=n.body;_.set?_.set("token",u.token):_.append("token",u.token)}if(r.hasOwnProperty("withCredentials"))e.withCredentials=r.withCredentials;else if(!Object(d.q)(t,d.g))if(Object(d.x)(t))e.withCredentials=!0;else if(p.b){var w=p.b.findServerInfo(t);w&&w.webTierAuth&&(e.withCredentials=!0)}e.withCredentials&&(n.credentials="include")}var x,S,E=0,C=!1;c>0&&(E=setTimeout((()=>{C=!0,e.controller.abort()}),c));try{if("image"!==r.responseType||"default"!==n.cache||"GET"!==n.method||l||z(r.headers)||!a&&!e.useProxy&&O.proxyUrl&&!T(t)){if(x=yield g._abortableFetch(t,n),e.useProxy||M(t),x.ok&&"HEAD"!==n.method){switch(s){case"array-buffer":S=yield x.arrayBuffer();break;case"blob":case"image":S=yield x.blob();break;default:S=yield x.text()}if(E&&(clearTimeout(E),E=0),"json"===s||"xml"===s||"document"===s)if(S)switch(s){case"json":S=JSON.parse(S);break;case"xml":S=G(S,"application/xml");break;case"document":S=G(S,"text/html")}else S=null;if(S){if("array-buffer"===s||"blob"===s){var A=x.headers.get("Content-Type");if(/application\/json|text\/plain/i.test(A)&&S["blob"===s?"size":"byteLength"]<=750)try{var I=yield new Response(S).json();I.error&&(S=I)}catch(k){}}"image"===s&&S instanceof Blob&&(S=yield W(URL.createObjectURL(S),e,!0))}}}else S=yield W(t,e)}catch(F){if("AbortError"===F.name){if(C)throw new Error("Timeout exceeded");throw Object(h.e)("Request canceled")}if(!(!x&&F instanceof TypeError&&O.proxyUrl)||r.body||"delete"===r.method||"head"===r.method||"post"===r.method||"put"===r.method||e.useProxy)throw F;e.redoRequest=!0,Object(d.c)({proxyUrl:O.proxyUrl,urlPrefix:Object(d.F)(Object(d.J)(t).path)})}finally{E&&clearTimeout(E)}return[x,S]}))).apply(this,arguments)}function N(e,t){return V.apply(this,arguments)}function V(){return(V=Object(n.a)((function*(e,t){if(null!=e.responseData)return e.responseData;if(e.headers&&(t.requestOptions.headers=Object(i.a)(Object(i.a)({},t.requestOptions.headers),e.headers)),e.query&&(t.requestOptions.query=Object(i.a)(Object(i.a)({},t.requestOptions.query),e.query)),e.before){var r,n;try{n=yield e.before(t)}catch(a){r=P("request:interceptor",a,t)}if((n instanceof Error||n instanceof u.a)&&(r=P("request:interceptor",n,t)),r)throw e.error&&e.error(r),r;return n}}))).apply(this,arguments)}function z(e){if(e)for(var t of Object.getOwnPropertyNames(e))if(e[t])return!0;return!1}function G(e,t){var r;try{r=(new DOMParser).parseFromString(e,t)}catch(i){}if(!r||r.getElementsByTagName("parsererror").length)throw new SyntaxError("XML Parse error");return r}function U(e){return q.apply(this,arguments)}function q(){return(q=Object(n.a)((function*(e){var t,r;yield k(e);try{do{[t,r]=yield D(e)}while(!(yield H(e,t,r)))}catch(u){var i=P("request:server",u,e.params,t);throw i.details.ssl=e.useSSL,e.interceptor&&e.interceptor.error&&e.interceptor.error(i),i}var n=e.params.url;if(/\/sharing\/rest\/(accounts|portals)\/self/i.test(n)&&!e.hasToken&&!e.credentialToken&&r&&r.user&&r.user.username&&!Object(d.x)(n)){var a=Object(d.m)(n,!0);a&&O.trustedServers.push(a)}var o=e.credential;if(o&&p.b){var s=p.b.findServerInfo(o.server),c=s&&s.owningSystemUrl;if(c){c=c.replace(/\/?$/,"/sharing");var l=p.b.findCredential(c,o.userId);l&&-1===p.b._getIdenticalSvcIdx(c,l)&&l.resources.unshift(c)}}return{data:r,getHeader:t?e=>t.headers.get(e):S,requestOptions:e.params.requestOptions,ssl:e.useSSL,url:e.params.url}}))).apply(this,arguments)}function H(e,t,r){return B.apply(this,arguments)}function B(){return(B=Object(n.a)((function*(e,t,r){if(e.redoRequest)return e.redoRequest=!1,!1;if(!t)return!0;if(!t.ok)throw new Error("Unable to load ".concat(t.url," status: ").concat(t.status));var i,n,a,o;r&&r.error&&(i=Object.assign(new Error,r.error)),i&&(n=Number(i.code),a=i.hasOwnProperty("subcode")?Number(i.subcode):null,o=(o=i.messageCode)&&o.toUpperCase());var s=e.params.requestOptions.authMode;if(403===n&&(4===a||i.message&&i.message.toLowerCase().indexOf("ssl")>-1&&-1===i.message.toLowerCase().indexOf("permission"))){if(!e.useSSL)return e.useSSL=!0,!1}else if(!e.hasToken&&e.useIdentity&&("no-prompt"!==s||498===n)&&-1!==_.indexOf(n)&&!R(e.params.url)&&(403!==n||-1===w.indexOf(o)&&(null==a||2===a&&e.credentialToken))){yield A();try{var c=yield p.b.getCredential(e.params.url,{error:P("request:server",i,e.params),prompt:"no-prompt"!==s,signal:e.controller.signal,token:e.credentialToken});return e.credential=c,e.credentialToken=c.token,e.useSSL=e.useSSL||c.ssl,!1}catch(l){if("no-prompt"===s)return e.credential=null,e.credentialToken=null,!1;i=l}}if(i)throw i;return!0}))).apply(this,arguments)}function W(e,t,r=!1){var i=t.controller.signal,n=new Image;return t.withCredentials?n.crossOrigin="use-credentials":n.crossOrigin="anonymous",n.alt="",n.src=e,Object(m.a)(n,e,r,i)}g._abortableFetch=null,g._corsServers=["https://server.arcgisonline.com","https://services.arcgisonline.com"];t.default=g},function(e,t,r){"use strict";var i,n=r(82),a=r(92),o=r(89),s=r(88),c=r(85),l=r(84),u=r(221),d=r(329),h=r(315),p=r(241),f=r(131),b=r(477);class v{constructor(){this._observers=new Set}observe(e){return new b.a(this._observers.add(e),e)}notify(){var e=this._observers,t=this._observers.size,r=new Array(t),i=0;for(var n of e)r[i++]=n;for(var a=0;a<t;a++)r[a].notify()}}var m=new u.a(class{constructor(){this.target=null,this.cancellable=!1,this.defaultPrevented=!1,this.item=void 0,this.type=void 0}preventDefault(){this.cancellable&&(this.defaultPrevented=!0)}reset(e){this.defaultPrevented=!1,this.item=e}},void 0,(e=>{e.item=null,e.target=null,e.defaultPrevented=!1,e.cancellable=!1})),g=()=>{};function y(e){return e?e instanceof P?e.toArray():e.length?Array.prototype.slice.apply(e):[]:[]}function O(e){if(e&&e.length)return e[0]}function j(e,t,r,i){for(var n=Math.min(e.length-r,t.length-i),a=0;a<n&&e[r+a]===t[i+a];)a++;return a}function _(e,t,r,i){t&&t.forEach(((t,n,a)=>{e.push(t),_(e,r.call(i,t,n,a),r,i)}))}var w=new Set,x=new Set,S=new Set,M=new Map,T=0,P=i=class extends f.a.EventedAccessor{constructor(e){super(e),this._chgListeners=[],this._notifications=null,this._timer=null,this._observable=new v,this.length=0,this._items=[],Object.defineProperty(this,"uid",{value:T++})}static isCollection(e){return null!=e&&e instanceof i}normalizeCtorArgs(e){return e?Array.isArray(e)||e instanceof i?{items:e}:e:{}}*[Symbol.iterator](){yield*this.items}get items(){return Object(d.c)(this._observable),this._items}set items(e){this._emitBeforeChanges(1)||(this._splice(0,this.length,...y(e)),this._emitAfterChanges(1))}hasEventListener(e){return"change"===e?this._chgListeners.length>0:this._emitter.hasEventListener(e)}on(e,t){if("change"===e){var r=this._chgListeners,i={removed:!1,callback:t};return r.push(i),this._notifications&&this._notifications.push({listeners:r.slice(),items:this._items.slice(),changes:[]}),{remove(){this.remove=g,i.removed=!0,r.splice(r.indexOf(i),1)}}}return this._emitter.on(e,t)}once(e,t){var r=this.on(e,t);return{remove(){r.remove()}}}add(e,t){if(Object(d.c)(this._observable),this._emitBeforeChanges(1))return this;var r=this.getNextIndex(null!=t?t:null);return this._splice(r,0,e),this._emitAfterChanges(1),this}addMany(e,t=this._items.length){if(Object(d.c)(this._observable),!e||!e.length)return this;if(this._emitBeforeChanges(1))return this;var r=this.getNextIndex(t);return this._splice(r,0,...y(e)),this._emitAfterChanges(1),this}removeAll(){if(Object(d.c)(this._observable),!this.length||this._emitBeforeChanges(2))return[];var e=this._splice(0,this.length)||[];return this._emitAfterChanges(2),e}clone(){return Object(d.c)(this._observable),this._createNewInstance({items:this._items.map(a.a)})}concat(...e){Object(d.c)(this._observable);var t=e.map(y);return this._createNewInstance({items:this._items.concat(...t)})}drain(e,t){if(Object(d.c)(this._observable),this.length&&!this._emitBeforeChanges(2)){for(var r=Object(o.d)(this._splice(0,this.length)),i=r.length,n=0;n<i;n++)e.call(t,r[n],n,r);this._emitAfterChanges(2)}}every(e,t){return Object(d.c)(this._observable),this._items.every(e,t)}filter(e,t){var r;return Object(d.c)(this._observable),r=2===arguments.length?this._items.filter(e,t):this._items.filter(e),this._createNewInstance({items:r})}find(e,t){return Object(d.c)(this._observable),this._items.find(e,t)}findIndex(e,t){return Object(d.c)(this._observable),this._items.findIndex(e,t)}flatten(e,t){Object(d.c)(this._observable);var r=[];return _(r,this,e,t),new i(r)}forEach(e,t){return Object(d.c)(this._observable),this._items.forEach(e,t)}getItemAt(e){return Object(d.c)(this._observable),this._items[e]}getNextIndex(e){Object(d.c)(this._observable);var t=this.length;return(e=null==e?t:e)<0?e=0:e>t&&(e=t),e}includes(e,t=0){return Object(d.c)(this._observable),this._items.includes(e,t)}indexOf(e,t=0){return Object(d.c)(this._observable),this._items.indexOf(e,t)}join(e=","){return Object(d.c)(this._observable),this._items.join(e)}lastIndexOf(e,t=this.length-1){return Object(d.c)(this._observable),this._items.lastIndexOf(e,t)}map(e,t){Object(d.c)(this._observable);var r=this._items.map(e,t);return new i({items:r})}reorder(e,t=this.length-1){Object(d.c)(this._observable);var r=this.indexOf(e);if(-1!==r){if(t<0?t=0:t>=this.length&&(t=this.length-1),r!==t){if(this._emitBeforeChanges(4))return e;this._splice(r,1),this._splice(t,0,e),this._emitAfterChanges(4)}return e}}pop(){if(Object(d.c)(this._observable),this.length&&!this._emitBeforeChanges(2)){var e=O(this._splice(this.length-1,1));return this._emitAfterChanges(2),e}}push(...e){return Object(d.c)(this._observable),this._emitBeforeChanges(1)||(this._splice(this.length,0,...e),this._emitAfterChanges(1)),this.length}reduce(e,t){Object(d.c)(this._observable);var r=this._items;return 2===arguments.length?r.reduce(e,t):r.reduce(e)}reduceRight(e,t){Object(d.c)(this._observable);var r=this._items;return 2===arguments.length?r.reduceRight(e,t):r.reduceRight(e)}remove(e){return Object(d.c)(this._observable),this.removeAt(this.indexOf(e))}removeAt(e){if(Object(d.c)(this._observable),!(e<0||e>=this.length||this._emitBeforeChanges(2))){var t=O(this._splice(e,1));return this._emitAfterChanges(2),t}}removeMany(e){if(Object(d.c)(this._observable),!e||!e.length||this._emitBeforeChanges(2))return[];for(var t=e instanceof i?e.toArray():e,r=this._items,n=[],a=t.length,o=0;o<a;o++){var s=t[o],c=r.indexOf(s);if(c>-1){var l=1+j(t,r,o+1,c+1),u=this._splice(c,l);u&&u.length>0&&n.push.apply(n,u),o+=l-1}}return this._emitAfterChanges(2),n}reverse(){if(Object(d.c)(this._observable),this._emitBeforeChanges(4))return this;var e=this._splice(0,this.length);return e&&(e.reverse(),this._splice(0,0,...e)),this._emitAfterChanges(4),this}shift(){if(Object(d.c)(this._observable),this.length&&!this._emitBeforeChanges(2)){var e=O(this._splice(0,1));return this._emitAfterChanges(2),e}}slice(e=0,t=this.length){return Object(d.c)(this._observable),this._createNewInstance({items:this._items.slice(e,t)})}some(e,t){return Object(d.c)(this._observable),this._items.some(e,t)}sort(e){if(Object(d.c)(this._observable),!this.length||this._emitBeforeChanges(4))return this;var t=Object(o.d)(this._splice(0,this.length));return arguments.length?t.sort(e):t.sort(),this._splice(0,0,...t),this._emitAfterChanges(4),this}splice(e,t,...r){Object(d.c)(this._observable);var i=(t?2:0)|(r.length?1:0);if(this._emitBeforeChanges(i))return[];var n=this._splice(e,t,...r)||[];return this._emitAfterChanges(i),n}toArray(){return Object(d.c)(this._observable),this._items.slice()}toJSON(){return Object(d.c)(this._observable),this.toArray()}toLocaleString(){return Object(d.c)(this._observable),this._items.toLocaleString()}toString(){return Object(d.c)(this._observable),this._items.toString()}unshift(...e){return Object(d.c)(this._observable),!e.length||this._emitBeforeChanges(1)||(this._splice(0,0,...e),this._emitAfterChanges(1)),this.length}_createNewInstance(e){return new this.constructor(e)}_splice(e,t,...r){var i,n,a=this._items,o=this.constructor.prototype.itemType;if(!this._notifications&&this.hasEventListener("change")&&(this._notifications=[{listeners:this._chgListeners.slice(),items:this._items.slice(),changes:[]}],this._timer&&this._timer.remove(),this._timer=Object(p.b)((()=>this._dispatchChange()))),t){if(n=a.splice(e,t),this.hasEventListener("before-remove")){var s=m.acquire();s.target=this,s.cancellable=!0;for(var c=0,l=n.length;c<l;c++)i=n[c],s.reset(i),this.emit("before-remove",s),s.defaultPrevented&&(n.splice(c,1),a.splice(e,0,i),e+=1,c-=1,l-=1);m.release(s)}if(this.length=this._items.length,this.hasEventListener("after-remove")){var u=m.acquire();u.target=this,u.cancellable=!1;for(var d=n.length,h=0;h<d;h++)u.reset(n[h]),this.emit("after-remove",u);m.release(u)}}if(r&&r.length){if(o){var f=[];for(var b of r){var v=o.ensureType(b);null==v&&null!=b||f.push(v)}r=f}var g=this.hasEventListener("before-add"),y=this.hasEventListener("after-add"),O=e===this.length;if(g||y){var j=m.acquire();j.target=this,j.cancellable=!0;var _=m.acquire();for(var w of(_.target=this,_.cancellable=!1,r))g?(j.reset(w),this.emit("before-add",j),j.defaultPrevented||(O?a.push(w):a.splice(e++,0,w),this._set("length",a.length),y&&(_.reset(w),this.emit("after-add",_)))):(O?a.push(w):a.splice(e++,0,w),this._set("length",a.length),_.reset(w),this.emit("after-add",_));m.release(_),m.release(j)}else{if(O)for(var x of r)a.push(x);else a.splice(e,0,...r);this._set("length",a.length)}}return(r&&r.length||n&&n.length)&&this._notifyChangeEvent(r,n),n}_emitBeforeChanges(e){var t=!1;if(this.hasEventListener("before-changes")){var r=m.acquire();r.target=this,r.cancellable=!0,r.type=e,this.emit("before-changes",r),t=r.defaultPrevented,m.release(r)}return t}_emitAfterChanges(e){if(this.hasEventListener("after-changes")){var t=m.acquire();t.target=this,t.cancellable=!1,t.type=e,this.emit("after-changes",t),m.release(t)}this._observable.notify()}_notifyChangeEvent(e,t){this.hasEventListener("change")&&this._notifications&&this._notifications[this._notifications.length-1].changes.push({added:e,removed:t})}_dispatchChange(){var e=this;if(this._timer&&(this._timer.remove(),this._timer=null),this._notifications){var t=this._notifications;this._notifications=null;var r=function(t){var r=t.changes;for(var{added:i,removed:n}of(w.clear(),x.clear(),S.clear(),r)){if(i)if(0===S.size&&0===x.size)for(var a of i)w.add(a);else for(var o of i)x.has(o)?(S.add(o),x.delete(o)):S.has(o)||w.add(o);if(n)if(0===S.size&&0===w.size)for(var s of n)x.add(s);else for(var c of n)w.has(c)?w.delete(c):(S.delete(c),x.add(c))}var l=h.a.acquire();w.forEach((e=>{l.push(e)}));var u=h.a.acquire();x.forEach((e=>{u.push(e)}));var d=e._items,p=t.items,f=h.a.acquire();if(S.forEach((e=>{p.indexOf(e)!==d.indexOf(e)&&f.push(e)})),t.listeners&&(l.length||u.length||f.length))for(var b={target:e,added:l,removed:u,moved:f},v=t.listeners.length,m=0;m<v;m++){var g=t.listeners[m];g.removed||g.callback.call(e,b)}h.a.release(l),h.a.release(u),h.a.release(f)};for(var i of t)r(i);w.clear(),x.clear(),S.clear()}}};P.ofType=e=>{if(!e)return i;if(M.has(e))return M.get(e);var t=null;if("function"==typeof e)t=e.prototype.declaredClass;else if(e.base)t=e.base.prototype.declaredClass;else for(var r in e.typeMap){var a=e.typeMap[r].prototype.declaredClass;t?t+=" | ".concat(a):t=a}var o=class extends i{};o=Object(n.a)([Object(l.a)("esri.core.Collection<".concat(t,">"))],o);var c={Type:e,ensureType:"function"==typeof e?Object(s.m)(e):Object(s.k)(e)};return Object.defineProperty(o.prototype,"itemType",{value:c}),M.set(e,o),o},Object(n.a)([Object(c.b)()],P.prototype,"length",void 0),Object(n.a)([Object(c.b)()],P.prototype,"items",null);var E=P=i=Object(n.a)([Object(l.a)("esri.core.Collection")],P);t.a=E},function(e,t,r){"use strict";r.d(t,"a",(function(){return h})),r.d(t,"b",(function(){return w})),r.d(t,"c",(function(){return _})),r.d(t,"d",(function(){return p})),r.d(t,"e",(function(){return f})),r.d(t,"f",(function(){return O})),r.d(t,"g",(function(){return j})),r.d(t,"h",(function(){return v})),r.d(t,"i",(function(){return m})),r.d(t,"j",(function(){return b})),r.d(t,"k",(function(){return g})),r.d(t,"l",(function(){return y})),r.d(t,"m",(function(){return o}));r(92);var i=r(165),n=r(94);function a(e,t,r,i,n){var a=e.watch(t,((t,n,a,o)=>{r&&!r(t)||null==i||i.call(e,t,n,a,o)}),n);if(Array.isArray(t))for(var o of t){var s=e.get(o);r&&r(s)&&(null==i||i.call(e,s,s,t,e))}else{var c=e.get(t);r&&r(c)&&(null==i||i.call(e,c,c,t,e))}return a}function o(e,t,r,i,o){var s="function"==typeof i?i:null,c="object"==typeof i?i:null;"boolean"==typeof i&&(o=i);var l,u=!1;function d(){l&&(l.remove(),l=null)}var h=Object(n.f)();Object(n.p)(c,(()=>{d(),h.reject(Object(n.e)())}));var p={then:h.promise.then.bind(h.promise),catch:h.promise.catch.bind(h.promise),remove:d};return Object.freeze(p),l=a(e,t,r,((t,r,i,n)=>{u=!0,d(),s&&s.call(e,t,r,i,n),h.resolve({value:t,oldValue:r,propertyName:i,target:n})}),o),u&&d(),p}function s(e){return!!e}function c(e){return!e}function l(e){return!0===e}function u(e){return!1===e}var d=/\?(\.|$)/g;function h(e,t,r,i){var n=Array.isArray(t)?t:t.indexOf(",")>-1?t.split(","):[t],a=p(e,t,r,i);for(var o of n){var s=o.trim().replace(d,"$1"),c=e.get(s);r.call(e,c,c,s,e)}return a}function p(e,t,r,i){return e.watch(t,r,i)}function f(e,t,r,i){return a(e,t,s,r,i)}function b(e,t,r,i){return o(e,t,s,r,i)}function v(e,t,r,i){return a(e,t,c,r,i)}function m(e,t,r,i){return o(e,t,c,r,i)}function g(e,t,r,i){return a(e,t,l,r,i)}function y(e,t,r,i){return o(e,t,l,r,i)}function O(e,t,r,i){return a(e,t,u,r,i)}function j(e,t,r,i){return o(e,t,u,r,i)}function _(e,t,r,i){var n=!1,a=e.watch(t,((t,i,a,o)=>{n||r.call(e,t,i,a,o)}),i);return{remove(){a.remove()},pause(){n=!0},resume(){n=!1}}}function w(e,t,r,n,a,o,s){var c={};function l(t){var i=c[t];i&&(o&&o(i.target,t,e,r),i.handle.remove(),delete c[t])}var u=h(e,t,((t,o,s)=>{l(s),Object(i.b)(t)&&(c[s]={handle:Object(i.c)(t,r,n),target:t},a&&a(t,s,e,r))}),s);return{remove(){for(var e in u.remove(),c)l(e)}}}},function(e,t,r){"use strict";var i=r(89),n=r(88),a=r(544),o=r(110);function s(e){return Object(o.d)(Object(n.e)(e),0,255)}function c(e,t,r){return e=Number(e),isNaN(e)?r:e<t?t:e>r?r:e}class l{constructor(e){this.r=255,this.g=255,this.b=255,this.a=1,e&&this.setColor(e)}static blendColors(e,t,r,i=new l){return i.r=Math.round(e.r+(t.r-e.r)*r),i.g=Math.round(e.g+(t.g-e.g)*r),i.b=Math.round(e.b+(t.b-e.b)*r),i.a=e.a+(t.a-e.a)*r,i._sanitize()}static fromRgb(e,t){var r=e.toLowerCase().match(/^(rgba?|hsla?)\(([\s\.\-,%0-9]+)\)/);if(r){var i=r[2].split(/\s*,\s*/),n=r[1];if("rgb"===n&&3===i.length||"rgba"===n&&4===i.length){var o=i[0];if("%"===o.charAt(o.length-1)){var s=i.map((e=>2.56*parseFloat(e)));return 4===i.length&&(s[3]=parseFloat(i[3])),l.fromArray(s,t)}return l.fromArray(i.map((e=>parseFloat(e))),t)}if("hsl"===n&&3===i.length||"hsla"===n&&4===i.length)return l.fromArray(Object(a.d)(parseFloat(i[0]),parseFloat(i[1])/100,parseFloat(i[2])/100,parseFloat(i[3])),t)}return null}static fromHex(e,t=new l){if(4!==e.length&&7!==e.length||"#"!==e[0])return null;var r=4===e.length?4:8,i=(1<<r)-1,n=Number("0x"+e.substr(1));return isNaN(n)?null:(["b","g","r"].forEach((e=>{var a=n&i;n>>=r,t[e]=4===r?17*a:a})),t.a=1,t)}static fromArray(e,t=new l){return t._set(Number(e[0]),Number(e[1]),Number(e[2]),Number(e[3])),isNaN(t.a)&&(t.a=1),t._sanitize()}static fromString(e,t){var r=Object(a.a)(e);return r&&l.fromArray(r,t)||l.fromRgb(e,t)||l.fromHex(e,t)}static fromJSON(e){return e&&new l([e[0],e[1],e[2],e[3]/255])}static toUnitRGB(e){return Object(i.k)(e)?[e.r/255,e.g/255,e.b/255]:null}static toUnitRGBA(e){return Object(i.k)(e)?[e.r/255,e.g/255,e.b/255,null!=e.a?e.a:1]:null}get isBright(){return.299*this.r+.587*this.g+.114*this.b>=127}setColor(e){if("string"==typeof e)l.fromString(e,this);else if(Array.isArray(e))l.fromArray(e,this);else{var t,r,i,n;this._set(null!=(t=e.r)?t:0,null!=(r=e.g)?r:0,null!=(i=e.b)?i:0,null!=(n=e.a)?n:1),e instanceof l||this._sanitize()}return this}toRgb(){return[this.r,this.g,this.b]}toRgba(){return[this.r,this.g,this.b,this.a]}toHex(){var e=this.r.toString(16),t=this.g.toString(16),r=this.b.toString(16);return"#".concat(e.length<2?"0"+e:e).concat(t.length<2?"0"+t:t).concat(r.length<2?"0"+r:r)}toCss(e=!1){var t=this.r+", "+this.g+", "+this.b;return e?"rgba(".concat(t,", ").concat(this.a,")"):"rgb(".concat(t,")")}toString(){return this.toCss(!0)}toJSON(){return this.toArray()}toArray(e=0){var t=s(this.r),r=s(this.g),i=s(this.b);return 0===e||1!==this.a?[t,r,i,s(255*this.a)]:[t,r,i]}clone(){return new l(this.toRgba())}hash(){return this.r<<24|this.g<<16|this.b<<8|255*this.a}_sanitize(){return this.r=Math.round(c(this.r,0,255)),this.g=Math.round(c(this.g,0,255)),this.b=Math.round(c(this.b,0,255)),this.a=c(this.a,0,1),this}_set(e,t,r,i){this.r=e,this.g=t,this.b=r,this.a=i}}l.prototype.declaredClass="esri.Color",t.a=l},function(e,t,r){"use strict";r.d(t,"a",(function(){return w})),r.d(t,"b",(function(){return m})),r.d(t,"c",(function(){return g})),r.d(t,"d",(function(){return s})),r.d(t,"e",(function(){return j})),r.d(t,"f",(function(){return b})),r.d(t,"g",(function(){return O})),r.d(t,"h",(function(){return y})),r.d(t,"i",(function(){return c})),r.d(t,"j",(function(){return n})),r.d(t,"k",(function(){return l})),r.d(t,"l",(function(){return f})),r.d(t,"m",(function(){return p})),r.d(t,"n",(function(){return d})),r.d(t,"o",(function(){return o})),r.d(t,"p",(function(){return u})),r.d(t,"q",(function(){return v})),r.d(t,"r",(function(){return h}));var i=new Float32Array(1),n=Number.isFinite||function(e){return"number"==typeof e&&window.isFinite(e)},a=Number.isNaN||function(e){return e!=e};function o(e){--e;for(var t=1;t<32;t<<=1)e|=e>>t;return e+1}function s(e,t,r){return e<t?t:e>r?r:e}function c(e,t,r){return Math.min(Math.max(e,t),r)}function l(e){return 0==(e&e-1)}function u(e){return e--,e|=e>>1,e|=e>>2,e|=e>>4,e|=e>>8,e|=e>>16,++e}function d(e){return Math.pow(10,Math.ceil(Math.LOG10E*Math.log(e)))}var h=Math.sign||function(e){return+(e>0)-+(e<0)||+e},p=Math.log2||function(e){return Math.log(e)/Math.LN2};function f(e,t,r){return e+(t-e)*r}function b(e){return e*Math.PI/180}function v(e){return 180*e/Math.PI}function m(e){return Math.acos(s(e,-1,1))}function g(e){return Math.asin(s(e,-1,1))}function y(e,t,r=1e-6){if(a(e)||a(t))return!1;if(e===t)return!0;var i=Math.abs(e-t),n=Math.abs(e),o=Math.abs(t);if(0===e||0===t||n<1e-12&&o<1e-12){if(i>.01*r)return!1}else if(i/(n+o)>r)return!1;return!0}function O(e,t,r=1e-6){return!a(e)&&!a(t)&&(e>t?e-t:t-e)<=r}function j(e){return _(Math.max(-w,Math.min(e,w)))}function _(e){return i[0]=e,i[0]}var w=_(34028234663852886e22)},function(e,t,r){"use strict";r.d(t,"a",(function(){return d})),r.d(t,"b",(function(){return p})),r.d(t,"c",(function(){return S})),r.d(t,"d",(function(){return h})),r.d(t,"e",(function(){return c})),r.d(t,"f",(function(){return O})),r.d(t,"g",(function(){return y})),r.d(t,"h",(function(){return j})),r.d(t,"i",(function(){return l})),r.d(t,"j",(function(){return o})),r.d(t,"k",(function(){return b})),r.d(t,"l",(function(){return _})),r.d(t,"m",(function(){return F})),r.d(t,"n",(function(){return f})),r.d(t,"o",(function(){return a})),r.d(t,"p",(function(){return P})),r.d(t,"q",(function(){return g})),r.d(t,"r",(function(){return v})),r.d(t,"s",(function(){return m})),r.d(t,"t",(function(){return x})),r.d(t,"u",(function(){return E})),r.d(t,"v",(function(){return s})),r.d(t,"w",(function(){return w})),r.d(t,"x",(function(){return R})),r.d(t,"y",(function(){return k})),r.d(t,"z",(function(){return I}));var i=r(104),n=r(184);function a(e){var t=e[0],r=e[1],i=e[2];return Math.sqrt(t*t+r*r+i*i)}function o(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}function s(e,t,r,i){return e[0]=t,e[1]=r,e[2]=i,e}function c(e,t,r){return e[0]=t[0]+r[0],e[1]=t[1]+r[1],e[2]=t[2]+r[2],e}function l(e,t,r){return e[0]=t[0]-r[0],e[1]=t[1]-r[1],e[2]=t[2]-r[2],e}function u(e,t,r){return e[0]=t[0]*r[0],e[1]=t[1]*r[1],e[2]=t[2]*r[2],e}function d(e,t,r){return e[0]=t[0]/r[0],e[1]=t[1]/r[1],e[2]=t[2]/r[2],e}function h(e,t,r){return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e}function p(e,t,r,i){return e[0]=t[0]+r[0]*i,e[1]=t[1]+r[1]*i,e[2]=t[2]+r[2]*i,e}function f(e,t){var r=t[0]-e[0],i=t[1]-e[1],n=t[2]-e[2];return Math.sqrt(r*r+i*i+n*n)}function b(e,t){var r=t[0]-e[0],i=t[1]-e[1],n=t[2]-e[2];return r*r+i*i+n*n}function v(e){var t=e[0],r=e[1],i=e[2];return t*t+r*r+i*i}function m(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e}function g(e,t){var r=t[0],i=t[1],n=t[2],a=r*r+i*i+n*n;return a>0&&(a=1/Math.sqrt(a),e[0]=t[0]*a,e[1]=t[1]*a,e[2]=t[2]*a),e}function y(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function O(e,t,r){var i=t[0],n=t[1],a=t[2],o=r[0],s=r[1],c=r[2];return e[0]=n*c-a*s,e[1]=a*o-i*c,e[2]=i*s-n*o,e}function j(e,t,r,i){var n=t[0],a=t[1],o=t[2];return e[0]=n+i*(r[0]-n),e[1]=a+i*(r[1]-a),e[2]=o+i*(r[2]-o),e}function _(e,t,r){var i=t[0],n=t[1],a=t[2];return e[0]=r[0]*i+r[4]*n+r[8]*a+r[12],e[1]=r[1]*i+r[5]*n+r[9]*a+r[13],e[2]=r[2]*i+r[6]*n+r[10]*a+r[14],e}function w(e,t,r){var i=t[0],n=t[1],a=t[2];return e[0]=i*r[0]+n*r[3]+a*r[6],e[1]=i*r[1]+n*r[4]+a*r[7],e[2]=i*r[2]+n*r[5]+a*r[8],e}function x(e,t,r){var i=r[0],n=r[1],a=r[2],o=r[3],s=t[0],c=t[1],l=t[2],u=n*l-a*c,d=a*s-i*l,h=i*c-n*s,p=n*h-a*d,f=a*u-i*h,b=i*d-n*u,v=2*o;return u*=v,d*=v,h*=v,p*=2,f*=2,b*=2,e[0]=s+u+p,e[1]=c+d+f,e[2]=l+h+b,e}function S(e,t,r,i){var n=[],a=[];return n[0]=t[0]-r[0],n[1]=t[1]-r[1],n[2]=t[2]-r[2],a[0]=n[0]*Math.cos(i)-n[1]*Math.sin(i),a[1]=n[0]*Math.sin(i)+n[1]*Math.cos(i),a[2]=n[2],e[0]=a[0]+r[0],e[1]=a[1]+r[1],e[2]=a[2]+r[2],e}var M=Object(i.e)(),T=Object(i.e)();function P(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]}var E=l,C=u,A=d,I=f,k=b,F=a,R=v;Object.freeze({__proto__:null,length:a,copy:o,set:s,add:c,subtract:l,multiply:u,divide:d,ceil:function(e,t){return e[0]=Math.ceil(t[0]),e[1]=Math.ceil(t[1]),e[2]=Math.ceil(t[2]),e},floor:function(e,t){return e[0]=Math.floor(t[0]),e[1]=Math.floor(t[1]),e[2]=Math.floor(t[2]),e},min:function(e,t,r){return e[0]=Math.min(t[0],r[0]),e[1]=Math.min(t[1],r[1]),e[2]=Math.min(t[2],r[2]),e},max:function(e,t,r){return e[0]=Math.max(t[0],r[0]),e[1]=Math.max(t[1],r[1]),e[2]=Math.max(t[2],r[2]),e},round:function(e,t){return e[0]=Math.round(t[0]),e[1]=Math.round(t[1]),e[2]=Math.round(t[2]),e},scale:h,scaleAndAdd:p,distance:f,squaredDistance:b,squaredLength:v,negate:m,inverse:function(e,t){return e[0]=1/t[0],e[1]=1/t[1],e[2]=1/t[2],e},normalize:g,dot:y,cross:O,lerp:j,hermite:function(e,t,r,i,n,a){var o=a*a,s=o*(2*a-3)+1,c=o*(a-2)+a,l=o*(a-1),u=o*(3-2*a);return e[0]=t[0]*s+r[0]*c+i[0]*l+n[0]*u,e[1]=t[1]*s+r[1]*c+i[1]*l+n[1]*u,e[2]=t[2]*s+r[2]*c+i[2]*l+n[2]*u,e},bezier:function(e,t,r,i,n,a){var o=1-a,s=o*o,c=a*a,l=s*o,u=3*a*s,d=3*c*o,h=c*a;return e[0]=t[0]*l+r[0]*u+i[0]*d+n[0]*h,e[1]=t[1]*l+r[1]*u+i[1]*d+n[1]*h,e[2]=t[2]*l+r[2]*u+i[2]*d+n[2]*h,e},random:function(e,t){t=t||1;var r=2*Object(n.b)()*Math.PI,i=2*Object(n.b)()-1,a=Math.sqrt(1-i*i)*t;return e[0]=Math.cos(r)*a,e[1]=Math.sin(r)*a,e[2]=i*t,e},transformMat4:_,transformMat3:w,transformQuat:x,rotateX:function(e,t,r,i){var n=[],a=[];return n[0]=t[0]-r[0],n[1]=t[1]-r[1],n[2]=t[2]-r[2],a[0]=n[0],a[1]=n[1]*Math.cos(i)-n[2]*Math.sin(i),a[2]=n[1]*Math.sin(i)+n[2]*Math.cos(i),e[0]=a[0]+r[0],e[1]=a[1]+r[1],e[2]=a[2]+r[2],e},rotateY:function(e,t,r,i){var n=[],a=[];return n[0]=t[0]-r[0],n[1]=t[1]-r[1],n[2]=t[2]-r[2],a[0]=n[2]*Math.sin(i)+n[0]*Math.cos(i),a[1]=n[1],a[2]=n[2]*Math.cos(i)-n[0]*Math.sin(i),e[0]=a[0]+r[0],e[1]=a[1]+r[1],e[2]=a[2]+r[2],e},rotateZ:S,angle:function(e,t){o(M,e),o(T,t),g(M,M),g(T,T);var r=y(M,T);return r>1?0:r<-1?Math.PI:Math.acos(r)},str:function(e){return"vec3("+e[0]+", "+e[1]+", "+e[2]+")"},exactEquals:P,equals:function(e,t){var r=e[0],i=e[1],a=e[2],o=t[0],s=t[1],c=t[2];return Math.abs(r-o)<=n.a*Math.max(1,Math.abs(r),Math.abs(o))&&Math.abs(i-s)<=n.a*Math.max(1,Math.abs(i),Math.abs(s))&&Math.abs(a-c)<=n.a*Math.max(1,Math.abs(a),Math.abs(c))},sub:E,mul:C,div:A,dist:I,sqrDist:k,len:F,sqrLen:R})},function(e,t,r){"use strict";r.d(t,"a",(function(){return x})),r.d(t,"b",(function(){return S})),r.d(t,"c",(function(){return h})),r.d(t,"d",(function(){return p})),r.d(t,"e",(function(){return b})),r.d(t,"f",(function(){return f})),r.d(t,"g",(function(){return y})),r.d(t,"h",(function(){return j})),r.d(t,"i",(function(){return w})),r.d(t,"j",(function(){return v})),r.d(t,"k",(function(){return g})),r.d(t,"l",(function(){return O})),r.d(t,"m",(function(){return m})),r.d(t,"n",(function(){return _}));var i=r(89),n=r(143),a=r(257),o={102113:!0,102100:!0,3857:!0,3785:!0},s={102113:!0,102100:!0,3857:!0,3785:!0,4326:!0},c='PROJCS["WGS_1984_Web_Mercator_Auxiliary_Sphere",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator_Auxiliary_Sphere"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],PARAMETER["Auxiliary_Sphere_Type",0.0],UNIT["Meter",1.0]]',l=[-20037508.342788905,20037508.342788905],u=[-20037508.342787,20037508.342787],d={102113:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator",GEOGCS["GCS_WGS_1984_Major_Auxiliary_Sphere",DATUM["D_WGS_1984_Major_Auxiliary_Sphere",SPHEROID["WGS_1984_Major_Auxiliary_Sphere",6378137.0,0.0]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],UNIT["Meter",1.0]]',valid:l,origin:u,dx:1e-5},102100:{wkTemplate:c,valid:l,origin:u,dx:1e-5},3785:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator",GEOGCS["GCS_WGS_1984_Major_Auxiliary_Sphere",DATUM["D_WGS_1984_Major_Auxiliary_Sphere",SPHEROID["WGS_1984_Major_Auxiliary_Sphere",6378137.0,0.0]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],UNIT["Meter",1.0]]',valid:l,origin:u,dx:1e-5},3857:{wkTemplate:c,valid:l,origin:u,dx:1e-5},4326:{wkTemplate:'GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",{Central_Meridian}],UNIT["Degree",0.0174532925199433]]',altTemplate:'PROJCS["WGS_1984_Plate_Carree",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Plate_Carree"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],UNIT["Degrees",111319.491]]',valid:[-180,180],origin:[-180,90],dx:1e-5},104971:{wkTemplate:'GEOGCS["Mars_2000_(Sphere)",DATUM["Mars_2000_(Sphere)",SPHEROID["Mars_2000_(Sphere)",3396190.0,0.0]],PRIMEM["Reference_Meridian",0.0],UNIT["Degree",0.0174532925199433]]',valid:[-180,180],origin:[-180,90],dx:1e-5},104905:{wkTemplate:'GEOGCS["GCS_Mars_2000",DATUM["D_Mars_2000",SPHEROID["Mars_2000_IAU_IAG",3396190.0,169.8944472236118]],PRIMEM["Reference_Meridian",0.0],UNIT["Degree",0.0174532925199433]]',valid:[-180,180],origin:[-180,90],dx:1e-5}};function h(e,t){return!Object(i.j)(e)&&!Object(i.j)(t)&&(e===t||(null!=e.wkid||null!=t.wkid?e.wkid===t.wkid||m(e)&&m(t)||null!=t.latestWkid&&e.wkid===t.latestWkid||null!=e.latestWkid&&t.wkid===e.latestWkid:!(!e.wkt||!t.wkt)&&e.wkt.toUpperCase()===t.wkt.toUpperCase()))}function p(e){return w(e)&&e.wkid?d[e.wkid]:null}function f(e){return!!w(e)&&(e.wkid?null==a.a[e.wkid]:!!e.wkt&&!!/^\s*GEOGCS/i.test(e.wkt))}function b(e){return!(y(e)||j(e))}function v(e){return w(e)&&4326===e.wkid}function m(e){return w(e)&&null!=e.wkid&&!0===o[e.wkid]}function g(e){return 104971===e||104905===e}function y(e){return w(e)&&null!=e.wkid&&g(e.wkid)}function O(e){return 104903===e}function j(e){return w(e)&&null!=e.wkid&&O(e.wkid)}function _(e){return w(e)&&null!=e.wkid&&!0===s[e.wkid]}function w(e){return Object(i.k)(e)&&(null!=e.wkid&&e.wkid>=2e3||null!=e.wkt)}var x={wkid:4326,wkt:Object(n.c)(d[4326].wkTemplate,{Central_Meridian:"0.0"})},S={wkid:102100,latestWkid:3857}},function(e,t,r){"use strict";var i=r(82),n=(r(80),r(81)),a=r(88),o=r(85),s=r(116),c=r(98),l=r(84),u=r(96),d=(r(83),r(86),r(87),r(112)),h=r(99),p=r(166);var f,b=r(161),v=[0,0];function m(e){return e&&("esri.geometry.SpatialReference"===e.declaredClass||null!=e.wkid)}var g=n.a.getLogger("esri.geometry.Point"),y=f=class extends p.a{constructor(...e){super(...e),this.x=0,this.y=0,this.z=void 0,this.m=void 0,this.type="point"}static copy(e,t){t._set("x",e._get("x")),t._set("y",e._get("y")),t._set("z",e._get("z")),t._set("m",e._get("m"));var r=e._get("spatialReference");t._set("spatialReference",Object.isFrozen(r)?r:r.clone())}normalizeCtorArgs(e,t,r,i,n){var a;if(Array.isArray(e))n=t,e=(a=e)[0],t=a[1],r=a[2],i=a[3];else if(e&&"object"==typeof e){if(e=null!=(a=e).x?a.x:a.longitude,t=null!=a.y?a.y:a.latitude,r=a.z,i=a.m,(n=a.spatialReference)&&"esri.geometry.SpatialReference"!==n.declaredClass&&(n=new h.a(n)),null!=a.longitude||null!=a.latitude)if(null==a.longitude)g.warn(".longitude=","Latitude was defined without longitude");else if(null==a.latitude)g.warn(".latitude=","Longitude was defined without latitude");else if(!a.declaredClass&&n&&n.isWebMercator){var o=Object(b.c)(a.longitude,a.latitude,v);e=o[0],t=o[1]}}else m(r)?(n=r,r=null):m(i)&&(n=i,i=null);var s={x:e,y:t};return null==s.x&&null!=s.y?g.warn(".y=","Y coordinate was defined without an X coordinate"):null==s.y&&null!=s.x&&g.warn(".x=","X coordinate was defined without a Y coordinate"),null!=n&&(s.spatialReference=n),null!=r&&(s.z=r),null!=i&&(s.m=i),s}get cache(){return this.commitProperty("x"),this.commitProperty("y"),this.commitProperty("z"),this.commitProperty("m"),this.commitProperty("spatialReference"),{}}get hasM(){return void 0!==this.m}set hasM(e){e!==(void 0!==this._get("m"))&&(this._set("m",e?0:void 0),this._set("hasM",e))}get hasZ(){return void 0!==this.z}set hasZ(e){e!==(void 0!==this._get("z"))&&(this._set("z",e?0:void 0),this._set("hasZ",e))}get latitude(){var{spatialReference:e,x:t,y:r}=this;if(e){if(e.isWebMercator)return Object(b.g)(t,r,v)[1];if(e.isGeographic)return r}return null}set latitude(e){var{spatialReference:t,x:r}=this;t&&(t.isWebMercator?this._set("y",Object(b.c)(r,e,v)[1]):t.isGeographic&&this._set("y",e),this._set("latitude",e))}get longitude(){var{x:e,y:t,spatialReference:r}=this;if(r){if(r.isWebMercator)return Object(b.g)(e,t,v)[0];if(r.isGeographic)return e}return NaN}set longitude(e){var{y:t,spatialReference:r}=this;r&&(r.isWebMercator?this._set("x",Object(b.c)(e,t,v)[0]):r.isGeographic&&this._set("x",e),this._set("longitude",e))}writeX(e,t,r){t[r]=isNaN(e)?"NaN":e}readX(e){return"string"==typeof e?NaN:e}clone(){var e=new f;return e.x=this.x,e.y=this.y,e.z=this.z,e.m=this.m,e.spatialReference=this.spatialReference,e}copy(e){return f.copy(e,this),this}equals(e){if(!e)return!1;var{x:t,y:r,z:i,m:n,spatialReference:a}=this,{z:o,m:s}=e,{x:c,y:l,spatialReference:u}=e;if(!a.equals(u))if(a.isWebMercator&&u.isWGS84)[c,l]=Object(b.c)(c,l),u=a;else{if(!a.isWGS84||!u.isWebMercator)return!1;[c,l]=Object(b.g)(c,l),u=a}return t===c&&r===l&&i===o&&n===s&&a.wkid===u.wkid}offset(e,t,r){return function(e,t,r,i){return e.x=e.x+t,e.y=e.y+r,null!=i&&null!=e.z&&(e.z=e.z+i),e}(this,e,t,r)}normalize(){if(!this.spatialReference)return this;var e=Object(d.d)(this.spatialReference);if(!e)return this;var t=this.x,[r,i]=e.valid,n=2*i;return t>i?t-=Math.ceil(Math.abs(t-i)/n)*n:t<r&&(t+=Math.ceil(Math.abs(t-r)/n)*n),this._set("x",t),this}distance(e){return function(e,t){var r=e.x-t.x,i=e.y-t.y,n=e.hasZ&&t.hasZ?e.z-t.z:0;return Math.sqrt(r*r+i*i+n*n)}(this,e)}toArray(){var e=this.hasZ,t=this.hasM;return e&&t?[this.x,this.y,this.z,this.m]:e?[this.x,this.y,this.z]:t?[this.x,this.y,this.m]:[this.x,this.y]}toJSON(e){return this.write(null,e)}};Object(i.a)([Object(o.b)({readOnly:!0})],y.prototype,"cache",null),Object(i.a)([Object(o.b)({type:Boolean,json:{read:!1,write:{enabled:!1,overridePolicy:null}}})],y.prototype,"hasM",null),Object(i.a)([Object(o.b)({type:Boolean,json:{read:!1,write:{enabled:!1,overridePolicy:null}}})],y.prototype,"hasZ",null),Object(i.a)([Object(o.b)({type:Number})],y.prototype,"latitude",null),Object(i.a)([Object(o.b)({type:Number})],y.prototype,"longitude",null),Object(i.a)([Object(o.b)({type:Number,json:{type:[Number,String],write:{isRequired:!0,allowNull:!0}}}),Object(s.a)((e=>isNaN(e)?e:Object(a.i)(e)))],y.prototype,"x",void 0),Object(i.a)([Object(u.a)("x")],y.prototype,"writeX",null),Object(i.a)([Object(c.a)("x")],y.prototype,"readX",null),Object(i.a)([Object(o.b)({type:Number,json:{write:!0}})],y.prototype,"y",void 0),Object(i.a)([Object(o.b)({type:Number,json:{write:{overridePolicy(){return{enabled:this.hasZ}}}}})],y.prototype,"z",void 0),Object(i.a)([Object(o.b)({type:Number,json:{write:{overridePolicy(){return{enabled:this.hasM}}}}})],y.prototype,"m",void 0),(y=f=Object(i.a)([Object(l.a)("esri.geometry.Point")],y)).prototype.toJSON.isDefaultToJSON=!0;var O=y;t.a=O},function(e,t,r){"use strict";r.d(t,"a",(function(){return Oe})),r.d(t,"b",(function(){return xe})),r.d(t,"c",(function(){return _e})),r.d(t,"d",(function(){return Ee})),r.d(t,"e",(function(){return Ce})),r.d(t,"f",(function(){return je})),r.d(t,"g",(function(){return Pe})),r.d(t,"h",(function(){return Te})),r.d(t,"i",(function(){return we}));r(80);var i=r(81),n=r(315);var a,o,s=Function.prototype,c=Object.prototype,l=s.toString,u=c.hasOwnProperty,d=l.call(Object),h=c.toString,p=(a=Object.getPrototypeOf,o=Object,function(e){return a(o(e))});var f=function(e){if(!function(e){return!!e&&"object"==typeof e}(e)||"[object Object]"!=h.call(e)||function(e){var t=!1;if(null!=e&&"function"!=typeof e.toString)try{t=!!(e+"")}catch(r){}return t}(e))return!1;var t=p(e);if(null===t)return!0;var r=u.call(t,"constructor")&&t.constructor;return"function"==typeof r&&r instanceof r&&l.call(r)==d};function b(e,t,r){return e(r={path:t,exports:{},require:function(e,t){return function(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}((void 0===t||null===t)&&r.path)}},r.exports),r.exports}function v(){var e={"align-content":!1,"align-items":!1,"align-self":!1,"alignment-adjust":!1,"alignment-baseline":!1,all:!1,"anchor-point":!1,animation:!1,"animation-delay":!1,"animation-direction":!1,"animation-duration":!1,"animation-fill-mode":!1,"animation-iteration-count":!1,"animation-name":!1,"animation-play-state":!1,"animation-timing-function":!1,azimuth:!1,"backface-visibility":!1,background:!0,"background-attachment":!0,"background-clip":!0,"background-color":!0,"background-image":!0,"background-origin":!0,"background-position":!0,"background-repeat":!0,"background-size":!0,"baseline-shift":!1,binding:!1,bleed:!1,"bookmark-label":!1,"bookmark-level":!1,"bookmark-state":!1,border:!0,"border-bottom":!0,"border-bottom-color":!0,"border-bottom-left-radius":!0,"border-bottom-right-radius":!0,"border-bottom-style":!0,"border-bottom-width":!0,"border-collapse":!0,"border-color":!0,"border-image":!0,"border-image-outset":!0,"border-image-repeat":!0,"border-image-slice":!0,"border-image-source":!0,"border-image-width":!0,"border-left":!0,"border-left-color":!0,"border-left-style":!0,"border-left-width":!0,"border-radius":!0,"border-right":!0,"border-right-color":!0,"border-right-style":!0,"border-right-width":!0,"border-spacing":!0,"border-style":!0,"border-top":!0,"border-top-color":!0,"border-top-left-radius":!0,"border-top-right-radius":!0,"border-top-style":!0,"border-top-width":!0,"border-width":!0,bottom:!1,"box-decoration-break":!0,"box-shadow":!0,"box-sizing":!0,"box-snap":!0,"box-suppress":!0,"break-after":!0,"break-before":!0,"break-inside":!0,"caption-side":!1,chains:!1,clear:!0,clip:!1,"clip-path":!1,"clip-rule":!1,color:!0,"color-interpolation-filters":!0,"column-count":!1,"column-fill":!1,"column-gap":!1,"column-rule":!1,"column-rule-color":!1,"column-rule-style":!1,"column-rule-width":!1,"column-span":!1,"column-width":!1,columns:!1,contain:!1,content:!1,"counter-increment":!1,"counter-reset":!1,"counter-set":!1,crop:!1,cue:!1,"cue-after":!1,"cue-before":!1,cursor:!1,direction:!1,display:!0,"display-inside":!0,"display-list":!0,"display-outside":!0,"dominant-baseline":!1,elevation:!1,"empty-cells":!1,filter:!1,flex:!1,"flex-basis":!1,"flex-direction":!1,"flex-flow":!1,"flex-grow":!1,"flex-shrink":!1,"flex-wrap":!1,float:!1,"float-offset":!1,"flood-color":!1,"flood-opacity":!1,"flow-from":!1,"flow-into":!1,font:!0,"font-family":!0,"font-feature-settings":!0,"font-kerning":!0,"font-language-override":!0,"font-size":!0,"font-size-adjust":!0,"font-stretch":!0,"font-style":!0,"font-synthesis":!0,"font-variant":!0,"font-variant-alternates":!0,"font-variant-caps":!0,"font-variant-east-asian":!0,"font-variant-ligatures":!0,"font-variant-numeric":!0,"font-variant-position":!0,"font-weight":!0,grid:!1,"grid-area":!1,"grid-auto-columns":!1,"grid-auto-flow":!1,"grid-auto-rows":!1,"grid-column":!1,"grid-column-end":!1,"grid-column-start":!1,"grid-row":!1,"grid-row-end":!1,"grid-row-start":!1,"grid-template":!1,"grid-template-areas":!1,"grid-template-columns":!1,"grid-template-rows":!1,"hanging-punctuation":!1,height:!0,hyphens:!1,icon:!1,"image-orientation":!1,"image-resolution":!1,"ime-mode":!1,"initial-letters":!1,"inline-box-align":!1,"justify-content":!1,"justify-items":!1,"justify-self":!1,left:!1,"letter-spacing":!0,"lighting-color":!0,"line-box-contain":!1,"line-break":!1,"line-grid":!1,"line-height":!1,"line-snap":!1,"line-stacking":!1,"line-stacking-ruby":!1,"line-stacking-shift":!1,"line-stacking-strategy":!1,"list-style":!0,"list-style-image":!0,"list-style-position":!0,"list-style-type":!0,margin:!0,"margin-bottom":!0,"margin-left":!0,"margin-right":!0,"margin-top":!0,"marker-offset":!1,"marker-side":!1,marks:!1,mask:!1,"mask-box":!1,"mask-box-outset":!1,"mask-box-repeat":!1,"mask-box-slice":!1,"mask-box-source":!1,"mask-box-width":!1,"mask-clip":!1,"mask-image":!1,"mask-origin":!1,"mask-position":!1,"mask-repeat":!1,"mask-size":!1,"mask-source-type":!1,"mask-type":!1,"max-height":!0,"max-lines":!1,"max-width":!0,"min-height":!0,"min-width":!0,"move-to":!1,"nav-down":!1,"nav-index":!1,"nav-left":!1,"nav-right":!1,"nav-up":!1,"object-fit":!1,"object-position":!1,opacity:!1,order:!1,orphans:!1,outline:!1,"outline-color":!1,"outline-offset":!1,"outline-style":!1,"outline-width":!1,overflow:!1,"overflow-wrap":!1,"overflow-x":!1,"overflow-y":!1,padding:!0,"padding-bottom":!0,"padding-left":!0,"padding-right":!0,"padding-top":!0,page:!1,"page-break-after":!1,"page-break-before":!1,"page-break-inside":!1,"page-policy":!1,pause:!1,"pause-after":!1,"pause-before":!1,perspective:!1,"perspective-origin":!1,pitch:!1,"pitch-range":!1,"play-during":!1,position:!1,"presentation-level":!1,quotes:!1,"region-fragment":!1,resize:!1,rest:!1,"rest-after":!1,"rest-before":!1,richness:!1,right:!1,rotation:!1,"rotation-point":!1,"ruby-align":!1,"ruby-merge":!1,"ruby-position":!1,"shape-image-threshold":!1,"shape-outside":!1,"shape-margin":!1,size:!1,speak:!1,"speak-as":!1,"speak-header":!1,"speak-numeral":!1,"speak-punctuation":!1,"speech-rate":!1,stress:!1,"string-set":!1,"tab-size":!1,"table-layout":!1,"text-align":!0,"text-align-last":!0,"text-combine-upright":!0,"text-decoration":!0,"text-decoration-color":!0,"text-decoration-line":!0,"text-decoration-skip":!0,"text-decoration-style":!0,"text-emphasis":!0,"text-emphasis-color":!0,"text-emphasis-position":!0,"text-emphasis-style":!0,"text-height":!0,"text-indent":!0,"text-justify":!0,"text-orientation":!0,"text-overflow":!0,"text-shadow":!0,"text-space-collapse":!0,"text-transform":!0,"text-underline-position":!0,"text-wrap":!0,top:!1,transform:!1,"transform-origin":!1,"transform-style":!1,transition:!1,"transition-delay":!1,"transition-duration":!1,"transition-property":!1,"transition-timing-function":!1,"unicode-bidi":!1,"vertical-align":!1,visibility:!1,"voice-balance":!1,"voice-duration":!1,"voice-family":!1,"voice-pitch":!1,"voice-range":!1,"voice-rate":!1,"voice-stress":!1,"voice-volume":!1,volume:!1,"white-space":!1,widows:!1,width:!0,"will-change":!1,"word-break":!0,"word-spacing":!0,"word-wrap":!0,"wrap-flow":!1,"wrap-through":!1,"writing-mode":!1,"z-index":!1};return e}var m=/javascript\s*\:/gim;var g={whiteList:v(),getDefaultWhiteList:v,onAttr:function(e,t,r){},onIgnoreAttr:function(e,t,r){},safeAttrValue:function(e,t){return m.test(t)?"":t}},y=function(e){return String.prototype.trim?e.trim():e.replace(/(^\s*)|(\s*$)/g,"")},O=function(e){return String.prototype.trimRight?e.trimRight():e.replace(/(\s*$)/g,"")};var j=function(e,t){";"!==(e=O(e))[e.length-1]&&(e+=";");var r=e.length,i=!1,n=0,a=0,o="";function s(){if(!i){var r=y(e.slice(n,a)),s=r.indexOf(":");if(-1!==s){var c=y(r.slice(0,s)),l=y(r.slice(s+1));if(c){var u=t(n,o.length,c,l,r);u&&(o+=u+"; ")}}}n=a+1}for(;a<r;a++){var c=e[a];if("/"===c&&"*"===e[a+1]){var l=e.indexOf("*/",a+2);if(-1===l)break;n=(a=l+1)+1,i=!1}else"("===c?i=!0:")"===c?i=!1:";"===c?i||s():"\n"===c&&s()}return y(o)};function _(e){return void 0===e||null===e}function w(e){(e=function(e){var t={};for(var r in e)t[r]=e[r];return t}(e||{})).whiteList=e.whiteList||g.whiteList,e.onAttr=e.onAttr||g.onAttr,e.onIgnoreAttr=e.onIgnoreAttr||g.onIgnoreAttr,e.safeAttrValue=e.safeAttrValue||g.safeAttrValue,this.options=e}w.prototype.process=function(e){if(!(e=(e=e||"").toString()))return"";var t=this.options,r=t.whiteList,i=t.onAttr,n=t.onIgnoreAttr,a=t.safeAttrValue;return j(e,(function(e,t,o,s,c){var l=r[o],u=!1;if(!0===l?u=l:"function"===typeof l?u=l(s):l instanceof RegExp&&(u=l.test(s)),!0!==u&&(u=!1),s=a(o,s)){var d,h={position:t,sourcePosition:e,source:c,isWhite:u};return u?_(d=i(o,s,h))?o+":"+s:d:_(d=n(o,s,h))?void 0:d}}))};var x=w,S=b((function(e,t){for(var r in(t=e.exports=function(e,t){return new x(t).process(e)}).FilterCSS=x,g)t[r]=g[r]})),M=function(e,t){var r,i;if(Array.prototype.indexOf)return e.indexOf(t);for(r=0,i=e.length;r<i;r++)if(e[r]===t)return r;return-1},T=function(e,t,r){var i,n;if(Array.prototype.forEach)return e.forEach(t,r);for(i=0,n=e.length;i<n;i++)t.call(r,e[i],i,e)},P=function(e){return String.prototype.trim?e.trim():e.replace(/(^\s*)|(\s*$)/g,"")},E=function(e){var t=/\s|\n|\t/.exec(e);return t?t.index:-1},C=S.FilterCSS,A=S.getDefaultWhiteList;function I(){return{a:["target","href","title"],abbr:["title"],address:[],area:["shape","coords","href","alt"],article:[],aside:[],audio:["autoplay","controls","loop","preload","src"],b:[],bdi:["dir"],bdo:["dir"],big:[],blockquote:["cite"],br:[],caption:[],center:[],cite:[],code:[],col:["align","valign","span","width"],colgroup:["align","valign","span","width"],dd:[],del:["datetime"],details:["open"],div:[],dl:[],dt:[],em:[],font:["color","size","face"],footer:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],header:[],hr:[],i:[],img:["src","alt","title","width","height"],ins:["datetime"],li:[],mark:[],nav:[],ol:[],p:[],pre:[],s:[],section:[],small:[],span:[],sub:[],sup:[],strong:[],table:["width","border","align","valign"],tbody:["align","valign"],td:["width","rowspan","colspan","align","valign"],tfoot:["align","valign"],th:["width","rowspan","colspan","align","valign"],thead:["align","valign"],tr:["rowspan","align","valign"],tt:[],u:[],ul:[],video:["autoplay","controls","loop","preload","src","height","width"]}}var k=new C;function F(e){return e.replace(R,"&lt;").replace(D,"&gt;")}var R=/</g,D=/>/g,L=/"/g,N=/&quot;/g,V=/&#([a-zA-Z0-9]*);?/gim,z=/&colon;?/gim,G=/&newline;?/gim,U=/((j\s*a\s*v\s*a|v\s*b|l\s*i\s*v\s*e)\s*s\s*c\s*r\s*i\s*p\s*t\s*|m\s*o\s*c\s*h\s*a)\:/gi,q=/e\s*x\s*p\s*r\s*e\s*s\s*s\s*i\s*o\s*n\s*\(.*/gi,H=/u\s*r\s*l\s*\(.*/gi;function B(e){return e.replace(L,"&quot;")}function W(e){return e.replace(N,'"')}function J(e){return e.replace(V,(function(e,t){return"x"===t[0]||"X"===t[0]?String.fromCharCode(parseInt(t.substr(1),16)):String.fromCharCode(parseInt(t,10))}))}function Z(e){return e.replace(z,":").replace(G," ")}function X(e){for(var t="",r=0,i=e.length;r<i;r++)t+=e.charCodeAt(r)<32?" ":e.charAt(r);return P(t)}function Y(e){return e=X(e=Z(e=J(e=W(e))))}function Q(e){return e=F(e=B(e))}var K=/<!--[\s\S]*?-->/g;var $={whiteList:{a:["target","href","title"],abbr:["title"],address:[],area:["shape","coords","href","alt"],article:[],aside:[],audio:["autoplay","controls","loop","preload","src"],b:[],bdi:["dir"],bdo:["dir"],big:[],blockquote:["cite"],br:[],caption:[],center:[],cite:[],code:[],col:["align","valign","span","width"],colgroup:["align","valign","span","width"],dd:[],del:["datetime"],details:["open"],div:[],dl:[],dt:[],em:[],font:["color","size","face"],footer:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],header:[],hr:[],i:[],img:["src","alt","title","width","height"],ins:["datetime"],li:[],mark:[],nav:[],ol:[],p:[],pre:[],s:[],section:[],small:[],span:[],sub:[],sup:[],strong:[],table:["width","border","align","valign"],tbody:["align","valign"],td:["width","rowspan","colspan","align","valign"],tfoot:["align","valign"],th:["width","rowspan","colspan","align","valign"],thead:["align","valign"],tr:["rowspan","align","valign"],tt:[],u:[],ul:[],video:["autoplay","controls","loop","preload","src","height","width"]},getDefaultWhiteList:I,onTag:function(e,t,r){},onIgnoreTag:function(e,t,r){},onTagAttr:function(e,t,r){},onIgnoreTagAttr:function(e,t,r){},safeAttrValue:function(e,t,r,i){if(r=Y(r),"href"===t||"src"===t){if("#"===(r=P(r)))return"#";if("http://"!==r.substr(0,7)&&"https://"!==r.substr(0,8)&&"mailto:"!==r.substr(0,7)&&"tel:"!==r.substr(0,4)&&"data:image/"!==r.substr(0,11)&&"ftp://"!==r.substr(0,6)&&"./"!==r.substr(0,2)&&"../"!==r.substr(0,3)&&"#"!==r[0]&&"/"!==r[0])return""}else if("background"===t){if(U.lastIndex=0,U.test(r))return""}else if("style"===t){if(q.lastIndex=0,q.test(r))return"";if(H.lastIndex=0,H.test(r)&&(U.lastIndex=0,U.test(r)))return"";!1!==i&&(r=(i=i||k).process(r))}return r=Q(r)},escapeHtml:F,escapeQuote:B,unescapeQuote:W,escapeHtmlEntities:J,escapeDangerHtml5Entities:Z,clearNonPrintableCharacter:X,friendlyAttrValue:Y,escapeAttrValue:Q,onIgnoreTagStripAll:function(){return""},StripTagBody:function(e,t){"function"!==typeof t&&(t=function(){});var r=!Array.isArray(e),i=[],n=!1;return{onIgnoreTag:function(a,o,s){if(function(t){return!!r||-1!==M(e,t)}(a)){if(s.isClosing){var c="[/removed]",l=s.position+c.length;return i.push([!1!==n?n:s.position,l]),n=!1,c}return n||(n=s.position),"[removed]"}return t(a,o,s)},remove:function(e){var t="",r=0;return T(i,(function(i){t+=e.slice(r,i[0]),r=i[1]})),t+=e.slice(r)}}},stripCommentTag:function(e){return e.replace(K,"")},stripBlankChar:function(e){var t=e.split("");return(t=t.filter((function(e){var t=e.charCodeAt(0);return 127!==t&&(!(t<=31)||(10===t||13===t))}))).join("")},cssFilter:k,getDefaultCSSWhiteList:A};function ee(e){var t=E(e);if(-1===t)var r=e.slice(1,-1);else r=e.slice(1,t+1);return"/"===(r=P(r).toLowerCase()).slice(0,1)&&(r=r.slice(1)),"/"===r.slice(-1)&&(r=r.slice(0,-1)),r}function te(e){return"</"===e.slice(0,2)}var re=/[^a-zA-Z0-9_:\.\-]/gim;function ie(e,t){for(;t<e.length;t++){var r=e[t];if(" "!==r)return"="===r?t:-1}}function ne(e,t){for(;t>0;t--){var r=e[t];if(" "!==r)return"="===r?t:-1}}function ae(e){return function(e){return'"'===e[0]&&'"'===e[e.length-1]||"'"===e[0]&&"'"===e[e.length-1]}(e)?e.substr(1,e.length-2):e}var oe={parseTag:function(e,t,r){var i="",n=0,a=!1,o=!1,s=0,c=e.length,l="",u="";e:for(s=0;s<c;s++){var d=e.charAt(s);if(!1===a){if("<"===d){a=s;continue}}else if(!1===o){if("<"===d){i+=r(e.slice(n,s)),a=s,n=s;continue}if(">"===d){i+=r(e.slice(n,a)),l=ee(u=e.slice(a,s+1)),i+=t(a,i.length,l,u,te(u)),n=s+1,a=!1;continue}if('"'===d||"'"===d)for(var h=1,p=e.charAt(s-h);" "===p||"="===p;){if("="===p){o=d;continue e}p=e.charAt(s-++h)}}else if(d===o){o=!1;continue}}return n<e.length&&(i+=r(e.substr(n))),i},parseAttr:function(e,t){var r=0,i=[],n=!1,a=e.length;function o(e,r){if(!((e=(e=P(e)).replace(re,"").toLowerCase()).length<1)){var n=t(e,r||"");n&&i.push(n)}}for(var s=0;s<a;s++){var c,l=e.charAt(s);if(!1!==n||"="!==l)if(!1===n||s!==r||'"'!==l&&"'"!==l||"="!==e.charAt(s-1))if(/\s|\n|\t/.test(l)){if(e=e.replace(/\s|\n|\t/g," "),!1===n){if(-1===(c=ie(e,s))){o(P(e.slice(r,s))),n=!1,r=s+1;continue}s=c-1;continue}if(-1===(c=ne(e,s-1))){o(n,ae(P(e.slice(r,s)))),n=!1,r=s+1;continue}}else;else{if(-1===(c=e.indexOf(l,s+1)))break;o(n,P(e.slice(r+1,c))),n=!1,r=(s=c)+1}else n=e.slice(r,s),r=s+1}return r<e.length&&(!1===n?o(e.slice(r)):o(n,ae(P(e.slice(r))))),P(i.join(" "))}},se=S.FilterCSS,ce=oe.parseTag,le=oe.parseAttr;function ue(e){return void 0===e||null===e}function de(e){(e=function(e){var t={};for(var r in e)t[r]=e[r];return t}(e||{})).stripIgnoreTag&&(e.onIgnoreTag&&console.error('Notes: cannot use these two options "stripIgnoreTag" and "onIgnoreTag" at the same time'),e.onIgnoreTag=$.onIgnoreTagStripAll),e.whiteList=e.whiteList||$.whiteList,e.onTag=e.onTag||$.onTag,e.onTagAttr=e.onTagAttr||$.onTagAttr,e.onIgnoreTag=e.onIgnoreTag||$.onIgnoreTag,e.onIgnoreTagAttr=e.onIgnoreTagAttr||$.onIgnoreTagAttr,e.safeAttrValue=e.safeAttrValue||$.safeAttrValue,e.escapeHtml=e.escapeHtml||$.escapeHtml,this.options=e,!1===e.css?this.cssFilter=!1:(e.css=e.css||{},this.cssFilter=new se(e.css))}de.prototype.process=function(e){if(!(e=(e=e||"").toString()))return"";var t=this.options,r=t.whiteList,i=t.onTag,n=t.onIgnoreTag,a=t.onTagAttr,o=t.onIgnoreTagAttr,s=t.safeAttrValue,c=t.escapeHtml,l=this.cssFilter;t.stripBlankChar&&(e=$.stripBlankChar(e)),t.allowCommentTag||(e=$.stripCommentTag(e));var u=!1;if(t.stripIgnoreTagBody){u=$.StripTagBody(t.stripIgnoreTagBody,n);n=u.onIgnoreTag}var d=ce(e,(function(e,t,u,d,h){var p,f={sourcePosition:e,position:t,isClosing:h,isWhite:r.hasOwnProperty(u)};if(!ue(p=i(u,d,f)))return p;if(f.isWhite){if(f.isClosing)return"</"+u+">";var b=function(e){var t=E(e);if(-1===t)return{html:"",closing:"/"===e[e.length-2]};var r="/"===(e=P(e.slice(t+1,-1)))[e.length-1];return r&&(e=P(e.slice(0,-1))),{html:e,closing:r}}(d),v=r[u],m=le(b.html,(function(e,t){var r,i=-1!==M(v,e);return ue(r=a(u,e,t,i))?i?(t=s(u,e,t,l))?e+'="'+t+'"':e:ue(r=o(u,e,t,i))?void 0:r:r}));d="<"+u;return m&&(d+=" "+m),b.closing&&(d+=" /"),d+=">"}return ue(p=n(u,d,f))?c(d):p}),c);return u&&(d=u.remove(d)),d};var he,pe,fe=de,be=b((function(e,t){function r(e,t){return new fe(t).process(e)}for(var i in(t=e.exports=r).filterXSS=r,t.FilterXSS=fe,$)t[i]=$[i];for(var i in oe)t[i]=oe[i];"undefined"!==typeof self&&"undefined"!==typeof DedicatedWorkerGlobalScope&&self instanceof DedicatedWorkerGlobalScope&&(self.filterXSS=e.exports)})),ve=function(){function e(e,t){var r,i=this;this.arcgisWhiteList={a:["href","target","style"],img:["src","width","height","border","alt","style"],video:["autoplay","controls","height","loop","muted","poster","preload","width"],audio:["autoplay","controls","loop","muted","preload"],source:["media","src","type"],span:["style"],table:["width","height","cellpadding","cellspacing","border","style"],div:["style","align"],font:["size","color","style"],tr:["height","valign","align","style"],td:["height","width","valign","align","colspan","rowspan","nowrap","style"],th:["height","width","valign","align","colspan","rowspan","nowrap","style"],p:["style"],b:[],strong:[],i:[],em:[],u:[],br:[],li:[],ul:[],ol:[],hr:[],tbody:[]},this.allowedProtocols=["http","https","mailto","iform","tel","flow","lfmobile","arcgis-navigator","arcgis-appstudio-player","arcgis-survey123","arcgis-collector","arcgis-workforce","arcgis-explorer","arcgis-trek2there","mspbi","comgooglemaps","pdfefile","pdfehttp","pdfehttps","boxapp","boxemm","awb","awbs","gropen","radarscope"],this.arcgisFilterOptions={allowCommentTag:!0,safeAttrValue:function(e,t,r,n){return"a"===e&&"href"===t||("img"===e||"source"===e)&&"src"===t?i.sanitizeUrl(r):be.safeAttrValue(e,t,r,n)}},e&&!t?r=e:e&&t?(r=Object.create(this.arcgisFilterOptions),Object.keys(e).forEach((function(t){"whiteList"===t?r.whiteList=i._extendObjectOfArrays([i.arcgisWhiteList,e.whiteList||{}]):r[t]=e[t]}))):(r=Object.create(this.arcgisFilterOptions)).whiteList=this.arcgisWhiteList,this.xssFilterOptions=r,this._xssFilter=new be.FilterXSS(r)}return e.prototype.sanitize=function(e,t){switch(void 0===t&&(t={}),typeof e){case"number":return isNaN(e)||!isFinite(e)?null:e;case"boolean":return e;case"string":return this._xssFilter.process(e);case"object":return this._iterateOverObject(e,t);default:if(t.allowUndefined&&"undefined"===typeof e)return;return null}},e.prototype.sanitizeUrl=function(e){var t=this._trim(e.substring(0,e.indexOf(":")));return"/"===e||"#"===e||"#"===e[0]||this.allowedProtocols.indexOf(t.toLowerCase())>-1?be.escapeAttrValue(e):""},e.prototype.sanitizeHTMLAttribute=function(e,t,r,i){return"function"===typeof this.xssFilterOptions.safeAttrValue?this.xssFilterOptions.safeAttrValue(e,t,r,i):be.safeAttrValue(e,t,r,i)},e.prototype.validate=function(e,t){void 0===t&&(t={});var r=this.sanitize(e,t);return{isValid:e===r,sanitized:r}},e.prototype._extendObjectOfArrays=function(e){var t={};return e.forEach((function(e){Object.keys(e).forEach((function(r){Array.isArray(e[r])&&Array.isArray(t[r])?t[r]=t[r].concat(e[r]):t[r]=e[r]}))})),t},e.prototype._iterateOverObject=function(e,t){var r=this;void 0===t&&(t={});try{var i=!1,n=void 0;if(Array.isArray(e))n=e.reduce((function(e,n){var a=r.validate(n,t);return a.isValid?e.concat([n]):(i=!0,e.concat([a.sanitized]))}),[]);else{if(!f(e)){if(t.allowUndefined&&"undefined"===typeof e)return;return null}n=Object.keys(e).reduce((function(n,a){var o=e[a],s=r.validate(o,t);return s.isValid?n[a]=o:(i=!0,n[a]=s.sanitized),n}),{})}return i?n:e}catch(a){return null}},e.prototype._trim=function(e){return String.prototype.trim?e.trim():e.replace(/(^\s*)|(\s*$)/g,"")},e}(),me=function(e){he||function(e){if("WebkitTransition"in e.style)he="webkitTransitionEnd",pe="webkitAnimationEnd";else{if(!("transition"in e.style))throw new Error("Your browser is not supported!");he="transitionend",pe="animationend"}}(e)},ge=function(e,t){return void 0===t&&(t=e+"-active"),function(r){me(r);var i=!1,n=function(a){i||(i=!0,r.removeEventListener(he,n),r.removeEventListener(pe,n),r.classList.remove(e),r.classList.remove(t))};r.classList.add(e),r.addEventListener(he,n),r.addEventListener(pe,n),requestAnimationFrame((function(){r.classList.add(t)}))}},ye=function(e,t){return void 0===t&&(t=e+"-active"),function(r,i){me(r);var n=!1,a=function(e){n||(n=!0,r.removeEventListener(he,a),r.removeEventListener(pe,a),i())};r.classList.add(e),r.addEventListener(he,a),r.addEventListener(pe,a),requestAnimationFrame((function(){r.classList.add(t)}))}};function Oe(e){for(var t=n.a.acquire(),r=0;r<arguments.length;r++){var i=arguments[r],a=typeof i;if("string"===a)t.push(i);else if(Array.isArray(i))t.push.apply(t,i);else if("object"===a)for(var o in i)i[o]&&t.push(o)}var s=t.join(" ");return n.a.release(t),s}function je(){return"rtl"===document.dir}function _e(e){this[e.getAttribute("data-node-ref")]=null}function we(e){this[e.getAttribute("data-node-ref")]=e}function xe(e,t){return("enter"===e?ge:ye)(t)}i.a.getLogger("esri.widgets.support.widgetUtils");var Se=["dd","dl","dt","h1","h2","h3","h4","h5","h6","sub","sup","animate","animatetransform","circle","clippath","defs","ellipse","g","image","line","lineargradient","marker","mask","path","pattern","polygon","polyline","radialgradient","rect","stop","svg","switch","symbol","text","textpath","tspan","use"].reduce(((e,t)=>(e[t]=[],e)),{}),Me=["align","alink","alt","bgcolor","border","cellpadding","cellspacing","class","color","cols","colspan","coords","dir","face","height","hspace","ismap","lang","marginheight","marginwidth","multiple","nohref","noresize","noshade","nowrap","ref","rel","rev","rows","rowspan","scrolling","shape","span","summary","tabindex","title","usemap","valign","value","vlink","vspace","width"],Te=new ve({whiteList:Se,onTagAttr:(e,t,r)=>{var i="".concat(t,'="').concat(r,'"');if(Me.includes(t))return i},stripIgnoreTag:!0,stripIgnoreTagBody:["script","style"]},!0);function Pe(e,t){var r=e.getBoundingClientRect(),i=t.getBoundingClientRect(),n=r.top+r.height,a=i.top+i.height,o=r.top,s=i.top;(n>a||o<s)&&e.scrollIntoView({block:"end"})}function Ee(){return getComputedStyle(document.body).getPropertyValue("--esri-calcite-theme-name").replace(/\s|'|"/g,"")}function Ce(){return Ee().startsWith("dark")}},function(e,t,r){"use strict";var i=r(82),n=r(89),a=r(85),o=r(84),s=r(97),c=r(107),l=class extends s.a{constructor(e){super(e),this._groups=new Map}destroy(){this.removeAll()}get size(){var e=0;return this._groups.forEach((t=>{e+=t.length})),e}add(e,t){if(!this._isHandle(e)&&!Array.isArray(e)&&!c.a.isCollection(e))return this;var r=this._getOrCreateGroup(t);return Array.isArray(e)||c.a.isCollection(e)?e.forEach((e=>this._isHandle(e)&&r.push(e))):r.push(e),this.notifyChange("size"),this}forEach(e,t){if("function"==typeof e)this._groups.forEach((t=>t.forEach(e)));else{var r=this._getGroup(e);r&&t&&r.forEach(t)}}has(e){return this._groups.has(this._ensureGroupKey(e))}remove(e){if(Array.isArray(e)||c.a.isCollection(e))return e.forEach(this.remove,this),this;if(!this.has(e))return this;for(var t=this._getGroup(e),r=0;r<t.length;r++)t[r].remove();return this._deleteGroup(e),this.notifyChange("size"),this}removeAll(){return this._groups.forEach((e=>{for(var t=0;t<e.length;t++)e[t].remove()})),this._groups.clear(),this.notifyChange("size"),this}_isHandle(e){return e&&!!e.remove}_getOrCreateGroup(e){if(this.has(e))return this._getGroup(e);var t=[];return this._groups.set(this._ensureGroupKey(e),t),t}_getGroup(e){return Object(n.d)(this._groups.get(this._ensureGroupKey(e)))}_deleteGroup(e){return this._groups.delete(this._ensureGroupKey(e))}_ensureGroupKey(e){return e||"_default_"}};Object(i.a)([Object(a.b)({readOnly:!0})],l.prototype,"size",null);var u=l=Object(i.a)([Object(o.a)("esri.core.Handles")],l);t.a=u},function(e,t,r){"use strict";r.d(t,"a",(function(){return c}));var i=r(88),n=r(294),a=Object.prototype.toString;function o(e){var t="__accessorMetadata__"in e?Object(i.m)(e):e;return function(...e){if(e.push(t),"number"==typeof e[2])throw new Error("Using @cast has parameter decorator is not supported since 4.16");return s.apply(this,e)}}function s(e,t,r,i){Object(n.b)(e,t).cast=i}function c(...e){if(3!==e.length||"string"!=typeof e[1])return 1===e.length&&"[object Function]"===a.call(e[0])?o(e[0]):1===e.length&&"string"==typeof e[0]?function(e){return function(t,r){Object(n.b)(t,e).cast=t[r]}}(e[0]):void 0}},function(e,t,r){"use strict";r.d(t,"a",(function(){return H})),r.d(t,"b",(function(){return S})),r.d(t,"c",(function(){return T})),r.d(t,"d",(function(){return G})),r.d(t,"e",(function(){return V})),r.d(t,"f",(function(){return N})),r.d(t,"g",(function(){return D})),r.d(t,"h",(function(){return z})),r.d(t,"i",(function(){return L})),r.d(t,"j",(function(){return u})),r.d(t,"k",(function(){return M})),r.d(t,"l",(function(){return w})),r.d(t,"m",(function(){return F})),r.d(t,"n",(function(){return B})),r.d(t,"o",(function(){return x})),r.d(t,"p",(function(){return j})),r.d(t,"q",(function(){return _})),r.d(t,"r",(function(){return k})),r.d(t,"s",(function(){return C})),r.d(t,"t",(function(){return A})),r.d(t,"u",(function(){return I})),r.d(t,"v",(function(){return P})),r.d(t,"w",(function(){return E})),r.d(t,"x",(function(){return R}));var i=r(91),n=(r(80),r(95)),a=r(257),o=r(112),s=r(99),c=r(139),l=r(173),u=39.37,d=c.a.radius*Math.PI/200,h=/UNIT\[([^\]]+)\]\]$/i,p=a.a,f=/UNIT\[([^\]]+)\]/i,b=new Set([4261,4305,4807,4810,4811,4812,4816,4819,4821,4901,4902,37225,104139,104140]),v=Object(n.b)()({meter:"meters",foot:"feet",foot_us:"us-feet",foot_clarke:"clarke-feet",yard_clarke:"clarke-yards",link_clarke:"clarke-links",yard_sears:"sears-yards",foot_sears:"sears-feet",chain_sears:"sears-chains",chain_benoit_1895_b:"benoit-1895-b-chains",yard_indian:"indian-yards",yard_indian_1937:"indian-1937-yards",foot_gold_coast:"gold-coast-feet",chain_sears_1922_truncated:"sears-1922-truncated-chains","50_kilometers":"50-kilometers","150_kilometers":"150-kilometers"}),m=e=>e*e,g=e=>e*e*e,y={length:{baseUnit:"meters",units:{millimeters:{inBaseUnits:.001},centimeters:{inBaseUnits:.01},decimeters:{inBaseUnits:.1},meters:{inBaseUnits:1},kilometers:{inBaseUnits:1e3},inches:{inBaseUnits:.0254},feet:{inBaseUnits:.3048},yards:{inBaseUnits:.9144},miles:{inBaseUnits:1609.344},"nautical-miles":{inBaseUnits:1852},"us-feet":{inBaseUnits:1200/3937}}},area:{baseUnit:"square-meters",units:{"square-millimeters":{inBaseUnits:m(.001)},"square-centimeters":{inBaseUnits:m(.01)},"square-decimeters":{inBaseUnits:m(.1)},"square-meters":{inBaseUnits:1},"square-kilometers":{inBaseUnits:m(1e3)},"square-inches":{inBaseUnits:m(.0254)},"square-feet":{inBaseUnits:m(.3048)},"square-yards":{inBaseUnits:m(.9144)},"square-miles":{inBaseUnits:m(1609.344)},"square-us-feet":{inBaseUnits:m(1200/3937)},acres:{inBaseUnits:.0015625*m(1609.344)},ares:{inBaseUnits:100},hectares:{inBaseUnits:1e4}}},volume:{baseUnit:"liters",units:{liters:{inBaseUnits:1},"cubic-millimeters":{inBaseUnits:1e3*g(.001)},"cubic-centimeters":{inBaseUnits:1e3*g(.01)},"cubic-decimeters":{inBaseUnits:1e3*g(.1)},"cubic-meters":{inBaseUnits:1e3},"cubic-kilometers":{inBaseUnits:1e3*g(1e3)},"cubic-inches":{inBaseUnits:1e3*g(.0254)},"cubic-feet":{inBaseUnits:1e3*g(.3048)},"cubic-yards":{inBaseUnits:1e3*g(.9144)},"cubic-miles":{inBaseUnits:1e3*g(1609.344)}}},angle:{baseUnit:"radians",units:{radians:{inBaseUnits:1},degrees:{inBaseUnits:Math.PI/180}}}},O=function(){var e={};for(var t in y)for(var r in y[t].units)e[r]=t;return e}();var j=["metric","imperial","square-inches","square-feet","square-yards","square-miles","square-us-feet","square-meters","square-kilometers","acres","ares","hectares"],_=["metric","imperial","inches","feet","yards","miles","nautical-miles","us-feet","meters","kilometers"];function w(e){return"imperial"===e||"metric"===e}function x(e){var t=O[e];if(t)return t;throw new Error("unknown measure")}function S(e){return function(e){return y[e].baseUnit}(x(e))}function M(e,t=null){return t=t||x(e),y[t].baseUnit===e}function T(e,t,r){if(t===r)return e;var i=x(t);if(i!==x(r))throw new Error("incompatible units");var n=M(t,i)?e:function(e,t,r){return e*y[r].units[t].inBaseUnits}(e,t,i);return M(r,i)?n:function(e,t,r){return e/y[r].units[t].inBaseUnits}(n,r,i)}function P(e,t){return T(e,t,"meters")<3e3?"meters":"kilometers"}function E(e,t){return T(e,t,"meters")<1e5?"meters":"kilometers"}function C(e,t){return T(e,t,"feet")<1e3?"feet":"miles"}function A(e,t){return T(e,t,"feet")<1e5?"feet":"miles"}function I(e,t){return T(e,t,"square-meters")<3e6?"square-meters":"square-kilometers"}function k(e,t){return T(e,t,"square-feet")<1e6?"square-feet":"square-miles"}function F(e,t,r){return T(e,t,"meters")/(r*Math.PI/180)}function R(e){return v.fromJSON(e.toLowerCase())||null}function D(e){if(e&&"object"==typeof e&&!Object(o.e)(e))return 1;var t=N(e);return t>1e5?1:t}function L(e){return N(e)>=(e instanceof s.a?Object(l.e)(e).metersPerDegree:1e5)?"meters":z(e)}function N(e,t=c.a.metersPerDegree){return V(e,!0)||t}function V(e,t=!1){var r,i,n=null;if(null!=e&&("object"==typeof e?(r=e.wkid,i=e.wkt):"number"==typeof e?r=e:"string"==typeof e&&(i=e)),r){if(Object(o.k)(r))return c.b.metersPerDegree;if(Object(o.l)(r))return c.c.metersPerDegree;!(n=p.values[p[r]])&&t&&b.has(r)&&(n=d)}else if(i)if(-1!==i.search(/^PROJCS/i)){var a=h.exec(i);a&&a[1]&&(n=parseFloat(a[1].split(",")[1]))}else if(-1!==i.search(/^GEOCCS/i)){var s=f.exec(i);s&&s[1]&&(n=parseFloat(s[1].split(",")[1]))}return n}function z(e){var t,r,i=null;if(null!=e&&("object"==typeof e?(t=e.wkid,r=e.wkt):"number"==typeof e?t=e:"string"==typeof e&&(r=e)),t)i=p.units[p[t]];else if(r&&-1!==r.search(/^PROJCS/i)){var n=h.exec(r);n&&n[1]&&(i=(n=/[\\"\\']{1}([^\\"\\']+)/.exec(n[1]))&&n[1])}return i?R(i):null}function G(e){if(!e)return null;switch(z(e)){case"feet":case"us-feet":case"clarke-feet":case"clarke-yards":case"clarke-links":case"sears-yards":case"sears-feet":case"sears-chains":case"benoit-1895-b-chains":case"indian-yards":case"indian-1937-yards":case"gold-coast-feet":case"sears-1922-truncated-chains":return"imperial";case"50-kilometers":case"150-kilometers":case"meters":return"metric";case null:case void 0:return null}return null}var U={esriAcres:"acres",esriAres:"ares",esriHectares:"hectares",esriSquareCentimeters:"square-centimeters",esriSquareDecimeters:"square-decimeters",esriSquareFeet:"square-feet",esriSquareInches:"square-inches",esriSquareKilometers:"square-kilometers",esriSquareMeters:"square-meters",esriSquareMiles:"square-miles",esriSquareMillimeters:"square-millimeters",esriSquareUsFeet:"square-us-feet",esriSquareYards:"square-yards"},q={esriCentimeters:"centimeters",esriDecimeters:"decimeters",esriFeet:"feet",esriInches:"inches",esriKilometers:"kilometers",esriMeters:"meters",esriMiles:"miles",esriMillimeters:"millimeters",esriNauticalMiles:"nautical-miles",esriYards:"yards"},H=Object(n.b)()(U),B=Object(n.b)()(q);Object(n.b)()(Object(i.a)(Object(i.a)({},U),q))},function(e,t,r){"use strict";r.d(t,"a",(function(){return Z})),r.d(t,"b",(function(){return X})),r.d(t,"c",(function(){return j})),r.d(t,"d",(function(){return S})),r.d(t,"e",(function(){return E})),r.d(t,"f",(function(){return m})),r.d(t,"g",(function(){return v})),r.d(t,"h",(function(){return A})),r.d(t,"i",(function(){return R})),r.d(t,"j",(function(){return le})),r.d(t,"k",(function(){return b})),r.d(t,"l",(function(){return d})),r.d(t,"m",(function(){return p})),r.d(t,"n",(function(){return w})),r.d(t,"o",(function(){return k})),r.d(t,"p",(function(){return F})),r.d(t,"q",(function(){return y})),r.d(t,"r",(function(){return V})),r.d(t,"s",(function(){return re})),r.d(t,"t",(function(){return O})),r.d(t,"u",(function(){return $})),r.d(t,"v",(function(){return Q})),r.d(t,"w",(function(){return K})),r.d(t,"x",(function(){return ee})),r.d(t,"y",(function(){return g})),r.d(t,"z",(function(){return te})),r.d(t,"A",(function(){return ce}));var i=r(7),n=r(124),a=r(89),o=r(93),s=r(149),c=r(152),l=["field","field2","field3","normalizationField","rotationInfo.field","proportionalSymbolInfo.field","proportionalSymbolInfo.normalizationField","colorInfo.field","colorInfo.normalizationField"],u=["field","normalizationField"];function d(e,t){if(null!=e&&null!=t)for(var r of Array.isArray(e)?e:[e])if(h(l,r,t),"visualVariables"in r&&r.visualVariables)for(var i of r.visualVariables)h(u,i,t)}function h(e,t,r){if(e)for(var i of e){var a=Object(n.b)(i,t),o=a&&"function"!=typeof a&&y(r,a);o&&Object(n.c)(i,o.name,t)}}function p(e,t){if(null!=e&&null!=t)if("startField"in e){var r=y(t,e.startField),i=y(t,e.endField);e.startField=r&&r.name||null,e.endField=i&&i.name||null}else{var n=y(t,e.startTimeField),a=y(t,e.endTimeField);e.startTimeField=n&&n.name||null,e.endTimeField=a&&a.name||null}}var f=new Set;function b(e,t){return e&&t?(f.clear(),v(f,e,t),Array.from(f).sort()):[]}function v(e,t,r){if(r)if(t&&t.length)if(r.includes("*"))for(var{name:i}of t)e.add(i);else for(var n of r)m(e,t,n);else{if(r.includes("*"))return e.clear(),void e.add("*");for(var a of r)e.add(a)}}function m(e,t,r){if(t&&t.length){var i=y(t,r);i&&e.add(i.name)}else"string"==typeof r&&e.add(r)}function g(e,t){return Object(a.j)(t)||Object(a.j)(e)?[]:t.includes("*")?e.map((e=>e.name)):t}function y(e,t){if("string"!=typeof t)return null;if(null!=e)for(var r of(t=t.toLowerCase(),e))if(r&&r.name.toLowerCase()===t)return r;return null}function O(e,t){if(!e||!t||"string"!=typeof t)return!1;for(var r of(t=t.toLowerCase(),e))if(r&&r.name.toLowerCase()===t)return!0;return!1}function j(e,t,r){return _.apply(this,arguments)}function _(){return(_=Object(i.a)((function*(e,t,r){if(r){var{arcadeUtils:i}=yield Object(c.e)(),n=i.extractFieldNames(r);for(var a of n)m(e,t,a)}}))).apply(this,arguments)}function w({displayField:e,fields:t}){return e||(t&&t.length?x(t,"name-or-title")||x(t,"unique-identifier")||x(t,"type-or-category")||function(e){for(var t of e)if(t&&t.name){var r=t.name.toLowerCase();if(r.indexOf("name")>-1||r.indexOf("title")>-1)return t.name}return null}(t):null)}function x(e,t){for(var r of e)if(r&&r.valueType&&r.valueType===t)return r.name;return null}function S(e,t){return M.apply(this,arguments)}function M(){return(M=Object(i.a)((function*(e,t){if(t){var{fields:r}=t,i=Object(n.b)("elevationInfo.featureExpressionInfo",t);return i?i.collectRequiredFields(e,r):void 0}}))).apply(this,arguments)}function T(e,t,r){return P.apply(this,arguments)}function P(){return(P=Object(i.a)((function*(e,t,r){r.outStatistic.onStatisticValueExpression?j(e,t,r.outStatistic.onStatisticValueExpression):e.add(r.outStatistic.onStatisticField)}))).apply(this,arguments)}function E(e,t,r){return C.apply(this,arguments)}function C(){return(C=Object(i.a)((function*(e,t,r){t&&r&&"cluster"===r.type&&r.fields&&(yield Promise.all(r.fields.map((r=>T(e,t.fields,r)))))}))).apply(this,arguments)}function A(e,t,r){return I.apply(this,arguments)}function I(){return(I=Object(i.a)((function*(e,t,i){if(t&&(t.timeInfo&&Object(a.k)(i)&&i.timeExtent&&v(e,t.fields,[t.timeInfo.startField,t.timeInfo.endField]),t.floorInfo&&v(e,t.fields,[t.floorInfo.floorField]),Object(a.k)(i)&&Object(a.k)(i.where)&&i.where&&"1=1"!==i.where)){var n=(yield Promise.all([r.e(11),r.e(273)]).then(r.bind(null,272))).WhereClause.create(i.where,t.fieldsIndex);if(!n.isStandardized)throw new o.a("fieldUtils:collectFilterFields","Where clause is not standardized");v(e,t.fields,n.fieldNames)}}))).apply(this,arguments)}function k(e){if(!e)return[];var t="editFieldsInfo"in e&&e.editFieldsInfo;return t?b(e.fields,[t&&t.creatorField,t&&t.creationDateField,t&&t.editorField,t&&t.editDateField]):[]}function F(e){if(!e)return[];var t=e.geometryFieldsInfo;return t?b(e.fields,[t.shapeAreaField,t.shapeLengthField]):[]}function R(e,t){return D.apply(this,arguments)}function D(){return(D=Object(i.a)((function*(e,t){var{labelingInfo:r,fields:i}=t;r&&r.length&&(yield Promise.all(r.map((t=>L(e,i,t)))))}))).apply(this,arguments)}function L(e,t,r){return N.apply(this,arguments)}function N(){return(N=Object(i.a)((function*(e,t,r){if(r){var i=r.getLabelExpression(),n=r.where;if("arcade"===i.type)yield j(e,t,i.expression);else{var a=i.expression.match(/{[^}]*}/g);a&&a.forEach((r=>{m(e,t,r.slice(1,-1))}))}var o=/['"]+/g;if(n){var s=n.split(" ");3===s.length&&m(e,t,s[0].replace(o,"")),7===s.length&&(m(e,t,s[0].replace(o,"")),m(e,t,s[4].replace(o,"")))}}}))).apply(this,arguments)}function V(e){var t=e.defaultValue;return void 0!==t&&J(e,t)?t:e.nullable?null:void 0}function z(e){return"number"==typeof e&&!isNaN(e)&&isFinite(e)}function G(e){return null===e||z(e)}var U="isInteger"in Number?Number.isInteger:e=>"number"==typeof e&&isFinite(e)&&Math.floor(e)===e;function q(e){return null===e||U(e)}function H(e){return null!=e&&"string"==typeof e}function B(e){return null===e||H(e)}function W(){return!0}function J(e,t){var r;switch(e.type){case"date":case"integer":case"long":case"small-integer":case"esriFieldTypeDate":case"esriFieldTypeInteger":case"esriFieldTypeLong":case"esriFieldTypeSmallInteger":r=e.nullable?q:U;break;case"double":case"single":case"esriFieldTypeSingle":case"esriFieldTypeDouble":r=e.nullable?G:z;break;case"string":case"esriFieldTypeString":r=e.nullable?B:H;break;default:r=W}return 1===arguments.length?r:r(t)}var Z,X,Y=new Set(["integer","small-integer","single","double","esriFieldTypeInteger","esriFieldTypeSmallInteger","esriFieldTypeSingle","esriFieldTypeDouble"]);function Q(e){return null!=e&&Y.has(e.type)}function K(e){return null!=e&&("string"===e.type||"esriFieldTypeString"===e.type)}function $(e){return null!=e&&("date"===e.type||"esriFieldTypeDate"===e.type)}function ee(e){return null==e||"number"==typeof e&&isNaN(e)?null:e}function te(e,t){return e.nullable&&null===t?null:Q(e)&&!function(e,t){var r="string"==typeof e?ie(e):e;return!!r&&(r.isInteger?U(t)&&t>=r.min&&t<=r.max:t>=r.min&&t<=r.max)}(e.type,Number(t))?Z.OUT_OF_RANGE:J(e,t)?e.domain?Object(s.e)(e.domain,t):null:X.INVALID_TYPE}function re(e){return Object(s.c)(e.domain)||(Q(e)?ie(e.type):void 0)}function ie(e){switch(e){case"esriFieldTypeSmallInteger":case"small-integer":return ne;case"esriFieldTypeInteger":case"integer":return ae;case"esriFieldTypeSingle":case"single":return oe;case"esriFieldTypeDouble":case"double":return se}}(Z||(Z={})).OUT_OF_RANGE="numeric-range-validation-error::out-of-range",function(e){e.INVALID_TYPE="type-validation-error::invalid-type"}(X||(X={}));var ne={min:-32768,max:32767,isInteger:!0},ae={min:-2147483648,max:2147483647,isInteger:!0},oe={min:-34e37,max:12e37,isInteger:!1},se={min:-Number.MAX_VALUE,max:Number.MAX_VALUE,isInteger:!1};function ce(e,t,r){switch(e){case s.a.INVALID_CODED_VALUE:return"Value ".concat(r," is not in the coded domain - field: ").concat(t.name,", domain: ").concat(JSON.stringify(t.domain));case s.a.VALUE_OUT_OF_RANGE:return"Value ".concat(r," is out of the range of valid values - field: ").concat(t.name,", domain: ").concat(JSON.stringify(t.domain));case X.INVALID_TYPE:return"Value ".concat(r," is not a valid value for the field type - field: ").concat(t.name,", type: ").concat(t.type,", nullable: ").concat(t.nullable);case Z.OUT_OF_RANGE:var{min:i,max:n}=ie(t.type);return"Value ".concat(r," is out of range for the number type - field: ").concat(t.name,", type: ").concat(t.type,", value range is ").concat(i," to ").concat(n)}}function le(e,t){return!function(e,t,r){if(!t||!t.attributes||!e){if(Object(a.k)(r))for(var i of e)r.add(i);return!0}var n=t.attributes,o=!1;for(var s of e)if(!(s in n)){if(o=!0,!Object(a.k)(r))break;r.add(s)}return o}(e,t,null)}},function(e,t,r){"use strict";function i(e,...t){for(var r="",i=0;i<t.length;i++)r+=e[i]+t[i];return r+=e[e.length-1]}r.d(t,"a",(function(){return i})),function(e){e.int=function(e){return Math.round(e).toString()},e.float=function(e){return e.toPrecision(8)}}(i||(i={}))},function(e,t,r){"use strict";function i(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}r.d(t,"a",(function(){return i}))},function(e,t,r){"use strict";var i=r(82),n=(r(80),r(81),r(88),r(85)),a=r(95),o=r(102),s=r(84),c=(r(83),r(86),r(87),r(90)),l=new a.a({inherited:"inherited",codedValue:"coded-value",range:"range"}),u=class extends c.a{constructor(e){super(e),this.name=null,this.type=null}};Object(i.a)([Object(n.b)({type:String,json:{write:!0}})],u.prototype,"name",void 0),Object(i.a)([Object(o.a)(l)],u.prototype,"type",void 0);var d=u=Object(i.a)([Object(s.a)("esri.layers.support.Domain")],u);t.a=d},,function(e,t,r){"use strict";var i,n=r(91),a=r(82),o=(r(80),r(92)),s=r(89),c=(r(81),r(88),r(85)),l=r(84),u=(r(83),r(86),r(87),r(90)),d=r(100),h=r(101),p=r(169),f=r(138),b=r(189),v=i=class extends u.a{constructor(...e){super(...e),this.isAggregate=!1,this.layer=null,this.popupTemplate=null,this.sourceLayer=null,Object.defineProperty(this,"uid",{value:Object(b.a)(),configurable:!0})}normalizeCtorArgs(e,t,r,i){return e&&!e.declaredClass?e:{geometry:e,symbol:t,attributes:r,popupTemplate:i}}set attributes(e){var t=this._get("attributes");t!==e&&(this._set("attributes",e),this._notifyLayer("attributes",t,e))}set geometry(e){var t=this._get("geometry");t!==e&&(this._set("geometry",e),this._notifyLayer("geometry",t,e))}set symbol(e){var t=this._get("symbol");t!==e&&(this._set("symbol",e),this._notifyLayer("symbol",t,e))}set visible(e){var t=this._get("visible");t!==e&&(this._set("visible",e),this._notifyLayer("visible",t,e))}getEffectivePopupTemplate(e=!1){return this.popupTemplate?this.popupTemplate:this.sourceLayer?"popupTemplate"in this.sourceLayer&&this.sourceLayer.popupTemplate?this.sourceLayer.popupTemplate:e&&"defaultPopupTemplate"in this.sourceLayer&&Object(s.k)(this.sourceLayer.defaultPopupTemplate)?this.sourceLayer.defaultPopupTemplate:null:null}getAttribute(e){return this.attributes&&this.attributes[e]}setAttribute(e,t){if(this.attributes){var r=this.getAttribute(e);this.attributes[e]=t,this._notifyLayer("attributes",r,t,e)}else this.attributes={[e]:t},this._notifyLayer("attributes",void 0,t,e)}getObjectId(){return this.sourceLayer&&"objectIdField"in this.sourceLayer&&this.sourceLayer.objectIdField?this.getAttribute(this.sourceLayer.objectIdField):null}toJSON(){return{geometry:Object(s.k)(this.geometry)?this.geometry.toJSON():null,symbol:Object(s.k)(this.symbol)?this.symbol.toJSON():null,attributes:Object(n.a)({},this.attributes),popupTemplate:this.popupTemplate&&this.popupTemplate.toJSON()}}clone(){return new i(this.cloneProperties())}cloneProperties(){return{attributes:Object(o.a)(this.attributes),geometry:Object(o.a)(this.geometry),layer:this.layer,popupTemplate:this.popupTemplate&&this.popupTemplate.clone(),sourceLayer:this.sourceLayer,symbol:Object(o.a)(this.symbol),visible:this.visible}}_notifyLayer(e,t,r,i){if(this.layer&&"graphicChanged"in this.layer){var n={graphic:this,property:e,oldValue:t,newValue:r};"attributes"===e&&(n.attributeName=i),this.layer.graphicChanged(n)}}};Object(a.a)([Object(c.b)({value:null})],v.prototype,"attributes",null),Object(a.a)([Object(c.b)({value:null,types:h.a,json:{read:d.a}})],v.prototype,"geometry",null),Object(a.a)([Object(c.b)({type:Boolean})],v.prototype,"isAggregate",void 0),Object(a.a)([Object(c.b)()],v.prototype,"layer",void 0),Object(a.a)([Object(c.b)({type:p.a})],v.prototype,"popupTemplate",void 0),Object(a.a)([Object(c.b)()],v.prototype,"sourceLayer",void 0),Object(a.a)([Object(c.b)({value:null,types:f.e})],v.prototype,"symbol",null),Object(a.a)([Object(c.b)({type:Boolean,value:!0})],v.prototype,"visible",null),v=i=Object(a.a)([Object(l.a)("esri.Graphic")],v),(v||(v={})).generateUID=b.a;var m=v;t.a=m},function(e,t,r){"use strict";r.d(t,"a",(function(){return n})),r.d(t,"b",(function(){return a})),r.d(t,"c",(function(){return o}));var i=r(92);function n(e,t,r=!1){return c(e,t,r)}function a(e,t){if(null!=t)return t[e]||s(e.split("."),!1,t)}function o(e,t,r){var i=e.split("."),n=i.pop(),a=s(i,!0,r);a&&n&&(a[n]=t)}function s(e,t,r){var i=r;for(var n of e){if(null==i)return;if(!(n in i)){if(!t)return;i[n]={}}i=i[n]}return i}function c(e,t,r){return t?Object.keys(t).reduce((function(e,n){var a=e[n],o=t[n];return a===o?e:void 0===a?(e[n]=Object(i.a)(o),e):(Array.isArray(o)||Array.isArray(e)?(a=a?Array.isArray(a)?e[n]=a.concat():e[n]=[a]:e[n]=[],o&&(Array.isArray(o)||(o=[o]),r?o.forEach((e=>{-1===a.indexOf(e)&&a.push(e)})):e[n]=o.concat())):o&&"object"==typeof o?e[n]=c(a,o,r):e.hasOwnProperty(n)&&!t.hasOwnProperty(n)||(e[n]=o),e)}),e||{}):e}},function(e,t,r){"use strict";r.d(t,"a",(function(){return w})),r.d(t,"b",(function(){return p})),r.d(t,"c",(function(){return a})),r.d(t,"d",(function(){return y})),r.d(t,"e",(function(){return f})),r.d(t,"f",(function(){return b})),r.d(t,"g",(function(){return m})),r.d(t,"h",(function(){return v})),r.d(t,"i",(function(){return n})),r.d(t,"j",(function(){return j})),r.d(t,"k",(function(){return l})),r.d(t,"l",(function(){return u})),r.d(t,"m",(function(){return s})),r.d(t,"n",(function(){return o})),r.d(t,"o",(function(){return h})),r.d(t,"p",(function(){return g})),r.d(t,"q",(function(){return O})),r.d(t,"r",(function(){return c})),r.d(t,"s",(function(){return d}));r(80),r(89);var i=r(103);function n(e=x){return[e[0],e[1],e[2],e[3]]}function a(e){return[e[0],e[1],e[2],e[3]]}function o(e,t,r,i,a=n()){return a[0]=e,a[1]=t,a[2]=r,a[3]=i,a}function s(e,t=n()){return t[0]=e.xmin,t[1]=e.ymin,t[2]=e.xmax,t[3]=e.ymax,t}function c(e,t){return new i.a({xmin:e[0],ymin:e[1],xmax:e[2],ymax:e[3],spatialReference:t})}function l(e,t,r=e){if("length"in t)_(t)?(r[0]=Math.min(e[0],t[0]),r[1]=Math.min(e[1],t[1]),r[2]=Math.max(e[2],t[2]),r[3]=Math.max(e[3],t[3])):2!==t.length&&3!==t.length||(r[0]=Math.min(e[0],t[0]),r[1]=Math.min(e[1],t[1]),r[2]=Math.max(e[2],t[0]),r[3]=Math.max(e[3],t[1]));else switch(t.type){case"extent":r[0]=Math.min(e[0],t.xmin),r[1]=Math.min(e[1],t.ymin),r[2]=Math.max(e[2],t.xmax),r[3]=Math.max(e[3],t.ymax);break;case"point":r[0]=Math.min(e[0],t.x),r[1]=Math.min(e[1],t.y),r[2]=Math.max(e[2],t.x),r[3]=Math.max(e[3],t.y)}return r}function u(e,t,r=e){for(var i=t.length,n=e[0],a=e[1],o=e[2],s=e[3],c=0;c<i;c++){var l=t[c];n=Math.min(n,l[0]),a=Math.min(a,l[1]),o=Math.max(o,l[0]),s=Math.max(s,l[1])}return r[0]=n,r[1]=a,r[2]=o,r[3]=s,r}function d(e){return e[0]>=e[2]?0:e[2]-e[0]}function h(e){return e[1]>=e[3]?0:e[3]-e[1]}function p(e){return d(e)*h(e)}function f(e,t){return v(e,t[0],t[1])}function b(e,t){return v(e,t.x,t.y)}function v(e,t,r){return t>=e[0]&&r>=e[1]&&t<=e[2]&&r<=e[3]}function m(e,t,r){return t[0]>=e[0]-r&&t[1]>=e[1]-r&&t[0]<=e[2]+r&&t[1]<=e[3]+r}function g(e,t){return Math.max(t[0],e[0])<=Math.min(t[2],e[2])&&Math.max(t[1],e[1])<=Math.min(t[3],e[3])}function y(e,t){return t[0]>=e[0]&&t[2]<=e[2]&&t[1]>=e[1]&&t[3]<=e[3]}function O(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e}function j(e){return e?O(e,w):n(w)}function _(e){return 4===e.length}var w=[1/0,1/0,-1/0,-1/0],x=[0,0,0,0]},function(e,t,r){"use strict";r.d(t,"a",(function(){return o})),r.d(t,"b",(function(){return s})),r.d(t,"c",(function(){return c})),r.d(t,"d",(function(){return f})),r.d(t,"e",(function(){return p})),r.d(t,"f",(function(){return d})),r.d(t,"g",(function(){return u}));var i=r(92),n=r(89),a=r(217);function o(e){return e?e.__accessor__?e.__accessor__:e.propertyInvalidated?e:null:null}function s(e,t){return null!=e&&e.metadatas&&null!=e.metadatas[t]}function c(e,t,r){return l(e,t,r?{policy:r,path:""}:null)}function l(e,t,r){return t?Object.keys(t).reduce((function(e,a){var o=null,s="merge";if(r&&(o=r.path?"".concat(r.path,".").concat(a):a,s=r.policy(o)),"replace"===s)return e[a]=t[a],e;if(void 0===e[a])return e[a]=Object(i.a)(t[a]),e;var c=e[a],u=t[a];if(c===u)return e;if(Array.isArray(u)||Array.isArray(e))c=c?Array.isArray(c)?e[a]=c.concat():e[a]=[c]:e[a]=[],u&&(Array.isArray(u)||(u=[u]),u.forEach((e=>{-1===c.indexOf(e)&&c.push(e)})));else if(u&&"object"==typeof u)if(r){var d=r.path;r.path=Object(n.d)(o),e[a]=l(c,u,r),r.path=d}else e[a]=l(c,u,null);else e.hasOwnProperty(a)&&!t.hasOwnProperty(a)||(e[a]=u);return e}),e||{}):e}function u(e){return e?"string"==typeof e&&-1===e.indexOf(".")?e:d(e):e}function d(e){return Array.isArray(e)?e:e.split(".")}function h(e){return e.indexOf(",")>-1?e.split(",").map((e=>e.trim())):[e.trim()]}function p(e,t,r,i){var n=function(e){if(Array.isArray(e)){var t=[];for(var r of e)t.push(...h(r));return t}return h(e)}(t);if(1!==n.length){var o=n.map((t=>i(e,t,r)));return Object(a.b)(o)}return i(e,n[0],r)}function f(e){var t=!1;return()=>{t||(t=!0,e())}}},,,function(e,t,r){"use strict";r.d(t,"a",(function(){return a}));var i=function(e){return{vnodeSelector:"",properties:void 0,children:void 0,text:e.toString(),domNode:null}},n=function(e,t){for(var r=0,a=e.length;r<a;r++){var o=e[r];Array.isArray(o)?n(o,t):null!=o&&!1!==o&&(o.hasOwnProperty("vnodeSelector")||(o=i(o)),t.push(o))}},a=function(e,t){for(var r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(1===r.length&&"string"==typeof r[0])return{vnodeSelector:e,properties:t||void 0,children:void 0,text:r[0],domNode:null};var a=[];return n(r,a),{vnodeSelector:e,properties:t||void 0,children:a,text:void 0,domNode:null}}},function(e,t,r){"use strict";var i,n=r(82),a=(r(80),r(92)),o=(r(81),r(88),r(85)),s=r(84),c=r(96),l=(r(83),r(86),r(87),r(99)),u=r(166),d=r(161),h=r(113),p=r(309),f=r(354),b=r(103),v=r(390),m=r(276),g=r(411),y=r(371);function O(e){return!Array.isArray(e[0])}var j=i=class extends u.a{constructor(...e){super(...e),this.rings=[],this.type="polygon"}static fromExtent(e){var t=e.clone().normalize(),r=e.spatialReference,n=!1,a=!1;t.map((e=>{e.hasZ&&(n=!0),e.hasM&&(a=!0)}));var o={rings:t.map((function(e){var t=[[e.xmin,e.ymin],[e.xmin,e.ymax],[e.xmax,e.ymax],[e.xmax,e.ymin],[e.xmin,e.ymin]];if(n&&e.hasZ)for(var r=e.zmin+.5*(e.zmax-e.zmin),i=0;i<t.length;i++)t[i].push(r);if(a&&e.hasM)for(var o=e.mmin+.5*(e.mmax-e.mmin),s=0;s<t.length;s++)t[s].push(o);return t})),spatialReference:r};return n&&(o.hasZ=!0),a&&(o.hasM=!0),new i(o)}normalizeCtorArgs(e,t){var r,i,n,a=null;return e&&!Array.isArray(e)?(a=e.rings?e.rings:null,t||(e.spatialReference?t=e.spatialReference:e.rings||(t=e)),r=e.hasZ,i=e.hasM):a=e,a=a||[],t=t||l.a.WGS84,a.length&&a[0]&&null!=a[0][0]&&"number"==typeof a[0][0]&&(a=[a]),(n=a[0]&&a[0][0])&&(void 0===r&&void 0===i?(r=n.length>2,i=!1):void 0===r?r=!i&&n.length>3:void 0===i&&(i=!r&&n.length>3)),{rings:a,spatialReference:t,hasZ:r,hasM:i}}get cache(){return this.commitProperty("rings"),this.commitProperty("hasZ"),this.commitProperty("hasM"),this.commitProperty("spatialReference"),{}}get centroid(){var e=Object(g.a)(this);if(!e||isNaN(e[0])||isNaN(e[1])||this.hasZ&&isNaN(e[2]))return null;var t=new h.a;return t.x=e[0],t.y=e[1],t.spatialReference=this.spatialReference,this.hasZ&&(t.z=e[2]),t}get extent(){var{spatialReference:e}=this,t=Object(y.b)(this);if(!t)return null;var r=new b.a(t);return r.spatialReference=e,r}get isSelfIntersecting(){return Object(f.c)(this.rings)}writeRings(e,t){t.rings=Object(a.a)(this.rings)}addRing(e){if(e){var t=this.rings,r=t.length;if(O(e)){for(var i=[],n=0,a=e.length;n<a;n++)i[n]=e[n].toArray();t[r]=i}else t[r]=e.concat();return this.notifyChange("rings"),this}}clone(){var e=new i;return e.spatialReference=this.spatialReference,e.rings=Object(a.a)(this.rings),e.hasZ=this.hasZ,e.hasM=this.hasM,e}contains(e){return!!e&&(Object(d.a)(e,this.spatialReference)&&(e=Object(d.d)(e,this.spatialReference)),Object(p.g)(this,e))}isClockwise(e){var t;return t=O(e)?e.map((e=>this.hasZ?this.hasM?[e.x,e.y,e.z,e.m]:[e.x,e.y,e.z]:[e.x,e.y])):e,Object(m.g)(t,this.hasM,this.hasZ)}getPoint(e,t){if(!this._validateInputs(e,t))return null;var r=this.rings[e][t],i=this.hasZ,n=this.hasM;return i&&!n?new h.a(r[0],r[1],r[2],void 0,this.spatialReference):n&&!i?new h.a(r[0],r[1],void 0,r[2],this.spatialReference):i&&n?new h.a(r[0],r[1],r[2],r[3],this.spatialReference):new h.a(r[0],r[1],this.spatialReference)}insertPoint(e,t,r){return this._validateInputs(e,t,!0)?(Object(v.a)(this,r),Array.isArray(r)||(r=r.toArray()),this.rings[e].splice(t,0,r),this.notifyChange("rings"),this):this}removePoint(e,t){if(!this._validateInputs(e,t))return null;var r=new h.a(this.rings[e].splice(t,1)[0],this.spatialReference);return this.notifyChange("rings"),r}removeRing(e){if(!this._validateInputs(e,null))return null;var t=this.rings.splice(e,1)[0],r=this.spatialReference,i=t.map((e=>new h.a(e,r)));return this.notifyChange("rings"),i}setPoint(e,t,r){return this._validateInputs(e,t)?(Object(v.a)(this,r),Array.isArray(r)||(r=r.toArray()),this.rings[e][t]=r,this.notifyChange("rings"),this):this}_validateInputs(e,t,r=!1){if(null==e||e<0||e>=this.rings.length)return!1;if(null!=t){var i=this.rings[e];if(r&&(t<0||t>i.length))return!1;if(!r&&(t<0||t>=i.length))return!1}return!0}toJSON(e){return this.write(null,e)}};Object(n.a)([Object(o.b)({readOnly:!0})],j.prototype,"cache",null),Object(n.a)([Object(o.b)({readOnly:!0})],j.prototype,"centroid",null),Object(n.a)([Object(o.b)({readOnly:!0})],j.prototype,"extent",null),Object(n.a)([Object(o.b)({readOnly:!0})],j.prototype,"isSelfIntersecting",null),Object(n.a)([Object(o.b)({type:[[[Number]]],json:{write:{isRequired:!0}}})],j.prototype,"rings",void 0),Object(n.a)([Object(c.a)("rings")],j.prototype,"writeRings",null),(j=i=Object(n.a)([Object(s.a)("esri.geometry.Polygon")],j)).prototype.toJSON.isDefaultToJSON=!0;var _=j;t.a=_},function(e,t,r){"use strict";var i=r(82),n=r(217),a=r(84),o=r(97);class s{constructor(){this._emitter=new s.EventEmitter(this)}emit(e,t){return this._emitter.emit(e,t)}on(e,t){return this._emitter.on(e,t)}once(e,t){return this._emitter.once(e,t)}hasEventListener(e){return this._emitter.hasEventListener(e)}}!function(e){class t{constructor(e=null){this.target=e,this._listenersMap=null}clear(){this._listenersMap&&this._listenersMap.clear()}emit(e,t){var r=this._listenersMap&&this._listenersMap.get(e);if(!r)return!1;var i=this.target||this;return[...r].forEach((e=>{e.call(i,t)})),r.length>0}on(e,t){if(Array.isArray(e)){var r=e.map((e=>this.on(e,t)));return Object(n.b)(r)}if(e.indexOf(",")>-1)throw new TypeError("Evented.on() with a comma delimited string of event types is not supported");this._listenersMap||(this._listenersMap=new Map);var i=this._listenersMap.get(e)||[];return i.push(t),this._listenersMap.set(e,i),{remove:()=>{var r=this._listenersMap&&this._listenersMap.get(e)||[],i=r.indexOf(t);i>=0&&r.splice(i,1)}}}once(e,t){var r=this.on(e,(e=>{r.remove(),t.call(null,e)}));return r}hasEventListener(e){var t=this._listenersMap&&this._listenersMap.get(e);return null!=t&&t.length>0}}e.EventEmitter=t,e.EventedMixin=e=>{var r=class extends e{constructor(){super(...arguments),this._emitter=new t}destroy(){this._emitter.clear()}emit(e,t){return this._emitter.emit(e,t)}on(e,t){return this._emitter.on(e,t)}once(e,t){return this._emitter.once(e,t)}hasEventListener(e){return this._emitter.hasEventListener(e)}};return r=Object(i.a)([Object(a.a)("esri.core.Evented")],r)};var r=class extends o.a{constructor(){super(...arguments),this._emitter=new s.EventEmitter(this)}emit(e,t){return this._emitter.emit(e,t)}on(e,t){return this._emitter.on(e,t)}once(e,t){return this._emitter.once(e,t)}hasEventListener(e){return this._emitter.hasEventListener(e)}};r=Object(i.a)([Object(a.a)("esri.core.Evented")],r),e.EventedAccessor=r}(s||(s={}));var c=s;t.a=c},function(e,t,r){"use strict";var i,n=r(82),a=(r(80),r(92)),o=r(89),s=(r(81),r(88)),c=r(85),l=r(116),u=r(95),d=r(84),h=r(96),p=(r(83),r(86),r(87),r(90)),f=r(99),b=r(113),v=r(100),m=r(101),g=r(150),y=r(170),O=r(250),j=r(246),_=new u.a({esriSpatialRelIntersects:"intersects",esriSpatialRelContains:"contains",esriSpatialRelCrosses:"crosses",esriSpatialRelDisjoint:"disjoint",esriSpatialRelEnvelopeIntersects:"envelope-intersects",esriSpatialRelIndexIntersects:"index-intersects",esriSpatialRelOverlaps:"overlaps",esriSpatialRelTouches:"touches",esriSpatialRelWithin:"within",esriSpatialRelRelation:"relation"}),w=new u.a({esriSRUnit_Meter:"meters",esriSRUnit_Kilometer:"kilometers",esriSRUnit_Foot:"feet",esriSRUnit_StatuteMile:"miles",esriSRUnit_NauticalMile:"nautical-miles",esriSRUnit_USNauticalMile:"us-nautical-miles"}),x=i=class extends p.a{constructor(e){super(e),this.aggregateIds=null,this.cacheHint=void 0,this.datumTransformation=null,this.distance=void 0,this.dynamicDataSource=void 0,this.gdbVersion=null,this.geometry=null,this.geometryPrecision=void 0,this.groupByFieldsForStatistics=null,this.having=null,this.historicMoment=null,this.maxAllowableOffset=void 0,this.maxRecordCountFactor=1,this.multipatchOption=null,this.num=void 0,this.objectIds=null,this.orderByFields=null,this.outFields=null,this.outSpatialReference=null,this.outStatistics=null,this.parameterValues=null,this.pixelSize=null,this.quantizationParameters=null,this.rangeValues=null,this.relationParameter=null,this.resultType=null,this.returnCentroid=!1,this.returnDistinctValues=!1,this.returnExceededLimitFeatures=!0,this.returnGeometry=!1,this.returnQueryGeometry=!1,this.returnM=void 0,this.returnZ=void 0,this.sourceSpatialReference=null,this.spatialRelationship="intersects",this.start=void 0,this.sqlFormat=null,this.text=null,this.timeExtent=null,this.units=null,this.where=null}static from(e){return Object(s.d)(i,e)}castDatumTransformation(e){return"number"==typeof e||"object"==typeof e?e:null}writeHistoricMoment(e,t){t.historicMoment=e&&e.getTime()}writeParameterValues(e,t){if(e){var r={};for(var i in e){var n=e[i];Array.isArray(n)?r[i]=n.map((e=>e instanceof Date?e.getTime():e)):n instanceof Date?r[i]=n.getTime():r[i]=n}t.parameterValues=r}}writeStart(e,t){t.resultOffset=this.start,t.resultRecordCount=this.num||10,t.where="1=1"}writeWhere(e,t){t.where=e||"1=1"}clone(){return new i(Object(a.a)({aggregateIds:this.aggregateIds,cacheHint:this.cacheHint,datumTransformation:this.datumTransformation,distance:this.distance,gdbVersion:this.gdbVersion,geometry:this.geometry,geometryPrecision:this.geometryPrecision,groupByFieldsForStatistics:this.groupByFieldsForStatistics,having:this.having,historicMoment:Object(o.k)(this.historicMoment)?new Date(this.historicMoment.getTime()):null,maxAllowableOffset:this.maxAllowableOffset,maxRecordCountFactor:this.maxRecordCountFactor,multipatchOption:this.multipatchOption,num:this.num,objectIds:this.objectIds,orderByFields:this.orderByFields,outFields:this.outFields,outSpatialReference:this.outSpatialReference,outStatistics:this.outStatistics,parameterValues:this.parameterValues,pixelSize:this.pixelSize,quantizationParameters:this.quantizationParameters,rangeValues:this.rangeValues,relationParameter:this.relationParameter,resultType:this.resultType,returnDistinctValues:this.returnDistinctValues,returnGeometry:this.returnGeometry,returnCentroid:this.returnCentroid,returnExceededLimitFeatures:this.returnExceededLimitFeatures,returnQueryGeometry:this.returnQueryGeometry,returnM:this.returnM,returnZ:this.returnZ,dynamicDataSource:this.dynamicDataSource,sourceSpatialReference:this.sourceSpatialReference,spatialRelationship:this.spatialRelationship,start:this.start,sqlFormat:this.sqlFormat,text:this.text,timeExtent:this.timeExtent,units:this.units,where:this.where}))}};x.MAX_MAX_RECORD_COUNT_FACTOR=5,Object(n.a)([Object(c.b)({json:{write:!0}})],x.prototype,"aggregateIds",void 0),Object(n.a)([Object(c.b)({type:Boolean,json:{write:{writer:(e,t)=>{null!=e&&(t.cacheHint=e)}}}})],x.prototype,"cacheHint",void 0),Object(n.a)([Object(c.b)({json:{write:!0}})],x.prototype,"datumTransformation",void 0),Object(n.a)([Object(l.a)("datumTransformation")],x.prototype,"castDatumTransformation",null),Object(n.a)([Object(c.b)({type:Number,json:{write:{overridePolicy:e=>({enabled:e>0})}}})],x.prototype,"distance",void 0),Object(n.a)([Object(c.b)({type:y.a,json:{write:!0}})],x.prototype,"dynamicDataSource",void 0),Object(n.a)([Object(c.b)({type:String,json:{write:!0}})],x.prototype,"gdbVersion",void 0),Object(n.a)([Object(c.b)({types:m.a,json:{read:v.a,write:!0}})],x.prototype,"geometry",void 0),Object(n.a)([Object(c.b)({type:Number,json:{write:!0}})],x.prototype,"geometryPrecision",void 0),Object(n.a)([Object(c.b)({type:[String],json:{write:!0}})],x.prototype,"groupByFieldsForStatistics",void 0),Object(n.a)([Object(c.b)({type:String,json:{write:!0}})],x.prototype,"having",void 0),Object(n.a)([Object(c.b)({type:Date})],x.prototype,"historicMoment",void 0),Object(n.a)([Object(h.a)("historicMoment")],x.prototype,"writeHistoricMoment",null),Object(n.a)([Object(c.b)({type:Number,json:{write:!0}})],x.prototype,"maxAllowableOffset",void 0),Object(n.a)([Object(c.b)({type:Number,cast:e=>e<1?1:e>i.MAX_MAX_RECORD_COUNT_FACTOR?i.MAX_MAX_RECORD_COUNT_FACTOR:e,json:{write:{overridePolicy:e=>({enabled:e>1})}}})],x.prototype,"maxRecordCountFactor",void 0),Object(n.a)([Object(c.b)({type:String,json:{write:!0}})],x.prototype,"multipatchOption",void 0),Object(n.a)([Object(c.b)({type:Number,json:{read:{source:"resultRecordCount"}}})],x.prototype,"num",void 0),Object(n.a)([Object(c.b)({json:{write:!0}})],x.prototype,"objectIds",void 0),Object(n.a)([Object(c.b)({type:[String],json:{write:!0}})],x.prototype,"orderByFields",void 0),Object(n.a)([Object(c.b)({type:[String],json:{write:!0}})],x.prototype,"outFields",void 0),Object(n.a)([Object(c.b)({type:f.a,json:{read:{source:"outSR"},write:{target:"outSR"}}})],x.prototype,"outSpatialReference",void 0),Object(n.a)([Object(c.b)({type:[j.a],json:{write:{enabled:!0,overridePolicy(){return{enabled:Object(o.k)(this.outStatistics)&&this.outStatistics.length>0}}}}})],x.prototype,"outStatistics",void 0),Object(n.a)([Object(c.b)({json:{write:!0}})],x.prototype,"parameterValues",void 0),Object(n.a)([Object(h.a)("parameterValues")],x.prototype,"writeParameterValues",null),Object(n.a)([Object(c.b)({type:b.a,json:{write:!0}})],x.prototype,"pixelSize",void 0),Object(n.a)([Object(c.b)({type:O.a,json:{write:!0}})],x.prototype,"quantizationParameters",void 0),Object(n.a)([Object(c.b)({type:[Object],json:{write:!0}})],x.prototype,"rangeValues",void 0),Object(n.a)([Object(c.b)({type:String,json:{read:{source:"relationParam"},write:{target:"relationParam",overridePolicy(){return{enabled:"relation"===this.spatialRelationship}}}}})],x.prototype,"relationParameter",void 0),Object(n.a)([Object(c.b)({type:String,json:{write:!0}})],x.prototype,"resultType",void 0),Object(n.a)([Object(c.b)({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],x.prototype,"returnCentroid",void 0),Object(n.a)([Object(c.b)({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],x.prototype,"returnDistinctValues",void 0),Object(n.a)([Object(c.b)({type:Boolean,json:{write:{overridePolicy:e=>({enabled:!e})}}})],x.prototype,"returnExceededLimitFeatures",void 0),Object(n.a)([Object(c.b)({type:Boolean,json:{write:!0}})],x.prototype,"returnGeometry",void 0),Object(n.a)([Object(c.b)({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],x.prototype,"returnQueryGeometry",void 0),Object(n.a)([Object(c.b)({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],x.prototype,"returnM",void 0),Object(n.a)([Object(c.b)({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],x.prototype,"returnZ",void 0),Object(n.a)([Object(c.b)({type:f.a,json:{write:!0}})],x.prototype,"sourceSpatialReference",void 0),Object(n.a)([Object(c.b)({type:String,json:{read:{source:"spatialRel",reader:_.read},write:{target:"spatialRel",writer:_.write}}})],x.prototype,"spatialRelationship",void 0),Object(n.a)([Object(c.b)({type:Number,json:{read:{source:"resultOffset"}}})],x.prototype,"start",void 0),Object(n.a)([Object(h.a)("start"),Object(h.a)("num")],x.prototype,"writeStart",null),Object(n.a)([Object(c.b)({type:String,json:{write:!0}})],x.prototype,"sqlFormat",void 0),Object(n.a)([Object(c.b)({type:String,json:{write:!0}})],x.prototype,"text",void 0),Object(n.a)([Object(c.b)({type:g.a,json:{write:!0}})],x.prototype,"timeExtent",void 0),Object(n.a)([Object(c.b)({type:String,json:{read:w.read,write:{writer:w.write,overridePolicy(e){return{enabled:e&&this.distance>0}}}}})],x.prototype,"units",void 0),Object(n.a)([Object(c.b)({type:String,json:{write:{overridePolicy(e){return{enabled:null!=e||this.start>0}}}}})],x.prototype,"where",void 0),Object(n.a)([Object(h.a)("where")],x.prototype,"writeWhere",null);var S=x=i=Object(n.a)([Object(d.a)("esri.tasks.support.Query")],x);t.a=S},function(e,t,r){"use strict";(function(e){r.d(t,"a",(function(){return a})),r.d(t,"b",(function(){return n})),r.d(t,"c",(function(){return i}));"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof e||"undefined"!=typeof self&&self;function i(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function n(e,t,r){return e(r={path:t,exports:{},require:function(e,t){return a(null==t&&r.path)}},r.exports),r.exports}function a(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}}).call(this,r(172))},function(e,t,r){"use strict";var i,n=r(82),a=(r(80),r(92)),o=(r(81),r(88),r(85)),s=r(102),c=r(84),l=(r(83),r(86),r(87),r(90)),u=i=class extends l.a{constructor(e){super(e),this.name=null,this.code=null}clone(){return new i({name:this.name,code:this.code})}};Object(n.a)([Object(o.b)({type:String,json:{write:!0}})],u.prototype,"name",void 0),Object(n.a)([Object(o.b)({type:[String,Number],json:{write:!0}})],u.prototype,"code",void 0);var d,h=u=i=Object(n.a)([Object(c.a)("esri.layers.support.CodedValue")],u),p=r(121),f=d=class extends p.a{constructor(e){super(e),this.codedValues=null,this.type="coded-value"}getName(e){var t=null;if(this.codedValues){var r=String(e);this.codedValues.some((e=>(String(e.code)===r&&(t=e.name),!!t)))}return t}clone(){return new d({codedValues:Object(a.a)(this.codedValues),name:this.name})}};Object(n.a)([Object(o.b)({type:[h],json:{write:!0}})],f.prototype,"codedValues",void 0),Object(n.a)([Object(s.a)({codedValue:"coded-value"})],f.prototype,"type",void 0);var b=f=d=Object(n.a)([Object(c.a)("esri.layers.support.CodedValueDomain")],f);t.a=b},function(e,t,r){"use strict";r.d(t,"a",(function(){return h})),r.d(t,"b",(function(){return T})),r.d(t,"c",(function(){return n})),r.d(t,"d",(function(){return s})),r.d(t,"e",(function(){return y})),r.d(t,"f",(function(){return j})),r.d(t,"g",(function(){return O})),r.d(t,"h",(function(){return o})),r.d(t,"i",(function(){return f})),r.d(t,"j",(function(){return b})),r.d(t,"k",(function(){return S})),r.d(t,"l",(function(){return v})),r.d(t,"m",(function(){return _})),r.d(t,"n",(function(){return g})),r.d(t,"o",(function(){return p})),r.d(t,"p",(function(){return m})),r.d(t,"q",(function(){return x})),r.d(t,"r",(function(){return a})),r.d(t,"s",(function(){return w})),r.d(t,"t",(function(){return u})),r.d(t,"u",(function(){return d}));var i=r(184);function n(e,t){return e[0]=t[0],e[1]=t[1],e}function a(e,t,r){return e[0]=t,e[1]=r,e}function o(e,t,r){return e[0]=t[0]+r[0],e[1]=t[1]+r[1],e}function s(e,t,r){return e[0]=t[0]-r[0],e[1]=t[1]-r[1],e}function c(e,t,r){return e[0]=t[0]*r[0],e[1]=t[1]*r[1],e}function l(e,t,r){return e[0]=t[0]/r[0],e[1]=t[1]/r[1],e}function u(e,t,r){return e[0]=Math.min(t[0],r[0]),e[1]=Math.min(t[1],r[1]),e}function d(e,t,r){return e[0]=Math.max(t[0],r[0]),e[1]=Math.max(t[1],r[1]),e}function h(e,t,r){return e[0]=t[0]*r,e[1]=t[1]*r,e}function p(e,t,r,i){return e[0]=t[0]+r[0]*i,e[1]=t[1]+r[1]*i,e}function f(e,t){var r=t[0]-e[0],i=t[1]-e[1];return Math.sqrt(r*r+i*i)}function b(e,t){var r=t[0]-e[0],i=t[1]-e[1];return r*r+i*i}function v(e){var t=e[0],r=e[1];return Math.sqrt(t*t+r*r)}function m(e){var t=e[0],r=e[1];return t*t+r*r}function g(e,t){return e[0]=-t[0],e[1]=-t[1],e}function y(e,t){var r=t[0],i=t[1],n=r*r+i*i;return n>0&&(n=1/Math.sqrt(n),e[0]=t[0]*n,e[1]=t[1]*n),e}function O(e,t){return e[0]*t[0]+e[1]*t[1]}function j(e,t,r){var i=t[0]*r[1]-t[1]*r[0];return e[0]=e[1]=0,e[2]=i,e}function _(e,t,r,i){var n=t[0],a=t[1];return e[0]=n+i*(r[0]-n),e[1]=a+i*(r[1]-a),e}function w(e,t,r){var i=t[0],n=t[1];return e[0]=r[0]*i+r[2]*n+r[4],e[1]=r[1]*i+r[3]*n+r[5],e}function x(e,t,r,i){var n=t[0]-r[0],a=t[1]-r[1],o=Math.sin(i),s=Math.cos(i);return e[0]=n*s-a*o+r[0],e[1]=n*o+a*s+r[1],e}function S(e,t){return e[0]===t[0]&&e[1]===t[1]}var M=v,T=s,P=c,E=l,C=f,A=b,I=m;Object.freeze({__proto__:null,copy:n,set:a,add:o,subtract:s,multiply:c,divide:l,ceil:function(e,t){return e[0]=Math.ceil(t[0]),e[1]=Math.ceil(t[1]),e},floor:function(e,t){return e[0]=Math.floor(t[0]),e[1]=Math.floor(t[1]),e},min:u,max:d,round:function(e,t){return e[0]=Math.round(t[0]),e[1]=Math.round(t[1]),e},scale:h,scaleAndAdd:p,distance:f,squaredDistance:b,length:v,squaredLength:m,negate:g,inverse:function(e,t){return e[0]=1/t[0],e[1]=1/t[1],e},normalize:y,dot:O,cross:j,lerp:_,random:function(e,t){t=t||1;var r=2*Object(i.b)()*Math.PI;return e[0]=Math.cos(r)*t,e[1]=Math.sin(r)*t,e},transformMat2:function(e,t,r){var i=t[0],n=t[1];return e[0]=r[0]*i+r[2]*n,e[1]=r[1]*i+r[3]*n,e},transformMat2d:w,transformMat3:function(e,t,r){var i=t[0],n=t[1];return e[0]=r[0]*i+r[3]*n+r[6],e[1]=r[1]*i+r[4]*n+r[7],e},transformMat4:function(e,t,r){var i=t[0],n=t[1];return e[0]=r[0]*i+r[4]*n+r[12],e[1]=r[1]*i+r[5]*n+r[13],e},rotate:x,angle:function(e,t){var r=e[0],i=e[1],n=t[0],a=t[1],o=r*r+i*i;o>0&&(o=1/Math.sqrt(o));var s=n*n+a*a;s>0&&(s=1/Math.sqrt(s));var c=(r*n+i*a)*o*s;return c>1?0:c<-1?Math.PI:Math.acos(c)},str:function(e){return"vec2("+e[0]+", "+e[1]+")"},exactEquals:S,equals:function(e,t){var r=e[0],n=e[1],a=t[0],o=t[1];return Math.abs(r-a)<=i.a*Math.max(1,Math.abs(r),Math.abs(a))&&Math.abs(n-o)<=i.a*Math.max(1,Math.abs(n),Math.abs(o))},len:M,sub:T,mul:P,div:E,dist:C,sqrDist:A,sqrLen:I})},function(e,t,r){"use strict";var i,n=r(82),a=(r(80),r(81),r(88),r(85),r(102)),o=r(84),s=(r(83),r(86),r(87),r(121)),c=i=class extends s.a{constructor(e){super(e),this.type="inherited"}clone(){return new i}};Object(n.a)([Object(a.a)({inherited:"inherited"})],c.prototype,"type",void 0);var l=c=i=Object(n.a)([Object(o.a)("esri.layers.support.InheritedDomain")],c);t.a=l},function(e,t,r){"use strict";var i,n=r(82),a=(r(80),r(81),r(88),r(85)),o=r(102),s=r(84),c=(r(83),r(86),r(87),r(121)),l=i=class extends c.a{constructor(e){super(e),this.maxValue=null,this.minValue=null,this.type="range"}clone(){return new i({maxValue:this.maxValue,minValue:this.minValue,name:this.name})}};Object(n.a)([Object(a.b)({type:Number,json:{type:[Number],read:{source:"range",reader:(e,t)=>t.range&&t.range[1]},write:{enabled:!1,overridePolicy(){return{enabled:null!=this.maxValue&&null==this.minValue}},target:"range",writer(e,t,r){t[r]=[this.minValue||0,e]}}}})],l.prototype,"maxValue",void 0),Object(n.a)([Object(a.b)({type:Number,json:{type:[Number],read:{source:"range",reader:(e,t)=>t.range&&t.range[0]},write:{target:"range",writer(e,t,r){t[r]=[e,this.maxValue||0]}}}})],l.prototype,"minValue",void 0),Object(n.a)([Object(o.a)({range:"range"})],l.prototype,"type",void 0);var u=l=i=Object(n.a)([Object(s.a)("esri.layers.support.RangeDomain")],l);t.a=u},,function(e,t,r){"use strict";r.d(t,"a",(function(){return n})),r.d(t,"b",(function(){return a})),r.d(t,"c",(function(){return o}));class i{constructor(e,t,r,i){this.semiMajorAxis=e,this.flattening=t,this.outerAtmosphereRimWidth=r;var n=1-this.flattening;this.semiMinorAxis=this.semiMajorAxis*n,this.halfSemiMajorAxis=this.semiMajorAxis/2,this.halfCircumference=Math.PI*this.semiMajorAxis,this.metersPerDegree=this.halfCircumference/180,this.inverseFlattening=1/(1-this.flattening)-1,this.eccentricitySquared=i||2*this.flattening-this.flattening*this.flattening,this.meanRadiusSemiAxes=(2*this.semiMajorAxis+this.semiMinorAxis)/3}get radius(){return this.semiMajorAxis}}var n=new i(6378137,1/298.257223563,3e5,.006694379990137799),a=new i(3396190,1/169.8944472236118,23e4),o=new i(1737400,0,0)},function(e,t,r){"use strict";r.d(t,"a",(function(){return n})),r.d(t,"b",(function(){return c})),r.d(t,"c",(function(){return s})),r.d(t,"d",(function(){return o})),r.d(t,"e",(function(){return l}));r(80);var i=r(95);function n(e){return e}var a={milliseconds:{getter:"getMilliseconds",setter:"setMilliseconds",multiplier:1},seconds:{getter:"getSeconds",setter:"setSeconds",multiplier:1},minutes:{getter:"getMinutes",setter:"setMinutes",multiplier:1},hours:{getter:"getHours",setter:"setHours",multiplier:1},days:{getter:"getDate",setter:"setDate",multiplier:1},weeks:{getter:"getDate",setter:"setDate",multiplier:7},months:{getter:"getMonth",setter:"setMonth",multiplier:1},years:{getter:"getFullYear",setter:"setFullYear",multiplier:1},decades:{getter:"getFullYear",setter:"setFullYear",multiplier:10},centuries:{getter:"getFullYear",setter:"setFullYear",multiplier:100}},o=Object(i.b)()({esriTimeUnitsMilliseconds:"milliseconds",esriTimeUnitsSeconds:"seconds",esriTimeUnitsMinutes:"minutes",esriTimeUnitsHours:"hours",esriTimeUnitsDays:"days",esriTimeUnitsWeeks:"weeks",esriTimeUnitsMonths:"months",esriTimeUnitsYears:"years",esriTimeUnitsDecades:"decades",esriTimeUnitsCenturies:"centuries",esriTimeUnitsUnknown:null});function s(e,t,r){var i=new Date(e.getTime());if(t&&r){var n=a[r],{getter:o,setter:s,multiplier:c}=n;i[s](i[o]()+t*c)}return i}var c={milliseconds:1,seconds:1e3,minutes:6e4,hours:36e5,days:864e5,weeks:6048e5,months:26784e5,years:31536e6,decades:31536e7,centuries:31536e8};function l(e,t){switch(t){case"milliseconds":return new Date(e.getTime());case"seconds":return new Date(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds());case"minutes":return new Date(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes());case"hours":return new Date(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours());case"days":return new Date(e.getFullYear(),e.getMonth(),e.getDate());case"weeks":return new Date(e.getFullYear(),e.getMonth(),e.getDate()-e.getDay());case"months":return new Date(e.getFullYear(),e.getMonth(),1);case"years":return new Date(e.getFullYear(),0,1);case"decades":return new Date(e.getFullYear()-e.getFullYear()%10,0,1);case"centuries":return new Date(e.getFullYear()-e.getFullYear()%100,0,1);default:return null}}},function(e,t,r){"use strict";var i,n=r(82),a=(r(80),r(92)),o=(r(81),r(88),r(85)),s=r(84),c=r(96),l=(r(83),r(86),r(87),r(99)),u=r(166),d=r(113),h=r(103),p=r(390),f=r(371);var b=i=class extends u.a{constructor(...e){super(...e),this.paths=[],this.type="polyline"}normalizeCtorArgs(e,t){var r,i,n,a=null;return e&&!Array.isArray(e)?(a=e.paths?e.paths:null,t||(e.spatialReference?t=e.spatialReference:e.paths||(t=e)),r=e.hasZ,i=e.hasM):a=e,a=a||[],t=t||l.a.WGS84,a.length&&a[0]&&null!=a[0][0]&&"number"==typeof a[0][0]&&(a=[a]),(n=a[0]&&a[0][0])&&(void 0===r&&void 0===i?(r=n.length>2,i=!1):void 0===r?r=!i&&n.length>3:void 0===i&&(i=!r&&n.length>3)),{paths:a,spatialReference:t,hasZ:r,hasM:i}}get cache(){return this.commitProperty("paths"),this.commitProperty("hasZ"),this.commitProperty("hasM"),this.commitProperty("spatialReference"),{}}get extent(){var{spatialReference:e}=this,t=Object(f.c)(this);if(!t)return null;var r=new h.a(t);return r.spatialReference=e,r}writePaths(e,t){t.paths=Object(a.a)(this.paths)}addPath(e){if(e){var t=this.paths,r=t.length;if(function(e){return!Array.isArray(e[0])}(e)){for(var i=[],n=0,a=e.length;n<a;n++)i[n]=e[n].toArray();t[r]=i}else t[r]=e.concat();return this.notifyChange("paths"),this}}clone(){var e=new i;return e.spatialReference=this.spatialReference,e.paths=Object(a.a)(this.paths),e.hasZ=this.hasZ,e.hasM=this.hasM,e}getPoint(e,t){if(!this._validateInputs(e,t))return null;var r=this.paths[e][t],i=this.hasZ,n=this.hasM;return i&&!n?new d.a(r[0],r[1],r[2],void 0,this.spatialReference):n&&!i?new d.a(r[0],r[1],void 0,r[2],this.spatialReference):i&&n?new d.a(r[0],r[1],r[2],r[3],this.spatialReference):new d.a(r[0],r[1],this.spatialReference)}insertPoint(e,t,r){return this._validateInputs(e,t,!0)?(Object(p.a)(this,r),Array.isArray(r)||(r=r.toArray()),this.paths[e].splice(t,0,r),this.notifyChange("paths"),this):this}removePath(e){if(!this._validateInputs(e,null))return null;var t=this.paths.splice(e,1)[0],r=this.spatialReference,i=t.map((e=>new d.a(e,r)));return this.notifyChange("paths"),i}removePoint(e,t){if(!this._validateInputs(e,t))return null;var r=new d.a(this.paths[e].splice(t,1)[0],this.spatialReference);return this.notifyChange("paths"),r}setPoint(e,t,r){return this._validateInputs(e,t)?(Object(p.a)(this,r),Array.isArray(r)||(r=r.toArray()),this.paths[e][t]=r,this.notifyChange("paths"),this):this}_validateInputs(e,t,r=!1){if(null==e||e<0||e>=this.paths.length)return!1;if(null!=t){var i=this.paths[e];if(r&&(t<0||t>i.length))return!1;if(!r&&(t<0||t>=i.length))return!1}return!0}toJSON(e){return this.write(null,e)}};Object(n.a)([Object(o.b)({readOnly:!0})],b.prototype,"cache",null),Object(n.a)([Object(o.b)({readOnly:!0})],b.prototype,"extent",null),Object(n.a)([Object(o.b)({type:[[[Number]]],json:{write:{isRequired:!0}}})],b.prototype,"paths",void 0),Object(n.a)([Object(c.a)("paths")],b.prototype,"writePaths",null),(b=i=Object(n.a)([Object(s.a)("esri.geometry.Polyline")],b)).prototype.toJSON.isDefaultToJSON=!0;var v=b;t.a=v},function(e,t,r){"use strict";r.d(t,"a",(function(){return a})),r.d(t,"b",(function(){return s})),r.d(t,"c",(function(){return o}));var i=r(91),n=r(83);function a(e,t){var r={query:e};return t&&((r=Object(i.a)(Object(i.a)({},t),r)).query=Object(i.a)(Object(i.a)({},r.query),t.query)),r}function o(e){return"string"==typeof e?Object(n.J)(e):e}function s(e,t,r){var i={};for(var n in e)if("declaredClass"!==n){var a=e[n];if(null!=a&&"function"!=typeof a)if(Array.isArray(a)){i[n]=[];for(var o=0;o<a.length;o++)i[n][o]=s(a[o])}else if("object"==typeof a)if(a.toJSON){var c=a.toJSON(r&&r[n]);i[n]=t?c:JSON.stringify(c)}else i[n]=t?a:JSON.stringify(a);else i[n]=a}return i}},function(e,t,r){"use strict";r.d(t,"a",(function(){return s})),r.d(t,"b",(function(){return c})),r.d(t,"c",(function(){return o})),r.d(t,"d",(function(){return l}));var i=r(124),n=/\{([^\}]+)\}/g;function a(e){return null==e?"":e}function o(e,t){return e.replace(n,"object"==typeof t?(e,r)=>a(Object(i.b)(r,t)):(e,r)=>a(t(r)))}function s(e,t){return e.replace(/([\.$?*|{}\(\)\[\]\\\/\+\-^])/g,(e=>t&&-1!==t.indexOf(e)?e:"\\".concat(e)))}function c(e){for(var t=0,r=0;r<e.length;r++)t=(t<<5)-t+e.charCodeAt(r),t|=0;return t}function l(e){return(new DOMParser).parseFromString(e||"","text/html").body.innerText||""}},function(e,t,r){"use strict";r.d(t,"a",(function(){return n})),r.d(t,"b",(function(){return o})),r.d(t,"c",(function(){return s})),r.d(t,"d",(function(){return a}));var i=r(89),n=7;function a(e){switch(e){case"defaults":return 0;case"service":return 2;case"portal-item":return 3;case"web-scene":return 4;case"web-map":return 5;case"user":return 6}}function o(e){switch(e){case 0:return"defaults";case 2:return"service";case 3:return"portal-item";case 4:return"web-scene";case 5:return"web-map";case 6:return"user"}return Object(i.d)(void 0)}function s(e){return o(e)}},function(e,t,r){"use strict";r.d(t,"a",(function(){return a}));var i=r(91),n=r(85);function a(e,t){var r=t?Object(i.a)(Object(i.a)({},t),{},{source:e}):e;return Object(n.b)({aliasOf:r})}},function(e,t,r){"use strict";r.r(t);var i=r(82),n=(r(80),r(89)),a=(r(81),r(88),r(85)),o=r(95),s=r(98),c=r(84),l=r(96),u=(r(83),r(86),r(87),r(90)),d=r(99),h=r(100),p=r(101),f=r(123),b=r(155),v=new o.a({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryEnvelope:"extent",mesh:"mesh","":null}),m=class extends u.a{constructor(e){super(e),this.displayFieldName=null,this.exceededTransferLimit=!1,this.features=[],this.fields=null,this.geometryType=null,this.hasM=!1,this.hasZ=!1,this.queryGeometry=null,this.spatialReference=null}readFeatures(e,t){for(var r=d.a.fromJSON(t.spatialReference),i=[],a=0;a<e.length;a++){var o=e[a],s=f.a.fromJSON(o),c=o.geometry&&o.geometry.spatialReference;Object(n.k)(s.geometry)&&!c&&(s.geometry.spatialReference=r),i.push(s)}return i}writeGeometryType(e,t,r,i){if(e)v.write(e,t,r,i);else{var{features:a}=this;if(a)for(var o of a)if(o&&Object(n.k)(o.geometry))return void v.write(o.geometry.type,t,r,i)}}readQueryGeometry(e,t){if(!e)return null;var r=!!e.spatialReference,i=Object(h.a)(e);return!r&&t.spatialReference&&(i.spatialReference=d.a.fromJSON(t.spatialReference)),i}writeSpatialReference(e,t){if(e)t.spatialReference=e.toJSON();else{var{features:r}=this;if(r)for(var i of r)if(i&&Object(n.k)(i.geometry)&&i.geometry.spatialReference)return void(t.spatialReference=i.geometry.spatialReference.toJSON())}}toJSON(e){var t=this.write(null);if(t.features&&Array.isArray(e)&&e.length>0)for(var r=0;r<t.features.length;r++){var i=t.features[r];if(i.geometry){var n=e&&e[r];i.geometry=n&&n.toJSON()||i.geometry}}return t}quantize(e){for(var{scale:[t,r],translate:[i,a]}=e,o=this.features,s=this._getQuantizationFunction(this.geometryType,(e=>Math.round((e-i)/t)),(e=>Math.round((a-e)/r))),c=0,l=o.length;c<l;c++)s(Object(n.q)(o[c].geometry))||(o.splice(c,1),c--,l--);return this.transform=e,this}unquantize(){var{geometryType:e,features:t,transform:r}=this;if(!r)return this;var{translate:[i,a],scale:[o,s]}=r,c=this._getHydrationFunction(e,(e=>e*o+i),(e=>a-e*s));for(var{geometry:l}of t)Object(n.k)(l)&&c(l);return this.transform=null,this}_quantizePoints(e,t,r){for(var i,n,a=[],o=0,s=e.length;o<s;o++){var c=e[o];if(o>0){var l=t(c[0]),u=r(c[1]);l===i&&u===n||(a.push([l-i,u-n]),i=l,n=u)}else i=t(c[0]),n=r(c[1]),a.push([i,n])}return a.length>0?a:null}_getQuantizationFunction(e,t,r){return"point"===e?e=>(e.x=t(e.x),e.y=r(e.y),e):"polyline"===e||"polygon"===e?e=>{for(var i=Object(h.g)(e)?e.rings:e.paths,n=[],a=0,o=i.length;a<o;a++){var s=i[a],c=this._quantizePoints(s,t,r);c&&n.push(c)}return n.length>0?(Object(h.g)(e)?e.rings=n:e.paths=n,e):null}:"multipoint"===e?e=>{var i=this._quantizePoints(e.points,t,r);return i.length>0?(e.points=i,e):null}:"extent"===e?e=>e:null}_getHydrationFunction(e,t,r){return"point"===e?e=>{e.x=t(e.x),e.y=r(e.y)}:"polyline"===e||"polygon"===e?e=>{for(var i,n,a=Object(h.g)(e)?e.rings:e.paths,o=0,s=a.length;o<s;o++)for(var c=a[o],l=0,u=c.length;l<u;l++){var d=c[l];l>0?(i+=d[0],n+=d[1]):(i=d[0],n=d[1]),d[0]=t(i),d[1]=r(n)}}:"extent"===e?e=>{e.xmin=t(e.xmin),e.ymin=r(e.ymin),e.xmax=t(e.xmax),e.ymax=r(e.ymax)}:"multipoint"===e?e=>{for(var i,n,a=e.points,o=0,s=a.length;o<s;o++){var c=a[o];o>0?(i+=c[0],n+=c[1]):(i=c[0],n=c[1]),c[0]=t(i),c[1]=r(n)}}:void 0}};Object(i.a)([Object(a.b)({type:String,json:{write:!0}})],m.prototype,"displayFieldName",void 0),Object(i.a)([Object(a.b)({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],m.prototype,"exceededTransferLimit",void 0),Object(i.a)([Object(a.b)({type:[f.a],json:{write:!0}})],m.prototype,"features",void 0),Object(i.a)([Object(s.a)("features")],m.prototype,"readFeatures",null),Object(i.a)([Object(a.b)({type:[b.a],json:{write:!0}})],m.prototype,"fields",void 0),Object(i.a)([Object(a.b)({type:["point","multipoint","polyline","polygon","extent","mesh"],json:{read:{reader:v.read}}})],m.prototype,"geometryType",void 0),Object(i.a)([Object(l.a)("geometryType")],m.prototype,"writeGeometryType",null),Object(i.a)([Object(a.b)({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],m.prototype,"hasM",void 0),Object(i.a)([Object(a.b)({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],m.prototype,"hasZ",void 0),Object(i.a)([Object(a.b)({types:p.a,json:{write:!0}})],m.prototype,"queryGeometry",void 0),Object(i.a)([Object(s.a)("queryGeometry")],m.prototype,"readQueryGeometry",null),Object(i.a)([Object(a.b)({type:d.a,json:{write:!0}})],m.prototype,"spatialReference",void 0),Object(i.a)([Object(l.a)("spatialReference")],m.prototype,"writeSpatialReference",null),Object(i.a)([Object(a.b)({json:{write:!0}})],m.prototype,"transform",void 0),(m=Object(i.a)([Object(c.a)("esri.tasks.support.FeatureSet")],m)).prototype.toJSON.isDefaultToJSON=!0,m||(m={});var g=m;t.default=g},,function(e,t,r){"use strict";r.d(t,"a",(function(){return b})),r.d(t,"b",(function(){return d})),r.d(t,"c",(function(){return p}));var i,n,a,o,s,c=r(158),l=null!=(i=null==(n=c.a.esriConfig)?void 0:n.locale)?i:null==(a=c.a.dojoConfig)?void 0:a.locale;function u(){var e,t;return null!=(e=null!=l?l:null==(t=c.a.navigator)?void 0:t.language)?e:"en"}function d(){return void 0===s&&(s=u()),s}var h=[];function p(e){return h.push(e),{remove(){h.splice(h.indexOf(e),1)}}}var f=[];function b(e){return f.push(e),{remove(){h.splice(f.indexOf(e),1)}}}function v(){var e,t=null!=(e=o)?e:u();s!==t&&(s=t,[...f].forEach((e=>{e.call(null,t)})),[...h].forEach((e=>{e.call(null,t)})))}null==c.a.addEventListener||c.a.addEventListener("languagechange",v)},function(e,t,r){"use strict";r.d(t,"a",(function(){return i})),r.d(t,"b",(function(){return h})),r.d(t,"c",(function(){return d})),r.d(t,"d",(function(){return u})),r.d(t,"e",(function(){return l}));r(80);var i,n,a=r(121),o=r(134),s=r(136),c=r(137);function l(e,t){switch(e.type){case"range":var r="range"in e?e.range[0]:e.minValue,n="range"in e?e.range[1]:e.maxValue;if(+t<r||+t>n)return i.VALUE_OUT_OF_RANGE;break;case"coded-value":case"codedValue":if(null==e.codedValues||e.codedValues.every((e=>null==e||e.code!==t)))return i.INVALID_CODED_VALUE}return null}(n=i||(i={})).VALUE_OUT_OF_RANGE="domain-validation-error::value-out-of-range",n.INVALID_CODED_VALUE="domain-validation-error::invalid-coded-value";var u={key:"type",base:a.a,typeMap:{range:c.a,"coded-value":o.a,inherited:s.a}};function d(e){if(e&&"range"===e.type)return{min:"range"in e?e.range[0]:e.minValue,max:"range"in e?e.range[1]:e.maxValue}}function h(e){if(!e||!e.type)return null;switch(e.type){case"range":return c.a.fromJSON(e);case"codedValue":return o.a.fromJSON(e);case"inherited":return s.a.fromJSON(e)}return null}},function(e,t,r){"use strict";var i,n=r(82),a=(r(80),r(81),r(88),r(85)),o=r(98),s=r(84),c=r(96),l=(r(83),r(86),r(87),r(90)),u=r(140),d=i=class extends l.a{constructor(e){super(e),this.end=null,this.start=null}static get allTime(){return h}static get empty(){return p}readEnd(e,t){return null!=t.end?new Date(t.end):null}writeEnd(e,t){t.end=e?e.getTime():null}get isAllTime(){return this.equals(i.allTime)}get isEmpty(){return this.equals(i.empty)}readStart(e,t){return null!=t.start?new Date(t.start):null}writeStart(e,t){t.start=e?e.getTime():null}clone(){return new i({end:this.end,start:this.start})}expandTo(e){if(this.isEmpty||this.isAllTime)return this.clone();var t=this.start?Object(u.e)(this.start,e):null,r=this.end?Object(u.c)(Object(u.e)(this.end,e),1,e):null;return new i({start:t,end:r})}intersection(e){var t,r,n,a,o,s,c,l;if(!e)return this.clone();if(this.isEmpty||e.isEmpty)return i.empty;if(this.isAllTime)return e.clone();if(e.isAllTime)return this.clone();var u,d,h=null!=(t=null==(r=this.start)?void 0:r.getTime())?t:-1/0,p=null!=(n=null==(a=this.end)?void 0:a.getTime())?n:1/0,f=null!=(o=null==(s=e.start)?void 0:s.getTime())?o:-1/0,b=null!=(c=null==(l=e.end)?void 0:l.getTime())?c:1/0;if(f>=h&&f<=p?u=f:h>=f&&h<=b&&(u=h),p>=f&&p<=b?d=p:b>=h&&b<=p&&(d=b),!isNaN(u)&&!isNaN(d)){var v=new i;return v.start=u===-1/0?null:new Date(u),v.end=d===1/0?null:new Date(d),v}return i.empty}offset(e,t){if(this.isEmpty||this.isAllTime)return this.clone();var r=new i,{start:n,end:a}=this;return n&&(r.start=Object(u.c)(n,e,t)),a&&(r.end=Object(u.c)(a,e,t)),r}equals(e){if(!e)return!1;var t=this.start?this.start.getTime():this.start,r=this.end?this.end.getTime():this.end,i=e.start?e.start.getTime():e.start,n=e.end?e.end.getTime():e.end;return t===i&&r===n}union(e){if(!e||e.isEmpty)return this.clone();if(this.isEmpty)return e.clone();if(this.isAllTime||e.isAllTime)return h.clone();var t=this.start&&e.start?new Date(Math.min(this.start.getTime(),e.start.getTime())):null,r=this.end&&e.end?new Date(Math.max(this.end.getTime(),e.end.getTime())):null;return new i({start:t,end:r})}};Object(n.a)([Object(a.b)({type:Date,json:{write:{allowNull:!0}}})],d.prototype,"end",void 0),Object(n.a)([Object(o.a)("end")],d.prototype,"readEnd",null),Object(n.a)([Object(c.a)("end")],d.prototype,"writeEnd",null),Object(n.a)([Object(a.b)({readOnly:!0,json:{read:!1}})],d.prototype,"isAllTime",null),Object(n.a)([Object(a.b)({readOnly:!0,json:{read:!1}})],d.prototype,"isEmpty",null),Object(n.a)([Object(a.b)({type:Date,json:{write:{allowNull:!0}}})],d.prototype,"start",void 0),Object(n.a)([Object(o.a)("start")],d.prototype,"readStart",null),Object(n.a)([Object(c.a)("start")],d.prototype,"writeStart",null);var h=new(d=i=Object(n.a)([Object(s.a)("esri.TimeExtent")],d)),p=new d({start:void 0,end:void 0}),f=d;t.a=f},,function(e,t,r){"use strict";r.d(t,"a",(function(){return p})),r.d(t,"b",(function(){return h})),r.d(t,"c",(function(){return u})),r.d(t,"d",(function(){return d})),r.d(t,"e",(function(){return c}));var i,n=r(91),a=r(7),o=r(89),s=r(99);r(101);function c(){return l.apply(this,arguments)}function l(){return(l=Object(a.a)((function*(){return i||(i=Object(a.a)((function*(){var e=yield Promise.all([r.e(31),r.e(134)]).then(r.bind(null,383));return yield e.arcade.load(),{arcade:e.arcade,arcadeUtils:e,Dictionary:e.Dictionary,Feature:e.arcadeFeature}}))()),i}))).apply(this,arguments)}var u=(e,t,r)=>p.create(e,t,r,null,["$feature"]),d=(e,t,r)=>p.create(e,t,r,null,["$feature","$view"]),h=(e,t,r,i)=>p.create(e,t,r,i,["$feature","$view"]);class p{constructor(e,t,r,i,n,a,o,s){this.script=e,this.evaluate=n,this.fields=o,this._syntaxTree=i,this._arcade=t,this._arcadeDictionary=r,this._arcadeFeature=a,this._spatialReference=s,this._referencesGeometry=t.scriptTouchesGeometry(this._syntaxTree),this._referencesScale=this._arcade.referencesMember(this._syntaxTree,"scale")}static create(e,t,r,i,l,u){return Object(a.a)((function*(){var{arcade:a,Feature:d,Dictionary:h}=yield c(),f=s.a.fromJSON(t),b=a.parseScript(e,u),v=l.reduce(((e,t)=>Object(n.a)(Object(n.a)({},e),{},{[t]:null})),{}),m=null;Object(o.k)(i)&&((m=new h(i)).immutable=!0,v.$config=null);var g=a.scriptUsesGeometryEngine(b)&&a.enableGeometrySupport(),y=a.scriptUsesFeatureSet(b)&&a.enableFeatureSetSupport(),O=a.scriptIsAsync(b)&&a.enableAsyncSupport(),j={vars:v,spatialReference:f,useAsync:!!O},_=new h;_.immutable=!1,_.setField("scale",0);var w=a.compileScript(b,j);return yield Promise.all([g,y,O]),new p(e,a,h,b,(e=>("$view"in e&&e.$view&&(_.setField("scale",e.$view.scale),e.$view=_),m&&(e.$config=m),w({vars:e,spatialReference:f}))),new d,r,f)}))()}repurposeFeature(e){return e.geometry&&!e.geometry.spatialReference&&(e.geometry.spatialReference=this._spatialReference),this._arcadeFeature.repurposeFromGraphicLikeObject(e.geometry,e.attributes,{fields:this.fields}),this._arcadeFeature}repurposeAdapter(e){return this._arcadeFeature.repurposeFromAdapter(e,{fields:this.fields}),this._arcadeFeature}createDictionary(){return new this._arcadeDictionary}referencesMember(e){return this._arcade.referencesMember(this._syntaxTree,e)}referencesFunction(e){return this._arcade.referencesFunction(this._syntaxTree,e)}referencesGeometry(){return this._referencesGeometry}referencesScale(){return this._referencesScale}extractFieldLiterals(e){return this._arcade.extractFieldLiterals(this._syntaxTree,e)}}},,function(e,t,r){"use strict";var i=r(91),n=r(7),a=r(82),o=(r(80),r(81)),s=r(85),c=r(116),l=r(288),u=r(84),d=(r(83),r(86)),h=(r(87),r(329)),p=r(94),f=r(435),b=r(131),v=r(148),m=r(206),g=(r(171),r(227)),y=r(115),O=r(108),j=r(385),_=r(114),w=(r(302),r(367)),x=o.a.getLogger("esri.widgets.Widget"),S=0,M="esri-icon-checkbox-unchecked",T=Object(w.a)(),P=!1,E=class extends(Object(g.b)(b.a.EventedAccessor)){constructor(e,t){var r;super(e,t),r=this,this._attached=!1,this._internalHandles=new y.a,this._projector=T,this.domNode=null,this.iconClass=M,this.label=this.declaredClass.split(".").pop(),this.visible=!0,this._loadLocale=Object(p.i)(Object(n.a)((function*(){if(r._messageBundleProps&&r._messageBundleProps.length){var e=yield Object(p.j)(r._messageBundleProps.map(function(){var e=Object(n.a)((function*({bundlePath:e,propertyName:t}){r[t]=yield Object(m.a)(e)}));return function(t){return e.apply(this,arguments)}}()));for(var t of e)t.error&&x.error("widget-intl:locale-error",r.declaredClass,t.error)}yield r.loadLocale()})));var i=Object(_.d)()||"light";["light","dark"].includes(i)||Object(l.a)(x,"The following themes are deprecated: light-blue, dark-blue, light-green, dark-green, light-purple, dark-purple, light-red, and dark-red.",{version:"4.19",warnOnce:!0,see:"https://developers.arcgis.com/javascript/latest/styling/"});var a="esri-widget-uid-"+Object(d.a)(),o=this.render.bind(this),s=!1;this._trackingTarget=new f.a((()=>this.scheduleRender()));var c=()=>{if(!s||this.destroyed)return null;var e=o();return e.properties?e.properties.key||(e.properties.key=a):e.properties={key:a},e};this.render=()=>{if(P)return c();var e;this._trackingTarget.clear(),P=!0;try{e=Object(h.b)(this._trackingTarget,c)}finally{P=!1}return e},this.addResolvingPromise(this._resourcesFetch=this.beforeFirstRender().then((()=>{s=!0,this._postInitialize()})))}normalizeCtorArgs(e,t){var r=Object(i.a)({},e);return t&&(r.container=t),r}postInitialize(){}beforeFirstRender(){return this._loadLocale().catch(p.v)}loadLocale(){return Object(n.a)((function*(){}))()}destroy(){this.destroyed||(this._trackingTarget.destroy(),this._trackingTarget=null,this.viewModel&&(this.viewModel.destroy(),this.viewModel=null),this._detach(this.container),this._set("container",null),this._internalHandles.destroy(),this._emitter.clear(),this.render=()=>null,this._projector=null)}set container(e){this._get("container")||this._set("container",e)}castContainer(e){return Object(j.a)(e)}get id(){return this._get("id")||this.get("container.id")||Date.now().toString(16)+"-widget-"+S++}set id(e){e&&this._set("id",e)}get renderable(){return this._resourcesFetch}render(){throw new Error("not implemented")}scheduleRender(){this.destroyed||this._projector.scheduleRender()}classes(...e){return _.a.apply(this,e)}own(e){arguments.length>1&&(e=Array.prototype.slice.call(arguments)),this._internalHandles.add(e)}renderNow(){this._projector.renderNow()}_postInitialize(){var e,t=this;this.destroyed||(this.scheduleRender(),null!=(e=this._delegatedEventNames)&&e.length&&this._internalHandles.add(Object(O.a)(this,"viewModel",((e,t)=>{t&&this._internalHandles.remove("delegated-events"),e&&this._internalHandles.add(this._delegatedEventNames.map((t=>e.on(t,(e=>{this.emit(t,e)})))),"delegated-events")}))),this.postInitialize(),this._internalHandles.add(Object(v.c)(Object(n.a)((function*(){yield t._loadLocale().catch(p.v),t.scheduleRender()})))),this._internalHandles.add(Object(O.j)(this,"container",function(){var e=Object(n.a)((function*(e){t.destroyed||t._attach(e)}));return function(t){return e.apply(this,arguments)}}())))}_attach(e){e&&(this._projector.merge(e,this.render),this._attached=!0)}_detach(e){e&&this._attached&&(this._projector.detach(this.render),e.parentNode&&e.parentNode.removeChild(e),this._attached=!1)}};Object(a.a)([Object(s.b)({value:null})],E.prototype,"container",null),Object(a.a)([Object(c.a)("container")],E.prototype,"castContainer",null),Object(a.a)([Object(s.b)({aliasOf:"container"})],E.prototype,"domNode",void 0),Object(a.a)([Object(s.b)()],E.prototype,"iconClass",void 0),Object(a.a)([Object(s.b)()],E.prototype,"id",null),Object(a.a)([Object(s.b)()],E.prototype,"label",void 0),Object(a.a)([Object(s.b)()],E.prototype,"renderable",null),Object(a.a)([Object(s.b)()],E.prototype,"viewModel",void 0),Object(a.a)([Object(s.b)()],E.prototype,"visible",void 0);var C=E=Object(a.a)([Object(u.a)("esri.widgets.Widget")],E);t.a=C},function(e,t,r){"use strict";var i,n=r(82),a=(r(80),r(81),r(88)),o=r(85),s=r(95),c=r(102),l=r(98),u=r(84),d=(r(83),r(86),r(87),r(90)),h=r(149),p=r(237),f=new s.a({binary:"binary",coordinate:"coordinate",countOrAmount:"count-or-amount",dateAndTime:"date-and-time",description:"description",locationOrPlaceName:"location-or-place-name",measurement:"measurement",nameOrTitle:"name-or-title",none:"none",orderedOrRanked:"ordered-or-ranked",percentageOrRatio:"percentage-or-ratio",typeOrCategory:"type-or-category",uniqueIdentifier:"unique-identifier"}),b=i=class extends d.a{constructor(e){super(e),this.alias=null,this.defaultValue=void 0,this.description=null,this.domain=null,this.editable=!0,this.length=-1,this.name=null,this.nullable=!0,this.type=null,this.valueType=null}readDescription(e,{description:t}){var r;try{r=JSON.parse(t)}catch(i){}return r?r.value:null}readValueType(e,{description:t}){var r;try{r=JSON.parse(t)}catch(i){}return r?f.fromJSON(r.fieldValueType):null}clone(){return new i({alias:this.alias,defaultValue:this.defaultValue,description:this.description,domain:this.domain&&this.domain.clone()||null,editable:this.editable,length:this.length,name:this.name,nullable:this.nullable,type:this.type,valueType:this.valueType})}};Object(n.a)([Object(o.b)({type:String,json:{write:!0}})],b.prototype,"alias",void 0),Object(n.a)([Object(o.b)({type:[String,Number],json:{write:{allowNull:!0}}})],b.prototype,"defaultValue",void 0),Object(n.a)([Object(o.b)()],b.prototype,"description",void 0),Object(n.a)([Object(l.a)("description")],b.prototype,"readDescription",null),Object(n.a)([Object(o.b)({types:h.d,json:{read:{reader:h.b},write:!0}})],b.prototype,"domain",void 0),Object(n.a)([Object(o.b)({type:Boolean,json:{write:!0}})],b.prototype,"editable",void 0),Object(n.a)([Object(o.b)({type:a.a,json:{write:!0}})],b.prototype,"length",void 0),Object(n.a)([Object(o.b)({type:String,json:{write:!0}})],b.prototype,"name",void 0),Object(n.a)([Object(o.b)({type:Boolean,json:{write:!0}})],b.prototype,"nullable",void 0),Object(n.a)([Object(c.a)(p.a)],b.prototype,"type",void 0),Object(n.a)([Object(o.b)()],b.prototype,"valueType",void 0),Object(n.a)([Object(l.a)("valueType",["description"])],b.prototype,"readValueType",null);var v=b=i=Object(n.a)([Object(u.a)("esri.layers.support.Field")],b);t.a=v},,function(e,t,r){"use strict";r.d(t,"a",(function(){return l})),r.d(t,"b",(function(){return c})),r.d(t,"c",(function(){return a})),r.d(t,"d",(function(){return o})),r.d(t,"e",(function(){return f})),r.d(t,"f",(function(){return b})),r.d(t,"g",(function(){return v})),r.d(t,"h",(function(){return S})),r.d(t,"i",(function(){return s})),r.d(t,"j",(function(){return y})),r.d(t,"k",(function(){return T})),r.d(t,"l",(function(){return u})),r.d(t,"m",(function(){return w})),r.d(t,"n",(function(){return M})),r.d(t,"o",(function(){return g})),r.d(t,"p",(function(){return x})),r.d(t,"q",(function(){return p})),r.d(t,"r",(function(){return h})),r.d(t,"s",(function(){return d})),r.d(t,"t",(function(){return m})),r.d(t,"u",(function(){return O}));var i=r(104),n=r(184);function a(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function o(e,t,r,i,n,a,o,s,c,l,u,d,h,p,f,b,v){return e[0]=t,e[1]=r,e[2]=i,e[3]=n,e[4]=a,e[5]=o,e[6]=s,e[7]=c,e[8]=l,e[9]=u,e[10]=d,e[11]=h,e[12]=p,e[13]=f,e[14]=b,e[15]=v,e}function s(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function c(e,t){if(e===t){var r=t[1],i=t[2],n=t[3],a=t[6],o=t[7],s=t[11];e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=r,e[6]=t[9],e[7]=t[13],e[8]=i,e[9]=a,e[11]=t[14],e[12]=n,e[13]=o,e[14]=s}else e[0]=t[0],e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=t[1],e[5]=t[5],e[6]=t[9],e[7]=t[13],e[8]=t[2],e[9]=t[6],e[10]=t[10],e[11]=t[14],e[12]=t[3],e[13]=t[7],e[14]=t[11],e[15]=t[15];return e}function l(e,t){var r=t[0],i=t[1],n=t[2],a=t[3],o=t[4],s=t[5],c=t[6],l=t[7],u=t[8],d=t[9],h=t[10],p=t[11],f=t[12],b=t[13],v=t[14],m=t[15],g=r*s-i*o,y=r*c-n*o,O=r*l-a*o,j=i*c-n*s,_=i*l-a*s,w=n*l-a*c,x=u*b-d*f,S=u*v-h*f,M=u*m-p*f,T=d*v-h*b,P=d*m-p*b,E=h*m-p*v,C=g*E-y*P+O*T+j*M-_*S+w*x;return C?(C=1/C,e[0]=(s*E-c*P+l*T)*C,e[1]=(n*P-i*E-a*T)*C,e[2]=(b*w-v*_+m*j)*C,e[3]=(h*_-d*w-p*j)*C,e[4]=(c*M-o*E-l*S)*C,e[5]=(r*E-n*M+a*S)*C,e[6]=(v*O-f*w-m*y)*C,e[7]=(u*w-h*O+p*y)*C,e[8]=(o*P-s*M+l*x)*C,e[9]=(i*M-r*P-a*x)*C,e[10]=(f*_-b*O+m*g)*C,e[11]=(d*O-u*_-p*g)*C,e[12]=(s*S-o*T-c*x)*C,e[13]=(r*T-i*S+n*x)*C,e[14]=(b*y-f*j-v*g)*C,e[15]=(u*j-d*y+h*g)*C,e):null}function u(e,t,r){var i=t[0],n=t[1],a=t[2],o=t[3],s=t[4],c=t[5],l=t[6],u=t[7],d=t[8],h=t[9],p=t[10],f=t[11],b=t[12],v=t[13],m=t[14],g=t[15],y=r[0],O=r[1],j=r[2],_=r[3];return e[0]=y*i+O*s+j*d+_*b,e[1]=y*n+O*c+j*h+_*v,e[2]=y*a+O*l+j*p+_*m,e[3]=y*o+O*u+j*f+_*g,y=r[4],O=r[5],j=r[6],_=r[7],e[4]=y*i+O*s+j*d+_*b,e[5]=y*n+O*c+j*h+_*v,e[6]=y*a+O*l+j*p+_*m,e[7]=y*o+O*u+j*f+_*g,y=r[8],O=r[9],j=r[10],_=r[11],e[8]=y*i+O*s+j*d+_*b,e[9]=y*n+O*c+j*h+_*v,e[10]=y*a+O*l+j*p+_*m,e[11]=y*o+O*u+j*f+_*g,y=r[12],O=r[13],j=r[14],_=r[15],e[12]=y*i+O*s+j*d+_*b,e[13]=y*n+O*c+j*h+_*v,e[14]=y*a+O*l+j*p+_*m,e[15]=y*o+O*u+j*f+_*g,e}function d(e,t,r){var i,n,a,o,s,c,l,u,d,h,p,f,b=r[0],v=r[1],m=r[2];return t===e?(e[12]=t[0]*b+t[4]*v+t[8]*m+t[12],e[13]=t[1]*b+t[5]*v+t[9]*m+t[13],e[14]=t[2]*b+t[6]*v+t[10]*m+t[14],e[15]=t[3]*b+t[7]*v+t[11]*m+t[15]):(i=t[0],n=t[1],a=t[2],o=t[3],s=t[4],c=t[5],l=t[6],u=t[7],d=t[8],h=t[9],p=t[10],f=t[11],e[0]=i,e[1]=n,e[2]=a,e[3]=o,e[4]=s,e[5]=c,e[6]=l,e[7]=u,e[8]=d,e[9]=h,e[10]=p,e[11]=f,e[12]=i*b+s*v+d*m+t[12],e[13]=n*b+c*v+h*m+t[13],e[14]=a*b+l*v+p*m+t[14],e[15]=o*b+u*v+f*m+t[15]),e}function h(e,t,r){var i=r[0],n=r[1],a=r[2];return e[0]=t[0]*i,e[1]=t[1]*i,e[2]=t[2]*i,e[3]=t[3]*i,e[4]=t[4]*n,e[5]=t[5]*n,e[6]=t[6]*n,e[7]=t[7]*n,e[8]=t[8]*a,e[9]=t[9]*a,e[10]=t[10]*a,e[11]=t[11]*a,e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function p(e,t,r,i){var a,o,s,c,l,u,d,h,p,f,b,v,m,g,y,O,j,_,w,x,S,M,T,P,E=i[0],C=i[1],A=i[2],I=Math.sqrt(E*E+C*C+A*A);return I<n.a?null:(E*=I=1/I,C*=I,A*=I,a=Math.sin(r),s=1-(o=Math.cos(r)),c=t[0],l=t[1],u=t[2],d=t[3],h=t[4],p=t[5],f=t[6],b=t[7],v=t[8],m=t[9],g=t[10],y=t[11],O=E*E*s+o,j=C*E*s+A*a,_=A*E*s-C*a,w=E*C*s-A*a,x=C*C*s+o,S=A*C*s+E*a,M=E*A*s+C*a,T=C*A*s-E*a,P=A*A*s+o,e[0]=c*O+h*j+v*_,e[1]=l*O+p*j+m*_,e[2]=u*O+f*j+g*_,e[3]=d*O+b*j+y*_,e[4]=c*w+h*x+v*S,e[5]=l*w+p*x+m*S,e[6]=u*w+f*x+g*S,e[7]=d*w+b*x+y*S,e[8]=c*M+h*T+v*P,e[9]=l*M+p*T+m*P,e[10]=u*M+f*T+g*P,e[11]=d*M+b*T+y*P,t!==e&&(e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e)}function f(e,t,r){var i=Math.sin(r),n=Math.cos(r),a=t[4],o=t[5],s=t[6],c=t[7],l=t[8],u=t[9],d=t[10],h=t[11];return t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[4]=a*n+l*i,e[5]=o*n+u*i,e[6]=s*n+d*i,e[7]=c*n+h*i,e[8]=l*n-a*i,e[9]=u*n-o*i,e[10]=d*n-s*i,e[11]=h*n-c*i,e}function b(e,t,r){var i=Math.sin(r),n=Math.cos(r),a=t[0],o=t[1],s=t[2],c=t[3],l=t[8],u=t[9],d=t[10],h=t[11];return t!==e&&(e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=a*n-l*i,e[1]=o*n-u*i,e[2]=s*n-d*i,e[3]=c*n-h*i,e[8]=a*i+l*n,e[9]=o*i+u*n,e[10]=s*i+d*n,e[11]=c*i+h*n,e}function v(e,t,r){var i=Math.sin(r),n=Math.cos(r),a=t[0],o=t[1],s=t[2],c=t[3],l=t[4],u=t[5],d=t[6],h=t[7];return t!==e&&(e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=a*n+l*i,e[1]=o*n+u*i,e[2]=s*n+d*i,e[3]=c*n+h*i,e[4]=l*n-a*i,e[5]=u*n-o*i,e[6]=d*n-s*i,e[7]=h*n-c*i,e}function m(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=t[0],e[13]=t[1],e[14]=t[2],e[15]=1,e}function g(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=t[1],e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=t[2],e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function y(e,t){var r=Math.sin(t),i=Math.cos(t);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=i,e[6]=r,e[7]=0,e[8]=0,e[9]=-r,e[10]=i,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function O(e,t){var r=Math.sin(t),i=Math.cos(t);return e[0]=i,e[1]=r,e[2]=0,e[3]=0,e[4]=-r,e[5]=i,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function j(e,t,r){var i=t[0],n=t[1],a=t[2],o=t[3],s=i+i,c=n+n,l=a+a,u=i*s,d=i*c,h=i*l,p=n*c,f=n*l,b=a*l,v=o*s,m=o*c,g=o*l;return e[0]=1-(p+b),e[1]=d+g,e[2]=h-m,e[3]=0,e[4]=d-g,e[5]=1-(u+b),e[6]=f+v,e[7]=0,e[8]=h+m,e[9]=f-v,e[10]=1-(u+p),e[11]=0,e[12]=r[0],e[13]=r[1],e[14]=r[2],e[15]=1,e}var _=Object(i.e)();function w(e,t){return e[0]=t[12],e[1]=t[13],e[2]=t[14],e}function x(e,t){var r=t[0],i=t[1],n=t[2],a=t[3],o=r+r,s=i+i,c=n+n,l=r*o,u=i*o,d=i*s,h=n*o,p=n*s,f=n*c,b=a*o,v=a*s,m=a*c;return e[0]=1-d-f,e[1]=u+m,e[2]=h-v,e[3]=0,e[4]=u-m,e[5]=1-l-f,e[6]=p+b,e[7]=0,e[8]=h+v,e[9]=p-b,e[10]=1-l-d,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function S(e,t,r,i,n,a,o){var s=1/(r-t),c=1/(n-i),l=1/(a-o);return e[0]=2*a*s,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=2*a*c,e[6]=0,e[7]=0,e[8]=(r+t)*s,e[9]=(n+i)*c,e[10]=(o+a)*l,e[11]=-1,e[12]=0,e[13]=0,e[14]=o*a*2*l,e[15]=0,e}function M(e,t,r,i,n,a,o){var s=1/(t-r),c=1/(i-n),l=1/(a-o);return e[0]=-2*s,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*c,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*l,e[11]=0,e[12]=(t+r)*s,e[13]=(n+i)*c,e[14]=(o+a)*l,e[15]=1,e}function T(e,t,r,i){var a,o,c,l,u,d,h,p,f,b,v=t[0],m=t[1],g=t[2],y=i[0],O=i[1],j=i[2],_=r[0],w=r[1],x=r[2];return Math.abs(v-_)<n.a&&Math.abs(m-w)<n.a&&Math.abs(g-x)<n.a?s(e):(h=v-_,p=m-w,f=g-x,a=O*(f*=b=1/Math.sqrt(h*h+p*p+f*f))-j*(p*=b),o=j*(h*=b)-y*f,c=y*p-O*h,(b=Math.sqrt(a*a+o*o+c*c))?(a*=b=1/b,o*=b,c*=b):(a=0,o=0,c=0),l=p*c-f*o,u=f*a-h*c,d=h*o-p*a,(b=Math.sqrt(l*l+u*u+d*d))?(l*=b=1/b,u*=b,d*=b):(l=0,u=0,d=0),e[0]=a,e[1]=l,e[2]=h,e[3]=0,e[4]=o,e[5]=u,e[6]=p,e[7]=0,e[8]=c,e[9]=d,e[10]=f,e[11]=0,e[12]=-(a*v+o*m+c*g),e[13]=-(l*v+u*m+d*g),e[14]=-(h*v+p*m+f*g),e[15]=1,e)}function P(e,t,r){return e[0]=t[0]-r[0],e[1]=t[1]-r[1],e[2]=t[2]-r[2],e[3]=t[3]-r[3],e[4]=t[4]-r[4],e[5]=t[5]-r[5],e[6]=t[6]-r[6],e[7]=t[7]-r[7],e[8]=t[8]-r[8],e[9]=t[9]-r[9],e[10]=t[10]-r[10],e[11]=t[11]-r[11],e[12]=t[12]-r[12],e[13]=t[13]-r[13],e[14]=t[14]-r[14],e[15]=t[15]-r[15],e}var E=u,C=P;Object.freeze({__proto__:null,copy:a,set:o,identity:s,transpose:c,invert:l,adjoint:function(e,t){var r=t[0],i=t[1],n=t[2],a=t[3],o=t[4],s=t[5],c=t[6],l=t[7],u=t[8],d=t[9],h=t[10],p=t[11],f=t[12],b=t[13],v=t[14],m=t[15];return e[0]=s*(h*m-p*v)-d*(c*m-l*v)+b*(c*p-l*h),e[1]=-(i*(h*m-p*v)-d*(n*m-a*v)+b*(n*p-a*h)),e[2]=i*(c*m-l*v)-s*(n*m-a*v)+b*(n*l-a*c),e[3]=-(i*(c*p-l*h)-s*(n*p-a*h)+d*(n*l-a*c)),e[4]=-(o*(h*m-p*v)-u*(c*m-l*v)+f*(c*p-l*h)),e[5]=r*(h*m-p*v)-u*(n*m-a*v)+f*(n*p-a*h),e[6]=-(r*(c*m-l*v)-o*(n*m-a*v)+f*(n*l-a*c)),e[7]=r*(c*p-l*h)-o*(n*p-a*h)+u*(n*l-a*c),e[8]=o*(d*m-p*b)-u*(s*m-l*b)+f*(s*p-l*d),e[9]=-(r*(d*m-p*b)-u*(i*m-a*b)+f*(i*p-a*d)),e[10]=r*(s*m-l*b)-o*(i*m-a*b)+f*(i*l-a*s),e[11]=-(r*(s*p-l*d)-o*(i*p-a*d)+u*(i*l-a*s)),e[12]=-(o*(d*v-h*b)-u*(s*v-c*b)+f*(s*h-c*d)),e[13]=r*(d*v-h*b)-u*(i*v-n*b)+f*(i*h-n*d),e[14]=-(r*(s*v-c*b)-o*(i*v-n*b)+f*(i*c-n*s)),e[15]=r*(s*h-c*d)-o*(i*h-n*d)+u*(i*c-n*s),e},determinant:function(e){var t=e[0],r=e[1],i=e[2],n=e[3],a=e[4],o=e[5],s=e[6],c=e[7],l=e[8],u=e[9],d=e[10],h=e[11],p=e[12],f=e[13],b=e[14],v=e[15];return(t*o-r*a)*(d*v-h*b)-(t*s-i*a)*(u*v-h*f)+(t*c-n*a)*(u*b-d*f)+(r*s-i*o)*(l*v-h*p)-(r*c-n*o)*(l*b-d*p)+(i*c-n*s)*(l*f-u*p)},multiply:u,translate:d,scale:h,rotate:p,rotateX:f,rotateY:b,rotateZ:v,fromTranslation:m,fromScaling:g,fromRotation:function(e,t,r){var i,a,o,s=r[0],c=r[1],l=r[2],u=Math.sqrt(s*s+c*c+l*l);return u<n.a?null:(s*=u=1/u,c*=u,l*=u,i=Math.sin(t),o=1-(a=Math.cos(t)),e[0]=s*s*o+a,e[1]=c*s*o+l*i,e[2]=l*s*o-c*i,e[3]=0,e[4]=s*c*o-l*i,e[5]=c*c*o+a,e[6]=l*c*o+s*i,e[7]=0,e[8]=s*l*o+c*i,e[9]=c*l*o-s*i,e[10]=l*l*o+a,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e)},fromXRotation:y,fromYRotation:function(e,t){var r=Math.sin(t),i=Math.cos(t);return e[0]=i,e[1]=0,e[2]=-r,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=r,e[9]=0,e[10]=i,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},fromZRotation:O,fromRotationTranslation:j,fromQuat2:function(e,t){var r=_,i=-t[0],n=-t[1],a=-t[2],o=t[3],s=t[4],c=t[5],l=t[6],u=t[7],d=i*i+n*n+a*a+o*o;return d>0?(r[0]=2*(s*o+u*i+c*a-l*n)/d,r[1]=2*(c*o+u*n+l*i-s*a)/d,r[2]=2*(l*o+u*a+s*n-c*i)/d):(r[0]=2*(s*o+u*i+c*a-l*n),r[1]=2*(c*o+u*n+l*i-s*a),r[2]=2*(l*o+u*a+s*n-c*i)),j(e,t,r),e},getTranslation:w,getScaling:function(e,t){var r=t[0],i=t[1],n=t[2],a=t[4],o=t[5],s=t[6],c=t[8],l=t[9],u=t[10];return e[0]=Math.sqrt(r*r+i*i+n*n),e[1]=Math.sqrt(a*a+o*o+s*s),e[2]=Math.sqrt(c*c+l*l+u*u),e},getRotation:function(e,t){var r=t[0]+t[5]+t[10],i=0;return r>0?(i=2*Math.sqrt(r+1),e[3]=.25*i,e[0]=(t[6]-t[9])/i,e[1]=(t[8]-t[2])/i,e[2]=(t[1]-t[4])/i):t[0]>t[5]&&t[0]>t[10]?(i=2*Math.sqrt(1+t[0]-t[5]-t[10]),e[3]=(t[6]-t[9])/i,e[0]=.25*i,e[1]=(t[1]+t[4])/i,e[2]=(t[8]+t[2])/i):t[5]>t[10]?(i=2*Math.sqrt(1+t[5]-t[0]-t[10]),e[3]=(t[8]-t[2])/i,e[0]=(t[1]+t[4])/i,e[1]=.25*i,e[2]=(t[6]+t[9])/i):(i=2*Math.sqrt(1+t[10]-t[0]-t[5]),e[3]=(t[1]-t[4])/i,e[0]=(t[8]+t[2])/i,e[1]=(t[6]+t[9])/i,e[2]=.25*i),e},fromRotationTranslationScale:function(e,t,r,i){var n=t[0],a=t[1],o=t[2],s=t[3],c=n+n,l=a+a,u=o+o,d=n*c,h=n*l,p=n*u,f=a*l,b=a*u,v=o*u,m=s*c,g=s*l,y=s*u,O=i[0],j=i[1],_=i[2];return e[0]=(1-(f+v))*O,e[1]=(h+y)*O,e[2]=(p-g)*O,e[3]=0,e[4]=(h-y)*j,e[5]=(1-(d+v))*j,e[6]=(b+m)*j,e[7]=0,e[8]=(p+g)*_,e[9]=(b-m)*_,e[10]=(1-(d+f))*_,e[11]=0,e[12]=r[0],e[13]=r[1],e[14]=r[2],e[15]=1,e},fromRotationTranslationScaleOrigin:function(e,t,r,i,n){var a=t[0],o=t[1],s=t[2],c=t[3],l=a+a,u=o+o,d=s+s,h=a*l,p=a*u,f=a*d,b=o*u,v=o*d,m=s*d,g=c*l,y=c*u,O=c*d,j=i[0],_=i[1],w=i[2],x=n[0],S=n[1],M=n[2],T=(1-(b+m))*j,P=(p+O)*j,E=(f-y)*j,C=(p-O)*_,A=(1-(h+m))*_,I=(v+g)*_,k=(f+y)*w,F=(v-g)*w,R=(1-(h+b))*w;return e[0]=T,e[1]=P,e[2]=E,e[3]=0,e[4]=C,e[5]=A,e[6]=I,e[7]=0,e[8]=k,e[9]=F,e[10]=R,e[11]=0,e[12]=r[0]+x-(T*x+C*S+k*M),e[13]=r[1]+S-(P*x+A*S+F*M),e[14]=r[2]+M-(E*x+I*S+R*M),e[15]=1,e},fromQuat:x,frustum:S,perspective:function(e,t,r,i,n){var a,o=1/Math.tan(t/2);return e[0]=o/r,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=o,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=-1,e[12]=0,e[13]=0,e[15]=0,null!=n&&n!==1/0?(a=1/(i-n),e[10]=(n+i)*a,e[14]=2*n*i*a):(e[10]=-1,e[14]=-2*i),e},perspectiveFromFieldOfView:function(e,t,r,i){var n=Math.tan(t.upDegrees*Math.PI/180),a=Math.tan(t.downDegrees*Math.PI/180),o=Math.tan(t.leftDegrees*Math.PI/180),s=Math.tan(t.rightDegrees*Math.PI/180),c=2/(o+s),l=2/(n+a);return e[0]=c,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=l,e[6]=0,e[7]=0,e[8]=-(o-s)*c*.5,e[9]=(n-a)*l*.5,e[10]=i/(r-i),e[11]=-1,e[12]=0,e[13]=0,e[14]=i*r/(r-i),e[15]=0,e},ortho:M,lookAt:T,targetTo:function(e,t,r,i){var n=t[0],a=t[1],o=t[2],s=i[0],c=i[1],l=i[2],u=n-r[0],d=a-r[1],h=o-r[2],p=u*u+d*d+h*h;p>0&&(u*=p=1/Math.sqrt(p),d*=p,h*=p);var f=c*h-l*d,b=l*u-s*h,v=s*d-c*u;return(p=f*f+b*b+v*v)>0&&(f*=p=1/Math.sqrt(p),b*=p,v*=p),e[0]=f,e[1]=b,e[2]=v,e[3]=0,e[4]=d*v-h*b,e[5]=h*f-u*v,e[6]=u*b-d*f,e[7]=0,e[8]=u,e[9]=d,e[10]=h,e[11]=0,e[12]=n,e[13]=a,e[14]=o,e[15]=1,e},str:function(e){return"mat4("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+", "+e[8]+", "+e[9]+", "+e[10]+", "+e[11]+", "+e[12]+", "+e[13]+", "+e[14]+", "+e[15]+")"},frob:function(e){return Math.sqrt(Math.pow(e[0],2)+Math.pow(e[1],2)+Math.pow(e[2],2)+Math.pow(e[3],2)+Math.pow(e[4],2)+Math.pow(e[5],2)+Math.pow(e[6],2)+Math.pow(e[7],2)+Math.pow(e[8],2)+Math.pow(e[9],2)+Math.pow(e[10],2)+Math.pow(e[11],2)+Math.pow(e[12],2)+Math.pow(e[13],2)+Math.pow(e[14],2)+Math.pow(e[15],2))},add:function(e,t,r){return e[0]=t[0]+r[0],e[1]=t[1]+r[1],e[2]=t[2]+r[2],e[3]=t[3]+r[3],e[4]=t[4]+r[4],e[5]=t[5]+r[5],e[6]=t[6]+r[6],e[7]=t[7]+r[7],e[8]=t[8]+r[8],e[9]=t[9]+r[9],e[10]=t[10]+r[10],e[11]=t[11]+r[11],e[12]=t[12]+r[12],e[13]=t[13]+r[13],e[14]=t[14]+r[14],e[15]=t[15]+r[15],e},subtract:P,multiplyScalar:function(e,t,r){return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e[4]=t[4]*r,e[5]=t[5]*r,e[6]=t[6]*r,e[7]=t[7]*r,e[8]=t[8]*r,e[9]=t[9]*r,e[10]=t[10]*r,e[11]=t[11]*r,e[12]=t[12]*r,e[13]=t[13]*r,e[14]=t[14]*r,e[15]=t[15]*r,e},multiplyScalarAndAdd:function(e,t,r,i){return e[0]=t[0]+r[0]*i,e[1]=t[1]+r[1]*i,e[2]=t[2]+r[2]*i,e[3]=t[3]+r[3]*i,e[4]=t[4]+r[4]*i,e[5]=t[5]+r[5]*i,e[6]=t[6]+r[6]*i,e[7]=t[7]+r[7]*i,e[8]=t[8]+r[8]*i,e[9]=t[9]+r[9]*i,e[10]=t[10]+r[10]*i,e[11]=t[11]+r[11]*i,e[12]=t[12]+r[12]*i,e[13]=t[13]+r[13]*i,e[14]=t[14]+r[14]*i,e[15]=t[15]+r[15]*i,e},exactEquals:function(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]&&e[6]===t[6]&&e[7]===t[7]&&e[8]===t[8]&&e[9]===t[9]&&e[10]===t[10]&&e[11]===t[11]&&e[12]===t[12]&&e[13]===t[13]&&e[14]===t[14]&&e[15]===t[15]},equals:function(e,t){var r=e[0],i=e[1],a=e[2],o=e[3],s=e[4],c=e[5],l=e[6],u=e[7],d=e[8],h=e[9],p=e[10],f=e[11],b=e[12],v=e[13],m=e[14],g=e[15],y=t[0],O=t[1],j=t[2],_=t[3],w=t[4],x=t[5],S=t[6],M=t[7],T=t[8],P=t[9],E=t[10],C=t[11],A=t[12],I=t[13],k=t[14],F=t[15];return Math.abs(r-y)<=n.a*Math.max(1,Math.abs(r),Math.abs(y))&&Math.abs(i-O)<=n.a*Math.max(1,Math.abs(i),Math.abs(O))&&Math.abs(a-j)<=n.a*Math.max(1,Math.abs(a),Math.abs(j))&&Math.abs(o-_)<=n.a*Math.max(1,Math.abs(o),Math.abs(_))&&Math.abs(s-w)<=n.a*Math.max(1,Math.abs(s),Math.abs(w))&&Math.abs(c-x)<=n.a*Math.max(1,Math.abs(c),Math.abs(x))&&Math.abs(l-S)<=n.a*Math.max(1,Math.abs(l),Math.abs(S))&&Math.abs(u-M)<=n.a*Math.max(1,Math.abs(u),Math.abs(M))&&Math.abs(d-T)<=n.a*Math.max(1,Math.abs(d),Math.abs(T))&&Math.abs(h-P)<=n.a*Math.max(1,Math.abs(h),Math.abs(P))&&Math.abs(p-E)<=n.a*Math.max(1,Math.abs(p),Math.abs(E))&&Math.abs(f-C)<=n.a*Math.max(1,Math.abs(f),Math.abs(C))&&Math.abs(b-A)<=n.a*Math.max(1,Math.abs(b),Math.abs(A))&&Math.abs(v-I)<=n.a*Math.max(1,Math.abs(v),Math.abs(I))&&Math.abs(m-k)<=n.a*Math.max(1,Math.abs(m),Math.abs(k))&&Math.abs(g-F)<=n.a*Math.max(1,Math.abs(g),Math.abs(F))},mul:E,sub:C})},function(e,t,r){"use strict";(function(e){var r="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof e?e:void 0;t.a=r}).call(this,r(172))},function(e,t,r){"use strict";var i=r(158),n=(r(80),r(124)),a={apiKey:void 0,applicationUrl:i.a.location&&i.a.location.href,assetsPath:"",fontsUrl:"https://static.arcgis.com/fonts",geometryService:null,geometryServiceUrl:"https://utility.arcgisonline.com/arcgis/rest/services/Geometry/GeometryServer",geoRSSServiceUrl:"https://utility.arcgis.com/sharing/rss",kmlServiceUrl:"https://utility.arcgis.com/sharing/kml",portalUrl:"https://www.arcgis.com",workers:{loaderConfig:{has:{},paths:{},map:{},packages:[]}},request:{httpsDomains:["arcgis.com","arcgisonline.com","esrikr.com","premiumservices.blackbridge.com","esripremium.accuweather.com","gbm.digitalglobe.com","firstlook.digitalglobe.com","msi.digitalglobe.com"],interceptors:[],maxUrlLength:2e3,proxyRules:[],proxyUrl:null,timeout:6e4,trustedServers:[],useIdentity:!0},log:{interceptors:[],level:null}};if(i.a.esriConfig&&(Object(n.a)(a,i.a.esriConfig,!0),delete a.has),!a.assetsPath){a.assetsPath="https://js.arcgis.com/".concat("4.19.0".slice(0,-2),"/@arcgis/core/assets")}a.baseUrl&&console.warn("[esri.config]","baseUrl has been replaced by assetsPath"),Object.defineProperty(a,"baseUrl",{set(){console.warn("[esri.config]","baseUrl has been replaced by assetsPath")}}),a.request.corsEnabledServers=[],a.request.corsEnabledServers.push=function(){return console.warn("[esri.config]","request.corsEnabledServers is not supported and will be removed in a future release. See http://esriurl.com/cors8664"),0},t.a=a},function(e,t,r){"use strict";r.d(t,"a",(function(){return l})),r.d(t,"b",(function(){return i})),r.d(t,"c",(function(){return c})),r.d(t,"d",(function(){return o})),r.d(t,"e",(function(){return s}));var i,n=r(80),a=(r(226),r(83)),o="4.19",s={request:(e,t)=>Promise.resolve().then(r.bind(null,106)).then((({default:r})=>{var i=e.options||{};return i.responseType="array-buffer",i.signal=null==t?void 0:t.signal,r(e.url,i)})).then((e=>({result:{data:e.data,ssl:e.ssl},transferList:[e.data]})))};function c(e){i=e}function l(e){var t=i&&i.findCredential(e);return t&&t.token?Object(a.d)(e,"token",t.token):e}Object(n.a)("host-webworker")||(Object(n.a)("edge")||Object(n.a)("trident"))&&console.warn("Deprecated browser - see http://esriurl.com/oldbrowser")},function(e,t,r){"use strict";r.d(t,"a",(function(){return f})),r.d(t,"b",(function(){return g})),r.d(t,"c",(function(){return v})),r.d(t,"d",(function(){return b})),r.d(t,"e",(function(){return y})),r.d(t,"f",(function(){return l})),r.d(t,"g",(function(){return m})),r.d(t,"h",(function(){return u}));var i=r(92),n=r(112),a=r(99),o=r(139);function s(e){return 57.29577951308232*e}function c(e){return.017453292519943*e}function l(e){return e/o.a.radius}function u(e){return Math.PI/2-2*Math.atan(Math.exp(-1*e/o.a.radius))}function d(e){return null!=e.wkid||null!=e.wkt}var h=[0,0];function p(e,t,r,i,n){var a=e,o=n;if(o.spatialReference=r,"x"in a&&"x"in o)[o.x,o.y]=t(a.x,a.y,h,i);else if("xmin"in a&&"xmin"in o)[o.xmin,o.ymin]=t(a.xmin,a.ymin,h,i),[o.xmax,o.ymax]=t(a.xmax,a.ymax,h,i);else if("paths"in a&&"paths"in o||"rings"in a&&"rings"in o){for(var s,c=("paths"in a?a.paths:a.rings),l=[],u=0;u<c.length;u++){var d=c[u];s=[],l.push(s);for(var p=0;p<d.length;p++)s.push(t(d[p][0],d[p][1],[0,0],i)),d[p].length>2&&s[p].push(d[p][2]),d[p].length>3&&s[p].push(d[p][3])}"paths"in o?o.paths=l:o.rings=l}else if("points"in a&&"points"in o){for(var f=a.points,b=[],v=0;v<f.length;v++)b[v]=t(f[v][0],f[v][1],[0,0],i),f[v].length>2&&b[v].push(f[v][2]),f[v].length>3&&b[v].push(f[v][3]);o.points=b}return n}function f(e,t){var r=e&&(d(e)?e:e.spatialReference),i=t&&(d(t)?t:t.spatialReference);return!(e&&"type"in e&&"mesh"===e.type||t&&"type"in t&&"mesh"===t.type||!r||!i)&&(!!Object(n.c)(i,r)||Object(n.m)(i)&&Object(n.j)(r)||Object(n.m)(r)&&Object(n.j)(i))}function b(e,t){var r=e&&e.spatialReference,o=t&&(d(t)?t:t.spatialReference);return f(r,o)?Object(n.c)(r,o)?Object(i.a)(e):Object(n.m)(o)?p(e,v,a.a.WebMercator,!1,Object(i.a)(e)):Object(n.j)(o)?p(e,m,a.a.WGS84,!1,Object(i.a)(e)):null:null}function v(e,t,r=[0,0]){t>89.99999?t=89.99999:t<-89.99999&&(t=-89.99999);var i=c(t);return r[0]=c(e)*o.a.radius,r[1]=o.a.halfSemiMajorAxis*Math.log((1+Math.sin(i))/(1-Math.sin(i))),r}function m(e,t,r=[0,0],i=!1){var n=s(e/o.a.radius);return r[0]=i?n:n-360*Math.floor((n+180)/360),r[1]=s(Math.PI/2-2*Math.atan(Math.exp(-1*t/o.a.radius))),r}function g(e,t=!1,r=Object(i.a)(e)){return p(e,v,a.a.WebMercator,t,r)}function y(e,t=!1,r=Object(i.a)(e)){return p(e,m,a.a.WGS84,t,r)}},function(e,t,r){"use strict";r.d(t,"a",(function(){return c}));var i=r(159),n=r(81),a=r(93),o=r(83),s=(r(106),n.a.getLogger("esri.assets"));function c(e){if(!i.a.assetsPath)throw s.errorOnce("The API assets location needs to be set using config.assetsPath. More information: https://arcg.is/1OzLe50"),new a.a("assets:path-not-set","config.assetsPath is not set");return Object(o.y)(i.a.assetsPath,e)}},function(e,t,r){"use strict";function i(e){return function(t,r){t.hasOwnProperty("_messageBundleProps")||(t._messageBundleProps=t._messageBundleProps?t._messageBundleProps.slice():[]),t._messageBundleProps.push({bundlePath:e,propertyName:r})}}r.d(t,"a",(function(){return i}))},,function(e,t,r){"use strict";function i(e){return e&&("function"==typeof e.on||"function"==typeof e.addEventListener)}function n(e,t,r){if(!i(e))throw new TypeError("target is not a Evented or EventTarget object");if("on"in e)return e.on(t,r);if(Array.isArray(t)){var n=t.slice();for(var a of n)e.addEventListener(a,r);return{remove(){for(var t of n)e.removeEventListener(t,r)}}}return e.addEventListener(t,r),{remove(){e.removeEventListener(t,r)}}}function a(e,t,r){if(!i(e))throw new TypeError("target is not a Evented or EventTarget object");if("once"in e)return e.once(t,r);var a=n(e,t,(t=>{a.remove(),r.call(e,t)}));return{remove(){a.remove()}}}r.d(t,"a",(function(){return s})),r.d(t,"b",(function(){return i})),r.d(t,"c",(function(){return n})),r.d(t,"d",(function(){return a}));var o={Win:"Meta",Scroll:"ScrollLock",Spacebar:" ",Down:"ArrowDown",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Del:"Delete",Apps:"ContextMenu",Esc:"Escape",Multiply:"*",Add:"+",Subtract:"-",Decimal:".",Divide:"/"};function s({key:e}){return o[e]||e}},function(e,t,r){"use strict";var i=r(82),n=(r(80),r(81),r(88),r(85)),a=r(98),o=r(84),s=(r(83),r(86),r(87),r(90)),c=r(99),l=class extends s.a{constructor(...e){super(...e),this.type=null,this.hasM=!1,this.hasZ=!1,this.spatialReference=c.a.WGS84}get cache(){return this.commitProperty("spatialReference"),{}}get extent(){return null}readSpatialReference(e,t){if(e instanceof c.a)return e;if(null!=e){var r=new c.a;return r.read(e,t),r}return e}clone(){return console.warn(".clone() is not implemented for "+this.declaredClass),null}clearCache(){this.notifyChange("cache")}getCacheValue(e){return this.cache[e]}setCacheValue(e,t){this.cache[e]=t}};Object(i.a)([Object(n.b)()],l.prototype,"type",void 0),Object(i.a)([Object(n.b)({readOnly:!0})],l.prototype,"cache",null),Object(i.a)([Object(n.b)({readOnly:!0})],l.prototype,"extent",null),Object(i.a)([Object(n.b)({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],l.prototype,"hasM",void 0),Object(i.a)([Object(n.b)({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],l.prototype,"hasZ",void 0),Object(i.a)([Object(n.b)({type:c.a,json:{write:!0}})],l.prototype,"spatialReference",void 0),Object(i.a)([Object(a.a)("spatialReference")],l.prototype,"readSpatialReference",null);var u=l=Object(i.a)([Object(o.a)("esri.geometry.Geometry")],l);t.a=u},function(e,t,r){"use strict";r.d(t,"a",(function(){return u})),r.d(t,"b",(function(){return l}));var i=r(82),n=r(85),a=r(84),o=r(97),s=r(115),c=r(297),l=e=>{var t=class extends e{destroy(){this.destroyed||(this.handles.destroy(),this.updatingHandles.destroy())}get handles(){return this._get("handles")||new s.a}get updatingHandles(){return this._get("updatingHandles")||new c.a}};return Object(i.a)([Object(n.b)({readOnly:!0})],t.prototype,"handles",null),Object(i.a)([Object(n.b)({readOnly:!0})],t.prototype,"updatingHandles",null),t=Object(i.a)([Object(a.a)("esri.core.HandleOwner")],t)},u=class extends(l(o.a)){};u=Object(i.a)([Object(a.a)("esri.core.HandleOwner")],u)},function(e,t,r){"use strict";r.d(t,"a",(function(){return H})),r.d(t,"b",(function(){return K})),r.d(t,"c",(function(){return B})),r.d(t,"d",(function(){return Z})),r.d(t,"e",(function(){return W})),r.d(t,"f",(function(){return G})),r.d(t,"g",(function(){return z})),r.d(t,"h",(function(){return L})),r.d(t,"i",(function(){return J})),r.d(t,"j",(function(){return Q})),r.d(t,"k",(function(){return X})),r.d(t,"l",(function(){return I})),r.d(t,"m",(function(){return j})),r.d(t,"n",(function(){return N})),r.d(t,"o",(function(){return R})),r.d(t,"p",(function(){return ue})),r.d(t,"q",(function(){return re})),r.d(t,"r",(function(){return ae})),r.d(t,"s",(function(){return le})),r.d(t,"t",(function(){return ee})),r.d(t,"u",(function(){return te})),r.d(t,"v",(function(){return m})),r.d(t,"w",(function(){return g})),r.d(t,"x",(function(){return se})),r.d(t,"y",(function(){return $})),r.d(t,"z",(function(){return oe}));var i=r(81),n=r(93),a=r(100),o=r(292),s=r(316),c=r(178);function l(e,t){return e?t?4:3:t?3:2}var u=i.a.getLogger("esri.tasks.support.optimizedFeatureSet"),d={esriGeometryPoint:0,esriGeometryPolyline:2,esriGeometryPolygon:3,esriGeometryMultipoint:0},h=(e,t,r,i,n,a)=>{e[r]=n,e[r+1]=a},p=(e,t,r,i,n,a)=>{e[r]=n,e[r+1]=a,e[r+2]=t[i+2]},f=(e,t,r,i,n,a)=>{e[r]=n,e[r+1]=a,e[r+2]=t[i+3]},b=(e,t,r,i,n,a)=>{e[r]=n,e[r+1]=a,e[r+2]=t[i+2],e[r+3]=t[i+3]};function v(e,t,r,i){if(e){if(r)return t&&i?b:p;if(t&&i)return f}else if(t&&i)return p;return h}function m({scale:e,translate:t},r){return Math.round((r-t[0])/e[0])}function g({scale:e,translate:t},r){return Math.round((t[1]-r)/e[1])}function y({scale:e,translate:t},r){return r*e[0]+t[0]}function O({scale:e,translate:t},r){return t[1]-r*e[1]}function j(e,t,r){return e?t?r?P(e):x(e):r?M(e):_(e):null}function _(e){var t=e.coords;return{x:t[0],y:t[1]}}function w(e,t){return e.coords[0]=t.x,e.coords[1]=t.y,e}function x(e){var t=e.coords;return{x:t[0],y:t[1],z:t[2]}}function S(e,t){return e.coords[0]=t.x,e.coords[1]=t.y,e.coords[2]=t.z,e}function M(e){var t=e.coords;return{x:t[0],y:t[1],m:t[2]}}function T(e,t){return e.coords[0]=t.x,e.coords[1]=t.y,e.coords[2]=t.m,e}function P(e){var t=e.coords;return{x:t[0],y:t[1],z:t[2],m:t[3]}}function E(e,t){return e.coords[0]=t.x,e.coords[1]=t.y,e.coords[2]=t.z,e.coords[3]=t.m,e}function C(e,t){return e&&t?E:e?S:t?T:w}function A(e,t,r,i,n){var a=C(r,i);for(var s of t){var{geometry:l,attributes:u}=s,d=void 0;l&&(d=a(new c.a,l)),e.push(new o.a(d,u,null,u[n]))}return e}function I(e,t,r){if(!e)return null;for(var i=l(t,r),n=[],a=0;a<e.coords.length;a+=i){for(var o=[],s=0;s<i;s++)o.push(e.coords[a+s]);n.push(o)}return t?r?{points:n,hasZ:t,hasM:r}:{points:n,hasZ:t}:r?{points:n,hasM:r}:{points:n}}function k(e,t,r,i,n){var a=l(r,i);for(var s of t){var u=s.geometry,d=s.attributes,h=void 0;u&&(h=F(new c.a,u,a)),e.push(new o.a(h,d,null,d[n]))}return e}function F(e,t,r=l(t.hasZ,t.hasM)){e.lengths[0]=t.points.length;var i=e.coords,n=0;for(var a of t.points)for(var o=0;o<r;o++)i[n++]=a[o];return e}function R(e,t,r){if(!e)return null;var i=l(t,r),{coords:n,lengths:a}=e,o=[],s=0;for(var c of a){for(var u=[],d=0;d<c;d++){for(var h=[],p=0;p<i;p++)h.push(n[s++]);u.push(h)}o.push(u)}return t?r?{paths:o,hasZ:t,hasM:r}:{paths:o,hasZ:t}:r?{paths:o,hasM:r}:{paths:o}}function D(e,t,r,i,n){var a=l(r,i);for(var s of t){var u=s.geometry,d=s.attributes,h=void 0;u&&(h=L(new c.a,u,a)),e.push(new o.a(h,d,null,d[n]))}return e}function L(e,t,r=l(t.hasZ,t.hasM)){var{lengths:i,coords:n}=e,a=0;for(var o of t.paths){for(var s of o)for(var c=0;c<r;c++)n[a++]=s[c];i.push(o.length)}return e}function N(e,t,r){if(!e)return null;var i=l(t,r),{coords:n,lengths:a}=e,o=[],s=0;for(var c of a){for(var u=[],d=0;d<c;d++){for(var h=[],p=0;p<i;p++)h.push(n[s++]);u.push(h)}o.push(u)}return t?r?{rings:o,hasZ:t,hasM:r}:{rings:o,hasZ:t}:r?{rings:o,hasM:r}:{rings:o}}function V(e,t,r,i,n){for(var a of t){var s=a.geometry,l=a.centroid,u=a.attributes,d=void 0;s&&(d=z(new c.a,s,r,i)),l?e.push(new o.a(d,u,w(new c.a,l),u[n])):e.push(new o.a(d,u,null,u[n]))}return e}function z(e,t,r=t.hasZ,i=t.hasM){return G(e,t.rings,r,i),e}function G(e,t,r,i){var n=l(r,i),{lengths:a,coords:o}=e,s=0;for(var c of(a.length=o.length=0,t)){for(var u of c)for(var d=0;d<n;d++)o[s++]=u[d];a.push(c.length)}return e}var U=[],q=[];function H(e,t,r,i,n){U[0]=e;var[a]=B(q,U,t,r,i,n);return U.length=q.length=0,a}function B(e,t,r,i,a,s){if(e.length=0,!r){for(var c of t){var l=c.attributes[s];e.push(new o.a(null,c.attributes,null,l))}return e}switch(r){case"esriGeometryPoint":return A(e,t,i,a,s);case"esriGeometryMultipoint":return k(e,t,i,a,s);case"esriGeometryPolyline":return D(e,t,i,a,s);case"esriGeometryPolygon":return V(e,t,i,a,s);default:u.error("convertToFeatureSet:unknown-geometry",new n.a("Unable to parse unknown geometry type '".concat(r,"'"))),e.length=0}return e}function W(e,t,r,i,a,o){var s=e.length;switch(r){case"esriGeometryPoint":A(e,t,i,a,o);break;case"esriGeometryMultipoint":k(e,t,i,a,o);break;case"esriGeometryPolyline":D(e,t,i,a,o);break;case"esriGeometryPolygon":V(e,t,i,a,o);break;default:u.error("convertToFeatureSet:unknown-geometry",new n.a("Unable to parse unknown geometry type '".concat(r,"'")))}for(var c=0;c<t.length;c++)e[c+s].geometryType=r,e[c+s].insertAfter=t[c].insertAfter,e[c+s].groupId=t[c].groupId;return e}function J(e,t,r,i){q[0]=e,Y(U,q,t,r,i);var n=U[0];return U.length=q.length=0,n}function Z(e,t,r){if(!e)return null;var i=new c.a;return"hasZ"in e&&null==t&&(t=e.hasZ),"hasM"in e&&null==r&&(r=e.hasM),Object(a.f)(e)?C(null!=t?t:null!=e.z,null!=r?r:null!=e.m)(i,e):Object(a.g)(e)?z(i,e,t,r):Object(a.h)(e)?L(i,e,l(t,r)):Object(a.e)(e)?F(i,e,l(t,r)):void u.error("convertFromGeometry:unknown-geometry",new n.a("Unable to parse unknown geometry type '".concat(e,"'")))}function X(e,t,r,i){var a=e&&("coords"in e?e:e.geometry);if(!a)return null;switch(t){case"esriGeometryPoint":var o=_;return r&&i?o=P:r?o=x:i&&(o=M),o(a);case"esriGeometryMultipoint":return I(a,r,i);case"esriGeometryPolyline":return R(a,r,i);case"esriGeometryPolygon":return N(a,r,i);default:return void u.error("convertToGeometry:unknown-geometry",new n.a("Unable to parse unknown geometry type '".concat(t,"'")))}}function Y(e,t,r,i,a){switch(e.length=0,r){case"esriGeometryPoint":return function(e,t,r,i){var n=_;for(var a of(r&&i?n=P:r?n=x:i&&(n=M),t)){var{geometry:o,attributes:s}=a,c=o?n(o):null;e.push({attributes:s,geometry:c})}return e}(e,t,i,a);case"esriGeometryMultipoint":return function(e,t,r,i){for(var n of t){var{geometry:a,attributes:o}=n,s=void 0;a&&(s=I(a,r,i)),e.push({attributes:o,geometry:s})}return e}(e,t,i,a);case"esriGeometryPolyline":return function(e,t,r,i){for(var n of t){var{geometry:a,attributes:o}=n,s=void 0;a&&(s=R(a,r,i)),e.push({attributes:o,geometry:s})}return e}(e,t,i,a);case"esriGeometryPolygon":return function(e,t,r,i){for(var n of t){var{geometry:a,attributes:o,centroid:s}=n,c=void 0;if(a&&(c=N(a,r,i)),s){var l=_(s);e.push({attributes:o,centroid:l,geometry:c})}else e.push({attributes:o,geometry:c})}return e}(e,t,i,a);default:u.error("convertToFeatureSet:unknown-geometry",new n.a("Unable to parse unknown geometry type '".concat(r,"'")))}return e}function Q(e){var{objectIdFieldName:t,spatialReference:r,transform:i,fields:n,hasM:a,hasZ:o,features:s,geometryType:c,exceededTransferLimit:l,uniqueIdField:u,queryGeometry:d,queryGeometryType:h}=e,p={features:Y([],s,c,o,a),fields:n,geometryType:c,objectIdFieldName:t,spatialReference:r,uniqueIdField:u,queryGeometry:X(d,h,!1,!1)};return i&&(p.transform=i),l&&(p.exceededTransferLimit=l),a&&(p.hasM=a),o&&(p.hasZ=o),p}function K(e,t){var r=new s.a,{hasM:i,hasZ:a,features:o,objectIdFieldName:c,spatialReference:l,geometryType:d,exceededTransferLimit:h,transform:p,fields:f}=e;return f&&(r.fields=f),r.geometryType=d,r.objectIdFieldName=c||t,r.spatialReference=l,r.objectIdFieldName?(o&&B(r.features,o,d,a,i,r.objectIdFieldName),h&&(r.exceededTransferLimit=h),i&&(r.hasM=i),a&&(r.hasZ=a),p&&(r.transform=p),r):(u.error(new n.a("optimized-features:invalid-objectIdFieldName","objectIdFieldName is missing")),r)}function $(e){var{transform:t,features:r,hasM:i,hasZ:n}=e;if(!t)return e;for(var a of r)a.geometry&&oe(a.geometry,a.geometry,i,n,t),a.centroid&&oe(a.centroid,a.centroid,i,n,t);return e.transform=null,e}function ee(e,t){var{geometryType:r,features:i,hasM:n,hasZ:a}=t;if(!e)return t;for(var o=0;o<i.length;o++){var s=i[o],l=s.weakClone();l.geometry=new c.a,te(l.geometry,s.geometry,n,a,r,e),s.centroid&&(l.centroid=new c.a,te(l.centroid,s.centroid,n,a,"esriGeometryPoint",e)),i[o]=l}return t.transform=e,t}function te(e,t,r,i,n,a,o=r,s=i){if(e.lengths.length&&(e.lengths.length=0),e.coords.length&&(e.coords.length=0),!t||!t.coords.length)return null;var c=d[n],{coords:u,lengths:h}=t,p=l(r,i),f=l(r&&o,i&&s),b=v(r,i,o,s);if(!h.length)return b(e.coords,u,0,0,m(a,u[0]),g(a,u[1])),e.lengths.length&&(e.lengths.length=0),e.coords.length=p,e;var y,O,j,_,w=0,x=0,S=x;for(var M of h)if(!(M<c)){var T=0;x=S,j=y=m(a,u[w]),_=O=g(a,u[w+1]),b(e.coords,u,x,w,j,_),T++,w+=p,x+=f;for(var P=1;P<M;P++,w+=p)j=m(a,u[w]),_=g(a,u[w+1]),j===y&&_===O||(b(e.coords,u,x,w,j-y,_-O),x+=f,T++,y=j,O=_);T>=c&&(e.lengths.push(T),S=x)}return e.coords.length=S,e.coords.length?e:null}function re(e,t,r,i,n,a,o=r,s=i){if(e.lengths.length&&(e.lengths.length=0),e.coords.length&&(e.coords.length=0),!t||!t.coords.length)return null;var c=d[n],{coords:u,lengths:h}=t,p=l(r,i),f=l(r&&o,i&&s),b=v(r,i,o,s);if(!h.length)return b(e.coords,u,0,0,u[0],u[1]),e.lengths.length&&(e.lengths.length=0),e.coords.length=p,e;var m=0,g=a*a;for(var y of h)if(y<c)m+=y*p;else{var O=e.coords.length/f,j=m,_=m+(y-1)*p;b(e.coords,u,e.coords.length,j,u[j],u[j+1]),ne(e.coords,u,p,g,b,j,_),b(e.coords,u,e.coords.length,_,u[_],u[_+1]);var w=e.coords.length/f-O;w>=c?e.lengths.push(w):e.coords.length=O*f,m+=y*p}return e.coords.length?e:null}function ie(e,t,r,i){var n=e[t],a=e[t+1],o=e[r],s=e[r+1],c=e[i],l=e[i+1],u=o,d=s,h=c-u,p=l-d;if(0!==h||0!==p){var f=((n-u)*h+(a-d)*p)/(h*h+p*p);f>1?(u=c,d=l):f>0&&(u+=h*f,d+=p*f)}return(h=n-u)*h+(p=a-d)*p}function ne(e,t,r,i,n,a,o){for(var s,c=i,l=0,u=a+r;u<o;u+=r)(s=ie(t,u,a,o))>c&&(l=u,c=s);c>i&&(l-a>r&&ne(e,t,r,i,n,a,l),n(e,t,e.length,l,t[l],t[l+1]),o-l>r&&ne(e,t,r,i,n,l,o))}function ae(e,t,r,i){if(!t||!t.coords||!t.coords.length)return null;var n=l(r,i),a=Number.POSITIVE_INFINITY,o=Number.POSITIVE_INFINITY,s=Number.NEGATIVE_INFINITY,c=Number.NEGATIVE_INFINITY;if(t&&t.coords)for(var u=t.coords,d=0;d<u.length;d+=n){var h=u[d],p=u[d+1];a=Math.min(a,h),s=Math.max(s,h),o=Math.min(o,p),c=Math.max(c,p)}return e[0]=a,e[1]=o,e[2]=s,e[3]=c,e}function oe(e,t,r,i,n){var{coords:a,lengths:o}=t,s=r?i?b:p:i?p:h,c=l(r,i);if(!a.length)return e!==t&&(e.lengths.length=0,e.coords.length=0),e;if(!o.length)return s(e.coords,a,0,0,y(n,a[0]),O(n,a[1])),e!==t&&(e.lengths.length=0,e.coords.length=c),e;for(var[u,d]=n.scale,f=0,v=0;v<o.length;v++){var m=o[v];e.lengths[v]=m;var g=y(n,a[f]),j=O(n,a[f+1]);s(e.coords,a,f,f,g,j),f+=c;for(var _=1;_<m;_++,f+=c)g+=a[f]*u,j-=a[f+1]*d,s(e.coords,a,f,f,g,j)}return e!==t&&(e.lengths.length=o.length,e.coords.length=a.length),e}function se(e,t,r,i,n,a){var o=l(r,i),s=v(r,i,n,a),c=t.coords;e.coords.length=0,e.lengths.length=0,e.lengths.push(...t.lengths);for(var u=0;u<c.length;u+=o)s(e.coords,c,e.coords.length,u,c[u],c[u+1]);return e}function ce(e,t,r,i){for(var n=0,a=e[i*t],o=e[i*(t+1)],s=1;s<r;s++){var c=a+e[i*(t+s)],l=o+e[i*(t+s)+1],u=(c-a)*(l+o);a=c,o=l,n+=u}return.5*n}function le(e,t){for(var{coords:r,lengths:i}=e,n=0,a=0,o=0;o<i.length;o++)a+=ce(r,n,i[o],t),n+=o;return Math.abs(a)}function ue(e,t){for(var r=e.clone(),i=e.coords,n=e.lengths,a=0,o=0;o<n.length;o++){for(var s=n[o],c=i[t*a],l=i[t*a+1],u=1;u<s;u++){var d=c+i[t*(a+u)],h=l+i[t*(a+u)+1];r.coords[t*(a+u)]=d,r.coords[t*(a+u)+1]=h,c=d,l=h}a+=s}return r}},,function(e,t,r){"use strict";r.d(t,"a",(function(){return I}));var i,n,a=r(82),o=(r(80),r(81),r(88)),s=r(85),c=r(116),l=r(95),u=r(102),d=r(98),h=r(188),p=r(84),f=(r(83),r(86),r(87),r(90)),b=r(155),v=r(262),m=r(99),g=r(183),y=(r(101),i=class extends f.a{constructor(e){super(e),this.type="query-table"}clone(){var e,{workspaceId:t,query:r,oidFields:n,spatialReference:a,geometryType:o}=this,s={workspaceId:t,query:r,oidFields:n,spatialReference:null!=(e=null==a?void 0:a.clone())?e:void 0,geometryType:o};return new i(s)}});Object(a.a)([Object(u.a)({queryTable:"query-table"})],y.prototype,"type",void 0),Object(a.a)([Object(s.b)({type:String,json:{write:!0}})],y.prototype,"workspaceId",void 0),Object(a.a)([Object(s.b)({type:String,json:{write:!0}})],y.prototype,"query",void 0),Object(a.a)([Object(s.b)({type:String,json:{write:!0}})],y.prototype,"oidFields",void 0),Object(a.a)([Object(s.b)({type:m.a,json:{write:!0}})],y.prototype,"spatialReference",void 0),Object(a.a)([Object(u.a)(g.a)],y.prototype,"geometryType",void 0),y=i=Object(a.a)([Object(p.a)("esri.layers.support.source.QueryTableDataSource")],y);var O,j=n=class extends f.a{constructor(e){super(e),this.type="raster"}clone(){var{workspaceId:e,dataSourceName:t}=this;return new n({workspaceId:e,dataSourceName:t})}};Object(a.a)([Object(u.a)({raster:"raster"})],j.prototype,"type",void 0),Object(a.a)([Object(s.b)({type:String,json:{write:!0}})],j.prototype,"dataSourceName",void 0),Object(a.a)([Object(s.b)({type:String,json:{write:!0}})],j.prototype,"workspaceId",void 0),j=n=Object(a.a)([Object(p.a)("esri.layers.support.source.RasterDataSource")],j);var _,w,x=O=class extends f.a{constructor(e){super(e),this.type="table"}clone(){var{workspaceId:e,gdbVersion:t,dataSourceName:r}=this;return new O({workspaceId:e,gdbVersion:t,dataSourceName:r})}};Object(a.a)([Object(u.a)({table:"table"})],x.prototype,"type",void 0),Object(a.a)([Object(s.b)({type:String,json:{write:!0}})],x.prototype,"workspaceId",void 0),Object(a.a)([Object(s.b)({type:String,json:{write:!0}})],x.prototype,"gdbVersion",void 0),Object(a.a)([Object(s.b)({type:String,json:{write:!0}})],x.prototype,"dataSourceName",void 0),x=O=Object(a.a)([Object(p.a)("esri.layers.support.source.TableDataSource")],x);var S=Object(l.b)()({esriLeftInnerJoin:"left-inner-join",esriLeftOuterJoin:"left-outer-join"}),M=_=class extends f.a{constructor(e){super(e),this.type="join-table"}readLeftTableSource(e,t,r){return P()(e,t,r)}castLeftTableSource(e){return Object(o.k)(C(),e)}readRightTableSource(e,t,r){return P()(e,t,r)}castRightTableSource(e){return Object(o.k)(C(),e)}clone(){var e,t,{leftTableKey:r,rightTableKey:i,leftTableSource:n,rightTableSource:a,joinType:o}=this,s={leftTableKey:r,rightTableKey:i,leftTableSource:null!=(e=null==n?void 0:n.clone())?e:void 0,rightTableSource:null!=(t=null==a?void 0:a.clone())?t:void 0,joinType:o};return new _(s)}};Object(a.a)([Object(u.a)({joinTable:"join-table"})],M.prototype,"type",void 0),Object(a.a)([Object(s.b)({type:String,json:{write:!0}})],M.prototype,"leftTableKey",void 0),Object(a.a)([Object(s.b)({type:String,json:{write:!0}})],M.prototype,"rightTableKey",void 0),Object(a.a)([Object(s.b)({json:{write:!0}})],M.prototype,"leftTableSource",void 0),Object(a.a)([Object(d.a)("leftTableSource")],M.prototype,"readLeftTableSource",null),Object(a.a)([Object(c.a)("leftTableSource")],M.prototype,"castLeftTableSource",null),Object(a.a)([Object(s.b)({json:{write:!0}})],M.prototype,"rightTableSource",void 0),Object(a.a)([Object(d.a)("rightTableSource")],M.prototype,"readRightTableSource",null),Object(a.a)([Object(c.a)("rightTableSource")],M.prototype,"castRightTableSource",null),Object(a.a)([Object(u.a)(S)],M.prototype,"joinType",void 0),M=_=Object(a.a)([Object(p.a)("esri.layers.support.source.JoinTableDataSource")],M);var T=null;function P(){return T||(T=Object(h.b)({types:C()})),T}var E=null;function C(){return E||(E={key:"type",base:null,typeMap:{"data-layer":I,"map-layer":v.a}}),E}var A={key:"type",base:null,typeMap:{"join-table":M,"query-table":y,raster:j,table:x}},I=w=class extends f.a{constructor(e){super(e),this.type="data-layer"}clone(){var{fields:e,dataSource:t}=this;return new w({fields:e,dataSource:t})}};Object(a.a)([Object(u.a)({dataLayer:"data-layer"})],I.prototype,"type",void 0),Object(a.a)([Object(s.b)({type:[b.a],json:{write:!0}})],I.prototype,"fields",void 0),Object(a.a)([Object(s.b)({types:A,json:{write:!0}})],I.prototype,"dataSource",void 0),(I=w=Object(a.a)([Object(p.a)("esri.layers.support.source.DataLayerSource")],I)).from=Object(o.m)(I)},function(e,t,r){"use strict";r(148),r(256),r(248),r(281);var i=r(206),n=r(7),a=r(158),o=r(89),s=r(93),c=r(106);function l(){return(l=Object(n.a)((function*(e,t,r,n){var a=t.exec(r);if(!a)throw new s.a("esri-intl:invalid-bundle",'Bundle id "'.concat(r,'" is not compatible with the pattern "').concat(t,'"'));var o,c=a[1]?"".concat(a[1],"/"):"",l=a[2],d=Object(i.b)(n),h="".concat(c).concat(l,".json"),p=d?"".concat(c).concat(l,"_").concat(d,".json"):h;try{o=yield u(e(p))}catch(f){if(p===h)throw new s.a("intl:unknown-bundle",'Bundle "'.concat(r,'" cannot be loaded'),{error:f});try{o=yield u(e(h))}catch(f){throw new s.a("intl:unknown-bundle",'Bundle "'.concat(r,'" cannot be loaded'),{error:f})}}return o}))).apply(this,arguments)}function u(e){return d.apply(this,arguments)}function d(){return(d=Object(n.a)((function*(e){if(Object(o.k)(f.fetchBundleAsset))return f.fetchBundleAsset(e);var t=yield Object(c.default)(e,{responseType:"text"});return JSON.parse(t.data)}))).apply(this,arguments)}class h{constructor({base:e="",pattern:t,location:r=new URL(window.location.href)}){var i;i="string"==typeof r?e=>new URL(e,new URL(r,a.a.location)).href:r instanceof URL?e=>new URL(e,r).href:r,this.pattern="string"==typeof t?new RegExp("^".concat(t)):t,this.getAssetUrl=i,e=e?e.endsWith("/")?e:e+"/":"",this.matcher=new RegExp("^".concat(e,"(?:(.*)/)?(.*)$"))}fetchMessageBundle(e,t){return function(e,t,r,i){return l.apply(this,arguments)}(this.getAssetUrl,this.matcher,e,t)}}var p,f={},b=r(162);Object(i.c)((p={pattern:"esri/",location:b.a},new h(p)))},function(e,t){var r;r=function(){return this}();try{r=r||new Function("return this")()}catch(i){"object"===typeof window&&(r=window)}e.exports=r},function(e,t,r){"use strict";r.d(t,"a",(function(){return s})),r.d(t,"b",(function(){return c})),r.d(t,"c",(function(){return l})),r.d(t,"d",(function(){return u})),r.d(t,"e",(function(){return h})),r.d(t,"f",(function(){return p})),r.d(t,"g",(function(){return d}));var i=r(112),n=r(99),a=r(139);function o(e){return new n.a({wkt:'GEOCCS["Spherical geocentric",\n    DATUM["Not specified",\n      SPHEROID["Sphere",'.concat(e.radius,',0]],\n    PRIMEM["Greenwich",0.0,\n      AUTHORITY["EPSG","8901"]],\n    UNIT["m",1.0],\n    AXIS["Geocentric X",OTHER],\n    AXIS["Geocentric Y",EAST],\n    AXIS["Geocentric Z",NORTH]\n  ]')})}var s=o(a.a),c=o(a.b),l=o(a.c),u=new n.a({wkt:'GEOCCS["WGS 84",\n  DATUM["WGS_1984",\n    SPHEROID["WGS 84",'.concat(a.a.radius,',298.257223563,\n      AUTHORITY["EPSG","7030"]],\n    AUTHORITY["EPSG","6326"]],\n  PRIMEM["Greenwich",0,\n    AUTHORITY["EPSG","8901"]],\n  UNIT["m",1.0,\n    AUTHORITY["EPSG","9001"]],\n  AXIS["Geocentric X",OTHER],\n  AXIS["Geocentric Y",OTHER],\n  AXIS["Geocentric Z",NORTH],\n  AUTHORITY["EPSG","4978"]\n]')});function d(e){return e&&(Object(i.g)(e)||e===c)?c:e&&(Object(i.h)(e)||e===l)?l:s}function h(e){return e&&(Object(i.g)(e)||e===c)?a.b:e&&(Object(i.h)(e)||e===l)?a.c:a.a}function p(e){return Object(i.k)(e)?a.b:Object(i.l)(e)?a.c:a.a}},function(e,t,r){"use strict";function i(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function n(e){return[e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8],e[9],e[10],e[11],e[12],e[13],e[14],e[15]]}function a(e,t){return new Float64Array(e,t,16)}r.d(t,"a",(function(){return o})),r.d(t,"b",(function(){return i})),r.d(t,"c",(function(){return n})),r.d(t,"d",(function(){return a}));var o=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];Object.freeze({__proto__:null,create:i,clone:n,fromValues:function(e,t,r,i,n,a,o,s,c,l,u,d,h,p,f,b){return[e,t,r,i,n,a,o,s,c,l,u,d,h,p,f,b]},createView:a,IDENTITY:o})},function(e,t,r){"use strict";var i=r(409);class n extends i.a{constructor(e,t,r){if(super(e,t,r),!(this instanceof n))return new n(e,t,r)}}n.prototype.type="warning",t.a=n},function(e,t,r){"use strict";var i,n=r(209);!function(e){var t=(e,t,r,i)=>{for(var n=t,a=t,o=r>>>1,s=e[n-1];a<=o;){(a=n<<1)<r&&i(e[a-1],e[a])<0&&++a;var c=e[a-1];if(i(c,s)<=0)break;e[n-1]=c,n=a}e[n-1]=s},r=(e,t)=>e<t?-1:e>t?1:0;e.sort=function(e,i,n,a){void 0===i&&(i=0),void 0===n&&(n=e.length),void 0===a&&(a=r);for(var o=n>>>1;o>i;o--)t(e,o,n,a);for(var s=i+1,c=n-1;c>i;c--){var l=e[i];e[i]=e[c],e[c]=l,t(e,s,c,a)}},e.iterableSort=function*(e,i,n,a){void 0===i&&(i=0),void 0===n&&(n=e.length),void 0===a&&(a=r);for(var o=n>>>1;o>i;o--)t(e,o,n,a),yield;for(var s=i+1,c=n-1;c>i;c--){var l=e[i];e[i]=e[c],e[c]=l,t(e,s,c,a),yield}}}(i||(i={}));var a=i;function o(e){e.data.length>1.5*e.length&&(e.data.length=Math.floor(1.1*e.length))}t.a=class{constructor(e){this.data=[],this._length=0,this._allocator=void 0,this._deallocator=()=>null,this._shrink=()=>{},this._hint=new n.a,e&&(e.initialSize&&(this.data=new Array(e.initialSize)),e.allocator&&(this._allocator=e.allocator),void 0!==e.deallocator&&(this._deallocator=e.deallocator),e.shrink&&(this._shrink=()=>o(this)))}toArray(){return this.data.slice(0,this.length)}getItemAt(e){if(!(e<0||e>=this._length))return this.data[e]}get length(){return this._length}set length(e){if(e>this._length){if(this._allocator){for(;this._length<e;)this.data[this._length++]=this._allocator(this.data[this._length]);return}this._length=e}else{if(this._deallocator)for(var t=e;t<this._length;++t)this.data[t]=this._deallocator(this.data[t]);this._length=e,this._shrink()}}clear(){this.length=0}prune(){this.clear(),this.data=[]}push(e){this.data[this._length++]=e}pushArray(e,t=e.length){for(var r=0;r<t;r++)this.data[this._length++]=e[r]}fill(e,t){for(var r=0;r<t;r++)this.data[this._length++]=e}pushNew(){this._allocator&&(this.data[this.length]=this._allocator(this.data[this.length]));var e=this.data[this._length];return++this._length,e}unshift(e){this.data.unshift(e),this._length++,o(this)}pop(){if(0!==this.length){var e=this.data[this.length-1];return this.length=this.length-1,this._shrink(),e}}remove(e){var t=Object(n.e)(this.data,e,this.length,this._hint);if(-1!==t)return this.data.splice(t,1),this.length=this.length-1,e}removeUnordered(e){var t=Object(n.j)(this.data,e,this.length,this._hint);return void 0!==t&&(this.length=this.length-1),this._shrink(),t}removeUnorderedIndex(e){if(!(e>=this.length||e<0))return this.swapElements(e,this.length-1),this.pop()}removeUnorderedMany(e,t=e.length,r){this.length=Object(n.k)(this.data,e,this.length,t,this._hint,r),this._shrink()}front(){if(0!==this.length)return this.data[0]}back(){if(0!==this.length)return this.data[this.length-1]}swapElements(e,t){e>=this.length||t>=this.length||e===t||([this.data[e],this.data[t]]=[this.data[t],this.data[e]])}sort(e){a.sort(this.data,0,this.length,e)}iterableSort(e){return a.iterableSort(this.data,0,this.length,e)}some(e,t){for(var r=0;r<this.length;++r)if(e.call(t,this.data[r],r,this.data))return!0;return!1}filterInPlace(e,t){for(var r=0,i=0;i<this._length;++i){var n=this.data[i];e.call(t,n,i,this.data)&&(this.data[i]=this.data[r],this.data[r]=n,r++)}if(this._deallocator)for(var a=r;a<this._length;a++)this.data[a]=this._deallocator(this.data[a]);return this._length=r,this._shrink(),this}forAll(e,t){for(var r=this.length,i=this.data,n=0;n<r;++n)e.call(t,i[n],n,i)}map(e,t){for(var r=new Array(this.length),i=0;i<this.length;++i)r[i]=e.call(t,this.data[i],i,this.data);return r}reduce(e,t){for(var r=t,i=0;i<this.length;++i)r=e(r,this.data[i],i,this.data);return r}has(e){for(var t=this.length,r=this.data,i=0;i<t;++i)if(r[i]===e)return!0;return!1}}},function(e,t,r){"use strict";r.d(t,"a",(function(){return v})),r.d(t,"b",(function(){return m})),r.d(t,"c",(function(){return p})),r.d(t,"d",(function(){return f})),r.d(t,"e",(function(){return b}));var i=r(89),n=r(410),a=r(104),o=r(332),s=r(174),c=r(396),l=r(202),u=r(200);class d{constructor(e,t,r){this.itemByteSize=e,this.itemCreate=t,this.buffers=[],this.items=[],this.itemsPerBuffer=0,this.itemsPtr=0,this.itemsPerBuffer=Math.ceil(r/this.itemByteSize),this.tickHandle=n.a.before((()=>this.reset()))}destroy(){this.tickHandle&&(this.tickHandle.remove(),this.tickHandle=Object(i.o)(this.tickHandle)),this.itemsPtr=0,this.items=Object(i.o)(this.items),this.buffers=Object(i.o)(this.buffers)}get(){0===this.itemsPtr&&Object(n.a)((()=>{}));for(var e=Math.floor(this.itemsPtr/this.itemsPerBuffer);this.buffers.length<=e;){for(var t=new ArrayBuffer(this.itemsPerBuffer*this.itemByteSize),r=0;r<this.itemsPerBuffer;++r)this.items.push(this.itemCreate(t,r*this.itemByteSize));this.buffers.push(t)}return this.items[this.itemsPtr++]}reset(){for(var e=2*(Math.floor(this.itemsPtr/this.itemsPerBuffer)+1);this.buffers.length>e;)this.buffers.pop(),this.items.length=this.buffers.length*this.itemsPerBuffer;this.itemsPtr=0}static createVec2f64(e=h){return new d(16,l.c,e)}static createVec3f64(e=h){return new d(24,a.c,e)}static createVec4f64(e=h){return new d(32,u.e,e)}static createMat3f64(e=h){return new d(72,o.b,e)}static createMat4f64(e=h){return new d(128,s.d,e)}static createQuatf64(e=h){return new d(32,c.b,e)}get test(){return{size:this.buffers.length*this.itemsPerBuffer*this.itemByteSize}}}var h=4096,p=d.createVec2f64(),f=d.createVec3f64(),b=d.createVec4f64(),v=(d.createMat3f64(),d.createMat4f64()),m=d.createQuatf64()},function(e,t,r){"use strict";class i{constructor(e=[],t=[],r=!1){this.lengths=null!=e?e:[],this.coords=null!=t?t:[],this.hasIndeterminateRingOrder=r}get isPoint(){return 0===this.lengths.length}forEachVertex(e){var t=0;this.lengths.length||e(this.coords[0],this.coords[1]);for(var r=0;r<this.lengths.length;r++){for(var i=this.lengths[r],n=0;n<i;n++)e(this.coords[2*(n+t)],this.coords[2*(n+t)+1]);t+=i}}clone(){return new i(this.lengths.slice(),this.coords.slice(),this.hasIndeterminateRingOrder)}}t.a=i},function(e,t,r){"use strict";r.d(t,"a",(function(){return s})),r.d(t,"b",(function(){return p})),r.d(t,"c",(function(){return f})),r.d(t,"d",(function(){return d})),r.d(t,"e",(function(){return h})),r.d(t,"f",(function(){return O})),r.d(t,"g",(function(){return u})),r.d(t,"h",(function(){return b})),r.d(t,"i",(function(){return c})),r.d(t,"j",(function(){return l})),r.d(t,"k",(function(){return v}));var i=r(110),n=(r(104),r(157),r(202),r(200)),a=r(135);r(191),Object(n.c)();class o{constructor(e){this.message=e}toString(){return"AssertException: ".concat(this.message)}}function s(e,t){if(!e){t=t||"assert";var r=new Error(t);throw r.stack&&console.log(r.stack),new o(t)}}function c(e,t,r,i){var n,a=(r[0]-e[0])/t[0],o=(i[0]-e[0])/t[0];a>o&&(n=a,a=o,o=n);var s=(r[1]-e[1])/t[1],c=(i[1]-e[1])/t[1];if(s>c&&(n=s,s=c,c=n),a>c||s>o)return!1;s>a&&(a=s),c<o&&(o=c);var l=(r[2]-e[2])/t[2],u=(i[2]-e[2])/t[2];return l>u&&(n=l,l=u,u=n),!(a>u||l>o)&&(u<o&&(o=u),!(o<0))}function l(e,t,r,i){e[12]=t,e[13]=r,e[14]=i}function u(e){return 1===e[0]&&0===e[1]&&0===e[2]&&0===e[3]&&0===e[4]&&1===e[5]&&0===e[6]&&0===e[7]&&0===e[8]&&0===e[9]&&1===e[10]&&0===e[11]&&1===e[15]}function d(e,t,r){return 2*Math.atan(Math.sqrt(t*t+r*r)*Math.tan(.5*e)/t)}function h(e,t,r){return 2*Math.atan(Math.sqrt(t*t+r*r)*Math.tan(.5*e)/r)}function p(e,t,r){return 2*Math.atan(t*Math.tan(.5*e)/Math.sqrt(t*t+r*r))}function f(e,t,r){return 2*Math.atan(r*Math.tan(.5*e)/Math.sqrt(t*t+r*r))}function b(e,t,r=0){for(var n,a=Object(i.d)(e,0,y),o=0;o<4;o++)t[r+o]=Math.floor(256*((n=a*m[o])-Math.floor(n)))}function v(e,t=0){for(var r=0,i=0;i<4;i++)r+=e[t+i]*g[i];return r}var m=[1,256,65536,16777216],g=[1/256,1/65536,1/16777216,1/4294967296],y=v(new Uint8ClampedArray([255,255,255,255]));function O(e,t,r,i,n){var o=e;0===e[11]?(i[0]=2/(t*o[0]),i[1]=2/(r*o[5]),i[2]=(1+o[12])/o[0],i[3]=(1+o[13])/o[5],Object(a.r)(n,0,1)):(i[0]=-2/(t*o[0]),i[1]=-2/(r*o[5]),i[2]=(1-o[8])/o[0],i[3]=(1-o[9])/o[5],Object(a.r)(n,1,0))}},function(e,t,r){"use strict";r.d(t,"a",(function(){return i})),r.d(t,"b",(function(){return n}));r(80);function i(e){}function n(e){return()=>e}},,,function(e,t,r){"use strict";r.d(t,"a",(function(){return a})),r.d(t,"b",(function(){return n})),r.d(t,"c",(function(){return o}));var i=r(95);function n(e){return"point"===e||"multipoint"===e||"polyline"===e||"polygon"===e}var a=Object(i.b)()({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon"}),o=Object(i.b)()({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryEnvelope:"extent",mesh:"mesh"})},function(e,t,r){"use strict";r.d(t,"a",(function(){return i})),r.d(t,"b",(function(){return n})),r.d(t,"c",(function(){return c})),r.d(t,"d",(function(){return s}));var i=1e-6,n=Math.random,a=Math.PI/180,o=180/Math.PI;function s(e){return e*a}function c(e){return e*o}Object.freeze({__proto__:null,EPSILON:i,RANDOM:n,toRadian:s,toDegree:c,equals:function(e,t){return Math.abs(e-t)<=i*Math.max(1,Math.abs(e),Math.abs(t))}})},function(e,t,r){"use strict";var i,n=r(82),a=r(85),o=r(175),s=r(84),c=r(93),l=r(94),u=r(227),d="loaded",h=e=>{var t=class extends e{constructor(...e){super(...e),this._loadController=null,this.loadError=null,this.loadStatus="not-loaded",this._set("loadWarnings",[]),this.addResolvingPromise(new Promise((e=>{var t=this.load.bind(this);this.load=r=>{var i=new Promise(((e,t)=>{var i=Object(l.q)(r,t);this.destroyed&&t(new c.a("load:instance-destroyed","Instance of '".concat(this.declaredClass||this.constructor.name,"' is already destroyed"),{instance:this})),this._promiseProps.when(e,t).finally((()=>{i&&i.remove()}))}));if("not-loaded"===this.loadStatus){this._set("loadStatus","loading");var n=this._loadController=Object(l.d)();t({signal:n.signal}),Object(l.p)(n.signal,(()=>{this._promiseProps.abort()}))}return e(),i}}))),this.when((()=>{this._set("loadStatus",d),this._loadController=null}),(e=>{this._set("loadStatus","failed"),this._set("loadError",e),this._loadController=null}))}get loaded(){return this.loadStatus===d}get loadWarnings(){return this._get("loadWarnings")}load(){return null}cancelLoad(){var e;return this.isFulfilled()||(this._set("loadError",new c.a("load:cancelled","Cancelled")),null==(e=this._loadController)||e.abort()),this}};return Object(n.a)([Object(a.b)({readOnly:!0})],t.prototype,"loaded",null),Object(n.a)([Object(a.b)({readOnly:!0})],t.prototype,"loadError",void 0),Object(n.a)([Object(a.b)()],t.prototype,"loadStatus",void 0),Object(n.a)([Object(a.b)({type:[o.a],readOnly:!0})],t.prototype,"loadWarnings",null),t=Object(n.a)([Object(s.a)("esri.core.Loadable")],t)},p=class extends(h(u.a)){};p=Object(n.a)([Object(s.a)("esri.core.Loadable")],p),(i=p||(p={})).LoadableMixin=h,i.isLoadable=function(e){return!(!e||!e.load)};var f=p;t.a=f},function(e,t,r){"use strict";r.d(t,"a",(function(){return y})),r.d(t,"b",(function(){return O}));var i=r(82),n=r(126),a=r(84),o=r(144),s=r(97),c=r(228),l=r(89),u=r(253),d=r(92);class h{constructor(){this._propertyOriginMap=new Map,this._originStores=new Array(o.a),this._values=new Map}clone(e){var t=this,r=new h,i=this._originStores[0];i&&i.forEach(((e,t)=>{r.set(t,Object(d.a)(e),0)}));for(var n=function(i){var n=t._originStores[i];n&&n.forEach(((t,n)=>{e&&e.has(n)||r.set(n,Object(d.a)(t),i)}))},a=2;a<o.a;a++)n(a);return r}get(e,t){var r=void 0===t?this._values:this._originStores[t];return r?r.get(e):void 0}keys(e){var t=null==e?this._values:this._originStores[e];return t?[...t.keys()]:[]}set(e,t,r=6){var i=this._originStores[r];if(i||(i=new Map,this._originStores[r]=i),i.set(e,t),!this._values.has(e)||Object(l.d)(this._propertyOriginMap.get(e))<=r){var n=this._values.get(e);return this._values.set(e,t),this._propertyOriginMap.set(e,r),n!==t}return!1}delete(e,t=6){var r=this._originStores[t];if(r){var i=r.get(e);if(r.delete(e),this._values.has(e)&&this._propertyOriginMap.get(e)===t){this._values.delete(e);for(var n=t-1;n>=0;n--){var a=this._originStores[n];if(a&&a.has(e)){this._values.set(e,a.get(e)),this._propertyOriginMap.set(e,n);break}}}return i}}has(e,t){var r=void 0===t?this._values:this._originStores[t];return!!r&&r.has(e)}revert(e,t){for(;t>0&&!this.has(e,t);)--t;var r=this._originStores[t],i=r&&r.get(e),n=this._values.get(e);return this._values.set(e,i),this._propertyOriginMap.set(e,t),n!==i}originOf(e){return this._propertyOriginMap.get(e)||0}forEach(e){this._values.forEach(e)}}var p=h,f=e=>{var t=class extends e{constructor(...e){super(...e);var t=Object(l.d)(Object(n.a)(this)),r=t.metadatas,i=t.store,a=new p;t.store=a,i.keys().forEach((e=>{a.set(e,i.get(e),0)})),Object.keys(r).forEach((e=>{t.internalGet(e)&&a.set(e,t.internalGet(e),0)}))}read(e,t){Object(u.a)(this,e,t)}getAtOrigin(e,t){var r=b(this),i=Object(o.d)(t);if("string"==typeof e)return r.get(e,i);var n={};return e.forEach((e=>{n[e]=r.get(e,i)})),n}originOf(e){return Object(o.b)(this.originIdOf(e))}originIdOf(e){return b(this).originOf(e)}revert(e,t){var r=b(this),i=Object(o.d)(t),a=Object(n.a)(this);("string"==typeof e?"*"===e?r.keys(i):[e]:e).forEach((e=>{a.propertyInvalidated(e),r.revert(e,i),a.propertyCommitted(e)}))}};return t=Object(i.a)([Object(a.a)("esri.core.ReadOnlyMultiOriginJSONSupport")],t)};function b(e){return Object(n.a)(e).store}var v=class extends(f(s.a)){};v=Object(i.a)([Object(a.a)("esri.core.ReadOnlyMultiOriginJSONSupport")],v);var m=e=>{var t=class extends e{constructor(...e){super(...e)}clear(e,t="user"){return g(this).delete(e,Object(o.d)(t))}write(e={},t){return Object(c.b)(this,e=e||{},t),e}setAtOrigin(e,t,r){Object(n.a)(this).setAtOrigin(e,t,Object(o.d)(r))}removeOrigin(e){var t=g(this),r=Object(o.d)(e),i=t.keys(r);for(var n of i)t.originOf(n)===r&&t.set(n,t.get(n,r),6)}updateOrigin(e,t){for(var r=g(this),i=Object(o.d)(t),n=this.get(e),a=i+1;a<o.a;++a)r.delete(e,a);r.set(e,n,i)}toJSON(e){return this.write({},e)}};return(t=Object(i.a)([Object(a.a)("esri.core.WriteableMultiOriginJSONSupport")],t)).prototype.toJSON.isDefaultToJSON=!0,t};function g(e){return Object(n.a)(e).store}var y=e=>{var t=class extends(m(f(e))){constructor(...e){super(...e)}};return t=Object(i.a)([Object(a.a)("esri.core.MultiOriginJSONSupport")],t)},O=class extends(y(s.a)){};O=Object(i.a)([Object(a.a)("esri.core.MultiOriginJSONSupport")],O)},,function(e,t,r){"use strict";r.d(t,"a",(function(){return l})),r.d(t,"b",(function(){return u}));var i=r(124),n=r(81),a=r(294),o=r(175),s=r(474),c=n.a.getLogger("esri.core.accessorSupport.extensions.serializableProperty.reader");function l(e,t,r){var n,a,o;e&&(!r&&!t.read||null!=(n=t.read)&&n.reader||!1===(null==(a=t.read)?void 0:a.enabled)||("types"in(o=e)?v(o.types):b(o.type))&&Object(i.c)("read.reader",u(e),t))}function u(e){var t,r=null!=(t=e.ndimArray)?t:0;if(r>1)return function(e){var t,r=d(e),i=h.bind(null,r),n=null!=(t=e.ndimArray)?t:0;return(e,t,r)=>{if(null==e)return e;e=i(e,r,n);for(var a=n,o=e;a>0&&Array.isArray(o);)a--,o=o[0];if(void 0!==o)for(var s=0;s<a;s++)e=[e];return e}}(e);if(1===r)return p(e);if("type"in e&&f(e.type)){var i,n,a=null==(i=e.type.prototype)||null==(n=i.itemType)?void 0:n.Type,o=p("function"==typeof a?{type:a}:{types:a});return(t,r,i)=>{var n=o(t,r,i);return n?new e.type(n):n}}return d(e)}function d(e){return"type"in e?function(e){return e.prototype.read?(t,r,i)=>{if(null==t)return t;var n=typeof t;if("object"===n){var a=new e;return a.read(t,i),a}c.error("Expected JSON value of type 'object' to deserialize type '".concat(e.prototype.declaredClass,"', but got '").concat(n,"'"))}:e.fromJSON}(e.type):function(e){var t,r=null,i=null!=(t=e.errorContext)?t:"type";return(t,n,s)=>{if(null==t)return t;var l=typeof t;if("object"===l){r||(r=function(e){var t={};for(var r in e.typeMap){var i,n,o=e.typeMap[r],s=Object(a.a)(o.prototype);if("function"!=typeof e.key){var c=s.properties[e.key];if(c){null!=(i=c.json)&&i.type&&Array.isArray(c.json.type)&&1===c.json.type.length&&"string"==typeof c.json.type[0]&&(t[c.json.type[0]]=o);var l=null==(n=c.json)?void 0:n.write;if(l&&l.writer){var u=l.target,d="string"==typeof u?u:e.key,h={};l.writer(r,h,d),h[d]&&(t[h[d]]=o)}else t[r]=o}}}return t}(e));var u=e.key;if("string"==typeof u){var d=t[u],h=d?r[d]:e.defaultKeyValue?e.typeMap[e.defaultKeyValue]:void 0;if(!h){var p="Type '".concat(d||"unknown","' is not supported");return s&&s.messages&&t&&s.messages.push(new o.a("".concat(i,":unsupported"),p,{definition:t,context:s})),void c.error(p)}var f=new h;return f.read(t,s),f}}else c.error("Expected JSON value of type 'object' to deserialize, but got '".concat(l,"'"))}}(e.types)}function h(e,t,r,i){return 0!==i&&Array.isArray(t)?t.map((t=>h(e,t,r,i-1))):e(t,void 0,r)}function p(e){var t=d(e);return(e,r,i)=>{if(null==e)return e;if(Array.isArray(e)){var n=[];for(var a of e){var o=t(a,void 0,i);void 0!==o&&n.push(o)}return n}var s=t(e,void 0,i);return void 0!==s?[s]:void 0}}function f(e){if(!Object(s.a)(e))return!1;var t=e.prototype.itemType;return!(!t||!t.Type)&&("function"==typeof t.Type?b(t.Type):v(t.Type))}function b(e){return!Array.isArray(e)&&!!e&&e.prototype&&("read"in e.prototype||"fromJSON"in e||f(e))}function v(e){for(var t in e.typeMap)if(!b(e.typeMap[t]))return!1;return!0}},function(e,t,r){"use strict";r.d(t,"a",(function(){return n}));var i=0;function n(){return++i}},function(e,t,r){"use strict";r.r(t),r.d(t,"executeQuery",(function(){return b})),r.d(t,"executeQueryForCount",(function(){return j})),r.d(t,"executeQueryForExtent",(function(){return _})),r.d(t,"executeQueryForIds",(function(){return O})),r.d(t,"executeQueryPBF",(function(){return m})),r.d(t,"executeQueryPBFBuffer",(function(){return y})),r.d(t,"queryToQueryStringParameters",(function(){return f})),r.d(t,"runQuery",(function(){return w}));var i=r(91),n=r(7),a=r(89),o=r(83),s=r(100),c=r(106),l=r(236),u=r(270),d=r(269),h=r(386),p="Layer does not support extent calculation.";function f(e,t){var r=e.geometry,i=e.toJSON(),n=i;if(Object(a.k)(r)&&(n.geometry=JSON.stringify(r),n.geometryType=Object(s.c)(r),n.inSR=r.spatialReference.wkid||JSON.stringify(r.spatialReference)),i.groupByFieldsForStatistics&&(n.groupByFieldsForStatistics=i.groupByFieldsForStatistics.join(",")),i.objectIds&&(n.objectIds=i.objectIds.join(",")),i.orderByFields&&(n.orderByFields=i.orderByFields.join(",")),!i.outFields||!i.returnDistinctValues&&(null!=t&&t.returnCountOnly||null!=t&&t.returnExtentOnly||null!=t&&t.returnIdsOnly)?delete n.outFields:-1!==i.outFields.indexOf("*")?n.outFields="*":n.outFields=i.outFields.join(","),i.outSR?n.outSR=i.outSR.wkid||JSON.stringify(i.outSR):r&&(i.returnGeometry||i.returnCentroid)&&(n.outSR=n.inSR),i.returnGeometry&&delete i.returnGeometry,i.outStatistics&&(n.outStatistics=JSON.stringify(i.outStatistics)),i.pixelSize&&(n.pixelSize=JSON.stringify(i.pixelSize)),i.quantizationParameters&&(n.quantizationParameters=JSON.stringify(i.quantizationParameters)),i.parameterValues&&(n.parameterValues=JSON.stringify(i.parameterValues)),i.rangeValues&&(n.rangeValues=JSON.stringify(i.rangeValues)),i.dynamicDataSource&&(n.layer=JSON.stringify({source:i.dynamicDataSource}),delete i.dynamicDataSource),i.timeExtent){var o=i.timeExtent,{start:c,end:l}=o;null==c&&null==l||(n.time=c===l?c:"".concat(null==c?"null":c,",").concat(null==l?"null":l)),delete i.timeExtent}return n}function b(e,t,r,i){return v.apply(this,arguments)}function v(){return(v=Object(n.a)((function*(e,t,r,i){var n=Object(a.k)(t.timeExtent)&&t.timeExtent.isEmpty?{data:{features:[]}}:yield w(e,t,"json",i);return Object(u.a)(t,r,n.data),n}))).apply(this,arguments)}function m(e,t,r,i){return g.apply(this,arguments)}function g(){return(g=Object(n.a)((function*(e,t,r,i){if(Object(a.k)(t.timeExtent)&&t.timeExtent.isEmpty)return Promise.resolve({data:r.createFeatureResult()});var n=yield y(e,t,i),o=n;return o.data=Object(h.a)(n.data,r),o}))).apply(this,arguments)}function y(e,t,r){return w(e,t,"pbf",r)}function O(e,t,r){return Object(a.k)(t.timeExtent)&&t.timeExtent.isEmpty?Promise.resolve({data:{objectIds:[]}}):w(e,t,"json",r,{returnIdsOnly:!0})}function j(e,t,r){return Object(a.k)(t.timeExtent)&&t.timeExtent.isEmpty?Promise.resolve({data:{count:0}}):w(e,t,"json",r,{returnIdsOnly:!0,returnCountOnly:!0})}function _(e,t,r){return Object(a.k)(t.timeExtent)&&t.timeExtent.isEmpty?Promise.resolve({data:{count:0,extent:null}}):w(e,t,"json",r,{returnExtentOnly:!0,returnCountOnly:!0}).then((e=>{var t=e.data;if(t.hasOwnProperty("extent"))return e;if(t.features)throw new Error(p);if(t.hasOwnProperty("count"))throw new Error(p);return e}))}function w(e,t,r,n={},s={}){var u="string"==typeof e?Object(o.J)(e):e,h=t.geometry?[t.geometry]:[];return n.responseType="pbf"===r?"array-buffer":"json",Object(l.a)(h,null,n).then((e=>{var l=e&&e[0];Object(a.k)(l)&&((t=t.clone()).geometry=l);var h=Object(d.a)(Object(i.a)(Object(i.a)(Object(i.a)({},u.query),{},{f:r},s),f(t,s)));return Object(c.default)(Object(o.y)(u.path,"query"),Object(i.a)(Object(i.a)({},n),{},{query:Object(i.a)(Object(i.a)({},h),n.query)}))}))}},function(e,t,r){"use strict";r.d(t,"a",(function(){return o})),r.d(t,"b",(function(){return u})),r.d(t,"c",(function(){return n})),r.d(t,"d",(function(){return v})),r.d(t,"e",(function(){return p})),r.d(t,"f",(function(){return f})),r.d(t,"g",(function(){return y})),r.d(t,"h",(function(){return O})),r.d(t,"i",(function(){return h})),r.d(t,"j",(function(){return m})),r.d(t,"k",(function(){return b})),r.d(t,"l",(function(){return a})),r.d(t,"m",(function(){return g}));var i=r(184);function n(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e}function a(e,t,r,i,n){return e[0]=t,e[1]=r,e[2]=i,e[3]=n,e}function o(e,t,r){return e[0]=t[0]+r[0],e[1]=t[1]+r[1],e[2]=t[2]+r[2],e[3]=t[3]+r[3],e}function s(e,t,r){return e[0]=t[0]-r[0],e[1]=t[1]-r[1],e[2]=t[2]-r[2],e[3]=t[3]-r[3],e}function c(e,t,r){return e[0]=t[0]*r[0],e[1]=t[1]*r[1],e[2]=t[2]*r[2],e[3]=t[3]*r[3],e}function l(e,t,r){return e[0]=t[0]/r[0],e[1]=t[1]/r[1],e[2]=t[2]/r[2],e[3]=t[3]/r[3],e}function u(e,t,r){return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e}function d(e,t){var r=t[0]-e[0],i=t[1]-e[1],n=t[2]-e[2],a=t[3]-e[3];return Math.sqrt(r*r+i*i+n*n+a*a)}function h(e,t){var r=t[0]-e[0],i=t[1]-e[1],n=t[2]-e[2],a=t[3]-e[3];return r*r+i*i+n*n+a*a}function p(e){var t=e[0],r=e[1],i=e[2],n=e[3];return Math.sqrt(t*t+r*r+i*i+n*n)}function f(e){var t=e[0],r=e[1],i=e[2],n=e[3];return t*t+r*r+i*i+n*n}function b(e,t){var r=t[0],i=t[1],n=t[2],a=t[3],o=r*r+i*i+n*n+a*a;return o>0&&(o=1/Math.sqrt(o),e[0]=r*o,e[1]=i*o,e[2]=n*o,e[3]=a*o),e}function v(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+e[3]*t[3]}function m(e,t,r,i){var n=t[0],a=t[1],o=t[2],s=t[3];return e[0]=n+i*(r[0]-n),e[1]=a+i*(r[1]-a),e[2]=o+i*(r[2]-o),e[3]=s+i*(r[3]-s),e}function g(e,t,r){var i=t[0],n=t[1],a=t[2],o=t[3];return e[0]=r[0]*i+r[4]*n+r[8]*a+r[12]*o,e[1]=r[1]*i+r[5]*n+r[9]*a+r[13]*o,e[2]=r[2]*i+r[6]*n+r[10]*a+r[14]*o,e[3]=r[3]*i+r[7]*n+r[11]*a+r[15]*o,e}function y(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]}function O(e,t){var r=e[0],n=e[1],a=e[2],o=e[3],s=t[0],c=t[1],l=t[2],u=t[3];return Math.abs(r-s)<=i.a*Math.max(1,Math.abs(r),Math.abs(s))&&Math.abs(n-c)<=i.a*Math.max(1,Math.abs(n),Math.abs(c))&&Math.abs(a-l)<=i.a*Math.max(1,Math.abs(a),Math.abs(l))&&Math.abs(o-u)<=i.a*Math.max(1,Math.abs(o),Math.abs(u))}var j=s,_=c,w=l,x=d,S=h,M=p,T=f;Object.freeze({__proto__:null,copy:n,set:a,add:o,subtract:s,multiply:c,divide:l,ceil:function(e,t){return e[0]=Math.ceil(t[0]),e[1]=Math.ceil(t[1]),e[2]=Math.ceil(t[2]),e[3]=Math.ceil(t[3]),e},floor:function(e,t){return e[0]=Math.floor(t[0]),e[1]=Math.floor(t[1]),e[2]=Math.floor(t[2]),e[3]=Math.floor(t[3]),e},min:function(e,t,r){return e[0]=Math.min(t[0],r[0]),e[1]=Math.min(t[1],r[1]),e[2]=Math.min(t[2],r[2]),e[3]=Math.min(t[3],r[3]),e},max:function(e,t,r){return e[0]=Math.max(t[0],r[0]),e[1]=Math.max(t[1],r[1]),e[2]=Math.max(t[2],r[2]),e[3]=Math.max(t[3],r[3]),e},round:function(e,t){return e[0]=Math.round(t[0]),e[1]=Math.round(t[1]),e[2]=Math.round(t[2]),e[3]=Math.round(t[3]),e},scale:u,scaleAndAdd:function(e,t,r,i){return e[0]=t[0]+r[0]*i,e[1]=t[1]+r[1]*i,e[2]=t[2]+r[2]*i,e[3]=t[3]+r[3]*i,e},distance:d,squaredDistance:h,length:p,squaredLength:f,negate:function(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=-t[3],e},inverse:function(e,t){return e[0]=1/t[0],e[1]=1/t[1],e[2]=1/t[2],e[3]=1/t[3],e},normalize:b,dot:v,lerp:m,random:function(e,t){var r,n,a,o,s,c;t=t||1;do{s=(r=2*Object(i.b)()-1)*r+(n=2*Object(i.b)()-1)*n}while(s>=1);do{c=(a=2*Object(i.b)()-1)*a+(o=2*Object(i.b)()-1)*o}while(c>=1);var l=Math.sqrt((1-s)/c);return e[0]=t*r,e[1]=t*n,e[2]=t*a*l,e[3]=t*o*l,e},transformMat4:g,transformQuat:function(e,t,r){var i=t[0],n=t[1],a=t[2],o=r[0],s=r[1],c=r[2],l=r[3],u=l*i+s*a-c*n,d=l*n+c*i-o*a,h=l*a+o*n-s*i,p=-o*i-s*n-c*a;return e[0]=u*l+p*-o+d*-c-h*-s,e[1]=d*l+p*-s+h*-o-u*-c,e[2]=h*l+p*-c+u*-s-d*-o,e[3]=t[3],e},str:function(e){return"vec4("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+")"},exactEquals:y,equals:O,sub:j,mul:_,div:w,dist:x,sqrDist:S,len:M,sqrLen:T})},function(e,t,r){"use strict";var i=r(91),n=(r(80),r(81)),a=r(205),o=r(486),s=n.a.getLogger("esri.views.webgl.FrameBufferObject");class c{constructor(e,t,r,n){var s,l;if(this._context=e,this._glName=null,this._depthAttachment=null,this._stencilAttachment=null,this._colorAttachments=new Map,this._initialized=!1,this._desc=Object(i.a)({},t),e.instanceCounter.increment(4,this),r)if(Array.isArray(r))for(var u of r){var{attachmentPoint:d,texture:h}=u,p=h instanceof a.a?h:new a.a(e,h);s=p.descriptor,this._colorAttachments.set(d,p),this._validateColorAttachmentPoint(d),this._validateTextureDimensions(s,this._desc)}else r instanceof a.a?(s=r.descriptor,this._colorAttachments.set(36064,r)):(s=r,this._colorAttachments.set(36064,new a.a(e,r))),0!==(null==(l=this._desc)?void 0:l.colorTarget)&&console.error("Framebuffer is initialized with a texture however the descriptor indicates using a renderbuffer color attachment!"),this._validateTextureDimensions(s,this._desc);if(n instanceof o.a){var f,b=null!=(f=this._desc.depthStencilTarget)?f:3;2===b?this._stencilAttachment=n:1===b||3===b?this._depthAttachment=n:console.error('If a Renderbuffer is provided, "depthStencilTarget" must be one of STENCIL_RENDER_BUFFER, DEPTH_RENDER_BUFFER or DEPTH_STENCIL_RENDER_BUFFER'),c._validateBufferDimensions(n.descriptor,this._desc)}else if(n){var v;this._context.capabilities.depthTexture||console.error("Extension WEBGL_depth_texture isn't supported therefore it is no possible to set the depth/stencil texture as an attachment!"),n instanceof a.a?(this._depthStencilTexture=n,v=this._depthStencilTexture.descriptor):(v=n,this._depthStencilTexture=new a.a(this._context,v)),this._validateTextureDimensions(v,this._desc)}}dispose(){if(this._desc){var e=this._context.getBoundFramebufferObject();this._disposeColorAttachments(),this._disposeDepthStencilAttachments(),this._glName&&(this._context.gl.deleteFramebuffer(this._glName),this._glName=null),this._context.bindFramebuffer(e),this._context.instanceCounter.decrement(4,this),this._desc=null}}get glName(){return this._glName}get descriptor(){return this._desc}get colorTexture(){var e=this._colorAttachments.get(36064);return e&&e instanceof a.a?e:null}get colorAttachment(){return this._colorAttachments.get(36064)}get depthStencilAttachment(){return this._depthStencilTexture||this._depthAttachment||this._stencilAttachment}get depthStencilTexture(){return this._depthStencilTexture}get width(){return this._desc.width}get height(){return this._desc.height}getColorTexture(e){var t=this._colorAttachments.get(e);return t&&t instanceof a.a?t:null}attachColorTexture(e,t=36064){if(e){this._validateColorAttachmentPoint(t);var r=e.descriptor;if(this._validateTextureDimensions(r,this._desc),this._disposeColorAttachments(),this._initialized){this._context.bindFramebuffer(this);var i=this._context.gl;i.framebufferTexture2D(i.FRAMEBUFFER,t,i.TEXTURE_2D,e.glName,0)}this._colorAttachments.set(t,e)}}detachColorTexture(e=36064){var t=this._colorAttachments.get(e);if(t instanceof a.a){var r=t;if(this._initialized){this._context.bindFramebuffer(this);var i=this._context.gl;i.framebufferTexture2D(i.FRAMEBUFFER,e,i.TEXTURE_2D,null,0)}return this._colorAttachments.delete(e),r}}attachDepthStencilTexture(e){if(e){var t=e.descriptor;if(34041!==t.pixelFormat&&console.error("Depth/Stencil texture must have a pixel type of DEPTH_STENCIL!"),34042!==t.dataType&&console.error("Depth/Stencil texture must have data type of UNSIGNED_INT_24_8!"),this._context.capabilities.depthTexture||console.error("Extension WEBGL_depth_texture isn't supported therefore it is no possible to set the depth/stencil texture!"),this._validateTextureDimensions(t,this._desc),this._desc.depthStencilTarget&&4!==this._desc.depthStencilTarget&&(this._desc.depthStencilTarget=4),this._disposeDepthStencilAttachments(),this._initialized){this._context.bindFramebuffer(this);var r=this._context.gl;r.framebufferTexture2D(r.FRAMEBUFFER,r.DEPTH_STENCIL_ATTACHMENT,r.TEXTURE_2D,e.glName,0)}this._depthStencilTexture=e}}detachDepthStencilTexture(){var e=this._depthStencilTexture;if(e&&this._initialized){this._context.bindFramebuffer(this);var t=this._context.gl;this._context.gl.framebufferTexture2D(t.FRAMEBUFFER,t.DEPTH_STENCIL_ATTACHMENT,t.TEXTURE_2D,null,0)}return this._depthStencilTexture=null,e}attachDepthStencilBuffer(e){if(e){var t=e.descriptor;if(34041!==t.internalFormat&&33189!==t.internalFormat&&console.error("Depth/Stencil buffer must have correct internalFormat"),c._validateBufferDimensions(t,this._desc),this._disposeDepthStencilAttachments(),this._desc.depthStencilTarget=34041===t.internalFormat?3:1,this._initialized){this._context.bindFramebuffer(this);var r=this._context.gl,i=1===this._desc.depthStencilTarget?r.DEPTH_ATTACHMENT:r.DEPTH_STENCIL_ATTACHMENT;r.framebufferRenderbuffer(r.FRAMEBUFFER,i,r.RENDERBUFFER,e.glName)}this._depthAttachment=e}}detachDepthStencilBuffer(){var e=this._context.gl,t=this._depthAttachment;if(t&&this._initialized){this._context.bindFramebuffer(this);var r=1===this._desc.depthStencilTarget?e.DEPTH_ATTACHMENT:e.DEPTH_STENCIL_ATTACHMENT;e.framebufferRenderbuffer(e.FRAMEBUFFER,r,e.RENDERBUFFER,null)}return this._depthAttachment=null,t}copyToTexture(e,t,r,i,n,a,o){(e<0||t<0||n<0||a<0)&&console.error("Offsets cannot be negative!"),(r<=0||i<=0)&&console.error("Copy width and height must be greater than zero!");var s=this._desc,c=o.descriptor;3553!==o.descriptor.target&&console.error("Texture target must be TEXTURE_2D!"),(e+r>s.width||t+i>s.height||n+r>c.width||a+i>c.height)&&console.error("Bad dimensions, the current input values will attempt to read or copy out of bounds!");var l=this._context;l.bindTexture(o,0),l.bindFramebuffer(this),l.gl.copyTexSubImage2D(3553,0,n,a,e,t,r,i)}readPixels(e,t,r,i,n,a,o){(r<=0||i<=0)&&console.error("Copy width and height must be greater than zero!"),o||console.error("Target memory is not initialized!"),this._context.bindFramebuffer(this),this._context.gl.readPixels(e,t,r,i,n,a,o)}resize(e,t){var r=this._desc;if(r.width!==e||r.height!==t){if(!this._initialized)return r.width=e,r.height=t,this._colorAttachments.forEach((r=>{r&&r.resize(e,t)})),void(this._depthStencilTexture&&this._depthStencilTexture.resize(e,t));r.width=e,r.height=t,this._colorAttachments.forEach((r=>{r&&r.resize(e,t)})),null!=this._depthStencilTexture?this._depthStencilTexture.resize(e,t):(this._depthAttachment||this._stencilAttachment)&&(this._depthAttachment&&this._depthAttachment.resize(e,t),this._stencilAttachment&&this._stencilAttachment.resize(e,t)),this._context.getBoundFramebufferObject()===this&&this._context.bindFramebuffer(null),this._initialized=!1}}initializeAndBind(){var e,t,r,i,n=this._context.gl;if(this._initialized)n.bindFramebuffer(n.FRAMEBUFFER,this.glName);else{this._glName&&n.deleteFramebuffer(this._glName);var s=this._context,c=n.createFramebuffer(),u=this._desc,d=null!=(e=u.colorTarget)?e:1,h=null!=(t=u.width)?t:1,p=null!=(r=u.height)?r:1;if(n.bindFramebuffer(n.FRAMEBUFFER,c),0===this._colorAttachments.size)if(0===d)this._colorAttachments.set(36064,l(s,u));else{var f=new o.a(s,{internalFormat:32854,width:h,height:p});this._colorAttachments.set(36064,f)}this._colorAttachments.forEach(((e,t)=>{e&&(e instanceof a.a?n.framebufferTexture2D(n.FRAMEBUFFER,t,n.TEXTURE_2D,e.glName,0):n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.RENDERBUFFER,e.glName))}));var b=null!=(i=u.depthStencilTarget)?i:0;switch(b){case 1:case 3:this._depthAttachment||(this._depthAttachment=new o.a(s,{internalFormat:1===u.depthStencilTarget?33189:34041,width:h,height:p}));var v=1===b?n.DEPTH_ATTACHMENT:n.DEPTH_STENCIL_ATTACHMENT;n.framebufferRenderbuffer(n.FRAMEBUFFER,v,n.RENDERBUFFER,this._depthAttachment.glName);break;case 2:this._stencilAttachment||(this._stencilAttachment=new o.a(s,{internalFormat:36168,width:h,height:p})),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.STENCIL_ATTACHMENT,n.RENDERBUFFER,this._stencilAttachment.glName);break;case 4:if(!this._depthStencilTexture){s.capabilities.depthTexture||console.error("Extension WEBGL_depth_texture isn't supported therefore it is no possible to set the depth/stencil texture as an attachment!");var m={target:3553,pixelFormat:34041,dataType:34042,samplingMode:9728,wrapMode:33071,width:h,height:p};this._depthStencilTexture=new a.a(s,m)}n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.TEXTURE_2D,this._depthStencilTexture.glName,0)}this._glName=c,this._initialized=!0}}_disposeColorAttachments(){this._colorAttachments.forEach(((e,t)=>{if(e instanceof a.a){if(this._initialized){this._context.bindFramebuffer(this);var r=this._context.gl;r.framebufferTexture2D(r.FRAMEBUFFER,t,r.TEXTURE_2D,null,0)}e.dispose()}else if(e instanceof WebGLRenderbuffer){var i=this._context.gl;this._initialized&&(this._context.bindFramebuffer(this),i.framebufferRenderbuffer(i.FRAMEBUFFER,t,i.RENDERBUFFER,null)),this._context.gl.deleteRenderbuffer(e)}})),this._colorAttachments.clear()}_disposeDepthStencilAttachments(){var e=this._context.gl;if(this._depthAttachment){if(this._initialized){this._context.bindFramebuffer(this);var t=1===this._desc.depthStencilTarget?e.DEPTH_ATTACHMENT:e.DEPTH_STENCIL_ATTACHMENT;e.framebufferRenderbuffer(e.FRAMEBUFFER,t,e.RENDERBUFFER,null)}this._depthAttachment.dispose(),this._depthAttachment=null}this._stencilAttachment&&(this._initialized&&(this._context.bindFramebuffer(this),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.STENCIL_ATTACHMENT,e.RENDERBUFFER,null)),this._stencilAttachment.dispose(),this._stencilAttachment=null),this._depthStencilTexture&&(this._initialized&&(this._context.bindFramebuffer(this),e.framebufferTexture2D(e.FRAMEBUFFER,e.DEPTH_STENCIL_ATTACHMENT,e.TEXTURE_2D,null,0)),this._depthStencilTexture.dispose(),this._depthStencilTexture=null)}static _validateBufferDimensions(e,t){console.assert(e.width>=0&&e.height>=0),void 0!==t.width&&t.width>=0&&void 0!==t.height&&t.height>=0?t.width===e.width&&t.height===e.height||console.error("Renderbuffer dimensions must match the framebuffer's!"):(t.width=e.width,t.height=e.height)}_validateTextureDimensions(e,t){console.assert(e.width>=0&&e.height>=0),3553!==e.target&&console.error("Texture type must be TEXTURE_2D!"),void 0!==t.width&&t.width>=0&&void 0!==t.height&&t.height>=0?t.width===e.width&&t.height===e.height||console.error("Color attachment texture must match the framebuffer's!"):(t.width=e.width,t.height=e.height)}_validateColorAttachmentPoint(e){if(-1===c._MAX_COLOR_ATTACHMENTS){var t=this._context.capabilities.drawBuffers;if(t){var r=this._context.gl;c._MAX_COLOR_ATTACHMENTS=r.getParameter(t.MAX_COLOR_ATTACHMENTS)}else c._MAX_COLOR_ATTACHMENTS=1}var i=e-36064;i+1>c._MAX_COLOR_ATTACHMENTS&&s.error("esri.FrameBufferObject","illegal attachment point for color attachment: ".concat(i+1,". Implementation supports up to ").concat(c._MAX_COLOR_ATTACHMENTS," color attachments"))}}c._MAX_COLOR_ATTACHMENTS=-1;var l=(e,t)=>new a.a(e,{target:3553,pixelFormat:6408,dataType:5121,samplingMode:9728,wrapMode:33071,width:t.width,height:t.height});t.a=c},function(e,t,r){"use strict";r.d(t,"a",(function(){return a}));var i=r(139),n=r(117),a={inches:Object(n.c)(1,"meters","inches"),feet:Object(n.c)(1,"meters","feet"),"us-feet":Object(n.c)(1,"meters","us-feet"),yards:Object(n.c)(1,"meters","yards"),miles:Object(n.c)(1,"meters","miles"),"nautical-miles":Object(n.c)(1,"meters","nautical-miles"),millimeters:Object(n.c)(1,"meters","millimeters"),centimeters:Object(n.c)(1,"meters","centimeters"),decimeters:Object(n.c)(1,"meters","decimeters"),meters:Object(n.c)(1,"meters","meters"),kilometers:Object(n.c)(1,"meters","kilometers"),"decimal-degrees":1/Object(n.m)(1,"meters",i.a.radius)}},function(e,t,r){"use strict";var i,n=r(7),a=r(82),o=(r(80),r(92)),s=(r(81),r(88),r(85)),c=r(102),l=r(84),u=(r(83),r(86),r(87),r(128)),d=r(203),h=r(412),p=i=class extends(Object(d.a)(u.a)){constructor(e){super(e),this.description=null,this.label=null,this.symbol=null,this.type="simple"}collectRequiredFields(e,t){var r=this;return Object(n.a)((function*(){yield Promise.all([r.collectSymbolFields(e,t),r.collectVVRequiredFields(e,t)])}))()}collectSymbolFields(e,t){var r=this;return Object(n.a)((function*(){yield Promise.all(r.getSymbols().map((r=>r.collectRequiredFields(e,t))))}))()}getSymbol(e,t){return this.symbol}getSymbolAsync(e,t){var r=this;return Object(n.a)((function*(){return r.symbol}))()}getSymbols(){return this.symbol?[this.symbol]:[]}getAttributeHash(){return this.visualVariables&&this.visualVariables.reduce(((e,t)=>e+t.getAttributeHash()),"")}getMeshHash(){return this.getSymbols().reduce(((e,t)=>e+JSON.stringify(t)),"")}get arcadeRequired(){return this.arcadeRequiredForVisualVariables}clone(){return new i({description:this.description,label:this.label,symbol:this.symbol&&this.symbol.clone(),visualVariables:Object(o.a)(this.visualVariables),authoringInfo:this.authoringInfo&&this.authoringInfo.clone()})}};Object(a.a)([Object(s.b)({type:String,json:{write:!0}})],p.prototype,"description",void 0),Object(a.a)([Object(s.b)({type:String,json:{write:!0}})],p.prototype,"label",void 0),Object(a.a)([Object(s.b)(h.b)],p.prototype,"symbol",void 0),Object(a.a)([Object(c.a)({simple:"simple"})],p.prototype,"type",void 0);var f=p=i=Object(a.a)([Object(l.a)("esri.renderers.SimpleRenderer")],p);t.a=f},function(e,t,r){"use strict";var i,n=r(82),a=(r(80),r(92)),o=(r(81),r(88),r(85)),s=r(95),c=r(98),l=r(84),u=r(96),d=(r(83),r(86),r(87),r(90)),h=r(138),p=r(341),f=r(230),b=i=class extends d.a{constructor(){super(...arguments),this.expression=null,this.title=null,this.value=null}readExpression(e,t){return t.value?Object(f.a)(t.value):e}writeExpression(e,t,r){null!=this.value&&(e=Object(f.a)(this.value)),t[r]=e}clone(){return new i({expression:this.expression,title:this.title,value:this.value})}};Object(n.a)([Object(o.b)({type:String,json:{write:{allowNull:!0}}})],b.prototype,"expression",void 0),Object(n.a)([Object(c.a)("expression",["expression","value"])],b.prototype,"readExpression",null),Object(n.a)([Object(u.a)("expression")],b.prototype,"writeExpression",null),Object(n.a)([Object(o.b)({type:String,json:{write:!0,origins:{"web-scene":{write:!1}}}})],b.prototype,"title",void 0),Object(n.a)([Object(o.b)({json:{read:!1,write:!1}})],b.prototype,"value",void 0);var v,m=b=i=Object(n.a)([Object(l.a)("esri.layers.support.LabelExpressionInfo")],b),g=r(234),y=new s.a({esriServerPointLabelPlacementAboveCenter:"above-center",esriServerPointLabelPlacementAboveLeft:"above-left",esriServerPointLabelPlacementAboveRight:"above-right",esriServerPointLabelPlacementBelowCenter:"below-center",esriServerPointLabelPlacementBelowLeft:"below-left",esriServerPointLabelPlacementBelowRight:"below-right",esriServerPointLabelPlacementCenterCenter:"center-center",esriServerPointLabelPlacementCenterLeft:"center-left",esriServerPointLabelPlacementCenterRight:"center-right",esriServerLinePlacementAboveAfter:"above-after",esriServerLinePlacementAboveAlong:"above-along",esriServerLinePlacementAboveBefore:"above-before",esriServerLinePlacementAboveStart:"above-start",esriServerLinePlacementAboveEnd:"above-end",esriServerLinePlacementBelowAfter:"below-after",esriServerLinePlacementBelowAlong:"below-along",esriServerLinePlacementBelowBefore:"below-before",esriServerLinePlacementBelowStart:"below-start",esriServerLinePlacementBelowEnd:"below-end",esriServerLinePlacementCenterAfter:"center-after",esriServerLinePlacementCenterAlong:"center-along",esriServerLinePlacementCenterBefore:"center-before",esriServerLinePlacementCenterStart:"center-start",esriServerLinePlacementCenterEnd:"center-end",esriServerPolygonPlacementAlwaysHorizontal:"always-horizontal"},{ignoreUnknown:!0});function O(e){return!e||"service"!==e.origin&&!j(e.layer)}function j(e){return"map-image"===(null==e?void 0:e.type)}function _(e){var t,r;return!!j(e)&&!(null==(t=e.capabilities)||null==(r=t.exportMap)||!r.supportsArcadeExpressionForLabeling)}var w=v=class extends d.a{constructor(e){super(e),this.type="label",this.name=null,this.deconflictionStrategy="static",this.labelExpression=null,this.labelExpressionInfo=null,this.labelPlacement=null,this.maxScale=0,this.minScale=0,this.symbol=g.a,this.useCodedValues=void 0,this.where=null}static evaluateWhere(e,t){var r=function(e,t,r){switch(t){case"=":return e==r;case"<>":return e!=r;case">":return e>r;case">=":return e>=r;case"<":return e<r;case"<=":return e<=r}return!1};try{if(null==e)return!0;var i=e.split(" ");if(3===i.length)return r(t[i[0]],i[1],i[2]);if(7===i.length){var n=r(t[i[0]],i[1],i[2]),a=i[3],o=r(t[i[4]],i[5],i[6]);switch(a){case"AND":return n&&o;case"OR":return n||o}}return!1}catch(s){console.log("Error.: can't parse = "+e)}}readLabelExpression(e,t){var r=t.labelExpressionInfo;if(!r||!r.value&&!r.expression)return e}writeLabelExpression(e,t,r){if(this.labelExpressionInfo)if(null!=this.labelExpressionInfo.value)e=Object(f.f)(this.labelExpressionInfo.value);else if(null!=this.labelExpressionInfo.expression){var i=Object(f.e)(this.labelExpressionInfo.expression);i&&(e="["+i+"]")}null!=e&&(t[r]=e)}writeLabelExpressionInfo(e,t,r,i){if(null==e&&null!=this.labelExpression&&O(i))e=new m({expression:this.getLabelExpressionArcade()});else if(!e)return;var n=e.toJSON(i);n.expression&&(t[r]=n)}writeMaxScale(e,t){(e||this.minScale)&&(t.maxScale=e)}writeMinScale(e,t){(e||this.maxScale)&&(t.minScale=e)}getLabelExpression(){return Object(f.b)(this)}getLabelExpressionArcade(){return Object(f.c)(this)}getLabelExpressionSingleField(){return Object(f.d)(this)}hash(){return JSON.stringify(this)}clone(){return new v({deconflictionStrategy:this.deconflictionStrategy,labelExpression:this.labelExpression,labelExpressionInfo:Object(a.a)(this.labelExpressionInfo),labelPlacement:this.labelPlacement,maxScale:this.maxScale,minScale:this.minScale,name:this.name,symbol:Object(a.a)(this.symbol),where:this.where,useCodedValues:this.useCodedValues})}};Object(n.a)([Object(o.b)({type:String,json:{write:!0}})],w.prototype,"name",void 0),Object(n.a)([Object(o.b)({type:String,json:{write:!0,default:"static",origins:{"web-scene":{write:!1}}}})],w.prototype,"deconflictionStrategy",void 0),Object(n.a)([Object(o.b)({type:String,json:{write:{overridePolicy(e,t,r){return this.labelExpressionInfo&&"service"===(null==r?void 0:r.origin)&&_(r.layer)?{enabled:!1}:{allowNull:!0}}}}})],w.prototype,"labelExpression",void 0),Object(n.a)([Object(c.a)("labelExpression")],w.prototype,"readLabelExpression",null),Object(n.a)([Object(u.a)("labelExpression")],w.prototype,"writeLabelExpression",null),Object(n.a)([Object(o.b)({type:m,json:{write:{overridePolicy:(e,t,r)=>function(e){return O(e)||_(e.layer)}(r)?{allowNull:!0}:{enabled:!1}}}})],w.prototype,"labelExpressionInfo",void 0),Object(n.a)([Object(u.a)("labelExpressionInfo")],w.prototype,"writeLabelExpressionInfo",null),Object(n.a)([Object(o.b)({type:y.apiValues,json:{type:y.jsonValues,read:y.read,write:y.write}})],w.prototype,"labelPlacement",void 0),Object(n.a)([Object(o.b)({type:Number})],w.prototype,"maxScale",void 0),Object(n.a)([Object(u.a)("maxScale")],w.prototype,"writeMaxScale",null),Object(n.a)([Object(o.b)({type:Number})],w.prototype,"minScale",void 0),Object(n.a)([Object(u.a)("minScale")],w.prototype,"writeMinScale",null),Object(n.a)([Object(o.b)({types:h.g,json:{origins:{"web-scene":{types:h.h,write:p.b,default:null}},write:p.b,default:null}})],w.prototype,"symbol",void 0),Object(n.a)([Object(o.b)({type:Boolean,json:{write:!0}})],w.prototype,"useCodedValues",void 0),Object(n.a)([Object(o.b)({type:String,json:{write:!0}})],w.prototype,"where",void 0);var x=w=v=Object(n.a)([Object(l.a)("esri.layers.support.LabelClass")],w);t.a=x},function(e,t,r){"use strict";r.d(t,"a",(function(){return B})),r.d(t,"b",(function(){return U})),r.d(t,"c",(function(){return L})),r.d(t,"d",(function(){return J})),r.d(t,"e",(function(){return G})),r.d(t,"f",(function(){return V})),r.d(t,"g",(function(){return q})),r.d(t,"h",(function(){return z})),r.d(t,"i",(function(){return E})),r.d(t,"j",(function(){return C})),r.d(t,"k",(function(){return A})),r.d(t,"l",(function(){return x})),r.d(t,"m",(function(){return S})),r.d(t,"n",(function(){return H})),r.d(t,"o",(function(){return K})),r.d(t,"p",(function(){return Y})),r.d(t,"q",(function(){return T})),r.d(t,"r",(function(){return R})),r.d(t,"s",(function(){return F}));var i=r(91),n=r(7),a=r(89),o=r(143),s=r(81),c=r(93),l=r(118),u=r(256),d=r(248),h=r(355),p=(r(171),s.a.getLogger("esri.widgets.Feature.support.featureUtils")),f=/href=(""|'')/gi,b=/(\{([^\{\r\n]+)\})/g,v=/\'/g,m=/^\s*expression\//i,g=/(\n)/gi,y=/[\u00A0-\u9999<>\&]/gim,O=/href\s*=\s*(?:\"([^\"]+)\"|\'([^\']+)\')/gi,j=/^(?:mailto:|tel:)/,_="relationships/",w=Object(u.a)("short-date-short-time");function x(e){if(!Object(a.j)(e))return e.get("sourceLayer")||e.get("layer")}function S(e,t){return M.apply(this,arguments)}function M(){return(M=Object(n.a)((function*(e,t){return"function"==typeof e?e.call(null,t):e}))).apply(this,arguments)}function T(e=""){if(e)return!j.test(e.trim().toLowerCase())}function P(e,t){if(!function(e){return m.test(e)}(t)||!e)return null;var r,i=t.replace(m,"").toLowerCase();return e.some((e=>e.name.toLowerCase()===i&&(r=e,!0))),r}function E(e,t){var r=P(t,null==e?void 0:e.fieldName);return r?r.title||null:e?e.label||e.fieldName:null}function C(e,t){var r=I(t,e);return r?r.name:e}function A(e,t){return e&&e.map((e=>C(e,t)))}function I(e,t){return e&&"function"==typeof e.getField?e.getField(t):null}function k(e){return"".concat(e).trim()}function F({attributes:e,globalAttributes:t,layer:r,text:n,fieldInfoMap:a}){return n?R({formattedAttributes:t,template:N(n,Object(i.a)(Object(i.a)({},t),e),r),fieldInfoMap:a}):""}function R({formattedAttributes:e,template:t,fieldInfoMap:r}){return k(function(e){return e.replace(f,"")}(Object(o.c)(Object(o.c)(t,(e=>function(e,t){var r=t.get(e.toLowerCase());return"{".concat(r&&r.fieldName||e,"}")}(e,r))),e)))}function D(e,t=!1){var r=Object(i.a)({},e);return Object.keys(r).forEach((e=>function(e,t,r=!1){var i=t[e];if("string"==typeof i){var n=(r?encodeURIComponent(i):i).replace(v,"%27");t[e]=n}}(e,r,t))),r}function L(e,t){return e.replace(b,((e,r,i)=>{var n=I(t,i);return n?"{".concat(n.name,"}"):r}))}function N(e,t,r){var i=L(e,r);return i?i.replace(O,((e,r,i)=>function(e,t,r){var i=(t=k(t))&&"{"!==t[0];return Object(o.c)(e,D(r,i))}(e,r||i,t))):i}function V(e,t){var r=t.fieldInfos,n=t.fieldName,a=z(r,n),o=null==a?void 0:a.clone(),s=t.preventPlacesFormatting,c=I(t.layer,n);if(o&&c&&"date"===c.type){var l=o.format||new h.a;l.dateFormat=l.dateFormat||"short-date-short-time",o.format=l}var u=o&&o.format;return"string"==typeof(e=function(e,t){if("string"==typeof e&&t&&null==t.dateFormat&&(null!=t.places||null!=t.digitSeparator)){var r=Number(e);if(!isNaN(r))return r}return e}(e,u))||null==e||null==u?e:s?Object(d.b)(e,Object(i.a)(Object(i.a)({},Object(d.a)(u)),{},{minimumFractionDigits:0,maximumFractionDigits:20})):u.format(e)}function z(e,t){if(e&&e.length&&t){var r,i=t.toLowerCase();return e.some((e=>!(!e.fieldName||e.fieldName.toLowerCase()!==i)&&(r=e,!0))),r}}function G(e,t){var{creatorField:r,creationDateField:i,editorField:n,editDateField:a}=e;if(t){var o=t[a];if("number"==typeof o){var s=t[n];return{type:"edit",date:Object(u.b)(o,w),user:s}}var c=t[i];if("number"==typeof c){var l=t[r];return{type:"create",date:Object(u.b)(c,w),user:l}}return null}}function U(e,t){var r=new Map;return e&&e.forEach((e=>{var i=C(e.fieldName,t);e.fieldName=i,r.set(i.toLowerCase(),e)})),r}function q(e){var t=[];if(!e)return t;var{fieldInfos:r,content:i}=e;return r&&t.push(...r),i&&Array.isArray(i)?(i.forEach((e=>{if("fields"===e.type){var r=e&&e.fieldInfos;r&&t.push(...r)}})),t):t}function H(e){return e.replace(y,(e=>"&#".concat(e.charCodeAt(0),";")))}function B(e){return"string"==typeof e?e.replace(g,'<br class="esri-text-new-line" />'):e}function W(e){var{value:t,fieldName:r,fieldInfos:i,fieldInfoMap:n,layer:a,graphic:o}=e;if(null==t)return"";var s=function({fieldName:e,value:t,graphic:r,layer:i}){if(K(e))return null;if(!i||"function"!=typeof i.getFieldDomain)return null;var n=i.getFieldDomain(e,{feature:r});return n&&"coded-value"===n.type?n.getName(t):null}({fieldName:r,value:t,graphic:o,layer:a});if(s)return s;var c=function({fieldName:e,graphic:t,layer:r}){if(K(e))return null;if(!r||"function"!=typeof r.getFeatureType)return null;var{typeIdField:i}=r;if(!i||e!==i)return null;var n=r.getFeatureType(t);return n?n.name:null}({fieldName:r,graphic:o,layer:a});if(c)return c;if(n.get(r.toLowerCase()))return V(t,{fieldInfos:i,fieldName:r,layer:a});var l=a&&a.fieldsIndex;return l&&l.isDateField(r)?Object(u.b)(t,w):B(t)}function J({fieldInfos:e,attributes:t,layer:r,graphic:n,fieldInfoMap:a,relatedInfos:o}){var s=Object(i.a)({},t);return null==o||o.forEach((e=>function(e,t){e&&t&&(t.relatedFeatures&&t.relatedFeatures&&t.relatedFeatures.forEach((r=>$({attributes:e,graphic:r,relatedInfo:t}))),t.relatedStatsFeatures&&t.relatedStatsFeatures&&t.relatedStatsFeatures.forEach((r=>$({attributes:e,graphic:r,relatedInfo:t}))))}(s,e))),Object.keys(s).forEach((t=>{var i=s[t];s[t]=W({fieldName:t,fieldInfos:e,fieldInfoMap:a,layer:r,value:i,graphic:n})})),s}function Z(e,t){return X.apply(this,arguments)}function X(){return(X=Object(n.a)((function*(e,t){var{layer:r,graphic:i,outFields:n,objectIds:a,returnGeometry:o,spatialReference:s}=e,l=a[0];if("number"!=typeof l&&"string"!=typeof l){var u="Could not query required fields for the specified feature. The feature's ID is invalid.",d={layer:r,graphic:i,objectId:l,requiredFields:n},h=new c.a("layer-query-features-invalid-objectid",u,d);throw p.warn(u,d),h}if("function"!=typeof r.queryFeatures){var f="The specified layer does not support the method 'queryFeatures'. The following fields will not be available.",b={layer:r,graphic:i,requiredFields:n},v=new c.a("layer-query-features-unsupported",f,b);throw p.warn(f,b),v}var m=r.createQuery();return m.objectIds=a,m.outFields=n,m.returnGeometry=!!o,m.outSpatialReference=s,(yield r.queryFeatures(m,t)).features[0]}))).apply(this,arguments)}function Y(e,t){return Q.apply(this,arguments)}function Q(){return(Q=Object(n.a)((function*({graphic:e,popupTemplate:t,layer:r,spatialReference:n},a){if(r&&t){var{returnGeometry:o}=t;"function"==typeof r.load&&(yield r.load(a));var s=e.attributes[r.objectIdField];if(null!=s){var c=[s],u=yield t.getRequiredFields(r.fields),d=Object(l.j)(u,e),h=d?[]:u;if(!d||o){var p=yield Z({layer:r,graphic:e,outFields:h,objectIds:c,returnGeometry:o,spatialReference:n},a);p&&(p.geometry&&(e.geometry=p.geometry),p.attributes&&(e.attributes=Object(i.a)(Object(i.a)({},e.attributes),p.attributes)))}}}}))).apply(this,arguments)}function K(e=""){return!!e&&-1!==e.indexOf(_)}function $({attributes:e,graphic:t,relatedInfo:r}){e&&t&&r&&Object.keys(t.attributes).forEach((i=>{var n=function(e){return e?"".concat(_).concat(e.layerId,"/").concat(e.fieldName):""}({layerId:r.relation.id.toString(),fieldName:i});e[n]=t.attributes[i]}))}},function(e,t,r){"use strict";r.r(t);var i,n=r(91),a=r(7),o=r(82),s=(r(80),r(92)),c=r(89),l=r(143),u=r(81),d=(r(88),r(85)),h=r(84),p=r(96),f=r(93),b=(r(83),r(86),r(87),r(94)),v=r(152),m=r(118),g=r(109),y=r(356),O=r(106),j=r(128),_=r(203),w=r(235),x=u.a.getLogger("esri.renderers.DictionaryRenderer"),S={type:"CIMSimpleLineCallout",lineSymbol:{type:"CIMLineSymbol",symbolLayers:[{type:"CIMSolidStroke",width:.5,color:[0,0,0,255]}]}},M=i=class extends(Object(_.a)(j.a)){constructor(e){super(e),this._ongoingRequests=new Map,this._symbolCache=new w.a(100),this.config=null,this.fieldMap=null,this.scaleExpression=null,this.scaleExpressionTitle=null,this.url=null,this.type="dictionary"}writeData(e,t){e&&(t.scalingExpressionInfo={expression:e,returnType:"number"})}writeVisualVariables(e,t,r,i){null!=i&&i.origin||super.writeVisualVariables(e,t,r,i)}clone(){return new i({config:Object(s.a)(this.config),scaleExpression:this.scaleExpression,scaleExpressionTitle:this.scaleExpressionTitle,fieldMap:Object(s.a)(this.fieldMap),url:Object(s.a)(this.url),visualVariables:Object(s.a)(this.visualVariables)})}getSymbolAsync(e,t){var r=this;return Object(a.a)((function*(){var i;r._dictionaryPromise||(r._dictionaryPromise=r.fetchResources(t));try{i=yield r._dictionaryPromise}catch(T){if(Object(b.m)(T))return r._dictionaryPromise=null,null}var n={};if(r.fieldMap)for(var a of r._symbolFields){var o=r.fieldMap[a];if(o&&null!==e.attributes[o]&&void 0!==e.attributes[o]){var s=""+e.attributes[o];n[a]=s}else n[a]=""}var u=i(n,t);if(!u||"string"!=typeof u)return null;var d=Object(l.b)(u).toString(),h=r._symbolCache.get(d);if(h)return h.catch((()=>{r._symbolCache.pop(d)})),h;var p=u.split(";"),f=[],v=[];for(var m of p)if(m&&0!==m.length)if(-1===m.indexOf("po:"))if(-1!==m.indexOf("|"))for(var y of m.split("|"))r._itemNames.has(y)&&f.push(y);else r._itemNames.has(m)&&f.push(m);else{var O=m.substr(3).split("|");if(3===O.length){var j=O[0],_=O[1],w=O[2];if("DashTemplate"===_)w=w.split(" ").map((e=>Number(e)));else if("Color"===_){var x=new g.a(w).toRgba();w=[x[0],x[1],x[2],255*x[3]]}else w=Number(w);v.push({primitiveName:j,propertyName:_,value:w})}}var S=!Object(c.k)(e.geometry)||!e.geometry.hasZ&&"point"===e.geometry.type,M=r._cimPartsToCIMSymbol(f,v,S,t);return r._symbolCache.put(d,M,1),M}))()}collectRequiredFields(e,t){var r=this;return Object(a.a)((function*(){yield r.collectVVRequiredFields(e,t),r.scaleExpression&&(yield Object(m.c)(e,t,r.scaleExpression));var i=t.map((e=>e.name));for(var n in r.fieldMap)i.indexOf(r.fieldMap[n])<0||e.add(r.fieldMap[n])}))()}get arcadeRequired(){return!0}fetchResources(e){var t=this;return Object(a.a)((function*(){if(t._dictionaryPromise)return t._dictionaryPromise;if(t.url){var r=Object(c.k)(e)?e.abortOptions:null,i=Object(O.default)(t.url+"/resources/styles/dictionary-info.json",Object(n.a)({responseType:"json",query:{f:"json"}},r)),[{data:a}]=yield Promise.all([i,Object(v.e)()]);if(!a)throw t._dictionaryPromise=null,new f.a("esri.renderers.DictionaryRenderer","Bad dictionary data!");var o=a.expression,s=a.authoringInfo;t._refSymbolUrlTemplate=t.url+"/"+a.cimRefTemplateUrl,t._itemNames=new Set(a.itemsNames),t._symbolFields=s.symbol;var l={};if(t.config){var u=t.config;for(var d in u)l[d]=u[d]}if(s.configuration)for(var h of s.configuration)l.hasOwnProperty(h.name)||(l[h.name]=h.value);var p=[];if(Object(c.k)(e)&&e.fields&&t.fieldMap){var b=function(r){var i=t.fieldMap[r],a=e.fields.filter((e=>e.name===i));a.length>0&&p.push(Object(n.a)(Object(n.a)({},a[0]),{},{name:r}))};for(var m of t._symbolFields)b(m)}return t._dictionaryPromise=Object(v.b)(o,Object(c.k)(e)?e.spatialReference:null,p,l).then((e=>{var t={scale:0};return(r,i)=>{var n=e.repurposeFeature({geometry:null,attributes:r});return t.scale=Object(c.k)(i)?i.scale:void 0,e.evaluate({$feature:n,$view:t})}})).catch((e=>(x.error("Creating dictinoary expression failed:",e),null))),t._dictionaryPromise}x.error("no valid URL!")}))()}getSymbol(){return null}getSymbols(){return[]}getAttributeHash(){return this.visualVariables&&this.visualVariables.reduce(((e,t)=>e+t.getAttributeHash()),"")}getMeshHash(){return"".concat(this.url,"-").concat(JSON.stringify(this.fieldMap))}getSymbolFields(){return this._symbolFields}_getSymbolPart(e,t){var r=this;return Object(a.a)((function*(){if(r._ongoingRequests.has(e))return r._ongoingRequests.get(e).then((e=>e.data));var i=r._refSymbolUrlTemplate.replace(/\{itemName\}/gi,e),a=Object(O.default)(i,Object(n.a)({responseType:"json",query:{f:"json"}},t));r._ongoingRequests.set(e,a);try{return(yield a).data}catch(o){return r._ongoingRequests.delete(e),Promise.reject(o)}}))()}_combineSymbolParts(e,t,r){if(!e||0===e.length)return null;var i=Object(n.a)({},e[0]);if(e.length>1)for(var a of(i.symbolLayers=[],e)){var o=a;i.symbolLayers.unshift(...o.symbolLayers)}return r&&(i.callout=S),{type:"CIMSymbolReference",symbol:i,primitiveOverrides:t}}_cimPartsToCIMSymbol(e,t,r,i){var n=this;return Object(a.a)((function*(){for(var a=new Array(e.length),o=0;o<e.length;o++)a[o]=n._getSymbolPart(e[o],i);var s=yield Promise.all(a);return new y.a({data:n._combineSymbolParts(s,t,r)})}))()}};Object(o.a)([Object(d.b)({type:Object,json:{read:{source:"configuration"},write:{target:"configuration"}}})],M.prototype,"config",void 0),Object(o.a)([Object(d.b)({type:Object,json:{write:!0}})],M.prototype,"fieldMap",void 0),Object(o.a)([Object(d.b)({type:String,json:{read:{source:"scalingExpressionInfo.expression"},write:!0}})],M.prototype,"scaleExpression",void 0),Object(o.a)([Object(p.a)("scaleExpression")],M.prototype,"writeData",null),Object(o.a)([Object(d.b)({type:String,json:{read:{source:"scalingExpressionInfo.title"},write:{target:"scalingExpressionInfo.title",overridePolicy(e){return{enabled:!!e&&!!this.scaleExpression}}}}})],M.prototype,"scaleExpressionTitle",void 0),Object(o.a)([Object(d.b)({type:String,json:{write:!0}})],M.prototype,"url",void 0),Object(o.a)([Object(p.a)("visualVariables")],M.prototype,"writeVisualVariables",null);var T=M=i=Object(o.a)([Object(h.a)("esri.renderers.DictionaryRenderer")],M);t.default=T},function(e,t,r){"use strict";var i,n=r(7),a=r(82),o=(r(80),r(92)),s=(r(81),r(88),r(85)),c=r(102),l=r(84),u=(r(83),r(86),r(87),r(118)),d=r(109),h=r(128),p=r(278),f=i=class extends h.a{constructor(e){super(e),this.blurRadius=10,this.colorStops=[new p.a({ratio:0,color:new d.a("rgba(255, 140, 0, 0)")}),new p.a({ratio:.75,color:new d.a("rgba(255, 140, 0, 1)")}),new p.a({ratio:.9,color:new d.a("rgba(255, 0,   0, 1)")})],this.field=null,this.fieldOffset=0,this.maxPixelIntensity=100,this.minPixelIntensity=0,this.type="heatmap"}collectRequiredFields(e,t){var r=this;return Object(n.a)((function*(){var i=r.field;i&&"string"==typeof i&&Object(u.f)(e,t,i)}))()}getAttributeHash(){return null}getMeshHash(){return"".concat(JSON.stringify(this.colorStops),".").concat(this.blurRadius,".").concat(this.field)}clone(){return new i({blurRadius:this.blurRadius,colorStops:Object(o.a)(this.colorStops),field:this.field,maxPixelIntensity:this.maxPixelIntensity,minPixelIntensity:this.minPixelIntensity})}};Object(a.a)([Object(s.b)({type:Number,json:{write:!0}})],f.prototype,"blurRadius",void 0),Object(a.a)([Object(s.b)({type:[p.a],json:{write:!0}})],f.prototype,"colorStops",void 0),Object(a.a)([Object(s.b)({type:String,json:{write:!0}})],f.prototype,"field",void 0),Object(a.a)([Object(s.b)({type:Number,json:{write:{overridePolicy:(e,t,r)=>({enabled:null==r})}}})],f.prototype,"fieldOffset",void 0),Object(a.a)([Object(s.b)({type:Number,json:{write:!0}})],f.prototype,"maxPixelIntensity",void 0),Object(a.a)([Object(s.b)({type:Number,json:{write:!0}})],f.prototype,"minPixelIntensity",void 0),Object(a.a)([Object(c.a)({heatmap:"heatmap"})],f.prototype,"type",void 0);var b=f=i=Object(a.a)([Object(l.a)("esri.renderers.HeatmapRenderer")],f);t.a=b},function(e,t,r){"use strict";var i,n=r(7),a=r(82),o=(r(80),r(92)),s=r(81),c=r(88),l=r(85),u=r(145),d=r(102),h=r(84),p=(r(83),r(86),r(87),r(118)),f=r(109),b=r(220),v=r(211),m=r(128),g=r(203),y=r(116),O=r(90),j=s.a.getLogger("esri.renderers.support.AttributeColorInfo"),_=i=class extends O.a{constructor(e){super(e),this.color=null,this.field=null,this.label=null,this.valueExpression=null,this.valueExpressionTitle=null}castField(e){return null==e?e:"function"==typeof e?(j.error(".field: field must be a string value"),null):Object(c.l)(e)}getAttributeHash(){return"".concat(this.field,"-").concat(this.valueExpression)}clone(){return new i({color:this.color&&this.color.clone(),field:this.field,label:this.label,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle})}};Object(a.a)([Object(l.b)({type:f.a,json:{type:[Number],write:!0}})],_.prototype,"color",void 0),Object(a.a)([Object(l.b)({type:String,json:{write:!0}})],_.prototype,"field",void 0),Object(a.a)([Object(y.a)("field")],_.prototype,"castField",null),Object(a.a)([Object(l.b)({type:String,json:{write:!0}})],_.prototype,"label",void 0),Object(a.a)([Object(l.b)({type:String,json:{write:!0}})],_.prototype,"valueExpression",void 0),Object(a.a)([Object(l.b)({type:String,json:{write:!0}})],_.prototype,"valueExpressionTitle",void 0);var w,x=_=i=Object(a.a)([Object(h.a)("esri.renderers.support.AttributeColorInfo")],_),S=w=class extends O.a{constructor(){super(...arguments),this.unit=null}clone(){return new w({unit:this.unit})}};Object(a.a)([Object(l.b)({type:String,json:{write:!0}})],S.prototype,"unit",void 0);var M,T=S=w=Object(a.a)([Object(h.a)("esri.renderers.support.DotDensityLegendOptions")],S),P=M=class extends(Object(g.a)(m.a)){constructor(e){super(e),this.attributes=null,this.backgroundColor=new f.a([0,0,0,0]),this.blendDots=!0,this.dotBlendingEnabled=!0,this.dotShape="square",this.dotSize=1,this.legendOptions=null,this.outline=new b.a,this.dotValue=null,this.referenceDotValue=null,this.referenceScale=null,this.seed=1,this.type="dot-density"}calculateDotValue(e){if(null==this.referenceScale)return this.dotValue;var t=e/this.referenceScale*this.dotValue;return t<1?1:t}getSymbol(){return new v.a({outline:this.outline})}getSymbolAsync(){var e=this;return Object(n.a)((function*(){return e.getSymbol()}))()}getSymbols(){return[this.getSymbol()]}getAttributeHash(){return this.attributes&&this.attributes.reduce(((e,t)=>e+t.getAttributeHash()),"")}getMeshHash(){return JSON.stringify(this.outline)}clone(){return new M({attributes:Object(o.a)(this.attributes),backgroundColor:Object(o.a)(this.backgroundColor),dotBlendingEnabled:Object(o.a)(this.dotBlendingEnabled),dotShape:Object(o.a)(this.dotShape),dotSize:Object(o.a)(this.dotSize),dotValue:Object(o.a)(this.dotValue),legendOptions:Object(o.a)(this.legendOptions),outline:Object(o.a)(this.outline),referenceScale:Object(o.a)(this.referenceScale),visualVariables:Object(o.a)(this.visualVariables),authoringInfo:this.authoringInfo&&this.authoringInfo.clone()})}getControllerHash(){return"".concat(this.attributes.map((e=>e.field||e.valueExpression||"")),"-").concat(this.outline&&JSON.stringify(this.outline.toJSON())||"")}collectRequiredFields(e,t){var r=this;return Object(n.a)((function*(){for(var i of(yield r.collectVVRequiredFields(e,t),r.attributes))i.valueExpression&&(yield Object(p.c)(e,t,i.valueExpression)),i.field&&e.add(i.field)}))()}};Object(a.a)([Object(l.b)({type:[x],json:{write:!0}})],P.prototype,"attributes",void 0),Object(a.a)([Object(l.b)({type:f.a,json:{write:!0}})],P.prototype,"backgroundColor",void 0),Object(a.a)([Object(l.b)({type:Boolean}),Object(u.a)("dotBlendingEnabled")],P.prototype,"blendDots",void 0),Object(a.a)([Object(l.b)({type:Boolean,json:{write:!0}})],P.prototype,"dotBlendingEnabled",void 0),Object(a.a)([Object(l.b)({type:String,json:{write:!1}})],P.prototype,"dotShape",void 0),Object(a.a)([Object(l.b)({type:Number,json:{write:!1}})],P.prototype,"dotSize",void 0),Object(a.a)([Object(l.b)({type:T,json:{write:!0}})],P.prototype,"legendOptions",void 0),Object(a.a)([Object(l.b)({type:b.a,json:{default:null,write:!0}})],P.prototype,"outline",void 0),Object(a.a)([Object(l.b)({type:Number,json:{write:!0}})],P.prototype,"dotValue",void 0),Object(a.a)([Object(l.b)({type:Number}),Object(u.a)("dotValue")],P.prototype,"referenceDotValue",void 0),Object(a.a)([Object(l.b)({type:Number,json:{write:!0}})],P.prototype,"referenceScale",void 0),Object(a.a)([Object(l.b)({type:Number,json:{write:!0}})],P.prototype,"seed",void 0),Object(a.a)([Object(d.a)({dotDensity:"dot-density"})],P.prototype,"type",void 0);var E=P=M=Object(a.a)([Object(h.a)("esri.renderers.DotDensityRenderer")],P);t.a=E},function(e,t,r){"use strict";function i(){return[0,0,0,0]}function n(e){return[e[0],e[1],e[2],e[3]]}function a(e,t,r,i){return[e,t,r,i]}function o(e){for(var t=[0,0,0,0],r=Math.min(4,e.length),i=0;i<r;++i)t[i]=e[i];return t}function s(e,t){return new Float64Array(e,t,4)}function c(){return[0,0,0,0]}function l(){return a(1,1,1,1)}function u(){return a(1,0,0,0)}function d(){return a(0,1,0,0)}function h(){return a(0,0,1,0)}function p(){return a(0,0,0,1)}r.d(t,"a",(function(){return b})),r.d(t,"b",(function(){return f})),r.d(t,"c",(function(){return i})),r.d(t,"d",(function(){return a})),r.d(t,"e",(function(){return s})),r.d(t,"f",(function(){return n})),r.d(t,"g",(function(){return o}));var f=[0,0,0,0],b=l(),v=u(),m=d(),g=h(),y=p();Object.freeze({__proto__:null,create:i,clone:n,fromValues:a,fromArray:o,createView:s,zeros:c,ones:l,unitX:u,unitY:d,unitZ:h,unitW:p,ZEROS:f,ONES:b,UNIT_X:v,UNIT_Y:m,UNIT_Z:g,UNIT_W:y})},function(e,t,r){"use strict";r.d(t,"a",(function(){return n})),r.d(t,"b",(function(){return a})),r.d(t,"c",(function(){return o})),r.d(t,"d",(function(){return s}));var i=r(94);function n(e,t,r){return Object(i.j)(e.map(((e,i)=>t.apply(r,[e,i]))))}function a(e,t,r){return Object(i.j)(e.map(((e,i)=>t.apply(r,[e,i])))).then((e=>e.map((e=>e.value))))}function o(e){return e.then((e=>({ok:!0,value:e}))).catch((e=>({ok:!1,error:e})))}function s(e){return e.then((e=>({ok:!0,value:e}))).catch((e=>(Object(i.t)(e),{ok:!1,error:e})))}},function(e,t,r){"use strict";function i(){return[0,0]}function n(e){return[e[0],e[1]]}function a(e,t){return[e,t]}function o(e){for(var t=[0,0],r=Math.min(2,e.length),i=0;i<r;++i)t[i]=e[i];return t}function s(e,t){return new Float64Array(e,t,2)}function c(){return[0,0]}function l(){return a(1,1)}function u(){return a(1,0)}function d(){return a(0,1)}r.d(t,"a",(function(){return i})),r.d(t,"b",(function(){return n})),r.d(t,"c",(function(){return s})),r.d(t,"d",(function(){return o})),r.d(t,"e",(function(){return a}));var h=[0,0],p=l(),f=u(),b=d();Object.freeze({__proto__:null,create:i,clone:n,fromValues:a,fromArray:o,createView:s,zeros:c,ones:l,unitX:u,unitY:d,ZEROS:h,ONES:p,UNIT_X:f,UNIT_Y:b})},,function(e,t,r){"use strict";r.d(t,"a",(function(){return o}));var i=r(82),n=(r(80),r(81),r(88),r(85)),a=r(84),o=(r(83),r(86),r(87),e=>{var t=class extends e{constructor(){super(...arguments),this.minScale=0,this.maxScale=0}get scaleRangeId(){return"".concat(this.minScale,",").concat(this.maxScale)}};return Object(i.a)([Object(n.b)({type:Number,nonNullable:!0,json:{write:!0}})],t.prototype,"minScale",void 0),Object(i.a)([Object(n.b)({type:Number,nonNullable:!0,json:{write:!0}})],t.prototype,"maxScale",void 0),Object(i.a)([Object(n.b)({readOnly:!0})],t.prototype,"scaleRangeId",null),t=Object(i.a)([Object(a.a)("esri.layers.mixins.ScaleRangeLayer")],t)})},function(e,t,r){"use strict";var i=r(91),n=r(89),a=r(110),o=r(364);class s{constructor(e,t,r=null){this._context=null,this._glName=null,this._descriptor=void 0,this._samplingModeDirty=!1,this._wrapModeDirty=!1,e.instanceCounter.increment(0,this),this._context=e,this._descriptor=Object(i.a)({target:3553,samplingMode:9729,wrapMode:10497,flipped:!1,hasMipmap:!1,isOpaque:!1,unpackAlignment:4,preMultiplyAlpha:!1},t),this.setData(r)}get glName(){return this._glName}get descriptor(){return this._descriptor}dispose(){if(this._context&&this._context.gl){if(this._glName){var e=this._context.gl;this._context.unbindTextureAllUnits(this),e.deleteTexture(this._glName),this._glName=null}this._context.instanceCounter.decrement(0,this),this._context=null}}release(){this.dispose()}resize(e,t){var r=this._descriptor;r.width===e&&r.height===t||(r.width=e,r.height=t,this.setData(null))}setData(e){if(this._context&&this._context.gl){var t=this._context.gl;this._glName||(this._glName=t.createTexture()),void 0===e&&(e=null),null===e&&(this._descriptor.width=this._descriptor.width||4,this._descriptor.height=this._descriptor.height||4);var r=this._context.getBoundTexture(0);this._context.bindTexture(this,0);var i=this._descriptor;s._validateTexture(this._context,i),t.pixelStorei(t.UNPACK_ALIGNMENT,i.unpackAlignment),t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,i.flipped?1:0),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,i.preMultiplyAlpha?1:0);var a=i.pixelFormat,o=i.internalFormat?i.internalFormat:a;if(e instanceof ImageData||e instanceof HTMLImageElement||e instanceof HTMLCanvasElement||e instanceof HTMLVideoElement){var c=e.width,l=e.height;e instanceof HTMLVideoElement&&(c=e.videoWidth,l=e.videoHeight),i.width&&i.height&&console.assert(c===i.width&&l===i.height),t.texImage2D(t.TEXTURE_2D,0,o,a,i.dataType,e),i.hasMipmap&&this.generateMipmap(),void 0===i.width&&(i.width=c),void 0===i.height&&(i.height=l)}else{null!=i.width&&null!=i.height||console.error("Width and height must be specified!"),t.DEPTH24_STENCIL8&&o===t.DEPTH_STENCIL&&(o=t.DEPTH24_STENCIL8);var u=i.width,d=i.height;if(function(e){return Object(n.k)(e)&&"type"in e&&"compressed"===e.type}(e)){var h=Math.round(Math.log(Math.max(u,d))/Math.LN2)+1;i.hasMipmap=i.hasMipmap&&h===e.levels.length;for(var p=0;;++p){var f=e.levels[Math.min(p,e.levels.length-1)];if(t.compressedTexImage2D(t.TEXTURE_2D,p,o,u,d,0,f),1===u&&1===d||!i.hasMipmap)break;u=Math.max(1,u>>1),d=Math.max(1,d>>1)}}else if(Object(n.k)(e))t.texImage2D(t.TEXTURE_2D,0,o,u,d,0,a,i.dataType,e),i.hasMipmap&&this.generateMipmap();else for(var b=0;t.texImage2D(t.TEXTURE_2D,b,o,u,d,0,a,i.dataType,null),(1!==u||1!==d)&&i.hasMipmap;++b)u=Math.max(1,u>>1),d=Math.max(1,d>>1)}s._applySamplingMode(t,this._descriptor),s._applyWrapMode(t,this._descriptor),s._applyAnisotropicFilteringParameters(this._context,this._descriptor),r&&this._context.bindTexture(r,0)}}updateData(e,t,r,i,n,a){a||console.error("An attempt to use uninitialized data!"),this._glName||console.error("An attempt to update uninitialized texture!");var o=this._context.gl,s=this._descriptor,c=this._context.getBoundTexture(0);this._context.bindTexture(this,0),(t<0||r<0||i>s.width||n>s.height||t+i>s.width||r+n>s.height)&&console.error("An attempt to update out of bounds of the texture!"),o.pixelStorei(o.UNPACK_ALIGNMENT,s.unpackAlignment),o.pixelStorei(o.UNPACK_FLIP_Y_WEBGL,s.flipped?1:0),o.pixelStorei(o.UNPACK_PREMULTIPLY_ALPHA_WEBGL,s.preMultiplyAlpha?1:0),a instanceof ImageData||a instanceof HTMLImageElement||a instanceof HTMLCanvasElement||a instanceof HTMLVideoElement?o.texSubImage2D(o.TEXTURE_2D,e,t,r,s.pixelFormat,s.dataType,a):o.texSubImage2D(o.TEXTURE_2D,e,t,r,i,n,s.pixelFormat,s.dataType,a),this._context.bindTexture(c,0)}generateMipmap(){var e=this._descriptor;e.hasMipmap||(e.hasMipmap=!0,this._samplingModeDirty=!0,s._validateTexture(this._context,e)),9729===e.samplingMode?(this._samplingModeDirty=!0,e.samplingMode=9985):9728===e.samplingMode&&(this._samplingModeDirty=!0,e.samplingMode=9984);var t=this._context.getBoundTexture(0);this._context.bindTexture(this,0);var r=this._context.gl;r.generateMipmap(r.TEXTURE_2D),this._context.bindTexture(t,0)}setSamplingMode(e){e!==this._descriptor.samplingMode&&(this._descriptor.samplingMode=e,s._validateTexture(this._context,this._descriptor),this._samplingModeDirty=!0)}setWrapMode(e){e!==this._descriptor.wrapMode&&(this._descriptor.wrapMode=e,s._validateTexture(this._context,this._descriptor),this._wrapModeDirty=!0)}applyChanges(){var e=this._context.gl,t=this._descriptor;this._samplingModeDirty&&(s._applySamplingMode(e,t),this._samplingModeDirty=!1),this._wrapModeDirty&&(s._applyWrapMode(e,t),this._wrapModeDirty=!1)}static _validateTexture(e,t){(t.width<0||t.height<0)&&console.error("Negative dimension parameters are not allowed!");var r=Object(a.k)(t.width)&&Object(a.k)(t.height);Object(o.a)(e.gl)||r||("number"==typeof t.wrapMode?33071!==t.wrapMode&&console.error("Non-power-of-two textures must have a wrap mode of CLAMP_TO_EDGE!"):33071===t.wrapMode.s&&33071===t.wrapMode.t||console.error("Non-power-of-two textures must have a wrap mode of CLAMP_TO_EDGE!"),t.hasMipmap&&console.error("Mipmapping requires power-of-two textures!"))}static _applySamplingMode(e,t){var r=t.samplingMode,i=t.samplingMode;9985===r||9987===r?(r=9729,t.hasMipmap||(i=9729)):9984!==r&&9986!==r||(r=9728,t.hasMipmap||(i=9728)),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,r),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,i)}static _applyWrapMode(e,t){"number"==typeof t.wrapMode?(e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,t.wrapMode),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,t.wrapMode)):(e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,t.wrapMode.s),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,t.wrapMode.t))}static _applyAnisotropicFilteringParameters(e,t){if(null!=t.maxAnisotropy){var r=e.capabilities.textureFilterAnisotropic;if(r){var i=e.gl;i.texParameterf(i.TEXTURE_2D,r.TEXTURE_MAX_ANISOTROPY,t.maxAnisotropy)}}}}t.a=s},function(e,t,r){"use strict";r.d(t,"a",(function(){return h})),r.d(t,"b",(function(){return f})),r.d(t,"c",(function(){return d}));var i=r(7),n=r(93),a=r(94),o=r(148),s=/^([a-z]{2})(?:[-_]([A-Za-z]{2}))?$/,c=new Set(["ar","bs","ca","cs","da","de","el","en","es","et","fi","fr","he","hi","hr","hu","id","it","ja","ko","lt","lv","nb","nl","pl","pt-BR","pt-PT","ro","ru","sk","sl","sr","sv","th","tr","uk","vi","zh-CN","zh-HK","zh-TW"]),l=[],u=new Map;function d(e){if(!l.includes(e)){for(var t of u.keys())m(e.pattern,t)&&u.delete(t);l.unshift(e)}}function h(e){return p.apply(this,arguments)}function p(){return(p=Object(i.a)((function*(e){var t=Object(o.b)();u.has(e)||u.set(e,b(e,t));var r=u.get(e);return yield g.add(r),r}))).apply(this,arguments)}function f(e){if(!s.test(e))return null;var[,t,r]=s.exec(e),i=t+(r?"-"+r.toUpperCase():"");return c.has(i)?i:c.has(t)?t:null}function b(e,t){return v.apply(this,arguments)}function v(){return(v=Object(i.a)((function*(e,t){var r=[];for(var i of l)if(m(i.pattern,e))try{return yield i.fetchMessageBundle(e,t)}catch(s){r.push(s)}if(r.length)throw new n.a("intl:message-bundle-error",'Errors occurred while loading "'.concat(e,'"'),{errors:r});throw new n.a("intl:no-message-bundle-loader",'No loader found for message bundle "'.concat(e,'"'))}))).apply(this,arguments)}function m(e,t){return"string"==typeof e?t.startsWith(e):e.test(t)}Object(o.a)((()=>{u.clear()}));var g=new class{constructor(){this._numLoading=0}waitForAll(){var e=this;return Object(i.a)((function*(){e._dfd&&(yield e._dfd.promise)}))()}add(e){return this._increase(),e.then((()=>this._decrease()),(()=>this._decrease())),this.waitForAll()}_increase(){this._numLoading++,this._dfd||(this._dfd=Object(a.f)())}_decrease(){this._numLoading=Math.max(this._numLoading-1,0),this._dfd&&0===this._numLoading&&(this._dfd.resolve(),this._dfd=null)}}},function(e,t,r){"use strict";function i(e){return"date"===e.type||"esriFieldTypeDate"===e.type}function n(e){return e.toLowerCase().trim()}t.a=class{constructor(e){if(this.fields=e,this._fieldsMap=new Map,this._dateFieldsSet=new Set,this.dateFields=[],e){var t=[];for(var r of e){var a=r&&r.name;if(a){var o=n(a);this._fieldsMap.set(a,r),this._fieldsMap.set(o,r),t.push(o),i(r)&&(this.dateFields.push(r),this._dateFieldsSet.add(r))}}t.sort(),this.uid=t.join(",")}}destroy(){this._fieldsMap.clear()}has(e){return null!=this.get(e)}get(e){return null!=e?this._fieldsMap.get(e)||this._fieldsMap.get(n(e)):void 0}isDateField(e){return this._dateFieldsSet.has(this.get(e))}normalizeFieldName(e){var t=this.get(e);if(t)return t.name}}},function(e,t,r){"use strict";r.d(t,"a",(function(){return o})),r.d(t,"b",(function(){return n})),r.d(t,"c",(function(){return a}));var i=r(133),n=Object(i.b)((function(e){var t;void 0!==(t=["precision","highp","mediump","lowp","attribute","const","uniform","varying","break","continue","do","for","while","if","else","in","out","inout","float","int","void","bool","true","false","discard","return","mat2","mat3","mat4","vec2","vec3","vec4","ivec2","ivec3","ivec4","bvec2","bvec3","bvec4","sampler1D","sampler2D","sampler3D","samplerCube","sampler1DShadow","sampler2DShadow","struct","asm","class","union","enum","typedef","template","this","packed","goto","switch","default","inline","noinline","volatile","public","static","extern","external","interface","long","short","double","half","fixed","unsigned","input","output","hvec2","hvec3","hvec4","dvec2","dvec3","dvec4","fvec2","fvec3","fvec4","sampler2DRect","sampler3DRect","sampler2DRectShadow","sizeof","cast","namespace","using"])&&(e.exports=t)})),a=Object(i.b)((function(e){var t;void 0!==(t=["<<=",">>=","++","--","<<",">>","<=",">=","==","!=","&&","||","+=","-=","*=","/=","%=","&=","^^","^=","|=","(",")","[","]",".","!","~","*","/","%","+","-","<",">","&","^","|","?",":","=",",",";","{","}"])&&(e.exports=t)})),o=Object(i.b)((function(e){var t;void 0!==(t=["abs","acos","all","any","asin","atan","ceil","clamp","cos","cross","dFdx","dFdy","degrees","distance","dot","equal","exp","exp2","faceforward","floor","fract","gl_BackColor","gl_BackLightModelProduct","gl_BackLightProduct","gl_BackMaterial","gl_BackSecondaryColor","gl_ClipPlane","gl_ClipVertex","gl_Color","gl_DepthRange","gl_DepthRangeParameters","gl_EyePlaneQ","gl_EyePlaneR","gl_EyePlaneS","gl_EyePlaneT","gl_Fog","gl_FogCoord","gl_FogFragCoord","gl_FogParameters","gl_FragColor","gl_FragCoord","gl_FragData","gl_FragDepth","gl_FragDepthEXT","gl_FrontColor","gl_FrontFacing","gl_FrontLightModelProduct","gl_FrontLightProduct","gl_FrontMaterial","gl_FrontSecondaryColor","gl_LightModel","gl_LightModelParameters","gl_LightModelProducts","gl_LightProducts","gl_LightSource","gl_LightSourceParameters","gl_MaterialParameters","gl_MaxClipPlanes","gl_MaxCombinedTextureImageUnits","gl_MaxDrawBuffers","gl_MaxFragmentUniformComponents","gl_MaxLights","gl_MaxTextureCoords","gl_MaxTextureImageUnits","gl_MaxTextureUnits","gl_MaxVaryingFloats","gl_MaxVertexAttribs","gl_MaxVertexTextureImageUnits","gl_MaxVertexUniformComponents","gl_ModelViewMatrix","gl_ModelViewMatrixInverse","gl_ModelViewMatrixInverseTranspose","gl_ModelViewMatrixTranspose","gl_ModelViewProjectionMatrix","gl_ModelViewProjectionMatrixInverse","gl_ModelViewProjectionMatrixInverseTranspose","gl_ModelViewProjectionMatrixTranspose","gl_MultiTexCoord0","gl_MultiTexCoord1","gl_MultiTexCoord2","gl_MultiTexCoord3","gl_MultiTexCoord4","gl_MultiTexCoord5","gl_MultiTexCoord6","gl_MultiTexCoord7","gl_Normal","gl_NormalMatrix","gl_NormalScale","gl_ObjectPlaneQ","gl_ObjectPlaneR","gl_ObjectPlaneS","gl_ObjectPlaneT","gl_Point","gl_PointCoord","gl_PointParameters","gl_PointSize","gl_Position","gl_ProjectionMatrix","gl_ProjectionMatrixInverse","gl_ProjectionMatrixInverseTranspose","gl_ProjectionMatrixTranspose","gl_SecondaryColor","gl_TexCoord","gl_TextureEnvColor","gl_TextureMatrix","gl_TextureMatrixInverse","gl_TextureMatrixInverseTranspose","gl_TextureMatrixTranspose","gl_Vertex","greaterThan","greaterThanEqual","inversesqrt","length","lessThan","lessThanEqual","log","log2","matrixCompMult","max","min","mix","mod","normalize","not","notEqual","pow","radians","reflect","refract","sign","sin","smoothstep","sqrt","step","tan","texture2D","texture2DLod","texture2DProj","texture2DProjLod","textureCube","textureCubeLod","texture2DLodEXT","texture2DProjLodEXT","textureCubeLodEXT","texture2DGradEXT","texture2DProjGradEXT","textureCubeGradEXT"])&&(e.exports=t)}))},function(e,t,r){"use strict";r.d(t,"a",(function(){return h})),r.d(t,"b",(function(){return l})),r.d(t,"c",(function(){return a})),r.d(t,"d",(function(){return d})),r.d(t,"e",(function(){return f})),r.d(t,"f",(function(){return o})),r.d(t,"g",(function(){return s})),r.d(t,"h",(function(){return u})),r.d(t,"i",(function(){return g})),r.d(t,"j",(function(){return b})),r.d(t,"k",(function(){return m}));var i=r(89),n=r(526);function a(e,t,r){if(Object(i.j)(e)&&Object(i.j)(t))return!0;if(Object(i.j)(e)||Object(i.j)(t)||e.length!==t.length)return!1;if(r){for(var n=0;n<e.length;n++)if(!r(e[n],t[n]))return!1}else for(var a=0;a<e.length;a++)if(e[a]!==t[a])return!1;return!0}function o(e,t,r){return e&&t?r?e.filter((function(e){return t.findIndex((function(t){return r(e,t)}))>-1})):e.filter((function(e){return t.indexOf(e)>-1})):[]}function s(e){return e&&"number"==typeof e.length}var c=!!Array.prototype.fill;function l(e,t){if(c)return new Array(e).fill(t);for(var r=new Array(e),i=0;i<e;i++)r[i]=t;return r}function u(e,t){void 0===t&&(t=e,e=0);for(var r=new Array(t-e),i=e;i<t;i++)r[i-e]=i;return r}function d(e){return e.reduce(((e,t)=>e.concat(t||[])),[])}class h{constructor(){this.last=0}}var p=new h;function f(e,t,r,i){i=i||p;for(var n=Math.max(0,i.last-10),a=n;a<r;++a)if(e[a]===t)return i.last=a,a;for(var o=Math.min(n,r),s=0;s<o;++s)if(e[s]===t)return i.last=s,s;return-1}function b(e,t,r,i){var n=null==r?e.length:r,a=f(e,t,n,i);if(-1!==a)return e[a]=e[n-1],null==r&&e.pop(),t}var v=new Set;function m(e,t,r=e.length,i=t.length,n,a){if(0===i||0===r)return r;v.clear();for(var o=0;o<i;++o)v.add(t[o]);n=n||p;for(var s=Math.max(0,n.last-10),c=s;c<r;++c)if(v.has(e[c])&&(a&&a.push(e[c]),v.delete(e[c]),e[c]=e[r-1],--r,--c,0===v.size||0===r))return v.clear(),r;for(var l=0;l<s;++l)if(v.has(e[l])&&(a&&a.push(e[l]),v.delete(e[l]),e[l]=e[r-1],--r,--l,0===v.size||0===r))return v.clear(),r;return v.clear(),r}new n.a;function g(e,t){var r=e.indexOf(t);return-1!==r?(e.splice(r,1),t):null}},function(e,t,r){"use strict";function i(e){return void 0!==e.xmin&&void 0!==e.ymin&&void 0!==e.xmax&&void 0!==e.ymax}function n(e){return void 0!==e.points}function a(e){return void 0!==e.x&&void 0!==e.y}function o(e){return void 0!==e.paths}function s(e){return void 0!==e.rings}function c(e){return(t,r)=>null==t?r:null==r?t:e(t,r)}r.d(t,"a",(function(){return d})),r.d(t,"b",(function(){return h})),r.d(t,"c",(function(){return b})),r.d(t,"d",(function(){return p}));var l=c(Math.min),u=c(Math.max);function d(e,t){return o(t)?p(e,t.paths,!1,!1):s(t)?p(e,t.rings,!1,!1):n(t)?b(e,t.points,!1,!1,!1,!1):i(t)?f(e,t):(a(t)&&(e[0]=t.x,e[1]=t.y,e[2]=t.x,e[3]=t.y),e)}function h(e,t){return o(t)?p(e,t.paths,!0,!1):s(t)?p(e,t.rings,!0,!1):n(t)?b(e,t.points,!0,!1,!0,!1):i(t)?f(e,t,!0,!1,!0,!1):(a(t)&&(e[0]=t.x,e[1]=t.y,e[2]=t.z,e[3]=t.x,e[4]=t.y,e[5]=t.z),e)}function p(e,t,r,i){var n=r?3:2;if(!t.length||!t[0].length)return null;for(var a,o,s,c,[d,h]=t[0][0],[p,f]=t[0][0],b=0;b<t.length;b++)for(var v=t[b],m=0;m<v.length;m++){var g=v[m],[y,O]=g;if(d=l(d,y),h=l(h,O),p=u(p,y),f=u(f,O),r&&g.length>2){var j=g[2];a=l(a,j),o=u(o,j)}if(i&&g.length>n){var _=g[n];s=l(a,_),c=u(o,_)}}return r?i?(e[0]=d,e[1]=h,e[2]=a,e[3]=s,e[4]=p,e[5]=f,e[6]=o,e[7]=c,e.length=8,e):(e[0]=d,e[1]=h,e[2]=a,e[3]=p,e[4]=f,e[5]=o,e.length=6,e):i?(e[0]=d,e[1]=h,e[2]=s,e[3]=p,e[4]=f,e[5]=c,e.length=6,e):(e[0]=d,e[1]=h,e[2]=p,e[3]=f,e.length=4,e)}function f(e,t,r,i,n,a){var o=t.xmin,s=t.xmax,c=t.ymin,l=t.ymax,u=t.zmin,d=t.zmax,h=t.mmin,p=t.mmax;return n?(u=u||0,d=d||0,a?(h=h||0,p=p||0,e[0]=o,e[1]=c,e[2]=u,e[3]=h,e[4]=s,e[5]=l,e[6]=d,e[7]=p,e):(e[0]=o,e[1]=c,e[2]=u,e[3]=s,e[4]=l,e[5]=d,e)):a?(h=h||0,p=p||0,e[0]=o,e[1]=c,e[2]=h,e[3]=s,e[4]=l,e[5]=p,e):(e[0]=o,e[1]=c,e[2]=s,e[3]=l,e)}function b(e,t,r,i,n,a){var o=r?3:2,s=i&&a,c=r&&n;if(!t.length||!t[0].length)return null;for(var d,h,p,f,[b,v]=t[0],[m,g]=t[0],y=0;y<t.length;y++){var O=t[y],[j,_]=O;if(b=l(b,j),v=l(v,_),m=u(m,j),g=u(g,_),c&&O.length>2){var w=O[2];d=l(d,w),h=u(h,w)}if(s&&O.length>o){var x=O[o];p=l(d,x),f=u(h,x)}}return n?(d=d||0,h=h||0,a?(p=p||0,f=f||0,e[0]=b,e[1]=v,e[2]=d,e[3]=p,e[4]=m,e[5]=g,e[6]=h,e[7]=f,e):(e[0]=b,e[1]=v,e[2]=d,e[3]=m,e[4]=g,e[5]=h,e)):a?(p=p||0,f=f||0,e[0]=b,e[1]=v,e[2]=p,e[3]=m,e[4]=g,e[5]=f,e):(e[0]=b,e[1]=v,e[2]=m,e[3]=g,e)}},,function(e,t,r){"use strict";r.d(t,"a",(function(){return o})),r.d(t,"b",(function(){return c}));var i=r(89),n=r(112),a=r(117);function o(e,t,r){if(Object(i.j)(t)||Object(i.j)(r)||r.vcsWkid||Object(n.c)(t,r))return null;var o=Object(a.g)(t)/Object(a.g)(r);if(1===o)return null;switch(e){case"point":case"esriGeometryPoint":return e=>function(e,t){e&&null!=e.z&&(e.z*=t)}(e,o);case"polyline":case"esriGeometryPolyline":return e=>function(e,t){if(e)for(var r of e.paths)for(var i of r)i.length>2&&(i[2]*=t)}(e,o);case"polygon":case"esriGeometryPolygon":return e=>function(e,t){if(e)for(var r of e.rings)for(var i of r)i.length>2&&(i[2]*=t)}(e,o);case"multipoint":case"esriGeometryMultipoint":return e=>function(e,t){if(e)for(var r of e.points)r.length>2&&(r[2]*=t)}(e,o);default:return null}}function s(e,t,r){if(null==e.hasM||e.hasZ)for(var i of t)for(var n of i)n.length>2&&(n[2]*=r)}function c(e,t,r){if((e||t)&&r){var i=Object(a.g)(r);l(e,r,i),l(t,r,i)}}function l(e,t,r){if(e)for(var i of e)u(i.geometry,t,r)}function u(e,t,r){if(e&&e.spatialReference&&!Object(n.c)(e.spatialReference,t)){var i=Object(a.g)(e.spatialReference)/r;if(1!==i)if("x"in e)null!=e.z&&(e.z*=i);else if("rings"in e)s(e,e.rings,i);else if("paths"in e)s(e,e.paths,i);else if("points"in e&&(null==e.hasM||e.hasZ))for(var o of e.points)o.length>2&&(o[2]*=i)}}},function(e,t,r){"use strict";r.d(t,"a",(function(){return n})),r.d(t,"b",(function(){return a}));var i=r(176);class n{constructor(e,t,r){this._namespace=e,this._storage=t,this._removeFunc=!1,this._hit=0,this._miss=0,this._storage.register(this),this._namespace+=":",r&&(this._storage.registerRemoveFunc(this._namespace,r),this._removeFunc=!0)}destroy(){this._storage.clear(this._namespace),this._removeFunc&&this._storage.deregisterRemoveFunc(this._namespace),this._storage.deregister(this),this._storage=null}get namespace(){return this._namespace.slice(0,-1)}get hitRate(){return this._hit/(this._hit+this._miss)}get size(){return this._storage.size}get maxSize(){return this._storage.maxSize}resetHitRate(){this._hit=this._miss=0}put(e,t,r,i=0){this._storage.put(this._namespace+e,t,r,i)}get(e){var t=this._storage.get(this._namespace+e);return void 0===t?++this._miss:++this._hit,t}pop(e){var t=this._storage.pop(this._namespace+e);return void 0===t?++this._miss:++this._hit,t}updateSize(e,t,r){this._storage.updateSize(this._namespace+e,t,r)}clear(){this._storage.clear(this._namespace)}clearAll(){this._storage.clearAll()}getStats(){return this._storage.getStats()}resetStats(){this._storage.resetStats()}}class a{constructor(e=10485760){this._maxSize=e,this._db=new Map,this._size=0,this._hit=0,this._miss=0,this._removeFuncs=new i.a,this._users=new i.a}destroy(){this.clearAll(),this._removeFuncs.clear(),this._users.clear(),this._db=null}register(e){this._users.push(e)}deregister(e){this._users.removeUnordered(e)}registerRemoveFunc(e,t){this._removeFuncs.push([e,t])}deregisterRemoveFunc(e){this._removeFuncs.filterInPlace((t=>t[0]!==e))}get size(){return this._size}get maxSize(){return this._maxSize}set maxSize(e){this._maxSize=Math.max(e,0),this._checkSizeLimit()}put(e,t,r,i){var n=this._db.get(e);if(n&&(this._size-=n.size,this._db.delete(e),n.entry!==t&&this._notifyRemoved(e,n.entry)),r>this._maxSize)this._notifyRemoved(e,t);else if(void 0!==t)if(!r||r<0)console.warn("Refusing to cache entry with invalid size "+r);else{var a=1+Math.max(i,-3)- -3;this._db.set(e,{entry:t,size:r,lifetime:a,lives:a}),this._size+=r,this._checkSizeLimit()}else console.warn("Refusing to cache undefined entry ")}updateSize(e,t,r){var i=this._db.get(e);if(i&&i.entry===t){if(this._size-=i.size,r>this._maxSize)return this._db.delete(e),void this._notifyRemoved(e,t);i.size=r,this._size+=r,this._checkSizeLimit()}}pop(e){var t=this._db.get(e);if(t)return this._size-=t.size,this._db.delete(e),++this._hit,t.entry;++this._miss}get(e){var t=this._db.get(e);if(void 0!==t)return this._db.delete(e),t.lives=t.lifetime,this._db.set(e,t),++this._hit,t.entry;++this._miss}getStats(){var e={Size:Math.round(this._size/1048576)+"/"+Math.round(this._maxSize/1048576)+"MB","Hit rate":Math.round(100*this._getHitRate())+"%",Entries:this._db.size.toString()},t={},r=new Array;this._db.forEach(((e,i)=>{var n=e.lifetime;r[n]=(r[n]||0)+e.size,this._users.forAll((r=>{var n=r.namespace;if(i.startsWith(n)){var a=t[n]||0;t[n]=a+e.size}}))}));var i={};this._users.forAll((e=>{var r=e.namespace;if(!isNaN(e.hitRate)&&e.hitRate>0){var n=t[r]||0;t[r]=n,i[r]=Math.round(100*e.hitRate)+"%"}else i[r]="0%"}));var n=Object.keys(t);n.forEach((e=>t[e]=t[e]/this._size*100)),n.sort(((e,r)=>t[r]-t[e])),n.forEach((r=>e[r]=Math.round(t[r])+"% / "+i[r]));for(var a=r.length-1;a>=0;--a){var o=r[a];o&&(e["Priority "+(a+-3-1)]=Math.round(o/this.size*100)+"%")}return e}resetStats(){this._hit=this._miss=0,this._users.forAll((e=>e.resetHitRate()))}clear(e){this._db.forEach(((t,r)=>{r.startsWith(e)&&(this._size-=t.size,this._db.delete(r),this._notifyRemoved(r,t.entry))}))}clearAll(){this._db.forEach(((e,t)=>this._notifyRemoved(t,e.entry))),this._size=0,this._db.clear()}_getHitRate(){return this._hit/(this._hit+this._miss)}_notifyRemoved(e,t){this._removeFuncs.forAll((r=>{e.startsWith(r[0])&&r[1](t)}))}_checkSizeLimit(){if(!(this._size<=this._maxSize))for(var[e,t]of this._db)if(this._db.delete(e),t.lives<=1?(this._size-=t.size,this._notifyRemoved(e,t.entry)):(--t.lives,this._db.set(e,t)),this._size<=.9*this.maxSize)return}}},function(e,t,r){"use strict";r.d(t,"a",(function(){return u})),r.d(t,"b",(function(){return d}));var i=r(128),n=r(229),a=r(231),o=r(197),s=r(199),c=r(198),l=r(194),u={key:"type",base:i.a,typeMap:{heatmap:c.a,simple:l.a,"unique-value":a.a,"class-breaks":n.a,"dot-density":s.a,dictionary:o.default},errorContext:"renderer"},d={key:"type",base:i.a,typeMap:{simple:l.a,"unique-value":a.a,"class-breaks":n.a},errorContext:"renderer"}},function(e,t,r){"use strict";r.d(t,"a",(function(){return o}));var i=r(82),n=(r(80),r(81),r(88),r(85)),a=r(84),o=(r(83),r(86),r(87),e=>{var t=class extends e{constructor(){super(...arguments),this.blendMode="normal",this.effect=null}};return Object(i.a)([Object(n.b)({type:["average","color-burn","color-dodge","color","darken","destination-atop","destination-in","destination-out","destination-over","difference","exclusion","hard-light","hue","invert","lighten","lighter","luminosity","minus","multiply","normal","overlay","plus","reflect","saturation","screen","soft-light","source-atop","source-in","source-out","vivid-light","xor"],nonNullable:!0,json:{read:!1,write:!1,origins:{"web-map":{default:"normal",read:!0,write:!0}}}})],t.prototype,"blendMode",void 0),Object(i.a)([Object(n.b)()],t.prototype,"effect",void 0),t=Object(i.a)([Object(a.a)("esri.layers.mixins.BlendLayer")],t)})},function(e,t,r){"use strict";var i=r(82),n=(r(80),r(81),r(88),r(85)),a=r(84),o=(r(83),r(86),r(87),r(90)),s=class extends o.a{constructor(){super(...arguments),this.type=null}};Object(i.a)([Object(n.b)({type:["selection","cluster"],readOnly:!0,json:{read:!1,write:!0}})],s.prototype,"type",void 0);var c=s=Object(i.a)([Object(a.a)("esri.layers.support.FeatureReduction")],s);t.a=c},function(e,t,r){"use strict";r.d(t,"a",(function(){return s})),r.d(t,"b",(function(){return n})),r.d(t,"c",(function(){return a})),r.d(t,"d",(function(){return o}));var i=r(89);function n(e){return a((()=>e.forEach((e=>Object(i.k)(e)&&e.remove()))))}function a(e){return{remove:()=>{e&&(e(),e=void 0)}}}function o(e){return a((()=>{var t=e();Object(i.k)(t)&&t.remove()}))}function s(e){return a(Object(i.k)(e)?()=>e.destroy():void 0)}},,,,function(e,t,r){"use strict";class i{constructor(e,t,r,i=1,n=0){if(this.ctor=e,this.acquireFunction=t,this.releaseFunction=r,this.allocationSize=i,this._pool=new Array(n),this._initialSize=n,this.ctor)for(var a=0;a<n;a++)this._pool[a]=new this.ctor;this.allocationSize=Math.max(i,1)}destroy(){this.prune(0)}acquire(...e){var t;if(i.test.disabled)t=new this.ctor;else{if(0===this._pool.length)for(var r=this.allocationSize,n=0;n<r;n++)this._pool[n]=new this.ctor;t=this._pool.pop()}return this.acquireFunction?this.acquireFunction(t,...e):function(e){return e&&e.acquire&&"function"==typeof e.acquire}(t)&&t.acquire(...e),t}release(e){e&&!i.test.disabled&&(this.releaseFunction?this.releaseFunction(e):function(e){return e&&e.release&&"function"==typeof e.release}(e)&&e.release(),this._pool.push(e))}prune(e=this._initialSize){if(!(e>=this._pool.length)){for(var t=e;t<this._pool.length;++t){var r=this._pool[t];this._dispose(r)}this._pool.length=e}}_dispose(e){e.dispose&&"function"==typeof e.dispose&&e.dispose()}}i.test={disabled:!1},t.a=i},function(e,t,r){"use strict";var i,n=r(82),a=(r(80),r(81),r(88),r(85)),o=r(84),s=(r(83),r(86),r(87),r(90)),c=r(140),l=i=class extends s.a{constructor(e){super(e),this.value=0,this.unit="milliseconds"}toMilliseconds(){return this.value*c.b[this.unit]}clone(){return new i({value:this.value,unit:this.unit})}};Object(n.a)([Object(a.b)({type:Number,json:{write:!0},nonNullable:!0})],l.prototype,"value",void 0),Object(n.a)([Object(a.b)({type:c.d.apiValues,json:{type:c.d.jsonValues,read:c.d.read,write:c.d.write},nonNullable:!0})],l.prototype,"unit",void 0);var u=l=i=Object(n.a)([Object(o.a)("esri.TimeInterval")],l);t.a=u},function(e,t,r){"use strict";r.d(t,"a",(function(){return ue})),r.d(t,"b",(function(){return N})),r.d(t,"c",(function(){return ie})),r.d(t,"d",(function(){return re})),r.d(t,"e",(function(){return D})),r.d(t,"f",(function(){return V})),r.d(t,"g",(function(){return A})),r.d(t,"h",(function(){return I})),r.d(t,"i",(function(){return k})),r.d(t,"j",(function(){return F})),r.d(t,"k",(function(){return $})),r.d(t,"l",(function(){return ee})),r.d(t,"m",(function(){return R})),r.d(t,"n",(function(){return G})),r.d(t,"o",(function(){return Z})),r.d(t,"p",(function(){return Q})),r.d(t,"q",(function(){return B})),r.d(t,"r",(function(){return Y})),r.d(t,"s",(function(){return K})),r.d(t,"t",(function(){return be}));var i=r(7),n=r(89),a=r(93),o=r(94),s=r(112),c=r(139),l=r(113),u=r(103),d=r(225),h=r(130),p=r(141),f=r(110),b=r(104),v=r(111),m=r(173),g=r(117),y=r(157),O=r(626),j=(r(125),r(529)),_=0;class w{constructor(e=null){this.uid=_++,e?(this._wkt=void 0!==e.wkt?e.wkt:null,this._wkid=void 0!==e.wkid?e.wkid:-1,this._isInverse=void 0!==e.isInverse&&!0===e.isInverse):(this._wkt=null,this._wkid=-1,this._isInverse=!1)}static fromGE(e){var t=new w;return t._wkt=e.wkt,t._wkid=e.wkid,t._isInverse=e.isInverse,t}get wkt(){return this._wkt}set wkt(e){this._wkt=e,this.uid=_++}get wkid(){return this._wkid}set wkid(e){this._wkid=e,this.uid=_++}get isInverse(){return this._isInverse}set isInverse(e){this._isInverse=e,this.uid=_++}getInverse(){var e=new w;return e._wkt=this.wkt,e._wkid=this._wkid,e._isInverse=!this.isInverse,e}}var x=w;class S{constructor(e){if(this.steps=[],this._cached_projection={},this._chain="",this._gtlistentry=null,e&&e.steps)for(var t of e.steps)t instanceof x?this.steps.push(t):this.steps.push(new x({wkid:t.wkid,wkt:t.wkt,isInverse:t.isInverse}))}static cacheKey(e,t){return[void 0!==e.wkid&&null!==e.wkid?e.wkid.toString():"-1",void 0!==e.wkt&&null!==e.wkt?e.wkt.toString():"",void 0!==t.wkid&&null!==t.wkid?t.wkid.toString():"-1",void 0!==t.wkt&&null!==t.wkt?t.wkt.toString():""].join(",")}static fromGE(e){var t=new S,r="";for(var i of e.steps){var n=x.fromGE(i);t.steps.push(n),r+=n.uid.toString()+","}return t._cached_projection={},t._gtlistentry=null,t._chain=r,t}getInverse(){var e=new S;e.steps=[];for(var t=this.steps.length-1;t>=0;t--){var r=this.steps[t];e.steps.push(r.getInverse())}return e}getGTListEntry(){var e="";for(var t of this.steps)e+=t.uid.toString()+",";return e!==this._chain&&(this._gtlistentry=null,this._cached_projection={},this._chain=e),this._gtlistentry}assignCachedGe(e,t,r){this._cached_projection[S.cacheKey(e,t)]=r}getCachedGeTransformation(e,t){var r="";for(var i of this.steps)r+=i.uid.toString()+",";r!==this._chain&&(this._gtlistentry=null,this._cached_projection={},this._chain=r);var n=this._cached_projection[S.cacheKey(e,t)];return void 0===n?null:n}}var M=S,T=null,P=null,E=null,C={};function A(){return!!T&&Object(O.h)()}function I(){return!0}function k(e){return Object(n.j)(E)&&(E=Promise.all([Object(O.i)(),Promise.all([r.e(9),r.e(274)]).then(r.bind(null,503)).then((function(e){return e.g})),r.e(276).then(r.bind(null,485))])),E.then((([,t,{hydratedAdapter:r}])=>{Object(o.u)(e),P=r,(T=t.default)._enableProjection(O.j)}))}function F(e,t,r=null){return Array.isArray(e)?0===e.length?[]:R(P,e,e[0].spatialReference,t,r):R(P,[e],e.spatialReference,t,r)[0]}function R(e,t,r,i,a=null){if(Object(n.j)(r)||Object(n.j)(i))return t;if(N(r,i,a))return t.map((e=>function(e,t,r){if(!e)return e;if("x"in e){var i=new l.a;return U(e,t,i,r)?i:null}if("xmin"in e){var n=new u.a;return J(e,t,n,r)?n:null}if("rings"in e){var a=new h.a;return W(e,t,a,r)?a:null}if("paths"in e){var o=new p.a;return H(e,t,o,r)?o:null}if("points"in e){var s=new d.a;return q(e,t,s,r)?s:null}return null}(e,r,i)));if(Object(n.j)(a)){var o=M.cacheKey(r,i);void 0!==C[o]?a=C[o]:(a=D(r,i,null),Object(n.j)(a)&&(a=new M),C[o]=a)}if(Object(n.j)(T))throw new L;return T._project(e,t,r,i,a)}function D(e,t,r=null){if(Object(n.j)(T))throw new L;if(Object(n.j)(e)||Object(n.j)(t))return null;var i=T._getTransformation(P,e,t,r,null==r?void 0:r.spatialReference);return null!==i?M.fromGE(i):null}class L extends a.a{constructor(){super("projection:not-loaded","projection engine not fully loaded yet, please call load()")}}function N(e,t,r){return!r&&(!!Object(s.c)(e,t)||Object(s.i)(e)&&Object(s.i)(t)&&!!Me(e,t,Ae))}function V(e,t){return z.apply(this,arguments)}function z(){return(z=Object(i.a)((function*(e,t){if(!A())for(var{source:r,dest:i,geographicTransformation:n}of e)if(!N(r,i,n))return k(t)}))).apply(this,arguments)}function G(e,t,r=t.spatialReference,i=0){return!Object(n.j)(r)&&U(e,e.spatialReference,t,r,i)}function U(e,t,r,i,n=0){Le[0]=e.x,Le[1]=e.y;var a=e.z;return Le[2]=void 0!==a?a:n,!!$(Le,t,0,Le,i,0,1)&&(r.x=Le[0],r.y=Le[1],r.spatialReference=i,void 0===a?(r.z=void 0,r.hasZ=!1):(r.z=Le[2],r.hasZ=!0),void 0===e.m?(r.m=void 0,r.hasM=!1):(r.m=e.m,r.hasM=!0),!0)}function q(e,t,r,i,n=0){var{points:a,hasZ:o,hasM:s}=e,c=[],l=a.length,u=[];for(var d of a)u.push(d[0],d[1],o?d[2]:n);if(!$(u,t,0,u,i,0,l))return!1;for(var h=0;h<l;++h){var p=3*h,f=u[p],b=u[p+1];o&&s?c.push([f,b,u[p+2],a[h][3]]):o?c.push([f,b,u[p+2]]):s?c.push([f,b,a[h][2]]):c.push([f,b])}return r.points=c,r.spatialReference=i,r.hasZ=o,r.hasM=s,!0}function H(e,t,r,i,n=0){var{paths:a,hasZ:o,hasM:s}=e,c=[];return!!te(a,o,s,t,c,i,n)&&(r.paths=c,r.spatialReference=i,r.hasZ=o,r.hasM=s,!0)}function B(e,t,r=t.spatialReference,i=0){return!Object(n.j)(r)&&W(e,e.spatialReference,t,r,i)}function W(e,t,r,i,n=0){var{rings:a,hasZ:o,hasM:s}=e,c=[];return!!te(a,o,s,t,c,i,n)&&(r.rings=c,r.spatialReference=i,r.hasZ=o,r.hasM=s,!0)}function J(e,t,r,i,n=0){var{xmin:a,ymin:o,xmax:s,ymax:c,hasZ:l,hasM:u}=e;return!!X(a,o,l?e.zmin:n,t,Le,i)&&(r.xmin=Le[0],r.ymin=Le[1],l&&(r.zmin=Le[2]),!!X(s,c,l?e.zmax:n,t,Le,i)&&(r.xmax=Le[0],r.ymax=Le[1],l&&(r.zmax=Le[2]),u&&(r.mmin=e.mmin,r.mmax=e.mmax),r.spatialReference=i,!0))}function Z(e,t,r,i=0){Le[0]=e.x,Le[1]=e.y;var n=e.z;return Le[2]=void 0!==n?n:i,$(Le,e.spatialReference,0,t,r,0,1)}function X(e,t,r,i,n,a){return Fe[0]=e,Fe[1]=t,Fe[2]=r,$(Fe,i,0,n,a,0,1)}function Y(e,t,r,i){return!(Object(n.j)(t)||Object(n.j)(i)||e.length<2)&&(2===e.length&&(Fe[0]=e[0],Fe[1]=e[1],Fe[2]=0,e=Fe),$(e,t,0,r,i,0,1))}function Q(e,t){Le[0]=e.x,Le[1]=e.y;var r=e.z;return Le[2]=void 0!==r?r:0,K(Le,e.spatialReference,t)}function K(e,t,r){return function(e,t,r,i){if(Object(n.j)(t))return!1;var a=ne(t,Ee),o=Se[a][i];return!Object(n.j)(o)&&(o(e,0,Fe,0),r!==Fe&&(r[0]=Fe[0],r[1]=Fe[1],r.length>2&&(r[2]=Fe[2])),!0)}(e,t,r,6)}function $(e,t,r,i,a,o,s=1){var c=Me(t,a,Ae);if(Object(n.j)(c))return!1;if(c===ae){if(e===i&&r===o)return!0;for(var l=r+3*s,u=r,d=o;u<l;u++,d++)i[d]=e[u];return!0}for(var h=r+3*s,p=r,f=o;p<h;p+=3,f+=3)c(e,p,i,f);return!0}function ee(e,t,r,i,n){Object(v.j)(Le,e),Object(v.e)(Ne,e,t),Y(Le,r,Le,n),Y(Ne,r,Ne,n),Object(v.i)(i,Ne,Le),Object(v.q)(i,i)}function te(e,t,r,i,n,a,o=0){var s=new Array;for(var c of e)for(var l of c)s.push(l[0],l[1],t?l[2]:o);if(!$(s,i,0,s,a,0,s.length/3))return!1;var u=0;for(var d of(n.length=0,e)){var h=new Array;for(var p of d)t&&r?h.push([s[u++],s[u++],s[u++],p[3]]):t?h.push([s[u++],s[u++],s[u++]]):r?(h.push([s[u++],s[u++],p[2]]),u++):(h.push([s[u++],s[u++]]),u++);n.push(h)}return!0}function re(e,t,r,i){if(Object(n.j)(e)||Object(n.j)(i))return!1;var a=ne(e,Ee),o=ne(i,Ce);if(a===o&&1!==o&&(0!==a||Object(s.c)(e,i)))return Object(y.i)(r),Object(y.s)(r,r,t),!0;if(1===o||7===o||9===o){var c=0,l=0;if(1===o){var u=Se[a][6],d=Se[6][o];if(Object(n.j)(u)||Object(n.j)(d))return!1;u(t,0,Re,0),d(Re,0,De,0),c=Ie*Re[0],l=Ie*Re[1]}else if(7===o||9===o){var h=Se[a][o];if(Object(n.j)(h))return!1;h(t,0,De,0),c=Ie*t[0],l=Ie*t[1]}return ie(l,c,r),r[12]=De[0],r[13]=De[1],r[14]=De[2],!0}if(3===o&&(2===a||1===a)){var p=Se[a][6];if(Object(n.j)(p))return!1;p(t,0,Re,0);var f=Ie*Re[1];le(Re,0,De,0),Object(y.i)(r),Object(y.s)(r,r,De);var b=1/Math.cos(f);return Object(y.r)(r,r,[b,b,1]),!0}return!1}function ie(e,t,r){var i=Math.sin(t),n=Math.cos(t),a=Math.sin(e),o=Math.cos(e),s=r;return s[0]=-i,s[4]=-a*n,s[8]=o*n,s[12]=0,s[1]=n,s[5]=-a*i,s[9]=o*i,s[13]=0,s[2]=0,s[6]=o,s[10]=a,s[14]=0,s[3]=0,s[7]=0,s[11]=0,s[15]=1,s}function ne(e,t){return t.spatialReference===e?t.spatialReferenceId:(t.spatialReference=e,"metersPerUnit"in t&&(t.metersPerUnit=Object(g.f)(e,1)),e.wkt===m.a.wkt?t.spatialReferenceId=1:Object(s.j)(e)?t.spatialReferenceId=2:Object(s.m)(e)?t.spatialReferenceId=3:e.wkt===m.d.wkt?t.spatialReferenceId=4:4490===e.wkid?t.spatialReferenceId=5:e.wkt===m.b.wkt?t.spatialReferenceId=7:e.wkt===m.c.wkt?t.spatialReferenceId=9:Object(s.g)(e)?t.spatialReferenceId=8:Object(s.h)(e)?t.spatialReferenceId=10:t.spatialReferenceId=0)}function ae(e,t,r,i){e!==r&&(r[i++]=e[t++],r[i++]=e[t++],r[i]=e[t])}function oe(e,t,r,i){r[i++]=ke*(e[t++]/c.a.radius),r[i++]=ke*(Math.PI/2-2*Math.atan(Math.exp(-1*e[t++]/c.a.radius))),r[i]=e[t]}function se(e,t,r,i){oe(e,t,r,i),fe(r,i,r,i)}function ce(e,t,r,i){oe(e,t,r,i),je(r,i,r,i)}function le(e,t,r,i){!function(e,t,r,i,n){var a=.4999999*Math.PI,o=Object(f.d)(Ie*e[t+1],-a,a),s=Math.sin(o);r[i++]=Ie*e[t]*n.radius,r[i++]=n.halfSemiMajorAxis*Math.log((1+s)/(1-s)),r[i]=e[t+2]}(e,t,r,i,c.a)}function ue(e){if(Object(n.j)(e))return!1;var t=ne(e,Ee);return!!Se[t][6]}function de(e,t,r,i,n){var a=n+e[t+2],o=Ie*e[t+1],s=Ie*e[t],c=Math.cos(o);r[i++]=Math.cos(s)*c*a,r[i++]=Math.sin(s)*c*a,r[i]=Math.sin(o)*a}function he(e,t,r,i){de(e,t,r,i,c.c.radius)}function pe(e,t,r,i){de(e,t,r,i,c.b.radius)}function fe(e,t,r,i){de(e,t,r,i,c.a.radius)}function be(e,t,r,i,n){var a=e[t],o=e[t+1],s=e[t+2],c=Math.sqrt(a*a+o*o+s*s),l=Object(f.c)(s/(0===c?1:c)),u=Math.atan2(o,a);r[i++]=ke*u,r[i++]=ke*l,r[i]=c-n}function ve(e,t,r,i){be(e,t,r,i,c.c.radius)}function me(e,t,r,i){be(e,t,r,i,c.b.radius)}function ge(e,t,r,i){be(e,t,r,i,c.a.radius)}function ye(e,t,r,i){ge(e,t,r,i),le(r,i,r,i)}function Oe(e,t,r,i){ge(e,t,r,i),je(r,i,r,i)}function je(e,t,r,i){!function(e,t,r,i,n){var a=Ie*e[t],o=Ie*e[t+1],s=e[t+2],c=Math.sin(o),l=Math.cos(o),u=n.radius/Math.sqrt(1-n.eccentricitySquared*c*c);r[i++]=(u+s)*l*Math.cos(a),r[i++]=(u+s)*l*Math.sin(a),r[i++]=(u*(1-n.eccentricitySquared)+s)*c}(e,t,r,i,c.a)}function _e(e,t,r,i){var n,a,o,s,l,u,d,h,p,f,b,v,m,g,y,O,_,w,x,S,M,T=j.b,P=e[t],E=e[t+1],C=e[t+2];n=Math.abs(C),a=P*P+E*E,o=Math.sqrt(a),s=a+C*C,l=Math.sqrt(s),S=Math.atan2(E,P),u=C*C/s,d=a/s,g=T.a2/l,y=T.a3-T.a4/l,d>.3?(h=n/l*(1+d*(T.a1+g+u*y)/l),x=Math.asin(h),f=h*h,p=Math.sqrt(1-f)):(p=o/l*(1-u*(T.a5-g-d*y)/l),x=Math.acos(p),f=1-p*p,h=Math.sqrt(f)),b=1-c.a.eccentricitySquared*f,v=c.a.radius/Math.sqrt(b),x+=w=(O=p*(y=n-(m=T.a6*v)*h)-h*(g=o-v*p))/(m/b+(_=p*g+h*y)),M=_+O*w/2,C<0&&(x=-x),r[i++]=ke*S,r[i++]=ke*x,r[i]=M}function we(e,t,r,i){_e(e,t,r,i),fe(r,i,r,i)}function xe(e,t,r,i){_e(e,t,r,i),le(r,i,r,i)}var Se={2:{5:null,8:null,10:null,6:ae,1:fe,7:null,9:null,0:null,3:le,2:ae,4:je},5:{5:ae,8:null,10:null,6:ae,1:fe,7:null,9:null,0:null,3:null,2:null,4:je},8:{5:null,8:ae,10:null,6:null,1:null,7:pe,9:null,0:null,3:null,2:null,4:null},10:{5:null,8:null,10:ae,6:null,1:null,7:null,9:he,0:null,3:null,2:null,4:null},3:{5:null,8:null,10:null,6:oe,1:se,7:null,9:null,0:null,3:ae,2:oe,4:ce},4:{5:_e,8:null,10:null,6:_e,1:we,7:null,9:null,0:null,3:xe,2:_e,4:ae},1:{5:ge,8:null,10:null,6:ge,1:ae,7:null,9:null,0:null,3:ye,2:ge,4:Oe},7:{5:null,8:me,10:null,6:null,1:null,7:ae,9:null,0:null,3:null,2:null,4:null},9:{5:null,8:null,10:ve,6:null,1:null,7:null,9:ae,0:null,3:null,2:null,4:null},0:{5:null,8:null,10:null,6:null,1:null,7:null,9:null,0:ae,3:null,2:null,4:null},6:{5:null,8:null,10:null,6:ae,1:fe,7:null,9:null,0:null,3:null,2:ae,4:je}};function Me(e,t,r=Pe()){return Object(n.j)(e)||Object(n.j)(t)?null:Te(e,t,r).projector}function Te(e,t,r){if(Object(n.j)(e)||Object(n.j)(t)||r.source.spatialReference===e&&r.dest.spatialReference===t)return r;var i=ne(e,r.source),a=ne(t,r.dest);return 0===i&&0===a?Object(s.c)(e,t)?r.projector=ae:r.projector=null:r.projector=Se[i][a],r}function Pe(){return{source:{spatialReference:null,spatialReferenceId:0,metersPerUnit:1},dest:{spatialReference:null,spatialReferenceId:0,metersPerUnit:1},projector:ae}}var Ee={spatialReference:null,spatialReferenceId:0},Ce={spatialReference:null,spatialReferenceId:0},Ae=Pe(),Ie=(Pe(),Object(f.f)(1)),ke=Object(f.q)(1),Fe=Object(b.e)(),Re=Object(b.e)(),De=Object(b.e)(),Le=Object(b.e)(),Ne=Object(b.e)()},function(e,t,r){"use strict";var i,n=r(82),a=(r(80),r(92)),o=(r(81),r(88)),s=r(85),c=r(84),l=r(96),u=(r(83),r(86),r(87),r(90)),d=r(99),h=(r(101),r(170)),p=i=class extends u.a{constructor(e){super(e),this.dynamicDataSource=void 0,this.gdbVersion=null,this.geometryPrecision=void 0,this.historicMoment=null,this.maxAllowableOffset=void 0,this.objectIds=null,this.orderByFields=null,this.outFields=null,this.outSpatialReference=null,this.relationshipId=void 0,this.start=void 0,this.num=void 0,this.returnGeometry=!1,this.returnM=void 0,this.returnZ=void 0,this.where=null}_writeHistoricMoment(e,t){t.historicMoment=e&&e.getTime()}writeStart(e,t){t.resultOffset=this.start,t.resultRecordCount=this.num||10,t.where="1=1"}clone(){return new i(Object(a.a)({dynamicDataSource:this.dynamicDataSource,gdbVersion:this.gdbVersion,geometryPrecision:this.geometryPrecision,historicMoment:this.historicMoment&&new Date(this.historicMoment.getTime()),maxAllowableOffset:this.maxAllowableOffset,objectIds:this.objectIds,orderByFields:this.orderByFields,outFields:this.outFields,outSpatialReference:this.outSpatialReference,relationshipId:this.relationshipId,start:this.start,num:this.num,returnGeometry:this.returnGeometry,where:this.where,returnZ:this.returnZ,returnM:this.returnM}))}};Object(n.a)([Object(s.b)({type:h.a,json:{write:!0}})],p.prototype,"dynamicDataSource",void 0),Object(n.a)([Object(s.b)({type:String,json:{write:!0}})],p.prototype,"gdbVersion",void 0),Object(n.a)([Object(s.b)({type:Number,json:{write:!0}})],p.prototype,"geometryPrecision",void 0),Object(n.a)([Object(s.b)({type:Date})],p.prototype,"historicMoment",void 0),Object(n.a)([Object(l.a)("historicMoment")],p.prototype,"_writeHistoricMoment",null),Object(n.a)([Object(s.b)({type:Number,json:{write:!0}})],p.prototype,"maxAllowableOffset",void 0),Object(n.a)([Object(s.b)({type:[Number],json:{write:!0}})],p.prototype,"objectIds",void 0),Object(n.a)([Object(s.b)({type:[String],json:{write:!0}})],p.prototype,"orderByFields",void 0),Object(n.a)([Object(s.b)({type:[String],json:{write:!0}})],p.prototype,"outFields",void 0),Object(n.a)([Object(s.b)({type:d.a,json:{read:{source:"outSR"},write:{target:"outSR"}}})],p.prototype,"outSpatialReference",void 0),Object(n.a)([Object(s.b)({json:{write:!0}})],p.prototype,"relationshipId",void 0),Object(n.a)([Object(s.b)({type:Number,json:{read:{source:"resultOffset"}}})],p.prototype,"start",void 0),Object(n.a)([Object(l.a)("start"),Object(l.a)("num")],p.prototype,"writeStart",null),Object(n.a)([Object(s.b)({type:Number,json:{read:{source:"resultRecordCount"}}})],p.prototype,"num",void 0),Object(n.a)([Object(s.b)({json:{write:!0}})],p.prototype,"returnGeometry",void 0),Object(n.a)([Object(s.b)({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],p.prototype,"returnM",void 0),Object(n.a)([Object(s.b)({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],p.prototype,"returnZ",void 0),Object(n.a)([Object(s.b)({type:String,json:{read:{source:"definitionExpression"},write:{target:"definitionExpression"}}})],p.prototype,"where",void 0),(p=i=Object(n.a)([Object(c.a)("esri.tasks.support.RelationshipQuery")],p)).from=Object(o.m)(p);var f=p;t.a=f},function(e,t,r){"use strict";var i,n=r(82),a=(r(80),r(92)),o=(r(81),r(88),r(85)),s=r(84),c=r(96),l=(r(83),r(86),r(87),r(166)),u=r(113),d=r(103),h=r(390);function p(e){return(t,r)=>null==t?r:null==r?t:e(t,r)}var f=i=class extends l.a{constructor(...e){super(...e),this.points=[],this.type="multipoint"}normalizeCtorArgs(e,t){if(!e&&!t)return null;var r={};Array.isArray(e)?(r.points=e,r.spatialReference=t):function(e){return e&&("esri.geometry.SpatialReference"===e.declaredClass||null!=e.wkid)}(e)?r.spatialReference=e:(e.points&&(r.points=e.points),e.spatialReference&&(r.spatialReference=e.spatialReference),e.hasZ&&(r.hasZ=e.hasZ),e.hasM&&(r.hasM=e.hasM));var i=r.points&&r.points[0];return i&&(void 0===r.hasZ&&void 0===r.hasM?(r.hasZ=i.length>2,r.hasM=!1):void 0===r.hasZ?r.hasZ=i.length>3:void 0===r.hasM&&(r.hasM=i.length>3)),r}get cache(){return this.commitProperty("points"),this.commitProperty("hasZ"),this.commitProperty("hasM"),this.commitProperty("spatialReference"),{}}get extent(){var e=this.points;if(!e.length)return null;for(var t,r,i,n,a=new d.a,o=this.hasZ,s=this.hasM,c=o?3:2,l=e[0],u=p(Math.min),h=p(Math.max),[f,b]=l,[v,m]=l,g=0,y=e.length;g<y;g++){var O=e[g],[j,_]=O;if(f=u(f,j),b=u(b,_),v=h(v,j),m=h(m,_),o&&O.length>2){var w=O[2];t=u(t,w),i=h(i,w)}if(s&&O.length>c){var x=O[c];r=u(r,x),n=h(n,x)}}return a.xmin=f,a.ymin=b,a.xmax=v,a.ymax=m,a.spatialReference=this.spatialReference,o?(a.zmin=t,a.zmax=i):(a.zmin=null,a.zmax=null),s?(a.mmin=r,a.mmax=n):(a.mmin=null,a.mmax=null),a}writePoints(e,t){t.points=Object(a.a)(this.points)}addPoint(e){return Object(h.a)(this,e),Array.isArray(e)?this.points.push(e):this.points.push(e.toArray()),this.notifyChange("points"),this}clone(){var e={points:Object(a.a)(this.points),spatialReference:this.spatialReference};return this.hasZ&&(e.hasZ=!0),this.hasM&&(e.hasM=!0),new i(e)}getPoint(e){if(!this._validateInputs(e))return null;var t=this.points[e],r={x:t[0],y:t[1],spatialReference:this.spatialReference},i=2;return this.hasZ&&(r.z=t[2],i=3),this.hasM&&(r.m=t[i]),new u.a(r)}removePoint(e){if(!this._validateInputs(e))return null;var t=new u.a(this.points.splice(e,1)[0],this.spatialReference);return this.notifyChange("points"),t}setPoint(e,t){return this._validateInputs(e)?(Object(h.a)(this,t),Array.isArray(t)||(t=t.toArray()),this.points[e]=t,this.notifyChange("points"),this):this}toJSON(e){return this.write(null,e)}_validateInputs(e){return null!=e&&e>=0&&e<this.points.length}};Object(n.a)([Object(o.b)({readOnly:!0})],f.prototype,"cache",null),Object(n.a)([Object(o.b)()],f.prototype,"extent",null),Object(n.a)([Object(o.b)({type:[[Number]],json:{write:{isRequired:!0}}})],f.prototype,"points",void 0),Object(n.a)([Object(c.a)("points")],f.prototype,"writePoints",null),(f=i=Object(n.a)([Object(s.a)("esri.geometry.Multipoint")],f)).prototype.toJSON.isDefaultToJSON=!0;var b=f;t.a=b},function(e,t,r){"use strict";r.d(t,"a",(function(){return i})),r.d(t,"b",(function(){return n}));var i="20210504",n="dd3facdbe427ec0c95b4e9f84052dd3e6809dc9d"},function(e,t,r){"use strict";r.d(t,"a",(function(){return u})),r.d(t,"b",(function(){return l}));var i=r(82),n=r(89),a=r(84),o=r(94),s=r(97);class c{constructor(e){this.instance=e,this._resolver=Object(o.f)(),this._status=0,this._resolvingPromises=[],this._resolver.promise.then((()=>{this._status=1,this._cleanUp()}),(()=>{this._status=2,this._cleanUp()}))}addResolvingPromise(e){this._resolvingPromises.push(e),this._tryResolve()}isResolved(){return 1===this._status}isRejected(){return 2===this._status}isFulfilled(){return 0!==this._status}abort(){this._resolver.reject(Object(o.e)())}when(e,t){return this._resolver.promise.then(e,t)}_cleanUp(){this._allPromise=this._resolvingPromises=this._allPromise=null}_tryResolve(){if(!this.isFulfilled()){var e=Object(o.f)(),t=[...this._resolvingPromises,Object(n.d)(e.promise)],r=this._allPromise=Promise.all(t);r.then((()=>{this.isFulfilled()||this._allPromise!==r||this._resolver.resolve(this.instance)}),(e=>{this.isFulfilled()||this._allPromise!==r||Object(o.m)(e)||this._resolver.reject(e)})),e.resolve()}}}var l=e=>{var t=class extends e{constructor(...e){super(...e),this._promiseProps=new c(this),this.addResolvingPromise(Promise.resolve())}isResolved(){return this._promiseProps.isResolved()}isRejected(){return this._promiseProps.isRejected()}isFulfilled(){return this._promiseProps.isFulfilled()}when(e,t){return new Promise(((e,t)=>{this._promiseProps.when(e,t)})).then(e,t)}catch(e){return this.when(null,e)}addResolvingPromise(e){e&&!this._promiseProps.isFulfilled()&&this._promiseProps.addResolvingPromise("_promiseProps"in e?e.when():e)}};return t=Object(i.a)([Object(a.a)("esri.core.Promise")],t)},u=class extends(l(s.a)){};u=Object(i.a)([Object(a.a)("esri.core.Promise")],u)},function(e,t,r){"use strict";r.d(t,"a",(function(){return d})),r.d(t,"b",(function(){return h}));var i=r(81),n=r(126),a=r(402),o=r(93),s=r(144),c=r(209),l=i.a.getLogger("esri.core.accessorSupport.write");function u(e,t,r,i,n,a){if(!i||!i.write)return!1;var u=e.get(r);if(!n&&i.write.overridePolicy){var d=i.write.overridePolicy.call(e,u,r,a);void 0!==d&&(n=d)}if(n||(n=i.write),!n||!1===n.enabled)return!1;if((null===u&&!n.allowNull||void 0===u)&&n.isRequired){var h=new o.a("web-document-write:property-required","Missing value for required property '".concat(r,"' on '").concat(e.declaredClass,"'"),{propertyName:r,target:e});return h&&a&&a.messages?a.messages.push(h):h&&!a&&l.error(h.name,h.message),!1}return void 0!==u&&(!(null===u&&!n.allowNull)&&(!function(e,t,r,i,n){var a=i.default;if(void 0===a)return!1;if(null!=i.defaultEquals)return i.defaultEquals(n);if("function"==typeof a){if(Array.isArray(n)){var o=a.call(e,t,r);return Object(c.c)(o,n)}return!1}return a===n}(e,r,a,i,u)&&(void 0!==i.default||!(!n.ignoreOrigin&&a&&a.origin&&t.store.originOf(r)<Object(s.d)(a.origin)))))}function d(e,t,r,i){var o=Object(n.a)(e),s=o.metadatas,c=Object(a.d)(s[t],i);return!!c&&u(e,o,t,c,r,i)}function h(e,t,r){if(e&&"function"==typeof e.toJSON&&(!e.toJSON.isDefaultToJSON||!e.write))return Object(n.c)(t,e.toJSON());var i=Object(n.a)(e),o=i.metadatas,c=function(c){var l=Object(a.d)(o[c],r);if(!u(e,i,c,l,void 0,r))return"continue";var p=e.get(c),f=function(e,t,r,i,n){var a,o,s={};return null==(a=t.write)||null==(o=a.writer)||o.call(e,i,s,r,n),s}(e,l,l.write&&"string"==typeof l.write.target?l.write.target:c,p,r);Object.keys(f).length>0&&(t=Object(n.c)(t,f),null!=r&&null!=(d=r.resources)&&null!=(h=d.pendingOperations)&&h.length&&Promise.all(r.resources.pendingOperations).then((()=>Object(n.c)(t,f))),r&&r.writtenProperties&&r.writtenProperties.push({target:e,propName:c,oldOrigin:Object(s.c)(i.store.originOf(c)),newOrigin:r.origin}))};for(var l in o){var d,h;c(l)}return t}},,function(e,t,r){"use strict";r.d(t,"a",(function(){return b})),r.d(t,"b",(function(){return h})),r.d(t,"c",(function(){return p})),r.d(t,"d",(function(){return f})),r.d(t,"e",(function(){return O})),r.d(t,"f",(function(){return d}));var i=r(143),n="__begin__",a="__end__",o=new RegExp(n,"ig"),s=new RegExp(a,"ig"),c=new RegExp("^"+n,"i"),l=new RegExp(a+"$","i"),u='"';function d(e){return e.replace(new RegExp("\\{","g"),"[").replace(new RegExp("\\}","g"),"]")}function h(e){var t={expression:"",type:"none"};return e.labelExpressionInfo?e.labelExpressionInfo.value?(t.expression=e.labelExpressionInfo.value,t.type="conventional"):e.labelExpressionInfo.expression&&(t.expression=e.labelExpressionInfo.expression,t.type="arcade"):null!=e.labelExpression&&(t.expression=function(e){return e.replace(new RegExp("\\[","g"),"{").replace(new RegExp("\\]","g"),"}")}(e.labelExpression),t.type="conventional"),t}function p(e){var t=h(e);if(!t)return null;switch(t.type){case"conventional":return b(t.expression);case"arcade":return t.expression}return null}function f(e){var t=h(e);if(!t)return null;switch(t.type){case"conventional":return function(e){var t=e.match(v);return t&&t[1].trim()||null}(t.expression);case"arcade":return O(t.expression)}return null}function b(e){var t;return e?(t=Object(i.c)(e,(e=>n+'$feature["'+e+'"]'+a)),t=c.test(t)?t.replace(c,""):u+t,t=(t=l.test(t)?t.replace(l,""):t+u).replace(o,'" + ').replace(s,' + "')):t='""',t}var v=/^\s*\{([^}]+)\}\s*$/i;var m=/^\s*(?:(?:\$feature\.(\w+))|(?:\$feature\[(["'])([\w\s]+)(\2)\]));?\s*$/i,g=/^\s*(?:(?:\$feature\.(\w+))|(?:\$feature\[(["'])([\w\s]+)(\2)\]));?\s*(?:DomainName\(\s*\$feature\s*,\s*(["'])(\1|\3)(\5)\s*\));?\s*$/i,y=/^\s*(?:DomainName\(\s*\$feature\s*,\s*(["'])([\w\s]+)(\1)\s*\));?\s*$/i;function O(e){if(!e)return null;var t=m.exec(e)||g.exec(e);return t?t[1]||t[3]:(t=y.exec(e))?t[2]:null}},,,function(e,t,r){"use strict";function i(e){return e&&"esri.renderers.visualVariables.SizeVariable"===e.declaredClass}function n(e){return null!=e&&!isNaN(e)&&isFinite(e)}function a(e){return e.valueExpression?"expression":e.field&&"string"==typeof e.field?"field":"unknown"}function o(e,t){var r=t||a(e),i=e.valueUnit||"unknown";return"unknown"===r?"constant":e.stops?"stops":null!=e.minSize&&null!=e.maxSize&&null!=e.minDataValue&&null!=e.maxDataValue?"clamped-linear":"unknown"===i?null!=e.minSize&&null!=e.minDataValue?e.minSize&&e.minDataValue?"proportional":"additive":"identity":"real-world-size"}r.d(t,"a",(function(){return a})),r.d(t,"b",(function(){return o})),r.d(t,"c",(function(){return i})),r.d(t,"d",(function(){return n}))},function(e,t,r){"use strict";r.d(t,"a",(function(){return h})),r.d(t,"b",(function(){return f})),r.d(t,"c",(function(){return v})),r.d(t,"d",(function(){return b})),r.d(t,"e",(function(){return p}));r(80);var i=r(89),n=r(220),a=r(211),o=r(291),s=r(345),c=r(282),l=o.a.fromJSON(c.a),u=n.a.fromJSON(c.c),d=a.a.fromJSON(c.b),h=s.a.fromJSON(c.d);function p(e){if(Object(i.j)(e))return null;switch(e.type){case"mesh":return null;case"point":case"multipoint":return l;case"polyline":return u;case"polygon":case"extent":return d}return null}var f=o.a.fromJSON(c.e),b=n.a.fromJSON(c.g),v=a.a.fromJSON(c.f)},function(e,t,r){"use strict";var i=r(213);t.a=class{constructor(e,t){this._storage=new i.b,this._storage.maxSize=e,t&&this._storage.registerRemoveFunc("",t)}put(e,t,r){this._storage.put(e,t,r,1)}pop(e){return this._storage.pop(e)}get(e){return this._storage.get(e)}clear(){this._storage.clearAll()}destroy(){this._storage.destroy()}get maxSize(){return this._storage.maxSize}set maxSize(e){this._storage.maxSize=e}}},function(e,t,r){"use strict";r.d(t,"a",(function(){return P})),r.d(t,"b",(function(){return C})),r.d(t,"c",(function(){return x}));var i=r(7),n=r(159),a=r(89),o=r(81),s=r(93),c=r(112),l=r(161),u=r(130),d=r(141),h=r(243),p=r(91),f=r(83),b=r(100),v=(r(101),r(106));function m(e,t,r,i){return g.apply(this,arguments)}function g(){return(g=Object(i.a)((function*(e,t,r,i){var n="string"==typeof e?Object(f.J)(e):e,a=t[0].spatialReference,o=Object(p.a)(Object(p.a)({},i),{},{query:Object(p.a)(Object(p.a)({},n.query),{},{f:"json",sr:JSON.stringify(a),target:JSON.stringify({geometryType:Object(b.c)(t[0]),geometries:t}),cutter:JSON.stringify(r)})}),s=yield Object(v.default)(n.path+"/cut",o),{cutIndexes:c,geometries:l=[]}=s.data;return{cutIndexes:c,geometries:l.map((e=>{var t=Object(b.a)(e);return t.spatialReference=a,t}))}}))).apply(this,arguments)}function y(e,t,r){return O.apply(this,arguments)}function O(){return(O=Object(i.a)((function*(e,t,r){var i="string"==typeof e?Object(f.J)(e):e,n=t[0].spatialReference,a=Object(b.c)(t[0]),o=Object(p.a)(Object(p.a)({},r),{},{query:Object(p.a)(Object(p.a)({},i.query),{},{f:"json",sr:n.wkid?n.wkid:JSON.stringify(n),geometries:JSON.stringify(j(t))})});return _((yield Object(v.default)(i.path+"/simplify",o)).data,a,n)}))).apply(this,arguments)}function j(e){return{geometryType:Object(b.c)(e[0]),geometries:e.map((e=>e.toJSON()))}}function _(e,t,r){var i=Object(b.b)(t);return e.map((e=>{var t=i.fromJSON(e);return t.spatialReference=r,t}))}var w=o.a.getLogger("esri.geometry.support.normalizeUtils");function x(e,t){if(!(e instanceof d.a||e instanceof u.a)){var r="straightLineDensify: the input geometry is neither polyline nor polygon";throw w.error(r),new s.a(r)}var i=Object(h.b)(e),n=[];for(var a of i){var o=[];n.push(o),o.push([a[0][0],a[0][1]]);for(var c=0;c<a.length-1;c++){var l=a[c][0],p=a[c][1],f=a[c+1][0],b=a[c+1][1],v=Math.sqrt((f-l)*(f-l)+(b-p)*(b-p)),m=(b-p)/v,g=(f-l)/v,y=v/t;if(y>1){for(var O=1;O<=y-1;O++){var j=O*t,_=g*j+l,x=m*j+p;o.push([_,x])}var S=(v+Math.floor(y-1)*t)/2,M=g*S+l,T=m*S+p;o.push([M,T])}o.push([f,b])}}return function(e){return"polygon"===e.type}(e)?new u.a({rings:n,spatialReference:e.spatialReference}):new d.a({paths:n,spatialReference:e.spatialReference})}function S(e,t,r){if(t){var i=x(e,1e6);e=Object(l.e)(i,!0)}return r&&(e=Object(h.e)(e,r)),e}function M(e,t,r){if(Array.isArray(e)){var i=e[0];if(i>t){var n=Object(h.d)(i,t);e[0]=i+n*(-2*t)}else if(i<r){var a=Object(h.d)(i,r);e[0]=i+a*(-2*r)}}else{var o=e.x;if(o>t){var s=Object(h.d)(o,t);e=e.clone().offset(s*(-2*t),0)}else if(o<r){var c=Object(h.d)(o,r);e=e.clone().offset(c*(-2*r),0)}}return e}function T(e,t){for(var r=-1,i=function(i){for(var n=t.cutIndexes[i],a=t.geometries[i],o=Object(h.b)(a),s=function(e){var t=o[e];t.some((r=>{if(r[0]<180)return!0;for(var i=0,n=0;n<t.length;n++){var o=t[n][0];i=o>i?o:i}i=Number(i.toFixed(9));for(var s=-360*Object(h.d)(i,180),c=0;c<t.length;c++){var l=a.getPoint(e,c);a.setPoint(e,c,l.clone().offset(s,0))}return!0}))},c=0;c<o.length;c++)s(c);if(n===r){if(function(e){return"polygon"===e[0].type}(e))for(var l of Object(h.b)(a))e[n]=e[n].addRing(l);else if(function(e){return"polyline"===e[0].type}(e))for(var u of Object(h.b)(a))e[n]=e[n].addPath(u)}else r=n,e[n]=a},n=0;n<t.cutIndexes.length;n++)i(n);return e}function P(e,t,r){return E.apply(this,arguments)}function E(){return(E=Object(i.a)((function*(e,t,r){if(!Array.isArray(e))return P([e],t);var i,o,s,p,f,b,v,g,O=t?t.url:n.a.geometryServiceUrl,j=0,_=[],w=[];for(var x of e)if(Object(a.j)(x))w.push(x);else if(i||(i=x.spatialReference,o=Object(c.d)(i),b=(s=i.isWebMercator)?102100:4326,p=h.a[b].maxX,f=h.a[b].minX,v=h.a[b].plus180Line,g=h.a[b].minus180Line),o)if("mesh"===x.type)w.push(x);else if("point"===x.type)w.push(M(x.clone(),p,f));else if("multipoint"===x.type){var E=x.clone();E.points=E.points.map((e=>M(e,p,f))),w.push(E)}else if("extent"===x.type){var C=x.clone()._normalize(!1,!1,o);w.push(C.rings?new u.a(C):C)}else if(x.extent){var A=x.extent,I=Object(h.d)(A.xmin,f)*(2*p),k=0===I?x.clone():Object(h.e)(x.clone(),I);A.offset(I,0),A.intersects(v)&&A.xmax!==p?(j=A.xmax>j?A.xmax:j,k=S(k,s),_.push(k),w.push("cut")):A.intersects(g)&&A.xmin!==f?(j=A.xmax*(2*p)>j?A.xmax*(2*p):j,k=S(k,s,360),_.push(k),w.push("cut")):w.push(k)}else w.push(x.clone());else w.push(x);for(var F=Object(h.d)(j,p),R=-90,D=F,L=new d.a;F>0;){var N=360*F-180;L.addPath([[N,R],[N,-1*R]]),R*=-1,F--}if(_.length>0&&D>0){for(var V=T(_,yield m(O,_,L,r)),z=[],G=[],U=0;U<w.length;U++){var q=w[U];if("cut"!==q)G.push(q);else{var H=V.shift(),B=e[U];Object(a.k)(B)&&"polygon"===B.type&&B.rings&&B.rings.length>1&&H.rings.length>=B.rings.length?(z.push(H),G.push("simplify")):G.push(s?Object(l.b)(H):H)}}if(!z.length)return G;for(var W=yield y(O,z,r),J=[],Z=0;Z<G.length;Z++){var X=G[Z];"simplify"!==X?J.push(X):J.push(s?Object(l.b)(W.shift()):W.shift())}return J}for(var Y=[],Q=0;Q<w.length;Q++){var K=w[Q];if("cut"!==K)Y.push(K);else{var $=_.shift();Y.push(!0===s?Object(l.b)($):$)}}return Promise.resolve(Y)}))).apply(this,arguments)}function C(e,t){var r=Object(c.d)(t);if(r){var[i,n]=r.valid,a=n-i;if(e<i)for(;e<i;)e+=a;if(e>n)for(;e>n;)e-=a}return e}},function(e,t,r){"use strict";r.d(t,"a",(function(){return i}));var i=new(r(95).a)({esriFieldTypeSmallInteger:"small-integer",esriFieldTypeInteger:"integer",esriFieldTypeSingle:"single",esriFieldTypeDouble:"double",esriFieldTypeLong:"long",esriFieldTypeString:"string",esriFieldTypeDate:"date",esriFieldTypeOID:"oid",esriFieldTypeGeometry:"geometry",esriFieldTypeBlob:"blob",esriFieldTypeRaster:"raster",esriFieldTypeGUID:"guid",esriFieldTypeGlobalID:"global-id",esriFieldTypeXML:"xml"})},,function(e,t,r){"use strict";var i,n=r(82),a=(r(80),r(92)),o=(r(81),r(88),r(85)),s=r(98),c=r(84),l=r(96),u=(r(83),r(86),r(87),r(90)),d=r(140),h=r(150),p=r(222),f=i=class extends u.a{constructor(e){super(e),this.respectsDaylightSaving=!1,this.timezone=null}readRespectsDaylightSaving(e,t){return void 0!==t.respectsDaylightSaving?t.respectsDaylightSaving:void 0!==t.respectDaylightSaving&&t.respectDaylightSaving}clone(){var{respectsDaylightSaving:e,timezone:t}=this;return new i({respectsDaylightSaving:e,timezone:t})}};Object(n.a)([Object(o.b)({type:Boolean,json:{write:!0}})],f.prototype,"respectsDaylightSaving",void 0),Object(n.a)([Object(s.a)("respectsDaylightSaving",["respectsDaylightSaving","respectDaylightSaving"])],f.prototype,"readRespectsDaylightSaving",null),Object(n.a)([Object(o.b)({type:String,json:{read:{source:"timeZone"},write:{target:"timeZone"}}})],f.prototype,"timezone",void 0);var b,v=f=i=Object(n.a)([Object(c.a)("esri.layers.support.TimeReference")],f),m=b=class extends u.a{constructor(e){super(e),this.cumulative=!1,this.endField=null,this.fullTimeExtent=null,this.hasLiveData=!1,this.interval=null,this.startField=null,this.timeReference=null,this.trackIdField=null,this.useTime=!0}readFullTimeExtent(e,t){if(!t.timeExtent||!Array.isArray(t.timeExtent)||2!==t.timeExtent.length)return null;var r=new Date(t.timeExtent[0]),i=new Date(t.timeExtent[1]);return new h.a({start:r,end:i})}writeFullTimeExtent(e,t){e&&e.start&&e.end?t.timeExtent=[e.start.getTime(),e.end.getTime()]:t.timeExtent=null}readInterval(e,t){return t.timeInterval&&t.timeIntervalUnits?new p.a({value:t.timeInterval,unit:d.d.fromJSON(t.timeIntervalUnits)}):t.defaultTimeInterval&&t.defaultTimeIntervalUnits?new p.a({value:t.defaultTimeInterval,unit:d.d.fromJSON(t.defaultTimeIntervalUnits)}):null}writeInterval(e,t){if(e){var r=e.toJSON();t.timeInterval=r.value,t.timeIntervalUnits=r.unit}else t.timeInterval=null,t.timeIntervalUnits=null}clone(){var{cumulative:e,endField:t,hasLiveData:r,interval:i,startField:n,timeReference:o,fullTimeExtent:s,trackIdField:c,useTime:l}=this;return new b({cumulative:e,endField:t,hasLiveData:r,interval:i,startField:n,timeReference:Object(a.a)(o),fullTimeExtent:Object(a.a)(s),trackIdField:c,useTime:l})}};Object(n.a)([Object(o.b)({type:Boolean,json:{read:{source:"exportOptions.timeDataCumulative"},write:{target:"exportOptions.timeDataCumulative"}}})],m.prototype,"cumulative",void 0),Object(n.a)([Object(o.b)({type:String,json:{read:{source:"endTimeField"},write:{target:"endTimeField",allowNull:!0}}})],m.prototype,"endField",void 0),Object(n.a)([Object(o.b)({type:h.a,json:{write:{enabled:!0,allowNull:!0}}})],m.prototype,"fullTimeExtent",void 0),Object(n.a)([Object(s.a)("fullTimeExtent",["timeExtent"])],m.prototype,"readFullTimeExtent",null),Object(n.a)([Object(l.a)("fullTimeExtent")],m.prototype,"writeFullTimeExtent",null),Object(n.a)([Object(o.b)({type:Boolean,json:{write:!0}})],m.prototype,"hasLiveData",void 0),Object(n.a)([Object(o.b)({type:p.a,json:{write:{enabled:!0,allowNull:!0}}})],m.prototype,"interval",void 0),Object(n.a)([Object(s.a)("interval",["timeInterval","timeIntervalUnits","defaultTimeInterval","defaultTimeIntervalUnits"])],m.prototype,"readInterval",null),Object(n.a)([Object(l.a)("interval")],m.prototype,"writeInterval",null),Object(n.a)([Object(o.b)({type:String,json:{read:{source:"startTimeField"},write:{target:"startTimeField",allowNull:!0}}})],m.prototype,"startField",void 0),Object(n.a)([Object(o.b)({type:v,json:{write:{enabled:!0,allowNull:!0}}})],m.prototype,"timeReference",void 0),Object(n.a)([Object(o.b)({type:String,json:{write:{enabled:!0,allowNull:!0}}})],m.prototype,"trackIdField",void 0),Object(n.a)([Object(o.b)({type:Boolean,json:{read:{source:"exportOptions.useTime"},write:{target:"exportOptions.useTime"}}})],m.prototype,"useTime",void 0);var g=m=b=Object(n.a)([Object(c.a)("esri.layers.support.TimeInfo")],m);t.a=g},function(e,t,r){"use strict";r.d(t,"a",(function(){return c})),r.d(t,"b",(function(){return s})),r.d(t,"c",(function(){return o}));var i=r(126);function n(e,t){var r="?"===e[e.length-1]?e.slice(0,-1):e;if(null!=t.getItemAt||Array.isArray(t)){var n=parseInt(r,10);if(!isNaN(n))return Array.isArray(t)?t[n]:t.getItemAt(n)}var a=Object(i.a)(t);return Object(i.b)(a,r)?a.get(r):t[r]}function a(e,t,r){if(null==e)return e;var i=n(t[r],e);return!i&&r<t.length-1?void 0:r===t.length-1?i:a(i,t,r+1)}function o(e,t,r=0){return"string"==typeof t&&-1===t.indexOf(".")?n(t,e):a(e,Object(i.f)(t),r)}function s(e,t){return o(e,t)}function c(e,t){return void 0!==o(t,e)}},function(e,t,r){"use strict";r.d(t,"a",(function(){return y})),r.d(t,"b",(function(){return g})),r.d(t,"c",(function(){return S}));var i=r(89),n=r(410),a=r(343),o=r(176),s=r(94);class c{constructor(e){this.phases=e,this.paused=!1,this.ticks=-1,this.removed=!1}}class l{constructor(e){this.callback=e,this.isActive=!0}remove(){this.isActive=!1}}var u=0,d=0,h={time:0,deltaTime:0,elapsedFrameTime:0,frameDuration:0},p=["prepare","preRender","render","postRender","update"],f=[],b=new o.a;class v{constructor(e){this._task=e}remove(){this._task.removed=!0}pause(){this._task.paused=!0}resume(){this._task.paused=!1}}var m={frameTasks:b,willDispatch:!1,clearFrameTasks:function(e=!1){b.forAll((e=>{e.removed=!0})),e&&w()},dispatch:x,executeFrameTasks:function(e){var t=e-u;u=e;for(var r=d>0?d:1e3/60,i=Math.max(0,t-r),n=function(n){var a=performance.now(),o=p[n];b.forAll((a=>{var s;a.paused||a.removed||(0===n&&a.ticks++,a.phases[o]&&(h.time=e,h.deltaTime=0===a.ticks?0:t,h.elapsedFrameTime=performance.now()-e,h.frameDuration=r-i,null==(s=a.phases[o])||s.call(a,h)))})),M[n].record(performance.now()-a)},a=0;a<p.length;a++)n(a);w(),T.record(performance.now()-e)}};function g(e){var t=new l(e);return f.push(t),m.willDispatch||(m.willDispatch=!0,Object(n.a)(x)),t}function y(e){var t=new c(e);return b.push(t),null==O&&(u=performance.now(),O=requestAnimationFrame(j)),new v(t)}var O=null;function j(){var e=performance.now();O=null,O=b.length>0?requestAnimationFrame(j):null,m.executeFrameTasks(e)}var _=new o.a;function w(){b.forAll((e=>{e.removed&&_.push(e)})),b.removeUnorderedMany(_.data,_.length),_.clear()}function x(){for(;f.length;){var e=Object(i.d)(f.shift());e.isActive&&e.callback()}m.willDispatch=!1}function S(e=1,t){var r=Object(s.g)(),i=()=>{Object(s.n)(t)?r.reject(Object(s.e)()):0===e?r():(--e,Object(n.a)((()=>i())))};return i(),r.promise}var M=p.map((e=>new a.a(e))),T=new a.a("total")},function(e,t,r){"use strict";r.d(t,"a",(function(){return p})),r.d(t,"b",(function(){return u})),r.d(t,"c",(function(){return b})),r.d(t,"d",(function(){return O})),r.d(t,"e",(function(){return y})),r.d(t,"f",(function(){return d})),r.d(t,"g",(function(){return h})),r.d(t,"h",(function(){return v})),r.d(t,"i",(function(){return m})),r.d(t,"j",(function(){return f})),r.d(t,"k",(function(){return g}));var i=r(89),n=r(83),a=r(258),o=["MapServer","ImageServer","FeatureServer","SceneServer","StreamServer","VectorTileServer"],s=new RegExp("^((?:https?:)?\\/\\/\\S+?\\/rest\\/services\\/(.+?)\\/(".concat(o.join("|"),"))(?:\\/(?:layers\\/)?(\\d+))?"),"i"),c=new RegExp("^((?:https?:)?\\/\\/\\S+?\\/([^\\/\\n]+)\\/(".concat(o.join("|"),"))(?:\\/(?:layers\\/)?(\\d+))?"),"i"),l=/(.*)\/(\d+)\/?$/i;function u(e){return!!s.test(e)}function d(e){var t=Object(n.J)(e),r=t.path.match(s)||t.path.match(c);if(!r)return null;var[,i,a,o,l]=r,u=a.indexOf("/");return{title:p(-1!==u?a.slice(u+1):a),serverType:o,sublayer:null!=l&&""!==l?parseInt(l,10):null,url:{path:i}}}function h(e){var t=Object(n.J)(e).path.match(l);return t?{serviceUrl:t[1],sublayerId:Number(t[2])}:null}function p(e){return(e=e.replace(/\s*[/_]+\s*/g," "))[0].toUpperCase()+e.slice(1)}function f(e,t){var r=[];if(e){var n=d(e);Object(i.k)(n)&&n.title&&r.push(n.title)}if(t){var a=p(t);r.push(a)}if(2===r.length){if(-1!==r[0].toLowerCase().indexOf(r[1].toLowerCase()))return r[0];if(-1!==r[1].toLowerCase().indexOf(r[0].toLowerCase()))return r[1]}return r.join(" - ")}function b(e){if(!e)return!1;var t=-1!==(e=e.toLowerCase()).indexOf(".arcgis.com/"),r=-1!==e.indexOf("//services")||-1!==e.indexOf("//tiles")||-1!==e.indexOf("//features");return t&&r}function v(e,t){return e?Object(n.H)(Object(n.G)(e,t)):e}function m(e){var{url:t}=e;if(!t)return{url:t};t=Object(n.G)(t,e.logger);var r,a=Object(n.J)(t),o=d(a.path);if(Object(i.k)(o))null!=o.sublayer&&null==e.layer.layerId&&(r=o.sublayer),t=o.url.path;else if(e.nonStandardUrlAllowed){var s=h(a.path);Object(i.k)(s)&&(t=s.serviceUrl,r=s.sublayerId)}return{url:Object(n.H)(t),layerId:r}}function g(e,t,r,i,o){Object(a.f)(t,i,"url",o),i.url&&null!=e.layerId&&(i.url=Object(n.y)(i.url,r,e.layerId.toString()))}function y(e){if(!e)return!1;var t=e.toLowerCase(),r=-1!==t.indexOf("/services/"),i=-1!==t.indexOf("/mapserver/wmsserver"),n=-1!==t.indexOf("/imageserver/wmsserver"),a=-1!==t.indexOf("/wmsserver");return r&&(i||n||a)}function O(e){if(!e)return!1;var t=new n.a(Object(n.z)(e)).authority.toLowerCase();return"server.arcgisonline.com"===t||"services.arcgisonline.com"===t}},function(e,t,r){"use strict";r.d(t,"a",(function(){return o})),r.d(t,"b",(function(){return l})),r.d(t,"c",(function(){return u})),r.d(t,"d",(function(){return s})),r.d(t,"e",(function(){return c}));var i=r(99),n=r(141),a=r(100),o={102100:{maxX:20037508.342788905,minX:-20037508.342788905,plus180Line:new n.a({paths:[[[20037508.342788905,-20037508.342788905],[20037508.342788905,20037508.342788905]]],spatialReference:i.a.WebMercator}),minus180Line:new n.a({paths:[[[-20037508.342788905,-20037508.342788905],[-20037508.342788905,20037508.342788905]]],spatialReference:i.a.WebMercator})},4326:{maxX:180,minX:-180,plus180Line:new n.a({paths:[[[180,-180],[180,180]]],spatialReference:i.a.WGS84}),minus180Line:new n.a({paths:[[[-180,-180],[-180,180]]],spatialReference:i.a.WGS84})}};function s(e,t){return Math.ceil((e-t)/(2*t))}function c(e,t){var r=l(e);for(var i of r)for(var n of i)n[0]+=t;return e}function l(e){return Object(a.g)(e)?e.rings:e.paths}function u(e){var t=(null==e?void 0:e.isWebMercator)?102100:4326;return[o[t].minX,o[t].maxX]}},function(e,t,r){"use strict";r.d(t,"a",(function(){return l})),r.d(t,"b",(function(){return d})),r.d(t,"c",(function(){return c}));r(80);var i=r(124),n=r(175),a=r(188),o=r(93),s=r(214);function c(e,t,r,n){var a=function(e,t){return e?function(e,t){if(!t||"web-scene"!==t.origin)return!0;switch(e.type){case"simple":case"unique-value":case"class-breaks":return!0;case"heatmap":case"dictionary":case"dot-density":default:return!1}}(e,t)?e.write({},t):(t.messages&&t.messages.push(new o.a("renderer:unsupported","Renderer of type '".concat(e.declaredClass,"' are not supported in scenes."),{renderer:e,context:t})),null):null}(e,n);a&&Object(i.c)(r,a,t)}function l(e,t){return d(e,null,t)}var u=Object(a.b)({types:s.a});function d(e,t,r){return e?e&&(e.styleName||e.styleUrl)&&"uniqueValue"!==e.type?(r&&r.messages&&r.messages.push(new n.a("renderer:unsupported","Only UniqueValueRenderer can be referenced from a web style, but found '"+e.type+"'",{definition:e,context:r})),null):u(e,t,r):null}},,function(e,t,r){"use strict";var i,n=r(82),a=(r(80),r(92)),o=(r(81),r(88),r(85)),s=r(95),c=r(84),l=r(96),u=(r(83),r(86),r(87),r(90)),d=new s.a({count:"count",sum:"sum",min:"min",max:"max",avg:"avg",stddev:"stddev",var:"var",exceedslimit:"exceedslimit",percentile_cont:"percentile-continuous",percentile_disc:"percentile-discrete"}),h=i=class extends u.a{constructor(e){super(e),this.maxPointCount=void 0,this.maxRecordCount=void 0,this.maxVertexCount=void 0,this.onStatisticField=null,this.outStatisticFieldName=null,this.statisticType=null,this.statisticParameters=null}writeStatisticParameters(e,t){"percentile-continuous"!==this.statisticType&&"percentile-discrete"!==this.statisticType||(t.statisticParameters=Object(a.a)(e))}clone(){return new i({maxPointCount:this.maxPointCount,maxRecordCount:this.maxRecordCount,maxVertexCount:this.maxVertexCount,onStatisticField:this.onStatisticField,outStatisticFieldName:this.outStatisticFieldName,statisticType:this.statisticType,statisticParameters:Object(a.a)(this.statisticParameters)})}};Object(n.a)([Object(o.b)({type:Number,json:{write:!0}})],h.prototype,"maxPointCount",void 0),Object(n.a)([Object(o.b)({type:Number,json:{write:!0}})],h.prototype,"maxRecordCount",void 0),Object(n.a)([Object(o.b)({type:Number,json:{write:!0}})],h.prototype,"maxVertexCount",void 0),Object(n.a)([Object(o.b)({type:String,json:{write:!0}})],h.prototype,"onStatisticField",void 0),Object(n.a)([Object(o.b)({type:String,json:{write:!0}})],h.prototype,"outStatisticFieldName",void 0),Object(n.a)([Object(o.b)({type:String,json:{read:{source:"statisticType",reader:d.read},write:{target:"statisticType",writer:d.write}}})],h.prototype,"statisticType",void 0),Object(n.a)([Object(o.b)({type:Object})],h.prototype,"statisticParameters",void 0),Object(n.a)([Object(l.a)("statisticParameters")],h.prototype,"writeStatisticParameters",null);var p=h=i=Object(n.a)([Object(c.a)("esri.tasks.support.StatisticDefinition")],h);t.a=p},,function(e,t,r){"use strict";r.d(t,"a",(function(){return c})),r.d(t,"b",(function(){return l}));var i=r(89),n=r(148),a={ar:"ar-u-nu-latn"},o=new WeakMap,s={};function c(e={}){var t={};return null!=e.digitSeparator&&(t.useGrouping=e.digitSeparator),null!=e.places&&(t.minimumFractionDigits=t.maximumFractionDigits=e.places),t}function l(e,t){return function(e){var t=e||s;if(!o.has(t)){var r=Object(n.b)(),c=a[Object(n.b)()]||r;o.set(t,new Intl.NumberFormat(c,e))}return Object(i.d)(o.get(t))}(t).format(e)}Object(n.a)((()=>{o=new WeakMap,s={}}))},function(e,t,r){"use strict";r.d(t,"a",(function(){return f}));var i,n,a,o,s,c,l=r(120),u=r(89),d=r(104),h=r(111),p=r(119);function f(e,t){if(t.slicePlaneEnabled){e.extensions.add("GL_OES_standard_derivatives"),t.sliceEnabledForVertexPrograms&&(e.vertex.uniforms.add("slicePlaneOrigin","vec3"),e.vertex.uniforms.add("slicePlaneBasis1","vec3"),e.vertex.uniforms.add("slicePlaneBasis2","vec3")),e.fragment.uniforms.add("slicePlaneOrigin","vec3"),e.fragment.uniforms.add("slicePlaneBasis1","vec3"),e.fragment.uniforms.add("slicePlaneBasis2","vec3");var r=Object(p.a)(i||(i=Object(l.a)(["\n      struct SliceFactors {\n        float front;\n        float side0;\n        float side1;\n        float side2;\n        float side3;\n      };\n\n      SliceFactors calculateSliceFactors(vec3 pos) {\n        vec3 rel = pos - slicePlaneOrigin;\n\n        vec3 slicePlaneNormal = -cross(slicePlaneBasis1, slicePlaneBasis2);\n        float slicePlaneW = -dot(slicePlaneNormal, slicePlaneOrigin);\n\n        float basis1Len2 = dot(slicePlaneBasis1, slicePlaneBasis1);\n        float basis2Len2 = dot(slicePlaneBasis2, slicePlaneBasis2);\n\n        float basis1Dot = dot(slicePlaneBasis1, rel);\n        float basis2Dot = dot(slicePlaneBasis2, rel);\n\n        return SliceFactors(\n          dot(slicePlaneNormal, pos) + slicePlaneW,\n          -basis1Dot - basis1Len2,\n          basis1Dot - basis1Len2,\n          -basis2Dot - basis2Len2,\n          basis2Dot - basis2Len2\n        );\n      }\n\n      bool sliceByFactors(SliceFactors factors) {\n        return factors.front < 0.0\n          && factors.side0 < 0.0\n          && factors.side1 < 0.0\n          && factors.side2 < 0.0\n          && factors.side3 < 0.0;\n      }\n\n      bool sliceEnabled() {\n        // a slicePlaneBasis1 vector of zero length is used to disable slicing in the shader during draped rendering.\n        return dot(slicePlaneBasis1, slicePlaneBasis1) != 0.0;\n      }\n\n      bool sliceByPlane(vec3 pos) {\n        return sliceEnabled() && sliceByFactors(calculateSliceFactors(pos));\n      }\n\n      #define rejectBySlice(_pos_) sliceByPlane(_pos_)\n      #define discardBySlice(_pos_) { if (sliceByPlane(_pos_)) discard; }\n    "]))),c=Object(p.a)(n||(n=Object(l.a)(["\n      vec4 applySliceHighlight(vec4 color, vec3 pos) {\n        SliceFactors factors = calculateSliceFactors(pos);\n\n        if (sliceByFactors(factors)) {\n          return color;\n        }\n\n        const float HIGHLIGHT_WIDTH = 1.0;\n        const vec4 HIGHLIGHT_COLOR = vec4(0.0, 0.0, 0.0, 0.3);\n\n        factors.front /= (2.0 * HIGHLIGHT_WIDTH) * fwidth(factors.front);\n        factors.side0 /= (2.0 * HIGHLIGHT_WIDTH) * fwidth(factors.side0);\n        factors.side1 /= (2.0 * HIGHLIGHT_WIDTH) * fwidth(factors.side1);\n        factors.side2 /= (2.0 * HIGHLIGHT_WIDTH) * fwidth(factors.side2);\n        factors.side3 /= (2.0 * HIGHLIGHT_WIDTH) * fwidth(factors.side3);\n\n        float highlightFactor = (1.0 - step(0.5, factors.front))\n          * (1.0 - step(0.5, factors.side0))\n          * (1.0 - step(0.5, factors.side1))\n          * (1.0 - step(0.5, factors.side2))\n          * (1.0 - step(0.5, factors.side3));\n\n        return mix(color, vec4(HIGHLIGHT_COLOR.rgb, color.a), highlightFactor * HIGHLIGHT_COLOR.a);\n      }\n    "]))),u=t.sliceHighlightDisabled?Object(p.a)(a||(a=Object(l.a)(["#define highlightSlice(_color_, _pos_) (_color_)"]))):Object(p.a)(o||(o=Object(l.a)(["\n        ","\n        #define highlightSlice(_color_, _pos_) (sliceEnabled() ? applySliceHighlight(_color_, _pos_) : (_color_))\n      "])),c);t.sliceEnabledForVertexPrograms&&e.vertex.code.add(r),e.fragment.code.add(r),e.fragment.code.add(u)}else{var d=Object(p.a)(s||(s=Object(l.a)(["\n      #define rejectBySlice(_pos_) false\n      #define discardBySlice(_pos_) {}\n      #define highlightSlice(_color_, _pos_) (_color_)\n    "])));t.sliceEnabledForVertexPrograms&&e.vertex.code.add(d),e.fragment.code.add(d)}}(c=f||(f={})).bindUniformsWithOrigin=function(e,t,r){c.bindUniforms(e,t,r.slicePlane,r.origin)},c.bindUniforms=function(e,t,r,i){t.slicePlaneEnabled&&(Object(u.k)(r)?(i?(Object(h.i)(b,r.origin,i),e.setUniform3fv("slicePlaneOrigin",b)):e.setUniform3fv("slicePlaneOrigin",r.origin),e.setUniform3fv("slicePlaneBasis1",r.basis1),e.setUniform3fv("slicePlaneBasis2",r.basis2)):(e.setUniform3fv("slicePlaneBasis1",d.b),e.setUniform3fv("slicePlaneBasis2",d.b),e.setUniform3fv("slicePlaneOrigin",d.b)))};var b=Object(d.e)()},function(e,t,r){"use strict";var i,n=r(82),a=(r(80),r(92)),o=(r(81),r(88),r(85)),s=r(95),c=r(84),l=(r(83),r(86),r(87),r(90)),u=r(103),d=(r(101),new s.a({upperLeft:"upper-left",lowerLeft:"lower-left"})),h=i=class extends l.a{constructor(e){super(e),this.extent=null,this.mode="view",this.originPosition="upper-left",this.tolerance=1}clone(){return new i(Object(a.a)({extent:this.extent,mode:this.mode,originPosition:this.originPosition,tolerance:this.tolerance}))}};Object(n.a)([Object(o.b)({type:u.a,json:{write:{overridePolicy(){return{enabled:"view"===this.mode}}}}})],h.prototype,"extent",void 0),Object(n.a)([Object(o.b)({type:["view","edit"],json:{write:!0}})],h.prototype,"mode",void 0),Object(n.a)([Object(o.b)({type:String,json:{read:d.read,write:d.write}})],h.prototype,"originPosition",void 0),Object(n.a)([Object(o.b)({type:Number,json:{write:{overridePolicy(){return{enabled:"view"===this.mode}}}}})],h.prototype,"tolerance",void 0);var p=h=i=Object(n.a)([Object(c.a)("esri.tasks.support.QuantizationParameters")],h);t.a=p},function(e,t,r){"use strict";var i=r(82),n=(r(80),r(92)),a=(r(81),r(88),r(85)),o=r(95),s=r(84),c=r(96),l=(r(83),r(86),r(87),r(90)),u=new o.a({esriFeatureEditToolAutoCompletePolygon:"auto-complete-polygon",esriFeatureEditToolCircle:"circle",esriFeatureEditToolEllipse:"ellipse",esriFeatureEditToolFreehand:"freehand",esriFeatureEditToolLine:"line",esriFeatureEditToolNone:"none",esriFeatureEditToolPoint:"point",esriFeatureEditToolPolygon:"polygon",esriFeatureEditToolRectangle:"rectangle",esriFeatureEditToolArrow:"arrow",esriFeatureEditToolTriangle:"triangle",esriFeatureEditToolLeftArrow:"left-arrow",esriFeatureEditToolRightArrow:"right-arrow",esriFeatureEditToolUpArrow:"up-arrow",esriFeatureEditToolDownArrow:"down-arrow"}),d=class extends l.a{constructor(e){super(e),this.name=null,this.description=null,this.drawingTool=null,this.prototype=null,this.thumbnail=null}writeDrawingTool(e,t){t.drawingTool=u.toJSON(e)}writePrototype(e,t){t.prototype=Object(n.c)(Object(n.a)(e),!0)}writeThumbnail(e,t){t.thumbnail=Object(n.c)(Object(n.a)(e))}};Object(i.a)([Object(a.b)({json:{write:!0}})],d.prototype,"name",void 0),Object(i.a)([Object(a.b)({json:{write:!0}})],d.prototype,"description",void 0),Object(i.a)([Object(a.b)({json:{read:u.read,write:u.write}})],d.prototype,"drawingTool",void 0),Object(i.a)([Object(c.a)("drawingTool")],d.prototype,"writeDrawingTool",null),Object(i.a)([Object(a.b)({json:{write:!0}})],d.prototype,"prototype",void 0),Object(i.a)([Object(c.a)("prototype")],d.prototype,"writePrototype",null),Object(i.a)([Object(a.b)({json:{write:!0}})],d.prototype,"thumbnail",void 0),Object(i.a)([Object(c.a)("thumbnail")],d.prototype,"writeThumbnail",null);var h=d=Object(i.a)([Object(s.a)("esri.layers.support.FeatureTemplate")],d);t.a=h},function(e,t,r){"use strict";var i=r(91),n=r(7),a=r(82),o=(r(80),r(159)),s=r(89),c=(r(81),r(88)),l=r(85),u=r(98),d=r(84),h=r(93),p=(r(83),r(86),r(87),r(94)),f=r(90),b=r(103),v=r(148),m=r(160),g=r(106),y=(r(171),r(185)),O=r(456),j=r(97),_=class extends j.a{constructor(e){super(e),this.nextQueryParams=null,this.queryParams=null,this.results=null,this.total=null}};Object(a.a)([Object(l.b)()],_.prototype,"nextQueryParams",void 0),Object(a.a)([Object(l.b)()],_.prototype,"queryParams",void 0),Object(a.a)([Object(l.b)()],_.prototype,"results",void 0),Object(a.a)([Object(l.b)()],_.prototype,"total",void 0);var w,x,S=_=Object(a.a)([Object(d.a)("esri.portal.PortalQueryResult")],_),M=r(591),T={PortalGroup:()=>Promise.resolve().then(r.bind(null,575)),PortalItem:()=>r.e(50).then(r.bind(null,314)),PortalUser:()=>Promise.resolve().then(r.bind(null,591))},P=w=class extends(Object(f.b)(y.a)){constructor(e){super(e),this.access=null,this.allSSL=!1,this.authMode="auto",this.authorizedCrossOriginDomains=null,this.basemapGalleryGroupQuery=null,this.bingKey=null,this.canListApps=!1,this.canListData=!1,this.canListPreProvisionedItems=!1,this.canProvisionDirectPurchase=!1,this.canSearchPublic=!0,this.canShareBingPublic=!1,this.canSharePublic=!1,this.canSignInArcGIS=!1,this.canSignInIDP=!1,this.colorSetsGroupQuery=null,this.commentsEnabled=!1,this.created=null,this.culture=null,this.customBaseUrl=null,this.defaultBasemap=null,this.defaultExtent=null,this.defaultVectorBasemap=null,this.description=null,this.eueiEnabled=null,this.featuredGroups=null,this.featuredItemsGroupQuery=null,this.galleryTemplatesGroupQuery=null,this.livingAtlasGroupQuery=null,this.hasCategorySchema=!1,this.helperServices=null,this.homePageFeaturedContent=null,this.homePageFeaturedContentCount=null,this.httpPort=null,this.httpsPort=null,this.id=null,this.ipCntryCode=null,this.isPortal=!1,this.isReadOnly=!1,this.layerTemplatesGroupQuery=null,this.maxTokenExpirationMinutes=null,this.modified=null,this.name=null,this.portalHostname=null,this.portalMode=null,this.portalProperties=null,this.region=null,this.rotatorPanels=null,this.showHomePageDescription=!1,this.sourceJSON=null,this.supportsHostedServices=!1,this.symbolSetsGroupQuery=null,this.templatesGroupQuery=null,this.units=null,this.url=o.a.portalUrl,this.urlKey=null,this.user=null,this.useStandardizedQuery=!1,this.useVectorBasemaps=!1,this.vectorBasemapGalleryGroupQuery=null}normalizeCtorArgs(e){return"string"==typeof e?{url:e}:e}destroy(){this._esriId_credentialCreateHandle&&(this._esriId_credentialCreateHandle.remove(),this._esriId_credentialCreateHandle=null)}readAuthorizedCrossOriginDomains(e){if(e)for(var t of e)-1===o.a.request.trustedServers.indexOf(t)&&o.a.request.trustedServers.push(t);return e}readDefaultBasemap(e){if(e){var t=x.fromJSON(e);return t.portalItem={portal:this},t}return null}readDefaultVectorBasemap(e){if(e){var t=x.fromJSON(e);return t.portalItem={portal:this},t}return null}get extraQuery(){var e=!(this.user&&this.user.orgId)||this.canSearchPublic;return this.id&&!e?" AND orgid:".concat(this.id):null}get isOrganization(){return!!this.access}get restUrl(){var e=this.url;if(e){var t=e.indexOf("/sharing");e=t>0?e.substring(0,t):this.url.replace(/\/+$/,""),e+="/sharing/rest"}return e}get thumbnailUrl(){var e=this.restUrl,t=this.thumbnail;return e&&t?this._normalizeSSL(e+"/portals/self/resources/"+t):null}readUrlKey(e){return e?e.toLowerCase():e}readUser(e){var t=null;return e&&((t=M.default.fromJSON(e)).portal=this),t}load(e){var t=Promise.all([r.e(40),r.e(278)]).then(r.bind(null,543)).then((({default:t})=>{Object(p.u)(e),x=t})).then((()=>this.sourceJSON?this.sourceJSON:this._fetchSelf(this.authMode,!1,e))).then((e=>{if(m.b){var t=m.b;this.credential=t.findCredential(this.restUrl),this.credential||this.authMode!==w.AUTH_MODE_AUTO||(this._esriId_credentialCreateHandle=t.on("credential-create",(()=>{t.findCredential(this.restUrl)&&this._signIn()})))}this.sourceJSON=e,this.read(e)}));return this.addResolvingPromise(t),Promise.resolve(this)}createClosestFacilityTask(){var e=this;return Object(n.a)((function*(){yield e.load();var t=e._getHelperServiceUrl("closestFacility");return new(0,(yield Promise.all([r.e(1),r.e(2),r.e(20),r.e(142)]).then(r.bind(null,1247))).default)(t)}))()}createElevationLayers(){var e=this;return Object(n.a)((function*(){yield e.load();var t=e._getHelperService("defaultElevationLayers"),i=(yield Promise.all([r.e(3),r.e(12),r.e(24),r.e(46)]).then(r.bind(null,768))).default;return t?t.map((e=>new i({id:e.id,url:e.url}))):[]}))()}createGeometryService(){var e=this;return Object(n.a)((function*(){yield e.load();var t=e._getHelperServiceUrl("geometry");return new(0,(yield Promise.all([r.e(25),r.e(283)]).then(r.bind(null,921))).default)({url:t})}))()}createPrintTask(){var e=this;return Object(n.a)((function*(){yield e.load();var t=e._getHelperServiceUrl("printTask");return new(0,(yield Promise.all([r.e(1),r.e(2),r.e(20),r.e(111)]).then(r.bind(null,1091))).default)(t)}))()}createRouteTask(){var e=this;return Object(n.a)((function*(){yield e.load();var t=e._getHelperServiceUrl("route");return new(0,(yield Promise.all([r.e(1),r.e(2),r.e(20),r.e(143)]).then(r.bind(null,1259))).default)(t)}))()}createServiceAreaTask(){var e=this;return Object(n.a)((function*(){yield e.load();var t=e._getHelperServiceUrl("serviceArea");return new(0,(yield Promise.all([r.e(1),r.e(2),r.e(20),r.e(144)]).then(r.bind(null,1248))).default)(t)}))()}fetchBasemaps(e,t){var r=new O.a;return r.query=e||(this.useVectorBasemaps?this.vectorBasemapGalleryGroupQuery:this.basemapGalleryGroupQuery),r.disableExtraQuery=!0,this.queryGroups(r,t).then((e=>{if(r.num=100,r.query='type:"Web Map" -type:"Web Application"',e.total){var i=e.results[0];return r.sortField=i.sortField||"name",r.sortOrder=i.sortOrder||"desc",i.queryItems(r,t)}return null})).then((e=>e&&e.total?e.results.filter((e=>"Web Map"===e.type)).map((e=>new x({portalItem:e}))):[]))}fetchCategorySchema(e){return this.hasCategorySchema?this._request(this.restUrl+"/portals/self/categorySchema",e).then((e=>e.categorySchema)):Object(p.n)(e)?Promise.reject(Object(p.e)()):Promise.resolve([])}fetchFeaturedGroups(e){var t=this.featuredGroups,r=new O.a;if(r.num=100,r.sortField="title",t&&t.length){var i=[];for(var n of t)i.push('(title:"'.concat(n.title,'" AND owner:').concat(n.owner,")"));return r.query=i.join(" OR "),this.queryGroups(r,e).then((e=>e.results))}return Object(p.n)(e)?Promise.reject(Object(p.e)()):Promise.resolve([])}fetchRegions(e){var t=this.user&&this.user.culture||this.culture||Object(v.b)();return this._request(this.restUrl+"/portals/regions",Object(i.a)(Object(i.a)({},e),{},{query:{culture:t}}))}static getDefault(){return w._default&&!w._default.destroyed||(w._default=new w),w._default}queryGroups(e,t){return this._queryPortal("/community/groups",e,"PortalGroup",t)}queryItems(e,t){return this._queryPortal("/search",e,"PortalItem",t)}queryUsers(e,t){return e.sortField||(e.sortField="username"),this._queryPortal("/community/users",e,"PortalUser",t)}toJSON(){throw new h.a("internal:not-yet-implemented","Portal.toJSON is not yet implemented")}static fromJSON(e){if(!e)return null;if(e.declaredClass)throw new Error("JSON object is already hydrated");return new w({sourceJSON:e})}_getHelperService(e){var t=this.helperServices&&this.helperServices[e];if(!t)throw new h.a("portal:service-not-found",'The `helperServices` do not include an entry named "'.concat(e,'"'));return t}_getHelperServiceUrl(e){var t=this._getHelperService(e);if(!t.url)throw new h.a("portal:service-url-not-found",'The `helperServices` entry "'.concat(e,'" does not include a `url` value'));return t.url}_fetchSelf(e=this.authMode,t=!1,r){var n=this.restUrl+"/portals/self",a=Object(i.a)({authMode:e,query:{culture:Object(v.b)().toLowerCase()}},r);return"auto"===a.authMode&&(a.authMode="no-prompt"),t&&(a.query.default=!0),this._request(n,a)}_queryPortal(e,t,r,n){var a=Object(c.m)(O.a,t),o=t=>this._request(this.restUrl+e,Object(i.a)(Object(i.a)({},a.toRequestOptions(this)),n)).then((e=>{var r=a.clone();return r.start=e.nextStart,new S({nextQueryParams:r,queryParams:a,total:e.total,results:w._resultsToTypedArray(t,{portal:this},e,n)})})).then((e=>Promise.all(e.results.map((t=>"function"==typeof t.when?t.when():e))).then((()=>e),(t=>(Object(p.t)(t),e)))));return r&&T[r]?T[r]().then((({default:e})=>(Object(p.u)(n),o(e)))):o()}_signIn(){if(this.authMode===w.AUTH_MODE_ANONYMOUS)return Promise.reject(new h.a("portal:invalid-auth-mode",'Current "authMode"\' is "'.concat(this.authMode,'"')));if("failed"===this.loadStatus)return Promise.reject(this.loadError);var e=e=>Promise.resolve().then((()=>"not-loaded"===this.loadStatus?(e||(this.authMode="immediate"),this.load().then((()=>null))):"loading"===this.loadStatus?this.load().then((()=>this.credential?null:(this.credential=e,this._fetchSelf("immediate")))):this.user&&this.credential===e?null:(this.credential=e,this._fetchSelf("immediate")))).then((e=>{e&&(this.sourceJSON=e,this.read(e))}));return m.b?m.b.getCredential(this.restUrl).then((t=>e(t))):e(this.credential)}_normalizeSSL(e){return e.replace(/^http:/i,"https:").replace(":7080",":7443")}_normalizeUrl(e){var t=this.credential&&this.credential.token;return this._normalizeSSL(t?e+(e.indexOf("?")>-1?"&":"?")+"token="+t:e)}_requestToTypedArray(e,t,r){return this._request(e,t).then((e=>{var t=w._resultsToTypedArray(r,{portal:this},e);return Promise.all(t.map((t=>"function"==typeof t.when?t.when():e))).then((()=>t),(()=>t))}))}_request(e,t={}){var r=Object(i.a)({f:"json"},t.query),{authMode:n=(this.authMode===w.AUTH_MODE_ANONYMOUS?"anonymous":"auto"),body:a=null,cacheBust:o=!1,method:s="auto",responseType:c="json",signal:l}=t,u={authMode:n,body:a,cacheBust:o,method:s,query:r,responseType:c,timeout:0,signal:l};return Object(g.default)(this._normalizeSSL(e),u).then((e=>e.data))}static _resultsToTypedArray(e,t,r,i){var n;if(r){var a=Object(s.k)(i)?i.signal:null;n=r.listings||r.notifications||r.userInvitations||r.tags||r.items||r.groups||r.comments||r.provisions||r.results||r.relatedItems||r,(e||t)&&(n=n.map((r=>{var i=Object.assign(e?e.fromJSON(r):r,t);return"function"==typeof i.load&&i.load(a),i})))}else n=[];return n}};P.AUTH_MODE_ANONYMOUS="anonymous",P.AUTH_MODE_AUTO="auto",P.AUTH_MODE_IMMEDIATE="immediate",Object(a.a)([Object(l.b)()],P.prototype,"access",void 0),Object(a.a)([Object(l.b)()],P.prototype,"allSSL",void 0),Object(a.a)([Object(l.b)()],P.prototype,"authMode",void 0),Object(a.a)([Object(l.b)()],P.prototype,"authorizedCrossOriginDomains",void 0),Object(a.a)([Object(u.a)("authorizedCrossOriginDomains")],P.prototype,"readAuthorizedCrossOriginDomains",null),Object(a.a)([Object(l.b)()],P.prototype,"basemapGalleryGroupQuery",void 0),Object(a.a)([Object(l.b)()],P.prototype,"bingKey",void 0),Object(a.a)([Object(l.b)()],P.prototype,"canListApps",void 0),Object(a.a)([Object(l.b)()],P.prototype,"canListData",void 0),Object(a.a)([Object(l.b)()],P.prototype,"canListPreProvisionedItems",void 0),Object(a.a)([Object(l.b)()],P.prototype,"canProvisionDirectPurchase",void 0),Object(a.a)([Object(l.b)()],P.prototype,"canSearchPublic",void 0),Object(a.a)([Object(l.b)()],P.prototype,"canShareBingPublic",void 0),Object(a.a)([Object(l.b)()],P.prototype,"canSharePublic",void 0),Object(a.a)([Object(l.b)()],P.prototype,"canSignInArcGIS",void 0),Object(a.a)([Object(l.b)()],P.prototype,"canSignInIDP",void 0),Object(a.a)([Object(l.b)()],P.prototype,"colorSetsGroupQuery",void 0),Object(a.a)([Object(l.b)()],P.prototype,"commentsEnabled",void 0),Object(a.a)([Object(l.b)({type:Date})],P.prototype,"created",void 0),Object(a.a)([Object(l.b)()],P.prototype,"credential",void 0),Object(a.a)([Object(l.b)()],P.prototype,"culture",void 0),Object(a.a)([Object(l.b)()],P.prototype,"currentVersion",void 0),Object(a.a)([Object(l.b)()],P.prototype,"customBaseUrl",void 0),Object(a.a)([Object(l.b)()],P.prototype,"defaultBasemap",void 0),Object(a.a)([Object(u.a)("defaultBasemap")],P.prototype,"readDefaultBasemap",null),Object(a.a)([Object(l.b)({type:b.a})],P.prototype,"defaultExtent",void 0),Object(a.a)([Object(l.b)()],P.prototype,"defaultVectorBasemap",void 0),Object(a.a)([Object(u.a)("defaultVectorBasemap")],P.prototype,"readDefaultVectorBasemap",null),Object(a.a)([Object(l.b)()],P.prototype,"description",void 0),Object(a.a)([Object(l.b)()],P.prototype,"eueiEnabled",void 0),Object(a.a)([Object(l.b)({readOnly:!0})],P.prototype,"extraQuery",null),Object(a.a)([Object(l.b)()],P.prototype,"featuredGroups",void 0),Object(a.a)([Object(l.b)()],P.prototype,"featuredItemsGroupQuery",void 0),Object(a.a)([Object(l.b)()],P.prototype,"galleryTemplatesGroupQuery",void 0),Object(a.a)([Object(l.b)()],P.prototype,"livingAtlasGroupQuery",void 0),Object(a.a)([Object(l.b)()],P.prototype,"hasCategorySchema",void 0),Object(a.a)([Object(l.b)()],P.prototype,"helpBase",void 0),Object(a.a)([Object(l.b)()],P.prototype,"helperServices",void 0),Object(a.a)([Object(l.b)()],P.prototype,"helpMap",void 0),Object(a.a)([Object(l.b)()],P.prototype,"homePageFeaturedContent",void 0),Object(a.a)([Object(l.b)()],P.prototype,"homePageFeaturedContentCount",void 0),Object(a.a)([Object(l.b)()],P.prototype,"httpPort",void 0),Object(a.a)([Object(l.b)()],P.prototype,"httpsPort",void 0),Object(a.a)([Object(l.b)()],P.prototype,"id",void 0),Object(a.a)([Object(l.b)()],P.prototype,"ipCntryCode",void 0),Object(a.a)([Object(l.b)({readOnly:!0})],P.prototype,"isOrganization",null),Object(a.a)([Object(l.b)()],P.prototype,"isPortal",void 0),Object(a.a)([Object(l.b)()],P.prototype,"isReadOnly",void 0),Object(a.a)([Object(l.b)()],P.prototype,"layerTemplatesGroupQuery",void 0),Object(a.a)([Object(l.b)()],P.prototype,"maxTokenExpirationMinutes",void 0),Object(a.a)([Object(l.b)({type:Date})],P.prototype,"modified",void 0),Object(a.a)([Object(l.b)()],P.prototype,"name",void 0),Object(a.a)([Object(l.b)()],P.prototype,"portalHostname",void 0),Object(a.a)([Object(l.b)()],P.prototype,"portalMode",void 0),Object(a.a)([Object(l.b)()],P.prototype,"portalProperties",void 0),Object(a.a)([Object(l.b)()],P.prototype,"region",void 0),Object(a.a)([Object(l.b)({readOnly:!0})],P.prototype,"restUrl",null),Object(a.a)([Object(l.b)()],P.prototype,"rotatorPanels",void 0),Object(a.a)([Object(l.b)()],P.prototype,"showHomePageDescription",void 0),Object(a.a)([Object(l.b)()],P.prototype,"sourceJSON",void 0),Object(a.a)([Object(l.b)()],P.prototype,"staticImagesUrl",void 0),Object(a.a)([Object(l.b)()],P.prototype,"stylesGroupQuery",void 0),Object(a.a)([Object(l.b)()],P.prototype,"supportsHostedServices",void 0),Object(a.a)([Object(l.b)()],P.prototype,"symbolSetsGroupQuery",void 0),Object(a.a)([Object(l.b)()],P.prototype,"templatesGroupQuery",void 0),Object(a.a)([Object(l.b)()],P.prototype,"thumbnail",void 0),Object(a.a)([Object(l.b)({readOnly:!0})],P.prototype,"thumbnailUrl",null),Object(a.a)([Object(l.b)()],P.prototype,"units",void 0),Object(a.a)([Object(l.b)()],P.prototype,"url",void 0),Object(a.a)([Object(l.b)()],P.prototype,"urlKey",void 0),Object(a.a)([Object(u.a)("urlKey")],P.prototype,"readUrlKey",null),Object(a.a)([Object(l.b)()],P.prototype,"user",void 0),Object(a.a)([Object(u.a)("user")],P.prototype,"readUser",null),Object(a.a)([Object(l.b)()],P.prototype,"useStandardizedQuery",void 0),Object(a.a)([Object(l.b)()],P.prototype,"useVectorBasemaps",void 0),Object(a.a)([Object(l.b)()],P.prototype,"vectorBasemapGalleryGroupQuery",void 0);var E=P=w=Object(a.a)([Object(d.a)("esri.portal.Portal")],P);t.a=E},function(e,t,r){"use strict";r.d(t,"a",(function(){return d})),r.d(t,"b",(function(){return h}));var i=r(91),n=r(126),a=r(240),o=r(402);function s(e,t,r){if(!e||!e.read||!1===e.read.enabled||!e.read.source)return!1;var i=e.read.source;if("string"==typeof i){if(i===t)return!0;if(i.indexOf(".")>-1&&0===i.indexOf(t)&&Object(a.a)(i,r))return!0}else for(var n of i){if(n===t)return!0;if(n.indexOf(".")>-1&&0===n.indexOf(t)&&Object(a.a)(n,r))return!0}return!1}function c(e,t,r,i,n){var a=Object(o.c)(t[r],n);for(var c of(function(e){return e&&(!e.read||!1!==e.read.enabled&&!e.read.source)}(a)&&(e[r]=!0),Object.getOwnPropertyNames(t)))s(a=Object(o.c)(t[c],n),r,i)&&(e[c]=!0)}function l(e,t,r,i){var n=r.metadatas,a=Object(o.b)(n[t],"any",i),s=a&&a.default;if(void 0!==s){var c="function"==typeof s?s.call(e,t,i):s;void 0!==c&&r.set(t,c)}}var u={origin:"service"};function d(e,t,r=u){if(t&&"object"==typeof t){var i=Object(n.a)(e),s=i.metadatas,d={};for(var h of Object.getOwnPropertyNames(t))c(d,s,h,t,r);for(var p of(i.setDefaultOrigin(r.origin),Object.getOwnPropertyNames(d))){var f=Object(o.c)(s[p],r).read,b=f&&f.source,v=void 0;v=b&&"string"==typeof b?Object(a.c)(t,b):t[p],f&&f.reader&&(v=f.reader.call(e,v,t,r)),void 0!==v&&i.set(p,v)}if(!r||!r.ignoreDefaults)for(var m of Object.getOwnPropertyNames(s))d[m]||l(e,m,i,r);i.setDefaultOrigin("user")}}function h(e,t,r,n=u){var a,o=Object(i.a)(Object(i.a)({},n),{},{messages:[]});r(o),null==(a=o.messages)||a.forEach((t=>{"warning"!==t.type||e.loaded?n&&n.messages&&n.messages.push(t):e.loadWarnings.push(t)}))}},function(e,t,r){"use strict";r.d(t,"a",(function(){return a}));var i=r(81).a.getLogger("esri.views.3d.webgl-engine.core.shaderModules.shaderBuilder");class n{constructor(){this.includedModules=new Map}include(e,t){this.includedModules.has(e)?this.includedModules.get(e)!==t&&i.error("Trying to include shader module multiple times with different sets of options."):(this.includedModules.set(e,t),e(this.builder,t))}}class a extends n{constructor(){super(...arguments),this.vertex=new c,this.fragment=new c,this.attributes=new l,this.varyings=new u,this.extensions=new d,this.constants=new h}get builder(){return this}generateSource(e){var t=this.extensions.generateSource(e),r=this.attributes.generateSource(e),i=this.varyings.generateSource(),n="vertex"===e?this.vertex:this.fragment,a=n.uniforms.generateSource(),o=n.code.generateSource(),s="vertex"===e?f:p,c=this.constants.generateSource().concat(n.constants.generateSource());return"\n".concat(t.join("\n"),"\n\n").concat(s,"\n\n").concat(c.join("\n"),"\n\n").concat(a.join("\n"),"\n\n").concat(r.join("\n"),"\n\n").concat(i.join("\n"),"\n\n").concat(o.join("\n"))}}class o{constructor(){this._entries=new Array,this._set=new Set}add(e,t,r){var i="".concat(e,"_").concat(t,"_").concat(r);return this._set.has(i)||(this._entries.push([e,t,r]),this._set.add(i)),this}generateSource(){return this._entries.map((e=>"uniform ".concat(e[1]," ").concat(e[0]).concat((e=>e?"[".concat(e,"]"):"")(e[2]),";")))}}class s{constructor(){this._entries=new Array}add(e){this._entries.push(e)}generateSource(){return this._entries}}class c extends n{constructor(){super(...arguments),this.uniforms=new o,this.code=new s,this.constants=new h}get builder(){return this}}class l{constructor(){this._entries=new Array}add(e,t){this._entries.push([e,t])}generateSource(e){return"fragment"===e?[]:this._entries.map((e=>"attribute ".concat(e[1]," ").concat(e[0],";")))}}class u{constructor(){this._entries=new Array}add(e,t){this._entries.push([e,t])}generateSource(){return this._entries.map((e=>"varying ".concat(e[1]," ").concat(e[0],";")))}}class d{constructor(){this._entries=new Set}add(e){this._entries.add(e)}generateSource(e){var t="vertex"===e?d.ALLOWLIST_VERTEX:d.ALLOWLIST_FRAGMENT;return Array.from(this._entries).filter((e=>t.includes(e))).map((e=>"#extension ".concat(e," : enable")))}}d.ALLOWLIST_FRAGMENT=["GL_EXT_shader_texture_lod","GL_OES_standard_derivatives"],d.ALLOWLIST_VERTEX=[];class h{constructor(){this._entries=[]}add(e,t,r){var i="ERROR_CONSTRUCTOR_STRING";switch(t){case"float":i=h.numberToFloatStr(r);break;case"int":i=h.numberToIntStr(r);break;case"bool":i=r.toString();break;case"vec2":i="vec2(".concat(h.numberToFloatStr(r[0]),",                            ").concat(h.numberToFloatStr(r[1]),")");break;case"vec3":i="vec3(".concat(h.numberToFloatStr(r[0]),",                            ").concat(h.numberToFloatStr(r[1]),",                            ").concat(h.numberToFloatStr(r[2]),")");break;case"vec4":i="vec4(".concat(h.numberToFloatStr(r[0]),",                            ").concat(h.numberToFloatStr(r[1]),",                            ").concat(h.numberToFloatStr(r[2]),",                            ").concat(h.numberToFloatStr(r[3]),")");break;case"ivec2":i="ivec2(".concat(h.numberToIntStr(r[0]),",                             ").concat(h.numberToIntStr(r[1]),")");break;case"ivec3":i="ivec3(".concat(h.numberToIntStr(r[0]),",                             ").concat(h.numberToIntStr(r[1]),",                             ").concat(h.numberToIntStr(r[2]),")");break;case"ivec4":i="ivec4(".concat(h.numberToIntStr(r[0]),",                             ").concat(h.numberToIntStr(r[1]),",                             ").concat(h.numberToIntStr(r[2]),",                             ").concat(h.numberToIntStr(r[3]),")");break;case"bvec2":i="bvec2(".concat(r[0].toString(),",                             ").concat(r[1].toString(),")");break;case"bvec3":i="bvec3(".concat(r[0].toString(),",                             ").concat(r[1].toString(),",                             ").concat(r[2].toString(),")");break;case"bvec4":i="bvec4(".concat(r[0].toString(),",                             ").concat(r[1].toString(),",                             ").concat(r[2].toString(),",                             ").concat(r[3].toString(),")");break;case"mat2":case"mat3":case"mat4":i="".concat(t,"(").concat(Array.prototype.map.call(r,(e=>h.numberToFloatStr(e))).join(", "),")")}return this._entries.push("const ".concat(t," ").concat(e," = ").concat(i,";")),this}static numberToIntStr(e){return e.toFixed(0)}static numberToFloatStr(e){return Number.isInteger(e)?e.toFixed(1):e.toString()}generateSource(){return Array.from(this._entries)}}var p="#ifdef GL_FRAGMENT_PRECISION_HIGH\n  precision highp float;\n  precision highp sampler2D;\n#else\n  precision mediump float;\n  precision mediump sampler2D;\n#endif",f="precision highp float;\nprecision highp sampler2D;"},function(e,t,r){"use strict";r.d(t,"a",(function(){return C})),r.d(t,"b",(function(){return k})),r.d(t,"c",(function(){return R})),r.d(t,"d",(function(){return A})),r.d(t,"e",(function(){return E})),r.d(t,"f",(function(){return I})),r.d(t,"g",(function(){return F})),r.d(t,"h",(function(){return D}));var i=r(347),n=r(111),a=r(177);function o(e=c){return[e[0],e[1],e[2],e[3]]}function s(e,t,r,i,n=o()){return n[0]=e,n[1]=t,n[2]=r,n[3]=i,n}var c=[0,0,1,0],l=(Object.freeze({__proto__:null,create:o,wrap:function(e,t,r,i){return s(e,t,r,i,a.e.get())},wrapAxisAngle:function(e,t){return s(e[0],e[1],e[2],t,a.e.get())},copy:function(e,t=o()){return s(e[0],e[1],e[2],e[3],t)},fromValues:s,fromAxisAndAngle:function(e,t,r=o()){return Object(n.j)(r,e),r[3]=t,r},fromPoints:function(e,t,r=o()){return Object(n.f)(r,e,t),Object(n.q)(r,r),r[3]=Object(i.a)(e,t),r},axis:function(e){return e},UP:c}),r(424)),u=r(374),d=r(398),h=r(425),p=r(549),f=r(467),b=r(104),v=r(157),m=r(299),g=r(200),y=r(191);function O(e){return e?[Object(h.c)(e[0]),Object(h.c)(e[1]),Object(h.c)(e[2]),Object(h.c)(e[3]),Object(h.c)(e[4]),Object(h.c)(e[5])]:[Object(h.c)(),Object(h.c)(),Object(h.c)(),Object(h.c)(),Object(h.c)(),Object(h.c)()]}function j(){return[Object(b.e)(),Object(b.e)(),Object(b.e)(),Object(b.e)(),Object(b.e)(),Object(b.e)(),Object(b.e)(),Object(b.e)()]}function _(e,t){Object(h.j)(t[4],t[0],t[3],e[0]),Object(h.j)(t[1],t[5],t[6],e[1]),Object(h.j)(t[4],t[5],t[1],e[2]),Object(h.j)(t[3],t[2],t[6],e[3]),Object(h.j)(t[0],t[1],t[2],e[4]),Object(h.j)(t[5],t[4],t[7],e[5])}function w(e,t){for(var r=0;r<6;r++)if(!Object(h.q)(e[r],t))return!1;return!0}var x=[Object(g.d)(-1,-1,-1,1),Object(g.d)(1,-1,-1,1),Object(g.d)(1,1,-1,1),Object(g.d)(-1,1,-1,1),Object(g.d)(-1,-1,1,1),Object(g.d)(1,-1,1,1),Object(g.d)(1,1,1,1),Object(g.d)(-1,1,1,1)],S=new m.a(f.b),M=j(),T=Object.freeze({__proto__:null,create:O,createPoints:j,copy:function(e,t=O()){for(var r=0;r<6;r++)Object(h.a)(e[r],t[r])},fromMatrix:function(e,t,r,i=M){var o=Object(v.l)(a.a.get(),t,e);Object(v.a)(o,o);for(var s=0;s<8;++s){var c=Object(y.m)(a.e.get(),x[s],o);Object(n.v)(i[s],c[0]/c[3],c[1]/c[3],c[2]/c[3])}_(r,i)},computePlanes:_,intersectsSphere:function(e,t){for(var r=0;r<6;r++)if(Object(h.k)(e[r],t))return!1;return!0},intersectsRay:function(e,t){return w(e,Object(f.e)(t,S.get()))},intersectClipRay:function(e,t){for(var r=0;r<6;r++){var i=e[r];if(!Object(h.l)(i,t))return!1}return!0},intersectsLineSegment:function(e,t,r){return w(e,Object(f.a)(t,r,S.get()))},intersectsPoint:function(e,t){for(var r=0;r<6;r++)if(Object(h.m)(e[r],t)>0)return!1;return!0},intersectsAABB:function(e,t){for(var r=0;r<6;r++)if(Object(h.o)(e[r],t))return!1;return!0},planePointIndices:{bottom:[5,1,0,4],near:[0,1,2,3],far:[5,4,7,6],right:[1,5,6,2],left:[4,0,3,7],top:[7,3,2,6]}}),P=r(505),E=h.h,C=p.a,A=(P.b,l.d),I=u.g,k=f.c,F=d.d,R=T,D=i.d},function(e,t,r){"use strict";r.d(t,"a",(function(){return g})),r.d(t,"b",(function(){return y})),r.d(t,"c",(function(){return m}));var i=r(91),n=r(95),a=r(148),o={year:"numeric",month:"numeric",day:"numeric"},s={year:"numeric",month:"long",day:"numeric"},c={year:"numeric",month:"short",day:"numeric"},l={year:"numeric",month:"long",weekday:"long",day:"numeric"},u={hour:"numeric",minute:"numeric"},d=Object(i.a)(Object(i.a)({},u),{},{second:"numeric"}),h={"short-date":o,"short-date-short-time":Object(i.a)(Object(i.a)({},o),u),"short-date-short-time-24":Object(i.a)(Object(i.a)(Object(i.a)({},o),u),{},{hour12:!1}),"short-date-long-time":Object(i.a)(Object(i.a)({},o),d),"short-date-long-time-24":Object(i.a)(Object(i.a)(Object(i.a)({},o),d),{},{hour12:!1}),"short-date-le":o,"short-date-le-short-time":Object(i.a)(Object(i.a)({},o),u),"short-date-le-short-time-24":Object(i.a)(Object(i.a)(Object(i.a)({},o),u),{},{hour12:!1}),"short-date-le-long-time":Object(i.a)(Object(i.a)({},o),d),"short-date-le-long-time-24":Object(i.a)(Object(i.a)(Object(i.a)({},o),d),{},{hour12:!1}),"long-month-day-year":s,"long-month-day-year-short-time":Object(i.a)(Object(i.a)({},s),u),"long-month-day-year-short-time-24":Object(i.a)(Object(i.a)(Object(i.a)({},s),u),{},{hour12:!1}),"long-month-day-year-long-time":Object(i.a)(Object(i.a)({},s),d),"long-month-day-year-long-time-24":Object(i.a)(Object(i.a)(Object(i.a)({},s),d),{},{hour12:!1}),"day-short-month-year":c,"day-short-month-year-short-time":Object(i.a)(Object(i.a)({},c),u),"day-short-month-year-short-time-24":Object(i.a)(Object(i.a)(Object(i.a)({},c),u),{},{hour12:!1}),"day-short-month-year-long-time":Object(i.a)(Object(i.a)({},c),d),"day-short-month-year-long-time-24":Object(i.a)(Object(i.a)(Object(i.a)({},c),d),{},{hour12:!1}),"long-date":l,"long-date-short-time":Object(i.a)(Object(i.a)({},l),u),"long-date-short-time-24":Object(i.a)(Object(i.a)(Object(i.a)({},l),u),{},{hour12:!1}),"long-date-long-time":Object(i.a)(Object(i.a)({},l),d),"long-date-long-time-24":Object(i.a)(Object(i.a)(Object(i.a)({},l),d),{},{hour12:!1}),"long-month-year":{month:"long",year:"numeric"},"short-month-year":{month:"short",year:"numeric"},year:{year:"numeric"},"short-time":u,"long-time":d},p=Object(n.b)()({shortDate:"short-date",shortDateShortTime:"short-date-short-time",shortDateShortTime24:"short-date-short-time-24",shortDateLongTime:"short-date-long-time",shortDateLongTime24:"short-date-long-time-24",shortDateLE:"short-date-le",shortDateLEShortTime:"short-date-le-short-time",shortDateLEShortTime24:"short-date-le-short-time-24",shortDateLELongTime:"short-date-le-long-time",shortDateLELongTime24:"short-date-le-long-time-24",longMonthDayYear:"long-month-day-year",longMonthDayYearShortTime:"long-month-day-year-short-time",longMonthDayYearShortTime24:"long-month-day-year-short-time-24",longMonthDayYearLongTime:"long-month-day-year-long-time",longMonthDayYearLongTime24:"long-month-day-year-long-time-24",dayShortMonthYear:"day-short-month-year",dayShortMonthYearShortTime:"day-short-month-year-short-time",dayShortMonthYearShortTime24:"day-short-month-year-short-time-24",dayShortMonthYearLongTime:"day-short-month-year-long-time",dayShortMonthYearLongTime24:"day-short-month-year-long-time-24",longDate:"long-date",longDateShortTime:"long-date-short-time",longDateShortTime24:"long-date-short-time-24",longDateLongTime:"long-date-long-time",longDateLongTime24:"long-date-long-time-24",longMonthYear:"long-month-year",shortMonthYear:"short-month-year",year:"year"}),f=(p.apiValues,p.toJSON.bind(p),p.fromJSON.bind(p),{ar:"ar-u-nu-latn-ca-gregory"}),b=new WeakMap,v=h["short-date-short-time"];function m(e){var t=e||v;if(!b.has(t)){var r=Object(a.b)(),i=f[Object(a.b)()]||r;b.set(t,new Intl.DateTimeFormat(i,t))}return b.get(t)}function g(e){return h[e]||null}function y(e,t){return m(t).format(e)}Object(a.a)((()=>{b=new WeakMap,v=h["short-date-short-time"]}))},function(e,t,r){"use strict";var i,n={values:[1,.3048,.3048006096012192,.3047972654,.9143917962,.201166195164,.9143984146160287,.3047994715386762,20.11676512155263,20.11678249437587,.9143985307444408,.91439523,.3047997101815088,20.116756,5e4,15e4],units:["Meter","Foot","Foot_US","Foot_Clarke","Yard_Clarke","Link_Clarke","Yard_Sears","Foot_Sears","Chain_Sears","Chain_Benoit_1895_B","Yard_Indian","Yard_Indian_1937","Foot_Gold_Coast","Chain_Sears_1922_Truncated","50_Kilometers","150_Kilometers"],2066:5,2136:12,2155:2,2157:0,2158:0,2159:12,2160:12,2204:2,2219:0,2220:0,2254:2,2255:2,2256:1,2265:1,2266:1,2267:2,2268:2,2269:1,2270:1,2271:2,2272:2,2273:1,2294:0,2295:0,2314:3,2899:2,2900:2,2901:1,2909:1,2910:1,2911:2,2912:2,2913:1,2914:1,2992:1,2993:0,2994:1,3080:1,3089:2,3090:0,3091:2,3102:2,3141:0,3142:0,3167:13,3359:2,3360:0,3361:1,3362:0,3363:2,3364:0,3365:2,3366:3,3404:2,3405:0,3406:0,3407:3,3439:0,3440:0,3479:1,3480:0,3481:1,3482:0,3483:1,3484:0,3485:2,3486:0,3487:2,3488:0,3489:0,3490:2,3491:0,3492:2,3493:0,3494:2,3495:0,3496:2,3497:0,3498:2,3499:0,3500:2,3501:0,3502:2,3503:0,3504:2,3505:0,3506:2,3507:0,3508:2,3509:0,3510:2,3511:0,3512:2,3513:0,3514:0,3515:2,3516:0,3517:2,3518:0,3519:2,3520:0,3521:2,3522:0,3523:2,3524:0,3525:2,3526:0,3527:2,3528:0,3529:2,3530:0,3531:2,3532:0,3533:2,3534:0,3535:2,3536:0,3537:2,3538:0,3539:2,3540:0,3541:2,3542:0,3543:2,3544:0,3545:2,3546:0,3547:2,3548:0,3549:2,3550:0,3551:2,3552:0,3553:2,3582:2,3583:0,3584:2,3585:0,3586:2,3587:0,3588:1,3589:0,3590:1,3591:0,3592:0,3593:1,3598:2,3599:0,3600:2,3605:1,3606:0,3607:0,3608:2,3609:0,3610:2,3611:0,3612:2,3613:0,3614:2,3615:0,3616:2,3617:0,3618:2,3619:0,3620:2,3621:0,3622:2,3623:0,3624:2,3625:0,3626:2,3627:0,3628:2,3629:0,3630:2,3631:0,3632:2,3633:0,3634:1,3635:0,3636:1,3640:2,3641:0,3642:2,3643:0,3644:1,3645:0,3646:1,3647:0,3648:1,3649:0,3650:2,3651:0,3652:2,3653:0,3654:2,3655:0,3656:1,3657:0,3658:2,3659:0,3660:2,3661:0,3662:2,3663:0,3664:2,3668:2,3669:0,3670:2,3671:0,3672:2,3673:0,3674:2,3675:0,3676:1,3677:2,3678:0,3679:1,3680:2,3681:0,3682:1,3683:2,3684:0,3685:0,3686:2,3687:0,3688:2,3689:0,3690:2,3691:0,3692:2,3696:2,3697:0,3698:2,3699:0,3700:2,3793:0,3794:0,3812:0,3854:0,3857:0,3920:0,3978:0,3979:0,3991:2,3992:2,4026:0,4037:0,4038:0,4071:0,4082:0,4083:0,4087:0,4088:0,4217:2,4414:0,4415:0,4417:0,4434:0,4437:0,4438:2,4439:2,4462:0,4467:0,4471:0,4474:0,4559:0,4647:0,4822:0,4826:0,4839:0,5018:0,5048:0,5167:0,5168:0,5221:0,5223:0,5234:0,5235:0,5243:0,5247:0,5266:0,5316:0,5320:0,5321:0,5325:0,5337:0,5361:0,5362:0,5367:0,5382:0,5383:0,5396:0,5456:0,5457:0,5469:0,5472:4,5490:0,5513:0,5514:0,5523:0,5559:0,5588:1,5589:3,5596:0,5627:0,5629:0,5641:0,5643:0,5644:0,5646:2,5654:2,5655:2,5659:0,5700:0,5825:0,5836:0,5837:0,5839:0,5842:0,5844:0,5858:0,5879:0,5880:0,5887:0,5890:0,6128:1,6129:1,6141:1,6204:0,6210:0,6211:0,6307:0,6312:0,6316:0,6362:0,6391:1,6405:1,6406:0,6407:1,6408:0,6409:1,6410:0,6411:2,6412:0,6413:2,6414:0,6415:0,6416:2,6417:0,6418:2,6419:0,6420:2,6421:0,6422:2,6423:0,6424:2,6425:0,6426:2,6427:0,6428:2,6429:0,6430:2,6431:0,6432:2,6433:0,6434:2,6435:0,6436:2,6437:0,6438:2,6439:0,6440:0,6441:2,6442:0,6443:2,6444:0,6445:2,6446:0,6447:2,6448:0,6449:2,6450:0,6451:2,6452:0,6453:2,6454:0,6455:2,6456:0,6457:2,6458:0,6459:2,6460:0,6461:2,6462:0,6463:2,6464:0,6465:2,6466:0,6467:2,6468:0,6469:2,6470:0,6471:2,6472:0,6473:2,6474:0,6475:2,6476:0,6477:2,6478:0,6479:2,6484:2,6485:0,6486:2,6487:0,6488:2,6489:0,6490:2,6491:0,6492:2,6493:0,6494:1,6495:0,6496:1,6497:0,6498:0,6499:1,6500:0,6501:2,6502:0,6503:2,6504:0,6505:2,6506:0,6507:2,6508:0,6509:0,6510:2,6515:1,6516:0,6518:0,6519:2,6520:0,6521:2,6522:0,6523:2,6524:0,6525:2,6526:0,6527:2,6528:0,6529:2,6530:0,6531:2,6532:0,6533:2,6534:0,6535:2,6536:0,6537:2,6538:0,6539:2,6540:0,6541:2,6542:0,6543:2,6544:0,6545:1,6546:0,6547:1,6548:0,6549:2,6550:0,6551:2,6552:0,6553:2,6554:0,6555:2,6556:0,6557:1,6558:0,6559:1,6560:0,6561:1,6562:0,6563:2,6564:0,6565:2,6566:0,6567:0,6568:2,6569:0,6570:1,6571:0,6572:2,6573:0,6574:2,6575:0,6576:2,6577:0,6578:2,6582:2,6583:0,6584:2,6585:0,6586:2,6587:0,6588:2,6589:0,6590:2,6591:0,6592:0,6593:2,6594:0,6595:2,6596:0,6597:2,6598:0,6599:2,6600:0,6601:2,6602:0,6603:2,6605:2,6606:0,6607:2,6608:0,6609:2,6610:0,6611:0,6612:2,6613:0,6614:2,6615:0,6616:2,6617:0,6618:2,6633:2,6646:0,6703:0,6784:0,6785:1,6786:0,6787:1,6788:0,6789:1,6790:0,6791:1,6792:0,6793:1,6794:0,6795:1,6796:0,6797:1,6798:0,6799:1,6800:0,6801:1,6802:0,6803:1,6804:0,6805:1,6806:0,6807:1,6808:0,6809:1,6810:0,6811:1,6812:0,6813:1,6814:0,6815:1,6816:0,6817:1,6818:0,6819:1,6820:0,6821:1,6822:0,6823:1,6824:0,6825:1,6826:0,6827:1,6828:0,6829:1,6830:0,6831:1,6832:0,6833:1,6834:0,6835:1,6836:0,6837:1,6838:0,6839:1,6840:0,6841:1,6842:0,6843:1,6844:0,6845:1,6846:0,6847:1,6848:0,6849:1,6850:0,6851:1,6852:0,6853:1,6854:0,6855:1,6856:0,6857:1,6858:0,6859:1,6860:0,6861:1,6862:0,6863:1,6867:0,6868:1,6870:0,6875:0,6876:0,6879:0,6880:2,6884:0,6885:1,6886:0,6887:1,6915:0,6922:0,6923:2,6924:0,6925:2,6962:0,6984:0,6991:0,7128:2,7131:0,7132:2,7142:0,7257:0,7258:2,7259:0,7260:2,7261:0,7262:2,7263:0,7264:2,7265:0,7266:2,7267:0,7268:2,7269:0,7270:2,7271:0,7272:2,7273:0,7274:2,7275:0,7276:2,7277:0,7278:2,7279:0,7280:2,7281:0,7282:2,7283:0,7284:2,7285:0,7286:2,7287:0,7288:2,7289:0,7290:2,7291:0,7292:2,7293:0,7294:2,7295:0,7296:2,7297:0,7298:2,7299:0,7300:2,7301:0,7302:2,7303:0,7304:2,7305:0,7306:2,7307:0,7308:2,7309:0,7310:2,7311:0,7312:2,7313:0,7314:2,7315:0,7316:2,7317:0,7318:2,7319:0,7320:2,7321:0,7322:2,7323:0,7324:2,7325:0,7326:2,7327:0,7328:2,7329:0,7330:2,7331:0,7332:2,7333:0,7334:2,7335:0,7336:2,7337:0,7338:2,7339:0,7340:2,7341:0,7342:2,7343:0,7344:2,7345:0,7346:2,7347:0,7348:2,7349:0,7350:2,7351:0,7352:2,7353:0,7354:2,7355:0,7356:2,7357:0,7358:2,7359:0,7360:2,7361:0,7362:2,7363:0,7364:2,7365:0,7366:2,7367:0,7368:2,7369:0,7370:2,7877:0,7878:0,7882:0,7883:0,7887:0,7899:0,7991:0,7992:0,8035:2,8036:2,8058:0,8059:0,8082:0,8083:0,8088:0,8090:0,8091:2,8092:0,8093:2,8095:0,8096:2,8097:0,8098:2,8099:0,8100:2,8101:0,8102:2,8103:0,8104:2,8105:0,8106:2,8107:0,8108:2,8109:0,8110:2,8111:0,8112:2,8113:0,8114:2,8115:0,8116:2,8117:0,8118:2,8119:0,8120:2,8121:0,8122:2,8123:0,8124:2,8125:0,8126:2,8127:0,8128:2,8129:0,8130:2,8131:0,8132:2,8133:0,8134:2,8135:0,8136:2,8137:0,8138:2,8139:0,8140:2,8141:0,8142:2,8143:0,8144:2,8145:0,8146:2,8147:0,8148:2,8149:0,8150:2,8151:0,8152:2,8153:0,8154:2,8155:0,8156:2,8157:0,8158:2,8159:0,8160:2,8161:0,8162:2,8163:0,8164:2,8165:0,8166:2,8167:0,8168:2,8169:0,8170:2,8171:0,8172:2,8173:0,8177:2,8179:0,8180:2,8181:0,8182:2,8184:0,8185:2,8187:0,8189:2,8191:0,8193:2,8196:0,8197:2,8198:0,8200:2,8201:0,8202:2,8203:0,8204:2,8205:0,8206:2,8207:0,8208:2,8209:0,8210:2,8212:0,8213:2,8214:0,8216:2,8218:0,8220:2,8222:0,8224:2,8225:0,8226:2,8311:0,8312:1,8313:0,8314:1,8315:0,8316:1,8317:0,8318:1,8319:0,8320:1,8321:0,8322:1,8323:0,8324:1,8325:0,8326:1,8327:0,8328:1,8329:0,8330:1,8331:0,8332:1,8333:0,8334:1,8335:0,8336:1,8337:0,8338:1,8339:0,8340:1,8341:0,8342:1,8343:0,8344:1,8345:0,8346:1,8347:0,8348:1,8352:0,8353:0,8379:0,8380:2,8381:0,8382:2,8383:0,8384:2,8385:0,8387:2,8391:0,8395:0,8433:0,8441:0,8455:0,8456:0,8531:2,8682:0,8686:0,8687:0,8692:0,8693:0,8826:0,8903:0,8950:0,8951:0,9039:0,9040:0,9141:0,9149:0,9150:0,9191:0,9221:0,9222:0,9249:0,9250:0,9252:0,9254:0,9265:0,9284:0,9285:0,9367:0,20499:0,20538:0,20539:0,20790:0,20791:0,21291:0,21292:0,21500:0,21817:0,21818:0,22032:0,22033:0,22091:0,22092:0,22332:0,22391:0,22392:0,22700:0,22770:0,22780:0,22832:0,23090:0,23095:0,23239:0,23240:0,23433:0,23700:0,24047:0,24048:0,24100:3,24200:0,24305:0,24306:0,24382:10,24383:0,24500:0,24547:0,24548:0,24571:9,24600:0,25e3:0,25231:0,25884:0,25932:0,26237:0,26331:0,26332:0,26432:0,26591:0,26592:0,26632:0,26692:0,27120:0,27200:0,27291:6,27292:6,27429:0,27492:0,27493:0,27500:0,27700:0,28232:0,28600:0,28991:0,28992:0,29100:0,29101:0,29220:0,29221:0,29333:0,29635:0,29636:0,29701:0,29738:0,29739:0,29849:0,29850:0,29871:8,29872:7,29873:0,30200:5,30339:0,30340:0,30591:0,30592:0,30791:0,30792:0,30800:0,31028:0,31121:0,31154:0,31170:0,31171:0,31370:0,31528:0,31529:0,31600:0,31700:0,31838:0,31839:0,31900:0,31901:0,32061:0,32062:0,32098:0,32099:2,32100:0,32104:0,32161:0,32766:0,53048:0,53049:0,54090:0,54091:0,65061:2,65062:2,65161:0,65163:0,102041:2,102064:11,102068:14,102069:15,102118:2,102119:1,102120:2,102121:2,102217:2,102218:0,102219:2,102220:2,102378:1,102379:1,102380:0,102381:1,102589:2,102599:2,102600:2,102604:2,102647:0,102704:2,102705:2,102706:0,102761:2,102762:0,102763:2,102764:0,102765:0,102766:2,102962:0,102963:0,102970:1,102974:2,102993:0,102994:0,102995:2,102996:2,103015:0,103016:2,103017:0,103018:2,103025:0,103026:0,103027:2,103028:2,103035:0,103036:0,103037:2,103038:2,103039:0,103040:0,103041:2,103042:2,103043:0,103044:0,103045:2,103046:2,103047:0,103048:0,103049:2,103050:2,103051:0,103052:2,103053:0,103054:2,103055:0,103056:2,103057:0,103058:0,103059:2,103060:2,103061:0,103062:0,103063:2,103064:2,103069:2,103070:0,103071:0,103072:2,103073:2,103086:0,103087:0,103088:2,103089:2,103094:1,103095:0,103096:2,103103:0,103104:2,103105:0,103106:2,103121:0,103122:2,103123:0,103124:0,103125:1,103126:1,103127:0,103128:0,103129:2,103130:2,103131:0,103132:0,103133:2,103134:2,103135:0,103136:0,103137:1,103138:1,103139:0,103140:2,103141:0,103142:2,103143:0,103144:2,103145:0,103146:1,103147:0,103148:0,103149:2,103150:2,103151:0,103152:2,103172:0,103173:2,103174:0,103175:0,103176:2,103177:2,103178:0,103179:0,103180:2,103181:2,103182:0,103183:0,103184:2,103185:2,103228:0,103229:0,103230:2,103231:2,103250:0,103251:2,103252:0,103253:2,103260:0,103261:0,103262:2,103263:2,103270:0,103271:0,103272:2,103273:2,103274:0,103275:0,103276:2,103277:2,103278:0,103279:0,103280:2,103281:2,103282:0,103283:0,103284:2,103285:2,103286:0,103287:2,103288:0,103289:2,103290:0,103291:2,103292:0,103293:0,103294:2,103295:2,103296:0,103297:0,103298:2,103299:2,103376:2,103377:0,103378:0,103379:2,103380:2,103393:0,103394:0,103395:2,103396:2,103472:0,103473:1,103474:0,103475:2,103482:0,103483:2,103484:0,103485:2,103500:0,103501:2,103502:0,103503:0,103504:1,103505:1,103506:0,103507:0,103508:2,103509:2,103510:0,103511:0,103512:2,103513:2,103514:0,103515:2,103516:0,103517:2,103518:0,103519:2,103520:0,103521:1,103522:0,103523:0,103524:2,103525:2,103526:0,103527:2,103561:2,103562:2,103563:0,103564:0,103565:2,103566:2,103567:0,103568:0,103569:2,103570:2,103584:0,103585:2,103586:0,103587:2,103588:1,103589:0,103590:2,103591:1,103592:0,103593:2,103594:1,103695:2};for(i=2e3;i<=2045;i++)n[i]=0;for(i=2056;i<=2065;i++)n[i]=0;for(i=2067;i<=2135;i++)n[i]=0;for(i=2137;i<=2154;i++)n[i]=0;for(i=2161;i<=2170;i++)n[i]=0;for(i=2172;i<=2193;i++)n[i]=0;for(i=2195;i<=2198;i++)n[i]=0;for(i=2200;i<=2203;i++)n[i]=0;for(i=2205;i<=2217;i++)n[i]=0;for(i=2222;i<=2224;i++)n[i]=1;for(i=2225;i<=2250;i++)n[i]=2;for(i=2251;i<=2253;i++)n[i]=1;for(i=2257;i<=2264;i++)n[i]=2;for(i=2274;i<=2279;i++)n[i]=2;for(i=2280;i<=2282;i++)n[i]=1;for(i=2283;i<=2289;i++)n[i]=2;for(i=2290;i<=2292;i++)n[i]=0;for(i=2308;i<=2313;i++)n[i]=0;for(i=2315;i<=2491;i++)n[i]=0;for(i=2494;i<=2866;i++)n[i]=0;for(i=2867;i<=2869;i++)n[i]=1;for(i=2870;i<=2888;i++)n[i]=2;for(i=2891;i<=2895;i++)n[i]=2;for(i=2896;i<=2898;i++)n[i]=1;for(i=2902;i<=2908;i++)n[i]=2;for(i=2915;i<=2920;i++)n[i]=2;for(i=2921;i<=2923;i++)n[i]=1;for(i=2924;i<=2930;i++)n[i]=2;for(i=2931;i<=2962;i++)n[i]=0;for(i=2964;i<=2968;i++)n[i]=2;for(i=2969;i<=2973;i++)n[i]=0;for(i=2975;i<=2991;i++)n[i]=0;for(i=2995;i<=3051;i++)n[i]=0;for(i=3054;i<=3079;i++)n[i]=0;for(i=3081;i<=3088;i++)n[i]=0;for(i=3092;i<=3101;i++)n[i]=0;for(i=3106;i<=3138;i++)n[i]=0;for(i=3146;i<=3151;i++)n[i]=0;for(i=3153;i<=3166;i++)n[i]=0;for(i=3168;i<=3172;i++)n[i]=0;for(i=3174;i<=3203;i++)n[i]=0;for(i=3294;i<=3358;i++)n[i]=0;for(i=3367;i<=3403;i++)n[i]=0;for(i=3408;i<=3416;i++)n[i]=0;for(i=3417;i<=3438;i++)n[i]=2;for(i=3441;i<=3446;i++)n[i]=2;for(i=3447;i<=3450;i++)n[i]=0;for(i=3451;i<=3459;i++)n[i]=2;for(i=3460;i<=3478;i++)n[i]=0;for(i=3554;i<=3559;i++)n[i]=0;for(i=3560;i<=3570;i++)n[i]=2;for(i=3571;i<=3581;i++)n[i]=0;for(i=3594;i<=3597;i++)n[i]=0;for(i=3601;i<=3604;i++)n[i]=0;for(i=3637;i<=3639;i++)n[i]=0;for(i=3665;i<=3667;i++)n[i]=0;for(i=3693;i<=3695;i++)n[i]=0;for(i=3701;i<=3727;i++)n[i]=0;for(i=3728;i<=3739;i++)n[i]=2;for(i=3740;i<=3751;i++)n[i]=0;for(i=3753;i<=3760;i++)n[i]=2;for(i=3761;i<=3773;i++)n[i]=0;for(i=3775;i<=3777;i++)n[i]=0;for(i=3779;i<=3781;i++)n[i]=0;for(i=3783;i<=3785;i++)n[i]=0;for(i=3788;i<=3791;i++)n[i]=0;for(i=3797;i<=3802;i++)n[i]=0;for(i=3814;i<=3816;i++)n[i]=0;for(i=3825;i<=3829;i++)n[i]=0;for(i=3832;i<=3841;i++)n[i]=0;for(i=3844;i<=3852;i++)n[i]=0;for(i=3873;i<=3885;i++)n[i]=0;for(i=3890;i<=3893;i++)n[i]=0;for(i=3907;i<=3912;i++)n[i]=0;for(i=3942;i<=3950;i++)n[i]=0;for(i=3968;i<=3970;i++)n[i]=0;for(i=3973;i<=3976;i++)n[i]=0;for(i=3986;i<=3989;i++)n[i]=0;for(i=3994;i<=3997;i++)n[i]=0;for(i=4048;i<=4051;i++)n[i]=0;for(i=4056;i<=4063;i++)n[i]=0;for(i=4093;i<=4096;i++)n[i]=0;for(i=4390;i<=4398;i++)n[i]=0;for(i=4399;i<=4413;i++)n[i]=2;for(i=4418;i<=4433;i++)n[i]=2;for(i=4455;i<=4457;i++)n[i]=2;for(i=4484;i<=4489;i++)n[i]=0;for(i=4491;i<=4554;i++)n[i]=0;for(i=4568;i<=4589;i++)n[i]=0;for(i=4652;i<=4656;i++)n[i]=0;for(i=4766;i<=4800;i++)n[i]=0;for(i=5014;i<=5016;i++)n[i]=0;for(i=5069;i<=5072;i++)n[i]=0;for(i=5105;i<=5130;i++)n[i]=0;for(i=5173;i<=5188;i++)n[i]=0;for(i=5253;i<=5259;i++)n[i]=0;for(i=5269;i<=5275;i++)n[i]=0;for(i=5292;i<=5311;i++)n[i]=0;for(i=5329;i<=5331;i++)n[i]=0;for(i=5343;i<=5349;i++)n[i]=0;for(i=5355;i<=5357;i++)n[i]=0;for(i=5387;i<=5389;i++)n[i]=0;for(i=5459;i<=5463;i++)n[i]=0;for(i=5479;i<=5482;i++)n[i]=0;for(i=5518;i<=5520;i++)n[i]=0;for(i=5530;i<=5539;i++)n[i]=0;for(i=5550;i<=5552;i++)n[i]=0;for(i=5562;i<=5583;i++)n[i]=0;for(i=5623;i<=5625;i++)n[i]=2;for(i=5631;i<=5639;i++)n[i]=0;for(i=5649;i<=5653;i++)n[i]=0;for(i=5663;i<=5680;i++)n[i]=0;for(i=5682;i<=5685;i++)n[i]=0;for(i=5875;i<=5877;i++)n[i]=0;for(i=5896;i<=5899;i++)n[i]=0;for(i=5921;i<=5940;i++)n[i]=0;for(i=6050;i<=6125;i++)n[i]=0;for(i=6244;i<=6275;i++)n[i]=0;for(i=6328;i<=6348;i++)n[i]=0;for(i=6350;i<=6356;i++)n[i]=0;for(i=6366;i<=6372;i++)n[i]=0;for(i=6381;i<=6387;i++)n[i]=0;for(i=6393;i<=6404;i++)n[i]=0;for(i=6480;i<=6483;i++)n[i]=0;for(i=6511;i<=6514;i++)n[i]=0;for(i=6579;i<=6581;i++)n[i]=0;for(i=6619;i<=6624;i++)n[i]=0;for(i=6625;i<=6627;i++)n[i]=2;for(i=6628;i<=6632;i++)n[i]=0;for(i=6634;i<=6637;i++)n[i]=0;for(i=6669;i<=6692;i++)n[i]=0;for(i=6707;i<=6709;i++)n[i]=0;for(i=6720;i<=6723;i++)n[i]=0;for(i=6732;i<=6738;i++)n[i]=0;for(i=6931;i<=6933;i++)n[i]=0;for(i=6956;i<=6959;i++)n[i]=0;for(i=7005;i<=7007;i++)n[i]=0;for(i=7057;i<=7070;i++)n[i]=2;for(i=7074;i<=7082;i++)n[i]=0;for(i=7109;i<=7118;i++)n[i]=0;for(i=7119;i<=7127;i++)n[i]=1;for(i=7374;i<=7376;i++)n[i]=0;for(i=7528;i<=7586;i++)n[i]=0;for(i=7587;i<=7645;i++)n[i]=2;for(i=7692;i<=7696;i++)n[i]=0;for(i=7755;i<=7787;i++)n[i]=0;for(i=7791;i<=7795;i++)n[i]=0;for(i=7799;i<=7801;i++)n[i]=0;for(i=7803;i<=7805;i++)n[i]=0;for(i=7825;i<=7831;i++)n[i]=0;for(i=7845;i<=7859;i++)n[i]=0;for(i=8013;i<=8032;i++)n[i]=0;for(i=8065;i<=8068;i++)n[i]=1;for(i=8518;i<=8529;i++)n[i]=2;for(i=8533;i<=8536;i++)n[i]=2;for(i=8538;i<=8540;i++)n[i]=2;for(i=8677;i<=8679;i++)n[i]=0;for(i=8836;i<=8840;i++)n[i]=0;for(i=8857;i<=8859;i++)n[i]=0;for(i=8908;i<=8910;i++)n[i]=0;for(i=9154;i<=9159;i++)n[i]=0;for(i=9205;i<=9218;i++)n[i]=0;for(i=9271;i<=9273;i++)n[i]=0;for(i=9295;i<=9297;i++)n[i]=0;for(i=20002;i<=20032;i++)n[i]=0;for(i=20062;i<=20092;i++)n[i]=0;for(i=20135;i<=20138;i++)n[i]=0;for(i=20248;i<=20258;i++)n[i]=0;for(i=20348;i<=20358;i++)n[i]=0;for(i=20436;i<=20440;i++)n[i]=0;for(i=20822;i<=20824;i++)n[i]=0;for(i=20934;i<=20936;i++)n[i]=0;for(i=21035;i<=21037;i++)n[i]=0;for(i=21095;i<=21097;i++)n[i]=0;for(i=21148;i<=21150;i++)n[i]=0;for(i=21413;i<=21423;i++)n[i]=0;for(i=21453;i<=21463;i++)n[i]=0;for(i=21473;i<=21483;i++)n[i]=0;for(i=21780;i<=21782;i++)n[i]=0;for(i=21891;i<=21894;i++)n[i]=0;for(i=21896;i<=21899;i++)n[i]=0;for(i=22171;i<=22177;i++)n[i]=0;for(i=22181;i<=22187;i++)n[i]=0;for(i=22191;i<=22197;i++)n[i]=0;for(i=22234;i<=22236;i++)n[i]=0;for(i=22521;i<=22525;i++)n[i]=0;for(i=22991;i<=22994;i++)n[i]=0;for(i=23028;i<=23038;i++)n[i]=0;for(i=23830;i<=23853;i++)n[i]=0;for(i=23866;i<=23872;i++)n[i]=0;for(i=23877;i<=23884;i++)n[i]=0;for(i=23886;i<=23894;i++)n[i]=0;for(i=23946;i<=23948;i++)n[i]=0;for(i=24311;i<=24313;i++)n[i]=0;for(i=24342;i<=24347;i++)n[i]=0;for(i=24370;i<=24374;i++)n[i]=10;for(i=24375;i<=24381;i++)n[i]=0;for(i=24718;i<=24721;i++)n[i]=0;for(i=24817;i<=24821;i++)n[i]=0;for(i=24877;i<=24882;i++)n[i]=0;for(i=24891;i<=24893;i++)n[i]=0;for(i=25391;i<=25395;i++)n[i]=0;for(i=25828;i<=25838;i++)n[i]=0;for(i=26191;i<=26195;i++)n[i]=0;for(i=26391;i<=26393;i++)n[i]=0;for(i=26701;i<=26722;i++)n[i]=0;for(i=26729;i<=26799;i++)n[i]=2;for(i=26801;i<=26803;i++)n[i]=2;for(i=26811;i<=26813;i++)n[i]=2;for(i=26847;i<=26870;i++)n[i]=2;for(i=26891;i<=26899;i++)n[i]=0;for(i=26901;i<=26923;i++)n[i]=0;for(i=26929;i<=26946;i++)n[i]=0;for(i=26948;i<=26998;i++)n[i]=0;for(i=27037;i<=27040;i++)n[i]=0;for(i=27205;i<=27232;i++)n[i]=0;for(i=27258;i<=27260;i++)n[i]=0;for(i=27391;i<=27398;i++)n[i]=0;for(i=27561;i<=27564;i++)n[i]=0;for(i=27571;i<=27574;i++)n[i]=0;for(i=27581;i<=27584;i++)n[i]=0;for(i=27591;i<=27594;i++)n[i]=0;for(i=28191;i<=28193;i++)n[i]=0;for(i=28348;i<=28358;i++)n[i]=0;for(i=28402;i<=28432;i++)n[i]=0;for(i=28462;i<=28492;i++)n[i]=0;for(i=29118;i<=29122;i++)n[i]=0;for(i=29168;i<=29172;i++)n[i]=0;for(i=29177;i<=29185;i++)n[i]=0;for(i=29187;i<=29195;i++)n[i]=0;for(i=29900;i<=29903;i++)n[i]=0;for(i=30161;i<=30179;i++)n[i]=0;for(i=30491;i<=30494;i++)n[i]=0;for(i=30729;i<=30732;i++)n[i]=0;for(i=31251;i<=31259;i++)n[i]=0;for(i=31265;i<=31268;i++)n[i]=0;for(i=31275;i<=31279;i++)n[i]=0;for(i=31281;i<=31297;i++)n[i]=0;for(i=31461;i<=31469;i++)n[i]=0;for(i=31491;i<=31495;i++)n[i]=0;for(i=31917;i<=31922;i++)n[i]=0;for(i=31965;i<=32e3;i++)n[i]=0;for(i=32001;i<=32003;i++)n[i]=2;for(i=32005;i<=32031;i++)n[i]=2;for(i=32033;i<=32060;i++)n[i]=2;for(i=32064;i<=32067;i++)n[i]=2;for(i=32074;i<=32077;i++)n[i]=2;for(i=32081;i<=32086;i++)n[i]=0;for(i=32107;i<=32130;i++)n[i]=0;for(i=32133;i<=32158;i++)n[i]=0;for(i=32164;i<=32167;i++)n[i]=2;for(i=32180;i<=32199;i++)n[i]=0;for(i=32201;i<=32260;i++)n[i]=0;for(i=32301;i<=32360;i++)n[i]=0;for(i=32601;i<=32662;i++)n[i]=0;for(i=32664;i<=32667;i++)n[i]=2;for(i=32701;i<=32761;i++)n[i]=0;for(i=53001;i<=53004;i++)n[i]=0;for(i=53008;i<=53019;i++)n[i]=0;for(i=53021;i<=53032;i++)n[i]=0;for(i=53034;i<=53037;i++)n[i]=0;for(i=53042;i<=53046;i++)n[i]=0;for(i=53074;i<=53080;i++)n[i]=0;for(i=54001;i<=54004;i++)n[i]=0;for(i=54008;i<=54019;i++)n[i]=0;for(i=54021;i<=54032;i++)n[i]=0;for(i=54034;i<=54037;i++)n[i]=0;for(i=54042;i<=54046;i++)n[i]=0;for(i=54048;i<=54053;i++)n[i]=0;for(i=54074;i<=54080;i++)n[i]=0;for(i=54098;i<=54101;i++)n[i]=0;for(i=102001;i<=102040;i++)n[i]=0;for(i=102042;i<=102063;i++)n[i]=0;for(i=102065;i<=102067;i++)n[i]=0;for(i=102070;i<=102117;i++)n[i]=0;for(i=102122;i<=102216;i++)n[i]=0;for(i=102221;i<=102377;i++)n[i]=0;for(i=102382;i<=102388;i++)n[i]=0;for(i=102389;i<=102398;i++)n[i]=2;for(i=102399;i<=102444;i++)n[i]=0;for(i=102445;i<=102447;i++)n[i]=2;for(i=102448;i<=102458;i++)n[i]=0;for(i=102459;i<=102468;i++)n[i]=2;for(i=102469;i<=102499;i++)n[i]=0;for(i=102500;i<=102519;i++)n[i]=1;for(i=102520;i<=102524;i++)n[i]=0;for(i=102525;i<=102529;i++)n[i]=2;for(i=102530;i<=102588;i++)n[i]=0;for(i=102590;i<=102598;i++)n[i]=0;for(i=102601;i<=102603;i++)n[i]=0;for(i=102605;i<=102628;i++)n[i]=0;for(i=102629;i<=102646;i++)n[i]=2;for(i=102648;i<=102700;i++)n[i]=2;for(i=102701;i<=102703;i++)n[i]=0;for(i=102707;i<=102730;i++)n[i]=2;for(i=102733;i<=102758;i++)n[i]=2;for(i=102767;i<=102900;i++)n[i]=0;for(i=102965;i<=102969;i++)n[i]=0;for(i=102971;i<=102973;i++)n[i]=0;for(i=102975;i<=102989;i++)n[i]=0;for(i=102990;i<=102992;i++)n[i]=1;for(i=102997;i<=103002;i++)n[i]=0;for(i=103003;i<=103008;i++)n[i]=2;for(i=103009;i<=103011;i++)n[i]=0;for(i=103012;i<=103014;i++)n[i]=2;for(i=103019;i<=103021;i++)n[i]=0;for(i=103022;i<=103024;i++)n[i]=2;for(i=103029;i<=103031;i++)n[i]=0;for(i=103032;i<=103034;i++)n[i]=2;for(i=103065;i<=103068;i++)n[i]=0;for(i=103074;i<=103076;i++)n[i]=0;for(i=103077;i<=103079;i++)n[i]=1;for(i=103080;i<=103082;i++)n[i]=0;for(i=103083;i<=103085;i++)n[i]=2;for(i=103090;i<=103093;i++)n[i]=0;for(i=103097;i<=103099;i++)n[i]=0;for(i=103100;i<=103102;i++)n[i]=2;for(i=103107;i<=103109;i++)n[i]=0;for(i=103110;i<=103112;i++)n[i]=2;for(i=103113;i<=103116;i++)n[i]=0;for(i=103117;i<=103120;i++)n[i]=2;for(i=103153;i<=103157;i++)n[i]=0;for(i=103158;i<=103162;i++)n[i]=2;for(i=103163;i<=103165;i++)n[i]=0;for(i=103166;i<=103168;i++)n[i]=1;for(i=103169;i<=103171;i++)n[i]=2;for(i=103186;i<=103188;i++)n[i]=0;for(i=103189;i<=103191;i++)n[i]=2;for(i=103192;i<=103195;i++)n[i]=0;for(i=103196;i<=103199;i++)n[i]=2;for(i=103200;i<=103224;i++)n[i]=0;for(i=103225;i<=103227;i++)n[i]=1;for(i=103232;i<=103237;i++)n[i]=0;for(i=103238;i<=103243;i++)n[i]=2;for(i=103244;i<=103246;i++)n[i]=0;for(i=103247;i<=103249;i++)n[i]=2;for(i=103254;i<=103256;i++)n[i]=0;for(i=103257;i<=103259;i++)n[i]=2;for(i=103264;i<=103266;i++)n[i]=0;for(i=103267;i<=103269;i++)n[i]=2;for(i=103300;i<=103375;i++)n[i]=0;for(i=103381;i<=103383;i++)n[i]=0;for(i=103384;i<=103386;i++)n[i]=1;for(i=103387;i<=103389;i++)n[i]=0;for(i=103390;i<=103392;i++)n[i]=2;for(i=103397;i<=103399;i++)n[i]=0;for(i=103400;i<=103471;i++)n[i]=2;for(i=103476;i<=103478;i++)n[i]=0;for(i=103479;i<=103481;i++)n[i]=2;for(i=103486;i<=103488;i++)n[i]=0;for(i=103489;i<=103491;i++)n[i]=2;for(i=103492;i<=103495;i++)n[i]=0;for(i=103496;i<=103499;i++)n[i]=2;for(i=103528;i<=103543;i++)n[i]=0;for(i=103544;i<=103548;i++)n[i]=2;for(i=103549;i<=103551;i++)n[i]=0;for(i=103552;i<=103554;i++)n[i]=1;for(i=103555;i<=103557;i++)n[i]=2;for(i=103558;i<=103560;i++)n[i]=0;for(i=103571;i<=103573;i++)n[i]=0;for(i=103574;i<=103576;i++)n[i]=2;for(i=103577;i<=103580;i++)n[i]=0;for(i=103581;i<=103583;i++)n[i]=2;for(i=103595;i<=103694;i++)n[i]=0;for(i=103696;i<=103699;i++)n[i]=0;for(i=103700;i<=103793;i++)n[i]=2;for(i=103794;i<=103872;i++)n[i]=0;for(i=103900;i<=103971;i++)n[i]=2;t.a=n},function(e,t,r){"use strict";r.d(t,"a",(function(){return a})),r.d(t,"b",(function(){return d})),r.d(t,"c",(function(){return p})),r.d(t,"d",(function(){return s})),r.d(t,"e",(function(){return o})),r.d(t,"f",(function(){return c}));var i=r(89),n=r(83);function a(e,t){var r=t&&t.url&&t.url.path;if(e&&r&&(e=Object(n.z)(e,r,{preserveProtocolRelative:!0}),t.portalItem&&t.readResourcePaths)){var i=Object(n.B)(e,t.portalItem.itemUrl);u.test(i)&&t.readResourcePaths.push(t.portalItem.resourceFromPath(i).path)}return h(e,t&&t.portal)}function o(e,t,r=0){if(!e)return e;!Object(n.s)(e)&&t&&t.blockedRelativeUrls&&t.blockedRelativeUrls.push(e);var i=Object(n.z)(e);if(t){var a=t.verifyItemRelativeUrls&&t.verifyItemRelativeUrls.rootPath||t.url&&t.url.path;if(a){var o=h(a,t.portal);(i=Object(n.B)(h(i,t.portal),o,o))!==e&&t.verifyItemRelativeUrls&&t.verifyItemRelativeUrls.writtenUrls.push(i)}}return i=function(e,t){return t&&!t.isPortal&&t.urlKey&&t.customBaseUrl?Object(n.h)(e,"".concat(t.urlKey,".").concat(t.customBaseUrl),t.portalHostname):e}(i,t&&t.portal),Object(n.s)(i)&&(i=Object(n.C)(i)),null!=t&&t.resources&&null!=t&&t.portalItem&&!Object(n.s)(i)&&!Object(n.u)(i)&&0===r&&t.resources.toKeep.push({resource:t.portalItem.resourceFromPath(i)}),i}function s(e,t,r){return a(e,r)}function c(e,t,r,i){var n=o(e,i);void 0!==n&&(t[r]=n)}var l=/\/items\/([^\/]+)\/resources\//,u=/^\.\/resources\//;function d(e){var t=Object(i.k)(e)?e.match(l):null;return Object(i.k)(t)?t[1]:null}function h(e,t){if(!t||t.isPortal||!t.urlKey||!t.customBaseUrl)return e;var r="".concat(t.urlKey,".").concat(t.customBaseUrl);return Object(n.q)(n.g,"".concat(n.g.scheme,"://").concat(r))?Object(n.h)(e,t.portalHostname,r):Object(n.h)(e,r,t.portalHostname)}var p=Object.freeze({__proto__:null,fromJSON:a,toJSON:o,read:s,write:c,itemIdFromResourceUrl:d})},function(e,t,r){"use strict";var i,n=r(82),a=(r(80),r(92)),o=(r(81),r(88)),s=r(85),c=r(84),l=r(96),u=(r(83),r(86),r(87),r(90)),d=i=class extends u.a{constructor(e){super(e),this.attachmentTypes=null,this.attachmentsWhere=null,this.keywords=null,this.globalIds=null,this.name=null,this.num=null,this.objectIds=null,this.returnMetadata=!1,this.size=null,this.start=null,this.where=null}writeStart(e,t){t.resultOffset=this.start,t.resultRecordCount=this.num||10}clone(){return new i(Object(a.a)({attachmentTypes:this.attachmentTypes,attachmentsWhere:this.attachmentsWhere,keywords:this.keywords,where:this.where,globalIds:this.globalIds,name:this.name,num:this.num,objectIds:this.objectIds,returnMetadata:this.returnMetadata,size:this.size,start:this.start}))}};Object(n.a)([Object(s.b)({type:[String],json:{write:!0}})],d.prototype,"attachmentTypes",void 0),Object(n.a)([Object(s.b)({type:String,json:{read:{source:"attachmentsDefinitionExpression"},write:{target:"attachmentsDefinitionExpression"}}})],d.prototype,"attachmentsWhere",void 0),Object(n.a)([Object(s.b)({type:[String],json:{write:!0}})],d.prototype,"keywords",void 0),Object(n.a)([Object(s.b)({type:[Number],json:{write:!0}})],d.prototype,"globalIds",void 0),Object(n.a)([Object(s.b)({json:{write:!0}})],d.prototype,"name",void 0),Object(n.a)([Object(s.b)({type:Number,json:{read:{source:"resultRecordCount"}}})],d.prototype,"num",void 0),Object(n.a)([Object(s.b)({type:[Number],json:{write:!0}})],d.prototype,"objectIds",void 0),Object(n.a)([Object(s.b)({type:Boolean,json:{default:!1,write:!0}})],d.prototype,"returnMetadata",void 0),Object(n.a)([Object(s.b)({type:[Number],json:{write:!0}})],d.prototype,"size",void 0),Object(n.a)([Object(s.b)({type:Number,json:{read:{source:"resultOffset"}}})],d.prototype,"start",void 0),Object(n.a)([Object(l.a)("start"),Object(l.a)("num")],d.prototype,"writeStart",null),Object(n.a)([Object(s.b)({type:String,json:{read:{source:"definitionExpression"},write:{target:"definitionExpression"}}})],d.prototype,"where",void 0),(d=i=Object(n.a)([Object(c.a)("esri.tasks.support.AttachmentQuery")],d)).from=Object(o.m)(d);var h=d;t.a=h},function(e,t,r){"use strict";r.d(t,"a",(function(){return o}));var i=r(82),n=(r(80),r(81),r(88),r(85)),a=r(84),o=(r(83),r(86),r(87),e=>{var t=class extends e{constructor(){super(...arguments),this.refreshInterval=0}refresh(){this.emit("refresh")}};return Object(i.a)([Object(n.b)({type:Number,cast:e=>e>=.1?e:e<=0?0:.1,json:{write:!0,origins:{"web-document":{write:!0}}}})],t.prototype,"refreshInterval",void 0),t=Object(i.a)([Object(a.a)("esri.layers.mixins.RefreshableLayer")],t)})},function(e,t,r){"use strict";function i(){return function(e,t){if(!e[t])throw new TypeError("Cannot auto bind undefined function '".concat(t,"'"));return{value:n(e[t])}}}function n(e){return function(t,...r){!function(e){var{type:t}=e;return e instanceof KeyboardEvent||"keyup"===t||"keydown"===t||"keypress"===t}(t)?e.call(this,t,...r):"Enter"!==t.key&&" "!==t.key||(t.preventDefault(),t.stopPropagation(),t.target.click())}}r.d(t,"a",(function(){return i}))},function(e,t,r){"use strict";r.d(t,"a",(function(){return u}));var i,n=r(82),a=(r(80),r(81),r(88)),o=r(85),s=r(102),c=r(84),l=(r(83),r(86),r(87),r(90)),u=i=class extends l.a{constructor(e){super(e),this.type="map-layer"}clone(){var{mapLayerId:e,gdbVersion:t}=this;return new i({mapLayerId:e,gdbVersion:t})}};Object(n.a)([Object(s.a)({mapLayer:"map-layer"})],u.prototype,"type",void 0),Object(n.a)([Object(o.b)({type:a.a,json:{write:!0}})],u.prototype,"mapLayerId",void 0),Object(n.a)([Object(o.b)({type:String,json:{write:!0}})],u.prototype,"gdbVersion",void 0),u=i=Object(n.a)([Object(c.a)("esri.layers.support.source.MapLayerSource")],u)},function(e,t,r){"use strict";r.d(t,"a",(function(){return n}));r(80);var i=r(81);r(93);function n(e){}i.a.getLogger("esri/views/webgl")},function(e,t,r){"use strict";r.d(t,"a",(function(){return u})),r.d(t,"b",(function(){return l})),r.d(t,"c",(function(){return d})),r.d(t,"d",(function(){return c}));var i=r(89),n=r(130),a=r(141),o=(r(101),r(131)),s=r(531);class c{constructor(e){this.left=null,this.right=null,this.type="vertex",this.index=null,this.component=e}get pos(){return this._pos}set pos(e){this._pos=e,this.component.unnormalizeVertexPositions()}}class l{constructor(e,t,r){this.type="edge",this.component=e,this.left=t,this.right=r,t.right=this,r.left=this}}class u{constructor(e){this.vertices=[],this.edges=[],this.data=e}unnormalizeVertexPositions(){this.vertices.length<=1||this.data.coordinateHelper.unnormalize(this.vertices)}updateVertexIndex(e,t){if(0!==this.vertices.length){var r=this.vertices[0],i=null,n=e,a=t;do{(i=n).index=a++,n=i.right?i.right.right:null}while(null!=n&&n!==r);i.left&&i!==this.vertices[this.vertices.length-1]&&this.swapVertices(this.vertices.indexOf(i),this.vertices.length-1)}}getFirstVertex(){return 0===this.vertices.length?null:this.vertices[0]}getLastVertex(){return 0===this.vertices.length?null:this.vertices[this.vertices.length-1]}swapVertices(e,t){var r=this.vertices[e];this.vertices[e]=this.vertices[t],this.vertices[t]=r}iterateVertices(e){if(0!==this.vertices.length){var t=this.vertices[0],r=t;do{e(r,r.index),r=Object(i.k)(r.right)?r.right.right:null}while(r!==t&&null!=r)}}}class d extends o.a{constructor(e){super(),this.coordinateHelper=e,this.undoStack=[],this.redoStack=[],this.components=[]}apply(e,t=1){0!==t&&!Object(i.j)(this.lastOperation)&&this.lastOperation.accumulate(e)||(e.apply(),this.undoStack.push(e),this.redoStack=[])}undo(){if(this.undoStack.length>0){var e=this.undoStack.pop();return e.undo(),this.redoStack.push(e),e}return null}get canUndo(){return this.undoStack.length>0}get lastOperation(){return this.undoStack.length>0?this.undoStack[this.undoStack.length-1]:null}redo(){if(this.redoStack.length>0){var e=this.redoStack.pop();return e.apply(),this.undoStack.push(e),e}return null}get canRedo(){return this.redoStack.length>0}toPoint(){return 0===this.components.length||0===this.components[0].vertices.length?null:this.coordinateHelper.createPoint(this.components[0].vertices[0].pos)}toPolyline(){var e=[],t=this.coordinateHelper.toArray;return this.components.forEach(((r,i)=>{var n=[],a=r.vertices.find((e=>null==e.left)),o=a;do{n.push(t(a.pos)),a=a.right?a.right.right:null}while(a&&a!==o);e.push(n)})),new a.a({paths:e,spatialReference:this.coordinateHelper.spatialReference})}toPolygon(){var e=[],t=this.coordinateHelper.toArray;return this.components.forEach(((r,n)=>{var a=[],o=r.vertices[0],s=o,c=s;do{a.push(t(s.pos)),s=Object(i.k)(s.right)?s.right.right:null}while(s&&s!==c);a.push(t(o.pos)),e.push(a)})),new n.a({rings:e,spatialReference:this.coordinateHelper.spatialReference})}static fromGeometry(e,t){var r=Object(s.a)(e.hasZ,e.hasM,e.spatialReference,t),i=new d(r);switch(e.type){case"polygon":for(var n=e.rings,a=0;a<n.length;++a){for(var o=n[a],h=new u(i),p=o.length-1,f=0;f<p;++f){var b=r.fromArray(o[f]),v=new c(h);h.vertices.push(v),v.pos=b,v.index=f}for(var m=h.vertices.length-1,g=0;g<m;++g){var y=h.vertices[g],O=h.vertices[g+1],j=new l(h,y,O);h.edges.push(j)}var _=new l(h,h.vertices[h.vertices.length-1],h.vertices[0]);h.edges.push(_),i.components.push(h)}break;case"polyline":for(var w of e.paths){for(var x=new u(i),S=w.length,M=0;M<S;++M){var T=r.fromArray(w[M]),P=new c(x);x.vertices.push(P),P.pos=T,P.index=M}for(var E=x.vertices.length-1,C=0;C<E;++C){var A=x.vertices[C],I=x.vertices[C+1],k=new l(x,A,I);x.edges.push(k)}i.components.push(x)}break;case"point":var F=new u(i),R=new c(F);R.index=0,R.pos=i.coordinateHelper.fromPoint(e),F.vertices.push(R),i.components.push(F)}return i}}},function(e,t,r){"use strict";var i,n=r(82),a=(r(80),r(81),r(88),r(85)),o=r(84),s=(r(83),r(86),r(87),r(216)),c=i=class extends s.a{constructor(e){super(e),this.type="selection"}clone(){return new i}};Object(n.a)([Object(a.b)({type:["selection"]})],c.prototype,"type",void 0);var l=c=i=Object(n.a)([Object(o.a)("esri.layers.support.FeatureReductionSelection")],c);t.a=l},function(e,t,r){"use strict";r.d(t,"a",(function(){return o}));var i=r(82),n=r(84),a=0,o=e=>{var t=class extends e{constructor(...e){super(...e),Object.defineProperty(this,"uid",{writable:!1,configurable:!1,value:Date.now().toString(16)+"-object-"+a++})}};return t=Object(i.a)([Object(n.a)("esri.core.Identifiable")],t)},s=class extends(o(class{})){};s=Object(i.a)([Object(n.a)("esri.core.Identifiable")],s)},function(e,t,r){"use strict";r.d(t,"a",(function(){return D})),r.d(t,"b",(function(){return s})),r.d(t,"c",(function(){return o})),r.d(t,"d",(function(){return v})),r.d(t,"e",(function(){return a})),r.d(t,"f",(function(){return n}));var i=r(91);function n(e,t,r=32774,i=[0,0,0,0]){return{srcRgb:e,srcAlpha:e,dstRgb:t,dstAlpha:t,opRgb:r,opAlpha:r,color:{r:i[0],g:i[1],b:i[2],a:i[3]}}}function a(e,t,r,i,n=32774,a=32774,o=[0,0,0,0]){return{srcRgb:e,srcAlpha:t,dstRgb:r,dstAlpha:i,opRgb:n,opAlpha:a,color:{r:o[0],g:o[1],b:o[2],a:o[3]}}}var o={zNear:0,zFar:1},s={r:!0,g:!0,b:!0,a:!0};function c(e){return y.intern(e)}function l(e){return j.intern(e)}function u(e){return w.intern(e)}function d(e){return S.intern(e)}function h(e){return T.intern(e)}function p(e){return E.intern(e)}function f(e){return A.intern(e)}function b(e){return k.intern(e)}function v(e){return R.intern(e)}class m{constructor(e,t){this.makeKey=e,this.makeRef=t,this.interns=new Map}intern(e){if(!e)return null;var t=this.makeKey(e),r=this.interns;return r.has(t)||r.set(t,this.makeRef(e)),r.get(t)}}function g(e){return"["+e.join(",")+"]"}var y=new m(O,(e=>Object(i.a)({__tag:"Blending"},e)));function O(e){return e?g([e.srcRgb,e.srcAlpha,e.dstRgb,e.dstAlpha,e.opRgb,e.opAlpha,e.color.r,e.color.g,e.color.b,e.color.a]):null}var j=new m(_,(e=>Object(i.a)({__tag:"Culling"},e)));function _(e){return e?g([e.face,e.mode]):null}var w=new m(x,(e=>Object(i.a)({__tag:"PolygonOffset"},e)));function x(e){return e?g([e.factor,e.units]):null}var S=new m(M,(e=>Object(i.a)({__tag:"DepthTest"},e)));function M(e){return e?g([e.func]):null}var T=new m(P,(e=>Object(i.a)({__tag:"StencilTest"},e)));function P(e){return e?g([e.function.func,e.function.ref,e.function.mask,e.operation.fail,e.operation.zFail,e.operation.zPass]):null}var E=new m(C,(e=>Object(i.a)({__tag:"DepthWrite"},e)));function C(e){return e?g([e.zNear,e.zFar]):null}var A=new m(I,(e=>Object(i.a)({__tag:"ColorWrite"},e)));function I(e){return e?g([e.r,e.g,e.b,e.a]):null}var k=new m(F,(e=>Object(i.a)({__tag:"StencilWrite"},e)));function F(e){return e?g([e.mask]):null}var R=new m((function(e){return e?g([O(e.blending),_(e.culling),x(e.polygonOffset),M(e.depthTest),P(e.stencilTest),C(e.depthWrite),I(e.colorWrite),F(e.stencilWrite)]):null}),(e=>({blending:c(e.blending),culling:l(e.culling),polygonOffset:u(e.polygonOffset),depthTest:d(e.depthTest),stencilTest:h(e.stencilTest),depthWrite:p(e.depthWrite),colorWrite:f(e.colorWrite),stencilWrite:b(e.stencilWrite)})));class D{constructor(e){this._pipelineInvalid=!0,this._blendingInvalid=!0,this._cullingInvalid=!0,this._polygonOffsetInvalid=!0,this._depthTestInvalid=!0,this._stencilTestInvalid=!0,this._depthWriteInvalid=!0,this._colorWriteInvalid=!0,this._stencilWriteInvalid=!0,this._stateSetters=e}setPipeline(e){(this._pipelineInvalid||e!==this._pipeline)&&(this.setBlending(e.blending),this.setCulling(e.culling),this.setPolygonOffset(e.polygonOffset),this.setDepthTest(e.depthTest),this.setStencilTest(e.stencilTest),this.setDepthWrite(e.depthWrite),this.setColorWrite(e.colorWrite),this.setStencilWrite(e.stencilWrite),this._pipeline=e),this._pipelineInvalid=!1}invalidateBlending(){this._blendingInvalid=!0,this._pipelineInvalid=!0}invalidateCulling(){this._cullingInvalid=!0,this._pipelineInvalid=!0}invalidatePolygonOffset(){this._polygonOffsetInvalid=!0,this._pipelineInvalid=!0}invalidateDepthTest(){this._depthTestInvalid=!0,this._pipelineInvalid=!0}invalidateStencilTest(){this._stencilTestInvalid=!0,this._pipelineInvalid=!0}invalidateDepthWrite(){this._depthWriteInvalid=!0,this._pipelineInvalid=!0}invalidateColorWrite(){this._colorWriteInvalid=!0,this._pipelineInvalid=!0}invalidateStencilWrite(){this._stencilTestInvalid=!0,this._pipelineInvalid=!0}setBlending(e){this._blending=this.setSubState(e,this._blending,this._blendingInvalid,this._stateSetters.setBlending),this._blendingInvalid=!1}setCulling(e){this._culling=this.setSubState(e,this._culling,this._cullingInvalid,this._stateSetters.setCulling),this._cullingInvalid=!1}setPolygonOffset(e){this._polygonOffset=this.setSubState(e,this._polygonOffset,this._polygonOffsetInvalid,this._stateSetters.setPolygonOffset),this._polygonOffsetInvalid=!1}setDepthTest(e){this._depthTest=this.setSubState(e,this._depthTest,this._depthTestInvalid,this._stateSetters.setDepthTest),this._depthTestInvalid=!1}setStencilTest(e){this._stencilTest=this.setSubState(e,this._stencilTest,this._stencilTestInvalid,this._stateSetters.setStencilTest),this._stencilTestInvalid=!1}setDepthWrite(e){this._depthWrite=this.setSubState(e,this._depthWrite,this._depthWriteInvalid,this._stateSetters.setDepthWrite),this._depthWriteInvalid=!1}setColorWrite(e){this._colorWrite=this.setSubState(e,this._colorWrite,this._colorWriteInvalid,this._stateSetters.setColorWrite),this._colorWriteInvalid=!1}setStencilWrite(e){this._stencilWrite=this.setSubState(e,this._stencilWrite,this._stencilWriteInvalid,this._stateSetters.setStencilWrite),this._stencilTestInvalid=!1}setSubState(e,t,r,i){return(r||e!==t)&&(i(e),this._pipelineInvalid=!0),e}}},function(e,t,r){"use strict";var i,n=r(82),a=(r(80),r(92)),o=(r(81),r(88),r(85)),s=r(84),c=(r(83),r(86),r(87),r(90)),l=r(169),u=r(105),d=r(138),h=r(181),p=i=class extends c.a{constructor(){super(...arguments),this.statisticType=null,this.onStatisticField=null,this.onStatisticValueExpression=null}clone(){return new i({statisticType:this.statisticType,onStatisticField:this.onStatisticField,onStatisticValueExpression:this.onStatisticValueExpression})}};Object(n.a)([Object(o.b)({type:String,json:{write:!0}})],p.prototype,"statisticType",void 0),Object(n.a)([Object(o.b)({type:String,json:{write:!0}})],p.prototype,"onStatisticField",void 0),Object(n.a)([Object(o.b)({type:String,json:{write:!0}})],p.prototype,"onStatisticValueExpression",void 0);var f,b=p=i=Object(n.a)([Object(s.a)("esri.layers.support.OutStatistic")],p),v=f=class extends c.a{constructor(){super(...arguments),this.name=null}clone(){return new f({name:this.name,outStatistic:this.outStatistic.clone()})}};Object(n.a)([Object(o.b)({type:String,json:{write:!0}})],v.prototype,"name",void 0),Object(n.a)([Object(o.b)({type:b,json:{write:!0}})],v.prototype,"outStatistic",void 0);var m,g=v=f=Object(n.a)([Object(s.a)("esri.layers.support.AggregateField")],v),y=r(195),O=m=class extends c.a{constructor(e){super(e),this.type="cluster",this.clusterRadius=Object(u.k)("80px"),this.clusterMinSize=Object(u.k)("12px"),this.clusterMaxSize=Object(u.k)("50px"),this.popupEnabled=!0,this.popupTemplate=null,this.symbol=null,this.labelingInfo=null,this.labelsVisible=!0,this.fields=null}clone(){return new m({clusterRadius:this.clusterRadius,clusterMinSize:this.clusterMinSize,clusterMaxSize:this.clusterMaxSize,labelingInfo:Object(a.a)(this.labelingInfo),labelsVisible:this.labelsVisible,fields:Object(a.a)(this.fields),popupEnabled:this.popupEnabled,popupTemplate:Object(a.a)(this.popupTemplate)})}};Object(n.a)([Object(o.b)({type:["cluster"],readOnly:!0,json:{write:!0}})],O.prototype,"type",void 0),Object(n.a)([Object(o.b)({type:Number,cast:e=>"auto"===e?e:Object(u.k)(e),json:{write:!0}})],O.prototype,"clusterRadius",void 0),Object(n.a)([Object(o.b)({type:Number,cast:u.k,json:{write:!0}})],O.prototype,"clusterMinSize",void 0),Object(n.a)([Object(o.b)({type:Number,cast:u.k,json:{write:!0}})],O.prototype,"clusterMaxSize",void 0),Object(n.a)([Object(o.b)(h.j)],O.prototype,"popupEnabled",void 0),Object(n.a)([Object(o.b)({type:l.a,json:{read:{source:"popupInfo"},write:{target:"popupInfo"}}})],O.prototype,"popupTemplate",void 0),Object(n.a)([Object(o.b)({types:d.f})],O.prototype,"symbol",void 0),Object(n.a)([Object(o.b)({type:[y.a],json:{read:{source:"drawingInfo.labelingInfo"},write:{target:"drawingInfo.labelingInfo"}}})],O.prototype,"labelingInfo",void 0),Object(n.a)([Object(o.b)(h.d)],O.prototype,"labelsVisible",void 0),Object(n.a)([Object(o.b)({type:[g],json:{write:!0}})],O.prototype,"fields",void 0);var j=O=m=Object(n.a)([Object(s.a)("esri.layers.support.FeatureReductionCluster")],O);t.a=j},function(e,t,r){"use strict";function i(e){var t={};for(var r in e)if("declaredClass"!==r){var n=e[r];if(null!=n&&"function"!=typeof n)if(Array.isArray(n)){t[r]=[];for(var a=0;a<n.length;a++)t[r][a]=i(n[a])}else"object"==typeof n?n.toJSON&&(t[r]=JSON.stringify(n)):t[r]=n}return t}r.d(t,"a",(function(){return i}))},function(e,t,r){"use strict";r.d(t,"a",(function(){return n}));var i=r(212);function n(e,t,r){if(r&&r.features&&r.hasZ){var n=Object(i.a)(r.geometryType,t,e.outSpatialReference);if(n)for(var a of r.features)n(a.geometry)}}},function(e,t,r){"use strict";r.r(t);var i,n=r(7),a=r(91),o=r(82),s=r(80),c=r(124),l=r(89),u=r(81),d=r(85),h=r(116),p=r(95),f=r(98),b=r(188),v=r(84),m=r(96),g=r(93),y=r(83),O=(r(86),r(87),r(94)),j=r(99),_=r(103),w=r(107),x=r(118),S=r(169),M=r(106),T=r(138),P=r(115),E=r(218),C=r(186),A=r(242),I=r(303),k=r(181),F=r(283),R=(r(128),r(229),r(231)),D=(r(197),r(199),r(198),r(194)),L=r(214),N=r(244),V=r(207),z=r(92),G=r(90),U=r(88),q=i=class extends G.a{constructor(e){super(e),this.expression=null,this.name=null,this.returnType="boolean",this.title=null}clone(){return new i({name:this.name,title:this.title,expression:this.expression,returnType:this.returnType})}};Object(o.a)([Object(d.b)({type:String,json:{write:!0}})],q.prototype,"expression",void 0),Object(o.a)([Object(d.b)({type:String,json:{write:!0}})],q.prototype,"name",void 0),Object(o.a)([Object(d.b)({type:["boolean"],json:{write:!0}})],q.prototype,"returnType",void 0),Object(o.a)([Object(d.b)({type:String,json:{write:!0}})],q.prototype,"title",void 0);var H=q=i=Object(o.a)([Object(v.a)("esri.form.ExpressionInfo")],q),B=class extends G.a{constructor(e){super(e),this.description=null,this.label=null,this.type=null,this.visibilityExpression=null}};Object(o.a)([Object(d.b)({type:String,json:{write:!0}})],B.prototype,"description",void 0),Object(o.a)([Object(d.b)({type:String,json:{write:!0}})],B.prototype,"label",void 0),Object(o.a)([Object(d.b)()],B.prototype,"type",void 0),Object(o.a)([Object(d.b)({type:String,json:{write:!0}})],B.prototype,"visibilityExpression",void 0);var W,J=B=Object(o.a)([Object(v.a)("esri.form.elements.Element")],B),Z=W=class extends G.a{constructor(e){super(e),this.type=null}clone(){return new W({type:this.type})}};Object(o.a)([Object(d.b)({type:["attachment","audio","document","image","signature","video"],json:{write:!0}})],Z.prototype,"type",void 0);var X,Y=Z=W=Object(o.a)([Object(v.a)("esri.form.elements.inputs.AttachmentInput")],Z),Q=X=class extends J{constructor(e){super(e),this.attachmentKeyword=null,this.editable=!0,this.input=null,this.type="attachment"}clone(){return new X({attachmentKeyword:this.attachmentKeyword,description:this.description,editable:this.editable,input:this.input,label:this.label,visibilityExpression:this.visibilityExpression})}};Object(o.a)([Object(d.b)({type:String,json:{write:!0}})],Q.prototype,"attachmentKeyword",void 0),Object(o.a)([Object(d.b)({type:Boolean,json:{write:!0}})],Q.prototype,"editable",void 0),Object(o.a)([Object(d.b)({type:Y,json:{read:{source:"inputType"},write:{target:"inputType"}}})],Q.prototype,"input",void 0),Object(o.a)([Object(d.b)({type:["attachment"],json:{read:!1,write:!0}})],Q.prototype,"type",void 0);var K=Q=X=Object(o.a)([Object(v.a)("esri.form.elements.AttachmentElement")],Q),$=r(149),ee=class extends G.a{constructor(e){super(e),this.type=null}};Object(o.a)([Object(d.b)()],ee.prototype,"type",void 0);var te=ee=Object(o.a)([Object(v.a)("esri.form.elements.inputs.Input")],ee),re=class extends te{constructor(e){super(e),this.maxLength=null,this.minLength=0}};Object(o.a)([Object(d.b)({type:Number,json:{write:!0}})],re.prototype,"maxLength",void 0),Object(o.a)([Object(d.b)({type:Number,json:{write:!0}})],re.prototype,"minLength",void 0);var ie,ne=re=Object(o.a)([Object(v.a)("esri.form.elements.inputs.TextInput")],re),ae=ie=class extends ne{constructor(e){super(e),this.type="barcode-scanner"}clone(){return new ie({maxLength:this.maxLength,minLength:this.minLength})}};Object(o.a)([Object(d.b)({type:["barcode-scanner"],json:{read:!1,write:!0}})],ae.prototype,"type",void 0);var oe,se=ae=ie=Object(o.a)([Object(v.a)("esri.form.elements.inputs.BarcodeScannerInput")],ae),ce=oe=class extends te{constructor(e){super(e),this.noValueOptionLabel=null,this.showNoValueOption=!1,this.type="combo-box"}clone(){return new oe({showNoValueOption:this.showNoValueOption,noValueOptionLabel:this.noValueOptionLabel})}};Object(o.a)([Object(d.b)({type:String,json:{write:!0}})],ce.prototype,"noValueOptionLabel",void 0),Object(o.a)([Object(d.b)({type:Boolean,json:{write:!0}})],ce.prototype,"showNoValueOption",void 0),Object(o.a)([Object(d.b)({type:["combo-box"],json:{read:!1,write:!0}})],ce.prototype,"type",void 0);var le,ue=ce=oe=Object(o.a)([Object(v.a)("esri.form.elements.inputs.ComboBoxInput")],ce);function de(e){return null!=e?new Date(e):null}function he(e){return e?e.getTime():null}var pe=le=class extends te{constructor(e){super(e),this.includeTime=!1,this.max=null,this.min=null,this.type="datetime-picker"}readMax(e,t){return de(t.max)}writeMax(e,t){t.max=he(e)}readMin(e,t){return de(t.min)}writeMin(e,t){t.min=he(e)}clone(){return new le({includeTime:this.includeTime,max:this.max,min:this.min,type:this.type})}};Object(o.a)([Object(d.b)({type:Boolean,json:{write:!0}})],pe.prototype,"includeTime",void 0),Object(o.a)([Object(d.b)({type:Date,json:{type:Number,write:!0}})],pe.prototype,"max",void 0),Object(o.a)([Object(f.a)("max")],pe.prototype,"readMax",null),Object(o.a)([Object(m.a)("max")],pe.prototype,"writeMax",null),Object(o.a)([Object(d.b)({type:Date,json:{type:Number,write:!0}})],pe.prototype,"min",void 0),Object(o.a)([Object(f.a)("min")],pe.prototype,"readMin",null),Object(o.a)([Object(m.a)("min")],pe.prototype,"writeMin",null),Object(o.a)([Object(d.b)({type:["datetime-picker"],json:{read:!1,write:!0}})],pe.prototype,"type",void 0);var fe,be=pe=le=Object(o.a)([Object(v.a)("esri.form.elements.inputs.DateTimePickerInput")],pe),ve=fe=class extends te{constructor(e){super(e),this.noValueOptionLabel=null,this.showNoValueOption=!1,this.type="radio-buttons"}clone(){return new fe({noValueOptionLabel:this.noValueOptionLabel,showNoValueOption:this.showNoValueOption})}};Object(o.a)([Object(d.b)({type:String,json:{write:!0}})],ve.prototype,"noValueOptionLabel",void 0),Object(o.a)([Object(d.b)({type:Boolean,json:{write:!0}})],ve.prototype,"showNoValueOption",void 0),Object(o.a)([Object(d.b)({type:["radio-buttons"],json:{read:!1,write:!0}})],ve.prototype,"type",void 0);var me,ge=ve=fe=Object(o.a)([Object(v.a)("esri.form.elements.inputs.RadioButtonsInput")],ve),ye=me=class extends ne{constructor(e){super(e),this.type="text-area"}clone(){return new me({maxLength:this.maxLength,minLength:this.minLength})}};Object(o.a)([Object(d.b)({type:["text-area"],json:{read:!1,write:!0}})],ye.prototype,"type",void 0);var Oe,je=ye=me=Object(o.a)([Object(v.a)("esri.form.elements.inputs.TextAreaInput")],ye),_e=Oe=class extends ne{constructor(e){super(e),this.type="text-box"}clone(){return new Oe({maxLength:this.maxLength,minLength:this.minLength})}};Object(o.a)([Object(d.b)({type:["text-box"],json:{read:!1,write:!0}})],_e.prototype,"type",void 0),_e=Oe=Object(o.a)([Object(v.a)("esri.form.elements.inputs.TextBoxInput")],_e);var we,xe={base:te,key:"type",typeMap:{"barcode-scanner":se,"combo-box":ue,"datetime-picker":be,"radio-buttons":ge,"text-area":je,"text-box":_e}},Se=we=class extends J{constructor(e){super(e),this.domain=null,this.editable=!0,this.fieldName=null,this.hint=null,this.input=null,this.requiredExpression=null,this.type="field"}clone(){return new we({description:this.description,domain:this.domain,editable:this.editable,fieldName:this.fieldName,hint:this.hint,input:this.input,label:this.label,requiredExpression:this.requiredExpression,visibilityExpression:this.visibilityExpression})}};Object(o.a)([Object(d.b)({types:$.d,json:{read:{reader:$.b},write:!0}})],Se.prototype,"domain",void 0),Object(o.a)([Object(d.b)({type:Boolean,json:{write:!0}})],Se.prototype,"editable",void 0),Object(o.a)([Object(d.b)({type:String,json:{write:!0}})],Se.prototype,"fieldName",void 0),Object(o.a)([Object(d.b)({type:String,json:{write:!0}})],Se.prototype,"hint",void 0),Object(o.a)([Object(d.b)({types:xe,json:{read:{source:"inputType"},write:{target:"inputType"}}})],Se.prototype,"input",void 0),Object(o.a)([Object(d.b)({type:String,json:{write:!0}})],Se.prototype,"requiredExpression",void 0),Object(o.a)([Object(d.b)({type:String,json:{read:!1,write:!0}})],Se.prototype,"type",void 0);var Me,Te=Se=we=Object(o.a)([Object(v.a)("esri.form.elements.FieldElement")],Se),Pe=r(500),Ee=Me=class extends J{constructor(e){super(e),this.displayCount=null,this.displayType="list",this.editable=!0,this.orderByFields=null,this.relationshipId=null,this.type="relationship"}clone(){return new Me({description:this.description,displayCount:this.displayCount,displayType:this.displayType,editable:this.editable,label:this.label,orderByFields:Object(z.a)(this.orderByFields),relationshipId:this.relationshipId,visibilityExpression:this.visibilityExpression})}};Object(o.a)([Object(d.b)({type:Number,json:{write:!0}})],Ee.prototype,"displayCount",void 0),Object(o.a)([Object(d.b)({type:["list"],json:{write:!0}})],Ee.prototype,"displayType",void 0),Object(o.a)([Object(d.b)({type:Boolean,json:{write:!0}})],Ee.prototype,"editable",void 0),Object(o.a)([Object(d.b)({type:[Pe.a],json:{write:!0}})],Ee.prototype,"orderByFields",void 0),Object(o.a)([Object(d.b)({type:Number,json:{write:!0}})],Ee.prototype,"relationshipId",void 0),Object(o.a)([Object(d.b)({type:["relationship"],json:{read:!1,write:!0}})],Ee.prototype,"type",void 0);var Ce,Ae=Ee=Me=Object(o.a)([Object(v.a)("esri.form.elements.RelationshipElement")],Ee);function Ie(e){return{typesWithGroup:{base:J,key:"type",typeMap:{attachment:K,field:Te,group:e,relationship:Ae}},typesWithoutGroup:{base:J,key:"type",typeMap:{attachment:K,field:Te,relationship:Ae}}}}function ke(e,t,r=!0){if(!e)return null;var i=r?t.typesWithGroup.typeMap:t.typesWithoutGroup.typeMap;return e.filter((e=>i[e.type])).map((e=>i[e.type].fromJSON(e)))}function Fe(e,t,r=!0){if(!e)return null;var i=r?t.typesWithGroup.typeMap:t.typesWithoutGroup.typeMap;return e.filter((e=>i[e.type])).map((e=>e.toJSON()))}function Re(e,t,r=!0){return e?e.map((e=>Object(U.k)(r?t.typesWithGroup:t.typesWithoutGroup,e))):null}var De=Ce=class extends J{constructor(e){super(e),this.elements=null,this.initialState="expanded",this.type="group"}castElements(e){return Re(e,Ne,!1)}readElements(e,t){return ke(t.formElements,Ne,!1)}writeElements(e,t){t.formElements=Fe(e,Ne,!1)}clone(){return new Ce({description:this.description,elements:Object(z.a)(this.elements),initialState:this.initialState,label:this.label,visibilityExpression:this.visibilityExpression})}};Object(o.a)([Object(d.b)({json:{write:!0}})],De.prototype,"elements",void 0),Object(o.a)([Object(h.a)("elements")],De.prototype,"castElements",null),Object(o.a)([Object(f.a)("elements",["formElements"])],De.prototype,"readElements",null),Object(o.a)([Object(m.a)("elements")],De.prototype,"writeElements",null),Object(o.a)([Object(d.b)({type:["collapsed","expanded"],json:{write:!0}})],De.prototype,"initialState",void 0),Object(o.a)([Object(d.b)({type:String,json:{read:!1,write:!0}})],De.prototype,"type",void 0);var Le,Ne=Ie(De=Ce=Object(o.a)([Object(v.a)("esri.form.elements.GroupElement")],De)),Ve=Ie(De),ze=Le=class extends G.a{constructor(e){super(e),this.description=null,this.elements=null,this.expressionInfos=null,this.title=null}castElements(e){return Re(e,Ve)}readElements(e,t){return ke(t.formElements,Ve)}writeElements(e,t){t.formElements=Fe(e,Ve)}clone(){return new Le({description:this.description,expressionInfos:Object(z.a)(this.expressionInfos),elements:Object(z.a)(this.elements),title:this.title})}};Object(o.a)([Object(d.b)({type:String,json:{write:!0}})],ze.prototype,"description",void 0),Object(o.a)([Object(d.b)({json:{write:!0}})],ze.prototype,"elements",void 0),Object(o.a)([Object(h.a)("elements")],ze.prototype,"castElements",null),Object(o.a)([Object(f.a)("elements",["formElements"])],ze.prototype,"readElements",null),Object(o.a)([Object(m.a)("elements")],ze.prototype,"writeElements",null),Object(o.a)([Object(d.b)({type:[H],json:{write:!0}})],ze.prototype,"expressionInfos",void 0),Object(o.a)([Object(d.b)({type:String,json:{write:!0}})],ze.prototype,"title",void 0);var Ge=ze=Le=Object(o.a)([Object(v.a)("esri.form.FormTemplate")],ze),Ue=r(146);var qe,He=r(130),Be=r(183),We=(r(101),r(227)),Je=r(185),Ze=r(123),Xe=r(275),Ye=r(212),Qe=r(270),Ke=0,$e=u.a.getLogger("esri.layers.graphics.sources.MemorySource"),et=class extends(Je.a.LoadableMixin(Object(We.b)(w.a))){constructor(e){super(e),this._idToClientGraphic=null,this.type="memory"}load(e){var t=Object(l.k)(e)?e.signal:null;return this.addResolvingPromise(this._startWorker(t)),Promise.resolve(this)}destroy(){var e;null==(e=this._connection)||e.close(),this._connection=null}get workerGeometryType(){var e=this.layer&&this.layer.geometryType;return e?this._geometryTypeRequiresClientGraphicMapping(e)?"polygon":e:null}applyEdits(e){return this.load().then((()=>this._applyEdits(e)))}openPorts(){return this.load().then((()=>this._connection.openPorts()))}queryFeatures(e,t={}){var r=this;return Object(n.a)((function*(){yield r.load(t);var i=yield r._connection.invoke("queryFeatures",e?e.toJSON():null,t);Object(Qe.a)(e,r.layer.spatialReference,i);var n=Ue.default.fromJSON(i);if(!r._requiresClientGraphicMapping())return n;var a=r.layer.objectIdField;for(var o of n.features){var s=o.attributes[a],c=r._idToClientGraphic.get(s);c&&(o.geometry=c.geometry)}return n.geometryType=r.layer.geometryType,n}))()}queryFeaturesJSON(e,t={}){var r=this;return Object(n.a)((function*(){if(r._requiresClientGraphicMapping())throw new g.a("query-features-json:unsupported","Cannot query in JSON format for client only geometry types (mesh and extent)");yield r.load(t);var i=yield r._connection.invoke("queryFeatures",e?e.toJSON():null,t);return Object(Qe.a)(e,r.layer.spatialReference,i),i}))()}queryFeatureCount(e,t={}){return this.load(t).then((()=>this._connection.invoke("queryFeatureCount",e?e.toJSON():null,t)))}queryObjectIds(e,t={}){return this.load(t).then((()=>this._connection.invoke("queryObjectIds",e?e.toJSON():null,t)))}queryExtent(e,t={}){return this.load(t).then((()=>this._connection.invoke("queryExtent",e?e.toJSON():null,t))).then((e=>({count:e.count,extent:_.a.fromJSON(e.extent)})))}querySnapping(e,t={}){return this.load(t).then((()=>this._connection.invoke("querySnapping",e,t)))}_applyEdits(e){if(!this._connection)throw new g.a("feature-layer-source:edit-failure","Memory source not loaded");var t=this.layer.objectIdField,r=null,i=[],n=[],a=e=>"objectId"in e&&null!=e.objectId?e.objectId:"attributes"in e&&null!=e.attributes[t]?e.attributes[t]:null;if(e.addFeatures&&(r=this._prepareAddFeatures(e.addFeatures)),e.deleteFeatures)for(var o of e.deleteFeatures){var s=a(o);null!=s&&i.push(s)}var c=e.updateFeatures&&this._idToClientGraphic?new Map:null;if(e.updateFeatures)for(var l of e.updateFeatures)if(n.push(this._serializeFeature(l)),c){var u=a(l);null!=u&&c.set(u,l)}return Object(Ye.b)(r?r.features:null,n,this.layer.spatialReference),this._connection.invoke("applyEdits",{adds:r?r.features:[],updates:n,deletes:i}).then((({fullExtent:e,featureEditResults:t})=>{if(this.fullExtent=e,r&&r.finish(t.uidToObjectId),this._idToClientGraphic){if(c)for(var i of t.updateResults)if(i.success){var n=c.get(i.objectId);null!=n&&this._addIdToClientGraphic(n)}for(var a of t.deleteResults)a.success&&this._idToClientGraphic.delete(a.objectId)}return this._createEditsResult(t)}))}_createEditsResult(e){return{addFeatureResults:e.addResults?e.addResults.map(this._createFeatureEditResult,this):[],updateFeatureResults:e.updateResults?e.updateResults.map(this._createFeatureEditResult,this):[],deleteFeatureResults:e.deleteResults?e.deleteResults.map(this._createFeatureEditResult,this):[],addAttachmentResults:[],updateAttachmentResults:[],deleteAttachmentResults:[]}}_createFeatureEditResult(e){var t=!0===e.success?null:e.error||{code:void 0,description:void 0};return{objectId:e.objectId,globalId:e.globalId,error:t?new g.a("feature-layer-source:edit-failure",t.description,{code:t.code}):null}}_prepareAddFeatures(e){for(var t=new Map,r=new Array(e.length),i=null,n=0;n<e.length;n++){var a=e[n],o=this._serializeFeature(a);!i&&Object(l.k)(a.geometry)&&(i=a.geometry.type),r[n]=o,t.set("".concat(o.uid),a)}var s=this;return{features:r,inferredGeometryType:i,finish(e){var r=s.sourceJSON.objectIdField;for(var i in e){var n=e[i],a=t.get(i);a&&(a.attributes||(a.attributes={}),-1===n?delete a.attributes[r]:a.attributes[r]=n,s._addIdToClientGraphic(a))}}}}_addIdToClientGraphic(e){if(this._idToClientGraphic){var t=this.sourceJSON.objectIdField,r=e.attributes&&e.attributes[t];null!=r&&this._idToClientGraphic.set(r,e)}}_requiresClientGraphicMapping(){var e=this.layer.geometryType||this.sourceJSON.geometryType;return this._geometryTypeRequiresClientGraphicMapping(e)}_geometryRequiresClientGraphicMapping(e){return this._geometryTypeRequiresClientGraphicMapping(e.type)}_geometryTypeRequiresClientGraphicMapping(e){return"mesh"===e||"multipatch"===e||"extent"===e}_serializeFeature(e){var{attributes:t}=e,r=this._geometryForSerialization(e),i=(Ke++).toString();return r?{uid:i,geometry:r.toJSON(),attributes:t}:{uid:i,attributes:t}}_geometryForSerialization(e){var{geometry:t}=e;return Object(l.j)(t)?null:this._geometryRequiresClientGraphicMapping(t)?t.extent?He.a.fromExtent(t.extent):null:t}_startWorker(e){var t=this;return Object(n.a)((function*(){t._connection=yield Object(Xe.b)("MemorySourceWorker",{strategy:Object(s.a)("feature-layers-workers")?"dedicated":"local",signal:e});var{fields:r,spatialReference:i,objectIdField:n,hasM:a,hasZ:o,timeInfo:c}=t.layer,l="defaults"===t.layer.originOf("spatialReference"),u=t._prepareAddFeatures(t.items);t.on("before-changes",(e=>{$e.error("Source modifications will not propagate after layer has been loaded. Please use .applyEdits() instead"),e.preventDefault()}));var d={features:u.features,fields:r&&r.map((e=>e.toJSON())),geometryType:Be.c.toJSON(t.workerGeometryType),hasM:a,hasZ:o,objectIdField:n,spatialReference:l?null:i&&i.toJSON(),timeInfo:c?c.toJSON():null},h=yield t._connection.invoke("load",d,{signal:e});for(var p of h.warnings)$e.warn(p.message,{layer:t.layer,warning:p});h.featureErrors.length&&$e.warn("Encountered ".concat(h.featureErrors.length," validation errors while loading features"),h.featureErrors);var f=h.layerDefinition;t._geometryTypeRequiresClientGraphicMapping(u.inferredGeometryType)&&(f.geometryType=Be.c.toJSON(u.inferredGeometryType)),"mesh"!==f.geometryType&&"mesh"!==t.layer.geometryType||(f.hasZ=!0),t.sourceJSON=f,t._requiresClientGraphicMapping()&&(t._idToClientGraphic=new Map),u.finish(h.assignedObjectIds)}))()}};Object(o.a)([(qe={Type:Ze.a,ensureType:Object(U.m)(Ze.a)},(e,t)=>{e[t]=qe})],et.prototype,"itemType",void 0),Object(o.a)([Object(d.b)()],et.prototype,"type",void 0),Object(o.a)([Object(d.b)({constructOnly:!0})],et.prototype,"layer",void 0),Object(o.a)([Object(d.b)({readOnly:!0})],et.prototype,"workerGeometryType",null),Object(o.a)([Object(d.b)()],et.prototype,"sourceJSON",void 0);var tt,rt=et=Object(o.a)([Object(v.a)("esri.layers.graphics.sources.MemorySource")],et),it=r(377),nt=r(215),at=r(318),ot=r(273),st=r(260),ct=r(204),lt=r(239),ut=r(304),dt=tt=class extends G.a{constructor(e){super(e)}clone(){var{name:e,fields:t,isAscending:r,isUnique:i,description:n}=this;return new tt({name:e,fields:t,isAscending:r,isUnique:i,description:n})}};Object(o.a)([Object(d.b)({constructOnly:!0})],dt.prototype,"name",void 0),Object(o.a)([Object(d.b)({constructOnly:!0})],dt.prototype,"fields",void 0),Object(o.a)([Object(d.b)({constructOnly:!0})],dt.prototype,"isAscending",void 0),Object(o.a)([Object(d.b)({constructOnly:!0})],dt.prototype,"isUnique",void 0),Object(o.a)([Object(d.b)({constructOnly:!0})],dt.prototype,"description",void 0);dt=tt=Object(o.a)([Object(v.a)("esri.layers.support.FeatureIndex")],dt);var ht=r(216),pt=r(195),ft=r(268),bt=r(265),vt=r(342),mt=r(251),gt=r(298),yt=r(335),Ot=r(117),jt=class extends G.a{constructor(e){super(e),this.shapeAreaField=null,this.shapeLengthField=null,this.units=null}};Object(o.a)([Object(d.b)({type:String,json:{read:{source:"shapeAreaFieldName"}}})],jt.prototype,"shapeAreaField",void 0),Object(o.a)([Object(d.b)({type:String,json:{read:{source:"shapeLengthFieldName"}}})],jt.prototype,"shapeLengthField",void 0),Object(o.a)([Object(d.b)({type:String,json:{read:e=>Ot.a.read(e)||Ot.n.read(e)}})],jt.prototype,"units",void 0);var _t=jt=Object(o.a)([Object(v.a)("esri.layers.support.GeometryFieldsInfo")],jt),wt=r(339),xt=r(346),St=new p.a({esriRelCardinalityOneToOne:"one-to-one",esriRelCardinalityOneToMany:"one-to-many",esriRelCardinalityManyToMany:"many-to-many"}),Mt=new p.a({esriRelRoleOrigin:"origin",esriRelRoleDestination:"destination"}),Tt=class extends G.a{constructor(e){super(e),this.cardinality=null,this.composite=null,this.id=null,this.keyField=null,this.keyFieldInRelationshipTable=null,this.name=null,this.relatedTableId=null,this.relationshipTableId=null,this.role=null}};Object(o.a)([Object(d.b)({json:{read:St.read,write:St.write}})],Tt.prototype,"cardinality",void 0),Object(o.a)([Object(d.b)({json:{read:!0,write:!0}})],Tt.prototype,"composite",void 0),Object(o.a)([Object(d.b)({json:{read:!0,write:!0}})],Tt.prototype,"id",void 0),Object(o.a)([Object(d.b)({json:{read:!0,write:!0}})],Tt.prototype,"keyField",void 0),Object(o.a)([Object(d.b)({json:{read:!0,write:!0}})],Tt.prototype,"keyFieldInRelationshipTable",void 0),Object(o.a)([Object(d.b)({json:{read:!0,write:!0}})],Tt.prototype,"name",void 0),Object(o.a)([Object(d.b)({json:{read:!0,write:!0}})],Tt.prototype,"relatedTableId",void 0),Object(o.a)([Object(d.b)({json:{read:!0,write:!0}})],Tt.prototype,"relationshipTableId",void 0),Object(o.a)([Object(d.b)({json:{read:Mt.read,write:Mt.write}})],Tt.prototype,"role",void 0);var Pt=Tt=Object(o.a)([Object(v.a)("esri.layers.support.Relationship")],Tt),Et=r(170),Ct=r(310),At=r(274),It=r(259),kt=r(132),Ft=r(224),Rt=new p.a({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryMultiPatch:"multipatch"}),Dt={name:"supportsName",size:"supportsSize",contentType:"supportsContentType",keywords:"supportsKeywords",exifInfo:"supportsExifInfo"},Lt="FeatureLayer",Nt=u.a.getLogger("esri.layers.FeatureLayer");function Vt(e){return e&&e instanceof w.a}function zt(e,t,r){return!!(e&&e.hasOwnProperty(t)?e[t]:r)}function Gt(e,t,r){return e&&e.hasOwnProperty(t)?e[t]:r}var Ut=Object(yt.a)();function qt(e,t,r){var i=!(null==r||!r.writeLayerSchema);return{enabled:i,ignoreOrigin:i}}var Ht=class extends(Object(nt.a)(Object(ut.a)(Object(ct.a)(Object(st.a)(Object(it.a)(Object(F.a)(Object(ot.a)(Object(C.a)(Object(at.a)(E.a)))))))))){constructor(...e){super(...e),this._handles=new P.a,this.capabilities=null,this.charts=null,this.copyright=null,this.displayField=null,this.definitionExpression=null,this.dynamicDataSource=null,this.editFieldsInfo=null,this.editingEnabled=!0,this.editingInfo=null,this.elevationInfo=null,this.featureReduction=null,this.fields=null,this.floorInfo=null,this.formTemplate=null,this.fullExtent=null,this.gdbVersion=null,this.geometryFieldsInfo=null,this.geometryType=null,this.hasM=void 0,this.hasZ=void 0,this.heightModelInfo=null,this.historicMoment=null,this.isTable=!1,this.labelsVisible=!0,this.labelingInfo=null,this.layerId=void 0,this.legendEnabled=!0,this.minScale=0,this.maxScale=0,this.globalIdField=null,this.objectIdField=null,this.outFields=null,this.path=null,this.popupEnabled=!0,this.popupTemplate=null,this.relationships=null,this.sourceJSON=null,this.returnM=void 0,this.returnZ=void 0,this.screenSizePerspectiveEnabled=!0,this.serviceDefinitionExpression=null,this.spatialReference=j.a.WGS84,this.templates=null,this.timeInfo=null,this.title=null,this.sublayerTitleMode="item-title",this.trackIdField=null,this.type="feature",this.typeIdField=null,this.types=null,this.indexes=new(w.a.ofType(dt)),this.userIsAdmin=!1,this.version=void 0,this.visible=!0}destroy(){var e;null==(e=this.source)||e.destroy(),this._handles=Object(l.e)(this._handles)}normalizeCtorArgs(e,t){return"string"==typeof e?Object(a.a)({url:e},t):e}load(e){var t=this,r=Object(l.k)(e)?e.signal:null;if(!(this.portalItem&&this.portalItem.loaded&&this.source)){var i=this.loadFromPortal({supportedTypes:["Feature Service","Feature Collection"]},e).catch((e=>e)).then(Object(n.a)((function*(){if(t.url&&null==t.layerId&&/FeatureServer|MapServer\/*$/i.test(t.url)){var e=yield t._fetchFirstLayerId(r);null!=e&&(t.layerId=e)}if(!t.url&&!t._hasMemorySource())throw new g.a("feature-layer:missing-url-or-source","Feature layer must be created with either a url or a source");return t._initLayerProperties(yield t.createGraphicsSource(r))})));return this.addResolvingPromise(i),Promise.resolve(this)}this.addResolvingPromise(this.createGraphicsSource(r).then((e=>this._initLayerProperties(e))))}readCapabilities(e,t){return t=t.layerDefinition||t,{attachment:this._readAttachmentCapabilities(t.attachmentProperties),data:this._readDataCapabilities(t),metadata:this._readMetadataCapabilities(t),operations:this._readOperationsCapabilities(t.capabilities||e,t),query:this._readQueryCapabilities(t),queryRelated:this._readQueryRelatedCapabilities(t),editing:this._readEditingCapabilities(t)}}get createQueryVersion(){return this.commitProperty("definitionExpression"),this.commitProperty("dynamicDataSource"),this.commitProperty("timeExtent"),this.commitProperty("timeOffset"),this.commitProperty("geometryType"),this.commitProperty("gdbVersion"),this.commitProperty("historicMoment"),this.commitProperty("returnZ"),this.commitProperty("capabilities"),this.commitProperty("returnM"),(this._get("createQueryVersion")||0)+1}readEditingEnabled(e,t){return this._readEditingEnabled(t,!1)}readEditingEnabledFromWebMap(e,t,r){return this._readEditingEnabled(t,!0,r)}writeEditingEnabled(e,t){this._writeEditingEnabled(e,t,!1)}writeEditingEnabledToWebMap(e,t,r,i){this._writeEditingEnabled(e,t,!0,i)}readEditingInfo(e,t){var{editingInfo:r}=t;return r?{lastEditDate:null!=r.lastEditDate?new Date(r.lastEditDate):null}:null}readFeatureReduction(e,t){return Object(vt.a)(e,t)}writeWebSceneFeatureReduction(e,t,r,i){Object(vt.c)(e,t,"layerDefinition.featureReduction",i)}get fieldsIndex(){return new V.a(this.fields||[])}readIsTable(e,t){return"Table"===(t=t&&t.layerDefinition||t).type||!t.geometryType}writeIsTable(e,t,r,i){null!=i&&i.writeLayerSchema&&Object(c.c)(r,e?"Table":"Feature Layer",t)}readMinScale(e,t){return t.effectiveMinScale||e||0}readMaxScale(e,t){return t.effectiveMaxScale||e||0}readGlobalIdFieldFromService(e,t){if((t=t.layerDefinition||t).globalIdField)return t.globalIdField;if(t.fields)for(var r of t.fields)if("esriFieldTypeGlobalID"===r.type)return r.name}readObjectIdFieldFromService(e,t){if((t=t.layerDefinition||t).objectIdField)return t.objectIdField;if(t.fields)for(var r of t.fields)if("esriFieldTypeOID"===r.type)return r.name}get parsedUrl(){var e=this.url?Object(y.J)(this.url):null;return null!=e&&(null!=this.dynamicDataSource?e.path=Object(y.y)(e.path,"dynamicLayer"):null!=this.layerId&&(e.path=Object(y.y)(e.path,this.layerId.toString()))),e}get defaultPopupTemplate(){return this.createPopupTemplate()}set renderer(e){Object(x.l)(e,this.fields),this._set("renderer",e)}readRenderer(e,t,r){var i=(t=t.layerDefinition||t).drawingInfo&&t.drawingInfo.renderer||void 0;if(i){var n=Object(N.b)(i,t,r)||void 0;return n||Nt.error("Failed to create renderer",{rendererDefinition:t.drawingInfo.renderer,layer:this,context:r}),n}if(t.defaultSymbol)return t.types&&t.types.length?new R.a({defaultSymbol:Bt(t.defaultSymbol,t,r),field:t.typeIdField,uniqueValueInfos:t.types.map((e=>({id:e.id,symbol:Bt(e.symbol,e,r)})))}):new D.a({symbol:Bt(t.defaultSymbol,t,r)})}set source(e){var t=this._get("source");t!==e&&(Vt(t)&&this._resetMemorySource(t),Vt(e)&&this._initMemorySource(e),this._set("source",e))}castSource(e){return e?Array.isArray(e)||e instanceof w.a?new rt({layer:this,items:e}):e:null}readSource(e,t){var r=Ue.default.fromJSON(t.featureSet);return new rt({layer:this,items:r&&r.features||[]})}readServiceDefinitionExpression(e,t){return t.definitionQuery||t.definitionExpression}readTemplates(e,t){var r=t.editFieldsInfo,i=r&&r.creatorField,n=r&&r.editorField;return e=e&&e.map((e=>mt.a.fromJSON(e))),this._fixTemplates(e,i),this._fixTemplates(e,n),e}readTitle(e,t){var r=t.layerDefinition&&t.layerDefinition.name||t.name,i=t.title||t.layerDefinition&&t.layerDefinition.title;if(r){var n=this.portalItem&&this.portalItem.title;if("item-title"===this.sublayerTitleMode)return this.url?Object(A.j)(this.url,r):r;var a=r;if(!a&&this.url){var o=Object(A.f)(this.url);Object(l.k)(o)&&(a=o.title)}if(!a)return;return"item-title-and-service-name"===this.sublayerTitleMode&&n&&n!==a&&(a=n+" - "+a),Object(A.a)(a)}if("item-title"===this.sublayerTitleMode&&i)return i}readTitleFromWebMap(e,t){return t.title||t.layerDefinition&&t.layerDefinition.name}readTypeIdField(e,t){var r=(t=t.layerDefinition||t).typeIdField;if(r){var i=Object(x.q)(t.fields,r);i&&(r=i.name)}return r}readTypes(e,t){e=(t=t.layerDefinition||t).types;var r=t.editFieldsInfo,i=r&&r.creatorField,n=r&&r.editorField;return e&&e.map((e=>(e=gt.a.fromJSON(e),this._fixTemplates(e.templates,i),this._fixTemplates(e.templates,n),e)))}set url(e){var t=Object(A.i)({layer:this,url:e,nonStandardUrlAllowed:!0,logger:Nt});this._set("url",t.url),null!=t.layerId&&this._set("layerId",t.layerId)}writeUrl(e,t,r,i){Object(A.k)(this,e,null,t,i)}readVersion(e,t){return t.currentVersion?t.currentVersion:t.hasOwnProperty("capabilities")||t.hasOwnProperty("drawingInfo")||t.hasOwnProperty("hasAttachments")||t.hasOwnProperty("htmlPopupType")||t.hasOwnProperty("relationships")||t.hasOwnProperty("timeInfo")||t.hasOwnProperty("typeIdField")||t.hasOwnProperty("types")?10:9.3}readVisible(e,t){return t.layerDefinition&&null!=t.layerDefinition.defaultVisibility?!!t.layerDefinition.defaultVisibility:null!=t.visibility?!!t.visibility:void 0}addAttachment(e,t){return this.load().then((()=>this._checkAttachmentSupport(e))).then((()=>{if(!("addAttachment"in this.source))throw new g.a(Lt,"Layer source does not support addAttachment capability");return this.source.addAttachment(e,t)}))}updateAttachment(e,t,r){return this.load().then((()=>this._checkAttachmentSupport(e))).then((()=>{if(!("updateAttachment"in this.source))throw new g.a(Lt,"Layer source does not support updateAttachment capability");return this.source.updateAttachment(e,t,r)}))}applyEdits(e,t){var i=this;return Object(n.a)((function*(){var n=yield r.e(47).then(r.bind(null,1173));return yield i.load(),n.applyEdits(i,i.source,e,t)}))()}on(e,t){return super.on(e,t)}createPopupTemplate(e){return Object(At.a)(this,e)}createGraphicsSource(e){var t=this;return Object(n.a)((function*(){if(t._hasMemorySource())return t.emit("graphics-source-create",{graphicsSource:t.source}),t.source.load({signal:e});var i=yield Promise.all([r.e(22),r.e(116)]).then(r.bind(null,1174));Object(O.u)(e);var n=yield new i.default({layer:t}).load({signal:e});return t.emit("graphics-source-create",{graphicsSource:n}),n}))()}createQuery(){var e=new kt.a,t=this.get("capabilities.data");e.dynamicDataSource=this.dynamicDataSource,e.gdbVersion=this.gdbVersion,e.historicMoment=this.historicMoment,e.returnGeometry=!0,t&&(t.supportsZ&&null!=this.returnZ&&(e.returnZ=this.returnZ),t.supportsM&&null!=this.returnM&&(e.returnM=this.returnM)),e.outFields=["*"],e.where=this.definitionExpression||"1=1";var{timeOffset:r,timeExtent:i}=this;return e.timeExtent=null!=r&&null!=i?i.offset(-r.value,r.unit):i||null,e.multipatchOption="multipatch"===this.geometryType?"xyFootprint":null,e}deleteAttachments(e,t){return this.load().then((()=>this._checkAttachmentSupport(e))).then((()=>{if(!("deleteAttachments"in this.source))throw new g.a(Lt,"Layer source does not support deleteAttachments capability");return this.source.deleteAttachments(e,t)}))}fetchRecomputedExtents(e){return this.load({signal:null==e?void 0:e.signal}).then((()=>{if(this.source.fetchRecomputedExtents)return this.source.fetchRecomputedExtents(e);throw new g.a(Lt,"Layer source does not support fetchUpdates capability")}))}getFeatureType(e){var{typeIdField:t,types:r}=this;if(!t||!e)return null;var i=e.attributes?e.attributes[t]:void 0;if(null==i)return null;var n=null;return r.some((e=>{var{id:t}=e;return null!=t&&(t.toString()===i.toString()&&(n=e),!!n)})),n}getFieldDomain(e,t){var r=t&&t.feature,i=this.getFeatureType(r);if(i){var n=i.domains&&i.domains[e];if(n&&"inherited"!==n.type)return n}return this._getLayerDomain(e)}getField(e){return this.fieldsIndex.get(e)}queryAttachments(e,t){return e=It.a.from(e),this.load().then((()=>{if(!this.get("capabilities.data.supportsAttachment"))throw new g.a(Lt,"this layer doesn't support attachments");var{attachmentTypes:t,objectIds:r,globalIds:i,num:n,size:a,start:o,where:s}=e;if(!this.get("capabilities.operations.supportsQueryAttachments")){var c=r&&r.length>1,l=t&&t.length,u=i&&i.length,d=a&&a.length;if(c||l||u||d||n||o||s)throw new g.a(Lt,"when 'supportsQueryAttachments' is false, only objectIds of length 1 are supported",e)}if(!(r&&r.length||s))throw new g.a(Lt,"'objectIds' or 'where' are required to perform attachment query",e);if(!("queryAttachments"in this.source))throw new g.a(Lt,"Layer source does not support queryAttachments capability",e);return this.source.queryAttachments(e)}))}queryFeatures(e,t){return this.load().then((()=>this.source.queryFeatures(kt.a.from(e)||this.createQuery(),t))).then((e=>{if(e&&e.features)for(var t of e.features)t.layer=t.sourceLayer=this;return e}))}queryObjectIds(e,t){return this.load().then((()=>{if(this.source.queryObjectIds)return this.source.queryObjectIds(kt.a.from(e)||this.createQuery(),t);throw new g.a(Lt,"Layer source does not support queryObjectIds capability")}))}queryFeatureCount(e,t){return this.load().then((()=>{if(this.source.queryFeatureCount)return this.source.queryFeatureCount(kt.a.from(e)||this.createQuery(),t);throw new g.a(Lt,"Layer source does not support queryFeatureCount capability")}))}queryExtent(e,t){return this.load().then((()=>{if(this.source.queryExtent)return this.source.queryExtent(kt.a.from(e)||this.createQuery(),t);throw new g.a(Lt,"Layer source does not support queryExtent capability")}))}queryRelatedFeatures(e,t){return this.load().then((()=>{if("queryRelatedFeatures"in this.source)return this.source.queryRelatedFeatures(Ft.a.from(e),t);throw new g.a(Lt,"Layer source does not support queryRelatedFeatures capability")}))}queryRelatedFeaturesCount(e,t){return this.load().then((()=>{if("queryRelatedFeaturesCount"in this.source)return this.source.queryRelatedFeaturesCount(Ft.a.from(e),t);throw new g.a(Lt,"Layer source does not support queryRelatedFeaturesCount capability")}))}read(e,t){var r=e.featureCollection;if(r){var i=r.layers;i&&1===i.length&&(super.read(i[0],t),null!=r.showLegend&&super.read({showLegend:r.showLegend},t))}super.read(e,t),t&&"service"===t.origin&&this.revert(["objectIdField","fields","timeInfo","spatialReference"],"service")}write(e,t){var r,i,n=(t=Object(a.a)(Object(a.a)({},t),{},{writeLayerSchema:null!=(r=null==(i=t)?void 0:i.writeLayerSchema)?r:this._hasMemorySource()})).origin,o=t.layerContainerType,s=t.messages;if(this.isTable){if("web-scene"===n||"web-map"===n&&"tables"!==o)return s&&s.push(new g.a("layer:unsupported","Layer (".concat(this.title,", ").concat(this.id,") of type '").concat(this.declaredClass,"' using a Table source cannot be written to web scenes and web maps"),{layer:this})),null;if(this._hasMemorySource())return s&&s.push(new g.a("layer:unsupported","Layer (".concat(this.title,", ").concat(this.id,") of type '").concat(this.declaredClass,"' using an in-memory Table source cannot be written to web scenes and web maps"),{layer:this})),null}else if(this.loaded&&"web-map"===n&&"tables"===o)return s&&s.push(new g.a("layer:unsupported","Layer (".concat(this.title,", ").concat(this.id,") of type '").concat(this.declaredClass,"' using a non-table source cannot be written to tables in web maps"),{layer:this})),null;return super.write(e,t)}_readEditingEnabled(e,t,r){var i,n=null==(i=e.layerDefinition)?void 0:i.capabilities;return n?this._hasEditingCapability(n):(n=e.capabilities,!(t&&"web-map"===(null==r?void 0:r.origin)&&!this._hasMemorySource()&&n)||this._hasEditingCapability(n))}_hasEditingCapability(e){return e.toLowerCase().split(",").map((e=>e.trim())).includes("editing")}_writeEditingEnabled(e,t,r,i){if(!e){var n,a,o=null!=(n=this.capabilities)&&null!=(a=n.operations)&&a.supportsSync?"Query,Sync":"Query";Object(c.c)("layerDefinition.capabilities",o,t),!r||null!=i&&i.writeLayerSchema||(t.capabilities=o)}}_checkAttachmentSupport(e){var{attributes:t}=e,{objectIdField:r}=this;return this.get("capabilities.data.supportsAttachment")?e?t?t[r]?void 0:Promise.reject(new g.a(Lt,"feature is missing the identifying attribute ".concat(r))):Promise.reject(new g.a(Lt,"'attributes' are required on a feature to query attachments")):Promise.reject(new g.a(Lt,"A feature is required to add/delete/update attachments")):Promise.reject(new g.a(Lt,"this layer doesn't support attachments"))}_getLayerDomain(e){var t=this.fieldsIndex.get(e);return t?t.domain:null}_fetchFirstLayerId(e){return Object(M.default)(this.url,{query:Object(a.a)({f:"json"},this.customParameters),responseType:"json",signal:e}).then((e=>{var t=e.data;if(t)return Array.isArray(t.layers)&&t.layers.length>0?t.layers[0].id:Array.isArray(t.tables)&&t.tables.length>0?t.tables[0].id:void 0}))}_initLayerProperties(e){var t=this;return Object(n.a)((function*(){return t._set("source",e),e.sourceJSON&&(t.sourceJSON=e.sourceJSON,t.read(e.sourceJSON,{origin:"service",url:t.parsedUrl})),t._verifySource(),t._verifyFields(),Object(x.l)(t.renderer,t.fields),Object(x.m)(t.timeInfo,t.fields),Object(Ct.a)(t,{origin:"service"})}))()}_verifyFields(){var e=this.parsedUrl&&this.parsedUrl.path||"undefined";this.objectIdField||console.log("FeatureLayer: 'objectIdField' property is not defined (url: "+e+")"),this.isTable||this._hasMemorySource()||-1!==e.search(/\/FeatureServer\//i)||this.fields&&this.fields.some((function(e){return"geometry"===e.type}))||console.log("FeatureLayer: unable to find field of type 'geometry' in the layer 'fields' list. If you are using a map service layer, features will not have geometry (url: "+e+")")}_fixTemplates(e,t){e&&e.forEach((e=>{var r=e.prototype&&e.prototype.attributes;r&&t&&delete r[t]}))}_verifySource(){if(this._hasMemorySource()){if(this.url)throw new g.a("feature-layer:mixed-source-and-url","FeatureLayer cannot be created with both an in-memory source and a url")}else if(!this.url)throw new g.a("feature-layer:source-or-url-required","FeatureLayer requires either a url, a valid portal item or a source")}_initMemorySource(e){e.forEach((e=>{e.layer=this,e.sourceLayer=this})),this._handles.add([e.on("after-add",(e=>{e.item.layer=this,e.item.sourceLayer=this})),e.on("after-remove",(e=>{e.item.layer=null,e.item.sourceLayer=null}))],"fl-source")}_resetMemorySource(e){e.forEach((e=>{e.layer=null,e.sourceLayer=null})),this._handles.remove("fl-source")}_hasMemorySource(){return!(this.url||!this.source)}_readAttachmentCapabilities(e){var t={supportsName:!1,supportsSize:!1,supportsContentType:!1,supportsKeywords:!1,supportsExifInfo:!1};return e&&Array.isArray(e)&&e.forEach((e=>{var r=Dt[e.name];r&&(t[r]=!!e.isEnabled)})),t}_readDataCapabilities(e){return{isVersioned:zt(e,"isDataVersioned",!1),supportsAttachment:zt(e,"hasAttachments",!1),supportsM:zt(e,"hasM",!1),supportsZ:zt(e,"hasZ",!1)}}_readMetadataCapabilities(e){return{supportsAdvancedFieldProperties:zt(e,"supportsFieldDescriptionProperty",!1)}}_readOperationsCapabilities(e,t){var r=e?e.toLowerCase().split(",").map((e=>e.trim())):[],i=-1!==r.indexOf("editing"),n=i&&-1!==r.indexOf("create"),a=i&&-1!==r.indexOf("delete"),o=i&&-1!==r.indexOf("update"),s=-1!==r.indexOf("changetracking");return i&&!(n||a||o)&&(n=a=o=!0),{supportsCalculate:zt(t,"supportsCalculate",!1),supportsTruncate:zt(t,"supportsTruncate",!1),supportsValidateSql:zt(t,"supportsValidateSql",!1),supportsAdd:n,supportsDelete:a,supportsEditing:i,supportsChangeTracking:s,supportsQuery:-1!==r.indexOf("query"),supportsQueryAttachments:zt(t.advancedQueryCapabilities,"supportsQueryAttachments",!1),supportsResizeAttachments:zt(t,"supportsAttachmentsResizing",!1),supportsSync:-1!==r.indexOf("sync"),supportsUpdate:o,supportsExceedsLimitStatistics:zt(t,"supportsExceedsLimitStatistics",!1)}}_readQueryCapabilities(e){var t,r=e.advancedQueryCapabilities,i=e.ownershipBasedAccessControlForFeatures,n=e.archivingInfo,a=null==(t=this.url)?void 0:t.includes("MapServer"),o=!Object(s.a)("mapserver-pbf-enabled")&&a&&this.version<10.81,c=(e.supportedQueryFormats||"").split(",").reduce(((e,t)=>{var r=t.toLowerCase().trim();return r&&e.add(r),e}),new Set);return{supportsStatistics:zt(r,"supportsStatistics",e.supportsStatistics),supportsPercentileStatistics:zt(r,"supportsPercentileStatistics",!1),supportsCentroid:zt(r,"supportsReturningGeometryCentroid",!1),supportsDistance:zt(r,"supportsQueryWithDistance",!1),supportsDistinct:zt(r,"supportsDistinct",e.supportsAdvancedQueries),supportsExtent:zt(r,"supportsReturningQueryExtent",!1),supportsGeometryProperties:zt(r,"supportsReturningGeometryProperties",!1),supportsHavingClause:zt(r,"supportsHavingClause",!1),supportsOrderBy:zt(r,"supportsOrderBy",e.supportsAdvancedQueries),supportsPagination:zt(r,"supportsPagination",!1),supportsQuantization:zt(e,"supportsCoordinatesQuantization",!1),supportsQuantizationEditMode:zt(e,"supportsQuantizationEditMode",!1),supportsQueryGeometry:zt(e,"supportsReturningQueryGeometry",!1),supportsResultType:zt(r,"supportsQueryWithResultType",!1),supportsMaxRecordCountFactor:zt(r,"supportsMaxRecordCountFactor",!1),supportsSqlExpression:zt(r,"supportsSqlExpression",!1),supportsStandardizedQueriesOnly:zt(e,"useStandardizedQueries",!1),supportsQueryByOthers:zt(i,"allowOthersToQuery",!0),supportsHistoricMoment:zt(n,"supportsQueryWithHistoricMoment",!1),supportsFormatPBF:!o&&c.has("pbf"),supportsDisjointSpatialRelationship:zt(r,"supportsDisjointSpatialRel",!1),supportsCacheHint:zt(r,"supportsQueryWithCacheHint",!1),maxRecordCountFactor:Gt(e,"maxRecordCountFactor",void 0),maxRecordCount:Gt(e,"maxRecordCount",void 0),standardMaxRecordCount:Gt(e,"standardMaxRecordCount",void 0),tileMaxRecordCount:Gt(e,"tileMaxRecordCount",void 0)}}_readQueryRelatedCapabilities(e){var t=e.advancedQueryCapabilities,r=zt(t,"supportsAdvancedQueryRelated",!1);return{supportsPagination:zt(t,"supportsQueryRelatedPagination",!1),supportsCount:r,supportsOrderBy:r}}_readEditingCapabilities(e){var t=e.ownershipBasedAccessControlForFeatures;return{supportsGeometryUpdate:zt(e,"allowGeometryUpdates",!0),supportsGlobalId:zt(e,"supportsApplyEditsWithGlobalIds",!1),supportsRollbackOnFailure:zt(e,"supportsRollbackOnFailureParameter",!1),supportsUpdateWithoutM:zt(e,"allowUpdateWithoutMValues",!1),supportsUploadWithItemId:zt(e,"supportsAttachmentsByUploadId",!1),supportsDeleteByAnonymous:zt(t,"allowAnonymousToDelete",!0),supportsDeleteByOthers:zt(t,"allowOthersToDelete",!0),supportsUpdateByAnonymous:zt(t,"allowAnonymousToUpdate",!0),supportsUpdateByOthers:zt(t,"allowOthersToUpdate",!0)}}};Object(o.a)([Object(d.b)({readOnly:!0,json:{read:!1}})],Ht.prototype,"capabilities",void 0),Object(o.a)([Object(f.a)("service","capabilities",["advancedQueryCapabilities","allowGeometryUpdates","allowUpdateWithoutMValues","archivingInfo","capabilities","hasAttachments","hasM","hasZ","maxRecordCount","maxRecordCountFactor","ownershipBasedAccessControlForFeatures","standardMaxRecordCount","supportedQueryFormats","supportsAdvancedQueries","supportsApplyEditsWithGlobalIds","supportsAttachmentsByUploadId","supportsAttachmentsResizing","supportsCalculate","supportsCoordinatesQuantization","supportsExceedsLimitStatistics","supportsFieldDescriptionProperty","supportsQuantizationEditMode","supportsRollbackOnFailureParameter","supportsStatistics","supportsTruncate","supportsValidateSql","tileMaxRecordCount","useStandardizedQueries"])],Ht.prototype,"readCapabilities",null),Object(o.a)([Object(d.b)({json:{origins:{"portal-item":{write:!0},"web-map":{write:!0}}}})],Ht.prototype,"charts",void 0),Object(o.a)([Object(d.b)({readOnly:!0})],Ht.prototype,"createQueryVersion",null),Object(o.a)([Object(d.b)({type:String,json:{read:{source:"layerDefinition.copyrightText"},origins:{service:{read:{source:"copyrightText"}}}}})],Ht.prototype,"copyright",void 0),Object(o.a)([Object(d.b)({type:String,json:{read:{source:"layerDefinition.displayField"},origins:{service:{read:{source:"displayField"}}}}})],Ht.prototype,"displayField",void 0),Object(o.a)([Object(d.b)({type:String,json:{origins:{service:{read:!1,write:!1}},read:{source:"layerDefinition.definitionExpression"},write:{target:"layerDefinition.definitionExpression"}}})],Ht.prototype,"definitionExpression",void 0),Object(o.a)([Object(d.b)({types:T.e,readOnly:!0})],Ht.prototype,"defaultSymbol",void 0),Object(o.a)([Object(d.b)({type:Et.a})],Ht.prototype,"dynamicDataSource",void 0),Object(o.a)([Object(d.b)({readOnly:!0})],Ht.prototype,"editFieldsInfo",void 0),Object(o.a)([Object(d.b)({type:Boolean})],Ht.prototype,"editingEnabled",void 0),Object(o.a)([Object(f.a)(["portal-item","web-scene"],"editingEnabled",["layerDefinition.capabilities"])],Ht.prototype,"readEditingEnabled",null),Object(o.a)([Object(f.a)("web-map","editingEnabled",["capabilities","layerDefinition.capabilities"])],Ht.prototype,"readEditingEnabledFromWebMap",null),Object(o.a)([Object(m.a)(["portal-item","web-scene"],"editingEnabled",{"layerDefinition.capabilities":{type:String}})],Ht.prototype,"writeEditingEnabled",null),Object(o.a)([Object(m.a)("web-map","editingEnabled",{capabilities:{type:String},"layerDefinition.capabilities":{type:String}})],Ht.prototype,"writeEditingEnabledToWebMap",null),Object(o.a)([Object(d.b)({readOnly:!0})],Ht.prototype,"editingInfo",void 0),Object(o.a)([Object(f.a)("editingInfo")],Ht.prototype,"readEditingInfo",null),Object(o.a)([Object(d.b)(k.b)],Ht.prototype,"elevationInfo",void 0),Object(o.a)([Object(d.b)({types:{key:"type",base:ht.a,typeMap:{selection:bt.a,cluster:ft.a}},json:{write:{target:"layerDefinition.featureReduction"}}})],Ht.prototype,"featureReduction",void 0),Object(o.a)([Object(f.a)("featureReduction",["layerDefinition.featureReduction"])],Ht.prototype,"readFeatureReduction",null),Object(o.a)([Object(m.a)("web-scene","featureReduction",{"layerDefinition.featureReduction":{types:vt.b}})],Ht.prototype,"writeWebSceneFeatureReduction",null),Object(o.a)([Object(d.b)(Object(a.a)(Object(a.a)({},Ut.fields),{},{json:{read:{source:"layerDefinition.fields"},origins:{service:{read:!0},"web-map":{write:{target:"layerDefinition.fields",overridePolicy:qt}}}}}))],Ht.prototype,"fields",void 0),Object(o.a)([Object(d.b)({readOnly:!0})],Ht.prototype,"fieldsIndex",null),Object(o.a)([Object(d.b)({type:xt.a,json:{read:{source:"layerDefinition.floorInfo"},write:{target:"layerDefinition.floorInfo"},origins:{"web-scene":{write:!1}}}})],Ht.prototype,"floorInfo",void 0),Object(o.a)([Object(d.b)({type:Ge,json:{name:"formInfo",write:!0,origins:{"web-scene":{read:!1,write:!1}}}})],Ht.prototype,"formTemplate",void 0),Object(o.a)([Object(d.b)({type:_.a,json:{origins:{service:{read:{source:"extent"}}},read:{source:"layerDefinition.extent"}}})],Ht.prototype,"fullExtent",void 0),Object(o.a)([Object(d.b)()],Ht.prototype,"gdbVersion",void 0),Object(o.a)([Object(d.b)({readOnly:!0,type:_t,json:{read:{source:"geometryProperties"}}})],Ht.prototype,"geometryFieldsInfo",void 0),Object(o.a)([Object(d.b)({type:["point","polygon","polyline","multipoint","multipatch","mesh"],json:{origins:{service:{read:Rt.read},"web-map":{write:{target:"layerDefinition.geometryType",overridePolicy:qt,writer(e,t,r){var i=e?Rt.toJSON(e):null;i&&Object(c.c)(r,i,t)}}}},read:{source:"layerDefinition.geometryType",reader:Rt.read}}})],Ht.prototype,"geometryType",void 0),Object(o.a)([Object(d.b)({type:Boolean,json:{origins:{service:{read:!0}},read:{source:"layerDefinition.hasM"}}})],Ht.prototype,"hasM",void 0),Object(o.a)([Object(d.b)({type:Boolean,json:{origins:{service:{read:!0}},read:{source:"layerDefinition.hasZ"}}})],Ht.prototype,"hasZ",void 0),Object(o.a)([Object(d.b)({readOnly:!0,type:I.a})],Ht.prototype,"heightModelInfo",void 0),Object(o.a)([Object(d.b)({type:Date})],Ht.prototype,"historicMoment",void 0),Object(o.a)([Object(d.b)(k.c)],Ht.prototype,"id",void 0),Object(o.a)([Object(d.b)({readOnly:!0,json:{origins:{"web-map":{write:{target:"layerDefinition.type"}}}}})],Ht.prototype,"isTable",void 0),Object(o.a)([Object(f.a)("service","isTable",["type","geometryType"]),Object(f.a)("isTable",["layerDefinition.type","layerDefinition.geometryType"])],Ht.prototype,"readIsTable",null),Object(o.a)([Object(m.a)("web-map","isTable")],Ht.prototype,"writeIsTable",null),Object(o.a)([Object(d.b)(k.d)],Ht.prototype,"labelsVisible",void 0),Object(o.a)([Object(d.b)({type:[pt.a],json:{origins:{service:{read:{source:"drawingInfo.labelingInfo",reader:wt.a},write:{target:"drawingInfo.labelingInfo",enabled:!1}}},read:{source:"layerDefinition.drawingInfo.labelingInfo",reader:wt.a},write:{target:"layerDefinition.drawingInfo.labelingInfo"}}})],Ht.prototype,"labelingInfo",void 0),Object(o.a)([Object(d.b)(k.i)],Ht.prototype,"opacity",void 0),Object(o.a)([Object(d.b)({type:Number,json:{origins:{service:{read:{source:"id"}}},read:!1}})],Ht.prototype,"layerId",void 0),Object(o.a)([Object(d.b)(k.e)],Ht.prototype,"legendEnabled",void 0),Object(o.a)([Object(d.b)({type:["show","hide"]})],Ht.prototype,"listMode",void 0),Object(o.a)([Object(d.b)(k.g)],Ht.prototype,"minScale",void 0),Object(o.a)([Object(f.a)("service","minScale",["minScale","effectiveMinScale"])],Ht.prototype,"readMinScale",null),Object(o.a)([Object(d.b)(k.f)],Ht.prototype,"maxScale",void 0),Object(o.a)([Object(f.a)("service","maxScale",["maxScale","effectiveMaxScale"])],Ht.prototype,"readMaxScale",null),Object(o.a)([Object(d.b)({type:String})],Ht.prototype,"globalIdField",void 0),Object(o.a)([Object(f.a)("globalIdField",["layerDefinition.globalIdField","layerDefinition.fields"]),Object(f.a)("service","globalIdField",["globalIdField","fields"])],Ht.prototype,"readGlobalIdFieldFromService",null),Object(o.a)([Object(d.b)({type:String,json:{origins:{"web-map":{write:{target:"layerDefinition.objectIdField",overridePolicy:qt}}}}})],Ht.prototype,"objectIdField",void 0),Object(o.a)([Object(f.a)("objectIdField",["layerDefinition.objectIdField","layerDefinition.fields"]),Object(f.a)("service","objectIdField",["objectIdField","fields"])],Ht.prototype,"readObjectIdFieldFromService",null),Object(o.a)([Object(d.b)({value:"ArcGISFeatureLayer",type:["ArcGISFeatureLayer"]})],Ht.prototype,"operationalLayerType",void 0),Object(o.a)([Object(d.b)(Ut.outFields)],Ht.prototype,"outFields",void 0),Object(o.a)([Object(d.b)({readOnly:!0})],Ht.prototype,"parsedUrl",null),Object(o.a)([Object(d.b)({type:String,json:{origins:{"web-scene":{read:!0,write:!0}},read:!1}})],Ht.prototype,"path",void 0),Object(o.a)([Object(d.b)(k.j)],Ht.prototype,"popupEnabled",void 0),Object(o.a)([Object(d.b)({type:S.a,json:{read:{source:"popupInfo"},write:{target:"popupInfo"}}})],Ht.prototype,"popupTemplate",void 0),Object(o.a)([Object(d.b)({readOnly:!0})],Ht.prototype,"defaultPopupTemplate",null),Object(o.a)([Object(d.b)({type:[Pt],readOnly:!0})],Ht.prototype,"relationships",void 0),Object(o.a)([Object(d.b)({types:L.a,json:{origins:{service:{write:{target:"drawingInfo.renderer",enabled:!1}},"web-scene":{types:L.b,write:{target:"layerDefinition.drawingInfo.renderer",writer:N.c}}},write:{target:"layerDefinition.drawingInfo.renderer",overridePolicy:(e,t,r)=>({ignoreOrigin:null==r?void 0:r.writeLayerSchema}),writer:N.c}}})],Ht.prototype,"renderer",null),Object(o.a)([Object(f.a)("service","renderer",["drawingInfo.renderer","defaultSymbol"]),Object(f.a)("renderer",["layerDefinition.drawingInfo.renderer","layerDefinition.defaultSymbol"])],Ht.prototype,"readRenderer",null),Object(o.a)([Object(d.b)()],Ht.prototype,"sourceJSON",void 0),Object(o.a)([Object(d.b)({type:Boolean})],Ht.prototype,"returnM",void 0),Object(o.a)([Object(d.b)({type:Boolean})],Ht.prototype,"returnZ",void 0),Object(o.a)([Object(d.b)(k.m)],Ht.prototype,"screenSizePerspectiveEnabled",void 0),Object(o.a)([Object(d.b)()],Ht.prototype,"source",null),Object(o.a)([Object(h.a)("source")],Ht.prototype,"castSource",null),Object(o.a)([Object(f.a)("portal-item","source",["featureSet"]),Object(f.a)("web-map","source",["featureSet"])],Ht.prototype,"readSource",null),Object(o.a)([Object(d.b)({readOnly:!0})],Ht.prototype,"serviceDefinitionExpression",void 0),Object(o.a)([Object(f.a)("service","serviceDefinitionExpression",["definitionQuery","definitionExpression"])],Ht.prototype,"readServiceDefinitionExpression",null),Object(o.a)([Object(d.b)({type:j.a,json:{origins:{service:{read:{source:"extent.spatialReference"}}},read:{source:"layerDefinition.extent.spatialReference"}}})],Ht.prototype,"spatialReference",void 0),Object(o.a)([Object(d.b)({type:[mt.a]})],Ht.prototype,"templates",void 0),Object(o.a)([Object(f.a)("templates",["editFieldsInfo","creatorField","editorField","templates"])],Ht.prototype,"readTemplates",null),Object(o.a)([Object(d.b)({type:lt.a})],Ht.prototype,"timeInfo",void 0),Object(o.a)([Object(d.b)()],Ht.prototype,"title",void 0),Object(o.a)([Object(f.a)("service","title",["name"]),Object(f.a)("portal-item","title",["layerDefinition.title","layerDefinition.name","title"])],Ht.prototype,"readTitle",null),Object(o.a)([Object(f.a)("web-map","title",["layerDefinition.name","title"])],Ht.prototype,"readTitleFromWebMap",null),Object(o.a)([Object(d.b)({type:String})],Ht.prototype,"sublayerTitleMode",void 0),Object(o.a)([Object(d.b)({type:String,json:{read:{source:"timeInfo.trackIdField"}}})],Ht.prototype,"trackIdField",void 0),Object(o.a)([Object(d.b)({json:{read:!1}})],Ht.prototype,"type",void 0),Object(o.a)([Object(d.b)({type:String})],Ht.prototype,"typeIdField",void 0),Object(o.a)([Object(f.a)("service","typeIdField"),Object(f.a)("typeIdField",["layerDefinition.typeIdField"])],Ht.prototype,"readTypeIdField",null),Object(o.a)([Object(d.b)({type:[gt.a]})],Ht.prototype,"types",void 0),Object(o.a)([Object(f.a)("service","types",["types"]),Object(f.a)("types",["layerDefinition.types"])],Ht.prototype,"readTypes",null),Object(o.a)([Object(d.b)({readOnly:!0,json:{write:!1}})],Ht.prototype,"serverGens",void 0),Object(o.a)([Object(d.b)({type:w.a.ofType(dt),readOnly:!0})],Ht.prototype,"indexes",void 0),Object(o.a)([Object(d.b)(k.n)],Ht.prototype,"url",null),Object(o.a)([Object(m.a)("url")],Ht.prototype,"writeUrl",null),Object(o.a)([Object(d.b)({readOnly:!0})],Ht.prototype,"userIsAdmin",void 0),Object(o.a)([Object(d.b)({json:{origins:{service:{read:!0}},read:!1}})],Ht.prototype,"version",void 0),Object(o.a)([Object(f.a)("service","version",["currentVersion","capabilities","drawingInfo","hasAttachments","htmlPopupType","relationships","timeInfo","typeIdField","types"])],Ht.prototype,"readVersion",null),Object(o.a)([Object(d.b)({type:Boolean,json:{origins:{"portal-item":{write:{target:"layerDefinition.defaultVisibility"}}}}})],Ht.prototype,"visible",void 0),Object(o.a)([Object(f.a)("portal-item","visible",["visibility","layerDefinition.defaultVisibility"])],Ht.prototype,"readVisible",null),Ht=Object(o.a)([Object(v.a)("esri.layers.FeatureLayer")],Ht);var Bt=Object(b.b)({types:T.i}),Wt=Ht;t.default=Wt},,,function(e,t,r){"use strict";r.d(t,"a",(function(){return d}));var i=r(118),n=(r(361),r(391)),a=(r(392),r(355)),o=r(296),s=r(393),c=(r(394),r(338),r(169)),l=["oid","global-id"],u=["oid","global-id","guid"];function d({displayField:e,editFieldsInfo:t,fields:r,objectIdField:a,title:o},l){if(!r)return null;var u=m({editFieldsInfo:t,fields:r,objectIdField:a},l);if(!u.length)return null;var d=function(e){var t=Object(i.n)(e),{titleBase:r}=e;return t?"".concat(r,": {").concat(t.trim(),"}"):r}({titleBase:o,fields:r,displayField:e}),h=[new s.a,new n.a];return new c.a({title:d,content:h,fieldInfos:u})}var h=[/^fnode_$/i,/^tnode_$/i,/^lpoly_$/i,/^rpoly_$/i,/^poly_$/i,/^subclass$/i,/^subclass_$/i,/^rings_ok$/i,/^rings_nok$/i,/shape/i,/perimeter/i,/objectid/i,/_i$/i],p=(e,{editFieldsInfo:t,objectIdField:r,visibleFieldNames:i})=>i?i.has(e.name):!b(e.name,t)&&(!r||e.name!==r)&&!(l.indexOf(e.type)>-1)&&!h.some((t=>t.test(e.name)));function f(e,t){return"oid"===e.type?-1:"oid"===t.type?1:y(e)?-1:y(t)?1:(e.alias||e.name).toLocaleLowerCase().localeCompare((t.alias||t.name).toLocaleLowerCase())}function b(e,t){if(!e||!t)return!1;var{creationDateField:r,creatorField:i,editDateField:n,editorField:a}=t;return-1!==[r&&r.toLowerCase(),i&&i.toLowerCase(),n&&n.toLowerCase(),a&&a.toLowerCase()].indexOf(e.toLowerCase())}function v(e,t){return e.editable&&-1===u.indexOf(e.type)&&!b(e.name,t)}function m({editFieldsInfo:e,fields:t,objectIdField:r},i){return function(e,t){var r=e;return t&&(e=e.filter((e=>-1===t.indexOf(e.type)))),e===r&&(e=e.slice()),e.sort(f),e}(t,(null==i?void 0:i.ignoreFieldTypes)||O).map((t=>new o.a({fieldName:t.name,isEditable:v(t,e),label:t.alias,format:g(t),visible:p(t,{editFieldsInfo:e,objectIdField:r,visibleFieldNames:null==i?void 0:i.visibleFieldNames})})))}function g(e){switch(e.type){case"small-integer":case"integer":case"single":return new a.a({digitSeparator:!0,places:0});case"double":return new a.a({digitSeparator:!0,places:2});case"date":return new a.a({dateFormat:"long-month-day-year"});default:return null}}function y(e){return"name"===(e.name&&e.name.toLowerCase())||("name"===(e.alias&&e.alias.toLowerCase())||void 0)}var O=["geometry","blob","raster","guid","xml"]},function(e,t,r){"use strict";r.d(t,"a",(function(){return be})),r.d(t,"b",(function(){return ye})),r.d(t,"c",(function(){return ve}));var i,n,a=r(91),o=r(7),s=r(80),c=r(93),l=r(94),u=r(226),d=r(89),h=r(165),p=r(160),f=r(289),b={geometryEngineWorker:()=>Promise.all([r.e(9),r.e(162)]).then(r.bind(null,1126)),CSVSourceWorker:()=>Promise.all([r.e(10),r.e(11),r.e(16),r.e(22),r.e(112)]).then(r.bind(null,1263)),EdgeProcessingWorker:()=>Promise.all([r.e(39),r.e(140)]).then(r.bind(null,1235)),ElevationSamplerWorker:()=>r.e(163).then(r.bind(null,1127)),GeoJSONSourceWorker:()=>Promise.all([r.e(10),r.e(11),r.e(16),r.e(22),r.e(106)]).then(r.bind(null,1128)),LercWorker:()=>r.e(219).then(r.bind(null,1129)),MemorySourceWorker:()=>Promise.all([r.e(10),r.e(11),r.e(16),r.e(22),r.e(105)]).then(r.bind(null,1130)),PBFDecoderWorker:()=>Promise.all([r.e(35),r.e(125)]).then(r.bind(null,1264)),Pipeline:()=>Promise.all([r.e(1),r.e(2),r.e(6),r.e(10),r.e(75)]).then(r.bind(null,1222)),PointCloudWorker:()=>Promise.all([r.e(10),r.e(102)]).then(r.bind(null,1240)),RasterWorker:()=>r.e(107).then(r.bind(null,1131)),SceneLayerWorker:()=>r.e(289).then(r.bind(null,1265)),WorkerTileHandler:()=>Promise.all([r.e(42),r.e(43),r.e(118)]).then(r.bind(null,1225)),FeatureServiceSnappingSourceWorker:()=>Promise.all([r.e(10),r.e(11),r.e(16),r.e(35),r.e(97)]).then(r.bind(null,1236))};(n=i||(i={}))[n.HANDSHAKE=0]="HANDSHAKE",n[n.OPEN=1]="OPEN",n[n.OPENED=2]="OPENED",n[n.RESPONSE=3]="RESPONSE",n[n.INVOKE=4]="INVOKE",n[n.ABORT=5]="ABORT",n[n.CLOSE=6]="CLOSE",n[n.OPEN_PORT=7]="OPEN_PORT",n[n.ON=8]="ON";var v=0;function m(){return v++}function g(e){return e?"string"==typeof e?JSON.stringify({name:"message",message:e}):e.toJSON?JSON.stringify(e):JSON.stringify({name:e.name,message:e.message,details:e.details||{stack:e.stack}}):null}function y(e,t,r,n){var a;t.type!==i.OPEN_PORT?t.type===i.INVOKE||t.type===i.RESPONSE?(!function(e){return e&&"object"==typeof e&&("result"in e||"transferList"in e)}(r)?(a=j(n),t.data=r):(a=j(r.transferList),t.data=r.result),a?e.postMessage(t,a):e.postMessage(t)):e.postMessage(t):e.postMessage(t,[t.port])}function O(e){if(!e)return null;var t=e.data;return t?"string"==typeof t?JSON.parse(t):t:null}function j(e){if(!e||!e.length)return null;if(Object(s.a)("esri-workers-arraybuffer-transfer"))return e;var t=e.filter((e=>!function(e){return e instanceof ArrayBuffer||e&&e.constructor&&"ArrayBuffer"===e.constructor.name}(e)));return t.length?t:null}var{CLOSE:_,ABORT:w,INVOKE:x,RESPONSE:S,OPEN_PORT:M,ON:T}=i;class P{constructor(e){this._timer=null,this._cancelledJobIds=new Set,this._invokeMessages=[],this._invoke=e,this._timer=null,this._process=this._process.bind(this)}push(e){e.type===i.ABORT?this._cancelledJobIds.add(e.jobId):(this._invokeMessages.push(e),null===this._timer&&(this._timer=setTimeout(this._process,0)))}clear(){this._invokeMessages.length=0,this._cancelledJobIds.clear(),this._timer=null}_process(){for(var e of(this._timer=null,this._invokeMessages))this._cancelledJobIds.has(e.jobId)||this._invoke(e);this._cancelledJobIds.clear(),this._invokeMessages.length=0}}class E{constructor(e,t){this._port=e,this._outJobs=new Map,this._inJobs=new Map,this._invokeQueue=new P((e=>this._onInvokeMessage(e))),this._messageQueue=new Array,this._client=t.client,this._onMessage=this._onMessage.bind(this),this._channel=t.channel,Object(d.k)(t.scheduler)&&(this._frameTask=t.scheduler.registerTask(f.b.REMOTE_CLIENT,(e=>this._update(e)),(()=>this._messageQueue.length>0))),this._port.addEventListener("message",this._onMessage),this._port.start()}static connect(e){var t,r=new MessageChannel;t="function"==typeof e?new e:"default"in e&&"function"==typeof e.default?new e.default:e;var i=new E(r.port1,{channel:r,client:t});return"object"==typeof t&&"remoteClient"in t&&(t.remoteClient=i),E.clients.set(i,t),r.port2}static loadWorker(e){var t=b[e];return t?t():Promise.resolve(null)}close(){this._post({type:_}),this._close()}isBusy(){return this._outJobs.size>0}invoke(e,t,r){var i=r&&r.signal,n=r&&r.transferList;if(!this._port)return Promise.reject(new c.a("worker:port-closed","Cannot call invoke('".concat(e,"'), port is closed"),{methodName:e,data:t}));var a=m();return new Promise(((r,o)=>{var s=Object(l.q)(i,(()=>{var e,t=this._outJobs.get(a);t&&(this._outJobs.delete(a),null==(e=t.abortHandle)||e.remove(),this._post({type:w,jobId:a}),o(Object(l.e)()))})),c={resolve:r,reject:o,abortHandle:s,debugInfo:e};this._outJobs.set(a,c),this._post({type:x,jobId:a,methodName:e,abortable:null!=i},t,n)}))}on(e,t){var r=new MessageChannel;function n(e){t(e.data)}return this._port.postMessage({type:i.ON,eventType:e,port:r.port2},[r.port2]),r.port1.addEventListener("message",n),r.port1.start(),{remove(){r.port1.postMessage({type:i.CLOSE}),r.port1.close(),r.port1.removeEventListener("message",n)}}}openPort(){var e=new MessageChannel;return this._post({type:M,port:e.port2}),e.port1}_close(){this._channel&&(this._channel=null),this._port.removeEventListener("message",this._onMessage),this._port.close(),this._outJobs.forEach((e=>{var t;null==(t=e.abortHandle)||t.remove(),e.reject(Object(l.e)("Worker closing, aborting job calling '".concat(e.debugInfo,"'")))})),this._inJobs.clear(),this._outJobs.clear(),this._invokeQueue.clear(),this._port=this._client=null,this._frameTask=Object(d.p)(this._frameTask)}_onMessage(e){Object(d.k)(this._frameTask)?this._messageQueue.push(e):this._processMessage(e)}_processMessage(e){var t=O(e);if(t)switch(t.type){case S:this._onResponseMessage(t);break;case x:this._invokeQueue.push(t);break;case w:this._onAbortMessage(t);break;case _:this._onCloseMessage();break;case M:this._onOpenPortMessage(t);break;case T:this._onOnMessage(t)}}_onAbortMessage(e){var t=this._inJobs,r=e.jobId,i=t.get(r);this._invokeQueue.push(e),i&&(i.controller&&i.controller.abort(),t.delete(r))}_onCloseMessage(){var e=this._client;this._close(),e&&"destroy"in e&&E.clients.get(this)===e&&e.destroy(),E.clients.delete(this),e&&e.remoteClient&&(e.remoteClient=null)}_onInvokeMessage(e){var t,{methodName:r,jobId:i,data:n,abortable:a}=e,o=a?Object(l.d)():null,s=this._inJobs,c=this._client,u=c[r];try{if(!u&&r&&-1!==r.indexOf("."))for(var d=r.split("."),h=0;h<d.length-1;h++)u=(c=c[d[h]])[d[h+1]];if("function"!=typeof u)throw new TypeError("".concat(r," is not a function"));t=u.call(c,n,{client:this,signal:o?o.signal:null})}catch(p){return void this._post({type:S,jobId:i,error:g(p)})}Object(l.o)(t)?(s.set(i,{controller:o,promise:t}),t.then((e=>{s.has(i)&&(s.delete(i),this._post({type:S,jobId:i},e))}),(e=>{s.has(i)&&(s.delete(i),Object(l.m)(e)||this._post({type:S,jobId:i,error:g(e||{message:"Error encountered at method ".concat(r)})}))}))):this._post({type:S,jobId:i},t)}_onOpenPortMessage(e){new E(e.port,{client:this._client})}_onOnMessage(e){var{port:t}=e,r=this._client.on(e.eventType,(e=>{t.postMessage(e)})),n=Object(h.c)(e.port,"message",(e=>{O(e).type===i.CLOSE&&(n.remove(),r.remove(),t.close())}))}_onResponseMessage(e){var t,{jobId:r,error:i,data:n}=e,a=this._outJobs;if(a.has(r)){var o=a.get(r);a.delete(r),null==(t=o.abortHandle)||t.remove(),i?o.reject(c.a.fromJSON(JSON.parse(i))):o.resolve(n)}}_update(e){for(;!e.done&&this._messageQueue.length>0;)this._processMessage(this._messageQueue.shift()),e.madeProgress()}_post(e,t,r){return y(this._port,e,t,r)}}E.kernelInfo={revision:u.b,version:p.d,buildDate:u.a},E.clients=new Map;var C=E,A=r(81),I=r(217),k=A.a.getLogger("esri.core.workers.Connection");var F=class{constructor(){this._clients=new Array,this._clientPromises=new Array,this._clientIdx=0}destroy(){this.close()}get closed(){return!this._clients||!this._clients.length}open(e,t){var r=this;return new Promise(((i,n)=>{var a=!0,o=e=>{Object(l.u)(t.signal),a&&(a=!1,e())};this._clients.length=e.length,this._clientPromises.length=e.length;for(var s=function(a){var s=e[a];Object(l.o)(s)?r._clientPromises[a]=s.then((e=>(r._clients[a]=new C(e,t),o(i),r._clients[a])),(()=>(o(n),null))):(r._clients[a]=new C(s,t),r._clientPromises[a]=Promise.resolve(r._clients[a]),o(i))},c=0;c<e.length;++c)s(c)}))}broadcast(e,t,r){for(var i=new Array(this._clientPromises.length),n=0;n<this._clientPromises.length;++n){var a=this._clientPromises[n];i[n]=a.then((i=>i.invoke(e,t,r)))}return i}close(){for(var e of this._clientPromises)e.then((e=>e.close()));this._clients.length=0,this._clientPromises.length=0}getAvailableClient(){for(var e,t=0;t<this._clients.length;++t){var r=this._clients[t];if(r){if(!r.isBusy())return Promise.resolve(r)}else(e=e||[]).push(this._clientPromises[t])}return e?Promise.race(e):(this._clientIdx=(this._clientIdx+1)%this._clients.length,Promise.resolve(this._clients[this._clientIdx]))}invoke(e,t,r){var i=null;return Array.isArray(r)?(k.warn("invoke()","The transferList parameter is deprecated, use the options object instead"),i={transferList:r}):i=r,this.closed?Promise.reject(new Error("Connection closed")):this.getAvailableClient().then((r=>r.invoke(e,t,i)))}on(e,t){return Promise.all(this._clientPromises).then((()=>Object(I.b)(this._clients.map((r=>r.on(e,t))))))}openPorts(){var e=this;return new Promise((t=>{for(var r=new Array(this._clientPromises.length),i=r.length,n=function(n){e._clientPromises[n].then((e=>{r[n]=e.openPort(),0==--i&&t(r)}))},a=0;a<this._clientPromises.length;++a)n(a)}))}get test(){return{numClients:this._clients.length}}},R=r(159),D=r(83),L=r(148),N=r(162),V=(r(171),{});var z=function(e){var t,r={async:e.async,isDebug:e.isDebug,locale:e.locale,baseUrl:e.baseUrl,has:Object(a.a)({},e.has),map:Object(a.a)({},e.map),packages:e.packages&&e.packages.concat()||[],paths:Object(a.a)({},e.paths)};return e.hasOwnProperty("async")||(r.async=!0),e.hasOwnProperty("isDebug")||(r.isDebug=!1),e.baseUrl||(r.baseUrl=V.baseUrl),null==(t=V.packages)||t.forEach((e=>{!function(e,t){for(var r of e)if(r.name===t.name)return;e.push(t)}(r.packages,e)})),r},G=r(158);class U{constructor(){var e=document.createDocumentFragment();["addEventListener","dispatchEvent","removeEventListener"].forEach((t=>{this[t]=(...r)=>e[t](...r)}))}}var q=G.a.MutationObserver||G.a.WebKitMutationObserver,H=function(){var e;if(G.a.process&&G.a.process.nextTick)e=e=>{G.a.process.nextTick(e)};else if(G.a.Promise)e=e=>{G.a.Promise.resolve().then(e)};else if(q){var t=[],r=document.createElement("div");new q((()=>{for(;t.length>0;)t.shift()()})).observe(r,{attributes:!0}),e=e=>{t.push(e),r.setAttribute("queueStatus","1")}}return e}(),B=(()=>{var e=G.a.MessageEvent;try{new e("message",{data:null})}catch(t){return(e,t={})=>{var{data:r,bubbles:i=!1,cancelable:n=!1}=t,a=document.createEvent("Event");return a.initEvent(e,i,n),a.data=r,a}}return(t,r)=>new e(t,r)})();var W=class{constructor(){this._dispatcher=new U,this._workerPostMessage({type:i.HANDSHAKE})}terminate(){}get onmessage(){return this._onmessageHandler}set onmessage(e){this._onmessageHandler&&this.removeEventListener("message",this._onmessageHandler),this._onmessageHandler=e,e&&this.addEventListener("message",e)}get onmessageerror(){return this._onmessageerrorHandler}set onmessageerror(e){this._onmessageerrorHandler&&this.removeEventListener("messageerror",this._onmessageerrorHandler),this._onmessageerrorHandler=e,e&&this.addEventListener("messageerror",e)}get onerror(){return this._onerrorHandler}set onerror(e){this._onerrorHandler&&this.removeEventListener("error",this._onerrorHandler),this._onerrorHandler=e,e&&this.addEventListener("error",e)}postMessage(e){H((()=>{this._workerMessageHandler(B("message",{data:e}))}))}dispatchEvent(e){return this._dispatcher.dispatchEvent(e)}addEventListener(e,t,r){this._dispatcher.addEventListener(e,t,r)}removeEventListener(e,t,r){this._dispatcher.removeEventListener(e,t,r)}_workerPostMessage(e){H((()=>{this.dispatchEvent(B("message",{data:e}))}))}_workerMessageHandler(e){var t=this;return Object(o.a)((function*(){var r=O(e);if(r&&r.type===i.OPEN){var{modulePath:n,jobId:a}=r,o=yield C.loadWorker(n);o||(o=yield import(n));var s=C.connect(o);t._workerPostMessage({type:i.OPENED,jobId:a,data:s})}}))()}},J=A.a.getLogger("esri.core.workers");s.a.add("esri-workers-arraybuffer-transfer",!Object(s.a)("safari")||Object(s.a)("safari")>=12);var Z,X,{HANDSHAKE:Y}=i,Q='let globalId=0;const outgoing=new Map,configuration=JSON.parse("{CONFIGURATION}");self.esriConfig=configuration.esriConfig;const workerPath=self.esriConfig.workers.workerPath,HANDSHAKE=0,OPEN=1,OPENED=2,RESPONSE=3,INVOKE=4,ABORT=5;function createAbortError(){const e=new Error("Aborted");return e.name="AbortError",e}function receiveMessage(e){return e&&e.data?"string"==typeof e.data?JSON.parse(e.data):e.data:null}function invokeStaticMessage(e,o,r){const t=r&&r.signal,n=globalId++;return new Promise(((r,i)=>{if(t){if(t.aborted)return i(createAbortError());t.addEventListener("abort",(()=>{outgoing.get(n)&&(outgoing.delete(n),self.postMessage({type:5,jobId:n}),i(createAbortError()))}))}outgoing.set(n,{resolve:r,reject:i}),self.postMessage({type:4,jobId:n,methodName:e,abortable:null!=t,data:o})}))}let workerRevisionChecked=!1;function checkWorkerRevision(e){if(!workerRevisionChecked&&e.kernelInfo){workerRevisionChecked=!0;const{revision:o,buildDate:r,version:t}=configuration.kernelInfo,{revision:n,buildDate:i,version:s}=e.kernelInfo;o!==n&&console.warn(`[esri.core.workers] Version mismatch detected between ArcGIS API for JavaScript and assets:\nAPI version: ${t} [Date: ${r}, Revision: ${o.slice(0,8)}]\nAssets version: ${s} [Date: ${i}, Revision: ${n.slice(0,8)}]`)}}function messageHandler(e){const o=receiveMessage(e);if(!o)return;const r=o.jobId;switch(o.type){case 1:let e;function t(o){const t=e.connect(o);self.postMessage({type:2,jobId:r,data:t},[t])}"function"==typeof define&&define.amd?require([workerPath],(r=>{e=r.default||r,checkWorkerRevision(e),e.loadWorker(o.modulePath).then((e=>e||new Promise((e=>{require([o.modulePath],e)})))).then(t)})):"System"in self&&"function"==typeof System.import?System.import(workerPath).then((r=>(e=r.default,checkWorkerRevision(e),e.loadWorker(o.modulePath)))).then((e=>e||System.import(o.modulePath))).then(t):(self.RemoteClient||importScripts(workerPath),e=self.RemoteClient.default||self.RemoteClient,checkWorkerRevision(e),e.loadWorker(o.modulePath).then(t));break;case 3:if(outgoing.has(r)){const e=outgoing.get(r);outgoing.delete(r),o.error?e.reject(JSON.parse(o.error)):e.resolve(o.data)}}}self.dojoConfig=configuration.loaderConfig,esriConfig.workers.loaderUrl&&(self.importScripts(esriConfig.workers.loaderUrl),"function"==typeof require&&"function"==typeof require.config&&require.config(configuration.loaderConfig)),self.addEventListener("message",messageHandler),self.postMessage({type:0});',K="Failed to create Worker. Fallback to execute module in main thread";function $(){return($=Object(o.a)((function*(){if(!Object(s.a)("esri-workers"))return ee(new W);if(!Z&&!X)try{var e=Q.replace('"{CONFIGURATION}"',"'".concat(re(),"'"));Z=URL.createObjectURL(new Blob([e],{type:"text/javascript"}))}catch(r){X=r||{}}var t;if(Z)try{t=new Worker(Z,{name:"esri-worker-"+ie++})}catch(r){J.warn(K,X),t=new W}else J.warn(K,X),t=new W;return ee(t)}))).apply(this,arguments)}function ee(e){return te.apply(this,arguments)}function te(){return(te=Object(o.a)((function*(e){return new Promise((t=>{function r(n){var a=O(n);a&&a.type===Y&&(e.removeEventListener("message",r),e.removeEventListener("error",i),t(e))}function i(t){t.preventDefault(),e.removeEventListener("message",r),e.removeEventListener("error",i),J.warn("Failed to create Worker. Fallback to execute module in main thread",t),(e=new W).addEventListener("message",r),e.addEventListener("error",i)}e.addEventListener("message",r),e.addEventListener("error",i)}))}))).apply(this,arguments)}function re(){var e;if(null!=R.a.default){var t=Object(a.a)({},R.a);delete t.default,e=JSON.parse(JSON.stringify(t))}else e=JSON.parse(JSON.stringify(R.a));e.assetsPath=Object(D.z)(e.assetsPath),e.request.interceptors=[],e.log.interceptors=[],e.locale=Object(L.b)(),e.has={"csp-restrictions":Object(s.a)("csp-restrictions"),"esri-2d-debug":!1,"esri-2d-update-debug":Object(s.a)("esri-2d-update-debug"),"esri-2d-query-centroid-enabled":Object(s.a)("esri-2d-query-centroid-enabled"),"featurelayer-pbf":Object(s.a)("featurelayer-pbf"),"featurelayer-snapshot-point-threshold":Object(s.a)("featurelayer-snapshot-point-threshold"),"esri-atomics":Object(s.a)("esri-atomics"),"esri-shared-array-buffer":Object(s.a)("esri-shared-array-buffer"),"esri-tiles-debug":Object(s.a)("esri-tiles-debug"),"esri-workers-arraybuffer-transfer":Object(s.a)("esri-workers-arraybuffer-transfer"),"host-webworker":1},e.workers.loaderUrl&&(e.workers.loaderUrl=Object(D.z)(e.workers.loaderUrl)),e.workers.workerPath?e.workers.workerPath=Object(D.z)(e.workers.workerPath):e.workers.workerPath=Object(D.z)(Object(N.a)("esri/core/workers/RemoteClient.js"));var r=R.a.workers.loaderConfig,i=z({baseUrl:null==r?void 0:r.baseUrl,locale:Object(L.b)(),has:Object(a.a)({"csp-restrictions":Object(s.a)("csp-restrictions"),"dojo-test-sniff":0,"host-webworker":1},null==r?void 0:r.has),map:Object(a.a)({},null==r?void 0:r.map),paths:Object(a.a)({},null==r?void 0:r.paths),packages:(null==r?void 0:r.packages)||[]}),n={version:p.d,buildDate:u.a,revision:u.b};return JSON.stringify({esriConfig:e,loaderConfig:i,kernelInfo:n})}var ie=0,ne=A.a.getLogger("esri.core.workers"),{ABORT:ae,INVOKE:oe,OPEN:se,OPENED:ce,RESPONSE:le}=i;class ue{constructor(e,t){this._outJobs=new Map,this._inJobs=new Map,this.worker=e,this.id=t,e.addEventListener("message",this._onMessage.bind(this)),e.addEventListener("error",(e=>{e.preventDefault(),ne.error(e)}))}static create(e){return Object(o.a)((function*(){var t=yield function(){return $.apply(this,arguments)}();return new ue(t,e)}))()}terminate(){this.worker.terminate()}open(e,t={}){var r=this;return Object(o.a)((function*(){var{signal:i}=t,n=m();return new Promise(((t,a)=>{var o={resolve:t,reject:a,abortHandle:Object(l.q)(i,(()=>{r._outJobs.delete(n),r._post({type:ae,jobId:n})}))};r._outJobs.set(n,o),r._post({type:se,jobId:n,modulePath:e})}))}))()}_onMessage(e){var t=O(e);if(t)switch(t.type){case ce:this._onOpenedMessage(t);break;case le:this._onResponseMessage(t);break;case ae:this._onAbortMessage(t);break;case oe:this._onInvokeMessage(t)}}_onAbortMessage(e){var t=this._inJobs,r=e.jobId,i=t.get(r);i&&(i.controller&&i.controller.abort(),t.delete(r))}_onInvokeMessage(e){var t,{methodName:r,jobId:i,data:n,abortable:a}=e,o=a?Object(l.d)():null,s=this._inJobs,c=p.e[r];try{if("function"!=typeof c)throw new TypeError("".concat(r," is not a function"));t=c.call(null,n,{signal:o?o.signal:null})}catch(u){return void this._post({type:le,jobId:i,error:g(u)})}Object(l.o)(t)?(s.set(i,{controller:o,promise:t}),t.then((e=>{s.has(i)&&(s.delete(i),this._post({type:le,jobId:i},e))}),(e=>{s.has(i)&&(s.delete(i),e||(e={message:"Error encountered at method"+r}),Object(l.m)(e)||this._post({type:le,jobId:i,error:g(e||{message:"Error encountered at method ".concat(r)})}))}))):this._post({type:le,jobId:i},t)}_onOpenedMessage(e){var t,{jobId:r,data:i}=e,n=this._outJobs.get(r);n&&(this._outJobs.delete(r),null==(t=n.abortHandle)||t.remove(),n.resolve(i))}_onResponseMessage(e){var t,{jobId:r,error:i,data:n}=e,a=this._outJobs.get(r);a&&(this._outJobs.delete(r),null==(t=a.abortHandle)||t.remove(),i?a.reject(c.a.fromJSON(JSON.parse(i))):a.resolve(n))}_post(e,t,r){return y(this.worker,e,t,r)}}var de=ue,he=Object(s.a)("esri-workers-debug")?1:Object(s.a)("host-browser")?navigator.hardwareConcurrency-1:0;he||(he=Object(s.a)("safari")&&Object(s.a)("mac")||Object(s.a)("trident")?7:2);var pe=0,fe=[];function be(){_e()}function ve(e,t){return me(e,{client:t})}function me(e,t){return ge.apply(this,arguments)}function ge(){return(ge=Object(o.a)((function*(e,t){var r=new F;return yield r.open(e,t),r}))).apply(this,arguments)}function ye(e){return Oe.apply(this,arguments)}function Oe(){return(Oe=Object(o.a)((function*(e,t={}){if("string"!=typeof e)throw new c.a("workers:undefined-module","modulePath is missing");var r=t.strategy||"distributed";if(Object(s.a)("host-webworker")&&!Object(s.a)("esri-workers")&&(r="local"),"local"===r){var i=yield C.loadWorker(e);i||(i=yield import(e)),Object(l.u)(t.signal);var n=t.client||i;return me([C.connect(i)],Object(a.a)(Object(a.a)({},t),{},{client:n}))}if(yield _e(),Object(l.u)(t.signal),"dedicated"===r){var o=pe++%he;return me([yield fe[o].open(e,t)],t)}if(t.maxNumWorkers&&t.maxNumWorkers>0){var u=Math.min(t.maxNumWorkers,he);if(u<he){for(var d=new Array(u),h=0;h<u;++h){var p=pe++%he;d[h]=fe[p].open(e,t)}return me(d,t)}}return me(fe.map((r=>r.open(e,t))),t)}))).apply(this,arguments)}var je=null;function _e(){return we.apply(this,arguments)}function we(){return(we=Object(o.a)((function*(){if(je)return je;Object(l.d)();for(var e=[],t=function(t){var r=de.create(t).then((e=>(fe[t]=e,e)));e.push(r)},r=0;r<he;r++)t(r);return je=Promise.all(e)}))).apply(this,arguments)}},function(e,t,r){"use strict";r.d(t,"a",(function(){return h})),r.d(t,"b",(function(){return n})),r.d(t,"c",(function(){return a})),r.d(t,"d",(function(){return c})),r.d(t,"e",(function(){return l})),r.d(t,"f",(function(){return u})),r.d(t,"g",(function(){return d})),r.d(t,"h",(function(){return s})),r.d(t,"i",(function(){return p})),r.d(t,"j",(function(){return f}));var i=r(112);function n(e){if(!e)return null;if(Array.isArray(e))return e;var t=e.hasZ,r=e.hasM;if("point"===e.type)return r&&t?[e.x,e.y,e.z,e.m]:t?[e.x,e.y,e.z]:r?[e.x,e.y,e.m]:[e.x,e.y];if("polygon"===e.type)return e.rings.slice(0);if("polyline"===e.type)return e.paths.slice(0);if("multipoint"===e.type)return e.points.slice(0);if("extent"===e.type){var i=e.clone().normalize();if(!i)return null;var n=!1,a=!1;return i.forEach((e=>{e.hasZ&&(n=!0),e.hasM&&(a=!0)})),i.map((e=>{var t=[[e.xmin,e.ymin],[e.xmin,e.ymax],[e.xmax,e.ymax],[e.xmax,e.ymin],[e.xmin,e.ymin]];if(n&&e.hasZ)for(var r=.5*(e.zmax-e.zmin),i=0;i<t.length;i++)t[i].push(r);if(a&&e.hasM)for(var o=.5*(e.mmax-e.mmin),s=0;s<t.length;s++)t[s].push(o);return t}))}return null}function a(e,t){var r=t[0]-e[0],i=t[1]-e[1];if(e.length>2&&t.length>2){var n=e[2]-t[2];return Math.sqrt(r*r+i*i+n*n)}return Math.sqrt(r*r+i*i)}function o(e,t,r){var i=e[0]+r*(t[0]-e[0]),n=e[1]+r*(t[1]-e[1]);return e.length>2&&t.length>2?[i,n,e[2]+r*(t[2]-e[2])]:[i,n]}function s(e,t,r,i){var[n,a]=t,[o,s]=r[i],[c,l]=r[i+1],u=c-o,d=l-s,h=u*u+d*d,p=(n-o)*u+(a-s)*d,f=Math.min(1,Math.max(0,p/h));return e[0]=o+u*f,e[1]=s+d*f,e}function c(e,t){return o(e,t,.5)}function l(e){for(var t=e.length,r=0,i=0;i<t-1;++i)r+=a(e[i],e[i+1]);return r}function u(e,t){if(t<=0)return e[0];for(var r=e.length,i=0,n=0;n<r-1;++n){var s=a(e[n],e[n+1]);if(t-i<s){var c=(t-i)/s;return o(e[n],e[n+1],c)}i+=s}return e[r-1]}function d(e,t,r){for(var i=e.length,n=0,a=0,o=0,s=0;s<i;s++){var c=e[s],l=e[(s+1)%i],u=2;n+=c[0]*l[1]-l[0]*c[1],c.length>2&&l.length>2&&r&&(a+=c[0]*l[2]-l[0]*c[2],u=3),c.length>u&&l.length>u&&t&&(o+=c[0]*l[u]-l[0]*c[u])}return n<=0&&a<=0&&o<=0}function h(e){if("rings"in e){for(var t of e.rings)t.length<3||t[0][0]===t[t.length-1][0]&&t[0][1]===t[t.length-1][1]||t.push([t[0][0],t[0][1]]);if(e.rings.length>0&&!d(e.rings[0],e.hasM,e.hasZ))for(var r=0;r<e.rings.length;++r)e.rings[r]=e.rings[r].reverse()}}function p(e){return"polygon"!==e.type&&"polyline"!==e.type||f("polygon"===e.type?e.rings:e.paths,e.spatialReference),e}function f(e,t){var r=Object(i.d)(t);if(r){var n=r.valid[0],a=r.valid[1],o=a-n,s=function(e){var t=1/0,r=-1/0;e.forEach((e=>{for(var i=e[0];i<n;)i+=o;for(;i>a;)i-=o;t=Math.min(t,i),r=Math.max(r,i),e[0]=i}));var i=r-t;o-i<i&&e.forEach((e=>{e[0]<0&&(e[0]+=o)}))};for(var c of e)s(c)}}},function(e,t,r){"use strict";r.r(t),r.d(t,"getAllSizes",(function(){return x})),r.d(t,"getColor",(function(){return f})),r.d(t,"getOpacity",(function(){return b})),r.d(t,"getRotationAngle",(function(){return v})),r.d(t,"getSize",(function(){return m})),r.d(t,"getSizeForValue",(function(){return O})),r.d(t,"getSizeFromNumberOrVariable",(function(){return g})),r.d(t,"getSizeRangeAtScale",(function(){return j})),r.d(t,"getVisualVariableValues",(function(){return _})),r.d(t,"viewScaleRE",(function(){return p}));var i=r(180),n=r(89),a=r(81),o=r(109),s=r(123),c=r(193),l=r(233),u=a.a.getLogger("esri.renderers.visualVariables.support.visualVariableUtils"),d=new s.a,h=Math.PI,p=/^\s*(return\s+)?\$view\.scale\s*(;)?\s*$/i;function f(e,t,r){var i="visualVariables"in e&&e.visualVariables?e.visualVariables.filter((e=>"color"===e.type))[0]:e;if(i)if("esri.renderers.visualVariables.ColorVariable"===i.declaredClass){var a="number"==typeof t,s=a?null:t,c=s&&s.attributes,l=a?t:null,d=i.field,{ipData:h,hasExpression:p}=i.cache,f=i.cache.compiledFunc;if(!d&&!p){var b=i.stops;return b&&b[0]&&b[0].color}if("number"!=typeof l)if(p){if(!Object(n.k)(r)||!Object(n.k)(r.arcade))return void u.error("Use of arcade expressions requires an arcade context");var v={viewingMode:r.viewingMode,scale:r.scale,spatialReference:r.spatialReference},m=r.arcade.arcadeUtils,g=m.getViewInfo(v),y=m.createExecContext(s,g);if(!f){var O=m.createSyntaxTree(i.valueExpression);f=m.createFunction(O),i.cache.compiledFunc=f}l=m.executeFunction(f,y)}else c&&(l=c[d]);var j=i.normalizationField,_=c?parseFloat(c[j]):void 0;if(null!=l&&(!j||a||!isNaN(_)&&0!==_)){isNaN(_)||a||(l/=_);var x=w(l,h);if(x){var S=x[0],M=x[1],T=S===M?i.stops[S].color:o.a.blendColors(i.stops[S].color,i.stops[M].color,x[2],Object(n.k)(r)?r.color:void 0);return new o.a(T)}}}else u.warn("The visualVariable should be an instance of esri.renderers.visualVariables.ColorVariable")}function b(e,t,r){var i="visualVariables"in e&&e.visualVariables?e.visualVariables.filter((e=>"opacity"===e.type))[0]:e;if(i)if("esri.renderers.visualVariables.OpacityVariable"===i.declaredClass){var a="number"==typeof t,o=a?null:t,s=o&&o.attributes,c=a?t:null,l=i.field,{ipData:d,hasExpression:h}=i.cache,p=i.cache.compiledFunc;if(!l&&!h){var f=i.stops;return f&&f[0]&&f[0].opacity}if("number"!=typeof c)if(h){if(Object(n.j)(r)||Object(n.j)(r.arcade))return void u.error("Use of arcade expressions requires an arcade context");var b={viewingMode:r.viewingMode,scale:r.scale,spatialReference:r.spatialReference},v=r.arcade.arcadeUtils,m=v.getViewInfo(b),g=v.createExecContext(o,m);if(!p){var y=v.createSyntaxTree(i.valueExpression);p=v.createFunction(y),i.cache.compiledFunc=p}c=v.executeFunction(p,g)}else s&&(c=s[l]);var O=i.normalizationField,j=s?parseFloat(s[O]):void 0;if(null!=c&&(!O||a||!isNaN(j)&&0!==j)){isNaN(j)||a||(c/=j);var _=w(c,d);if(_){var x=_[0],S=_[1];if(x===S)return i.stops[x].opacity;var M=i.stops[x].opacity;return M+(i.stops[S].opacity-M)*_[2]}}}else u.warn("The visualVariable should be an instance of esri.renderers.visualVariables.OpacityVariable")}function v(e,t,r){var i="visualVariables"in e&&e.visualVariables?e.visualVariables.filter((e=>"rotation"===e.type))[0]:e;if(i){if("esri.renderers.visualVariables.RotationVariable"===i.declaredClass){var a=i.axis||"heading",o="heading"===a&&"arithmetic"===i.rotationType?90:0,s="heading"===a&&"arithmetic"===i.rotationType?-1:1,c="number"==typeof t?null:t,l=c&&c.attributes,d=i.field,{hasExpression:h}=i.cache,p=i.cache.compiledFunc,f=0;if(!d&&!h)return f;if(h){if(Object(n.j)(r)||Object(n.j)(r.arcade))return void u.error("Use of arcade expressions requires an arcade context");var b={viewingMode:r.viewingMode,scale:r.scale,spatialReference:r.spatialReference},v=r.arcade.arcadeUtils,m=v.getViewInfo(b),g=v.createExecContext(c,m);if(!p){var y=v.createSyntaxTree(i.valueExpression);p=v.createFunction(y),i.cache.compiledFunc=p}f=v.executeFunction(p,g)}else l&&(f=l[d]||0);return f="number"!=typeof f||isNaN(f)?null:o+s*f}u.warn("The visualVariable should be an instance of esri.renderers.visualVariables.RotationVariable")}}function m(e,t,r){var i="visualVariables"in e&&e.visualVariables?e.visualVariables.filter((e=>"size"===e.type))[0]:e;if(i){if("esri.renderers.visualVariables.SizeVariable"===i.declaredClass){var a=O(function(e,t,r){var i="number"==typeof t,a=i?null:t,o=a&&a.attributes,s=i?t:null,{isScaleDriven:c}=e.cache,d=e.cache.compiledFunc;if(c){var h=Object(n.k)(r)?r.scale:void 0,p=Object(n.k)(r)?r.view:void 0;s=null==h||"3d"===p?function(e){var t=null,r=null,i=e.stops;return i?(t=i[0].value,r=i[i.length-1].value):(t=e.minDataValue||0,r=e.maxDataValue||0),(t+r)/2}(e):h}else if(!i)switch(e.inputValueType){case"expression":if(Object(n.j)(r)||Object(n.j)(r.arcade))return void u.error("Use of arcade expressions requires an arcade context");var f={viewingMode:r.viewingMode,scale:r.scale,spatialReference:r.spatialReference},b=r.arcade.arcadeUtils,v=b.getViewInfo(f),m=b.createExecContext(a,v);if(!d){var g=b.createSyntaxTree(e.valueExpression);d=b.createFunction(g),e.cache.compiledFunc=d}s=b.executeFunction(d,m);break;case"field":o&&(s=o[e.field]);break;case"unknown":s=null}if(!Object(l.d)(s))return null;if(i||!e.normalizationField)return s;var y=o?parseFloat(o[e.normalizationField]):null;return Object(l.d)(y)&&0!==y?s/y:null}(i,t,r),i,t,r,i.cache.ipData);return null==a||isNaN(a)?0:a}u.warn("The visualVariable should be an instance of esri.renderers.visualVariables.SizeVariable")}}function g(e,t,r){return null==e?null:Object(l.c)(e)?m(e,t,r):Object(l.d)(e)?e:null}function y(e,t,r){return Object(l.d)(r)&&e>r?r:Object(l.d)(t)&&e<t?t:e}function O(e,t,r,i,a){switch(t.transformationType){case"additive":return function(e,t,r,i){return e+(g(t.minSize,r,i)||t.minDataValue)}(e,t,r,i);case"constant":return function(e,t,r){var i=e.stops,n=i&&i.length&&i[0].size;return null==n&&(n=e.minSize),g(n,t,r)}(t,r,i);case"clamped-linear":return function(e,t,r,i){var a=(e-t.minDataValue)/(t.maxDataValue-t.minDataValue),o=g(t.minSize,r,i),s=g(t.maxSize,r,i),c=Object(n.k)(i)?i.shape:void 0;if(e<=t.minDataValue)return o;if(e>=t.maxDataValue)return s;if("area"===t.scaleBy&&c){var l="circle"===c,u=l?h*Math.pow(o/2,2):o*o,d=u+a*((l?h*Math.pow(s/2,2):s*s)-u);return l?2*Math.sqrt(d/h):Math.sqrt(d)}return o+a*(s-o)}(e,t,r,i);case"proportional":return function(e,t,r,i){var a=Object(n.k)(i)?i.shape:void 0,o=e/t.minDataValue,s=g(t.minSize,r,i),c=g(t.maxSize,r,i);return y("circle"===a?2*Math.sqrt(o*Math.pow(s/2,2)):"square"===a||"diamond"===a||"image"===a?Math.sqrt(o*Math.pow(s,2)):o*s,s,c)}(e,t,r,i);case"stops":return function(e,t,r,i,n){var[a,o,s]=w(e,n);if(a===o)return g(t.stops[a].size,r,i);var c=g(t.stops[a].size,r,i);return c+(g(t.stops[o].size,r,i)-c)*s}(e,t,r,i,a);case"real-world-size":return function(e,t,r,i){var a=(Object(n.k)(i)&&i.resolution?i.resolution:1)*c.a[t.valueUnit],o=g(t.minSize,r,i),s=g(t.maxSize,r,i),{valueRepresentation:l}=t;return y("area"===l?2*Math.sqrt(e/h)/a:"radius"===l||"distance"===l?2*e/a:e/a,o,s)}(e,t,r,i);case"identity":return e;case"unknown":return null}}function j(e,t,r){var{isScaleDriven:i}=e.cache;if(!(i&&"3d"===r||t))return null;var n={scale:t,view:r},a=g(e.minSize,d,n),o=g(e.maxSize,d,n);if(null!=a||null!=o){if(a>o){var s=o;o=a,a=s}return{minSize:a,maxSize:o}}}function _(e,t,r){if(e.visualVariables){var i=[],n=[],a=[],o=[],s=[];for(var c of e.visualVariables)switch(c.type){case"color":n.push(c);break;case"opacity":a.push(c);break;case"rotation":s.push(c);break;case"size":o.push(c)}return n.forEach((e=>{var n=f(e,t,r);i.push({variable:e,value:n})})),a.forEach((e=>{var n=b(e,t,r);i.push({variable:e,value:n})})),s.forEach((e=>{var n=v(e,t,r);i.push({variable:e,value:n})})),o.forEach((e=>{var n=m(e,t,r);i.push({variable:e,value:n})})),i.filter((e=>null!=e.value))}}function w(e,t){if(t){var r=0,i=t.length-1;return t.some(((t,n)=>e<t?(i=n,!0):(r=n,!1))),[r,i,(e-t[r])/(t[i]-t[r])]}}function x(e,t,r){var n=["proportional","proportional","proportional"];for(var a of e){var o=a.useSymbolValue?"symbol-value":m(a,t,r);switch(a.axis){case"width":n[0]=o;break;case"depth":n[1]=o;break;case"height":n[2]=o;break;case"width-and-depth":n[0]=o,n[1]=o;break;case"all":case void 0:case null:n[0]=o,n[1]=o,n[2]=o;break;default:Object(i.a)(a.axis)}}return n}},function(e,t,r){"use strict";var i,n=r(82),a=(r(80),r(81),r(88),r(85)),o=r(84),s=(r(83),r(86),r(87),r(90)),c=r(109),l=i=class extends s.a{constructor(e){super(e),this.color=null,this.ratio=null}clone(){return new i({color:this.color,ratio:this.ratio})}};Object(n.a)([Object(a.b)({type:c.a,json:{write:!0}})],l.prototype,"color",void 0),Object(n.a)([Object(a.b)({type:Number,json:{write:!0}})],l.prototype,"ratio",void 0);var u=l=i=Object(n.a)([Object(o.a)("esri.renderers.support.HeatmapColorStop")],l);t.a=u},function(e,t,r){"use strict";r.d(t,"a",(function(){return T})),r.d(t,"b",(function(){return p})),r.d(t,"c",(function(){return v})),r.d(t,"d",(function(){return n})),r.d(t,"e",(function(){return _})),r.d(t,"f",(function(){return M})),r.d(t,"g",(function(){return o})),r.d(t,"h",(function(){return c})),r.d(t,"i",(function(){return l})),r.d(t,"j",(function(){return s})),r.d(t,"k",(function(){return w})),r.d(t,"l",(function(){return a})),r.d(t,"m",(function(){return g})),r.d(t,"n",(function(){return S})),r.d(t,"o",(function(){return b})),r.d(t,"p",(function(){return m})),r.d(t,"q",(function(){return j})),r.d(t,"r",(function(){return O})),r.d(t,"s",(function(){return y})),r.d(t,"t",(function(){return f}));var i=r(89);r(103),r(125);function n(e=P){return[e[0],e[1],e[2],e[3],e[4],e[5]]}function a(e,t,r,i,a,o,s=n()){return s[0]=e,s[1]=t,s[2]=r,s[3]=i,s[4]=a,s[5]=o,s}function o(e,t){e[0]=Math.min(e[0],t[0]),e[1]=Math.min(e[1],t[1]),e[2]=Math.min(e[2],t[2]),e[3]=Math.max(e[3],t[3]),e[4]=Math.max(e[4],t[4]),e[5]=Math.max(e[5],t[5])}function s(e,t){e[0]=Math.min(e[0],t[0]),e[1]=Math.min(e[1],t[1]),e[2]=Math.min(e[2],t[2]),e[3]=Math.max(e[3],t[0]),e[4]=Math.max(e[4],t[1]),e[5]=Math.max(e[5],t[2])}function c(e,t,r=0,i=t.length/3){for(var n=e[0],a=e[1],o=e[2],s=e[3],c=e[4],l=e[5],u=0;u<i;u++)n=Math.min(n,t[r+3*u]),a=Math.min(a,t[r+3*u+1]),o=Math.min(o,t[r+3*u+2]),s=Math.max(s,t[r+3*u]),c=Math.max(c,t[r+3*u+1]),l=Math.max(l,t[r+3*u+2]);e[0]=n,e[1]=a,e[2]=o,e[3]=s,e[4]=c,e[5]=l}function l(e,t,r){var i=t.length,n=e[0],a=e[1],o=e[2],s=e[3],c=e[4],l=e[5];if(r)for(var u=0;u<i;u++){var d=t[u];n=Math.min(n,d[0]),a=Math.min(a,d[1]),o=Math.min(o,d[2]),s=Math.max(s,d[0]),c=Math.max(c,d[1]),l=Math.max(l,d[2])}else for(var h=0;h<i;h++){var p=t[h];n=Math.min(n,p[0]),a=Math.min(a,p[1]),s=Math.max(s,p[0]),c=Math.max(c,p[1])}e[0]=n,e[1]=a,e[2]=o,e[3]=s,e[4]=c,e[5]=l}function u(e){return e[0]>=e[3]?0:e[3]-e[0]}function d(e){return e[1]>=e[4]?0:e[4]-e[1]}function h(e){return e[2]>=e[5]?0:e[5]-e[2]}function p(e,t=[0,0,0]){return t[0]=e[0]+u(e)/2,t[1]=e[1]+d(e)/2,t[2]=e[2]+h(e)/2,t}function f(e,t=[0,0,0]){return t[0]=u(e),t[1]=d(e),t[2]=h(e),t}function b(e){return Math.max(u(e),h(e),d(e))}function v(e,t){return t[0]>=e[0]&&t[1]>=e[1]&&t[2]>=e[2]&&t[0]<=e[3]&&t[1]<=e[4]&&t[2]<=e[5]}function m(e,t,r=e){var i=e[0]+u(e)/2,n=e[1]+d(e)/2,a=e[2]+h(e)/2;return r[0]=i+(e[0]-i)*t,r[1]=n+(e[1]-n)*t,r[2]=a+(e[2]-a)*t,r[3]=i+(e[3]-i)*t,r[4]=n+(e[4]-n)*t,r[5]=a+(e[5]-a)*t,r}function g(e,t){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t}function y(e,t,r=e){return r[0]=t[0],r[1]=t[1],r[2]=t[2],r!==e&&(r[3]=e[3],r[4]=e[4],r[5]=e[5]),r}function O(e,t,r=e){return r[3]=t[0],r[4]=t[1],r[5]=t[2],r!==e&&(r[0]=e[0],r[1]=e[1],r[2]=e[2]),e}function j(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e}function _(e){return e?j(e,T):n(T)}function w(e,t){return e[0]=t[0],e[1]=t[1],e[2]=Number.NEGATIVE_INFINITY,e[3]=t[2],e[4]=t[3],e[5]=Number.POSITIVE_INFINITY,e}function x(e){return 6===e.length}function S(e){return 0===u(e)&&0===d(e)&&0===h(e)}function M(e,t,r){if(Object(i.j)(e)||Object(i.j)(t))return e===t;if(!x(e)||!x(t))return!1;if(r){for(var n=0;n<e.length;n++)if(!r(e[n],t[n]))return!1}else for(var a=0;a<e.length;a++)if(e[a]!==t[a])return!1;return!0}var T=[1/0,1/0,1/0,-1/0,-1/0,-1/0],P=[0,0,0,0,0,0];n()},function(e,t,r){"use strict";r.d(t,"a",(function(){return s})),r.d(t,"b",(function(){return o}));var i,n=r(120),a=r(119);function o(e,t){e.fragment.uniforms.add("terrainDepthTexture","sampler2D"),e.fragment.uniforms.add("cameraNearFar","vec2"),e.fragment.uniforms.add("inverseViewport","vec2"),e.fragment.code.add(Object(a.a)(i||(i=Object(n.a)(["\n    //Compare the linearized depths of the fragment and the terrain. If fragment is on the wrong side of the terrain, discard it.\n    void terrainDepthTest(vec4 fragCoord, float fragmentDepth){\n\n      float terrainDepth = linearDepthFromTexture(terrainDepthTexture, fragCoord.xy * inverseViewport, cameraNearFar);\n      if(fragmentDepth "," terrainDepth){\n        discard;\n      }\n    }\n  "])),t.cullAboveGround?">":"<="))}function s(e,t,r){r.multipassTerrainEnabled&&r.terrainLinearDepthTexture&&(e.setUniform1i("terrainDepthTexture",10),t.bindTexture(r.terrainLinearDepthTexture,10))}},function(e,t,r){"use strict";r.d(t,"a",(function(){return l}));var i=r(124),n=r(143),a=r(81),o=r(256),s=r(248),c=a.a.getLogger("esri.intl");function l(e,t,r={}){var{format:a={}}=r;return Object(n.c)(e,(e=>function(e,t,r){var n,a,o=e.indexOf(":");if(-1===o?n=e.trim():(n=e.slice(0,o).trim(),a=e.slice(o+1).trim()),!n)return"";var s=Object(i.b)(n,t);if(null==s)return"";var c=r[a]||r[n];return c?u(s,c):a?d(s,a):h(s)}(e,t,a)))}function u(e,t){switch(t.type){case"date":return Object(o.b)(e,t.intlOptions);case"number":return Object(s.b)(e,t.intlOptions);default:return c.warn("missing format descriptor for key {key}"),h(e)}}function d(e,t){switch(t.toLowerCase()){case"dateformat":return Object(o.b)(e);case"numberformat":return Object(s.b)(e);default:return c.warn("inline format is unsupported since 4.12: ".concat(t)),/^(dateformat|datestring)/i.test(t)?Object(o.b)(e):/^numberformat/i.test(t)?Object(s.b)(e):h(e)}}function h(e){switch(typeof e){case"string":return e;case"number":return Object(s.b)(e);case"boolean":return""+e;default:return e instanceof Date?Object(o.b)(e):""}}},function(e,t,r){"use strict";r.d(t,"a",(function(){return n})),r.d(t,"b",(function(){return o})),r.d(t,"c",(function(){return a})),r.d(t,"d",(function(){return s})),r.d(t,"e",(function(){return c})),r.d(t,"f",(function(){return u})),r.d(t,"g",(function(){return l}));var i=[252,146,31,255],n={type:"esriSMS",style:"esriSMSCircle",size:6,color:i,outline:{type:"esriSLS",style:"esriSLSSolid",width:.75,color:[153,153,153,255]}},a={type:"esriSLS",style:"esriSLSSolid",width:.75,color:i},o={type:"esriSFS",style:"esriSFSSolid",color:[252,146,31,196],outline:{type:"esriSLS",style:"esriSLSSolid",width:.75,color:[255,255,255,191]}},s={type:"esriTS",color:[255,255,255,255],font:{family:"arial-unicode-ms",size:10,weight:"bold"},horizontalAlignment:"center",kerning:!0,haloColor:[0,0,0,255],haloSize:1,rotated:!1,text:"",xoffset:0,yoffset:0,angle:0},c={type:"esriSMS",style:"esriSMSCircle",color:[0,0,0,255],outline:null,size:10.5},l={type:"esriSLS",style:"esriSLSSolid",color:[0,0,0,255],width:1.5},u={type:"esriSFS",style:"esriSFSSolid",color:[0,0,0,255],outline:null}},,,,function(e,t,r){"use strict";r(80);var i=r(89),n=["layout","centroid","smooth","case","mat2x2","mat2x3","mat2x4","mat3x2","mat3x3","mat3x4","mat4x2","mat4x3","mat4x4","uint","uvec2","uvec3","uvec4","samplerCubeShadow","sampler2DArray","sampler2DArrayShadow","isampler2D","isampler3D","isamplerCube","isampler2DArray","usampler2D","usampler3D","usamplerCube","usampler2DArray","coherent","restrict","readonly","writeonly","resource","atomic_uint","noperspective","patch","sample","subroutine","common","partition","active","filter","image1D","image2D","image3D","imageCube","iimage1D","iimage2D","iimage3D","iimageCube","uimage1D","uimage2D","uimage3D","uimageCube","image1DArray","image2DArray","iimage1DArray","iimage2DArray","uimage1DArray","uimage2DArray","image1DShadow","image2DShadow","image1DArrayShadow","image2DArrayShadow","imageBuffer","iimageBuffer","uimageBuffer","sampler1DArray","sampler1DArrayShadow","isampler1D","isampler1DArray","usampler1D","usampler1DArray","isampler2DRect","usampler2DRect","samplerBuffer","isamplerBuffer","usamplerBuffer","sampler2DMS","isampler2DMS","usampler2DMS","sampler2DMSArray","isampler2DMSArray","usampler2DMSArray","trunc","round","roundEven","isnan","isinf","floatBitsToInt","floatBitsToUint","intBitsToFloat","uintBitsToFloat","packSnorm2x16","unpackSnorm2x16","packUnorm2x16","unpackUnorm2x16","packHalf2x16","unpackHalf2x16","outerProduct","transpose","determinant","inverse","texture","textureSize","textureProj","textureLod","textureOffset","texelFetch","texelFetchOffset","textureProjOffset","textureLodOffset","textureProjLod","textureProjLodOffset","textureGrad","textureGradOffset","textureProjGrad","textureProjGradOffset"],a=r(208),o=999,s=["block-comment","line-comment","preprocessor","operator","integer","float","ident","builtin","keyword","whitespace","eof","integer"];function c(){var e,t,r,i=0,n=0,c=o,l=[],u=[],d=1,h=0,p=0,f=!1,b=!1,v="";return function(e){return u=[],null!==e?g(e.replace?e.replace(/\r\n/g,"\n"):e):(l.length&&m(l.join("")),c=10,m("(eof)"),u)};function m(e){e.length&&u.push({type:s[c],data:e,position:p,line:d,column:h})}function g(a){var s;for(i=0,r=(v+=a).length;e=v[i],i<r;){switch(s=i,c){case 0:i="/"===e&&"*"===t?(l.push(e),m(l.join("")),c=o,i+1):(l.push(e),t=e,i+1);break;case 1:case 2:i=y();break;case 3:i=O();break;case 4:i="."===e||/[eE]/.test(e)?(l.push(e),c=5,t=e,i+1):"x"===e&&1===l.length&&"0"===l[0]?(c=11,l.push(e),t=e,i+1):/[^\d]/.test(e)?(m(l.join("")),c=o,i):(l.push(e),t=e,i+1);break;case 11:i=/[^a-fA-F0-9]/.test(e)?(m(l.join("")),c=o,i):(l.push(e),t=e,i+1);break;case 5:"f"===e&&(l.push(e),t=e,i+=1),i=/[eE]/.test(e)||"-"===e&&/[eE]/.test(t)?(l.push(e),t=e,i+1):/[^\d]/.test(e)?(m(l.join("")),c=o,i):(l.push(e),t=e,i+1);break;case 9999:i=_();break;case 9:i=/[^\s]/g.test(e)?(m(l.join("")),c=o,i):(l.push(e),t=e,i+1);break;case o:l=l.length?[]:l,i="/"===t&&"*"===e?(p=n+i-1,c=0,t=e,i+1):"/"===t&&"/"===e?(p=n+i-1,c=1,t=e,i+1):"#"===e?(c=2,p=n+i,i):/\s/.test(e)?(c=9,p=n+i,i):(f=/\d/.test(e),b=/[^\w_]/.test(e),p=n+i,c=f?4:b?3:9999,i)}if(s!==i)switch(v[s]){case"\n":h=0,++d;break;default:++h}}return n+=i,v=v.slice(i),u}function y(){return"\r"!==e&&"\n"!==e||"\\"===t?(l.push(e),t=e,i+1):(m(l.join("")),c=o,i)}function O(){if("."===t&&/\d/.test(e))return c=5,i;if("/"===t&&"*"===e)return c=0,i;if("/"===t&&"/"===e)return c=1,i;if("."===e&&l.length){for(;j(l););return c=5,i}if(";"===e||")"===e||"("===e){if(l.length)for(;j(l););return m(e),c=o,i+1}var r=2===l.length&&"="!==e;if(/[\w_\d\s]/.test(e)||r){for(;j(l););return c=o,i}return l.push(e),t=e,i+1}function j(e){for(var t,r,i=0;;){if(t=a.c.indexOf(e.slice(0,e.length+i).join("")),r=a.c[t],-1===t){if(i--+e.length>0)continue;r=e.slice(0,1).join("")}return m(r),p+=r.length,(l=l.slice(r.length)).length}}function _(){if(/[^\d\w_]/.test(e)){var r=l.join("");return c=a.b.indexOf(r)>-1?8:a.a.indexOf(r)>-1?7:6,m(l.join("")),c=o,i}return l.push(e),t=e,i+1}}function l(e){return function(e){var t=c(),r=[];return(r=r.concat(t(e))).concat(t(null))}(e)}var u=["GL_OES_standard_derivatives","GL_EXT_frag_depth","GL_EXT_draw_buffers","GL_EXT_shader_texture_lod"];function d(e,t){for(var r=t-1;r>=0;r--){var i=e[r];if("whitespace"!==i.type&&"block-comment"!==i.type){if("keyword"!==i.type)break;if("attribute"===i.data||"in"===i.data)return!0}}return!1}function h(e,t,r,i){for(var n of(i=i||r,e))if("ident"===n.type&&n.data===r)return i in t?t[i]++:t[i]=0,h(e,t,i+"_"+t[i],i);return r}function p(e,t,r="afterVersion"){function i(e,t){for(var r=t;r<e.length;r++){var i=e[r];if("operator"===i.type&&";"===i.data)return r}return null}var n={data:"\n",type:"whitespace"},a=t=>t<e.length&&/[^\r\n]$/.test(e[t].data),o=function(e){for(var t=-1,n=0,a=-1,o=0;o<e.length;o++){var s=e[o];if("preprocessor"===s.type&&(s.data.match(/\#(if|ifdef|ifndef)\s+.+/)?++n:s.data.match(/\#endif\s*.*/)&&--n),"afterVersion"!==r&&"afterPrecision"!==r||"preprocessor"===s.type&&/^#version/.test(s.data)&&(a=Math.max(a,o)),"afterPrecision"===r&&"keyword"===s.type&&"precision"===s.data){var c=i(e,o);if(null===c)throw new Error("precision statement not followed by any semicolons!");a=Math.max(a,c)}t<a&&0===n&&(t=o)}return t+1}(e);for(var s of(a(o-1)&&e.splice(o++,0,n),t))e.splice(o++,0,s);a(o-1)&&a(o)&&e.splice(o,0,n)}function f(e,t,r,i="lowp"){p(e,[{type:"keyword",data:"out"},{type:"whitespace",data:" "},{type:"keyword",data:i},{type:"whitespace",data:" "},{type:"keyword",data:r},{type:"whitespace",data:" "},{type:"ident",data:t},{type:"operator",data:";"}],"afterPrecision")}function b(e,t,r,i,n="lowp"){p(e,[{type:"keyword",data:"layout"},{type:"operator",data:"("},{type:"keyword",data:"location"},{type:"whitespace",data:" "},{type:"operator",data:"="},{type:"whitespace",data:" "},{type:"integer",data:i.toString()},{type:"operator",data:")"},{type:"whitespace",data:" "},{type:"keyword",data:"out"},{type:"whitespace",data:" "},{type:"keyword",data:n},{type:"whitespace",data:" "},{type:"keyword",data:r},{type:"whitespace",data:" "},{type:"ident",data:t},{type:"operator",data:";"}],"afterPrecision")}function v(e,t){for(var r,i,n=-1,a=t;a<e.length;a++){var o=e[a];if("operator"===o.type&&("["===o.data&&(r=a),"]"===o.data)){i=a;break}"integer"===o.type&&(n=parseInt(o.data,10))}return r&&i&&e.splice(r,i-r+1),n}function m(e,t){var r=l(e);if("300 es"===function(e,t="100",r="300 es"){var i=/^\s*\#version\s+([0-9]+(\s+[a-zA-Z]+)?)\s*/;for(var n of e)if("preprocessor"===n.type){var a=i.exec(n.data);if(a){var o=a[1].replace(/\s\s+/g," ");if(o===r)return o;if(o===t)return n.data="#version "+r,t;throw new Error("unknown glsl version: "+o)}}return e.splice(0,0,{type:"preprocessor",data:"#version "+r},{type:"whitespace",data:"\n"}),null}(r,"100","300 es"))throw new Error("shader is already glsl 300 es");for(var i=null,a=null,o={},s={},c=0;c<r.length;++c){var p=r[c];switch(p.type){case"keyword":"vertex"===t&&"attribute"===p.data?p.data="in":"varying"===p.data&&(p.data="vertex"===t?"out":"in");break;case"builtin":if(/^texture(2D|Cube)(Proj)?(Lod|Grad)?(EXT)?$/.test(p.data.trim())&&(p.data=p.data.replace(/(2D|Cube|EXT)/g,"")),"fragment"===t&&"gl_FragColor"===p.data&&(i||f(r,i=h(r,o,"fragColor"),"vec4"),p.data=i),"fragment"===t&&"gl_FragData"===p.data){var m=v(r,c+1),g=h(r,o,"fragData");b(r,g,"vec4",m,"mediump"),p.data=g}else"fragment"===t&&"gl_FragDepthEXT"===p.data&&(a||(a=h(r,o,"gl_FragDepth")),p.data=a);break;case"ident":if(n.indexOf(p.data)>=0){if("vertex"===t&&d(r,c))throw new Error("attribute in vertex shader uses a name that is a reserved word in glsl 300 es");p.data in s||(s[p.data]=h(r,o,p.data)),p.data=s[p.data]}}}for(var y=r.length-1;y>=0;--y){var O=r[y];if("preprocessor"===O.type){var j=O.data.match(/\#extension\s+(.*)\:/);if(j&&j[1]&&u.indexOf(j[1].trim())>=0){var _=r[y+1];r.splice(y,_&&"whitespace"===_.type?2:1)}var w=O.data.match(/\#ifdef\s+(.*)/);w&&w[1]&&u.indexOf(w[1].trim())>=0&&(O.data="#if 1");var x=O.data.match(/\#ifndef\s+(.*)/);x&&x[1]&&u.indexOf(x[1].trim())>=0&&(O.data="#if 0")}}return r.map((e=>"eof"!==e.type?e.data:"")).join("")}class g{constructor(e,t,r,i,n={}){if(this._context=null,this._glName=null,this._locations={},this._initialized=!1,this._vShader=null,this._fShader=null,this._defines={},this._nameToUniformLocation={},this._nameToAttribLocation={},this._nameToUniform1={},this._nameToUniform1v={},this._nameToUniform2={},this._nameToUniform3={},this._nameToUniform4={},this._nameToUniformMatrix3={},this._nameToUniformMatrix4={},e||console.error("RenderingContext isn't initialized!"),0===t.length&&console.error("Shaders source should not be empty!"),e.instanceCounter.increment(3,this),this._context=e,this._vertexShaderSource=t,this._fragmentShaderSource=r,Array.isArray(n))for(var a of n)this._defines[a]="1";else this._defines=n;this._locations=i}get glName(){return this._glName}get locations(){return this._locations}getDefine(e){return this._defines[e]}dispose(){if(this._context){var e=this._context.gl;if(this._vShader){var t=this._vShader;e.deleteShader(t),this._vShader=null}if(this._fShader){var r=this._fShader;e.deleteShader(r),this._fShader=null}this._glName&&(e.deleteProgram(this._glName),this._glName=null),this._context.instanceCounter.decrement(3,this),this._context=null}}initialize(){if(!this._initialized){this._vShader=this._loadShader(35633),this._fShader=this._loadShader(35632),this._vShader&&this._fShader||console.error("Error loading shaders!");var e=this._context.gl,t=e.createProgram();for(var r in e.attachShader(t,this._vShader),e.attachShader(t,this._fShader),this._locations){var i=this._locations[r];e.bindAttribLocation(t,i,r)}e.linkProgram(t),this._glName=t,this._initialized=!0}}getUniformLocation(e){return this.initialize(),void 0===this._nameToUniformLocation[e]&&(this._nameToUniformLocation[e]=this._context.gl.getUniformLocation(this._glName,e)),this._nameToUniformLocation[e]}hasUniform(e){return null!==this.getUniformLocation(e)}getAttribLocation(e){return this.initialize(),void 0===this._nameToAttribLocation[e]&&(this._nameToAttribLocation[e]=this._context.gl.getAttribLocation(this._glName,e)),this._nameToAttribLocation[e]}setUniform1i(e,t){var r=this._nameToUniform1[e];void 0!==r&&t===r||(this._context.bindProgram(this),this._context.gl.uniform1i(this.getUniformLocation(e),t),this._nameToUniform1[e]=t)}setUniform1iv(e,t){var r=this._nameToUniform1v[e];y(r,t)&&(this._context.bindProgram(this),this._context.gl.uniform1iv(this.getUniformLocation(e),t),void 0===r?this._nameToUniform1v[e]=g._arrayCopy(t):g._arrayAssign(t,r))}setUniform2iv(e,t){var r=this._nameToUniform2[e];y(r,t)&&(this._context.bindProgram(this),this._context.gl.uniform2iv(this.getUniformLocation(e),t),void 0===r?this._nameToUniform2[e]=g._arrayCopy(t):g._arrayAssign(t,r))}setUniform3iv(e,t){var r=this._nameToUniform3[e];y(r,t)&&(this._context.bindProgram(this),this._context.gl.uniform3iv(this.getUniformLocation(e),t),void 0===r?this._nameToUniform3[e]=g._arrayCopy(t):g._arrayAssign(t,r))}setUniform4iv(e,t){var r=this._nameToUniform4[e];y(r,t)&&(this._context.bindProgram(this),this._context.gl.uniform4iv(this.getUniformLocation(e),t),void 0===r?this._nameToUniform4[e]=g._arrayCopy(t):g._arrayAssign(t,r))}setUniform1f(e,t){var r=this._nameToUniform1[e];void 0!==r&&t===r||(this._context.bindProgram(this),this._context.gl.uniform1f(this.getUniformLocation(e),t),this._nameToUniform1[e]=t)}setUniform1fv(e,t){var r=this._nameToUniform1v[e];y(r,t)&&(this._context.bindProgram(this),this._context.gl.uniform1fv(this.getUniformLocation(e),t),void 0===r?this._nameToUniform1v[e]=g._arrayCopy(t):g._arrayAssign(t,r))}setUniform2f(e,t,r){var i=this._nameToUniform2[e];void 0!==i&&t===i[0]&&r===i[1]||(this._context.bindProgram(this),this._context.gl.uniform2f(this.getUniformLocation(e),t,r),void 0===i?this._nameToUniform2[e]=[t,r]:(i[0]=t,i[1]=r))}setUniform2fv(e,t){var r=this._nameToUniform2[e];y(r,t)&&(this._context.bindProgram(this),this._context.gl.uniform2fv(this.getUniformLocation(e),t),void 0===r?this._nameToUniform2[e]=g._arrayCopy(t):g._arrayAssign(t,r))}setUniform3f(e,t,r,i){var n=this._nameToUniform3[e];void 0!==n&&t===n[0]&&r===n[1]&&i===n[2]||(this._context.bindProgram(this),this._context.gl.uniform3f(this.getUniformLocation(e),t,r,i),void 0===n?this._nameToUniform3[e]=[t,r,i]:(n[0]=t,n[1]=r,n[2]=i))}setUniform3fv(e,t){var r=this._nameToUniform3[e];y(r,t)&&(this._context.bindProgram(this),this._context.gl.uniform3fv(this.getUniformLocation(e),t),void 0===r?this._nameToUniform3[e]=g._arrayCopy(t):g._arrayAssign(t,r))}setUniform4f(e,t,r,i,n){var a=this._nameToUniform4[e];void 0!==a&&t===a[0]&&r===a[1]&&i===a[2]&&n===a[3]||(this._context.bindProgram(this),this._context.gl.uniform4f(this.getUniformLocation(e),t,r,i,n),void 0===a?this._nameToUniform4[e]=[t,r,i,n]:(a[0]=t,a[1]=r,a[2]=i,a[3]=n))}setUniform4fv(e,t){var r=this._nameToUniform4[e];y(r,t)&&(this._context.bindProgram(this),this._context.gl.uniform4fv(this.getUniformLocation(e),t),void 0===r?this._nameToUniform4[e]=g._arrayCopy(t):g._arrayAssign(t,r))}setUniformMatrix3fv(e,t,r=!1){var n=this._nameToUniformMatrix3[e];(function(e,t){return!!Object(i.j)(e)||(9!==e.length?y(e,t):9!==e.length||e[0]!==t[0]||e[1]!==t[1]||e[2]!==t[2]||e[3]!==t[3]||e[4]!==t[4]||e[5]!==t[5]||e[6]!==t[6]||e[7]!==t[7]||e[8]!==t[8])})(n,t)&&(this._context.bindProgram(this),this._context.gl.uniformMatrix3fv(this.getUniformLocation(e),r,t),void 0===n?this._nameToUniformMatrix3[e]=g._arrayCopy(t):g._arrayAssign(t,n))}setUniformMatrix4fv(e,t,r=!1){var n=this._nameToUniformMatrix4[e];(function(e,t){return!!Object(i.j)(e)||(16!==e.length?y(e,t):16!==e.length||e[0]!==t[0]||e[1]!==t[1]||e[2]!==t[2]||e[3]!==t[3]||e[4]!==t[4]||e[5]!==t[5]||e[6]!==t[6]||e[7]!==t[7]||e[8]!==t[8]||e[9]!==t[9]||e[10]!==t[10]||e[11]!==t[11]||e[12]!==t[12]||e[13]!==t[13]||e[14]!==t[14]||e[15]!==t[15])})(n,t)&&(this._context.bindProgram(this),this._context.gl.uniformMatrix4fv(this.getUniformLocation(e),r,t),void 0===n?this._nameToUniformMatrix4[e]=g._arrayCopy(t):g._arrayAssign(t,n))}assertCompatibleVertexAttributeLocations(e){var t=e.locations===this.locations;return t||console.error("VertexAttributeLocations are incompatible"),t}static _padToThree(e){var t=e.toString();return e<1e3&&(t=("  "+e).slice(-3)),t}_addLineNumbers(e){var t=2;return e.replace(/\n/g,(()=>"\n"+g._padToThree(t++)+":"))}_loadShader(e){var t=35633===e,r=t?this._vertexShaderSource:this._fragmentShaderSource,i="";for(var n in this._defines)i+="#define ".concat(n," ").concat(this._defines[n],"\n");r=i+r,"webgl2"===this._context.contextVersion&&(r=m(r,t?"vertex":"fragment"));var a=this._context.gl,o=a.createShader(e);return a.shaderSource(o,r),a.compileShader(o),o}static _arrayCopy(e){for(var t=[],r=0;r<e.length;++r)t.push(e[r]);return t}static _arrayAssign(e,t){for(var r=0;r<e.length;++r)t[r]=e[r]}}function y(e,t){if(Object(i.j)(e)||e.length!==t.length)return!0;for(var r=0;r<e.length;++r)if(e[r]!==t[r])return!0;return!1}t.a=g},,function(e,t,r){"use strict";r.d(t,"a",(function(){return c})),r.d(t,"b",(function(){return o})),r.d(t,"c",(function(){return s}));var i=r(80),n=new Set;function a(e,t,r=!1){r&&n.has(t)||(r&&n.add(t),e.warn("\ud83d\uded1 DEPRECATED - ".concat(t)))}function o(e,t,r={}){if(Object(i.a)("esri-deprecation-warnings")){var{moduleName:n}=r;c(e,"Function: ".concat((n?n+"::":"")+t+"()"),r)}}function s(e,t,r={}){if(Object(i.a)("esri-deprecation-warnings")){var{moduleName:n}=r;c(e,"Property: ".concat((n?n+"::":"")+t),r)}}function c(e,t,r={}){if(Object(i.a)("esri-deprecation-warnings")){var{replacement:n,version:o,see:s,warnOnce:c}=r,l=t;n&&(l+="\n\t\ud83d\udee0\ufe0f Replacement: ".concat(n)),o&&(l+="\n\t\u2699\ufe0f Version: ".concat(o)),s&&(l+="\n\t\ud83d\udd17 See ".concat(s," for more details.")),a(e,l,c)}}},function(e,t,r){"use strict";r.d(t,"a",(function(){return x})),r.d(t,"b",(function(){return i}));var i,n,a=r(82),o=(r(80),r(89)),s=r(81),c=(r(88),r(85)),l=r(84),u=(r(83),r(86),r(87),r(343)),d=r(176),h=r(94),p=r(97),f=r(108),b=r(323),v=r(331),m=s.a.getLogger("esri.views.support.Scheduler");(n=i||(i={})).REMOTE_CLIENT="worker messages",n.SLIDE="slide",n.STAGE="stage",n.STREAM_DATA_LOADER="stream loader",n.ELEVATION_QUERY="elevation query",n.TERRAIN_SURFACE="terrain",n.SURFACE_GEOMETRY_UPDATES="surface geometry updates",n.GRAPHICS_CORE="Graphics3D",n.I3S_CONTROLLER="I3S",n.POINT_CLOUD_LAYER="point cloud",n.FEATURE_TILE_FETCHER="feature fetcher",n.LABELER="labeler",n.GRAPHICS_DECONFLICTOR="graphics deconflictor",n.FILTER_VISIBILITY="Graphics3D filter visibility",n.FEATURE_QUERY_ENGINE="feature query",n.SCALE_VISIBILITY="Graphics3D scale visibility",n.FRUSTUM_VISIBILITY="Graphics3D frustum visibility",n.POINT_OF_INTEREST_FREQUENT="POI frequent",n.POINT_OF_INTEREST_INFREQUENT="POI infrequent",n.FEATURE_TILE_TREE="feature tile tree",n.FEATURE_TILE_TREE_ACTIVE="fast feature tile tree",n.ELEVATION_ALIGNMENT="elevation alignment",n.TEXT_TEXTURE_ATLAS="text texture atlas",n.TEXTURE_UNLOAD="texture unload",n.OVERLAY_MANAGER="overlay manager",n.LINE_OF_SIGHT_TOOL="line of sight tool",n.LINE_OF_SIGHT_TOOL_INTERACTIVE="interactive line of sight tool",n.ELEVATION_PROFILE="elevation profile",n.SNAPPING="snapping",n[n.TEST_PRIO=1]="TEST_PRIO";var g={[i.REMOTE_CLIENT]:0,[i.SLIDE]:0,[i.STREAM_DATA_LOADER]:0,[i.ELEVATION_QUERY]:0,[i.STAGE]:1,[i.TERRAIN_SURFACE]:1,[i.SURFACE_GEOMETRY_UPDATES]:1,[i.GRAPHICS_CORE]:2,[i.I3S_CONTROLLER]:2,[i.POINT_CLOUD_LAYER]:2,[i.FEATURE_TILE_FETCHER]:2,[i.LABELER]:8,[i.GRAPHICS_DECONFLICTOR]:4,[i.FILTER_VISIBILITY]:4,[i.FEATURE_QUERY_ENGINE]:8,[i.SCALE_VISIBILITY]:4,[i.FRUSTUM_VISIBILITY]:4,[i.POINT_OF_INTEREST_FREQUENT]:6,[i.POINT_OF_INTEREST_INFREQUENT]:30,[i.FEATURE_TILE_TREE]:16,[i.FEATURE_TILE_TREE_ACTIVE]:0,[i.ELEVATION_ALIGNMENT]:12,[i.TEXT_TEXTURE_ATLAS]:12,[i.TEXTURE_UNLOAD]:12,[i.OVERLAY_MANAGER]:12,[i.LINE_OF_SIGHT_TOOL]:16,[i.LINE_OF_SIGHT_TOOL_INTERACTIVE]:0,[i.SNAPPING]:0};function y(e){return e in g?g[e]:"number"==typeof e?e:1}var O,j,_=1e3/30;!function(e){var t=class extends p.a{constructor(e){for(var t in super(e),this.updating=!0,this.performanceInfo={total:new u.a("total"),tasks:new Array},this._budget=null,this._state=1,this._tasks=new d.a,this._runQueue=new d.a,this._load=0,this._idleStateCallbacks=new d.a,this._idleUpdatesStartFired=!1,this._maxReschedule=S,this._forceTask=!1,this._debug=!1,this._debugHandle=Object(f.a)(v.a,"SCHEDULER_LOG_SLOW_TASKS",(e=>this._debug=e)),this._budget=new n(e.nowFunc),T.length=0,i)M.set(i[t],this.performanceInfo.tasks.length),this.performanceInfo.tasks.push(new u.a(i[t])),T.push(0);var r,a=this;this._test={get state(){return Object(o.j)(r)?a._state:r},set state(e){r=e},FRAME_SAFETY_BUDGET:6.5,INTERACTING_BUDGET:_,IDLE_BUDGET:100,get budget(){return a._budget.budget},usedBudget:0,updateTask:e=>this._updateTask(e),getState:e=>this._getState(e),getRuntime:e=>this._getRuntime(e),resetRuntimes:()=>this._resetRuntimes(),getRunning:()=>this._getRunning()}}destroy(){this._debugHandle&&this._debugHandle.remove()}registerTask(e,t,i){var n=y(e),a=new r(this,e,t,i,n);return this._tasks.push(a),a}registerIdleStateCallbacks(e,t){var r={idleBegin:e,idleEnd:t};this._idleStateCallbacks.push(r),2===this.state&&this._idleUpdatesStartFired&&r.idleBegin();var i=this;return{remove:()=>this._removeIdleStateCallbacks(r),set idleBegin(e){i._idleUpdatesStartFired&&(r.idleEnd(),2===i._state&&e()),r.idleBegin=e},set idleEnd(e){r.idleEnd=e}}}get now(){return this.nowFunc()}get load(){return this._load}set state(e){this._state!==e&&(this._state=e,2!==this.state&&this._idleUpdatesStartFired&&(this._idleUpdatesStartFired=!1,this._idleStateCallbacks.forAll((e=>e.idleEnd()))))}get state(){return Object(o.j)(this._test.state)?this._state:this._test.state}updateBudget(e){this._test.usedBudget=0;var t=6.5,r=e.frameDuration,i=1;switch(this.state){case 2:t=0,r=Math.max(100,e.frameDuration),i=30;break;case 1:r=Math.max(_,e.frameDuration)}return r-=e.elapsedFrameTime+t,2!==this.state&&r<1&&!this._forceTask?(this._forceTask=!0,!1):(r=Math.max(r,i),this._budget.reset(r,this.state),this._maxReschedule=S,this._updateLoad(),this._schedule())}frame(){switch(this._forceTask=!1,this.state){case 2:this._idleUpdatesStartFired||(this._idleUpdatesStartFired=!0,this._idleStateCallbacks.forAll((e=>e.idleBegin()))),this._runIdle();break;case 1:this._runInteracting();break;default:this._runAnimating()}this._test.usedBudget=this._budget.elapsed}_removeIdleStateCallbacks(e){this._idleUpdatesStartFired&&e.idleEnd(),this._idleStateCallbacks.removeUnordered(e)}removeTask(e){this._tasks.removeUnordered(e),this._runQueue.removeUnordered(e)}_updateTask(e){this._tasks.forAll((t=>{t.name===e&&t.setPriority(e)}))}_getState(e){if(this._runQueue.some((t=>t.name===e)))return j.SCHEDULED;var t=j.IDLE;return this._tasks.forAll((r=>{r.name===e&&r.needsUpdate&&(r.schedulePriority<=1?t=j.READY:t!==j.READY&&(t=j.WAITING))})),t}_getRuntime(e){var t=0;return this._tasks.forAll((r=>{r.name===e&&(t+=r.runtime)})),t}_resetRuntimes(){this._tasks.forAll((e=>e.runtime=0))}_getRunning(){var e=new Map;if(this._tasks.forAll((t=>{t.needsUpdate&&e.set(t.name,(e.get(t.name)||0)+1)})),0===e.size)return null;var t="";return e.forEach(((e,r)=>{t+=e>1?" ".concat(e,"x ").concat(r):" ".concat(r)})),t}_runIdle(){this._run()}_runInteracting(){this._run()}_runAnimating(){this._run()}_updateLoad(){var e=this._tasks.reduce(((e,t)=>t.needsUpdate?++e:e),0);this._load=.9*this._load+e*(1-.9)}_schedule(){var e=this;if(this._maxReschedule<=0)return!1;var t=function(){var t=!1,r=0;if(e._tasks.forAll((i=>{if(i.needsUpdate&&0!==i.schedulePriority&&0!==i.priority)switch(t=!0,r=Math.max(r,i.priority),i.schedulePriority){case 1:i.schedulePriority=0,e._runQueue.push(i);break;default:--i.schedulePriority}})),!t)return{v:(e.updating=!1,!1)};e._maxReschedule===S&&(e._maxReschedule=r),--e._maxReschedule};for(this._runQueue.filterInPlace((e=>!!e.needsUpdate||(e.schedulePriority=e.priority,!1))),this._tasks.forAll((e=>{0===e.priority&&e.needsUpdate&&!this._runQueue.some((t=>t===e))&&this._runQueue.unshift(e)}));0===this._runQueue.length;){var r=t();if("object"===typeof r)return r.v}return this.updating=!0,!0}_run(){for(var e=this._budget.now(),t=0;t<T.length;++t)T[t]=0;do{for(;this._runQueue.length>0;){var r=this._budget.now(),i=this._runQueue.pop();this._budget.resetProgress();try{i.update(this._budget)}catch(a){m.error('Exception in task "'.concat(i.name,'"'),a)}i.schedulePriority=i.priority;var n=this._budget.now()-r;if(i.runtime+=n,T[M.get(i.task)]+=n,this._debug&&this._budget.elapsed>2*this._budget.budget&&console.log("Task",i.name,"used",this._budget.elapsed,"of max",this._budget.budget,"ms"),this._budget.remaining<=0)return void this._recordFrameTaskTimes(T,this._budget.now()-e)}}while(this._schedule());this._recordFrameTaskTimes(T,this._budget.now()-e)}_recordFrameTaskTimes(e,t){for(var r=0;r<e.length;++r)this.performanceInfo.tasks[r].record(e[r]);this.performanceInfo.total.record(t)}get test(){return this._test}};Object(a.a)([Object(c.b)()],t.prototype,"updating",void 0),Object(a.a)([Object(c.b)()],t.prototype,"nowFunc",void 0),t=Object(a.a)([Object(l.a)("esri.views.support.Scheduler")],t),e.Scheduler=t;var r=class extends p.a{constructor(e,t,r,i,n){super({}),this._scheduler=e,this.name=t,this.update=r,this._needsUpdateCB=i,this._priority=n,this.runtime=0,this._queue=new b.a,this.updating=!1,this.schedulePriority=this._priority}normalizeCtorArgs(){return{}}remove(){this.processQueue(w),this._scheduler.removeTask(this),this.schedule=x.schedule,this.reschedule=x.reschedule}get priority(){return this._priority}setPriority(e){this.name=e;var t=y(e);0!==this._priority&&0===this.schedulePriority||(this.schedulePriority=t),this._priority=t}get task(){return this.name}set task(e){this.setPriority(e)}get needsUpdate(){return this.updating||this._needsUpdateCB()}schedule(e,t){return this.updating=!0,this._queue.push(e,t)}reschedule(e,t){return this.updating=!0,this._queue.unshift(e,t)}processQueue(e){for(;!e.done&&this._queue.process();)e.madeProgress();this.updating=this._queue.length>0}};Object(a.a)([Object(c.b)()],r.prototype,"updating",void 0),r=Object(a.a)([Object(l.a)("esri.views.support.SchedulerTask")],r);class n{constructor(e){this.now=e,this._begin=0,this._budget=0,this._state=2,this._didWork=!1,this._enabled=!0}run(e){return!this.done&&(!0===e()&&(this._didWork=!0),!0)}get done(){return this._didWork&&this.elapsed>=this._budget&&this._enabled}get budget(){return this._budget}madeProgress(){this._didWork=!0}get state(){return this._state}get enabled(){return this._enabled}set enabled(e){this._enabled=e}reset(e,t){this._begin=this.now(),this._budget=e,this._state=t,this._didWork=!1}get remaining(){return Math.max(this._budget-this.elapsed,0)}get elapsed(){return this.now()-this._begin}resetProgress(){this._didWork=!1}get hasProgressed(){return this._didWork}}e.Budget=n}(O||(O={})),function(e){e.SCHEDULED="s",e.READY="r",e.WAITING="w",e.IDLE="i"}(j||(j={}));var w=(()=>{var e=new O.Budget((()=>performance.now()));return e.enabled=!1,e})();var x=new class{remove(){}processQueue(){}schedule(e){return Object(h.w)(e())}reschedule(e){return Object(h.w)(e())}},S=Number.MAX_SAFE_INTEGER,M=new Map,T=new Array},,,function(e,t,r){"use strict";class i{constructor(e=null,t={},r,i){this.displayId=0,this.geohashX=0,this.geohashY=0,this.geometry=e,t&&(this.attributes=t),r&&(this.centroid=r),null!=i&&(this.objectId=i)}get hasGeometry(){return!(!this.geometry||!this.geometry.coords||!this.geometry.coords.length)}weakClone(){var e=new i(this.geometry,this.attributes,this.centroid,this.objectId);return e.displayId=this.displayId,e.geohashX=this.geohashX,e.geohashY=this.geohashY,e}}t.a=i},function(e,t,r){"use strict";r.d(t,"a",(function(){return a})),r.d(t,"b",(function(){return n}));var i=r(107);function n(e,t,r=i.a){return t||(t=new r),t===e||(t.removeAll(),(n=e)&&(Array.isArray(n)||"items"in n&&Array.isArray(n.items))?t.addMany(e):e&&t.add(e)),t;var n}function a(e){return e}},function(e,t,r){"use strict";r.d(t,"a",(function(){return s})),r.d(t,"b",(function(){return l})),r.d(t,"c",(function(){return u}));var i=r(92),n=r(89),a=r(126);class o{constructor(e){this.autoDestroy=!1,this.properties=e}}function s(e){var t=e.constructor.__accessorMetadata__,r=Object.prototype.hasOwnProperty.call(e.constructor,"__accessorMetadata__");if(t){if(!r){var a=Object.create(t.properties),s=t.autoDestroy;for(var c in a)a[c]=Object(i.a)(a[c]);(t=new o(a)).autoDestroy=s,Object.defineProperty(e.constructor,"__accessorMetadata__",{value:t,enumerable:!1,configurable:!0,writable:!0})}}else t=new o({}),Object.defineProperty(e.constructor,"__accessorMetadata__",{value:t,enumerable:!1,configurable:!0,writable:!0});return Object(n.d)(e.constructor.__accessorMetadata__)}function c(e){return s(e).properties}function l(e,t){var r=c(e),i=r[t];return i||(i=r[t]={}),i}function u(e,t){return Object(a.c)(e,t,h)}var d=/^(?:[^.]+\.)?(?:value|type|(?:json\.type|json\.origins\.[^.]\.type))$/;function h(e){return d.test(e)?"replace":"merge"}},function(e,t,r){"use strict";function i(e,t){if(e.forEach)e.forEach(t);else for(var r=0;r<e.length;r++)t(e[r],r,e)}function n(e,t,r){if(e.slice)return e.slice(t,r);void 0===t?t=0:(t<0&&(t+=e.length),t=Math.min(e.length,Math.max(0,t))),void 0===r?r=e.length:(r<0&&(r+=e.length),r=Math.min(e.length,Math.max(0,r)));for(var i=Math.max(0,r-t),n=new(0,e.constructor)(i),a=0;a<i;a++)n[a]=e[t+a];return n}function a(e){return e instanceof ArrayBuffer||e&&e.constructor&&"ArrayBuffer"===e.constructor.name}function o(e){return e instanceof Int8Array||e&&e.constructor&&"Int8Array"===e.constructor.name}function s(e){return e instanceof Uint8Array||e&&e.constructor&&"Uint8Array"===e.constructor.name}function c(e){return e instanceof Uint8ClampedArray||e&&e.constructor&&"Uint8ClampedArray"===e.constructor.name}function l(e){return e instanceof Int16Array||e&&e.constructor&&"Int16Array"===e.constructor.name}function u(e){return e instanceof Uint16Array||e&&e.constructor&&"Uint16Array"===e.constructor.name}function d(e){return e instanceof Int32Array||e&&e.constructor&&"Int32Array"===e.constructor.name}function h(e){return e instanceof Uint32Array||e&&e.constructor&&"Uint32Array"===e.constructor.name}function p(e){return e instanceof Float32Array||e&&e.constructor&&"Float32Array"===e.constructor.name}function f(e){return e instanceof Float64Array||e&&e.constructor&&"Float64Array"===e.constructor.name}function b(e){for(var t=new Array(e.length),r=0;r<e.length;r++)t[r]=e[r];return t}function v(e){return e?128+e.buffer.byteLength+64:0}r.d(t,"a",(function(){return v})),r.d(t,"b",(function(){return i})),r.d(t,"c",(function(){return a})),r.d(t,"d",(function(){return p})),r.d(t,"e",(function(){return f})),r.d(t,"f",(function(){return l})),r.d(t,"g",(function(){return d})),r.d(t,"h",(function(){return o})),r.d(t,"i",(function(){return u})),r.d(t,"j",(function(){return h})),r.d(t,"k",(function(){return s})),r.d(t,"l",(function(){return c})),r.d(t,"m",(function(){return n})),r.d(t,"n",(function(){return b}))},,function(e,t,r){"use strict";r.d(t,"a",(function(){return p}));var i=r(82),n=r(89),a=r(240),o=r(85),s=r(84),c=r(241),l=r(344),u=r(97),d=r(115),h=r(108),p=class extends u.a{constructor(){super(...arguments),this.updating=!1,this.handleId=0,this.handles=new d.a,this.scheduleHandleId=0,this.pendingPromises=new Set}destroy(){this.removeAll(),this.handles.destroy()}add(e,t,r,i=0){var n=0!=(1&i),a=++this.handleId;n||this.installSyncUpdatingWatch(e,t,a);var o=0!=(2&i)?Object(h.a)(e,t,r,n):e.watch(t,r,n);return this.handles.add(o,a),{remove:()=>{this.handles.remove(a)}}}addOnCollectionPropertyChange(e,t,r,i=0){var n=0!=(2&i),a=++this.handleId;return this.handles.add([Object(h.b)(e,t,"after-changes",this.createSyncUpdatingCallback()),Object(h.b)(e,t,"change",r,n?e=>{r({added:e.items,removed:[],moved:[],target:e})}:void 0)],a),{remove:()=>{this.handles.remove(a)}}}addOnCollectionChange(e,t,r=0){var i=0!=(2&r),n=++this.handleId;return this.handles.add([e.on("after-changes",this.createSyncUpdatingCallback()),e.on("change",t)],n),i&&t({added:e.items,removed:[],moved:[],target:e}),{remove:()=>{this.handles.remove(n)}}}addPromise(e){if(Object(n.j)(e))return e;var t=++this.handleId;this.handles.add({remove:()=>{this.pendingPromises.delete(e)&&(0!==this.pendingPromises.size||this.handles.has(f)||this._set("updating",!1))}},t),this.pendingPromises.add(e),this._set("updating",!0);var r=()=>this.handles.remove(t);return e.then(r,r),e}removeAll(){this.pendingPromises.clear(),this.handles.removeAll(),this._set("updating",!1)}installSyncUpdatingWatch(e,t,r){var i=this.createSyncUpdatingCallback(),n=Object(l.a)((()=>Object(a.c)(e,t)),i);return this.handles.add(n,r),n}createSyncUpdatingCallback(){return()=>{this.handles.remove(f),++this.scheduleHandleId;var e=this.scheduleHandleId;this._get("updating")||this._set("updating",!0),this.handles.add(Object(c.b)((()=>{e===this.scheduleHandleId&&(this._set("updating",this.pendingPromises.size>0),this.handles.remove(f))})),f)}}};Object(i.a)([Object(o.b)({readOnly:!0})],p.prototype,"updating",void 0),p=Object(i.a)([Object(s.a)("esri.views.support.WatchUpdatingTracking")],p);var f=-42},function(e,t,r){"use strict";var i=r(82),n=(r(80),r(92)),a=(r(81),r(88),r(85)),o=r(98),s=r(84),c=r(96),l=(r(83),r(86),r(87),r(90)),u=r(134),d=r(136),h=r(137),p=(r(149),r(251)),f=class extends l.a{constructor(e){super(e),this.id=null,this.name=null,this.domains=null,this.templates=null}readDomains(e){var t={};for(var r in e)if(e.hasOwnProperty(r)){var i=e[r];switch(i.type){case"range":t[r]=h.a.fromJSON(i);break;case"codedValue":t[r]=u.a.fromJSON(i);break;case"inherited":t[r]=d.a.fromJSON(i)}}return t}writeDomains(e,t){var r={};for(var i in e)e.hasOwnProperty(i)&&(r[i]=e[i]&&e[i].toJSON());Object(n.c)(r),t.domains=r}readTemplates(e){return e&&e.map((e=>new p.a(e)))}writeTemplates(e,t){t.templates=e&&e.map((e=>e.toJSON()))}};Object(i.a)([Object(a.b)({json:{write:!0}})],f.prototype,"id",void 0),Object(i.a)([Object(a.b)({json:{write:!0}})],f.prototype,"name",void 0),Object(i.a)([Object(a.b)({json:{write:!0}})],f.prototype,"domains",void 0),Object(i.a)([Object(o.a)("domains")],f.prototype,"readDomains",null),Object(i.a)([Object(c.a)("domains")],f.prototype,"writeDomains",null),Object(i.a)([Object(a.b)({json:{write:!0}})],f.prototype,"templates",void 0),Object(i.a)([Object(o.a)("templates")],f.prototype,"readTemplates",null),Object(i.a)([Object(c.a)("templates")],f.prototype,"writeTemplates",null);var b=f=Object(i.a)([Object(s.a)("esri.layers.support.FeatureType")],f);t.a=b},function(e,t,r){"use strict";r.d(t,"a",(function(){return a}));var i=r(89),n=r(410);class a{constructor(e){this.allocator=e,this.items=[],this.itemsPtr=0,this.tickHandle=n.a.before((()=>this.reset())),this.grow()}destroy(){this.tickHandle&&(this.tickHandle.remove(),this.tickHandle=Object(i.o)(this.tickHandle)),this.items=Object(i.o)(this.items)}get(){return 0===this.itemsPtr&&Object(n.a)((()=>{})),this.itemsPtr===this.items.length&&this.grow(),this.items[this.itemsPtr++]}reset(){var e=Math.min(3*Math.max(8,this.itemsPtr),this.itemsPtr+3*o);this.items.length=Math.min(e,this.items.length),this.itemsPtr=0}grow(){for(var e=0;e<Math.max(8,Math.min(this.items.length,o));e++)this.items.push(this.allocator())}}var o=1024},function(e,t,r){"use strict";r.d(t,"a",(function(){return n}));var i=r(7);class n{constructor(e,t){this._module=e,this._loadModule=t}get(){return this._module}reload(){var e=this;return Object(i.a)((function*(){return e._module=yield e._loadModule(),e._module}))()}}},function(e,t,r){"use strict";function i(e){return t=>{t.hasOwnProperty("_delegatedEventNames")||(t._delegatedEventNames=t._delegatedEventNames?t._delegatedEventNames.slice():[]);var r=t._delegatedEventNames,i=Array.isArray(e)?e:function(e){return e.split(",").map((e=>e.trim()))}(e);r.push(...i)}}r.d(t,"a",(function(){return i}))},function(e,t,r){"use strict";r.d(t,"a",(function(){return w})),r.d(t,"b",(function(){return T})),r.d(t,"c",(function(){return l})),r.d(t,"d",(function(){return _}));var i,n=r(114),a="http://www.w3.org/",o="".concat(a,"2000/svg"),s="".concat(a,"1999/xlink"),c=[],l=(e,t)=>{var r={};return Object.keys(e).forEach((t=>{r[t]=e[t]})),t&&Object.keys(t).forEach((e=>{r[e]=t[e]})),r},u=(e,t)=>e.vnodeSelector===t.vnodeSelector&&(e.properties&&t.properties?e.properties.key===t.properties.key&&e.properties.bind===t.properties.bind:!e.properties&&!t.properties),d=e=>{if("string"!=typeof e)throw new Error("Style values must be strings")},h=(e,t,r)=>{if(""!==t.vnodeSelector)for(var i=r;i<e.length;i++)if(u(e[i],t))return i;return-1},p=(e,t,r,i)=>{var n=e[t];if(""!==n.vnodeSelector){var a=n.properties;if(!(a?void 0===a.key?a.bind:a.key:void 0))for(var o=0;o<e.length;o++)if(o!==t){var s=e[o];if(u(s,n))throw new Error("".concat(r.vnodeSelector," had a ").concat(n.vnodeSelector," child ").concat("added"===i?i:"removed",", but there is now more than one. You must add unique key properties to make them distinguishable."))}}},f=e=>{if(e.properties){var t=e.properties.enterAnimation;t&&t(e.domNode,e.properties)}},b=[],v=!1,m=e=>{(e.children||[]).forEach(m),e.properties&&e.properties.afterRemoved&&e.properties.afterRemoved.apply(e.properties.bind||e.properties,[e.domNode])},g=()=>{v=!1,b.forEach(m),b.length=0},y=e=>{b.push(e),v||(v=!0,"undefined"!=typeof window&&"requestIdleCallback"in window?window.requestIdleCallback(g,{timeout:16}):setTimeout(g,16))},O=e=>{var t=e.domNode;if(e.properties){var r=e.properties.exitAnimation;if(r){t.style.pointerEvents="none";return void r(t,(()=>{t.parentNode&&(t.parentNode.removeChild(t),y(e))}),e.properties)}}t.parentNode&&(t.parentNode.removeChild(t),y(e))},j=(e,t,r)=>{if(t)for(var i=r.eventHandlerInterceptor,a=Object.keys(t),c=a.length,l=function(c){var l=a[c],u=t[l];if("className"===l)throw new Error('Property "className" is not supported, use "class".');if("class"===l)x(e,u,!0);else if("classes"===l)for(var h=Object.keys(u),p=h.length,f=0;f<p;f++){var b=h[f];u[b]&&e.classList.add(b)}else if("styles"===l)for(var v=Object.keys(u),m=v.length,g=0;g<m;g++){var y=v[g],O=u[y];O&&(d(O),r.styleApplyer(e,y,O))}else if("key"!==l&&null!=u){var j=typeof u;"function"===j?(0===l.lastIndexOf("on",0)&&(i&&(u=i(l,u,e,t)),"oninput"===l&&function(){var e=u;u=function(t){e.apply(this,[t]),t.target["oninput-value"]=t.target.value}}()),e[l]=u):r.namespace===o?"href"===l?e.setAttributeNS(s,l,u):e.setAttribute(l,u):"string"===j&&"value"!==l?"innerHTML"===l?e[l]=n.h.sanitize(u):e.setAttribute(l,u):e[l]=u}},u=0;u<c;u++)l(u)},_=(e,t,r)=>{((e,t,r)=>{if(t)for(var i of t)w(i,e,void 0,r)})(e,t.children,r),t.text&&(e.textContent=t.text),j(e,t.properties,r),t.properties&&t.properties.afterCreate&&t.properties.afterCreate.apply(t.properties.bind||t.properties,[e,r,t.vnodeSelector,t.properties,t.children])},w=(e,t,r,i)=>{var n,a=0,s=e.vnodeSelector,c=t.ownerDocument;if(""===s)n=e.domNode=c.createTextNode(e.text),void 0!==r?t.insertBefore(n,r):t.appendChild(n);else{for(var u=0;u<=s.length;++u){var d=s.charAt(u);if(u===s.length||"."===d||"#"===d){var h=s.charAt(a-1),p=s.slice(a,u);"."===h?n.classList.add(p):"#"===h?n.id=p:("svg"===p&&(i=l(i,{namespace:o})),void 0!==i.namespace?n=e.domNode=c.createElementNS(i.namespace,p):(n=e.domNode=e.domNode||c.createElement(p),"input"===p&&e.properties&&void 0!==e.properties.type&&n.setAttribute("type",e.properties.type)),void 0!==r?t.insertBefore(n,r):n.parentNode!==t&&t.appendChild(n)),a=u+1}}_(n,e,i)}},x=(e,t,r)=>{t&&t.split(" ").forEach((t=>{t&&e.classList.toggle(t,r)}))},S=(e,t,r,i)=>{if(r){for(var a=!1,c=Object.keys(r),l=c.length,u=0;u<l;u++){var h=c[u],p=r[h],f=t[h];if("class"===h)f!==p&&(x(e,f,!1),x(e,p,!0));else if("classes"===h)for(var b=e.classList,v=Object.keys(p),m=v.length,g=0;g<m;g++){var y=v[g],O=!!p[y];O!==!!f[y]&&(a=!0,O?b.add(y):b.remove(y))}else if("styles"===h)for(var j=Object.keys(p),_=j.length,w=0;w<_;w++){var S=j[w],M=p[S];M!==f[S]&&(a=!0,M?(d(M),i.styleApplyer(e,S,M)):i.styleApplyer(e,S,""))}else if(p||"string"!=typeof f||(p=""),"value"===h){var T=e[h];T!==p&&(e["oninput-value"]?T===e["oninput-value"]:p!==f)&&(e[h]=p,e["oninput-value"]=void 0),p!==f&&(a=!0)}else if(p!==f){var P=typeof p;"function"===P&&i.eventHandlerInterceptor||(i.namespace===o?"href"===h?e.setAttributeNS(s,h,p):e.setAttribute(h,p):"string"===P?"innerHTML"===h?e[h]=n.h.sanitize(p):"role"===h&&""===p?e.removeAttribute(h):e.setAttribute(h,p):e[h]!==p&&(e[h]=p),a=!0)}}return a}},M=(e,t,r,n,a)=>{if(r===n)return!1;n=n||c;for(var o,s=(r=r||c).length,l=n.length,d=0,b=0,v=!1;b<l;){var m=d<s?r[d]:void 0,g=n[b];if(void 0!==m&&u(m,g))v=i(m,g,a)||v,d++;else{var y=h(r,g,d+1);if(y>=0){for(o=d;o<y;o++)O(r[o]),p(r,o,e,"removed");v=i(r[y],g,a)||v,d=y+1}else w(g,t,d<s?r[d].domNode:void 0,a),f(g),p(n,b,e,"added")}b++}if(s>d)for(o=d;o<s;o++)O(r[o]),p(r,o,e,"removed");return v};i=(e,t,r)=>{var i=e.domNode,n=!1;if(e===t)return!1;var a=!1;if(""===t.vnodeSelector){if(t.text!==e.text){var s=i.ownerDocument.createTextNode(t.text);return i.parentNode.replaceChild(s,i),t.domNode=s,n=!0}t.domNode=i}else 0===t.vnodeSelector.lastIndexOf("svg",0)&&(r=l(r,{namespace:o})),e.text!==t.text&&(a=!0,void 0===t.text?i.removeChild(i.firstChild):i.textContent=t.text),t.domNode=i,a=M(t,i,e.children,t.children,r)||a,a=S(i,e.properties,t.properties,r)||a,t.properties&&t.properties.afterUpdate&&t.properties.afterUpdate.apply(t.properties.bind||t.properties,[i,r,t.vnodeSelector,t.properties,t.children]);return a&&t.properties&&t.properties.updateAnimation&&t.properties.updateAnimation(i,t.properties,e.properties),n};var T=(e,t)=>({getLastRender:()=>e,update:r=>{if(e.vnodeSelector!==r.vnodeSelector)throw new Error("The selector for the root VNode may not be changed. (consider using dom.merge and add one extra level to the virtual DOM)");var n=e;e=r,i(n,r,t)},domNode:e.domNode})},function(e,t,r){"use strict";var i,n=r(91),a=r(82),o=(r(80),r(81),r(88),r(85)),s=r(95),c=r(98),l=r(175),u=r(84),d=r(96),h=(r(83),r(86),r(87),r(209)),p=r(90),f=r(117),b=Object(s.b)()({orthometric:"gravity-related-height",gravity_related_height:"gravity-related-height",ellipsoidal:"ellipsoidal"}),v=b.jsonValues.slice();Object(h.j)(v,"orthometric");var m=Object(s.b)()({meter:"meters",foot:"feet","us-foot":"us-feet","clarke-foot":"clarke-feet","clarke-yard":"clarke-yards","clarke-link":"clarke-links","sears-yard":"sears-yards","sears-foot":"sears-feet","sears-chain":"sears-chains","benoit-1895-b-chain":"benoit-1895-b-chains","indian-yard":"indian-yards","indian-1937-yard":"indian-1937-yards","gold-coast-foot":"gold-coast-feet","sears-1922-truncated-chain":"sears-1922-truncated-chains","50-kilometers":"50-kilometers","150-kilometers":"150-kilometers"}),g=i=class extends p.a{constructor(e){super(e),this.heightModel="gravity-related-height",this.heightUnit="meters",this.vertCRS=null}writeHeightModel(e,t,r){return b.write(e,t,r)}readHeightModel(e,t,r){return b.read(e)||(r&&r.messages&&r.messages.push(function(e,t){return new l.a("height-model:unsupported","Height model of value '".concat(e,"' is not supported"),t)}(e,{context:r})),null)}readHeightUnit(e,t,r){return m.read(e)||(r&&r.messages&&r.messages.push(y(e,{context:r})),null)}readHeightUnitService(e,t,r){return Object(f.x)(e)||m.read(e)||(r&&r.messages&&r.messages.push(y(e,{context:r})),null)}readVertCRS(e,t){return t.vertCRS||t.ellipsoid||t.geoid}clone(){return new i({heightModel:this.heightModel,heightUnit:this.heightUnit,vertCRS:this.vertCRS})}equals(e){return!!e&&(this===e||this.heightModel===e.heightModel&&this.heightUnit===e.heightUnit&&this.vertCRS===e.vertCRS)}static deriveUnitFromSR(e,t){var r=Object(f.i)(t);return new i({heightModel:e.heightModel,heightUnit:r,vertCRS:e.vertCRS})}write(e,t){return t=Object(n.a)({origin:"web-scene"},t),super.write(e,t)}static fromJSON(e){if(!e)return null;var t=new i;return t.read(e,{origin:"web-scene"}),t}};function y(e,t){return new l.a("height-unit:unsupported","Height unit of value '".concat(e,"' is not supported"),t)}Object(a.a)([Object(o.b)({type:b.apiValues,constructOnly:!0,json:{origins:{"web-scene":{type:v,default:"ellipsoidal"}}}})],g.prototype,"heightModel",void 0),Object(a.a)([Object(d.a)("web-scene","heightModel")],g.prototype,"writeHeightModel",null),Object(a.a)([Object(c.a)(["web-scene","service"],"heightModel")],g.prototype,"readHeightModel",null),Object(a.a)([Object(o.b)({type:m.apiValues,constructOnly:!0,json:{origins:{"web-scene":{type:m.jsonValues,write:m.write}}}})],g.prototype,"heightUnit",void 0),Object(a.a)([Object(c.a)("web-scene","heightUnit")],g.prototype,"readHeightUnit",null),Object(a.a)([Object(c.a)("service","heightUnit")],g.prototype,"readHeightUnitService",null),Object(a.a)([Object(o.b)({type:String,constructOnly:!0,json:{origins:{"web-scene":{write:!0}}}})],g.prototype,"vertCRS",void 0),Object(a.a)([Object(c.a)("service","vertCRS",["vertCRS","ellipsoid","geoid"])],g.prototype,"readVertCRS",null);var O=g=i=Object(a.a)([Object(u.a)("esri.geometry.HeightModelInfo")],g);t.a=O},function(e,t,r){"use strict";r.d(t,"a",(function(){return h}));var i=r(82),n=(r(80),r(81),r(88),r(85)),a=r(98),o=r(84),s=(r(83),r(86),r(87),r(118)),c=r(140),l=r(150),u=r(222),d=r(239);var h=e=>{var t=class extends e{constructor(){super(...arguments),this.timeExtent=null,this.timeOffset=null,this.useViewTime=!0}readOffset(e,t){var r=t.timeInfo.exportOptions;if(!r)return null;var i=r.timeOffset,n=c.d.fromJSON(r.timeOffsetUnits);return i&&n?new u.a({value:i,unit:n}):null}set timeInfo(e){Object(s.m)(e,this.fields),this._set("timeInfo",e)}};return Object(i.a)([Object(n.b)({type:l.a,json:{write:!1}})],t.prototype,"timeExtent",void 0),Object(i.a)([Object(n.b)({type:u.a})],t.prototype,"timeOffset",void 0),Object(i.a)([Object(a.a)("service","timeOffset",["timeInfo.exportOptions"])],t.prototype,"readOffset",null),Object(i.a)([Object(n.b)({value:null,type:d.a,json:{write:!0,origins:{"web-document":{read:!1,write:!1}}}})],t.prototype,"timeInfo",null),Object(i.a)([Object(n.b)({type:Boolean,json:{read:{source:"timeAnimation"},write:{target:"timeAnimation"},origins:{"web-scene":{read:!1,write:!1}}}})],t.prototype,"useViewTime",void 0),t=Object(i.a)([Object(o.a)("esri.layers.mixins.TemporalLayer")],t)}},function(e,t,r){"use strict";r.d(t,"a",(function(){return c})),r.d(t,"b",(function(){return h})),r.d(t,"c",(function(){return u})),r.d(t,"d",(function(){return n})),r.d(t,"e",(function(){return o})),r.d(t,"f",(function(){return d})),r.d(t,"g",(function(){return s})),r.d(t,"h",(function(){return p})),r.d(t,"i",(function(){return l})),r.d(t,"j",(function(){return a}));var i=r(184);function n(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[4],e[4]=t[5],e[5]=t[6],e[6]=t[8],e[7]=t[9],e[8]=t[10],e}function a(e,t,r,i,n,a,o,s,c,l){return e[0]=t,e[1]=r,e[2]=i,e[3]=n,e[4]=a,e[5]=o,e[6]=s,e[7]=c,e[8]=l,e}function o(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e}function s(e,t,r){var i=t[0],n=t[1],a=t[2],o=t[3],s=t[4],c=t[5],l=t[6],u=t[7],d=t[8],h=r[0],p=r[1],f=r[2],b=r[3],v=r[4],m=r[5],g=r[6],y=r[7],O=r[8];return e[0]=h*i+p*o+f*l,e[1]=h*n+p*s+f*u,e[2]=h*a+p*c+f*d,e[3]=b*i+v*o+m*l,e[4]=b*n+v*s+m*u,e[5]=b*a+v*c+m*d,e[6]=g*i+y*o+O*l,e[7]=g*n+y*s+O*u,e[8]=g*a+y*c+O*d,e}function c(e,t,r){var i=t[0],n=t[1],a=t[2],o=t[3],s=t[4],c=t[5],l=t[6],u=t[7],d=t[8],h=r[0],p=r[1];return e[0]=i,e[1]=n,e[2]=a,e[3]=o,e[4]=s,e[5]=c,e[6]=h*i+p*o+l,e[7]=h*n+p*s+u,e[8]=h*a+p*c+d,e}function l(e,t,r){var i=t[0],n=t[1],a=t[2],o=t[3],s=t[4],c=t[5],l=t[6],u=t[7],d=t[8],h=Math.sin(r),p=Math.cos(r);return e[0]=p*i+h*o,e[1]=p*n+h*s,e[2]=p*a+h*c,e[3]=p*o-h*i,e[4]=p*s-h*n,e[5]=p*c-h*a,e[6]=l,e[7]=u,e[8]=d,e}function u(e,t,r){var i=r[0],n=r[1],a=r[2];return e[0]=i*t[0],e[1]=i*t[1],e[2]=i*t[2],e[3]=n*t[3],e[4]=n*t[4],e[5]=n*t[5],e[6]=a*t[6],e[7]=a*t[7],e[8]=a*t[8],e}function d(e,t,r){var i=r[0],n=r[1];return e[0]=i*t[0],e[1]=i*t[1],e[2]=i*t[2],e[3]=n*t[3],e[4]=n*t[4],e[5]=n*t[5],e}function h(e,t){var r=t[0],i=t[1],n=t[2],a=t[4],o=t[5],s=t[6],c=t[8],l=t[9],u=t[10],d=u*o-s*l,h=-u*a+s*c,p=l*a-o*c,f=r*d+i*h+n*p;if(!f)return null;var b=1/f;return e[0]=d*b,e[1]=(-u*i+n*l)*b,e[2]=(s*i-n*o)*b,e[3]=h*b,e[4]=(u*r-n*c)*b,e[5]=(-s*r+n*a)*b,e[6]=p*b,e[7]=(-l*r+i*c)*b,e[8]=(o*r-i*a)*b,e}function p(e,t){var r=t[0],i=t[1],n=t[2],a=t[3],o=t[4],s=t[5],c=t[6],l=t[7],u=t[8],d=t[9],h=t[10],p=t[11],f=t[12],b=t[13],v=t[14],m=t[15],g=r*s-i*o,y=r*c-n*o,O=r*l-a*o,j=i*c-n*s,_=i*l-a*s,w=n*l-a*c,x=u*b-d*f,S=u*v-h*f,M=u*m-p*f,T=d*v-h*b,P=d*m-p*b,E=h*m-p*v,C=g*E-y*P+O*T+j*M-_*S+w*x;return C?(C=1/C,e[0]=(s*E-c*P+l*T)*C,e[1]=(c*M-o*E-l*S)*C,e[2]=(o*P-s*M+l*x)*C,e[3]=(n*P-i*E-a*T)*C,e[4]=(r*E-n*M+a*S)*C,e[5]=(i*M-r*P-a*x)*C,e[6]=(b*w-v*_+m*j)*C,e[7]=(v*O-f*w-m*y)*C,e[8]=(f*_-b*O+m*g)*C,e):null}function f(e,t,r){return e[0]=t[0]-r[0],e[1]=t[1]-r[1],e[2]=t[2]-r[2],e[3]=t[3]-r[3],e[4]=t[4]-r[4],e[5]=t[5]-r[5],e[6]=t[6]-r[6],e[7]=t[7]-r[7],e[8]=t[8]-r[8],e}var b=s,v=f;Object.freeze({__proto__:null,fromMat4:n,copy:function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e},set:a,identity:o,transpose:function(e,t){if(e===t){var r=t[1],i=t[2],n=t[5];e[1]=t[3],e[2]=t[6],e[3]=r,e[5]=t[7],e[6]=i,e[7]=n}else e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8];return e},invert:function(e,t){var r=t[0],i=t[1],n=t[2],a=t[3],o=t[4],s=t[5],c=t[6],l=t[7],u=t[8],d=u*o-s*l,h=-u*a+s*c,p=l*a-o*c,f=r*d+i*h+n*p;return f?(f=1/f,e[0]=d*f,e[1]=(-u*i+n*l)*f,e[2]=(s*i-n*o)*f,e[3]=h*f,e[4]=(u*r-n*c)*f,e[5]=(-s*r+n*a)*f,e[6]=p*f,e[7]=(-l*r+i*c)*f,e[8]=(o*r-i*a)*f,e):null},adjoint:function(e,t){var r=t[0],i=t[1],n=t[2],a=t[3],o=t[4],s=t[5],c=t[6],l=t[7],u=t[8];return e[0]=o*u-s*l,e[1]=n*l-i*u,e[2]=i*s-n*o,e[3]=s*c-a*u,e[4]=r*u-n*c,e[5]=n*a-r*s,e[6]=a*l-o*c,e[7]=i*c-r*l,e[8]=r*o-i*a,e},determinant:function(e){var t=e[0],r=e[1],i=e[2],n=e[3],a=e[4],o=e[5],s=e[6],c=e[7],l=e[8];return t*(l*a-o*c)+r*(-l*n+o*s)+i*(c*n-a*s)},multiply:s,translate:c,rotate:l,scale:u,scaleByVec2:d,fromTranslation:function(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=t[0],e[7]=t[1],e[8]=1,e},fromRotation:function(e,t){var r=Math.sin(t),i=Math.cos(t);return e[0]=i,e[1]=r,e[2]=0,e[3]=-r,e[4]=i,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e},fromScaling:function(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=0,e[4]=t[1],e[5]=0,e[6]=0,e[7]=0,e[8]=1,e},fromMat2d:function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=0,e[3]=t[2],e[4]=t[3],e[5]=0,e[6]=t[4],e[7]=t[5],e[8]=1,e},fromQuat:function(e,t){var r=t[0],i=t[1],n=t[2],a=t[3],o=r+r,s=i+i,c=n+n,l=r*o,u=i*o,d=i*s,h=n*o,p=n*s,f=n*c,b=a*o,v=a*s,m=a*c;return e[0]=1-d-f,e[3]=u-m,e[6]=h+v,e[1]=u+m,e[4]=1-l-f,e[7]=p-b,e[2]=h-v,e[5]=p+b,e[8]=1-l-d,e},normalFromMat4Legacy:h,normalFromMat4:p,projection:function(e,t,r){return e[0]=2/t,e[1]=0,e[2]=0,e[3]=0,e[4]=-2/r,e[5]=0,e[6]=-1,e[7]=1,e[8]=1,e},str:function(e){return"mat3("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+", "+e[8]+")"},frob:function(e){return Math.sqrt(Math.pow(e[0],2)+Math.pow(e[1],2)+Math.pow(e[2],2)+Math.pow(e[3],2)+Math.pow(e[4],2)+Math.pow(e[5],2)+Math.pow(e[6],2)+Math.pow(e[7],2)+Math.pow(e[8],2))},add:function(e,t,r){return e[0]=t[0]+r[0],e[1]=t[1]+r[1],e[2]=t[2]+r[2],e[3]=t[3]+r[3],e[4]=t[4]+r[4],e[5]=t[5]+r[5],e[6]=t[6]+r[6],e[7]=t[7]+r[7],e[8]=t[8]+r[8],e},subtract:f,multiplyScalar:function(e,t,r){return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e[4]=t[4]*r,e[5]=t[5]*r,e[6]=t[6]*r,e[7]=t[7]*r,e[8]=t[8]*r,e},multiplyScalarAndAdd:function(e,t,r,i){return e[0]=t[0]+r[0]*i,e[1]=t[1]+r[1]*i,e[2]=t[2]+r[2]*i,e[3]=t[3]+r[3]*i,e[4]=t[4]+r[4]*i,e[5]=t[5]+r[5]*i,e[6]=t[6]+r[6]*i,e[7]=t[7]+r[7]*i,e[8]=t[8]+r[8]*i,e},exactEquals:function(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]&&e[6]===t[6]&&e[7]===t[7]&&e[8]===t[8]},equals:function(e,t){var r=e[0],n=e[1],a=e[2],o=e[3],s=e[4],c=e[5],l=e[6],u=e[7],d=e[8],h=t[0],p=t[1],f=t[2],b=t[3],v=t[4],m=t[5],g=t[6],y=t[7],O=t[8];return Math.abs(r-h)<=i.a*Math.max(1,Math.abs(r),Math.abs(h))&&Math.abs(n-p)<=i.a*Math.max(1,Math.abs(n),Math.abs(p))&&Math.abs(a-f)<=i.a*Math.max(1,Math.abs(a),Math.abs(f))&&Math.abs(o-b)<=i.a*Math.max(1,Math.abs(o),Math.abs(b))&&Math.abs(s-v)<=i.a*Math.max(1,Math.abs(s),Math.abs(v))&&Math.abs(c-m)<=i.a*Math.max(1,Math.abs(c),Math.abs(m))&&Math.abs(l-g)<=i.a*Math.max(1,Math.abs(l),Math.abs(g))&&Math.abs(u-y)<=i.a*Math.max(1,Math.abs(u),Math.abs(y))&&Math.abs(d-O)<=i.a*Math.max(1,Math.abs(d),Math.abs(O))},mul:b,sub:v})},function(e,t,r){"use strict";r.d(t,"a",(function(){return i}));var i={position:0,normal:1,uv0:2,color:3,size:4,tangent:4,auxpos1:5,symbolColor:5,auxpos2:6,featureAttribute:6,instanceFeatureAttribute:6,instanceColor:7,model:8,modelNormal:12,modelOriginHi:11,modelOriginLo:15}},function(e,t,r){"use strict";r.d(t,"a",(function(){return i}));class i{constructor(e,t){t&&(this._config=t.snapshot()),this._program=this.initializeProgram(e),e.commonUniformStore&&(this._commonUniformStore=e.commonUniformStore,this._commonUniformStore.subscribeProgram(this._program)),this._pipeline=this.initializePipeline(e)}dispose(){this._program&&(this._commonUniformStore&&this._commonUniformStore.unsubscribeProgram(this._program),this._program.dispose(),this._program=null)}reload(e){this._program&&(this._commonUniformStore&&this._commonUniformStore.unsubscribeProgram(this._program),this._program.dispose()),this._program=this.initializeProgram(e),this._commonUniformStore&&this._commonUniformStore.subscribeProgram(this._program)}get program(){return this._program}get pipeline(){return this._pipeline}get key(){return this._config.key}get configuration(){return this._config}bindPass(e,t,r){}bindMaterial(e,t,r){}bindDraw(e,t,r){}bindPipelineState(e){e.setPipelineState(this.pipeline)}ensureAttributeLocations(e){this.program.assertCompatibleVertexAttributeLocations(e)}get primitiveType(){return 4}}},function(e,t,r){"use strict";r.d(t,"a",(function(){return s}));var i,n=r(120),a=r(119),o=r(417);function s(e){e.include(o.a),e.code.add(Object(a.a)(i||(i=Object(n.a)(["\n    float linearDepthFromFloat(float depth, vec2 nearFar) {\n      return -(depth * (nearFar[1] - nearFar[0]) + nearFar[0]);\n    }\n\n    float linearDepthFromTexture(sampler2D depthTex, vec2 uv, vec2 nearFar) {\n      return linearDepthFromFloat(rgba2float(texture2D(depthTex, uv)), nearFar);\n    }\n  "]))))}},function(e,t,r){"use strict";r.d(t,"a",(function(){return s})),r.d(t,"b",(function(){return c})),r.d(t,"c",(function(){return o})),r.d(t,"d",(function(){return a})),r.d(t,"e",(function(){return n})),r.d(t,"f",(function(){return d})),r.d(t,"g",(function(){return u}));var i=[0,0];function n(e,t){return l(e,t.x,t.y,t.z)}function a(e,t){if(!t.points||t.points.length)return!1;for(var r of t.points)if(!s(e,r))return!1;return!0}function o(e,t){var{xmin:r,ymin:i,zmin:n,xmax:a,ymax:o,zmax:s}=t;return e.hasZ&&t.hasZ?l(e,r,i,n)&&l(e,r,o,n)&&l(e,a,o,n)&&l(e,a,i,n)&&l(e,r,i,s)&&l(e,r,o,s)&&l(e,a,o,s)&&l(e,a,i,s):l(e,r,i)&&l(e,r,o)&&l(e,a,o)&&l(e,a,i)}function s(e,t){return l(e,t[0],t[1])}function c(e,t){return l(e,t[0],t[1],t[2])}function l(e,t,r,i){return t>=e.xmin&&t<=e.xmax&&r>=e.ymin&&r<=e.ymax&&(null==i||!e.hasZ||i>=e.zmin&&i<=e.zmax)}function u(e,t){return i[1]=t.y,i[0]=t.x,d(e,i)}function d(e,t){return function(e,t){if(!e)return!1;if(function(e){return!Array.isArray(e[0][0])}(e))return h(!1,e,t);for(var r=!1,i=0,n=e.length;i<n;i++)r=h(r,e[i],t);return r}(e.rings,t)}function h(e,t,r){for(var[i,n]=r,a=e,o=0,s=0,c=t.length;s<c;s++){++o===c&&(o=0);var[l,u]=t[s],[d,h]=t[o];(u<n&&h>=n||h<n&&u>=n)&&l+(n-u)/(h-u)*(d-l)<i&&(a=!a)}return a}},function(e,t,r){"use strict";r.d(t,"a",(function(){return s}));var i=r(7),n=r(175),a=r(94),o=r(201);function s(e,t,r){return c.apply(this,arguments)}function c(){return(c=Object(i.a)((function*(e,t,r){var i=e&&e.getAtOrigin&&e.getAtOrigin("renderer",t.origin);if(i&&"unique-value"===i.type&&i.styleOrigin){var s=yield Object(o.c)(i.populateFromStyle());if(Object(a.u)(r),!1===s.ok){var c=s.error;t&&t.messages&&t.messages.push(new n.a("renderer:style-reference","Failed to create unique value renderer from style reference: ".concat(c.message),{error:c,context:t})),e.clear("renderer",t.origin)}}}))).apply(this,arguments)}},function(e,t,r){"use strict";r.d(t,"a",(function(){return y})),r.d(t,"b",(function(){return v})),r.d(t,"c",(function(){return s})),r.d(t,"d",(function(){return O})),r.d(t,"e",(function(){return j})),r.d(t,"f",(function(){return _})),r.d(t,"g",(function(){return w}));var i=r(100);var n=(e,t,r)=>[t,r],a=(e,t,r)=>[t,r,e[2]],o=(e,t,r)=>[t,r,e[2],e[3]];function s(e){return e?{originPosition:"upper-left"===e.originPosition?"upperLeft":"lower-left"===e.originPosition?"lowerLeft":e.originPosition,scale:e.tolerance?[e.tolerance,e.tolerance]:[1,1],translate:e.extent?[e.extent.xmin,e.extent.ymax]:[0,0]}:null}function c({scale:e,translate:t},r){return Math.round((r-t[0])/e[0])}function l({scale:e,translate:t},r){return Math.round((t[1]-r)/e[1])}function u(e,t,r){for(var i,n,a,o,s=[],u=0;u<r.length;u++){var d=r[u];u>0?(a=c(e,d[0]),o=l(e,d[1]),a===i&&o===n||(s.push(t(d,a-i,o-n)),i=a,n=o)):(i=c(e,d[0]),n=l(e,d[1]),s.push(t(d,i,n)))}return s.length>0?s:null}function d({scale:e,translate:t},r){return r*e[0]+t[0]}function h({scale:e,translate:t},r){return t[1]-r*e[1]}function p(e,t,r){var i=new Array(r.length);if(!r.length)return i;var[n,a]=e.scale,o=d(e,r[0][0]),s=h(e,r[0][1]);i[0]=t(r[0],o,s);for(var c=1;c<r.length;c++){var l=r[c];o+=l[0]*n,s-=l[1]*a,i[c]=t(l,o,s)}return i}function f(e,t,r){for(var i=new Array(r.length),n=0;n<r.length;n++)i[n]=p(e,t,r[n]);return i}function b(e,t,r,i,s){return t.points=function(e,t,r,i){return u(e,r?i?o:a:i?a:n,t)}(e,r.points,i,s),t}function v(e,t,r,i,n){return t.x=c(e,r.x),t.y=l(e,r.y),t!==r&&(i&&(t.z=r.z),n&&(t.m=r.m)),t}function m(e,t,r,i,s){var c=function(e,t,r,i){for(var s=[],c=r?i?o:a:i?a:n,l=0;l<t.length;l++){var d=u(e,c,t[l]);d&&d.length>=3&&s.push(d)}return s.length?s:null}(e,r.rings,i,s);return c?(t.rings=c,t):null}function g(e,t,r,i,s){var c=function(e,t,r,i){for(var s=[],c=r?i?o:a:i?a:n,l=0;l<t.length;l++){var d=u(e,c,t[l]);d&&d.length>=2&&s.push(d)}return s.length?s:null}(e,r.paths,i,s);return c?(t.paths=c,t):null}function y(e,t){return e&&t?Object(i.f)(t)?v(e,{},t,!1,!1):Object(i.h)(t)?g(e,{},t,!1,!1):Object(i.g)(t)?m(e,{},t,!1,!1):Object(i.e)(t)?b(e,{},t,!1,!1):Object(i.d)(t)?(o=!1,s=!1,(n={}).xmin=c(r=e,(a=t).xmin),n.ymin=l(r,a.ymin),n.xmax=c(r,a.xmax),n.ymax=l(r,a.ymax),n!==a&&(o&&(n.zmin=a.zmin,n.zmax=a.zmax),s&&(n.mmin=a.mmin,n.mmax=a.mmax)),n):null:null;var r,n,a,o,s}function O(e,t,r,i,s){return t.points=function(e,t,r,i){return p(e,r?i?o:a:i?a:n,t)}(e,r.points,i,s),t}function j(e,t,r,i,n){return t.x=d(e,r.x),t.y=h(e,r.y),t!==r&&(i&&(t.z=r.z),n&&(t.m=r.m)),t}function _(e,t,r,i,s){return t.rings=function(e,t,r,i){return f(e,r?i?o:a:i?a:n,t)}(e,r.rings,i,s),t}function w(e,t,r,i,s){return t.paths=function(e,t,r,i){return f(e,r?i?o:a:i?a:n,t)}(e,r.paths,i,s),t}},function(e,t,r){"use strict";r.d(t,"a",(function(){return d})),r.d(t,"b",(function(){return u})),r.d(t,"c",(function(){return h})),r.d(t,"d",(function(){return l})),r.d(t,"e",(function(){return p})),r.d(t,"f",(function(){return c}));var i=r(113),n=r(105),a=r(104),o=r(135),s=r(340);function c(e,t){var r=e.x-t.x,i=e.y-t.y;return r*r+i*i}function l(e,t){var r=e.length===t.length&&e[0]===t[0]&&e[1]===t[1];switch(e.length){case 2:return r;case 3:return r&&e[2]===t[2];case 4:return r&&e[3]===t[3]}return!1}function u(e,t,r,i){return"2d"===i.type?i.toScreen(t.toPoint(e,v)):(d(e,t,r,i,f),i.state.camera.projectToScreen(f,b),Object(n.f)(b[0],b[1]))}function d(e,t,r,i,n=Object(a.e)()){var o=t.toXYZ(e);return o[2]=Object(s.b)(i,o,t.spatialReference,r)||0,i.renderCoordsHelper.toRenderCoords(o,t.spatialReference,n),n}function h(e,t,r,i,n,a,o){var c=r.toXYZ(e),l=r.toXYZ(t),u=Object(s.b)(n,c,r.spatialReference,i),d=Object(s.b)(n,l,r.spatialReference,i),h=(null==u?d:null==d?u:Math.min(u,d))||0;c[2]=h,l[2]=h,n.renderCoordsHelper.toRenderCoords(c,r.spatialReference,a),n.renderCoordsHelper.toRenderCoords(l,r.spatialReference,o)}function p(e,t){t.sort(((t,r)=>Object(o.j)(t.targetPoint,e)-Object(o.j)(r.targetPoint,e)))}var f=Object(a.e)(),b=Object(n.g)(),v=new i.a},function(e,t,r){"use strict";r.d(t,"a",(function(){return n})),r.d(t,"b",(function(){return a}));var i=r(110);class n{constructor(){this._key="",this._keyDirty=!1,this._parameterBits=this._parameterBits.map((()=>0))}get key(){return this._keyDirty&&(this._keyDirty=!1,this._key=String.fromCharCode.apply(String,this._parameterBits)),this._key}snapshot(){var e=this._parameterNames,t={key:this.key};for(var r of e)t[r]=this[r];return t}}function a(e={}){return(t,r)=>{var n,a;t._parameterNames=null!=(n=t._parameterNames)?n:[],t._parameterNames.push(r);for(var o=t._parameterNames.length-1,s=e.count||2,c=Math.ceil(Object(i.m)(s)),l=null!=(a=t._parameterBits)?a:[0],u=0;l[u]+c>16;)++u>=l.length&&l.push(0);t._parameterBits=l;var d=l[u],h=(1<<c)-1<<d;l[u]+=c,Object.defineProperty(t,r,{get(){return this[o]},set(e){if(this[o]!==e&&(this[o]=e,this._keyDirty=!0,this._parameterBits[u]=this._parameterBits[u]&~h|+e<<d&h,"number"!=typeof e&&"boolean"!=typeof e))throw"Configuration value for "+r+" must be boolean or number, got "+typeof e}})}}},,function(e,t,r){"use strict";var i=r(221),n=Array.prototype.splice;function a(e){e.length=0}class o{constructor(e=50,t=50){this._pool=new i.a(Array,void 0,a,t,e)}acquire(){return this._pool.acquire()}copy(e){var t=this.acquire();return e.unshift(0,0),n.apply(t,e),e.splice(0,2),t}release(e){this._pool.release(e)}prune(){this._pool.prune(0)}static acquire(){return s.acquire()}static copy(e){return s.copy(e)}static release(e){return s.release(e)}static prune(){s.prune()}}var s=new o(100);t.a=o},function(e,t,r){"use strict";class i{constructor(){this.objectIdFieldName=null,this.globalIdFieldName=null,this.geohashFieldName=null,this.geometryProperties=null,this.geometryType=null,this.spatialReference=null,this.hasZ=!1,this.hasM=!1,this.features=[],this.fields=[],this.transform=null,this.exceededTransferLimit=!1,this.uniqueIdField=null,this.queryGeometryType=null,this.queryGeometry=null}weakClone(){var e=new i;return e.objectIdFieldName=this.objectIdFieldName,e.globalIdFieldName=this.globalIdFieldName,e.geohashFieldName=this.geohashFieldName,e.geometryProperties=this.geometryProperties,e.geometryType=this.geometryType,e.spatialReference=this.spatialReference,e.hasZ=this.hasZ,e.hasM=this.hasM,e.features=this.features,e.fields=this.fields,e.transform=this.transform,e.exceededTransferLimit=this.exceededTransferLimit,e.uniqueIdField=this.uniqueIdField,e.queryGeometry=this.queryGeometry,e.queryGeometryType=this.queryGeometryType,e}}t.a=i},function(e,t,r){"use strict";r.d(t,"a",(function(){return b})),r.d(t,"b",(function(){return p})),r.d(t,"c",(function(){return f}));var i=r(89),n=r(126),a=r(97),o=r(107),s=["esri.Color","esri.portal.Portal","esri.symbols.support.Symbol3DAnchorPosition2D","esri.symbols.support.Symbol3DAnchorPosition3D"];function c(e){return e instanceof a.a}function l(e){return e instanceof o.a?Object.keys(e.items):c(e)?Object(n.a)(e).keys():e?Object.keys(e):[]}function u(e,t){return e instanceof o.a?e.items[t]:e[t]}function d(e){return e?e.declaredClass:null}function h(e,t){var r=e.diff;if(r&&"function"==typeof r)return r(e,t);var n=l(e),a=l(t);if(0!==n.length||0!==a.length){if(!n.length||!a.length||function(e,t){return!(!Array.isArray(e)||!Array.isArray(t))&&e.length!==t.length}(e,t))return{type:"complete",oldValue:e,newValue:t};var o,p=a.filter((e=>-1===n.indexOf(e))),f=n.filter((e=>-1===a.indexOf(e))),b=n.filter((r=>a.indexOf(r)>-1&&u(e,r)!==u(t,r))).concat(p,f).sort(),v=d(e);if(v&&s.indexOf(v)>-1&&b.length)return{type:"complete",oldValue:e,newValue:t};var m=c(e)&&c(t);for(var g of b){var y=u(e,g),O=u(t,g),j=void 0;(m||"function"!=typeof y&&"function"!=typeof O)&&y!==O&&(null==y&&null==O||(j=r&&r[g]&&"function"==typeof r[g]?r[g](y,O):"object"==typeof y&&"object"==typeof O&&d(y)===d(O)?h(y,O):{type:"complete",oldValue:y,newValue:O},Object(i.k)(j)&&(Object(i.k)(o)?o.diff[g]=j:o={type:"partial",diff:{[g]:j}})))}return o}}function p(e,t){if(Object(i.j)(e))return!1;var r=t.split("."),n=e;for(var a of r){if("complete"===n.type)return!0;if("partial"!==n.type)return!1;var o=n.diff[a];if(!o)return!1;n=o}return!0}function f(e,t){for(var r of t)if(p(e,r))return!0;return!1}function b(e,t){if("function"!=typeof e&&"function"!=typeof t&&(e||t))return!e||!t||"object"==typeof e&&"object"==typeof t&&d(e)!==d(t)?{type:"complete",oldValue:e,newValue:t}:h(e,t)}},function(e,t,r){"use strict";r.d(t,"a",(function(){return o}));var i=r(82),n=(r(80),r(81),r(88),r(85)),a=r(84),o=(r(83),r(86),r(87),e=>{var t=class extends e{constructor(){super(...arguments),this.customParameters=null}};return Object(i.a)([Object(n.b)({json:{write:!0,origins:{"web-scene":{write:!1}}}})],t.prototype,"customParameters",void 0),t=Object(i.a)([Object(a.a)("esri.layers.mixins.CustomParametersMixin")],t)})},,function(e,t,r){"use strict";function i(e,t,r,i){return function(e){return"function"==typeof e}(e)?e(t,r,i):e}function n(e){return[e.r,e.g,e.b,e.a]}function a(e,t,r){var i=e=>{for(var t=e.length;t--;)if(-1===" /-,\n".indexOf(e.charAt(t)))return!1;return!0},n=[],a=0,s=-1;do{if((s=t.indexOf("[",a))>=a){if(s>a){var c=t.substr(a,s-a);n.push([c,null,i(c)])}if(a=s+1,(s=t.indexOf("]",a))>=a){if(s>a){var l=e[t.substr(a,s-a)];l&&n.push([null,l,!1])}a=s+1}}}while(-1!==s);if(a<t.length-1){var u=t.substr(a);n.push([u,null,i(u)])}return e=>{var t="",i=null;for(var a of n){var[s,c,l]=a;if(s)l?i=s:(i&&(t+=i,i=null),t+=s);else{var u=e.attributes[c];u&&(i&&(t+=i,i=null),t+=u)}}return o(t,r)}}function o(e,t){switch("string"!=typeof e&&(e=String(e)),t){case"LowerCase":return e.toLowerCase();case"Allcaps":return e.toUpperCase();default:return e}}function s(e,t,r,i,n,a,o=!0){for(var s=t/n,c=r/a,l=Math.ceil(s/2),u=Math.ceil(c/2),d=0;d<a;d++)for(var h=0;h<n;h++){for(var p=4*(h+(o?a-d-1:d)*n),f=0,b=0,v=0,m=0,g=0,y=0,O=0,j=(d+.5)*c,_=Math.floor(d*c);_<(d+1)*c;_++)for(var w=Math.abs(j-(_+.5))/u,x=(h+.5)*s,S=w*w,M=Math.floor(h*s);M<(h+1)*s;M++){var T=Math.abs(x-(M+.5))/l,P=Math.sqrt(S+T*T);P>=-1&&P<=1&&((f=2*P*P*P-3*P*P+1)>0&&(O+=f*e[(T=4*(M+_*t))+3],v+=f,e[T+3]<255&&(f=f*e[T+3]/250),m+=f*e[T],g+=f*e[T+1],y+=f*e[T+2],b+=f))}i[p]=m/b,i[p+1]=g/b,i[p+2]=y/b,i[p+3]=O/v}}function c(e){return e?{r:e[0],g:e[1],b:e[2],a:e[3]/255}:{r:0,g:0,b:0,a:0}}function l(e){var t;return null==(t=e.data)?void 0:t.symbol}function u(e){return"CIMVectorMarker"===e.type||"CIMPictureMarker"===e.type||"CIMBarChartMarker"===e.type||"CIMCharacterMarker"===e.type||"CIMPieChartMarker"===e.type||"CIMStackedBarChartMarker"===e.type}function d(e){return"CIMGradientStroke"===e.type||"CIMPictureStroke"===e.type||"CIMSolidStroke"===e.type}function h(e){return"CIMGradientFill"===e.type||"CIMHatchFill"===e.type||"CIMPictureFill"===e.type||"CIMSolidFill"===e.type||"CIMWaterFill"===e.type}function p(e){return"CIMMarkerPlacementAlongLineRandomSize"===e.type||"CIMMarkerPlacementAlongLineSameSize"===e.type||"CIMMarkerPlacementAlongLineVariableSize"===e.type||"CIMMarkerPlacementAtExtremities"===e.type||"CIMMarkerPlacementAtMeasuredUnits"===e.type||"CIMMarkerPlacementAtRatioPositions"===e.type||"CIMMarkerPlacementOnLine"===e.type||"CIMMarkerPlacementOnVertices"===e.type}r.d(t,"a",(function(){return o})),r.d(t,"b",(function(){return n})),r.d(t,"c",(function(){return a})),r.d(t,"d",(function(){return i})),r.d(t,"e",(function(){return c})),r.d(t,"f",(function(){return h})),r.d(t,"g",(function(){return u})),r.d(t,"h",(function(){return p})),r.d(t,"i",(function(){return d})),r.d(t,"j",(function(){return s})),r.d(t,"k",(function(){return l}))},function(e,t,r){"use strict";r.d(t,"a",(function(){return a})),r.d(t,"b",(function(){return u})),r.d(t,"c",(function(){return d})),r.d(t,"d",(function(){return n})),r.d(t,"e",(function(){return o})),r.d(t,"f",(function(){return s})),r.d(t,"g",(function(){return c})),r.d(t,"h",(function(){return l}));var i=r(184);function n(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e[4]=0,e[5]=0,e}function a(e,t){var r=t[0],i=t[1],n=t[2],a=t[3],o=t[4],s=t[5],c=r*a-i*n;return c?(c=1/c,e[0]=a*c,e[1]=-i*c,e[2]=-n*c,e[3]=r*c,e[4]=(n*s-a*o)*c,e[5]=(i*o-r*s)*c,e):null}function o(e,t,r){var i=t[0],n=t[1],a=t[2],o=t[3],s=t[4],c=t[5],l=r[0],u=r[1],d=r[2],h=r[3],p=r[4],f=r[5];return e[0]=i*l+a*u,e[1]=n*l+o*u,e[2]=i*d+a*h,e[3]=n*d+o*h,e[4]=i*p+a*f+s,e[5]=n*p+o*f+c,e}function s(e,t,r){var i=t[0],n=t[1],a=t[2],o=t[3],s=t[4],c=t[5],l=Math.sin(r),u=Math.cos(r);return e[0]=i*u+a*l,e[1]=n*u+o*l,e[2]=i*-l+a*u,e[3]=n*-l+o*u,e[4]=s,e[5]=c,e}function c(e,t,r){var i=t[0],n=t[1],a=t[2],o=t[3],s=t[4],c=t[5],l=r[0],u=r[1];return e[0]=i*l,e[1]=n*l,e[2]=a*u,e[3]=o*u,e[4]=s,e[5]=c,e}function l(e,t,r){var i=t[0],n=t[1],a=t[2],o=t[3],s=t[4],c=t[5],l=r[0],u=r[1];return e[0]=i,e[1]=n,e[2]=a,e[3]=o,e[4]=i*l+a*u+s,e[5]=n*l+o*u+c,e}function u(e,t){var r=Math.sin(t),i=Math.cos(t);return e[0]=i,e[1]=r,e[2]=-r,e[3]=i,e[4]=0,e[5]=0,e}function d(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=t[1],e[4]=0,e[5]=0,e}function h(e,t,r){return e[0]=t[0]-r[0],e[1]=t[1]-r[1],e[2]=t[2]-r[2],e[3]=t[3]-r[3],e[4]=t[4]-r[4],e[5]=t[5]-r[5],e}var p=o,f=h;Object.freeze({__proto__:null,copy:function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e},identity:n,set:function(e,t,r,i,n,a,o){return e[0]=t,e[1]=r,e[2]=i,e[3]=n,e[4]=a,e[5]=o,e},invert:a,determinant:function(e){return e[0]*e[3]-e[1]*e[2]},multiply:o,rotate:s,scale:c,translate:l,fromRotation:u,fromScaling:d,fromTranslation:function(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e[4]=t[0],e[5]=t[1],e},str:function(e){return"mat2d("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+")"},frob:function(e){return Math.sqrt(Math.pow(e[0],2)+Math.pow(e[1],2)+Math.pow(e[2],2)+Math.pow(e[3],2)+Math.pow(e[4],2)+Math.pow(e[5],2)+1)},add:function(e,t,r){return e[0]=t[0]+r[0],e[1]=t[1]+r[1],e[2]=t[2]+r[2],e[3]=t[3]+r[3],e[4]=t[4]+r[4],e[5]=t[5]+r[5],e},subtract:h,multiplyScalar:function(e,t,r){return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e[4]=t[4]*r,e[5]=t[5]*r,e},multiplyScalarAndAdd:function(e,t,r,i){return e[0]=t[0]+r[0]*i,e[1]=t[1]+r[1]*i,e[2]=t[2]+r[2]*i,e[3]=t[3]+r[3]*i,e[4]=t[4]+r[4]*i,e[5]=t[5]+r[5]*i,e},exactEquals:function(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]},equals:function(e,t){var r=e[0],n=e[1],a=e[2],o=e[3],s=e[4],c=e[5],l=t[0],u=t[1],d=t[2],h=t[3],p=t[4],f=t[5];return Math.abs(r-l)<=i.a*Math.max(1,Math.abs(r),Math.abs(l))&&Math.abs(n-u)<=i.a*Math.max(1,Math.abs(n),Math.abs(u))&&Math.abs(a-d)<=i.a*Math.max(1,Math.abs(a),Math.abs(d))&&Math.abs(o-h)<=i.a*Math.max(1,Math.abs(o),Math.abs(h))&&Math.abs(s-p)<=i.a*Math.max(1,Math.abs(s),Math.abs(p))&&Math.abs(c-f)<=i.a*Math.max(1,Math.abs(c),Math.abs(f))},mul:p,sub:f})},function(e,t,r){"use strict";r.d(t,"a",(function(){return l}));var i,n=r(120),a=r(200),o=r(119),s=Object(a.d)(1,1,0,1),c=Object(a.d)(1,0,1,1);function l(e){e.fragment.uniforms.add("depthTex","sampler2D"),e.fragment.uniforms.add("highlightViewportPixelSz","vec4"),e.fragment.constants.add("occludedHighlightFlag","vec4",s).add("unoccludedHighlightFlag","vec4",c),e.fragment.code.add(Object(o.a)(i||(i=Object(n.a)(["\n    void outputHighlight() {\n      vec4 fragCoord = gl_FragCoord;\n\n      float sceneDepth = texture2D(depthTex, (fragCoord.xy - highlightViewportPixelSz.xy) * highlightViewportPixelSz.zw).r;\n      if (fragCoord.z > sceneDepth + 5e-7) {\n        gl_FragColor = occludedHighlightFlag;\n      }\n      else {\n        gl_FragColor = unoccludedHighlightFlag;\n      }\n    }\n  "]))))}(l||(l={})).bindOutputHighlight=function(e,t,r){e.bindTexture(r.highlightDepthTexture,5),t.setUniform1i("depthTex",5),t.setUniform4f("highlightViewportPixelSz",0,0,r.inverseViewport[0],r.inverseViewport[1])}},function(e,t,r){"use strict";var i=r(94);class n{constructor(e,t,r,i){this.resolve=e,this.reject=t,this.callback=r,this.signal=i}}t.a=class{constructor(){this._tasks=new Array}get length(){return this._tasks.length}push(e,t){return new Promise(((r,i)=>this._tasks.push(new n(r,i,e,t))))}unshift(e,t){return new Promise(((r,i)=>this._tasks.unshift(new n(r,i,e,t))))}process(){if(0===this._tasks.length)return!1;var e=this._tasks.shift();try{Object(i.u)(e.signal);var t=e.callback();t&&"object"==typeof t&&"then"in t&&"function"==typeof t.then?t.then(e.resolve,e.reject):e.resolve(t)}catch(r){e.reject(r)}return!0}cancelAll(){var e=Object(i.e)();for(var t of this._tasks)t.reject(e);this._tasks.length=0}}},function(e,t,r){"use strict";var i=r(91),n=r(82),a=(r(80),r(81),r(88),r(85)),o=r(84),s=r(83),c=(r(86),r(87),r(97)),l=class extends c.a{constructor(...e){super(...e),this.requestOptions=null,this.url=null}normalizeCtorArgs(e,t){return"string"!=typeof e?e:Object(i.a)({url:e},t)}get parsedUrl(){return this._parseUrl(this.url)}_parseUrl(e){return e?Object(s.J)(e):null}_encode(e,t,r){var i={};for(var n in e)if("declaredClass"!==n){var a=e[n];if(null!=a&&"function"!=typeof a)if(Array.isArray(a)){i[n]=[];for(var o=0;o<a.length;o++)i[n][o]=this._encode(a[o])}else if("object"==typeof a)if(a.toJSON){var s=a.toJSON(r&&r[n]);i[n]=t?s:JSON.stringify(s)}else i[n]=t?a:JSON.stringify(a);else i[n]=a}return i}};Object(n.a)([Object(a.b)({readOnly:!0})],l.prototype,"parsedUrl",null),Object(n.a)([Object(a.b)()],l.prototype,"requestOptions",void 0),Object(n.a)([Object(a.b)({type:String})],l.prototype,"url",void 0);var u=l=Object(n.a)([Object(o.a)("esri.tasks.Task")],l);t.a=u},function(e,t,r){"use strict";var i=r(295),n=r(263);class a{constructor(e,t,r,i,a){this._context=e,this.bufferType=t,this.usage=r,this._glName=null,this._size=-1,this._indexType=void 0,e.instanceCounter.increment(1,this),this._glName=this._context.gl.createBuffer(),Object(n.a)(this._context.gl),i&&this.setData(i,a)}static createIndex(e,t,r,i){return new a(e,34963,t,r,i)}static createVertex(e,t,r){return new a(e,34962,t,r)}get glName(){return this._glName}get size(){return this._size}get indexType(){return this._indexType}get byteSize(){return 34962===this.bufferType?this._size:5125===this._indexType?4*this._size:2*this._size}dispose(){this._context&&(this._glName&&(this._context.gl.deleteBuffer(this._glName),this._glName=null),this._context.instanceCounter.decrement(1,this),this._context=null)}setData(e,t){if(e){if("number"==typeof e){if(e<0&&console.error("Buffer size cannot be negative!"),34963===this.bufferType&&t)switch(this._indexType=t,this._size=e,t){case 5123:e*=2;break;case 5125:e*=4}}else{var r=e.byteLength;Object(i.i)(e)&&(r/=2,this._indexType=5123),Object(i.j)(e)&&(r/=4,this._indexType=5125),this._size=r}var n=this._context.getBoundVAO();this._context.bindVAO(null),this._context.bindBuffer(this),this._context.gl.bufferData(this.bufferType,e,this.usage),this._context.bindVAO(n)}}setSubData(e,t=0,r=0,n=e.byteLength){if(e){(t<0||t>=this._size)&&console.error("offset is out of range!");var a=t,o=r,s=n,c=e.byteLength;Object(i.i)(e)&&(c/=2,a*=2,o*=2,s*=2),Object(i.j)(e)&&(c/=4,a*=4,o*=4,s*=4),void 0===n&&(n=c-1),r>=n&&console.error("end must be bigger than start!"),t+r-n>this._size&&console.error("An attempt to write beyond the end of the buffer!");var l=this._context.getBoundVAO();this._context.bindVAO(null),this._context.bindBuffer(this);var u=this._context.gl,d=ArrayBuffer.isView(e)?e.buffer:e,h=0===o&&s===e.byteLength?d:d.slice(o,s);u.bufferSubData(this.bufferType,a,h),this._context.bindVAO(l)}}}t.a=a},function(e,t,r){"use strict";var i=r(89),n=r(478);t.a=class{constructor(e,t,r,i,n){this._context=e,this._locations=t,this._layout=r,this._buffers=i,this._indexBuffer=n,this._glName=null,this._initialized=!1,e.instanceCounter.increment(2,this)}get glName(){return this._glName}get vertexBuffers(){return this._buffers}get indexBuffer(){return this._indexBuffer}get size(){return Object.keys(this._buffers).reduce(((e,t)=>e+this._buffers[t].size),this._indexBuffer?this._indexBuffer.size:0)}get layout(){return this._layout}get locations(){return this._locations}dispose(e=!0){if(this._context){var t=this._context.capabilities.vao;if(t&&this._glName&&(t.deleteVertexArray(this._glName),this._glName=null),this._context.getBoundVAO()===this&&this._context.bindVAO(null),e){for(var r in this._buffers)this._buffers[r].dispose(),delete this._buffers[r];this._indexBuffer=Object(i.f)(this._indexBuffer)}this._context.instanceCounter.decrement(2,this),this._context=null}}initialize(){if(!this._initialized){var e=this._context.capabilities.vao;if(e){var t=e.createVertexArray();e.bindVertexArray(t),this._bindLayout(),e.bindVertexArray(null),this._glName=t}this._initialized=!0}}bind(){this.initialize();var e=this._context.capabilities.vao;e?e.bindVertexArray(this.glName):(this._context.bindVAO(null),this._bindLayout())}_bindLayout(){var e=this._buffers,t=!!this._context.capabilities.vao,r=this._layout,i=this._indexBuffer;e||console.error("Vertex buffer dictionary is empty!");var a=this._context.gl;for(var o in e){var s=e[o];s||console.error("Vertex buffer is uninitialized!");var c=r[o];c||console.error("Vertex element descriptor is empty!"),Object(n.a)(this._context,this._locations,s,c)}i&&(t?a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,i.glName):this._context.bindBuffer(i))}unbind(){this.initialize();var e=this._context.capabilities.vao;e?e.bindVertexArray(null):this._unbindLayout()}_unbindLayout(){var e=this._buffers,t=this._layout;for(var r in e||console.error("Vertex buffer dictionary is empty!"),e){var i=e[r];i||console.error("Vertex buffer is uninitialized!");var a=t[r];Object(n.e)(this._context,this._locations,i,a)}this._indexBuffer&&this._context.unbindBuffer(this._indexBuffer.bufferType)}}},function(e,t,r){"use strict";r.d(t,"a",(function(){return a})),r.d(t,"b",(function(){return o})),r.d(t,"c",(function(){return s})),r.d(t,"d",(function(){return c}));r(80),r(295),r(89),r(99),r(183),r(189);var i=r(125),n=(r(155),r(598),r(279));r(311),r(416);class a{constructor(e,t,r){this.uid=e,this.geometry=t,this.attributes=r,this.visible=!0,this.objectId=null,this.centroid=null}}class o{constructor(){this.exceededTransferLimit=!1,this.features=[],this.fields=[],this.hasM=!1,this.hasZ=!1,this.geometryType=null,this.objectIdFieldName=null,this.globalIdFieldName=null,this.geometryProperties=null,this.geohashFieldName=null,this.spatialReference=null,this.transform=null}}function s(e){return"point"===e.type}function c(e,t,r,i){return{x:e,y:t,z:r,hasZ:null!=r,hasM:!1,spatialReference:i,type:"point"}}Object(n.d)(),Object(i.i)()},function(e,t,r){"use strict";r.d(t,"a",(function(){return j})),r.d(t,"b",(function(){return M})),r.d(t,"c",(function(){return _})),r.d(t,"d",(function(){return x})),r.d(t,"e",(function(){return h})),r.d(t,"f",(function(){return w})),r.d(t,"g",(function(){return O}));var i=r(89),n=r(110),a=r(104),o=r(111),s=r(279),c=r(179),l=r(357),u=r(550),d=Object(s.d)();function h(e,t,r,i,n,a,o){var s=Object(l.d)(t),u=r.tolerance;if(!s)if(e.boundingInfo)Object(c.a)(0===e.primitiveType),f(e.boundingInfo,i,n,u,a,o);else{var d=e.indices.get("position"),h=e.vertexAttributes.get("position");v(i,n,0,d.length/3,d,h,void 0,a,o)}}var p=Object(a.e)();function f(e,t,r,n,a,c){if(!Object(i.j)(e)){var l=function(e,t,r){return Object(o.v)(r,1/(t[0]-e[0]),1/(t[1]-e[1]),1/(t[2]-e[2]))}(t,r,p);if(Object(s.s)(d,e.getBBMin()),Object(s.r)(d,e.getBBMax()),Object(i.k)(a)&&a.applyToAabb(d),function(e,t,r,i){return function(e,t,r,i,n){var a=(e[0]-i-t[0])*r[0],o=(e[3]+i-t[0])*r[0],s=Math.min(a,o),c=Math.max(a,o),l=(e[1]-i-t[1])*r[1],u=(e[4]+i-t[1])*r[1];if((c=Math.min(c,Math.max(l,u)))<0)return!1;if((s=Math.max(s,Math.min(l,u)))>c)return!1;var d=(e[2]-i-t[2])*r[2],h=(e[5]+i-t[2])*r[2];return!((c=Math.min(c,Math.max(d,h)))<0)&&!((s=Math.max(s,Math.min(d,h)))>c)&&s<n}(e,t,r,i,1/0)}(d,t,l,n)){var{primitiveIndices:u,indices:h,position:b}=e,m=u?u.length:h.length/3;if(m>T){var g=e.getChildren();if(void 0!==g){for(var y=0;y<8;++y)void 0!==g[y]&&f(g[y],t,r,n,a,c);return}}v(t,r,0,m,h,b,u,a,c)}}}var b=Object(a.e)();function v(e,t,r,n,a,o,s,c,l){if(s)return function(e,t,r,n,a,o,s,c,l){for(var u=o.data,d=o.stride||o.size,h=e[0],p=e[1],f=e[2],v=t[0]-h,m=t[1]-p,g=t[2]-f,O=r;O<n;++O){var j=s[O],_=3*j,w=d*a[_++],x=u[w++],S=u[w++],M=u[w];w=d*a[_++];var T=u[w++],P=u[w++],E=u[w];w=d*a[_];var C=u[w++],A=u[w++],I=u[w];Object(i.k)(c)&&([x,S,M]=c.applyToVertex(x,S,M,O),[T,P,E]=c.applyToVertex(T,P,E,O),[C,A,I]=c.applyToVertex(C,A,I,O));var k=T-x,F=P-S,R=E-M,D=C-x,L=A-S,N=I-M,V=m*N-L*g,z=g*D-N*v,G=v*L-D*m,U=k*V+F*z+R*G;if(!(Math.abs(U)<=Number.EPSILON)){var q=h-x,H=p-S,B=f-M,W=q*V+H*z+B*G;if(U>0){if(W<0||W>U)continue}else if(W>0||W<U)continue;var J=H*R-F*B,Z=B*k-R*q,X=q*F-k*H,Y=v*J+m*Z+g*X;if(U>0){if(Y<0||W+Y>U)continue}else if(Y>0||W+Y<U)continue;var Q=(D*J+L*Z+N*X)/U;Q>=0&&l(Q,y(k,F,R,D,L,N,b),j)}}}(e,t,r,n,a,o,s,c,l);for(var u=o.data,d=o.stride||o.size,h=e[0],p=e[1],f=e[2],v=t[0]-h,m=t[1]-p,g=t[2]-f,O=r,j=3*r;O<n;++O){var _=d*a[j++],w=u[_++],x=u[_++],S=u[_];_=d*a[j++];var M=u[_++],T=u[_++],P=u[_];_=d*a[j++];var E=u[_++],C=u[_++],A=u[_];Object(i.k)(c)&&([w,x,S]=c.applyToVertex(w,x,S,O),[M,T,P]=c.applyToVertex(M,T,P,O),[E,C,A]=c.applyToVertex(E,C,A,O));var I=M-w,k=T-x,F=P-S,R=E-w,D=C-x,L=A-S,N=m*L-D*g,V=g*R-L*v,z=v*D-R*m,G=I*N+k*V+F*z;if(!(Math.abs(G)<=Number.EPSILON)){var U=h-w,q=p-x,H=f-S,B=U*N+q*V+H*z;if(G>0){if(B<0||B>G)continue}else if(B>0||B<G)continue;var W=q*F-k*H,J=H*I-F*U,Z=U*k-I*q,X=v*W+m*J+g*Z;if(G>0){if(X<0||B+X>G)continue}else if(X>0||B+X<G)continue;var Y=(R*W+D*J+L*Z)/G;Y>=0&&l(Y,y(I,k,F,R,D,L,b),O)}}}var m=Object(a.e)(),g=Object(a.e)();function y(e,t,r,i,n,a,s){return Object(o.v)(m,e,t,r),Object(o.v)(g,i,n,a),Object(o.f)(s,m,g),Object(o.q)(s,s),s}function O(e,t,r,i,a){var o=(r.screenLength||0)*e.pixelRatio;a&&(o=Object(u.d)(o,i,t,a));var s=o*Math.tan(.5*e.fovY)/(.5*e.fullHeight);return Object(n.i)(s*t,r.minWorldLength||0,null!=r.maxWorldLength?r.maxWorldLength:1/0)}function j(e,t,r){if(e){var i=e.parameters,n=e.paddingPixelsOverride;t.setUniform4f(r,i.divisor,i.offset,i.minPixelSize,n)}}function _(e,t){var r=t?_(t):{};for(var i in e){var n=e[i];n&&n.forEach&&(n=S(n)),null==n&&i in r||(r[i]=n)}return r}function w(e,t){var r=!1;for(var i in t){var n=t[i];void 0!==n&&(r=!0,Array.isArray(n)?e[i]=n.slice():e[i]=n)}return r}function x(e,t,r,i,a){if(t.options.selectionMode){for(var o=e.vertexAttributes.get("position").data,s=e.vertexAttributes.get("size"),c=s&&s.data[0],l=r[0],u=r[1],d=((c+i)/2+4)*e.screenToWorldRatio,h=Number.MAX_VALUE,p=0;p<o.length-5;p+=3){var f=o[p],b=o[p+1],v=l-f,m=u-b,g=o[p+3]-f,y=o[p+4]-b,O=Object(n.d)((g*v+y*m)/(g*g+y*y),0,1),j=g*O-v,_=y*O-m,w=j*j+_*_;w<h&&(h=w)}h<d*d&&a()}}function S(e){var t=[];return e.forEach((e=>t.push(e))),t}var M={multiply:1,ignore:2,replace:3,tint:4},T=1e3},function(e,t,r){"use strict";r.d(t,"a",(function(){return b})),r.d(t,"b",(function(){return d})),r.d(t,"c",(function(){return c})),r.d(t,"d",(function(){return m}));r(80);var i,n=r(81),a=r(126),o=[],s=n.a.getLogger("esri.core.Accessor");function c(e){void 0!==i&&i.onObservableAccessed(e)}var l=!1,u=!1;function d(e,t,r){if(l)return h(e,t,r);p(e);var i=t.call(r);return f(),i}function h(e,t,r){var i=l;l=!0,p(e);var n=null;try{n=t.call(r)}catch(a){u&&s.error(a)}return f(),l=i,n}function p(e){i=e,o.push(e)}function f(){var e=o.pop();i=o.length>0?o[o.length-1]:void 0,void 0!==e&&e.onTrackingEnd()}function b(e,t){if(!(32&t.flags)){var r=u;u=!1,64&t.flags?h(t,t.metadata.get,e):m(e,t),u=r}}var v=[];function m(e,t){128&t.flags||(t.flags|=128,h(t,(()=>{var r=t.metadata.dependsOn||v;for(var i of r)if("string"==typeof i&&-1===i.indexOf("."))g(e,i,!1);else for(var n=Object(a.f)(i),o=0,s=e;o<n.length&&null!=s&&"object"==typeof s;++o)s=g(s,n[o],o!==n.length-1)})),t.flags&=-129)}function g(e,t,r){var i="?"===t[t.length-1]?t.slice(0,-1):t;if(null!=e.getItemAt||Array.isArray(e)){var n=parseInt(i,10);if(!isNaN(n))return Array.isArray(e)?e[n]:e.getItemAt(n)}var o=Object(a.a)(e),s=null==o?void 0:o.properties.get(i);return s&&(c(s),b(e,s)),r?e[i]:void 0}},function(e,t,r){"use strict";r.d(t,"a",(function(){return l})),r.d(t,"b",(function(){return y})),r.d(t,"c",(function(){return g})),r.d(t,"d",(function(){return u})),r.d(t,"e",(function(){return s})),r.d(t,"f",(function(){return o})),r.d(t,"g",(function(){return f})),r.d(t,"h",(function(){return d})),r.d(t,"i",(function(){return h})),r.d(t,"j",(function(){return c}));var i=r(110),n=r(104),a=r(111);function o(e){var t=e[0]*e[0]+e[4]*e[4]+e[8]*e[8],r=e[1]*e[1]+e[5]*e[5]+e[9]*e[9],i=e[2]*e[2]+e[6]*e[6]+e[10]*e[10];return Math.sqrt(Math.max(Math.max(t,r),i))}function s(e,t,r){r=r||e;var i=Object(a.g)(e,t);Object(a.v)(r,e[0]-i*t[0],e[1]-i*t[1],e[2]-i*t[2]),Object(a.q)(r,r)}function c(e,t,r){Math.abs(e[0])>Math.abs(e[1])?Object(a.v)(t,0,1,0):Object(a.v)(t,1,0,0),Object(a.f)(r,e,t),Object(a.q)(t,t),Object(a.f)(t,r,e),Object(a.q)(r,r)}function l(e,t){var r=Object(a.o)(e),n=Object(i.c)(e[2]/r),o=Math.atan2(e[1]/r,e[0]/r);return Object(a.v)(t,r,n,o),t}function u(e,t,r){var i=r[0]-t[0],n=r[1]-t[1],a=r[2]-t[2],o=i*i+n*n+a*a;return o?(o=1/Math.sqrt(o),e[0]=i*o,e[1]=n*o,e[2]=a*o,e):(e[0]=0,e[1]=0,e[2]=0,e)}function d(e,t,r,i=Object(n.e)()){var o=Object(a.o)(e),s=Object(a.o)(t),c=Object(a.g)(e,t)/(o*s);if(c<.9999999999999999){var l=Math.acos(c),u=((1-r)*o+r*s)/Math.sin(l),d=u/o*Math.sin((1-r)*l),h=u/s*Math.sin(r*l);return Object(a.d)(O,e,d),Object(a.d)(j,t,h),Object(a.e)(i,O,j)}return Object(a.h)(i,e,t,r)}function h(e,t,r,i=Object(n.e)(),o=Object(n.e)()){var s=Object(a.o)(e),c=Object(a.o)(t),l=Object(a.g)(e,t)/(s*c);if(l<.9999999999999999){var u=Math.acos(l),d=Math.sin(u),h=Math.sin(r*u),p=Math.sin((1-r)*u),f=(1-r)*s+r*c,b=f/d,v=b/c*h;Object(a.d)(O,e,b/s*p),Object(a.d)(j,t,v),Object(a.e)(i,O,j);var m=1/s*(-Math.cos((1-r)*u)*u*f+p*(-s+c));Object(a.d)(O,e,m);var g=1/c*(Math.cos(r*u)*u*f+h*(-s+c));return Object(a.d)(j,t,g),Object(a.e)(o,O,j),Object(a.d)(o,o,1/d),o}return Object(a.h)(i,e,t,r),Object(a.i)(o,t,e),Object(a.q)(o,o),o}class p{constructor(e,t){this.min=e,this.max=t,this.range=t-e}ndiff(e,t=0){return Math.ceil((e-t)/this.range)*this.range+t}_normalize(e,t,r,i=0,n=!1){return(r-=i)<e?r+=this.ndiff(e-r):r>t&&(r-=this.ndiff(r-t)),n&&r===t&&(r=e),r+i}normalize(e,t=0,r=!1){return this._normalize(this.min,this.max,e,t,r)}clamp(e,t=0){return Object(i.d)(e-t,this.min,this.max)+t}monotonic(e,t,r){return e<t?t:t+this.ndiff(e-t,r)}minimalMonotonic(e,t,r){return this._normalize(e,e+this.range,t,r)}center(e,t,r){return t=this.monotonic(e,t,r),this.normalize((e+t)/2,r)}diff(e,t,r){return this.monotonic(e,t,r)-e}shortestSignedDiff(e,t){e=this.normalize(e);var r=(t=this.normalize(t))-e,i=t<e?this.minimalMonotonic(e,t)-e:t-this.minimalMonotonic(t,e);return Math.abs(r)<Math.abs(i)?r:i}contains(e,t,r){return t=this.minimalMonotonic(e,t),(r=this.minimalMonotonic(e,r))>e&&r<t}}function f(e,t,r,i){Object(a.i)(b,t,e),Object(a.i)(v,r,e),Object(a.f)(i,b,v),Object(a.q)(i,i),i[3]=-Object(a.g)(e,i)}var b=Object(n.e)(),v=Object(n.e)();function m(e){for(var t in e){var r=e[t];r instanceof Function&&(e[t]=r.bind(e))}return e}m(new p(0,2*Math.PI));var g=m(new p(-Math.PI,Math.PI)),y=m(new p(0,360)),O=(Object(n.e)(),Object(n.e)()),j=Object(n.e)()},function(e,t,r){"use strict";var i=r(82),n=(r(80),r(81),r(88),r(85)),a=r(84),o=(r(83),r(86),r(87),r(97)),s=class extends o.a{constructor(){super(...arguments),this.SCHEDULER_LOG_SLOW_TASKS=!1,this.FEATURE_SERVICE_SNAPPING_SOURCE_TILE_TREE_SHOW_TILES=!1}};Object(i.a)([Object(n.b)()],s.prototype,"SCHEDULER_LOG_SLOW_TASKS",void 0),Object(i.a)([Object(n.b)()],s.prototype,"FEATURE_SERVICE_SNAPPING_SOURCE_TILE_TREE_SHOW_TILES",void 0);var c=new(s=Object(i.a)([Object(a.a)("esri.views.support.DebugFlags")],s));t.a=c},function(e,t,r){"use strict";function i(){return[1,0,0,0,1,0,0,0,1]}function n(e,t){return new Float64Array(e,t,9)}r.d(t,"a",(function(){return i})),r.d(t,"b",(function(){return n}));Object.freeze({__proto__:null,create:i,clone:function(e){return[e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8]]},fromValues:function(e,t,r,i,n,a,o,s,c){return[e,t,r,i,n,a,o,s,c]},createView:n})},function(e,t,r){"use strict";r.d(t,"a",(function(){return d})),r.d(t,"b",(function(){return l})),r.d(t,"c",(function(){return u}));var i,n,a,o,s=r(120),c=r(119),l=.1,u=.001;function d(e,t){var r=e.fragment;switch(t.alphaDiscardMode){case 0:r.code.add(Object(c.a)(i||(i=Object(s.a)(["\n        #define discardOrAdjustAlpha(color) { if (color.a < ",") { discard; } }\n      "])),c.a.float(u)));break;case 1:r.code.add(Object(c.a)(n||(n=Object(s.a)(["\n        void discardOrAdjustAlpha(inout vec4 color) {\n          color.a = 1.0;\n        }\n      "]))));break;case 2:r.uniforms.add("textureAlphaCutoff","float"),r.code.add(Object(c.a)(a||(a=Object(s.a)(["\n        #define discardOrAdjustAlpha(color) { if (color.a < textureAlphaCutoff) { discard; } else { color.a = 1.0; } }\n      "]))));break;case 3:e.fragment.uniforms.add("textureAlphaCutoff","float"),e.fragment.code.add(Object(c.a)(o||(o=Object(s.a)(["\n        #define discardOrAdjustAlpha(color) { if (color.a < textureAlphaCutoff) { discard; } }\n      "]))))}}},function(e,t,r){"use strict";r.d(t,"a",(function(){return p})),r.d(t,"b",(function(){return b}));var i=r(82),n=(r(80),r(81)),a=(r(88),r(85)),o=r(84),s=(r(83),r(86),r(87),r(97)),c=r(459),l=r(597),u=r(408);class d extends u.a{constructor(e){super(!0),this._onChange=e,this._value="mouse",this.registerIncoming("pointer-down",(e=>{var t="touch"===e.data.native.pointerType;this._setValue(t?"touch":"mouse")})),this._moveHandler=this.registerIncoming("pointer-move",(e=>{var t="touch"===e.data.native.pointerType;this._setValue(t?"touch":"mouse")})),this._moveHandler.pause()}_setValue(e){e!==this._value&&("touch"===e?this._moveHandler.resume():this._moveHandler.pause(),this._value=e,this._onChange(e))}}var h=n.a.getLogger("esri.views.input.InputManager"),p=class extends s.a{constructor(e){super(e),this._pointerCaptures=new Map,this._nameToGroup={},this._handlers=[],this._currentPropagation=null,this._sourceEvents=new Set,this._keyModifiers=new Set,this._activeKeyModifiers=new Set,this._stoppedPropagationEventIds=new Set,this.primaryKey=l.c,this.latestPointerType="mouse",this.test={timestamp:void 0,hasCurrentPropagation:()=>!!this._currentPropagation}}initialize(){this.eventSource.onEventReceived=this._onEventReceived.bind(this),this._installRecognizers()}destroy(){var e=Object.keys(this._nameToGroup);for(var t of e)this.uninstallHandlers(t);this.eventSource=null,this._currentPropagation=null}get hasPendingInputs(){return this._handlers.some((e=>e.handler.hasPendingInputs))}installHandlers(e,t,r=b.INTERNAL){var i=this;if(this._nameToGroup[e])h.error("There is already an InputHandler group registered under the name `"+e+"`");else if(0!==t.length){var n={name:e,handlers:t.map((e=>({handler:e,active:!0,removed:!1,priorityIndex:0,groupPriority:r,eventCallback:null,uninstallCallback:null})))};this._nameToGroup[e]=n;for(var a=function(e){var t=n.handlers[e];i._handlers.push(t),t.handler.onInstall({updateDependencies:()=>{i.updateDependencies()},emit:(e,r,n,a,o)=>{i._emitInputEvent(t.priorityIndex+1,e,r,n,o,a)},setPointerCapture:(e,r)=>{i._setPointerCapture(n,t,e,r)},setEventCallback:e=>{t.eventCallback=e},setUninstallCallback:e=>{t.uninstallCallback=e},refreshHasPendingInputs:()=>{i.notifyChange("hasPendingInputs")}})},o=n.handlers.length-1;o>=0;o--)a(o);this.updateDependencies()}else h.error("Can't register a group of zero handlers")}uninstallHandlers(e){var t=this._nameToGroup[e];t?(t.handlers.forEach((e=>{e.removed=!0,e.uninstallCallback()})),delete this._nameToGroup[e],this._currentPropagation?this._currentPropagation.needsHandlerGarbageCollect=!0:this._garbageCollectRemovedHandlers()):h.error("There is no InputHandler group registered under the name `"+e+"`")}hasHandlers(e){return void 0!==this._nameToGroup[e]}updateDependencies(){var e=new Set,t=new Set;this._handlersPriority=[];for(var r=this._handlers.length-1;r>=0;r--){var i=this._handlers[r];i.priorityIndex=r,this._handlersPriority.push(i)}this._handlersPriority=this._sortHandlersPriority(this._handlersPriority);for(var n=this._handlersPriority.length-1;n>=0;n--){var a=this._handlersPriority[n];a.priorityIndex=n;var o=a.handler.hasSideEffects;if(!o)for(var s of a.handler.outgoingEventTypes)if(e.has(s)){o=!0;break}if(o)for(var c of a.handler.incomingEventMatches)for(var u of(e.add(c.eventType),c.keyModifiers))Object(l.b)(u)||t.add(u);a.active=o}this._sourceEvents=e,this._keyModifiers=t,this._pointerCaptures.size>0&&this._sourceEvents.add("pointer-capture-lost"),this._keyModifiers.size>0&&(this._sourceEvents.add("key-down"),this._sourceEvents.add("key-up")),this.eventSource&&(this.eventSource.activeEvents=this._sourceEvents)}_setLatestPointerType(e){this._set("latestPointerType",e)}_onEventReceived(e,t){if("pointer-capture-lost"===e){var r=t;this._pointerCaptures.delete(r.native.pointerId)}this._updateKeyModifiers(e,t);var i=null!=this.test.timestamp?this.test.timestamp:t.native?t.native.timestamp:void 0,n=t.native?t.native.cancelable:void 0;this._emitInputEventFromSource(e,t,i,n)}_updateKeyModifiers(e,t){if(t){var r=!1,i=()=>{if(!r){var e=new Set;this._activeKeyModifiers.forEach((t=>{e.add(t)})),this._activeKeyModifiers=e,r=!0}},n=(e,t)=>{t&&!this._activeKeyModifiers.has(e)?(i(),this._activeKeyModifiers.add(e)):!t&&this._activeKeyModifiers.has(e)&&(i(),this._activeKeyModifiers.delete(e))};if("key-down"===e||"key-up"===e){var a=t.key;this._keyModifiers.has(a)&&n(a,"key-down"===e)}var o=t.native;n("Alt",!(!o||!o.altKey)),n("Ctrl",!(!o||!o.ctrlKey)),n("Shift",!(!o||!o.shiftKey)),n("Meta",!(!o||!o.metaKey)),n("Primary",this._activeKeyModifiers.has(this.primaryKey))}}_installRecognizers(){this._latestPointerTypeHandler=new d((e=>this._setLatestPointerType(e))),this.recognizers.length>0&&this.installHandlers("default",this.recognizers,b.INTERNAL),this.installHandlers("input-manager-logic",[this._latestPointerTypeHandler],b.INTERNAL)}_setPointerCapture(e,t,r,i){var n=e.name+"-"+t.priorityIndex,a=this._pointerCaptures.get(r.pointerId)||new Set;this._pointerCaptures.set(r.pointerId,a),i?(a.add(n),1===a.size&&this.eventSource&&this.eventSource.setPointerCapture(r,!0)):a.has(n)&&(a.delete(n),0===a.size&&(this._pointerCaptures.delete(r.pointerId),this.eventSource&&this.eventSource.setPointerCapture(r,!1)))}_garbageCollectRemovedHandlers(){this._handlers=this._handlers.filter((e=>!e.removed)),this.updateDependencies()}_emitInputEventFromSource(e,t,r,i){this._emitInputEvent(0,e,t,r,i)}_emitInputEvent(e,t,r,i,n,a){var o=void 0!==i?i:this._currentPropagation?this._currentPropagation.timestamp:performance.now(),s=void 0!==n&&n,c={event:new f(t,r,o,a||this._activeKeyModifiers,s),priorityIndex:e};this._currentPropagation?this._currentPropagation.events.push(c):this._doNewPropagation(c)}_doNewPropagation(e){this._currentPropagation={events:new c.a,currentHandler:null,needsHandlerGarbageCollect:!1,timestamp:e.event.timestamp},this._currentPropagation.events.push(e),this._continuePropagation()}_continuePropagation(){var e=this._currentPropagation;if(e){for(;this._currentPropagation.events.length>0;){var{event:t,priorityIndex:r}=this._currentPropagation.events.pop(),i=t.data&&t.data.eventId;if(null==i||!this._stoppedPropagationEventIds.has(i))for(e.currentHandler=this._handlersPriority[r];e.currentHandler;){if(e.currentHandler.removed)e.needsHandlerGarbageCollect=!0;else{if(e.currentHandler.active&&!t.shouldStopPropagation()&&e.currentHandler.eventCallback(t),t.shouldStopPropagation()){null!=i&&this._stoppedPropagationEventIds.add(i);break}if(t.shouldPausePropagation((()=>this._continuePropagation())))return void this._pausePropagation({event:t,priorityIndex:e.currentHandler.priorityIndex+1})}e.currentHandler=this._handlersPriority[e.currentHandler.priorityIndex+1]}}e.needsHandlerGarbageCollect&&this._garbageCollectRemovedHandlers(),this.hasPendingInputs||this._stoppedPropagationEventIds.clear(),this._currentPropagation=null}}_pausePropagation(e){var t=new c.a;for(t.push(e);this._currentPropagation.events.length;)t.push(this._currentPropagation.events.pop());this._currentPropagation.events=t,this._currentPropagation.currentHandler=null}_compareHandlerPriority(e,t){if(e.handler.hasSideEffects!==t.handler.hasSideEffects)return e.handler.hasSideEffects?1:-1;if(e.groupPriority!==t.groupPriority)return e.groupPriority>t.groupPriority?-1:1;for(var r of e.handler.incomingEventMatches){var i=function(e){if(r.eventType!==e.eventType)return"continue";var t=r.keyModifiers.filter((t=>-1!==e.keyModifiers.indexOf(t)));return t.length===r.keyModifiers.length!==(t.length===e.keyModifiers.length)?{v:r.keyModifiers.length>e.keyModifiers.length?-1:1}:void 0};for(var n of t.handler.incomingEventMatches){var a=i(n);if("continue"!==a&&"object"===typeof a)return a.v}}return e.priorityIndex>t.priorityIndex?-1:1}_sortHandlersPriority(e){var t=[];for(var r of e){for(var i=0;i<t.length&&this._compareHandlerPriority(r,t[i])>=0;)i++;t.splice(i,0,r)}return t}get debug(){var e=e=>{var t=this._setPointerCapture;this._setPointerCapture=()=>{},e(),this._setPointerCapture=t};return{injectEvent:(t,r)=>{e((()=>{this._onEventReceived(t,r)}))},disablePointerCapture:e}}};Object(i.a)([Object(a.b)({readOnly:!0})],p.prototype,"hasPendingInputs",null),Object(i.a)([Object(a.b)()],p.prototype,"eventSource",void 0),Object(i.a)([Object(a.b)()],p.prototype,"recognizers",void 0),Object(i.a)([Object(a.b)({readOnly:!0})],p.prototype,"latestPointerType",void 0),p=Object(i.a)([Object(o.a)("esri.views.input.InputManager")],p);class f{constructor(e,t,r,i,n){this.type=e,this.data=t,this.timestamp=r,this.modifiers=i,this.cancelable=n,this._propagationState=0,this._resumeCallback=null}stopPropagation(){this._propagationState|=1}shouldStopPropagation(){return 0!=(1&this._propagationState)}async(e){this._propagationState|=2;var t=(e,t)=>{this._propagationState&=-3;var r=this._resumeCallback;if(this._resumeCallback=null,r&&r(),t)throw e;return e};return("function"==typeof e?e():e).then((e=>t(e,!1)),(e=>t(e,!0)))}shouldPausePropagation(e){return!!(2&this._propagationState)&&(this._resumeCallback=e,!0)}preventDefault(){this.data.native.preventDefault()}}var b={DEFAULT:0,TOOL:-1,WIDGET:-2,INTERNAL:-3}},function(e,t,r){"use strict";r.d(t,"a",(function(){return s}));var i=r(81),n=r(118),a=r(155),o=i.a.getLogger("esri.layers.support.fieldProperties");function s(){return{fields:{type:[a.a],value:null},outFields:{type:[String],json:{read:!1},set:function(e){this._userOutFields=e,this.notifyChange("outFields")},get:function(){var e=this._userOutFields;if(!e||!e.length)return null;if(e.includes("*"))return["*"];if(!this.fields)return e;for(var t of e)Object(n.t)(this.fields,t)||o.error("field-attributes-layer:invalid-field","Invalid field ".concat(t," found in outFields"),{layer:this,outFields:e});return Object(n.k)(this.fields,e)}}}}},,,,function(e,t,r){"use strict";r.d(t,"a",(function(){return a}));var i=r(195),n=/\[([^\[\]]+)\]/gi;function a(e,t,r){return e?e.map((e=>{var a=new i.a;if(a.read(e,r),a.labelExpression){var o=t.fields||t.layerDefinition&&t.layerDefinition.fields||this.fields;a.labelExpression=a.labelExpression.replace(n,((e,t)=>"[".concat(function(e,t){if(!t)return e;for(var r=e.toLowerCase(),i=0;i<t.length;i++){var n=t[i].name;if(n.toLowerCase()===r)return n}return e}(t,o),"]")))}return a})):null}},function(e,t,r){"use strict";r.d(t,"a",(function(){return h})),r.d(t,"b",(function(){return p})),r.d(t,"c",(function(){return a})),r.d(t,"d",(function(){return c})),r.d(t,"e",(function(){return s})),r.d(t,"f",(function(){return d})),r.d(t,"g",(function(){return l}));var i=r(89),n=r(376);function a(e,t){return Object(i.j)(t)||!t.mode?e?"absolute-height":"on-the-ground":t.mode}function o(e,t){return a(!!Object(i.k)(e)&&e.hasZ,t)}function s(e){var t=u(e);return o(e.geometry,t)}function c(e){var t=u(e),r=o(e.geometry,t);return{mode:r,offset:Object(i.k)(t)&&"on-the-ground"!==r?Object(i.r)(t.offset,0)*Object(n.a)(Object(i.r)(t.unit,"meters")):0}}function l(e){if("on-the-ground"===s(e))return!1;var t=u(e),r=Object(i.k)(t)&&t.featureExpressionInfo?t.featureExpressionInfo.expression:null;return!(!r||"0"===r)}function u(e){return e.layer&&"elevationInfo"in e.layer?e.layer.elevationInfo:null}function d(e,t,r){if(!Object(i.j)(r)&&r.mode){var n=e.hasZ?e.z:0,a=Object(i.k)(r.offset)?r.offset:0;switch(r.mode){case"absolute-height":return n-a;case"on-the-ground":return 0;case"relative-to-ground":return n-(Object(i.r)(t.elevationProvider.getElevation(e.x,e.y,e.z,e.spatialReference,"ground"),0)+a);case"relative-to-scene":return n-(Object(i.r)(t.elevationProvider.getElevation(e.x,e.y,e.z,e.spatialReference,"scene"),0)+a)}}}function h(e,t,r,i=null){return f(e,t.x,t.y,t.hasZ?t.z:0,t.spatialReference,r,i)}function p(e,t,r,i,n=null){return f(e,t[0],t[1],t.length>2?t[2]:0,r,i,n)}function f(e,t,r,n,a,o,s=null){if(!Object(i.j)(o)){var c=Object(i.k)(s)?s.mode:"absolute-height";return"on-the-ground"===c?0:function(e,t,r,n,a,o,s,c){var l=Object(i.k)(s)&&Object(i.k)(s.offset)?s.offset:0;switch(c){case"absolute-height":return e-l;case"relative-to-ground":return e-(Object(i.r)(o.elevationProvider.getElevation(t,r,n,a,"ground"),0)+l);case"relative-to-scene":return e-(Object(i.r)(o.elevationProvider.getElevation(t,r,n,a,"scene"),0)+l)}}(function(e,t,r,n,a,o){var s=Object(i.k)(o.offset)?o.offset:0;switch(o.mode){case"absolute-height":return r+s;case"on-the-ground":return Object(i.r)(a.elevationProvider.getElevation(e,t,0,n,"ground"),0);case"relative-to-ground":return r+Object(i.r)(a.elevationProvider.getElevation(e,t,r,n,"ground"),0)+s;case"relative-to-scene":return r+Object(i.r)(a.elevationProvider.getElevation(e,t,r,n,"scene"),0)+s}}(t,r,n,a,e,o),t,r,n,a,e,s,c)}}},,function(e,t,r){"use strict";r.d(t,"a",(function(){return l})),r.d(t,"b",(function(){return c})),r.d(t,"c",(function(){return u}));var i=r(124),n=r(93),a=r(216),o=r(268),s=r(265),c={key:"type",base:a.a,typeMap:{selection:s.a}};function l(e,t){var r=(t=t.layerDefinition||t).featureReduction;if(r)switch(r.type){case"selection":return s.a.fromJSON(r);case"cluster":return o.a.fromJSON(r)}return null}function u(e,t,r,a){var o=function(e,t,r){return e?"selection"!==e.type?(r.messages&&r.messages.push(new n.a("featureReduction:unsupported","FeatureReduction of type '".concat(e.declaredClass,"' are not supported in scenes."),{featureReduction:e,context:r})),null):e.write(t,r):null}(e,{},a);o&&Object(i.c)(r,o,t)}},function(e,t,r){"use strict";t.a=class{constructor(e,t=29){this.name=e,this._counter=0,this._items=new Array(t)}record(e){this._items[++this._counter%this._items.length]=e}get median(){return this._items.slice().sort()[Math.floor(this._items.length/2)]}get average(){return this._items.reduce(((e,t)=>e+t),0)/this._items.length}get last(){return this._items[this._counter%this._items.length]}}},function(e,t,r){"use strict";r.d(t,"a",(function(){return o})),r.d(t,"b",(function(){return s}));var i=r(329),n=r(435),a={runImmediately:!1};function o(e,t,r=a){var o=new n.a((function(){if(!o||c)return;var r=s;o.clear(),c=!0,s=Object(i.b)(o,e),c=!1,t(s,r)})),s=null,c=!1;return c=!0,s=Object(i.b)(o,e),c=!1,r.runImmediately&&t(s,s),{remove:function(){o&&(o.destroy(),o=null,s=null)}}}function s(e,t){var r=new n.a((function(){t(a,o)})),a=null;function o(){return r?(r.clear(),a=Object(i.b)(r,e)):null}return o(),{remove:function(){r&&(r.destroy(),r=null),a=null}}}},,function(e,t,r){"use strict";var i=r(82),n=(r(80),r(81),r(88),r(85)),a=r(84),o=(r(83),r(86),r(87),r(90)),s=r(107),c=class extends o.a{constructor(e){super(e),this.floorField=null,this.viewAllMode=!1,this.viewAllLevelIds=new s.a}};Object(i.a)([Object(n.b)({type:String,json:{write:!0,origins:{"web-scene":{write:!1}}}})],c.prototype,"floorField",void 0),Object(i.a)([Object(n.b)({json:{read:!1,write:!1}})],c.prototype,"viewAllMode",void 0),Object(i.a)([Object(n.b)({json:{read:!1,write:!1}})],c.prototype,"viewAllLevelIds",void 0);var l=c=Object(i.a)([Object(a.a)("esri.layers.support.LayerFloorInfo")],c);t.a=l},function(e,t,r){"use strict";r.d(t,"a",(function(){return s})),r.d(t,"b",(function(){return c})),r.d(t,"c",(function(){return o})),r.d(t,"d",(function(){return d}));var i=r(110),n=r(104),a=r(111);function o(e,t){return Object(a.g)(e,t)/Object(a.o)(e)}function s(e,t){var r=Object(a.g)(e,t)/(Object(a.o)(e)*Object(a.o)(t));return-Object(i.b)(r)}function c(e,t,r){Object(a.q)(l,e),Object(a.q)(u,t);var n=Object(a.g)(l,u),o=Object(i.b)(n),s=Object(a.f)(l,l,u);return Object(a.g)(s,r)<0?2*Math.PI-o:o}var l=Object(n.e)(),u=Object(n.e)(),d=Object.freeze({__proto__:null,projectPoint:function(e,t,r){var i=Object(a.g)(e,t)/Object(a.g)(e,e);return Object(a.d)(r,e,i)},projectPointSignedLength:o,angle:s,angleAroundAxis:c})},function(e,t,r){"use strict";r.d(t,"a",(function(){return n}));var i=r(189);class n{constructor(){this.id=Object(i.a)()}unload(){}}},function(e,t,r){"use strict";r.d(t,"a",(function(){return s})),r.d(t,"b",(function(){return h})),r.d(t,"c",(function(){return c})),r.d(t,"d",(function(){return u})),r.d(t,"e",(function(){return l})),r.d(t,"f",(function(){return n})),r.d(t,"g",(function(){return d}));var i=r(267),n=Object(i.e)(770,1,771,771),a=Object(i.f)(1,1),o=Object(i.f)(0,771);function s(e){return 2===e?null:1===e?o:a}function c(e){return 2===e?i.c:null}var l=5e5,u={factor:-1,units:-2};function d(e){return e?u:null}function h(e){return 3===e||2===e?513:515}},,,,,function(e,t,r){"use strict";r.d(t,"a",(function(){return f})),r.d(t,"b",(function(){return y})),r.d(t,"c",(function(){return v})),r.d(t,"d",(function(){return g}));var i=r(309);function n(e,t){return Object(i.e)(e,t)}function a(e,t){var r,i,n,a=e.hasZ&&t.hasZ;if(e.xmin<=t.xmin){if(r=t.xmin,e.xmax<r)return!1}else if(r=e.xmin,t.xmax<r)return!1;if(e.ymin<=t.ymin){if(i=t.ymin,e.ymax<i)return!1}else if(i=e.ymin,t.ymax<i)return!1;if(a&&t.hasZ)if(e.zmin<=t.zmin){if(n=t.zmin,e.zmax<n)return!1}else if(n=e.zmin,t.zmax<n)return!1;return!0}function o(e,t){var{points:r,hasZ:n}=t,a=n?i.b:i.a;for(var o of r)if(a(e,o))return!0;return!1}var s=[0,0],c=[0,0],l=[0,0],u=[0,0],d=[s,c,l,u],h=[[l,s],[s,c],[c,u],[u,l]];function p(e,t){for(var r of(s[0]=e.xmin,s[1]=e.ymax,c[0]=e.xmax,c[1]=e.ymax,l[0]=e.xmin,l[1]=e.ymin,u[0]=e.xmax,u[1]=e.ymin,d))if(Object(i.f)(t,r))return!0;for(var n of t.rings)if(n.length){var a=n[0];if(Object(i.a)(e,a))return!0;for(var o=1;o<n.length;o++){var p=n[o];if(Object(i.a)(e,p)||m(a,p,h))return!0;a=p}}return!1}function f(e,t){s[0]=e.xmin,s[1]=e.ymax,c[0]=e.xmax,c[1]=e.ymax,l[0]=e.xmin,l[1]=e.ymin,u[0]=e.xmax,u[1]=e.ymin;var r=t.paths;for(var n of r)if(r.length){var a=n[0];if(Object(i.a)(e,a))return!0;for(var o=1;o<n.length;o++){var d=n[o];if(Object(i.a)(e,d)||m(a,d,h))return!0;a=d}}return!1}var b=[0,0];function v(e){for(var t=0;t<e.length;t++){for(var r=e[t],i=0;i<r.length-1;i++)for(var n=r[i],a=r[i+1],o=t+1;o<e.length;o++)for(var s=0;s<e[o].length-1;s++){var c=e[o][s],l=e[o][s+1];if(g(n,a,c,l,b)&&!(b[0]===n[0]&&b[1]===n[1]||b[0]===c[0]&&b[1]===c[1]||b[0]===a[0]&&b[1]===a[1]||b[0]===l[0]&&b[1]===l[1]))return!0}var u=r.length;if(!(u<=4))for(var d=0;d<u-3;d++){var h=u-1;0===d&&(h=u-2);for(var p=r[d],f=r[d+1],v=d+2;v<h;v++){var m=r[v],y=r[v+1];if(g(p,f,m,y,b)&&!(b[0]===p[0]&&b[1]===p[1]||b[0]===m[0]&&b[1]===m[1]||b[0]===f[0]&&b[1]===f[1]||b[0]===y[0]&&b[1]===y[1]))return!0}}}return!1}function m(e,t,r){for(var i=0;i<r.length;i++)if(g(e,t,r[i][0],r[i][1]))return!0;return!1}function g(e,t,r,i,n){var[a,o]=e,[s,c]=t,[l,u]=r,[d,h]=i,p=d-l,f=a-l,b=s-a,v=h-u,m=o-u,g=c-o,y=v*b-p*g;if(0===y)return!1;var O=(p*m-v*f)/y,j=(b*m-g*f)/y;return O>=0&&O<=1&&j>=0&&j<=1&&(n&&(n[0]=a+O*(s-a),n[1]=o+O*(c-o)),!0)}function y(e){switch(e){case"esriGeometryEnvelope":case"extent":return a;case"esriGeometryMultipoint":case"multipoint":return o;case"esriGeometryPoint":case"point":return n;case"esriGeometryPolygon":case"polygon":return p;case"esriGeometryPolyline":case"polyline":return f;case"mesh":return a}}},,,function(e,t,r){"use strict";r.d(t,"a",(function(){return u})),r.d(t,"b",(function(){return s})),r.d(t,"c",(function(){return h})),r.d(t,"d",(function(){return l})),r.d(t,"e",(function(){return d})),r.d(t,"f",(function(){return c}));var i=r(89),n=r(157),a=r(174),o=r(179);r(579);function s(e,t){return Object(i.j)(e)&&(e=[]),e.push(t),e}function c(e,t){if(Object(i.j)(e))return e;var r=e.filter((e=>e!==t));return 0===r.length?null:r}function l(e){return!!Object(i.k)(e)&&!e.visible}function u(e,t){var r=new Map;return r.set(0,t.acquire(e,0)),r.set(1,t.acquire(e,7)),r.set(4,t.acquire(e,3)),r.set(3,t.acquire(e,2)),r.set(2,t.acquire(e,1)),r.set(5,t.acquire(e,4)),r.set(7,t.acquire(e,3)),r.set(6,t.acquire(e,3)),r}function d(e,t){t.release(e,0),t.release(e,7),t.release(e,3),t.release(e,2),t.release(e,1),t.release(e,4)}function h(e,t,r){var a=e.origin.vec3;Object(o.j)(p,-a[0],-a[1],-a[2]),Object(i.k)(e.transformation)?Object(n.l)(t,p,e.transformation):Object(n.c)(t,p),r&&(Object(n.a)(r,t),Object(n.b)(r,r))}new Float64Array(3),new Float32Array(6);var p=Object(a.b)()},function(e,t,r){"use strict";r.d(t,"a",(function(){return o}));var i,n=r(120),a=r(119);function o(e){e.code.add(Object(a.a)(i||(i=Object(n.a)(["\n    vec4 premultiplyAlpha(vec4 v) {\n      return vec4(v.rgb * v.a, v.a);\n    }\n\n    // Note: the min in the last line has been added to fix an instability in chrome.\n    // See https://devtopia.esri.com/WebGIS/arcgis-js-api/issues/23911\n    // With proper floating point handling, the value could never be >1.\n    vec3 rgb2hsv(vec3 c) {\n      vec4 K = vec4(0.0, -1.0 / 3.0, 2.0 / 3.0, -1.0);\n      vec4 p = c.g < c.b ? vec4(c.bg, K.wz) : vec4(c.gb, K.xy);\n      vec4 q = c.r < p.x ? vec4(p.xyw, c.r) : vec4(c.r, p.yzx);\n\n      float d = q.x - min(q.w, q.y);\n      float e = 1.0e-10;\n      return vec3(abs(q.z + (q.w - q.y) / (6.0 * d + e)), min(d / (q.x + e), 1.0), q.x);\n    }\n\n    vec3 hsv2rgb(vec3 c) {\n      vec4 K = vec4(1.0, 2.0 / 3.0, 1.0 / 3.0, 3.0);\n      vec3 p = abs(fract(c.xxx + K.xyz) * 6.0 - K.www);\n      return c.z * mix(K.xxx, clamp(p - K.xxx, 0.0, 1.0), c.y);\n    }\n\n    float rgb2v(vec3 c) {\n      return max(c.x, max(c.y, c.z));\n    }\n  "]))))}},,,,function(e,t,r){"use strict";var i=r(80),n=r(221),a=4294967296,o=Object(i.a)("esri-text-decoder")?new TextDecoder("utf-8"):null,s=Object(i.a)("safari")||Object(i.a)("ios")?6:Object(i.a)("ff")?12:32;class c{constructor(e,t,r=0,i=(e?e.byteLength:0)){this._tag=0,this._dataType=99,this.init(e,t,r,i)}init(e,t,r,i){this._data=e,this._dataView=t,this._pos=r,this._end=i}clone(){return new c(this._data,this._dataView,this._pos,this._end)}pos(){return this._pos}move(e){this._pos=e}nextTag(e){for(;;){if(this._pos===this._end)return!1;var t=this._decodeVarint();if(this._tag=t>>3,this._dataType=7&t,!e||e===this._tag)break;this.skip()}return!0}next(){if(this._pos===this._end)return!1;var e=this._decodeVarint();return this._tag=e>>3,this._dataType=7&e,!0}empty(){return this._pos>=this._end}tag(){return this._tag}getInt32(){return this._decodeVarint()}getInt64(){return this._decodeVarint()}getUInt32(){var e=4294967295;return e=(127&this._data[this._pos])>>>0,this._data[this._pos++]<128?e:(e=(e|(127&this._data[this._pos])<<7)>>>0,this._data[this._pos++]<128?e:(e=(e|(127&this._data[this._pos])<<14)>>>0,this._data[this._pos++]<128?e:(e=(e|(127&this._data[this._pos])<<21)>>>0,this._data[this._pos++]<128?e:(e=(e|(15&this._data[this._pos])<<28)>>>0,this._data[this._pos++]<128?e:void 0))))}getUInt64(){return this._decodeVarint()}getSInt32(){var e=this.getUInt32();return e>>>1^-(1&e)|0}getSInt64(){return this._decodeSVarint()}getBool(){var e=0!==this._data[this._pos];return this._skip(1),e}getEnum(){return this._decodeVarint()}getFixed64(){var e=this._dataView,t=this._pos,r=e.getUint32(t,!0)+e.getUint32(t+4,!0)*a;return this._skip(8),r}getSFixed64(){var e=this._dataView,t=this._pos,r=e.getUint32(t,!0)+e.getInt32(t+4,!0)*a;return this._skip(8),r}getDouble(){var e=this._dataView.getFloat64(this._pos,!0);return this._skip(8),e}getFixed32(){var e=this._dataView.getUint32(this._pos,!0);return this._skip(4),e}getSFixed32(){var e=this._dataView.getInt32(this._pos,!0);return this._skip(4),e}getFloat(){var e=this._dataView.getFloat32(this._pos,!0);return this._skip(4),e}getString(){var e=this._getLength(),t=this._pos,r=this._toString(this._data,t,t+e);return this._skip(e),r}getBytes(){var e=this._getLength(),t=this._pos,r=this._toBytes(this._data,t,t+e);return this._skip(e),r}getLength(){return this._getLengthUnsafe()}processMessageWithArgs(e,t,r,i){var n=this.getMessage(),a=e(n,t,r,i);return n.release(),a}processMessage(e){var t=this.getMessage(),r=e(t);return t.release(),r}getMessage(){var e=this._getLength(),t=c.pool.acquire();return t.init(this._data,this._dataView,this._pos,this._pos+e),this._skip(e),t}release(){c.pool.release(this)}dataType(){return this._dataType}skip(){switch(this._dataType){case 0:this._decodeVarint();break;case 1:this._skip(8);break;case 2:this._skip(this._getLength());break;case 5:this._skip(4);break;default:throw new Error("Invalid data type!")}}skipLen(e){this._skip(e)}_skip(e){if(this._pos+e>this._end)throw new Error("Attempt to skip past the end of buffer!");this._pos+=e}_decodeVarint(){var e,t=this._data,r=this._pos,i=0;if(this._end-r>=10)do{if(i|=127&(e=t[r++]),0==(128&e))break;if(i|=(127&(e=t[r++]))<<7,0==(128&e))break;if(i|=(127&(e=t[r++]))<<14,0==(128&e))break;if(i|=(127&(e=t[r++]))<<21,0==(128&e))break;if(i+=268435456*(127&(e=t[r++])),0==(128&e))break;if(i+=34359738368*(127&(e=t[r++])),0==(128&e))break;if(i+=4398046511104*(127&(e=t[r++])),0==(128&e))break;if(i+=562949953421312*(127&(e=t[r++])),0==(128&e))break;if(i+=72057594037927940*(127&(e=t[r++])),0==(128&e))break;if(i+=0x8000000000000000*(127&(e=t[r++])),0==(128&e))break;throw new Error("Varint too long!")}while(0);else{for(var n=1;r!==this._end&&0!=(128&(e=t[r]));)++r,i+=(127&e)*n,n*=128;if(r===this._end)throw new Error("Varint overrun!");++r,i+=e*n}return this._pos=r,i}_decodeSVarint(){var e=this._decodeVarint();return e%2?-(e+1)/2:e/2}_getLength(){if(2!==this._dataType)throw new Error("Not a delimited data type!");return this._decodeVarint()}_getLengthUnsafe(){return this.getUInt32()}_toString(e,t,r){if((r=Math.min(this._end,r))-t>s&&o){var i=e.subarray(t,r);return o.decode(i)}for(var n="",a="",c=t;c<r;++c){var l=e[c];128&l?a+="%"+l.toString(16):(n+=decodeURIComponent(a)+String.fromCharCode(l),a="")}return a.length&&(n+=decodeURIComponent(a)),n}_toBytes(e,t,r){return r=Math.min(this._end,r),new Uint8Array(e.buffer,t,r-t)}}c.pool=new n.a(c,null,(e=>{e._data=null,e._dataView=null})),t.a=c},function(e,t,r){"use strict";r.d(t,"a",(function(){return n})),r.d(t,"b",(function(){return a})),r.d(t,"c",(function(){return o})),r.d(t,"d",(function(){return s}));r(80);var i=r(105);function n(e){return Object(i.f)(e.x,e.y)}function a(e,t){var r=(e instanceof HTMLElement?e:e.surface).getBoundingClientRect();return Object(i.f)(t.clientX-r.left,t.clientY-r.top)}function o(e,t){return t instanceof Event?a(e,t):n(t)}function s(e){if(e instanceof Event)return!0;if("object"==typeof e&&"type"in e)switch(e.type){case"click":case"double-click":case"pointer-down":case"pointer-drag":case"pointer-enter":case"pointer-leave":case"pointer-up":case"pointer-move":case"immediate-click":case"immediate-double-click":case"hold":case"drag":case"mouse-wheel":return!0;case"key-down":case"key-up":case"gamepad":case"focus":case"blur":default:return!1}return!1}},function(e,t,r){"use strict";t.a=function(e){return window.WebGL2RenderingContext&&e instanceof window.WebGL2RenderingContext}},,,function(e,t,r){"use strict";r.d(t,"a",(function(){return f}));var i,n=r(302),a={namespace:void 0,performanceLogger:()=>{},eventHandlerInterceptor:void 0,styleApplyer:(e,t,r)=>{"-"===t.charAt(0)?e.style.setProperty(t,r):e.style[t]=r}},o=e=>Object(n.c)(a,e),s=(e,t,r)=>(r=o(r),Object(n.a)(t,e,void 0,r),Object(n.b)(t,r)),c=(e,t,r)=>(r=o(r),Object(n.a)(t,e.parentNode,e,r),Object(n.b)(t,r)),l=(e,t,r)=>(r=o(r),t.domNode=e,Object(n.d)(e,t,r),Object(n.b)(t,r)),u=(e,t,r)=>(r=o(r),Object(n.a)(t,e.parentNode,e,r),e.parentNode.removeChild(e),Object(n.b)(t,r)),d=(e,t)=>{for(var r=[];e&&e!==t;)r.push(e),e=e.parentNode;return r};i=Array.prototype.find?(e,t)=>e.find(t):(e,t)=>e.filter(t)[0];var h=(e,t)=>{var r=e;return t.forEach((e=>{r=r&&r.children?i(r.children,(t=>t.domNode===e)):void 0})),r},p=(e,t,r)=>{var i=function(i){r("domEvent",i);var n=t(),a=d(i.currentTarget,n.domNode);a.reverse();var o,s=h(n.getLastRender(),a);return e.scheduleRender(),s&&(o=s.properties["on".concat(i.type)].apply(s.properties.bind||this,arguments)),r("domEventProcessed",i),o};return(e,t,r,n)=>i},f=e=>{var t,r,i=o(e),n=i.performanceLogger,a=!0,d=!1,h=[],f=[],b=(e,r,a)=>{var o;i.eventHandlerInterceptor=p(t,(()=>o),n),o=e(r,a(),i),h.push(o),f.push(a)},v=()=>{if(r=void 0,a){a=!1,n("renderStart",void 0);for(var e=0;e<h.length;e++){var t=f[e]();n("rendered",void 0),h[e].update(t),n("patched",void 0)}n("renderDone",void 0),a=!0}};return t={renderNow:v,scheduleRender:()=>{r||d||(r=requestAnimationFrame(v))},stop:()=>{r&&(cancelAnimationFrame(r),r=void 0),d=!0},resume:()=>{d=!1,a=!0,t.scheduleRender()},append:(e,t)=>{b(s,e,t)},insertBefore:(e,t)=>{b(c,e,t)},merge:(e,t)=>{b(l,e,t)},replace:(e,t)=>{b(u,e,t)},detach:e=>{for(var t=0;t<f.length;t++)if(f[t]===e)return f.splice(t,1),h.splice(t,1)[0];throw new Error("renderFunction was not found")}}}},function(e,t,r){"use strict";r.d(t,"a",(function(){return s}));var i=r(434),n=r(578);class a{constructor(e,t){for(var r of(this.layout=e,this.buffer="number"==typeof t?new ArrayBuffer(t*e.stride):t,e.fieldNames)){var i=e.fields.get(r);this[r]=new i.constructor(this.buffer,i.offset,this.stride)}}get stride(){return this.layout.stride}get count(){return this.buffer.byteLength/this.stride}get byteLength(){return this.buffer.byteLength}getField(e,t){var r=this[e];return r&&r.elementCount===t.ElementCount&&r.elementType===t.ElementType?r:null}slice(e,t){return new a(this.layout,this.buffer.slice(e*this.stride,t*this.stride))}copyFrom(e,t,r,i){var n=this.stride;if(n%4==0){var a=new Uint32Array(e.buffer,t*n,i*n/4);new Uint32Array(this.buffer,r*n,i*n/4).set(a)}else{var o=new Uint8Array(e.buffer,t*n,i*n);new Uint8Array(this.buffer,r*n,i*n).set(o)}}}class o{constructor(){this.stride=0,this.fields=new Map,this.fieldNames=[]}vec2f(e,t){return this.appendField(e,i.m,t),this}vec2f64(e,t){return this.appendField(e,i.n,t),this}vec3f(e,t){return this.appendField(e,i.u,t),this}vec3f64(e,t){return this.appendField(e,i.v,t),this}vec4f(e,t){return this.appendField(e,i.C,t),this}vec4f64(e,t){return this.appendField(e,i.D,t),this}mat3f(e,t){return this.appendField(e,i.f,t),this}mat3f64(e,t){return this.appendField(e,i.g,t),this}mat4f(e,t){return this.appendField(e,i.h,t),this}mat4f64(e,t){return this.appendField(e,i.i,t),this}vec4u8(e,t){return this.appendField(e,i.J,t),this}f32(e,t){return this.appendField(e,i.a,t),this}f64(e,t){return this.appendField(e,i.b,t),this}u8(e,t){return this.appendField(e,i.l,t),this}u16(e,t){return this.appendField(e,i.j,t),this}i8(e,t){return this.appendField(e,i.e,t),this}vec2i8(e,t){return this.appendField(e,i.q,t),this}vec2i16(e,t){return this.appendField(e,i.o,t),this}vec2u8(e,t){return this.appendField(e,i.t,t),this}vec4u16(e,t){return this.appendField(e,i.H,t),this}u32(e,t){return this.appendField(e,i.k,t),this}appendField(e,t,r){var i=t.ElementCount*Object(n.a)(t.ElementType),a=this.stride;this.fields.set(e,{size:i,constructor:t,offset:a,optional:r}),this.stride+=i,this.fieldNames.push(e)}alignTo(e){return this.stride=Math.floor((this.stride+e-1)/e)*e,this}hasField(e){return this.fieldNames.indexOf(e)>=0}createBuffer(e){return new a(this,e)}createView(e){return new a(this,e)}clone(){var e=new o;return e.stride=this.stride,e.fields=new Map,this.fields.forEach(((t,r)=>e.fields.set(r,t))),e.fieldNames=this.fieldNames.slice(),e.BufferType=this.BufferType,e}}function s(){return new o}},,function(e,t,r){"use strict";var i,n,a=r(104),o=r(111),s=r(461),c=r(255);(n=i||(i={})).length=function(e,t){var r=e[t],i=e[t+1],n=e[t+2];return Math.sqrt(r*r+i*i+n*n)},n.normalize=function(e,t){var r=e[t],i=e[t+1],n=e[t+2],a=1/Math.sqrt(r*r+i*i+n*n);e[t]*=a,e[t+1]*=a,e[t+2]*=a},n.scale=function(e,t,r){e[t]*=r,e[t+1]*=r,e[t+2]*=r},n.add=function(e,t,r,i,n,a=t){(n=n||e)[a]=e[t]+r[i],n[a+1]=e[t+1]+r[i+1],n[a+2]=e[t+2]+r[i+2]},n.subtract=function(e,t,r,i,n,a=t){(n=n||e)[a]=e[t]-r[i],n[a+1]=e[t+1]-r[i+1],n[a+2]=e[t+2]-r[i+2]};var l,u,d,h,p=r(179),f=r(378),b=r(463),v=i;!function(e){for(var t=.5,r=[[-t,-t,t],[t,-t,t],[t,t,t],[-t,t,t],[-t,-t,-t],[t,-t,-t],[t,t,-t],[-t,t,-t]],i=[0,0,1,-1,0,0,1,0,0,0,-1,0,0,1,0,0,0,-1],n=[0,0,1,0,1,1,0,1],a=new Uint16Array([0,1,2,2,3,0,4,0,3,3,7,4,1,5,6,6,2,1,1,0,4,4,5,1,3,2,6,6,7,3,5,4,7,7,6,5]),o=new Uint16Array(36),s=0;s<6;s++)for(var c=0;c<6;c++)o[6*s+c]=s;for(var l=new Uint16Array(36),u=0;u<6;u++)l[6*u+0]=0,l[6*u+1]=1,l[6*u+2]=2,l[6*u+3]=2,l[6*u+4]=3,l[6*u+5]=0;e.createGeometry=function(e){Array.isArray(e)||(e=[e,e,e]);for(var t=new Array(24),s=0;s<8;s++)t[3*s]=r[s][0]*e[0],t[3*s+1]=r[s][1]*e[1],t[3*s+2]=r[s][2]*e[2];return new b.a([["position",{size:3,data:t,exclusive:!0}],["normal",{size:3,data:i}],["uv0",{size:2,data:n}]],[["position",a],["normal",o],["uv0",l]])}}(l||(l={})),function(e){var t=.5,r=[[-t,0,-t],[t,0,-t],[t,0,t],[-t,0,t],[0,-t,0],[0,t,0]],i=[0,1,-1,1,1,0,0,1,1,-1,1,0,0,-1,-1,1,-1,0,0,-1,1,-1,-1,0],n=new Uint16Array([5,1,0,5,2,1,5,3,2,5,0,3,4,0,1,4,1,2,4,2,3,4,3,0]),a=new Uint16Array([0,0,0,1,1,1,2,2,2,3,3,3,4,4,4,5,5,5,6,6,6,7,7,7]);e.createGeometry=function(e){Array.isArray(e)||(e=[e,e,e]);for(var t=new Array(18),o=0;o<6;o++)t[3*o]=r[o][0]*e[0],t[3*o+1]=r[o][1]*e[1],t[3*o+2]=r[o][2]*e[2];return new b.a([["position",{size:3,data:t,exclusive:!0}],["normal",{size:3,data:i}]],[["position",n],["normal",a]])}}(u||(u={})),function(e){var t=.5,r=Object(s.c)(-t,0,-t),i=Object(s.c)(t,0,-t),n=Object(s.c)(0,0,t),a=Object(s.c)(0,.5,0),c=Object(s.b)(),l=Object(s.b)(),u=Object(s.b)(),d=Object(s.b)(),h=Object(s.b)();Object(o.i)(c,r,a),Object(o.i)(l,r,i),Object(o.f)(u,c,l),Object(o.q)(u,u),Object(o.i)(c,i,a),Object(o.i)(l,i,n),Object(o.f)(d,c,l),Object(o.q)(d,d),Object(o.i)(c,n,a),Object(o.i)(l,n,r),Object(o.f)(h,c,l),Object(o.q)(h,h);var p=[r,i,n,a],f=[0,-1,0,u[0],u[1],u[2],d[0],d[1],d[2],h[0],h[1],h[2]],v=[0,1,2,3,1,0,3,2,1,3,0,2],m=[0,0,0,1,1,1,2,2,2,3,3,3];e.createGeometry=function(e){Array.isArray(e)||(e=[e,e,e]);for(var t=new Array(12),r=0;r<4;r++)t[3*r]=p[r][0]*e[0],t[3*r+1]=p[r][1]*e[1],t[3*r+2]=p[r][2]*e[2];return new b.a([["position",{size:3,data:t,exclusive:!0}],["normal",{size:3,data:f}]],[["position",new Uint16Array(v)],["normal",new Uint16Array(m)]])}}(d||(d={})),function(e){e.createBoxGeometry=l.createGeometry,e.createDiamondGeometry=u.createGeometry,e.createTetrahedronGeometry=d.createGeometry,e.createSphereGeometry=function(e,t,r,i={uv:!0}){for(var n=-Math.PI,a=2*Math.PI,o=-Math.PI/2,s=Math.PI,c=Math.max(3,Math.floor(t)),l=Math.max(2,Math.floor(r)),u=(c+1)*(l+1),d=new Float32Array(3*u),h=new Float32Array(3*u),p=new Float32Array(2*u),f=[],v=0,m=0;m<=l;m++){for(var g=[],y=m/l,O=o+y*s,j=Math.cos(O),_=0;_<=c;_++){var w=_/c,x=n+w*a,S=Math.cos(x)*j,M=Math.sin(O),T=-Math.sin(x)*j;d[3*v]=S*e,d[3*v+1]=M*e,d[3*v+2]=T*e,h[3*v]=S,h[3*v+1]=M,h[3*v+2]=T,p[2*v]=w,p[2*v+1]=y,g.push(v),++v}f.push(g)}var P=new Uint32Array(2*c*(l-1)*3);v=0;for(var E=0;E<l;E++)for(var C=0;C<c;C++){var A=f[E][C],I=f[E][C+1],k=f[E+1][C+1],F=f[E+1][C];0===E?(P[v++]=A,P[v++]=k,P[v++]=F):E===l-1?(P[v++]=A,P[v++]=I,P[v++]=k):(P[v++]=A,P[v++]=I,P[v++]=k,P[v++]=k,P[v++]=F,P[v++]=A)}var R=[["position",P],["normal",P]],D=[["position",{size:3,data:d,exclusive:!0}],["normal",{size:3,data:h,exclusive:!0}]];return i.uv&&(D.push(["uv0",{size:2,data:p,exclusive:!0}]),R.push(["uv0",P])),i.offset&&(R[0][0]="offset",D[0][0]="offset",R.push(["position",new Uint32Array(P.length)]),D.push(["position",{size:3,data:Float64Array.from(i.offset),exclusive:!0}])),new b.a(D,R)},e.createPolySphereGeometry=function(e,t,r){var i,n,a=e;if(r)i=[0,-1,0,1,0,0,0,0,1,-1,0,0,0,0,-1,0,1,0],n=new Uint32Array([0,1,2,0,2,3,0,3,4,0,4,1,1,5,2,2,5,3,3,5,4,4,5,1]);else{var o=a*(1+Math.sqrt(5))/2;i=[-a,o,0,a,o,0,-a,-o,0,a,-o,0,0,-a,o,0,a,o,0,-a,-o,0,a,-o,o,0,-a,o,0,a,-o,0,-a,-o,0,a],n=new Uint32Array([0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1])}for(var s=0;s<i.length;s+=3)v.scale(i,s,e/v.length(i,s));var c={};function l(t,r){t>r&&([t,r]=[r,t]);var n=t.toString()+"."+r.toString();if(c[n])return c[n];var a=i.length;return i.length+=3,v.add(i,3*t,i,3*r,i,a),v.scale(i,a,e/v.length(i,a)),a/=3,c[n]=a,a}for(var u=0;u<t;u++){for(var d=n.length,h=new Uint32Array(4*d),p=0;p<d;p+=3){var f=n[p],m=n[p+1],g=n[p+2],y=l(f,m),O=l(m,g),j=l(g,f),_=4*p;h[_]=f,h[_+1]=y,h[_+2]=j,h[_+3]=m,h[_+4]=O,h[_+5]=y,h[_+6]=g,h[_+7]=j,h[_+8]=O,h[_+9]=y,h[_+10]=O,h[_+11]=j}n=h,c={}}for(var w=new Float32Array(i),x=0;x<w.length;x+=3)v.normalize(w,x);var S=[["position",n],["normal",n]],M=[["position",{size:3,data:new Float32Array(i),exclusive:!0}],["normal",{size:3,data:w,exclusive:!0}]];return new b.a(M,S)},e.createPointGeometry=function(e,t,r,i,n,a,o){var s=t?[t[0],t[1],t[2]]:[0,0,0],c=e?[e[0],e[1],e[2]]:[0,0,1];a=a||[0,0];var l=r?[255*r[0],255*r[1],255*r[2],r.length>3?255*r[3]:255]:[255,255,255,255],u=null!=i&&2===i.length?i:[1,1],d=[["position",{size:3,data:s,exclusive:!0}],["normal",{size:3,data:c,exclusive:!0}],["uv0",{size:a.length,data:a}],["color",{size:4,data:l,exclusive:!0}],["size",{size:2,data:u}]];if(null!=n){var h=new Float32Array([n[0],n[1],n[2],n[3]]);d.push(["auxpos1",{size:4,data:h}])}if(null!=o){var p=new Float32Array([o[0],o[1],o[2],o[3]]);d.push(["auxpos2",{size:4,data:p}])}return new b.a(d,null,1)},e.updatePointGeometry=function(e,t,r,i,n,a,o,s){if(null!=e){var{data:c}=s.getMutableAttribute("normal");c[0]=e[0],c[1]=e[1],c[2]=e[2]}if(null!=t){var{data:l}=s.getMutableAttribute("position");l[0]=t[0],l[1]=t[1],l[2]=t[2]}if(null!=r){var{data:u}=s.getMutableAttribute("color");u[0]=r[0],u[1]=r[1],u[2]=r[2],u[3]=r[3]}if(null!=i){var{data:d}=s.getMutableAttribute("size");d[0]=i[0],d[1]=i[1]}if(null!=n){var{data:h}=s.getMutableAttribute("auxpos1");h[0]=n[0],h[1]=n[1],h[2]=n[2],h[3]=n[3]}if(null!=a){var{data:p}=s.getMutableAttribute("uv0");p[0]=a[0],p[1]=a[1]}if(null!=o){var{data:f}=s.getMutableAttribute("auxpos2");f[0]=o[0],f[1]=o[1],f[2]=o[2],f[3]=o[3]}},e.createPointArrayGeometry=function(e,t){for(var r=new Float32Array(3*e.length),i=new Float32Array(t?3*e.length:3),n=new Uint32Array(e.length),a=new Uint32Array(e.length),o=0;o<e.length;o++)r[3*o]=e[o][0],r[3*o+1]=e[o][1],r[3*o+2]=e[o][2],t&&(i[3*o]=t[o][0],i[3*o+1]=t[o][1],i[3*o+2]=t[o][2]),n[o]=o,a[o]=0;return t||(i[0]=0,i[1]=1,i[2]=0),new b.a([["position",{size:3,data:r,exclusive:!0}],["normal",{size:3,data:i,exclusive:!0}],["uv0",{size:2,data:[0,0],exclusive:!0}]],[["position",n],["normal",t?n:a],["uv0",a]],1)},e.createTriangleGeometry=function(){var e=new Uint16Array([0,1,2]),t=new Uint16Array([0,0,0]),r=new Uint16Array([0,0,0]);return new b.a([["position",{size:3,data:[0,0,0,0,0,100,100,0,0],exclusive:!0}],["normal",{size:3,data:[0,1,0],exclusive:!0}],["uv0",{size:2,data:[0,0],exclusive:!0}]],[["position",e],["normal",t],["uv0",r]])};var t=[[-1,-1,0],[1,-1,0],[1,1,0],[-1,1,0]];function r(e,t,r,i,n){return!(Math.abs(Object(o.g)(t,e))>n)&&(Object(o.f)(r,e,t),Object(o.q)(r,r),Object(o.f)(i,r,e),Object(o.q)(i,i),!0)}function i(e,t,i,n,a,o,s){return r(e,t,a,o,s)||r(e,i,a,o,s)||r(e,n,a,o,s)}e.createSquareGeometry=function(e=t){for(var r=new Array(12),i=0;i<4;i++)for(var n=0;n<3;n++)r[3*i+n]=e[i][n];var a=new Uint32Array([0,1,2,2,3,0]),o=new Uint32Array([0,0,0,0,0,0]);return new b.a([["position",{size:3,data:r,exclusive:!0}],["normal",{size:3,data:[0,0,1],exclusive:!0}],["uv0",{size:2,data:[0,0,1,0,1,1,0,1],exclusive:!0}],["color",{size:4,data:[255,255,255,255],exclusive:!0}]],[["position",a],["normal",o],["uv0",a],["color",o]])},e.createConeGeometry=function(e,t,r,i,n=!0,a=!0){var o=0,c=t,l=e,u=Object(s.c)(0,o,0),d=Object(s.c)(0,o+l,0),h=Object(s.c)(0,-1,0),p=Object(s.c)(0,1,0);i&&(o=l,d=Object(s.c)(0,0,0),u=Object(s.c)(0,o,0),h=Object(s.c)(0,1,0),p=Object(s.c)(0,-1,0));var f=[d,u],v=[h,p],m=r+2,g=Math.sqrt(l*l+c*c);if(i)for(var y=r-1;y>=0;y--){var O=y*(2*Math.PI/r),j=Object(s.c)(Math.cos(O)*c,o,Math.sin(O)*c);f.push(j);var _=Object(s.c)(l*Math.cos(O)/g,-c/g,l*Math.sin(O)/g);v.push(_)}else for(var w=0;w<r;w++){var x=w*(2*Math.PI/r),S=Object(s.c)(Math.cos(x)*c,o,Math.sin(x)*c);f.push(S);var M=Object(s.c)(l*Math.cos(x)/g,c/g,l*Math.sin(x)/g);v.push(M)}var T=new Uint32Array(2*(r+2)*3),P=new Uint32Array(2*(r+2)*3),E=0,C=0;if(n){for(var A=3;A<f.length;A++)T[E++]=1,T[E++]=A-1,T[E++]=A,P[C++]=0,P[C++]=0,P[C++]=0;T[E++]=f.length-1,T[E++]=2,T[E++]=1,P[C++]=0,P[C++]=0,P[C++]=0}if(a){for(var I=3;I<f.length;I++)T[E++]=I,T[E++]=I-1,T[E++]=0,P[C++]=I,P[C++]=I-1,P[C++]=1;T[E++]=0,T[E++]=2,T[E++]=f.length-1,P[C++]=1,P[C++]=2,P[C++]=v.length-1}for(var k=new Float32Array(3*m),F=0;F<m;F++)k[3*F]=f[F][0],k[3*F+1]=f[F][1],k[3*F+2]=f[F][2];for(var R=new Float32Array(3*m),D=0;D<m;D++)R[3*D]=v[D][0],R[3*D+1]=v[D][1],R[3*D+2]=v[D][2];return new b.a([["position",{size:3,data:k,exclusive:!0}],["normal",{size:3,data:R,exclusive:!0}]],[["position",T],["normal",P]])},e.createCylinderGeometry=function(e,t,r,i,n,a){var c=i?Object(s.a)(i):Object(s.c)(1,0,0),l=n?Object(s.a)(n):Object(s.c)(0,0,0);a=null==a||a;var u=Object(s.b)();Object(o.q)(u,c);var d=Object(s.b)();Object(o.d)(d,u,Math.abs(e));var h=Object(s.b)();Object(o.d)(h,d,-.5),Object(o.e)(h,h,l);var p=Object(s.c)(0,1,0);Math.abs(1-Object(o.g)(u,p))<.2&&Object(o.v)(p,0,0,1);var f=Object(s.b)();Object(o.f)(f,u,p),Object(o.q)(f,f),Object(o.f)(p,f,u);var v=2*r+(a?2:0),m=r+(a?2:0),g=new Float32Array(3*v),y=new Float32Array(3*m),O=new Float32Array(2*v),j=new Uint32Array(3*r*(a?4:2)),_=new Uint32Array(3*r*(a?4:2));a&&(g[3*(v-2)+0]=h[0],g[3*(v-2)+1]=h[1],g[3*(v-2)+2]=h[2],O[2*(v-2)]=0,O[2*(v-2)+1]=0,g[3*(v-1)+0]=g[3*(v-2)+0]+d[0],g[3*(v-1)+1]=g[3*(v-2)+1]+d[1],g[3*(v-1)+2]=g[3*(v-2)+2]+d[2],O[2*(v-1)]=1,O[2*(v-1)+1]=1,y[3*(m-2)+0]=-u[0],y[3*(m-2)+1]=-u[1],y[3*(m-2)+2]=-u[2],y[3*(m-1)+0]=u[0],y[3*(m-1)+1]=u[1],y[3*(m-1)+2]=u[2]);for(var w=function(e,t,r){j[e]=t,_[e]=r},x=0,S=Object(s.b)(),M=Object(s.b)(),T=0;T<r;T++){var P=T*(2*Math.PI/r);Object(o.d)(S,p,Math.sin(P)),Object(o.d)(M,f,Math.cos(P)),Object(o.e)(S,S,M),y[3*T+0]=S[0],y[3*T+1]=S[1],y[3*T+2]=S[2],Object(o.d)(S,S,t),Object(o.e)(S,S,h),g[3*T+0]=S[0],g[3*T+1]=S[1],g[3*T+2]=S[2],O[2*T+0]=T/r,O[2*T+1]=0,g[3*(T+r)+0]=g[3*T+0]+d[0],g[3*(T+r)+1]=g[3*T+1]+d[1],g[3*(T+r)+2]=g[3*T+2]+d[2],O[2*(T+r)+0]=T/r,O[2*T+1]=1;var E=(T+1)%r;w(x++,T,T),w(x++,T+r,T),w(x++,E,E),w(x++,E,E),w(x++,T+r,T),w(x++,E+r,E)}if(a){for(var C=0;C<r;C++){var A=(C+1)%r;w(x++,v-2,m-2),w(x++,C,m-2),w(x++,A,m-2)}for(var I=0;I<r;I++){var k=(I+1)%r;w(x++,I+r,m-1),w(x++,v-1,m-1),w(x++,k+r,m-1)}}return new b.a([["position",{size:3,data:g,exclusive:!0}],["normal",{size:3,data:y,exclusive:!0}],["uv0",{size:2,data:O,exclusive:!0}]],[["position",j],["normal",_],["uv0",j]])},e.createTubeGeometry=function(t,r,i,n,a){i=i||10,n=null==n||n,Object(p.a)(t.length>1);for(var o=[],s=[],c=0;c<i;c++){o.push([0,-c-1,-(c+1)%i-1]);var l=c/i*2*Math.PI;s.push([Math.cos(l)*r,Math.sin(l)*r])}return e.createPathExtrusionGeometry(s,t,[[0,0,0]],o,n,a)},e.createPathExtrusionGeometry=function(e,t,r,n,l,u=Object(s.c)(0,0,0)){var d=e.length,h=new Float32Array(t.length*d*3+(6*r.length||0)),p=new Float32Array(t.length*d*3+(r?6:0)),f=(t.length-1)*d*6+3*n.length*2,v=new Uint32Array(f),g=new Uint32Array(f),y=0,O=0,j=0,_=0,w=Object(s.b)(),x=Object(s.b)(),S=Object(s.b)(),M=Object(s.b)(),T=Object(s.b)(),P=Object(s.b)(),E=Object(s.b)(),C=Object(a.e)(),A=Object(s.b)(),I=Object(s.b)(),k=Object(s.b)(),F=Object(s.b)(),R=Object(s.b)(),D=c.e.create();Object(o.v)(A,0,1,0),Object(o.i)(x,t[1],t[0]),Object(o.q)(x,x),l?(Object(o.e)(C,t[0],u),Object(o.q)(S,C)):Object(o.v)(S,0,0,1),i(x,S,A,A,T,S,m),Object(o.j)(M,S),Object(o.j)(F,T);for(var L=0;L<r.length;L++)Object(o.d)(P,T,r[L][0]),Object(o.d)(C,S,r[L][2]),Object(o.e)(P,P,C),Object(o.e)(P,P,t[0]),h[y++]=P[0],h[y++]=P[1],h[y++]=P[2];p[O++]=-x[0],p[O++]=-x[1],p[O++]=-x[2];for(var N=0;N<n.length;N++)v[j++]=n[N][0]>0?n[N][0]:-n[N][0]-1+r.length,v[j++]=n[N][1]>0?n[N][1]:-n[N][1]-1+r.length,v[j++]=n[N][2]>0?n[N][2]:-n[N][2]-1+r.length,g[_++]=0,g[_++]=0,g[_++]=0;for(var V=r.length,z=r.length-1,G=0;G<t.length;G++){var U=!1;G>0&&(Object(o.j)(w,x),G<t.length-1?(Object(o.i)(x,t[G+1],t[G]),Object(o.q)(x,x)):U=!0,Object(o.e)(I,w,x),Object(o.q)(I,I),Object(o.e)(k,t[G-1],M),c.e.fromPositionAndNormal(t[G],I,D),c.e.intersectRay(D,c.f.wrap(k,w),C)?(Object(o.i)(C,C,t[G]),Object(o.q)(S,C),Object(o.f)(T,I,S),Object(o.q)(T,T)):i(I,M,F,A,T,S,m),Object(o.j)(M,S),Object(o.j)(F,T)),l&&(Object(o.e)(C,t[G],u),Object(o.q)(R,C));for(var q=0;q<d;q++)if(Object(o.d)(P,T,e[q][0]),Object(o.d)(C,S,e[q][1]),Object(o.e)(P,P,C),Object(o.q)(E,P),p[O++]=E[0],p[O++]=E[1],p[O++]=E[2],Object(o.e)(P,P,t[G]),h[y++]=P[0],h[y++]=P[1],h[y++]=P[2],!U){var H=(q+1)%d;v[j++]=V+q,v[j++]=V+d+q,v[j++]=V+H,v[j++]=V+H,v[j++]=V+d+q,v[j++]=V+d+H;for(var B=0;B<6;B++)g[_++]=v[j-6+B]-z}V+=d}for(var W=t[t.length-1],J=0;J<r.length;J++)Object(o.d)(P,T,r[J][0]),Object(o.d)(C,S,r[J][1]),Object(o.e)(P,P,C),Object(o.e)(P,P,W),h[y++]=P[0],h[y++]=P[1],h[y++]=P[2];var Z=O/3;p[O++]=x[0],p[O++]=x[1],p[O++]=x[2];for(var X=V-d,Y=0;Y<n.length;Y++)v[j++]=n[Y][0]>=0?V+n[Y][0]:-n[Y][0]-1+X,v[j++]=n[Y][2]>=0?V+n[Y][2]:-n[Y][2]-1+X,v[j++]=n[Y][1]>=0?V+n[Y][1]:-n[Y][1]-1+X,g[_++]=Z,g[_++]=Z,g[_++]=Z;return new b.a([["position",{size:3,data:h,exclusive:!0}],["normal",{size:3,data:p,exclusive:!0}]],[["position",v],["normal",g]])},e.createPolylineGeometry=function(e,t,r){Object(p.a)(e.length>1,"createPolylineGeometry(): polyline needs at least 2 points"),Object(p.a)(3===e[0].length,"createPolylineGeometry(): malformed vertex"),Object(p.a)(null==t||t.length===e.length,"createPolylineGeometry: need same number of points and normals"),Object(p.a)(null==t||3===t[0].length,"createPolylineGeometry(): malformed normal");for(var i=new Float64Array(3*e.length),n=new Uint32Array(2*(e.length-1)),a=0,o=0,s=0;s<e.length;s++){for(var c=0;c<3;c++)i[a++]=e[s][c];s>0&&(n[o++]=s-1,n[o++]=s)}var l=[],u=[];if(l.push(["position",n]),u.push(["position",{size:3,data:i,exclusive:!0}]),t){for(var d=new Float32Array(3*t.length),h=0,v=0;v<e.length;v++)for(var m=0;m<3;m++)d[h++]=t[v][m];l.push(["normal",n]),u.push(["normal",{size:3,data:d,exclusive:!0}])}return r&&(u.push(["color",{size:4,data:r}]),l.push(["color",Object(f.d)(r.length/4)])),new b.a(u,l,2)},e.createExtrudedTriangle=function(e,t,r,i){for(var n=new Array(18),a=[[-t,0,i/2],[r,0,i/2],[0,e,i/2],[-t,0,-i/2],[r,0,-i/2],[0,e,-i/2]],o=new Uint16Array([0,1,2,3,0,2,2,5,3,1,4,5,5,2,1,1,0,3,3,4,1,4,3,5]),s=0;s<6;s++)n[3*s]=a[s][0],n[3*s+1]=a[s][1],n[3*s+2]=a[s][2];return new b.a([["position",{size:3,data:n,exclusive:!0}]],[["position",o]])},e.transformInPlace=function(e,t){for(var r=e.getMutableAttribute("position").data,i=0;i<r.length;i+=3){var n=r[i],a=r[i+1],s=r[i+2];Object(o.v)(g,n,a,s),Object(o.l)(g,g,t),r[i]=g[0],r[i+1]=g[1],r[i+2]=g[2]}},e.cgToGIS=function(e,t=e){var r=e.vertexAttributes,i=r.get("position").data,n=r.get("normal").data;if(n)for(var a=t.getMutableAttribute("normal").data,o=0;o<n.length;o+=3){var s=n[o+1];a[o+1]=-n[o+2],a[o+2]=s}if(i)for(var c=t.getMutableAttribute("position").data,l=0;l<i.length;l+=3){var u=i[l+1];c[l+1]=-i[l+2],c[l+2]=u}return t},e.makeOrthoBasisDirUp=r,e.makeOrthoBasisDirUpFallback=i}(h||(h={}));var m=.99619469809,g=Object(s.b)(),y=h;t.a=y},function(e,t,r){"use strict";r.d(t,"a",(function(){return u})),r.d(t,"b",(function(){return d})),r.d(t,"c",(function(){return h}));var i=r(210);var n=[];function a(e,t,r,i){return{xmin:e,ymin:t,xmax:r,ymax:i}}function o(e,t,r,i,n,a){return{xmin:e,ymin:t,zmin:r,xmax:i,ymax:n,zmax:a}}function s(e,t,r,i,n,a){return{xmin:e,ymin:t,mmin:r,xmax:i,ymax:n,mmax:a}}function c(e,t,r,i,n,a,o,s){return{xmin:e,ymin:t,zmin:r,mmin:i,xmax:n,ymax:a,zmax:o,mmax:s}}function l(e,t=!1,r=!1){return t?r?c(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7]):o(e[0],e[1],e[2],e[3],e[4],e[5]):r?s(e[0],e[1],e[2],e[3],e[4],e[5]):a(e[0],e[1],e[2],e[3])}function u(e){return e?function(e){return void 0!==e.xmin&&void 0!==e.ymin&&void 0!==e.xmax&&void 0!==e.ymax}(e)?e:function(e){return void 0!==e.x&&void 0!==e.y}(e)?function(e){var{x:t,y:r,z:i,m:n}=e,l=null!=n;return null!=i?l?c(t,r,i,n,t,r,i,n):o(t,r,i,t,r,i):l?s(t,r,n,t,r,n):a(t,r,t,r)}(e):function(e){return void 0!==e.rings}(e)?d(e):function(e){return void 0!==e.paths}(e)?h(e):function(e){return void 0!==e.points}(e)?function(e){var{hasZ:t,hasM:r,points:a}=e;return l(Object(i.c)(n,a,t,r),t,r)}(e):null:null}function d(e){var{hasZ:t,hasM:r,rings:a}=e,o=Object(i.d)(n,a,t,r);return o?l(o,t,r):null}function h(e){var{hasZ:t,hasM:r,paths:a}=e,o=Object(i.d)(n,a,t,r);return o?l(o,t,r):null}},function(e,t,r){"use strict";r.d(t,"a",(function(){return c})),r.d(t,"b",(function(){return l}));var i=r(112),n=r(117),a=r(292),o=r(316),s=r(178),c=["esriGeometryPoint","esriGeometryMultipoint","esriGeometryPolyline","esriGeometryPolygon"];class l{constructor(e){this.options=e,this.geometryTypes=c,this._coordinatePtr=0,this._vertexDimension=0}createFeatureResult(){return new o.a}prepareFeatures(e){this._vertexDimension=2,e.hasZ&&this._vertexDimension++,e.hasM&&this._vertexDimension++}finishFeatureResult(e){if(e&&e.features&&e.hasZ&&this.options.sourceSpatialReference&&e.spatialReference&&!Object(i.c)(e.spatialReference,this.options.sourceSpatialReference)&&!e.spatialReference.vcsWkid){var t=Object(n.g)(this.options.sourceSpatialReference)/Object(n.g)(e.spatialReference);if(1!==t)for(var r of e.features)if(r.geometry&&r.geometry.coords)for(var a=r.geometry.coords,o=2;o<a.length;o+=3)a[o]*=t}}addFeature(e,t){e.features.push(t)}createFeature(){return new a.a}createSpatialReference(){return{wkid:0}}createGeometry(){return new s.a}addField(e,t){e.fields.push(t)}allocateCoordinates(e){e.coords.length=e.lengths.reduce(((e,t)=>e+t),0)*this._vertexDimension,this._coordinatePtr=0}addCoordinate(e,t){e.coords[this._coordinatePtr++]=t}addCoordinatePoint(e,t){e.coords.push(t)}addLength(e,t){e.lengths.push(t)}addQueryGeometry(e,t){e.queryGeometry=t.queryGeometry,e.queryGeometryType=t.queryGeometryType}createPointGeometry(){return new s.a}}},function(e,t,r){"use strict";function i(){return new Float32Array(4)}function n(e){var t=new Float32Array(4);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t}function a(e,t,r,i){var n=new Float32Array(4);return n[0]=e,n[1]=t,n[2]=r,n[3]=i,n}function o(){return i()}function s(){return a(1,1,1,1)}function c(){return a(1,0,0,0)}function l(){return a(0,1,0,0)}function u(){return a(0,0,1,0)}function d(){return a(0,0,0,1)}r.d(t,"a",(function(){return n})),r.d(t,"b",(function(){return i})),r.d(t,"c",(function(){return a}));var h=o(),p=s(),f=c(),b=l(),v=u(),m=d();Object.freeze({__proto__:null,create:i,clone:n,fromValues:a,createView:function(e,t){return new Float32Array(e,t,4)},zeros:o,ones:s,unitX:c,unitY:l,unitZ:u,unitW:d,ZEROS:h,ONES:p,UNIT_X:f,UNIT_Y:b,UNIT_Z:v,UNIT_W:m})},function(e,t,r){"use strict";r.d(t,"a",(function(){return d})),r.d(t,"b",(function(){return u})),r.d(t,"c",(function(){return v})),r.d(t,"d",(function(){return h})),r.d(t,"e",(function(){return f})),r.d(t,"f",(function(){return m})),r.d(t,"g",(function(){return O}));var i=r(89),n=r(105),a=r(104),o=r(111),s=r(299),c=r(135),l=r(177);function u(e){return e?{origin:Object(a.d)(e.origin),direction:Object(a.d)(e.direction)}:{origin:Object(a.e)(),direction:Object(a.e)()}}function d(e,t=u()){return h(e.origin,e.direction,t)}function h(e,t,r=u()){return Object(o.j)(r.origin,e),Object(o.j)(r.direction,t),r}function p(e,t,r=u()){var a=Object(n.b)(Object(c.c)(l.d.get(),t));if(a[2]=0,!e.unprojectFromRenderScreen(a,r.origin))return null;var s=Object(n.b)(Object(c.c)(l.d.get(),t));s[2]=1;var d=e.unprojectFromRenderScreen(s,l.d.get());return Object(i.j)(d)?null:(Object(o.i)(r.direction,d,r.origin),r)}function f(e,t,r=u()){return b(e,e.screenToRender(t,Object(n.b)(l.d.get())),r)}function b(e,t,r=u()){Object(o.j)(r.origin,e.eye);var n=Object(o.v)(l.d.get(),t[0],t[1],1),a=e.unprojectFromRenderScreen(n,l.d.get());return Object(i.j)(a)?null:(Object(o.i)(r.direction,a,r.origin),r)}function v(e,t){var r=Object(o.f)(l.d.get(),Object(o.q)(l.d.get(),e.direction),Object(o.i)(l.d.get(),t,e.origin));return Object(o.g)(r,r)}function m(e,t,r){var i=Object(o.g)(e.direction,Object(o.i)(r,t,e.origin));return Object(o.e)(r,e.origin,Object(o.d)(r,e.direction,i)),r}function g(){return{origin:null,direction:null}}var y=new s.a(g),O=Object.freeze({__proto__:null,create:u,wrap:function(e,t){var r=y.get();return r.origin=e,r.direction=t,r},copy:d,fromPoints:function(e,t,r=u()){return Object(o.j)(r.origin,e),Object(o.i)(r.direction,t,e),r},fromValues:h,fromScreen:function(e,t,r=u()){return p(e,e.screenToRender(t,Object(n.b)(l.d.get())),r)},fromRender:p,fromScreenAtEye:f,fromRenderAtEye:b,distance2:v,distance:function(e,t){return Math.sqrt(v(e,t))},closestPoint:m,createWrapper:g})},function(e,t,r){"use strict";var i,n=r(82),a=(r(80),r(81),r(88)),o=r(85),s=r(84),c=(r(83),r(86),r(87),r(90));var l={1:{id:1,rotation:0,mirrored:!1},2:{id:2,rotation:0,mirrored:!0},3:{id:3,rotation:180,mirrored:!1},4:{id:4,rotation:180,mirrored:!0},5:{id:5,rotation:-90,mirrored:!0},6:{id:6,rotation:90,mirrored:!1},7:{id:7,rotation:90,mirrored:!0},8:{id:8,rotation:-90,mirrored:!1}},u=i=class extends c.a{constructor(e){super(e),this.contentType=null,this.exifInfo=null,this.id=null,this.globalId=null,this.keywords=null,this.name=null,this.parentGlobalId=null,this.parentObjectId=null,this.size=null,this.url=null}get orientationInfo(){var{exifInfo:e}=this,t=function(e){var{exifInfo:t,exifName:r,tagName:i}=e;if(!t||!r||!i)return null;var n=t.find((e=>e.name===r));return n?function(e){var{tagName:t,tags:r}=e;if(!r||!t)return null;var i=r.find((e=>e.name===t));return i&&i.value||null}({tagName:i,tags:n.tags}):null}({exifName:"Exif IFD0",tagName:"Orientation",exifInfo:e});return l[t]||null}clone(){return new i({contentType:this.contentType,exifInfo:this.exifInfo,id:this.id,globalId:this.globalId,keywords:this.keywords,name:this.name,parentGlobalId:this.parentGlobalId,parentObjectId:this.parentObjectId,size:this.size,url:this.url})}};Object(n.a)([Object(o.b)({type:String})],u.prototype,"contentType",void 0),Object(n.a)([Object(o.b)()],u.prototype,"exifInfo",void 0),Object(n.a)([Object(o.b)({readOnly:!0})],u.prototype,"orientationInfo",null),Object(n.a)([Object(o.b)({type:a.a})],u.prototype,"id",void 0),Object(n.a)([Object(o.b)({type:String})],u.prototype,"globalId",void 0),Object(n.a)([Object(o.b)({type:String})],u.prototype,"keywords",void 0),Object(n.a)([Object(o.b)({type:String})],u.prototype,"name",void 0),Object(n.a)([Object(o.b)({json:{read:!1}})],u.prototype,"parentGlobalId",void 0),Object(n.a)([Object(o.b)({json:{read:!1}})],u.prototype,"parentObjectId",void 0),Object(n.a)([Object(o.b)({type:a.a})],u.prototype,"size",void 0),Object(n.a)([Object(o.b)({json:{read:!1}})],u.prototype,"url",void 0);var d=u=i=Object(n.a)([Object(s.a)("esri.layers.support.AttachmentInfo")],u);t.a=d},,,function(e,t,r){"use strict";r.d(t,"a",(function(){return h})),r.d(t,"b",(function(){return d})),r.d(t,"c",(function(){return u})),r.d(t,"d",(function(){return l}));var i=r(104),n=r(111),a=r(505),o=(()=>{for(var e=new Uint32Array(131072),t=0;t<e.length;++t)e[t]=t;return e})(),s=new Uint16Array([0]),c=(()=>{for(var e=new Uint16Array(65536),t=0;t<e.length;++t)e[t]=t;return e})();function l(e){if(1===e)return s;if(e<c.length)return new Uint16Array(c.buffer,0,e);if(e>o.length){var t=Math.max(2*o.length,e);o=new Uint32Array(t);for(var r=0;r<o.length;r++)o[r]=r}return new Uint32Array(o.buffer,0,e)}function u(e,t,r){if(!e)return!1;var{size:i,data:o}=e;Object(n.v)(r,0,0,0),Object(n.v)(v,0,0,0);for(var s=0,c=0,l=0;l<t.length-2;l+=3){var u=t[l+0]*i,d=t[l+1]*i,h=t[l+2]*i;Object(n.v)(p,o[u+0],o[u+1],o[u+2]),Object(n.v)(f,o[d+0],o[d+1],o[d+2]),Object(n.v)(b,o[h+0],o[h+1],o[h+2]);var m=Object(a.a)(p,f,b);m?(Object(n.e)(p,p,f),Object(n.e)(p,p,b),Object(n.d)(p,p,1/3*m),Object(n.e)(r,r,p),s+=m):(Object(n.e)(v,v,p),Object(n.e)(v,v,f),Object(n.e)(v,v,b),c+=3)}return(0!==c||0!==s)&&(0!==s?(Object(n.d)(r,r,1/s),!0):0!==c&&(Object(n.d)(r,v,1/c),!0))}function d(e,t,r){if(!e||!t)return!1;var{size:i,data:a}=e;Object(n.v)(r,0,0,0);for(var o=-1,s=0,c=0;c<t.length;c++){var l=t[c]*i;o!==l&&(r[0]+=a[l+0],r[1]+=a[l+1],r[2]+=a[l+2],s++),o=l}return s>1&&Object(n.d)(r,r,1/s),s>0}function h(e,t,r,i){if(!e)return!1;var{size:a,data:o}=e;Object(n.v)(i,0,0,0),Object(n.v)(v,0,0,0);for(var s=0,c=0,l=t?t.length-1:o.length/a-1,u=l+(r?2:0),d=0;d<u;d+=2){var h=d<l?d:l,b=d<l?d+1:0,m=(t?t[h]:h)*a,g=(t?t[b]:b)*a;p[0]=o[m+0],p[1]=o[m+1],p[2]=o[m+2],f[0]=o[g+0],f[1]=o[g+1],f[2]=o[g+2],Object(n.d)(p,Object(n.e)(p,p,f),.5);var y=Object(n.z)(p,f);y>0?(Object(n.e)(i,i,Object(n.d)(p,p,y)),s+=y):(Object(n.e)(v,v,p),c++)}return 0!==s?(Object(n.d)(i,i,1/s),!0):0!==c&&(Object(n.d)(i,v,1/c),!0)}var p=Object(i.e)(),f=Object(i.e)(),b=Object(i.e)(),v=Object(i.e)()},function(e,t,r){"use strict";r.d(t,"a",(function(){return s})),r.d(t,"b",(function(){return l})),r.d(t,"c",(function(){return c}));var i=r(89),n=r(306),a=r(348),o=r(328);class s extends a.a{constructor(e,t){super(),this.type=3,this.supportsEdges=!1,this._visible=!0,this._renderPriority=0,this._insertOrder=0,this._vertexAttributeLocations=n.a,this._params=Object(o.c)(e,t),this.validateParameterValues(this._params)}dispose(){}get params(){return this._params}update(e){return!1}setParameterValues(e){Object(o.f)(this._params,e)&&(this.validateParameterValues(this._params),this.parametersChanged())}validateParameterValues(e){}get visible(){return this._visible}set visible(e){e!==this._visible&&(this._visible=e,this.parametersChanged())}isVisibleInPass(e){return!0}get renderOccluded(){return this.params.renderOccluded}get renderPriority(){return this._renderPriority}set renderPriority(e){e!==this._renderPriority&&(this._renderPriority=e,this.parametersChanged())}get insertOrder(){return this._insertOrder}set insertOrder(e){e!==this._insertOrder&&(this._insertOrder=e,this.parametersChanged())}get vertexAttributeLocations(){return this._vertexAttributeLocations}isVisible(){return this._visible}parametersChanged(){Object(i.k)(this.materialRepository)&&this.materialRepository.materialChanged(this)}}function c(e,t){return e.isVisible()&&e.isVisibleInPass(t.pass)&&0!=(e.renderOccluded&t.renderOccludedMask)}var l={renderOccluded:1}},function(e,t,r){"use strict";r.d(t,"a",(function(){return i}));var i,n=r(157),a=r(580);!function(e){function t(e,t,r){Object(n.s)(o,r,t),e.setUniform3fv("localOrigin",t),e.setUniformMatrix4fv("view",o)}e.bindCamPosition=function(e,t,r){e.setUniform3f("camPos",r[3]-t[0],r[7]-t[1],r[11]-t[2])},e.bindProjectionMatrix=function(e,t){e.setUniformMatrix4fv("proj",t)},e.bindNearFar=function(e,t){e.setUniform2fv("nearFar",t)},e.bindViewCustomOrigin=t,e.bindView=function(e,r){t(e,r.origin,r.camera.viewMatrix)},e.bindViewport=function(e,t){e.setUniform4fv("viewport",t.camera.fullViewport)}}(i||(i={}));var o=Object(a.a)()},,,,,function(e,t,r){"use strict";function i(e){return"string"==typeof e?document.getElementById(e):e}function n(e){for(;e.hasChildNodes();)e.removeChild(e.firstChild)}function a(e,t){var r=t.parentNode;r&&r.insertBefore(e,t)}function o(e,t){for(;;){var r=e.firstChild;if(!r)break;t.appendChild(r)}}function s(e){e.parentNode&&e.parentNode.removeChild(e)}r.d(t,"a",(function(){return i})),r.d(t,"b",(function(){return n})),r.d(t,"c",(function(){return a})),r.d(t,"d",(function(){return s})),r.d(t,"e",(function(){return o}));(()=>{if("function"==typeof Element.prototype.closest)return(e,t)=>e.closest(t);var e=Element.prototype.matches||Element.prototype.msMatchesSelector})()},function(e,t,r){"use strict";r.d(t,"a",(function(){return n}));var i=r(387);function n(e,t){var r=Object(i.a)(e,t),n=r.queryResult.featureResult,a=r.queryResult.queryGeometry,o=r.queryResult.queryGeometryType;if(n&&n.features&&n.features.length&&n.objectIdFieldName){var s=n.objectIdFieldName;for(var c of n.features)c.attributes&&(c.objectId=c.attributes[s])}return n&&(n.queryGeometry=a,n.queryGeometryType=o),n}},function(e,t,r){"use strict";r.d(t,"a",(function(){return A})),r.d(t,"b",(function(){return p})),r.d(t,"c",(function(){return M}));var i=r(89),n=r(81),a=r(93),o=r(178),s=r(372),c=r(362),l=n.a.getLogger("esri.tasks.operations.pbfFeatureServiceParser"),u=["esriFieldTypeSmallInteger","esriFieldTypeInteger","esriFieldTypeSingle","esriFieldTypeDouble","esriFieldTypeString","esriFieldTypeDate","esriFieldTypeOID","esriFieldTypeGeometry","esriFieldTypeBlob","esriFieldTypeRaster","esriFieldTypeGUID","esriFieldTypeGlobalID","esriFieldTypeXML"],d=["sqlTypeBigInt","sqlTypeBinary","sqlTypeBit","sqlTypeChar","sqlTypeDate","sqlTypeDecimal","sqlTypeDouble","sqlTypeFloat","sqlTypeGeometry","sqlTypeGUID","sqlTypeInteger","sqlTypeLongNVarchar","sqlTypeLongVarbinary","sqlTypeLongVarchar","sqlTypeNChar","sqlTypeNVarchar","sqlTypeOther","sqlTypeReal","sqlTypeSmallInt","sqlTypeSqlXml","sqlTypeTime","sqlTypeTimestamp","sqlTypeTimestamp2","sqlTypeTinyInt","sqlTypeVarbinary","sqlTypeVarchar"],h=["upperLeft","lowerLeft"];function p(e){return e>=u.length?null:u[e]}function f(e){return e>=d.length?null:d[e]}function b(e){return e>=h.length?null:h[e]}function v(e,t){return t>=e.geometryTypes.length?null:e.geometryTypes[t]}function m(e,t,r){for(var i=t.createPointGeometry(r);e.next();)switch(e.tag()){case 3:for(var n=e.getUInt32(),a=e.pos()+n,o=0;e.pos()<a;)t.addCoordinatePoint(i,e.getSInt64(),o++);break;case 1:case 2:default:e.skip()}return i}function g(e,t,r){for(var i=t.createGeometry(r),n=2+(r.hasZ?1:0)+(r.hasM?1:0);e.next();)switch(e.tag()){case 2:for(var a=e.getUInt32(),o=e.pos()+a,s=0;e.pos()<o;)t.addLength(i,e.getUInt32(),s++);break;case 3:var c=e.getUInt32(),l=e.pos()+c,u=0;for(t.allocateCoordinates(i);e.pos()<l;)t.addCoordinate(i,e.getSInt64(),u),++u===n&&(u=0);break;case 1:default:e.skip()}return i}function y(e){for(var t=new o.a,r="esriGeometryPoint";e.next();)switch(e.tag()){case 2:for(var i=e.getUInt32(),n=e.pos()+i;e.pos()<n;)t.lengths.push(e.getUInt32());break;case 3:for(var a=e.getUInt32(),c=e.pos()+a;e.pos()<c;)t.coords.push(e.getSInt64());break;case 1:r=s.a[e.getEnum()];break;default:e.skip()}return{queryGeometry:t,queryGeometryType:r}}function O(e){for(;e.next();)switch(e.tag()){case 1:return e.getString();case 2:return e.getFloat();case 3:return e.getDouble();case 4:return e.getSInt32();case 5:return e.getUInt32();case 6:return e.getInt64();case 7:return e.getUInt64();case 8:return e.getSInt64();case 9:return e.getBool();default:return e.skip(),null}return null}function j(e){for(var t={type:p(0)};e.next();)switch(e.tag()){case 1:t.name=e.getString();break;case 2:t.type=p(e.getEnum());break;case 3:t.alias=e.getString();break;case 4:t.sqlType=f(e.getEnum());break;case 5:try{t.domain=JSON.parse(e.getString())}catch(b){l.error(new a.a("query:parsing-pbf","Failed to parse domain",{error:b})),t.domain=null}break;case 6:t.defaultValue=e.getString();break;default:e.skip()}return t}function _(e){for(var t={};e.next();)switch(e.tag()){case 1:t.name=e.getString();break;case 2:t.isSystemMaintained=e.getBool();break;default:e.skip()}return t}function w(e,t,r,i){for(var n=t.createFeature(r),a=0;e.next();)switch(e.tag()){case 1:var o=i[a++].name;n.attributes[o]=e.processMessage(O);break;case 2:n.geometry=e.processMessageWithArgs(g,t,r);break;case 4:n.centroid=e.processMessageWithArgs(m,t,r);break;default:e.skip()}return n}function x(e){for(var t=[1,1,1,1];e.next();)switch(e.tag()){case 1:t[0]=e.getDouble();break;case 2:t[1]=e.getDouble();break;case 4:t[2]=e.getDouble();break;case 3:t[3]=e.getDouble();break;default:e.skip()}return t}function S(e){for(var t=[0,0,0,0];e.next();)switch(e.tag()){case 1:t[0]=e.getDouble();break;case 2:t[1]=e.getDouble();break;case 4:t[2]=e.getDouble();break;case 3:t[3]=e.getDouble();break;default:e.skip()}return t}function M(e){for(var t={originPosition:b(0)};e.next();)switch(e.tag()){case 1:t.originPosition=b(e.getEnum());break;case 2:t.scale=e.processMessage(x);break;case 3:t.translate=e.processMessage(S);break;default:e.skip()}return t}function T(e){for(var t={};e.next();)switch(e.tag()){case 1:t.shapeAreaFieldName=e.getString();break;case 2:t.shapeLengthFieldName=e.getString();break;case 3:t.units=e.getString();break;default:e.skip()}return t}function P(e,t){for(var r=t.createSpatialReference();e.next();)switch(e.tag()){case 1:r.wkid=e.getUInt32();break;case 5:r.wkt=e.getString();break;case 2:r.latestWkid=e.getUInt32();break;case 3:r.vcsWkid=e.getUInt32();break;case 4:r.latestVcsWkid=e.getUInt32();break;default:e.skip()}return r}function E(e,t){var r=t.createFeatureResult();r.geometryType=v(t,0);for(var i=!1;e.next();)switch(e.tag()){case 1:r.objectIdFieldName=e.getString();break;case 3:r.globalIdFieldName=e.getString();break;case 4:r.geohashFieldName=e.getString();break;case 5:r.geometryProperties=e.processMessage(T);break;case 7:r.geometryType=v(t,e.getEnum());break;case 8:r.spatialReference=e.processMessageWithArgs(P,t);break;case 10:r.hasZ=e.getBool();break;case 11:r.hasM=e.getBool();break;case 12:r.transform=e.processMessage(M);break;case 9:var n=e.getBool();r.exceededTransferLimit=n;break;case 13:t.addField(r,e.processMessage(j));break;case 15:i||(t.prepareFeatures(r),i=!0),t.addFeature(r,e.processMessageWithArgs(w,t,r,r.fields));break;case 2:r.uniqueIdField=e.processMessage(_);break;case 6:default:e.skip()}return t.finishFeatureResult(r),r}function C(e,t){for(var r={},n=null;e.next();)switch(e.tag()){case 4:n=e.processMessageWithArgs(y);break;case 1:r.featureResult=e.processMessageWithArgs(E,t);break;case 2:case 3:default:e.skip()}return Object(i.k)(n)&&r.featureResult&&t.addQueryGeometry(r,n),r}function A(e,t){try{for(var r=new c.a(new Uint8Array(e),new DataView(e)),i={};r.next();)switch(r.tag()){case 2:i.queryResult=r.processMessageWithArgs(C,t);break;default:r.skip()}return i}catch(n){throw new a.a("query:parsing-pbf","Error while parsing FeatureSet PBF payload",{error:n})}}},function(e,t,r){"use strict";var i=r(569);class n extends i.a{constructor(e){super(),this.material=e.material,this.techniqueRep=e.techniqueRep,this.output=e.output}getTechnique(){return this.technique}getPipelineState(e,t){return this.getTechnique().pipeline}ensureResources(e){return 2}ensureParameters(e){}}t.a=n},function(e,t,r){"use strict";r.d(t,"a",(function(){return n})),r.d(t,"b",(function(){return i}));r(114),r(261),r(163),r(80),r(81),r(288);r(301),r(129);function i(e){return e&&"function"==typeof e.render}function n(e){return e&&"function"==typeof e.postMixInProperties&&"function"==typeof e.buildRendering&&"function"==typeof e.postCreate&&"function"==typeof e.startup}},function(e,t,r){"use strict";function i(e,t,r=!1){var{hasM:i,hasZ:n}=e;Array.isArray(t)?4!==t.length||i||n?3===t.length&&r&&!i?(n=!0,i=!1):3===t.length&&i&&n&&(i=!1,n=!1):(i=!0,n=!0):(n=!n&&t.hasZ&&(!i||t.hasM),i=!i&&t.hasM&&(!n||t.hasZ)),e.hasZ=n,e.hasM=i}r.d(t,"a",(function(){return i}))},,,,,,function(e,t,r){"use strict";function i(){return[0,0,0,1]}function n(e,t){return new Float64Array(e,t,4)}r.d(t,"a",(function(){return i})),r.d(t,"b",(function(){return n}));var a=[0,0,0,1];Object.freeze({__proto__:null,create:i,clone:function(e){return[e[0],e[1],e[2],e[3]]},fromValues:function(e,t,r,i){return[e,t,r,i]},createView:n,IDENTITY:a})},function(e,t,r){"use strict";r.d(t,"a",(function(){return w})),r.d(t,"b",(function(){return O})),r.d(t,"c",(function(){return j})),r.d(t,"d",(function(){return d})),r.d(t,"e",(function(){return u})),r.d(t,"f",(function(){return _})),r.d(t,"g",(function(){return p})),r.d(t,"h",(function(){return b})),r.d(t,"i",(function(){return m})),r.d(t,"j",(function(){return g})),r.d(t,"k",(function(){return v})),r.d(t,"l",(function(){return y})),r.d(t,"m",(function(){return f}));var i=r(91),n=r(92),a=r(89),o=(r(217),r(161)),s=r(110),c=r(105),l=r(568);function u(e,t){return e.events.on("drag",function(e,t){var r=null,i=null;return n=>{if("cancel"!==n.action){var o={action:n.action,screenStart:n.start,screenEnd:n.screenPoint};"start"===n.action&&Object(a.j)(r)&&(r=new w,i=new w,t(e,r,i,n.pointerType,o)),Object(a.k)(r)&&r.execute(o),"end"===n.action&&Object(a.k)(r)&&(r=null,i=null)}else Object(a.k)(i)&&(i.execute({action:"cancel"}),r=null,i=null)}}(e,t))}function d(e,t){var r=[e.x,e.y,e.z],i=t,n=[Math.cos(i),Math.sin(i)],a=Math.sqrt(n[0]*n[0]+n[1]*n[1]);if(0===a)return null;n[0]/=a,n[1]/=a;var o=e=>{var t=(e.x-r[0])*n[0]+(e.y-r[1])*n[1];e.x=r[0]+t*n[0],e.y=r[1]+t*n[1]};return e=>(o(e.mapStart),o(e.mapEnd),e)}function h(e,t){var r=null,n=Object(a.k)(e[t])?e[t].spatialReference:null;return s=>{if("start"===s.action&&Object(a.k)(e[t])&&(r=function(e,t){return Object(a.j)(e)||"mesh"===e.type?null:e.spatialReference.equals(t)?e.clone():Object(o.a)(e,t)?Object(o.d)(e,t):null}(e[t],s.mapStart.spatialReference)),Object(a.j)(r))return null;var c=s.mapEnd.x-s.mapStart.x,u=s.mapEnd.y-s.mapStart.y,d=s.mapEnd.z-s.mapStart.z,h=Object(l.d)(r.clone(),c,u,d);return h.spatialReference.equals(n)?e[t]=h:e[t]=Object(o.d)(h,n),Object(i.a)(Object(i.a)({},s),{},{translationX:c,translationY:u,translationZ:d})}}function p(e){return h(e,"geometry")}function f(e,t=null,r){var n=null,s=Object(a.k)(t)&&!e.spatialReference.equals(t)?e=>Object(a.k)(e)?Object(o.d)(e,t):e:e=>e,c=Object(i.a)({exclude:[]},r);return t=>{if("start"===t.action&&(n=s(e.toMap(t.screenStart,c))),Object(a.j)(n))return null;var r=s(e.toMap(t.screenEnd,c));return Object(a.k)(r)?Object(i.a)(Object(i.a)({},t),{},{mapStart:n,mapEnd:r}):null}}function b(e){var t=e.map((e=>Object(a.q)(p(e)))).filter((e=>Object(a.k)(e)));return e=>{var r=e.mapEnd.x-e.mapStart.x,n=e.mapEnd.y-e.mapStart.y,a=e.mapEnd.z-e.mapStart.z;return t.forEach((t=>t(e))),Object(i.a)(Object(i.a)({},e),{},{translationX:r,translationY:n,translationZ:a})}}function v(e,t){var r=new Map;for(var i of t)r.set(i,Object(n.a)(e[i]));return t=>(r.forEach(((t,r)=>{e[r]=t})),t)}function m(e){return v(e,["geometry"])}function g(e){var t=e.map((e=>Object(a.q)(m(e)))).filter((e=>Object(a.k)(e)));return e=>(t.forEach((t=>t(e))),e)}function y(e){var t=Object(a.k)(e.symbol)?e.symbol.clone():null;return r=>(e.symbol=t,r)}function O(){var e=0,t=0,r=0;return n=>{"start"===n.action&&(e=n.mapStart.x,t=n.mapStart.y,r=n.mapStart.z);var a=n.mapEnd.x-e,o=n.mapEnd.y-t,s=n.mapEnd.z-r;return e=n.mapEnd.x,t=n.mapEnd.y,r=n.mapEnd.z,Object(i.a)(Object(i.a)({},n),{},{mapDeltaX:a,mapDeltaY:o,mapDeltaZ:s,mapDeltaSpatialReference:n.mapStart.spatialReference})}}function j(){var e=0,t=0;return r=>{"start"===r.action&&(e=r.screenStart.x,t=r.screenStart.y);var n=r.screenEnd.x-e,a=r.screenEnd.y-t;return e=r.screenEnd.x,t=r.screenEnd.y,Object(i.a)(Object(i.a)({},r),{},{screenDeltaX:n,screenDeltaY:a})}}function _(e,t){var r=null,i=0,n=0;return a=>{if("start"===a.action&&((r=e.toScreen(t)).x<0||r.x>e.width||r.y<0||r.y>e.height?r=null:(i=a.screenStart.x-r.x,n=a.screenStart.y-r.y)),null==r)return null;var o=Object(s.d)(a.screenEnd.x-i,0,e.width),l=Object(s.d)(a.screenEnd.y-n,0,e.height),u=Object(c.f)(o,l);return a.screenStart=r,a.screenEnd=u,a}}class w{constructor(){this.execute=()=>{}}next(e,t=new w){return Object(a.k)(e)&&(this.execute=r=>{var i=e(r);Object(a.k)(i)&&t.execute(i)}),t}}},function(e,t,r){"use strict";r.d(t,"a",(function(){return g})),r.d(t,"b",(function(){return v})),r.d(t,"c",(function(){return O})),r.d(t,"d",(function(){return A}));r(80);var i=r(89),n=r(81),a=r(110),o=r(104),s=r(111),c=r(330),l=r(157),u=r(200),d=r(191),h=r(177),p=r(347),f=r(374),b=n.a.getLogger("esri.views.3d.support.geometryUtils.sphere");function v(){return Object(u.c)()}function m(e,t=v()){return Object(d.c)(t,e)}function g(e){e[0]=e[1]=e[2]=e[3]=0}function y(e){return Array.isArray(e)?e[3]:e}function O(e){return Array.isArray(e)?e:E}function j(e,t,r){if(Object(i.j)(t))return!1;var n=Object(s.i)(h.d.get(),t.origin,O(e)),a=Object(s.g)(t.direction,t.direction),o=2*Object(s.g)(t.direction,n),c=o*o-4*a*(Object(s.g)(n,n)-e[3]*e[3]);if(c<0)return!1;var l=Math.sqrt(c),u=(-o-l)/(2*a),d=(-o+l)/(2*a);return(u<0||d<u&&d>0)&&(u=d),!(u<0)&&(r&&Object(s.e)(r,t.origin,Object(s.d)(h.d.get(),t.direction,u)),!0)}function _(e,t,r){var i=h.d.get(),n=h.a.get();Object(s.f)(i,t.origin,t.direction);var a=y(e);Object(s.f)(r,i,t.origin),Object(s.d)(r,r,1/Object(s.o)(r)*a);var o=x(e,t.origin),c=Object(p.a)(t.origin,r);return Object(l.i)(n),Object(l.q)(n,n,c+o,i),Object(s.l)(r,r,n),r}function w(e,t,r){var i=Object(s.i)(h.d.get(),t,O(e)),n=Object(s.d)(h.d.get(),i,e[3]/Object(s.o)(i));return Object(s.e)(r,n,O(e))}function x(e,t){var r=Object(s.i)(h.d.get(),t,O(e)),i=Object(s.o)(r),n=y(e),o=n+Math.abs(n-i);return Object(a.b)(n/o)}var S=Object(o.e)();function M(e,t,r,i){var n=Object(s.i)(S,t,O(e));switch(r){case 0:var a=Object(c.a)(n,S)[2];return Object(s.v)(i,-Math.sin(a),Math.cos(a),0);case 1:var o=Object(c.a)(n,S),l=o[1],u=o[2],d=Math.sin(l);return Object(s.v)(i,-d*Math.cos(u),-d*Math.sin(u),Math.cos(l));case 2:return Object(s.q)(i,n);default:return}}function T(e,t){var r=Object(s.i)(C,t,O(e));return Object(s.o)(r)-e[3]}var P=Object(f.b)(),E=Object(o.e)(),C=Object(o.e)();Object.freeze(E);var A=Object.freeze({__proto__:null,create:v,copy:m,fromCenterAndRadius:function(e,t){return Object(u.d)(e[0],e[1],e[2],t)},wrap:function(e){return e},clear:g,fromRadius:function(e){return e},getRadius:y,getCenter:O,fromValues:function(e,t,r,i){return Object(u.d)(e,t,r,i)},elevate:function(e,t,r){return e!==r&&Object(s.j)(r,e),r[3]=e[3]+t,r},setExtent:function(e,t,r){return b.error("sphere.setExtent is not yet supported"),e===r?r:m(e,r)},intersectRay:j,intersectScreen:function(e,t,r,i){return j(e,Object(f.e)(t,r,P),i)},intersectsRay:function(e,t){return j(e,t,null)},intersectRayClosestSilhouette:function(e,t,r){if(j(e,t,r))return r;var i=_(e,t,h.d.get());return Object(s.e)(r,t.origin,Object(s.d)(h.d.get(),t.direction,Object(s.n)(t.origin,i)/Object(s.o)(t.direction))),r},closestPointOnSilhouette:_,closestPoint:function(e,t,r){return j(e,t,r)?r:(Object(f.f)(t,O(e),r),w(e,r,r))},projectPoint:w,distanceToSilhouette:function(e,t){var r=Object(s.i)(h.d.get(),t,O(e)),i=Object(s.r)(r),n=e[3]*e[3];return Math.sqrt(Math.abs(i-n))},angleToSilhouette:x,axisAt:M,altitudeAt:T,setAltitudeAt:function(e,t,r,i){var n=T(e,t),a=M(e,t,2,C),o=Object(s.d)(C,a,r-n);return Object(s.e)(i,t,o),i}})},,,,function(e,t,r){"use strict";r.d(t,"a",(function(){return p})),r.d(t,"b",(function(){return d})),r.d(t,"c",(function(){return l})),r.d(t,"d",(function(){return u}));var i=r(88);var n=r(188);function a(e){e.name&&(e.read&&"object"==typeof e.read?void 0===e.read.source&&(e.read.source=e.name):e.read={source:e.name},e.write&&"object"==typeof e.write?void 0===e.write.target&&(e.write.target=e.name):e.write={target:e.name})}function o(e){"boolean"==typeof e.read?e.read={enabled:e.read}:"function"==typeof e.read?e.read={enabled:!0,reader:e.read}:e.read&&"object"==typeof e.read&&void 0===e.read.enabled&&(e.read.enabled=!0)}function s(e){"boolean"==typeof e.write?e.write={enabled:e.write}:"function"==typeof e.write?e.write={enabled:!0,writer:e.write}:e.write&&"object"==typeof e.write&&void 0===e.write.enabled&&(e.write.enabled=!0)}var c=r(475);function l(e,t){return d(e,"read",t)}function u(e,t){return d(e,"write",t)}function d(e,t,r){var i=e&&e.json;if(e&&e.json&&e.json.origins&&r){var n=e.json.origins[r.origin];n&&("any"===t||t in n)&&(i=n)}return i}function h(e){var t=function(e){return e.type?function(e){if(!e.type)return;for(var t=0,r=e.type;Array.isArray(r)&&!Object(i.o)(r);)r=r[0],t++;return{type:r,ndimArray:t}}(e):function(e){if(!e.types)return;for(var t=0,r=e.types;Array.isArray(r);)r=r[0],t++;return{types:r,ndimArray:t}}(e)}(e);if(e.json.origins)for(var r in e.json.origins){var a=e.json.origins[r];Object(n.a)(t,a,!1),Object(c.a)(t,a)}Object(n.a)(t,e.json,!0),Object(c.a)(t,e.json)}var p={processPrototypePropertyMetadata(e,t){var r;(function(e){if(e.json||(e.json={}),o(e.json),s(e.json),a(e.json),e.json.origins)for(var t in e.json.origins)o(e.json.origins[t]),s(e.json.origins[t]),a(e.json.origins[t]);return!0})(t)&&((r=t).json&&r.json.origins&&function(){var e=r.json.origins,t={"web-document":["web-scene","web-map"]};for(var i in t)e[i]&&function(){var r=e[i];t[i].forEach((t=>{e[t]=r})),delete e[i]}()}(),h(t))}}},function(e,t,r){"use strict";var i=r(213);t.a=class{constructor(e,t){this._storage=new i.b,this._storage.maxSize=e,t&&this._storage.registerRemoveFunc("",t)}put(e,t){this._storage.put(e,t,1,1)}pop(e){return this._storage.pop(e)}get(e){return this._storage.get(e)}clear(){this._storage.clearAll()}destroy(){this._storage.destroy()}}},,,,,function(e,t,r){"use strict";r.d(t,"a",(function(){return o}));var i=r(81);class n{constructor(e,t=[]){this.eventType=e,this.keyModifiers=t}matches(e){if(e.type!==this.eventType)return!1;if(0===this.keyModifiers.length)return!0;var t=e.modifiers;for(var r of this.keyModifiers)if(!t.has(r))return!1;return!0}}var a=i.a.getLogger("esri.views.input.InputHandler");class o{constructor(e){this._manager=null,this._incoming={},this._outgoing={},this._incomingEventMatches=null,this._incomingEventTypes=null,this._outgoingEventTypes=null,this._hasSideEffects=e}get incomingEventMatches(){if(!this._incomingEventMatches)for(var e in this._incomingEventMatches=[],this._incoming){var t=this._incoming[e];for(var r of t)this._incomingEventMatches.push(r.match)}return this._incomingEventMatches}get incomingEventTypes(){return this._incomingEventTypes||(this._incomingEventTypes=this.incomingEventMatches.map((e=>e.eventType))),this._incomingEventTypes}get outgoingEventTypes(){return this._outgoingEventTypes||(this._outgoingEventTypes=Object.keys(this._outgoing)),this._outgoingEventTypes}get hasSideEffects(){return this._hasSideEffects}get hasPendingInputs(){return!1}onInstall(e){this._manager?a.error("This InputHandler has already been registered with an InputManager"):(e.setEventCallback((e=>this._handleEvent(e))),e.setUninstallCallback((()=>this._onUninstall())),this._manager=e)}onUninstall(){}registerIncoming(e,t,r){var i;"function"==typeof t?(r=t,i=[]):i=t||[];var a="string"==typeof e?new n(e,i):e,o=()=>{this._incomingEventTypes=null,this._incomingEventMatches=null},c=e=>{var t=this._incoming[e.match.eventType];if(t){var r=t.indexOf(e);t.splice(r,1),o(),this._manager&&this._manager.updateDependencies()}},l=new s(a,r,{onPause:c,onRemove:c,onResume:e=>{var t=this._incoming[e.match.eventType];t&&-1===t.indexOf(e)&&(t.push(e),o(),this._manager&&this._manager.updateDependencies())}}),u=this._incoming[a.eventType];return u||(u=[],this._incoming[a.eventType]=u),u.push(l),o(),this._manager&&this._manager.updateDependencies(),l}registerOutgoing(e){if(this._outgoing[e])throw Error("There is already a callback registered for this outgoing InputEvent: "+e);var t=new c(e,{onEmit:(e,t,r,i)=>{this._manager.emit(e.eventType,t,r,i)},onRemove:e=>{delete this._outgoing[e.eventType],this._manager.updateDependencies()}});return this._outgoing[e]=t,this._outgoingEventTypes=null,this._manager&&this._manager.updateDependencies(),t}startCapturingPointer(e){this._manager.setPointerCapture(e,!0)}stopCapturingPointer(e){this._manager.setPointerCapture(e,!1)}refreshHasPendingInputs(){this._manager.refreshHasPendingInputs()}_onUninstall(){this._manager?(this.onUninstall(),this._manager=null):a.error("This InputHandler is not registered with an InputManager")}_handleEvent(e){var t=this._incoming[e.type];if(t)for(var r of t)if(r.match.matches(e)&&(r.callback(e),e.shouldStopPropagation()))break}}class s{constructor(e,t,r){this.match=e,this._callback=t,this._handler=r}pause(){this._handler.onPause(this)}resume(){this._handler.onResume(this)}remove(){this._handler.onRemove(this)}get callback(){return this._callback}}class c{constructor(e,t){this.eventType=e,this._removed=!1,this._handler=t}emit(e,t,r){this._removed||this._handler.onEmit(this,e,t,r)}remove(){this._removed=!0,this._handler.onRemove(this)}}},function(e,t,r){"use strict";var i=r(124);class n{constructor(e,t,r){this.name=e,this.details=r,this.message=void 0,this instanceof n&&(this.message=t&&function(e,t){return e.replace(/\$\{([^\s\:\}]*)(?:\:([^\s\:\}]+))?\}/g,(function(e,r){if(""===r)return"$";var n=Object(i.b)(r,t),a=null==n?"":n;if(void 0===a)throw new Error('could not find key "'.concat(r,'" in template'));return a.toString()}))}(t,r)||"")}toString(){return"["+this.name+"]: "+this.message}}t.a=n},function(e,t,r){"use strict";var i=r(158);var n=i.a.queueMicrotask?i.a.queueMicrotask:e=>{i.a.Promise.resolve().then(e)},a=[],o=[];function s(e){a.push(e),1===a.length&&n((()=>{for(var e of o)e();var t=a.slice();for(var r of(a.length=0,t))r()}))}(s||(s={})).before=function(e){return o.push(e),{remove(){o=o.filter((t=>t!==e))}}};var c=s;t.a=c},function(e,t,r){"use strict";r.d(t,"a",(function(){return n})),r.d(t,"b",(function(){return a}));var i=r(276);function n(e){return e?a(e.rings,e.hasZ):null}function a(e,t){if(!e||!e.length)return null;for(var r=[],n=[],a=t?[1/0,-1/0,1/0,-1/0,1/0,-1/0]:[1/0,-1/0,1/0,-1/0],s=0,c=e.length;s<c;s++){var l=o(e[s],t,a);l&&n.push(l)}if(n.sort(((e,r)=>{var i=e[2]-r[2];return 0===i&&t&&(i=e[4]-r[4]),i})),n.length){var u=6*n[0][2];r[0]=n[0][0]/u,r[1]=n[0][1]/u,t&&(u=6*n[0][4],r[2]=0!==u?n[0][3]/u:0),(r[0]<a[0]||r[0]>a[1]||r[1]<a[2]||r[1]>a[3]||t&&(r[2]<a[4]||r[2]>a[5]))&&(r.length=0)}if(!r.length){var d=e[0]&&e[0].length?function(e,t){for(var r=t?[0,0,0]:[0,0],n=t?[0,0,0]:[0,0],a=0,o=0,s=0,c=0,l=0,u=e.length;l<u-1;l++){var d=e[l],h=e[l+1];if(d&&h){r[0]=d[0],r[1]=d[1],n[0]=h[0],n[1]=h[1],t&&d.length>2&&h.length>2&&(r[2]=d[2],n[2]=h[2]);var p=Object(i.c)(r,n);if(p){a+=p;var f=Object(i.d)(d,h);o+=p*f[0],s+=p*f[1],t&&f.length>2&&(c+=p*f[2])}}}return a>0?t?[o/a,s/a,c/a]:[o/a,s/a]:e.length?e[0]:null}(e[0],t):null;if(!d)return null;r[0]=d[0],r[1]=d[1],t&&d.length>2&&(r[2]=d[2])}return r}function o(e,t,r){for(var i=0,n=0,a=0,o=0,s=0,c=0;c<e.length;c++){var l=e[c],[u,d,h]=l,p=e[(c+1)%e.length],[f,b,v]=p,m=u*b-f*d;o+=m,i+=(u+f)*m,n+=(d+b)*m,t&&l.length>2&&p.length>2&&(a+=(h+v)*(m=u*v-f*h),s+=m),u<r[0]&&(r[0]=u),u>r[1]&&(r[1]=u),d<r[2]&&(r[2]=d),d>r[3]&&(r[3]=d),t&&(h<r[4]&&(r[4]=h),h>r[5]&&(r[5]=h))}if(o>0&&(o*=-1),s>0&&(s*=-1),!o)return null;var g=[i,n,.5*o];return t&&(g[3]=a,g[4]=.5*s),g}},,function(e,t,r){"use strict";r.d(t,"a",(function(){return s}));var i,n,a=r(120),o=r(119);function s(e,t){t.linearDepth?e.vertex.code.add(Object(o.a)(i||(i=Object(a.a)(["\n    vec4 transformPositionWithDepth(mat4 proj, mat4 view, vec3 pos, vec2 nearFar, out float depth) {\n      vec4 eye = view * vec4(pos, 1.0);\n      depth = (-eye.z - nearFar[0]) / (nearFar[1] - nearFar[0]) ;\n      return proj * eye;\n    }\n    "])))):e.vertex.code.add(Object(o.a)(n||(n=Object(a.a)(["\n    vec4 transformPosition(mat4 proj, mat4 view, vec3 pos) {\n      // Make sure the order of operations is the same as in transformPositionWithDepth.\n      return proj * (view * vec4(pos, 1.0));\n    }\n    "]))))}},function(e,t,r){"use strict";r.d(t,"a",(function(){return O})),r.d(t,"b",(function(){return y})),r.d(t,"c",(function(){return N})),r.d(t,"d",(function(){return D})),r.d(t,"e",(function(){return g})),r.d(t,"f",(function(){return m})),r.d(t,"g",(function(){return b})),r.d(t,"h",(function(){return v}));var i=r(7),n=r(80),a=r(89),o=r(109),s=r(105),c=r(527),l=r(138),u=r(201),d=r(104),h=r(422),p=/\/resource\/(.*?)\.svg$/,f=new o.a("white");function b(e){if(!e)return 0;if(Object(l.c)(e)){var t=function(e){var t=e.symbolLayers&&e.symbolLayers.length;if(t){var r=e.symbolLayers.getItemAt(t-1);return"outline"in r?Object(a.i)(r,"outline","size"):void 0}}(e);return Object(a.k)(t)?t:0}var r=Object(h.d)(e);return r&&Object(s.i)(r.width)||0}function v(e){if(!e||!e.symbolLayers)return!1;switch(e.type){case"point-3d":return e.symbolLayers.some((e=>"object"===e.type));case"line-3d":return e.symbolLayers.some((e=>"path"===e.type));case"polygon-3d":return e.symbolLayers.some((e=>"object"===e.type||"extrude"===e.type));default:return!1}}function m(e,t){var r=t.resource.href;return!Object(n.a)("esri-canvas-svg-support")&&e.styleOrigin&&p.test(r)?r.replace(p,"/resource/png/$1.png"):r}function g(e,t){if(!e)return null;var r=null;return Object(l.c)(e)?r=function(e){var t=e.symbolLayers;if(!t)return null;var r=null;return t.forEach((e=>{"object"===e.type&&null!=e.resource.href||(r="water"===e.type?Object(a.q)(e.color):Object(a.k)(e.material)?Object(a.q)(e.material.color):null)})),r?new o.a(r):null}(e):Object(l.b)(e)&&(r=e.color?new o.a(e.color):null),r?y(r,t):null}function y(e,t){if(null==t)return e;var r=e.toRgba();return r[3]=r[3]*t,new o.a(r)}function O(e,t,r){e&&(t||null!=r)&&(t&&(t=new o.a(t)),Object(l.c)(e)?function(e,t,r){var i=e.symbolLayers;if(i){var n=e=>{var i=Object(a.k)(e)?e:null;return y(t=t||i||null!=r&&f,r)};i.forEach((e=>{if("object"!==e.type||null==e.resource.href||t)if("water"===e.type)e.color=n(e.color);else{var i=Object(a.k)(e.material)?e.material.color:null,o=n(i);Object(a.j)(e.material)?e.material=new c.a({color:o}):e.material.color=o,null!=r&&"outline"in e&&Object(a.k)(e.outline)&&Object(a.k)(e.outline.color)&&(e.outline.color=y(e.outline.color,r))}}))}}(e,t,r):Object(l.b)(e)&&function(e,t,r){(t=t||e.color)&&(e.color=y(t,r)),null!=r&&"outline"in e&&e.outline&&e.outline.color&&(e.outline.color=y(e.outline.color,r))}(e,t,r))}function j(e,t){return _.apply(this,arguments)}function _(){return(_=Object(i.a)((function*(e,t){var r=e.symbolLayers;r&&(yield Object(u.a)(r,function(){var e=Object(i.a)((function*(e){return w(e,t)}));return function(t){return e.apply(this,arguments)}}()))}))).apply(this,arguments)}function w(e,t){return x.apply(this,arguments)}function x(){return(x=Object(i.a)((function*(e,t){switch(e.type){case"extrude":T(e,t);break;case"icon":case"line":case"text":S(e,t);break;case"path":C(e,t);break;case"object":yield P(e,t)}}))).apply(this,arguments)}function S(e,t){var r=M(t);Object(a.k)(r)&&(e.size=r)}function M(e){for(var t of e)if("number"==typeof t)return t;return null}function T(e,t){e.size="number"==typeof t[2]?t[2]:0}function P(e,t){return E.apply(this,arguments)}function E(){return(E=Object(i.a)((function*(e,t){var{resourceSize:r,symbolSize:i}=yield I(e),n=A(t,r,i);e.width=F(t[0],i[0],r[0],n),e.depth=F(t[1],i[1],r[1],n),e.height=F(t[2],i[2],r[2],n)}))).apply(this,arguments)}function C(e,t){var r=A(t,d.a,[e.width,void 0,e.height]);e.width=F(t[0],e.width,1,r),e.height=F(t[2],e.height,1,r)}function A(e,t,r){for(var i=0;i<3;i++){var n=e[i];switch(n){case"symbol-value":return null!=r[i]?r[i]/t[i]:1;case"proportional":break;default:if(n&&t[i])return n/t[i]}}return 1}function I(e){return k.apply(this,arguments)}function k(){return(k=Object(i.a)((function*(e){for(var t=yield r.e(199).then(r.bind(null,655)),i=yield t.computeObjectLayerResourceSize(e,10),{width:n,height:a,depth:o}=e,s=[n,o,a],c=1,l=0;l<3;l++)if(null!=s[l]){c=s[l]/i[l];break}for(var u=0;u<3;u++)null==s[u]&&(s[u]=i[u]*c);return{resourceSize:i,symbolSize:s}}))).apply(this,arguments)}function F(e,t,r,i){switch(e){case"proportional":return r*i;case"symbol-value":return null!=t?t:r;default:return e}}function R(e,t){var r=M(t);if(!Object(a.j)(r))switch(e.type){case"simple-marker":e.size=r;break;case"picture-marker":var i=e.width/e.height;i>1?(e.width=r,e.height=r*i):(e.width=r*i,e.height=r);break;case"simple-line":e.width=r;break;case"text":e.font.size=r}}function D(e,t){return L.apply(this,arguments)}function L(){return(L=Object(i.a)((function*(e,t){if(e&&t)return Object(l.c)(e)?j(e,t):void(Object(l.b)(e)&&R(e,t))}))).apply(this,arguments)}function N(e,t,r){if(e&&null!=t)if(Object(l.c)(e)){var i=e.symbolLayers;i&&i.forEach((e=>{if(e&&"object"===e.type)switch(r){case"tilt":e.tilt=t;break;case"roll":e.roll=t;break;default:e.heading=t}}))}else Object(l.b)(e)&&("simple-marker"!==e.type&&"picture-marker"!==e.type&&"text"!==e.type||(e.angle=t))}},,function(e,t,r){"use strict";r.d(t,"a",(function(){return i}));r(80),r(89);function i(e,t){return!!n(e.spatialReference,t.spatialReference)&&e.x===t.x&&e.y===t.y&&e.z===t.z&&e.m===t.m}function n(e,t){return e===t||e&&t&&e.equals(t)}},function(e,t,r){"use strict";r.d(t,"a",(function(){return o}));var i,n=r(120),a=r(119);function o(e){e.code.add(Object(a.a)(i||(i=Object(n.a)(["\n    // This is the maximum float value representable as 32bit fixed point,\n    // it is rgba2float(vec4(1)) inlined.\n    const float MAX_RGBA_FLOAT =\n      255.0 / 256.0 +\n      255.0 / 256.0 / 256.0 +\n      255.0 / 256.0 / 256.0 / 256.0 +\n      255.0 / 256.0 / 256.0 / 256.0 / 256.0;\n\n    // Factors to convert to fixed point, i.e. factors (256^0, 256^1, 256^2, 256^3)\n    const vec4 FIXED_POINT_FACTORS = vec4(1.0, 256.0, 256.0 * 256.0, 256.0 * 256.0 * 256.0);\n\n    vec4 float2rgba(const float value) {\n      // Make sure value is in the domain we can represent\n      float valueInValidDomain = clamp(value, 0.0, MAX_RGBA_FLOAT);\n\n      // Decompose value in 32bit fixed point parts represented as\n      // uint8 rgba components. Decomposition uses the fractional part after multiplying\n      // by a power of 256 (this removes the bits that are represented in the previous\n      // component) and then converts the fractional part to 8bits.\n      vec4 fixedPointU8 = floor(fract(valueInValidDomain * FIXED_POINT_FACTORS) * 256.0);\n\n      // Convert uint8 values (from 0 to 255) to floating point representation for\n      // the shader\n      const float toU8AsFloat = 1.0 / 255.0;\n\n      return fixedPointU8 * toU8AsFloat;\n    }\n\n    // Factors to convert rgba back to float\n    const vec4 RGBA_2_FLOAT_FACTORS = vec4(\n      255.0 / (256.0),\n      255.0 / (256.0 * 256.0),\n      255.0 / (256.0 * 256.0 * 256.0),\n      255.0 / (256.0 * 256.0 * 256.0 * 256.0)\n    );\n\n    float rgba2float(vec4 rgba) {\n      // Convert components from 0->1 back to 0->255 and then\n      // add the components together with their corresponding\n      // fixed point factors, i.e. (256^1, 256^2, 256^3, 256^4)\n      return dot(rgba, RGBA_2_FLOAT_FACTORS);\n    }\n  "]))))}},,,,,function(e,t,r){"use strict";r.d(t,"a",(function(){return m})),r.d(t,"b",(function(){return p})),r.d(t,"c",(function(){return f})),r.d(t,"d",(function(){return b}));var i=r(109),n=r(105),a=r(106),o=r(162),s=r(403),c=r(423),l="picture-fill",u="simple-fill",d="simple-marker",h=new s.a(1e3);function p(e){var t=e.style,r=null;if(e)switch(e.type){case d:"cross"!==t&&"x"!==t&&(r=e.color);break;case u:"solid"===t?r=e.color:"none"!==t&&(r={type:"pattern",x:0,y:0,src:Object(o.a)("esri/symbols/patterns/".concat(t,".png")),width:5,height:5});break;case l:r={type:"pattern",src:e.url,width:Object(n.h)(e.width)*e.xscale,height:Object(n.h)(e.height)*e.yscale,x:Object(n.h)(e.xoffset),y:Object(n.h)(e.yoffset)};break;case"text":r=e.color;break;case"cim":r=Object(c.b)(e)}return r}function f(e,t){var r=e+"-"+t;return void 0!==h.get(r)?Promise.resolve(h.get(r)):Object(a.default)(e,{responseType:"image"}).then((e=>{var i=e.data,n=i.naturalWidth,a=i.naturalHeight,o=document.createElement("canvas");o.width=n,o.height=a;var s=o.getContext("2d");s.fillStyle=t,s.fillRect(0,0,n,a),s.globalCompositeOperation="destination-in",s.drawImage(i,0,0);var c=o.toDataURL();return h.put(r,c),c}))}function b(e){if(!e)return null;var t;switch(e.type){case u:case l:case d:t=b(e.outline);break;case"simple-line":var r=Object(n.h)(e.width);"none"!==e.style&&0!==r&&(t={color:e.color,style:v(e.style),width:r,cap:e.cap,join:"miter"===e.join?Object(n.h)(e.miterLimit):e.join});break;default:t=null}return t}var v=function(){var e={};return function(t){if(e[t])return e[t];var r=t.replace(/-/g,"");return e[t]=r,r}}(),m=new i.a([128,128,128])},function(e,t,r){"use strict";r.d(t,"a",(function(){return f})),r.d(t,"b",(function(){return d})),r.d(t,"c",(function(){return o})),r.d(t,"d",(function(){return l})),r.d(t,"e",(function(){return s}));var i=r(91),n=r(109),a=r(320);function o(e){var t=Object(a.k)(e);if("CIMTextSymbol"===t.type)return t.height;var r=0;if(t.symbolLayers)for(var i of t.symbolLayers)Object(a.g)(i)&&i.size>r?r=i.size:Object(a.i)(i)&&i.width>r?r=i.width:Object(a.f)(i);return r}function s(e,t,r){var i=Object(a.k)(e),n=o(e);0!==n?c(i,t/n,!1,r):function(e,t){if("CIMTextSymbol"!==e.type){if(e.symbolLayers)for(var r of e.symbolLayers)switch(r.type){case"CIMPictureMarker":case"CIMVectorMarker":r.size=t;break;case"CIMPictureStroke":case"CIMSolidStroke":r.width=t}}else e.height=t}(i,t)}function c(e,t,r,n){if("CIMTextSymbol"!==e.type){if(r&&e.effects)for(var a of e.effects)u(a,t);if(e.symbolLayers)for(var o of e.symbolLayers)switch(o.type){case"CIMPictureMarker":case"CIMVectorMarker":l(o,t,n);break;case"CIMPictureStroke":case"CIMSolidStroke":null!=n&&n.preserveOutlineWidth||(o.width*=t);break;case"CIMPictureFill":o.height*=t,o.offsetX*=t,o.offsetY*=t;break;case"CIMHatchFill":c(o.lineSymbol,t,!0,Object(i.a)(Object(i.a)({},n),{},{preserveOutlineWidth:!1})),o.offsetX*=t,o.offsetY*=t,o.separation*=t}}else e.height*=t}function l(e,t,r){if(e.markerPlacement&&function(e,t){switch(Object(a.h)(e)&&(e.offset*=t),e.type){case"CIMMarkerPlacementAlongLineRandomSize":case"CIMMarkerPlacementAlongLineSameSize":if(e.customEndingOffset*=t,e.offsetAlongLine*=t,e.placementTemplate&&e.placementTemplate.length){var r=e.placementTemplate.map((e=>e*t));e.placementTemplate=r}break;case"CIMMarkerPlacementAlongLineVariableSize":if(e.maxRandomOffset*=t,e.placementTemplate&&e.placementTemplate.length){var i=e.placementTemplate.map((e=>e*t));e.placementTemplate=i}break;case"CIMMarkerPlacementOnLine":e.startPointOffset*=t;break;case"CIMMarkerPlacementAtExtremities":e.offsetAlongLine*=t;break;case"CIMMarkerPlacementAtMeasuredUnits":case"CIMMarkerPlacementOnVertices":break;case"CIMMarkerPlacementAtRatioPositions":e.beginPosition*=t,e.endPosition*=t;break;case"CIMMarkerPlacementPolygonCenter":e.offsetX*=t,e.offsetY*=t;break;case"CIMMarkerPlacementInsidePolygon":e.offsetX*=t,e.offsetY*=t,e.stepX*=t,e.stepY*=t}}(e.markerPlacement,t),e.offsetX*=t,e.offsetY*=t,e.anchorPoint&&"Absolute"===e.anchorPointUnits&&(e.anchorPoint={x:e.anchorPoint.x*t,y:e.anchorPoint.y*t}),e.size*=t,"CIMVectorMarker"===e.type&&e.markerGraphics)for(var i of e.markerGraphics)e.scaleSymbolsProportionally||c(i.symbol,t,!0,r)}function u(e,t){switch(e.type){case"CIMGeometricEffectArrow":case"CIMGeometricEffectDonut":e.width*=t;break;case"CIMGeometricEffectBuffer":e.size*=t;break;case"CIMGeometricEffectCut":e.beginCut*=t,e.endCut*=t,e.middleCut*=t;break;case"CIMGeometricEffectDashes":if(e.customEndingOffset*=t,e.offsetAlongLine*=t,e.dashTemplate&&e.dashTemplate.length){var r=e.dashTemplate.map((e=>e*t));e.dashTemplate=r}break;case"CIMGeometricEffectExtension":case"CIMGeometricEffectJog":case"CIMGeometricEffectRadial":e.length*=t;break;case"CIMGeometricEffectMove":e.offsetX*=t,e.offsetY*=t;break;case"CIMGeometricEffectOffset":case"CIMGeometricEffectOffsetTangent":e.offset*=t;break;case"CIMGeometricEffectRegularPolygon":e.radius*=t;break;case"CIMGeometricEffectTaperedPolygon":e.fromWidth*=t,e.length*=t,e.toWidth*=t;break;case"CIMGeometricEffectWave":e.amplitude*=t,e.period*=t}}function d(e){var t=[];return h(Object(a.k)(e),t),t.length?new n.a(Object(a.e)(t[0])):null}function h(e,t){var r;r="CIMTextSymbol"===e.type?e.symbol:e;var i="CIMPolygonSymbol"===e.type;if(r.symbolLayers)for(var n of r.symbolLayers)if(!(n.colorLocked||i&&(Object(a.i)(n)||Object(a.g)(n)&&n.markerPlacement&&Object(a.h)(n.markerPlacement))))switch(n.type){case"CIMPictureMarker":case"CIMPictureStroke":case"CIMPictureFill":break;case"CIMVectorMarker":n.markerGraphics.forEach((e=>{h(e.symbol,t)}));break;case"CIMSolidStroke":case"CIMSolidFill":p(t,n.color);break;case"CIMHatchFill":h(n.lineSymbol,t)}}function p(e,t){for(var r of e)if(r.join(".")===t.join("."))return;e.push(t)}function f(e,t){t instanceof n.a||(t=new n.a(t)),b(Object(a.k)(e),t)}function b(e,t){var r;r="CIMTextSymbol"===e.type?e.symbol:e;var i="CIMPolygonSymbol"===e.type;if(r.symbolLayers)for(var n of r.symbolLayers)if(!n.colorLocked&&(!i||!(Object(a.i)(n)||Object(a.g)(n)&&n.markerPlacement&&Object(a.h)(n.markerPlacement)))){var o=t.toArray(0);switch(n.type){case"CIMPictureMarker":case"CIMPictureStroke":case"CIMPictureFill":break;case"CIMVectorMarker":n.markerGraphics.forEach((e=>{b(e.symbol,t)}));break;case"CIMSolidStroke":case"CIMSolidFill":n.color=o;break;case"CIMHatchFill":b(n.lineSymbol,t)}}}},function(e,t,r){"use strict";r.d(t,"a",(function(){return c})),r.d(t,"b",(function(){return d})),r.d(t,"c",(function(){return u})),r.d(t,"d",(function(){return v})),r.d(t,"e",(function(){return h}));var i=r(110),n=r(104),a=r(111),o=r(299),s=r(177);function c(e){return e?{origin:Object(n.d)(e.origin),vector:Object(n.d)(e.vector)}:{origin:Object(n.e)(),vector:Object(n.e)()}}function l(e,t){var r=b.get();return r.origin=e,r.vector=t,r}function u(e,t,r=c()){return Object(a.j)(r.origin,e),Object(a.j)(r.vector,t),r}function d(e,t){var r=Object(a.i)(s.d.get(),t,e.origin),n=Object(a.g)(e.vector,r),o=Object(a.g)(e.vector,e.vector),c=Object(i.d)(n/o,0,1),l=Object(a.i)(s.d.get(),Object(a.d)(s.d.get(),e.vector,c),r);return Object(a.g)(l,l)}function h(e,t,r,n,o){var{vector:c,origin:l}=e,u=Object(a.i)(s.d.get(),t,l),d=Object(a.g)(c,u)/Object(a.r)(c);return Object(a.d)(o,c,Object(i.d)(d,r,n)),Object(a.e)(o,o,e.origin)}function p(e,t,r,n){var o=1e-6,c=e.origin,l=Object(a.e)(s.d.get(),c,e.vector),u=t.origin,d=Object(a.e)(s.d.get(),u,t.vector),h=s.d.get(),p=s.d.get();if(h[0]=c[0]-u[0],h[1]=c[1]-u[1],h[2]=c[2]-u[2],p[0]=d[0]-u[0],p[1]=d[1]-u[1],p[2]=d[2]-u[2],Math.abs(p[0])<o&&Math.abs(p[1])<o&&Math.abs(p[2])<o)return!1;var f=s.d.get();if(f[0]=l[0]-c[0],f[1]=l[1]-c[1],f[2]=l[2]-c[2],Math.abs(f[0])<o&&Math.abs(f[1])<o&&Math.abs(f[2])<o)return!1;var b=h[0]*p[0]+h[1]*p[1]+h[2]*p[2],v=p[0]*f[0]+p[1]*f[1]+p[2]*f[2],m=h[0]*f[0]+h[1]*f[1]+h[2]*f[2],g=p[0]*p[0]+p[1]*p[1]+p[2]*p[2],y=(f[0]*f[0]+f[1]*f[1]+f[2]*f[2])*g-v*v;if(Math.abs(y)<o)return!1;var O=(b*v-m*g)/y,j=(b+v*O)/g;r&&(O=Object(i.d)(O,0,1),j=Object(i.d)(j,0,1));var _=s.d.get(),w=s.d.get();return _[0]=c[0]+O*f[0],_[1]=c[1]+O*f[1],_[2]=c[2]+O*f[2],w[0]=u[0]+j*p[0],w[1]=u[1]+j*p[1],w[2]=u[2]+j*p[2],n.tA=O,n.tB=j,n.pA=_,n.pB=w,n.distance2=Object(a.k)(_,w),!0}var f={tA:0,tB:0,pA:Object(n.e)(),pB:Object(n.e)(),distance2:0},b=new o.a((()=>({origin:null,vector:null}))),v=Object.freeze({__proto__:null,create:c,wrap:l,copy:function(e,t=c()){return u(e.origin,e.vector,t)},fromValues:u,fromPoints:function(e,t,r=c()){return Object(a.j)(r.origin,e),Object(a.i)(r.vector,t,e),r},distance2:d,distance:function(e,t){return Math.sqrt(d(e,t))},projectPoint:function(e,t,r){return h(e,t,0,1,r)},pointAt:function(e,t,r){return Object(a.e)(r,e.origin,Object(a.d)(r,e.vector,t))},projectPointClamp:h,closestRayDistance2:function(e,t){if(p(e,l(t.origin,t.direction),!1,f)){var{tA:r,pB:i,distance2:n}=f;if(r>=0&&r<=1)return n;if(r<0)return Object(a.k)(e.origin,i);if(r>1)return Object(a.k)(Object(a.e)(s.d.get(),e.origin,e.vector),i)}return null},closestLineSegmentPoint:function(e,t,r){return!!p(e,t,!0,f)&&(Object(a.j)(r,f.pA),!0)},closestLineSegmentDistance2:function(e,t){return p(e,t,!0,f)?f.distance2:null}})},function(e,t,r){"use strict";r.d(t,"a",(function(){return d})),r.d(t,"b",(function(){return h})),r.d(t,"c",(function(){return l})),r.d(t,"d",(function(){return S})),r.d(t,"e",(function(){return M})),r.d(t,"f",(function(){return w})),r.d(t,"g",(function(){return P})),r.d(t,"h",(function(){return N})),r.d(t,"i",(function(){return x})),r.d(t,"j",(function(){return f})),r.d(t,"k",(function(){return T})),r.d(t,"l",(function(){return A})),r.d(t,"m",(function(){return F})),r.d(t,"n",(function(){return D})),r.d(t,"o",(function(){return E})),r.d(t,"p",(function(){return I})),r.d(t,"q",(function(){return C})),r.d(t,"r",(function(){return _})),r.d(t,"s",(function(){return u}));var i=r(89),n=r(110),a=r(104),o=r(111),s=r(177),c=r(398);function l(e=L){return[e[0],e[1],e[2],e[3]]}function u(e,t,r,i){return h(e,t,r,i,s.e.get())}function d(e,t=l()){return h(e[0],e[1],e[2],e[3],t)}function h(e,t,r,i,n=l()){return n[0]=e,n[1]=t,n[2]=r,n[3]=i,n}function p(e,t,r=l()){Object(o.j)(r,t);var i=Object(o.g)(t,t);return Math.abs(i-1)>1e-5&&i>1e-12&&Object(o.d)(r,r,1/Math.sqrt(i)),_(r,e,r),r}function f(e,t,r,i=l()){return w(Object(o.i)(s.d.get(),e,t),Object(o.i)(s.d.get(),r,t),e,i)}function b(e,t,r,i,n){if(e.count<3)return!1;e.getVec(r,m);for(var a=i,s=!1;a<e.count-1&&!s;)e.getVec(a,g),a++,s=!Object(o.p)(m,g);if(!s)return!1;for(a=Math.max(a,n),s=!1;a<e.count&&!s;)e.getVec(a,y),a++,Object(o.i)(O,m,g),Object(o.q)(O,O),Object(o.i)(j,g,y),Object(o.q)(j,j),s=!Object(o.p)(m,y)&&!Object(o.p)(g,y)&&Math.abs(Object(o.g)(O,j))<v;return s?(f(m,g,y,t),!0):(0!==r||1!==i||2!==n)&&b(e,t,0,1,2)}var v=.99619469809,m=Object(a.e)(),g=Object(a.e)(),y=Object(a.e)(),O=Object(a.e)(),j=Object(a.e)();function _(e,t,r){return e!==r&&d(e,r),r[3]=-Object(o.g)(r,t),r}function w(e,t,r,i=l()){return p(r,Object(o.f)(s.d.get(),t,e),i)}function x(e,t,r){return!!Object(i.k)(t)&&R(e,t.origin,t.direction,!0,!1,r)}function S(e,t,r){return R(e,t.origin,t.vector,!1,!1,r)}function M(e,t,r){return R(e,t.origin,t.vector,!1,!0,r)}function T(e,t){return F(e,Object(c.c)(t))-t[3]>=0}function P(e,t){return F(e,t)>=0}function E(e,t){var r=t[0],i=t[1],n=t[2],a=t[3],o=t[4],s=t[5];return e[0]*(e[0]>0?r:a)+e[1]*(e[1]>0?i:o)+e[2]*(e[2]>0?n:s)+e[3]>=0}function C(e,t){var r=Object(o.g)(e,t.ray.direction),i=-F(e,t.ray.origin);if(i<0&&r>=0)return!1;if(r>-1e-6&&r<1e-6)return i>0;if((i<0||r<0)&&!(i<0&&r<0))return!0;var n=i/r;return r>0?n<t.c1&&(t.c1=n):n>t.c0&&(t.c0=n),t.c0<=t.c1}function A(e,t){var r=Object(o.g)(e,t.ray.direction),i=-F(e,t.ray.origin);if(r>-1e-6&&r<1e-6)return i>0;var n=i/r;return r>0?n<t.c1&&(t.c1=n):n>t.c0&&(t.c0=n),t.c0<=t.c1}function I(e,t,r){var i=Object(o.d)(s.d.get(),e,-e[3]),n=k(e,Object(o.i)(s.d.get(),t,i),s.d.get());return Object(o.e)(r,n,i),r}function k(e,t,r){var i=Object(o.d)(s.d.get(),e,Object(o.g)(e,t));return Object(o.i)(r,t,i),r}function F(e,t){return Object(o.g)(e,t)+e[3]}function R(e,t,r,i,a,s){var c=Object(o.g)(e,r);if(0===c)return!1;var l=-(Object(o.g)(e,t)+e[3])/c;return a&&(l=i?Math.max(0,l):Object(n.d)(l,0,1)),!(l<0||!i&&l>1)&&(Object(o.e)(s,t,Object(o.d)(s,r,l)),!0)}function D(e){return e}var L=[0,0,1,0],N=Object.freeze({__proto__:null,create:l,wrap:u,copy:d,fromValues:h,fromNormalAndOffset:function(e,t,r=l()){return Object(o.j)(r,e),r[3]=t,r},fromPositionAndNormal:p,fromPoints:f,fromManyPoints:function(e,t){return b(e,t,0,1,2)},fromManyPointsSampleAt:b,setOffsetFromPoint:_,negate:function(e,t){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=-e[3],t},fromVectorsAndPoint:w,intersectRay:x,intersectLineSegment:S,intersectLineSegmentClamp:M,isSphereFullyInside:T,isSphereFullyOutside:function(e,t){return F(e,Object(c.c)(t))+t[3]<0},isPointInside:P,isPointOutside:function(e,t){return F(e,t)<0},isAABBFullyInside:E,clip:C,clipInfinite:A,projectPoint:I,projectVector:k,distance:function(e,t){return Math.abs(F(e,t))},signedDistance:F,normal:D,UP:L})},function(e,t,r){"use strict";r.d(t,"a",(function(){return h}));var i,n,a,o,s,c,l,u=r(120),d=r(119);function h(e,t){t.vvInstancingEnabled&&(t.vvSize||t.vvColor)&&e.attributes.add("instanceFeatureAttribute","vec4"),t.vvSize?(e.vertex.uniforms.add("vvSizeMinSize","vec3"),e.vertex.uniforms.add("vvSizeMaxSize","vec3"),e.vertex.uniforms.add("vvSizeOffset","vec3"),e.vertex.uniforms.add("vvSizeFactor","vec3"),e.vertex.uniforms.add("vvSymbolRotationMatrix","mat3"),e.vertex.uniforms.add("vvSymbolAnchor","vec3"),e.vertex.code.add(Object(d.a)(i||(i=Object(u.a)(["\n      vec3 vvScale(vec4 _featureAttribute) {\n        return clamp(vvSizeOffset + _featureAttribute.x * vvSizeFactor, vvSizeMinSize, vvSizeMaxSize);\n      }\n\n      vec4 vvTransformPosition(vec3 position, vec4 _featureAttribute) {\n        return vec4(vvSymbolRotationMatrix * ( vvScale(_featureAttribute) * (position + vvSymbolAnchor)), 1.0);\n      }\n    "])))),e.vertex.code.add(Object(d.a)(n||(n=Object(u.a)(["\n      const float eps = 1.192092896e-07;\n      vec4 vvTransformNormal(vec3 _normal, vec4 _featureAttribute) {\n        vec3 vvScale = clamp(vvSizeOffset + _featureAttribute.x * vvSizeFactor, vvSizeMinSize + eps, vvSizeMaxSize);\n        return vec4(vvSymbolRotationMatrix * _normal / vvScale, 1.0);\n      }\n\n      ","\n    "])),t.vvInstancingEnabled?Object(d.a)(a||(a=Object(u.a)(["\n      vec4 vvLocalNormal(vec3 _normal) {\n        return vvTransformNormal(_normal, instanceFeatureAttribute);\n      }\n\n      vec4 localPosition() {\n        return vvTransformPosition(position, instanceFeatureAttribute);\n      }"]))):""))):e.vertex.code.add(Object(d.a)(o||(o=Object(u.a)(["\n      vec4 localPosition() { return vec4(position, 1.0); }\n\n      vec4 vvLocalNormal(vec3 _normal) { return vec4(_normal, 1.0); }\n    "])))),t.vvColor?(e.vertex.constants.add("vvColorNumber","int",8),e.vertex.code.add(Object(d.a)(s||(s=Object(u.a)(["\n      uniform float vvColorValues[vvColorNumber];\n      uniform vec4 vvColorColors[vvColorNumber];\n\n      vec4 vvGetColor(vec4 featureAttribute, float values[vvColorNumber], vec4 colors[vvColorNumber]) {\n        float value = featureAttribute.y;\n        if (value <= values[0]) {\n          return colors[0];\n        }\n\n        for (int i = 1; i < vvColorNumber; ++i) {\n          if (values[i] >= value) {\n            float f = (value - values[i-1]) / (values[i] - values[i-1]);\n            return mix(colors[i-1], colors[i], f);\n          }\n        }\n        return colors[vvColorNumber - 1];\n      }\n\n      ","\n    "])),t.vvInstancingEnabled?Object(d.a)(c||(c=Object(u.a)(["\n      vec4 vvColor() {\n        return vvGetColor(instanceFeatureAttribute, vvColorValues, vvColorColors);\n      }"]))):""))):e.vertex.code.add(Object(d.a)(l||(l=Object(u.a)(["\n      vec4 vvColor() { return vec4(1.0); }\n    "]))))}!function(e){function t(e,t){t.vvSizeEnabled&&(e.setUniform3fv("vvSizeMinSize",t.vvSizeMinSize),e.setUniform3fv("vvSizeMaxSize",t.vvSizeMaxSize),e.setUniform3fv("vvSizeOffset",t.vvSizeOffset),e.setUniform3fv("vvSizeFactor",t.vvSizeFactor)),t.vvColorEnabled&&(e.setUniform1fv("vvColorValues",t.vvColorValues),e.setUniform4fv("vvColorColors",t.vvColorColors))}e.bindUniforms=t,e.bindUniformsWithOpacity=function(e,r){t(e,r),r.vvOpacityEnabled&&(e.setUniform1fv("vvOpacityValues",r.vvOpacityValues),e.setUniform1fv("vvOpacityOpacities",r.vvOpacityOpacities))},e.bindUniformsForSymbols=function(e,r){t(e,r),r.vvSizeEnabled&&(e.setUniform3fv("vvSymbolAnchor",r.vvSymbolAnchor),e.setUniformMatrix3fv("vvSymbolRotationMatrix",r.vvSymbolRotationMatrix))}}(h||(h={}))},,,,,,,,function(e,t,r){"use strict";r.d(t,"a",(function(){return h})),r.d(t,"b",(function(){return O})),r.d(t,"c",(function(){return z})),r.d(t,"d",(function(){return H})),r.d(t,"e",(function(){return D})),r.d(t,"f",(function(){return v})),r.d(t,"g",(function(){return m})),r.d(t,"h",(function(){return g})),r.d(t,"i",(function(){return y})),r.d(t,"j",(function(){return P})),r.d(t,"k",(function(){return I})),r.d(t,"l",(function(){return x})),r.d(t,"m",(function(){return p})),r.d(t,"n",(function(){return j})),r.d(t,"o",(function(){return G})),r.d(t,"p",(function(){return B})),r.d(t,"q",(function(){return L})),r.d(t,"r",(function(){return E})),r.d(t,"s",(function(){return k})),r.d(t,"t",(function(){return S})),r.d(t,"u",(function(){return f})),r.d(t,"v",(function(){return _})),r.d(t,"w",(function(){return U})),r.d(t,"x",(function(){return W})),r.d(t,"y",(function(){return N})),r.d(t,"z",(function(){return C})),r.d(t,"A",(function(){return F})),r.d(t,"B",(function(){return M})),r.d(t,"C",(function(){return b})),r.d(t,"D",(function(){return w})),r.d(t,"E",(function(){return q})),r.d(t,"F",(function(){return J})),r.d(t,"G",(function(){return V})),r.d(t,"H",(function(){return A})),r.d(t,"I",(function(){return R})),r.d(t,"J",(function(){return T}));class i{constructor(e,t,r=0,i,n){this.TypedArrayConstructor=e,this.elementCount=9;var a=this.TypedArrayConstructor;void 0===i&&(i=9*a.BYTES_PER_ELEMENT);var o=0===t.byteLength?0:r;this.typedBuffer=null==n?new a(t,o):new a(t,o,(n-r)/a.BYTES_PER_ELEMENT),this.typedBufferStride=i/a.BYTES_PER_ELEMENT,this.count=Math.ceil(this.typedBuffer.length/this.typedBufferStride),this.stride=this.typedBufferStride*this.TypedArrayConstructor.BYTES_PER_ELEMENT}getMat(e,t){for(var r=e*this.typedBufferStride,i=0;i<9;i++)t[i]=this.typedBuffer[r+i];return t}setMat(e,t){for(var r=e*this.typedBufferStride,i=0;i<9;i++)this.typedBuffer[r+i]=t[i]}get(e,t){return this.typedBuffer[e*this.typedBufferStride+t]}set(e,t,r){this.typedBuffer[e*this.typedBufferStride+t]=r}copyFrom(e,t,r){for(var i=this.typedBuffer,n=t.typedBuffer,a=e*this.typedBufferStride,o=r*t.typedBufferStride,s=0;s<9;++s)i[a+s]=n[o+s]}get buffer(){return this.typedBuffer.buffer}}i.ElementCount=9;class n{constructor(e,t,r=0,i,n){this.TypedArrayConstructor=e,this.elementCount=16;var a=this.TypedArrayConstructor;void 0===i&&(i=16*a.BYTES_PER_ELEMENT);var o=0===t.byteLength?0:r;this.typedBuffer=null==n?new a(t,o):new a(t,o,(n-r)/a.BYTES_PER_ELEMENT),this.typedBufferStride=i/a.BYTES_PER_ELEMENT,this.count=Math.ceil(this.typedBuffer.length/this.typedBufferStride),this.stride=this.typedBufferStride*this.TypedArrayConstructor.BYTES_PER_ELEMENT}getMat(e,t){for(var r=e*this.typedBufferStride,i=0;i<16;i++)t[i]=this.typedBuffer[r+i];return t}setMat(e,t){for(var r=e*this.typedBufferStride,i=0;i<16;i++)this.typedBuffer[r+i]=t[i]}get(e,t){return this.typedBuffer[e*this.typedBufferStride+t]}set(e,t,r){this.typedBuffer[e*this.typedBufferStride+t]=r}copyFrom(e,t,r){for(var i=this.typedBuffer,n=t.typedBuffer,a=e*this.typedBufferStride,o=r*t.typedBufferStride,s=0;s<16;++s)i[a+s]=n[o+s]}get buffer(){return this.typedBuffer.buffer}}n.ElementCount=16;class a{constructor(e,t,r=0,i,n){this.TypedArrayConstructor=e,this.elementCount=1;var a=this.TypedArrayConstructor;void 0===i&&(i=a.BYTES_PER_ELEMENT);var o=0===t.byteLength?0:r;this.typedBuffer=null==n?new a(t,o):new a(t,o,(n-r)/a.BYTES_PER_ELEMENT),this.typedBufferStride=i/a.BYTES_PER_ELEMENT,this.count=Math.ceil(this.typedBuffer.length/this.typedBufferStride),this.stride=this.typedBufferStride*this.TypedArrayConstructor.BYTES_PER_ELEMENT}get(e){return this.typedBuffer[e*this.typedBufferStride]}set(e,t){this.typedBuffer[e*this.typedBufferStride]=t}get buffer(){return this.typedBuffer.buffer}}a.ElementCount=1;var o=r(135);class s{constructor(e,t,r=0,i,n){this.TypedArrayConstructor=e,this.elementCount=2;var a=this.TypedArrayConstructor;void 0===i&&(i=2*a.BYTES_PER_ELEMENT);var o=0===t.byteLength?0:r;this.typedBuffer=null==n?new a(t,o):new a(t,o,(n-r)/a.BYTES_PER_ELEMENT),this.typedBufferStride=i/a.BYTES_PER_ELEMENT,this.count=Math.ceil(this.typedBuffer.length/this.typedBufferStride),this.stride=this.typedBufferStride*this.TypedArrayConstructor.BYTES_PER_ELEMENT}getVec(e,t){return Object(o.r)(t,this.typedBuffer[e*this.typedBufferStride],this.typedBuffer[e*this.typedBufferStride+1])}setVec(e,t){this.typedBuffer[e*this.typedBufferStride]=t[0],this.typedBuffer[e*this.typedBufferStride+1]=t[1]}get(e,t){return this.typedBuffer[e*this.typedBufferStride+t]}set(e,t,r){this.typedBuffer[e*this.typedBufferStride+t]=r}setValues(e,t,r){this.typedBuffer[e*this.typedBufferStride]=t,this.typedBuffer[e*this.typedBufferStride+1]=r}copyFrom(e,t,r){var i=this.typedBuffer,n=t.typedBuffer,a=e*this.typedBufferStride,o=r*t.typedBufferStride;i[a]=n[o],i[a+1]=n[o+1]}get buffer(){return this.typedBuffer.buffer}}s.ElementCount=2;var c=r(111);class l{constructor(e,t,r=0,i,n){this.TypedArrayConstructor=e,this.elementCount=3;var a=this.TypedArrayConstructor;void 0===i&&(i=3*a.BYTES_PER_ELEMENT);var o=0===t.byteLength?0:r;this.typedBuffer=null==n?new a(t,o):new a(t,o,(n-r)/a.BYTES_PER_ELEMENT),this.typedBufferStride=i/a.BYTES_PER_ELEMENT,this.count=Math.ceil(this.typedBuffer.length/this.typedBufferStride),this.stride=this.typedBufferStride*this.TypedArrayConstructor.BYTES_PER_ELEMENT}getVec(e,t){return Object(c.v)(t,this.typedBuffer[e*this.typedBufferStride],this.typedBuffer[e*this.typedBufferStride+1],this.typedBuffer[e*this.typedBufferStride+2])}setVec(e,t){this.typedBuffer[e*this.typedBufferStride]=t[0],this.typedBuffer[e*this.typedBufferStride+1]=t[1],this.typedBuffer[e*this.typedBufferStride+2]=t[2]}get(e,t){return this.typedBuffer[e*this.typedBufferStride+t]}set(e,t,r){this.typedBuffer[e*this.typedBufferStride+t]=r}setValues(e,t,r,i){this.typedBuffer[e*this.typedBufferStride]=t,this.typedBuffer[e*this.typedBufferStride+1]=r,this.typedBuffer[e*this.typedBufferStride+2]=i}copyFrom(e,t,r){var i=this.typedBuffer,n=t.typedBuffer,a=e*this.typedBufferStride,o=r*t.typedBufferStride;i[a]=n[o],i[a+1]=n[o+1],i[a+2]=n[o+2]}get buffer(){return this.typedBuffer.buffer}}l.ElementCount=3;var u=r(191);class d{constructor(e,t,r=0,i,n){this.TypedArrayConstructor=e,this.elementCount=4;var a=this.TypedArrayConstructor;void 0===i&&(i=4*a.BYTES_PER_ELEMENT);var o=0===t.byteLength?0:r;this.typedBuffer=null==n?new a(t,o):new a(t,o,(n-r)/a.BYTES_PER_ELEMENT),this.typedBufferStride=i/a.BYTES_PER_ELEMENT,this.count=Math.ceil(this.typedBuffer.length/this.typedBufferStride),this.stride=this.typedBufferStride*this.TypedArrayConstructor.BYTES_PER_ELEMENT}getVec(e,t){return Object(u.l)(t,this.typedBuffer[e*this.typedBufferStride],this.typedBuffer[e*this.typedBufferStride+1],this.typedBuffer[e*this.typedBufferStride+2],this.typedBuffer[e*this.typedBufferStride+3])}setVec(e,t){this.typedBuffer[e*this.typedBufferStride]=t[0],this.typedBuffer[e*this.typedBufferStride+1]=t[1],this.typedBuffer[e*this.typedBufferStride+2]=t[2],this.typedBuffer[e*this.typedBufferStride+3]=t[3]}get(e,t){return this.typedBuffer[e*this.typedBufferStride+t]}set(e,t,r){this.typedBuffer[e*this.typedBufferStride+t]=r}setValues(e,t,r,i,n){this.typedBuffer[e*this.typedBufferStride]=t,this.typedBuffer[e*this.typedBufferStride+1]=r,this.typedBuffer[e*this.typedBufferStride+2]=i,this.typedBuffer[e*this.typedBufferStride+3]=n}copyFrom(e,t,r){var i=this.typedBuffer,n=t.typedBuffer,a=e*this.typedBufferStride,o=r*t.typedBufferStride;i[a]=n[o],i[a+1]=n[o+1],i[a+2]=n[o+2],i[a+3]=n[o+3]}get buffer(){return this.typedBuffer.buffer}}d.ElementCount=4;class h extends a{constructor(e,t=0,r,i){super(Float32Array,e,t,r,i),this.elementType="f32"}static fromTypedArray(e,t){return new h(e.buffer,e.byteOffset,t,e.byteOffset+e.byteLength)}}h.ElementType="f32";class p extends s{constructor(e,t=0,r,i){super(Float32Array,e,t,r,i),this.elementType="f32"}static fromTypedArray(e,t){return new p(e.buffer,e.byteOffset,t,e.byteOffset+e.byteLength)}}p.ElementType="f32";class f extends l{constructor(e,t=0,r,i){super(Float32Array,e,t,r,i),this.elementType="f32"}static fromTypedArray(e,t){return new f(e.buffer,e.byteOffset,t,e.byteOffset+e.byteLength)}}f.ElementType="f32";class b extends d{constructor(e,t=0,r,i){super(Float32Array,e,t,r,i),this.elementType="f32"}static fromTypedArray(e,t){return new b(e.buffer,e.byteOffset,t,e.byteOffset+e.byteLength)}}b.ElementType="f32";class v extends i{constructor(e,t=0,r,i){super(Float32Array,e,t,r,i),this.elementType="f32"}static fromTypedArray(e,t){return new v(e.buffer,e.byteOffset,t,e.byteOffset+e.byteLength)}}v.ElementType="f32";class m extends i{constructor(e,t=0,r,i){super(Float64Array,e,t,r,i),this.elementType="f64"}static fromTypedArray(e,t){return new m(e.buffer,e.byteOffset,t,e.byteOffset+e.byteLength)}}m.ElementType="f64";class g extends n{constructor(e,t=0,r,i){super(Float32Array,e,t,r,i),this.elementType="f32"}static fromTypedArray(e,t){return new g(e.buffer,e.byteOffset,t,e.byteOffset+e.byteLength)}}g.ElementType="f32";class y extends n{constructor(e,t=0,r,i){super(Float64Array,e,t,r,i),this.elementType="f64"}static fromTypedArray(e,t){return new y(e.buffer,e.byteOffset,t,e.byteOffset+e.byteLength)}}y.ElementType="f64";class O extends a{constructor(e,t=0,r,i){super(Float64Array,e,t,r,i),this.elementType="f64"}static fromTypedArray(e,t){return new O(e.buffer,e.byteOffset,t,e.byteOffset+e.byteLength)}}O.ElementType="f64";class j extends s{constructor(e,t=0,r,i){super(Float64Array,e,t,r,i),this.elementType="f64"}static fromTypedArray(e,t){return new j(e.buffer,e.byteOffset,t,e.byteOffset+e.byteLength)}}j.ElementType="f64";class _ extends l{constructor(e,t=0,r,i){super(Float64Array,e,t,r,i),this.elementType="f64"}static fromTypedArray(e,t){return new _(e.buffer,e.byteOffset,t,e.byteOffset+e.byteLength)}}_.ElementType="f64";class w extends d{constructor(e,t=0,r,i){super(Float64Array,e,t,r,i),this.elementType="f64"}static fromTypedArray(e,t){return new w(e.buffer,e.byteOffset,t,e.byteOffset+e.byteLength)}}w.ElementType="f64";class x extends a{constructor(e,t=0,r,i){super(Uint8Array,e,t,r,i),this.elementType="u8"}static fromTypedArray(e,t){return new x(e.buffer,e.byteOffset,t,e.byteOffset+e.byteLength)}}x.ElementType="u8";class S extends s{constructor(e,t=0,r,i){super(Uint8Array,e,t,r,i),this.elementType="u8"}static fromTypedArray(e,t){return new S(e.buffer,e.byteOffset,t,e.byteOffset+e.byteLength)}}S.ElementType="u8";class M extends l{constructor(e,t=0,r,i){super(Uint8Array,e,t,r,i),this.elementType="u8"}static fromTypedArray(e,t){return new M(e.buffer,e.byteOffset,t,e.byteOffset+e.byteLength)}}M.ElementType="u8";class T extends d{constructor(e,t=0,r,i){super(Uint8Array,e,t,r,i),this.elementType="u8"}static fromTypedArray(e,t){return new T(e.buffer,e.byteOffset,t,e.byteOffset+e.byteLength)}}T.ElementType="u8";class P extends a{constructor(e,t=0,r,i){super(Uint16Array,e,t,r,i),this.elementType="u16"}static fromTypedArray(e,t){return new P(e.buffer,e.byteOffset,t,e.byteOffset+e.byteLength)}}P.ElementType="u16";class E extends s{constructor(e,t=0,r,i){super(Uint16Array,e,t,r,i),this.elementType="u16"}static fromTypedArray(e,t){return new E(e.buffer,e.byteOffset,t,e.byteOffset+e.byteLength)}}E.ElementType="u16";class C extends l{constructor(e,t=0,r,i){super(Uint16Array,e,t,r,i),this.elementType="u16"}static fromTypedArray(e,t){return new C(e.buffer,e.byteOffset,t,e.byteOffset+e.byteLength)}}C.ElementType="u16";class A extends d{constructor(e,t=0,r,i){super(Uint16Array,e,t,r,i),this.elementType="u16"}static fromTypedArray(e,t){return new A(e.buffer,e.byteOffset,t,e.byteOffset+e.byteLength)}}A.ElementType="u16";class I extends a{constructor(e,t=0,r,i){super(Uint32Array,e,t,r,i),this.elementType="u32"}static fromTypedArray(e,t){return new I(e.buffer,e.byteOffset,t,e.byteOffset+e.byteLength)}}I.ElementType="u32";class k extends s{constructor(e,t=0,r,i){super(Uint32Array,e,t,r,i),this.elementType="u32"}static fromTypedArray(e,t){return new k(e.buffer,e.byteOffset,t,e.byteOffset+e.byteLength)}}k.ElementType="u32";class F extends l{constructor(e,t=0,r,i){super(Uint32Array,e,t,r,i),this.elementType="u32"}static fromTypedArray(e,t){return new F(e.buffer,e.byteOffset,t,e.byteOffset+e.byteLength)}}F.ElementType="u32";class R extends d{constructor(e,t=0,r,i){super(Uint32Array,e,t,r,i),this.elementType="u32"}static fromTypedArray(e,t){return new R(e.buffer,e.byteOffset,t,e.byteOffset+e.byteLength)}}R.ElementType="u32";class D extends a{constructor(e,t=0,r,i){super(Int8Array,e,t,r,i),this.elementType="i8"}static fromTypedArray(e,t){return new D(e.buffer,e.byteOffset,t,e.byteOffset+e.byteLength)}}D.ElementType="i8";class L extends s{constructor(e,t=0,r,i){super(Int8Array,e,t,r,i),this.elementType="i8"}static fromTypedArray(e,t){return new L(e.buffer,e.byteOffset,t,e.byteOffset+e.byteLength)}}L.ElementType="i8";class N extends l{constructor(e,t=0,r,i){super(Int8Array,e,t,r,i),this.elementType="i8"}static fromTypedArray(e,t){return new N(e.buffer,e.byteOffset,t,e.byteOffset+e.byteLength)}}N.ElementType="i8";class V extends d{constructor(e,t=0,r,i){super(Int8Array,e,t,r,i),this.elementType="i8"}static fromTypedArray(e,t){return new V(e.buffer,e.byteOffset,t,e.byteOffset+e.byteLength)}}V.ElementType="i8";class z extends a{constructor(e,t=0,r,i){super(Int16Array,e,t,r,i),this.elementType="i16"}static fromTypedArray(e,t){return new z(e.buffer,e.byteOffset,t,e.byteOffset+e.byteLength)}}z.ElementType="i16";class G extends s{constructor(e,t=0,r,i){super(Int16Array,e,t,r,i),this.elementType="i16"}static fromTypedArray(e,t){return new G(e.buffer,e.byteOffset,t,e.byteOffset+e.byteLength)}}G.ElementType="i16";class U extends l{constructor(e,t=0,r,i){super(Int16Array,e,t,r,i),this.elementType="i16"}static fromTypedArray(e,t){return new U(e.buffer,e.byteOffset,t,e.byteOffset+e.byteLength)}}U.ElementType="i16";class q extends d{constructor(e,t=0,r,i){super(Int16Array,e,t,r,i),this.elementType="i16"}static fromTypedArray(e,t){return new q(e.buffer,e.byteOffset,t,e.byteOffset+e.byteLength)}}q.ElementType="i16";class H extends a{constructor(e,t=0,r,i){super(Int32Array,e,t,r,i),this.elementType="i32"}static fromTypedArray(e,t){return new H(e.buffer,e.byteOffset,t,e.byteOffset+e.byteLength)}}H.ElementType="i32";class B extends s{constructor(e,t=0,r,i){super(Int32Array,e,t,r,i),this.elementType="i32"}static fromTypedArray(e,t){return new B(e.buffer,e.byteOffset,t,e.byteOffset+e.byteLength)}}B.ElementType="i32";class W extends l{constructor(e,t=0,r,i){super(Int32Array,e,t,r,i),this.elementType="i32"}static fromTypedArray(e,t){return new W(e.buffer,e.byteOffset,t,e.byteOffset+e.byteLength)}}W.ElementType="i32";class J extends d{constructor(e,t=0,r,i){super(Int32Array,e,t,r,i),this.elementType="i32"}static fromTypedArray(e,t){return new J(e.buffer,e.byteOffset,t,e.byteOffset+e.byteLength)}}J.ElementType="i32"},function(e,t,r){"use strict";r.d(t,"a",(function(){return i}));class i{constructor(e){this.notify=e,this._accessed=new Set,this._handles=[]}destroy(){this._accessed.clear(),this.clear()}onObservableAccessed(e){this._accessed.add(e)}onTrackingEnd(){for(var e of this._accessed)this._handles.push(e.observe(this));this._accessed.clear()}clear(){for(var e of this._handles)e.remove();this._handles.length=0}}},,function(e,t,r){"use strict";var i=r(7),n=r(91),a=r(82),o=(r(80),r(89)),s=(r(81),r(85)),c=r(116),l=r(84),u=r(93),d=(r(83),r(86),r(87),r(107)),h=r(123),p=r(108),f=r(259),b=r(375),v=r(167),m=r(196),g={editing:!1,operations:{add:!0,update:!0,delete:!0}},y=d.a.ofType(b.a),O=class extends v.a{constructor(e){super(e),this._getAttachmentsPromise=null,this._attachmentLayer=null,this.abilities=Object(n.a)({},g),this.activeAttachmentInfo=null,this.attachmentInfos=new y,this.graphic=null,this.mode="view",this.handles.add([Object(p.a)(this,"graphic",(()=>this._graphicChanged()))])}destroy(){this._attachmentLayer=null,this.graphic=null}castAbilities(e){return Object(n.a)(Object(n.a)({},g),e)}get state(){return this._getAttachmentsPromise?"loading":this.graphic?"ready":"disabled"}get supportsResizeAttachments(){return this.get("graphic.layer.capabilities.operations.supportsResizeAttachments")||!1}getAttachments(){var e=this;return Object(i.a)((function*(){var{_attachmentLayer:t,attachmentInfos:r}=e;if(!t||"function"!=typeof t.queryAttachments)throw new u.a("invalid-layer","getAttachments(): A valid layer is required.");var i=e._getFeatureId(),n=new f.a({objectIds:[i],returnMetadata:!0}),a=[],o=t.queryAttachments(n).then((e=>e[i]||a)).catch((()=>a));e._getAttachmentsPromise=o,e.notifyChange("state");var s=yield o;return r.removeAll(),s.length&&r.addMany(s),e._getAttachmentsPromise=null,e.notifyChange("state"),s}))()}addAttachment(e){var t=this;return Object(i.a)((function*(){var{_attachmentLayer:r,attachmentInfos:i,graphic:n,abilities:a}=t;if(!e)throw new u.a("invalid-attachment","addAttachment(): An attachment is required.",{attachment:e});if(!a.operations.add)throw new u.a("invalid-abilities","addAttachment(): add abilities are required.");if(!r||"function"!=typeof r.addAttachment)throw new u.a("invalid-layer","addAttachment(): A valid layer is required.");var o=r.addAttachment(n,e).then((e=>t._queryAttachment(e.objectId))),s=yield o;return i.add(s),s}))()}deleteAttachment(e){var t=this;return Object(i.a)((function*(){var{_attachmentLayer:r,attachmentInfos:i,graphic:n,abilities:a}=t;if(!e)throw new u.a("invalid-attachment-info","deleteAttachment(): An attachmentInfo is required.",{attachmentInfo:e});if(!a.operations.delete)throw new u.a("invalid-abilities","deleteAttachment(): delete abilities are required.");if(!r||"function"!=typeof r.deleteAttachments)throw new u.a("invalid-layer","deleteAttachment(): A valid layer is required.");var o=r.deleteAttachments(n,[e.id]).then((()=>e)),s=yield o;return i.remove(s),s}))()}updateAttachment(e,t=this.activeAttachmentInfo){var r=this;return Object(i.a)((function*(){var{_attachmentLayer:i,attachmentInfos:n,graphic:a,abilities:o}=r;if(!e)throw new u.a("invalid-attachment","updateAttachment(): An attachment is required.",{attachment:e});if(!t)throw new u.a("invalid-attachment-info","updateAttachment(): An attachmentInfo is required.",{attachmentInfo:t});if(!o.operations.update)throw new u.a("invalid-abilities","updateAttachment(): Update abilities are required.");var s=n.findIndex((e=>e===t));if(!i||"function"!=typeof i.updateAttachment)throw new u.a("invalid-layer","updateAttachment(): A valid layer is required.");var c=i.updateAttachment(a,t.id,e).then((e=>r._queryAttachment(e.objectId))),l=yield c;return n.splice(s,1,l),l}))()}_queryAttachment(e){var t=this;return Object(i.a)((function*(){if(!e)throw new u.a("invalid-attachment-id","Could not query attachment.");var{_attachmentLayer:r}=t,i=t._getFeatureId(),n=new f.a({objectIds:[i],attachmentsWhere:"AttachmentId=".concat(e),returnMetadata:!0});return r.queryAttachments(n).then((e=>e[i][0]))}))()}_getFeatureId(){var{_attachmentLayer:e,graphic:t}=this;if(!e||!t)return null;var{objectIdField:r}=e,{attributes:i}=t;return i&&i[r]}_graphicChanged(){this.graphic&&(this._setAttachmentLayer(),this.getAttachments().catch((()=>{})))}_setAttachmentLayer(){var{graphic:e}=this,t=Object(m.l)(e);this._attachmentLayer=t?"scene"===t.type&&Object(o.k)(t.associatedLayer)?t.associatedLayer:t:null}};Object(a.a)([Object(s.b)()],O.prototype,"abilities",void 0),Object(a.a)([Object(c.a)("abilities")],O.prototype,"castAbilities",null),Object(a.a)([Object(s.b)()],O.prototype,"activeAttachmentInfo",void 0),Object(a.a)([Object(s.b)({readOnly:!0,type:y})],O.prototype,"attachmentInfos",void 0),Object(a.a)([Object(s.b)({type:h.a})],O.prototype,"graphic",void 0),Object(a.a)([Object(s.b)()],O.prototype,"mode",void 0),Object(a.a)([Object(s.b)({readOnly:!0})],O.prototype,"state",null),Object(a.a)([Object(s.b)({readOnly:!0})],O.prototype,"supportsResizeAttachments",null);var j=O=Object(a.a)([Object(l.a)("esri.widgets.Attachments.AttachmentsViewModel")],O);t.a=j},function(e,t,r){"use strict";var i=r(82),n=(r(80),r(81),r(88),r(85)),a=r(84),o=(r(83),r(86),r(87),r(437)),s=class extends o.a{constructor(e){super(e),this.description=null,this.title=null}};Object(i.a)([Object(n.b)()],s.prototype,"description",void 0),Object(i.a)([Object(n.b)()],s.prototype,"title",void 0);var c=s=Object(i.a)([Object(a.a)("esri.widgets.Feature.FeatureAttachments.FeatureAttachmentsViewModel")],s);t.a=c},function(e,t,r){"use strict";var i=r(7),n=r(82),a=(r(80),r(81),r(88),r(85)),o=r(84),s=(r(83),r(86),r(87),r(97)),c=r(123),l=r(108),u=r(167),d=r(196),h=class extends(Object(u.b)(s.a)){constructor(e){super(e),this._loadingPromise=null,this.created=null,this.creator=null,this.destroyer=null,this.graphic=null,this.handles.add(Object(l.a)(this,"creator",(e=>{this._destroyContent(),this._createContent(e)})))}destroy(){this._destroyContent()}get state(){return this._loadingPromise?"loading":"ready"}_destroyContent(){var{created:e,graphic:t,destroyer:r}=this;e&&(Object(d.m)(r,{graphic:t}).catch((()=>null)),this._set("created",null))}_createContent(e){var t=this;return Object(i.a)((function*(){var{graphic:r}=t,i=Object(d.m)(e,{graphic:r}).catch((()=>null));t._loadingPromise=i,t.notifyChange("state");var n=yield i;i===t._loadingPromise&&(t._loadingPromise=null,t.notifyChange("state"),t._set("created",n))}))()}};Object(n.a)([Object(a.b)({readOnly:!0})],h.prototype,"created",void 0),Object(n.a)([Object(a.b)()],h.prototype,"creator",void 0),Object(n.a)([Object(a.b)()],h.prototype,"destroyer",void 0),Object(n.a)([Object(a.b)({type:c.a})],h.prototype,"graphic",void 0),Object(n.a)([Object(a.b)({readOnly:!0})],h.prototype,"state",null);var p=h=Object(n.a)([Object(o.a)("esri.widgets.Feature.FeatureContent.FeatureContentViewModel")],h);t.a=p},function(e,t,r){"use strict";var i=r(82),n=(r(80),r(81),r(88),r(85)),a=r(84),o=(r(83),r(86),r(87),r(97)),s=r(296),c=r(637),l=r(196),u=class extends o.a{constructor(e){super(e),this.attributes=null,this.expressionInfos=null,this.description=null,this.fieldInfos=null,this.title=null}get formattedFieldInfos(){var{expressionInfos:e,fieldInfos:t}=this,r=[];return null==t||t.forEach((t=>{if(!t.hasOwnProperty("visible")||t.visible){var i=t.clone();i.label=Object(l.i)(i,e),r.push(i)}})),r}};Object(i.a)([Object(n.b)()],u.prototype,"attributes",void 0),Object(i.a)([Object(n.b)({type:[c.a]})],u.prototype,"expressionInfos",void 0),Object(i.a)([Object(n.b)()],u.prototype,"description",void 0),Object(i.a)([Object(n.b)({type:[s.a]})],u.prototype,"fieldInfos",void 0),Object(i.a)([Object(n.b)({readOnly:!0})],u.prototype,"formattedFieldInfos",null),Object(i.a)([Object(n.b)()],u.prototype,"title",void 0);var d=u=Object(i.a)([Object(a.a)("esri.widgets.Feature.FeatureFields.FeatureFieldsViewModel")],u);t.a=d},function(e,t,r){"use strict";var i=r(82),n=(r(80),r(81),r(88),r(85)),a=r(84),o=(r(83),r(86),r(87),r(97)),s=r(296),c=r(658),l=r(196),u=r(442),d=class extends o.a{constructor(e){super(e),this.activeMediaInfoIndex=0,this.attributes=null,this.description=null,this.fieldInfoMap=null,this.formattedAttributes=null,this.layer=null,this.mediaInfos=null,this.popupTemplate=null,this.relatedInfos=null,this.title=null}get activeMediaInfo(){return this.formattedMediaInfos[this.activeMediaInfoIndex]||null}get formattedMediaInfos(){return this._formatMediaInfos()||[]}get formattedMediaInfoCount(){return this.formattedMediaInfos.length}setActiveMedia(e){this._setContentElementMedia(e)}next(){this._pageContentElementMedia(1)}previous(){this._pageContentElementMedia(-1)}_setContentElementMedia(e){var{formattedMediaInfoCount:t}=this,r=(e+t)%t;this.activeMediaInfoIndex=r}_pageContentElementMedia(e){var{activeMediaInfoIndex:t}=this,r=t+e;this._setContentElementMedia(r)}_formatMediaInfos(){var{attributes:e,mediaInfos:t,formattedAttributes:r,fieldInfoMap:i,layer:n}=this;return null==t?void 0:t.map((t=>{if(!t)return null;if(t.title=Object(l.s)({attributes:e,fieldInfoMap:i,globalAttributes:r,layer:n,text:t.title}),t.caption=Object(l.s)({attributes:e,fieldInfoMap:i,globalAttributes:r,layer:n,text:t.caption}),t.altText=Object(l.s)({attributes:e,fieldInfoMap:i,globalAttributes:r,layer:n,text:t.altText}),"image"===t.type){var{value:a}=t;return this._setImageValue({value:a,formattedAttributes:r,layer:n}),t.value.sourceURL?t:void 0}if("pie-chart"===t.type||"line-chart"===t.type||"column-chart"===t.type||"bar-chart"===t.type){var{value:o}=t;return this._setChartValue({value:o,chartType:t.type,attributes:e,formattedAttributes:r,layer:n}),t}return null})).filter(Boolean)}_setImageValue(e){var{fieldInfoMap:t}=this,{value:r,formattedAttributes:i,layer:n}=e,{linkURL:a,sourceURL:o}=r;if(o){var s=Object(l.c)(o,n);r.sourceURL=Object(l.r)({formattedAttributes:i,template:s,fieldInfoMap:t})}if(a){var c=Object(l.c)(a,n);r.linkURL=Object(l.r)({formattedAttributes:i,template:c,fieldInfoMap:t})}}_setChartValue(e){var{value:t,attributes:r,formattedAttributes:i,chartType:n,layer:a}=e,{popupTemplate:o,relatedInfos:s}=this,{fields:c,normalizeField:u}=t;if(t.fields=Object(l.k)(c,a),u&&(t.normalizeField=Object(l.j)(u,a)),c.some((e=>!!(null!=i[e]||Object(l.o)(e)&&s.size)))){var d=null==o?void 0:o.fieldInfos;c.forEach((e=>{if(Object(l.o)(e))t.series=[...t.series,...this._getRelatedChartInfos({fieldInfos:d,fieldName:e,formattedAttributes:i,chartType:n,value:t})];else{var a=this._getChartOption({value:t,attributes:r,chartType:n,formattedAttributes:i,fieldName:e,fieldInfos:d});t.series.push(a)}}))}}_getRelatedChartInfos(e){var t,{fieldInfos:r,fieldName:i,formattedAttributes:n,chartType:a,value:o}=e,s=[],c=Object(u.b)(i),{layerId:l,fieldName:d}=c,h=null==(t=this.relatedInfos)?void 0:t.get(l.toString());if(!h)return s;var{relatedFeatures:p,relation:f}=h;if(!f||!p)return s;var{cardinality:b}=f;return p.forEach((e=>{var{attributes:t}=e;t&&Object.keys(t).forEach((e=>{e===d&&s.push(this._getChartOption({value:o,attributes:t,formattedAttributes:n,fieldName:i,chartType:a,relatedFieldName:e,fieldInfos:r}))}))})),"one-to-many"===b||"many-to-many"===b?s:[s[0]]}_getTooltip({label:e,value:t,chartType:r}){return"pie-chart"===r?e:"".concat(e,": ").concat(t)}_getChartOption(e){var t,{value:r,attributes:i,formattedAttributes:n,fieldName:a,relatedFieldName:o,fieldInfos:d,chartType:h}=e,{layer:p}=this,{normalizeField:f,tooltipField:b}=r,v=f?Object(l.o)(f)?i[Object(u.b)(f).fieldName]:i[f]:null,m=o&&void 0!==i[o]?i[o]:void 0!==i[a]?i[a]:n[a],g=void 0===m?null:m&&v?m/v:m,y=new c.a({value:g});if(Object(l.o)(a)){var O=Object(u.b)(a),j=Object(u.b)(b),_=j?j.fieldName:null,w=Object(l.f)(g,{fieldInfos:d,fieldName:o,layer:p,preventPlacesFormatting:!!v}),x=O?O.label||O.fieldName:o,S=_&&void 0!==i[_]?i[_]:x;return y.tooltip=this._getTooltip({label:S,value:w,chartType:h}),y}var M=Object(l.h)(d,a),T=Object(l.j)(a,p),P=b&&void 0!==n[b]?n[b]:Object(l.i)(M||new s.a({fieldName:T}),null==(t=this.popupTemplate)?void 0:t.expressionInfos),E=n[T];return y.tooltip=this._getTooltip({label:P,value:E,chartType:h}),y}};Object(i.a)([Object(n.b)()],d.prototype,"activeMediaInfoIndex",void 0),Object(i.a)([Object(n.b)({readOnly:!0})],d.prototype,"activeMediaInfo",null),Object(i.a)([Object(n.b)()],d.prototype,"attributes",void 0),Object(i.a)([Object(n.b)()],d.prototype,"description",void 0),Object(i.a)([Object(n.b)()],d.prototype,"fieldInfoMap",void 0),Object(i.a)([Object(n.b)()],d.prototype,"formattedAttributes",void 0),Object(i.a)([Object(n.b)({readOnly:!0})],d.prototype,"formattedMediaInfos",null),Object(i.a)([Object(n.b)()],d.prototype,"layer",void 0),Object(i.a)([Object(n.b)({readOnly:!0})],d.prototype,"formattedMediaInfoCount",null),Object(i.a)([Object(n.b)()],d.prototype,"mediaInfos",void 0),Object(i.a)([Object(n.b)()],d.prototype,"popupTemplate",void 0),Object(i.a)([Object(n.b)()],d.prototype,"relatedInfos",void 0),Object(i.a)([Object(n.b)()],d.prototype,"title",void 0);var h=d=Object(i.a)([Object(a.a)("esri.widgets.Feature.FeatureMedia.FeatureMediaViewModel")],d);t.a=h},function(e,t,r){"use strict";r.d(t,"a",(function(){return y})),r.d(t,"b",(function(){return v})),r.d(t,"c",(function(){return x})),r.d(t,"d",(function(){return S})),r.d(t,"e",(function(){return O})),r.d(t,"f",(function(){return M}));var i=r(7),n=r(81),a=r(93),o=r(94),s=r(118),c=r(106),l=r(246),u=r(132),d=r(224),h=r(462),p=r(196),f=n.a.getLogger("esri.widgets.Feature.support.relatedFeatureUtils"),b=new Map;function v(e){if(!Object(p.o)(e))return null;var[t,r]=e.split("/").slice(1);return{layerId:t,fieldName:r}}function m({originRelationship:e,relationships:t,layerId:r}){var i;return t&&t.some((t=>("".concat(t.relatedTableId)===r&&t.id===e.id&&(i=t),!!i))),i}function g(e,t){var r=t.toLowerCase();for(var i in e)if(i.toLowerCase()===r)return e[i];return null}function y(e,t){var r=function(e,t){if(!t.relationships)return null;var r=null,{relationships:i}=t;return i.some((t=>t.id===parseInt(e,10)&&(r=t,!0))),r}(e,t);if(r){var i="".concat(t.url,"/").concat(r.relatedTableId);return{url:i,queryTask:new h.a({url:i,sourceSpatialReference:t.spatialReference}),relation:r,relatedFields:[],outStatistics:[]}}}function O(e,t){if(t&&e){var{features:r,statsFeatures:i}=e,n=r&&r.value;t.relatedFeatures=n?n.features:[];var a=i&&i.value;t.relatedStatsFeatures=a?a.features:[]}}function j(e,t,r,i){var n=new d.a;return n.outFields=["*"],n.relationshipId="number"==typeof t.id?t.id:parseInt(t.id,10),n.objectIds=[e.attributes[r.objectIdField]],r.queryRelatedFeatures(n,i)}function _(e,t,r){for(var i=0,n=[];i<t.length;)n.push("".concat(e," IN (").concat(t.slice(i,r+i),")")),i+=r;return n.join(" OR ")}function w(){return(w=Object(i.a)((function*(e,t,r,i){var n=r.layerId.toString(),{layerInfo:a,queryTask:c,relation:l,relatedFields:d,outStatistics:h}=t,p=m({originRelationship:l,relationships:a.relationships,layerId:n});if(p.relationshipTableId&&p.keyFieldInRelationshipTable){var f=(yield j(e,p,r,i))[e.attributes[r.objectIdField]];if(!f)return null;var b=f.features.map((e=>e.attributes[a.objectIdField]));if((null==h?void 0:h.length)>0&&a.supportsStatistics){var v=new u.a;v.where=_(a.objectIdField,b,1e3),v.outFields=d,v.outStatistics=h;var y={features:Promise.resolve(f),statsFeatures:c.execute(v)};return Object(o.j)(y)}}var O=null==p?void 0:p.keyField;if(O){var w=Object(s.v)(Object(s.q)(a.fields,O)),x=g(e.attributes,l.keyField),S=w?"".concat(O,"=").concat(x):"".concat(O,"='").concat(x,"'"),M=c.execute(new u.a({where:S,outFields:t.relatedFields}),i),T=t.outStatistics&&t.outStatistics.length>0&&a.supportsStatistics?c.execute(new u.a({where:S,outFields:t.relatedFields,outStatistics:t.outStatistics}),i):null,P={features:M};return T&&(P.statsFeatures=T),Object(o.j)(P)}return null}))).apply(this,arguments)}function x({relatedInfos:e,layer:t},r){var i={};return e.forEach(((e,n)=>{var{relation:o}=e;if(!o){var s=new a.a("relation-required","A relation is required on a layer to retrieve related records.");throw f.error(s),s}var{relatedTableId:l}=o;if("number"!=typeof l){var u=new a.a("A related table ID is required on a layer to retrieve related records.");throw f.error(u),u}var d="".concat(t.url,"/").concat(l),h=b.get(d),p=h||function(e,t){return Object(c.default)(e,{query:{f:"json"},signal:t&&t.signal})}(d,r);h||b.set(d,p),i[n]=p})),Object(o.j)(i)}function S({graphic:e,relatedInfos:t,layer:r},i){var n={};return t.forEach(((t,a)=>{t.layerInfo&&(n[a]=function(e,t,r,i){return w.apply(this,arguments)}(e,t,r,i))})),Object(o.j)(n)}function M({relatedInfo:e,fieldName:t,fieldInfo:r}){if(e.relatedFields.push(t),r.statisticType){var i=new l.a({statisticType:r.statisticType,onStatisticField:t,outStatisticFieldName:t});e.outStatistics.push(i)}}},function(e,t,r){"use strict";r.d(t,"a",(function(){return d})),r.d(t,"b",(function(){return u}));var i=r(91),n=r(83),a=r(160),o=r(106),s=r(375),c=r(269);function l(e){var t=e.toJSON();return t.attachmentTypes&&(t.attachmentTypes=t.attachmentTypes.join(",")),t.keywords&&(t.keywords=t.keywords.join(",")),t.globalIds&&(t.globalIds=t.globalIds.join(",")),t.objectIds&&(t.objectIds=t.objectIds.join(",")),t.size&&(t.size=t.size.join(",")),t}function u(e,t){var r={};for(var i of e){var{parentObjectId:o,parentGlobalId:c,attachmentInfos:l}=i;for(var u of l){var{id:d}=u,h=Object(n.b)(Object(a.a)("".concat(t,"/").concat(o,"/attachments/").concat(d))),p=s.a.fromJSON(u);p.set({url:h,parentObjectId:o,parentGlobalId:c}),r[o]?r[o].push(p):r[o]=[p]}}return r}function d(e,t,r){var n={query:Object(c.a)(Object(i.a)(Object(i.a)({},e.query),{},{f:"json"},l(t)))};return r&&(n=Object(i.a)(Object(i.a)(Object(i.a)({},r),n),{},{query:Object(i.a)(Object(i.a)({},r.query),n.query)})),Object(o.default)(e.path+"/queryAttachments",n)}},,,,,,,,,,function(e,t,r){"use strict";r.d(t,"a",(function(){return m}));var i=r(89),n=r(104),a=r(111),o=r(330),s=r(157),c=r(174),l=r(398),u=r(179),d=r(348),h=r(221),p=r(189);class f{constructor(){this._disposed=!1}get disposed(){return this._disposed}get shaderTransformation(){return this._shaderTransformation}acquire(e,t,r,i,n,a){this.id=Object(p.a)(),this.geometry=e,this.material=t,this.transformation=r,this.instanceParameters=i,this.origin=n,this._shaderTransformation=a,this._disposed=!1}release(){this._disposed=!1}dispose(){this._disposed=!0}getStaticTransformation(){return this.transformation}getShaderTransformation(){return Object(i.k)(this._shaderTransformation)?this._shaderTransformation(this.transformation):this.transformation}computeAttachmentOrigin(e){return!!(this.material.computeAttachmentOrigin?this.material.computeAttachmentOrigin(this.geometry,e):this.geometry.computeAttachmentOrigin(e))&&(Object(a.l)(e,e,this.getStaticTransformation()),!0)}}f.pool=new h.a(f);var b=r(600),v=r(357);class m extends d.a{constructor(e={}){super(),this.type=1,this._geometryRecords=new Array,this._geometries=new Array,this._objectTransformation=Object(c.b)(),this._bvObjectSpace=new y,this._bvWorldSpace=new y,this._bvDirty=!0,this._hasVolatileTransformation=!1,this._visible=!0,this.castShadow=null==e.castShadow||e.castShadow,this.metadata=e.metadata,this.metadata&&this.metadata.isElevationSource&&(this.metadata.lastValidElevationBB=new g),this.transformation=Object(c.b)();var{geometries:t,materials:r,transformations:i,origins:n}=e;if(Array.isArray(t)){Object(u.a)(r.length===t.length,"Object3D: materials don't match geometries"),Object(u.a)(i.length===t.length,"Object3D: transformations don't match geometries"),this._geometryRecords.length=t.length,this._geometries.length=t.length;for(var a=0;a<t.length;a++)this._geometries[a]=t[a],this._geometryRecords[a]=f.pool.acquire(t[a],r[a],Object(c.c)(i[a]),{highlights:null,occludees:null,visible:!0},n&&n[a])}}get geometryRecords(){return this._geometryRecords}get geometries(){return this._geometries}get transformation(){return this._objectTransformation}set transformation(e){Object(s.c)(this._objectTransformation,e),this._invalidateBoundingVolume(),this._emit("objectTransformation",this)}dispose(){this._geometryRecords.length=0,this._geometries.length=0}get parentLayer(){return this._parentLayer}set parentLayer(e){Object(u.a)(null==this._parentLayer||null==e,"Object3D can only be added to a single Layer"),this._parentLayer=e}getNumGeometryRecords(){return this._geometryRecords.length}getGeometryRecord(e){return Object(u.a)(e>=0&&e<this._geometryRecords.length,"Object3d.getGeometryDataByIndex: index out of range"),this._geometryRecords[e]}addGeometry(e,t,r,n,a,o){r=r||c.a,this._geometries.push(e);var s=f.pool.acquire(e,t,r,n||{highlights:null,occludees:null,visible:!0},a,o);return this._geometryRecords.push(s),this._hasVolatileTransformation=this._hasVolatileTransformation||Object(i.k)(s.shaderTransformation),this._emit("objectGeometryAdded",{object:this,record:s}),this._invalidateBoundingVolume(),s}removeGeometry(e){var t=this._geometryRecords.splice(e,1)[0];return this._hasVolatileTransformation=Object(i.k)(t.shaderTransformation)?this._geometryRecords.some((e=>Object(i.k)(e.shaderTransformation))):this._hasVolatileTransformation,t.dispose(),this._geometries.splice(e,1),this._emit("objectGeometryRemoved",{object:this,record:t}),this._invalidateBoundingVolume(),t}removeAllGeometries(){for(;this.getNumGeometryRecords()>0;)this.removeGeometry(0)}geometryVertexAttrsUpdated(e){this._emit("vertexAttrsUpdated",{object:this,record:this._geometryRecords[e]}),this._invalidateBoundingVolume()}get isVisible(){return this._visible}setVisible(e){for(var t of(this._visible=e,this._geometryRecords))t.instanceParameters.visible=this._visible;this._emit("visibilityChanged",this)}maskOccludee(){var e=new b.a(1);for(var t of this._geometryRecords)t.instanceParameters.occludees=Object(v.b)(t.instanceParameters.occludees,e);return this._emit("occlusionChanged",this),e}removeOcclude(e){for(var t of this._geometryRecords)t.instanceParameters.occludees=Object(v.f)(t.instanceParameters.occludees,e);this._emit("occlusionChanged",this)}highlight(){var e=new b.a(0);for(var t of this._geometryRecords)t.instanceParameters.highlights=Object(v.b)(t.instanceParameters.highlights,e);return this._emit("highlightChanged",this),e}removeHighlight(e){for(var t of this._geometryRecords)t.instanceParameters.highlights=Object(v.f)(t.instanceParameters.highlights,e);this._emit("highlightChanged",this)}getCombinedStaticTransformation(e,t){return Object(s.l)(Object(i.r)(t,Object(c.b)()),this.transformation,e.getStaticTransformation())}getCombinedShaderTransformation(e,t){return t=t||Object(c.b)(),Object(s.l)(t,this.transformation,e.getShaderTransformation()),t}hasVolativeTransformation(){return this._hasVolatileTransformation}getBBMin(e){return this._validateBoundingVolume(),e?this._bvObjectSpace.bbMin:this._bvWorldSpace.bbMin}getBBMax(e){return this._validateBoundingVolume(),e?this._bvObjectSpace.bbMax:this._bvWorldSpace.bbMax}getBounds(e){return this._validateBoundingVolume(),e?this._bvObjectSpace.bounds:this._bvWorldSpace.bounds}_validateBoundingVolume(){if(this._bvDirty||this._hasVolatileTransformation){this._bvObjectSpace.init(),this._bvWorldSpace.init();for(var e=0;e<this._geometryRecords.length;++e){var t=this._geometries[e],r=this._geometryRecords[e],s=t.boundingInfo;Object(i.k)(s)&&(this._calculateTransformedBoundingVolume(s,this._bvObjectSpace,r.getShaderTransformation()),this._calculateTransformedBoundingVolume(s,this._bvWorldSpace,this.getCombinedShaderTransformation(r)))}Object(a.h)(this._bvObjectSpace.bounds,this._bvObjectSpace.bbMin,this._bvObjectSpace.bbMax,.5),Object(a.h)(this._bvWorldSpace.bounds,this._bvWorldSpace.bbMin,this._bvWorldSpace.bbMax,.5);for(var c=Object(n.e)(),l=Object(n.e)(),u=Object(o.f)(this.transformation),d=0;d<this._geometryRecords.length;++d){var h=this._geometries[d].boundingInfo;if(!Object(i.j)(h)){var p=this._geometryRecords[d].getShaderTransformation(),f=Object(o.f)(p);Object(a.l)(c,h.getCenter(),p);var b=Object(a.n)(c,this._bvObjectSpace.bounds),v=h.getBSRadius()*f;this._bvObjectSpace.bounds[3]=Math.max(this._bvObjectSpace.bounds[3],b+v),Object(a.l)(l,c,this.transformation);var m=Object(a.n)(l,this._bvWorldSpace.bounds),g=v*u;this._bvWorldSpace.bounds[3]=Math.max(this._bvWorldSpace.bounds[3],m+g)}}this._bvDirty=!1}}_calculateTransformedBoundingVolume(e,t,r){var i=e.getBBMin(),o=e.getBBMax(),s=Object(n.d)(i),c=Object(n.d)(o);Object(a.l)(s,s,r),Object(a.l)(c,c,r);for(var l=0;l<3;++l)t.bbMin[l]=Math.min(t.bbMin[l],s[l],c[l]),t.bbMax[l]=Math.max(t.bbMax[l],s[l],c[l]);for(var u=0;u<3;++u){Object(a.j)(s,i),Object(a.j)(c,o),s[u]=o[u],c[u]=i[u],Object(a.l)(s,s,r),Object(a.l)(c,c,r);for(var d=0;d<3;++d)t.bbMin[d]=Math.min(t.bbMin[d],s[d],c[d]),t.bbMax[d]=Math.max(t.bbMax[d],s[d],c[d])}}_invalidateBoundingVolume(){this._bvDirty=!0,Object(i.k)(this._parentLayer)&&this._parentLayer.notifyObjectBBChanged(this,this._bvWorldSpace.bounds)}_emit(e,t){Object(i.k)(this._parentLayer)&&this._parentLayer.events.emit(e,t)}get test(){var e=this;return{hasGeometry:t=>e._geometries.indexOf(t)>-1,getGeometryIndex:t=>e._geometries.indexOf(t)}}}class g{constructor(){this.bbMin=Object(n.g)(Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE),this.bbMax=Object(n.g)(-Number.MAX_VALUE,-Number.MAX_VALUE,-Number.MAX_VALUE)}isEmpty(){return this.bbMax[0]<this.bbMin[0]&&this.bbMax[1]<this.bbMin[1]&&this.bbMax[2]<this.bbMin[2]}}class y extends g{constructor(){super(...arguments),this.bounds=Object(l.b)()}init(){Object(a.v)(this.bbMin,Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE),Object(a.v)(this.bbMax,-Number.MAX_VALUE,-Number.MAX_VALUE,-Number.MAX_VALUE),Object(l.a)(this.bounds)}}},,function(e,t,r){"use strict";var i=r(158);var n,a=(n=i.a,{setTimeout:(e,t)=>{var r=n.setTimeout(e,t);return{remove:()=>n.clearTimeout(r)}}});t.a=a},function(e,t,r){"use strict";var i,n=r(91),a=r(82),o=(r(80),r(92)),s=(r(81),r(88),r(85)),c=r(95),l=r(84),u=(r(83),r(86),r(87),r(97)),d=r(99),h=r(161),p=r(103),f=new c.a({avgRating:"avg-rating",numRatings:"num-ratings",numComments:"num-comments",numViews:"num-views"}),b=i=class extends u.a{constructor(e){super(e),this.categories=null,this.disableExtraQuery=!1,this.extent=null,this.num=10,this.query=null,this.sortField=null,this.start=1}get sortOrder(){return this._get("sortOrder")||"asc"}set sortOrder(e){"asc"!==e&&"desc"!==e||this._set("sortOrder",e)}clone(){return new i({categories:this.categories?Object(o.a)(this.categories):null,disableExtraQuery:this.disableExtraQuery,extent:this.extent?this.extent.clone():null,num:this.num,query:this.query,sortField:this.sortField,sortOrder:this.sortOrder,start:this.start})}toRequestOptions(e,t){var r,i;if(this.categories&&(r=this.categories.map((e=>Array.isArray(e)?JSON.stringify(e):e))),this.extent){var a=Object(h.d)(this.extent,d.a.WGS84);a&&(i="".concat(a.xmin,",").concat(a.ymin,",").concat(a.xmax,",").concat(a.ymax))}var o=this.query;!this.disableExtraQuery&&e.extraQuery&&(o="("+o+")"+e.extraQuery);var s={categories:r,bbox:i,q:o,num:this.num,sortField:null,sortOrder:null,start:this.start};return this.sortField&&(s.sortField=this.sortField.split(",").map((e=>f.toJSON(e.trim()))).join(","),s.sortOrder=this.sortOrder),{query:Object(n.a)(Object(n.a)({},t),s)}}};Object(a.a)([Object(s.b)()],b.prototype,"categories",void 0),Object(a.a)([Object(s.b)()],b.prototype,"disableExtraQuery",void 0),Object(a.a)([Object(s.b)({type:p.a})],b.prototype,"extent",void 0),Object(a.a)([Object(s.b)()],b.prototype,"num",void 0),Object(a.a)([Object(s.b)()],b.prototype,"query",void 0),Object(a.a)([Object(s.b)()],b.prototype,"sortField",void 0),Object(a.a)([Object(s.b)()],b.prototype,"sortOrder",null),Object(a.a)([Object(s.b)()],b.prototype,"start",void 0);var v=b=i=Object(a.a)([Object(l.a)("esri.portal.PortalQueryParams")],b);t.a=v},function(e,t,r){"use strict";function i(e,t,r,i){var n=null,a=1e3;"number"==typeof t?(a=t,i=r):(n=null!=t?t:null,a=r);var o,s=0,c=()=>{s=0,e.apply(i,o)},l=(...e)=>{n&&n.apply(i,e),o=e,a?s||(s=setTimeout(c,a)):c()};return l.remove=()=>{s&&(clearTimeout(s),s=0)},l.forceUpdate=()=>{s&&(clearTimeout(s),c())},l.hasPendingUpdates=()=>!!s,l}r.d(t,"a",(function(){return i}))},,function(e,t,r){"use strict";var i=r(89);t.a=class{constructor(e=(e=>e.values().next().value)){this._peeker=e,this._items=new Set}get length(){return this._items.size}clear(){this._items.clear()}peek(){if(0!==this._items.size)return this._peeker(this._items)}push(e){this.contains(e)||this._items.add(e)}contains(e){return this._items.has(e)}pop(){if(0!==this.length){var e=this.peek();return this._items.delete(Object(i.d)(e)),e}}remove(e){this._items.delete(e)}filter(e){return this._items.forEach((t=>{e(t)||this._items.delete(t)})),this}}},,function(e,t,r){"use strict";function i(){return new Float32Array(3)}function n(e){var t=new Float32Array(3);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t}function a(e,t,r){var i=new Float32Array(3);return i[0]=e,i[1]=t,i[2]=r,i}function o(){return i()}function s(){return a(1,1,1)}function c(){return a(1,0,0)}function l(){return a(0,1,0)}function u(){return a(0,0,1)}r.d(t,"a",(function(){return n})),r.d(t,"b",(function(){return i})),r.d(t,"c",(function(){return a}));var d=o(),h=s(),p=c(),f=l(),b=u();Object.freeze({__proto__:null,create:i,clone:n,fromValues:a,createView:function(e,t){return new Float32Array(e,t,3)},zeros:o,ones:s,unitX:c,unitY:l,unitZ:u,ZEROS:d,ONES:h,UNIT_X:p,UNIT_Y:f,UNIT_Z:b})},function(e,t,r){"use strict";var i=r(91),n=r(7),a=r(82),o=r(80),s=r(89),c=(r(81),r(88),r(85)),l=r(84),u=(r(83),r(86),r(87),r(146)),d=r(170),h=r(132),p=r(224),f=r(259),b=r(142),v=r(443);function m(){return(m=Object(n.a)((function*(e,t,r){var n=Object(b.c)(e);return Object(v.a)(n,f.a.from(t),Object(i.a)({},r)).then((e=>Object(v.b)(e.data.attachmentGroups,n.path)))}))).apply(this,arguments)}var g=r(190);function y(){return(y=Object(n.a)((function*(e,t,r){var n=Object(b.c)(e);return Object(g.executeQueryForCount)(n,h.a.from(t),Object(i.a)({},r)).then((e=>e.data.count))}))).apply(this,arguments)}var O=r(103);r(101);function j(){return(j=Object(n.a)((function*(e,t,r){var n=Object(b.c)(e);return Object(g.executeQueryForExtent)(n,h.a.from(t),Object(i.a)({},r)).then((e=>({count:e.data.count,extent:O.a.fromJSON(e.data.extent)})))}))).apply(this,arguments)}function _(){return(_=Object(n.a)((function*(e,t,r){var n=Object(b.c)(e);return Object(g.executeQueryForIds)(n,h.a.from(t),Object(i.a)({},r)).then((e=>e.data.objectIds))}))).apply(this,arguments)}function w(e,t,r){return x.apply(this,arguments)}function x(){return(x=Object(n.a)((function*(e,t,r){var n=Object(b.c)(e),a=Object(i.a)({},r),o=h.a.from(t),{data:s}=yield Object(g.executeQuery)(n,o,o.sourceSpatialReference,a);return s}))).apply(this,arguments)}var S=r(180),M=r(168),T=r(212);function P(e,t){return t}function E(e,t,r,i){switch(r){case 0:return k(e,t+i,0);case 1:return"lowerLeft"===e.originPosition?k(e,t+i,1):function({translate:e,scale:t},r,i){return e[i]-r*t[i]}(e,t+i,1)}}function C(e,t,r,i){switch(r){case 2:return k(e,t,2);default:return E(e,t,r,i)}}function A(e,t,r,i){switch(r){case 2:return k(e,t,3);default:return E(e,t,r,i)}}function I(e,t,r,i){switch(r){case 3:return k(e,t,3);default:return C(e,t,r,i)}}function k({translate:e,scale:t},r,i){return e[i]+r*t[i]}class F{constructor(e){this.options=e,this.geometryTypes=["esriGeometryPoint","esriGeometryMultipoint","esriGeometryPolyline","esriGeometryPolygon"],this.previousCoordinate=[0,0],this.transform=null,this.applyTransform=P,this.lengths=[],this.currentLengthIndex=0,this.toAddInCurrentPath=0,this.vertexDimension=0,this.coordinateBuffer=null,this.coordinateBufferPtr=0,this.AttributesConstructor=function(){}}createFeatureResult(){return{fields:[],features:[]}}finishFeatureResult(e){if(this.options.applyTransform&&(e.transform=null),this.AttributesConstructor=function(){},this.coordinateBuffer=null,this.lengths.length=0,e.hasZ){var t=Object(T.a)(e.geometryType,this.options.sourceSpatialReference,e.spatialReference);if(t)for(var r of e.features)t(r.geometry)}}createSpatialReference(){return{}}addField(e,t){e.fields.push(t);var r=e.fields.map((e=>e.name));this.AttributesConstructor=function(){for(var e of r)this[e]=null}}addFeature(e,t){e.features.push(t)}prepareFeatures(e){switch(this.transform=e.transform,this.options.applyTransform&&e.transform&&(this.applyTransform=this.deriveApplyTransform(e)),this.vertexDimension=2,e.hasZ&&this.vertexDimension++,e.hasM&&this.vertexDimension++,e.geometryType){case"esriGeometryPoint":this.addCoordinate=(e,t,r)=>this.addCoordinatePoint(e,t,r),this.createGeometry=e=>this.createPointGeometry(e);break;case"esriGeometryPolygon":this.addCoordinate=(e,t,r)=>this.addCoordinatePolygon(e,t,r),this.createGeometry=e=>this.createPolygonGeometry(e);break;case"esriGeometryPolyline":this.addCoordinate=(e,t,r)=>this.addCoordinatePolyline(e,t,r),this.createGeometry=e=>this.createPolylineGeometry(e);break;case"esriGeometryMultipoint":this.addCoordinate=(e,t,r)=>this.addCoordinateMultipoint(e,t,r),this.createGeometry=e=>this.createMultipointGeometry(e);break;default:Object(S.a)(e.geometryType)}}createFeature(){return this.lengths.length=0,this.currentLengthIndex=0,this.previousCoordinate[0]=0,this.previousCoordinate[1]=0,this.coordinateBuffer=null,this.coordinateBufferPtr=0,{attributes:new this.AttributesConstructor}}allocateCoordinates(){}addLength(e,t,r){0===this.lengths.length&&(this.toAddInCurrentPath=t),this.lengths.push(t)}addQueryGeometry(e,t){var{queryGeometry:r,queryGeometryType:n}=t,a=Object(M.z)(r.clone(),r,!1,!1,this.transform),o=Object(M.k)(a,n,!1,!1);e.queryGeometryType=n,e.queryGeometry=Object(i.a)({},o)}createPointGeometry(e){var t={x:0,y:0,spatialReference:e.spatialReference};return e.hasZ&&(t.z=0),e.hasM&&(t.m=0),t}addCoordinatePoint(e,t,r){switch(t=this.applyTransform(this.transform,t,r,0),r){case 0:e.x=t;break;case 1:e.y=t;break;case 2:"z"in e?e.z=t:e.m=t;break;case 3:e.m=t}}transformPathLikeValue(e,t){var r=0;return t<=1&&(r=this.previousCoordinate[t],this.previousCoordinate[t]+=e),this.applyTransform(this.transform,e,t,r)}addCoordinatePolyline(e,t,r){this.dehydratedAddPointsCoordinate(e.paths,t,r)}addCoordinatePolygon(e,t,r){this.dehydratedAddPointsCoordinate(e.rings,t,r)}addCoordinateMultipoint(e,t,r){0===r&&e.points.push([]);var i=this.transformPathLikeValue(t,r);e.points[e.points.length-1].push(i)}createPolygonGeometry(e){return{rings:[[]],spatialReference:e.spatialReference,hasZ:!!e.hasZ,hasM:!!e.hasM}}createPolylineGeometry(e){return{paths:[[]],spatialReference:e.spatialReference,hasZ:!!e.hasZ,hasM:!!e.hasM}}createMultipointGeometry(e){return{points:[],spatialReference:e.spatialReference,hasZ:!!e.hasZ,hasM:!!e.hasM}}dehydratedAddPointsCoordinate(e,t,r){0===r&&0==this.toAddInCurrentPath--&&(e.push([]),this.toAddInCurrentPath=this.lengths[++this.currentLengthIndex]-1,this.previousCoordinate[0]=0,this.previousCoordinate[1]=0);var i=this.transformPathLikeValue(t,r),n=e[e.length-1];0===r&&(this.coordinateBufferPtr=0,this.coordinateBuffer=new Array(this.vertexDimension),n.push(this.coordinateBuffer)),this.coordinateBuffer[this.coordinateBufferPtr++]=i}deriveApplyTransform(e){var{hasZ:t,hasM:r}=e;return t&&r?I:t?C:r?A:E}}function R(e,t,r){return D.apply(this,arguments)}function D(){return(D=Object(n.a)((function*(e,t,r){var n=Object(b.c)(e),a=Object(i.a)({},r),o=h.a.from(t),s=!o.quantizationParameters,{data:c}=yield Object(g.executeQueryPBF)(n,o,new F({sourceSpatialReference:o.sourceSpatialReference,applyTransform:s}),a);return c}))).apply(this,arguments)}var L=r(106),N=r(269);function V(e,t){var r=e.toJSON();return r.objectIds&&(r.objectIds=r.objectIds.join(",")),r.orderByFields&&(r.orderByFields=r.orderByFields.join(",")),!r.outFields||null!=t&&t.returnCountOnly?delete r.outFields:-1!==r.outFields.indexOf("*")?r.outFields="*":r.outFields=r.outFields.join(","),r.outSpatialReference&&(r.outSR=r.outSR.wkid||JSON.stringify(r.outSR.toJSON()),delete r.outSpatialReference),r.dynamicDataSource&&(r.layer=JSON.stringify({source:r.dynamicDataSource}),delete r.dynamicDataSource),r}function z(e,t,r){return G.apply(this,arguments)}function G(){return(G=Object(n.a)((function*(e,t,r){var n=yield H(e,t,r),a=n.data,o=a.geometryType,s=a.spatialReference,c={};for(var l of a.relatedRecordGroups){var u={fields:void 0,objectIdFieldName:void 0,geometryType:o,spatialReference:s,hasZ:!!a.hasZ,hasM:!!a.hasM,features:l.relatedRecords};if(null!=l.objectId)c[l.objectId]=u;else for(var d in l)l.hasOwnProperty(d)&&"relatedRecords"!==d&&(c[l[d]]=u)}return Object(i.a)(Object(i.a)({},n),{},{data:c})}))).apply(this,arguments)}function U(e,t,r){return q.apply(this,arguments)}function q(){return(q=Object(n.a)((function*(e,t,r){var n=yield H(e,t,r,{returnCountOnly:!0}),a=n.data,o={};for(var s of a.relatedRecordGroups)null!=s.objectId&&(o[s.objectId]=s.count);return Object(i.a)(Object(i.a)({},n),{},{data:o})}))).apply(this,arguments)}function H(e,t){return B.apply(this,arguments)}function B(){return(B=Object(n.a)((function*(e,t,r={},n){var a=Object(N.a)(Object(i.a)(Object(i.a)(Object(i.a)({},e.query),{},{f:"json"},n),V(t,n)));return Object(L.default)(e.path+"/queryRelatedRecords",Object(i.a)(Object(i.a)({},r),{},{query:Object(i.a)(Object(i.a)({},r.query),a)}))}))).apply(this,arguments)}function W(){return(W=Object(n.a)((function*(e,t,r){return t=p.a.from(t),z(Object(b.c)(e),t,r).then((e=>{var t=e.data,r={};return Object.keys(t).forEach((e=>r[e]=u.default.fromJSON(t[e]))),r}))}))).apply(this,arguments)}function J(){return(J=Object(n.a)((function*(e,t,r){return t=p.a.from(t),U(Object(b.c)(e),t,Object(i.a)({},r)).then((e=>e.data))}))).apply(this,arguments)}var Z=r(324),X=class extends Z.a{constructor(e){super(e),this.dynamicDataSource=null,this.format="json",this.gdbVersion=null,this.sourceSpatialReference=null}execute(e,t){return this.executeJSON(e,t).then((e=>u.default.fromJSON(e)))}executeJSON(e,t){var r=this;return Object(n.a)((function*(){var n,a,s=Object(i.a)(Object(i.a)({},r.requestOptions),t),c=r._normalizeQuery(e),l=null!=(null==(n=e.outStatistics)?void 0:n[0]),u=Object(o.a)("featurelayer-pbf-statistics"),d=!l||u;if("pbf"===r.format&&d)try{a=yield R(r.url,c,s)}catch(h){if("query:parsing-pbf"!==h.name)throw h;r.format="json"}return"json"!==r.format&&d||(a=yield w(r.url,c,s)),r._normalizeFields(a.fields),a}))()}executeForCount(e,t){var r=Object(i.a)(Object(i.a)({},this.requestOptions),t),n=this._normalizeQuery(e);return function(e,t,r){return y.apply(this,arguments)}(this.url,n,r)}executeForExtent(e,t){var r=Object(i.a)(Object(i.a)({},this.requestOptions),t),n=this._normalizeQuery(e);return function(e,t,r){return j.apply(this,arguments)}(this.url,n,r)}executeForIds(e,t){var r=Object(i.a)(Object(i.a)({},this.requestOptions),t),n=this._normalizeQuery(e);return function(e,t,r){return _.apply(this,arguments)}(this.url,n,r)}executeRelationshipQuery(e,t){e=p.a.from(e);var r=Object(i.a)(Object(i.a)({},this.requestOptions),t);return(this.gdbVersion||this.dynamicDataSource)&&((e=e.clone()).gdbVersion=e.gdbVersion||this.gdbVersion,e.dynamicDataSource=e.dynamicDataSource||this.dynamicDataSource),function(e,t,r){return W.apply(this,arguments)}(this.url,e,r)}executeRelationshipQueryForCount(e,t){e=p.a.from(e);var r=Object(i.a)(Object(i.a)({},this.requestOptions),t);return(this.gdbVersion||this.dynamicDataSource)&&((e=e.clone()).gdbVersion=e.gdbVersion||this.gdbVersion,e.dynamicDataSource=e.dynamicDataSource||this.dynamicDataSource),function(e,t,r){return J.apply(this,arguments)}(this.url,e,r)}executeAttachmentQuery(e,t){var r=Object(i.a)(Object(i.a)({},this.requestOptions),t);return function(e,t,r){return m.apply(this,arguments)}(this.url,e,r)}_normalizeQuery(e){var t=h.a.from(e);if(t.sourceSpatialReference=t.sourceSpatialReference||this.sourceSpatialReference,!this.gdbVersion&&!this.dynamicDataSource)return t;var r=t===e?t.clone():t;return r.gdbVersion=e.gdbVersion||this.gdbVersion,r.dynamicDataSource=e.dynamicDataSource?d.a.from(e.dynamicDataSource):this.dynamicDataSource,r}_normalizeFields(e){if(Object(s.k)(this.fieldsIndex)&&Object(s.k)(e))for(var t of e){var r=this.fieldsIndex.get(t.name);r&&Object.assign(t,r.toJSON())}}};Object(a.a)([Object(c.b)({type:d.a})],X.prototype,"dynamicDataSource",void 0),Object(a.a)([Object(c.b)()],X.prototype,"fieldsIndex",void 0),Object(a.a)([Object(c.b)()],X.prototype,"format",void 0),Object(a.a)([Object(c.b)()],X.prototype,"gdbVersion",void 0),Object(a.a)([Object(c.b)()],X.prototype,"sourceSpatialReference",void 0);var Y=X=Object(a.a)([Object(l.a)("esri.tasks.QueryTask")],X);t.a=Y},function(e,t,r){"use strict";r.d(t,"a",(function(){return p}));var i=r(91),n=r(89),a=r(179),o=r(176),s=r(104),c=r(111);class l{constructor(e,t,r,i){this.primitiveIndices=e,this._numIndexPerPrimitive=t,this.indices=r,this.position=i,this.center=Object(s.e)(),Object(a.a)(e.length>=1),Object(a.a)(r.length%this._numIndexPerPrimitive==0),Object(a.a)(r.length>=e.length*this._numIndexPerPrimitive),Object(a.a)(3===i.size||4===i.size);var{data:n,size:o}=i,l=e.length,d=o*r[this._numIndexPerPrimitive*e[0]];u.clear(),u.push(d),this.bbMin=Object(s.g)(n[d],n[d+1],n[d+2]),this.bbMax=Object(s.d)(this.bbMin);for(var h=0;h<l;++h)for(var p=this._numIndexPerPrimitive*e[h],f=0;f<this._numIndexPerPrimitive;++f){d=o*r[p+f],u.push(d);var b=n[d];this.bbMin[0]=Math.min(b,this.bbMin[0]),this.bbMax[0]=Math.max(b,this.bbMax[0]),b=n[d+1],this.bbMin[1]=Math.min(b,this.bbMin[1]),this.bbMax[1]=Math.max(b,this.bbMax[1]),b=n[d+2],this.bbMin[2]=Math.min(b,this.bbMin[2]),this.bbMax[2]=Math.max(b,this.bbMax[2])}Object(c.h)(this.center,this.bbMin,this.bbMax,.5),this.radius=.5*Math.max(Math.max(this.bbMax[0]-this.bbMin[0],this.bbMax[1]-this.bbMin[1]),this.bbMax[2]-this.bbMin[2]);for(var v=this.radius*this.radius,m=0;m<u.length;++m){var g=n[d=u.getItemAt(m)]-this.center[0],y=n[d+1]-this.center[1],O=n[d+2]-this.center[2],j=g*g+y*y+O*O;if(!(j<=v)){var _=Math.sqrt(j),w=.5*(_-this.radius);this.radius=this.radius+w,v=this.radius*this.radius;var x=w/_;this.center[0]+=g*x,this.center[1]+=y*x,this.center[2]+=O*x}}u.clear()}getCenter(){return this.center}getBSRadius(){return this.radius}getBBMin(){return this.bbMin}getBBMax(){return this.bbMax}getChildren(){if(this._children)return this._children;if(Object(c.k)(this.bbMin,this.bbMax)>1){for(var e=Object(c.h)(Object(s.e)(),this.bbMin,this.bbMax,.5),t=this.primitiveIndices.length,r=new Uint8Array(t),i=new Array(8),n=0;n<8;++n)i[n]=0;for(var{data:a,size:o}=this.position,u=0;u<t;++u){for(var d=0,h=this._numIndexPerPrimitive*this.primitiveIndices[u],p=o*this.indices[h],f=a[p],b=a[p+1],v=a[p+2],m=1;m<this._numIndexPerPrimitive;++m){var g=a[p=o*this.indices[h+m]],y=a[p+1],O=a[p+2];g<f&&(f=g),y<b&&(b=y),O<v&&(v=O)}f<e[0]&&(d|=1),b<e[1]&&(d|=2),v<e[2]&&(d|=4),r[u]=d,++i[d]}for(var j=0,_=0;_<8;++_)i[_]>0&&++j;if(j<2)return;for(var w=new Array(8),x=0;x<8;++x)w[x]=i[x]>0?new Uint32Array(i[x]):void 0;for(var S=0;S<8;++S)i[S]=0;for(var M=0;M<t;++M){var T=r[M];w[T][i[T]++]=this.primitiveIndices[M]}this._children=new Array(8);for(var P=0;P<8;++P)void 0!==w[P]&&(this._children[P]=new l(w[P],this._numIndexPerPrimitive,this.indices,this.position))}return this._children}static prune(){u.prune()}}var u=new o.a({deallocator:null}),d=r(348),h=r(378);class p extends d.a{constructor(e,t=[],r=0,n=-1){for(var[a,o]of(super(),this._primitiveType=r,this.edgeIndicesLength=n,this.type=2,this._vertexAttributes=new Map,this._indices=new Map,this._boundingInfo=null,e))o&&this._vertexAttributes.set(a,Object(i.a)({},o));if(null==t||0===t.length){var s=function(e){var t=e.values().next().value;return null==t?0:t.data.length/t.size}(this._vertexAttributes),c=Object(h.d)(s);for(var l of(this.edgeIndicesLength=this.edgeIndicesLength<0?s:this.edgeIndicesLength,this._vertexAttributes.keys()))this._indices.set(l,c)}else for(var[u,d]of t)d&&(this._indices.set(u,f(d)),"position"===u&&(this.edgeIndicesLength=this.edgeIndicesLength<0?this._indices.get(u).length:this.edgeIndicesLength))}get vertexAttributes(){return this._vertexAttributes}getMutableAttribute(e){var t=this._vertexAttributes.get(e);return t&&!t.exclusive&&(t.data=Array.from(t.data),t.exclusive=!0),t}get indices(){return this._indices}get indexCount(){var e=this._indices.values().next().value;return e?e.length:0}get primitiveType(){return this._primitiveType}get faceCount(){return this.indexCount/3}get boundingInfo(){return Object(n.j)(this._boundingInfo)&&(this._boundingInfo=this._calculateBoundingInfo()),this._boundingInfo}computeAttachmentOrigin(e){return 0===this.primitiveType?this.computeAttachmentOriginTriangles(e):this.computeAttachmentOriginPoints(e)}computeAttachmentOriginTriangles(e){var t=this.indices.get("position"),r=this.vertexAttributes.get("position");return Object(h.c)(r,t,e)}computeAttachmentOriginPoints(e){var t=this.indices.get("position"),r=this.vertexAttributes.get("position");return Object(h.b)(r,t,e)}invalidateBoundingInfo(){this._boundingInfo=null}_calculateBoundingInfo(){var e=this.indices.get("position");if(0===e.length)return null;var t=0===this.primitiveType?3:1;Object(a.a)(e.length%t==0,"Indexing error: "+e.length+" not divisible by "+t);var r=Object(h.d)(e.length/t),i=this.vertexAttributes.get("position");return new l(r,t,e,i)}}function f(e){if(e.BYTES_PER_ELEMENT===Uint16Array.BYTES_PER_ELEMENT)return e;for(var t of e)if(t>=65536)return e;return new Uint16Array(e)}},,function(e,t,r){"use strict";r.d(t,"a",(function(){return s}));var i=r(82),n=(r(80),r(81),r(88),r(85),r(84)),a=(r(83),r(86),r(87),r(129)),o=r(389),s=e=>{var t=class extends e{constructor(){super(...arguments),this.renderNodeContent=e=>Object(o.b)(e)&&!e.destroyed?Object(a.a)("div",{key:e},e.render()):e instanceof HTMLElement?Object(a.a)("div",{key:e,bind:e,afterCreate:this._attachToNode}):Object(o.a)(e)?Object(a.a)("div",{key:e,bind:e.domNode,afterCreate:this._attachToNode}):null}_attachToNode(e){e.appendChild(this)}};return t=Object(i.a)([Object(n.a)("esri.widgets.Feature.ContentMixin")],t)}},,function(e,t,r){"use strict";r.d(t,"a",(function(){return u})),r.d(t,"b",(function(){return s})),r.d(t,"c",(function(){return b})),r.d(t,"d",(function(){return h})),r.d(t,"e",(function(){return l})),r.d(t,"f",(function(){return d}));var i=r(111),n=r(299),a=r(177),o=r(374);function s(e){return e?{ray:Object(o.b)(e.ray),c0:e.c0,c1:e.c1}:{ray:Object(o.b)(),c0:0,c1:Number.MAX_VALUE}}function c(e,t,r,i=s()){return Object(o.a)(e,i.ray),i.c0=t,i.c1=r,i}function l(e,t=s()){return Object(o.a)(e,t.ray),t.c0=0,t.c1=Number.MAX_VALUE,t}function u(e,t,r=s()){var n=Object(i.o)(e.vector);return Object(o.d)(e.origin,t,r.ray),r.c0=0,r.c1=n,r}function d(e,t){return p(e,e.c0,t)}function h(e,t){return p(e,e.c1,t)}function p(e,t,r){return Object(i.e)(r,e.ray.origin,Object(i.d)(r,e.ray.direction,t))}var f=new n.a((()=>({c0:0,c1:0,ray:null}))),b=Object.freeze({__proto__:null,create:s,wrap:function(e,t,r){var i=f.get();return i.ray=e,i.c0=t,i.c1=r,i},copy:function(e,t=s()){return c(e.ray,e.c0,e.c1,t)},fromValues:c,fromRay:l,fromLineSegment:function(e,t=s()){return u(e,Object(i.q)(a.d.get(),e.vector),t)},fromLineSegmentAndDirection:u,getStart:d,getEnd:h,getAt:p})},function(e,t,r){"use strict";r.d(t,"a",(function(){return l}));var i=r(89),n=r(157),a=r(174),o=r(453),s=r(509),c=r(517);class l extends c.a{constructor(e){super(e.view),this._resources=null,this._transform=Object(a.b)()}get object(){return Object(i.k)(this._resources)?this._resources.object:null}get transform(){return this._transform}set transform(e){Object(n.c)(this._transform,e),Object(i.k)(this._resources)&&(this._resources.object.transformation=this._transform,this._resources.layer.commit())}recreate(){this.attached&&this.createResources()}recreateGeometry(){if(!Object(i.j)(this._resources)){var e=this._resources.object,t=this.view._stage;t.removeMany(e.geometries),e.removeAllGeometries(),this.createGeometries(e),this.visible||e.setVisible(this.visible),t.addMany(e.geometries),this._resources.layer.commit()}}createResources(){this.destroyResources();var e=this.view._stage;if(e){var t=new s.a({isPickable:!1});e.add(t);var r=new o.a({castShadow:!1});r.transformation=this._transform,this.createExternalResources(),this.createGeometries(r),e.addMany(r.geometries),this.forEachExternalMaterial((t=>e.add(t))),e.add(r),t.add(r),t.commit(),this.visible||(r.setVisible(!1),t.commit()),this._resources={layer:t,object:r}}}destroyResources(){var e=this.view._stage;!Object(i.j)(this._resources)&&e&&(e.remove(this._resources.object),e.remove(this._resources.layer),this.forEachExternalMaterial((t=>{e.remove(t),t.dispose()})),e.removeMany(this._resources.object.geometries),this._resources.object.dispose(),this.destroyExternalResources(),this._resources=null)}updateVisibility(e){Object(i.j)(this._resources)||(this._resources.object.setVisible(e),this._resources.layer.commit())}}},,,function(e,t,r){"use strict";r.d(t,"a",(function(){return G}));var i,n=r(91),a=r(89),o=r(81),s=r(110),c=r(105),l=r(104),u=r(111),d=r(135),h=r(368),p=r(255),f=r(179),b=r(378),v=r(357),m=r(388),g=r(379),y=r(332),O=r(461);(i||(i={})).Default={vvSizeEnabled:!1,vvSizeMinSize:Object(O.c)(1,1,1),vvSizeMaxSize:Object(O.c)(100,100,100),vvSizeOffset:Object(O.c)(0,0,0),vvSizeFactor:Object(O.c)(1,1,1),vvSizeValue:Object(O.c)(1,1,1),vvColorEnabled:!1,vvColorValues:[0,0,0,0,0,0,0,0],vvColorColors:[1,0,0,0,1,0,0,0,1,0,0,0,1,0,0,0,1,0,0,0,1,0,0,0,1,0,0,0,1,0,0,0],vvOpacityEnabled:!1,vvOpacityValues:[0,0,0,0,0,0,0,0],vvOpacityOpacities:[1,1,1,1,1,1,1,1],vvSymbolAnchor:[0,0,0],vvSymbolRotationMatrix:Object(y.a)()};var j=i,_=r(82),w=r(300),x=r(307),S=r(313),M=r(286),T=r(267),P=r(380),E=r(249),C=r(322),A=r(426),I=r(349),k=r(280),F=r(489),R=r(615),D={position:0,subdivisionFactor:1,uv0:2,auxpos1:3,auxpos2:4,size:6,sizeFeatureAttribute:6,color:5,colorFeatureAttribute:5,opacityFeatureAttribute:7};class L extends x.a{constructor(e,t){super(e,t),this.stipplePattern=null,this.stippleTextureBind=null,this.stippleTextureRepository=e.stippleTextureRepository}initializeProgram(e){var t=L.shader.get(),r=this.configuration,i=t.build({OITEnabled:0===r.transparencyPassType,output:r.output,slicePlaneEnabled:r.slicePlaneEnabled,sliceHighlightDisabled:!1,sliceEnabledForVertexPrograms:!1,stippleEnabled:r.stippleEnabled,stippleOffColorEnabled:r.stippleOffColorEnabled,stippleUVMaxEnabled:r.stippleIntegerRepeatsEnabled,stippleIntegerRepeatsEnabled:r.stippleIntegerRepeatsEnabled,roundCaps:r.roundCaps,roundJoins:r.roundJoins,vvColor:r.vvColor,vvSize:r.vvSize,vvInstancingEnabled:!0,vvOpacity:r.vvOpacity,falloffEnabled:r.falloffEnabled,innerColorEnabled:r.innerColorEnabled,multipassTerrainEnabled:r.multipassTerrainEnabled,cullAboveGround:r.cullAboveGround});return new M.a(e.rctx,i.generateSource("vertex"),i.generateSource("fragment"),D)}dispose(){super.dispose(),this.stippleTextureRepository.release(this.stipplePattern),this.stipplePattern=null,this.stippleTextureBind=null}bindPass(e,t,r){if(P.a.bindProjectionMatrix(this.program,r.camera.projectionMatrix),4===this.configuration.output&&C.a.bindOutputHighlight(e,this.program,r),r.multipassTerrainEnabled&&(this.program.setUniform2fv("inverseViewport",r.inverseViewport),Object(k.a)(this.program,e,r)),this.program.setUniform1f("intrinsicWidth",t.width),this.program.setUniform4fv("intrinsicColor",t.color),this.program.setUniform1f("miterLimit","miter"!==t.join?0:t.miterLimit),this.program.setUniform2fv("cameraNearFar",r.camera.nearFar),this.program.setUniform1f("pixelRatio",r.camera.pixelRatio),this.program.setUniform2f("screenSize",r.camera.fullViewport[2],r.camera.fullViewport[3]),A.a.bindUniformsWithOpacity(this.program,t),this.stipplePattern!==t.stipplePattern){var i=t.stipplePattern;this.stippleTextureBind=this.stippleTextureRepository.swap(this.stipplePattern,i),this.stipplePattern=i}if(this.configuration.stippleEnabled){var n=Object(a.k)(this.stippleTextureBind)?this.stippleTextureBind(e,0)*r.camera.pixelRatio:1;if(this.program.setUniform1i("stipplePatternTexture",0),this.program.setUniform1f("stipplePatternPixelSizeInv",1/n),this.configuration.stippleOffColorEnabled){var o=Object(a.q)(t.stippleOffColor);this.program.setUniform4f("stippleOffColor",o[0],o[1],o[2],o.length>3?o[3]:1)}}this.configuration.falloffEnabled&&this.program.setUniform1f("falloff",t.falloff),this.configuration.innerColorEnabled&&(this.program.setUniform4fv("innerColor",Object(a.r)(t.innerColor,t.color)),this.program.setUniform1f("innerWidth",t.innerWidth*r.camera.pixelRatio))}bindDraw(e){P.a.bindView(this.program,e),E.a.bindUniformsWithOrigin(this.program,this.configuration,e)}setPipelineState(e,t){var r=this.configuration,i=3===e,n=2===e;return Object(T.d)({blending:0===r.output||7===r.output?i?I.f:Object(I.a)(e):null,depthTest:{func:Object(I.b)(e)},depthWrite:i?!r.transparent&&r.writeDepth&&T.c:Object(I.c)(e),colorWrite:T.b,stencilWrite:r.sceneHasOcludees?F.h:null,stencilTest:r.sceneHasOcludees?t?F.d:F.c:null,polygonOffset:i||n?r.polygonOffset&&N:I.d})}initializePipeline(){var e=this.configuration,t=e.polygonOffset&&N;return e.occluder&&(this._occluderPipelineTransparent=Object(T.d)({blending:I.f,polygonOffset:t,depthTest:F.a,depthWrite:null,colorWrite:T.b,stencilWrite:null,stencilTest:F.f}),this._occluderPipelineOpaque=Object(T.d)({blending:I.f,polygonOffset:t,depthTest:F.a,depthWrite:null,colorWrite:T.b,stencilWrite:F.g,stencilTest:F.e}),this._occluderPipelineMaskWrite=Object(T.d)({blending:null,polygonOffset:t,depthTest:F.b,depthWrite:null,colorWrite:null,stencilWrite:F.h,stencilTest:F.d})),this._occludeePipelineState=this.setPipelineState(this.configuration.transparencyPassType,!0),this.setPipelineState(this.configuration.transparencyPassType,!1)}get primitiveType(){return 5}getPipelineState(e,t){return t?this._occludeePipelineState:this.configuration.occluder?11===e?this._occluderPipelineTransparent:10===e?this._occluderPipelineOpaque:this._occluderPipelineMaskWrite:this.pipeline}}L.shader=new w.a(R.a,(()=>r.e(301).then(r.bind(null,1184))));var N={factor:0,units:-4};class V extends S.a{constructor(){super(...arguments),this.output=0,this.occluder=!1,this.slicePlaneEnabled=!1,this.transparent=!1,this.polygonOffset=!1,this.writeDepth=!1,this.stippleEnabled=!1,this.stippleOffColorEnabled=!1,this.stippleIntegerRepeatsEnabled=!1,this.roundCaps=!1,this.roundJoins=!1,this.vvSize=!1,this.vvColor=!1,this.vvOpacity=!1,this.falloffEnabled=!1,this.innerColorEnabled=!1,this.sceneHasOcludees=!1,this.transparencyPassType=3,this.multipassTerrainEnabled=!1,this.cullAboveGround=!0}}Object(_.a)([Object(S.b)({count:8})],V.prototype,"output",void 0),Object(_.a)([Object(S.b)()],V.prototype,"occluder",void 0),Object(_.a)([Object(S.b)()],V.prototype,"slicePlaneEnabled",void 0),Object(_.a)([Object(S.b)()],V.prototype,"transparent",void 0),Object(_.a)([Object(S.b)()],V.prototype,"polygonOffset",void 0),Object(_.a)([Object(S.b)()],V.prototype,"writeDepth",void 0),Object(_.a)([Object(S.b)()],V.prototype,"stippleEnabled",void 0),Object(_.a)([Object(S.b)()],V.prototype,"stippleOffColorEnabled",void 0),Object(_.a)([Object(S.b)()],V.prototype,"stippleIntegerRepeatsEnabled",void 0),Object(_.a)([Object(S.b)()],V.prototype,"roundCaps",void 0),Object(_.a)([Object(S.b)()],V.prototype,"roundJoins",void 0),Object(_.a)([Object(S.b)()],V.prototype,"vvSize",void 0),Object(_.a)([Object(S.b)()],V.prototype,"vvColor",void 0),Object(_.a)([Object(S.b)()],V.prototype,"vvOpacity",void 0),Object(_.a)([Object(S.b)()],V.prototype,"falloffEnabled",void 0),Object(_.a)([Object(S.b)()],V.prototype,"innerColorEnabled",void 0),Object(_.a)([Object(S.b)()],V.prototype,"sceneHasOcludees",void 0),Object(_.a)([Object(S.b)({count:4})],V.prototype,"transparencyPassType",void 0),Object(_.a)([Object(S.b)()],V.prototype,"multipassTerrainEnabled",void 0),Object(_.a)([Object(S.b)()],V.prototype,"cullAboveGround",void 0);var z=o.a.getLogger("esri.views.3d.webgl-engine.materials.RibbonLineMaterial");class G extends g.a{constructor(e){super(e,q),this._vertexAttributeLocations=D,this.techniqueConfig=new V,this.layout=this.createLayout()}isClosed(e,t){return J(this.params,e,t)}dispose(){}getPassParameters(){return this.params}getTechniqueConfig(e,t){this.techniqueConfig.output=e;var r=Object(a.k)(this.params.stipplePattern);return this.techniqueConfig.stippleEnabled=r,this.techniqueConfig.stippleIntegerRepeatsEnabled=r&&this.params.stippleIntegerRepeats,this.techniqueConfig.stippleOffColorEnabled=r&&Object(a.k)(this.params.stippleOffColor),this.techniqueConfig.slicePlaneEnabled=this.params.slicePlaneEnabled,this.techniqueConfig.sceneHasOcludees=this.params.sceneHasOcludees,this.techniqueConfig.roundJoins="round"===this.params.join,this.techniqueConfig.roundCaps="round"===this.params.cap,this.techniqueConfig.transparent=this.params.transparent,this.techniqueConfig.polygonOffset=this.params.polygonOffset,this.techniqueConfig.writeDepth=this.params.writeDepth,this.techniqueConfig.vvColor=this.params.vvColorEnabled,this.techniqueConfig.vvOpacity=this.params.vvOpacityEnabled,this.techniqueConfig.vvSize=this.params.vvSizeEnabled,this.techniqueConfig.innerColorEnabled=this.params.innerWidth>0&&Object(a.k)(this.params.innerColor),this.techniqueConfig.falloffEnabled=this.params.falloff>0,this.techniqueConfig.occluder=8===this.params.renderOccluded,this.techniqueConfig.transparencyPassType=t?t.transparencyPassType:3,this.techniqueConfig.multipassTerrainEnabled=!!t&&t.multipassTerrainEnabled,this.techniqueConfig.cullAboveGround=!t||t.cullAboveGround,this.techniqueConfig}intersect(e,t,r,i,n,a,o,s,c){c?this.intersectDrapedLineGeometry(e,i,a,o):this.intersectLineGeometry(e,t,r,i,this.params.width,o)}intersectDrapedLineGeometry(e,t,r,i){if(t.options.selectionMode){var n=e.vertexAttributes.get("position").data,a=e.vertexAttributes.get("size"),o=this.params.width;if(this.params.vvSizeEnabled){var c=e.vertexAttributes.get("sizeFeatureAttribute").data[0];o*=Object(s.d)(this.params.vvSizeOffset[0]+c*this.params.vvSizeFactor[0],this.params.vvSizeMinSize[0],this.params.vvSizeMaxSize[0])}else a&&(o*=a.data[0]);for(var l=r[0],u=r[1],d=(o/2+4)*e.screenToWorldRatio,h=Number.MAX_VALUE,p=0;p<n.length-5;p+=3){var f=n[p],b=n[p+1],v=l-f,m=u-b,g=n[p+3]-f,y=n[p+4]-b,O=Object(s.d)((g*v+y*m)/(g*g+y*y),0,1),j=g*O-v,_=y*O-m,w=j*j+_*_;w<h&&(h=w)}h<d*d&&i()}}intersectLineGeometry(e,t,r,i,n,a){if(i.options.selectionMode&&!Object(v.d)(t))if(Object(f.g)(r)){var o=e.vertexAttributes,c=o.get("position").data,l=n;if(this.params.vvSizeEnabled){var h=o.get("sizeFeatureAttribute").data[0];l*=Object(s.d)(this.params.vvSizeOffset[0]+h*this.params.vvSizeFactor[0],this.params.vvSizeMinSize[0],this.params.vvSizeMaxSize[0])}else o.has("size")&&(l*=o.get("size").data[0]);var b=i.camera,m=ee;Object(d.c)(m,i.point);var g=l*b.pixelRatio/2+4*b.pixelRatio;Object(u.v)(ue[0],m[0]-g,m[1]+g,0),Object(u.v)(ue[1],m[0]+g,m[1]+g,0),Object(u.v)(ue[2],m[0]+g,m[1]-g,0),Object(u.v)(ue[3],m[0]-g,m[1]-g,0);for(var y=0;y<4;y++)if(!b.unprojectFromRenderScreen(ue[y],de[y]))return;p.e.fromPoints(b.eye,de[0],de[1],he),p.e.fromPoints(b.eye,de[1],de[2],pe),p.e.fromPoints(b.eye,de[2],de[3],fe),p.e.fromPoints(b.eye,de[3],de[0],be);for(var O=Number.MAX_VALUE,j=W(this.params,o,e.indices)?c.length-2:c.length-5,_=0;_<j;_+=3){Y[0]=c[_]+r[12],Y[1]=c[_+1]+r[13],Y[2]=c[_+2]+r[14];var w=(_+3)%c.length;if(Q[0]=c[w]+r[12],Q[1]=c[w+1]+r[13],Q[2]=c[w+2]+r[14],!(p.e.signedDistance(he,Y)<0&&p.e.signedDistance(he,Q)<0||p.e.signedDistance(pe,Y)<0&&p.e.signedDistance(pe,Q)<0||p.e.signedDistance(fe,Y)<0&&p.e.signedDistance(fe,Q)<0||p.e.signedDistance(be,Y)<0&&p.e.signedDistance(be,Q)<0)){if(b.projectToRenderScreen(Y,te),b.projectToRenderScreen(Q,re),te[2]<0&&re[2]>0){Object(u.i)(K,Y,Q);var x=b.frustum,S=-p.e.signedDistance(x[4],Y)/Object(u.g)(K,p.e.normal(x[4]));Object(u.d)(K,K,S),Object(u.e)(Y,Y,K),b.projectToRenderScreen(Y,te)}else if(te[2]>0&&re[2]<0){Object(u.i)(K,Q,Y);var M=b.frustum,T=-p.e.signedDistance(M[4],Q)/Object(u.g)(K,p.e.normal(M[4]));Object(u.d)(K,K,T),Object(u.e)(Q,Q,K),b.projectToRenderScreen(Q,re)}else if(te[2]<0&&re[2]<0)continue;te[2]=0,re[2]=0;var P=p.d.distance2(p.d.fromPoints(te,re,ae),m);P<O&&(O=P,Object(u.j)(ie,Y),Object(u.j)(ne,Q))}}var E=i.rayBeginPoint,C=i.rayEndPoint;if(O<g*g){var A=Number.MAX_VALUE;if(p.d.closestLineSegmentPoint(p.d.fromPoints(ie,ne,ae),p.d.fromPoints(E,C,oe),$)){Object(u.i)($,$,E);var I=Object(u.o)($);Object(u.d)($,$,1/I),A=I/Object(u.n)(E,C)}a(A,$)}}else z.error("intersection assumes a translation-only matrix")}computeAttachmentOrigin(e,t){var r=e.vertexAttributes;if(!r)return null;var i=e.indices,n=r.get("position");return Object(b.a)(n,i?i.get("position"):null,i&&W(this.params,r,i),t)}createLayout(){var e=Object(h.a)().vec3f("position").f32("subdivisionFactor").vec2f("uv0").vec3f("auxpos1").vec3f("auxpos2");return this.params.vvSizeEnabled?e.f32("sizeFeatureAttribute"):e.f32("size"),this.params.vvColorEnabled?e.f32("colorFeatureAttribute"):e.vec4f("color"),this.params.vvOpacityEnabled&&e.f32("opacityFeatureAttribute"),e}createBufferWriter(){return new H(this.layout,this.params)}getGLMaterial(e){return 0===e.output||7===e.output||4===e.output||1===e.output?new U(e):void 0}validateParameterValues(e){"miter"!==e.join&&(e.miterLimit=0),this.requiresTransparent(e)&&(e.transparent=!0)}requiresTransparent(e){return!!((e.color&&e.color[3])<1||e.innerWidth>0&&this.colorRequiresTransparent(e.innerColor)||e.stipplePattern&&this.colorRequiresTransparent(e.stippleOffColor)||e.falloff>0)}colorRequiresTransparent(e){return Object(a.k)(e)&&e[3]<1&&e[3]>0}}class U extends m.a{constructor(e){super(e),this.updateParameters()}updateParameters(e){this.technique=this.techniqueRep.acquireAndReleaseExisting(L,this.material.getTechniqueConfig(this.output,e),this.technique)}beginSlot(e){return this.technique.configuration.occluder?3===e||10===e||11===e:0===this.output||7===this.output?(this.targetSlot=this.technique.configuration.writeDepth?5:8,e===this.targetSlot):3===e}_updateOccludeeState(e){e.hasOccludees!==this.material.params.sceneHasOcludees&&this.material.setParameterValues({sceneHasOcludees:e.hasOccludees})}ensureParameters(e){0!==this.output&&7!==this.output||this._updateOccludeeState(e),this.updateParameters(e)}bind(e,t){e.bindProgram(this.technique.program),this.technique.bindPass(e,this.material.getPassParameters(),t)}getPipelineState(e,t){return this.technique.getPipelineState(e,t)}}var q=Object(n.a)(Object(n.a)({width:0,color:[1,1,1,1],join:"miter",cap:"butt",miterLimit:5,writeDepth:!0,polygonOffset:!1,stipplePattern:null,stippleIntegerRepeats:!1,stippleOffColor:null,slicePlaneEnabled:!1,vvFastUpdate:!1,transparent:!1,isClosed:!1,falloff:0,innerWidth:0,innerColor:null,sceneHasOcludees:!1},g.b),j.Default);class H{constructor(e,t){switch(this.params=t,this.numJoinSubdivisions=0,this.vertexBufferLayout=e,this.params.join){case"miter":case"bevel":this.numJoinSubdivisions=t.stipplePattern?1:0;break;case"round":this.numJoinSubdivisions=X}}isClosed(e){return W(this.params,e.vertexAttributes,e.indices)}numCapSubdivisions(e){if(this.isClosed(e))return 0;switch(this.params.cap){case"butt":return 0;case"square":return 1;case"round":return Z}}allocate(e){return this.vertexBufferLayout.createBuffer(e)}elementCount(e){var t=2*this.numCapSubdivisions(e)+2,r=e.indices.get("position").length/2+1,i=this.isClosed(e),n=i?2:2*t,a=i?0:1,o=i?r:r-1;if(e.vertexAttributes.has("subdivisions"))for(var s=e.vertexAttributes.get("subdivisions").data,c=a;c<o;++c)n+=4+2*s[c];else n+=(o-a)*(2*this.numJoinSubdivisions+4);return n+=2}write(e,t,r,i){var n=se,a=ce,o=le,s=t.vertexAttributes.get("position").data,c=t.indices&&t.indices.get("position"),l=this.numCapSubdivisions(t);c&&c.length!==2*(s.length/3-1)&&console.warn("RibbonLineMaterial does not support indices");var d=null;t.vertexAttributes.has("subdivisions")&&(d=t.vertexAttributes.get("subdivisions").data);var h=1,p=0;this.params.vvSizeEnabled?p=t.vertexAttributes.get("sizeFeatureAttribute").data[0]:t.vertexAttributes.has("size")&&(h=t.vertexAttributes.get("size").data[0]);var f=[1,1,1,1],b=0;this.params.vvColorEnabled?b=t.vertexAttributes.get("colorFeatureAttribute").data[0]:t.vertexAttributes.has("color")&&(f=t.vertexAttributes.get("color").data);var v=0;this.params.vvOpacityEnabled&&(v=t.vertexAttributes.get("opacityFeatureAttribute").data[0]);var m=s.length/3,g=e.transformation,y=new Float32Array(r.buffer),O=this.vertexBufferLayout.stride/4,j=i*O,_=j,w=(e,t,r,i,n,a,o)=>{if(y[j++]=t[0],y[j++]=t[1],y[j++]=t[2],y[j++]=i,y[j++]=n,y[j++]=a,y[j++]=e[0],y[j++]=e[1],y[j++]=e[2],y[j++]=r[0],y[j++]=r[1],y[j++]=r[2],this.params.vvSizeEnabled?y[j++]=p:y[j++]=h,this.params.vvColorEnabled)y[j++]=b;else{var s=Math.min(4*o,f.length-4);y[j++]=f[s+0],y[j++]=f[s+1],y[j++]=f[s+2],y[j++]=f[s+3]}this.params.vvOpacityEnabled&&(y[j++]=v)};j+=O,Object(u.v)(a,s[0],s[1],s[2]),g&&Object(u.l)(a,a,g);var x=this.isClosed(t);if(x){var S=s.length-3;Object(u.v)(n,s[S],s[S+1],s[S+2]),g&&Object(u.l)(n,n,g)}else{Object(u.j)(n,a),Object(u.v)(o,s[3],s[4],s[5]),g&&Object(u.l)(o,o,g);for(var M=0;M<l;++M){var T=1-M/l;w(n,a,o,T,1,-4,0),w(n,a,o,T,1,4,0)}w(n,a,o,0,0,-4,0),w(n,a,o,0,0,4,0),Object(u.j)(n,a),Object(u.j)(a,o)}for(var P=x?m:m-1,E=x?0:1;E<P;E++){var C=(E+1)%m*3;Object(u.v)(o,s[C+0],s[C+1],s[C+2]),g&&Object(u.l)(o,o,g),w(n,a,o,0,1,-1,E),w(n,a,o,0,1,1,E);for(var A=d?d[E]:this.numJoinSubdivisions,I=0;I<A;++I){var k=(I+1)/(A+1);w(n,a,o,k,1,-2,E),w(n,a,o,k,1,2,E)}w(n,a,o,1,0,-2,E),w(n,a,o,1,0,2,E),Object(u.j)(n,a),Object(u.j)(a,o)}if(x)j=B(y,_+O,y,j,2*O);else{w(n,a,o,0,1,-5,P),w(n,a,o,0,1,5,P);for(var F=0;F<l;++F){var R=(F+1)/l;w(n,a,o,R,1,-5,P),w(n,a,o,R,1,5,P)}}B(y,_+O,y,_,O),j=B(y,j-O,y,j,O)}}function B(e,t,r,i,n){for(var a=0;a<n;a++)r[i++]=e[t++];return i}function W(e,t,r){return J(e,t.get("position").data,r?r.get("position"):null)}function J(e,t,r){return!!e.isClosed&&(r?r.length>2:t.length>6)}var Z=3,X=1,Y=Object(l.e)(),Q=Object(l.e)(),K=Object(l.e)(),$=Object(l.e)(),ee=Object(l.e)(),te=Object(c.e)(),re=Object(c.e)(),ie=Object(l.e)(),ne=Object(l.e)(),ae=p.d.create(),oe=p.d.create(),se=Object(l.e)(),ce=Object(l.e)(),le=Object(l.e)(),ue=[Object(c.e)(),Object(c.e)(),Object(c.e)(),Object(c.e)()],de=[Object(l.e)(),Object(l.e)(),Object(l.e)(),Object(l.e)()],he=p.e.create(),pe=p.e.create(),fe=p.e.create(),be=p.e.create()},function(e,t,r){"use strict";var i=r(91),n=r(7),a=r(82),o=(r(80),r(89)),s=r(81),c=(r(88),r(85)),l=r(84),u=(r(83),r(86),r(87),r(94)),d=r(97),h=r(338),p=r(123),f=r(115),b=r(108),v=r(457),m=r(196),g=r(438),y=r(439),O=r(440),j=r(442),_=r(441),w=r(271),x=["$datastore","$map","$layer","$aggregatedfeatures"],S=s.a.getLogger("esri.widgets.Feature.support.arcadeFeatureUtils");function M(e){return'<ul class="esri-widget__list">'.concat(e.map((e=>"<li>".concat("string"==typeof e?Object(m.a)(Object(m.n)(e)):e,"</li>"))).join(""),"</ul>")}function T(e){return'<table class="esri-widget__table">'.concat(e.keys().map((t=>{var r=e.field(t);return"<tr><th>".concat(t,"</th><td>").concat("string"==typeof r?Object(m.a)(Object(m.n)(r)):r,"</td></tr>")})).join(""),"</table>")}function P({aggregatedFeatures:e,arcadeUtils:t,featureSetVars:r,context:n,viewInfo:a,map:o,graphic:s}){r.forEach((r=>{var c=r.toLowerCase(),l={map:o,spatialReference:a.sr};if("$map"===c&&(n.vars[c]=t.convertMapToFeatureSetCollection(l)),"$layer"===c&&(n.vars[c]=t.convertFeatureLayerToFeatureSet(s.sourceLayer,a.sr)),"$datastore"===c&&(n.vars[c]=t.convertServiceUrlToWorkspace(s.sourceLayer.url,a.sr)),"$aggregatedfeatures"===c){var u=s.layer,{fields:d,objectIdField:h,geometryType:p,spatialReference:f,displayField:b}=u,v=new w.default(Object(i.a)(Object(i.a)({fields:d,objectIdField:h,geometryType:p,spatialReference:f,displayField:b},"feature"===u.type?{templates:u.templates,typeIdField:u.typeIdField,types:u.types}:null),{},{source:e}));n.vars[c]=t.convertFeatureLayerToFeatureSet(v,a.sr)}}))}function E(){return r.e(31).then(r.bind(null,383))}function C(e){return A.apply(this,arguments)}function A(){return(A=Object(n.a)((function*({graphic:e,view:t}){var{isAggregate:r,layer:i}=e;if(!r||!i||"2d"!==(null==t?void 0:t.type))return[];var n=yield t.whenLayerView(i);if(!n.createQuery||!n.queryFeatures)return[];var a=n.createQuery();a.aggregateIds=[e.getObjectId()];var{features:o}=yield n.queryFeatures(a);return o}))).apply(this,arguments)}function I(e){return k.apply(this,arguments)}function k(){return(k=Object(n.a)((function*({expressionAttributes:e,info:t,arcadeUtils:r,spatialReference:i,map:n,graphic:a,view:o}){var s="expression/".concat(t.name),c=r.createSyntaxTree(t.expression),l=x.filter((e=>r.hasVariable(c,e)));yield r.loadScriptDependencies(c,!0,l);var u=r.getViewInfo({spatialReference:i}),d=r.createExecContext(a,u);d.useAsync=!0,P({aggregatedFeatures:yield C({graphic:a,view:o}),arcadeUtils:r,featureSetVars:l,context:d,viewInfo:u,map:n,graphic:a});var h=r.createFunction(c,d),p=yield r.executeAsyncFunction(h,d).catch((e=>S.error("arcade-execution-error",{error:e,graphic:a,expressionInfo:t})));e[s]="string"==typeof p?Object(m.a)(Object(m.n)(p)):Array.isArray(p)?M(p):p&&"esri.arcade.Dictionary"===p.declaredClass?T(p):p}))).apply(this,arguments)}function F(e){return R.apply(this,arguments)}function R(){return(R=Object(n.a)((function*({popupTemplate:e,spatialReference:t,graphic:r,map:i,view:n}){var a=e.expressionInfos,o=[],s={};if(!a||!a.length)return s;var c=yield E();for(var l of a)o.push(I({expressionAttributes:s,info:l,arcadeUtils:c,spatialReference:t,map:i,graphic:r,view:n}));return yield Object(u.j)(o),s}))).apply(this,arguments)}var D="esri.widgets.FeatureViewModel",L=s.a.getLogger(D),N=class extends d.a{constructor(e){super(e),this._handles=new f.a,this._featureAbortController=null,this.graphicChangedThrottled=Object(v.a)(this.graphicChanged,1,this),this.content=null,this.contentViewModels=[],this.defaultPopupTemplateEnabled=!1,this.formattedAttributes=null,this.lastEditInfo=null,this.relatedInfos=new Map,this.title="",this.view=null,this._handles.add(Object(b.a)(this,["graphic","_effectivePopupTemplate"],(()=>this.graphicChangedThrottled())))}destroy(){this._clear(),this._cancelFeatureQuery(),this._handles.destroy(),this._handles=null,this.graphic=null,this._destroyContentViewModels(),this.relatedInfos.clear()}get _effectivePopupTemplate(){return Object(o.k)(this.graphic)?this.graphic.getEffectivePopupTemplate(this.defaultPopupTemplateEnabled):null}get _fieldInfoMap(){return Object(m.b)(Object(m.g)(this._effectivePopupTemplate),this._sourceLayer)}get _sourceLayer(){return Object(m.l)(this.graphic)}set graphic(e){this._set("graphic",e?e.clone():null)}get spatialReference(){return this.get("view.spatialReference")||null}set spatialReference(e){void 0!==e?this._override("spatialReference",e):this._clearOverride("spatialReference")}get map(){return this.get("view.map")||null}set map(e){void 0!==e?this._override("map",e):this._clearOverride("map")}get waitingForContent(){return!!this._featureAbortController}setActiveMedia(e,t){var r=this.contentViewModels[e];r instanceof _.a&&r.setActiveMedia(t)}nextMedia(e){var t=this.contentViewModels[e];t instanceof _.a&&t.next()}previousMedia(e){var t=this.contentViewModels[e];t instanceof _.a&&t.previous()}_clear(){this._set("title",""),this._set("content",null),this._set("formattedAttributes",null)}graphicChanged(){var e=this;return Object(n.a)((function*(){e._cancelFeatureQuery(),e._clear();var{graphic:t}=e;if(t){var r=Object(u.d)();e._featureAbortController=r;try{yield e._queryFeature({signal:r.signal})}catch(i){L.error("error","error loading popupTemplate for graphic",{error:i,graphic:t})}e._featureAbortController===r&&(e._featureAbortController=null)}}))()}_cancelFeatureQuery(){var{_featureAbortController:e}=this;e&&e.abort(),this._featureAbortController=null}_compileContent(e){if(this._destroyContentViewModels(),this.graphic)return Array.isArray(e)?e.map(((e,t)=>"attachments"===e.type?this._compileAttachments(e,t):"custom"===e.type?this._compileCustom(e,t):"fields"===e.type?this._compileFields(e,t):"media"===e.type?this._compileMedia(e,t):"text"===e.type?this._compileText(e,t):void 0)):"string"==typeof e?this._compileText(new h.a({text:e}),0).text:e}_destroyContentViewModels(){this.contentViewModels.forEach((e=>e&&!e.destroyed&&e.destroy())),this._set("contentViewModels",[])}_compileAttachments(e,t){var{graphic:r}=this,{description:n,title:a}=e;return this.contentViewModels[t]=new g.a(Object(i.a)({graphic:r},this._compileTitleAndDesc({title:a,description:n}))),e}_compileCustom(e,t){var{graphic:r}=this,{creator:i,destroyer:n}=e;return this.contentViewModels[t]=new y.a({graphic:r,creator:i,destroyer:n}),e}_compileTitleAndDesc({title:e,description:t}){var{_fieldInfoMap:r,_sourceLayer:i,graphic:n,formattedAttributes:a}=this,{attributes:o}=n,s=a.global;return{title:Object(m.s)({attributes:o,fieldInfoMap:r,globalAttributes:s,layer:i,text:e}),description:Object(m.s)({attributes:o,fieldInfoMap:r,globalAttributes:s,layer:i,text:t})}}_compileFields(e,t){var{_effectivePopupTemplate:r,formattedAttributes:n}=this,a=e.clone(),o=(null==e?void 0:e.fieldInfos)||(null==r?void 0:r.fieldInfos),s=null==r?void 0:r.expressionInfos,c=Object(i.a)(Object(i.a)({},n.global),n.content[t]),{description:l,title:u}=a,d=new O.a(Object(i.a)({attributes:c,expressionInfos:s,fieldInfos:o},this._compileTitleAndDesc({title:u,description:l})));return this.contentViewModels[t]=d,a.fieldInfos=d.formattedFieldInfos.slice(0),a}_compileMedia(e,t){var{graphic:r,_fieldInfoMap:n,_effectivePopupTemplate:a,relatedInfos:o,_sourceLayer:s}=this,{attributes:c}=r,l=this.formattedAttributes.global,u=e.clone(),{description:d,mediaInfos:h,title:p}=u,f=new _.a(Object(i.a)({activeMediaInfoIndex:u.activeMediaInfoIndex||0,attributes:c,layer:s,fieldInfoMap:n,formattedAttributes:l,mediaInfos:h,popupTemplate:a,relatedInfos:o},this._compileTitleAndDesc({title:p,description:d})));return u.mediaInfos=f.formattedMediaInfos.slice(0),this.contentViewModels[t]=f,u}_compileText(e,t){var r=e.clone(),{graphic:i,_fieldInfoMap:n,_sourceLayer:a}=this;if(r&&r.text){var{attributes:o}=i,s=this.formattedAttributes.global;r.text=Object(m.s)({attributes:o,fieldInfoMap:n,globalAttributes:s,layer:a,text:r.text})}return this.contentViewModels[t]=new y.a({graphic:i,creator:r.text}),r}_compileLastEditInfo(){var{_effectivePopupTemplate:e,_sourceLayer:t,graphic:r}=this;if(e){var{lastEditInfoEnabled:i}=e,n=null==t?void 0:t.editFieldsInfo;return i&&n?Object(m.e)(n,r.attributes):void 0}}_compileTitle(e){var{_fieldInfoMap:t,_sourceLayer:r,graphic:i}=this,{attributes:n}=i,a=this.formattedAttributes.global;return Object(m.s)({attributes:n,fieldInfoMap:t,globalAttributes:a,layer:r,text:e})}_getTitle(){var e=this;return Object(n.a)((function*(){var{_effectivePopupTemplate:t,graphic:r}=e,i=null==t?void 0:t.title;return Object(m.m)(i,{graphic:r})}))()}_getContent(){var e=this;return Object(n.a)((function*(){var{_effectivePopupTemplate:t,graphic:r}=e,i=null==t?void 0:t.content;return Object(m.m)(i,{graphic:r})}))()}_queryFeature(e){var t=this;return Object(n.a)((function*(){var{_featureAbortController:r,_sourceLayer:i,graphic:n,_effectivePopupTemplate:a,spatialReference:o,map:s,view:c}=t,{content:{value:l},title:{value:d}}=yield Object(u.j)({content:t._getContent(),title:t._getTitle()});if(r===t._featureAbortController&&n){var{expressionAttributes:{value:h}}=yield Object(u.j)({checkForRelatedFeatures:t._checkForRelatedFeatures(e),expressionAttributes:F({popupTemplate:t._effectivePopupTemplate,spatialReference:o,graphic:n,map:s,view:c}),queryUpdatedFeature:Object(m.p)({graphic:n,popupTemplate:a,layer:i,spatialReference:o},e)});r===t._featureAbortController&&n&&(t._set("formattedAttributes",t._createFormattedAttributes(l,h)),t._set("title",t._compileTitle(d)),t._set("lastEditInfo",t._compileLastEditInfo()||null),t._set("content",t._compileContent(l)||null))}}))()}_createFormattedAttributes(e,t){var{_effectivePopupTemplate:r,graphic:n,relatedInfos:a,_sourceLayer:o,_fieldInfoMap:s}=this,c=null==r?void 0:r.fieldInfos,l=Object(i.a)(Object(i.a)({},n.attributes),t),u={global:Object(m.d)({fieldInfos:c,graphic:n,attributes:l,layer:o,fieldInfoMap:s,relatedInfos:a}),content:[]};return Array.isArray(e)&&e.forEach(((e,t)=>{"fields"===e.type&&e.fieldInfos&&(u.content[t]=Object(m.d)({fieldInfos:e.fieldInfos,graphic:n,attributes:l,layer:o,fieldInfoMap:s,relatedInfos:a}))})),u}_checkForRelatedFeatures(e){var{graphic:t,_effectivePopupTemplate:r}=this;return this._queryRelatedInfos(t,Object(m.g)(r),e)}_queryRelatedInfos(e,t,r){var i=this;return Object(n.a)((function*(){var{relatedInfos:n,_sourceLayer:a}=i;n.clear();var s=Object(o.k)(a.associatedLayer)?yield a.associatedLayer.load(r):a;if(s){var c=t.filter((e=>e&&Object(m.o)(e.fieldName)));if(c&&c.length){t.forEach((e=>i._configureRelatedInfo(e,s)));var l=yield Object(j.c)({relatedInfos:n,layer:s},r);Object.keys(l).forEach((e=>{var t,r=n.get(e.toString()),i=null==(t=l[e])?void 0:t.value;r&&i&&(r.layerInfo=i.data)}));var u=yield Object(j.d)({graphic:e,relatedInfos:n,layer:s},r);Object.keys(u).forEach((e=>{var t;Object(j.e)(null==(t=u[e])?void 0:t.value,n.get(e.toString()))}))}}}))()}_configureRelatedInfo(e,t){var{relatedInfos:r}=this,i=Object(j.b)(e.fieldName);if(i){var{layerId:n,fieldName:a}=i;if(n){var o=r.get(n.toString())||Object(j.a)(n,t);o&&(Object(j.f)({relatedInfo:o,fieldName:a,fieldInfo:e}),this.relatedInfos.set(n,o))}}}};Object(a.a)([Object(c.b)()],N.prototype,"_featureAbortController",void 0),Object(a.a)([Object(c.b)({readOnly:!0})],N.prototype,"_effectivePopupTemplate",null),Object(a.a)([Object(c.b)({readOnly:!0})],N.prototype,"_fieldInfoMap",null),Object(a.a)([Object(c.b)({readOnly:!0})],N.prototype,"_sourceLayer",null),Object(a.a)([Object(c.b)({readOnly:!0})],N.prototype,"content",void 0),Object(a.a)([Object(c.b)({readOnly:!0})],N.prototype,"contentViewModels",void 0),Object(a.a)([Object(c.b)({type:Boolean})],N.prototype,"defaultPopupTemplateEnabled",void 0),Object(a.a)([Object(c.b)({readOnly:!0})],N.prototype,"formattedAttributes",void 0),Object(a.a)([Object(c.b)({type:p.a,value:null})],N.prototype,"graphic",null),Object(a.a)([Object(c.b)({readOnly:!0})],N.prototype,"lastEditInfo",void 0),Object(a.a)([Object(c.b)()],N.prototype,"relatedInfos",void 0),Object(a.a)([Object(c.b)()],N.prototype,"spatialReference",null),Object(a.a)([Object(c.b)({readOnly:!0})],N.prototype,"title",void 0),Object(a.a)([Object(c.b)()],N.prototype,"map",null),Object(a.a)([Object(c.b)({readOnly:!0})],N.prototype,"waitingForContent",null),Object(a.a)([Object(c.b)()],N.prototype,"view",void 0);var V=N=Object(a.a)([Object(l.a)(D)],N);t.a=V},,function(e,t,r){"use strict";function i(e){return!!e&&e.prototype&&e.prototype.declaredClass&&0===e.prototype.declaredClass.indexOf("esri.core.Collection")}r.d(t,"a",(function(){return i}))},function(e,t,r){"use strict";r.d(t,"a",(function(){return a})),r.d(t,"b",(function(){return c}));var i=r(124),n=r(474);function a(e,t){var r;if(t.write&&!t.write.writer&&(!1!==t.write.enabled||t.write.overridePolicy)){var a,s=null!=(r=null==e?void 0:e.ndimArray)?r:0;e&&(1===s||"type"in e&&Object(n.a)(e.type))?t.write.writer=l:t.write.writer=s>1?(a=s,function(e,t,r,n){var o;if(null===e)o=null;else{o=u(e,n,a);for(var s=a,c=o;s>0&&Array.isArray(c);)s--,c=c[0];if(void 0!==c)for(var l=0;l<s;l++)o=[o]}Object(i.c)(r,o,t)}):o}}function o(e,t,r,n){Object(i.c)(r,s(e,n),t)}function s(e,t){return e&&"function"==typeof e.write?e.write({},t):e&&"function"==typeof e.toJSON?e.toJSON():"number"==typeof e?c(e):e}function c(e){return e===-1/0?-Number.MAX_VALUE:e===1/0?Number.MAX_VALUE:isNaN(e)?null:e}function l(e,t,r,n){var a;null===e?a=null:e&&"function"==typeof e.map?"function"==typeof(a=e.map((e=>s(e,n)))).toArray&&(a=a.toArray()):a=[s(e,n)],Object(i.c)(r,a,t)}function u(e,t,r){return 0!==r&&Array.isArray(e)?e.map((e=>u(e,t,r-1))):s(e,t)}},function(e,t,r){"use strict";r.d(t,"a",(function(){return a}));r(80);var i=r(81),n=r(240);function a(e,t,r){if(e&&t)if("object"==typeof t)for(var i of Object.getOwnPropertyNames(t))a(e,i,t[i]);else{if(-1!==t.indexOf(".")){var o=t.split("."),s=o.splice(o.length-1,1)[0];return void a(Object(n.b)(e,o),s,r)}e[t]=r}}i.a.getLogger("esri.core.accessorSupport.set")},function(e,t,r){"use strict";r.d(t,"a",(function(){return i}));class i{constructor(e,t){this._observers=e,this._observer=t}remove(){this._observers.delete(this._observer)}}},function(e,t,r){"use strict";r.d(t,"a",(function(){return o})),r.d(t,"b",(function(){return c})),r.d(t,"c",(function(){return l})),r.d(t,"d",(function(){return a})),r.d(t,"e",(function(){return s})),r.d(t,"f",(function(){return n}));r(91),r(80);var i=r(89);function n(e,t){return e.vertexBuffers[t].size/a(e.layout[t])}function a(e){return e[0].stride}function o(e,t,r,i,n){var a=e.gl,o=e.capabilities.instancing;for(var s of(e.bindBuffer(r),i)){var c=t[s.name],l=(n||(0+s.baseInstance?s.baseInstance:0))*s.stride;if(void 0===c&&console.error("There is no location for vertex attribute '".concat(s.name,"' defined.")),s.baseInstance&&!s.divisor&&console.error("Vertex attribute '".concat(s.name,"' uses baseInstanceOffset without divisor.")),s.count<=4)a.vertexAttribPointer(c,s.count,s.type,s.normalized,s.stride,s.offset+l),a.enableVertexAttribArray(c),s.divisor&&s.divisor>0&&o&&o.vertexAttribDivisor(c,s.divisor);else if(9===s.count)for(var u=0;u<3;u++)a.vertexAttribPointer(c+u,3,s.type,s.normalized,s.stride,s.offset+12*u+l),a.enableVertexAttribArray(c+u),s.divisor&&s.divisor>0&&o&&o.vertexAttribDivisor(c+u,s.divisor);else if(16===s.count)for(var d=0;d<4;d++)a.vertexAttribPointer(c+d,4,s.type,s.normalized,s.stride,s.offset+16*d+l),a.enableVertexAttribArray(c+d),s.divisor&&s.divisor>0&&o&&o.vertexAttribDivisor(c+d,s.divisor);else console.error("Unsupported vertex attribute element count: "+s.count)}}function s(e,t,r,i){var n=e.gl,a=e.capabilities.instancing;for(var o of(e.bindBuffer(r),i)){var s=t[o.name];if(o.count<=4)n.disableVertexAttribArray(s),o.divisor&&o.divisor>0&&a&&a.vertexAttribDivisor(s,0);else if(9===o.count)for(var c=0;c<3;c++)n.disableVertexAttribArray(s+c),o.divisor&&o.divisor>0&&a&&a.vertexAttribDivisor(s+c,0);else if(16===o.count)for(var l=0;l<4;l++)n.disableVertexAttribArray(s+l),o.divisor&&o.divisor>0&&a&&a.vertexAttribDivisor(s+l,0);else console.error("Unsupported vertex attribute element count: "+o.count)}e.unbindBuffer(34962)}function c(e){switch(e){case 6406:case 6409:case 36168:return 1;case 6410:case 32854:case 33325:case 32854:case 33189:return 2;case 6407:case 6402:return 3;case 6408:case 34041:case 33326:case 35898:case 33327:case 34041:return 4;case 33328:case 34842:return 8;case 34836:return 16;case 33776:case 33777:return.5;case 33778:case 33779:return 1;case 37488:case 37489:case 37492:case 37493:case 37494:case 37495:return.5;case 37490:case 37491:case 37496:case 37497:return 1}return 0}function l(e){if(Object(i.j)(e))return 0;if("colorAttachment"in e)return e.glName?l(e.colorAttachment)+l(e.depthStencilAttachment):0;if("descriptor"in e)return e.glName?l(e.descriptor):0;var t=e.internalFormat||"pixelFormat"in e&&e.pixelFormat;if(!t)return 0;var r="hasMipmap"in e&&e.hasMipmap?1.3:1,n=e.width*e.height;return c(t)*n*r}},function(e,t,r){"use strict";r.d(t,"a",(function(){return i}));class i{}},function(e,t,r){"use strict";r.d(t,"a",(function(){return p})),r.d(t,"b",(function(){return l})),r.d(t,"c",(function(){return s}));r(80);var i=r(295),n=(r(92),r(89)),a=r(100),o=(r(123),r(327));function s(e){return"declaredClass"in e}function c(e){return"declaredClass"in e}function l(e){return Object(n.j)(e)?null:s(e)?e:Object(a.a)(function(e){var t=e.spatialReference.toJSON();switch(e.type){case"point":var{x:r,y:i,z:n,m:a}=e;return{x:r,y:i,z:n,m:a,spatialReference:t};case"polygon":var{rings:o,hasZ:s,hasM:c}=e;return{rings:u(o),hasZ:s,hasM:c,spatialReference:t};case"polyline":var{paths:l,hasZ:p,hasM:f}=e;return{paths:u(l),hasZ:p,hasM:f,spatialReference:t};case"extent":var{xmin:b,xmax:v,ymin:m,ymax:g,zmin:y,zmax:O,mmin:j,mmax:_,hasZ:w,hasM:x}=e;return{xmin:b,xmax:v,ymin:m,ymax:g,zmin:y,zmax:O,mmin:j,mmax:_,hasZ:w,hasM:x,spatialReference:t};case"multipoint":var{points:S,hasZ:M,hasM:T}=e;return{points:h(S)?d(S):S,hasZ:M,hasM:T,spatialReference:t};default:return}}(e))}function u(e){return function(e){for(var t of e)if(0!==t.length)return h(t);return!1}(e)?e.map((e=>d(e))):e}function d(e){return e.map((e=>Object(i.n)(e)))}function h(e){return e.length&&(Object(i.d)(e[0])||Object(i.e)(e[0]))}function p(e,t){if(!e)return null;var r;if(c(e)){if(null==t)return e.clone();if(c(t))return t.copy(e)}return null!=t?((r=t).x=e.x,r.y=e.y,r.spatialReference=e.spatialReference,e.hasZ?(r.z=e.z,r.hasZ=e.hasZ):(r.z=null,r.hasZ=!1),e.hasM?(r.m=e.m,r.hasM=!0):(r.m=null,r.hasM=!1)):(r=Object(o.d)(e.x,e.y,e.z,e.spatialReference),e.hasM&&(r.m=e.m,r.hasM=!0)),r}},,,function(e,t,r){"use strict";r.d(t,"a",(function(){return n})),r.d(t,"b",(function(){return a}));var i=r(88);function n(e){var t=Object(i.e)(100*(1-e));return Math.max(0,Math.min(t,100))}function a(e){var t=1-e/100;return Math.max(0,Math.min(t,1))}},function(e,t,r){"use strict";r.d(t,"a",(function(){return n})),r.d(t,"b",(function(){return a}));var i=r(89);function n(e){return e&&"function"==typeof e.highlight}function a(e,t,r){return Object(i.j)(e)||e>r&&(0===t||e<t)}},,function(e,t,r){"use strict";t.a=class{constructor(e,t){this._context=e,this._desc=t,this._context.instanceCounter.increment(5,this);var r=this._context.gl;this.glName=r.createRenderbuffer(),this._context.bindRenderbuffer(this),r.renderbufferStorage(r.RENDERBUFFER,t.internalFormat,t.width,t.height)}get descriptor(){return this._desc}resize(e,t){var r=this._desc;if(r.width!==e||r.height!==t){r.width=e,r.height=t;var i=this._context.gl;this._context.bindRenderbuffer(this),i.renderbufferStorage(i.RENDERBUFFER,r.internalFormat,r.width,r.height)}}dispose(){this._context&&(this._context.gl.deleteRenderbuffer(this.glName),this._context.instanceCounter.decrement(5,this),this._context=null)}}},function(e,t,r){"use strict";r.d(t,"a",(function(){return p}));var i,n,a,o,s,c,l,u=r(120),d=r(119),h=r(328);function p(e){e.vertex.code.add(Object(d.a)(i||(i=Object(u.a)(["\n    float screenSizePerspectiveMinSize(float size, vec4 factor) {\n      float nonZeroSize = 1.0 - step(size, 0.0);\n\n      return (\n        factor.z * (\n          1.0 +\n          // Multiply by nzs ensures if size is 0, then we ignore proportionally scaled padding\n          nonZeroSize *\n          2.0 * factor.w / (\n            size + (1.0 - nonZeroSize) // Adding 1 - nzs ensures we divide either by size, or by 1\n          )\n        )\n      );\n    }\n  "])))),e.vertex.code.add(Object(d.a)(n||(n=Object(u.a)(["\n    float screenSizePerspectiveViewAngleDependentFactor(float absCosAngle) {\n      return absCosAngle * absCosAngle * absCosAngle;\n    }\n  "])))),e.vertex.code.add(Object(d.a)(a||(a=Object(u.a)(["\n    vec4 screenSizePerspectiveScaleFactor(float absCosAngle, float distanceToCamera, vec4 params) {\n      return vec4(\n        min(params.x / (distanceToCamera - params.y), 1.0),\n        screenSizePerspectiveViewAngleDependentFactor(absCosAngle),\n        params.z,\n        params.w\n      );\n    }\n  "])))),e.vertex.code.add(Object(d.a)(o||(o=Object(u.a)(["\n    float applyScreenSizePerspectiveScaleFactorFloat(float size, vec4 factor) {\n      return max(mix(size * factor.x, size, factor.y), screenSizePerspectiveMinSize(size, factor));\n    }\n  "])))),e.vertex.code.add(Object(d.a)(s||(s=Object(u.a)(["\n    float screenSizePerspectiveScaleFloat(float size, float absCosAngle, float distanceToCamera, vec4 params) {\n      return applyScreenSizePerspectiveScaleFactorFloat(\n        size,\n        screenSizePerspectiveScaleFactor(absCosAngle, distanceToCamera, params)\n      );\n    }\n  "])))),e.vertex.code.add(Object(d.a)(c||(c=Object(u.a)(["\n    vec2 applyScreenSizePerspectiveScaleFactorVec2(vec2 size, vec4 factor) {\n      return mix(size * clamp(factor.x, screenSizePerspectiveMinSize(size.y, factor) / size.y, 1.0), size, factor.y);\n    }\n  "])))),e.vertex.code.add(Object(d.a)(l||(l=Object(u.a)(["\n    vec2 screenSizePerspectiveScaleVec2(vec2 size, float absCosAngle, float distanceToCamera, vec4 params) {\n      return applyScreenSizePerspectiveScaleFactorVec2(size, screenSizePerspectiveScaleFactor(absCosAngle, distanceToCamera, params));\n    }\n  "]))))}(p||(p={})).bindUniforms=function(e,t){if(t.screenSizePerspective){Object(h.a)(t.screenSizePerspective,e,"screenSizePerspective");var r=t.screenSizePerspectiveAlignment||t.screenSizePerspective;Object(h.a)(r,e,"screenSizePerspectiveAlignment")}}},function(e,t,r){"use strict";r.d(t,"a",(function(){return f})),r.d(t,"b",(function(){return s})),r.d(t,"c",(function(){return v})),r.d(t,"d",(function(){return p})),r.d(t,"e",(function(){return u})),r.d(t,"f",(function(){return d})),r.d(t,"g",(function(){return h})),r.d(t,"h",(function(){return c})),r.d(t,"i",(function(){return l}));var i=r(143),n=r(248),a=r(110),o=r(117);function s(e,t,r,i=2,a="abbr"){return"".concat(Object(n.b)(t,{minimumFractionDigits:i,maximumFractionDigits:i})," ").concat(function(e,t,r){return e.units[t][r]}(e,r,a))}function c(e,t,r,i=2,n="abbr"){var a=Object(o.v)(t,r);return s(e,Object(o.c)(t,r,a),a,i,n)}function l(e,t,r,i=2,n="abbr"){var a=Object(o.w)(t,r);return s(e,Object(o.c)(t,r,a),a,i,n)}function u(e,t,r,i=2,n="abbr"){var a=Object(o.s)(t,r);return s(e,Object(o.c)(t,r,a),a,i,n)}function d(e,t,r,i=2,n="abbr"){var a=Object(o.t)(t,r);return s(e,Object(o.c)(t,r,a),a,i,n)}function h(e,t,r,i=2,n="abbr"){var a=Object(o.u)(t,r);return s(e,Object(o.c)(t,r,a),a,i,n)}function p(e,t,r,i=2,n="abbr"){var a=Object(o.r)(t,r);return s(e,Object(o.c)(t,r,a),a,i,n)}function f(e,t,r=2){var i=Object(o.c)(e,t,"degrees"),n=i-Math.floor(i);i-=n;var a=(n*=60)-Math.floor(n);return n-=a,a*=60,"".concat(i.toFixed(),"\xb0 ").concat(n.toFixed(),"' ").concat(a.toFixed(r),'"')}var b=["B","kB","MB","GB","TB"];function v(e,t){var r=0===t?0:Math.floor(Math.log(t)/Math.log(1024));r=Object(a.d)(r,0,b.length-1);var o=Object(n.b)(t/Math.pow(1024,r),{maximumFractionDigits:2});return Object(i.c)(e.units.bytes[b[r]],{fileSize:o})}},function(e,t,r){"use strict";r.d(t,"a",(function(){return n})),r.d(t,"b",(function(){return i})),r.d(t,"c",(function(){return s})),r.d(t,"d",(function(){return c})),r.d(t,"e",(function(){return l})),r.d(t,"f",(function(){return u})),r.d(t,"g",(function(){return o})),r.d(t,"h",(function(){return a}));var i={func:513},n={func:519},a={mask:255},o={mask:0},s={function:{func:519,ref:2,mask:2},operation:{fail:7680,zFail:7680,zPass:0}},c={function:{func:519,ref:2,mask:2},operation:{fail:7680,zFail:7680,zPass:7681}},l={function:{func:514,ref:2,mask:2},operation:{fail:7680,zFail:7680,zPass:7680}},u={function:{func:517,ref:2,mask:2},operation:{fail:7680,zFail:7680,zPass:7680}}},function(e,t,r){"use strict";r.d(t,"a",(function(){return c}));var i,n,a=r(120),o=r(119),s=r(417);function c(e,t){e.fragment.include(s.a),3===t.output?(e.extensions.add("GL_OES_standard_derivatives"),e.fragment.code.add(Object(o.a)(i||(i=Object(a.a)(["\n      float _calculateFragDepth(const in float depth) {\n        // calc polygon offset\n        const float SLOPE_SCALE = 2.0;\n        const float BIAS = 2.0 * .000015259;    // 1 / (2^16 - 1)\n        float m = max(abs(dFdx(depth)), abs(dFdy(depth)));\n        float result = depth + SLOPE_SCALE * m + BIAS;\n        return clamp(result, .0, .999999);\n      }\n\n      void outputDepth(float _linearDepth) {\n        gl_FragColor = float2rgba(_calculateFragDepth(_linearDepth));\n      }\n    "]))))):1===t.output&&e.fragment.code.add(Object(o.a)(n||(n=Object(a.a)(["\n      void outputDepth(float _linearDepth) {\n        gl_FragColor = float2rgba(_linearDepth);\n      }\n    "]))))}},function(e,t,r){"use strict";r.d(t,"a",(function(){return s})),r.d(t,"b",(function(){return u})),r.d(t,"c",(function(){return d})),r.d(t,"d",(function(){return l})),r.d(t,"e",(function(){return c}));var i=r(434),n=r(179);function a(e,t,r,i){var n=r.typedBuffer,a=r.typedBufferStride,o=e.length;i*=a;for(var s=0;s<o;++s){var c=2*e[s];n[i]=t[c],n[i+1]=t[c+1],i+=a}}function o(e,t,r,i,n){var a=r.typedBuffer,o=r.typedBufferStride,s=e.length;if(i*=o,null==n||1===n)for(var c=0;c<s;++c){var l=3*e[c];a[i]=t[l],a[i+1]=t[l+1],a[i+2]=t[l+2],i+=o}else for(var u=0;u<s;++u)for(var d=3*e[u],h=0;h<n;++h)a[i]=t[d],a[i+1]=t[d+1],a[i+2]=t[d+2],i+=o}function s(e,t,r,i,n=1){var a=r.typedBuffer,o=r.typedBufferStride,s=e.length;if(i*=o,1===n)for(var c=0;c<s;++c){var l=4*e[c];a[i]=t[l],a[i+1]=t[l+1],a[i+2]=t[l+2],a[i+3]=t[l+3],i+=o}else for(var u=0;u<s;++u)for(var d=4*e[u],h=0;h<n;++h)a[i]=t[d],a[i+1]=t[d+1],a[i+2]=t[d+2],a[i+3]=t[d+3],i+=o}function c(e,t,r,i,n,a=1){if(r){var s=i.typedBuffer,c=i.typedBufferStride,l=e.length,u=r[0],d=r[1],h=r[2],p=r[4],f=r[5],b=r[6],v=r[8],m=r[9],g=r[10],y=r[12],O=r[13],j=r[14];if(n*=c,1===a)for(var _=0;_<l;++_){var w=3*e[_],x=t[w],S=t[w+1],M=t[w+2];s[n]=u*x+p*S+v*M+y,s[n+1]=d*x+f*S+m*M+O,s[n+2]=h*x+b*S+g*M+j,n+=c}else for(var T=0;T<l;++T)for(var P=3*e[T],E=t[P],C=t[P+1],A=t[P+2],I=u*E+p*C+v*A+y,k=d*E+f*C+m*A+O,F=h*E+b*C+g*A+j,R=0;R<a;++R)s[n]=I,s[n+1]=k,s[n+2]=F,n+=c}else o(e,t,i,n,a)}function l(e,t,r,i,n,a){if(r){var s=r,c=i.typedBuffer,l=i.typedBufferStride,u=e.length,d=s[0],h=s[1],p=s[2],f=s[4],b=s[5],v=s[6],m=s[8],g=s[9],y=s[10],O=Math.abs(1-d*d+f*f+m*m)>1e-5||Math.abs(1-h*h+b*b+g*g)>1e-5||Math.abs(1-p*p+v*v+y*y)>1e-5,j=1e-6,_=1-j;if(n*=l,1===a)for(var w=0;w<u;++w){var x=3*e[w],S=t[x],M=t[x+1],T=t[x+2],P=d*S+f*M+m*T,E=h*S+b*M+g*T,C=p*S+v*M+y*T;if(O){var A=P*P+E*E+C*C;if(A<_&&A>j){var I=Math.sqrt(A);P/=I,E/=I,C/=I}}c[n+0]=P,c[n+1]=E,c[n+2]=C,n+=l}else for(var k=0;k<u;++k){var F=3*e[k],R=t[F],D=t[F+1],L=t[F+2],N=d*R+f*D+m*L,V=h*R+b*D+g*L,z=p*R+v*D+y*L;if(O){var G=N*N+V*V+z*z;if(G<_&&G>j){var U=Math.sqrt(G);N/=U,V/=U,z/=U}}for(var q=0;q<a;++q)c[n+0]=N,c[n+1]=V,c[n+2]=z,n+=l}}else o(e,t,i,n,a)}function u(e,t,r,i,n,a=1){var o=i.typedBuffer,s=i.typedBufferStride,c=e.length;if(n*=s,1===a){if(4===r)for(var l=0;l<c;++l){var u=4*e[l];o[n]=t[u],o[n+1]=t[u+1],o[n+2]=t[u+2],o[n+3]=t[u+3],n+=s}else if(3===r)for(var d=0;d<c;++d){var h=3*e[d];o[n]=t[h],o[n+1]=t[h+1],o[n+2]=t[h+2],o[n+3]=255,n+=s}}else if(4===r)for(var p=0;p<c;++p)for(var f=4*e[p],b=0;b<a;++b)o[n]=t[f],o[n+1]=t[f+1],o[n+2]=t[f+2],o[n+3]=t[f+3],n+=s;else if(3===r)for(var v=0;v<c;++v)for(var m=3*e[v],g=0;g<a;++g)o[n]=t[m],o[n+1]=t[m+1],o[n+2]=t[m+2],o[n+3]=255,n+=s}function d(e,t,r,o,d,h){for(var p of t.fieldNames){var f=e.vertexAttributes.get(p),b=e.indices.get(p);if(f&&b)switch(p){case"position":Object(n.a)(3===f.size);var v=d.getField(p,i.u);v&&c(b,f.data,r,v,h);break;case"normal":Object(n.a)(3===f.size);var m=d.getField(p,i.u);m&&l(b,f.data,o,m,h,1);break;case"uv0":Object(n.a)(2===f.size);var g=d.getField(p,i.m);g&&a(b,f.data,g,h);break;case"color":Object(n.a)(3===f.size||4===f.size);var y=d.getField(p,i.J);y&&u(b,f.data,f.size,y,h);break;case"symbolColor":Object(n.a)(3===f.size||4===f.size);var O=d.getField(p,i.J);O&&u(b,f.data,f.size,O,h);break;case"tangent":Object(n.a)(4===f.size);var j=d.getField(p,i.C);j&&s(b,f.data,j,h)}}}},,,,,,,function(e,t,r){"use strict";r.d(t,"a",(function(){return o}));var i=r(80),n=r(89),a=r(94);function o(e,t,r=!1,o){return new Promise(((c,l)=>{if(Object(a.n)(o))l(s());else{var u=()=>{p(),l(new Error("Unable to load ".concat(t)))},d=()=>{var t=e;p(),c(t)},h=()=>{if(e){var t=e;p(),t.src="",l(s())}},p=()=>{Object(i.a)("esri-image-decode")||(e.removeEventListener("error",u),e.removeEventListener("load",d)),u=null,d=null,e=null,Object(n.k)(o)&&o.removeEventListener("abort",h),h=null,r&&URL.revokeObjectURL(t)};Object(n.k)(o)&&o.addEventListener("abort",h),Object(i.a)("esri-image-decode")?e.decode().then(d,u):(e.addEventListener("error",u),e.addEventListener("load",d))}}))}function s(){try{return new DOMException("Aborted","AbortError")}catch(t){var e=new Error;return e.name="AbortError",e}}},,,function(e,t,r){"use strict";r.d(t,"a",(function(){return o}));var i=r(82),n=(r(80),r(81),r(88),r(85)),a=r(84),o=(r(83),r(86),r(87),e=>{var t=class extends e{constructor(...e){super(...e),this.goToOverride=null,this.view=null}callGoTo(e){var{view:t}=this;return this.goToOverride?this.goToOverride(t,e):t.goTo(e.target,e.options)}};return Object(i.a)([Object(n.b)()],t.prototype,"goToOverride",void 0),Object(i.a)([Object(n.b)()],t.prototype,"view",void 0),t=Object(i.a)([Object(a.a)("esri.widgets.support.GoTo")],t)})},,,function(e,t,r){"use strict";r.d(t,"a",(function(){return n})),r.d(t,"b",(function(){return i}));class i{constructor(e,t,r){this.editGeometry=e,this.vertices=t,this.operation=r,this.undone=!1}apply(){this.vertices.forEach((e=>this.operation.apply(e))),this.editGeometry.components.forEach((e=>e.unnormalizeVertexPositions()));var e={updatedVertices:this.vertices,operation:this.undone?"redo":"apply"};this.editGeometry.emit("change",e)}undo(){this.vertices.forEach((e=>{this.operation.undo(e)}));var e={updatedVertices:this.vertices,operation:"undo"};this.editGeometry.emit("change",e),this.undone=!0}canAccumulate(e){if(this.undone)return!1;if(e.vertices.length!==this.vertices.length)return!1;for(var t=0;t<e.vertices.length;++t)if(e.vertices[t]!==this.vertices[t])return!1;return this.operation.canAccumulate(e.operation)}accumulate(e){if(e instanceof i&&this.canAccumulate(e)){this.vertices.forEach((t=>this.operation.accumulate(t,e.operation))),this.operation.accumulateParams(e.operation),this.editGeometry.components.forEach((e=>e.unnormalizeVertexPositions()));var t={updatedVertices:this.vertices,operation:"apply"};return this.editGeometry.emit("change",t),!0}return!1}}class n{constructor(e){this.helper=e}}},function(e,t,r){"use strict";r.d(t,"a",(function(){return h})),r.d(t,"b",(function(){return m}));var i=r(104),n=r(111),a=r(299),o=r(135),s=r(177),c=r(424);function l(e){return e?{p0:Object(i.d)(e.p0),p1:Object(i.d)(e.p1),p2:Object(i.d)(e.p2)}:{p0:Object(i.e)(),p1:Object(i.e)(),p2:Object(i.e)()}}function u(e,t,r,i=l()){return Object(n.j)(i.p0,e),Object(n.j)(i.p1,t),Object(n.j)(i.p2,r),i}function d(e,t,r){var i=Object(o.i)(e,t),n=Object(o.i)(t,r),a=Object(o.i)(r,e),s=(i+n+a)/2,c=s*(s-i)*(s-n)*(s-a);return c<=0?0:Math.sqrt(c)}function h(e,t,r){return Object(n.i)(b,t,e),Object(n.i)(v,r,e),Object(n.o)(Object(n.f)(b,b,v))/2}var p=new a.a(c.a),f=new a.a((()=>({p0:null,p1:null,p2:null}))),b=Object(i.e)(),v=Object(i.e)(),m=Object.freeze({__proto__:null,create:l,wrap:function(e,t,r){var i=f.get();return i.p0=e,i.p1=t,i.p2=r,i},copy:function(e,t=l()){return u(e.p0,e.p1,e.p2,t)},fromValues:u,distance2:function(e,t){var r=e.p0,i=e.p1,a=e.p2,o=Object(n.i)(s.d.get(),i,r),l=Object(n.i)(s.d.get(),a,i),u=Object(n.i)(s.d.get(),r,a),d=Object(n.i)(s.d.get(),t,r),h=Object(n.i)(s.d.get(),t,i),f=Object(n.i)(s.d.get(),t,a),b=Object(n.f)(o,o,u),v=Object(n.g)(Object(n.f)(s.d.get(),o,b),d),m=Object(n.g)(Object(n.f)(s.d.get(),l,b),h),g=Object(n.g)(Object(n.f)(s.d.get(),u,b),f);if(v>0&&m>0&&g>0){var y=Object(n.g)(b,d);return y*y/Object(n.g)(b,b)}var O=Object(c.b)(Object(c.c)(r,o,p.get()),t),j=Object(c.b)(Object(c.c)(i,l,p.get()),t),_=Object(c.b)(Object(c.c)(a,u,p.get()),t);return Math.min(O,j,_)},intersectRay:function(e,t,r){var i=1e-5,{direction:a,origin:o}=t,{p0:s,p1:c,p2:l}=e,u=c[0]-s[0],d=c[1]-s[1],h=c[2]-s[2],p=l[0]-s[0],f=l[1]-s[1],b=l[2]-s[2],v=a[1]*b-f*a[2],m=a[2]*p-b*a[0],g=a[0]*f-p*a[1],y=u*v+d*m+h*g;if(y>-i&&y<i)return!1;var O=1/y,j=o[0]-s[0],_=o[1]-s[1],w=o[2]-s[2],x=O*(j*v+_*m+w*g);if(x<0||x>1)return!1;var S=_*h-d*w,M=w*u-h*j,T=j*d-u*_,P=O*(a[0]*S+a[1]*M+a[2]*T);return!(P<0||x+P>1)&&(r&&(Object(n.d)(r,a,O*(p*S+f*M+b*T)),Object(n.e)(r,o,r)),!0)},areaPoints2d:d,area2d:function(e){return d(e.p0,e.p1,e.p2)},areaPoints3d:h})},function(e,t,r){"use strict";r.d(t,"a",(function(){return j})),r.d(t,"b",(function(){return O})),r.d(t,"c",(function(){return y}));var i,n,a,o,s,c,l,u,d,h,p=r(120),f=r(110),b=r(119),v=r(254),m=r(581),g=r(525),y=Object(f.f)(6);function O(e){var t=new v.a;return t.extensions.add("GL_OES_standard_derivatives"),t.include(m.a),t.include(g.a,e),t.fragment.uniforms.add("angleCutoff","vec2"),t.fragment.uniforms.add("globalAlpha","float"),e.heightManifoldEnabled&&t.fragment.uniforms.add("heightPlane","vec4"),e.pointDistanceEnabled&&t.fragment.uniforms.add("pointDistanceSphere","vec4"),e.lineVerticalPlaneEnabled&&t.fragment.uniforms.add("lineVerticalPlane","vec4").add("lineVerticalStart","vec3").add("lineVerticalEnd","vec3"),(e.heightManifoldEnabled||e.pointDistanceEnabled||e.lineVerticalPlaneEnabled)&&t.fragment.uniforms.add("maxPixelDistance","float"),e.intersectsLineEnabled&&t.fragment.uniforms.add("intersectsLineStart","vec3").add("intersectsLineEnd","vec3").add("intersectsLineDirection","vec3").add("intersectsLineRadius","float").add("perScreenPixelRatio","float"),(e.lineVerticalPlaneEnabled||e.heightManifoldEnabled)&&t.fragment.code.add(Object(b.a)(i||(i=Object(p.a)(["\n      float planeDistancePixels(vec4 plane, vec3 pos) {\n        float dist = dot(plane.xyz, pos) + plane.w;\n        float width = fwidth(dist);\n        dist /= min(width, maxPixelDistance);\n        return abs(dist);\n      }"])))),e.pointDistanceEnabled&&t.fragment.code.add(Object(b.a)(n||(n=Object(p.a)(["\n    float sphereDistancePixels(vec4 sphere, vec3 pos) {\n      float dist = distance(sphere.xyz, pos) - sphere.w;\n      float width = fwidth(dist);\n      dist /= min(width, maxPixelDistance);\n      return abs(dist);\n    }\n    "])))),e.intersectsLineEnabled&&t.fragment.code.add(Object(b.a)(a||(a=Object(p.a)(["\n    float lineDistancePixels(vec3 start, vec3 dir, float radius, vec3 pos) {\n      float dist = length(cross(dir, pos - start)) / (length(pos) * perScreenPixelRatio);\n      return abs(dist) - radius;\n    }\n    "])))),(e.lineVerticalPlaneEnabled||e.intersectsLineEnabled)&&t.fragment.code.add(Object(b.a)(o||(o=Object(p.a)(["\n    bool pointIsWithinLine(vec3 pos, vec3 start, vec3 end) {\n      vec3 dir = end - start;\n      float t2 = dot(dir, pos - start);\n      float l2 = dot(dir, dir);\n      return t2 >= 0.0 && t2 <= l2;\n    }\n    "])))),t.fragment.code.add(Object(b.a)(s||(s=Object(p.a)(["\n  void main() {\n    vec3 pos;\n    vec3 normal;\n    float depthDiscontinuityAlpha;\n\n    if (!laserlineReconstructFromDepth(pos, normal, depthDiscontinuityAlpha)) {\n      discard;\n    }\n\n    vec4 color = vec4(0, 0, 0, 0);\n  "])))),e.heightManifoldEnabled&&t.fragment.code.add(Object(b.a)(c||(c=Object(p.a)(["\n    {\n      float heightManifoldAlpha = 1.0 - smoothstep(angleCutoff.x, angleCutoff.y, abs(dot(normal, heightPlane.xyz)));\n      vec4 heightManifoldColor = laserlineProfile(planeDistancePixels(heightPlane, pos));\n      color = max(color, heightManifoldColor * heightManifoldAlpha);\n    }\n    "])))),e.pointDistanceEnabled&&t.fragment.code.add(Object(b.a)(l||(l=Object(p.a)(["\n    {\n      // distance to sphere\n      float pointDistanceSphereDistance = sphereDistancePixels(pointDistanceSphere, pos);\n      vec4 pointDistanceSphereColor = laserlineProfile(pointDistanceSphereDistance);\n      float pointDistanceSphereAlpha = 1.0 - smoothstep(angleCutoff.x, angleCutoff.y, abs(dot(normal, normalize(pos - pointDistanceSphere.xyz))));\n\n      color = max(color, pointDistanceSphereColor * pointDistanceSphereAlpha);\n    }\n    "])))),e.lineVerticalPlaneEnabled&&t.fragment.code.add(Object(b.a)(u||(u=Object(p.a)(["\n    {\n      if (pointIsWithinLine(pos, lineVerticalStart, lineVerticalEnd)) {\n        float lineVerticalDistance = planeDistancePixels(lineVerticalPlane, pos);\n\n        vec4 lineVerticalColor = laserlineProfile(lineVerticalDistance);\n        float lineVerticalAlpha = 1.0 - smoothstep(angleCutoff.x, angleCutoff.y, abs(dot(normal, lineVerticalPlane.xyz)));\n\n        color = max(color, lineVerticalColor * lineVerticalAlpha);\n      }\n    }\n    "])))),e.intersectsLineEnabled&&t.fragment.code.add(Object(b.a)(d||(d=Object(p.a)(["\n    {\n      if (pointIsWithinLine(pos, intersectsLineStart, intersectsLineEnd)) {\n        float intersectsLineDistance = lineDistancePixels(intersectsLineStart, intersectsLineDirection, intersectsLineRadius, pos);\n        vec4 intersectsLineColor = laserlineProfile(intersectsLineDistance);\n        float intersectsLineAlpha = 1.0 - smoothstep(angleCutoff.x, angleCutoff.y, 1.0 - abs(dot(normal, intersectsLineDirection)));\n\n        color = max(color, intersectsLineColor * intersectsLineAlpha);\n      }\n    }\n    "])))),t.fragment.code.add(Object(b.a)(h||(h=Object(p.a)(["\n    gl_FragColor = laserlineOutput(color * depthDiscontinuityAlpha);\n  }\n  "])))),t}var j=Object.freeze({__proto__:null,defaultAngleCutoff:y,build:O})},,,function(e,t,r){"use strict";r.d(t,"a",(function(){return z}));var i=r(89),n=r(176),a=r(131),o=r(104),s=r(115),c=r(348),l=["layerObjectAdded","layerObjectRemoved","layerObjectsAdded","layerObjectsRemoved","shaderTransformationChanged","objectTransformation","visibilityChanged","occlusionChanged","highlightChanged","objectGeometryAdded","objectGeometryRemoved","vertexAttrsUpdated"],u=r(221),d=r(111),h=r(255),p=r(179);class f{constructor(){this.bounds=h.g.create(),this.halfSize=0,this.initFrom(null,null,0,0)}init(e){return this.initFrom(e.node,e.bounds,e.halfSize,e.depth)}initFrom(e,t,r,n=this.depth){return this.node=Object(i.k)(e)?e:f.createEmptyNode(),Object(i.k)(t)&&h.g.copy(t,this.bounds),this.halfSize=r,this.depth=n,this}advance(e){var t=this.node.children[e];t||(t=f.createEmptyNode(),this.node.children[e]=t),this.node=t,this.halfSize/=2,this.depth++;var r=w[e];return this.bounds[0]+=r[0]*this.halfSize,this.bounds[1]+=r[1]*this.halfSize,this.bounds[2]+=r[2]*this.halfSize,this.bounds[3]=this.halfSize*S,this}advanceTo(e,t,r=!1){for(;;){if(this.isTerminalFor(e))return t&&t(this,-1),!0;if(this.isLeaf()){if(!r)return t&&t(this,-1),!1;this.node.residents=null}var i=this._childIndex(e);t&&t(this,i),this.advance(i)}}isLeaf(){return null!=this.node.residents}isTerminalFor(e){return e[3]>this.halfSize/2}_childIndex(e){var t=this.bounds;return(t[0]<e[0]?1:0)+(t[1]<e[1]?2:0)+(t[2]<e[2]?4:0)}static createEmptyNode(){return{children:[null,null,null,null,null,null,null,null],terminals:new n.a({shrink:!0}),residents:new n.a({shrink:!0})}}static acquire(){return f._pool.acquire()}static release(e){f._pool.release(e)}static clearPool(){f._pool.prune()}}function b(e,t){e[0]=Math.min(e[0],t[0]-t[3]),e[1]=Math.min(e[1],t[1]-t[3]),e[2]=Math.min(e[2],t[2]-t[3])}function v(e,t){e[0]=Math.max(e[0],t[0]+t[3]),e[1]=Math.max(e[1],t[1]+t[3]),e[2]=Math.max(e[2],t[2]+t[3])}function m(e,t,r){r[0]=e[0]+t,r[1]=e[1]+t,r[2]=e[2]+t}function g(e,t){return!h.c.intersectsSphere(t,e)}function y(e,t,r,i){if(1===t){var n=r(e[0]);h.g.copy(n,i)}else{E[0]=1/0,E[1]=1/0,E[2]=1/0,C[0]=-1/0,C[1]=-1/0,C[2]=-1/0;for(var a=0;a<t;a++){var o=r(e[a]);_(o[3])&&(b(E,o),v(C,o))}Object(d.h)(i,E,C,.5),i[3]=Math.max(C[0]-E[0],C[1]-E[1],C[2]-E[2])/2}}function O(e,t){for(var r=1/0,i=null,n=0;n<8;++n){var a=j(e,t,x[n]);a<r&&(r=a,i=x[n])}return i}function j(e,t,r){return t*(e[0]*r[0]+e[1]*r[1]+e[2]*r[2])}function _(e){return!isNaN(e)&&e!==-1/0&&e!==1/0&&e>0}f._pool=new u.a(f);var w=[Object(o.g)(-1,-1,-1),Object(o.g)(1,-1,-1),Object(o.g)(-1,1,-1),Object(o.g)(1,1,-1),Object(o.g)(-1,-1,1),Object(o.g)(1,-1,1),Object(o.g)(-1,1,1),Object(o.g)(1,1,1)],x=[Object(o.g)(-1,-1,-1),Object(o.g)(-1,-1,1),Object(o.g)(-1,1,-1),Object(o.g)(-1,1,1),Object(o.g)(1,-1,-1),Object(o.g)(1,-1,1),Object(o.g)(1,1,-1),Object(o.g)(1,1,1)],S=Math.sqrt(3),M=[null];var T=h.g.create(),P=Object(o.e)(),E=Object(o.e)(),C=Object(o.e)(),A=new n.a,I=h.g.create(),k=h.g.create(),F=h.g.create(),R=h.g.create(),D=[{min:0,max:0},{min:0,max:0},{min:0,max:0}],L=new n.a,N=[0,0,0,0,0,0,0,0],V=class{constructor(e,t){this._objectToBoundingSphere=e,this._maximumObjectsPerNode=10,this._maximumDepth=20,this._degenerateObjects=new Set,this._root=new f,this._objectCount=0,t&&(void 0!==t.maximumObjectsPerNode&&(this._maximumObjectsPerNode=t.maximumObjectsPerNode),void 0!==t.maximumDepth&&(this._maximumDepth=t.maximumDepth))}get bounds(){return this._root.bounds}get halfSize(){return this._root.halfSize}get root(){return this._root.node}get maximumObjectsPerNode(){return this._maximumObjectsPerNode}get maximumDepth(){return this._maximumDepth}get objectCount(){return this._objectCount}destroy(){this._degenerateObjects.clear(),f.clearPool(),M[0]=null,A.prune(),L.prune()}add(e,t=e.length){this._objectCount+=t,this._grow(e,t);for(var r=f.acquire(),i=0;i<t;i++){var n=e[i];this._isDegenerate(n)?this._degenerateObjects.add(n):(r.init(this._root),this._add(n,r))}f.release(r)}remove(e,t=null){this._objectCount-=e.length;var r=f.acquire();for(var n of e){var a=Object(i.k)(t)?t:h.g.copy(this._objectToBoundingSphere(n),I);_(a[3])?(r.init(this._root),this._remove(n,a,r)):this._degenerateObjects.delete(n)}f.release(r),this._shrink()}update(e,t){if(_(t[3])||!this._isDegenerate(e)){var r=function(e){return M[0]=e,M}(e);this.remove(r,t),this.add(r)}}forEachAlongRay(e,t,r){var i=h.f.wrap(e,t);this._forEachNode(this._root,(e=>{if(!this._intersectsNode(i,e))return!1;var t=e.node;return t.terminals.forAll((e=>{this._intersectsObject(i,e)&&r(e)})),null!==t.residents&&t.residents.forAll((e=>{this._intersectsObject(i,e)&&r(e)})),!0}))}forEachAlongRayWithVerticalOffset(e,t,r,i){var n=h.f.wrap(e,t);this._forEachNode(this._root,(e=>{if(!this._intersectsNodeWithOffset(n,e,i))return!1;var t=e.node;return t.terminals.forAll((e=>{this._intersectsObjectWithOffset(n,e,i)&&r(e)})),null!==t.residents&&t.residents.forAll((e=>{this._intersectsObjectWithOffset(n,e,i)&&r(e)})),!0}))}forEach(e){this._forEachNode(this._root,(t=>{var r=t.node;return r.terminals.forAll(e),null!==r.residents&&r.residents.forAll(e),!0})),this._degenerateObjects.forEach(e)}forEachDegenerateObject(e){this._degenerateObjects.forEach(e)}findClosest(e,t,r,i,n){return this._findClosest(e,"front-to-back"===t?1:-1,r,i,n)}forEachInDepthRange(e,t,r,i,n,a,o,s){this._forEachInDepthRange(e,t,"front-to-back"===r?1:-1,i,n,a,o,s)}forEachNode(e){this._forEachNode(this._root,(t=>e(t.node,t.bounds,t.halfSize)))}_intersectsNode(e,t){return m(t.bounds,2*-t.halfSize,E),m(t.bounds,2*t.halfSize,C),Object(p.i)(e.origin,e.direction,E,C)}_intersectsNodeWithOffset(e,t,r){return m(t.bounds,2*-t.halfSize,E),m(t.bounds,2*t.halfSize,C),r.applyToMinMax(E,C),Object(p.i)(e.origin,e.direction,E,C)}_intersectsObject(e,t){var r=this._objectToBoundingSphere(t);return!(r[3]>0)||h.g.intersectsRay(r,e)}_intersectsObjectWithOffset(e,t,r){var i=this._objectToBoundingSphere(t);return!(i[3]>0)||h.g.intersectsRay(r.applyToBoundingSphere(i),e)}_forEachNode(e,t){for(var r=f.acquire().init(e),i=[r];0!==i.length;){if(t(r=i.pop())&&!r.isLeaf())for(var n=0;n<r.node.children.length;n++)r.node.children[n]&&i.push(f.acquire().init(r).advance(n));f.release(r)}}_forEachNodeDepthOrdered(e,t,r,i=1){var n=f.acquire().init(e),a=[n];for(function(e,t,r){if(!L.length)for(var i=0;i<8;++i)L.push({index:0,distance:0});for(var n=0;n<8;++n){var a=w[n];L.data[n].index=n,L.data[n].distance=j(e,t,a)}L.sort(((e,t)=>e.distance-t.distance));for(var o=0;o<8;++o)r[o]=L.data[o].index}(r,i,N);0!==a.length;){if(t(n=a.pop())&&!n.isLeaf())for(var o=7;o>=0;--o){var s=N[o];s>=n.node.children.length||n.node.children[s]&&a.push(f.acquire().init(n).advance(s))}f.release(n)}}_findClosest(e,t,r,i,n){var a=1/0,o=1/0,s=null,c=O(e,t),l=0,u=n=>{if(++l,!i||i(n)){var c=this._objectToBoundingSphere(n);if(!r||!g(c,r)){var u=j(e,t,h.g.getCenter(c)),d=u-c[3],p=u+c[3];d<a&&(a=d,o=p,s=n)}}};return this._forEachNodeDepthOrdered(this._root,(i=>{if(null!=n&&l>=n)return!1;if(r&&g(i.bounds,r))return!1;if(Object(d.d)(P,c,i.halfSize),Object(d.e)(P,P,i.bounds),j(e,t,P)>o)return!1;var a=i.node;return a.terminals.forAll((e=>{u(e)})),null!==a.residents&&a.residents.forAll((e=>{u(e)})),!0}),e,t),s}_forEachInDepthRange(e,t,r,i,n,a,o,s){var c=-1/0,l=1/0,u={setRange:e=>{1===r?(c=Math.max(c,e.near),l=Math.min(l,e.far)):(c=Math.max(c,-e.far),l=Math.min(l,-e.near))}};u.setRange(i);var p=j(t,r,e),f=O(t,r),b=O(t,-1*r),v=0,m=e=>{if(++v,!o||o(e)){var i=this._objectToBoundingSphere(e),s=h.g.getCenter(i),d=j(t,r,s)-p,f=d-i[3],b=d+i[3];f>l||b<c||a&&g(i,a)||n(e,u)}};this._forEachNodeDepthOrdered(this._root,(e=>{if(null!=s&&v>=s)return!1;if(a&&g(e.bounds,a))return!1;if(Object(d.d)(P,f,e.halfSize),Object(d.e)(P,P,e.bounds),j(t,r,P)-p>l)return!1;if(Object(d.d)(P,b,e.halfSize),Object(d.e)(P,P,e.bounds),j(t,r,P)-p<c)return!1;var i=e.node;return i.terminals.forAll((e=>{m(e)})),null!==i.residents&&i.residents.forAll((e=>{m(e)})),!0}),t,r)}_remove(e,t,r){A.clear();var i=r.advanceTo(t,((e,t)=>{A.push(e.node),A.push(t)}))?r.node.terminals:r.node.residents;if(i.removeUnordered(e),0===i.length)for(var n=A.length-2;n>=0;n-=2){var a=A.data[n],o=A.data[n+1];if(!this._purge(a,o))break}}_nodeIsEmpty(e){if(0!==e.terminals.length)return!1;if(null!==e.residents)return 0===e.residents.length;for(var t=0;t<e.children.length;t++)if(e.children[t])return!1;return!0}_purge(e,t){return t>=0&&(e.children[t]=null),!!this._nodeIsEmpty(e)&&(null===e.residents&&(e.residents=new n.a({shrink:!0})),!0)}_add(e,t){t.advanceTo(this._objectToBoundingSphere(e))?t.node.terminals.push(e):(t.node.residents.push(e),t.node.residents.length>this._maximumObjectsPerNode&&t.depth<this._maximumDepth&&this._split(t))}_split(e){var t=e.node.residents;e.node.residents=null;for(var r=0;r<t.length;r++){var i=f.acquire().init(e);this._add(t.getItemAt(r),i),f.release(i)}}_grow(e,t){if(0!==t&&(y(e,t,(e=>this._objectToBoundingSphere(e)),k),_(k[3])&&!this._fitsInsideTree(k)))if(this._nodeIsEmpty(this._root.node))h.g.copy(k,this._root.bounds),this._root.halfSize=1.25*k[3];else{var r=this._rootBoundsForRootAsSubNode(k);this._placingRootViolatesMaxDepth(r)?this._rebuildTree(k,r):this._growRootAsSubNode(r),f.release(r)}}_rebuildTree(e,t){Object(d.j)(F,t.bounds),F[3]=t.halfSize,y([e,F],2,(e=>e),R);var r=f.acquire().init(this._root);this._root.initFrom(null,R,1.25*R[3]),this._forEachNode(r,(e=>(this.add(e.node.terminals.data,e.node.terminals.length),null!==e.node.residents&&this.add(e.node.residents.data,e.node.residents.length),!0))),f.release(r)}_placingRootViolatesMaxDepth(e){var t=Math.log(e.halfSize/this._root.halfSize)*Math.LOG2E,r=0;return this._forEachNode(this._root,(e=>(r=Math.max(r,e.depth))+t<=this._maximumDepth)),r+t>this._maximumDepth}_rootBoundsForRootAsSubNode(e){for(var t=e[3],r=e,i=-1/0,n=this._root.bounds,a=this._root.halfSize,o=0;o<3;o++){var s=n[o]-a-(r[o]-t),c=r[o]+t-(n[o]+a),l=Math.max(0,Math.ceil(s/(2*a))),u=Math.max(0,Math.ceil(c/(2*a)))+1,d=Math.pow(2,Math.ceil(Math.log(l+u)*Math.LOG2E));i=Math.max(i,d),D[o].min=l,D[o].max=u}for(var h=0;h<3;h++){var p=D[h].min,b=D[h].max,v=(i-(p+b))/2;p+=Math.ceil(v),b+=Math.floor(v);var m=n[h]-a-p*a*2;T[h]=m+(b+p)*a}return T[3]=i*a*S,f.acquire().initFrom(null,T,i*a,0)}_growRootAsSubNode(e){var t=this._root.node;Object(d.j)(k,this._root.bounds),k[3]=this._root.halfSize,this._root.init(e),e.advanceTo(k,null,!0),e.node.children=t.children,e.node.residents=t.residents,e.node.terminals=t.terminals}_shrink(){for(;;){var e=this._findShrinkIndex();if(-1===e)break;this._root.advance(e),this._root.depth=0}}_findShrinkIndex(){if(0!==this._root.node.terminals.length||this._root.isLeaf())return-1;for(var e=null,t=this._root.node.children,r=0,i=0;i<t.length&&null==e;)e=t[r=i++];for(;i<t.length;)if(t[i++])return-1;return r}_isDegenerate(e){return!_(this._objectToBoundingSphere(e)[3])}_fitsInsideTree(e){var t=this._root.bounds,r=this._root.halfSize;return e[3]<=r&&e[0]>=t[0]-r&&e[0]<=t[0]+r&&e[1]>=t[1]-r&&e[1]<=t[1]+r&&e[2]>=t[2]-r&&e[2]<=t[2]+r}};class z extends c.a{constructor(e,t=""){super(),this.apiLayerUid=t,this.type=0,this.events=new a.a,this.isSliceable=!1,this._objects=new n.a,this._stageHandles=new s.a,this.apiLayerUid=t,e=e||{},this.group=e.group||"",this.isVisible=null==e.isVisible||e.isVisible,this.isPickable=null==e.isPickable||e.isPickable,this.translation=e.translation?Object(o.d)(e.translation):Object(o.e)()}destroy(){this.detachStage(),this._stage=null}attachStage(e){var t=this;this.detachStage(),this._stage=e;var r=function(r){t._stageHandles.add(t.events.on(r,(t=>e.handleEvent(r,t))))};for(var i of l)r(i)}detachStage(){this._stageHandles.removeAll(),this.invalidateSpatialQueryAccelerator()}getObjectIds(){return this._objects.map((e=>e.id))}getObjects(){return this._objects}add(e){this._objects.push(e),e.parentLayer=this,this.events.emit("layerObjectAdded",{layer:this,object:e}),Object(i.k)(this._octree)&&this._octree.add([e])}remove(e){this._objects.removeUnordered(e)&&(e.parentLayer=null,this.events.emit("layerObjectRemoved",{layer:this,object:e}),Object(i.k)(this._octree)&&this._octree.remove([e]))}addMany(e){for(var t of(this._objects.pushArray(e),e))t.parentLayer=this;this.events.emit("layerObjectsAdded",{layer:this,objects:e}),Object(i.k)(this._octree)&&this._octree.add(e)}removeMany(e){var t=new Array;if(this._objects.removeUnorderedMany(e,e.length,t),0!==t.length){for(var r of t)r.parentLayer=null;this.events.emit("layerObjectsRemoved",{layer:this,objects:t}),Object(i.k)(this._octree)&&this._octree.remove(t)}}commit(){Object(i.k)(this._stage)&&this._stage.processDirtyLayer(this.id)}notifyObjectBBChanged(e,t){Object(i.k)(this._octree)&&this._octree.update(e,t)}getSpatialQueryAccelerator(){return Object(i.j)(this._octree)&&this._objects.length>50&&this._createOctree(),this._octree}shaderTransformationChanged(){this.invalidateSpatialQueryAccelerator(),this.events.emit("shaderTransformationChanged",this)}invalidateSpatialQueryAccelerator(){this._octree=Object(i.e)(this._octree)}_createOctree(){this._octree=new V((e=>e.getBounds())),this._octree.add(this._objects.data,this._objects.length)}}},,,function(e,t,r){"use strict";r.d(t,"a",(function(){return b})),r.d(t,"b",(function(){return d})),r.d(t,"c",(function(){return u})),r.d(t,"d",(function(){return h}));var i=r(91),n=r(7),a=(r(80),r(89)),o=r(152),s=r(414),c=null;function l(e,t){return Math.floor(Math.random()*(t-e+1)+e)}function u(e,t,r){var{backgroundColor:i,outline:n,dotSize:a}=e,o=r&&r.swatchSize||22,s=Math.round(o*o/Math.pow(a,2)*.8),u=window.devicePixelRatio,d=document.createElement("canvas"),h=o*u;d.width=h,d.height=h,d.style.width=d.width/u+"px",d.style.height=d.height/u+"px";var p=d.getContext("2d");if(i&&(p.fillStyle=i.toCss(!0),p.fillRect(0,0,h,h),p.fill()),p.fillStyle=t.toCss(!0),c&&c.length/2===s)for(var f=0;f<2*s;f+=2){var b=c[f],v=c[f+1];p.fillRect(b,v,a*u,a*u),p.fill()}else{c=[];for(var m=0;m<2*s;m+=2){var g=l(0,h),y=l(0,h);c.push(g,y),p.fillRect(g,y,a*u,a*u),p.fill()}}n&&(n.color&&(p.strokeStyle=n.color.toCss(!0)),p.lineWidth=n.width,p.strokeRect(0,0,h,h));var O=new Image(o,o);return O.src=d.toDataURL(),O}function d(e,t={}){var r="horizontal"===t.align,i=r?75:24,n=r?24:75,{width:a=i,height:o=n,gradient:s=!0}=t,c=window.devicePixelRatio,l=a*c,u=o*c,d=document.createElement("canvas");d.width=l,d.height=u,d.style.width="".concat(a,"px"),d.style.height="".concat(o,"px");var h=d.getContext("2d"),p=r?l:0,f=r?0:u;if(s){var b=h.createLinearGradient(0,0,p,f),v=1/(e.length-1);e.forEach(((e,t)=>b.addColorStop(t*v,e.toString()))),h.fillStyle=b,h.fillRect(0,0,l,u)}else{var m=r?l/e.length:l,g=r?u:u/e.length,y=0,O=0;for(var j of e)h.fillStyle=j.toString(),h.fillRect(y,O,m,g),y=r?y+m:0,O=r?0:O+g}var _=document.createElement("div");return _.style.width="".concat(a,"px"),_.style.height="".concat(o,"px"),_.appendChild(d),_}function h(e,t){return p.apply(this,arguments)}function p(){return(p=Object(n.a)((function*(e,t){switch(e.type){case"web-style":var{previewWebStyleSymbol:i}=yield r.e(281).then(r.bind(null,695));return i(e,h,t);case"label-3d":case"line-3d":case"mesh-3d":case"point-3d":case"polygon-3d":var{previewSymbol3D:n}=yield Promise.all([r.e(27),r.e(280)]).then(r.bind(null,614));return n(e,t);case"simple-marker":case"simple-line":case"simple-fill":case"picture-marker":case"picture-fill":case"text":var{previewSymbol2D:a}=yield Promise.all([r.e(27),r.e(279)]).then(r.bind(null,696));return a(e,t);case"cim":var{previewCIMSymbol:o}=yield Promise.all([r.e(17),r.e(133)]).then(r.bind(null,706));return o(e,t);default:return}}))).apply(this,arguments)}function f(e){return e&&"opacity"in e?e.opacity*f(e.parent):1}function b(e,t){return v.apply(this,arguments)}function v(){return(v=Object(n.a)((function*(e,t){if(e){var n=f(e.layer||e.sourceLayer);if(Object(a.k)(e.symbol)&&(!Object(a.k)(t)||!0!==t.ignoreGraphicSymbol)){var c="web-style"===e.symbol.type?yield e.symbol.fetchSymbol(Object(a.k)(t)?t.abortOptions:null):e.symbol.clone();return Object(s.a)(c,null,n),c}var l=Object(a.k)(t)&&t.renderer||e.get("layer.renderer")||e.get("sourceLayer.renderer"),u=yield l.getSymbolAsync(e,t);if(u){if(u="web-style"===u.type?yield u.fetchSymbol(Object(a.k)(t)?t.abortOptions:null):u.clone(),!("visualVariables"in l)||"visualVariables"in l&&!l.visualVariables||"visualVariables"in l&&l.visualVariables&&!l.visualVariables.length)return u;if(l.arcadeRequiredForVisualVariables&&(Object(a.j)(t)||Object(a.j)(t.arcade))){var d=Object(i.a)({},Object(a.q)(t));d.arcade=yield Object(o.e)(),t=d}var h=yield Promise.resolve().then(r.bind(null,277)),p=[],b=[],v=[],m=[];for(var g of l.visualVariables)switch(g.type){case"color":p.push(g);break;case"opacity":b.push(g);break;case"rotation":m.push(g);break;case"size":g.target||v.push(g)}var y=!!p.length&&p[p.length-1],O=y?h.getColor(y,e,t):null,j=!!b.length&&b[b.length-1],_=j?h.getOpacity(j,e,t):null;if(null!=n&&(_=null!=_?_*n:n),Object(s.a)(u,O,_),v.length){var w=h.getAllSizes(v,e,t);yield Object(s.d)(u,w)}for(var x of m)Object(s.c)(u,h.getRotationAngle(x,e,t),x.axis);return u}}}))).apply(this,arguments)}},,function(e,t,r){"use strict";var i=r(82),n=(r(80),r(81),r(88),r(85)),a=r(84),o=(r(83),r(86),r(87),r(218)),s=r(359),c=r(215),l=r(204),u=r(547),d=class extends(Object(c.a)(Object(l.a)(o.a))){constructor(e){super(e),this.elevationInfo=null,this.graphics=new u.b,this.screenSizePerspectiveEnabled=!0,this.type="graphics",this.internal=!1}destroy(){this.removeAll(),this.graphics.destroy()}add(e){return this.graphics.add(e),this}addMany(e){return this.graphics.addMany(e),this}removeAll(){return this.graphics.removeAll(),this}remove(e){this.graphics.remove(e)}removeMany(e){this.graphics.removeMany(e)}on(e,t){return super.on(e,t)}graphicChanged(e){this.emit("graphic-update",e)}};Object(i.a)([Object(n.b)({type:s.a})],d.prototype,"elevationInfo",void 0),Object(i.a)([Object(n.b)(Object(u.c)())],d.prototype,"graphics",void 0),Object(i.a)([Object(n.b)({type:["show","hide"]})],d.prototype,"listMode",void 0),Object(i.a)([Object(n.b)()],d.prototype,"screenSizePerspectiveEnabled",void 0),Object(i.a)([Object(n.b)({readOnly:!0})],d.prototype,"type",void 0),Object(i.a)([Object(n.b)({constructOnly:!0})],d.prototype,"internal",void 0);var h=d=Object(i.a)([Object(a.a)("esri.layers.GraphicsLayer")],d);t.a=h},function(e,t,r){"use strict";r.d(t,"a",(function(){return u}));var i=r(82),n=r(85),a=r(84),o=r(90),s=r(109),c=class extends o.a{constructor(){super(...arguments),this.enabled=!0}};Object(i.a)([Object(n.b)({type:Boolean})],c.prototype,"enabled",void 0),c=Object(i.a)([Object(a.a)("esri.views.interactive.snapping.Settings.DefaultSnappingAlgorithm")],c);var l=class extends o.a{constructor(e){super(e),this.lineSnapper=new c,this.parallelLineSnapper=new c,this.rightAngleSnapper=new c,this.rightAngleTriangleSnapper=new c,this.shortLineThreshold=15,this.distance=5,this.pointThreshold=1e-6,this.intersectionParallelLineThreshold=1e-6,this.parallelLineThreshold=1e-6,this.touchSensitivityMultiplier=1.5,this.pointOnLineThreshold=1e-6,this.orange=new s.a([255,127,0]),this.lineHintWidthReference=3,this.lineHintWidthTarget=3,this.lineHintFadedExtensions=.3,this.parallelLineHintWidth=2,this.parallelLineHintLength=24,this.parallelLineHintOffset=1.5,this.rightAngleHintSize=24,this.rightAngleHintOutlineSize=1.5}};Object(i.a)([Object(n.b)({type:c,constructOnly:!0,nonNullable:!0,json:{write:!0}})],l.prototype,"lineSnapper",void 0),Object(i.a)([Object(n.b)({type:c,constructOnly:!0,nonNullable:!0,json:{write:!0}})],l.prototype,"parallelLineSnapper",void 0),Object(i.a)([Object(n.b)({type:c,constructOnly:!0,nonNullable:!0,json:{write:!0}})],l.prototype,"rightAngleSnapper",void 0),Object(i.a)([Object(n.b)({type:c,constructOnly:!0,nonNullable:!0,json:{write:!0}})],l.prototype,"rightAngleTriangleSnapper",void 0),Object(i.a)([Object(n.b)({type:Number,nonNullable:!0,range:{min:-1,max:50,step:1},json:{write:!0}})],l.prototype,"shortLineThreshold",void 0),Object(i.a)([Object(n.b)({type:Number,nonNullable:!0,range:{min:-1,max:50,step:1},json:{write:!0}})],l.prototype,"distance",void 0),Object(i.a)([Object(n.b)({type:Number,nonNullable:!0,range:{min:0,max:1e-5},json:{write:!0}})],l.prototype,"pointThreshold",void 0),Object(i.a)([Object(n.b)({type:Number,nonNullable:!0,range:{min:0,max:1e-5},json:{write:!0}})],l.prototype,"intersectionParallelLineThreshold",void 0),Object(i.a)([Object(n.b)({type:Number,nonNullable:!0,range:{min:0,max:1e-5},json:{write:!0}})],l.prototype,"parallelLineThreshold",void 0),Object(i.a)([Object(n.b)({type:Number,nonNullable:!0,range:{min:0,max:10},json:{write:!0}})],l.prototype,"touchSensitivityMultiplier",void 0),Object(i.a)([Object(n.b)({type:Number,nonNullable:!0,range:{min:0,max:1e-5},json:{write:!0}})],l.prototype,"pointOnLineThreshold",void 0),Object(i.a)([Object(n.b)({type:s.a,nonNullable:!0})],l.prototype,"orange",void 0),Object(i.a)([Object(n.b)({type:Number,nonNullable:!0,range:{min:0,max:10},json:{write:!0}})],l.prototype,"lineHintWidthReference",void 0),Object(i.a)([Object(n.b)({type:Number,nonNullable:!0,range:{min:0,max:10},json:{write:!0}})],l.prototype,"lineHintWidthTarget",void 0),Object(i.a)([Object(n.b)({type:Number,nonNullable:!0,range:{min:0,max:1},json:{write:!0}})],l.prototype,"lineHintFadedExtensions",void 0),Object(i.a)([Object(n.b)({type:Number,nonNullable:!0,range:{min:0,max:10},json:{write:!0}})],l.prototype,"parallelLineHintWidth",void 0),Object(i.a)([Object(n.b)({type:Number,nonNullable:!0,range:{min:0,max:50},json:{write:!0}})],l.prototype,"parallelLineHintLength",void 0),Object(i.a)([Object(n.b)({type:Number,nonNullable:!0,range:{min:0,max:5},json:{write:!0}})],l.prototype,"parallelLineHintOffset",void 0),Object(i.a)([Object(n.b)({type:Number,nonNullable:!0,range:{min:0,max:46},json:{write:!0}})],l.prototype,"rightAngleHintSize",void 0),Object(i.a)([Object(n.b)({type:Number,nonNullable:!0,range:{min:0,max:6},json:{write:!0}})],l.prototype,"rightAngleHintOutlineSize",void 0);var u=new(l=Object(i.a)([Object(a.a)("esri.views.interactive.snapping.Settings.Defaults")],l))},function(e,t,r){"use strict";r.d(t,"a",(function(){return i}));class i{constructor(e){this.vertexHandle=null,this.excludeFeature=null,this.visualizer=null,this.geometry=e.geometry,this.elevationInfo=e.elevationInfo,this.pointer=e.pointer,this.vertexHandle=e.vertexHandle,this.excludeFeature=e.excludeFeature,this.visualizer=e.visualizer}get coordinateHelper(){return this.geometry.editGeometry.coordinateHelper}}},function(e,t,r){"use strict";r.d(t,"a",(function(){return i}));class i{constructor(e){this._attached=!1,this._resourcesCreated=!1,this._visible=!0,this.view=e,this.view.watch("ready",(e=>{this._resourcesCreated&&(e?this._createResources():this._destroyResources())}))}applyProps(e){var t=!1;for(var r in e)r in this?"attached"===r?t=e[r]:this[r]=e[r]:console.error("Cannot set unknown property",r);this.attached=t}destroy(){this.attached=!1}get attached(){return this._attached}set attached(e){e!==this._attached&&this.view._stage&&(this._attached=e,this._attached&&!this._resourcesCreated?this._createResources():!this._attached&&this._resourcesCreated&&this._destroyResources())}get visible(){return this._visible}set visible(e){e!==this._visible&&(this._visible=e,this.attached&&this.updateVisibility(e))}_createResources(){this.createResources(),this._resourcesCreated=!0,this.visible||this.updateVisibility(!1)}_destroyResources(){this.destroyResources(),this._resourcesCreated=!1}}},function(e,t,r){"use strict";r.d(t,"a",(function(){return c}));var i,n,a,o=r(120),s=r(119);function c(e,t){t.attributeColor?(e.attributes.add("color","vec4"),e.varyings.add("vColor","vec4"),e.vertex.code.add(Object(s.a)(i||(i=Object(o.a)(["\n      void forwardVertexColor() { vColor = color; }\n    "])))),e.vertex.code.add(Object(s.a)(n||(n=Object(o.a)(["\n      void forwardNormalizedVertexColor() { vColor = color * 0.003921568627451; }\n    "]))))):e.vertex.code.add(Object(s.a)(a||(a=Object(o.a)(["\n      void forwardVertexColor() {}\n      void forwardNormalizedVertexColor() {}\n    "]))))}},,,,function(e,t,r){"use strict";r.d(t,"a",(function(){return p}));var i=r(131),n=r(264),a=r(688),o=r(504),s=r(89);class c{constructor(e,t,r=0){this.editGeometry=e,this.removedVertices=null,this._minNumberOfVertices=0,this.vertices=t,this._minNumberOfVertices=r}apply(){var e="redo";null==this.removedVertices?(this.removedVertices=[],this.vertices.forEach((e=>{var t=this._removeVertex(e);Object(s.k)(t)&&this.removedVertices.push(t)})),e="apply"):this.removedVertices.forEach((e=>{this._redoRemoveVertex(e)}));var t={removedVertices:this.vertices,operation:e};this.editGeometry.emit("change",t)}undo(){this.removedVertices.forEach((e=>{this._undoRemoveVertex(e)}));var e={addedVertices:this.vertices,operation:"undo"};this.editGeometry.emit("change",e)}accumulate(e){return!1}_removeVertex(e){var t=e.component;if(t.vertices.length<=this._minNumberOfVertices)return null;var r={removedVertex:e,createdEdge:null},i=e.left,a=e.right;return t.vertices.splice(t.vertices.indexOf(e),1),i&&(t.edges.splice(t.edges.indexOf(i),1),i.left.right=null),a&&(t.edges.splice(t.edges.indexOf(a),1),a.right.left=null),0===e.index&&a&&this.vertices.length>0&&t.swapVertices(t.vertices.indexOf(a.right),0),i&&a&&(r.createdEdge=new n.b(t,i.left,a.right),t.edges.push(r.createdEdge)),a&&t.updateVertexIndex(a.right,a.right.index-1),r}_redoRemoveVertex(e){console.warn("redo remove vertex not implemented yet")}_undoRemoveVertex(e){var t=e.removedVertex,r=e.removedVertex.component,i=t.left,n=t.right;e.createdEdge&&r.edges.splice(r.edges.indexOf(e.createdEdge),1),r.vertices.push(t),i&&(r.edges.push(i),i.left.right=i),n&&(r.edges.push(n),n.right.left=n),r.updateVertexIndex(t,t.index)}}class l{constructor(e,t,r){this.editGeometry=e,this.edge=t,this.t=r,this.createdVertex=null,this.left=null,this.right=null}apply(){var e="redo",t=this.edge,r=t.component,i=t.component.data,a=t.left,o=t.right;r.edges.splice(r.edges.indexOf(t),1),Object(s.j)(this.createdVertex)&&(e="apply",this.createdVertex=new n.d(t.component)),r.vertices.push(this.createdVertex),this.createdVertex.pos=i.coordinateHelper.lerp(t.left.pos,t.right.pos,this.t,i.coordinateHelper.createNew()),Object(s.j)(this.left)&&(this.left=new n.b(r,a,this.createdVertex)),this.left.left.left?r.edges.push(this.left):r.edges.unshift(this.left),a.right=this.left,Object(s.j)(this.right)&&(this.right=new n.b(r,this.createdVertex,o)),r.edges.push(this.right),o.left=this.right,r.updateVertexIndex(this.createdVertex,a.index+1);var c={addedVertices:[this.createdVertex],operation:e};this.editGeometry.emit("change",c)}undo(){if(Object(s.j)(this.createdVertex)||Object(s.j)(this.left)||Object(s.j)(this.right))return null;var e=this.edge,t=e.component,r=this.createdVertex.left,i=this.createdVertex.right,n=r.left,a=i.right;t.vertices.splice(t.vertices.indexOf(this.createdVertex),1),t.edges.splice(t.edges.indexOf(this.left),1),t.edges.splice(t.edges.indexOf(this.right),1),this.edge.left.left?t.edges.push(this.edge):t.edges.unshift(this.edge),n.right=e,a.left=e,t.updateVertexIndex(n,n.index);var o={removedVertices:[this.createdVertex],operation:"undo"};this.editGeometry.emit("change",o)}accumulate(e){return!1}}var u=r(715),d=r(716),h=r(717);class p extends i.a{constructor(e,t){super(),this.editGeometry=e,this.type=t,this._geometry=null,this._dirty=!0,this._listener=this.editGeometry.on("change",(e=>{e.addedVertices&&this.emit("vertex-add",{type:"vertex-add",vertices:e.addedVertices,operation:e.operation}),e.removedVertices&&this.emit("vertex-remove",{type:"vertex-remove",vertices:e.removedVertices,operation:e.operation}),e.updatedVertices&&this.emit("vertex-update",{type:"vertex-update",vertices:e.updatedVertices,operation:e.operation}),this._dirty=!0}))}destroy(){this._listener.remove()}splitEdge(e,t){var r=new l(this.editGeometry,e,t);return this.editGeometry.apply(r),r}updateVertices(e,t,r=1){var i=new o.b(this.editGeometry,e,t);return this.editGeometry.apply(i,r),i}moveVertices(e,t,r,i,n=1){return this.updateVertices(e,new u.a(this.editGeometry.coordinateHelper,t,r,i),n)}scaleVertices(e,t,r,i,n,a=1,o=0){return this.updateVertices(e,new h.a(this.editGeometry.coordinateHelper,t,r,i,n,o),a)}rotateVertices(e,t,r,i=1,n=0){return this.updateVertices(e,new d.a(this.editGeometry.coordinateHelper,t,r,n),i)}removeVertices(e){var t=0;switch(this.type){case"point":t=1;break;case"polyline":t=2;break;case"polygon":t=3}var r=new c(this.editGeometry,e,t);return this.editGeometry.apply(r),r}appendVertex(e){if(0===this.editGeometry.components.length)return null;var t=new a.a(this.editGeometry,this.editGeometry.components[0],e);return this.editGeometry.apply(t),t}canRemoveVertex(){var e=0;switch(this.type){case"point":e=1;break;case"polyline":e=2;break;case"polygon":e=3}return this.editGeometry.components[0].vertices.length>e}undo(){return this.editGeometry.undo()}get canUndo(){return this.editGeometry.canUndo}redo(){return this.editGeometry.redo()}get canRedo(){return this.editGeometry.canRedo}get geometry(){if(this._dirty){switch(this.type){case"point":this._geometry=this.editGeometry.toPoint();break;case"polyline":this._geometry=this.editGeometry.toPolyline();break;case"polygon":this._geometry=this.editGeometry.toPolygon()}this._dirty=!1}return this._geometry}}},function(e,t,r){"use strict";r.d(t,"a",(function(){return u})),r.d(t,"b",(function(){return l}));var i=r(306),n=r(325),a=r(205),o=r(326),s=[{name:"position",count:2,type:5126,offset:0,stride:8,normalized:!1}],c=[{name:"position",count:2,type:5126,offset:0,stride:16,normalized:!1},{name:"uv0",count:2,type:5126,offset:8,stride:16,normalized:!1}];function l(e,t=s,r=i.a,a=-1,l=1){var u=null;switch(t){case c:u=new Float32Array([a,a,0,0,l,a,1,0,a,l,0,1,l,l,1,1]);break;case s:default:u=new Float32Array([a,a,l,a,a,l,l,l])}return new o.a(e,r,{geometry:t},{geometry:n.a.createVertex(e,35044,u)})}function u(e){return new a.a(e,{target:3553,pixelFormat:6408,dataType:5121,samplingMode:9728,width:1,height:1},new Uint8Array([255,255,255,255]))}},,function(e,t,r){"use strict";r.d(t,"a",(function(){return f}));var i,n,a,o,s,c,l,u=r(120),d=r(119),h=r(308);function p(e){e.fragment.uniforms.add("projInfo","vec4"),e.fragment.uniforms.add("zScale","vec2"),e.fragment.code.add(Object(d.a)(i||(i=Object(u.a)(["\n    vec3 reconstructPosition(vec2 fragCoord, float depth) {\n      return vec3((fragCoord * projInfo.xy + projInfo.zw) * (zScale.x * depth + zScale.y), depth);\n    }\n  "]))))}function f(e,t){e.extensions.add("GL_OES_standard_derivatives"),e.fragment.include(h.a),e.include(p),e.fragment.uniforms.add("glowColor","vec3"),e.fragment.uniforms.add("glowWidth","float"),e.fragment.uniforms.add("glowFalloff","float"),e.fragment.uniforms.add("innerColor","vec3"),e.fragment.uniforms.add("innerWidth","float"),e.fragment.uniforms.add("depthMap","sampler2D"),e.fragment.uniforms.add("nearFar","vec2"),e.fragment.uniforms.add("frameColor","sampler2D"),t.contrastControlEnabled&&e.fragment.uniforms.add("globalAlphaContrastBoost","float"),e.fragment.code.add(Object(d.a)(n||(n=Object(u.a)(["\n  vec4 blendPremultiplied(vec4 source, vec4 dest) {\n    float oneMinusSourceAlpha = 1.0 - source.a;\n\n    return vec4(\n      source.rgb + dest.rgb * oneMinusSourceAlpha,\n      source.a + dest.a * oneMinusSourceAlpha\n    );\n  }\n  "])))),e.fragment.code.add(Object(d.a)(a||(a=Object(u.a)(["\n  vec4 premultipliedColor(vec3 rgb, float alpha) {\n    return vec4(rgb * alpha, alpha);\n  }\n  "])))),e.fragment.code.add(Object(d.a)(o||(o=Object(u.a)(["\n  vec4 laserlineProfile(float dist) {\n    if (dist > glowWidth) {\n      return vec4(0.0);\n    }\n\n    float innerAlpha = (1.0 - smoothstep(0.0, innerWidth, dist));\n    float glowAlpha = pow(max(0.0, 1.0 - dist / glowWidth), glowFalloff);\n\n    return blendPremultiplied(\n      premultipliedColor(innerColor, innerAlpha),\n      premultipliedColor(glowColor, glowAlpha)\n    );\n  }\n  "])))),e.fragment.code.add(Object(d.a)(s||(s=Object(u.a)(["\n  bool laserlineReconstructFromDepth(out vec3 pos, out vec3 normal, out float depthDiscontinuityAlpha) {\n    float depth = linearDepthFromTexture(depthMap, uv, nearFar);\n\n    if (-depth == nearFar[0]) {\n      return false;\n    }\n\n    pos = reconstructPosition(gl_FragCoord.xy, depth);\n    normal = normalize(cross(dFdx(pos), dFdy(pos)));\n\n    float ddepth = fwidth(depth);\n    depthDiscontinuityAlpha = 1.0 - smoothstep(0.0, 0.01, -ddepth / depth);\n\n    return true;\n  }\n  "])))),t.contrastControlEnabled?e.fragment.code.add(Object(d.a)(c||(c=Object(u.a)(["\n    float rgbToLuminance(vec3 color) {\n      return dot(vec3(0.2126, 0.7152, 0.0722), color);\n    }\n\n    vec4 laserlineOutput(vec4 color) {\n      float backgroundLuminance = rgbToLuminance(texture2D(frameColor, uv).rgb);\n      float alpha = clamp(globalAlpha * max(backgroundLuminance * globalAlphaContrastBoost, 1.0), 0.0, 1.0);\n\n      return color * alpha;\n    }\n    "])))):e.fragment.code.add(Object(d.a)(l||(l=Object(u.a)(["\n    vec4 laserlineOutput(vec4 color) {\n      return color * globalAlpha;\n    }\n    "]))))}},function(e,t,r){"use strict";class i{constructor(e=1){this._seed=e}set seed(e){this._seed=null==e?Math.random()*i._m:e}getInt(){return this._seed=(i._a*this._seed+i._c)%i._m,this._seed}getFloat(){return this.getInt()/(i._m-1)}getIntRange(e,t){return Math.round(this.getFloatRange(e,t))}getFloatRange(e,t){var r=t-e;return e+this.getInt()/i._m*r}}i._m=2147483647,i._a=48271,i._c=0,t.a=i},,function(e,t,r){"use strict";r.d(t,"a",(function(){return l})),r.d(t,"b",(function(){return u})),r.d(t,"c",(function(){return c})),r.d(t,"d",(function(){return o})),r.d(t,"e",(function(){return s}));var i=r(89),n=r(107),a=r(574);function o(e,t){var r=e.view;r&&(t&&r.ready&&r.activeTool!==e?(r.activeTool=e,Object(a.b)(r)&&r.focus()):t||r.activeTool!==e||(r.activeTool=null))}function s(e,t,r){var n=e.activeTool;t!==n&&(Object(i.k)(n)&&n.deactivate&&n.deactivate(),r(t),Object(i.k)(t)&&t.activate&&t.activate())}function c(){var e=new n.a;return e.on("after-add",(e=>{var t=e.item;t.view&&t.view.ready&&t.attach()})),e.on("after-remove",(e=>{var t=e.item;o(t,!1),t.destroyed||t.detach()})),e}function l(e){return!1!==e.visible&&!1!==e.editable&&(null==e.hasEditableFlag||e.hasEditableFlag(1))}function u(e){return Object(i.j)(e)?{}:"function"==typeof e?e():e}},function(e,t,r){"use strict";r.d(t,"a",(function(){return a})),r.d(t,"b",(function(){return c})),r.d(t,"c",(function(){return l})),r.d(t,"d",(function(){return n}));var i=r(139),n=Math.PI/180,a=/SPHEROID\[([^\]]+)]/i,o=i.a.radius,s=i.a.eccentricitySquared,c={a1:o*s,a2:o*s*o*s,a3:o*s*s/2,a4:o*s*o*s*2.5,a5:o*s+o*s*s/2,a6:1-s},l={4326:{a:i.a.radius,f:i.a.flattening},104900:{a:2439700,f:0},104901:{a:6051e3,f:0},104902:{a:6051800,f:0},104903:{a:i.c.radius,f:i.c.flattening},104904:{a:3393400,f:1/192.0430107526882},104905:{a:i.b.radius,f:i.b.flattening},104906:{a:6200,f:0},104907:{a:11100,f:0},104908:{a:71492e3,f:.06487439154031222},104909:{a:8200,f:0},104910:{a:83500,f:0},104911:{a:1e4,f:0},104912:{a:2409300,f:0},104913:{a:15e3,f:0},104914:{a:4e4,f:0},104915:{a:1562090,f:0},104916:{a:2632345,f:0},104917:{a:85e3,f:0},104918:{a:1821460,f:0},104919:{a:5e3,f:0},104920:{a:12e3,f:0},104921:{a:3e4,f:3},104922:{a:18e3,f:0},104923:{a:14e3,f:0},104924:{a:49300,f:0},104925:{a:60268e3,f:1/10.2079945799458},104926:{a:16e3,f:0},104927:{a:9500,f:0},104928:{a:56e4,f:0},104929:{a:249400,f:0},104930:{a:59500,f:0},104931:{a:16e3,f:0},104932:{a:133e3,f:0},104933:{a:718e3,f:0},104934:{a:888e3,f:0},104935:{a:1986300,f:0},104936:{a:1e4,f:0},104937:{a:41900,f:0},104938:{a:11e4,f:0},104939:{a:50100,f:0},104940:{a:764e3,f:0},104941:{a:11e3,f:0},104942:{a:529800,f:0},104943:{a:2575e3,f:0},104944:{a:25559e3,f:1/43.61604095563141},104945:{a:578900,f:0},104946:{a:33e3,f:0},104947:{a:21e3,f:0},104948:{a:13e3,f:0},104949:{a:31e3,f:0},104950:{a:27e3,f:0},104951:{a:42e3,f:0},104952:{a:235800,f:0},104953:{a:761400,f:0},104954:{a:15e3,f:0},104955:{a:54e3,f:0},104956:{a:77e3,f:0},104957:{a:27e3,f:0},104958:{a:788900,f:0},104959:{a:584700,f:0},104960:{a:24764e3,f:.01708124697141011},104961:{a:74e3,f:0},104962:{a:79e3,f:0},104963:{a:104e3,f:.14423076923076922},104964:{a:29e3,f:0},104965:{a:17e4,f:0},104966:{a:208e3,f:0},104967:{a:4e4,f:0},104968:{a:1352600,f:0},104969:{a:1195e3,f:0},104970:{a:593e3,f:0},104971:{a:i.b.radius,f:0},104972:{a:47e4,f:0},104973:{a:255e3,f:0},104974:{a:2439400,f:0}}},function(e,t,r){"use strict";r.d(t,"a",(function(){return o}));r(80);var i=r(81),n=r(312),a=r(479);i.a.getLogger("esri.views.interactive.snapping.hints.LineSnappingHint");class o extends a.a{constructor(e,t,r,i=!0,n=!0){super(),this.type=e,this.lineStart=t,this.lineEnd=r,this.fadeLeft=i,this.fadeRight=n}equals(e){return e instanceof o&&this.type===e.type&&Object(n.d)(this.lineStart,e.lineStart)&&Object(n.d)(this.lineEnd,e.lineEnd)&&this.fadeLeft===e.fadeLeft&&this.fadeRight===e.fadeRight}}},function(e,t,r){"use strict";r.d(t,"a",(function(){return b}));var i=r(112),n=r(113),a=(r(101),r(104)),o=r(111),s=r(202),c=r(200),l=r(135),u=r(191),d=r(177);class h{constructor(e,t){this.spatialReference=e,this.viewingMode=t,this._unnormalizationInfo=m(e,t)}tag(e){return e}createNew(){return this.tag(Object(s.a)())}fromPoint(e){return this.tag(Object(s.e)(e.x,e.y))}fromArray(e){return this.tag(Object(s.e)(e[0],e[1]))}toArray(e){return[e[0],e[1]]}clone(e){return this.tag(Object(s.d)(e))}toPoint(e,t){return t.x=e[0],t.y=e[1],t.hasZ=!1,t.hasM=!1,t.spatialReference=this.spatialReference,t}createPoint(e){return new n.a({x:e[0],y:e[1],z:void 0,m:void 0,spatialReference:this.spatialReference})}createPointFromArray(e){return new n.a({x:e[0],y:e[1],z:void 0,m:void 0,spatialReference:this.spatialReference})}createDehydratedPoint(e){return{x:e[0],y:e[1],z:void 0,m:void 0,hasZ:!1,hasM:!1,spatialReference:this.spatialReference,type:"point"}}lerp(e,t,r,i){return Object(l.m)(i,e,t,r)}addDelta(e,t,r){e[0]+=t,e[1]+=r}scale(e,t,r,i){var n=d.c.get(),a=Object(l.d)(n,e,t),o=Object(l.a)(n,r,Object(l.g)(r,a));Object(l.o)(e,e,o,i-1)}rotate(e,t,r){Object(l.q)(e,e,t,r)}pointToArray(e){return[e.x,e.y]}getZ(e,t){return t}hasZ(){return!1}unnormalize(e){v(e,this._unnormalizationInfo)}fromXYZ(e){return this.tag(Object(s.e)(e[0],e[1]))}toXYZ(e,t=0){return Object(a.g)(e[0],e[1],t)}}class p{constructor(e,t,r){this.valueType=e,this.spatialReference=t,this._unnormalizationInfo=m(t,r)}tag(e){return e}createNew(){return this.tag(Object(a.e)())}fromPoint(e){return this.tag(Object(a.g)(e.x,e.y,0===this.valueType?e.z:e.m))}fromArray(e){return this.tag(Object(a.g)(e[0],e[1],e[2]||0))}toArray(e){return[e[0],e[1],e[2]]}clone(e){return this.tag(Object(a.f)(e))}toPoint(e,t){return t.x=e[0],t.y=e[1],0===this.valueType?(t.z=e[2],t.hasZ=!0,t.hasM=!1):(t.m=e[2],t.hasZ=!1,t.hasM=!0),t.spatialReference=this.spatialReference,t}createPoint(e){return new n.a({x:e[0],y:e[1],z:0===this.valueType?e[2]:void 0,m:1===this.valueType?e[2]:void 0,spatialReference:this.spatialReference})}createPointFromArray(e){return new n.a({x:e[0],y:e[1],z:0===this.valueType?e[2]:void 0,m:1===this.valueType?e[2]:void 0,spatialReference:this.spatialReference})}createDehydratedPoint(e){var t=0===this.valueType,r=1===this.valueType;return{x:e[0],y:e[1],z:t?e[2]:void 0,m:r?e[2]:void 0,hasZ:t,hasM:r,spatialReference:this.spatialReference,type:"point"}}lerp(e,t,r,i){return Object(o.h)(i,e,t,r)}addDelta(e,t,r,i){e[0]+=t,e[1]+=r,0===this.valueType&&(e[2]+=i)}scale(e,t,r,i){var n=d.c.get(),a=Object(l.d)(n,e,t),o=Object(l.a)(n,r,Object(l.g)(r,a));Object(l.o)(e,e,o,i-1)}rotate(e,t,r){Object(l.q)(e,e,t,r)}pointToArray(e){return 0===this.valueType?[e.x,e.y,e.z]:[e.x,e.y,e.m]}getZ(e,t){return 0===this.valueType?e[2]:t}hasZ(){return 0===this.valueType}unnormalize(e){v(e,this._unnormalizationInfo)}fromXYZ(e,t=0,r=0){return this.tag(Object(a.g)(e[0],e[1],0===this.valueType?e.length>2?e[2]:t:r))}toXYZ(e,t=0){return this.tag(Object(a.g)(e[0],e[1],0===this.valueType?e[2]:t))}}class f{constructor(e,t){this.spatialReference=e,this._unnormalizationInfo=m(e,t)}tag(e){return e}createNew(){return this.tag(Object(c.c)())}fromPoint(e){return this.tag(Object(c.d)(e.x,e.y,e.z,e.m))}fromArray(e){return this.tag(Object(c.d)(e[0],e[1],e[2]||0,e[3]||0))}toArray(e){return[e[0],e[1],e[2],e[3]]}clone(e){return this.tag(Object(c.g)(e))}toPoint(e,t){return t.x=e[0],t.y=e[1],t.z=e[2],t.m=e[3],t.hasZ=!0,t.hasM=!0,t.spatialReference=this.spatialReference,t}createPoint(e){return new n.a({x:e[0],y:e[1],z:e[2],m:e[3],spatialReference:this.spatialReference})}createPointFromArray(e){return new n.a({x:e[0],y:e[1],z:e[2],m:e[3],spatialReference:this.spatialReference})}createDehydratedPoint(e){return{x:e[0],y:e[1],z:e[2],m:e[3],hasZ:!0,hasM:!0,spatialReference:this.spatialReference,type:"point"}}lerp(e,t,r,i){return Object(u.j)(i,e,t,r)}addDelta(e,t,r,i){e[0]+=t,e[1]+=r,e[2]+=i}scale(e,t,r,i){var n=d.c.get(),a=Object(l.d)(n,e,t),o=Object(l.a)(n,r,Object(l.g)(r,a));Object(l.o)(e,e,o,i-1)}rotate(e,t,r){Object(l.q)(e,e,t,r)}pointToArray(e){return[e.x,e.y,e.z,e.m]}getZ(e){return e[2]}hasZ(){return!0}unnormalize(e){v(e,this._unnormalizationInfo)}fromXYZ(e,t=0,r=0){return this.tag(Object(c.d)(e[0],e[1],e.length>2?e[2]:t,r))}toXYZ(e){return Object(a.g)(e[0],e[1],e[2])}}function b(e,t,r,i){return e&&t?new f(r,i):t?new p(1,r,i):e?new p(0,r,i):new h(r,i)}function v(e,t){if(t.supported){var r=1/0,i=-1/0,n=t.upperBoundX-t.lowerBoundX;e.forEach((e=>{for(var a=e.pos[0];a<t.lowerBoundX;)a+=n;for(;a>t.upperBoundX;)a-=n;r=Math.min(r,a),i=Math.max(i,a),e.pos[0]=a}));var a=i-r;n-a<a&&e.forEach((e=>{e.pos[0]<0&&(e.pos[0]+=n)}))}}function m(e,t){var r=Object(i.d)(e);return"global"===t&&r?{supported:!0,lowerBoundX:r.valid[0],upperBoundX:r.valid[1]}:{supported:!1,lowerBoundX:null,upperBoundX:null}}},function(e,t,r){"use strict";r.d(t,"a",(function(){return u}));var i=r(82),n=(r(80),r(81),r(88),r(85)),a=r(84),o=(r(83),r(86),r(87),r(94)),s=r(97),c=r(528),l=r(631),u=class extends s.a{constructor(e){super(e),this.attached=!1,this.created=!1,this.completed=!1,this.manipulators=new l.a,this.deferCreation=!1,this._editableFlags=new Array,this._creationResolver=Object(o.g)()}get active(){return null!=this.view&&this.view.activeTool===this}get isSupported(){return!0}set visible(e){this._set("visible",e),e||Object(c.d)(this,!1),this.attached&&(e?this._show():this._hide())}get editable(){return this.hasEditableFlag(0)}set editable(e){this.setEditableFlag(0,e)}attach(){!this.attached&&this.isSupported&&(this.manipulators.attach(),this.onAttach(),this.visible&&this.onShow(),this._set("attached",!0))}detach(){this.attached&&(this.onHide(),this.onDetach(),this.manipulators.detach(),this._set("attached",!1))}handleInputEvent(e){this.attached&&this.onInputEvent(e)}handleInputEventAfter(e){this.attached&&this.onInputEventAfter(e)}destroy(){this.manipulators.destroy(),this._set("view",null),this._set("created",!1),this._set("completed",!1)}setEditableFlag(e,t){this._editableFlags[e]=t,this.manipulators.isToolEditable=this._editableFlags.every((e=>null==e||e)),this._updateManipulatorAttachment(),0===e&&this.notifyChange("editable"),this.onEditableChange()}hasEditableFlag(e){var t=this._editableFlags[e];return null==t||t}when(){return this._creationResolver.promise}rejectCreation(e){this._creationResolver.reject(e)}initialize(){this.deferCreation||this.complete()}onAttach(){}onDetach(){}onShow(){}onHide(){}onEditableChange(){}onInputEvent(e){}onInputEventAfter(e){}get internallyEditable(){return this.hasEditableFlag(0)&&this.hasEditableFlag(1)}create(){this.created||(this._set("created",!0),this._creationResolver.resolve(this))}complete(){this.create(),this._set("completed",!0)}_show(){this._updateManipulatorAttachment(),this.onShow()}_hide(){this._updateManipulatorAttachment(),this.onHide()}_updateManipulatorAttachment(){this.attached&&this.visible?this.manipulators.attach():this.manipulators.detach()}};Object(i.a)([Object(n.b)({constructOnly:!0})],u.prototype,"view",void 0),Object(i.a)([Object(n.b)({readOnly:!0})],u.prototype,"active",null),Object(i.a)([Object(n.b)({value:!0})],u.prototype,"visible",null),Object(i.a)([Object(n.b)({value:!0})],u.prototype,"editable",null),Object(i.a)([Object(n.b)({readOnly:!0})],u.prototype,"attached",void 0),Object(i.a)([Object(n.b)({readOnly:!0})],u.prototype,"created",void 0),Object(i.a)([Object(n.b)({readOnly:!0})],u.prototype,"completed",void 0),Object(i.a)([Object(n.b)({readOnly:!0})],u.prototype,"manipulators",void 0),Object(i.a)([Object(n.b)({constructOnly:!0})],u.prototype,"deferCreation",void 0),u=Object(i.a)([Object(a.a)("esri.views.interactive.InteractiveToolBase")],u)},function(e,t,r){"use strict";r.d(t,"a",(function(){return f})),r.d(t,"b",(function(){return u})),r.d(t,"c",(function(){return p})),r.d(t,"d",(function(){return C}));var i=r(104),n=r(184),a=r(111),o=r(332),s=r(396),c=r(191);function l(e,t,r){r*=.5;var i=Math.sin(r);return e[0]=i*t[0],e[1]=i*t[1],e[2]=i*t[2],e[3]=Math.cos(r),e}function u(e,t){var r=2*Math.acos(t[3]),i=Math.sin(r/2);return i>n.a?(e[0]=t[0]/i,e[1]=t[1]/i,e[2]=t[2]/i):(e[0]=1,e[1]=0,e[2]=0),r}function d(e,t,r){var i=t[0],n=t[1],a=t[2],o=t[3],s=r[0],c=r[1],l=r[2],u=r[3];return e[0]=i*u+o*s+n*l-a*c,e[1]=n*u+o*c+a*s-i*l,e[2]=a*u+o*l+i*c-n*s,e[3]=o*u-i*s-n*c-a*l,e}function h(e,t,r,i){var a,o,s,c,l,u=t[0],d=t[1],h=t[2],p=t[3],f=r[0],b=r[1],v=r[2],m=r[3];return(o=u*f+d*b+h*v+p*m)<0&&(o=-o,f=-f,b=-b,v=-v,m=-m),1-o>n.a?(a=Math.acos(o),s=Math.sin(a),c=Math.sin((1-i)*a)/s,l=Math.sin(i*a)/s):(c=1-i,l=i),e[0]=c*u+l*f,e[1]=c*d+l*b,e[2]=c*h+l*v,e[3]=c*p+l*m,e}function p(e,t){var r=t[0],i=t[1],n=t[2],a=t[3],o=r*r+i*i+n*n+a*a,s=o?1/o:0;return e[0]=-r*s,e[1]=-i*s,e[2]=-n*s,e[3]=a*s,e}function f(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=t[3],e}function b(e,t){var r,i=t[0]+t[4]+t[8];if(i>0)r=Math.sqrt(i+1),e[3]=.5*r,r=.5/r,e[0]=(t[5]-t[7])*r,e[1]=(t[6]-t[2])*r,e[2]=(t[1]-t[3])*r;else{var n=0;t[4]>t[0]&&(n=1),t[8]>t[3*n+n]&&(n=2);var a=(n+1)%3,o=(n+2)%3;r=Math.sqrt(t[3*n+n]-t[3*a+a]-t[3*o+o]+1),e[n]=.5*r,r=.5/r,e[3]=(t[3*a+o]-t[3*o+a])*r,e[a]=(t[3*a+n]+t[3*n+a])*r,e[o]=(t[3*o+n]+t[3*n+o])*r}return e}var v=c.c,m=c.l,g=c.a,y=d,O=c.b,j=c.d,_=c.j,w=c.e,x=w,S=c.f,M=S,T=c.k,P=c.g,E=c.h;function C(e,t,r){var i=Object(a.g)(t,r);return i<-.999999?(Object(a.f)(A,I,t),Object(a.m)(A)<1e-6&&Object(a.f)(A,k,t),Object(a.q)(A,A),l(e,A,Math.PI),e):i>.999999?(e[0]=0,e[1]=0,e[2]=0,e[3]=1,e):(Object(a.f)(A,t,r),e[0]=A[0],e[1]=A[1],e[2]=A[2],e[3]=1+i,T(e,e))}var A=Object(i.e)(),I=Object(i.g)(1,0,0),k=Object(i.g)(0,1,0);var F=Object(s.a)(),R=Object(s.a)();var D=Object(o.a)();Object.freeze({__proto__:null,identity:function(e){return e[0]=0,e[1]=0,e[2]=0,e[3]=1,e},setAxisAngle:l,getAxisAngle:u,multiply:d,rotateX:function(e,t,r){r*=.5;var i=t[0],n=t[1],a=t[2],o=t[3],s=Math.sin(r),c=Math.cos(r);return e[0]=i*c+o*s,e[1]=n*c+a*s,e[2]=a*c-n*s,e[3]=o*c-i*s,e},rotateY:function(e,t,r){r*=.5;var i=t[0],n=t[1],a=t[2],o=t[3],s=Math.sin(r),c=Math.cos(r);return e[0]=i*c-a*s,e[1]=n*c+o*s,e[2]=a*c+i*s,e[3]=o*c-n*s,e},rotateZ:function(e,t,r){r*=.5;var i=t[0],n=t[1],a=t[2],o=t[3],s=Math.sin(r),c=Math.cos(r);return e[0]=i*c+n*s,e[1]=n*c-i*s,e[2]=a*c+o*s,e[3]=o*c-a*s,e},calculateW:function(e,t){var r=t[0],i=t[1],n=t[2];return e[0]=r,e[1]=i,e[2]=n,e[3]=Math.sqrt(Math.abs(1-r*r-i*i-n*n)),e},slerp:h,random:function(e){var t=Object(n.b)(),r=Object(n.b)(),i=Object(n.b)(),a=Math.sqrt(1-t),o=Math.sqrt(t);return e[0]=a*Math.sin(2*Math.PI*r),e[1]=a*Math.cos(2*Math.PI*r),e[2]=o*Math.sin(2*Math.PI*i),e[3]=o*Math.cos(2*Math.PI*i),e},invert:p,conjugate:f,fromMat3:b,fromEuler:function(e,t,r,i){var n=.5*Math.PI/180;t*=n,r*=n,i*=n;var a=Math.sin(t),o=Math.cos(t),s=Math.sin(r),c=Math.cos(r),l=Math.sin(i),u=Math.cos(i);return e[0]=a*c*u-o*s*l,e[1]=o*s*u+a*c*l,e[2]=o*c*l-a*s*u,e[3]=o*c*u+a*s*l,e},str:function(e){return"quat("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+")"},copy:v,set:m,add:g,mul:y,scale:O,dot:j,lerp:_,length:w,len:x,squaredLength:S,sqrLen:M,normalize:T,exactEquals:P,equals:E,rotationTo:C,sqlerp:function(e,t,r,i,n,a){return h(F,t,n,a),h(R,r,i,a),h(e,F,R,2*a*(1-a)),e},setAxes:function(e,t,r,i){var n=D;return n[0]=r[0],n[3]=r[1],n[6]=r[2],n[1]=i[0],n[4]=i[1],n[7]=i[2],n[2]=-t[0],n[5]=-t[1],n[8]=-t[2],T(e,b(e,n))}})},,,,,,,,function(e,t,r){"use strict";var i=r(91),n=r(82),a=(r(80),r(81),r(85)),o=r(145),s=r(116),c=r(84),l=(r(83),r(86),r(87),r(281)),u=(r(171),r(108)),d=r(114),h=r(163),p=r(129),f=r(154),b=(r(88),r(93)),v=r(488),m=r(437),g=r(162);var y={addButton:!0,addSubmitButton:!0,cancelAddButton:!0,cancelUpdateButton:!0,deleteButton:!0,errorMessage:!0,progressBar:!0,updateButton:!0},O="esri-attachments",j="esri-attachments__loader-container",_="esri-attachments__loader",w="esri-attachments__container",x="esri-attachments__container--list",S="esri-attachments__container--preview",M="esri-attachments__actions",T="esri-attachments__delete-button",P="esri-attachments__add-attachment-button",E="esri-attachments__error-message",C="esri-attachments__items",A="esri-attachments__item",I="esri-attachments__item-button",k="esri-attachments__item-mask",F="esri-attachments__item-mask--icon",R="esri-attachments__image",D="esri-attachments__image--resizable",L="esri-attachments__label",N="esri-attachments__filename",V="esri-attachments__item-chevron-icon",z="esri-attachments__item-link",G="esri-attachments__item-link-overlay",U="esri-attachments__item-link-overlay-icon",q="esri-attachments__item-add-icon",H="esri-attachments__form-node",B="esri-attachments__file-fieldset",W="esri-attachments__file-label",J="esri-attachments__file-name",Z="esri-attachments__file-input",X="esri-attachments__metadata",Y="esri-attachments__metadata-fieldset",Q="esri-attachments__progress-bar",K="esri-widget",$="esri-button",ee="esri-button--disabled",te="esri-button--secondary",re="esri-button--tertiary",ie="esri-button--third",ne="esri-button--small",ae="esri-button--half",oe="esri-widget__content--empty",se="esri-icon-right",ce="esri-icon-left",le="esri-icon-plus",ue=window.CSS,de=class extends f.a{constructor(e,t){super(e,t),this.abilities=null,this.displayType="list",this.graphic=null,this.label=void 0,this.messages=null,this.messagesUnits=null,this.selectedFile=null,this.submitting=!1,this.viewModel=new m.a,this.visibleElements=Object(i.a)({},y),this._supportsImageOrientation=ue&&ue.supports&&ue.supports("image-orientation","from-image"),this._addAttachmentForm=null,this._updateAttachmentForm=null}initialize(){this.own(Object(u.b)(this,"viewModel.attachmentInfos","change",(()=>this.scheduleRender())),Object(u.a)(this,"viewModel.mode",(()=>this._modeChanged())))}castVisibleElements(e){return Object(i.a)(Object(i.a)({},y),e)}addAttachment(){var{_addAttachmentForm:e,viewModel:t}=this;return this._set("submitting",!0),this._set("error",null),t.addAttachment(e).then((e=>(this._set("submitting",!1),this._set("error",null),t.mode="view",e))).catch((e=>{throw this._set("submitting",!1),this._set("error",new b.a("attachments:add-attachment",this.messages.addErrorMessage,e)),e}))}deleteAttachment(e){var{viewModel:t}=this;return this._set("submitting",!0),this._set("error",null),t.deleteAttachment(e).then((e=>(this._set("submitting",!1),this._set("error",null),t.mode="view",e))).catch((e=>{throw this._set("submitting",!1),this._set("error",new b.a("attachments:delete-attachment",this.messages.deleteErrorMessage,e)),e}))}updateAttachment(){var{viewModel:e}=this,{_updateAttachmentForm:t}=this;return this._set("submitting",!0),this._set("error",null),e.updateAttachment(t).then((t=>(this._set("submitting",!1),this._set("error",null),e.mode="view",t))).catch((e=>{throw this._set("submitting",!1),this._set("error",new b.a("attachments:update-attachment",this.messages.updateErrorMessage,e)),e}))}render(){var{submitting:e,viewModel:t}=this,{state:r}=t;return Object(p.a)("div",{class:this.classes(O,K)},e?this.renderProgressBar():null,"loading"===r?this.renderLoading():this.renderAttachments(),this.renderErrorMessage())}renderErrorMessage(){var{error:e,visibleElements:t}=this;return e&&t.errorMessage?Object(p.a)("div",{key:"error-message",class:E},e.message):null}renderAttachments(){var{mode:e,activeAttachmentInfo:t}=this.viewModel;return"add"===e?this.renderAddForm():"edit"===e?this.renderDetailsForm(t):this.renderAttachmentContainer()}renderLoading(){return Object(p.a)("div",{class:j,key:"loader"},Object(p.a)("div",{class:_}))}renderProgressBar(){return this.visibleElements.progressBar?Object(p.a)("div",{class:Q,key:"progress-bar"}):null}renderAddForm(){var{submitting:e,selectedFile:t}=this,r=e||!t,i=this.visibleElements.cancelAddButton?Object(p.a)("button",{type:"button",bind:this,disabled:e,onclick:this._cancelForm,class:this.classes($,re,ne,ae,e&&ee)},this.messages.cancel):null,n=this.visibleElements.addSubmitButton?Object(p.a)("button",{type:"submit",disabled:r,class:this.classes($,te,ne,ae,{[ee]:r})},this.messages.add):null,a=t?Object(p.a)("span",{key:"file-name",class:J},t.name):null,o=Object(p.a)("form",{bind:this,afterCreate:d.i,afterRemoved:d.c,"data-node-ref":"_addAttachmentForm",onsubmit:this._submitAddAttachment},Object(p.a)("fieldset",{class:B},a,Object(p.a)("label",{class:this.classes(W,$,te)},t?this.messages.changeFile:this.messages.selectFile,Object(p.a)("input",{class:Z,type:"file",name:"attachment",bind:this,onchange:this._handleFileInputChange}))),n,i);return Object(p.a)("div",{key:"add-form-container",class:H},o)}renderDetailsForm(e){var{visibleElements:t,viewModel:r,selectedFile:i,submitting:n}=this,{contentType:a,size:o,url:s}=e,{abilities:c}=r,l=n||!i,u=c.editing&&c.operations.delete&&t.deleteButton?Object(p.a)("button",{key:"delete-button",type:"button",disabled:n,bind:this,onclick:t=>this._submitDeleteAttachment(t,e),class:this.classes($,ne,re,T,{[ee]:n})},this.messages.delete):null,h=c.editing&&c.operations.update&&t.updateButton?Object(p.a)("button",{disabled:l,key:"update-button",type:"submit",class:this.classes($,ne,ie,{[ee]:l})},this.messages.update):null,f=this.visibleElements.cancelUpdateButton?Object(p.a)("button",{disabled:n,key:"cancel-button",type:"button",bind:this,onclick:this._cancelForm,class:this.classes($,ne,re,ie,{[ee]:n})},this.messages.cancel):null,b=i?Object(p.a)("span",{key:"file-name",class:J},i.name):null,m=c.editing&&c.operations.update?Object(p.a)("fieldset",{key:"file",class:B},b,Object(p.a)("label",{class:this.classes(W,$,te)},this.messages.changeFile,Object(p.a)("input",{class:Z,type:"file",name:"attachment",bind:this,onchange:this._handleFileInputChange}))):null,g=Object(p.a)("fieldset",{key:"size",class:Y},Object(p.a)("label",null,Object(v.c)(this.messagesUnits,o))),y=Object(p.a)("fieldset",{key:"content-type",class:Y},Object(p.a)("label",null,a)),O=Object(p.a)("form",{bind:this,afterCreate:d.i,afterRemoved:d.c,"data-node-ref":"_updateAttachmentForm",onsubmit:this._submitUpdateAttachment},Object(p.a)("div",{class:X},g,y),m,Object(p.a)("div",{class:M},u,f,h));return Object(p.a)("div",{key:"edit-form-container",class:H},Object(p.a)("a",{class:z,href:s,rel:"noreferrer",target:"_blank"},this.renderImageMask({attachmentInfo:e,size:400}),Object(p.a)("div",{class:G},Object(p.a)("span",{class:U},Object(p.a)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32",viewBox:"0 0 32 32"},Object(p.a)("path",{d:"M28 13h1v16H3V3h16v1H4v24h24zm-5-9h4.293L15.646 15.638l.707.707L28 4.707V9h1V3h-6z"}),Object(p.a)("path",{fill:"none",d:"M0 0h32v32H0z"}))))),O)}renderImageMask({attachmentInfo:e,size:t}){var{supportsResizeAttachments:r}=this.viewModel,{contentType:i,name:n,url:a}=e,o=r&&function(e){var t=e.toLowerCase();return"image/bmp"===t||"image/emf"===t||"image/exif"===t||"image/gif"===t||"image/x-icon"===t||"image/jpeg"===t||"image/png"===t||"image/tiff"===t||"image/x-wmf"===t}(i),s=this._getCSSTransform(e,o),c=s?{transform:s,"image-orientation":"none"}:{},l=-1===a.indexOf("?")?"?":"&",u=o?"".concat(a).concat(l,"w=").concat(t):function(e){var t=Object(g.a)("esri/themes/base/images/files/");return e?"text/plain"===e?"".concat(t,"text-32.svg"):"application/pdf"===e?"".concat(t,"pdf-32.svg"):"text/csv"===e?"".concat(t,"csv-32.svg"):"application/gpx+xml"===e?"".concat(t,"gpx-32.svg"):"application/x-dwf"===e?"".concat(t,"cad-32.svg"):"application/postscript"===e||"application/json"===e||"text/xml"===e||"model/vrml"===e?"".concat(t,"code-32.svg"):"application/x-zip-compressed"===e||"application/x-7z-compressed"===e||"application/x-gzip"===e||"application/x-tar"===e||"application/x-gtar"===e||"application/x-bzip2"===e||"application/gzip"===e||"application/x-compress"===e||"application/x-apple-diskimage"===e||"application/x-rar-compressed"===e||"application/zip"===e?"".concat(t,"zip-32.svg"):-1!==e.indexOf("image/")?"".concat(t,"image-32.svg"):-1!==e.indexOf("audio/")?"".concat(t,"sound-32.svg"):-1!==e.indexOf("video/")?"".concat(t,"video-32.svg"):-1!==e.indexOf("msexcel")||-1!==e.indexOf("ms-excel")||-1!==e.indexOf("spreadsheetml")?"".concat(t,"excel-32.svg"):-1!==e.indexOf("msword")||-1!==e.indexOf("ms-word")||-1!==e.indexOf("wordprocessingml")?"".concat(t,"word-32.svg"):-1!==e.indexOf("powerpoint")||-1!==e.indexOf("presentationml")?"".concat(t,"report-32.svg"):"".concat(t,"generic-32.svg"):"".concat(t,"generic-32.svg")}(i),d={[F]:!o},h={[D]:r};return Object(p.a)("div",{class:this.classes(d,k)},Object(p.a)("img",{styles:c,alt:n,src:u,class:this.classes(h,R)}))}renderAttachmentInfo({attachmentInfo:e,displayType:t}){var{viewModel:r}=this,{abilities:i}=r,{name:n,url:a}=e,o=this.renderImageMask({attachmentInfo:e,size:"list"===t?48:400}),s=i.editing?Object(p.a)("span",{"aria-hidden":"true",class:this.classes(V,Object(d.f)()?ce:se)}):null,c=[o,Object(p.a)("label",{class:L},Object(p.a)("span",{class:N},n||this.messages.noTitle),s)],l=i.editing?Object(p.a)("button",{key:"details-button",bind:this,class:I,title:this.messages.attachmentDetails,"aria-label":this.messages.attachmentDetails,"data-attachment-info-id":e.id,onclick:()=>this._startEditAttachment(e),type:"button"},c):Object(p.a)("a",{key:"details-link",class:I,href:a,target:"_blank"},c);return Object(p.a)("li",{class:A,key:e},l)}renderAttachmentContainer(){var{displayType:e,viewModel:t,visibleElements:r}=this,{attachmentInfos:i,abilities:n}=t,a=i&&i.length,o={[x]:"preview"!==e,[S]:"preview"===e},s=n.editing&&n.operations.add&&r.addButton?Object(p.a)("button",{bind:this,onclick:()=>this._startAddAttachment(),class:this.classes($,re,P),type:"button"},Object(p.a)("span",{"aria-hidden":"true",class:this.classes(q,le)}),this.messages.add):null,c=a?Object(p.a)("ul",{class:C},i.toArray().map((t=>this.renderAttachmentInfo({attachmentInfo:t,displayType:e})))):Object(p.a)("div",{class:oe},this.messages.noAttachments);return Object(p.a)("div",{key:"attachments-container",class:this.classes(w,o)},c,s)}_modeChanged(){this._set("error",null),this._set("selectedFile",null)}_handleFileInputChange(e){var t=e.target,r=t&&t.files&&t.files.item(0);this._set("selectedFile",r)}_submitDeleteAttachment(e,t){e.preventDefault(),this.deleteAttachment(t)}_submitAddAttachment(e){e.preventDefault(),this.addAttachment()}_submitUpdateAttachment(e){e.preventDefault(),this.updateAttachment()}_startEditAttachment(e){var{viewModel:t}=this;t.activeAttachmentInfo=e,t.mode="edit"}_startAddAttachment(){this.viewModel.mode="add"}_cancelForm(e){e.preventDefault(),this.viewModel.mode="view"}_getCSSTransform(e,t){var{orientationInfo:r}=e;return!this._supportsImageOrientation&&t&&r?[r.rotation?"rotate(".concat(r.rotation,"deg)"):"",r.mirrored?"scaleX(-1)":""].join(" "):""}};Object(n.a)([Object(o.a)("viewModel.abilities")],de.prototype,"abilities",void 0),Object(n.a)([Object(a.b)()],de.prototype,"displayType",void 0),Object(n.a)([Object(o.a)("viewModel.graphic")],de.prototype,"graphic",void 0),Object(n.a)([Object(a.b)({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],de.prototype,"label",void 0),Object(n.a)([Object(a.b)(),Object(h.a)("esri/widgets/Attachments/t9n/Attachments")],de.prototype,"messages",void 0),Object(n.a)([Object(a.b)(),Object(h.a)("esri/core/t9n/Units")],de.prototype,"messagesUnits",void 0),Object(n.a)([Object(a.b)({readOnly:!0})],de.prototype,"selectedFile",void 0),Object(n.a)([Object(a.b)({readOnly:!0})],de.prototype,"submitting",void 0),Object(n.a)([Object(a.b)({readOnly:!0})],de.prototype,"error",void 0),Object(n.a)([Object(a.b)({type:m.a})],de.prototype,"viewModel",void 0),Object(n.a)([Object(a.b)()],de.prototype,"visibleElements",void 0),Object(n.a)([Object(s.a)("visibleElements")],de.prototype,"castVisibleElements",null);var he=de=Object(n.a)([Object(c.a)("esri.widgets.Attachments")],de),pe=r(438),fe="esri-feature-element-info",be="esri-feature-element-info__title",ve="esri-feature-element-info__description",me=class extends f.a{constructor(e,t){super(e,t),this.description=null,this.title=null}render(){return Object(p.a)("div",{class:fe},this.renderTitle(),this.renderDescription())}renderTitle(){var{title:e}=this;return e?Object(p.a)("h2",{key:"title",class:be},e):null}renderDescription(){var{description:e}=this;return e?Object(p.a)("div",{key:"description",class:ve},e):null}};Object(n.a)([Object(a.b)()],me.prototype,"description",void 0),Object(n.a)([Object(a.b)()],me.prototype,"title",void 0);var ge=me=Object(n.a)([Object(c.a)("esri.widgets.Feature.support.FeatureElementInfo")],me),ye="esri-feature-attachments",Oe=class extends f.a{constructor(e,t){super(e,t),this._featureElementInfo=null,this.attachmentsWidget=new he,this.description=null,this.displayType=null,this.graphic=null,this.title=null,this.viewModel=new pe.a}initialize(){this._featureElementInfo=new ge,Object(u.a)(this,["viewModel.description","viewModel.title"],(()=>this._setupFeatureElementInfo())),Object(u.a)(this,"viewModel.graphic",(e=>this.attachmentsWidget.graphic=e))}destroy(){this.attachmentsWidget.destroy(),this._featureElementInfo.destroy()}render(){var e,{attachmentsWidget:t}=this;return Object(p.a)("div",{class:ye},null==(e=this._featureElementInfo)?void 0:e.render(),null==t?void 0:t.render())}_setupFeatureElementInfo(){var{description:e,title:t}=this;this._featureElementInfo.set({description:e,title:t})}};Object(n.a)([Object(a.b)({readOnly:!0})],Oe.prototype,"attachmentsWidget",void 0),Object(n.a)([Object(o.a)("viewModel.description")],Oe.prototype,"description",void 0),Object(n.a)([Object(o.a)("attachmentsWidget.displayType")],Oe.prototype,"displayType",void 0),Object(n.a)([Object(o.a)("viewModel.graphic")],Oe.prototype,"graphic",void 0),Object(n.a)([Object(o.a)("viewModel.title")],Oe.prototype,"title",void 0),Object(n.a)([Object(a.b)({type:pe.a})],Oe.prototype,"viewModel",void 0);var je=Oe=Object(n.a)([Object(c.a)("esri.widgets.Feature.FeatureAttachments")],Oe),_e=r(389),we=r(196),xe=r(439),Se="esri-feature-content",Me="esri-feature-content__loader-container",Te="esri-feature-content__loader",Pe=class extends f.a{constructor(e,t){super(e,t),this.creator=null,this.graphic=null,this.viewModel=null,this._addTargetToAnchors=e=>{Array.from(e.querySelectorAll("a")).forEach((e=>{Object(we.q)(e.href)&&!e.hasAttribute("target")&&e.setAttribute("target","_blank")}))}}renderLoading(){return Object(p.a)("div",{class:Me,key:"loader"},Object(p.a)("div",{class:Te}))}renderCreated(){var e,t=null==(e=this.viewModel)?void 0:e.created;return t?t instanceof HTMLElement?Object(p.a)("div",{key:t,bind:t,afterCreate:this._attachToNode}):Object(_e.b)(t)?Object(p.a)("div",{key:t},!t.destroyed&&t.render()):Object(p.a)("div",{key:t,innerHTML:t,afterCreate:this._addTargetToAnchors}):null}render(){var e,t=null==(e=this.viewModel)?void 0:e.state;return Object(p.a)("div",{class:Se},"loading"===t?this.renderLoading():this.renderCreated())}_attachToNode(e){e.appendChild(this)}};Object(n.a)([Object(o.a)("viewModel.creator")],Pe.prototype,"creator",void 0),Object(n.a)([Object(o.a)("viewModel.graphic")],Pe.prototype,"graphic",void 0),Object(n.a)([Object(a.b)({type:xe.a})],Pe.prototype,"viewModel",void 0);var Ee=Pe=Object(n.a)([Object(c.a)("esri.widgets.Feature.FeatureContent")],Pe),Ce=r(440),Ae=r(143),Ie=[{pattern:/^\s*(https?:\/\/([^\s]+))\s*$/i,target:"_blank",label:"{messages.view}"},{pattern:/^\s*(tel:([^\s]+))\s*$/i,label:"{hierPart}"},{pattern:/^\s*(mailto:([^\s]+))\s*$/i,label:"{hierPart}"},{pattern:/^\s*(arcgis-appstudio-player:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"App Studio Player"},{pattern:/^\s*(arcgis-collector:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Collector"},{pattern:/^\s*(arcgis-explorer:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Explorer"},{pattern:/^\s*(arcgis-navigator:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Navigator"},{pattern:/^\s*(arcgis-survey123:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Survey123"},{pattern:/^\s*(arcgis-trek2there:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Trek2There"},{pattern:/^\s*(arcgis-workforce:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Workforce"},{pattern:/^\s*(iform:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"iForm"},{pattern:/^\s*(flow:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"FlowFinity"},{pattern:/^\s*(lfmobile:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Laserfische"},{pattern:/^\s*(mspbi:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Microsoft Power Bi"}];function ke(e,t){if("string"!=typeof t||!t)return t;var r=function(e){var t=null;return Ie.some((r=>(r.pattern.test(e)&&(t=r),!!t))),t}(t);if(!r)return t;var i=t.match(r.pattern),n=i&&i[2],a=Object(Ae.c)(Object(Ae.c)(r.label,{messages:e,hierPart:n}),{appName:r.appName}),o=r.target?' target="'.concat(r.target,'"'):"",s="_blank"===r.target?' rel="noreferrer"':"";return t.replace(r.pattern,"<a".concat(o,' href="$1"').concat(s,">").concat(a,"</a>"))}var Fe="esri-feature-fields",Re="esri-feature-fields__field-header",De="esri-feature-fields__field-data",Le="esri-feature-fields__field-data--date",Ne="esri-widget__table",Ve=class extends f.a{constructor(e,t){super(e,t),this._featureElementInfo=null,this.attributes=null,this.description=null,this.expressionInfos=null,this.fieldInfos=null,this.title=null,this.viewModel=new Ce.a,this.messages=null,this.messagesURIUtils=null}initialize(){this._featureElementInfo=new ge,Object(u.a)(this,["viewModel.description","viewModel.title"],(()=>this._setupFeatureElementInfo()))}destroy(){this._featureElementInfo.destroy()}renderFieldInfo(e,t){var{attributes:r}=this.viewModel,i=e.fieldName,n=e.label||i,a=r?null==r[i]?"":r[i]:"",o=!(!e.format||!e.format.dateFormat),s="number"!=typeof a||o?ke(this.messagesURIUtils,a):this._forceLTR(a),c={[Le]:o};return Object(p.a)("tr",{key:"fields-element-info-row-".concat(i,"-").concat(t)},Object(p.a)("th",{key:"fields-element-info-row-header-".concat(i,"-").concat(t),class:Re,innerHTML:n}),Object(p.a)("td",{key:"fields-element-info-row-data-".concat(i,"-").concat(t),class:this.classes(De,c),innerHTML:s}))}renderFields(){var{formattedFieldInfos:e}=this.viewModel;return e.length?Object(p.a)("table",{class:Ne,summary:this.messages.fieldsSummary},Object(p.a)("tbody",null,e.map(((e,t)=>this.renderFieldInfo(e,t))))):null}render(){var e;return Object(p.a)("div",{class:Fe},null==(e=this._featureElementInfo)?void 0:e.render(),this.renderFields())}_setupFeatureElementInfo(){var{description:e,title:t}=this;this._featureElementInfo.set({description:e,title:t})}_forceLTR(e){return"&lrm;".concat(e)}};Object(n.a)([Object(o.a)("viewModel.attributes")],Ve.prototype,"attributes",void 0),Object(n.a)([Object(o.a)("viewModel.description")],Ve.prototype,"description",void 0),Object(n.a)([Object(o.a)("viewModel.expressionInfos")],Ve.prototype,"expressionInfos",void 0),Object(n.a)([Object(o.a)("viewModel.fieldInfos")],Ve.prototype,"fieldInfos",void 0),Object(n.a)([Object(o.a)("viewModel.title")],Ve.prototype,"title",void 0),Object(n.a)([Object(a.b)({type:Ce.a})],Ve.prototype,"viewModel",void 0),Object(n.a)([Object(a.b)(),Object(h.a)("esri/widgets/Feature/t9n/Feature")],Ve.prototype,"messages",void 0),Object(n.a)([Object(a.b)(),Object(h.a)("esri/widgets/support/t9n/uriUtils")],Ve.prototype,"messagesURIUtils",void 0);var ze,Ge,Ue=Ve=Object(n.a)([Object(c.a)("esri.widgets.Feature.FeatureFields")],Ve),qe=Ue,He=r(7),Be=r(165),We=r(441),Je=r(148),Ze=["#ffffff","#858585","#ffbebe","#ffebbe","#ffebaf","#ffffbe","#e9ffbe","#d3ffbe","#beffe8","#bee8ff","#bed2ff","#e8beff","#ffbee8","#ebebeb","#707070","#ff7f7f","#ffa77f","#ffd37f","#ffff73","#d1ff73","#a3ff73","#73ffdf","#73dfff","#73b2ff","#df73ff","#ff73df","#d6d6d6","#5c5c5c","#ff0000","#ff5500","#ffaa00","#ffff00","#aaff00","#55ff00","#00ffc5","#00c5ff","#0070ff","#c500ff","#ff00c5","#c2c2c2","#474747","#e60000","#e64c00","#e69800","#e6e600","#98e600","#4ce600","#00e6a9","#00a9e6","#005ce6","#a900e6","#e600a9","#adadad","#242424","#a80000","#a83800","#a87000","#a8a800","#70a800","#38a800","#00a884","#0084a8","#004da8","#8400a8","#a80084","#999999","#1a1a1a","#730000","#732600","#734c00","#737300","#4c7300","#267300","#00734c","#004c73","#002673","#4c0073","#73004"],Xe=[].concat(Ze.slice(30,39),Ze.slice(28,30).reverse()),Ye=[{name:"default",colors:Xe},{name:"cat-dark",colors:["#ed5151","#149ece","#a7c636","#9e559c","#fc921f","#ffde3e","#f789d8","#b7814a","#3caf99","#6b6bd6","#b54779","#7f7f7f"]},{name:"tropical-bliss",colors:["#fce138","#ff9399","#fcd27e","#f1983c","#a553b7","#b1a9d0","#6ecffc","#4c81cd","#fc6f84","#fc3e5a","#6af689","#48885c"]},{name:"desert-blooms",colors:["#102432","#144d59","#ffc730","#ed9310","#a64f1b","#661510","#d9351a","#b31515","#4a0932","#8c213f","#18382e","#2c6954"]},{name:"under-the-sea",colors:["#bf9727","#607100","#00734c","#704489","#01acca","#024e76","#f09100","#ea311f","#c6004b","#7570b3","#666666","#333333"]},{name:"vibrant-rainbow",colors:["#fffb00","#f5cb11","#9fd40c","#46e39c","#32b8a6","#7ff2fa","#ac08cc","#dd33ff","#eb7200","#e8a784","#bf2e2e","#6c7000"]},{name:"ocean-bay",colors:["#191921","#11495c","#78b1c2","#454f4b","#8f8f82","#9be0c0","#87b051","#f7ec88","#ebdcc1","#dbb658","#c43541","#75351e"]},{name:"prairie-summer",colors:["#332424","#751555","#d47013","#d68989","#211173","#82aad6","#7bfaeb","#6ec9a8","#6b6408","#eada40","#ccc54a","#1fc235"]},{name:"pastel-chalk",colors:["#fffd99","#f5e6a4","#c1d48c","#b8e3d0","#a0b8b5","#cbf7fa","#d791f2","#dfc1eb","#f2b983","#e8c4b2","#bf8e8e","#94995c"]},{name:"seq-yellow-orange-red-bright",colors:["#910000","#b1260b","#c0370f","#e05919","#ef6a1d","#ff7b22","#ffa143","#ffb454","#ffda74","#ffed85"]},{name:"seq-reds-bright",colors:["#57453b","#7b4238","#9f4036","#c23d33","#d7483c","#ec5244","#f3696c","#f9816c","#ffc4ae","#fff0dc"]},{name:"seq-purples-bright",colors:["#4e465c","#5a4a78","#695291","#775baa","#8663c3","#946bdc","#aa89e8","#c1a6f3","#d7c4ff","#e6e1ff"]},{name:"seq-blues-bright",colors:["#404d54","#435c6c","#48799d","#4b88b6","#4d96ce","#50a5e7","#74bbed","#98d0f3","#bce6f9","#e6faff"]},{name:"seq-greens-bright",colors:["#39544c","#386757","#368165","#359b73","#33b581","#4bc392","#64d2a2","#7ce0b3","#cbf6d9","#f4ffea"]},{name:"seq-browns-bright",colors:["#524834","#715b38","#8f6e3c","#ae8140","#cc9444","#eba748","#eeb664","#f0c47f","#f9e0b7","#fff8eb"]}],Qe="en-us",Ke=new Map([["ar",()=>r.e(220).then(r.bind(null,1132)).then((function(e){return e.a}))],["bs-ba",()=>r.e(221).then(r.bind(null,1133)).then((function(e){return e.b}))],["ca-es",()=>r.e(222).then(r.bind(null,1134)).then((function(e){return e.c}))],["cs-cz",()=>r.e(223).then(r.bind(null,1135)).then((function(e){return e.c}))],["da-dk",()=>r.e(224).then(r.bind(null,1136)).then((function(e){return e.d}))],["de-de",()=>r.e(226).then(r.bind(null,1137)).then((function(e){return e.d}))],["de-ch",()=>r.e(225).then(r.bind(null,1138)).then((function(e){return e.d}))],["el-gr",()=>r.e(227).then(r.bind(null,1139)).then((function(e){return e.e}))],["en-us",()=>r.e(229).then(r.bind(null,1140)).then((function(e){return e.e}))],["en-ca",()=>r.e(228).then(r.bind(null,1141)).then((function(e){return e.e}))],["es-es",()=>r.e(230).then(r.bind(null,1142)).then((function(e){return e.e}))],["et-ee",()=>r.e(231).then(r.bind(null,1143)).then((function(e){return e.e}))],["fi-fi",()=>r.e(232).then(r.bind(null,1144)).then((function(e){return e.f}))],["fr-fr",()=>r.e(233).then(r.bind(null,1145)).then((function(e){return e.f}))],["he-il",()=>r.e(234).then(r.bind(null,1146)).then((function(e){return e.h}))],["hr-hr",()=>r.e(235).then(r.bind(null,1147)).then((function(e){return e.h}))],["hu-hu",()=>r.e(236).then(r.bind(null,1148)).then((function(e){return e.h}))],["id-id",()=>r.e(237).then(r.bind(null,1149)).then((function(e){return e.i}))],["it-it",()=>r.e(239).then(r.bind(null,1150)).then((function(e){return e.i}))],["ja-jp",()=>r.e(240).then(r.bind(null,1151)).then((function(e){return e.j}))],["ko-kr",()=>r.e(241).then(r.bind(null,1152)).then((function(e){return e.k}))],["lt-lt",()=>r.e(242).then(r.bind(null,1153)).then((function(e){return e.l}))],["lv-lv",()=>r.e(243).then(r.bind(null,1154)).then((function(e){return e.l}))],["nb-no",()=>r.e(244).then(r.bind(null,1155)).then((function(e){return e.n}))],["nl-nl",()=>r.e(245).then(r.bind(null,1156)).then((function(e){return e.n}))],["pl-pl",()=>r.e(246).then(r.bind(null,1157)).then((function(e){return e.p}))],["pt-br",()=>r.e(247).then(r.bind(null,1158)).then((function(e){return e.p}))],["pt-pt",()=>r.e(248).then(r.bind(null,1159)).then((function(e){return e.p}))],["ro-ro",()=>r.e(249).then(r.bind(null,1160)).then((function(e){return e.r}))],["ru-ru",()=>r.e(250).then(r.bind(null,1161)).then((function(e){return e.r}))],["sk-sk",()=>r.e(251).then(r.bind(null,1162)).then((function(e){return e.s}))],["sl-sl",()=>r.e(252).then(r.bind(null,1163)).then((function(e){return e.s}))],["sr-rs",()=>r.e(253).then(r.bind(null,1164)).then((function(e){return e.s}))],["sv-se",()=>r.e(254).then(r.bind(null,1165)).then((function(e){return e.s}))],["th-th",()=>r.e(255).then(r.bind(null,1166)).then((function(e){return e.t}))],["tr-tr",()=>r.e(256).then(r.bind(null,1167)).then((function(e){return e.t}))],["uk-ua",()=>r.e(257).then(r.bind(null,1168)).then((function(e){return e.u}))],["vi-vn",()=>r.e(258).then(r.bind(null,1169)).then((function(e){return e.v}))],["zh-cn",()=>r.e(259).then(r.bind(null,1170)).then((function(e){return e.z}))],["zh-hk",()=>r.e(49).then(r.bind(null,1171)).then((function(e){return e.z}))],["zh-tw",()=>r.e(49).then(r.bind(null,1171)).then((function(e){return e.z}))]]);function $e(e){return e?Ke.has(e.toLowerCase())?e.toLowerCase():function(e){var t=e.split("-")[0].toLowerCase(),r=null;for(var i of Ke.keys())if(i.startsWith(t)){r=i;break}return r}(e)||Qe:Qe}function et(){return(et=Object(He.a)((function*(e=Object(Je.b)()){if(e=$e(e),ze&&e===Ge)return ze;ze=r.e(238).then(r.bind(null,1172)).then((function(e){return e.i})),Ge=e;try{var[t,i]=yield Promise.all([ze,Ke.get(Ge)()]);Ge===e&&(t.am4core.options.defaultLocale=i.default),t.am4core.options.suppressWarnings=!0,t.am4core.options.autoDispose=!0}catch(n){return ze=null,Ge=null,null}return ze}))).apply(this,arguments)}var tt="esri-feature-media",rt="esri-feature-media__container",it="esri-feature-media__item-container",nt="esri-feature-media__item",at="esri-feature-media__item-title",ot="esri-feature-media__item-caption",st="esri-feature-media__previous",ct="esri-feature-media__previous-icon",lt="esri-feature-media__previous-icon--rtl",ut="esri-feature-media__next",dt="esri-feature-media__next-icon",ht="esri-feature-media__next-icon--rtl",pt="esri-feature-media__chart",ft="esri-feature-media__button",bt="esri-feature-media__icon",vt="esri-icon-left-triangle-arrow",mt="esri-icon-right-triangle-arrow",gt=.05,yt=.95,Ot=class extends f.a{constructor(e,t){super(e,t),this._refreshTimer=null,this._refreshIntervalInfo=null,this._featureElementInfo=null,this.attributes=null,this.activeMediaInfoIndex=null,this.description=null,this.fieldInfoMap=null,this.layer=null,this.mediaInfos=null,this.popupTemplate=null,this.relatedInfos=null,this.title=null,this.viewModel=new We.a,this.messages=null}initialize(){this._featureElementInfo=new ge,this.own(Object(u.a)(this,["viewModel.activeMediaInfo","viewModel.activeMediaInfoIndex"],(()=>this._setupMediaRefreshTimer())),Object(u.a)(this,["viewModel.description","viewModel.title"],(()=>this._setupFeatureElementInfo())))}destroy(){this._clearMediaRefreshTimer(),this._featureElementInfo.destroy()}render(){var e;return Object(p.a)("div",{bind:this,class:tt,onkeyup:this._handleMediaKeyup},null==(e=this._featureElementInfo)?void 0:e.render(),this.renderMedia())}renderMedia(){var{formattedMediaInfoCount:e}=this.viewModel;return e?Object(p.a)("div",{key:"media-element-container",class:rt},this.renderMediaPageButton("previous"),this.renderMediaInfo(),this.renderMediaPageButton("next")):null}renderImageMediaInfo(e){var{_refreshIntervalInfo:t}=this,{activeMediaInfoIndex:r,formattedMediaInfoCount:i}=this.viewModel,{value:n,refreshInterval:a,altText:o,title:s,type:c}=e,{sourceURL:l,linkURL:u}=n,d=Object(we.q)(u)?"_blank":"_self",h="_blank"===d?"noreferrer":"",f=a?t:null,b=f?f.timestamp:0,v=f?f.sourceURL:l,m=Object(p.a)("img",{alt:o||s,key:"media-".concat(c,"-").concat(r,"-").concat(i,"-").concat(b),src:v});return(u?Object(p.a)("a",{title:s,href:u,rel:h,target:d},m):null)||m}renderChartMediaInfo(e){var{activeMediaInfoIndex:t,formattedMediaInfoCount:r}=this.viewModel;return Object(p.a)("div",{key:"media-".concat(e.type,"-").concat(t,"-").concat(r),bind:this,class:pt,afterCreate:this._getChartDependencies})}renderMediaInfoType(){var{activeMediaInfo:e}=this.viewModel;return e?"image"===e.type?this.renderImageMediaInfo(e):-1!==e.type.indexOf("chart")?this.renderChartMediaInfo(e):null:null}renderMediaInfo(){var{activeMediaInfo:e}=this.viewModel,t=e.title?Object(p.a)("div",{key:"media-title",class:at,innerHTML:e.title}):null,r=e.caption?Object(p.a)("div",{key:"media-caption",class:ot,innerHTML:e.caption}):null;return Object(p.a)("div",{key:"media-container",class:it},Object(p.a)("div",{key:"media-item-container",class:nt},this.renderMediaInfoType()),t,r)}renderMediaPageButton(e){if(this.viewModel.formattedMediaInfoCount<2)return null;var t="previous"===e,r=t?this.messages.previous:this.messages.next,i=t?this.classes(ft,st):this.classes(ft,ut),n=t?this.classes(bt,ct,vt):this.classes(bt,dt,mt),a=t?this.classes(bt,lt,mt):this.classes(bt,ht,vt),o=t?"media-previous":"media-next",s=t?this._previous:this._next;return Object(p.a)("button",{type:"button",key:o,title:r,"aria-label":r,tabIndex:0,class:i,bind:this,onclick:s},Object(p.a)("span",{"aria-hidden":"true",class:n}),Object(p.a)("span",{"aria-hidden":"true",class:a}))}_setupFeatureElementInfo(){var{description:e,title:t}=this;this._featureElementInfo.set({description:e,title:t})}_next(){this.viewModel.next()}_previous(){this.viewModel.previous()}_getChartDependencies(e){var t=this;return Object(He.a)((function*(){var r=yield function(){return et.apply(this,arguments)}(),{activeMediaInfo:i}=t.viewModel;t._renderChart({chartDiv:e,mediaInfo:i,chartsModule:r})}))()}_handleMediaKeyup(e){var t=Object(Be.a)(e);"ArrowLeft"===t&&(e.stopPropagation(),this.viewModel.previous()),"ArrowRight"===t&&(e.stopPropagation(),this.viewModel.next())}_renderChart(e){var{chartsModule:t,chartDiv:r,mediaInfo:i}=e,{value:n,type:a}=i,{am4core:o}=t,s=function(e,t="default"){var r=Ye.find((e=>e.name===t));return r?r.colors.map((t=>e.color(t))):null}(o);Object(d.e)()&&o.useTheme(t.am4themes_dark),o.useTheme(t.am4themes_animated),o.useTheme((function(e){e instanceof o.ColorSet&&s&&(e.list=s)}));var c="pie-chart"===a?this._createPieChart(e):this._createXYChart(e);r.setAttribute("aria-label",i.altText||i.title),c.data=n.series.map((e=>({tooltip:e.tooltip,value:e.value}))).filter((e=>"pie-chart"!==a||e.value>0))}_customizeChartTooltip(e,t){e.label.wrap=!0,e.label.maxWidth=200,e.autoTextColor=!1,e.getFillFromObject=!1,e.label.fill=t.color("#ffffff"),e.background.fill=t.color({r:0,g:0,b:0,a:.7})}_createPieChart(e){var{chartDiv:t,chartsModule:r}=e,{am4core:i,am4charts:n}=r,a=i.create(t,n.PieChart);a.rtl=Object(d.f)();var o=a.series.push(new n.PieSeries);return o.labels.template.disabled=!0,o.ticks.template.disabled=!0,o.dataFields.value="value",o.dataFields.category="tooltip",this._customizeChartTooltip(o.tooltip,i),a}_getMinSeriesValue(e){var t=0;return e.forEach((e=>t=Math.min(e.value,t))),t}_createColumnChart(e,t){var{chartsModule:r,mediaInfo:i}=t,{value:n}=i,{am4core:a,am4charts:o}=r,s=e.xAxes.push(new o.CategoryAxis);s.dataFields.category="tooltip",s.renderer.labels.template.disabled=!0,this._customizeChartTooltip(s.tooltip,a),s.tooltip.events.on("sizechanged",(()=>{s.tooltip.dy=-s.tooltip.contentHeight}));var c=e.yAxes.push(new o.ValueAxis),l=c.renderer.labels.template;c.renderer.minLabelPosition=gt,c.renderer.maxLabelPosition=yt,c.min=this._getMinSeriesValue(n.series),this._customizeChartTooltip(c.tooltip,a),l.wrap=!0;var u=e.series.push(new o.ColumnSeries);u.dataFields.valueY="value",u.dataFields.categoryX="tooltip",e.cursor=new o.XYCursor,n.series.length>15&&(e.scrollbarX=new a.Scrollbar)}_createBarChart(e,t){var{chartsModule:r,mediaInfo:i}=t,{value:n}=i,{am4core:a,am4charts:o}=r,s=e.yAxes.push(new o.CategoryAxis);s.dataFields.category="tooltip",s.renderer.inversed=!0,s.renderer.labels.template.disabled=!0,this._customizeChartTooltip(s.tooltip,a),s.tooltip.events.on("sizechanged",(()=>{s.tooltip.dx=s.tooltip.contentWidth}));var c=e.xAxes.push(new o.ValueAxis),l=c.renderer.labels.template;c.renderer.minLabelPosition=gt,c.renderer.maxLabelPosition=yt,c.min=this._getMinSeriesValue(n.series),this._customizeChartTooltip(c.tooltip,a),l.wrap=!0;var u=e.series.push(new o.ColumnSeries);u.dataFields.valueX="value",u.dataFields.categoryY="tooltip",e.cursor=new o.XYCursor,n.series.length>15&&(e.scrollbarY=new a.Scrollbar)}_createLineChart(e,t){var{chartsModule:r,mediaInfo:i}=t,{value:n}=i,{am4core:a,am4charts:o}=r,s=e.xAxes.push(new o.CategoryAxis);s.dataFields.category="tooltip",s.renderer.labels.template.disabled=!0,this._customizeChartTooltip(s.tooltip,a),s.tooltip.events.on("sizechanged",(()=>{s.tooltip.dy=-s.tooltip.contentHeight}));var c=e.yAxes.push(new o.ValueAxis),l=c.renderer.labels.template;c.renderer.minLabelPosition=gt,c.renderer.maxLabelPosition=yt,c.min=this._getMinSeriesValue(n.series),this._customizeChartTooltip(c.tooltip,a),l.wrap=!0;var u=e.series.push(new o.LineSeries);u.dataFields.categoryX="tooltip",u.dataFields.valueY="value",e.cursor=new o.XYCursor,n.series.length>15&&(e.scrollbarX=new a.Scrollbar)}_createXYChart(e){var{chartDiv:t,chartsModule:r,mediaInfo:i}=e,{type:n}=i,{am4core:a,am4charts:o}=r,s=a.create(t,o.XYChart);return s.rtl=Object(d.f)(),"column-chart"===n&&this._createColumnChart(s,e),"bar-chart"===n&&this._createBarChart(s,e),"line-chart"===n&&this._createLineChart(s,e),s}_clearMediaRefreshTimer(){var{_refreshTimer:e}=this;e&&(clearTimeout(e),this._refreshTimer=null)}_updateMediaInfoTimestamp(e){var t=Date.now();this._refreshIntervalInfo={timestamp:t,sourceURL:this._getImageSource(e,t)},this.scheduleRender()}_setupMediaRefreshTimer(){this._clearMediaRefreshTimer();var{activeMediaInfo:e}=this.viewModel;e&&"image"===e.type&&e.refreshInterval&&this._setRefreshTimeout(e)}_setRefreshTimeout(e){var{refreshInterval:t,value:r}=e;if(t){var i=6e4*t;this._updateMediaInfoTimestamp(r.sourceURL);var n=setInterval((()=>{this._updateMediaInfoTimestamp(r.sourceURL)}),i);this._refreshTimer=n}}_getImageSource(e,t){var r=-1!==e.indexOf("?")?"&":"?",[i,n=""]=e.split("#");return"".concat(i).concat(r,"timestamp=").concat(t).concat(n?"#":"").concat(n)}};Object(n.a)([Object(o.a)("viewModel.attributes")],Ot.prototype,"attributes",void 0),Object(n.a)([Object(o.a)("viewModel.activeMediaInfoIndex")],Ot.prototype,"activeMediaInfoIndex",void 0),Object(n.a)([Object(o.a)("viewModel.description")],Ot.prototype,"description",void 0),Object(n.a)([Object(o.a)("viewModel.fieldInfoMap")],Ot.prototype,"fieldInfoMap",void 0),Object(n.a)([Object(o.a)("viewModel.layer")],Ot.prototype,"layer",void 0),Object(n.a)([Object(o.a)("viewModel.mediaInfos")],Ot.prototype,"mediaInfos",void 0),Object(n.a)([Object(o.a)("viewModel.popupTemplate")],Ot.prototype,"popupTemplate",void 0),Object(n.a)([Object(o.a)("viewModel.relatedInfos")],Ot.prototype,"relatedInfos",void 0),Object(n.a)([Object(o.a)("viewModel.title")],Ot.prototype,"title",void 0),Object(n.a)([Object(a.b)({type:We.a})],Ot.prototype,"viewModel",void 0),Object(n.a)([Object(a.b)(),Object(h.a)("esri/widgets/Feature/t9n/Feature")],Ot.prototype,"messages",void 0);var jt=Ot=Object(n.a)([Object(c.a)("esri.widgets.Feature.FeatureMedia")],Ot),_t=r(472),wt=r(465),xt="esri-icon-loading-indicator esri-rotating",St="esri-widget",Mt="esri-feature",Tt="esri-feature__size-container",Pt="esri-feature__title",Et="esri-feature__main-container",Ct="esri-feature__content-element",At="esri-feature__text",It="esri-feature__last-edited-info",kt="esri-feature__loading-container",Ft="esri-feature__loading-spinner",Rt={title:!0,content:!0,lastEditedInfo:!0},Dt=class extends(Object(wt.a)(f.a)){constructor(e,t){super(e,t),this._contentWidgets=[],this.graphic=null,this.defaultPopupTemplateEnabled=!1,this.label=void 0,this.messages=null,this.messagesURIUtils=null,this.spatialReference=null,this.title=null,this.visibleElements=Object(i.a)({},Rt),this.map=null,this.view=null,this.viewModel=new _t.a}initialize(){this.own(Object(u.a)(this,"viewModel.contentViewModels",(()=>this._setupContentWidgets())))}destroy(){this._destroyContentWidgets()}castVisibleElements(e){return Object(i.a)(Object(i.a)({},Rt),e)}render(){var{waitingForContent:e}=this.viewModel;return Object(p.a)("div",{class:this.classes(Mt,St)},Object(p.a)("div",{class:Tt},this.renderTitle(),e?this.renderLoading():this.renderContentContainer()))}setActiveMedia(e,t){this.viewModel.setActiveMedia(e,t)}nextMedia(e){this.viewModel.nextMedia(e)}previousMedia(e){this.viewModel.previousMedia(e)}renderLoading(){return Object(p.a)("div",{key:"loading-container",class:kt},Object(p.a)("span",{class:this.classes(xt,Ft)}))}renderContentContainer(){var{visibleElements:e}=this;return e.content?Object(p.a)("div",{class:Et},[this.renderContent(),this.renderLastEditInfo()]):null}renderTitle(){var{visibleElements:e,title:t}=this;return e.title?Object(p.a)("h4",{class:Pt,innerHTML:t}):null}renderContent(){var e=this.viewModel.content,t="content";if(!e)return null;if(Array.isArray(e))return e.length?Object(p.a)("div",{key:"".concat(t,"-content-elements")},e.map(this.renderContentElement,this)):null;if("string"==typeof e){var r=this._contentWidgets[0];return!r||r.destroyed?null:Object(p.a)("div",{key:"".concat(t,"-content")},r.render())}return this.renderNodeContent(e)}renderContentElement(e,t){var{visibleElements:r}=this;if("boolean"!=typeof r.content&&!r.content[e.type])return null;switch(e.type){case"attachments":return this.renderAttachments(t);case"custom":return this.renderCustom(e,t);case"fields":return this.renderFields(t);case"media":return this.renderMedia(t);case"text":return this.renderText(e,t);default:return null}}renderAttachments(e){var t=this._contentWidgets[e];if(!t||t.destroyed)return null;var{state:r,attachmentInfos:i}=t.viewModel;return"loading"===r||i.length>0?Object(p.a)("div",{key:this._buildKey("attachments-element",e),class:this.classes(Ct)},t.render()):null}renderCustom(e,t){var{creator:r}=e,i=this._contentWidgets[t];return!i||i.destroyed?null:r?Object(p.a)("div",{key:this._buildKey("custom-element",t),class:Ct},i.render()):null}renderFields(e){var t=this._contentWidgets[e];return!t||t.destroyed?null:Object(p.a)("div",{key:this._buildKey("fields-element",e),class:Ct},t.render())}renderMedia(e){var t=this._contentWidgets[e];return!t||t.destroyed?null:Object(p.a)("div",{key:this._buildKey("media-element",e),class:Ct},t.render())}renderLastEditInfo(){var{visibleElements:e,messages:t}=this,{lastEditInfo:r}=this.viewModel;if(!r||!e.lastEditedInfo)return null;var{date:i,user:n}=r,a="edit"===r.type?n?t.lastEditedByUser:t.lastEdited:n?t.lastCreatedByUser:t.lastCreated,o=Object(l.a)(a,{date:i,user:n});return Object(p.a)("div",{key:"edit-info-element",class:this.classes(It,Ct)},o)}renderText(e,t){var r=e.text,i=this._contentWidgets[t];return!i||i.destroyed?null:r?Object(p.a)("div",{key:this._buildKey("text-element",t),class:this.classes(Ct,At)},i.render()):null}_buildKey(e,...t){return"".concat(e,"__").concat(this.get("viewModel.graphic.uid")||"0","-").concat(t.join("-"))}_destroyContentWidgets(){this._contentWidgets.forEach((e=>{e.viewModel=null,e&&!e.destroyed&&e.destroy()})),this._contentWidgets=[]}_setupContentWidgets(){this._destroyContentWidgets();var e=this.get("viewModel.content"),{contentViewModels:t}=this.viewModel;if(Array.isArray(e))e.forEach(((e,r)=>{"attachments"===e.type&&(this._contentWidgets[r]=new je({displayType:e.displayType,viewModel:t[r]})),"fields"===e.type&&(this._contentWidgets[r]=new qe({viewModel:t[r]})),"media"===e.type&&(this._contentWidgets[r]=new jt({viewModel:t[r]})),"text"===e.type&&(this._contentWidgets[r]=new Ee({viewModel:t[r]})),"custom"===e.type&&(this._contentWidgets[r]=new Ee({viewModel:t[r]}))}),this);else{var r=t[0];r&&!r.destroyed&&(this._contentWidgets[0]=new Ee({viewModel:r}))}this.scheduleRender()}};Object(n.a)([Object(o.a)("viewModel.graphic")],Dt.prototype,"graphic",void 0),Object(n.a)([Object(o.a)("viewModel.defaultPopupTemplateEnabled")],Dt.prototype,"defaultPopupTemplateEnabled",void 0),Object(n.a)([Object(a.b)({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],Dt.prototype,"label",void 0),Object(n.a)([Object(a.b)(),Object(h.a)("esri/widgets/Feature/t9n/Feature")],Dt.prototype,"messages",void 0),Object(n.a)([Object(a.b)(),Object(h.a)("esri/widgets/support/t9n/uriUtils")],Dt.prototype,"messagesURIUtils",void 0),Object(n.a)([Object(o.a)("viewModel.spatialReference")],Dt.prototype,"spatialReference",void 0),Object(n.a)([Object(o.a)("viewModel.title")],Dt.prototype,"title",void 0),Object(n.a)([Object(a.b)()],Dt.prototype,"visibleElements",void 0),Object(n.a)([Object(s.a)("visibleElements")],Dt.prototype,"castVisibleElements",null),Object(n.a)([Object(o.a)("viewModel.map")],Dt.prototype,"map",void 0),Object(n.a)([Object(o.a)("viewModel.view")],Dt.prototype,"view",void 0),Object(n.a)([Object(a.b)({type:_t.a})],Dt.prototype,"viewModel",void 0);var Lt=Dt=Object(n.a)([Object(c.a)("esri.widgets.Feature")],Dt);t.a=Lt},,,function(e,t,r){"use strict";r.d(t,"a",(function(){return n})),r.d(t,"b",(function(){return a})),r.d(t,"c",(function(){return c})),r.d(t,"d",(function(){return s}));var i={transparent:[0,0,0,0],black:[0,0,0,1],silver:[192,192,192,1],gray:[128,128,128,1],white:[255,255,255,1],maroon:[128,0,0,1],red:[255,0,0,1],purple:[128,0,128,1],fuchsia:[255,0,255,1],green:[0,128,0,1],lime:[0,255,0,1],olive:[128,128,0,1],yellow:[255,255,0,1],navy:[0,0,128,1],blue:[0,0,255,1],teal:[0,128,128,1],aqua:[0,255,255,1],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],blanchedalmond:[255,235,205,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],oldlace:[253,245,230,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],rebeccapurple:[102,51,153,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],whitesmoke:[245,245,245,1],yellowgreen:[154,205,5,10]};function n(e){var t;return null!=(t=i[e.toLowerCase()])?t:null}function a(e){var t=n(e);return t?[...t]:t}function o(e,t,r){r<0&&++r,r>1&&--r;var i=6*r;return i<1?e+(t-e)*i:2*r<1?t:3*r<2?e+(t-e)*(2/3-r)*6:e}function s(e,t,r,i=1){var n=(e%360+360)%360/360,a=r<=.5?r*(t+1):r+t-r*t,s=2*r-a;return[Math.round(256*o(s,a,n+1/3)),Math.round(256*o(s,a,n)),Math.round(256*o(s,a,n-1/3)),i]}function c(e){var t=e.length>5,r=t?8:4,i=(1<<r)-1,n=t?1:17,a=t?9===e.length:5===e.length,o=Number("0x"+e.substr(1));if(isNaN(o))return null;var s,c=[0,0,0,1];return a&&(s=o&i,o>>=r,c[3]=n*s/255),s=o&i,o>>=r,c[2]=n*s,s=o&i,o>>=r,c[1]=n*s,s=o&i,o>>=r,c[0]=n*s,c}},,,function(e,t,r){"use strict";r.d(t,"a",(function(){return d})),r.d(t,"c",(function(){return h}));var i=r(82),n=(r(80),r(81)),a=(r(88),r(85)),o=r(84),s=(r(83),r(86),r(87),r(107)),c=r(293),l=r(123),u=s.a.ofType(l.a);n.a.getLogger("esri.support.GraphicsCollection");var d=class extends u{constructor(e){super(e),this.on("before-add",(e=>{e.item||e.preventDefault()})),this.on("after-add",(e=>this._own(e.item))),this.on("after-remove",(({item:e})=>{e.layer=null}))}destroy(){this._unownAll()}get owner(){return this._get("owner")}set owner(e){e!==this._get("owner")&&(this._unownAll(),this._set("owner",e),this._ownAll())}_createNewInstance(e){return new u(e)}_ownAll(){this.items.forEach((e=>this._own(e)))}_own(e){e.layer&&"remove"in e.layer&&e.layer!==this.owner&&e.layer.remove(e),e.layer=this.owner}_unownAll(){this.items.forEach((e=>this._unown(e)))}_unown(e){e.layer===this.owner&&(e.layer=null)}};Object(i.a)([Object(a.b)()],d.prototype,"owner",null),d=Object(i.a)([Object(o.a)("esri.support.GraphicsCollection")],d);var h=(e="graphics")=>({type:d,cast:c.a,set(t){var r=Object(c.b)(t,this._get(e),d);r.owner=this,this._set(e,r)}}),p=d;t.b=p},,function(e,t,r){"use strict";r.d(t,"a",(function(){return H})),r.d(t,"b",(function(){return E}));r(80);var i=r(81),n=r(110),a=r(104),o=r(111),s=r(330),c=r(157),l=r(299),u=r(174),d=r(177),h=r(347),p=r(424),f=r(374),b=r(425),v=i.a.getLogger("esri.views.3d.support.geometryUtils.boundedPlane");function m(e=D){return{plane:Object(b.c)(e.plane),origin:Object(a.d)(e.origin),basis1:Object(a.d)(e.basis1),basis2:Object(a.d)(e.basis2)}}function g(e,t=m()){return y(e.origin,e.basis1,e.basis2,t)}function y(e,t,r,i=m()){return Object(o.j)(i.origin,e),Object(o.j)(i.basis1,t),Object(o.j)(i.basis2,r),O(i),function(e,t){Math.abs(Object(o.g)(e.basis1,e.basis2)/(Object(o.o)(e.basis1)*Object(o.o)(e.basis2)))>1e-6&&v.warn(t,"Provided basis vectors are not perpendicular"),Math.abs(Object(o.g)(e.basis1,A(e)))>1e-6&&v.warn(t,"Basis vectors and plane normal are not perpendicular"),Math.abs(-Object(o.g)(A(e),e.origin)-e.plane[3])>1e-6&&v.warn(t,"Plane offset is not consistent with plane origin")}(i,"fromValues()"),i}function O(e){Object(b.f)(e.basis2,e.basis1,e.origin,e.plane)}function j(e,t,r){e!==r&&g(e,r);var i=Object(o.d)(d.d.get(),A(e),t);return Object(o.e)(r.origin,r.origin,i),r.plane[3]-=t,r}function _(e,t=m()){var r=(e[2]-e[0])/2,i=(e[3]-e[1])/2;return Object(o.v)(t.origin,e[0]+r,e[1]+i,0),Object(o.v)(t.basis1,r,0,0),Object(o.v)(t.basis2,0,i,0),Object(b.b)(0,0,1,0,t.plane),t}function w(e,t,r){return!!Object(b.i)(e.plane,t,r)&&I(e,r)}function x(e,t,r){var i=L.get();R(e,t,i,L.get());var a=Number.POSITIVE_INFINITY;for(var c of G){var l=F(e,c,N.get()),u=d.d.get();if(Object(b.d)(i,l,u)){var h=Object(s.d)(d.d.get(),t.origin,u),p=Math.abs(Object(n.b)(Object(o.g)(t.direction,h)));p<a&&(a=p,Object(o.j)(r,u))}}return a===Number.POSITIVE_INFINITY?S(e,t,r):r}function S(e,t,r){if(w(e,t,r))return r;var i=L.get(),n=L.get();R(e,t,i,n);var a=Number.POSITIVE_INFINITY;for(var s of G){var c=F(e,s,N.get()),l=d.d.get();if(Object(b.e)(i,c,l)){var u=Object(f.c)(t,l);if(!Object(b.g)(n,l))continue;u<a&&(a=u,Object(o.j)(r,l))}}return P(e,t.origin)<a&&M(e,t.origin,r),r}function M(e,t,r){var i=Object(b.p)(e.plane,t,d.d.get()),n=Object(p.e)(k(e,e.basis1),i,-1,1,d.d.get()),a=Object(p.e)(k(e,e.basis2),i,-1,1,d.d.get());return Object(o.i)(r,Object(o.e)(d.d.get(),n,a),e.origin),r}function T(e,t,r){var{origin:i,basis1:n,basis2:a}=e,s=Object(o.i)(d.d.get(),t,i),c=Object(h.c)(n,s),l=Object(h.c)(a,s),u=Object(h.c)(A(e),s);return Object(o.v)(r,c,l,u)}function P(e,t){var r=T(e,t,d.d.get()),{basis1:i,basis2:n}=e,a=Object(o.o)(i),s=Object(o.o)(n),c=Math.max(Math.abs(r[0])-a,0),l=Math.max(Math.abs(r[1])-s,0),u=r[2];return c*c+l*l+u*u}function E(e,t){return Object(b.g)(e.plane,t)&&I(e,t)}function C(e,t){var r=-e.plane[3];return Object(h.c)(A(e),t)-r}function A(e){return Object(b.n)(e.plane)}function I(e,t){var r=Object(o.i)(d.d.get(),t,e.origin),i=Object(o.r)(e.basis1),n=Object(o.r)(e.basis2),a=Object(o.g)(e.basis1,r),s=Object(o.g)(e.basis2,r);return-a-i<0&&a-i<0&&-s-n<0&&s-n<0}function k(e,t){var r=N.get();return Object(o.j)(r.origin,e.origin),Object(o.j)(r.vector,t),r}function F(e,t,r){var{basis1:i,basis2:n,origin:a}=e,s=Object(o.d)(d.d.get(),i,t.origin[0]),c=Object(o.d)(d.d.get(),n,t.origin[1]);Object(o.e)(r.origin,s,c),Object(o.e)(r.origin,r.origin,a);var l=Object(o.d)(d.d.get(),i,t.direction[0]),u=Object(o.d)(d.d.get(),n,t.direction[1]);return Object(o.d)(r.vector,Object(o.e)(l,l,u),2),r}function R(e,t,r,i){var n=A(e);Object(b.f)(n,t.direction,t.origin,r),Object(b.f)(Object(b.n)(r),n,t.origin,i)}var D={plane:Object(b.c)(),origin:Object(a.g)(0,0,0),basis1:Object(a.g)(1,0,0),basis2:Object(a.g)(0,1,0)},L=new l.a(b.c),N=new l.a(p.a),V=Object(a.e)(),z=new l.a((()=>({origin:null,basis1:null,basis2:null,plane:null}))),G=[{origin:[-1,-1],direction:[1,0]},{origin:[1,-1],direction:[0,1]},{origin:[1,1],direction:[-1,0]},{origin:[-1,1],direction:[0,-1]}],U=Object(u.b)(),q=Object(u.b)(),H=Object.freeze({__proto__:null,BoundedPlaneClass:class{constructor(){this.plane=Object(b.c)(),this.origin=Object(a.e)(),this.basis1=Object(a.e)(),this.basis2=Object(a.e)()}},create:m,wrap:function(e,t,r){var i=z.get();return i.origin=e,i.basis1=t,i.basis2=r,i.plane=Object(b.s)(0,0,0,0),O(i),i},copy:g,copyWithoutVerify:function(e,t){Object(o.j)(t.origin,e.origin),Object(o.j)(t.basis1,e.basis1),Object(o.j)(t.basis2,e.basis2),Object(b.a)(e.plane,t.plane)},fromValues:y,updateUnboundedPlane:O,elevate:j,setExtent:function(e,t,r){return _(t,r),j(r,C(e,e.origin),r),r},fromAABoundingRect:_,intersectRay:w,intersectRayClosestSilhouette:function(e,t,r){if(w(e,t,r))return r;var i=x(e,t,d.d.get());return Object(o.e)(r,t.origin,Object(o.d)(d.d.get(),t.direction,Object(o.n)(t.origin,i)/Object(o.o)(t.direction))),r},closestPointOnSilhouette:x,closestPoint:S,projectPoint:M,projectPointLocal:T,distance2:P,distance:function(e,t){return Math.sqrt(P(e,t))},distanceToSilhouette:function(e,t){var r=Number.NEGATIVE_INFINITY;for(var i of G){var n=F(e,i,N.get()),a=Object(p.b)(n,t);a>r&&(r=a)}return Math.sqrt(r)},extrusionContainsPoint:E,axisAt:function(e,t,r,i){return function(e,t,r){switch(t){case 0:Object(o.j)(r,e.basis1),Object(o.q)(r,r);break;case 1:Object(o.j)(r,e.basis2),Object(o.q)(r,r);break;case 2:Object(o.j)(r,A(e))}return r}(e,r,i)},altitudeAt:C,setAltitudeAt:function(e,t,r,i){var n=C(e,t),a=Object(o.d)(V,A(e),r-n);return Object(o.e)(i,t,a),i},equals:function(e,t){return Object(o.p)(e.basis1,t.basis1)&&Object(o.p)(e.basis2,t.basis2)&&Object(o.p)(e.origin,t.origin)},transform:function(e,t,r){return e!==r&&g(e,r),Object(c.a)(U,t),Object(c.b)(U,U),Object(o.l)(r.basis1,e.basis1,U),Object(o.l)(r.basis2,e.basis2,U),Object(o.l)(Object(b.n)(r.plane),Object(b.n)(e.plane),U),Object(o.l)(r.origin,e.origin,t),Object(b.r)(r.plane,r.origin,r.plane),r},rotate:function(e,t,r,i){return e!==i&&g(e,i),Object(c.q)(q,Object(c.i)(q),t,r),Object(o.l)(i.basis1,e.basis1,q),Object(o.l)(i.basis2,e.basis2,q),O(i),i},normal:A,UP:D})},function(e,t,r){"use strict";r.d(t,"a",(function(){return c})),r.d(t,"b",(function(){return o})),r.d(t,"c",(function(){return s})),r.d(t,"d",(function(){return l}));var i=r(110);function n(e,t,r){var i=r.parameters,n=r.paddingPixelsOverride;return u.scale=Math.min(i.divisor/(t-i.offset),1),u.factor=function(e){return Math.abs(e*e*e)}(e),u.minPixelSize=i.minPixelSize,u.paddingPixels=n,u}function a(e,t){return 0===e?t.minPixelSize:t.minPixelSize*(1+2*t.paddingPixels/e)}function o(e,t){return Math.max(Object(i.l)(e*t.scale,e,t.factor),a(e,t))}function s(e,t,r,i){i.scale=function(e,t,r){var i=n(e,t,r);return i.minPixelSize=0,i.paddingPixels=0,o(1,i)}(e,t,r),i.factor=0,i.minPixelSize=r.parameters.minPixelSize,i.paddingPixels=r.paddingPixelsOverride}function c(e,t,r=[0,0]){var i=Math.min(Math.max(t.scale,a(e[1],t)/e[1]),1);return r[0]=e[0]*i,r[1]=e[1]*i,r}function l(e,t,r,i){return o(e,n(t,r,i))}Object(i.f)(10),Object(i.f)(12),Object(i.f)(70),Object(i.f)(40);var u={scale:0,factor:0,minPixelSize:0,paddingPixels:0}},function(e,t,r){"use strict";r.d(t,"a",(function(){return s}));var i,n,a=r(120),o=r(119);function s(e){e.vertex.code.add(Object(o.a)(i||(i=Object(a.a)(["\n    const float PI = 3.141592653589793;\n  "])))),e.fragment.code.add(Object(o.a)(n||(n=Object(a.a)(["\n    const float PI = 3.141592653589793;\n    const float LIGHT_NORMALIZATION = 1.0 / PI;\n    const float INV_PI = 0.3183098861837907;\n    const float HALF_PI = 1.570796326794897;\n    "]))))}},function(e,t,r){"use strict";r.d(t,"a",(function(){return p})),r.d(t,"b",(function(){return h})),r.d(t,"c",(function(){return f})),r.d(t,"d",(function(){return l})),r.d(t,"e",(function(){return d}));var i=r(202),n=r(135),a=r(515),o=r(312),s=r(692);class c{constructor(e){this.coordinateHelper=e}}class l extends c{constructor(e,t){super(e),this.point=t}objectEqual(e){return e instanceof l&&Object(o.d)(this.point,e.point)}check(e){return Object(n.j)(e,this.point)<a.a.pointThreshold}closestTo(){return this.coordinateHelper.clone(this.point)}intersect(e){var t=[];return e instanceof u?t.push(...Object(s.b)({start:e.start,end:e.end,type:e instanceof h?1:0},this.point)):e instanceof f&&t.push(...Object(s.a)(e.center,e.radius,this.point)),t.map((t=>new p(this.coordinateHelper,t,this,e)))}}class u extends c{constructor(e,t,r){super(e),this.start=t,this.end=r}objectEqual(e){return e instanceof u&&Object(o.d)(this.start,e.start)&&Object(o.d)(this.end,e.end)}intersect(e){var t=[];return e instanceof l?t.push(...Object(s.b)({start:this.start,end:this.end,type:this instanceof h?1:0},e.point)):e instanceof u?t.push(...Object(s.c)({start:this.start,end:this.end,type:this instanceof h?1:0},{start:e.start,end:e.end,type:e instanceof h?1:0})):e instanceof f&&t.push(...Object(s.d)({start:this.start,end:this.end,type:this instanceof h?1:0},e.center,e.radius)),t.map((t=>new p(this.coordinateHelper,t,this,e)))}}class d extends u{constructor(e,t,r){super(e,t,r),this.dir=Object(i.a)(),this.p=Object(i.a)()}objectEqual(e){return e instanceof d&&super.objectEqual(e)}check(e){return Object(n.d)(this.dir,this.end,this.start),Object(n.d)(this.p,e,this.start),Object(n.g)(this.dir,this.p)>=0&&Object(s.e)(e,this.start,this.end)<a.a.pointOnLineThreshold}closestTo(e){var t=this.coordinateHelper.clone(e);return Object(s.h)(t,e,this.start,this.end),t}}class h extends u{constructor(e,t,r){super(e,t,r)}objectEqual(e){return e instanceof h&&super.objectEqual(e)}check(e){return Object(s.e)(e,this.start,this.end)<a.a.pointOnLineThreshold}closestTo(e){var t=this.coordinateHelper.clone(e);return Object(s.g)(t,e,this.start,this.end),t}}class p extends c{constructor(e,t,r,i){super(e),this.intersection=t,this.first=r,this.second=i}objectEqual(e){return e instanceof p&&this.first.objectEqual(e.first)&&this.second.objectEqual(e.second)}check(){return!1}closestTo(e){var t=this.coordinateHelper.clone(e);return Object(n.c)(t,this.intersection),t}intersect(){return[]}}class f extends c{constructor(e,t,r){super(e),this.center=t,this.radius=r}objectEqual(e){return e instanceof f&&this.center[0]===e.center[0]&&this.center[1]===e.center[1]&&this.radius===e.radius}check(){return!1}closestTo(e){var t=this.coordinateHelper.clone(e);return Object(s.f)(t,e,this.center,this.radius),t}intersect(e){var t=[];return e instanceof u?t.push(...Object(s.d)({start:e.start,end:e.end,type:e instanceof h?1:0},this.center,this.radius)):e instanceof l&&t.push(...Object(s.a)(this.center,this.radius,e.point)),t.map((t=>new p(this.coordinateHelper,t,this,e)))}}},,,,,,,,function(e,t,r){"use strict";r.d(t,"a",(function(){return S}));var i=r(91),n=r(388),a=r(328),o=r(379),s=r(349),c=r(585),l=r(82),u=r(300),d=r(307),h=r(313),p=r(306),f=r(286),b=r(267),v=r(380),m=r(249),g=r(322),y=r(280),O=r(489),j=r(619);class _ extends d.a{initializeProgram(e){var t=_.shader.get(),r=this.configuration,i=t.build({output:r.output,OITEnabled:0===r.transparencyPassType,attributeColor:r.vertexColors,slicePlaneEnabled:r.slicePlaneEnabled,sliceHighlightDisabled:!1,sliceEnabledForVertexPrograms:!1,multipassTerrainEnabled:r.multipassTerrainEnabled,cullAboveGround:r.cullAboveGround});return new f.a(e.rctx,i.generateSource("vertex"),i.generateSource("fragment"),p.a)}bindPass(e,t,r){v.a.bindProjectionMatrix(this.program,r.camera.projectionMatrix),this.program.setUniform4fv("eColor",t.color),4===this.configuration.output&&g.a.bindOutputHighlight(e,this.program,r),(1===this.configuration.output||r.multipassTerrainEnabled)&&this.program.setUniform2fv("cameraNearFar",r.camera.nearFar),r.multipassTerrainEnabled&&(this.program.setUniform2fv("inverseViewport",r.inverseViewport),Object(y.a)(this.program,e,r))}bindDraw(e){v.a.bindView(this.program,e),m.a.bindUniformsWithOrigin(this.program,this.configuration,e)}setPipelineState(e,t){var r=this.configuration,i=3===e,n=2===e;return Object(b.d)({blending:0!==r.output&&7!==r.output||!r.transparent?null:i?s.f:Object(s.a)(e),culling:(e=>0!==e&&{face:1===e?1028:1029,mode:2305})(r.cullFace),depthTest:{func:Object(s.b)(e)},depthWrite:i||n?r.writeDepth&&b.c:null,colorWrite:b.b,stencilWrite:r.sceneHasOcludees?O.h:null,stencilTest:r.sceneHasOcludees?t?O.d:O.c:null,polygonOffset:i||n?r.polygonOffset&&w:Object(s.g)(r.enableOffset)})}initializePipeline(){return this._occludeePipelineState=this.setPipelineState(this.configuration.transparencyPassType,!0),this.setPipelineState(this.configuration.transparencyPassType,!1)}getPipelineState(e){return e?this._occludeePipelineState:this.pipeline}}_.shader=new u.a(j.a,(()=>r.e(293).then(r.bind(null,1189))));var w={factor:1,units:1};class x extends h.a{constructor(){super(...arguments),this.output=0,this.cullFace=0,this.slicePlaneEnabled=!1,this.vertexColors=!1,this.transparent=!1,this.polygonOffset=!1,this.enableOffset=!0,this.writeDepth=!0,this.sceneHasOcludees=!1,this.transparencyPassType=3,this.multipassTerrainEnabled=!1,this.cullAboveGround=!0}}Object(l.a)([Object(h.b)({count:8})],x.prototype,"output",void 0),Object(l.a)([Object(h.b)({count:3})],x.prototype,"cullFace",void 0),Object(l.a)([Object(h.b)()],x.prototype,"slicePlaneEnabled",void 0),Object(l.a)([Object(h.b)()],x.prototype,"vertexColors",void 0),Object(l.a)([Object(h.b)()],x.prototype,"transparent",void 0),Object(l.a)([Object(h.b)()],x.prototype,"polygonOffset",void 0),Object(l.a)([Object(h.b)()],x.prototype,"enableOffset",void 0),Object(l.a)([Object(h.b)()],x.prototype,"writeDepth",void 0),Object(l.a)([Object(h.b)()],x.prototype,"sceneHasOcludees",void 0),Object(l.a)([Object(h.b)({count:4})],x.prototype,"transparencyPassType",void 0),Object(l.a)([Object(h.b)()],x.prototype,"multipassTerrainEnabled",void 0),Object(l.a)([Object(h.b)()],x.prototype,"cullAboveGround",void 0);class S extends o.a{constructor(e){super(e,T),this.supportsEdges=!0,this.techniqueConfig=new x}getTechniqueConfig(e,t){return this.techniqueConfig.output=e,this.techniqueConfig.cullFace=this.params.cullFace,this.techniqueConfig.vertexColors=this.params.vertexColors,this.techniqueConfig.slicePlaneEnabled=this.params.slicePlaneEnabled,this.techniqueConfig.transparent=this.params.transparent,this.techniqueConfig.polygonOffset=this.params.polygonOffset,this.techniqueConfig.writeDepth=this.params.writeDepth,this.techniqueConfig.sceneHasOcludees=this.params.sceneHasOcludees,this.techniqueConfig.transparencyPassType=t?t.transparencyPassType:3,this.techniqueConfig.enableOffset=!t||t.camera.relativeElevation<s.e,this.techniqueConfig.multipassTerrainEnabled=!!t&&t.multipassTerrainEnabled,this.techniqueConfig.cullAboveGround=!t||t.cullAboveGround,this.techniqueConfig}getPassParameters(){return this.params}intersect(e,t,r,i,n,o,s){Object(a.e)(e,t,i,n,o,void 0,s)}getGLMaterial(e){return 0===e.output||7===e.output||4===e.output||1===e.output&&this.params.writeLinearDepth?new M(e):void 0}createBufferWriter(){return new c.a(c.b)}}class M extends n.a{constructor(e){super(e),this.updateParameters()}updateParameters(e){this.technique=this.techniqueRep.acquireAndReleaseExisting(_,this.material.getTechniqueConfig(this.output,e),this.technique)}beginSlot(e){return 4===this.output?3===e:e===(this.technique.configuration.transparent?this.technique.configuration.writeDepth?5:8:3)}_updateOccludeeState(e){e.hasOccludees!==this.material.params.sceneHasOcludees&&this.material.setParameterValues({sceneHasOcludees:e.hasOccludees})}ensureParameters(e){0!==this.output&&7!==this.output||this._updateOccludeeState(e),this.updateParameters(e)}bind(e,t){e.bindProgram(this.technique.program),this.technique.bindPass(e,this.material.getPassParameters(),t)}getPipelineState(e,t){return this.technique.getPipelineState(t)}}var T=Object(i.a)({color:[1,1,1,1],transparent:!1,writeDepth:!0,writeLinearDepth:!1,vertexColors:!1,polygonOffset:!1,slicePlaneEnabled:!1,cullFace:0,sceneHasOcludees:!1},o.b)},,,,function(e,t,r){"use strict";r.d(t,"a",(function(){return j})),r.d(t,"b",(function(){return w})),r.d(t,"c",(function(){return g})),r.d(t,"d",(function(){return _}));var i=r(92),n=r(126),a=r(240),o=r(315),s=r(565),c=r(241),l=r(344);class u{constructor(){this.uid=0,this.target=null,this.path=null,this.oldValue=null,this.callback=null,this.getValue=null,this.removed=!1,this.propertyPath=null}acquire(e,t,r,i,a){this.target=e,this.path=t,this.oldValue=r,this.callback=i,this.getValue=a,this.propertyPath=Object(n.g)(t),this.uid=++u.uid,this.removed=!1}release(){this.target=this.path=this.propertyPath=this.callback=this.oldValue=null,this.uid=++u.uid,this.removed=!0}}u.pool=new s.a(u),u.uid=0;var d,h=new o.a,p=new Set,f=h.acquire();function b(e){p.has(e)?f.splice(f.indexOf(e),1):p.add(e),f.push(e),d||(d=Object(c.b)(y))}function v(e){if(!e.removed){var{callback:t,path:r,oldValue:i,target:n}=e,a=e.getValue();m(i,a)&&(e.oldValue=a,t.call(n,a,i,r,n))}}function m(e,t){return!Object(i.b)(e,t)}function g(e){for(var t=0;t<f.length;t++){var r=f[t];r.target===e&&(r.removed=!0)}}function y(){for(var e=10;d&&e--;){d=null;var t=f;f=h.acquire(),p.clear();var r=h.acquire();for(var i of t){var n=i.uid;v(i),n===i.uid&&i.removed&&r.push(i)}for(var a=0;a<f.length;a++){var o=f[a];o.removed&&(r.push(o),p.delete(o),f.splice(a,1),a-=1)}for(var s=0;s<r.length;s++)u.pool.release(r[s]);h.release(t),h.release(r),O.forEach((e=>e()))}}var O=new Set;function j(e){return O.add(e),{remove(){O.delete(e)}}}function _(e,t,r,i=!1){return!e.__accessor__||e.__accessor__.destroyed?{remove(){}}:i?function(e,t,r){var i=Object(n.e)(e,t,r,((e,t,r)=>{var n=!1;return Object(l.a)((()=>Object(a.c)(e,t)),((a,o)=>{e.__accessor__.destroyed?i.remove():n||(n=!0,m(o,a)&&r.call(e,a,o,t,e),n=!1)}))}));return i}(e,t,r):function(e,t,r){var i=Object(n.e)(e,t,r,((e,t,r)=>{var o,s,c=Object(l.b)((()=>Object(a.c)(e,t)),((n,a)=>{e.__accessor__.destroyed||o&&o.uid!==s?i.remove():(o||(o=u.pool.acquire(e,t,n,r,a),s=o.uid),b(o))}));return{remove:Object(n.d)((function(){c.remove(),o&&(o.uid!==s||o.removed||(o.removed=!0,b(o)),o=null),i=c=null}))}}));return i}(e,t,r)}function w(e){return f.some((t=>t.oldValue===e))}},function(e,t,r){"use strict";r.d(t,"a",(function(){return a}));var i=r(89),n=r(221);class a extends n.a{constructor(){super(...arguments),this._set=new Set}destroy(){super.destroy(),this._set=Object(i.o)(this._set)}acquire(...e){var t=super.acquire(...e);return this._set.delete(t),t}release(e){e&&!this._set.has(e)&&(super.release(e),this._set.add(e))}_dispose(e){this._set.delete(e),super._dispose(e)}}},,function(e,t,r){"use strict";function i(e,t){for(var[r,i]of e)if(t(i,r))return!0;return!1}r.d(t,"a",(function(){return i}))},function(e,t,r){"use strict";r.d(t,"a",(function(){return s})),r.d(t,"b",(function(){return u})),r.d(t,"c",(function(){return l})),r.d(t,"d",(function(){return o})),r.d(t,"e",(function(){return c}));var i=r(276),n=r(210),a=r(125);function o(e,t,r,n){if(null==n||e.hasZ||(n=void 0),"point"===e.type)return e.x+=t,e.y+=r,e.hasZ&&null!=n&&(e.z+=n),e;if("multipoint"===e.type){for(var a=e.points,o=0;o<a.length;o++)a[o]=d(a[o],t,r,n);return e}if("extent"===e.type)return e.xmin+=t,e.xmax+=t,e.ymin+=r,e.ymax+=r,null!=n&&(e.zmin+=n,e.zmax+=n),e;for(var s=Object(i.b)(e),c="polyline"===e.type?e.paths:e.rings,l=0;l<s.length;l++)for(var u=s[l],h=0;h<u.length;h++)u[h]=d(u[h],t,r,n);return"paths"in e?e.paths=c:e.rings=c,e}function s(e,t,r,n,a){var s=e.clone(),c=n.resolution;if("point"===s.type){if(a)o(s,t*c,-r*c);else{var l=n.state.transform,u=n.state.inverseTransform,d=l[0]*s.x+l[2]*s.y+l[4],p=l[1]*s.x+l[3]*s.y+l[5];s.x=u[0]*(d+t)+u[2]*(p+r)+u[4],s.y=u[1]*(d+t)+u[3]*(p+r)+u[5]}return s}if("multipoint"===s.type){if(a)o(s,t*c,-r*c);else for(var f=s.points,b=n.state.transform,v=n.state.inverseTransform,m=0;m<f.length;m++){var g=f[m],y=b[0]*g[0]+b[2]*g[1]+b[4],O=b[1]*g[0]+b[3]*g[1]+b[5],j=v[0]*(y+t)+v[2]*(O+r)+v[4],_=v[1]*(y+t)+v[3]*(O+r)+v[5];f[m]=h(g,j,_,void 0)}return s}if("extent"===s.type){if(a)o(s,t*c,-r*c);else{var w=n.state.transform,x=n.state.inverseTransform,S=w[0]*s.xmin+w[2]*s.ymin+w[4],M=w[1]*s.xmin+w[3]*s.ymin+w[5],T=w[0]*s.xmax+w[2]*s.ymax+w[4],P=w[1]*s.xmax+w[3]*s.ymax+w[5];s.xmin=x[0]*(S+t)+x[2]*(M+r)+x[4],s.ymin=x[1]*(S+t)+x[3]*(M+r)+x[5],s.xmax=x[0]*(T+t)+x[2]*(P+r)+x[4],s.ymax=x[1]*(T+t)+x[3]*(P+r)+x[5]}return s}if(a)o(s,t*c,-r*c);else{for(var E=Object(i.b)(s),C="polyline"===s.type?s.paths:s.rings,A=n.state.transform,I=n.state.inverseTransform,k=0;k<E.length;k++)for(var F=E[k],R=0;R<F.length;R++){var D=F[R],L=A[0]*D[0]+A[2]*D[1]+A[4],N=A[1]*D[0]+A[3]*D[1]+A[5],V=I[0]*(L+t)+I[2]*(N+r)+I[4],z=I[1]*(L+t)+I[3]*(N+r)+I[5];F[R]=h(D,V,z,void 0)}"paths"in s?s.paths=C:s.rings=C}return s}function c(e,t,r,o){if("point"===e.type){var{x:s,y:c}=e,l=o?o[0]:s,u=o?o[1]:c,d=e.clone(),p=(s-l)*t+l,f=(c-u)*r+u;return d.x=p,d.y=f,d}if("multipoint"===e.type){for(var b=Object(i.b)(e),v=Object(a.i)(),[m,g,y,O]=Object(n.d)(v,[b]),j=o?o[0]:(m+y)/2,_=o?o[1]:(O+g)/2,w=e.clone(),x=w.points,S=0;S<x.length;S++){var M=x[S],[T,P]=M,E=(T-j)*t+j,C=(P-_)*r+_;x[S]=h(M,E,C,void 0)}return w}if("extent"===e.type){var{xmin:A,xmax:I,ymin:k,ymax:F}=e,R=o?o[0]:(A+I)/2,D=o?o[1]:(F+k)/2,L=e.clone();if(L.xmin=(A-R)*t+R,L.ymax=(F-D)*r+D,L.xmax=(I-R)*t+R,L.ymin=(k-D)*r+D,L.xmin>L.xmax){var N=L.xmin,V=L.xmax;L.xmin=V,L.xmax=N}if(L.ymin>L.ymax){var z=L.ymin,G=L.ymax;L.ymin=G,L.ymax=z}return L}for(var U=Object(i.b)(e),q=Object(a.i)(),[H,B,W,J]=Object(n.d)(q,U),Z=o?o[0]:(H+W)/2,X=o?o[1]:(J+B)/2,Y=e.clone(),Q="polyline"===Y.type?Y.paths:Y.rings,K=0;K<U.length;K++)for(var $=U[K],ee=0;ee<$.length;ee++){var te=$[ee],[re,ie]=te,ne=(re-Z)*t+Z,ae=(ie-X)*r+X;Q[K][ee]=h(te,ne,ae,void 0)}return"paths"in Y?Y.paths=Q:Y.rings=Q,Y}function l(e,t,r,i,n,a){var o=Math.sqrt((r-e)*(r-e)+(i-t)*(i-t));return Math.sqrt((n-e)*(n-e)+(a-t)*(a-t))/o}function u(e,t,r,i,n,a){var o=180*Math.atan2(t-i,e-r)/Math.PI;return 180*Math.atan2(t-a,e-n)/Math.PI-o}function d(e,t,r,i){return h(e,e[0]+t,e[1]+r,null!=e[2]&&null!=i?e[2]+i:void 0)}function h(e,t,r,i){var n=[t,r];return e.length>2&&n.push(null!=i?i:e[2]),e.length>3&&n.push(e[3]),n}},function(e,t,r){"use strict";r.d(t,"a",(function(){return n})),r.d(t,"b",(function(){return i})),r.d(t,"c",(function(){return a}));var i=e=>class extends e{constructor(){super(...arguments),this._isDisposed=!1}dispose(){for(var e of null!=(t=this._managedDisposables)?t:[]){var t,r=this[e];this[e]=null,r&&"function"==typeof r.dispose&&r.dispose()}this._isDisposed=!0}get isDisposed(){return this._isDisposed}};class n extends(i(class{})){}function a(){return(e,t)=>{var r,i;e.hasOwnProperty("_managedDisposables")||(e._managedDisposables=null!=(r=null==(i=e._managedDisposables)?void 0:i.slice())?r:[]),e._managedDisposables.unshift(t)}}},function(e,t,r){"use strict";r.d(t,"a",(function(){return a}));var i=r(91),n={divisor:0};function a(e,t={}){t=Object(i.a)(Object(i.a)({},n),t);var r=e.stride;return e.fieldNames.filter((t=>{var r=e.fields.get(t).optional;return!(r&&r.glPadding)})).map((i=>{var n=e.fields.get(i),a=n.constructor.ElementCount,s=o(n.constructor.ElementType),c=n.offset,l=!(!n.optional||!n.optional.glNormalized);return{name:i,stride:r,count:a,type:s,offset:c,normalized:l,divisor:t.divisor}}))}function o(e){var t=s[e];if(t)return t;throw new Error("BufferType not supported in WebGL")}var s={u8:5121,u16:5123,u32:5125,i8:5120,i16:5122,i32:5124,f32:5126}},,,,function(e,t,r){"use strict";r.d(t,"a",(function(){return cr})),r.d(t,"b",(function(){return lr}));var i=r(82),n=(r(80),r(81)),a=(r(88),r(85)),o=r(84),s=(r(83),r(86),r(87),r(241)),c=r(108),l=r(385),u=r(97),d=r(107),h=r(297),p=(r(302),r(367)),f=class extends u.a{constructor(){super(...arguments),this.items=new d.a,this._watchUpdatingTracking=new h.a,this._callbacks=new Map,this._projector=Object(p.a)(),this._hiddenProjector=Object(p.a)()}get needsRender(){return this.items.length>0}initialize(){var e=document.createElement("div");e.className="esri-overlay-surface",this._set("surface",e),this._hiddenSurface=document.createElement("div"),this._hiddenSurface.setAttribute("style","visibility: hidden;"),e.appendChild(this._hiddenSurface),this._watchUpdatingTracking.addOnCollectionChange(this.items,(e=>{e.added.map((e=>{var t=()=>e.render();this._callbacks.set(e,t),this._projector.append(this.surface,t)})),e.removed.map((e=>{var t=this._projector.detach(this._callbacks.get(e));this.surface.removeChild(t.domNode),this._callbacks.delete(e)}))}))}addItem(e){this.items.add(e)}removeItem(e){this.items.remove(e)}destroy(){this.items.removeAll(),this._callbacks.forEach((e=>this._projector.detach(e))),this._callbacks=null,this._projector=null,this._watchUpdatingTracking.destroy()}render(){this._projector.renderNow()}computeBoundingRect(e){var t=this._hiddenSurface,r=this._hiddenProjector,i=null,n=()=>i=e.render();r.append(t,n),r.renderNow();var a={left:0,top:0,right:0,bottom:0};if(i&&i.domNode){var o=i.domNode.getBoundingClientRect();a.left=o.left,a.top=o.top,a.right=o.right,a.bottom=o.bottom}for(r.detach(n);t.firstChild;)t.removeChild(t.firstChild);return a}overlaps(e,t){var r=this.computeBoundingRect(e),i=this.computeBoundingRect(t);return Math.max(r.left,i.left)<=Math.min(r.right,i.right)&&Math.max(r.top,i.top)<=Math.min(r.bottom,i.bottom)}get hasVisibleItems(){return this.items.some((e=>e.visible))}renderCanvas(e){if(this.items.some((e=>e.visible))){var t=e.getContext("2d");t.save(),t.font="10px ".concat(getComputedStyle(this.surface).fontFamily),this.items.forEach((e=>{t.save(),e.renderCanvas(t),t.restore()})),t.restore()}}};Object(i.a)([Object(a.b)({readOnly:!0})],f.prototype,"surface",void 0),Object(i.a)([Object(a.b)({readOnly:!0})],f.prototype,"items",void 0),Object(i.a)([Object(a.b)({readOnly:!0})],f.prototype,"needsRender",null),Object(i.a)([Object(a.b)({readOnly:!0})],f.prototype,"_watchUpdatingTracking",void 0),Object(i.a)([Object(a.b)({readOnly:!0,aliasOf:"_watchUpdatingTracking.updating"})],f.prototype,"updating",void 0);var b=f=Object(i.a)([Object(o.a)("esri.views.overlay.ViewOverlay")],f),v=r(91),m=r(89),g=r(145),y=r(116),O=r(288),j=r(165),_=r(281),w=(r(171),r(115)),x=r(457),S=r(114),M=r(261),T=r(163),P=r(301),E=r(129),C=r(154),A=r(465),I=r(541),k=r(94),F=r(131),R=class extends F.a.EventedAccessor{constructor(e){super(e),this._anchorHandles=new w.a,this.location=null,this.screenLocation=null,this.screenLocationEnabled=!1,this.view=null,this._anchorHandles.add([Object(c.d)(this,["screenLocationEnabled","location","view.size","view.stationary"],(()=>this._updateScreenPointAndHandle())),Object(c.d)(this,["view","view.ready"],(()=>this._wireUpView()))])}destroy(){this.view=null,this._anchorHandles&&this._anchorHandles.destroy(),this._anchorHandles=null,this._viewpointHandle=null}_wireUpView(){var e="view";if(this._anchorHandles.remove(e),this._viewpointHandle=null,this.get("view.ready")){this._setScreenLocation();var{view:t}=this,r="3d"===t.type?"camera":"viewpoint",i=Object(c.c)(t,r,(()=>this._viewpointChange()));this._anchorHandles.add(i,e),this._viewpointHandle=i,this._toggleWatchingViewpoint()}}_viewpointChange(){this._setScreenLocation(),this.emit("view-change")}_updateScreenPointAndHandle(){this._setScreenLocation(),this._toggleWatchingViewpoint()}_toggleWatchingViewpoint(){var{_viewpointHandle:e,location:t,screenLocationEnabled:r}=this;e&&(t&&r?e.resume():e.pause())}_setScreenLocation(){var{location:e,view:t,screenLocationEnabled:r}=this,i=this.get("view.ready"),n=r&&i&&Object(m.k)(e)?t.toScreen(e):null;this._set("screenLocation",n)}};Object(i.a)([Object(a.b)()],R.prototype,"location",void 0),Object(i.a)([Object(a.b)({readOnly:!0})],R.prototype,"screenLocation",void 0),Object(i.a)([Object(a.b)()],R.prototype,"screenLocationEnabled",void 0),Object(i.a)([Object(a.b)()],R.prototype,"view",void 0);var D=R=Object(i.a)([Object(o.a)("esri.widgets.support.AnchorElementViewModel")],R),L=class extends D{constructor(e){super(e),this.visible=!1}};Object(i.a)([Object(a.b)()],L.prototype,"visible",void 0);var N=L=Object(i.a)([Object(o.a)("esri.widgets.CompassViewModel")],L),V="esri-spinner",z="esri-spinner--start",G="esri-spinner--finish",U=class extends C.a{constructor(e,t){super(e,t),this._animationDelay=500,this._animationPromise=null,this.location=null,this.view=null,this.viewModel=new N,this.visible=!1}initialize(){this.own([Object(c.d)(this,"visible",(e=>this._visibleChange(e)))])}destroy(){this._animationPromise=null}show(e){var{location:t,promise:r}=e;t&&(this.viewModel.location=t),this.visible=!0;r&&r.catch((()=>{})).then((()=>this.hide()))}hide(){this.visible=!1}render(){var{visible:e}=this,{screenLocation:t}=this.viewModel,r=!!t,i={[z]:e&&r,[G]:!e&&r},n=this._getPositionStyles();return Object(E.a)("div",{class:this.classes(V,i),styles:n})}_visibleChange(e){if(e)this.viewModel.screenLocationEnabled=!0;else{var t=Object(k.a)(this._animationDelay);this._animationPromise=t,t.catch((()=>{})).then((()=>{this._animationPromise===t&&(this.viewModel.screenLocationEnabled=!1,this._animationPromise=null)}))}}_getPositionStyles(){var{screenLocation:e,view:t}=this.viewModel;if(!t||Object(m.j)(e))return{};var{padding:r}=t;return{left:e.x-r.left+"px",top:e.y-r.top+"px"}}};Object(i.a)([Object(g.a)("viewModel.location")],U.prototype,"location",void 0),Object(i.a)([Object(g.a)("viewModel.view")],U.prototype,"view",void 0),Object(i.a)([Object(a.b)({type:N})],U.prototype,"viewModel",void 0),Object(i.a)([Object(g.a)("viewModel.visible")],U.prototype,"visible",void 0);var q=U=Object(i.a)([Object(o.a)("esri.widgets.Spinner")],U),H=r(7),B=r(93),W=r(161),J=r(113),Z=(r(101),r(625)),X=r(566),Y=r(677),Q=r(211),K=(r(138),r(123)),$=r(218),ee=r(472),te=r(512),re=r(334),ie=r(484),ne="esri-icon-zoom-in-magnifying-glass",ae="esri-icon-trash",oe="esri-icon-table",se=new X.a({id:"zoom-to-feature",title:"{messages.zoom}",className:ne}),ce=new X.a({id:"remove-selected-feature",title:"{messages.remove}",className:ae}),le=new X.a({id:"zoom-to-clustered-features",title:"{messages.zoom}",className:ne}),ue=new X.a({id:"browse-clustered-features",title:"{messages.browseClusteredFeatures}",className:oe}),de=n.a.getLogger("esri.widgets.Popup.PopupViewModel"),he=function(e){var{event:t,view:r}=e,{action:i}=t,n=r&&r.popup;if(!i)return Promise.reject(new B.a("trigger-action:missing-arguments","Event has no action"));if(!n)return Promise.reject(new B.a("trigger-action:missing-arguments","view.popup is missing"));var{disabled:a,id:o}=i;if(!o)return Promise.reject(new B.a("trigger-action:invalid-action","action.id is missing"));if(a)return Promise.reject(new B.a("trigger-action:invalid-action","Action is disabled"));if(o===se.id)return function(e){return be.apply(this,arguments)}(n.viewModel);if(o===le.id)return function(e){return ve.apply(this,arguments)}(n.viewModel);if(n.viewModel.browseClusterEnabled=!1,o===ue.id&&(n.featureMenuOpen=!0,n.viewModel.browseClusterEnabled=!0),o===ce.id){n.close();var{selectedFeature:s}=n;if(!s)return Promise.reject(new B.a("trigger-action:".concat(ce.id),"selectedFeature is required",{selectedFeature:s}));var{sourceLayer:c}=s;return c?c.remove(s):r.graphics.remove(s),Promise.resolve()}return Promise.resolve()};function pe(e){var{selectedFeature:t,location:r,view:i}=e;return i?"3d"===i.type?t||r:e.get("selectedFeature.geometry")||r:null}function fe(e,t){if("3d"!==(null==t?void 0:t.type)||!e||"esri.Graphic"!==e.declaredClass)return!0;var r=t.getViewForGraphic(e);if(r&&"whenGraphicBounds"in r){var i=!1;return r.whenGraphicBounds(e,{useViewElevation:!0}).then((e=>{i=!e||!e.boundingBox||e.boundingBox[0]===e.boundingBox[3]&&e.boundingBox[1]===e.boundingBox[4]&&e.boundingBox[2]===e.boundingBox[5]})).catch((()=>{var t=new B.a("zoom-to:invalid-graphic","Could not zoom to the location of the graphic.",{graphic:e});de.error(t)})),i}return!0}function be(){return(be=Object(H.a)((function*(e){var{location:t,selectedFeature:r,view:i,zoomFactor:n}=e,a=pe(e);if(!a){var o=new B.a("zoom-to:invalid-target-or-view","Cannot zoom to location without a target and view.",{target:a,view:i});return de.error(o),Promise.reject(o)}var s=i.scale/n,c=e.get("selectedFeature.geometry")||t,l=c&&"point"===c.type&&fe(r,i);se.active=!0,se.disabled=!0,yield e.view.goTo({target:a,scale:l?s:void 0}),se.active=!1,se.disabled=!1,e.zoomToLocation=null,l&&(e.location=c)}))).apply(this,arguments)}function ve(){return(ve=Object(H.a)((function*(e){var{selectedFeature:t,view:r}=e;if("2d"!==(null==r?void 0:r.type)){var i=new B.a("zoomToCluster:invalid-view","View must be 2d MapView.",{view:r});throw de.error(i),i}if(!t.isAggregate){var n=new B.a("zoomToCluster:invalid-selectedFeature","Selected feature must represent an aggregate/cluster graphic.",{selectedFeature:t});throw de.error(n),n}var a=t.sourceLayer,o=yield r.whenLayerView(a),s=o.createQuery();s.aggregateIds=[t.getObjectId()],le.active=!0,le.disabled=!0;var{extent:c}=yield o.queryExtent(s);yield r.goTo({target:c}),le.active=!1,le.disabled=!1}))).apply(this,arguments)}function me(){return(me=Object(H.a)((function*(e){var{selectedFeature:t,view:r}=e;if("2d"!==(null==r?void 0:r.type)){var i=new B.a("displayClusterExtent:invalid-view","View must be 2d MapView.",{view:r});throw de.error(i),i}if(!t.isAggregate){var n=new B.a("zoomToCluster:invalid-selectedFeature","Selected feature must represent an aggregate/cluster graphic.",{selectedFeature:t});throw de.error(n),n}var a=t.sourceLayer,o=yield r.whenLayerView(a),s=o.createQuery();s.aggregateIds=[t.getObjectId()];var{extent:c}=yield o.queryExtent(s);e.selectedClusterBoundaryFeature.geometry=c,r.graphics.add(e.selectedClusterBoundaryFeature)}))).apply(this,arguments)}function ge(){return(ge=Object(H.a)((function*(e){var{selectedFeature:t,view:r}=e;if("2d"!==(null==r?void 0:r.type)){var i=new B.a("browseAggregateFeatures:invalid-view","View must be 2d MapView.",{view:r});throw de.error(i),i}if(!t.isAggregate){var n=new B.a("browseAggregateFeatures:invalid-selectedFeature","Selected feature must represent an aggregate/cluster graphic.",{selectedFeature:t});throw de.error(n),n}var a=t.sourceLayer,o=yield r.whenLayerView(a),s=o.createQuery();s.aggregateIds=[t.getObjectId()],ue.active=!0,ue.disabled=!0;var{features:c}=yield o.queryFeatures(s);ue.active=!1,ue.disabled=!1,e.features=[t].concat(c)}))).apply(this,arguments)}var ye=r(501),Oe=d.a.ofType({key:"type",defaultKeyValue:"button",base:Z.a,typeMap:{button:X.a,toggle:Y.a}}),je="esri.widgets.Popup.PopupViewModel",_e=n.a.getLogger(je),we=class extends(Object(ye.a)(D)){constructor(e){super(e),this._handles=new w.a,this._pendingPromises=new Set,this._fetchFeaturesController=null,this._selectedClusterFeature=null,this.featurePage=null,this.featuresPerPage=20,this.actions=new Oe,this.defaultPopupTemplateEnabled=!1,this.autoCloseEnabled=!1,this.autoOpenEnabled=!0,this.browseClusterEnabled=!1,this.content=null,this.featureViewModels=[],this.highlightEnabled=!0,this.includeDefaultActions=!0,this.selectedClusterBoundaryFeature=new K.a({symbol:new Q.a({outline:{width:1.5,color:"cyan"},style:"none"})}),this.title=null,this.updateLocationEnabled=!1,this.view=null,this.visible=!1,this.zoomFactor=4,this.zoomToLocation=null}get isLoadingFeature(){return this.featureViewModels.some((e=>e.waitingForContent))}initialize(){this._handles.add([Object(c.a)(this,["autoOpenEnabled","view"],(()=>this._autoOpenEnabledChange())),this.on("view-change",(()=>this._autoClose())),Object(c.d)(this,["highlightEnabled","selectedFeature","visible","view"],(()=>this._highlightFeature())),Object(c.d)(this,"view.animation.state",(e=>this._animationStateChange(e))),Object(c.d)(this,"location",(e=>this._locationChange(e))),Object(c.d)(this,"selectedFeature",(e=>this._selectedFeatureChange(e))),Object(c.d)(this,["selectedFeatureIndex","featureCount","featuresPerPage"],(()=>this._selectedFeatureIndexChange())),Object(c.d)(this,["featurePage","selectedFeatureIndex","featureCount","featuresPerPage, featureViewModels"],(()=>this._setGraphicOnFeatureViewModels())),Object(c.d)(this,"featureViewModels",(()=>this._featureViewModelsChange())),this.on("trigger-action",(e=>he({event:e,view:this.view}))),Object(c.f)(this,"waitingForResult",(()=>this._waitingForResultChange())),Object(c.d)(this,["features","view","view.map","view.spatialReference"],(()=>this._updateFeatureVMs())),Object(c.d)(this,["view.scale"],this._viewScaleChange),Object(c.f)(this,"visible",(()=>this.browseClusterEnabled=!1)),Object(c.d)(this,"browseClusterEnabled",(e=>e?this.enableClusterBrowsing():this.disableClusterBrowsing()))])}destroy(){this._cancelFetchingFeatures(),this._handles.destroy(),this._handles=null,this._pendingPromises.clear(),this.browseClusterEnabled=!1,this.view=null}get active(){return!(!this.visible||this.waitingForResult)}get allActions(){var e=this._get("allActions")||new Oe;e.removeAll();var{actions:t,defaultActions:r,defaultPopupTemplateEnabled:i,includeDefaultActions:n,selectedFeature:a}=this,o=n?r.concat(t):t,s=a&&("function"==typeof a.getEffectivePopupTemplate&&a.getEffectivePopupTemplate(i)||a.popupTemplate),c=s&&s.actions,l=s&&s.overwriteActions?c:c?c.concat(o):o;return l&&l.filter(Boolean).forEach((t=>e.add(t))),e}get defaultActions(){var e,t=this._get("defaultActions")||new Oe;return t.removeAll(),t.addMany(null!=(e=this.selectedFeature)&&e.isAggregate?[le.clone(),ue.clone()]:[se.clone()]),t}get featureCount(){return this.features.length}get features(){return this._get("features")||[]}set features(e){var t=e||[];this._set("features",t);var{pendingPromisesCount:r,promiseCount:i,selectedFeatureIndex:n}=this,a=i&&t.length;a&&r&&-1===n?this.selectedFeatureIndex=0:a&&-1!==n||(this.selectedFeatureIndex=t.length?0:-1)}get location(){return this._get("location")||null}set location(e){var t=this.get("view.spatialReference.isWebMercator");e&&e.get("spatialReference.isWGS84")&&t&&(e=Object(W.b)(e)),this._set("location",e)}get pendingPromisesCount(){return this._pendingPromises.size}get waitingForResult(){return!(!(this._fetchFeaturesController||this.pendingPromisesCount>0)||0!==this.featureCount)}get promiseCount(){return this.promises.length}get promises(){return this._get("promises")||[]}set promises(e){if(this._pendingPromises.clear(),this.features=[],!Array.isArray(e)||!e.length)return this._set("promises",[]),void this.notifyChange("pendingPromisesCount");this._set("promises",e),(e=e.slice(0)).forEach((e=>{this._pendingPromises.add(e);e.then((t=>{this._pendingPromises.has(e)&&this._updateFeatures(t),this._updatePendingPromises(e)}),(()=>this._updatePendingPromises(e)))})),this.notifyChange("pendingPromisesCount")}get selectedFeature(){var{features:e,selectedFeatureIndex:t}=this;return-1===t?null:e[t]||null}get selectedFeatureIndex(){var e=this._get("selectedFeatureIndex");return"number"==typeof e?e:-1}set selectedFeatureIndex(e){var{featureCount:t}=this;e=isNaN(e)||e<-1||!t?-1:(e+t)%t,this._set("selectedFeatureIndex",e)}get selectedFeatureViewModel(){return this.featureViewModels[this.selectedFeatureIndex]||null}get state(){return this.get("view.ready")?"ready":"disabled"}centerAtLocation(){var{view:e}=this,t=pe(this);if(!t){var r=new B.a("center-at-location:invalid-target-or-view","Cannot center at a location without a target and view.",{target:t,view:e});return _e.error(r),Promise.reject(r)}return this.callGoTo({target:{target:t,scale:e.scale}})}clear(){this.set({promises:[],features:[],content:null,title:null,location:null})}fetchFeatures(e,t){var{view:r}=this;if(!r||!e){var i=new B.a("fetch-features:invalid-screenpoint-or-view","Cannot fetch features without a screenPoint and view.",{screenPoint:e,view:r});return _e.error(i),Promise.reject(i)}return r.fetchPopupFeatures(e,{event:t&&t.event,defaultPopupTemplateEnabled:this.defaultPopupTemplateEnabled,signal:t&&t.signal})}open(e){var t=Object(v.a)(Object(v.a)({updateLocationEnabled:!1,promises:[],fetchFeatures:!1},e),{},{visible:!0}),{fetchFeatures:r}=t;delete t.fetchFeatures,r&&this._setFetchFeaturesPromises(t.location),this.set(t)}triggerAction(e){var t=this.allActions.getItemAt(e);t&&!t.disabled&&this.emit("trigger-action",{action:t})}next(){return this.selectedFeatureIndex=this.selectedFeatureIndex+1,this}previous(){return this.selectedFeatureIndex=this.selectedFeatureIndex-1,this}disableClusterBrowsing(){var e;(e=this).features=e.features.filter((e=>e.isAggregate)),this._clearBrowsedClusterGraphics()}enableClusterBrowsing(){var e=this;return Object(H.a)((function*(){yield function(e){return me.apply(this,arguments)}(e),yield function(e){return ge.apply(this,arguments)}(e)}))()}_animationStateChange(e){this.zoomToLocation||(se.disabled="waiting-for-target"===e)}_clearBrowsedClusterGraphics(){var e,t=null==(e=this.view)?void 0:e.graphics;t&&(t.remove(this.selectedClusterBoundaryFeature),t.remove(this._selectedClusterFeature)),this._selectedClusterFeature=null,this.selectedClusterBoundaryFeature.geometry=null}_viewScaleChange(){var e;(null!=(e=this.selectedFeature)&&e.isAggregate||this.browseClusterEnabled)&&(this.browseClusterEnabled=!1,this.visible=!1)}_locationChange(e){var{selectedFeature:t,updateLocationEnabled:r}=this;r&&e&&(!t||t.geometry)&&this.centerAtLocation()}_selectedFeatureIndexChange(){this.featurePage=this.featureCount>1?Math.floor(this.selectedFeatureIndex/this.featuresPerPage)+1:null}_featureViewModelsChange(){this.featurePage=this.featureCount>1?1:null}_setGraphicOnFeatureViewModels(){var{features:e,featureCount:t,featurePage:r,featuresPerPage:i,featureViewModels:n}=this;if(null!==r){var a=((r-1)*i+t)%t,o=a+i;n.slice(a,o).forEach(((t,r)=>{t&&!t.graphic&&(t.graphic=e[a+r])}))}}_selectedFeatureChange(e){var t=this;return Object(H.a)((function*(){if(e){var{location:r,updateLocationEnabled:i,view:n}=t;if(t.browseClusterEnabled){if(t._selectedClusterFeature&&(n.graphics.remove(t._selectedClusterFeature),t._selectedClusterFeature=null),e.isAggregate)return;return e.symbol=yield Object(te.a)(e),t._selectedClusterFeature=e,void n.graphics.add(t._selectedClusterFeature)}!i&&r||!e.geometry?i&&!e.geometry&&t.centerAtLocation().then((()=>{t.location=n.center.clone()})):t.location=Object(m.q)(t._getPointFromGeometry(e.geometry))}}))()}_waitingForResultChange(){!this.featureCount&&this.promises&&(this.visible=!1)}_setFetchFeaturesPromises(e){return this._fetchFeaturesWithController(this._getScreenPoint(e||this.location)).then((e=>{var{clientOnlyGraphics:t,promisesPerLayerView:r}=e,i=Promise.resolve(t),n=r.map((e=>e.promise));this.promises=[i,...n]}))}_destroyFeatureVMs(){this.featureViewModels.forEach((e=>e&&!e.destroyed&&e.destroy())),this._set("featureViewModels",[])}_updateFeatureVMs(){var{selectedFeature:e,features:t,featureViewModels:r}=this;if(null!=e&&e.isAggregate||(this.browseClusterEnabled=!1),this._destroyFeatureVMs(),t&&t.length){var i=r.slice(0),n=[];t.forEach(((t,r)=>{if(t){var a=null;if(i.some(((e,r)=>(e&&e.graphic===t&&(a=e,i.splice(r,1)),!!a))),a)n[r]=a;else{var o,s,c=new ee.a({defaultPopupTemplateEnabled:this.defaultPopupTemplateEnabled,spatialReference:null==(o=this.view)?void 0:o.spatialReference,graphic:t===e?t:null,map:null==(s=this.view)?void 0:s.map,view:this.view});n[r]=c}}})),i.forEach((e=>e&&!e.destroyed&&e.destroy())),this._set("featureViewModels",n)}}_getScreenPoint(e){var{view:t}=this;return t&&e&&"function"==typeof t.toScreen?t.toScreen(e):null}_autoOpenEnabledChange(){var e="auto-fetch-features",{_handles:t,autoOpenEnabled:r}=this;if(t.remove(e),r&&this.view){var i=this.view.on("click",(e=>{"mouse"===e.pointerType&&0!==e.button||this._fetchFeaturesAndOpen(e)}),re.b.WIDGET);t.add(i,e)}}_cancelFetchingFeatures(){var e=this._fetchFeaturesController;e&&e.abort(),this._fetchFeaturesController=null,this.notifyChange("waitingForResult")}_fetchFeaturesWithController(e,t){this._cancelFetchingFeatures();var r=Object(k.d)(),{signal:i}=r;this._fetchFeaturesController=r,this.notifyChange("waitingForResult");var n=this.fetchFeatures(e,{signal:i,event:t});return n.catch((()=>{})).then((()=>{this._fetchFeaturesController=null,this.notifyChange("waitingForResult")})),n}_fetchFeaturesAndOpen(e){var{screenPoint:t,mapPoint:r}=e,{view:i}=this;this._fetchFeaturesWithController(t,e).then((e=>{var{clientOnlyGraphics:t,promisesPerLayerView:n,location:a}=e,o=[Promise.resolve(t),...n.map((e=>e.promise))];return i.popup.open({location:a||r,promises:o}),e}))}_updatePendingPromises(e){e&&this._pendingPromises.has(e)&&(this._pendingPromises.delete(e),this.notifyChange("pendingPromisesCount"))}_autoClose(){this.autoCloseEnabled&&(this.visible=!1)}_getPointFromGeometry(e){return Object(m.j)(e)?null:"point"===e.type?e:"extent"===e.type?e.center:"polygon"===e.type?e.centroid:"multipoint"===e.type||"polyline"===e.type?e.extent.center:null}_getLayerView(e,t){return Object(H.a)((function*(){return yield e.when(),e.whenLayerView(t)}))()}_highlightFeature(){var e=this;return Object(H.a)((function*(){var t="highlight";e._handles.remove(t);var{selectedFeature:r,highlightEnabled:i,view:n,visible:a}=e;if(r&&n&&i&&a){var{layer:o,sourceLayer:s}=r;if(o&&o instanceof $.a){"map-notes"===(null==s?void 0:s.type)&&(o=s);var c=e._getLayerView(n,o);e._highlightPromise=c;var l=yield c;if(l&&Object(ie.a)(l)&&e._highlightPromise===c&&e.selectedFeature&&e.highlightEnabled&&e.visible){var u="objectIdField"in o&&o.objectIdField,d=r.attributes,h=d&&u&&d[u],p=l.highlight(h||r);e._handles.add(p,t)}}}}))()}_updateFeatures(e){var{features:t}=this;if(e&&e.length)if(t.length){var r=e.filter((e=>-1===t.indexOf(e)));this.features=t.concat(r)}else this.features=e}};Object(i.a)([Object(a.b)()],we.prototype,"featurePage",void 0),Object(i.a)([Object(a.b)()],we.prototype,"featuresPerPage",void 0),Object(i.a)([Object(a.b)()],we.prototype,"isLoadingFeature",null),Object(i.a)([Object(a.b)({type:Oe})],we.prototype,"actions",void 0),Object(i.a)([Object(a.b)({readOnly:!0})],we.prototype,"active",null),Object(i.a)([Object(a.b)({readOnly:!0})],we.prototype,"allActions",null),Object(i.a)([Object(a.b)({type:Boolean})],we.prototype,"defaultPopupTemplateEnabled",void 0),Object(i.a)([Object(a.b)()],we.prototype,"autoCloseEnabled",void 0),Object(i.a)([Object(a.b)()],we.prototype,"autoOpenEnabled",void 0),Object(i.a)([Object(a.b)()],we.prototype,"browseClusterEnabled",void 0),Object(i.a)([Object(a.b)()],we.prototype,"content",void 0),Object(i.a)([Object(a.b)({type:Oe,readOnly:!0})],we.prototype,"defaultActions",null),Object(i.a)([Object(a.b)({readOnly:!0})],we.prototype,"featureCount",null),Object(i.a)([Object(a.b)()],we.prototype,"features",null),Object(i.a)([Object(a.b)({readOnly:!0})],we.prototype,"featureViewModels",void 0),Object(i.a)([Object(a.b)()],we.prototype,"highlightEnabled",void 0),Object(i.a)([Object(a.b)()],we.prototype,"includeDefaultActions",void 0),Object(i.a)([Object(a.b)({type:J.a})],we.prototype,"location",null),Object(i.a)([Object(a.b)({readOnly:!0})],we.prototype,"pendingPromisesCount",null),Object(i.a)([Object(a.b)({readOnly:!0})],we.prototype,"selectedClusterBoundaryFeature",void 0),Object(i.a)([Object(a.b)({readOnly:!0})],we.prototype,"waitingForResult",null),Object(i.a)([Object(a.b)({readOnly:!0})],we.prototype,"promiseCount",null),Object(i.a)([Object(a.b)()],we.prototype,"promises",null),Object(i.a)([Object(a.b)({value:null,readOnly:!0})],we.prototype,"selectedFeature",null),Object(i.a)([Object(a.b)({value:-1})],we.prototype,"selectedFeatureIndex",null),Object(i.a)([Object(a.b)({readOnly:!0})],we.prototype,"selectedFeatureViewModel",null),Object(i.a)([Object(a.b)({readOnly:!0})],we.prototype,"state",null),Object(i.a)([Object(a.b)()],we.prototype,"title",void 0),Object(i.a)([Object(a.b)()],we.prototype,"updateLocationEnabled",void 0),Object(i.a)([Object(a.b)()],we.prototype,"view",void 0),Object(i.a)([Object(a.b)()],we.prototype,"visible",void 0),Object(i.a)([Object(a.b)()],we.prototype,"zoomFactor",void 0),Object(i.a)([Object(a.b)()],we.prototype,"zoomToLocation",void 0),Object(i.a)([Object(a.b)()],we.prototype,"centerAtLocation",null);var xe=we=Object(i.a)([Object(o.a)(je)],we),Se="selected-index",Me="popup-spinner",Te="esri-icon-left-triangle-arrow",Pe="esri-icon-right-triangle-arrow",Ee="esri-icon-maximize",Ce="esri-icon-dock-bottom",Ae="esri-icon-dock-left",Ie="esri-icon-dock-right",ke="esri-icon-close",Fe="esri-icon-minimize",Re="esri-icon-check-mark",De="esri-icon-loading-indicator",Le="esri-icon-default-action",Ne="esri-icon-handle-horizontal",Ve="esri-rotating",ze="esri-popup",Ge="esri-widget",Ue="esri-popup__main-container",qe="esri-popup__loading-container",He="esri-popup--is-collapsible",Be="esri-popup--is-collapsed",We="esri-popup--shadow",Je="esri-popup--is-docked",Ze="esri-popup--is-docked-top-left",Xe="esri-popup--is-docked-top-center",Ye="esri-popup--is-docked-top-right",Qe="esri-popup--is-docked-bottom-left",Ke="esri-popup--is-docked-bottom-center",$e="esri-popup--is-docked-bottom-right",et="esri-popup--aligned-top-center",tt="esri-popup--aligned-bottom-center",rt="esri-popup--aligned-top-left",it="esri-popup--aligned-bottom-left",nt="esri-popup--aligned-top-right",at="esri-popup--aligned-bottom-right",ot="esri-popup--feature-menu-open",st="esri-popup--actions-menu-open",ct="esri-popup--feature-updated",lt="esri-popup__header",ut="esri-popup__header-buttons",dt="esri-popup__header-container",ht="esri-popup__header-container--button",pt="esri-popup__header-title",ft="esri-popup__content",bt="esri-popup__footer",vt="esri-popup__footer--has-pagination",mt="esri-popup__footer--has-actions",gt="esri-popup__footer--has-actions-menu",yt="esri-popup__button",Ot="esri-popup__button--disabled",jt="esri-popup__button--dock",_t="esri-popup__icon",wt="esri-popup__icon--dock-icon",xt="esri-popup__inline-actions-container",St="esri-popup__actions-menu-button",Mt="esri-popup__actions",Tt="esri-popup__action",Pt="esri-popup__action-image",Et="esri-popup__action-text",Ct="esri-popup__action-toggle",At="esri-popup__action-toggle--on",It="esri-popup__pointer",kt="esri-popup__pointer-direction",Ft="esri-popup__navigation",Rt="esri-popup__pagination-previous",Dt="esri-popup__pagination-next",Lt="esri-popup__pagination-previous-icon",Nt="esri-popup__pagination-previous-icon--rtl",Vt="esri-popup__pagination-next-icon",zt="esri-popup__pagination-next-icon--rtl",Gt="esri-popup__feature-menu",Ut="esri-popup__feature-menu-list",qt="esri-popup__feature-menu-item",Ht="esri-popup__feature-menu-viewport",Bt="esri-popup__feature-menu-header",Wt="esri-popup__feature-menu-item--selected",Jt="esri-popup__feature-menu-button",Zt="esri-popup__feature-menu-title",Xt="esri-popup__feature-menu-observer",Yt="esri-popup__feature-menu-loader",Qt={buttonEnabled:!0,position:"auto",breakpoint:{width:544}},Kt="esri-popup";function $t(e,t){return void 0===t?"".concat(Kt,"__").concat(e):"".concat(Kt,"__").concat(e,"-").concat(t)}var er="esri.widgets.Popup",tr=n.a.getLogger(er),rr={closeButton:!0,featureNavigation:!0},ir=class extends(Object(A.a)(C.a)){constructor(e,t){super(e,t),this._blurClose=!1,this._blurContainer=!1,this._containerNode=null,this._mainContainerNode=null,this._featureMenuNode=null,this._actionsMenuNode=null,this._focusClose=!1,this._focusContainer=!1,this._focusDockButton=!1,this._focusFeatureMenuButton=!1,this._focusActionsMenuButton=!1,this._focusFirstFeature=!1,this._focusFirstAction=!1,this._handles=new w.a,this._pointerOffsetInPx=16,this._spinner=null,this._feature=null,this._featureMenuIntersectionObserverCallback=([e])=>{null!=e&&e.isIntersecting&&this.viewModel.featurePage++},this._featureMenuIntersectionObserver=new IntersectionObserver(this._featureMenuIntersectionObserverCallback),this._displaySpinnerThrottled=Object(x.a)((()=>this._displaySpinner()),0),this.actions=null,this.alignment="auto",this.autoCloseEnabled=null,this.autoOpenEnabled=null,this.defaultPopupTemplateEnabled=null,this.content=null,this.collapsed=!1,this.collapseEnabled=!0,this.dockEnabled=!1,this.featureCount=null,this.featureMenuOpen=!1,this.features=null,this.goToOverride=null,this.highlightEnabled=null,this.location=null,this.label=void 0,this.maxInlineActions=3,this.messages=null,this.messagesCommon=null,this.promises=null,this.selectedFeature=null,this.selectedFeatureIndex=null,this.spinnerEnabled=!0,this.title=null,this.updateLocationEnabled=null,this.view=null,this.viewModel=new xe,this.visible=null,this.visibleElements=Object(v.a)({},rr),this._addSelectedFeatureIndexHandle(),this.own([Object(c.d)(this,"viewModel.screenLocation",(()=>this._positionContainer())),Object(c.d)(this,["viewModel.active","dockEnabled"],(()=>this._toggleScreenLocationEnabled())),Object(c.d)(this,"viewModel.screenLocation",((e,t)=>{!!e!=!!t&&this.reposition()})),Object(c.d)(this,["viewModel.view.padding","viewModel.view.size","viewModel.active","viewModel.location","alignment"],(()=>this.reposition())),Object(c.d)(this,"spinnerEnabled",(e=>this._spinnerEnabledChange(e))),Object(c.d)(this,"viewModel.view.size",((e,t)=>this._updateDockEnabledForViewSize(e,t))),Object(c.d)(this,"viewModel.view",((e,t)=>this._viewChange(e,t))),Object(c.d)(this,"viewModel.view.ready",((e,t)=>this._viewReadyChange(e,t))),Object(c.d)(this,["viewModel.waitingForResult","viewModel.location"],(()=>{this._hideSpinner(),this._displaySpinnerThrottled()})),Object(c.d)(this,"selectedFeatureWidget.viewModel.title",(e=>this._setTitleFromFeatureWidget(e))),Object(c.d)(this,["selectedFeatureWidget.viewModel.content","selectedFeatureWidget.viewModel.waitingForContent"],(()=>this._setContentFromFeatureWidget())),Object(c.f)(this,"collapsed",(()=>{var e,t;"xsmall"===(null==(e=this.viewModel)||null==(t=e.view)?void 0:t.widthBreakpoint)&&this.viewModel.active&&this.collapseEnabled&&this.viewModel.centerAtLocation()})),Object(c.b)(this,"viewModel.allActions","change",(()=>this._watchActions())),Object(c.a)(this,"viewModel.allActions",(()=>this._watchActions())),Object(c.d)(this,"viewModel.featureViewModels",(()=>this._featureMenuViewportScrollTop()))])}destroy(){var e,t;this._destroySelectedFeatureWidget(),this._destroySpinner(),null==(e=this._handles)||e.destroy(),this._unobserveFeatureMenuObserver(),null==(t=this._featureMenuIntersectionObserver)||t.disconnect(),this._handles=null}get actionsMenuId(){return"".concat(this.id,"-actions-menu")}get actionsMenuButtonId(){return"".concat(this.id,"-actions-menu-button")}get featureMenuId(){return"".concat(this.id,"-feature-menu")}get titleId(){return"".concat(this.id,"-popup-title")}get contentId(){return"".concat(this.id,"-popup-content")}get hasContent(){var e,t,r,i,n;return!!(this.selectedFeatureWidget?(null==(e=this.selectedFeatureWidget)||null==(t=e.viewModel)?void 0:t.waitingForContent)||(null==(r=this.selectedFeatureWidget)||null==(i=r.viewModel)?void 0:i.content):null==(n=this.viewModel)?void 0:n.content)}get featureNavigationVisible(){return this.viewModel.active&&this.viewModel.featureCount>1&&this.visibleElements.featureNavigation}get collapsible(){return!!(this.collapseEnabled&&this.viewModel.title&&this.hasContent)}get featureMenuVisible(){return this.featureNavigationVisible&&this.featureMenuOpen}get contentCollapsed(){return this.collapsible&&!this.featureMenuVisible&&this.collapsed}get dividedActions(){return this._divideActions()}set actionsMenuOpen(e){this._set("actionsMenuOpen",!!e)}get actionsMenuOpen(){return!!this.viewModel.active&&this._get("actionsMenuOpen")}get currentAlignment(){return this._getCurrentAlignment()}get currentDockPosition(){return this._getCurrentDockPosition()}get dockOptions(){return this._get("dockOptions")||Qt}set dockOptions(e){var t=Object(v.a)({},Qt),r=this.get("viewModel.view.breakpoints"),i={};r&&(i.width=r.xsmall,i.height=r.xsmall);var n=Object(v.a)(Object(v.a)({},t),e),a=Object(v.a)(Object(v.a)({},t.breakpoint),i),{breakpoint:o}=n;!0===o?n.breakpoint=a:"object"==typeof o&&(n.breakpoint=Object(v.a)(Object(v.a)({},a),o)),this._set("dockOptions",n),this._setCurrentDockPosition(),this.reposition()}set featureNavigationEnabled(e){Object(O.c)(tr,"featureNavigationEnabled",{replacement:"visibleElements.featureNavigation",version:"4.15"}),this.visibleElements=Object(v.a)(Object(v.a)({},this.visibleElements),{},{featureNavigation:e})}get selectedFeatureWidget(){var{_feature:e,visibleElements:t}=this,{selectedFeatureViewModel:r}=this.viewModel,i=Object(v.a)(Object(v.a)({},t),{},{title:!1});return r?(e?(e.viewModel=r,e.visibleElements=i):this._feature=new I.a({viewModel:r,visibleElements:i}),this._feature):null}castVisibleElements(e){return Object(v.a)(Object(v.a)({},rr),e)}blur(){var{active:e}=this.viewModel;e||tr.warn("Popup can only be blurred when currently active."),this.visibleElements.closeButton?this._blurClose=!0:this._blurContainer=!0,this.scheduleRender()}clear(){this.viewModel.clear()}close(){this.visible=!1}fetchFeatures(e,t){return this.viewModel.fetchFeatures(e,t)}focus(){var{active:e}=this.viewModel;e||tr.warn("Popup can only be focused when currently active."),this.visibleElements.closeButton?this._focusClose=!0:this._focusContainer=!0,this.scheduleRender()}next(){return this.viewModel.next()}open(e){var t,r;this._handles.remove(Se);var i=!!e&&!!e.featureMenuOpen,n=!!e&&!!e.actionsMenuOpen,a={collapsed:!!e&&!!e.collapsed,actionsMenuOpen:n,featureMenuOpen:i};"xsmall"===(null==(t=this.viewModel)||null==(r=t.view)?void 0:r.widthBreakpoint)&&(a.collapsed=!0),this.set(a),this.viewModel.open(e),this._addSelectedFeatureIndexHandle()}previous(){return this.viewModel.previous()}reposition(){this.renderNow(),this._positionContainer(),this._setCurrentAlignment()}triggerAction(e){this.viewModel.triggerAction(e)}render(){var e,t,r,i,{actionsMenuOpen:n,dockEnabled:a,featureMenuVisible:o,dividedActions:s,currentAlignment:c,currentDockPosition:l}=this,{active:u}=this.viewModel,{menuActions:d}=s,h=u&&d.length>1&&n,p=u&&a,f=u&&!a,b=null==(e=this.selectedFeature)||null==(t=e.layer)?void 0:t.title,v=null==(r=this.selectedFeature)||null==(i=r.layer)?void 0:i.id,m={[et]:"top-center"===c,[tt]:"bottom-center"===c,[rt]:"top-left"===c,[it]:"bottom-left"===c,[nt]:"top-right"===c,[at]:"bottom-right"===c,[Je]:p,[We]:f,[Ze]:"top-left"===l,[Xe]:"top-center"===l,[Ye]:"top-right"===l,[Qe]:"bottom-left"===l,[Ke]:"bottom-center"===l,[$e]:"bottom-right"===l,[ot]:o,[st]:h};return Object(E.a)("div",{class:this.classes(ze,m),role:"presentation","data-layer-title":b,"data-layer-id":v,bind:this,afterCreate:this._positionContainer,afterUpdate:this._positionContainer},u?[this.renderMainContainer(),this.renderPointer()]:null)}renderLoadingIcon(){return Object(E.a)("span",{"aria-hidden":"true",class:this.classes(_t,De,Ve)})}renderNavigationLoading(){var{messagesCommon:e}=this;return this.viewModel.pendingPromisesCount?Object(E.a)("div",{key:$t("loading-container"),role:"presentation",class:qe,"aria-label":e.loading,title:e.loading},this.renderLoadingIcon()):null}renderPreviousIcon(){var e=Object(S.f)(),t={[Pe]:e,[Nt]:e,[Te]:!e,[Lt]:!e};return Object(E.a)("span",{"aria-hidden":"true",class:this.classes(_t,t)})}renderPreviousButton(){var{messages:e}=this;return Object(E.a)("div",{role:"button",tabIndex:0,bind:this,onclick:this._previous,onkeydown:this._previous,class:this.classes(yt,Rt),"aria-label":e.previous,title:e.previous},this.renderPreviousIcon())}renderNextIcon(){var e=Object(S.f)(),t={[Te]:e,[zt]:e,[Pe]:!e,[Vt]:!e};return Object(E.a)("span",{"aria-hidden":"true",class:this.classes(_t,t)})}renderNextButton(){var{messages:e}=this;return Object(E.a)("div",{role:"button",tabIndex:0,bind:this,onclick:this._next,onkeydown:this._next,class:this.classes(yt,Dt),"aria-label":e.next,title:e.next},this.renderNextIcon())}renderFeatureMenuButton(){var{featureMenuOpen:e,featureMenuId:t,messagesCommon:r}=this,{featureCount:i,selectedFeatureIndex:n}=this.viewModel;return Object(E.a)("div",{role:"button",tabIndex:0,bind:this,onclick:this._toggleFeatureMenu,onkeydown:this._toggleFeatureMenu,afterCreate:this._focusFeatureMenuButtonNode,afterUpdate:this._focusFeatureMenuButtonNode,class:this.classes(yt,Jt),"aria-haspopup":"true","aria-controls":t,"aria-expanded":e.toString(),"aria-label":r.menu,title:r.menu},this._getPageText(i,n))}renderNavigationButtons(){return this.featureNavigationVisible?[this.renderPreviousButton(),this.renderNavigationLoading()||this.renderFeatureMenuButton(),this.renderNextButton()]:null}renderDockIcon(){var{dockEnabled:e}=this,t=this._wouldDockTo(),r={[Fe]:e,[wt]:!e,[Ie]:!e&&("top-right"===t||"bottom-right"===t),[Ae]:!e&&("top-left"===t||"bottom-left"===t),[Ee]:!e&&"top-center"===t,[Ce]:!e&&"bottom-center"===t};return Object(E.a)("span",{"aria-hidden":"true",class:this.classes(r,_t)})}renderDockButton(){var e,t,r,{dockEnabled:i,messages:n}=this,a=null==(e=this.viewModel)||null==(t=e.view)?void 0:t.widthBreakpoint,o=i?n.undock:n.dock;return"xsmall"!==a&&null!=(r=this.dockOptions)&&r.buttonEnabled?Object(E.a)("div",{role:"button","aria-label":o,title:o,tabIndex:0,bind:this,onclick:this._toggleDockEnabled,onkeydown:this._toggleDockEnabled,afterCreate:this._focusDockButtonNode,afterUpdate:this._focusDockButtonNode,class:this.classes(yt,jt)},this.renderDockIcon()):null}renderTitle(){var{title:e}=this.viewModel,{titleId:t,collapsible:r,contentCollapsed:i,messagesCommon:n}=this,a={[ht]:r},o=Object(E.a)("h2",{class:pt,innerHTML:e}),s=r?Object(E.a)("button",{key:"".concat(e,"--collapsible"),id:t,title:i?n.expand:n.collapse,bind:this,enterAnimation:this._createFeatureUpdatedAnimation(),class:this.classes(dt,a),"aria-expanded":i?"false":"true",onclick:this._toggleCollapsed},o):Object(E.a)("div",{key:e,id:t,bind:this,enterAnimation:this._createFeatureUpdatedAnimation(),class:this.classes(dt,a)},o);return e?s:null}renderCloseIcon(){return Object(E.a)("span",{"aria-hidden":"true",class:this.classes(_t,ke)})}renderCloseButton(){var{visibleElements:e,messagesCommon:t}=this;return e.closeButton?Object(E.a)("div",{role:"button",tabIndex:0,bind:this,onclick:this._close,onkeydown:this._close,class:yt,"aria-label":t.close,title:t.close,afterCreate:this._closeButtonNodeUpdated,afterUpdate:this._closeButtonNodeUpdated},this.renderCloseIcon()):null}renderHeader(){return Object(E.a)("header",{class:lt},this.renderTitle(),Object(E.a)("div",{class:ut},this.renderDockButton(),this.renderCloseButton()))}renderContentContainer(){var{contentId:e,hasContent:t,contentCollapsed:r}=this,{content:i}=this.viewModel;return t&&!r?Object(E.a)("article",{key:i,enterAnimation:this._createFeatureUpdatedAnimation(),id:e,class:ft},this.renderContent()):null}renderActionsMenuButton(){var{actionsMenuId:e,actionsMenuButtonId:t,actionsMenuOpen:r,dividedActions:i,messagesCommon:n}=this,a=r?n.close:n.open,{menuActions:o}=i;return o.length?Object(E.a)("div",{key:$t("actions-menu-button"),class:this.classes(yt,St),role:"button",id:t,"aria-haspopup":"true","aria-controls":r?e:null,tabIndex:0,bind:this,onclick:this._toggleActionsMenu,onkeydown:this._toggleActionsMenu,afterCreate:this._focusActionsMenuButtonNode,afterUpdate:this._focusActionsMenuButtonNode,"aria-label":a,title:a},Object(E.a)("span",{"aria-hidden":"true",class:Ne})):null}renderMenuActions(){var{actionsMenuId:e,actionsMenuButtonId:t,actionsMenuOpen:r,dividedActions:i}=this,{menuActions:n,inlineActions:a}=i;return n.length&&r?Object(E.a)("ul",{id:e,role:"menu","aria-labelledby":t,key:$t("actions"),class:Mt,bind:this,onkeyup:this._handleActionMenuKeyup,afterCreate:this._actionsMenuNodeUpdated,afterUpdate:this._actionsMenuNodeUpdated},n.toArray().map(((e,t)=>this.renderAction({action:e,index:t+a.length,type:"menu-item"})))):null}renderInlineActions(){var{inlineActions:e}=this.dividedActions;return!!e.length&&e.toArray().map(((e,t)=>this.renderAction({action:e,index:t,type:"inline"})))}renderInlineActionsContainer(){var{inlineActions:e,menuActions:t}=this.dividedActions,r=!!e.length,i=!!t.length;return r||i?Object(E.a)("div",{key:"inline-actions-container","data-inline-actions":r.toString(),"data-menu-actions":i.toString(),class:xt},this.renderInlineActions(),this.renderActionsMenuButton(),this.renderMenuActions()):null}renderNavigation(){return this.featureNavigationVisible?Object(E.a)("section",{key:$t("navigation"),class:this.classes(Ft)},this.renderNavigationButtons()):null}renderFooter(){var{featureNavigationVisible:e,dividedActions:t}=this,{inlineActions:r,menuActions:i}=t,n=!!r.length,a=!!i.length,o={[vt]:e,[mt]:n,[gt]:a};return e||n?Object(E.a)("div",{key:$t("feature-buttons"),class:this.classes(bt,o)},this.renderInlineActionsContainer(),this.renderNavigation()):null}renderFeatureMenuContainer(){var{messages:e}=this,{featureViewModels:t,isLoadingFeature:r}=this.viewModel,i=Object(_.a)(e.selectedFeatures,{total:t.length});return Object(E.a)("section",{key:$t("menu"),class:Gt},Object(E.a)("h2",{class:Bt},i),Object(E.a)("nav",{bind:this,class:Ht,"data-node-ref":"_featureMenuViewportNode",afterCreate:S.i},this.renderFeatureMenu(),Object(E.a)("div",{class:Xt,bind:this,afterCreate:this._featureMenuIntersectionObserverCreated}),r?Object(E.a)("div",{class:Yt},this.renderLoadingIcon()):null))}renderPointer(){return this.dockEnabled?null:Object(E.a)("div",{key:$t("pointer"),class:It,role:"presentation"},Object(E.a)("div",{class:this.classes(kt,We)}))}renderMainContainer(){var{dockEnabled:e,currentAlignment:t,currentDockPosition:r,titleId:i,contentId:n,collapsible:a,hasContent:o,contentCollapsed:s,visibleElements:c}=this,{title:l}=this.viewModel,u="bottom-left"===t||"bottom-center"===t||"bottom-right"===t||"top-left"===r||"top-center"===r||"top-right"===r,d="top-left"===t||"top-center"===t||"top-right"===t||"bottom-left"===r||"bottom-center"===r||"bottom-right"===r,h={[We]:e,[He]:a,[Be]:s};return Object(E.a)("div",{class:this.classes(Ue,Ge,h),tabIndex:c.closeButton?null:-1,role:"dialog","aria-labelledby":l?i:"","aria-describedby":o&&!s?n:"",bind:this,onkeyup:this._handleMainKeyup,afterCreate:this._mainContainerNodeUpdated,afterUpdate:this._mainContainerNodeUpdated},u?this.renderFooter():null,u?this.renderFeatureMenuContainer():null,this.renderHeader(),this.renderContentContainer(),d?this.renderFooter():null,d?this.renderFeatureMenuContainer():null)}renderContent(){var e,t=null==(e=this.viewModel)?void 0:e.content;return t?"string"==typeof t?Object(E.a)("div",{key:t,innerHTML:t}):this.renderNodeContent(t):null}renderActionText(e){return Object(E.a)("span",{key:"text",class:Et},e)}renderActionIcon(e){var t=this._getActionClass(e),r=this._getActionImage(e),i={[De]:e.active,[Ve]:e.active,[_t]:!!t,[Pt]:!e.active&&!!r};return t&&(i[t]=!e.active),Object(E.a)("span",{key:"icon","aria-hidden":"true",class:this.classes(_t,i),styles:this._getIconStyles(r)})}renderAction(e){var{action:t,index:r,type:i}=e,n=this._getActionTitle(t),a={[Tt]:"toggle"!==t.type,[Ct]:"toggle"===t.type,[At]:"toggle"===t.type&&t.value,[Ot]:t.disabled},o=[this.renderActionIcon(t),this.renderActionText(n)],s="menu-item"===i?Object(E.a)("li",{key:t.uid,role:"menuitem",tabIndex:0,title:n,"aria-label":n,class:this.classes(yt,a),onkeyup:this._handleActionMenuItemKeyup,bind:this,"data-action-index":r,onclick:this._triggerAction,onkeydown:this._triggerAction},o):Object(E.a)("div",{key:t.uid,role:"button",tabIndex:0,title:n,"aria-label":n,class:this.classes(yt,a),onkeyup:this._handleActionMenuItemKeyup,bind:this,"data-action-index":r,onclick:this._triggerAction,onkeydown:this._triggerAction},o);return t.visible?s:null}renderFeatureMenuItem(e,t){var{messages:r,messagesCommon:i}=this,{selectedFeatureIndex:n,selectedFeatureViewModel:a}=this.viewModel,o=e===a,s={[Wt]:o},c=o?Object(E.a)("span",{key:$t("feature-menu-selected-feature-".concat(n)),title:r.selectedFeature,"aria-label":r.selectedFeature,class:Re}):null,l=Object(E.a)("span",{innerHTML:e.title||i.untitled});return Object(E.a)("li",{role:"menuitem",tabIndex:-1,key:$t("feature-menu-feature-".concat(n)),class:this.classes(s,qt),bind:this,"data-feature-index":t,onkeyup:this._handleFeatureMenuItemKeyup,onclick:this._selectFeature,onkeydown:this._selectFeature},Object(E.a)("span",{class:Zt},l,c))}renderFeatureMenu(){var{featureMenuId:e}=this,{featureViewModels:t}=this.viewModel;return t.length>1?Object(E.a)("ol",{class:Ut,id:e,bind:this,afterCreate:this._featureMenuNodeUpdated,afterUpdate:this._featureMenuNodeUpdated,onkeyup:this._handleFeatureMenuKeyup,role:"menu"},t.filter((e=>!!e.graphic)).map(((e,t)=>this.renderFeatureMenuItem(e,t)))):null}_getActionTitle(e){var{messages:t,selectedFeature:r,messagesCommon:i}=this,{id:n}=e,a=null==r?void 0:r.attributes,o="zoom-to-feature"===n?Object(_.a)(e.title,{messages:t}):"remove-selected-feature"===n?Object(_.a)(e.title,{messages:i}):"zoom-to-clustered-features"===n||"browse-clustered-features"===n?Object(_.a)(e.title,{messages:t}):e.title;return o&&a?Object(_.a)(o,a):o}_getActionClass(e){var{selectedFeature:t}=this,r=null==t?void 0:t.attributes,{className:i,image:n}=e,a=n||i?i:Le;return a&&r?Object(_.a)(a,r):a}_getActionImage(e){var{selectedFeature:t}=this,r=null==t?void 0:t.attributes,{image:i}=e;return i&&r?Object(_.a)(i,r):i}_createFeatureUpdatedAnimation(){return Object(S.b)("enter",ct)}_getInlineActionCount(){var{maxInlineActions:e,featureNavigationVisible:t}=this;if("number"!=typeof e)return null;var r=Math.round(e);return Math.max(t?r-1:r,0)}_watchActions(){var{allActions:e}=this.viewModel;this.notifyChange("dividedActions");var t="actions";this._handles.remove(t),e&&e.forEach((e=>{this._handles.add(Object(c.d)(e,["active","className","disabled","id","title","image","visible"],(()=>this.scheduleRender())),t)}))}_divideActions(){var{allActions:e}=this.viewModel,t=this._getInlineActionCount(),r=null===t,i=0===t;return{inlineActions:r?e.slice(0):i?new d.a:e.slice(0,t),menuActions:r?new d.a:i?e.slice(0):e.slice(t)}}_featureMenuOpenChanged(e){e?this._focusFirstFeature=!0:this._focusFeatureMenuButton=!0}_actionsMenuOpenChanged(e){e?this._focusFirstAction=!0:this._focusActionsMenuButton=!0}_setTitleFromFeatureWidget(e){var{selectedFeatureWidget:t}=this;t&&(this.viewModel.title=e||"")}_setContentFromFeatureWidget(){var{selectedFeatureWidget:e}=this;e&&(this.viewModel.content=e)}_unobserveFeatureMenuObserver(){this._featureMenuIntersectionObserverNode&&this._featureMenuIntersectionObserver.unobserve(this._featureMenuIntersectionObserverNode)}_featureMenuIntersectionObserverCreated(e){this._unobserveFeatureMenuObserver(),this._featureMenuIntersectionObserver.observe(e),this._featureMenuIntersectionObserverNode=e}_handleFeatureMenuKeyup(e){"Escape"===Object(j.a)(e)&&(e.stopPropagation(),this._focusFeatureMenuButton=!0,this.featureMenuOpen=!1,this.scheduleRender())}_handleActionMenuKeyup(e){"Escape"===Object(j.a)(e)&&(e.stopPropagation(),this._focusActionsMenuButton=!0,this.actionsMenuOpen=!1,this.scheduleRender())}_handleFeatureMenuItemKeyup(e){var t=Object(j.a)(e),{_featureMenuNode:r}=this,i=e.currentTarget["data-feature-index"];if(r){var n=r.querySelectorAll("li"),a=n.length;"ArrowUp"!==t?"ArrowDown"!==t?"Home"!==t?"End"!==t||(e.stopPropagation(),n[n.length-1].focus()):(e.stopPropagation(),n[0].focus()):(e.stopPropagation(),n[(i+1+a)%a].focus()):(e.stopPropagation(),n[(i-1+a)%a].focus())}}_handleActionMenuItemKeyup(e){var t=Object(j.a)(e),{_actionsMenuNode:r}=this,i=e.currentTarget["data-action-index"];if(r){var n=r.querySelectorAll("li"),a=n.length;"ArrowUp"!==t?"ArrowDown"!==t?"Home"!==t?"End"!==t||(e.stopPropagation(),n[n.length-1].focus()):(e.stopPropagation(),n[0].focus()):(e.stopPropagation(),n[(i+1+a)%a].focus()):(e.stopPropagation(),n[(i-1+a)%a].focus())}}_handleMainKeyup(e){var t=Object(j.a)(e);"ArrowLeft"===t&&(e.stopPropagation(),this.previous()),"ArrowRight"===t&&(e.stopPropagation(),this.next())}_spinnerEnabledChange(e){if(this._destroySpinner(),e){var t=this.get("viewModel.view");this._createSpinner(t)}}_hideSpinner(){var{_spinner:e}=this;e&&(e.location=null,e.hide())}_displaySpinner(){var{_spinner:e}=this;if(e){var{location:t,waitingForResult:r}=this.viewModel;r?e.show({location:t}):e.hide()}}_getIconStyles(e){return{"background-image":e?"url(".concat(e,")"):""}}_addSelectedFeatureIndexHandle(){var e=Object(c.d)(this,"viewModel.selectedFeatureIndex",((e,t)=>this._selectedFeatureIndexUpdated(e,t)));this._handles.add(e,Se)}_selectedFeatureIndexUpdated(e,t){var{featureCount:r}=this;r&&e!==t&&-1!==e&&(this.actionsMenuOpen=!1,this.featureMenuOpen=!1)}_destroySelectedFeatureWidget(){var{_feature:e}=this;e&&(e.viewModel=null,e&&!e.destroyed&&e.destroy()),this._feature=null}_isScreenLocationWithinView(e,t){return e.x>-1&&e.y>-1&&e.x<=t.width&&e.y<=t.height}_isOutsideView(e){var{popupHeight:t,popupWidth:r,screenLocation:i,side:n,view:a}=e;if(isNaN(r)||isNaN(t)||!a||!i)return!1;var o=a.padding;return"right"===n&&i.x+r/2>a.width-o.right||"left"===n&&i.x-r/2<o.left||"top"===n&&i.y-t<o.top||"bottom"===n&&i.y+t>a.height-o.bottom}_calculateAutoAlignment(e){if("auto"!==e)return e;var{_pointerOffsetInPx:t,_containerNode:r,_mainContainerNode:i,viewModel:n}=this,{screenLocation:a,view:o}=n;if(Object(m.j)(a)||!o||!r)return"top-center";if(!this._isScreenLocationWithinView(a,o))return this._get("currentAlignment")||"top-center";function s(e){return parseInt(e.replace(/[^-\d\.]/g,""),10)}var c=i?window.getComputedStyle(i,null):null,l=c?s(c.getPropertyValue("max-height")):0,u=c?s(c.getPropertyValue("height")):0,{height:d,width:h}=r.getBoundingClientRect(),p=h+t,f=Math.max(d,l,u)+t,b=this._isOutsideView({popupHeight:f,popupWidth:p,screenLocation:a,side:"right",view:o}),v=this._isOutsideView({popupHeight:f,popupWidth:p,screenLocation:a,side:"left",view:o}),g=this._isOutsideView({popupHeight:f,popupWidth:p,screenLocation:a,side:"top",view:o}),y=this._isOutsideView({popupHeight:f,popupWidth:p,screenLocation:a,side:"bottom",view:o});return v?g?"bottom-right":"top-right":b?g?"bottom-left":"top-left":g?y?"top-center":"bottom-center":"top-center"}_callCurrentAlignment(e){return"function"==typeof e?e.call(this):e}_getCurrentAlignment(){var{alignment:e,dockEnabled:t}=this;return t||!this.viewModel.active?null:this._calculatePositionResult(this._calculateAutoAlignment(this._callCurrentAlignment(e)))}_setCurrentAlignment(){this._set("currentAlignment",this._getCurrentAlignment())}_setCurrentDockPosition(){this._set("currentDockPosition",this._getCurrentDockPosition())}_calculatePositionResult(e){var t=["left","right"];return Object(S.f)()&&t.reverse(),e.replace(/leading/gi,t[0]).replace(/trailing/gi,t[1])}_callDockPosition(e){return"function"==typeof e?e.call(this):e}_getDockPosition(){var e;return this._calculatePositionResult(this._calculateAutoDockPosition(this._callDockPosition(null==(e=this.dockOptions)?void 0:e.position)))}_getCurrentDockPosition(){return this.dockEnabled&&this.viewModel.active?this._getDockPosition():null}_wouldDockTo(){return this.dockEnabled?null:this._getDockPosition()}_calculateAutoDockPosition(e){var t;if("auto"!==e)return e;var r=null==(t=this.viewModel)?void 0:t.view,i=Object(S.f)()?"top-left":"top-right";if(!r)return i;var n=r.padding||{left:0,right:0,top:0,bottom:0},a=r.width-n.left-n.right,{breakpoints:o}=r;return o&&a<=o.xsmall?"bottom-center":i}_positionContainer(e=this._containerNode){if(e&&(this._containerNode=e),e){var{screenLocation:t}=this.viewModel,{width:r}=e.getBoundingClientRect(),i=this._calculatePositionStyle(t,r);i&&(e.style.top=i.top,e.style.left=i.left,e.style.bottom=i.bottom,e.style.right=i.right)}}_calculateFullWidth(e){var{currentAlignment:t,_pointerOffsetInPx:r}=this;return"top-left"===t||"bottom-left"===t||"top-right"===t||"bottom-right"===t?e+r:e}_calculateAlignmentPosition(e,t,r,i){var{currentAlignment:n,_pointerOffsetInPx:a}=this,o=i/2,s=r.height-t,c=r.width-e,{padding:l}=this.view;return"bottom-center"===n?{top:t+a-l.top,left:e-o-l.left}:"top-left"===n?{bottom:s+a-l.bottom,right:c+a-l.right}:"bottom-left"===n?{top:t+a-l.top,right:c+a-l.right}:"top-right"===n?{bottom:s+a-l.bottom,left:e+a-l.left}:"bottom-right"===n?{top:t+a-l.top,left:e+a-l.left}:"top-center"===n?{bottom:s+a-l.bottom,left:e-o-l.left}:void 0}_calculatePositionStyle(e,t){var{dockEnabled:r,view:i}=this;if(i){if(r)return{left:"",top:"",right:"",bottom:""};if(!Object(m.j)(e)&&t){var n=this._calculateFullWidth(t),a=this._calculateAlignmentPosition(e.x,e.y,i,n);return a?{top:void 0!==a.top?"".concat(a.top,"px"):"auto",left:void 0!==a.left?"".concat(a.left,"px"):"auto",bottom:void 0!==a.bottom?"".concat(a.bottom,"px"):"auto",right:void 0!==a.right?"".concat(a.right,"px"):"auto"}:void 0}}}_viewChange(e,t){e&&t&&(this.close(),this.clear())}_viewReadyChange(e,t){if(e){var r=this.get("viewModel.view");this._wireUpView(r)}else t&&(this.close(),this.clear())}_wireUpView(e){if(this._destroySpinner(),e){var{spinnerEnabled:t}=this;t&&this._createSpinner(e),this._setDockEnabledForViewSize(this.dockOptions)}}_dockingThresholdCrossed(e,t,r){var[i,n]=e,[a,o]=t,{width:s,height:c}=r;return i<=s&&a>s||i>s&&a<=s||n<=c&&o>c||n>c&&o<=c}_updateDockEnabledForViewSize(e,t){if(e&&t){var r=this.get("viewModel.view.padding")||{left:0,right:0,top:0,bottom:0},i=r.left+r.right,n=r.top+r.bottom,a=[],o=[];a[0]=e[0]-i,a[1]=e[1]-n,o[0]=t[0]-i,o[1]=t[1]-n;var{dockOptions:s}=this,c=s.breakpoint;this._dockingThresholdCrossed(a,o,c)&&this._setDockEnabledForViewSize(s),this._setCurrentDockPosition()}}_focusDockButtonNode(e){this._focusDockButton&&(this._focusDockButton=!1,e.focus())}_closeButtonNodeUpdated(e){return this._focusClose?(this._focusClose=!1,void e.focus()):this._blurClose?(this._blurClose=!1,void e.blur()):void 0}_mainContainerNodeUpdated(e){return this._mainContainerNode=e,this._focusContainer?(this._focusContainer=!1,void e.focus()):this._blurContainer?(this._blurContainer=!1,void e.blur()):void 0}_featureMenuNodeUpdated(e){if(this._featureMenuNode=e,e&&this._focusFirstFeature){this._focusFirstFeature=!1;var t=e.querySelectorAll("li");t.length&&t[0].focus()}}_actionsMenuNodeUpdated(e){if(this._actionsMenuNode=e,e&&this._focusFirstAction){this._focusFirstAction=!1;var t=e.querySelectorAll("li");t.length&&t[0].focus()}}_focusFeatureMenuButtonNode(e){this._focusFeatureMenuButton&&(this._focusFeatureMenuButton=!1,e.focus())}_focusActionsMenuButtonNode(e){this._focusActionsMenuButton&&(this._focusActionsMenuButton=!1,e.focus())}_featureMenuViewportScrollTop(){this._featureMenuViewportNode&&(this._featureMenuViewportNode.scrollTop=0)}_toggleScreenLocationEnabled(){var{dockEnabled:e,viewModel:t}=this;if(t){var r=t.active&&!e;t.screenLocationEnabled=r}}_shouldDockAtCurrentViewSize(e){var t,r,i=e.breakpoint,n=null==(t=this.viewModel)||null==(r=t.view)?void 0:r.ui;if(!n)return!1;var{width:a,height:o}=n;if(isNaN(a)||isNaN(o))return!1;var s=i.hasOwnProperty("width")&&a<=i.width,c=i.hasOwnProperty("height")&&o<=i.height;return s||c}_setDockEnabledForViewSize(e){e.breakpoint&&(this.dockEnabled=this._shouldDockAtCurrentViewSize(e))}_getPageText(e,t){return this.featureNavigationVisible?Object(_.a)(this.messages.pageText,{index:t+1,total:e}):null}_destroySpinner(){var{_spinner:e,view:t}=this;e&&(t&&t.ui&&t.ui.remove(this._spinner,Me),e.destroy(),this._spinner=null)}_createSpinner(e){e&&(this._spinner=new q({view:e}),e.ui.add(this._spinner,{key:Me,position:"manual"}))}_toggleCollapsed(){this.collapsed=!this.collapsed}_close(){this.close(),this.view&&this.view.focus()}_toggleDockEnabled(){this.dockEnabled=!this.dockEnabled,this._focusDockButton=!0,this.scheduleRender()}_toggleFeatureMenu(){var e=!this.featureMenuOpen;this._featureMenuOpenChanged(e),this.actionsMenuOpen=!1,this.featureMenuOpen=e}_toggleActionsMenu(){var e=!this.actionsMenuOpen;this._actionsMenuOpenChanged(e),this.featureMenuOpen=!1,this.actionsMenuOpen=e}_triggerAction(e){var t=e.currentTarget["data-action-index"],r=this.viewModel.allActions.getItemAt(t);r&&"toggle"===r.type&&(r.value=!r.value),this.actionsMenuOpen=!1,this.viewModel.triggerAction(t)}_selectFeature(e){var t=e.currentTarget["data-feature-index"];isNaN(t)||(this.viewModel.selectedFeatureIndex=t),this.featureMenuOpen=!1,this._focusFeatureMenuButton=!0,this.scheduleRender()}_next(){this.next()}_previous(){this.previous()}};Object(i.a)([Object(a.b)({readOnly:!0})],ir.prototype,"actionsMenuId",null),Object(i.a)([Object(a.b)({readOnly:!0})],ir.prototype,"actionsMenuButtonId",null),Object(i.a)([Object(a.b)({readOnly:!0})],ir.prototype,"featureMenuId",null),Object(i.a)([Object(a.b)({readOnly:!0})],ir.prototype,"titleId",null),Object(i.a)([Object(a.b)({readOnly:!0})],ir.prototype,"contentId",null),Object(i.a)([Object(a.b)({readOnly:!0})],ir.prototype,"hasContent",null),Object(i.a)([Object(a.b)({readOnly:!0})],ir.prototype,"featureNavigationVisible",null),Object(i.a)([Object(a.b)({readOnly:!0})],ir.prototype,"collapsible",null),Object(i.a)([Object(a.b)({readOnly:!0})],ir.prototype,"featureMenuVisible",null),Object(i.a)([Object(a.b)({readOnly:!0})],ir.prototype,"contentCollapsed",null),Object(i.a)([Object(a.b)({readOnly:!0})],ir.prototype,"dividedActions",null),Object(i.a)([Object(g.a)("viewModel.actions")],ir.prototype,"actions",void 0),Object(i.a)([Object(a.b)()],ir.prototype,"actionsMenuOpen",null),Object(i.a)([Object(a.b)()],ir.prototype,"alignment",void 0),Object(i.a)([Object(g.a)("viewModel.autoCloseEnabled")],ir.prototype,"autoCloseEnabled",void 0),Object(i.a)([Object(g.a)("viewModel.autoOpenEnabled")],ir.prototype,"autoOpenEnabled",void 0),Object(i.a)([Object(g.a)("viewModel.defaultPopupTemplateEnabled")],ir.prototype,"defaultPopupTemplateEnabled",void 0),Object(i.a)([Object(g.a)("viewModel.content")],ir.prototype,"content",void 0),Object(i.a)([Object(a.b)()],ir.prototype,"collapsed",void 0),Object(i.a)([Object(a.b)()],ir.prototype,"collapseEnabled",void 0),Object(i.a)([Object(a.b)({readOnly:!0})],ir.prototype,"currentAlignment",null),Object(i.a)([Object(a.b)({readOnly:!0})],ir.prototype,"currentDockPosition",null),Object(i.a)([Object(a.b)()],ir.prototype,"dockOptions",null),Object(i.a)([Object(a.b)()],ir.prototype,"dockEnabled",void 0),Object(i.a)([Object(g.a)("viewModel.featureCount")],ir.prototype,"featureCount",void 0),Object(i.a)([Object(a.b)()],ir.prototype,"featureMenuOpen",void 0),Object(i.a)([Object(g.a)("viewModel.features")],ir.prototype,"features",void 0),Object(i.a)([Object(a.b)()],ir.prototype,"featureNavigationEnabled",null),Object(i.a)([Object(g.a)("viewModel.goToOverride")],ir.prototype,"goToOverride",void 0),Object(i.a)([Object(g.a)("viewModel.highlightEnabled")],ir.prototype,"highlightEnabled",void 0),Object(i.a)([Object(g.a)("viewModel.location")],ir.prototype,"location",void 0),Object(i.a)([Object(a.b)({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],ir.prototype,"label",void 0),Object(i.a)([Object(a.b)()],ir.prototype,"maxInlineActions",void 0),Object(i.a)([Object(a.b)(),Object(T.a)("esri/widgets/Popup/t9n/Popup")],ir.prototype,"messages",void 0),Object(i.a)([Object(a.b)(),Object(T.a)("esri/t9n/common")],ir.prototype,"messagesCommon",void 0),Object(i.a)([Object(g.a)("viewModel.promises")],ir.prototype,"promises",void 0),Object(i.a)([Object(g.a)("viewModel.selectedFeature")],ir.prototype,"selectedFeature",void 0),Object(i.a)([Object(g.a)("viewModel.selectedFeatureIndex")],ir.prototype,"selectedFeatureIndex",void 0),Object(i.a)([Object(a.b)({readOnly:!0})],ir.prototype,"selectedFeatureWidget",null),Object(i.a)([Object(a.b)()],ir.prototype,"spinnerEnabled",void 0),Object(i.a)([Object(g.a)("viewModel.title")],ir.prototype,"title",void 0),Object(i.a)([Object(g.a)("viewModel.updateLocationEnabled")],ir.prototype,"updateLocationEnabled",void 0),Object(i.a)([Object(g.a)("viewModel.view")],ir.prototype,"view",void 0),Object(i.a)([Object(a.b)({type:xe}),Object(P.a)(["triggerAction","trigger-action"])],ir.prototype,"viewModel",void 0),Object(i.a)([Object(g.a)("viewModel.visible")],ir.prototype,"visible",void 0),Object(i.a)([Object(a.b)()],ir.prototype,"visibleElements",void 0),Object(i.a)([Object(y.a)("visibleElements")],ir.prototype,"castVisibleElements",null),Object(i.a)([Object(M.a)()],ir.prototype,"_close",null),Object(i.a)([Object(M.a)()],ir.prototype,"_toggleDockEnabled",null),Object(i.a)([Object(M.a)()],ir.prototype,"_toggleFeatureMenu",null),Object(i.a)([Object(M.a)()],ir.prototype,"_toggleActionsMenu",null),Object(i.a)([Object(M.a)()],ir.prototype,"_triggerAction",null),Object(i.a)([Object(M.a)()],ir.prototype,"_selectFeature",null),Object(i.a)([Object(M.a)()],ir.prototype,"_next",null),Object(i.a)([Object(M.a)()],ir.prototype,"_previous",null);var nr=ir=Object(i.a)([Object(o.a)(er)],ir),ar=[0,0];function or(e){e&&(Object(l.b)(e),e.parentNode&&e.parentNode.removeChild(e))}var sr=750,cr=e=>{var t=class extends e{constructor(...e){super(...e),this._freqInfo={freq:16,time:sr},this._overlayRenderTaskHandle=null,this.height=0,this.position=null,this.resizing=!1,this.root=null,this.surface=null,this.suspended=!0,this.ui=null,this.userContent=null,this.width=0,this.widthBreakpoint=null,this.handles.add([this.watch("cursor",(e=>{var t=this.surface;t&&t.setAttribute("data-cursor",e)})),this.watch("interacting",(e=>{var t=this.surface;t&&t.setAttribute("data-interacting",e.toString())}))])}initialize(){this.handles.add(this.watch("ui",((e,t)=>this._handleUIChange(e,t)))),this._wireUI(this.ui),this.handles.add([this.on("focus",(()=>this.notifyChange("focused"))),this.on("blur",(()=>this.notifyChange("focused")))])}destroy(){this.destroyed||(this.ui&&(this.ui.destroy(),this.ui=null),this.popup&&!this.popup.destroyed&&this.popup.destroy(),this.container=null)}set container(e){var t=this._get("container");if(t!==e){var r="dom-size";if(this.handles.remove(r),this._stopMeasuring(),t&&(t.classList.remove("esri-view"),this._overlayRenderTaskHandle&&(this._overlayRenderTaskHandle.remove(),this._overlayRenderTaskHandle=null),this.overlay.destroy(),this._set("overlay",null),or(this.root),this._set("root",null),Object(l.e)(this.userContent,t),or(this.userContent),this._set("userContent",null)),e){e.classList.add("esri-view");var i=document.createElement("div");i.className="esri-view-user-storage",Object(l.e)(e,i),e.appendChild(i),this._set("userContent",i);var n=document.createElement("div");n.className="esri-view-root",e.insertBefore(n,e.firstChild),this._set("root",n);var a=document.createElement("div");a.className="esri-view-surface",a.setAttribute("role","application"),a.tabIndex=0,n.appendChild(a),this._set("surface",a);var o=new b;n.appendChild(o.surface),this._set("overlay",o),o.watch("needsRender",(e=>{e&&!this._overlayRenderTaskHandle?this._overlayRenderTaskHandle=Object(s.a)({render:()=>{this.overlay.render()}}):this._overlayRenderTaskHandle&&(this._overlayRenderTaskHandle.remove(),this._overlayRenderTaskHandle=null)})),this.forceDOMReadyCycle(),this.handles.add(Object(c.a)(this,"size",(e=>{var[t,r]=e,i="esri-view-surface--inset-outline";t>=document.body.clientWidth||r>=document.body.clientHeight?a.classList.add(i):a.classList.remove(i)})),r),this._set("container",e),this._startMeasuring()}else this._set("width",0),this._set("height",0),this._set("position",null),this._set("suspended",!0),this._set("surface",null),this._set("container",null)}}get focused(){var e=document.activeElement===this.surface;return document.hasFocus()&&e}get popup(){return this._get("popup")||new nr({view:this})}set popup(e){var t=this._get("popup");t&&t!==e&&t.destroy(),this._set("popup",e)}get size(){return[this.width,this.height]}blur(){this.surface&&this.surface.blur()}focus(){this.surface&&this.surface.focus()}pageToContainer(e,t,r){var i=this.position;return e-=i[0],t-=i[1],r?(r[0]=e,r[1]=t):r=[e,t],r}containerToPage(e,t,r){var i=this.position;return e+=i[0],t+=i[1],r?(r[0]=e,r[1]=t):r=[e,t],r}_handleUIChange(e,t){t&&(this.handles.remove("ui"),t.destroy()),e&&this._wireUI(e),this._set("ui",e)}_wireUI(e){this.handles.remove("ui"),e&&(e.view=this,this.handles.add([Object(c.a)(this,"root",(t=>{e.container=t?function(e){var t=document.createElement("div");return e.appendChild(t),t}(t):null})),Object(c.a)(this,"popup",((t,r)=>{var i="popup";r&&e.remove(r,i),t&&(t.view=e.view,e.add(t,{key:i,position:"manual"}))}))],"ui"))}_stopMeasuring(){this.handles.remove("measuring"),this._get("resizing")&&this._set("resizing",!1)}_startMeasuring(){var e=this._freqInfo;e.freq=16,e.time=sr,this.handles.add([(()=>{var t=()=>{e.freq=16,e.time=sr};return window.addEventListener("resize",t),{remove(){window.removeEventListener("resize",t)}}})(),Object(s.a)({prepare:e=>{var t=this._measure(),r=this._freqInfo;if(r.time+=e.deltaTime,t&&(r.freq=16,this._get("resizing")||this._set("resizing",!0)),!(r.time<r.freq)){r.time=0;var i=this._position();r.freq=i||t?16:Math.min(sr,2*r.freq),!t&&r.freq>=512&&this._get("resizing")&&this._set("resizing",!1)}}})],"measuring"),this._measure(),this._position()}_measure(){var e=this.container,t=e?e.clientWidth:0,r=e?e.clientHeight:0;if(0===t||0===r)return this.suspended||this._set("suspended",!0),!1;var i=this.width,n=this.height;return t===i&&r===n?(this.suspended&&this._set("suspended",!1),!1):(this._set("width",t),this._set("height",r),this.suspended&&this._set("suspended",!1),this.emit("resize",{oldWidth:i,oldHeight:n,width:t,height:r}),!0)}_position(){var e=this.container,t=this.position,r=function(e){var t=(e.ownerDocument||window.document).defaultView,r=e.getBoundingClientRect();return ar[0]=r.left+t.pageXOffset,ar[1]=r.top+t.pageYOffset,ar}(e);return(!t||r[0]!==t[0]||r[1]!==t[1])&&(this._set("position",[r[0],r[1]]),!0)}forceDOMReadyCycle(){}};return Object(i.a)([Object(a.b)({value:null,cast:e=>Object(l.a)(e)})],t.prototype,"container",null),Object(i.a)([Object(a.b)({readOnly:!0})],t.prototype,"focused",null),Object(i.a)([Object(a.b)({readOnly:!0})],t.prototype,"height",void 0),Object(i.a)([Object(a.b)({type:nr})],t.prototype,"popup",null),Object(i.a)([Object(a.b)({type:b})],t.prototype,"overlay",void 0),Object(i.a)([Object(a.b)({readOnly:!0})],t.prototype,"position",void 0),Object(i.a)([Object(a.b)({readOnly:!0})],t.prototype,"resizing",void 0),Object(i.a)([Object(a.b)({readOnly:!0})],t.prototype,"root",void 0),Object(i.a)([Object(a.b)({value:null,readOnly:!0})],t.prototype,"size",null),Object(i.a)([Object(a.b)({readOnly:!0})],t.prototype,"surface",void 0),Object(i.a)([Object(a.b)({readOnly:!0})],t.prototype,"suspended",void 0),Object(i.a)([Object(a.b)()],t.prototype,"ui",void 0),Object(i.a)([Object(a.b)({readOnly:!0})],t.prototype,"userContent",void 0),Object(i.a)([Object(a.b)({readOnly:!0})],t.prototype,"width",void 0),Object(i.a)([Object(a.b)()],t.prototype,"widthBreakpoint",void 0),t=Object(i.a)([Object(o.a)("esri.views.DOMContainer")],t)};function lr(e){return e&&"focus"in e}},function(e,t,r){"use strict";r.r(t);var i=r(82),n=(r(80),r(81),r(88)),a=r(85),o=r(84),s=r(93),c=(r(83),r(86),r(87),r(90)),l=r(456),u=class extends c.a{constructor(e){super(e),this.access=null,this.created=null,this.description=null,this.id=null,this.isInvitationOnly=!1,this.modified=null,this.owner=null,this.portal=null,this.snippet=null,this.sortField=null,this.sortOrder=null,this.tags=null,this.title=null}get thumbnailUrl(){var e=this.url,t=this.thumbnail;return e&&t?this.portal._normalizeUrl("".concat(e,"/info/").concat(t,"?f=json")):null}get url(){var e=this.get("portal.restUrl");return e?e+"/community/groups/"+this.id:null}fetchCategorySchema(e){return this.portal._request(this.url+"/categorySchema",e).then((t=>{var r=t.categorySchema||[];return r.some((e=>"contentCategorySetsGroupQuery.LivingAtlas"===e.source))?this._fetchCategorySchemaSet("LivingAtlas",e):r}))}fetchMembers(e){return this.portal._request(this.url+"/users",e)}getThumbnailUrl(e){var t=this.thumbnailUrl;return t&&e&&(t+="&w=".concat(e)),t}toJSON(){throw new s.a("internal:not-yet-implemented","PortalGroup.toJSON is not yet implemented")}queryItems(e,t){var r=Object(n.m)(l.a,e);return parseFloat(this.portal.currentVersion)>5?(r=r||new l.a,this.portal._queryPortal("/content/groups/".concat(this.id,"/search"),r,"PortalItem",t)):((r=r?r.clone():new l.a).query="group:"+this.id+(r.query?" "+r.query:""),this.portal.queryItems(r,t))}_fetchCategorySchemaSet(e,t){return this.portal._fetchSelf(this.portal.authMode,!0,t).then((e=>{var r=e.contentCategorySetsGroupQuery;if(r){var i=new l.a;return i.disableExtraQuery=!0,i.num=1,i.query=r,this.portal.queryGroups(i,t)}throw new s.a("portal-group:fetchCategorySchema","contentCategorySetsGroupQuery value not found")})).then((r=>{if(r.total){var i=r.results[0],n=new l.a;return n.num=1,n.query='typekeywords:"'.concat(e,'"'),i.queryItems(n,t)}throw new s.a("portal-group:fetchCategorySchema","contentCategorySetsGroupQuery group not found")})).then((e=>e.total?e.results[0].fetchData("json",t).then((e=>{var t=e&&e.categorySchema;return t&&t.length?t:[]})):[]))}};Object(i.a)([Object(a.b)()],u.prototype,"access",void 0),Object(i.a)([Object(a.b)({type:Date})],u.prototype,"created",void 0),Object(i.a)([Object(a.b)()],u.prototype,"description",void 0),Object(i.a)([Object(a.b)()],u.prototype,"id",void 0),Object(i.a)([Object(a.b)()],u.prototype,"isInvitationOnly",void 0),Object(i.a)([Object(a.b)({type:Date})],u.prototype,"modified",void 0),Object(i.a)([Object(a.b)()],u.prototype,"owner",void 0),Object(i.a)([Object(a.b)()],u.prototype,"portal",void 0),Object(i.a)([Object(a.b)()],u.prototype,"snippet",void 0),Object(i.a)([Object(a.b)()],u.prototype,"sortField",void 0),Object(i.a)([Object(a.b)()],u.prototype,"sortOrder",void 0),Object(i.a)([Object(a.b)()],u.prototype,"tags",void 0),Object(i.a)([Object(a.b)()],u.prototype,"thumbnail",void 0),Object(i.a)([Object(a.b)({readOnly:!0})],u.prototype,"thumbnailUrl",null),Object(i.a)([Object(a.b)()],u.prototype,"title",void 0),Object(i.a)([Object(a.b)({readOnly:!0})],u.prototype,"url",null);var d=u=Object(i.a)([Object(o.a)("esri.portal.PortalGroup")],u);t.default=d},,,function(e,t,r){"use strict";r.d(t,"a",(function(){return i})),r.d(t,"b",(function(){return a})),r.d(t,"c",(function(){return n})),r.d(t,"d",(function(){return o}));r(80);function i(e){switch(e){case"u8":return 1;case"u16":return 2;case"u32":return 4;case"i8":return 1;case"i16":return 2;case"i32":case"f32":return 4;case"f64":return 8;default:return}}function n(e){switch(e){case"u8":case"u16":case"u32":return!1;case"i8":case"i16":case"i32":case"f32":case"f64":return!0;default:return}}function a(e){switch(e){case"u8":case"u16":case"u32":case"i8":case"i16":case"i32":return!0;case"f32":case"f64":return!1;default:return}}function o(e){switch(e){case"u8":return 255;case"u16":return 65535;case"u32":return 4294967295;case"i8":return 127;case"i16":return 32767;case"i32":return 2147483647;case"f32":return 3402823e32;case"f64":return 179769e303;default:return}}},function(e,t,r){"use strict";function i(e,t,r){for(var i=0;i<r;++i)t[2*i]=e[i],t[2*i+1]=e[i]-t[2*i]}function n(e,t,r,n){for(var s=0;s<n;++s)a[0]=e[s],i(a,o,1),t[s]=o[0],r[s]=o[1]}r.d(t,"a",(function(){return i})),r.d(t,"b",(function(){return n}));var a=new Float64Array(1),o=new Float32Array(2)},function(e,t,r){"use strict";function i(){var e=new Float32Array(16);return e[0]=1,e[5]=1,e[10]=1,e[15]=1,e}r.d(t,"a",(function(){return i}));var n=i();Object.freeze({__proto__:null,create:i,clone:function(e){var t=new Float32Array(16);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t},fromValues:function(e,t,r,i,n,a,o,s,c,l,u,d,h,p,f,b){var v=new Float32Array(16);return v[0]=e,v[1]=t,v[2]=r,v[3]=i,v[4]=n,v[5]=a,v[6]=o,v[7]=s,v[8]=c,v[9]=l,v[10]=u,v[11]=d,v[12]=h,v[13]=p,v[14]=f,v[15]=b,v},createView:function(e,t){return new Float32Array(e,t,16)},IDENTITY:n})},function(e,t,r){"use strict";r.d(t,"a",(function(){return o}));var i,n=r(120),a=r(119);function o(e){e.attributes.add("position","vec2"),e.varyings.add("uv","vec2"),e.vertex.code.add(Object(a.a)(i||(i=Object(n.a)(["\n    void main(void) {\n      gl_Position = vec4(position, 0.0, 1.0);\n      uv = position * 0.5 + vec2(0.5);\n    }\n  "]))))}},function(e,t,r){"use strict";r.d(t,"a",(function(){return _})),r.d(t,"b",(function(){return U})),r.d(t,"c",(function(){return V})),r.d(t,"d",(function(){return z}));var i,n,a,o,s,c,l,u,d,h,p,f,b,v,m,g,y,O,j,_,w=r(120),x=r(202),S=r(200),M=r(135),T=r(119),P=r(254),E=r(358),C=r(718),A=r(249),I=r(487),k=r(628),F=r(417),R=r(629),D=r(322),L=r(426),N=r(333);function V(e){var t=new P.a,r=e.signedDistanceFieldEnabled;if(t.include(C.a),t.include(k.a,e),t.include(A.a,e),6===e.output)return t.include(R.b,e),t;t.include(I.a),t.fragment.include(F.a),t.fragment.include(E.a),t.include(L.a,e),t.varyings.add("vcolor","vec4"),t.varyings.add("vtc","vec2"),t.varyings.add("vsize","vec2"),e.binaryHighlightOcclusionEnabled&&t.varyings.add("voccluded","float"),t.vertex.uniforms.add("screenOffset","vec2").add("anchorPos","vec2").add("textureCoordinateScaleFactor","vec2").add("materialColor","vec4"),r&&t.vertex.uniforms.add("outlineColor","vec4"),e.screenSizePerspectiveEnabled&&t.vertex.uniforms.add("screenSizePerspective","vec4"),(e.debugDrawBorder||e.binaryHighlightOcclusionEnabled)&&t.varyings.add("debugBorderCoords","vec4"),t.attributes.add("uv0","vec2"),t.attributes.add("color","vec4"),t.attributes.add("size","vec2"),t.attributes.add("auxpos2","vec4"),t.vertex.code.add(Object(T.a)(i||(i=Object(w.a)(["\n    void main(void) {\n      ProjectHUDAux projectAux;\n      vec4 posProj = projectPositionHUD(projectAux);\n\n      if (rejectBySlice(projectAux.posModel)) {\n        // Project outside of clip plane\n        gl_Position = vec4(1e038, 1e038, 1e038, 1.0);\n        return;\n      }\n      vec2 inputSize;\n      ","\n\n      ","\n\n      vec2 combinedSize = inputSize * pixelRatio;\n      vec4 quadOffset = vec4(0.0);\n\n      ","\n\n      ","\n    "])),e.screenSizePerspectiveEnabled?Object(T.a)(n||(n=Object(w.a)(["\n      inputSize = screenSizePerspectiveScaleVec2(size, projectAux.absCosAngle, projectAux.distanceToCamera, screenSizePerspective);\n      vec2 screenOffsetScaled = screenSizePerspectiveScaleVec2(screenOffset, projectAux.absCosAngle, projectAux.distanceToCamera, screenSizePerspectiveAlignment);\n         "]))):Object(T.a)(a||(a=Object(w.a)(["\n      inputSize = size;\n      vec2 screenOffsetScaled = screenOffset;"]))),e.vvSize?"inputSize *= vvScale(auxpos2).xx;":"",e.occlusionTestEnabled||e.binaryHighlightOcclusionEnabled?"bool visible = testVisibilityHUD(posProj);":"",e.binaryHighlightOcclusionEnabled?"voccluded = visible ? 0.0 : 1.0;":""));var _=Object(T.a)(o||(o=Object(w.a)(["\n      vec2 uv01 = floor(uv0);\n      vec2 uv = uv0 - uv01;\n      quadOffset.xy = ((uv01 - anchorPos) * 2.0 * combinedSize + screenOffsetScaled) / viewport.zw * posProj.w;\n  "]))),x=e.pixelSnappingEnabled?r?Object(T.a)(s||(s=Object(w.a)(["\n  posProj = alignToPixelOrigin(posProj, viewport.zw) + quadOffset;"]))):Object(T.a)(c||(c=Object(w.a)(["\n  posProj += quadOffset;\n  if (inputSize.x == size.x) {\n    posProj = alignToPixelOrigin(posProj, viewport.zw);\n  }"]))):Object(T.a)(l||(l=Object(w.a)(["posProj += quadOffset;"])));t.vertex.code.add(Object(T.a)(u||(u=Object(w.a)(["\n      ","\n      ","\n      ","\n\n      bool alphaDiscard = vcolor.a < ",";\n      ",'\n      if (alphaDiscard) {\n        // "early discard" if both symbol color (= fill) and outline color (if applicable) are transparent\n        gl_Position = vec4(1e38, 1e38, 1e38, 1.0);\n        return;\n      } else {\n        ',"\n        gl_Position = posProj;\n      }\n\n      vtc = uv * textureCoordinateScaleFactor;\n\n      ","\n      vsize = inputSize;\n      ","\n    }\n    "])),e.occlusionTestEnabled?"if (visible) {":"",_,e.vvColor?"vcolor = vvGetColor(auxpos2, vvColorValues, vvColorColors) * materialColor;":"vcolor = color / 255.0 * materialColor;",T.a.float(N.c),r?"alphaDiscard = alphaDiscard && outlineColor.a < ".concat(T.a.float(N.c),";"):"",x,e.debugDrawBorder?"debugBorderCoords = vec4(uv01, 1.5 / combinedSize);":"",e.occlusionTestEnabled?Object(T.a)(d||(d=Object(w.a)(["} else { vtc = vec2(0.0);\n        ",""])),e.debugDrawBorder?"debugBorderCoords = vec4(0.5, 0.5, 1.5 / combinedSize);}":"}"):"")),t.fragment.uniforms.add("tex","sampler2D"),r&&(t.fragment.uniforms.add("outlineColor","vec4"),t.fragment.uniforms.add("outlineSize","float"));var S=e.debugDrawBorder?Object(T.a)(h||(h=Object(w.a)(["(isBorder > 0.0 ? 0.0 : ",")"])),T.a.float(N.b)):T.a.float(N.b),M=Object(T.a)(p||(p=Object(w.a)(["\n    ","\n\n    ","\n\n    ","\n  "])),e.debugDrawBorder?Object(T.a)(f||(f=Object(w.a)(["\n      float isBorder = float(any(lessThan(debugBorderCoords.xy, debugBorderCoords.zw)) || any(greaterThan(debugBorderCoords.xy, 1.0 - debugBorderCoords.zw)));"]))):"",r?Object(T.a)(b||(b=Object(w.a)(["\n      vec4 fillPixelColor = vcolor;\n\n      // Attempt to sample texel centers to avoid that thin cross outlines\n      // disappear with large symbol sizes.\n      // see: https://devtopia.esri.com/WebGIS/arcgis-js-api/issues/7058#issuecomment-603041\n      const float txSize = 128.0;\n      const float texelSize = 1.0 / txSize;\n      // Calculate how much we have to add/subtract to/from each texel to reach the size of an onscreen pixel\n      vec2 scaleFactor = (vsize - txSize) * texelSize;\n      vec2 samplePos = vtc + (vec2(1.0, -1.0) * texelSize) * scaleFactor;\n\n      // Get distance and map it into [-0.5, 0.5]\n      float d = rgba2float(texture2D(tex, samplePos)) - 0.5;\n\n      // Distance in output units (i.e. pixels)\n      float dist = d * vsize.x;\n\n      // Create smooth transition from the icon into its outline\n      float fillAlphaFactor = clamp(0.5 - dist, 0.0, 1.0);\n      fillPixelColor.a *= fillAlphaFactor;\n\n      if (outlineSize > 0.25) {\n        vec4 outlinePixelColor = outlineColor;\n        float clampedOutlineSize = min(outlineSize, 0.5*vsize.x);\n\n        // Create smooth transition around outline\n        float outlineAlphaFactor = clamp(0.5 - (abs(dist) - 0.5*clampedOutlineSize), 0.0, 1.0);\n        outlinePixelColor.a *= outlineAlphaFactor;\n\n        if (\n          outlineAlphaFactor + fillAlphaFactor < "," ||\n          fillPixelColor.a + outlinePixelColor.a < ","\n        ) {\n          discard;\n        }\n\n        // perform un-premultiplied over operator (see https://en.wikipedia.org/wiki/Alpha_compositing#Description)\n        float compositeAlpha = outlinePixelColor.a + fillPixelColor.a * (1.0 - outlinePixelColor.a);\n        vec3 compositeColor = vec3(outlinePixelColor) * outlinePixelColor.a +\n          vec3(fillPixelColor) * fillPixelColor.a * (1.0 - outlinePixelColor.a);\n\n        gl_FragColor = vec4(compositeColor, compositeAlpha);\n      } else {\n        if (fillAlphaFactor < ",") {\n          discard;\n        }\n\n        gl_FragColor = premultiplyAlpha(fillPixelColor);\n      }\n\n      // visualize SDF:\n      // gl_FragColor = vec4(clamp(-dist/vsize.x*2.0, 0.0, 1.0), clamp(dist/vsize.x*2.0, 0.0, 1.0), 0.0, 1.0);\n      "])),S,T.a.float(N.c),S):Object(T.a)(v||(v=Object(w.a)(["\n          vec4 texColor = texture2D(tex, vtc, -0.5);\n          if (texColor.a < ",") {\n            discard;\n          }\n          gl_FragColor = texColor * premultiplyAlpha(vcolor);\n          "])),S),e.debugDrawBorder?Object(T.a)(m||(m=Object(w.a)(["gl_FragColor = mix(gl_FragColor, vec4(1.0, 0.0, 1.0, 1.0), isBorder);"]))):"");return 7===e.output&&t.fragment.code.add(Object(T.a)(g||(g=Object(w.a)(["\n      void main() {\n        ","\n        gl_FragColor = vec4(gl_FragColor.a);\n      }\n      "])),M)),0===e.output&&t.fragment.code.add(Object(T.a)(y||(y=Object(w.a)(["\n    void main() {\n      ","\n      ","\n    }\n    "])),M,e.FrontFacePass?"gl_FragColor.rgb /= gl_FragColor.a;":"")),4===e.output&&(t.include(D.a),t.fragment.code.add(Object(T.a)(O||(O=Object(w.a)(["\n    void main() {\n      ","\n      ","\n    }\n    "])),M,e.binaryHighlightOcclusionEnabled?Object(T.a)(j||(j=Object(w.a)(["\n          if (voccluded == 1.0) {\n            gl_FragColor = vec4(1.0, 1.0, 0.0, 1.0);\n          } else {\n            gl_FragColor = vec4(1.0, 0.0, 1.0, 1.0);\n          }"]))):"outputHighlight();"))),t}function z(e,t=G){return e.textureIsSignedDistanceField?function(e,t,r){r[0]=e[0]*(t[2]-t[0])+t[0],r[1]=e[1]*(t[3]-t[1])+t[1]}(e.anchorPos,e.distanceFieldBoundingBox,t):Object(M.c)(t,e.anchorPos),t}(_||(_={})).bindUniforms=function(e,t,r){e.setUniform4fv("materialColor",t.color),t.textureIsSignedDistanceField&&(t.outlineColor[3]<=0||t.outlineSize<=0?(e.setUniform4fv("outlineColor",S.b),e.setUniform1f("outlineSize",0)):(e.setUniform4fv("outlineColor",t.outlineColor),e.setUniform1f("outlineSize",t.outlineSize))),e.setUniform2f("screenOffset",2*t.screenOffset[0]*r,2*t.screenOffset[1]*r),e.setUniform2fv("anchorPos",z(t))};var G=Object(x.a)(),U=Object.freeze({__proto__:null,build:V,get HUDMaterial(){return _},calculateAnchorPosForRendering:z})},function(e,t,r){"use strict";r.d(t,"a",(function(){return o})),r.d(t,"b",(function(){return a}));var i=r(89),n=r(327);function a(e){return"array"in e}function o(e,t,r="ground"){if(Object(n.c)(t))return e.getElevation(t.x,t.y,t.z||0,t.spatialReference,r);if(a(t)){var o=t.offset;return e.getElevation(t.array[o++],t.array[o++],t.array[o]||0,Object(i.r)(t.spatialReference,e.spatialReference),r)}return e.getElevation(t[0],t[1],t[2]||0,e.spatialReference,r)}},function(e,t,r){"use strict";r.d(t,"a",(function(){return u})),r.d(t,"b",(function(){return p}));r(89);var i=r(276),n=r(411),a=r(110),o=(r(104),r(157),r(125),r(223)),s=(r(174),r(202)),c=(r(200),r(191),r(279),r(327)),l=r(480);function u(e,t){if("point"===e.type)return h(e,t,!1);if(Object(l.c)(e))switch(e.type){case"extent":return h(e.center,t,!1);case"polygon":return h(e.centroid,t,!1);case"polyline":return h(d(e),t,!0);case"mesh":return h(e.extent.center,t,!1)}else switch(e.type){case"extent":return h(function(e){var t=Object(a.j)(e.zmin);return Object(c.d)(.5*(e.xmax+e.xmin),.5*(e.ymax+e.ymin),t?.5*(e.zmax+e.zmin):void 0,e.spatialReference)}(e),t,!0);case"polygon":return h(function(e){var t=e.rings[0];if(!t||0===t.length)return null;var r=Object(n.b)(e.rings,e.hasZ);return Object(c.d)(r[0],r[1],r[2],e.spatialReference)}(e),t,!0);case"polyline":return h(d(e),t,!0)}}function d(e){var t=e.paths[0];if(!t||0===t.length)return null;var r=Object(i.f)(t,Object(i.e)(t)/2);return Object(c.d)(r[0],r[1],r[2],e.spatialReference)}function h(e,t,r){var i=r?e:Object(l.a)(e);return t&&e?Object(o.n)(e,i,t)?i:null:i}function p(e,t){for(var r=0;r<e.geometries.length;++r){var i=e.geometries[r].getMutableAttribute("auxpos1");i&&i.data[3]!==t&&(i.data[3]=t,e.geometryVertexAttrsUpdated(r))}}Object(s.e)(0,0),Object(s.e)(.5,0),Object(s.e)(1,0),Object(s.e)(0,.5),Object(s.e)(.5,.5),Object(s.e)(1,.5),Object(s.e)(0,1),Object(s.e)(.5,1),Object(s.e)(1,1)},function(e,t,r){"use strict";r.d(t,"a",(function(){return c})),r.d(t,"b",(function(){return s})),r.d(t,"c",(function(){return a})),r.d(t,"d",(function(){return o}));var i=r(368),n=r(491),a=Object(i.a)().vec3f("position"),o=Object(i.a)().vec3f("position").vec2f("uv0"),s=Object(i.a)().vec3f("position").vec4u8("color");class c{constructor(e){this.vertexBufferLayout=e}allocate(e){return this.vertexBufferLayout.createBuffer(e)}elementCount(e){return e.indices.get("position").length}write(e,t,r,i){Object(n.c)(t,this.vertexBufferLayout,e.transformation,e.invTranspTransformation,r,i)}}},function(e,t,r){"use strict";r.d(t,"a",(function(){return n})),r.d(t,"b",(function(){return i}));var i=["freehand","hybrid","click"],n="click"},,,,,function(e,t,r){"use strict";r.r(t);var i=r(82),n=(r(80),r(81),r(88),r(85)),a=r(84),o=r(93),s=(r(83),r(86),r(87),r(90)),c=class extends s.a{constructor(e){super(e),this.created=null,this.id=null,this.portal=null,this.title=null,this.username=null}get url(){var e=this.get("portal.restUrl");return e?"".concat(e,"/content/users/").concat(this.username,"/").concat(this.id):null}toJSON(){throw new o.a("internal:not-yet-implemented","PortalFolder.toJSON is not yet implemented")}};Object(i.a)([Object(n.b)({type:Date})],c.prototype,"created",void 0),Object(i.a)([Object(n.b)()],c.prototype,"id",void 0),Object(i.a)([Object(n.b)()],c.prototype,"portal",void 0),Object(i.a)([Object(n.b)()],c.prototype,"title",void 0),Object(i.a)([Object(n.b)({readOnly:!0})],c.prototype,"url",null),Object(i.a)([Object(n.b)()],c.prototype,"username",void 0);var l,u=c=Object(i.a)([Object(a.a)("esri.portal.PortalFolder")],c),d=r(575),h=l=class extends s.a{constructor(...e){super(...e),this.access=null,this.created=null,this.culture=null,this.description=null,this.email=null,this.fullName=null,this.modified=null,this.orgId=null,this.portal=null,this.preferredView=null,this.privileges=null,this.region=null,this.role=null,this.roleId=null,this.sourceJSON=null,this.units=null,this.username=null,this.userType=null}get thumbnailUrl(){var e=this.url,t=this.thumbnail;return e&&t?this.portal._normalizeUrl("".concat(e,"/info/").concat(t,"?f=json")):null}get userContentUrl(){var e=this.get("portal.restUrl");return e?"".concat(e,"/content/users/").concat(this.username):null}get url(){var e=this.get("portal.restUrl");return e?"".concat(e,"/community/users/").concat(this.username):null}addItem(e){var t=e&&e.item,r=e&&e.data,i=e&&e.folder,n={method:"post"};t&&(n.query=t.createPostQuery(),null!=r&&("string"==typeof r?n.query.text=r:"object"==typeof r&&(n.query.text=JSON.stringify(r))));var a=this.userContentUrl;return i&&(a+="/"+("string"==typeof i?i:i.id)),this.portal._request(a+"/addItem",n).then((e=>(t.id=e.id,t.portal=this.portal,t.loaded?t.reload():t.load())))}deleteItem(e){var t=this.userContentUrl;return e.ownerFolder&&(t+="/"+e.ownerFolder),this.portal._request(t+"/items/".concat(e.id,"/delete"),{method:"post"}).then((()=>{e.id=null,e.portal=null}))}deleteItems(e){var t=this.userContentUrl+"/deleteItems",r=e.map((e=>e.id));if(r.length){var i={method:"post",query:{items:r.join(",")}};return this.portal._request(t,i).then((()=>{e.forEach((e=>{e.id=null,e.portal=null}))}))}return Promise.resolve(void 0)}fetchFolders(){return this.portal._request(this.userContentUrl,{query:{num:1}}).then((e=>e&&e.folders?e.folders.map((e=>{var t=u.fromJSON(e);return t.portal=this.portal,t})):[]))}fetchGroups(){return this.portal._request(this.url).then((e=>e&&e.groups?e.groups.map((e=>{var t=d.default.fromJSON(e);return t.portal=this.portal,t})):[]))}fetchItems(e){e||(e={});var t,i=this.userContentUrl;return e.folder&&(i+="/"+e.folder.id),r.e(50).then(r.bind(null,314)).then((({default:r})=>{t=r;var n={folders:!1,num:e.num||10,start:e.start||1,sortField:e.sortField||"created",sortOrder:e.sortOrder||"asc"};return this.portal._request(i,{query:n})})).then((e=>{var r;return e&&e.items?(r=e.items.map((e=>{var r=t.fromJSON(e);return r.portal=this.portal,r})),Promise.all(r.map((e=>e.load()))).catch((e=>e)).then((()=>({items:r,nextStart:e.nextStart,total:e.total})))):{items:[],nextStart:-1,total:0}}))}fetchTags(){return this.portal._request(this.url+"/tags").then((e=>e.tags))}getThumbnailUrl(e){var t=this.thumbnailUrl;return t&&e&&(t+="&w=".concat(e)),t}queryFavorites(e){return this.favGroupId?(this._favGroup||(this._favGroup=new d.default({id:this.favGroupId,portal:this.portal})),this._favGroup.queryItems(e)):Promise.reject(new o.a("internal:unknown","Unknown internal error",{internalError:"Unknown favGroupId"}))}toJSON(){throw new o.a("internal:not-yet-implemented","PortalGroup.toJSON is not yet implemented")}static fromJSON(e){if(!e)return null;if(e.declaredClass)throw new Error("JSON object is already hydrated");var t=new l;return t.sourceJSON=e,t.read(e),t}};Object(i.a)([Object(n.b)()],h.prototype,"access",void 0),Object(i.a)([Object(n.b)({type:Date})],h.prototype,"created",void 0),Object(i.a)([Object(n.b)()],h.prototype,"culture",void 0),Object(i.a)([Object(n.b)()],h.prototype,"description",void 0),Object(i.a)([Object(n.b)()],h.prototype,"email",void 0),Object(i.a)([Object(n.b)()],h.prototype,"favGroupId",void 0),Object(i.a)([Object(n.b)()],h.prototype,"fullName",void 0),Object(i.a)([Object(n.b)({type:Date})],h.prototype,"modified",void 0),Object(i.a)([Object(n.b)()],h.prototype,"orgId",void 0),Object(i.a)([Object(n.b)()],h.prototype,"portal",void 0),Object(i.a)([Object(n.b)()],h.prototype,"preferredView",void 0),Object(i.a)([Object(n.b)()],h.prototype,"privileges",void 0),Object(i.a)([Object(n.b)()],h.prototype,"region",void 0),Object(i.a)([Object(n.b)()],h.prototype,"role",void 0),Object(i.a)([Object(n.b)()],h.prototype,"roleId",void 0),Object(i.a)([Object(n.b)()],h.prototype,"sourceJSON",void 0),Object(i.a)([Object(n.b)()],h.prototype,"thumbnail",void 0),Object(i.a)([Object(n.b)({readOnly:!0})],h.prototype,"thumbnailUrl",null),Object(i.a)([Object(n.b)()],h.prototype,"units",void 0),Object(i.a)([Object(n.b)({readOnly:!0})],h.prototype,"userContentUrl",null),Object(i.a)([Object(n.b)({readOnly:!0})],h.prototype,"url",null),Object(i.a)([Object(n.b)()],h.prototype,"username",void 0),Object(i.a)([Object(n.b)()],h.prototype,"userType",void 0);var p=h=l=Object(i.a)([Object(a.a)("esri.portal.PortalUser")],h);t.default=p},,,,,,function(e,t,r){"use strict";r.d(t,"a",(function(){return u})),r.d(t,"b",(function(){return d})),r.d(t,"c",(function(){return a}));for(var i=r(80),n=r(165),a=Object(i.a)("mac")?"Meta":"Ctrl",o={8:"Backspace",9:"Tab",13:"Enter",27:"Escape",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete"},s=48;s<58;s++)o[s]=String.fromCharCode(s);for(var c=1;c<25;c++)o[111+c]="F".concat(c);for(var l=65;l<91;l++)o[l]=[String.fromCharCode(l+32),String.fromCharCode(l)];function u(e){if(void 0!==e.key)return Object(n.a)(e);var t=o[e.keyCode];return Array.isArray(t)?e.shiftKey?t[1]:t[0]:t}function d(e){switch(e){case"Ctrl":case"Alt":case"Shift":case"Meta":case"Primary":return!0}return!1}},function(e,t,r){"use strict";function i(e){return 32+e.length}function n(e){if(!e)return 0;var t=32;for(var r in e)if(e.hasOwnProperty(r)){var n=e[r];switch(typeof n){case"string":t+=i(n);break;case"number":t+=16;break;case"boolean":t+=4}}return t}function a(e,t){return 32+e.length*t}r.d(t,"a",(function(){return n})),r.d(t,"b",(function(){return a}))},function(e,t,r){"use strict";r.d(t,"a",(function(){return l}));var i,n,a,o,s=r(120),c=r(119);function l(e,t){e.constants.add("stippleAlphaColorDiscard","float",.001),e.constants.add("stippleAlphaHighlightDiscard","float",.5),t.stippleEnabled?function(e,t){e.vertex.uniforms.add("stipplePatternPixelSizeInv","float"),t.stippleUVMaxEnabled&&e.varyings.add("stipplePatternUvMax","float"),e.varyings.add("stipplePatternUv","float"),e.fragment.uniforms.add("stipplePatternTexture","sampler2D"),t.stippleOffColorEnabled&&e.fragment.uniforms.add("stippleOffColor","vec4"),e.fragment.code.add(Object(c.a)(i||(i=Object(s.a)(["\n  float getStippleAlpha() {\n    float stipplePatternUvClamped = stipplePatternUv * gl_FragCoord.w;\n    ","\n\n    return texture2D(stipplePatternTexture, vec2(mod(stipplePatternUvClamped, 1.0), 0.5)).a;\n  }"])),t.stippleUVMaxEnabled?"stipplePatternUvClamped = clamp(stipplePatternUvClamped, 0.0, stipplePatternUvMax);":"")),t.stippleOffColorEnabled?e.fragment.code.add(Object(c.a)(n||(n=Object(s.a)(["\n    #define discardByStippleAlpha(stippleAlpha, threshold) {}\n    #define blendStipple(color, stippleAlpha) mix(color, stippleOffColor, stippleAlpha)\n    "])))):e.fragment.code.add(Object(c.a)(a||(a=Object(s.a)(["\n    #define discardByStippleAlpha(stippleAlpha, threshold) if (stippleAlpha < threshold) { discard; }\n    #define blendStipple(color, stippleAlpha) vec4(color.rgb, color.a * stippleAlpha)\n    "]))))}(e,t):function(e){e.fragment.code.add(Object(c.a)(o||(o=Object(s.a)(["\n  float getStippleAlpha() { return 1.0; }\n\n  #define discardByStippleAlpha(_stippleAlpha_, _threshold_) {}\n  #define blendStipple(color, _stippleAlpha_) color\n  "]))))}(e)}},function(e,t,r){"use strict";r.d(t,"a",(function(){return n}));var i=r(189);class n{constructor(e){this.channel=e,this.id=Object(i.a)()}}},function(e,t,r){"use strict";r.d(t,"a",(function(){return v})),r.d(t,"b",(function(){return f})),r.d(t,"c",(function(){return b}));var i,n,a=r(180),o=r(89),s=r(104),c=r(157),l=r(223),u=r(174),d=r(327),h=r(583),p=r(584);function f(e,t,r,i,n,a,o,s,c,u,d){var h,p,f=m[d.mode],b=0;if(Object(l.k)(e,t,r,i,c.spatialReference,n,s))return f.requiresAlignment(d)?(b=f.applyElevationAlignmentBuffer(i,n,a,o,s,c,u,d),h=a,p=o):(h=i,p=n),Object(l.k)(h,c.spatialReference,p,a,u.spatialReference,o,s)?b:void 0}function b(e,t,r,i,n){var s=(Object(d.c)(e)?e.z:Object(h.b)(e)?e.array[e.offset+2]:e[2])||0;switch(r.mode){case"on-the-ground":var c=Object(o.r)(Object(h.a)(t,e,"ground"),0);return n&&(n.verticalDistanceToGround=0,n.sampledElevation=c),c;case"relative-to-ground":var l=Object(o.r)(Object(h.a)(t,e,"ground"),0),u=r.geometryZWithOffset(s,i);return n&&(n.verticalDistanceToGround=u,n.sampledElevation=l),u+l;case"relative-to-scene":var p=Object(o.r)(Object(h.a)(t,e,"scene"),0),f=r.geometryZWithOffset(s,i);return n&&(n.verticalDistanceToGround=f,n.sampledElevation=p),f+p;case"absolute-height":var b=r.geometryZWithOffset(s,i);if(n){var v=Object(o.r)(Object(h.a)(t,e,"ground"),0);n.verticalDistanceToGround=b-v,n.sampledElevation=v}return b;default:return Object(a.a)(r.mode),0}}function v(e,t,r,i,n){var a=b(t,r,n,i,y);Object(p.b)(e,y.verticalDistanceToGround);var o=y.sampledElevation,s=Object(c.c)(g,e.transformation);return O[0]=t.x,O[1]=t.y,O[2]=a,Object(l.d)(t.spatialReference,O,s,i.spatialReference)?e.transformation=s:console.warn("Could not locate symbol object properly, it might be misplaced"),o}(n=i||(i={}))[n.NONE=0]="NONE",n[n.UPDATE=1]="UPDATE",n[n.RECREATE=2]="RECREATE";var m={"absolute-height":{applyElevationAlignmentBuffer:function(e,t,r,i,n,a,o,s){var c=s.calculateOffsetRenderUnits(o),l=s.featureExpressionInfoContext;t*=3,i*=3;for(var u=0;u<n;++u){var d=e[t+0],h=e[t+1],p=e[t+2];r[i+0]=d,r[i+1]=h,r[i+2]=null==l?p+c:c,t+=3,i+=3}return 0},requiresAlignment:function(e){var t=e.meterUnitOffset,r=e.featureExpressionInfoContext;return 0!==t||null!=r}},"on-the-ground":{applyElevationAlignmentBuffer:function(e,t,r,i,n,a){var s=0,c=a.spatialReference;t*=3,i*=3;for(var l=0;l<n;++l){var u=e[t+0],d=e[t+1],h=e[t+2],p=Object(o.r)(a.getElevation(u,d,h,c,"ground"),0);s+=p,r[i+0]=u,r[i+1]=d,r[i+2]=p,t+=3,i+=3}return s/n},requiresAlignment:()=>!0},"relative-to-ground":{applyElevationAlignmentBuffer:function(e,t,r,i,n,a,s,c){var l=0,u=c.calculateOffsetRenderUnits(s),d=c.featureExpressionInfoContext,h=a.spatialReference;t*=3,i*=3;for(var p=0;p<n;++p){var f=e[t+0],b=e[t+1],v=e[t+2],m=Object(o.r)(a.getElevation(f,b,v,h,"ground"),0);l+=m,r[i+0]=f,r[i+1]=b,r[i+2]=null==d?v+m+u:m+u,t+=3,i+=3}return l/n},requiresAlignment:()=>!0},"relative-to-scene":{applyElevationAlignmentBuffer:function(e,t,r,i,n,a,s,c){var l=0,u=c.calculateOffsetRenderUnits(s),d=c.featureExpressionInfoContext,h=a.spatialReference;t*=3,i*=3;for(var p=0;p<n;++p){var f=e[t+0],b=e[t+1],v=e[t+2],m=Object(o.r)(a.getElevation(f,b,v,h,"scene"),0);l+=m,r[i+0]=f,r[i+1]=b,r[i+2]=null==d?v+m+u:m+u,t+=3,i+=3}return l/n},requiresAlignment:()=>!0}},g=Object(u.b)(),y={verticalDistanceToGround:0,sampledElevation:0},O=Object(s.e)()},,,,,function(e,t,r){"use strict";r.d(t,"a",(function(){return J}));var i=r(89),n=r(104),a=r(111),o=r(255),s=r(517),c=r(506),l=r(110),u=r(202),d=r(200),h=r(191),p=r(179),f=r(523),b=r(328),v=r(82),m=r(157),g=r(174),y=r(300),O=r(307),j=r(313),_=r(286),w=r(267),x=r(616);class S extends O.a{initializeProgram(e){var t=S.shader.get(),r=this.configuration,i=t.build(r);return new _.a(e.rctx,i.generateSource("vertex"),i.generateSource("fragment"),S.attributeLocations)}bind(e,t,r){this.program.setUniform3fv("innerColor",e.innerColor),this.program.setUniform1f("innerWidth",e.innerWidth*r.pixelRatio),this.program.setUniform3fv("glowColor",e.glowColor),this.program.setUniform1f("glowWidth",e.glowWidth*r.pixelRatio),this.program.setUniform1f("glowFalloff",e.glowFalloff),this.program.setUniform1f("globalAlpha",e.globalAlpha),this.program.setUniform1f("perScreenPixelRatio",r.perScreenPixelRatio),this.program.setUniform2f("pixelToNDC",2/r.fullWidth,2/r.fullHeight),this.program.setUniformMatrix4fv("uProjectionMatrix",r.projectionMatrix),Object(m.s)(T,r.viewMatrix,t),this.program.setUniformMatrix4fv("uModelViewMatrix",T),this.configuration.contrastControlEnabled&&this.program.setUniform1f("globalAlphaContrastBoost",null!=e.globalAlphaContrastBoost?e.globalAlphaContrastBoost:1)}initializePipeline(){return Object(w.d)({blending:Object(w.f)(1,771),colorWrite:w.b})}bindPipelineState(e){e.setPipelineState(this.pipeline)}}S.shader=new y.a(x.a,(()=>r.e(297).then(r.bind(null,1185)))),S.attributeLocations={start:0,end:1,up:2,extrude:3};class M extends j.a{constructor(){super(...arguments),this.contrastControlEnabled=!1}}Object(v.a)([Object(j.b)()],M.prototype,"contrastControlEnabled",void 0);var T=Object(g.b)(),P=(r(80),r(208),r(570)),E=r(368),C=r(325),A=r(326);r(192);class I{constructor(e){this._renderCoordsHelper=e,this._buffers=null,this._origin=Object(n.e)(),this._dirty=!1,this._count=0,this._vao=null}set vertices(e){var t=new Float64Array(3*e.length),r=0;for(var i of e)t[r++]=i[0],t[r++]=i[1],t[r++]=i[2];this.buffers=[t]}set buffers(e){if(this._buffers=e,this._buffers.length>0){var t=this._buffers[0],r=3*Math.floor(t.length/3/2);Object(a.v)(this._origin,t[r+0],t[r+1],t[r+2])}else Object(a.v)(this._origin,0,0,0);this._dirty=!0}get origin(){return this._origin}draw(e){var t=this.ensureVAO(e);Object(i.k)(t)&&(e.bindVAO(t),e.drawArrays(4,0,this._count))}dispose(){Object(i.k)(this._vao)&&this._vao.dispose()}ensureVAO(e){return Object(i.j)(this._buffers)?null:(Object(i.j)(this._vao)&&(this._vao=this.createVAO(e,this._buffers)),this.ensureVertexData(this._vao,this._buffers),this._vao)}createVAO(e,t){var r=this.createDataBuffer(t);return this._dirty=!1,new A.a(e,S.attributeLocations,{data:Object(P.a)(R)},{data:C.a.createVertex(e,35044,r)})}ensureVertexData(e,t){if(this._dirty){var r=this.createDataBuffer(t);e.vertexBuffers.data.setData(r),this._dirty=!1}}numberOfRenderVertices(e){return 2*(e.length/3-1)*3}createDataBuffer(e){var t=e.reduce(((e,t)=>e+this.numberOfRenderVertices(t)),0);this._count=t;var r=R.createBuffer(t),i=this._origin,n=0,o=0;for(var s of e){for(var c=0;c<s.length;c+=3){var l=Object(a.v)(F,s[c+0],s[c+1],s[c+2]);0===c?o=this._renderCoordsHelper.getAltitude(l):this._renderCoordsHelper.setAltitude(o,l);var u=this._renderCoordsHelper.worldUpAtPosition(l,k),d=n+2*c,h=Object(a.i)(F,l,i);if(c<s.length-3){r.up.setVec(d,u),r.up.setVec(d+3,u),r.up.setVec(d+5,u);for(var p=0;p<6;p++)r.start.setVec(d+p,h);r.extrude.setValues(d+0,0,-1),r.extrude.setValues(d+1,1,-1),r.extrude.setValues(d+2,1,1),r.extrude.setValues(d+3,0,-1),r.extrude.setValues(d+4,1,1),r.extrude.setValues(d+5,0,1)}if(c>0){r.up.setVec(d-2,u),r.up.setVec(d-4,u),r.up.setVec(d-5,u);for(var f=-6;f<0;f++)r.end.setVec(d+f,h)}}n+=this.numberOfRenderVertices(s)}return r.buffer}}var k=Object(n.e)(),F=Object(n.e)(),R=Object(E.a)().vec3f("start").vec3f("end").vec3f("up").vec2f("extrude"),D=r(306);class L extends O.a{initializeProgram(e){var t=L.shader.get(),r=this.configuration,i=t.build(r);return new _.a(e.rctx,i.generateSource("vertex"),i.generateSource("fragment"),D.a)}bind(e,t){this.program.setUniform3fv("innerColor",e.innerColor),this.program.setUniform1f("innerWidth",e.innerWidth*t.pixelRatio),this.program.setUniform3fv("glowColor",e.glowColor),this.program.setUniform1f("glowWidth",e.glowWidth*t.pixelRatio),this.program.setUniform1f("glowFalloff",e.glowFalloff),this.program.setUniform1f("globalAlpha",e.globalAlpha),this.configuration.contrastControlEnabled&&this.program.setUniform1f("globalAlphaContrastBoost",null!=e.globalAlphaContrastBoost?e.globalAlphaContrastBoost:1);var r=null!=e.angleCutoff?e.angleCutoff:c.c;this.program.setUniform2f("angleCutoff",Math.cos(r),Math.cos(Math.max(0,r-Object(l.f)(2)))),this.configuration.intersectsLineEnabled&&this.program.setUniform1f("perScreenPixelRatio",t.perScreenPixelRatio)}initializePipeline(){return Object(w.d)({blending:Object(w.f)(1,771),colorWrite:w.b})}}L.shader=new y.a(c.a,(()=>r.e(298).then(r.bind(null,1186))));class N extends j.a{constructor(){super(...arguments),this.heightManifoldEnabled=!1,this.pointDistanceEnabled=!1,this.lineVerticalPlaneEnabled=!1,this.intersectsLineEnabled=!1,this.contrastControlEnabled=!1}}Object(v.a)([Object(j.b)()],N.prototype,"heightManifoldEnabled",void 0),Object(v.a)([Object(j.b)()],N.prototype,"pointDistanceEnabled",void 0),Object(v.a)([Object(j.b)()],N.prototype,"lineVerticalPlaneEnabled",void 0),Object(v.a)([Object(j.b)()],N.prototype,"intersectsLineEnabled",void 0),Object(v.a)([Object(j.b)()],N.prototype,"contrastControlEnabled",void 0);var V=Object(n.e)(),z=Object(d.c)(),G={glowColor:[1,.5,0],glowWidth:8,glowFalloff:8,innerColor:[1,1,1],innerWidth:1,globalAlpha:.75,angleCutoff:Object(l.f)(6),globalAlphaContrastBoost:2};function U(e,t,r,i){var n=V,s=z;Object(a.l)(n,t,i),Object(a.j)(s,r),s[3]=0,Object(h.m)(s,s,i),o.e.fromPositionAndNormal(n,s,e)}class q{constructor(e,t={},r={contrastControlEnabled:!1}){this._renderCoordsHelper=e,this._config=r,this._technique=null,this._projInfo=Object(d.c)(),this._zScale=Object(u.a)(),this._heightManifoldEnabled=!1,this._heightManifoldTarget=Object(n.e)(),this._pointDistanceEnabled=!1,this._pointDistanceOrigin=Object(n.e)(),this._pointDistanceTarget=Object(n.e)(),this._lineVerticalPlaneEnabled=!1,this._lineVerticalPlaneSegment=o.d.create(),this._intersectsLineEnabled=!1,this._intersectsLineSegment=o.d.create(),this._intersectsLineRadius=3,this._intersectsLineInfinite=!1,this._pathVerticalPlaneEnabled=!1,this._pathVerticalPlaneData=null,this._pathTechnique=null,this.canRender=!0,this._tempNormal=Object(n.e)(),this._tempDir=Object(n.e)(),this._tempUp=Object(n.e)(),this._tempVec3A=Object(n.e)(),this._tempVec3B=Object(n.e)(),this._tempVec4=Object(d.c)(),this._tempPlane=o.e.create(),this._tempSphere=o.g.create(),this._params=Object(b.c)(t,G)}get renderSlots(){return[this._config.contrastControlEnabled?17:16]}get needsLinearDepth(){return!0}get heightManifoldEnabled(){return this._heightManifoldEnabled}set heightManifoldEnabled(e){this._heightManifoldEnabled!==e&&(this._heightManifoldEnabled=e,this._requestRender())}get heightManifoldTarget(){return this._heightManifoldTarget}set heightManifoldTarget(e){Object(a.j)(this._heightManifoldTarget,e),this._requestRender()}get pointDistanceEnabled(){return this._pointDistanceEnabled}set pointDistanceEnabled(e){e!==this._pointDistanceEnabled&&(this._pointDistanceEnabled=e,this._requestRender())}get pointDistanceTarget(){return this._pointDistanceTarget}set pointDistanceTarget(e){Object(a.j)(this._pointDistanceTarget,e),this._requestRender()}get pointDistanceOrigin(){return this._pointDistanceOrigin}set pointDistanceOrigin(e){Object(a.j)(this._pointDistanceOrigin,e),this._requestRender()}get lineVerticalPlaneEnabled(){return this._lineVerticalPlaneEnabled}set lineVerticalPlaneEnabled(e){e!==this._lineVerticalPlaneEnabled&&(this._lineVerticalPlaneEnabled=e,this._requestRender())}get lineVerticalPlaneSegment(){return this._lineVerticalPlaneSegment}set lineVerticalPlaneSegment(e){o.d.copy(e,this._lineVerticalPlaneSegment),this._requestRender()}get intersectsLineEnabled(){return this._intersectsLineEnabled}set intersectsLineEnabled(e){e!==this._intersectsLineEnabled&&(this._intersectsLineEnabled=e,this._requestRender())}get intersectsLineSegment(){return this._intersectsLineSegment}set intersectsLineSegment(e){o.d.copy(e,this._intersectsLineSegment),this._requestRender()}get intersectsLineRadius(){return this._intersectsLineRadius}set intersectsLineRadius(e){e!==this._intersectsLineRadius&&(this._intersectsLineRadius=e,this._requestRender())}get intersectsLineInfinite(){return this._intersectsLineInfinite}set intersectsLineInfinite(e){e!==this._intersectsLineInfinite&&(this._intersectsLineInfinite=e,this._requestRender())}get pathVerticalPlaneEnabled(){return this._pathVerticalPlaneEnabled}set pathVerticalPlaneEnabled(e){e!==this._pathVerticalPlaneEnabled&&(this._pathVerticalPlaneEnabled=e,Object(i.k)(this._pathVerticalPlaneData)&&this._requestRender())}set pathVerticalPlaneVertices(e){Object(i.j)(this._pathVerticalPlaneData)&&(this._pathVerticalPlaneData=new I(this._renderCoordsHelper)),this._pathVerticalPlaneData.vertices=e,this.pathVerticalPlaneEnabled&&this._requestRender()}set pathVerticalPlaneBuffers(e){Object(i.j)(this._pathVerticalPlaneData)&&(this._pathVerticalPlaneData=new I(this._renderCoordsHelper)),this._pathVerticalPlaneData.buffers=e,this.pathVerticalPlaneEnabled&&this._requestRender()}setParameterValues(e){Object(b.f)(this._params,e)&&this._requestRender()}initializeRenderContext(e){this._context=e;var t=e.renderContext.rctx;this._quadVAO=Object(f.b)(t),this._techniqueRepository=e.shaderTechniqueRep,this._techniqueConfig=new N,this._pathTechniqueConfig=new M}uninitializeRenderContext(){this._quadVAO=Object(i.f)(this._quadVAO),this._techniqueRepository.release(this._technique),this._technique=null,this._pathVerticalPlaneData=Object(i.f)(this._pathVerticalPlaneData),this._techniqueRepository.release(this._pathTechnique),this._pathTechnique=null}render(e){var t=this.heightManifoldEnabled||this.pointDistanceEnabled||this.lineVerticalPlaneSegment||this.intersectsLineEnabled,r=this.pathVerticalPlaneEnabled;if(!t&&!r)return!0;var i=e.camera;return Object(p.f)(i.projectionMatrix,i.fullWidth,i.fullHeight,this._projInfo,this._zScale),t&&this.renderUnified(e),r&&this.renderPath(e),!0}renderUnified(e){var t=e.rctx,r=this._selectTechnique(),i=r.program;t.bindProgram(i),r.bindPipelineState(t),this.bindGlobalUniforms(e,i),this.bindHeightManifoldUniforms(e,i),this.bindPointDistanceUniforms(e,i),this.bindLineVerticalPlaneUniforms(e,i),this.bindIntersectsLineUniforms(e,i),r.bind(this._params,e.camera),t.bindVAO(this._quadVAO),t.drawArrays(5,0,4)}renderPath(e){if(!Object(i.j)(this._pathVerticalPlaneData)){this._pathTechniqueConfig.contrastControlEnabled=this._config.contrastControlEnabled,this._pathTechnique=this._techniqueRepository.acquireAndReleaseExisting(S,this._pathTechniqueConfig,this._pathTechnique);var t=e.rctx,r=this._pathTechnique,n=r.program;t.bindProgram(n),r.bindPipelineState(t),this.bindGlobalUniforms(e,n),r.bind(this._params,this._pathVerticalPlaneData.origin,e.camera),this._pathVerticalPlaneData.draw(e.rctx)}}bindHeightManifoldUniforms(e,t){if(this.heightManifoldEnabled){var r=this._tempVec3A,i=this._tempPlane;this._renderCoordsHelper.worldUpAtPosition(this._heightManifoldTarget,r),U(i,this._heightManifoldTarget,r,e.camera.viewMatrix),t.setUniform4fv("heightPlane",i)}}bindPointDistanceUniforms(e,t){if(this._pointDistanceEnabled){var r=e.camera,i=this._tempSphere;Object(a.j)(i,this._pointDistanceOrigin),Object(a.l)(i,i,r.viewMatrix),i[3]=Object(a.n)(this._pointDistanceOrigin,this._pointDistanceTarget),t.setUniform4f("pointDistanceSphere",i[0],i[1],i[2],i[3])}}bindLineVerticalPlaneUniforms(e,t){if(this._lineVerticalPlaneEnabled){var r=this._renderCoordsHelper,i=e.camera,n=this._tempPlane,s=this._tempVec3A,c=this._tempUp,l=this._tempDir,u=this._tempNormal;o.d.pointAt(this._lineVerticalPlaneSegment,.5,s),r.worldUpAtPosition(s,c),Object(a.q)(l,this._lineVerticalPlaneSegment.vector),Object(a.f)(u,c,l),Object(a.q)(u,u),U(n,this._lineVerticalPlaneSegment.origin,u,i.viewMatrix),t.setUniform4fv("lineVerticalPlane",n);var d=this._tempVec3A;Object(a.j)(d,this._lineVerticalPlaneSegment.origin),r.setAltitude(0,d),Object(a.l)(d,d,i.viewMatrix),t.setUniform3fv("lineVerticalStart",d);var h=this._tempVec3B;Object(a.e)(h,this._lineVerticalPlaneSegment.origin,this._lineVerticalPlaneSegment.vector),r.setAltitude(0,h),Object(a.l)(h,h,i.viewMatrix),t.setUniform3fv("lineVerticalEnd",h)}}bindIntersectsLineUniforms(e,t){if(this._intersectsLineEnabled){var r=B,i=W;if(this._intersectsLineInfinite){var n=e.camera;if(o.b.fromRay(o.f.wrap(this._intersectsLineSegment.origin,this._intersectsLineSegment.vector),H),H.c0=-Number.MAX_VALUE,!o.c.intersectClipRay(n.frustum,H))return;o.b.getStart(H,r),o.b.getEnd(H,i)}else Object(a.j)(r,this._intersectsLineSegment.origin),Object(a.e)(i,this._intersectsLineSegment.origin,this._intersectsLineSegment.vector);var s=this._tempVec3A;Object(a.l)(s,r,e.camera.viewMatrix),t.setUniform3fv("intersectsLineStart",s);var c=this._tempVec4;Object(a.j)(c,this._intersectsLineSegment.vector),this._tempVec4[3]=0,Object(h.m)(this._tempVec4,this._tempVec4,e.camera.viewMatrix),Object(a.l)(i,i,e.camera.viewMatrix),t.setUniform3fv("intersectsLineEnd",i),Object(a.q)(c,c),t.setUniform3f("intersectsLineDirection",c[0],c[1],c[2]),t.setUniform1f("intersectsLineRadius",this._intersectsLineRadius)}}bindGlobalUniforms(e,t){var r=e.camera;t.setUniform4fv("projInfo",this._projInfo),t.setUniform2fv("zScale",this._zScale),t.setUniform2f("nearFar",r.near,r.far),this._heightManifoldEnabled?t.setUniform1f("maxPixelDistance",2*r.computeScreenPixelSizeAt(this._heightManifoldTarget)):this._pointDistanceEnabled?t.setUniform1f("maxPixelDistance",2*r.computeScreenPixelSizeAt(this._pointDistanceTarget)):this._lineVerticalPlaneEnabled&&t.setUniform1f("maxPixelDistance",2*r.computeScreenPixelSizeAt(this._lineVerticalPlaneSegment.origin)),t.setUniform1i("depthMap",0),e.rctx.bindTexture(e.offscreenRenderingHelper.linearDepthTexture,0),t.setUniform1i("frameColor",1),e.rctx.bindTexture(e.offscreenRenderingHelper.mainColorTexture,1)}_requestRender(){this._context&&this._context.requestRender()}_selectTechnique(){return this._techniqueConfig.heightManifoldEnabled=this.heightManifoldEnabled,this._techniqueConfig.lineVerticalPlaneEnabled=this.lineVerticalPlaneEnabled,this._techniqueConfig.pointDistanceEnabled=this.pointDistanceEnabled,this._techniqueConfig.intersectsLineEnabled=this.intersectsLineEnabled,this._techniqueConfig.contrastControlEnabled=this._config.contrastControlEnabled,this._technique=this._techniqueRepository.acquireAndReleaseExisting(L,this._techniqueConfig,this._technique),this._technique}}var H=o.b.create(),B=Object(n.e)(),W=Object(n.e)();class J extends s.a{constructor(e){super(e.view),this._angleCutoff=c.c,this._style={},this._heightManifoldTarget=Object(n.e)(),this._heightManifoldEnabled=!1,this._intersectsLine=o.d.create(),this._intersectsLineEnabled=!1,this._intersectsLineInfinite=!1,this._lineVerticalPlaneSegment=null,this._pathVerticalPlaneBuffers=null,this._pointDistanceLine=null,this.applyProps(e)}get testData(){return this.renderer}createResources(){this.ensureRenderer()}destroyResources(){this.disposeRenderer()}updateVisibility(){this.syncHeightManifold(),this.syncIntersectsLine(),this.syncPathVerticalPlane(),this.syncLineVerticalPlane(),this.syncPointDistance()}get angleCutoff(){return this._angleCutoff}set angleCutoff(e){this._angleCutoff!==e&&(this._angleCutoff=e,this.syncAngleCutoff())}get style(){return this._style}set style(e){this._style=e,this.syncStyle()}get heightManifoldTarget(){return this._heightManifoldEnabled?this._heightManifoldTarget:null}set heightManifoldTarget(e){Object(i.k)(e)?(Object(a.j)(this._heightManifoldTarget,e),this._heightManifoldEnabled=!0):this._heightManifoldEnabled=!1,this.syncRenderer(),this.syncHeightManifold()}set intersectsWorldUpAtLocation(e){if(Object(i.j)(e))this.intersectsLine=null;else{var t=this.view.renderCoordsHelper.worldUpAtPosition(e,Z);this.intersectsLine=o.d.fromValues(e,t),this.intersectsLineInfinite=!0}}get intersectsLine(){return this._intersectsLineEnabled?this._intersectsLine:null}set intersectsLine(e){Object(i.k)(e)?(o.d.copy(e,this._intersectsLine),this._intersectsLineEnabled=!0):this._intersectsLineEnabled=!1,this.syncIntersectsLine(),this.syncRenderer()}get intersectsLineInfinite(){return this._intersectsLineInfinite}set intersectsLineInfinite(e){this._intersectsLineInfinite=e,this.syncIntersectsLineInfinite()}get lineVerticalPlaneSegment(){return this._lineVerticalPlaneSegment}set lineVerticalPlaneSegment(e){this._lineVerticalPlaneSegment=Object(i.k)(e)?o.d.copy(e):null,this.syncLineVerticalPlane(),this.syncRenderer()}get pathVerticalPlane(){return this._pathVerticalPlaneBuffers}set pathVerticalPlane(e){this._pathVerticalPlaneBuffers=e,this.syncPathVerticalPlane(),this.syncLineVerticalPlane(),this.syncPointDistance(),this.syncRenderer()}get pointDistanceLine(){return this._pointDistanceLine}set pointDistanceLine(e){this._pointDistanceLine=Object(i.k)(e)?{origin:Object(n.d)(e.origin),target:Object(n.d)(e.target)}:null,this.syncPointDistance(),this.syncRenderer()}syncRenderer(){this.attached&&(this._intersectsLineEnabled||this._heightManifoldEnabled||Object(i.k)(this._pointDistanceLine)||Object(i.k)(this._pathVerticalPlaneBuffers))?this.ensureRenderer():this.disposeRenderer()}ensureRenderer(){Object(i.k)(this.renderer)||(this.renderer=new q(this.view.renderCoordsHelper,void 0,{contrastControlEnabled:!0}),this.syncStyle(),this.syncHeightManifold(),this.syncIntersectsLine(),this.syncIntersectsLineInfinite(),this.syncPathVerticalPlane(),this.syncLineVerticalPlane(),this.syncPointDistance(),this.syncAngleCutoff(),this.view._stage&&this.view._stage.addRenderPlugin(this.renderer.renderSlots,this.renderer))}syncStyle(){Object(i.j)(this.renderer)||(this.renderer.setParameterValues(this._style),null!=this._style.intersectsLineRadius&&(this.renderer.intersectsLineRadius=this._style.intersectsLineRadius))}syncAngleCutoff(){Object(i.j)(this.renderer)||this.renderer.setParameterValues({angleCutoff:this._angleCutoff})}syncHeightManifold(){Object(i.j)(this.renderer)||(this.renderer.heightManifoldEnabled=this._heightManifoldEnabled&&this.visible,this._heightManifoldEnabled&&(this.renderer.heightManifoldTarget=this._heightManifoldTarget))}syncIntersectsLine(){Object(i.j)(this.renderer)||(this.renderer.intersectsLineEnabled=this._intersectsLineEnabled&&this.visible,this._intersectsLineEnabled&&(this.renderer.intersectsLineSegment=this._intersectsLine))}syncIntersectsLineInfinite(){Object(i.j)(this.renderer)||(this.renderer.intersectsLineInfinite=this._intersectsLineInfinite)}syncPathVerticalPlane(){Object(i.j)(this.renderer)||(this.renderer.pathVerticalPlaneEnabled=Object(i.k)(this._pathVerticalPlaneBuffers)&&this.visible,Object(i.k)(this._pathVerticalPlaneBuffers)&&(this.renderer.pathVerticalPlaneBuffers=this._pathVerticalPlaneBuffers))}syncLineVerticalPlane(){Object(i.j)(this.renderer)||(this.renderer.lineVerticalPlaneEnabled=Object(i.k)(this._lineVerticalPlaneSegment)&&this.visible,Object(i.k)(this._lineVerticalPlaneSegment)&&(this.renderer.lineVerticalPlaneSegment=this._lineVerticalPlaneSegment))}syncPointDistance(){Object(i.j)(this.renderer)||(this.renderer.pointDistanceEnabled=Object(i.k)(this._pointDistanceLine)&&this.visible,Object(i.k)(this._pointDistanceLine)&&(this.renderer.pointDistanceOrigin=this._pointDistanceLine.origin,this.renderer.pointDistanceTarget=this._pointDistanceLine.target))}disposeRenderer(){Object(i.k)(this.renderer)&&this.view._stage&&(this.view._stage.removeRenderPlugin(this.renderer),this.renderer=null)}}var Z=Object(n.e)()},,,,,,function(e,t,r){"use strict";r.d(t,"a",(function(){return v})),r.d(t,"b",(function(){return p})),r.d(t,"c",(function(){return b})),r.d(t,"d",(function(){return f})),r.d(t,"e",(function(){return m})),r.d(t,"f",(function(){return h}));var i=r(93),n=r(99),a=(r(113),r(130)),o=r(141),s=(r(101),r(117)),c=r(529);function l(e){if(!e)return null;if(e.isGeographic&&e.wkid){var t=c.c[e.wkid];if(t)return t}if(e.wkt){var r=c.a.exec(e.wkt);if(!r||2!==r.length)return null;var i=r[1].split(",");if(!i||i.length<3)return null;var n=parseFloat(i[1]),a=parseFloat(i[2]);return isNaN(n)||isNaN(a)?null:{a:n,f:0===a?0:1/a}}return null}function u(e){var t=l(e||n.a.WGS84);if(function(e){return"b"in e&&"eSq"in e&&"radius"in e}(t))return t;var r=t.a*(1-t.f);return Object.assign(t,{b:r,eSq:1-Math.pow(r/t.a,2),radius:(2*t.a+r)/3,densificationRatio:1e4/((2*t.a+r)/3)})}function d(e,t,r){var i,{a:n,eSq:a}=u(r),o=Math.sqrt(a),s=Math.sin(t[1]*c.d),l=n*t[0]*c.d;return i=a>0?n*((1-a)*(s/(1-a*(s*s))-1/(2*o)*Math.log((1-o*s)/(1+o*s))))*.5:n*s,e[0]=l,e[1]=i,e}function h(e){return null!==l(e)}function p(e,t="square-meters"){if(e.some((e=>!h(e.spatialReference))))throw new i.a("geodesic-areas:invalid-spatial-reference","the input geometries spatial reference is not supported");for(var r=[],n=0;n<e.length;n++){var a=e[n],o=a.spatialReference,{radius:c,densificationRatio:l}=u(o),p=c*l;r.push(b(a,p))}for(var f=[],v=[0,0],m=[0,0],g=0;g<r.length;g++){for(var{rings:y,spatialReference:O}=r[g],j=0,_=0;_<y.length;_++){var w=y[_];d(v,w[0],O),d(m,w[w.length-1],O);for(var x=m[0]*v[1]-v[0]*m[1],S=0;S<w.length-1;S++)d(v,w[S+1],O),d(m,w[S],O),x+=m[0]*v[1]-v[0]*m[1];j+=x}j=Object(s.c)(j,"square-meters",t),f.push(j/-2)}return f}function f(e,t="meters"){var r=e,n=e;if(!r&&!n)throw new i.a("geodesic-lengths:invalid-geometries","the input geometries type is not supported");if(r?r.some((e=>!h(e.spatialReference))):n.some((e=>!h(e.spatialReference))))throw new i.a("geodesic-lengths:invalid-spatial-reference","the input geometries spatial reference is not supported");for(var a=[],o=0;o<e.length;o++){for(var c=e[o],{spatialReference:l}=c,u="polyline"===c.type?c.paths:c.rings,d=0,p=0;p<u.length;p++){for(var f=u[p],b=0,v=1;v<f.length;v++){var g=f[v-1][0],y=f[v][0],O=f[v-1][1],j=f[v][1];if(O!==j||g!==y){var _={distance:null};m(_,[g,O],[y,j],l),b+=_.distance}}d+=b}d=Object(s.c)(d,"meters",t),a.push(d)}return a}function b(e,t){if("polyline"!==e.type&&"polygon"!==e.type)throw new i.a("geodesic-densify:invalid-geometry","the input geometry is neither polyline nor polygon");var{spatialReference:r}=e;if(!h(r))throw new i.a("geodesic-densify:invalid-spatial-reference","the input geometry spatial reference is not supported");var n="polyline"===e.type?e.paths:e.rings,s=[],c=[0,0],l={distance:null};for(var u of n){var d=[];s.push(d),d.push([u[0][0],u[0][1]]);for(var p=void 0,f=void 0,b=u[0][0],g=u[0][1],y=0;y<u.length-1;y++)if(p=u[y+1][0],f=u[y+1][1],b!==p||g!==f){var O=[b,g];m(l,[b,g],[p,f],r);var{azimuth:j,distance:_}=l,w=_/t;if(w>1){for(var x=1;x<=w-1;x++)v(c,O,j,x*t,r),d.push(c.slice(0));v(c,O,j,(_+Math.floor(w-1)*t)/2,r),d.push(c.slice(0))}v(c,O,j,_,r),d.push(c.slice(0)),b=c[0],g=c[1]}}return"polyline"===e.type?new o.a({paths:s,spatialReference:r}):new a.a({rings:s,spatialReference:r})}function v(e,t,r,i,n){for(var a,o,s,l=t[0],d=t[1],h=l*c.d,p=d*c.d,f=r*c.d,{a:b,b:v,f:m}=u(n),g=Math.sin(f),y=Math.cos(f),O=(1-m)*Math.tan(p),j=1/Math.sqrt(1+O*O),_=O*j,w=Math.atan2(O,y),x=j*g,S=x*x,M=1-S,T=M*(b*b-v*v)/(v*v),P=1+T/16384*(4096+T*(T*(320-175*T)-768)),E=T/1024*(256+T*(T*(74-47*T)-128)),C=i/(v*P),A=2*Math.PI;Math.abs(C-A)>1e-12;)s=Math.cos(2*w+C),A=C,C=i/(v*P)+E*(a=Math.sin(C))*(s+E/4*((o=Math.cos(C))*(2*s*s-1)-E/6*s*(4*a*a-3)*(4*s*s-3)));var I=_*a-j*o*y,k=Math.atan2(_*o+j*a*y,(1-m)*Math.sqrt(S+I*I)),F=Math.atan2(a*g,j*o-_*a*y),R=m/16*M*(4+m*(4-3*M)),D=k/c.d,L=(h+(F-(1-R)*m*x*(C+R*a*(s+R*o*(2*s*s-1)))))/c.d;return e[0]=L,e[1]=D,e}function m(e,t,r,i){var n,a,o,s,l,d,h,p,f,b,v=t[0]*c.d,m=t[1]*c.d,g=r[0]*c.d,y=r[1]*c.d,{a:O,b:j,f:_,radius:w}=u(i),x=g-v,S=Math.atan((1-_)*Math.tan(m)),M=Math.atan((1-_)*Math.tan(y)),T=Math.sin(S),P=Math.cos(S),E=Math.sin(M),C=Math.cos(M),A=1e3,I=x;do{if(h=Math.sin(I),p=Math.cos(I),0===(o=Math.sqrt(C*h*(C*h)+(P*E-T*C*p)*(P*E-T*C*p))))return e.distance=0,e.azimuth=void 0,e.reverseAzimuth=void 0,e;l=T*E+P*C*p,d=Math.atan2(o,l),s=l-2*T*E/(a=1-(f=P*C*h/o)*f),isNaN(s)&&(s=0),n=I,I=x+(1-(b=_/16*a*(4+_*(4-3*a))))*_*f*(d+b*o*(s+b*l*(2*s*s-1)))}while(Math.abs(I-n)>1e-12&&--A>0);if(0===A){var k=w,F=Math.acos(Math.sin(m)*Math.sin(y)+Math.cos(m)*Math.cos(y)*Math.cos(g-v))*k,R=g-v,D=Math.sin(R)*Math.cos(y),L=Math.cos(m)*Math.sin(y)-Math.sin(m)*Math.cos(y)*Math.cos(R),N=Math.atan2(D,L);return e.azimuth=N/c.d,e.distance=F,e.reverseAzimuth=void 0,e}var V=a*(O*O-j*j)/(j*j),z=V/1024*(256+V*(V*(74-47*V)-128)),G=j*(1+V/16384*(4096+V*(V*(320-175*V)-768)))*(d-z*o*(s+z/4*(l*(2*s*s-1)-z/6*s*(4*o*o-3)*(4*s*s-3)))),U=Math.atan2(C*Math.sin(I),P*E-T*C*Math.cos(I)),q=Math.atan2(P*Math.sin(I),P*E*Math.cos(I)-T*C);return e.azimuth=U/c.d,e.distance=G,e.reverseAzimuth=q/c.d,e}},,,function(e,t,r){"use strict";r.d(t,"a",(function(){return H})),r.d(t,"b",(function(){return q}));var i,n,a,o,s,c,l,u,d,h,p,f,b,v,m,g,y,O,j,_,w,x,S,M,T,P,E,C,A=r(120),I=r(119),k=r(254),F=r(358),R=r(249),D=r(308),L=r(333),N=r(280),V=r(627),z=r(490),G=r(599),U=r(551);function q(e){var t=new k.a;t.extensions.add("GL_OES_standard_derivatives"),t.include(U.a),t.include(V.a,e),t.include(G.a,e),1===e.output&&t.include(z.a,e),t.vertex.uniforms.add("proj","mat4").add("view","mat4").add("cameraNearFar","vec2").add("pixelRatio","float").add("miterLimit","float").add("screenSize","vec2"),t.attributes.add("position","vec3"),t.attributes.add("subdivisionFactor","float"),t.attributes.add("uv0","vec2"),t.attributes.add("auxpos1","vec3"),t.attributes.add("auxpos2","vec3"),t.varyings.add("vColor","vec4"),t.varyings.add("vpos","vec3"),t.varyings.add("linearDepth","float"),e.multipassTerrainEnabled&&t.varyings.add("depth","float");var r=e.falloffEnabled,q=e.innerColorEnabled;return q&&t.varyings.add("vLineDistance","float"),r&&t.varyings.add("vLineDistanceNorm","float"),e.falloffEnabled&&t.fragment.uniforms.add("falloff","float"),e.innerColorEnabled&&(t.fragment.uniforms.add("innerColor","vec4"),t.fragment.uniforms.add("innerWidth","float")),t.vertex.code.add(Object(I.a)(i||(i=Object(A.a)(["\n\t\t#define PERPENDICULAR(v) vec2(v.y, -v.x);\n\t\t#define ISOUTSIDE (left.x * right.y - left.y * right.x)*uv0.y > 0.0\n\n\t\tfloat interp(float ncp, vec4 a, vec4 b) {\n\t\t\treturn (-ncp - a.z) / (b.z - a.z);\n\t\t}\n\n\t\tvec2 rotate(vec2 v, float a) {\n\t\t\tfloat s = sin(a);\n\t\t\tfloat c = cos(a);\n\t\t\tmat2 m = mat2(c, -s, s, c);\n\t\t\treturn m * v;\n\t\t}\n"])))),t.vertex.code.add(Object(I.a)(n||(n=Object(A.a)(["\n    vec4 projectAndScale(vec4 pos) {\n      vec4 posNdc = proj * pos;\n\n      // Note that posNdc is in -1:1, scaling by screenSize converts this to a coordinate system\n      // that is twice scaled (going from -size:size).\n      posNdc.xy *= screenSize / posNdc.w;\n      return posNdc;\n    }\n"])))),t.vertex.code.add(Object(I.a)(a||(a=Object(A.a)(["\n    void clipAndTransform(inout vec4 pos, inout vec4 prev, inout vec4 next, in bool isStartVertex) {\n      float vnp = cameraNearFar[0] * 0.99;\n\n      //current pos behind ncp --\x3e we need to clip\n      if(pos.z > -cameraNearFar[0]) {\n        if (!isStartVertex) {\n          //previous in front of ncp\n          if(prev.z < -cameraNearFar[0]) {\n            pos = mix(prev, pos, interp(vnp, prev, pos));\n            next = pos;\n          } else {\n            pos = vec4(0.0, 0.0, 0.0, 1.0);\n          }\n        }\n        //next in front of ncp\n        if(isStartVertex) {\n          if(next.z < -cameraNearFar[0]) {\n            pos = mix(pos, next, interp(vnp, pos, next));\n            prev = pos;\n          } else {\n            pos = vec4(0.0, 0.0, 0.0, 1.0);\n          }\n        }\n      } else {\n        //current position visible\n        //previous behind ncp\n        if (prev.z > -cameraNearFar[0]) {\n          prev = mix(pos, prev, interp(vnp, pos, prev));\n        }\n        //next behind ncp\n        if (next.z > -cameraNearFar[0]) {\n          next = mix(next, pos, interp(vnp, next, pos));\n        }\n      }\n\n      ","\n      linearDepth = (-pos.z - cameraNearFar[0]) / (cameraNearFar[1] - cameraNearFar[0]);\n\n      pos = projectAndScale(pos);\n      next = projectAndScale(next);\n      prev = projectAndScale(prev);\n    }\n"])),e.multipassTerrainEnabled?"depth = pos.z;":"")),t.vertex.code.add(Object(I.a)(o||(o=Object(A.a)(["\n  void main(void) {\n    float coverage = 1.0;\n    vpos = position;\n\n    // Check for special value of uv0.y which is used by the Renderer when graphics\n    // are removed before the VBO is recompacted. If this is the case, then we just\n    // project outside of clip space.\n    if (uv0.y == 0.0) {\n      // Project out of clip space\n      gl_Position = vec4(1e038, 1e038, 1e038, 1.0);\n    }\n    else {\n      bool isStartVertex = abs(abs(uv0.y)-3.0) == 1.0;\n      bool isJoin = abs(uv0.y)-3.0 < 0.0;\n\n      float lineWidth = getSize() * pixelRatio;\n\n      // convert sub-pixel coverage to alpha\n      if (lineWidth < 1.0) {\n        coverage = lineWidth;\n        lineWidth = 1.0;\n      }else{\n        // Ribbon lines cannot properly render non-integer sizes. Round width to integer size if\n        // larger than one for better quality. Note that we do render < 1 pixels more or less correctly\n        // so we only really care to round anything larger than 1.\n        lineWidth = floor(lineWidth + 0.5);\n      }\n\n      vec4 pos  = view * vec4(position.xyz, 1.0);\n      vec4 prev = view * vec4(auxpos1.xyz, 1.0);\n      vec4 next = view * vec4(auxpos2.xyz, 1.0);\n\n      clipAndTransform(pos, prev, next, isStartVertex);\n\n      vec2 left = (pos.xy - prev.xy);\n      vec2 right = (next.xy - pos.xy);\n\n      float leftLen = length(left);\n      float rightLen = length(right);\n  "])))),e.stippleEnabled&&t.vertex.code.add(Object(I.a)(s||(s=Object(A.a)(["\n      // uv0.x is either 0 or 1, depending on whether this is considered the start of a line segment\n      // or the end. If start, then use pos->next, otherwise use prev->pos to define the line segment\n      // vector\n      vec4 stippleSegmentInfo = mix(vec4(pos.xy, right), vec4(prev.xy, left), uv0.x);\n      vec2 stippleSegmentOrigin = stippleSegmentInfo.xy;\n\n      // Scale s.t. it's in units of stipple pattern size.\n      vec2 stippleSegmentDirection = stippleSegmentInfo.zw;\n    "])))),t.vertex.code.add(Object(I.a)(c||(c=Object(A.a)(['\n    left = (leftLen > 0.001) ? left/leftLen : vec2(0.0, 0.0);\n    right = (rightLen > 0.001) ? right/rightLen : vec2(0.0, 0.0);\n\n    vec2 capDisplacementDir = vec2(0, 0);\n    vec2 joinDisplacementDir = vec2(0, 0);\n    float displacementLen = lineWidth;\n\n    if (isJoin) {\n\n      // JOIN handling ---------------------------------------------------\n      // determine if vertex is on the "outside or "inside" of the join\n      bool isOutside = ISOUTSIDE;\n\n      // compute miter join position first\n      joinDisplacementDir = normalize(left + right);\n      joinDisplacementDir = PERPENDICULAR(joinDisplacementDir);\n\n      // compute miter stretch\n      if (leftLen > 0.001 && rightLen > 0.001) {\n        float nDotSeg = dot(joinDisplacementDir, left);\n        displacementLen /= length(nDotSeg * left - joinDisplacementDir);\n\n        // limit displacement of inner vertices\n        if (!isOutside) {\n          displacementLen = min(displacementLen, min(leftLen, rightLen)/abs(nDotSeg));\n        }\n      }\n\n      if (isOutside && (displacementLen > miterLimit * lineWidth)) {\n    '])))),e.roundJoins?t.vertex.code.add(Object(I.a)(l||(l=Object(A.a)(["\n        vec2 startDir;\n        vec2 endDir;\n\n        if (leftLen < 0.001) {\n          startDir = right;\n        }\n        else{\n          startDir = left;\n        }\n        startDir = normalize(startDir);\n        startDir = PERPENDICULAR(startDir);\n\n        if (rightLen < 0.001) {\n          endDir = left;\n        }\n        else{\n          endDir = right;\n        }\n        endDir = normalize(endDir);\n        endDir = PERPENDICULAR(endDir);\n\n        float rotationAngle = acos(clamp(dot(startDir, endDir), -1.0, 1.0));\n        joinDisplacementDir = rotate(startDir, -sign(uv0.y) * subdivisionFactor * rotationAngle);\n      "])))):t.vertex.code.add(Object(I.a)(u||(u=Object(A.a)(["\n        // convert to bevel join if miterLimit is exceeded\n        if (leftLen < 0.001) {\n          joinDisplacementDir = right;\n        }\n        else if (rightLen < 0.001) {\n          joinDisplacementDir = left;\n        }\n        else {\n          joinDisplacementDir = isStartVertex ? right : left;\n        }\n        joinDisplacementDir = normalize(joinDisplacementDir);\n        joinDisplacementDir = PERPENDICULAR(joinDisplacementDir);\n  "])))),t.vertex.code.add(Object(I.a)(d||(d=Object(A.a)(["\n        displacementLen = lineWidth;\n      }\n    } else {\n    // CAP handling ---------------------------------------------------\n    if (leftLen < 0.001) {\n      joinDisplacementDir = right;\n    }\n    else if (rightLen < 0.001) {\n      joinDisplacementDir = left;\n    }\n    else {\n      joinDisplacementDir = isStartVertex ? right : left;\n    }\n    joinDisplacementDir = normalize(joinDisplacementDir);\n    joinDisplacementDir = PERPENDICULAR(joinDisplacementDir);\n    displacementLen = lineWidth;\n\n    capDisplacementDir = isStartVertex ? -right : left;\n  "])))),e.roundCaps?t.vertex.code.add(Object(I.a)(h||(h=Object(A.a)(["\n    float angle = subdivisionFactor*PI*0.5;\n    joinDisplacementDir *= cos(angle);\n    capDisplacementDir *= sin(angle);\n    "])))):t.vertex.code.add(Object(I.a)(p||(p=Object(A.a)(["\n    capDisplacementDir *= subdivisionFactor;\n    "])))),t.vertex.code.add(Object(I.a)(f||(f=Object(A.a)(["\n  }\n\n  // Displacement (in pixels) caused by join/or cap\n  vec2 dpos = joinDisplacementDir * sign(uv0.y) * displacementLen + capDisplacementDir * displacementLen;\n\n  ","\n\n  ","\n  ","\n\n  pos.xy += dpos;\n  "])),r||q?Object(I.a)(b||(b=Object(A.a)(["float lineDist = lineWidth * sign(uv0.y) * pos.w;"]))):"",q?Object(I.a)(v||(v=Object(A.a)(["vLineDistance = lineDist;"]))):"",r?Object(I.a)(m||(m=Object(A.a)(["vLineDistanceNorm = lineDist / lineWidth;"]))):"")),e.stippleEnabled&&(t.vertex.code.add(Object(I.a)(g||(g=Object(A.a)(["\n    {\n      // Compute the stipple pattern UV coordinate from the actual position, based on the origin\n      // and direction of the line segment on which the stipple pattern is based.\n\n      // Project the vector from the origin of the segment to the vertex onto the line segment.\n      // Note the 0.5 factor due to projected positions being at twice the screen size scale (see projectAndScale)\n      vec2 posVec = pos.xy - stippleSegmentOrigin;\n\n      float stippleSegmentDirectionLength = length(stippleSegmentDirection);\n    "])))),e.stippleIntegerRepeatsEnabled&&t.vertex.code.add(Object(I.a)(y||(y=Object(A.a)(["\n      float numberOfPatternRepeats = stippleSegmentDirectionLength * 0.5 * stipplePatternPixelSizeInv;\n      float roundedNumberOfPatternRepeats = floor(numberOfPatternRepeats);\n      stipplePatternUvMax = roundedNumberOfPatternRepeats;\n      "])))),t.vertex.code.add(Object(I.a)(O||(O=Object(A.a)(["\n      if (stippleSegmentDirectionLength >= 0.001) {\n        // Project the vertex position onto the line segment.\n        float projectedLength = dot(stippleSegmentDirection, posVec) / stippleSegmentDirectionLength * 0.5;\n     ","\n        stipplePatternUv = projectedLength * wholeNumberOfRepeatsScale * stipplePatternPixelSizeInv * pos.w;\n        } else {\n          stipplePatternUv = 1.0;\n        }\n      }\n    "])),e.stippleIntegerRepeatsEnabled?"float wholeNumberOfRepeatsScale = roundedNumberOfPatternRepeats / numberOfPatternRepeats;":"float wholeNumberOfRepeatsScale = 1.0;"))),t.vertex.code.add(Object(I.a)(j||(j=Object(A.a)(["\n      // Convert back into NDC\n      pos.xy = pos.xy / screenSize * pos.w;\n\n      vColor = getColor();\n      vColor.a *= coverage;\n\n      gl_Position = pos;\n    }\n  }\n  "])))),e.multipassTerrainEnabled&&(t.fragment.include(D.a),t.include(N.b,e)),t.include(R.a,e),t.fragment.uniforms.add("intrinsicColor","vec4"),t.fragment.include(F.a),t.fragment.code.add(Object(I.a)(_||(_=Object(A.a)(["\n  void main() {\n    discardBySlice(vpos);\n    ","\n    float stippleAlpha = getStippleAlpha();\n    discardByStippleAlpha(stippleAlpha, stippleAlphaColorDiscard);\n\n    vec4 color = intrinsicColor * vColor;\n  "])),e.multipassTerrainEnabled?"terrainDepthTest(gl_FragCoord, depth);":"")),e.innerColorEnabled&&(t.fragment.uniforms.add("pixelRatio","float"),t.fragment.code.add(Object(I.a)(w||(w=Object(A.a)(["\n    float distToInner = abs(vLineDistance * gl_FragCoord.w) - innerWidth;\n    float innerAA = clamp(0.5 - distToInner, 0.0, 1.0);\n    float innerAlpha = innerColor.a + color.a * (1.0 - innerColor.a);\n    color = mix(color, vec4(innerColor.rgb, innerAlpha), innerAA);\n    "]))))),t.fragment.code.add(Object(I.a)(x||(x=Object(A.a)(["\n    vec4 finalColor = blendStipple(color, stippleAlpha);\n  "])))),e.falloffEnabled&&t.fragment.code.add(Object(I.a)(S||(S=Object(A.a)(["\n    finalColor.a *= pow(max(0.0, 1.0 - abs(vLineDistanceNorm * gl_FragCoord.w)), falloff);\n    "])))),t.fragment.code.add(Object(I.a)(M||(M=Object(A.a)(["\n    if (finalColor.a < ",") {\n      discard;\n    }\n\n    ","\n    ","\n    ","\n    ","\n    ","\n  }\n  "])),I.a.float(L.c),7===e.output?Object(I.a)(T||(T=Object(A.a)(["gl_FragColor = vec4(finalColor.a);"]))):"",0===e.output?Object(I.a)(P||(P=Object(A.a)(["gl_FragColor = highlightSlice(finalColor, vpos);"]))):"",0===e.output&&e.OITEnabled?"gl_FragColor = premultiplyAlpha(gl_FragColor);":"",4===e.output?Object(I.a)(E||(E=Object(A.a)(["gl_FragColor = vec4(1.0);"]))):"",1===e.output?Object(I.a)(C||(C=Object(A.a)(["outputDepth(linearDepth);"]))):"")),t}var H=Object.freeze({__proto__:null,build:q})},function(e,t,r){"use strict";r.d(t,"a",(function(){return u})),r.d(t,"b",(function(){return l}));var i,n,a=r(120),o=r(119),s=r(254),c=r(525);function l(e){var t=new s.a;return t.include(c.a,e),t.vertex.uniforms.add("uModelViewMatrix","mat4"),t.vertex.uniforms.add("uProjectionMatrix","mat4"),t.attributes.add("start","vec3"),t.attributes.add("end","vec3"),t.attributes.add("up","vec3"),t.attributes.add("extrude","vec2"),t.varyings.add("uv","vec2"),t.varyings.add("vViewStart","vec3"),t.varyings.add("vViewEnd","vec3"),t.varyings.add("vViewPlane","vec4"),t.vertex.uniforms.add("glowWidth","float"),t.vertex.uniforms.add("pixelToNDC","vec2"),t.vertex.code.add(Object(o.a)(i||(i=Object(a.a)(["\n  void main() {\n    vec3 pos = mix(start, end, extrude.x);\n\n    vec4 viewPos = uModelViewMatrix * vec4(pos, 1);\n    vec4 projPos = uProjectionMatrix * viewPos;\n    vec2 ndcPos = projPos.xy / projPos.w;\n\n    vec3 viewUp = (uModelViewMatrix * vec4(extrude.y * up, 0)).xyz;\n    vec4 projPosUp = uProjectionMatrix * vec4(viewPos.xyz + viewUp, 1);\n    vec2 projExtrudeDir = normalize(projPosUp.xy / projPosUp.w - ndcPos);\n\n    vec2 lxy = abs(sign(projExtrudeDir) - ndcPos);\n    ndcPos += length(lxy) * projExtrudeDir;\n\n    vec3 worldPlaneNormal = normalize(cross(up, normalize(end - start)));\n    vec3 viewPlaneNormal = (uModelViewMatrix * vec4(worldPlaneNormal, 0)).xyz;\n\n    vViewStart = (uModelViewMatrix * vec4(start, 1)).xyz;\n    vViewEnd = (uModelViewMatrix * vec4(end, 1)).xyz;\n    vViewPlane = vec4(viewPlaneNormal, -dot(viewPlaneNormal, vViewStart));\n\n    // Add enough padding in the X screen space direction for glow\n    float xPaddingPixels = sign(dot(viewPlaneNormal, viewPos.xyz)) * (extrude.x * 2.0 - 1.0) * glowWidth;\n    ndcPos.x += xPaddingPixels * pixelToNDC.x;\n\n    uv = ndcPos * 0.5 + 0.5;\n    gl_Position = vec4(ndcPos, 0, 1);\n  }\n  "])))),t.fragment.uniforms.add("globalAlpha","float"),t.fragment.uniforms.add("perScreenPixelRatio","float"),t.fragment.code.add(Object(o.a)(n||(n=Object(a.a)(["\n  float planeDistancePixels(vec4 plane, vec3 pos, vec3 start, vec3 end) {\n    vec3 origin = mix(start, end, 0.5);\n    vec3 basis = end - origin;\n    vec3 posAtOrigin = pos - origin;\n\n    float x = dot(normalize(basis), posAtOrigin);\n    float y = dot(plane.xyz, posAtOrigin);\n\n    float dx = max(abs(x) - length(basis), 0.0);\n    float dy = y;\n\n    float dist = length(vec2(dx, dy));\n\n    float width = fwidth(y);\n    float maxPixelDistance = length(pos) * perScreenPixelRatio * 2.0;\n    float pixelDist = dist / min(width, maxPixelDistance);\n    return abs(pixelDist);\n  }\n\n  void main() {\n    vec3 pos;\n    vec3 normal;\n    float depthDiscontinuityAlpha;\n\n    if (!laserlineReconstructFromDepth(pos, normal, depthDiscontinuityAlpha)) {\n      discard;\n    }\n\n    float distance = planeDistancePixels(vViewPlane, pos, vViewStart, vViewEnd);\n\n    vec4 color = laserlineProfile(distance);\n    float alpha = 1.0 - smoothstep(0.995, 0.999, abs(dot(normal, vViewPlane.xyz)));\n\n    gl_FragColor = laserlineOutput(color * alpha * depthDiscontinuityAlpha);\n  }\n  "])))),t}var u=Object.freeze({__proto__:null,build:l})},function(e,t,r){"use strict";r.d(t,"a",(function(){return i}));var i={DIFFUSE:0,NORMAL:1,EMISSION:2,OCCLUSION:3,METALLIC_ROUGHNESS:4,SSAO:6,SHADOW_MAP:7}},function(e,t,r){"use strict";r.d(t,"a",(function(){return h}));var i,n,a,o,s,c,l=r(120),u=r(119),d=r(487);function h(e,t){var r=e.vertex.code;t.verticalOffsetEnabled?(e.vertex.uniforms.add("verticalOffset","vec4"),t.screenSizePerspectiveEnabled&&(e.include(d.a),e.vertex.uniforms.add("screenSizePerspectiveAlignment","vec4")),r.add(Object(u.a)(i||(i=Object(l.a)(["\n    vec3 calculateVerticalOffset(vec3 worldPos, vec3 localOrigin) {\n      float viewDistance = length((view * vec4(worldPos, 1.0)).xyz);\n      ","\n      ","\n      // Screen sized offset in world space, used for example for line callouts\n      float worldOffset = clamp(verticalOffsetScreenHeight * verticalOffset.y * viewDistance, verticalOffset.z, verticalOffset.w);\n      return worldNormal * worldOffset;\n    }\n\n    vec3 addVerticalOffset(vec3 worldPos, vec3 localOrigin) {\n      return worldPos + calculateVerticalOffset(worldPos, localOrigin);\n    }\n    "])),1===t.viewingMode?Object(u.a)(n||(n=Object(l.a)(["vec3 worldNormal = normalize(worldPos + localOrigin);"]))):Object(u.a)(a||(a=Object(l.a)(["vec3 worldNormal = vec3(0.0, 0.0, 1.0);"]))),t.screenSizePerspectiveEnabled?Object(u.a)(o||(o=Object(l.a)(["\n          float cosAngle = dot(worldNormal, normalize(worldPos - camPos));\n          float verticalOffsetScreenHeight = screenSizePerspectiveScaleFloat(verticalOffset.x, abs(cosAngle), viewDistance, screenSizePerspectiveAlignment);"]))):Object(u.a)(s||(s=Object(l.a)(["\n          float verticalOffsetScreenHeight = verticalOffset.x;"])))))):r.add(Object(u.a)(c||(c=Object(l.a)(["\n    vec3 addVerticalOffset(vec3 worldPos, vec3 localOrigin) { return worldPos; }\n    "]))))}function p(e,t,r,i=f){return i.screenLength=e.screenLength,i.perDistance=Math.tan(.5*t)/(.5*r),i.minWorldLength=e.minWorldLength,i.maxWorldLength=e.maxWorldLength,i}(h||(h={})).bindUniforms=function(e,t,r){if(t.verticalOffset){var i=p(t.verticalOffset,r.camera.fovY,r.camera.fullViewport[3]),n=r.camera.pixelRatio||1;e.setUniform4f("verticalOffset",i.screenLength*n,i.perDistance,i.minWorldLength,i.maxWorldLength)}};var f={screenLength:0,perDistance:0,minWorldLength:0,maxWorldLength:0}},function(e,t,r){"use strict";r.d(t,"a",(function(){return x})),r.d(t,"b",(function(){return w}));var i,n,a,o,s,c,l,u,d=r(120),h=r(119),p=r(413),f=r(254),b=r(358),v=r(249),m=r(308),g=r(322),y=r(333),O=r(280),j=r(490),_=r(518);function w(e){var t=new f.a,r=1===e.output;return t.include(p.a,{linearDepth:r}),t.include(_.a,e),t.vertex.uniforms.add("proj","mat4").add("view","mat4"),t.attributes.add("position","vec3"),t.varyings.add("vpos","vec3"),e.multipassTerrainEnabled&&t.varyings.add("depth","float"),r&&(t.include(j.a,e),t.vertex.uniforms.add("cameraNearFar","vec2"),t.varyings.add("linearDepth","float")),t.vertex.code.add(Object(h.a)(i||(i=Object(d.a)(["\n    void main(void) {\n      vpos = position;\n      forwardNormalizedVertexColor();\n      ","\n      gl_Position = ","\n    }\n  "])),e.multipassTerrainEnabled?"depth = (view * vec4(vpos, 1.0)).z;":"",r?Object(h.a)(n||(n=Object(d.a)(["transformPositionWithDepth(proj, view, vpos, cameraNearFar, linearDepth);"]))):Object(h.a)(a||(a=Object(d.a)(["transformPosition(proj, view, vpos);"]))))),t.include(v.a,e),t.fragment.include(b.a),e.multipassTerrainEnabled&&(t.fragment.include(m.a),t.include(O.b,e)),t.fragment.uniforms.add("eColor","vec4"),4===e.output&&t.include(g.a),t.fragment.code.add(Object(h.a)(o||(o=Object(d.a)(["\n  void main() {\n    discardBySlice(vpos);\n    ","\n    vec4 color = ","\n\n    if (color.a < ",") {\n      discard;\n    }\n\n    ","\n\n    ","\n    ",";\n    ",";\n  }\n  "])),e.multipassTerrainEnabled?"terrainDepthTest(gl_FragCoord, depth);":"",e.attributeColor?"vColor * eColor;":"eColor;",h.a.float(y.c),7===e.output?Object(h.a)(s||(s=Object(d.a)(["gl_FragColor = vec4(color.a);"]))):"",0===e.output?Object(h.a)(c||(c=Object(d.a)(["gl_FragColor = highlightSlice(color, vpos); ",""])),e.OITEnabled?"gl_FragColor = premultiplyAlpha(gl_FragColor);":""):"",4===e.output?Object(h.a)(l||(l=Object(d.a)(["outputHighlight();"]))):"",1===e.output?Object(h.a)(u||(u=Object(d.a)(["outputDepth(linearDepth);"]))):"")),t}var x=Object.freeze({__proto__:null,build:w})},function(e,t,r){"use strict";r.d(t,"a",(function(){return i}));class i{constructor(e,t,r){this.coordinateHelper=e,this.targetPoint=t,this.constraint=r}}},,,,,,function(e,t,r){"use strict";r.d(t,"a",(function(){return m})),r.d(t,"b",(function(){return h})),r.d(t,"c",(function(){return g})),r.d(t,"d",(function(){return y})),r.d(t,"e",(function(){return O})),r.d(t,"f",(function(){return o})),r.d(t,"g",(function(){return a})),r.d(t,"h",(function(){return d})),r.d(t,"i",(function(){return p})),r.d(t,"j",(function(){return E}));var i,n,a,o,s,c=r(80),l=r(162),u=null;function d(){return!!u}function h(){return!!Object(c.a)("esri-wasm")}function p(){return i||(i=Promise.all([r.e(195),r.e(270)]).then(r.bind(null,785)).then((function(e){return e.p})).then((({default:e})=>e({locateFile:e=>Object(l.a)("esri/geometry/support/".concat(e))}))).then((e=>{x(e)})))}!function(e){function t(e,t,r){u.ensureCache.prepare();var i=T(r),n=r===i,a=u.ensureFloat64(i),o=u._pe_geog_to_proj(u.getPointer(e),t,a);return o&&P(r,t,a,n),o}function r(e,t,r){return i(e,t,r,0)}function i(e,t,r,i){u.ensureCache.prepare();var n=T(r),a=r===n,o=u.ensureFloat64(n),s=u._pe_proj_to_geog_center(u.getPointer(e),t,o,i);return s&&P(r,t,o,a),s}e.geogToProj=t,e.projGeog=function(e,i,n,o){switch(o){case a.PE_TRANSFORM_P_TO_G:return r(e,i,n);case a.PE_TRANSFORM_G_TO_P:return t(e,i,n)}return 0},e.projToGeog=r,e.projToGeogCenter=i}(n||(n={})),(s=a||(a={})).init=function(){s.PE_BUFFER_MAX=u.PeDefs.prototype.PE_BUFFER_MAX,s.PE_NAME_MAX=u.PeDefs.prototype.PE_NAME_MAX,s.PE_MGRS_MAX=u.PeDefs.prototype.PE_MGRS_MAX,s.PE_USNG_MAX=u.PeDefs.prototype.PE_USNG_MAX,s.PE_DD_MAX=u.PeDefs.prototype.PE_DD_MAX,s.PE_DDM_MAX=u.PeDefs.prototype.PE_DDM_MAX,s.PE_DMS_MAX=u.PeDefs.prototype.PE_DMS_MAX,s.PE_UTM_MAX=u.PeDefs.prototype.PE_UTM_MAX,s.PE_PARM_MAX=u.PeDefs.prototype.PE_PARM_MAX,s.PE_TYPE_NONE=u.PeDefs.prototype.PE_TYPE_NONE,s.PE_TYPE_GEOGCS=u.PeDefs.prototype.PE_TYPE_GEOGCS,s.PE_TYPE_PROJCS=u.PeDefs.prototype.PE_TYPE_PROJCS,s.PE_TYPE_GEOGTRAN=u.PeDefs.prototype.PE_TYPE_GEOGTRAN,s.PE_TYPE_COORDSYS=u.PeDefs.prototype.PE_TYPE_COORDSYS,s.PE_TYPE_UNIT=u.PeDefs.prototype.PE_TYPE_UNIT,s.PE_TYPE_LINUNIT=u.PeDefs.prototype.PE_TYPE_LINUNIT,s.PE_STR_OPTS_NONE=u.PeDefs.prototype.PE_STR_OPTS_NONE,s.PE_STR_AUTH_NONE=u.PeDefs.prototype.PE_STR_AUTH_NONE,s.PE_STR_AUTH_TOP=u.PeDefs.prototype.PE_STR_AUTH_TOP,s.PE_STR_NAME_CANON=u.PeDefs.prototype.PE_STR_NAME_CANON,s.PE_PARM_X0=u.PeDefs.prototype.PE_PARM_X0,s.PE_PARM_ND=u.PeDefs.prototype.PE_PARM_ND,s.PE_TRANSFORM_1_TO_2=u.PeDefs.prototype.PE_TRANSFORM_1_TO_2,s.PE_TRANSFORM_2_TO_1=u.PeDefs.prototype.PE_TRANSFORM_2_TO_1,s.PE_TRANSFORM_P_TO_G=u.PeDefs.prototype.PE_TRANSFORM_P_TO_G,s.PE_TRANSFORM_G_TO_P=u.PeDefs.prototype.PE_TRANSFORM_G_TO_P,s.PE_HORIZON_RECT=u.PeDefs.prototype.PE_HORIZON_RECT,s.PE_HORIZON_POLY=u.PeDefs.prototype.PE_HORIZON_POLY,s.PE_HORIZON_LINE=u.PeDefs.prototype.PE_HORIZON_LINE,s.PE_HORIZON_DELTA=u.PeDefs.prototype.PE_HORIZON_DELTA},function(e){var t={},r={},i=e=>{if(e){var t=e.getType();switch(t){case a.PE_TYPE_GEOGCS:e=u.castObject(e,u.PeGeogcs);break;case a.PE_TYPE_PROJCS:e=u.castObject(e,u.PeProjcs);break;case a.PE_TYPE_GEOGTRAN:e=u.castObject(e,u.PeGeogtran);break;default:t&a.PE_TYPE_UNIT&&(e=u.castObject(e,u.PeUnit))}}return e};function n(e,r){var n=null,a=t[e];if(a||(a={},t[e]=a),a.hasOwnProperty(String(r)))n=a[r];else{var o=u.PeFactory.prototype.factoryByType(e,r);u.compare(o,u.NULL)||(n=o,a[r]=n)}return n=i(n)}e.initialize=function(){u.PeFactory.prototype.initialize(null)},e.coordsys=function(e){return n(a.PE_TYPE_COORDSYS,e)},e.factoryByType=n,e.fromString=function(e,t){var n=null,a=r[e];if(a||(a={},r[e]=a),a.hasOwnProperty(t))n=a[t];else{var o=u.PeFactory.prototype.fromString(e,t);u.compare(o,u.NULL)||(n=o,a[t]=n)}return n=i(n)},e.geogcs=function(e){return n(a.PE_TYPE_GEOGCS,e)},e.geogtran=function(e){return n(a.PE_TYPE_GEOGTRAN,e)},e.getCode=function(e){return u.PeFactory.prototype.getCode(e)},e.projcs=function(e){return n(a.PE_TYPE_PROJCS,e)},e.unit=function(e){return n(a.PE_TYPE_UNIT,e)}}(o||(o={}));var f,b,v,m,g,y,O,j,_,w=null;function x(e){function t(e,t,r){e[t]=r(e[t])}u=e,a.init(),f.init(),g.init(),O.init(),j.init(),w=class extends u.PeGCSExtent{destroy(){u.destroy(this)}};var r=[u.PeDatum,u.PeGeogcs,u.PeGeogtran,u.PeObject,u.PeParameter,u.PePrimem,u.PeProjcs,u.PeSpheroid,u.PeUnit];for(var i of r)t(i.prototype,"getName",(e=>function(){return e.call(this,new Array(a.PE_NAME_MAX))}));for(var n of[u.PeGeogtran,u.PeProjcs])t(n.prototype,"getParameters",(e=>function(){for(var t=new Array(a.PE_PARM_MAX),r=e.call(this),i=0;i<t.length;i++){var n=u.getValue(r,"*");t[i]=n?u.wrapPointer(n,u.PeParameter):null,r+=Int32Array.BYTES_PER_ELEMENT}return t}));t(u.PeHorizon.prototype,"getCoord",(e=>function(){var t=this.getSize();if(!t)return null;var r=[];return P(r,t,e.call(this)),r})),t(u.PeGTlistExtendedEntry.prototype,"getEntries",(e=>{var t=u._pe_getPeGTlistExtendedGTsSize();return function(){var r=null,i=e.call(this);if(!u.compare(i,u.NULL)){r=[i];var n=this.getSteps();if(n>1)for(var a=u.getPointer(i),o=1;o<n;o++)r.push(u.wrapPointer(a+t*o,u.PeGTlistExtendedGTs))}return r}}));var o=u._pe_getPeHorizonSize(),s=e=>function(){var t=this._cache;if(t||(t=new Map,this._cache=t),t.has(e))return t.get(e);var r=null,i=e.call(this);if(!u.compare(i,u.NULL)){r=[i];var n=i.getNump();if(n>1)for(var a=u.getPointer(i),s=1;s<n;s++)r.push(u.wrapPointer(a+o*s,u.PeHorizon))}return t.set(e,r),r};t(u.PeProjcs.prototype,"horizonGcsGenerate",s),t(u.PeProjcs.prototype,"horizonPcsGenerate",s),u.PeObject.prototype.toString=function(e=a.PE_STR_OPTS_NONE){u.ensureCache.prepare();var t=u.getPointer(this),r=u.ensureInt8(new Array(a.PE_BUFFER_MAX));return u.UTF8ToString(u._pe_object_to_string_ext(t,e,r))}}function S(e){if(e){var t=u.getClass(e);if(t){var r=u.getCache(t);if(r){var i=u.getPointer(e);i&&delete r[i]}}}}function M(e,t){for(var r=[],i=new Array(t),n=0;n<e;n++)r.push(u.ensureInt8(i));return r}function T(e){var t;return Array.isArray(e[0])?(t=[],e.forEach((e=>{t.push(e[0],e[1])}))):t=e,t}function P(e,t,r,i=!1){if(i)for(var n=0;n<2*t;n++)e[n]=u.getValue(r+n*Float64Array.BYTES_PER_ELEMENT,"double");else for(var a=0===e.length,o=0;o<t;o++)a&&(e[o]=new Array(2)),e[o][0]=u.getValue(r,"double"),e[o][1]=u.getValue(r+Float64Array.BYTES_PER_ELEMENT,"double"),r+=2*Float64Array.BYTES_PER_ELEMENT}!function(e){var t;e.init=function(){e.PE_GTLIST_OPTS_COMMON=u.PeGTlistExtended.prototype.PE_GTLIST_OPTS_COMMON,t=u._pe_getPeGTlistExtendedEntrySize()},e.getGTlist=function(e,r,i,n,a,o){var s=null,c=new u.PeInteger(o);try{var l=u.PeGTlistExtended.prototype.getGTlist(e,r,i,n,a,c);if((o=c.val)&&(s=[l],o>1))for(var d=u.getPointer(l),h=1;h<o;h++)s.push(u.wrapPointer(d+t*h,u.PeGTlistExtendedEntry))}finally{u.destroy(c)}return s}}(f||(f={})),function(e){e.destroy=function(e){if(e&&e.length){for(var t of e)S(t),t.getEntries().forEach((e=>{S(e);var t=e.getGeogtran();S(t),t.getParameters().forEach(S),[t.getGeogcs1(),t.getGeogcs2()].forEach((e=>{S(e);var t=e.getDatum();S(t),S(t.getSpheroid()),S(e.getPrimem()),S(e.getUnit())}))}));u.PeGTlistExtendedEntry.prototype.Delete(e[0])}}}(b||(b={})),function(e){e.geogToGeog=function(e,t,r,i,n){u.ensureCache.prepare();var a=T(r),o=r===a,s=u.ensureFloat64(a),c=0;i&&(c=u.ensureFloat64(i));var l=u._pe_geog_to_geog(u.getPointer(e),t,s,c,n);return l&&P(r,t,s,o),l}}(v||(v={})),function(e){var t=(e,t,r,i,n,o)=>{var s,c;switch(u.ensureCache.prepare(),e){case"dd":s=u._pe_geog_to_dd,c=a.PE_DD_MAX;break;case"ddm":s=u._pe_geog_to_ddm,c=a.PE_DDM_MAX;break;case"dms":s=u._pe_geog_to_dms,c=a.PE_DMS_MAX}var l=0;t&&(l=u.getPointer(t));var d=T(i),h=u.ensureFloat64(d),p=M(r,c),f=s(l,r,h,n,u.ensureInt32(p));if(f)for(var b=0;b<r;b++)o[b]=u.UTF8ToString(p[b]);return f},r=(e,t,r,i,n)=>{var a;switch(u.ensureCache.prepare(),e){case"dd":a=u._pe_dd_to_geog;break;case"ddm":a=u._pe_ddm_to_geog;break;case"dms":a=u._pe_dms_to_geog}var o=0;t&&(o=u.getPointer(t));var s=i.map((e=>u.ensureString(e))),c=u.ensureInt32(s),l=u.ensureFloat64(new Array(2*r)),d=a(o,r,c,l);return d&&P(n,r,l),d};e.geog_to_dms=function(e,r,i,n,a){return t("dms",e,r,i,n,a)},e.dms_to_geog=function(e,t,i,n){return r("dms",e,t,i,n)},e.geog_to_ddm=function(e,r,i,n,a){return t("ddm",e,r,i,n,a)},e.ddm_to_geog=function(e,t,i,n){return r("ddm",e,t,i,n)},e.geog_to_dd=function(e,r,i,n,a){return t("dd",e,r,i,n,a)},e.dd_to_geog=function(e,t,i,n){return r("dd",e,t,i,n)}}(m||(m={})),function(e){e.init=function(){e.PE_MGRS_STYLE_NEW=u.PeNotationMgrs.prototype.PE_MGRS_STYLE_NEW,e.PE_MGRS_STYLE_OLD=u.PeNotationMgrs.prototype.PE_MGRS_STYLE_OLD,e.PE_MGRS_STYLE_AUTO=u.PeNotationMgrs.prototype.PE_MGRS_STYLE_AUTO,e.PE_MGRS_180_ZONE_1_PLUS=u.PeNotationMgrs.prototype.PE_MGRS_180_ZONE_1_PLUS,e.PE_MGRS_ADD_SPACES=u.PeNotationMgrs.prototype.PE_MGRS_ADD_SPACES},e.geog_to_mgrs_extended=function(e,t,r,i,n,o,s){u.ensureCache.prepare();var c=0;e&&(c=u.getPointer(e));var l=T(r),d=u.ensureFloat64(l),h=M(t,a.PE_MGRS_MAX),p=u.ensureInt32(h),f=u._pe_geog_to_mgrs_extended(c,t,d,i,n,o,p);if(f)for(var b=0;b<t;b++)s[b]=u.UTF8ToString(h[b]);return f},e.mgrs_to_geog_extended=function(e,t,r,i,n){u.ensureCache.prepare();var a=0;e&&(a=u.getPointer(e));var o=r.map((e=>u.ensureString(e))),s=u.ensureInt32(o),c=u.ensureFloat64(new Array(2*t)),l=u._pe_mgrs_to_geog_extended(a,t,s,i,c);return l&&P(n,t,c),l}}(g||(g={})),function(e){e.geog_to_usng=function(e,t,r,i,n,o,s){u.ensureCache.prepare();var c=0;e&&(c=u.getPointer(e));var l=T(r),d=u.ensureFloat64(l),h=M(t,a.PE_MGRS_MAX),p=u.ensureInt32(h),f=u._pe_geog_to_usng(c,t,d,i,n,o,p);if(f)for(var b=0;b<t;b++)s[b]=u.UTF8ToString(h[b]);return f},e.usng_to_geog=function(e,t,r,i){u.ensureCache.prepare();var n=0;e&&(n=u.getPointer(e));var a=r.map((e=>u.ensureString(e))),o=u.ensureInt32(a),s=u.ensureFloat64(new Array(2*t)),c=u._pe_usng_to_geog(n,t,o,s);return c&&P(i,t,s),c}}(y||(y={})),function(e){e.init=function(){e.PE_UTM_OPTS_NONE=u.PeNotationUtm.prototype.PE_UTM_OPTS_NONE,e.PE_UTM_OPTS_ADD_SPACES=u.PeNotationUtm.prototype.PE_UTM_OPTS_ADD_SPACES,e.PE_UTM_OPTS_NS=u.PeNotationUtm.prototype.PE_UTM_OPTS_NS},e.geog_to_utm=function(e,t,r,i,n){u.ensureCache.prepare();var o=0;e&&(o=u.getPointer(e));var s=T(r),c=u.ensureFloat64(s),l=M(t,a.PE_UTM_MAX),d=u.ensureInt32(l),h=u._pe_geog_to_utm(o,t,c,i,d);if(h)for(var p=0;p<t;p++)n[p]=u.UTF8ToString(l[p]);return h},e.utm_to_geog=function(e,t,r,i,n){u.ensureCache.prepare();var a=0;e&&(a=u.getPointer(e));var o=r.map((e=>u.ensureString(e))),s=u.ensureInt32(o),c=u.ensureFloat64(new Array(2*t)),l=u._pe_utm_to_geog(a,t,s,i,c);return l&&P(n,t,c),l}}(O||(O={})),function(e){var t=new Map;e.init=function(){e.PE_PCSINFO_OPTION_NONE=u.PePCSInfo.prototype.PE_PCSINFO_OPTION_NONE,e.PE_PCSINFO_OPTION_DOMAIN=u.PePCSInfo.prototype.PE_PCSINFO_OPTION_DOMAIN,e.PE_POLE_OUTSIDE_BOUNDARY=u.PePCSInfo.prototype.PE_POLE_OUTSIDE_BOUNDARY,e.PE_POLE_POINT=u.PePCSInfo.prototype.PE_POLE_POINT},e.generate=function(r,i=e.PE_PCSINFO_OPTION_DOMAIN){var n,a;return t.has(r)&&((a=t.get(r))[i]&&(n=a[i])),n||(n=u.PePCSInfo.prototype.generate(r,i),a||(a=[],t.set(r,a)),a[i]=n),n}}(j||(j={})),function(e){e.version_string=function(){return u.PeVersion.prototype.version_string()}}(_||(_={}));var E=Object.freeze({__proto__:null,get _pe(){return u},isLoaded:d,isSupported:h,load:p,get PeCSTransformations(){return n},get PeDefs(){return a},get PeFactory(){return o},get PeGCSExtent(){return w},get PeGTlistExtended(){return f},get PeGTlistExtendedEntry(){return b},get PeGTTransformations(){return v},get PeNotationDms(){return m},get PeNotationMgrs(){return g},get PeNotationUsng(){return y},get PeNotationUtm(){return O},get PePCSInfo(){return j},get PeVersion(){return _},_init:x})},function(e,t,r){"use strict";r.d(t,"a",(function(){return d}));var i,n,a,o,s,c,l=r(120),u=r(119);function d(e,t){e.vertex.uniforms.add("intrinsicWidth","float"),t.vvSize?(e.attributes.add("sizeFeatureAttribute","float"),e.vertex.uniforms.add("vvSizeMinSize","vec3"),e.vertex.uniforms.add("vvSizeMaxSize","vec3"),e.vertex.uniforms.add("vvSizeOffset","vec3"),e.vertex.uniforms.add("vvSizeFactor","vec3"),e.vertex.code.add(Object(u.a)(i||(i=Object(l.a)(["\n    float getSize() {\n      return intrinsicWidth * clamp(vvSizeOffset + sizeFeatureAttribute * vvSizeFactor, vvSizeMinSize, vvSizeMaxSize).x;\n    }\n    "]))))):(e.attributes.add("size","float"),e.vertex.code.add(Object(u.a)(n||(n=Object(l.a)(["\n    float getSize(){\n      return intrinsicWidth * size;\n    }\n    "]))))),t.vvOpacity?(e.attributes.add("opacityFeatureAttribute","float"),e.vertex.constants.add("vvOpacityNumber","int",8),e.vertex.code.add(Object(u.a)(a||(a=Object(l.a)(["\n    uniform float vvOpacityValues[vvOpacityNumber];\n    uniform float vvOpacityOpacities[vvOpacityNumber];\n\n    float interpolateOpacity( float value ){\n      if (value <= vvOpacityValues[0]) {\n        return vvOpacityOpacities[0];\n      }\n\n      for (int i = 1; i < vvOpacityNumber; ++i) {\n        if (vvOpacityValues[i] >= value) {\n          float f = (value - vvOpacityValues[i-1]) / (vvOpacityValues[i] - vvOpacityValues[i-1]);\n          return mix(vvOpacityOpacities[i-1], vvOpacityOpacities[i], f);\n        }\n      }\n\n      return vvOpacityOpacities[vvOpacityNumber - 1];\n    }\n\n    vec4 applyOpacity( vec4 color ){\n      return vec4(color.xyz, interpolateOpacity(opacityFeatureAttribute));\n    }\n    "]))))):e.vertex.code.add(Object(u.a)(o||(o=Object(l.a)(["\n    vec4 applyOpacity( vec4 color ){\n      return color;\n    }\n    "])))),t.vvColor?(e.attributes.add("colorFeatureAttribute","float"),e.vertex.constants.add("vvColorNumber","int",8),e.vertex.code.add(Object(u.a)(s||(s=Object(l.a)(["\n    uniform float vvColorValues[vvColorNumber];\n    uniform vec4 vvColorColors[vvColorNumber];\n\n    vec4 interpolateColor( float value ) {\n      if (value <= vvColorValues[0]) {\n        return vvColorColors[0];\n      }\n\n      for (int i = 1; i < vvColorNumber; ++i) {\n        if (vvColorValues[i] >= value) {\n          float f = (value - vvColorValues[i-1]) / (vvColorValues[i] - vvColorValues[i-1]);\n          return mix(vvColorColors[i-1], vvColorColors[i], f);\n        }\n      }\n\n      return vvColorColors[vvColorNumber - 1];\n    }\n\n    vec4 getColor(){\n      return applyOpacity(interpolateColor(colorFeatureAttribute));\n    }\n    "]))))):(e.attributes.add("color","vec4"),e.vertex.code.add(Object(u.a)(c||(c=Object(l.a)(["\n    vec4 getColor(){\n      return applyOpacity(color);\n    }\n    "])))))}},function(e,t,r){"use strict";r.d(t,"a",(function(){return f}));var i,n,a,o,s,c,l,u,d=r(120),h=r(119),p=r(487);function f(e,t){var r=e;r.include(p.a),r.attributes.add("position","vec3"),r.attributes.add("normal","vec3"),r.attributes.add("auxpos1","vec4"),r.vertex.uniforms.add("proj","mat4"),r.vertex.uniforms.add("view","mat4"),r.vertex.uniforms.add("viewNormal","mat4"),r.vertex.uniforms.add("viewport","vec4"),r.vertex.uniforms.add("camPos","vec3"),r.vertex.uniforms.add("polygonOffset","float"),r.vertex.uniforms.add("cameraGroundRelative","float"),r.vertex.uniforms.add("pixelRatio","float"),r.vertex.uniforms.add("perDistancePixelRatio","float"),r.vertex.uniforms.add("uRenderTransparentlyOccludedHUD","float"),t.verticalOffsetEnabled&&r.vertex.uniforms.add("verticalOffset","vec4"),t.screenSizePerspectiveEnabled&&r.vertex.uniforms.add("screenSizePerspectiveAlignment","vec4"),r.vertex.uniforms.add("hudVisibilityTexture","sampler2D"),r.vertex.constants.add("smallOffsetAngle","float",.984807753012208),r.vertex.code.add(Object(h.a)(i||(i=Object(d.a)(["\n    struct ProjectHUDAux {\n      vec3 posModel;\n      vec3 posView;\n      vec3 vnormal;\n\n      float distanceToCamera;\n      float absCosAngle;\n    };\n  "])))),r.vertex.code.add(Object(h.a)(n||(n=Object(d.a)(["\n    float applyHUDViewDependentPolygonOffset(float pointGroundDistance, float absCosAngle, inout vec3 posView) {\n      float pointGroundSign = sign(pointGroundDistance);\n\n      if (pointGroundSign == 0.0) {\n        pointGroundSign = cameraGroundRelative;\n      }\n\n      // cameraGroundRelative is -1 if camera is below ground, 1 if above ground\n      // groundRelative is 1 if both camera and symbol are on the same side of the ground, -1 otherwise\n      float groundRelative = cameraGroundRelative * pointGroundSign;\n\n      // view angle dependent part of polygon offset emulation\n      // we take the absolute value because the sign that is dropped is\n      // instead introduced using the ground-relative position of the symbol and the camera\n      if (polygonOffset > .0) {\n        float cosAlpha = clamp(absCosAngle, 0.01, 1.0);\n\n        float tanAlpha = sqrt(1.0 - cosAlpha * cosAlpha) / cosAlpha;\n        float factor = (1.0 - tanAlpha / viewport[2]);\n\n        // same side of the terrain\n        if (groundRelative > 0.0) {\n          posView *= factor;\n        }\n        // opposite sides of the terrain\n        else {\n          posView /= factor;\n        }\n      }\n\n      return groundRelative;\n    }\n  "])))),t.isDraped||r.vertex.code.add(Object(h.a)(a||(a=Object(d.a)(["\n    void applyHUDVerticalGroundOffset(vec3 normalModel, inout vec3 posModel, inout vec3 posView) {\n      float distanceToCamera = length(posView);\n\n      // Compute offset in world units for a half pixel shift\n      float pixelOffset = distanceToCamera * perDistancePixelRatio * 0.5;\n\n      // Apply offset along normal in the direction away from the ground surface\n      vec3 modelOffset = normalModel * cameraGroundRelative * pixelOffset;\n\n      // Apply the same offset also on the view space position\n      vec3 viewOffset = (viewNormal * vec4(modelOffset, 1.0)).xyz;\n\n      posModel += modelOffset;\n      posView += viewOffset;\n    }\n  "])))),r.vertex.code.add(Object(h.a)(o||(o=Object(d.a)(["\n    vec4 projectPositionHUD(out ProjectHUDAux aux) {\n      // centerOffset is in view space and is used to implement world size offsetting\n      // of labels with respect to objects. It also pulls the label towards the viewer\n      // so that the label is visible in front of the object.\n      vec3 centerOffset = auxpos1.xyz;\n\n      // The pointGroundDistance is the distance of the geometry to the ground and is\n      // negative if the point is below the ground, or positive if the point is above\n      // ground.\n      float pointGroundDistance = auxpos1.w;\n\n      aux.posModel = position;\n      aux.posView = (view * vec4(aux.posModel, 1.0)).xyz;\n      aux.vnormal = normal;\n      ","\n\n      // Screen sized offset in world space, used for example for line callouts\n      // Note: keep this implementation in sync with the CPU implementation, see\n      //   - MaterialUtil.verticalOffsetAtDistance\n      //   - HUDMaterial.applyVerticalOffsetTransformation\n\n      aux.distanceToCamera = length(aux.posView);\n\n      vec3 viewDirObjSpace = normalize(camPos - aux.posModel);\n      float cosAngle = dot(aux.vnormal, viewDirObjSpace);\n\n      aux.absCosAngle = abs(cosAngle);\n\n      ","\n\n      ","\n\n      ","\n\n      float groundRelative = applyHUDViewDependentPolygonOffset(pointGroundDistance, aux.absCosAngle, aux.posView);\n\n      ","\n\n      vec4 posProj = proj * vec4(aux.posView, 1.0);\n\n      ","\n\n      ","\n\n      // constant part of polygon offset emulation\n      posProj.z -= groundRelative * polygonOffset * posProj.w;\n      return posProj;\n    }\n  "])),t.isDraped?"":"applyHUDVerticalGroundOffset(aux.vnormal, aux.posModel, aux.posView);",t.screenSizePerspectiveEnabled&&(t.verticalOffsetEnabled||1===t.screenCenterOffsetUnitsEnabled)?"vec4 perspectiveFactor = screenSizePerspectiveScaleFactor(aux.absCosAngle, aux.distanceToCamera, screenSizePerspectiveAlignment);":"",t.verticalOffsetEnabled?t.screenSizePerspectiveEnabled?"float verticalOffsetScreenHeight = applyScreenSizePerspectiveScaleFactorFloat(verticalOffset.x, perspectiveFactor);":"float verticalOffsetScreenHeight = verticalOffset.x;":"",t.verticalOffsetEnabled?Object(h.a)(s||(s=Object(d.a)(["\n            float worldOffset = clamp(verticalOffsetScreenHeight * verticalOffset.y * aux.distanceToCamera, verticalOffset.z, verticalOffset.w);\n            vec3 modelOffset = aux.vnormal * worldOffset;\n            aux.posModel += modelOffset;\n            vec3 viewOffset = (viewNormal * vec4(modelOffset, 1.0)).xyz;\n            aux.posView += viewOffset;\n            // Since we elevate the object, we need to take that into account\n            // in the distance to ground\n            pointGroundDistance += worldOffset;"]))):"",1!==t.screenCenterOffsetUnitsEnabled?Object(h.a)(c||(c=Object(d.a)(["\n            // Apply x/y in view space, but z in screen space (i.e. along posView direction)\n            aux.posView += vec3(centerOffset.x, centerOffset.y, 0.0);\n\n            // Same material all have same z != 0.0 condition so should not lead to\n            // branch fragmentation and will save a normalization if it's not needed\n            if (centerOffset.z != 0.0) {\n              aux.posView -= normalize(aux.posView) * centerOffset.z;\n            }\n          "]))):"",1===t.screenCenterOffsetUnitsEnabled?t.screenSizePerspectiveEnabled?"float centerOffsetY = applyScreenSizePerspectiveScaleFactorFloat(centerOffset.y, perspectiveFactor);":"float centerOffsetY = centerOffset.y;":"",1===t.screenCenterOffsetUnitsEnabled?"posProj.xy += vec2(centerOffset.x, centerOffsetY) * pixelRatio * 2.0 / viewport.zw * posProj.w;":"")),r.vertex.code.add(Object(h.a)(l||(l=Object(d.a)(["\n    bool testVisibilityHUD(vec4 posProj) {\n      // For occlusion testing, use the nearest pixel center to avoid\n      // subpixel filtering messing up the color we use to test for\n      vec4 posProjCenter = alignToPixelCenter(posProj, viewport.zw);\n\n      vec4 occlusionPixel = texture2D(hudVisibilityTexture, .5 + .5 * posProjCenter.xy / posProjCenter.w);\n\n      // the red pixel here indicates that the occlusion pixel passed the depth test against solid geometry and was written\n      // the green pixel stores transparency of transparent geometry (1.0 -> fully transparent)\n      // note that we also check against green == 0.0, i.e. transparent geometry that has opaque parts\n\n      // thus we render visible pixels that are occluded by semi-transparent (but not fully transparent!) geometry here\n      if (uRenderTransparentlyOccludedHUD > 0.5) {\n        // multiplying by uRenderTransparentlyOccludedHUD allows us to ignore the second condition if\n        // uRenderTransparentlyOccludedHUD = 0.75\n        return occlusionPixel.r * occlusionPixel.g > 0.0 && occlusionPixel.g * uRenderTransparentlyOccludedHUD < 1.0;\n      }\n\n      // and visible pixels that are not occluded by semi-transparent geometry here\n      return occlusionPixel.r * occlusionPixel.g > 0.0 && occlusionPixel.g == 1.0;\n    }\n  "]))))}(u=f||(f={})).bindUniforms=function(e,t){e.setUniform1f("uRenderTransparentlyOccludedHUD",0===t.renderTransparentlyOccludedHUD?1:1===t.renderTransparentlyOccludedHUD?0:.75)},u.bindVisibilityTexture=function(e,t,r){t.setUniform1i("hudVisibilityTexture",4),e.bindTexture(r.hudVisibilityTexture,4),e.setActiveTexture(0)}},function(e,t,r){"use strict";r.d(t,"a",(function(){return o})),r.d(t,"b",(function(){return u}));var i,n,a,o,s=r(120),c=r(119),l=r(647);function u(e,t){t.multipassGeometryEnabled&&e.vertex.include(l.b),e.vertex.code.add(Object(c.a)(i||(i=Object(s.a)(["\n  void main(void) {\n    vec4 posProjCenter;\n    if (dot(position, position) > 0.0) {\n      // Render single point to center of the pixel to avoid subpixel\n      // filtering to affect the marker color\n      ProjectHUDAux projectAux;\n      vec4 posProj = projectPositionHUD(projectAux);\n      posProjCenter = alignToPixelCenter(posProj, viewport.zw);\n\n      ","\n\n      vec3 vpos = projectAux.posModel;\n      if (rejectBySlice(vpos)) {\n        // Project out of clip space\n        posProjCenter = vec4(1e038, 1e038, 1e038, 1.0);\n      }\n\n    }\n    else {\n      // Project out of clip space\n      posProjCenter = vec4(1e038, 1e038, 1e038, 1.0);\n    }\n\n    gl_Position = posProjCenter;\n    gl_PointSize = 1.0;\n  }\n  "])),t.multipassGeometryEnabled?Object(c.a)(n||(n=Object(s.a)(["\n        // Don't draw vertices behind geometry\n        if(geometryDepthTest(.5 + .5 * posProjCenter.xy / posProjCenter.w, projectAux.posView.z)){\n          posProjCenter = vec4(1e038, 1e038, 1e038, 1.0);\n        }"]))):"")),e.fragment.uniforms.add("color","vec4"),e.fragment.code.add(Object(c.a)(a||(a=Object(s.a)(["\n  void main() {\n    gl_FragColor = color;\n  }\n  "]))))}(o||(o={})).bindUniforms=function(e){e.setUniform4f("color",1,1,1,1)}},function(e,t,r){"use strict";r.d(t,"a",(function(){return o}));var i=r(91),n=r(7),a=r(106);function o(e,t){return s.apply(this,arguments)}function s(){return(s=Object(n.a)((function*(e,t){var{data:r}=yield Object(a.default)(e,Object(i.a)({responseType:"image"},t));return r}))).apply(this,arguments)}},function(e,t,r){"use strict";r.d(t,"a",(function(){return a}));var i=r(89),n=r(107);class a{constructor(){this._isToolEditable=!0,this._manipulators=new n.a,this._nextManipulatorId=0,this._resourceContexts={manipulator3D:{}},this._attached=!1}set isToolEditable(e){this._isToolEditable=e}get length(){return this._manipulators.length}add(e,t=0){return this.addMany([e],t)[0]}addMany(e,t=0){return e.map((e=>{var r=this._nextManipulatorId++,i={id:r,manipulator:e,visibilityPredicate:t,attached:!1};return this._manipulators.add(i),this._attached&&this._updateManipulatorAttachment(i),r}))}remove(e){if("number"==typeof e){for(var t=e,r=0;r<this._manipulators.length;r++)if(this._manipulators.getItemAt(r).id===t){var i=this._manipulators.splice(r,1)[0];return this._detachManipulator(i),i.id}return null}for(var n=e,a=0;a<this._manipulators.length;a++)if(this._manipulators.getItemAt(a).manipulator===n){var o=this._manipulators.splice(a,1)[0];return this._detachManipulator(o),o.id}return null}removeAll(){this._manipulators.forEach((e=>{this._detachManipulator(e)})),this._manipulators.removeAll()}attach(){this._manipulators.forEach((e=>{this._updateManipulatorAttachment(e)})),this._attached=!0}detach(){this._manipulators.forEach((e=>{this._detachManipulator(e)})),this._attached=!1}destroy(){this._manipulators.forEach((({manipulator:e})=>{e.destroy&&e.destroy()})),this._manipulators.destroy(),this._resourceContexts=null}on(e,t){return this._manipulators.on(e,(e=>{t(e)}))}forEach(e){for(var t of this._manipulators.items)e(t)}some(e){return this._manipulators.items.some(e)}toArray(){var e=[];return this.forEach((t=>e.push(t.manipulator))),e}intersect(e,t){var r=null,n=Number.MAX_VALUE;return this._manipulators.forEach((({id:a,manipulator:o,attached:s})=>{if(s&&o.interactive){var c=o.intersectionDistance(e,t);Object(i.k)(c)&&c<n&&(n=c,r={id:a,manipulator:o})}})),r}findById(e){if(Object(i.j)(e))return null;for(var t of this._manipulators.items)if(e===t.id)return t.manipulator;return null}_updateManipulatorAttachment(e){this._isManipulatorItemVisible(e)?this._attachManipulator(e):this._detachManipulator(e)}_attachManipulator(e){e.attached||(e.manipulator.attach&&e.manipulator.attach(this._resourceContexts),e.attached=!0)}_detachManipulator(e){if(e.attached){var t=e.manipulator;t.grabbing=!1,t.dragging=!1,t.hovering=!1,t.selected=!1,t.detach&&t.detach(this._resourceContexts),e.attached=!1}}_isManipulatorItemVisible(e){return 2===e.visibilityPredicate||(this._isToolEditable?0===e.visibilityPredicate:1===e.visibilityPredicate)}}},,,,,,,,,,function(e,t,r){"use strict";function i(){return[1,0,0,1,0,0]}function n(e){return[e[0],e[1],e[2],e[3],e[4],e[5]]}r.d(t,"a",(function(){return n})),r.d(t,"b",(function(){return i}));Object.freeze({__proto__:null,create:i,clone:n,fromValues:function(e,t,r,i,n,a){return[e,t,r,i,n,a]},createView:function(e,t){return new Float64Array(e,t,6)}})},,,,function(e,t,r){"use strict";r.d(t,"a",(function(){return l}));var i=r(217),n=r(686),a=r(530),o=r(687),s=r(662),c=r(646);class l{draw(e,t){var r=this.getUniqueHints(e),l=[];for(var u of r)u instanceof n.a&&l.push(this.visualizeIntersectionPoint(u,t)),u instanceof a.a&&l.push(this.visualizeLine(u,t)),u instanceof o.a&&l.push(this.visualizeParallelSign(u,t)),u instanceof c.a&&l.push(this.visualizeRightAngleQuad(u,t)),u instanceof s.a&&l.push(this.visualizePoint(u,t));return Object(i.b)(l)}getUniqueHints(e){var t=[];for(var r of e){var i=!0;for(var n of t)if(r.equals(n)){i=!1;break}i&&t.push(r)}return t}}},function(e,t,r){"use strict";r.d(t,"a",(function(){return o}));r(80);var i=r(81),n=r(312),a=r(479);i.a.getLogger("esri.views.interactive.snapping.hints.RightAngleSnappingHint");class o extends a.a{constructor(e,t,r){super(),this.previousVertex=e,this.centerVertex=t,this.nextVertex=r}equals(e){return e instanceof o&&Object(n.d)(this.previousVertex,e.previousVertex)&&Object(n.d)(this.centerVertex,e.centerVertex)&&Object(n.d)(this.nextVertex,e.nextVertex)}}},function(e,t,r){"use strict";r.d(t,"a",(function(){return c})),r.d(t,"b",(function(){return s}));var i,n=r(120),a=r(119),o=r(308);function s(e){e.include(o.a),e.uniforms.add("geometryDepthTexture","sampler2D"),e.uniforms.add("cameraNearFar","vec2"),e.code.add(Object(a.a)(i||(i=Object(n.a)(["\n    //Compare the linearized depths of the vertex/fragment and the geometry in the scene. If vertex/fragment is behind geometry, don't draw it.\n    bool geometryDepthTest(vec2 pos, float elementDepth){\n\n      float geometryDepth = linearDepthFromTexture(geometryDepthTexture, pos, cameraNearFar);\n      if(elementDepth < (geometryDepth - 1.0)){\n        return true;\n      }\n      return false;\n    }\n  "]))))}function c(e,t,r){r.multipassGeometryEnabled&&r.geometryLinearDepthTexture&&(e.setUniform1i("geometryDepthTexture",11),t.bindTexture(r.geometryLinearDepthTexture,11))}},,,,,,function(e,t,r){"use strict";r.d(t,"a",(function(){return N}));var i,n=r(7),a=r(180),o=r(295),s=r(89),c=r(93),l=r(83),u=r(94),d=r(131),h=r(110),p=r(498),f=r(630),b=r(179),v=r(348),m=r(364),g=r(205),y=r(478),O=r(523),j=r(192),_=r(91),w=r(162);function x(){if(Object(s.j)(i)){var e=e=>Object(w.a)("esri/libs/basisu/".concat(e));i=Promise.all([r.e(261),r.e(271)]).then(r.bind(null,1188)).then((function(e){return e.b})).then((({default:t})=>t({locateFile:e}).then((e=>(e.initializeBasis(),delete e.then,e)))))}return i}var S=null,M=null;function T(){return P.apply(this,arguments)}function P(){return(P=Object(n.a)((function*(){return Object(s.j)(M)&&(M=x(),S=yield M),M}))).apply(this,arguments)}function E(){return(E=Object(n.a)((function*(e,t,r){Object(s.j)(S)&&(S=yield T());var i=new S.BasisFile(new Uint8Array(r));if(i.getNumImages()<1)return null;var n=i.getNumLevels(0),a=i.getHasAlpha(),o=i.getImageWidth(0,0),c=i.getImageHeight(0,0),{compressedTextureETC:l,compressedTextureS3TC:u}=e.capabilities,[d,h]=l?a?[1,37496]:[0,37492]:u?a?[3,33779]:[2,33776]:[13,6408];i.startTranscoding();for(var p=[],f=0;f<n;f++)p.push(new Uint8Array(i.getImageTranscodedSizeInBytes(0,f,d))),i.transcodeImage(p[f],0,f,d,0,0);i.close(),i.delete();var b=Object(_.a)(Object(_.a)({},t),{},{samplingMode:n>1?9987:9729,hasMipmap:n>1,internalFormat:h,width:o,height:c});return new g.a(e,b,{type:"compressed",levels:p})}))).apply(this,arguments)}var C=r(81).a.getLogger("esri.views.3d.webgl-engine.lib.DDSUtil"),A=542327876,I=131072;function k(e){return e.charCodeAt(0)+(e.charCodeAt(1)<<8)+(e.charCodeAt(2)<<16)+(e.charCodeAt(3)<<24)}var F=k("DXT1"),R=k("DXT3"),D=k("DXT5");function L(e,t,r,i){var{textureData:n,internalFormat:a,width:o,height:s}=function(e,t){var r=new Int32Array(e,0,31);if(r[0]!==A)return C.error("Invalid magic number in DDS header"),null;if(!(4&r[20]))return C.error("Unsupported format, must contain a FourCC code"),null;var i,n,a=r[21];switch(a){case F:i=8,n=33776;break;case R:i=16,n=33778;break;case D:i=16,n=33779;break;default:return C.error("Unsupported FourCC code:",function(e){return String.fromCharCode(255&e,e>>8&255,e>>16&255,e>>24&255)}(a)),null}var o=1,s=r[4],c=r[3];0==(3&s)&&0==(3&c)||(C.warn("Rounding up compressed texture size to nearest multiple of 4."),s=s+3&-4,c=c+3&-4);var l,u,d=s,p=c;r[2]&I&&!1!==t&&(o=Math.max(1,r[7])),1===o||Object(h.k)(s)&&Object(h.k)(c)||(C.warn("Ignoring mipmaps of non power of two sized compressed texture."),o=1);for(var f=r[1]+4,b=[],v=0;v<o;++v)u=(s+3>>2)*(c+3>>2)*i,l=new Uint8Array(e,f,u),b.push(l),f+=u,s=Math.max(1,s>>1),c=Math.max(1,c>>1);return{textureData:{type:"compressed",levels:b},internalFormat:n,width:d,height:p}}(r,i);t.samplingMode=n.levels.length>1?9987:9729,t.hasMipmap=n.levels.length>1,t.internalFormat=a,t.width=o,t.height=s;var c=new g.a(e,t,n);return e.bindTexture(c,0),c}class N extends v.a{constructor(e,t){super(),this.data=e,this.type=4,this.glTexture=null,this.powerOfTwoStretchInfo=null,this.loadingPromise=null,this.loadingController=null,this.events=new d.a,this.params=t||{},this.params.mipmap=!1!==this.params.mipmap,this.params.noUnpackFlip=this.params.noUnpackFlip||!1,this.params.preMultiplyAlpha=this.params.preMultiplyAlpha||!1,this.params.wrap=this.params.wrap||{s:10497,t:10497},this.params.powerOfTwoResizeMode=this.params.powerOfTwoResizeMode||1,this.estimatedTexMemRequired=N.estimateTexMemRequired(this.data,this.params),this.startPreload()}startPreload(){var e=this.data;Object(s.j)(e)||(e instanceof HTMLVideoElement?this.startPreloadVideoElement(e):e instanceof HTMLImageElement&&this.startPreloadImageElement(e))}startPreloadVideoElement(e){Object(l.t)(e.src)||"auto"===e.preload&&e.crossOrigin||(e.preload="auto",e.crossOrigin="anonymous",e.src=e.src)}startPreloadImageElement(e){Object(l.u)(e.src)||Object(l.t)(e.src)||e.crossOrigin||(e.crossOrigin="anonymous",e.src=e.src)}static getDataDimensions(e){return e instanceof HTMLVideoElement?{width:e.videoWidth,height:e.videoHeight}:e}static estimateTexMemRequired(e,t){if(Object(s.j)(e))return 0;if(Object(o.c)(e)||Object(o.k)(e))return t.encoding===N.BASIS_ENCODING?function(e){if(Object(s.j)(S))return e.byteLength;var t=new S.BasisFile(new Uint8Array(e));if(t.getNumImages()<1)return 0;var r=t.getNumLevels(0),i=t.getHasAlpha(),n=t.getImageWidth(0,0),a=t.getImageHeight(0,0);t.close(),t.delete();var o=Object(y.b)(i?37496:37492),c=(Math.pow(4,r)-1)/(3*Math.pow(4,r-1));return Math.ceil(n*a*o*c)}(e):e.byteLength;var{width:r,height:i}=e instanceof Image||e instanceof ImageData||e instanceof HTMLCanvasElement||e instanceof HTMLVideoElement?N.getDataDimensions(e):t;return(t.mipmap?4/3:1)*r*i*(t.components||4)||0}dispose(){this.data=void 0}get width(){return this.params.width}get height(){return this.params.height}createDescriptor(e){var t=this.params.mipmap&&!this.params.disableAnisotropy;return{target:3553,pixelFormat:6408,dataType:5121,wrapMode:this.params.wrap,flipped:!this.params.noUnpackFlip,samplingMode:this.params.mipmap?9987:9729,hasMipmap:this.params.mipmap,preMultiplyAlpha:this.params.preMultiplyAlpha,maxAnisotropy:t?e.parameters.maxMaxAnisotropy:void 0}}load(e,t){if(Object(s.k)(this.glTexture))return this.glTexture;if(Object(s.k)(this.loadingPromise))return this.loadingPromise;var r=this.data;return Object(s.j)(r)?(this.glTexture=new g.a(e,this.createDescriptor(e),null),e.bindTexture(this.glTexture,0),this.glTexture):"string"==typeof r?this.loadFromURL(e,t,r):r instanceof Image?this.loadFromImageElement(e,t,r):r instanceof HTMLVideoElement?this.loadFromVideoElement(e,t,r):r instanceof ImageData||r instanceof HTMLCanvasElement?this.loadFromImage(e,r,t):(Object(o.c)(r)||Object(o.k)(r))&&this.params.encoding===N.DDS_ENCODING?this.loadFromDDSData(e,r):(Object(o.c)(r)||Object(o.k)(r))&&this.params.encoding===N.BASIS_ENCODING?this.loadFromBasis(e,r):Object(o.k)(r)?this.loadFromPixelData(e,r):Object(o.c)(r)?this.loadFromPixelData(e,new Uint8Array(r)):null}get requiresFrameUpdates(){return this.data instanceof HTMLVideoElement}frameUpdate(e,t,r){if(!(this.data instanceof HTMLVideoElement)||Object(s.j)(this.glTexture))return r;if(this.data.readyState<2||r===this.data.currentTime)return r;if(Object(s.k)(this.powerOfTwoStretchInfo)){var{framebuffer:i,vao:n,sourceTexture:a}=this.powerOfTwoStretchInfo;a.setData(this.data),this.drawStretchedTexture(e,t,i,n,a,this.glTexture)}else{var{width:o,height:c}=this.data,{width:l,height:u}=this.glTexture.descriptor;o!==l||c!==u?this.glTexture.updateData(0,0,0,Math.min(o,l),Math.min(c,u),this.data):this.glTexture.setData(this.data)}return this.glTexture.descriptor.hasMipmap&&this.glTexture.generateMipmap(),this.data.currentTime}loadFromDDSData(e,t){return this.glTexture=L(e,this.createDescriptor(e),t,this.params.mipmap),e.bindTexture(this.glTexture,0),this.glTexture}loadFromBasis(e,t){return this.loadAsync((()=>function(e,t,r){return E.apply(this,arguments)}(e,this.createDescriptor(e),t).then((e=>(this.glTexture=e,e)))))}loadFromPixelData(e,t){Object(b.a)(this.params.width>0&&this.params.height>0);var r=this.createDescriptor(e);return r.pixelFormat=1===this.params.components?6409:3===this.params.components?6407:6408,r.width=this.params.width,r.height=this.params.height,this.glTexture=new g.a(e,r,t),e.bindTexture(this.glTexture,0),this.glTexture}loadAsync(e){var t=this;return Object(n.a)((function*(){var r=Object(u.d)();t.loadingController=r;var i=e(r.signal);t.loadingPromise=i;var n=()=>{t.loadingController===r&&(t.loadingController=null),t.loadingPromise===i&&(t.loadingPromise=null)};return i.then(n,n),i}))()}loadFromURL(e,t,r){var i=this;return this.loadAsync(function(){var a=Object(n.a)((function*(n){var a=yield Object(f.a)(r,{signal:n});return i.loadFromImage(e,a,t)}));return function(e){return a.apply(this,arguments)}}())}loadFromImageElement(e,t,r){var i=this;return r.complete?this.loadFromImage(e,r,t):this.loadAsync(function(){var a=Object(n.a)((function*(n){var a=yield Object(p.a)(r,r.src,!1,n);return i.loadFromImage(e,a,t)}));return function(e){return a.apply(this,arguments)}}())}loadFromVideoElement(e,t,r){return r.readyState>=2?this.loadFromImage(e,r,t):this.loadFromVideoElementAsync(e,t,r)}loadFromVideoElementAsync(e,t,r){return this.loadAsync((i=>new Promise(((n,a)=>{var o=()=>{r.removeEventListener("loadeddata",l),r.removeEventListener("error",d),Object(s.k)(h)&&h.remove()},l=()=>{r.readyState>=2&&(o(),n(this.loadFromImage(e,r,t)))},d=e=>{o(),a(e||new c.a("Failed to load video"))};r.addEventListener("loadeddata",l),r.addEventListener("error",d);var h=Object(u.p)(i,(()=>d(Object(u.e)())))}))))}loadFromImage(e,t,r){var i=N.getDataDimensions(t);this.params.width=i.width,this.params.height=i.height;var n=this.createDescriptor(e);return n.pixelFormat=3===this.params.components?6407:6408,!this.requiresPowerOfTwo(e,n)||Object(h.k)(i.width)&&Object(h.k)(i.height)?(n.width=i.width,n.height=i.height,this.glTexture=new g.a(e,n,t),e.bindTexture(this.glTexture,0),this.glTexture):(this.glTexture=this.makePowerOfTwoTexture(e,t,i,n,r),e.bindTexture(this.glTexture,0),this.glTexture)}requiresPowerOfTwo(e,t){var r=33071,i="number"==typeof t.wrapMode?t.wrapMode===r:t.wrapMode.s===r&&t.wrapMode.t===r;return!Object(m.a)(e.gl)&&(t.hasMipmap||!i)}makePowerOfTwoTexture(e,t,r,i,n){var o,{width:s,height:c}=r,l=Object(h.o)(s),u=Object(h.o)(c);switch(i.width=l,i.height=u,this.params.powerOfTwoResizeMode){case 2:i.textureCoordinateScaleFactor=[s/l,c/u],(o=new g.a(e,i)).updateData(0,0,0,s,c,t);break;case 1:case null:case void 0:o=this.stretchToPowerOfTwo(e,t,i,n);break;default:Object(a.a)(this.params.powerOfTwoResizeMode)}return i.hasMipmap&&o.generateMipmap(),o}stretchToPowerOfTwo(e,t,r,i){var n=new g.a(e,r),a=new j.a(e,{colorTarget:0,depthStencilTarget:0},n),o=new g.a(e,{target:3553,pixelFormat:r.pixelFormat,dataType:5121,wrapMode:33071,samplingMode:9729,flipped:!!r.flipped,maxAnisotropy:8,preMultiplyAlpha:r.preMultiplyAlpha},t),s=Object(O.b)(e);return this.drawStretchedTexture(e,i,a,s,o,n),this.requiresFrameUpdates?this.powerOfTwoStretchInfo={vao:s,sourceTexture:o,framebuffer:a}:(s.dispose(!0),o.dispose(),a.detachColorTexture(),e.bindFramebuffer(null),a.dispose()),n}drawStretchedTexture(e,t,r,i,n,a){e.bindFramebuffer(r);var o=e.getViewport();e.setViewport(0,0,a.descriptor.width,a.descriptor.height);var s=t.program;e.bindProgram(s),s.setUniform4f("color",1,1,1,1),s.setUniform1i("tex",0),e.bindTexture(n,0),e.bindVAO(i),e.setPipelineState(t.pipeline),e.drawArrays(5,0,Object(y.f)(i,"geometry")),e.bindFramebuffer(null),e.setViewport(o.x,o.y,o.width,o.height)}unload(){if(Object(s.k)(this.powerOfTwoStretchInfo)){var{framebuffer:e,vao:t,sourceTexture:r}=this.powerOfTwoStretchInfo;t.dispose(!0),r.dispose(),e.dispose(),this.glTexture=null,this.powerOfTwoStretchInfo=null}if(Object(s.k)(this.glTexture)&&(this.glTexture.dispose(),this.glTexture=null),Object(s.k)(this.loadingController)){var i=this.loadingController;this.loadingController=null,this.loadingPromise=null,i.abort()}this.events.emit("unloaded")}}N.DDS_ENCODING="image/vnd-ms.dds",N.BASIS_ENCODING="image/x.basis"},function(e,t,r){"use strict";r.d(t,"a",(function(){return l}));var i=r(89),n=r(376),a=(r(7),r(81)),o=(r(152),r(480)),s=a.a.getLogger("esri.views.3d.layers.graphics.featureExpressionInfoUtils");function c(e){return null!=e.cachedResult}class l{constructor(){this._meterUnitOffset=0,this._renderUnitOffset=0,this._unit="meters",this._metersPerElevationInfoUnit=1,this._featureExpressionInfoContext=null,this.centerPointInElevationSR=null,this.mode=null}get featureExpressionInfoContext(){return this._featureExpressionInfoContext}get meterUnitOffset(){return this._meterUnitOffset}get unit(){return this._unit}set unit(e){this._unit=e,this._metersPerElevationInfoUnit=Object(n.a)(e)}reset(){this.mode=null,this._meterUnitOffset=0,this._renderUnitOffset=0,this._featureExpressionInfoContext=null,this.unit="meters"}set offsetMeters(e){this._meterUnitOffset=e,this._renderUnitOffset=0}set offsetElevationInfoUnits(e){this._meterUnitOffset=e*this._metersPerElevationInfoUnit,this._renderUnitOffset=0}addOffsetRenderUnits(e){this._renderUnitOffset+=e}geometryZWithOffset(e,t){var r=this.calculateOffsetRenderUnits(t);return null!=this.featureExpressionInfoContext?r:e+r}calculateOffsetRenderUnits(e){var t=this._meterUnitOffset,r=this.featureExpressionInfoContext;return null!=r&&(t+=function(e){if(null!=e){if(c(e))return e.cachedResult;var t=e.arcade,r=e.arcade.modules.arcadeUtils.executeFunction(t.func,t.context);return"number"!=typeof r&&(e.cachedResult=0,r=0),r}return 0}(r)*this._metersPerElevationInfoUnit),t/e.unitInMeters+this._renderUnitOffset}setFromElevationInfo(e){this.mode=e.mode,this.unit=Object(n.c)(e.unit)?e.unit:"meters",this.offsetElevationInfoUnits=Object(i.r)(e.offset,0)}updateFeatureExpressionInfoContext(e,t,r){if(Object(i.j)(e))this._featureExpressionInfoContext=null;else{var n,a=e&&e.arcade;a&&Object(i.k)(t)&&Object(i.k)(r)?(this._featureExpressionInfoContext={cachedResult:(n=e).cachedResult,arcade:n.arcade?{func:n.arcade.func,context:n.arcade.modules.arcadeUtils.createExecContext(null,{sr:n.arcade.context.spatialReference}),modules:n.arcade.modules}:null},function(e,t){if(null!=e&&!c(e)){if(!t||!e.arcade)return void s.errorOncePerTick("Arcade support required but not provided");var r=t;r._geometry&&(r._geometry=Object(o.b)(r._geometry)),e.arcade.modules.arcadeUtils.updateExecContext(e.arcade.context,t)}}(this._featureExpressionInfoContext,function(e,t,r){return e.arcadeUtils.createFeature(t.attributes,t.geometry,r)}(a.modules,t,r))):this._featureExpressionInfoContext=e}}static fromElevationInfo(e){var t=new l;return Object(i.k)(e)&&t.setFromElevationInfo(e),t}}},,,,,,,,function(e,t,r){"use strict";r.d(t,"a",(function(){return a}));var i=r(312),n=r(479);class a extends n.a{constructor(e){super(),this.point=e}equals(e){return e instanceof a&&Object(i.d)(this.point,e.point)}}},function(e,t,r){"use strict";r.d(t,"a",(function(){return d}));var i=r(7),n=r(91),a=r(89),o=r(94),s=r(289),c=r(416),l=r(516),u=r(397);class d{constructor(){this.next=new u.a}createSnapDragEventPipelineStep({predicate:e=(()=>!0),cancel:t,snappingManager:r,snappingContext:d}){var h=this;if(Object(a.j)(r))return e=>e;var p=null,f=null,b=()=>{p=Object(a.a)(p),r.doneSnapping(),Object(a.k)(f)&&f.frameTask.remove(),f=null};return t.next((e=>(b(),e))),this.next=new u.a,t=>{if(!e(t))return t;if(p=Object(a.a)(p),"start"===t.action){var u="3d"===r.view.type?r.view.resourceController.scheduler.registerTask(s.b.SNAPPING,(e=>Object(a.q)(u).processQueue(e)),(()=>!1)):s.a;f={context:new l.a({geometry:d.geometry,elevationInfo:d.elevationInfo,pointer:d.pointer,vertexHandle:Object(a.k)(t.info)?t.info.handle:null,excludeFeature:d.excludeFeature,visualizer:d.visualizer}),originalPos:Object(a.k)(t.snapOrigin)?d.coordinateHelper.createDehydratedPoint(t.snapOrigin):t.mapStart,frameTask:u}}if(Object(a.k)(f)){var v=f.context.coordinateHelper.createDehydratedPoint(f.context.coordinateHelper.fromArray([f.originalPos.x,f.originalPos.y,f.originalPos.z]));v.x+=t.mapEnd.x-t.mapStart.x,v.y+=t.mapEnd.y-t.mapStart.y;var m=t.mapStart.x-f.originalPos.x,g=t.mapStart.y-f.originalPos.y,y=Object(n.a)(Object(n.a)({},t),{},{action:"udpate"}),O=f.context,j=r.update(v,f.context);if(t.mapEnd.x=j.x+m,t.mapEnd.y=j.y+g,"end"!==t.action){var _=f.frameTask;p=Object(o.h)(function(){var e=Object(i.a)((function*(e){var t=yield _.schedule((()=>r.snap(v,O,e)),e);if(t.valid){var i=yield _.schedule((()=>t.apply()),e);Object(c.a)(i,j)||(y.mapEnd.x=i.x+m,y.mapEnd.y=i.y+g,h.next.execute(y))}}));return function(t){return e.apply(this,arguments)}}())}}return"end"===t.action&&b(),t}}}},function(e,t,r){"use strict";var i=r(89),n=r(617),a=r(388);class o extends a.a{constructor(e){super(e),this._textureIDs=new Set,this._textureRepository=e.textureRep,this._textureId=e.textureId,this._initTransparent=!!e.initTextureTransparent,this._texture=this._acquireIfNotUndefined(this._textureId),this._textureNormal=this._acquireIfNotUndefined(e.normalTextureId),this._textureEmissive=this._acquireIfNotUndefined(e.emissiveTextureId),this._textureOcclusion=this._acquireIfNotUndefined(e.occlusionTextureId),this._textureMetallicRoughness=this._acquireIfNotUndefined(e.metallicRoughnessTextureId)}dispose(){this._textureIDs.forEach((e=>this._textureRepository.release(e))),this._textureIDs.clear()}updateTexture(e){e!==this._textureId&&(this._releaseIfNotUndefined(this._textureId),this._textureId=e,this._texture=this._acquireIfNotUndefined(this._textureId))}bindTexture(e,t){Object(i.k)(this._texture)&&(t.setUniform1i("tex",n.a.DIFFUSE),e.bindTexture(this._texture.glTexture,n.a.DIFFUSE)),Object(i.k)(this._textureNormal)&&(t.setUniform1i("normalTexture",n.a.NORMAL),e.bindTexture(this._textureNormal.glTexture,n.a.NORMAL)),Object(i.k)(this._textureEmissive)&&(t.setUniform1i("texEmission",n.a.EMISSION),e.bindTexture(this._textureEmissive.glTexture,n.a.EMISSION)),Object(i.k)(this._textureOcclusion)&&(t.setUniform1i("texOcclusion",n.a.OCCLUSION),e.bindTexture(this._textureOcclusion.glTexture,n.a.OCCLUSION)),Object(i.k)(this._textureMetallicRoughness)&&(t.setUniform1i("texMetallicRoughness",n.a.METALLIC_ROUGHNESS),e.bindTexture(this._textureMetallicRoughness.glTexture,n.a.METALLIC_ROUGHNESS))}bindTextureScale(e,t){var r=Object(i.k)(this._texture)&&this._texture.glTexture;r&&r.descriptor.textureCoordinateScaleFactor?t.setUniform2fv("textureCoordinateScaleFactor",r.descriptor.textureCoordinateScaleFactor):t.setUniform2f("textureCoordinateScaleFactor",1,1)}_acquireIfNotUndefined(e){if(!Object(i.j)(e))return this._textureIDs.add(e),this._textureRepository.acquire(e,this._initTransparent)}_releaseIfNotUndefined(e){Object(i.j)(e)||(this._textureIDs.delete(e),this._textureRepository.release(e))}}t.a=o},function(e,t,r){"use strict";r.d(t,"a",(function(){return v})),r.d(t,"b",(function(){return h}));var i=r(89),n=r(113),a=(r(101),r(104)),o=r(111),s=r(396),c=r(533),l=r(321),u=r(641);function d(e,t,r=null){return Object(i.k)(r)?[e,t,r]:[e,t]}function h(e,t,r=null){return Object(i.k)(r)?{x:e,y:t,z:r}:{x:e,y:t}}class p{constructor(e){this.spatialReference=e}mapToLocalMultiple(e){return Object(i.g)(e.map((e=>this.mapToLocal(e))))}get doUnnormalization(){return!1}}class f extends p{constructor(e,t,r=null){super(t),this.defaultZ=r,this.transform=Object(u.b)(),this.transformInv=Object(u.b)(),this.transform=Object(u.a)(e),Object(l.a)(this.transformInv,this.transform)}makeMapPoint(e,t){return d(e,t,this.defaultZ)}mapToLocal(e){return h(this.transform[0]*e[0]+this.transform[2]*e[1]+this.transform[4],this.transform[1]*e[0]+this.transform[3]*e[1]+this.transform[5])}localToMap(e){return d(this.transformInv[0]*e.x+this.transformInv[2]*e.y+this.transformInv[4],this.transformInv[1]*e.x+this.transformInv[3]*e.y+this.transformInv[5],this.defaultZ)}}class b extends p{constructor(e,t){super(e.spatialReference),this.view=e,this.defaultZ=null,this.pWS=Object(a.e)(),this.tangentFrameUpWS=Object(a.e)(),this.tangentFrameRightWS=Object(a.e)(),this.tangentFrameForwardWS=Object(a.e)(),this.localFrameRightWS=Object(a.e)(),this.localFrameUpWS=Object(a.e)(),this.worldToLocalTransform=Object(s.a)(),this.localToWorldTransform=Object(s.a)(),this.scale=1,this.scale=e.resolution,this.referenceMapPoint=t,this.defaultZ=t.hasZ?t.z:null;var r=e.state.camera.viewRight;this.view.renderCoordsHelper.toRenderCoords(this.referenceMapPoint,this.pWS),this.view.renderCoordsHelper.worldBasisAtPosition(this.pWS,0,this.tangentFrameRightWS),this.view.renderCoordsHelper.worldBasisAtPosition(this.pWS,1,this.tangentFrameUpWS),this.view.renderCoordsHelper.worldBasisAtPosition(this.pWS,2,this.tangentFrameForwardWS);var i=Object(a.e)();Object(o.d)(i,this.tangentFrameForwardWS,Object(o.g)(r,this.tangentFrameForwardWS)),Object(o.i)(this.localFrameRightWS,r,i),Object(o.q)(this.localFrameRightWS,this.localFrameRightWS),Object(o.f)(this.localFrameUpWS,this.tangentFrameForwardWS,this.localFrameRightWS),Object(c.d)(this.worldToLocalTransform,this.localFrameRightWS,this.tangentFrameRightWS),Object(c.c)(this.localToWorldTransform,this.worldToLocalTransform)}get doUnnormalization(){return"global"===this.view.viewingMode}makeMapPoint(e,t){return d(e,t,this.defaultZ)}mapToLocal(e){var t=Object(a.e)();this.view.renderCoordsHelper.toRenderCoords(new n.a({x:e[0],y:e[1],spatialReference:this.spatialReference}),t),Object(o.t)(t,t,this.worldToLocalTransform);var r=this.view.renderCoordsHelper.fromRenderCoords(t,this.view.spatialReference);return Object(i.k)(r)?h(r.x/this.scale,r.y/this.scale):null}localToMap(e){var t=Object(a.e)();this.view.renderCoordsHelper.toRenderCoords(new n.a({x:e.x*this.scale,y:e.y*this.scale,spatialReference:this.spatialReference}),t),Object(o.t)(t,t,this.localToWorldTransform);var r=this.view.renderCoordsHelper.fromRenderCoords(t,this.view.spatialReference);return Object(i.k)(r)?d(r.x,r.y,this.defaultZ):null}}function v(e,t){if("2d"===e.type)return new f(e.state.transform,e.spatialReference,t.length>2?t[2]:null);if("3d"===e.type){var r=t.length>2?new n.a({x:t[0],y:t[1],z:t[2],spatialReference:e.spatialReference}):new n.a({x:t[0],y:t[1],spatialReference:e.spatialReference});return new b(e,r)}return null}},,,,,,,function(e,t,r){"use strict";r.d(t,"a",(function(){return S}));var i=r(7),n=r(91),a=r(82),o=(r(80),r(92)),s=r(89),c=(r(81),r(88),r(85),r(84)),l=(r(83),r(86),r(87),r(94)),u=r(113),d=(r(101),r(131)),h=r(105),p=r(115),f=r(289),b=r(416),v=r(531),m=r(264),g=r(522),y=r(516),O=r(397),j=r(663),_=r(673);class w{constructor({grabbableForEvent:e}){this.events=new d.a,this.interactive=!0,this.selectable=!1,this.cursor=null,this.grabbable=!0,this.grabbableForEvent=e}intersectionDistance(e,t){return 0}attach(){}detach(){}}var x=r(586),S=class extends d.a{constructor(e){var t,r;super(),this._manipulator=null,this._stagedVertex=null,this.geometryType=null,this.elevationInfo=null,this.snapToSceneEnabled=null,this._handles=new p.a,this._defaultZ=0,this._elevationDrawSurface=null,this._snappingDrawSurface=null,this._snappingManager=null,this._snappingPipeline=new j.a,this._createOperationCompleted=!1,this._pointerDownStates=new Set,this._snappingTask=null,this.view=e.view,this.drawingMode=Object(s.r)(e.drawingMode,x.a),this.geometryType=e.geometryType,this.elevationInfo=e.elevationInfo,this.coordinateHelper=Object(v.a)(e.hasZ,e.hasM,this.view.spatialReference,this.view.viewingMode),this._defaultZ=e.defaultZ,this.snapToSceneEnabled=e.snapToSceneEnabled,this._snappingDrawSurface=Object(s.q)(e.snappingDrawSurface),this._snappingManager=e.snappingManager;var i=null==(t=e.view)||null==(r=t.resourceController)?void 0:r.scheduler;this._frameTask=i?i.registerTask(f.b.SNAPPING,(e=>this._frameTask.processQueue(e)),(()=>!1)):f.a,this._elevationDrawSurface=e.elevationDrawSurface,this._editGeometry=new g.a(new m.c(this.coordinateHelper),"segment"===this.geometryType?"polyline":this.geometryType),this._activeComponent=new m.a(this._editGeometry.editGeometry),this._editGeometry.editGeometry.components.push(this._activeComponent),this._editGeometry.on(["vertex-add","vertex-update","vertex-remove"],(e=>{var t=e.vertices.map((e=>({componentIndex:0,vertexIndex:e.index,coordinates:this.coordinateHelper.toArray(e.pos)}))),r=t.map((e=>e.coordinates));switch(e.type){case"vertex-add":this.emit(e.type,Object(n.a)(Object(n.a)({},e),{},{added:r,vertices:t}));break;case"vertex-update":this.emit(e.type,Object(n.a)(Object(n.a)({},e),{},{updated:r,vertices:t}));break;case"vertex-remove":this.emit(e.type,Object(n.a)(Object(n.a)({},e),{},{removed:r,vertices:t}))}})),this._manipulator=new w({grabbableForEvent:e=>"click"!==this.drawingMode||"touch"===e.pointerType&&this._snappingEnabled&&1===this._pointerDownStates.size}),e.manipulators.add(this._manipulator),this._manipulator.grabbable="point"!==this.geometryType;var a=this.createManipulatorDragPipeline(this._manipulator),o=this._manipulator.events.on("immediate-double-click",(e=>{this._manipulator.dragging||"point"===this.geometryType||(this.complete(),e.stopPropagation())})),c=this._manipulator.events.on("immediate-click",(e=>{if(!this._manipulator.dragging){var t=this._activeComponent,r=this._closeOnClickVertexIndex(e.screenPoint);if(Object(s.k)(r))this.discardStagedVertex(),this.complete();else{var i=this._screenToMap(e.screenPoint);if(Object(s.k)(i))switch(this.drawingMode){case"freehand":break;case"click":case"hybrid":this._snappingTask=Object(s.a)(this._snappingTask),this.hasStagedVertex?this.commitStagedVertex():this._editGeometry.appendVertex(this.coordinateHelper.fromPoint(i)),("point"===this.geometryType||"segment"===this.geometryType&&2===t.vertices.length||"segment"===this.geometryType&&"hybrid"===this.drawingMode&&1===t.vertices.length)&&this.complete()}}e.stopPropagation()}}));this._handles.add([a,c,o])}get isCompleted(){return this._createOperationCompleted}get _snappingEnabled(){return Object(s.k)(this._snappingManager)&&this._snappingManager.options.effectiveEnabled}createManipulatorDragPipeline(e){switch(this.drawingMode){case"click":return this.createManipulatorDragPipelineClick(e);case"freehand":return this.createManipulatorDragPipelineFreehand(e);case"hybrid":return this.createManipulatorDragPipelineHybrid(e)}}createManipulatorDragPipelineClick(e){return Object(O.e)(e,((e,t,r,i)=>{var n="touch"===i&&this._snappingEnabled;!this.isCompleted&&n&&(t.next(this._screenToMapDragEventStep()).next((e=>("start"===e.action&&(this.stagedVertex=e.mapStart,("segment"===this.geometryType||n&&0===this.vertices.length)&&this.commitStagedVertex()),e))).next(this._snappingPipeline.createSnapDragEventPipelineStep({predicate:()=>n,cancel:r,snappingManager:this._snappingManager,snappingContext:new y.a({geometry:this._editGeometry,elevationInfo:this.elevationInfo,pointer:i,visualizer:new _.a})}),this._snappingPipeline.next).next((e=>(n&&(this.stagedVertex=e.mapEnd,"end"===e.action&&this.commitStagedVertex()),e))).next((e=>("end"===e.action&&("segment"!==this.geometryType&&"point"!==this.geometryType||this.complete()),e))),r.next((()=>{n&&Object(s.k)(this._snappingManager)&&this._snappingManager.doneSnapping()})))}))}createManipulatorDragPipelineFreehand(e){return Object(O.e)(e,((e,t)=>{this.isCompleted||t.next(this._screenToMapDragEventStep()).next((e=>("start"===e.action&&(this.stagedVertex=e.mapStart,"segment"===this.geometryType&&this.commitStagedVertex()),e))).next((e=>{switch(e.action){case"start":case"update":this.stagedVertex=e.mapEnd,"polygon"!==this.geometryType&&"polyline"!==this.geometryType||this.commitStagedVertex();break;case"end":this.complete()}return e}))}))}createManipulatorDragPipelineHybrid(e){return Object(O.e)(e,((e,t)=>{this.isCompleted||t.next(this._screenToMapDragEventStep()).next((e=>("start"===e.action&&(this.stagedVertex=e.mapStart,this.commitStagedVertex()),e))).next((e=>{switch(e.action){case"start":case"update":this.stagedVertex=e.mapEnd,"polygon"!==this.geometryType&&"polyline"!==this.geometryType||this.commitStagedVertex();break;case"end":"segment"!==this.geometryType&&"point"!==this.geometryType||this.complete()}return e}))}))}destroy(){this._handles.destroy(),this._handles=null,this._editGeometry.destroy(),this._frameTask.remove()}onInputEvent(e){switch(e.type){case"pointer-down":this._pointerDownStates.add(e.pointerId);break;case"pointer-up":this._pointerDownStates.delete(e.pointerId)}switch(e.type){case"pointer-move":return this._onPointerMove(e);case"hold":return this._onHold(e)}}get canRedo(){return this._editGeometry.canRedo}redo(){this._editGeometry.redo()}get canUndo(){return this._editGeometry.canUndo}undo(){Object(s.k)(this._snappingManager)&&this._snappingManager.doneSnapping(),this._editGeometry.undo()}complete(e=!1){Object(s.a)(this._snappingTask),this.commitStagedVertex(),this._createOperationCompleted=!0,Object(s.k)(this._snappingManager)&&this._snappingManager.doneSnapping(),this.emit("complete",{vertices:this.vertices.map(((e,t)=>({componentIndex:0,vertexIndex:t,coordinates:e}))),aborted:e,type:"complete"})}cancel(){this.complete(!0)}get interactive(){return this._manipulator.interactive}set interactive(e){this._manipulator.interactive=e}get numVertices(){return Object(s.k)(this._stagedVertex)?this._activeComponent.vertices.length+1:this._activeComponent.vertices.length}get numCommittedVertices(){return this._activeComponent.vertices.length}get vertices(){var e=this._activeComponent.vertices.map((e=>this.coordinateHelper.toArray(e.pos)));return Object(s.k)(this._stagedVertex)&&e.push(this.coordinateHelper.pointToArray(this._stagedVertex)),e}get spatialReference(){return this.view.spatialReference}get hasStagedVertex(){return Object(s.k)(this._stagedVertex)}get stagedVertex(){return this._stagedVertex}set stagedVertex(e){if(Object(s.j)(e))this.discardStagedVertex();else if(!Object(s.k)(this._stagedVertex)||!Object(b.a)(this._stagedVertex,e)){Object(s.j)(this._stagedVertex)?this._stagedVertex=Object(o.a)(e):(this._stagedVertex.x=e.x,this._stagedVertex.y=e.y,this._stagedVertex.z=e.z,this._stagedVertex.m=e.m,this._stagedVertex.hasZ=e.hasZ,this._stagedVertex.hasM=e.hasM,this._stagedVertex.spatialReference=e.spatialReference);var t={componentIndex:0,vertexIndex:this._activeComponent.vertices.length,coordinates:this.coordinateHelper.pointToArray(e)};this.emit("cursor-update",{updated:null,vertices:[t],operation:"apply",type:"vertex-update"})}}commitStagedVertex(){if(this._snappingTask=Object(s.a)(this._snappingTask),Object(s.k)(this._stagedVertex)){var e=this._stagedVertex;this._stagedVertex=null,this._editGeometry.appendVertex(this.coordinateHelper.fromPoint(e))}}discardStagedVertex(){this._stagedVertex=null}_onPointerMove(e){var t=this;if(Object(s.a)(this._snappingTask),!(this._manipulator.dragging||this._pointerDownStates.has(e.pointerId)||this._manipulator.grabbing)&&this._manipulator.interactive){var r=Object(h.f)(e.x,e.y),n=this._closeOnClickVertexIndex(r);if(Object(s.k)(n)){this.discardStagedVertex();var a={componentIndex:0,vertexIndex:n,coordinates:this.coordinateHelper.toArray(this._activeComponent.vertices[n].pos)};this.emit("cursor-update",{updated:null,vertices:[a],operation:"apply",type:"vertex-update"})}else{var o=this._screenToMap(r);if(this._manipulator.cursor=Object(s.k)(o)?"crosshair":null,Object(s.k)(o))if(Object(s.k)(this._snappingManager)){var c=this._snappingManager,u=new y.a({geometry:this._editGeometry,elevationInfo:this.elevationInfo,pointer:e.pointerType,visualizer:new _.a});this.stagedVertex=c.update(o,u),this._snappingTask=Object(l.h)(function(){var e=Object(i.a)((function*(e){var r=yield t._frameTask.schedule((()=>c.snap(o,u,e)),e);r.valid&&(yield t._frameTask.schedule((()=>{t.stagedVertex=r.apply()}),e))}));return function(t){return e.apply(this,arguments)}}())}else this.stagedVertex=o}e.stopPropagation()}}_onHold(e){Object(s.a)(this._snappingTask),"click"===this.drawingMode&&"touch"===e.pointerType&&this._snappingEnabled&&(this.stagedVertex=e.mapPoint),e.stopPropagation()}_screenToMapDragEventStep(){var e=null;return t=>{if("start"===t.action&&(e=this._screenToMap(t.screenStart)),Object(s.j)(e))return null;var r=this._screenToMap(t.screenEnd);return Object(s.k)(r)?Object(n.a)(Object(n.a)({},t),{},{mapStart:e,mapEnd:r}):null}}_screenToMap(e){return this._getDrawSurface().screenToMap(e)}_mapToScreen(e){return this._getDrawSurface().mapToScreen(e)}_getDrawSurface(){var e=null;if(this.coordinateHelper.hasZ){var t=this._defaultZ,r=!1;Object(s.k)(this.elevationInfo)&&"absolute-height"===this.elevationInfo.mode&&(r=!0),Object(s.k)(this.snapToSceneEnabled)&&(r=this.snapToSceneEnabled),Object(s.k)(this.elevationInfo)&&"on-the-ground"===this.elevationInfo.mode&&(r=!1);var i=this._activeComponent.vertices.length;("segment"===this.geometryType||"polygon"===this.geometryType)&&i>0&&(t=this.coordinateHelper.getZ(this._activeComponent.vertices[0].pos),r=!1),r?e=this._snappingDrawSurface:(this._elevationDrawSurface.defaultZ=t,e=this._elevationDrawSurface)}else this._elevationDrawSurface.defaultZ=null,e=this._elevationDrawSurface;return e}_vertexWithinPointerDistance(e,t){var r=this._mapToScreen(e);return!!Object(s.k)(r)&&function(e,t,r){var i=e.x-t.x,n=e.y-t.y;return i*i+n*n<=r}(r,t,25)}_closeOnClickVertexIndex(e){var t=this._activeComponent;if("polygon"===this.geometryType&&t.vertices.length>2){if(this._vertexWithinPointerDistance(this.coordinateHelper.toPoint(t.vertices[0].pos,M),e))return 0;if(this._vertexWithinPointerDistance(this.coordinateHelper.toPoint(t.vertices[t.vertices.length-1].pos,M),e))return t.vertices.length-1}return null}};S=Object(a.a)([Object(c.a)("esri.views.3d.interactive.editingTools.draw3D.DrawOperation")],S);var M=new u.a({x:0,y:0,z:0})},function(e,t,r){"use strict";r.d(t,"a",(function(){return C}));r(80);var i=r(217),n=r(109),a=r(104),o=r(111),s=r(515),c=r(312),l=r(645),u=r(689),d=r(89),h=r(105),p=r(115),f=r(174),b=r(135),v=r(191),m=r(373),g=r(370),y=r(471),O=r(468);class j extends O.a{constructor(e){super(e),this._handles=new p.a,this._location=Object(a.e)(),this._direction=Object(a.g)(1,0,0),this._width=1,this._offset=1,this._length=18,this._color=Object(m.c)(1,0,1,1),this._renderOccluded=4,this.applyProps(e)}get location(){return this._location}set location(e){Object(o.p)(this._location,e)||(Object(o.j)(this._location,e),this.updateGeometry())}get direction(){return this._direction}set direction(e){Object(o.p)(this._direction,e)||(Object(o.j)(this._direction,e),this.updateGeometry())}setDirectionFromPoints(e,t){Object(o.q)(this._direction,Object(o.i)(this._direction,t,e)),this.updateGeometry()}get width(){return this._width}set width(e){e!==this._width&&(this._width=e,this.updateMaterial())}get offset(){return this._offset}set offset(e){e!==this._offset&&(this._offset=e,this.updateGeometry())}get length(){return this._length}set length(e){e!==this._length&&(this._length=e,this.updateGeometry())}get color(){return this._color}set color(e){Object(v.g)(e,this._color)||(Object(v.c)(this._color,e),this.updateMaterial())}get renderOccluded(){return this._renderOccluded}set renderOccluded(e){e!==this._renderOccluded&&(this._renderOccluded=e,this.updateMaterial())}createExternalResources(){var e=new y.a(this.materialParameters);this._handles.add(this.view.state.watch("camera",(()=>{this.updateGeometry()}))),this._externalResources={material:e}}destroyExternalResources(){this._handles.removeAll(),this._externalResources=null}createGeometries(e){var t=g.a.createPolylineGeometry([Object(a.e)(),Object(a.e)()]),r=g.a.createPolylineGeometry([Object(a.e)(),Object(a.e)()]),i=Object(d.q)(this._externalResources).material;e.addGeometry(t,i,f.a),e.addGeometry(r,i,f.a),this.updateVertices(e)}forEachExternalMaterial(e){Object(d.k)(this._externalResources)&&e(this._externalResources.material)}updateMaterial(){Object(d.j)(this._externalResources)||this._externalResources.material.setParameterValues(this.materialParameters)}get materialParameters(){return{width:this._width,color:this._color,renderOccluded:this._renderOccluded}}updateGeometry(){var e=this.object;Object(d.j)(e)||this.updateVertices(e)}updateVertices(e){var t=this.view.state.camera;t.projectToScreen(this.location,w),Object(o.e)(_,this.location,this.direction),t.projectToScreen(_,x),Object(b.e)(x,Object(b.d)(x,x,w)),this.updateVertexAttributes(t,e,0,w,x,1),this.updateVertexAttributes(t,e,1,w,x,-1)}updateVertexAttributes(e,t,r,i,n,a){var o=t.geometryRecords[r].geometry.getMutableAttribute("position").data,s=Object(b.a)(S,Object(b.r)(S,n[1]*a,n[0]*-a),this.offset+this.width/2),c=Object(b.h)(M,Object(b.h)(M,Object(b.h)(M,i,Object(b.a)(M,n,this.length/2)),s),s),l=Object(b.h)(T,c,Object(b.a)(T,n,-this.length));e.unprojectFromScreen(c,_),o[0]=_[0],o[1]=_[1],o[2]=_[2],e.unprojectFromScreen(l,_),o[3]=_[0],o[4]=_[1],o[5]=_[2],t.geometryVertexAttrsUpdated(r)}}var _=Object(a.e)(),w=Object(h.g)(),x=Object(h.g)(),S=Object(h.g)(),M=Object(h.g)(),T=Object(h.g)(),P=r(724),E=r(690);class C extends l.a{visualizeIntersectionPoint(e,t){var{coordinateHelper:r,elevationInfo:a,view:o}=t;return Object(i.a)(new P.a({view:o,primitive:"circle",geometry:r.createPoint(e.intersectionPoint),elevationInfo:a,size:20,outlineSize:2,color:[0,0,0,0],outlineColor:n.a.toUnitRGBA(s.a.orange),pixelSnappingEnabled:!1}))}visualizePoint(e,t){var{coordinateHelper:r,elevationInfo:a,view:o}=t;return Object(i.a)(new P.a({view:o,primitive:"circle",geometry:r.createPoint(e.point),elevationInfo:a,size:20,outlineSize:2,color:[0,0,0,0],outlineColor:n.a.toUnitRGBA(s.a.orange),pixelSnappingEnabled:!1}))}visualizeLine(e,t){var{coordinateHelper:r,elevationInfo:n,view:a}=t;return Object(i.a)(this.createLineSegmentHintFromMap(e.type,e.lineStart,e.lineEnd,r,n,a,e.fadeLeft,e.fadeRight))}visualizeParallelSign(e,t){var{coordinateHelper:r,elevationInfo:a,view:l}=t,u=Object(c.a)(e.lineStart,r,a,t.view),d=Object(c.a)(e.lineEnd,r,a,t.view),h=Object(o.h)(d,u,d,.5),p=new j({view:l,attached:!1,offset:s.a.parallelLineHintOffset,length:s.a.parallelLineHintLength,width:s.a.parallelLineHintWidth,color:n.a.toUnitRGBA(s.a.orange),location:h,renderOccluded:16});return p.setDirectionFromPoints(u,h),p.attached=!0,Object(i.a)(p)}visualizeRightAngleQuad(e,t){var{coordinateHelper:r,elevationInfo:a,view:o}=t;return Object(i.a)(new E.a({view:o,attached:!0,color:n.a.toUnitRGBA(s.a.orange),renderOccluded:2,outlineRenderOccluded:16,outlineColor:n.a.toUnitRGBA(s.a.orange),outlineSize:s.a.rightAngleHintOutlineSize,size:s.a.rightAngleHintSize,geometry:{previous:Object(c.a)(e.previousVertex,r,a,o),center:Object(c.a)(e.centerVertex,r,a,o),next:Object(c.a)(e.nextVertex,r,a,o)}}))}createLineSegmentHintFromMap(e,t,r,i,n,o,s=!0,l=!0){var u=Object(a.e)(),d=Object(a.e)();return Object(c.c)(t,r,i,n,o,u,d),this.createLineSegmentHint(e,o,u,d,s,l)}createLineSegmentHint(e,t,r,i,a=!0,o=!0){var c=new u.a({view:t,extensionType:3,start:r,end:i,color:n.a.toUnitRGBA(s.a.orange),renderOccluded:16});switch(e){case 0:c.width=s.a.lineHintWidthTarget,c.fadedExtensions={start:0,end:s.a.lineHintFadedExtensions};break;case 2:c.width=s.a.lineHintWidthReference,c.fadedExtensions={start:0,end:0};break;case 1:c.width=s.a.lineHintWidthReference,c.fadedExtensions={start:a?s.a.lineHintFadedExtensions:0,end:o?s.a.lineHintFadedExtensions:0}}return c.attached=!0,c}}},,,,,,,,,,,,function(e,t,r){"use strict";r.d(t,"a",(function(){return n})),r.d(t,"b",(function(){return d}));var i=r(109),n={main:new i.a([255,127,0]),selected:new i.a([255,255,255]),outline:new i.a([0,0,0,.5]),selectedOutline:new i.a([255,255,255]),hoverOutline:new i.a([255,255,255]),secondary:new i.a([255,255,255]),secondaryOutline:new i.a([100,100,100]),transparent:new i.a([0,0,0,0])};function a(e,t){if(t)for(var r in t)e[r]=t[r]}class o{constructor(e){this.size=8,this.hoverSize=10,this.color=n.main,this.hoverColor=n.main,this.outlineColor=n.outline,this.hoverOutlineColor=n.hoverOutline,a(this,e)}}class s{constructor(e){this.color=n.secondary,this.hoverColor=n.main,a(this,e)}}class c{constructor(e){this.color=n.transparent,this.hoverColor=n.transparent,this.outlineColor=n.main,this.hoverOutlineColor=n.main,this.stagedColor=n.transparent,this.stagedOutlineColor=n.secondary,a(this,e)}}class l{constructor(e){this.vertex=new o,this.midpoint=new o({color:n.secondary,outlineColor:n.secondaryOutline,size:6}),this.selected=new o({color:n.selected,hoverColor:n.selected,hoverOutlineColor:n.hoverOutline}),a(this,e)}}class u{constructor(e){this.center=new o({color:n.secondaryOutline}),this.fill=new c,this.line=new s,this.vertex=new o({color:n.selected,outlineColor:n.main,hoverColor:n.selected,hoverOutlineColor:n.secondaryOutline}),a(this,e)}}var d=new class{constructor(e){this.reshapeGraphics=new l,this.transformGraphics=new u,a(this,e)}}},function(e,t,r){"use strict";r.d(t,"a",(function(){return a}));var i=r(312),n=r(479);class a extends n.a{constructor(e){super(),this.intersectionPoint=e}equals(e){return e instanceof a&&Object(i.d)(this.intersectionPoint,e.intersectionPoint)}}},function(e,t,r){"use strict";r.d(t,"a",(function(){return o}));r(80);var i=r(81),n=r(312),a=r(479);i.a.getLogger("esri.views.interactive.snapping.hints.ParallelSnappingHint");class o extends a.a{constructor(e,t){super(),this.lineStart=e,this.lineEnd=t}equals(e){return e instanceof o&&Object(n.d)(this.lineStart,e.lineStart)&&Object(n.d)(this.lineEnd,e.lineEnd)}}},function(e,t,r){"use strict";r.d(t,"a",(function(){return a}));var i=r(89),n=r(264);class a{constructor(e,t,r){this.editGeometry=e,this.component=t,this.pos=r,this.addedVertex=null,this.originalEdge=null,this.left=null,this.right=null}apply(){var e="redo";if(Object(i.j)(this.addedVertex)&&(e="apply",this.addedVertex=new n.d(this.component)),0===this.component.vertices.length)this.component.vertices.push(this.addedVertex),this.addedVertex.pos=this.pos,this.addedVertex.index=0;else{var t=Object(i.q)(this.component.getLastVertex()),r=null;t.right&&(this.originalEdge=t.right,r=this.originalEdge.right,this.component.edges.splice(this.component.edges.indexOf(this.originalEdge),1)),this.component.vertices.push(this.addedVertex),this.addedVertex.pos=this.pos,Object(i.j)(this.left)&&(this.left=new n.b(this.component,t,this.addedVertex)),this.component.edges.push(this.left),t.right=this.left,Object(i.k)(this.originalEdge)&&Object(i.k)(r)&&(Object(i.j)(this.right)&&(this.right=new n.b(this.component,this.addedVertex,r)),this.component.edges.push(this.right),r.left=this.right),this.component.updateVertexIndex(this.addedVertex,t.index+1)}var a={addedVertices:[this.addedVertex],operation:e};this.editGeometry.emit("change",a)}undo(){if(Object(i.j)(this.addedVertex))return null;this.component.vertices.splice(this.component.vertices.indexOf(this.addedVertex),1),Object(i.k)(this.left)&&(this.component.edges.splice(this.component.edges.indexOf(this.left),1),this.left.left.right=null),Object(i.k)(this.right)&&(this.component.edges.splice(this.component.edges.indexOf(this.right),1),this.right.right.left=null),Object(i.k)(this.originalEdge)&&(this.component.edges.push(this.originalEdge),this.originalEdge.left.right=this.originalEdge,this.originalEdge.right.left=this.originalEdge),Object(i.k)(this.left)?this.component.updateVertexIndex(this.left.left,this.left.left.index):this.component.updateVertexIndex(this.addedVertex,0);var e={removedVertices:[this.addedVertex],operation:"undo"};this.editGeometry.emit("change",e)}accumulate(e){return!1}}},function(e,t,r){"use strict";r.d(t,"a",(function(){return b}));r(80);var i=r(89),n=r(104),a=r(111),o=r(115),s=r(191),c=r(373),l=r(467),u=r(255),d=r(370),h=r(471),p=r(606),f=r(468);class b extends f.a{constructor(e){super(e),this._ray=u.f.create(),this._externalResources=null,this._handles=new o.a,this._isWorldDown=!1,this._start=Object(n.e)(),this._end=Object(n.g)(1,0,0),this._width=1,this._color=Object(c.c)(1,0,1,1),this._polygonOffset=!1,this._writeDepthEnabled=!0,this._innerWidth=0,this._innerColor=Object(c.c)(1,1,1,1),this._stippleIntegerRepeats=!0,this._stipplePattern=null,this._stippleOffColor=null,this._falloff=0,this._extensionType=0,this._laserlineStyle=null,this._laserlineEnabled=!1,this._renderOccluded=4,this._fadedExtensions=j,this.applyProps(e)}createExternalResources(){var e=new h.a(this.materialParameters);this._handles.add(this.view.state.watch("camera",(()=>{this.updateGeometry()})));var t=new p.a({view:this.view,attached:this._laserlineEnabled});this._externalResources={material:e,laserline:t}}destroyExternalResources(){Object(i.k)(this._externalResources)&&this._externalResources.laserline.destroy(),this._externalResources=null,this._handles.removeAll()}forEachExternalMaterial(e){Object(i.k)(this._externalResources)&&e(this._externalResources.material)}createGeometries(e){var t=[Object(n.e)(),Object(n.e)()],r=3===this.extensionType;r&&t.push(Object(n.e)(),Object(n.e)());var a=r?new Float32Array([1,1,1,0,1,1,1,1,1,1,1,1,1,1,1,0]):null,o=d.a.createPolylineGeometry(t,null,a);e.addGeometry(o,Object(i.q)(this._externalResources).material),this.updateVertices(o)}updateVisibility(e){super.updateVisibility(e),Object(i.k)(this._externalResources)&&(this._externalResources.laserline.visible=e)}setStartEndFromWorldDownAtLocation(e){this._isWorldDown=!0,Object(a.j)(this._start,e),this.view.renderCoordsHelper.worldUpAtPosition(e,this._end),Object(a.i)(this._end,e,this._end),u.f.fromPoints(this._start,this._end,this._ray),this.updateGeometry()}get start(){return this._start}set start(e){this._isWorldDown=!1,Object(a.p)(this._start,e)||(Object(a.j)(this._start,e),u.f.fromPoints(this._start,this._end,this._ray),this.updateGeometry())}get end(){return this._end}set end(e){this._isWorldDown=!1,Object(a.p)(this._end,e)||(Object(a.j)(this._end,e),u.f.fromPoints(this._start,this._end,this._ray),this.updateGeometry())}get width(){return this._width}set width(e){e!==this._width&&(this._width=e,this.updateMaterial())}get color(){return this._color}set color(e){Object(s.g)(e,this._color)||(Object(s.c)(this._color,e),this.updateMaterial())}get polygonOffset(){return this._polygonOffset}set polygonOffset(e){e!==this._polygonOffset&&(this._polygonOffset=e,this.updateMaterial())}get writeDepthEnabled(){return this._writeDepthEnabled}set writeDepthEnabled(e){this._writeDepthEnabled!==e&&(this._writeDepthEnabled=e,this.updateMaterial())}get innerWidth(){return this._innerWidth}set innerWidth(e){e!==this._innerWidth&&(this._innerWidth=e,this.updateMaterial())}get innerColor(){return this._innerColor}set innerColor(e){Object(s.g)(e,this._innerColor)||(Object(s.c)(this._innerColor,e),this.updateMaterial())}get stippleIntegerRepeats(){return this._stippleIntegerRepeats}set stippleIntegerRepeats(e){e!==this._stippleIntegerRepeats&&(this._stippleIntegerRepeats=e,this.updateMaterial())}get stipplePattern(){return this._stipplePattern}set stipplePattern(e){var t=Object(i.k)(e)!==Object(i.k)(this._stipplePattern);this._stipplePattern=e,t?this.recreate():this.updateMaterial()}get stippleOffColor(){return this._stippleOffColor}set stippleOffColor(e){(Object(i.j)(e)||Object(i.j)(this._stippleOffColor)||!Object(s.g)(e,this._stippleOffColor))&&(this._stippleOffColor=Object(i.k)(e)?Object(c.a)(e):null,this.updateMaterial())}get falloff(){return this._falloff}set falloff(e){e!==this._falloff&&(this._falloff=e,this.updateMaterial())}get extensionType(){return this._extensionType}set extensionType(e){e!==this._extensionType&&(this._extensionType=e,this.updateGeometry())}get _laserlineAttached(){return this._laserlineEnabled&&Object(i.k)(this._laserlineStyle)}get laserlineStyle(){return this._laserlineStyle}set laserlineStyle(e){this._laserlineStyle=e,Object(i.k)(this._externalResources)&&(this._externalResources.laserline.attached=this._laserlineAttached,Object(i.k)(e)&&(this._externalResources.laserline.style=e))}get laserlineEnabled(){return this._laserlineEnabled}set laserlineEnabled(e){this._laserlineEnabled!==e&&(this._laserlineEnabled=e,Object(i.k)(this._externalResources)&&(this._externalResources.laserline.attached=this._laserlineAttached))}get renderOccluded(){return this._renderOccluded}set renderOccluded(e){e!==this._renderOccluded&&(this._renderOccluded=e,this.updateMaterial())}get fadedExtensions(){return this._fadedExtensions}set fadedExtensions(e){this._fadedExtensions=Object(i.r)(e,j),this.recreateGeometry()}updateMaterial(){Object(i.j)(this._externalResources)||this._externalResources.material.setParameterValues(this.materialParameters)}get materialParameters(){return{width:this._width,color:this._color,stippleOffColor:this._stippleOffColor,stipplePattern:this._stipplePattern,stippleIntegerRepeats:this._stippleIntegerRepeats,innerWidth:this._innerWidth,innerColor:this._innerColor,falloff:this._falloff,polygonOffset:this._polygonOffset,renderOccluded:this._renderOccluded,writeDepth:this._writeDepthEnabled}}updateGeometry(){Object(i.k)(this.object)&&this.updateVertices(this.object.geometries[0])}updateVertices(e){var t=3===this._extensionType?this.updateLineSegmentFinite(y):this.updateLineSegmentInfinite(this._extensionType,y);this.updateVertexAttributes(e,t),Object(i.k)(this._externalResources)&&(this._externalResources.laserline.intersectsLine=t)}updateLineSegmentFinite(e){return u.d.fromPoints(this._start,this._end,e)}updateLineSegmentInfinite(e,t){var r=this.view.state.camera;switch(Object(l.e)(this._ray,v),e){case 0:v.c0=-Number.MAX_VALUE;break;case 1:case 2:var n=this._ray.origin,o=Object(i.r)(this.view.elevationProvider.getElevation(n[0],n[1],n[2],this.view.renderCoordsHelper.spatialReference,"ground"),0),s=this.view.renderCoordsHelper.getAltitude(n);this._isWorldDown&&s<o&&Object(a.s)(v.ray.direction,v.ray.direction),2===this._extensionType&&null!=o&&(v.c1=Math.abs(s-o))}if(!u.c.intersectClipRay(r.frustum,v))return u.d.fromPoints(this._start,this._end,t);var c=Object(l.f)(v,m),d=Object(l.d)(v,g);return u.d.fromPoints(c,d,t)}updateVertexAttributes(e,t){var r=e.getMutableAttribute("position").data;if(3===this.extensionType){var n=u.d.pointAt(t,-this.fadedExtensions.start,m);r[0]=n[0],r[1]=n[1],r[2]=n[2];var a=u.d.pointAt(t,0,m);r[3]=a[0],r[4]=a[1],r[5]=a[2];var o=u.d.pointAt(t,1,m);r[6]=o[0],r[7]=o[1],r[8]=o[2];var s=u.d.pointAt(t,1+this.fadedExtensions.end,m);r[9]=s[0],r[10]=s[1],r[11]=s[2]}else{var c=u.d.pointAt(t,0,m);r[0]=c[0],r[1]=c[1],r[2]=c[2];var l=u.d.pointAt(t,1,m);r[3]=l[0],r[4]=l[1],r[5]=l[2]}Object(i.k)(this.object)&&this.object.geometryVertexAttrsUpdated(0)}}var v=Object(l.b)(),m=Object(n.e)(),g=Object(n.e)(),y=u.d.create(),O=1/3,j={start:O,end:O}},function(e,t,r){"use strict";r.d(t,"a",(function(){return m}));var i=r(89),n=r(104),a=r(111),o=r(115),s=r(157),c=r(174),l=r(191),u=r(373),d=r(177),h=r(463),p=r(370),f=r(471),b=r(560),v=r(468);class m extends v.a{constructor(e){super(e),this._handles=new o.a,this._quadMaterial=null,this._outlineMaterial=null,this._maxSize=0,this._position=Object(n.e)(),this._up=Object(n.e)(),this._right=Object(n.e)(),this._renderOccluded=4,this._color=Object(u.c)(1,0,0,1),this._outlineColor=Object(u.c)(0,0,0,1),this._outlineSize=0,this._size=32,this._outlineRenderOccluded=16,this.applyProps(e)}get renderOccluded(){return this._renderOccluded}set renderOccluded(e){e!==this._renderOccluded&&(this._renderOccluded=e,this._updateQuadMaterial())}get color(){return this._color}set color(e){Object(l.c)(this._color,e),this._updateQuadMaterial()}get outlineColor(){return this._outlineColor}set outlineColor(e){Object(l.c)(this._outlineColor,e),this._updateOutlineMaterial()}get outlineSize(){return this._outlineSize}set outlineSize(e){var t=0===this._outlineSize!=(0===e);this._outlineSize=e,t?this.recreateGeometry():this._updateOutlineMaterial()}get size(){return this._size}set size(e){e!==this._size&&(this._size=e,this._updateTransform())}get outlineRenderOccluded(){return this._outlineRenderOccluded}set outlineRenderOccluded(e){this._outlineRenderOccluded=e,this._updateOutlineMaterial()}set geometry({previous:e,center:t,next:r}){this._maxSize=Math.min(Object(a.n)(t,e),Object(a.n)(t,r))/3,Object(a.q)(this._up,Object(a.i)(this._up,e,t)),Object(a.q)(this._right,Object(a.i)(this._right,r,t)),Object(a.j)(this._position,t),this.recreateGeometry()}createExternalResources(){this._quadMaterial=new b.a(this.quadMaterialParameters),this._outlineMaterial=new f.a(this.outlineMaterialParameters),this._handles.add(this.view.state.watch("camera",(()=>this._updateTransform())))}destroyExternalResources(){this._quadMaterial=null,this._outlineMaterial=null,this._handles.removeAll()}forEachExternalMaterial(e){e(this._quadMaterial),e(this._outlineMaterial)}createGeometries(e){this._createQuadGeometry(e),this._createOutlineGeometry(e),this._updateTransform(e)}_createQuadGeometry(e){var t=this._quadGeometryData(this._up,this._right);e.addGeometry(t,this._quadMaterial)}_createOutlineGeometry(e){if(0!==this._outlineSize){var t=Object(a.e)(d.d.get(),this._up,this._right),r=p.a.createPolylineGeometry([this._up,t,this._right]);e.addGeometry(r,this._outlineMaterial)}}_updateTransform(e=this.object){var t=this.view.state.camera,r=this._size*t.computeScreenPixelSizeAt(this._position),n=Math.min(this._maxSize,r);Object(s.i)(g),Object(s.s)(g,g,this._position),Object(s.r)(g,g,[n,n,n]),Object(i.k)(e)&&(e.transformation=g)}_quadGeometryData(e,t){var r=Object(a.e)(d.d.get(),e,t);return new h.a([["position",{size:3,data:[0,0,0,...t,...e,...r],exclusive:!0}]],[["position",new Uint16Array([0,1,2,1,2,3])]])}get quadMaterialParameters(){return{color:this._color,transparent:!0,writeDepth:!1,polygonOffset:!0,renderOccluded:this._renderOccluded}}_updateQuadMaterial(){this._quadMaterial&&this._quadMaterial.setParameterValues(this.quadMaterialParameters)}get outlineMaterialParameters(){return{color:this._outlineColor,width:this._outlineSize,renderOccluded:this._outlineRenderOccluded}}_updateOutlineMaterial(){this._outlineMaterial&&this._outlineMaterial.setParameterValues(this.outlineMaterialParameters)}}var g=Object(c.b)()},function(e,t,r){"use strict";r.d(t,"a",(function(){return n}));var i=r(620);class n extends i.a{constructor({coordinateHelper:e,targetPoint:t,objectId:r,constraint:i}){super(e,t,i),this.objectId=r}}},function(e,t,r){"use strict";r.d(t,"a",(function(){return h})),r.d(t,"b",(function(){return d})),r.d(t,"c",(function(){return p})),r.d(t,"d",(function(){return f})),r.d(t,"e",(function(){return s})),r.d(t,"f",(function(){return u})),r.d(t,"g",(function(){return c})),r.d(t,"h",(function(){return l}));var i=r(110),n=r(202),a=r(135);function o(e,t){return e[0]*t[1]-e[1]*t[0]}function s(e,t,r){var i=(t[0]-e[0])*(r[1]-e[1])-(t[1]-e[1])*(r[0]-e[0]);return Math.abs(i)/Object(a.i)(t,r)}function c(e,t,r,i,n=r){return Object(a.d)(v,i,r),Object(a.d)(g,t,n),function(e,t,r){var i=Object(a.g)(r,t)/Object(a.p)(r);Object(a.a)(e,r,i)}(y,g,v),Object(a.h)(e,n,y)}function l(e,t,r,i){Object(a.d)(v,i,r),Object(a.d)(g,t,r);var n=Object(a.g)(v,g)/Object(a.p)(v);return n>0?Object(a.o)(e,r,v,n):Object(a.c)(e,r)}function u(e,t,r,i){Object(a.d)(v,t,r);var n=i/Object(a.l)(v);return Object(a.o)(e,r,v,n)}function d(e,t){return c(g,t,e.start,e.end),Object(i.g)(g[0],t[0])&&Object(i.g)(g[1],t[1])?[Object(n.b)(t)]:[]}function h(e,t,r){return u(g,r,e,t),Object(i.g)(g[0],r[0])&&Object(i.g)(g[1],r[1])?[Object(n.b)(r)]:[]}function p(e,t){var r=e.start,i=e.end,n=t.start,s=t.end,c=Object(a.d)(v,i,r),l=Object(a.d)(m,s,n),u=o(c,l);if(Math.abs(u)<=b)return[];var d=Object(a.d)(g,r,n),h=o(l,d)/u,p=o(c,d)/u;if(h>=0){if(p>=0||1===t.type)return[Object(a.o)(y,r,c,h)]}else if(1===e.type&&(p>=0||1===t.type))return[Object(a.o)(y,r,c,h)];return[]}function f(e,t,r){var i=[],n=Object(a.d)(v,e.end,e.start),o=Object(a.d)(m,e.start,t),s=Object(a.p)(n),c=2*Object(a.g)(n,o),l=c*c-4*s*(Object(a.p)(o)-r*r);if(0===l){var u=-c/(2*s);(1===e.type||u>=0)&&i.push(Object(a.o)(y,e.start,n,u))}else if(l>0){var d=Math.sqrt(l),h=(-c+d)/(2*s);(1===e.type||h>=0)&&i.push(Object(a.o)(y,e.start,n,h));var p=(-c-d)/(2*s);(1===e.type||p>=0)&&i.push(Object(a.o)(g,e.start,n,p))}return i}var b=1e-6,v=Object(n.a)(),m=Object(n.a)(),g=Object(n.a)(),y=Object(n.a)()},,,,,,,,,,,,,,,,,,,,,,function(e,t,r){"use strict";r.d(t,"a",(function(){return m}));var i=r(217),n=r(113),a=r(141),o=(r(101),r(356)),s=r(105),c=r(220),l=r(291),u=(r(138),r(123)),d=r(104),h=r(202),p=r(135),f=r(685),b=r(515),v=r(645);class m extends v.a{visualizeIntersectionPoint(e,t){return this._visualizeSnappingIndicator({geometry:new n.a({x:e.intersectionPoint[0],y:e.intersectionPoint[1],spatialReference:t.coordinateHelper.spatialReference}),symbol:O,context:t})}visualizePoint(e,t){return this._visualizeSnappingIndicator({geometry:new n.a({x:e.point[0],y:e.point[1],spatialReference:t.coordinateHelper.spatialReference}),symbol:j,context:t})}visualizeLine(e,t){return this._visualizeSnappingIndicator({geometry:new a.a({paths:[[e.lineStart,e.lineEnd]],spatialReference:t.coordinateHelper.spatialReference}),symbol:_,context:t})}visualizeParallelSign(e,t){return this._visualizeSnappingIndicator({geometry:new a.a({paths:[[e.lineStart,e.lineEnd]],spatialReference:t.coordinateHelper.spatialReference}),symbol:w,context:t})}visualizeRightAngleQuad(e,t){return this._visualizeSnappingIndicator({geometry:new a.a({paths:[[e.previousVertex,e.centerVertex,e.nextVertex]],spatialReference:t.coordinateHelper.spatialReference}),symbol:T(e),context:t})}_visualizeSnappingIndicator(e){var{geometry:t,symbol:r,context:n}=e,a=new u.a({geometry:t,symbol:r});return n.view.graphics.add(a),Object(i.c)((()=>{n.view.graphics.remove(a)}))}}var g=f.a.main.toArray(),y=[...f.a.main.toRgb(),100],O=new l.a({outline:new c.a({width:1.5,color:g}),size:15,color:[0,0,0,0]}),j=new l.a({outline:{width:.5,color:[0,0,0,1]},size:10,color:g}),_=new o.a({data:{type:"CIMSymbolReference",symbol:{type:"CIMLineSymbol",symbolLayers:[{type:"CIMSolidStroke",enable:!0,capStyle:"Butt",joinStyle:"Round",miterLimit:10,width:Object(s.i)(b.a.lineHintWidthTarget),color:g}]}}}),w=new o.a({data:{type:"CIMSymbolReference",symbol:{type:"CIMLineSymbol",symbolLayers:[{type:"CIMVectorMarker",enable:!0,anchorPoint:{x:0,y:-1,z:0},anchorPointUnits:"Relative",size:5,markerPlacement:{type:"CIMMarkerPlacementOnLine",placePerPart:!0,angleToLine:!0,relativeTo:"LineMiddle"},frame:{xmin:-5,ymin:-1.5,xmax:5,ymax:1.5},markerGraphics:[{type:"CIMMarkerGraphic",geometry:{rings:[[[7,0],[-7,0],[-7,1.5],[7,1.5]]]},symbol:{type:"CIMPolygonSymbol",symbolLayers:[{type:"CIMSolidFill",enable:!0,color:g}]}}],scaleSymbolsProportionally:!0,respectFrame:!0},{type:"CIMVectorMarker",enable:!0,anchorPoint:{x:0,y:1,z:0},anchorPointUnits:"Relative",size:5,markerPlacement:{type:"CIMMarkerPlacementOnLine",placePerPart:!0,angleToLine:!0,relativeTo:"LineMiddle"},frame:{xmin:-5,ymin:-1.5,xmax:5,ymax:1.5},markerGraphics:[{type:"CIMMarkerGraphic",geometry:{rings:[[[7,0],[-7,0],[-7,-1.5],[7,-1.5]]]},symbol:{type:"CIMPolygonSymbol",symbolLayers:[{type:"CIMSolidFill",enable:!0,color:g}]}}],scaleSymbolsProportionally:!0,respectFrame:!0}]}}}),x=e=>new o.a({data:{type:"CIMSymbolReference",symbol:{type:"CIMLineSymbol",symbolLayers:[{type:"CIMVectorMarker",enable:!0,anchorPoint:{x:.5,y:.5,z:0},anchorPointUnits:"Relative",size:Object(s.i)(b.a.rightAngleHintSize),rotation:e,markerPlacement:{type:"CIMMarkerPlacementOnVertices",placePerPart:!0,angleToLine:!0,placeOnEndPoints:!1},frame:{xmin:-5,ymin:-5,xmax:5,ymax:5},markerGraphics:[{type:"CIMMarkerGraphic",geometry:{paths:[[[5,-5],[-5,-5],[-5,5],[5,5],[5,-5]]]},symbol:{type:"CIMLineSymbol",symbolLayers:[{type:"CIMSolidStroke",enable:!0,capStyle:"Butt",joinStyle:"Round",miterLimit:10,width:Object(s.i)(b.a.rightAngleHintOutlineSize),color:g},{type:"CIMSolidFill",enable:!0,color:y}]}}],scaleSymbolsProportionally:!0,respectFrame:!0}]}}}),S=x(45),M=x(225),T=(()=>{var e=Object(h.a)(),t=Object(h.a)(),r=Object(d.e)();return i=>(Object(p.d)(e,i.centerVertex,i.previousVertex),Object(p.d)(t,i.nextVertex,i.previousVertex),Object(p.f)(r,e,t),r[2]<0?S:M)})()},function(e,t,r){"use strict";r.d(t,"a",(function(){return n}));var i=r(504);class n extends i.a{constructor(e,t,r,i){super(e),this.dx=t,this.dy=r,this.dz=i}move(e,t,r,i){this.helper.addDelta(e.pos,t,r,i)}apply(e){this.move(e,this.dx,this.dy,this.dz)}undo(e){this.move(e,-this.dx,-this.dy,-this.dz)}canAccumulate(e){return e instanceof n}accumulate(e,t){this.move(e,t.dx,t.dy,t.dz)}accumulateParams(e){this.dx+=e.dx,this.dy+=e.dy,this.dz+=e.dz}}},function(e,t,r){"use strict";r.d(t,"a",(function(){return a}));var i=r(209),n=r(504);class a extends n.a{constructor(e,t,r,i=0){super(e),this.origin=t,this.angle=r,this.accumulationType=i}rotate(e,t){this.helper.rotate(e.pos,this.origin,t)}apply(e){this.rotate(e,this.angle)}undo(e){this.rotate(e,-this.angle)}canAccumulate(e){return e instanceof a&&Object(i.c)(this.origin,e.origin)}accumulate(e,t){var r=1===t.accumulationType;this.rotate(e,r?t.angle-this.angle:t.angle)}accumulateParams(e){var t=1===e.accumulationType;this.angle=t?e.angle:this.angle+e.angle}}},function(e,t,r){"use strict";r.d(t,"a",(function(){return s}));var i=r(209),n=r(202),a=r(135),o=r(504);class s extends o.a{constructor(e,t,r,i,o,s=0){super(e),this.origin=t,this.axis1=r,this.factor1=i,this.factor2=o,this.accumulationType=s,this.axis2=Object(a.r)(Object(n.a)(),r[1],-r[0])}scale(e,t,r){this.helper.scale(e.pos,this.origin,this.axis1,t),this.helper.scale(e.pos,this.origin,this.axis2,r)}apply(e){this.scale(e,this.factor1,this.factor2)}undo(e){this.scale(e,1/this.factor1,1/this.factor2)}canAccumulate(e){return e instanceof s&&Object(i.c)(this.origin,e.origin)&&Object(i.c)(this.axis1,e.axis1)}accumulate(e,t){1===t.accumulationType?this.scale(e,t.factor1/this.factor1,t.factor2/this.factor2):this.scale(e,t.factor1,t.factor2)}accumulateParams(e){var t=1===e.accumulationType;this.factor1=t?e.factor1:this.factor1*e.factor1,this.factor2=t?e.factor2:this.factor2*e.factor2}}},function(e,t,r){"use strict";r.d(t,"a",(function(){return s}));var i,n,a=r(120),o=r(119);function s(e){var t=Object(o.a)(i||(i=Object(a.a)(["\n    vec4 alignToPixelCenter(vec4 clipCoord, vec2 widthHeight) {\n      vec2 xy = vec2(0.500123) + 0.5 * clipCoord.xy / clipCoord.w;\n      vec2 pixelSz = vec2(1.0) / widthHeight;\n      vec2 ij = (floor(xy * widthHeight) + vec2(0.5)) * pixelSz;\n      vec2 result = (ij * 2.0 - vec2(1.0)) * clipCoord.w;\n      return vec4(result, clipCoord.zw);\n    }\n  "]))),r=Object(o.a)(n||(n=Object(a.a)(["\n\n    vec4 alignToPixelOrigin(vec4 clipCoord, vec2 widthHeight) {\n      vec2 xy = vec2(0.5) + 0.5 * clipCoord.xy / clipCoord.w;\n      vec2 pixelSz = vec2(1.0) / widthHeight;\n      vec2 ij = floor((xy + 0.5 * pixelSz) * widthHeight) * pixelSz;\n      vec2 result = (ij * 2.0 - vec2(1.0)) * clipCoord.w;\n      return vec4(result, clipCoord.zw);\n    }\n  "])));e.vertex.code.add(t),e.vertex.code.add(r),e.fragment.code.add(t),e.fragment.code.add(r)}},function(e,t,r){"use strict";r.d(t,"a",(function(){return s}));var i=r(89),n=r(108),a=r(453),o=r(509);class s{constructor(e){this.resourceFactory=e,this._resources=null,this._visible=!0,this._attached=!1}destroy(){this._destroyResources()}get object(){return Object(i.k)(this._resources)?this._resources.object:null}get resources(){return Object(i.k)(this._resources)?this._resources.external:null}get visible(){return this._visible}set visible(e){e!==this._visible&&(this._visible=e,this._syncVisible())}get attached(){return this._attached}set attached(e){e!==this._attached&&(this._attached=e,this._createOrDestroyResources())}recreate(){this.attached&&this._createResources()}recreateGeometry(){if(this.resourceFactory.recreateGeometry){var e=this.resourceFactory.view._stage;if(!Object(i.j)(this._resources)&&e){var t=this._resources.object;this._resources.external.forEach((t=>{2===t.type&&e.remove(t)})),t.removeAllGeometries();var r=this.resourceFactory.recreateGeometry(this._resources.external,t,this._resources.layer);e.addMany(r),this._resources.layer.commit()}}else this.recreate()}_createOrDestroyResources(){this._attached?this._resources||this._createResources():this._destroyResources()}_createResources(){this._destroyResources();var e=this.resourceFactory.view._stage;if(e){var t=new o.a({isPickable:!1});e.add(t);var r=new a.a({castShadow:!1}),i=this.resourceFactory.createResources(r,t);i.forEach((t=>e.add(t))),e.add(r),t.add(r),t.commit(),this._syncVisible();var s=this.resourceFactory.cameraChanged?Object(n.a)(this.resourceFactory.view.state,"camera",(e=>this.resourceFactory.cameraChanged(e))):null;this._resources={layer:t,object:r,external:i,cameraHandle:s}}}_destroyResources(){if(!Object(i.j)(this._resources)){var e=this.resourceFactory.view._stage;null==e||e.remove(this._resources.object),null==e||e.remove(this._resources.layer),this._resources.external.forEach((t=>{null==e||e.remove(t),"dispose"in t&&t.dispose()})),this._resources.object.dispose(),this._resources.cameraHandle&&this._resources.cameraHandle.remove(),this._resources=null}}_syncVisible(){Object(i.j)(this._resources)||(this._resources.object.setVisible(this._visible),this._resources.layer.commit())}}},function(e,t,r){"use strict";r.d(t,"a",(function(){return s})),r.d(t,"b",(function(){return c}));var i=r(89),n=r(105),a=r(340),o=r(327);class s{constructor(e,t,r,i=null){this.elevationInfo=e,this.defaultZ=t,this.view=r,this.excludeGraphics=i}screenToMap(e){if(Object(i.k)(this.defaultZ))return this.view.sceneIntersectionHelper.intersectElevationFromScreen(Object(n.g)(e.x,e.y),this.elevationInfo,this.defaultZ,this.excludeGraphics);var t=this.view.sceneIntersectionHelper.intersectElevationFromScreen(Object(n.g)(e.x,e.y),this.elevationInfo,0,this.excludeGraphics);return Object(i.k)(t)&&(t.z=void 0),t}mapToScreen(e){var t=Object(o.d)(e.x,e.y,Object(a.a)(this.view,e,this.elevationInfo),e.spatialReference);return this.view.toScreen(t)}}class c{constructor(e,t,r=[]){this.view=e,this.elevationInfo=t,this.exclude=r}screenToMap(e){var t=this.view.toMap(e,{exclude:this.exclude});return Object(i.k)(t)&&(t.z=Object(a.f)(t,this.view,this.elevationInfo)),t}mapToScreen(e){var t=e;return Object(i.k)(this.elevationInfo)&&(t=Object(o.d)(e.x,e.y,Object(a.a)(this.view,e,this.elevationInfo),e.spatialReference)),this.view.toScreen(t)}}},,,,function(e,t,r){"use strict";r.d(t,"a",(function(){return ke}));var i=r(89),n=r(110),a=r(104),o=r(111),s=r(223),c=r(200),l=r(191),u=r(279),d=r(177),h=r(370),p=r(91),f=r(105),b=r(157),v=r(125),m=r(332),g=r(174),y=r(202),O=r(305),j=r(135),_=r(368),w=r(179),x=r(378),S=r(357),M=r(550);function T(e){return(t=e)instanceof Float32Array&&t.length>=16||function(e){return Array.isArray(e)&&e.length>=16}(e);var t}var P=r(664),E=r(328),C=r(379),A=r(491),I=r(582),k=r(82),F=r(300),R=r(307),D=r(313),L=r(306),N=r(286),V=r(267),z=r(380),G=r(249),U=r(487),q=r(628),H=r(647),B=r(629),W=r(322),J=r(426),Z=r(618),X=r(349);class Y extends R.a{initializeProgram(e){var t=Y.shader.get(),r=this.configuration,i=t.build({output:r.output,FrontFacePass:2===r.transparencyPassType,viewingMode:e.viewingMode,occlusionTestEnabled:r.occlusionTestEnabled,signedDistanceFieldEnabled:r.sdf,slicePlaneEnabled:r.slicePlaneEnabled,sliceHighlightDisabled:!1,sliceEnabledForVertexPrograms:!0,debugDrawBorder:r.debugDrawBorder,binaryHighlightOcclusionEnabled:r.binaryHighlightOcclusion,screenCenterOffsetUnitsEnabled:r.screenCenterOffsetUnitsEnabled,screenSizePerspectiveEnabled:r.screenSizePerspective,verticalOffsetEnabled:r.verticalOffset,pixelSnappingEnabled:r.pixelSnappingEnabled,vvSize:r.vvSize,vvColor:r.vvColor,vvInstancingEnabled:!1,isDraped:r.isDraped,multipassGeometryEnabled:r.multipassGeometryEnabled});return new N.a(e.rctx,i.generateSource("vertex"),i.generateSource("fragment"),L.a)}bindPass(e,t,r){z.a.bindProjectionMatrix(this.program,r.camera.projectionMatrix),this.program.setUniform1f("cameraGroundRelative",r.camera.aboveGround?1:-1),this.program.setUniform1f("perDistancePixelRatio",Math.tan(r.camera.fovY/2)/(r.camera.fullViewport[2]/2)),this.program.setUniformMatrix4fv("viewNormal",r.camera.viewInverseTransposeMatrix),this.program.setUniform1f("polygonOffset",t.shaderPolygonOffset),Z.a.bindUniforms(this.program,t,r),U.a.bindUniforms(this.program,t),this.program.setUniform1f("pixelRatio",r.camera.pixelRatio||1),z.a.bindViewport(this.program,r),6===this.configuration.output?(B.a.bindUniforms(this.program),this.program.setUniform2fv("cameraNearFar",r.camera.nearFar),this.program.setUniform2fv("inverseViewport",r.inverseViewport),Object(H.a)(this.program,e,r)):(q.a.bindUniforms(this.program,r),I.a.bindUniforms(this.program,t,r.camera.pixelRatio||1),J.a.bindUniforms(this.program,t),this.configuration.occlusionTestEnabled&&q.a.bindVisibilityTexture(e,this.program,r)),4===this.configuration.output&&W.a.bindOutputHighlight(e,this.program,r)}bindDraw(e){z.a.bindView(this.program,e),z.a.bindCamPosition(this.program,e.origin,e.camera.viewInverseTransposeMatrix),G.a.bindUniformsWithOrigin(this.program,this.configuration,e)}setPipelineState(e){var t=this.configuration,r=3===e,i=2===e,n=this.configuration.polygonOffsetEnabled&&Q,a=(r||i)&&4!==t.output?(t.depthEnabled||6===t.output)&&V.c:null;return Object(V.d)({blending:0===t.output||7===t.output||4===t.output?r?K:Object(X.a)(e):null,depthTest:{func:515},depthWrite:a,colorWrite:V.b,polygonOffset:n})}initializePipeline(){return this.setPipelineState(this.configuration.transparencyPassType)}get primitiveType(){return 6===this.configuration.output?0:4}}Y.shader=new F.a(I.b,(()=>r.e(295).then(r.bind(null,1187))));var Q={factor:0,units:-4},K=Object(V.f)(1,771);class $ extends D.a{constructor(){super(...arguments),this.output=0,this.occlusionTestEnabled=!0,this.sdf=!1,this.vvSize=!1,this.vvColor=!1,this.verticalOffset=!1,this.screenSizePerspective=!1,this.screenCenterOffsetUnitsEnabled=0,this.debugDrawBorder=!0,this.binaryHighlightOcclusion=!0,this.slicePlaneEnabled=!1,this.polygonOffsetEnabled=!1,this.depthEnabled=!0,this.transparencyPassType=3,this.pixelSnappingEnabled=!0,this.isDraped=!1,this.multipassGeometryEnabled=!1}}Object(k.a)([Object(D.b)({count:8})],$.prototype,"output",void 0),Object(k.a)([Object(D.b)()],$.prototype,"occlusionTestEnabled",void 0),Object(k.a)([Object(D.b)()],$.prototype,"sdf",void 0),Object(k.a)([Object(D.b)()],$.prototype,"vvSize",void 0),Object(k.a)([Object(D.b)()],$.prototype,"vvColor",void 0),Object(k.a)([Object(D.b)()],$.prototype,"verticalOffset",void 0),Object(k.a)([Object(D.b)()],$.prototype,"screenSizePerspective",void 0),Object(k.a)([Object(D.b)({count:2})],$.prototype,"screenCenterOffsetUnitsEnabled",void 0),Object(k.a)([Object(D.b)()],$.prototype,"debugDrawBorder",void 0),Object(k.a)([Object(D.b)()],$.prototype,"binaryHighlightOcclusion",void 0),Object(k.a)([Object(D.b)()],$.prototype,"slicePlaneEnabled",void 0),Object(k.a)([Object(D.b)()],$.prototype,"polygonOffsetEnabled",void 0),Object(k.a)([Object(D.b)()],$.prototype,"depthEnabled",void 0),Object(k.a)([Object(D.b)({count:4})],$.prototype,"transparencyPassType",void 0),Object(k.a)([Object(D.b)()],$.prototype,"pixelSnappingEnabled",void 0),Object(k.a)([Object(D.b)()],$.prototype,"isDraped",void 0),Object(k.a)([Object(D.b)()],$.prototype,"multipassGeometryEnabled",void 0);class ee extends C.a{constructor(e){super(e,_e),this.techniqueConfig=new $}getTechniqueConfig(e,t){return this.techniqueConfig.output=e,this.techniqueConfig.slicePlaneEnabled=this.params.slicePlaneEnabled,this.techniqueConfig.verticalOffset=!!this.params.verticalOffset,this.techniqueConfig.screenSizePerspective=!!this.params.screenSizePerspective,this.techniqueConfig.screenCenterOffsetUnitsEnabled="screen"===this.params.centerOffsetUnits?1:0,this.techniqueConfig.polygonOffsetEnabled=this.params.polygonOffset,this.techniqueConfig.isDraped=this.params.isDraped,this.techniqueConfig.occlusionTestEnabled=this.params.occlusionTest,this.techniqueConfig.pixelSnappingEnabled=this.params.pixelSnappingEnabled,this.techniqueConfig.sdf=this.params.textureIsSignedDistanceField,this.techniqueConfig.vvSize=!!this.params.vvSizeEnabled,this.techniqueConfig.vvColor=!!this.params.vvColorEnabled,0===e&&(this.techniqueConfig.debugDrawBorder=!!this.params.debugDrawBorder),4===e&&(this.techniqueConfig.binaryHighlightOcclusion=this.params.binaryHighlightOcclusion),this.techniqueConfig.depthEnabled=this.params.depthEnabled,this.techniqueConfig.transparencyPassType=t?t.transparencyPassType:3,this.techniqueConfig.multipassGeometryEnabled=!!t&&t.multipassGeometryEnabled,this.techniqueConfig}intersect(e,t,r,i,n,a,o,s,c){c?this.intersectDrapedHudGeometry(e,a,o,s):this.intersectHudGeometry(e,t,r,i,o,s)}intersectDrapedHudGeometry(e,t,r,n){var a=e.vertexAttributes.get("position"),o=e.vertexAttributes.get("size"),s=this.params,c=Object(I.d)(s),l=1,u=1;if(Object(i.k)(n)){var d=n(me);l=d[0],u=d[5]}l*=e.screenToWorldRatio,u*=e.screenToWorldRatio;for(var h=ye*e.screenToWorldRatio,p=0;p<a.data.length/a.size;p++){var f=p*a.size,b=a.data[f],v=a.data[f+1],m=p*o.size,g=void 0;Oe[0]=o.data[m]*l,Oe[1]=o.data[m+1]*u,s.textureIsSignedDistanceField&&(g=s.outlineSize*e.screenToWorldRatio/2),ne(t,b,v,Oe,h,g,s,c)&&r()}}intersectHudGeometry(e,t,r,n,s,c){if(n.options.selectionMode&&n.options.hud&&!Object(S.d)(t)){var l=this.params,u=1,d=1;if(Object(O.d)(he,r),Object(i.k)(c)){var h=c(me);u=h[0],d=h[5],function(e){var t=e[0],r=e[1],i=e[2],n=e[3],a=e[4],o=e[5],s=e[6],c=e[7],l=e[8],u=1/Math.sqrt(t*t+r*r+i*i),d=1/Math.sqrt(n*n+a*a+o*o),h=1/Math.sqrt(s*s+c*c+l*l);e[0]=t*u,e[1]=r*u,e[2]=i*u,e[3]=n*d,e[4]=a*d,e[5]=o*d,e[6]=s*h,e[7]=c*h,e[8]=l*h}(he)}var p=e.vertexAttributes.get("position"),f=e.vertexAttributes.get("size"),v=e.vertexAttributes.get("normal"),m=e.vertexAttributes.get("auxpos1");Object(w.a)(p.size>=3);var g=n.point,y=n.camera,j=Object(I.d)(l);u*=y.pixelRatio,d*=y.pixelRatio;for(var _="screen"===this.params.centerOffsetUnits,x=0;x<p.data.length/p.size;x++){var T=x*p.size;Object(o.v)(se,p.data[T],p.data[T+1],p.data[T+2]),Object(o.l)(se,se,r);var P=x*f.size;Oe[0]=f.data[P]*u,Oe[1]=f.data[P+1]*d,Object(o.l)(se,se,y.viewMatrix);var E=x*m.size;if(Object(o.v)(be,m.data[E+0],m.data[E+1],m.data[E+2]),!_&&(se[0]+=be[0],se[1]+=be[1],0!==be[2])){var C=be[2];Object(o.q)(be,se),Object(o.i)(se,se,Object(o.d)(be,be,C))}var A=x*v.size;if(Object(o.v)(ce,v.data[A],v.data[A+1],v.data[A+2]),this.normalAndViewAngle(ce,he,y,ve),this.applyVerticalOffsetTransformationView(se,ve,y,ae),y.applyProjection(se,le),le[0]>-1){var k=Math.floor(le[0])+this.params.screenOffset[0],F=Math.floor(le[1])+this.params.screenOffset[1];_&&(k+=be[0],0!==be[1]&&(F+=Object(M.b)(be[1],ae.factorAlignment))),Object(M.a)(Oe,ae.factor,Oe);var R=ge*y.pixelRatio,D=void 0;if(l.textureIsSignedDistanceField&&(D=l.outlineSize*y.pixelRatio/2),ne(g,k,F,Oe,R,D,l,j)){var L=n.ray;if(Object(o.l)(de,se,Object(b.a)(fe,y.viewMatrix)),le[0]=g[0],le[1]=g[1],y.unprojectFromRenderScreen(le,se)){var N=Object(a.e)();Object(o.j)(N,L.direction);var V=1/Object(o.o)(N);Object(o.d)(N,N,V),s(Object(o.n)(L.origin,se)*V,N,-1,1,!0,de)}}}}}}computeAttachmentOrigin(e,t){var r=e.vertexAttributes;if(!r)return!1;var i=r.get("position"),n=e.indices.get("position");return Object(x.b)(i,n,t)}createBufferWriter(){return new xe(this)}normalAndViewAngle(e,t,r,i){return T(t)&&(t=Object(O.d)(pe,t)),Object(o.w)(i.normal,e,t),Object(o.l)(i.normal,i.normal,r.viewInverseTransposeMatrix),i.cosAngle=Object(o.g)(ue,je),i}updateScaleInfo(e,t,r){var i=this.params;i.screenSizePerspective?Object(M.c)(r,t,i.screenSizePerspective,e.factor):(e.factor.scale=1,e.factor.factor=0,e.factor.minPixelSize=0,e.factor.paddingPixels=0),i.screenSizePerspectiveAlignment?Object(M.c)(r,t,i.screenSizePerspectiveAlignment,e.factorAlignment):(e.factorAlignment.factor=e.factor.factor,e.factorAlignment.scale=e.factor.scale,e.factorAlignment.minPixelSize=e.factor.minPixelSize,e.factorAlignment.paddingPixels=e.factor.paddingPixels)}applyShaderOffsetsView(e,t,r,i,n,a,o){var s=this.normalAndViewAngle(t,r,n,ve);return this.applyVerticalGroundOffsetView(e,s,n,o),this.applyVerticalOffsetTransformationView(o,s,n,a),this.applyPolygonOffsetView(o,s,i[3],n,o),this.applyCenterOffsetView(o,i,o),o}applyShaderOffsetsNDC(e,t,r,n,a){return this.applyCenterOffsetNDC(e,t,r,n),Object(i.k)(a)&&Object(o.j)(a,n),this.applyPolygonOffsetNDC(n,t,r,n),n}applyPolygonOffsetView(e,t,r,i,a){var s=i.aboveGround?1:-1,c=Object(n.r)(r);0===c&&(c=s);var l=s*c;if(this.params.shaderPolygonOffset<=0)return Object(o.j)(a,e);var u=Object(n.d)(Math.abs(t.cosAngle),.01,1),d=1-Math.sqrt(1-u*u)/u/i.viewport[2];return Object(o.d)(a,e,l>0?d:1/d),a}applyVerticalGroundOffsetView(e,t,r,i){var n=Object(o.o)(e),a=r.aboveGround?1:-1,s=.5*r.computeRenderPixelSizeAtDist(n),c=Object(o.d)(se,t.normal,a*s);return Object(o.e)(i,e,c),i}applyVerticalOffsetTransformationView(e,t,r,i){var n=this.params;if(!n.verticalOffset||!n.verticalOffset.screenLength){if(n.screenSizePerspective||n.screenSizePerspectiveAlignment){var a=Object(o.o)(e);this.updateScaleInfo(i,a,t.cosAngle)}else i.factor.scale=1,i.factorAlignment.scale=1;return e}var s=Object(o.o)(e),c=n.screenSizePerspectiveAlignment||n.screenSizePerspective,l=Object(E.g)(r,s,n.verticalOffset,t.cosAngle,c);return this.updateScaleInfo(i,s,t.cosAngle),Object(o.d)(t.normal,t.normal,l),Object(o.e)(e,e,t.normal)}applyCenterOffsetView(e,t,r){var i="screen"!==this.params.centerOffsetUnits;return r!==e&&Object(o.j)(r,e),i&&(r[0]+=t[0],r[1]+=t[1],t[2]&&(Object(o.q)(ce,r),Object(o.e)(r,r,Object(o.d)(ce,ce,t[2])))),r}applyCenterOffsetNDC(e,t,r,i){var n="screen"!==this.params.centerOffsetUnits;return i!==e&&Object(o.j)(i,e),n||(i[0]+=t[0]/r.fullWidth*2,i[1]+=t[1]/r.fullHeight*2),i}applyPolygonOffsetNDC(e,t,r,i){var a=this.params.shaderPolygonOffset;if(e!==i&&Object(o.j)(i,e),a){var s=r.aboveGround?1:-1,c=s*Object(n.r)(t[3]);i[2]-=(c||s)*a}return i}getGLMaterial(e){return 0===e.output||7===e.output?new re(e):4===e.output?new ie(e):void 0}calculateRelativeScreenBounds(e,t,r=Object(v.i)()){return function(e,t,r,i=oe){Object(j.c)(i,e.anchorPos),i[0]*=-t[0],i[1]*=-t[1],i[0]+=e.screenOffset[0]*r,i[1]+=e.screenOffset[1]*r}(this.params,e,t,r),r[2]=r[0]+e[0],r[3]=r[1]+e[1],r}}class te extends P.a{constructor(e){super(Object(p.a)(Object(p.a)({},e),e.material.params)),this.updateParameters()}beginSlot(e){return e===(this.material.params.drawInSecondSlot?19:18)}updateParameters(e){this.updateTexture(this.material.params.textureId),this.selectProgram(e)}selectProgram(e){this.technique=this.techniqueRep.acquireAndReleaseExisting(Y,this.material.getTechniqueConfig(this.output,e),this.technique)}ensureParameters(e){this.updateParameters(e)}bind(e,t){e.bindProgram(this.technique.program),this.bindTexture(e,this.technique.program),this.bindTextureScale(e,this.technique.program),this.technique.bindPass(e,this.material.params,t)}}class re extends te{constructor(e){super(e),this.isOcclusionSlot=!1}beginSlot(e){var t=this.material.params.drawInSecondSlot?19:18;return this.material.params.occlusionTest?(this.isOcclusionSlot=12===e,12===e||e===t):(this.isOcclusionSlot=!1,e===t)}getTechnique(){return this.isOcclusionSlot?this.occlusionTechnique:this.technique}selectProgram(e){this.technique=this.techniqueRep.acquireAndReleaseExisting(Y,this.material.getTechniqueConfig(this.output,e),this.technique),this.occlusionTechnique=this.techniqueRep.acquireAndReleaseExisting(Y,this.material.getTechniqueConfig(6,e),this.occlusionTechnique)}bind(e,t){var r=this.getTechnique();e.bindProgram(r.program),this.isOcclusionSlot||(this.bindTexture(e,r.program),this.bindTextureScale(e,r.program)),r.bindPass(e,this.material.params,t)}}class ie extends te{constructor(e){super(Object(p.a)(Object(p.a)({},e),{},{output:4}))}}function ne(e,t,r,i,n,a,o,s){var c=t-n-(s[0]>0?i[0]*s[0]:0),l=c+i[0]+2*n,u=r-n-(s[1]>0?i[1]*s[1]:0),d=u+i[1]+2*n;if(o.textureIsSignedDistanceField){var h=o.distanceFieldBoundingBox;c+=i[0]*h[0],u+=i[1]*h[1],l-=i[0]*(1-h[2]),d-=i[1]*(1-h[3]),c-=a,l+=a,u-=a,d+=a}return e[0]>c&&e[0]<l&&e[1]>u&&e[1]<d}var ae={factor:{scale:0,factor:0,minPixelSize:0,paddingPixels:0},factorAlignment:{scale:0,factor:0,minPixelSize:0,paddingPixels:0}},oe=Object(y.a)(),se=Object(a.e)(),ce=Object(a.e)(),le=Object(f.e)(),ue=Object(a.e)(),de=Object(a.e)(),he=Object(m.a)(),pe=Object(m.a)(),fe=Object(g.b)(),be=Object(a.e)(),ve={normal:ue,cosAngle:0},me=Object(g.b)(),ge=1,ye=2,Oe=[0,0],je=Object(a.g)(0,0,1),_e=Object(p.a)({texCoordScale:[1,1],occlusionTest:!0,binaryHighlightOcclusion:!0,drawInSecondSlot:!1,color:[1,1,1,1],outlineColor:[1,1,1,1],outlineSize:0,textureIsSignedDistanceField:!1,distanceFieldBoundingBox:null,vvSizeEnabled:!1,vvSizeMinSize:[1,1,1],vvSizeMaxSize:[100,100,100],vvSizeOffset:[0,0,0],vvSizeFactor:[1,1,1],vvColorEnabled:!1,vvColorValues:[0,0,0,0,0,0,0,0],vvColorColors:[1,0,0,0,1,0,0,0,1,0,0,0,1,0,0,0,1,0,0,0,1,0,0,0,1,0,0,0,1,0,0,0],screenOffset:[0,0],verticalOffset:null,screenSizePerspective:null,screenSizePerspectiveAlignment:null,slicePlaneEnabled:!1,anchorPos:Object(y.e)(.5,.5),shaderPolygonOffset:1e-5,polygonOffset:!1,textureId:null,centerOffsetUnits:"world",depthEnabled:!0,pixelSnappingEnabled:!0,debugDrawBorder:!1,isDraped:!1},C.b),we=Object(_.a)().vec3f("position").vec3f("normal").vec2f("uv0").vec4u8("color").vec2f("size").vec4f("auxpos1").vec4f("auxpos2");class xe{constructor(e){this.material=e,this.vertexBufferLayout=we}allocate(e){return this.vertexBufferLayout.createBuffer(e)}elementCount(e){return 6*e.indices.get("position").length}write(e,t,r,i){Object(A.e)(t.indices.get("position"),t.vertexAttributes.get("position").data,e.transformation,r.position,i,6),Object(A.d)(t.indices.get("normal"),t.vertexAttributes.get("normal").data,e.invTranspTransformation,r.normal,i,6);var n,a,o,s,c=t.vertexAttributes.get("uv0").data;if(null==c||c.length<4){var l=this.material.params;n=0,a=0,o=l.texCoordScale[0],s=l.texCoordScale[1]}else n=c[0],a=c[1],o=c[2],s=c[3];o=Math.min(1.99999,o+1),s=Math.min(1.99999,s+1);for(var u=t.indices.get("position").length,d=r.uv0,h=i,p=0;p<u;++p)d.set(h,0,n),d.set(h,1,a),h+=1,d.set(h,0,o),d.set(h,1,a),h+=1,d.set(h,0,o),d.set(h,1,s),h+=1,d.set(h,0,o),d.set(h,1,s),h+=1,d.set(h,0,n),d.set(h,1,s),h+=1,d.set(h,0,n),d.set(h,1,a),h+=1;Object(A.b)(t.indices.get("color"),t.vertexAttributes.get("color").data,4,r.color,i,6);for(var f=t.indices.get("size"),b=t.vertexAttributes.get("size").data,v=f.length,m=r.size,g=i,y=0;y<v;++y)for(var O=b[2*f[y]],j=b[2*f[y]+1],_=0;_<6;++_)m.set(g,0,O),m.set(g,1,j),g+=1;t.indices.get("auxpos1")&&t.vertexAttributes.get("auxpos1")&&Object(A.a)(t.indices.get("auxpos1"),t.vertexAttributes.get("auxpos1").data,r.auxpos1,i,6),t.indices.get("auxpos2")&&t.vertexAttributes.get("auxpos2")&&Object(A.a)(t.indices.get("auxpos2"),t.vertexAttributes.get("auxpos2").data,r.auxpos2,i,6)}}var Se=r(601),Me=r(654);r(80);function Te(e,t,r){switch(e){case"circle":return Pe(t,r);case"square":return function(e,t){return Ee(e,t,!1)}(t,r);case"cross":return function(e,t){return Ce(e,t,!1)}(t,r);case"x":return function(e,t){return Ce(e,t,!0)}(t,r);case"kite":return function(e,t){return Ee(e,t,!0)}(t,r);case"triangle":return function(e,t){for(var r=new Uint8Array(4*e*e),i=1,n=-.5,a=Math.sqrt(i*i+n*n),o=(e-t)/2,s=0;s<e;s++)for(var c=0;c<e;c++){var l=s*e+c,u=(c-o)/t,d=(s-o+.75)/t,h=-(i*u+n*d)/a,p=(i*(u-1)+n*-d)/a,f=-d,b=Math.max(h,p,f);Object(w.h)(b*t/e+.5,r,4*l)}return r}(t,r);default:return Pe(t,r)}}function Pe(e,t){for(var r=e,i=new Uint8Array(4*r*r),n=r/2-.5,a=t/2,o=0;o<r;o++)for(var s=0;s<r;s++){var c=s+r*o,l=s-n,u=o-n,d=Math.sqrt(l*l+u*u)-a;d=d/e+.5,Object(w.h)(d,i,4*c)}return i}function Ee(e,t,r){r&&(t/=Math.SQRT2);for(var i=new Uint8Array(4*e*e),n=0;n<e;n++)for(var a=0;a<e;a++){var o=a-.5*e+.25,s=.5*e-n-.75,c=n*e+a;if(r){var l=(o+s)/Math.SQRT2;s=(s-o)/Math.SQRT2,o=l}var u=Math.max(Math.abs(o),Math.abs(s))-.5*t;u=u/e+.5,Object(w.h)(u,i,4*c)}return i}function Ce(e,t,r){r&&(t*=Math.SQRT2);for(var i=.5*t,n=new Uint8Array(4*e*e),a=0;a<e;a++)for(var o=0;o<e;o++){var s=o-.5*e,c=.5*e-a-1,l=a*e+o;if(r){var u=(s+c)/Math.SQRT2;c=(c-s)/Math.SQRT2,s=u}var d=void 0;d=(d=(s=Math.abs(s))>(c=Math.abs(c))?s>i?Math.sqrt((s-i)*(s-i)+c*c):c:c>i?Math.sqrt(s*s+(c-i)*(c-i)):s)/e+.5,Object(w.h)(d,n,4*l)}return n}var Ae=r(653),Ie=r(719);class ke{constructor(e){this.view=null,this._geometry=null,this._size=3,this._color=Object(c.d)(1,0,1,1),this._pixelSnappingEnabled=!0,this._primitive="square",this._outlineSize=1,this._outlineColor=Object(c.d)(1,1,1,1),this._elevationInfo=null,this.resources=new Ie.a({view:e.view,createResources:e=>this.createResources(e),recreateGeometry:(e,t)=>(e.geometry=this.recreateGeometry(t,e.material),Object(i.k)(e.geometry)?[e.geometry]:[])});var t=!0;for(var r in e)r in this?"attached"===r?t=e[r]:this[r]=e[r]:console.error("Cannot set unknown property",r);this.attached=t}destroy(){this.resources.destroy()}get visible(){return this.resources.visible}set visible(e){this.resources.visible=e}get attached(){return this.resources.attached}set attached(e){this.resources.attached=e}get geometry(){return this._geometry}set geometry(e){this._geometry=e,this.resources.recreateGeometry()}get size(){return this._size}set size(e){if(e!==this._size){var t=this.preferredTextureSize;this._size=e,t<this.preferredTextureSize?Object(i.k)(this.resources)&&this.resources.recreate():this.updateSizeAttribute()}}get color(){return this._color}set color(e){Object(l.g)(e,this._color)||(Object(l.c)(this._color,e),this.updateMaterial())}get pixelSnappingEnabled(){return this._pixelSnappingEnabled}set pixelSnappingEnabled(e){this._pixelSnappingEnabled!==e&&(this._pixelSnappingEnabled=e,this.updateMaterial())}get primitive(){return this._primitive}set primitive(e){this._primitive!==e&&(this._primitive=e,Object(i.k)(this.resources)&&this.resources.recreate())}get outlineSize(){return this._outlineSize}set outlineSize(e){e!==this._outlineSize&&(this._outlineSize=e,this.updateMaterial())}get outlineColor(){return this._outlineColor}set outlineColor(e){Object(l.g)(e,this._outlineColor)||(Object(l.c)(this._outlineColor,e),this.updateMaterial())}get elevationInfo(){return this._elevationInfo}set elevationInfo(e){this._elevationInfo=e,this.resources&&this.resources.recreateGeometry()}updateMaterial(){var e=this.resources.resources;Object(i.j)(e)||e.material.setParameterValues(this.materialParameters(e.texture.id))}updateSizeAttribute(){var e=this.resources.resources,t=this.resources.object;if(!Object(i.j)(e)&&!Object(i.j)(t)){var r=e.geometry;if(!Object(i.j)(r)){var n=r.getMutableAttribute("size").data,a=this.geometrySize;n[0]=a,n[1]=a,t.geometryVertexAttrsUpdated(0)}}}materialParameters(e){return{color:this._color,textureIsSignedDistanceField:!0,distanceFieldBoundingBox:Re,occlusionTest:!1,outlineColor:this._outlineColor,outlineSize:this._outlineSize,textureId:e,polygonOffset:!1,shaderPolygonOffset:0,drawInSecondSlot:!0,depthEnabled:!1,pixelSnappingEnabled:this.pixelSnappingEnabled}}get geometrySize(){return this._size/Fe}recreateGeometry(e,t){var r=this.createRenderGeometry();return Object(i.k)(r)&&e.addGeometry(r,t),r}createResources(e){var t=this.createTexture(),r=new ee(this.materialParameters(t.id)),n=this.recreateGeometry(e,r);return{material:r,texture:t,geometry:n,forEach(e){e(t),e(r),Object(i.k)(this.geometry)&&e(this.geometry)}}}get preferredTextureSize(){return Object(n.d)(Object(n.o)(2*this.geometrySize),16,128)}createTexture(){var e=this.preferredTextureSize;return new Ae.a(Te(this._primitive,e,e*Fe),{mipmap:!1,wrap:{s:33071,t:33071},width:e,height:e,components:4,noUnpackFlip:!0})}calculateMapBounds(e){if(Object(i.j)(this.resources.resources)||Object(i.j)(this.resources.resources.geometry))return!1;var t=this.resources.resources.geometry.vertexAttributes.get("position");return Object(s.r)(t.data,this.view.renderCoordsHelper.spatialReference,De,this.view.spatialReference),Object(u.h)(e,De),!0}createRenderGeometry(){var e=this.geometry;if(Object(i.j)(e))return null;var{renderCoordsHelper:t,elevationProvider:r}=this.view,n=Object(Se.c)(e,r,Me.a.fromElevationInfo(this.elevationInfo),t),a=Object(o.v)(d.d.get(),e.x,e.y,n),c=d.d.get();Object(s.r)(a,e.spatialReference,c,t.spatialReference);var l=this.geometrySize;return h.a.createPointGeometry(null,c,null,[l,l],[0,0,0,1])}}var Fe=.5,Re=[Fe/2,Fe/2,1-Fe/2,1-Fe/2],De=Object(a.e)()},,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,r){"use strict";r.r(t);var i=r(91),n=r(7),a=r(82),o=(r(80),r(92)),s=r(124),c=r(89),l=(r(81),r(88),r(85)),u=r(98),d=r(175),h=r(84),p=r(96),f=r(93),b=(r(83),r(86),r(87),r(112)),v=r(99),m=r(103),g=(r(101),r(107)),y=r(220),O=r(211),j=r(291),_=r(345),w=(r(138),r(123)),x=r(218),S=r(186),M=r(223),T=r(283),P=r(236),E=r(155),C=r(215),A=r(273),I=r(204),k=r(271),F=r(514),R=r(829);function D(e){return e.layers.some((e=>null!=e.layerDefinition.visibilityField))}var L=new E.a({name:"OBJECTID",alias:"OBJECTID",type:"oid",nullable:!1,editable:!1}),N=new E.a({name:"title",alias:"Title",type:"string",nullable:!0,editable:!0}),V=class extends F.a{constructor(){super(...arguments),this.visibilityMode="inherited"}initialize(){for(var e of this.graphics)e.sourceLayer=this.layer;this.graphics.on("after-add",(e=>{e.item.sourceLayer=this.layer})),this.graphics.on("after-remove",(e=>{e.item.sourceLayer=null}))}get sublayers(){return this.graphics}};Object(a.a)([Object(l.b)({readOnly:!0})],V.prototype,"sublayers",null),Object(a.a)([Object(l.b)()],V.prototype,"layer",void 0),Object(a.a)([Object(l.b)({readOnly:!0})],V.prototype,"visibilityMode",void 0),V=Object(a.a)([Object(h.a)("esri.layers.MapNotesLayer.MapNotesSublayer")],V);var z=[{geometryType:"polygon",geometryTypeJSON:"esriGeometryPolygon",layerId:"polygonLayer",title:"Polygons",identifyingSymbol:(new O.a).toJSON()},{geometryType:"polyline",geometryTypeJSON:"esriGeometryPolyline",layerId:"polylineLayer",title:"Polylines",identifyingSymbol:(new y.a).toJSON()},{geometryType:"multipoint",geometryTypeJSON:"esriGeometryMultipoint",layerId:"multipointLayer",title:"Multipoints",identifyingSymbol:(new j.a).toJSON()},{geometryType:"point",geometryTypeJSON:"esriGeometryPoint",layerId:"pointLayer",title:"Points",identifyingSymbol:(new j.a).toJSON()},{geometryType:"point",geometryTypeJSON:"esriGeometryPoint",layerId:"textLayer",title:"Text",identifyingSymbol:(new _.a).toJSON()}],G=class extends(Object(C.a)(Object(I.a)(Object(T.a)(Object(A.a)(Object(S.a)(x.a)))))){constructor(e){super(e),this.capabilities={operations:{supportsMapNotesEditing:!0}},this.featureCollections=null,this.featureCollectionJSON=null,this.featureCollectionType="notes",this.legendEnabled=!1,this.minScale=0,this.maxScale=0,this.spatialReference=v.a.WGS84,this.sublayers=new g.a(z.map((e=>new V({id:e.layerId,title:e.title,layer:this})))),this.title="Map Notes",this.type="map-notes",this.visibilityMode="inherited"}readCapabilities(e,t,r){return{operations:{supportsMapNotesEditing:!D(t)&&"portal-item"!==(null==r?void 0:r.origin)}}}readFeatureCollections(e,t,r){if(!D(t))return null;var i=t.layers.map((e=>{var t=new k.default;return t.read(e,r),t}));return new g.a({items:i})}readLegacyfeatureCollectionJSON(e,t){return D(t)?Object(o.a)(t.featureCollection):null}readFullExtent(e,t){if(!t.layers.length)return new m.a({xmin:-180,ymin:-90,xmax:180,ymax:90,spatialReference:v.a.WGS84});var r=v.a.fromJSON(t.layers[0].layerDefinition.spatialReference);return t.layers.reduce(((e,t)=>{var r=t.layerDefinition.extent;return r?m.a.fromJSON(r).union(e):e}),new m.a({spatialReference:r}))}readMinScale(e,t){for(var r of t.layers)if(null!=r.layerDefinition.minScale)return r.layerDefinition.minScale;return 0}readMaxScale(e,t){for(var r of t.layers)if(null!=r.layerDefinition.maxScale)return r.layerDefinition.maxScale;return 0}get multipointLayer(){return this._findSublayer("multipointLayer")}get pointLayer(){return this._findSublayer("pointLayer")}get polygonLayer(){return this._findSublayer("polygonLayer")}get polylineLayer(){return this._findSublayer("polylineLayer")}readSpatialReference(e,t){return t.layers.length?v.a.fromJSON(t.layers[0].layerDefinition.spatialReference):v.a.WGS84}readSublayers(e,t,r){var i=this;if(D(t))return null;for(var n=[],a=function(e){var{layerDefinition:r,featureSet:a}=t.layers[e],o=null!=(s=r.geometryType)?s:a.geometryType,c=z.find((e=>{var t,i,n;return o===e.geometryTypeJSON&&(null==(t=r.drawingInfo)||null==(i=t.renderer)||null==(n=i.symbol)?void 0:n.type)===e.identifyingSymbol.type}));if(c){var l=new V({id:c.layerId,title:r.name,layer:i,graphics:a.features.map((({geometry:e,symbol:t,attributes:r,popupInfo:i})=>w.a.fromJSON({attributes:r,geometry:e,symbol:t,popupTemplate:i})))});n.push(l)}},o=0;o<t.layers.length;o++){var s;a(o)}return new g.a(n)}writeSublayers(e,t,r,i){var n=this,{minScale:a,maxScale:o}=this;if(!Object(c.j)(e)){var l=e.some((e=>e.graphics.length>0));if(this.capabilities.operations.supportsMapNotesEditing){var u=[],d=this.spatialReference.toJSON();e:for(var h of e)for(var p of h.graphics)if(Object(c.k)(p.geometry)){d=p.geometry.spatialReference.toJSON();break e}var b=function(t){var r=e.find((e=>t.layerId===e.id));n._writeMapNoteSublayer(u,r,t,a,o,d,i)};for(var v of z)b(v);Object(s.c)("featureCollection.layers",u,t)}else{var m;l&&(null==i||null==(m=i.messages)||m.push(new f.a("map-notes-layer:editing-not-supported","New map notes cannot be added to this layer")))}}}get textLayer(){return this._findSublayer("textLayer")}load(e){return this.addResolvingPromise(this.loadFromPortal({supportedTypes:["Feature Collection"]},e)),Promise.resolve(this)}read(e,t){"featureCollection"in e&&(e=Object(o.a)(e),Object.assign(e,e.featureCollection)),super.read(e,t)}beforeSave(){var e=this;return Object(n.a)((function*(){if(!Object(c.j)(e.sublayers)){var t=null,r=[];for(var i of e.sublayers)for(var n of i.graphics)if(Object(c.k)(n.geometry)){var a=n.geometry;t?Object(b.c)(a.spatialReference,t)||(Object(M.b)(a.spatialReference,t)||Object(M.g)()||(yield Object(M.i)()),n.geometry=Object(M.j)(a,t)):t=a.spatialReference,r.push(n)}var o=yield Object(P.a)(r.map((e=>e.geometry)));r.forEach(((e,t)=>e.geometry=o[t]))}}))()}_findSublayer(e){var t,r;return Object(c.j)(this.sublayers)?null:null!=(t=null==(r=this.sublayers)?void 0:r.find((t=>t.id===e)))?t:null}_writeMapNoteSublayer(e,t,r,i,n,a,s){var l=[];if(!Object(c.j)(t)){for(var u of t.graphics)this._writeMapNote(l,u,r.geometryType,s);this._normalizeObjectIds(l,L),e.push({layerDefinition:{name:t.title,drawingInfo:{renderer:{type:"simple",symbol:Object(o.a)(r.identifyingSymbol)}},geometryType:r.geometryTypeJSON,minScale:i,maxScale:n,objectIdField:"OBJECTID",fields:[L.toJSON(),N.toJSON()],spatialReference:a},featureSet:{features:l,geometryType:r.geometryTypeJSON}})}}_writeMapNote(e,t,r,n){if(!Object(c.j)(t)){var a,o,{geometry:s,symbol:l,popupTemplate:u}=t;if(!Object(c.j)(s))if(s.type===r)if(Object(c.j)(l))null==n||null==(o=n.messages)||o.push(new d.a("map-notes-layer:no-symbol","Skipping map notes with no symbol",{graphic:t}));else{var h={attributes:Object(i.a)({},t.attributes),geometry:s.toJSON(),symbol:l.toJSON()};Object(c.k)(u)&&(h.popupInfo=u.toJSON()),e.push(h)}else null==n||null==(a=n.messages)||a.push(new d.a("map-notes-layer:invalid-geometry-type",'Geometry "'.concat(s.type,'" cannot be saved in "').concat(r,'" layer'),{graphic:t}))}}_normalizeObjectIds(e,t){var r=t.name,i=Object(R.a)(r,e)+1,n=new Set;for(var a of e){a.attributes||(a.attributes={});var{attributes:o}=a;(null==o[r]||n.has(o[r]))&&(o[r]=i++),n.add(o[r])}}};Object(a.a)([Object(l.b)({readOnly:!0})],G.prototype,"capabilities",void 0),Object(a.a)([Object(u.a)(["portal-item","web-map"],"capabilities",["layers"])],G.prototype,"readCapabilities",null),Object(a.a)([Object(l.b)({readOnly:!0})],G.prototype,"featureCollections",void 0),Object(a.a)([Object(u.a)(["web-map","portal-item"],"featureCollections",["layers"])],G.prototype,"readFeatureCollections",null),Object(a.a)([Object(l.b)({readOnly:!0,json:{origins:{"web-map":{write:{enabled:!0,target:"featureCollection"}}}}})],G.prototype,"featureCollectionJSON",void 0),Object(a.a)([Object(u.a)(["web-map","portal-item"],"featureCollectionJSON",["featureCollection"])],G.prototype,"readLegacyfeatureCollectionJSON",null),Object(a.a)([Object(l.b)({readOnly:!0,json:{read:!1,write:{enabled:!0,ignoreOrigin:!0}}})],G.prototype,"featureCollectionType",void 0),Object(a.a)([Object(l.b)({json:{write:!1}})],G.prototype,"fullExtent",void 0),Object(a.a)([Object(u.a)(["web-map","portal-item"],"fullExtent",["layers"])],G.prototype,"readFullExtent",null),Object(a.a)([Object(l.b)({readOnly:!0,json:{origins:{"web-map":{write:{target:"featureCollection.showLegend",overridePolicy(){return{enabled:null!=this.featureCollectionJSON}}}}}}})],G.prototype,"legendEnabled",void 0),Object(a.a)([Object(l.b)({type:["show","hide"]})],G.prototype,"listMode",void 0),Object(a.a)([Object(l.b)({type:Number,nonNullable:!0,json:{write:!1}})],G.prototype,"minScale",void 0),Object(a.a)([Object(u.a)(["web-map","portal-item"],"minScale",["layers"])],G.prototype,"readMinScale",null),Object(a.a)([Object(l.b)({type:Number,nonNullable:!0,json:{write:!1}})],G.prototype,"maxScale",void 0),Object(a.a)([Object(u.a)(["web-map","portal-item"],"maxScale",["layers"])],G.prototype,"readMaxScale",null),Object(a.a)([Object(l.b)({readOnly:!0})],G.prototype,"multipointLayer",null),Object(a.a)([Object(l.b)({value:"ArcGISFeatureLayer",type:["ArcGISFeatureLayer"]})],G.prototype,"operationalLayerType",void 0),Object(a.a)([Object(l.b)({readOnly:!0})],G.prototype,"pointLayer",null),Object(a.a)([Object(l.b)({readOnly:!0})],G.prototype,"polygonLayer",null),Object(a.a)([Object(l.b)({readOnly:!0})],G.prototype,"polylineLayer",null),Object(a.a)([Object(l.b)({type:v.a})],G.prototype,"spatialReference",void 0),Object(a.a)([Object(u.a)(["web-map","portal-item"],"spatialReference",["layers"])],G.prototype,"readSpatialReference",null),Object(a.a)([Object(l.b)({readOnly:!0,json:{origins:{"web-map":{write:{ignoreOrigin:!0}}}}})],G.prototype,"sublayers",void 0),Object(a.a)([Object(u.a)("web-map","sublayers",["layers"])],G.prototype,"readSublayers",null),Object(a.a)([Object(p.a)("web-map","sublayers")],G.prototype,"writeSublayers",null),Object(a.a)([Object(l.b)({readOnly:!0})],G.prototype,"textLayer",null),Object(a.a)([Object(l.b)()],G.prototype,"title",void 0),Object(a.a)([Object(l.b)({readOnly:!0,json:{read:!1}})],G.prototype,"type",void 0);var U=G=Object(a.a)([Object(h.a)("esri.layers.MapNotesLayer")],G);t.default=U},,,,,,,,,,,,,function(e,t,r){"use strict";var i=r(91),n=r(82),a=(r(80),r(81)),o=(r(88),r(85)),s=r(84),c=(r(83),r(86),r(87),r(97)),l=r(89),u=r(113),d=(r(101),r(115)),h=r(334),p=r(363),f=r(7),b=r(94),v=r(131),m=r(105),g=r(327),y=r(714),O=r(531),j=r(264),_=r(522),w=r(516),x=class extends v.a.EventedAccessor{constructor(e){var t;super(e),this._hasZ=null,this._snappingTask=null,this._stagedVertex=null,this._stagedVertexUnsnapped=null,this._lastVertexUnsnapped=null,this._nativeEventHistory={undoStack:[],redoStack:[]},this.interactiveUndoDisabled=!1,this.history=[],this.redoHistory=[],this.snapToScene=!1,this.view=null,this.elevationInfo=null,this.defaultZ=0,this._coordinateHelper=Object(O.a)(e.hasZ,!1,e.view.spatialReference,"local"),this._snappingManager=e.snappingManager,this._editGeometry=new _.a(new j.c(this._coordinateHelper),null!=(t=e.editGeometryType)?t:"polygon"),this._snappingContext=new w.a({geometry:this._editGeometry,elevationInfo:{mode:"on-the-ground",offset:0},pointer:"mouse",visualizer:new y.a}),this._activeComponent=new j.a(this._editGeometry.editGeometry),this._editGeometry.editGeometry.components.push(this._activeComponent)}destroy(){this._snappingTask=Object(l.a)(this._snappingTask),Object(l.k)(this._snappingManager)&&this._snappingManager.doneSnapping(),this._editGeometry.destroy()}get _committedVertices(){return this._editGeometry.editGeometry.components[0].vertices.map((e=>e.pos))}get vertices(){return Object(l.k)(this._stagedVertex)?[...this._committedVertices,this._coordinateHelper.pointToArray(this._stagedVertex)]:this._committedVertices}get hasZ(){return Object(l.k)(this._hasZ)?this._hasZ:"3d"===this.view.type}set hasZ(e){this._hasZ=e,this.notifyChange("hasZ")}canUndo(){return this._editGeometry.editGeometry.canUndo}canRedo(){return this._editGeometry.editGeometry.canRedo}undo(){this.canUndo()&&this._editGeometry.undo()}redo(){this.canRedo()&&this._editGeometry.redo()}getCoordsFromScreenPoint(e){var t=this.screenToMap(e);return Object(l.k)(t)?t.hasZ?[t.x,t.y,t.z]:[t.x,t.y]:null}getCoordsAndPointFromScreenPoint(e){var t=this.screenToMap(e);return Object(l.k)(t)?t.hasZ?{vertex:[t.x,t.y,t.z],mapPoint:t}:{vertex:[t.x,t.y],mapPoint:t}:null}_pushCursorVertex(e){var t=this,r=Object(g.d)(e[0],e[1],null,this.view.spatialReference);this._stagedVertexUnsnapped=r,Object(l.j)(this._snappingManager)?this._stagedVertex=r:(this._stagedVertex=this._snappingManager.update(r,this._snappingContext),this._snappingTask=Object(b.h)(function(){var e=Object(f.a)((function*(e){if(Object(l.k)(t._snappingManager)){var i=yield t._snappingManager.snap(r,t._snappingContext,e);return i.valid&&(t._stagedVertex=i.apply(),t.notifyChange("vertices")),i}return null}));return function(t){return e.apply(this,arguments)}}()))}_popCursorVertex(){this._stagedVertex=null,this._stagedVertexUnsnapped=null,this.notifyChange("vertices")}getGeometryZValue(){return this.defaultZ}screenToMap(e){var t=null;if("3d"===this.view.type)if(this.hasZ){var r=Object(l.r)(this.elevationInfo,S);t=this.view.sceneIntersectionHelper.intersectElevationFromScreen(Object(m.g)(e.x,e.y),r,this.getGeometryZValue())}else{var i=Object(l.r)(this.elevationInfo,M);t=this.view.sceneIntersectionHelper.intersectElevationFromScreen(Object(m.g)(e.x,e.y),i,0),Object(l.k)(t)&&(t.z=void 0)}else t=this.view.toMap(e),Object(l.k)(t)&&(t.z=this.hasZ?this.getGeometryZValue():void 0);return t}_isDuplicateOfLastVertex(e){var t=this._editGeometry.editGeometry.components[0].getLastVertex();if(Object(l.k)(t)&&e[0]===t[0]&&e[1]===t[1])return!0;var{x:r,y:i}=this._coordinateHelper.createDehydratedPoint(e);return!(!Object(l.k)(this._lastVertexUnsnapped)||r!==this._lastVertexUnsnapped.x||i!==this._lastVertexUnsnapped.y)}};Object(n.a)([Object(o.b)({readOnly:!0})],x.prototype,"vertices",null),Object(n.a)([Object(o.b)({type:Boolean,nonNullable:!0})],x.prototype,"interactiveUndoDisabled",void 0),Object(n.a)([Object(o.b)({readOnly:!0})],x.prototype,"history",void 0),Object(n.a)([Object(o.b)({readOnly:!0})],x.prototype,"redoHistory",void 0),Object(n.a)([Object(o.b)()],x.prototype,"snapToScene",void 0),Object(n.a)([Object(o.b)()],x.prototype,"view",void 0),Object(n.a)([Object(o.b)()],x.prototype,"elevationInfo",void 0),Object(n.a)([Object(o.b)({nonNullable:!0})],x.prototype,"defaultZ",void 0),Object(n.a)([Object(o.b)()],x.prototype,"hasZ",null),x=Object(n.a)([Object(s.a)("esri.views.draw.DrawAction")],x);var S={mode:"absolute-height",offset:0},M={mode:"on-the-ground",offset:0},T=x;class P{constructor(e,t,r,i){this.view=e,this.native=t,this.vertexIndex=r,this.vertices=i,this.defaultPrevented=!1,this.type="vertex-add"}preventDefault(){this.defaultPrevented=!0}}class E{constructor(e,t,r,i){this.view=e,this.native=t,this.vertexIndex=r,this.vertices=i,this.defaultPrevented=!1,this.type="vertex-remove"}preventDefault(){this.defaultPrevented=!0}}class C{constructor(e,t,r,i,n=null){this.view=e,this.native=t,this.vertexIndex=r,this.vertices=i,this.mapPoint=n,this.coordinates=null,this.defaultPrevented=!1,this.type="cursor-update",this.coordinates=1===i.length?i[0]:null}preventDefault(){this.defaultPrevented=!0}}class A{constructor(e,t){this.native=e,this.vertices=t,this.coordinates=null,this.defaultPrevented=!1,this.type="draw-complete",this.coordinates=1===t.length?t[0]:null}preventDefault(){this.defaultPrevented=!0}}var I="c",k="r",F="z",R="f",D=" ",L=class extends T{constructor(e){super(e),this._cursorScreenPoint=null,this._popVertexOnPointerMove=!1,this._addVertexOnPointerUp=!1,this._activePointerId=null,this._viewHandles=new d.a,this._undoRedoHandles=new d.a}initialize(){this._addViewHandles(),this._addUndoRedoHandles()}destroy(){this._removeViewHandles(),this._viewHandles.destroy(),this._removeUndoRedoHandles(),this._undoRedoHandles.destroy(),this.emit("destroy")}undo(){super.undo(),this.notifyChange("vertices")}redo(){super.redo(),this.notifyChange("vertices")}complete(){this._completeDrawing()}_addViewHandles(){this._removeViewHandles(),this._viewHandles.add([this.view.on("click",(e=>{e.stopPropagation()}),h.b.TOOL),this.view.on("pointer-down",(e=>{this._shouldHandlePointerEvent(e)&&(this._snappingTask=Object(l.a)(this._snappingTask),this._activePointerId=e.pointerId,this._addVertexOnPointerUp=!0,this._cursorScreenPoint=Object(p.a)(e),"touch"===e.pointerType&&this._updateCursor(e.native))}),h.b.TOOL),this.view.on("pointer-move",(e=>{this._popVertexOnPointerMove&&(this.undo(),this._popVertexOnPointerMove=!1),this._snappingTask=Object(l.a)(this._snappingTask),this._cursorScreenPoint=Object(p.a)(e),"touch"!==e.pointerType&&this._updateCursor(e.native)}),h.b.TOOL),this.view.on("pointer-drag",(e=>{this._shouldHandlePointerEvent(e)&&(this._snappingTask=Object(l.a)(this._snappingTask),this._addVertexOnPointerUp=!1)}),h.b.TOOL),this.view.on("pointer-up",(e=>{if(this._shouldHandlePointerEvent(e))if(this._snappingTask=Object(l.a)(this._snappingTask),this._activePointerId=null,this._addVertexOnPointerUp)this._vertexAddHandler(e);else{var t="touch"===e.pointerType;this._updateCursor(e.native,t)}}),h.b.TOOL),this.view.on("drag",["Shift"],(e=>{e.stopPropagation()}),h.b.TOOL),this.view.on("double-click",(e=>{e.stopPropagation(),this._drawCompleteHandler(e)}),h.b.TOOL),this.view.on("double-click",["Control"],(e=>{e.stopPropagation(),this._drawCompleteHandler(e)}),h.b.TOOL),this.view.on("key-down",(e=>{var{key:t,repeat:r}=e;t===R&&!r&&this._cursorScreenPoint?(e.stopPropagation(),this._snappingTask=Object(l.a)(this._snappingTask),this._vertexAddHandler(e)):t===I&&!r&&this._cursorScreenPoint&&this.vertices.length>2?(e.stopPropagation(),this._snappingTask=Object(l.a)(this._snappingTask),this._vertexAddHandler(e),this._drawCompleteHandler(e)):t!==F||this.interactiveUndoDisabled||r?t!==k||this.interactiveUndoDisabled||r?t!==D||r||e.stopPropagation():(e.stopPropagation(),this.redo()):(e.stopPropagation(),this.undo())}),h.b.TOOL),this.view.on("key-up",(e=>{e.key===D&&e.stopPropagation()}),h.b.TOOL)])}_addUndoRedoHandles(){this._removeUndoRedoHandles(),this._undoRedoHandles.add([this._editGeometry.on("vertex-remove",(e=>{if(this.notifyChange("vertices"),"undo"===e.operation){var t=this._nativeEventHistory.undoStack.pop();this._nativeEventHistory.redoStack.push(t);var r=[...this._committedVertices];Object(l.k)(this._stagedVertex)&&r.push(this._coordinateHelper.pointToArray(this._stagedVertex)),this.emit("undo",new E(this.view,t,e.vertices[0].index,r))}})),this._editGeometry.on("vertex-add",(e=>{if(this.notifyChange("vertices"),"apply"===e.operation){var t=this._nativeEventHistory.undoStack[this._nativeEventHistory.undoStack.length],r=this._committedVertices.length-1,i=new P(this.view,t,r,this.vertices);this.emit("vertex-add",i),i.defaultPrevented&&(this._popVertexOnPointerMove=!0)}else if("redo"===e.operation){var n=this._nativeEventHistory.redoStack.pop();this._nativeEventHistory.undoStack.push(n);var a=[...this._committedVertices];Object(l.k)(this._stagedVertex)&&a.push(this._coordinateHelper.pointToArray(this._stagedVertex)),this.emit("redo",new P(this.view,n,e.vertices[0].index,a))}}))])}_removeViewHandles(){this._viewHandles.removeAll()}_removeUndoRedoHandles(){this._undoRedoHandles.removeAll()}_addVertex(e,t){var r=this._coordinateHelper.fromArray(e);if(!this._isDuplicateOfLastVertex(r)){this._lastVertexUnsnapped=this._stagedVertexUnsnapped,this._popCursorVertex(),this._editGeometry.appendVertex(r);var i=t||new Event("placeholder");this._nativeEventHistory.undoStack.push(i)}}_updateCursor(e,t=!1){if(this._popCursorVertex(),this._cursorScreenPoint){var r=this.getCoordsAndPointFromScreenPoint(this._cursorScreenPoint);if(Object(l.k)(r)&&!t){this._pushCursorVertex(r.vertex);var i=()=>new C(this.view,e,this._activeComponent.vertices.length,this.vertices,Object(l.k)(this._stagedVertex)?new u.a(this._stagedVertex):null);this.emit("cursor-update",i()),Object(l.k)(this._snappingTask)&&this._snappingTask.promise.then((e=>{e.valid&&this.emit("cursor-update",i())}),(()=>{}))}}}_completeDrawing(e){if(this._activePointerId=null,this._popCursorVertex(),this._snappingTask=Object(l.a)(this._snappingTask),Object(l.k)(this._snappingManager)&&this._snappingManager.doneSnapping(),!(this.vertices.length<2)){var t=new A(e,this.vertices);this.emit("draw-complete",t),t.defaultPrevented||this._removeViewHandles()}}_shouldHandlePointerEvent(e){return function(e){return"mouse"!==e.pointerType||0===e.button}(e)&&(Object(l.j)(this._activePointerId)||this._activePointerId===e.pointerId)}_vertexAddHandler(e){var t=Object(l.k)(this._stagedVertex)?this._coordinateHelper.pointToArray(this._stagedVertex):this.getCoordsFromScreenPoint(this._cursorScreenPoint);Object(l.k)(t)&&this._addVertex(t,e.native)}_drawCompleteHandler(e){this._completeDrawing(e.native)}};L=Object(n.a)([Object(s.a)("esri.views.draw.MultipointDrawAction")],L);Object.freeze({__proto__:null,get MultipointDrawAction(){return L}});var N=r(288),V=r(672),z=r(720),G=r(532),U=class extends(v.a.EventedMixin(G.a)){constructor(e){super(e),this.drawOperation=null,this.hasZ=!0,this.defaultZ=0,this.elevationInfo=null,this.snapToScene=null,this.mode=null,this.geometryType=null,this.type="draw-3d"}initialize(){var e=Object(l.r)(this.elevationInfo,{mode:this.hasZ?"absolute-height":"on-the-ground",offset:0});this.drawOperation=new V.a({view:this.view,manipulators:this.manipulators,geometryType:this.geometryType,drawingMode:this.mode,hasZ:this.hasZ,defaultZ:this.defaultZ,snapToSceneEnabled:this.snapToScene,snappingDrawSurface:new z.b(this.view,e),elevationDrawSurface:new z.a(e,this.defaultZ,this.view),hasM:!1,elevationInfo:e}),this.drawOperation.on("vertex-add",(e=>this.onVertexAdd(e))),this.drawOperation.on("vertex-remove",(e=>this.onVertexRemove(e))),this.drawOperation.on("vertex-update",(e=>this.onVertexUpdate(e))),this.drawOperation.on("cursor-update",(e=>this.onCursorUpdate(e))),this.drawOperation.on("complete",(e=>this.onComplete(e)))}destroy(){this.drawOperation.destroy(),this.drawOperation=null,this._set("view",null)}onInputEvent(e){this.drawOperation.onInputEvent(e)}set enabled(e){this.drawOperation.interactive=e,this._set("enabled",e)}reset(){}get canRedo(){return this.drawOperation.canRedo}redo(){this.drawOperation.redo()}get canUndo(){return this.drawOperation.canUndo}undo(){this.drawOperation.undo()}completeCreateOperation(){this.drawOperation.complete()}activate(){}deactivate(){this.drawOperation.isCompleted||this.drawOperation.cancel()}getVertexCoords(){return this.drawOperation.vertices}onVertexAdd(e){this.emit("vertex-add",e)}onVertexRemove(e){this.emit("vertex-remove",e)}onVertexUpdate(e){this.emit("vertex-update",e)}onCursorUpdate(e){this.emit("cursor-update",e)}onComplete(e){this.emit("complete",e)}};Object(n.a)([Object(o.b)({constructOnly:!0,nonNullable:!0})],U.prototype,"view",void 0),Object(n.a)([Object(o.b)({value:!0})],U.prototype,"enabled",null),Object(n.a)([Object(o.b)({constructOnly:!0})],U.prototype,"hasZ",void 0),Object(n.a)([Object(o.b)({constructOnly:!0,nonNullable:!0})],U.prototype,"defaultZ",void 0),Object(n.a)([Object(o.b)({constructOnly:!0})],U.prototype,"elevationInfo",void 0),Object(n.a)([Object(o.b)()],U.prototype,"snapToScene",void 0),Object(n.a)([Object(o.b)({constructOnly:!0})],U.prototype,"mode",void 0),Object(n.a)([Object(o.b)({constructOnly:!0})],U.prototype,"geometryType",void 0),Object(n.a)([Object(o.b)({readOnly:!0})],U.prototype,"type",void 0),U=Object(n.a)([Object(s.a)("esri.views.3d.interactive.editingTools.draw.DrawTool")],U);var q=class extends T{constructor(e){super(e),this._cursorScreenPoint=null,this._addVertexOnPointerUp=!1,this._activePointerId=null,this._viewHandles=new d.a}initialize(){"2d"===this.view.type?this._addViewHandles():this._addDrawTool(this.view)}destroy(){"2d"===this.view.type?(this._removeViewHandles(),this._viewHandles.destroy()):this._removeDrawTool(),this.emit("destroy")}get coordinates(){return Object(N.c)(a.a.getLogger("esri.views.draw.PointDrawAction"),"coordinates",{replacement:"vertices",version:"4.19"}),this.vertices[0]}complete(){"2d"===this.view.type?this._cursorScreenPoint&&this._completeDrawing():this._drawTool.completeCreateOperation()}_addViewHandles(){this._removeViewHandles(),this._viewHandles.add([this.view.on("pointer-down",(e=>{this._shouldHandlePointerEvent(e)&&(this._snappingTask=Object(l.a)(this._snappingTask),this._activePointerId=e.pointerId,this._addVertexOnPointerUp=!0,this._cursorScreenPoint=Object(p.a)(e),"touch"===e.pointerType&&this._updateCursor(e.native))}),h.b.TOOL),this.view.on("pointer-move",(e=>{this._snappingTask=Object(l.a)(this._snappingTask),this._cursorScreenPoint=Object(p.a)(e),"touch"!==e.pointerType&&this._updateCursor(e.native)}),h.b.TOOL),this.view.on("pointer-drag",(e=>{this._shouldHandlePointerEvent(e)&&(this._snappingTask=Object(l.a)(this._snappingTask),this._addVertexOnPointerUp=!1)}),h.b.TOOL),this.view.on("pointer-up",(e=>{if(this._shouldHandlePointerEvent(e))if(this._snappingTask=Object(l.a)(this._snappingTask),this._activePointerId=null,this._addVertexOnPointerUp)e.stopPropagation(),this._vertexAddHandler();else{var t="touch"===e.pointerType;this._updateCursor(e.native,t)}}),h.b.TOOL),this.view.on("drag",["Shift"],(e=>{e.stopPropagation()}),h.b.TOOL),this.view.on("key-down",(e=>{e.key===I&&this._cursorScreenPoint&&(this._snappingTask=Object(l.a)(this._snappingTask),this._vertexAddHandler())}),h.b.TOOL)])}_removeViewHandles(){this._viewHandles.removeAll()}_addDrawTool(e){this._drawTool=new U({view:e,elevationInfo:this.elevationInfo,hasZ:this.hasZ,geometryType:"point",mode:"click"}),this.view.toolViewManager.tools.push(this._drawTool),this.view.activeTool=this._drawTool,this._drawTool.on("cursor-update",(e=>{1===e.vertices.length&&this.emit("cursor-update",new C(this.view,null,e.vertices[0].vertexIndex,this._drawTool.getVertexCoords()))})),this._drawTool.on("complete",(e=>{this.emit("draw-complete",new A(null,this._drawTool.getVertexCoords())),this._removeDrawTool()}))}_removeDrawTool(){Object(l.k)(this._drawTool)&&(this.view.tools.remove(this._drawTool),this._drawTool.destroy(),this._drawTool=null)}_addVertex(e){var t=this._coordinateHelper.fromArray(e);this._isDuplicateOfLastVertex(t)||(this._lastVertexUnsnapped=this._stagedVertexUnsnapped,this._popCursorVertex(),this._editGeometry.appendVertex(t),this.notifyChange("vertices"))}_updateCursor(e,t=!1){if(this._popCursorVertex(),this._cursorScreenPoint){var r=this.getCoordsAndPointFromScreenPoint(this._cursorScreenPoint);if(Object(l.k)(r)&&!t){this._pushCursorVertex(r.vertex);var i=()=>new C(this.view,e,this._activeComponent.vertices.length,this.vertices,Object(l.k)(this._stagedVertex)?new u.a(this._stagedVertex):null);this.emit("cursor-update",i()),Object(l.k)(this._snappingTask)&&this._snappingTask.promise.then((e=>{e.valid&&this.emit("cursor-update",i())}),(()=>{}))}}}_completeDrawing(e){this._activePointerId=null,this._popCursorVertex(),this._snappingTask=Object(l.a)(this._snappingTask),Object(l.k)(this._snappingManager)&&this._snappingManager.doneSnapping();var t=new A(e,this.vertices);this.emit("draw-complete",t),t.defaultPrevented||this._removeViewHandles()}_shouldHandlePointerEvent(e){return function(e){return"mouse"!==e.pointerType||0===e.button}(e)&&(Object(l.j)(this._activePointerId)||this._activePointerId===e.pointerId)}_vertexAddHandler(){var e=Object(l.k)(this._stagedVertex)?this._coordinateHelper.pointToArray(this._stagedVertex):this.getCoordsFromScreenPoint(this._cursorScreenPoint);Object(l.k)(e)&&(this._addVertex(e),this._completeDrawing())}};Object(n.a)([Object(o.b)({readOnly:!0})],q.prototype,"coordinates",null),q=Object(n.a)([Object(s.a)("esri.views.draw.PointDrawAction")],q);var H=r(586),B=class extends T{constructor(e){super(e),this._cursorScreenPoint=null,this._panEnabled=!1,this._popVertexOnPointerMove=!1,this._addVertexOnPointerUp=!1,this._activePointerId=null,this._viewHandles=new d.a,this._undoRedoHandles=new d.a,this.mode=H.a}initialize(){"2d"===this.view.type?(this._addViewHandles(),this._addUndoRedoHandles()):this._addDrawTool(this.view)}destroy(){"2d"===this.view.type?(this._removeViewHandles(),this._viewHandles.destroy(),this._removeUndoRedoHandles(),this._undoRedoHandles.destroy()):this._removeDrawTool(),this.emit("destroy")}get _dragEnabled(){return"freehand"===this.mode||"hybrid"===this.mode}get _clickEnabled(){return"click"===this.mode||"hybrid"===this.mode}undo(){super.undo(),this.notifyChange("vertices")}redo(){super.redo(),this.notifyChange("vertices")}complete(){"2d"===this.view.type?this._completeDrawing():this._drawTool.completeCreateOperation()}getGeometryZValue(){return this.vertices.length>0&&this.vertices[0].length>2?this.vertices[0][2]:this._get("defaultZ")}_addViewHandles(){this._removeViewHandles(),this._viewHandles.add([this.view.on("click",(e=>{e.stopPropagation()}),h.b.TOOL),this.view.on("pointer-down",(e=>{this._shouldHandlePointerEvent(e)&&(this._snappingTask=Object(l.a)(this._snappingTask),this._activePointerId=e.pointerId,this._addVertexOnPointerUp=!0,this._cursorScreenPoint=Object(p.a)(e),"touch"===e.pointerType&&this._updateCursor(e.native))}),h.b.TOOL),this.view.on("pointer-move",(e=>{this._snappingTask=Object(l.a)(this._snappingTask),this._popVertexOnPointerMove&&(this.undo(),this._popVertexOnPointerMove=!1),this._cursorScreenPoint=Object(p.a)(e),"touch"!==e.pointerType&&this._updateCursor(e.native)}),h.b.TOOL),this.view.on("pointer-drag",(e=>{this._shouldHandlePointerEvent(e)&&(this._snappingTask=Object(l.a)(this._snappingTask),this._cursorScreenPoint=Object(p.a)(e),this._dragEnabled&&!this._panEnabled?this._vertexAddHandler(e):this._addVertexOnPointerUp=!1)}),h.b.TOOL),this.view.on("pointer-up",(e=>{if(this._shouldHandlePointerEvent(e))if(this._snappingTask=Object(l.a)(this._snappingTask),this._activePointerId=null,this._addVertexOnPointerUp){if(!this._clickEnabled)return 1===this.vertices.length&&this.vertices.pop(),void this._drawCompleteHandler(e);this._vertexAddHandler(e)}else{var t="touch"===e.pointerType;this._updateCursor(e.native,t)}}),h.b.TOOL),this.view.on("drag",(e=>{this._dragEnabled&&Object(l.k)(this._activePointerId)&&!this._panEnabled&&e.stopPropagation()}),h.b.TOOL),this.view.on("drag",["Shift"],(e=>{e.stopPropagation()}),h.b.TOOL),this.view.on("double-click",(e=>{e.stopPropagation(),this._drawCompleteHandler(e)}),h.b.TOOL),this.view.on("double-click",["Control"],(e=>{e.stopPropagation(),this._drawCompleteHandler(e)}),h.b.TOOL),this.view.on("key-down",(e=>{var{key:t,repeat:r}=e;t===R&&!r&&this._cursorScreenPoint?(e.stopPropagation(),this._snappingTask=Object(l.a)(this._snappingTask),this._vertexAddHandler(e)):t===I&&!r&&this._cursorScreenPoint&&this.vertices.length>2?(e.stopPropagation(),this._snappingTask=Object(l.a)(this._snappingTask),this._vertexAddHandler(e),this._drawCompleteHandler(e)):t!==F||this.interactiveUndoDisabled||r?t!==k||this.interactiveUndoDisabled||r?t!==D||r||(e.stopPropagation(),this._panEnabled=!0):(e.stopPropagation(),this.redo()):(e.stopPropagation(),this.undo())}),h.b.TOOL),this.view.on("key-up",(e=>{e.key===D&&(e.stopPropagation(),this._panEnabled=!1)}),h.b.TOOL)])}_addUndoRedoHandles(){this._removeUndoRedoHandles(),this._undoRedoHandles.add([this._editGeometry.on("vertex-remove",(e=>{if(this.notifyChange("vertices"),"undo"===e.operation){var t=this._nativeEventHistory.undoStack.pop();this._nativeEventHistory.redoStack.push(t);var r=[...this._committedVertices];Object(l.k)(this._stagedVertex)&&r.push(this._coordinateHelper.pointToArray(this._stagedVertex)),this.emit("undo",new E(this.view,t,e.vertices[0].index,r))}})),this._editGeometry.on("vertex-add",(e=>{if(this.notifyChange("vertices"),"apply"===e.operation){var t=this._nativeEventHistory.undoStack[this._nativeEventHistory.undoStack.length],r=this._committedVertices.length-1,i=new P(this.view,t,r,this.vertices);this.emit("vertex-add",i),i.defaultPrevented&&(this._popVertexOnPointerMove=!0)}else if("redo"===e.operation){var n=this._nativeEventHistory.redoStack.pop();this._nativeEventHistory.undoStack.push(n);var a=[...this._committedVertices];Object(l.k)(this._stagedVertex)&&a.push(this._coordinateHelper.pointToArray(this._stagedVertex)),this.emit("redo",new P(this.view,n,e.vertices[0].index,a))}}))])}_removeViewHandles(){this._viewHandles.removeAll()}_removeUndoRedoHandles(){this._undoRedoHandles.removeAll()}_addDrawTool(e){this._drawTool=new U({view:e,elevationInfo:this.elevationInfo,hasZ:this.hasZ,geometryType:"polygon",mode:this.mode}),this.view.toolViewManager.tools.push(this._drawTool),this.view.activeTool=this._drawTool,this._drawTool.on("vertex-add",(e=>{1===e.vertices.length&&this.emit("vertex-add",new P(this.view,null,e.vertices[0].vertexIndex,this._drawTool.getVertexCoords()))})),this._drawTool.on("cursor-update",(e=>{1===e.vertices.length&&this.emit("cursor-update",new C(this.view,null,e.vertices[0].vertexIndex,this._drawTool.getVertexCoords()))})),this._drawTool.on("complete",(e=>{this.emit("draw-complete",new A(null,this._drawTool.getVertexCoords())),this._removeDrawTool()}))}_removeDrawTool(){Object(l.k)(this._drawTool)&&(this.view.tools.remove(this._drawTool),this._drawTool.destroy(),this._drawTool=null)}_addVertex(e,t){var r=this._coordinateHelper.fromArray(e);if(!this._isDuplicateOfLastVertex(r)){this._lastVertexUnsnapped=this._stagedVertexUnsnapped,this._popCursorVertex(),this._editGeometry.appendVertex(r);var i=t||new Event("placeholder");this._nativeEventHistory.undoStack.push(i)}}_updateCursor(e,t=!1){if(this._popCursorVertex(),this._cursorScreenPoint){var r=this.getCoordsAndPointFromScreenPoint(this._cursorScreenPoint);if(Object(l.k)(r)&&!t){this._pushCursorVertex(r.vertex);var i=()=>new C(this.view,e,this._activeComponent.vertices.length,this.vertices,Object(l.k)(this._stagedVertex)?new u.a(this._stagedVertex):null);this.emit("cursor-update",i()),Object(l.k)(this._snappingTask)&&this._snappingTask.promise.then((e=>{e.valid&&this.emit("cursor-update",i())}),(()=>{}))}}}_completeDrawing(e){if(this._activePointerId=null,this._popCursorVertex(),this._snappingTask=Object(l.a)(this._snappingTask),Object(l.k)(this._snappingManager)&&this._snappingManager.doneSnapping(),!(this.vertices.length<3)){var t=new A(e,this.vertices);this.emit("draw-complete",t),t.defaultPrevented||this._removeViewHandles()}}_shouldHandlePointerEvent(e){return function(e){return"mouse"!==e.pointerType||0===e.button}(e)&&(Object(l.j)(this._activePointerId)||this._activePointerId===e.pointerId)}_vertexAddHandler(e){var t=Object(l.k)(this._stagedVertex)?this._coordinateHelper.pointToArray(this._stagedVertex):this.getCoordsFromScreenPoint(this._cursorScreenPoint);Object(l.k)(t)&&this._addVertex(t,e.native)}_drawCompleteHandler(e){this._completeDrawing(e.native)}};Object(n.a)([Object(o.b)()],B.prototype,"_dragEnabled",null),Object(n.a)([Object(o.b)()],B.prototype,"_clickEnabled",null),Object(n.a)([Object(o.b)({type:H.b})],B.prototype,"mode",void 0),B=Object(n.a)([Object(s.a)("esri.views.draw.PolygonDrawAction")],B);var W=class extends T{constructor(e){super(e),this._cursorScreenPoint=null,this._panEnabled=!1,this._popVertexOnPointerMove=!1,this._addVertexOnPointerUp=!1,this._activePointerId=null,this._viewHandles=new d.a,this._undoRedoHandles=new d.a,this.mode=H.a}initialize(){"2d"===this.view.type?(this._addViewHandles(),this._addUndoRedoHandles()):this._addDrawTool(this.view)}destroy(){"2d"===this.view.type?(this._removeViewHandles(),this._viewHandles.destroy(),this._removeUndoRedoHandles(),this._undoRedoHandles.destroy()):this._removeDrawTool(),this.emit("destroy")}get _clickEnabled(){return"click"===this.mode||"hybrid"===this.mode}get _dragEnabled(){return"freehand"===this.mode||"hybrid"===this.mode}undo(){super.undo(),this.notifyChange("vertices")}redo(){super.redo(),this.notifyChange("vertices")}complete(){"2d"===this.view.type?this._completeDrawing():this._drawTool.completeCreateOperation()}_addViewHandles(){this._removeViewHandles(),this._viewHandles.add([this.view.on("click",(e=>{e.stopPropagation()}),h.b.TOOL),this.view.on("pointer-down",(e=>{this._shouldHandlePointerEvent(e)&&!this._panEnabled&&(this._snappingTask=Object(l.a)(this._snappingTask),this._activePointerId=e.pointerId,this._addVertexOnPointerUp=!0,this._cursorScreenPoint=Object(p.a)(e),"touch"===e.pointerType&&this._updateCursor(e.native))}),h.b.TOOL),this.view.on("pointer-move",(e=>{this._popVertexOnPointerMove&&(this.undo(),this._popVertexOnPointerMove=!1),this._snappingTask=Object(l.a)(this._snappingTask),this._cursorScreenPoint=Object(p.a)(e),"touch"!==e.pointerType&&this._updateCursor(e.native)}),h.b.TOOL),this.view.on("pointer-drag",(e=>{this._shouldHandlePointerEvent(e)&&(this._snappingTask=Object(l.a)(this._snappingTask),this._cursorScreenPoint=Object(p.a)(e),this._dragEnabled&&!this._panEnabled?this._vertexAddHandler(e):this._addVertexOnPointerUp=!1)}),h.b.TOOL),this.view.on("pointer-up",(e=>{if(this._shouldHandlePointerEvent(e))if(this._snappingTask=Object(l.a)(this._snappingTask),this._activePointerId=null,this._addVertexOnPointerUp){if(!this._clickEnabled)return 1===this.vertices.length&&this.vertices.pop(),void this._drawCompleteHandler(e);this._vertexAddHandler(e)}else{var t="touch"===e.pointerType;this._updateCursor(e.native,t)}}),h.b.TOOL),this.view.on("drag",(e=>{this._dragEnabled&&Object(l.k)(this._activePointerId)&&!this._panEnabled&&e.stopPropagation()}),h.b.TOOL),this.view.on("drag",["Shift"],(e=>{e.stopPropagation()}),h.b.TOOL),this.view.on("double-click",(e=>{e.stopPropagation(),this._drawCompleteHandler(e)}),h.b.TOOL),this.view.on("double-click",["Control"],(e=>{e.stopPropagation(),this._drawCompleteHandler(e)}),h.b.TOOL),this.view.on("key-down",(e=>{var{key:t,repeat:r}=e;t===R&&!r&&this._cursorScreenPoint?(e.stopPropagation(),this._snappingTask=Object(l.a)(this._snappingTask),this._vertexAddHandler(e)):t===I&&!r&&this._cursorScreenPoint&&this.vertices.length>1?(e.stopPropagation(),this._snappingTask=Object(l.a)(this._snappingTask),this._vertexAddHandler(e),this._drawCompleteHandler(e)):t!==F||this.interactiveUndoDisabled||r?t!==k||this.interactiveUndoDisabled||r?t!==D||r||(e.stopPropagation(),this._panEnabled=!0):(e.stopPropagation(),this.redo()):(e.stopPropagation(),this.undo())}),h.b.TOOL),this.view.on("key-up",(e=>{e.key===D&&(e.stopPropagation(),this._panEnabled=!1)}),h.b.TOOL)])}_addUndoRedoHandles(){this._removeUndoRedoHandles(),this._undoRedoHandles.add([this._editGeometry.on("vertex-remove",(e=>{if(this.notifyChange("vertices"),"undo"===e.operation){var t=this._nativeEventHistory.undoStack.pop();this._nativeEventHistory.redoStack.push(t);var r=[...this._committedVertices];Object(l.k)(this._stagedVertex)&&r.push(this._coordinateHelper.pointToArray(this._stagedVertex)),this.emit("undo",new E(this.view,t,e.vertices[0].index,r))}})),this._editGeometry.on("vertex-add",(e=>{if(this.notifyChange("vertices"),"apply"===e.operation){var t=this._nativeEventHistory.undoStack[this._nativeEventHistory.undoStack.length],r=this._committedVertices.length-1,i=new P(this.view,t,r,this.vertices);this.emit("vertex-add",i),i.defaultPrevented&&(this._popVertexOnPointerMove=!0)}else if("redo"===e.operation){var n=this._nativeEventHistory.redoStack.pop();this._nativeEventHistory.undoStack.push(n);var a=[...this._committedVertices];Object(l.k)(this._stagedVertex)&&a.push(this._coordinateHelper.pointToArray(this._stagedVertex)),this.emit("redo",new P(this.view,n,e.vertices[0].index,a))}}))])}_removeViewHandles(){this._viewHandles.removeAll()}_removeUndoRedoHandles(){this._undoRedoHandles.removeAll()}_addDrawTool(e){this._drawTool=new U({view:e,elevationInfo:this.elevationInfo,hasZ:this.hasZ,geometryType:"polyline",mode:this.mode}),this.view.toolViewManager.tools.push(this._drawTool),this.view.activeTool=this._drawTool,this._drawTool.on("vertex-add",(e=>{1===e.vertices.length&&this.emit("vertex-add",new P(this.view,null,e.vertices[0].vertexIndex,this._drawTool.getVertexCoords()))})),this._drawTool.on("cursor-update",(e=>{1===e.vertices.length&&this.emit("cursor-update",new C(this.view,null,e.vertices[0].vertexIndex,this._drawTool.getVertexCoords()))})),this._drawTool.on("complete",(e=>{this.emit("draw-complete",new A(null,this._drawTool.getVertexCoords())),this._removeDrawTool()}))}_removeDrawTool(){Object(l.k)(this._drawTool)&&(this.view.tools.remove(this._drawTool),this._drawTool=Object(l.e)(this._drawTool))}_addVertex(e,t){var r=this._coordinateHelper.fromArray(e);if(!this._isDuplicateOfLastVertex(r)){this._lastVertexUnsnapped=this._stagedVertexUnsnapped,this._popCursorVertex(),this._editGeometry.appendVertex(r);var i=t||new Event("placeholder");this._nativeEventHistory.undoStack.push(i)}}_updateCursor(e,t=!1){if(this._popCursorVertex(),this._cursorScreenPoint){var r=this.getCoordsAndPointFromScreenPoint(this._cursorScreenPoint);if(Object(l.k)(r)&&!t){this._pushCursorVertex(r.vertex);var i=()=>new C(this.view,e,this._activeComponent.vertices.length,this.vertices,Object(l.k)(this._stagedVertex)?new u.a(this._stagedVertex):null);this.emit("cursor-update",i()),Object(l.k)(this._snappingTask)&&this._snappingTask.promise.then((e=>{e.valid&&this.emit("cursor-update",i())}),(()=>{}))}}}_completeDrawing(e){if(this._activePointerId=null,this._popCursorVertex(),this._snappingTask=Object(l.a)(this._snappingTask),Object(l.k)(this._snappingManager)&&this._snappingManager.doneSnapping(),!(this.vertices.length<2)){var t=new A(e,this.vertices);this.emit("draw-complete",t),t.defaultPrevented||this._removeViewHandles()}}_shouldHandlePointerEvent(e){return function(e){return"mouse"!==e.pointerType||0===e.button}(e)&&(Object(l.j)(this._activePointerId)||this._activePointerId===e.pointerId)}_vertexAddHandler(e){var t=Object(l.k)(this._stagedVertex)?this._coordinateHelper.pointToArray(this._stagedVertex):this.getCoordsFromScreenPoint(this._cursorScreenPoint);Object(l.k)(t)&&this._addVertex(t,e.native)}_drawCompleteHandler(e){this._completeDrawing(e.native)}};Object(n.a)([Object(o.b)()],W.prototype,"_clickEnabled",null),Object(n.a)([Object(o.b)()],W.prototype,"_dragEnabled",null),Object(n.a)([Object(o.b)({type:H.b})],W.prototype,"mode",void 0),W=Object(n.a)([Object(s.a)("esri.views.draw.PolylineDrawAction")],W);var J=r(665),Z=class extends T{constructor(e){super(e),this._isDragging=!1,this._panEnabled=!1,this._cursorScreenPoint=null,this._viewHandles=new d.a,this._activePointerId=null,this._addVertexOnPointerUp=!1,this.viewAlignedCoordinateSystem=null,this.mode="freehand"}initialize(){"2d"===this.view.type?this._addViewHandles():this._addDrawTool(this.view)}destroy(){"2d"===this.view.type?(this._removeViewHandles(),this._viewHandles.destroy()):this._removeDrawTool(),this.emit("destroy")}complete(){"2d"===this.view.type?this._completeDrawing():this._drawTool.completeCreateOperation()}getGeometryZValue(){return this.vertices.length>0&&this.vertices[0].length>2?this.vertices[0][2]:this._get("defaultZ")}_addViewHandles(){this._removeViewHandles(),"click"===this.mode?this._viewHandles.add(this._getClickModeViewHandles()):this._viewHandles.add(this._getDragModeViewHandles())}_getDragModeViewHandles(){return[this.view.on("immediate-click",(e=>{if(e.stopPropagation(),e.mapPoint&&!this._panEnabled){var t=this.getCoordsFromScreenPoint(Object(p.a)(e));Object(l.k)(t)&&(this._vertexAddHandler(e),this._drawCompleteHandler(e))}}),h.b.TOOL),this.view.on("pointer-down",(e=>{this._shouldHandlePointerEvent(e)&&(this._snappingTask=Object(l.a)(this._snappingTask),this._panEnabled||(this._resetGeometry(),this._addVertexOnPointerUp=!0,this._cursorScreenPoint=Object(p.a)(e),this._activePointerId=e.pointerId,this._vertexAddHandler(e),this._isDragging=!1,"touch"===e.pointerType&&this._updateCursor(e.native)))}),h.b.TOOL),this.view.on("pointer-move",(e=>{this._snappingTask=Object(l.a)(this._snappingTask),Object(l.j)(this._activePointerId)&&"touch"!==e.pointerType&&(this._cursorScreenPoint=Object(p.a)(e),this._updateCursor(e.native))}),h.b.TOOL),this.view.on("pointer-drag",(e=>{this._shouldHandlePointerEvent(e)&&(this._snappingTask=Object(l.a)(this._snappingTask),this._isDragging=!0,this._cursorScreenPoint=Object(p.a)(e),this._updateCursor(e.native))}),h.b.TOOL),this.view.on("pointer-up",(e=>{this._shouldHandlePointerEvent(e)&&this._addVertexOnPointerUp&&(this._snappingTask=Object(l.a)(this._snappingTask),this._activePointerId=null,this._isDragging&&this._vertexAddHandler(e),2===this._committedVertices.length&&this._drawCompleteHandler(e),this._isDragging=!1)}),h.b.TOOL),this.view.on("key-down",(e=>{e.key===I&&this._cursorScreenPoint?(this._snappingTask=Object(l.a)(this._snappingTask),this._drawCompleteHandler(e)):e.key===D&&(this._panEnabled=!0)}),h.b.TOOL),this.view.on("key-up",(e=>{e.key===D&&(this._panEnabled=!1)}),h.b.TOOL),this.view.on("drag",(e=>{Object(l.k)(this._activePointerId)&&e.stopPropagation()}),h.b.TOOL),this.view.on("drag",["Shift"],(e=>{e.stopPropagation()}),h.b.TOOL)]}_getClickModeViewHandles(){return[this.view.on("pointer-down",(e=>{this._snappingTask=Object(l.a)(this._snappingTask),this._cursorScreenPoint=Object(p.a)(e),this._activePointerId=e.pointerId,this._isDragging=!1,"touch"===e.pointerType&&this._updateCursor(e.native)}),h.b.TOOL),this.view.on("pointer-move",(e=>{this._snappingTask=Object(l.a)(this._snappingTask),this._cursorScreenPoint=Object(p.a)(e),Object(l.j)(this._activePointerId)&&"touch"!==e.pointerType&&this._updateCursor(e.native)}),h.b.TOOL),this.view.on("pointer-drag",(e=>{this._shouldHandlePointerEvent(e)&&(this._snappingTask=Object(l.a)(this._snappingTask),this._isDragging=!0)}),h.b.TOOL),this.view.on("pointer-up",(e=>{this._shouldHandlePointerEvent(e)&&(this._snappingTask=Object(l.a)(this._snappingTask),this._activePointerId=null,e.stopPropagation(),this._isDragging||this._vertexAddHandler(e),2!==this.vertices.length||this._isDragging||this._drawCompleteHandler(e),this._isDragging=!1)}),h.b.TOOL),this.view.on("key-down",(e=>{e.key===R&&this._cursorScreenPoint&&(this._vertexAddHandler(e),2===this.vertices.length&&this._drawCompleteHandler(e)),e.key===I&&this._cursorScreenPoint&&2===this.vertices.length&&this._drawCompleteHandler(e)}),h.b.TOOL)]}_removeViewHandles(){this._viewHandles.removeAll()}_addDrawTool(e){this._drawTool=new U({view:e,elevationInfo:this.elevationInfo,hasZ:this.hasZ,geometryType:"segment",mode:this.mode}),this.view.toolViewManager.tools.push(this._drawTool),this.view.activeTool=this._drawTool,this._drawTool.on("vertex-add",(e=>{1===e.vertices.length&&this.emit("vertex-add",new P(this.view,null,e.vertices[0].vertexIndex,this._drawTool.getVertexCoords()))})),this._drawTool.on("cursor-update",(e=>{1===e.vertices.length&&this.emit("cursor-update",new C(this.view,null,e.vertices[0].vertexIndex,this._drawTool.getVertexCoords()))})),this._drawTool.on("complete",(e=>{this.emit("draw-complete",new A(null,this._drawTool.getVertexCoords())),this._removeDrawTool()}))}_removeDrawTool(){Object(l.k)(this._drawTool)&&(this.view.tools.remove(this._drawTool),this._drawTool.destroy(),this._drawTool=null)}_addVertex(e,t){var r=this._coordinateHelper.fromArray(e);if(!this._isDuplicateOfLastVertex(r)){this._lastVertexUnsnapped=this._stagedVertexUnsnapped,this._popCursorVertex(),this._editGeometry.appendVertex(r),1===this._committedVertices.length&&(this.viewAlignedCoordinateSystem=Object(J.a)(this.view,this._committedVertices[0]));var i=this._committedVertices.length-1,n=new P(this.view,t,i,this.vertices);this.emit("vertex-add",n)}}_updateCursor(e){if(this._popCursorVertex(),this._cursorScreenPoint){var t=this.getCoordsAndPointFromScreenPoint(this._cursorScreenPoint);if(Object(l.k)(t)){this._pushCursorVertex(t.vertex);var r=()=>new C(this.view,e,this._activeComponent.vertices.length,this.vertices,Object(l.k)(this._stagedVertex)?new u.a(this._stagedVertex):null);this.emit("cursor-update",r()),Object(l.k)(this._snappingTask)&&this._snappingTask.promise.then((e=>{e.valid&&this.emit("cursor-update",r())}),(()=>{}))}}}_completeDrawing(e){if(this._activePointerId=null,this._popCursorVertex(),this._cursorScreenPoint=null,this._isDragging=!1,this._snappingTask=Object(l.a)(this._snappingTask),Object(l.k)(this._snappingManager)&&this._snappingManager.doneSnapping(),!(this.vertices.length<1)){var t=new A(e,this.vertices);this.emit("draw-complete",t),t.defaultPrevented||this._removeViewHandles()}}_resetGeometry(){this._editGeometry.destroy(),this._editGeometry=new _.a(new j.c(this._coordinateHelper),"polygon"),this._activeComponent=new j.a(this._editGeometry.editGeometry),this._editGeometry.editGeometry.components.push(this._activeComponent)}_shouldHandlePointerEvent(e){return function(e){return"mouse"!==e.pointerType||0===e.button}(e)&&(Object(l.j)(this._activePointerId)||this._activePointerId===e.pointerId)}_vertexAddHandler(e){var t=Object(l.k)(this._stagedVertex)?this._coordinateHelper.pointToArray(this._stagedVertex):this.getCoordsFromScreenPoint(this._cursorScreenPoint);Object(l.k)(t)&&this._addVertex(t,e.native)}_drawCompleteHandler(e){this._completeDrawing(e.native)}};Object(n.a)([Object(o.b)({type:["freehand","click"]})],Z.prototype,"mode",void 0),Z=Object(n.a)([Object(s.a)("esri/views/2d/engine/markup/SegmentDrawAction")],Z);var X=class extends c.a{constructor(){super(...arguments),this.activeAction=null,this.type="draw",this.view=null}destroy(){this.activeAction&&(this.activeAction.destroy(),this.activeAction=null)}create(e,t){this.reset();var r=Object(i.a)({view:this.view},t);switch(e){case"point":r.editGeometryType="point",this.activeAction=new q(r);break;case"polyline":r.editGeometryType="polyline",this.activeAction=new W(r);break;case"multipoint":r.editGeometryType="polygon",this.activeAction=new L(r);break;case"polygon":r.editGeometryType="polygon",this.activeAction=new B(r);break;case"rectangle":case"circle":case"ellipse":case"triangle":r.editGeometryType="polygon",this.activeAction=new Z(r)}return this.activeAction}complete(){this.activeAction&&this.activeAction.complete(),this.activeAction=null}reset(){this.activeAction&&this.activeAction.destroy(),this.activeAction=null}};Object(n.a)([Object(o.b)()],X.prototype,"activeAction",void 0),Object(n.a)([Object(o.b)({readOnly:!0})],X.prototype,"type",void 0),Object(n.a)([Object(o.b)()],X.prototype,"view",void 0);var Y=X=Object(n.a)([Object(s.a)("esri.views.draw.Draw")],X);t.a=Y},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,r){"use strict";var i=r(82),n=(r(80),r(81),r(88),r(85)),a=r(84),o=(r(83),r(86),r(87),r(97)),s=r(107),c=r(515),l=class extends o.a{constructor(e){super(e),this.layer=null,this.enabled=!0,this.updating=!1,this.availability=1}};Object(i.a)([Object(n.b)({constructOnly:!0})],l.prototype,"layer",void 0),Object(i.a)([Object(n.b)()],l.prototype,"enabled",void 0),Object(i.a)([Object(n.b)()],l.prototype,"updating",void 0),Object(i.a)([Object(n.b)()],l.prototype,"availability",void 0);var u=l=Object(i.a)([Object(a.a)("esri.views.interactive.snapping.SnappingLayerSource")],l),d=class extends o.a{constructor(e){super(e),this.enabled=!1,this.enabledToggled=!1,this.selfEnabled=!0,this.featureEnabled=!0,this.featureSources=new s.a,this.distance=c.a.distance,this.touchSensitivityMultiplier=c.a.touchSensitivityMultiplier}get effectiveEnabled(){return this.enabledToggled?!this.enabled:this.enabled}get effectiveSelfEnabled(){return this.effectiveEnabled&&this.selfEnabled}get effectiveFeatureEnabled(){return this.effectiveEnabled&&this.featureEnabled}};Object(i.a)([Object(n.b)()],d.prototype,"enabled",void 0),Object(i.a)([Object(n.b)()],d.prototype,"enabledToggled",void 0),Object(i.a)([Object(n.b)()],d.prototype,"selfEnabled",void 0),Object(i.a)([Object(n.b)()],d.prototype,"featureEnabled",void 0),Object(i.a)([Object(n.b)({type:s.a.ofType(u)})],d.prototype,"featureSources",void 0),Object(i.a)([Object(n.b)()],d.prototype,"distance",void 0),Object(i.a)([Object(n.b)()],d.prototype,"touchSensitivityMultiplier",void 0),Object(i.a)([Object(n.b)({readOnly:!0})],d.prototype,"effectiveEnabled",null),Object(i.a)([Object(n.b)({readOnly:!0})],d.prototype,"effectiveSelfEnabled",null),Object(i.a)([Object(n.b)({readOnly:!0})],d.prototype,"effectiveFeatureEnabled",null);var h=d=Object(i.a)([Object(a.a)("esri.views.interactive.snapping.SnappingOptions")],d);t.a=h},,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,r){"use strict";var i,n=r(91),a=r(82),o=(r(80),r(81),r(88),r(85)),s=r(84),c=(r(83),r(86),r(87),r(257)),l=r(161),u=r(113),d=r(130),h=r(173),p=r(117),f=r(612),b=i=class extends d.a{constructor(...e){super(...e),this.center=null,this.geodesic=!1,this.numberOfPoints=60,this.radius=1e3,this.radiusUnit="meters"}normalizeCtorArgs(e,t){var r;if(e&&e.center)r=e;else{if(e&&e.rings)return super.normalizeCtorArgs(e,t);r={center:e}}return Object(n.a)(Object(n.a)(Object(n.a)({},super.normalizeCtorArgs()),r),t)}initialize(){var e=this.center,t=this.numberOfPoints;if(this.hasZ=e&&e.hasZ,0===this.rings.length&&e){var r,i=Object(p.c)(this.radius,this.radiusUnit,"meters"),n=e.spatialReference,a="geographic";if(n.isWebMercator?a="webMercator":(null!=c.a[n.wkid]||n.wkt&&0===n.wkt.indexOf("PROJCS"))&&(a="projected"),this.geodesic){var o;switch(a){case"webMercator":o=Object(l.e)(e);break;case"projected":console.error("Creating a geodesic circle requires the center to be specified in web mercator or geographic coordinate system");break;case"geographic":o=e}r=this._createGeodesicCircle(o,i,t),"webMercator"===a&&(r=Object(l.b)(r))}else{var s;"webMercator"===a||"projected"===a?s=i/this._convert2Meters(1,e.spatialReference):"geographic"===a&&(s=Object(p.m)(i,"meters",Object(h.e)(e.spatialReference).radius)),r=this._createPlanarCircle(e,s,t)}this.spatialReference=r.spatialReference,this.addRing(r.rings[0])}}clone(){var{center:e,numberOfPoints:t,radius:r,radiusUnit:n,geodesic:a}=this;return new i({center:e.clone(),numberOfPoints:t,radius:r,radiusUnit:n,geodesic:a})}_createGeodesicCircle(e,t,r){for(var i=0,n=[];i<360;){var a=[0,0],o=[e.x,e.y];Object(f.a)(a,o,i,t),this.hasZ&&a.push(e.z),n.push(a),i+=360/r}return n.push(n[0]),new d.a(n)}_createPlanarCircle(e,t,r){for(var i=0,n=[];i<2*Math.PI;){var a=[e.x+Math.cos(-i)*t,e.y+Math.sin(-i)*t];this.hasZ&&a.push(e.z),n.push(a),i+=Math.PI/(r/2)}return n.push(n[0]),new d.a({spatialReference:e.spatialReference,rings:[n]})}_convert2Meters(e,t){var r;if(null!=c.a[t.wkid])r=c.a.values[c.a[t.wkid]];else{var i=t.wkt,n=i.lastIndexOf(",")+1,a=i.lastIndexOf("]]");r=parseFloat(i.substring(n,a))}return e*r}};Object(a.a)([Object(o.b)({type:u.a})],b.prototype,"center",void 0),Object(a.a)([Object(o.b)()],b.prototype,"geodesic",void 0),Object(a.a)([Object(o.b)()],b.prototype,"numberOfPoints",void 0),Object(a.a)([Object(o.b)()],b.prototype,"radius",void 0),Object(a.a)([Object(o.b)()],b.prototype,"radiusUnit",void 0);var v=b=i=Object(a.a)([Object(s.a)("esri.geometry.Circle")],b);t.a=v},function(e,t,r){"use strict";function i(e,t){if(t&&e&&e.map){var{map:r}=e;r.layers.find((e=>e===t))||r.add(t)}}r.d(t,"a",(function(){return i}))},,function(e,t,r){"use strict";r.d(t,"a",(function(){return n})),r.d(t,"b",(function(){return i}));var i=1;function n(e,t){var r=0;for(var i of t){var n,a=null==(n=i.attributes)?void 0:n[e];"number"==typeof a&&isFinite(a)&&(r=Math.max(r,a))}return r}},,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,r){"use strict";var i=r(7),n=r(91),a=r(82),o=(r(80),r(89)),s=r(81),c=(r(88),r(85)),l=r(84),u=r(93),d=(r(83),r(86),r(87),r(94)),h=r(113),p=r(276),f=(r(101),r(131)),b=r(107),v=r(356),m=r(105),g=r(220),y=r(211),O=r(291),j=r(138),_=r(123),w=r(115),x=r(108),S=r(173),M=r(514),T=r(334),P=r(574),E=r(363),C=r(764),A=r(798);function I(e){switch(e){case 0:break;case 1:return"not owned by a graphics layer";case 2:return"no geometry";case 3:return"the geometry type is not supported";case 4:return"the elevation mode is not supported";case 5:return"the symbol type is not supported"}return""}var k=r(898),F=r(899),R=r(340);var D=null;function L(){return N.apply(this,arguments)}function N(){return(N=Object(i.a)((function*(){return D||(D=yield Promise.all([r.e(9),r.e(198)]).then(r.bind(null,1083))),D}))).apply(this,arguments)}var V=r(827),z=r(344),G=r(99),U=r(167),q=r(135),H=r(312),B=r(104),W=r(567),J=r(691),Z=class extends U.a{constructor(e){super(e),this.sourceModules={featureService:{module:null,loader:null},featureCollection:{module:null,loader:null},graphics:{module:null,loader:null}}}get updating(){return Object(W.a)(this.snappingSources,(({snappingSource:e})=>e.updating))||this.updatingHandles.updating}get snappingSources(){var e,t=this._get("snappingSources")||new Map,r=new Map;if(null!=(e=this.options)&&e.featureSources)for(var i of this.options.featureSources.items){var n=i.layer.uid,a=t.get(n);if(a)t.delete(n),r.set(n,a);else if(i.layer.loaded){var s=this.createSourceInfo(i);Object(o.k)(s)&&r.set(n,s)}else this.updatingHandles.addPromise(i.layer.load())}for(var[,c]of t)c.destroy();return r}initialize(){var e;this.updatingHandles.add(this,"snappingSources",(()=>{this.notifyChange("updating")}),1),Object(o.k)(this.view)&&this.handles.add([null==(e=this.view.refreshManager)?void 0:e.on("refresh",(e=>{"interval"===e.trigger&&this.refreshSourceOfLayer(e.layerView.layer)})),this.view.on("layerview-create",(e=>this.updateLayerView(e.layer,e.layerView))),this.view.on("layerview-destroy",(e=>this.updateLayerView(e.layer,null)))])}refreshSourceOfLayer(e){for(var[,{snappingSource:t}]of this.snappingSources)t.layerSource.layer===e&&t.refresh()}updateLayerView(e,t){for(var[,r]of this.snappingSources)r.snappingSource.layerSource.layer===e&&(r.layerView=t)}destroy(){for(var[,e]of(this._set("options",null),this.snappingSources))e.destroy()}fetchCandidates(e,t,r){var n=this;return Object(i.a)((function*(){if(!n.options.effectiveFeatureEnabled)return[];var i=[],a={distance:n.computeScreeenSizeDistanceParameters(e,t),point:e,coordinateHelper:t.coordinateHelper,types:n.types,filter:null},s=function(e,s){!e.layerSource.enabled||Object(o.k)(s)&&s.suspended||i.push(e.fetchCandidates(a,r).then((({candidates:r})=>r.filter((r=>!n.candidateIsExcluded(e,r,t.excludeFeature))))))};for(var[,{snappingSource:c,layerView:l}]of n.snappingSources)s(c,l);var u=(yield Object(d.k)(i)).flat();return Object(d.u)(r),Object(H.e)(e,u),u}))()}computeScreeenSizeDistanceParameters(e,t){var r=this.options.distance*("touch"===t.pointer?this.options.touchSensitivityMultiplier:1);return Object(o.j)(this.view)?r:"2d"===this.view.type?r*this.view.resolution:this.computeScreeenSizeDistanceParameters3D(e,r,this.view,t)}computeScreeenSizeDistanceParameters3D(e,t,r,i){var{coordinateHelper:n,elevationInfo:a}=i,o=r.state.camera.computeScreenPixelSizeAt(Object(H.a)(e,n,a,r,Y))*r.renderCoordsHelper.unitInMeters/r.mapCoordsHelper.unitInMeters,s=t*o;return{x:s/this.computeScreenMagnitudeOfMapOffset(e,o,0,r,i),y:s/this.computeScreenMagnitudeOfMapOffset(e,0,o,r,i)}}computeScreenMagnitudeOfMapOffset(e,t,r,i,{coordinateHelper:n,elevationInfo:a}){var o=n.clone(e);o[0]+=t,o[1]+=r;var s=Object(H.b)(e,n,a,i),c=Object(H.b)(o,n,a,i),l=c.x-s.x,u=c.y-s.y;return Math.sqrt(l*l+u*u)}get types(){return 3}candidateIsExcluded(e,t,r){if(Object(o.j)(r))return!1;var i=this.getCandidateObjectId(t);if(Object(o.j)(i))return!1;var n=e.layerSource.layer;return"graphics"===n.type?r.uid===i:r.sourceLayer===n&&!(!r.attributes||!("objectIdField"in n))&&r.attributes[n.objectIdField]===i}getCandidateObjectId(e){return e instanceof J.a?e.objectId:null}createSourceInfo(e){var t=this.createFeatureSnappingSourceType(e);if(Object(o.j)(t))return null;if("loading"in t)return this.updatingHandles.addPromise(t.loading.then((()=>{this.destroyed||this.notifyChange("snappingSources")}))),null;var r=Object(o.k)(this.view)?this.view.allLayerViews.find((t=>t.layer===e.layer)):null;return new X(t.source,r)}createFeatureSnappingSourceType(e){switch(e.layer.type){case"feature":case"geojson":case"csv":return this.createFeatureSnappingSourceFeatureLayer(e);case"graphics":return this.createFeatureSnappingSourceGraphicsLayer(e)}return null}createFeatureSnappingSourceFeatureLayer(e){switch(e.layer.source.type){case"feature-layer":var t=this.getSourceModule("featureService");return Object(o.k)(t.module)?{source:new t.module.FeatureServiceSnappingSource({spatialReference:this.spatialReference,view:this.view,layerSource:e})}:{loading:t.loader};case"memory":case"csv":case"geojson":if("mesh"===e.layer.geometryType)return null;var r=this.getSourceModule("featureCollection");return Object(o.k)(r.module)?{source:new r.module.FeatureCollectionSnappingSource({layerSource:e})}:{loading:r.loader}}return null}createFeatureSnappingSourceGraphicsLayer(e){var t=this.getSourceModule("graphics");return Object(o.k)(t.module)?{source:new t.module.GraphicsSnappingSource({spatialReference:this.spatialReference,view:this.view,layerSource:e})}:{loading:t.loader}}getSourceModule(e){var t=this.sourceModules[e];if(Object(o.j)(t.loader)){var r=this.loadSourceModule(e).then((e=>{t.module=e}));return t.loader=r,{module:t.module,loader:r}}return{module:t.module,loader:t.loader}}loadSourceModule(e){switch(e){case"featureService":return this.updatingHandles.addPromise(r.e(150).then(r.bind(null,1233)));case"featureCollection":return this.updatingHandles.addPromise(r.e(264).then(r.bind(null,1190)));case"graphics":return this.updatingHandles.addPromise(Promise.all([r.e(11),r.e(16),r.e(200)]).then(r.bind(null,1191)))}return null}};Object(a.a)([Object(c.b)({constructOnly:!0})],Z.prototype,"spatialReference",void 0),Object(a.a)([Object(c.b)({constructOnly:!0})],Z.prototype,"view",void 0),Object(a.a)([Object(c.b)()],Z.prototype,"options",void 0),Object(a.a)([Object(c.b)({readOnly:!0})],Z.prototype,"updating",null),Object(a.a)([Object(c.b)({readOnly:!0})],Z.prototype,"snappingSources",null),Z=Object(a.a)([Object(l.a)("esri.views.interactive.snapping.FeatureSnappingEngine")],Z);class X{constructor(e,t){this.snappingSource=e,this.layerView=t,this.handles=new w.a;var r=this.snappingSource.layerSource.layer;if("refresh"in r){var i=r;this.handles.add(i.on("refresh",(()=>e.refresh())))}this.handles.add([Object(x.a)(e,"updating",(t=>e.layerSource.updating=t),!0),Object(x.a)(e,"availability",(t=>e.layerSource.availability=t),!0)])}destroy(){this.snappingSource.destroy(),this.handles.destroy()}}var Y=Object(B.e)(),Q=r(97),K=r(202),$=r(515);class ee{constructor(e,t){this.view=e,this.options=t,this.squaredShortLineThreshold=$.a.shortLineThreshold*$.a.shortLineThreshold}snap(e,t){return Object(o.k)(t.vertexHandle)?"vertex"!==t.vertexHandle.type?[]:this.snapExistingVertex(e,t):this.snapNewVertex(e,t)}edgeExceedsShortLineThreshold(e,t){return this.exceedsShortLineThreshold(e.left.pos,e.right.pos,t)}exceedsShortLineThreshold(e,t,{elevationInfo:r,geometry:i}){var n=i.editGeometry.coordinateHelper;return 0===this.squaredShortLineThreshold||Object(H.f)(Object(H.b)(t,n,r,this.view),Object(H.b)(e,n,r,this.view))>this.squaredShortLineThreshold}squaredProximityTreshold(e){return"touch"===e?this.squaredTouchProximityThreshold:this.squaredMouseProximityTreshold}get squaredMouseProximityTreshold(){return this.options.distance*this.options.distance}get squaredTouchProximityThreshold(){var{distance:e,touchSensitivityMultiplier:t}=this.options,r=e*t;return r*r}}var te=r(692),re=r(110),ie=r(530),ne=r(620),ae=r(552);class oe extends ne.a{constructor({coordinateHelper:e,lineStart:t,lineEnd:r,targetPoint:i}){super(e,i,new ae.b(e,t,r)),this.referenceLineHint=new ie.a(2,t,r)}get hints(){return[this.referenceLineHint,new ie.a(0,this.lineEndClosestToTarget(),this.targetPoint)]}lineEndClosestToTarget(){var e=this.constraint.start,t=this.constraint.end;return Object(re.r)(Object(q.g)(Object(q.d)(ce,t,e),Object(q.d)(se,this.targetPoint,e)))>0?t:e}}var se=Object(K.a)(),ce=Object(K.a)();class le extends ee{snapNewVertex(e,t){var r=t.geometry.editGeometry.components[0],i=r.edges.length,n=[];if(i<1)return n;var a=t.coordinateHelper,o=Object(H.b)(e,a,t.elevationInfo,this.view),s=r.edges[i-1],c=s;do{this.edgeExceedsShortLineThreshold(c,t)&&this._processCandidateProposal(c.left.pos,c.right.pos,e,o,t,n),c=c.left.left}while(c&&c!==s);return n}snapExistingVertex(e,t){var r=[],i=Object(o.q)(t.vertexHandle),n=i.component;if(n.edges.length<2)return r;var a=t.coordinateHelper,s=Object(H.b)(e,a,t.elevationInfo,this.view),c=i.left,l=i.right;c&&l&&this.edgeExceedsShortLineThreshold(c,t)&&this.edgeExceedsShortLineThreshold(l,t)&&this._processCandidateProposal(c.left.pos,l.right.pos,e,s,t,r);var u=n.edges[0],d=u;do{d!==i.left&&d!==i.right&&this.edgeExceedsShortLineThreshold(d,t)&&this._processCandidateProposal(d.left.pos,d.right.pos,e,s,t,r),d=d.right.right}while(d&&d!==u);return r}_processCandidateProposal(e,t,r,i,n,a){var o=Object(te.g)(Object(K.a)(),r,e,t),s=n.coordinateHelper,c=s.fromXYZ(o,s.getZ(r,0));Object(H.f)(i,Object(H.b)(c,s,n.elevationInfo,this.view))<this.squaredProximityTreshold(n.pointer)&&a.push(new oe({coordinateHelper:n.coordinateHelper,lineStart:e,lineEnd:t,targetPoint:c}))}}var ue=r(687);class de extends ne.a{constructor({coordinateHelper:e,referenceLine:t,lineStart:r,targetPoint:i}){var n=e.clone(r);Object(q.d)(n,Object(q.h)(n,n,t.right.pos),t.left.pos),super(e,i,new ae.b(e,r,n)),this._referenceLines=[{edge:t,fadeLeft:!0,fadeRight:!0}]}get hints(){return[new ie.a(0,this.constraint.start,this.targetPoint),new ue.a(this.constraint.start,this.targetPoint),...this._referenceLines.map((e=>new ie.a(1,e.edge.left.pos,e.edge.right.pos,e.fadeLeft,e.fadeRight)))]}addReferenceLine(e){var t={edge:e,fadeLeft:!0,fadeRight:!0};this._referenceLines.forEach((r=>{e.right.right===r.edge&&(r.fadeLeft=!1,t.fadeRight=!1),e.left.left===r.edge&&(r.fadeRight=!1,t.fadeLeft=!1)})),this._referenceLines.push(t)}}class he extends ee{constructor(){super(...arguments),this._tmpProjection=Object(K.a)()}snapNewVertex(e,t){var r=t.geometry.editGeometry.components[0],i=r.edges.length,n=r.vertices.length,a=[];if(i<2)return a;var o=Object(H.b)(e,t.coordinateHelper,t.elevationInfo,this.view),s=r.vertices[n-1],c=r.vertices[0],l=r.edges[i-1],u=l;do{this.edgeExceedsShortLineThreshold(u,t)&&(this._checkEdgeForParalleLines(u,s.pos,e,o,t,a),this._checkEdgeForParalleLines(u,c.pos,e,o,t,a)),u=u.left.left}while(u&&u!==l);return a}snapExistingVertex(e,t){var r=[],i=Object(o.q)(t.vertexHandle),n=i.component;if(n.edges.length<3)return r;var a=Object(H.b)(e,t.coordinateHelper,t.elevationInfo,this.view),s=i.left,c=i.right,l=n.vertices[0],u=n.vertices.length,d=n.vertices[u-1],h=n.edges[0],p=h;do{p!==s&&p!==c&&this.edgeExceedsShortLineThreshold(p,t)&&(s&&this._checkEdgeForParalleLines(p,s.left.pos,e,a,t,r),c&&this._checkEdgeForParalleLines(p,c.right.pos,e,a,t,r),i===l?this._checkEdgeForParalleLines(p,d.pos,e,a,t,r):i===d&&this._checkEdgeForParalleLines(p,l.pos,e,a,t,r)),p=p.right.right}while(p&&p!==h);return r}_checkEdgeForParalleLines(e,t,r,i,n,a){var o=e.left.pos,s=e.right.pos;if(Object(te.g)(this._tmpProjection,t,o,s),!(Object(q.j)(this._tmpProjection,t)<$.a.parallelLineThreshold)){Object(te.g)(this._tmpProjection,r,o,s,t);var c=n.coordinateHelper,l=c.fromXYZ(this._tmpProjection,c.getZ(r,0));if(Object(H.f)(i,Object(H.b)(l,c,n.elevationInfo,this.view))<this.squaredProximityTreshold(n.pointer)){if(this.parallelToPreviousCandidate(e,a))return;a.push(new de({coordinateHelper:c,referenceLine:e,lineStart:t,targetPoint:l}))}}}parallelToPreviousCandidate(e,t){var r=e.left.pos,i=e.right.pos;for(var n of t)if(Object(te.g)(this._tmpProjection,i,n.constraint.start,n.constraint.end,r),Object(q.j)(this._tmpProjection,i)<$.a.parallelLineThreshold)return n.addReferenceLine(e),!0;return!1}}var pe=r(646);class fe extends ne.a{constructor({coordinateHelper:e,targetPoint:t,constraint:r,previousVertex:i,centerVertex:n}){super(e,t,r),this.previousVertex=i,this.centerVertex=n,this.referenceLine=new ie.a(1,i,r.start)}get hints(){return[new ie.a(0,this.constraint.start,this.targetPoint),this.referenceLine,new pe.a(this.previousVertex,this.centerVertex,this.targetPoint)]}}class be extends ee{constructor(){super(...arguments),this._tmp=Object(K.a)()}snapNewVertex(e,t){var r=t.geometry.editGeometry.components[0],i=r.vertices.length,n=[];if(i<2)return n;var a=Object(H.b)(e,t.coordinateHelper,t.elevationInfo,this.view),o=r.vertices[i-1];this._checkForSnappingCandidate(n,o.left,o.pos,e,o.left.left.pos,o.pos,t,e,a);var s=r.vertices[0];return this._checkForSnappingCandidate(n,s.right,s.pos,e,s.right.right.pos,s.pos,t,e,a),n}snapExistingVertex(e,t){var r=[],i=Object(o.q)(t.vertexHandle),n=i.component,a=n.vertices.length;if(a<3)return r;var s=Object(H.b)(e,t.coordinateHelper,t.elevationInfo,this.view),c=i.left,l=i.right,u=n.vertices[0],d=n.vertices[a-1];if(!c)return this._checkForSnappingCandidate(r,u.right.right.right,u.right.right.pos,e,u.right.right.right.right.pos,u.right.right.pos,t,e,s),r;if(!l)return this._checkForSnappingCandidate(r,d.left.left.left,d.left.left.pos,e,d.left.left.left.left.pos,d.left.left.pos,t,e,s),r;if(c&&c.left.left){var h=c.left.left;this._checkForSnappingCandidate(r,h,c.left.pos,e,h.left.pos,c.left.pos,t,e,s)}if(l&&l.right.right){var p=l.right.right;this._checkForSnappingCandidate(r,p,l.right.pos,e,p.right.pos,l.right.pos,t,e,s)}return r}_checkForSnappingCandidate(e,t,r,i,n,a,o,s,c){if(this.edgeExceedsShortLineThreshold(t,o)){Object(q.d)(this._tmp,t.right.pos,t.left.pos);var l=Object(K.e)(this._tmp[1],-this._tmp[0]),u=Object(q.g)(l,Object(q.d)(this._tmp,i,r))/Object(q.p)(l),d=o.coordinateHelper,h=d.fromXYZ(Object(q.o)(Object(K.a)(),a,l,u),d.getZ(s,0));Object(H.f)(c,Object(H.b)(h,d,o.elevationInfo,this.view))<this.squaredProximityTreshold(o.pointer)&&e.push(new fe({coordinateHelper:d,targetPoint:h,constraint:new ae.e(d,a,Object(q.o)(d.createNew(),a,l,Object(re.r)(u))),previousVertex:n,centerVertex:a}))}}}class ve extends ne.a{constructor({coordinateHelper:e,targetPoint:t,point1:r,point2:i}){super(e,t,new ae.c(e,Object(q.m)(me,r,i,.5),.5*Object(q.i)(r,i))),this.p1=r,this.p2=i}get hints(){return[new ie.a(1,this.targetPoint,this.p1),new ie.a(1,this.targetPoint,this.p2),new pe.a(this.p1,this.targetPoint,this.p2)]}}var me=Object(K.a)();class ge extends ee{snapNewVertex(e,t){var r=t.geometry.editGeometry.components[0],i=[],n=r.vertices.length;if("polygon"!==t.geometry.type||n<2)return i;var a=r.vertices[0],o=r.vertices[n-1];return this._processCandidateProposal(a.pos,o.pos,e,t,i),i}snapExistingVertex(e,t){var r=[],i=Object(o.q)(t.vertexHandle),n=i.component;return n.edges.length<2?r:"polyline"!==t.geometry.type||0!==i.index&&i.index!==n.vertices.length-1?(this._processCandidateProposal(i.left.left.pos,i.right.right.pos,e,t,r),r):r}_processCandidateProposal(e,t,r,i,n){if(this.exceedsShortLineThreshold(e,t,i)){var a=Object(q.m)(Object(K.a)(),e,t,.5),o=.5*Object(q.i)(e,t),s=Object(te.f)(Object(K.a)(),r,a,o),c=i.coordinateHelper,l=c.fromXYZ(s,c.getZ(r,0)),u=Object(H.b)(r,c,i.elevationInfo,this.view);Object(H.f)(u,Object(H.b)(l,c,i.elevationInfo,this.view))<this.squaredProximityTreshold(i.pointer)&&n.push(new ve({coordinateHelper:c,targetPoint:l,point1:e,point2:t}))}}}var ye=class extends Q.a{constructor(e){super(e),this.updating=!1,this._snappers=new b.a}initialize(){this._snappers.push(new he(this.view,this.options),new le(this.view,this.options),new be(this.view,this.options),new ge(this.view,this.options))}set options(e){for(var t of(this._set("options",e),this._snappers))t.options=e}fetchCandidates(e,t){var r=this;return Object(i.a)((function*(){if(!r.options.effectiveSelfEnabled)return[];var i=[];for(var n of r._snappers.items)i.push(...n.snap(e,t));return Object(H.e)(e,i),i}))()}};Object(a.a)([Object(c.b)({readOnly:!0})],ye.prototype,"updating",void 0),Object(a.a)([Object(c.b)({constructOnly:!0})],ye.prototype,"view",void 0),Object(a.a)([Object(c.b)()],ye.prototype,"options",null),ye=Object(a.a)([Object(l.a)("esri.views.interactive.snapping.SelfSnappingEngine")],ye);var Oe=r(686);class je extends ne.a{constructor(e,t,r,i){super(e,t,new ae.a(e,t,r.constraint,i.constraint)),this.first=r,this.second=i}get hints(){return this.first.targetPoint=this.targetPoint,this.second.targetPoint=this.targetPoint,[...this.first.hints,...this.second.hints,new Oe.a(this.targetPoint)]}}var _e=class extends(f.a.EventedMixin(U.a)){constructor(e){super(e),this.options=new A.a,this.engines=[],this._currentMainCandidate=null,this._currentOtherActiveCandidates=[],this.options=new A.a}initialize(){this.handles.add([Object(z.a)((()=>{var{effectiveFeatureEnabled:e,effectiveSelfEnabled:t,touchSensitivityMultiplier:r,distance:i}=this.options;return{effectiveFeatureEnabled:e,effectiveSelfEnabled:t,touchSensitivityMultiplier:r,distance:i}}),(()=>{this.doneSnapping(),this.emit("changed")})),this.watch("options",(e=>{for(var t of this.engines)t.options=e}),!0),Object(x.a)(this.view,"ready",(e=>this.onViewReady(e)),!0)])}destroy(){this.destroyEngines()}get updating(){return this.engines.some((e=>e.updating))}onViewReady(e){var t,r;this.destroyEngines(),e&&(this.engines=[new ye({view:this.view,options:this.options}),new Z({view:this.view,spatialReference:null!=(t=null==(r=this.view)?void 0:r.spatialReference)?t:G.a.WGS84,options:this.options})])}destroyEngines(){for(var e of this.engines)e.destroy();this.engines.length=0}get squaredMouseProximityTreshold(){return this.options.distance*this.options.distance}get squaredTouchProximityThreshold(){var{distance:e,touchSensitivityMultiplier:t}=this.options,r=e*t;return r*r}snap(e,t,r){var n=this;return Object(i.a)((function*(){var i=t.coordinateHelper.fromPoint(e),a=yield n.fetchCandidates(i,t,r);return{get valid(){return!Object(d.n)(r)},apply:()=>{var{snappedPoint:e,hints:r}=n.processCandidates(i,a,t);return n.removeVisualization(),Object(o.k)(t.visualizer)&&n.handles.add(t.visualizer.draw(r,{coordinateHelper:t.coordinateHelper,elevationInfo:t.elevationInfo,view:n.view}),we),e}}}))()}update(e,t){this.removeVisualization();var r=e,i=[];if(Object(o.k)(this._currentMainCandidate)){var n=t.coordinateHelper,a=n.fromPoint(e),s=this._currentMainCandidate.constraint.closestTo(a);if(Object(H.f)(Object(H.b)(a,n,t.elevationInfo,this.view),Object(H.b)(s,n,t.elevationInfo,this.view))<this.squaredPointProximityThreshold(t.pointer))for(var c of(r=n.createDehydratedPoint(s),this._currentMainCandidate.targetPoint=s,i.push(...this._currentMainCandidate.hints),this._currentOtherActiveCandidates))c.targetPoint=s,i.push(...c.hints);else this._currentMainCandidate=null,this._currentOtherActiveCandidates=[]}return Object(o.k)(t.visualizer)&&this.handles.add(t.visualizer.draw(i,{coordinateHelper:t.coordinateHelper,elevationInfo:t.elevationInfo,view:this.view}),we),r}doneSnapping(){this.removeVisualization(),this._currentMainCandidate=null,this._currentOtherActiveCandidates=[]}removeVisualization(){this.handles.remove(we)}fetchCandidates(e,t,r){var n=this;return Object(i.a)((function*(){return(yield Promise.all(n.engines.map((i=>i.fetchCandidates(e,t,r))))).flat()}))()}processCandidates(e,t,r){if(t.length<1)return this.doneSnapping(),{snappedPoint:r.coordinateHelper.toPoint(e,new h.a),hints:[]};Object(H.e)(e,t);var i=this._currentMainCandidate;if(Object(o.k)(i)){var n=this.findOldConstraintInNewCandidates(i,t);if(n>=0){if(!(t[n]instanceof je))return this.intersectWithOtherCandidates(n,t,e,r);if(Object(q.j)(e,i.targetPoint)<this.squaredPointProximityThreshold(r.pointer))return this.updateSnappingCandidate(i,t,r)}}return this.intersectWithOtherCandidates(0,t,e,r)}findOldConstraintInNewCandidates(e,t){return e instanceof je?this.findOldCandidateIndex(t,e.first)>=0&&this.findOldCandidateIndex(t,e.second)>=0?0:-1:this.findOldCandidateIndex(t,e)}intersectWithOtherCandidates(e,t,r,i){for(var n=t[e],a=[],o=i.coordinateHelper,s=0;s<t.length;++s)if(s!==e){var c=t[s];for(var l of n.constraint.intersect(c.constraint)){var u=o.fromXYZ(l.intersection,n.targetPoint[2]);a.push([new je(o,u,n,c),Object(H.f)(Object(H.b)(r,i.coordinateHelper,i.elevationInfo,this.view),Object(H.b)(u,i.coordinateHelper,i.elevationInfo,this.view))])}}return a.length>0&&(a.sort(((e,t)=>e[1]-t[1])),a[0][1]<this.squaredPointProximityThreshold(i.pointer))?this.updateSnappingCandidate(a[0][0],t,i):this.updateSnappingCandidate(n,t,i)}updateSnappingCandidate(e,t,r){this.doneSnapping(),this._currentMainCandidate=e;var i=this._currentMainCandidate.targetPoint,n=[];for(var a of(n.push(...e.hints),t)){if(e instanceof je){if(a.constraint.objectEqual(e.first.constraint)||a.constraint.objectEqual(e.second.constraint))continue}else if(a.constraint.objectEqual(e.constraint))continue;a.constraint.check(i)&&(a.targetPoint=i,this._currentOtherActiveCandidates.push(a),n.push(...a.hints))}return{snappedPoint:r.coordinateHelper.createDehydratedPoint(i),hints:n}}squaredPointProximityThreshold(e){return"touch"===e?this.squaredTouchProximityThreshold:this.squaredMouseProximityTreshold}findOldCandidateIndex(e,t){for(var r=-1,i=0;i<e.length;++i)if(t.constraint.objectEqual(e[i].constraint)){r=i;break}return r}get test(){return{visualizationsActive:this.handles.has(we)}}};Object(a.a)([Object(c.b)({constructOnly:!0})],_e.prototype,"view",void 0),Object(a.a)([Object(c.b)()],_e.prototype,"options",void 0),Object(a.a)([Object(c.b)({readOnly:!0})],_e.prototype,"updating",null),Object(a.a)([Object(c.b)()],_e.prototype,"engines",void 0),Object(a.a)([Object(c.b)()],_e.prototype,"squaredMouseProximityTreshold",null),Object(a.a)([Object(c.b)()],_e.prototype,"squaredTouchProximityThreshold",null),_e=Object(a.a)([Object(l.a)("esri.views.interactive.snapping.SnappingManager")],_e);var we="visualization-handle",xe=r(180),Se=class extends f.a.EventedAccessor{constructor(e){super(e),this.cancelled=!1,this.history={undo:[],redo:[]},this.type=null}get tool(){if(!this.activeComponent)return null;switch(this.activeComponent.type){case"graphic-mover":case"move-3d":return"move";case"box":case"transform-3d":return"transform";case"reshape":case"reshape-3d":return"reshape";case"draw":case"draw-3d":return null;default:Object(xe.a)(this.activeComponent)}return null}addToHistory(e){this.history.redo=[],this.history.undo.push(e)}resetHistory(){this.history.redo=[],this.history.undo=[]}canUndo(){return this.history.undo.length>0}canRedo(){return this.history.redo.length>0}complete(){this.reset(),this.onEnd(),this.emit("complete")}cancel(){this.cancelled=!0,this.complete()}reset(){this.activeComponent.reset()}refreshComponent(){var e=this.activeComponent;e&&("box"!==e.type&&"reshape"!==e.type||e.refresh())}set undo(e){this._set("undo",(()=>{this.canUndo()&&e()}))}set redo(e){this._set("redo",(()=>{this.canRedo()&&e()}))}};Object(a.a)([Object(c.b)()],Se.prototype,"activeComponent",void 0),Object(a.a)([Object(c.b)()],Se.prototype,"cancelled",void 0),Object(a.a)([Object(c.b)()],Se.prototype,"history",void 0),Object(a.a)([Object(c.b)()],Se.prototype,"tool",null),Object(a.a)([Object(c.b)()],Se.prototype,"type",void 0),Object(a.a)([Object(c.b)()],Se.prototype,"canUndo",null),Object(a.a)([Object(c.b)()],Se.prototype,"canRedo",null),Object(a.a)([Object(c.b)()],Se.prototype,"onEnd",void 0),Object(a.a)([Object(c.b)()],Se.prototype,"undo",null),Object(a.a)([Object(c.b)()],Se.prototype,"redo",null),Object(a.a)([Object(c.b)()],Se.prototype,"toggleTool",void 0),Object(a.a)([Object(c.b)()],Se.prototype,"addToSelection",void 0),Object(a.a)([Object(c.b)()],Se.prototype,"removeFromSelection",void 0),Se=Object(a.a)([Object(l.a)("esri.widgets.Sketch.support.OperationHandle")],Se);var Me="esri.widgets.Sketch.SketchViewModel",Te=s.a.getLogger(Me),Pe={redoKey:"r",undoKey:"z",centerKey:"Alt",constraintKey:"Control",snappingKey:"Control",cancelKey:"Escape",deleteKeys:["Backspace","Delete"],complete:"c",pan:" "},Ee={defaultZ:0},Ce={enableMidpoints:!0,enableMoveAllGraphics:!0,enableRotation:!0,enableScaling:!0,multipleSelectionEnabled:!0,preserveAspectRatio:!1,toggleToolOnClick:!0,tool:"transform",enableZ:!0,enableMoveGraphic:!0},Ae=class extends f.a.EventedAccessor{constructor(e){super(e),this._activeFillGraphic=null,this._activeLineGraphic=null,this._centerIndicatorGraphic=null,this._centerSymbol=new O.a({style:"cross",size:6,color:[255,255,255]}),this._defaultSegmentOffset=48,this._numUpdating=0,this._handles=new w.a,this._internalGraphicsLayer=new M.a({listMode:"hide",internal:!0}),this._lineGraphic=null,this._operationHandle=null,this._vertexGraphics=[],this._viewHandles=new w.a,this._doUnnormalization=!1,this._moveOperationCloneInfos=[],this.activeFillSymbol=new y.a({style:"solid",color:[150,150,150,.2],outline:{color:[50,50,50],width:0}}),this.activeLineSymbol=new v.a({data:{type:"CIMSymbolReference",symbol:{type:"CIMLineSymbol",symbolLayers:[{type:"CIMSolidStroke",effects:[{type:"CIMGeometricEffectDashes",dashTemplate:[3.75,3.75],lineDashEnding:"HalfPattern",controlPointEnding:"NoConstraint"}],enable:!0,capStyle:"Butt",joinStyle:"Round",miterLimit:10,width:1.6,color:[255,255,255,255]},{type:"CIMSolidStroke",enable:!0,capStyle:"Butt",joinStyle:"Round",miterLimit:10,width:2,color:[0,0,0,255]}]}}}),this.activeVertexSymbol=new O.a({style:"circle",size:6,color:[255,127,0,1],outline:{color:[50,50,50],width:1}}),this.layer=null,this.pointSymbol=new O.a({style:"circle",size:6,color:[255,255,255],outline:{color:[50,50,50],width:1}}),this.polygonSymbol=new y.a({color:[150,150,150,.2],outline:{color:[50,50,50],width:2}}),this.polylineSymbol=new g.a({color:[130,130,130,1],width:2}),this._snappingManager=null,this.updateGraphics=new b.a,this.updateOnGraphicClick=!0,this.updatePointSymbol=new O.a({size:10,color:[0,200,255,.5],outline:{color:"black",width:1}}),this.updatePolygonSymbol=new y.a({color:[12,207,255,.2],outline:{join:"round",color:[12,207,255],width:2}}),this.updatePolylineSymbol=new g.a({color:[12,207,255],width:2}),this.vertexSymbol=new O.a({style:"circle",size:6,color:[255,255,255],outline:{color:[50,50,50],width:1}}),this._moduleLoaderAbortController=null,this._viewReadyAbortController=null,this._originalAutoOpenEnabled=null,this.defaultCreateOptions=Ee,this.defaultUpdateOptions=Ce,this.snappingOptions=new A.a}initialize(){this._handles.add([Object(x.d)(this,"layer",(()=>{this.cancel(),this._internalGraphicsLayer.elevationInfo=Object(o.k)(this.layer)?this.layer.elevationInfo:null})),Object(x.b)(this,"view.map.layers","change",(e=>{e.removed.indexOf(this.layer)>=0&&this.cancel()})),Object(x.b)(this,"layer.graphics","change",(e=>{if(Object(o.k)(this._operationHandle))for(var t of e.removed)this.updateGraphics.includes(t)&&(this.updateGraphics.length>1?this._operationHandle.removeFromSelection(t):this._operationHandle.cancel())})),Object(x.a)(this,"layer.elevationInfo",(()=>{this.cancel(),this._internalGraphicsLayer.elevationInfo=Object(o.k)(this.layer)?this.layer.elevationInfo:null}),!0),Object(x.a)(this,"view",(e=>{Object(o.e)(this._snappingManager),e&&(this._snappingManager=new _e({view:e,options:this.snappingOptions}))}),!0)])}destroy(){this.cancel(),this._handles=Object(o.e)(this._handles),this._viewHandles=Object(o.e)(this._viewHandles),this._removeDefaultLayer(),Object(o.e)(this._draw),Object(o.e)(this._snappingManager),this._set("view",null),this.emit("destroy")}get _defaultUpdateTool(){return"3d"===this.view.type?"move":"transform"}get _draw(){return"ready"===this.state||"active"===this.state?new C.a({view:this.view}):null}get updating(){return this._numUpdating>0}get activeTool(){return this._operationHandle&&this._operationHandle.tool?this._operationHandle.tool:null}get activeComponent(){return this._operationHandle?this._operationHandle.activeComponent:null}get createGraphic(){return this.view&&"3d"===this.view.type&&Object(o.k)(this.activeComponent)&&"draw-3d"===this.activeComponent.type?Object(o.q)(this.activeComponent.createGraphic):this._get("createGraphic")}set defaultCreateOptions(e){this._set("defaultCreateOptions",Object(n.a)(Object(n.a)({},Ee),e))}set defaultUpdateOptions(e){this._set("defaultUpdateOptions",Object(n.a)(Object(n.a)({},Ce),e))}set snappingOptions(e){Object(o.k)(this._snappingManager)&&(this._snappingManager.options=e),this._set("snappingOptions",e)}get state(){var e,t=!(null==(e=this.view)||!e.ready||!this.layer),r=this._operationHandle;return t&&r?"active":t?"ready":"disabled"}get view(){return this._get("view")}set view(e){var t=this._get("view");if(t){var{container:r,map:i}=t;r&&(t.cursor=null),i&&i.remove(this._internalGraphicsLayer),this._viewHandles.removeAll(),this.cancel()}this._doUnnormalization=null!=e&&"3d"===e.type&&"global"===e.viewingMode;var n="view-ready";this._handles.remove(n),e&&this._handles.add(Object(x.e)(e,"ready",(t=>{this._viewHandles.removeAll(),t&&this._viewHandles.add(this._generateViewHandles(e))}),!0),n),this._set("view",e)}cancel(){this._moduleLoaderAbortController=Object(o.a)(this._moduleLoaderAbortController),this._viewReadyAbortController=Object(o.a)(this._viewReadyAbortController),this._operationHandle&&this._operationHandle.cancel()}complete(){this._operationHandle&&this._operationHandle.complete()}delete(){var{state:e,updateGraphics:t}=this;if("active"===e&&t.length){var{activeTool:r,layer:i}=this,n=t.toArray();i.removeMany(n),this.cancel(),this._emitDeleteEvent({graphics:n,tool:r})}}create(e,t){var r=this;return Object(i.a)((function*(){if(yield r._waitViewReady(),"disabled"===r.state)throw r.layer||r._logError("sketch:missing-property","Property 'layer' is missing on SketchViewModel."),r.view||r._logError("sketch:missing-property","Property 'view' is missing on SketchViewModel."),Object(d.e)();if(r.cancel(),e){var i=yield r._setupCreateOperation(e,t);if(!Object(o.j)(i)&&!r.destroyed){Object(V.a)(r.view,r._internalGraphicsLayer);i.on("complete",(()=>{if(i===r._operationHandle){var t=r.createGraphic,n=r._operationHandle.cancelled;r._operationHandle.destroy(),r._operationHandle=null,r._set("createGraphic",null),r.view&&r.view.map&&r.view.map.remove(r._internalGraphicsLayer),i.cancelled||null==t||r.layer.add(t),r.emit("create",{graphic:t,state:n?"cancel":"complete",tool:e,toolEventInfo:null,type:"create"})}})),r._operationHandle=i,r.view.ready&&Object(P.b)(r.view)&&r.view.focus()}}else r._logError("sketch:missing-parameter","Missing parameter 'tool'.")}))()}update(e,t){var r=this;return Object(i.a)((function*(){yield r._waitViewReady();var{layer:i,view:n,state:a}=r;if("disabled"===a)throw n||r._logError("sketch:missing-property","Property 'view' is missing on SketchViewModel."),i||r._logError("sketch:missing-property","Property 'layer' is missing on SketchViewModel."),Object(d.e)();r.cancel();var s=Array.isArray(e)?e:[e];if(null!=e&&s&&s.length){if(!s.some((e=>e.layer!==i?(r._logError("sketch:invalid-parameter","Parameter 'graphics' contains one or more graphics missing from the supplied GraphicsLayer."),!0):Object(o.j)(e.geometry)?(r._logError("sketch:invalid-parameter","Parameter 'graphics' contains one or more graphics with an unsupported geometry."),!0):"2d"===n.type&&!n.spatialReference.equals(e.geometry.spatialReference)&&(r._logError("sketch:invalid-parameter","Parameter 'graphics' contains one or more graphics with a spatial reference different from the supplied MapView."),!0)))){var c=yield r._setupUpdateOperation(s,t);r.destroyed||Object(o.j)(c)||De(c)||(Object(V.a)(r.view,r._internalGraphicsLayer),r._setUpdateOperationHandle(c,t),r.emit("update",{graphics:s,state:"start",aborted:!1,tool:c.tool,toolEventInfo:null,type:"update"}))}}else r._logError("sketch:missing-parameter","Missing parameter 'graphics'.")}))()}undo(){this.canUndo()&&this._operationHandle.undo()}redo(){this.canRedo()&&this._operationHandle.redo()}canUndo(){return!(!this._operationHandle||!this._operationHandle.canUndo())}canRedo(){return!(!this._operationHandle||!this._operationHandle.canRedo())}toggleUpdateTool(){this._operationHandle&&this._operationHandle.toggleTool&&this._operationHandle.toggleTool()}_getFirstHit(e){var t=this;return Object(i.a)((function*(){var r=[];switch(t.view.type){case"2d":var i=yield t.view.hitTest(e);if(i.results.length>0){var n=i.results[0];if(n.graphic){var a,o,s=n.graphic;"vector-tile"!==(null==(a=s.layer)?void 0:a.type)&&"imagery"!==(null==(o=s.layer)?void 0:o.type)&&r.push(n)}}break;case"3d":var c=[t.view.map.ground];t.view.map.allLayers.forEach((e=>{"integrated-mesh"===e.type&&c.push(e)}));var l=yield t.view.hitTest(e,{exclude:c});if(l.results.length>0){var u=l.results[0];(!l.ground.mapPoint||t.view.map.ground.opacity<1||l.ground.distance-u.distance>-Math.min(3*l.ground.distance,"global"===t.view.viewingMode?Object(S.e)(t.view.renderCoordsHelper.spatialReference).radius/t.view.renderCoordsHelper.unitInMeters:Number.POSITIVE_INFINITY))&&r.push(u)}}return{screenPoint:e,results:r}}))()}_generateViewHandles(e){return[e.on("immediate-click",(t=>{var{_operationHandle:r,defaultUpdateOptions:i,layer:a,state:s,updateGraphics:c,updateOnGraphicClick:l}=this,u="active"===s&&"create"===r.type;"disabled"!==s&&!u&&l&&(this._beginAsyncOperation(),this._getFirstHit(Object(E.a)(t)).then((r=>{var i=r.results;if(i.length)for(var n=0;n<i.length;++n){var o=i[n];if(o.graphic){var l=o.graphic;if(c.indexOf(l)>-1||l.layer===a)return t.stopPropagation(),l;"2d"!==e.type||this._isComponentGraphic(l)||"active"!==s||this.cancel()}}else"active"===s&&this.cancel();return null})).then((e=>Object(o.k)(e)&&-1===c.indexOf(e)?this.update([e],Object(n.a)({},i)):null)).then((()=>{this._endAsyncOperation()})))}),T.b.WIDGET)]}_setupCreateOperation(e,t){var r=this;return Object(i.a)((function*(){if(!e)return null;var i,a=Object(n.a)(Object(n.a)({hasZ:"3d"===r.view.type},r.defaultCreateOptions),t);if("2d"===r.view.type)switch(e){case"point":i=r._setupCreatePointOperation(e,a);break;case"multipoint":i=yield r._setupCreateMultipointOperation(e,a);break;case"polygon":case"polyline":i=yield r._setupCreatePolyOperation(e,a);break;case"rectangle":i=yield r._setupCreateRectangleOperation(e,a);break;case"circle":i=yield r._setupCreateCircleOperation(e,a)}else{var s=yield r._setupCreate3DOperation(e,r.view,a);if(Object(o.j)(s)||De(s))return null;i=s}return i}))()}_setupCreate3DOperation(e,t,a){var s=this;return Object(i.a)((function*(){if("multipoint"===e)return null;var i={point:s.pointSymbol,multipoint:null,polyline:s.polylineSymbol,polygon:s.polygonSymbol,rectangle:s.polygonSymbol,circle:s.polygonSymbol}[e];s._removeCreateOperationGraphics();var c="rectangle"!==e,l="rectangle"!==e;s.snappingOptions.enabledToggled=!1;var u=Object(n.a)(Object(n.a)({view:t,mode:"rectangle"===e||"circle"===e?"hybrid":"click"},a),{},{elevationInfo:s.layer.elevationInfo,geometryType:e,createGraphicSymbol:i,snapToScene:!Object(o.k)(s.layer.elevationInfo)||"absolute-height"===s.layer.elevationInfo.mode,snappingManager:s._snappingManager,forceUniformSize:l,centered:c}),d=yield s._requireModule(Promise.all([r.e(9),r.e(14),r.e(15)]).then(r.bind(null,1221)));if(De(d))return d;if(s.destroyed)return null;var h=new d.module.DrawGraphicTool(u);s.view.tools.add(h);var p=null;s.view.activeTool=h;var f=[],b=new Se({activeComponent:h,tool:e,type:"update",onEnd:()=>{var e;f.forEach((e=>e.remove())),f.length=0,null==(e=s.view.tools)||e.remove(h),h.destroy()},undo:()=>{h.canUndo&&h.undo()},redo:()=>{h.canRedo&&h.redo()},canUndo:()=>h.canUndo,canRedo:()=>h.canRedo});return f.push(s.view.on("key-down",(t=>{t.key===Pe.pan?(t.stopPropagation(),t.repeat||(h.enabled=!1)):t.key===Pe.complete?(t.stopPropagation(),h.completeCreateOperation()):t.key===Pe.undoKey?(t.stopPropagation(),b.undo()):t.key===Pe.redoKey?(t.stopPropagation(),b.redo()):t.key!==Pe.snappingKey||"rectangle"===e||"circle"===e||t.repeat?t.key!==Pe.constraintKey||"rectangle"!==e&&"circle"!==e||t.repeat?t.key===Pe.centerKey&&(t.repeat||(h.centered=!c,t.stopPropagation())):(h.forceUniformSize=!l,t.stopPropagation()):(s.snappingOptions.enabledToggled=!0,t.stopPropagation())}),T.b.WIDGET),s.view.on("key-up",(t=>{t.key===Pe.pan?h.enabled=!0:t.key===Pe.snappingKey&&"rectangle"!==e&&"circle"!==e?(s.snappingOptions.enabledToggled=!1,t.stopPropagation()):t.key!==Pe.constraintKey||"rectangle"!==e&&"circle"!==e?t.key===Pe.centerKey&&(h.centered=c,t.stopPropagation()):(h.forceUniformSize=l,t.stopPropagation())}),T.b.WIDGET),h.on("vertex-add",(t=>{switch(p=Object(o.j)(p)?"start":"active",t.operation){case"apply":s.emit("create",{graphic:Object(o.q)(h.createGraphic),state:p,tool:s.activeTool,toolEventInfo:t,type:"create"});break;case"undo":s._emitUndoEvent({graphics:[Object(o.q)(h.createGraphic)],tool:e});break;case"redo":s._emitRedoEvent({graphics:[Object(o.q)(h.createGraphic)],tool:e})}})),h.on("cursor-update",(e=>{h.drawOperation.numCommittedVertices>0&&s.emit("create",{graphic:Object(o.q)(h.createGraphic),state:"active",tool:s.activeTool,toolEventInfo:{coordinates:e.vertices[0].coordinates,type:"cursor-update"},type:"create"})})),h.on("vertex-remove",(t=>{switch(t.operation){case"apply":s.emit("create",{graphic:Object(o.q)(h.createGraphic),state:"active",tool:s.activeTool,toolEventInfo:t,type:"create"});break;case"undo":s._emitUndoEvent({graphics:[Object(o.q)(h.createGraphic)],tool:e});break;case"redo":s._emitRedoEvent({graphics:[Object(o.q)(h.createGraphic)],tool:e})}})),h.on("complete",(e=>{s._removeCreateOperationGraphics(),s._set("createGraphic",Object(o.q)(e.graphic)),p="complete",e.aborted?b&&b.cancel():b&&b.complete()}))),b}))()}_setupCreatePointOperation(e,t){var r={elevationInfo:this.layer.elevationInfo,hasZ:t.hasZ,defaultZ:t.defaultZ,snappingManager:this._snappingManager,interactiveUndoDisabled:!0},i=this._draw.create(e,r),n=[i.on("cursor-update",(e=>{Object(o.k)(e.vertexIndex)?this._displayCrosshairCursor():this._displayDefaultCursor()})),i.on("draw-complete",(e=>{var t=this.createPointFromVertex(e.vertices[0]),r=new _.a(t,this.pointSymbol);this._set("createGraphic",r),s&&s.complete()}))],a=[this.view.on("key-down",(e=>{e.key===Pe.cancelKey&&(s&&s.cancel(),e.stopPropagation())}),T.b.WIDGET)],s=this._operationHandleForCreateAction(i,[...n,...a],e);return s}_setupCreateMultipointOperation(e,t){var r=this;return Object(i.a)((function*(){var i=yield L(),a=Object(n.a)(Object(n.a)({},t),{},{elevationInfo:r.layer.elevationInfo,snappingManager:r._snappingManager,interactiveUndoDisabled:!0}),o=r._draw.create(e,a),s=null,c=[],l=r._operationHandleForCreateAction(o,c,e);return c.push(o.on("vertex-add",(t=>{var{type:n,vertexIndex:a,vertices:o}=t,c=o[a];s=t,r._drawMultipointGraphic(i,o,!0),r.emit("create",{graphic:r.createGraphic,state:1===o.length?"start":"active",tool:e,toolEventInfo:{added:c,vertices:[{coordinates:c,componentIndex:0,vertexIndex:a}],type:n},type:"create"})})),o.on("vertex-remove",(t=>{var{type:n,vertexIndex:a,vertices:o}=t,c=o[a];s=t,r._drawMultipointGraphic(i,o,!0),r.emit("create",{graphic:r.createGraphic,state:"active",tool:e,toolEventInfo:{removed:c,vertices:[{coordinates:c,componentIndex:0,vertexIndex:a}],type:n},type:"create"})})),o.on("vertex-update",(t=>{var{type:n,vertexIndex:a,vertices:o}=t,c=o[a];s=t,r._drawMultipointGraphic(i,o,!0),r.emit("create",{graphic:r.createGraphic,state:"active",tool:e,toolEventInfo:{type:n,updated:c,vertices:[{coordinates:c,componentIndex:0,vertexIndex:a}]},type:"create"})})),o.on("cursor-update",(e=>{s=e})),o.on("draw-complete",(e=>{var t=e.vertices.slice(0),n=i.createMultipoint(t,r.view.spatialReference);n&&r.createGraphic&&(r.createGraphic.geometry=n),l&&l.complete()})),o.on("undo",(e=>{var t=e.vertices,n=s&&"cursor-update"!==s.type;r._resetCreateOperationGraphics(),t.length&&r._drawMultipointGraphic(i,t,n)})),o.on("redo",(e=>{var t=e.vertices,n=s&&"cursor-update"!==s.type;r._resetCreateOperationGraphics(),t.length&&r._drawMultipointGraphic(i,t,n)}))),c.push(r.view.on("pointer-move",(()=>r._displayCrosshairCursor()),T.b.WIDGET),r.view.on("key-down",(e=>r._getCommonUpdateOperationKeyDownHandlers(l,e)),T.b.WIDGET)),l}))()}_setupCreatePolyOperation(e,t){var r=this;return Object(i.a)((function*(){var i=yield L(),a=Object(n.a)(Object(n.a)({},t),{},{elevationInfo:r.layer.elevationInfo,snappingManager:r._snappingManager,interactiveUndoDisabled:!0}),s=null;("polyline"===e||"polygon"===e)&&(s=r._draw.create(e,a));var c=null,l=[s.on("vertex-add",(t=>{var{type:n,vertexIndex:a,vertices:o}=t,s=o[a];r._snapLastPolygonVertexToFirst(e,o),c=t,r._drawVertexGraphics(i,e,o,{userClicked:!0}),r.emit("create",{graphic:r.createGraphic,state:1===o.length?"start":"active",tool:e,toolEventInfo:{added:s,vertices:[{coordinates:s,componentIndex:0,vertexIndex:a}],type:n},type:"create"})})),s.on("vertex-remove",(t=>{var{type:n,vertexIndex:a,vertices:o}=t,s=o[a];r._snapLastPolygonVertexToFirst(e,o),c=t,r._drawVertexGraphics(i,e,o,{userClicked:!0}),r.emit("create",{graphic:r.createGraphic,state:"active",tool:e,toolEventInfo:{removed:s,vertices:[{coordinates:s,componentIndex:0,vertexIndex:a}],type:n},type:"create"})})),s.on("vertex-update",(t=>{var{type:n,vertexIndex:a,vertices:o}=t,s=o[a];r._snapLastPolygonVertexToFirst(e,o),c=t,r._drawVertexGraphics(i,e,o,{userClicked:!0}),r.emit("create",{graphic:r.createGraphic,state:"active",tool:e,toolEventInfo:{type:n,updated:s,vertices:[{coordinates:s,componentIndex:0,vertexIndex:a}]},type:"create"})})),s.on("cursor-update",(t=>{var{type:n,vertices:a}=t;if(t.mapPoint&&(r._snapLastPolygonVertexToFirst(e,a),c=t,r._drawVertexGraphics(i,e,a,{userClicked:!1}),a.length>1)){var o=a[a.length-1];r.emit("create",{graphic:r.createGraphic,state:"active",tool:e,toolEventInfo:{coordinates:o,type:n},type:"create"})}})),s.on("draw-complete",(t=>{var n=t.vertices.slice(0),a=null;"polyline"===e?a=i.createPolyline([n],r.view.spatialReference,r._doUnnormalization):"polygon"===e&&(a=i.createPolygon([n],r.view.spatialReference,r._doUnnormalization,!0)),a&&(r.createGraphic.geometry=a),p&&p.complete()})),s.on("undo",(t=>{var n=t.vertices,a=c&&"cursor-update"!==c.type;r._resetCreateOperationGraphics(),r._snapLastPolygonVertexToFirst(e,n),n.length&&r._drawVertexGraphics(i,e,n,{userClicked:a})})),s.on("redo",(t=>{var n=t.vertices,a=c&&"cursor-update"!==c.type;r._resetCreateOperationGraphics(),r._snapLastPolygonVertexToFirst(e,n),n.length&&r._drawVertexGraphics(i,e,n,{userClicked:a})}))],u=[r.view.on("pointer-move",(e=>{Object(o.k)(s.getCoordsFromScreenPoint(Object(m.f)(e.x,e.y)))?r._displayCrosshairCursor():r._displayDefaultCursor()}),T.b.WIDGET),r.view.on("key-down",(e=>{e.key!==Pe.snappingKey||e.repeat?e.key===Pe.undoKey&&p&&p.canUndo()?(e.stopPropagation(),p.undo()):e.key===Pe.redoKey&&p&&p.canRedo()?(e.stopPropagation(),p.redo()):e.key===Pe.cancelKey&&p&&p.cancel():(r.snappingOptions.enabledToggled=!0,e.stopPropagation())}),T.b.WIDGET),r.view.on("key-up",(e=>{e.key===Pe.snappingKey&&(r.snappingOptions.enabledToggled=!1,e.stopPropagation())}),T.b.WIDGET)];if("polygon"===e){var d=(e,t,i)=>{if(!e||!e.layer||!e.visible)return!1;var n=r.view.toScreen(e.geometry);return r._isWithinScreenDistance(n,t,i)},h=!1;u.push(r.view.on("pointer-move",(()=>{h=!1}),T.b.WIDGET),r.view.on("pointer-down",(e=>{if((e=>{if(!(r._vertexGraphics.length<=2))return d(r._vertexGraphics[0],e,r._getVertexIntersectDistance())})(e))return h=!0,void e.stopPropagation();r._vertexGraphics.some((t=>d(t,e,r._getVertexIntersectDistance())))&&e.stopPropagation()}),T.b.WIDGET),r.view.on("pointer-up",(e=>{h&&(e.stopPropagation(),s.complete())})))}var p=r._operationHandleForCreateAction(s,[...l,...u],e);return p}))()}_setupCreateCircleOperation(e,t){var r=this;return Object(i.a)((function*(){var i=yield L(),a=Object(n.a)(Object(n.a)({},t),{},{elevationInfo:r.layer.elevationInfo,snappingManager:r._snappingManager,interactiveUndoDisabled:!0}),s=r._draw.create(e,a),c=!1,l=!0,u=[s.on("vertex-add",(t=>{var{type:n,vertexIndex:a,vertices:o}=t,u=o[a];r._drawSegmentGraphic(i,e,o,{centered:l,constrainToggle:c},s.viewAlignedCoordinateSystem),r.emit("create",{graphic:r.createGraphic,state:1===o.length?"start":"active",tool:e,toolEventInfo:{added:u,vertices:[{coordinates:u,componentIndex:0,vertexIndex:a}],type:n},type:"create"})})),s.on("cursor-update",(t=>{var{type:n,vertices:a}=t;if(r._drawSegmentGraphic(i,e,a,{centered:l,constrainToggle:c},s.viewAlignedCoordinateSystem),2===a.length){var o=a[a.length-1];r.emit("create",{graphic:r.createGraphic,state:"active",tool:e,toolEventInfo:{coordinates:o,type:n},type:"create"})}})),s.on("draw-complete",(e=>{var t,n=e.vertices.slice(0);1===n.length?(n.push(s.viewAlignedCoordinateSystem.makeMapPoint(n[0][0]+r._defaultSegmentOffset*r.view.resolution,n[0][1])),t=i.createCircle(n,s.viewAlignedCoordinateSystem,!0,r.view.resolution)):t=c?i.createEllipse(n,s.viewAlignedCoordinateSystem,l):i.createCircle(n,s.viewAlignedCoordinateSystem,l,r.view.resolution),r.createGraphic?r.createGraphic.geometry=t:(r._removeCreateGraphic(),r._set("createGraphic",new _.a(t,r.polygonSymbol))),h&&h.complete()}))],d=[r.view.on("pointer-move",(e=>{Object(o.k)(s.getCoordsFromScreenPoint(Object(m.f)(e.x,e.y)))?r._displayCrosshairCursor():r._displayDefaultCursor()}),T.b.WIDGET),r.view.on("key-down",(t=>{t.key===Pe.constraintKey?c||(c=!0,r._drawSegmentGraphic(i,e,s.vertices,{centered:l,constrainToggle:c},s.viewAlignedCoordinateSystem)):t.key===Pe.centerKey?l&&(l=!1,r._drawSegmentGraphic(i,e,s.vertices,{centered:l,constrainToggle:c},s.viewAlignedCoordinateSystem)):t.key===Pe.cancelKey&&h&&h.cancel()}),T.b.WIDGET),r.view.on("key-up",(t=>{t.key===Pe.constraintKey?(c=!1,r._drawSegmentGraphic(i,e,s.vertices,{centered:l,constrainToggle:c},s.viewAlignedCoordinateSystem)):t.key===Pe.centerKey&&(l=!0,r._drawSegmentGraphic(i,e,s.vertices,{centered:l,constrainToggle:c},s.viewAlignedCoordinateSystem))}),T.b.WIDGET)],h=r._operationHandleForCreateAction(s,[...u,...d],e);return h}))()}_setupCreateRectangleOperation(e,t){var r=this;return Object(i.a)((function*(){var i=yield L(),a=Object(n.a)(Object(n.a)({},t),{},{elevationInfo:r.layer.elevationInfo,snappingManager:r._snappingManager,interactiveUndoDisabled:!0}),s=r._draw.create(e,a),c=!1,l=!1,u=[s.on("vertex-add",(t=>{var{type:n,vertexIndex:a,vertices:o}=t,u=o[a];r._drawSegmentGraphic(i,e,o,{centered:l,constrainToggle:c},s.viewAlignedCoordinateSystem),r.emit("create",{graphic:r.createGraphic,state:1===o.length?"start":"active",tool:e,toolEventInfo:{added:u,vertices:[{coordinates:u,componentIndex:0,vertexIndex:a}],type:n},type:"create"})})),s.on("cursor-update",(t=>{var{type:n,vertices:a}=t;if(r._drawSegmentGraphic(i,e,a,{centered:l,constrainToggle:c},s.viewAlignedCoordinateSystem),2===a.length){var o=a[a.length-1];r.emit("create",{graphic:r.createGraphic,state:"active",tool:e,toolEventInfo:{coordinates:o,type:n},type:"create"})}})),s.on("draw-complete",(e=>{var t,n=e.vertices.slice(0);1===n.length&&(c=!1,l=!1),t=c?i.createSquare(n,s.viewAlignedCoordinateSystem,l):i.createRectangle(n,s.viewAlignedCoordinateSystem,l),r.createGraphic?r.createGraphic.geometry=t:(r._removeCreateGraphic(),r._set("createGraphic",new _.a(t,r.polygonSymbol))),h&&h.complete()}))],d=[r.view.on("pointer-move",(e=>{Object(o.k)(s.getCoordsFromScreenPoint(Object(m.f)(e.x,e.y)))?r._displayCrosshairCursor():r._displayDefaultCursor()}),T.b.WIDGET),r.view.on("key-down",(t=>{t.key===Pe.constraintKey?c||(c=!0,r._drawSegmentGraphic(i,e,s.vertices,{centered:l,constrainToggle:c},s.viewAlignedCoordinateSystem)):t.key===Pe.centerKey?l||(l=!0,r._drawSegmentGraphic(i,e,s.vertices,{centered:l,constrainToggle:c},s.viewAlignedCoordinateSystem)):t.key===Pe.cancelKey&&h&&h.cancel()}),T.b.WIDGET),r.view.on("key-up",(t=>{t.key===Pe.constraintKey?(c=!1,r._drawSegmentGraphic(i,e,s.vertices,{centered:l,constrainToggle:c},s.viewAlignedCoordinateSystem)):t.key===Pe.centerKey&&(l=!1,r._drawSegmentGraphic(i,e,s.vertices,{centered:l,constrainToggle:c},s.viewAlignedCoordinateSystem))}),T.b.WIDGET)],h=r._operationHandleForCreateAction(s,[...u,...d],e);return h}))()}_setupUpdateOperation(e,t){var r=this;return Object(i.a)((function*(){var{_defaultUpdateTool:i,defaultUpdateOptions:a,layer:s,view:c}=r,l=Object(n.a)(Object(n.a)({},a),t),u=l.tool||i;for(var d of e)s.remove(d),s.add(d);if("3d"===c.type){if(0===e.length)return null;switch(u){case"move":return r._setupMove3DOperation(e,l,c,u);case"reshape":if(e.length>1)return r._logError("sketch:reshape-multiple","Reshape operation does not support multiple graphics."),null;var h=Object(F.a)(e[0]);return 0===h?r._setupReshape3DOperation(e[0],l,c):(r._logError("sketch:reshape","Reshape operation not supported for provided graphic(s) (".concat(I(h),").")),null);case"transform":return r._setupGraphicTransform3DOperation(e,l,c)}}if("move"===u)return r._setupMoveOperation(e,l,c);if(e.length>1)return"reshape"===u?(r._logError("sketch:reshape-multiple","Reshape operation does not support multiple graphics."),null):r._setupTransformOrReshapeOperation(e,u,l,c);if(1===e.length){var p=e[0],f=Object(o.i)(p.geometry,"type");if("point"===f||"multipoint"===f)return r._setupMoveOperation(e,l,c);if("transform"===u||"reshape"===u)return r._setupTransformOrReshapeOperation(e,u,l,c)}return null}))()}_setupMove3DOperation(e,t,n,a,o=!1){var s=this;return Object(i.a)((function*(){for(var c of e){var l=Object(k.a)(c);if(0!==l)return s._logError("sketch:move","Move operation not supported for provided graphic(s) (".concat(I(l),").")),null}var u=yield s._requireModule(Promise.all([r.e(9),r.e(14),r.e(15)]).then(r.bind(null,1221)));if(De(u))return u;var d=new u.module.GraphicMoveTool({view:n,enableZ:t.enableZ,snappingManager:s._snappingManager});s.view.tools.add(d),d.graphics.addMany(e),o||s.updateGraphics.addMany(e);var h=[],p=new Se({activeComponent:d,tool:a,type:"update",onEnd:()=>{var e;h.forEach((e=>e.remove())),h.length=0,null==(e=s.view.tools)||e.remove(d),d.destroyed||d.destroy()},undo:()=>{Ie(p,s.updateGraphics.toArray()),s._emitUndoEvent({graphics:s.updateGraphics.toArray(),tool:a})},redo:()=>{ke(p,s.updateGraphics.toArray()),s._emitRedoEvent({graphics:s.updateGraphics.toArray(),tool:a})},addToSelection:e=>{s.updateGraphics.push(e),d.graphics.push(e),s.emit("update",{graphics:s.updateGraphics.toArray(),state:"active",aborted:!1,tool:s.activeTool,toolEventInfo:{added:[e],removed:[],type:"selection-change"},type:"update"})},removeFromSelection:e=>{var t=s.updateGraphics.indexOf(e);p.history.undo.forEach((e=>e.updates.splice(t,1))),p.history.redo.forEach((e=>e.updates.splice(t,1))),s.updateGraphics.remove(e),s.emit("update",{graphics:s.updateGraphics.toArray(),state:"active",aborted:!1,tool:s.activeTool,toolEventInfo:{added:[],removed:[e],type:"selection-change"},type:"update"}),0!==s.updateGraphics.length?d.graphics.remove(e):p.complete()},toggleTool:function(){var e=Object(i.a)((function*(){if(1===s.updateGraphics.length&&!1!==t.toggleToolOnClick&&"transform"===a){var e=s.updateGraphics.getItemAt(0);if(0===Object(F.a)(e)){var r=yield s._setupReshape3DOperation(e,t,n,!0);De(r)||(p.onEnd(),p.destroy(),s._setUpdateOperationHandle(r,t))}}}));return function(){return e.apply(this,arguments)}}()});return h.push(...s._getHandlesForComponent(p,t),s.view.on("immediate-click",(e=>s._getCommonUpdateOperationClickHandlers(p,e,t)),T.b.WIDGET),s.view.on("key-down",(e=>s._getCommonUpdateOperationKeyDownHandlers(p,e)),T.b.WIDGET)),p}))()}_setupGraphicTransform3DOperation(e,t,r,i=!1){if(1===e.length&&0===function(e){var t;if("graphics"!==(null==(t=e.layer)?void 0:t.type))return 1;if(Object(o.j)(e.geometry))return 2;switch(e.geometry.type){case"point":break;case"polygon":case"polyline":return 0;case"multipoint":case"extent":case"mesh":default:return 3}var r=Object(o.k)(e.symbol)&&"point-3d"===e.symbol.type&&e.symbol.symbolLayers;return r&&r.length>0&&r.some((e=>"object"===e.type))?"on-the-ground"!==Object(R.e)(e)&&Object(R.g)(e)?4:0:5}(e[0])){var n=e[0];if(Object(o.k)(n.geometry)&&"point"===n.geometry.type)return this._setupPointTransform3DOperation(n,t,r);if(Object(o.k)(n.geometry)&&("polygon"===n.geometry.type||"polyline"===n.geometry.type))return this._setupPolyTransform3DOperation(n,t,r,i)}return this._setupMove3DOperation(e,t,r,"transform",i)}_setupPointTransform3DOperation(e,t,n){var a=this;return Object(i.a)((function*(){var o="transform",{enableRotation:s,enableScaling:c,enableZ:l}=t,u=yield a._requireModule(Promise.all([r.e(9),r.e(14),r.e(15)]).then(r.bind(null,1221)));if(De(u))return u;var d=new u.module.GraphicTransformTool({graphic:e,view:n,enableRotation:s,enableScaling:c,enableZ:l,snappingManager:a._snappingManager});a.view.tools.add(d),a.updateGraphics.add(e);var h=[],p=new Se({activeComponent:d,tool:o,type:"update",onEnd:()=>{var e;h.forEach((e=>e.remove())),h.length=0,null==(e=a.view.tools)||e.remove(d),d.destroyed||d.destroy()},undo:()=>{Ie(p,a.updateGraphics.toArray()),a._emitUndoEvent({graphics:a.updateGraphics.toArray(),tool:o})},redo:()=>{ke(p,a.updateGraphics.toArray()),a._emitRedoEvent({graphics:a.updateGraphics.toArray(),tool:o})},addToSelection:function(){var e=Object(i.a)((function*(e){a.updateGraphics.add(e);var r=yield a._setupMove3DOperation(a.updateGraphics.toArray(),t,n,"transform",!0);De(r)||(p.onEnd(),p.destroy(),a._setUpdateOperationHandle(r,t))}));return function(t){return e.apply(this,arguments)}}()});return h.push(...a._getHandlesForComponent(p,t),a.view.on("immediate-click",(e=>a._getCommonUpdateOperationClickHandlers(p,e,t)),T.b.WIDGET),a.view.on("key-down",(e=>a._getCommonUpdateOperationKeyDownHandlers(p,e)),T.b.WIDGET)),p}))()}_setupPolyTransform3DOperation(e,t,n,a=!1){var o=this;return Object(i.a)((function*(){var s="transform",{enableRotation:c,enableScaling:l,enableZ:u,preserveAspectRatio:d}=t,h=yield o._requireModule(Promise.all([r.e(9),r.e(14),r.e(15)]).then(r.bind(null,1221)));if(De(h))return h;var p=new h.module.ExtentTransformTool({graphic:e,view:n,enableRotation:c,enableScaling:l,enableZ:u,preserveAspectRatio:d});o.view.tools.add(p),a||o.updateGraphics.add(e);var f=[],b=new Se({activeComponent:p,tool:s,type:"update",onEnd:()=>{var e;f.forEach((e=>e.remove())),f.length=0,null==(e=o.view.tools)||e.remove(p),p.destroyed||p.destroy()},canUndo:()=>p.canUndo(),undo:()=>{p.undo(),o._emitUndoEvent({graphics:o.updateGraphics.toArray(),tool:s})},canRedo:()=>p.canRedo(),redo:()=>{p.redo(),o._emitRedoEvent({graphics:o.updateGraphics.toArray(),tool:s})},addToSelection:function(){var e=Object(i.a)((function*(e){o.updateGraphics.add(e),o.emit("update",{graphics:o.updateGraphics.toArray(),state:"active",aborted:!1,tool:o.activeTool,toolEventInfo:{added:[e],removed:[],type:"selection-change"},type:"update"});var r=yield o._setupMove3DOperation(o.updateGraphics.toArray(),t,n,"transform",!0);De(r)||(b.onEnd(),b.destroy(),o._setUpdateOperationHandle(r,t))}));return function(t){return e.apply(this,arguments)}}(),removeFromSelection:function(){var e=Object(i.a)((function*(e){o.updateGraphics.remove(e),o.emit("update",{graphics:o.updateGraphics.toArray(),state:"active",aborted:!1,tool:o.activeTool,toolEventInfo:{added:[],removed:[e],type:"selection-change"},type:"update"}),b.complete()}));return function(t){return e.apply(this,arguments)}}(),toggleTool:function(){var e=Object(i.a)((function*(){if(1===o.updateGraphics.length&&!1!==t.toggleToolOnClick){var e=o.updateGraphics.getItemAt(0);if(0===Object(F.a)(e)){var r=yield o._setupReshape3DOperation(e,t,n,!0);De(r)||(b.onEnd(),b.destroy(),o._setUpdateOperationHandle(r,t))}}}));return function(){return e.apply(this,arguments)}}()});return f.push(...o._getHandlesForComponent(b,t),o.view.on("immediate-click",(e=>o._getCommonUpdateOperationClickHandlers(b,e,t)),T.b.WIDGET),o.view.on("key-down",(e=>o._getCommonUpdateOperationKeyDownHandlers(b,e)),T.b.WIDGET),o.view.on("key-down",(e=>{e.key!==Pe.constraintKey||e.repeat||(p.preserveAspectRatio=!p.preserveAspectRatio,e.stopPropagation())}),T.b.WIDGET),o.view.on("key-up",(e=>{e.key===Pe.constraintKey&&(p.preserveAspectRatio=!p.preserveAspectRatio,e.stopPropagation())}),T.b.WIDGET)),b}))()}_setupMoveOperation(e,t,r){var n=this;return Object(i.a)((function*(){var i="move";n.updateGraphics.addMany(e);var a=yield n._getGraphicMover(e,t,r);if(De(a))return a;n._syncCloneInfos();var o=new Se({activeComponent:a,tool:i,type:"update",onEnd:()=>{var e;n._displayDefaultCursor(),c.forEach((e=>e.remove())),s.forEach((e=>e.remove())),c=[],s=[],a.destroy(),null==(e=n._internalGraphicsLayer)||e.removeMany([...n.updateGraphics.toArray()]),n._removeCloneGraphics()},undo:()=>{var e=n.updateGraphics.toArray();Ie(o,e),n._syncCloneInfos(),n._emitUndoEvent({graphics:e,tool:i})},redo:()=>{var e=n.updateGraphics.toArray();ke(o,e),n._syncCloneInfos(),n._emitRedoEvent({graphics:e,tool:i})},addToSelection:e=>{n.updateGraphics.push(e),a.graphics=n.updateGraphics.toArray();var t=n._createClone(e);n._moveOperationCloneInfos.push({graphic:e,clone:t}),n._internalGraphicsLayer.add(t),n.emit("update",{graphics:n.updateGraphics.toArray(),state:"active",aborted:!1,tool:n.activeTool,toolEventInfo:{added:[e],removed:[],type:"selection-change"},type:"update"})},removeFromSelection:e=>{var t=n.updateGraphics.indexOf(e);o.history.undo.forEach((e=>e.updates.splice(t,1))),o.history.redo.forEach((e=>e.updates.splice(t,1)));var r=n._moveOperationCloneInfos.findIndex((t=>t.graphic===e)),i=n._moveOperationCloneInfos[r];n._internalGraphicsLayer.remove(i.clone),n.updateGraphics.remove(e),n._moveOperationCloneInfos.splice(r,1);var s=n.updateGraphics.toArray();n.emit("update",{graphics:s,state:"active",aborted:!1,tool:n.activeTool,toolEventInfo:{added:[],removed:[e],type:"selection-change"},type:"update"}),0!==n.updateGraphics.length?a.graphics=s:o.complete()}}),s=[r.on("immediate-click",(e=>n._getCommonUpdateOperationClickHandlers(o,e,t)),T.b.WIDGET),r.on("key-down",(e=>{n._getCommonUpdateOperationKeyDownHandlers(o,e),e.key!==Pe.constraintKey||e.repeat||(a.enableMoveAllGraphics=!a.enableMoveAllGraphics)}),T.b.WIDGET),r.on("key-up",(e=>{e.key===Pe.constraintKey&&(a.enableMoveAllGraphics=!a.enableMoveAllGraphics)}),T.b.WIDGET)],c=n._getHandlesForComponent(o,t);return c.push(a.on("graphic-move",(e=>{n._moveOperationCloneInfos.forEach((t=>{var r=e.allGraphics.find((e=>e===t.graphic));r&&(t.clone.geometry=r.geometry)}))}))),o}))()}_removeCloneGraphics(){if(this._moveOperationCloneInfos.length){for(var{clone:e}of this._moveOperationCloneInfos)this._internalGraphicsLayer.remove(e),e.destroy();this._moveOperationCloneInfos=[]}}_syncCloneInfos(){for(var{clone:e}of(this._removeCloneGraphics(),this._moveOperationCloneInfos=this._generateCloneInfos(this.updateGraphics.toArray()),this._moveOperationCloneInfos))this._internalGraphicsLayer.add(e)}_generateCloneInfos(e){return(null==e?void 0:e.map((e=>({graphic:e,clone:this._createClone(e)}))))||[]}_createClone(e){var t=e.clone();return t.symbol=this._getSymbolForClone(e),t}_getSymbolForClone(e){if(Object(o.j)(e.symbol))return null;switch(e.symbol.type){case"cim":return new O.a({style:"circle",size:12,color:[0,0,0,0],outline:{color:[255,127,0,1],width:1}});case"picture-marker":var{xoffset:t,yoffset:r,height:i,width:n}=e.symbol,a=i===n?n:Math.max(i,n);return new O.a({xoffset:t,yoffset:r,size:a,style:"square",color:[0,0,0,0],outline:{color:[255,127,0,1],width:1}});case"simple-marker":var{xoffset:s,yoffset:c,size:l,style:u}=e.symbol;return new O.a({xoffset:s,yoffset:c,style:"circle"===u?"circle":"square",size:l+2,color:[0,0,0,0],outline:{color:[255,127,0,1],width:1}});case"simple-fill":return new y.a({color:[0,0,0,0],outline:{style:"dash",color:[255,127,0,1],width:1}});case"simple-line":return new g.a({color:[255,127,0,1],style:"dash",width:1});case"text":var{xoffset:d,yoffset:h}=e.symbol;return new O.a({xoffset:d,yoffset:h,size:12,color:[0,0,0,0],outline:{color:[255,127,0,1],width:1}});default:return null}}_setupReshape3DOperation(e,t,n,a=!1){var o=this;return Object(i.a)((function*(){var s="reshape",c=yield o._requireModule(Promise.all([r.e(9),r.e(14),r.e(15)]).then(r.bind(null,1221)));if(De(c))return c;o.snappingOptions.enabledToggled=!1;var l=new c.module.GraphicReshapeTool({view:n,graphic:e,enableZ:t.enableZ,enableMoveGraphic:t.enableMoveGraphic,snappingManager:o._snappingManager});n.tools.add(l),a||o.updateGraphics.add(e);var u=[],d=new Se({activeComponent:l,tool:s,type:"update",onEnd:()=>{var e;u.forEach((e=>e.remove())),u.length=0,null==(e=o.view.tools)||e.remove(l),l.destroyed||l.destroy()},undo:()=>{l.beforeUndo(),Ie(d,o.updateGraphics.toArray()),o._emitUndoEvent({graphics:o.updateGraphics.toArray(),tool:s})},redo:()=>{ke(d,o.updateGraphics.toArray()),o._emitRedoEvent({graphics:o.updateGraphics.toArray(),tool:s})},addToSelection:function(){var e=Object(i.a)((function*(e){o.updateGraphics.add(e),o.emit("update",{graphics:o.updateGraphics.toArray(),state:"active",aborted:!1,tool:o.activeTool,toolEventInfo:{added:[e],removed:[],type:"selection-change"},type:"update"});var r=yield o._setupMove3DOperation(o.updateGraphics.toArray(),t,n,"transform",!0);De(r)||(d.onEnd(),d.destroy(),o._setUpdateOperationHandle(r,t))}));return function(t){return e.apply(this,arguments)}}(),removeFromSelection:function(){var e=Object(i.a)((function*(e){o.updateGraphics.remove(e),o.emit("update",{graphics:o.updateGraphics.toArray(),state:"active",aborted:!1,tool:o.activeTool,toolEventInfo:{added:[],removed:[e],type:"selection-change"},type:"update"}),d.complete()}));return function(t){return e.apply(this,arguments)}}(),toggleTool:function(){var e=Object(i.a)((function*(){if(!1!==t.toggleToolOnClick){var e=yield o._setupGraphicTransform3DOperation(o.updateGraphics.toArray(),t,n,!0);De(e)||(d.onEnd(),d.destroy(),o._setUpdateOperationHandle(e,t))}}));return function(){return e.apply(this,arguments)}}()});return u.push(...o._getHandlesForComponent(d,t),n.on("immediate-click",(e=>o._getCommonUpdateOperationClickHandlers(d,e,t)),T.b.WIDGET),n.on("key-down",(e=>{o._getCommonUpdateOperationKeyDownHandlers(d,e),e.key===Pe.snappingKey&&(o.snappingOptions.enabledToggled=!0,e.stopPropagation())}),T.b.WIDGET),n.on("key-up",(e=>{e.key===Pe.snappingKey&&(o.snappingOptions.enabledToggled=!1,e.stopPropagation())}),T.b.WIDGET)),d}))()}_setupTransformOrReshapeOperation(e,t,r,n){var a=this;return Object(i.a)((function*(){var{multipleSelectionEnabled:o}=r;a.updateGraphics.addMany(e);var s="transform"===t?yield a._getBox(e,r,n):yield a._getReshape(e,r,n);if(De(s))return s;var c=new Se({activeComponent:s,type:"update",onEnd:()=>{u.forEach((e=>e.remove())),l.forEach((e=>e.remove())),u=[],l=[],c.activeComponent&&!c.activeComponent.destroyed&&c.activeComponent.destroy(),a._internalGraphicsLayer.removeMany(a.updateGraphics.toArray())},undo:()=>{Ie(c,a.updateGraphics.toArray()),c.refreshComponent(),a._emitUndoEvent({graphics:a.updateGraphics.toArray(),tool:c.tool})},redo:()=>{ke(c,a.updateGraphics.toArray()),c.refreshComponent(),a._emitRedoEvent({graphics:a.updateGraphics.toArray(),tool:c.tool})},addToSelection:e=>{var t=c.activeComponent;a.updateGraphics.add(e),t.graphics=a.updateGraphics.toArray(),t.refresh(),c.resetHistory(),a.emit("update",{graphics:a.updateGraphics.toArray(),state:"active",aborted:!1,tool:a.activeTool,toolEventInfo:{added:[e],removed:[],type:"selection-change"},type:"update"})},removeFromSelection:e=>{var t=c.activeComponent,r=a.updateGraphics.indexOf(e);c.history.undo.forEach((e=>e.updates.splice(r,1))),c.history.redo.forEach((e=>e.updates.splice(r,1))),a.updateGraphics.remove(e);var i=a.updateGraphics.toArray();a.emit("update",{graphics:i,state:"active",aborted:!1,tool:a.activeTool,toolEventInfo:{added:[],removed:[e],type:"selection-change"},type:"update"}),0!==a.updateGraphics.length?t.graphics=i:c.complete()},toggleTool:function(){var t=Object(i.a)((function*(){if(!(a.updateGraphics.length>1)){var t=null;"transform"===c.tool?t=yield a._getReshape(e,r,n):"reshape"===c.tool&&(t=yield a._getBox(e,r,n)),De(t)||(c.activeComponent.destroy(),c.activeComponent=t,c.activeComponent&&(u.forEach((e=>e.remove())),u=a._getHandlesForComponent(c,r)))}}));return function(){return t.apply(this,arguments)}}()}),l=[n.on("immediate-click",(e=>{a._getFirstHit(Object(E.a)(e)).then((t=>{var r;if(c)if(null!=(r=t.results)&&r.length){var i=c.activeComponent;t.results.some((t=>{if(t.graphic){var r,n=t.graphic;if("box"===(null==i?void 0:i.type)&&null!=(r=e.native)&&r.shiftKey&&o)return c.addToSelection(n),!0;n.layer===a.layer&&c.complete()}return!1}))&&e.stopPropagation()}else c.complete()}))}),T.b.WIDGET),n.on("key-down",(e=>{if(a._getCommonUpdateOperationKeyDownHandlers(c,e),e.key!==Pe.snappingKey||e.repeat||(a.snappingOptions.enabledToggled=!0,e.stopPropagation()),e.key===Pe.constraintKey&&!e.repeat&&c){var t=c.activeComponent;t&&"box"===t.type&&(t.preserveAspectRatio=!t.preserveAspectRatio)}}),T.b.WIDGET),n.on("key-up",(e=>{var t;if(e.key===Pe.snappingKey&&"reshape"===(null==c||null==(t=c.activeComponent)?void 0:t.type)&&(a.snappingOptions.enabledToggled=!1,e.stopPropagation()),e.key===Pe.constraintKey&&c){var r=c.activeComponent;r&&"box"===r.type&&(r.preserveAspectRatio=!r.preserveAspectRatio)}}),T.b.WIDGET)],u=a._getHandlesForComponent(c,r);return c}))()}_getGraphicMover(e,t,n){var a=this;return Object(i.a)((function*(){var{enableMoveAllGraphics:i}=t,o=yield a._requireModule(r.e(170).then(r.bind(null,928)));return De(o)?o:new o.module.default({enableMoveAllGraphics:i,graphics:e,view:n,callbacks:{onGraphicMoveStart:({dx:e,dy:t,graphic:r})=>{a._displayGrabbingCursor(),a.emit("update",{graphics:a.updateGraphics.toArray(),state:"active",aborted:!1,tool:a.activeTool,toolEventInfo:{dx:e,dy:t,mover:r,type:"move-start"},type:"update"})},onGraphicMove:({dx:e,dy:t,graphic:r})=>a.emit("update",{graphics:a.updateGraphics.toArray(),state:"active",aborted:!1,tool:a.activeTool,toolEventInfo:{dx:e,dy:t,mover:r,type:"move"},type:"update"}),onGraphicMoveStop:({dx:e,dy:t,graphic:r})=>{a._displayPointerCursor(),a.emit("update",{graphics:a.updateGraphics.toArray(),state:"active",aborted:!1,tool:a.activeTool,toolEventInfo:{dx:e,dy:t,mover:r,type:"move-stop"},type:"update"})},onGraphicPointerOver:()=>a._displayPointerCursor(),onGraphicPointerOut:()=>a._displayDefaultCursor()}})}))()}_getBox(e,t,a){var o=this;return Object(i.a)((function*(){var{enableRotation:i,enableScaling:s,preserveAspectRatio:c}=t,l=yield o._requireModule(r.e(152).then(r.bind(null,1258)));return De(l)?l:new l.module.default({graphics:e,enableRotation:i,enableScaling:s,preserveAspectRatio:c,layer:o._internalGraphicsLayer,view:a,callbacks:{onMoveStart:e=>o.emit("update",{graphics:o.updateGraphics.toArray(),state:"active",aborted:!1,tool:o.activeTool,toolEventInfo:Object(n.a)({},e),type:"update"}),onMove:e=>o.emit("update",{graphics:o.updateGraphics.toArray(),state:"active",aborted:!1,tool:o.activeTool,toolEventInfo:Object(n.a)({},e),type:"update"}),onMoveStop:e=>o.emit("update",{graphics:o.updateGraphics.toArray(),state:"active",aborted:!1,tool:o.activeTool,toolEventInfo:Object(n.a)({},e),type:"update"}),onScaleStart:e=>o.emit("update",{graphics:o.updateGraphics.toArray(),state:"active",aborted:!1,tool:o.activeTool,toolEventInfo:Object(n.a)({},e),type:"update"}),onScale:e=>o.emit("update",{graphics:o.updateGraphics.toArray(),state:"active",aborted:!1,tool:o.activeTool,toolEventInfo:Object(n.a)({},e),type:"update"}),onScaleStop:e=>o.emit("update",{graphics:o.updateGraphics.toArray(),state:"active",aborted:!1,tool:o.activeTool,toolEventInfo:Object(n.a)({},e),type:"update"}),onRotateStart:e=>o.emit("update",{graphics:o.updateGraphics.toArray(),state:"active",aborted:!1,tool:o.activeTool,toolEventInfo:Object(n.a)({},e),type:"update"}),onRotate:e=>o.emit("update",{graphics:o.updateGraphics.toArray(),state:"active",aborted:!1,tool:o.activeTool,toolEventInfo:Object(n.a)({},e),type:"update"}),onRotateStop:e=>o.emit("update",{graphics:o.updateGraphics.toArray(),state:"active",aborted:!1,tool:o.activeTool,toolEventInfo:Object(n.a)({},e),type:"update"})}})}))()}_getReshape(e,t,a){var o=this;return Object(i.a)((function*(){var{enableMidpoints:i=!0}=t,s=yield o._requireModule(r.e(153).then(r.bind(null,1183)));return De(s)?s:new s.module.default({enableMidpoints:i,graphic:e[0],layer:o._internalGraphicsLayer,snappingManager:o._snappingManager,view:a,callbacks:{onReshapeStart:e=>o.emit("update",{graphics:o.updateGraphics.toArray(),state:"active",aborted:!1,tool:o.activeTool,toolEventInfo:Object(n.a)({},e),type:"update"}),onReshape:e=>o.emit("update",{graphics:o.updateGraphics.toArray(),state:"active",aborted:!1,tool:o.activeTool,toolEventInfo:Object(n.a)({},e),type:"update"}),onReshapeStop:({mover:e,type:t})=>o.emit("update",{graphics:o.updateGraphics.toArray(),state:"active",aborted:!1,tool:o.activeTool,toolEventInfo:{mover:e,type:t},type:"update"}),onMoveStart:({dx:e,dy:t,mover:r,type:i})=>o.emit("update",{graphics:o.updateGraphics.toArray(),state:"active",aborted:!1,tool:o.activeTool,toolEventInfo:{dx:e,dy:t,mover:r,type:i},type:"update"}),onMove:({dx:e,dy:t,mover:r,type:i})=>o.emit("update",{graphics:o.updateGraphics.toArray(),state:"active",aborted:!1,tool:o.activeTool,toolEventInfo:{dx:e,dy:t,mover:r,type:i},type:"update"}),onMoveStop:({dx:e,dy:t,mover:r,type:i})=>o.emit("update",{graphics:o.updateGraphics.toArray(),state:"active",aborted:!1,tool:o.activeTool,toolEventInfo:{dx:e,dy:t,mover:r,type:i},type:"update"}),onVertexAdd:({added:e,type:t,vertices:r})=>{var i=e.map((e=>Object(p.b)(e.geometry)));o.emit("update",{graphics:o.updateGraphics.toArray(),state:"active",aborted:!1,tool:o.activeTool,toolEventInfo:{added:i,vertices:r,type:t},type:"update"})},onVertexRemove:({removed:e,type:t,vertices:r})=>{var i=e.map((e=>Object(p.b)(e.geometry)));o.emit("update",{graphics:o.updateGraphics.toArray(),state:"active",aborted:!1,tool:o.activeTool,toolEventInfo:{removed:i,vertices:r,type:t},type:"update"})}}})}))()}_getHandlesForComponent(e,t){var r=e.activeComponent;switch(r.type){case"graphic-mover":return[r.on("graphic-click",(({graphic:t,viewEvent:r})=>{var i;null!=(i=r.native)&&i.shiftKey&&(r.stopPropagation(),e.removeFromSelection(t))})),r.on("graphic-move-start",(t=>e.addToHistory(Fe(t.allGraphics))))];case"box":return[r.on("graphic-click",(r=>this._onTransformOrReshape2DGraphicClick(e,t,r))),r.on("move-start",(t=>e.addToHistory(Fe(t.graphics)))),r.on("rotate-start",(t=>e.addToHistory(Fe(t.graphics)))),r.on("scale-start",(t=>e.addToHistory(Fe(t.graphics))))];case"reshape":return[r.on("graphic-click",(r=>this._onTransformOrReshape2DGraphicClick(e,t,r))),r.on("move-start",(t=>e.addToHistory(Fe([t.mover])))),r.on("reshape-start",(t=>e.addToHistory(Fe([t.graphic])))),r.on("vertex-add",(t=>e.addToHistory(Fe([t.oldGraphic])))),r.on("vertex-remove",(t=>e.addToHistory(Fe([t.oldGraphic]))))];case"move-3d":return[r.on("graphic-move-start",(t=>{e.addToHistory(Fe(t.allGraphics)),this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{dx:0,dy:0,mover:t.allGraphics.length>0?t.allGraphics[0]:null,type:"move-start"},type:"update"})})),r.on("graphic-move",(e=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{dx:e.dx,dy:e.dy,mover:e.allGraphics.length>0?e.allGraphics[0]:null,type:"move"},type:"update"})})),r.on("graphic-move-stop",(e=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{dx:0,dy:0,mover:e.allGraphics.length>0?e.allGraphics[0]:null,type:"move-stop"},type:"update"})})),r.on("immediate-click",(r=>{r.shiftKey?this._toggleSelection([r.graphic],e,t):e.toggleTool()}))];case"transform-3d":return[r.on("graphic-translate-start",(t=>{e.addToHistory(Fe([t.graphic])),this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{mover:t.graphic,dx:t.dxScreen,dy:t.dyScreen,type:"move-start"},type:"update"})})),r.on("graphic-translate-stop",(e=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{mover:e.graphic,dx:e.dxScreen,dy:e.dyScreen,type:"move-stop"},type:"update"})})),r.on("graphic-rotate-start",(t=>{e.addToHistory(Re([t.graphic])),this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{mover:t.graphic,angle:t.angle,type:"rotate-start"},type:"update"})})),r.on("graphic-rotate-stop",(e=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{mover:e.graphic,angle:e.angle,type:"rotate-stop"},type:"update"})})),r.on("graphic-scale-start",(t=>{e.addToHistory(Re([t.graphic])),this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{mover:t.graphic,xScale:t.xScale,yScale:t.yScale,type:"scale-start"},type:"update"})})),r.on("graphic-scale-stop",(e=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{mover:e.graphic,xScale:e.xScale,yScale:e.yScale,type:"scale-stop"},type:"update"})})),r.on("graphic-translate",(e=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{mover:e.graphic,dx:e.dxScreen,dy:e.dyScreen,type:"move"},type:"update"})})),r.on("graphic-rotate",(e=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{mover:e.graphic,angle:e.angle,type:"rotate"},type:"update"})})),r.on("graphic-scale",(e=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{mover:e.graphic,xScale:e.xScale,yScale:e.yScale,type:"scale"},type:"update"})})),r.on("immediate-click",(r=>{r.shiftKey?this._toggleSelection([r.graphic],e,t):e.toggleTool()}))];case"reshape-3d":return[r.on("reshape",(t=>{"reshape-start"===t.type&&e.addToHistory(Fe([t.mover])),this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:t,type:"update"})})),r.on("move",(t=>{"move-start"===t.type&&e.addToHistory(Fe([t.mover])),this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:t,type:"update"})})),r.on("vertex-add",(e=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:e,type:"update"})})),r.on("vertex-remove",(e=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:e,type:"update"})})),r.on("immediate-click",(r=>{r.shiftKey?this._toggleSelection([r.graphic],e,t):e.toggleTool()}))];case"draw":case"draw-3d":return null;default:return}}_onTransformOrReshape2DGraphicClick(e,t,r){var i,{graphic:n,viewEvent:a}=r;null!=(i=a.native)&&i.shiftKey?(a.stopPropagation(),e.removeFromSelection(n)):t.toggleToolOnClick&&(Object(o.j)(n.geometry)||"extent"!==n.geometry.type?(a.stopPropagation(),e.toggleTool()):this._logError("sketch:reshape-extent","Reshape operation does not support graphics with geometry of type 'extent'."))}_setUpdateOperationHandle(e,t){this._operationHandle=e;var r=this.view.map;this._disablePopup(t);e.on("complete",(()=>{if(e===this._operationHandle){var i=this.updateGraphics.toArray(),n=this._operationHandle.tool;this._operationHandle.destroy(),this._operationHandle=null,this._internalGraphicsLayer.removeMany(this.updateGraphics.toArray()),this.updateGraphics.removeAll(),r&&r.remove(this._internalGraphicsLayer),this._restorePopup(t),this.emit("update",{graphics:i,state:"complete",aborted:e.cancelled,tool:n,toolEventInfo:null,type:"update"})}}))}_getCommonUpdateOperationClickHandlers(e,t,r){var i=Object(E.a)(t);this._getFirstHit(i).then((i=>{var n=i.results;n.length&&(t.native.shiftKey&&this._toggleSelection(n.map((e=>e.graphic)),e,r)||n.some((e=>e.graphic&&this.updateGraphics.indexOf(e.graphic)>-1)))?t.stopPropagation():e.complete()}))}_toggleSelection(e,t,r){var i=!!r.multipleSelectionEnabled;return e.some((e=>null!=e&&!(!i||e.layer!==this.layer)&&(-1===this.updateGraphics.indexOf(e)?t.addToSelection(e):t.removeFromSelection(e),!0)))}_getCommonUpdateOperationKeyDownHandlers(e,t){if(e){var r=t.key;r===Pe.undoKey&&e.canUndo()?(t.stopPropagation(),e.undo()):r===Pe.redoKey&&e.canRedo()?(t.stopPropagation(),e.redo()):r===Pe.cancelKey?(t.stopPropagation(),e.cancel()):Pe.deleteKeys.indexOf(r)>=0&&this._onDeleteKey(t)}}_onDeleteKey(e){if(this._operationHandle&&"update"===this._operationHandle.type){var t=this.activeComponent;if(!Object(o.j)(t)&&"reshape"!==t.type&&"reshape-3d"!==t.type){e.stopPropagation();var r=this.updateGraphics.toArray();this.layer.removeMany(r),this._emitDeleteEvent({graphics:r,tool:this.activeTool})}}}_drawMultipointGraphic(e,t,r){var i=null;if(!r&&t.length>1){var n=t.slice(0);n.pop(),i=e.createMultipoint(n,this.view.spatialReference)}else i=e.createMultipoint(t,this.view.spatialReference);this.createGraphic?this.createGraphic.geometry=i:this._set("createGraphic",new _.a(i,this.pointSymbol)),r&&1===t.length&&this._internalGraphicsLayer.add(this.createGraphic)}_drawVertexGraphics(e,t,r,i){if(r.length){var{_doUnnormalization:n,activeLineSymbol:a,activeVertexSymbol:o,polygonSymbol:s,polylineSymbol:c,vertexSymbol:l,view:{spatialReference:u}}=this,d=!(!i||!i.userClicked),h="polygon"===t,p=h?s:c;if(1===r.length){this._removeLineGraphic(),this._removeActiveLineGraphic();var f=this.createPointFromVertex(r[0]),b=h?e.createPolygon([r],u,n,!0):e.createPolyline([r],u,n);this._vertexGraphics.length?this._vertexGraphics[0].geometry=f:this._vertexGraphics.push(new _.a(f,o)),this.createGraphic?this.createGraphic.set({geometry:b,symbol:p}):this._set("createGraphic",new _.a(b,p)),d&&this._internalGraphicsLayer.add(this._vertexGraphics[0])}else if(2===r.length){var v=this.createPointFromVertex(r[1]),m=e.createPolyline([r],u,n),g=h?e.createPolygon([r],u,n,!0):e.createPolyline([r],u,n);if(!this._vertexGraphics.length){var y=this.createPointFromVertex(r[0]),O=new _.a(y,l);this._vertexGraphics.push(O)}if(1===this._vertexGraphics.length){var j=this._vertexGraphics[0],w=new _.a(v,l);this._removeLineGraphic(),this._removeActiveFillGraphic(),this._vertexGraphics.push(w),this._internalGraphicsLayer.remove(j),this._internalGraphicsLayer.add(j)}else this._vertexGraphics[1].geometry=v;this._showActiveLineGraphic(m);var x=this._vertexGraphics[0];d&&(this._activeLineGraphic.symbol=c,x.symbol=l,this._internalGraphicsLayer.add(this._vertexGraphics[1])),this.createGraphic?this.createGraphic.set({geometry:g,symbol:p}):this._set("createGraphic",new _.a(g,p)),this._internalGraphicsLayer.remove(x),this._internalGraphicsLayer.add(x)}else if(r.length>2){var S=h?e.createPolygon([r],u,n,!0):e.createPolyline([r],u,n);"polygon"===t&&this._showFillGraphic(S);var M=r.map((e=>e.slice())),T=M.pop(),P=[M[M.length-1],T],E=e.createPolyline([M],u,n),C=e.createPolyline([P],u,n);this._showLineGraphic(E),this._showActiveLineGraphic(C);for(var A=0;A<M.length;A++){var I=this._vertexGraphics[A];if(I)d||A!==this._vertexGraphics.length-1?I.symbol=l:I.symbol=o;else{var k=this.createPointFromVertex(r[A]);this._showVertexGraphic(k)}}if(d){this._activeLineGraphic.symbol=c;var F=r.length-1,R=this.createPointFromVertex(r[F]);this._showVertexGraphic(R)}else this._activeLineGraphic.symbol=a;for(var D of(this.createGraphic?this.createGraphic.set({geometry:S,symbol:p}):(this._removeCreateGraphic(),this._set("createGraphic",new _.a(S,p))),this._vertexGraphics))this._internalGraphicsLayer.remove(D),this._internalGraphicsLayer.add(D)}}}_drawSegmentGraphic(e,t,r,i,n){if(r.length){var a,s=!(null==i||!i.centered),c=!(null==i||!i.constrainToggle);1===r.length?this._removeCenterIndicatorGraphic():("rectangle"===t?a=c?e.createSquare(r,n,s):e.createRectangle(r,n,s):"circle"===t&&(a=c?e.createEllipse(r,n,s):e.createCircle(r,n,s,this.view.resolution)),Object(o.k)(a)&&a.extent&&a.extent.center&&this._showCenterIndicatorGraphic(a.extent.center)),a?this.createGraphic?this.createGraphic.geometry=a:(this._removeCreateGraphic(),this._set("createGraphic",new _.a(a,this.polygonSymbol)),this._internalGraphicsLayer.add(this.createGraphic)):this._removeCreateGraphic()}}_showCenterIndicatorGraphic(e){this._centerIndicatorGraphic?this._centerIndicatorGraphic.geometry=e:(this._centerIndicatorGraphic=new _.a(e,this._centerSymbol),this._internalGraphicsLayer.add(this._centerIndicatorGraphic))}_removeCenterIndicatorGraphic(){this._centerIndicatorGraphic&&(this._internalGraphicsLayer.remove(this._centerIndicatorGraphic),this._centerIndicatorGraphic.destroy(),this._centerIndicatorGraphic=null)}_showActiveLineGraphic(e){this._activeLineGraphic?(this._activeLineGraphic.set({geometry:e,symbol:this.activeLineSymbol}),this._internalGraphicsLayer.remove(this._activeLineGraphic)):this._activeLineGraphic=new _.a(e,this.activeLineSymbol),this._internalGraphicsLayer.add(this._activeLineGraphic)}_showFillGraphic(e){this._activeFillGraphic?(this._activeFillGraphic.set({geometry:e,symbol:this.activeFillSymbol}),this._internalGraphicsLayer.remove(this._activeFillGraphic)):this._activeFillGraphic=new _.a(e,this.activeFillSymbol),this._internalGraphicsLayer.add(this._activeFillGraphic)}_showLineGraphic(e){this._lineGraphic?(this._lineGraphic.set({geometry:e,symbol:this.polylineSymbol}),this._internalGraphicsLayer.remove(this._lineGraphic)):this._lineGraphic=new _.a(e,this.polylineSymbol),this._internalGraphicsLayer.add(this._lineGraphic)}_showVertexGraphic(e,t){var r=t?this.activeVertexSymbol:this.vertexSymbol,i=new _.a(e,r);this._vertexGraphics.push(i),this._internalGraphicsLayer.add(i)}_resetCreateOperationGraphics(){this._removeActiveFillGraphic(),this._removeLineGraphic(),this._removeActiveLineGraphic(),this._removeVertexGraphics(),this._removeCloneGraphics()}_removeCreateGraphic(){this.createGraphic&&(this._internalGraphicsLayer.remove(this.createGraphic),this._set("createGraphic",null))}_removeCreateOperationGraphics(){this._removeCenterIndicatorGraphic(),this._removeActiveLineGraphic(),this._removeActiveFillGraphic(),this._removeLineGraphic(),this._removeVertexGraphics()}_removeActiveLineGraphic(){this._activeLineGraphic&&(this._internalGraphicsLayer.remove(this._activeLineGraphic),this._activeLineGraphic.destroy(),this._activeLineGraphic=null)}_removeActiveFillGraphic(){this._activeFillGraphic&&(this._internalGraphicsLayer.remove(this._activeFillGraphic),this._activeFillGraphic.destroy(),this._activeFillGraphic=null)}_removeLineGraphic(){this._lineGraphic&&(this._internalGraphicsLayer.remove(this._lineGraphic),this._lineGraphic.destroy(),this._lineGraphic=null)}_removeVertexGraphics(){this._vertexGraphics.length&&(this._internalGraphicsLayer.removeMany(this._vertexGraphics),this._vertexGraphics.forEach((e=>e.destroy())),this._vertexGraphics=[])}_removeDefaultLayer(){this._internalGraphicsLayer&&(this.view&&this.view.map&&this.view.map.remove(this._internalGraphicsLayer),this._internalGraphicsLayer.destroy(),this._internalGraphicsLayer=null)}_operationHandleForCreateAction(e,t,r){return new Se({activeComponent:this._draw,tool:r,type:"create",onEnd:()=>{t.forEach((e=>e.remove())),t.length=0,this._removeCreateOperationGraphics(),this._internalGraphicsLayer&&this._internalGraphicsLayer.remove(this.createGraphic),this._displayDefaultCursor()},undo:()=>{e.undo(),this._emitUndoEvent({graphics:[this.createGraphic],tool:r})},redo:()=>{e.redo(),this._emitRedoEvent({graphics:[this.createGraphic],tool:r})},canUndo:()=>e&&e.canUndo(),canRedo:()=>e&&e.canRedo()})}_isComponentGraphic(e){var{activeComponent:t}=this;return!(!e||Object(o.j)(t))&&(!(!e.attributes||!e.attributes.esriSketchTool)||("box"===t.type||"reshape"===t.type)&&t.isUIGraphic(e))}_snapLastPolygonVertexToFirst(e,t){if(!("polygon"!==e&&t.length<=2)){var r=t[0],i=t[t.length-1],n=this.view.toScreen(new h.a(r[0],r[1],this.view.spatialReference)),a=this.view.toScreen(new h.a(i[0],i[1],this.view.spatialReference));this._isWithinScreenDistance(n,a,this._getVertexIntersectDistance())&&(i[0]=r[0],i[1]=r[1])}}_getVertexIntersectDistance(){return this.vertexSymbol&&"simple-marker"===this.vertexSymbol.type?Object(m.h)(this.vertexSymbol.size)/2+3:3}_isWithinScreenDistance(e,t,r){var i=e.x-t.x,n=e.y-t.y;return Math.sqrt(i*i+n*n)<=r}_displayPointerCursor(){this.view&&this.view.container&&"pointer"!==this.view.cursor&&(this.view.cursor="pointer")}_displayGrabbingCursor(){this.view&&this.view.container&&"grabbing"!==this.view.cursor&&(this.view.cursor="grabbing")}_displayCrosshairCursor(){this.view&&this.view.container&&"crosshair"!==this.view.cursor&&(this.view.cursor="crosshair")}_displayDefaultCursor(){this.view&&this.view.container&&null!==this.view.cursor&&(this.view.cursor=null)}_logError(e,t,r){Te.error(new u.a(e,t,r))}_requireModule(e){var t=this;return Object(i.a)((function*(){var r=new AbortController;t._moduleLoaderAbortController=r;var i=yield e;return t._moduleLoaderAbortController!==r||r.signal.aborted?{requireError:"aborted"}:{module:i}}))()}_emitUndoEvent(e){this.emit("undo",Object(n.a)(Object(n.a)({},e),{},{type:"undo"}))}_emitRedoEvent(e){this.emit("redo",Object(n.a)(Object(n.a)({},e),{},{type:"redo"}))}_emitDeleteEvent(e){this.emit("delete",Object(n.a)(Object(n.a)({},e),{},{type:"delete"}))}createPointFromVertex(e){return e.length>2?new h.a(e[0],e[1],e[2],this.view.spatialReference):new h.a(e[0],e[1],this.view.spatialReference)}test(){return this._operationHandle}wait(){return Object(x.i)(this,"updating")}_beginAsyncOperation(){this._numUpdating+=1,this.notifyChange("updating")}_endAsyncOperation(){this._numUpdating-=1,this.notifyChange("updating")}_disablePopupEnabled(e){var t;return"3d"!==(null==(t=this.view)?void 0:t.type)||this.updateOnGraphicClick||Object(o.k)(e)&&e.toggleToolOnClick}_disablePopup(e){if(this._disablePopupEnabled(e)){var t=this.view.popup;t&&Object(o.j)(this._originalAutoOpenEnabled)&&(this._originalAutoOpenEnabled=t.autoOpenEnabled,t.autoOpenEnabled=!1)}}_restorePopup(e){if(this._disablePopupEnabled(e)){var t=this.view.popup;t&&Object(o.k)(this._originalAutoOpenEnabled)&&(t.autoOpenEnabled=this._originalAutoOpenEnabled,this._originalAutoOpenEnabled=null)}}_waitViewReady(){var e=this;return Object(i.a)((function*(){e.view&&(Object(o.a)(e._viewReadyAbortController),e._viewReadyAbortController=Object(d.d)(),yield Object(d.x)(Object(x.j)(e.view,"ready"),e._viewReadyAbortController.signal))}))()}};function Ie(e,t){var r=e.history.undo.pop().updates,i=[];t.forEach(((e,t)=>{var n=r[t],a={};null!=n&&(Object(o.k)(n.geometry)&&(a.geometry=e.geometry,e.geometry=n.geometry),Object(o.k)(n.symbol)&&(a.symbol=e.symbol,e.symbol=n.symbol),i.push(a))})),e.history.redo.push({updates:i})}function ke(e,t){var r=e.history.redo.pop().updates,i=[];t.forEach(((e,t)=>{var n=r[t],a={};null!=n&&(Object(o.k)(n.geometry)&&(a.geometry=e.geometry,e.geometry=n.geometry),Object(o.k)(n.symbol)&&(a.symbol=e.symbol,e.symbol=n.symbol),i.push(a))})),e.history.undo.push({updates:i})}function Fe(e){return{updates:e.map((e=>({geometry:e.geometry})))}}function Re(e){return{updates:e.map((e=>({symbol:e.symbol})))}}function De(e){return"requireError"in e&&"aborted"===e.requireError}Object(a.a)([Object(c.b)({readOnly:!0})],Ae.prototype,"_draw",null),Object(a.a)([Object(c.b)()],Ae.prototype,"updating",null),Object(a.a)([Object(c.b)()],Ae.prototype,"_operationHandle",void 0),Object(a.a)([Object(c.b)({readOnly:!0})],Ae.prototype,"activeTool",null),Object(a.a)([Object(c.b)()],Ae.prototype,"activeFillSymbol",void 0),Object(a.a)([Object(c.b)()],Ae.prototype,"activeLineSymbol",void 0),Object(a.a)([Object(c.b)()],Ae.prototype,"activeVertexSymbol",void 0),Object(a.a)([Object(c.b)({readOnly:!0})],Ae.prototype,"createGraphic",null),Object(a.a)([Object(c.b)()],Ae.prototype,"defaultCreateOptions",null),Object(a.a)([Object(c.b)()],Ae.prototype,"defaultUpdateOptions",null),Object(a.a)([Object(c.b)()],Ae.prototype,"layer",void 0),Object(a.a)([Object(c.b)({types:j.e})],Ae.prototype,"pointSymbol",void 0),Object(a.a)([Object(c.b)({types:j.e})],Ae.prototype,"polygonSymbol",void 0),Object(a.a)([Object(c.b)({types:j.e})],Ae.prototype,"polylineSymbol",void 0),Object(a.a)([Object(c.b)({type:A.a,nonNullable:!0})],Ae.prototype,"snappingOptions",null),Object(a.a)([Object(c.b)()],Ae.prototype,"_snappingManager",void 0),Object(a.a)([Object(c.b)({readOnly:!0})],Ae.prototype,"state",null),Object(a.a)([Object(c.b)({readOnly:!0})],Ae.prototype,"updateGraphics",void 0),Object(a.a)([Object(c.b)()],Ae.prototype,"updateOnGraphicClick",void 0),Object(a.a)([Object(c.b)({types:j.e})],Ae.prototype,"updatePointSymbol",void 0),Object(a.a)([Object(c.b)({types:j.e})],Ae.prototype,"updatePolygonSymbol",void 0),Object(a.a)([Object(c.b)({types:j.e})],Ae.prototype,"updatePolylineSymbol",void 0),Object(a.a)([Object(c.b)({types:j.e})],Ae.prototype,"vertexSymbol",void 0),Object(a.a)([Object(c.b)({value:null})],Ae.prototype,"view",null),Object(a.a)([Object(c.b)()],Ae.prototype,"cancel",null),Object(a.a)([Object(c.b)()],Ae.prototype,"complete",null),Object(a.a)([Object(c.b)()],Ae.prototype,"delete",null),Object(a.a)([Object(c.b)()],Ae.prototype,"create",null),Object(a.a)([Object(c.b)()],Ae.prototype,"update",null),Object(a.a)([Object(c.b)()],Ae.prototype,"undo",null),Object(a.a)([Object(c.b)()],Ae.prototype,"redo",null),Object(a.a)([Object(c.b)()],Ae.prototype,"canUndo",null),Object(a.a)([Object(c.b)()],Ae.prototype,"canRedo",null),Object(a.a)([Object(c.b)()],Ae.prototype,"toggleUpdateTool",null);var Le=Ae=Object(a.a)([Object(l.a)(Me)],Ae);t.a=Le},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,r){"use strict";r.d(t,"a",(function(){return a}));r(80);var i=r(89),n=r(340);function a(e){var t;if("graphics"!==(null==(t=e.layer)?void 0:t.type))return 1;if(Object(i.j)(e.geometry))return 2;switch(e.geometry.type){case"polygon":case"point":case"polyline":break;case"multipoint":case"extent":case"mesh":default:return 3}return"on-the-ground"!==Object(n.e)(e)&&Object(n.g)(e)?4:0}},function(e,t,r){"use strict";r.d(t,"a",(function(){return o}));r(80);var i=r(89),n=r(826),a=r(340);function o(e){var t;if("graphics"!==(null==(t=e.layer)?void 0:t.type))return 1;var r=e.geometry;if(Object(i.j)(r))return 2;switch(r.type){case"polygon":if(r instanceof n.a)return 3;break;case"polyline":break;case"point":case"multipoint":case"extent":case"mesh":default:return 3}return"on-the-ground"!==Object(a.e)(e)&&Object(a.g)(e)?4:0}},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,r){},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,r){"use strict";r.r(t),r.d(t,"Sketch",(function(){return Xe}));var i=r(91),n=r(1),a=r(82),o=(r(80),r(81),r(85)),s=r(145),c=r(116),l=r(84),u=(r(83),r(86),r(87),r(165)),d=r(107),h=r(281),p=(r(171),r(114)),f=r(163),b=r(301),v=r(129),m=r(154),g=r(798),y=r(857),O=r(7),j=(r(88),r(97)),_=r(167);function w(){return x.apply(this,arguments)}function x(){return(x=Object(O.a)((function*(){return Promise.all([r.e(9),r.e(197)]).then(r.bind(null,788))}))).apply(this,arguments)}function S(){return M.apply(this,arguments)}function M(){return(M=Object(O.a)((function*(){return w().then((({contains:e,intersects:t,overlaps:r,simplify:i})=>({contains:e,intersects:t,overlaps:r,simplify:i})))}))).apply(this,arguments)}function T(e){return P.apply(this,arguments)}function P(){return(P=Object(O.a)((function*(e){var{selector:t,candidates:r,currentSelection:i,options:n,view:a}=e;if(!(r&&r.length&&i&&a))return{added:[],removed:[]};var{overlaps:o,intersects:s,contains:c}=n,{spatialReference:l}=a;if(!t)return{added:[],removed:i.removeAll()};var u=t,d=yield S(),h=[],p=[];return r.forEach((e=>{var t=e.geometry,r=o&&!!d.overlaps(l,u,t),n=s&&!!d.intersects(l,u,t),a=c&&!!d.contains(l,u,t),f=i.includes(e);r||n||a?!f&&h.push(e):f&&p.push(e)})),i.removeMany(p),i.addMany(h),{added:h,removed:p}}))).apply(this,arguments)}var E=r(131),C=r(220),A=r(211),I=r(291),k=(r(138),r(115)),F=r(514),R=class extends E.a.EventedAccessor{constructor(e){super(),this._activeOptions=null,this._dashedFillSymbol=new A.a({color:[0,0,0,0],outline:{style:"dash",color:[12,207,255],width:2}}),this._dashedLineSymbol=new C.a({style:"dash",color:[12,207,255],width:2}),this._defaultOptions={tool:"rectangle",createOptions:null,selectionOptions:{overlaps:!0,intersects:!0,contains:!1}},this._completed=!1,this._handles=new k.a,this._sketchViewModel=new y.a,this._sketchGraphicsLayer=new F.a({listMode:"hide",internal:!0}),this._transparentPointSymbol=new I.a({color:[0,0,0,0],outline:{style:"none",width:0}}),this.candidates=null,this.geometry=null,this.options=null,this.selection=new d.a,this.view=null,this.candidates=e.candidates,this.options=e.options,this.view=e.view;var{_dashedFillSymbol:t,_dashedLineSymbol:r,_sketchViewModel:i,_sketchGraphicsLayer:n,_transparentPointSymbol:a}=this;i.set({layer:n,view:this.view,activePointSymbol:a,activeLineSymbol:r,activeVertexSymbol:a,activeFillSymbol:t,pointSymbol:a,polygonSymbol:t,polylineSymbol:r,vertexSymbol:a}),this._handles.add([i.on("create",(e=>this._onSketchEvent(e))),i.on(["undo","redo"],(e=>this._onSketchEvent(e)))])}initialize(){this._load()}destroy(){this._handles.destroy(),this._handles=null}get state(){var{_completed:e,_sketchViewModel:{state:t}}=this;return e?"complete":"active"===t?"active":"disabled"}cancel(){this._sketchViewModel.cancel()}_load(){var e=this;return Object(O.a)((function*(){yield e.view.whenReady();var{options:t}=e,{tool:r,createOptions:n}=e._activeOptions=Object(i.a)(Object(i.a)({},e._defaultOptions),t);e._sketchViewModel.create(r,n)}))()}_onSketchEvent(e){var t="create"===e.type?e.graphic:e.graphics[0],r=(null==t?void 0:t.geometry)||null,i="create"===e.type&&"cancel"===e.state,n="create"===e.type&&"complete"===e.state;this._processSelectionGeometry(r,n,i)}_processSelectionGeometry(e,t,r){if(this._set("geometry",e),(t||r)&&(this._completed=!0),r)this._onComplete([],!0);else{var{_activeOptions:i,candidates:n,selection:a,view:o}=this;T({selector:e,candidates:n,currentSelection:a,options:i.selectionOptions,view:o}).then((({added:e,removed:r})=>{t?this._onComplete(this.selection.toArray(),!1):(e.length||r.length)&&this.emit("selection-change",{added:e,removed:r,type:"selection-change"})}))}}_onComplete(e,t){this._handles.removeAll(),this.notifyChange("state"),this.emit("complete",{aborted:t,selection:e,type:"complete"})}};Object(a.a)([Object(o.b)()],R.prototype,"_completed",void 0),Object(a.a)([Object(o.b)()],R.prototype,"candidates",void 0),Object(a.a)([Object(o.b)({readOnly:!0})],R.prototype,"geometry",void 0),Object(a.a)([Object(o.b)()],R.prototype,"options",void 0),Object(a.a)([Object(o.b)({readOnly:!0})],R.prototype,"selection",void 0),Object(a.a)([Object(o.b)({readOnly:!0})],R.prototype,"state",null),Object(a.a)([Object(o.b)({value:null})],R.prototype,"view",void 0);var D=R=Object(a.a)([Object(l.a)("esri.widgets.support.Selector")],R),L=class extends(Object(_.b)(j.a)){constructor(e){super(e),this._defaultSelectionOptions={intersects:!0,overlaps:!0,contains:!0},this.candidates=null,this.options=null,this.view=null}draw(e){var{_defaultSelectionOptions:t,candidates:r,options:n,view:a}=this,o=Object(i.a)(Object(i.a)(Object(i.a)({},t),n),null==e?void 0:e.selectionOptions);return new D({candidates:r,options:Object(i.a)(Object(i.a)({},e),{},{selectionOptions:o}),view:a})}selectionFrom(e,t){var r=this;return Object(O.a)((function*(){var{_defaultSelectionOptions:n,candidates:a,options:o,view:s}=r,c=new d.a,l=Object(i.a)(Object(i.a)(Object(i.a)({},n),o),t);return yield T({selector:e,candidates:a,currentSelection:c,options:l,view:s}),c.toArray()}))()}};Object(a.a)([Object(o.b)()],L.prototype,"candidates",void 0),Object(a.a)([Object(o.b)()],L.prototype,"options",void 0),Object(a.a)([Object(o.b)({value:null})],L.prototype,"view",void 0);var N=L=Object(a.a)([Object(l.a)("esri.widgets.support.Selector")],L),V="esri-sketch",z="esri-sketch--vertical",G="esri-sketch__panel",U="esri-sketch__info-panel",q="esri-sketch__section",H="esri-sketch__tool-section",B="esri-sketch__info-section",W="esri-sketch__info-count-section",J="esri-sketch__menu-container",Z="esri-sketch__menu-header",X="esri-sketch__menu-title",Y="esri-sketch__menu-content",Q="esri-sketch__menu-item",K="esri-sketch__menu-item-wrapper",$="esri-sketch__feature-count-badge",ee="esri-sketch__feature-count-number",te="esri-sketch__button",re="esri-sketch__button--selected",ie="esri-icon-map-pin",ne="esri-icon-polygon",ae="esri-icon-polyline",oe="esri-icon-radio-unchecked",se="esri-icon-checkbox-unchecked",ce="esri-icon-cursor",le="esri-icon-trash",ue="esri-icon-undo",de="esri-icon-redo",he="esri-icon-settings",pe="esri-sketch__action-toggle",fe="esri-sketch__action-toggle--on",be="esri-sketch__item-action-title",ve="esri-sketch__item-action-icon",me="esri-icon-cursor-marquee",ge="esri-icon-lasso",ye="esri-disabled",Oe="esri-widget",je="esri-icon-edit",_e={createTools:{point:!0,polyline:!0,polygon:!0,rectangle:!0,circle:!0},selectionTools:{"rectangle-selection":!0,"lasso-selection":!0},undoRedoMenu:!0,settingsMenu:!0},we=class extends m.a{constructor(e,t){super(e,t),this._activeCreateOptions=null,this._activeSelectionInfo=null,this._menuOpen=!1,this._selector=new N,this.availableCreateTools=["point","polyline","polygon","rectangle","circle"],this.createGraphic=null,this.creationMode="continuous",this.defaultCreateOptions=null,this.defaultUpdateOptions=null,this.iconClass=je,this.label=void 0,this.layer=null,this.messages=null,this.snappingOptions=new g.a,this.updateGraphics=new d.a,this.view=null,this.viewModel=new y.a,this.visibleElements=Object(i.a)({},_e),this._activateCreateTool=this._activateCreateTool.bind(this)}initialize(){var{view:e}=this;this._selector.view=e,this.own([this.viewModel.on("create",(()=>this.scheduleRender())),this.viewModel.on("update",(()=>this.scheduleRender())),this.viewModel.on("create",(e=>this._onCreateOperation(e))),this.viewModel.on("delete",(e=>this.emit("delete",e))),this.viewModel.on("undo",(()=>this.scheduleRender())),this.viewModel.on("redo",(()=>this.scheduleRender())),this.viewModel.watch("view",(e=>this._selector.set({view:e}))),this.viewModel.watch("state",(()=>this.notifyChange("state")))])}get activeTool(){var e;return(null==(e=this._activeSelectionInfo)?void 0:e.tool)||this.viewModel.activeTool}set layout(e){"vertical"!==e&&(e="horizontal"),this._set("layout",e)}get state(){return this._activeSelectionInfo?"active":this.viewModel.state}castVisibleElements(e){return Object(i.a)(Object(i.a)(Object(i.a)({},_e),e),{},{createTools:Object(i.a)(Object(i.a)({},_e.createTools),null==e?void 0:e.createTools),selectionTools:Object(i.a)(Object(i.a)({},_e.selectionTools),null==e?void 0:e.selectionTools)})}create(e,t){this._activeCreateOptions=t||null,this.viewModel.create(e,t)}update(e,t){return this.viewModel.update(e,t)}complete(){}cancel(){this._cancelSelectionOperation(),this.viewModel.cancel()}undo(){}redo(){}delete(){}render(){var{label:e,layout:t,viewModel:{state:r}}=this;return Object(v.a)("div",{"aria-label":e,class:this.classes(V,Oe,{[ye]:"disabled"===r,[z]:"vertical"===t})},Object(v.a)("div",{role:"toolbar",class:G},this.renderTopPanelContents()),Object(v.a)("div",{class:this.classes(G,U)},this.renderInfoPanelContents()))}renderTopPanelContents(){var e=this.classes(q,H),{availableCreateTools:t,visibleElements:r}=this;return[Object(v.a)("div",{role:"menu",key:"selection-button-container",class:e},this.renderSelectionTools()),t&&t.length?Object(v.a)("div",{role:"menu",class:e},this.renderDrawButtons()):null,r.undoRedoMenu?Object(v.a)("div",{role:"menu",key:"undo-redo-menu-button-container",class:e},this.renderUndoRedoMenuButtons()):null,r.settingsMenu?Object(v.a)("div",{key:"settings-menu-button-container",class:q},this.renderSettingsMenuButton()):null]}renderInfoPanelContents(){return this._menuOpen?this.renderSettingsMenu():this.updateGraphics.length?[Object(v.a)("div",{class:this.classes(q,B,W),key:"feature-count-container"},this.renderFeatureCount()),Object(v.a)("div",{class:this.classes(q,B),key:"delete-button-container"},this.renderDeleteButton())]:void 0}renderSettingsMenu(){var{settings:e}=this.messages;return[Object(v.a)("div",{role:"menu",class:J,key:"settings-menu-container"},Object(v.a)("header",{class:Z,key:"settings-menu-header"},Object(v.a)("span",{class:X},e)),Object(v.a)("div",{class:Y,key:"settings-menu-content","aria-label":e},Object(v.a)("div",{class:K},this.renderSnappingToggleMenuItem())))]}renderSnappingToggleMenuItem(){var e;return Object(v.a)("div",{class:Q,"aria-label":null==(e=this.messages)?void 0:e.snappingEnabled,key:"sketch-snapping-action-toggle",role:"menuitem"},this.renderSnappingToggle())}renderSnappingToggle(){var{messages:{snappingEnabled:e},viewModel:{snappingOptions:{enabled:t}}}=this,r=this.classes(pe,{[fe]:t});return Object(v.a)("div",{bind:this,role:"button",onclick:this._onSnappingToggleClick,onkeydown:this._onSnappingToggleKeyDown,class:r,tabindex:"0",title:e,"aria-label":e},this.renderActionIcon(),Object(v.a)("span",{class:be},e))}_onSnappingToggleKeyDown(e){var t=Object(u.a)(e);"Enter"!==t&&" "!==t||(e.preventDefault(),this._toggleSnapping())}_onSnappingToggleClick(e){e.stopPropagation(),this._toggleSnapping()}renderActionIcon(){return Object(v.a)("span",{key:"action-icon","aria-hidden":"true",class:this.classes(ve)})}renderFeatureCount(){var{layout:e,messages:t,updateGraphics:{length:r}}=this,i=Object(h.a)(1===r?t.featureCount:t.featuresCount,{count:r});return Object(v.a)("div",{class:$,"aria-label":i},Object(v.a)("span",{class:ee},"vertical"===e?r:i))}renderDeleteButton(){var e=this.messages.deleteFeature;return Object(v.a)("button",{"aria-label":e,bind:this,class:this.classes(te,le),onclick:this.delete,title:e,type:"button"})}renderSelectionTools(){return[this.renderDefaultSelectionButton(),this.renderRectangleSelectionButton(),this.renderLassoSelectionButton()]}renderDefaultSelectionButton(){if(this.viewModel.updateOnGraphicClick){var e=this.messages.selectFeature;return Object(v.a)("button",{"aria-label":e,bind:this,class:this.classes(te,ce,{[re]:"ready"===this.state}),onclick:this.cancel,role:"menuitemradio",title:e})}}renderRectangleSelectionButton(){var e,t;if("2d"===(null==(e=this.view)?void 0:e.type)&&this.visibleElements.selectionTools["rectangle-selection"]){var r=this.messages.selectRectangle;return Object(v.a)("button",{"aria-label":r,bind:this,class:this.classes(te,me,{[re]:"rectangle-selection"===(null==(t=this._activeSelectionInfo)?void 0:t.tool)}),onclick:this._activateRectangleSelectTool,role:"menuitemradio",title:r})}}renderLassoSelectionButton(){var e,t;if("2d"===(null==(e=this.view)?void 0:e.type)&&this.visibleElements.selectionTools["lasso-selection"]){var r=this.messages.selectLasso;return Object(v.a)("button",{"aria-label":r,bind:this,class:this.classes(te,ge,{[re]:"lasso-selection"===(null==(t=this._activeSelectionInfo)?void 0:t.tool)}),onclick:this._activateLassoSelectTool,role:"menuitemradio",title:r})}}renderDrawButtons(){var e=this.visibleElements.createTools;return this.availableCreateTools.map((t=>"point"===t&&e.point?this.renderPointButton():"polyline"===t&&e.polyline?this.renderPolylineButton():"polygon"===t&&e.polygon?this.renderPolygonButton():"rectangle"===t&&e.rectangle?this.renderRectangleButton():"circle"===t&&e.circle?this.renderCircleButton():void 0))}renderPointButton(){var e="point",t=this.messages.drawPoint,r=[te,ie];return this.activeTool===e&&r.push(re),Object(v.a)("button",{"aria-label":t,bind:this,class:this.classes(r),"data-tool-name":e,onclick:this._activateCreateTool,role:"menuitemradio",title:t,type:"button"})}renderPolygonButton(){var e="polygon",t=this.messages.drawPolygon,r=[te,ne];return this.activeTool===e&&r.push(re),Object(v.a)("button",{"aria-label":t,bind:this,class:this.classes(r),"data-tool-name":e,onclick:this._activateCreateTool,role:"menuitemradio",title:t,type:"button"})}renderPolylineButton(){var e="polyline",t=this.messages.drawPolyline,r=[te,ae];return this.activeTool===e&&r.push(re),Object(v.a)("button",{"aria-label":t,bind:this,class:this.classes(r),"data-tool-name":e,onclick:this._activateCreateTool,role:"menuitemradio",title:t,type:"button"})}renderCircleButton(){var e="circle",t=this.messages.drawCircle,r=[te,oe];return this.activeTool===e&&r.push(re),Object(v.a)("button",{"aria-label":t,bind:this,class:this.classes(r),"data-tool-name":e,onclick:this._activateCreateTool,role:"menuitemradio",title:t,type:"button"})}renderRectangleButton(){var e="rectangle",t=this.messages.drawRectangle,r=[te,se];return this.activeTool===e&&r.push(re),Object(v.a)("button",{"aria-label":t,bind:this,class:this.classes(r),"data-tool-name":e,onclick:this._activateCreateTool,role:"menuitemradio",title:t,type:"button"})}renderUndoRedoMenuButtons(){return[this.renderUndoButton(),this.renderRedoButton()]}renderUndoButton(){var e=this.messages.undo,t=!this.viewModel.canUndo(),r=Object(p.f)()?de:ue;return Object(v.a)("button",{"aria-label":e,bind:this,class:this.classes(te,r),disabled:t,onclick:this.undo,title:e,type:"button"})}renderRedoButton(){var e=this.messages.redo,t=!this.viewModel.canRedo(),r=Object(p.f)()?ue:de;return Object(v.a)("button",{"aria-label":e,bind:this,class:this.classes(te,r),disabled:t,onclick:this.redo,title:e,type:"button"})}renderSettingsMenuButton(){var e=this.messages.settings,t=[te,he];return this._menuOpen&&t.push(re),Object(v.a)("button",{"aria-label":e,bind:this,class:this.classes(t),onclick:this._toggleMenu,title:e,type:"button"})}_cancelSelectionOperation(){var e,t;null==(e=this._activeSelectionInfo)||null==(t=e.operation)||t.cancel(),this._activeSelectionInfo=null,this._selector.candidates=null}_activateCreateTool(e){var t=e.target.getAttribute("data-tool-name");this.activeTool!==t?(this._activeSelectionInfo&&this._cancelSelectionOperation(),this.create(t)):this.cancel()}_onCreateOperation(e){if("complete"===e.state){var{creationMode:t}=this,{type:r}=e;if("create"===r){var{tool:i,graphic:n}=e,a=this._activeCreateOptions;this._activeCreateOptions=null,"continuous"===t?this.create(i,a):"update"===t&&this.update([n])}}}_toggleMenu(){this._menuOpen=!this._menuOpen,this.scheduleRender()}_toggleSnapping(){var{viewModel:{snappingOptions:e}}=this;this.viewModel.snappingOptions.enabled=!e.enabled,this.scheduleRender()}_onSelectionOperationComplete(e){var{viewModel:{defaultUpdateOptions:t}}=this,{selection:r}=e;if(this._activeSelectionInfo=null,!e.aborted&&r.length){var n=t.tool,a=r.length>1&&"reshape"===n?"transform":n;this.update(r,Object(i.a)(Object(i.a)({},t),{},{tool:a}))}this.notifyChange("state")}_activateRectangleSelectTool(){if(this._activeSelectionInfo){var e=this._activeSelectionInfo.tool;if(this._cancelSelectionOperation(),"rectangle-selection"===e)return}else"active"===this.state&&this.cancel();this._selector.candidates=this._getSelectionCandidates();var t=this._selector.draw({tool:"rectangle"});t.once("complete",(e=>this._onSelectionOperationComplete(e))),this._activeSelectionInfo={tool:"rectangle-selection",operation:t}}_activateLassoSelectTool(){if(this._activeSelectionInfo){var e=this._activeSelectionInfo.tool;if(this._cancelSelectionOperation(),"lasso-selection"===e)return}else"active"===this.state&&this.cancel();this._selector.candidates=this._getSelectionCandidates();var t=this._selector.draw({tool:"polygon",createOptions:{mode:"freehand"}});t.once("complete",(e=>this._onSelectionOperationComplete(e))),this._activeSelectionInfo={tool:"lasso-selection",operation:t}}_getSelectionCandidates(){var e,t;return(null==(e=this.layer)||null==(t=e.graphics)?void 0:t.toArray())||[]}};Object(a.a)([Object(o.b)()],we.prototype,"_activeSelectionInfo",void 0),Object(a.a)([Object(o.b)()],we.prototype,"activeTool",null),Object(a.a)([Object(o.b)({cast:e=>{if(!e||!e.length)return null;var t=new Set(["point","polyline","polygon","rectangle","circle"]);return e.filter((e=>t.has(e)))}})],we.prototype,"availableCreateTools",void 0),Object(a.a)([Object(s.a)("viewModel.createGraphic")],we.prototype,"createGraphic",void 0),Object(a.a)([Object(o.b)()],we.prototype,"creationMode",void 0),Object(a.a)([Object(s.a)("viewModel.defaultCreateOptions")],we.prototype,"defaultCreateOptions",void 0),Object(a.a)([Object(s.a)("viewModel.defaultUpdateOptions")],we.prototype,"defaultUpdateOptions",void 0),Object(a.a)([Object(o.b)()],we.prototype,"iconClass",void 0),Object(a.a)([Object(o.b)({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],we.prototype,"label",void 0),Object(a.a)([Object(s.a)("viewModel.layer")],we.prototype,"layer",void 0),Object(a.a)([Object(o.b)({value:"horizontal"})],we.prototype,"layout",null),Object(a.a)([Object(o.b)(),Object(f.a)("esri/widgets/Sketch/t9n/Sketch")],we.prototype,"messages",void 0),Object(a.a)([Object(s.a)("viewModel.snappingOptions")],we.prototype,"snappingOptions",void 0),Object(a.a)([Object(o.b)()],we.prototype,"state",null),Object(a.a)([Object(s.a)("viewModel.updateGraphics")],we.prototype,"updateGraphics",void 0),Object(a.a)([Object(s.a)("viewModel.view")],we.prototype,"view",void 0),Object(a.a)([Object(o.b)(),Object(b.a)(["create","update","undo","redo"])],we.prototype,"viewModel",void 0),Object(a.a)([Object(o.b)()],we.prototype,"visibleElements",void 0),Object(a.a)([Object(c.a)("visibleElements")],we.prototype,"castVisibleElements",null),Object(a.a)([Object(s.a)("viewModel.complete")],we.prototype,"complete",null),Object(a.a)([Object(s.a)("viewModel.undo")],we.prototype,"undo",null),Object(a.a)([Object(s.a)("viewModel.redo")],we.prototype,"redo",null),Object(a.a)([Object(s.a)("viewModel.delete")],we.prototype,"delete",null);we=Object(a.a)([Object(l.a)("esri.widgets.Sketch")],we);var xe,Se,Me,Te,Pe=r(109),Ee=r(271),Ce=new(r(195).a)({labelExpressionInfo:{expression:"$feature.label"},symbol:{type:"text",color:"black",haloSize:1,haloColor:"white"}}),Ae=(new Ee.default({source:[],fields:[{type:"oid",name:"OBJECTID"},{type:"string",name:"label"}],objectIdField:"OBJECTID",geometryType:"point",listMode:"hide",legendEnabled:!1,id:"sketch-points",renderer:{type:"simple",symbol:{type:"simple-marker",color:[255,255,255,1]}},labelingInfo:[Ce]}),new Ee.default({source:[],fields:[{type:"oid",name:"OBJECTID"},{type:"string",name:"label"}],objectIdField:"OBJECTID",geometryType:"polyline",legendEnabled:!1,listMode:"hide",id:"sketch-lines",labelingInfo:[Ce]}),new Ee.default({source:[],fields:[{type:"oid",name:"OBJECTID"},{type:"string",name:"label"}],objectIdField:"OBJECTID",geometryType:"polygon",listMode:"hide",legendEnabled:!1,id:"sketch-polygons",renderer:{type:"simple",symbol:{type:"simple-fill",color:[255,255,255,.5],outline:{type:"simple-line",color:[255,255,255,1]}}},labelingInfo:[Ce]}),new F.a({listMode:"hide",opacity:0}),r(0)),Ie=e=>{var[t,r]=Object(n.useState)(null),a=Object(n.useRef)(null),o=Object(n.useRef)({pointSize:10,pointFillEnabled:!0,pointFillColor:"#FF0000",pointOutlineColor:"#000000",pointFillOpacity:.5,pointOutlineOpacity:1,pointOutlineWidth:1,lineOutlineOpacity:1,lineWidth:2,lineColor:"#FF0000",polygonFillEnabled:!0,polygonFillOpacity:.5,polygonOutlineOpacity:1,polygonOutlineWidth:2,polygonOutlineColor:"#000000",polygonFillColor:"#FF0000",fontSize:12,fontFamily:"Arial",fontWeight:"normal",fontStyle:"normal",fontColor:"#000000",haloColor:"#FFFFFF"}),s=t=>{var r=t.target.getAttribute("name");r&&(o.current=Object(i.a)(Object(i.a)({},o.current),{[r]:parseFloat(t.target.value)}),requestAnimationFrame((()=>{e.settingsChanged(o.current)})))},c=t=>{var r=t.target.getAttribute("name");r&&(o.current=Object(i.a)(Object(i.a)({},o.current),{[r]:t.target.value}),requestAnimationFrame((()=>{e.settingsChanged(o.current)})))},l=t=>{var r=t.target.getAttribute("name");r&&(o.current=Object(i.a)(Object(i.a)({},o.current),{[r]:t.detail.switched}),requestAnimationFrame((()=>{e.settingsChanged(o.current)})))};return Object(n.useEffect)((()=>(r(e.geometryType),requestAnimationFrame((()=>{var e,t,r;null===(e=a.current)||void 0===e||e.querySelectorAll("calcite-slider").forEach((e=>{e.addEventListener("calciteSliderChange",s)})),null===(t=a.current)||void 0===t||t.querySelectorAll("calcite-color-picker").forEach((e=>{e.addEventListener("calciteColorPickerChange",c)})),null===(r=a.current)||void 0===r||r.querySelectorAll("calcite-switch").forEach((e=>{e.addEventListener("calciteSwitchChange",l)}))})),()=>{var e,t,r;null===(e=a.current)||void 0===e||e.querySelectorAll("calcite-slider").forEach((e=>{e.removeEventListener("calciteSliderChange",s)})),null===(t=a.current)||void 0===t||t.querySelectorAll("calcite-slider").forEach((e=>{e.removeEventListener("calciteColorPickerChange",c)})),null===(r=a.current)||void 0===r||r.querySelectorAll("calcite-switch").forEach((e=>{e.addEventListener("calciteSwitchChange",l)}))})),[e.geometryType]),Object(Ae.jsxs)("div",{ref:a,className:"panel",children:["point"===t?Object(Ae.jsxs)("div",{children:[Object(Ae.jsx)("calcite-block",{heading:"Symbol",open:!0,collapsible:!0,children:Object(Ae.jsx)("calcite-block-section",{text:"Size",children:Object(Ae.jsx)("calcite-slider",{min:"0",max:"30",value:o.current.pointSize,step:"0.1",label:"Size","label-handles":"",ticks:"0","page-step":"5",name:"pointSize",snap:""})})},"point-symbol"),Object(Ae.jsxs)("calcite-block",{heading:"Fill",open:!0,collapsible:!0,children:[Object(Ae.jsx)("calcite-label",{layout:"inline-space-between",class:"sc-calcite-label-h sc-calcite-label-s",dir:"ltr",alignment:"start",status:"idle",scale:"m","calcite-hydrated":"",children:Object(Ae.jsxs)("label",{className:"sc-calcite-label-h sc-calcite-label-s sc-calcite-label",children:["Enable fill",Object(Ae.jsx)("calcite-switch",{name:"pointFillEnabled",value:"enabled",switched:o.current.pointFillEnabled,bind:void 0,"aria-checked":"true",dir:"ltr",tabindex:"0",scale:"m","calcite-hydrated":""})]})}),o.current.pointFillEnabled?Object(Ae.jsxs)("div",{children:[Object(Ae.jsx)("calcite-block-section",{text:"Color",children:Object(Ae.jsx)("calcite-color-picker",{dir:"ltr","hide-channels":"","hide-saved":"",scale:"m",value:o.current.pointFillColor,appearance:"default",name:"pointFillColor","calcite-hydrated":"",id:"pointFill"})},"point-fill-color"),Object(Ae.jsx)("calcite-block-section",{text:"Fill transparency",children:Object(Ae.jsx)("calcite-slider",{min:"0",max:"1",value:o.current.pointFillOpacity,bind:void 0,step:"0.1",label:"Opacity","label-handles":"",ticks:"0","page-step":"5",name:"fill-opacity",id:"pointFillOpacity",snap:""})},"point-fill-transparency")," "]}):""]},"point-fill"),Object(Ae.jsxs)("calcite-block",{heading:"Outline",open:!0,collapsible:!0,children:[Object(Ae.jsx)("calcite-block-section",{text:"Color",children:Object(Ae.jsx)("calcite-color-picker",{dir:"ltr","hide-channels":"","hide-saved":"",scale:"m",value:o.current.pointOutlineColor,appearance:"default",name:"pointOutlineColor","calcite-hydrated":""})}),Object(Ae.jsx)("calcite-block-section",{text:"Outline transparency",children:Object(Ae.jsx)("calcite-slider",{min:"0",max:"1",value:o.current.pointOutlineOpacity,bind:void 0,step:"0.1",label:"Opacity","label-handles":"",ticks:"0","page-step":"5",name:"pointOutlineOpacity",snap:""})}),Object(Ae.jsx)("calcite-block-section",{text:"Stroke",children:Object(Ae.jsx)("calcite-slider",{min:"0",max:"10",value:o.current.pointOutlineWidth,step:"0.1",label:"Width","label-handles":"",ticks:"0","page-step":"5",name:"pointOutlineWidth",snap:""})})]},"outline")]}):"","polyline"===t?Object(Ae.jsx)("div",{children:Object(Ae.jsxs)("calcite-block",{heading:"Line",open:!0,collapsible:!0,children:[Object(Ae.jsx)("calcite-block-section",{text:"Color",children:Object(Ae.jsx)("calcite-color-picker",{dir:"ltr","hide-channels":"","hide-saved":"",scale:"m",value:o.current.lineColor,appearance:"default",name:"lineColor","calcite-hydrated":""})}),Object(Ae.jsx)("calcite-block-section",{text:"Line transparency",children:Object(Ae.jsx)("calcite-slider",{min:"0",max:"1",value:o.current.lineOutlineOpacity,bind:void 0,step:"0.1",label:"Opacity","label-handles":"",ticks:"0","page-step":"5",name:"lineOutlineOpacity",snap:""})}),Object(Ae.jsx)("calcite-block-section",{text:"Stroke",children:Object(Ae.jsx)("calcite-slider",{min:"0",max:"10",value:o.current.lineWidth,bind:void 0,step:"0.1",label:"Width","label-handles":"",ticks:"0","page-step":"5",name:"lineWidth",snap:""})})]},"line")}):"","polygon"===t?Object(Ae.jsxs)("div",{children:[Object(Ae.jsxs)("calcite-block",{heading:"Fill",open:!0,collapsible:!0,children:[Object(Ae.jsx)("calcite-label",{layout:"inline-space-between",class:"sc-calcite-label-h sc-calcite-label-s",dir:"ltr",alignment:"start",status:"idle",scale:"m","calcite-hydrated":"",children:Object(Ae.jsxs)("label",{className:"sc-calcite-label-h sc-calcite-label-s sc-calcite-label",children:["Enable fill",Object(Ae.jsx)("calcite-switch",{name:"polygonFillEnabled",value:"enabled",switched:o.current.polygonFillEnabled,bind:void 0,"aria-checked":"true",dir:"ltr",tabindex:"0",scale:"m","calcite-hydrated":""})]})}),o.current.polygonFillEnabled?Object(Ae.jsxs)("div",{children:[Object(Ae.jsx)("calcite-block-section",{text:"Color",children:Object(Ae.jsx)("calcite-color-picker",{dir:"ltr","hide-channels":"","hide-saved":"",scale:"m",value:o.current.polygonFillColor,appearance:"default",name:"polygonFillColor","calcite-hydrated":""})},"polygon-fill-color"),Object(Ae.jsx)("calcite-block-section",{text:"Fill transparency",children:Object(Ae.jsx)("calcite-slider",{min:"0",max:"1",value:o.current.polygonFillOpacity,bind:void 0,step:"0.1",label:"Opacity","label-handles":"",ticks:"0","page-step":"5",name:"polygonFillOpacity",snap:""})},"polygon-fill-transparency")]}):""]},"polygon-fill"),Object(Ae.jsxs)("calcite-block",{heading:"Outline",open:!0,collapsible:!0,children:[Object(Ae.jsx)("calcite-block-section",{text:"Color",children:Object(Ae.jsx)("calcite-color-picker",{dir:"ltr","hide-channels":"","hide-saved":"",scale:"m",value:o.current.polygonOutlineColor,appearance:"default",name:"polygonOutlineColor","calcite-hydrated":""})}),Object(Ae.jsx)("calcite-block-section",{text:"Outline transparency",children:Object(Ae.jsx)("calcite-slider",{min:"0",max:"1",value:o.current.polygonOutlineOpacity,bind:void 0,step:"0.1",label:"Opacity","label-handles":"",ticks:"0","page-step":"5",name:"polygonOutlineOpacity",snap:""})}),Object(Ae.jsx)("calcite-block-section",{text:"Stroke",children:Object(Ae.jsx)("calcite-slider",{min:"0",max:"10",value:o.current.polygonOutlineWidth,bind:void 0,step:"0.1",label:"Width","label-handles":"",ticks:"0","page-step":"5",name:"polygonOutlineWidth",snap:""})})]},"outline")]}):"","text"===t?Object(Ae.jsx)("div",{children:Object(Ae.jsxs)("calcite-block",{heading:"Symbol",open:!0,collapsible:!0,children:[Object(Ae.jsx)("calcite-block-section",{text:"Font Size",open:!0,children:Object(Ae.jsx)("calcite-slider",{min:"6",max:"30",value:o.current.fontSize,step:"1",label:"Size","label-handles":"",ticks:"0","page-step":"5",name:"fontSize",snap:""})}),Object(Ae.jsx)("calcite-block-section",{text:"Font Color",open:!0,children:Object(Ae.jsxs)("calcite-label",{children:["Font Color",Object(Ae.jsx)("calcite-color-picker",{dir:"ltr","hide-channels":"","hide-saved":"",scale:"m",value:o.current.fontColor,appearance:"default",name:"fontColor","calcite-hydrated":"",id:"fontColor"})]})},"font-color")]},"text-symbol")}):""]})},ke=(r(1109),r(123)),Fe=r(751),Re=r(345),De=0,Le=new I.a({size:10,color:new Pe.a([255,0,0,1]),style:"circle",outline:new C.a({color:new Pe.a([0,0,0,1]),width:1})}),Ne=new C.a({color:new Pe.a([255,0,0,1]),width:2}),Ve=new A.a({color:new Pe.a([255,0,0,.5]),style:"solid",outline:new C.a({color:new Pe.a([255,0,0,1]),width:2})}),ze=new Re.a({text:"",color:[0,0,0],haloColor:[255,255,255],haloSize:2,font:{family:"Arial Unicode MS",size:14}}),Ge=new Fe.default({listMode:"hide"}),Ue=Ge.pointLayer,qe=Ge.polylineLayer,He=Ge.polygonLayer,Be=Ge.textLayer,We=(e,t)=>{"point"===t&&(e=>{Le.color=Pe.a.fromHex(e.pointFillColor),e.pointFillEnabled?Le.color.a=e.pointFillOpacity:Le.color.a=0,Le.outline.color=Pe.a.fromHex(e.pointOutlineColor),Le.outline.color.a=e.pointOutlineOpacity,Le.outline.width=e.pointOutlineWidth,Le.size=e.pointSize})(e),"polygon"===t&&(e=>{e.polygonFillEnabled?Ve.style="solid":Ve.style="none",Ve.color=Pe.a.fromHex(e.polygonFillColor),Ve.color.a=e.polygonFillOpacity,Ve.outline.color=Pe.a.fromHex(e.polygonOutlineColor),Ve.outline.color.a=e.polygonOutlineOpacity,Ve.outline.width=e.polygonOutlineWidth})(e),"polyline"===t&&(e=>{Ne.color=Pe.a.fromHex(e.lineColor),Ne.color.a=e.lineOutlineOpacity,Ne.width=e.lineWidth})(e),"text"===t&&(e=>{ze.color=Pe.a.fromHex(e.fontColor),ze.haloColor=Pe.a.fromHex(e.haloColor),ze.font.size=e.fontSize})(e)},Je=e=>{if("complete"===e.state)switch(e.tool){case"point":De++;var t=document.querySelector(".sketchTools calcite-action[active]");if("Point"==(null===t||void 0===t?void 0:t.getAttribute("text"))){Ue.remove(e.graphic);var r=new ke.a({geometry:e.graphic.geometry,symbol:Le.clone(),attributes:{title:"point map note #"+De}});Ue.add(r)}else{if("Text"!=(null===t||void 0===t?void 0:t.getAttribute("text"))){console.log("point logic error occurred");break}De++,Be.remove(e.graphic);var i=new ke.a({geometry:e.graphic.geometry,symbol:ze.clone(),attributes:{title:"text map note #"+De}});Be.add(i)}break;case"polyline":De++,qe.remove(e.graphic);var n=new ke.a({geometry:e.graphic.geometry,symbol:Ne.clone(),attributes:{title:"polyline map note #"+De}});qe.add(n);break;case"polygon":De++,He.remove(e.graphic);var a=new ke.a({geometry:e.graphic.geometry,symbol:Ve.clone(),attributes:{title:"polygon map note #"+De}});He.add(a);break;default:console.log("geometry type not found: ",e)}},Ze=(e,t)=>{var r=new y.a({view:t,layer:e,updateOnGraphicClick:!0,defaultCreateOptions:{mode:"hybrid"}});return r.on("create",Je),r},Xe=e=>{var t=Object(n.useRef)(null),r=Object(n.useRef)(null),a=Object(n.useRef)(null),o=Object(n.useRef)(null),s=Object(n.useRef)(null),c=Object(n.useRef)(null),l=Object(n.useRef)(),[u,d]=Object(n.useState)([]),h=Object(n.useRef)([]),p=Object(n.useRef)([]),[f,b]=Object(n.useState)(null),v=e=>{if("cancel"===e.state&&g(""),"complete"===e.state){var t=[a,o,s,c].find((e=>{var t;return null===(t=e.current)||void 0===t?void 0:t.active}));(null===t||void 0===t?void 0:t.current)===a.current&&g("point"),(null===t||void 0===t?void 0:t.current)===o.current&&g("polyline"),(null===t||void 0===t?void 0:t.current)===s.current&&g("polygon"),(null===t||void 0===t?void 0:t.current)===c.current&&g("text")}},m=(t,r)=>{[Te,xe,Se,Me].forEach((e=>{e.cancel()})),r.create(t),e.toolActivated(r)},g=e=>{"point"===e&&(m(e,xe),[s,o,c],a.current&&(a.current.active=!0)),"polyline"===e&&(m(e,Se),[a,s,c],o.current&&(o.current.active=!0)),"polygon"===e&&(m(e,Me),[a,o,c],s.current&&(s.current.active=!0)),"text"===e&&(m("point",Te),[a,o,s],c.current&&(c.current.active=!0)),""===e&&[a,o,s,c].forEach((e=>{e.current&&(e.current.active=!1)})),b(e)},y=(e,t)=>{e.cancel(),b(null),t.active=!1,t.blur(),xe.view.popup.autoOpenEnabled=!0};return Object(n.useEffect)((()=>{var t;return(t=e.view).map.add(Ge),xe=Ze(Ue,t),Se=Ze(qe,t),Me=Ze(He,t),Te=Ze(Be,t),l.current=Object(i.a)({},{pointSize:10,pointFillEnabled:!0,pointFillColor:"#FF0000",pointOutlineColor:"#000000",pointFillOpacity:.5,pointOutlineOpacity:1,pointOutlineWidth:1,lineOutlineOpacity:1,lineWidth:2,lineColor:"#FF0000",polygonFillEnabled:!0,polygonFillOpacity:.5,polygonOutlineOpacity:1,polygonOutlineWidth:2,polygonOutlineColor:"#000000",polygonFillColor:"#FF0000",fontSize:12,fontFamily:"Arial",fontWeight:"normal",fontStyle:"normal",fontColor:"#000000",haloColor:"#FFFFFF"}),[xe,Se,Me,Te].forEach((e=>{p.current.push(null===e||void 0===e?void 0:e.on("create",v)),p.current.push(null===e||void 0===e?void 0:e.on("create",v)),p.current.push(null===e||void 0===e?void 0:e.watch("activeTool",(e=>{}))),p.current.push(null===e||void 0===e?void 0:e.on("update",(e=>{console.log(e.state,h.current.length),("start"===e.state&&0===h.current.length||"active"===e.state)&&(console.log(e.graphics.length),d([...e.graphics]),h.current=[...e.graphics]),"complete"===e.state&&e.graphics.forEach((e=>{var t=h.current.indexOf(e);d([...u,...u.slice(t)]),h.current=[...u,...u.slice(t)]}))})))})),()=>{p.current.forEach((e=>{e.remove()}))}}),[]),Object(Ae.jsxs)("div",{className:"panel",ref:t,children:[Object(Ae.jsxs)("calcite-tooltip-manager",{children:[Object(Ae.jsx)("calcite-tooltip",{label:"Tooltip label","reference-element":"pointAction",placement:"bottom",children:"Select graphics"}),Object(Ae.jsx)("calcite-tooltip",{label:"Tooltip label","reference-element":"pointAction",placement:"bottom",children:"Sketch a point"}),Object(Ae.jsx)("calcite-tooltip",{label:"Tooltip label","reference-element":"lineAction",placement:"bottom",children:"Sketch a line"}),Object(Ae.jsx)("calcite-tooltip",{label:"Tooltip label","reference-element":"polygonAction",placement:"bottom",children:"Sketch a polygon"}),Object(Ae.jsx)("calcite-tooltip",{label:"Tooltip label","reference-element":"textAction",placement:"bottom",children:"Add text label"}),Object(Ae.jsx)("calcite-tooltip",{label:"Tooltip label","reference-element":"clearAction",placement:"bottom",children:"Clear all sketch graphics"}),Object(Ae.jsxs)("div",{className:"sketchTools",children:[Object(Ae.jsx)("calcite-action",{text:"Select",icon:"cursor",id:"selectAction",onClick:()=>{b(null),[a,o,s,c].forEach((e=>{b(null),e.current&&(e.current.active=!1)})),null===xe||void 0===xe||xe.cancel(),null===Se||void 0===Se||Se.cancel(),null===Me||void 0===Me||Me.cancel(),null===Te||void 0===Te||Te.cancel(),xe.view.popup.autoOpenEnabled=!0}}),Object(Ae.jsx)("calcite-action",{ref:a,text:"Point",icon:"pins",id:"pointAction",onClick:e=>{e.target.active?y(xe,e.target):g("point")}}),Object(Ae.jsx)("calcite-action",{ref:o,text:"Line",icon:"line",id:"lineAction",onClick:e=>{e.target.active?y(Se,e.target):g("polyline")}}),Object(Ae.jsx)("calcite-action",{ref:s,text:"Polygon",icon:"freehand-area",id:"polygonAction",onClick:e=>{e.target.active?y(Me,e.target):g("polygon")}}),Object(Ae.jsx)("calcite-action",{ref:c,text:"Text",icon:"speech-bubble",id:"textAction",onClick:e=>{e.target.active?y(Me,e.target):g("text")}}),Object(Ae.jsx)("calcite-action",{text:"Clear",icon:"trash",id:"clearAction",onClick:()=>{b(null),[a,o,s,c].forEach((e=>{e.current&&(e.current.active=!1)})),null===xe||void 0===xe||xe.layer.graphics.removeAll(),null===Se||void 0===Se||Se.layer.graphics.removeAll(),null===Me||void 0===Me||Me.layer.graphics.removeAll(),null===Te||void 0===Te||Te.layer.graphics.removeAll()}}),Object(Ae.jsx)("calcite-action",{text:"Undo",icon:"undo",id:"undoAction",onClick:()=>{var e,t,r,i;(null===(e=a.current)||void 0===e?void 0:e.active)&&xe.undo(),(null===(t=o.current)||void 0===t?void 0:t.active)&&Se.undo(),(null===(r=s.current)||void 0===r?void 0:r.active)&&Me.undo(),(null===(i=c.current)||void 0===i?void 0:i.active)&&Te.undo()}})]})]}),(null===u||void 0===u?void 0:u.length)>0&&Object(Ae.jsx)("calcite-action",{icon:"trash","text-enabled":!0,text:"Delete ".concat(u.length," selected graphic").concat(u.length>1?"s":""," "),onClick:()=>{[xe,Se,Me,Te].forEach((e=>{null===e||void 0===e||e.delete(),d([])}))}}),"text"===f&&Object(Ae.jsxs)("calcite-label",{children:["Text Label",Object(Ae.jsx)("calcite-input",{ref:r,id:"labelInput",placeholder:"Label",type:"textarea",value:ze.text,onInput:e=>{ze.text=e.target.value}})]}),Object(Ae.jsx)(Ie,{settingsChanged:e=>{f&&(We(e,f),e.current=Object(i.a)({},e))},geometryType:f})]})};t.default=Xe}])]);
//# sourceMappingURL=56.eba39e75.chunk.js.map