(this.webpackJsonpimaps=this.webpackJsonpimaps||[]).push([[165],{341:function(e,t,r){"use strict";r.d(t,"a",(function(){return c})),r.d(t,"b",(function(){return i}));var n=r(93),a=r(678),o=r(546),s=r(138),l=r(815);function i(e,t,r,s){var i=function(e,t,r){if(!e)return null;if(r&&"web-scene"===r.origin&&!(e instanceof a.a)&&!(e instanceof o.a)){var s="cim"!==e.type?Object(l.a)(e):{symbol:null,error:new n.a("symbol-conversion:unsupported-cim-symbol","CIM symbol is unsupported in web scenes",{symbol:e})};return s.symbol?s.symbol.write(t,r):(r.messages&&r.messages.push(new n.a("symbol:unsupported","Symbols of type '".concat(e.declaredClass,"' are not supported in scenes. Use 3D symbology instead when working with WebScene and SceneView"),{symbol:e,context:r,error:s.error})),null)}return r&&"web-map"===r.origin&&"web-style"===e.type?(r.messages&&r.messages.push(new n.a("symbol:unsupported","Symbols of type '".concat(e.declaredClass,"' are not supported in webmaps. Use CIMSymbol instead when working with WebMap in MapView."),{symbol:e,context:r})),null):e.write(t,r)}(e,{},s);i&&(t[r]=i)}function c(e,t){return Object(s.d)(e,null,t)}},801:function(e,t,r){"use strict";r.r(t),r.d(t,"fetchStyle",(function(){return v})),r.d(t,"fetchSymbolFromStyle",(function(){return j})),r.d(t,"resolveWebStyleSymbol",(function(){return g})),r.d(t,"styleNameFromItem",(function(){return O}));var n=r(91),a=r(93),o=r(83),s=r(258),l=r(106),i=r(456),c=r(252),m=r(947),u=r(889),y=r(138),f=r(341),b=r(894),p=r(80);function d(e){return!!Object(p.a)("enable-feature:".concat(e))}var w={};function h(e,t,r){var n,o=t.portal||c.a.getDefault(),s="".concat(o.url," - ").concat(o.user&&o.user.username," - ").concat(e);return w[s]||(w[s]=function(e,t,r){return t.load(r).then((()=>{var n=new i.a({disableExtraQuery:!0,query:"owner:".concat(U," AND type:").concat(C,' AND typekeywords:"').concat(e,'"')});return t.queryItems(n,r)})).then((({results:t})=>{var n=null,o=e.toLowerCase();if(t&&Array.isArray(t))for(var s of t)if(s.typeKeywords.some((e=>e.toLowerCase()===o))&&s.type===C&&s.owner===U){n=s;break}if(!n)throw new a.a("symbolstyleutils:style-not-found","The style '".concat(e,"' could not be found"),{styleName:e});return n.load(r)}))}(e,o,r).then((e=>(n=e,e.fetchData()))).then((t=>({data:t,baseUrl:n.itemUrl,styleName:e})))),w[s]}function v(e,t,r){return e.styleUrl?function(e,t){return N(e,t).then((t=>({data:t.data,baseUrl:Object(o.F)(e),styleUrl:e})))}(e.styleUrl,r):e.styleName?h(e.styleName,t,r):Promise.reject(new a.a("symbolstyleutils:style-url-and-name-missing","Either styleUrl or styleName is required to resolve a style"))}function g(e,t,r,n){return e.name?e.styleName&&"Esri2DPointSymbolsStyle"===e.styleName?function(e,t,r){var n=D.replace(/\{SymbolName\}/gi,e.name);return N(n,r).then((e=>{var r=S(e.data);return Object(f.a)(r,{portal:t.portal,url:Object(o.J)(Object(o.F)(n)),origin:"portal-item"})}))}(e,t,n):v(e,t,n).then((a=>j(a,e.name,t,r,n))):Promise.reject(new a.a("symbolstyleutils:style-symbol-reference-name-missing","Missing name in style symbol reference"))}function j(e,t,r,n,l){var i=e.data,c={portal:r.portal,url:Object(o.J)(e.baseUrl),origin:"portal-item"},p=i.items.find((e=>e.name===t));if(!p){var w="The symbol name '".concat(t,"' could not be found");return Promise.reject(new a.a("symbolstyleutils:symbol-name-not-found",w,{symbolName:t}))}var h=Object(s.a)(function(e,t){if("cimRef"===t)return e.cimRef;if(e.formatInfos&&!d("force-wosr"))for(var r of e.formatInfos)if("gltf"===r.type)return r.href;return e.webRef}(p,n),c),v=p.thumbnail&&p.thumbnail.href,g=p.thumbnail&&p.thumbnail.imageData;Object(b.b)()&&(h=Object(b.a)(h),v=Object(b.a)(v));var j={portal:r.portal,url:Object(o.J)(Object(o.F)(h)),origin:"portal-item"};return N(h,l).then((a=>{var o="cimRef"===n?S(a.data):a.data,l=Object(f.a)(o,j);if(l&&Object(y.c)(l)){if(v){var i=Object(s.a)(v,c);l.thumbnail=new u.a({url:i})}else g&&(l.thumbnail=new u.a({url:"data:image/png;base64,".concat(g)}));e.styleUrl?l.styleOrigin=new m.a({portal:r.portal,styleUrl:e.styleUrl,name:t}):e.styleName&&(l.styleOrigin=new m.a({portal:r.portal,styleName:e.styleName,name:t}))}return l}))}function S(e){return null===e||"CIMSymbolReference"===e.type?e:{type:"CIMSymbolReference",symbol:e}}function O(e){for(var t of e.typeKeywords)if(/^Esri.*Style$/.test(t)&&"Esri Style"!==t)return t}function N(e,t){var r=Object(n.a)({responseType:"json",query:{f:"json"}},t);return Object(l.default)(Object(o.C)(e),r)}var U="esri_en",C="Style",D="https://cdn.arcgis.com/sharing/rest/content/items/220936cc6ed342c9937abd8f180e7d1e/resources/styles/cim/{SymbolName}.json?f=json"},815:function(e,t,r){"use strict";r.d(t,"a",(function(){return p}));var n=r(93),a=r(220),o=r(810),s=r(811),l=r(576),i=r(772),c=r(773),m=r(211),u=r(291),y=r(345),f=r(546),b=r(138);function p(e,t=!1,r=!1,p=!0){if(!e)return{symbol:null};var d;if(Object(b.c)(e)||e instanceof f.a)d=e.clone();else if("cim"===e.type)d=i.a.fromCIMSymbol(e);else if(e instanceof a.a)d=s.a.fromSimpleLineSymbol(e);else if(e instanceof u.a)d=i.a.fromSimpleMarkerSymbol(e);else if(e instanceof l.a)d=i.a.fromPictureMarkerSymbol(e);else if(e instanceof m.a)d=c.a.fromSimpleFillSymbol(e);else{if(!(e instanceof y.a))return{error:new n.a("symbol-conversion:unsupported-2d-symbol","2D symbol of type '".concat(e.type||e.declaredClass,"' is unsupported in 3D"),{symbol:e})};d=p?o.a.fromTextSymbol(e):i.a.fromTextSymbol(e)}if(t&&(d.id=e.id),r&&Object(b.c)(d))for(var w=0;w<d.symbolLayers.length;++w)d.symbolLayers.getItemAt(w)._ignoreDrivers=!0;return{symbol:d}}},894:function(e,t,r){"use strict";r.d(t,"a",(function(){return o})),r.d(t,"b",(function(){return a}));var n=r(158);function a(e){return e=e||n.a.location.hostname,m.some((t=>{var r;return null!=(null==(r=e)?void 0:r.match(t))}))}function o(e,t){return e&&(t=t||n.a.location.hostname)?null!=t.match(s)||null!=t.match(i)?e.replace("static.arcgis.com","staticdev.arcgis.com"):null!=t.match(l)||null!=t.match(c)?e.replace("static.arcgis.com","staticqa.arcgis.com"):e:e}var s=/^devext.arcgis.com$/,l=/^qaext.arcgis.com$/,i=/^[\w-]*\.mapsdevext.arcgis.com$/,c=/^[\w-]*\.mapsqa.arcgis.com$/,m=[/^([\w-]*\.)?[\w-]*\.zrh-dev-local.esri.com$/,s,l,/^jsapps.esri.com$/,i,c]}}]);
//# sourceMappingURL=165.bdb1fb45.chunk.js.map