"use strict";(globalThis.webpackChunkimaps=globalThis.webpackChunkimaps||[]).push([[1152],{27135:(e,t,s)=>{s.d(t,{J:()=>o});var r=s(43404),i=s(49861);function o(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const s=e instanceof r.X?e:new r.X(e,t),o={type:t?.ignoreUnknown??1?s.apiValues:String,json:{type:s.jsonValues,read:!t?.readOnly&&{reader:s.read},write:{writer:s.write}}};return void 0!==t?.readOnly&&(o.readOnly=!!t.readOnly),void 0!==t?.default&&(o.json.default=t.default),void 0!==t?.name&&(o.json.name=t.name),(0,i.Cb)(o)}},82582:(e,t,s)=>{s.d(t,{D9:()=>n,dp:()=>o,yZ:()=>i});var r=s(68860);function i(e,t){const s=t||e.extent,i=e.width,o=(0,r.c9)(s&&s.spatialReference);return s&&i?s.width/i*o*r.hd*96:0}function o(e,t){return e/((0,r.c9)(t)*r.hd*96)}function n(e,t){const s=e.extent,r=e.width,i=o(t,s.spatialReference);return s.clone().expand(i*r/s.width)}},39638:(e,t,s)=>{var r;function i(e,t){switch(e.type){case"range":{const s="range"in e?e.range[0]:e.minValue,i="range"in e?e.range[1]:e.maxValue;if(+t<s||+t>i)return r.VALUE_OUT_OF_RANGE;break}case"coded-value":case"codedValue":if(null==e.codedValues||e.codedValues.every((e=>null==e||e.code!==t)))return r.INVALID_CODED_VALUE}return null}function o(e){if(e&&"range"===e.type)return{min:"range"in e?e.range[0]:e.minValue,max:"range"in e?e.range[1]:e.maxValue}}s.d(t,{D3:()=>o,F3:()=>i,V$:()=>r}),function(e){e.VALUE_OUT_OF_RANGE="domain-validation-error::value-out-of-range",e.INVALID_CODED_VALUE="domain-validation-error::invalid-coded-value"}(r||(r={}))},37270:(e,t,s)=>{s.d(t,{AB:()=>y,CH:()=>M,Ec:()=>ee,Gz:()=>V,H7:()=>D,Lk:()=>f,Ll:()=>C,M$:()=>G,Mu:()=>F,O5:()=>b,Pz:()=>J,Q0:()=>g,Qc:()=>U,Qj:()=>I,R9:()=>Q,UF:()=>h,YN:()=>c,ZV:()=>x,gd:()=>m,io:()=>_,j:()=>R,os:()=>T,qN:()=>$,vP:()=>Y,vl:()=>w,wF:()=>K,y2:()=>B});var r=s(10064),i=s(92026),o=s(18202),n=s(39638),l=s(819);const a=["field","field2","field3","normalizationField","rotationInfo.field","proportionalSymbolInfo.field","proportionalSymbolInfo.normalizationField","colorInfo.field","colorInfo.normalizationField"],u=["field","normalizationField"];function c(e,t){if(null!=e&&null!=t)for(const s of Array.isArray(e)?e:[e])if(d(a,s,t),"visualVariables"in s&&s.visualVariables)for(const e of s.visualVariables)d(u,e,t)}function d(e,t,s){if(e)for(const r of e){const e=(0,o.hS)(r,t),i=e&&"function"!=typeof e&&s.get(e);i&&(0,o.RB)(r,i.name,t)}}function h(e,t){if(null!=e&&t?.fields.length)if("startField"in e){const s=t.get(e.startField),r=t.get(e.endField);e.startField=s&&s.name||null,e.endField=r&&r.name||null}else{const s=t.get(e.startTimeField),r=t.get(e.endTimeField);e.startTimeField=s&&s.name||null,e.endTimeField=r&&r.name||null}}const p=new Set;function g(e,t){return e&&t?(p.clear(),m(p,e,t),Array.from(p).sort()):[]}function m(e,t,s){if(s)if(t?.fields?.length)if(s.includes("*"))for(const{name:r}of t.fields)e.add(r);else for(const r of s)y(e,t,r);else{if(s.includes("*"))return e.clear(),void e.add("*");for(const t of s)e.add(t)}}function y(e,t,s){if("string"==typeof s)if(t){const r=t.get(s);r&&e.add(r.name)}else e.add(s)}function f(e,t){return(0,i.Wi)(t)||(0,i.Wi)(e)?[]:t.includes("*")?e.fields.map((e=>e.name)):t}async function _(e,t,s){if(!s)return;const{arcadeUtils:r}=await(0,l.LC)(),i=r.extractFieldNames(s,t?.fields?.map((e=>e.name)));for(const o of i)y(e,t,o)}async function v(e,t,i){if(i&&"1=1"!==i){const o=(await Promise.all([s.e(8562),s.e(4397)]).then(s.bind(s,48562))).WhereClause.create(i,t);if(!o.isStandardized)throw new r.Z("fieldUtils:collectFilterFields","Where clause is not standardized",{where:i});m(e,t,o.fieldNames)}}function b(e){let{displayField:t,fields:s}=e;return t||(s&&s.length?S(s,"name-or-title")||S(s,"unique-identifier")||S(s,"type-or-category")||function(e){for(const t of e){if(!t||!t.name)continue;const e=t.name.toLowerCase();if(e.includes("name")||e.includes("title"))return t.name}return null}(s):null)}function S(e,t){for(const s of e)if(s&&s.valueType&&s.valueType===t)return s.name;return null}async function w(e,t){if(!t)return;const s=(0,o.hS)("elevationInfo.featureExpressionInfo",t);return s?s.collectRequiredFields(e,t.fieldsIndex):void 0}async function x(e,t,s){if(!t||!s||!("fields"in s))return;const r=[];if(s.popupTemplate?.expressionInfos&&r.push(...s.popupTemplate.expressionInfos.map((s=>_(e,t.fieldsIndex,s.expression)))),Array.isArray(s.popupTemplate?.content)){const i=s.popupTemplate.content;for(const s of i)"expression"===s.type&&s.expressionInfo&&r.push(_(e,t.fieldsIndex,s.expressionInfo.expression))}s.fields&&r.push(...s.fields.map((s=>async function(e,t,s){s.outStatistic.onStatisticValueExpression?_(e,t,s.outStatistic.onStatisticValueExpression):e.add(s.outStatistic.onStatisticField)}(e,t.fieldsIndex,s)))),await Promise.all(r)}async function C(e,t,s){t&&(t.timeInfo&&(0,i.pC)(s)&&s.timeExtent&&m(e,t.fieldsIndex,[t.timeInfo.startField,t.timeInfo.endField]),t.floorInfo&&m(e,t.fieldsIndex,[t.floorInfo.floorField]),(0,i.pC)(s)&&(0,i.pC)(s.where)&&await v(e,t.fieldsIndex,s.where))}async function I(e,t,s){t&&s&&await Promise.all(s.map((s=>async function(e,t,s){t&&s&&(s.valueExpression?await _(e,t.fieldsIndex,s.valueExpression):s.field&&y(e,t.fieldsIndex,s.field))}(e,t,s))))}function M(e){if(!e)return[];const t="editFieldsInfo"in e&&e.editFieldsInfo;return t?g(e.fieldsIndex,[t&&t.creatorField,t&&t.creationDateField,t&&t.editorField,t&&t.editDateField]):[]}function R(e){if(!e)return[];const t=e.geometryFieldsInfo;return t?g(e.fieldsIndex,[t.shapeAreaField,t.shapeLengthField]):[]}async function F(e,t){const{labelingInfo:s,fieldsIndex:r}=t;s&&s.length&&await Promise.all(s.map((t=>async function(e,t,s){if(!s)return;const r=s.getLabelExpression(),i=s.where;if("arcade"===r.type)await _(e,t,r.expression);else{const s=r.expression.match(/{[^}]*}/g);s&&s.forEach((s=>{y(e,t,s.slice(1,-1))}))}await v(e,t,i)}(e,r,t))))}function T(e){const t=e.defaultValue;return void 0!==t&&O(e,t)?t:e.nullable?null:void 0}function E(e){return"number"==typeof e&&!isNaN(e)&&isFinite(e)}function L(e){return null===e||E(e)}const N="isInteger"in Number?Number.isInteger:e=>"number"==typeof e&&isFinite(e)&&Math.floor(e)===e;function j(e){return null===e||N(e)}function Z(e){return null!=e&&"string"==typeof e}function A(e){return null===e||Z(e)}function k(){return!0}function O(e,t){let s;switch(e.type){case"date":case"integer":case"long":case"small-integer":case"esriFieldTypeDate":case"esriFieldTypeInteger":case"esriFieldTypeLong":case"esriFieldTypeSmallInteger":s=e.nullable?j:N;break;case"double":case"single":case"esriFieldTypeSingle":case"esriFieldTypeDouble":s=e.nullable?L:E;break;case"string":case"esriFieldTypeString":s=e.nullable?A:Z;break;default:s=k}return 1===arguments.length?s:s(t)}const P=new Set(["integer","small-integer","single","double","esriFieldTypeInteger","esriFieldTypeSmallInteger","esriFieldTypeSingle","esriFieldTypeDouble"]);function D(e){return null!=e&&P.has(e.type)}function $(e){return null!=e&&("string"===e.type||"esriFieldTypeString"===e.type)}function B(e){return null!=e&&("date"===e.type||"esriFieldTypeDate"===e.type)}var G,V;function J(e){return null==e||"number"==typeof e&&isNaN(e)?null:e}function U(e,t){return e.nullable&&null===t?null:D(e)&&!function(e,t){const s="string"==typeof e?q(e):e;return!!s&&(s.isInteger?N(t)&&t>=s.min&&t<=s.max:t>=s.min&&t<=s.max)}(e.type,Number(t))?G.OUT_OF_RANGE:O(e,t)?e.domain?(0,n.F3)(e.domain,t):null:V.INVALID_TYPE}function K(e){return(0,n.D3)(e.domain)||(D(e)?q(e.type):void 0)}function q(e){switch(e){case"esriFieldTypeSmallInteger":case"small-integer":return z;case"esriFieldTypeInteger":case"integer":return W;case"esriFieldTypeSingle":case"single":return H;case"esriFieldTypeDouble":case"double":return X}}!function(e){e.OUT_OF_RANGE="numeric-range-validation-error::out-of-range"}(G||(G={})),function(e){e.INVALID_TYPE="type-validation-error::invalid-type"}(V||(V={}));const z={min:-32768,max:32767,isInteger:!0},W={min:-2147483648,max:2147483647,isInteger:!0},H={min:-34e37,max:12e37,isInteger:!1},X={min:-Number.MAX_VALUE,max:Number.MAX_VALUE,isInteger:!1};function Y(e,t,s){switch(e){case n.V$.INVALID_CODED_VALUE:return`Value ${s} is not in the coded domain - field: ${t.name}, domain: ${JSON.stringify(t.domain)}`;case n.V$.VALUE_OUT_OF_RANGE:return`Value ${s} is out of the range of valid values - field: ${t.name}, domain: ${JSON.stringify(t.domain)}`;case V.INVALID_TYPE:return`Value ${s} is not a valid value for the field type - field: ${t.name}, type: ${t.type}, nullable: ${t.nullable}`;case G.OUT_OF_RANGE:{const{min:e,max:r}=q(t.type);return`Value ${s} is out of range for the number type - field: ${t.name}, type: ${t.type}, value range is ${e} to ${r}`}}}function Q(e,t){return!function(e,t,s){if(!t||!t.attributes||!e){if((0,i.pC)(s))for(const t of e)s.add(t);return!0}const r=t.attributes;let o=!1;for(const n of e)if(!(n in r)){if(o=!0,!(0,i.pC)(s))break;s.add(n)}return o}(e,t,null)}function ee(e){return["raster.itempixelvalue","raster.servicepixelvalue"].some((t=>e.toLowerCase().startsWith(t)))}},18924:(e,t,s)=>{s.d(t,{i:()=>u});var r=s(76200),i=s(25243),o=s(77981),n=s(23084);var l=s(81943);const a=(0,i.se)(l.Z);async function u(e,t,s){t=a(t);const i=(0,n.en)(e),l={...i.query,f:"json",...t.toJSON()},u=t.outSpatialReference,c=(0,o.Ji)(t.geometries[0]),d=(0,n.lA)(l,s);return(0,r.default)(i.path+"/project",d).then((e=>{let{data:{geometries:t}}=e;return function(e,t,s){const r=(0,o.q9)(t);return e.map((e=>{const t=r.fromJSON(e);return t.spatialReference=s,t}))}(t,c,u)}))}},83589:(e,t,s)=>{s.d(t,{h:()=>l});var r=s(76200),i=s(23084);var o=s(55465),n=s(57571);async function l(e,t,s){t=n.Z.from(t);const o=(0,i.en)(e),{address:l,...u}=t.toJSON(),c={...l,...u,f:"json"},d=(0,i.cv)({...o.query,...c}),h=(0,i.lA)(d,s),p=`${o.path}/findAddressCandidates`;return(0,r.default)(p,h).then(a)}function a(e){let{data:t}=e;if(!t)return[];const{candidates:s,spatialReference:r}=t;return s?s.map((e=>{if(!e)return;const{extent:t,location:s}=e,i=!t||function(e){return e&&"number"==typeof e.xmin&&"number"==typeof e.ymin&&"number"==typeof e.xmax&&"number"==typeof e.ymax}(t);return function(e){return e&&"number"==typeof e.x&&"number"==typeof e.y}(s)&&i?(t&&(t.spatialReference=r),s.spatialReference=r,o.Z.fromJSON(e)):void 0})):[]}},88736:(e,t,s)=>{s.d(t,{w:()=>l});var r=s(76200),i=s(23084),o=s(55465),n=s(50701);async function l(e,t,s){t=n.Z.from(t);const o=(0,i.en)(e),l={...t.toJSON(),f:"json"},u=(0,i.cv)({...o.query,...l}),c=(0,i.lA)(u,s),d=`${o.path}/reverseGeocode`;return(0,r.default)(d,c).then(a)}function a(e){let{data:t}=e;if(!t)return;const{address:s,location:r}=t,i=s&&s.Match_addr||"";return o.Z.fromJSON({address:i,attributes:s||{},location:r,score:100})}},1360:(e,t,s)=>{s.d(t,{K:()=>h});var r=s(76200),i=s(23084),o=s(27366),n=s(46784),l=s(49861),a=(s(63780),s(93169),s(25243),s(69912));let u=class extends n.wq{constructor(e){super(e),this.isCollection=null,this.magicKey=null,this.text=null}};(0,o._)([(0,l.Cb)({type:Boolean,json:{write:!0}})],u.prototype,"isCollection",void 0),(0,o._)([(0,l.Cb)({type:String,json:{write:!0}})],u.prototype,"magicKey",void 0),(0,o._)([(0,l.Cb)({type:String,json:{write:!0}})],u.prototype,"text",void 0),u=(0,o._)([(0,a.j)("esri.rest.support.SuggestionCandidate")],u);const c=u;var d=s(13189);async function h(e,t,s){const o=(0,i.en)(e),n={...(t=d.Z.from(t)).toJSON(),f:"json"},l=(0,i.cv)({...o.query,...n}),a=(0,i.lA)(l,s),u=`${o.path}/suggest`;return(0,r.default)(u,a).then(p)}function p(e){const{data:t}=e;if(!t)return[];const{suggestions:s}=t;return s?s.map((e=>new c(e))):[]}},55465:(e,t,s)=>{s.d(t,{Z:()=>c});var r=s(27366),i=s(46784),o=s(49861),n=(s(63780),s(93169),s(25243),s(69912)),l=s(53866),a=s(7882);let u=class extends i.wq{constructor(e){super(e),this.address=null,this.attributes=null,this.extent=null,this.location=null,this.score=null}};(0,r._)([(0,o.Cb)({type:String,json:{write:!0}})],u.prototype,"address",void 0),(0,r._)([(0,o.Cb)({type:Object,json:{write:!0}})],u.prototype,"attributes",void 0),(0,r._)([(0,o.Cb)({type:l.Z,json:{write:!0}})],u.prototype,"extent",void 0),(0,r._)([(0,o.Cb)({type:a.Z,json:{write:!0}})],u.prototype,"location",void 0),(0,r._)([(0,o.Cb)({type:Number,json:{write:!0}})],u.prototype,"score",void 0),u=(0,r._)([(0,n.j)("esri.rest.support.AddressCandidate")],u);const c=u},57571:(e,t,s)=>{s.d(t,{Z:()=>p});var r=s(27366),i=(s(59486),s(46784)),o=s(49861),n=(s(63780),s(93169),s(25243)),l=s(69912),a=s(1337),u=s(7882),c=s(78952),d=s(53866);let h=class extends i.wq{constructor(e){super(e),this.address=null,this.apiKey=null,this.categories=null,this.countryCode=null,this.forStorage=null,this.location=null,this.locationType=null,this.magicKey=null,this.maxLocations=null,this.outFields=null,this.outSpatialReference=null,this.searchExtent=null}};(0,r._)([(0,o.Cb)({type:Object,json:{write:!0}})],h.prototype,"address",void 0),(0,r._)([(0,o.Cb)(a.q)],h.prototype,"apiKey",void 0),(0,r._)([(0,o.Cb)({type:[String],json:{read:{source:"category",reader:e=>e?e.split(","):null},write:{target:"category",writer:(e,t)=>{t.category=e?e.join(","):null}}}})],h.prototype,"categories",void 0),(0,r._)([(0,o.Cb)({type:String,json:{write:!0}})],h.prototype,"countryCode",void 0),(0,r._)([(0,o.Cb)({type:Boolean,json:{write:!0}})],h.prototype,"forStorage",void 0),(0,r._)([(0,o.Cb)({type:u.Z,json:{write:{writer:(e,t)=>{t.location=e?e.clone().normalize():null}}}})],h.prototype,"location",void 0),(0,r._)([(0,o.Cb)({type:String,json:{write:!0}})],h.prototype,"locationType",void 0),(0,r._)([(0,o.Cb)({type:String,json:{write:!0}})],h.prototype,"magicKey",void 0),(0,r._)([(0,o.Cb)({type:Number,json:{write:!0}})],h.prototype,"maxLocations",void 0),(0,r._)([(0,o.Cb)({type:[String],json:{write:{writer:(e,t)=>{t.outFields=e?e.join(","):null}}}})],h.prototype,"outFields",void 0),(0,r._)([(0,o.Cb)({type:c.Z,json:{read:{source:"outSR"},write:{target:"outSR"}}})],h.prototype,"outSpatialReference",void 0),(0,r._)([(0,o.Cb)({type:d.Z,json:{write:{writer:(e,t)=>{const s=e?e.shiftCentralMeridian():null;t.searchExtent=s}}}})],h.prototype,"searchExtent",void 0),h=(0,r._)([(0,l.j)("esri.rest.support.AddressToLocationsParameters")],h),h.from=(0,n.se)(h);const p=h},50701:(e,t,s)=>{s.d(t,{Z:()=>h});var r=s(27366),i=(s(59486),s(46784)),o=s(49861),n=(s(63780),s(93169),s(25243)),l=s(69912),a=s(1337),u=s(7882),c=s(78952);let d=class extends i.wq{constructor(e){super(e),this.apiKey=null,this.location=null,this.locationType=null,this.outSpatialReference=null}};(0,r._)([(0,o.Cb)(a.q)],d.prototype,"apiKey",void 0),(0,r._)([(0,o.Cb)({type:u.Z,json:{write:{writer:(e,t)=>{const s=e?e.clone().normalize():null,r=void 0!==s;t.location=r?s:null}}}})],d.prototype,"location",void 0),(0,r._)([(0,o.Cb)({type:String,json:{write:!0}})],d.prototype,"locationType",void 0),(0,r._)([(0,o.Cb)({type:c.Z,json:{read:{source:"outSR"},write:{target:"outSR"}}})],d.prototype,"outSpatialReference",void 0),d=(0,r._)([(0,l.j)("esri.rest.support.LocationToAddressParameters")],d),d.from=(0,n.se)(d);const h=d},81943:(e,t,s)=>{s.d(t,{Z:()=>u});var r=s(27366),i=s(46784),o=s(49861),n=(s(63780),s(93169),s(25243),s(69912)),l=s(77981);let a=class extends i.wq{constructor(e){super(e),this.geometries=null,this.outSpatialReference=null,this.transformation=null,this.transformForward=null}toJSON(){const e=this.geometries.map((e=>e.toJSON())),t=this.geometries[0],s={};return s.outSR=this.outSpatialReference.wkid||JSON.stringify(this.outSpatialReference.toJSON()),s.inSR=t.spatialReference.wkid||JSON.stringify(t.spatialReference.toJSON()),s.geometries=JSON.stringify({geometryType:(0,l.Ji)(t),geometries:e}),this.transformation&&(s.transformation=this.transformation.wkid||JSON.stringify(this.transformation)),null!=this.transformForward&&(s.transformForward=this.transformForward),s}};(0,r._)([(0,o.Cb)()],a.prototype,"geometries",void 0),(0,r._)([(0,o.Cb)({json:{read:{source:"outSR"}}})],a.prototype,"outSpatialReference",void 0),(0,r._)([(0,o.Cb)()],a.prototype,"transformation",void 0),(0,r._)([(0,o.Cb)()],a.prototype,"transformForward",void 0),a=(0,r._)([(0,n.j)("esri.rest.support.ProjectParameters")],a);const u=a},13189:(e,t,s)=>{s.d(t,{Z:()=>p});var r=s(27366),i=(s(59486),s(46784)),o=s(49861),n=(s(63780),s(93169),s(25243)),l=s(69912),a=s(1337),u=s(7882),c=s(78952),d=s(53866);let h=class extends i.wq{constructor(e){super(e),this.apiKey=null,this.categories=null,this.countryCode=null,this.location=null,this.maxSuggestions=null,this.outSpatialReference=null,this.searchExtent=null,this.text=null}};(0,r._)([(0,o.Cb)(a.q)],h.prototype,"apiKey",void 0),(0,r._)([(0,o.Cb)({type:[String],json:{read:{source:"category",reader:e=>e?e.split(","):null},write:{target:"category",writer:(e,t)=>{t.category=e?e.join(","):null}}}})],h.prototype,"categories",void 0),(0,r._)([(0,o.Cb)({type:String,json:{write:!0}})],h.prototype,"countryCode",void 0),(0,r._)([(0,o.Cb)({type:u.Z,json:{write:{writer:(e,t)=>{t.location=e?e.clone().normalize():null}}}})],h.prototype,"location",void 0),(0,r._)([(0,o.Cb)({type:Number,json:{write:!0}})],h.prototype,"maxSuggestions",void 0),(0,r._)([(0,o.Cb)({type:c.Z,json:{read:{source:"outSR"},write:{target:"outSR"}}})],h.prototype,"outSpatialReference",void 0),(0,r._)([(0,o.Cb)({type:d.Z,json:{write:{writer:(e,t)=>{const s=e?e.shiftCentralMeridian():null;t.searchExtent=JSON.stringify(s)}}}})],h.prototype,"searchExtent",void 0),(0,r._)([(0,o.Cb)({type:String,json:{write:!0}})],h.prototype,"text",void 0),h=(0,r._)([(0,l.j)("esri.rest.support.SuggestLocationsParameters")],h),h.from=(0,n.se)(h);const p=h},1337:(e,t,s)=>{s.d(t,{q:()=>r});const r={type:String,json:{read:{source:"token"},write:{target:"token"}}}},22061:(e,t,s)=>{s.d(t,{Z:()=>p});var r=s(27366),i=s(51995),o=s(43404),n=s(46784),l=s(49861),a=(s(63780),s(93169),s(25243),s(38511)),u=s(69912);const c=new o.X({esriSMS:"simple-marker",esriPMS:"picture-marker",esriSLS:"simple-line",esriSFS:"simple-fill",esriPFS:"picture-fill",esriTS:"text",esriSHD:"shield-label-symbol",PointSymbol3D:"point-3d",LineSymbol3D:"line-3d",PolygonSymbol3D:"polygon-3d",WebStyleSymbol:"web-style",MeshSymbol3D:"mesh-3d",LabelSymbol3D:"label-3d",CIMSymbolReference:"cim"});let d=0,h=class extends n.wq{constructor(e){super(e),this.id="sym"+d++,this.type=null,this.color=new i.Z([0,0,0,1])}readColor(e){return e&&null!=e[0]?[e[0],e[1],e[2],e[3]/255]:e}async collectRequiredFields(e,t){}hash(){return JSON.stringify(this.toJSON())}clone(){}};(0,r._)([(0,l.Cb)({type:c.apiValues,readOnly:!0,json:{read:!1,write:{ignoreOrigin:!0,writer:c.write}}})],h.prototype,"type",void 0),(0,r._)([(0,l.Cb)({type:i.Z,json:{write:{allowNull:!0}}})],h.prototype,"color",void 0),(0,r._)([(0,a.r)("color")],h.prototype,"readColor",null),h=(0,r._)([(0,u.j)("esri.symbols.Symbol")],h);const p=h},69787:(e,t,s)=>{s.d(t,{rs:()=>o,tl:()=>i});var r=s(92026);function i(e){return e&&"function"==typeof e.highlight}function o(e,t,s){return(0,r.Wi)(e)||e>s&&(0===t||e<t)}},14076:(e,t,s)=>{s.d(t,{Z:()=>nt});var r=s(27366),i=(s(59166),s(98928)),o=s(100),n=s(94172),l=s(643),a=s(8025),u=(s(63780),s(93169),s(25243),s(49861)),c=s(69912),d=s(69407),h=s(65905),p=s(42265),g=s(52639),m=s(44055),y=(s(51508),s(85015)),f=s(40281),_=s(44927),v=s(10064),b=s(91505),S=s(32718),w=s(92026),x=s(66978),C=s(7882),I=s(78952),M=s(36257),R=s(41201),F=s(70032),T=s(69787),E=s(20804),L=s(44443),N=s(91773),j=s(38832),Z=s(86198),A=s(39435),k=s(99505),O=s(91946),P=s(16851),D=s(61459),$=s(58009);function B(e,t){return e.hasOwnProperty(t)&&null!=e[t]&&""!==e[t]}const G="esri.widgets.Search.SearchViewModel",V=S.Z.getLogger(G),J="highlight",U=f.Z.ofType({key:e=>e.layer?"layer":"locator",base:N.Z,typeMap:{layer:E.Z,locator:L.Z}}),K=I.Z.WGS84,q=/<(?:.|\s)*?>/g,z=-1;let W=class extends((0,k._)(b.Z.EventedMixin(y.Z))){constructor(e){super(e),this._handles=new o.Z,this._gotoController=null,this._searching=null,this._createdFeatureLayers=[],this.autoNavigate=!0,this.autoSelect=!0,this.defaultPopupTemplate=null,this.defaultSources=new U,this.defaultSymbols={point:new O.Z({url:(0,h.V)("esri/images/search/search-symbol-32.png"),size:24,width:24,height:24}),polyline:new P.Z({color:[130,130,130,1],width:2}),polygon:new D.Z({color:[235,235,235,.4],outline:{color:[130,130,130,1],width:2}})},this.includeDefaultSources=!0,this.maxInputLength=128,this.maxResults=6,this.maxSuggestions=6,this.messages=null,this.minSuggestCharacters=3,this.popupEnabled=!0,this.popupTemplate=null,this.portal=F.Z.getDefault(),this.resultCount=null,this.resultGraphicEnabled=!0,this.resultGraphic=null,this.results=null,this.selectedSuggestion=null,this.searchAllEnabled=!0,this.selectedResult=null,this.sources=new U,this.suggestionDelay=350,this.suggestionCount=null,this.suggestions=null,this.suggestionsEnabled=!0,this.view=null}initialize(){const e=async()=>{const e=await(0,R.ME)("esri/widgets/Search/t9n/Search");this.messages=e,this.defaultPopupTemplate=new m.Z({title:e.searchResult,content:"{Match_addr}"})};e(),this._handles.add([(0,n.YP)((()=>[this.includeDefaultSources,this.view,this.portal]),(()=>this._update()),n.nn),(0,M.qe)(e)])}destroy(){this._destroyFeatureLayers(),this._abortGoTo(),this.clearGraphics(),this._handles.destroy(),this._handles=null}get activeSource(){return this.allSources.getItemAt(this.activeSourceIndex)||null}get activeSourceIndex(){return 1!==this.allSources.length&&this.searchAllEnabled?z:0}set activeSourceIndex(e){void 0!==e?this._override("activeSourceIndex",e):this._clearOverride("activeSourceIndex")}get allPlaceholder(){return this.messages?.allPlaceholder}set allPlaceholder(e){e?this._override("allPlaceholder",e):this._clearOverride("allPlaceholder")}get allSources(){const{sources:e,defaultSources:t,includeDefaultSources:s}=this,r="function"==typeof s?s.call(null,{sources:e,defaultSources:t}):s?t.concat(e):e,i=this._get("allSources")||new U;return i.removeAll(),i.addMany(r.filter(Boolean)),i}get defaultSymbol(){return(0,_.Mr)(V,"defaultSymbol",{replacement:"defaultSymbols",version:"4.22"}),this._get("defaultSymbol")}set defaultSymbol(e){(0,_.Mr)(V,"defaultSymbol",{replacement:"defaultSymbols",version:"4.22"}),this._set("defaultSymbol",e)}get locationEnabled(){return this._get("locationEnabled")||(0,A.Zh)()}set locationEnabled(e){if(void 0===e)return void this._clearOverride("locationEnabled");const t=(0,A.Zh)();if(e&&!t){const e=new v.Z("locationEnabled:geolocation-unsupported","Geolocation API is unsupported.",{geolocation:navigator.geolocation});V.error(e)}this._override("locationEnabled",e&&t)}get placeholder(){const{allSources:e,activeSourceIndex:t,allPlaceholder:s}=this;if(t===z)return s;const r=e.getItemAt(t);return r?r.placeholder:""}set searchTerm(e){this._set("searchTerm",e||""),this.clearGraphics(),this.selectedSuggestion&&this.selectedSuggestion.text!==e&&this._set("selectedSuggestion",null),""===e&&this._clear()}get searchTerm(){return this._get("searchTerm")||""}get state(){return this._searching?"searching":this.updating?"loading":0===this.allSources.length?"disabled":"ready"}get updating(){return null!=this._updatingPromise}clear(){this.searchTerm=""}clearGraphics(){this._removeHighlight(),this._closePopup(),this.view&&this.view.graphics.remove(this.resultGraphic),this._set("resultGraphic",null)}search(e,t){this.emit("search-start"),this.clearGraphics();const s=this._createSuggestionForSearch(e),r=this.when().then((()=>this._getResultsFromSources(s,t).then((e=>{if((0,w.Wg)(t?.signal)?.aborted)return null;const r={activeSourceIndex:this.activeSourceIndex,searchTerm:s.text,numResults:0,numErrors:0,errors:[],results:[]};this._formatResponse(r,e,s);const i=this._getFirstResult(r.results),o=(s.location&&i?i.name:s.text).replace(q,"");return this._set("searchTerm",o),(s.key&&"number"==typeof s.sourceIndex||s.location)&&this._set("selectedSuggestion",s),this._set("results",r.results),this._set("resultCount",r.results.reduce(((e,t)=>e+t.results.length),0)),this.emit("search-complete",r),this._selectFirstResult(i).then((()=>r))})))).then((e=>(this._clearSearching(),e)),(e=>{throw this._clearSearching(),e}));return this._searching=r,r}searchNearby(e){if(!this.locationEnabled){const e=new v.Z("searchNearby:geolocation-unsupported","Geolocation API is unsupported.",{geolocation:navigator.geolocation});return V.error(e),Promise.reject(e)}const t=(0,A.nu)().then((t=>(0,A.C2)({position:t,view:this.view},e))).then((t=>this.search(t,e)));return this._searching=t,t.catch((()=>{})).then((()=>this._clearSearching())),t}select(e){if(this.clearGraphics(),!e){const t=new v.Z("select:missing-parameter","Cannot select without a searchResult.",{searchResult:e});return V.error(t),Promise.reject(t)}const{view:t}=this,s=B(e,"sourceIndex")?e.sourceIndex:this._getSourceIndexOfResult(e),r=this.allSources.getItemAt(s);if(!r){const e=new v.Z("select:missing-source","Cannot select without a source.",{source:r});return V.error(e),Promise.reject(e)}const i=r instanceof E.Z?this._getLayerSourcePopupTemplate(r):r.popupTemplate,o=r.resultSymbol||this._getDefaultSymbol(e),n=B(r,"resultGraphicEnabled")?r.resultGraphicEnabled:this.resultGraphicEnabled,l=B(r,"autoNavigate")?r.autoNavigate:this.autoNavigate,a=B(r,"popupEnabled")?r.popupEnabled:this.popupEnabled,u=a?i||this.popupTemplate||this.defaultPopupTemplate:null,{feature:c}=e;if(!c){const e=new v.Z("select:missing-feature","Cannot select without a feature.",{feature:c});return V.error(e),Promise.reject(e)}const{attributes:d,geometry:h,layer:p,sourceLayer:m}=c,y=(0,j.$J)(h),f={layerViewQuery:this._getLayerView(c),elevationQuery:t&&(0,w.pC)(y)?(0,j.RH)(y,t).catch((()=>y)):Promise.resolve(y)};return(0,x.as)(f).then((i=>{const y=i.layerViewQuery.value,f=i.elevationQuery.value;o instanceof $.Z&&(o.text=e.name);const _=t&&l?e.target||e.extent:null;return((0,w.pC)(_)?this._goToSearchResult(_):Promise.resolve()).then((()=>{const i=y?c:new g.Z({geometry:h,symbol:o,attributes:d,layer:p,sourceLayer:m,popupTemplate:u}),l=a&&this.view?.popup,_=l&&i.getEffectivePopupTemplate(l.defaultPopupTemplateEnabled);return _&&t.popup.open({features:[i],location:f}),y&&(0,T.tl)(y)&&!_&&this._highlightFeature({graphic:i,layerView:y}),!y&&n&&t&&t.graphics.push(i),this._setResultFloor(e),this._set("selectedResult",e),this._set("resultGraphic",i),this.emit("select-result",{result:e,source:r,sourceIndex:s}),e}))}))}suggest(e,t,s){const r=e||this.searchTerm;return this.emit("suggest-start",{searchTerm:r}),this._suggestTimer(t,s).then((()=>this._suggestImmediate(r,s).then((e=>(this._set("suggestions",e.results),this._set("suggestionCount",e.results.reduce(((e,t)=>e+t.results.length),0)),this.emit("suggest-complete",e),e)))))}async when(){await(0,n.N1)((()=>!this.updating))}async _update(){const{portal:e,view:t}=this;if(this.includeDefaultSources){const s=this._updatingPromise=(0,x.as)([e?.load(),t?.when()]);if(this.destroyed)return;if(await s,s!==this._updatingPromise)return}await(0,n.N1)((()=>this.messages)),this.destroyed||this._updateDefaultSources(),this._updatingPromise=null}_clearSearching(){this._searching=null}_convertHelperServices(){const e=this.portal?.helperServices?.geocode;return e?e.map((e=>{if(!1===e.placefinding)return;const t=p.Z.apiKey&&(0,Z.j9)(e.url)?{url:Z.uE}:null,s=L.Z.fromJSON({...e,...t}),r=s.url;if((0,Z.j9)(r)||(0,Z.b_)(r)||(0,Z.Y4)(r)){const e=s.outFields||["Addr_type","Match_addr","StAddr","City"],t=s.placeholder||this.messages.placeholder,r="number"==typeof s.defaultZoomScale?s.defaultZoomScale:2500;s.set({singleLineFieldName:"SingleLine",outFields:e,placeholder:t,defaultZoomScale:r})}return s.singleLineFieldName?s:void 0})).filter(Boolean):[]}_destroyFeatureLayers(){this._createdFeatureLayers.forEach((e=>e?.destroy())),this._createdFeatureLayers=[]}_getLayerSources(e,t){const s=this.view?.map;return e.map((e=>{const r=s.findLayerById(e.id);if(!r)return;const i=this._getLayerJSON(e),o=E.Z.fromJSON(i);return o.placeholder=t,this._getLayer(r,i).then((e=>{o.layer=e})),o})).filter(Boolean).toArray()}_getTableSources(e,t){const s=this.view?.map;return e.map((e=>{const r=s.findTableById(e.id);if(!r)return;const i=this._getLayerJSON(e),o=E.Z.fromJSON(i);return o.placeholder=t,this._getLayer(r,i).then((e=>{o.layer=e})),o})).filter(Boolean).toArray()}_convertApplicationProperties(){const e=this.view?.map,t=e?.applicationProperties?.viewing?.search;if(!t)return[];const{enabled:s,hintText:r,layers:i,tables:o}=t;return s?[...this._getLayerSources(i,r),...this._getTableSources(o,r)]:[]}async _getSubLayer(e,t){if(await e.load(),!e.allSublayers)throw new Error;const s=e.allSublayers.find((e=>e.id===t.subLayer));if(!s)throw new Error;const r=await s.createFeatureLayer();return this._createdFeatureLayers.push(r),r}async _getBuildingSubLayer(e,t){await e.load();const s=e.allSublayers.find((e=>e.id===t.subLayer));if("building-component"!==s?.type)throw new Error;if(await s.load(),null==s.associatedLayer)throw new Error;return await s.associatedLayer.load(),s}_getLayer(e,t){return"feature"===e.type||"scene"===e.type||"csv"===e.type||"geojson"===e.type||"ogc-feature"===e.type?Promise.resolve(e):"map-image"===e.type?this._getSubLayer(e,t).catch((()=>{const t=new v.Z("search:create-featurelayer","Could not create a FeatureLayer from the MapImageLayer",{layer:e});return V.error(t),null})):"building-scene"===e.type?this._getBuildingSubLayer(e,t):Promise.resolve(null)}_getLayerJSON(e){return"function"==typeof e.toJSON?e.toJSON():e}_updateDefaultSources(){const{defaultSources:e,includeDefaultSources:t}=this;this._destroyFeatureLayers(),e.removeAll(),t&&e.addMany([...this._convertApplicationProperties(),...this._convertHelperServices()])}_abortGoTo(){this._gotoController&&this._gotoController.abort(),this._gotoController=null}_clear(){this._abortGoTo(),this._set("resultCount",null),this._set("results",null),this._set("suggestions",null),this._set("suggestionCount",null),this._set("selectedResult",null),this._set("selectedSuggestion",null),this.emit("search-clear")}_closePopup(){const e=this.view?.popup,{resultGraphic:t}=this;if(!e||!t)return;const{selectedFeature:s}=e;s&&s===t&&e.close()}_suggestTimer(e,t){const s=null!=e?e:this.suggestionDelay;return(0,x.e4)(s,null,t&&t.signal)}_createLocationForSearch(e){return e instanceof g.Z?(0,j.$J)(e.geometry):e instanceof C.Z?e:Array.isArray(e)&&2===e.length?new C.Z({longitude:e[0],latitude:e[1]}):null}_createSuggestionForSearch(e){if(e&&B(e,"key")&&B(e,"text")&&B(e,"sourceIndex"))return e;const t=this._createLocationForSearch(e),s="string"==typeof e?e:this.searchTerm,{selectedSuggestion:r,selectedResult:i}=this,o=!e&&r&&i,n=o&&r.key===i.key&&r.sourceIndex===i.sourceIndex,l=o&&r.location;return n||l?r:{location:(0,w.Wg)(t),text:t?"":s,sourceIndex:null,key:null}}_getFirstResult(e){let t=null;return e&&e.some((e=>{const{results:s}=e,r=s[0],i=!!r;return i&&(t=r),i})),t}_selectFirstResult(e){return this.autoSelect&&e?this.select(e):Promise.resolve(null)}_suggestImmediate(e,t){return this.when().then((()=>this._getSuggestionsFromSources(e,t))).then((s=>{if((0,w.Wg)(t?.signal)?.aborted)return null;const r={activeSourceIndex:this.activeSourceIndex,searchTerm:e,numResults:0,numErrors:0,errors:[],results:[]};return this._formatResponse(r,s),r}))}_formatSourceResponse(e,t,s){const r=t&&t.value||[],i=t&&t.error,o=this.allSources.getItemAt(s);if(i){const t={sourceIndex:s,source:o,error:i};e.errors.push(t),V.error(i),e.numErrors++}else{const t={sourceIndex:s,source:o,results:r};e.results.push(t),e.numResults+=r.length}}_formatResponse(e,t,s){if(t)if(e.activeSourceIndex===z){const r=s&&B(s,"sourceIndex")&&-1!==s.sourceIndex?s.sourceIndex:void 0;t.forEach(((t,s)=>{const i=void 0!==r?r:s;this._formatSourceResponse(e,t,i)}))}else this._formatSourceResponse(e,t[0],e.activeSourceIndex)}_getResultsFromSources(e,t){const{allSources:s}=this,r=!e.location&&B(e,"sourceIndex")?e.sourceIndex:this.activeSourceIndex,i=[];if(!s.length){const e=new v.Z("search:no-sources-defined","At least one source is required.",{allSources:s});return V.error(e),Promise.reject(e)}return r===z?s.forEach(((s,r)=>{i.push(this._getResultsFromSource(e,r,t))})):i.push(this._getResultsFromSource(e,r,t)),(0,x.as)(i)}_getSuggestionsFromSources(e,t){const{allSources:s,activeSourceIndex:r}=this,i=[];if(!s.length){const e=new v.Z("suggest:no-sources-defined","At least one source is required.",{allSources:s});return V.error(e),Promise.reject(e)}return r===z?s.forEach(((s,r)=>{i.push(this._getSuggestionsFromSource(e,r,t))})):i.push(this._getSuggestionsFromSource(e,r,t)),(0,x.as)(i)}_getResultsFromSource(e,t,s){const r=this.allSources.getItemAt(t),{location:i=null}=e,o=this.view?.spatialReference||K,n=B(r,"maxResults")?r.maxResults:this.maxResults,l=!!(r instanceof E.Z&&B(r,"exactMatch"))&&r.exactMatch,{view:a}=this;return r.getResults({view:a,sourceIndex:t,location:i,suggestResult:e,spatialReference:o,exactMatch:l,maxResults:n},s)}_getSuggestionsFromSource(e,t,s){const r=this.allSources.getItemAt(t),i=B(r,"suggestionsEnabled")?r.suggestionsEnabled:this.suggestionsEnabled,o=e.length,n=B(r,"minSuggestCharacters")?r.minSuggestCharacters:this.minSuggestCharacters;if(i&&e.trim()&&o>=n){const i=this.view?.spatialReference||K,o=B(r,"maxSuggestions")?r.maxSuggestions:this.maxSuggestions,{view:n}=this,l=!!(r instanceof E.Z&&B(r,"exactMatch"))&&r.exactMatch;return r.getSuggestions({view:n,sourceIndex:t,suggestTerm:e,spatialReference:i,maxSuggestions:o,exactMatch:l},s)}return Promise.resolve(null)}_getLayerSourcePopupTemplate(e){const{layer:t}=e;if(t)return B(e,"popupTemplate")?e.popupTemplate:t.popupTemplate}_getSourceIndexOfResult(e){const t=this.results;let s=null;return t.some((t=>t.results.some((r=>r===e&&(s=t.sourceIndex,!0))))),s}async _goToSearchResult(e){const t=!!e;this._abortGoTo();const s=new AbortController;this._gotoController=s;const r={target:{target:e},options:{animate:t,signal:s.signal}};await this.callGoTo(r),this._gotoController=null}_getDefaultSymbol(e){const{defaultSymbols:t}=this,s=e.feature?.geometry;if((0,w.Wi)(s))return null;const r=this._get("defaultSymbol");if(r&&("point"===s.type||"multipoint"===s.type))return r;switch(s.type){case"point":case"multipoint":return t.point;case"polyline":return t.polyline;case"extent":case"polygon":return t.polygon;default:return null}}_removeHighlight(){this._handles.remove(J)}async _getLayerView(e){const{view:t}=this;if(!e||!t||"building-component"===e.layer.type||"subtype-sublayer"===e.layer.type)return null;const{layer:s}=e;return await t.when(),t.whenLayerView(s)}_highlightFeature(e){const{graphic:t,layerView:s}=e,{attributes:r,layer:i}=t,{objectIdField:o}=i,n=r&&r[o],l=s.highlight(n||t);this._handles.add(l,J)}_setResultFloor(e){const{view:t}=this,s=e.feature?.attributes,r=e.feature?.sourceLayer;if(r&&"floorInfo"in r&&r?.floorInfo?.floorField&&s){const e=s[r.floorInfo.floorField];t.emit("select-result-floor",e)}}};W.ALL_INDEX=z,(0,r._)([(0,u.Cb)()],W.prototype,"_searching",void 0),(0,r._)([(0,u.Cb)()],W.prototype,"_updatingPromise",void 0),(0,r._)([(0,u.Cb)({readOnly:!0,value:null})],W.prototype,"activeSource",null),(0,r._)([(0,u.Cb)()],W.prototype,"activeSourceIndex",null),(0,r._)([(0,u.Cb)()],W.prototype,"allPlaceholder",null),(0,r._)([(0,u.Cb)({readOnly:!0})],W.prototype,"allSources",null),(0,r._)([(0,u.Cb)()],W.prototype,"autoNavigate",void 0),(0,r._)([(0,u.Cb)()],W.prototype,"autoSelect",void 0),(0,r._)([(0,u.Cb)()],W.prototype,"defaultPopupTemplate",void 0),(0,r._)([(0,u.Cb)({readOnly:!0})],W.prototype,"defaultSources",void 0),(0,r._)([(0,u.Cb)()],W.prototype,"defaultSymbol",null),(0,r._)([(0,u.Cb)()],W.prototype,"defaultSymbols",void 0),(0,r._)([(0,u.Cb)()],W.prototype,"includeDefaultSources",void 0),(0,r._)([(0,u.Cb)()],W.prototype,"locationEnabled",null),(0,r._)([(0,u.Cb)()],W.prototype,"maxInputLength",void 0),(0,r._)([(0,u.Cb)()],W.prototype,"maxResults",void 0),(0,r._)([(0,u.Cb)()],W.prototype,"maxSuggestions",void 0),(0,r._)([(0,u.Cb)()],W.prototype,"messages",void 0),(0,r._)([(0,u.Cb)()],W.prototype,"minSuggestCharacters",void 0),(0,r._)([(0,u.Cb)({readOnly:!0})],W.prototype,"placeholder",null),(0,r._)([(0,u.Cb)()],W.prototype,"popupEnabled",void 0),(0,r._)([(0,u.Cb)({type:m.Z})],W.prototype,"popupTemplate",void 0),(0,r._)([(0,u.Cb)({type:F.Z})],W.prototype,"portal",void 0),(0,r._)([(0,u.Cb)()],W.prototype,"resultCount",void 0),(0,r._)([(0,u.Cb)()],W.prototype,"resultGraphicEnabled",void 0),(0,r._)([(0,u.Cb)({readOnly:!0})],W.prototype,"resultGraphic",void 0),(0,r._)([(0,u.Cb)({readOnly:!0})],W.prototype,"results",void 0),(0,r._)([(0,u.Cb)({readOnly:!0})],W.prototype,"selectedSuggestion",void 0),(0,r._)([(0,u.Cb)()],W.prototype,"searchAllEnabled",void 0),(0,r._)([(0,u.Cb)({readOnly:!0})],W.prototype,"selectedResult",void 0),(0,r._)([(0,u.Cb)()],W.prototype,"searchTerm",null),(0,r._)([(0,u.Cb)({type:U})],W.prototype,"sources",void 0),(0,r._)([(0,u.Cb)({readOnly:!0})],W.prototype,"state",null),(0,r._)([(0,u.Cb)()],W.prototype,"suggestionDelay",void 0),(0,r._)([(0,u.Cb)()],W.prototype,"suggestionCount",void 0),(0,r._)([(0,u.Cb)({readOnly:!0})],W.prototype,"suggestions",void 0),(0,r._)([(0,u.Cb)()],W.prototype,"suggestionsEnabled",void 0),(0,r._)([(0,u.Cb)({readOnly:!0})],W.prototype,"updating",null),(0,r._)([(0,u.Cb)()],W.prototype,"view",void 0),(0,r._)([(0,u.Cb)()],W.prototype,"clear",null),W=(0,r._)([(0,c.j)(G)],W);const H=W;var X=s(78088),Y=s(80532),Q=s(67005),ee=s(80975);const te="esri-search-result-renderer esri-widget",se="esri-widget__anchor",re="esri-search-result-renderer__more-results--show-more-results",ie="esri-search-result-renderer__more-results",oe="esri-search-result-renderer__more-results-list",ne="esri-search-result-renderer__more-results-item",le="esri-search-result-renderer__more-results-list-header";let ae=class extends d.Z{constructor(e,t){super(e,t),this.messages=null,this.showMoreResultsOpen=!1,this.viewModel=null}render(){const e={[re]:this.showMoreResultsOpen};return(0,Q.u)("div",{class:te},(0,Q.u)("div",{key:"esri-search-renderer__container",class:this.classes(ie,e)},this.renderSearchResultName(),this.renderMoreResults()))}renderMoreResults(){return(0,Q.u)("div",{key:"esri-search-renderer__more-results"},this.renderMoreResultsButton(),this.renderMoreResultsLists())}renderSearchResultName(){const e=this.viewModel?.selectedResult,t=e&&e.name||"";return(0,Q.u)("div",{key:"esri-search-renderer__result-name",class:ne},t)}renderMoreResultsLists(){const e=this.viewModel?.results,{resultCount:t}=this.viewModel;if(t<2)return null;const s=e.map((e=>this.renderMoreResultsList(e)));return(0,Q.u)("div",{key:"esri-search-renderer__more-results-container",class:oe},s)}renderMoreResultsButton(){const{messages:e}=this,{resultCount:t}=this.viewModel;return t<2?null:(0,Q.u)("div",{key:"esri-search-renderer__more-results-button",class:ne},(0,Q.u)("a",{class:se,href:"#",bind:this,onclick:this._showMoreResultsClick,onkeydown:this._showMoreResultsClick},this.showMoreResultsOpen?e.hideMoreResults:e.showMoreResults))}renderMoreResultsHeader(e,t){return(0,Q.u)("div",{key:`esri-search-result-renderer__header-${t}`,class:le},e)}renderMoreResultsList(e){const{results:t}=e,s=t.length,r=!!s,i=this.viewModel?.selectedResult,o=1===s&&t[0]===i,n=this._getSourceName(e.source,e.sourceIndex),l=this.viewModel?.results.length>1&&!o?this.renderMoreResultsHeader(n,e.sourceIndex):null,a=r&&t.map(((e,t)=>this.renderMoreResultsListItem(e,t))),u=r&&!o?(0,Q.u)("ul",{key:`esri-search-result-renderer__list-${e.sourceIndex}`},a):null;return r?(0,Q.u)("div",{key:`esri-search-result-renderer__results-${e.sourceIndex}`},l,u):null}renderMoreResultsListItem(e,t){return e!==this.get("viewModel.selectedResult")?(0,Q.u)("li",{key:`esri-search-result-renderer__list-item-${t}`},(0,Q.u)("a",{class:se,href:"#",tabindex:"0",bind:this,"data-result":e,onclick:this._selectResultClick,onkeydown:this._selectResultClick},e.name)):null}_showMoreResultsClick(e){e.preventDefault(),this.showMoreResultsOpen=!this.showMoreResultsOpen;const t=this.get("viewModel.view.popup");t&&t.reposition()}_selectResultClick(e){e.preventDefault();const t=e.currentTarget["data-result"];this.viewModel&&this.viewModel.select(t)}_getSourceName(e,t){return t===H.ALL_INDEX?this.messages.all:e.name}};(0,r._)([(0,u.Cb)(),(0,Y.H)("esri/widgets/Search/t9n/Search")],ae.prototype,"messages",void 0),(0,r._)([(0,u.Cb)()],ae.prototype,"showMoreResultsOpen",void 0),(0,r._)([(0,u.Cb)()],ae.prototype,"viewModel",void 0),(0,r._)([(0,X.h)()],ae.prototype,"_showMoreResultsClick",null),(0,r._)([(0,X.h)()],ae.prototype,"_selectResultClick",null),ae=(0,r._)([(0,c.j)("esri.widgets.Search.SearchResultRenderer")],ae);const ue=ae;var ce=s(93531),de=s(8704);const he="esri-search esri-widget",pe="esri-widget__loader",ge="esri-widget__loader-text",me="esri-widget__loader-animation",ye="esri-input",fe="esri-search--multiple-sources",_e="esri-search--loading",ve="esri-search--searching",be="esri-search--show-suggestions",Se="esri-search--sources",we="esri-search--warning",xe="esri-search__container",Ce="esri-search__input",Ie="esri-search__input-container",Me="esri-search__form",Re="esri-search__submit-button",Fe="esri-search__sources-button",Te="esri-search__clear-button",Ee="esri-search__source-name",Le="esri-search__suggestions-menu",Ne="esri-search__suggestions-list",je="esri-search__suggestions-list--current-location",Ze="esri-search__sources-menu",Ae="esri-search__source",ke="esri-search__warning-menu",Oe="esri-search__warning-body",Pe="esri-search__warning-header",De="esri-search__warning-text",$e="esri-search__no-value-text",Be="esri-widget--disabled",Ge="esri-widget--button",Ve="esri-icon-font-fallback-text",Je="esri-icon-locate-circled",Ue="esri-menu",Ke="esri-menu__list",qe="esri-menu__list-item",ze="esri-menu__list-item--active",We="esri-menu__list-item--focus",He="esri-menu__header",Xe="esri-icon-search",Ye="esri-icon-down-arrow esri-search__sources-button--down",Qe="esri-icon-up-arrow esri-search__sources-button--up",et="esri-icon-close",tt="esri-icon-notice-triangle",st="esri-icon-search",rt="esri-disabled",it=/<[a-z/][\s\S]*>/i;let ot=class extends d.Z{constructor(e,t){super(e,t),this._activeMenuItemIndex=-1,this._handles=new o.Z,this._inputNode=null,this._menuItemCount=0,this._sourceMenuButtonNode=null,this._sourceListNode=null,this._suggestionListNode=null,this._searchResultRenderer=new ue,this._locateFailed=null,this._container=null,this.activeMenu="none",this.activeSource=null,this.activeSourceIndex=null,this.allPlaceholder=null,this.allSources=null,this.autoNavigate=null,this.autoSelect=null,this.defaultSources=null,this.disabled=!1,this.goToOverride=null,this.iconClass=st,this.includeDefaultSources=null,this.label=void 0,this.locationEnabled=null,this.maxResults=null,this.maxSuggestions=null,this.messages=null,this.messagesCommon=null,this.minSuggestCharacters=null,this.popupEnabled=null,this.popupTemplate=null,this.portal=null,this.resultGraphic=null,this.resultGraphicEnabled=null,this.results=null,this.searchAllEnabled=null,this.searchTerm=null,this.selectedResult=null,this.sources=null,this.suggestions=null,this.suggestionsEnabled=null,this.view=null,this.viewModel=new H,this._clearActiveMenu=()=>{this.activeMenu="none"},this._removeActiveMenu=e=>{const t=e.relatedTarget;t&&this._container?.contains(t)||this._clearActiveMenu()},this.own([(0,n.YP)((()=>this.searchTerm),(e=>{(e&&"warning"===this.activeMenu||!e&&!this.get("viewModel.selectedSuggestion.location"))&&this._clearActiveMenu()})),(0,n.on)((()=>this.viewModel?.allSources),"change",(()=>this._watchSourceChanges())),(0,n.YP)((()=>this.activeMenu),(()=>this._resetActiveMenuItemIndex()),n.nn),(0,n.YP)((()=>this.viewModel?.defaultPopupTemplate),(e=>{e&&(e.content=this._renderSearchResultsContent.bind(this))}),n.nn)])}destroy(){this._handles.destroy(),this._handles=null,this._cancelSuggest(),this._cancelSearch(),this._searchResultRenderer&&(this._searchResultRenderer.viewModel=null,this._searchResultRenderer.destroy(),this._searchResultRenderer=null)}get displayedSearchTerm(){return`${this.viewModel.searchTerm}`.trim()}get inputId(){return this._buildId("input")}get suggestionsMenuId(){return this._buildId("suggest-menu")}get sourceMenuId(){return this._buildId("source-menu")}get sourceMenuButtonId(){return this._buildId("source-menu-button")}clear(){}focus(){this._inputNode?.focus(),this.emit("search-focus")}blur(){this._inputNode?.blur(),this.emit("search-blur")}search(e){this._clearActiveMenu(),this._cancelSuggest(),this._cancelSearch();const t=new AbortController,{signal:s}=t;return this._searchController=t,this.viewModel.search(e,{signal:s}).catch((e=>{if(this._searchController===t)return this._clearActiveMenu(),this._searchController=null,e})).then((e=>{if(this._searchController===t)return this.activeMenu=e.numResults?"none":"warning",this._searchController=null,e}))}suggest(e){this._cancelSuggest();const t=new AbortController,{signal:s}=t;return this._suggestController=t,this.viewModel.suggest(e,null,{signal:s}).then((e=>{if(this._suggestController===t)return this._suggestController=null,e.numResults&&this._openSuggestionMenu(),this._scrollToTopSuggestion(),e})).catch((()=>{if(this._suggestController===t)return this._suggestController=null,null}))}render(){const{state:e}=this.viewModel,t={[rt]:"disabled"===e,[Be]:this.disabled};return(0,Q.u)("div",{class:this.classes(he,t)},"loading"===e?this.renderLoader():this.renderContainer())}renderSubmitButton(){const{messages:e,disabled:t}=this;return(0,Q.u)("button",{"aria-label":e.searchButtonTitle,bind:this,disabled:t,class:this.classes(Re,Ge),key:"esri-search__submit-button",onclick:this._handleSearchButtonClick,title:e.searchButtonTitle,type:"button"},(0,Q.u)("span",{"aria-hidden":"true",class:Xe}))}renderWarningMenu(){return(0,Q.u)("div",{key:"esri-search__error-menu",class:this.classes(Ue,ke)},(0,Q.u)("div",{class:Oe},this.renderWarning()))}renderSourceMenuButton(){const{messages:e,activeMenu:t,sourceMenuId:s,sourceMenuButtonId:r,disabled:i}=this,{activeSourceIndex:o,allSources:n}=this.viewModel;return n.length>1?(0,Q.u)("button",{id:r,key:"esri-search__source-menu-button",bind:this,disabled:i,"aria-label":e.searchIn,title:e.searchIn,"aria-haspopup":"true","aria-expanded":("source"===t).toString(),"aria-controls":s,class:this.classes(Fe,Ge),onclick:this._handleSourcesMenuToggleClick,onfocus:this._handleSourcesMenuToggleFocus,afterCreate:ee.Yo,"data-node-ref":"_sourceMenuButtonNode",type:"button"},(0,Q.u)("span",{"aria-hidden":"true",class:Ye}),(0,Q.u)("span",{"aria-hidden":"true",class:Qe}),(0,Q.u)("span",{class:Ee},this._getSourceName(o))):null}renderSourcesList(){const{allSources:e,searchAllEnabled:t}=this.viewModel,{_activeMenuItemIndex:s,activeMenu:r,sourceMenuId:i,sourceMenuButtonId:o}=this,n="source"===r&&s>-1?this._buildId("source-item",s):null;return e.length>1?(0,Q.u)("ul",{"aria-activedescendant":n,"aria-labelledby":o,id:i,role:"menu",bind:this,afterCreate:ee.Yo,onkeydown:this._handleSourceMenuKeydown,onkeyup:this._handleSourceMenuKeyup,"data-node-ref":"_sourceListNode",class:Ke,tabIndex:-1},t?this.renderSource(H.ALL_INDEX):null,e.map(((e,t)=>this.renderSource(t))).toArray()):null}renderSourcesMenu(){const{allSources:e}=this.viewModel;return e.length>1?(0,Q.u)("div",{key:"esri-search__source-menu",class:this.classes(Ue,Ze)},this.renderSourcesList()):null}renderLoader(){const{messages:e,messagesCommon:t,disabled:s}=this;return(0,Q.u)("div",{class:pe,key:"base-loader",tabIndex:s?-1:null},(0,Q.u)("span",{"aria-hidden":"true",class:me}),(0,Q.u)("span",{class:Ve},e.searchButtonTitle),(0,Q.u)("span",{class:ge},t.loading))}renderContainer(){const{allSources:e,state:t}=this.viewModel,{activeMenu:s}=this,r={[fe]:e.length>1,[_e]:"loading"===t,[ve]:"searching"===t,[we]:"warning"===s,[Se]:"source"===s,[be]:"suggestion"===s};return(0,Q.u)("div",{tabIndex:-1,afterCreate:e=>{this._container=e,e.addEventListener("focusout",this._removeActiveMenu)},afterRemoved:e=>{e.removeEventListener("focusout",this._removeActiveMenu)},class:this.classes(r,xe),key:"base-container"},this.renderSourceMenuButton(),this.renderSourcesMenu(),this.renderInputContainer(),this.renderSubmitButton(),this.renderWarningMenu())}renderClearButton(){return this.searchTerm?(0,Q.u)("button",{bind:this,disabled:this.disabled,class:this.classes(Te,Ge),key:"esri-search__clear-button",onclick:this._handleClearButtonClick,onfocus:this._clearActiveMenu,title:this.messages.clearButtonTitle,type:"button"},(0,Q.u)("span",{"aria-hidden":"true",class:et})):null}renderLocationGroup(){const{messages:e,locationEnabled:t,displayedSearchTerm:s}=this,r=t&&!s,i="suggestion"===this.activeMenu&&0===this._activeMenuItemIndex;return r?(0,Q.u)("ul",{role:"group",key:"esri-search__suggestion-list-current-location",class:this.classes(Ke,Ne,je)},(0,Q.u)("li",{bind:this,"data-current-location-item":!0,onclick:this._handleUseCurrentLocationClick,id:this._buildId("suggestion-item",0),"aria-selected":("suggestion"===this.activeMenu&&0===this._activeMenuItemIndex).toString(),role:"option",class:this.classes(qe,i?We:null)},(0,Q.u)("span",{"aria-hidden":"true",class:Je})," ",e.useCurrentLocation)):null}renderInput(){const{activeMenu:e,locationEnabled:t,displayedSearchTerm:s,messages:r,suggestionsMenuId:i,inputId:o,_activeMenuItemIndex:n,disabled:l}=this,{maxInputLength:a,placeholder:u,searchTerm:c,suggestionCount:d}=this.viewModel,h=!((!t||s)&&!d),p="suggestion"===e&&n>-1?this._buildId("suggestion-item",n):null;return(0,Q.u)("input",{"aria-activedescendant":p,"aria-autocomplete":"list","aria-expanded":(h&&"suggestion"===e).toString(),"aria-controls":h?i:null,"aria-haspopup":"listbox","aria-label":r.searchButtonTitle,bind:this,disabled:l,placeholder:u,maxlength:a,autocomplete:"off",type:"text",class:this.classes(ye,Ce),value:c,id:o,role:"combobox",onkeyup:this._handleInputKeyup,onclick:this._openSuggestionMenu,oninput:this._handleInputPaste,onpaste:this._handleInputPaste,afterCreate:ee.Yo,"data-node-ref":"_inputNode",onfocus:this.focus,onblur:this.blur,title:c?"":u})}renderForm(){return(0,Q.u)("form",{key:"esri-search__form",bind:this,disabled:this.disabled,class:Me,onsubmit:this._formSubmit,role:"search"},this.renderInput())}renderSuggestList(e){const{sourceIndex:t}=e,s=e.results.length,r=e.results;return s?(0,Q.u)("ul",{role:"group",key:`esri-search__suggestion-list-${t}`,class:this.classes(Ke,Ne)},r.map((e=>this.renderSuggestion(e,this._menuItemCount++)))):null}renderSuggestionsGroup(){const{suggestions:e}=this.viewModel;return e?e.map((e=>[this.renderSuggestionHeader(e),this.renderSuggestList(e)])):null}renderSuggestionsMenu(){const{displayedSearchTerm:e,locationEnabled:t,suggestionsMenuId:s,inputId:r}=this,{suggestionCount:i}=this.viewModel,o=t&&!e||i;return this._menuItemCount=0,o?(0,Q.u)("div",{id:s,key:"esri-search__suggestions-menu",class:this.classes(Ue,Le),role:"listbox","aria-labelledby":r,bind:this,afterCreate:ee.Yo,"data-node-ref":"_suggestionListNode"},this.renderLocationGroup(),this.renderSuggestionsGroup()):null}renderInputContainer(){return(0,Q.u)("div",{key:"esri-search__input-container",class:Ie},this.renderForm(),this.renderSuggestionsMenu(),this.renderClearButton())}renderSuggestionHeader(e){const{allSources:t,activeSourceIndex:s}=this.viewModel,{sourceIndex:r}=e,i=e.results.length,o=t.length>1&&s===H.ALL_INDEX;return i&&o?(0,Q.u)("div",{key:`esri-search__suggestion-header-${r}`,class:He},this._getSourceName(r)):null}renderSuggestion(e,t){const{_activeMenuItemIndex:s,messages:r}=this,{searchTerm:i}=this.viewModel;if(i){const{text:o}=e,n=o||r.untitledResult,l=it.test(n),a=[];if(l)a.push((0,Q.u)("div",{innerHTML:n}));else{const e=this._splitResult(n,i),t=i.toLowerCase();e.forEach(((e,s)=>{e&&e.length&&(e.toLowerCase()===t?a.push((0,Q.u)("strong",{key:s},e)):a.push(e))}))}const u="suggestion"===this.activeMenu&&s===t;return(0,Q.u)("li",{bind:this,id:this._buildId("suggestion-item",t),"aria-selected":("suggestion"===this.activeMenu&&this._activeMenuItemIndex===t).toString(),onclick:this._handleSuggestionClick,key:`esri-search__suggestion_${t}`,"data-suggestion":e,role:"option",class:this.classes(qe,u?We:null)},a)}}renderSource(e){const{activeSourceIndex:t,searchAllEnabled:s}=this.viewModel,r={[ze]:e===t,[We]:"source"===this.activeMenu&&e===(s?this._activeMenuItemIndex-1:this._activeMenuItemIndex)},i=s?e+1:e;return(0,Q.u)("li",{bind:this,key:`esri-search__source-${e}`,id:this._buildId("source-item",i),"aria-checked":(e===t).toString(),onclick:this._handleSourceClick,"data-source-index":e,role:"menuitemradio",class:this.classes(Ae,qe,r)},this._getSourceName(e))}renderNoResultsWarning(e){const{messages:t}=this,s=e?(0,de.n)(t.noResultsFoundForValue,{value:`"${e}"`}):t.noResultsFound;return(0,Q.u)("div",{key:"esri-search__no_results"},(0,Q.u)("div",{class:Pe},t.noResults),(0,Q.u)("div",{class:De},s))}renderEmptySearchWarning(){const{messages:e}=this;return(0,Q.u)("div",{key:"esri-search__empty-search"},(0,Q.u)("span",{"aria-hidden":"true",class:tt}),(0,Q.u)("span",{class:$e},e.emptyValue))}renderLocateWarning(){const{messages:e}=this;return(0,Q.u)("div",{key:"esri-search__locate-error"},(0,Q.u)("span",{"aria-hidden":"true",class:tt}),(0,Q.u)("span",{class:$e},e.locateError))}renderWarning(){const{displayedSearchTerm:e,_locateFailed:t}=this,{viewModel:s}=this;return t?this.renderLocateWarning():s.selectedSuggestion?.location||e?this.renderNoResultsWarning(e):this.renderEmptySearchWarning()}_resetActiveMenuItemIndex(){this._activeMenuItemIndex=-1}_buildId(e,t){return`${this.id}-${e}${void 0===t?"":`-${t}`}`}_watchSourceChanges(){const{_handles:e,viewModel:{allSources:t}}=this,s="sources";e.remove(s),t.forEach((t=>e.add((0,n.YP)((()=>t.name),(()=>this.scheduleRender())),s)))}_handleSourcesMenuToggleFocus(){"source"!==this.activeMenu&&this._clearActiveMenu()}_handleSourcesMenuToggleClick(){const e="source"===this.activeMenu;this.activeMenu=e?"none":"source",this.renderNow(),"source"===this.activeMenu&&this._sourceListNode?.focus()}_handleClearButtonClick(){this.viewModel.clear(),this._focus()}_handleSearchButtonClick(){this.search()}_handleSuggestionClick(e){const t=e.currentTarget["data-suggestion"];t&&(this._focus(),this.search(t))}_handleUseCurrentLocationClick(){this._useCurrentLocation()}_useCurrentLocation(){this._focus("none"),this._cancelSuggest(),this._cancelSearch();const e=new AbortController,{signal:t}=e;this._searchController=e,this.viewModel.searchNearby({signal:t}).then((e=>{this.activeMenu=e.numResults?"none":"warning"})).catch((()=>{this._locateFailed=!0,this.activeMenu="warning"})).then((()=>{this._searchController=null}))}_handleSourceClick(e){this._setSourceFromMenuItem(e.currentTarget)}_setSourceFromMenuItem(e){if(!e)return;const t=e["data-source-index"];this.viewModel.activeSourceIndex=t,this._clearActiveMenu(),this._sourceMenuButtonNode?.focus()}_cancelSuggest(){this._suggestController&&(this._suggestController.abort(),this._suggestController=null)}_cancelSearch(){this._searchController&&(this._searchController.abort(),this._searchController=null),this._locateFailed=!1}_handleInputKeyup(e){const t=(0,i.kK)(e);if(e.ctrlKey||e.metaKey||"Copy"===t||"ArrowLeft"===t||"ArrowRight"===t||"Shift"===t)return;if("Tab"===t||"Escape"===t||e.shiftKey&&"Tab"===t)return this._cancelSuggest(),void("Escape"===t&&this._clearActiveMenu());const s="Home"===t||"End"===t||"ArrowUp"===t||"ArrowDown"===t;if("Enter"===t&&this._activeMenuItemIndex<0)return void this._cancelSuggest();const r=this._suggestionListNode?.getElementsByTagName("li");if(r?.length){if("suggestion"!==this.activeMenu&&this._openSuggestionMenu(),s)return e.preventDefault(),this._cancelSuggest(),void this._handleItemNavigation(t,r,this._suggestionListNode);const i=r[this._activeMenuItemIndex];if("Enter"===t&&i){const e=i["data-suggestion"];return void(e?(this._focus(),this.search(e)):i["data-current-location-item"]&&this._useCurrentLocation())}}this.viewModel.searchTerm&&this.suggest()}_handleItemNavigation(e,t,s){const r=this._activeMenuItemIndex;"Home"===e&&(this._activeMenuItemIndex=0),"End"===e&&(this._activeMenuItemIndex=t.length-1),"ArrowUp"===e&&(this._activeMenuItemIndex=this._activeMenuItemIndex<=0?t.length-1:this._activeMenuItemIndex-1),"ArrowDown"===e&&(this._activeMenuItemIndex=this._activeMenuItemIndex===t.length-1?0:this._activeMenuItemIndex+1),r!==this._activeMenuItemIndex&&(0,ee._q)(t[this._activeMenuItemIndex],s)}_scrollToTopSuggestion(){this._suggestionListNode&&(this._suggestionListNode.scrollTop=0)}_openSuggestionMenu(){this.activeMenu="suggestion"}_handleInputPaste(e){const t=e.target;this.viewModel.searchTerm!==t.value&&(this.viewModel.searchTerm=t.value),this.viewModel.searchTerm&&this.suggest()}_handleSourceMenuKeydown(e){const t=(0,i.kK)(e);if((0,ee.pf)(t)){e.preventDefault();const t=this._sourceListNode.getElementsByTagName("li")[this._activeMenuItemIndex];this._setSourceFromMenuItem(t)}else"ArrowUp"!==t&&"ArrowDown"!==t&&"End"!==t&&"Home"!==t||e.preventDefault()}_handleSourceMenuKeyup(e){const t=(0,i.kK)(e),s="ArrowUp"===t||"ArrowDown"===t||"End"===t||"Home"===t;if(s&&e.preventDefault(),"Escape"===t)return this._clearActiveMenu(),void this._sourceMenuButtonNode?.focus();const r=this._sourceListNode?.getElementsByTagName("li");return r&&0!==r.length&&s?("source"!==this.activeMenu&&(this.activeMenu="source"),void this._handleItemNavigation(t,r,this._sourceListNode.parentElement)):void 0}_focus(e){this.focus(),e&&(this.activeMenu=e)}_formSubmit(e){e.preventDefault(),-1===this._activeMenuItemIndex&&this.search()}_getSourceName(e){const{messages:t}=this,s=this.viewModel,{allSources:r}=s,i=r.getItemAt(e);return e===H.ALL_INDEX?t.all:i&&i.name||t.untitledSource}_splitResult(e,t){const s=(0,l.Qs)(t);return e.replace(new RegExp(`(^|)(${s})(|$)`,"ig"),"$1|$2|$3").split("|")}_renderSearchResultsContent(){return this._searchResultRenderer.showMoreResultsOpen=!1,this._searchResultRenderer.viewModel=this.viewModel,this._searchResultRenderer}};(0,r._)([(0,u.Cb)()],ot.prototype,"_activeMenuItemIndex",void 0),(0,r._)([(0,u.Cb)()],ot.prototype,"displayedSearchTerm",null),(0,r._)([(0,u.Cb)({readOnly:!0})],ot.prototype,"inputId",null),(0,r._)([(0,u.Cb)({readOnly:!0})],ot.prototype,"suggestionsMenuId",null),(0,r._)([(0,u.Cb)({readOnly:!0})],ot.prototype,"sourceMenuId",null),(0,r._)([(0,u.Cb)({readOnly:!0})],ot.prototype,"sourceMenuButtonId",null),(0,r._)([(0,u.Cb)()],ot.prototype,"activeMenu",void 0),(0,r._)([(0,a.B)("viewModel.activeSource")],ot.prototype,"activeSource",void 0),(0,r._)([(0,a.B)("viewModel.activeSourceIndex")],ot.prototype,"activeSourceIndex",void 0),(0,r._)([(0,a.B)("viewModel.allPlaceholder")],ot.prototype,"allPlaceholder",void 0),(0,r._)([(0,a.B)("viewModel.allSources")],ot.prototype,"allSources",void 0),(0,r._)([(0,a.B)("viewModel.autoNavigate")],ot.prototype,"autoNavigate",void 0),(0,r._)([(0,a.B)("viewModel.autoSelect")],ot.prototype,"autoSelect",void 0),(0,r._)([(0,a.B)("viewModel.defaultSources")],ot.prototype,"defaultSources",void 0),(0,r._)([(0,u.Cb)()],ot.prototype,"disabled",void 0),(0,r._)([(0,a.B)("viewModel.goToOverride")],ot.prototype,"goToOverride",void 0),(0,r._)([(0,u.Cb)()],ot.prototype,"iconClass",void 0),(0,r._)([(0,a.B)("viewModel.includeDefaultSources")],ot.prototype,"includeDefaultSources",void 0),(0,r._)([(0,u.Cb)({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],ot.prototype,"label",void 0),(0,r._)([(0,a.B)("viewModel.locationEnabled")],ot.prototype,"locationEnabled",void 0),(0,r._)([(0,a.B)("viewModel.maxResults")],ot.prototype,"maxResults",void 0),(0,r._)([(0,a.B)("viewModel.maxSuggestions")],ot.prototype,"maxSuggestions",void 0),(0,r._)([(0,u.Cb)(),(0,Y.H)("esri/widgets/Search/t9n/Search")],ot.prototype,"messages",void 0),(0,r._)([(0,u.Cb)(),(0,Y.H)("esri/t9n/common")],ot.prototype,"messagesCommon",void 0),(0,r._)([(0,a.B)("viewModel.minSuggestCharacters")],ot.prototype,"minSuggestCharacters",void 0),(0,r._)([(0,a.B)("viewModel.popupEnabled")],ot.prototype,"popupEnabled",void 0),(0,r._)([(0,a.B)("viewModel.popupTemplate")],ot.prototype,"popupTemplate",void 0),(0,r._)([(0,a.B)("viewModel.portal")],ot.prototype,"portal",void 0),(0,r._)([(0,a.B)("viewModel.resultGraphic")],ot.prototype,"resultGraphic",void 0),(0,r._)([(0,a.B)("viewModel.resultGraphicEnabled")],ot.prototype,"resultGraphicEnabled",void 0),(0,r._)([(0,a.B)("viewModel.results")],ot.prototype,"results",void 0),(0,r._)([(0,a.B)("viewModel.searchAllEnabled")],ot.prototype,"searchAllEnabled",void 0),(0,r._)([(0,a.B)("viewModel.searchTerm")],ot.prototype,"searchTerm",void 0),(0,r._)([(0,a.B)("viewModel.selectedResult")],ot.prototype,"selectedResult",void 0),(0,r._)([(0,a.B)("viewModel.sources")],ot.prototype,"sources",void 0),(0,r._)([(0,a.B)("viewModel.suggestions")],ot.prototype,"suggestions",void 0),(0,r._)([(0,a.B)("viewModel.suggestionsEnabled")],ot.prototype,"suggestionsEnabled",void 0),(0,r._)([(0,a.B)("viewModel.view")],ot.prototype,"view",void 0),(0,r._)([(0,ce.s)(["search-complete","search-clear","search-start","select-result","suggest-start","suggest-complete"]),(0,u.Cb)({type:H})],ot.prototype,"viewModel",void 0),(0,r._)([(0,a.B)("viewModel.clear")],ot.prototype,"clear",null),ot=(0,r._)([(0,c.j)("esri.widgets.Search")],ot);const nt=ot},20804:(e,t,s)=>{s.d(t,{Z:()=>k});var r=s(27366),i=s(84652),o=s(49861),n=(s(25243),s(69912)),l=s(91773),a=(s(59166),s(10064)),u=s(32718),c=s(92026),d=s(68860),h=s(80885),p=s(38832),g=s(8704),m=s(76969);const y=/https?:\/\/services.*\.arcgis\.com/i,f=/(?:\{([^}]+)\})/g,_=u.Z.getLogger("esri.widgets.Search.support.layerSearchUtils");function v(e,t){const{exactMatch:s=!1,location:r,maxResults:i,spatialReference:o,source:n,sourceIndex:l,suggestResult:u,view:c}=e,{layer:h,filter:p,zoomScale:g}=n,m=c&&c.scale,y=S(n,c),f=t&&t.signal;return x(h).then((()=>{const e=h.popupTemplate;return e?e.getRequiredFields(h.fieldsIndex):null})).then((e=>{const{objectIdField:t,returnZ:v}=h,b=I(n);if(!R(h,b))throw _.error("invalid-field: displayField is invalid."),new a.Z("getResults():invalid-field","displayField is invalid.");const S=e&&e.length?e:[b],x=n.outFields||S,T=w(x);if(x.includes(t)||T||x.push(t),h.floorInfo?.floorField&&x.push(h.floorInfo.floorField),!T&&!M(h,x))throw _.error("invalid-field: outField is invalid."),new a.Z("getResults():invalid-field","outField is invalid.");const E=h.createQuery(),{orderByFields:N}=n;if(N&&(E.orderByFields=N),o){E.outSpatialReference=o;const e=1/(0,d.c9)(o);e&&(E.maxAllowableOffset=e)}const Z="mesh"===h.geometryType||"multipatch"===h.geometryType,A=h.capabilities?.data?.supportsZ&&!Z;if(E.returnZ=A&&!1!==v,E.returnGeometry=!0,E.multipatchOption=Z?"xyFootprint":null,x&&(E.outFields=x),r)E.geometry=r;else if(u.key)E.objectIds=[u.key];else{const e=n.searchFields||[b];if(!M(h,e))throw _.error("invalid-field: search field is invalid."),new a.Z("getResults():invalid-field","search field is invalid.");if(C(h)&&(E.num=i),y&&(E.geometry=y),!u.text.trim())return[];const{prefix:t="",suffix:r=""}=n,o=L({searchTerm:F(`${t}${u.text}${r}`),layer:h,searchFields:e,filter:p,exactMatch:s,type:"search"});if(!o)return[];E.where=o}return h.queryFeatures(E,{signal:f}).then((e=>function(e,t,s,r,i,o,n){return e.features.map((e=>j(e,t,s,r,i,o,n)))}(e,c,n,l,b,m,g)))}))}function b(e,t){const{source:s,spatialReference:r,view:i,suggestTerm:o,maxSuggestions:n,sourceIndex:l,exactMatch:u}=e,{layer:c,filter:d}=s,h=t&&t.signal,p=S(s,i);return x(c).then((()=>{if(!C(c))return[];const e=I(s),t=s.searchFields||[e],i=[];s.suggestionTemplate?s.suggestionTemplate.replace(f,((e,t)=>(i.push(t),e))):i.push(e);const g=w(i);i.includes(c.objectIdField)||g||i.push(c.objectIdField);const m=R(c,e),y=g||M(c,i),v=M(c,t);if(!m)throw _.error("invalid-field: displayField is invalid."),new a.Z("getSuggestions():invalid-field","displayField is invalid.");if(!y)throw _.error("invalid-field: outField is invalid."),new a.Z("getSuggestions():invalid-field","outField is invalid.");if(!v)throw _.error("invalid-field: search field is invalid."),new a.Z("getSuggestions():invalid-field","search field is invalid.");const b=c.createQuery(),{orderByFields:S}=s;if(S&&(b.orderByFields=S),b.outSpatialReference=r,b.returnGeometry=!1,b.num=n,b.outFields=i,p&&(b.geometry=p),!o.trim())return[];const{prefix:x="",suffix:T=""}=s,E=L({searchTerm:F(`${x}${o}${T}`),layer:c,searchFields:t,filter:d,exactMatch:u,type:"suggest"});return E?(b.where=E,c.queryFeatures(b,{signal:h}).then((t=>function(e,t,s,r){return e.features.map((e=>function(e,t,s,r){const i=e.sourceLayer,{attributes:o}=e,{objectIdField:n}=i,l=o[n];return{text:N(e,t.suggestionTemplate,r),key:l,sourceIndex:s}}(e,t,s,r)))}(t,s,l,e)))):[]}))}function S(e,t){const{filter:s,withinViewEnabled:r}=e,i=t&&t.extent;return s&&s.geometry||(r&&i?i:void 0)}function w(e){return e&&e.includes("*")}async function x(e){e&&await e.load()}function C(e){return e?.capabilities?.query?.supportsPagination??!1}function I(e){return e.displayField||e.layer.displayField||function(e){return e?.fieldsIndex?.fields?.find((e=>"string"===e.type))?.name??""}(e.layer)}function M(e,t){return!(!e||!t)&&t.every((t=>R(e,t)))}function R(e,t){return!!e.getField(t)}function F(e){return e.replace(/\'/g,"''")}function T(e,t){const s=t&&t.where;return s?`(${e}) AND (${s})`:e}function E(e){let{currentTerm:t,field:s,filter:r,exactMatch:i,url:o,type:n}=e;const l=s.type,a=s.name;if("string"===l||"date"===l||"global-id"===l){const e=y.test(o),s=e&&function(e){for(let t=0;t<e.length;t++)if(e.charCodeAt(t)>255)return!0;return!1}(t)?"N":"";if(i&&"search"===n)return T(`${a} = ${s}'${t}'`,r);const l=e?a:`UPPER(${a})`,u=e?t:t.toUpperCase();return T(`${l} LIKE ${s}${i?`'${u}%'`:`'%${u}%'`}`,r)}if("oid"===l||"small-integer"===l||"integer"===l||"single"===l||"double"===l){const e=Number(t);return isNaN(e)?null:T(`${a} = ${e}`,r)}return T(`${a} = ${t}`,r)}function L(e){let{searchTerm:t,layer:s,searchFields:r,filter:i,exactMatch:o,type:n}=e;const{definitionExpression:l,url:a}=s;let u="";return t&&r&&r.forEach((e=>{const r=s.getField(e),l="function"==typeof s.getFieldDomain&&s.getFieldDomain(e),c=(l&&"coded-value"===l.type?function(e,t,s){let r=null;const{codedValues:i}=e;return i&&i.some((e=>{const i=e.name,o=s?i:i.toLowerCase();return(s?t:t.toLowerCase())===o&&(r=e.code.toString(),!0)})),r}(l,t,o):null)||t||null;if(null!==c){const e=E({currentTerm:c,field:r,filter:i,exactMatch:o,url:a,type:n});e&&(u+=function(e,t){return e?` OR (${t})`:`(${t})`}(u,e))}})),l?`(${l}) AND (${u})`:u}function N(e,t,s){const r=e.sourceLayer,{attributes:i}=e,o="function"==typeof r.getFieldDomain&&r.getFieldDomain(s);if(t)return(0,g.n)(t,i);if(s&&i){const e=r.getField(s),t=function(e,t){return e[Object.keys(e).find((e=>e.toLowerCase()===t.toLowerCase()))]}(i,s);return null==t?"":o&&"coded-value"===o.type?function(e,t){let s=null;const{codedValues:r}=e;return r&&r.length&&r.some((e=>e.code===t&&(s=e.name,!0))),s}(o,t):"date"===e?.type?(0,m.p6)(new Date(t)):"number"==typeof t?t.toString():"string"!=typeof t?"":t.trim()}return""}function j(e,t,s,r,o,n,l){const a=e.clone(),u=e.sourceLayer,d=u&&u.objectIdField,g=d&&e.attributes[d],m=N(e,s.searchTemplate,o),y=(0,p.vb)(a.geometry,t,n),f="number"==typeof l?(0,p.LT)((0,i.d9)(y),t,l):y,_=e.clone();return(0,c.pC)(f)&&(_.geometry=h.Z.fromExtent(f)),{extent:f,target:_,feature:a,key:g,name:m,sourceIndex:r}}var Z;let A=Z=class extends l.Z{constructor(e){super(e),this.displayField=null,this.exactMatch=null,this.orderByFields=null,this.searchFields=null,this.searchTemplate=null,this.suggestionTemplate=null,this.getResults=(e,t)=>v({source:this,...e},t),this.getSuggestions=(e,t)=>b({source:this,...e},t)}set layer(e){this._set("layer",e),e&&e.load().catch((()=>{}))}get name(){return this._getLayerTitle()||""}set name(e){void 0!==e?this._override("name",e):this._clearOverride("name")}clone(){return new Z({autoNavigate:this.autoNavigate,filter:this.filter,maxResults:this.maxResults,maxSuggestions:this.maxSuggestions,minSuggestCharacters:this.minSuggestCharacters,outFields:this.outFields?(0,i.d9)(this.outFields):null,placeholder:this.placeholder,popupEnabled:this.popupEnabled,prefix:this.prefix,resultGraphicEnabled:this.resultGraphicEnabled,resultSymbol:this.resultSymbol?this.resultSymbol.clone():null,suggestionsEnabled:this.suggestionsEnabled,suffix:this.suffix,withinViewEnabled:this.withinViewEnabled,displayField:this.displayField,exactMatch:this.exactMatch,layer:this.layer,searchFields:this.searchFields?(0,i.d9)(this.searchFields):null,suggestionTemplate:this.suggestionTemplate,zoomScale:this.zoomScale})}_getFirstStringField(){return this.layer.fieldsIndex.fields.find((e=>"string"===e.type))?.name??""}_getDisplayField(){return this.displayField||this.layer.displayField||this._getFirstStringField()}_getSearchFieldsString(){const{layer:e,searchFields:t}=this;return e.loaded?`: ${(t||[this._getDisplayField()]).map((t=>{const s=e.getField(t);return s&&s.alias||t})).join(", ")}`:""}_getLayerTitle(){const{layer:e}=this;if(!e)return;const{title:t}=e;return t?`${t}${this._getSearchFieldsString()}`:void 0}};(0,r._)([(0,o.Cb)({json:{read:{source:"field.name"},write:{target:"field.name"}}})],A.prototype,"displayField",void 0),(0,r._)([(0,o.Cb)({json:{read:{source:"field.exactMatch"},write:{target:"field.exactMatch"}}})],A.prototype,"exactMatch",void 0),(0,r._)([(0,o.Cb)({value:null})],A.prototype,"layer",null),(0,r._)([(0,o.Cb)()],A.prototype,"name",null),(0,r._)([(0,o.Cb)({type:[String],json:{write:!0}})],A.prototype,"orderByFields",void 0),(0,r._)([(0,o.Cb)()],A.prototype,"searchFields",void 0),(0,r._)([(0,o.Cb)()],A.prototype,"searchTemplate",void 0),(0,r._)([(0,o.Cb)()],A.prototype,"suggestionTemplate",void 0),A=Z=(0,r._)([(0,n.j)("esri.widgets.Search.LayerSearchSource")],A);const k=A},44443:(e,t,s)=>{s.d(t,{Z:()=>d});var r,i=s(27366),o=s(84652),n=s(49861),l=(s(25243),s(69912)),a=s(91773),u=s(86198);let c=r=class extends a.Z{constructor(e){super(e),this.apiKey=null,this.categories=null,this.countryCode=null,this.defaultZoomScale=null,this.localSearchDisabled=!1,this.locationType=null,this.name="",this.placeholder="",this.searchTemplate="",this.singleLineFieldName=null,this.suggestionsEnabled=null,this.url=null,this.zoomScale=null,this.getResults=(e,t)=>(0,u.O7)({source:this,...e},t),this.getSuggestions=(e,t)=>(0,u.vt)({source:this,...e},t)}clone(){return new r({apiKey:this.apiKey,autoNavigate:this.autoNavigate,filter:this.filter,maxResults:this.maxResults,maxSuggestions:this.maxSuggestions,minSuggestCharacters:this.minSuggestCharacters,outFields:this.outFields?(0,o.d9)(this.outFields):null,placeholder:this.placeholder,popupEnabled:this.popupEnabled,prefix:this.prefix,resultGraphicEnabled:this.resultGraphicEnabled,resultSymbol:this.resultSymbol?this.resultSymbol.clone():null,suggestionsEnabled:this.suggestionsEnabled,suffix:this.suffix,withinViewEnabled:this.withinViewEnabled,categories:this.categories?(0,o.d9)(this.categories):null,countryCode:this.countryCode,locationType:this.locationType,searchTemplate:this.searchTemplate,singleLineFieldName:this.singleLineFieldName,zoomScale:this.zoomScale})}};(0,i._)([(0,n.Cb)()],c.prototype,"apiKey",void 0),(0,i._)([(0,n.Cb)()],c.prototype,"categories",void 0),(0,i._)([(0,n.Cb)()],c.prototype,"countryCode",void 0),(0,i._)([(0,n.Cb)({json:{write:!0}})],c.prototype,"defaultZoomScale",void 0),(0,i._)([(0,n.Cb)()],c.prototype,"localSearchDisabled",void 0),(0,i._)([(0,n.Cb)()],c.prototype,"locationType",void 0),(0,i._)([(0,n.Cb)({json:{write:!0}})],c.prototype,"name",void 0),(0,i._)([(0,n.Cb)({json:{write:!0}})],c.prototype,"placeholder",void 0),(0,i._)([(0,n.Cb)()],c.prototype,"searchTemplate",void 0),(0,i._)([(0,n.Cb)({json:{write:!0}})],c.prototype,"singleLineFieldName",void 0),(0,i._)([(0,n.Cb)({json:{read:{source:"suggest"},write:{target:"suggest"}}})],c.prototype,"suggestionsEnabled",void 0),(0,i._)([(0,n.Cb)({json:{write:!0}})],c.prototype,"url",void 0),(0,i._)([(0,n.Cb)({json:{write:!0}})],c.prototype,"zoomScale",void 0),c=r=(0,i._)([(0,l.j)("esri.widgets.Search.LocatorSearchSource")],c);const d=c},91773:(e,t,s)=>{s.d(t,{Z:()=>u});var r=s(27366),i=s(79056),o=s(46784),n=s(49861),l=(s(63780),s(93169),s(25243),s(69912));let a=class extends((0,i.IG)(o.wq)){constructor(e){super(e),this.autoNavigate=null,this.filter=null,this.getResults=null,this.getSuggestions=null,this.maxResults=null,this.maxSuggestions=null,this.minSuggestCharacters=null,this.outFields=null,this.placeholder="",this.popupEnabled=null,this.popupTemplate=null,this.prefix="",this.resultGraphicEnabled=null,this.resultSymbol=null,this.suggestionsEnabled=null,this.suffix="",this.withinViewEnabled=!1,this.zoomScale=null}};(0,r._)([(0,n.Cb)()],a.prototype,"autoNavigate",void 0),(0,r._)([(0,n.Cb)()],a.prototype,"filter",void 0),(0,r._)([(0,n.Cb)()],a.prototype,"getResults",void 0),(0,r._)([(0,n.Cb)()],a.prototype,"getSuggestions",void 0),(0,r._)([(0,n.Cb)()],a.prototype,"maxResults",void 0),(0,r._)([(0,n.Cb)()],a.prototype,"maxSuggestions",void 0),(0,r._)([(0,n.Cb)()],a.prototype,"minSuggestCharacters",void 0),(0,r._)([(0,n.Cb)()],a.prototype,"outFields",void 0),(0,r._)([(0,n.Cb)()],a.prototype,"placeholder",void 0),(0,r._)([(0,n.Cb)()],a.prototype,"popupEnabled",void 0),(0,r._)([(0,n.Cb)()],a.prototype,"popupTemplate",void 0),(0,r._)([(0,n.Cb)()],a.prototype,"prefix",void 0),(0,r._)([(0,n.Cb)()],a.prototype,"resultGraphicEnabled",void 0),(0,r._)([(0,n.Cb)()],a.prototype,"resultSymbol",void 0),(0,r._)([(0,n.Cb)()],a.prototype,"suggestionsEnabled",void 0),(0,r._)([(0,n.Cb)()],a.prototype,"suffix",void 0),(0,r._)([(0,n.Cb)()],a.prototype,"withinViewEnabled",void 0),(0,r._)([(0,n.Cb)()],a.prototype,"zoomScale",void 0),a=(0,r._)([(0,l.j)("esri.widgets.Search.SearchSource")],a);const u=a},38832:(e,t,s)=>{s.d(t,{$J:()=>c,LT:()=>h,RH:()=>u,vb:()=>d});s(59486);var r=s(10064),i=s(32718),o=s(92026),n=s(82582),l=s(53866);const a=i.Z.getLogger("esri.widgets.Search.support.geometryUtils");function u(e,t){if(!t)return a.error("missing-parameter: view is missing."),Promise.reject(new r.Z("searchgeometryutils:missing-parameter","view is missing."));if(!e)return a.error("missing-parameter: point is missing."),Promise.reject(new r.Z("searchgeometryutils:missing-parameter","point is missing."));if(e.hasZ||"2d"===t.type)return Promise.resolve(e);const s=t?.map?.ground;return s&&s.layers.length?s.queryElevation(e,{cache:t.basemapTerrain?.elevationQueryCache}).then((e=>e.geometry)):Promise.resolve(e)}function c(e){if((0,o.Wi)(e))return null;switch(e.type){case"point":return e;case"extent":return e.center;case"polygon":return e.centroid;case"multipoint":return e.getPoint(0);case"polyline":return e.getPoint(0,0)}return null}function d(e,t,s){return(0,o.Wi)(e)?null:"extent"===e.type?e:"multipoint"===e.type||"polygon"===e.type||"polyline"===e.type?e.extent:"point"===e.type?p(e,t,s):void 0}function h(e,t,s){return(0,o.Wi)(e)||(0,o.Wi)(t)?null:p(e.center,t,s)}function p(e,t,s){const r=e.hasZ?e.z:void 0;return t&&t.map?(s?(0,n.D9)(t,s):t.extent).clone().centerAt(e).set({zmax:r,zmin:r}):new l.Z({xmin:e.x-.25,ymin:e.y-.25,xmax:e.x+.25,ymax:e.y+.25,spatialReference:e.spatialReference,zmin:r,zmax:r})}},86198:(e,t,s)=>{s.d(t,{O7:()=>g,Y4:()=>f,b_:()=>_,j9:()=>v,uE:()=>b,vt:()=>y});var r=s(52639),i=s(92026),o=s(80885),n=s(83589),l=s(88736),a=s(1360),u=s(57571),c=s(50701),d=s(13189),h=s(38832);const p="Single Line Input";function g(e,t){return e.location?function(e,t){const{source:s,spatialReference:r,location:i,sourceIndex:o,view:n}=e,{apiKey:a,url:u,zoomScale:d,defaultZoomScale:h}=s,p=n&&n.scale,g=t&&t.signal,m=new c.Z;return m.location=i,a&&(m.apiKey=a),r&&(m.outSpatialReference=r),(0,l.w)(u,m,{signal:g}).then((e=>w([e],{sourceIndex:o,scale:p,view:n,zoomScale:d,defaultZoomScale:h}))).catch((()=>[]))}(e,t):function(e,t){const{source:s,suggestResult:r,spatialReference:o,view:l,maxResults:a,sourceIndex:c}=e,d=s&&s.zoomScale,h=s&&s.defaultZoomScale;if(!r.text.trim())return Promise.resolve(null);const g=!r.key&&s.prefix?s.prefix:"",y=!r.key&&s.suffix?s.suffix:"",f=`${g}${r.text}${y}`,_=new u.Z,{apiKey:v,url:b}=s,x=l&&l.scale,C=S(s,l),I=t&&t.signal;if(v&&(_.apiKey=v),!b)return Promise.resolve(null);s.categories&&(_.categories=s.categories),s.locationType&&(_.locationType=s.locationType),o&&(_.outSpatialReference=o);const M=m(l,s);M&&(_.location=M),_.maxLocations=a,C&&(_.searchExtent=(0,i.Wg)(C)),s.countryCode&&(_.countryCode=s.countryCode);const{key:R}=r,F=`${R}`;return R&&(_.magicKey=F),_.address={},_.address[s.singleLineFieldName||p]=f,s.outFields&&(_.outFields=s.outFields),(0,n.h)(b,_,{signal:I}).then((e=>w(e,{key:F,scale:x,sourceIndex:c,view:l,zoomScale:d,defaultZoomScale:h})))}(e,t)}function m(e,t){if(t.localSearchDisabled)return null;const s=e?.scale;return"number"==typeof s&&s<=3e5?e.get("extent.center"):null}function y(e,t){const{source:s,spatialReference:r,view:o,suggestTerm:n,maxSuggestions:l,sourceIndex:u}=e,c=new d.Z,{apiKey:h,url:p}=s,g=S(s,o),y=t&&t.signal;if(!p)return Promise.resolve(null);h&&(c.apiKey=h),s.categories&&(c.categories=s.categories),r&&(c.outSpatialReference=r);const f=m(o,s);if(f&&(c.location=f),!n.trim())return Promise.resolve(null);const{prefix:_="",suffix:v=""}=s,b=`${_}${n}${v}`;return c.text=b,g&&(c.searchExtent=(0,i.Wg)(g)),c.maxSuggestions=l,s.countryCode&&(c.countryCode=s.countryCode),(0,a.K)(p,c,{signal:y}).then((e=>function(e,t){return e.map((e=>function(e,t){return{text:e.text,key:e.magicKey,sourceIndex:t}}(e,t)))}(e,u)))}function f(e){return!!e&&/(?:geocode\-api\.arcgis\.com\/arcgis\/rest\/services\/world\/geocodeserver).*/i.test(e)}function _(e){return!!e&&/(?:\/servers\/[\da-z\.-]+\/rest\/services\/world\/geocodeserver).*/i.test(e)}function v(e){return!!e&&/(?:arcgis\.com\/arcgis\/rest\/services\/world\/geocodeserver).*/i.test(e)}const b="https://geocode-api.arcgis.com/arcgis/rest/services/World/GeocodeServer";function S(e,t){const{filter:s,withinViewEnabled:r}=e,i=t&&t.scale,o=t&&t.extent,n=s&&s.geometry;return(0,h.vb)(n,t,i)||(r&&o?o:void 0)}function w(e,t){return e.filter(Boolean).map((e=>function(e,t){const{key:s,scale:n,sourceIndex:l,view:a,zoomScale:u,defaultZoomScale:c}=t,{attributes:d,extent:p,location:g,address:m}=e,y=new r.Z({geometry:g,attributes:d}),f=p||g,_=(0,h.vb)(f,a,n),v="number"==typeof u?(0,h.LT)(_,a,u):"number"==typeof c&&"point"===f.type?(0,h.LT)(_,a,c):_,b=g?`${g.x},${g.y}`:"",S=m||b,w=y.clone();return(0,i.pC)(v)&&(w.geometry=o.Z.fromExtent(v)),{extent:v,feature:y,target:w,key:s,name:S,sourceIndex:l}}(e,t)))}},78088:(e,t,s)=>{s.d(t,{h:()=>i});var r=s(80975);function i(){return function(e,t){if(!e[t])throw new TypeError(`Cannot auto bind undefined function '${t}'`);return{value:n(e[t])}}}function o(e){const{type:t}=e;return e instanceof KeyboardEvent||"keyup"===t||"keydown"===t||"keypress"===t}function n(e){return function(t){for(var s=arguments.length,i=new Array(s>1?s-1:0),n=1;n<s;n++)i[n-1]=arguments[n];o(t)?(0,r.pf)(t.key)&&(t.preventDefault(),t.stopPropagation(),t.target.click()):e.call(this,t,...i)}}},93531:(e,t,s)=>{function r(e){return t=>{t.hasOwnProperty("_delegatedEventNames")||(t._delegatedEventNames=t._delegatedEventNames?t._delegatedEventNames.slice():[]);const s=t._delegatedEventNames,r=Array.isArray(e)?e:function(e){return e.split(",").map((e=>e.trim()))}(e);s.push(...r)}}s.d(t,{s:()=>r})},39435:(e,t,s)=>{s.d(t,{nu:()=>F,C2:()=>T,Zh:()=>R});var r=s(42265),i=s(10064),o=s(93169),n=s(32718),l=s(7882),a=s(81753),u=s(70032),c=(s(76200),s(63780),s(35995),s(59486),s(53866),s(32238),s(77577),s(80885),s(29909)),d=s(43404);new d.X({MGRS:"mgrs",USNG:"usng",UTM:"utm",GeoRef:"geo-ref",GARS:"gars",DMS:"dms",DDM:"ddm",DD:"dd"});var h=s(77981);new d.X({109006:"centimeters",9102:"decimal-degrees",109005:"decimeters",9002:"feet",109009:"inches",9036:"kilometers",9001:"meters",9035:"miles",109007:"millimeters",109012:"nautical-miles",9096:"yards"});var p=s(27366),g=s(46784),m=s(49861),y=s(25243),f=s(69912);let _=class extends g.wq{constructor(e){super(e),this.deviationUnit=null,this.geometries=null,this.maxDeviation=null}};(0,p._)([(0,m.Cb)({type:String,json:{write:!0}})],_.prototype,"deviationUnit",void 0),(0,p._)([(0,m.Cb)({json:{read:{reader:e=>e?e.map((e=>(0,h.im)(e))):null},write:{writer:(e,t)=>{t.geometries=e.map((e=>e.toJSON()))}}}})],_.prototype,"geometries",void 0),(0,p._)([(0,m.Cb)({type:Number,json:{write:!0}})],_.prototype,"maxDeviation",void 0),_=(0,p._)([(0,f.j)("esri.rest.support.GeneralizeParameters")],_),_.from=(0,y.se)(_);new d.X({preserveShape:"preserve-shape"});let v=class extends g.wq{constructor(e){super(e),this.calculationType=null,this.geodesic=null,this.lengthUnit=null,this.polylines=null}};(0,p._)([(0,m.Cb)({type:String,json:{write:!0}})],v.prototype,"calculationType",void 0),(0,p._)([(0,m.Cb)({type:Boolean,json:{write:!0}})],v.prototype,"geodesic",void 0),(0,p._)([(0,m.Cb)({json:{write:!0}})],v.prototype,"lengthUnit",void 0),(0,p._)([(0,m.Cb)({type:[c.Z],json:{read:{reader:e=>e?e.map((e=>(0,h.im)(e))):null},write:{writer:(e,t)=>{t.polylines=e.map((e=>e.toJSON()))}}}})],v.prototype,"polylines",void 0),v=(0,p._)([(0,f.j)("esri.rest.support.LengthsParameters")],v),v.from=(0,y.se)(v);new d.X({esriGeometryOffsetBevelled:"bevelled",esriGeometryOffsetMitered:"mitered",esriGeometryOffsetRounded:"rounded"}),new d.X({9001:"meters",9002:"feet",9036:"kilometers",9093:"miles",109012:"nautical-miles",109001:"yards"});let b=class extends g.wq{constructor(e){super(e),this.bevelRatio=null,this.geometries=null,this.offsetDistance=null,this.offsetHow=null,this.offsetUnit=null}};(0,p._)([(0,m.Cb)({type:Number,json:{write:!0}})],b.prototype,"bevelRatio",void 0),(0,p._)([(0,m.Cb)({json:{read:{reader:e=>e?e.map((e=>(0,h.im)(e))):null},write:{writer:(e,t)=>{t.geometries=e.map((e=>e.toJSON()))}}}})],b.prototype,"geometries",void 0),(0,p._)([(0,m.Cb)({type:Number,json:{write:!0}})],b.prototype,"offsetDistance",void 0),(0,p._)([(0,m.Cb)({type:String,json:{write:!0}})],b.prototype,"offsetHow",void 0),(0,p._)([(0,m.Cb)({type:String,json:{write:!0}})],b.prototype,"offsetUnit",void 0),b=(0,p._)([(0,f.j)("esri.rest.support.OffsetParameters")],b),b.from=(0,y.se)(b);var S=s(18924);new d.X({esriGeometryRelationCross:"cross",esriGeometryRelationDisjoint:"disjoint",esriGeometryRelationIn:"in",esriGeometryRelationInteriorIntersection:"interior-intersection",esriGeometryRelationIntersection:"intersection",esriGeometryRelationLineCoincidence:"line-coincidence",esriGeometryRelationLineTouch:"line-touch",esriGeometryRelationOverlap:"overlap",esriGeometryRelationPointTouch:"point-touch",esriGeometryRelationTouch:"touch",esriGeometryRelationWithin:"within",esriGeometryRelationRelation:"relation"});let w=class extends g.wq{constructor(e){super(e),this.geometries1=null,this.geometries2=null,this.relation=null,this.relationParameter=null}};(0,p._)([(0,m.Cb)({json:{read:{reader:e=>e?e.map((e=>(0,h.im)(e))):null},write:{writer:(e,t)=>{t.geometries1=e.map((e=>e.toJSON()))}}}})],w.prototype,"geometries1",void 0),(0,p._)([(0,m.Cb)({json:{read:{reader:e=>e?e.map((e=>(0,h.im)(e))):null},write:{writer:(e,t)=>{t.geometries2=e.map((e=>e.toJSON()))}}}})],w.prototype,"geometries2",void 0),(0,p._)([(0,m.Cb)({type:String,json:{write:!0}})],w.prototype,"relation",void 0),(0,p._)([(0,m.Cb)({type:String,json:{write:!0}})],w.prototype,"relationParameter",void 0),w=(0,p._)([(0,f.j)("esri.rest.support.RelationParameters")],w),w.from=(0,y.se)(w);new d.X({0:"default-curve-extension",1:"relocate-ends",2:"keep-end-attributes",4:"no-end-attributes",8:"no-extend-at-from",16:"no-extend-at-to"});let x=class extends g.wq{constructor(e){super(e),this.extendHow="default-curve-extension",this.polylines=null,this.trimExtendTo=null}};(0,p._)([(0,m.Cb)({type:String,json:{write:!0}})],x.prototype,"extendHow",void 0),(0,p._)([(0,m.Cb)({type:[c.Z],json:{read:{reader:e=>e?e.map((e=>(0,h.im)(e))):null},write:{writer:(e,t)=>{t.polylines=e.map((e=>e.toJSON()))}}}})],x.prototype,"polylines",void 0),(0,p._)([(0,m.Cb)({json:{read:{reader:e=>e?(0,h.im)(e):null},write:{writer:(e,t)=>{t.trimExtendTo=e.toJSON()}}}})],x.prototype,"trimExtendTo",void 0),x=(0,p._)([(0,f.j)("esri.rest.support.TrimExtendParameters")],x),x.from=(0,y.se)(x);var C=s(81943);const I=n.Z.getLogger("esri.widgets.support.geolocationUtils"),M={maximumAge:0,timeout:15e3,enableHighAccuracy:!0};function R(){return function(){const e=(0,o.Z)("esri-geolocation");return e||I.warn("geolocation-unsupported","Geolocation unsupported."),e}()&&function(){const e=window.isSecureContext;return e||I.warn("insecure-context","Geolocation requires a secure origin."),e}()}function F(e){return e||(e=M),new Promise(((t,s)=>{setTimeout((()=>s(new i.Z("geolocation:timeout","getting the current geolocation position timed out"))),15e3),navigator.geolocation.getCurrentPosition(t,s,e)}))}function T(e,t){const{position:s,view:o}=e;return function(e,t,s){if(!t)return Promise.resolve(e);const o=t.spatialReference;return o.isWGS84?Promise.resolve(e):o.isWebMercator?Promise.resolve((0,a.$)(e)):function(e){if(r.Z.geometryServiceUrl)return Promise.resolve(r.Z.geometryServiceUrl);const t=u.Z.getDefault();return t.load(e).catch((()=>{})).then((()=>t.get("helperServices.geometry.url")))}(s).then((t=>{if(!t)throw new i.Z("geometry-service:missing-url","Geometry service URL is missing");const r=new C.Z({geometries:[e],outSpatialReference:o});return(0,S.i)(t,r,s).then((e=>e[0]))}))}(function(e){const t=e&&e.coords;return t?new l.Z({longitude:t.longitude,latitude:t.latitude,z:t.altitude||null,spatialReference:{wkid:4326}}):null}(function(e){const t=e&&e.coords||{},s={accuracy:t.accuracy,altitude:t.altitude,altitudeAccuracy:t.altitudeAccuracy,heading:t.heading,latitude:t.latitude,longitude:t.longitude,speed:t.speed};return e?{coords:s,timestamp:e.timestamp}:e}(s)),o,t)}}}]);
//# sourceMappingURL=1152.22b7059d.chunk.js.map