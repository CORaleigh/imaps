(this.webpackJsonpimaps=this.webpackJsonpimaps||[]).push([[130],{1058:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var i=n(923),r=n(646),o=n(845),s=n(890);class c extends o.a{constructor(e){super({...e,constraint:new r.d(e.coordinateHelper,e.targetPoint)})}get hints(){return[new s.a(this.targetPoint)]}}function a(e,t){switch(e.type){case"edge":return new i.a({coordinateHelper:t,edgeStart:t.pointToVector(e.start),edgeEnd:t.pointToVector(e.end),targetPoint:t.pointToVector(e.target),objectId:e.objectId});case"vertex":return new c({coordinateHelper:t,targetPoint:t.pointToVector(e.target),objectId:e.objectId})}}},1128:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var i=n(84),r=n(183),o=n(87),s=n(85),c=n(91),a=n(351);const l=o.a.getLogger("esri.core.workers.WorkerHandle");class u{constructor(e,t,n,i={}){this._mainMethod=t,this._listeners=[],this._promise=Object(a.b)(e,{...i,schedule:n}).then((e=>{if(void 0===this._thread){this._thread=e,this._promise=null,i.hasInitialize&&this.broadcast({},"initialize");for(const e of this._listeners)this._connectListener(e)}else e.close()})),this._promise.catch((t=>l.error(`Failed to initialize ${e} worker: ${t}`)))}on(e,t){const n={removed:!1,eventName:e,callback:t,threadHandle:null};return this._listeners.push(n),this._connectListener(n),Object(r.c)((()=>{n.removed=!0,Object(i.h)(this._listeners,n),this._thread&&Object(s.k)(n.threadHandle)&&n.threadHandle.remove()}))}destroy(){this._thread&&(this._thread.close(),this._thread=null),this._promise=null}invoke(e,t){return this.invokeMethod(this._mainMethod,e,t)}invokeMethod(e,t,n){if(this._thread){const i=this.getTransferList(t,e);return this._thread.invoke(e,t,{transferList:i,signal:n})}return this._promise?this._promise.then((()=>(Object(c.t)(n),this.invokeMethod(e,t,n)))):Promise.reject(null)}broadcast(e,t){return this._thread?Promise.all(this._thread.broadcast(t,e)).then((()=>{})):this._promise?this._promise.then((()=>this.broadcast(e,t))):Promise.reject()}get promise(){return this._promise}_connectListener(e){this._thread&&this._thread.on(e.eventName,e.callback).then((t=>{e.removed||(e.threadHandle=t)}))}}},1375:function(e,t,n){"use strict";n.r(t),n.d(t,"FeatureServiceSnappingSource",(function(){return Y}));var i=n(79),r=n(100),o=n(134),s=n(183),c=n(85),a=n(144),l=n(81),u=(n(84),n(82),n(83),n(80)),b=n(117),d=n(257),f=n(733);function h(e,t){return Object(f.g)(t.extent,O),Object(f.f)(O,Object(b.w)(j,e.x,e.y,0))}const O=Object(f.c)(),j=Object(d.e)();var p=n(534);let g=class extends(Object(o.b)(r.a)){constructor(e){super(e),this.pointOfInterest=null}get tiles(){const e=this.tilesCoveringView,t=Object(c.k)(this.pointOfInterest)?this.pointOfInterest:this.view.center;return e.sort(((e,n)=>h(t,e)-h(t,n))),e}_scaleEnabled(){return Object(p.b)(this.view.scale,this.layer.minScale||0,this.layer.maxScale||0)}get tilesCoveringView(){if(!this.view.ready||!this.view.featuresTilingScheme||!this.view.state||Object(c.j)(this.tileInfo))return[];if(!this._scaleEnabled)return[];const{spans:e,lodInfo:t}=this.view.featuresTilingScheme.getTileCoverage(this.view.state,0),{level:n}=t,i=[];for(const{row:r,colFrom:o,colTo:s}of e)for(let e=o;e<=s;e++){const o={id:null,level:n,row:r,col:t.normalizeCol(e)};this.tileInfo.updateTileInfo(o),i.push(o)}return i}get tileInfo(){var e,t;return null!=(e=null==(t=this.view.featuresTilingScheme)?void 0:t.tileInfo)?e:null}get tileSize(){return Object(c.k)(this.tileInfo)?this.tileInfo.size[0]:256}initialize(){this.handles.add(this.watch("view.state.viewpoint",(()=>this.notifyChange("tilesCoveringView")),!0))}};Object(i.a)([Object(l.b)({readOnly:!0})],g.prototype,"tiles",null),Object(i.a)([Object(l.b)({readOnly:!0})],g.prototype,"_scaleEnabled",null),Object(i.a)([Object(l.b)({readOnly:!0})],g.prototype,"tilesCoveringView",null),Object(i.a)([Object(l.b)({readOnly:!0})],g.prototype,"tileInfo",null),Object(i.a)([Object(l.b)({readOnly:!0})],g.prototype,"tileSize",null),Object(i.a)([Object(l.b)({constructOnly:!0})],g.prototype,"view",void 0),Object(i.a)([Object(l.b)({constructOnly:!0})],g.prototype,"layer",void 0),Object(i.a)([Object(l.b)()],g.prototype,"pointOfInterest",void 0),g=Object(i.a)([Object(u.a)("esri.views.interactive.snapping.featureSources.featureServiceSource.FeatureServiceTiles2D")],g);var v,y,w=n(136),m=n(118);(y=v||(v={}))[y.INVISIBLE=0]="INVISIBLE",y[y.VISIBLE_WHEN_EXTENDED=1]="VISIBLE_WHEN_EXTENDED",y[y.VISIBLE_ON_SURFACE=2]="VISIBLE_ON_SURFACE";let _=class extends o.a{constructor(e){super(e),this.pointOfInterest=null}get tiles(){const e=this.tilesCoveringView,t=this.effectivePointOfInterest;if(Object(c.k)(t)){const n=e.map((e=>h(t,e)));for(let i=1;i<n.length;i++)if(n[i-1]>n[i])return e.sort(((e,n)=>h(t,e)-h(t,n))),e.slice()}return e}get tilesCoveringView(){var e,t;return this._filterTiles(null==(e=this.view.featureTiles)||null==(t=e.tiles)?void 0:t.toArray()).map(I)}get tileInfo(){var e,t;return null!=(e=null==(t=this.view.featureTiles)?void 0:t.tilingScheme.toTileInfo())?e:null}get tileSize(){var e,t;return null!=(e=null==(t=this.view.featureTiles)?void 0:t.tileSize)?e:256}get effectivePointOfInterest(){var e;const t=this.pointOfInterest;return Object(c.k)(t)?t:null==(e=this.view.pointsOfInterest)?void 0:e.focus.location}initialize(){this.handles.add(Object(w.a)(this.view,"featureTiles",(e=>{this.handles.remove(k),e&&this.handles.add(e.addClient(),k)})))}_filterTiles(e){return Object(c.j)(e)?[]:e.filter((e=>Math.abs(e.measures.screenRect[3]-e.measures.screenRect[1])>S&&e.measures.visibility===v.VISIBLE_ON_SURFACE))}};function I({lij:[e,t,n],extent:i}){return{id:`${e}/${t}/${n}`,level:e,row:t,col:n,extent:i}}Object(i.a)([Object(l.b)({readOnly:!0})],_.prototype,"tiles",null),Object(i.a)([Object(l.b)({readOnly:!0})],_.prototype,"tilesCoveringView",null),Object(i.a)([Object(l.b)({readOnly:!0})],_.prototype,"tileInfo",null),Object(i.a)([Object(l.b)({readOnly:!0})],_.prototype,"tileSize",null),Object(i.a)([Object(l.b)({constructOnly:!0})],_.prototype,"view",void 0),Object(i.a)([Object(l.b)()],_.prototype,"pointOfInterest",void 0),Object(i.a)([Object(l.b)()],_.prototype,"effectivePointOfInterest",null),_=Object(i.a)([Object(u.a)("esri.views.interactive.snapping.featureSources.featureServiceSource.FeatureServiceTiles3D")],_);const S=50,k="feature-tiles";var T=n(1058),E=n(124),M=n(135),N=n(105),P=n(125),H=n(116),x=n(456),z=n(195),A=n(299),R=n(907);const L=[[0,179,255],[117,62,128],[0,104,255],[215,189,166],[32,0,193],[98,162,206],[102,112,129],[52,125,0],[142,118,246],[138,83,0],[92,122,255],[122,55,83],[0,142,255],[81,40,179],[0,200,244],[13,24,127],[0,170,147],[19,58,241],[22,44,35]];let F=class extends r.a{constructor(e){super(e),this.updating=!1,this.enablePolygons=!0,this.enableLabels=!0,this._polygons=new Map,this._labels=new Map,this._enabled=!0}initialize(){this._symbols=L.map((e=>new z.a({color:[e[0],e[1],e[2],.6],outline:{color:"black",width:1}}))),this.update()}destroy(){this._enabled=!1,this.clear()}get enabled(){return this._enabled}set enabled(e){this._enabled!==e&&(this._enabled=e,this.update())}update(){if(!this._enabled)return void this.clear();const e=this.getTiles(),t=new Array,n=new Set((this._labels.size,this._labels.keys()));e.forEach(((i,r)=>{const o=i.lij.toString();n.delete(o);const s=i.lij[0],a=i.geometry;if(this.enablePolygons&&!this._polygons.has(o)){const e=new P.a({geometry:a,symbol:this._symbols[s%this._symbols.length]});this._polygons.set(o,e),t.push(e)}if(this.enableLabels){const n=(e=>{if(Object(c.k)(e.label))return e.label;let t=e.lij.toString();return Object(c.k)(e.loadPriority)&&(t+=` (${e.loadPriority})`),t})(i),s=r/(e.length-1),l=Object(H.k)(0,200,s),u=Object(H.k)(20,6,s)/.75,b=Object(c.k)(i.loadPriority)&&i.loadPriority>=e.length,d=new N.a([l,b?0:l,b?0:l]),f="3d"===this.view.type?()=>new x.a({verticalOffset:{screenLength:40/.75},callout:{type:"line",color:"white",border:{color:"black"}},symbolLayers:[new R.a({text:n,halo:{color:"white",size:1/.75},material:{color:d},size:u})]}):()=>new A.a({text:n,haloColor:"white",haloSize:1/.75,color:d,size:u});if(this._labels.has(o)){const e=this._labels.get(o),t=f();(Object(c.j)(e.symbol)||JSON.stringify(t)!==JSON.stringify(e.symbol))&&(e.symbol=t)}else{const e=new P.a({geometry:a.extent.center,symbol:f()});this._labels.set(o,e),t.push(e)}}}));const i=new Array;n.forEach((e=>{this._polygons.has(e)&&(i.push(this._polygons.get(e)),this._polygons.delete(e)),this._labels.has(e)&&(i.push(this._labels.get(e)),this._labels.delete(e))})),this.view.graphics.removeMany(i),this.view.graphics.addMany(t)}clear(){this.view.graphics.removeMany(Array.from(this._polygons.values())),this.view.graphics.removeMany(Array.from(this._labels.values())),this._polygons.clear(),this._labels.clear()}};Object(i.a)([Object(l.b)({constructOnly:!0})],F.prototype,"view",void 0),Object(i.a)([Object(l.b)({readOnly:!0})],F.prototype,"updating",void 0),Object(i.a)([Object(l.b)()],F.prototype,"enabled",null),F=Object(i.a)([Object(u.a)("esri.views.support.TileTreeDebugger")],F);let V=class extends F{constructor(e){super(e),this.handles=new E.a}initialize(){const e=setInterval((()=>this._fetchDebugInfo()),2e3);this.handles.add(Object(s.c)((()=>clearInterval(e))))}destroy(){this.handles.destroy()}getTiles(){if(!this.debugInfo)return[];const e=new Map,t=new Map;this.debugInfo.storedTiles.forEach((t=>{e.set(t.data.id,t.featureCount)})),this.debugInfo.pendingTiles.forEach((n=>{e.set(n.data.id,n.featureCount),t.set(n.data.id,n.state)}));const n=n=>{var i;const r=t.get(n),o=null!=(i=e.get(n))?i:"?";return r?`${r}:${o}\n${n}`:`store:${o}\n${n}`},i=new Map;return this.debugInfo.storedTiles.forEach((e=>{i.set(e.data.id,e.data)})),this.debugInfo.pendingTiles.forEach((e=>{i.set(e.data.id,e.data)})),Array.from(i.values()).map((e=>({lij:[e.level,e.row,e.col],geometry:M.a.fromExtent(Object(m.v)(e.extent,this.view.spatialReference)),label:n(e.id)})))}_fetchDebugInfo(){this.handle.getDebugInfo(null).then((e=>{this.debugInfo=e,this.update()}))}};Object(i.a)([Object(l.b)({constructOnly:!0})],V.prototype,"handle",void 0),V=Object(i.a)([Object(u.a)("esri.views.interactive.snapping.featureSources.WorkerTileTreeDebugger")],V);var C=n(91),B=n(1128),U=n(205);let D=class extends o.a{constructor(e){super(e),this.availability=0,this.workerHandleUpdating=!0,this.editId=0}get updating(){return this.updatingHandles.updating||this.workerHandleUpdating}destroy(){this.workerHandle.destroy()}initialize(){this.workerHandle=new W(this.schedule),this.handles.add([this.workerHandle.on("notify-updating",(({updating:e})=>this.workerHandleUpdating=e)),this.workerHandle.on("notify-availability",(({availability:e})=>this._set("availability",e)))])}async setup(e,t){const n=this._serviceInfoFromLayer(e.layer);if(Object(c.j)(n))return;const i={configuration:this._convertConfiguration(e.configuration),serviceInfo:n,spatialReference:e.spatialReference.toJSON()};await this.updatingHandles.addPromise(this.workerHandle.invokeMethod("setup",i,t)),this.updatingHandles.addPromise(this.workerHandle.invokeMethod("whenNotUpdating",{},t))}async configure(e,t){const n=this._convertConfiguration(e);await this.updatingHandles.addPromise(this.workerHandle.invokeMethod("configure",n,t)),this.updatingHandles.addPromise(this.workerHandle.invokeMethod("whenNotUpdating",{},t))}async refresh(e){await this.updatingHandles.addPromise(this.workerHandle.invokeMethod("refresh",{},e)),this.updatingHandles.addPromise(this.workerHandle.invokeMethod("whenNotUpdating",{},e))}async fetchCandidates(e,t){const n={distance:e.distance,point:e.coordinateHelper.vectorToPoint(e.point).toJSON(),types:e.types,filter:Object(c.k)(e.filter)?e.filter.createQuery().toJSON():null};return this.workerHandle.invoke(n,t)}async updateTiles(e,t){const n={tiles:e.tiles,tileInfo:Object(c.k)(e.tileInfo)?e.tileInfo.toJSON():null,tileSize:e.tileSize};await this.updatingHandles.addPromise(this.workerHandle.invokeMethod("updateTiles",n,t)),this.updatingHandles.addPromise(this.workerHandle.invokeMethod("whenNotUpdating",{},t))}async applyEdits(e,t){var n,i,r,o,s,c;const a=this.editId++,l={id:a};await this.updatingHandles.addPromise(this.workerHandle.invokeMethod("beginApplyEdits",l,t)),this.updatingHandles.addPromise(this.workerHandle.invokeMethod("whenNotUpdating",{},t));const u=await this.updatingHandles.addPromise(Object(C.x)(e.result,t)),b={id:a,edits:{addedFeatures:null!=(n=null==(i=u.addedFeatures)?void 0:i.map((({objectId:e})=>e)))?n:[],deletedFeatures:null!=(r=null==(o=u.deletedFeatures)?void 0:o.map((({objectId:e,globalId:t})=>({objectId:e,globalId:t}))))?r:[],updatedFeatures:null!=(s=null==(c=u.updatedFeatures)?void 0:c.map((({objectId:e})=>e)))?s:[]}};await this.updatingHandles.addPromise(this.workerHandle.invokeMethod("endApplyEdits",b,t)),this.updatingHandles.addPromise(this.workerHandle.invokeMethod("whenNotUpdating",{},t))}getDebugInfo(e){return this.workerHandle.invokeMethod("getDebugInfo",{},e)}_convertConfiguration(e){return{filter:Object(c.k)(e.filter)?e.filter.toJSON():null,customParameters:e.customParameters}}_serviceInfoFromLayer(e){var t;return"multipatch"===e.geometryType||"mesh"===e.geometryType?null:{url:e.parsedUrl.path,fields:e.fields.map((e=>e.toJSON())),geometryType:U.a.toJSON(e.geometryType),capabilities:e.capabilities,objectIdField:e.objectIdField,globalIdField:e.globalIdField,spatialReference:e.spatialReference.toJSON(),timeInfo:null==(t=e.timeInfo)?void 0:t.toJSON()}}};Object(i.a)([Object(l.b)({constructOnly:!0})],D.prototype,"schedule",void 0),Object(i.a)([Object(l.b)({readOnly:!0})],D.prototype,"updating",null),Object(i.a)([Object(l.b)({readOnly:!0})],D.prototype,"availability",void 0),Object(i.a)([Object(l.b)()],D.prototype,"workerHandleUpdating",void 0),D=Object(i.a)([Object(u.a)("esri.views.interactive.snapping.featureSources.featureServiceSource.FeatureServiceSnappingSourceWorkerHandle")],D);class W extends B.a{constructor(e){super("FeatureServiceSnappingSourceWorker","fetchCandidates",e,{strategy:"dedicated"})}getTransferList(){return[]}}var q=n(113),J=n(572),G=n(440);let X=class extends r.a{constructor(e){super(e),this.pointOfInterest=null}get tiles(){return[{id:"0/0/0",level:0,row:0,col:0,extent:Object(m.r)(-1e8,-1e8,1e8,1e8)}]}get tileInfo(){return new G.a({origin:new q.a({x:-1e8,y:1e8,spatialReference:this.layer.spatialReference}),size:[512,512],lods:[new J.a({level:0,scale:1,resolution:390625})],spatialReference:this.layer.spatialReference})}get tileSize(){return this.tileInfo.size[0]}};Object(i.a)([Object(l.b)({readOnly:!0})],X.prototype,"tiles",null),Object(i.a)([Object(l.b)({readOnly:!0})],X.prototype,"tileInfo",null),Object(i.a)([Object(l.b)({readOnly:!0})],X.prototype,"tileSize",null),Object(i.a)([Object(l.b)({constructOnly:!0})],X.prototype,"layer",void 0),Object(i.a)([Object(l.b)()],X.prototype,"pointOfInterest",void 0),X=Object(i.a)([Object(u.a)("esri.views.interactive.snapping.featureSources.featureServiceSource.FeatureServiceTilesSimple")],X);var $=n(633);let Y=class extends(Object(o.b)(r.a)){constructor(e){super(e)}get updateTilesParameters(){return{tiles:this.tilesOfInterest.tiles,tileInfo:this.tilesOfInterest.tileInfo,tileSize:this.tilesOfInterest.tileSize}}get updating(){return this.workerHandle.updating||this.updatingHandles.updating}get configuration(){return{filter:this.layer.createQuery(),customParameters:this.layer.customParameters}}get availability(){return this.workerHandle.availability}get layer(){return this.layerSource.layer}initialize(){const e=this.view;if(Object(c.k)(e))switch(e.type){case"2d":this.tilesOfInterest=new g({view:e,layer:this.layer}),this.workerHandle=new D;break;case"3d":{const t=e.resourceController;this.tilesOfInterest=new _({view:e}),this.workerHandle=new D({schedule:e=>t.schedule(e)});break}}else this.tilesOfInterest=new X({layer:this.layer}),this.workerHandle=new D;this.handles.add([Object(s.a)(this.workerHandle)]),this.workerHandle.setup({layer:this.layer,spatialReference:this.spatialReference,configuration:this.configuration},null),this.updatingHandles.add((()=>this.updateTilesParameters),(()=>this.workerHandle.updateTiles(this.updateTilesParameters,null)),a.a),this.handles.add([Object(a.e)((()=>this.configuration),(e=>this.workerHandle.configure(e,null)),a.c)]),Object(c.k)(e)&&this.handles.add(Object(a.e)((()=>$.a.FEATURE_SERVICE_SNAPPING_SOURCE_TILE_TREE_SHOW_TILES),(t=>{t&&!this.debug?(this.debug=new V({view:e,handle:this.workerHandle}),this.handles.add(Object(s.a)(this.debug),"debug")):!t&&this.debug&&this.handles.remove("debug")}),a.a)),this.handles.add(this.layerSource.layer.on("apply-edits",(e=>{this.workerHandle.applyEdits(e,null)})))}refresh(){this.workerHandle.refresh(null)}async fetchCandidates(e,t){return this.tilesOfInterest.pointOfInterest=e.coordinateHelper.vectorToPoint(e.point),(await this.workerHandle.fetchCandidates({...e,filter:null},t)).candidates.map((t=>Object(T.a)(t,e.coordinateHelper)))}getDebugInfo(e){return this.workerHandle.getDebugInfo(e)}};Object(i.a)([Object(l.b)({constructOnly:!0})],Y.prototype,"spatialReference",void 0),Object(i.a)([Object(l.b)({constructOnly:!0})],Y.prototype,"layerSource",void 0),Object(i.a)([Object(l.b)({constructOnly:!0})],Y.prototype,"view",void 0),Object(i.a)([Object(l.b)()],Y.prototype,"tilesOfInterest",void 0),Object(i.a)([Object(l.b)({readOnly:!0})],Y.prototype,"updateTilesParameters",null),Object(i.a)([Object(l.b)({readOnly:!0})],Y.prototype,"updating",null),Object(i.a)([Object(l.b)({readOnly:!0})],Y.prototype,"configuration",null),Object(i.a)([Object(l.b)({readOnly:!0})],Y.prototype,"availability",null),Y=Object(i.a)([Object(u.a)("esri.views.interactive.snapping.featureSources.FeatureServiceSnappingSource")],Y)},200:function(e,t,n){"use strict";function i(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function r(e){return[e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8],e[9],e[10],e[11],e[12],e[13],e[14],e[15]]}function o(e,t,n,i,r,o,s,c,a,l,u,b,d,f,h,O){return[e,t,n,i,r,o,s,c,a,l,u,b,d,f,h,O]}function s(e,t){return new Float64Array(e,t,16)}n.d(t,"a",(function(){return c})),n.d(t,"b",(function(){return s})),n.d(t,"c",(function(){return r})),n.d(t,"d",(function(){return i})),n.d(t,"e",(function(){return o}));const c=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];Object.freeze({__proto__:null,create:i,clone:r,fromValues:o,createView:s,IDENTITY:c})},257:function(e,t,n){"use strict";function i(){return[0,0,0,0]}function r(e){return[e[0],e[1],e[2],e[3]]}function o(e,t,n,i){return[e,t,n,i]}function s(e){const t=[0,0,0,0],n=Math.min(4,e.length);for(let i=0;i<n;++i)t[i]=e[i];return t}function c(e,t){return new Float64Array(e,t,4)}function a(){return[0,0,0,0]}function l(){return o(1,1,1,1)}function u(){return o(1,0,0,0)}function b(){return o(0,1,0,0)}function d(){return o(0,0,1,0)}function f(){return o(0,0,0,1)}n.d(t,"a",(function(){return O})),n.d(t,"b",(function(){return h})),n.d(t,"c",(function(){return c})),n.d(t,"d",(function(){return r})),n.d(t,"e",(function(){return i})),n.d(t,"f",(function(){return s})),n.d(t,"g",(function(){return o}));const h=[0,0,0,0],O=l(),j=u(),p=b(),g=d(),v=f();Object.freeze({__proto__:null,create:i,clone:r,fromValues:o,fromArray:s,createView:c,zeros:a,ones:l,unitX:u,unitY:b,unitZ:d,unitW:f,ZEROS:h,ONES:O,UNIT_X:j,UNIT_Y:p,UNIT_Z:g,UNIT_W:v})},288:function(e,t,n){"use strict";n.d(t,"a",(function(){return j})),n.d(t,"b",(function(){return p})),n.d(t,"c",(function(){return f})),n.d(t,"d",(function(){return h})),n.d(t,"e",(function(){return O}));var i=n(409),r=n(337),o=n(367),s=n(200),c=n(462),a=n(219),l=n(109),u=n(257);class b{constructor(e,t,n){this.itemByteSize=e,this.itemCreate=t,this._buffers=new Array,this._items=new Array,this._itemsPtr=0,this._itemsPerBuffer=Math.ceil(n/this.itemByteSize)}get(){0===this._itemsPtr&&Object(r.a)((()=>this._reset()));const e=Math.floor(this._itemsPtr/this._itemsPerBuffer);for(;this._buffers.length<=e;){const e=new ArrayBuffer(this._itemsPerBuffer*this.itemByteSize);for(let t=0;t<this._itemsPerBuffer;++t)this._items.push(this.itemCreate(e,t*this.itemByteSize));this._buffers.push(e)}return this._items[this._itemsPtr++]}_reset(){const e=2*(Math.floor(this._itemsPtr/this._itemsPerBuffer)+1);for(;this._buffers.length>e;)this._buffers.pop(),this._items.length=this._buffers.length*this._itemsPerBuffer;this._itemsPtr=0}static createVec2f64(e=d){return new b(16,a.c,e)}static createVec3f64(e=d){return new b(24,l.e,e)}static createVec4f64(e=d){return new b(32,u.c,e)}static createMat3f64(e=d){return new b(72,o.a,e)}static createMat4f64(e=d){return new b(128,s.b,e)}static createQuatf64(e=d){return new b(32,c.d,e)}get test(){return{size:this._buffers.length*this._itemsPerBuffer*this.itemByteSize}}}const d=4*i.a.KILOBYTES,f=b.createVec2f64(),h=b.createVec3f64(),O=b.createVec4f64(),j=(b.createMat3f64(),b.createMat4f64()),p=b.createQuatf64()},360:function(e,t,n){"use strict";n.d(t,"a",(function(){return f})),n.d(t,"b",(function(){return l})),n.d(t,"c",(function(){return c})),n.d(t,"d",(function(){return d})),n.d(t,"e",(function(){return u})),n.d(t,"f",(function(){return b})),n.d(t,"g",(function(){return a}));n(84);var i=n(485),r=n(117),o=n(109),s=n(288);function c(e){return e?{origin:Object(o.d)(e.origin),direction:Object(o.d)(e.direction)}:{origin:Object(o.f)(),direction:Object(o.f)()}}function a(e,t){const n=h.get();return n.origin=e,n.direction=t,n}function l(e,t=c()){return b(e.origin,e.direction,t)}function u(e,t,n=c()){return Object(r.k)(n.origin,e),Object(r.j)(n.direction,t,e),n}function b(e,t,n=c()){return Object(r.k)(n.origin,e),Object(r.k)(n.direction,t),n}function d(e,t){const n=Object(r.g)(s.d.get(),Object(r.r)(s.d.get(),e.direction),Object(r.j)(s.d.get(),t,e.origin));return Object(r.h)(n,n)}function f(e,t,n){const i=Object(r.h)(e.direction,Object(r.j)(n,t,e.origin));return Object(r.f)(n,e.origin,Object(r.e)(n,e.direction,i)),n}const h=new i.a((function(){return{origin:null,direction:null}}))},367:function(e,t,n){"use strict";function i(){return[1,0,0,0,1,0,0,0,1]}function r(e,t){return new Float64Array(e,t,9)}n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return i}));Object.freeze({__proto__:null,create:i,clone:function(e){return[e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8]]},fromValues:function(e,t,n,i,r,o,s,c,a){return[e,t,n,i,r,o,s,c,a]},createView:r})},423:function(e,t,n){"use strict";n.d(t,"a",(function(){return N})),n.d(t,"b",(function(){return P})),n.d(t,"c",(function(){return u})),n.d(t,"d",(function(){return a})),n.d(t,"e",(function(){return h})),n.d(t,"f",(function(){return f})),n.d(t,"g",(function(){return d})),n.d(t,"h",(function(){return b})),n.d(t,"i",(function(){return _})),n.d(t,"j",(function(){return I})),n.d(t,"k",(function(){return k})),n.d(t,"l",(function(){return T})),n.d(t,"m",(function(){return S})),n.d(t,"n",(function(){return M})),n.d(t,"o",(function(){return E})),n.d(t,"p",(function(){return m})),n.d(t,"q",(function(){return A})),n.d(t,"r",(function(){return H})),n.d(t,"s",(function(){return w})),n.d(t,"t",(function(){return x})),n.d(t,"u",(function(){return l}));var i=n(116),r=n(85),o=n(117),s=n(109),c=(n(498),n(288));function a(e=R){return[e[0],e[1],e[2],e[3]]}function l(e,t,n,i){return b(e,t,n,i,c.e.get())}function u(e,t){return b(t[0],t[1],t[2],t[3],e)}function b(e,t,n,i,r=a()){return r[0]=e,r[1]=t,r[2]=n,r[3]=i,r}function d(e,t,n){const i=t[0]*t[0]+t[1]*t[1]+t[2]*t[2],r=Math.abs(i-1)>1e-5&&i>1e-12?1/Math.sqrt(i):1;return n[0]=t[0]*r,n[1]=t[1]*r,n[2]=t[2]*r,n[3]=-(n[0]*e[0]+n[1]*e[1]+n[2]*e[2]),n}function f(e,t,n,i=a()){const r=n[0]-t[0],o=n[1]-t[1],s=n[2]-t[2],c=e[0]-t[0],l=e[1]-t[1],u=e[2]-t[2],b=o*u-s*l,d=s*c-r*u,f=r*l-o*c,h=b*b+d*d+f*f,O=Math.abs(h-1)>1e-5&&h>1e-12?1/Math.sqrt(h):1;i[0]=b*O,i[1]=d*O,i[2]=f*O,i[3]=-(i[0]*e[0]+i[1]*e[1]+i[2]*e[2])}function h(e,t,n,i,r){if(e.count<3)return!1;e.getVec(n,j);let s=i,c=!1;for(;s<e.count-1&&!c;)e.getVec(s,p),s++,c=!Object(o.o)(j,p);if(!c)return!1;for(s=Math.max(s,r),c=!1;s<e.count&&!c;)e.getVec(s,g),s++,Object(o.j)(v,j,p),Object(o.r)(v,v),Object(o.j)(y,p,g),Object(o.r)(y,y),c=!Object(o.o)(j,g)&&!Object(o.o)(p,g)&&Math.abs(Object(o.h)(v,y))<O;return c?(f(j,p,g,t),!0):(0!==n||1!==i||2!==r)&&h(e,t,0,1,2)}const O=.99619469809,j=Object(s.f)(),p=Object(s.f)(),g=Object(s.f)(),v=Object(s.f)(),y=Object(s.f)();function w(e,t,n){return t!==e&&u(e,t),e[3]=-Object(o.h)(e,n),e}function m(e,t){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=-e[3],t}function _(e,t,n,i){return Object(o.g)(g,t,e),d(n,g,i)}function I(e,t,n,i){return z(e,t,Object(o.j)(c.d.get(),n,t),V,i)}function S(e,t,n){return!!Object(r.k)(t)&&z(e,t.origin,t.direction,C,n)}function k(e,t,n){return z(e,t.origin,t.vector,L.NONE,n)}function T(e,t,n){return z(e,t.origin,t.vector,L.CLAMP,n)}function E(e,t){return x(e,t)>=0}function M(e,t){const n=t[0],i=t[1],r=t[2],o=t[3],s=t[4],c=t[5];return e[0]*(e[0]>0?n:o)+e[1]*(e[1]>0?i:s)+e[2]*(e[2]>0?r:c)+e[3]>=0}function N(e,t){const n=Object(o.h)(e,t.ray.direction),i=-x(e,t.ray.origin);if(i<0&&n>=0)return!1;if(n>-1e-6&&n<1e-6)return i>0;if((i<0||n<0)&&!(i<0&&n<0))return!0;const r=i/n;return n>0?r<t.c1&&(t.c1=r):r>t.c0&&(t.c0=r),t.c0<=t.c1}function P(e,t){const n=Object(o.h)(e,t.ray.direction),i=-x(e,t.ray.origin);if(n>-1e-6&&n<1e-6)return i>0;const r=i/n;return n>0?r<t.c1&&(t.c1=r):r>t.c0&&(t.c0=r),t.c0<=t.c1}function H(e,t,n){const i=Object(o.e)(c.d.get(),e,-e[3]),r=function(e,t,n){const i=Object(o.e)(c.d.get(),e,Object(o.h)(e,t));return Object(o.j)(n,t,i),n}(e,Object(o.j)(c.d.get(),t,i),c.d.get());return Object(o.f)(n,r,i),n}function x(e,t){return Object(o.h)(e,t)+e[3]}function z(e,t,n,r,s){const c=Object(o.h)(e,n);if(0===c)return!1;let a=-(Object(o.h)(e,t)+e[3])/c;return r&L.CLAMP&&(a=Object(i.e)(a,0,1)),!(!(r&L.INFINITE_MIN)&&a<0||!(r&L.INFINITE_MAX)&&a>1)&&(Object(o.f)(s,t,Object(o.e)(s,n,a)),!0)}function A(e){return e}const R=[0,0,1,0];var L,F;(F=L||(L={}))[F.NONE=0]="NONE",F[F.CLAMP=1]="CLAMP",F[F.INFINITE_MIN=4]="INFINITE_MIN",F[F.INFINITE_MAX=8]="INFINITE_MAX";const V=L.INFINITE_MIN|L.INFINITE_MAX,C=L.INFINITE_MAX},440:function(e,t,n){"use strict";n.d(t,"a",(function(){return m}));var i,r=n(79),o=n(90),s=n(86),c=n(85),a=n(114),l=n(81),u=(n(84),n(82),n(83)),b=n(93),d=n(80),f=n(92),h=n(113),O=n(96),j=n(118),p=n(110),g=n(182),v=n(572);const y=new o.a({PNG:"png",PNG8:"png8",PNG24:"png24",PNG32:"png32",JPEG:"jpg",JPG:"jpg",DIB:"dib",TIFF:"tiff",EMF:"emf",PS:"ps",PDF:"pdf",GIF:"gif",SVG:"svg",SVGZ:"svgz",Mixed:"mixed",MIXED:"mixed",LERC:"lerc",LERC2D:"lerc2d",RAW:"raw",pbf:"pbf"});let w=i=class extends s.a{constructor(e){super(e),this.dpi=96,this.format=null,this.origin=null,this.minScale=0,this.maxScale=0,this.size=null,this.spatialReference=null}static create(e={}){const{resolutionFactor:t=1,scales:n,size:r=256,spatialReference:o=O.a.WebMercator,numLODs:s=24}=e;if(!Object(p.l)(o)){const e=[];if(n)for(let t=0;t<n.length;t++){const i=n[t];e.push({level:t,scale:i,resolution:i})}else{let t=5e-4;for(let n=s-1;n>=0;n--)e.unshift({level:n,scale:t,resolution:t}),t*=2}return new i({dpi:96,lods:e,origin:new h.a(0,0,o),size:[r,r],spatialReference:o})}const c=Object(p.e)(o),l=e.origin?new h.a({x:e.origin.x,y:e.origin.y,spatialReference:o}):new h.a(c?{x:c.origin[0],y:c.origin[1],spatialReference:o}:{x:0,y:0,spatialReference:o}),u=1/(39.37*Object(a.e)(o)*96),b=[];if(n)for(let i=0;i<n.length;i++){const e=n[i],t=e*u;b.push({level:i,scale:e,resolution:t})}else{let e=Object(p.h)(o)?512/r*591657527.5917094:256/r*591657527.591555;const n=Math.ceil(s/t);b.push({level:0,scale:e,resolution:e*u});for(let i=1;i<n;i++){const n=e/2**t,r=n*u;b.push({level:i,scale:n,resolution:r}),e=n}}return new i({dpi:96,lods:b,origin:l,size:[r,r],spatialReference:o})}get isWrappable(){const{spatialReference:e,origin:t}=this;if(e&&t){const n=Object(p.e)(e);return e.isWrappable&&Math.abs(n.origin[0]-t.x)<=n.dx}return!1}readOrigin(e,t){return h.a.fromJSON({spatialReference:t.spatialReference,...e})}set lods(e){let t=0,n=0;const i=[];this._levelToLOD={},e&&(t=-1/0,n=1/0,e.forEach((e=>{i.push(e.scale),t=e.scale>t?e.scale:t,n=e.scale<n?e.scale:n,this._levelToLOD[e.level]=e}))),this._set("scales",i),this._set("minScale",t),this._set("maxScale",n),this._set("lods",e),this._initializeUpsampleLevels()}readSize(e,t){return[t.cols,t.rows]}writeSize(e,t){t.cols=e[0],t.rows=e[1]}zoomToScale(e){const t=this.scales;if(e<=0)return t[0];if(e>=t.length-1)return t[t.length-1];{const n=Math.floor(e),i=n+1;return t[n]/(t[n]/t[i])**(e-n)}}scaleToZoom(e){const t=this.scales,n=t.length-1;let i=0;for(;i<n;i++){const n=t[i],r=t[i+1];if(n<=e)return i;if(r===e)return i+1;if(n>e&&r<e)return i+Math.log(n/e)/Math.log(n/r)}return i}snapScale(e,t=.95){const n=this.scaleToZoom(e);return n%Math.floor(n)>=t?this.zoomToScale(Math.ceil(n)):this.zoomToScale(Math.floor(n))}tileAt(e,t,n,i){const r=this.lodAt(e);if(!r)return null;let o,s;if("number"==typeof t)o=t,s=n;else if(Object(p.d)(t.spatialReference,this.spatialReference))o=t.x,s=t.y,i=n;else{const e=Object(g.d)(t,this.spatialReference);if(Object(c.j)(e))return null;o=e.x,s=e.y,i=n}const a=r.resolution*this.size[0],l=r.resolution*this.size[1];return i||(i={id:null,level:0,row:0,col:0,extent:Object(j.l)()}),i.level=e,i.row=Math.floor((this.origin.y-s)/l+.001),i.col=Math.floor((o-this.origin.x)/a+.001),this.updateTileInfo(i),i}updateTileInfo(e,t=i.ExtrapolateOptions.NONE){let n=this.lodAt(e.level);if(!n&&t===i.ExtrapolateOptions.POWER_OF_TWO){const t=this.lods[this.lods.length-1];t.level<e.level&&(n=t)}if(!n)return;const r=e.level-n.level,o=n.resolution*this.size[0]/2**r,s=n.resolution*this.size[1]/2**r;e.id=`${e.level}/${e.row}/${e.col}`,e.extent||(e.extent=Object(j.l)()),e.extent[0]=this.origin.x+e.col*o,e.extent[1]=this.origin.y-(e.row+1)*s,e.extent[2]=e.extent[0]+o,e.extent[3]=e.extent[1]+s}upsampleTile(e){const t=this._upsampleLevels[e.level];return!(!t||-1===t.parentLevel)&&(e.level=t.parentLevel,e.row=Math.floor(e.row/t.factor+.001),e.col=Math.floor(e.col/t.factor+.001),this.updateTileInfo(e),!0)}getTileBounds(e,t){const{resolution:n}=this.lodAt(t.level),i=n*this.size[0],r=n*this.size[1];return e[0]=this.origin.x+t.col*i,e[1]=this.origin.y-(t.row+1)*r,e[2]=e[0]+i,e[3]=e[1]+r,e}lodAt(e){return this._levelToLOD&&this._levelToLOD[e]||null}clone(){return i.fromJSON(this.write({}))}getOrCreateCompatible(e,t){if(256===this.size[0]&&256===this.size[1])return 256===e?this:null;const n=[],r=this.lods.length;for(let i=0;i<r;i++){const e=this.lods[i],r=e.resolution*t;n.push(new v.a({level:e.level,scale:e.scale,resolution:r}))}return new i({size:[e,e],dpi:this.dpi,format:this.format,compressionQuality:this.compressionQuality,origin:this.origin,spatialReference:this.spatialReference,lods:n})}_initializeUpsampleLevels(){const e=this.lods;this._upsampleLevels=[];let t=null;for(let n=0;n<e.length;n++){const i=e[n];this._upsampleLevels[i.level]={parentLevel:t?t.level:-1,factor:t?t.resolution/i.resolution:0},t=i}}};Object(r.a)([Object(l.b)({type:Number,json:{write:!0}})],w.prototype,"compressionQuality",void 0),Object(r.a)([Object(l.b)({type:Number,json:{write:!0}})],w.prototype,"dpi",void 0),Object(r.a)([Object(l.b)({type:String,json:{read:y.read,write:y.write,origins:{"web-scene":{read:!1,write:!1}}}})],w.prototype,"format",void 0),Object(r.a)([Object(l.b)({readOnly:!0})],w.prototype,"isWrappable",null),Object(r.a)([Object(l.b)({type:h.a,json:{write:!0}})],w.prototype,"origin",void 0),Object(r.a)([Object(b.a)("origin")],w.prototype,"readOrigin",null),Object(r.a)([Object(l.b)({type:[v.a],value:null,json:{write:!0}})],w.prototype,"lods",null),Object(r.a)([Object(l.b)({readOnly:!0})],w.prototype,"minScale",void 0),Object(r.a)([Object(l.b)({readOnly:!0})],w.prototype,"maxScale",void 0),Object(r.a)([Object(l.b)({readOnly:!0})],w.prototype,"scales",void 0),Object(r.a)([Object(l.b)({cast:e=>Array.isArray(e)?e:"number"==typeof e?[e,e]:[256,256]})],w.prototype,"size",void 0),Object(r.a)([Object(b.a)("size",["rows","cols"])],w.prototype,"readSize",null),Object(r.a)([Object(f.a)("size",{cols:{type:u.a},rows:{type:u.a}})],w.prototype,"writeSize",null),Object(r.a)([Object(l.b)({type:O.a,json:{write:!0}})],w.prototype,"spatialReference",void 0),w=i=Object(r.a)([Object(d.a)("esri.layers.support.TileInfo")],w),function(e){var t;(t=e.ExtrapolateOptions||(e.ExtrapolateOptions={}))[t.NONE=0]="NONE",t[t.POWER_OF_TWO=1]="POWER_OF_TWO"}(w||(w={}));const m=w},462:function(e,t,n){"use strict";function i(){return[0,0,0,1]}function r(e){return[e[0],e[1],e[2],e[3]]}function o(e,t){return new Float64Array(e,t,4)}n.d(t,"a",(function(){return s})),n.d(t,"b",(function(){return i})),n.d(t,"c",(function(){return r})),n.d(t,"d",(function(){return o}));const s=[0,0,0,1];Object.freeze({__proto__:null,create:i,clone:r,fromValues:function(e,t,n,i){return[e,t,n,i]},createView:o,IDENTITY:s})},485:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var i=n(337);class r{constructor(e){this.allocator=e,this._items=[],this._itemsPtr=0,this._grow()}get(){return 0===this._itemsPtr&&Object(i.a)((()=>this._reset())),this._itemsPtr===this._items.length&&this._grow(),this._items[this._itemsPtr++]}_reset(){const e=Math.min(3*Math.max(8,this._itemsPtr),this._itemsPtr+3*o);this._items.length=Math.min(e,this._items.length),this._itemsPtr=0}_grow(){for(let e=0;e<Math.max(8,Math.min(this._items.length,o));e++)this._items.push(this.allocator())}}const o=1024},498:function(e,t,n){"use strict";n.d(t,"a",(function(){return v})),n.d(t,"b",(function(){return p})),n.d(t,"c",(function(){return j})),n.d(t,"d",(function(){return m})),n.d(t,"e",(function(){return w})),n.d(t,"f",(function(){return S})),n.d(t,"g",(function(){return z})),n.d(t,"h",(function(){return g}));n(82);var i=n(87),r=n(116),o=n(85),s=n(147),c=n(117),a=n(109),l=n(271),u=n(257),b=n(584),d=n(360),f=n(526),h=n(288);const O=i.a.getLogger("esri.geometry.support.sphere");function j(){return Object(u.e)()}function p(e,t=j()){return Object(l.c)(t,e)}function g(e){return e}function v(e){e[0]=e[1]=e[2]=e[3]=0}function y(e){return Array.isArray(e)?e[3]:e}function w(e){return Array.isArray(e)?e:H}function m(e,t,n,i){return Object(u.g)(e,t,n,i)}function _(e,t,n){if(Object(o.j)(t))return!1;const{origin:i,direction:r}=t,s=I;s[0]=i[0]-e[0],s[1]=i[1]-e[1],s[2]=i[2]-e[2];const c=r[0]*r[0]+r[1]*r[1]+r[2]*r[2],a=2*(r[0]*s[0]+r[1]*s[1]+r[2]*s[2]),l=a*a-4*c*(s[0]*s[0]+s[1]*s[1]+s[2]*s[2]-e[3]*e[3]);if(l<0)return!1;const u=Math.sqrt(l);let b=(-a-u)/(2*c);const d=(-a+u)/(2*c);return(b<0||d<b&&d>0)&&(b=d),!(b<0)&&(n&&(n[0]=i[0]+r[0]*b,n[1]=i[1]+r[1]*b,n[2]=i[2]+r[2]*b),!0)}const I=Object(a.f)();function S(e,t){return _(e,t,null)}function k(e,t,n){const i=h.d.get(),r=h.a.get();Object(c.g)(i,t.origin,t.direction);const o=y(e);Object(c.g)(n,i,t.origin),Object(c.e)(n,n,1/Object(c.p)(n)*o);const a=E(e,t.origin),l=Object(f.a)(t.origin,n);return Object(s.d)(r,l+a,i),Object(c.q)(n,n,r),n}function T(e,t,n){const i=Object(c.j)(h.d.get(),t,w(e)),r=Object(c.e)(h.d.get(),i,e[3]/Object(c.p)(i));return Object(c.f)(n,r,w(e))}function E(e,t){const n=Object(c.j)(h.d.get(),t,w(e)),i=Object(c.p)(n),o=y(e),s=o+Math.abs(o-i);return Object(r.b)(o/s)}const M=Object(a.f)();function N(e,t,n,i){const o=Object(c.j)(M,t,w(e));switch(n){case b.a.X:{const e=Object(r.d)(o,M)[2];return Object(c.w)(i,-Math.sin(e),Math.cos(e),0)}case b.a.Y:{const e=Object(r.d)(o,M),t=e[1],n=e[2],s=Math.sin(t);return Object(c.w)(i,-s*Math.cos(n),-s*Math.sin(n),Math.cos(t))}case b.a.Z:return Object(c.r)(i,o);default:return}}function P(e,t){const n=Object(c.j)(x,t,w(e));return Object(c.p)(n)-e[3]}const H=Object(a.f)(),x=Object(a.f)(),z=Object.freeze({__proto__:null,create:j,copy:p,fromCenterAndRadius:function(e,t){return Object(u.g)(e[0],e[1],e[2],t)},wrap:g,clear:v,fromRadius:function(e){return e},getRadius:y,getCenter:w,fromValues:m,elevate:function(e,t,n){return e!==n&&Object(c.k)(n,e),n[3]=e[3]+t,n},setExtent:function(e,t,n){return O.error("sphere.setExtent is not yet supported"),e===n?n:p(e,n)},intersectRay:_,intersectsRay:S,intersectRayClosestSilhouette:function(e,t,n){if(_(e,t,n))return n;const i=k(e,t,h.d.get());return Object(c.f)(n,t.origin,Object(c.e)(h.d.get(),t.direction,Object(c.m)(t.origin,i)/Object(c.p)(t.direction))),n},closestPointOnSilhouette:k,closestPoint:function(e,t,n){return _(e,t,n)?n:(Object(d.a)(t,w(e),n),T(e,n,n))},projectPoint:T,distanceToSilhouette:function(e,t){const n=Object(c.j)(h.d.get(),t,w(e)),i=Object(c.t)(n),r=e[3]*e[3];return Math.sqrt(Math.abs(i-r))},angleToSilhouette:E,axisAt:N,altitudeAt:P,setAltitudeAt:function(e,t,n,i){const r=P(e,t),o=N(e,t,b.a.Z,x),s=Object(c.e)(x,o,n-r);return Object(c.f)(i,t,s)}})},499:function(e,t,n){"use strict";n.d(t,"a",(function(){return j})),n.d(t,"b",(function(){return O})),n.d(t,"c",(function(){return l})),n.d(t,"d",(function(){return a})),n.d(t,"e",(function(){return d})),n.d(t,"f",(function(){return b})),n.d(t,"g",(function(){return u})),n.d(t,"h",(function(){return f})),n.d(t,"i",(function(){return h}));var i=n(116),r=n(485),o=n(117),s=n(109),c=n(288);function a(e){return e?{origin:Object(s.d)(e.origin),vector:Object(s.d)(e.vector)}:{origin:Object(s.f)(),vector:Object(s.f)()}}function l(e,t=a()){return u(e.origin,e.vector,t)}function u(e,t,n=a()){return Object(o.k)(n.origin,e),Object(o.k)(n.vector,t),n}function b(e,t,n=a()){return Object(o.k)(n.origin,e),Object(o.j)(n.vector,t,e),n}function d(e,t){const n=Object(o.j)(c.d.get(),t,e.origin),r=Object(o.h)(e.vector,n),s=Object(o.h)(e.vector,e.vector),a=Object(i.e)(r/s,0,1),l=Object(o.j)(c.d.get(),Object(o.e)(c.d.get(),e.vector,a),n);return Object(o.h)(l,l)}function f(e,t,n){return Object(o.f)(n,e.origin,Object(o.e)(n,e.vector,t))}function h(e,t,n,r,s){const{vector:a,origin:l}=e,u=Object(o.j)(c.d.get(),t,l),b=Object(o.h)(a,u)/Object(o.t)(a);return Object(o.e)(s,a,Object(i.e)(b,n,r)),Object(o.f)(s,s,e.origin)}function O(e,t){if(p(e,function(e,t){const n=v.get();return n.origin=e,n.vector=t,n}(t.origin,t.direction),!1,g)){const{tA:t,pB:n,distance2:i}=g;if(t>=0&&t<=1)return i;if(t<0)return Object(o.l)(e.origin,n);if(t>1)return Object(o.l)(Object(o.f)(c.d.get(),e.origin,e.vector),n)}return null}function j(e,t,n){return!!p(e,t,!0,g)&&(Object(o.k)(n,g.pA),!0)}function p(e,t,n,r){const s=1e-6,a=e.origin,l=Object(o.f)(c.d.get(),a,e.vector),u=t.origin,b=Object(o.f)(c.d.get(),u,t.vector),d=c.d.get(),f=c.d.get();if(d[0]=a[0]-u[0],d[1]=a[1]-u[1],d[2]=a[2]-u[2],f[0]=b[0]-u[0],f[1]=b[1]-u[1],f[2]=b[2]-u[2],Math.abs(f[0])<s&&Math.abs(f[1])<s&&Math.abs(f[2])<s)return!1;const h=c.d.get();if(h[0]=l[0]-a[0],h[1]=l[1]-a[1],h[2]=l[2]-a[2],Math.abs(h[0])<s&&Math.abs(h[1])<s&&Math.abs(h[2])<s)return!1;const O=d[0]*f[0]+d[1]*f[1]+d[2]*f[2],j=f[0]*h[0]+f[1]*h[1]+f[2]*h[2],p=d[0]*h[0]+d[1]*h[1]+d[2]*h[2],g=f[0]*f[0]+f[1]*f[1]+f[2]*f[2],v=(h[0]*h[0]+h[1]*h[1]+h[2]*h[2])*g-j*j;if(Math.abs(v)<s)return!1;let y=(O*j-p*g)/v,w=(O+j*y)/g;n&&(y=Object(i.e)(y,0,1),w=Object(i.e)(w,0,1));const m=c.d.get(),_=c.d.get();return m[0]=a[0]+y*h[0],m[1]=a[1]+y*h[1],m[2]=a[2]+y*h[2],_[0]=u[0]+w*f[0],_[1]=u[1]+w*f[1],_[2]=u[2]+w*f[2],r.tA=y,r.tB=w,r.pA=m,r.pB=_,r.distance2=Object(o.l)(m,_),!0}const g={tA:0,tB:0,pA:Object(s.f)(),pB:Object(s.f)(),distance2:0},v=new r.a((()=>({origin:null,vector:null})))},526:function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return l})),n.d(t,"c",(function(){return s})),n.d(t,"d",(function(){return c}));var i=n(116),r=n(117),o=n(109);function s(e,t,n){const i=Object(r.h)(e,t)/Object(r.h)(e,e);return Object(r.e)(n,e,i)}function c(e,t){return Object(r.h)(e,t)/Object(r.p)(e)}function a(e,t){const n=Object(r.h)(e,t)/(Object(r.p)(e)*Object(r.p)(t));return-Object(i.b)(n)}function l(e,t,n){Object(r.r)(u,e),Object(r.r)(b,t);const o=Object(r.h)(u,b),s=Object(i.b)(o),c=Object(r.g)(u,u,b);return Object(r.h)(c,n)<0?2*Math.PI-s:s}const u=Object(o.f)(),b=Object(o.f)()},572:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var i,r=n(79),o=n(86),s=n(81),c=(n(84),n(82),n(83)),a=n(80);let l=i=class extends o.a{constructor(e){super(e),this.cols=null,this.level=0,this.levelValue=null,this.origin=null,this.resolution=0,this.rows=null,this.scale=0}clone(){return new i({cols:this.cols,level:this.level,levelValue:this.levelValue,resolution:this.resolution,rows:this.rows,scale:this.scale})}};Object(r.a)([Object(s.b)({json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],l.prototype,"cols",void 0),Object(r.a)([Object(s.b)({type:c.a,json:{write:!0}})],l.prototype,"level",void 0),Object(r.a)([Object(s.b)({type:String,json:{write:!0}})],l.prototype,"levelValue",void 0),Object(r.a)([Object(s.b)({json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],l.prototype,"origin",void 0),Object(r.a)([Object(s.b)({type:Number,json:{write:!0}})],l.prototype,"resolution",void 0),Object(r.a)([Object(s.b)({json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],l.prototype,"rows",void 0),Object(r.a)([Object(s.b)({type:Number,json:{write:!0}})],l.prototype,"scale",void 0),l=i=Object(r.a)([Object(a.a)("esri.layers.support.LOD")],l);const u=l},584:function(e,t,n){"use strict";var i;n.d(t,"a",(function(){return i})),function(e){e[e.X=0]="X",e[e.Y=1]="Y",e[e.Z=2]="Z"}(i||(i={}))},633:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var i=n(79),r=n(100),o=n(81),s=(n(84),n(82),n(83),n(80));let c=class extends r.a{constructor(){super(...arguments),this.SCHEDULER_LOG_SLOW_TASKS=!1,this.FEATURE_SERVICE_SNAPPING_SOURCE_TILE_TREE_SHOW_TILES=!1}};Object(i.a)([Object(o.b)()],c.prototype,"SCHEDULER_LOG_SLOW_TASKS",void 0),Object(i.a)([Object(o.b)()],c.prototype,"FEATURE_SERVICE_SNAPPING_SOURCE_TILE_TREE_SHOW_TILES",void 0),c=Object(i.a)([Object(s.a)("esri.views.support.DebugFlags")],c);const a=new c},733:function(e,t,n){"use strict";n.d(t,"a",(function(){return g})),n.d(t,"b",(function(){return J})),n.d(t,"c",(function(){return p})),n.d(t,"d",(function(){return N})),n.d(t,"e",(function(){return v})),n.d(t,"f",(function(){return M})),n.d(t,"g",(function(){return m})),n.d(t,"h",(function(){return _})),n.d(t,"i",(function(){return x})),n.d(t,"j",(function(){return H})),n.d(t,"k",(function(){return y}));n(82);var i=n(87),r=n(116),o=n(485),s=n(147),c=n(200),a=n(117),l=n(109),u=n(584),b=n(499),d=n(423),f=n(360),h=n(526),O=n(288);const j=i.a.getLogger("esri.views.3d.support.geometryUtils.boundedPlane");function p(e=F){return{plane:Object(d.d)(e.plane),origin:Object(l.d)(e.origin),basis1:Object(l.d)(e.basis1),basis2:Object(l.d)(e.basis2)}}function g(e,t=p()){return v(e.origin,e.basis1,e.basis2,t)}function v(e,t,n,i=p()){return Object(a.k)(i.origin,e),Object(a.k)(i.basis1,t),Object(a.k)(i.basis2,n),y(i),function(e,t){Math.abs(Object(a.h)(e.basis1,e.basis2)/(Object(a.p)(e.basis1)*Object(a.p)(e.basis2)))>1e-6&&j.warn(t,"Provided basis vectors are not perpendicular"),Math.abs(Object(a.h)(e.basis1,x(e)))>1e-6&&j.warn(t,"Basis vectors and plane normal are not perpendicular"),Math.abs(-Object(a.h)(x(e),e.origin)-e.plane[3])>1e-6&&j.warn(t,"Plane offset is not consistent with plane origin")}(i,"fromValues()"),i}function y(e){Object(d.i)(e.basis2,e.basis1,e.origin,e.plane)}function w(e,t,n){e!==n&&g(e,n);const i=Object(a.e)(O.d.get(),x(e),t);return Object(a.f)(n.origin,n.origin,i),n.plane[3]-=t,n}function m(e,t=p()){const n=(e[2]-e[0])/2,i=(e[3]-e[1])/2;return Object(a.w)(t.origin,e[0]+n,e[1]+i,0),Object(a.w)(t.basis1,n,0,0),Object(a.w)(t.basis2,0,i,0),Object(d.h)(0,0,1,0,t.plane),t}function _(e,t,n){return!!Object(d.m)(e.plane,t,n)&&z(e,n)}function I(e,t,n){const i=V.get();L(e,t,i,V.get());let o=Number.POSITIVE_INFINITY;for(const s of D){const c=R(e,s,C.get()),l=O.d.get();if(Object(d.k)(i,c,l)){const e=Object(a.v)(O.d.get(),t.origin,l),i=Math.abs(Object(r.b)(Object(a.h)(t.direction,e)));i<o&&(o=i,Object(a.k)(n,l))}}return o===Number.POSITIVE_INFINITY?S(e,t,n):n}function S(e,t,n){if(_(e,t,n))return n;const i=V.get(),r=V.get();L(e,t,i,r);let o=Number.POSITIVE_INFINITY;for(const s of D){const c=R(e,s,C.get()),l=O.d.get();if(Object(d.l)(i,c,l)){const e=Object(f.d)(t,l);if(!Object(d.o)(r,l))continue;e<o&&(o=e,Object(a.k)(n,l))}}return E(e,t.origin)<o&&k(e,t.origin,n),n}function k(e,t,n){const i=Object(d.r)(e.plane,t,O.d.get()),r=Object(b.i)(A(e,e.basis1),i,-1,1,O.d.get()),o=Object(b.i)(A(e,e.basis2),i,-1,1,O.d.get());return Object(a.j)(n,Object(a.f)(O.d.get(),r,o),e.origin),n}function T(e,t,n){const{origin:i,basis1:r,basis2:o}=e,s=Object(a.j)(O.d.get(),t,i),c=Object(h.d)(r,s),l=Object(h.d)(o,s),u=Object(h.d)(x(e),s);return Object(a.w)(n,c,l,u)}function E(e,t){const n=T(e,t,O.d.get()),{basis1:i,basis2:r}=e,o=Object(a.p)(i),s=Object(a.p)(r),c=Math.max(Math.abs(n[0])-o,0),l=Math.max(Math.abs(n[1])-s,0),u=n[2];return c*c+l*l+u*u}function M(e,t){return Math.sqrt(E(e,t))}function N(e,t){return Object(d.o)(e.plane,t)&&z(e,t)}function P(e,t){const n=-e.plane[3];return Object(h.d)(x(e),t)-n}function H(e,t,n,i){return e!==i&&g(e,i),Object(s.d)(q,t,n),Object(a.q)(i.basis1,e.basis1,q),Object(a.q)(i.basis2,e.basis2,q),y(i),i}function x(e){return Object(d.q)(e.plane)}function z(e,t){const n=Object(a.j)(O.d.get(),t,e.origin),i=Object(a.t)(e.basis1),r=Object(a.t)(e.basis2),o=Object(a.h)(e.basis1,n),s=Object(a.h)(e.basis2,n);return-o-i<0&&o-i<0&&-s-r<0&&s-r<0}function A(e,t){const n=C.get();return Object(a.k)(n.origin,e.origin),Object(a.k)(n.vector,t),n}function R(e,t,n){const{basis1:i,basis2:r,origin:o}=e,s=Object(a.e)(O.d.get(),i,t.origin[0]),c=Object(a.e)(O.d.get(),r,t.origin[1]);Object(a.f)(n.origin,s,c),Object(a.f)(n.origin,n.origin,o);const l=Object(a.e)(O.d.get(),i,t.direction[0]),u=Object(a.e)(O.d.get(),r,t.direction[1]);return Object(a.e)(n.vector,Object(a.f)(l,l,u),2),n}function L(e,t,n,i){const r=x(e);Object(d.i)(r,t.direction,t.origin,n),Object(d.i)(Object(d.q)(n),r,t.origin,i)}const F={plane:Object(d.d)(),origin:Object(l.h)(0,0,0),basis1:Object(l.h)(1,0,0),basis2:Object(l.h)(0,1,0)},V=new o.a(d.d),C=new o.a(b.d),B=Object(l.f)(),U=new o.a((()=>({origin:null,basis1:null,basis2:null,plane:null}))),D=[{origin:[-1,-1],direction:[1,0]},{origin:[1,-1],direction:[0,1]},{origin:[1,1],direction:[-1,0]},{origin:[-1,1],direction:[0,-1]}],W=Object(c.d)(),q=Object(c.d)(),J=Object.freeze({__proto__:null,BoundedPlaneClass:class{constructor(){this.plane=Object(d.d)(),this.origin=Object(l.f)(),this.basis1=Object(l.f)(),this.basis2=Object(l.f)()}},create:p,wrap:function(e,t,n){const i=U.get();return i.origin=e,i.basis1=t,i.basis2=n,i.plane=Object(d.u)(0,0,0,0),y(i),i},copy:g,copyWithoutVerify:function(e,t){Object(a.k)(t.origin,e.origin),Object(a.k)(t.basis1,e.basis1),Object(a.k)(t.basis2,e.basis2),Object(d.c)(t.plane,e.plane)},fromValues:v,updateUnboundedPlane:y,elevate:w,setExtent:function(e,t,n){return m(t,n),w(n,P(e,e.origin),n),n},fromAABoundingRect:m,intersectRay:_,intersectRayClosestSilhouette:function(e,t,n){if(_(e,t,n))return n;const i=I(e,t,O.d.get());return Object(a.f)(n,t.origin,Object(a.e)(O.d.get(),t.direction,Object(a.m)(t.origin,i)/Object(a.p)(t.direction))),n},closestPointOnSilhouette:I,closestPoint:S,projectPoint:k,projectPointLocal:T,distance2:E,distance:M,distanceToSilhouette:function(e,t){let n=Number.NEGATIVE_INFINITY;for(const i of D){const r=R(e,i,C.get()),o=Object(b.e)(r,t);o>n&&(n=o)}return Math.sqrt(n)},extrusionContainsPoint:N,axisAt:function(e,t,n,i){return function(e,t,n){switch(t){case u.a.X:Object(a.k)(n,e.basis1),Object(a.r)(n,n);break;case u.a.Y:Object(a.k)(n,e.basis2),Object(a.r)(n,n);break;case u.a.Z:Object(a.k)(n,x(e))}return n}(e,n,i)},altitudeAt:P,setAltitudeAt:function(e,t,n,i){const r=P(e,t),o=Object(a.e)(B,x(e),n-r);return Object(a.f)(i,t,o),i},equals:function(e,t){return Object(a.o)(e.basis1,t.basis1)&&Object(a.o)(e.basis2,t.basis2)&&Object(a.o)(e.origin,t.origin)},transform:function(e,t,n){return e!==n&&g(e,n),Object(s.a)(W,t),Object(s.t)(W,W),Object(a.q)(n.basis1,e.basis1,W),Object(a.q)(n.basis2,e.basis2,W),Object(a.q)(Object(d.q)(n.plane),Object(d.q)(e.plane),W),Object(a.q)(n.origin,e.origin,t),Object(d.s)(n.plane,n.plane,n.origin),n},rotate:H,normal:x,UP:F})},890:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var i=n(347),r=n(575);class o extends r.a{constructor(e){super(),this.point=e}equals(e){return e instanceof o&&Object(i.e)(this.point,e.point)}}}}]);
//# sourceMappingURL=130.0b10a464.chunk.js.map