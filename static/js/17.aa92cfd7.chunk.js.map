{"version":3,"sources":["../node_modules/@arcgis/core/AggregateGraphic.js","../node_modules/@arcgis/core/views/layers/support/FeatureFilter.js","../node_modules/@arcgis/core/views/layers/support/FeatureEffect.js","../node_modules/@arcgis/core/views/layers/FeatureLayerView.js","../node_modules/@arcgis/core/views/2d/layers/features/tileRenderers.js","../node_modules/@arcgis/core/views/2d/layers/support/FeatureLayerProxy.js","../node_modules/@arcgis/core/views/2d/tiling/TileManager.js","../node_modules/@arcgis/core/views/2d/layers/FeatureLayerView2D.js","../node_modules/@arcgis/core/views/layers/LayerView.js","../node_modules/@arcgis/core/views/layers/support/ClipRect.js","../node_modules/@arcgis/core/views/layers/support/ClipArea.js","../node_modules/@arcgis/core/views/layers/support/Geometry.js","../node_modules/@arcgis/core/views/layers/support/Path.js","../node_modules/@arcgis/core/views/2d/layers/LayerView2D.js","../node_modules/@arcgis/core/renderers/support/clickToleranceUtils.js","../node_modules/@arcgis/core/views/2d/engine/webgl/visualVariablesUtils.js","../node_modules/@arcgis/core/views/support/drapedUtils.js","../node_modules/@arcgis/core/views/layers/support/popupUtils.js"],"names":["p","s","arguments","isAggregate","this","popupTemplate","r","sourceLayer","featureReduction","popupEnabled","objectId","cloneProperties","t","e","type","Boolean","prototype","Number","json","read","d","c","o","m","i","esriSpatialRelIntersects","esriSpatialRelContains","esriSpatialRelCrosses","esriSpatialRelDisjoint","esriSpatialRelEnvelopeIntersects","esriSpatialRelIndexIntersects","esriSpatialRelOverlaps","esriSpatialRelTouches","esriSpatialRelWithin","esriSpatialRelRelation","u","esriSRUnit_Meter","esriSRUnit_Kilometer","esriSRUnit_Foot","esriSRUnit_StatuteMile","esriSRUnit_NauticalMile","esriSRUnit_USNauticalMile","h","where","geometry","spatialRelationship","hiddenIds","Set","distance","objectIds","units","timeExtent","enabled","_set","n","a","l","forEach","add","String","types","write","source","reader","target","writer","Array","from","overridePolicy","readOnly","j","filter","includedEffect","excludedEffect","excludedLabelsVisible","clone","q","getLogger","R","_updatingRequiredFieldsPromise","effect","layer","requiredFields","view","F","_handleRequiredFieldsChange","w","fields","outFields","error","Error","returnGeometry","outSpatialReference","spatialReference","createQuery","x","intersection","get","_updateRequiredFields","then","objectIdField","renderer","displayField","collectRequiredFields","f","timeInfo","startField","endField","floorInfo","floorField","y","sort","clientGraphics","length","Promise","resolve","_loadArcadeModules","arcadeUtils","hasGeometryOperations","createPopupQuery","push","map","attributes","queryFeatures","concat","features","catch","geometryType","returnZ","returnM","b","isEmpty","E","v","g","default","isArray","_startupResolver","isReady","_controller","addResolvingPromise","_startWorker","signal","abort","_connection","close","client","tileRenderer","closed","when","transferList","service","config","tileInfo","toJSON","tiles","invoke","promise","addedFeatures","deletedFeatures","updatedFeatures","name","value","strategy","_tiles","Map","buffer","acquireTile","releaseTile","tileInfoView","_releaseTile","getTileCoverage","state","spans","lodInfo","level","row","colFrom","colTo","getId","normalizeCol","getWorldForColumn","_getOrAcquireTile","visible","key","_addPlaceholders","has","id","pool","release","hasMissingTiles","size","added","removed","set","delete","_addPlaceholderChildren","Math","abs","_addPlaceholderParent","_getTile","_addPlaceholderChild","hasData","contains","getParentKey","patchCount","B","K","W","X","_pipelineIsUpdating","_updatingPipelineConfig","_onGoingEdits","_isRefreshing","_visibilityOverrides","_effect","_highlightIds","_lastPixelBuffer","effectLists","included","V","excluded","doRefresh","isUpdating","_lockGPUUploads","_proxy","refresh","_unlockGPUUploads","_doUpdate","destroyed","_hasRequiredSupport","_getEffectiveRenderer","historicMoment","gdbVersion","definitionExpression","labelsVisible","labelingInfo","availableFields","pixelBuffer","N","L","_createConfiguration","max","schema","_createTileRendererHash","_tileRendererHash","_initTileRenderer","_serviceOptions","effects","enable","onConfigUpdate","_tileStrategy","tileKeys","openPorts","startup","featuresTilingScheme","hasHighlight","setHighlight","keys","_onceTilesUpdated","update","mesh","targets","aggregate","applyUpdate","_forceAttributeTextureUpload","invalidateLabels","requestUpdate","_updateHighlight","destroy","_updateClusterSizeTask","remove","all","_initProxy","_initServiceOptions","handles","on","valueRanges","isTable","_createClientOptions","z","_createServiceOptions","suspended","notifyChange","floors","getTime","JSON","stringify","geometryDefinition","clips","filterHash","effectHash","streamFilter","clipsHash","hasEffects","_","getObjectId","isCollection","getAttribute","toArray","_addHighlight","_removeHighlight","_hitTest","queryStatistics","queryFeaturesJSON","fromJSON","_cleanUpQuery","queryObjectIds","queryFeatureCount","queryExtent","count","extent","_update","updateTiles","timeline","record","title","D","_acquireTile","globalIdField","some","includes","onEdits","container","removeAllChildren","uninstall","validateFetchPopupFeatures","fetchClientPopupFeatures","_fetchServicePopupFeatures","event","C","createFetchPopupFeaturesQueryGeometry","updating","setUpdating","emitEvent","emit","path","capabilities","operations","supportsEditing","mode","featureCount","fullExtent","width","height","warn","customParameters","getFeatureDefinition","parsedUrl","dynamicDataSource","query","_detectQueryMode","maxRecordCount","tileMaxRecordCount","S","watch","_updateClusterEffectiveRendererSizeVariable","_effectiveRenderer","dynamicClusterSize","visualVariables","O","field","indexOf","T","P","_aggregateValueRanges","_createUpdateClusterSizeTask","aggregateFields","once","A","layerView","clear","install","getAttributeHash","_addFloorFilterClause","G","viewAllLevelIds","replace","join","RegExp","trim","_injectOverrides","H","U","devicePixelRatio","window","filters","supportsTextureFloat","maxTextureSize","lockGPUUploads","unlockGPUUploads","forceAttributeTextureUpload","begin","_updatingPromise","end","hitTest","getFeature","_createHittestResult","getAggregate","referenceId","k","I","M","J","Y","parent","declaredClass","canResume","getSuspendInfo","legendEnabled","updatingHandles","_override","_clearOverride","suspendInfo","ready","viewNotReady","loaded","layerNotLoaded","layerInvisible","EventedMixin","left","right","top","bottom","_get","base","typeMap","polygon","ofType","rect","moving","attached","lastUpdateId","updateRequested","fadeTransitionEnabled","opacity","blendMode","whenLayerView","attach","detach","minScale","maxScale","isFulfilled","isResolved","isVisibleAtScale","scale","xoffset","yoffset","stops","maxSize","minSize","floor","pointerType","symbol","uniqueValueInfos","classBreakInfos","minDataValue","maxDataValue","SIZE_MINMAX_VALUE","expression","valueExpression","SIZE_SCALE_STOPS","levels","SIZE_FIELD_STOPS","valueUnit","SIZE_UNIT_VALUE","NONE","resolution","overlayPixelSizeInMapUnits","basemapSpatialReference","equals","xmin","min","ymin","xmax","ymax","toMap","intersects","getRequiredFields","lastEditInfoEnabled","typeIdField","relationships","keyField","defaultPopupTemplateEnabled","defaultPopupTemplate"],"mappings":"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","file":"static/js/17.aa92cfd7.chunk.js","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"./chunks/tslib.es6.js\";import\"./core/has.js\";import\"./core/Logger.js\";import\"./core/accessorSupport/ensureType.js\";import{property as r}from\"./core/accessorSupport/decorators/property.js\";import{subclass as o}from\"./core/accessorSupport/decorators/subclass.js\";import\"./core/urlUtils.js\";import\"./core/uuid.js\";import\"./portal/support/resourceExtension.js\";import t from\"./Graphic.js\";var p;let s=p=class extends t{constructor(){super(...arguments),this.isAggregate=!0}getEffectivePopupTemplate(e=!1){if(this.popupTemplate)return this.popupTemplate;const r=this.sourceLayer&&this.sourceLayer.featureReduction;return r&&\"popupTemplate\"in r&&r.popupEnabled?r.popupTemplate:null}getObjectId(){return this.objectId}clone(){return new p({objectId:this.objectId,...this.cloneProperties()})}};e([r({type:Boolean})],s.prototype,\"isAggregate\",void 0),e([r({type:Number,json:{read:!0}})],s.prototype,\"objectId\",void 0),s=p=e([o(\"esri.AggregateGraphic\")],s);var c=s;export default c;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../chunks/tslib.es6.js\";import\"../../../core/has.js\";import{clone as t}from\"../../../core/lang.js\";import\"../../../core/Logger.js\";import\"../../../core/accessorSupport/ensureType.js\";import{property as r}from\"../../../core/accessorSupport/decorators/property.js\";import{JSONMap as i}from\"../../../core/jsonMap.js\";import{subclass as s}from\"../../../core/accessorSupport/decorators/subclass.js\";import{writer as o}from\"../../../core/accessorSupport/decorators/writer.js\";import\"../../../core/urlUtils.js\";import\"../../../core/uuid.js\";import\"../../../portal/support/resourceExtension.js\";import{JSONSupport as n}from\"../../../core/JSONSupport.js\";import{fromJSON as a}from\"../../../geometry/support/jsonUtils.js\";import{geometryTypes as p}from\"../../../geometry.js\";import l from\"../../../TimeExtent.js\";import c from\"../../../tasks/support/Query.js\";var d;const m=new i({esriSpatialRelIntersects:\"intersects\",esriSpatialRelContains:\"contains\",esriSpatialRelCrosses:\"crosses\",esriSpatialRelDisjoint:\"disjoint\",esriSpatialRelEnvelopeIntersects:\"envelope-intersects\",esriSpatialRelIndexIntersects:\"index-intersects\",esriSpatialRelOverlaps:\"overlaps\",esriSpatialRelTouches:\"touches\",esriSpatialRelWithin:\"within\",esriSpatialRelRelation:\"relation\"}),u=new i({esriSRUnit_Meter:\"meters\",esriSRUnit_Kilometer:\"kilometers\",esriSRUnit_Foot:\"feet\",esriSRUnit_StatuteMile:\"miles\",esriSRUnit_NauticalMile:\"nautical-miles\",esriSRUnit_USNauticalMile:\"us-nautical-miles\"});let h=d=class extends n{constructor(e){super(e),this.where=null,this.geometry=null,this.spatialRelationship=\"intersects\",this.hiddenIds=new Set,this.distance=void 0,this.objectIds=null,this.units=null,this.timeExtent=null,this.enabled=!1}writeWhere(e,t){t.where=e||\"1=1\"}enable(){this._set(\"enabled\",!0)}createQuery(e={}){const{where:r,geometry:i,spatialRelationship:s,timeExtent:o,objectIds:n,units:a,distance:p}=this;return new c({geometry:t(i),objectIds:t(n),spatialRelationship:s,timeExtent:t(o),where:r,units:a,distance:p,...e})}clone(){const{where:e,geometry:r,spatialRelationship:i,hiddenIds:s,timeExtent:o,objectIds:n,units:a,distance:p}=this,l=new Set;return s.forEach((e=>l.add(e))),new d({geometry:t(r),hiddenIds:l,objectIds:t(n),spatialRelationship:i,timeExtent:t(o),where:e,units:a,distance:p})}};e([r({type:String})],h.prototype,\"where\",void 0),e([o(\"where\")],h.prototype,\"writeWhere\",null),e([r({types:p,json:{read:a,write:!0}})],h.prototype,\"geometry\",void 0),e([r({type:String,json:{read:{source:\"spatialRel\",reader:m.read},write:{target:\"spatialRel\",writer:m.write}}})],h.prototype,\"spatialRelationship\",void 0),e([r({json:{write:(e,t,r)=>t[r]=Array.from(e),read:e=>new Set(e)}})],h.prototype,\"hiddenIds\",void 0),e([r({type:Number,json:{write:{overridePolicy:e=>({enabled:e>0})}}})],h.prototype,\"distance\",void 0),e([r({type:[Number],json:{write:!0}})],h.prototype,\"objectIds\",void 0),e([r({type:String,json:{read:u.read,write:{writer:u.write,overridePolicy(e){return{enabled:e&&this.distance>0}}}}})],h.prototype,\"units\",void 0),e([r({type:l,json:{write:!0}})],h.prototype,\"timeExtent\",void 0),e([r({readOnly:!0})],h.prototype,\"enabled\",void 0),h=d=e([s(\"esri.views.layers.support.FeatureFilter\")],h);var j=h;export default j;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../chunks/tslib.es6.js\";import\"../../../core/has.js\";import\"../../../core/Logger.js\";import\"../../../core/accessorSupport/ensureType.js\";import{property as r}from\"../../../core/accessorSupport/decorators/property.js\";import{subclass as t}from\"../../../core/accessorSupport/decorators/subclass.js\";import\"../../../core/urlUtils.js\";import\"../../../core/uuid.js\";import\"../../../portal/support/resourceExtension.js\";import{JSONSupport as o}from\"../../../core/JSONSupport.js\";import s from\"./FeatureFilter.js\";var i;let c=i=class extends o{constructor(){super(...arguments),this.filter=null,this.includedEffect=null,this.excludedEffect=null,this.excludedLabelsVisible=!1}clone(){return new i({filter:this.filter&&this.filter.clone(),includedEffect:this.includedEffect,excludedEffect:this.excludedEffect,excludedLabelsVisible:this.excludedLabelsVisible})}};e([r({type:s,json:{write:!0}})],c.prototype,\"filter\",void 0),e([r({json:{write:!0}})],c.prototype,\"includedEffect\",void 0),e([r({json:{write:!0}})],c.prototype,\"excludedEffect\",void 0),e([r({type:Boolean,json:{write:!0}})],c.prototype,\"excludedLabelsVisible\",void 0),c=i=e([t(\"esri.views.layers.support.FeatureEffect\")],c);var l=c;export default l;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../chunks/tslib.es6.js\";import\"../../core/has.js\";import{isSome as t}from\"../../core/maybe.js\";import r from\"../../core/Logger.js\";import\"../../core/accessorSupport/ensureType.js\";import{property as i}from\"../../core/accessorSupport/decorators/property.js\";import{subclass as s}from\"../../core/accessorSupport/decorators/subclass.js\";import o from\"../../core/Error.js\";import\"../../core/urlUtils.js\";import\"../../core/uuid.js\";import\"../../portal/support/resourceExtension.js\";import{eachAlways as l}from\"../../core/promiseUtils.js\";import{loadArcade as a}from\"../../support/arcadeOnDemand.js\";import{fixFields as n,unpackFieldNames as u,collectLabelingFields as p,collectElevationFields as m,collectFilterFields as d,collectFeatureReductionFields as f,collectFields as c,collectField as y,featureHasFields as h}from\"../../layers/support/fieldUtils.js\";import{init as F,on as w}from\"../../core/watchUtils.js\";import{combinedViewLayerTimeExtentProperty as g}from\"../../layers/support/commonProperties.js\";import x from\"../../tasks/support/Query.js\";import v from\"./support/FeatureFilter.js\";import E from\"./support/FeatureEffect.js\";import{getFetchPopupTemplate as j,getRequiredFields as b}from\"./support/popupUtils.js\";const q=r.getLogger(\"esri.views.layers.FeatureLayerView\"),R=r=>{let R=class extends r{constructor(...e){super(...e),this._updatingRequiredFieldsPromise=null,this.effect=null,this.filter=null,this.timeExtent=null,this.layer=null,this.requiredFields=[],this.view=null}initialize(){F(this,[\"layer.renderer\",\"layer.labelingInfo\",\"layer.elevationInfo.featureExpressionInfo\",\"layer.displayField\",\"filter\",\"effect\",\"layer.timeInfo\",\"layer.floorInfo\",\"timeExtent\"],(()=>this._handleRequiredFieldsChange()),!0),w(this,\"view.floors\",\"change\",(()=>this._handleRequiredFieldsChange()))}get availableFields(){const{layer:e,layer:{fields:t},requiredFields:r}=this;return\"outFields\"in e&&e.outFields?n(t,[...u(t,e.outFields),...r]):n(t,r)}get maximumNumberOfFeatures(){return 0}set maximumNumberOfFeatures(e){q.error(\"#maximumNumberOfFeatures=\",\"Setting maximum number of features is not supported\")}get maximumNumberOfFeaturesExceeded(){return!1}highlight(e){throw new Error(\"missing implementation\")}createQuery(){const e={outFields:[\"*\"],returnGeometry:!0,outSpatialReference:this.view.spatialReference},r=t(this.filter)?this.filter.createQuery(e):new x(e);return t(this.timeExtent)&&(r.timeExtent=t(r.timeExtent)?r.timeExtent.intersection(this.timeExtent):this.timeExtent.clone()),r}queryFeatures(e,t){throw new Error(\"missing implementation\")}queryObjectIds(e,t){throw new Error(\"missing implementation\")}queryFeatureCount(e,t){throw new Error(\"missing implementation\")}queryExtent(e,t){throw new Error(\"missing implementation\")}_loadArcadeModules(e){if(e.get(\"expressionInfos.length\"))return a()}_handleRequiredFieldsChange(){const e=this._updateRequiredFields();this._set(\"_updatingRequiredFieldsPromise\",e),e.then((()=>{this._updatingRequiredFieldsPromise===e&&this._set(\"_updatingRequiredFieldsPromise\",null)}))}async _updateRequiredFields(){if(!this.layer||!this.view)return;const e=\"3d\"===this.view.type,{layer:r,layer:{fields:i,objectIdField:s,renderer:o,displayField:a}}=this,n=r.featureReduction,u=new Set,h=await l([o?o.collectRequiredFields(u,i):null,p(u,r),e?m(u,r):null,t(this.filter)?d(u,r,this.filter):null,this.effect?d(u,r,this.effect.filter):null,n?f(u,r,n):null]);r.timeInfo&&this.timeExtent&&c(u,r.fields,[r.timeInfo.startField,r.timeInfo.endField]),\"feature\"===r.type&&r.floorInfo&&c(u,r.fields,[r.floorInfo.floorField]);for(const t of h)t.error&&q.error(t.error);y(u,i,s),e&&a&&y(u,i,a);const F=Array.from(u).sort();this._set(\"requiredFields\",F)}validateFetchPopupFeatures(e){const{layer:t,layer:{popupEnabled:r}}=this;if(!r)return new o(\"featurelayerview:fetchPopupFeatures\",\"Popups are disabled\",{layer:t});return j(this.layer,e)?void 0:new o(\"featurelayerview:fetchPopupFeatures\",\"Layer does not define a popup template\",{layer:t})}async fetchClientPopupFeatures(e){const r=t(e)?e.clientGraphics:null;if(!r||0===r.length)return Promise.resolve([]);const i=[],s=[],{layer:o}=this,l=j(o,e);if(!t(l))return Promise.resolve([]);const a=await this._loadArcadeModules(l),n=a&&a.arcadeUtils.hasGeometryOperations(l),p=await this.createPopupQuery(e),m=u(o.fields,p.outFields);for(const t of r)n||!h(m,t)?s.push(t):i.push(t);return\"stream\"===o.type||0===s.length?Promise.resolve(i):(p.objectIds=s.map((e=>e.attributes[o.objectIdField])),o.queryFeatures(p).then((e=>i.concat(e.features))).catch((()=>s)))}async createPopupQuery(e){const r=this.layer,i=r.createQuery(),s=j(r,e),o=t(s)&&await this._loadArcadeModules(s),l=t(s)&&o&&o.arcadeUtils.hasGeometryOperations(s),a=!(\"point\"!==r.geometryType&&!l);return i.returnGeometry=a,i.returnZ=a,i.returnM=a,i.outFields=await b(this.layer,s),i.outSpatialReference=this.view.spatialReference,i}canResume(){return!!super.canResume()&&(!t(this.timeExtent)||!this.timeExtent.isEmpty)}};return e([i()],R.prototype,\"_updatingRequiredFieldsPromise\",void 0),e([i({readOnly:!0})],R.prototype,\"availableFields\",null),e([i({type:E})],R.prototype,\"effect\",void 0),e([i({type:v})],R.prototype,\"filter\",void 0),e([i(g)],R.prototype,\"timeExtent\",void 0),e([i()],R.prototype,\"layer\",void 0),e([i({type:Number})],R.prototype,\"maximumNumberOfFeatures\",null),e([i({readOnly:!0,type:Boolean})],R.prototype,\"maximumNumberOfFeaturesExceeded\",null),e([i({readOnly:!0})],R.prototype,\"requiredFields\",void 0),e([i()],R.prototype,\"suspended\",void 0),e([i()],R.prototype,\"view\",void 0),R=e([s(\"esri.views.layers.FeatureLayerView\")],R),R};export default R;export{R as FeatureLayerView};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nasync function e(e,a){if(!e)return null;switch(e.type){case\"class-breaks\":case\"simple\":case\"unique-value\":case\"dot-density\":case\"dictionary\":return new((await import(\"./tileRenderers/SymbolTileRenderer.js\")).default)(a);case\"heatmap\":return new((await import(\"./tileRenderers/HeatmapTileRenderer.js\")).default)(a)}}export{e as createOrReuseTileRenderer};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../../chunks/tslib.es6.js\";import\"../../../../core/has.js\";import\"../../../../core/Logger.js\";import\"../../../../core/accessorSupport/ensureType.js\";import{property as t}from\"../../../../core/accessorSupport/decorators/property.js\";import{subclass as r}from\"../../../../core/accessorSupport/decorators/subclass.js\";import\"../../../../core/urlUtils.js\";import\"../../../../core/uuid.js\";import\"../../../../portal/support/resourceExtension.js\";import{createResolver as s,createAbortController as o,ignoreAbortErrors as i,throwIfNotAbortError as n}from\"../../../../core/promiseUtils.js\";import{EsriPromise as a}from\"../../../../core/Promise.js\";import{open as c}from\"../../../../core/workers/workers.js\";function l(e){return Array.isArray(e)}let u=class extends a{constructor(e){super(e),this._startupResolver=s(),this.isReady=!1}initialize(){this._controller=o(),this.addResolvingPromise(this._startWorker(this._controller.signal))}destroy(){this._controller.abort(),this._connection&&this._connection.close()}set tileRenderer(e){this.client.tileRenderer=e}get closed(){return this._connection.closed}async startup(e,t,r,s){await this.when();const o=this._controller.signal,i=l(r.source)?{transferList:r.source,signal:o}:void 0,n={service:r,config:t,tileInfo:e.tileInfo.toJSON(),tiles:s};await this._connection.invoke(\"startup\",n,i),this._startupResolver.resolve(),this._set(\"isReady\",!0)}async updateTiles(e){return await this._startupResolver.promise,i(this._connection.invoke(\"updateTiles\",e))}async update(e){const t={config:e};return await this._startupResolver.promise,this._connection.invoke(\"update\",t)}async applyUpdate(e){return await this._startupResolver.promise,this._connection.invoke(\"applyUpdate\",e)}async setHighlight(e){return await this._startupResolver.promise,i(this._connection.invoke(\"controller.setHighlight\",e))}async refresh(){return await this._startupResolver.promise,i(this._connection.invoke(\"controller.refresh\"))}async queryFeatures(e,t){return await this._startupResolver.promise,this._connection.invoke(\"controller.queryFeatures\",e.toJSON(),t)}async queryObjectIds(e,t){return await this._startupResolver.promise,this._connection.invoke(\"controller.queryObjectIds\",e.toJSON(),t)}async queryFeatureCount(e,t){return await this._startupResolver.promise,this._connection.invoke(\"controller.queryFeatureCount\",e.toJSON(),t)}async queryExtent(e,t){return this._connection.invoke(\"controller.queryExtent\",e.toJSON(),t)}async queryLatestObservations(e,t){return await this._startupResolver.promise,this._connection.invoke(\"controller.queryLatestObservations\",e.toJSON(),t)}async queryStatistics(e){return await this._startupResolver.promise,this._connection.invoke(\"controller.queryStatistics\",e)}async getObjectId(e){return await this._startupResolver.promise,this._connection.invoke(\"controller.getObjectId\",e)}async getDisplayId(e){return await this._startupResolver.promise,this._connection.invoke(\"controller.getDisplayId\",e)}async getFeature(e){return await this._startupResolver.promise,this._connection.invoke(\"controller.getFeature\",e)}async getAggregate(e){return await this._startupResolver.promise,this._connection.invoke(\"controller.getAggregate\",e)}async getAggregateValueRanges(){return await this._startupResolver.promise,this._connection.invoke(\"controller.getAggregateValueRanges\")}async mapValidDisplayIds(e){return await this._startupResolver.promise,this._connection.invoke(\"controller.mapValidDisplayIds\",e)}async onEdits(e){await this._startupResolver.promise;const{addedFeatures:t,deletedFeatures:r,updatedFeatures:s}=e;return i(this._connection.invoke(\"controller.onEdits\",{addedFeatures:t,deletedFeatures:r,updatedFeatures:s}))}async enableEvent(e,t){return await this._startupResolver.promise,i(this._connection.invoke(\"controller.enableEvent\",{name:e,value:t}))}async _startWorker(e){try{this._connection=await c(\"Pipeline\",{client:this.client,strategy:\"dedicated\",signal:e})}catch(t){n(t)}}};e([t()],u.prototype,\"isReady\",void 0),e([t()],u.prototype,\"client\",void 0),e([t()],u.prototype,\"tileRenderer\",null),u=e([r(\"esri.views.2d.layers.support.FeatureLayerProxy\")],u);var p=u;export default p;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{isSome as e}from\"../../../core/maybe.js\";import i from\"./TileKey.js\";import t from\"./TileCoverage.js\";const l=1e-6;class s{constructor(e){this._tiles=new Map,this.buffer=0,this.acquireTile=e.acquireTile,this.releaseTile=e.releaseTile,this.tileInfoView=e.tileInfoView,this.buffer=e.buffer}destroy(){}clear(){this._tiles.forEach((e=>this._releaseTile(e)))}tileKeys(){const e=[];return this._tiles.forEach(((i,t)=>e.push(t))),e}update(e){const l=this.tileInfoView.getTileCoverage(e.state,this.buffer,\"closest\"),{spans:s,lodInfo:r}=l,{level:a}=r,o=[],d=[],h=new Set,n=new Set;for(const{row:t,colFrom:c,colTo:f}of s)for(let e=c;e<=f;e++){const l=i.getId(a,t,r.normalizeCol(e),r.getWorldForColumn(e)),s=this._getOrAcquireTile(o,l);h.add(l),s.isReady?s.visible=!0:n.add(s.key)}n.forEach((e=>this._addPlaceholders(h,e))),this._tiles.forEach((e=>{h.has(e.key.id)||(d.push(e.key.id),this._releaseTile(e))})),t.pool.release(l);return{hasMissingTiles:n.size>0,added:o,removed:d}}_getOrAcquireTile(e,t){if(!this._tiles.has(t)){const l=this.acquireTile(new i(t));e.push(t),this._tiles.set(t,l),l.visible=!1}return this._tiles.get(t)}_getTile(e){return this._tiles.get(e)}_releaseTile(e){this._tiles.delete(e.key.id),this.releaseTile(e)}_addPlaceholders(e,i){const t=this._addPlaceholderChildren(e,i);if(!(Math.abs(1-t)<l)){if(!this._addPlaceholderParent(e,i)){this._getTile(i.id).visible=!0}}}_addPlaceholderChildren(e,i){let t=0;return this._tiles.forEach((l=>{t+=this._addPlaceholderChild(e,l,i)})),t}_addPlaceholderChild(e,i,t){if(i.key.level<=t.level||!i.hasData||!t.contains(i.key))return 0;i.visible=!0,e.add(i.key.id);return 1/(1<<2*(i.key.level-t.level))}_addPlaceholderParent(i,t){let l=t.getParentKey(),s=0,r=null;for(;e(l);){if(i.has(l.id))return!0;const e=this._getTile(l.id);if(null!=e&&e.isReady)return e.visible=!0,i.add(e.key.id),!0;null!=e&&e.hasData&&e.patchCount>s&&(s=e.patchCount,r=e),l=l.getParentKey()}return!!r&&(r.visible=!0,i.add(r.key.id),!0)}}export{s as TileManager};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../chunks/tslib.es6.js\";import t from\"../../../core/has.js\";import{clone as i}from\"../../../core/lang.js\";import{andThen as r,unwrapOr as s,isSome as a,isNone as n}from\"../../../core/maybe.js\";import o from\"../../../core/Logger.js\";import\"../../../core/accessorSupport/ensureType.js\";import{property as l}from\"../../../core/accessorSupport/decorators/property.js\";import{subclass as h}from\"../../../core/accessorSupport/decorators/subclass.js\";import u from\"../../../core/Error.js\";import\"../../../core/urlUtils.js\";import\"../../../core/uuid.js\";import\"../../../portal/support/resourceExtension.js\";import{flatten as d}from\"../../../core/arrayUtils.js\";import{debounce as p,isAbortError as c,eachAlwaysValues as f,after as y}from\"../../../core/promiseUtils.js\";import g from\"../../../geometry/Extent.js\";import\"../../../geometry.js\";import m from\"../../../core/Collection.js\";import _ from\"../../../Graphic.js\";import v from\"../../../AggregateGraphic.js\";import{init as R,whenFalseOnce as b}from\"../../../core/watchUtils.js\";import{isHostedAgolService as x}from\"../../../layers/support/arcgisLayerUrl.js\";import w from\"../../../tasks/support/FeatureSet.js\";import S from\"../../../tasks/support/Query.js\";import{MAX_FILTERS as F}from\"../engine/webgl/definitions.js\";import U from\"../../webgl/capabilities.js\";import{RefreshableLayerView as I}from\"../../layers/RefreshableLayerView.js\";import E from\"../../layers/LayerView.js\";import{calculateTolerance as C}from\"../../../renderers/support/clickToleranceUtils.js\";import{createQueryGeometry as j}from\"../../support/drapedUtils.js\";import{findSizeVV as O,createClusterCountSizeVariable as T,isClusterCompatibleRenderer as P,createClusterRenderer as q}from\"./support/clusterUtils.js\";import V from\"../../layers/effects/EffectList.js\";import{computePxBuffer as L}from\"./features/support/pixelBuffering.js\";import{toJSONGeometryType as N}from\"./support/util.js\";import{createSchema as H}from\"./features/schemaUtils.js\";import G from\"../../layers/support/FeatureFilter.js\";import J from\"../../layers/support/FeatureEffect.js\";import{FeatureLayerView as k}from\"../../layers/FeatureLayerView.js\";import{LayerView2DMixin as M}from\"./LayerView2D.js\";import{createOrReuseTileRenderer as A}from\"./features/tileRenderers.js\";import z from\"./support/FeatureLayerProxy.js\";import{TileManager as D}from\"../tiling/TileManager.js\";const $=2147483648,Q=1,B=e=>(e&$)>>>31===Q;function K(e){return e&&\"openPorts\"in e}const W=o.getLogger(\"esri.views.2d.layers.FeatureLayerView2D\");let X=class extends(k(I(M(E)))){constructor(){super(...arguments),this._pipelineIsUpdating=!0,this._updatingPipelineConfig=!1,this._onGoingEdits=0,this._isRefreshing=!1,this._visibilityOverrides=new Set,this._effect=null,this._highlightIds=new Map,this._lastPixelBuffer=0,this.filter=null,this.effectLists={included:new V,excluded:new V},this.doRefresh=p((async()=>{this.isUpdating()&&await b(this,\"updating\"),this._set(\"_isRefreshing\",!0),this._lockGPUUploads();try{await this._proxy.refresh()}catch(e){c(e),0}this._unlockGPUUploads(),this._set(\"_isRefreshing\",!1)})),this._doUpdate=p((async()=>{try{if(this.destroyed||!this._hasRequiredSupport(this.layer))return;this._set(\"_updatingPipelineConfig\",!0),await b(this,\"_isRefreshing\");const{effect:t,filter:i}=this;await this._updateRequiredFields();const{renderer:r}=this._getEffectiveRenderer();this._set(\"_effectiveRenderer\",r);const s=\"feature\"===this.layer.type?this.layer.historicMoment:null,n=\"feature\"===this.layer.type?this.layer.gdbVersion:null,o={renderer:this.layer.renderer,spatialReference:this.layer.spatialReference,timeExtent:this.layer.timeExtent,definitionExpression:this.layer.definitionExpression,featureReduction:this.layer.featureReduction,fields:this.layer.fields,geometryType:this.layer.geometryType,historicMoment:s,labelsVisible:this.layer.labelsVisible,labelingInfo:this.layer.labelingInfo,availableFields:this.availableFields,effect:this.effect,filter:this.filter,gdbVersion:n,pixelBuffer:0},l=N(this.layer.geometryType),h=await L(r,l,this.layer.featureReduction),u=this._createConfiguration(o,i,t);this._lastPixelBuffer=0===h?0:Math.max(h,this._lastPixelBuffer),u.schema.source.pixelBuffer=this._lastPixelBuffer;const d=this._createTileRendererHash(r);if(d!==this._tileRendererHash){await this._initTileRenderer(r);const e=this._serviceOptions;this.effects.forEach((e=>a(e)&&a(e.filter)&&e.filter.enable())),this.tileRenderer.onConfigUpdate(r);const t={added:this._tileStrategy.tileKeys(),removed:[]},i=this.layer;\"stream\"!==i.type&&K(i.source)&&(e.source=await i.source.openPorts()),await this._proxy.startup(this.view.featuresTilingScheme,u,e,t),this.hasHighlight()&&await this._proxy.setHighlight(Array.from(this._highlightIds.keys())),await this._onceTilesUpdated(),this.tileRenderer.onConfigUpdate(r)}else{const t=await this._proxy.update(u);(t.mesh||t.targets.aggregate)&&this._lockGPUUploads();try{await this._proxy.applyUpdate(t)}catch(e){c(e)||W.error(e)}(t.mesh||t.targets.aggregate)&&this._unlockGPUUploads(),this.effects.forEach((e=>a(e)&&a(e.filter)&&e.filter.enable())),this.tileRenderer.onConfigUpdate(r),this._forceAttributeTextureUpload()}this._tileRendererHash=d,this.tileRenderer.invalidateLabels(),this.requestUpdate()}catch(e){}})),this._updateHighlight=p((async()=>this._proxy.setHighlight(Array.from(this._highlightIds.keys()))))}destroy(){var e,t;null==(e=this._proxy)||e.destroy(),r(this._updateClusterSizeTask,(e=>e.remove())),null==(t=this.tileRenderer)||t.destroy()}initialize(){this.addResolvingPromise(Promise.all([this._initProxy(),this._initServiceOptions()])),this.handles.add([this.on(\"valueRangesChanged\",(e=>{this._set(\"_aggregateValueRanges\",e.valueRanges)})),R(this,\"effect\",(e=>{this.effectLists.included.effect=null==e?void 0:e.includedEffect})),R(this,\"effect\",(e=>{this.effectLists.excluded.effect=null==e?void 0:e.excludedEffect}))])}async _initProxy(){if(\"stream\"!==this.layer.type&&\"ogc-feature\"!==this.layer.type&&this.layer.isTable)throw new u(\"featurelayerview:table-not-supported\",\"table feature layer can't be displayed\",{layer:this.layer});this._proxy&&this._proxy.destroy();const e=this._createClientOptions();return this._set(\"_proxy\",new z({client:e})),this._proxy.when()}async _initServiceOptions(){this._set(\"_serviceOptions\",await this._createServiceOptions())}get labelsVisible(){return!this.suspended&&this.layer.labelingInfo&&this.layer.labelsVisible}get effect(){return s(this._effect,null)}set effect(e){const t=this._effect;a(t)&&a(t.filter)&&t.filter.enabled&&a(e)&&a(e.filter)&&e.filter.enable(),this._effect=e,this.notifyChange(\"effect\")}get effects(){return this.effect&&[this.effect]||[]}get queryMode(){return this._serviceOptions.type}get renderingConfigHash(){if(!this.layer)return null;const e=this.availableFields,t=this.layer,i=this.view.floors,{definitionExpression:r,renderer:s,labelingInfo:n}=t,o=\"feature\"===t.type?t.gdbVersion:void 0,l=\"feature\"===t.type&&t.historicMoment?t.historicMoment.getTime():void 0,{timeExtent:h}=this,u=\"stream\"===t.type?`${JSON.stringify(t.geometryDefinition)}${t.definitionExpression}`:null,d=JSON.stringify(this.clips),p=t.featureReduction&&t.featureReduction.toJSON();return JSON.stringify({filterHash:a(this.filter)&&this.filter.toJSON(),effectHash:a(this.effect)&&this.effect.toJSON(),streamFilter:u,gdbVersion:o,definitionExpression:r,historicMoment:l,availableFields:e,renderer:s,labelingInfo:t.labelsVisible&&n,timeExtent:h,floors:i,clipsHash:d,featureReduction:p})}get hasEffects(){return this.effectLists.included.hasEffects||this.effectLists.excluded.hasEffects}highlight(e){let t;return e instanceof _?t=[e.getObjectId()]:\"number\"==typeof e||\"string\"==typeof e?t=[e]:m.isCollection(e)?t=e.map((e=>e&&e.getAttribute(this.layer.objectIdField))).toArray():Array.isArray(e)&&e.length>0&&(t=\"number\"==typeof e[0]||\"string\"==typeof e[0]?e:e.map((e=>e&&e.getAttribute(this.layer.objectIdField)))),t&&t.length?(t=t.filter((e=>null!=e)),this._addHighlight(t),{remove:()=>this._removeHighlight(t)}):{remove:()=>{}}}hasHighlight(){return!!this._highlightIds.size}hitTest(e,t){return this._hitTest(e,t)}queryStatistics(){return this._proxy.queryStatistics()}queryFeatures(e,t){return this.queryFeaturesJSON(e,t).then((e=>{const t=w.fromJSON(e);return t.features.forEach((e=>{e.layer=this.layer,e.sourceLayer=this.layer})),t}))}queryFeaturesJSON(e,t){return this._proxy.queryFeatures(this._cleanUpQuery(e),t)}queryObjectIds(e,t){return this._proxy.queryObjectIds(this._cleanUpQuery(e),t)}queryFeatureCount(e,t){return this._proxy.queryFeatureCount(this._cleanUpQuery(e),t)}queryExtent(e,t){return this._proxy.queryExtent(this._cleanUpQuery(e),t).then((e=>({count:e.count,extent:g.fromJSON(e.extent)})))}setVisibility(e,t){t?this._visibilityOverrides.delete(e):this._visibilityOverrides.add(e),this._update()}update(e){if(!this._tileStrategy||!this.tileRenderer)return;const{hasMissingTiles:t,added:i,removed:r}=this._tileStrategy.update(e);(i.length||r.length)&&this._proxy.updateTiles({added:i,removed:r}),t&&this.requestUpdate(),this.notifyChange(\"updating\")}attach(){this.view.timeline.record(`${this.layer.title} (FeatureLayer) Attach`),this._tileStrategy=new D({acquireTile:e=>this._acquireTile(e),releaseTile:e=>this._releaseTile(e),tileInfoView:this.view.featuresTilingScheme,buffer:0}),this.handles.add(R(this,\"renderingConfigHash\",(()=>this._update())),\"attach\"),\"stream\"!==this.layer.type&&this.handles.add(this.layer.on(\"edits\",(async e=>{this._set(\"_onGoingEdits\",this._onGoingEdits+1);try{const t=\"globalIdField\"in this.layer&&this.layer.globalIdField,i=e.deletedFeatures.some((e=>-1===e.objectId||!e.objectId)),r=t&&this.availableFields.includes(t);if(i&&!r)return void W.error(new u(\"mapview-apply-edits\",`Editing the specified service requires the layer's globalIdField, ${t} to be included the layer's outFields for updates to be reflected on the map`));await this._proxy.onEdits(e)}catch(t){c(t),0}this._set(\"_onGoingEdits\",Math.max(0,this._onGoingEdits-1))})),\"attach\")}detach(){this.container.removeAllChildren(),this.handles.remove(\"attach\"),this._updatingPipelineConfig=!1,this.tileRenderer&&(this.tileRenderer.uninstall(this.container),this.tileRenderer=null),this._tileStrategy&&(this._tileStrategy.destroy(),this._tileStrategy=null),this._tileRendererHash=null}moveStart(){this.requestUpdate()}viewChange(){this.requestUpdate()}moveEnd(){this.requestUpdate()}async fetchPopupFeatures(e,t){if(a(t)&&t.clientGraphics.length){const e=t.clientGraphics[0];if(e instanceof v)return[e]}const i=this.validateFetchPopupFeatures(t);if(i)throw i;if(a(t)&&0===t.clientGraphics.length)return[];const r=this.fetchClientPopupFeatures(t);if(!e)return r;const s=this._fetchServicePopupFeatures(e,t);return f([r,s]).then(d)}async _fetchServicePopupFeatures(e,t){if(\"stream\"===this.layer.type||\"ogc-feature\"===this.layer.type)return[];const i=await this.createPopupQuery(t),{layer:r}=this,{renderer:s}=r,n=a(t)?t.event:null,o=C({renderer:s,event:n});i.geometry=this.createFetchPopupFeaturesQueryGeometry(e,o);const l=new Set,{objectIdField:h}=r,u=a(t)?t.clientGraphics:null;if(u)for(const a of u)l.add(a.attributes[h]);return r.queryFeatures(i).then((e=>e.features.filter((e=>!l.has(e.attributes[h])))))}createFetchPopupFeaturesQueryGeometry(e,t){return j(e,t,this.view)}isUpdating(){return null!=this.layer.renderer&&(null!=this._updatingRequiredFieldsPromise||null==this.tileRenderer||!this._proxy||!this._proxy.isReady||this._pipelineIsUpdating||this._updatingPipelineConfig||this.tileRenderer.updating||this._onGoingEdits>0)}_createClientOptions(){return{setUpdating:e=>{this._set(\"_pipelineIsUpdating\",e)},emitEvent:e=>{this.emit(e.name,e.event)}}}async _detectQueryMode(e){if(\"path\"in e&&x(e.path)&&\"feature\"===this.layer.type&&\"point\"===this.layer.geometryType&&!this.layer.capabilities.operations.supportsEditing&&t(\"featurelayer-snapshot-enabled\"))try{const e=await this.layer.queryFeatureCount();if(e<=t(\"featurelayer-snapshot-point-min-threshold\"))return{mode:\"snapshot\",featureCount:e};const i=t(\"featurelayer-snapshot-point-max-threshold\"),r=t(\"featurelayer-snapshot-point-coverage\"),s=this.view.extent,a=this.layer.fullExtent,n=null==a?void 0:a.clone().intersection(s),o=(null==n?void 0:n.width)*(null==n?void 0:n.height),l=(null==a?void 0:a.width)*(null==a?void 0:a.height),h=0===l?0:o/l;if(e<=i&&h>=r)return{mode:\"snapshot\",featureCount:e}}catch(i){W.warn(\"mapview-feature-layer\",\"Encountered an error when querying for featureCount\",{error:i})}return{mode:\"on-demand\"}}async _createServiceOptions(){const e=this.layer;if(\"stream\"===e.type)return null;const{capabilities:t,objectIdField:r}=e,s=e.fields.map((e=>e.toJSON())),a=e.fullExtent&&e.fullExtent.toJSON(),n=N(e.geometryType),o=e.timeInfo&&e.timeInfo.toJSON()||null,l=e.spatialReference?e.spatialReference.toJSON():null,h=\"feature\"===e.type?e.customParameters:null,u=\"feature\"===e.type?e.globalIdField:null;let d;\"ogc-feature\"===e.type?d=e.source.getFeatureDefinition():K(e.source)?d=await e.source.openPorts():e.parsedUrl&&(d=i(e.parsedUrl),\"dynamicDataSource\"in e&&e.dynamicDataSource&&(d.query={layer:JSON.stringify({source:e.dynamicDataSource})}));const{mode:p,featureCount:c}=await this._detectQueryMode(d);return{type:p,featureCount:c,globalIdField:u,maxRecordCount:t.query.maxRecordCount,tileMaxRecordCount:t.query.tileMaxRecordCount,capabilities:t,fields:s,fullExtent:a,geometryType:n,objectIdField:r,source:d,timeInfo:o,spatialReference:l,customParameters:h}}async _createMemoryServiceOptions(e){const t=await e.openPorts();return{...this._createServiceOptions(),type:\"memory\",source:t}}_cleanUpQuery(e){const t=S.from(e)||this.createQuery();return t.outSpatialReference||(t.outSpatialReference=this.view.spatialReference),t}_createUpdateClusterSizeTask(e,t){return this.watch(\"_aggregateValueRanges\",(async i=>{this._updateClusterEffectiveRendererSizeVariable(e,t,i),this._updatingPipelineConfig||this.tileRenderer.onConfigUpdate(this._effectiveRenderer)}))}async _updateClusterEffectiveRendererSizeVariable(e,t,i){if(e.dynamicClusterSize&&\"visualVariables\"in e&&e.visualVariables){const r=O(e.visualVariables);if(a(r)&&\"cluster_count\"===r.field){const s=e.visualVariables.indexOf(r);e.visualVariables[s]=T(t,i);const a=e.clone();a.dynamicClusterSize=!0,this._set(\"_effectiveRenderer\",a)}}}_getEffectiveRenderer(){const e=this.layer.renderer,t=this.layer.featureReduction;if(a(this._updateClusterSizeTask)&&(this._updateClusterSizeTask.remove(),this._updateClusterSizeTask=null),t&&\"cluster\"===t.type&&P(e)){const i=t,s=[],a=q(s,e,i,this._aggregateValueRanges);return r(this._updateClusterSizeTask,(e=>e.remove())),this._updateClusterSizeTask=this._createUpdateClusterSizeTask(a,i),{renderer:a,aggregateFields:s,featureReduction:t}}return{renderer:e,aggregateFields:[],featureReduction:null}}_acquireTile(e){const t=this.tileRenderer.acquireTile(e);return t.once(\"attach\",(()=>{this.requestUpdate()})),t}_releaseTile(e){this.tileRenderer.releaseTile(e)}async _initTileRenderer(e){const t=await A(e,{layerView:this,tileInfoView:this.view.featuresTilingScheme,layer:this.layer});return this.tileRenderer&&(this._tileStrategy.clear(),this.tileRenderer.uninstall(this.container),this.tileRenderer.destroy(),this.tileRenderer=null),this.destroyed?null:(this._proxy.tileRenderer=t,this._set(\"tileRenderer\",t),this.tileRenderer.install(this.container),this.tileRenderer.onConfigUpdate(e),this.requestUpdate(),this.tileRenderer)}_createTileRendererHash(e){return`${\"heatmap\"===e.type?\"heatmap\":\"symbol\"}.${\"dot-density\"===e.type}`}_createFeatureDataHash(e,t,i){const r=e.getAttributeHash(),s=JSON.stringify(t),n=a(i)&&JSON.stringify(i.filter),o=JSON.stringify(this.timeExtent);let l=\"\";return this._visibilityOverrides.forEach((e=>l+=e)),`${r}.${s}.${n}.${o}.${l}`}get hasFilter(){const e=!!(\"floorInfo\"in this.layer&&this.layer.floorInfo&&this.view.floors&&this.view.floors.length);return!!this.filter||e||!!this._visibilityOverrides.size||!!this.timeExtent}_injectOverrides(e){const t=a(e)?e.timeExtent:null,i=a(this.timeExtent)&&a(t)?this.timeExtent.intersection(t):this.timeExtent||t;let r=null;const s=\"floorInfo\"in this.layer&&this.layer.floorInfo;if(s){const t=a(e)&&e.where;r=this._addFloorFilterClause(t)}if(!this._visibilityOverrides.size&&!i&&!s)return e;const n=a(e)&&e.clone()||new G;return n.hiddenIds=this._visibilityOverrides,n.timeExtent=i,r&&(n.where=r),n}_addFloorFilterClause(e){const t=this.layer;let i=e||\"\";if(\"floorInfo\"in t&&t.floorInfo){var r;let e=this.view.floors;if(!e||!e.length)return i;null!=(r=t.floorInfo.viewAllLevelIds)&&r.length&&(e=t.floorInfo.viewAllLevelIds);const s=e.filter((e=>\"\"!==e)).map((e=>\"'\"+e+\"'\"));s.push(\"''\");const n=t.floorInfo.floorField;let o=\"(\"+n+\" IN ({ids}) OR \"+n+\" IS NULL)\";if(o=o.replace(\"{ids}\",s.join(\", \")),a(i)&&i.includes(n)){let e=new RegExp(\"AND \\\\(\"+n+\".*NULL\\\\)\",\"g\");i=i.replace(e,\"\"),e=new RegExp(\"\\\\(\"+n+\".*NULL\\\\)\",\"g\"),i=i.replace(e,\"\"),i=i.replace(/\\s+/g,\" \").trim()}i=\"\"!==i?\"(\"+i+\") AND \"+o:o}return\"\"!==i?i:null}_createConfiguration(e,t,i){const r=\"feature\"===this.layer.type&&this.layer.historicMoment?this.layer.historicMoment.getTime():void 0,s=\"feature\"===this.layer.type?this.layer.gdbVersion:void 0,o=new Array(F),l=this._injectOverrides(t);o[0]=a(l)?l.toJSON():null,o[1]=a(i)&&i.filter?i.filter.toJSON():null;const h=H(e);if(n(h))return null;const u=U();return{definitionExpression:this.layer.definitionExpression,availableFields:this.availableFields,gdbVersion:s,historicMoment:r,devicePixelRatio:window.devicePixelRatio||1,filters:o,schema:h,supportsTextureFloat:u.supportsTextureFloat,maxTextureSize:u.maxTextureSize}}_hasRequiredSupport(e){var t;return!(\"dot-density\"===(null==(t=e.renderer)?void 0:t.type)&&!U().supportsTextureFloat)||(W.error(new u(\"webgl-missing-extension\",\"Missing WebGL extension OES_Texture_Float which is required for DotDensity\")),!1)}_onceTilesUpdated(){return this.requestUpdate(),b(this,\"_pipelineIsUpdating\",!1)}_lockGPUUploads(){this.tileRenderer&&this.tileRenderer.lockGPUUploads()}_unlockGPUUploads(){this.tileRenderer&&this.tileRenderer.unlockGPUUploads()}_forceAttributeTextureUpload(){this.tileRenderer&&this.tileRenderer.forceAttributeTextureUpload()}_update(){this.view.timeline.begin(`${this.layer.title} (FeatureLayer) Initial Pipeline Config`);const e=this._doUpdate();this._updatingPromise=e;const t=()=>{e===this._updatingPromise&&this._set(\"_updatingPipelineConfig\",!1),this.view&&this.view.timeline.end(`${this.layer.title} (FeatureLayer) Initial Pipeline Config`)};e.then(t).catch((e=>{c(e)||W.error(e),t()}))}_addHighlight(e){for(const t of e)if(this._highlightIds.has(t)){const e=this._highlightIds.get(t);this._highlightIds.set(t,e+1)}else this._highlightIds.set(t,1);this._updateHighlight().catch((e=>{c(e)||W.error(e)}))}_removeHighlight(e){for(const t of e)if(this._highlightIds.has(t)){const e=this._highlightIds.get(t)-1;0===e?this._highlightIds.delete(t):this._highlightIds.set(t,e)}this._updateHighlight().catch((e=>{c(e)||W.error(e)}))}_createHittestResult(e){return e.layer=this.layer,e.sourceLayer=this.layer,a(e.geometry)&&(e.geometry.spatialReference=this.view.spatialReference),e}async _hitTest(e,t){if(this.suspended||!this.tileRenderer)return null;const i=await this.tileRenderer.hitTest(e,t);if(0===i.length)return await y(1),null;const s=i[0];if(!B(s)){const e=await this._proxy.getFeature(s);return r(e,(e=>this._createHittestResult(_.fromJSON(e))))}const o=await this._proxy.getAggregate(s);if(n(o))return null;if(a(o.referenceId)){const e=await this._proxy.getFeature(o.referenceId);return r(e,(e=>this._createHittestResult(_.fromJSON(e))))}return this._createHittestResult(v.fromJSON(o))}};e([l()],X.prototype,\"_serviceOptions\",void 0),e([l()],X.prototype,\"_proxy\",void 0),e([l()],X.prototype,\"_pipelineIsUpdating\",void 0),e([l()],X.prototype,\"_updatingPipelineConfig\",void 0),e([l()],X.prototype,\"_effectiveRenderer\",void 0),e([l()],X.prototype,\"_aggregateValueRanges\",void 0),e([l()],X.prototype,\"_onGoingEdits\",void 0),e([l()],X.prototype,\"_isRefreshing\",void 0),e([l()],X.prototype,\"labelsVisible\",null),e([l({type:G})],X.prototype,\"filter\",void 0),e([l({type:J})],X.prototype,\"effect\",null),e([l({readOnly:!0})],X.prototype,\"effects\",null),e([l({readOnly:!0})],X.prototype,\"queryMode\",null),e([l()],X.prototype,\"renderingConfigHash\",null),e([l()],X.prototype,\"tileRenderer\",void 0),e([l()],X.prototype,\"updating\",void 0),X=e([h(\"esri.views.2d.layers.FeatureLayerView2D\")],X);var Y=X;export default Y;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../chunks/tslib.es6.js\";import\"../../core/has.js\";import t from\"../../core/Logger.js\";import\"../../core/accessorSupport/ensureType.js\";import{property as r}from\"../../core/accessorSupport/decorators/property.js\";import{subclass as s}from\"../../core/accessorSupport/decorators/subclass.js\";import\"../../core/urlUtils.js\";import\"../../core/uuid.js\";import\"../../portal/support/resourceExtension.js\";import i from\"../../core/Accessor.js\";import o from\"../../core/Evented.js\";import{IdentifiableMixin as l}from\"../../core/Identifiable.js\";import{EsriPromiseMixin as n}from\"../../core/Promise.js\";import{HandleOwnerMixin as a}from\"../../core/HandleOwner.js\";let p=class extends(a(l(n(o.EventedMixin(i))))){constructor(e){super(e),this.layer=null,this.parent=null}initialize(){this.when().catch((e=>{if(\"layerview:create-error\"!==e.name){const r=this.layer&&this.layer.id||\"no id\",s=this.layer&&this.layer.title||\"no title\";throw t.getLogger(this.declaredClass).error(\"#resolve()\",`Failed to resolve layer view (layer title: '${s}', id: '${r}')`,e),e}}))}get fullOpacity(){const e=e=>null==e?1:e;return e(this.get(\"layer.opacity\"))*e(this.get(\"parent.fullOpacity\"))}get suspended(){return!this.canResume()}get suspendInfo(){return this.getSuspendInfo()}get legendEnabled(){return!this.suspended&&!0===this.layer.legendEnabled}get updating(){return!!(this.updatingHandles&&this.updatingHandles.updating||this.isUpdating())}get visible(){return!0===this.get(\"layer.visible\")}set visible(e){void 0!==e?this._override(\"visible\",e):this._clearOverride(\"visible\")}canResume(){return!this.get(\"parent.suspended\")&&this.get(\"view.ready\")&&this.get(\"layer.loaded\")&&this.visible||!1}getSuspendInfo(){const e=this.parent&&this.parent.suspended?this.parent.suspendInfo:{},t=this;return t.view&&t.view.ready||(e.viewNotReady=!0),this.layer&&this.layer.loaded||(e.layerNotLoaded=!0),this.visible||(e.layerInvisible=!0),e}isUpdating(){return!1}};e([r()],p.prototype,\"fullOpacity\",null),e([r()],p.prototype,\"layer\",void 0),e([r()],p.prototype,\"parent\",void 0),e([r({readOnly:!0})],p.prototype,\"suspended\",null),e([r({readOnly:!0})],p.prototype,\"suspendInfo\",null),e([r({readOnly:!0})],p.prototype,\"legendEnabled\",null),e([r({type:Boolean,readOnly:!0})],p.prototype,\"updating\",null),e([r()],p.prototype,\"visible\",null),p=e([s(\"esri.views.layers.LayerView\")],p);var d=p;export default d;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{_ as t}from\"../../../chunks/tslib.es6.js\";import\"../../../core/has.js\";import\"../../../core/Logger.js\";import\"../../../core/accessorSupport/ensureType.js\";import{property as r}from\"../../../core/accessorSupport/decorators/property.js\";import{subclass as o}from\"../../../core/accessorSupport/decorators/subclass.js\";import\"../../../core/urlUtils.js\";import\"../../../core/uuid.js\";import\"../../../portal/support/resourceExtension.js\";import e from\"./ClipArea.js\";var s;let i=s=class extends e{constructor(){super(...arguments),this.type=\"rect\",this.left=null,this.right=null,this.top=null,this.bottom=null}clone(){return new s({left:this.left,right:this.right,top:this.top,bottom:this.bottom})}get version(){return(this._get(\"version\")||0)+1}};t([r({type:[Number,String],json:{write:!0}})],i.prototype,\"left\",void 0),t([r({type:[Number,String],json:{write:!0}})],i.prototype,\"right\",void 0),t([r({type:[Number,String],json:{write:!0}})],i.prototype,\"top\",void 0),t([r({type:[Number,String],json:{write:!0}})],i.prototype,\"bottom\",void 0),t([r({readOnly:!0})],i.prototype,\"version\",null),i=s=t([o(\"esri.views.layers.support.ClipRect\")],i);var p=i;export default p;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{_ as r}from\"../../../chunks/tslib.es6.js\";import\"../../../core/has.js\";import\"../../../core/Logger.js\";import\"../../../core/accessorSupport/ensureType.js\";import\"../../../core/accessorSupport/decorators/property.js\";import{subclass as o}from\"../../../core/accessorSupport/decorators/subclass.js\";import\"../../../core/urlUtils.js\";import\"../../../core/uuid.js\";import\"../../../portal/support/resourceExtension.js\";import{JSONSupport as s}from\"../../../core/JSONSupport.js\";let e=class extends s{};e=r([o(\"esri.views.layers.support.ClipArea\")],e);var p=e;export default p;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{_ as r}from\"../../../chunks/tslib.es6.js\";import\"../../../core/has.js\";import\"../../../core/Logger.js\";import\"../../../core/accessorSupport/ensureType.js\";import{property as o}from\"../../../core/accessorSupport/decorators/property.js\";import{subclass as e}from\"../../../core/accessorSupport/decorators/subclass.js\";import\"../../../core/urlUtils.js\";import\"../../../core/uuid.js\";import\"../../../portal/support/resourceExtension.js\";import t from\"../../../geometry/Geometry.js\";import s from\"../../../geometry/Extent.js\";import p from\"../../../geometry/Polygon.js\";import{fromJSON as m}from\"../../../geometry/support/jsonUtils.js\";import\"../../../geometry.js\";import i from\"./ClipArea.js\";var y;const c={base:t,key:\"type\",typeMap:{extent:s,polygon:p}};let n=y=class extends i{constructor(){super(...arguments),this.type=\"geometry\",this.geometry=null}get version(){return(this._get(\"version\")||0)+1}clone(){return new y({geometry:this.geometry.clone()})}};r([o({types:c,json:{read:m,write:!0}})],n.prototype,\"geometry\",void 0),r([o({readOnly:!0})],n.prototype,\"version\",null),n=y=r([e(\"esri.views.layers.support.Geometry\")],n);var l=n;export default l;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{_ as r}from\"../../../chunks/tslib.es6.js\";import\"../../../core/has.js\";import\"../../../core/Logger.js\";import\"../../../core/accessorSupport/ensureType.js\";import{property as o}from\"../../../core/accessorSupport/decorators/property.js\";import{subclass as s}from\"../../../core/accessorSupport/decorators/subclass.js\";import\"../../../core/urlUtils.js\";import\"../../../core/uuid.js\";import\"../../../portal/support/resourceExtension.js\";import t from\"./ClipArea.js\";let e=class extends t{constructor(){super(...arguments),this.type=\"path\",this.path=[]}get version(){return(this._get(\"version\")||0)+1}};r([o({type:[[[Number]]],json:{write:!0}})],e.prototype,\"path\",void 0),r([o({readOnly:!0})],e.prototype,\"version\",null),e=r([s(\"esri.views.layers.support.Path\")],e);var p=e;export default p;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{_ as t}from\"../../../chunks/tslib.es6.js\";import\"../../../core/has.js\";import\"../../../core/Logger.js\";import\"../../../core/accessorSupport/ensureType.js\";import{property as e}from\"../../../core/accessorSupport/decorators/property.js\";import{subclass as s}from\"../../../core/accessorSupport/decorators/subclass.js\";import\"../../../core/urlUtils.js\";import\"../../../core/uuid.js\";import\"../../../portal/support/resourceExtension.js\";import i from\"../../../core/Collection.js\";import{referenceSetter as r}from\"../../../core/collectionUtils.js\";import{init as o}from\"../../../core/watchUtils.js\";import a from\"../../layers/support/ClipArea.js\";import p from\"../../layers/support/ClipRect.js\";import{Container as h}from\"../engine/Container.js\";import n from\"../../layers/support/Geometry.js\";import d from\"../../layers/support/Path.js\";const c=i.ofType({key:\"type\",base:a,typeMap:{rect:p,path:d,geometry:n}}),l=i=>{let a=class extends i{constructor(){super(...arguments),this.clips=new c,this.moving=!1,this.attached=!1,this.lastUpdateId=-1,this.updateRequested=!1}initialize(){var t;this.container||(this.container=new h),this.container.fadeTransitionEnabled=!0,this.container.opacity=0,this.container.clips=this.clips,this.handles.add([o(this,\"suspended\",(t=>{this.container&&(this.container.visible=!t),this.view&&!t&&this.updateRequested&&this.view.requestUpdate()}),!0),o(this,[\"layer.opacity\",\"container\"],(()=>{var t,e;this.container&&(this.container.opacity=null!=(t=null==(e=this.layer)?void 0:e.opacity)?t:1)}),!0),o(this,[\"layer.blendMode\"],(t=>{this.container&&(this.container.blendMode=t)}),!0),o(this,[\"layer.effect\"],(t=>{this.container&&(this.container.effect=t)}),!0),this.clips.on(\"change\",(()=>{this.container.clips=this.clips,this.notifyChange(\"clips\")}))]),null!=(t=this.view)&&t.whenLayerView?this.view.whenLayerView(this.layer).then((t=>{t!==this||this.attached||this.destroyed||(this.attach(),this.requestUpdate(),this.attached=!0)}),(()=>{})):this.when().then((()=>{this.attached||this.destroyed||(this.attach(),this.requestUpdate(),this.attached=!0)}),(()=>{}))}destroy(){this.attached&&(this.detach(),this.attached=!1),this.handles.remove(\"initialize\"),this.updateRequested=!1}get updating(){return!this.attached||!this.suspended&&(this.updateRequested||this.isUpdating())}isVisibleAtScale(t){let e=!0;const s=this.layer,i=s.minScale,r=s.maxScale;if(null!=i&&null!=r){let s=!i,o=!r;!s&&t<=i&&(s=!0),!o&&t>=r&&(o=!0),e=s&&o}return e}requestUpdate(){this.destroyed||this.updateRequested||(this.updateRequested=!0,this.suspended||this.view.requestUpdate())}processUpdate(t){!this.isFulfilled()||this.isResolved()?(this._set(\"updateParameters\",t),this.updateRequested&&!this.suspended&&(this.updateRequested=!1,this.update(t))):this.updateRequested=!1}isUpdating(){return!1}isRendering(){return!1}canResume(){return!!super.canResume()&&this.isVisibleAtScale(this.view.scale)}};return t([e({type:c,set(t){const e=r(t,this._get(\"clips\"),c);this._set(\"clips\",e)}})],a.prototype,\"clips\",void 0),t([e()],a.prototype,\"moving\",void 0),t([e()],a.prototype,\"attached\",void 0),t([e()],a.prototype,\"container\",void 0),t([e()],a.prototype,\"suspended\",void 0),t([e({readOnly:!0})],a.prototype,\"updateParameters\",void 0),t([e()],a.prototype,\"updateRequested\",void 0),t([e()],a.prototype,\"updating\",null),t([e()],a.prototype,\"view\",void 0),a=t([s(\"esri.views.2d.layers.LayerView2D\")],a),a};export{l as LayerView2DMixin};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nfunction t(t,e){return e?\"xoffset\"in e&&e.xoffset?Math.max(t,Math.abs(e.xoffset)):\"yoffset\"in e&&e.yoffset?Math.max(t,Math.abs(e.yoffset||0)):t:t}function e(t){let e=0,n=0;for(let r=0;r<t.length;r++){const s=t[r].size;\"number\"==typeof s&&(e+=s,n++)}return e/n}function n(t,n){return\"number\"==typeof t?t:t&&t.stops&&t.stops.length?e(t.stops):n}function r(t,e){if(!e)return t;const r=e.filter((t=>\"size\"===t.type)).map((e=>{const{maxSize:r,minSize:s}=e;return(n(r,t)+n(s,t))/2}));let s=0;const o=r.length;if(0===o)return t;for(let n=0;n<o;n++)s+=r[n];const f=Math.floor(s/o);return Math.max(f,t)}function s(e){const n=e&&e.renderer,s=\"touch\"===(e&&e.event&&e.event.pointerType)?9:6;if(!n)return s;const o=\"visualVariables\"in n?r(s,n.visualVariables):s;if(\"simple\"===n.type)return t(o,n.symbol);if(\"unique-value\"===n.type){let e=o;return n.uniqueValueInfos.forEach((n=>{e=t(e,n.symbol)})),e}if(\"class-breaks\"===n.type){let e=o;return n.classBreakInfos.forEach((n=>{e=t(e,n.symbol)})),e}return n.type,o}export{s as calculateTolerance};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport e from\"../../../../core/Logger.js\";import s from\"../../../../core/Error.js\";import{WGLVVFlag as i}from\"./enums.js\";import{isNumber as r}from\"./Utils.js\";const l=e.getLogger(\"esri.views.2d.engine.webgl\");function o(e){return r(e.minDataValue)&&r(e.maxDataValue)&&null!=e.minSize&&null!=e.maxSize?i.SIZE_MINMAX_VALUE:(e.expression&&\"view.scale\"===e.expression||e.valueExpression&&\"$view.scale\"===e.valueExpression)&&Array.isArray(e.stops)?i.SIZE_SCALE_STOPS:(null!=e.field||e.expression&&\"view.scale\"!==e.expression||e.valueExpression&&\"$view.scale\"!==e.valueExpression)&&(Array.isArray(e.stops)||\"levels\"in e&&e.levels)?i.SIZE_FIELD_STOPS:(null!=e.field||e.expression&&\"view.scale\"!==e.expression||e.valueExpression&&\"$view.scale\"!==e.valueExpression)&&null!=e.valueUnit?i.SIZE_UNIT_VALUE:(l.error(new s(\"mapview-bad-type\",\"Found invalid size VisualVariable\",e)),i.NONE)}export{o as getTypeOfSizeVisualVariable};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{isSome as e,isNone as t}from\"../../core/maybe.js\";import r from\"../../geometry/Extent.js\";import\"../../geometry.js\";import{getMetersPerUnitForSR as n}from\"../../core/unitUtils.js\";import{calculateTolerance as i}from\"../../renderers/support/clickToleranceUtils.js\";function a(t,i,a,o=new r){let s;if(\"2d\"===a.type)s=i*a.resolution;else if(\"3d\"===a.type){const r=a.overlayPixelSizeInMapUnits(t),o=a.basemapSpatialReference;s=e(o)&&!o.equals(a.spatialReference)?n(o)/n(a.spatialReference):i*r}const m=t.x-s,p=t.y-s,c=t.x+s,l=t.y+s,{spatialReference:f}=a;return o.xmin=Math.min(m,c),o.ymin=Math.min(p,l),o.xmax=Math.max(m,c),o.ymax=Math.max(p,l),o.spatialReference=f,o}function o(e,r,n){const o=n.toMap(e);if(t(o))return!1;return a(o,i(),n,s).intersects(r)}const s=new r;export{a as createQueryGeometry,o as intersectsDrapedGeometry};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{isSome as e}from\"../../../core/maybe.js\";import{getFeatureEditFields as p,fixFields as l,hasField as t}from\"../../../layers/support/fieldUtils.js\";async function i(i,d=i.popupTemplate){if(!e(d))return[];const o=await d.getRequiredFields(i.fields),{lastEditInfoEnabled:s}=d,{objectIdField:u,typeIdField:a,globalIdField:n,relationships:f}=i;if(o.includes(\"*\"))return[\"*\"];const r=s?await p(i):[],m=l(i.fields,[...o,...r]);return a&&m.push(a),m&&u&&t(i.fields,u)&&-1===m.indexOf(u)&&m.push(u),m&&n&&t(i.fields,n)&&-1===m.indexOf(n)&&m.push(n),f&&f.forEach((e=>{const{keyField:p}=e;m&&p&&t(i.fields,p)&&-1===m.indexOf(p)&&m.push(p)})),m}function d(p,l){return p.popupTemplate?p.popupTemplate:e(l)&&l.defaultPopupTemplateEnabled&&e(p.defaultPopupTemplate)?p.defaultPopupTemplate:null}export{d as getFetchPopupTemplate,i as getRequiredFields};\n"],"sourceRoot":""}