(this.webpackJsonpimaps=this.webpackJsonpimaps||[]).push([[119,58,240],{118:function(t,e,n){"use strict";n.d(e,"a",(function(){return T})),n.d(e,"b",(function(){return m})),n.d(e,"c",(function(){return y})),n.d(e,"d",(function(){return b})),n.d(e,"e",(function(){return o})),n.d(e,"f",(function(){return O})),n.d(e,"g",(function(){return _})),n.d(e,"h",(function(){return x})),n.d(e,"i",(function(){return j})),n.d(e,"j",(function(){return M})),n.d(e,"k",(function(){return a})),n.d(e,"l",(function(){return s})),n.d(e,"m",(function(){return w})),n.d(e,"n",(function(){return f})),n.d(e,"o",(function(){return h})),n.d(e,"p",(function(){return d})),n.d(e,"q",(function(){return c})),n.d(e,"r",(function(){return u})),n.d(e,"s",(function(){return g})),n.d(e,"t",(function(){return I})),n.d(e,"u",(function(){return F})),n.d(e,"v",(function(){return l})),n.d(e,"w",(function(){return p}));n(82),n(116);var r=n(85),i=n(101);function s(t=v){return[t[0],t[1],t[2],t[3]]}function o(t){return[t[0],t[1],t[2],t[3]]}function a(t,e){return t!==e&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3]),t}function u(t,e,n,r,i=s()){return i[0]=t,i[1]=e,i[2]=n,i[3]=r,i}function c(t,e=s()){return e[0]=t.xmin,e[1]=t.ymin,e[2]=t.xmax,e[3]=t.ymax,e}function l(t,e){return new i.a({xmin:t[0],ymin:t[1],xmax:t[2],ymax:t[3],spatialReference:e})}function h(t,e){e[0]<t[0]&&(t[0]=e[0]),e[0]>t[2]&&(t[2]=e[0]),e[1]<t[1]&&(t[1]=e[1]),e[1]>t[3]&&(t[3]=e[1])}function f(t,e,n){if(Object(r.j)(e))a(n,t);else if("length"in e)S(e)?(n[0]=Math.min(t[0],e[0]),n[1]=Math.min(t[1],e[1]),n[2]=Math.max(t[2],e[2]),n[3]=Math.max(t[3],e[3])):2!==e.length&&3!==e.length||(n[0]=Math.min(t[0],e[0]),n[1]=Math.min(t[1],e[1]),n[2]=Math.max(t[2],e[0]),n[3]=Math.max(t[3],e[1]));else switch(e.type){case"extent":n[0]=Math.min(t[0],e.xmin),n[1]=Math.min(t[1],e.ymin),n[2]=Math.max(t[2],e.xmax),n[3]=Math.max(t[3],e.ymax);break;case"point":n[0]=Math.min(t[0],e.x),n[1]=Math.min(t[1],e.y),n[2]=Math.max(t[2],e.x),n[3]=Math.max(t[3],e.y)}}function d(t,e,n=t){const r=e.length;let i=t[0],s=t[1],o=t[2],a=t[3];for(let u=0;u<r;u++){const t=e[u];i=Math.min(i,t[0]),s=Math.min(s,t[1]),o=Math.max(o,t[0]),a=Math.max(a,t[1])}return n[0]=i,n[1]=s,n[2]=o,n[3]=a,n}function m(t){for(let e=0;e<4;e++)if(!isFinite(t[e]))return!1;return!0}function p(t){return Object(r.j)(t)||t[0]>=t[2]?0:t[2]-t[0]}function g(t){return t[1]>=t[3]?0:t[3]-t[1]}function y(t){return p(t)*g(t)}function b(t,e=[0,0]){return e[0]=(t[0]+t[2])/2,e[1]=(t[1]+t[3])/2,e}function _(t,e){return M(t,e[0],e[1])}function x(t,e){return M(t,e.x,e.y)}function M(t,e,n){return e>=t[0]&&n>=t[1]&&e<=t[2]&&n<=t[3]}function j(t,e,n){return e[0]>=t[0]-n&&e[1]>=t[1]-n&&e[0]<=t[2]+n&&e[1]<=t[3]+n}function I(t,e){return Math.max(e[0],t[0])<=Math.min(e[2],t[2])&&Math.max(e[1],t[1])<=Math.min(e[3],t[3])}function O(t,e){return e[0]>=t[0]&&e[2]<=t[2]&&e[1]>=t[1]&&e[3]<=t[3]}function F(t,e,n,r=t){return r[0]=t[0]+e,r[1]=t[1]+n,r[2]=t[2]+e,r[3]=t[3]+n,r}function w(t){return t?a(t,T):s(T)}function S(t){return null!=t&&4===t.length}const T=[1/0,1/0,-1/0,-1/0],v=[0,0,0,0]},147:function(t,e,n){"use strict";n.d(e,"a",(function(){return c})),n.d(e,"b",(function(){return M})),n.d(e,"c",(function(){return s})),n.d(e,"d",(function(){return _})),n.d(e,"e",(function(){return d})),n.d(e,"f",(function(){return y})),n.d(e,"g",(function(){return g})),n.d(e,"h",(function(){return f})),n.d(e,"i",(function(){return a})),n.d(e,"j",(function(){return h})),n.d(e,"k",(function(){return O})),n.d(e,"l",(function(){return F})),n.d(e,"m",(function(){return l})),n.d(e,"n",(function(){return S})),n.d(e,"o",(function(){return p})),n.d(e,"p",(function(){return E})),n.d(e,"q",(function(){return w})),n.d(e,"r",(function(){return m})),n.d(e,"s",(function(){return o})),n.d(e,"t",(function(){return u})),n.d(e,"u",(function(){return b})),n.d(e,"v",(function(){return z})),n.d(e,"w",(function(){return v})),n.d(e,"x",(function(){return x}));var r=n(109),i=n(189);function s(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function o(t,e,n,r,i,s,o,a,u,c,l,h,f,d,m,p,g){return t[0]=e,t[1]=n,t[2]=r,t[3]=i,t[4]=s,t[5]=o,t[6]=a,t[7]=u,t[8]=c,t[9]=l,t[10]=h,t[11]=f,t[12]=d,t[13]=m,t[14]=p,t[15]=g,t}function a(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function u(t,e){if(t===e){const n=e[1],r=e[2],i=e[3],s=e[6],o=e[7],a=e[11];t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=n,t[6]=e[9],t[7]=e[13],t[8]=r,t[9]=s,t[11]=e[14],t[12]=i,t[13]=o,t[14]=a}else t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=e[1],t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=e[2],t[9]=e[6],t[10]=e[10],t[11]=e[14],t[12]=e[3],t[13]=e[7],t[14]=e[11],t[15]=e[15];return t}function c(t,e){const n=e[0],r=e[1],i=e[2],s=e[3],o=e[4],a=e[5],u=e[6],c=e[7],l=e[8],h=e[9],f=e[10],d=e[11],m=e[12],p=e[13],g=e[14],y=e[15],b=n*a-r*o,_=n*u-i*o,x=n*c-s*o,M=r*u-i*a,j=r*c-s*a,I=i*c-s*u,O=l*p-h*m,F=l*g-f*m,w=l*y-d*m,S=h*g-f*p,T=h*y-d*p,v=f*y-d*g;let z=b*v-_*T+x*S+M*w-j*F+I*O;return z?(z=1/z,t[0]=(a*v-u*T+c*S)*z,t[1]=(i*T-r*v-s*S)*z,t[2]=(p*I-g*j+y*M)*z,t[3]=(f*j-h*I-d*M)*z,t[4]=(u*w-o*v-c*F)*z,t[5]=(n*v-i*w+s*F)*z,t[6]=(g*x-m*I-y*_)*z,t[7]=(l*I-f*x+d*_)*z,t[8]=(o*T-a*w+c*O)*z,t[9]=(r*w-n*T-s*O)*z,t[10]=(m*j-p*x+y*b)*z,t[11]=(h*x-l*j-d*b)*z,t[12]=(a*F-o*S-u*O)*z,t[13]=(n*S-r*F+i*O)*z,t[14]=(p*_-m*M-g*b)*z,t[15]=(l*M-h*_+f*b)*z,t):null}function l(t,e,n){const r=e[0],i=e[1],s=e[2],o=e[3],a=e[4],u=e[5],c=e[6],l=e[7],h=e[8],f=e[9],d=e[10],m=e[11],p=e[12],g=e[13],y=e[14],b=e[15];let _=n[0],x=n[1],M=n[2],j=n[3];return t[0]=_*r+x*a+M*h+j*p,t[1]=_*i+x*u+M*f+j*g,t[2]=_*s+x*c+M*d+j*y,t[3]=_*o+x*l+M*m+j*b,_=n[4],x=n[5],M=n[6],j=n[7],t[4]=_*r+x*a+M*h+j*p,t[5]=_*i+x*u+M*f+j*g,t[6]=_*s+x*c+M*d+j*y,t[7]=_*o+x*l+M*m+j*b,_=n[8],x=n[9],M=n[10],j=n[11],t[8]=_*r+x*a+M*h+j*p,t[9]=_*i+x*u+M*f+j*g,t[10]=_*s+x*c+M*d+j*y,t[11]=_*o+x*l+M*m+j*b,_=n[12],x=n[13],M=n[14],j=n[15],t[12]=_*r+x*a+M*h+j*p,t[13]=_*i+x*u+M*f+j*g,t[14]=_*s+x*c+M*d+j*y,t[15]=_*o+x*l+M*m+j*b,t}function h(t,e,n){const r=n[0],i=n[1],s=n[2];let o,a,u,c,l,h,f,d,m,p,g,y;return e===t?(t[12]=e[0]*r+e[4]*i+e[8]*s+e[12],t[13]=e[1]*r+e[5]*i+e[9]*s+e[13],t[14]=e[2]*r+e[6]*i+e[10]*s+e[14],t[15]=e[3]*r+e[7]*i+e[11]*s+e[15]):(o=e[0],a=e[1],u=e[2],c=e[3],l=e[4],h=e[5],f=e[6],d=e[7],m=e[8],p=e[9],g=e[10],y=e[11],t[0]=o,t[1]=a,t[2]=u,t[3]=c,t[4]=l,t[5]=h,t[6]=f,t[7]=d,t[8]=m,t[9]=p,t[10]=g,t[11]=y,t[12]=o*r+l*i+m*s+e[12],t[13]=a*r+h*i+p*s+e[13],t[14]=u*r+f*i+g*s+e[14],t[15]=c*r+d*i+y*s+e[15]),t}function f(t,e,n){const r=n[0],i=n[1],s=n[2];return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t[4]=e[4]*i,t[5]=e[5]*i,t[6]=e[6]*i,t[7]=e[7]*i,t[8]=e[8]*s,t[9]=e[9]*s,t[10]=e[10]*s,t[11]=e[11]*s,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function d(t,e,n,r){let s,o,a,u,c,l,h,f,d,m,p,g,y,b,_,x,M,j,I,O,F,w,S,T,v=r[0],z=r[1],E=r[2],R=Math.sqrt(v*v+z*z+E*E);return R<i.a?null:(R=1/R,v*=R,z*=R,E*=R,s=Math.sin(n),o=Math.cos(n),a=1-o,u=e[0],c=e[1],l=e[2],h=e[3],f=e[4],d=e[5],m=e[6],p=e[7],g=e[8],y=e[9],b=e[10],_=e[11],x=v*v*a+o,M=z*v*a+E*s,j=E*v*a-z*s,I=v*z*a-E*s,O=z*z*a+o,F=E*z*a+v*s,w=v*E*a+z*s,S=z*E*a-v*s,T=E*E*a+o,t[0]=u*x+f*M+g*j,t[1]=c*x+d*M+y*j,t[2]=l*x+m*M+b*j,t[3]=h*x+p*M+_*j,t[4]=u*I+f*O+g*F,t[5]=c*I+d*O+y*F,t[6]=l*I+m*O+b*F,t[7]=h*I+p*O+_*F,t[8]=u*w+f*S+g*T,t[9]=c*w+d*S+y*T,t[10]=l*w+m*S+b*T,t[11]=h*w+p*S+_*T,e!==t&&(t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t)}function m(t,e,n){const r=Math.sin(n),i=Math.cos(n),s=e[4],o=e[5],a=e[6],u=e[7],c=e[8],l=e[9],h=e[10],f=e[11];return e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=s*i+c*r,t[5]=o*i+l*r,t[6]=a*i+h*r,t[7]=u*i+f*r,t[8]=c*i-s*r,t[9]=l*i-o*r,t[10]=h*i-a*r,t[11]=f*i-u*r,t}function p(t,e,n){const r=Math.sin(n),i=Math.cos(n),s=e[0],o=e[1],a=e[2],u=e[3],c=e[8],l=e[9],h=e[10],f=e[11];return e!==t&&(t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=s*i-c*r,t[1]=o*i-l*r,t[2]=a*i-h*r,t[3]=u*i-f*r,t[8]=s*r+c*i,t[9]=o*r+l*i,t[10]=a*r+h*i,t[11]=u*r+f*i,t}function g(t,e,n){const r=Math.sin(n),i=Math.cos(n),s=e[0],o=e[1],a=e[2],u=e[3],c=e[4],l=e[5],h=e[6],f=e[7];return e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=s*i+c*r,t[1]=o*i+l*r,t[2]=a*i+h*r,t[3]=u*i+f*r,t[4]=c*i-s*r,t[5]=l*i-o*r,t[6]=h*i-a*r,t[7]=f*i-u*r,t}function y(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=e[0],t[13]=e[1],t[14]=e[2],t[15]=1,t}function b(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=e[2],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function _(t,e,n){let r,s,o,a=n[0],u=n[1],c=n[2],l=Math.sqrt(a*a+u*u+c*c);return l<i.a?null:(l=1/l,a*=l,u*=l,c*=l,r=Math.sin(e),s=Math.cos(e),o=1-s,t[0]=a*a*o+s,t[1]=u*a*o+c*r,t[2]=c*a*o-u*r,t[3]=0,t[4]=a*u*o-c*r,t[5]=u*u*o+s,t[6]=c*u*o+a*r,t[7]=0,t[8]=a*c*o+u*r,t[9]=u*c*o-a*r,t[10]=c*c*o+s,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t)}function x(t,e){const n=Math.sin(e),r=Math.cos(e);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=r,t[6]=n,t[7]=0,t[8]=0,t[9]=-n,t[10]=r,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function M(t,e){const n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=n,t[2]=0,t[3]=0,t[4]=-n,t[5]=r,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function j(t,e,n){const r=e[0],i=e[1],s=e[2],o=e[3],a=r+r,u=i+i,c=s+s,l=r*a,h=r*u,f=r*c,d=i*u,m=i*c,p=s*c,g=o*a,y=o*u,b=o*c;return t[0]=1-(d+p),t[1]=h+b,t[2]=f-y,t[3]=0,t[4]=h-b,t[5]=1-(l+p),t[6]=m+g,t[7]=0,t[8]=f+y,t[9]=m-g,t[10]=1-(l+d),t[11]=0,t[12]=n[0],t[13]=n[1],t[14]=n[2],t[15]=1,t}const I=Object(r.f)();function O(t,e){const n=e[0],r=e[1],i=e[2],s=e[3],o=n+n,a=r+r,u=i+i,c=n*o,l=r*o,h=r*a,f=i*o,d=i*a,m=i*u,p=s*o,g=s*a,y=s*u;return t[0]=1-h-m,t[1]=l+y,t[2]=f-g,t[3]=0,t[4]=l-y,t[5]=1-c-m,t[6]=d+p,t[7]=0,t[8]=f+g,t[9]=d-p,t[10]=1-c-h,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function F(t,e,n,r,i,s,o){const a=1/(n-e),u=1/(i-r),c=1/(s-o);return t[0]=2*s*a,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=2*s*u,t[6]=0,t[7]=0,t[8]=(n+e)*a,t[9]=(i+r)*u,t[10]=(o+s)*c,t[11]=-1,t[12]=0,t[13]=0,t[14]=o*s*2*c,t[15]=0,t}function w(t,e,n,r,i,s,o){const a=1/(e-n),u=1/(r-i),c=1/(s-o);return t[0]=-2*a,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*u,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*c,t[11]=0,t[12]=(e+n)*a,t[13]=(i+r)*u,t[14]=(o+s)*c,t[15]=1,t}function S(t,e,n,r){let s,o,u,c,l,h,f,d,m,p;const g=e[0],y=e[1],b=e[2],_=r[0],x=r[1],M=r[2],j=n[0],I=n[1],O=n[2];return Math.abs(g-j)<i.a&&Math.abs(y-I)<i.a&&Math.abs(b-O)<i.a?a(t):(f=g-j,d=y-I,m=b-O,p=1/Math.sqrt(f*f+d*d+m*m),f*=p,d*=p,m*=p,s=x*m-M*d,o=M*f-_*m,u=_*d-x*f,p=Math.sqrt(s*s+o*o+u*u),p?(p=1/p,s*=p,o*=p,u*=p):(s=0,o=0,u=0),c=d*u-m*o,l=m*s-f*u,h=f*o-d*s,p=Math.sqrt(c*c+l*l+h*h),p?(p=1/p,c*=p,l*=p,h*=p):(c=0,l=0,h=0),t[0]=s,t[1]=c,t[2]=f,t[3]=0,t[4]=o,t[5]=l,t[6]=d,t[7]=0,t[8]=u,t[9]=h,t[10]=m,t[11]=0,t[12]=-(s*g+o*y+u*b),t[13]=-(c*g+l*y+h*b),t[14]=-(f*g+d*y+m*b),t[15]=1,t)}function T(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t[4]=e[4]-n[4],t[5]=e[5]-n[5],t[6]=e[6]-n[6],t[7]=e[7]-n[7],t[8]=e[8]-n[8],t[9]=e[9]-n[9],t[10]=e[10]-n[10],t[11]=e[11]-n[11],t[12]=e[12]-n[12],t[13]=e[13]-n[13],t[14]=e[14]-n[14],t[15]=e[15]-n[15],t}function v(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]&&t[9]===e[9]&&t[10]===e[10]&&t[11]===e[11]&&t[12]===e[12]&&t[13]===e[13]&&t[14]===e[14]&&t[15]===e[15]}function z(t,e){if(t===e)return!0;const n=t[0],r=t[1],s=t[2],o=t[3],a=t[4],u=t[5],c=t[6],l=t[7],h=t[8],f=t[9],d=t[10],m=t[11],p=t[12],g=t[13],y=t[14],b=t[15],_=e[0],x=e[1],M=e[2],j=e[3],I=e[4],O=e[5],F=e[6],w=e[7],S=e[8],T=e[9],v=e[10],z=e[11],E=e[12],R=e[13],N=e[14],A=e[15];return Math.abs(n-_)<=i.a*Math.max(1,Math.abs(n),Math.abs(_))&&Math.abs(r-x)<=i.a*Math.max(1,Math.abs(r),Math.abs(x))&&Math.abs(s-M)<=i.a*Math.max(1,Math.abs(s),Math.abs(M))&&Math.abs(o-j)<=i.a*Math.max(1,Math.abs(o),Math.abs(j))&&Math.abs(a-I)<=i.a*Math.max(1,Math.abs(a),Math.abs(I))&&Math.abs(u-O)<=i.a*Math.max(1,Math.abs(u),Math.abs(O))&&Math.abs(c-F)<=i.a*Math.max(1,Math.abs(c),Math.abs(F))&&Math.abs(l-w)<=i.a*Math.max(1,Math.abs(l),Math.abs(w))&&Math.abs(h-S)<=i.a*Math.max(1,Math.abs(h),Math.abs(S))&&Math.abs(f-T)<=i.a*Math.max(1,Math.abs(f),Math.abs(T))&&Math.abs(d-v)<=i.a*Math.max(1,Math.abs(d),Math.abs(v))&&Math.abs(m-z)<=i.a*Math.max(1,Math.abs(m),Math.abs(z))&&Math.abs(p-E)<=i.a*Math.max(1,Math.abs(p),Math.abs(E))&&Math.abs(g-R)<=i.a*Math.max(1,Math.abs(g),Math.abs(R))&&Math.abs(y-N)<=i.a*Math.max(1,Math.abs(y),Math.abs(N))&&Math.abs(b-A)<=i.a*Math.max(1,Math.abs(b),Math.abs(A))}function E(t){const e=i.a,n=t[0],r=t[1],s=t[2],o=t[4],a=t[5],u=t[6],c=t[8],l=t[9],h=t[10];return Math.abs(1-(n*n+o*o+c*c))<=e&&Math.abs(1-(r*r+a*a+l*l))<=e&&Math.abs(1-(s*s+u*u+h*h))<=e}const R=l,N=T;Object.freeze({__proto__:null,copy:s,set:o,identity:a,transpose:u,invert:c,adjoint:function(t,e){const n=e[0],r=e[1],i=e[2],s=e[3],o=e[4],a=e[5],u=e[6],c=e[7],l=e[8],h=e[9],f=e[10],d=e[11],m=e[12],p=e[13],g=e[14],y=e[15];return t[0]=a*(f*y-d*g)-h*(u*y-c*g)+p*(u*d-c*f),t[1]=-(r*(f*y-d*g)-h*(i*y-s*g)+p*(i*d-s*f)),t[2]=r*(u*y-c*g)-a*(i*y-s*g)+p*(i*c-s*u),t[3]=-(r*(u*d-c*f)-a*(i*d-s*f)+h*(i*c-s*u)),t[4]=-(o*(f*y-d*g)-l*(u*y-c*g)+m*(u*d-c*f)),t[5]=n*(f*y-d*g)-l*(i*y-s*g)+m*(i*d-s*f),t[6]=-(n*(u*y-c*g)-o*(i*y-s*g)+m*(i*c-s*u)),t[7]=n*(u*d-c*f)-o*(i*d-s*f)+l*(i*c-s*u),t[8]=o*(h*y-d*p)-l*(a*y-c*p)+m*(a*d-c*h),t[9]=-(n*(h*y-d*p)-l*(r*y-s*p)+m*(r*d-s*h)),t[10]=n*(a*y-c*p)-o*(r*y-s*p)+m*(r*c-s*a),t[11]=-(n*(a*d-c*h)-o*(r*d-s*h)+l*(r*c-s*a)),t[12]=-(o*(h*g-f*p)-l*(a*g-u*p)+m*(a*f-u*h)),t[13]=n*(h*g-f*p)-l*(r*g-i*p)+m*(r*f-i*h),t[14]=-(n*(a*g-u*p)-o*(r*g-i*p)+m*(r*u-i*a)),t[15]=n*(a*f-u*h)-o*(r*f-i*h)+l*(r*u-i*a),t},determinant:function(t){const e=t[0],n=t[1],r=t[2],i=t[3],s=t[4],o=t[5],a=t[6],u=t[7],c=t[8],l=t[9],h=t[10],f=t[11],d=t[12],m=t[13],p=t[14],g=t[15];return(e*o-n*s)*(h*g-f*p)-(e*a-r*s)*(l*g-f*m)+(e*u-i*s)*(l*p-h*m)+(n*a-r*o)*(c*g-f*d)-(n*u-i*o)*(c*p-h*d)+(r*u-i*a)*(c*m-l*d)},multiply:l,translate:h,scale:f,rotate:d,rotateX:m,rotateY:p,rotateZ:g,fromTranslation:y,fromScaling:b,fromRotation:_,fromXRotation:x,fromYRotation:function(t,e){const n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=0,t[2]=-n,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=n,t[9]=0,t[10]=r,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},fromZRotation:M,fromRotationTranslation:j,fromQuat2:function(t,e){const n=I,r=-e[0],i=-e[1],s=-e[2],o=e[3],a=e[4],u=e[5],c=e[6],l=e[7],h=r*r+i*i+s*s+o*o;return h>0?(n[0]=2*(a*o+l*r+u*s-c*i)/h,n[1]=2*(u*o+l*i+c*r-a*s)/h,n[2]=2*(c*o+l*s+a*i-u*r)/h):(n[0]=2*(a*o+l*r+u*s-c*i),n[1]=2*(u*o+l*i+c*r-a*s),n[2]=2*(c*o+l*s+a*i-u*r)),j(t,e,n),t},getTranslation:function(t,e){return t[0]=e[12],t[1]=e[13],t[2]=e[14],t},getScaling:function(t,e){const n=e[0],r=e[1],i=e[2],s=e[4],o=e[5],a=e[6],u=e[8],c=e[9],l=e[10];return t[0]=Math.sqrt(n*n+r*r+i*i),t[1]=Math.sqrt(s*s+o*o+a*a),t[2]=Math.sqrt(u*u+c*c+l*l),t},getRotation:function(t,e){const n=e[0]+e[5]+e[10];let r=0;return n>0?(r=2*Math.sqrt(n+1),t[3]=.25*r,t[0]=(e[6]-e[9])/r,t[1]=(e[8]-e[2])/r,t[2]=(e[1]-e[4])/r):e[0]>e[5]&&e[0]>e[10]?(r=2*Math.sqrt(1+e[0]-e[5]-e[10]),t[3]=(e[6]-e[9])/r,t[0]=.25*r,t[1]=(e[1]+e[4])/r,t[2]=(e[8]+e[2])/r):e[5]>e[10]?(r=2*Math.sqrt(1+e[5]-e[0]-e[10]),t[3]=(e[8]-e[2])/r,t[0]=(e[1]+e[4])/r,t[1]=.25*r,t[2]=(e[6]+e[9])/r):(r=2*Math.sqrt(1+e[10]-e[0]-e[5]),t[3]=(e[1]-e[4])/r,t[0]=(e[8]+e[2])/r,t[1]=(e[6]+e[9])/r,t[2]=.25*r),t},fromRotationTranslationScale:function(t,e,n,r){const i=e[0],s=e[1],o=e[2],a=e[3],u=i+i,c=s+s,l=o+o,h=i*u,f=i*c,d=i*l,m=s*c,p=s*l,g=o*l,y=a*u,b=a*c,_=a*l,x=r[0],M=r[1],j=r[2];return t[0]=(1-(m+g))*x,t[1]=(f+_)*x,t[2]=(d-b)*x,t[3]=0,t[4]=(f-_)*M,t[5]=(1-(h+g))*M,t[6]=(p+y)*M,t[7]=0,t[8]=(d+b)*j,t[9]=(p-y)*j,t[10]=(1-(h+m))*j,t[11]=0,t[12]=n[0],t[13]=n[1],t[14]=n[2],t[15]=1,t},fromRotationTranslationScaleOrigin:function(t,e,n,r,i){const s=e[0],o=e[1],a=e[2],u=e[3],c=s+s,l=o+o,h=a+a,f=s*c,d=s*l,m=s*h,p=o*l,g=o*h,y=a*h,b=u*c,_=u*l,x=u*h,M=r[0],j=r[1],I=r[2],O=i[0],F=i[1],w=i[2],S=(1-(p+y))*M,T=(d+x)*M,v=(m-_)*M,z=(d-x)*j,E=(1-(f+y))*j,R=(g+b)*j,N=(m+_)*I,A=(g-b)*I,P=(1-(f+p))*I;return t[0]=S,t[1]=T,t[2]=v,t[3]=0,t[4]=z,t[5]=E,t[6]=R,t[7]=0,t[8]=N,t[9]=A,t[10]=P,t[11]=0,t[12]=n[0]+O-(S*O+z*F+N*w),t[13]=n[1]+F-(T*O+E*F+A*w),t[14]=n[2]+w-(v*O+R*F+P*w),t[15]=1,t},fromQuat:O,frustum:F,perspective:function(t,e,n,r,i){const s=1/Math.tan(e/2);let o;return t[0]=s/n,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=s,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=i&&i!==1/0?(o=1/(r-i),t[10]=(i+r)*o,t[14]=2*i*r*o):(t[10]=-1,t[14]=-2*r),t},perspectiveFromFieldOfView:function(t,e,n,r){const i=Math.tan(e.upDegrees*Math.PI/180),s=Math.tan(e.downDegrees*Math.PI/180),o=Math.tan(e.leftDegrees*Math.PI/180),a=Math.tan(e.rightDegrees*Math.PI/180),u=2/(o+a),c=2/(i+s);return t[0]=u,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=c,t[6]=0,t[7]=0,t[8]=-(o-a)*u*.5,t[9]=(i-s)*c*.5,t[10]=r/(n-r),t[11]=-1,t[12]=0,t[13]=0,t[14]=r*n/(n-r),t[15]=0,t},ortho:w,lookAt:S,targetTo:function(t,e,n,r){const i=e[0],s=e[1],o=e[2],a=r[0],u=r[1],c=r[2];let l=i-n[0],h=s-n[1],f=o-n[2],d=l*l+h*h+f*f;d>0&&(d=1/Math.sqrt(d),l*=d,h*=d,f*=d);let m=u*f-c*h,p=c*l-a*f,g=a*h-u*l;return d=m*m+p*p+g*g,d>0&&(d=1/Math.sqrt(d),m*=d,p*=d,g*=d),t[0]=m,t[1]=p,t[2]=g,t[3]=0,t[4]=h*g-f*p,t[5]=f*m-l*g,t[6]=l*p-h*m,t[7]=0,t[8]=l,t[9]=h,t[10]=f,t[11]=0,t[12]=i,t[13]=s,t[14]=o,t[15]=1,t},str:function(t){return"mat4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+", "+t[9]+", "+t[10]+", "+t[11]+", "+t[12]+", "+t[13]+", "+t[14]+", "+t[15]+")"},frob:function(t){return Math.sqrt(t[0]**2+t[1]**2+t[2]**2+t[3]**2+t[4]**2+t[5]**2+t[6]**2+t[7]**2+t[8]**2+t[9]**2+t[10]**2+t[11]**2+t[12]**2+t[13]**2+t[14]**2+t[15]**2)},add:function(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t[4]=e[4]+n[4],t[5]=e[5]+n[5],t[6]=e[6]+n[6],t[7]=e[7]+n[7],t[8]=e[8]+n[8],t[9]=e[9]+n[9],t[10]=e[10]+n[10],t[11]=e[11]+n[11],t[12]=e[12]+n[12],t[13]=e[13]+n[13],t[14]=e[14]+n[14],t[15]=e[15]+n[15],t},subtract:T,multiplyScalar:function(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*n,t[5]=e[5]*n,t[6]=e[6]*n,t[7]=e[7]*n,t[8]=e[8]*n,t[9]=e[9]*n,t[10]=e[10]*n,t[11]=e[11]*n,t[12]=e[12]*n,t[13]=e[13]*n,t[14]=e[14]*n,t[15]=e[15]*n,t},multiplyScalarAndAdd:function(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t[3]=e[3]+n[3]*r,t[4]=e[4]+n[4]*r,t[5]=e[5]+n[5]*r,t[6]=e[6]+n[6]*r,t[7]=e[7]+n[7]*r,t[8]=e[8]+n[8]*r,t[9]=e[9]+n[9]*r,t[10]=e[10]+n[10]*r,t[11]=e[11]+n[11]*r,t[12]=e[12]+n[12]*r,t[13]=e[13]+n[13]*r,t[14]=e[14]+n[14]*r,t[15]=e[15]+n[15]*r,t},exactEquals:v,equals:z,isOrthoNormal:E,mul:R,sub:N})},160:function(t,e,n){"use strict";n.d(e,"a",(function(){return Y})),n.d(e,"b",(function(){return K})),n.d(e,"c",(function(){return U})),n.d(e,"d",(function(){return X})),n.d(e,"e",(function(){return $})),n.d(e,"f",(function(){return C})),n.d(e,"g",(function(){return Z})),n.d(e,"h",(function(){return V})),n.d(e,"i",(function(){return B})),n.d(e,"j",(function(){return H})),n.d(e,"k",(function(){return J})),n.d(e,"l",(function(){return N})),n.d(e,"m",(function(){return j})),n.d(e,"n",(function(){return k})),n.d(e,"o",(function(){return G})),n.d(e,"p",(function(){return ht})),n.d(e,"q",(function(){return rt})),n.d(e,"r",(function(){return ot})),n.d(e,"s",(function(){return lt})),n.d(e,"t",(function(){return et})),n.d(e,"u",(function(){return nt})),n.d(e,"v",(function(){return b})),n.d(e,"w",(function(){return _})),n.d(e,"x",(function(){return ut})),n.d(e,"y",(function(){return tt})),n.d(e,"z",(function(){return at}));var r=n(88),i=n(87),s=n(85),o=n(97),a=n(262),u=n(332),c=n(168);function l(t,e){return t?e?4:3:e?3:2}const h=i.a.getLogger("esri.layers.graphics.featureConversionUtils"),f={esriGeometryPoint:0,esriGeometryPolyline:2,esriGeometryPolygon:3,esriGeometryMultipoint:0},d=(t,e,n,r,i,s)=>{t[n]=i,t[n+1]=s},m=(t,e,n,r,i,s)=>{t[n]=i,t[n+1]=s,t[n+2]=e[r+2]},p=(t,e,n,r,i,s)=>{t[n]=i,t[n+1]=s,t[n+2]=e[r+3]},g=(t,e,n,r,i,s)=>{t[n]=i,t[n+1]=s,t[n+2]=e[r+2],t[n+3]=e[r+3]};function y(t,e,n,r){if(t){if(n)return e&&r?g:m;if(e&&r)return p}else if(e&&r)return m;return d}function b({scale:t,translate:e},n){return Math.round((n-e[0])/t[0])}function _({scale:t,translate:e},n){return Math.round((e[1]-n)/t[1])}function x({scale:t,translate:e},n){return n*t[0]+e[0]}function M({scale:t,translate:e},n){return e[1]-n*t[1]}function j(t,e,n){return t?e?n?v(t):F(t):n?S(t):I(t):null}function I(t){const e=t.coords;return{x:e[0],y:e[1]}}function O(t,e){return t.coords[0]=e.x,t.coords[1]=e.y,t}function F(t){const e=t.coords;return{x:e[0],y:e[1],z:e[2]}}function w(t,e){return t.coords[0]=e.x,t.coords[1]=e.y,t.coords[2]=e.z,t}function S(t){const e=t.coords;return{x:e[0],y:e[1],m:e[2]}}function T(t,e){return t.coords[0]=e.x,t.coords[1]=e.y,t.coords[2]=e.m,t}function v(t){const e=t.coords;return{x:e[0],y:e[1],z:e[2],m:e[3]}}function z(t,e){return t.coords[0]=e.x,t.coords[1]=e.y,t.coords[2]=e.z,t.coords[3]=e.m,t}function E(t,e){return t&&e?z:t?w:e?T:O}function R(t,e,n,r,i){const s=E(n,r);for(const o of e){const{geometry:e,attributes:n}=o;let r;e&&(r=s(new c.a,e)),t.push(new a.a(r,n,null,n[i]))}return t}function N(t,e,n){if(Object(s.j)(t))return null;const r=l(e,n),i=[];for(let s=0;s<t.coords.length;s+=r){const e=[];for(let n=0;n<r;n++)e.push(t.coords[s+n]);i.push(e)}return e?n?{points:i,hasZ:e,hasM:n}:{points:i,hasZ:e}:n?{points:i,hasM:n}:{points:i}}function A(t,e,n,r,i){const s=l(n,r);for(const o of e){const e=o.geometry,n=o.attributes;let r;e&&(r=P(new c.a,e,s)),t.push(new a.a(r,n,null,n[i]))}return t}function P(t,e,n=l(e.hasZ,e.hasM)){t.lengths[0]=e.points.length;const r=t.coords;let i=0;for(const s of e.points)for(let t=0;t<n;t++)r[i++]=s[t];return t}function G(t,e,n){if(!t)return null;const r=l(e,n),{coords:i,lengths:s}=t,o=[];let a=0;for(const u of s){const t=[];for(let e=0;e<u;e++){const e=[];for(let t=0;t<r;t++)e.push(i[a++]);t.push(e)}o.push(t)}return e?n?{paths:o,hasZ:e,hasM:n}:{paths:o,hasZ:e}:n?{paths:o,hasM:n}:{paths:o}}function q(t,e,n,r,i){const s=l(n,r);for(const o of e){const e=o.geometry,n=o.attributes;let r;e&&(r=V(new c.a,e,s)),t.push(new a.a(r,n,null,n[i]))}return t}function V(t,e,n=l(e.hasZ,e.hasM)){const{lengths:r,coords:i}=t;let s=0;for(const o of e.paths){for(const t of o)for(let e=0;e<n;e++)i[s++]=t[e];r.push(o.length)}return t}function k(t,e,n){if(!t)return null;const r=l(e,n),{coords:i,lengths:s}=t,o=[];let a=0;for(const u of s){const t=[];for(let e=0;e<u;e++){const e=[];for(let t=0;t<r;t++)e.push(i[a++]);t.push(e)}o.push(t)}return e?n?{rings:o,hasZ:e,hasM:n}:{rings:o,hasZ:e}:n?{rings:o,hasM:n}:{rings:o}}function D(t,e,n,r,i){for(const o of e){const e=o.geometry,u=o.centroid,l=o.attributes;let h;e&&(h=Z(new c.a,e,n,r)),Object(s.k)(u)?t.push(new a.a(h,l,O(new c.a,u),l[i])):t.push(new a.a(h,l,null,l[i]))}return t}function Z(t,e,n=e.hasZ,r=e.hasM){return C(t,e.rings,n,r),t}function C(t,e,n,r){const i=l(n,r),{lengths:s,coords:o}=t;let a=0;s.length=o.length=0;for(const u of e){for(const t of u)for(let e=0;e<i;e++)o[a++]=t[e];s.push(u.length)}return t}const L=[],Q=[];function Y(t,e,n,r,i){L[0]=t;const[s]=U(Q,L,e,n,r,i);return L.length=Q.length=0,s}function U(t,e,n,i,s,o){if(t.length=0,!n){for(const n of e){const e=n.attributes[o];t.push(new a.a(null,n.attributes,null,e))}return t}switch(n){case"esriGeometryPoint":return R(t,e,i,s,o);case"esriGeometryMultipoint":return A(t,e,i,s,o);case"esriGeometryPolyline":return q(t,e,i,s,o);case"esriGeometryPolygon":return D(t,e,i,s,o);default:h.error("convertToFeatureSet:unknown-geometry",new r.a(`Unable to parse unknown geometry type '${n}'`)),t.length=0}return t}function $(t,e,n,i,s,o){const a=t.length;switch(n){case"esriGeometryPoint":R(t,e,i,s,o);break;case"esriGeometryMultipoint":A(t,e,i,s,o);break;case"esriGeometryPolyline":q(t,e,i,s,o);break;case"esriGeometryPolygon":D(t,e,i,s,o);break;default:h.error("convertToFeatureSet:unknown-geometry",new r.a(`Unable to parse unknown geometry type '${n}'`))}for(let r=0;r<e.length;r++)t[r+a].geometryType=n,t[r+a].insertAfter=e[r].insertAfter,t[r+a].groupId=e[r].groupId;return t}function B(t,e,n,r){Q[0]=t,W(L,Q,e,n,r);const i=L[0];return L.length=Q.length=0,i}function X(t,e,n){if(Object(s.j)(t))return null;const i=new c.a;return"hasZ"in t&&null==e&&(e=t.hasZ),"hasM"in t&&null==n&&(n=t.hasM),Object(o.f)(t)?E(null!=e?e:null!=t.z,null!=n?n:null!=t.m)(i,t):Object(o.g)(t)?Z(i,t,e,n):Object(o.h)(t)?V(i,t,l(e,n)):Object(o.e)(t)?P(i,t,l(e,n)):void h.error("convertFromGeometry:unknown-geometry",new r.a(`Unable to parse unknown geometry type '${t}'`))}function J(t,e,n,i){const o=t&&("coords"in t?t:t.geometry);if(Object(s.j)(o))return null;switch(e){case"esriGeometryPoint":{let t=I;return n&&i?t=v:n?t=F:i&&(t=S),t(o)}case"esriGeometryMultipoint":return N(o,n,i);case"esriGeometryPolyline":return G(o,n,i);case"esriGeometryPolygon":return k(o,n,i);default:return void h.error("convertToGeometry:unknown-geometry",new r.a(`Unable to parse unknown geometry type '${e}'`))}}function W(t,e,n,i,o){if(t.length=0,Object(s.j)(n))return function(t,e){for(const n of e)t.push({attributes:n.attributes});return t}(t,e);switch(n){case"esriGeometryPoint":return function(t,e,n,r){let i=I;n&&r?i=v:n?i=F:r&&(i=S);for(const o of e){const{geometry:e,attributes:n}=o,r=Object(s.k)(e)?i(e):null;t.push({attributes:n,geometry:r})}return t}(t,e,i,o);case"esriGeometryMultipoint":return function(t,e,n,r){for(const i of e){const{geometry:e,attributes:s}=i;let o;e&&(o=N(e,n,r)),t.push({attributes:s,geometry:o})}return t}(t,e,i,o);case"esriGeometryPolyline":return function(t,e,n,r){for(const i of e){const{geometry:e,attributes:o}=i;let a;Object(s.k)(e)&&(a=G(e,n,r)),t.push({attributes:o,geometry:a})}return t}(t,e,i,o);case"esriGeometryPolygon":return function(t,e,n,r){for(const i of e){const{geometry:e,attributes:o,centroid:a}=i;let u;if(Object(s.k)(e)&&(u=k(e,n,r)),Object(s.k)(a)){const e=I(a);t.push({attributes:o,centroid:e,geometry:u})}else t.push({attributes:o,geometry:u})}return t}(t,e,i,o);default:h.error("convertToFeatureSet:unknown-geometry",new r.a(`Unable to parse unknown geometry type '${n}'`))}return t}function H(t){const{objectIdFieldName:e,spatialReference:n,transform:r,fields:i,hasM:s,hasZ:o,features:a,geometryType:u,exceededTransferLimit:c,uniqueIdField:l,queryGeometry:h,queryGeometryType:f}=t,d={features:W([],a,u,o,s),fields:i,geometryType:u,objectIdFieldName:e,spatialReference:n,uniqueIdField:l,queryGeometry:J(h,f,!1,!1)};return r&&(d.transform=r),c&&(d.exceededTransferLimit=c),s&&(d.hasM=s),o&&(d.hasZ=o),d}function K(t,e){const n=new u.a,{hasM:i,hasZ:s,features:o,objectIdFieldName:a,spatialReference:c,geometryType:l,exceededTransferLimit:f,transform:d,fields:m}=t;return m&&(n.fields=m),n.geometryType=l,n.objectIdFieldName=a||e,n.spatialReference=c,n.objectIdFieldName?(o&&U(n.features,o,l,s,i,n.objectIdFieldName),f&&(n.exceededTransferLimit=f),i&&(n.hasM=i),s&&(n.hasZ=s),d&&(n.transform=d),n):(h.error(new r.a("optimized-features:invalid-objectIdFieldName","objectIdFieldName is missing")),n)}function tt(t){const{transform:e,features:n,hasM:r,hasZ:i}=t;if(!e)return t;for(const o of n)Object(s.k)(o.geometry)&&at(o.geometry,o.geometry,r,i,e),Object(s.k)(o.centroid)&&at(o.centroid,o.centroid,r,i,e);return t.transform=null,t}function et(t,e){const{geometryType:n,features:r,hasM:i,hasZ:s}=e;if(!t)return e;for(let o=0;o<r.length;o++){const e=r[o],a=e.weakClone();a.geometry=new c.a,nt(a.geometry,e.geometry,i,s,n,t),e.centroid&&(a.centroid=new c.a,nt(a.centroid,e.centroid,i,s,"esriGeometryPoint",t)),r[o]=a}return e.transform=t,e}function nt(t,e,n,r,i,o,a=n,u=r){if(t.lengths.length&&(t.lengths.length=0),t.coords.length&&(t.coords.length=0),Object(s.j)(e)||!e.coords.length)return null;const c=f[i],{coords:h,lengths:d}=e,m=l(n,r),p=l(n&&a,r&&u),g=y(n,r,a,u);if(!d.length)return g(t.coords,h,0,0,b(o,h[0]),_(o,h[1])),t.lengths.length&&(t.lengths.length=0),t.coords.length=m,t;let x,M,j,I,O=0,F=0,w=F;for(const s of d){if(s<c)continue;let e=0;F=w,j=x=b(o,h[O]),I=M=_(o,h[O+1]),g(t.coords,h,F,O,j,I),e++,O+=m,F+=p;for(let n=1;n<s;n++,O+=m)j=b(o,h[O]),I=_(o,h[O+1]),j===x&&I===M||(g(t.coords,h,F,O,j-x,I-M),F+=p,e++,x=j,M=I);e>=c&&(t.lengths.push(e),w=F)}return t.coords.length=w,t.coords.length?t:null}function rt(t,e,n,r,i,s,o=n,a=r){if(t.lengths.length&&(t.lengths.length=0),t.coords.length&&(t.coords.length=0),!e||!e.coords.length)return null;const u=f[i],{coords:c,lengths:h}=e,d=l(n,r),m=l(n&&o,r&&a),p=y(n,r,o,a);if(!h.length)return p(t.coords,c,0,0,c[0],c[1]),t.lengths.length&&(t.lengths.length=0),t.coords.length=d,t;let g=0;const b=s*s;for(const l of h){if(l<u){g+=l*d;continue}const e=t.coords.length/m,n=g,r=g+(l-1)*d;p(t.coords,c,t.coords.length,n,c[n],c[n+1]),st(t.coords,c,d,b,p,n,r),p(t.coords,c,t.coords.length,r,c[r],c[r+1]);const i=t.coords.length/m-e;i>=u?t.lengths.push(i):t.coords.length=e*m,g+=l*d}return t.coords.length?t:null}function it(t,e,n,r){const i=t[e],s=t[e+1],o=t[n],a=t[n+1],u=t[r],c=t[r+1];let l=o,h=a,f=u-l,d=c-h;if(0!==f||0!==d){const t=((i-l)*f+(s-h)*d)/(f*f+d*d);t>1?(l=u,h=c):t>0&&(l+=f*t,h+=d*t)}return f=i-l,d=s-h,f*f+d*d}function st(t,e,n,r,i,s,o){let a,u=r,c=0;for(let l=s+n;l<o;l+=n)a=it(e,l,s,o),a>u&&(c=l,u=a);u>r&&(c-s>n&&st(t,e,n,r,i,s,c),i(t,e,t.length,c,e[c],e[c+1]),o-c>n&&st(t,e,n,r,i,c,o))}function ot(t,e,n,r){if(Object(s.j)(e)||!e.coords||!e.coords.length)return null;const i=l(n,r);let o=Number.POSITIVE_INFINITY,a=Number.POSITIVE_INFINITY,u=Number.NEGATIVE_INFINITY,c=Number.NEGATIVE_INFINITY;if(e&&e.coords){const t=e.coords;for(let e=0;e<t.length;e+=i){const n=t[e],r=t[e+1];o=Math.min(o,n),u=Math.max(u,n),a=Math.min(a,r),c=Math.max(c,r)}}return t[0]=o,t[1]=a,t[2]=u,t[3]=c,t}function at(t,e,n,r,i){const{coords:s,lengths:o}=e,a=n?r?g:m:r?m:d,u=l(n,r);if(!s.length)return t!==e&&(t.lengths.length=0,t.coords.length=0),t;if(!o.length)return a(t.coords,s,0,0,x(i,s[0]),M(i,s[1])),t!==e&&(t.lengths.length=0,t.coords.length=u),t;const[c,h]=i.scale;let f=0;for(let l=0;l<o.length;l++){const e=o[l];t.lengths[l]=e;let n=x(i,s[f]),r=M(i,s[f+1]);a(t.coords,s,f,f,n,r),f+=u;for(let i=1;i<e;i++,f+=u)n+=s[f]*c,r-=s[f+1]*h,a(t.coords,s,f,f,n,r)}return t!==e&&(t.lengths.length=o.length,t.coords.length=s.length),t}function ut(t,e,n,r,i,s){const o=l(n,r),a=y(n,r,i,s),u=e.coords;t.coords.length=0,t.lengths.length=0,t.lengths.push(...e.lengths);for(let c=0;c<u.length;c+=o)a(t.coords,u,t.coords.length,c,u[c],u[c+1]);return t}function ct(t,e,n,r){let i=0,s=t[r*e],o=t[r*(e+1)];for(let a=1;a<n;a++){const n=s+t[r*(e+a)],u=o+t[r*(e+a)+1],c=(n-s)*(u+o);s=n,o=u,i+=c}return.5*i}function lt(t,e){const{coords:n,lengths:r}=t;let i=0,s=0;for(let o=0;o<r.length;o++)s+=ct(n,i,r[o],e),i+=o;return Math.abs(s)}function ht(t,e){if(Object(s.j)(t))return null;const n=t.clone(),r=t.coords,i=t.lengths;let o=0;for(let s=0;s<i.length;s++){const t=i[s];let a=r[e*o],u=r[e*o+1];for(let i=1;i<t;i++){const t=a+r[e*(o+i)],s=u+r[e*(o+i)+1];n.coords[e*(o+i)]=t,n.coords[e*(o+i)+1]=s,a=t,u=s}o+=t}return n}},168:function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));class r{constructor(t=[],e=[],n=!1){this.lengths=null!=t?t:[],this.coords=null!=e?e:[],this.hasIndeterminateRingOrder=n}get isPoint(){return 0===this.lengths.length}get maxLength(){return Math.max(...this.lengths)}get size(){return this.lengths.reduce(((t,e)=>t+e))}forEachVertex(t){let e=0;this.lengths.length||t(this.coords[0],this.coords[1]);for(let n=0;n<this.lengths.length;n++){const r=this.lengths[n];for(let n=0;n<r;n++)t(this.coords[2*(n+e)],this.coords[2*(n+e)+1]);e+=r}}clone(t){return t?(t.set(this.coords),new r(this.lengths.slice(),t,this.hasIndeterminateRingOrder)):new r(this.lengths.slice(),this.coords.slice(),this.hasIndeterminateRingOrder)}}},204:function(t,e){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(r){"object"===typeof window&&(n=window)}t.exports=n},218:function(t,e,n){"use strict";(function(t){n.d(e,"a",(function(){return s})),n.d(e,"b",(function(){return r})),n.d(e,"c",(function(){return i}));var r="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof t?t:"undefined"!=typeof self?self:{};function i(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function s(t){throw new Error('Could not dynamically require "'+t+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}}).call(this,n(204))},223:function(t,e,n){"use strict";n.d(e,"a",(function(){return A})),n.d(e,"b",(function(){return P})),n.d(e,"c",(function(){return f})),n.d(e,"d",(function(){return y})),n.d(e,"e",(function(){return x})),n.d(e,"f",(function(){return s})),n.d(e,"g",(function(){return g})),n.d(e,"h",(function(){return T})),n.d(e,"i",(function(){return N})),n.d(e,"j",(function(){return a})),n.d(e,"k",(function(){return l})),n.d(e,"l",(function(){return h})),n.d(e,"m",(function(){return u})),n.d(e,"n",(function(){return c})),n.d(e,"o",(function(){return z})),n.d(e,"p",(function(){return o})),n.d(e,"q",(function(){return O})),n.d(e,"r",(function(){return M})),n.d(e,"s",(function(){return R})),n.d(e,"t",(function(){return _})),n.d(e,"u",(function(){return j})),n.d(e,"v",(function(){return I})),n.d(e,"w",(function(){return S})),n.d(e,"x",(function(){return w})),n.d(e,"y",(function(){return F})),n.d(e,"z",(function(){return b})),n.d(e,"A",(function(){return v}));var r=n(85),i=(n(101),n(118));function s(t=P){return[t[0],t[1],t[2],t[3],t[4],t[5]]}function o(t,e,n,r,i,o,a=s()){return a[0]=t,a[1]=e,a[2]=n,a[3]=r,a[4]=i,a[5]=o,a}function a(t,e){t[0]=Math.min(t[0],e[0]),t[1]=Math.min(t[1],e[1]),t[2]=Math.min(t[2],e[2]),t[3]=Math.max(t[3],e[3]),t[4]=Math.max(t[4],e[4]),t[5]=Math.max(t[5],e[5])}function u(t,e){t[0]=Math.min(t[0],e[0]),t[1]=Math.min(t[1],e[1]),t[3]=Math.max(t[3],e[2]),t[4]=Math.max(t[4],e[3])}function c(t,e){t[0]=Math.min(t[0],e[0]),t[1]=Math.min(t[1],e[1]),t[2]=Math.min(t[2],e[2]),t[3]=Math.max(t[3],e[0]),t[4]=Math.max(t[4],e[1]),t[5]=Math.max(t[5],e[2])}function l(t,e,n=0,r=e.length/3){let i=t[0],s=t[1],o=t[2],a=t[3],u=t[4],c=t[5];for(let l=0;l<r;l++)i=Math.min(i,e[n+3*l]),s=Math.min(s,e[n+3*l+1]),o=Math.min(o,e[n+3*l+2]),a=Math.max(a,e[n+3*l]),u=Math.max(u,e[n+3*l+1]),c=Math.max(c,e[n+3*l+2]);t[0]=i,t[1]=s,t[2]=o,t[3]=a,t[4]=u,t[5]=c}function h(t,e,n){const r=e.length;let i=t[0],s=t[1],o=t[2],a=t[3],u=t[4],c=t[5];if(n)for(let l=0;l<r;l++){const t=e[l];i=Math.min(i,t[0]),s=Math.min(s,t[1]),o=Math.min(o,t[2]),a=Math.max(a,t[0]),u=Math.max(u,t[1]),c=Math.max(c,t[2])}else for(let l=0;l<r;l++){const t=e[l];i=Math.min(i,t[0]),s=Math.min(s,t[1]),a=Math.max(a,t[0]),u=Math.max(u,t[1])}t[0]=i,t[1]=s,t[2]=o,t[3]=a,t[4]=u,t[5]=c}function f(t){for(let e=0;e<6;e++)if(!isFinite(t[e]))return!1;return!0}function d(t){return t[0]>=t[3]?0:t[3]-t[0]}function m(t){return t[1]>=t[4]?0:t[4]-t[1]}function p(t){return t[2]>=t[5]?0:t[5]-t[2]}function g(t){const e=d(t),n=p(t),r=m(t);return Math.sqrt(e*e+n*n+r*r)}function y(t,e=[0,0,0]){return e[0]=t[0]+d(t)/2,e[1]=t[1]+m(t)/2,e[2]=t[2]+p(t)/2,e}function b(t,e=[0,0,0]){return e[0]=d(t),e[1]=m(t),e[2]=p(t),e}function _(t){return Math.max(d(t),p(t),m(t))}function x(t,e){return e[0]>=t[0]&&e[1]>=t[1]&&e[2]>=t[2]&&e[0]<=t[3]&&e[1]<=t[4]&&e[2]<=t[5]}function M(t,e){return!!Object(r.j)(e)||function(t,e){return Math.max(e[0],t[0])<=Math.min(e[3],t[3])&&Math.max(e[1],t[1])<=Math.min(e[4],t[4])&&Math.max(e[2],t[2])<=Math.min(e[5],t[5])}(t,e)}function j(t,e,n,r,i=t){return i[0]=t[0]+e,i[1]=t[1]+n,i[2]=t[2]+r,i[3]=t[3]+e,i[4]=t[4]+n,i[5]=t[5]+r,i}function I(t,e,n=t){const r=t[0]+d(t)/2,i=t[1]+m(t)/2,s=t[2]+p(t)/2;return n[0]=r+(t[0]-r)*e,n[1]=i+(t[1]-i)*e,n[2]=s+(t[2]-s)*e,n[3]=r+(t[3]-r)*e,n[4]=i+(t[4]-i)*e,n[5]=s+(t[5]-s)*e,n}function O(t,e){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}function F(t,e,n=t){return n[0]=e[0],n[1]=e[1],n[2]=e[2],n!==t&&(n[3]=t[3],n[4]=t[4],n[5]=t[5]),n}function w(t,e,n=t){return n[3]=e[0],n[4]=e[1],n[5]=e[2],n!==t&&(n[0]=t[0],n[1]=t[1],n[2]=t[2]),t}function S(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t}function T(t){return t?S(t,A):s(A)}function v(t,e){return e||(e=Object(i.l)()),e[0]=t[0],e[1]=t[1],e[2]=t[3],e[3]=t[4],e}function z(t,e){return t[0]=e[0],t[1]=e[1],t[2]=Number.NEGATIVE_INFINITY,t[3]=e[2],t[4]=e[3],t[5]=Number.POSITIVE_INFINITY,t}function E(t){return 6===t.length}function R(t){return 0===d(t)&&0===m(t)&&0===p(t)}function N(t,e,n){if(Object(r.j)(t)||Object(r.j)(e))return t===e;if(!E(t)||!E(e))return!1;if(n){for(let r=0;r<t.length;r++)if(!n(t[r],e[r]))return!1}else for(let r=0;r<t.length;r++)if(t[r]!==e[r])return!1;return!0}const A=[1/0,1/0,1/0,-1/0,-1/0,-1/0],P=[0,0,0,0,0,0];s()},229:function(t,e,n){"use strict";n.d(e,"a",(function(){return j})),n.d(e,"b",(function(){return I})),n.d(e,"c",(function(){return _}));var r=n(153),i=n(88),s=n(87),o=n(85),a=n(135),u=n(140),c=n(247),l=n(110),h=n(182),f=(n(99),n(103)),d=n(98),m=n(97);async function p(t,e,n){const r="string"==typeof t?Object(d.M)(t):t,i=e[0].spatialReference,s=Object(m.c)(e[0]),o={...n,query:{...r.query,f:"json",sr:i.wkid?i.wkid:JSON.stringify(i),geometries:JSON.stringify((a=e,{geometryType:Object(m.c)(a[0]),geometries:a.map((t=>t.toJSON()))}))}};var a;return function(t,e,n){const r=Object(m.b)(e);return t.map((t=>{const e=r.fromJSON(t);return e.spatialReference=n,e}))}((await Object(f.default)(r.path+"/simplify",o)).data,s,i)}const g=s.a.getLogger("esri.geometry.support.normalizeUtils");function y(t){return"polygon"===t[0].type}function b(t){return"polyline"===t[0].type}function _(t,e){if(!(t instanceof u.a||t instanceof a.a)){const t="straightLineDensify: the input geometry is neither polyline nor polygon";throw g.error(t),new i.a(t)}const n=Object(c.b)(t),r=[];for(const i of n){const t=[];r.push(t),t.push([i[0][0],i[0][1]]);for(let n=0;n<i.length-1;n++){const r=i[n][0],s=i[n][1],o=i[n+1][0],a=i[n+1][1],u=Math.sqrt((o-r)*(o-r)+(a-s)*(a-s)),c=(a-s)/u,l=(o-r)/u,h=u/e;if(h>1){for(let a=1;a<=h-1;a++){const n=a*e,i=l*n+r,o=c*n+s;t.push([i,o])}const n=(u+Math.floor(h-1)*e)/2,i=l*n+r,o=c*n+s;t.push([i,o])}t.push([o,a])}}return function(t){return"polygon"===t.type}(t)?new a.a({rings:r,spatialReference:t.spatialReference}):new u.a({paths:r,spatialReference:t.spatialReference})}function x(t,e,n){if(e){const e=_(t,1e6);t=Object(h.e)(e,!0)}return n&&(t=Object(c.e)(t,n)),t}function M(t,e,n){if(Array.isArray(t)){const r=t[0];if(r>e){const n=Object(c.d)(r,e);t[0]=r+n*(-2*e)}else if(r<n){const e=Object(c.d)(r,n);t[0]=r+e*(-2*n)}}else{const r=t.x;if(r>e){const n=Object(c.d)(r,e);t=t.clone().offset(n*(-2*e),0)}else if(r<n){const e=Object(c.d)(r,n);t=t.clone().offset(e*(-2*n),0)}}return t}async function j(t,e,n){var i;if(!Array.isArray(t))return j([t],e);const s=null!=(i=null==e?void 0:e.url)?i:r.a.geometryServiceUrl;let g,_,I,O,F,w,S,T,v=0;const z=[],E=[];for(const r of t)if(Object(o.j)(r))E.push(r);else if(g||(g=r.spatialReference,_=Object(l.e)(g),I=g.isWebMercator,w=I?102100:4326,O=c.a[w].maxX,F=c.a[w].minX,S=c.a[w].plus180Line,T=c.a[w].minus180Line),_)if("mesh"===r.type)E.push(r);else if("point"===r.type)E.push(M(r.clone(),O,F));else if("multipoint"===r.type){const t=r.clone();t.points=t.points.map((t=>M(t,O,F))),E.push(t)}else if("extent"===r.type){const t=r.clone()._normalize(!1,!1,_);E.push(t.rings?new a.a(t):t)}else if(r.extent){const t=r.extent,e=Object(c.d)(t.xmin,F)*(2*O);let n=0===e?r.clone():Object(c.e)(r.clone(),e);t.offset(e,0),t.intersects(S)&&t.xmax!==O?(v=t.xmax>v?t.xmax:v,n=x(n,I),z.push(n),E.push("cut")):t.intersects(T)&&t.xmin!==F?(v=t.xmax*(2*O)>v?t.xmax*(2*O):v,n=x(n,I,360),z.push(n),E.push("cut")):E.push(n)}else E.push(r.clone());else E.push(r);let R=Object(c.d)(v,O),N=-90;const A=R,P=new u.a;for(;R>0;){const t=360*R-180;P.addPath([[t,N],[t,-1*N]]),N*=-1,R--}if(z.length>0&&A>0){const e=function(t,e){let n=-1;for(let r=0;r<e.cutIndexes.length;r++){const i=e.cutIndexes[r],s=e.geometries[r],o=Object(c.b)(s);for(let t=0;t<o.length;t++){const e=o[t];e.some((n=>{if(n[0]<180)return!0;{let n=0;for(let t=0;t<e.length;t++){const r=e[t][0];n=r>n?r:n}n=Number(n.toFixed(9));const r=-360*Object(c.d)(n,180);for(let i=0;i<e.length;i++){const e=s.getPoint(t,i);s.setPoint(t,i,e.clone().offset(r,0))}return!0}}))}if(i===n){if(y(t))for(const e of Object(c.b)(s))t[i]=t[i].addRing(e);else if(b(t))for(const e of Object(c.b)(s))t[i]=t[i].addPath(e)}else n=i,t[i]=s}return t}(z,await async function(t,e,n,r){const i="string"==typeof t?Object(d.M)(t):t,s=e[0].spatialReference,o={...r,query:{...i.query,f:"json",sr:JSON.stringify(s),target:JSON.stringify({geometryType:Object(m.c)(e[0]),geometries:e}),cutter:JSON.stringify(n)}},a=await Object(f.default)(i.path+"/cut",o),{cutIndexes:u,geometries:c=[]}=a.data;return{cutIndexes:u,geometries:c.map((t=>{const e=Object(m.a)(t);return e.spatialReference=s,e}))}}(s,z,P,n)),r=[],i=[];for(let n=0;n<E.length;n++){const s=E[n];if("cut"!==s)i.push(s);else{const s=e.shift(),a=t[n];Object(o.k)(a)&&"polygon"===a.type&&a.rings&&a.rings.length>1&&s.rings.length>=a.rings.length?(r.push(s),i.push("simplify")):i.push(I?Object(h.b)(s):s)}}if(!r.length)return i;const a=await p(s,r,n),u=[];for(let t=0;t<i.length;t++){const e=i[t];"simplify"!==e?u.push(e):u.push(I?Object(h.b)(a.shift()):a.shift())}return u}const G=[];for(let r=0;r<E.length;r++){const t=E[r];if("cut"!==t)G.push(t);else{const t=z.shift();G.push(!0===I?Object(h.b)(t):t)}}return Promise.resolve(G)}function I(t,e){const n=Object(l.e)(e);if(n){const[e,r]=n.valid,i=r-e;if(t<e)for(;t<e;)t+=i;if(t>r)for(;t>r;)t-=i}return t}},243:function(t,e,n){"use strict";n.d(e,"a",(function(){return s})),n.d(e,"b",(function(){return u})),n.d(e,"c",(function(){return c})),n.d(e,"d",(function(){return o}));var r=n(85),i=n(212);const s=-3;var o,a;(a=o||(o={}))[a.ALL=0]="ALL",a[a.SOME=1]="SOME";class u{constructor(t,e,n){this._namespace=t,this._storage=e,this._removeFunc=!1,this._hit=0,this._miss=0,this._storage.register(this),this._namespace+=":",n&&(this._storage.registerRemoveFunc(this._namespace,n),this._removeFunc=!0)}destroy(){this._storage.clear(this._namespace),this._removeFunc&&this._storage.deregisterRemoveFunc(this._namespace),this._storage.deregister(this),this._storage=null}get namespace(){return this._namespace.slice(0,-1)}get hitRate(){return this._hit/(this._hit+this._miss)}get size(){return this._storage.size}get maxSize(){return this._storage.maxSize}resetHitRate(){this._hit=this._miss=0}put(t,e,n,r=0){this._storage.put(this._namespace+t,e,n,r)}get(t){const e=this._storage.get(this._namespace+t);return void 0===e?++this._miss:++this._hit,e}pop(t){const e=this._storage.pop(this._namespace+t);return void 0===e?++this._miss:++this._hit,e}updateSize(t,e,n){this._storage.updateSize(this._namespace+t,e,n)}clear(){this._storage.clear(this._namespace)}clearAll(){this._storage.clearAll()}getStats(){return this._storage.getStats()}resetStats(){this._storage.resetStats()}}class c{constructor(t=10485760){this._maxSize=t,this._db=new Map,this._size=0,this._hit=0,this._miss=0,this._removeFuncs=new i.a,this._users=new i.a}destroy(){this.clearAll(),this._removeFuncs.clear(),this._users.clear(),this._db=null}register(t){this._users.push(t)}deregister(t){this._users.removeUnordered(t)}registerRemoveFunc(t,e){this._removeFuncs.push([t,e])}deregisterRemoveFunc(t){this._removeFuncs.filterInPlace((e=>e[0]!==t))}get size(){return this._size}get maxSize(){return this._maxSize}set maxSize(t){this._maxSize=Math.max(t,0),this._checkSizeLimit()}put(t,e,n,r){const i=this._db.get(t);if(i&&(this._size-=i.size,this._db.delete(t),i.entry!==e&&this._notifyRemove(t,i.entry,o.ALL)),n>this._maxSize)return void this._notifyRemove(t,e,o.ALL);if(void 0===e)return void console.warn("Refusing to cache undefined entry ");if(!n||n<0)return void console.warn("Refusing to cache entry with invalid size "+n);const a=1+Math.max(r,s)-s;this._db.set(t,{entry:e,size:n,lifetime:a,lives:a}),this._size+=n,this._checkSizeLimit()}updateSize(t,e,n){const i=this._db.get(t);if(i&&i.entry===e){for(this._size-=i.size;n>this._maxSize;){const i=this._notifyRemove(t,e,o.SOME);if(!(Object(r.k)(i)&&i>0))return void this._db.delete(t);n=i}i.size=n,this._size+=n,this._checkSizeLimit()}}pop(t){const e=this._db.get(t);if(e)return this._size-=e.size,this._db.delete(t),++this._hit,e.entry;++this._miss}get(t){const e=this._db.get(t);if(void 0!==e)return this._db.delete(t),e.lives=e.lifetime,this._db.set(t,e),++this._hit,e.entry;++this._miss}getStats(){const t={Size:Math.round(this._size/1048576)+"/"+Math.round(this._maxSize/1048576)+"MB","Hit rate":Math.round(100*this._getHitRate())+"%",Entries:this._db.size.toString()},e={},n=new Array;this._db.forEach(((t,r)=>{const i=t.lifetime;n[i]=(n[i]||0)+t.size,this._users.forAll((n=>{const i=n.namespace;if(r.startsWith(i)){const n=e[i]||0;e[i]=n+t.size}}))}));const r={};this._users.forAll((t=>{const n=t.namespace;if(!isNaN(t.hitRate)&&t.hitRate>0){const i=e[n]||0;e[n]=i,r[n]=Math.round(100*t.hitRate)+"%"}else r[n]="0%"}));const i=Object.keys(e);i.sort(((t,n)=>e[n]-e[t])),i.forEach((n=>t[n]=Math.round(e[n]/2**20)+"MB / "+r[n]));for(let o=n.length-1;o>=0;--o){const e=n[o];e&&(t["Priority "+(o+s-1)]=Math.round(e/this.size*100)+"%")}return t}resetStats(){this._hit=this._miss=0,this._users.forAll((t=>t.resetHitRate()))}clear(t){this._db.forEach(((e,n)=>{n.startsWith(t)&&(this._size-=e.size,this._db.delete(n),this._notifyRemove(n,e.entry,o.ALL))}))}clearAll(){this._db.forEach(((t,e)=>this._notifyRemove(e,t.entry,o.ALL))),this._size=0,this._db.clear()}_getHitRate(){return this._hit/(this._hit+this._miss)}_notifyRemove(t,e,n){let r;return this._removeFuncs.some((i=>{if(t.startsWith(i[0])){const t=i[1](e,n);return"number"==typeof t&&(r=t),!0}return!1})),r}_checkSizeLimit(){if(!(this._size<=this._maxSize))for(const[t,e]of this._db){if(this._db.delete(t),e.lives<=1){this._size-=e.size;const n=this._notifyRemove(t,e.entry,o.SOME);Object(r.k)(n)&&n>0&&(this._size+=n,e.lives=e.lifetime,e.size=n,this._db.set(t,e))}else--e.lives,this._db.set(t,e);if(this._size<=.9*this.maxSize)return}}}},247:function(t,e,n){"use strict";n.d(e,"a",(function(){return o})),n.d(e,"b",(function(){return c})),n.d(e,"c",(function(){return l})),n.d(e,"d",(function(){return a})),n.d(e,"e",(function(){return u}));var r=n(140),i=n(96),s=n(97);const o={102100:{maxX:20037508.342788905,minX:-20037508.342788905,plus180Line:new r.a({paths:[[[20037508.342788905,-20037508.342788905],[20037508.342788905,20037508.342788905]]],spatialReference:i.a.WebMercator}),minus180Line:new r.a({paths:[[[-20037508.342788905,-20037508.342788905],[-20037508.342788905,20037508.342788905]]],spatialReference:i.a.WebMercator})},4326:{maxX:180,minX:-180,plus180Line:new r.a({paths:[[[180,-180],[180,180]]],spatialReference:i.a.WGS84}),minus180Line:new r.a({paths:[[[-180,-180],[-180,180]]],spatialReference:i.a.WGS84})}};function a(t,e){return Math.ceil((t-e)/(2*e))}function u(t,e){const n=c(t);for(const r of n)for(const t of r)t[0]+=e;return t}function c(t){return Object(s.g)(t)?t.rings:t.paths}function l(t){const e=(null==t?void 0:t.isWebMercator)?102100:4326;return[o[e].minX,o[e].maxX]}},252:function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));var r=n(106);function i(t){return"oid"===t.type||"esriFieldTypeOID"===t.type}function s(t){return"global-id"===t.type||"esriFieldTypeGlobalID"===t.type}class o{constructor(t){if(this.fields=t,this._fieldsMap=new Map,this._dateFieldsSet=new Set,this._numericFieldsSet=new Set,this.dateFields=[],this.numericFields=[],this._requiredFields=null,!t)return;const e=[];for(const o of t){const t=o&&o.name;if(t){const u=a(t);this._fieldsMap.set(t,o),this._fieldsMap.set(u,o),e.push(u),"date"===(n=o).type||"esriFieldTypeDate"===n.type?(this.dateFields.push(o),this._dateFieldsSet.add(o)):Object(r.u)(o)&&(this._numericFieldsSet.add(o),this.numericFields.push(o)),i(o)||s(o)||(o.editable=null==o.editable||!!o.editable,o.nullable=null==o.nullable||!!o.nullable)}}var n;e.sort(),this.uid=e.join(",")}destroy(){this._fieldsMap.clear()}get requiredFields(){if(!this._requiredFields){this._requiredFields=[];for(const t of this.fields)i(t)||s(t)||t.nullable||void 0!==Object(r.r)(t)||this._requiredFields.push(t)}return this._requiredFields}has(t){return null!=this.get(t)}get(t){return null!=t?this._fieldsMap.get(t)||this._fieldsMap.get(a(t)):void 0}isDateField(t){return this._dateFieldsSet.has(this.get(t))}isNumericField(t){return this._numericFieldsSet.has(this.get(t))}normalizeFieldName(t){const e=this.get(t);if(e)return e.name}}function a(t){return t.toLowerCase().trim()}},262:function(t,e,n){"use strict";n.d(e,"a",(function(){return i})),n.d(e,"b",(function(){return o})),n.d(e,"c",(function(){return s}));var r=n(85);class i{constructor(t=null,e={},n,r){this.geometry=t,this.attributes=e,this.centroid=n,this.objectId=r,this.displayId=0,this.geohashX=0,this.geohashY=0}weakClone(){const t=new i(this.geometry,this.attributes,this.centroid,this.objectId);return t.displayId=this.displayId,t.geohashX=this.geohashX,t.geohashY=this.geohashY,t}}function s(t){return!(Object(r.j)(t.geometry)||!t.geometry.coords||!t.geometry.coords.length)}class o extends i{}},268:function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));const r=new(n(90).a)({esriFieldTypeSmallInteger:"small-integer",esriFieldTypeInteger:"integer",esriFieldTypeSingle:"single",esriFieldTypeDouble:"double",esriFieldTypeLong:"long",esriFieldTypeString:"string",esriFieldTypeDate:"date",esriFieldTypeOID:"oid",esriFieldTypeGeometry:"geometry",esriFieldTypeBlob:"blob",esriFieldTypeRaster:"raster",esriFieldTypeGUID:"guid",esriFieldTypeGlobalID:"global-id",esriFieldTypeXML:"xml"})},274:function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));var r=n(85),i=n(114),s=n(110);function o(t,e,n){if(Object(r.j)(e)||Object(r.j)(n)||n.vcsWkid||Object(s.d)(e,n))return null;const o=Object(i.f)(e)/Object(i.f)(n);if(1===o)return null;switch(t){case"point":case"esriGeometryPoint":return t=>function(t,e){t&&null!=t.z&&(t.z*=e)}(t,o);case"polyline":case"esriGeometryPolyline":return t=>function(t,e){if(t)for(const n of t.paths)for(const t of n)t.length>2&&(t[2]*=e)}(t,o);case"polygon":case"esriGeometryPolygon":return t=>function(t,e){if(t)for(const n of t.rings)for(const t of n)t.length>2&&(t[2]*=e)}(t,o);case"multipoint":case"esriGeometryMultipoint":return t=>function(t,e){if(t)for(const n of t.points)n.length>2&&(n[2]*=e)}(t,o);case"extent":case"esriGeometryExtent":return t=>function(t,e){t&&null!=t.zmin&&null!=t.zmax&&(t.zmin*=e,t.zmax*=e)}(t,o);default:return null}}},289:function(t,e,n){"use strict";n.d(e,"a",(function(){return r})),n.d(e,"b",(function(){return i})),n.d(e,"c",(function(){return s})),n.d(e,"d",(function(){return a})),n.d(e,"e",(function(){return o})),n.d(e,"f",(function(){return u})),n.d(e,"g",(function(){return c})),n.d(e,"h",(function(){return h})),n.d(e,"i",(function(){return l}));const r=[252,146,31,255],i=[153,153,153,255],s={type:"esriSMS",style:"esriSMSCircle",size:6,color:r,outline:{type:"esriSLS",style:"esriSLSSolid",width:.75,color:[153,153,153,255]}},o={type:"esriSLS",style:"esriSLSSolid",width:.75,color:r},a={type:"esriSFS",style:"esriSFSSolid",color:[252,146,31,196],outline:{type:"esriSLS",style:"esriSLSSolid",width:.75,color:[255,255,255,191]}},u={type:"esriTS",color:[255,255,255,255],font:{family:"arial-unicode-ms",size:10,weight:"bold"},horizontalAlignment:"center",kerning:!0,haloColor:[0,0,0,255],haloSize:1,rotated:!1,text:"",xoffset:0,yoffset:0,angle:0},c={type:"esriSMS",style:"esriSMSCircle",color:[0,0,0,255],outline:null,size:10.5},l={type:"esriSLS",style:"esriSLSSolid",color:[0,0,0,255],width:1.5},h={type:"esriSFS",style:"esriSFSSolid",color:[0,0,0,255],outline:null}},328:function(t,e,n){"use strict";n.d(e,"a",(function(){return x})),n.d(e,"b",(function(){return y})),n.d(e,"c",(function(){return u})),n.d(e,"d",(function(){return M})),n.d(e,"e",(function(){return j})),n.d(e,"f",(function(){return I})),n.d(e,"g",(function(){return O}));var r=n(85),i=n(97);const s=(t,e,n)=>[e,n],o=(t,e,n)=>[e,n,t[2]],a=(t,e,n)=>[e,n,t[2],t[3]];function u(t){return t?{originPosition:"upper-left"===t.originPosition?"upperLeft":"lower-left"===t.originPosition?"lowerLeft":t.originPosition,scale:t.tolerance?[t.tolerance,t.tolerance]:[1,1],translate:Object(r.k)(t.extent)?[t.extent.xmin,t.extent.ymax]:[0,0]}:null}function c({scale:t,translate:e},n){return Math.round((n-e[0])/t[0])}function l({scale:t,translate:e},n){return Math.round((e[1]-n)/t[1])}function h(t,e,n){const r=[];let i,s,o,a;for(let u=0;u<n.length;u++){const h=n[u];u>0?(o=c(t,h[0]),a=l(t,h[1]),o===i&&a===s||(r.push(e(h,o-i,a-s)),i=o,s=a)):(i=c(t,h[0]),s=l(t,h[1]),r.push(e(h,i,s)))}return r.length>0?r:null}function f({scale:t,translate:e},n){return n*t[0]+e[0]}function d({scale:t,translate:e},n){return e[1]-n*t[1]}function m(t,e,n){const r=new Array(n.length);if(!n.length)return r;const[i,s]=t.scale;let o=f(t,n[0][0]),a=d(t,n[0][1]);r[0]=e(n[0],o,a);for(let u=1;u<n.length;u++){const t=n[u];o+=t[0]*i,a-=t[1]*s,r[u]=e(t,o,a)}return r}function p(t,e,n){const r=new Array(n.length);for(let i=0;i<n.length;i++)r[i]=m(t,e,n[i]);return r}function g(t,e,n,r,i){return e.points=function(t,e,n,r){return h(t,n?r?a:o:r?o:s,e)}(t,n.points,r,i),e}function y(t,e,n,r,i){return e.x=c(t,n.x),e.y=l(t,n.y),e!==n&&(r&&(e.z=n.z),i&&(e.m=n.m)),e}function b(t,e,n,r,i){const u=function(t,e,n,r){const i=[],u=n?r?a:o:r?o:s;for(let s=0;s<e.length;s++){const n=h(t,u,e[s]);n&&n.length>=3&&i.push(n)}return i.length?i:null}(t,n.rings,r,i);return u?(e.rings=u,e):null}function _(t,e,n,r,i){const u=function(t,e,n,r){const i=[],u=n?r?a:o:r?o:s;for(let s=0;s<e.length;s++){const n=h(t,u,e[s]);n&&n.length>=2&&i.push(n)}return i.length?i:null}(t,n.paths,r,i);return u?(e.paths=u,e):null}function x(t,e){return t&&e?Object(i.f)(e)?y(t,{},e,!1,!1):Object(i.h)(e)?_(t,{},e,!1,!1):Object(i.g)(e)?b(t,{},e,!1,!1):Object(i.e)(e)?g(t,{},e,!1,!1):Object(i.d)(e)?function(t,e,n,r,i){return e.xmin=c(t,n.xmin),e.ymin=l(t,n.ymin),e.xmax=c(t,n.xmax),e.ymax=l(t,n.ymax),e!==n&&(r&&(e.zmin=n.zmin,e.zmax=n.zmax),i&&(e.mmin=n.mmin,e.mmax=n.mmax)),e}(t,{},e,!1,!1):null:null}function M(t,e,n,i,u){return Object(r.k)(n)&&(e.points=function(t,e,n,r){return m(t,n?r?a:o:r?o:s,e)}(t,n.points,i,u)),e}function j(t,e,n,i,s){return Object(r.j)(n)||(e.x=f(t,n.x),e.y=d(t,n.y),e!==n&&(i&&(e.z=n.z),s&&(e.m=n.m))),e}function I(t,e,n,i,u){return Object(r.k)(n)&&(e.rings=function(t,e,n,r){return p(t,n?r?a:o:r?o:s,e)}(t,n.rings,i,u)),e}function O(t,e,n,i,u){return Object(r.k)(n)&&(e.paths=function(t,e,n,r){return p(t,n?r?a:o:r?o:s,e)}(t,n.paths,i,u)),e}},332:function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));class r{constructor(){this.objectIdFieldName=null,this.globalIdFieldName=null,this.geohashFieldName=null,this.geometryProperties=null,this.geometryType=null,this.spatialReference=null,this.hasZ=!1,this.hasM=!1,this.features=[],this.fields=[],this.transform=null,this.exceededTransferLimit=!1,this.uniqueIdField=null,this.queryGeometryType=null,this.queryGeometry=null}weakClone(){const t=new r;return t.objectIdFieldName=this.objectIdFieldName,t.globalIdFieldName=this.globalIdFieldName,t.geohashFieldName=this.geohashFieldName,t.geometryProperties=this.geometryProperties,t.geometryType=this.geometryType,t.spatialReference=this.spatialReference,t.hasZ=this.hasZ,t.hasM=this.hasM,t.features=this.features,t.fields=this.fields,t.transform=this.transform,t.exceededTransferLimit=this.exceededTransferLimit,t.uniqueIdField=this.uniqueIdField,t.queryGeometry=this.queryGeometry,t.queryGeometryType=this.queryGeometryType,t}}},364:function(t,e,n){"use strict";n.d(e,"a",(function(){return f})),n.d(e,"b",(function(){return p})),n.d(e,"c",(function(){return y}));var r=n(85),i=n(187),s=n(432),o=n(110),a=n(182);const u=[0,0];function c(t,e){if(!e)return null;if("x"in e){const n={x:0,y:0};return[n.x,n.y]=t(e.x,e.y,u),null!=e.z&&(n.z=e.z),null!=e.m&&(n.m=e.m),n}if("xmin"in e){const n={xmin:0,ymin:0,xmax:0,ymax:0};return[n.xmin,n.ymin]=t(e.xmin,e.ymin,u),[n.xmax,n.ymax]=t(e.xmax,e.ymax,u),e.hasZ&&(n.zmin=e.zmin,n.zmax=e.zmax,n.hasZ=!0),e.hasM&&(n.mmin=e.mmin,n.mmax=e.mmax,n.hasM=!0),n}return"rings"in e?{rings:l(e.rings,t),hasM:e.hasM,hasZ:e.hasZ}:"paths"in e?{paths:l(e.paths,t),hasM:e.hasM,hasZ:e.hasZ}:"points"in e?{points:h(e.points,t),hasM:e.hasM,hasZ:e.hasZ}:void 0}function l(t,e){const n=[];for(const r of t)n.push(h(r,e));return n}function h(t,e){const n=[];for(const r of t){const t=e(r[0],r[1],[0,0]);n.push(t),r.length>2&&t.push(r[2]),r.length>3&&t.push(r[3])}return n}async function f(t,e){if(!e)return;const n=Array.isArray(t)?t.map((t=>Object(r.k)(t.geometry)&&t.geometry.spatialReference)):[t];await Object(i.f)(n.map((t=>({source:t,dest:e}))))}const d=c.bind(null,a.c),m=c.bind(null,a.g);function p(t,e,n){if(!t)return t;if(n||(n=e,e=t.spatialReference),!Object(o.l)(e)||!Object(o.l)(n)||Object(o.d)(e,n))return t;if(Object(a.a)(e,n)){const e=Object(o.p)(n)?d(t):m(t);return e.spatialReference=n,e}return Object(i.m)(s.a,[t],e,n,null)[0]}const g=new class{constructor(){this._jobs=[],this._timer=null,this._process=this._process.bind(this)}async push(t,e,n){if(!t||!t.length||!e||!n||Object(o.d)(e,n))return t;const r={geometries:t,inSpatialReference:e,outSpatialReference:n,resolve:null};return this._jobs.push(r),new Promise((t=>{r.resolve=t,null===this._timer&&(this._timer=setTimeout(this._process,10))}))}_process(){this._timer=null;const t=this._jobs.shift();if(!t)return;const{geometries:e,inSpatialReference:n,outSpatialReference:r,resolve:u}=t;Object(a.a)(n,r)?Object(o.p)(r)?u(e.map(d)):u(e.map(m)):u(Object(i.m)(s.a,e,n,r,null)),this._jobs.length>0&&(this._timer=setTimeout(this._process,10))}};function y(t,e,n){return g.push(t,e,n)}},432:function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));const r={convertToGEGeometry:function(t,e){return null==e?null:t.convertJSONToGeometry(e)},exportPoint:function(t,e,n){const r=new i(t.getPointX(e),t.getPointY(e),n),s=t.hasZ(e),o=t.hasM(e);return s&&(r.z=t.getPointZ(e)),o&&(r.m=t.getPointM(e)),r},exportPolygon:function(t,e,n){return new s(t.exportPaths(e),n,t.hasZ(e),t.hasM(e))},exportPolyline:function(t,e,n){return new o(t.exportPaths(e),n,t.hasZ(e),t.hasM(e))},exportMultipoint:function(t,e,n){return new a(t.exportPoints(e),n,t.hasZ(e),t.hasM(e))},exportExtent:function(t,e,n){const r=t.hasZ(e),i=t.hasM(e),s=new u(t.getXMin(e),t.getYMin(e),t.getXMax(e),t.getYMax(e),n);if(r){const n=t.getZExtent(e);s.zmin=n.vmin,s.zmax=n.vmax}if(i){const n=t.getMExtent(e);s.mmin=n.vmin,s.mmax=n.vmax}return s}};class i{constructor(t,e,n){this.x=t,this.y=e,this.spatialReference=n,this.z=void 0,this.m=void 0}}class s{constructor(t,e,n,r){this.rings=t,this.spatialReference=e,this.hasZ=void 0,this.hasM=void 0,n&&(this.hasZ=n),r&&(this.hasM=r)}}class o{constructor(t,e,n,r){this.paths=t,this.spatialReference=e,this.hasZ=void 0,this.hasM=void 0,n&&(this.hasZ=n),r&&(this.hasM=r)}}class a{constructor(t,e,n,r){this.points=t,this.spatialReference=e,this.hasZ=void 0,this.hasM=void 0,n&&(this.hasZ=n),r&&(this.hasM=r)}}class u{constructor(t,e,n,r,i){this.xmin=t,this.ymin=e,this.xmax=n,this.ymax=r,this.spatialReference=i,this.zmin=void 0,this.zmax=void 0,this.mmin=void 0,this.mmax=void 0}}},451:function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var r=n(243);class i{constructor(t,e){this._storage=new r.c,this._storage.maxSize=t,e&&this._storage.registerRemoveFunc("",e)}put(t,e){this._storage.put(t,e,1,1)}pop(t){return this._storage.pop(t)}get(t){return this._storage.get(t)}clear(){this._storage.clearAll()}destroy(){this._storage.destroy()}}},460:function(t,e,n){"use strict";n.d(e,"a",(function(){return s}));var r=n(85);function i(t,e){return t?e?4:3:e?3:2}function s(t,e,n,s,u){if(Object(r.j)(e)||!e.lengths.length)return null;const c="upperLeft"===(null==u?void 0:u.originPosition)?-1:1;t.lengths.length&&(t.lengths.length=0),t.coords.length&&(t.coords.length=0);const l=t.coords,h=[],f=n?[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY]:[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY],{lengths:d,coords:m}=e,p=i(n,s);let g=0;for(const r of d){const t=o(f,m,g,r,n,s,c);t&&h.push(t),g+=r*p}if(h.sort(((t,e)=>{let r=c*t[2]-c*e[2];return 0===r&&n&&(r=t[4]-e[4]),r})),h.length){let t=6*h[0][2];l[0]=h[0][0]/t,l[1]=h[0][1]/t,n&&(t=6*h[0][4],l[2]=0!==t?h[0][3]/t:0),(l[0]<f[0]||l[0]>f[1]||l[1]<f[2]||l[1]>f[3]||n&&(l[2]<f[4]||l[2]>f[5]))&&(l.length=0)}if(!l.length){const t=e.lengths[0]?a(m,0,d[0],n,s):null;if(!t)return null;l[0]=t[0],l[1]=t[1],n&&t.length>2&&(l[2]=t[2])}return t}function o(t,e,n,r,s,o,a=1){const u=i(s,o);let c=n,l=n+u,h=0,f=0,d=0,m=0,p=0;for(let i=0,y=r-1;i<y;i++,c+=u,l+=u){const n=e[c],r=e[c+1],i=e[c+2],o=e[l],a=e[l+1],u=e[l+2];let g=n*a-o*r;m+=g,h+=(n+o)*g,f+=(r+a)*g,s&&(g=n*u-o*i,d+=(i+u)*g,p+=g),n<t[0]&&(t[0]=n),n>t[1]&&(t[1]=n),r<t[2]&&(t[2]=r),r>t[3]&&(t[3]=r),s&&(i<t[4]&&(t[4]=i),i>t[5]&&(t[5]=i))}if(m*a>0&&(m*=-1),p*a>0&&(p*=-1),!m)return null;const g=[h,f,.5*m];return s&&(g[3]=d,g[4]=.5*p),g}function a(t,e,n,r,s){const o=i(r,s);let a=e,f=e+o,d=0,m=0,p=0,g=0;for(let i=0,y=n-1;i<y;i++,a+=o,f+=o){const e=t[a],n=t[a+1],i=t[a+2],s=t[f],o=t[f+1],y=t[f+2],b=r?c(e,n,i,s,o,y):u(e,n,s,o);if(b)if(d+=b,r){const t=h(e,n,i,s,o,y);m+=b*t[0],p+=b*t[1],g+=b*t[2]}else{const t=l(e,n,s,o);m+=b*t[0],p+=b*t[1]}}return d>0?r?[m/d,p/d,g/d]:[m/d,p/d]:n>0?r?[t[e],t[e+1],t[e+2]]:[t[e],t[e+1]]:null}function u(t,e,n,r){const i=n-t,s=r-e;return Math.sqrt(i*i+s*s)}function c(t,e,n,r,i,s){const o=r-t,a=i-e,u=s-n;return Math.sqrt(o*o+a*a+u*u)}function l(t,e,n,r){return[t+.5*(n-t),e+.5*(r-e)]}function h(t,e,n,r,i,s){return[t+.5*(r-t),e+.5*(i-e),n+.5*(s-n)]}},561:function(t,e,n){"use strict";n.d(e,"a",(function(){return p})),n.d(e,"b",(function(){return m})),n.d(e,"c",(function(){return f})),n.d(e,"d",(function(){return g})),n.d(e,"e",(function(){return d})),n.d(e,"f",(function(){return h})),n.d(e,"g",(function(){return l}));var r=n(88),i=n(451),s=n(285);const o=new class{constructor(t,e){this._cache=new i.a(t),this._invalidCache=new i.a(e)}get(t,e){const n=`${e.uid}:${t}`,r=this._cache.get(n);if(r)return r;if(void 0!==this._invalidCache.get(n))return null;try{const r=s.WhereClause.create(t,e);return this._cache.put(n,r),r}catch{return this._invalidCache.put(n,null),null}}}(50,500),a="feature-store:unsupported-query",u=" as ",c=new Set(["esriFieldTypeOID","esriFieldTypeSmallInteger","esriFieldTypeInteger","esriFieldTypeSingle","esriFieldTypeDouble","esriFieldTypeLong","esriFieldTypeDate"]);function l(t,e){if(!e)return!0;const n=o.get(e,t);if(!n)throw new r.a(a,"invalid SQL expression",{where:e});if(!n.isStandardized)throw new r.a(a,"where clause is not standard",{where:e});return d(t,n.fieldNames,"where clause contains missing fields"),!0}function h(t,e,n){if(!e)return!0;const i=o.get(e,t);if(!i)throw new r.a(a,"invalid SQL expression",{having:e});if(!i.isAggregate)throw new r.a(a,"having does not contain a valid aggregate function",{having:e});const s=i.fieldNames;if(d(t,s,"having contains missing fields"),!i.getExpressions().every((e=>{const{aggregateType:r,field:i}=e,s=t.has(i)&&t.get(i).name;return n.some((e=>{const{onStatisticField:n,statisticType:i}=e;return(t.has(n)&&t.get(n).name)===s&&i.toLowerCase().trim()===r}))})))throw new r.a(a,"expressions in having should also exist in outStatistics",{having:e});return!0}function f(t,e){return t?o.get(t,e):null}function d(t,e,n,i=!0){const s=[];for(const u of e)if("*"!==u&&!t.has(u))if(i){const e=m(u);try{const n=f(e,t);if(!n)throw new r.a(a,"invalid SQL expression",{where:e});if(!n.isStandardized)throw new r.a(a,"expression is not standard",{clause:n});d(t,n.fieldNames,"expression contains missing fields")}catch(o){const t=o&&o.details;if(t&&(t.clause||t.where))throw o;t&&t.missingFields?s.push(...t.missingFields):s.push(u)}}else s.push(u);if(s.length)throw new r.a(a,n,{missingFields:s})}function m(t){return t.split(u)[0]}function p(t){return t.split(u)[1]}function g(t,e){const n=e.get(t);return!!n&&!c.has(n.type)}},579:function(t,e,n){"use strict";n.r(e),n.d(e,"default",(function(){return M}));var r=n(103),i=n(88),s=n(87),o=n(85),a=n(91),u=n(97),c=n(110),l=n(160),h=n(934),f=n(364),d=n(848),m=n(790),p=n(672),g=n(993),y=n(252),b=n(268),_=n(106);const x={hasAttachments:!1,capabilities:"query, editing, create, delete, update",useStandardizedQueries:!0,supportsCoordinatesQuantization:!0,supportsReturningQueryGeometry:!0,advancedQueryCapabilities:{supportsQueryAttachments:!1,supportsStatistics:!0,supportsPercentileStatistics:!0,supportsReturningGeometryCentroid:!0,supportsQueryWithDistance:!0,supportsDistinct:!0,supportsReturningQueryExtent:!0,supportsReturningGeometryProperties:!1,supportsHavingClause:!0,supportsOrderBy:!0,supportsPagination:!0,supportsQueryWithResultType:!1,supportsSqlExpression:!0,supportsDisjointSpatialRel:!0}};class M{constructor(){this._queryEngine=null,this._snapshotFeatures=async t=>{const e=await this._fetch(t);return this._createFeatures(e)}}destroy(){var t;null==(t=this._queryEngine)||t.destroy(),this._queryEngine=this._fieldsIndex=this._createDefaultAttributes=null}async load(t,e={}){this.loadOptions={url:t.url,customParameters:t.customParameters};const n=[];await this._checkProjection(t.spatialReference);let r=null;t.url&&(r=await this._fetch(null==e?void 0:e.signal));const s=Object(m.c)(r,{geometryType:t.geometryType}),o=t.fields||s.fields||[],a=null!=t.hasZ?t.hasZ:s.hasZ,u=s.geometryType,l=t.objectIdField||s.objectIdFieldName||"__OBJECTID",f=t.spatialReference||c.b;let g=t.timeInfo;o===s.fields&&s.unknownFields.length>0&&n.push({name:"geojson-layer:unknown-field-types",message:"Some fields types couldn't be inferred from the features and were dropped",details:{unknownFields:s.unknownFields}});let M=o.find((t=>t.name===l));M?("esriFieldTypeString"!==M.type&&(M.type="esriFieldTypeOID"),M.editable=!1,M.nullable=!1):(M={alias:l,name:l,type:"string"===s.objectIdFieldType?"esriFieldTypeString":"esriFieldTypeOID",editable:!1,nullable:!1},o.unshift(M));const j={};for(const c of o){if(null==c.name&&(c.name=c.alias),null==c.alias&&(c.alias=c.name),!c.name)throw new i.a("geojson-layer:invalid-field-name","field name is missing",{field:c});if(!b.a.jsonValues.includes(c.type))throw new i.a("geojson-layer:invalid-field-type",`invalid type for field "${c.name}"`,{field:c});if(c.name!==M.name){const t=Object(_.r)(c);void 0!==t&&(j[c.name]=t)}}this._fieldsIndex=new y.a(o);const I=this._fieldsIndex.requiredFields.indexOf(M);if(I>-1&&this._fieldsIndex.requiredFields.splice(I,1),g){if(g.startTimeField){const t=this._fieldsIndex.get(g.startTimeField);t?(g.startTimeField=t.name,t.type="esriFieldTypeDate"):g.startTimeField=null}if(g.endTimeField){const t=this._fieldsIndex.get(g.endTimeField);t?(g.endTimeField=t.name,t.type="esriFieldTypeDate"):g.endTimeField=null}if(g.trackIdField){const t=this._fieldsIndex.get(g.trackIdField);t?g.trackIdField=t.name:(g.trackIdField=null,n.push({name:"geojson-layer:invalid-timeInfo-trackIdField",message:"trackIdField is missing",details:{timeInfo:g}}))}g.startTimeField||g.endTimeField||(n.push({name:"geojson-layer:invalid-timeInfo",message:"startTimeField and endTimeField are missing",details:{timeInfo:g}}),g=null)}const O=u?Object(p.d)(u):null,F={warnings:n,featureErrors:[],layerDefinition:{...x,drawingInfo:O,templates:Object(p.c)(j),extent:null,geometryType:u,objectIdField:l,fields:o,hasZ:!!a,timeInfo:g}};this._queryEngine=new d.a({fields:o,geometryType:u,hasM:!1,hasZ:a,objectIdField:l,spatialReference:f,timeInfo:g,featureStore:new h.a({geometryType:u,hasM:!1,hasZ:a}),cacheSpatialQueries:!0}),this._createDefaultAttributes=Object(p.b)(j,l);const w=await this._createFeatures(r);this._objectIdGenerator=this._createObjectIdGenerator(this._queryEngine,w);const S=this._normalizeFeatures(w,F.warnings,F.featureErrors);if(this._queryEngine.featureStore.addMany(S),F.layerDefinition.extent=this._queryEngine.fullExtent,F.layerDefinition.timeInfo){const{start:t,end:e}=this._queryEngine.timeExtent;F.layerDefinition.timeInfo.timeExtent=[t,e]}return F}async applyEdits(t){const{spatialReference:e,geometryType:n}=this._queryEngine;return await Promise.all([Object(g.c)(e,n),Object(f.a)(t.adds,e),Object(f.a)(t.updates,e)]),await this._waitSnapshotComplete(),this._applyEdits(t)}async queryFeatures(t={},e={}){return await this._waitSnapshotComplete(),this._queryEngine.executeQuery(t,e.signal)}async queryFeatureCount(t={},e={}){return await this._waitSnapshotComplete(),this._queryEngine.executeQueryForCount(t,e.signal)}async queryObjectIds(t={},e={}){return await this._waitSnapshotComplete(),this._queryEngine.executeQueryForIds(t,e.signal)}async queryExtent(t={},e={}){return await this._waitSnapshotComplete(),this._queryEngine.executeQueryForExtent(t,e.signal)}async querySnapping(t,e={}){return await this._waitSnapshotComplete(),this._queryEngine.executeQueryForSnapping(t,e.signal)}async refresh(t){var e;return this.loadOptions.customParameters=t,null==(e=this._snapshotTask)||e.abort(),this._snapshotTask=Object(a.g)(this._snapshotFeatures),this._snapshotTask.promise.then((t=>{this._queryEngine.featureStore.clear(),this._objectIdGenerator=this._createObjectIdGenerator(this._queryEngine,t);const e=this._normalizeFeatures(t);e&&this._queryEngine.featureStore.addMany(e)}),(t=>{this._queryEngine.featureStore.clear(),Object(a.l)(t)||s.a.getLogger("esri.layers.GeoJSONLayer").error(new i.a("geojson-layer:refresh","An error occurred during refresh",{error:t}))})),await this._waitSnapshotComplete(),{extent:this._queryEngine.fullExtent,timeExtent:this._queryEngine.timeExtent}}async _createFeatures(t){const{geometryType:e,hasZ:n,objectIdField:r}=this._queryEngine,i=Object(m.a)(t,{geometryType:e,hasZ:n,objectIdField:r});if(!Object(c.d)(this._queryEngine.spatialReference,c.b))for(const s of i)Object(o.k)(s.geometry)&&(s.geometry=Object(l.d)(Object(f.b)(Object(l.k)(s.geometry,this._queryEngine.geometryType,this._queryEngine.hasZ,!1),c.b,this._queryEngine.spatialReference)));return i}async _waitSnapshotComplete(){if(this._snapshotTask&&!this._snapshotTask.finished){try{await this._snapshotTask.promise}catch{}return this._waitSnapshotComplete()}}async _fetch(t){const{url:e,customParameters:n}=this.loadOptions,i=(await Object(r.default)(e,{responseType:"json",query:{...n},signal:t})).data;return await Object(m.d)(i),i}_normalizeFeatures(t,e,n){const{objectIdField:r}=this._queryEngine,i=[];for(const s of t){const t=this._createDefaultAttributes(),o=Object(g.d)(this._fieldsIndex,t,s.attributes,!0,e);o?null==n||n.push(o):(this._assignObjectId(t,s.attributes,!0),s.attributes=t,s.objectId=t[r],i.push(s))}return i}_applyEdits(t){const{adds:e,updates:n,deletes:r}=t,i={addResults:[],deleteResults:[],updateResults:[],uidToObjectId:{}};if(e&&e.length&&this._applyAddEdits(i,e),n&&n.length&&this._applyUpdateEdits(i,n),r&&r.length){for(const t of r)i.deleteResults.push(Object(g.b)(t));this._queryEngine.featureStore.removeManyById(r)}return{extent:this._queryEngine.fullExtent,timeExtent:this._queryEngine.timeExtent,featureEditResults:i}}_applyAddEdits(t,e){const{addResults:n}=t,{geometryType:r,hasM:i,hasZ:s,objectIdField:a,spatialReference:c,featureStore:h}=this._queryEngine,d=[];for(const l of e){if(l.geometry&&r!==Object(u.c)(l.geometry)){n.push(Object(g.a)("Incorrect geometry type."));continue}const e=this._createDefaultAttributes(),i=Object(g.d)(this._fieldsIndex,e,l.attributes);if(i)n.push(i);else{if(this._assignObjectId(e,l.attributes),l.attributes=e,null!=l.uid){const e=l.attributes[a];t.uidToObjectId[l.uid]=e}Object(o.k)(l.geometry)&&(l.geometry=Object(f.b)(Object(g.e)(l.geometry,c),l.geometry.spatialReference,c)),d.push(l),n.push(Object(g.b)(l.attributes[a]))}}h.addMany(Object(l.c)([],d,r,s,i,a))}_applyUpdateEdits({updateResults:t},e){const{geometryType:n,hasM:r,hasZ:i,objectIdField:s,spatialReference:a,featureStore:c}=this._queryEngine;for(const h of e){const{attributes:e,geometry:d}=h,m=e&&e[s];if(null==m){t.push(Object(g.a)(`Identifier field ${s} missing`));continue}if(!c.has(m)){t.push(Object(g.a)(`Feature with object id ${m} missing`));continue}const p=Object(l.i)(c.getFeature(m),n,i,r);if(Object(o.k)(d)){if(n!==Object(u.c)(d)){t.push(Object(g.a)("Incorrect geometry type."));continue}p.geometry=Object(f.b)(Object(g.e)(d,a),d.spatialReference,a)}if(e){const n=Object(g.d)(this._fieldsIndex,p.attributes,e);if(n){t.push(n);continue}}c.add(Object(l.a)(p,n,i,r,s)),t.push(Object(g.b)(m))}}_createObjectIdGenerator(t,e){const n=t.fieldsIndex.get(t.objectIdField);if("esriFieldTypeString"===n.type)return()=>n.name+"-"+Date.now().toString(16);let r=Number.NEGATIVE_INFINITY;for(const i of e)i.objectId&&(r=Math.max(r,i.objectId));return r=Math.max(0,r)+1,()=>r++}_assignObjectId(t,e,n=!1){const r=this._queryEngine.objectIdField;t[r]=n&&r in e?e[r]:this._objectIdGenerator()}async _checkProjection(t){try{await Object(f.a)(c.b,t)}catch{throw new i.a("geojson-layer","Projection not supported")}}}},600:function(t,e,n){"use strict";n.d(e,"a",(function(){return m})),n.d(e,"b",(function(){return I})),n.d(e,"c",(function(){return x})),n.d(e,"d",(function(){return M})),n.d(e,"e",(function(){return j})),n.d(e,"f",(function(){return _}));var r=n(90),i=n(85),s=n(114),o=n(400),a=n(97),u=n(229),c=n(110),l=(n(460),n(160)),h=n(168),f=n(364);const d=new r.a({esriSRUnit_Meter:"meters",esriSRUnit_Kilometer:"kilometers",esriSRUnit_Foot:"feet",esriSRUnit_StatuteMile:"miles",esriSRUnit_NauticalMile:"nautical-miles",esriSRUnit_USNauticalMile:"us-nautical-miles"}),m=Object.freeze({}),p=new h.a,g=new h.a,y=new h.a,b={esriGeometryPoint:l.m,esriGeometryPolyline:l.o,esriGeometryPolygon:l.n,esriGeometryMultipoint:l.l};function _(t,e,n,r=t.hasZ,s=t.hasM){if(Object(i.j)(e))return null;const o=t.hasZ&&r,a=t.hasM&&s;if(n){const i=Object(l.u)(y,e,t.hasZ,t.hasM,"esriGeometryPoint",n,r,s);return Object(l.m)(i,o,a)}return Object(l.m)(e,o,a)}function x(t,e,n,r,s,o,a=e,u=n){const c=e&&a,h=n&&u,f=Object(i.k)(r)?"coords"in r?r:r.geometry:null;if(Object(i.j)(f))return null;if(s){let r=Object(l.q)(g,f,e,n,t,s,a,u);return o&&(r=Object(l.u)(y,r,c,h,t,o)),b[t](r,c,h)}if(o){const r=Object(l.u)(y,f,e,n,t,o,a,u);return b[t](r,c,h)}return Object(l.x)(p,f,e,n,a,u),b[t](p,c,h)}async function M(t,e,n){const{outFields:r,orderByFields:i,groupByFieldsForStatistics:s,outStatistics:o}=t;if(r)for(let a=0;a<r.length;a++)r[a]=r[a].trim();if(i)for(let a=0;a<i.length;a++)i[a]=i[a].trim();if(s)for(let a=0;a<s.length;a++)s[a]=s[a].trim();if(o)for(let a=0;a<o.length;a++)o[a].onStatisticField&&(o[a].onStatisticField=o[a].onStatisticField.trim());return t.geometry&&!t.outSR&&(t.outSR=t.geometry.spatialReference),j(t,e,n)}async function j(t,e,r){if(!t)return null;let{where:l}=t;if(t.where=l=l&&l.trim(),(!l||/^1 *= *1$/.test(l)||e&&e===l)&&(t.where=null),!t.geometry)return t;let h=await async function(t){const{geometry:e,distance:r,units:i}=t;if(null==r||"vertexAttributes"in e)return e;const o=e.spatialReference,a=i?d.fromJSON(i):Object(s.g)(o),u=o&&(Object(c.h)(o)||Object(c.p)(o))?e:await Object(f.a)(o,c.b).then((()=>Object(f.b)(e,c.b)));return(await async function(){return(await Promise.all([n.e(6),n.e(20)]).then(n.bind(null,559))).geodesicBuffer}())(u.spatialReference,u,r,a)}(t);if(t.distance=0,t.units=null,"esriSpatialRelEnvelopeIntersects"===t.spatialRel){const{spatialReference:e}=t.geometry;h=Object(o.a)(h),h.spatialReference=e}t.geometry=h,await Object(f.a)(h.spatialReference,r);const p=(await Object(u.a)(Object(a.a)(h)))[0];if(Object(i.j)(p))throw m;const g=p.toJSON(),y=await Object(f.b)(g,g.spatialReference,r);if(!y)throw m;return y.spatialReference=r,t.geometry=y,t}function I(t){return t&&O in t?JSON.parse(JSON.stringify(t,F)):t}const O="_geVersion",F=(t,e)=>t!==O?e:void 0},634:function(t,e,n){"use strict";function r(t,e){if(!t)return null;const n=e.featureAdapter,{startTimeField:r,endTimeField:i}=t;let s=Number.POSITIVE_INFINITY,o=Number.NEGATIVE_INFINITY;if(r&&i)e.forEach((t=>{const e=n.getAttribute(t,r),a=n.getAttribute(t,i);null==e||isNaN(e)||(s=Math.min(s,e)),null==a||isNaN(a)||(o=Math.max(o,a))}));else{const t=r||i;e.forEach((e=>{const r=n.getAttribute(e,t);null==r||isNaN(r)||(s=Math.min(s,r),o=Math.max(o,r))}))}return{start:s,end:o}}function i(t,e,n){if(!e||!t)return null;const{startTimeField:r,endTimeField:i}=t;if(!r&&!i)return null;const{start:s,end:o}=e;return null===s&&null===o?null:void 0===s&&void 0===o?()=>!1:r&&i?function(t,e,n,r,i){return null!=r&&null!=i?s=>{const o=t.getAttribute(s,e),a=t.getAttribute(s,n);return(null==o||o<=i)&&(null==a||a>=r)}:null!=r?e=>{const i=t.getAttribute(e,n);return null==i||i>=r}:null!=i?n=>{const r=t.getAttribute(n,e);return null==r||r<=i}:void 0}(n,r,i,s,o):function(t,e,n,r){return null!=n&&null!=r&&n===r?r=>t.getAttribute(r,e)===n:null!=n&&null!=r?i=>{const s=t.getAttribute(i,e);return s>=n&&s<=r}:null!=n?r=>t.getAttribute(r,e)>=n:null!=r?n=>t.getAttribute(n,e)<=r:void 0}(n,r||i,s,o)}n.d(e,"a",(function(){return r})),n.d(e,"b",(function(){return i}))},672:function(t,e,n){"use strict";n.d(e,"a",(function(){return f})),n.d(e,"b",(function(){return l})),n.d(e,"c",(function(){return h})),n.d(e,"d",(function(){return a}));var r=n(82),i=n(89),s=n(671),o=n(289);function a(t){return{renderer:{type:"simple",symbol:"esriGeometryPoint"===t||"esriGeometryMultipoint"===t?o.c:"esriGeometryPolyline"===t?o.e:o.d}}}const u=/^[_$a-zA-Z][_$a-zA-Z0-9]*$/;let c=1;function l(t,e){if(Object(r.a)("esri-csp-restrictions"))return()=>({[e]:null,...t});try{let n=`this.${e} = null;`;for(const e in t)n+=`this${u.test(e)?`.${e}`:`["${e}"]`} = ${JSON.stringify(t[e])};`;const r=new Function(`\n      return class AttributesClass$${c++} {\n        constructor() {\n          ${n};\n        }\n      }\n    `)();return()=>new r}catch(n){return()=>({[e]:null,...t})}}function h(t={}){return[{name:"New Feature",description:"",prototype:{attributes:Object(i.a)(t)}}]}function f(t,e){return{attachment:null,data:{isVersioned:!1,supportsAttachment:!1,supportsM:!1,supportsZ:t},metadata:{supportsAdvancedFieldProperties:!1},operations:{supportsCalculate:!1,supportsTruncate:!1,supportsValidateSql:!1,supportsAdd:e,supportsDelete:e,supportsEditing:e,supportsChangeTracking:!1,supportsQuery:!0,supportsQueryAttachments:!1,supportsResizeAttachments:!1,supportsSync:!1,supportsUpdate:e,supportsExceedsLimitStatistics:!0},query:s.a,queryRelated:{supportsCount:!0,supportsOrderBy:!0,supportsPagination:!0},editing:{supportsGeometryUpdate:e,supportsGlobalId:!1,supportsReturnServiceEditsInSourceSpatialReference:!1,supportsRollbackOnFailure:!1,supportsUpdateWithoutM:!1,supportsUploadWithItemId:!1,supportsDeleteByAnonymous:!1,supportsDeleteByOthers:!1,supportsUpdateByAnonymous:!1,supportsUpdateByOthers:!1}}}},775:function(t,e,n){"use strict";n.d(e,"a",(function(){return f})),n.d(e,"b",(function(){return _}));var r=n(85),i=n(438),s=n(400),o=n(328),a=n(110),u=n(160),c=n(561),l=n(616);class h{constructor(t,e,n){this._fieldDataCache=new Map,this._returnDistinctMap=new Map,this.returnDistinctValues=t.returnDistinctValues,this.fieldsIndex=n,this.featureAdapter=e;const r=t.outFields;if(r&&-1===r.indexOf("*")){this.outFields=r;let t=0;for(const e of r){const r=Object(c.b)(e),i=this.fieldsIndex.get(r),s=i?null:Object(c.c)(r,n),o=i?i.name:Object(c.a)(e)||"FIELD_EXP_"+t++;this._fieldDataCache.set(e,{alias:o,clause:s})}}}countDistinctValues(t){return this.returnDistinctValues?(t.forEach((t=>this.getAttributes(t))),this._returnDistinctMap.size):t.length}getAttributes(t){const e=this._processAttributesForOutFields(t);return this._processAttributesForDistinctValues(e)}getFieldValue(t,e,n){const r=n?n.name:e;let i=null;return this._fieldDataCache.has(r)?i=this._fieldDataCache.get(r).clause:n||(i=Object(c.c)(e,this.fieldsIndex),this._fieldDataCache.set(r,{alias:r,clause:i})),n?this.featureAdapter.getAttribute(t,r):i.calculateValue(t,this.featureAdapter)}getNormalizedValue(t,e){const n=e.normalizationType,r=e.normalizationTotal;let i=this.getFieldValue(t,e.field,e.fieldInfo);if(n&&Number.isFinite(i)){const s=this.getFieldValue(t,e.normalizationField,e.normalizationFieldInfo);i=Object(l.i)(i,n,s,r)}return i}getExpressionValue(t,e,n){const r={attributes:this.featureAdapter.getAttributes(t)},i=n.createExecContext(r,e.viewInfo);return n.executeFunction(e.compiledFunc,i)}validateItem(t,e){return this._fieldDataCache.has(e)||this._fieldDataCache.set(e,{alias:e,clause:Object(c.c)(e,this.fieldsIndex)}),this._fieldDataCache.get(e).clause.testFeature(t,this.featureAdapter)}validateItems(t,e){return this._fieldDataCache.has(e)||this._fieldDataCache.set(e,{alias:e,clause:Object(c.c)(e,this.fieldsIndex)}),this._fieldDataCache.get(e).clause.testSet(t,this.featureAdapter)}_processAttributesForOutFields(t){const e=this.outFields;if(!e||!e.length)return this.featureAdapter.getAttributes(t);const n={};for(const r of e){const{alias:e,clause:i}=this._fieldDataCache.get(r);n[e]=i?i.calculateValue(t,this.featureAdapter):this.featureAdapter.getAttribute(t,e)}return n}_processAttributesForDistinctValues(t){if(Object(r.j)(t)||!this.returnDistinctValues)return t;const e=this.outFields,n=[];if(e)for(const r of e){const{alias:e}=this._fieldDataCache.get(r);n.push(t[e])}else for(const r in t)n.push(t[r]);const i=`${(e||["*"]).join(",")}=${n.join(",")}`;let s=this._returnDistinctMap.get(i)||0;return this._returnDistinctMap.set(i,++s),s>1?null:t}}var f,d,m=n(364),p=n(634),g=n(600),y=n(106),b=n(130);class _{constructor(t,e,n){this.items=t,this.queryGeometry=e,this.definitionExpression=n.definitionExpression,this.geometryType=n.geometryType,this.hasM=n.hasM,this.hasZ=n.hasZ,this.objectIdField=n.objectIdField,this.spatialReference=n.spatialReference,this.fieldsIndex=n.fieldsIndex,this.timeInfo=n.timeInfo,this.featureAdapter=n.featureAdapter,this.aggregateAdapter=n.aggregateAdapter}get size(){return this.items.length}createQueryResponseForCount(t){const e=new h(t,this.featureAdapter,this.fieldsIndex);if(!t.outStatistics)return e.countDistinctValues(this.items);const{groupByFieldsForStatistics:n,having:r}=t;if(!(null==n?void 0:n.length))return 1;const i=new Map,s=new Map,o=new Set,a=t.outStatistics;for(const u of a){const{statisticType:t}=u,a="exceedslimit"!==t?u.onStatisticField:void 0;if(!s.has(a)){const t=[];for(const r of n){const n=this._getAttributeValues(e,r,i);t.push(n)}s.set(a,this._calculateUniqueValues(t,e.returnDistinctValues))}const c=s.get(a);for(const n in c){const{data:t,items:i}=c[n],s=t.join(",");r&&!e.validateItems(i,r)||o.add(s)}}return o.size}async createQueryResponse(t){let e;return e=t.outStatistics?t.outStatistics.some((t=>"exceedslimit"===t.statisticType))?this._createExceedsLimitQueryResponse(t):await this._createStatisticsQueryResponse(t):this._createFeatureQueryResponse(t),t.returnQueryGeometry&&(Object(a.l)(t.outSR)&&!Object(a.d)(this.queryGeometry.spatialReference,t.outSR)?e.queryGeometry=Object(g.b)({spatialReference:t.outSR,...Object(m.b)(this.queryGeometry,this.queryGeometry.spatialReference,t.outSR)}):e.queryGeometry=Object(g.b)({spatialReference:t.outSR,...this.queryGeometry})),e}createSnappingResponse(t,e){const n=this.featureAdapter,i=function(t,e){return t?e?4:3:e?3:2}(this.hasZ,this.hasM),{x:s,y:o}=t.point,a="number"==typeof t.distance?t.distance:t.distance.x,u="number"==typeof t.distance?t.distance:t.distance.y,c={candidates:[]},l="esriGeometryPolygon"===this.geometryType,h=this._getPointCreator(t.point,this.spatialReference,e);for(const d of this.items){const e=n.getGeometry(d);if(Object(r.j)(e))continue;const{coords:m,lengths:p}=e;if(t.types&f.EDGE){let t=0;for(let e=0;e<p.length;e++){const r=p[e];for(let e=0;e<r;e++,t+=i){const l=m[t],f=m[t+1];if(e!==r-1){const e=m[t+i],r=m[t+i+1],{x:p,y:g}=x(s,o,l,f,e,r),y=(s-p)/a,b=(o-g)/u,_=y*y+b*b;_<=1&&c.candidates.push({type:"edge",objectId:n.getObjectId(d),distance:Math.sqrt(_),target:h(p,g),start:h(l,f),end:h(e,r)})}}}}if(t.types&f.VERTEX){const t=l?m.length-i:m.length;for(let e=0;e<t;e+=i){const t=m[e],r=m[e+1],i=(s-t)/a,l=(o-r)/u,f=i*i+l*l;f<=1&&c.candidates.push({type:"vertex",objectId:n.getObjectId(d),distance:Math.sqrt(f),target:h(t,r)})}}}return c.candidates.sort(((t,e)=>t.distance-e.distance)),c}_getPointCreator(t,e,n){const i=Object(r.k)(n)&&!Object(a.d)(e,n)?t=>Object(m.b)(t,e,n):t=>t;return null!=t.z&&null!=t.m?(e,n)=>i({x:e,y:n,z:t.z,m:t.m}):null!=t.z?(e,n)=>i({x:e,y:n,z:t.z}):null!=t.m?(e,n)=>i({x:e,y:n,m:t.m}):(t,e)=>i({x:t,y:e})}executeAttributesQuery(t){const e=Object(c.c)(t.where,this.fieldsIndex);if(!e)return Promise.resolve(this);if(e.isStandardized){let n=0;const r=[];for(const t of this.items)e.testFeature(t,this.featureAdapter)&&(r[n++]=t);const i=new _(r,this.queryGeometry,this);return i.definitionExpression=t.where,Promise.resolve(i)}return Promise.reject(new TypeError("Where clause is not standardized"))}executeAggregateIdsQuery(t){if(!t.aggregateIds||!t.aggregateIds.length||Object(r.j)(this.aggregateAdapter))return Promise.resolve(this);const e=new Set;for(const r of t.aggregateIds)this.aggregateAdapter.getFeatureObjectIds(r).forEach((t=>e.add(t)));const n=this.featureAdapter.getObjectId;return Promise.resolve(new _(this.items.filter((t=>e.has(n(t)))),this.queryGeometry,this))}executeObjectIdsQuery(t){if(!t.objectIds||!t.objectIds.length)return Promise.resolve(this);const e=new Set(t.objectIds),n=this.featureAdapter.getObjectId;return Promise.resolve(new _(this.items.filter((t=>e.has(n(t)))),this.queryGeometry,this))}executeTimeQuery(t){const e=Object(p.b)(this.timeInfo,t.timeExtent,this.featureAdapter);if(!Object(r.k)(e))return Promise.resolve(this);const n=this.items.filter(e);return Promise.resolve(new _(n,this.queryGeometry,this))}filterLatest(){const{trackIdField:t,startTimeField:e,endTimeField:n}=this.timeInfo,r=n||e,i=new Map,s=this.featureAdapter.getAttribute;for(const a of this.items){const e=s(a,t),n=s(a,r),o=i.get(e);(!o||n>s(o,r))&&i.set(e,a)}const o=Array.from(i.values());return Promise.resolve(new _(o,this.queryGeometry,this))}async project(t){if(!t||Object(a.d)(this.spatialReference,t))return this;const e=this.featureAdapter,n=(await Object(m.c)(this.items.map((t=>Object(g.c)(this.geometryType,this.hasZ,this.hasM,e.getGeometry(t)))),this.spatialReference,t)).map(((t,n)=>e.cloneWithGeometry(this.items[n],Object(u.d)(t,this.hasZ,this.hasM))));return new _(n,this.queryGeometry,{definitionExpression:this.definitionExpression,geometryType:this.geometryType,hasM:this.hasM,hasZ:this.hasZ,objectIdField:this.objectIdField,spatialReference:t,fieldsIndex:this.fieldsIndex,timeInfo:this.timeInfo,featureAdapter:this.featureAdapter})}async createSummaryStatisticsResponse(t,e){const{field:n,valueExpression:r,normalizationField:i,normalizationType:s,normalizationTotal:o,minValue:a,maxValue:u,scale:c}=e,h=this.fieldsIndex.isDateField(n),f=await this._getDataValues(t,{field:n,valueExpression:r,normalizationField:i,normalizationType:s,normalizationTotal:o,scale:c}),d=Object(l.j)({normalizationType:s,normalizationField:i,minValue:a,maxValue:u}),m=this.fieldsIndex.get(n),p={value:.5,fieldType:null==m?void 0:m.type},g=Object(y.v)(m)?Object(l.e)({values:f,supportsNullCount:d,percentileParams:p}):Object(l.d)({values:f,minValue:a,maxValue:u,useSampleStdDev:!s,supportsNullCount:d,percentileParams:p});return Object(l.k)(g,h)}async createUniqueValuesResponse(t,e){const{field:n,valueExpression:r,domain:i,returnAllCodedValues:s,scale:o}=e,a=await this._getDataValues(t,{field:n,valueExpression:r,scale:o}),u=Object(l.f)(a);return Object(l.g)(u,i,s)}async createClassBreaksResponse(t,e){const{field:n,valueExpression:r,normalizationField:i,normalizationType:s,normalizationTotal:o,classificationMethod:a,standardDeviationInterval:u,minValue:c,maxValue:h,numClasses:f,scale:d}=e,m=await this._getDataValues(t,{field:n,valueExpression:r,normalizationField:i,normalizationType:s,normalizationTotal:o,scale:d}),p=Object(l.a)(m,{field:n,normalizationField:i,normalizationType:s,normalizationTotal:o,classificationMethod:a,standardDeviationInterval:u,minValue:c,maxValue:h,numClasses:f});return Object(l.l)(p,a)}async createHistogramResponse(t,e){const{field:n,valueExpression:r,normalizationField:i,normalizationType:s,normalizationTotal:o,classificationMethod:a,standardDeviationInterval:u,minValue:c,maxValue:h,numBins:f,scale:d}=e,m=await this._getDataValues(t,{field:n,valueExpression:r,normalizationField:i,normalizationType:s,normalizationTotal:o,scale:d});return Object(l.b)(m,{field:n,normalizationField:i,normalizationType:s,normalizationTotal:o,classificationMethod:a,standardDeviationInterval:u,minValue:c,maxValue:h,numBins:f})}_sortFeatures(t,e,n){if(t.length>1&&e&&e.length)for(const r of e.reverse()){const e=r.split(" "),i=e[0],s=this.fieldsIndex.get(i),o=e[1]&&"desc"===e[1].toLowerCase(),a=Object(l.h)(null==s?void 0:s.type,o);t.sort(((t,e)=>{const r=n(t,i,s),o=n(e,i,s);return a(r,o)}))}}_createFeatureQueryResponse(t){const e=this.items,{geometryType:n,hasM:r,hasZ:i,objectIdField:s,spatialReference:a}=this,{outFields:u,outSR:c,quantizationParameters:l,resultRecordCount:h,resultOffset:f,returnZ:d,returnM:m}=t,p=null!=h&&e.length>(f||0)+h,y=u&&(u.includes("*")?[...this.fieldsIndex.fields]:u.map((t=>this.fieldsIndex.get(t))));return{exceededTransferLimit:p,features:this._createFeatures(t,e),fields:y,geometryType:n,hasM:r&&m,hasZ:i&&d,objectIdFieldName:s,spatialReference:Object(g.b)(c||a),transform:l&&Object(o.c)(l)||null}}_createFeatures(t,e){const n=new h(t,this.featureAdapter,this.fieldsIndex),{hasM:r,hasZ:i}=this,{orderByFields:s,quantizationParameters:a,returnGeometry:u,returnCentroid:c,maxAllowableOffset:l,resultOffset:f,resultRecordCount:d,returnZ:m=!1,returnM:p=!1}=t,y=i&&m,b=r&&p;let _=[],x=0;const M=[...e];if(this._sortFeatures(M,s,((t,e,r)=>n.getFieldValue(t,e,r))),u||c){const t=Object(o.c)(a);if(u&&!c)for(const e of M)_[x++]={attributes:n.getAttributes(e),geometry:Object(g.c)(this.geometryType,this.hasZ,this.hasM,this.featureAdapter.getGeometry(e),l,t,y,b)};else if(!u&&c)for(const e of M)_[x++]={attributes:n.getAttributes(e),centroid:Object(g.f)(this,this.featureAdapter.getCentroid(e,this),t)};else for(const e of M)_[x++]={attributes:n.getAttributes(e),centroid:Object(g.f)(this,this.featureAdapter.getCentroid(e,this),t),geometry:Object(g.c)(this.geometryType,this.hasZ,this.hasM,this.featureAdapter.getGeometry(e),l,t,y,b)}}else for(const o of M){const t=n.getAttributes(o);t&&(_[x++]={attributes:t})}const j=f||0;if(null!=d){const t=j+d;_=_.slice(j,Math.min(_.length,t))}return _}_createExceedsLimitQueryResponse(t){let e=!1,n=Number.POSITIVE_INFINITY,i=Number.POSITIVE_INFINITY,s=Number.POSITIVE_INFINITY;for(const r of t.outStatistics)if("exceedslimit"===r.statisticType){n=null!=r.maxPointCount?r.maxPointCount:Number.POSITIVE_INFINITY,i=null!=r.maxRecordCount?r.maxRecordCount:Number.POSITIVE_INFINITY,s=null!=r.maxVertexCount?r.maxVertexCount:Number.POSITIVE_INFINITY;break}if("esriGeometryPoint"===this.geometryType)e=this.items.length>n;else if(this.items.length>i)e=!0;else{const t=this.hasZ?this.hasM?4:3:this.hasM?3:2,n=this.featureAdapter;e=this.items.reduce(((t,e)=>{const i=n.getGeometry(e);return t+(Object(r.k)(i)&&i.coords.length||0)}),0)/t>s}return{fields:[{name:"exceedslimit",type:"esriFieldTypeInteger",alias:"exceedslimit",sqlType:"sqlTypeInteger",domain:null,defaultValue:null}],features:[{attributes:{exceedslimit:Number(e)}}]}}async _createStatisticsQueryResponse(t){const e={attributes:{}},n=[],r=new Map,i=new Map,s=new Map,o=new Map,a=new h(t,this.featureAdapter,this.fieldsIndex),u=t.outStatistics,{groupByFieldsForStatistics:c,having:l,orderByFields:f}=t,d=c&&c.length,m=!!d,p=m&&c[0],g=m&&!this.fieldsIndex.get(p);for(const h of u){const{outStatisticFieldName:t,statisticType:u}=h,f=h,y="exceedslimit"!==u?h.onStatisticField:void 0,b="percentile_disc"===u||"percentile_cont"===u,_="EnvelopeAggregate"===u||"CentroidAggregate"===u||"ConvexHullAggregate"===u,x=m&&1===d&&(y===p||g)&&"count"===u;if(m){if(!s.has(y)){const t=[];for(const e of c){const n=this._getAttributeValues(a,e,r);t.push(n)}s.set(y,this._calculateUniqueValues(t,a.returnDistinctValues))}const e=s.get(y);for(const n in e){const{count:i,data:s,items:u,itemPositions:h}=e[n],d=s.join(",");if(!l||a.validateItems(u,l)){const e=o.get(d)||{attributes:{}};if(_){e.aggregateGeometries||(e.aggregateGeometries={});const{aggregateGeometries:t,outStatisticFieldName:n}=await this._getAggregateGeometry(f,u);e.aggregateGeometries[n]=t}else{let n=null;if(x)n=i;else{const t=this._getAttributeValues(a,y,r),e=h.map((e=>t[e]));n=b&&"statisticParameters"in f?this._getPercentileValue(f,e):this._getStatisticValue(f,e,null,a.returnDistinctValues)}e.attributes[t]=n}c.forEach(((t,n)=>e.attributes[this.fieldsIndex.get(t)?t:`EXPR_${n+1}`]=s[n])),o.set(d,e)}}}else if(_){e.aggregateGeometries||(e.aggregateGeometries={});const{aggregateGeometries:t,outStatisticFieldName:n}=await this._getAggregateGeometry(f,this.items);e.aggregateGeometries[n]=t}else{const n=this._getAttributeValues(a,y,r);e.attributes[t]=b&&"statisticParameters"in f?this._getPercentileValue(f,n):this._getStatisticValue(f,n,i,a.returnDistinctValues)}n.push({name:t,alias:t,type:"esriFieldTypeDouble"})}const y=m?Array.from(o.values()):[e];return this._sortFeatures(y,f,((t,e)=>t.attributes[e])),{fields:n,features:y}}async _getAggregateGeometry(t,e){const r=await Promise.all([n.e(6),n.e(20)]).then(n.bind(null,559)),{statisticType:o,outStatisticFieldName:a}=t,{featureAdapter:u,spatialReference:c,geometryType:l,hasZ:h,hasM:f}=this,d=e.map((t=>Object(g.c)(l,h,f,u.getGeometry(t)))),m=r.convexHull(c,d,!0)[0],p={aggregateGeometries:null,outStatisticFieldName:null};if("EnvelopeAggregate"===o){const t=m?Object(s.b)(m):Object(s.a)(r.union(c,d));p.aggregateGeometries={...t,spatialReference:c},p.outStatisticFieldName=a||"extent"}else if("CentroidAggregate"===o){const t=m?Object(i.b)(m):Object(i.a)(Object(s.a)(r.union(c,d)));p.aggregateGeometries={x:t[0],y:t[1],spatialReference:c},p.outStatisticFieldName=a||"centroid"}else"ConvexHullAggregate"===o&&(p.aggregateGeometries=m,p.outStatisticFieldName=a||"convexHull");return p}_getStatisticValue(t,e,n,r){const{onStatisticField:i,statisticType:s}=t;let o=null;return o=null!=n&&n.has(i)?n.get(i):Object(y.v)(this.fieldsIndex.get(i))?Object(l.e)({values:e,returnDistinct:r}):Object(l.d)({values:e,minValue:null,maxValue:null,useSampleStdDev:!0}),n&&n.set(i,o),o["var"===s?"variance":s]}_getPercentileValue(t,e){const{onStatisticField:n,statisticParameters:r,statisticType:i}=t,{value:s,orderBy:o}=r,a=this.fieldsIndex.get(n),u={value:s,orderBy:o,fieldType:null==a?void 0:a.type,isDiscrete:"percentile_disc"===i};return Object(l.c)(e,u)}_getAttributeValues(t,e,n){if(n.has(e))return n.get(e);const r=this.fieldsIndex.get(e),i=this.items.map((n=>t.getFieldValue(n,e,r)));return n.set(e,i),i}_getAttributeNormalizedValues(t,e){return this.items.map((n=>t.getNormalizedValue(n,{field:e.field,fieldInfo:this.fieldsIndex.get(e.field),normalizationField:e.normalizationField,normalizationFieldInfo:this.fieldsIndex.get(e.normalizationField),normalizationType:e.normalizationType,normalizationTotal:e.normalizationTotal})))}async _getAttributeExpressionValues(t,e,n){const{arcadeUtils:r}=await Object(b.e)(),i=r.createFunction(e),s=n&&r.getViewInfo(n);return this.items.map((e=>t.getExpressionValue(e,{compiledFunc:i,viewInfo:s},r)))}_calculateUniqueValues(t,e){const n={},r=this.items,i=r.length;for(let s=0;s<i;s++){const i=r[s],o=[];for(const e of t)o.push(e[s]);const a=o.join(",");e?null==n[a]&&(n[a]={count:1,data:o,items:[i],itemPositions:[s]}):null==n[a]?n[a]={count:1,data:o,items:[i],itemPositions:[s]}:(n[a].count++,n[a].items.push(i),n[a].itemPositions.push(s))}return n}async _getDataValues(t,e){const n=new h(t,this.featureAdapter,this.fieldsIndex),{valueExpression:r,field:i,normalizationField:s,normalizationType:o,normalizationTotal:a,scale:u}=e,c=r?{viewingMode:"map",scale:u,spatialReference:t.outSR||this.spatialReference}:null;return r?this._getAttributeExpressionValues(n,r,c):this._getAttributeNormalizedValues(n,{field:i,normalizationField:s,normalizationType:o,normalizationTotal:a})}}function x(t,e,n,r,i,s){const o=i-n,a=s-r,u=o*o+a*a,c=(t-n)*o+(e-r)*a,l=Math.min(1,Math.max(0,c/u));return{x:n+o*l,y:r+a*l}}(d=f||(f={}))[d.NONE=0]="NONE",d[d.EDGE=1]="EDGE",d[d.VERTEX=2]="VERTEX"},790:function(t,e,n){"use strict";n.d(e,"a",(function(){return I})),n.d(e,"b",(function(){return u})),n.d(e,"c",(function(){return j})),n.d(e,"d",(function(){return M}));var r=n(88),i=n(262),s=n(168),o=n(106);const a={LineString:"esriGeometryPolyline",MultiLineString:"esriGeometryPolyline",MultiPoint:"esriGeometryMultipoint",Point:"esriGeometryPoint",Polygon:"esriGeometryPolygon",MultiPolygon:"esriGeometryPolygon"};function u(t){return a[t]}function*c(t){switch(t.type){case"Feature":yield t;break;case"FeatureCollection":for(const e of t.features)e&&(yield e)}}function*l(t){if(!t)return null;switch(t.type){case"Point":yield t.coordinates;break;case"LineString":case"MultiPoint":yield*t.coordinates;break;case"MultiLineString":case"Polygon":for(const e of t.coordinates)yield*e;break;case"MultiPolygon":for(const e of t.coordinates)for(const t of e)yield*t}}function h(t){for(const e of t)if(e.length>2)return!0;return!1}function f(t){let e=0;for(let n=0;n<t.length;n++){const r=t[n],i=t[(n+1)%t.length];e+=r[0]*i[1]-i[0]*r[1]}return e<=0}function d(t){const e=t[0],n=t[t.length-1];return e[0]===n[0]&&e[1]===n[1]&&e[2]===n[2]||t.push(e),t}function m(t,e,n){switch(e.type){case"LineString":case"MultiPoint":return function(t,e,n){return y(t,e.coordinates,n),t}(t,e,n);case"MultiLineString":return function(t,e,n){for(const r of e.coordinates)y(t,r,n);return t}(t,e,n);case"MultiPolygon":return function(t,e,n){for(const r of e.coordinates){p(t,r[0],n);for(let e=1;e<r.length;e++)g(t,r[e],n)}return t}(t,e,n);case"Point":return function(t,e,n){return _(t,e.coordinates,n),t}(t,e,n);case"Polygon":return function(t,e,n){const r=e.coordinates;p(t,r[0],n);for(let i=1;i<r.length;i++)g(t,r[i],n);return t}(t,e,n)}}function p(t,e,n){const r=d(e);!function(t){return!f(t)}(r)?y(t,r,n):b(t,r,n)}function g(t,e,n){const r=d(e);!function(t){return f(t)}(r)?y(t,r,n):b(t,r,n)}function y(t,e,n){for(const r of e)_(t,r,n);t.lengths.push(e.length)}function b(t,e,n){for(let r=e.length-1;r>=0;r--)_(t,e[r],n);t.lengths.push(e.length)}function _(t,e,n){const[r,i,s]=e;t.coords.push(r,i),n.hasZ&&t.coords.push(s||0)}function x(t){switch(typeof t){case"string":return"esriFieldTypeString";case"number":return"esriFieldTypeDouble";default:return"unknown"}}function M(t){if(!t)throw new r.a("geojson-layer:empty","GeoJSON data is empty");if("Feature"!==t.type&&"FeatureCollection"!==t.type)throw new r.a("geojson-layer:unsupported-geojson-object","missing or not supported GeoJSON object type",{data:t});const{crs:e}=t;if(!e)return;const n="string"==typeof e?e:"name"===e.type?e.properties.name:"EPSG"===e.type?e.properties.code:null,i=new RegExp(".*(CRS84H?|4326)$","i");if(!n||!i.test(n))throw new r.a("geojson-layer:unsupported-crs","unsupported GeoJSON 'crs' member",{crs:e})}function j(t,e={}){const n=[],r=new Set,i=new Set;let s,a=!1,f=null,d=!1,{geometryType:m=null}=e,p=!1;for(const o of c(t)){const{geometry:t,properties:e,id:c}=o;if((!t||(m||(m=u(t.type)),u(t.type)===m))&&(a||(a=h(l(t))),d||(d=null!=c,d&&(s=typeof c,f=Object.keys(e).filter((t=>e[t]===c)))),d&&null!=c&&(f.length>1?f=f.filter((t=>e[t]===c)):1===f.length&&(f=e[f[0]]===c?f:[])),!p&&e)){let t=!0;for(const s in e){if(r.has(s))continue;const o=e[s];if(null==o){t=!1,i.add(s);continue}const a=x(o);"unknown"!==a?(i.delete(s),r.add(s),n.push({name:s,alias:s,type:a})):i.add(s)}p=t}}const g=f&&1===f.length&&f[0]||null;if(g)for(const u of n)if(u.name===g&&Object(o.u)(u)){u.type="esriFieldTypeOID";break}return{fields:n,geometryType:m,hasZ:a,objectIdFieldName:g,objectIdFieldType:s,unknownFields:Array.from(i)}}function I(t,e){return Array.from(function*(t,e={}){const{geometryType:n,objectIdField:r}=e;for(const a of t){var o;const{geometry:t,properties:c,id:l}=a;if(t&&u(t.type)!==n)continue;const h=c||{};let f=null!=(o=h[r])?o:null;r&&null!=l&&!h[r]&&(h[r]=f=l);const d=new i.a(t?m(new s.a,t,e):null,h,null,f);yield d}}(c(t),e))}},993:function(t,e,n){"use strict";n.d(e,"a",(function(){return a})),n.d(e,"b",(function(){return c})),n.d(e,"c",(function(){return p})),n.d(e,"d",(function(){return h})),n.d(e,"e",(function(){return m}));var r=n(110),i=n(106);class s{constructor(){this.code=null,this.description=null}}class o{constructor(t){this.error=new s,this.globalId=null,this.objectId=null,this.success=!1,this.uniqueId=null,this.error.description=t}}function a(t){return new o(t)}class u{constructor(t){this.globalId=null,this.success=!0,this.objectId=this.uniqueId=t}}function c(t){return new u(t)}const l=new Set;function h(t,e,n,r=!1,s){l.clear();for(const o in n){const u=t.get(o);if(!u)continue;const c=n[o],h=f(u,c);if(h!==c&&s&&s.push({name:"invalid-value-type",message:"attribute value was converted to match the field type",details:{field:u,originalValue:c,sanitizedValue:h}}),l.add(u.name),u&&(r||u.editable)){const t=Object(i.z)(u,h);if(t)return a(Object(i.A)(t,u,h));e[u.name]=h}}for(const i of t.requiredFields)if(!l.has(i.name))return a(`missing required field "${i.name}"`);return null}function f(t,e){let n=e;return"string"==typeof e&&Object(i.u)(t)?n=parseFloat(e):null!=e&&Object(i.v)(t)&&"string"!=typeof e&&(n=String(e)),Object(i.x)(n)}let d;function m(t,e){if(!t||!Object(r.l)(e))return t;if("rings"in t||"paths"in t){if(!d)throw new TypeError("geometry engine not loaded");return d.simplify(e,t)}return t}async function p(t,e){!Object(r.l)(t)||"esriGeometryPolygon"!==e&&"esriGeometryPolyline"!==e||await async function(){return d||(d=await Promise.all([n.e(6),n.e(20)]).then(n.bind(null,559)),d)}()}}}]);
//# sourceMappingURL=119.0aed7fa0.chunk.js.map