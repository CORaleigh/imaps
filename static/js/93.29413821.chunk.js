(this.webpackJsonpimaps=this.webpackJsonpimaps||[]).push([[93,30,284],{101:function(e,t,n){"use strict";function r(){return[0,0,0]}function i(e){return[e[0],e[1],e[2]]}function o(e,t,n){return[e,t,n]}function s(e){const t=[0,0,0],n=Math.min(3,e.length);for(let r=0;r<n;++r)t[r]=e[r];return t}function a(e,t){return new Float64Array(e,t,3)}function c(){return[0,0,0]}function u(){return o(1,1,1)}function l(){return o(1,0,0)}function d(){return o(0,1,0)}function h(){return o(0,0,1)}n.d(t,"a",(function(){return p})),n.d(t,"b",(function(){return f})),n.d(t,"c",(function(){return a})),n.d(t,"d",(function(){return i})),n.d(t,"e",(function(){return r})),n.d(t,"f",(function(){return s})),n.d(t,"g",(function(){return o}));const f=[0,0,0],p=u(),m=l(),b=d(),g=h();Object.freeze({__proto__:null,create:r,clone:i,fromValues:o,fromArray:s,createView:a,zeros:c,ones:u,unitX:l,unitY:d,unitZ:h,ZEROS:f,ONES:p,UNIT_X:m,UNIT_Y:b,UNIT_Z:g})},1076:function(e,t,n){"use strict";n.r(t),n.d(t,"create",(function(){return a})),n.d(t,"projectGeometry",(function(){return c}));var r=n(138),i=n(89),o=n(181),s=n(540);async function a(e=null,t){if(r.a.geometryServiceUrl)return new(0,(await n.e(26).then(n.bind(null,921))).default)({url:r.a.geometryServiceUrl});if(!e)throw new i.a("internal:geometry-service-url-not-configured");let s;if(s="portal"in e?e.portal||o.a.getDefault():e,await s.load({signal:t}),s.helperServices&&s.helperServices.geometry&&s.helperServices.geometry.url)return new(0,(await n.e(26).then(n.bind(null,921))).default)({url:s.helperServices.geometry.url});throw new i.a("internal:geometry-service-url-not-configured")}async function c(e,t,n=null,r){const o=await a(n,r),c=new s.a;c.geometries=[e],c.outSpatialReference=t;const u=await o.project(c,{signal:r});if(u&&Array.isArray(u)&&1===u.length)return u[0];throw new i.a("internal:geometry-service-projection-failed")}},108:function(e,t,n){"use strict";n.d(t,"a",(function(){return d})),n.d(t,"b",(function(){return f})),n.d(t,"c",(function(){return x})),n.d(t,"d",(function(){return h})),n.d(t,"e",(function(){return c})),n.d(t,"f",(function(){return _})),n.d(t,"g",(function(){return y})),n.d(t,"h",(function(){return w})),n.d(t,"i",(function(){return u})),n.d(t,"j",(function(){return s})),n.d(t,"k",(function(){return m})),n.d(t,"l",(function(){return O})),n.d(t,"m",(function(){return F})),n.d(t,"n",(function(){return p})),n.d(t,"o",(function(){return o})),n.d(t,"p",(function(){return C})),n.d(t,"q",(function(){return v})),n.d(t,"r",(function(){return b})),n.d(t,"s",(function(){return g})),n.d(t,"t",(function(){return S})),n.d(t,"u",(function(){return k})),n.d(t,"v",(function(){return a})),n.d(t,"w",(function(){return j})),n.d(t,"x",(function(){return U})),n.d(t,"y",(function(){return I})),n.d(t,"z",(function(){return A}));var r=n(101),i=n(179);function o(e){const t=e[0],n=e[1],r=e[2];return Math.sqrt(t*t+n*n+r*r)}function s(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}function a(e,t,n,r){return e[0]=t,e[1]=n,e[2]=r,e}function c(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e}function u(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e}function l(e,t,n){return e[0]=t[0]*n[0],e[1]=t[1]*n[1],e[2]=t[2]*n[2],e}function d(e,t,n){return e[0]=t[0]/n[0],e[1]=t[1]/n[1],e[2]=t[2]/n[2],e}function h(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e}function f(e,t,n,r){return e[0]=t[0]+n[0]*r,e[1]=t[1]+n[1]*r,e[2]=t[2]+n[2]*r,e}function p(e,t){const n=t[0]-e[0],r=t[1]-e[1],i=t[2]-e[2];return Math.sqrt(n*n+r*r+i*i)}function m(e,t){const n=t[0]-e[0],r=t[1]-e[1],i=t[2]-e[2];return n*n+r*r+i*i}function b(e){const t=e[0],n=e[1],r=e[2];return t*t+n*n+r*r}function g(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e}function v(e,t){const n=t[0],r=t[1],i=t[2];let o=n*n+r*r+i*i;return o>0&&(o=1/Math.sqrt(o),e[0]=t[0]*o,e[1]=t[1]*o,e[2]=t[2]*o),e}function y(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function _(e,t,n){const r=t[0],i=t[1],o=t[2],s=n[0],a=n[1],c=n[2];return e[0]=i*c-o*a,e[1]=o*s-r*c,e[2]=r*a-i*s,e}function w(e,t,n,r){const i=t[0],o=t[1],s=t[2];return e[0]=i+r*(n[0]-i),e[1]=o+r*(n[1]-o),e[2]=s+r*(n[2]-s),e}function O(e,t,n){const r=t[0],i=t[1],o=t[2];return e[0]=n[0]*r+n[4]*i+n[8]*o+n[12],e[1]=n[1]*r+n[5]*i+n[9]*o+n[13],e[2]=n[2]*r+n[6]*i+n[10]*o+n[14],e}function j(e,t,n){const r=t[0],i=t[1],o=t[2];return e[0]=r*n[0]+i*n[3]+o*n[6],e[1]=r*n[1]+i*n[4]+o*n[7],e[2]=r*n[2]+i*n[5]+o*n[8],e}function S(e,t,n){const r=n[0],i=n[1],o=n[2],s=n[3],a=t[0],c=t[1],u=t[2];let l=i*u-o*c,d=o*a-r*u,h=r*c-i*a,f=i*h-o*d,p=o*l-r*h,m=r*d-i*l;const b=2*s;return l*=b,d*=b,h*=b,f*=2,p*=2,m*=2,e[0]=a+l+f,e[1]=c+d+p,e[2]=u+h+m,e}function x(e,t,n,r){const i=[],o=[];return i[0]=t[0]-n[0],i[1]=t[1]-n[1],i[2]=t[2]-n[2],o[0]=i[0]*Math.cos(r)-i[1]*Math.sin(r),o[1]=i[0]*Math.sin(r)+i[1]*Math.cos(r),o[2]=i[2],e[0]=o[0]+n[0],e[1]=o[1]+n[1],e[2]=o[2]+n[2],e}const M=Object(r.e)(),P=Object(r.e)();function C(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]}const k=u,T=l,E=d,A=p,I=m,F=o,U=b;Object.freeze({__proto__:null,length:o,copy:s,set:a,add:c,subtract:u,multiply:l,divide:d,ceil:function(e,t){return e[0]=Math.ceil(t[0]),e[1]=Math.ceil(t[1]),e[2]=Math.ceil(t[2]),e},floor:function(e,t){return e[0]=Math.floor(t[0]),e[1]=Math.floor(t[1]),e[2]=Math.floor(t[2]),e},min:function(e,t,n){return e[0]=Math.min(t[0],n[0]),e[1]=Math.min(t[1],n[1]),e[2]=Math.min(t[2],n[2]),e},max:function(e,t,n){return e[0]=Math.max(t[0],n[0]),e[1]=Math.max(t[1],n[1]),e[2]=Math.max(t[2],n[2]),e},round:function(e,t){return e[0]=Math.round(t[0]),e[1]=Math.round(t[1]),e[2]=Math.round(t[2]),e},scale:h,scaleAndAdd:f,distance:p,squaredDistance:m,squaredLength:b,negate:g,inverse:function(e,t){return e[0]=1/t[0],e[1]=1/t[1],e[2]=1/t[2],e},normalize:v,dot:y,cross:_,lerp:w,hermite:function(e,t,n,r,i,o){const s=o*o,a=s*(2*o-3)+1,c=s*(o-2)+o,u=s*(o-1),l=s*(3-2*o);return e[0]=t[0]*a+n[0]*c+r[0]*u+i[0]*l,e[1]=t[1]*a+n[1]*c+r[1]*u+i[1]*l,e[2]=t[2]*a+n[2]*c+r[2]*u+i[2]*l,e},bezier:function(e,t,n,r,i,o){const s=1-o,a=s*s,c=o*o,u=a*s,l=3*o*a,d=3*c*s,h=c*o;return e[0]=t[0]*u+n[0]*l+r[0]*d+i[0]*h,e[1]=t[1]*u+n[1]*l+r[1]*d+i[1]*h,e[2]=t[2]*u+n[2]*l+r[2]*d+i[2]*h,e},random:function(e,t){t=t||1;const n=2*Object(i.b)()*Math.PI,r=2*Object(i.b)()-1,o=Math.sqrt(1-r*r)*t;return e[0]=Math.cos(n)*o,e[1]=Math.sin(n)*o,e[2]=r*t,e},transformMat4:O,transformMat3:j,transformQuat:S,rotateX:function(e,t,n,r){const i=[],o=[];return i[0]=t[0]-n[0],i[1]=t[1]-n[1],i[2]=t[2]-n[2],o[0]=i[0],o[1]=i[1]*Math.cos(r)-i[2]*Math.sin(r),o[2]=i[1]*Math.sin(r)+i[2]*Math.cos(r),e[0]=o[0]+n[0],e[1]=o[1]+n[1],e[2]=o[2]+n[2],e},rotateY:function(e,t,n,r){const i=[],o=[];return i[0]=t[0]-n[0],i[1]=t[1]-n[1],i[2]=t[2]-n[2],o[0]=i[2]*Math.sin(r)+i[0]*Math.cos(r),o[1]=i[1],o[2]=i[2]*Math.cos(r)-i[0]*Math.sin(r),e[0]=o[0]+n[0],e[1]=o[1]+n[1],e[2]=o[2]+n[2],e},rotateZ:x,angle:function(e,t){s(M,e),s(P,t),v(M,M),v(P,P);const n=y(M,P);return n>1?0:n<-1?Math.PI:Math.acos(n)},str:function(e){return"vec3("+e[0]+", "+e[1]+", "+e[2]+")"},exactEquals:C,equals:function(e,t){const n=e[0],r=e[1],o=e[2],s=t[0],a=t[1],c=t[2];return Math.abs(n-s)<=i.a*Math.max(1,Math.abs(n),Math.abs(s))&&Math.abs(r-a)<=i.a*Math.max(1,Math.abs(r),Math.abs(a))&&Math.abs(o-c)<=i.a*Math.max(1,Math.abs(o),Math.abs(c))},sub:k,mul:T,div:E,dist:A,sqrDist:I,len:F,sqrLen:U})},110:function(e,t,n){"use strict";n.d(t,"a",(function(){return q})),n.d(t,"b",(function(){return G})),n.d(t,"c",(function(){return _})),n.d(t,"d",(function(){return j})),n.d(t,"e",(function(){return S})),n.d(t,"f",(function(){return b})),n.d(t,"g",(function(){return m})),n.d(t,"h",(function(){return x})),n.d(t,"i",(function(){return C})),n.d(t,"j",(function(){return Q})),n.d(t,"k",(function(){return p})),n.d(t,"l",(function(){return l})),n.d(t,"m",(function(){return h})),n.d(t,"n",(function(){return w})),n.d(t,"o",(function(){return M})),n.d(t,"p",(function(){return P})),n.d(t,"q",(function(){return v})),n.d(t,"r",(function(){return k})),n.d(t,"s",(function(){return z})),n.d(t,"t",(function(){return y})),n.d(t,"u",(function(){return V})),n.d(t,"v",(function(){return $})),n.d(t,"w",(function(){return L})),n.d(t,"x",(function(){return W})),n.d(t,"y",(function(){return g})),n.d(t,"z",(function(){return B})),n.d(t,"A",(function(){return K}));var r=n(121),i=n(87),o=n(89),s=n(144),a=n(147);const c=["field","field2","field3","normalizationField","rotationInfo.field","proportionalSymbolInfo.field","proportionalSymbolInfo.normalizationField","colorInfo.field","colorInfo.normalizationField"],u=["field","normalizationField"];function l(e,t){if(null!=e&&null!=t)for(const n of Array.isArray(e)?e:[e])if(d(c,n,t),"visualVariables"in n&&n.visualVariables)for(const e of n.visualVariables)d(u,e,t)}function d(e,t,n){if(e)for(const i of e){const e=Object(r.b)(i,t),o=e&&"function"!=typeof e&&v(n,e);o&&Object(r.c)(i,o.name,t)}}function h(e,t){if(null!=e&&null!=t)if("startField"in e){const n=v(t,e.startField),r=v(t,e.endField);e.startField=n&&n.name||null,e.endField=r&&r.name||null}else{const n=v(t,e.startTimeField),r=v(t,e.endTimeField);e.startTimeField=n&&n.name||null,e.endTimeField=r&&r.name||null}}const f=new Set;function p(e,t){return e&&t?(f.clear(),m(f,e,t),Array.from(f).sort()):[]}function m(e,t,n){if(n)if(t&&t.length)if(n.includes("*"))for(const{name:r}of t)e.add(r);else for(const r of n)b(e,t,r);else{if(n.includes("*"))return e.clear(),void e.add("*");for(const t of n)e.add(t)}}function b(e,t,n){if(t&&t.length){const r=v(t,n);r&&e.add(r.name)}else"string"==typeof n&&e.add(n)}function g(e,t){return Object(i.j)(t)||Object(i.j)(e)?[]:t.includes("*")?e.map((e=>e.name)):t}function v(e,t){if("string"!=typeof t)return null;if(null!=e){t=t.toLowerCase();for(const n of e)if(n&&n.name.toLowerCase()===t)return n}return null}function y(e,t){if(!e||!t||"string"!=typeof t)return!1;t=t.toLowerCase();for(const n of e)if(n&&n.name.toLowerCase()===t)return!0;return!1}async function _(e,t,n){if(!n)return;const{arcadeUtils:r}=await Object(a.e)(),i=r.extractFieldNames(n);for(const o of i)b(e,t,o)}function w({displayField:e,fields:t}){return e||(t&&t.length?O(t,"name-or-title")||O(t,"unique-identifier")||O(t,"type-or-category")||function(e){for(const t of e){if(!t||!t.name)continue;const e=t.name.toLowerCase();if(e.indexOf("name")>-1||e.indexOf("title")>-1)return t.name}return null}(t):null)}function O(e,t){for(const n of e)if(n&&n.valueType&&n.valueType===t)return n.name;return null}async function j(e,t){if(!t)return;const{fields:n}=t,i=Object(r.b)("elevationInfo.featureExpressionInfo",t);return i?i.collectRequiredFields(e,n):void 0}async function S(e,t,n){t&&n&&"cluster"===n.type&&n.fields&&await Promise.all(n.fields.map((n=>async function(e,t,n){n.outStatistic.onStatisticValueExpression?_(e,t,n.outStatistic.onStatisticValueExpression):e.add(n.outStatistic.onStatisticField)}(e,t.fields,n))))}async function x(e,t,r){if(t&&(t.timeInfo&&Object(i.k)(r)&&r.timeExtent&&m(e,t.fields,[t.timeInfo.startField,t.timeInfo.endField]),t.floorInfo&&m(e,t.fields,[t.floorInfo.floorField]),Object(i.k)(r)&&Object(i.k)(r.where)&&r.where&&"1=1"!==r.where)){const i=(await Promise.all([n.e(11),n.e(273)]).then(n.bind(null,272))).WhereClause.create(r.where,t.fieldsIndex);if(!i.isStandardized)throw new o.a("fieldUtils:collectFilterFields","Where clause is not standardized");m(e,t.fields,i.fieldNames)}}function M(e){if(!e)return[];const t="editFieldsInfo"in e&&e.editFieldsInfo;return t?p(e.fields,[t&&t.creatorField,t&&t.creationDateField,t&&t.editorField,t&&t.editDateField]):[]}function P(e){if(!e)return[];const t=e.geometryFieldsInfo;return t?p(e.fields,[t.shapeAreaField,t.shapeLengthField]):[]}async function C(e,t){const{labelingInfo:n,fields:r}=t;n&&n.length&&await Promise.all(n.map((t=>async function(e,t,n){if(!n)return;const r=n.getLabelExpression(),i=n.where;if("arcade"===r.type)await _(e,t,r.expression);else{const n=r.expression.match(/{[^}]*}/g);n&&n.forEach((n=>{b(e,t,n.slice(1,-1))}))}const o=/['"]+/g;if(i){const n=i.split(" ");3===n.length&&b(e,t,n[0].replace(o,"")),7===n.length&&(b(e,t,n[0].replace(o,"")),b(e,t,n[4].replace(o,"")))}}(e,r,t))))}function k(e){const t=e.defaultValue;return void 0!==t&&D(e,t)?t:e.nullable?null:void 0}function T(e){return"number"==typeof e&&!isNaN(e)&&isFinite(e)}function E(e){return null===e||T(e)}const A="isInteger"in Number?Number.isInteger:e=>"number"==typeof e&&isFinite(e)&&Math.floor(e)===e;function I(e){return null===e||A(e)}function F(e){return null!=e&&"string"==typeof e}function U(e){return null===e||F(e)}function R(){return!0}function D(e,t){let n;switch(e.type){case"date":case"integer":case"long":case"small-integer":case"esriFieldTypeDate":case"esriFieldTypeInteger":case"esriFieldTypeLong":case"esriFieldTypeSmallInteger":n=e.nullable?I:A;break;case"double":case"single":case"esriFieldTypeSingle":case"esriFieldTypeDouble":n=e.nullable?E:T;break;case"string":case"esriFieldTypeString":n=e.nullable?U:F;break;default:n=R}return 1===arguments.length?n:n(t)}const N=new Set(["integer","small-integer","single","double","esriFieldTypeInteger","esriFieldTypeSmallInteger","esriFieldTypeSingle","esriFieldTypeDouble"]);function $(e){return null!=e&&N.has(e.type)}function L(e){return null!=e&&("string"===e.type||"esriFieldTypeString"===e.type)}function V(e){return null!=e&&("date"===e.type||"esriFieldTypeDate"===e.type)}var q,G;function W(e){return null==e||"number"==typeof e&&isNaN(e)?null:e}function B(e,t){return e.nullable&&null===t?null:$(e)&&!function(e,t){const n="string"==typeof e?Y(e):e;return!!n&&(n.isInteger?A(t)&&t>=n.min&&t<=n.max:t>=n.min&&t<=n.max)}(e.type,Number(t))?q.OUT_OF_RANGE:D(e,t)?e.domain?Object(s.e)(e.domain,t):null:G.INVALID_TYPE}function z(e){return Object(s.c)(e.domain)||($(e)?Y(e.type):void 0)}function Y(e){switch(e){case"esriFieldTypeSmallInteger":case"small-integer":return J;case"esriFieldTypeInteger":case"integer":return X;case"esriFieldTypeSingle":case"single":return Z;case"esriFieldTypeDouble":case"double":return H}}(q||(q={})).OUT_OF_RANGE="numeric-range-validation-error::out-of-range",function(e){e.INVALID_TYPE="type-validation-error::invalid-type"}(G||(G={}));const J={min:-32768,max:32767,isInteger:!0},X={min:-2147483648,max:2147483647,isInteger:!0},Z={min:-34e37,max:12e37,isInteger:!1},H={min:-Number.MAX_VALUE,max:Number.MAX_VALUE,isInteger:!1};function K(e,t,n){switch(e){case s.a.INVALID_CODED_VALUE:return`Value ${n} is not in the coded domain - field: ${t.name}, domain: ${JSON.stringify(t.domain)}`;case s.a.VALUE_OUT_OF_RANGE:return`Value ${n} is out of the range of valid values - field: ${t.name}, domain: ${JSON.stringify(t.domain)}`;case G.INVALID_TYPE:return`Value ${n} is not a valid value for the field type - field: ${t.name}, type: ${t.type}, nullable: ${t.nullable}`;case q.OUT_OF_RANGE:{const{min:e,max:r}=Y(t.type);return`Value ${n} is out of range for the number type - field: ${t.name}, type: ${t.type}, value range is ${e} to ${r}`}}}function Q(e,t){return!function(e,t,n){if(!t||!t.attributes||!e){if(Object(i.k)(n))for(const t of e)n.add(t);return!0}const r=t.attributes;let o=!1;for(const s of e)if(!(s in r)){if(o=!0,!Object(i.k)(n))break;n.add(s)}return o}(e,t,null)}},1101:function(e,t,n){},113:function(e,t,n){"use strict";n.d(t,"a",(function(){return G})),n.d(t,"b",(function(){return S})),n.d(t,"c",(function(){return M})),n.d(t,"d",(function(){return L})),n.d(t,"e",(function(){return N})),n.d(t,"f",(function(){return D})),n.d(t,"g",(function(){return U})),n.d(t,"h",(function(){return $})),n.d(t,"i",(function(){return R})),n.d(t,"j",(function(){return u})),n.d(t,"k",(function(){return x})),n.d(t,"l",(function(){return O})),n.d(t,"m",(function(){return I})),n.d(t,"n",(function(){return W})),n.d(t,"o",(function(){return j})),n.d(t,"p",(function(){return _})),n.d(t,"q",(function(){return w})),n.d(t,"r",(function(){return A})),n.d(t,"s",(function(){return k})),n.d(t,"t",(function(){return T})),n.d(t,"u",(function(){return E})),n.d(t,"v",(function(){return P})),n.d(t,"w",(function(){return C})),n.d(t,"x",(function(){return F}));n(78);var r=n(97),i=n(253),o=n(107),s=n(95),a=n(129),c=n(168);const u=39.37,l=a.a.radius*Math.PI/200,d=/UNIT\[([^\]]+)\]\]$/i,h=i.a,f=/UNIT\[([^\]]+)\]/i,p=new Set([4261,4305,4807,4810,4811,4812,4816,4819,4821,4901,4902,37225,104139,104140]),m=Object(r.b)()({meter:"meters",foot:"feet",foot_us:"us-feet",foot_clarke:"clarke-feet",yard_clarke:"clarke-yards",link_clarke:"clarke-links",yard_sears:"sears-yards",foot_sears:"sears-feet",chain_sears:"sears-chains",chain_benoit_1895_b:"benoit-1895-b-chains",yard_indian:"indian-yards",yard_indian_1937:"indian-1937-yards",foot_gold_coast:"gold-coast-feet",chain_sears_1922_truncated:"sears-1922-truncated-chains","50_kilometers":"50-kilometers","150_kilometers":"150-kilometers"}),b=e=>e*e,g=e=>e*e*e,v={length:{baseUnit:"meters",units:{millimeters:{inBaseUnits:.001},centimeters:{inBaseUnits:.01},decimeters:{inBaseUnits:.1},meters:{inBaseUnits:1},kilometers:{inBaseUnits:1e3},inches:{inBaseUnits:.0254},feet:{inBaseUnits:.3048},yards:{inBaseUnits:.9144},miles:{inBaseUnits:1609.344},"nautical-miles":{inBaseUnits:1852},"us-feet":{inBaseUnits:1200/3937}}},area:{baseUnit:"square-meters",units:{"square-millimeters":{inBaseUnits:b(.001)},"square-centimeters":{inBaseUnits:b(.01)},"square-decimeters":{inBaseUnits:b(.1)},"square-meters":{inBaseUnits:1},"square-kilometers":{inBaseUnits:b(1e3)},"square-inches":{inBaseUnits:b(.0254)},"square-feet":{inBaseUnits:b(.3048)},"square-yards":{inBaseUnits:b(.9144)},"square-miles":{inBaseUnits:b(1609.344)},"square-us-feet":{inBaseUnits:b(1200/3937)},acres:{inBaseUnits:.0015625*b(1609.344)},ares:{inBaseUnits:100},hectares:{inBaseUnits:1e4}}},volume:{baseUnit:"liters",units:{liters:{inBaseUnits:1},"cubic-millimeters":{inBaseUnits:1e3*g(.001)},"cubic-centimeters":{inBaseUnits:1e3*g(.01)},"cubic-decimeters":{inBaseUnits:1e3*g(.1)},"cubic-meters":{inBaseUnits:1e3},"cubic-kilometers":{inBaseUnits:1e3*g(1e3)},"cubic-inches":{inBaseUnits:1e3*g(.0254)},"cubic-feet":{inBaseUnits:1e3*g(.3048)},"cubic-yards":{inBaseUnits:1e3*g(.9144)},"cubic-miles":{inBaseUnits:1e3*g(1609.344)}}},angle:{baseUnit:"radians",units:{radians:{inBaseUnits:1},degrees:{inBaseUnits:Math.PI/180}}}},y=function(){const e={};for(const t in v)for(const n in v[t].units)e[n]=t;return e}();const _=["metric","imperial","square-inches","square-feet","square-yards","square-miles","square-us-feet","square-meters","square-kilometers","acres","ares","hectares"],w=["metric","imperial","inches","feet","yards","miles","nautical-miles","us-feet","meters","kilometers"];function O(e){return"imperial"===e||"metric"===e}function j(e){const t=y[e];if(t)return t;throw new Error("unknown measure")}function S(e){return function(e){return v[e].baseUnit}(j(e))}function x(e,t=null){return t=t||j(e),v[t].baseUnit===e}function M(e,t,n){if(t===n)return e;const r=j(t);if(r!==j(n))throw new Error("incompatible units");const i=x(t,r)?e:function(e,t,n){return e*v[n].units[t].inBaseUnits}(e,t,r);return x(n,r)?i:function(e,t,n){return e/v[n].units[t].inBaseUnits}(i,n,r)}function P(e,t){return M(e,t,"meters")<3e3?"meters":"kilometers"}function C(e,t){return M(e,t,"meters")<1e5?"meters":"kilometers"}function k(e,t){return M(e,t,"feet")<1e3?"feet":"miles"}function T(e,t){return M(e,t,"feet")<1e5?"feet":"miles"}function E(e,t){return M(e,t,"square-meters")<3e6?"square-meters":"square-kilometers"}function A(e,t){return M(e,t,"square-feet")<1e6?"square-feet":"square-miles"}function I(e,t,n){return M(e,t,"meters")/(n*Math.PI/180)}function F(e){return m.fromJSON(e.toLowerCase())||null}function U(e){if(e&&"object"==typeof e&&!Object(o.e)(e))return 1;const t=D(e);return t>1e5?1:t}function R(e){return D(e)>=(e instanceof s.a?Object(c.e)(e).metersPerDegree:1e5)?"meters":$(e)}function D(e,t=a.a.metersPerDegree){return N(e,!0)||t}function N(e,t=!1){let n,r,i=null;if(null!=e&&("object"==typeof e?(n=e.wkid,r=e.wkt):"number"==typeof e?n=e:"string"==typeof e&&(r=e)),n){if(Object(o.k)(n))return a.b.metersPerDegree;if(Object(o.l)(n))return a.c.metersPerDegree;i=h.values[h[n]],!i&&t&&p.has(n)&&(i=l)}else if(r)if(-1!==r.search(/^PROJCS/i)){const e=d.exec(r);e&&e[1]&&(i=parseFloat(e[1].split(",")[1]))}else if(-1!==r.search(/^GEOCCS/i)){const e=f.exec(r);e&&e[1]&&(i=parseFloat(e[1].split(",")[1]))}return i}function $(e){let t,n,r=null;if(null!=e&&("object"==typeof e?(t=e.wkid,n=e.wkt):"number"==typeof e?t=e:"string"==typeof e&&(n=e)),t)r=h.units[h[t]];else if(n&&-1!==n.search(/^PROJCS/i)){let e=d.exec(n);e&&e[1]&&(e=/[\\"\\']{1}([^\\"\\']+)/.exec(e[1]),r=e&&e[1])}return r?F(r):null}function L(e){if(!e)return null;switch($(e)){case"feet":case"us-feet":case"clarke-feet":case"clarke-yards":case"clarke-links":case"sears-yards":case"sears-feet":case"sears-chains":case"benoit-1895-b-chains":case"indian-yards":case"indian-1937-yards":case"gold-coast-feet":case"sears-1922-truncated-chains":return"imperial";case"50-kilometers":case"150-kilometers":case"meters":return"metric";case null:case void 0:return null}return null}const V={esriAcres:"acres",esriAres:"ares",esriHectares:"hectares",esriSquareCentimeters:"square-centimeters",esriSquareDecimeters:"square-decimeters",esriSquareFeet:"square-feet",esriSquareInches:"square-inches",esriSquareKilometers:"square-kilometers",esriSquareMeters:"square-meters",esriSquareMiles:"square-miles",esriSquareMillimeters:"square-millimeters",esriSquareUsFeet:"square-us-feet",esriSquareYards:"square-yards"},q={esriCentimeters:"centimeters",esriDecimeters:"decimeters",esriFeet:"feet",esriInches:"inches",esriKilometers:"kilometers",esriMeters:"meters",esriMiles:"miles",esriMillimeters:"millimeters",esriNauticalMiles:"nautical-miles",esriYards:"yards"},G=Object(r.b)()(V),W=Object(r.b)()(q);Object(r.b)()({...V,...q})},116:function(e,t,n){"use strict";var r=n(80),i=(n(78),n(79),n(86),n(83)),o=n(97),s=n(103),a=n(82),c=(n(81),n(84),n(85),n(88));const u=new o.a({inherited:"inherited",codedValue:"coded-value",range:"range"});let l=class extends c.a{constructor(e){super(e),this.name=null,this.type=null}};Object(r.a)([Object(i.b)({type:String,json:{write:!0}})],l.prototype,"name",void 0),Object(r.a)([Object(s.a)(u)],l.prototype,"type",void 0),l=Object(r.a)([Object(a.a)("esri.layers.support.Domain")],l);var d=l;t.a=d},120:function(e,t,n){"use strict";var r,i=n(80),o=(n(78),n(90)),s=n(87),a=(n(79),n(86),n(83)),c=n(82),u=(n(81),n(84),n(85),n(88)),l=n(96),d=n(98),h=n(163),f=n(136),p=n(185);let m=r=class extends u.a{constructor(...e){super(...e),this.isAggregate=!1,this.layer=null,this.popupTemplate=null,this.sourceLayer=null,Object.defineProperty(this,"uid",{value:Object(p.a)(),configurable:!0})}normalizeCtorArgs(e,t,n,r){return e&&!e.declaredClass?e:{geometry:e,symbol:t,attributes:n,popupTemplate:r}}set attributes(e){const t=this._get("attributes");t!==e&&(this._set("attributes",e),this._notifyLayer("attributes",t,e))}set geometry(e){const t=this._get("geometry");t!==e&&(this._set("geometry",e),this._notifyLayer("geometry",t,e))}set symbol(e){const t=this._get("symbol");t!==e&&(this._set("symbol",e),this._notifyLayer("symbol",t,e))}set visible(e){const t=this._get("visible");t!==e&&(this._set("visible",e),this._notifyLayer("visible",t,e))}getEffectivePopupTemplate(e=!1){return this.popupTemplate?this.popupTemplate:this.sourceLayer?"popupTemplate"in this.sourceLayer&&this.sourceLayer.popupTemplate?this.sourceLayer.popupTemplate:e&&"defaultPopupTemplate"in this.sourceLayer&&Object(s.k)(this.sourceLayer.defaultPopupTemplate)?this.sourceLayer.defaultPopupTemplate:null:null}getAttribute(e){return this.attributes&&this.attributes[e]}setAttribute(e,t){if(this.attributes){const n=this.getAttribute(e);this.attributes[e]=t,this._notifyLayer("attributes",n,t,e)}else this.attributes={[e]:t},this._notifyLayer("attributes",void 0,t,e)}getObjectId(){return this.sourceLayer&&"objectIdField"in this.sourceLayer&&this.sourceLayer.objectIdField?this.getAttribute(this.sourceLayer.objectIdField):null}toJSON(){return{geometry:Object(s.k)(this.geometry)?this.geometry.toJSON():null,symbol:Object(s.k)(this.symbol)?this.symbol.toJSON():null,attributes:{...this.attributes},popupTemplate:this.popupTemplate&&this.popupTemplate.toJSON()}}clone(){return new r(this.cloneProperties())}cloneProperties(){return{attributes:Object(o.a)(this.attributes),geometry:Object(o.a)(this.geometry),layer:this.layer,popupTemplate:this.popupTemplate&&this.popupTemplate.clone(),sourceLayer:this.sourceLayer,symbol:Object(o.a)(this.symbol),visible:this.visible}}_notifyLayer(e,t,n,r){if(!this.layer||!("graphicChanged"in this.layer))return;const i={graphic:this,property:e,oldValue:t,newValue:n};"attributes"===e&&(i.attributeName=r),this.layer.graphicChanged(i)}};Object(i.a)([Object(a.b)({value:null})],m.prototype,"attributes",null),Object(i.a)([Object(a.b)({value:null,types:d.a,json:{read:l.a}})],m.prototype,"geometry",null),Object(i.a)([Object(a.b)({type:Boolean})],m.prototype,"isAggregate",void 0),Object(i.a)([Object(a.b)()],m.prototype,"layer",void 0),Object(i.a)([Object(a.b)({type:h.a})],m.prototype,"popupTemplate",void 0),Object(i.a)([Object(a.b)()],m.prototype,"sourceLayer",void 0),Object(i.a)([Object(a.b)({value:null,types:f.e})],m.prototype,"symbol",null),Object(i.a)([Object(a.b)({type:Boolean,value:!0})],m.prototype,"visible",null),m=r=Object(i.a)([Object(c.a)("esri.Graphic")],m),(m||(m={})).generateUID=p.a;var b=m;t.a=b},121:function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return o})),n.d(t,"c",(function(){return s}));var r=n(90);function i(e,t,n=!1){return c(e,t,n)}function o(e,t){if(null!=t)return t[e]||a(e.split("."),!1,t)}function s(e,t,n){const r=e.split("."),i=r.pop(),o=a(r,!0,n);o&&i&&(o[i]=t)}function a(e,t,n){let r=n;for(const i of e){if(null==r)return;if(!(i in r)){if(!t)return;r[i]={}}r=r[i]}return r}function c(e,t,n){return t?Object.keys(t).reduce((function(e,i){let o=e[i],s=t[i];return o===s?e:void 0===o?(e[i]=Object(r.a)(s),e):(Array.isArray(s)||Array.isArray(e)?(o=o?Array.isArray(o)?e[i]=o.concat():e[i]=[o]:e[i]=[],s&&(Array.isArray(s)||(s=[s]),n?s.forEach((e=>{-1===o.indexOf(e)&&o.push(e)})):e[i]=s.concat())):s&&"object"==typeof s?e[i]=c(o,s,n):e.hasOwnProperty(i)&&!t.hasOwnProperty(i)||(e[i]=s),e)}),e||{}):e}},122:function(e,t,n){"use strict";n.d(t,"a",(function(){return j})),n.d(t,"b",(function(){return f})),n.d(t,"c",(function(){return o})),n.d(t,"d",(function(){return y})),n.d(t,"e",(function(){return p})),n.d(t,"f",(function(){return m})),n.d(t,"g",(function(){return g})),n.d(t,"h",(function(){return b})),n.d(t,"i",(function(){return i})),n.d(t,"j",(function(){return w})),n.d(t,"k",(function(){return u})),n.d(t,"l",(function(){return l})),n.d(t,"m",(function(){return a})),n.d(t,"n",(function(){return s})),n.d(t,"o",(function(){return h})),n.d(t,"p",(function(){return v})),n.d(t,"q",(function(){return _})),n.d(t,"r",(function(){return c})),n.d(t,"s",(function(){return d}));n(78),n(87);var r=n(99);function i(e=S){return[e[0],e[1],e[2],e[3]]}function o(e){return[e[0],e[1],e[2],e[3]]}function s(e,t,n,r,o=i()){return o[0]=e,o[1]=t,o[2]=n,o[3]=r,o}function a(e,t=i()){return t[0]=e.xmin,t[1]=e.ymin,t[2]=e.xmax,t[3]=e.ymax,t}function c(e,t){return new r.a({xmin:e[0],ymin:e[1],xmax:e[2],ymax:e[3],spatialReference:t})}function u(e,t,n=e){if("length"in t)O(t)?(n[0]=Math.min(e[0],t[0]),n[1]=Math.min(e[1],t[1]),n[2]=Math.max(e[2],t[2]),n[3]=Math.max(e[3],t[3])):2!==t.length&&3!==t.length||(n[0]=Math.min(e[0],t[0]),n[1]=Math.min(e[1],t[1]),n[2]=Math.max(e[2],t[0]),n[3]=Math.max(e[3],t[1]));else switch(t.type){case"extent":n[0]=Math.min(e[0],t.xmin),n[1]=Math.min(e[1],t.ymin),n[2]=Math.max(e[2],t.xmax),n[3]=Math.max(e[3],t.ymax);break;case"point":n[0]=Math.min(e[0],t.x),n[1]=Math.min(e[1],t.y),n[2]=Math.max(e[2],t.x),n[3]=Math.max(e[3],t.y)}return n}function l(e,t,n=e){const r=t.length;let i=e[0],o=e[1],s=e[2],a=e[3];for(let c=0;c<r;c++){const e=t[c];i=Math.min(i,e[0]),o=Math.min(o,e[1]),s=Math.max(s,e[0]),a=Math.max(a,e[1])}return n[0]=i,n[1]=o,n[2]=s,n[3]=a,n}function d(e){return e[0]>=e[2]?0:e[2]-e[0]}function h(e){return e[1]>=e[3]?0:e[3]-e[1]}function f(e){return d(e)*h(e)}function p(e,t){return b(e,t[0],t[1])}function m(e,t){return b(e,t.x,t.y)}function b(e,t,n){return t>=e[0]&&n>=e[1]&&t<=e[2]&&n<=e[3]}function g(e,t,n){return t[0]>=e[0]-n&&t[1]>=e[1]-n&&t[0]<=e[2]+n&&t[1]<=e[3]+n}function v(e,t){return Math.max(t[0],e[0])<=Math.min(t[2],e[2])&&Math.max(t[1],e[1])<=Math.min(t[3],e[3])}function y(e,t){return t[0]>=e[0]&&t[2]<=e[2]&&t[1]>=e[1]&&t[3]<=e[3]}function _(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e}function w(e){return e?_(e,j):i(j)}function O(e){return 4===e.length}const j=[1/0,1/0,-1/0,-1/0],S=[0,0,0,0]},1225:function(e,t,n){"use strict";n.r(t),n.d(t,"Measure",(function(){return jt}));var r=n(0),i=n(80),o=(n(78),n(79)),s=(n(86),n(83)),a=n(141),c=n(82),u=(n(81),n(84),n(85),n(91)),l=n(111),d=n(165),h=n(127),f=n(151),p=n(94),m=n(113),b=n(826);let g=class extends p.a{constructor(e){super(e),this.activeTool=null,this.activeViewModel=null,this.view=null}get areaUnit(){return this.defaultUnit}set areaUnit(e){void 0!==e?this._override("areaUnit",e):this._clearOverride("areaUnit")}get linearUnit(){return this.defaultUnit}set linearUnit(e){void 0!==e?this._override("linearUnit",e):this._clearOverride("linearUnit")}get state(){const{activeViewModel:e}=this;return e?e.state:"disabled"}};Object(i.a)([Object(s.b)({type:["area","distance","direct-line"]})],g.prototype,"activeTool",void 0),Object(i.a)([Object(s.b)()],g.prototype,"activeViewModel",void 0),Object(i.a)([Object(s.b)({type:m.p})],g.prototype,"areaUnit",null),Object(i.a)([Object(s.b)(b.a)],g.prototype,"defaultUnit",void 0),Object(i.a)([Object(s.b)({type:m.q})],g.prototype,"linearUnit",null),Object(i.a)([Object(s.b)({readOnly:!0})],g.prototype,"state",null),Object(i.a)([Object(s.b)()],g.prototype,"view",void 0),g=Object(i.a)([Object(c.a)("esri.widgets.Measurement.MeasurementViewModel")],g);var v=g;const y="esri-measurement",_="esri-icon-measure";let w=class extends f.a{constructor(e,t){super(e,t),this._widgets=new Map,this.activeTool=null,this.activeWidget=null,this.areaUnit=null,this.iconClass=_,this.label=void 0,this.linearUnit=null,this.messages=null,this.view=null,this.viewModel=new v}initialize(){this.activeWidget&&this.viewModel.set("activeViewModel",this.activeWidget.viewModel),this.view&&this.activeTool&&this._getActiveWidget().then((e=>{this._set("activeWidget",e)})),this.own([this.watch(["view","activeTool"],(()=>{this._getActiveWidget().then((e=>{this._set("activeWidget",e)}))})),this.watch("activeWidget",((e,t)=>{this.viewModel.set("activeViewModel",e?e.viewModel:null),t&&(t.visible=!1)})),this.watch(["areaUnit","linearUnit"],(()=>this._updateWidgetUnits()))])}destroy(){this._destroyWidgets()}render(){const{activeWidget:e}=this,t=e&&!e.destroyed?e.render():null;return Object(h.a)("div",{class:y},t)}clear(){this.activeTool=null,this._destroyWidgets()}startMeasurement(){const{activeViewModel:e}=this.viewModel;e&&Object(u.l)(e.start())}async _createWidget(e){const{areaUnit:t,linearUnit:r,view:i}=this;switch(e){case"area":{const{type:e}=i;switch(e){case"2d":return new(0,(await Promise.all([n.e(3),n.e(4),n.e(5),n.e(9),n.e(56)]).then(n.bind(null,1241))).default)({view:i,unit:t});case"3d":return new(0,(await Promise.all([n.e(3),n.e(4),n.e(5),n.e(9),n.e(59)]).then(n.bind(null,1222))).default)({view:i,unit:t});default:return null}}case"distance":return new(0,(await Promise.all([n.e(3),n.e(4),n.e(5),n.e(9),n.e(57)]).then(n.bind(null,1242))).default)({view:i,unit:r});case"direct-line":return new(0,(await Promise.all([n.e(3),n.e(4),n.e(5),n.e(12),n.e(62)]).then(n.bind(null,1229))).default)({view:i,unit:r});default:return null}}_destroyWidgets(){this._widgets.forEach((e=>e.destroy())),this._widgets.clear()}async _getActiveWidget(){const{activeTool:e,view:t}=this;if(!t||!e)return null;let n=null;if(this._widgets.has(e))n=this._widgets.get(e),n.visible=!0;else{if(n=await this._createWidget(e),!n)return null;await n.viewModel.start(),this._widgets.set(e,n)}return n}_updateWidgetUnits(){this._widgets.forEach((e=>{const{areaUnit:t,linearUnit:n}=this;e.unit=function(e){return e&&("esri.widgets.AreaMeasurement2D"===e.declaredClass||"esri.widgets.AreaMeasurement3D"===e.declaredClass)}(e)?t:n}))}};Object(i.a)([Object(a.a)("viewModel.activeTool")],w.prototype,"activeTool",void 0),Object(i.a)([Object(s.b)({readOnly:!0})],w.prototype,"activeWidget",void 0),Object(i.a)([Object(a.a)("viewModel.areaUnit")],w.prototype,"areaUnit",void 0),Object(i.a)([Object(s.b)()],w.prototype,"iconClass",void 0),Object(i.a)([Object(s.b)({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],w.prototype,"label",void 0),Object(i.a)([Object(a.a)("viewModel.linearUnit")],w.prototype,"linearUnit",void 0),Object(i.a)([Object(s.b)(),Object(d.a)("esri/widgets/Measurement/t9n/Measurement")],w.prototype,"messages",void 0),Object(i.a)([Object(a.a)("viewModel.view")],w.prototype,"view",void 0),Object(i.a)([Object(s.b)({type:v})],w.prototype,"viewModel",void 0),w=Object(i.a)([Object(c.a)("esri.widgets.Measurement")],w);var O=w,j=n(152),S=n(119),x=n(184),M=n(259);let P=class extends p.a{constructor(e){super(e),this.format=null,this.position={coordinate:null,location:null}}get displayCoordinate(){const e=this.get("format");return e&&e.getDisplayCoordinate(this.get("position.coordinate"))}};Object(i.a)([Object(s.b)({readOnly:!0})],P.prototype,"displayCoordinate",null),Object(i.a)([Object(s.b)()],P.prototype,"format",void 0),Object(i.a)([Object(s.b)()],P.prototype,"position",void 0),P=Object(i.a)([Object(c.a)("esri.widgets.CoordinateConversion.support.Conversion")],P);var C=P,k=n(89),T=n(112),E=n(123),A=n(106),I=n(140),F=n(200),U=n(158),R=(n(166),n(622)),D=n(120),N=n(115),$=n(109),L=n(227),V=n(498),q=n(1076),G=n(95),W=n(153),B=(n(98),n(540));const z={utm:{conversionMode:"utmDefault",addSpaces:!0},usng:{numOfDigits:5,rounding:!1,addSpaces:!1},mgrs:{rounding:!1}},Y=new Array(3);function J(e){return e>=500?6:e<500&&e>=50?7:e<50&&e>=5?8:9}function X(e){return"number"==typeof e&&isFinite(e)}function Z(e){return e&&X(e.x)&&X(e.y)}function H(e,t){if(e.spatialReference.isGeographic&&t){const[n,r]=function(e,t){const n=J(t);return[e[0].toFixed(n),e[1].toFixed(n)]}([e.x,e.y],t);return`${n}, ${r}`}return`${e.x.toFixed(3)}, ${e.y.toFixed(3)}`}function K(e){return"dd"===e||"dms"===e||"ddm"===e||"mgrs"===e||"usng"===e||"utm"===e}var Q=n(776),ee=n(107),te=n(594);function ne(e){let t=null;if(e||(e=G.a.WGS84),e.wkid){if(t=te.f.geogcs(e.wkid),!t)throw new k.a("coordinate-formatter:invalid-spatial-reference","wkid is not valid")}else{if(!e.wkt)throw new k.a("coordinate-formatter:invalid-spatial-reference","wkid and wkt are missing");if(t=te.f.fromString(te.g.PE_TYPE_GEOGCS,e.wkt),!t)throw new k.a("coordinate-formatter:invalid-spatial-reference","wkt is not valid")}return t}function re(e){let t=-1;switch(e){case"automatic":t=te.c.PE_MGRS_STYLE_AUTO;break;case"new-180-in-zone-01":t=te.c.PE_MGRS_STYLE_NEW|te.c.PE_MGRS_180_ZONE_1_PLUS;break;case"new-180-in-zone-60":t=te.c.PE_MGRS_STYLE_NEW;break;case"old-180-in-zone-01":t=te.c.PE_MGRS_STYLE_OLD|te.c.PE_MGRS_180_ZONE_1_PLUS;break;case"old-180-in-zone-60":t=te.c.PE_MGRS_STYLE_OLD}return t}function ie(e){let t=-1;switch(e){case"latitude-band-indicators":t=te.e.PE_UTM_OPTS_NONE;break;case"north-south-indicators":t=te.e.PE_UTM_OPTS_NS}return t}let oe=class extends p.a{constructor(e){super(e),this.conversionInfo=null,this.coordinateSegments=null,this.defaultPattern=null,this.name=null,this.viewModel=null}get currentPattern(){return this._get("currentPattern")||this._get("defaultPattern")}set currentPattern(e){this._set("currentPattern",e)}get hasDisplayProperties(){return!(!this.defaultPattern||!this.coordinateSegments)}get spatialReference(){const e=this.get("conversionInfo.spatialReference")||G.a.WGS84;return"basemap"===this.name?this._viewSpatialReference:e}set spatialReference(e){void 0===e&&this._clearOverride("spatialReference"),this._override("spatialReference",e)}get _viewSpatialReference(){return this.get("viewModel.view.spatialReference")||G.a.WGS84}get _additionalCharactersPattern(){const e=this.get("coordinateSegments");if(!e)return null;const t=e.map((e=>e.alias)),n=this.currentPattern.replace(new RegExp(`["nsew${t.join()}]`,"gi"),"").replace(/\ /g,"");return new RegExp(`[${n}]`,"g")}convert(e,t){if(!Z(e))return Promise.reject(new k.a("format:invalid-point","Could not convert invalid point.",{point:e}));const n=this.get("conversionInfo.convert");return n?Promise.resolve().then((()=>n(e))):this._project(e,this.spatialReference,t).then((e=>this._getCoordinate(e).then((t=>({location:e,coordinate:t})))))}getConversionStrategy(){const e=this._viewSpatialReference;return this.get("conversionInfo.convert")||this.get("viewModel.formatterAvailable")||"xy"===this.name&&(e.isWebMercator||e.isWGS84)||"basemap"===this.name?"client":"server"}getDisplayCoordinate(e){if(!e)return null;if(!this.coordinateSegments||!this.currentPattern)return e;let t=this.currentPattern;const n=this._getSegmentMatches(e,!1);for(let r=this.coordinateSegments.length-1;r>=0;r--){const e=this.coordinateSegments[r];t=t.replace(e.alias,n[r])}return t}parseUserInput(e){let t=this.defaultPattern.replace(this._additionalCharactersPattern,"");e=e.replace(this._additionalCharactersPattern,"");const n=this._getSegmentMatches(e,!0);for(let r=this.coordinateSegments.length-1;r>=0;r--){const e=this.coordinateSegments[r];t=t.replace(e.alias,n[r])}return t}_getSegmentMatches(e,t){const n=[];for(let r=0;r<this.coordinateSegments.length;r++){const i=this.coordinateSegments[r],o=e.match(i.searchPattern);if(!o){n.push("");continue}let s=o[0];if(e=e.replace(s,"").trim(),i.substitution){const e=t?i.substitution.input(s):i.substitution.output(s);e&&(s=e)}n.push(s)}return n}reverseConvert(e){const t=this.parseUserInput(e),n=this.get("conversionInfo.reverseConvert"),r=K(this.name);let i;if(n)i=n(t);else if("xy"===this.name||"basemap"===this.name)i=function(e,t){const n=e.indexOf(",")>=0?",":" ",[r,i,o]=e.split(n).map((e=>{const t=e.trim();return t?Number(t):null}));if(!X(r)||!X(i))return null;const s=new T.a({x:r,y:i,spatialReference:t||G.a.WGS84});return o&&(s.z=o,s.hasZ=!0),s}(t,this.spatialReference);else if(this.viewModel.formatterAvailable)switch(this.name){case"dd":case"ddm":case"dms":i=function(e,t){const n=[];e=e.replace(/\u2032/g,"'");const r=ne(t);return te.a.dms_to_geog(r,1,[e],n)?new T.a(n[0][0],n[0][1],t||G.a.WGS84):null}(t,this.spatialReference);break;case"mgrs":{const e="automatic";i=function(e,t,n){const r=[],i=re(n);if(-1===i)return console.warn(`invalid conversionMode: ${n}`),null;const o=ne(t);return te.c.mgrs_to_geog_extended(o,1,[e],i,r)?new T.a(r[0][0],r[0][1],t||G.a.WGS84):null}(t,this.spatialReference,e);break}case"utm":{const e="latitude-band-indicators";i=function(e,t,n){const r=[],i=ie(n);if(-1===i)return console.warn(`invalid conversionMode: ${n}`),null;const o=ne(t);return te.e.utm_to_geog(o,1,[e],i,r)?new T.a(r[0][0],r[0][1],t||G.a.WGS84):null}(t,this.spatialReference,e);break}case"usng":i=function(e,t){const n=[];!t&&/\(.+27/.test(e)&&(t=G.a.GCS_NAD_1927);const r=ne(t);return te.d.usng_to_geog(r,1,[e],n)?new T.a(n[0][0],n[0][1],t||G.a.WGS84):null}(t,this.spatialReference);break;default:i=null}else if(r)return function(e){const{geometryServicePromise:t,coordinate:n,spatialReference:r,formatName:i}=e;return t.then((e=>e.fromGeoCoordinateString({strings:[n],sr:r,conversionType:i}).then((e=>{const t=new T.a({x:e[0][0],y:e[0][1],spatialReference:r});if(!Z(t))throw e;return t})).catch((e=>{throw new k.a("coordinate-conversion:from-geo-coordinate-string-failed","Failed to convert coordinate notation",{notationResult:e})}))))}({coordinate:t,spatialReference:this.spatialReference,formatName:this.name,geometryServicePromise:this.get("viewModel.geometryServicePromise")});return i?this._project(i,this._viewSpatialReference):Promise.reject(new k.a("format:invalid-input","Could not parse input into point.",{userInput:e}))}_getCoordinate(e){const t=this.get("viewModel.view.scale");if(!Z(e))return Promise.reject(new k.a("format:invalid-point","Could not transform invalid point into coordinate.",{point:e}));if(this.get("viewModel.formatterAvailable")||"basemap"===this.name||"xy"===this.name)switch(this.name){case"dd":case"ddm":case"dms":{const n=J(t);return Promise.resolve(function(e,t,n=0){const r=[[e.x,e.y]],i=[],o=ne(e.spatialReference);let s=0;switch(t){case"dd":s=te.a.geog_to_dd(o,1,r,n,i);break;case"ddm":s=te.a.geog_to_ddm(o,1,r,n,i);break;case"dms":s=te.a.geog_to_dms(o,1,r,n,i);break;default:return console.warn(`invalid format: ${t}`),null}return s?i[0]:null}(e,this.name,n))}case"mgrs":{const t=!1,n=5,r="automatic";return Promise.resolve(function(e,t,n=0,r=!1){const i=[[e.x,e.y]],o=[],s=ne(e.spatialReference);let a=re(t);return-1===a?(console.warn(`invalid conversionMode: ${t}`),null):(r&&(a|=te.c.PE_MGRS_ADD_SPACES),te.c.geog_to_mgrs_extended(s,1,i,n,!1,a,o)?o[0]:null)}(e,r,n,t))}case"usng":{const t=!1,n=5;return Promise.resolve(function(e,t=0,n=!1){const r=[[e.x,e.y]],i=[],o=ne(e.spatialReference);return te.d.geog_to_usng(o,1,r,t,!1,n,i)?i[0]:null}(e,n,t))}case"utm":{const t=!0,n="latitude-band-indicators";return Promise.resolve(function(e,t,n=!1){const r=[[e.x,e.y]],i=[],o=ne(e.spatialReference);let s=ie(t);return-1===s?(console.warn(`invalid conversionMode: ${t}`),null):(n&&(s|=te.e.PE_UTM_OPTS_ADD_SPACES),te.e.geog_to_utm(o,1,r,s,i)?i[0]:null)}(e,n,t))}default:return Promise.resolve(H(e,t))}return K(this.name)?function(e){const{formatName:t,location:n,geometryServicePromise:r}=e,i=z[t]||{},o={coordinates:[[n.x,n.y]],sr:n.spatialReference,conversionType:t,...i};return r.then((e=>e.toGeoCoordinateString(o).then((e=>{const t=e[0];if(!t)throw e;return t})).catch((e=>{throw new k.a("coordinate-conversion:to-geo-coordinate-string-failed","Failed to convert coordinate notation",{notationResult:e})}))))}({formatName:this.name,location:e,geometryServicePromise:this.get("viewModel.geometryServicePromise")}):Promise.resolve(H(e,t))}_project(e,t,n){return Object(ee.c)(e.spatialReference,t)||!t?Promise.resolve(e):this.get("viewModel.formatterAvailable")&&Object(L.g)()?Promise.resolve(Object(L.j)(e,t)):this.get("viewModel.formatterAvailable")?null:Object(W.a)(e,t)?Promise.resolve(Object(W.d)(e,t)):function(e,t){const{spatialReference:n,geometryServicePromise:r,location:i,scale:o}=e;if(!n||i.spatialReference.wkid===n.wkid)return Promise.resolve({location:i,coordinate:H(i,o)});if((i.spatialReference.isWGS84||i.spatialReference.isWebMercator)&&(n.isWGS84||n.isWebMercator))return Promise.resolve({location:Object(W.d)(i,n),coordinate:H(i,o)});if(Y[0]===i&&Y[1]===n.wkid)return Y[2];Y[0]=i,Y[1]=n.wkid;const s=r.then((e=>e.project(new B.a({geometries:[i],outSpatialReference:n}),{signal:t}).then((e=>{if(!Z(e[0]))throw e[0];return{location:e[0],coordinate:H(e[0],o)}})).catch((e=>{throw new k.a("coordinate-conversion:projection-failed","Failed to project point",{projectionResult:e})}))));return Y[2]=s,s}({location:e,spatialReference:t,geometryServicePromise:this.get("viewModel.geometryServicePromise"),scale:this.get("viewModel.view.scale")},n).then((e=>e.location))}};Object(i.a)([Object(s.b)()],oe.prototype,"conversionInfo",void 0),Object(i.a)([Object(s.b)()],oe.prototype,"coordinateSegments",void 0),Object(i.a)([Object(s.b)()],oe.prototype,"currentPattern",null),Object(i.a)([Object(s.b)()],oe.prototype,"defaultPattern",void 0),Object(i.a)([Object(s.b)({readOnly:!0})],oe.prototype,"hasDisplayProperties",null),Object(i.a)([Object(s.b)()],oe.prototype,"name",void 0),Object(i.a)([Object(s.b)({type:G.a})],oe.prototype,"spatialReference",null),Object(i.a)([Object(s.b)()],oe.prototype,"viewModel",void 0),Object(i.a)([Object(s.b)({readOnly:!0})],oe.prototype,"_viewSpatialReference",null),Object(i.a)([Object(s.b)({readOnly:!0})],oe.prototype,"_additionalCharactersPattern",null),oe=Object(i.a)([Object(c.a)("esri.widgets.CoordinateConversion.support.Format")],oe);var se=oe;const ae=Object(Q.c)().decimal,ce={N:"north",S:"south",E:"east",W:"west"},ue=new RegExp(`-?\\d+[\\.|\\${ae}]?\\d*`),le=/^[\\0]+(?=\d)/;function de(e){const t=e.match(le),n=t?t[0]:"",r=e.indexOf(".")>=0?e.split(".")[1].length:0;return n+Object(Q.b)(Number(e),{pattern:"###0.###",places:r,round:-1})}function he(e){return Object(Q.d)(e)}const fe="default",pe="crosshair",me=new T.a([0,0,500]),be=`${window.location.pathname}__coordinateConversionWidgetState`,ge=o.a.getLogger("esri.widgets.CoordinateConversion.CoordinateConversionViewModel"),ve="conversions",ye="formats",_e="view",we="view-change";let Oe=0,je=[],Se=class extends(Object(V.a)(E.a.EventedAccessor)){constructor(e){super(e),this._conversionPromise=null,this._handles=new N.a,this._locationGraphic=null,this._locale=Object(I.b)(),this._pointerCount=0,this.conversions=new A.a,this.formats=new A.a,this.formatterAvailable=!1,this.geometryServicePromise=null,this.messages=null,this.requestDelay=300,this.locationSymbol=new R.a({url:Object(U.a)("esri/images/search/search-symbol-32.png"),width:24,height:24}),this.view=null,this._instanceNumber=Oe,Oe++,this._saveWidgetState=this._saveWidgetState.bind(this),this._handleFormatChange=this._handleFormatChange.bind(this),this._handleConversionChange=this._handleConversionChange.bind(this),this._handleViewChange=this._handleViewChange.bind(this),this._onClick=this._onClick.bind(this),this._onPointerMove=this._onPointerMove.bind(this),this._onPointerDown=this._onPointerDown.bind(this),this._onPointerUp=this._onPointerUp.bind(this)}initialize(){(async()=>this.messages=await Object(F.a)("esri/widgets/CoordinateConversion/t9n/CoordinateConversion"))().then((()=>{if(!this.destroyed&&(this.formats.addMany(function(e){const t=e.abbreviatedDirections.north,n=e.abbreviatedDirections.south,r=e.abbreviatedDirections.east,i=e.abbreviatedDirections.west,o={};o[t]="N",o[n]="S",o[r]="E",o[i]="W";const s=new RegExp(`N|S|${t}|${n}`,"i"),a=new RegExp(`E|W|${r}|${i}`,"i");return[new se({name:"basemap",coordinateSegments:[{alias:"X",description:"easting",searchPattern:ue,substitution:{input:e=>he(e),output:e=>de(e)}},{alias:"Y",description:"northing",searchPattern:ue,substitution:{input:e=>he(e),output:e=>de(e)}}],defaultPattern:"X, Y",viewModel:null}),new se({name:"dd",coordinateSegments:[{alias:"Y",description:"degrees latitude",searchPattern:new RegExp(`\\d{1,2}[\\.|\\${ae}]?\\d*(?=\\D*?[N|S|${t}|${n}])`,"i"),substitution:{input:e=>he(e),output:e=>de(e)}},{alias:e.abbreviatedDirections.north,description:"north/south indicator",searchPattern:s,substitution:{input:e=>o[e],output:t=>e.abbreviatedDirections[ce[t]]}},{alias:"X",description:"degrees longitude",searchPattern:new RegExp(`\\d{1,3}[\\.|\\${ae}]?\\d*(?=\\D*?[E|W|${r}|${i}])`,"i"),substitution:{input:e=>he(e),output:e=>de(e)}},{alias:e.abbreviatedDirections.east,description:"east/west indicator",searchPattern:a,substitution:{input:e=>o[e],output:t=>e.abbreviatedDirections[ce[t]]}}],defaultPattern:`Y\xb0\u200e${e.abbreviatedDirections.north}, X\xb0\u200e${e.abbreviatedDirections.east}`,viewModel:null}),new se({name:"ddm",coordinateSegments:[{alias:"Y",description:"degrees latitude",searchPattern:new RegExp(`\\d{1,2}(?=.*?\\s+.*?[N|S|${t}|${n}])`,"i"),substitution:{input:e=>he(e),output:e=>de(e)}},{alias:"A",description:"minutes latitude",searchPattern:new RegExp(`\\d{1,2}[\\.\\${ae}]?\\d*(?=.*?[N|S|${t}||${n}])`,"i"),substitution:{input:e=>he(e),output:e=>de(e)}},{alias:e.abbreviatedDirections.north,description:"north/south indicator",searchPattern:s,substitution:{input:e=>o[e],output:t=>e.abbreviatedDirections[ce[t]]}},{alias:"X",description:"degrees longitude",searchPattern:new RegExp(`\\d{1,3}(?=\\D*?\\s+.*?[E|W|${r}|${i}])`,"i"),substitution:{input:e=>he(e),output:e=>de(e)}},{alias:"B",description:"minutes longitude",searchPattern:new RegExp(`\\d{1,2}[\\.|\\|${ae}]?\\d*(?=.*?[E|W|${r}|${i}])`,"i"),substitution:{input:e=>he(e),output:e=>de(e)}},{alias:e.abbreviatedDirections.east,description:"east/west indicator",searchPattern:a,substitution:{input:e=>o[e],output:t=>e.abbreviatedDirections[ce[t]]}}],defaultPattern:`Y\xb0\u200e A'${e.abbreviatedDirections.north}, X\xb0\u200e B'${e.abbreviatedDirections.east}`,viewModel:null}),new se({name:"dms",coordinateSegments:[{alias:"Y",description:"degrees latitude",searchPattern:new RegExp(`\\d{1,2}(?=.*?\\s+.*?[N|S|${t}|${n}])`,"i"),substitution:{input:e=>he(e),output:e=>de(e)}},{alias:"A",description:"minutes latitude",searchPattern:new RegExp(`\\d{1,2}(?=.*?[N|S|${t}|${n}])`,"i"),substitution:{input:e=>he(e),output:e=>de(e)}},{alias:"B",description:"seconds latitude",searchPattern:new RegExp(`\\d{1,2}[\\.|\\${ae}]?\\d*(?=.*?[N|S|${t}|${n}])`,"i"),substitution:{input:e=>he(e),output:e=>de(e)}},{alias:e.abbreviatedDirections.north,description:"north/south indicator",searchPattern:s,substitution:{input:e=>o[e],output:t=>e.abbreviatedDirections[ce[t]]}},{alias:"X",description:"degrees longitude",searchPattern:new RegExp(`\\d{1,3}(?=.*?\\s+.*?[E|W|${r}|${i}])`,"i"),substitution:{input:e=>he(e),output:e=>de(e)}},{alias:"C",description:"minutes longitude",searchPattern:new RegExp(`\\d{1,2}(?=.*?[E|W|${r}|${i}])`,"i"),substitution:{input:e=>he(e),output:e=>de(e)}},{alias:"D",description:"seconds longitude",searchPattern:new RegExp(`\\d{1,2}[\\.|\\${ae}]?\\d*(?=.*?[E|W|${r}|${i}])`,"i"),substitution:{input:e=>he(e),output:e=>de(e)}},{alias:e.abbreviatedDirections.east,description:"east/west indicator",searchPattern:a,substitution:{input:e=>o[e],output:t=>e.abbreviatedDirections[ce[t]]}}],defaultPattern:`Y\xb0\u200e A' B"${e.abbreviatedDirections.north}, X\xb0\u200e C' D"${e.abbreviatedDirections.east}`,viewModel:null}),new se({name:"xy",coordinateSegments:[{alias:"X",description:"longitude",searchPattern:ue,substitution:{input:e=>he(e),output:e=>de(e)}},{alias:"Y",description:"latitude",searchPattern:ue,substitution:{input:e=>he(e),output:e=>de(e)}}],defaultPattern:"X\xb0\u200e, Y\xb0\u200e",viewModel:null}),new se({name:"mgrs",coordinateSegments:[{alias:"Z",description:"grid zone",searchPattern:/\d{1,2}\w|[abyz]/i},{alias:"S",description:"grid square",searchPattern:/\w{2}/},{alias:"X",description:"easting",searchPattern:/^\d{5}(?=.?\d{5}$)|^\d{4}(?=.?\d{4}$)|^\d{3}(?=.?\d{3}$)|^\d{2}(?=.?\d{2}$)|^\d(?=.?\d$)/},{alias:"Y",description:"northing",searchPattern:/^\d{1,5}/}],defaultPattern:"Z S X Y",viewModel:null}),new se({name:"usng",coordinateSegments:[{alias:"Z",description:"grid zone",searchPattern:/\d{1,2}\w|[abyz]/i},{alias:"S",description:"grid square",searchPattern:/\w{2}/},{alias:"X",description:"easting",searchPattern:/^\d{5}(?=.?\d{5}$)|^\d{4}(?=.?\d{4}$)|^\d{3}(?=.?\d{3}$)|^\d{2}(?=.?\d{2}$)|^\d(?=.?\d$)/},{alias:"Y",description:"northing",searchPattern:/^\d{1,5}/}],defaultPattern:"Z S X Y",viewModel:null}),new se({name:"utm",coordinateSegments:[{alias:"Z",description:"zone number",searchPattern:/\d{1,2}|[abyz]/i},{alias:"B",description:"latitude band",searchPattern:/^\D/},{alias:"X",description:"easting",searchPattern:/\d{1,7}(?=\s*\d{7}$)/},{alias:"Y",description:"northing",searchPattern:/\d{1,7}/}],defaultPattern:"ZB X Y",viewModel:null})]}(this.messages)),this._loadWidgetState(),this.formats.forEach((e=>{e.viewModel=this,this._handles.add(e.watch("currentPattern",this._saveWidgetState),e.name)})),this._handles.add(this.conversions.on("change",this._handleConversionChange),ve),this._handles.add(this.formats.on("change",this._handleFormatChange),ye),this._handles.add(Object($.a)(this,"view.map",(()=>{this.geometryServicePromise=Object(q.create)(this.get("view.map.portalItem"))})),we),Object(L.i)().then((()=>{this.formatterAvailable=!0})).catch((e=>{ge.error(new k.a("coordinate-conversion:projection-load-failed","Failed to load the projection module.",{error:e})),this.formatterAvailable=!1})).then((()=>this._handles.add(Object($.a)(this,"view",this._handleViewChange),we))),0===this.conversions.length)){const e=this.formats.find((e=>"xy"===e.name))||this.formats.getItemAt(0);this.conversions.add(new C({format:e}))}}))}destroy(){this._handles.removeAll(),this._cleanUpView(this.view),this.view=null}set currentLocation(e){this._set("currentLocation",e),this._updateConversions()}get currentLocation(){return this._get("currentLocation")||null}set mode(e){switch(e){case"capture":this.currentLocation=null,this._startCaptureMode(),this._set("mode",e);break;case"live":this._startLiveMode(),this._set("mode",e)}}get mode(){return this._get("mode")||"live"}get state(){const{messages:e,view:t}=this,n=null==t?void 0:t.ready;return e?n?"ready":t?"loading":"disabled":"disabled"}get waitingForConversions(){return null!=this._conversionPromise}get _debouncedConvert(){return Object(u.i)(((e,t,n)=>Object(u.j)(e.map((e=>e.convert(t,n))))),this.requestDelay)}setLocation(e){if(this.view.graphics.remove(this._locationGraphic),e){const t=e.clone();t.hasZ&&(t.z=void 0),this._locationGraphic=new D.a({geometry:t,symbol:this.get("locationSymbol")}),this.view.graphics.add(this._locationGraphic)}}convert(e,t){return Z(t)?Promise.resolve().then((()=>e.convert(t))):Promise.reject(new k.a("coordinate-conversion:invalid-point","Invalid point cannot be converted.",{point:t}))}goToLocation(e){if(this.get("view.clippingArea")||this.get("view.map.basemap.baseLayers.length")>0){const t=this.get("view.clippingArea")||this.view.map.basemap.baseLayers.getItemAt(0).fullExtent;return t?t.contains(e)?this.callGoTo({target:e}):Promise.reject(new k.a("coordinate-conversion:go-to-failed","Point outside basemap extent.",{point:e})):this.callGoTo({target:e})}return this.callGoTo({target:e})}pause(){this.currentLocation=null,this._handles.remove(_e),this.view&&(this.view.cursor=fe,this.view.graphics.remove(this._locationGraphic))}previewConversion(e,t=this.currentLocation||me){return this._convertMany([e],t).then((()=>e.displayCoordinate))}resume(){"capture"===this.mode?this._startCaptureMode():this._startLiveMode()}reverseConvert(e,t){return t.reverseConvert(e)}async updateConversions(e,t){return t&&t.type&&"point"===t.type?this._convertMany(e,t).then((e=>e.client.concat(e.server))):(this._clearConversions(this.conversions),Promise.reject(new k.a("coordinate-conversion:invalid-input-point","Point is invalid, conversions cannot be updated.",{point:t})))}_cleanUpView(e){e&&(e.graphics.remove(this._locationGraphic),this._handles.remove(_e),e.cursor=fe)}_clearConversions(e){e.forEach((e=>{e.position={location:null,coordinate:null}}))}_convertMany(e,t){const{client:n,server:r}=e.reduce(((e,t)=>(e[t.format.getConversionStrategy()].push(t),e)),{client:[],server:[]}),i=Promise.all(n.map((e=>e.format.convert(t).then((t=>(e.position=t,e))).catch((()=>{e.position=null}))))),o=e=>e?(this._conversionPromise=null,this.notifyChange("waitingForConversions"),e.map(((e,t)=>{const n=r[t];return e.error?(n.position=null,n):(n.position=e.value,n)}))):[];return this._conversionPromise=r.length>0?this._debouncedConvert(r.map((e=>e.format)),t).then(o,o):Promise.resolve([]),this.notifyChange("waitingForConversions"),Promise.all([i,this._conversionPromise]).then((e=>({client:e[0],server:e[1]})))}_handleConversionChange(e){e.added.forEach((e=>{const t=e.format;t.viewModel=this,this.currentLocation&&(this._set("waitingForConversions",!0),this.convert(t,this.currentLocation).then((t=>{e.position=t,this._set("waitingForConversions",!1)})))})),this._saveWidgetState()}_handleFormatChange(e){e.added.forEach((e=>{this._handles.add(e.watch("currentPattern",this._saveWidgetState),e.name),e.viewModel=this})),e.removed.forEach((e=>{e.viewModel=null,this._handles.remove(e.name)}))}_loadWidgetState(){if(0===this._instanceNumber)try{const e=JSON.parse(localStorage.getItem(be));e&&(je=e)}catch(e){ge.error(new k.a("coordinate-conversion:invalid-local-storage-json","Could not read from localStorge.",{error:e}))}this._setWidgetState()}_startCaptureMode(){this._handles.remove(_e),this.view&&(this.view.cursor=pe,this.currentLocation&&this.setLocation(this.currentLocation),this._handles.add(this.view.on("click",this._onClick),_e))}_startLiveMode(){this._pointerCount=0,this._handles.remove(_e),this.view&&(this.view.cursor=fe,this.view.graphics.remove(this._locationGraphic),this._handles.add([this.view.on("pointer-down",this._onPointerDown),this.view.on("pointer-up",this._onPointerUp),this.view.on("pointer-move",this._onPointerMove)],_e))}_handleViewChange(e,t){t&&t!==e&&this._cleanUpView(t),e&&("capture"===this.mode&&this._startCaptureMode(),this._startLiveMode())}_onClick(e){if(0===e.button){const t=this.view.toMap(e),n=t&&t.normalize();this.setLocation(n),this.currentLocation=n}}_onPointerDown(e){const{pointerType:t}=e;if(this._pointerCount++,("touch"===t||"pen"===t)&&1===this._pointerCount){const t=this.view.toMap(e);this.currentLocation=t&&t.normalize()}}_onPointerMove(e){const{pointerType:t}=e;if("mouse"===t||1===this._pointerCount){const t=this.view.toMap(e);this.currentLocation=t&&t.normalize()}}_onPointerUp(){this._pointerCount--}_setWidgetState(){const e=je[this._instanceNumber];if(e)try{e.formats.forEach((t=>{const n=this.formats.find((e=>e.name===t.name));n&&e.locale===this._locale&&t.currentPattern&&(n.currentPattern=t.currentPattern),n&&t.index>=0&&this.conversions.add(new C({format:n}))}))}catch(t){ge.warn(new k.a("coordinate-conversion:local-storage-read-error","Could not get widget state from stored JSON.",{error:t})),je[this._instanceNumber]={formats:[],locale:this._locale}}else je[this._instanceNumber]={formats:[],locale:this._locale}}_saveWidgetState(){const e=this._toJSON();je[this._instanceNumber]={formats:e,locale:this._locale};try{localStorage.setItem(be,JSON.stringify(je))}catch(t){ge.error(new k.a("coordinate-conversion:local-storage-write-error","Could not write to localStorage.",{error:t}))}}async _updateConversions(){try{await this.updateConversions(this.conversions.toArray(),this.currentLocation)}catch{}}_toJSON(){return this.formats.filter((e=>{const t=e.name;return"xy"===t||"basemap"===t||K(t)})).map((e=>({name:e.name,currentPattern:e.currentPattern,defaultPattern:e.defaultPattern,index:this.conversions.findIndex((t=>t.format===e))}))).sort(((e,t)=>e.index-t.index)).toArray()}};Object(i.a)([Object(s.b)()],Se.prototype,"conversions",void 0),Object(i.a)([Object(s.b)({type:T.a})],Se.prototype,"currentLocation",null),Object(i.a)([Object(s.b)()],Se.prototype,"formats",void 0),Object(i.a)([Object(s.b)()],Se.prototype,"messages",void 0),Object(i.a)([Object(s.b)()],Se.prototype,"mode",null),Object(i.a)([Object(s.b)()],Se.prototype,"requestDelay",void 0),Object(i.a)([Object(s.b)({readOnly:!0})],Se.prototype,"state",null),Object(i.a)([Object(s.b)()],Se.prototype,"locationSymbol",void 0),Object(i.a)([Object(s.b)({readOnly:!0})],Se.prototype,"waitingForConversions",null),Object(i.a)([Object(s.b)()],Se.prototype,"view",void 0),Object(i.a)([Object(s.b)({readOnly:!0})],Se.prototype,"_debouncedConvert",null),Se=Object(i.a)([Object(c.a)("esri.widgets.CoordinateConversion.CoordinateConversionViewModel")],Se);var xe=Se;const Me="esri-coordinate-conversion esri-widget",Pe="esri-coordinate-conversion--capture-mode",Ce="esri-coordinate-conversion--no-basemap",ke="esri-coordinate-conversion__popup",Te="esri-coordinate-conversion__conversion-list",Ee="esri-coordinate-conversion__row",Ae="esri-coordinate-conversion__display",Ie="esri-coordinate-conversion__conversions-view--expanded",Fe="esri-coordinate-conversion__conversions-view--expand-down",Ue="esri-coordinate-conversion__conversions-view--expand-up",Re="esri-coordinate-conversion__conversions-view",De="esri-coordinate-conversion__select-primary",Ne="esri-coordinate-conversion__select-row",$e="esri-coordinate-conversion__tools",Le="esri-coordinate-conversion__mode-toggle",Ve="esri-coordinate-conversion__row-button",qe="esri-coordinate-conversion__back-button",Ge="esri-coordinate-conversion__button",We="esri-coordinate-conversion__input-coordinate",Be="esri-coordinate-conversion__input-form",ze="esri-coordinate-conversion__input-group",Ye="esri-coordinate-conversion__input-coordinate--rejected",Je="esri-coordinate-conversion__heading",Xe="esri-coordinate-conversion__pattern-input",Ze="esri-coordinate__settings",He="esri-coordinate-conversion__settings-group",Ke="esri-coordinate-conversion__settings-group-horizontal",Qe="esri-coordinate-conversion__preview-coordinate",et="esri-disabled",tt="esri-input",nt="esri-button",rt="esri-widget__heading",it="esri-widget--button",ot="esri-icon-left-arrow",st="esri-icon-right-arrow",at="esri-icon-map-pin",ct="esri-icon-up",ut="esri-icon-duplicate",lt="esri-icon-edit",dt="esri-select",ht="esri-icon-down",ft="esri-icon-refresh",pt="esri-icon-close",mt="esri-icon-settings2",bt={settingsButton:!0,inputButton:!0,captureButton:!0,expandButton:!0},gt=o.a.getLogger("esri.widgets.CoordinateConversion");let vt=class extends f.a{constructor(e,t){super(e,t),this._popupMessage=null,this._popupId=null,this._coordinateInput=null,this._badInput=!1,this._goToEnabled=!1,this._conversionFormat=null,this._settingsFormat=null,this._previewConversion=null,this._expanded=!1,this._popupVisible=!1,this._settingsVisible=!1,this._inputVisible=!1,this.conversions=null,this.currentLocation=null,this.formats=null,this.goToOverride=null,this.label=void 0,this.messages=null,this.messagesCommon=null,this.mode=null,this.orientation="auto",this.requestDelay=null,this.view=null,this.viewModel=new xe,this.visibleElements={...bt}}set multipleConversions(e){!1===e&&(this._expanded=!1,this.conversions.splice(1,this.conversions.length-1)),this._set("multipleConversions",e)}get multipleConversions(){const e=this._get("multipleConversions");return"boolean"!=typeof e||e}castVisibleElements(e){return{...bt,...e}}reverseConvert(e,t){return this.viewModel.reverseConvert(e,t)}render(){const e=this.get("viewModel.state"),t="disabled"===e?Object(h.a)("div",{key:"esri-coordinate__no-basemap"},this.messages.noBasemap):null,n=!t&&this._inputVisible?this._renderInputForm():null,r=!t&&this._settingsVisible?this._renderSettings():null,i=t||n||r?null:this._renderConversionsView(),o=this._popupVisible?this._renderPopup():null,s={[Pe]:"capture"===this.mode,[et]:"loading"===e,[Ce]:"disabled"===e};return Object(h.a)("div",{class:this.classes(Me,s)},o,t,i,r,n)}_addConversion(e){const t=e.target,n=t.options[t.options.selectedIndex]["data-format"],r=t["data-index"],i=new C({format:n});t.options.selectedIndex=0,r>=0&&this.conversions.removeAt(r),this.conversions.add(i,r)}_findSettingsFormat(){return this._settingsFormat||this.conversions.reduceRight(((e,t)=>{const n=t.format;return n.get("hasDisplayProperties")?n:e}),null)||this.formats.find((e=>e.hasDisplayProperties))}_hidePopup(){this._popupId&&(clearTimeout(this._popupId),this._popupId=null),this._popupVisible=!1,this._popupMessage=null,this.scheduleRender()}_onConvertComplete(){this._inputVisible=!1,this._coordinateInput.value=""}_onCopy(e){const t=e.currentTarget["data-conversion"].displayCoordinate;"clipboardData"in j.a?j.a.clipboardData.setData("text",t):e.clipboardData.setData("text/plain",t),this._showPopup(this.messages.copySuccessMessage),e.preventDefault()}_processUserInput(e){const t=Object(x.a)(e),n=this.viewModel;if("Enter"!==t&&t)this._badInput&&(this._badInput=!1);else{const e=this._coordinateInput["data-format"],t=this._coordinateInput.value;this._reverseConvert(t,e).then((e=>{"capture"===this.mode?n.resume():this.mode="capture",this.currentLocation=e,n.setLocation(e),this._onConvertComplete()})).catch((e=>{gt.error(e),this._showPopup(this.messages.invalidCoordinate),this._badInput=!0}))}}_reverseConvert(e,t){const n=this.viewModel;return t.reverseConvert(e).then((e=>(this._goToEnabled&&n.goToLocation(e).catch((e=>{gt.warn(e),this._showPopup(this.messages.locationOffBasemap)})),e)))}_setInputFormat(e){const t=e.target,n=t[t.options.selectedIndex]["data-format"];this._conversionFormat=n}_setPreviewConversion(){const e=this._findSettingsFormat(),t=this.viewModel;if(e){const n=this.conversions.find((t=>t.format===e));this._previewConversion=new C({format:e,position:{location:this.currentLocation,coordinate:n&&n.position.coordinate}}),this._previewConversion.position.coordinate||t.previewConversion(this._previewConversion)}}_setSettingsFormat(e){const t=e.target,n=t[t.options.selectedIndex]["data-format"];this._settingsFormat=n,this._setPreviewConversion()}_showPopup(e,t=2500){this._popupMessage=e,this._popupVisible?clearTimeout(this._popupId):this._popupVisible=!0,this.scheduleRender(),this._popupId=setTimeout((()=>{this._popupId=null,this._hidePopup()}),t)}_toggleGoTo(){this._goToEnabled=!this._goToEnabled}_updateCurrentPattern(e){e.stopPropagation();const t=e.target,n=this._findSettingsFormat();n&&(n.currentPattern=t.value)}_renderConversion(e,t){const{messages:n}=this,r=`${this.id}__list-item-${t}`,i=`${e.format.name} ${n.conversionOutputSuffix}`,o=0===t,s=o||this._expanded,a=o?this._renderFirstConversion(e):this._renderTools(t,e,r),c=o&&!e.displayCoordinate?n.noLocation:e.displayCoordinate,u=Object(h.a)("div",{"aria-label":c,class:Ae,"data-conversion":e,role:"listitem",tabindex:"0",title:c},c),l=this._renderOptions(this.formats.filter((t=>t!==e.format)));return s?Object(h.a)("li",{"aria-label":i,class:Ee,id:r,key:e,role:"group",title:i,tabindex:"0"},Object(h.a)("select",{"aria-controls":r,"aria-label":n.selectFormat,class:this.classes(dt,Ne),bind:this,"data-index":t,onchange:this._addConversion,title:n.selectFormat},Object(h.a)("option",{"aria-label":e.format.name,selected:!0,title:e.format.name},e.format.name.toUpperCase()),l),u,a):null}_renderCopyButton(e){return Object(h.a)("li",{"aria-label":this.messagesCommon.copy,bind:this,class:this.classes(it,Ve),"data-conversion":e,onclick:this._copyCoordinateOutput,onkeydown:this._copyCoordinateOutput,oncopy:this._onCopy,role:"button",tabindex:"0",title:this.messagesCommon.copy},Object(h.a)("span",{"aria-hidden":"true",class:ut}))}_renderFirstConversion(e){const t=this.id,n={[ht]:!this._expanded,[ct]:this._expanded},{messages:r,messagesCommon:i,multipleConversions:o,visibleElements:s}=this,a="live"===this.mode?r.captureMode:r.liveMode,c=this._expanded?i.collapse:i.expand,u=e.displayCoordinate&&"capture"===this.mode?this._renderCopyButton(e):null,l=o&&s.expandButton&&Object(h.a)("li",{"aria-controls":`${t}__${Te}`,"aria-label":c,bind:this,class:it,key:"esri-coordinate-conversion__expand-button",onclick:this._toggleExpand,onkeydown:this._toggleExpand,role:"button",tabindex:"0",title:c},Object(h.a)("span",{"aria-hidden":"true",class:this.classes(n)})),d=!o&&s.captureButton&&Object(h.a)("li",{"aria-label":a,bind:this,class:this.classes(it,Le),key:"esri-coordinate-conversion__mode-toggle",onclick:this._toggleMode,onkeydown:this._toggleMode,role:"button",tabindex:"0",title:a},Object(h.a)("span",{"aria-hidden":"true",class:at}));return Object(h.a)("ul",{class:$e},u,l,d)}_renderInputForm(){const e=this._conversionFormat||this.conversions.getItemAt(0).format,t=this.formats.findIndex((t=>t.name===e.name)),n=this.id,r=`${n}__${We}`,i=`${n}__${We}__header`,o=this._renderOptions(this.formats,!0,t),s={[Ye]:this._badInput},{messages:a,messagesCommon:c}=this;return Object(h.a)("div",{"aria-labelledby":i,class:Be,key:"esri-coordinate-conversion__input-form",role:"search"},Object(h.a)("div",{class:Je},Object(h.a)("div",{"aria-label":c.back,bind:this,class:this.classes(it,qe),onclick:this._toggleInputVisibility,onkeydown:this._toggleInputVisibility,role:"button",tabindex:"0",title:c.back},this._renderBackIcon()),Object(h.a)("h4",{class:rt,id:i},a.inputCoordTitle)),Object(h.a)("div",{class:ze},Object(h.a)("select",{"aria-controls":r,"aria-label":a.selectFormat,bind:this,class:this.classes(dt,Ne),onchange:this._setInputFormat,title:a.selectFormat},o),Object(h.a)("input",{afterCreate:l.i,"aria-labelledby":i,"aria-required":"true",bind:this,class:this.classes(We,tt,s),"data-format":e,"data-node-ref":"_coordinateInput",id:r,onkeydown:this._processUserInput,placeholder:a.inputCoordTitle,role:"textbox",spellcheck:!1,title:a.inputCoordTitle,type:"text"})),Object(h.a)("div",{class:ze},Object(h.a)("label",{"aria-label":a.goTo},Object(h.a)("input",{bind:this,checked:this._goToEnabled,onclick:this._toggleGoTo,title:a.goTo,type:"checkbox"}),a.goTo),Object(h.a)("button",{"aria-label":a.convert,bind:this,class:this.classes(Ge,nt),onclick:this._processUserInput,title:a.convert,type:"button"},a.convert)))}_renderConversionsView(){const e=`${this.id}__${Te}`,t=this._renderPrimaryTools(),n=this._renderOptions(this.formats),r=this.conversions.map(((e,t)=>this._renderConversion(e,t))).toArray(),{messages:i}=this,o=this._expanded?Object(h.a)("div",{class:Ee},Object(h.a)("select",{"aria-controls":e,"aria-label":i.addConversion,bind:this,class:this.classes(dt,De),onchange:this._addConversion,title:i.addConversion},Object(h.a)("option",{disabled:!0,selected:!0,value:""},i.addConversion),n),t):null,s={[Ie]:this._expanded,[Ue]:"expand-up"===this.orientation,[Fe]:"expand-down"===this.orientation};return Object(h.a)("div",{class:this.classes(Re,s),key:"esri-coordinate-conversion__main-view"},Object(h.a)("ul",{"aria-expanded":this._expanded?"true":"false",class:Te,id:e},r),o)}_renderOptions(e,t,n){const r=this.conversions.getItemAt(0);return e.map(((e,i)=>{const o=!(t||!r)&&(r.format.name===e.name||this.conversions.map((e=>e.format.name)).includes(e.name));return Object(h.a)("option",{"aria-label":e.name,"data-format":e,disabled:o,key:e.name,selected:i===n,value:e.name},e.name.toUpperCase())})).toArray()}_renderPopup(){return Object(h.a)("div",{class:ke,role:"alert"},this._popupMessage)}_renderPrimaryTools(){const{messages:e,visibleElements:t}=this,n="live"===this.mode?e.captureMode:e.liveMode,r=t.inputButton&&Object(h.a)("li",{bind:this,class:it,onclick:this._toggleInputVisibility,onkeydown:this._toggleInputVisibility,role:"button",tabindex:"0",title:e.inputCoordTitle},Object(h.a)("span",{"aria-hidden":"true",class:lt})),i=t.captureButton&&Object(h.a)("li",{bind:this,class:this.classes(it,Le),onclick:this._toggleMode,onkeydown:this._toggleMode,role:"button",tabindex:"0",title:n},Object(h.a)("span",{"aria-hidden":"true",class:at})),o=t.settingsButton&&Object(h.a)("li",{bind:this,class:it,onclick:this._toggleSettingsVisibility,onkeydown:this._toggleSettingsVisibility,role:"button",tabindex:"0",title:e.settingsTitle},Object(h.a)("span",{"aria-hidden":"true",class:mt}));return Object(h.a)("ul",{class:$e},r,i,o)}_renderSettings(){const e=this.id,t=`${e}__${Xe}`,n=`${e}__${Xe}__header`,r=`${e}__${Qe}`,i=this.formats.filter((e=>e.hasDisplayProperties)),o=this._findSettingsFormat(),s=i.indexOf(o),a=this._renderOptions(i,!0,s),c=o.get("currentPattern"),{messages:u,messagesCommon:l}=this;return Object(h.a)("div",{"aria-labelledby":n,class:Ze,key:"esri-coordinate-conversion__settings"},Object(h.a)("div",{class:Je},Object(h.a)("div",{bind:this,class:this.classes(it,qe),onclick:this._toggleSettingsVisibility,onkeydown:this._toggleSettingsVisibility,role:"button",tabindex:"0",title:l.back},this._renderBackIcon()),Object(h.a)("h4",{class:rt,id:n},u.settingsTitle)),Object(h.a)("div",{class:He},Object(h.a)("label",{for:t},u.changeCoordinateDisplay),Object(h.a)("select",{"aria-label":u.selectFormat,class:dt,bind:this,onchange:this._setSettingsFormat,title:u.selectFormat},a),Object(h.a)("div",{class:Ke},Object(h.a)("input",{"aria-controls":r,bind:this,class:this.classes(Xe,tt),id:t,oninput:this._updateCurrentPattern,spellcheck:!1,title:u.changeCoordinateDisplay,type:"text",value:c}),Object(h.a)("div",{"aria-controls":t,bind:this,class:it,onclick:this._setDefaultPattern,onkeydown:this._setDefaultPattern,role:"button",tabindex:"0",title:u.defaultPattern},Object(h.a)("span",{"aria-hidden":"true",class:ft})))),Object(h.a)("div",{class:He},Object(h.a)("label",null,l.preview,Object(h.a)("div",{class:Qe,id:r,tabindex:"0"},this._previewConversion.displayCoordinate))))}_renderBackIcon(){return Object(h.a)("span",{"aria-hidden":"true",class:Object(l.f)()?st:ot})}_renderTools(e,t,n){const r=t.displayCoordinate&&"capture"===this.mode?this._renderCopyButton(t):null,{messages:i}=this;return Object(h.a)("ul",{class:$e,role:"listitem"},r,Object(h.a)("li",{"aria-controls":n,"aria-label":i.removeConversion,bind:this,class:this.classes(it,Ve),"data-index":e,key:`${n}__${it}`,onclick:this._removeConversion,onkeydown:this._removeConversion,tabindex:"0",role:"button",title:i.removeConversion},Object(h.a)("span",{"aria-hidden":"true",class:pt})))}_copyCoordinateOutput(e){const t=e.target;if(!("createTextRange"in document.body)){const e=window.getSelection(),n=document.createRange();n.selectNodeContents(t),e.removeAllRanges(),e.addRange(n)}document.execCommand("copy")}_removeConversion(e){const t=e.currentTarget["data-index"];this.conversions.removeAt(t)}_setDefaultPattern(e){e.stopPropagation();const t=this._findSettingsFormat();t&&(t.currentPattern=t.get("defaultPattern"))}_toggleExpand(){this._expanded=!this._expanded}_toggleInputVisibility(){this._inputVisible=!this._inputVisible,this._popupVisible&&this._hidePopup(),this._inputVisible?this.viewModel.pause():this.viewModel.resume()}_toggleMode(){this.mode="live"===this.mode?"capture":"live"}_toggleSettingsVisibility(){this._settingsVisible=!this._settingsVisible,this._popupVisible&&this._hidePopup(),this._settingsVisible?(this._setPreviewConversion(),this.viewModel.pause()):this.viewModel.resume()}};Object(i.a)([Object(a.a)("viewModel.conversions")],vt.prototype,"conversions",void 0),Object(i.a)([Object(a.a)("viewModel.currentLocation")],vt.prototype,"currentLocation",void 0),Object(i.a)([Object(a.a)("viewModel.formats")],vt.prototype,"formats",void 0),Object(i.a)([Object(a.a)("viewModel.goToOverride")],vt.prototype,"goToOverride",void 0),Object(i.a)([Object(s.b)({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],vt.prototype,"label",void 0),Object(i.a)([Object(s.b)(),Object(d.a)("esri/widgets/CoordinateConversion/t9n/CoordinateConversion")],vt.prototype,"messages",void 0),Object(i.a)([Object(s.b)(),Object(d.a)("esri/t9n/common")],vt.prototype,"messagesCommon",void 0),Object(i.a)([Object(a.a)("viewModel.mode")],vt.prototype,"mode",void 0),Object(i.a)([Object(s.b)()],vt.prototype,"orientation",void 0),Object(i.a)([Object(a.a)("viewModel.requestDelay")],vt.prototype,"requestDelay",void 0),Object(i.a)([Object(s.b)()],vt.prototype,"multipleConversions",null),Object(i.a)([Object(a.a)("viewModel.locationSymbol")],vt.prototype,"locationSymbol",void 0),Object(i.a)([Object(a.a)("viewModel.view")],vt.prototype,"view",void 0),Object(i.a)([Object(s.b)({type:xe})],vt.prototype,"viewModel",void 0),Object(i.a)([Object(s.b)()],vt.prototype,"visibleElements",void 0),Object(i.a)([Object(S.a)("visibleElements")],vt.prototype,"castVisibleElements",null),Object(i.a)([Object(M.a)()],vt.prototype,"_copyCoordinateOutput",null),Object(i.a)([Object(M.a)()],vt.prototype,"_removeConversion",null),Object(i.a)([Object(M.a)()],vt.prototype,"_setDefaultPattern",null),Object(i.a)([Object(M.a)()],vt.prototype,"_toggleExpand",null),Object(i.a)([Object(M.a)()],vt.prototype,"_toggleInputVisibility",null),Object(i.a)([Object(M.a)()],vt.prototype,"_toggleMode",null),Object(i.a)([Object(M.a)()],vt.prototype,"_toggleSettingsVisibility",null),vt=Object(i.a)([Object(c.a)("esri.widgets.CoordinateConversion")],vt);var yt=vt,_t=(n(1101),n(338)),wt=n(3),Ot=n(2);const jt=e=>{const t=Object(r.useRef)(null),n=Object(r.useRef)(null),i=Object(r.useRef)(),o=Object(r.useRef)(),[s,a]=Object(r.useState)(),c=t=>{document.querySelectorAll(".measureTools calcite-action").forEach((e=>{e!=t.target&&(e.active=!1)})),i.current&&("distance"===t.target.getAttribute("value")&&(t.target.active?(t.target.active=!1,a(void 0),i.current.clear()):(t.target.active=!0,i.current.activeTool="distance",a("measurement"),e.measurementActivated(i.current,o.current))),"area"===t.target.getAttribute("value")&&(t.target.active?(t.target.active=!1,a(void 0),i.current.clear()):(t.target.active=!0,i.current.activeTool="area",a("measurement"),e.measurementActivated(i.current))),"coordinates"===t.target.getAttribute("value")&&(t.target.active?(t.target.active=!1,a(void 0)):(t.target.active=!0,e.measurementActivated(i.current,o.current),a("coordinates"))),"clear"===t.target.getAttribute("value")&&(i.current.clear(),a(void 0)))};return Object(r.useEffect)((()=>{i.current=new O({container:t.current,view:e.view,areaUnit:"imperial",linearUnit:"imperial"}),i.current.viewModel.watch("state",(e=>{"ready"===e&&document.querySelectorAll("#measureTools calcite-action").forEach((e=>{e.active=!1}))}));const r=new yt({container:n.current,view:e.view});r.viewModel.locationSymbol=new _t.a(wt.d),o.current=r,r.viewModel.watch("mode",(t=>{e.view.popup.autoOpenEnabled="live"===t}));const s=/-?\d+[\.]?\d*/,a=new se({name:"Stateplane Feet",conversionInfo:{spatialReference:new G.a({wkid:2264}),reverseConvert:function(e){const t=e.split(",");return new T.a({x:parseFloat(t[0]),y:parseFloat(t[1]),spatialReference:{wkid:2264}})}},coordinateSegments:[{alias:"X",description:"easting",searchPattern:s},{alias:"Y",description:"northing",searchPattern:s}],defaultPattern:"X, Y"});return r.formats.add(a),r.conversions.splice(0,0,new C({format:a})),()=>{var e;i&&(null===(e=i.current)||void 0===e||e.destroy())}}),[e.view]),Object(Ot.jsxs)("div",{className:"panel",children:[Object(Ot.jsxs)("div",{className:"measureTools",children:[Object(Ot.jsx)("calcite-action",{text:"Distance",appearance:"outline",icon:"measure-line",id:"lineMeasure",value:"distance","text-enabled":!0,onClick:c}),Object(Ot.jsx)("calcite-action",{text:"Area",appearance:"outline",icon:"measure-area",id:"areaMeasure",value:"area","text-enabled":!0,onClick:c}),Object(Ot.jsx)("calcite-action",{text:"Coordinates",appearance:"outline",icon:"pins",id:"coordinates",value:"coordinates","text-enabled":!0,onClick:c}),Object(Ot.jsx)("calcite-action",{text:"Clear",appearance:"outline",icon:"trash",id:"clearMeasure",value:"clear","text-enabled":!0,onClick:c})]}),Object(Ot.jsx)("div",{ref:t,hidden:"measurement"!=s}),Object(Ot.jsx)("div",{ref:n,hidden:"coordinates"!=s})]})};t.default=jt},131:function(e,t,n){"use strict";var r,i=n(80),o=(n(78),n(90)),s=(n(79),n(86),n(83)),a=n(103),c=n(82),u=(n(81),n(84),n(85),n(88));let l=r=class extends u.a{constructor(e){super(e),this.name=null,this.code=null}clone(){return new r({name:this.name,code:this.code})}};Object(i.a)([Object(s.b)({type:String,json:{write:!0}})],l.prototype,"name",void 0),Object(i.a)([Object(s.b)({type:[String,Number],json:{write:!0}})],l.prototype,"code",void 0),l=r=Object(i.a)([Object(c.a)("esri.layers.support.CodedValue")],l);var d,h=l,f=n(116);let p=d=class extends f.a{constructor(e){super(e),this.codedValues=null,this.type="coded-value"}getName(e){let t=null;if(this.codedValues){const n=String(e);this.codedValues.some((e=>(String(e.code)===n&&(t=e.name),!!t)))}return t}clone(){return new d({codedValues:Object(o.a)(this.codedValues),name:this.name})}};Object(i.a)([Object(s.b)({type:[h],json:{write:!0}})],p.prototype,"codedValues",void 0),Object(i.a)([Object(a.a)({codedValue:"coded-value"})],p.prototype,"type",void 0),p=d=Object(i.a)([Object(c.a)("esri.layers.support.CodedValueDomain")],p);var m=p;t.a=m},133:function(e,t,n){"use strict";var r,i=n(80),o=(n(78),n(79),n(86),n(83),n(103)),s=n(82),a=(n(81),n(84),n(85),n(116));let c=r=class extends a.a{constructor(e){super(e),this.type="inherited"}clone(){return new r}};Object(i.a)([Object(o.a)({inherited:"inherited"})],c.prototype,"type",void 0),c=r=Object(i.a)([Object(s.a)("esri.layers.support.InheritedDomain")],c);var u=c;t.a=u},134:function(e,t,n){"use strict";var r,i=n(80),o=(n(78),n(79),n(86),n(83)),s=n(103),a=n(82),c=(n(81),n(84),n(85),n(116));let u=r=class extends c.a{constructor(e){super(e),this.maxValue=null,this.minValue=null,this.type="range"}clone(){return new r({maxValue:this.maxValue,minValue:this.minValue,name:this.name})}};Object(i.a)([Object(o.b)({type:Number,json:{type:[Number],read:{source:"range",reader:(e,t)=>t.range&&t.range[1]},write:{enabled:!1,overridePolicy(){return{enabled:null!=this.maxValue&&null==this.minValue}},target:"range",writer(e,t,n){t[n]=[this.minValue||0,e]}}}})],u.prototype,"maxValue",void 0),Object(i.a)([Object(o.b)({type:Number,json:{type:[Number],read:{source:"range",reader:(e,t)=>t.range&&t.range[0]},write:{target:"range",writer(e,t,n){t[n]=[e,this.maxValue||0]}}}})],u.prototype,"minValue",void 0),Object(i.a)([Object(s.a)({range:"range"})],u.prototype,"type",void 0),u=r=Object(i.a)([Object(a.a)("esri.layers.support.RangeDomain")],u);var l=u;t.a=l},137:function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return c})),n.d(t,"c",(function(){return s})),n.d(t,"d",(function(){return u}));var r=n(121);const i=/\{([^\}]+)\}/g;function o(e){return null==e?"":e}function s(e,t){return e.replace(i,"object"==typeof t?(e,n)=>o(Object(r.b)(n,t)):(e,n)=>o(t(n)))}function a(e,t){return e.replace(/([\.$?*|{}\(\)\[\]\\\/\+\-^])/g,(e=>t&&-1!==t.indexOf(e)?e:`\\${e}`))}function c(e){let t=0;for(let n=0;n<e.length;n++)t=(t<<5)-t+e.charCodeAt(n),t|=0;return t}function u(e){return(new DOMParser).parseFromString(e||"","text/html").body.innerText||""}},138:function(e,t,n){"use strict";var r=n(152),i=(n(78),n(121));const o={apiKey:void 0,applicationUrl:r.a.location&&r.a.location.href,assetsPath:"",fontsUrl:"https://static.arcgis.com/fonts",geometryService:null,geometryServiceUrl:"https://utility.arcgisonline.com/arcgis/rest/services/Geometry/GeometryServer",geoRSSServiceUrl:"https://utility.arcgis.com/sharing/rss",kmlServiceUrl:"https://utility.arcgis.com/sharing/kml",portalUrl:"https://www.arcgis.com",workers:{loaderConfig:{has:{},paths:{},map:{},packages:[]}},request:{httpsDomains:["arcgis.com","arcgisonline.com","esrikr.com","premiumservices.blackbridge.com","esripremium.accuweather.com","gbm.digitalglobe.com","firstlook.digitalglobe.com","msi.digitalglobe.com"],interceptors:[],maxUrlLength:2e3,proxyRules:[],proxyUrl:null,timeout:6e4,trustedServers:[],useIdentity:!0},log:{interceptors:[],level:null}};if(r.a.esriConfig&&(Object(i.a)(o,r.a.esriConfig,!0),delete o.has),!o.assetsPath){const e="4.19.0";o.assetsPath=`https://js.arcgis.com/${e.slice(0,-2)}/@arcgis/core/assets`}o.baseUrl&&console.warn("[esri.config]","baseUrl has been replaced by assetsPath"),Object.defineProperty(o,"baseUrl",{set(){console.warn("[esri.config]","baseUrl has been replaced by assetsPath")}}),o.request.corsEnabledServers=[],o.request.corsEnabledServers.push=function(){return console.warn("[esri.config]","request.corsEnabledServers is not supported and will be removed in a future release. See http://esriurl.com/cors8664"),0},t.a=o},144:function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return h})),n.d(t,"c",(function(){return d})),n.d(t,"d",(function(){return l})),n.d(t,"e",(function(){return u}));n(78);var r,i,o=n(116),s=n(131),a=n(133),c=n(134);function u(e,t){switch(e.type){case"range":{const n="range"in e?e.range[0]:e.minValue,i="range"in e?e.range[1]:e.maxValue;if(+t<n||+t>i)return r.VALUE_OUT_OF_RANGE;break}case"coded-value":case"codedValue":if(null==e.codedValues||e.codedValues.every((e=>null==e||e.code!==t)))return r.INVALID_CODED_VALUE}return null}(i=r||(r={})).VALUE_OUT_OF_RANGE="domain-validation-error::value-out-of-range",i.INVALID_CODED_VALUE="domain-validation-error::invalid-coded-value";const l={key:"type",base:o.a,typeMap:{range:c.a,"coded-value":s.a,inherited:a.a}};function d(e){if(e&&"range"===e.type)return{min:"range"in e?e.range[0]:e.minValue,max:"range"in e?e.range[1]:e.maxValue}}function h(e){if(!e||!e.type)return null;switch(e.type){case"range":return c.a.fromJSON(e);case"codedValue":return s.a.fromJSON(e);case"inherited":return a.a.fromJSON(e)}return null}},147:function(e,t,n){"use strict";n.d(t,"a",(function(){return l})),n.d(t,"b",(function(){return u})),n.d(t,"c",(function(){return a})),n.d(t,"d",(function(){return c})),n.d(t,"e",(function(){return s}));var r=n(87),i=n(95);n(98);let o;async function s(){return o||(o=(async()=>{const e=await Promise.all([n.e(32),n.e(129)]).then(n.bind(null,381));return await e.arcade.load(),{arcade:e.arcade,arcadeUtils:e,Dictionary:e.Dictionary,Feature:e.arcadeFeature}})()),o}const a=(e,t,n)=>l.create(e,t,n,null,["$feature"]),c=(e,t,n)=>l.create(e,t,n,null,["$feature","$view"]),u=(e,t,n,r)=>l.create(e,t,n,r,["$feature","$view"]);class l{constructor(e,t,n,r,i,o,s,a){this.script=e,this.evaluate=i,this.fields=s,this._syntaxTree=r,this._arcade=t,this._arcadeDictionary=n,this._arcadeFeature=o,this._spatialReference=a,this._referencesGeometry=t.scriptTouchesGeometry(this._syntaxTree),this._referencesScale=this._arcade.referencesMember(this._syntaxTree,"scale")}static async create(e,t,n,o,a,c){const{arcade:u,Feature:d,Dictionary:h}=await s(),f=i.a.fromJSON(t),p=u.parseScript(e,c),m=a.reduce(((e,t)=>({...e,[t]:null})),{});let b=null;Object(r.k)(o)&&(b=new h(o),b.immutable=!0,m.$config=null);const g=u.scriptUsesGeometryEngine(p)&&u.enableGeometrySupport(),v=u.scriptUsesFeatureSet(p)&&u.enableFeatureSetSupport(),y=u.scriptIsAsync(p)&&u.enableAsyncSupport(),_={vars:m,spatialReference:f,useAsync:!!y},w=new h;w.immutable=!1,w.setField("scale",0);const O=u.compileScript(p,_);return await Promise.all([g,v,y]),new l(e,u,h,p,(e=>("$view"in e&&e.$view&&(w.setField("scale",e.$view.scale),e.$view=w),b&&(e.$config=b),O({vars:e,spatialReference:f}))),new d,n,f)}repurposeFeature(e){return e.geometry&&!e.geometry.spatialReference&&(e.geometry.spatialReference=this._spatialReference),this._arcadeFeature.repurposeFromGraphicLikeObject(e.geometry,e.attributes,{fields:this.fields}),this._arcadeFeature}repurposeAdapter(e){return this._arcadeFeature.repurposeFromAdapter(e,{fields:this.fields}),this._arcadeFeature}createDictionary(){return new this._arcadeDictionary}referencesMember(e){return this._arcade.referencesMember(this._syntaxTree,e)}referencesFunction(e){return this._arcade.referencesFunction(this._syntaxTree,e)}referencesGeometry(){return this._referencesGeometry}referencesScale(){return this._referencesScale}extractFieldLiterals(e){return this._arcade.extractFieldLiterals(this._syntaxTree,e)}}},152:function(e,t,n){"use strict";(function(e){const n="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof e?e:void 0;t.a=n}).call(this,n(172))},168:function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return c})),n.d(t,"c",(function(){return u})),n.d(t,"d",(function(){return l})),n.d(t,"e",(function(){return h})),n.d(t,"f",(function(){return f})),n.d(t,"g",(function(){return d}));var r=n(107),i=n(95),o=n(129);function s(e){return new i.a({wkt:`GEOCCS["Spherical geocentric",\n    DATUM["Not specified",\n      SPHEROID["Sphere",${e.radius},0]],\n    PRIMEM["Greenwich",0.0,\n      AUTHORITY["EPSG","8901"]],\n    UNIT["m",1.0],\n    AXIS["Geocentric X",OTHER],\n    AXIS["Geocentric Y",EAST],\n    AXIS["Geocentric Z",NORTH]\n  ]`})}const a=s(o.a),c=s(o.b),u=s(o.c),l=new i.a({wkt:`GEOCCS["WGS 84",\n  DATUM["WGS_1984",\n    SPHEROID["WGS 84",${o.a.radius},298.257223563,\n      AUTHORITY["EPSG","7030"]],\n    AUTHORITY["EPSG","6326"]],\n  PRIMEM["Greenwich",0,\n    AUTHORITY["EPSG","8901"]],\n  UNIT["m",1.0,\n    AUTHORITY["EPSG","9001"]],\n  AXIS["Geocentric X",OTHER],\n  AXIS["Geocentric Y",OTHER],\n  AXIS["Geocentric Z",NORTH],\n  AUTHORITY["EPSG","4978"]\n]`});function d(e){return e&&(Object(r.g)(e)||e===c)?c:e&&(Object(r.h)(e)||e===u)?u:a}function h(e){return e&&(Object(r.g)(e)||e===c)?o.b:e&&(Object(r.h)(e)||e===u)?o.c:o.a}function f(e){return Object(r.k)(e)?o.b:Object(r.l)(e)?o.c:o.a}},172:function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(r){"object"===typeof window&&(n=window)}e.exports=n},179:function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return i})),n.d(t,"c",(function(){return c})),n.d(t,"d",(function(){return a}));const r=1e-6,i=Math.random,o=Math.PI/180,s=180/Math.PI;function a(e){return e*o}function c(e){return e*s}Object.freeze({__proto__:null,EPSILON:r,RANDOM:i,toRadian:a,toDegree:c,equals:function(e,t){return Math.abs(e-t)<=r*Math.max(1,Math.abs(e),Math.abs(t))}})},184:function(e,t,n){"use strict";function r(e){return e&&("function"==typeof e.on||"function"==typeof e.addEventListener)}function i(e,t,n){if(!r(e))throw new TypeError("target is not a Evented or EventTarget object");if("on"in e)return e.on(t,n);if(Array.isArray(t)){const r=t.slice();for(const t of r)e.addEventListener(t,n);return{remove(){for(const t of r)e.removeEventListener(t,n)}}}return e.addEventListener(t,n),{remove(){e.removeEventListener(t,n)}}}function o(e,t,n){if(!r(e))throw new TypeError("target is not a Evented or EventTarget object");if("once"in e)return e.once(t,n);const o=i(e,t,(t=>{o.remove(),n.call(e,t)}));return{remove(){o.remove()}}}n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return r})),n.d(t,"c",(function(){return i})),n.d(t,"d",(function(){return o}));const s={Win:"Meta",Scroll:"ScrollLock",Spacebar:" ",Down:"ArrowDown",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Del:"Delete",Apps:"ContextMenu",Esc:"Escape",Multiply:"*",Add:"+",Subtract:"-",Decimal:".",Divide:"/"};function a({key:e}){return s[e]||e}},185:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));let r=0;function i(){return++r}},259:function(e,t,n){"use strict";function r(){return function(e,t){if(!e[t])throw new TypeError(`Cannot auto bind undefined function '${t}'`);return{value:i(e[t])}}}function i(e){return function(t,...n){!function(e){const{type:t}=e;return e instanceof KeyboardEvent||"keyup"===t||"keydown"===t||"keypress"===t}(t)?e.call(this,t,...n):"Enter"!==t.key&&" "!==t.key||(t.preventDefault(),t.stopPropagation(),t.target.click())}}n.d(t,"a",(function(){return r}))},291:function(e,t,n){"use strict";function r(e,t){if(e.forEach)e.forEach(t);else for(let n=0;n<e.length;n++)t(e[n],n,e)}function i(e,t,n){if(e.slice)return e.slice(t,n);void 0===t?t=0:(t<0&&(t+=e.length),t=Math.min(e.length,Math.max(0,t))),void 0===n?n=e.length:(n<0&&(n+=e.length),n=Math.min(e.length,Math.max(0,n)));const r=Math.max(0,n-t),i=new(0,e.constructor)(r);for(let o=0;o<r;o++)i[o]=e[t+o];return i}function o(e){return e instanceof ArrayBuffer||e&&e.constructor&&"ArrayBuffer"===e.constructor.name}function s(e){return e instanceof Int8Array||e&&e.constructor&&"Int8Array"===e.constructor.name}function a(e){return e instanceof Uint8Array||e&&e.constructor&&"Uint8Array"===e.constructor.name}function c(e){return e instanceof Uint8ClampedArray||e&&e.constructor&&"Uint8ClampedArray"===e.constructor.name}function u(e){return e instanceof Int16Array||e&&e.constructor&&"Int16Array"===e.constructor.name}function l(e){return e instanceof Uint16Array||e&&e.constructor&&"Uint16Array"===e.constructor.name}function d(e){return e instanceof Int32Array||e&&e.constructor&&"Int32Array"===e.constructor.name}function h(e){return e instanceof Uint32Array||e&&e.constructor&&"Uint32Array"===e.constructor.name}function f(e){return e instanceof Float32Array||e&&e.constructor&&"Float32Array"===e.constructor.name}function p(e){return e instanceof Float64Array||e&&e.constructor&&"Float64Array"===e.constructor.name}function m(e){const t=new Array(e.length);for(let n=0;n<e.length;n++)t[n]=e[n];return t}function b(e){return e?128+e.buffer.byteLength+64:0}n.d(t,"a",(function(){return b})),n.d(t,"b",(function(){return r})),n.d(t,"c",(function(){return o})),n.d(t,"d",(function(){return f})),n.d(t,"e",(function(){return p})),n.d(t,"f",(function(){return u})),n.d(t,"g",(function(){return d})),n.d(t,"h",(function(){return s})),n.d(t,"i",(function(){return l})),n.d(t,"j",(function(){return h})),n.d(t,"k",(function(){return a})),n.d(t,"l",(function(){return c})),n.d(t,"m",(function(){return i})),n.d(t,"n",(function(){return m}))},399:function(e,t,n){"use strict";var r=n(121);class i{constructor(e,t,n){this.name=e,this.details=n,this.message=void 0,this instanceof i&&(this.message=t&&function(e,t){return e.replace(/\$\{([^\s\:\}]*)(?:\:([^\s\:\}]+))?\}/g,(function(e,n){if(""===n)return"$";const i=Object(r.b)(n,t),o=null==i?"":i;if(void 0===o)throw new Error(`could not find key "${n}" in template`);return o.toString()}))}(t,n)||"")}toString(){return"["+this.name+"]: "+this.message}}t.a=i},455:function(e,t,n){"use strict";var r=n(152);var i,o=(i=r.a,{setTimeout:(e,t)=>{const n=i.setTimeout(e,t);return{remove:()=>i.clearTimeout(n)}}});t.a=o},498:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(80),i=(n(78),n(79),n(86),n(83)),o=n(82);n(81),n(84),n(85);const s=e=>{let t=class extends e{constructor(...e){super(...e),this.goToOverride=null,this.view=null}callGoTo(e){const{view:t}=this;return this.goToOverride?this.goToOverride(t,e):t.goTo(e.target,e.options)}};return Object(r.a)([Object(i.b)()],t.prototype,"goToOverride",void 0),Object(r.a)([Object(i.b)()],t.prototype,"view",void 0),t=Object(r.a)([Object(o.a)("esri.widgets.support.GoTo")],t),t}},540:function(e,t,n){"use strict";var r=n(80),i=(n(78),n(79),n(86),n(83)),o=n(82),s=(n(81),n(84),n(85),n(88)),a=n(96);let c=class extends s.a{constructor(e){super(e),this.geometries=null,this.outSpatialReference=null,this.transformation=null,this.transformForward=null}toJSON(){const e=this.geometries.map((function(e){return e.toJSON()})),t=this.geometries[0],n={};return n.outSR=this.outSpatialReference.wkid||JSON.stringify(this.outSpatialReference.toJSON()),n.inSR=t.spatialReference.wkid||JSON.stringify(t.spatialReference.toJSON()),n.geometries=JSON.stringify({geometryType:Object(a.c)(t),geometries:e}),this.transformation&&(n.transformation=this.transformation.wkid||JSON.stringify(this.transformation)),null!=this.transformForward&&(n.transformForward=this.transformForward),n}};Object(r.a)([Object(i.b)()],c.prototype,"geometries",void 0),Object(r.a)([Object(i.b)({json:{read:{source:"outSR"}}})],c.prototype,"outSpatialReference",void 0),Object(r.a)([Object(i.b)()],c.prototype,"transformation",void 0),Object(r.a)([Object(i.b)()],c.prototype,"transformForward",void 0),c=Object(r.a)([Object(o.a)("esri.tasks.support.ProjectParameters")],c);var u=c;t.a=u},776:function(e,t,n){"use strict";n.d(t,"a",(function(){return u})),n.d(t,"b",(function(){return a})),n.d(t,"c",(function(){return s})),n.d(t,"d",(function(){return l}));var r=n(137),i=n(140);const o={ar:[".",","],bs:[",","."],ca:[",","."],cs:[",","\xa0"],da:[",","."],de:[",","."],"de-ch":[".","\u2019"],el:[",","."],en:[".",","],"en-au":[".",","],es:[",","."],"es-mx":[".",","],et:[",","\xa0"],fi:[",","\xa0"],fr:[",","\u202f"],"fr-ch":[",","\u202f"],he:[".",","],hi:[".",",","#,##,##0.###"],hr:[",","."],hu:[",","\xa0"],id:[",","."],it:[",","."],"it-ch":[".","\u2019"],ja:[".",","],ko:[".",","],lt:[",","\xa0"],lv:[",","\xa0"],mk:[",","."],nb:[",","\xa0"],nl:[",","."],pl:[",","\xa0"],pt:[",","."],"pt-pt":[",","\xa0"],ro:[",","."],ru:[",","\xa0"],sk:[",","\xa0"],sl:[",","."],sr:[",","."],sv:[",","\xa0"],th:[".",","],tr:[",","."],uk:[",","\xa0"],vi:[",","."],zh:[".",","]};function s(e){e||(e=Object(i.b)());let t=e in o;if(!t){const n=e.split("-");n.length>1&&n[0]in o&&(e=n[0],t=!0),t||(e="en")}const[n,r,s="#,##0.###"]=o[e];return{decimal:n,group:r,pattern:s}}function a(e,t){const n=s((t={...t}).locale);t.customs=n;const r=t.pattern||n.pattern;return isNaN(e)||Math.abs(e)===1/0?null:function(e,t,n){const r=(n=n||{}).customs.group,i=n.customs.decimal,o=t.split(";"),s=o[0];if(-1!==(t=o[e<0?1:0]||"-"+s).indexOf("%"))e*=100;else if(-1!==t.indexOf("\u2030"))e*=1e3;else{if(-1!==t.indexOf("\xa4"))throw new Error("currency notation not supported");if(-1!==t.indexOf("E"))throw new Error("exponential notation not supported")}const a=c,u=s.match(a);if(!u)throw new Error("unable to find a number expression in pattern: "+t);return!1===n.fractional&&(n.places=0),t.replace(a,function(e,t,n){!0===(n=n||{}).places&&(n.places=0),n.places===1/0&&(n.places=6);const r=t.split("."),i="string"==typeof n.places&&n.places.indexOf(",");let o=n.places;i?o=n.places.substring(i+1):o>=0||(o=(r[1]||[]).length),n.round<0||(e=Number(e.toFixed(Number(o))));const s=String(Math.abs(e)).split("."),a=s[1]||"";if(r[1]||n.places){i&&(n.places=n.places.substring(0,i));const e=void 0!==n.places?n.places:r[1]&&r[1].lastIndexOf("0")+1;e>a.length&&(s[1]=a.padEnd(Number(e),"0")),o<a.length&&(s[1]=a.substr(0,Number(o)))}else s[1]&&s.pop();const c=r[0].replace(",","");let u=c.indexOf("0");-1!==u&&(u=c.length-u,u>s[0].length&&(s[0]=s[0].padStart(u,"0")),-1===c.indexOf("#")&&(s[0]=s[0].substr(s[0].length-u)));let l,d,h=r[0].lastIndexOf(",");if(-1!==h){l=r[0].length-h-1;const e=r[0].substr(0,h);h=e.lastIndexOf(","),-1!==h&&(d=e.length-h-1)}const f=[];for(let p=s[0];p;){const e=p.length-l;f.push(e>0?p.substr(e):p),p=e>0?p.slice(0,e):"",d&&(l=d,d=void 0)}return s[0]=f.reverse().join(n.group||","),s.join(n.decimal||".")}(e,u[0],{decimal:i,group:r,places:n.places,round:n.round}))}(e,r,t)}const c=/[#0,]*[#0](?:\.0*#*)?/;function u(e){const t=s((e=e||{}).locale),n=e.pattern||t.pattern,i=t.group,o=t.decimal;let a=1;if(-1!==n.indexOf("%"))a/=100;else if(-1!==n.indexOf("\u2030"))a/=1e3;else if(-1!==n.indexOf("\xa4"))throw new Error("currency notation not supported");const u=n.split(";");return 1===u.length&&u.push("-"+u[0]),{regexp:h(u,(function(t){return(t="(?:"+Object(r.a)(t,".")+")").replace(c,(function(t){const n={signed:!1,separator:e.strict?i:[i,""],fractional:e.fractional,decimal:o,exponent:!1},r=t.split(".");let s=e.places;1===r.length&&1!==a&&(r[1]="###"),1===r.length||0===s?n.fractional=!1:(void 0===s&&(s=e.pattern?r[1].lastIndexOf("0")+1:1/0),s&&null==e.fractional&&(n.fractional=!0),!e.places&&s<r[1].length&&(s+=","+r[1].length),n.places=s);const c=r[0].split(",");return c.length>1&&(n.groupSize=c.pop().length,c.length>1&&(n.groupSize2=c.pop().length)),"("+function(e){"places"in(e=e||{})||(e.places=1/0),"string"!=typeof e.decimal&&(e.decimal="."),"fractional"in e&&!/^0/.test(String(e.places))||(e.fractional=[!0,!1]),"exponent"in e||(e.exponent=[!0,!1]),"eSigned"in e||(e.eSigned=[!0,!1]);const t=d(e),n=h(e.fractional,(function(t){let n="";return t&&0!==e.places&&(n="\\"+e.decimal,e.places===1/0?n="(?:"+n+"\\d+)?":n+="\\d{"+e.places+"}"),n}),!0);let r=t+n;return n&&(r="(?:(?:"+r+")|(?:"+n+"))"),r+h(e.exponent,(function(t){return t?"([eE]"+d({signed:e.eSigned})+")":""}))}(n)+")"}))}),!0).replace(/[\xa0 ]/g,"[\\s\\xa0]"),group:i,decimal:o,factor:a}}function l(e,t){const n=u(t),r=new RegExp("^"+n.regexp+"$").exec(e);if(!r)return NaN;let i=r[1];if(!r[1]){if(!r[2])return NaN;i=r[2],n.factor*=-1}return i=i.replace(new RegExp("["+n.group+"\\s\\xa0]","g"),"").replace(n.decimal,"."),Number(i)*n.factor}function d(e){return"signed"in(e=e||{})||(e.signed=[!0,!1]),"separator"in e?"groupSize"in e||(e.groupSize=3):e.separator="",h(e.signed,(function(e){return e?"[-+]":""}),!0)+h(e.separator,(function(t){if(!t)return"(?:\\d+)";" "===(t=Object(r.a)(t))?t="\\s":"\xa0"===t&&(t="\\s\\xa0");const n=e.groupSize,i=e.groupSize2;if(i){const e="(?:0|[1-9]\\d{0,"+(i-1)+"}(?:["+t+"]\\d{"+i+"})*["+t+"]\\d{"+n+"})";return n-i>0?"(?:"+e+"|(?:0|[1-9]\\d{0,"+(n-1)+"}))":e}return"(?:0|[1-9]\\d{0,"+(n-1)+"}(?:["+t+"]\\d{"+n+"})*)"}),!0)}const h=function(e,t,n){if(!(e instanceof Array))return t(e);const r=[];for(let i=0;i<e.length;i++)r.push(t(e[i]));return f(r.join("|"),n)},f=function(e,t){return"("+(t?"?:":"")+e+")"}},78:function(e,t,n){"use strict";var r,i,o=n(152);let s;var a,c;function u(e){return"function"==typeof s[e]?s[e]=s[e](o.a):s[e]}s=null!=(r=o.a.dojoConfig)&&r.has||null!=(i=o.a.esriConfig)&&i.has?{...null==(a=o.a.dojoConfig)?void 0:a.has,...null==(c=o.a.esriConfig)?void 0:c.has}:{},u.add=(e,t,n,r)=>((r||void 0===s[e])&&(s[e]=t),n&&u(e)),u.cache=s,u.add("esri-deprecation-warnings",!0),(()=>{u.add("host-webworker",void 0!==o.a.WorkerGlobalScope&&self instanceof o.a.WorkerGlobalScope);const e="undefined"!=typeof window&&"undefined"!=typeof location&&"undefined"!=typeof document&&window.location===location&&window.document===document;if(u.add("host-browser",e),u.add("host-node","object"==typeof o.a.process&&o.a.process.versions&&o.a.process.versions.node&&o.a.process.versions.v8),u.add("dom",e),u("host-browser")){const e=navigator,t=e.userAgent,n=e.appVersion,r=parseFloat(n);if(u.add("wp",parseFloat(t.split("Windows Phone")[1])||void 0),u.add("msapp",parseFloat(t.split("MSAppHost/")[1])||void 0),u.add("khtml",n.indexOf("Konqueror")>=0?r:void 0),u.add("edge",parseFloat(t.split("Edge/")[1])||void 0),u.add("opr",parseFloat(t.split("OPR/")[1])||void 0),u.add("webkit",!u("wp")&&!u("edge")&&parseFloat(t.split("WebKit/")[1])||void 0),u.add("chrome",!u("edge")&&!u("opr")&&parseFloat(t.split("Chrome/")[1])||void 0),u.add("android",!u("wp")&&parseFloat(t.split("Android ")[1])||void 0),u.add("safari",!(n.indexOf("Safari")>=0)||u("wp")||u("chrome")||u("android")||u("edge")||u("opr")?void 0:parseFloat(n.split("Version/")[1])),u.add("mac",n.indexOf("Macintosh")>=0),u.add("quirks","BackCompat"===document.compatMode),!u("wp")&&t.match(/(iPhone|iPod|iPad)/)){const e=RegExp.$1.replace(/P/,"p"),n=t.match(/OS ([\d_]+)/)?RegExp.$1:"1",r=parseFloat(n.replace(/_/,".").replace(/_/g,""));u.add(e,r),u.add("ios",r)}u.add("trident",parseFloat(n.split("Trident/")[1])||void 0),u.add("svg","undefined"!=typeof SVGAngle),u("webkit")||(t.indexOf("Opera")>=0&&u.add("opera",r>=9.8&&parseFloat(t.split("Version/")[1])||r),!(t.indexOf("Gecko")>=0)||u("wp")||u("khtml")||u("trident")||u("edge")||u.add("mozilla",r),u("mozilla")&&u.add("ff",parseFloat(t.split("Firefox/")[1]||t.split("Minefield/")[1])||void 0))}})(),(()=>{if(o.a.navigator){const e=navigator.userAgent,t=e.match(/Android|webOS|iPhone|iPad|iPod|BlackBerry|Opera Mini|IEMobile/i),n=e.match(/iPhone/i);t&&u.add("esri-mobile",t),n&&u.add("esri-iPhone",n),u.add("esri-geolocation",!!navigator.geolocation)}u.add("esri-canvas-svg-support",!u("trident")),u.add("esri-wasm","WebAssembly"in o.a),u.add("esri-shared-array-buffer",(()=>{const e="SharedArrayBuffer"in o.a,t=!1===o.a.crossOriginIsolated;return e&&!t})),u.add("esri-atomics","Atomics"in o.a),u.add("esri-workers","Worker"in o.a),u.add("esri-text-decoder","TextDecoder"in o.a),u.add("esri-text-encoder","TextEncoder"in o.a),u.add("featurelayer-snapshot-enabled",!0),u.add("featurelayer-snapshot-point-min-threshold",8e4),u.add("featurelayer-snapshot-point-max-threshold",4e5),u.add("featurelayer-snapshot-point-coverage",.1),u.add("featurelayer-advanced-symbols",!1),u.add("featurelayer-pbf",!0),u.add("featurelayer-pbf-statistics",!1),u.add("feature-layers-workers",!0),u.add("mapview-transitions-duration",200),u.add("mapserver-pbf-enabled",!1),u("host-webworker")||u("host-browser")&&(u.add("csp-restrictions",(()=>{try{new Function}catch{return!0}return!1})),u.add("esri-image-decode",(()=>{if("decode"in new Image){const e=new Image;return e.src='data:image/svg+xml;charset=UTF-8,<svg version="1.1" xmlns="http://www.w3.org/2000/svg"></svg>',void e.decode().then((()=>{u.add("esri-image-decode",!0,!0,!0)})).catch((()=>{u.add("esri-image-decode",!1,!0,!0)}))}return!1})),u.add("esri-url-encodes-apostrophe",(()=>{const e=o.a.document.createElement("a");return e.href="?'",e.href.indexOf("?%27")>-1})),u.add("vectortilelayer-max-buffers",(()=>u("ff")?160:Number.POSITIVE_INFINITY)))})(),t.a=u},79:function(e,t,n){"use strict";n(78);var r=n(138),i=n(87),o=n(137);const s={info:0,warn:1,error:2,none:3};class a{constructor(e){this.level=null,this._module="",this._parent=null,this.writer=null,this._loggedMessages={error:new Map,warn:new Map,info:new Map},null!=e.level&&(this.level=e.level),null!=e.writer&&(this.writer=e.writer),this._module=e.module,a._loggers[this.module]=this;const t=this.module.lastIndexOf(".");-1!==t&&(this._parent=a.getLogger(this.module.slice(0,t)))}get module(){return this._module}get parent(){return this._parent}error(...e){this._log("error","always",...e)}warn(...e){this._log("warn","always",...e)}info(...e){this._log("info","always",...e)}errorOnce(...e){this._log("error","once",...e)}warnOnce(...e){this._log("warn","once",...e)}infoOnce(...e){this._log("info","once",...e)}errorOncePerTick(...e){this._log("error","oncePerTick",...e)}warnOncePerTick(...e){this._log("warn","oncePerTick",...e)}infoOncePerTick(...e){this._log("info","oncePerTick",...e)}get test(){const e=this;return{loggedMessages:e._loggedMessages,clearLoggedWarnings:()=>e._loggedMessages.warn.clear()}}static get testSingleton(){return{resetLoggers(e={}){const t=a._loggers;return a._loggers=e,t},set throttlingDisabled(e){a._throttlingDisabled=e}}}static getLogger(e){let t=a._loggers[e];return t||(t=new a({module:e})),t}_log(e,t,...n){if(this._matchLevel(e)){if("always"!==t&&!a._throttlingDisabled){const r=this._argsToKey(n),i=this._loggedMessages[e].get(r);if("once"===t&&null!=i||"oncePerTick"===t&&i&&i>=a._tickCounter)return;this._loggedMessages[e].set(r,a._tickCounter),a._scheduleTickCounterIncrement()}for(const t of r.a.log.interceptors)if(t(e,this.module,...n))return;this._inheritedWriter()(e,this.module,...n)}}_parentWithMember(e,t){let n=this;for(;Object(i.k)(n);){const t=n[e];if(Object(i.k)(t))return t;n=n.parent}return t}_inheritedWriter(){return this._parentWithMember("writer",this._consoleWriter)}_consoleWriter(e,t,...n){console[e](`[${t}]`,...n)}_matchLevel(e){const t=r.a.log.level?r.a.log.level:"warn";return s[this._parentWithMember("level",t)]<=s[e]}_argsToKey(...e){return Object(o.b)(JSON.stringify(e,((e,t)=>"object"!=typeof t||Array.isArray(t)?t:"[Object]")))}static _scheduleTickCounterIncrement(){a._tickCounterScheduled||(a._tickCounterScheduled=!0,Promise.resolve().then((()=>{a._tickCounter++,a._tickCounterScheduled=!1})))}}a._loggers={},a._tickCounter=0,a._tickCounterScheduled=!1,a._throttlingDisabled=!1,t.a=a},826:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(113);const i={readOnly:!0,get(){const e="metric",{view:t}=this;if(!t)return e;const n=t.get("map.portalItem.portal");if(n)switch(n.get("user.units")||n.units){case e:return e;case"english":return"imperial"}return Object(r.d)(t.spatialReference)||e}}},87:function(e,t,n){"use strict";n.d(t,"a",(function(){return f})),n.d(t,"b",(function(){return v})),n.d(t,"c",(function(){return s})),n.d(t,"d",(function(){return w})),n.d(t,"e",(function(){return l})),n.d(t,"f",(function(){return d})),n.d(t,"g",(function(){return y})),n.d(t,"h",(function(){return b})),n.d(t,"i",(function(){return _})),n.d(t,"j",(function(){return i})),n.d(t,"k",(function(){return r})),n.d(t,"l",(function(){return o})),n.d(t,"m",(function(){return m})),n.d(t,"n",(function(){return g})),n.d(t,"o",(function(){return p})),n.d(t,"p",(function(){return h})),n.d(t,"q",(function(){return a})),n.d(t,"r",(function(){return u})),n.d(t,"s",(function(){return c}));function r(e){return null!=e}function i(e){return null==e}function o(e){return void 0===e}function s(e,t){return r(e)?t(e):null}function a(e){return e}function c(e,t){if(i(e))throw new Error(t);return e}function u(e,t){return r(e)?e:"function"==typeof t?t():t}function l(e){return r(e)&&e.destroy(),null}function d(e){return r(e)&&e.dispose(),null}function h(e){return r(e)&&e.remove(),null}function f(e){return r(e)&&e.abort(),null}function p(e){return null}function m(e,t){const n=new Array;for(const r of e)n.push(g(r,null,t));return n}function b(e,t){for(const n of e)g(n,null,t)}function g(e,t,n){return r(e)?n(e):t}function v(e,t){return r(e)?t(e):null}function y(e){return e.filter((e=>r(e)))}function _(e,...t){let n=e,r=0;for(;r<t.length&&n;)n=n[t[r++]];return n}function w(e){return e}},89:function(e,t,n){"use strict";var r=n(90),i=n(79),o=n(399);class s extends o.a{constructor(e,t,n){if(super(e,t,n),!(this instanceof s))return new s(e,t,n)}toJSON(){if(null!=this.details)try{return{name:this.name,message:this.message,details:JSON.parse(JSON.stringify(this.details,((e,t)=>{if(t&&"object"==typeof t&&"function"==typeof t.toJSON)return t;try{return Object(r.a)(t)}catch(s){return"[object]"}})))}}catch(e){throw i.a.getLogger("esri.core.Error").error(e),e}return{name:this.name,message:this.message,details:this.details}}static fromJSON(e){return new s(e.name,e.message,e.details)}}s.prototype.type="error",t.a=s},90:function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return s})),n.d(t,"c",(function(){return i}));n(78);var r=n(291);function i(e,t){let n;if(t)for(n in e)e.hasOwnProperty(n)&&(void 0===e[n]?delete e[n]:e[n]instanceof Object&&i(e[n],!0));else for(n in e)e.hasOwnProperty(n)&&void 0===e[n]&&delete e[n];return e}function o(e){if(!e||"object"!=typeof e||"function"==typeof e)return e;if(Object(r.h)(e)||Object(r.k)(e)||Object(r.l)(e)||Object(r.f)(e)||Object(r.i)(e)||Object(r.g)(e)||Object(r.j)(e)||Object(r.d)(e)||Object(r.e)(e))return Object(r.m)(e);if(e instanceof Date)return new Date(e.getTime());if(e instanceof ArrayBuffer)return e.slice(0,e.byteLength);if(e instanceof Map){const t=new Map;return e.forEach(((e,n)=>{t.set(n,o(e))})),t}if(e instanceof Set){const t=new Set;return e.forEach((e=>{t.add(o(e))})),t}let t;const n=e;if("function"==typeof n.clone)t=n.clone();else if("function"==typeof n.map&&"function"==typeof n.forEach)t=n.map(o);else if("function"==typeof n.notifyChange&&"function"==typeof n.watch)t=n.clone();else{t={};for(const n of Object.getOwnPropertyNames(e))t[n]=o(e[n])}return t}function s(e,t){return e===t||"number"==typeof e&&isNaN(e)&&"number"==typeof t&&isNaN(t)||"function"==typeof(e||{}).getTime&&"function"==typeof(t||{}).getTime&&e.getTime()===t.getTime()||!1}},91:function(e,t,n){"use strict";n.d(t,"a",(function(){return M})),n.d(t,"b",(function(){return a})),n.d(t,"c",(function(){return c})),n.d(t,"d",(function(){return l})),n.d(t,"e",(function(){return u})),n.d(t,"f",(function(){return w})),n.d(t,"g",(function(){return T})),n.d(t,"h",(function(){return E})),n.d(t,"i",(function(){return k})),n.d(t,"j",(function(){return O})),n.d(t,"k",(function(){return j})),n.d(t,"l",(function(){return _})),n.d(t,"m",(function(){return y})),n.d(t,"n",(function(){return f})),n.d(t,"o",(function(){return P})),n.d(t,"p",(function(){return b})),n.d(t,"q",(function(){return g})),n.d(t,"r",(function(){return S})),n.d(t,"s",(function(){return x})),n.d(t,"t",(function(){return p})),n.d(t,"u",(function(){return d})),n.d(t,"v",(function(){return m})),n.d(t,"w",(function(){return C})),n.d(t,"x",(function(){return v}));var r=n(87),i=(n(79),n(89)),o=n(455),s=n(184);function a(e){return Promise.all(e)}function c(e){return new Promise(((t,n)=>{try{e(t,n)}catch(r){Promise.resolve().then((()=>n(r)))}}))}function u(e="Aborted"){return new i.a("AbortError",e)}function l(){return new AbortController}function d(e){if(f(e))throw u()}function h(e){return Object(r.k)(e)?"aborted"in e?e:e.signal:e}function f(e){const t=h(e);return Object(r.k)(t)&&t.aborted}function p(e){if(y(e))throw e}function m(e){if(!y(e))throw e}function b(e,t){const n=h(e);if(!Object(r.j)(n)){if(!n.aborted)return Object(s.d)(n,"abort",(()=>t()));t()}}function g(e,t){const n=h(e);if(!Object(r.j)(n))return d(n),Object(s.d)(n,"abort",(()=>t(u())))}function v(e,t){const n=h(t);return Object(r.j)(n)?e:new Promise(((n,i)=>{let o=b(t,(()=>i(u())));const s=()=>o=Object(r.p)(o);e.then(s,s),e.then(n,i)}))}function y(e){return e&&"AbortError"===e.name}function _(e){return e.catch((e=>{if(!y(e))throw e}))}function w(){let e=null;const t=new Promise(((t,n)=>{e={promise:void 0,resolve:t,reject:n}}));return e.promise=t,e}function O(e){if(!e)return;if("function"!=typeof e.forEach){const t=Object.keys(e);return O(t.map((t=>e[t]))).then((e=>{const n={};return t.forEach(((t,r)=>n[t]=e[r])),n}))}const t=e;return Promise.allSettled(t).then((e=>Array.from(t,((t,n)=>{const r=e[n];return"fulfilled"===r.status?{promise:t,value:r.value}:{promise:t,error:r.reason}}))))}function j(e){return O(e).then((e=>e.filter((e=>!!e.value)).map((e=>e.value))))}function S(e){return Promise.reject(e)}function x(e){return Promise.resolve(e)}function M(e,t,n){const r=l();return b(n,(()=>r.abort())),new Promise(((n,i)=>{let o=setTimeout((()=>{o=0,n(t)}),e);b(r,(()=>{o&&(clearTimeout(o),i(u()))}))}))}function P(e){return e&&"function"==typeof e.then}function C(e){return e&&"object"==typeof e&&"then"in e&&"function"==typeof e.then?e:Promise.resolve(e)}function k(e,t=-1){let n,i,o,s,a=null;const c=(...d)=>{if(n){i=d,s&&s.reject(u()),s=w();const e=Object(r.d)(s.promise);if(a){const e=a;a=null,e.abort()}return e}if(o=s||w(),s=null,t>0){const r=l();n=C(e(...d,r.signal));const i=n;M(t).then((()=>{n===i&&(s?r.abort():a=r)}))}else n=1,n=C(e(...d));const h=()=>{const e=i;i=o=n=a=null,null!=e&&c(...e)},f=n,p=o;return f.then(h,h),f.then(p.resolve,p.reject),Object(r.d)(p.promise)};return c}function T(){let e,t;const n=new Promise(((n,r)=>{e=n,t=r})),r=t=>{e(t)};return r.resolve=t=>e(t),r.reject=e=>t(e),r.timeout=(e,t)=>o.a.setTimeout((()=>r.reject(t)),e),r.promise=n,r}function E(e){let t=l();const n=e(t.signal);let r={promise:n,finished:!1,abort:()=>{t&&(t.abort(),t=null)}};const i=()=>{r&&(r.finished=!0,r=null),t=null};return n.then(i,i),r}}}]);
//# sourceMappingURL=93.29413821.chunk.js.map