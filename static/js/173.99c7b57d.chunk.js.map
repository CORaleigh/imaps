{"version":3,"sources":["Components/Shell/utils/shell.ts","Components/Shell/Shell.tsx"],"names":["panelDismissedChange","e","target","parentElement","collapsed","dismissed","actionClicked","action","actions","isTool","innerWidth","forEach","a","isActive","deactivateActions","shellPanel","removeAttribute","setAttribute","windowResize","width","setWidth","setActions","document","querySelectorAll","button","find","title","getAttribute","window","querySelector","MapView","lazy","Header","TipManager","PropertyPanel","LocationSearch","Layers","Basemaps","Legend","PropertySelect","Measure","Sketch","Bookmarks","Print","Shell","tips","setTips","useState","tipsTitle","setTipsTitle","view","setView","viewCreated","setViewCreated","selectedProperties","setSelectedProperties","selectedFeature","setSelectedFeature","theme","setTheme","useContext","ThemeContext","sketchVM","useRef","selectVM","measurement","ActionContext","featureSelected","feature","attributes","geometry","container","getElementById","ReactDOM","render","fallback","geometrySet","geometryChanged","toolActivated","selectActivated","activatePropertySearch","active","search","closest","hidden","shell","propertiesSelected","properties","length","sketchToolActivated","sketchViewModel","current","cancel","viewModel","activeViewModel","clear","measurementActivated","measurementTool","showTips","text","label","slot","icon","appearance","scale","calcite-hydrated","onClick","renderWidget","hasChildNodes","useEffect","panel","addEventListener","matchMedia","matches","body","classList","remove","add","link","Array","from","head","href","includes","appendChild","undefined","newTheme","localStorage","setItem","updateTheme","getItem","shadowRoot","removeEventListener","className","position","width-scale","map","name","disabled","requestAnimationFrame","aria-label","id","async","links","initialized","mapView","closed","tipsDismissed"],"mappings":"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","file":"static/js/173.99c7b57d.chunk.js","sourcesContent":["/* eslint-disable @typescript-eslint/explicit-module-boundary-types */\n\nimport React from 'react';\n\n/* eslint-disable @typescript-eslint/no-explicit-any */\nconst panelDismissedChange = (e: Event) => {\n  const shellPanel = (e.target as HTMLElement)?.parentElement;\n  (shellPanel as HTMLCalciteShellPanelElement).collapsed = (e.target as HTMLCalcitePanelElement)?.dismissed;\n};\n\nexport const initialized = (): void => {\n  const panels = document.querySelectorAll('calcite-panel');\n  panels.forEach((panel) => {\n    panel?.addEventListener('calcitePanelDismissedChange', panelDismissedChange);\n  });\n};\n\nexport const deactivate = (): void => {\n  const panels = document.querySelectorAll('calcite-panel');\n  panels.forEach((panel) => {\n    panel?.removeEventListener('calcitePanelDismissedChange', panelDismissedChange);\n  });\n};\nconst deactivateActions = (actions: any[], isTool: boolean): void => {\n  if (innerWidth < 1000) {\n    actions.forEach((a) => {\n      a.isActive = false;\n    });\n  } else {\n    if (isTool) {\n      actions.forEach((a) => {\n        a.isActive = a.isActive && !a.isTool;\n      });\n    } else {\n      actions.forEach((a) => {\n        a.isActive = a.isActive && a.isTool;\n      });\n    }\n  }\n};\nexport const actionClicked = (e: any, action: any, actions: any[]): any[] => {\n  deactivateActions(actions, action.isTool);\n  action.isActive = true;\n  const shellPanel = (e.target as HTMLElement)?.parentElement?.parentElement;\n  if (!action.isActive) {\n    shellPanel?.setAttribute('collapsed', '');\n  } else {\n    shellPanel?.removeAttribute('collapsed');\n  }\n  return actions;\n};\n\nexport const updateTheme = (theme: string, setTheme: React.Dispatch<string>) => {\n  if (theme) {\n    if (theme === 'dark') {\n      setTheme('dark');\n    }\n    if (theme === 'light') {\n      setTheme('light');\n    }\n  } else {\n    if (window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches) {\n      theme = 'dark';\n      setTheme('dark');\n    } else {\n      theme = 'light';\n      setTheme('light');\n    }\n  }\n  document.body.classList.remove(theme === 'light' ? 'dark' : 'light');\n  document.body.classList.add(theme === 'light' ? 'light' : 'dark');\n\n  const link = Array.from(document.head.querySelectorAll('link')).find((link: HTMLLinkElement) => {\n    return link.href.includes(`${theme}/main.css`);\n  });\n  if (link) {\n    document.head.appendChild(link);\n  }\n\n  if (window.matchMedia != undefined) {\n    window.matchMedia('(prefers-color-scheme: dark)')?.addEventListener('change', (e) => {\n      const newTheme = e.matches ? 'dark' : 'light';\n      setTheme(newTheme);\n      window.localStorage.setItem('imaps_theme', newTheme);\n      document.body.classList.remove(newTheme === 'light' ? 'dark' : 'light');\n      document.body.classList.add(newTheme === 'light' ? 'light' : 'dark');\n      const link = Array.from(document.head.querySelectorAll('link')).find((link: HTMLLinkElement) => {\n        return link.href.includes(`${newTheme}/main.css`);\n      });\n      if (link) {\n        document.head.appendChild(link);\n      }\n    });\n  }\n};\n\nexport const windowResize = (\n  actions: any[],\n  width: number,\n  setWidth: React.Dispatch<number>,\n  setActions: React.Dispatch<any[]>,\n) => {\n  const activeActions = document.querySelectorAll('calcite-action[active]');\n  activeActions.forEach((button) => {\n    const action = actions.find((action) => {\n      return action.title === button.getAttribute('text');\n    });\n    if (window.innerWidth >= 1000 && action?.isActive && width < 1000) {\n      if (action.isTool) {\n        (document.querySelector('calcite-shell-panel[slot=contextual-panel]') as HTMLElement)?.setAttribute(\n          'collapsed',\n          '',\n        );\n        action.isActive = false;\n      }\n    }\n    if (window.innerWidth < 1000 && action?.isActive && width >= 1000) {\n      if (action.isTool) {\n        (document.querySelector('calcite-shell-panel[slot=primary-panel]') as HTMLElement)?.removeAttribute(\n          'collapsed',\n        );\n        action.isActive = false;\n      } else {\n        (document.querySelector('calcite-shell-panel[slot=contextual-panel]') as HTMLElement)?.removeAttribute(\n          'collapsed',\n        );\n      }\n    }\n  });\n  setWidth(window.innerWidth);\n\n  setActions([...actions]);\n};\n","/* eslint-disable @typescript-eslint/explicit-module-boundary-types */\n/* eslint-disable @typescript-eslint/no-explicit-any */\nimport React, { useContext, useEffect, useState, lazy, Suspense, useRef } from 'react';\nimport ReactDOM from 'react-dom';\nconst MapView = lazy(() => {\n  return import('../MapView/MapView');\n});\nconst Header = lazy(() => {\n  return import('../Header/Header');\n});\nconst TipManager = lazy(() => {\n  return import('../TipManager/TipManager');\n});\nconst PropertyPanel = lazy(() => import('../PropertyPanel/PropertyPanel'));\nconst LocationSearch = lazy(() => import('../LocationSearch/LocationSearch'));\nconst Layers = lazy(() => import('../Layers/Layers'));\nconst Basemaps = lazy(() => import('../Basemaps/Basemaps'));\nconst Legend = lazy(() => import('../Legend/Legend'));\nconst PropertySelect = lazy(() => import('../PropertySelect/PropertySelect'));\nconst Measure = lazy(() => import('../Measure/Measure'));\nconst Sketch = lazy(() => import('../Sketch/Sketch'));\nconst Bookmarks = lazy(() => import('../Bookmarks/Bookmarks'));\nconst Print = lazy(() => import('../Print/Print'));\nimport './Shell.scss';\nimport { actionClicked, deactivate, initialized, updateTheme, windowResize } from './utils/shell';\nimport ThemeContext from '../ThemeContext';\nimport { links } from '../../config/config';\nimport ActionContext from '../ActionContext';\n\nexport const Shell = () => {\n  const [tips, setTips] = useState<any>([]);\n  const [tipsTitle, setTipsTitle] = useState<string>();\n\n  const [width, setWidth] = useState(window.innerWidth);\n  const [view, setView] = useState<__esri.MapView | null>(null);\n  const [viewCreated, setViewCreated] = useState(false);\n  const [selectedProperties, setSelectedProperties] = useState<__esri.Graphic[]>([]);\n  const [selectedFeature, setSelectedFeature] = useState<any>();\n  const { theme, setTheme } = useContext(ThemeContext);\n  //define sketch tools to handle deactivating other sketch tools\n  const sketchVM = useRef<__esri.SketchViewModel>();\n  const selectVM = useRef<__esri.SketchViewModel>();\n  const measurement = useRef<__esri.Measurement>();\n\n  const { actions, setActions } = useContext(ActionContext);\n\n  //when feature is selected update featureSelected state and render PropertySelect\n  const featureSelected = (feature: __esri.Graphic | undefined) => {\n    setSelectedFeature({ ...selectedFeature, ...{ attributes: feature?.attributes, geometry: feature?.geometry } });\n    const action = actions.find((action) => {\n      return action.title === 'Property Select';\n    });\n    if (action && view) {\n      const container = document.getElementById(action?.container);\n      if (container) {\n        debugger;\n        ReactDOM.render(\n          <Suspense fallback={''}>\n            <PropertySelect\n              view={view}\n              selectedFeature={feature}\n              geometrySet={geometryChanged}\n              toolActivated={selectActivated}\n            />\n          </Suspense>,\n          container,\n        );\n      }\n    }\n  };\n  //activate PropertySearch on load and on geometry updates\n  const activatePropertySearch = (): HTMLElement => {\n    const active = actions.find((action) => {\n      return action.isActive;\n    });\n    if (active) {\n      active.isActive = false;\n    }\n    const search = actions.find((action) => {\n      return action.title === 'Property Search';\n    });\n\n    if (search) {\n      search.isActive = true;\n    }\n    const container = document.getElementById(search?.container as string);\n    if (container) {\n      const panel: HTMLDivElement = container?.closest('.action-panel') as HTMLDivElement;\n      panel.hidden = false;\n      const shell = container?.closest('calcite-shell-panel');\n      shell?.removeAttribute('collapsed');\n    }\n    return container as HTMLElement;\n  };\n\n  const propertiesSelected = (properties: __esri.Graphic[]) => {\n    setSelectedProperties([...selectedProperties, ...properties]);\n    if (properties.length > 1) {\n      setSelectedFeature({ ...selectedFeature, ...{ attributes: null } });\n    }\n    const container = activatePropertySearch();\n\n    ReactDOM.render(\n      <Suspense fallback={''}>\n        <PropertyPanel\n          propertiesSelected={propertiesSelected}\n          featureSelected={featureSelected}\n          selectedProperties={properties}\n        />\n      </Suspense>,\n      container,\n    );\n\n    setActions([...[], ...actions]);\n  };\n\n  //deactivate other sketch tools\n  const sketchToolActivated = (sketchViewModel: __esri.SketchViewModel) => {\n    sketchVM.current = sketchViewModel;\n    selectVM.current?.cancel();\n    measurement.current?.viewModel.activeViewModel.clear();\n  };\n  const measurementActivated = (measurementTool: __esri.Measurement) => {\n    measurement.current = measurementTool;\n    sketchVM.current?.cancel();\n    selectVM.current?.cancel();\n  };\n  const selectActivated = (sketchViewModel: __esri.SketchViewModel) => {\n    selectVM.current = sketchViewModel;\n    sketchVM.current?.cancel();\n    measurement.current?.viewModel.activeViewModel.clear();\n  };\n\n  //reset tips when dismissed\n  const tipsDismissed = () => {\n    setTips([]);\n    setTipsTitle('');\n  };\n  //render Tips action\n  const showTips = () => {\n    const action = actions.find((action: any) => {\n      return action.isActive;\n    });\n    return action?.tips?.length ? (\n      <calcite-action\n        text=\"Action\"\n        label=\"Action\"\n        slot=\"header-actions-end\"\n        icon=\"lightbulb\"\n        appearance=\"solid\"\n        scale=\"m\"\n        calcite-hydrated=\"\"\n        onClick={() => {\n          setTips([...tips, ...action.tips]);\n          setTipsTitle(action.title);\n        }}\n      ></calcite-action>\n    ) : (\n      ''\n    );\n  };\n\n  //after map has initiliazed\n  const mapInitialized = async (mapView: __esri.MapView) => {\n    if (!viewCreated) {\n      setView(mapView);\n      setViewCreated(true);\n      const container = document.getElementById('propertySearch');\n      if (mapView.map) {\n        ReactDOM.render(\n          <Suspense fallback={''}>\n            <PropertyPanel\n              view={mapView}\n              propertiesSelected={propertiesSelected}\n              featureSelected={featureSelected}\n              selectedProperties={selectedProperties}\n              toolActivated={selectActivated}\n            />\n          </Suspense>,\n          container,\n        );\n      }\n    }\n  };\n\n  //update PropertyPanel geometry when geometry is updated by MapView or PropertySelect\n  const geometryChanged = (geometry: __esri.Geometry) => {\n    const container = activatePropertySearch();\n    ReactDOM.render(\n      <Suspense fallback={''}>\n        <PropertyPanel\n          geometry={geometry}\n          propertiesSelected={propertiesSelected}\n          selectedProperties={selectedProperties}\n          featureSelected={featureSelected}\n          selectedFeature={selectedFeature}\n        />\n      </Suspense>,\n      container,\n    );\n  };\n\n  //render widgets as they become active\n  const renderWidget = (action: any) => {\n    if (action) {\n      const container = document.getElementById(action.container);\n\n      if (!container?.hasChildNodes()) {\n        if (action.title === 'Property Search') {\n          ReactDOM.render(\n            <Suspense fallback={''}>\n              <PropertyPanel\n                view={view}\n                propertiesSelected={propertiesSelected}\n                featureSelected={featureSelected}\n                selectedProperties={selectedProperties}\n              />\n            </Suspense>,\n            container,\n          );\n        }\n        if (action.title === 'Location Search') {\n          ReactDOM.render(\n            <Suspense fallback={''}>\n              <LocationSearch view={view} />\n            </Suspense>,\n            container,\n          );\n        }\n        if (action.title === 'Layers') {\n          ReactDOM.render(\n            <Suspense fallback={''}>\n              <Layers view={view} />\n            </Suspense>,\n            container,\n          );\n        }\n        if (action.title === 'Basemaps') {\n          ReactDOM.render(\n            <Suspense fallback={''}>\n              <Basemaps view={view} />\n            </Suspense>,\n            container,\n          );\n        }\n        if (action.title === 'Legend') {\n          ReactDOM.render(\n            <Suspense fallback={''}>\n              <Legend view={view} />\n            </Suspense>,\n            container,\n          );\n        }\n        if (action.title === 'Property Select') {\n          ReactDOM.render(\n            <Suspense fallback={''}>\n              <PropertySelect\n                view={view}\n                geometrySet={geometryChanged}\n                selectedFeature={selectedFeature}\n                toolActivated={selectActivated}\n              />\n            </Suspense>,\n            container,\n          );\n        }\n        if (action.title === 'Measure') {\n          ReactDOM.render(\n            <Suspense fallback={''}>\n              <Measure view={view} measurementActivated={measurementActivated} />\n            </Suspense>,\n            container,\n          );\n        }\n        if (action.title === 'Sketch') {\n          ReactDOM.render(\n            <Suspense fallback={''}>\n              <Sketch view={view} toolActivated={sketchToolActivated} />{' '}\n            </Suspense>,\n            container,\n          );\n        }\n        if (action.title === 'Bookmarks') {\n          ReactDOM.render(\n            <Suspense fallback={''}>\n              <Bookmarks view={view} />{' '}\n            </Suspense>,\n            container,\n          );\n        }\n        if (action.title === 'Print') {\n          ReactDOM.render(\n            <Suspense fallback={''}>\n              <Print view={view} />{' '}\n            </Suspense>,\n            container,\n          );\n        }\n      }\n    }\n  };\n  useEffect(() => {\n    initialized();\n    const theme = window.localStorage.getItem('imaps_theme') as string;\n    updateTheme(theme, setTheme);\n\n    window.addEventListener('resize', () => {\n      windowResize(actions, width, setWidth, setActions);\n    });\n    document\n      .querySelector('calcite-shell-panel')\n      ?.shadowRoot?.querySelector('.content')\n      ?.setAttribute('style', 'width: calc(var(--calcite-panel-width-multiplier) * 100vw) !important;');\n\n    return () => {\n      window.removeEventListener('resize', () => {\n        windowResize(actions, width, setWidth, setActions);\n      });\n      deactivate();\n    };\n  }, [actions]);\n  return (\n    <div>\n      <calcite-shell theme={theme} className=\"shell\">\n        {width >= 1000 ? (\n          <calcite-shell-panel slot=\"primary-panel\" position=\"start\" width-scale=\"l\" collapsed>\n            <calcite-action-bar slot=\"action-bar\">\n              {actions.map((action: any) => {\n                if (action.isTool) {\n                  return (\n                    <calcite-action\n                      key={action.icon}\n                      name={action.container}\n                      text={action.title}\n                      icon={action.icon}\n                      disabled={!viewCreated ? '' : null}\n                      onClick={(e: any) => {\n                        setActions([...actionClicked(e, action, actions)]);\n                        requestAnimationFrame(() => {\n                          renderWidget(action);\n                        });\n                      }}\n                      active={action.isActive === true ? '' : null}\n                    ></calcite-action>\n                  );\n                }\n              })}\n            </calcite-action-bar>\n            {actions.map((action: any) => {\n              if (action.isTool && action.isActive) {\n                return (\n                  <div className=\"panel-header\" key={`${action.icon}_header`}>\n                    <div className=\"panel-title\">{action.title}</div>\n                    <div className=\"header-actions\">\n                      {showTips()}\n                      <calcite-action\n                        aria-label=\"Close\"\n                        appearance=\"solid\"\n                        scale=\"m\"\n                        calcite-hydrated=\"\"\n                        icon=\"x\"\n                        onClick={() => {\n                          document\n                            ?.querySelector('calcite-shell-panel[slot=primary-panel]')\n                            ?.setAttribute('collapsed', '');\n                          action.isActive = false;\n\n                          setActions([...actions]);\n                        }}\n                      ></calcite-action>\n                    </div>\n                  </div>\n                );\n              }\n            })}\n            {actions.map((action: any) => {\n              if (action.isTool && action.isActive) {\n                return (\n                  <div\n                    id={action.container}\n                    className=\"action-panel\"\n                    key={action.container}\n                    hidden={!action.isActive}\n                  ></div>\n                );\n              }\n            })}\n          </calcite-shell-panel>\n        ) : (\n          ''\n        )}\n\n        <calcite-shell-panel slot=\"contextual-panel\" position=\"end\" width-scale=\"l\">\n          <calcite-action-bar slot=\"action-bar\">\n            {actions.map((action: any) => {\n              if (!action.isTool || width < 1000) {\n                return (\n                  <calcite-action\n                    key={action.icon}\n                    text={action.title}\n                    name={action.container}\n                    icon={action.icon}\n                    disabled={!viewCreated ? '' : null}\n                    onClick={async (e: any) => {\n                      setActions([...actionClicked(e, action, actions)]);\n                      requestAnimationFrame(() => {\n                        renderWidget(action);\n                      });\n                    }}\n                    active={action.isActive === true ? '' : null}\n                  ></calcite-action>\n                );\n              }\n            })}\n          </calcite-action-bar>\n          {actions.map((action: any) => {\n            if ((!action.isTool || width < 1000) && action.isActive) {\n              return (\n                <div className=\"panel-header\" key={`${action.icon}_header`}>\n                  <div className=\"panel-title\">{action.title}</div>\n                  <div className=\"header-actions\">\n                    {showTips()}\n                    <calcite-action\n                      aria-label=\"Close\"\n                      appearance=\"solid\"\n                      scale=\"m\"\n                      calcite-hydrated=\"\"\n                      icon=\"x\"\n                      onClick={() => {\n                        document\n                          ?.querySelector('calcite-shell-panel[slot=contextual-panel]')\n                          ?.setAttribute('collapsed', '');\n                        action.isActive = false;\n\n                        setActions([...actions]);\n                      }}\n                    ></calcite-action>\n                  </div>\n                </div>\n              );\n            }\n          })}\n          {actions.map((action: any) => {\n            if (!action.isTool || width < 1000) {\n              return (\n                <div\n                  className=\"action-panel\"\n                  id={action.container}\n                  key={action.container}\n                  hidden={!action.isActive}\n                ></div>\n              );\n            }\n          })}\n        </calcite-shell-panel>\n\n        <div slot=\"shell-header\">\n          <Suspense fallback={''}>\n            <Header links={links} />\n          </Suspense>\n        </div>\n        <Suspense fallback={''}>\n          <MapView\n            id=\"95092428774c4b1fb6a3b6f5fed9fbc4\"\n            initialized={mapInitialized}\n            geometryChanged={geometryChanged}\n            selectedProperties={selectedProperties}\n            selectedFeature={selectedFeature}\n          />\n        </Suspense>\n      </calcite-shell>\n      <Suspense fallback={''}>\n        <TipManager tips={tips} title={tipsTitle} closed tipsDismissed={tipsDismissed} />\n      </Suspense>\n    </div>\n  );\n};\nexport default Shell;\n"],"sourceRoot":""}