(this.webpackJsonpimaps=this.webpackJsonpimaps||[]).push([[183],{127:function(e,t,n){"use strict";n.d(t,"a",(function(){return c})),n.d(t,"b",(function(){return i}));var r=n(103),s=n(88),o=n(374),a=n(191),l=n(278);function i(e,t,n,r){const i=function(e,t,n){if(!e)return null;if(n&&"web-scene"===n.origin&&!(e instanceof o.a)&&!(e instanceof a.a)){const r="cim"!==e.type?Object(l.a)(e):{symbol:null,error:new s.a("symbol-conversion:unsupported-cim-symbol","CIM symbol is unsupported in web scenes",{symbol:e})};return r.symbol?r.symbol.write(t,n):(n.messages&&n.messages.push(new s.a("symbol:unsupported",`Symbols of type '${e.declaredClass}' are not supported in scenes. Use 3D symbology instead when working with WebScene and SceneView`,{symbol:e,context:n,error:r.error})),null)}return n&&"web-map"===n.origin&&"web-style"===e.type?(n.messages&&n.messages.push(new s.a("symbol:unsupported",`Symbols of type '${e.declaredClass}' are not supported in webmaps. Use CIMSymbol instead when working with WebMap in MapView.`,{symbol:e,context:n})),null):e.write(t,n)}(e,{},r);i&&(t[n]=i)}function c(e,t){return Object(r.d)(e,null,t)}},278:function(e,t,n){"use strict";n.d(t,"a",(function(){return p}));var r=n(103),s=n(88),o=n(191),a=n(387),l=n(183),i=n(398),c=n(235),m=n(349),u=n(172),y=n(276),f=n(270),b=n(397);function p(e,t=!1,n=!1,p=!0){if(!e)return{symbol:null};let d;if(Object(r.c)(e)||e instanceof o.a)d=e.clone();else if("cim"===e.type)d=a.a.fromCIMSymbol(e);else if(e instanceof l.a)d=i.a.fromSimpleLineSymbol(e);else if(e instanceof c.a)d=a.a.fromSimpleMarkerSymbol(e);else if(e instanceof m.a)d=a.a.fromPictureMarkerSymbol(e);else if(e instanceof u.a)d=y.a.fromSimpleFillSymbol(e);else{if(!(e instanceof f.a))return{error:new s.a("symbol-conversion:unsupported-2d-symbol",`2D symbol of type '${e.type||e.declaredClass}' is unsupported in 3D`,{symbol:e})};d=p?b.a.fromTextSymbol(e):a.a.fromTextSymbol(e)}if(t&&(d.id=e.id),n&&Object(r.c)(d))for(let r=0;r<d.symbolLayers.length;++r)d.symbolLayers.getItemAt(r)._ignoreDrivers=!0;return{symbol:d}}},280:function(e,t,n){"use strict";n.r(t),n.d(t,"fetchStyle",(function(){return w})),n.d(t,"fetchSymbolFromStyle",(function(){return g})),n.d(t,"resolveWebStyleSymbol",(function(){return h})),n.d(t,"styleNameFromItem",(function(){return S}));var r=n(101),s=n(103),o=n(285),a=n(88),l=n(98),i=n(180),c=n(314),m=n(79);var u=n(131),y=n(127),f=n(415),b=n(407);const p={};function d(e,t,n){const r=t.portal||i.a.getDefault();let s;const o=`${r.url} - ${r.user&&r.user.username} - ${e}`;return p[o]||(p[o]=function(e,t,n){return t.load(n).then((()=>{const r=new c.a({disableExtraQuery:!0,query:`owner:${$} AND type:${v} AND typekeywords:"${e}"`});return t.queryItems(r,n)})).then((({results:t})=>{let r=null;const s=e.toLowerCase();if(t&&Array.isArray(t))for(const e of t)if(e.typeKeywords.some((e=>e.toLowerCase()===s))&&e.type===v&&e.owner===$){r=e;break}if(!r)throw new a.a("symbolstyleutils:style-not-found",`The style '${e}' could not be found`,{styleName:e});return r.load(n)}))}(e,r,n).then((e=>(s=e,e.fetchData()))).then((t=>({data:t,baseUrl:s.itemUrl,styleName:e})))),p[o]}function w(e,t,n){return e.styleUrl?function(e,t){return O(e,t).then((t=>({data:t.data,baseUrl:Object(l.G)(e),styleUrl:e})))}(e.styleUrl,n):e.styleName?d(e.styleName,t,n):Promise.reject(new a.a("symbolstyleutils:style-url-and-name-missing","Either styleUrl or styleName is required to resolve a style"))}function h(e,t,n,r){return e.name?e.styleName&&"Esri2DPointSymbolsStyle"===e.styleName?function(e,t,n){const r=N.replace(/\{SymbolName\}/gi,e.name);return O(r,n).then((e=>{const n=j(e.data);return Object(y.a)(n,{portal:t.portal,url:Object(l.K)(Object(l.G)(r)),origin:"portal-item"})}))}(e,t,r):w(e,t,r).then((s=>g(s,e.name,t,n,r))):Promise.reject(new a.a("symbolstyleutils:style-symbol-reference-name-missing","Missing name in style symbol reference"))}function g(e,t,n,r,i){const c=e.data,p={portal:n.portal,url:Object(l.K)(e.baseUrl),origin:"portal-item"},d=c.items.find((e=>e.name===t));if(!d){const e=`The symbol name '${t}' could not be found`;return Promise.reject(new a.a("symbolstyleutils:symbol-name-not-found",e,{symbolName:t}))}let w=Object(u.a)(function(e,t){if("cimRef"===t)return e.cimRef;if(e.formatInfos&&!Object(m.a)("enable-feature:force-wosr"))for(const n of e.formatInfos)if("gltf"===n.type)return n.href;return e.webRef}(d,r),p),h=d.thumbnail&&d.thumbnail.href;const g=d.thumbnail&&d.thumbnail.imageData;Object(o.b)()&&(w=Object(o.a)(w),h=Object(o.a)(h));const S={portal:n.portal,url:Object(l.K)(Object(l.G)(w)),origin:"portal-item"};return O(w,i).then((o=>{const a="cimRef"===r?j(o.data):o.data,l=Object(y.a)(a,S);if(l&&Object(s.c)(l)){if(h){const e=Object(u.a)(h,p);l.thumbnail=new b.a({url:e})}else g&&(l.thumbnail=new b.a({url:`data:image/png;base64,${g}`}));e.styleUrl?l.styleOrigin=new f.a({portal:n.portal,styleUrl:e.styleUrl,name:t}):e.styleName&&(l.styleOrigin=new f.a({portal:n.portal,styleName:e.styleName,name:t}))}return l}))}function j(e){return null===e||"CIMSymbolReference"===e.type?e:{type:"CIMSymbolReference",symbol:e}}function S(e){for(const t of e.typeKeywords)if(/^Esri.*Style$/.test(t)&&"Esri Style"!==t)return t}function O(e,t){const n={responseType:"json",query:{f:"json"},...t};return Object(r.default)(Object(l.D)(e),n)}const $="esri_en",v="Style",N="https://cdn.arcgis.com/sharing/rest/content/items/220936cc6ed342c9937abd8f180e7d1e/resources/styles/cim/{SymbolName}.json?f=json"},285:function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return s}));var r=n(135);function s(e){return e=e||r.a.location.hostname,m.some((t=>{var n;return null!=(null==(n=e)?void 0:n.match(t))}))}function o(e,t){return e&&(t=t||r.a.location.hostname)?null!=t.match(a)||null!=t.match(i)?e.replace("static.arcgis.com","staticdev.arcgis.com"):null!=t.match(l)||null!=t.match(c)?e.replace("static.arcgis.com","staticqa.arcgis.com"):e:e}const a=/^devext.arcgis.com$/,l=/^qaext.arcgis.com$/,i=/^[\w-]*\.mapsdevext.arcgis.com$/,c=/^[\w-]*\.mapsqa.arcgis.com$/,m=[/^([\w-]*\.)?[\w-]*\.zrh-dev-local.esri.com$/,a,l,/^jsapps.esri.com$/,i,c]}}]);
//# sourceMappingURL=183.de182658.chunk.js.map