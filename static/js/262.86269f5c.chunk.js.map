{"version":3,"sources":["../node_modules/@arcgis/core/core/Handles.js","../node_modules/@arcgis/core/layers/support/TileMatrixSet.js","../node_modules/@arcgis/core/layers/support/WMTSStyle.js","../node_modules/@arcgis/core/layers/support/WMTSSublayer.js","../node_modules/@arcgis/core/layers/support/wmtsUtils.js","../node_modules/@arcgis/core/layers/WMTSLayer.js"],"names":["h","o","constructor","r","super","this","_groups","Map","destroy","removeAll","forEach","e","length","add","_isHandle","Array","isArray","i","isCollection","s","_getOrCreateGroup","push","notifyChange","_getGroup","has","_ensureGroupKey","remove","_deleteGroup","clear","set","get","delete","readOnly","prototype","u","t","p","l","fullExtent","id","tileInfo","clone","hasOwnProperty","type","json","read","source","String","n","title","description","legendUrl","isDefault","keywords","slice","m","imageFormats","layer","styles","tileMatrixSetId","tileMatrixSets","_get","_set","readFullExtent","fromJSON","indexOf","console","error","getItemAt","find","imageFormat","styleId","ofType","value","write","ignoreOrigin","a","c","replace","DOMParser","parseFromString","documentElement","d","T","M","querySelector","getElementsByTagName","call","w","url","y","serviceMode","S","some","x","attributes","nodeValue","getAttribute","E","substring","V","g","b","f","C","copyright","layers","map","formats","tileUrl","layerMap","dimensionMap","nodeType","Node","ELEMENT_NODE","childNodes","nodeName","textContent","split","dimensions","dimensions2","toLowerCase","template","format","resourceType","xmin","parseFloat","ymin","xmax","ymax","spatialReference","wkid","abstract","parseInt","pop","Number","N","resolution","toJSON","dpi","size","origin","lods","O","level","levelValue","scale","values","Math","PI","metersPerDegree","Set","_","L","v","_sublayersHandles","customParameters","customLayerParameters","operationalLayerType","resourceInfo","sublayers","version","watch","on","item","normalizeCtorArgs","load","addResolvingPromise","loadFromPortal","supportedTypes","then","_fetchService","catch","Promise","resolve","readActiveLayerFromService","activeLayer","readActiveLayerFromItemOrWebDoc","templateUrl","wmtsInfo","_getLowerCasedUrlParams","layerIdentifier","tileMatrixSet","style","writeActiveLayer","getUrlTemplate","readCustomParameters","_mergeParams","readServiceMode","readSublayersFromService","toArray","_override","_clearOverride","substr","createWebTileLayer","_getTileMatrixSetById","I","urlTemplate","fetchTile","getTileUrl","responseType","data","findSublayerById","P","_appendCustomLayerParameters","ssl","_getCapabilities","j","_getCapabilitiesUrl","_appendCustomParameters","encodeURIComponent","query","Object","keys","origins","target","service","R"],"mappings":"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,MAAM,CAAC,KAAK,MAAM,CAAC,KAAK,MAAM,CAAC,KAAK,MAAM,CAAC,KAAK,MAAM,CAAC,KAAK,MAAM,CAAC,KAAK,MAAM,CAAC,KAAK,MAAM,CAAC,KAAK,MAAM,CAAC,KAAK,MAAM,CAAC,KAAK,MAAM,CAAC,KAAK,MAAM,CAAC,KAAK,MAAM,CAAC,KAAK,MAAM,CAAC,KAAK,MAAM,CAAC,KAAK,MAAM,CAAC,KAAK,MAAM,CAAC,KAAK,MAAM,CAAC,KAAK,MAAM,CAAC,KAAK,MAAM,CAAC,KAAK,MAAM,CAAC,KAAK,MAAM,CAAC,KAAK,MAAM,CAAC,KAAK,MAAM,CAAC,KAAK,MAAM,CAAC,KAAK,MAAM,CAAC,KAAK,MAAM,CAAC,KAAK,MAAM,CAAC,KAAK,MAAM,CAAC,KAAK,MAAM,CAAC,KAAK,MAAM,CAAC,KAAK,MAAM,CAAC,KAAK,MAAM,CAAC,KAAK,MAAM,CAAC,KAAK,MAAM,CAAC,KAAK,MAAM,CAAC,KAAK,MAAM,CAAC,KAAK,MAAM,CAAC,KAAK,MAAM,CAAC,KAAK,MAAM,CAAC,KAAK,MAAM,CAAC,KAAK,MAAM,CAAC,KAAK,MAAM,CAAC,KAAK,MAAM,CAAC,KAAK,MAAM,CAAC,KAAK,MAAM,CAAC,KAAK,MAAM,CAAC,KAAK,MAAM,CAAC,KAAK,MAAM,CAAC,KAAK,MAAM,CAAC,KAAK,MAAM,CAAC,KAAK,MAAM,CAAC,KAAK,MAAM,CAAC,KAAK,MAAM,CAAC,KAAK,MAAM,CAAC,KAAK,MAAM,CAAC,KAAK,MAAM,CAAC,KAAK,MAAM,CAAC,KAAK,MAAM,CAAC,KAAK,MAAM,CAAC,KAAK,MAAM,CAAC,KAAK,MAAM,CAAC,KAAK,MAAM,CAAC,KAAK,MAAM,CAAC,KAAK,MAAM,CAAC,KAAK,MAAM,CAAC,KAAK,MAAM,CAAC,KAAK,MAAM,CAAC,KAAK,MAAM,CAAC,KAAK,MAAM,CAAC,KAAK,MAAM,CAAC,KAAK,MAAM,CAAC,KAAK,MAAM,CAAC,KAAK,MAAM,CAAC,KAAK,MAAM,CAAC,KAAK,MAAM,CAAC,KAAK,MAAM,CAAC,KAAK,MAAM,CAAC,KAAK,MAAM,CAAC,KAAK,MAAM,CAAC,KAAK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","file":"static/js/262.86269f5c.chunk.js","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{_ as r}from\"../chunks/tslib.es6.js\";import{assumeNonNull as e}from\"./maybe.js\";import{property as s}from\"./accessorSupport/decorators/property.js\";import{subclass as t}from\"./accessorSupport/decorators/subclass.js\";import o from\"./Accessor.js\";import i from\"./Collection.js\";let h=class extends o{constructor(r){super(r),this._groups=new Map}destroy(){this.removeAll()}get size(){let r=0;return this._groups.forEach((e=>{r+=e.length})),r}add(r,e){if(!this._isHandle(r)&&!Array.isArray(r)&&!i.isCollection(r))return this;const s=this._getOrCreateGroup(e);return Array.isArray(r)||i.isCollection(r)?r.forEach((r=>this._isHandle(r)&&s.push(r))):s.push(r),this.notifyChange(\"size\"),this}forEach(r,e){if(\"function\"==typeof r)this._groups.forEach((e=>e.forEach(r)));else{const s=this._getGroup(r);s&&e&&s.forEach(e)}}has(r){return this._groups.has(this._ensureGroupKey(r))}remove(r){if(Array.isArray(r)||i.isCollection(r))return r.forEach(this.remove,this),this;if(!this.has(r))return this;const e=this._getGroup(r);for(let s=0;s<e.length;s++)e[s].remove();return this._deleteGroup(r),this.notifyChange(\"size\"),this}removeAll(){return this._groups.forEach((r=>{for(let e=0;e<r.length;e++)r[e].remove()})),this._groups.clear(),this.notifyChange(\"size\"),this}_isHandle(r){return r&&!!r.remove}_getOrCreateGroup(r){if(this.has(r))return this._getGroup(r);const e=[];return this._groups.set(this._ensureGroupKey(r),e),e}_getGroup(r){return e(this._groups.get(this._ensureGroupKey(r)))}_deleteGroup(r){return this._groups.delete(this._ensureGroupKey(r))}_ensureGroupKey(r){return r||\"_default_\"}};r([s({readOnly:!0})],h.prototype,\"size\",null),h=r([t(\"esri.core.Handles\")],h);var u=h;export default u;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{_ as t}from\"../../chunks/tslib.es6.js\";import\"../../core/has.js\";import\"../../core/Logger.js\";import\"../../core/accessorSupport/ensureType.js\";import{property as o}from\"../../core/accessorSupport/decorators/property.js\";import{subclass as r}from\"../../core/accessorSupport/decorators/subclass.js\";import\"../../core/urlUtils.js\";import\"../../core/uuid.js\";import\"../../portal/support/resourceExtension.js\";import{JSONSupport as e}from\"../../core/JSONSupport.js\";import s from\"../../geometry/Extent.js\";import i from\"./TileInfo.js\";var p;let l=p=class extends e{constructor(t){super(t),this.fullExtent=null,this.id=null,this.tileInfo=null}clone(){const t=new p;return this.hasOwnProperty(\"fullExtent\")&&(t.fullExtent=this.fullExtent&&this.fullExtent.clone()),this.hasOwnProperty(\"id\")&&(t.id=this.id),this.hasOwnProperty(\"tileInfo\")&&(t.tileInfo=this.tileInfo&&this.tileInfo.clone()),t}};t([o({type:s,json:{read:{source:\"fullExtent\"}}})],l.prototype,\"fullExtent\",void 0),t([o({type:String,json:{read:{source:\"id\"}}})],l.prototype,\"id\",void 0),t([o({type:i,json:{read:{source:\"tileInfo\"}}})],l.prototype,\"tileInfo\",void 0),l=p=t([r(\"esri.layer.support.TileMatrixSet\")],l);var n=l;export default n;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{_ as r}from\"../../chunks/tslib.es6.js\";import\"../../core/has.js\";import\"../../core/Logger.js\";import\"../../core/accessorSupport/ensureType.js\";import{property as e}from\"../../core/accessorSupport/decorators/property.js\";import{subclass as o}from\"../../core/accessorSupport/decorators/subclass.js\";import\"../../core/urlUtils.js\";import\"../../core/uuid.js\";import\"../../portal/support/resourceExtension.js\";import{JSONSupport as s}from\"../../core/JSONSupport.js\";var t;let i=t=class extends s{constructor(r){super(r),this.id=null,this.title=null,this.description=null,this.legendUrl=null}clone(){const r=new t;return this.hasOwnProperty(\"description\")&&(r.description=this.description),this.hasOwnProperty(\"id\")&&(r.id=this.id),this.hasOwnProperty(\"isDefault\")&&(r.isDefault=this.isDefault),this.hasOwnProperty(\"keywords\")&&(r.keywords=this.keywords&&this.keywords.slice()),this.hasOwnProperty(\"legendUrl\")&&(r.legendUrl=this.legendUrl),this.hasOwnProperty(\"title\")&&(r.title=this.title),r}};r([e({json:{read:{source:\"id\"}}})],i.prototype,\"id\",void 0),r([e({json:{read:{source:\"title\"}}})],i.prototype,\"title\",void 0),r([e({json:{read:{source:\"abstract\"}}})],i.prototype,\"description\",void 0),r([e({json:{read:{source:\"legendUrl\"}}})],i.prototype,\"legendUrl\",void 0),r([e({json:{read:{source:\"isDefault\"}}})],i.prototype,\"isDefault\",void 0),r([e({json:{read:{source:\"keywords\"}}})],i.prototype,\"keywords\",void 0),i=t=r([o(\"esri.layer.support.WMTSStyle\")],i);var p=i;export default p;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{_ as t}from\"../../chunks/tslib.es6.js\";import\"../../core/has.js\";import\"../../core/Logger.js\";import\"../../core/accessorSupport/ensureType.js\";import{property as e}from\"../../core/accessorSupport/decorators/property.js\";import{reader as r}from\"../../core/accessorSupport/decorators/reader.js\";import{subclass as s}from\"../../core/accessorSupport/decorators/subclass.js\";import\"../../core/urlUtils.js\";import\"../../core/uuid.js\";import\"../../portal/support/resourceExtension.js\";import{JSONSupport as i}from\"../../core/JSONSupport.js\";import o from\"../../geometry/Extent.js\";import l from\"../../core/Collection.js\";import a from\"./TileMatrixSet.js\";import p from\"./WMTSStyle.js\";var n;let m=n=class extends i{constructor(t){super(t),this.fullExtent=null,this.imageFormats=null,this.id=null,this.layer=null,this.styles=null,this.tileMatrixSetId=null,this.tileMatrixSets=null}get description(){return this._get(\"description\")}set description(t){this._set(\"description\",t)}readFullExtent(t,e){return(t=e.fullExtent)?o.fromJSON(t):null}get imageFormat(){let t=this._get(\"imageFormat\");return t||(t=this.imageFormats&&this.imageFormats.length?this.imageFormats[0]:\"\"),t}set imageFormat(t){const e=this.imageFormats;t&&(t.indexOf(\"image/\")>-1||e&&-1===e.indexOf(t))&&(-1===t.indexOf(\"image/\")&&(t=\"image/\"+t),e&&-1===e.indexOf(t))?console.error(\"The layer doesn't support the format of \"+t):this._set(\"imageFormat\",t)}get styleId(){let t=this._get(\"styleId\");return t||(t=this.styles&&this.styles.length?this.styles.getItemAt(0).id:\"\"),t}set styleId(t){this._set(\"styleId\",t)}get title(){return this._get(\"title\")}set title(t){this._set(\"title\",t)}get tileMatrixSet(){return this.tileMatrixSets?this.tileMatrixSets.find((t=>t.id===this.tileMatrixSetId)):null}clone(){const t=new n;return this.hasOwnProperty(\"description\")&&(t.description=this.description),this.hasOwnProperty(\"imageFormats\")&&(t.imageFormats=this.imageFormats&&this.imageFormats.slice()),this.hasOwnProperty(\"imageFormat\")&&(t.imageFormat=this.imageFormat),this.hasOwnProperty(\"fullExtent\")&&(t.fullExtent=this.fullExtent&&this.fullExtent.clone()),this.hasOwnProperty(\"id\")&&(t.id=this.id),this.hasOwnProperty(\"layer\")&&(t.layer=this.layer),this.hasOwnProperty(\"styleId\")&&(t.styleId=this.styleId),this.hasOwnProperty(\"styles\")&&(t.styles=this.styles&&this.styles.clone()),this.hasOwnProperty(\"tileMatrixSetId\")&&(t.tileMatrixSetId=this.tileMatrixSetId),this.hasOwnProperty(\"tileMatrixSets\")&&(t.tileMatrixSets=this.tileMatrixSets.clone()),this.hasOwnProperty(\"title\")&&(t.title=this.title),t}};t([e()],m.prototype,\"description\",null),t([e()],m.prototype,\"fullExtent\",void 0),t([r(\"fullExtent\",[\"fullExtent\"])],m.prototype,\"readFullExtent\",null),t([e()],m.prototype,\"imageFormat\",null),t([e({json:{read:{source:\"formats\"}}})],m.prototype,\"imageFormats\",void 0),t([e()],m.prototype,\"id\",void 0),t([e()],m.prototype,\"layer\",void 0),t([e()],m.prototype,\"styleId\",null),t([e({type:l.ofType(p),json:{read:{source:\"styles\"}}})],m.prototype,\"styles\",void 0),t([e({value:null,json:{write:{ignoreOrigin:!0}}})],m.prototype,\"title\",null),t([e()],m.prototype,\"tileMatrixSetId\",void 0),t([e({readOnly:!0})],m.prototype,\"tileMatrixSet\",null),t([e({type:l.ofType(a),json:{read:{source:\"tileMatrixSets\"}}})],m.prototype,\"tileMatrixSets\",void 0),m=n=t([s(\"esri.layers.support.WMTSSublayer\")],m);var h=m;export default h;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport e from\"../../core/Error.js\";import t from\"../../geometry/support/WKIDUnitConversion.js\";import i from\"../../geometry/SpatialReference.js\";import n from\"../../geometry/Point.js\";import r from\"../../geometry/Extent.js\";import{getReferenceEllipsoidFromWKID as l}from\"../../geometry/projectionEllipsoid.js\";import o from\"./TileInfo.js\";const s=90.71428571428571,a=[[3819,3819],[3821,3824],[3889,3889],[3906,3906],[4001,4025],[4027,4036],[4039,4047],[4052,4055],[4074,4075],[4080,4081],[4120,4176],[4178,4185],[4188,4216],[4218,4289],[4291,4304],[4306,4319],[4322,4326],[4463,4463],[4470,4470],[4475,4475],[4483,4483],[4490,4490],[4555,4558],[4600,4646],[4657,4765],[4801,4811],[4813,4821],[4823,4824],[4901,4904],[5013,5013],[5132,5132],[5228,5229],[5233,5233],[5246,5246],[5252,5252],[5264,5264],[5324,5340],[5354,5354],[5360,5360],[5365,5365],[5370,5373],[5381,5381],[5393,5393],[5451,5451],[5464,5464],[5467,5467],[5489,5489],[5524,5524],[5527,5527],[5546,5546],[2044,2045],[2081,2083],[2085,2086],[2093,2093],[2096,2098],[2105,2132],[2169,2170],[2176,2180],[2193,2193],[2200,2200],[2206,2212],[2319,2319],[2320,2462],[2523,2549],[2551,2735],[2738,2758],[2935,2941],[2953,2953],[3006,3030],[3034,3035],[3038,3051],[3058,3059],[3068,3068],[3114,3118],[3126,3138],[3150,3151],[3300,3301],[3328,3335],[3346,3346],[3350,3352],[3366,3366],[3389,3390],[3416,3417],[3833,3841],[3844,3850],[3854,3854],[3873,3885],[3907,3910],[4026,4026],[4037,4038],[4417,4417],[4434,4434],[4491,4554],[4839,4839],[5048,5048],[5105,5130],[5253,5259],[5269,5275],[5343,5349],[5479,5482],[5518,5519],[5520,5520],[20004,20032],[20064,20092],[21413,21423],[21473,21483],[21896,21899],[22171,22177],[22181,22187],[22191,22197],[25884,25884],[27205,27232],[27391,27398],[27492,27492],[28402,28432],[28462,28492],[30161,30179],[30800,30800],[31251,31259],[31275,31279],[31281,31290],[31466,31700]];function c(t,i){var n,r;t=t.replace(/ows:/gi,\"\");const l=(new DOMParser).parseFromString(t,\"text/xml\").documentElement,o=new Map,s=new Map,a=d(\"Contents\",l);if(!a)throw new e(\"wmtslayer:wmts-capabilities-xml-is-not-valid\");const c=d(\"OperationsMetadata\",l),u=null==c?void 0:c.querySelector(\"[name='GetTile']\"),p=null==u?void 0:u.getElementsByTagName(\"Get\"),m=p&&Array.prototype.slice.call(p),w=null!=(n=(null==i||null==(r=i.url)?void 0:r.indexOf(\"https\"))>-1)&&n;let T,M,y=i.serviceMode,S=i&&i.url;if(m&&m.length&&m.some((e=>{const t=d(\"Constraint\",e);return!t||x(\"AllowedValues\",\"Value\",y,t)?(S=e.attributes[0].nodeValue,!0):(!t||x(\"AllowedValues\",\"Value\",\"RESTful\",t)||x(\"AllowedValues\",\"Value\",\"REST\",t)?M=e.attributes[0].nodeValue:t&&!x(\"AllowedValues\",\"Value\",\"KVP\",t)||(T=e.attributes[0].nodeValue),!1)})),!S)if(M)S=M,y=\"RESTful\";else if(T)S=T,y=\"KVP\";else{const e=d(\"ServiceMetadataURL\",l);S=e&&e.getAttribute(\"xlink:href\")}const E=S.indexOf(\"1.0.0/\");-1===E&&\"RESTful\"===y?S+=\"/\":E>-1&&(S=S.substring(0,E)),\"KVP\"===y&&(S+=E>-1?\"\":\"?\"),w&&(S=S.replace(/^http:/i,\"https:\"));const V=g(\"ServiceIdentification>AccessConstraints\",l),b=f(\"Layer\",a),C=f(\"TileMatrixSet\",a);return{copyright:V,layers:b.map((e=>{const t=g(\"Identifier\",e);return o.set(t,e),h(t,e,C,w)})),tileUrl:S,serviceMode:y,layerMap:o,dimensionMap:s}}function u(e){return e.layers.forEach((e=>{e.tileMatrixSets.forEach((e=>{const t=e.tileInfo;96!==t.dpi&&(t.lods.forEach((i=>{i.scale=96*i.scale/t.dpi,i.resolution=O(t.spatialReference.wkid,i.scale*s/96,e.id)})),t.dpi=96)}))})),e}function p(e){return e.nodeType===Node.ELEMENT_NODE}function d(e,t){for(let i=0;i<t.childNodes.length;i++){const n=t.childNodes[i];if(p(n)&&n.nodeName===e)return n}return null}function f(e,t){const i=[];for(let n=0;n<t.childNodes.length;n++){const r=t.childNodes[n];p(r)&&r.nodeName===e&&i.push(r)}return i}function m(e,t){const i=[];for(let n=0;n<t.childNodes.length;n++){const r=t.childNodes[n];p(r)&&r.nodeName===e&&i.push(r)}return i.map((e=>e.textContent))}function g(e,t){return e.split(\">\").forEach((e=>{t&&(t=d(e,t))})),t&&t.textContent}function x(e,t,i,n){let r;return Array.prototype.slice.call(n.childNodes).some((n=>{if(n.nodeName.indexOf(e)>-1){const e=d(t,n),l=e&&e.textContent;if(l===i||i.split(\":\")&&i.split(\":\")[1]===l)return r=n,!0}return!1})),r}function h(e,t,i,n){const r=g(\"Abstract\",t),l=m(\"Format\",t);return{id:e,fullExtent:y(t),description:r,formats:l,styles:S(t,n),title:g(\"Title\",t),tileMatrixSets:E(t,i)}}function w(e,t){const i=[],n=e.layerMap.get(t);if(!n)return;const r=f(\"ResourceURL\",n),l=f(\"Dimension\",n);let o,s,a,c;return l.length&&(o=g(\"Identifier\",l[0]),s=m(\"Default\",l[0])||m(\"Value\",l[0])),l.length>1&&(a=g(\"Identifier\",l[1]),c=m(\"Default\",l[1])||m(\"Value\",l[1])),e.dimensionMap.set(t,{dimensions:s,dimensions2:c}),r.forEach((e=>{let t=e.getAttribute(\"template\");if(\"tile\"===e.getAttribute(\"resourceType\")){if(o&&s.length)if(t.indexOf(\"{\"+o+\"}\")>-1)t=t.replace(\"{\"+o+\"}\",\"{dimensionValue}\");else{const e=t.toLowerCase().indexOf(\"{\"+o.toLowerCase()+\"}\");e>-1&&(t=t.substring(0,e)+\"{dimensionValue}\"+t.substring(e+o.length+2))}if(a&&c.length)if(t.indexOf(\"{\"+a+\"}\")>-1)t=t.replace(\"{\"+a+\"}\",\"{dimensionValue2}\");else{const e=t.toLowerCase().indexOf(\"{\"+a.toLowerCase()+\"}\");e>-1&&(t=t.substring(0,e)+\"{dimensionValue2}\"+t.substring(e+a.length+2))}i.push({template:t,format:e.getAttribute(\"format\"),resourceType:\"tile\"})}})),i}function T(e,t,i,n,r,l,o,s){const{dimensionMap:a}=e,c=w(e,t),u=a.get(t).dimensions&&a.get(t).dimensions[0],p=a.get(t).dimensions2&&a.get(t).dimensions2[0];let d=\"\";if(c&&c.length>0){let e=null;c.some((t=>t.format===n&&(e=t,!0))),e||(e=c[o%c.length]),d=e.template.replace(/\\{Style\\}/gi,r).replace(/\\{TileMatrixSet\\}/gi,i).replace(/\\{TileMatrix\\}/gi,l).replace(/\\{TileRow\\}/gi,\"\"+o).replace(/\\{TileCol\\}/gi,\"\"+s).replace(/\\{dimensionValue\\}/gi,u).replace(/\\{dimensionValue2\\}/gi,p)}return d}function M(e,t,i,n){const{dimensionMap:r}=e,l=w(e,t);let o=\"\";if(l&&l.length>0){const e=r.get(t).dimensions&&r.get(t).dimensions[0],s=r.get(t).dimensions2&&r.get(t).dimensions2[0];o=l[0].template,o.indexOf(\".xxx\")===o.length-4&&(o=o.slice(0,o.length-4)),o=o.replace(/\\{Style\\}/gi,n),o=o.replace(/\\{TileMatrixSet\\}/gi,i),o=o.replace(/\\{TileMatrix\\}/gi,\"{level}\"),o=o.replace(/\\{TileRow\\}/gi,\"{row}\"),o=o.replace(/\\{TileCol\\}/gi,\"{col}\"),o=o.replace(/\\{dimensionValue\\}/gi,e),o=o.replace(/\\{dimensionValue2\\}/gi,s)}return o}function y(e){const t=d(\"WGS84BoundingBox\",e),i=t?g(\"LowerCorner\",t).split(\" \"):[\"-180\",\"-90\"],n=t?g(\"UpperCorner\",t).split(\" \"):[\"180\",\"90\"];return{xmin:parseFloat(i[0]),ymin:parseFloat(i[1]),xmax:parseFloat(n[0]),ymax:parseFloat(n[1]),spatialReference:{wkid:4326}}}function S(e,t){return f(\"Style\",e).map((e=>{const i=d(\"LegendURL\",e),n=d(\"Keywords\",e),r=n&&m(\"Keyword\",n);let l=i&&i.getAttribute(\"xlink:href\");t&&(l=l&&l.replace(/^http:/i,\"https:\"));return{abstract:g(\"Abstract\",e),id:g(\"Identifier\",e),isDefault:\"true\"===e.getAttribute(\"isDefault\"),keywords:r,legendUrl:l,title:g(\"Title\",e)}}))}function E(e,t){return f(\"TileMatrixSetLink\",e).map((e=>d(\"TileMatrixSet\",e).textContent)).map((i=>V(i,e,t)))}function V(e,t,i){const n=m(\"TileMatrix\",x(\"TileMatrixSetLink\",\"TileMatrixSet\",e,t)),r=i.find((t=>{const i=d(\"Identifier\",t),n=i&&i.textContent;return!!(n===e||e.split(\":\")&&e.split(\":\")[1]===n)})),l=b(r),s=l.spatialReference,a=s.wkid,c=d(\"TileMatrix\",r),u=[parseInt(g(\"TileWidth\",c),10),parseInt(g(\"TileHeight\",c),10)],p=[];if(n.length)n.forEach(((t,i)=>{const n=x(\"TileMatrix\",\"Identifier\",t,r);p.push(N(n,a,i,e))}));else{f(\"TileMatrix\",r).forEach(((t,i)=>{p.push(N(t,a,i,e))}))}const h=C(r,l,u,p[0]);return{id:e,fullExtent:h.toJSON(),tileInfo:new o({dpi:96,spatialReference:s,size:u,origin:l,lods:p}).toJSON()}}function b(e){let t=g(\"SupportedCRS\",e);t&&(t=t.toLowerCase());let r=parseInt(t.split(\":\").pop(),10);900913!==r&&3857!==r||(r=102100);let l=!1;t.indexOf(\"crs84\")>-1||t.indexOf(\"crs:84\")>-1?(r=4326,l=!0):t.indexOf(\"crs83\")>-1||t.indexOf(\"crs:83\")>-1?(r=4269,l=!0):(t.indexOf(\"crs27\")>-1||t.indexOf(\"crs:27\")>-1)&&(r=4267,l=!0);const o=new i({wkid:r}),s=g(\"TopLeftCorner\",d(\"TileMatrix\",e)).split(\" \"),c=s[0].split(\"E\").map((e=>Number(e))),u=s[1].split(\"E\").map((e=>Number(e)));let p,f=c[0],m=u[0];c.length>1&&(f=c[0]*10**c[1]),u.length>1&&(m=u[0]*10**u[1]);const x=l&&4326===r&&90===f&&-180===m;return a.some(((e,i)=>{const s=Number(t.split(\":\").pop());return s>=e[0]&&s<=e[1]||4326===r&&(!l||x)?(p=new n(m,f,o),!0):(i===a.length-1&&(p=new n(f,m,o)),!1)})),p}function C(e,t,i,n){const l=d(\"BoundingBox\",e);let o,s,a,c,u,p;if(l&&(o=g(\"LowerCorner\",l).split(\" \"),s=g(\"UpperCorner\",l).split(\" \")),o&&o.length>1&&s&&s.length>1)a=parseFloat(o[0]),u=parseFloat(o[1]),c=parseFloat(s[0]),p=parseFloat(s[1]);else{const r=d(\"TileMatrix\",e),l=parseFloat(g(\"MatrixWidth\",r)),o=parseFloat(g(\"MatrixHeight\",r));a=t.x,p=t.y,c=a+l*i[0]*n.resolution,u=p-o*i[1]*n.resolution}return new r(a,u,c,p,t.spatialReference)}function N(e,t,i,n){const r=g(\"Identifier\",e),l=g(\"ScaleDenominator\",e).split(\"E\").map((e=>Number(e)));let o;o=l.length>1?l[0]*10**l[1]:l[0];const a=O(t,o,n);return o*=96/s,{level:i,levelValue:r,scale:o,resolution:a}}function O(e,i,n){let r;return r=t.hasOwnProperty(String(e))?t.values[t[e]]:\"default028mm\"===n?6370997*Math.PI/180:l(e).metersPerDegree,7*i/25e3/r}export{T as getTileUrlFromResourceUrls,M as getTileUrlTemplateFromResourceUrls,c as parseCapabilities,u as parseResourceInfo};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../chunks/tslib.es6.js\";import\"../core/has.js\";import{clone as t}from\"../core/lang.js\";import{getDeepValue as r}from\"../core/object.js\";import\"../core/Logger.js\";import\"../core/accessorSupport/ensureType.js\";import{property as s}from\"../core/accessorSupport/decorators/property.js\";import{reader as i}from\"../core/accessorSupport/decorators/reader.js\";import{subclass as a}from\"../core/accessorSupport/decorators/subclass.js\";import{writer as o}from\"../core/accessorSupport/decorators/writer.js\";import l from\"../core/Error.js\";import{urlToObject as n}from\"../core/urlUtils.js\";import\"../core/uuid.js\";import\"../portal/support/resourceExtension.js\";import m from\"../geometry/Extent.js\";import c from\"../core/Collection.js\";import u from\"../request.js\";import p from\"../core/Handles.js\";import y from\"./Layer.js\";import{MultiOriginJSONMixin as d}from\"../core/MultiOriginJSONSupport.js\";import{OperationalLayer as h}from\"./mixins/OperationalLayer.js\";import{BlendLayer as f}from\"./mixins/BlendLayer.js\";import{PortalLayer as v}from\"./mixins/PortalLayer.js\";import{RefreshableLayer as g}from\"./mixins/RefreshableLayer.js\";import{ScaleRangeLayer as L}from\"./mixins/ScaleRangeLayer.js\";import w from\"./support/TileInfo.js\";import I from\"./support/WMTSLayerInfo.js\";import S from\"./WebTileLayer.js\";import M from\"./support/WMTSSublayer.js\";import{getTileUrlFromResourceUrls as P,getTileUrlTemplateFromResourceUrls as T,parseCapabilities as b,parseResourceInfo as j}from\"./support/wmtsUtils.js\";const x={\"image/png\":\".png\",\"image/png8\":\".png\",\"image/png24\":\".png\",\"image/png32\":\".png\",\"image/jpg\":\".jpg\",\"image/jpeg\":\".jpeg\",\"image/gif\":\".gif\",\"image/bmp\":\".bmp\",\"image/tiff\":\".tif\",\"image/jpgpng\":\"\",\"image/jpegpng\":\"\",\"image/unknown\":\"\"},E=new Set([\"version\",\"service\",\"request\",\"layer\",\"style\",\"format\",\"tilematrixset\",\"tilematrix\",\"tilerow\",\"tilecol\"]);let _=class extends(f(g(L(h(v(d(y))))))){constructor(...e){super(...e),this._sublayersHandles=new p,this.copyright=\"\",this.customParameters=null,this.customLayerParameters=null,this.fullExtent=null,this.operationalLayerType=\"WebTiledLayer\",this.resourceInfo=null,this.serviceMode=\"RESTful\",this.sublayers=null,this.type=\"wmts\",this.version=\"1.0.0\",this.watch(\"activeLayer\",((e,t)=>{t&&(t.layer=null),e&&(e.layer=this)}),!0),this.watch(\"sublayers\",((e,t)=>{t&&(t.forEach((e=>{e.layer=null})),this._sublayersHandles.removeAll(),this._sublayersHandles=null),e&&(e.forEach((e=>{e.layer=this})),this._sublayersHandles||(this._sublayersHandles=new p),this._sublayersHandles.add([e.on(\"after-add\",(({item:e})=>{e.layer=this})),e.on(\"after-remove\",(({item:e})=>{e.layer=null}))]))}),!0)}normalizeCtorArgs(e,t){return\"string\"==typeof e?{url:e,...t}:e}load(e){if(\"KVP\"===this.serviceMode||\"RESTful\"===this.serviceMode)return this.addResolvingPromise(this.loadFromPortal({supportedTypes:[\"WMTS\"]},e).then((()=>this._fetchService(e))).catch((e=>{throw new l(\"wmtslayer:unsupported-service-data\",\"Invalid response from the WMTS service.\",{error:e})}))),Promise.resolve(this);console.error(\"WMTS mode could only be 'KVP' or 'RESTful'\")}get activeLayer(){return this._get(\"activeLayer\")}set activeLayer(e){this._set(\"activeLayer\",e)}readActiveLayerFromService(e,t,r){let s;return this.activeLayer?t.layers.some((e=>e.id===this.activeLayer.id&&(s=e,!0))):(this.activeLayer=new M,s=t.layers[0]),this.activeLayer.read(s,r),this.activeLayer}readActiveLayerFromItemOrWebDoc(e,t){const{templateUrl:r,wmtsInfo:s}=t,i=r?this._getLowerCasedUrlParams(r):null,a=s&&s.layerIdentifier;let o=null;const l=s&&s.tileMatrixSet;l&&(Array.isArray(l)?l.length&&(o=l[0]):o=l);const n=i&&i.format,m=i&&i.style;return new M({id:a,imageFormat:n,styleId:m,tileMatrixSetId:o})}writeActiveLayer(e,t,s,i){const a=this.activeLayer;t.templateUrl=this.getUrlTemplate(a.id,a.tileMatrixSetId,a.imageFormat,a.styleId);const o=r(\"tileMatrixSet.tileInfo\",a);t.tileInfo=o?o.toJSON(i):null,t.wmtsInfo={...t.wmtsInfo,layerIdentifier:a.id,tileMatrixSet:a.tileMatrixSetId}}readCustomParameters(e,t){const r=t.wmtsInfo;return r?this._mergeParams(r.customParameters,r.url):null}get fullExtents(){const e=[];return this.activeLayer.tileMatrixSets.forEach((t=>{t.fullExtent&&e.push(t.fullExtent)})),e}readServiceMode(e,t){return t.templateUrl.indexOf(\"?\")>-1?\"KVP\":\"RESTful\"}readSublayersFromService(e,t,r){return C(t.layers,r)}get supportedSpatialReferences(){return this.activeLayer.tileMatrixSets.map((e=>e.tileInfo.spatialReference)).toArray()}get title(){var e,t;return null!=(e=null==(t=this.activeLayer)?void 0:t.title)?e:\"Layer\"}set title(e){e?this._override(\"title\",e):this._clearOverride(\"title\")}get url(){return this._get(\"url\")}set url(e){e&&\"/\"===e.substr(-1)?this._set(\"url\",e.slice(0,-1)):this._set(\"url\",e)}createWebTileLayer(e){const t=this.getUrlTemplate(this.activeLayer.id,this.activeLayer.tileMatrixSetId,this.activeLayer.imageFormat,this.activeLayer.styleId),r=this._getTileMatrixSetById(e.tileMatrixSetId).tileInfo,s=e.fullExtent,i=new I({layerIdentifier:e.id,tileMatrixSet:e.tileMatrixSetId,url:this.url});return this.customLayerParameters&&(i.customLayerParameters=this.customLayerParameters),this.customParameters&&(i.customParameters=this.customParameters),new S({fullExtent:s,urlTemplate:t,tileInfo:r,wmtsInfo:i})}fetchTile(e,t,r){const s=this.getTileUrl(e,t,r);return u(s,{responseType:\"image\"}).then((e=>e.data))}findSublayerById(e){return this.sublayers.find((t=>t.id===e))}getTileUrl(e,t,r){const s=this._getTileMatrixSetById(this.activeLayer.tileMatrixSetId).tileInfo.lods[e],i=s?s.levelValue?s.levelValue:`${s.level}`:`${e}`;let a=this.resourceInfo?\"\":P({dimensionMap:this.dimensionMap,layerMap:this.layerMap},this.activeLayer.id,this.activeLayer.tileMatrixSetId,this.activeLayer.imageFormat,this.activeLayer.styleId,i,t,r);if(!a){a=this.getUrlTemplate(this.activeLayer.id,this.activeLayer.tileMatrixSetId,this.activeLayer.imageFormat,this.activeLayer.styleId).replace(/\\{level\\}/gi,i).replace(/\\{row\\}/gi,`${t}`).replace(/\\{col\\}/gi,`${r}`)}return a=this._appendCustomLayerParameters(a),a}getUrlTemplate(e,t,r,s){if(!this.resourceInfo){const r=T({dimensionMap:this.dimensionMap,layerMap:this.layerMap},e,t,s);if(r)return r}if(\"KVP\"===this.serviceMode)return this.url+\"?SERVICE=WMTS&VERSION=\"+this.version+\"&REQUEST=GetTile&LAYER=\"+e+\"&STYLE=\"+s+\"&FORMAT=\"+r+\"&TILEMATRIXSET=\"+t+\"&TILEMATRIX={level}&TILEROW={row}&TILECOL={col}\";if(\"RESTful\"===this.serviceMode){let i=\"\";return x[r.toLowerCase()]&&(i=x[r.toLowerCase()]),this.url+e+\"/\"+s+\"/\"+t+\"/{level}/{row}/{col}\"+i}return\"\"}async _fetchService(e){let t;if(this.resourceInfo)\"KVP\"===this.resourceInfo.serviceMode&&(this.url+=this.url.indexOf(\"?\")>-1?\"\":\"?\"),t={ssl:!1,data:this.resourceInfo};else try{t=await this._getCapabilities(this.serviceMode,e)}catch{const s=\"KVP\"===this.serviceMode?\"RESTful\":\"KVP\";try{t=await this._getCapabilities(s,e),this.serviceMode=s}catch(r){throw new l(\"wmtslayer:unsupported-service-data\",\"Services does not support RESTful or KVP service modes.\",{error:r})}}this.resourceInfo?t.data=j(t.data):t.data=b(t.data,{serviceMode:this.serviceMode,url:this.url}),t.data&&this.read(t.data,{origin:\"service\"})}async _getCapabilities(e,t){const r=this._getCapabilitiesUrl(e);return await u(r,{...t,responseType:\"text\"})}_getTileMatrixSetById(e){return this.findSublayerById(this.activeLayer.id).tileMatrixSets.find((t=>t.id===e))}_appendCustomParameters(e){if(this.customParameters)for(const t in this.customParameters)e+=(-1===e.indexOf(\"?\")?\"?\":\"&\")+t+\"=\"+encodeURIComponent(this.customParameters[t]);return e}_appendCustomLayerParameters(e){if(this.customLayerParameters||this.customParameters){const r={...t(this.customParameters),...this.customLayerParameters};for(const t in r)e+=(-1===e.indexOf(\"?\")?\"?\":\"&\")+t+\"=\"+encodeURIComponent(r[t])}return e}_getCapabilitiesUrl(e){let t;return this.url=this.url.split(\"?\")[0],\"KVP\"===e?t=this.url+\"?request=GetCapabilities&service=WMTS&version=\"+this.version:\"RESTful\"===e&&(t=this.url+\"/\"+this.version+\"/WMTSCapabilities.xml\"),t=this._appendCustomParameters(t),t}_getLowerCasedUrlParams(e){if(!e)return null;const t=n(e).query;if(!t)return null;const r={};return Object.keys(t).forEach((e=>{r[e.toLowerCase()]=t[e]})),r}_mergeParams(e,r){const s=this._getLowerCasedUrlParams(r);if(s){const r=Object.keys(s);r.length&&(e=e?t(e):{},r.forEach((t=>{e.hasOwnProperty(t)||E.has(t)||(e[t]=s[t])})))}return e}};function C(e,t){return e.map((e=>{const r=new M;return r.read(e,t),r}))}e([s()],_.prototype,\"dimensionMap\",void 0),e([s()],_.prototype,\"layerMap\",void 0),e([s({type:M,json:{origins:{\"web-document\":{write:{ignoreOrigin:!0}}}}})],_.prototype,\"activeLayer\",null),e([i(\"service\",\"activeLayer\",[\"layers\"])],_.prototype,\"readActiveLayerFromService\",null),e([i([\"web-document\",\"portal-item\"],\"activeLayer\",[\"wmtsInfo\"])],_.prototype,\"readActiveLayerFromItemOrWebDoc\",null),e([o([\"web-document\",\"portal-item\"],\"activeLayer\",{templateUrl:{type:String},tileInfo:{type:w},\"wmtsInfo.layerIdentifier\":{type:String},\"wmtsInfo.tileMatrixSet\":{type:String}})],_.prototype,\"writeActiveLayer\",null),e([s({type:String,value:\"\",json:{write:!0}})],_.prototype,\"copyright\",void 0),e([s({type:[\"show\",\"hide\"]})],_.prototype,\"listMode\",void 0),e([s({json:{origins:{\"web-document\":{read:{source:[\"wmtsInfo.customParameters\",\"wmtsInfo.url\"]},write:{target:\"wmtsInfo.customParameters\"}},\"portal-item\":{read:{source:[\"wmtsInfo.customParameters\",\"wmtsInfo.url\"]},write:{target:\"wmtsInfo.customParameters\"}}}}})],_.prototype,\"customParameters\",void 0),e([i(\"web-document\",\"customParameters\"),i(\"portal-item\",\"customParameters\")],_.prototype,\"readCustomParameters\",null),e([s({json:{origins:{\"web-document\":{read:{source:\"wmtsInfo.customLayerParameters\"},write:{target:\"wmtsInfo.customLayerParameters\"}},\"portal-item\":{read:{source:\"wmtsInfo.customLayerParameters\"},write:{target:\"wmtsInfo.customLayerParameters\"}}}}})],_.prototype,\"customLayerParameters\",void 0),e([s({type:m,json:{write:{ignoreOrigin:!0},origins:{\"web-document\":{read:{source:\"fullExtent\"}},\"portal-item\":{read:{source:\"fullExtent\"}}}}})],_.prototype,\"fullExtent\",void 0),e([s({readOnly:!0})],_.prototype,\"fullExtents\",null),e([s({type:[\"WebTiledLayer\"]})],_.prototype,\"operationalLayerType\",void 0),e([s()],_.prototype,\"resourceInfo\",void 0),e([s()],_.prototype,\"serviceMode\",void 0),e([i([\"portal-item\",\"web-document\"],\"serviceMode\",[\"templateUrl\"])],_.prototype,\"readServiceMode\",null),e([s({type:c.ofType(M)})],_.prototype,\"sublayers\",void 0),e([i(\"service\",\"sublayers\",[\"layers\"])],_.prototype,\"readSublayersFromService\",null),e([s({readOnly:!0})],_.prototype,\"supportedSpatialReferences\",null),e([s({json:{read:{source:\"title\"}}})],_.prototype,\"title\",null),e([s({json:{read:!1},readOnly:!0,value:\"wmts\"})],_.prototype,\"type\",void 0),e([s({json:{origins:{service:{read:{source:\"tileUrl\"}},\"web-document\":{read:{source:\"wmtsInfo.url\"},write:{target:\"wmtsInfo.url\"}},\"portal-item\":{read:{source:\"wmtsInfo.url\"},write:{target:\"wmtsInfo.url\"}}}}})],_.prototype,\"url\",null),e([s()],_.prototype,\"version\",void 0),_=e([a(\"esri.layers.WMTSLayer\")],_);var R=_;export default R;\n"],"sourceRoot":""}