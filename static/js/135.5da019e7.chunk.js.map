{"version":3,"sources":["../node_modules/@arcgis/core/views/layers/LayerView.js","../node_modules/@arcgis/core/views/layers/support/ClipRect.js","../node_modules/@arcgis/core/views/layers/support/ClipArea.js","../node_modules/@arcgis/core/views/layers/support/Geometry.js","../node_modules/@arcgis/core/views/layers/support/Path.js","../node_modules/@arcgis/core/views/2d/layers/LayerView2D.js","../node_modules/@arcgis/core/views/2d/engine/webgl/visualVariablesUtils.js","../node_modules/@arcgis/core/renderers/support/clickToleranceUtils.js","../node_modules/@arcgis/core/views/support/drapedUtils.js","../node_modules/@arcgis/core/views/layers/support/popupUtils.js","../node_modules/@arcgis/core/AggregateGraphic.js","../node_modules/@arcgis/core/views/layers/support/FeatureFilter.js","../node_modules/@arcgis/core/views/layers/support/FeatureEffect.js","../node_modules/@arcgis/core/views/layers/FeatureLayerView.js","../node_modules/@arcgis/core/views/2d/layers/features/tileRenderers.js","../node_modules/@arcgis/core/views/2d/layers/support/FeatureLayerProxy.js","../node_modules/@arcgis/core/views/2d/tiling/TileManager.js","../node_modules/@arcgis/core/views/2d/layers/FeatureLayerView2D.js"],"names":["p","a","l","n","o","EventedMixin","i","constructor","e","super","this","layer","parent","initialize","when","catch","name","r","id","s","title","t","getLogger","declaredClass","error","get","canResume","getSuspendInfo","suspended","legendEnabled","updatingHandles","updating","isUpdating","_override","_clearOverride","visible","suspendInfo","view","ready","viewNotReady","loaded","layerNotLoaded","layerInvisible","prototype","readOnly","type","Boolean","d","arguments","left","right","top","bottom","clone","_get","Number","String","json","write","y","c","base","key","typeMap","extent","polygon","geometry","types","read","m","path","ofType","rect","clips","moving","attached","lastUpdateId","updateRequested","container","h","fadeTransitionEnabled","opacity","handles","add","requestUpdate","blendMode","effect","on","notifyChange","whenLayerView","then","destroyed","attach","destroy","detach","remove","isVisibleAtScale","minScale","maxScale","processUpdate","isFulfilled","isResolved","_set","update","isRendering","scale","set","minDataValue","maxDataValue","minSize","maxSize","SIZE_MINMAX_VALUE","expression","valueExpression","Array","isArray","stops","SIZE_SCALE_STOPS","field","levels","SIZE_FIELD_STOPS","valueUnit","SIZE_UNIT_VALUE","NONE","xoffset","Math","max","abs","yoffset","length","size","filter","map","f","floor","renderer","event","pointerType","visualVariables","symbol","uniqueValueInfos","forEach","classBreakInfos","resolution","overlayPixelSizeInMapUnits","basemapSpatialReference","equals","spatialReference","x","xmin","min","ymin","xmax","ymax","toMap","intersects","popupTemplate","getRequiredFields","fields","lastEditInfoEnabled","objectIdField","u","typeIdField","globalIdField","relationships","includes","push","indexOf","keyField","defaultPopupTemplateEnabled","defaultPopupTemplate","isAggregate","getEffectivePopupTemplate","sourceLayer","featureReduction","popupEnabled","getObjectId","objectId","cloneProperties","esriSpatialRelIntersects","esriSpatialRelContains","esriSpatialRelCrosses","esriSpatialRelDisjoint","esriSpatialRelEnvelopeIntersects","esriSpatialRelIndexIntersects","esriSpatialRelOverlaps","esriSpatialRelTouches","esriSpatialRelWithin","esriSpatialRelRelation","esriSRUnit_Meter","esriSRUnit_Kilometer","esriSRUnit_Foot","esriSRUnit_StatuteMile","esriSRUnit_NauticalMile","esriSRUnit_USNauticalMile","where","spatialRelationship","hiddenIds","Set","distance","objectIds","units","timeExtent","enabled","writeWhere","enable","createQuery","source","reader","target","writer","from","overridePolicy","j","includedEffect","excludedEffect","excludedLabelsVisible","q","R","_updatingRequiredFieldsPromise","requiredFields","F","_handleRequiredFieldsChange","w","outFields","highlight","Error","returnGeometry","outSpatialReference","intersection","queryFeatures","queryObjectIds","queryFeatureCount","queryExtent","_loadArcadeModules","_updateRequiredFields","displayField","collectRequiredFields","timeInfo","startField","endField","floorInfo","floorField","sort","validateFetchPopupFeatures","fetchClientPopupFeatures","clientGraphics","Promise","resolve","arcadeUtils","hasGeometryOperations","createPopupQuery","attributes","concat","features","geometryType","returnZ","returnM","b","isEmpty","E","v","g","default","_startupResolver","isReady","_controller","addResolvingPromise","_startWorker","signal","abort","_connection","close","client","tileRenderer","closed","startup","transferList","service","config","tileInfo","toJSON","tiles","invoke","updateTiles","promise","applyUpdate","setHighlight","refresh","queryLatestObservations","queryStatistics","getDisplayId","getFeature","getAggregate","getAggregateValueRanges","mapValidDisplayIds","onEdits","addedFeatures","deletedFeatures","updatedFeatures","enableEvent","value","strategy","_tiles","Map","buffer","acquireTile","releaseTile","tileInfoView","clear","_releaseTile","tileKeys","getTileCoverage","state","spans","lodInfo","level","row","colFrom","colTo","getId","normalizeCol","getWorldForColumn","_getOrAcquireTile","_addPlaceholders","has","pool","release","hasMissingTiles","added","removed","_getTile","delete","_addPlaceholderChildren","_addPlaceholderParent","_addPlaceholderChild","hasData","contains","getParentKey","patchCount","K","W","X","k","I","M","_pipelineIsUpdating","_updatingPipelineConfig","_onGoingEdits","_isRefreshing","_visibilityOverrides","_effect","_highlightIds","_lastPixelBuffer","effectLists","included","V","excluded","doRefresh","_lockGPUUploads","_proxy","_unlockGPUUploads","_doUpdate","_hasRequiredSupport","_getEffectiveRenderer","historicMoment","gdbVersion","definitionExpression","labelsVisible","labelingInfo","availableFields","pixelBuffer","N","L","_createConfiguration","schema","_createTileRendererHash","_tileRendererHash","_initTileRenderer","_serviceOptions","effects","onConfigUpdate","_tileStrategy","openPorts","featuresTilingScheme","hasHighlight","keys","_onceTilesUpdated","mesh","targets","aggregate","_forceAttributeTextureUpload","invalidateLabels","_updateHighlight","_updateClusterSizeTask","all","_initProxy","_initServiceOptions","valueRanges","isTable","_createClientOptions","z","_createServiceOptions","floors","getTime","JSON","stringify","geometryDefinition","filterHash","effectHash","streamFilter","clipsHash","hasEffects","_","isCollection","getAttribute","toArray","_addHighlight","_removeHighlight","hitTest","_hitTest","queryFeaturesJSON","fromJSON","_cleanUpQuery","count","setVisibility","_update","timeline","record","D","_acquireTile","some","removeAllChildren","uninstall","moveStart","viewChange","moveEnd","fetchPopupFeatures","_fetchServicePopupFeatures","C","createFetchPopupFeaturesQueryGeometry","setUpdating","emitEvent","emit","_detectQueryMode","capabilities","operations","supportsEditing","mode","featureCount","fullExtent","width","height","warn","customParameters","getFeatureDefinition","parsedUrl","dynamicDataSource","query","maxRecordCount","tileMaxRecordCount","_createMemoryServiceOptions","S","_createUpdateClusterSizeTask","watch","_updateClusterEffectiveRendererSizeVariable","_effectiveRenderer","dynamicClusterSize","O","T","P","_aggregateValueRanges","aggregateFields","once","A","layerView","install","_createFeatureDataHash","getAttributeHash","_injectOverrides","_addFloorFilterClause","G","viewAllLevelIds","replace","join","RegExp","trim","H","U","devicePixelRatio","window","filters","supportsTextureFloat","maxTextureSize","lockGPUUploads","unlockGPUUploads","forceAttributeTextureUpload","begin","_updatingPromise","end","_createHittestResult","B","referenceId","J","Y"],"mappings":"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","file":"static/js/135.5da019e7.chunk.js","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../chunks/tslib.es6.js\";import\"../../core/has.js\";import t from\"../../core/Logger.js\";import\"../../core/accessorSupport/ensureType.js\";import{property as r}from\"../../core/accessorSupport/decorators/property.js\";import{subclass as s}from\"../../core/accessorSupport/decorators/subclass.js\";import\"../../core/urlUtils.js\";import\"../../core/uuid.js\";import\"../../portal/support/resourceExtension.js\";import i from\"../../core/Accessor.js\";import o from\"../../core/Evented.js\";import{IdentifiableMixin as l}from\"../../core/Identifiable.js\";import{EsriPromiseMixin as n}from\"../../core/Promise.js\";import{HandleOwnerMixin as a}from\"../../core/HandleOwner.js\";let p=class extends(a(l(n(o.EventedMixin(i))))){constructor(e){super(e),this.layer=null,this.parent=null}initialize(){this.when().catch((e=>{if(\"layerview:create-error\"!==e.name){const r=this.layer&&this.layer.id||\"no id\",s=this.layer&&this.layer.title||\"no title\";throw t.getLogger(this.declaredClass).error(\"#resolve()\",`Failed to resolve layer view (layer title: '${s}', id: '${r}')`,e),e}}))}get fullOpacity(){const e=e=>null==e?1:e;return e(this.get(\"layer.opacity\"))*e(this.get(\"parent.fullOpacity\"))}get suspended(){return!this.canResume()}get suspendInfo(){return this.getSuspendInfo()}get legendEnabled(){return!this.suspended&&!0===this.layer.legendEnabled}get updating(){return!!(this.updatingHandles&&this.updatingHandles.updating||this.isUpdating())}get visible(){return!0===this.get(\"layer.visible\")}set visible(e){void 0!==e?this._override(\"visible\",e):this._clearOverride(\"visible\")}canResume(){return!this.get(\"parent.suspended\")&&this.get(\"view.ready\")&&this.get(\"layer.loaded\")&&this.visible||!1}getSuspendInfo(){const e=this.parent&&this.parent.suspended?this.parent.suspendInfo:{},t=this;return t.view&&t.view.ready||(e.viewNotReady=!0),this.layer&&this.layer.loaded||(e.layerNotLoaded=!0),this.visible||(e.layerInvisible=!0),e}isUpdating(){return!1}};e([r()],p.prototype,\"fullOpacity\",null),e([r()],p.prototype,\"layer\",void 0),e([r()],p.prototype,\"parent\",void 0),e([r({readOnly:!0})],p.prototype,\"suspended\",null),e([r({readOnly:!0})],p.prototype,\"suspendInfo\",null),e([r({readOnly:!0})],p.prototype,\"legendEnabled\",null),e([r({type:Boolean,readOnly:!0})],p.prototype,\"updating\",null),e([r()],p.prototype,\"visible\",null),p=e([s(\"esri.views.layers.LayerView\")],p);var d=p;export default d;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{_ as t}from\"../../../chunks/tslib.es6.js\";import\"../../../core/has.js\";import\"../../../core/Logger.js\";import\"../../../core/accessorSupport/ensureType.js\";import{property as r}from\"../../../core/accessorSupport/decorators/property.js\";import{subclass as o}from\"../../../core/accessorSupport/decorators/subclass.js\";import\"../../../core/urlUtils.js\";import\"../../../core/uuid.js\";import\"../../../portal/support/resourceExtension.js\";import e from\"./ClipArea.js\";var s;let i=s=class extends e{constructor(){super(...arguments),this.type=\"rect\",this.left=null,this.right=null,this.top=null,this.bottom=null}clone(){return new s({left:this.left,right:this.right,top:this.top,bottom:this.bottom})}get version(){return(this._get(\"version\")||0)+1}};t([r({type:[Number,String],json:{write:!0}})],i.prototype,\"left\",void 0),t([r({type:[Number,String],json:{write:!0}})],i.prototype,\"right\",void 0),t([r({type:[Number,String],json:{write:!0}})],i.prototype,\"top\",void 0),t([r({type:[Number,String],json:{write:!0}})],i.prototype,\"bottom\",void 0),t([r({readOnly:!0})],i.prototype,\"version\",null),i=s=t([o(\"esri.views.layers.support.ClipRect\")],i);var p=i;export default p;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{_ as r}from\"../../../chunks/tslib.es6.js\";import\"../../../core/has.js\";import\"../../../core/Logger.js\";import\"../../../core/accessorSupport/ensureType.js\";import\"../../../core/accessorSupport/decorators/property.js\";import{subclass as o}from\"../../../core/accessorSupport/decorators/subclass.js\";import\"../../../core/urlUtils.js\";import\"../../../core/uuid.js\";import\"../../../portal/support/resourceExtension.js\";import{JSONSupport as s}from\"../../../core/JSONSupport.js\";let e=class extends s{};e=r([o(\"esri.views.layers.support.ClipArea\")],e);var p=e;export default p;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{_ as r}from\"../../../chunks/tslib.es6.js\";import\"../../../core/has.js\";import\"../../../core/Logger.js\";import\"../../../core/accessorSupport/ensureType.js\";import{property as o}from\"../../../core/accessorSupport/decorators/property.js\";import{subclass as e}from\"../../../core/accessorSupport/decorators/subclass.js\";import\"../../../core/urlUtils.js\";import\"../../../core/uuid.js\";import\"../../../portal/support/resourceExtension.js\";import t from\"../../../geometry/Geometry.js\";import s from\"../../../geometry/Extent.js\";import p from\"../../../geometry/Polygon.js\";import{fromJSON as m}from\"../../../geometry/support/jsonUtils.js\";import\"../../../geometry.js\";import i from\"./ClipArea.js\";var y;const c={base:t,key:\"type\",typeMap:{extent:s,polygon:p}};let n=y=class extends i{constructor(){super(...arguments),this.type=\"geometry\",this.geometry=null}get version(){return(this._get(\"version\")||0)+1}clone(){return new y({geometry:this.geometry.clone()})}};r([o({types:c,json:{read:m,write:!0}})],n.prototype,\"geometry\",void 0),r([o({readOnly:!0})],n.prototype,\"version\",null),n=y=r([e(\"esri.views.layers.support.Geometry\")],n);var l=n;export default l;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{_ as r}from\"../../../chunks/tslib.es6.js\";import\"../../../core/has.js\";import\"../../../core/Logger.js\";import\"../../../core/accessorSupport/ensureType.js\";import{property as o}from\"../../../core/accessorSupport/decorators/property.js\";import{subclass as s}from\"../../../core/accessorSupport/decorators/subclass.js\";import\"../../../core/urlUtils.js\";import\"../../../core/uuid.js\";import\"../../../portal/support/resourceExtension.js\";import t from\"./ClipArea.js\";let e=class extends t{constructor(){super(...arguments),this.type=\"path\",this.path=[]}get version(){return(this._get(\"version\")||0)+1}};r([o({type:[[[Number]]],json:{write:!0}})],e.prototype,\"path\",void 0),r([o({readOnly:!0})],e.prototype,\"version\",null),e=r([s(\"esri.views.layers.support.Path\")],e);var p=e;export default p;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{_ as t}from\"../../../chunks/tslib.es6.js\";import\"../../../core/has.js\";import\"../../../core/Logger.js\";import\"../../../core/accessorSupport/ensureType.js\";import{property as e}from\"../../../core/accessorSupport/decorators/property.js\";import{subclass as s}from\"../../../core/accessorSupport/decorators/subclass.js\";import\"../../../core/urlUtils.js\";import\"../../../core/uuid.js\";import\"../../../portal/support/resourceExtension.js\";import i from\"../../../core/Collection.js\";import{referenceSetter as r}from\"../../../core/collectionUtils.js\";import{init as o}from\"../../../core/watchUtils.js\";import a from\"../../layers/support/ClipArea.js\";import p from\"../../layers/support/ClipRect.js\";import{Container as h}from\"../engine/Container.js\";import n from\"../../layers/support/Geometry.js\";import d from\"../../layers/support/Path.js\";const c=i.ofType({key:\"type\",base:a,typeMap:{rect:p,path:d,geometry:n}}),l=i=>{let a=class extends i{constructor(){super(...arguments),this.clips=new c,this.moving=!1,this.attached=!1,this.lastUpdateId=-1,this.updateRequested=!1}initialize(){var t;this.container||(this.container=new h),this.container.fadeTransitionEnabled=!0,this.container.opacity=0,this.container.clips=this.clips,this.handles.add([o(this,\"suspended\",(t=>{this.container&&(this.container.visible=!t),this.view&&!t&&this.updateRequested&&this.view.requestUpdate()}),!0),o(this,[\"layer.opacity\",\"container\"],(()=>{var t,e;this.container&&(this.container.opacity=null!=(t=null==(e=this.layer)?void 0:e.opacity)?t:1)}),!0),o(this,[\"layer.blendMode\"],(t=>{this.container&&(this.container.blendMode=t)}),!0),o(this,[\"layer.effect\"],(t=>{this.container&&(this.container.effect=t)}),!0),this.clips.on(\"change\",(()=>{this.container.clips=this.clips,this.notifyChange(\"clips\")}))]),null!=(t=this.view)&&t.whenLayerView?this.view.whenLayerView(this.layer).then((t=>{t!==this||this.attached||this.destroyed||(this.attach(),this.requestUpdate(),this.attached=!0)}),(()=>{})):this.when().then((()=>{this.attached||this.destroyed||(this.attach(),this.requestUpdate(),this.attached=!0)}),(()=>{}))}destroy(){this.attached&&(this.detach(),this.attached=!1),this.handles.remove(\"initialize\"),this.updateRequested=!1}get updating(){return!this.attached||!this.suspended&&(this.updateRequested||this.isUpdating())}isVisibleAtScale(t){let e=!0;const s=this.layer,i=s.minScale,r=s.maxScale;if(null!=i&&null!=r){let s=!i,o=!r;!s&&t<=i&&(s=!0),!o&&t>=r&&(o=!0),e=s&&o}return e}requestUpdate(){this.destroyed||this.updateRequested||(this.updateRequested=!0,this.suspended||this.view.requestUpdate())}processUpdate(t){!this.isFulfilled()||this.isResolved()?(this._set(\"updateParameters\",t),this.updateRequested&&!this.suspended&&(this.updateRequested=!1,this.update(t))):this.updateRequested=!1}isUpdating(){return!1}isRendering(){return!1}canResume(){return!!super.canResume()&&this.isVisibleAtScale(this.view.scale)}};return t([e({type:c,set(t){const e=r(t,this._get(\"clips\"),c);this._set(\"clips\",e)}})],a.prototype,\"clips\",void 0),t([e()],a.prototype,\"moving\",void 0),t([e()],a.prototype,\"attached\",void 0),t([e()],a.prototype,\"container\",void 0),t([e()],a.prototype,\"suspended\",void 0),t([e({readOnly:!0})],a.prototype,\"updateParameters\",void 0),t([e()],a.prototype,\"updateRequested\",void 0),t([e()],a.prototype,\"updating\",null),t([e()],a.prototype,\"view\",void 0),a=t([s(\"esri.views.2d.layers.LayerView2D\")],a),a};export{l as LayerView2DMixin};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport e from\"../../../../core/Logger.js\";import s from\"../../../../core/Error.js\";import{WGLVVFlag as i}from\"./enums.js\";import{isNumber as r}from\"./Utils.js\";const l=e.getLogger(\"esri.views.2d.engine.webgl\");function o(e){return r(e.minDataValue)&&r(e.maxDataValue)&&null!=e.minSize&&null!=e.maxSize?i.SIZE_MINMAX_VALUE:(e.expression&&\"view.scale\"===e.expression||e.valueExpression&&\"$view.scale\"===e.valueExpression)&&Array.isArray(e.stops)?i.SIZE_SCALE_STOPS:(null!=e.field||e.expression&&\"view.scale\"!==e.expression||e.valueExpression&&\"$view.scale\"!==e.valueExpression)&&(Array.isArray(e.stops)||\"levels\"in e&&e.levels)?i.SIZE_FIELD_STOPS:(null!=e.field||e.expression&&\"view.scale\"!==e.expression||e.valueExpression&&\"$view.scale\"!==e.valueExpression)&&null!=e.valueUnit?i.SIZE_UNIT_VALUE:(l.error(new s(\"mapview-bad-type\",\"Found invalid size VisualVariable\",e)),i.NONE)}export{o as getTypeOfSizeVisualVariable};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nfunction t(t,e){return e?\"xoffset\"in e&&e.xoffset?Math.max(t,Math.abs(e.xoffset)):\"yoffset\"in e&&e.yoffset?Math.max(t,Math.abs(e.yoffset||0)):t:t}function e(t){let e=0,n=0;for(let r=0;r<t.length;r++){const s=t[r].size;\"number\"==typeof s&&(e+=s,n++)}return e/n}function n(t,n){return\"number\"==typeof t?t:t&&t.stops&&t.stops.length?e(t.stops):n}function r(t,e){if(!e)return t;const r=e.filter((t=>\"size\"===t.type)).map((e=>{const{maxSize:r,minSize:s}=e;return(n(r,t)+n(s,t))/2}));let s=0;const o=r.length;if(0===o)return t;for(let n=0;n<o;n++)s+=r[n];const f=Math.floor(s/o);return Math.max(f,t)}function s(e){const n=e&&e.renderer,s=\"touch\"===(e&&e.event&&e.event.pointerType)?9:6;if(!n)return s;const o=\"visualVariables\"in n?r(s,n.visualVariables):s;if(\"simple\"===n.type)return t(o,n.symbol);if(\"unique-value\"===n.type){let e=o;return n.uniqueValueInfos.forEach((n=>{e=t(e,n.symbol)})),e}if(\"class-breaks\"===n.type){let e=o;return n.classBreakInfos.forEach((n=>{e=t(e,n.symbol)})),e}return n.type,o}export{s as calculateTolerance};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{isSome as e,isNone as t}from\"../../core/maybe.js\";import r from\"../../geometry/Extent.js\";import\"../../geometry.js\";import{getMetersPerUnitForSR as n}from\"../../core/unitUtils.js\";import{calculateTolerance as i}from\"../../renderers/support/clickToleranceUtils.js\";function a(t,i,a,o=new r){let s;if(\"2d\"===a.type)s=i*a.resolution;else if(\"3d\"===a.type){const r=a.overlayPixelSizeInMapUnits(t),o=a.basemapSpatialReference;s=e(o)&&!o.equals(a.spatialReference)?n(o)/n(a.spatialReference):i*r}const m=t.x-s,p=t.y-s,c=t.x+s,l=t.y+s,{spatialReference:f}=a;return o.xmin=Math.min(m,c),o.ymin=Math.min(p,l),o.xmax=Math.max(m,c),o.ymax=Math.max(p,l),o.spatialReference=f,o}function o(e,r,n){const o=n.toMap(e);if(t(o))return!1;return a(o,i(),n,s).intersects(r)}const s=new r;export{a as createQueryGeometry,o as intersectsDrapedGeometry};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{isSome as e}from\"../../../core/maybe.js\";import{getFeatureEditFields as p,fixFields as l,hasField as t}from\"../../../layers/support/fieldUtils.js\";async function i(i,d=i.popupTemplate){if(!e(d))return[];const o=await d.getRequiredFields(i.fields),{lastEditInfoEnabled:s}=d,{objectIdField:u,typeIdField:a,globalIdField:n,relationships:f}=i;if(o.includes(\"*\"))return[\"*\"];const r=s?await p(i):[],m=l(i.fields,[...o,...r]);return a&&m.push(a),m&&u&&t(i.fields,u)&&-1===m.indexOf(u)&&m.push(u),m&&n&&t(i.fields,n)&&-1===m.indexOf(n)&&m.push(n),f&&f.forEach((e=>{const{keyField:p}=e;m&&p&&t(i.fields,p)&&-1===m.indexOf(p)&&m.push(p)})),m}function d(p,l){return p.popupTemplate?p.popupTemplate:e(l)&&l.defaultPopupTemplateEnabled&&e(p.defaultPopupTemplate)?p.defaultPopupTemplate:null}export{d as getFetchPopupTemplate,i as getRequiredFields};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"./chunks/tslib.es6.js\";import\"./core/has.js\";import\"./core/Logger.js\";import\"./core/accessorSupport/ensureType.js\";import{property as r}from\"./core/accessorSupport/decorators/property.js\";import{subclass as o}from\"./core/accessorSupport/decorators/subclass.js\";import\"./core/urlUtils.js\";import\"./core/uuid.js\";import\"./portal/support/resourceExtension.js\";import t from\"./Graphic.js\";var p;let s=p=class extends t{constructor(){super(...arguments),this.isAggregate=!0}getEffectivePopupTemplate(e=!1){if(this.popupTemplate)return this.popupTemplate;const r=this.sourceLayer&&this.sourceLayer.featureReduction;return r&&\"popupTemplate\"in r&&r.popupEnabled?r.popupTemplate:null}getObjectId(){return this.objectId}clone(){return new p({objectId:this.objectId,...this.cloneProperties()})}};e([r({type:Boolean})],s.prototype,\"isAggregate\",void 0),e([r({type:Number,json:{read:!0}})],s.prototype,\"objectId\",void 0),s=p=e([o(\"esri.AggregateGraphic\")],s);var c=s;export default c;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../chunks/tslib.es6.js\";import\"../../../core/has.js\";import{clone as t}from\"../../../core/lang.js\";import\"../../../core/Logger.js\";import\"../../../core/accessorSupport/ensureType.js\";import{property as r}from\"../../../core/accessorSupport/decorators/property.js\";import{JSONMap as i}from\"../../../core/jsonMap.js\";import{subclass as s}from\"../../../core/accessorSupport/decorators/subclass.js\";import{writer as o}from\"../../../core/accessorSupport/decorators/writer.js\";import\"../../../core/urlUtils.js\";import\"../../../core/uuid.js\";import\"../../../portal/support/resourceExtension.js\";import{JSONSupport as n}from\"../../../core/JSONSupport.js\";import{fromJSON as a}from\"../../../geometry/support/jsonUtils.js\";import{geometryTypes as p}from\"../../../geometry.js\";import l from\"../../../TimeExtent.js\";import c from\"../../../tasks/support/Query.js\";var d;const m=new i({esriSpatialRelIntersects:\"intersects\",esriSpatialRelContains:\"contains\",esriSpatialRelCrosses:\"crosses\",esriSpatialRelDisjoint:\"disjoint\",esriSpatialRelEnvelopeIntersects:\"envelope-intersects\",esriSpatialRelIndexIntersects:\"index-intersects\",esriSpatialRelOverlaps:\"overlaps\",esriSpatialRelTouches:\"touches\",esriSpatialRelWithin:\"within\",esriSpatialRelRelation:\"relation\"}),u=new i({esriSRUnit_Meter:\"meters\",esriSRUnit_Kilometer:\"kilometers\",esriSRUnit_Foot:\"feet\",esriSRUnit_StatuteMile:\"miles\",esriSRUnit_NauticalMile:\"nautical-miles\",esriSRUnit_USNauticalMile:\"us-nautical-miles\"});let h=d=class extends n{constructor(e){super(e),this.where=null,this.geometry=null,this.spatialRelationship=\"intersects\",this.hiddenIds=new Set,this.distance=void 0,this.objectIds=null,this.units=null,this.timeExtent=null,this.enabled=!1}writeWhere(e,t){t.where=e||\"1=1\"}enable(){this._set(\"enabled\",!0)}createQuery(e={}){const{where:r,geometry:i,spatialRelationship:s,timeExtent:o,objectIds:n,units:a,distance:p}=this;return new c({geometry:t(i),objectIds:t(n),spatialRelationship:s,timeExtent:t(o),where:r,units:a,distance:p,...e})}clone(){const{where:e,geometry:r,spatialRelationship:i,hiddenIds:s,timeExtent:o,objectIds:n,units:a,distance:p}=this,l=new Set;return s.forEach((e=>l.add(e))),new d({geometry:t(r),hiddenIds:l,objectIds:t(n),spatialRelationship:i,timeExtent:t(o),where:e,units:a,distance:p})}};e([r({type:String})],h.prototype,\"where\",void 0),e([o(\"where\")],h.prototype,\"writeWhere\",null),e([r({types:p,json:{read:a,write:!0}})],h.prototype,\"geometry\",void 0),e([r({type:String,json:{read:{source:\"spatialRel\",reader:m.read},write:{target:\"spatialRel\",writer:m.write}}})],h.prototype,\"spatialRelationship\",void 0),e([r({json:{write:(e,t,r)=>t[r]=Array.from(e),read:e=>new Set(e)}})],h.prototype,\"hiddenIds\",void 0),e([r({type:Number,json:{write:{overridePolicy:e=>({enabled:e>0})}}})],h.prototype,\"distance\",void 0),e([r({type:[Number],json:{write:!0}})],h.prototype,\"objectIds\",void 0),e([r({type:String,json:{read:u.read,write:{writer:u.write,overridePolicy(e){return{enabled:e&&this.distance>0}}}}})],h.prototype,\"units\",void 0),e([r({type:l,json:{write:!0}})],h.prototype,\"timeExtent\",void 0),e([r({readOnly:!0})],h.prototype,\"enabled\",void 0),h=d=e([s(\"esri.views.layers.support.FeatureFilter\")],h);var j=h;export default j;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../chunks/tslib.es6.js\";import\"../../../core/has.js\";import\"../../../core/Logger.js\";import\"../../../core/accessorSupport/ensureType.js\";import{property as r}from\"../../../core/accessorSupport/decorators/property.js\";import{subclass as t}from\"../../../core/accessorSupport/decorators/subclass.js\";import\"../../../core/urlUtils.js\";import\"../../../core/uuid.js\";import\"../../../portal/support/resourceExtension.js\";import{JSONSupport as o}from\"../../../core/JSONSupport.js\";import s from\"./FeatureFilter.js\";var i;let c=i=class extends o{constructor(){super(...arguments),this.filter=null,this.includedEffect=null,this.excludedEffect=null,this.excludedLabelsVisible=!1}clone(){return new i({filter:this.filter&&this.filter.clone(),includedEffect:this.includedEffect,excludedEffect:this.excludedEffect,excludedLabelsVisible:this.excludedLabelsVisible})}};e([r({type:s,json:{write:!0}})],c.prototype,\"filter\",void 0),e([r({json:{write:!0}})],c.prototype,\"includedEffect\",void 0),e([r({json:{write:!0}})],c.prototype,\"excludedEffect\",void 0),e([r({type:Boolean,json:{write:!0}})],c.prototype,\"excludedLabelsVisible\",void 0),c=i=e([t(\"esri.views.layers.support.FeatureEffect\")],c);var l=c;export default l;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../chunks/tslib.es6.js\";import\"../../core/has.js\";import{isSome as t}from\"../../core/maybe.js\";import r from\"../../core/Logger.js\";import\"../../core/accessorSupport/ensureType.js\";import{property as i}from\"../../core/accessorSupport/decorators/property.js\";import{subclass as s}from\"../../core/accessorSupport/decorators/subclass.js\";import o from\"../../core/Error.js\";import\"../../core/urlUtils.js\";import\"../../core/uuid.js\";import\"../../portal/support/resourceExtension.js\";import{eachAlways as l}from\"../../core/promiseUtils.js\";import{loadArcade as a}from\"../../support/arcadeOnDemand.js\";import{fixFields as n,unpackFieldNames as u,collectLabelingFields as p,collectElevationFields as m,collectFilterFields as d,collectFeatureReductionFields as f,collectFields as c,collectField as y,featureHasFields as h}from\"../../layers/support/fieldUtils.js\";import{init as F,on as w}from\"../../core/watchUtils.js\";import{combinedViewLayerTimeExtentProperty as g}from\"../../layers/support/commonProperties.js\";import x from\"../../tasks/support/Query.js\";import v from\"./support/FeatureFilter.js\";import E from\"./support/FeatureEffect.js\";import{getFetchPopupTemplate as j,getRequiredFields as b}from\"./support/popupUtils.js\";const q=r.getLogger(\"esri.views.layers.FeatureLayerView\"),R=r=>{let R=class extends r{constructor(...e){super(...e),this._updatingRequiredFieldsPromise=null,this.effect=null,this.filter=null,this.timeExtent=null,this.layer=null,this.requiredFields=[],this.view=null}initialize(){F(this,[\"layer.renderer\",\"layer.labelingInfo\",\"layer.elevationInfo.featureExpressionInfo\",\"layer.displayField\",\"filter\",\"effect\",\"layer.timeInfo\",\"layer.floorInfo\",\"timeExtent\"],(()=>this._handleRequiredFieldsChange()),!0),w(this,\"view.floors\",\"change\",(()=>this._handleRequiredFieldsChange()))}get availableFields(){const{layer:e,layer:{fields:t},requiredFields:r}=this;return\"outFields\"in e&&e.outFields?n(t,[...u(t,e.outFields),...r]):n(t,r)}get maximumNumberOfFeatures(){return 0}set maximumNumberOfFeatures(e){q.error(\"#maximumNumberOfFeatures=\",\"Setting maximum number of features is not supported\")}get maximumNumberOfFeaturesExceeded(){return!1}highlight(e){throw new Error(\"missing implementation\")}createQuery(){const e={outFields:[\"*\"],returnGeometry:!0,outSpatialReference:this.view.spatialReference},r=t(this.filter)?this.filter.createQuery(e):new x(e);return t(this.timeExtent)&&(r.timeExtent=t(r.timeExtent)?r.timeExtent.intersection(this.timeExtent):this.timeExtent.clone()),r}queryFeatures(e,t){throw new Error(\"missing implementation\")}queryObjectIds(e,t){throw new Error(\"missing implementation\")}queryFeatureCount(e,t){throw new Error(\"missing implementation\")}queryExtent(e,t){throw new Error(\"missing implementation\")}_loadArcadeModules(e){if(e.get(\"expressionInfos.length\"))return a()}_handleRequiredFieldsChange(){const e=this._updateRequiredFields();this._set(\"_updatingRequiredFieldsPromise\",e),e.then((()=>{this._updatingRequiredFieldsPromise===e&&this._set(\"_updatingRequiredFieldsPromise\",null)}))}async _updateRequiredFields(){if(!this.layer||!this.view)return;const e=\"3d\"===this.view.type,{layer:r,layer:{fields:i,objectIdField:s,renderer:o,displayField:a}}=this,n=r.featureReduction,u=new Set,h=await l([o?o.collectRequiredFields(u,i):null,p(u,r),e?m(u,r):null,t(this.filter)?d(u,r,this.filter):null,this.effect?d(u,r,this.effect.filter):null,n?f(u,r,n):null]);r.timeInfo&&this.timeExtent&&c(u,r.fields,[r.timeInfo.startField,r.timeInfo.endField]),\"feature\"===r.type&&r.floorInfo&&c(u,r.fields,[r.floorInfo.floorField]);for(const t of h)t.error&&q.error(t.error);y(u,i,s),e&&a&&y(u,i,a);const F=Array.from(u).sort();this._set(\"requiredFields\",F)}validateFetchPopupFeatures(e){const{layer:t,layer:{popupEnabled:r}}=this;if(!r)return new o(\"featurelayerview:fetchPopupFeatures\",\"Popups are disabled\",{layer:t});return j(this.layer,e)?void 0:new o(\"featurelayerview:fetchPopupFeatures\",\"Layer does not define a popup template\",{layer:t})}async fetchClientPopupFeatures(e){const r=t(e)?e.clientGraphics:null;if(!r||0===r.length)return Promise.resolve([]);const i=[],s=[],{layer:o}=this,l=j(o,e);if(!t(l))return Promise.resolve([]);const a=await this._loadArcadeModules(l),n=a&&a.arcadeUtils.hasGeometryOperations(l),p=await this.createPopupQuery(e),m=u(o.fields,p.outFields);for(const t of r)n||!h(m,t)?s.push(t):i.push(t);return\"stream\"===o.type||0===s.length?Promise.resolve(i):(p.objectIds=s.map((e=>e.attributes[o.objectIdField])),o.queryFeatures(p).then((e=>i.concat(e.features))).catch((()=>s)))}async createPopupQuery(e){const r=this.layer,i=r.createQuery(),s=j(r,e),o=t(s)&&await this._loadArcadeModules(s),l=t(s)&&o&&o.arcadeUtils.hasGeometryOperations(s),a=!(\"point\"!==r.geometryType&&!l);return i.returnGeometry=a,i.returnZ=a,i.returnM=a,i.outFields=await b(this.layer,s),i.outSpatialReference=this.view.spatialReference,i}canResume(){return!!super.canResume()&&(!t(this.timeExtent)||!this.timeExtent.isEmpty)}};return e([i()],R.prototype,\"_updatingRequiredFieldsPromise\",void 0),e([i({readOnly:!0})],R.prototype,\"availableFields\",null),e([i({type:E})],R.prototype,\"effect\",void 0),e([i({type:v})],R.prototype,\"filter\",void 0),e([i(g)],R.prototype,\"timeExtent\",void 0),e([i()],R.prototype,\"layer\",void 0),e([i({type:Number})],R.prototype,\"maximumNumberOfFeatures\",null),e([i({readOnly:!0,type:Boolean})],R.prototype,\"maximumNumberOfFeaturesExceeded\",null),e([i({readOnly:!0})],R.prototype,\"requiredFields\",void 0),e([i()],R.prototype,\"suspended\",void 0),e([i()],R.prototype,\"view\",void 0),R=e([s(\"esri.views.layers.FeatureLayerView\")],R),R};export default R;export{R as FeatureLayerView};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nasync function e(e,a){if(!e)return null;switch(e.type){case\"class-breaks\":case\"simple\":case\"unique-value\":case\"dot-density\":case\"dictionary\":return new((await import(\"./tileRenderers/SymbolTileRenderer.js\")).default)(a);case\"heatmap\":return new((await import(\"./tileRenderers/HeatmapTileRenderer.js\")).default)(a)}}export{e as createOrReuseTileRenderer};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../../chunks/tslib.es6.js\";import\"../../../../core/has.js\";import\"../../../../core/Logger.js\";import\"../../../../core/accessorSupport/ensureType.js\";import{property as t}from\"../../../../core/accessorSupport/decorators/property.js\";import{subclass as r}from\"../../../../core/accessorSupport/decorators/subclass.js\";import\"../../../../core/urlUtils.js\";import\"../../../../core/uuid.js\";import\"../../../../portal/support/resourceExtension.js\";import{createResolver as s,createAbortController as o,ignoreAbortErrors as i,throwIfNotAbortError as n}from\"../../../../core/promiseUtils.js\";import{EsriPromise as a}from\"../../../../core/Promise.js\";import{open as c}from\"../../../../core/workers/workers.js\";function l(e){return Array.isArray(e)}let u=class extends a{constructor(e){super(e),this._startupResolver=s(),this.isReady=!1}initialize(){this._controller=o(),this.addResolvingPromise(this._startWorker(this._controller.signal))}destroy(){this._controller.abort(),this._connection&&this._connection.close()}set tileRenderer(e){this.client.tileRenderer=e}get closed(){return this._connection.closed}async startup(e,t,r,s){await this.when();const o=this._controller.signal,i=l(r.source)?{transferList:r.source,signal:o}:void 0,n={service:r,config:t,tileInfo:e.tileInfo.toJSON(),tiles:s};await this._connection.invoke(\"startup\",n,i),this._startupResolver.resolve(),this._set(\"isReady\",!0)}async updateTiles(e){return await this._startupResolver.promise,i(this._connection.invoke(\"updateTiles\",e))}async update(e){const t={config:e};return await this._startupResolver.promise,this._connection.invoke(\"update\",t)}async applyUpdate(e){return await this._startupResolver.promise,this._connection.invoke(\"applyUpdate\",e)}async setHighlight(e){return await this._startupResolver.promise,i(this._connection.invoke(\"controller.setHighlight\",e))}async refresh(){return await this._startupResolver.promise,i(this._connection.invoke(\"controller.refresh\"))}async queryFeatures(e,t){return await this._startupResolver.promise,this._connection.invoke(\"controller.queryFeatures\",e.toJSON(),t)}async queryObjectIds(e,t){return await this._startupResolver.promise,this._connection.invoke(\"controller.queryObjectIds\",e.toJSON(),t)}async queryFeatureCount(e,t){return await this._startupResolver.promise,this._connection.invoke(\"controller.queryFeatureCount\",e.toJSON(),t)}async queryExtent(e,t){return this._connection.invoke(\"controller.queryExtent\",e.toJSON(),t)}async queryLatestObservations(e,t){return await this._startupResolver.promise,this._connection.invoke(\"controller.queryLatestObservations\",e.toJSON(),t)}async queryStatistics(e){return await this._startupResolver.promise,this._connection.invoke(\"controller.queryStatistics\",e)}async getObjectId(e){return await this._startupResolver.promise,this._connection.invoke(\"controller.getObjectId\",e)}async getDisplayId(e){return await this._startupResolver.promise,this._connection.invoke(\"controller.getDisplayId\",e)}async getFeature(e){return await this._startupResolver.promise,this._connection.invoke(\"controller.getFeature\",e)}async getAggregate(e){return await this._startupResolver.promise,this._connection.invoke(\"controller.getAggregate\",e)}async getAggregateValueRanges(){return await this._startupResolver.promise,this._connection.invoke(\"controller.getAggregateValueRanges\")}async mapValidDisplayIds(e){return await this._startupResolver.promise,this._connection.invoke(\"controller.mapValidDisplayIds\",e)}async onEdits(e){await this._startupResolver.promise;const{addedFeatures:t,deletedFeatures:r,updatedFeatures:s}=e;return i(this._connection.invoke(\"controller.onEdits\",{addedFeatures:t,deletedFeatures:r,updatedFeatures:s}))}async enableEvent(e,t){return await this._startupResolver.promise,i(this._connection.invoke(\"controller.enableEvent\",{name:e,value:t}))}async _startWorker(e){try{this._connection=await c(\"Pipeline\",{client:this.client,strategy:\"dedicated\",signal:e})}catch(t){n(t)}}};e([t()],u.prototype,\"isReady\",void 0),e([t()],u.prototype,\"client\",void 0),e([t()],u.prototype,\"tileRenderer\",null),u=e([r(\"esri.views.2d.layers.support.FeatureLayerProxy\")],u);var p=u;export default p;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{isSome as e}from\"../../../core/maybe.js\";import i from\"./TileKey.js\";import t from\"./TileCoverage.js\";const l=1e-6;class s{constructor(e){this._tiles=new Map,this.buffer=0,this.acquireTile=e.acquireTile,this.releaseTile=e.releaseTile,this.tileInfoView=e.tileInfoView,this.buffer=e.buffer}destroy(){}clear(){this._tiles.forEach((e=>this._releaseTile(e)))}tileKeys(){const e=[];return this._tiles.forEach(((i,t)=>e.push(t))),e}update(e){const l=this.tileInfoView.getTileCoverage(e.state,this.buffer,\"closest\"),{spans:s,lodInfo:r}=l,{level:a}=r,o=[],d=[],h=new Set,n=new Set;for(const{row:t,colFrom:c,colTo:f}of s)for(let e=c;e<=f;e++){const l=i.getId(a,t,r.normalizeCol(e),r.getWorldForColumn(e)),s=this._getOrAcquireTile(o,l);h.add(l),s.isReady?s.visible=!0:n.add(s.key)}n.forEach((e=>this._addPlaceholders(h,e))),this._tiles.forEach((e=>{h.has(e.key.id)||(d.push(e.key.id),this._releaseTile(e))})),t.pool.release(l);return{hasMissingTiles:n.size>0,added:o,removed:d}}_getOrAcquireTile(e,t){if(!this._tiles.has(t)){const l=this.acquireTile(new i(t));e.push(t),this._tiles.set(t,l),l.visible=!1}return this._tiles.get(t)}_getTile(e){return this._tiles.get(e)}_releaseTile(e){this._tiles.delete(e.key.id),this.releaseTile(e)}_addPlaceholders(e,i){const t=this._addPlaceholderChildren(e,i);if(!(Math.abs(1-t)<l)){if(!this._addPlaceholderParent(e,i)){this._getTile(i.id).visible=!0}}}_addPlaceholderChildren(e,i){let t=0;return this._tiles.forEach((l=>{t+=this._addPlaceholderChild(e,l,i)})),t}_addPlaceholderChild(e,i,t){if(i.key.level<=t.level||!i.hasData||!t.contains(i.key))return 0;i.visible=!0,e.add(i.key.id);return 1/(1<<2*(i.key.level-t.level))}_addPlaceholderParent(i,t){let l=t.getParentKey(),s=0,r=null;for(;e(l);){if(i.has(l.id))return!0;const e=this._getTile(l.id);if(null!=e&&e.isReady)return e.visible=!0,i.add(e.key.id),!0;null!=e&&e.hasData&&e.patchCount>s&&(s=e.patchCount,r=e),l=l.getParentKey()}return!!r&&(r.visible=!0,i.add(r.key.id),!0)}}export{s as TileManager};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../chunks/tslib.es6.js\";import t from\"../../../core/has.js\";import{clone as i}from\"../../../core/lang.js\";import{andThen as r,unwrapOr as s,isSome as a,isNone as n}from\"../../../core/maybe.js\";import o from\"../../../core/Logger.js\";import\"../../../core/accessorSupport/ensureType.js\";import{property as l}from\"../../../core/accessorSupport/decorators/property.js\";import{subclass as h}from\"../../../core/accessorSupport/decorators/subclass.js\";import u from\"../../../core/Error.js\";import\"../../../core/urlUtils.js\";import\"../../../core/uuid.js\";import\"../../../portal/support/resourceExtension.js\";import{flatten as d}from\"../../../core/arrayUtils.js\";import{debounce as p,isAbortError as c,eachAlwaysValues as f,after as y}from\"../../../core/promiseUtils.js\";import g from\"../../../geometry/Extent.js\";import\"../../../geometry.js\";import m from\"../../../core/Collection.js\";import _ from\"../../../Graphic.js\";import v from\"../../../AggregateGraphic.js\";import{init as R,whenFalseOnce as b}from\"../../../core/watchUtils.js\";import{isHostedAgolService as x}from\"../../../layers/support/arcgisLayerUrl.js\";import w from\"../../../tasks/support/FeatureSet.js\";import S from\"../../../tasks/support/Query.js\";import{MAX_FILTERS as F}from\"../engine/webgl/definitions.js\";import U from\"../../webgl/capabilities.js\";import{RefreshableLayerView as I}from\"../../layers/RefreshableLayerView.js\";import E from\"../../layers/LayerView.js\";import{calculateTolerance as C}from\"../../../renderers/support/clickToleranceUtils.js\";import{createQueryGeometry as j}from\"../../support/drapedUtils.js\";import{findSizeVV as O,createClusterCountSizeVariable as T,isClusterCompatibleRenderer as P,createClusterRenderer as q}from\"./support/clusterUtils.js\";import V from\"../../layers/effects/EffectList.js\";import{computePxBuffer as L}from\"./features/support/pixelBuffering.js\";import{toJSONGeometryType as N}from\"./support/util.js\";import{createSchema as H}from\"./features/schemaUtils.js\";import G from\"../../layers/support/FeatureFilter.js\";import J from\"../../layers/support/FeatureEffect.js\";import{FeatureLayerView as k}from\"../../layers/FeatureLayerView.js\";import{LayerView2DMixin as M}from\"./LayerView2D.js\";import{createOrReuseTileRenderer as A}from\"./features/tileRenderers.js\";import z from\"./support/FeatureLayerProxy.js\";import{TileManager as D}from\"../tiling/TileManager.js\";const $=2147483648,Q=1,B=e=>(e&$)>>>31===Q;function K(e){return e&&\"openPorts\"in e}const W=o.getLogger(\"esri.views.2d.layers.FeatureLayerView2D\");let X=class extends(k(I(M(E)))){constructor(){super(...arguments),this._pipelineIsUpdating=!0,this._updatingPipelineConfig=!1,this._onGoingEdits=0,this._isRefreshing=!1,this._visibilityOverrides=new Set,this._effect=null,this._highlightIds=new Map,this._lastPixelBuffer=0,this.filter=null,this.effectLists={included:new V,excluded:new V},this.doRefresh=p((async()=>{this.isUpdating()&&await b(this,\"updating\"),this._set(\"_isRefreshing\",!0),this._lockGPUUploads();try{await this._proxy.refresh()}catch(e){c(e),0}this._unlockGPUUploads(),this._set(\"_isRefreshing\",!1)})),this._doUpdate=p((async()=>{try{if(this.destroyed||!this._hasRequiredSupport(this.layer))return;this._set(\"_updatingPipelineConfig\",!0),await b(this,\"_isRefreshing\");const{effect:t,filter:i}=this;await this._updateRequiredFields();const{renderer:r}=this._getEffectiveRenderer();this._set(\"_effectiveRenderer\",r);const s=\"feature\"===this.layer.type?this.layer.historicMoment:null,n=\"feature\"===this.layer.type?this.layer.gdbVersion:null,o={renderer:this.layer.renderer,spatialReference:this.layer.spatialReference,timeExtent:this.layer.timeExtent,definitionExpression:this.layer.definitionExpression,featureReduction:this.layer.featureReduction,fields:this.layer.fields,geometryType:this.layer.geometryType,historicMoment:s,labelsVisible:this.layer.labelsVisible,labelingInfo:this.layer.labelingInfo,availableFields:this.availableFields,effect:this.effect,filter:this.filter,gdbVersion:n,pixelBuffer:0},l=N(this.layer.geometryType),h=await L(r,l,this.layer.featureReduction),u=this._createConfiguration(o,i,t);this._lastPixelBuffer=0===h?0:Math.max(h,this._lastPixelBuffer),u.schema.source.pixelBuffer=this._lastPixelBuffer;const d=this._createTileRendererHash(r);if(d!==this._tileRendererHash){await this._initTileRenderer(r);const e=this._serviceOptions;this.effects.forEach((e=>a(e)&&a(e.filter)&&e.filter.enable())),this.tileRenderer.onConfigUpdate(r);const t={added:this._tileStrategy.tileKeys(),removed:[]},i=this.layer;\"stream\"!==i.type&&K(i.source)&&(e.source=await i.source.openPorts()),await this._proxy.startup(this.view.featuresTilingScheme,u,e,t),this.hasHighlight()&&await this._proxy.setHighlight(Array.from(this._highlightIds.keys())),await this._onceTilesUpdated(),this.tileRenderer.onConfigUpdate(r)}else{const t=await this._proxy.update(u);(t.mesh||t.targets.aggregate)&&this._lockGPUUploads();try{await this._proxy.applyUpdate(t)}catch(e){c(e)||W.error(e)}(t.mesh||t.targets.aggregate)&&this._unlockGPUUploads(),this.effects.forEach((e=>a(e)&&a(e.filter)&&e.filter.enable())),this.tileRenderer.onConfigUpdate(r),this._forceAttributeTextureUpload()}this._tileRendererHash=d,this.tileRenderer.invalidateLabels(),this.requestUpdate()}catch(e){}})),this._updateHighlight=p((async()=>this._proxy.setHighlight(Array.from(this._highlightIds.keys()))))}destroy(){var e,t;null==(e=this._proxy)||e.destroy(),r(this._updateClusterSizeTask,(e=>e.remove())),null==(t=this.tileRenderer)||t.destroy()}initialize(){this.addResolvingPromise(Promise.all([this._initProxy(),this._initServiceOptions()])),this.handles.add([this.on(\"valueRangesChanged\",(e=>{this._set(\"_aggregateValueRanges\",e.valueRanges)})),R(this,\"effect\",(e=>{this.effectLists.included.effect=null==e?void 0:e.includedEffect})),R(this,\"effect\",(e=>{this.effectLists.excluded.effect=null==e?void 0:e.excludedEffect}))])}async _initProxy(){if(\"stream\"!==this.layer.type&&\"ogc-feature\"!==this.layer.type&&this.layer.isTable)throw new u(\"featurelayerview:table-not-supported\",\"table feature layer can't be displayed\",{layer:this.layer});this._proxy&&this._proxy.destroy();const e=this._createClientOptions();return this._set(\"_proxy\",new z({client:e})),this._proxy.when()}async _initServiceOptions(){this._set(\"_serviceOptions\",await this._createServiceOptions())}get labelsVisible(){return!this.suspended&&this.layer.labelingInfo&&this.layer.labelsVisible}get effect(){return s(this._effect,null)}set effect(e){const t=this._effect;a(t)&&a(t.filter)&&t.filter.enabled&&a(e)&&a(e.filter)&&e.filter.enable(),this._effect=e,this.notifyChange(\"effect\")}get effects(){return this.effect&&[this.effect]||[]}get queryMode(){return this._serviceOptions.type}get renderingConfigHash(){if(!this.layer)return null;const e=this.availableFields,t=this.layer,i=this.view.floors,{definitionExpression:r,renderer:s,labelingInfo:n}=t,o=\"feature\"===t.type?t.gdbVersion:void 0,l=\"feature\"===t.type&&t.historicMoment?t.historicMoment.getTime():void 0,{timeExtent:h}=this,u=\"stream\"===t.type?`${JSON.stringify(t.geometryDefinition)}${t.definitionExpression}`:null,d=JSON.stringify(this.clips),p=t.featureReduction&&t.featureReduction.toJSON();return JSON.stringify({filterHash:a(this.filter)&&this.filter.toJSON(),effectHash:a(this.effect)&&this.effect.toJSON(),streamFilter:u,gdbVersion:o,definitionExpression:r,historicMoment:l,availableFields:e,renderer:s,labelingInfo:t.labelsVisible&&n,timeExtent:h,floors:i,clipsHash:d,featureReduction:p})}get hasEffects(){return this.effectLists.included.hasEffects||this.effectLists.excluded.hasEffects}highlight(e){let t;return e instanceof _?t=[e.getObjectId()]:\"number\"==typeof e||\"string\"==typeof e?t=[e]:m.isCollection(e)?t=e.map((e=>e&&e.getAttribute(this.layer.objectIdField))).toArray():Array.isArray(e)&&e.length>0&&(t=\"number\"==typeof e[0]||\"string\"==typeof e[0]?e:e.map((e=>e&&e.getAttribute(this.layer.objectIdField)))),t&&t.length?(t=t.filter((e=>null!=e)),this._addHighlight(t),{remove:()=>this._removeHighlight(t)}):{remove:()=>{}}}hasHighlight(){return!!this._highlightIds.size}hitTest(e,t){return this._hitTest(e,t)}queryStatistics(){return this._proxy.queryStatistics()}queryFeatures(e,t){return this.queryFeaturesJSON(e,t).then((e=>{const t=w.fromJSON(e);return t.features.forEach((e=>{e.layer=this.layer,e.sourceLayer=this.layer})),t}))}queryFeaturesJSON(e,t){return this._proxy.queryFeatures(this._cleanUpQuery(e),t)}queryObjectIds(e,t){return this._proxy.queryObjectIds(this._cleanUpQuery(e),t)}queryFeatureCount(e,t){return this._proxy.queryFeatureCount(this._cleanUpQuery(e),t)}queryExtent(e,t){return this._proxy.queryExtent(this._cleanUpQuery(e),t).then((e=>({count:e.count,extent:g.fromJSON(e.extent)})))}setVisibility(e,t){t?this._visibilityOverrides.delete(e):this._visibilityOverrides.add(e),this._update()}update(e){if(!this._tileStrategy||!this.tileRenderer)return;const{hasMissingTiles:t,added:i,removed:r}=this._tileStrategy.update(e);(i.length||r.length)&&this._proxy.updateTiles({added:i,removed:r}),t&&this.requestUpdate(),this.notifyChange(\"updating\")}attach(){this.view.timeline.record(`${this.layer.title} (FeatureLayer) Attach`),this._tileStrategy=new D({acquireTile:e=>this._acquireTile(e),releaseTile:e=>this._releaseTile(e),tileInfoView:this.view.featuresTilingScheme,buffer:0}),this.handles.add(R(this,\"renderingConfigHash\",(()=>this._update())),\"attach\"),\"stream\"!==this.layer.type&&this.handles.add(this.layer.on(\"edits\",(async e=>{this._set(\"_onGoingEdits\",this._onGoingEdits+1);try{const t=\"globalIdField\"in this.layer&&this.layer.globalIdField,i=e.deletedFeatures.some((e=>-1===e.objectId||!e.objectId)),r=t&&this.availableFields.includes(t);if(i&&!r)return void W.error(new u(\"mapview-apply-edits\",`Editing the specified service requires the layer's globalIdField, ${t} to be included the layer's outFields for updates to be reflected on the map`));await this._proxy.onEdits(e)}catch(t){c(t),0}this._set(\"_onGoingEdits\",Math.max(0,this._onGoingEdits-1))})),\"attach\")}detach(){this.container.removeAllChildren(),this.handles.remove(\"attach\"),this._updatingPipelineConfig=!1,this.tileRenderer&&(this.tileRenderer.uninstall(this.container),this.tileRenderer=null),this._tileStrategy&&(this._tileStrategy.destroy(),this._tileStrategy=null),this._tileRendererHash=null}moveStart(){this.requestUpdate()}viewChange(){this.requestUpdate()}moveEnd(){this.requestUpdate()}async fetchPopupFeatures(e,t){if(a(t)&&t.clientGraphics.length){const e=t.clientGraphics[0];if(e instanceof v)return[e]}const i=this.validateFetchPopupFeatures(t);if(i)throw i;if(a(t)&&0===t.clientGraphics.length)return[];const r=this.fetchClientPopupFeatures(t);if(!e)return r;const s=this._fetchServicePopupFeatures(e,t);return f([r,s]).then(d)}async _fetchServicePopupFeatures(e,t){if(\"stream\"===this.layer.type||\"ogc-feature\"===this.layer.type)return[];const i=await this.createPopupQuery(t),{layer:r}=this,{renderer:s}=r,n=a(t)?t.event:null,o=C({renderer:s,event:n});i.geometry=this.createFetchPopupFeaturesQueryGeometry(e,o);const l=new Set,{objectIdField:h}=r,u=a(t)?t.clientGraphics:null;if(u)for(const a of u)l.add(a.attributes[h]);return r.queryFeatures(i).then((e=>e.features.filter((e=>!l.has(e.attributes[h])))))}createFetchPopupFeaturesQueryGeometry(e,t){return j(e,t,this.view)}isUpdating(){return null!=this.layer.renderer&&(null!=this._updatingRequiredFieldsPromise||null==this.tileRenderer||!this._proxy||!this._proxy.isReady||this._pipelineIsUpdating||this._updatingPipelineConfig||this.tileRenderer.updating||this._onGoingEdits>0)}_createClientOptions(){return{setUpdating:e=>{this._set(\"_pipelineIsUpdating\",e)},emitEvent:e=>{this.emit(e.name,e.event)}}}async _detectQueryMode(e){if(\"path\"in e&&x(e.path)&&\"feature\"===this.layer.type&&\"point\"===this.layer.geometryType&&!this.layer.capabilities.operations.supportsEditing&&t(\"featurelayer-snapshot-enabled\"))try{const e=await this.layer.queryFeatureCount();if(e<=t(\"featurelayer-snapshot-point-min-threshold\"))return{mode:\"snapshot\",featureCount:e};const i=t(\"featurelayer-snapshot-point-max-threshold\"),r=t(\"featurelayer-snapshot-point-coverage\"),s=this.view.extent,a=this.layer.fullExtent,n=null==a?void 0:a.clone().intersection(s),o=(null==n?void 0:n.width)*(null==n?void 0:n.height),l=(null==a?void 0:a.width)*(null==a?void 0:a.height),h=0===l?0:o/l;if(e<=i&&h>=r)return{mode:\"snapshot\",featureCount:e}}catch(i){W.warn(\"mapview-feature-layer\",\"Encountered an error when querying for featureCount\",{error:i})}return{mode:\"on-demand\"}}async _createServiceOptions(){const e=this.layer;if(\"stream\"===e.type)return null;const{capabilities:t,objectIdField:r}=e,s=e.fields.map((e=>e.toJSON())),a=e.fullExtent&&e.fullExtent.toJSON(),n=N(e.geometryType),o=e.timeInfo&&e.timeInfo.toJSON()||null,l=e.spatialReference?e.spatialReference.toJSON():null,h=\"feature\"===e.type?e.customParameters:null,u=\"feature\"===e.type?e.globalIdField:null;let d;\"ogc-feature\"===e.type?d=e.source.getFeatureDefinition():K(e.source)?d=await e.source.openPorts():e.parsedUrl&&(d=i(e.parsedUrl),\"dynamicDataSource\"in e&&e.dynamicDataSource&&(d.query={layer:JSON.stringify({source:e.dynamicDataSource})}));const{mode:p,featureCount:c}=await this._detectQueryMode(d);return{type:p,featureCount:c,globalIdField:u,maxRecordCount:t.query.maxRecordCount,tileMaxRecordCount:t.query.tileMaxRecordCount,capabilities:t,fields:s,fullExtent:a,geometryType:n,objectIdField:r,source:d,timeInfo:o,spatialReference:l,customParameters:h}}async _createMemoryServiceOptions(e){const t=await e.openPorts();return{...this._createServiceOptions(),type:\"memory\",source:t}}_cleanUpQuery(e){const t=S.from(e)||this.createQuery();return t.outSpatialReference||(t.outSpatialReference=this.view.spatialReference),t}_createUpdateClusterSizeTask(e,t){return this.watch(\"_aggregateValueRanges\",(async i=>{this._updateClusterEffectiveRendererSizeVariable(e,t,i),this._updatingPipelineConfig||this.tileRenderer.onConfigUpdate(this._effectiveRenderer)}))}async _updateClusterEffectiveRendererSizeVariable(e,t,i){if(e.dynamicClusterSize&&\"visualVariables\"in e&&e.visualVariables){const r=O(e.visualVariables);if(a(r)&&\"cluster_count\"===r.field){const s=e.visualVariables.indexOf(r);e.visualVariables[s]=T(t,i);const a=e.clone();a.dynamicClusterSize=!0,this._set(\"_effectiveRenderer\",a)}}}_getEffectiveRenderer(){const e=this.layer.renderer,t=this.layer.featureReduction;if(a(this._updateClusterSizeTask)&&(this._updateClusterSizeTask.remove(),this._updateClusterSizeTask=null),t&&\"cluster\"===t.type&&P(e)){const i=t,s=[],a=q(s,e,i,this._aggregateValueRanges);return r(this._updateClusterSizeTask,(e=>e.remove())),this._updateClusterSizeTask=this._createUpdateClusterSizeTask(a,i),{renderer:a,aggregateFields:s,featureReduction:t}}return{renderer:e,aggregateFields:[],featureReduction:null}}_acquireTile(e){const t=this.tileRenderer.acquireTile(e);return t.once(\"attach\",(()=>{this.requestUpdate()})),t}_releaseTile(e){this.tileRenderer.releaseTile(e)}async _initTileRenderer(e){const t=await A(e,{layerView:this,tileInfoView:this.view.featuresTilingScheme,layer:this.layer});return this.tileRenderer&&(this._tileStrategy.clear(),this.tileRenderer.uninstall(this.container),this.tileRenderer.destroy(),this.tileRenderer=null),this.destroyed?null:(this._proxy.tileRenderer=t,this._set(\"tileRenderer\",t),this.tileRenderer.install(this.container),this.tileRenderer.onConfigUpdate(e),this.requestUpdate(),this.tileRenderer)}_createTileRendererHash(e){return`${\"heatmap\"===e.type?\"heatmap\":\"symbol\"}.${\"dot-density\"===e.type}`}_createFeatureDataHash(e,t,i){const r=e.getAttributeHash(),s=JSON.stringify(t),n=a(i)&&JSON.stringify(i.filter),o=JSON.stringify(this.timeExtent);let l=\"\";return this._visibilityOverrides.forEach((e=>l+=e)),`${r}.${s}.${n}.${o}.${l}`}get hasFilter(){const e=!!(\"floorInfo\"in this.layer&&this.layer.floorInfo&&this.view.floors&&this.view.floors.length);return!!this.filter||e||!!this._visibilityOverrides.size||!!this.timeExtent}_injectOverrides(e){const t=a(e)?e.timeExtent:null,i=a(this.timeExtent)&&a(t)?this.timeExtent.intersection(t):this.timeExtent||t;let r=null;const s=\"floorInfo\"in this.layer&&this.layer.floorInfo;if(s){const t=a(e)&&e.where;r=this._addFloorFilterClause(t)}if(!this._visibilityOverrides.size&&!i&&!s)return e;const n=a(e)&&e.clone()||new G;return n.hiddenIds=this._visibilityOverrides,n.timeExtent=i,r&&(n.where=r),n}_addFloorFilterClause(e){const t=this.layer;let i=e||\"\";if(\"floorInfo\"in t&&t.floorInfo){var r;let e=this.view.floors;if(!e||!e.length)return i;null!=(r=t.floorInfo.viewAllLevelIds)&&r.length&&(e=t.floorInfo.viewAllLevelIds);const s=e.filter((e=>\"\"!==e)).map((e=>\"'\"+e+\"'\"));s.push(\"''\");const n=t.floorInfo.floorField;let o=\"(\"+n+\" IN ({ids}) OR \"+n+\" IS NULL)\";if(o=o.replace(\"{ids}\",s.join(\", \")),a(i)&&i.includes(n)){let e=new RegExp(\"AND \\\\(\"+n+\".*NULL\\\\)\",\"g\");i=i.replace(e,\"\"),e=new RegExp(\"\\\\(\"+n+\".*NULL\\\\)\",\"g\"),i=i.replace(e,\"\"),i=i.replace(/\\s+/g,\" \").trim()}i=\"\"!==i?\"(\"+i+\") AND \"+o:o}return\"\"!==i?i:null}_createConfiguration(e,t,i){const r=\"feature\"===this.layer.type&&this.layer.historicMoment?this.layer.historicMoment.getTime():void 0,s=\"feature\"===this.layer.type?this.layer.gdbVersion:void 0,o=new Array(F),l=this._injectOverrides(t);o[0]=a(l)?l.toJSON():null,o[1]=a(i)&&i.filter?i.filter.toJSON():null;const h=H(e);if(n(h))return null;const u=U();return{definitionExpression:this.layer.definitionExpression,availableFields:this.availableFields,gdbVersion:s,historicMoment:r,devicePixelRatio:window.devicePixelRatio||1,filters:o,schema:h,supportsTextureFloat:u.supportsTextureFloat,maxTextureSize:u.maxTextureSize}}_hasRequiredSupport(e){var t;return!(\"dot-density\"===(null==(t=e.renderer)?void 0:t.type)&&!U().supportsTextureFloat)||(W.error(new u(\"webgl-missing-extension\",\"Missing WebGL extension OES_Texture_Float which is required for DotDensity\")),!1)}_onceTilesUpdated(){return this.requestUpdate(),b(this,\"_pipelineIsUpdating\",!1)}_lockGPUUploads(){this.tileRenderer&&this.tileRenderer.lockGPUUploads()}_unlockGPUUploads(){this.tileRenderer&&this.tileRenderer.unlockGPUUploads()}_forceAttributeTextureUpload(){this.tileRenderer&&this.tileRenderer.forceAttributeTextureUpload()}_update(){this.view.timeline.begin(`${this.layer.title} (FeatureLayer) Initial Pipeline Config`);const e=this._doUpdate();this._updatingPromise=e;const t=()=>{e===this._updatingPromise&&this._set(\"_updatingPipelineConfig\",!1),this.view&&this.view.timeline.end(`${this.layer.title} (FeatureLayer) Initial Pipeline Config`)};e.then(t).catch((e=>{c(e)||W.error(e),t()}))}_addHighlight(e){for(const t of e)if(this._highlightIds.has(t)){const e=this._highlightIds.get(t);this._highlightIds.set(t,e+1)}else this._highlightIds.set(t,1);this._updateHighlight().catch((e=>{c(e)||W.error(e)}))}_removeHighlight(e){for(const t of e)if(this._highlightIds.has(t)){const e=this._highlightIds.get(t)-1;0===e?this._highlightIds.delete(t):this._highlightIds.set(t,e)}this._updateHighlight().catch((e=>{c(e)||W.error(e)}))}_createHittestResult(e){return e.layer=this.layer,e.sourceLayer=this.layer,a(e.geometry)&&(e.geometry.spatialReference=this.view.spatialReference),e}async _hitTest(e,t){if(this.suspended||!this.tileRenderer)return null;const i=await this.tileRenderer.hitTest(e,t);if(0===i.length)return await y(1),null;const s=i[0];if(!B(s)){const e=await this._proxy.getFeature(s);return r(e,(e=>this._createHittestResult(_.fromJSON(e))))}const o=await this._proxy.getAggregate(s);if(n(o))return null;if(a(o.referenceId)){const e=await this._proxy.getFeature(o.referenceId);return r(e,(e=>this._createHittestResult(_.fromJSON(e))))}return this._createHittestResult(v.fromJSON(o))}};e([l()],X.prototype,\"_serviceOptions\",void 0),e([l()],X.prototype,\"_proxy\",void 0),e([l()],X.prototype,\"_pipelineIsUpdating\",void 0),e([l()],X.prototype,\"_updatingPipelineConfig\",void 0),e([l()],X.prototype,\"_effectiveRenderer\",void 0),e([l()],X.prototype,\"_aggregateValueRanges\",void 0),e([l()],X.prototype,\"_onGoingEdits\",void 0),e([l()],X.prototype,\"_isRefreshing\",void 0),e([l()],X.prototype,\"labelsVisible\",null),e([l({type:G})],X.prototype,\"filter\",void 0),e([l({type:J})],X.prototype,\"effect\",null),e([l({readOnly:!0})],X.prototype,\"effects\",null),e([l({readOnly:!0})],X.prototype,\"queryMode\",null),e([l()],X.prototype,\"renderingConfigHash\",null),e([l()],X.prototype,\"tileRenderer\",void 0),e([l()],X.prototype,\"updating\",void 0),X=e([h(\"esri.views.2d.layers.FeatureLayerView2D\")],X);var Y=X;export default Y;\n"],"sourceRoot":""}