"use strict";(globalThis.webpackChunkimaps=globalThis.webpackChunkimaps||[]).push([[4863],{52639:(e,t,i)=>{i.d(t,{Z:()=>f});var r=i(27366),a=i(59486),s=i(44055),n=i(51508),o=i(11582),l=i(46784),u=i(92026),c=i(95439),p=i(49861),d=(i(63780),i(93169),i(25243),i(69912)),h=i(77981);function y(e){if(!(0,u.pC)(e))return null;const t={};for(const i in e){const r=e[i];r&&(t[i]=r.toJSON())}return 0!==Object.keys(t).length?t:null}let m=class extends((0,o.J)(l.wq)){constructor(){super(...arguments),this.isAggregate=!1,this.layer=null,this.popupTemplate=null,this.sourceLayer=null,Object.defineProperty(this,"uid",{value:(0,c.D)(),configurable:!0})}normalizeCtorArgs(e,t,i,r){return e&&!e.declaredClass?e:{geometry:e,symbol:t,attributes:i,popupTemplate:r}}set aggregateGeometries(e){const t=this._get("aggregateGeometries");JSON.stringify(t)!==JSON.stringify(e)&&this._set("aggregateGeometries",e)}set attributes(e){const t=this._get("attributes");t!==e&&(this._set("attributes",e),this._notifyLayer("attributes",t,e))}set geometry(e){const t=this._get("geometry");t!==e&&(this._set("geometry",e),this._notifyLayer("geometry",t,e))}set symbol(e){const t=this._get("symbol");t!==e&&(this._set("symbol",e),this._notifyLayer("symbol",t,e))}set visible(e){const t=this._get("visible");t!==e&&(this._set("visible",e),this._notifyLayer("visible",t,e))}getEffectivePopupTemplate(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.popupTemplate)return this.popupTemplate;for(const t of[this.sourceLayer,this.layer])if(t){if("popupTemplate"in t&&t.popupTemplate)return t.popupTemplate;if(e&&"defaultPopupTemplate"in t&&(0,u.pC)(t.defaultPopupTemplate))return t.defaultPopupTemplate}return null}getAttribute(e){return this.attributes&&this.attributes[e]}setAttribute(e,t){if(this.attributes){const i=this.getAttribute(e);this.attributes[e]=t,this._notifyLayer("attributes",i,t,e)}else this.attributes={[e]:t},this._notifyLayer("attributes",void 0,t,e)}getObjectId(){return this.sourceLayer&&"objectIdField"in this.sourceLayer&&this.sourceLayer.objectIdField?this.getAttribute(this.sourceLayer.objectIdField):null}toJSON(){return{aggregateGeometries:y(this.aggregateGeometries),geometry:(0,u.pC)(this.geometry)?this.geometry.toJSON():null,symbol:(0,u.pC)(this.symbol)?this.symbol.toJSON():null,attributes:{...this.attributes},popupTemplate:this.popupTemplate&&this.popupTemplate.toJSON()}}notifyGeometryChanged(){this._notifyLayer("geometry",this.geometry,this.geometry)}notifyMeshTransformChanged(){(0,u.pC)(this.geometry)&&"mesh"===this.geometry.type&&this._notifyLayer("transform",this.geometry.transform,this.geometry.transform)}_notifyLayer(e,t,i,r){if(!this.layer||!("graphicChanged"in this.layer))return;const a={graphic:this,property:e,oldValue:t,newValue:i};"attributes"===e&&(a.attributeName=r),this.layer.graphicChanged(a)}};(0,r._)([(0,p.Cb)({value:null,json:{read:function(e){if(!e)return null;const t={};for(const i in e){const r=(0,h.im)(e[i]);r&&(t[i]=r)}return 0!==Object.keys(t).length?t:null}}})],m.prototype,"aggregateGeometries",null),(0,r._)([(0,p.Cb)({value:null})],m.prototype,"attributes",null),(0,r._)([(0,p.Cb)({value:null,types:a.qM,json:{read:h.im}})],m.prototype,"geometry",null),(0,r._)([(0,p.Cb)({type:Boolean})],m.prototype,"isAggregate",void 0),(0,r._)([(0,p.Cb)({clonable:"reference"})],m.prototype,"layer",void 0),(0,r._)([(0,p.Cb)({type:s.Z})],m.prototype,"popupTemplate",void 0),(0,r._)([(0,p.Cb)({clonable:"reference"})],m.prototype,"sourceLayer",void 0),(0,r._)([(0,p.Cb)({value:null,types:n.LB})],m.prototype,"symbol",null),(0,r._)([(0,p.Cb)({type:Boolean,value:!0})],m.prototype,"visible",null),m=(0,r._)([(0,d.j)("esri.Graphic")],m),(m||(m={})).generateUID=c.D;const f=m},79056:(e,t,i)=>{i.d(t,{IG:()=>n});var r=i(27366),a=i(69912);let s=0;const n=e=>{let t=class extends e{constructor(){super(...arguments),Object.defineProperty(this,"uid",{writable:!1,configurable:!1,value:Date.now().toString(16)+"-object-"+s++})}};return t=(0,r._)([(0,a.j)("esri.core.Identifiable")],t),t};let o=class extends(n(class{})){};o=(0,r._)([(0,a.j)("esri.core.Identifiable")],o)},8025:(e,t,i)=>{i.d(t,{B:()=>a});var r=i(49861);function a(e,t){const i=t?{...t,source:e}:e;return(0,r.Cb)({aliasOf:i})}},14921:(e,t,i)=>{i.d(t,{Ed:()=>s,UI:()=>n,mt:()=>l,q6:()=>o});var r=i(92026),a=i(66978);function s(e,t,i){return(0,a.as)(e.map(((e,r)=>t.apply(i,[e,r]))))}async function n(e,t,i){return(await(0,a.as)(e.map(((e,r)=>t.apply(i,[e,r]))))).map((e=>e.value))}async function o(e){if((0,r.Wi)(e))return{ok:!1,error:new Error("no promise provided")};try{return{ok:!0,value:await e}}catch(t){return{ok:!1,error:t}}}async function l(e){try{return{ok:!0,value:await e}}catch(t){return(0,a.r9)(t),{ok:!1,error:t}}}},41644:(e,t,i)=>{i.d(t,{Bg:()=>r,sM:()=>a});i(93169);function r(e){}function a(e){return()=>e}},76672:(e,t,i)=>{i.d(t,{E:()=>a,_:()=>s});var r=i(92026);async function a(e,t){const{WhereClause:r}=await i.e(8562).then(i.bind(i,48562));return r.create(e,t)}function s(e,t){return(0,r.pC)(e)?(0,r.pC)(t)?`(${e}) AND (${t})`:e:t}},30651:(e,t,i)=>{i.d(t,{Z:()=>w});var r=i(27366),a=(i(59486),i(76200)),s=i(10064),n=i(91505),o=i(79056),l=i(54472),u=i(32718),c=i(66978),p=i(35995),d=i(49861),h=(i(63780),i(93169),i(25243),i(69912)),y=i(42265);const m=u.Z.getLogger("esri.layers.support.fromPortalItem");var f=i(53866),b=i(78952);let v=0,g=class extends(n.Z.EventedMixin((0,o.IG)(l.Z))){constructor(){super(...arguments),this.attributionDataUrl=null,this.fullExtent=new f.Z(-180,-90,180,90,b.Z.WGS84),this.id=Date.now().toString(16)+"-layer-"+v++,this.legendEnabled=!0,this.listMode="show",this.opacity=1,this.parent=null,this.popupEnabled=!0,this.attributionVisible=!0,this.spatialReference=b.Z.WGS84,this.title=null,this.type=null,this.url=null,this.visible=!0}static async fromArcGISServerUrl(e){const t="string"==typeof e?{url:e}:e;return(await i.e(4650).then(i.bind(i,94650))).fromUrl(t)}static fromPortalItem(e){return async function(e){const t="portalItem"in e?e:{portalItem:e},r=await Promise.all([i.e(4226),i.e(8995),i.e(9803),i.e(3120)]).then(i.bind(i,43139));try{return await r.fromItem(t)}catch(a){const e=t&&t.portalItem,i=e&&e.id||"unset",r=e&&e.portal&&e.portal.url||y.Z.portalUrl;throw m.error("#fromPortalItem()","Failed to create layer from portal item (portal: '"+r+"', id: '"+i+"')",a),a}}(e)}initialize(){this.when().catch((e=>{(0,c.D_)(e)||u.Z.getLogger(this.declaredClass).error("#load()",`Failed to load layer (title: '${this.title??"no title"}', id: '${this.id??"no id"}')`,{error:e})}))}destroy(){if(this.parent){const e=this,t=this.parent;"layers"in t&&t.layers.includes(e)?t.layers.remove(e):"tables"in t&&t.tables.includes(e)?t.tables.remove(e):"baseLayers"in t&&t.baseLayers.includes(e)?t.baseLayers.remove(e):"baseLayers"in t&&t.referenceLayers.includes(e)&&t.referenceLayers.remove(e)}}get hasAttributionData(){return null!=this.attributionDataUrl}get parsedUrl(){const e=this.url;return e?(0,p.mN)(e):null}async fetchAttributionData(){const e=this.attributionDataUrl;if(this.hasAttributionData&&e)return(await(0,a.default)(e,{query:{f:"json"},responseType:"json"})).data;throw new s.Z("layer:no-attribution-data","Layer does not have attribution data")}};(0,r._)([(0,d.Cb)({type:String})],g.prototype,"attributionDataUrl",void 0),(0,r._)([(0,d.Cb)({type:f.Z})],g.prototype,"fullExtent",void 0),(0,r._)([(0,d.Cb)({readOnly:!0})],g.prototype,"hasAttributionData",null),(0,r._)([(0,d.Cb)({type:String,clonable:!1})],g.prototype,"id",void 0),(0,r._)([(0,d.Cb)({type:Boolean,nonNullable:!0})],g.prototype,"legendEnabled",void 0),(0,r._)([(0,d.Cb)({type:["show","hide","hide-children"]})],g.prototype,"listMode",void 0),(0,r._)([(0,d.Cb)({type:Number,range:{min:0,max:1},nonNullable:!0})],g.prototype,"opacity",void 0),(0,r._)([(0,d.Cb)({clonable:!1})],g.prototype,"parent",void 0),(0,r._)([(0,d.Cb)({readOnly:!0})],g.prototype,"parsedUrl",null),(0,r._)([(0,d.Cb)({type:Boolean})],g.prototype,"popupEnabled",void 0),(0,r._)([(0,d.Cb)({type:Boolean})],g.prototype,"attributionVisible",void 0),(0,r._)([(0,d.Cb)({type:b.Z})],g.prototype,"spatialReference",void 0),(0,r._)([(0,d.Cb)({type:String})],g.prototype,"title",void 0),(0,r._)([(0,d.Cb)({readOnly:!0,json:{read:!1}})],g.prototype,"type",void 0),(0,r._)([(0,d.Cb)()],g.prototype,"url",void 0),(0,r._)([(0,d.Cb)({type:Boolean,nonNullable:!0})],g.prototype,"visible",void 0),g=(0,r._)([(0,h.j)("esri.layers.Layer")],g);const w=g},27961:(e,t,i)=>{i.d(t,{V:()=>n});var r=i(27366),a=i(49861),s=(i(63780),i(93169),i(25243),i(69912));const n=e=>{let t=class extends e{get apiKey(){return this._isOverridden("apiKey")?this._get("apiKey"):function(e){return"portalItem"in e}(this)?this.portalItem?.apiKey:null}set apiKey(e){null!=e?this._override("apiKey",e):(this._clearOverride("apiKey"),this.clear("apiKey","user"))}};return(0,r._)([(0,a.Cb)({type:String})],t.prototype,"apiKey",null),t=(0,r._)([(0,s.j)("esri.layers.mixins.APIKeyMixin")],t),t}},11936:(e,t,i)=>{i.d(t,{Y:()=>u});var r=i(27366),a=i(32718),s=i(92026),n=i(49861),o=(i(63780),i(93169),i(25243),i(69912)),l=i(25899);const u=e=>{let t=class extends e{get title(){if(this._get("title")&&"defaults"!==this.originOf("title"))return this._get("title");if(this.url){const e=(0,l.Qc)(this.url);if((0,s.pC)(e)&&e.title)return e.title}return this._get("title")||""}set title(e){this._set("title",e)}set url(e){this._set("url",(0,l.Nm)(e,a.Z.getLogger(this.declaredClass)))}};return(0,r._)([(0,n.Cb)()],t.prototype,"title",null),(0,r._)([(0,n.Cb)({type:String})],t.prototype,"url",null),t=(0,r._)([(0,o.j)("esri.layers.mixins.ArcGISService")],t),t}},6693:(e,t,i)=>{i.d(t,{h:()=>l});var r=i(27366),a=i(49861),s=(i(63780),i(93169),i(25243),i(69912)),n=i(60676);const o={read:{reader:n.ij},write:{allowNull:!0,writer:n.cW}},l=e=>{let t=class extends e{constructor(){super(...arguments),this.blendMode="normal",this.effect=null}};return(0,r._)([(0,a.Cb)({type:["average","color-burn","color-dodge","color","darken","destination-atop","destination-in","destination-out","destination-over","difference","exclusion","hard-light","hue","invert","lighten","lighter","luminosity","minus","multiply","normal","overlay","plus","reflect","saturation","screen","soft-light","source-atop","source-in","source-out","vivid-light","xor"],nonNullable:!0,json:{read:!1,write:!1,origins:{"web-map":{read:!0,write:!0},"portal-item":{read:!0,write:!0}}}})],t.prototype,"blendMode",void 0),(0,r._)([(0,a.Cb)({json:{read:!1,write:!1,origins:{"web-map":o,"portal-item":o}}})],t.prototype,"effect",void 0),t=(0,r._)([(0,s.j)("esri.layers.mixins.BlendLayer")],t),t}},29598:(e,t,i)=>{i.d(t,{I:()=>w});var r=i(27366),a=i(19545),s=i(76200),n=i(14921),o=i(10064),l=i(32718),u=i(92026),c=i(66978),p=i(35995),d=i(49861),h=(i(63780),i(93169),i(25243),i(38511)),y=i(69912),m=i(31201),f=i(70032),b=i(98995),v=i(79437);const g=l.Z.getLogger("esri.layers.mixins.PortalLayer"),w=e=>{let t=class extends e{constructor(){super(...arguments),this.resourceReferences={portalItem:null,paths:[]},this.userHasEditingPrivileges=!0}destroy(){this.portalItem?.destroy(),this.portalItem=null}set portalItem(e){e!==this._get("portalItem")&&(this.removeOrigin("portal-item"),this._set("portalItem",e))}readPortalItem(e,t,i){if(t.itemId)return new b.default({id:t.itemId,portal:i&&i.portal})}writePortalItem(e,t){e&&e.id&&(t.itemId=e.id)}async loadFromPortal(e,t){if(this.portalItem&&this.portalItem.id)try{const r=await i.e(3388).then(i.bind(i,33388));return(0,c.k_)(t),await r.load({instance:this,supportedTypes:e.supportedTypes,validateItem:e.validateItem,supportsData:e.supportsData},t)}catch(r){throw(0,c.D_)(r)||g.warn(`Failed to load layer (${this.title}, ${this.id}) portal item (${this.portalItem.id})\n  ${r}`),r}}async finishLoadEditablePortalLayer(e){this._set("userHasEditingPrivileges",await this._fetchUserHasEditingPrivileges(e).catch((e=>((0,c.r9)(e),!0))))}async _fetchUserHasEditingPrivileges(e){const t=this.url?a.id?.findCredential(this.url):null;if(!t)return!0;const i=_.credential===t?_.user:await this._fetchEditingUser(e);return _.credential=t,_.user=i,(0,u.Wi)(i)||null==i.privileges||i.privileges.includes("features:user:edit")}async _fetchEditingUser(e){const t=this.portalItem?.portal?.user;if(t)return t;const i=a.id.findServerInfo(this.url);if(!i?.owningSystemUrl)return null;const r=`${i.owningSystemUrl}/sharing/rest`,o=f.Z.getDefault();if(o&&o.loaded&&(0,p.Fv)(o.restUrl)===(0,p.Fv)(r))return o.user;const l=`${r}/community/self`,c=(0,u.pC)(e)?e.signal:null,d=await(0,n.q6)((0,s.default)(l,{authMode:"no-prompt",query:{f:"json"},signal:c}));return d.ok?v.default.fromJSON(d.value.data):null}read(e,t){t&&(t.layer=this),super.read(e,t)}write(e,t){const i=t&&t.portal,r=this.portalItem&&this.portalItem.id&&(this.portalItem.portal||f.Z.getDefault());return i&&r&&!(0,p.tm)(r.restUrl,i.restUrl)?(t.messages&&t.messages.push(new o.Z("layer:cross-portal",`The layer '${this.title} (${this.id})' cannot be persisted because it refers to an item on a different portal than the one being saved to. To save, set layer.portalItem to null or save to the same portal as the item associated with the layer`,{layer:this})),null):super.write(e,{...t,layer:this})}};return(0,r._)([(0,d.Cb)({type:b.default})],t.prototype,"portalItem",null),(0,r._)([(0,h.r)("web-document","portalItem",["itemId"])],t.prototype,"readPortalItem",null),(0,r._)([(0,m.c)("web-document","portalItem",{itemId:{type:String}})],t.prototype,"writePortalItem",null),(0,r._)([(0,d.Cb)({clonable:!1})],t.prototype,"resourceReferences",void 0),(0,r._)([(0,d.Cb)({readOnly:!0})],t.prototype,"userHasEditingPrivileges",void 0),t=(0,r._)([(0,y.j)("esri.layers.mixins.PortalLayer")],t),t},_={credential:null,user:null}},56811:(e,t,i)=>{i.d(t,{M:()=>n});var r=i(27366),a=i(49861),s=(i(63780),i(93169),i(25243),i(69912));const n=e=>{let t=class extends e{constructor(){super(...arguments),this.minScale=0,this.maxScale=0}get effectiveScaleRange(){const e={minScale:this.minScale,maxScale:this.maxScale},t=this.parent;t&&"effectiveScaleRange"in t&&function(e,t){e.minScale=e.minScale>0?t.minScale>0?Math.min(e.minScale,t.minScale):e.minScale:t.minScale,e.maxScale=e.maxScale>0?t.maxScale>0?Math.max(e.maxScale,t.maxScale):e.maxScale:t.maxScale}(e,t.effectiveScaleRange);const i=this._get("effectiveScaleRange");return i&&i.minScale===e.minScale&&i.maxScale===e.maxScale?i:e}};return(0,r._)([(0,a.Cb)({type:Number,nonNullable:!0,json:{write:!0}})],t.prototype,"minScale",void 0),(0,r._)([(0,a.Cb)({type:Number,nonNullable:!0,json:{write:!0}})],t.prototype,"maxScale",void 0),(0,r._)([(0,a.Cb)({readOnly:!0})],t.prototype,"effectiveScaleRange",null),t=(0,r._)([(0,s.j)("esri.layers.mixins.ScaleRangeLayer")],t),t}},71065:(e,t,i)=>{i.d(t,{Z:()=>c});var r,a=i(27366),s=i(40281),n=i(46784),o=i(49861),l=(i(63780),i(93169),i(25243),i(69912));let u=r=class extends n.wq{constructor(e){super(e),this.floorField=null,this.viewAllMode=!1,this.viewAllLevelIds=new s.Z}clone(){return new r({floorField:this.floorField,viewAllMode:this.viewAllMode,viewAllLevelIds:this.viewAllLevelIds})}};(0,a._)([(0,o.Cb)({type:String,json:{write:!0}})],u.prototype,"floorField",void 0),(0,a._)([(0,o.Cb)({json:{read:!1,write:!1}})],u.prototype,"viewAllMode",void 0),(0,a._)([(0,o.Cb)({json:{read:!1,write:!1}})],u.prototype,"viewAllLevelIds",void 0),u=r=(0,a._)([(0,l.j)("esri.layers.support.LayerFloorInfo")],u);const c=u},80724:(e,t,i)=>{var r,a;function s(e){return e&&"esri.renderers.visualVariables.SizeVariable"===e.declaredClass}function n(e){return null!=e&&!isNaN(e)&&isFinite(e)}function o(e){return e.valueExpression?r.Expression:e.field&&"string"==typeof e.field?r.Field:r.Unknown}function l(e,t){const i=t||o(e),s=e.valueUnit||"unknown";return i===r.Unknown?a.Constant:e.stops?a.Stops:null!=e.minSize&&null!=e.maxSize&&null!=e.minDataValue&&null!=e.maxDataValue?a.ClampedLinear:"unknown"===s?null!=e.minSize&&null!=e.minDataValue?e.minSize&&e.minDataValue?a.Proportional:a.Additive:a.Identity:a.RealWorldSize}i.d(t,{PS:()=>o,QW:()=>l,RY:()=>r,hL:()=>a,iY:()=>s,qh:()=>n}),function(e){e.Unknown="unknown",e.Expression="expression",e.Field="field"}(r||(r={})),function(e){e.Unknown="unknown",e.Stops="stops",e.ClampedLinear="clamped-linear",e.Proportional="proportional",e.Additive="additive",e.Constant="constant",e.Identity="identity",e.RealWorldSize="real-world-size"}(a||(a={}))},56011:(e,t,i)=>{i.r(t),i.d(t,{getAllSizes:()=>x,getColor:()=>y,getOpacity:()=>m,getRotationAngle:()=>f,getSize:()=>b,getSizeForValue:()=>w,getSizeFromNumberOrVariable:()=>v,getSizeRangeAtScale:()=>_,getVisualVariableValues:()=>S,viewScaleRE:()=>h});var r=i(51995),a=i(52639),s=i(41644),n=i(32718),o=i(92026),l=i(49229),u=i(80724);const c=n.Z.getLogger("esri.renderers.visualVariables.support.visualVariableUtils"),p=new a.Z,d=Math.PI,h=/^\s*(return\s+)?\$view\.scale\s*(;)?\s*$/i;function y(e,t,i){const a="visualVariables"in e&&e.visualVariables?e.visualVariables.find((e=>"color"===e.type)):e;if(!a)return;if("esri.renderers.visualVariables.ColorVariable"!==a.declaredClass)return void c.warn("The visualVariable should be an instance of esri.renderers.visualVariables.ColorVariable");const s="number"==typeof t,n=s?null:t,l=n&&n.attributes;let u=s?t:null;const p=a.field,{ipData:d,hasExpression:h}=a.cache;let y=a.cache.compiledFunc;if(!p&&!h){const e=a.stops;return e&&e[0]&&e[0].color}if("number"!=typeof u)if(h){if((0,o.Wi)(i)||(0,o.Wi)(i.arcade))return void c.error("Use of arcade expressions requires an arcade context");const e={viewingMode:i.viewingMode,scale:i.scale,spatialReference:i.spatialReference},t=i.arcade.arcadeUtils,r=t.getViewInfo(e),s=t.createExecContext(n,r);if(!y){const e=t.createSyntaxTree(a.valueExpression);y=t.createFunction(e),a.cache.compiledFunc=y}u=t.executeFunction(y,s)}else l&&(u=l[p]);const m=a.normalizationField,f=l?parseFloat(l[m]):void 0;if(null!=u&&(!m||s||!isNaN(f)&&0!==f)){isNaN(f)||s||(u/=f);const e=C(u,d);if(e){const t=e[0],s=e[1],n=t===s?a.stops[t].color:r.Z.blendColors(a.stops[t].color,a.stops[s].color,e[2],(0,o.pC)(i)?i.color:void 0);return new r.Z(n)}}}function m(e,t,i){const r="visualVariables"in e&&e.visualVariables?e.visualVariables.find((e=>"opacity"===e.type)):e;if(!r)return;if("esri.renderers.visualVariables.OpacityVariable"!==r.declaredClass)return void c.warn("The visualVariable should be an instance of esri.renderers.visualVariables.OpacityVariable");const a="number"==typeof t,s=a?null:t,n=s&&s.attributes;let l=a?t:null;const u=r.field,{ipData:p,hasExpression:d}=r.cache;let h=r.cache.compiledFunc;if(!u&&!d){const e=r.stops;return e&&e[0]&&e[0].opacity}if("number"!=typeof l)if(d){if((0,o.Wi)(i)||(0,o.Wi)(i.arcade))return void c.error("Use of arcade expressions requires an arcade context");const e={viewingMode:i.viewingMode,scale:i.scale,spatialReference:i.spatialReference},t=i.arcade.arcadeUtils,a=t.getViewInfo(e),n=t.createExecContext(s,a);if(!h){const e=t.createSyntaxTree(r.valueExpression);h=t.createFunction(e),r.cache.compiledFunc=h}l=t.executeFunction(h,n)}else n&&(l=n[u]);const y=r.normalizationField,m=n?parseFloat(n[y]):void 0;if(null!=l&&(!y||a||!isNaN(m)&&0!==m)){isNaN(m)||a||(l/=m);const e=C(l,p);if(e){const t=e[0],i=e[1];if(t===i)return r.stops[t].opacity;{const a=r.stops[t].opacity;return a+(r.stops[i].opacity-a)*e[2]}}}}function f(e,t,i){const r="visualVariables"in e&&e.visualVariables?e.visualVariables.find((e=>"rotation"===e.type)):e;if(!r)return;if("esri.renderers.visualVariables.RotationVariable"!==r.declaredClass)return void c.warn("The visualVariable should be an instance of esri.renderers.visualVariables.RotationVariable");const a=r.axis||"heading",s="heading"===a&&"arithmetic"===r.rotationType?90:0,n="heading"===a&&"arithmetic"===r.rotationType?-1:1,l="number"==typeof t?null:t,u=l&&l.attributes,p=r.field,{hasExpression:d}=r.cache;let h=r.cache.compiledFunc,y=0;if(!p&&!d)return y;if(d){if((0,o.Wi)(i)||(0,o.Wi)(i.arcade))return void c.error("Use of arcade expressions requires an arcade context");const e={viewingMode:i.viewingMode,scale:i.scale,spatialReference:i.spatialReference},t=i.arcade.arcadeUtils,a=t.getViewInfo(e),s=t.createExecContext(l,a);if(!h){const e=t.createSyntaxTree(r.valueExpression);h=t.createFunction(e),r.cache.compiledFunc=h}y=t.executeFunction(h,s)}else u&&(y=u[p]||0);return y="number"!=typeof y||isNaN(y)?null:s+n*y,y}function b(e,t,i){const r="visualVariables"in e&&e.visualVariables?e.visualVariables.find((e=>"size"===e.type)):e;if(!r)return;if("esri.renderers.visualVariables.SizeVariable"!==r.declaredClass)return void c.warn("The visualVariable should be an instance of esri.renderers.visualVariables.SizeVariable");const a=w(function(e,t,i){const r="number"==typeof t,a=r?null:t,s=a&&a.attributes;let n=r?t:null;const{isScaleDriven:l}=e.cache;let p=e.cache.compiledFunc;if(l){const t=(0,o.pC)(i)?i.scale:void 0,r=(0,o.pC)(i)?i.view:void 0;n=null==t||"3d"===r?function(e){let t=null,i=null;const r=e.stops;return r?(t=r[0].value,i=r[r.length-1].value):(t=e.minDataValue||0,i=e.maxDataValue||0),(t+i)/2}(e):t}else if(!r)switch(e.inputValueType){case u.RY.Expression:{if((0,o.Wi)(i)||(0,o.Wi)(i.arcade))return void c.error("Use of arcade expressions requires an arcade context");const t={viewingMode:i.viewingMode,scale:i.scale,spatialReference:i.spatialReference},r=i.arcade.arcadeUtils,s=r.getViewInfo(t),l=r.createExecContext(a,s);if(!p){const t=r.createSyntaxTree(e.valueExpression);p=r.createFunction(t),e.cache.compiledFunc=p}n=r.executeFunction(p,l);break}case u.RY.Field:s&&(n=s[e.field]);break;case u.RY.Unknown:n=null}if(!(0,u.qh)(n))return null;if(r||!e.normalizationField)return n;const d=s?parseFloat(s[e.normalizationField]):null;return(0,u.qh)(d)&&0!==d?n/d:null}(r,t,i),r,t,i,r.cache.ipData);return null==a||isNaN(a)?0:a}function v(e,t,i){return null==e?null:(0,u.iY)(e)?b(e,t,i):(0,u.qh)(e)?e:null}function g(e,t,i){return(0,u.qh)(i)&&e>i?i:(0,u.qh)(t)&&e<t?t:e}function w(e,t,i,r,a){switch(t.transformationType){case u.hL.Additive:return function(e,t,i,r){return e+(v(t.minSize,i,r)||t.minDataValue)}(e,t,i,r);case u.hL.Constant:return function(e,t,i){const r=e.stops;let a=r&&r.length&&r[0].size;return null==a&&(a=e.minSize),v(a,t,i)}(t,i,r);case u.hL.ClampedLinear:return function(e,t,i,r){const a=(e-t.minDataValue)/(t.maxDataValue-t.minDataValue),s=v(t.minSize,i,r),n=v(t.maxSize,i,r),l=(0,o.pC)(r)?r.shape:void 0;if(e<=t.minDataValue)return s;if(e>=t.maxDataValue)return n;if("area"===t.scaleBy&&l){const e="circle"===l,t=e?d*(s/2)**2:s*s,i=t+a*((e?d*(n/2)**2:n*n)-t);return e?2*Math.sqrt(i/d):Math.sqrt(i)}return s+a*(n-s)}(e,t,i,r);case u.hL.Proportional:return function(e,t,i,r){const a=(0,o.pC)(r)?r.shape:void 0,s=e/t.minDataValue,n=v(t.minSize,i,r),l=v(t.maxSize,i,r);let u=null;return u="circle"===a?2*Math.sqrt(s*(n/2)**2):"square"===a||"diamond"===a||"image"===a?Math.sqrt(s*n**2):s*n,g(u,n,l)}(e,t,i,r);case u.hL.Stops:return function(e,t,i,r,a){const[s,n,o]=C(e,a);if(s===n)return v(t.stops[s].size,i,r);{const e=v(t.stops[s].size,i,r);return e+(v(t.stops[n].size,i,r)-e)*o}}(e,t,i,r,a);case u.hL.RealWorldSize:return function(e,t,i,r){const a=((0,o.pC)(r)&&r.resolution?r.resolution:1)*l.a[t.valueUnit],s=v(t.minSize,i,r),n=v(t.maxSize,i,r),{valueRepresentation:u}=t;let c=null;return c="area"===u?2*Math.sqrt(e/d)/a:"radius"===u||"distance"===u?2*e/a:e/a,g(c,s,n)}(e,t,i,r);case u.hL.Identity:return e;case u.hL.Unknown:return null}}function _(e,t,i){const{isScaleDriven:r}=e.cache;if(!(r&&"3d"===i||t))return null;const a={scale:t,view:i};let s=v(e.minSize,p,a),n=v(e.maxSize,p,a);if(null!=s||null!=n){if(s>n){const e=n;n=s,s=e}return{minSize:s,maxSize:n}}}function S(e,t,i){if(!e.visualVariables)return;const r=[],a=[],s=[],n=[],o=[];for(const l of e.visualVariables)switch(l.type){case"color":a.push(l);break;case"opacity":s.push(l);break;case"rotation":o.push(l);break;case"size":n.push(l)}return a.forEach((e=>{const a=y(e,t,i);r.push({variable:e,value:a})})),s.forEach((e=>{const a=m(e,t,i);r.push({variable:e,value:a})})),o.forEach((e=>{const a=f(e,t,i);r.push({variable:e,value:a})})),n.forEach((e=>{const a=b(e,t,i);r.push({variable:e,value:a})})),r.filter((e=>null!=e.value))}function C(e,t){if(!t)return;let i=0,r=t.length-1;return t.some(((t,a)=>e<t?(r=a,!0):(i=a,!1))),[i,r,(e-t[i])/(t[r]-t[i])]}function x(e,t,i){const r=["proportional","proportional","proportional"];for(const a of e){const e=a.useSymbolValue?"symbol-value":b(a,t,i);switch(a.axis){case"width":r[0]=e;break;case"depth":r[1]=e;break;case"height":r[2]=e;break;case"width-and-depth":r[0]=e,r[1]=e;break;case"all":case void 0:case null:r[0]=e,r[1]=e,r[2]=e;break;default:(0,s.Bg)(a.axis)}}return r}},57976:(e,t,i)=>{i.d(t,{Z:()=>c});var r,a=i(27366),s=i(85015),n=i(79056),o=i(49861),l=(i(63780),i(93169),i(25243),i(69912));let u=r=class extends((0,n.IG)(s.Z)){constructor(e){super(e),this.active=!1,this.className=null,this.disabled=!1,this.id=null,this.indicator=!1,this.title=null,this.type=null,this.visible=!0}clone(){return new r({active:this.active,className:this.className,disabled:this.disabled,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible})}};(0,a._)([(0,o.Cb)()],u.prototype,"active",void 0),(0,a._)([(0,o.Cb)()],u.prototype,"className",void 0),(0,a._)([(0,o.Cb)()],u.prototype,"disabled",void 0),(0,a._)([(0,o.Cb)()],u.prototype,"id",void 0),(0,a._)([(0,o.Cb)()],u.prototype,"indicator",void 0),(0,a._)([(0,o.Cb)()],u.prototype,"title",void 0),(0,a._)([(0,o.Cb)()],u.prototype,"type",void 0),(0,a._)([(0,o.Cb)()],u.prototype,"visible",void 0),u=r=(0,a._)([(0,l.j)("esri.support.actions.ActionBase")],u);const c=u},6945:(e,t,i)=>{i.d(t,{Z:()=>u});var r,a=i(27366),s=i(49861),n=(i(63780),i(93169),i(25243),i(69912)),o=i(57976);let l=r=class extends o.Z{constructor(e){super(e),this.image=null,this.type="button"}clone(){return new r({active:this.active,className:this.className,disabled:this.disabled,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible,image:this.image})}};(0,a._)([(0,s.Cb)()],l.prototype,"image",void 0),l=r=(0,a._)([(0,n.j)("esri.support.Action.ActionButton")],l);const u=l},9676:(e,t,i)=>{i.d(t,{Z:()=>u});var r,a=i(27366),s=i(49861),n=(i(63780),i(93169),i(25243),i(69912)),o=i(57976);let l=r=class extends o.Z{constructor(e){super(e),this.image=null,this.type="toggle",this.value=!1}clone(){return new r({active:this.active,className:this.className,disabled:this.disabled,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible,image:this.image,value:this.value})}};(0,a._)([(0,s.Cb)()],l.prototype,"image",void 0),(0,a._)([(0,s.Cb)()],l.prototype,"value",void 0),l=r=(0,a._)([(0,n.j)("esri.support.Action.ActionToggle")],l);const u=l}}]);
//# sourceMappingURL=4863.b6cbe967.chunk.js.map