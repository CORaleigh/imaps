(globalThis.webpackChunkimaps=globalThis.webpackChunkimaps||[]).push([[1550],{67435:e=>{function t(e){return Promise.resolve().then((()=>{var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}))}t.keys=()=>[],t.resolve=t,t.id=67435,e.exports=t},20586:(e,t,a)=>{"use strict";a.r(t),a.d(t,{Basemaps:()=>v,default:()=>y});var o=a(72791),s=a(21475),r=a(76200),i=a(80885),l=a(2170),c=a(90899);let n,u,m=!1;let d;const p=e=>!!m||e.portalItem.tags.includes("countywide"),b=e=>new Promise((t=>{(0,r.default)("https://maps.raleighnc.gov/images/rest/services/Orthos2020/ImageServer/queryBoundary?outSR=102100&f=json",{responseType:"json"}).then((a=>{const o=i.Z.fromJSON(a.data.shape);m=l.contains(o,e.center),t(o)}))}));var h=a(80184);const v=e=>{const t=(0,o.useRef)(null);let a="basemaps";return(0,o.useEffect)((()=>{var o,r;const i=new s.Z({container:t.current,view:e.view,source:{query:{id:"f6329364e80c438a958ce74aadc3a89f"}}});(()=>{const e=document.createElement("calcite-alert");e.setAttribute("auto-dismiss",""),e.setAttribute("auto-dismiss-duration","fast"),e.setAttribute("scale","m"),e.setAttribute("color","yellow"),e.id="basemapAlert",e.classList.add(document.body.classList.contains("dark")?"calcite-theme-dark":"calcite-theme-light");const t=document.createElement("div");t.slot="title",t.textContent="Image basemap changed";const a=document.createElement("div");a.slot="message",a.textContent="Image basemap changed",e.appendChild(t),e.appendChild(a),document.body.appendChild(e)})(),null===(o=document)||void 0===o||null===(r=o.querySelector("#basemap-radio"))||void 0===r||r.addEventListener("calciteRadioGroupChange",(t=>{const o=t.detail;a=o,((e,t,a,o,s)=>{const r={};var i,c,h,v;u||b(t).then((e=>{u=e;const o=l.contains(u,t.center);o!=m&&(m=o),a.source.refresh()})),"imagery"===e?(d=t.watch("stationary",(e=>{if(e){const e=l.contains(u,t.center);e!=m&&(m=e,a.source.refresh())}})),null===(i=document.querySelector(".basemaps-base .esri-button-menu"))||void 0===i||i.removeAttribute("hidden"),r.id=s,a.source.filterFunction=p,a.source.updateBasemapsCallback=e=>e.reverse(),setTimeout((()=>{n=a.source.watch("state",(o=>{var s;e=null===(s=document.querySelector("#basemap-radio calcite-radio-group-item[checked]"))||void 0===s?void 0:s.value,"ready"===o&&"imagery"===e&&(a.source.basemaps.find((e=>e.portalItem.title===t.map.basemap.title))||m||!t.map.basemap.portalItem||setTimeout((()=>{var o;document.querySelector('#basemapAlert div[slot="message"]').textContent=`${t.map.basemap.portalItem.title} imagery not available outside Raleigh, switching to ${a.source.basemaps.getItemAt(0).portalItem.title}`,t.map.basemap=a.source.basemaps.getItemAt(0),console.log(e),null===(o=document.querySelector("calcite-alert"))||void 0===o||o.setAttribute("active","")})))}))}),1e3)):(null===(c=document.querySelector(".basemaps-base .esri-button-menu"))||void 0===c||c.setAttribute("hidden",""),d&&d.remove(),null===(h=n)||void 0===h||h.remove(),a.source.filterFunction=()=>!0,a.source.updateBasemapsCallback=e=>e),"basemaps"===e&&(null===(v=document.querySelector(".basemaps-base .esri-button-menu"))||void 0===v||v.removeAttribute("hidden"),r.id=o),a.source.query=r})(o,e.view,i,e.default,e.imagery)})),i.watch("activeBasemap",(t=>{((e,t,a)=>{const o=c.zy({basemap:e,geometryType:"polygon"}),s=t.map.allLayers.find((e=>"feature"===e.type&&e.title.startsWith("Property"))),r=s.renderer.clone();"light"===o.basemapTheme&&(r.symbol.outline.color.r=0,r.symbol.outline.color.g=0,r.symbol.outline.color.b=0),("dark"===o.basemapTheme||"imagery"===a||e.title.toLocaleLowerCase().includes("dark"))&&(r.symbol.outline.color.r=255,r.symbol.outline.color.g=255,r.symbol.outline.color.b=255),s.renderer=r})(t,e.view,a)}))}),[]),(0,h.jsxs)("div",{className:"panel",children:[(0,h.jsxs)("calcite-radio-group",{id:"basemap-radio",appearance:"solid",layout:"horizontal",scale:"m",width:"full",children:[(0,h.jsx)("calcite-radio-group-item",{value:"basemaps",checked:!0,children:"Streets"}),(0,h.jsx)("calcite-radio-group-item",{value:"imagery",children:"Imagery"}),(0,h.jsx)("calcite-radio-group-item",{value:"esri",children:"Esri"})]}),(0,h.jsx)("div",{ref:t})]})},y=v}}]);
//# sourceMappingURL=1550.ee90e68d.chunk.js.map