(this.webpackJsonpimaps=this.webpackJsonpimaps||[]).push([[120],{1017:function(e,t,r){"use strict";r.d(t,"a",(function(){return y}));var i=r(79),a=r(103),n=r(91),s=r(98),o=r(719),l=r(81),c=(r(84),r(82),r(83),r(93)),u=r(80),d=r(101),p=r(96),b=r(156);const y=e=>{let t=class extends e{constructor(){super(...arguments),this.capabilities=void 0,this.copyright=null,this.fullExtent=null,this.legendEnabled=!0,this.spatialReference=null,this.version=void 0}readCapabilities(e,t){var r,i;const a=t.capabilities&&t.capabilities.split(",").map((e=>e.toLowerCase().trim()));if(!a)return{operations:{supportsQuery:!1,supportsExportMap:!1,supportsExportTiles:!1,supportsTileMap:!1},exportMap:null,exportTiles:null};const n=this.type,s=a.includes("query"),l=a.includes("map"),c=!!t.exportTilesAllowed,u=a.includes("tilemap"),d="tile"!==n&&!!t.supportsDynamicLayers,p="tile"!==n&&(!t.tileInfo||d),b="tile"!==n&&(!t.tileInfo||d),y="tile"!==n,f=t.cimVersion&&o.a.parse(t.cimVersion),h=null!=(r=null==f?void 0:f.since(1,4))&&r,m=null!=(i=null==f?void 0:f.since(2,0))&&i;return{operations:{supportsQuery:s,supportsExportMap:l,supportsExportTiles:c,supportsTileMap:u},exportMap:l?{supportsArcadeExpressionForLabeling:h,supportsSublayersChanges:y,supportsDynamicLayers:d,supportsSublayerVisibility:p,supportsSublayerDefinitionExpression:b,supportsCIMSymbols:m}:null,exportTiles:c?{maxExportTilesCount:+t.maxExportTilesCount}:null}}readVersion(e,t){let r=t.currentVersion;return r||(r=t.hasOwnProperty("capabilities")||t.hasOwnProperty("tables")?10:t.hasOwnProperty("supportedImageFormatTypes")?9.31:9.3),r}async fetchSublayerInfo(e,t){return await this.fetchAllLayersAndTables(t),this._allLayersAndTablesMap.get(e)}async fetchAllLayersAndTables(e){await this.load(e),this._allLayersAndTablesPromise||(this._allLayersAndTablesPromise=Object(a.default)(Object(s.M)(this.url).path+"/layers",{responseType:"json",query:{f:"json",...this.customParameters,token:this.apiKey}}).then((e=>{this._allLayersAndTablesMap=new Map;for(const t of e.data.layers)this._allLayersAndTablesMap.set(t.id,t);return{result:e.data}}),(e=>({error:e}))));const t=await this._allLayersAndTablesPromise;if(Object(n.t)(e),"result"in t)return t.result;throw t.error}};return Object(i.a)([Object(l.b)({readOnly:!0})],t.prototype,"capabilities",void 0),Object(i.a)([Object(c.a)("service","capabilities",["capabilities","exportTilesAllowed","maxExportTilesCount","supportsDynamicLayers","tileInfo"])],t.prototype,"readCapabilities",null),Object(i.a)([Object(l.b)({json:{read:{source:"copyrightText"}}})],t.prototype,"copyright",void 0),Object(i.a)([Object(l.b)({type:d.a})],t.prototype,"fullExtent",void 0),Object(i.a)([Object(l.b)(b.c)],t.prototype,"id",void 0),Object(i.a)([Object(l.b)({type:Boolean,json:{origins:{service:{read:{enabled:!1}}},read:{source:"showLegend"},write:{target:"showLegend"}}})],t.prototype,"legendEnabled",void 0),Object(i.a)([Object(l.b)(b.j)],t.prototype,"popupEnabled",void 0),Object(i.a)([Object(l.b)({type:p.a})],t.prototype,"spatialReference",void 0),Object(i.a)([Object(l.b)({readOnly:!0})],t.prototype,"version",void 0),Object(i.a)([Object(c.a)("version",["currentVersion","capabilities","tables","supportedImageFormatTypes"])],t.prototype,"readVersion",null),t=Object(i.a)([Object(u.a)("esri.layers.mixins.ArcGISMapService")],t),t}},1018:function(e,t,r){"use strict";r.d(t,"a",(function(){return m}));var i=r(79),a=r(111),n=r(642),s=r(88),o=r(87),l=r(81),c=(r(84),r(82),r(152)),u=(r(83),r(80)),d=r(197),p=r(860),b=r(696);const y=o.a.getLogger("esri.layers.TileLayer");const f=a.a.ofType(p.a);function h(e,t){e&&e.forEach((e=>{t(e),e.sublayers&&e.sublayers.length&&h(e.sublayers,t)}))}const m=e=>{let t=class extends e{constructor(...e){super(...e),this.allSublayers=new n.a({getCollections:()=>[this.sublayers],getChildrenFunction:e=>e.sublayers}),this.sublayersSourceJSON={[d.a.SERVICE]:{},[d.a.PORTAL_ITEM]:{},[d.a.WEB_SCENE]:{},[d.a.WEB_MAP]:{}},this.handles.add(this.watch("sublayers",((e,t)=>this._handleSublayersChange(e,t)),!0))}readSublayers(e,t){if(!t||!e)return;const{sublayersSourceJSON:r}=this,i=Object(d.e)(t.origin);if(i<d.a.SERVICE)return;if(r[i]={context:t,visibleLayers:e.visibleLayers||r[i].visibleLayers,layers:e.layers||r[i].layers},i>d.a.SERVICE)return;this._set("serviceSublayers",this.createSublayersForOrigin("service").sublayers);const{sublayers:a,origin:n}=this.createSublayersForOrigin("web-document"),s=Object(c.a)(this);s.setDefaultOrigin(n),this._set("sublayers",new f(a)),s.setDefaultOrigin("user")}findSublayerById(e){return this.allSublayers.find((t=>t.id===e))}createServiceSublayers(){return this.createSublayersForOrigin("service").sublayers}createSublayersForOrigin(e){const t=Object(d.e)("web-document"===e?"web-map":e);let r=d.a.SERVICE,i=this.sublayersSourceJSON[d.a.SERVICE].layers,a=this.sublayersSourceJSON[d.a.SERVICE].context,n=null;const s=[d.a.PORTAL_ITEM,d.a.WEB_SCENE,d.a.WEB_MAP].filter((e=>e<=t));for(const d of s){const e=this.sublayersSourceJSON[d];Object(b.b)(e.layers)&&(r=d,i=e.layers,a=e.context,e.visibleLayers&&(n={visibleLayers:e.visibleLayers,context:e.context}))}const o=[d.a.PORTAL_ITEM,d.a.WEB_SCENE,d.a.WEB_MAP].filter((e=>e>r&&e<=t));let l=null;for(const d of o){const{layers:e,visibleLayers:t,context:r}=this.sublayersSourceJSON[d];e&&(l={layers:e,context:r}),t&&(n={visibleLayers:t,context:r})}const c=function(e,t){const r=[],i={};return e?(e.forEach((e=>{const a=new p.a;if(a.read(e,t),i[a.id]=a,null!=e.parentLayerId&&-1!==e.parentLayerId){const t=i[e.parentLayerId];t.sublayers||(t.sublayers=[]),t.sublayers.unshift(a)}else r.unshift(a)})),r):r}(i,a),u=new Map,y=new Set;if(l)for(const d of l.layers)u.set(d.id,d);if(n)for(const d of n.visibleLayers)y.add(d);return h(c,(e=>{l&&e.read(u.get(e.id),l.context),n&&e.read({defaultVisibility:y.has(e.id)},n.context)})),{origin:Object(d.c)(r),sublayers:new f({items:c})}}read(e,t){super.read(e,t),this.readSublayers(e,t)}_handleSublayersChange(e,t){t&&(t.forEach((e=>{e.parent=null,e.layer=null})),this.handles.remove("sublayers-owner")),e&&(e.forEach((e=>{e.parent=this,e.layer=this})),this.handles.add([e.on("after-add",(({item:e})=>{e.parent=this,e.layer=this})),e.on("after-remove",(({item:e})=>{e.parent=null,e.layer=null}))],"sublayers-owner"),"tile"===this.type&&this.handles.add(e.on("before-changes",(e=>{y.error(new s.a("tilelayer:sublayers-non-modifiable","ISublayer can't be added, moved, or removed from the layer's sublayers",{layer:this})),e.preventDefault()})),"sublayers-owner"))}};return Object(i.a)([Object(l.b)({readOnly:!0})],t.prototype,"allSublayers",void 0),Object(i.a)([Object(l.b)({readOnly:!0,type:a.a.ofType(p.a)})],t.prototype,"serviceSublayers",void 0),Object(i.a)([Object(l.b)({value:null,type:f,json:{read:!1,write:{allowNull:!0,ignoreOrigin:!0}}})],t.prototype,"sublayers",void 0),Object(i.a)([Object(l.b)({readOnly:!0})],t.prototype,"sublayersSourceJSON",void 0),t=Object(i.a)([Object(u.a)("esri.layers.mixins.SublayersOwner")],t),t}},134:function(e,t,r){"use strict";r.d(t,"a",(function(){return u})),r.d(t,"b",(function(){return c}));var i=r(79),a=r(100),n=r(124),s=r(81),o=r(80),l=r(277);const c=e=>{let t=class extends e{destroy(){var e,t;this.destroyed||(null==(e=this._get("handles"))||e.destroy(),null==(t=this._get("updatingHandles"))||t.destroy())}get handles(){return this._get("handles")||new n.a}get updatingHandles(){return this._get("updatingHandles")||new l.a}};return Object(i.a)([Object(s.b)({readOnly:!0})],t.prototype,"handles",null),Object(i.a)([Object(s.b)({readOnly:!0})],t.prototype,"updatingHandles",null),t=Object(i.a)([Object(o.a)("esri.core.HandleOwner")],t),t};let u=class extends(c(a.a)){};u=Object(i.a)([Object(o.a)("esri.core.HandleOwner")],u)},146:function(e,t,r){"use strict";r.d(t,"a",(function(){return a}));var i=r(81);function a(e,t){const r=t?{...t,source:e}:e;return Object(i.b)({aliasOf:r})}},147:function(e,t,r){"use strict";r.d(t,"a",(function(){return c})),r.d(t,"b",(function(){return v})),r.d(t,"c",(function(){return n})),r.d(t,"d",(function(){return j})),r.d(t,"e",(function(){return b})),r.d(t,"f",(function(){return m})),r.d(t,"g",(function(){return h})),r.d(t,"h",(function(){return p})),r.d(t,"i",(function(){return o})),r.d(t,"j",(function(){return d})),r.d(t,"k",(function(){return I})),r.d(t,"l",(function(){return x})),r.d(t,"m",(function(){return u})),r.d(t,"n",(function(){return E})),r.d(t,"o",(function(){return f})),r.d(t,"p",(function(){return _})),r.d(t,"q",(function(){return M})),r.d(t,"r",(function(){return y})),r.d(t,"s",(function(){return s})),r.d(t,"t",(function(){return l})),r.d(t,"u",(function(){return O})),r.d(t,"v",(function(){return D})),r.d(t,"w",(function(){return T})),r.d(t,"x",(function(){return g}));var i=r(109),a=r(189);function n(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function s(e,t,r,i,a,n,s,o,l,c,u,d,p,b,y,f,h){return e[0]=t,e[1]=r,e[2]=i,e[3]=a,e[4]=n,e[5]=s,e[6]=o,e[7]=l,e[8]=c,e[9]=u,e[10]=d,e[11]=p,e[12]=b,e[13]=y,e[14]=f,e[15]=h,e}function o(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function l(e,t){if(e===t){const r=t[1],i=t[2],a=t[3],n=t[6],s=t[7],o=t[11];e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=r,e[6]=t[9],e[7]=t[13],e[8]=i,e[9]=n,e[11]=t[14],e[12]=a,e[13]=s,e[14]=o}else e[0]=t[0],e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=t[1],e[5]=t[5],e[6]=t[9],e[7]=t[13],e[8]=t[2],e[9]=t[6],e[10]=t[10],e[11]=t[14],e[12]=t[3],e[13]=t[7],e[14]=t[11],e[15]=t[15];return e}function c(e,t){const r=t[0],i=t[1],a=t[2],n=t[3],s=t[4],o=t[5],l=t[6],c=t[7],u=t[8],d=t[9],p=t[10],b=t[11],y=t[12],f=t[13],h=t[14],m=t[15],O=r*o-i*s,j=r*l-a*s,g=r*c-n*s,v=i*l-a*o,S=i*c-n*o,w=a*c-n*l,I=u*f-d*y,x=u*h-p*y,M=u*m-b*y,E=d*h-p*f,L=d*m-b*f,T=p*m-b*h;let D=O*T-j*L+g*E+v*M-S*x+w*I;return D?(D=1/D,e[0]=(o*T-l*L+c*E)*D,e[1]=(a*L-i*T-n*E)*D,e[2]=(f*w-h*S+m*v)*D,e[3]=(p*S-d*w-b*v)*D,e[4]=(l*M-s*T-c*x)*D,e[5]=(r*T-a*M+n*x)*D,e[6]=(h*g-y*w-m*j)*D,e[7]=(u*w-p*g+b*j)*D,e[8]=(s*L-o*M+c*I)*D,e[9]=(i*M-r*L-n*I)*D,e[10]=(y*S-f*g+m*O)*D,e[11]=(d*g-u*S-b*O)*D,e[12]=(o*x-s*E-l*I)*D,e[13]=(r*E-i*x+a*I)*D,e[14]=(f*j-y*v-h*O)*D,e[15]=(u*v-d*j+p*O)*D,e):null}function u(e,t,r){const i=t[0],a=t[1],n=t[2],s=t[3],o=t[4],l=t[5],c=t[6],u=t[7],d=t[8],p=t[9],b=t[10],y=t[11],f=t[12],h=t[13],m=t[14],O=t[15];let j=r[0],g=r[1],v=r[2],S=r[3];return e[0]=j*i+g*o+v*d+S*f,e[1]=j*a+g*l+v*p+S*h,e[2]=j*n+g*c+v*b+S*m,e[3]=j*s+g*u+v*y+S*O,j=r[4],g=r[5],v=r[6],S=r[7],e[4]=j*i+g*o+v*d+S*f,e[5]=j*a+g*l+v*p+S*h,e[6]=j*n+g*c+v*b+S*m,e[7]=j*s+g*u+v*y+S*O,j=r[8],g=r[9],v=r[10],S=r[11],e[8]=j*i+g*o+v*d+S*f,e[9]=j*a+g*l+v*p+S*h,e[10]=j*n+g*c+v*b+S*m,e[11]=j*s+g*u+v*y+S*O,j=r[12],g=r[13],v=r[14],S=r[15],e[12]=j*i+g*o+v*d+S*f,e[13]=j*a+g*l+v*p+S*h,e[14]=j*n+g*c+v*b+S*m,e[15]=j*s+g*u+v*y+S*O,e}function d(e,t,r){const i=r[0],a=r[1],n=r[2];let s,o,l,c,u,d,p,b,y,f,h,m;return t===e?(e[12]=t[0]*i+t[4]*a+t[8]*n+t[12],e[13]=t[1]*i+t[5]*a+t[9]*n+t[13],e[14]=t[2]*i+t[6]*a+t[10]*n+t[14],e[15]=t[3]*i+t[7]*a+t[11]*n+t[15]):(s=t[0],o=t[1],l=t[2],c=t[3],u=t[4],d=t[5],p=t[6],b=t[7],y=t[8],f=t[9],h=t[10],m=t[11],e[0]=s,e[1]=o,e[2]=l,e[3]=c,e[4]=u,e[5]=d,e[6]=p,e[7]=b,e[8]=y,e[9]=f,e[10]=h,e[11]=m,e[12]=s*i+u*a+y*n+t[12],e[13]=o*i+d*a+f*n+t[13],e[14]=l*i+p*a+h*n+t[14],e[15]=c*i+b*a+m*n+t[15]),e}function p(e,t,r){const i=r[0],a=r[1],n=r[2];return e[0]=t[0]*i,e[1]=t[1]*i,e[2]=t[2]*i,e[3]=t[3]*i,e[4]=t[4]*a,e[5]=t[5]*a,e[6]=t[6]*a,e[7]=t[7]*a,e[8]=t[8]*n,e[9]=t[9]*n,e[10]=t[10]*n,e[11]=t[11]*n,e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function b(e,t,r,i){let n,s,o,l,c,u,d,p,b,y,f,h,m,O,j,g,v,S,w,I,x,M,E,L,T=i[0],D=i[1],_=i[2],F=Math.sqrt(T*T+D*D+_*_);return F<a.a?null:(F=1/F,T*=F,D*=F,_*=F,n=Math.sin(r),s=Math.cos(r),o=1-s,l=t[0],c=t[1],u=t[2],d=t[3],p=t[4],b=t[5],y=t[6],f=t[7],h=t[8],m=t[9],O=t[10],j=t[11],g=T*T*o+s,v=D*T*o+_*n,S=_*T*o-D*n,w=T*D*o-_*n,I=D*D*o+s,x=_*D*o+T*n,M=T*_*o+D*n,E=D*_*o-T*n,L=_*_*o+s,e[0]=l*g+p*v+h*S,e[1]=c*g+b*v+m*S,e[2]=u*g+y*v+O*S,e[3]=d*g+f*v+j*S,e[4]=l*w+p*I+h*x,e[5]=c*w+b*I+m*x,e[6]=u*w+y*I+O*x,e[7]=d*w+f*I+j*x,e[8]=l*M+p*E+h*L,e[9]=c*M+b*E+m*L,e[10]=u*M+y*E+O*L,e[11]=d*M+f*E+j*L,t!==e&&(e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e)}function y(e,t,r){const i=Math.sin(r),a=Math.cos(r),n=t[4],s=t[5],o=t[6],l=t[7],c=t[8],u=t[9],d=t[10],p=t[11];return t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[4]=n*a+c*i,e[5]=s*a+u*i,e[6]=o*a+d*i,e[7]=l*a+p*i,e[8]=c*a-n*i,e[9]=u*a-s*i,e[10]=d*a-o*i,e[11]=p*a-l*i,e}function f(e,t,r){const i=Math.sin(r),a=Math.cos(r),n=t[0],s=t[1],o=t[2],l=t[3],c=t[8],u=t[9],d=t[10],p=t[11];return t!==e&&(e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=n*a-c*i,e[1]=s*a-u*i,e[2]=o*a-d*i,e[3]=l*a-p*i,e[8]=n*i+c*a,e[9]=s*i+u*a,e[10]=o*i+d*a,e[11]=l*i+p*a,e}function h(e,t,r){const i=Math.sin(r),a=Math.cos(r),n=t[0],s=t[1],o=t[2],l=t[3],c=t[4],u=t[5],d=t[6],p=t[7];return t!==e&&(e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=n*a+c*i,e[1]=s*a+u*i,e[2]=o*a+d*i,e[3]=l*a+p*i,e[4]=c*a-n*i,e[5]=u*a-s*i,e[6]=d*a-o*i,e[7]=p*a-l*i,e}function m(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=t[0],e[13]=t[1],e[14]=t[2],e[15]=1,e}function O(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=t[1],e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=t[2],e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function j(e,t,r){let i,n,s,o=r[0],l=r[1],c=r[2],u=Math.sqrt(o*o+l*l+c*c);return u<a.a?null:(u=1/u,o*=u,l*=u,c*=u,i=Math.sin(t),n=Math.cos(t),s=1-n,e[0]=o*o*s+n,e[1]=l*o*s+c*i,e[2]=c*o*s-l*i,e[3]=0,e[4]=o*l*s-c*i,e[5]=l*l*s+n,e[6]=c*l*s+o*i,e[7]=0,e[8]=o*c*s+l*i,e[9]=l*c*s-o*i,e[10]=c*c*s+n,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e)}function g(e,t){const r=Math.sin(t),i=Math.cos(t);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=i,e[6]=r,e[7]=0,e[8]=0,e[9]=-r,e[10]=i,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function v(e,t){const r=Math.sin(t),i=Math.cos(t);return e[0]=i,e[1]=r,e[2]=0,e[3]=0,e[4]=-r,e[5]=i,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function S(e,t,r){const i=t[0],a=t[1],n=t[2],s=t[3],o=i+i,l=a+a,c=n+n,u=i*o,d=i*l,p=i*c,b=a*l,y=a*c,f=n*c,h=s*o,m=s*l,O=s*c;return e[0]=1-(b+f),e[1]=d+O,e[2]=p-m,e[3]=0,e[4]=d-O,e[5]=1-(u+f),e[6]=y+h,e[7]=0,e[8]=p+m,e[9]=y-h,e[10]=1-(u+b),e[11]=0,e[12]=r[0],e[13]=r[1],e[14]=r[2],e[15]=1,e}const w=Object(i.f)();function I(e,t){const r=t[0],i=t[1],a=t[2],n=t[3],s=r+r,o=i+i,l=a+a,c=r*s,u=i*s,d=i*o,p=a*s,b=a*o,y=a*l,f=n*s,h=n*o,m=n*l;return e[0]=1-d-y,e[1]=u+m,e[2]=p-h,e[3]=0,e[4]=u-m,e[5]=1-c-y,e[6]=b+f,e[7]=0,e[8]=p+h,e[9]=b-f,e[10]=1-c-d,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function x(e,t,r,i,a,n,s){const o=1/(r-t),l=1/(a-i),c=1/(n-s);return e[0]=2*n*o,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=2*n*l,e[6]=0,e[7]=0,e[8]=(r+t)*o,e[9]=(a+i)*l,e[10]=(s+n)*c,e[11]=-1,e[12]=0,e[13]=0,e[14]=s*n*2*c,e[15]=0,e}function M(e,t,r,i,a,n,s){const o=1/(t-r),l=1/(i-a),c=1/(n-s);return e[0]=-2*o,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*l,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*c,e[11]=0,e[12]=(t+r)*o,e[13]=(a+i)*l,e[14]=(s+n)*c,e[15]=1,e}function E(e,t,r,i){let n,s,l,c,u,d,p,b,y,f;const h=t[0],m=t[1],O=t[2],j=i[0],g=i[1],v=i[2],S=r[0],w=r[1],I=r[2];return Math.abs(h-S)<a.a&&Math.abs(m-w)<a.a&&Math.abs(O-I)<a.a?o(e):(p=h-S,b=m-w,y=O-I,f=1/Math.sqrt(p*p+b*b+y*y),p*=f,b*=f,y*=f,n=g*y-v*b,s=v*p-j*y,l=j*b-g*p,f=Math.sqrt(n*n+s*s+l*l),f?(f=1/f,n*=f,s*=f,l*=f):(n=0,s=0,l=0),c=b*l-y*s,u=y*n-p*l,d=p*s-b*n,f=Math.sqrt(c*c+u*u+d*d),f?(f=1/f,c*=f,u*=f,d*=f):(c=0,u=0,d=0),e[0]=n,e[1]=c,e[2]=p,e[3]=0,e[4]=s,e[5]=u,e[6]=b,e[7]=0,e[8]=l,e[9]=d,e[10]=y,e[11]=0,e[12]=-(n*h+s*m+l*O),e[13]=-(c*h+u*m+d*O),e[14]=-(p*h+b*m+y*O),e[15]=1,e)}function L(e,t,r){return e[0]=t[0]-r[0],e[1]=t[1]-r[1],e[2]=t[2]-r[2],e[3]=t[3]-r[3],e[4]=t[4]-r[4],e[5]=t[5]-r[5],e[6]=t[6]-r[6],e[7]=t[7]-r[7],e[8]=t[8]-r[8],e[9]=t[9]-r[9],e[10]=t[10]-r[10],e[11]=t[11]-r[11],e[12]=t[12]-r[12],e[13]=t[13]-r[13],e[14]=t[14]-r[14],e[15]=t[15]-r[15],e}function T(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]&&e[6]===t[6]&&e[7]===t[7]&&e[8]===t[8]&&e[9]===t[9]&&e[10]===t[10]&&e[11]===t[11]&&e[12]===t[12]&&e[13]===t[13]&&e[14]===t[14]&&e[15]===t[15]}function D(e,t){if(e===t)return!0;const r=e[0],i=e[1],n=e[2],s=e[3],o=e[4],l=e[5],c=e[6],u=e[7],d=e[8],p=e[9],b=e[10],y=e[11],f=e[12],h=e[13],m=e[14],O=e[15],j=t[0],g=t[1],v=t[2],S=t[3],w=t[4],I=t[5],x=t[6],M=t[7],E=t[8],L=t[9],T=t[10],D=t[11],_=t[12],F=t[13],C=t[14],P=t[15];return Math.abs(r-j)<=a.a*Math.max(1,Math.abs(r),Math.abs(j))&&Math.abs(i-g)<=a.a*Math.max(1,Math.abs(i),Math.abs(g))&&Math.abs(n-v)<=a.a*Math.max(1,Math.abs(n),Math.abs(v))&&Math.abs(s-S)<=a.a*Math.max(1,Math.abs(s),Math.abs(S))&&Math.abs(o-w)<=a.a*Math.max(1,Math.abs(o),Math.abs(w))&&Math.abs(l-I)<=a.a*Math.max(1,Math.abs(l),Math.abs(I))&&Math.abs(c-x)<=a.a*Math.max(1,Math.abs(c),Math.abs(x))&&Math.abs(u-M)<=a.a*Math.max(1,Math.abs(u),Math.abs(M))&&Math.abs(d-E)<=a.a*Math.max(1,Math.abs(d),Math.abs(E))&&Math.abs(p-L)<=a.a*Math.max(1,Math.abs(p),Math.abs(L))&&Math.abs(b-T)<=a.a*Math.max(1,Math.abs(b),Math.abs(T))&&Math.abs(y-D)<=a.a*Math.max(1,Math.abs(y),Math.abs(D))&&Math.abs(f-_)<=a.a*Math.max(1,Math.abs(f),Math.abs(_))&&Math.abs(h-F)<=a.a*Math.max(1,Math.abs(h),Math.abs(F))&&Math.abs(m-C)<=a.a*Math.max(1,Math.abs(m),Math.abs(C))&&Math.abs(O-P)<=a.a*Math.max(1,Math.abs(O),Math.abs(P))}function _(e){const t=a.a,r=e[0],i=e[1],n=e[2],s=e[4],o=e[5],l=e[6],c=e[8],u=e[9],d=e[10];return Math.abs(1-(r*r+s*s+c*c))<=t&&Math.abs(1-(i*i+o*o+u*u))<=t&&Math.abs(1-(n*n+l*l+d*d))<=t}const F=u,C=L;Object.freeze({__proto__:null,copy:n,set:s,identity:o,transpose:l,invert:c,adjoint:function(e,t){const r=t[0],i=t[1],a=t[2],n=t[3],s=t[4],o=t[5],l=t[6],c=t[7],u=t[8],d=t[9],p=t[10],b=t[11],y=t[12],f=t[13],h=t[14],m=t[15];return e[0]=o*(p*m-b*h)-d*(l*m-c*h)+f*(l*b-c*p),e[1]=-(i*(p*m-b*h)-d*(a*m-n*h)+f*(a*b-n*p)),e[2]=i*(l*m-c*h)-o*(a*m-n*h)+f*(a*c-n*l),e[3]=-(i*(l*b-c*p)-o*(a*b-n*p)+d*(a*c-n*l)),e[4]=-(s*(p*m-b*h)-u*(l*m-c*h)+y*(l*b-c*p)),e[5]=r*(p*m-b*h)-u*(a*m-n*h)+y*(a*b-n*p),e[6]=-(r*(l*m-c*h)-s*(a*m-n*h)+y*(a*c-n*l)),e[7]=r*(l*b-c*p)-s*(a*b-n*p)+u*(a*c-n*l),e[8]=s*(d*m-b*f)-u*(o*m-c*f)+y*(o*b-c*d),e[9]=-(r*(d*m-b*f)-u*(i*m-n*f)+y*(i*b-n*d)),e[10]=r*(o*m-c*f)-s*(i*m-n*f)+y*(i*c-n*o),e[11]=-(r*(o*b-c*d)-s*(i*b-n*d)+u*(i*c-n*o)),e[12]=-(s*(d*h-p*f)-u*(o*h-l*f)+y*(o*p-l*d)),e[13]=r*(d*h-p*f)-u*(i*h-a*f)+y*(i*p-a*d),e[14]=-(r*(o*h-l*f)-s*(i*h-a*f)+y*(i*l-a*o)),e[15]=r*(o*p-l*d)-s*(i*p-a*d)+u*(i*l-a*o),e},determinant:function(e){const t=e[0],r=e[1],i=e[2],a=e[3],n=e[4],s=e[5],o=e[6],l=e[7],c=e[8],u=e[9],d=e[10],p=e[11],b=e[12],y=e[13],f=e[14],h=e[15];return(t*s-r*n)*(d*h-p*f)-(t*o-i*n)*(u*h-p*y)+(t*l-a*n)*(u*f-d*y)+(r*o-i*s)*(c*h-p*b)-(r*l-a*s)*(c*f-d*b)+(i*l-a*o)*(c*y-u*b)},multiply:u,translate:d,scale:p,rotate:b,rotateX:y,rotateY:f,rotateZ:h,fromTranslation:m,fromScaling:O,fromRotation:j,fromXRotation:g,fromYRotation:function(e,t){const r=Math.sin(t),i=Math.cos(t);return e[0]=i,e[1]=0,e[2]=-r,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=r,e[9]=0,e[10]=i,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},fromZRotation:v,fromRotationTranslation:S,fromQuat2:function(e,t){const r=w,i=-t[0],a=-t[1],n=-t[2],s=t[3],o=t[4],l=t[5],c=t[6],u=t[7],d=i*i+a*a+n*n+s*s;return d>0?(r[0]=2*(o*s+u*i+l*n-c*a)/d,r[1]=2*(l*s+u*a+c*i-o*n)/d,r[2]=2*(c*s+u*n+o*a-l*i)/d):(r[0]=2*(o*s+u*i+l*n-c*a),r[1]=2*(l*s+u*a+c*i-o*n),r[2]=2*(c*s+u*n+o*a-l*i)),S(e,t,r),e},getTranslation:function(e,t){return e[0]=t[12],e[1]=t[13],e[2]=t[14],e},getScaling:function(e,t){const r=t[0],i=t[1],a=t[2],n=t[4],s=t[5],o=t[6],l=t[8],c=t[9],u=t[10];return e[0]=Math.sqrt(r*r+i*i+a*a),e[1]=Math.sqrt(n*n+s*s+o*o),e[2]=Math.sqrt(l*l+c*c+u*u),e},getRotation:function(e,t){const r=t[0]+t[5]+t[10];let i=0;return r>0?(i=2*Math.sqrt(r+1),e[3]=.25*i,e[0]=(t[6]-t[9])/i,e[1]=(t[8]-t[2])/i,e[2]=(t[1]-t[4])/i):t[0]>t[5]&&t[0]>t[10]?(i=2*Math.sqrt(1+t[0]-t[5]-t[10]),e[3]=(t[6]-t[9])/i,e[0]=.25*i,e[1]=(t[1]+t[4])/i,e[2]=(t[8]+t[2])/i):t[5]>t[10]?(i=2*Math.sqrt(1+t[5]-t[0]-t[10]),e[3]=(t[8]-t[2])/i,e[0]=(t[1]+t[4])/i,e[1]=.25*i,e[2]=(t[6]+t[9])/i):(i=2*Math.sqrt(1+t[10]-t[0]-t[5]),e[3]=(t[1]-t[4])/i,e[0]=(t[8]+t[2])/i,e[1]=(t[6]+t[9])/i,e[2]=.25*i),e},fromRotationTranslationScale:function(e,t,r,i){const a=t[0],n=t[1],s=t[2],o=t[3],l=a+a,c=n+n,u=s+s,d=a*l,p=a*c,b=a*u,y=n*c,f=n*u,h=s*u,m=o*l,O=o*c,j=o*u,g=i[0],v=i[1],S=i[2];return e[0]=(1-(y+h))*g,e[1]=(p+j)*g,e[2]=(b-O)*g,e[3]=0,e[4]=(p-j)*v,e[5]=(1-(d+h))*v,e[6]=(f+m)*v,e[7]=0,e[8]=(b+O)*S,e[9]=(f-m)*S,e[10]=(1-(d+y))*S,e[11]=0,e[12]=r[0],e[13]=r[1],e[14]=r[2],e[15]=1,e},fromRotationTranslationScaleOrigin:function(e,t,r,i,a){const n=t[0],s=t[1],o=t[2],l=t[3],c=n+n,u=s+s,d=o+o,p=n*c,b=n*u,y=n*d,f=s*u,h=s*d,m=o*d,O=l*c,j=l*u,g=l*d,v=i[0],S=i[1],w=i[2],I=a[0],x=a[1],M=a[2],E=(1-(f+m))*v,L=(b+g)*v,T=(y-j)*v,D=(b-g)*S,_=(1-(p+m))*S,F=(h+O)*S,C=(y+j)*w,P=(h-O)*w,A=(1-(p+f))*w;return e[0]=E,e[1]=L,e[2]=T,e[3]=0,e[4]=D,e[5]=_,e[6]=F,e[7]=0,e[8]=C,e[9]=P,e[10]=A,e[11]=0,e[12]=r[0]+I-(E*I+D*x+C*M),e[13]=r[1]+x-(L*I+_*x+P*M),e[14]=r[2]+M-(T*I+F*x+A*M),e[15]=1,e},fromQuat:I,frustum:x,perspective:function(e,t,r,i,a){const n=1/Math.tan(t/2);let s;return e[0]=n/r,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=n,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=-1,e[12]=0,e[13]=0,e[15]=0,null!=a&&a!==1/0?(s=1/(i-a),e[10]=(a+i)*s,e[14]=2*a*i*s):(e[10]=-1,e[14]=-2*i),e},perspectiveFromFieldOfView:function(e,t,r,i){const a=Math.tan(t.upDegrees*Math.PI/180),n=Math.tan(t.downDegrees*Math.PI/180),s=Math.tan(t.leftDegrees*Math.PI/180),o=Math.tan(t.rightDegrees*Math.PI/180),l=2/(s+o),c=2/(a+n);return e[0]=l,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=c,e[6]=0,e[7]=0,e[8]=-(s-o)*l*.5,e[9]=(a-n)*c*.5,e[10]=i/(r-i),e[11]=-1,e[12]=0,e[13]=0,e[14]=i*r/(r-i),e[15]=0,e},ortho:M,lookAt:E,targetTo:function(e,t,r,i){const a=t[0],n=t[1],s=t[2],o=i[0],l=i[1],c=i[2];let u=a-r[0],d=n-r[1],p=s-r[2],b=u*u+d*d+p*p;b>0&&(b=1/Math.sqrt(b),u*=b,d*=b,p*=b);let y=l*p-c*d,f=c*u-o*p,h=o*d-l*u;return b=y*y+f*f+h*h,b>0&&(b=1/Math.sqrt(b),y*=b,f*=b,h*=b),e[0]=y,e[1]=f,e[2]=h,e[3]=0,e[4]=d*h-p*f,e[5]=p*y-u*h,e[6]=u*f-d*y,e[7]=0,e[8]=u,e[9]=d,e[10]=p,e[11]=0,e[12]=a,e[13]=n,e[14]=s,e[15]=1,e},str:function(e){return"mat4("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+", "+e[8]+", "+e[9]+", "+e[10]+", "+e[11]+", "+e[12]+", "+e[13]+", "+e[14]+", "+e[15]+")"},frob:function(e){return Math.sqrt(e[0]**2+e[1]**2+e[2]**2+e[3]**2+e[4]**2+e[5]**2+e[6]**2+e[7]**2+e[8]**2+e[9]**2+e[10]**2+e[11]**2+e[12]**2+e[13]**2+e[14]**2+e[15]**2)},add:function(e,t,r){return e[0]=t[0]+r[0],e[1]=t[1]+r[1],e[2]=t[2]+r[2],e[3]=t[3]+r[3],e[4]=t[4]+r[4],e[5]=t[5]+r[5],e[6]=t[6]+r[6],e[7]=t[7]+r[7],e[8]=t[8]+r[8],e[9]=t[9]+r[9],e[10]=t[10]+r[10],e[11]=t[11]+r[11],e[12]=t[12]+r[12],e[13]=t[13]+r[13],e[14]=t[14]+r[14],e[15]=t[15]+r[15],e},subtract:L,multiplyScalar:function(e,t,r){return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e[4]=t[4]*r,e[5]=t[5]*r,e[6]=t[6]*r,e[7]=t[7]*r,e[8]=t[8]*r,e[9]=t[9]*r,e[10]=t[10]*r,e[11]=t[11]*r,e[12]=t[12]*r,e[13]=t[13]*r,e[14]=t[14]*r,e[15]=t[15]*r,e},multiplyScalarAndAdd:function(e,t,r,i){return e[0]=t[0]+r[0]*i,e[1]=t[1]+r[1]*i,e[2]=t[2]+r[2]*i,e[3]=t[3]+r[3]*i,e[4]=t[4]+r[4]*i,e[5]=t[5]+r[5]*i,e[6]=t[6]+r[6]*i,e[7]=t[7]+r[7]*i,e[8]=t[8]+r[8]*i,e[9]=t[9]+r[9]*i,e[10]=t[10]+r[10]*i,e[11]=t[11]+r[11]*i,e[12]=t[12]+r[12]*i,e[13]=t[13]+r[13]*i,e[14]=t[14]+r[14]*i,e[15]=t[15]+r[15]*i,e},exactEquals:T,equals:D,isOrthoNormal:_,mul:F,sub:C})},186:function(e,t,r){"use strict";r.d(t,"a",(function(){return l}));var i=r(79),a=r(86),n=r(81),s=(r(84),r(82),r(83),r(80));let o=class extends a.a{constructor(e){super(e),this.type=null}};Object(i.a)([Object(n.b)({readOnly:!0,json:{read:!1,write:!0}})],o.prototype,"type",void 0),o=Object(i.a)([Object(s.a)("esri.rest.support.ColorRamp")],o);const l=o},194:function(e,t,r){"use strict";r.d(t,"a",(function(){return a}));var i=r(90);const a=Object(i.b)()({esriTimeUnitsMilliseconds:"milliseconds",esriTimeUnitsSeconds:"seconds",esriTimeUnitsMinutes:"minutes",esriTimeUnitsHours:"hours",esriTimeUnitsDays:"days",esriTimeUnitsWeeks:"weeks",esriTimeUnitsMonths:"months",esriTimeUnitsYears:"years",esriTimeUnitsDecades:"decades",esriTimeUnitsCenturies:"centuries",esriTimeUnitsUnknown:void 0})},201:function(e,t,r){"use strict";r.d(t,"a",(function(){return y})),r.d(t,"b",(function(){return d})),r.d(t,"c",(function(){return h})),r.d(t,"d",(function(){return v})),r.d(t,"e",(function(){return g})),r.d(t,"f",(function(){return p})),r.d(t,"g",(function(){return b})),r.d(t,"h",(function(){return m})),r.d(t,"i",(function(){return O})),r.d(t,"j",(function(){return f})),r.d(t,"k",(function(){return j}));var i=r(85),a=r(98),n=r(150);const s={mapserver:"MapServer",imageserver:"ImageServer",featureserver:"FeatureServer",sceneserver:"SceneServer",streamserver:"StreamServer",vectortileserver:"VectorTileServer"},o=Object.values(s),l=new RegExp(`^((?:https?:)?\\/\\/\\S+?\\/rest\\/services\\/(.+?)\\/(${o.join("|")}))(?:\\/(?:layers\\/)?(\\d+))?`,"i"),c=new RegExp(`^((?:https?:)?\\/\\/\\S+?\\/([^\\/\\n]+)\\/(${o.join("|")}))(?:\\/(?:layers\\/)?(\\d+))?`,"i"),u=/(.*?)\/(?:layers\/)?(\d+)\/?$/i;function d(e){return!!l.test(e)}function p(e){const t=Object(a.M)(e),r=t.path.match(l)||t.path.match(c);if(!r)return null;const[,i,n,o,u]=r,d=n.indexOf("/");return{title:y(-1!==d?n.slice(d+1):n),serverType:s[o.toLowerCase()],sublayer:null!=u&&""!==u?parseInt(u,10):null,url:{path:i}}}function b(e){const t=Object(a.M)(e).path.match(u);return t?{serviceUrl:t[1],sublayerId:Number(t[2])}:null}function y(e){return(e=e.replace(/\s*[/_]+\s*/g," "))[0].toUpperCase()+e.slice(1)}function f(e,t){const r=[];if(e){const t=p(e);Object(i.k)(t)&&t.title&&r.push(t.title)}if(t){const e=y(t);r.push(e)}if(2===r.length){if(-1!==r[0].toLowerCase().indexOf(r[1].toLowerCase()))return r[0];if(-1!==r[1].toLowerCase().indexOf(r[0].toLowerCase()))return r[1]}return r.join(" - ")}function h(e){if(!e)return!1;const t=-1!==(e=e.toLowerCase()).indexOf(".arcgis.com/"),r=-1!==e.indexOf("//services")||-1!==e.indexOf("//tiles")||-1!==e.indexOf("//features");return t&&r}function m(e,t){return e?Object(a.K)(Object(a.J)(e,t)):e}function O(e){let{url:t}=e;if(!t)return{url:t};t=Object(a.J)(t,e.logger);const r=Object(a.M)(t),n=p(r.path);let s;if(Object(i.k)(n))null!=n.sublayer&&null==e.layer.layerId&&(s=n.sublayer),t=n.url.path;else if(e.nonStandardUrlAllowed){const e=b(r.path);Object(i.k)(e)&&(t=e.serviceUrl,s=e.sublayerId)}return{url:Object(a.K)(t),layerId:s}}function j(e,t,r,i,s){Object(n.g)(t,i,"url",s),i.url&&null!=e.layerId&&(i.url=Object(a.B)(i.url,r,e.layerId.toString()))}function g(e){if(!e)return!1;const t=e.toLowerCase(),r=-1!==t.indexOf("/services/"),i=-1!==t.indexOf("/mapserver/wmsserver"),a=-1!==t.indexOf("/imageserver/wmsserver"),n=-1!==t.indexOf("/wmsserver");return r&&(i||a||n)}function v(e){if(!e)return!1;const t=new a.a(Object(a.C)(e)).authority.toLowerCase();return"server.arcgisonline.com"===t||"services.arcgisonline.com"===t}},230:function(e,t,r){"use strict";r.d(t,"a",(function(){return b}));var i,a=r(79),n=r(105),s=r(89),o=r(81),l=r(83),c=r(95),u=r(80),d=r(186);let p=i=class extends d.a{constructor(e){super(e),this.algorithm=null,this.fromColor=null,this.toColor=null,this.type="algorithmic"}clone(){return new i({fromColor:Object(s.a)(this.fromColor),toColor:Object(s.a)(this.toColor),algorithm:this.algorithm})}};Object(a.a)([Object(c.a)({esriCIELabAlgorithm:"cie-lab",esriHSVAlgorithm:"hsv",esriLabLChAlgorithm:"lab-lch"})],p.prototype,"algorithm",void 0),Object(a.a)([Object(o.b)({type:n.a,json:{type:[l.a],write:!0}})],p.prototype,"fromColor",void 0),Object(a.a)([Object(o.b)({type:n.a,json:{type:[l.a],write:!0}})],p.prototype,"toColor",void 0),Object(a.a)([Object(o.b)({type:["algorithmic"]})],p.prototype,"type",void 0),p=i=Object(a.a)([Object(u.a)("esri.rest.support.AlgorithmicColorRamp")],p);const b=p},242:function(e,t,r){"use strict";r.d(t,"a",(function(){return d}));var i,a=r(79),n=r(86),s=r(169),o=r(81),l=(r(84),r(82),r(83),r(80)),c=r(194);let u=i=class extends n.a{constructor(e){super(e),this.value=0,this.unit="milliseconds"}toMilliseconds(){return Object(s.a)(this.value,this.unit,"milliseconds")}clone(){return new i({value:this.value,unit:this.unit})}};Object(a.a)([Object(o.b)({type:Number,json:{write:!0},nonNullable:!0})],u.prototype,"value",void 0),Object(a.a)([Object(o.b)({type:c.a.apiValues,json:{type:c.a.jsonValues,read:c.a.read,write:c.a.write},nonNullable:!0})],u.prototype,"unit",void 0),u=i=Object(a.a)([Object(l.a)("esri.TimeInterval")],u);const d=u},269:function(e,t,r){"use strict";r.d(t,"a",(function(){return f})),r.d(t,"b",(function(){return b})),r.d(t,"c",(function(){return y})),r.d(t,"d",(function(){return h}));var i=r(100),a=r(111),n=r(85),s=r(152);const o=["esri.Color","esri.portal.Portal","esri.symbols.support.Symbol3DAnchorPosition2D","esri.symbols.support.Symbol3DAnchorPosition3D"];function l(e){return e instanceof i.a}function c(e){return e instanceof a.a?Object.keys(e.items):l(e)?Object(s.a)(e).keys():e?Object.keys(e):[]}function u(e,t){return e instanceof a.a?e.items[t]:e[t]}function d(e){return e?e.declaredClass:null}function p(e,t){const r=e.diff;if(r&&"function"==typeof r)return r(e,t);const i=c(e),a=c(t);if(0===i.length&&0===a.length)return;if(!i.length||!a.length||function(e,t){return!(!Array.isArray(e)||!Array.isArray(t))&&e.length!==t.length}(e,t))return{type:"complete",oldValue:e,newValue:t};const s=a.filter((e=>-1===i.indexOf(e))),b=i.filter((e=>-1===a.indexOf(e))),y=i.filter((r=>a.indexOf(r)>-1&&u(e,r)!==u(t,r))).concat(s,b).sort(),f=d(e);if(f&&o.indexOf(f)>-1&&y.length)return{type:"complete",oldValue:e,newValue:t};let h;const m=l(e)&&l(t);for(const o of y){const i=u(e,o),a=u(t,o);let s;(m||"function"!=typeof i&&"function"!=typeof a)&&i!==a&&(null==i&&null==a||(s=r&&r[o]&&"function"==typeof r[o]?r[o](i,a):"object"==typeof i&&"object"==typeof a&&d(i)===d(a)?p(i,a):{type:"complete",oldValue:i,newValue:a},Object(n.k)(s)&&(Object(n.k)(h)?h.diff[o]=s:h={type:"partial",diff:{[o]:s}})))}return h}function b(e,t){if(Object(n.j)(e))return!1;const r=t.split(".");let i=e;for(const a of r){if("complete"===i.type)return!0;if("partial"!==i.type)return!1;{const e=i.diff[a];if(!e)return!1;i=e}}return!0}function y(e,t){for(const r of t)if(b(e,r))return!0;return!1}function f(e,t){if(!("function"==typeof e||"function"==typeof t||Object(n.j)(e)&&Object(n.j)(t)))return Object(n.j)(e)||Object(n.j)(t)||"object"==typeof e&&"object"==typeof t&&d(e)!==d(t)?{type:"complete",oldValue:e,newValue:t}:p(e,t)}function h(e){if(Object(n.j)(e))return!0;switch(e.type){case"complete":return!1;case"collection":{const t=e;for(const e of t.added)if(!h(e))return!1;for(const e of t.removed)if(!h(e))return!1;for(const e of t.changed)if(!h(e))return!1;return!0}case"partial":for(const t in e.diff)if(!h(e.diff[t]))return!1;return!0}}},276:function(e,t,r){"use strict";r.d(t,"a",(function(){return j}));var i,a=r(79),n=r(121),s=r(242),o=r(86),l=r(89),c=r(85),u=r(81),d=(r(83),r(93)),p=r(80),b=r(92);r(84),r(82);let y=i=class extends o.a{constructor(e){super(e),this.respectsDaylightSaving=!1,this.timezone=null}readRespectsDaylightSaving(e,t){return void 0!==t.respectsDaylightSaving?t.respectsDaylightSaving:void 0!==t.respectDaylightSaving&&t.respectDaylightSaving}clone(){const{respectsDaylightSaving:e,timezone:t}=this;return new i({respectsDaylightSaving:e,timezone:t})}};Object(a.a)([Object(u.b)({type:Boolean,json:{write:!0}})],y.prototype,"respectsDaylightSaving",void 0),Object(a.a)([Object(d.a)("respectsDaylightSaving",["respectsDaylightSaving","respectDaylightSaving"])],y.prototype,"readRespectsDaylightSaving",null),Object(a.a)([Object(u.b)({type:String,json:{read:{source:"timeZone"},write:{target:"timeZone"}}})],y.prototype,"timezone",void 0),y=i=Object(a.a)([Object(p.a)("esri.layers.support.TimeReference")],y);const f=y;var h,m=r(194);let O=h=class extends o.a{constructor(e){super(e),this.cumulative=!1,this.endField=null,this.fullTimeExtent=null,this.hasLiveData=!1,this.interval=null,this.startField=null,this.timeReference=null,this.trackIdField=null,this.useTime=!0}readFullTimeExtent(e,t){if(!t.timeExtent||!Array.isArray(t.timeExtent)||2!==t.timeExtent.length)return null;const r=new Date(t.timeExtent[0]),i=new Date(t.timeExtent[1]);return new n.a({start:r,end:i})}writeFullTimeExtent(e,t){e&&Object(c.k)(e.start)&&Object(c.k)(e.end)?t.timeExtent=[e.start.getTime(),e.end.getTime()]:t.timeExtent=null}readInterval(e,t){return t.timeInterval&&t.timeIntervalUnits?new s.a({value:t.timeInterval,unit:m.a.fromJSON(t.timeIntervalUnits)}):t.defaultTimeInterval&&t.defaultTimeIntervalUnits?new s.a({value:t.defaultTimeInterval,unit:m.a.fromJSON(t.defaultTimeIntervalUnits)}):null}writeInterval(e,t){if(e){const r=e.toJSON();t.timeInterval=r.value,t.timeIntervalUnits=r.unit}else t.timeInterval=null,t.timeIntervalUnits=null}clone(){const{cumulative:e,endField:t,hasLiveData:r,interval:i,startField:a,timeReference:n,fullTimeExtent:s,trackIdField:o,useTime:c}=this;return new h({cumulative:e,endField:t,hasLiveData:r,interval:i,startField:a,timeReference:Object(l.a)(n),fullTimeExtent:Object(l.a)(s),trackIdField:o,useTime:c})}};Object(a.a)([Object(u.b)({type:Boolean,json:{read:{source:"exportOptions.timeDataCumulative"},write:{target:"exportOptions.timeDataCumulative"}}})],O.prototype,"cumulative",void 0),Object(a.a)([Object(u.b)({type:String,json:{read:{source:"endTimeField"},write:{target:"endTimeField",allowNull:!0}}})],O.prototype,"endField",void 0),Object(a.a)([Object(u.b)({type:n.a,json:{write:{enabled:!0,allowNull:!0}}})],O.prototype,"fullTimeExtent",void 0),Object(a.a)([Object(d.a)("fullTimeExtent",["timeExtent"])],O.prototype,"readFullTimeExtent",null),Object(a.a)([Object(b.a)("fullTimeExtent")],O.prototype,"writeFullTimeExtent",null),Object(a.a)([Object(u.b)({type:Boolean,json:{write:!0}})],O.prototype,"hasLiveData",void 0),Object(a.a)([Object(u.b)({type:s.a,json:{write:{enabled:!0,allowNull:!0}}})],O.prototype,"interval",void 0),Object(a.a)([Object(d.a)("interval",["timeInterval","timeIntervalUnits","defaultTimeInterval","defaultTimeIntervalUnits"])],O.prototype,"readInterval",null),Object(a.a)([Object(b.a)("interval")],O.prototype,"writeInterval",null),Object(a.a)([Object(u.b)({type:String,json:{read:{source:"startTimeField"},write:{target:"startTimeField",allowNull:!0}}})],O.prototype,"startField",void 0),Object(a.a)([Object(u.b)({type:f,json:{write:{enabled:!0,allowNull:!0}}})],O.prototype,"timeReference",void 0),Object(a.a)([Object(u.b)({type:String,json:{write:{enabled:!0,allowNull:!0}}})],O.prototype,"trackIdField",void 0),Object(a.a)([Object(u.b)({type:Boolean,json:{read:{source:"exportOptions.useTime"},write:{target:"exportOptions.useTime"}}})],O.prototype,"useTime",void 0),O=h=Object(a.a)([Object(p.a)("esri.layers.support.TimeInfo")],O);const j=O},277:function(e,t,r){"use strict";r.d(t,"a",(function(){return d}));var i=r(79),a=r(100),n=r(124),s=r(85),o=r(144),l=r(234),c=r(81),u=r(80);let d=class extends a.a{constructor(){super(...arguments),this.updating=!1,this.handleId=0,this.handles=new n.a,this.scheduleHandleId=0,this.pendingPromises=new Set}destroy(){this.removeAll(),this.handles.destroy()}add(e,t,r={}){return this._installWatch(e,t,r,o.e)}addWhen(e,t,r={}){return this._installWatch(e,t,r,o.f)}addOnCollectionChange(e,t,{initial:r=!1}={}){const i=++this.handleId;return this.handles.add([Object(o.b)(e,"after-changes",this._createSyncUpdatingCallback(),o.c),Object(o.b)(e,"change",t,{onListenerAdd:r?e=>t({added:e.toArray(),removed:[]}):void 0})],i),{remove:()=>this.handles.remove(i)}}addPromise(e){if(Object(s.j)(e))return e;const t=++this.handleId;this.handles.add({remove:()=>{this.pendingPromises.delete(e)&&(0!==this.pendingPromises.size||this.handles.has(p)||this._set("updating",!1))}},t),this.pendingPromises.add(e),this._set("updating",!0);const r=()=>this.handles.remove(t);return e.then(r,r),e}removeAll(){this.pendingPromises.clear(),this.handles.removeAll(),this._set("updating",!1)}_installWatch(e,t,r={},i){const a=++this.handleId;r.sync||this._installSyncUpdatingWatch(e,a);const n=i(e,t,r);return this.handles.add(n,a),{remove:()=>this.handles.remove(a)}}_installSyncUpdatingWatch(e,t){const r=this._createSyncUpdatingCallback(),i=Object(o.e)(e,r,{sync:!0,equals:()=>!1});return this.handles.add(i,t),i}_createSyncUpdatingCallback(){return()=>{this.handles.remove(p),++this.scheduleHandleId;const e=this.scheduleHandleId;this._get("updating")||this._set("updating",!0),this.handles.add(Object(l.b)((()=>{e===this.scheduleHandleId&&(this._set("updating",this.pendingPromises.size>0),this.handles.remove(p))})),p)}}};Object(i.a)([Object(c.b)({readOnly:!0})],d.prototype,"updating",void 0),d=Object(i.a)([Object(u.a)("esri.views.support.WatchUpdatingTracking")],d);const p=-42;var b,y;(y=b||(b={}))[y.NONE=0]="NONE",y[y.SYNC=1]="SYNC",y[y.INIT=2]="INIT"},289:function(e,t,r){"use strict";r.d(t,"a",(function(){return i})),r.d(t,"b",(function(){return a})),r.d(t,"c",(function(){return n})),r.d(t,"d",(function(){return o})),r.d(t,"e",(function(){return s})),r.d(t,"f",(function(){return l})),r.d(t,"g",(function(){return c})),r.d(t,"h",(function(){return d})),r.d(t,"i",(function(){return u}));const i=[252,146,31,255],a=[153,153,153,255],n={type:"esriSMS",style:"esriSMSCircle",size:6,color:i,outline:{type:"esriSLS",style:"esriSLSSolid",width:.75,color:[153,153,153,255]}},s={type:"esriSLS",style:"esriSLSSolid",width:.75,color:i},o={type:"esriSFS",style:"esriSFSSolid",color:[252,146,31,196],outline:{type:"esriSLS",style:"esriSLSSolid",width:.75,color:[255,255,255,191]}},l={type:"esriTS",color:[255,255,255,255],font:{family:"arial-unicode-ms",size:10,weight:"bold"},horizontalAlignment:"center",kerning:!0,haloColor:[0,0,0,255],haloSize:1,rotated:!1,text:"",xoffset:0,yoffset:0,angle:0},c={type:"esriSMS",style:"esriSMSCircle",color:[0,0,0,255],outline:null,size:10.5},u={type:"esriSLS",style:"esriSLSSolid",color:[0,0,0,255],width:1.5},d={type:"esriSFS",style:"esriSFSSolid",color:[0,0,0,255],outline:null}},292:function(e,t,r){"use strict";r.d(t,"a",(function(){return o})),r.d(t,"b",(function(){return s}));var i=r(230),a=r(186),n=r(312);const s={key:"type",base:a.a,typeMap:{algorithmic:i.a,multipart:n.a}};function o(e){return e&&e.type?"algorithmic"===e.type?i.a.fromJSON(e):"multipart"===e.type?n.a.fromJSON(e):null:null}},312:function(e,t,r){"use strict";r.d(t,"a",(function(){return d}));var i,a=r(79),n=r(89),s=r(81),o=(r(83),r(80)),l=r(230),c=r(186);let u=i=class extends c.a{constructor(e){super(e),this.colorRamps=null,this.type="multipart"}clone(){return new i({colorRamps:Object(n.a)(this.colorRamps)})}};Object(a.a)([Object(s.b)({type:[l.a],json:{write:!0}})],u.prototype,"colorRamps",void 0),Object(a.a)([Object(s.b)({type:["multipart"]})],u.prototype,"type",void 0),u=i=Object(a.a)([Object(o.a)("esri.rest.support.MultipartColorRamp")],u);const d=u},343:function(e,t,r){"use strict";r.d(t,"a",(function(){return c}));var i=r(79),a=r(87),n=r(85),s=r(81),o=(r(84),r(82),r(83),r(80)),l=r(201);const c=e=>{let t=class extends e{get title(){if(this._get("title")&&"defaults"!==this.originOf("title"))return this._get("title");if(this.url){const e=Object(l.f)(this.url);if(Object(n.k)(e)&&e.title)return e.title}return this._get("title")||""}set title(e){this._set("title",e)}set url(e){this._set("url",Object(l.h)(e,a.a.getLogger(this.declaredClass)))}};return Object(i.a)([Object(s.b)()],t.prototype,"title",null),Object(i.a)([Object(s.b)({type:String})],t.prototype,"url",null),t=Object(i.a)([Object(o.a)("esri.layers.mixins.ArcGISService")],t),t}},345:function(e,t,r){"use strict";r.d(t,"a",(function(){return p}));var i=r(79),a=r(121),n=r(242),s=r(81),o=(r(84),r(82),r(83),r(93)),l=r(80),c=r(276),u=r(106),d=r(194);const p=e=>{let t=class extends e{constructor(){super(...arguments),this.timeExtent=null,this.timeOffset=null,this.useViewTime=!0}readOffset(e,t){const r=t.timeInfo.exportOptions;if(!r)return null;const i=r.timeOffset,a=d.a.fromJSON(r.timeOffsetUnits);return i&&a?new n.a({value:i,unit:a}):null}set timeInfo(e){Object(u.n)(e,this.fieldsIndex),this._set("timeInfo",e)}};return Object(i.a)([Object(s.b)({type:a.a,json:{write:!1}})],t.prototype,"timeExtent",void 0),Object(i.a)([Object(s.b)({type:n.a})],t.prototype,"timeOffset",void 0),Object(i.a)([Object(o.a)("service","timeOffset",["timeInfo.exportOptions"])],t.prototype,"readOffset",null),Object(i.a)([Object(s.b)({value:null,type:c.a,json:{write:!0,origins:{"web-document":{read:!1,write:!1}}}})],t.prototype,"timeInfo",null),Object(i.a)([Object(s.b)({type:Boolean,json:{read:{source:"timeAnimation"},write:{target:"timeAnimation"},origins:{"web-scene":{read:!1,write:!1}}}})],t.prototype,"useViewTime",void 0),t=Object(i.a)([Object(l.a)("esri.layers.mixins.TemporalLayer")],t),t}},362:function(e,t,r){"use strict";r.d(t,"a",(function(){return s}));var i=r(79),a=r(81),n=(r(84),r(82),r(83),r(80));const s=e=>{let t=class extends e{get apiKey(){var e;return this._isOverridden("apiKey")?this._get("apiKey"):function(e){return"portalItem"in e}(this)?null==(e=this.portalItem)?void 0:e.apiKey:null}set apiKey(e){null!=e?this._override("apiKey",e):(this._clearOverride("apiKey"),this.clear("apiKey","user"))}};return Object(i.a)([Object(a.b)({type:String})],t.prototype,"apiKey",null),t=Object(i.a)([Object(n.a)("esri.layers.mixins.APIKeyMixin")],t),t}},414:function(e,t,r){"use strict";r.d(t,"a",(function(){return u}));var i,a=r(79),n=r(111),s=r(86),o=r(81),l=(r(84),r(82),r(83),r(80));let c=i=class extends s.a{constructor(e){super(e),this.floorField=null,this.viewAllMode=!1,this.viewAllLevelIds=new n.a}clone(){return new i({floorField:this.floorField,viewAllMode:this.viewAllMode,viewAllLevelIds:this.viewAllLevelIds})}};Object(a.a)([Object(o.b)({type:String,json:{write:!0}})],c.prototype,"floorField",void 0),Object(a.a)([Object(o.b)({json:{read:!1,write:!1}})],c.prototype,"viewAllMode",void 0),Object(a.a)([Object(o.b)({json:{read:!1,write:!1}})],c.prototype,"viewAllLevelIds",void 0),c=i=Object(a.a)([Object(l.a)("esri.layers.support.LayerFloorInfo")],c);const u=c},415:function(e,t,r){"use strict";r.d(t,"a",(function(){return n}));var i=r(201);const a=[];function n(e,t){if(Object(i.c)(e.url))return!0;const{wkid:r}=t;for(const i of a){if(e.version>=i[0])return!0;if("function"==typeof i[1]&&(i[1]=i[1]()),i[1].has(r))return!1}return!0}a.push([10.91,()=>{const e=new Set([9709,9716,9741,9761,9766]);for(let t=9712;t<=9713;t++)e.add(t);for(let t=9748;t<=9749;t++)e.add(t);for(let t=20904;t<=20932;t++)e.add(t);for(let t=21004;t<=21032;t++)e.add(t);for(let t=21207;t<=21264;t++)e.add(t);for(let t=21307;t<=21364;t++)e.add(t);for(let t=102759;t<=102760;t++)e.add(t);for(let t=102901;t<=102960;t++)e.add(t);return e}]),a.push([10.9,()=>{const e=new Set([9300,9354,9364,9367,9373,9377,9387,9456,9473,9498,9678,9680,29874,103599,103872,104028]);for(let t=9356;t<=9360;t++)e.add(t);for(let t=9404;t<=9407;t++)e.add(t);for(let t=9476;t<=9482;t++)e.add(t);for(let t=9487;t<=9494;t++)e.add(t);for(let t=9697;t<=9699;t++)e.add(t);return e}]),a.push([10.81,()=>{const e=new Set([9265,9333,103598,103699]);for(let t=9248;t<=9254;t++)e.add(t);for(let t=9271;t<=9273;t++)e.add(t);for(let t=9284;t<=9285;t++)e.add(t);for(let t=21453;t<=21463;t++)e.add(t);return e}]),a.push([10.8,()=>{const e=new Set([8088,8395,8428,8433,8531,8687,8692,8694,8699,8900,9003,9006,9009,9012,9017,9191]);for(let t=8035;t<=8036;t++)e.add(t);for(let t=8455;t<=8456;t++)e.add(t);for(let t=8518;t<=8529;t++)e.add(t);for(let t=8533;t<=8536;t++)e.add(t);for(let t=8538;t<=8540;t++)e.add(t);for(let t=8677;t<=8679;t++)e.add(t);for(let t=8902;t<=8903;t++)e.add(t);for(let t=8907;t<=8910;t++)e.add(t);for(let t=8949;t<=8951;t++)e.add(t);for(let t=8972;t<=8987;t++)e.add(t);for(let t=9039;t<=9040;t++)e.add(t);for(let t=9068;t<=9069;t++)e.add(t);for(let t=9140;t<=9141;t++)e.add(t);for(let t=9148;t<=9150;t++)e.add(t);for(let t=9153;t<=9159;t++)e.add(t);for(let t=9205;t<=9218;t++)e.add(t);for(let t=9221;t<=9222;t++)e.add(t);for(let t=54098;t<=54101;t++)e.add(t);return e}]),a.push([10.71,()=>{const e=new Set([6316]);for(let t=8351;t<=8353;t++)e.add(t);for(let t=9294;t<=9297;t++)e.add(t);for(let t=103586;t<=103594;t++)e.add(t);for(let t=103696;t<=103698;t++)e.add(t);return e}]),a.push([10.7,()=>{const e=new Set([8387,8391,8427,8545,8682,8685,8818,31370,104022,104024,104975]);for(let t=8065;t<=8068;t++)e.add(t);for(let t=8082;t<=8083;t++)e.add(t);for(let t=8379;t<=8385;t++)e.add(t);for(let t=8836;t<=8840;t++)e.add(t);for(let t=8857;t<=8860;t++)e.add(t);for(let t=53035;t<=53037;t++)e.add(t);for(let t=54090;t<=54091;t++)e.add(t);for(let t=102498;t<=102499;t++)e.add(t);return e}]),a.push([10.61,()=>new Set([102497])]),a.push([10.6,()=>{const e=new Set([7803,7805,7887,8086,8232,8237,8240,8246,8249,8252,8255,9019,9391]);for(let t=7755;t<=7787;t++)e.add(t);for(let t=7791;t<=7795;t++)e.add(t);for(let t=7799;t<=7801;t++)e.add(t);for(let t=7825;t<=7831;t++)e.add(t);for(let t=7877;t<=7878;t++)e.add(t);for(let t=7882;t<=7883;t++)e.add(t);for(let t=7991;t<=7992;t++)e.add(t);for(let t=8042;t<=8043;t++)e.add(t);for(let t=8058;t<=8059;t++)e.add(t);for(let t=8311;t<=8348;t++)e.add(t);for(let t=9060;t<=9067;t++)e.add(t);for(let t=102562;t<=102568;t++)e.add(t);for(let t=102799;t<=102900;t++)e.add(t);return e}]),a.push([10.51,()=>{const e=new Set([7683,7881,7886,7899,8888,9e3]);for(let t=8013;t<=8032;t++)e.add(t);for(let t=9053;t<=9057;t++)e.add(t);for(let t=104017;t<=104018;t++)e.add(t);for(let t=104971;t<=104974;t++)e.add(t);return e}]),a.push([10.5,()=>{const e=new Set([6962,7035,7037,7039,7041,7084,7086,7133,7798,102399]);for(let t=4087;t<=4088;t++)e.add(t);for(let t=5896;t<=5899;t++)e.add(t);for(let t=7005;t<=7007;t++)e.add(t);for(let t=7057;t<=7070;t++)e.add(t);for(let t=7073;t<=7082;t++)e.add(t);for(let t=7109;t<=7128;t++)e.add(t);for(let t=7844;t<=7859;t++)e.add(t);return e}])},565:function(e,t,r){"use strict";r.d(t,"a",(function(){return o})),r.d(t,"b",(function(){return l}));var i=r(298),a=r(111),n=r(192),s=r(85);async function o(e,t){return await e.load(),l(e,t)}async function l(e,t){const r=[],o=(...e)=>{for(const t of e)Object(s.j)(t)||(Array.isArray(t)?o(...t):a.a.isCollection(t)?t.forEach((e=>o(e))):n.a.isLoadable(t)&&r.push(t))};t(o);let l=null;if(await Object(i.b)(r,(async e=>{!1!==(await Object(i.c)(function(e){return"loadAll"in e&&"function"==typeof e.loadAll}(e)?e.loadAll():e.load())).ok||l||(l=e)})),l)throw l.loadError;return e}},642:function(e,t,r){"use strict";r.d(t,"a",(function(){return d}));var i=r(79),a=r(111),n=r(134),s=r(85),o=(r(88),r(87),r(270),r(241)),l=r(81),c=(r(84),r(82),r(83),r(80));let u=class extends(Object(n.b)(a.a)){constructor(e){super(e),this.getCollections=null}initialize(){this.handles.add(Object(o.a)((()=>this._refresh())))}destroy(){this.getCollections=null}_refresh(){const e=Object(s.k)(this.getCollections)?this.getCollections():null;if(Object(s.j)(e))return void this.removeAll();let t=0;for(const r of e)Object(s.k)(r)&&(t=this._processCollection(t,r));this.splice(t,this.length)}_createNewInstance(e){return new a.a(e)}_processCollection(e,t){if(!t)return e;const r=this.itemFilterFunction?this.itemFilterFunction:e=>!!e;for(const i of t)if(i){if(r(i)){const t=this.indexOf(i,e);t>=0?t!==e&&this.reorder(i,e):this.add(i,e),++e}if(this.getChildrenFunction){const t=this.getChildrenFunction(i);if(Array.isArray(t))for(const r of t)e=this._processCollection(e,r);else e=this._processCollection(e,t)}}return e}};Object(i.a)([Object(l.b)()],u.prototype,"getCollections",void 0),Object(i.a)([Object(l.b)()],u.prototype,"getChildrenFunction",void 0),Object(i.a)([Object(l.b)()],u.prototype,"itemFilterFunction",void 0),u=Object(i.a)([Object(c.a)("esri.core.CollectionFlattener")],u);const d=u},696:function(e,t,r){"use strict";r.d(t,"a",(function(){return n})),r.d(t,"b",(function(){return o})),r.d(t,"c",(function(){return a}));var i=r(197);function a(e,t,r){const i=t.flatten((({sublayers:e})=>e)).length;return i!==e.length||(!!e.some((e=>e.originIdOf("minScale")>r||e.originIdOf("maxScale")>r||e.originIdOf("renderer")>r||e.originIdOf("labelingInfo")>r||e.originIdOf("opacity")>r||e.originIdOf("labelsVisible")>r||e.originIdOf("source")>r))||!s(e,t))}function n(e,t,r){return!!e.some((e=>{const t=e.source;return!(!t||"map-layer"===t.type&&t.mapLayerId===e.id&&(!t.gdbVersion||t.gdbVersion===r.gdbVersion))||e.originIdOf("renderer")>i.a.SERVICE||e.originIdOf("labelingInfo")>i.a.SERVICE||e.originIdOf("opacity")>i.a.SERVICE||e.originIdOf("labelsVisible")>i.a.SERVICE}))||!s(e,t)}function s(e,t){if(!e||!e.length)return!0;const r=t.slice().reverse().flatten((({sublayers:e})=>e&&e.toArray().reverse())).map((e=>e.id)).toArray();if(e.length>r.length)return!1;let i=0;const a=r.length;for(const{id:n}of e){for(;i<a&&r[i]!==n;)i++;if(i>=a)return!1}return!0}function o(e){return!!e&&e.some((e=>null!=e.minScale||e.layerDefinition&&null!=e.layerDefinition.minScale))}},719:function(e,t,r){"use strict";r.d(t,"a",(function(){return a}));var i=r(88);class a{constructor(e,t,r=""){this.major=e,this.minor=t,this._context=r}lessThan(e,t){return this.major<e||e===this.major&&this.minor<t}since(e,t){return!this.lessThan(e,t)}validate(e){if(this.major!==e.major){const t=this._context&&this._context+":",r=this._context&&this._context+" ";throw new i.a(t+"unsupported-version",`Required major ${r}version is '${this.major}', but got '\${version.major}.\${version.minor}'`,{version:e})}}clone(){return new a(this.major,this.minor,this._context)}static parse(e,t=""){const[r,n]=e.split("."),s=/^\s*\d+\s*$/;if(!r||!r.match||!r.match(s))throw new i.a((t&&t+":")+"invalid-version","Expected major version to be a number, but got '${version}'",{version:e});if(!n||!n.match||!n.match(s))throw new i.a((t&&t+":")+"invalid-version","Expected minor version to be a number, but got '${version}'",{version:e});const o=parseInt(r,10),l=parseInt(n,10);return new a(o,l,t)}}},813:function(e,t,r){"use strict";r.d(t,"a",(function(){return b}));var i=r(79),a=r(100),n=r(134),s=r(85),o=r(81),l=(r(84),r(82),r(83),r(80)),c=r(156),u=r(696),d=r(342);const p={visible:"visibleSublayers",definitionExpression:"layerDefs",labelingInfo:"hasDynamicLayers",labelsVisible:"hasDynamicLayers",opacity:"hasDynamicLayers",minScale:"visibleSublayers",maxScale:"visibleSublayers",renderer:"hasDynamicLayers",source:"hasDynamicLayers"};let b=class extends(Object(n.b)(a.a)){constructor(e){super(e),this.floors=null,this.scale=0}destroy(){this.layer=null}get dynamicLayers(){if(!this.hasDynamicLayers)return null;const e=this.visibleSublayers.map((e=>{const t=Object(d.c)(this.floors,e);return e.toExportImageJSON(t)}));return e.length?JSON.stringify(e):null}get hasDynamicLayers(){return this.layer&&Object(u.a)(this.visibleSublayers,this.layer.serviceSublayers,this.layer)}set layer(e){this._get("layer")!==e&&(this._set("layer",e),this.handles.remove("layer"),e&&this.handles.add([e.allSublayers.on("change",(()=>this.notifyChange("visibleSublayers"))),e.on("sublayer-update",(e=>this.notifyChange(p[e.propertyName])))],"layer"))}get layers(){const e=this.visibleSublayers;return e?e.length?"show:"+e.map((e=>e.id)).join(","):"show:-1":null}get layerDefs(){var e;const t=!(null==(e=this.floors)||!e.length),r=this.visibleSublayers.filter((e=>null!=e.definitionExpression||t&&null!=e.floorInfo));return r.length?JSON.stringify(r.reduce(((e,t)=>{const r=Object(d.c)(this.floors,t),i=Object(s.k)(r)?Object(d.a)(r,t):t.definitionExpression;return e[t.id]=i,e}),{})):null}get version(){this.commitProperty("layers"),this.commitProperty("layerDefs"),this.commitProperty("dynamicLayers"),this.commitProperty("timeExtent");const e=this.layer;return e&&(e.commitProperty("dpi"),e.commitProperty("imageFormat"),e.commitProperty("imageTransparency"),e.commitProperty("gdbVersion")),(this._get("version")||0)+1}get visibleSublayers(){const e=[];if(!this.layer)return e;const t=this.layer.sublayers,r=t=>{const i=this.scale,a=0===i,n=0===t.minScale||i<=t.minScale,s=0===t.maxScale||i>=t.maxScale;t.visible&&(a||n&&s)&&(t.sublayers?t.sublayers.forEach(r):e.unshift(t))};t&&t.forEach(r);const i=this._get("visibleSublayers");return!i||i.length!==e.length||i.some(((t,r)=>e[r]!==t))?e:i}toJSON(){const e=this.layer;let t={dpi:e.dpi,format:e.imageFormat,transparent:e.imageTransparency,gdbVersion:e.gdbVersion||null};return this.hasDynamicLayers&&this.dynamicLayers?t.dynamicLayers=this.dynamicLayers:t={...t,layers:this.layers,layerDefs:this.layerDefs},t}};Object(i.a)([Object(o.b)({readOnly:!0})],b.prototype,"dynamicLayers",null),Object(i.a)([Object(o.b)()],b.prototype,"floors",void 0),Object(i.a)([Object(o.b)({readOnly:!0})],b.prototype,"hasDynamicLayers",null),Object(i.a)([Object(o.b)()],b.prototype,"layer",null),Object(i.a)([Object(o.b)({readOnly:!0})],b.prototype,"layers",null),Object(i.a)([Object(o.b)({readOnly:!0})],b.prototype,"layerDefs",null),Object(i.a)([Object(o.b)({type:Number})],b.prototype,"scale",void 0),Object(i.a)([Object(o.b)(c.a)],b.prototype,"timeExtent",void 0),Object(i.a)([Object(o.b)({readOnly:!0})],b.prototype,"version",null),Object(i.a)([Object(o.b)({readOnly:!0})],b.prototype,"visibleSublayers",null),b=Object(i.a)([Object(l.a)("esri.layers.mixins.ExportImageParameters")],b)},860:function(e,t,r){"use strict";r.d(t,"a",(function(){return K}));var i,a=r(79),n=(r(99),r(180)),s=(r(217),r(250),r(253),r(251),r(120),r(248),r(225),r(319),r(256)),o=r(103),l=r(115),c=r(111),u=r(88),d=r(134),p=r(159),b=r(89),y=r(192),f=r(87),h=r(85),m=r(309),O=r(98),j=r(81),g=r(152),v=r(104),S=r(93),w=r(80),I=r(92),x=r(83),M=r(197),E=r(386),L=r(154),T=r(252),D=r(226),_=r(414),F=r(214),C=r(354),P=r(145),A=r(341),N=r(342),V=r(101);function R(e){return e&&"esriSMS"===e.type}function k(e,t,r){var i;const a=this.originIdOf(t)>=Object(M.e)(r.origin);return{ignoreOrigin:!0,allowNull:a,enabled:!!r&&"map-image"===(null==(i=r.layer)?void 0:i.type)&&(r.writeSublayerStructure||a)}}function U(e,t,r){var i;return{enabled:!!r&&"tile"===(null==(i=r.layer)?void 0:i.type)&&this._isOverridden(t)}}function J(e,t,r){return{ignoreOrigin:!0,enabled:r&&r.writeSublayerStructure||!1}}function q(e,t,r){return{ignoreOrigin:!0,enabled:!!r&&(r.writeSublayerStructure||this.originIdOf(t)>=Object(M.e)(r.origin))}}const $=f.a.getLogger("esri.layers.support.Sublayer");let B=0;const W=new Set;W.add("layer"),W.add("parent"),W.add("loaded"),W.add("loadStatus"),W.add("loadError"),W.add("loadWarnings");let z=i=class extends(Object(d.b)(Object(m.a)(Object(p.a)(y.a)))){constructor(e){super(e),this.capabilities=void 0,this.fields=null,this.fullExtent=null,this.globalIdField=null,this.legendEnabled=!0,this.objectIdField=null,this.popupEnabled=!0,this.popupTemplate=null,this.sourceJSON=null,this.title=null,this.typeIdField=null,this.types=null}async load(e){return this.addResolvingPromise((async()=>{var t;if(!this.layer&&!this.url)throw new u.a("sublayer:missing-layer","Sublayer can't be loaded without being part of a layer",{sublayer:this});let r=null;if(!this.layer||this.originIdOf("url")>M.a.SERVICE||"data-layer"===(null==(t=this.source)?void 0:t.type))r=(await Object(o.default)(this.url,{responseType:"json",query:{f:"json"},...e})).data;else{var i;let t=this.id;"map-layer"===(null==(i=this.source)?void 0:i.type)&&(t=this.source.mapLayerId),r=await this.layer.fetchSublayerInfo(t,e)}r&&(this.sourceJSON=r,this.read({layerDefinition:r},{origin:"service"}))})()),this}readCapabilities(e,t){const r=(e=(t=t.layerDefinition||t).capabilities||e)?e.toLowerCase().split(",").map((e=>e.trim())):[];return{exportMap:{supportsModification:!!t.canModifyLayer},operations:{supportsQuery:-1!==r.indexOf("query")}}}set definitionExpression(e){this._setAndNotifyLayer("definitionExpression",e)}get fieldsIndex(){return new T.a(this.fields||[])}set floorInfo(e){this._setAndNotifyLayer("floorInfo",e)}readGlobalIdFieldFromService(e,t){if((t=t.layerDefinition||t).globalIdField)return t.globalIdField;if(t.fields)for(const r of t.fields)if("esriFieldTypeGlobalID"===r.type)return r.name}get id(){const e=this._get("id");return null==e?B++:e}set id(e){this._get("id")!==e&&(!1!==this.get("layer.capabilities.exportMap.supportsDynamicLayers")?this._set("id",e):this._logLockedError("id","capability not available 'layer.capabilities.exportMap.supportsDynamicLayers'"))}set labelingInfo(e){this._setAndNotifyLayer("labelingInfo",e)}writeLabelingInfo(e,t,r,i){e&&e.length&&(t.layerDefinition={drawingInfo:{labelingInfo:e.map((e=>e.write({},i)))}})}set labelsVisible(e){this._setAndNotifyLayer("labelsVisible",e)}set layer(e){this._set("layer",e),this.sublayers&&this.sublayers.forEach((t=>t.layer=e))}set listMode(e){this._set("listMode",e)}set minScale(e){this._setAndNotifyLayer("minScale",e)}readMinScale(e,t){return t.minScale||t.layerDefinition&&t.layerDefinition.minScale||0}set maxScale(e){this._setAndNotifyLayer("maxScale",e)}readMaxScale(e,t){return t.maxScale||t.layerDefinition&&t.layerDefinition.maxScale||0}get effectiveScaleRange(){const{minScale:e,maxScale:t}=this;return{minScale:e,maxScale:t}}readObjectIdFieldFromService(e,t){if((t=t.layerDefinition||t).objectIdField)return t.objectIdField;if(t.fields)for(const r of t.fields)if("esriFieldTypeOID"===r.type)return r.name}set opacity(e){this._setAndNotifyLayer("opacity",e)}readOpacity(e,t){const r=t.layerDefinition;return 1-.01*(null!=r.transparency?r.transparency:r.drawingInfo.transparency)}writeOpacity(e,t,r,i){t.layerDefinition={drawingInfo:{transparency:100-100*e}}}writeParent(e,t){this.parent&&this.parent!==this.layer?t.parentLayerId=Object(x.e)(this.parent.id):t.parentLayerId=-1}get defaultPopupTemplate(){return this.createPopupTemplate()}set renderer(e){if(e)for(const t of e.getSymbols())if(Object(l.c)(t)){$.warn("Sublayer renderer should use 2D symbols");break}this._setAndNotifyLayer("renderer",e)}get source(){return this._get("source")||new C.a({mapLayerId:this.id})}set source(e){this._setAndNotifyLayer("source",e)}set sublayers(e){this._handleSublayersChange(e,this._get("sublayers")),this._set("sublayers",e)}castSublayers(e){return Object(x.m)(c.a.ofType(i),e)}writeSublayers(e,t,r){this.get("sublayers.length")&&(t[r]=this.sublayers.map((e=>e.id)).toArray().reverse())}readTypeIdField(e,t){let r=(t=t.layerDefinition||t).typeIdField;if(r&&t.fields){r=r.toLowerCase();const e=t.fields.find((e=>e.name.toLowerCase()===r));e&&(r=e.name)}return null}get url(){var e,t;const r=null!=(e=null==(t=this.layer)?void 0:t.parsedUrl)?e:this._lastParsedUrl,i=this.source;if(!r)return null;if(this._lastParsedUrl=r,"map-layer"===(null==i?void 0:i.type))return`${r.path}/${i.mapLayerId}`;const a={layer:JSON.stringify({source:this.source})};return`${r.path}/dynamicLayer?${Object(O.G)(a)}`}set url(e){e?this._override("url",e):this._clearOverride("url")}set visible(e){this._setAndNotifyLayer("visible",e)}writeVisible(e,t,r,i){t[r]=this.getAtOrigin("defaultVisibility","service")||e}clone(){const{store:e}=Object(g.a)(this),t=new i;return Object(g.a)(t).store=e.clone(W),this.commitProperty("url"),t._lastParsedUrl=this._lastParsedUrl,t}createPopupTemplate(e){return Object(A.a)(this,e)}createQuery(){return new P.a({returnGeometry:!0,where:this.definitionExpression||"1=1"})}async createFeatureLayer(){var e,t;if(this.hasOwnProperty("sublayers"))return null;const i=null==(e=this.layer)?void 0:e.parsedUrl,a=new(0,(await Promise.all([r.e(128),r.e(151)]).then(r.bind(null,361))).default)({url:i.path});return i&&this.source&&("map-layer"===this.source.type?a.layerId=this.source.mapLayerId:a.dynamicDataSource=this.source),null!=this.layer.refreshInterval&&(a.refreshInterval=this.layer.refreshInterval),this.definitionExpression&&(a.definitionExpression=this.definitionExpression),this.floorInfo&&(a.floorInfo=Object(b.a)(this.floorInfo)),this.originIdOf("labelingInfo")>M.a.SERVICE&&(a.labelingInfo=Object(b.a)(this.labelingInfo)),this.originIdOf("labelsVisible")>M.a.DEFAULTS&&(a.labelsVisible=this.labelsVisible),this.originIdOf("legendEnabled")>M.a.DEFAULTS&&(a.legendEnabled=this.legendEnabled),this.originIdOf("visible")>M.a.DEFAULTS&&(a.visible=this.visible),this.originIdOf("minScale")>M.a.DEFAULTS&&(a.minScale=this.minScale),this.originIdOf("maxScale")>M.a.DEFAULTS&&(a.maxScale=this.maxScale),this.originIdOf("opacity")>M.a.DEFAULTS&&(a.opacity=this.opacity),this.originIdOf("popupTemplate")>M.a.DEFAULTS&&(a.popupTemplate=Object(b.a)(this.popupTemplate)),this.originIdOf("renderer")>M.a.SERVICE&&(a.renderer=Object(b.a)(this.renderer)),"data-layer"===(null==(t=this.source)?void 0:t.type)&&(a.dynamicDataSource=this.source.clone()),this.originIdOf("title")>M.a.DEFAULTS&&(a.title=this.title),"map-image"===this.layer.type&&this.layer.originIdOf("customParameters")>M.a.DEFAULTS&&(a.customParameters=this.layer.customParameters),"tile"===this.layer.type&&this.layer.originIdOf("customParameters")>M.a.DEFAULTS&&(a.customParameters=this.layer.customParameters),a}getField(e){return this.fieldsIndex.get(e)}getFeatureType(e){const{typeIdField:t,types:r}=this;if(!t||!e)return null;const i=e.attributes?e.attributes[t]:void 0;if(null==i)return null;let a=null;return r.some((e=>{const{id:t}=e;return null!=t&&(t.toString()===i.toString()&&(a=e),!!a)})),a}getFieldDomain(e,t){const r=t&&t.feature,i=this.getFeatureType(r);if(i){const t=i.domains&&i.domains[e];if(t&&"inherited"!==t.type)return t}return this._getLayerDomain(e)}async queryFeatures(e=this.createQuery(),t){var i,a,n,s;if(await this.load(),!this.get("capabilities.operations.supportsQuery"))throw new u.a("Sublayer.queryFeatures","this layer doesn't support queries.");const[{executeQuery:o},{default:l}]=await Promise.all([Promise.all([r.e(50),r.e(187)]).then(r.bind(null,249)),r.e(310).then(r.bind(null,161))]),c=await o(this.url,P.a.from(e),null!=(i=null==(a=this.layer)?void 0:a.spatialReference)?i:null,{...t,query:{...null==(n=this.layer)?void 0:n.customParameters,token:null==(s=this.layer)?void 0:s.apiKey}}),d=l.fromJSON(c.data);if(null!=d&&d.features)for(const r of d.features)r.sourceLayer=this;return d}toExportImageJSON(e){var t;const r={id:this.id,source:(null==(t=this.source)?void 0:t.toJSON())||{mapLayerId:this.id,type:"mapLayer"}};if(this.definitionExpression){const t=Object(h.k)(e)?Object(N.a)(e,this):this.definitionExpression;r.definitionExpression=t}else Object(h.k)(e)&&(r.definitionExpression=e);const i=["renderer","labelingInfo","opacity","labelsVisible"].reduce(((e,t)=>(e[t]=this.originIdOf(t),e)),{}),a=Object.keys(i).some((e=>i[e]>M.a.SERVICE));if(a){const e=r.drawingInfo={};i.renderer>M.a.SERVICE&&(e.renderer=this.renderer?this.renderer.toJSON():null),i.labelsVisible>M.a.SERVICE&&(e.showLabels=this.labelsVisible),this.labelsVisible&&i.labelingInfo>M.a.SERVICE&&(e.labelingInfo=this.labelingInfo?this.labelingInfo.map((e=>e.write({},{origin:"service",layer:this.layer}))):null,e.showLabels=!0),i.opacity>M.a.SERVICE&&(e.transparency=100-100*this.opacity),this._assignDefaultSymbolColors(e.renderer)}return r}_assignDefaultSymbolColors(e){this._forEachSimpleMarkerSymbols(e,(e=>{e.color||"esriSMSX"!==e.style&&"esriSMSCross"!==e.style||(e.outline&&e.outline.color?e.color=e.outline.color:e.color=[0,0,0,0])}))}_forEachSimpleMarkerSymbols(e,t){if(e){const r="uniqueValueInfos"in e?e.uniqueValueInfos:"classBreakInfos"in e?e.classBreakInfos:[];for(const e of r)R(e.symbol)&&t(e.symbol);"symbol"in e&&R(e.symbol)&&t(e.symbol),"defaultSymbol"in e&&R(e.defaultSymbol)&&t(e.defaultSymbol)}}_setAndNotifyLayer(e,t){const r=this.layer,i=this._get(e);let a,n;switch(e){case"definitionExpression":case"floorInfo":a="supportsSublayerDefinitionExpression";case"minScale":case"maxScale":case"visible":a="supportsSublayerVisibility";break;case"labelingInfo":case"labelsVisible":case"opacity":case"renderer":case"source":a="supportsDynamicLayers",n="supportsModification"}const s=Object(g.a)(this).getDefaultOrigin();if("service"!==s){if(a&&!1===this.get(`layer.capabilities.exportMap.${a}`))return void this._logLockedError(e,`capability not available 'layer.capabilities.exportMap.${a}'`);if(n&&!1===this.get(`capabilities.exportMap.${n}`))return void this._logLockedError(e,`capability not available 'capabilities.exportMap.${n}'`)}"source"!==e||"not-loaded"===this.loadStatus?(this._set(e,t),"service"!==s&&i!==t&&r&&r.emit&&r.emit("sublayer-update",{propertyName:e,target:this})):this._logLockedError(e,"'source' can't be changed after calling sublayer.load()")}_handleSublayersChange(e,t){t&&(t.forEach((e=>{e.parent=null,e.layer=null})),this.handles.removeAll()),e&&(e.forEach((e=>{e.parent=this,e.layer=this.layer})),this.handles.add([e.on("after-add",(({item:e})=>{e.parent=this,e.layer=this.layer})),e.on("after-remove",(({item:e})=>{e.parent=null,e.layer=null})),e.on("before-changes",(e=>{const t=this.get("layer.capabilities.exportMap.supportsSublayersChanges");null==t||t||($.error(new u.a("sublayer:sublayers-non-modifiable","Sublayer can't be added, moved, or removed from the layer's sublayers",{sublayer:this,layer:this.layer})),e.preventDefault())}))]))}_logLockedError(e,t){$.error(new u.a("sublayer:locked",`Property '${e}' can't be changed on Sublayer from the layer '${this.layer.id}'`,{reason:t,sublayer:this,layer:this.layer}))}_getLayerDomain(e){const t=this.fieldsIndex.get(e);return t?t.domain:null}};z.test={isMapImageLayerOverridePolicy:e=>e===J||e===k,isTileImageLayerOverridePolicy:e=>e===U},Object(a.a)([Object(j.b)({readOnly:!0})],z.prototype,"capabilities",void 0),Object(a.a)([Object(S.a)("service","capabilities",["layerDefinition.canModifyLayer","layerDefinition.capabilities"])],z.prototype,"readCapabilities",null),Object(a.a)([Object(j.b)({type:String,value:null,json:{name:"layerDefinition.definitionExpression",write:{allowNull:!0,overridePolicy:k}}})],z.prototype,"definitionExpression",null),Object(a.a)([Object(j.b)({type:[L.a],json:{origins:{service:{read:{source:"layerDefinition.fields"}}}}})],z.prototype,"fields",void 0),Object(a.a)([Object(j.b)({readOnly:!0})],z.prototype,"fieldsIndex",null),Object(a.a)([Object(j.b)({type:_.a,value:null,json:{name:"layerDefinition.floorInfo",read:{source:"layerDefinition.floorInfo"},write:{target:"layerDefinition.floorInfo",overridePolicy:k},origins:{"web-scene":{read:!1,write:!1}}}})],z.prototype,"floorInfo",null),Object(a.a)([Object(j.b)({type:V.a,json:{read:{source:"layerDefinition.extent"}}})],z.prototype,"fullExtent",void 0),Object(a.a)([Object(j.b)({type:String})],z.prototype,"globalIdField",void 0),Object(a.a)([Object(S.a)("service","globalIdField",["layerDefinition.globalIdField","layerDefinition.fields"])],z.prototype,"readGlobalIdFieldFromService",null),Object(a.a)([Object(j.b)({type:x.a,json:{write:{ignoreOrigin:!0}}})],z.prototype,"id",null),Object(a.a)([Object(j.b)({value:null,type:[D.a],json:{read:{source:"layerDefinition.drawingInfo.labelingInfo"},write:{target:"layerDefinition.drawingInfo.labelingInfo",overridePolicy:J}}})],z.prototype,"labelingInfo",null),Object(a.a)([Object(I.a)("labelingInfo")],z.prototype,"writeLabelingInfo",null),Object(a.a)([Object(j.b)({type:Boolean,value:!0,json:{read:{source:"layerDefinition.drawingInfo.showLabels"},write:{target:"layerDefinition.drawingInfo.showLabels",overridePolicy:J}}})],z.prototype,"labelsVisible",null),Object(a.a)([Object(j.b)({value:null})],z.prototype,"layer",null),Object(a.a)([Object(j.b)({type:Boolean,value:!0,json:{origins:{service:{read:{enabled:!1}}},read:{source:"showLegend"},write:{target:"showLegend",overridePolicy:q}}})],z.prototype,"legendEnabled",void 0),Object(a.a)([Object(j.b)({type:["show","hide","hide-children"],value:"show",json:{read:!1,write:!1,origins:{"web-scene":{read:!0,write:!0}}}})],z.prototype,"listMode",null),Object(a.a)([Object(j.b)({type:Number,value:0,json:{write:{overridePolicy:J}}})],z.prototype,"minScale",null),Object(a.a)([Object(S.a)("minScale",["minScale","layerDefinition.minScale"])],z.prototype,"readMinScale",null),Object(a.a)([Object(j.b)({type:Number,value:0,json:{write:{overridePolicy:J}}})],z.prototype,"maxScale",null),Object(a.a)([Object(S.a)("maxScale",["maxScale","layerDefinition.maxScale"])],z.prototype,"readMaxScale",null),Object(a.a)([Object(j.b)({readOnly:!0})],z.prototype,"effectiveScaleRange",null),Object(a.a)([Object(j.b)({type:String})],z.prototype,"objectIdField",void 0),Object(a.a)([Object(S.a)("service","objectIdField",["layerDefinition.objectIdField","layerDefinition.fields"])],z.prototype,"readObjectIdFieldFromService",null),Object(a.a)([Object(j.b)({type:Number,value:1,json:{write:{target:"layerDefinition.drawingInfo.transparency",overridePolicy:J}}})],z.prototype,"opacity",null),Object(a.a)([Object(S.a)("opacity",["layerDefinition.drawingInfo.transparency","layerDefinition.transparency"])],z.prototype,"readOpacity",null),Object(a.a)([Object(I.a)("opacity")],z.prototype,"writeOpacity",null),Object(a.a)([Object(j.b)({json:{type:x.a,write:{target:"parentLayerId",writerEnsuresNonNull:!0,overridePolicy:J}}})],z.prototype,"parent",void 0),Object(a.a)([Object(I.a)("parent")],z.prototype,"writeParent",null),Object(a.a)([Object(j.b)({type:Boolean,value:!0,json:{read:{source:"disablePopup",reader:(e,t)=>!t.disablePopup},write:{target:"disablePopup",overridePolicy:q,writer(e,t,r){t[r]=!e}}}})],z.prototype,"popupEnabled",void 0),Object(a.a)([Object(j.b)({type:n.a,json:{read:{source:"popupInfo"},write:{target:"popupInfo",overridePolicy:q}}})],z.prototype,"popupTemplate",void 0),Object(a.a)([Object(j.b)({readOnly:!0})],z.prototype,"defaultPopupTemplate",null),Object(a.a)([Object(j.b)({types:s.a,value:null,json:{name:"layerDefinition.drawingInfo.renderer",write:{overridePolicy:J},origins:{"web-scene":{types:s.b,name:"layerDefinition.drawingInfo.renderer",write:{overridePolicy:J}}}}})],z.prototype,"renderer",null),Object(a.a)([Object(j.b)({types:{key:"type",base:null,typeMap:{"data-layer":F.a,"map-layer":C.a}},cast(e){if(e){if("mapLayerId"in e)return Object(x.d)(C.a,e);if("dataSource"in e)return Object(x.d)(F.a,e)}return e},json:{name:"layerDefinition.source",write:{overridePolicy:J}}})],z.prototype,"source",null),Object(a.a)([Object(j.b)()],z.prototype,"sourceJSON",void 0),Object(a.a)([Object(j.b)({value:null,json:{type:[x.a],write:{target:"subLayerIds",allowNull:!0,overridePolicy:J}}})],z.prototype,"sublayers",null),Object(a.a)([Object(v.a)("sublayers")],z.prototype,"castSublayers",null),Object(a.a)([Object(I.a)("sublayers")],z.prototype,"writeSublayers",null),Object(a.a)([Object(j.b)({type:String,json:{name:"name",write:{overridePolicy:q}}})],z.prototype,"title",void 0),Object(a.a)([Object(j.b)({type:String})],z.prototype,"typeIdField",void 0),Object(a.a)([Object(S.a)("typeIdField",["layerDefinition.typeIdField"])],z.prototype,"readTypeIdField",null),Object(a.a)([Object(j.b)({type:[E.a],json:{origins:{service:{read:{source:"layerDefinition.types"}}}}})],z.prototype,"types",void 0),Object(a.a)([Object(j.b)({type:String,json:{read:{source:"layerUrl"},write:{target:"layerUrl",overridePolicy:U}}})],z.prototype,"url",null),Object(a.a)([Object(j.b)({type:Boolean,value:!0,json:{read:{source:"defaultVisibility"},write:{target:"defaultVisibility",overridePolicy:J}}})],z.prototype,"visible",null),Object(a.a)([Object(I.a)("visible")],z.prototype,"writeVisible",null),z=i=Object(a.a)([Object(w.a)("esri.layers.support.Sublayer")],z);const K=z},954:function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return R}));var i=r(79),a=r(103),n=r(121),s=r(88),o=r(134),l=r(565),c=r(85),u=r(309),d=r(91),p=r(81),b=(r(84),r(82),r(83)),y=r(93),f=r(80),h=r(92),m=r(197),O=r(101),j=r(391),g=r(207),v=r(362),S=r(1017),w=r(343),I=r(254),x=r(344),M=r(261),E=r(380),L=r(310),T=r(239),D=r(1018),_=r(345),F=r(156),C=r(813),P=r(860),A=r(696),N=r(415);let V=class extends(Object(I.a)(Object(_.a)(Object(T.a)(Object(D.a)(Object(S.a)(Object(w.a)(Object(M.a)(Object(E.a)(Object(u.a)(Object(L.a)(Object(v.a)(Object(x.a)(Object(o.b)(g.a)))))))))))))){constructor(...e){super(...e),this.datesInUnknownTimezone=!1,this.dpi=96,this.gdbVersion=null,this.imageFormat="png24",this.imageMaxHeight=2048,this.imageMaxWidth=2048,this.imageTransparency=!0,this.isReference=null,this.labelsVisible=!1,this.operationalLayerType="ArcGISMapServiceLayer",this.sourceJSON=null,this.sublayers=null,this.type="map-image",this.url=null}normalizeCtorArgs(e,t){return"string"==typeof e?{url:e,...t}:e}load(e){const t=Object(c.k)(e)?e.signal:null;return this.addResolvingPromise(this.loadFromPortal({supportedTypes:["Map Service"]},e).catch(d.s).then((()=>this._fetchService(t)))),Promise.resolve(this)}readImageFormat(e,t){const r=t.supportedImageFormatTypes;return r&&r.indexOf("PNG32")>-1?"png32":"png24"}writeSublayers(e,t,r,i){if(!this.loaded||!e)return;const a=e.slice().reverse().flatten((({sublayers:e})=>e&&e.toArray().reverse())).toArray();let n=!1;if(this.capabilities&&this.capabilities.operations.supportsExportMap&&this.capabilities.exportMap.supportsDynamicLayers){const e=Object(m.e)(i.origin);if(e===m.a.PORTAL_ITEM){const e=this.createSublayersForOrigin("service").sublayers;n=Object(A.c)(a,e,m.a.SERVICE)}else if(e>m.a.PORTAL_ITEM){const e=this.createSublayersForOrigin("portal-item");n=Object(A.c)(a,e.sublayers,Object(m.e)(e.origin))}}const s=[],o={writeSublayerStructure:n,...i};let l=n;a.forEach((e=>{const t=e.write({},o);s.push(t),l=l||"user"===e.originOf("visible")})),s.some((e=>Object.keys(e).length>1))&&(t.layers=s),l&&(t.visibleLayers=a.filter((e=>e.visible)).map((e=>e.id)))}createExportImageParameters(e,t,r,i){const a=i&&i.pixelRatio||1;e&&this.version>=10&&(e=e.clone().shiftCentralMeridian());const n=new C.a({layer:this,floors:null==i?void 0:i.floors,scale:Object(j.b)({extent:e,width:t})*a}),s=n.toJSON();n.destroy();const o=!i||!i.rotation||this.version<10.3?{}:{rotation:-i.rotation},l=e&&e.spatialReference,c=l.wkid||JSON.stringify(l.toJSON());s.dpi*=a;const u={};if(null!=i&&i.timeExtent){const{start:e,end:t}=i.timeExtent.toJSON();u.time=e&&t&&e===t?""+e:`${null==e?"null":e},${null==t?"null":t}`}else this.timeInfo&&!this.timeInfo.hasLiveData&&(u.time="null,null");return{bbox:e&&e.xmin+","+e.ymin+","+e.xmax+","+e.ymax,bboxSR:c,imageSR:c,size:t+","+r,...s,...o,...u}}async fetchImage(e,t,r,i){var n;const o={responseType:"image",signal:null!=(n=null==i?void 0:i.signal)?n:null,query:{...this.parsedUrl.query,...this.createExportImageParameters(e,t,r,i),f:"image",...this.refreshParameters,...this.customParameters,token:this.apiKey}},l=this.parsedUrl.path+"/export";return null==o.query.dynamicLayers||this.capabilities.exportMap.supportsDynamicLayers?Object(a.default)(l,o).then((e=>e.data)).catch((e=>{if(Object(d.l)(e))throw e;throw new s.a("mapimagelayer:image-fetch-error",`Unable to load image: ${l}`,{error:e})})):Promise.reject(new s.a("mapimagelayer:dynamiclayer-not-supported",`service ${this.url} doesn't support dynamic layers, which is required to be able to change the sublayer's order, rendering, labeling or source.`,{query:o.query}))}async fetchRecomputedExtents(e={}){const t={...e,query:{returnUpdates:!0,f:"json",...this.customParameters,token:this.apiKey}},{data:r}=await Object(a.default)(this.url,t),{extent:i,fullExtent:s,timeExtent:o}=r,l=i||s;return{fullExtent:l&&O.a.fromJSON(l),timeExtent:o&&n.a.fromJSON({start:o[0],end:o[1]})}}loadAll(){return Object(l.a)(this,(e=>{e(this.allSublayers)}))}serviceSupportsSpatialReference(e){return Object(N.a)(this,e)}async _fetchService(e){if(this.sourceJSON)return void this.read(this.sourceJSON,{origin:"service",url:this.parsedUrl});const{data:t,ssl:r}=await Object(a.default)(this.parsedUrl.path,{query:{f:"json",...this.parsedUrl.query,...this.customParameters,token:this.apiKey},signal:e});r&&(this.url=this.url.replace(/^http:/i,"https:")),this.sourceJSON=t,this.read(t,{origin:"service",url:this.parsedUrl})}};Object(i.a)([Object(p.b)({type:Boolean})],V.prototype,"datesInUnknownTimezone",void 0),Object(i.a)([Object(p.b)()],V.prototype,"dpi",void 0),Object(i.a)([Object(p.b)()],V.prototype,"gdbVersion",void 0),Object(i.a)([Object(p.b)()],V.prototype,"imageFormat",void 0),Object(i.a)([Object(y.a)("imageFormat",["supportedImageFormatTypes"])],V.prototype,"readImageFormat",null),Object(i.a)([Object(p.b)({json:{origins:{service:{read:{source:"maxImageHeight"}}}}})],V.prototype,"imageMaxHeight",void 0),Object(i.a)([Object(p.b)({json:{origins:{service:{read:{source:"maxImageWidth"}}}}})],V.prototype,"imageMaxWidth",void 0),Object(i.a)([Object(p.b)()],V.prototype,"imageTransparency",void 0),Object(i.a)([Object(p.b)({type:Boolean,json:{read:!1,write:{enabled:!0,overridePolicy:()=>({enabled:!1})}}})],V.prototype,"isReference",void 0),Object(i.a)([Object(p.b)({json:{read:!1,write:!1}})],V.prototype,"labelsVisible",void 0),Object(i.a)([Object(p.b)({type:["ArcGISMapServiceLayer"]})],V.prototype,"operationalLayerType",void 0),Object(i.a)([Object(p.b)({json:{read:!1,write:!1}})],V.prototype,"popupEnabled",void 0),Object(i.a)([Object(p.b)()],V.prototype,"sourceJSON",void 0),Object(i.a)([Object(p.b)({json:{write:{ignoreOrigin:!0}}})],V.prototype,"sublayers",void 0),Object(i.a)([Object(h.a)("sublayers",{layers:{type:[P.a]},visibleLayers:{type:[b.a]}})],V.prototype,"writeSublayers",null),Object(i.a)([Object(p.b)({type:["show","hide","hide-children"]})],V.prototype,"listMode",void 0),Object(i.a)([Object(p.b)({json:{read:!1},readOnly:!0,value:"map-image"})],V.prototype,"type",void 0),Object(i.a)([Object(p.b)(F.n)],V.prototype,"url",void 0),V=Object(i.a)([Object(f.a)("esri.layers.MapImageLayer")],V);const R=V}}]);
//# sourceMappingURL=120.c6e3a983.chunk.js.map