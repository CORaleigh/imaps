{"version":3,"sources":["../node_modules/@arcgis/core/views/layers/support/FeatureFilter.js","../node_modules/@arcgis/core/AggregateGraphic.js","../node_modules/@arcgis/core/views/2d/layers/support/FeatureCommandQueue.js","../node_modules/@arcgis/core/views/2d/layers/support/FeatureLayerProxy.js","../node_modules/@arcgis/core/views/2d/tiling/TileManager.js","../node_modules/@arcgis/core/views/layers/support/FeatureEffect.js","../node_modules/@arcgis/core/views/layers/FeatureLayerView.js","../node_modules/@arcgis/core/views/2d/layers/FeatureLayerView2D.js","../node_modules/@arcgis/core/views/2d/layers/features/tileRenderers.js","../node_modules/@arcgis/core/views/layers/LayerView.js","../node_modules/@arcgis/core/views/layers/support/ClipArea.js","../node_modules/@arcgis/core/views/layers/support/ClipRect.js","../node_modules/@arcgis/core/views/layers/support/Geometry.js","../node_modules/@arcgis/core/views/layers/support/Path.js","../node_modules/@arcgis/core/views/2d/layers/LayerView2D.js","../node_modules/@arcgis/core/views/2d/engine/webgl/visualVariablesUtils.js","../node_modules/@arcgis/core/renderers/support/clickToleranceUtils.js","../node_modules/@arcgis/core/views/support/drapedUtils.js","../node_modules/@arcgis/core/views/support/floorFilterUtils.js","../node_modules/@arcgis/core/views/layers/RefreshableLayerView.js","../node_modules/@arcgis/core/views/layers/support/popupUtils.js"],"names":["d","m","i","esriSpatialRelIntersects","esriSpatialRelContains","esriSpatialRelCrosses","esriSpatialRelDisjoint","esriSpatialRelEnvelopeIntersects","esriSpatialRelIndexIntersects","esriSpatialRelOverlaps","esriSpatialRelTouches","esriSpatialRelWithin","esriSpatialRelRelation","u","esriSRUnit_Meter","esriSRUnit_Kilometer","esriSRUnit_Foot","esriSRUnit_StatuteMile","esriSRUnit_NauticalMile","esriSRUnit_USNauticalMile","h","s","constructor","e","super","this","where","geometry","spatialRelationship","hiddenIds","Set","distance","objectIds","units","timeExtent","enabled","writeWhere","t","enable","_set","createQuery","r","n","a","p","c","o","clone","l","forEach","add","type","String","prototype","types","json","read","write","source","reader","target","writer","Array","from","Number","overridePolicy","readOnly","y","arguments","isAggregate","getEffectivePopupTemplate","popupTemplate","sourceLayer","featureReduction","popupEnabled","getObjectId","objectId","cloneProperties","Boolean","some","globalId","filter","error","map","values","delete","_hasGlobalIds","_queueProcessor","concurrency","process","destroy","clear","updating","length","push","last","finally","notifyChange","popLast","_mergeEdits","addedFeatures","deletedFeatures","updatedFeatures","edits","addOrModified","removed","f","_startupResolver","isReady","initialize","_controller","addResolvingPromise","_startWorker","signal","abort","_connection","close","tileRenderer","client","closed","when","isArray","transferList","service","config","tileInfo","toJSON","tiles","invoke","resolve","promise","query","params","name","value","strategy","_tiles","Map","buffer","acquireTile","releaseTile","tileInfoView","_releaseTile","tileKeys","update","getTileCoverage","state","spans","lodInfo","level","row","colFrom","colTo","getId","normalizeCol","getWorldForColumn","_getOrAcquireTile","visible","key","_addPlaceholders","has","id","pool","release","hasMissingTiles","size","added","set","get","_getTile","_addPlaceholderChildren","Math","abs","_addPlaceholderParent","_addPlaceholderChild","hasData","contains","getParentKey","patchCount","includedEffect","excludedEffect","excludedLabelsVisible","_","getLogger","P","_updatingRequiredFieldsPromise","effect","layer","requiredFields","view","_handleRequiredFieldsChange","availableFields","fieldsIndex","outFields","maximumNumberOfFeatures","maximumNumberOfFeaturesExceeded","highlight","Error","returnGeometry","outSpatialReference","spatialReference","b","R","intersection","queryFeatures","queryObjectIds","queryFeatureCount","queryExtent","_loadArcadeModules","E","_updateRequiredFields","then","objectIdField","renderer","orderBy","collectRequiredFields","F","timeInfo","w","startField","endField","floorInfo","floorField","g","subtypeField","sublayers","Promise","all","displayField","sort","validateFetchPopupFeatures","clientGraphics","q","createPopupQuery","arcadeUtils","hasGeometryOperations","x","attributes","concat","features","catch","geometryType","I","returnZ","returnM","canResume","isEmpty","v","j","K","W","X","H","k","U","J","_pipelineIsUpdating","_commandsQueue","_doEdit","_doRefresh","_doUpdate","_visibilityOverrides","_effect","_highlightIds","_lastPixelBuffer","_updateHighlight","async","_proxy","setHighlight","keys","_uploadsLocked","_needsClusterSizeUpdate","effectLists","included","excluded","_updateClusterSizeTask","remove","_initProxy","_initServiceOptions","handles","on","valueRanges","isTable","_createClientOptions","V","_createServiceOptions","orderByFields","_serviceOptions","labelsVisible","items","suspended","labelingInfo","effects","queryMode","renderingConfigHash","floors","definitionExpression","gdbVersion","historicMoment","getTime","JSON","stringify","customParameters","apiKey","geometryDefinition","clips","reduce","sublayerHash","filterHash","effectHash","streamFilter","clipsHash","hasEffects","isCollection","getAttribute","toArray","_addHighlight","_removeHighlight","hasHighlight","hitTest","_hitTest","getAggregates","fromJSON","queryStatistics","valueExpression","viewInfoParams","viewingMode","scale","querySummaryStatistics","_cleanUpQuery","queryFeaturesJSON","_setLayersForFeature","count","extent","M","setVisibility","_update","_tileStrategy","updateTiles","requestUpdate","attach","timeline","record","title","N","_acquireTile","featuresTilingScheme","_edit","detach","container","removeAllChildren","uninstall","_tileRendererHash","moveStart","viewChange","moveEnd","popup","defaultPopupTemplateEnabled","fetchClientPopupFeatures","_fetchServicePopupFeatures","event","createFetchPopupFeaturesQueryGeometry","$","isUpdating","console","log","setUpdating","emitEvent","emit","capabilities","supportsPagination","operations","supportsEditing","mode","featureCount","fullExtent","width","height","warn","fields","L","globalIdField","getFeatureDefinition","openPorts","parsedUrl","dynamicDataSource","datesInUnknownTimezone","_detectQueryMode","field","timeReferenceUnknownClient","maxRecordCount","tileMaxRecordCount","S","_validateEdit","includes","destroyed","_hasRequiredSupport","_getEffectiveRenderer","_createSchemaConfig","_createConfiguration","max","schema","pixelBuffer","_createTileRendererHash","_initTileRenderer","onConfigUpdate","startup","_onceTilesUpdated","mesh","targets","aggregate","_lockGPUUploads","applyUpdate","_unlockGPUUploads","_updateClusterSizeVariable","_forceAttributeTextureUpload","invalidateLabels","onEdits","refresh","_effectiveRenderer","_createUpdateClusterSizeTask","watch","_updateClusterEffectiveRendererSizeVariable","dynamicClusterSize","visualVariables","T","indexOf","C","_aggregateValueRanges","aggregateFields","once","default","O","layerView","install","_createFeatureDataHash","getAttributeHash","hasFilter","_injectOverrides","_addFloorFilterClause","z","viewAllLevelIds","replace","join","RegExp","trim","B","devicePixelRatio","window","filters","supportsTextureFloat","maxTextureSize","lockGPUUploads","unlockGPUUploads","forceAttributeTextureUpload","token","_createHittestResult","D","getFeature","getAggregate","referenceId","A","Y","EventedMixin","parent","declaredClass","fullOpacity","suspendInfo","getSuspendInfo","legendEnabled","updatingHandles","updatingProgress","_override","_clearOverride","ready","viewNotReady","loaded","layerNotLoaded","layerInvisible","left","right","top","bottom","version","_get","base","typeMap","polygon","path","ofType","rect","moving","attached","lastUpdateId","updateRequested","fadeTransitionEnabled","opacity","blendMode","whenLayerView","isVisibleAtScale","minScale","maxScale","processUpdate","isFulfilled","isResolved","isRendering","minDataValue","maxDataValue","minSize","maxSize","SIZE_MINMAX_VALUE","expression","stops","SIZE_SCALE_STOPS","levels","SIZE_FIELD_STOPS","valueUnit","SIZE_UNIT_VALUE","NONE","xoffset","yoffset","floor","pointerType","symbol","uniqueValueInfos","classBreakInfos","resolution","overlayPixelSizeInMapUnits","basemapSpatialReference","equals","xmin","min","ymin","xmax","ymax","toMap","intersects","doRefresh","getRequiredFields","lastEditInfoEnabled","typeIdField","relationships","keyField","defaultPopupTemplate"],"mappings":"kGAAA,sCAIyvBA,EAJzvB,8GAI2vB,MAAMC,EAAE,IAAIC,IAAE,CAACC,yBAAyB,aAAaC,uBAAuB,WAAWC,sBAAsB,UAAUC,uBAAuB,WAAWC,iCAAiC,sBAAsBC,8BAA8B,mBAAmBC,uBAAuB,WAAWC,sBAAsB,UAAUC,qBAAqB,SAASC,uBAAuB,aAAaC,EAAE,IAAIX,IAAE,CAACY,iBAAiB,SAASC,qBAAqB,aAAaC,gBAAgB,OAAOC,uBAAuB,QAAQC,wBAAwB,iBAAiBC,0BAA0B,sBAAsB,IAAIC,EAAEpB,EAAE,cAAcqB,IAAEC,YAAYC,GAAGC,MAAMD,GAAGE,KAAKC,MAAM,KAAKD,KAAKE,SAAS,KAAKF,KAAKG,oBAAoB,aAAaH,KAAKI,UAAU,IAAIC,IAAIL,KAAKM,cAAS,EAAON,KAAKO,UAAU,KAAKP,KAAKQ,MAAM,KAAKR,KAAKS,WAAW,KAAKT,KAAKU,SAAQ,EAAGC,WAAWb,EAAEc,GAAGA,EAAEX,MAAMH,GAAG,MAAMe,SAASb,KAAKc,KAAK,WAAU,GAAIC,YAAYjB,EAAE,IAAI,MAAMG,MAAMW,EAAEV,SAASc,EAAEb,oBAAoB1B,EAAEgC,WAAWb,EAAEW,UAAUU,EAAET,MAAMU,EAAEZ,SAASa,GAAGnB,KAAK,OAAO,IAAIoB,IAAE,CAAClB,SAASmB,YAAEL,GAAGT,UAAUc,YAAEJ,GAAGd,oBAAoB1B,EAAEgC,WAAWY,YAAEzB,GAAGK,MAAMW,EAAEJ,MAAMU,EAAEZ,SAASa,KAAKrB,IAAIwB,QAAQ,MAAMrB,MAAMH,EAAEI,SAASU,EAAET,oBAAoBa,EAAEZ,UAAU3B,EAAEgC,WAAWb,EAAEW,UAAUU,EAAET,MAAMU,EAAEZ,SAASa,GAAGnB,KAAKuB,EAAE,IAAIlB,IAAI,OAAO5B,EAAE+C,SAAS1B,GAAGyB,EAAEE,IAAI3B,KAAK,IAAIvB,EAAE,CAAC2B,SAASmB,YAAET,GAAGR,UAAUmB,EAAEhB,UAAUc,YAAEJ,GAAGd,oBAAoBa,EAAEP,WAAWY,YAAEzB,GAAGK,MAAMH,EAAEU,MAAMU,EAAEZ,SAASa,MAAMrB,YAAE,CAACmB,YAAE,CAACS,KAAKC,UAAUhC,EAAEiC,UAAU,aAAQ,GAAQ9B,YAAE,CAACqB,YAAE,UAAUxB,EAAEiC,UAAU,aAAa,MAAM9B,YAAE,CAACmB,YAAE,CAACY,MAAMjB,IAAEkB,KAAK,CAACC,KAAKR,IAAES,OAAM,MAAOrC,EAAEiC,UAAU,gBAAW,GAAQ9B,YAAE,CAACmB,YAAE,CAACS,KAAKC,OAAOG,KAAK,CAACC,KAAK,CAACE,OAAO,aAAaC,OAAO1D,EAAEuD,MAAMC,MAAM,CAACG,OAAO,aAAaC,OAAO5D,EAAEwD,WAAWrC,EAAEiC,UAAU,2BAAsB,GAAQ9B,YAAE,CAACmB,YAAE,CAACa,KAAK,CAACE,MAAM,CAAClC,EAAEc,EAAEI,IAAIJ,EAAEI,GAAGqB,MAAMC,KAAKxC,GAAGiC,KAAKjC,GAAG,IAAIO,IAAIP,OAAOH,EAAEiC,UAAU,iBAAY,GAAQ9B,YAAE,CAACmB,YAAE,CAACS,KAAKa,OAAOT,KAAK,CAACE,MAAM,CAACQ,eAAe1C,IAAC,CAAIY,QAAQZ,EAAE,SAASH,EAAEiC,UAAU,gBAAW,GAAQ9B,YAAE,CAACmB,YAAE,CAACS,KAAK,CAACa,QAAQT,KAAK,CAACE,OAAM,MAAOrC,EAAEiC,UAAU,iBAAY,GAAQ9B,YAAE,CAACmB,YAAE,CAACS,KAAKC,OAAOG,KAAK,CAACC,KAAK3C,EAAE2C,KAAKC,MAAM,CAACI,OAAOhD,EAAE4C,MAAMQ,eAAe1C,GAAG,MAAM,CAACY,QAAQZ,GAAGE,KAAKM,SAAS,SAASX,EAAEiC,UAAU,aAAQ,GAAQ9B,YAAE,CAACmB,YAAE,CAACS,KAAKV,IAAEc,KAAK,CAACE,OAAM,MAAOrC,EAAEiC,UAAU,kBAAa,GAAQ9B,YAAE,CAACmB,YAAE,CAACwB,UAAS,KAAM9C,EAAEiC,UAAU,eAAU,GAAQjC,EAAEpB,EAAEuB,YAAE,CAACoB,YAAE,4CAA4CvB,GAAG,IAAI+C,EAAE/C,G,sFCA1tFwB,E,yDAAE,IAAIvB,EAAEuB,EAAE,cAAcH,IAAEnB,cAAcE,SAAS4C,WAAW3C,KAAK4C,aAAY,EAAGC,0BAA0B/C,GAAE,GAAI,GAAGE,KAAK8C,cAAc,OAAO9C,KAAK8C,cAAc,MAAM9B,EAAEhB,KAAK+C,aAAa/C,KAAK+C,YAAYC,iBAAiB,OAAOhC,GAAG,kBAAkBA,GAAGA,EAAEiC,aAAajC,EAAE8B,cAAc,KAAKI,cAAc,OAAOlD,KAAKmD,SAAS7B,QAAQ,OAAO,IAAIH,EAAE,CAACgC,SAASnD,KAAKmD,YAAYnD,KAAKoD,sBAAsBtD,YAAE,CAACc,YAAE,CAACc,KAAK2B,WAAWzD,EAAEgC,UAAU,mBAAc,GAAQ9B,YAAE,CAACc,YAAE,CAACc,KAAKa,OAAOT,KAAK,CAACC,MAAK,MAAOnC,EAAEgC,UAAU,gBAAW,GAAQhC,EAAEuB,EAAErB,YAAE,CAACuB,YAAE,0BAA0BzB,GAAG,IAAIwB,EAAExB,E,0KCAxa,SAASrB,EAAEuB,GAAG,OAAOA,EAAEwD,MAAMxD,GAAGA,EAAEyD,WAAW,SAAStC,EAAEnB,GAAG,OAAOA,EAAE0D,QAAQ1D,IAAIA,EAAE2D,QAAQC,KAAK5D,IAAI,IAAIkB,EAAE,OAAO,OAAOA,EAAElB,EAAEqD,UAAUnC,EAAElB,EAAEyD,YAAY,SAASrC,EAAEpB,EAAEkB,GAAG,MAAMpB,EAAE,IAAIS,IAAIP,GAAG,IAAI,MAAMc,KAAKI,EAAE2C,SAAS/D,EAAE6B,IAAIb,GAAG,OAAOhB,EAAE,SAASnB,EAAEqB,EAAEkB,GAAG,MAAMpB,EAAE,IAAIS,IAAIP,GAAG,IAAI,MAAMc,KAAKI,EAAE2C,SAAS/D,EAAEgE,OAAOhD,GAAG,OAAOhB,EAAE,IAAIR,EAAE,cAAc4B,IAAEnB,YAAYC,GAAGC,QAAQC,KAAK6D,eAAc,EAAG7D,KAAK8D,gBAAgB,IAAIzC,IAAE,CAAC0C,YAAY,EAAEC,QAAQlE,EAAEkE,UAAUC,UAAUjE,KAAK8D,gBAAgBI,QAAYC,eAAW,OAAOnE,KAAK8D,gBAAgBM,OAAO,EAAEC,KAAKvE,GAAG,MAAMkB,EAAEhB,KAAK8D,gBAAgBlE,EAAEoB,EAAEsD,OAAO,OAAOxE,EAAE4B,MAAM,IAAI,SAAS,IAAI,UAAU,IAAI,MAAM9B,OAAE,EAAOA,EAAE8B,QAAQ5B,EAAE4B,KAAK,OAAOV,EAAEqD,KAAKvE,GAAGyE,SAAS,IAAIvE,KAAKwE,aAAa,cAAc,MAAM,IAAI,OAAO,CAAC,MAAM5D,EAAE,oBAAoB,MAAMhB,OAAE,EAAOA,EAAE8B,MAAM9B,EAAE,KAAKgB,GAAGI,EAAEyD,UAAU,MAAMpD,EAAErB,KAAK0E,YAAY9D,EAAEd,GAAG,IAAI,MAAMA,KAAKuB,EAAEL,EAAEqD,KAAKvE,GAAGyE,SAAS,IAAIvE,KAAKwE,aAAa,cAAc,OAAOxE,KAAKwE,aAAa,YAAYE,YAAY5E,EAAEkB,GAAG,IAAIpB,EAAEgB,EAAE,MAAM+D,cAActD,EAAEuD,gBAAgBxF,EAAEyF,gBAAgBzD,GAAGJ,EAAE8D,MAAM,GAAG9E,KAAK6D,cAAc7D,KAAK6D,eAAetF,EAAE8C,IAAI9C,EAAE6C,IAAI7C,EAAEa,GAAGY,KAAK6D,cAAe,MAAM,CAAC/D,EAAE,CAAC4B,KAAK,iBAAiBoD,MAAM,CAACC,cAAc,IAAI1D,KAAKD,GAAG4D,QAAQ5F,KAAK,MAAM+B,EAAE,IAAId,IAAIY,EAAE,OAAOrB,EAAE,MAAME,OAAE,EAAOA,EAAEgF,MAAMC,eAAenF,EAAE,KAAK2B,EAAE,IAAIlB,IAAIY,EAAE,OAAOL,EAAE,MAAMd,OAAE,EAAOA,EAAEgF,MAAME,SAASpE,EAAE,KAAKqE,EAAE,IAAI5E,IAAI,IAAIY,EAAEI,MAAMJ,EAAEG,KAAKzB,EAAE,IAAIU,IAAIY,EAAE7B,IAAI,MAAM,CAAC,CAACsC,KAAK,iBAAiBoD,MAAM,CAACC,cAAc1C,MAAMC,KAAKpB,EAAEzC,EAAE0C,EAAExB,GAAGsF,IAAIvB,KAAK5D,IAAC,CAAIqD,SAASrD,MAAMkF,QAAQ3C,MAAMC,KAAKpB,EAAEzC,EAAE8C,EAAE0D,GAAGtF,IAAI+D,KAAK5D,IAAC,CAAIqD,SAASrD,WAAWA,YAAE,CAACF,YAAE,CAAC6C,UAAS,KAAMrD,EAAEwC,UAAU,WAAW,MAAMxC,EAAEU,YAAE,CAACc,YAAE,qDAAqDxB,GAAG,IAAIgC,EAAEhC,E,kBCA97C,IAAIA,EAAE,cAAcU,IAAED,YAAYe,GAAGb,MAAMa,GAAGZ,KAAKkF,iBAAiBlE,cAAIhB,KAAKmF,SAAQ,EAAGC,aAAapF,KAAKqF,YAAYzF,cAAII,KAAKsF,oBAAoBtF,KAAKuF,aAAavF,KAAKqF,YAAYG,SAASvB,UAAUjE,KAAKqF,YAAYI,QAAQzF,KAAK0F,aAAa1F,KAAK0F,YAAYC,QAAYC,iBAAahF,GAAGZ,KAAK6F,OAAOD,aAAahF,EAAMkF,aAAS,OAAO9F,KAAK0F,YAAYI,OAAoB,cAAClF,EAAEd,EAAEkB,EAAEpB,SAASI,KAAK+F,OAAO,MAAM1E,EAAErB,KAAKqF,YAAYG,OAAO/G,EAAvd,SAAWmC,GAAG,OAAOyB,MAAM2D,QAAQpF,GAAsbW,CAAEP,EAAEiB,QAAQ,CAACgE,aAAajF,EAAEiB,OAAOuD,OAAOnE,QAAG,EAAOJ,EAAE,CAACiF,QAAQlF,EAAEmF,OAAOrG,EAAEsG,SAASxF,EAAEwF,SAASC,SAASC,MAAM1G,SAASI,KAAK0F,YAAYa,OAAO,UAAUtF,EAAExC,GAAGuB,KAAKkF,iBAAiBsB,UAAUxG,KAAKc,KAAK,WAAU,GAAqB,kBAACF,GAAG,aAAaZ,KAAKkF,iBAAiBuB,QAAQpF,YAAErB,KAAK0F,YAAYa,OAAO,cAAc3F,IAAgB,aAACA,GAAG,MAAMd,EAAE,CAACqG,OAAOvF,GAAG,aAAaZ,KAAKkF,iBAAiBuB,QAAQzG,KAAK0F,YAAYa,OAAO,SAASzG,GAAoB,kBAACc,GAAG,aAAaZ,KAAKkF,iBAAiBuB,QAAQzG,KAAK0F,YAAYa,OAAO,cAAc3F,GAAqB,mBAACA,GAAG,aAAaZ,KAAKkF,iBAAiBuB,QAAQpF,YAAErB,KAAK0F,YAAYa,OAAO,0BAA0B3F,IAAiB,gBAAG,aAAaZ,KAAKkF,iBAAiBuB,QAAQpF,YAAErB,KAAK0F,YAAYa,OAAO,uBAAmD,6BAAC3F,EAAEd,EAAEkB,GAAG,aAAahB,KAAKkF,iBAAiBuB,QAAQzG,KAAK0F,YAAYa,OAAO,oCAAoC,CAACG,MAAM9F,EAAEyF,SAASM,OAAO7G,GAAGkB,GAAsB,oBAACJ,EAAEd,GAAG,aAAaE,KAAKkF,iBAAiBuB,QAAQzG,KAAK0F,YAAYa,OAAO,2BAA2B3F,EAAEyF,SAASvG,GAAuB,qBAACc,EAAEd,GAAG,aAAaE,KAAKkF,iBAAiBuB,QAAQzG,KAAK0F,YAAYa,OAAO,4BAA4B3F,EAAEyF,SAASvG,GAA0B,wBAACc,EAAEd,GAAG,aAAaE,KAAKkF,iBAAiBuB,QAAQzG,KAAK0F,YAAYa,OAAO,+BAA+B3F,EAAEyF,SAASvG,GAAoB,kBAACc,EAAEd,GAAG,OAAOE,KAAK0F,YAAYa,OAAO,yBAAyB3F,EAAEyF,SAASvG,GAAgC,8BAACc,EAAEd,GAAG,aAAaE,KAAKkF,iBAAiBuB,QAAQzG,KAAK0F,YAAYa,OAAO,qCAAqC3F,EAAEyF,SAASvG,GAAwB,sBAACc,GAAG,aAAaZ,KAAKkF,iBAAiBuB,QAAQzG,KAAK0F,YAAYa,OAAO,6BAA6B3F,GAAoB,kBAACA,GAAG,aAAaZ,KAAKkF,iBAAiBuB,QAAQzG,KAAK0F,YAAYa,OAAO,yBAAyB3F,GAAqB,mBAACA,GAAG,aAAaZ,KAAKkF,iBAAiBuB,QAAQzG,KAAK0F,YAAYa,OAAO,0BAA0B3F,GAAmB,iBAACA,GAAG,aAAaZ,KAAKkF,iBAAiBuB,QAAQzG,KAAK0F,YAAYa,OAAO,wBAAwB3F,GAAqB,mBAACA,GAAG,aAAaZ,KAAKkF,iBAAiBuB,QAAQzG,KAAK0F,YAAYa,OAAO,0BAA0B3F,GAAsB,sBAAG,aAAaZ,KAAKkF,iBAAiBuB,QAAQzG,KAAK0F,YAAYa,OAAO,4BAAyD,gCAAG,aAAavG,KAAKkF,iBAAiBuB,QAAQzG,KAAK0F,YAAYa,OAAO,sCAA8D,yBAAC3F,GAAG,aAAaZ,KAAKkF,iBAAiBuB,QAAQzG,KAAK0F,YAAYa,OAAO,gCAAgC3F,GAAgB,cAACA,GAAG,aAAaZ,KAAKkF,iBAAiBuB,QAAQpF,YAAErB,KAAK0F,YAAYa,OAAO,qBAAqB3F,IAAqB,kBAACA,EAAEd,GAAG,aAAaE,KAAKkF,iBAAiBuB,QAAQpF,YAAErB,KAAK0F,YAAYa,OAAO,yBAAyB,CAACK,KAAKhG,EAAEiG,MAAM/G,KAAuB,mBAACc,GAAG,IAAIZ,KAAK0F,kBAAkBzE,YAAE,WAAW,CAAC4E,OAAO7F,KAAK6F,OAAOiB,SAAS,YAAYtB,OAAO5E,IAAI,MAAMd,GAAGrB,YAAEqB,MAAMc,YAAE,CAACM,eAAK9B,EAAEwC,UAAU,eAAU,GAAQhB,YAAE,CAACM,eAAK9B,EAAEwC,UAAU,cAAS,GAAQhB,YAAE,CAACM,eAAK9B,EAAEwC,UAAU,eAAe,MAAMxC,EAAEwB,YAAE,CAACQ,YAAE,mDAAmDhC,GAAG,IAAI+B,EAAE/B,E,2BCA/+H,MAAMQ,EAAEC,YAAYC,GAAGE,KAAK+G,OAAO,IAAIC,IAAIhH,KAAKiH,OAAO,EAAEjH,KAAKkH,YAAYpH,EAAEoH,YAAYlH,KAAKmH,YAAYrH,EAAEqH,YAAYnH,KAAKoH,aAAatH,EAAEsH,aAAapH,KAAKiH,OAAOnH,EAAEmH,OAAOhD,WAAWC,QAAQlE,KAAK+G,OAAOvF,SAAS1B,GAAGE,KAAKqH,aAAavH,KAAKwH,WAAW,MAAMxH,EAAE,GAAG,OAAOE,KAAK+G,OAAOvF,SAAS,CAAC/C,EAAEmC,IAAId,EAAEuE,KAAKzD,KAAKd,EAAEyH,OAAOzH,GAAG,MAAMyB,EAAEvB,KAAKoH,aAAaI,gBAAgB1H,EAAE2H,MAAMzH,KAAKiH,OAAO,YAAYS,MAAM9H,EAAE+H,QAAQ3G,GAAGO,GAAGqG,MAAM1G,GAAGF,EAAEK,EAAE,GAAG9C,EAAE,GAAGoB,EAAE,IAAIU,IAAIY,EAAE,IAAIZ,IAAI,IAAI,MAAMwH,IAAIpJ,EAAEqJ,QAAQ1G,EAAE2G,MAAM9C,KAAKrF,EAAE,IAAI,IAAIE,EAAEsB,EAAEtB,GAAGmF,EAAEnF,IAAI,CAAC,MAAMyB,EAAEX,IAAEoH,MAAM9G,EAAEzC,EAAEuC,EAAEiH,aAAanI,GAAGkB,EAAEkH,kBAAkBpI,IAAIF,EAAEI,KAAKmI,kBAAkB9G,EAAEE,GAAG5B,EAAE8B,IAAIF,GAAG3B,EAAEuF,QAAQvF,EAAEwI,SAAQ,EAAGnH,EAAEQ,IAAI7B,EAAEyI,KAAuJ,OAAlJpH,EAAEO,SAAS1B,GAAGE,KAAKsI,iBAAiB3I,EAAEG,KAAKE,KAAK+G,OAAOvF,SAAS1B,IAAIH,EAAE4I,IAAIzI,EAAEuI,IAAIG,MAAMjK,EAAE8F,KAAKvE,EAAEuI,IAAIG,IAAIxI,KAAKqH,aAAavH,OAAOrB,IAAEgK,KAAKC,QAAQnH,GAAS,CAACoH,gBAAgB1H,EAAE2H,KAAK,EAAEC,MAAMxH,EAAE2D,QAAQzG,GAAG4J,kBAAkBrI,EAAErB,GAAG,IAAIuB,KAAK+G,OAAOwB,IAAI9J,GAAG,CAAC,MAAM8C,EAAEvB,KAAKkH,YAAY,IAAItG,IAAEnC,IAAIqB,EAAEuE,KAAK5F,GAAGuB,KAAK+G,OAAO+B,IAAIrK,EAAE8C,GAAGA,EAAE6G,SAAQ,EAAG,OAAOpI,KAAK+G,OAAOgC,IAAItK,GAAGuK,SAASlJ,GAAG,OAAOE,KAAK+G,OAAOgC,IAAIjJ,GAAGuH,aAAavH,GAAGE,KAAK+G,OAAOnD,OAAO9D,EAAEuI,IAAIG,IAAIxI,KAAKmH,YAAYrH,GAAGwI,iBAAiBxI,EAAErB,GAAG,MAAMmC,EAAEZ,KAAKiJ,wBAAwBnJ,EAAErB,GAAQyK,KAAKC,IAAI,EAAEvI,GAAxqC,MAAmrCZ,KAAKoJ,sBAAsBtJ,EAAErB,KAAIuB,KAAKgJ,SAASvK,EAAE+J,IAAIJ,SAAQ,GAAKa,wBAAwBnJ,EAAErB,GAAG,IAAImC,EAAE,EAAE,OAAOZ,KAAK+G,OAAOvF,SAASD,IAAIX,GAAGZ,KAAKqJ,qBAAqBvJ,EAAEyB,EAAE9C,MAAMmC,EAAEyI,qBAAqBvJ,EAAErB,EAAEmC,GAAG,OAAGnC,EAAE4J,IAAIT,OAAOhH,EAAEgH,QAAQnJ,EAAE6K,UAAU1I,EAAE2I,SAAS9K,EAAE4J,KAAY,GAAE5J,EAAE2J,SAAQ,EAAGtI,EAAE2B,IAAIhD,EAAE4J,IAAIG,IAAW,GAAG,GAAG,GAAG/J,EAAE4J,IAAIT,MAAMhH,EAAEgH,SAAQwB,sBAAsB3K,EAAEmC,GAAG,IAAIW,EAAEX,EAAE4I,eAAe5J,EAAE,EAAEoB,EAAE,KAAK,KAAKlB,YAAEyB,IAAI,CAAC,GAAG9C,EAAE8J,IAAIhH,EAAEiH,IAAI,OAAM,EAAG,MAAM1I,EAAEE,KAAKgJ,SAASzH,EAAEiH,IAAI,GAAG,MAAM1I,GAAGA,EAAEqF,QAAQ,OAAOrF,EAAEsI,SAAQ,EAAG3J,EAAEgD,IAAI3B,EAAEuI,IAAIG,KAAI,EAAG,MAAM1I,GAAGA,EAAEwJ,SAASxJ,EAAE2J,WAAW7J,IAAIA,EAAEE,EAAE2J,WAAWzI,EAAElB,GAAGyB,EAAEA,EAAEiI,eAAe,QAAQxI,IAAIA,EAAEoH,SAAQ,EAAG3J,EAAEgD,IAAIT,EAAEqH,IAAIG,KAAI,I,ICApgD/J,E,6CAAE,IAAI2C,EAAE3C,EAAE,cAAcmC,IAAEf,cAAcE,SAAS4C,WAAW3C,KAAKwD,OAAO,KAAKxD,KAAK0J,eAAe,KAAK1J,KAAK2J,eAAe,KAAK3J,KAAK4J,uBAAsB,EAAGtI,QAAQ,OAAO,IAAI7C,EAAE,CAAC+E,OAAOxD,KAAKwD,QAAQxD,KAAKwD,OAAOlC,QAAQoI,eAAe1J,KAAK0J,eAAeC,eAAe3J,KAAK2J,eAAeC,sBAAsB5J,KAAK4J,0BAA0B9J,YAAE,CAACkB,YAAE,CAACU,KAAK9B,IAAEkC,KAAK,CAACE,OAAM,MAAOZ,EAAEQ,UAAU,cAAS,GAAQ9B,YAAE,CAACkB,YAAE,CAACc,KAAK,CAACE,OAAM,MAAOZ,EAAEQ,UAAU,sBAAiB,GAAQ9B,YAAE,CAACkB,YAAE,CAACc,KAAK,CAACE,OAAM,MAAOZ,EAAEQ,UAAU,sBAAiB,GAAQ9B,YAAE,CAACkB,YAAE,CAACU,KAAK2B,QAAQvB,KAAK,CAACE,OAAM,MAAOZ,EAAEQ,UAAU,6BAAwB,GAAQR,EAAE3C,EAAEqB,YAAE,CAACuB,YAAE,4CAA4CD,GAAG,IAAIG,EAAEH,E,kBCAqJ,MAAMyI,GAAE7I,IAAE8I,UAAU,sCAAsCC,GAAE/I,IAAI,IAAI+I,EAAE,cAAc/I,EAAEnB,eAAeC,GAAGC,SAASD,GAAGE,KAAKgK,+BAA+B,KAAKhK,KAAKiK,OAAO,KAAKjK,KAAKwD,OAAO,KAAKxD,KAAKS,WAAW,KAAKT,KAAKkK,MAAM,KAAKlK,KAAKmK,eAAe,GAAGnK,KAAKoK,KAAK,KAAKhF,aAAanE,YAAEjB,KAAK,CAAC,iBAAiB,qBAAqB,4CAA4C,qBAAqB,SAAS,SAAS,iBAAiB,kBAAkB,eAAe,IAAIA,KAAKqK,gCAA+B,GAAI9I,YAAEvB,KAAK,cAAc,UAAU,IAAIA,KAAKqK,gCAAgC9I,YAAEvB,KAAK,iBAAiB,UAAU,IAAIA,KAAKqK,gCAAoCC,sBAAkB,MAAMJ,MAAMpK,EAAEoK,OAAOK,YAAY3J,GAAGuJ,eAAenJ,GAAGhB,KAAK,MAAM,cAAcF,GAAGA,EAAE0K,UAAUjM,YAAEqC,EAAE,IAAIpC,YAAEoC,EAAEd,EAAE0K,cAAcxJ,IAAIzC,YAAEqC,EAAEI,GAAOyJ,8BAA0B,OAAO,EAAMA,4BAAwB3K,GAAG+J,GAAEpG,MAAM,4BAA4B,uDAA2DiH,sCAAkC,OAAM,EAAGC,UAAU7K,GAAG,MAAM,IAAI8K,MAAM,0BAA0B7J,cAAc,MAAMjB,EAAE,CAAC0K,UAAU,CAAC,KAAKK,gBAAe,EAAGC,oBAAoB9K,KAAKoK,KAAKW,kBAAkBnK,EAAEnC,YAAEuB,KAAKwD,QAAQxD,KAAKwD,OAAOzC,YAAYjB,GAAG,IAAIkL,IAAElL,GAAG,GAAG,YAAYE,KAAKkK,MAAMxI,KAAK,CAAC,MAAM5B,EAAEmL,YAAEjL,MAAMvB,YAAEqB,KAAKc,EAAEX,MAAMW,EAAEX,MAAO,IAAGW,EAAEX,eAAeH,KAAKA,GAAG,OAAOrB,YAAEuB,KAAKS,cAAcG,EAAEH,WAAWhC,YAAEmC,EAAEH,YAAYG,EAAEH,WAAWyK,aAAalL,KAAKS,YAAYT,KAAKS,WAAWa,SAASV,EAAEuK,cAAcrL,EAAEc,GAAG,MAAM,IAAIgK,MAAM,0BAA0BQ,eAAetL,EAAEc,GAAG,MAAM,IAAIgK,MAAM,0BAA0BS,kBAAkBvL,EAAEc,GAAG,MAAM,IAAIgK,MAAM,0BAA0BU,YAAYxL,EAAEc,GAAG,MAAM,IAAIgK,MAAM,0BAA0BW,mBAAmBzL,GAAG,GAAGA,EAAEiJ,IAAI,0BAA0B,OAAOyC,cAAInB,8BAA8B,MAAMvK,EAAEE,KAAKyL,wBAAwBzL,KAAKc,KAAK,iCAAiChB,GAAGA,EAAE4L,MAAM,KAAK1L,KAAKgK,iCAAiClK,GAAGE,KAAKc,KAAK,iCAAiC,SAAoC,8BAAG,IAAId,KAAKkK,QAAQlK,KAAKoK,KAAK,OAAO,MAAMtK,EAAE,OAAOE,KAAKoK,KAAK1I,MAAMwI,MAAMtJ,EAAEsJ,OAAOK,YAAYvJ,EAAE2K,cAAc/L,IAAII,KAAKiB,EAAE,aAAaL,GAAGA,EAAEgL,SAASrK,EAAE,YAAYX,GAAGA,EAAEiL,QAAQ3K,EAAEN,EAAEoC,iBAAiB5D,EAAE,IAAIiB,IAAIc,QAAQE,YAAE,CAACJ,EAAEA,EAAE6K,sBAAsB1M,EAAE4B,GAAG,KAAKI,YAAEhC,EAAEwB,GAAGd,EAAEmF,YAAE7F,EAAEwB,GAAG,KAAKnC,YAAEuB,KAAKwD,QAAQd,YAAEtD,EAAEwB,EAAEZ,KAAKwD,QAAQ,KAAKxD,KAAKiK,OAAOvH,YAAEtD,EAAEwB,EAAEZ,KAAKiK,OAAOzG,QAAQ,KAAKtC,EAAEvB,YAAEP,EAAEwB,EAAEM,GAAG,KAAKK,EAAEwK,YAAE3M,EAAEwB,EAAEW,GAAG,OAAO,GAAGX,EAAEoL,UAAUhM,KAAKS,YAAYwL,YAAE7M,EAAEwB,EAAE2J,YAAY,CAAC3J,EAAEoL,SAASE,WAAWtL,EAAEoL,SAASG,WAAW,YAAYvL,EAAEc,MAAMd,EAAEwL,WAAWH,YAAE7M,EAAEwB,EAAE2J,YAAY,CAAC3J,EAAEwL,UAAUC,aAAa,kBAAkBzL,EAAEc,KAAK,CAAC4K,YAAElN,EAAE4B,EAAEJ,EAAE2L,cAAc,MAAMzM,EAAEc,EAAE4L,UAAU9I,KAAK5D,IAAI,IAAIc,EAAE,OAAO6L,QAAQC,IAAI,CAAC,OAAO9L,EAAEd,EAAE8L,eAAU,EAAOhL,EAAEkL,sBAAsB1M,EAAE4B,GAAGI,YAAEhC,EAAEU,cAAcuB,YAAEvB,GAAG,IAAI,MAAMrB,KAAK0C,EAAE1C,EAAEgF,OAAOoG,GAAEpG,MAAMhF,EAAEgF,OAAO6I,YAAElN,EAAE4B,EAAEpB,GAAGE,GAAG,iBAAiBc,GAAGA,EAAE+L,cAAcL,YAAElN,EAAE4B,EAAEJ,EAAE+L,cAAc,MAAMpO,EAAE8D,MAAMC,KAAKlD,GAAGwN,OAAO5M,KAAKc,KAAK,iBAAiBvC,GAAGsO,2BAA2B/M,GAAG,GAAGF,YAAEE,GAAG,OAAO,KAAK,IAAI,MAAMkB,KAAKlB,EAAEgN,eAAe,CAAC,MAAMrO,EAAEuC,EAAEkJ,MAAM,GAAG,iBAAiBzL,IAAIA,EAAEwE,aAAa,OAAO,IAAIrC,IAAE,sCAAsC,sBAAsB,CAACsJ,MAAMzL,IAAI,GAAG,kBAAkBA,IAAOsO,YAAEtO,EAAEqB,GAAG,OAAO,IAAIc,IAAE,sCAAsC,yCAAyC,CAACsJ,MAAMzL,KAAoC,+BAACqB,GAAG,MAAMc,EAAEnC,YAAEqB,GAAGA,EAAEgN,eAAe,KAAK,IAAIlM,GAAG,IAAIA,EAAEwD,OAAO,OAAOqI,QAAQjG,QAAQ,IAAI,MAAMxF,EAAE,GAAGpB,EAAE,GAAGyB,QAAQrB,KAAKgN,iBAAiBlN,GAAG,IAAI,MAAMmB,KAAKL,EAAE,CAAC,MAAMsJ,MAAMtJ,GAAGK,EAAE,KAAK,iBAAiBL,GAAG,SAAS,MAAMW,EAAE/C,YAAEwB,KAAKkK,MAAMK,YAAYlJ,EAAEmJ,WAAWtJ,EAAE6L,YAAEnM,EAAEd,GAAG,IAAIrB,YAAEyC,GAAG,SAAS,MAAM9B,QAAQY,KAAKuL,mBAAmBrK,GAAG9B,GAAGA,EAAE6N,YAAYC,sBAAsBhM,KAAKiM,YAAE5L,EAAEN,GAAGrB,EAAEyE,KAAKpD,GAAGD,EAAEqD,KAAKpD,GAAG,MAAM,WAAWjB,KAAKkK,MAAMxI,MAAM,IAAI9B,EAAEwE,OAAOqI,QAAQjG,QAAQxF,IAAIK,EAAEd,UAAUX,EAAE8D,KAAK5D,GAAGA,EAAEsN,WAAWpN,KAAKkK,MAAMyB,iBAAiB3L,KAAKkK,MAAMiB,cAAc9J,GAAGqK,MAAM5L,GAAGkB,EAAEqM,OAAOvN,EAAEwN,YAAYC,OAAO,IAAI3N,KAA2B,uBAACE,GAAG,MAAMc,EAAEZ,KAAKkK,MAAMnJ,cAAcC,EAAE,IAAIX,IAAI,IAAIT,GAAE,EAAG,MAAMyB,EAAE5C,YAAEqB,IAAIA,EAAEgN,eAAehN,EAAEgN,eAAepJ,KAAK5D,GAAGA,EAAEoK,QAAQ,CAAClK,KAAKkK,OAAO,IAAI,MAAMjJ,KAAKI,EAAE,CAAC,KAAK,iBAAiBJ,GAAG,SAAS,MAAML,EAAEmM,YAAE9L,EAAEnB,GAAG,IAAIrB,YAAEmC,GAAG,SAAS,MAAMS,QAAQrB,KAAKuL,mBAAmB3K,GAAGW,EAAEF,GAAGA,EAAE4L,YAAYC,sBAAsBtM,GAAGhB,IAAI,UAAUI,KAAKkK,MAAMsD,eAAejM,GAAG,MAAML,QAAQuM,YAAEzN,KAAKkK,MAAMtJ,GAAG,IAAI,MAAMd,KAAKoB,EAAEF,EAAES,IAAI3B,GAAG,GAAGc,EAAEiK,eAAejL,EAAEgB,EAAE8M,QAAQ9N,EAAEgB,EAAE+M,QAAQ/N,EAAEgB,EAAE4J,UAAUnI,MAAMC,KAAKtB,GAAGJ,EAAEkK,oBAAoB9K,KAAKoK,KAAKW,iBAAiB,YAAY/K,KAAKkK,MAAMxI,KAAK,CAAC,MAAM5B,EAAEmL,YAAEjL,MAAMvB,YAAEqB,KAAKc,EAAEX,MAAMW,EAAEX,MAAO,IAAGW,EAAEX,eAAeH,KAAKA,GAAG,OAAOc,EAAEgN,YAAY,QAAQ7N,MAAM6N,eAAenP,YAAEuB,KAAKS,cAAcT,KAAKS,WAAWoN,WAAW,OAAO/N,YAAE,CAACoB,eAAK6I,EAAEnI,UAAU,sCAAiC,GAAQ9B,YAAE,CAACoB,YAAE,CAACuB,UAAS,KAAMsH,EAAEnI,UAAU,kBAAkB,MAAM9B,YAAE,CAACoB,YAAE,CAACQ,KAAKoM,KAAK/D,EAAEnI,UAAU,cAAS,GAAQ9B,YAAE,CAACoB,YAAE,CAACQ,KAAKqM,OAAKhE,EAAEnI,UAAU,cAAS,GAAQ9B,YAAE,CAACoB,YAAEC,MAAI4I,EAAEnI,UAAU,kBAAa,GAAQ9B,YAAE,CAACoB,eAAK6I,EAAEnI,UAAU,aAAQ,GAAQ9B,YAAE,CAACoB,YAAE,CAACQ,KAAKa,UAAUwH,EAAEnI,UAAU,0BAA0B,MAAM9B,YAAE,CAACoB,YAAE,CAACuB,UAAS,EAAGf,KAAK2B,WAAW0G,EAAEnI,UAAU,kCAAkC,MAAM9B,YAAE,CAACoB,YAAE,CAACuB,UAAS,KAAMsH,EAAEnI,UAAU,sBAAiB,GAAQ9B,YAAE,CAACoB,eAAK6I,EAAEnI,UAAU,iBAAY,GAAQ9B,YAAE,CAACoB,eAAK6I,EAAEnI,UAAU,YAAO,GAAQmI,EAAEjK,YAAE,CAACV,YAAE,uCAAuC2K,GAAGA,G,qDCAnpI,SAASiE,GAAElO,GAAG,OAAOA,GAAG,cAAcA,EAAE,MAAMmO,GAAE5M,IAAEyI,UAAU,2CAA2C,IAAIoE,GAAE,cAAcC,GAAEC,aAAEC,YAAEC,SAAMzO,cAAcE,SAAS4C,WAAW3C,KAAKuO,qBAAoB,EAAGvO,KAAKwO,eAAe,IAAIzB,EAAE,CAAC/I,QAAQlE,IAAI,OAAOA,EAAE4B,MAAM,IAAI,iBAAiB,OAAO1B,KAAKyO,QAAQ3O,GAAG,IAAI,UAAU,OAAOE,KAAK0O,aAAa,IAAI,SAAS,OAAO1O,KAAK2O,gBAAgB3O,KAAK4O,qBAAqB,IAAIvO,IAAIL,KAAK6O,QAAQ,KAAK7O,KAAK8O,cAAc,IAAI9H,IAAIhH,KAAK+O,iBAAiB,EAAE/O,KAAKgP,iBAAiB5N,aAAG6N,SAASjP,KAAKkP,OAAOC,aAAa9M,MAAMC,KAAKtC,KAAK8O,cAAcM,WAAWpP,KAAKqP,gBAAe,EAAGrP,KAAKsP,yBAAwB,EAAGtP,KAAKwD,OAAO,KAAKxD,KAAKuP,YAAY,CAACC,SAAS,IAAIvE,IAAEwE,SAAS,IAAIxE,KAAGhH,UAAU,IAAInE,EAAEc,EAAEjB,YAAEK,KAAK0P,wBAAwB5P,GAAGA,EAAE6P,WAAW,OAAO7P,EAAEE,KAAKkP,SAASpP,EAAEmE,UAAU,OAAOrD,EAAEZ,KAAK4F,eAAehF,EAAEqD,UAAUjE,KAAKwO,eAAevK,UAAUmB,aAAapF,KAAKsF,oBAAoBmH,QAAQC,IAAI,CAAC1M,KAAK4P,aAAa5P,KAAK6P,yBAAyB7P,KAAK8P,QAAQrO,IAAI,CAACzB,KAAK+P,GAAG,sBAAsBjQ,IAAIE,KAAKc,KAAK,wBAAwBhB,EAAEkQ,gBAAgBxR,YAAEwB,KAAK,UAAUF,IAAIE,KAAKuP,YAAYC,SAASvF,OAAO,MAAMnK,OAAE,EAAOA,EAAE4J,kBAAkBlL,YAAEwB,KAAK,UAAUF,IAAIE,KAAKuP,YAAYE,SAASxF,OAAO,MAAMnK,OAAE,EAAOA,EAAE6J,oBAAoC,mBAAG,GAAG,YAAY3J,KAAKkK,OAAOlK,KAAKkK,MAAM+F,QAAQ,MAAM,IAAI/O,IAAE,uCAAuC,yCAAyC,CAACgJ,MAAMlK,KAAKkK,QAAQlK,KAAKkP,QAAQlP,KAAKkP,OAAOjL,UAAU,MAAMnE,EAAEE,KAAKkQ,uBAAuB,OAAOlQ,KAAKc,KAAK,SAAS,IAAIqP,EAAE,CAACtK,OAAO/F,KAAKE,KAAKkP,OAAOnJ,OAAgC,4BAAG/F,KAAKc,KAAK,wBAAwBd,KAAKoQ,yBAA6BC,oBAAgB,MAAM,WAAWrQ,KAAKsQ,gBAAgB5O,MAAM1B,KAAKsQ,gBAAgBD,cAAkBE,oBAAgB,MAAMzQ,EAAE,kBAAkBE,KAAKkK,MAAMxI,KAAK1B,KAAKkK,MAAMsC,UAAUgE,MAAM,CAACxQ,KAAKkK,OAAO,OAAOlK,KAAKyQ,WAAW3Q,EAAEwD,MAAMxD,GAAGA,EAAE4Q,cAAc5Q,EAAEyQ,gBAAoBtG,aAAS,OAAO7K,YAAEY,KAAK6O,QAAQ,MAAU5E,WAAOnK,GAAG,MAAMc,EAAEZ,KAAK6O,QAAQtQ,YAAEqC,IAAIrC,YAAEqC,EAAE4C,SAAS5C,EAAE4C,OAAO9C,SAASnC,YAAEuB,IAAIvB,YAAEuB,EAAE0D,SAAS1D,EAAE0D,OAAO3C,SAASb,KAAK6O,QAAQ/O,EAAEE,KAAKwE,aAAa,UAAcmM,cAAU,OAAO3Q,KAAKiK,QAAQ,CAACjK,KAAKiK,SAAS,GAAO2G,gBAAY,OAAO5Q,KAAKsQ,gBAAgB5O,KAASmP,0BAAsB,IAAI7Q,KAAKkK,MAAM,OAAO,KAAK,MAAMpK,EAAEE,KAAKsK,gBAAgB1J,EAAEZ,KAAKkK,MAAMzL,EAAEuB,KAAKoK,KAAK0G,QAAQC,qBAAqB/P,GAAGJ,EAAEhB,EAAE,kBAAkBI,KAAKkK,MAAMxI,MAAM1B,KAAKkK,MAAMqG,eAAevQ,KAAKkK,MAAMwG,aAAaxP,EAAE,aAAaN,GAAGA,EAAEgL,SAAS3K,EAAE,YAAYL,EAAEc,KAAKd,EAAEoQ,gBAAW,EAAOzP,EAAE,YAAYX,EAAEc,MAAMd,EAAEqQ,eAAerQ,EAAEqQ,eAAeC,eAAU,GAAQzQ,WAAWY,GAAGrB,KAAKL,EAAE,qBAAqBiB,EAAEuQ,KAAKC,UAAUxQ,EAAEyQ,uBAAkB,EAAOjS,EAAE,WAAWwB,EAAEA,EAAE0Q,YAAO,EAAOnQ,EAAE,WAAWP,EAAEc,KAAM,GAAEyP,KAAKC,UAAUxQ,EAAE2Q,sBAAsB3Q,EAAEmQ,uBAAuB,KAAK3P,EAAE+P,KAAKC,UAAUpR,KAAKwR,OAAO9O,EAAE9B,EAAEoC,kBAAkBpC,EAAEoC,iBAAiBqD,SAASpB,EAAE,YAAYjF,KAAKkK,OAAOiH,KAAKC,UAAUpR,KAAKkK,MAAM2B,SAASS,EAAE,cAActM,KAAKkK,OAAOlK,KAAKkK,MAAMsC,UAAUgE,MAAMiB,QAAQ,CAAC3R,EAAEc,IAAId,EAAG,GAAEc,EAAEwH,QAAQ,EAAE,KAAK+I,KAAKC,UAAUxQ,EAAEgL,aAAahL,EAAE2P,mBAAmBY,KAAKC,UAAUxQ,EAAE8P,iBAAiB,IAAI,OAAOS,KAAKC,UAAU,CAACvF,QAAQ5G,EAAEyM,aAAapF,EAAEqF,WAAWpT,YAAEyB,KAAKwD,SAASxD,KAAKwD,OAAO6C,SAASuL,WAAWrT,YAAEyB,KAAKiK,SAASjK,KAAKiK,OAAO5D,SAASwL,aAAa1Q,EAAE6P,WAAW/P,EAAE8P,qBAAqB/P,EAAEiQ,eAAe1P,EAAE+I,gBAAgBxK,EAAE8L,SAAS1K,EAAEwP,aAAa9Q,EAAEa,WAAWY,EAAEyP,OAAOrS,EAAEqT,UAAU1Q,EAAE4B,iBAAiBN,EAAE2O,iBAAiB1R,EAAE2R,OAAOlS,IAAQ2S,iBAAa,OAAO/R,KAAKuP,YAAYC,SAASuC,YAAY/R,KAAKuP,YAAYE,SAASsC,WAAWpH,UAAU7K,GAAG,IAAIc,EAAE,OAAOd,aAAarB,IAAEmC,EAAE,CAACd,EAAEoD,eAAe,iBAAiBpD,GAAG,iBAAiBA,EAAEc,EAAE,CAACd,GAAGF,IAAEoS,aAAalS,GAAGc,EAAEd,EAAE4D,KAAK5D,GAAGA,GAAGA,EAAEmS,aAAajS,KAAKkK,MAAMyB,iBAAiBuG,UAAU7P,MAAM2D,QAAQlG,IAAIA,EAAEsE,OAAO,IAAIxD,EAAE,iBAAiBd,EAAE,IAAI,iBAAiBA,EAAE,GAAGA,EAAEA,EAAE4D,KAAK5D,GAAGA,GAAGA,EAAEmS,aAAajS,KAAKkK,MAAMyB,kBAAkB/K,GAAGA,EAAEwD,QAAQxD,EAAEA,EAAE4C,QAAQ1D,GAAG,MAAMA,IAAIE,KAAKmS,cAAcvR,GAAG,CAAC+O,OAAO,IAAI3P,KAAKoS,iBAAiBxR,KAAK,CAAC+O,OAAO,QAAQ0C,eAAe,QAAQrS,KAAK8O,cAAclG,KAAK0J,QAAQxS,EAAEc,GAAG,OAAOZ,KAAKuS,SAASzS,EAAEc,GAAwB,wBAAG,aAAaZ,KAAKkP,OAAOsD,iBAAiB9O,KAAK5D,GAAGc,EAAE6R,SAAS3S,KAAK4S,kBAAkB,OAAO1S,KAAKkP,OAAOwD,kBAA8C,6BAAC5S,EAAEc,EAAEnC,GAAG,MAAMuC,EAAE,IAAIJ,GAAG,IAAIhB,EAA0J,OAAxJgB,EAAE+R,kBAAkB3R,EAAE4R,eAAe,CAACC,YAAY,MAAMC,MAAM9S,KAAKoK,KAAK0I,MAAM/H,iBAAiB,OAAOnL,EAAEI,KAAKoK,KAAKW,uBAAkB,EAAOnL,EAAEyG,WAAkBrG,KAAKkP,OAAO6D,uBAAuB/S,KAAKgT,cAAclT,GAAGkB,EAAEvC,GAAG0M,cAAcrL,EAAEc,GAAG,OAAOZ,KAAKiT,kBAAkBnT,EAAEc,GAAG8K,MAAM5L,IAAI,MAAMc,EAAEqL,UAAEwG,SAAS3S,GAAG,OAAOc,EAAE0M,SAAS9L,SAAS1B,GAAGE,KAAKkT,qBAAqBpT,KAAKc,KAAKqS,kBAAkBnT,EAAEc,GAAG,OAAOZ,KAAKkP,OAAO/D,cAAcnL,KAAKgT,cAAclT,GAAGc,GAAGwK,eAAetL,EAAEc,GAAG,OAAOZ,KAAKkP,OAAO9D,eAAepL,KAAKgT,cAAclT,GAAGc,GAAGyK,kBAAkBvL,EAAEc,GAAG,OAAOZ,KAAKkP,OAAO7D,kBAAkBrL,KAAKgT,cAAclT,GAAGc,GAAG0K,YAAYxL,EAAEc,GAAG,OAAOZ,KAAKkP,OAAO5D,YAAYtL,KAAKgT,cAAclT,GAAGc,GAAG8K,MAAM5L,IAAC,CAAIqT,MAAMrT,EAAEqT,MAAMC,OAAOC,KAAEZ,SAAS3S,EAAEsT,YAAYE,cAAcxT,EAAEc,GAAGA,EAAEZ,KAAK4O,qBAAqBhL,OAAO9D,GAAGE,KAAK4O,qBAAqBnN,IAAI3B,GAAGE,KAAKuT,UAAUhM,OAAOzH,GAAG,IAAIE,KAAKwT,gBAAgBxT,KAAK4F,aAAa,OAAO,MAAM+C,gBAAgB/H,EAAEiI,MAAMpK,EAAEuG,QAAQhE,GAAGhB,KAAKwT,cAAcjM,OAAOzH,IAAIrB,EAAE2F,QAAQpD,EAAEoD,SAASpE,KAAKkP,OAAOuE,YAAY,CAAC5K,MAAMpK,EAAEuG,QAAQhE,IAAIJ,GAAGZ,KAAK0T,gBAAgB1T,KAAKwE,aAAa,YAAYmP,SAAS3T,KAAKoK,KAAKwJ,SAASC,OAAQ,GAAE7T,KAAKkK,MAAM4J,+BAA+B9T,KAAKwT,cAAc,IAAIO,EAAE,CAAC7M,YAAYpH,GAAGE,KAAKgU,aAAalU,GAAGqH,YAAYrH,GAAGE,KAAKqH,aAAavH,GAAGsH,aAAapH,KAAKoK,KAAK6J,qBAAqBhN,OAAO,IAAIjH,KAAK8P,QAAQrO,IAAIjD,YAAEwB,KAAK,uBAAuB,IAAIA,KAAKuT,YAAY,UAAU,WAAWvT,KAAKkK,MAAMxI,MAAM1B,KAAK8P,QAAQrO,IAAIzB,KAAKkK,MAAM6F,GAAG,SAASjQ,GAAGE,KAAKkU,MAAMpU,KAAK,UAAUqU,SAASnU,KAAKoU,UAAUC,oBAAoBrU,KAAK8P,QAAQH,OAAO,UAAU3P,KAAK4F,eAAe5F,KAAK4F,aAAa0O,UAAUtU,KAAKoU,WAAWpU,KAAK4F,aAAa,MAAM5F,KAAKwT,gBAAgBxT,KAAKwT,cAAcvP,UAAUjE,KAAKwT,cAAc,MAAMxT,KAAKuU,kBAAkB,KAAKC,YAAYxU,KAAK0T,gBAAgBe,aAAazU,KAAK0T,gBAAgBgB,UAAU1U,KAAK0T,gBAAwC,yBAAC5T,EAAErB,GAAG,GAAGF,YAAEE,IAAIA,EAAEqO,eAAe1I,OAAO,CAAC,MAAMtE,EAAErB,EAAEqO,eAAe,GAAG,GAAGhN,aAAac,EAAE,MAAM,CAACd,GAAGrB,EAAEqO,eAAerO,EAAEqO,eAAetJ,QAAQ1D,IAAI,MAAMoK,MAAMtJ,GAAGd,EAAErB,EAAE,iBAAiBmC,GAAGA,EAAEqC,aAAajC,EAAE,kBAAkBJ,GAAGA,EAAEkC,cAAclD,EAAEI,KAAKoK,KAAKuK,MAAMC,4BAA4B,OAAOnW,IAAIuC,GAAGpB,MAAM,MAAMA,EAAEI,KAAK6M,2BAA2BpO,GAAG,GAAGmB,EAAE,MAAMA,EAAE,GAAGrB,YAAEE,IAAI,IAAIA,EAAEqO,eAAe1I,OAAO,MAAM,GAAG,MAAMlD,EAAElB,KAAK6U,yBAAyBpW,GAAG,IAAIqB,EAAE,OAAOoB,EAAE,MAAMD,EAAEjB,KAAK8U,2BAA2BhV,EAAErB,GAAG,OAAOiE,YAAE,CAACxB,EAAED,IAAIyK,KAAK1K,KAAmC,iCAAClB,EAAEc,GAAG,GAAG,WAAWZ,KAAKkK,MAAMxI,MAAM,gBAAgB1B,KAAKkK,MAAMxI,KAAK,MAAM,GAAG,MAAMjD,QAAQuB,KAAKgN,iBAAiBpM,IAAIsJ,MAAMlJ,GAAGhB,KAAKJ,EAAE,aAAaoB,GAAGA,EAAE4K,SAAS1K,EAAE3C,YAAEqC,GAAGA,EAAEmU,MAAM,KAAK9T,EAAEkM,YAAE,CAACvB,SAAShM,EAAEmV,MAAM7T,IAAIzC,EAAEyB,SAASF,KAAKgV,sCAAsClV,EAAEmB,GAAG,MAAMM,EAAE,IAAIlB,KAAKsL,cAActK,GAAGL,EAAErB,EAAEpB,YAAEqC,GAAGA,EAAEkM,eAAe,KAAK,GAAGnN,EAAE,IAAI,MAAMP,KAAKO,EAAE4B,EAAEE,IAAIrC,EAAEgO,WAAW/L,IAAI,OAAOL,EAAEmK,cAAc1M,GAAGiN,MAAM5L,GAAGA,EAAEwN,SAAS9J,QAAQ1D,IAAIyB,EAAEgH,IAAIzI,EAAEsN,WAAW/L,QAAQ2T,sCAAsClV,EAAEc,GAAG,OAAOqU,aAAEnV,EAAEc,EAAEZ,KAAKoK,MAAM8K,aAAa,IAAIpV,EAAE,MAAMc,EAAE,aAAaZ,KAAKkK,OAAO,MAAMlK,KAAKkK,MAAM0B,SAASnN,EAAEuB,KAAKwO,eAAerK,SAASnD,EAAE,MAAMhB,KAAKgK,+BAA+BpK,GAAGI,KAAKkP,SAASlP,KAAKkP,OAAO/J,QAAQjE,EAAElB,KAAKuO,oBAAoBhN,EAAE,OAAOvB,KAAK4F,eAAe,OAAO9F,EAAEE,KAAK4F,mBAAc,EAAO9F,EAAEqE,UAAU9C,EAAET,IAAInC,GAAGuC,GAAGpB,GAAGsB,GAAGK,GAAG,OAAON,YAAE,yBAAyBkU,QAAQC,IAAK,mBAAkB/T,uBAAuBT,6BAA6BnC,kCAAkCuC,yBAAyBpB,4BAA4BsB,gCAAgCK,OAAOF,EAAE6O,uBAAuB,MAAM,CAACmF,YAAYvV,IAAIE,KAAKc,KAAK,sBAAsBhB,IAAIwV,UAAUxV,IAAIE,KAAKuV,KAAKzV,EAAE8G,KAAK9G,EAAEiV,SAA+B,uBAACjV,GAAG,GAAG,SAASA,IAAI,YAAYE,KAAKkK,MAAMxI,MAAM,kBAAkB1B,KAAKkK,MAAMxI,OAAO,UAAU1B,KAAKkK,MAAMsD,cAAcxN,KAAKkK,MAAMsL,aAAa9O,MAAM+O,qBAAqBzV,KAAKkK,MAAMsL,aAAaE,WAAWC,iBAAiB1U,YAAE,iCAAiC,IAAI,MAAMnB,QAAQE,KAAKkK,MAAMmB,oBAAoB,GAAGvL,GAAGmB,YAAE,6CAA6C,MAAM,CAAC2U,KAAK,WAAWC,aAAa/V,GAAG,MAAMc,EAAEK,YAAE,6CAA6CxC,EAAEwC,YAAE,wCAAwCD,EAAEhB,KAAKoK,KAAKgJ,OAAOxT,EAAEI,KAAKkK,MAAM4L,WAAW5U,EAAE,MAAMtB,OAAE,EAAOA,EAAE0B,QAAQ4J,aAAalK,GAAGO,EAAEhD,YAAE2C,GAAGA,EAAE6U,MAAM7U,EAAE8U,OAAO,EAAE3U,GAAG,MAAMzB,OAAE,EAAOA,EAAEmW,QAAQ,MAAMnW,OAAE,EAAOA,EAAEoW,QAAQrW,EAAE,IAAI0B,EAAE,EAAEE,EAAEF,EAAE,GAAGvB,GAAGc,GAAGjB,GAAGlB,EAAE,MAAM,CAACmX,KAAK,WAAWC,aAAa/V,GAAG,MAAMc,GAAGqN,GAAEgI,KAAK,wBAAwB,sDAAsD,CAACxS,MAAM7C,IAAI,MAAM,CAACgV,KAAK,aAAwC,8BAAG,IAAI9V,EAAE,MAAMc,EAAEZ,KAAKkK,MAAM,GAAG,WAAWtJ,EAAEc,KAAK,OAAO,KAAK,MAAM8T,aAAa/W,EAAEkN,cAAc3K,GAAGJ,EAAEhB,EAAEgB,EAAEsV,OAAOxS,KAAK5D,GAAGA,EAAEuG,WAAWnF,EAAEN,EAAEkV,YAAYlV,EAAEkV,WAAWzP,SAASpF,EAAEkV,YAAEvV,EAAE4M,cAAcnM,EAAET,EAAEoL,UAAUpL,EAAEoL,SAAS3F,UAAU,KAAK1G,EAAEiB,EAAEmK,iBAAiBnK,EAAEmK,iBAAiB1E,SAAS,KAAKjH,EAAE,YAAYwB,EAAEc,KAAKd,EAAEwV,cAAc,KAAK,IAAIjV,EAAE,gBAAgBP,EAAEc,KAAKP,EAAEP,EAAEqB,OAAOoU,uBAAuBrI,GAAEpN,EAAEqB,QAAQd,QAAQP,EAAEqB,OAAOqU,YAAY1V,EAAE2V,YAAYpV,EAAEI,YAAEX,EAAE2V,WAAW,sBAAsB3V,GAAGA,EAAE4V,oBAAoBrV,EAAEuF,MAAM,CAACwD,MAAMiH,KAAKC,UAAU,CAACnP,OAAOrB,EAAE4V,uBAAuB,MAAMpV,EAAE,2BAA2BpB,KAAKkK,OAAOlK,KAAKkK,MAAMuM,uBAAuB/T,EAAE,OAAO5C,EAAE,iBAAiBE,KAAKkK,OAAOlK,KAAKkK,MAAMqC,cAAczM,EAAE,MAAM8V,KAAK3Q,EAAE4Q,aAAavJ,SAAStM,KAAK0W,iBAAiBvV,GAAG,IAAI3C,EAAEwB,KAAKkK,MAAMyB,cAAc,GAAG,YAAY3L,KAAKkK,MAAMxI,MAAMnD,YAAEyB,KAAKkK,MAAM2B,UAAU7L,KAAKkK,MAAM2B,QAAQzH,OAAO,CAAC,MAAMtE,GAAGE,KAAKkK,MAAM2B,QAAQ,GAAG8G,iBAAiB3S,KAAKkK,MAAM2B,QAAQ,GAAG8K,MAAM7W,IAAItB,EAAEsB,GAAG,MAAM,CAAC4B,KAAKuD,EAAE2R,2BAA2BxV,EAAEmL,aAAa7J,EAAEmT,aAAavJ,EAAE8J,cAAchX,EAAEyX,eAAepY,EAAEiI,MAAMmQ,eAAeC,mBAAmBrY,EAAEiI,MAAMoQ,mBAAmBtB,aAAa/W,EAAEyX,OAAOtW,EAAEkW,WAAW5U,EAAEsM,aAAavM,EAAE0K,cAAc3K,EAAEiB,OAAOd,EAAE6K,SAAS3K,EAAE0J,iBAAiBpL,EAAE0Q,cAAc7R,GAAoC,kCAACsB,GAAG,MAAMc,QAAQd,EAAEwW,YAAY,MAAM,IAAItW,KAAKoQ,wBAAwB1O,KAAK,SAASO,OAAOrB,GAAGoS,cAAclT,GAAG,MAAMc,EAAEmW,IAAEzU,KAAKxC,IAAIE,KAAKe,cAAc,OAAOH,EAAEkK,sBAAsBlK,EAAEkK,oBAAoB9K,KAAKoK,KAAKW,kBAAkBnK,EAAe,gBAAG,OAAOZ,KAAKwO,eAAenK,KAAK,CAAC3C,KAAK,WAAsB,YAAC5B,GAAG,GAAGE,KAAKgX,cAAclX,GAAG,OAAOE,KAAKwO,eAAenK,KAAK,CAAC3C,KAAK,OAAOoD,MAAMhF,IAAmB,kBAAG,OAAOE,KAAKwO,eAAenK,KAAK,CAAC3C,KAAK,YAAYsV,cAAclX,GAAG,MAAMc,EAAE,kBAAkBZ,KAAKkK,OAAOlK,KAAKkK,MAAMkM,cAAc3X,EAAEqB,EAAE8E,gBAAgBtB,MAAMxD,IAAI,IAAIA,EAAEqD,WAAWrD,EAAEqD,WAAWnC,EAAEJ,GAAGZ,KAAKsK,gBAAgB2M,SAASrW,GAAG,OAAOnC,IAAIuC,GAAGiN,GAAExK,MAAM,IAAIvC,IAAE,sBAAuB,qEAAoEN,kFAAkF,MAAMd,EAAiB,kBAAG,IAAI,GAAGE,KAAKkX,YAAYlX,KAAKmX,oBAAoBnX,KAAKkK,SAASlK,KAAKwT,cAAc,OAAO,MAAMvJ,OAAOrJ,EAAE4C,OAAO/E,GAAGuB,WAAWA,KAAKyL,wBAAwB,MAAMG,SAAS5K,GAAGhB,KAAKoX,wBAAwBpX,KAAKc,KAAK,qBAAqBE,GAAG,MAAMpB,EAAEI,KAAKqX,sBAAsBnW,EAAEiV,YAAEnW,KAAKkK,MAAMsD,cAAcvM,QAAQuK,YAAExK,EAAEE,EAAElB,KAAKkK,MAAMlH,kBAAkBzB,EAAEvB,KAAKsX,qBAAqB1X,EAAEnB,EAAEmC,GAAGZ,KAAK+O,iBAAiB,IAAI9N,EAAE,EAAEiI,KAAKqO,IAAItW,EAAEjB,KAAK+O,kBAAkBxN,EAAEiW,OAAOvV,OAAOwV,YAAYzX,KAAK+O,iBAAiB,MAAM1N,EAAErB,KAAK0X,wBAAwB1W,GAAG,GAAGK,IAAIrB,KAAKuU,kBAAkB,OAAOvU,KAAK2X,kBAAkB3W,GAAG,MAAMlB,EAAEE,KAAKsQ,gBAAgBtQ,KAAK2Q,QAAQnP,SAAS1B,GAAGvB,YAAEuB,IAAIvB,YAAEuB,EAAE0D,SAAS1D,EAAE0D,OAAO3C,WAAWb,KAAK4F,aAAagS,eAAe5W,GAAG,MAAMJ,EAAE,CAACiI,MAAM7I,KAAKwT,cAAclM,WAAWtC,QAAQ,IAAIvG,EAAEuB,KAAKkK,MAAM,WAAWzL,EAAEiD,MAAMsM,GAAEvP,EAAEwD,UAAUnC,EAAEmC,aAAaxD,EAAEwD,OAAOqU,aAAa,WAAW7X,EAAEiD,YAAY1B,KAAK6P,4BAA4B7P,KAAKkP,OAAO2I,QAAQ7X,KAAKoK,KAAK6J,qBAAqB1S,EAAEzB,EAAEc,GAAGZ,KAAKqS,sBAAsBrS,KAAKkP,OAAOC,aAAa9M,MAAMC,KAAKtC,KAAK8O,cAAcM,eAAepP,KAAK8X,oBAAoB9X,KAAK4F,aAAagS,eAAe5W,OAAO,CAAC,MAAMJ,QAAQZ,KAAKkP,OAAO3H,OAAOhG,IAAIX,EAAEmX,MAAMnX,EAAEoX,QAAQC,YAAYjY,KAAKkY,kBAAkB,UAAUlY,KAAKkP,OAAOiJ,YAAYvX,GAAG,MAAMd,GAAGmF,YAAEnF,IAAImO,GAAExK,MAAM3D,IAAIc,EAAEmX,MAAMnX,EAAEoX,QAAQC,YAAYjY,KAAKoY,oBAAoBpY,KAAK2Q,QAAQnP,SAAS1B,GAAGvB,YAAEuB,IAAIvB,YAAEuB,EAAE0D,SAAS1D,EAAE0D,OAAO3C,WAAWb,KAAK4F,aAAagS,eAAe5W,GAAGhB,KAAKqY,6BAA6BrY,KAAKsY,+BAA+BtY,KAAKuU,kBAAkBlT,EAAErB,KAAK4F,aAAa2S,mBAAmBvY,KAAK0T,gBAAgB,MAAM5T,KAAkB,cAACA,GAAG,UAAUE,KAAKkP,OAAOsJ,QAAQ1Y,GAAG,MAAMc,GAAGqE,YAAErE,IAAsB,mBAAGZ,KAAKkY,kBAAkB,UAAUlY,KAAKkP,OAAOuJ,UAAU,MAAM3Y,GAAGmF,YAAEnF,GAAKE,KAAKoY,oBAAoBC,6BAA6BrY,KAAKsP,0BAA0BtP,KAAK4F,aAAagS,eAAe5X,KAAK0Y,oBAAoB1Y,KAAKsP,yBAAwB,GAAIqJ,6BAA6B7Y,EAAEc,GAAG,OAAOZ,KAAK4Y,MAAM,yBAAyB3J,UAAUjP,KAAK6Y,4CAA4C/Y,EAAEc,EAAEnC,GAAGuB,KAAKsP,yBAAwB,EAAGtP,KAAKqP,gBAAgBrP,KAAKqY,gCAAiF,kDAACvY,EAAEc,EAAEnC,GAAG,GAAGqB,EAAEgZ,oBAAoB,oBAAoBhZ,GAAGA,EAAEiZ,gBAAgB,CAAC,MAAM/X,EAAEgY,YAAElZ,EAAEiZ,iBAAiB,GAAGxa,YAAEyC,IAAI,kBAAkBA,EAAE2V,MAAM,CAAC,MAAM/W,EAAEE,EAAEiZ,gBAAgBE,QAAQjY,GAAGlB,EAAEiZ,gBAAgBnZ,GAAGsZ,YAAEtY,EAAEnC,GAAG,MAAMyC,EAAEpB,EAAEwB,QAAQJ,EAAE4X,oBAAmB,EAAG9Y,KAAKc,KAAK,qBAAqBI,KAAKkW,wBAAwB,MAAMtX,EAAE,aAAaE,KAAKkK,OAAOlK,KAAKkK,MAAM0B,SAAShL,EAAEZ,KAAKkK,MAAMlH,iBAAiB,GAAGzE,YAAEyB,KAAK0P,0BAA0B1P,KAAK0P,uBAAuBC,SAAS3P,KAAK0P,uBAAuB,MAAM9O,GAAG,YAAYA,EAAEc,MAAMqM,YAAEjO,GAAG,CAAC,MAAMrB,EAAEmC,EAAEI,EAAE,GAAGpB,EAAEmK,YAAE/I,EAAElB,EAAErB,EAAEuB,KAAKmZ,uBAAuB,OAAOxZ,YAAEK,KAAK0P,wBAAwB5P,GAAGA,EAAE6P,WAAW3P,KAAK0P,uBAAuB1P,KAAK2Y,6BAA6B/Y,EAAEnB,GAAG,CAACmN,SAAShM,EAAEwZ,gBAAgBpY,EAAEgC,iBAAiBpC,GAAG,MAAM,CAACgL,SAAS9L,EAAEsZ,gBAAgB,GAAGpW,iBAAiB,MAAMgR,aAAalU,GAAG,MAAMc,EAAEZ,KAAK4F,aAAasB,YAAYpH,GAAG,OAAOc,EAAEyY,KAAK,UAAU,KAAKrZ,KAAK0T,mBAAmB9S,EAAEyG,aAAavH,GAAGE,KAAK4F,aAAauB,YAAYrH,GAA0B,wBAACA,GAAG,MAAMc,QCAnrgBqO,eAAiBnP,EAAEoB,GAAG,IAAIpB,EAAE,OAAO,KAAK,OAAOA,EAAE4B,MAAM,IAAI,eAAe,IAAI,SAAS,IAAI,eAAe,IAAI,cAAc,IAAI,aAAa,OAAO,WAAW,uEAAiD4X,SAASpY,GAAG,IAAI,UAAU,OAAO,WAAW,uEAAkDoY,SAASpY,IDAo4fqY,CAAEzZ,EAAE,CAAC0Z,UAAUxZ,KAAKoH,aAAapH,KAAKoK,KAAK6J,qBAAqB/J,MAAMlK,KAAKkK,QAAQ,OAAOlK,KAAK4F,eAAe5F,KAAKwT,cAActP,QAAQlE,KAAK4F,aAAa0O,UAAUtU,KAAKoU,WAAWpU,KAAK4F,aAAa3B,UAAUjE,KAAK4F,aAAa,MAAM5F,KAAKkX,UAAU,MAAMlX,KAAKkP,OAAOtJ,aAAahF,EAAEZ,KAAKc,KAAK,eAAeF,GAAGZ,KAAK4F,aAAa6T,QAAQzZ,KAAKoU,WAAWpU,KAAK4F,aAAagS,eAAe9X,GAAGE,KAAK0T,gBAAgB1T,KAAK4F,cAAc8R,wBAAwB5X,GAAG,MAAO,GAAE,YAAYA,EAAE4B,KAAK,UAAU,YAAY,gBAAgB5B,EAAE4B,OAAOgY,uBAAuB5Z,EAAEc,EAAEnC,GAAG,MAAMuC,EAAElB,EAAE6Z,mBAAmB/Z,EAAEuR,KAAKC,UAAUxQ,GAAGM,EAAE3C,YAAEE,IAAI0S,KAAKC,UAAU3S,EAAE+E,QAAQvC,EAAEkQ,KAAKC,UAAUpR,KAAKS,YAAY,IAAIc,EAAE,GAAG,OAAOvB,KAAK4O,qBAAqBpN,SAAS1B,GAAGyB,GAAGzB,IAAK,GAAEkB,KAAKpB,KAAKsB,KAAKD,KAAKM,IAAQqY,gBAAY,MAAM9Z,KAAK,cAAcE,KAAKkK,OAAOlK,KAAKkK,MAAMkC,WAAWpM,KAAKoK,KAAK0G,QAAQ9Q,KAAKoK,KAAK0G,OAAO1M,QAAQ,QAAQpE,KAAKwD,QAAQ1D,KAAKE,KAAK4O,qBAAqBhG,QAAQ5I,KAAKS,WAAWoZ,iBAAiB/Z,GAAG,MAAMc,EAAErC,YAAEuB,GAAGA,EAAEW,WAAW,KAAKhC,EAAEF,YAAEyB,KAAKS,aAAalC,YAAEqC,GAAGZ,KAAKS,WAAWyK,aAAatK,GAAGZ,KAAKS,YAAYG,EAAE,IAAII,EAAE,KAAK,MAAMpB,EAAE,cAAcI,KAAKkK,OAAOlK,KAAKkK,MAAMkC,UAAU,GAAGxM,EAAE,CAAC,MAAMgB,EAAErC,YAAEuB,IAAIA,EAAEG,MAAMe,EAAEhB,KAAK8Z,sBAAsBlZ,GAAG,IAAIZ,KAAK4O,qBAAqBhG,OAAOnK,IAAImB,EAAE,OAAOE,EAAE,MAAMoB,EAAE3C,YAAEuB,IAAIA,EAAEwB,SAAS,IAAIyY,IAAE,OAAO7Y,EAAEd,UAAUJ,KAAK4O,qBAAqB1N,EAAET,WAAWhC,EAAEuC,IAAIE,EAAEjB,MAAMe,GAAGE,EAAE4Y,sBAAsBha,GAAG,MAAMc,EAAEZ,KAAKkK,MAAM,IAAIzL,EAAEqB,GAAG,GAAG,GAAG,cAAcc,GAAGA,EAAEwL,UAAU,CAAC,IAAIpL,EAAE,IAAIlB,EAAEE,KAAKoK,KAAK0G,OAAO,IAAIhR,IAAIA,EAAEsE,OAAO,OAAO3F,EAAE,OAAOuC,EAAEJ,EAAEwL,UAAU4N,kBAAkBhZ,EAAEoD,SAAStE,EAAEc,EAAEwL,UAAU4N,iBAAiB,MAAMpa,EAAEE,EAAE0D,QAAQ1D,GAAG,KAAKA,IAAI4D,KAAK5D,GAAG,IAAIA,EAAE,MAAMF,EAAEyE,KAAK,MAAM,MAAMnD,EAAEN,EAAEwL,UAAUC,WAAW,IAAIpL,EAAE,IAAIC,EAAE,kBAAkBA,EAAE,YAAY,GAAGD,EAAEA,EAAEgZ,QAAQ,QAAQra,EAAEsa,KAAK,OAAO3b,YAAEE,IAAIA,EAAEwY,SAAS/V,GAAG,CAAC,IAAIpB,EAAE,IAAIqa,OAAO,UAAUjZ,EAAE,YAAY,KAAKzC,EAAEA,EAAEwb,QAAQna,EAAE,IAAIA,EAAE,IAAIqa,OAAO,MAAMjZ,EAAE,YAAY,KAAKzC,EAAEA,EAAEwb,QAAQna,EAAE,IAAIrB,EAAEA,EAAEwb,QAAQ,OAAO,KAAKG,OAAO3b,EAAE,KAAKA,EAAE,IAAIA,EAAE,SAASwC,EAAEA,EAAE,MAAM,KAAKxC,EAAEA,EAAE,KAAK6Y,qBAAqBxX,EAAEc,EAAEnC,GAAG,MAAMuC,EAAE,YAAYhB,KAAKkK,MAAMxI,MAAM1B,KAAKkK,MAAM+G,eAAejR,KAAKkK,MAAM+G,eAAeC,eAAU,EAAOtR,EAAE,YAAYI,KAAKkK,MAAMxI,KAAK1B,KAAKkK,MAAM8G,gBAAW,EAAO9P,EAAE,IAAImB,MAAM0J,KAAG9K,EAAEjB,KAAK6Z,iBAAiBjZ,GAAGM,EAAE,GAAG3C,YAAE0C,GAAGA,EAAEoF,SAAS,KAAKnF,EAAE,GAAG3C,YAAEE,IAAIA,EAAE+E,OAAO/E,EAAE+E,OAAO6C,SAAS,KAAK,MAAM9E,EAAEkM,YAAE3N,GAAG,GAAGqB,YAAEI,GAAG,OAAO,KAAK,MAAMF,EAAEgZ,eAAI,MAAM,CAACtJ,qBAAqB/Q,KAAKkK,MAAM6G,qBAAqBzG,gBAAgBtK,KAAKsK,gBAAgB0G,WAAWpR,EAAEqR,eAAejQ,EAAEsZ,iBAAiBC,OAAOD,kBAAkB,EAAEE,QAAQtZ,EAAEsW,OAAOjW,EAAEkZ,qBAAqBpZ,EAAEoZ,qBAAqBC,eAAerZ,EAAEqZ,gBAAgBvD,oBAAoBrX,GAAG,IAAIc,EAAE,QAAQ,aAAad,GAAG,iBAAiB,OAAOc,EAAEd,EAAE8L,eAAU,EAAOhL,EAAEc,QAAQ2Y,eAAII,wBAAwBxM,GAAExK,MAAM,IAAIvC,IAAE,0BAA0B,gFAA+E,GAAI4W,oBAAoB,OAAO9X,KAAK0T,gBAAgB7J,YAAE7J,KAAK,uBAAsB,GAAIkY,kBAAkBlY,KAAK4F,eAAe5F,KAAKqP,gBAAe,EAAGrP,KAAK4F,aAAa+U,kBAAkBvC,oBAAoBpY,KAAK4F,eAAe5F,KAAKqP,gBAAe,EAAGrP,KAAK4F,aAAagV,oBAAoBtC,+BAA+BtY,KAAK4F,cAAc5F,KAAK4F,aAAaiV,8BAA8BxD,sBAAsB,MAAMvX,EAAE,YAAYE,KAAKkK,MAAMxI,KAAK1B,KAAKkK,MAAM+G,eAAe,KAAKrQ,EAAE,YAAYZ,KAAKkK,MAAMxI,KAAK1B,KAAKkK,MAAM8G,WAAW,KAAK,MAAM,CAACpF,SAAS,aAAa5L,KAAKkK,OAAOlK,KAAKkK,MAAM0B,SAASb,iBAAiB/K,KAAKkK,MAAMa,iBAAiBtK,WAAWT,KAAKkK,MAAMzJ,WAAWsQ,qBAAqB/Q,KAAKkK,MAAM6G,qBAAqB/N,iBAAiBhD,KAAKkK,MAAMlH,iBAAiBkT,OAAOlW,KAAKkK,MAAMgM,OAAO1I,aAAaxN,KAAKkK,MAAMsD,aAAayD,eAAenR,EAAEyQ,cAAc,kBAAkBvQ,KAAKkK,OAAOlK,KAAKkK,MAAMqG,cAAcG,aAAa,iBAAiB1Q,KAAKkK,OAAOlK,KAAKkK,MAAMwG,aAAapG,gBAAgBtK,KAAKsK,gBAAgBL,OAAOjK,KAAKiK,OAAOzG,OAAOxD,KAAKwD,OAAOwN,WAAWpQ,EAAE6W,YAAY,EAAE5L,QAAQ,YAAY7L,KAAKkK,OAAOlK,KAAKkK,MAAM2B,QAAQ7L,KAAKkK,MAAM2B,QAAQ,KAAKwF,iBAAiB,IAAI,qBAAqBrR,KAAKkK,MAAMlK,KAAKkK,MAAMmH,sBAAiB,EAAOyJ,MAAM,WAAW9a,KAAKkK,MAAMlK,KAAKkK,MAAMoH,YAAO,IAASa,cAAcrS,GAAG,IAAI,MAAMc,KAAKd,EAAE,GAAGE,KAAK8O,cAAcvG,IAAI3H,GAAG,CAAC,MAAMd,EAAEE,KAAK8O,cAAc/F,IAAInI,GAAGZ,KAAK8O,cAAchG,IAAIlI,EAAEd,EAAE,QAAQE,KAAK8O,cAAchG,IAAIlI,EAAE,GAAGZ,KAAKgP,mBAAmBzB,OAAOzN,IAAImF,YAAEnF,IAAImO,GAAExK,MAAM3D,MAAMsS,iBAAiBtS,GAAG,IAAI,MAAMc,KAAKd,EAAE,GAAGE,KAAK8O,cAAcvG,IAAI3H,GAAG,CAAC,MAAMd,EAAEE,KAAK8O,cAAc/F,IAAInI,GAAG,EAAE,IAAId,EAAEE,KAAK8O,cAAclL,OAAOhD,GAAGZ,KAAK8O,cAAchG,IAAIlI,EAAEd,GAAGE,KAAKgP,mBAAmBzB,OAAOzN,IAAImF,YAAEnF,IAAImO,GAAExK,MAAM3D,MAAMoT,qBAAqBpT,GAAG,MAAMc,EAAEZ,KAAKkK,MAAMpK,EAAEoK,MAAMtJ,EAAEd,EAAEiD,YAAYnC,EAAEma,qBAAqBjb,GAAG,OAAOE,KAAKkT,qBAAqBpT,GAAGvB,YAAEuB,EAAEI,YAAYJ,EAAEI,SAAS6K,iBAAiB/K,KAAKoK,KAAKW,kBAAkBjL,EAAgB,eAACA,EAAEkB,GAAG,GAAGhB,KAAKyQ,YAAYzQ,KAAK4F,aAAa,OAAO,KAAK,MAAMhG,QAAQI,KAAK4F,aAAa0M,QAAQxS,EAAEkB,GAAG,GAAG,IAAIpB,EAAEwE,OAAO,aAAakI,YAAE,GAAG,KAAK,MAAMpL,EAAEtB,EAAE,GAAG,IAA30lBE,KAAjB,WAAqBA,KAAO,KAAf,EAAm1lBkb,CAAE9Z,GAAG,CAAC,MAAMpB,QAAQE,KAAKkP,OAAO+L,WAAW/Z,GAAG,OAAOvB,YAAEG,GAAGA,GAAGE,KAAK+a,qBAAqBtc,IAAEgU,SAAS3S,MAAM,MAAMmB,QAAQjB,KAAKkP,OAAOgM,aAAaha,GAAG,GAAGC,YAAEF,GAAG,OAAO,KAAK,GAAG1C,YAAE0C,EAAEka,aAAa,CAAC,MAAMrb,QAAQE,KAAKkP,OAAO+L,WAAWha,EAAEka,aAAa,OAAOxb,YAAEG,GAAGA,GAAGE,KAAK+a,qBAAqBtc,IAAEgU,SAAS3S,MAAM,OAAOE,KAAK+a,qBAAqBna,EAAE6R,SAASxR,MAAMnB,YAAE,CAACgO,eAAKI,GAAEtM,UAAU,uBAAkB,GAAQ9B,YAAE,CAACgO,eAAKI,GAAEtM,UAAU,cAAS,GAAQ9B,YAAE,CAACgO,eAAKI,GAAEtM,UAAU,2BAAsB,GAAQ9B,YAAE,CAACgO,eAAKI,GAAEtM,UAAU,0BAAqB,GAAQ9B,YAAE,CAACgO,eAAKI,GAAEtM,UAAU,6BAAwB,GAAQ9B,YAAE,CAACgO,eAAKI,GAAEtM,UAAU,sBAAiB,GAAQ9B,YAAE,CAACgO,eAAKI,GAAEtM,UAAU,gBAAgB,MAAM9B,YAAE,CAACgO,YAAE,CAACpM,KAAKqY,OAAK7L,GAAEtM,UAAU,cAAS,GAAQ9B,YAAE,CAACgO,YAAE,CAACpM,KAAK0Z,KAAKlN,GAAEtM,UAAU,SAAS,MAAM9B,YAAE,CAACgO,YAAE,CAACrL,UAAS,KAAMyL,GAAEtM,UAAU,UAAU,MAAM9B,YAAE,CAACgO,YAAE,CAACrL,UAAS,KAAMyL,GAAEtM,UAAU,YAAY,MAAM9B,YAAE,CAACgO,eAAKI,GAAEtM,UAAU,sBAAsB,MAAM9B,YAAE,CAACgO,eAAKI,GAAEtM,UAAU,oBAAe,GAAQ9B,YAAE,CAACgO,eAAKI,GAAEtM,UAAU,gBAAW,GAAQsM,GAAEpO,YAAE,CAACkL,YAAE,4CAA4CkD,IAAG,IAAImN,GAAEnN,I,iCEJ7jsB,wIAIsmB,IAAI3P,EAAE,cAAcqB,YAAEnB,YAAE8C,YAAEP,IAAEsa,aAAa1a,SAAOf,YAAYC,GAAGC,MAAMD,GAAGE,KAAKkK,MAAM,KAAKlK,KAAKub,OAAO,KAAKnW,aAAapF,KAAK+F,OAAOwH,OAAOzN,IAAI,GAAG,2BAA2BA,EAAE8G,KAAK,CAAC,MAAMhG,EAAEZ,KAAKkK,OAAOlK,KAAKkK,MAAM1B,IAAI,QAAQxH,EAAEhB,KAAKkK,OAAOlK,KAAKkK,MAAM4J,OAAO,WAAW,MAAMzS,IAAEyI,UAAU9J,KAAKwb,eAAe/X,MAAM,aAAc,+CAA8CzC,YAAYJ,MAAMd,GAAGA,MAAU2b,kBAAc,OAAOxa,YAAEjB,KAAK+I,IAAI,iBAAiB,GAAG9H,YAAEjB,KAAK+I,IAAI,sBAAsB,GAAO0H,gBAAY,OAAOzQ,KAAK4N,YAAgB8N,kBAAc,OAAO1b,KAAK2b,iBAAqBC,oBAAgB,OAAO5b,KAAKyQ,YAAW,IAAKzQ,KAAKkK,MAAM0R,cAAkBzX,eAAW,SAASnE,KAAK6b,iBAAiB7b,KAAK6b,gBAAgB1X,UAAUnE,KAAKkV,cAAkB4G,uBAAmB,OAAO9b,KAAKmE,SAAS,EAAE,EAAMiE,cAAU,OAAM,IAAKpI,KAAK+I,IAAI,iBAAqBX,YAAQtI,QAAG,IAASA,EAAEE,KAAK+b,UAAU,UAAUjc,GAAGE,KAAKgc,eAAe,WAAWpO,YAAY,OAAO5N,KAAK+I,IAAI,qBAAqB/I,KAAK+I,IAAI,eAAe/I,KAAK+I,IAAI,iBAAiB/I,KAAKoI,UAAS,EAAGuT,iBAAiB,MAAM7b,EAAEE,KAAKub,QAAQvb,KAAKub,OAAO9K,UAAUzQ,KAAKub,OAAOG,YAAY,GAAU,OAAL1b,KAAcoK,MAAdpK,KAAsBoK,KAAK6R,QAAQnc,EAAEoc,cAAa,GAAIlc,KAAKkK,OAAOlK,KAAKkK,MAAMiS,SAASrc,EAAEsc,gBAAe,GAAIpc,KAAKoI,UAAUtI,EAAEuc,gBAAe,GAAIvc,EAAEoV,aAAa,OAAM,IAAKpV,YAAE,CAACoB,eAAK3C,EAAEqD,UAAU,cAAc,MAAM9B,YAAE,CAACoB,eAAK3C,EAAEqD,UAAU,aAAQ,GAAQ9B,YAAE,CAACoB,eAAK3C,EAAEqD,UAAU,cAAS,GAAQ9B,YAAE,CAACoB,YAAE,CAACuB,UAAS,KAAMlE,EAAEqD,UAAU,YAAY,MAAM9B,YAAE,CAACoB,YAAE,CAACuB,UAAS,KAAMlE,EAAEqD,UAAU,cAAc,MAAM9B,YAAE,CAACoB,YAAE,CAACuB,UAAS,KAAMlE,EAAEqD,UAAU,gBAAgB,MAAM9B,YAAE,CAACoB,YAAE,CAACQ,KAAK2B,QAAQZ,UAAS,KAAMlE,EAAEqD,UAAU,WAAW,MAAM9B,YAAE,CAACoB,YAAE,CAACuB,UAAS,KAAMlE,EAAEqD,UAAU,mBAAmB,MAAM9B,YAAE,CAACoB,eAAK3C,EAAEqD,UAAU,UAAU,MAAMrD,EAAEuB,YAAE,CAACqB,YAAE,gCAAgC5C,GAAG,IAAIa,EAAEb,G,+JCA/+D,IAAIuB,EAAE,cAAcF,MAAIE,EAAEkB,YAAE,CAACK,YAAE,uCAAuCvB,GAAG,ICAhFF,EDAoFuB,EAAErB,ECApF,IAAIrB,EAAEmB,EAAE,cAAcE,EAAED,cAAcE,SAAS4C,WAAW3C,KAAK0B,KAAK,OAAO1B,KAAKsc,KAAK,KAAKtc,KAAKuc,MAAM,KAAKvc,KAAKwc,IAAI,KAAKxc,KAAKyc,OAAO,KAAKnb,QAAQ,OAAO,IAAI1B,EAAE,CAAC0c,KAAKtc,KAAKsc,KAAKC,MAAMvc,KAAKuc,MAAMC,IAAIxc,KAAKwc,IAAIC,OAAOzc,KAAKyc,SAAaC,cAAU,OAAO1c,KAAK2c,KAAK,YAAY,GAAG,IAAI/b,YAAE,CAACI,YAAE,CAACU,KAAK,CAACa,OAAOZ,QAAQG,KAAK,CAACE,OAAM,MAAOvD,EAAEmD,UAAU,YAAO,GAAQhB,YAAE,CAACI,YAAE,CAACU,KAAK,CAACa,OAAOZ,QAAQG,KAAK,CAACE,OAAM,MAAOvD,EAAEmD,UAAU,aAAQ,GAAQhB,YAAE,CAACI,YAAE,CAACU,KAAK,CAACa,OAAOZ,QAAQG,KAAK,CAACE,OAAM,MAAOvD,EAAEmD,UAAU,WAAM,GAAQhB,YAAE,CAACI,YAAE,CAACU,KAAK,CAACa,OAAOZ,QAAQG,KAAK,CAACE,OAAM,MAAOvD,EAAEmD,UAAU,cAAS,GAAQhB,YAAE,CAACI,YAAE,CAACyB,UAAS,KAAMhE,EAAEmD,UAAU,UAAU,MAAMnD,EAAEmB,EAAEgB,YAAE,CAACS,YAAE,uCAAuC5C,GAAG,ICA5biE,EDAgcvB,EAAE1C,E,0CCAhc,MAAMwC,EAAE,CAAC2b,KAAKhc,IAAEyH,IAAI,OAAOwU,QAAQ,CAACzJ,OAAO5U,IAAEse,QAAQre,MAAI,IAAI2C,EAAEsB,EAAE,cAAcvB,EAAEtB,cAAcE,SAAS4C,WAAW3C,KAAK0B,KAAK,WAAW1B,KAAKE,SAAS,KAASwc,cAAU,OAAO1c,KAAK2c,KAAK,YAAY,GAAG,EAAErb,QAAQ,OAAO,IAAIoB,EAAE,CAACxC,SAASF,KAAKE,SAASoB,YAAYxB,YAAE,CAACkB,YAAE,CAACa,MAAMZ,EAAEa,KAAK,CAACC,KAAKnC,IAAEoC,OAAM,MAAOZ,EAAEQ,UAAU,gBAAW,GAAQ9B,YAAE,CAACkB,YAAE,CAACyB,UAAS,KAAMrB,EAAEQ,UAAU,UAAU,MAAMR,EAAEsB,EAAE5C,YAAE,CAACuB,YAAE,uCAAuCD,GAAG,IAAIF,EAAEE,ECA9pB,IAAIR,EAAE,cAAcd,EAAED,cAAcE,SAAS4C,WAAW3C,KAAK0B,KAAK,OAAO1B,KAAK+c,KAAK,GAAOL,cAAU,OAAO1c,KAAK2c,KAAK,YAAY,GAAG,IAAI3b,YAAE,CAACK,YAAE,CAACK,KAAK,CAAC,CAAC,CAACa,UAAUT,KAAK,CAACE,OAAM,MAAOpB,EAAEgB,UAAU,YAAO,GAAQZ,YAAE,CAACK,YAAE,CAACoB,UAAS,KAAM7B,EAAEgB,UAAU,UAAU,MAAMhB,EAAEI,YAAE,CAACpB,YAAE,mCAAmCgB,GAAG,IAAIO,EAAEP,ECAiE,MAAMQ,EAAEtB,IAAEkd,OAAO,CAAC3U,IAAI,OAAOuU,KAAKzb,EAAE0b,QAAQ,CAACI,KAAKtd,EAAEod,KAAKxe,EAAE2B,SAASe,KAAKM,EAAEzB,IAAI,IAAIqB,EAAE,cAAcrB,EAAED,cAAcE,SAAS4C,WAAW3C,KAAKwR,MAAM,IAAIpQ,EAAEpB,KAAKkd,QAAO,EAAGld,KAAKmd,UAAS,EAAGnd,KAAKod,cAAc,EAAEpd,KAAKqd,iBAAgB,EAAGjY,aAAa,IAAIxE,EAAEZ,KAAKoU,YAAYpU,KAAKoU,UAAU,IAAIlT,KAAGlB,KAAKoU,UAAUkJ,uBAAsB,EAAGtd,KAAKoU,UAAUmJ,QAAQ,EAAEvd,KAAKoU,UAAU5C,MAAMxR,KAAKwR,MAAMxR,KAAK8P,QAAQrO,IAAI,CAAChD,YAAEuB,KAAK,aAAaY,IAAIZ,KAAKoU,YAAYpU,KAAKoU,UAAUhM,SAASxH,GAAGZ,KAAKoK,OAAOxJ,GAAGZ,KAAKqd,iBAAiBrd,KAAKoK,KAAKsJ,mBAAkB,GAAIjV,YAAEuB,KAAK,CAAC,gBAAgB,cAAc,KAAK,IAAIY,EAAEd,EAAEE,KAAKoU,YAAYpU,KAAKoU,UAAUmJ,QAAQ,OAAO3c,EAAE,OAAOd,EAAEE,KAAKkK,YAAO,EAAOpK,EAAEyd,SAAS3c,EAAE,MAAK,GAAInC,YAAEuB,KAAK,CAAC,oBAAoBY,IAAIZ,KAAKoU,YAAYpU,KAAKoU,UAAUoJ,UAAU5c,MAAK,GAAInC,YAAEuB,KAAK,CAAC,iBAAiBY,IAAIZ,KAAKoU,YAAYpU,KAAKoU,UAAUnK,OAAOrJ,MAAK,GAAIZ,KAAKwR,MAAMzB,GAAG,UAAU,KAAK/P,KAAKoU,UAAU5C,MAAMxR,KAAKwR,MAAMxR,KAAKwE,aAAa,cAAc,OAAO5D,EAAEZ,KAAKoK,OAAOxJ,EAAE6c,cAAczd,KAAKoK,KAAKqT,cAAczd,KAAKkK,OAAOwB,MAAM9K,IAAIA,IAAIZ,MAAMA,KAAKmd,UAAUnd,KAAKkX,YAAYlX,KAAK2T,SAAS3T,KAAK0T,gBAAgB1T,KAAKmd,UAAS,MAAO,SAASnd,KAAK+F,OAAO2F,MAAM,KAAK1L,KAAKmd,UAAUnd,KAAKkX,YAAYlX,KAAK2T,SAAS3T,KAAK0T,gBAAgB1T,KAAKmd,UAAS,MAAO,SAASlZ,UAAUjE,KAAKmd,WAAWnd,KAAKmU,SAASnU,KAAKmd,UAAS,GAAInd,KAAK8P,QAAQH,OAAO,cAAc3P,KAAKqd,iBAAgB,EAAOlZ,eAAW,OAAOnE,KAAKmd,WAAWnd,KAAKyQ,YAAYzQ,KAAKqd,iBAAiBrd,KAAKkV,cAAcwI,iBAAiB9c,GAAG,IAAId,GAAE,EAAG,MAAMF,EAAEI,KAAKkK,MAAMzL,EAAEmB,EAAE+d,SAAS3c,EAAEpB,EAAEge,SAAS,GAAG,MAAMnf,GAAG,MAAMuC,EAAE,CAAC,IAAIpB,GAAGnB,EAAE4C,GAAGL,GAAGpB,GAAGgB,GAAGnC,IAAImB,GAAE,IAAKyB,GAAGT,GAAGI,IAAIK,GAAE,GAAIvB,EAAEF,GAAGyB,EAAE,OAAOvB,EAAE4T,gBAAgB1T,KAAKkX,WAAWlX,KAAKqd,kBAAkBrd,KAAKqd,iBAAgB,EAAGrd,KAAKyQ,WAAWzQ,KAAKoK,KAAKsJ,iBAAiBmK,cAAcjd,IAAIZ,KAAK8d,eAAe9d,KAAK+d,cAAc/d,KAAKc,KAAK,mBAAmBF,GAAGZ,KAAKqd,kBAAkBrd,KAAKyQ,YAAYzQ,KAAKqd,iBAAgB,EAAGrd,KAAKuH,OAAO3G,KAAKZ,KAAKqd,iBAAgB,EAAGnI,aAAa,OAAM,EAAG8I,cAAc,OAAM,EAAGpQ,YAAY,QAAQ7N,MAAM6N,aAAa5N,KAAK0d,iBAAiB1d,KAAKoK,KAAK0I,SAAS,OAAOlS,YAAE,CAACI,YAAE,CAACU,KAAKN,EAAE0H,IAAIlI,GAAG,MAAMd,EAAEF,YAAEgB,EAAEZ,KAAK2c,KAAK,SAASvb,GAAGpB,KAAKc,KAAK,QAAQhB,OAAOqB,EAAES,UAAU,aAAQ,GAAQhB,YAAE,CAACI,eAAKG,EAAES,UAAU,cAAS,GAAQhB,YAAE,CAACI,eAAKG,EAAES,UAAU,gBAAW,GAAQhB,YAAE,CAACI,eAAKG,EAAES,UAAU,iBAAY,GAAQhB,YAAE,CAACI,eAAKG,EAAES,UAAU,iBAAY,GAAQhB,YAAE,CAACI,YAAE,CAACyB,UAAS,KAAMtB,EAAES,UAAU,wBAAmB,GAAQhB,YAAE,CAACI,eAAKG,EAAES,UAAU,uBAAkB,GAAQhB,YAAE,CAACI,eAAKG,EAAES,UAAU,WAAW,MAAMhB,YAAE,CAACI,eAAKG,EAAES,UAAU,YAAO,GAAQT,EAAEP,YAAE,CAACS,YAAE,qCAAqCF,GAAGA,I,iCCJjtG,wEAIgK,MAAMI,EAAE3B,IAAEkK,UAAU,8BAA8B,SAASzI,EAAEzB,GAAG,OAAOoB,YAAEpB,EAAEqe,eAAejd,YAAEpB,EAAEse,eAAe,MAAMte,EAAEue,SAAS,MAAMve,EAAEwe,QAAQ3f,IAAE4f,mBAAmBze,EAAE0e,YAAY,eAAe1e,EAAE0e,YAAY1e,EAAE+S,iBAAiB,gBAAgB/S,EAAE+S,kBAAkBtQ,MAAM2D,QAAQpG,EAAE2e,OAAO9f,IAAE+f,kBAAkB,MAAM5e,EAAE+W,OAAO/W,EAAE0e,YAAY,eAAe1e,EAAE0e,YAAY1e,EAAE+S,iBAAiB,gBAAgB/S,EAAE+S,mBAAmBtQ,MAAM2D,QAAQpG,EAAE2e,QAAQ,WAAW3e,GAAGA,EAAE6e,QAAQhgB,IAAEigB,kBAAkB,MAAM9e,EAAE+W,OAAO/W,EAAE0e,YAAY,eAAe1e,EAAE0e,YAAY1e,EAAE+S,iBAAiB,gBAAgB/S,EAAE+S,kBAAkB,MAAM/S,EAAE+e,UAAUlgB,IAAEmgB,iBAAiBrd,EAAEkC,MAAM,IAAI3D,IAAE,mBAAmB,oCAAoCF,IAAInB,IAAEogB,Q,iCCAv2B,SAASje,EAAEA,EAAEd,GAAG,OAAOA,EAAE,YAAYA,GAAGA,EAAEgf,QAAQ5V,KAAKqO,IAAI3W,EAAEsI,KAAKC,IAAIrJ,EAAEgf,UAAU,YAAYhf,GAAGA,EAAEif,QAAQ7V,KAAKqO,IAAI3W,EAAEsI,KAAKC,IAAIrJ,EAAEif,SAAS,IAAIne,EAAEA,EAAoH,SAASK,EAAEL,EAAEK,GAAG,MAAM,iBAAiBL,EAAEA,EAAEA,GAAGA,EAAE2d,OAAO3d,EAAE2d,MAAMna,OAAjL,SAAWxD,GAAG,IAAId,EAAE,EAAEmB,EAAE,EAAE,IAAI,IAAID,EAAE,EAAEA,EAAEJ,EAAEwD,OAAOpD,IAAI,CAAC,MAAMpB,EAAEgB,EAAEI,GAAG4H,KAAK,iBAAiBhJ,IAAIE,GAAGF,EAAEqB,KAAK,OAAOnB,EAAEmB,EAAwEnB,CAAEc,EAAE2d,OAAOtd,EAAE,SAASD,EAAEJ,EAAEd,GAAG,IAAIA,EAAE,OAAOc,EAAE,MAAMI,EAAElB,EAAE0D,QAAQ5C,GAAG,SAASA,EAAEc,OAAOgC,KAAK5D,IAAI,MAAMse,QAAQpd,EAAEmd,QAAQve,GAAGE,EAAE,OAAOmB,EAAED,EAAEJ,GAAGK,EAAErB,EAAEgB,IAAI,KAAK,IAAIhB,EAAE,EAAE,MAAMyB,EAAEL,EAAEoD,OAAO,GAAG,IAAI/C,EAAE,OAAOT,EAAE,IAAI,IAAIK,EAAE,EAAEA,EAAEI,EAAEJ,IAAIrB,GAAGoB,EAAEC,GAAG,MAAMgE,EAAEiE,KAAK8V,MAAMpf,EAAEyB,GAAG,OAAO6H,KAAKqO,IAAItS,EAAErE,GAAG,SAAShB,EAAEE,GAAG,MAAMmB,EAAEnB,GAAGA,EAAE8L,SAAShM,EAAE,WAAWE,GAAGA,EAAEiV,OAAOjV,EAAEiV,MAAMkK,aAAa,EAAE,EAAE,IAAIhe,EAAE,OAAOrB,EAAE,MAAMyB,EAAE,oBAAoBJ,EAAED,EAAEpB,EAAEqB,EAAE8X,iBAAiBnZ,EAAE,GAAG,WAAWqB,EAAES,KAAK,OAAOd,EAAES,EAAEJ,EAAEie,QAAQ,GAAG,iBAAiBje,EAAES,KAAK,CAAC,IAAI5B,EAAEuB,EAAE,OAAOJ,EAAEke,iBAAiB3d,SAASP,IAAInB,EAAEc,EAAEd,EAAEmB,EAAEie,WAAWpf,EAAE,GAAG,iBAAiBmB,EAAES,KAAK,CAAC,IAAI5B,EAAEuB,EAAE,OAAOJ,EAAEme,gBAAgB5d,SAASP,IAAInB,EAAEc,EAAEd,EAAEmB,EAAEie,WAAWpf,EAAE,OAAOmB,EAAES,KAAKL,EAJr+B,mC,iCCAA,gHAI+Q,SAASH,EAAEN,EAAEK,EAAEC,EAAEG,EAAE,IAAI5C,KAAG,IAAImB,EAAE,GAAG,OAAOsB,EAAEQ,KAAK9B,EAAEqB,EAAEC,EAAEme,gBAAgB,GAAG,OAAOne,EAAEQ,KAAK,CAAC,MAAMjD,EAAEyC,EAAEoe,2BAA2B1e,GAAGS,EAAEH,EAAEqe,wBAAwB3f,EAAEE,YAAEuB,KAAKA,EAAEme,OAAOte,EAAE6J,kBAAkB/J,YAAEK,GAAGL,YAAEE,EAAE6J,kBAAkB9J,EAAExC,EAAE,MAAMD,EAAEoC,EAAEuM,EAAEvN,EAAEuB,EAAEP,EAAE8B,EAAE9C,EAAEwB,EAAER,EAAEuM,EAAEvN,EAAE2B,EAAEX,EAAE8B,EAAE9C,GAAGmL,iBAAiB9F,GAAG/D,EAAE,OAAOG,EAAEoe,KAAKvW,KAAKwW,IAAIlhB,EAAE4C,GAAGC,EAAEse,KAAKzW,KAAKwW,IAAIve,EAAEI,GAAGF,EAAEue,KAAK1W,KAAKqO,IAAI/Y,EAAE4C,GAAGC,EAAEwe,KAAK3W,KAAKqO,IAAIpW,EAAEI,GAAGF,EAAE0J,iBAAiB9F,EAAE5D,EAAE,SAASA,EAAEvB,EAAEkB,EAAEvC,GAAG,MAAM4C,EAAE5C,EAAEqhB,MAAMhgB,GAAG,OAAGc,YAAES,IAAmBH,EAAEG,EAAEJ,cAAIxC,EAAEmB,GAAGmgB,WAAW/e,GAAG,MAAMpB,EAAE,IAAInB,K,iCCApwB,SAAS4C,EAAEA,GAAG,IAAIJ,EAAE,MAAMM,EAAEF,EAAE6I,MAAM,MAAG,cAAc3I,GAAG,OAAON,EAAEM,EAAE6K,YAAYnL,EAAEoL,YAAY,WAAWhL,EAAE+I,KAAapJ,EAAEK,EAAE+I,KAAK0G,OAAOvP,EAAE6K,UAAUC,YAAmB,KAAK,SAASpL,EAAEI,EAAEJ,GAAG,IAAIM,EAAE,MAAM,cAAcN,GAAG,OAAOM,EAAEN,EAAEmL,YAAY7K,EAAE8K,WAAWrL,EAAEK,EAAEJ,EAAEmL,UAAUC,YAAY,KAAK,SAAS9K,EAAEF,EAAEJ,GAAG,MAAM8P,qBAAqBxP,GAAGN,EAAE,OAAOI,EAAEE,EAAG,IAAGA,WAAWF,KAAKA,EAAEE,EAAE,SAASP,EAAEK,EAAEJ,GAAG,GAAG,MAAMI,IAAIA,EAAE+C,OAAO,OAAO,KAAK,MAAM7C,EAAEF,EAAEmC,QAAQnC,GAAG,KAAKA,IAAIqC,KAAKrC,GAAI,IAAGA,OAAO,OAAOE,EAAE8C,KAAK,MAAO,GAAEpD,SAASM,EAAE2Y,KAAK,YAAYjZ,YAJtgB,uG,iCCAA,qGAI+Z,MAAMC,EAAEA,IAAI,IAAIE,EAAE,cAAcF,EAAEkE,aAAapF,KAAK8P,QAAQrO,IAAIJ,YAAErB,KAAK,QAAQ,WAAW,KAAKA,KAAKggB,YAAYzS,OAAOvM,IAAIpB,YAAEoB,IAAIlB,IAAEgK,UAAU9J,KAAKwb,eAAe/X,MAAMzC,SAAS,0BAA0B,OAAOA,YAAE,CAACJ,eAAKQ,EAAEQ,UAAU,aAAQ,GAAQR,EAAEJ,YAAE,CAACvC,YAAE,4CAA4C2C,GAAGA,I,iCCJ1sB,yFAI4I6N,eAAerO,EAAEA,EAAErC,EAAEqC,EAAEkC,eAAe,IAAIhD,YAAEvB,GAAG,MAAM,GAAG,MAAME,QAAQF,EAAE0hB,kBAAkBrf,EAAE2J,cAAc2V,oBAAoBjf,GAAG1C,GAAGoN,cAAc/L,EAAEugB,YAAYjf,EAAEkV,cAAc/U,EAAE+e,cAAchhB,GAAGwB,EAAE,GAAGnC,EAAEwY,SAAS,KAAK,MAAM,CAAC,KAAK,MAAMhS,EAAEhE,QAAQE,YAAEP,GAAG,GAAGI,EAAEO,YAAEX,EAAE2J,YAAY,IAAI9L,KAAKwG,IAAI,OAAO/D,GAAGF,EAAEqD,KAAKnD,GAAGF,GAAGpB,GAAGgB,EAAE2J,YAAYhC,IAAI3I,KAAK,IAAIoB,EAAEiY,QAAQrZ,IAAIoB,EAAEqD,KAAKzE,GAAGoB,GAAGK,GAAGT,EAAE2J,YAAYhC,IAAIlH,KAAK,IAAIL,EAAEiY,QAAQ5X,IAAIL,EAAEqD,KAAKhD,GAAGjC,GAAGA,EAAEoC,SAAS1B,IAAI,MAAMugB,SAASlf,GAAGrB,EAAEkB,GAAGG,GAAGP,EAAE2J,YAAYhC,IAAIpH,KAAK,IAAIH,EAAEiY,QAAQ9X,IAAIH,EAAEqD,KAAKlD,MAAMH,EAAE,SAASzC,EAAE4C,EAAEI,GAAG,OAAOJ,EAAE2B,cAAc3B,EAAE2B,cAAchD,YAAEyB,IAAIA,EAAEqT,6BAA6B9U,YAAEqB,EAAEmf,sBAAsBnf,EAAEmf,qBAAqB","file":"static/js/23.d0513d9e.chunk.js","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../chunks/tslib.es6.js\";import{geometryTypes as t}from\"../../../geometry.js\";import r from\"../../../TimeExtent.js\";import{JSONMap as i}from\"../../../core/jsonMap.js\";import{JSONSupport as s}from\"../../../core/JSONSupport.js\";import{clone as o}from\"../../../core/lang.js\";import{property as n}from\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/accessorSupport/ensureType.js\";import\"../../../core/has.js\";import\"../../../core/Logger.js\";import{subclass as a}from\"../../../core/accessorSupport/decorators/subclass.js\";import{writer as p}from\"../../../core/accessorSupport/decorators/writer.js\";import{fromJSON as l}from\"../../../geometry/support/jsonUtils.js\";import c from\"../../../rest/support/Query.js\";var d;const m=new i({esriSpatialRelIntersects:\"intersects\",esriSpatialRelContains:\"contains\",esriSpatialRelCrosses:\"crosses\",esriSpatialRelDisjoint:\"disjoint\",esriSpatialRelEnvelopeIntersects:\"envelope-intersects\",esriSpatialRelIndexIntersects:\"index-intersects\",esriSpatialRelOverlaps:\"overlaps\",esriSpatialRelTouches:\"touches\",esriSpatialRelWithin:\"within\",esriSpatialRelRelation:\"relation\"}),u=new i({esriSRUnit_Meter:\"meters\",esriSRUnit_Kilometer:\"kilometers\",esriSRUnit_Foot:\"feet\",esriSRUnit_StatuteMile:\"miles\",esriSRUnit_NauticalMile:\"nautical-miles\",esriSRUnit_USNauticalMile:\"us-nautical-miles\"});let h=d=class extends s{constructor(e){super(e),this.where=null,this.geometry=null,this.spatialRelationship=\"intersects\",this.hiddenIds=new Set,this.distance=void 0,this.objectIds=null,this.units=null,this.timeExtent=null,this.enabled=!1}writeWhere(e,t){t.where=e||\"1=1\"}enable(){this._set(\"enabled\",!0)}createQuery(e={}){const{where:t,geometry:r,spatialRelationship:i,timeExtent:s,objectIds:n,units:a,distance:p}=this;return new c({geometry:o(r),objectIds:o(n),spatialRelationship:i,timeExtent:o(s),where:t,units:a,distance:p,...e})}clone(){const{where:e,geometry:t,spatialRelationship:r,hiddenIds:i,timeExtent:s,objectIds:n,units:a,distance:p}=this,l=new Set;return i.forEach((e=>l.add(e))),new d({geometry:o(t),hiddenIds:l,objectIds:o(n),spatialRelationship:r,timeExtent:o(s),where:e,units:a,distance:p})}};e([n({type:String})],h.prototype,\"where\",void 0),e([p(\"where\")],h.prototype,\"writeWhere\",null),e([n({types:t,json:{read:l,write:!0}})],h.prototype,\"geometry\",void 0),e([n({type:String,json:{read:{source:\"spatialRel\",reader:m.read},write:{target:\"spatialRel\",writer:m.write}}})],h.prototype,\"spatialRelationship\",void 0),e([n({json:{write:(e,t,r)=>t[r]=Array.from(e),read:e=>new Set(e)}})],h.prototype,\"hiddenIds\",void 0),e([n({type:Number,json:{write:{overridePolicy:e=>({enabled:e>0})}}})],h.prototype,\"distance\",void 0),e([n({type:[Number],json:{write:!0}})],h.prototype,\"objectIds\",void 0),e([n({type:String,json:{read:u.read,write:{writer:u.write,overridePolicy(e){return{enabled:e&&this.distance>0}}}}})],h.prototype,\"units\",void 0),e([n({type:r,json:{write:!0}})],h.prototype,\"timeExtent\",void 0),e([n({readOnly:!0})],h.prototype,\"enabled\",void 0),h=d=e([a(\"esri.views.layers.support.FeatureFilter\")],h);var y=h;export{y as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"./chunks/tslib.es6.js\";import r from\"./Graphic.js\";import{property as t}from\"./core/accessorSupport/decorators/property.js\";import\"./core/has.js\";import\"./core/accessorSupport/ensureType.js\";import\"./core/Logger.js\";import{subclass as o}from\"./core/accessorSupport/decorators/subclass.js\";var p;let s=p=class extends r{constructor(){super(...arguments),this.isAggregate=!0}getEffectivePopupTemplate(e=!1){if(this.popupTemplate)return this.popupTemplate;const r=this.sourceLayer&&this.sourceLayer.featureReduction;return r&&\"popupTemplate\"in r&&r.popupEnabled?r.popupTemplate:null}getObjectId(){return this.objectId}clone(){return new p({objectId:this.objectId,...this.cloneProperties()})}};e([t({type:Boolean})],s.prototype,\"isAggregate\",void 0),e([t({type:Number,json:{read:!0}})],s.prototype,\"objectId\",void 0),s=p=e([o(\"esri.AggregateGraphic\")],s);var c=s;export{c as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../../chunks/tslib.es6.js\";import r from\"../../../../core/Accessor.js\";import{property as s}from\"../../../../core/accessorSupport/decorators/property.js\";import\"../../../../core/has.js\";import\"../../../../core/accessorSupport/ensureType.js\";import\"../../../../core/Logger.js\";import{subclass as t}from\"../../../../core/accessorSupport/decorators/subclass.js\";import{QueueProcessor as o}from\"../../../support/QueueProcessor.js\";function d(e){return e.some((e=>e.globalId))}function n(e){return e.filter((e=>!e.error)).map((e=>{var r;return null!=(r=e.objectId)?r:e.globalId}))}function a(e,r){const s=new Set(e);for(const t of r.values())s.add(t);return s}function i(e,r){const s=new Set(e);for(const t of r.values())s.delete(t);return s}let u=class extends r{constructor(e){super(),this._hasGlobalIds=!1,this._queueProcessor=new o({concurrency:1,process:e.process})}destroy(){this._queueProcessor.clear()}get updating(){return this._queueProcessor.length>0}push(e){const r=this._queueProcessor,s=r.last();switch(e.type){case\"update\":case\"refresh\":if((null==s?void 0:s.type)===e.type)return;r.push(e).finally((()=>this.notifyChange(\"updating\")));break;case\"edit\":{const t=\"processed-edit\"===(null==s?void 0:s.type)?s:null;t&&r.popLast();const o=this._mergeEdits(t,e);for(const e of o)r.push(e).finally((()=>this.notifyChange(\"updating\")));break}}this.notifyChange(\"updating\")}_mergeEdits(e,r){var s,t;const{addedFeatures:o,deletedFeatures:u,updatedFeatures:c}=r.edits;if(this._hasGlobalIds=this._hasGlobalIds||d(o)||d(c)||d(u),this._hasGlobalIds){return[e,{type:\"processed-edit\",edits:{addOrModified:[...o,...c],removed:u}}]}const p=new Set(n(null!=(s=null==e?void 0:e.edits.addOrModified)?s:[])),l=new Set(n(null!=(t=null==e?void 0:e.edits.removed)?t:[])),f=new Set([...n(o),...n(c)]),h=new Set(n(u));return[{type:\"processed-edit\",edits:{addOrModified:Array.from(a(i(p,h),f)).map((e=>({objectId:e}))),removed:Array.from(a(i(l,f),h)).map((e=>({objectId:e})))}}]}};e([s({readOnly:!0})],u.prototype,\"updating\",null),u=e([t(\"esri.views.2d.layers.support.FeatureCommandQueue\")],u);var c=u;export{c as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport{_ as t}from\"../../../../chunks/tslib.es6.js\";import{EsriPromise as e}from\"../../../../core/Promise.js\";import{createResolver as r,createAbortController as s,ignoreAbortErrors as o,throwIfNotAbortError as i}from\"../../../../core/promiseUtils.js\";import{open as n}from\"../../../../core/workers/workers.js\";import{property as a}from\"../../../../core/accessorSupport/decorators/property.js\";import\"../../../../core/has.js\";import\"../../../../core/accessorSupport/ensureType.js\";import\"../../../../core/Logger.js\";import{subclass as c}from\"../../../../core/accessorSupport/decorators/subclass.js\";function l(t){return Array.isArray(t)}let u=class extends e{constructor(t){super(t),this._startupResolver=r(),this.isReady=!1}initialize(){this._controller=s(),this.addResolvingPromise(this._startWorker(this._controller.signal))}destroy(){this._controller.abort(),this._connection&&this._connection.close()}set tileRenderer(t){this.client.tileRenderer=t}get closed(){return this._connection.closed}async startup(t,e,r,s){await this.when();const o=this._controller.signal,i=l(r.source)?{transferList:r.source,signal:o}:void 0,n={service:r,config:e,tileInfo:t.tileInfo.toJSON(),tiles:s};await this._connection.invoke(\"startup\",n,i),this._startupResolver.resolve(),this._set(\"isReady\",!0)}async updateTiles(t){return await this._startupResolver.promise,o(this._connection.invoke(\"updateTiles\",t))}async update(t){const e={config:t};return await this._startupResolver.promise,this._connection.invoke(\"update\",e)}async applyUpdate(t){return await this._startupResolver.promise,this._connection.invoke(\"applyUpdate\",t)}async setHighlight(t){return await this._startupResolver.promise,o(this._connection.invoke(\"controller.setHighlight\",t))}async refresh(){return await this._startupResolver.promise,o(this._connection.invoke(\"controller.refresh\"))}async querySummaryStatistics(t,e,r){return await this._startupResolver.promise,this._connection.invoke(\"controller.querySummaryStatistics\",{query:t.toJSON(),params:e},r)}async queryFeatures(t,e){return await this._startupResolver.promise,this._connection.invoke(\"controller.queryFeatures\",t.toJSON(),e)}async queryObjectIds(t,e){return await this._startupResolver.promise,this._connection.invoke(\"controller.queryObjectIds\",t.toJSON(),e)}async queryFeatureCount(t,e){return await this._startupResolver.promise,this._connection.invoke(\"controller.queryFeatureCount\",t.toJSON(),e)}async queryExtent(t,e){return this._connection.invoke(\"controller.queryExtent\",t.toJSON(),e)}async queryLatestObservations(t,e){return await this._startupResolver.promise,this._connection.invoke(\"controller.queryLatestObservations\",t.toJSON(),e)}async queryStatistics(t){return await this._startupResolver.promise,this._connection.invoke(\"controller.queryStatistics\",t)}async getObjectId(t){return await this._startupResolver.promise,this._connection.invoke(\"controller.getObjectId\",t)}async getDisplayId(t){return await this._startupResolver.promise,this._connection.invoke(\"controller.getDisplayId\",t)}async getFeature(t){return await this._startupResolver.promise,this._connection.invoke(\"controller.getFeature\",t)}async getAggregate(t){return await this._startupResolver.promise,this._connection.invoke(\"controller.getAggregate\",t)}async getAggregates(){return await this._startupResolver.promise,this._connection.invoke(\"controller.getAggregates\")}async getAggregateValueRanges(){return await this._startupResolver.promise,this._connection.invoke(\"controller.getAggregateValueRanges\")}async mapValidDisplayIds(t){return await this._startupResolver.promise,this._connection.invoke(\"controller.mapValidDisplayIds\",t)}async onEdits(t){return await this._startupResolver.promise,o(this._connection.invoke(\"controller.onEdits\",t))}async enableEvent(t,e){return await this._startupResolver.promise,o(this._connection.invoke(\"controller.enableEvent\",{name:t,value:e}))}async _startWorker(t){try{this._connection=await n(\"Pipeline\",{client:this.client,strategy:\"dedicated\",signal:t})}catch(e){i(e)}}};t([a()],u.prototype,\"isReady\",void 0),t([a()],u.prototype,\"client\",void 0),t([a()],u.prototype,\"tileRenderer\",null),u=t([c(\"esri.views.2d.layers.support.FeatureLayerProxy\")],u);var p=u;export{p as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport{isSome as e}from\"../../../core/maybe.js\";import i from\"./TileCoverage.js\";import t from\"./TileKey.js\";const l=1e-6;class s{constructor(e){this._tiles=new Map,this.buffer=0,this.acquireTile=e.acquireTile,this.releaseTile=e.releaseTile,this.tileInfoView=e.tileInfoView,this.buffer=e.buffer}destroy(){}clear(){this._tiles.forEach((e=>this._releaseTile(e)))}tileKeys(){const e=[];return this._tiles.forEach(((i,t)=>e.push(t))),e}update(e){const l=this.tileInfoView.getTileCoverage(e.state,this.buffer,\"closest\"),{spans:s,lodInfo:r}=l,{level:a}=r,o=[],d=[],h=new Set,n=new Set;for(const{row:i,colFrom:c,colTo:f}of s)for(let e=c;e<=f;e++){const l=t.getId(a,i,r.normalizeCol(e),r.getWorldForColumn(e)),s=this._getOrAcquireTile(o,l);h.add(l),s.isReady?s.visible=!0:n.add(s.key)}n.forEach((e=>this._addPlaceholders(h,e))),this._tiles.forEach((e=>{h.has(e.key.id)||(d.push(e.key.id),this._releaseTile(e))})),i.pool.release(l);return{hasMissingTiles:n.size>0,added:o,removed:d}}_getOrAcquireTile(e,i){if(!this._tiles.has(i)){const l=this.acquireTile(new t(i));e.push(i),this._tiles.set(i,l),l.visible=!1}return this._tiles.get(i)}_getTile(e){return this._tiles.get(e)}_releaseTile(e){this._tiles.delete(e.key.id),this.releaseTile(e)}_addPlaceholders(e,i){const t=this._addPlaceholderChildren(e,i);if(!(Math.abs(1-t)<l)){if(!this._addPlaceholderParent(e,i)){this._getTile(i.id).visible=!0}}}_addPlaceholderChildren(e,i){let t=0;return this._tiles.forEach((l=>{t+=this._addPlaceholderChild(e,l,i)})),t}_addPlaceholderChild(e,i,t){if(i.key.level<=t.level||!i.hasData||!t.contains(i.key))return 0;i.visible=!0,e.add(i.key.id);return 1/(1<<2*(i.key.level-t.level))}_addPlaceholderParent(i,t){let l=t.getParentKey(),s=0,r=null;for(;e(l);){if(i.has(l.id))return!0;const e=this._getTile(l.id);if(null!=e&&e.isReady)return e.visible=!0,i.add(e.key.id),!0;null!=e&&e.hasData&&e.patchCount>s&&(s=e.patchCount,r=e),l=l.getParentKey()}return!!r&&(r.visible=!0,i.add(r.key.id),!0)}}export{s as TileManager};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../chunks/tslib.es6.js\";import{JSONSupport as t}from\"../../../core/JSONSupport.js\";import{property as r}from\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/has.js\";import\"../../../core/accessorSupport/ensureType.js\";import\"../../../core/Logger.js\";import{subclass as o}from\"../../../core/accessorSupport/decorators/subclass.js\";import s from\"./FeatureFilter.js\";var i;let c=i=class extends t{constructor(){super(...arguments),this.filter=null,this.includedEffect=null,this.excludedEffect=null,this.excludedLabelsVisible=!1}clone(){return new i({filter:this.filter&&this.filter.clone(),includedEffect:this.includedEffect,excludedEffect:this.excludedEffect,excludedLabelsVisible:this.excludedLabelsVisible})}};e([r({type:s,json:{write:!0}})],c.prototype,\"filter\",void 0),e([r({json:{write:!0}})],c.prototype,\"includedEffect\",void 0),e([r({json:{write:!0}})],c.prototype,\"excludedEffect\",void 0),e([r({type:Boolean,json:{write:!0}})],c.prototype,\"excludedLabelsVisible\",void 0),c=i=e([o(\"esri.views.layers.support.FeatureEffect\")],c);var l=c;export{l as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../chunks/tslib.es6.js\";import t from\"../../core/Error.js\";import r from\"../../core/Logger.js\";import{isSome as i,isNone as s}from\"../../core/maybe.js\";import{eachAlways as o}from\"../../core/promiseUtils.js\";import{init as n,on as l}from\"../../core/watchUtils.js\";import{property as a}from\"../../core/accessorSupport/decorators/property.js\";import\"../../core/has.js\";import\"../../core/accessorSupport/ensureType.js\";import{subclass as u}from\"../../core/accessorSupport/decorators/subclass.js\";import{combinedViewLayerTimeExtentProperty as p}from\"../../layers/support/commonProperties.js\";import{fixFields as d,unpackFieldNames as m,collectLabelingFields as c,collectElevationFields as f,collectFilterFields as y,collectFeatureReductionFields as h,collectOrderByInfos as F,collectFields as w,collectField as g,featureHasFields as x}from\"../../layers/support/fieldUtils.js\";import b from\"../../rest/support/Query.js\";import{loadArcade as E}from\"../../support/arcadeOnDemand.js\";import v from\"./support/FeatureEffect.js\";import j from\"./support/FeatureFilter.js\";import{getFetchPopupTemplate as q,getRequiredFields as I}from\"./support/popupUtils.js\";import{getFloorFilterClause as R}from\"../support/floorFilterUtils.js\";const _=r.getLogger(\"esri.views.layers.FeatureLayerView\"),P=r=>{let P=class extends r{constructor(...e){super(...e),this._updatingRequiredFieldsPromise=null,this.effect=null,this.filter=null,this.timeExtent=null,this.layer=null,this.requiredFields=[],this.view=null}initialize(){n(this,[\"layer.renderer\",\"layer.labelingInfo\",\"layer.elevationInfo.featureExpressionInfo\",\"layer.displayField\",\"filter\",\"effect\",\"layer.timeInfo\",\"layer.floorInfo\",\"timeExtent\"],(()=>this._handleRequiredFieldsChange()),!0),l(this,\"view.floors\",\"change\",(()=>this._handleRequiredFieldsChange())),l(this,\"layer.sublayer\",\"change\",(()=>this._handleRequiredFieldsChange()))}get availableFields(){const{layer:e,layer:{fieldsIndex:t},requiredFields:r}=this;return\"outFields\"in e&&e.outFields?d(t,[...m(t,e.outFields),...r]):d(t,r)}get maximumNumberOfFeatures(){return 0}set maximumNumberOfFeatures(e){_.error(\"#maximumNumberOfFeatures=\",\"Setting maximum number of features is not supported\")}get maximumNumberOfFeaturesExceeded(){return!1}highlight(e){throw new Error(\"missing implementation\")}createQuery(){const e={outFields:[\"*\"],returnGeometry:!0,outSpatialReference:this.view.spatialReference},t=i(this.filter)?this.filter.createQuery(e):new b(e);if(\"feature\"===this.layer.type){const e=R(this);i(e)&&(t.where=t.where?`(${t.where}) AND (${e})`:e)}return i(this.timeExtent)&&(t.timeExtent=i(t.timeExtent)?t.timeExtent.intersection(this.timeExtent):this.timeExtent.clone()),t}queryFeatures(e,t){throw new Error(\"missing implementation\")}queryObjectIds(e,t){throw new Error(\"missing implementation\")}queryFeatureCount(e,t){throw new Error(\"missing implementation\")}queryExtent(e,t){throw new Error(\"missing implementation\")}_loadArcadeModules(e){if(e.get(\"expressionInfos.length\"))return E()}_handleRequiredFieldsChange(){const e=this._updateRequiredFields();this._set(\"_updatingRequiredFieldsPromise\",e),e.then((()=>{this._updatingRequiredFieldsPromise===e&&this._set(\"_updatingRequiredFieldsPromise\",null)}))}async _updateRequiredFields(){if(!this.layer||!this.view)return;const e=\"3d\"===this.view.type,{layer:t,layer:{fieldsIndex:r,objectIdField:s}}=this,n=\"renderer\"in t&&t.renderer,l=\"orderBy\"in t&&t.orderBy,a=t.featureReduction,u=new Set,p=await o([n?n.collectRequiredFields(u,r):null,c(u,t),e?f(u,t):null,i(this.filter)?y(u,t,this.filter):null,this.effect?y(u,t,this.effect.filter):null,a?h(u,t,a):null,l?F(u,t,l):null]);if(t.timeInfo&&this.timeExtent&&w(u,t.fieldsIndex,[t.timeInfo.startField,t.timeInfo.endField]),\"feature\"===t.type&&t.floorInfo&&w(u,t.fieldsIndex,[t.floorInfo.floorField]),\"subtype-group\"===t.type){g(u,r,t.subtypeField);const e=t.sublayers.map((e=>{var t;return Promise.all([null==(t=e.renderer)?void 0:t.collectRequiredFields(u,r),c(u,e)])}));await o(e)}for(const i of p)i.error&&_.error(i.error);g(u,r,s),e&&\"displayField\"in t&&t.displayField&&g(u,r,t.displayField);const d=Array.from(u).sort();this._set(\"requiredFields\",d)}validateFetchPopupFeatures(e){if(s(e))return null;for(const r of e.clientGraphics){const i=r.layer;if(\"popupEnabled\"in i&&!i.popupEnabled)return new t(\"featurelayerview:fetchPopupFeatures\",\"Popups are disabled\",{layer:i});if(\"popupTemplate\"in i){if(!q(i,e))return new t(\"featurelayerview:fetchPopupFeatures\",\"Layer does not define a popup template\",{layer:i})}}}async fetchClientPopupFeatures(e){const t=i(e)?e.clientGraphics:null;if(!t||0===t.length)return Promise.resolve([]);const r=[],s=[],o=await this.createPopupQuery(e);for(const n of t){const{layer:t}=n;if(!(\"popupEnabled\"in t))continue;const l=m(this.layer.fieldsIndex,o.outFields),a=q(t,e);if(!i(a))continue;const u=await this._loadArcadeModules(a);u&&u.arcadeUtils.hasGeometryOperations(a)||!x(l,n)?s.push(n):r.push(n)}return\"stream\"===this.layer.type||0===s.length?Promise.resolve(r):(o.objectIds=s.map((e=>e.attributes[this.layer.objectIdField])),this.layer.queryFeatures(o).then((e=>r.concat(e.features))).catch((()=>s)))}async createPopupQuery(e){const t=this.layer.createQuery(),r=new Set;let s=!1;const o=i(e)&&e.clientGraphics?e.clientGraphics.map((e=>e.layer)):[this.layer];for(const n of o){if(!(\"popupEnabled\"in n))continue;const t=q(n,e);if(!i(t))continue;const o=await this._loadArcadeModules(t),l=o&&o.arcadeUtils.hasGeometryOperations(t);s=!(\"point\"!==this.layer.geometryType&&!l);const a=await I(this.layer,t);for(const e of a)r.add(e)}if(t.returnGeometry=s,t.returnZ=s,t.returnM=s,t.outFields=Array.from(r),t.outSpatialReference=this.view.spatialReference,\"feature\"===this.layer.type){const e=R(this);i(e)&&(t.where=t.where?`(${t.where}) AND (${e})`:e)}return t}canResume(){return!!super.canResume()&&(!i(this.timeExtent)||!this.timeExtent.isEmpty)}};return e([a()],P.prototype,\"_updatingRequiredFieldsPromise\",void 0),e([a({readOnly:!0})],P.prototype,\"availableFields\",null),e([a({type:v})],P.prototype,\"effect\",void 0),e([a({type:j})],P.prototype,\"filter\",void 0),e([a(p)],P.prototype,\"timeExtent\",void 0),e([a()],P.prototype,\"layer\",void 0),e([a({type:Number})],P.prototype,\"maximumNumberOfFeatures\",null),e([a({readOnly:!0,type:Boolean})],P.prototype,\"maximumNumberOfFeaturesExceeded\",null),e([a({readOnly:!0})],P.prototype,\"requiredFields\",void 0),e([a()],P.prototype,\"suspended\",void 0),e([a()],P.prototype,\"view\",void 0),P=e([u(\"esri.views.layers.FeatureLayerView\")],P),P};export{P as FeatureLayerView,P as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../chunks/tslib.es6.js\";import t from\"../../../AggregateGraphic.js\";import\"../../../geometry.js\";import i from\"../../../Graphic.js\";import{flatten as r}from\"../../../core/arrayUtils.js\";import s from\"../../../core/Collection.js\";import a from\"../../../core/Error.js\";import n from\"../../../core/has.js\";import{clone as l}from\"../../../core/lang.js\";import o from\"../../../core/Logger.js\";import{andThen as h,unwrapOr as u,isSome as d,isNone as p}from\"../../../core/maybe.js\";import{debounce as c,eachAlwaysValues as y,isAbortError as f,after as g}from\"../../../core/promiseUtils.js\";import{init as m,whenFalseOnce as _}from\"../../../core/watchUtils.js\";import{property as v}from\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/accessorSupport/ensureType.js\";import{subclass as b}from\"../../../core/accessorSupport/decorators/subclass.js\";import R from\"../../../layers/effects/EffectList.js\";import{calculateTolerance as x}from\"../../../renderers/support/clickToleranceUtils.js\";import w from\"../../../rest/support/FeatureSet.js\";import S from\"../../../rest/support/Query.js\";import{MAX_FILTERS as F}from\"../engine/webgl/definitions.js\";import{LayerView2DMixin as U}from\"./LayerView2D.js\";import{createSchema as I}from\"./features/schemaUtils.js\";import{createOrReuseTileRenderer as O}from\"./features/tileRenderers.js\";import{computePxBuffer as E}from\"./features/support/pixelBuffering.js\";import{findSizeVV as T,createClusterCountSizeVariable as C,isClusterCompatibleRenderer as j,createClusterRenderer as P}from\"./support/clusterUtils.js\";import q from\"./support/FeatureCommandQueue.js\";import V from\"./support/FeatureLayerProxy.js\";import{toJSONGeometryType as L}from\"./support/util.js\";import{TileManager as N}from\"../tiling/TileManager.js\";import{FeatureLayerView as H}from\"../../layers/FeatureLayerView.js\";import J from\"../../layers/LayerView.js\";import{RefreshableLayerView as k}from\"../../layers/RefreshableLayerView.js\";import z from\"../../layers/support/FeatureFilter.js\";import A from\"../../layers/support/FeatureEffect.js\";import{createQueryGeometry as $}from\"../../support/drapedUtils.js\";import B from\"../../webgl/capabilities.js\";import M from\"../../../geometry/Extent.js\";const Q=2147483648,G=1,D=e=>(e&Q)>>>31===G;function K(e){return e&&\"openPorts\"in e}const W=o.getLogger(\"esri.views.2d.layers.FeatureLayerView2D\");let X=class extends(H(k(U(J)))){constructor(){super(...arguments),this._pipelineIsUpdating=!0,this._commandsQueue=new q({process:e=>{switch(e.type){case\"processed-edit\":return this._doEdit(e);case\"refresh\":return this._doRefresh();case\"update\":return this._doUpdate()}}}),this._visibilityOverrides=new Set,this._effect=null,this._highlightIds=new Map,this._lastPixelBuffer=0,this._updateHighlight=c((async()=>this._proxy.setHighlight(Array.from(this._highlightIds.keys())))),this._uploadsLocked=!1,this._needsClusterSizeUpdate=!1,this.filter=null,this.effectLists={included:new R,excluded:new R}}destroy(){var e,t;h(this._updateClusterSizeTask,(e=>e.remove())),null==(e=this._proxy)||e.destroy(),null==(t=this.tileRenderer)||t.destroy(),this._commandsQueue.destroy()}initialize(){this.addResolvingPromise(Promise.all([this._initProxy(),this._initServiceOptions()])),this.handles.add([this.on(\"valueRangesChanged\",(e=>{this._set(\"_aggregateValueRanges\",e.valueRanges)})),m(this,\"effect\",(e=>{this.effectLists.included.effect=null==e?void 0:e.includedEffect})),m(this,\"effect\",(e=>{this.effectLists.excluded.effect=null==e?void 0:e.excludedEffect}))])}async _initProxy(){if(\"isTable\"in this.layer&&this.layer.isTable)throw new a(\"featurelayerview:table-not-supported\",\"table feature layer can't be displayed\",{layer:this.layer});this._proxy&&this._proxy.destroy();const e=this._createClientOptions();return this._set(\"_proxy\",new V({client:e})),this._proxy.when()}async _initServiceOptions(){this._set(\"_serviceOptions\",await this._createServiceOptions())}get orderByFields(){return\"stream\"!==this._serviceOptions.type&&this._serviceOptions.orderByFields}get labelsVisible(){const e=\"subtype-group\"===this.layer.type?this.layer.sublayers.items:[this.layer];return!this.suspended&&e.some((e=>e.labelingInfo&&e.labelsVisible))}get effect(){return u(this._effect,null)}set effect(e){const t=this._effect;d(t)&&d(t.filter)&&t.filter.enabled&&d(e)&&d(e.filter)&&e.filter.enable(),this._effect=e,this.notifyChange(\"effect\")}get effects(){return this.effect&&[this.effect]||[]}get queryMode(){return this._serviceOptions.type}get renderingConfigHash(){if(!this.layer)return null;const e=this.availableFields,t=this.layer,i=this.view.floors,{definitionExpression:r}=t,s=\"subtype-group\"!==this.layer.type&&this.layer.labelsVisible&&this.layer.labelingInfo,a=\"renderer\"in t&&t.renderer,n=\"feature\"===t.type?t.gdbVersion:void 0,l=\"feature\"===t.type&&t.historicMoment?t.historicMoment.getTime():void 0,{timeExtent:o}=this,h=\"customParameters\"in t?JSON.stringify(t.customParameters):void 0,u=\"apiKey\"in t?t.apiKey:void 0,p=\"stream\"===t.type?`${JSON.stringify(t.geometryDefinition)}${t.definitionExpression}`:null,c=JSON.stringify(this.clips),y=t.featureReduction&&t.featureReduction.toJSON(),f=\"orderBy\"in this.layer&&JSON.stringify(this.layer.orderBy),g=\"sublayers\"in this.layer&&this.layer.sublayers.items.reduce(((e,t)=>e+`${t.visible?1:0}.${JSON.stringify(t.renderer)}.${t.labelsVisible}\\n.${JSON.stringify(t.labelingInfo)}`),\"\");return JSON.stringify({orderBy:f,sublayerHash:g,filterHash:d(this.filter)&&this.filter.toJSON(),effectHash:d(this.effect)&&this.effect.toJSON(),streamFilter:p,gdbVersion:n,definitionExpression:r,historicMoment:l,availableFields:e,renderer:a,labelingInfo:s,timeExtent:o,floors:i,clipsHash:c,featureReduction:y,customParameters:h,apiKey:u})}get hasEffects(){return this.effectLists.included.hasEffects||this.effectLists.excluded.hasEffects}highlight(e){let t;return e instanceof i?t=[e.getObjectId()]:\"number\"==typeof e||\"string\"==typeof e?t=[e]:s.isCollection(e)?t=e.map((e=>e&&e.getAttribute(this.layer.objectIdField))).toArray():Array.isArray(e)&&e.length>0&&(t=\"number\"==typeof e[0]||\"string\"==typeof e[0]?e:e.map((e=>e&&e.getAttribute(this.layer.objectIdField)))),t&&t.length?(t=t.filter((e=>null!=e)),this._addHighlight(t),{remove:()=>this._removeHighlight(t)}):{remove:()=>{}}}hasHighlight(){return!!this._highlightIds.size}hitTest(e,t){return this._hitTest(e,t)}async queryAggregates(){return(await this._proxy.getAggregates()).map((e=>t.fromJSON(e)))}queryStatistics(){return this._proxy.queryStatistics()}async querySummaryStatistics(e,t,i){const r={...t};var s;t.valueExpression&&(r.viewInfoParams={viewingMode:\"map\",scale:this.view.scale,spatialReference:null==(s=this.view.spatialReference)?void 0:s.toJSON()});return this._proxy.querySummaryStatistics(this._cleanUpQuery(e),r,i)}queryFeatures(e,t){return this.queryFeaturesJSON(e,t).then((e=>{const t=w.fromJSON(e);return t.features.forEach((e=>this._setLayersForFeature(e))),t}))}queryFeaturesJSON(e,t){return this._proxy.queryFeatures(this._cleanUpQuery(e),t)}queryObjectIds(e,t){return this._proxy.queryObjectIds(this._cleanUpQuery(e),t)}queryFeatureCount(e,t){return this._proxy.queryFeatureCount(this._cleanUpQuery(e),t)}queryExtent(e,t){return this._proxy.queryExtent(this._cleanUpQuery(e),t).then((e=>({count:e.count,extent:M.fromJSON(e.extent)})))}setVisibility(e,t){t?this._visibilityOverrides.delete(e):this._visibilityOverrides.add(e),this._update()}update(e){if(!this._tileStrategy||!this.tileRenderer)return;const{hasMissingTiles:t,added:i,removed:r}=this._tileStrategy.update(e);(i.length||r.length)&&this._proxy.updateTiles({added:i,removed:r}),t&&this.requestUpdate(),this.notifyChange(\"updating\")}attach(){this.view.timeline.record(`${this.layer.title} (FeatureLayer) Attach`),this._tileStrategy=new N({acquireTile:e=>this._acquireTile(e),releaseTile:e=>this._releaseTile(e),tileInfoView:this.view.featuresTilingScheme,buffer:0}),this.handles.add(m(this,\"renderingConfigHash\",(()=>this._update())),\"attach\"),\"stream\"!==this.layer.type&&this.handles.add(this.layer.on(\"edits\",(e=>this._edit(e))),\"attach\")}detach(){this.container.removeAllChildren(),this.handles.remove(\"attach\"),this.tileRenderer&&(this.tileRenderer.uninstall(this.container),this.tileRenderer=null),this._tileStrategy&&(this._tileStrategy.destroy(),this._tileStrategy=null),this._tileRendererHash=null}moveStart(){this.requestUpdate()}viewChange(){this.requestUpdate()}moveEnd(){this.requestUpdate()}async fetchPopupFeatures(e,i){if(d(i)&&i.clientGraphics.length){const e=i.clientGraphics[0];if(e instanceof t)return[e];i.clientGraphics=i.clientGraphics.filter((e=>{const{layer:t}=e,i=\"popupEnabled\"in t&&t.popupEnabled,r=\"popupTemplate\"in t&&t.popupTemplate,s=this.view.popup.defaultPopupTemplateEnabled;return i&&(r||s)}))}const s=this.validateFetchPopupFeatures(i);if(s)throw s;if(d(i)&&0===i.clientGraphics.length)return[];const a=this.fetchClientPopupFeatures(i);if(!e)return a;const n=this._fetchServicePopupFeatures(e,i);return y([a,n]).then(r)}async _fetchServicePopupFeatures(e,t){if(\"stream\"===this.layer.type||\"ogc-feature\"===this.layer.type)return[];const i=await this.createPopupQuery(t),{layer:r}=this,s=\"renderer\"in r&&r.renderer,a=d(t)?t.event:null,n=x({renderer:s,event:a});i.geometry=this.createFetchPopupFeaturesQueryGeometry(e,n);const l=new Set,{objectIdField:o}=r,h=d(t)?t.clientGraphics:null;if(h)for(const u of h)l.add(u.attributes[o]);return r.queryFeatures(i).then((e=>e.features.filter((e=>!l.has(e.attributes[o])))))}createFetchPopupFeaturesQueryGeometry(e,t){return $(e,t,this.view)}isUpdating(){var e;const t=\"renderer\"in this.layer&&null!=this.layer.renderer,i=this._commandsQueue.updating,r=null!=this._updatingRequiredFieldsPromise,s=!this._proxy||!this._proxy.isReady,a=this._pipelineIsUpdating,l=null===this.tileRenderer||(null==(e=this.tileRenderer)?void 0:e.updating),o=t&&(i||r||s||a||l);return n(\"esri-2d-log-updating\")&&console.log(`Updating FLV2D: ${o}\\n  -> hasRenderer ${t}\\n  -> hasPendingCommand ${i}\\n  -> updatingRequiredFields ${r}\\n  -> updatingProxy ${s}\\n  -> updatingPipeline ${a}\\n  -> updatingTileRenderer ${l}\\n`),o}_createClientOptions(){return{setUpdating:e=>{this._set(\"_pipelineIsUpdating\",e)},emitEvent:e=>{this.emit(e.name,e.event)}}}async _detectQueryMode(e){if(\"path\"in e&&(\"feature\"===this.layer.type||\"subtype-group\"===this.layer.type)&&\"point\"===this.layer.geometryType&&this.layer.capabilities.query.supportsPagination&&!this.layer.capabilities.operations.supportsEditing&&n(\"featurelayer-snapshot-enabled\"))try{const e=await this.layer.queryFeatureCount();if(e<=n(\"featurelayer-snapshot-point-min-threshold\"))return{mode:\"snapshot\",featureCount:e};const t=n(\"featurelayer-snapshot-point-max-threshold\"),i=n(\"featurelayer-snapshot-point-coverage\"),r=this.view.extent,s=this.layer.fullExtent,a=null==s?void 0:s.clone().intersection(r),l=d(a)?a.width*a.height:0,o=(null==s?void 0:s.width)*(null==s?void 0:s.height),h=0===o?0:l/o;if(e<=t&&h>=i)return{mode:\"snapshot\",featureCount:e}}catch(t){W.warn(\"mapview-feature-layer\",\"Encountered an error when querying for featureCount\",{error:t})}return{mode:\"on-demand\"}}async _createServiceOptions(){var e;const t=this.layer;if(\"stream\"===t.type)return null;const{capabilities:i,objectIdField:r}=t,s=t.fields.map((e=>e.toJSON())),a=t.fullExtent&&t.fullExtent.toJSON(),n=L(t.geometryType),o=t.timeInfo&&t.timeInfo.toJSON()||null,h=t.spatialReference?t.spatialReference.toJSON():null,u=\"feature\"===t.type?t.globalIdField:null;let p;\"ogc-feature\"===t.type?p=t.source.getFeatureDefinition():K(t.source)?p=await t.source.openPorts():t.parsedUrl&&(p=l(t.parsedUrl),\"dynamicDataSource\"in t&&t.dynamicDataSource&&(p.query={layer:JSON.stringify({source:t.dynamicDataSource})}));const c=\"datesInUnknownTimezone\"in this.layer&&this.layer.datesInUnknownTimezone,y=null!=(e=\"subtypeField\"in this.layer&&this.layer.subtypeField)?e:null,{mode:f,featureCount:g}=await this._detectQueryMode(p);let m=this.layer.objectIdField;if(\"feature\"===this.layer.type&&d(this.layer.orderBy)&&this.layer.orderBy.length){const e=!this.layer.orderBy[0].valueExpression&&this.layer.orderBy[0].field;e&&(m=e)}return{type:f,timeReferenceUnknownClient:c,subtypeField:y,featureCount:g,globalIdField:u,maxRecordCount:i.query.maxRecordCount,tileMaxRecordCount:i.query.tileMaxRecordCount,capabilities:i,fields:s,fullExtent:a,geometryType:n,objectIdField:r,source:p,timeInfo:o,spatialReference:h,orderByFields:m}}async _createMemoryServiceOptions(e){const t=await e.openPorts();return{...this._createServiceOptions(),type:\"memory\",source:t}}_cleanUpQuery(e){const t=S.from(e)||this.createQuery();return t.outSpatialReference||(t.outSpatialReference=this.view.spatialReference),t}async _update(){return this._commandsQueue.push({type:\"update\"})}async _edit(e){if(this._validateEdit(e))return this._commandsQueue.push({type:\"edit\",edits:e})}async doRefresh(){return this._commandsQueue.push({type:\"refresh\"})}_validateEdit(e){const t=\"globalIdField\"in this.layer&&this.layer.globalIdField,i=e.deletedFeatures.some((e=>-1===e.objectId||!e.objectId)),r=t&&this.availableFields.includes(t);return i&&!r?(W.error(new a(\"mapview-apply-edits\",`Editing the specified service requires the layer's globalIdField, ${t} to be included the layer's outFields for updates to be reflected on the map`)),null):e}async _doUpdate(){try{if(this.destroyed||!this._hasRequiredSupport(this.layer)||!this._tileStrategy)return;const{effect:t,filter:i}=this;await this._updateRequiredFields();const{renderer:r}=this._getEffectiveRenderer();this._set(\"_effectiveRenderer\",r);const s=this._createSchemaConfig(),a=L(this.layer.geometryType),n=await E(r,a,this.layer.featureReduction),l=this._createConfiguration(s,i,t);this._lastPixelBuffer=0===n?0:Math.max(n,this._lastPixelBuffer),l.schema.source.pixelBuffer=this._lastPixelBuffer;const o=this._createTileRendererHash(r);if(o!==this._tileRendererHash){await this._initTileRenderer(r);const e=this._serviceOptions;this.effects.forEach((e=>d(e)&&d(e.filter)&&e.filter.enable())),this.tileRenderer.onConfigUpdate(r);const t={added:this._tileStrategy.tileKeys(),removed:[]},i=this.layer;\"stream\"!==i.type&&K(i.source)&&(e.source=await i.source.openPorts()),\"stream\"===i.type&&await this._initServiceOptions(),await this._proxy.startup(this.view.featuresTilingScheme,l,e,t),this.hasHighlight()&&await this._proxy.setHighlight(Array.from(this._highlightIds.keys())),await this._onceTilesUpdated(),this.tileRenderer.onConfigUpdate(r)}else{const t=await this._proxy.update(l);(t.mesh||t.targets.aggregate)&&this._lockGPUUploads();try{await this._proxy.applyUpdate(t)}catch(e){f(e)||W.error(e)}(t.mesh||t.targets.aggregate)&&this._unlockGPUUploads(),this.effects.forEach((e=>d(e)&&d(e.filter)&&e.filter.enable())),this.tileRenderer.onConfigUpdate(r),this._updateClusterSizeVariable(),this._forceAttributeTextureUpload()}this._tileRendererHash=o,this.tileRenderer.invalidateLabels(),this.requestUpdate()}catch(e){}}async _doEdit(e){try{await this._proxy.onEdits(e)}catch(t){f(t),0}}async _doRefresh(){this._lockGPUUploads();try{await this._proxy.refresh()}catch(e){f(e),0}this._unlockGPUUploads()}_updateClusterSizeVariable(){this._needsClusterSizeUpdate&&(this.tileRenderer.onConfigUpdate(this._effectiveRenderer),this._needsClusterSizeUpdate=!1)}_createUpdateClusterSizeTask(e,t){return this.watch(\"_aggregateValueRanges\",(async i=>{this._updateClusterEffectiveRendererSizeVariable(e,t,i),this._needsClusterSizeUpdate=!0,this._uploadsLocked||this._updateClusterSizeVariable()}))}async _updateClusterEffectiveRendererSizeVariable(e,t,i){if(e.dynamicClusterSize&&\"visualVariables\"in e&&e.visualVariables){const r=T(e.visualVariables);if(d(r)&&\"cluster_count\"===r.field){const s=e.visualVariables.indexOf(r);e.visualVariables[s]=C(t,i);const a=e.clone();a.dynamicClusterSize=!0,this._set(\"_effectiveRenderer\",a)}}}_getEffectiveRenderer(){const e=\"renderer\"in this.layer&&this.layer.renderer,t=this.layer.featureReduction;if(d(this._updateClusterSizeTask)&&(this._updateClusterSizeTask.remove(),this._updateClusterSizeTask=null),t&&\"cluster\"===t.type&&j(e)){const i=t,r=[],s=P(r,e,i,this._aggregateValueRanges);return h(this._updateClusterSizeTask,(e=>e.remove())),this._updateClusterSizeTask=this._createUpdateClusterSizeTask(s,i),{renderer:s,aggregateFields:r,featureReduction:t}}return{renderer:e,aggregateFields:[],featureReduction:null}}_acquireTile(e){const t=this.tileRenderer.acquireTile(e);return t.once(\"attach\",(()=>{this.requestUpdate()})),t}_releaseTile(e){this.tileRenderer.releaseTile(e)}async _initTileRenderer(e){const t=await O(e,{layerView:this,tileInfoView:this.view.featuresTilingScheme,layer:this.layer});return this.tileRenderer&&(this._tileStrategy.clear(),this.tileRenderer.uninstall(this.container),this.tileRenderer.destroy(),this.tileRenderer=null),this.destroyed?null:(this._proxy.tileRenderer=t,this._set(\"tileRenderer\",t),this.tileRenderer.install(this.container),this.tileRenderer.onConfigUpdate(e),this.requestUpdate(),this.tileRenderer)}_createTileRendererHash(e){return`${\"heatmap\"===e.type?\"heatmap\":\"symbol\"}.${\"dot-density\"===e.type}`}_createFeatureDataHash(e,t,i){const r=e.getAttributeHash(),s=JSON.stringify(t),a=d(i)&&JSON.stringify(i.filter),n=JSON.stringify(this.timeExtent);let l=\"\";return this._visibilityOverrides.forEach((e=>l+=e)),`${r}.${s}.${a}.${n}.${l}`}get hasFilter(){const e=!!(\"floorInfo\"in this.layer&&this.layer.floorInfo&&this.view.floors&&this.view.floors.length);return!!this.filter||e||!!this._visibilityOverrides.size||!!this.timeExtent}_injectOverrides(e){const t=d(e)?e.timeExtent:null,i=d(this.timeExtent)&&d(t)?this.timeExtent.intersection(t):this.timeExtent||t;let r=null;const s=\"floorInfo\"in this.layer&&this.layer.floorInfo;if(s){const t=d(e)&&e.where;r=this._addFloorFilterClause(t)}if(!this._visibilityOverrides.size&&!i&&!s)return e;const a=d(e)&&e.clone()||new z;return a.hiddenIds=this._visibilityOverrides,a.timeExtent=i,r&&(a.where=r),a}_addFloorFilterClause(e){const t=this.layer;let i=e||\"\";if(\"floorInfo\"in t&&t.floorInfo){var r;let e=this.view.floors;if(!e||!e.length)return i;null!=(r=t.floorInfo.viewAllLevelIds)&&r.length&&(e=t.floorInfo.viewAllLevelIds);const s=e.filter((e=>\"\"!==e)).map((e=>\"'\"+e+\"'\"));s.push(\"''\");const a=t.floorInfo.floorField;let n=\"(\"+a+\" IN ({ids}) OR \"+a+\" IS NULL)\";if(n=n.replace(\"{ids}\",s.join(\", \")),d(i)&&i.includes(a)){let e=new RegExp(\"AND \\\\(\"+a+\".*NULL\\\\)\",\"g\");i=i.replace(e,\"\"),e=new RegExp(\"\\\\(\"+a+\".*NULL\\\\)\",\"g\"),i=i.replace(e,\"\"),i=i.replace(/\\s+/g,\" \").trim()}i=\"\"!==i?\"(\"+i+\") AND \"+n:n}return\"\"!==i?i:null}_createConfiguration(e,t,i){const r=\"feature\"===this.layer.type&&this.layer.historicMoment?this.layer.historicMoment.getTime():void 0,s=\"feature\"===this.layer.type?this.layer.gdbVersion:void 0,a=new Array(F),n=this._injectOverrides(t);a[0]=d(n)?n.toJSON():null,a[1]=d(i)&&i.filter?i.filter.toJSON():null;const l=I(e);if(p(l))return null;const o=B();return{definitionExpression:this.layer.definitionExpression,availableFields:this.availableFields,gdbVersion:s,historicMoment:r,devicePixelRatio:window.devicePixelRatio||1,filters:a,schema:l,supportsTextureFloat:o.supportsTextureFloat,maxTextureSize:o.maxTextureSize}}_hasRequiredSupport(e){var t;return!(\"renderer\"in e&&\"dot-density\"===(null==(t=e.renderer)?void 0:t.type)&&!B().supportsTextureFloat)||(W.error(new a(\"webgl-missing-extension\",\"Missing WebGL extension OES_Texture_Float which is required for DotDensity\")),!1)}_onceTilesUpdated(){return this.requestUpdate(),_(this,\"_pipelineIsUpdating\",!1)}_lockGPUUploads(){this.tileRenderer&&(this._uploadsLocked=!0,this.tileRenderer.lockGPUUploads())}_unlockGPUUploads(){this.tileRenderer&&(this._uploadsLocked=!1,this.tileRenderer.unlockGPUUploads())}_forceAttributeTextureUpload(){this.tileRenderer&&this.tileRenderer.forceAttributeTextureUpload()}_createSchemaConfig(){const e=\"feature\"===this.layer.type?this.layer.historicMoment:null,t=\"feature\"===this.layer.type?this.layer.gdbVersion:null;return{renderer:\"renderer\"in this.layer&&this.layer.renderer,spatialReference:this.layer.spatialReference,timeExtent:this.layer.timeExtent,definitionExpression:this.layer.definitionExpression,featureReduction:this.layer.featureReduction,fields:this.layer.fields,geometryType:this.layer.geometryType,historicMoment:e,labelsVisible:\"labelsVisible\"in this.layer&&this.layer.labelsVisible,labelingInfo:\"labelingInfo\"in this.layer&&this.layer.labelingInfo,availableFields:this.availableFields,effect:this.effect,filter:this.filter,gdbVersion:t,pixelBuffer:0,orderBy:\"orderBy\"in this.layer&&this.layer.orderBy?this.layer.orderBy:null,customParameters:{...\"customParameters\"in this.layer?this.layer.customParameters:void 0,token:\"apiKey\"in this.layer?this.layer.apiKey:void 0}}}_addHighlight(e){for(const t of e)if(this._highlightIds.has(t)){const e=this._highlightIds.get(t);this._highlightIds.set(t,e+1)}else this._highlightIds.set(t,1);this._updateHighlight().catch((e=>{f(e)||W.error(e)}))}_removeHighlight(e){for(const t of e)if(this._highlightIds.has(t)){const e=this._highlightIds.get(t)-1;0===e?this._highlightIds.delete(t):this._highlightIds.set(t,e)}this._updateHighlight().catch((e=>{f(e)||W.error(e)}))}_setLayersForFeature(e){const t=this.layer;e.layer=t,e.sourceLayer=t}_createHittestResult(e){return this._setLayersForFeature(e),d(e.geometry)&&(e.geometry.spatialReference=this.view.spatialReference),e}async _hitTest(e,r){if(this.suspended||!this.tileRenderer)return null;const s=await this.tileRenderer.hitTest(e,r);if(0===s.length)return await g(1),null;const a=s[0];if(!D(a)){const e=await this._proxy.getFeature(a);return h(e,(e=>this._createHittestResult(i.fromJSON(e))))}const n=await this._proxy.getAggregate(a);if(p(n))return null;if(d(n.referenceId)){const e=await this._proxy.getFeature(n.referenceId);return h(e,(e=>this._createHittestResult(i.fromJSON(e))))}return this._createHittestResult(t.fromJSON(n))}};e([v()],X.prototype,\"_serviceOptions\",void 0),e([v()],X.prototype,\"_proxy\",void 0),e([v()],X.prototype,\"_pipelineIsUpdating\",void 0),e([v()],X.prototype,\"_effectiveRenderer\",void 0),e([v()],X.prototype,\"_aggregateValueRanges\",void 0),e([v()],X.prototype,\"_commandsQueue\",void 0),e([v()],X.prototype,\"labelsVisible\",null),e([v({type:z})],X.prototype,\"filter\",void 0),e([v({type:A})],X.prototype,\"effect\",null),e([v({readOnly:!0})],X.prototype,\"effects\",null),e([v({readOnly:!0})],X.prototype,\"queryMode\",null),e([v()],X.prototype,\"renderingConfigHash\",null),e([v()],X.prototype,\"tileRenderer\",void 0),e([v()],X.prototype,\"updating\",void 0),X=e([b(\"esri.views.2d.layers.FeatureLayerView2D\")],X);var Y=X;export{Y as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nasync function e(e,a){if(!e)return null;switch(e.type){case\"class-breaks\":case\"simple\":case\"unique-value\":case\"dot-density\":case\"dictionary\":return new((await import(\"./tileRenderers/SymbolTileRenderer.js\")).default)(a);case\"heatmap\":return new((await import(\"./tileRenderers/HeatmapTileRenderer.js\")).default)(a)}}export{e as createOrReuseTileRenderer};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../chunks/tslib.es6.js\";import t from\"../../core/Accessor.js\";import r from\"../../core/Evented.js\";import{HandleOwnerMixin as s}from\"../../core/HandleOwner.js\";import{IdentifiableMixin as i}from\"../../core/Identifiable.js\";import o from\"../../core/Logger.js\";import{unwrapOr as n}from\"../../core/maybe.js\";import{EsriPromiseMixin as l}from\"../../core/Promise.js\";import{property as a}from\"../../core/accessorSupport/decorators/property.js\";import\"../../core/has.js\";import\"../../core/accessorSupport/ensureType.js\";import{subclass as p}from\"../../core/accessorSupport/decorators/subclass.js\";let d=class extends(s(i(l(r.EventedMixin(t))))){constructor(e){super(e),this.layer=null,this.parent=null}initialize(){this.when().catch((e=>{if(\"layerview:create-error\"!==e.name){const t=this.layer&&this.layer.id||\"no id\",r=this.layer&&this.layer.title||\"no title\";throw o.getLogger(this.declaredClass).error(\"#resolve()\",`Failed to resolve layer view (layer title: '${r}', id: '${t}')`,e),e}}))}get fullOpacity(){return n(this.get(\"layer.opacity\"),1)*n(this.get(\"parent.fullOpacity\"),1)}get suspended(){return!this.canResume()}get suspendInfo(){return this.getSuspendInfo()}get legendEnabled(){return!this.suspended&&!0===this.layer.legendEnabled}get updating(){return!!(this.updatingHandles&&this.updatingHandles.updating||this.isUpdating())}get updatingProgress(){return this.updating?0:1}get visible(){return!0===this.get(\"layer.visible\")}set visible(e){void 0!==e?this._override(\"visible\",e):this._clearOverride(\"visible\")}canResume(){return!this.get(\"parent.suspended\")&&this.get(\"view.ready\")&&this.get(\"layer.loaded\")&&this.visible||!1}getSuspendInfo(){const e=this.parent&&this.parent.suspended?this.parent.suspendInfo:{},t=this;return t.view&&t.view.ready||(e.viewNotReady=!0),this.layer&&this.layer.loaded||(e.layerNotLoaded=!0),this.visible||(e.layerInvisible=!0),e}isUpdating(){return!1}};e([a()],d.prototype,\"fullOpacity\",null),e([a()],d.prototype,\"layer\",void 0),e([a()],d.prototype,\"parent\",void 0),e([a({readOnly:!0})],d.prototype,\"suspended\",null),e([a({readOnly:!0})],d.prototype,\"suspendInfo\",null),e([a({readOnly:!0})],d.prototype,\"legendEnabled\",null),e([a({type:Boolean,readOnly:!0})],d.prototype,\"updating\",null),e([a({readOnly:!0})],d.prototype,\"updatingProgress\",null),e([a()],d.prototype,\"visible\",null),d=e([p(\"esri.views.layers.LayerView\")],d);var u=d;export{u as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport{_ as r}from\"../../../chunks/tslib.es6.js\";import{JSONSupport as s}from\"../../../core/JSONSupport.js\";import\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/has.js\";import\"../../../core/accessorSupport/ensureType.js\";import\"../../../core/Logger.js\";import{subclass as o}from\"../../../core/accessorSupport/decorators/subclass.js\";let e=class extends s{};e=r([o(\"esri.views.layers.support.ClipArea\")],e);var p=e;export{p as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport{_ as t}from\"../../../chunks/tslib.es6.js\";import{property as r}from\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/has.js\";import\"../../../core/accessorSupport/ensureType.js\";import\"../../../core/Logger.js\";import{subclass as o}from\"../../../core/accessorSupport/decorators/subclass.js\";import e from\"./ClipArea.js\";var s;let i=s=class extends e{constructor(){super(...arguments),this.type=\"rect\",this.left=null,this.right=null,this.top=null,this.bottom=null}clone(){return new s({left:this.left,right:this.right,top:this.top,bottom:this.bottom})}get version(){return(this._get(\"version\")||0)+1}};t([r({type:[Number,String],json:{write:!0}})],i.prototype,\"left\",void 0),t([r({type:[Number,String],json:{write:!0}})],i.prototype,\"right\",void 0),t([r({type:[Number,String],json:{write:!0}})],i.prototype,\"top\",void 0),t([r({type:[Number,String],json:{write:!0}})],i.prototype,\"bottom\",void 0),t([r({readOnly:!0})],i.prototype,\"version\",null),i=s=t([o(\"esri.views.layers.support.ClipRect\")],i);var p=i;export{p as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../chunks/tslib.es6.js\";import\"../../../geometry.js\";import{property as r}from\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/has.js\";import\"../../../core/accessorSupport/ensureType.js\";import\"../../../core/Logger.js\";import{subclass as o}from\"../../../core/accessorSupport/decorators/subclass.js\";import t from\"../../../geometry/Geometry.js\";import{fromJSON as s}from\"../../../geometry/support/jsonUtils.js\";import p from\"./ClipArea.js\";import m from\"../../../geometry/Extent.js\";import i from\"../../../geometry/Polygon.js\";var y;const n={base:t,key:\"type\",typeMap:{extent:m,polygon:i}};let c=y=class extends p{constructor(){super(...arguments),this.type=\"geometry\",this.geometry=null}get version(){return(this._get(\"version\")||0)+1}clone(){return new y({geometry:this.geometry.clone()})}};e([r({types:n,json:{read:s,write:!0}})],c.prototype,\"geometry\",void 0),e([r({readOnly:!0})],c.prototype,\"version\",null),c=y=e([o(\"esri.views.layers.support.Geometry\")],c);var a=c;export{a as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport{_ as r}from\"../../../chunks/tslib.es6.js\";import{property as o}from\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/has.js\";import\"../../../core/accessorSupport/ensureType.js\";import\"../../../core/Logger.js\";import{subclass as s}from\"../../../core/accessorSupport/decorators/subclass.js\";import e from\"./ClipArea.js\";let t=class extends e{constructor(){super(...arguments),this.type=\"path\",this.path=[]}get version(){return(this._get(\"version\")||0)+1}};r([o({type:[[[Number]]],json:{write:!0}})],t.prototype,\"path\",void 0),r([o({readOnly:!0})],t.prototype,\"version\",null),t=r([s(\"esri.views.layers.support.Path\")],t);var p=t;export{p as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport{_ as t}from\"../../../chunks/tslib.es6.js\";import e from\"../../../core/Collection.js\";import{referenceSetter as s}from\"../../../core/collectionUtils.js\";import{init as i}from\"../../../core/watchUtils.js\";import{property as r}from\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/has.js\";import\"../../../core/accessorSupport/ensureType.js\";import\"../../../core/Logger.js\";import{subclass as o}from\"../../../core/accessorSupport/decorators/subclass.js\";import{Container as a}from\"../engine/Container.js\";import p from\"../../layers/support/ClipArea.js\";import h from\"../../layers/support/ClipRect.js\";import n from\"../../layers/support/Geometry.js\";import d from\"../../layers/support/Path.js\";const c=e.ofType({key:\"type\",base:p,typeMap:{rect:h,path:d,geometry:n}}),l=e=>{let p=class extends e{constructor(){super(...arguments),this.clips=new c,this.moving=!1,this.attached=!1,this.lastUpdateId=-1,this.updateRequested=!1}initialize(){var t;this.container||(this.container=new a),this.container.fadeTransitionEnabled=!0,this.container.opacity=0,this.container.clips=this.clips,this.handles.add([i(this,\"suspended\",(t=>{this.container&&(this.container.visible=!t),this.view&&!t&&this.updateRequested&&this.view.requestUpdate()}),!0),i(this,[\"layer.opacity\",\"container\"],(()=>{var t,e;this.container&&(this.container.opacity=null!=(t=null==(e=this.layer)?void 0:e.opacity)?t:1)}),!0),i(this,[\"layer.blendMode\"],(t=>{this.container&&(this.container.blendMode=t)}),!0),i(this,[\"layer.effect\"],(t=>{this.container&&(this.container.effect=t)}),!0),this.clips.on(\"change\",(()=>{this.container.clips=this.clips,this.notifyChange(\"clips\")}))]),null!=(t=this.view)&&t.whenLayerView?this.view.whenLayerView(this.layer).then((t=>{t!==this||this.attached||this.destroyed||(this.attach(),this.requestUpdate(),this.attached=!0)}),(()=>{})):this.when().then((()=>{this.attached||this.destroyed||(this.attach(),this.requestUpdate(),this.attached=!0)}),(()=>{}))}destroy(){this.attached&&(this.detach(),this.attached=!1),this.handles.remove(\"initialize\"),this.updateRequested=!1}get updating(){return!this.attached||!this.suspended&&(this.updateRequested||this.isUpdating())}isVisibleAtScale(t){let e=!0;const s=this.layer,i=s.minScale,r=s.maxScale;if(null!=i&&null!=r){let s=!i,o=!r;!s&&t<=i&&(s=!0),!o&&t>=r&&(o=!0),e=s&&o}return e}requestUpdate(){this.destroyed||this.updateRequested||(this.updateRequested=!0,this.suspended||this.view.requestUpdate())}processUpdate(t){!this.isFulfilled()||this.isResolved()?(this._set(\"updateParameters\",t),this.updateRequested&&!this.suspended&&(this.updateRequested=!1,this.update(t))):this.updateRequested=!1}isUpdating(){return!1}isRendering(){return!1}canResume(){return!!super.canResume()&&this.isVisibleAtScale(this.view.scale)}};return t([r({type:c,set(t){const e=s(t,this._get(\"clips\"),c);this._set(\"clips\",e)}})],p.prototype,\"clips\",void 0),t([r()],p.prototype,\"moving\",void 0),t([r()],p.prototype,\"attached\",void 0),t([r()],p.prototype,\"container\",void 0),t([r()],p.prototype,\"suspended\",void 0),t([r({readOnly:!0})],p.prototype,\"updateParameters\",void 0),t([r()],p.prototype,\"updateRequested\",void 0),t([r()],p.prototype,\"updating\",null),t([r()],p.prototype,\"view\",void 0),p=t([o(\"esri.views.2d.layers.LayerView2D\")],p),p};export{l as LayerView2DMixin};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport e from\"../../../../core/Error.js\";import s from\"../../../../core/Logger.js\";import{WGLVVFlag as i}from\"./enums.js\";import{isNumber as r}from\"./Utils.js\";const l=s.getLogger(\"esri.views.2d.engine.webgl\");function o(s){return r(s.minDataValue)&&r(s.maxDataValue)&&null!=s.minSize&&null!=s.maxSize?i.SIZE_MINMAX_VALUE:(s.expression&&\"view.scale\"===s.expression||s.valueExpression&&\"$view.scale\"===s.valueExpression)&&Array.isArray(s.stops)?i.SIZE_SCALE_STOPS:(null!=s.field||s.expression&&\"view.scale\"!==s.expression||s.valueExpression&&\"$view.scale\"!==s.valueExpression)&&(Array.isArray(s.stops)||\"levels\"in s&&s.levels)?i.SIZE_FIELD_STOPS:(null!=s.field||s.expression&&\"view.scale\"!==s.expression||s.valueExpression&&\"$view.scale\"!==s.valueExpression)&&null!=s.valueUnit?i.SIZE_UNIT_VALUE:(l.error(new e(\"mapview-bad-type\",\"Found invalid size VisualVariable\",s)),i.NONE)}export{o as getTypeOfSizeVisualVariable};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nfunction t(t,e){return e?\"xoffset\"in e&&e.xoffset?Math.max(t,Math.abs(e.xoffset)):\"yoffset\"in e&&e.yoffset?Math.max(t,Math.abs(e.yoffset||0)):t:t}function e(t){let e=0,n=0;for(let r=0;r<t.length;r++){const s=t[r].size;\"number\"==typeof s&&(e+=s,n++)}return e/n}function n(t,n){return\"number\"==typeof t?t:t&&t.stops&&t.stops.length?e(t.stops):n}function r(t,e){if(!e)return t;const r=e.filter((t=>\"size\"===t.type)).map((e=>{const{maxSize:r,minSize:s}=e;return(n(r,t)+n(s,t))/2}));let s=0;const o=r.length;if(0===o)return t;for(let n=0;n<o;n++)s+=r[n];const f=Math.floor(s/o);return Math.max(f,t)}function s(e){const n=e&&e.renderer,s=\"touch\"===(e&&e.event&&e.event.pointerType)?9:6;if(!n)return s;const o=\"visualVariables\"in n?r(s,n.visualVariables):s;if(\"simple\"===n.type)return t(o,n.symbol);if(\"unique-value\"===n.type){let e=o;return n.uniqueValueInfos.forEach((n=>{e=t(e,n.symbol)})),e}if(\"class-breaks\"===n.type){let e=o;return n.classBreakInfos.forEach((n=>{e=t(e,n.symbol)})),e}return n.type,o}export{s as calculateTolerance};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport\"../../geometry.js\";import{isSome as e,isNone as t}from\"../../core/maybe.js\";import{getMetersPerUnitForSR as r}from\"../../core/unitUtils.js\";import{calculateTolerance as n}from\"../../renderers/support/clickToleranceUtils.js\";import i from\"../../geometry/Extent.js\";function a(t,n,a,o=new i){let s;if(\"2d\"===a.type)s=n*a.resolution;else if(\"3d\"===a.type){const i=a.overlayPixelSizeInMapUnits(t),o=a.basemapSpatialReference;s=e(o)&&!o.equals(a.spatialReference)?r(o)/r(a.spatialReference):n*i}const m=t.x-s,p=t.y-s,c=t.x+s,l=t.y+s,{spatialReference:f}=a;return o.xmin=Math.min(m,c),o.ymin=Math.min(p,l),o.xmax=Math.max(m,c),o.ymax=Math.max(p,l),o.spatialReference=f,o}function o(e,r,i){const o=i.toMap(e);if(t(o))return!1;return a(o,n(),i,s).intersects(r)}const s=new i;export{a as createQueryGeometry,o as intersectsDrapedGeometry};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nfunction o(o){var n;const l=o.layer;if(\"floorInfo\"in l&&null!=(n=l.floorInfo)&&n.floorField&&\"floors\"in o.view){return r(o.view.floors,l.floorInfo.floorField)}return null}function n(o,n){var l;return\"floorInfo\"in n&&null!=(l=n.floorInfo)&&l.floorField?r(o,n.floorInfo.floorField):null}function l(o,n){const{definitionExpression:l}=n;return o?l?`(${l}) AND (${o})`:o:l}function r(o,n){if(null==o||!o.length)return null;const l=o.filter((o=>\"\"!==o)).map((o=>`'${o}'`));return l.push(\"''\"),`${n} IN (${l.join(\",\")}) OR ${n} IS NULL`}export{l as combineFloorsDefinitionExpression,o as getFloorFilterClause,n as getLayerFloorFilterClause};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport{_ as r}from\"../../chunks/tslib.es6.js\";import e from\"../../core/Logger.js\";import{isAbortError as s}from\"../../core/promiseUtils.js\";import{on as o}from\"../../core/watchUtils.js\";import{property as t}from\"../../core/accessorSupport/decorators/property.js\";import\"../../core/has.js\";import\"../../core/accessorSupport/ensureType.js\";import{subclass as i}from\"../../core/accessorSupport/decorators/subclass.js\";const a=a=>{let c=class extends a{initialize(){this.handles.add(o(this,\"layer\",\"refresh\",(()=>{this.doRefresh().catch((r=>{s(r)||e.getLogger(this.declaredClass).error(r)}))})),\"RefreshableLayerView\")}};return r([t()],c.prototype,\"layer\",void 0),c=r([i(\"esri.layers.mixins.RefreshableLayerView\")],c),c};export{a as RefreshableLayerView,a as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport{isSome as e}from\"../../../core/maybe.js\";import{getFeatureEditFields as p,fixFields as l}from\"../../../layers/support/fieldUtils.js\";async function t(t,d=t.popupTemplate){if(!e(d))return[];const i=await d.getRequiredFields(t.fieldsIndex),{lastEditInfoEnabled:n}=d,{objectIdField:s,typeIdField:a,globalIdField:o,relationships:u}=t;if(i.includes(\"*\"))return[\"*\"];const f=n?await p(t):[],r=l(t.fieldsIndex,[...i,...f]);return a&&r.push(a),r&&s&&t.fieldsIndex.has(s)&&-1===r.indexOf(s)&&r.push(s),r&&o&&t.fieldsIndex.has(o)&&-1===r.indexOf(o)&&r.push(o),u&&u.forEach((e=>{const{keyField:p}=e;r&&p&&t.fieldsIndex.has(p)&&-1===r.indexOf(p)&&r.push(p)})),r}function d(p,l){return p.popupTemplate?p.popupTemplate:e(l)&&l.defaultPopupTemplateEnabled&&e(p.defaultPopupTemplate)?p.defaultPopupTemplate:null}export{d as getFetchPopupTemplate,t as getRequiredFields};\n"],"sourceRoot":""}