(this.webpackJsonpimaps=this.webpackJsonpimaps||[]).push([[157],{1312:function(e,t,n){"use strict";n.r(t),n.d(t,"work",(function(){return J})),n.d(t,"wrappedWork",(function(){return H}));var r=n(711);function i(e,t,n){const r=t/3,i=new Uint32Array(n+1),s=new Uint32Array(n+1),o=(e,t)=>{e<t?i[e+1]++:s[t+1]++};for(let b=0;b<r;b++){const t=e[3*b],n=e[3*b+1],r=e[3*b+2];o(t,n),o(n,r),o(r,t)}let c=0,a=0;for(let b=0;b<n;b++){const e=i[b+1],t=s[b+1];i[b+1]=c,s[b+1]=a,c+=e,a+=t}const u=new Uint32Array(6*r),f=i[n],l=(e,t,n)=>{if(e<t){const r=i[e+1]++;u[2*r]=t,u[2*r+1]=n}else{const r=s[t+1]++;u[2*f+2*r]=e,u[2*f+2*r+1]=n}};for(let b=0;b<r;b++){const t=e[3*b],n=e[3*b+1],r=e[3*b+2];l(t,n,b),l(n,r,b),l(r,t,b)}const d=(e,t)=>{const n=2*e,r=t-e;for(let i=1;i<r;i++){const e=u[n+2*i],t=u[n+2*i+1];let r=i-1;for(;r>=0&&u[n+2*r]>e;r--)u[n+2*r+2]=u[n+2*r],u[n+2*r+3]=u[n+2*r+1];u[n+2*r+2]=e,u[n+2*r+3]=t}};for(let b=0;b<n;b++)d(i[b],i[b+1]),d(f+s[b],f+s[b+1]);const h=new Int32Array(3*r),p=(t,n)=>t===e[3*n]?0:t===e[3*n+1]?1:t===e[3*n+2]?2:-1,g=(e,t)=>{const n=p(e,t);h[3*t+n]=-1},m=(e,t,n,r)=>{const i=p(e,t);h[3*t+i]=r;const s=p(n,r);h[3*r+s]=t};for(let b=0;b<n;b++){let e=i[b];const t=i[b+1];let n=s[b];const r=s[b+1];for(;e<t&&n<r;){const t=u[2*e],r=u[2*f+2*n];t===r?(m(b,u[2*e+1],r,u[2*f+2*n+1]),e++,n++):t<r?(g(b,u[2*e+1]),e++):(g(r,u[2*f+2*n+1]),n++)}for(;e<t;)g(b,u[2*e+1]),e++;for(;n<r;)g(u[2*f+2*n],u[2*f+2*n+1]),n++}return h}var s=n(335),o=n(341);function c(e,t){return t.push(e.buffer),{buffer:e.buffer,layout:a(e.layout)}}function a(e){const t=new Array;return e.fields.forEach(((e,n)=>{const r={...e,constructor:f(e.constructor)};t.push([n,r])})),{stride:e.stride,fields:t,fieldNames:e.fieldNames}}const u=[s.a,s.m,s.u,s.C,s.f,s.h,s.b,s.n,s.v,s.D,s.g,s.i,s.l,s.t,s.B,s.J,s.j,s.r,s.z,s.H,s.k,s.s,s.A,s.I,s.e,s.q,s.y,s.G,s.c,s.o,s.w,s.E,s.d,s.p,s.x,s.F];function f(e){return`${e.ElementType}_${e.ElementCount}`}const l=new Map;u.forEach((e=>l.set(f(e),e)));var d=n(532);const h=Object(o.a)().vec3f("position").u16("componentIndex").u16("u16padding"),p=Object(o.a)().vec2u8("sideness"),g=(Object(d.a)(p),Object(o.a)().vec3f("position0").vec3f("position1").u16("componentIndex").u8("variantOffset",{glNormalized:!0}).u8("variantStroke").u8("variantExtension",{glNormalized:!0}).u8("u8padding",{glPadding:!0}).u16("u16padding",{glPadding:!0})),m=g.clone().vec3f("normal"),b=g.clone().vec3f("normalA").vec3f("normalB");new Map([["position0",0],["position1",1],["componentIndex",2],["variantOffset",3],["variantStroke",4],["variantExtension",5],["normal",6],["normalA",6],["normalB",7],["sideness",8]]);var w=n(422),v=n(100),y=n(98);class O{updateSettings(e){this.settings=e,this.edgeHashFunction=e.reducedPrecision?N:I}write(e,t,n){const r=this.edgeHashFunction(n);k.seed=r;const i=k.getIntRange(0,255),s=k.getIntRange(0,this.settings.variants-1),o=k.getFloat(),c=255*(.5*function(e,t){const n=e<0?-1:1;return Math.abs(e)**t*n}(-(1-Math.min(o/.7,1))+Math.max(0,o-.7)/(1-.7),1.2)+.5);e.position0.setVec(t,n.position0),e.position1.setVec(t,n.position1),e.componentIndex.set(t,n.componentIndex),e.variantOffset.set(t,i),e.variantStroke.set(t,s),e.variantExtension.set(t,c)}trim(e,t){return e.slice(0,t)}}const j=new Float32Array(6),A=new Uint32Array(j.buffer),F=new Uint32Array(1);function I(e){const t=j;t[0]=e.position0[0],t[1]=e.position0[1],t[2]=e.position0[2],t[3]=e.position1[0],t[4]=e.position1[1],t[5]=e.position1[2],F[0]=5381;for(let n=0;n<A.length;n++)F[0]=31*F[0]+A[n];return F[0]}function N(e){const t=j;t[0]=E(e.position0[0]),t[1]=E(e.position0[1]),t[2]=E(e.position0[2]),t[3]=E(e.position1[0]),t[4]=E(e.position1[1]),t[5]=E(e.position1[2]),F[0]=5381;for(let n=0;n<A.length;n++)F[0]=31*F[0]+A[n];return F[0]}function E(e){return Math.round(1e4*e)/1e4}class L{constructor(){this.commonWriter=new O}updateSettings(e){this.commonWriter.updateSettings(e)}allocate(e){return m.createBuffer(e)}write(e,t,n){this.commonWriter.write(e,t,n),Object(v.f)(S,n.faceNormal0,n.faceNormal1),Object(v.r)(S,S),e.normal.setVec(t,S)}trim(e,t){return this.commonWriter.trim(e,t)}}L.Layout=m,L.glLayout=Object(d.a)(m,1);class U{constructor(){this.commonWriter=new O}updateSettings(e){this.commonWriter.updateSettings(e)}allocate(e){return b.createBuffer(e)}write(e,t,n){this.commonWriter.write(e,t,n),e.normalA.setVec(t,n.faceNormal0),e.normalB.setVec(t,n.faceNormal1)}trim(e,t){return this.commonWriter.trim(e,t)}}U.Layout=b,U.glLayout=Object(d.a)(b,1);const S=Object(y.e)(),k=new w.a;var x=n(171),V=n(106),B=n(307);const M=-1;function D(e,t,n,r=q){const i=e.vertices.position,s=e.vertices.componentIndex,o=Object(V.g)(r.anglePlanar),c=Object(V.g)(r.angleSignificantEdge),a=Math.cos(c),u=Math.cos(o),f=z.edge,l=f.position0,d=f.position1,h=f.faceNormal0,p=f.faceNormal1,g=function(e){const t=e.faces.length/3,n=e.vertices.position,r=e.faces,i=P.v0,s=P.v1,o=P.v2,c=new Float32Array(3*t);for(let a=0;a<t;a++){const e=r[3*a+0],t=r[3*a+1],u=r[3*a+2];n.getVec(e,i),n.getVec(t,s),n.getVec(u,o),Object(v.j)(s,s,i),Object(v.j)(o,o,i),Object(v.g)(i,s,o),Object(v.r)(i,i),c[3*a+0]=i[0],c[3*a+1]=i[1],c[3*a+2]=i[2]}return c}(e),m=function(e){const t=e.faces.length/3,n=e.faces,r=e.neighbors;let i=0;for(let c=0;c<t;c++){const e=r[3*c+0],t=r[3*c+1],s=r[3*c+2],o=n[3*c+0],a=n[3*c+1],u=n[3*c+2];i+=e===M||o<a?1:0,i+=t===M||a<u?1:0,i+=s===M||u<o?1:0}const s=new Int32Array(4*i);let o=0;for(let c=0;c<t;c++){const e=r[3*c+0],t=r[3*c+1],i=r[3*c+2],a=n[3*c+0],u=n[3*c+1],f=n[3*c+2];(e===M||a<u)&&(s[o++]=a,s[o++]=u,s[o++]=c,s[o++]=e),(t===M||u<f)&&(s[o++]=u,s[o++]=f,s[o++]=c,s[o++]=t),(i===M||f<a)&&(s[o++]=f,s[o++]=a,s[o++]=c,s[o++]=i)}return s}(e),b=m.length/4,w=t.allocate(b);let y=0;const O=b,j=n.allocate(O);let A=0,F=0,I=0;const N=Object(x.h)(0,b),E=new Float32Array(b);Object(B.b)(E,((e,t,n)=>{i.getVec(m[4*t+0],l),i.getVec(m[4*t+1],d),n[t]=Object(v.m)(l,d)})),N.sort(((e,t)=>E[t]-E[e]));const L=new Array,U=new Array;for(let x=0;x<b;x++){const e=N[x],r=E[e],c=m[4*e+0],b=m[4*e+1],O=m[4*e+2],S=m[4*e+3],k=S===M;if(i.getVec(c,l),i.getVec(b,d),k)Object(v.w)(h,g[3*O+0],g[3*O+1],g[3*O+2]),Object(v.k)(p,h),f.componentIndex=s.get(c),f.cosAngle=Object(v.h)(h,p);else{if(Object(v.w)(h,g[3*O+0],g[3*O+1],g[3*O+2]),Object(v.w)(p,g[3*S+0],g[3*S+1],g[3*S+2]),f.componentIndex=s.get(c),f.cosAngle=Object(v.h)(h,p),W(f,u))continue;f.cosAngle<-.9999&&Object(v.k)(p,h)}F+=r,I++,k||T(f,a)?(t.write(w,y++,f),L.push(r)):C(f,o)&&(n.write(j,A++,f),U.push(r))}const S=new Float32Array(L.reverse()),k=new Float32Array(U.reverse());return{regular:{instancesData:t.trim(w,y),lodInfo:{lengths:S}},silhouette:{instancesData:n.trim(j,A),lodInfo:{lengths:k}},averageEdgeLength:F/I}}function T(e,t){return e.cosAngle<t}function W(e,t){return e.cosAngle>t}function C(e,t){const n=Object(V.b)(e.cosAngle),r=z.fwd,i=z.ortho;return Object(v.v)(r,e.position1,e.position0),n*(Object(v.h)(Object(v.g)(i,e.faceNormal0,e.faceNormal1),r)>0?-1:1)>t}const z={edge:{position0:Object(y.e)(),position1:Object(y.e)(),faceNormal0:Object(y.e)(),faceNormal1:Object(y.e)(),componentIndex:0,cosAngle:0},ortho:Object(y.e)(),fwd:Object(y.e)()},P={v0:Object(y.e)(),v1:Object(y.e)(),v2:Object(y.e)()},q={anglePlanar:4,angleSignificantEdge:35};async function H(e){const t=function(e){return{data:h.createView(e.dataBuffer),indices:"Uint32Array"===e.indicesType?new Uint32Array(e.indicesBuffer):"Uint16Array"===e.indicesType?new Uint16Array(e.indicesBuffer):void 0,indicesLength:e.indicesLength,writerSettings:e.writerSettings,skipDeduplicate:e.skipDeduplicate}}(e),n=J(t),r=[t.data.buffer];return{result:R(n,r),transferList:r}}function J(e){const t=function(e,t,n,s){if(t)return{faces:n,facesLength:s,neighbors:i(n,s,e.count),vertices:e};const o=Object(r.a)(e.buffer,e.stride/4,{originalIndices:n,originalIndicesLength:s}),c=i(o.indices,s,o.uniqueCount);return{faces:o.indices,facesLength:o.indices.length,neighbors:c,vertices:h.createView(o.buffer)}}(e.data,e.skipDeduplicate,e.indices,e.indicesLength);return G.updateSettings(e.writerSettings),$.updateSettings(e.writerSettings),D(t,G,$)}function R(e,t){return t.push(e.regular.lodInfo.lengths.buffer),t.push(e.silhouette.lodInfo.lengths.buffer),{regular:{instancesData:c(e.regular.instancesData,t),lodInfo:{lengths:e.regular.lodInfo.lengths.buffer}},silhouette:{instancesData:c(e.silhouette.instancesData,t),lodInfo:{lengths:e.silhouette.lodInfo.lengths.buffer}},averageEdgeLength:e.averageEdgeLength}}const G=new L,$=new U},341:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(335),i=n(548);class s{constructor(e,t){this.layout=e,this.buffer="number"==typeof t?new ArrayBuffer(t*e.stride):t;for(const n of e.fieldNames){const t=e.fields.get(n);this[n]=new t.constructor(this.buffer,t.offset,this.stride)}}get stride(){return this.layout.stride}get count(){return this.buffer.byteLength/this.stride}get byteLength(){return this.buffer.byteLength}getField(e,t){const n=this[e];return n&&n.elementCount===t.ElementCount&&n.elementType===t.ElementType?n:null}slice(e,t){return new s(this.layout,this.buffer.slice(e*this.stride,t*this.stride))}copyFrom(e,t,n,r){const i=this.stride;if(i%4==0){const s=new Uint32Array(e.buffer,t*i,r*i/4);new Uint32Array(this.buffer,n*i,r*i/4).set(s)}else{const s=new Uint8Array(e.buffer,t*i,r*i);new Uint8Array(this.buffer,n*i,r*i).set(s)}}}class o{constructor(){this.stride=0,this.fields=new Map,this.fieldNames=[]}vec2f(e,t){return this.appendField(e,r.m,t),this}vec2f64(e,t){return this.appendField(e,r.n,t),this}vec3f(e,t){return this.appendField(e,r.u,t),this}vec3f64(e,t){return this.appendField(e,r.v,t),this}vec4f(e,t){return this.appendField(e,r.C,t),this}vec4f64(e,t){return this.appendField(e,r.D,t),this}mat3f(e,t){return this.appendField(e,r.f,t),this}mat3f64(e,t){return this.appendField(e,r.g,t),this}mat4f(e,t){return this.appendField(e,r.h,t),this}mat4f64(e,t){return this.appendField(e,r.i,t),this}vec4u8(e,t){return this.appendField(e,r.J,t),this}f32(e,t){return this.appendField(e,r.a,t),this}f64(e,t){return this.appendField(e,r.b,t),this}u8(e,t){return this.appendField(e,r.l,t),this}u16(e,t){return this.appendField(e,r.j,t),this}i8(e,t){return this.appendField(e,r.e,t),this}vec2i8(e,t){return this.appendField(e,r.q,t),this}vec2i16(e,t){return this.appendField(e,r.o,t),this}vec2u8(e,t){return this.appendField(e,r.t,t),this}vec4u16(e,t){return this.appendField(e,r.H,t),this}u32(e,t){return this.appendField(e,r.k,t),this}appendField(e,t,n){const r=t.ElementCount*Object(i.a)(t.ElementType),s=this.stride;this.fields.set(e,{size:r,constructor:t,offset:s,optional:n}),this.stride+=r,this.fieldNames.push(e)}alignTo(e){return this.stride=Math.floor((this.stride+e-1)/e)*e,this}hasField(e){return this.fieldNames.indexOf(e)>=0}createBuffer(e){return new s(this,e)}createView(e){return new s(this,e)}clone(){const e=new o;return e.stride=this.stride,e.fields=new Map,this.fields.forEach(((t,n)=>e.fields.set(n,t))),e.fieldNames=this.fieldNames.slice(),e.BufferType=this.BufferType,e}}function c(){return new o}},532:function(e,t,n){"use strict";function r(e,t=0){const n=e.stride;return e.fieldNames.filter((t=>{const n=e.fields.get(t).optional;return!(n&&n.glPadding)})).map((r=>{const s=e.fields.get(r),o=s.constructor.ElementCount,c=i(s.constructor.ElementType),a=s.offset,u=!(!s.optional||!s.optional.glNormalized);return{name:r,stride:n,count:o,type:c,offset:a,normalized:u,divisor:t}}))}function i(e){const t=s[e];if(t)return t;throw new Error("BufferType not supported in WebGL")}n.d(t,"a",(function(){return r}));const s={u8:5121,u16:5123,u32:5125,i8:5120,i16:5122,i32:5124,f32:5126}},548:function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return s})),n.d(t,"c",(function(){return i})),n.d(t,"d",(function(){return o}));n(76);function r(e){switch(e){case"u8":return 1;case"u16":return 2;case"u32":return 4;case"i8":return 1;case"i16":return 2;case"i32":case"f32":return 4;case"f64":return 8;default:return}}function i(e){switch(e){case"u8":case"u16":case"u32":return!1;case"i8":case"i16":case"i32":case"f32":case"f64":return!0;default:return}}function s(e){switch(e){case"u8":case"u16":case"u32":case"i8":case"i16":case"i32":return!0;case"f32":case"f64":return!1;default:return}}function o(e){switch(e){case"u8":return 255;case"u16":return 65535;case"u32":return 4294967295;case"i8":return 127;case"i16":return 32767;case"i32":return 2147483647;case"f32":return 3402823e32;case"f64":return 179769e303;default:return}}},711:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(106);function i(e,t,n){var i;const u=e.byteLength/(4*t),f=new Uint32Array(e,0,u*t);let l=new Uint32Array(u);const d=null!=(i=null==n?void 0:n.minReduction)?i:0,h=(null==n?void 0:n.originalIndices)||null,p=h?h.length:0,g=(null==n?void 0:n.componentOffsets)||null;let m=0;if(g)for(let r=0;r<g.length-1;r++){const e=g[r+1]-g[r];e>m&&(m=e)}else m=u;const b=Math.floor(1.1*m)+1;(null==a||a.length<2*b)&&(a=new Uint32Array(Object(r.p)(2*b)));for(let r=0;r<2*b;r++)a[r]=0;let w=0;const v=!!g&&!!h,y=v?p:u,O=v?new Uint32Array(p):null,j=1.96;let A=0!==d?Math.ceil(4*j*j/(d*d)*d*(1-d)):y,F=1,I=g?g[1]:y;for(let r=0;r<y;r++){if(r===A){const e=1-w/r;if(e+j*Math.sqrt(e*(1-e)/r)<d)return null;A*=2}if(r===I){for(let e=0;e<2*b;e++)a[e]=0;if(h)for(let e=g[F-1];e<g[F];e++)O[e]=l[h[e]];I=g[++F]}const e=v?h[r]:r,n=e*t,i=c(f,n,t);let o=i%b,u=w;for(;0!==a[2*o+1];){if(a[2*o]===i){const e=a[2*o+1]-1;if(s(f,n,e*t,t)){u=l[e];break}}o++,o>=b&&(o-=b)}u===w&&(a[2*o]=i,a[2*o+1]=e+1,w++),l[e]=u}if(0!==d&&1-w/u<d)return null;if(v){for(let e=g[F-1];e<O.length;e++)O[e]=l[h[e]];l=O}const N=new Uint32Array(t*w);w=0;for(let r=0;r<y;r++)l[r]===w&&(o(f,(v?h[r]:r)*t,N,w*t,t),w++);if(h&&!v){const e=new Uint32Array(p);for(let t=0;t<e.length;t++)e[t]=l[h[t]];l=e}return{buffer:N.buffer,indices:l,uniqueCount:w}}function s(e,t,n,r){for(let i=0;i<r;i++)if(e[t+i]!==e[n+i])return!1;return!0}function o(e,t,n,r,i){for(let s=0;s<i;s++)n[r+s]=e[t+s]}function c(e,t,n){let r=0;for(let i=0;i<n;i++)r=e[t+i]+r|0,r=r+(r<<11)+(r>>>2)|0;return r>>>0}let a=null}}]);
//# sourceMappingURL=157.ef56d1f9.chunk.js.map