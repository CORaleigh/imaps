"use strict";(globalThis.webpackChunkimaps=globalThis.webpackChunkimaps||[]).push([[2183],{79347:(e,t,r)=>{r.d(t,{e:()=>o});var n,s,i,a={exports:{}};n=a,s=function(){function e(e,r,s){s=s||2;var i,a,o,c,u,h,f,y=r&&r.length,d=y?r[0]*s:e.length,p=t(e,0,d,s,!0),v=[];if(!p||p.next===p.prev)return v;if(y&&(p=l(e,r,p,s)),e.length>80*s){i=o=e[0],a=c=e[1];for(var m=s;m<d;m+=s)(u=e[m])<i&&(i=u),(h=e[m+1])<a&&(a=h),u>o&&(o=u),h>c&&(c=h);f=0!==(f=Math.max(o-i,c-a))?1/f:0}return n(p,v,s,i,a,f),v}function t(e,t,r,n,s){var i,a;if(s===L(e,t,r,n)>0)for(i=t;i<r;i+=n)a=w(i,e[i],e[i+1],a);else for(i=r-n;i>=t;i-=n)a=w(i,e[i],e[i+1],a);if(a&&x(a,a.next)){var o=a.next;T(a),a=o}return a}function r(e,t){if(!e)return e;t||(t=e);var r,n=e;do{if(r=!1,n.steiner||!x(n,n.next)&&0!==g(n.prev,n,n.next))n=n.next;else{var s=n.prev;if(T(n),(n=t=s)===n.next)break;r=!0}}while(r||n!==t);return t}function n(e,t,l,c,u,h,f){if(e){!f&&h&&y(e,c,u,h);for(var d,p,v=e;e.prev!==e.next;)if(d=e.prev,p=e.next,h?i(e,c,u,h):s(e))t.push(d.i/l),t.push(e.i/l),t.push(p.i/l),T(e),e=p.next,v=p.next;else if((e=p)===v){f?1===f?n(e=a(r(e),t,l),t,l,c,u,h,2):2===f&&o(e,t,l,c,u,h):n(r(e),t,l,c,u,h,1);break}}}function s(e){var t=e.prev,r=e,n=e.next;if(g(t,r,n)>=0)return!1;for(var s=e.next.next;s!==e.prev;){if(v(t.x,t.y,r.x,r.y,n.x,n.y,s.x,s.y)&&g(s.prev,s,s.next)>=0)return!1;s=s.next}return!0}function i(e,t,r,n){var s=e.prev,i=e,a=e.next;if(g(s,i,a)>=0)return!1;for(var o=s.x<i.x?s.x<a.x?s.x:a.x:i.x<a.x?i.x:a.x,l=s.y<i.y?s.y<a.y?s.y:a.y:i.y<a.y?i.y:a.y,c=s.x>i.x?s.x>a.x?s.x:a.x:i.x>a.x?i.x:a.x,u=s.y>i.y?s.y>a.y?s.y:a.y:i.y>a.y?i.y:a.y,h=d(o,l,t,r,n),f=d(c,u,t,r,n),y=e.prevZ,p=e.nextZ;y&&y.z>=h&&p&&p.z<=f;){if(y!==e.prev&&y!==e.next&&v(s.x,s.y,i.x,i.y,a.x,a.y,y.x,y.y)&&g(y.prev,y,y.next)>=0)return!1;if(y=y.prevZ,p!==e.prev&&p!==e.next&&v(s.x,s.y,i.x,i.y,a.x,a.y,p.x,p.y)&&g(p.prev,p,p.next)>=0)return!1;p=p.nextZ}for(;y&&y.z>=h;){if(y!==e.prev&&y!==e.next&&v(s.x,s.y,i.x,i.y,a.x,a.y,y.x,y.y)&&g(y.prev,y,y.next)>=0)return!1;y=y.prevZ}for(;p&&p.z<=f;){if(p!==e.prev&&p!==e.next&&v(s.x,s.y,i.x,i.y,a.x,a.y,p.x,p.y)&&g(p.prev,p,p.next)>=0)return!1;p=p.nextZ}return!0}function a(e,t,n){var s=e;do{var i=s.prev,a=s.next.next;!x(i,a)&&_(i,s,s.next,a)&&M(i,a)&&M(a,i)&&(t.push(i.i/n),t.push(s.i/n),t.push(a.i/n),T(s),T(s.next),s=e=a),s=s.next}while(s!==e);return r(s)}function o(e,t,s,i,a,o){var l=e;do{for(var c=l.next.next;c!==l.prev;){if(l.i!==c.i&&m(l,c)){var u=I(l,c);return l=r(l,l.next),u=r(u,u.next),n(l,t,s,i,a,o),void n(u,t,s,i,a,o)}c=c.next}l=l.next}while(l!==e)}function l(e,n,s,i){var a,o,l,u=[];for(a=0,o=n.length;a<o;a++)(l=t(e,n[a]*i,a<o-1?n[a+1]*i:e.length,i,!1))===l.next&&(l.steiner=!0),u.push(p(l));for(u.sort(c),a=0;a<u.length;a++)s=r(s=h(u[a],s),s.next);return s}function c(e,t){return e.x-t.x}function u(e){if(e.next.prev===e)return e;let t=e;for(;;){const r=t.next;if(r.prev===t||r===t||r===e)break;t=r}return t}function h(e,t){var n=function(e,t){var r,n=t,s=e.x,i=e.y,a=-1/0;do{if(i<=n.y&&i>=n.next.y&&n.next.y!==n.y){var o=n.x+(i-n.y)*(n.next.x-n.x)/(n.next.y-n.y);if(o<=s&&o>a){if(a=o,o===s){if(i===n.y)return n;if(i===n.next.y)return n.next}r=n.x<n.next.x?n:n.next}}n=n.next}while(n!==t);if(!r)return null;if(s===a)return r;var l,c=r,u=r.x,h=r.y,y=1/0;n=r;do{s>=n.x&&n.x>=u&&s!==n.x&&v(i<h?s:a,i,u,h,i<h?a:s,i,n.x,n.y)&&(l=Math.abs(i-n.y)/(s-n.x),M(n,e)&&(l<y||l===y&&(n.x>r.x||n.x===r.x&&f(r,n)))&&(r=n,y=l)),n=n.next}while(n!==c);return r}(e,t);if(!n)return t;var s=I(n,e),i=r(n,n.next);let a=u(s);return r(a,a.next),i=u(i),u(t===n?i:t)}function f(e,t){return g(e.prev,e,t.prev)<0&&g(t.next,e,e.next)<0}function y(e,t,r,n){var s=e;do{null===s.z&&(s.z=d(s.x,s.y,t,r,n)),s.prevZ=s.prev,s.nextZ=s.next,s=s.next}while(s!==e);s.prevZ.nextZ=null,s.prevZ=null,function(e){var t,r,n,s,i,a,o,l,c=1;do{for(r=e,e=null,i=null,a=0;r;){for(a++,n=r,o=0,t=0;t<c&&(o++,n=n.nextZ);t++);for(l=c;o>0||l>0&&n;)0!==o&&(0===l||!n||r.z<=n.z)?(s=r,r=r.nextZ,o--):(s=n,n=n.nextZ,l--),i?i.nextZ=s:e=s,s.prevZ=i,i=s;r=n}i.nextZ=null,c*=2}while(a>1)}(s)}function d(e,t,r,n,s){return(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-r)*s)|e<<8))|e<<4))|e<<2))|e<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-n)*s)|t<<8))|t<<4))|t<<2))|t<<1))<<1}function p(e){var t=e,r=e;do{(t.x<r.x||t.x===r.x&&t.y<r.y)&&(r=t),t=t.next}while(t!==e);return r}function v(e,t,r,n,s,i,a,o){return(s-a)*(t-o)-(e-a)*(i-o)>=0&&(e-a)*(n-o)-(r-a)*(t-o)>=0&&(r-a)*(i-o)-(s-a)*(n-o)>=0}function m(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!function(e,t){var r=e;do{if(r.i!==e.i&&r.next.i!==e.i&&r.i!==t.i&&r.next.i!==t.i&&_(r,r.next,e,t))return!0;r=r.next}while(r!==e);return!1}(e,t)&&(M(e,t)&&M(t,e)&&function(e,t){var r=e,n=!1,s=(e.x+t.x)/2,i=(e.y+t.y)/2;do{r.y>i!=r.next.y>i&&r.next.y!==r.y&&s<(r.next.x-r.x)*(i-r.y)/(r.next.y-r.y)+r.x&&(n=!n),r=r.next}while(r!==e);return n}(e,t)&&(g(e.prev,e,t.prev)||g(e,t.prev,t))||x(e,t)&&g(e.prev,e,e.next)>0&&g(t.prev,t,t.next)>0)}function g(e,t,r){return(t.y-e.y)*(r.x-t.x)-(t.x-e.x)*(r.y-t.y)}function x(e,t){return e.x===t.x&&e.y===t.y}function _(e,t,r,n){var s=S(g(e,t,r)),i=S(g(e,t,n)),a=S(g(r,n,e)),o=S(g(r,n,t));return s!==i&&a!==o||!(0!==s||!b(e,r,t))||!(0!==i||!b(e,n,t))||!(0!==a||!b(r,e,n))||!(0!==o||!b(r,t,n))}function b(e,t,r){return t.x<=Math.max(e.x,r.x)&&t.x>=Math.min(e.x,r.x)&&t.y<=Math.max(e.y,r.y)&&t.y>=Math.min(e.y,r.y)}function S(e){return e>0?1:e<0?-1:0}function M(e,t){return g(e.prev,e,e.next)<0?g(e,t,e.next)>=0&&g(e,e.prev,t)>=0:g(e,t,e.prev)<0||g(e,e.next,t)<0}function I(e,t){var r=new C(e.i,e.x,e.y),n=new C(t.i,t.x,t.y),s=e.next,i=t.prev;return e.next=t,t.prev=e,r.next=s,s.prev=r,n.next=r,r.prev=n,i.next=n,n.prev=i,n}function w(e,t,r,n){var s=new C(e,t,r);return n?(s.next=n.next,s.prev=n,n.next.prev=s,n.next=s):(s.prev=s,s.next=s),s}function T(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function C(e,t,r){this.i=e,this.x=t,this.y=r,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function L(e,t,r,n){for(var s=0,i=t,a=r-n;i<r;i+=n)s+=(e[a]-e[i])*(e[i+1]+e[a+1]),a=i;return s}return e.deviation=function(e,t,r,n){var s=t&&t.length,i=s?t[0]*r:e.length,a=Math.abs(L(e,0,i,r));if(s)for(var o=0,l=t.length;o<l;o++){var c=t[o]*r,u=o<l-1?t[o+1]*r:e.length;a-=Math.abs(L(e,c,u,r))}var h=0;for(o=0;o<n.length;o+=3){var f=n[o]*r,y=n[o+1]*r,d=n[o+2]*r;h+=Math.abs((e[f]-e[d])*(e[y+1]-e[f+1])-(e[f]-e[y])*(e[d+1]-e[f+1]))}return 0===a&&0===h?0:Math.abs((h-a)/a)},e.flatten=function(e){for(var t=e[0][0].length,r={vertices:[],holes:[],dimensions:t},n=0,s=0;s<e.length;s++){for(var i=0;i<e[s].length;i++)for(var a=0;a<t;a++)r.vertices.push(e[s][i][a]);s>0&&(n+=e[s-1].length,r.holes.push(n))}return r},e},void 0!==(i=s())&&(n.exports=i);const o=a.exports},22018:(e,t,r)=>{r.d(t,{a:()=>f,b:()=>i,c:()=>u,f:()=>h,i:()=>s,m:()=>a,r:()=>o,s:()=>l,t:()=>c});var n=r(26277);function s(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e[4]=0,e[5]=0,e}function i(e,t){const r=t[0],n=t[1],s=t[2],i=t[3],a=t[4],o=t[5];let l=r*i-n*s;return l?(l=1/l,e[0]=i*l,e[1]=-n*l,e[2]=-s*l,e[3]=r*l,e[4]=(s*o-i*a)*l,e[5]=(n*a-r*o)*l,e):null}function a(e,t,r){const n=t[0],s=t[1],i=t[2],a=t[3],o=t[4],l=t[5],c=r[0],u=r[1],h=r[2],f=r[3],y=r[4],d=r[5];return e[0]=n*c+i*u,e[1]=s*c+a*u,e[2]=n*h+i*f,e[3]=s*h+a*f,e[4]=n*y+i*d+o,e[5]=s*y+a*d+l,e}function o(e,t,r){const n=t[0],s=t[1],i=t[2],a=t[3],o=t[4],l=t[5],c=Math.sin(r),u=Math.cos(r);return e[0]=n*u+i*c,e[1]=s*u+a*c,e[2]=n*-c+i*u,e[3]=s*-c+a*u,e[4]=o,e[5]=l,e}function l(e,t,r){const n=t[0],s=t[1],i=t[2],a=t[3],o=t[4],l=t[5],c=r[0],u=r[1];return e[0]=n*c,e[1]=s*c,e[2]=i*u,e[3]=a*u,e[4]=o,e[5]=l,e}function c(e,t,r){const n=t[0],s=t[1],i=t[2],a=t[3],o=t[4],l=t[5],c=r[0],u=r[1];return e[0]=n,e[1]=s,e[2]=i,e[3]=a,e[4]=n*c+i*u+o,e[5]=s*c+a*u+l,e}function u(e,t){const r=Math.sin(t),n=Math.cos(t);return e[0]=n,e[1]=r,e[2]=-r,e[3]=n,e[4]=0,e[5]=0,e}function h(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=t[1],e[4]=0,e[5]=0,e}function f(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e[4]=t[0],e[5]=t[1],e}function y(e,t,r){return e[0]=t[0]-r[0],e[1]=t[1]-r[1],e[2]=t[2]-r[2],e[3]=t[3]-r[3],e[4]=t[4]-r[4],e[5]=t[5]-r[5],e}const d=a,p=y;Object.freeze(Object.defineProperty({__proto__:null,copy:function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e},identity:s,set:function(e,t,r,n,s,i,a){return e[0]=t,e[1]=r,e[2]=n,e[3]=s,e[4]=i,e[5]=a,e},invert:i,determinant:function(e){return e[0]*e[3]-e[1]*e[2]},multiply:a,rotate:o,scale:l,translate:c,fromRotation:u,fromScaling:h,fromTranslation:f,str:function(e){return"mat2d("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+")"},frob:function(e){return Math.sqrt(e[0]**2+e[1]**2+e[2]**2+e[3]**2+e[4]**2+e[5]**2+1)},add:function(e,t,r){return e[0]=t[0]+r[0],e[1]=t[1]+r[1],e[2]=t[2]+r[2],e[3]=t[3]+r[3],e[4]=t[4]+r[4],e[5]=t[5]+r[5],e},subtract:y,multiplyScalar:function(e,t,r){return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e[4]=t[4]*r,e[5]=t[5]*r,e},multiplyScalarAndAdd:function(e,t,r,n){return e[0]=t[0]+r[0]*n,e[1]=t[1]+r[1]*n,e[2]=t[2]+r[2]*n,e[3]=t[3]+r[3]*n,e[4]=t[4]+r[4]*n,e[5]=t[5]+r[5]*n,e},exactEquals:function(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]},equals:function(e,t){const r=e[0],s=e[1],i=e[2],a=e[3],o=e[4],l=e[5],c=t[0],u=t[1],h=t[2],f=t[3],y=t[4],d=t[5];return Math.abs(r-c)<=n.E*Math.max(1,Math.abs(r),Math.abs(c))&&Math.abs(s-u)<=n.E*Math.max(1,Math.abs(s),Math.abs(u))&&Math.abs(i-h)<=n.E*Math.max(1,Math.abs(i),Math.abs(h))&&Math.abs(a-f)<=n.E*Math.max(1,Math.abs(a),Math.abs(f))&&Math.abs(o-y)<=n.E*Math.max(1,Math.abs(o),Math.abs(y))&&Math.abs(l-d)<=n.E*Math.max(1,Math.abs(l),Math.abs(d))},mul:d,sub:p},Symbol.toStringTag,{value:"Module"}))},11245:(e,t,r)=>{function n(){const e=new Float32Array(6);return e[0]=1,e[3]=1,e}function s(e,t,r,n){const s=t[n],i=t[n+1];e[n]=r[0]*s+r[2]*i+r[4],e[n+1]=r[1]*s+r[3]*i+r[5]}function i(e,t,r){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:2;const o=i||t.length/a;for(let l=n;l<o;l++)s(e,t,r,l*a)}r.d(t,{c:()=>n,t:()=>i});Object.freeze(Object.defineProperty({__proto__:null,create:n,clone:function(e){const t=new Float32Array(6);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t},fromValues:function(e,t,r,n,s,i){const a=new Float32Array(6);return a[0]=e,a[1]=t,a[2]=r,a[3]=n,a[4]=s,a[5]=i,a},createView:function(e,t){return new Float32Array(e,t,6)},transform:s,transformMany:i},Symbol.toStringTag,{value:"Module"}))},88396:(e,t,r)=>{r.d(t,{a:()=>i,b:()=>a,c:()=>s,d:()=>E,e:()=>T,f:()=>f,g:()=>o,h:()=>_,i:()=>x,j:()=>d,k:()=>V,l:()=>S,m:()=>b,n:()=>g,o:()=>v,p:()=>M,q:()=>C,r:()=>w,s:()=>p,t:()=>I,u:()=>m,v:()=>y,x:()=>u,y:()=>h});var n=r(26277);function s(e,t){return e[0]=t[0],e[1]=t[1],e}function i(e,t,r){return e[0]=t,e[1]=r,e}function a(e,t,r){return e[0]=t[0]+r[0],e[1]=t[1]+r[1],e}function o(e,t,r){return e[0]=t[0]-r[0],e[1]=t[1]-r[1],e}function l(e,t,r){return e[0]=t[0]*r[0],e[1]=t[1]*r[1],e}function c(e,t,r){return e[0]=t[0]/r[0],e[1]=t[1]/r[1],e}function u(e,t,r){return e[0]=Math.min(t[0],r[0]),e[1]=Math.min(t[1],r[1]),e}function h(e,t,r){return e[0]=Math.max(t[0],r[0]),e[1]=Math.max(t[1],r[1]),e}function f(e,t,r){return e[0]=t[0]*r,e[1]=t[1]*r,e}function y(e,t,r,n){return e[0]=t[0]+r[0]*n,e[1]=t[1]+r[1]*n,e}function d(e,t){const r=t[0]-e[0],n=t[1]-e[1];return Math.sqrt(r*r+n*n)}function p(e,t){const r=t[0]-e[0],n=t[1]-e[1];return r*r+n*n}function v(e){const t=e[0],r=e[1];return Math.sqrt(t*t+r*r)}function m(e){const t=e[0],r=e[1];return t*t+r*r}function g(e,t){return e[0]=-t[0],e[1]=-t[1],e}function x(e,t){const r=t[0],n=t[1];let s=r*r+n*n;return s>0&&(s=1/Math.sqrt(s),e[0]=t[0]*s,e[1]=t[1]*s),e}function _(e,t){return e[0]*t[0]+e[1]*t[1]}function b(e,t,r){const n=t[0]*r[1]-t[1]*r[0];return e[0]=e[1]=0,e[2]=n,e}function S(e,t,r,n){const s=t[0],i=t[1];return e[0]=s+n*(r[0]-s),e[1]=i+n*(r[1]-i),e}function M(e,t,r){const n=t[0],s=t[1];return e[0]=r[0]*n+r[2]*s,e[1]=r[1]*n+r[3]*s,e}function I(e,t,r){const n=t[0],s=t[1];return e[0]=r[0]*n+r[2]*s+r[4],e[1]=r[1]*n+r[3]*s+r[5],e}function w(e,t,r,n){const s=t[0]-r[0],i=t[1]-r[1],a=Math.sin(n),o=Math.cos(n);return e[0]=s*o-i*a+r[0],e[1]=s*a+i*o+r[1],e}function T(e,t){return e[0]===t[0]&&e[1]===t[1]}function C(e,t,r,n,s){let i=t[0]-r[0],a=t[1]-r[1];const o=(n[0]*i+n[1]*a)*(s-1);return i=n[0]*o,a=n[1]*o,e[0]=t[0]+i,e[1]=t[1]+a,e}const L=v,V=o,k=l,z=c,E=d,P=p,F=m;Object.freeze(Object.defineProperty({__proto__:null,copy:s,set:i,add:a,subtract:o,multiply:l,divide:c,ceil:function(e,t){return e[0]=Math.ceil(t[0]),e[1]=Math.ceil(t[1]),e},floor:function(e,t){return e[0]=Math.floor(t[0]),e[1]=Math.floor(t[1]),e},min:u,max:h,round:function(e,t){return e[0]=Math.round(t[0]),e[1]=Math.round(t[1]),e},scale:f,scaleAndAdd:y,distance:d,squaredDistance:p,length:v,squaredLength:m,negate:g,inverse:function(e,t){return e[0]=1/t[0],e[1]=1/t[1],e},normalize:x,dot:_,cross:b,lerp:S,random:function(e,t){t=t||1;const r=2*(0,n.R)()*Math.PI;return e[0]=Math.cos(r)*t,e[1]=Math.sin(r)*t,e},transformMat2:M,transformMat2d:I,transformMat3:function(e,t,r){const n=t[0],s=t[1];return e[0]=r[0]*n+r[3]*s+r[6],e[1]=r[1]*n+r[4]*s+r[7],e},transformMat4:function(e,t,r){const n=t[0],s=t[1];return e[0]=r[0]*n+r[4]*s+r[12],e[1]=r[1]*n+r[5]*s+r[13],e},rotate:w,angle:function(e,t){const r=e[0],n=e[1],s=t[0],i=t[1];let a=r*r+n*n;a>0&&(a=1/Math.sqrt(a));let o=s*s+i*i;o>0&&(o=1/Math.sqrt(o));const l=(r*s+n*i)*a*o;return l>1?0:l<-1?Math.PI:Math.acos(l)},str:function(e){return"vec2("+e[0]+", "+e[1]+")"},exactEquals:T,equals:function(e,t){const r=e[0],s=e[1],i=t[0],a=t[1];return Math.abs(r-i)<=n.E*Math.max(1,Math.abs(r),Math.abs(i))&&Math.abs(s-a)<=n.E*Math.max(1,Math.abs(s),Math.abs(a))},projectAndScale:C,len:L,sub:V,mul:k,div:z,dist:E,sqrDist:P,sqrLen:F},Symbol.toStringTag,{value:"Module"}))},15245:(e,t,r)=>{function n(){return new Float32Array(2)}function s(e,t){const r=new Float32Array(2);return r[0]=e,r[1]=t,r}function i(){return n()}function a(){return s(1,1)}function o(){return s(1,0)}function l(){return s(0,1)}r.d(t,{c:()=>n,f:()=>s});const c=i(),u=a(),h=o(),f=l();Object.freeze(Object.defineProperty({__proto__:null,create:n,clone:function(e){const t=new Float32Array(2);return t[0]=e[0],t[1]=e[1],t},fromValues:s,createView:function(e,t){return new Float32Array(e,t,2)},zeros:i,ones:a,unitX:o,unitY:l,ZEROS:c,ONES:u,UNIT_X:h,UNIT_Y:f},Symbol.toStringTag,{value:"Module"}))},16054:(e,t,r)=>{r.d(t,{Z:()=>s});var n=r(18759);class s{constructor(e,t){this._storage=new n.WJ,this._storage.maxSize=e,t&&this._storage.registerRemoveFunc("",t)}put(e,t,r){this._storage.put(e,t,r,1)}pop(e){return this._storage.pop(e)}get(e){return this._storage.get(e)}clear(){this._storage.clearAll()}destroy(){this._storage.destroy()}get maxSize(){return this._storage.maxSize}set maxSize(e){this._storage.maxSize=e}}},71277:(e,t,r)=>{function n(e){return e=e||globalThis.location.hostname,c.some((t=>null!=e?.match(t)))}function s(e,t){return e&&(t=t||globalThis.location.hostname)?null!=t.match(i)||null!=t.match(o)?e.replace("static.arcgis.com","staticdev.arcgis.com"):null!=t.match(a)||null!=t.match(l)?e.replace("static.arcgis.com","staticqa.arcgis.com"):e:e}r.d(t,{XO:()=>n,pJ:()=>s});const i=/^devext.arcgis.com$/,a=/^qaext.arcgis.com$/,o=/^[\w-]*\.mapsdevext.arcgis.com$/,l=/^[\w-]*\.mapsqa.arcgis.com$/,c=[/^([\w-]*\.)?[\w-]*\.zrh-dev-local.esri.com$/,i,a,/^jsapps.esri.com$/,o,l]},46228:(e,t,r)=>{r.d(t,{I:()=>s,v:()=>i});var n=r(16889);function s(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const s=(0,n.uZ)(e,0,l);for(let n=0;n<4;n++)t[r+n]=Math.floor(256*c(s*a[n]))}function i(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=0;for(let n=0;n<4;n++)r+=e[t+n]*o[n];return r}const a=[1,256,65536,16777216],o=[1/256,1/65536,1/16777216,1/4294967296],l=i(new Uint8ClampedArray([255,255,255,255]));function c(e){return e-Math.floor(e)}},31027:(e,t,r)=>{function n(e,t,r,n){return function(e){return"function"==typeof e}(e)?e(t,r,n):e}function s(e){return[e.r,e.g,e.b,e.a]}function i(e,t,r){const n=e=>{let t=e.length;for(;t--;)if(!" /-,\n".includes(e.charAt(t)))return!1;return!0},s=[];let i=0,o=-1;do{if(o=t.indexOf("[",i),o>=i){if(o>i){const e=t.substr(i,o-i);s.push([e,null,n(e)])}if(i=o+1,o=t.indexOf("]",i),o>=i){if(o>i){const r=e[t.substr(i,o-i)];r&&s.push([null,r,!1])}i=o+1}}}while(-1!==o);if(i<t.length-1){const e=t.substr(i);s.push([e,null,n(e)])}return e=>{let t="",n=null;for(const r of s){const[s,i,a]=r;if(s)a?n=s:(n&&(t+=n,n=null),t+=s);else{const r=e.attributes[i];r&&(n&&(t+=n,n=null),t+=r)}}return a(t,r)}}function a(e,t){switch("string"!=typeof e&&(e=String(e)),t){case"LowerCase":return e.toLowerCase();case"Allcaps":return e.toUpperCase();default:return e}}function o(e,t,r,n,s,i){let a=!(arguments.length>6&&void 0!==arguments[6])||arguments[6];const o=t/s,l=r/i,c=Math.ceil(o/2),u=Math.ceil(l/2);for(let h=0;h<i;h++)for(let r=0;r<s;r++){const f=4*(r+(a?i-h-1:h)*s);let y=0,d=0,p=0,v=0,m=0,g=0,x=0;const _=(h+.5)*l;for(let n=Math.floor(h*l);n<(h+1)*l;n++){const s=Math.abs(_-(n+.5))/u,i=(r+.5)*o,a=s*s;for(let l=Math.floor(r*o);l<(r+1)*o;l++){let r=Math.abs(i-(l+.5))/c;const s=Math.sqrt(a+r*r);s>=-1&&s<=1&&(y=2*s*s*s-3*s*s+1,y>0&&(r=4*(l+n*t),x+=y*e[r+3],p+=y,e[r+3]<255&&(y=y*e[r+3]/250),v+=y*e[r],m+=y*e[r+1],g+=y*e[r+2],d+=y))}}n[f]=v/d,n[f+1]=m/d,n[f+2]=g/d,n[f+3]=x/p}}function l(e){return e?{r:e[0],g:e[1],b:e[2],a:e[3]/255}:{r:0,g:0,b:0,a:0}}function c(e){return e.data?.symbol}function u(e){return"CIMVectorMarker"===e.type||"CIMPictureMarker"===e.type||"CIMBarChartMarker"===e.type||"CIMCharacterMarker"===e.type||"CIMPieChartMarker"===e.type||"CIMStackedBarChartMarker"===e.type}function h(e){return"CIMGradientStroke"===e.type||"CIMPictureStroke"===e.type||"CIMSolidStroke"===e.type}function f(e){return"CIMGradientFill"===e.type||"CIMHatchFill"===e.type||"CIMPictureFill"===e.type||"CIMSolidFill"===e.type||"CIMWaterFill"===e.type}function y(e){return"CIMMarkerPlacementAlongLineRandomSize"===e.type||"CIMMarkerPlacementAlongLineSameSize"===e.type||"CIMMarkerPlacementAlongLineVariableSize"===e.type||"CIMMarkerPlacementAtExtremities"===e.type||"CIMMarkerPlacementAtMeasuredUnits"===e.type||"CIMMarkerPlacementAtRatioPositions"===e.type||"CIMMarkerPlacementOnLine"===e.type||"CIMMarkerPlacementOnVertices"===e.type}r.d(t,{Cc:()=>p,NA:()=>d,NO:()=>l,Qs:()=>i,RI:()=>v,TT:()=>o,X3:()=>a,be:()=>c,gJ:()=>y,hf:()=>n,k5:()=>f,nn:()=>s,yL:()=>h,zL:()=>u});const d=e=>isNaN(e)||!e?0:e,p=e=>{if(!e)return!1;for(const t of e)switch(t.type){case"CIMGeometricEffectBuffer":case"CIMGeometricEffectOffset":return!0}return!1};function v(){return Promise.all([r.e(9058),r.e(309)]).then(r.bind(r,50309))}},86423:(e,t,r)=>{r.d(t,{wm:()=>x,n2:()=>y,KV:()=>d,EJ:()=>v,v9:()=>p});var n=r(76200),s=r(10064),i=r(92026),a=r(66978),o=r(35995),l=r(70032),c=r(65694),u=r(93169);const h={};function f(e,t,r){const n=(0,i.pC)(t.portal)?t.portal:l.Z.getDefault();let a;const o=`${n.url} - ${n.user&&n.user.username} - ${e}`;return h[o]||(h[o]=function(e,t,r){return t.load(r).then((()=>{const n=new c.Z({disableExtraQuery:!0,query:`owner:${m} AND type:${g} AND typekeywords:"${e}"`});return t.queryItems(n,r)})).then((t=>{let{results:n}=t,i=null;const a=e.toLowerCase();if(n&&Array.isArray(n))for(const e of n)if(e.typeKeywords.some((e=>e.toLowerCase()===a))&&e.type===g&&e.owner===m){i=e;break}if(!i)throw new s.Z("symbolstyleutils:style-not-found",`The style '${e}' could not be found`,{styleName:e});return i.load(r)}))}(e,n,r).then((e=>(a=e,e.fetchData()))).then((t=>({data:t,baseUrl:a.itemUrl,styleName:e})))),h[o]}function y(e,t,r){return e.styleUrl?async function(e,r){try{return{data:(await v(e,r)).data,baseUrl:(0,o.Yd)(e),styleUrl:e}}catch(t){return(0,a.r9)(t),null}}(e.styleUrl,r):e.styleName?f(e.styleName,t,r):Promise.reject(new s.Z("symbolstyleutils:style-url-and-name-missing","Either styleUrl or styleName is required to resolve a style"))}function d(e){return null===e||"CIMSymbolReference"===e.type?e:{type:"CIMSymbolReference",symbol:e}}function p(e,t){if("cimRef"===t)return e.cimRef;if(e.formatInfos&&!(0,u.Z)("enable-feature:force-wosr"))for(const r of e.formatInfos)if("gltf"===r.type)return r.href;return e.webRef}function v(e,t){const r={responseType:"json",query:{f:"json"},...t};return(0,n.default)((0,o.Fv)(e),r)}const m="esri_en",g="Style",x="https://cdn.arcgis.com/sharing/rest/content/items/220936cc6ed342c9937abd8f180e7d1e/resources/styles/cim/{SymbolName}.json?f=json"},91935:(e,t,r)=>{r.d(t,{Z:()=>a});var n=r(10064),s=r(32718),i=r(58971);function a(e,t,r,n,i){const a=e.referencesGeometry()&&i?l(t,n,i):t,o=e.repurposeFeature(a);try{return e.evaluate({...r,$feature:o})}catch(c){return s.Z.getLogger("esri.views.2d.support.arcadeOnDemand").warn("Feature arcade evaluation failed:",c),null}}const o=new Map;function l(e,t,r){const{transform:a,hasZ:l,hasM:c}=r;o.has(t)||o.set(t,function(e){const t={};switch(e){case"esriGeometryPoint":return(e,r,n,s)=>(0,i.U1)(r,t,e,n,s);case"esriGeometryPolygon":return(e,r,n,s)=>(0,i.Ie)(r,t,e,n,s);case"esriGeometryPolyline":return(e,r,n,s)=>(0,i.G6)(r,t,e,n,s);case"esriGeometryMultipoint":return(e,r,n,s)=>(0,i.J9)(r,t,e,n,s);default:return s.Z.getLogger("esri.views.2d.support.arcadeOnDemand").error(new n.Z("mapview-arcade",`Unable to handle geometryType: ${e}`)),e=>e}}(t));const u=o.get(t)(e.geometry,a,l,c);return{...e,geometry:u}}},13200:(e,t,r)=>{r.d(t,{Or:()=>o,k3:()=>c,s5:()=>l,vX:()=>u});Number.POSITIVE_INFINITY;const n=Math.PI,s=128/n,i=1/Math.LN2;function a(e,t){return(e%=t)>=0?e:e+t}function o(e){return a(e*s,256)}function l(e){return a(.7111111111111111*e,256)}function c(e){return Math.log(e)*i}function u(e,t,r){return e>=t&&e<=r||e>=r&&e<=t}},38999:(e,t,r)=>{var n,s;function i(e){switch(e){case"left":return n.Left;case"right":return n.Right;case"center":return n.Center}}function a(e){switch(e){case"top":return s.Top;case"middle":return s.Center;case"baseline":return s.Baseline;case"bottom":return s.Bottom}}function o(e){switch(e){case"above-left":case"esriServerPointLabelPlacementAboveLeft":return[n.Right,s.Bottom];case"above-center":case"above-along":case"esriServerPointLabelPlacementAboveCenter":case"esriServerLinePlacementAboveAlong":return[n.Center,s.Bottom];case"above-right":case"esriServerPointLabelPlacementAboveRight":return[n.Left,s.Bottom];case"center-left":case"esriServerPointLabelPlacementCenterLeft":return[n.Right,s.Center];case"center-center":case"center-along":case"esriServerPointLabelPlacementCenterCenter":case"esriServerLinePlacementCenterAlong":case"always-horizontal":case"esriServerPolygonPlacementAlwaysHorizontal":return[n.Center,s.Center];case"center-right":case"esriServerPointLabelPlacementCenterRight":return[n.Left,s.Center];case"below-left":case"esriServerPointLabelPlacementBelowLeft":return[n.Right,s.Top];case"below-center":case"below-along":case"esriServerPointLabelPlacementBelowCenter":case"esriServerLinePlacementBelowAlong":return[n.Center,s.Top];case"below-right":case"esriServerPointLabelPlacementBelowRight":return[n.Left,s.Top];default:return console.debug(`Found invalid placement type ${e}`),[n.Center,s.Center]}}function l(e){switch(e){case n.Right:return-1;case n.Center:return 0;case n.Left:return 1;default:return console.debug(`Found invalid horizontal alignment ${e}`),0}}function c(e){switch(e){case s.Top:return 1;case s.Center:return 0;case s.Bottom:case s.Baseline:return-1;default:return console.debug(`Found invalid vertical alignment ${e}`),0}}function u(e){switch(e){case"left":return n.Left;case"right":return n.Right;case"center":return n.Center}}function h(e){switch(e){case"above-along":case"below-along":case"center-along":case"esriServerLinePlacementAboveAlong":case"esriServerLinePlacementBelowAlong":case"esriServerLinePlacementCenterAlong":return!0;default:return!1}}r.d(t,{Hd:()=>u,M7:()=>n,NS:()=>h,TR:()=>s,b7:()=>a,g:()=>l,kH:()=>i,qv:()=>o,tf:()=>c}),function(e){e[e.Left=-1]="Left",e[e.Center=0]="Center",e[e.Right=1]="Right"}(n||(n={})),function(e){e[e.Top=1]="Top",e[e.Center=0]="Center",e[e.Bottom=-1]="Bottom",e[e.Baseline=2]="Baseline"}(s||(s={}))},54815:(e,t,r)=>{r.d(t,{CA:()=>c,Gq:()=>b,Xp:()=>l,a:()=>x,dk:()=>m,hF:()=>h,jj:()=>u,jy:()=>o,m2:()=>f,mE:()=>g,qr:()=>_});var n=r(10064),s=r(38999),i=r(80613);const a=Object.keys(i.mD).filter((e=>"number"==typeof i.mD[e])).reduce(((e,t)=>({...e,[t]:i.mD[t]})),{});function o(e){return e===i.mD.OUTLINE_FILL||e===i.mD.OUTLINE_FILL_SIMPLE}function l(e){return function(e){return e===i.mD.SIMPLE||e===i.mD.OUTLINE_FILL_SIMPLE}(e.symbologyType)}function c(e){return o(e.symbologyType)}function u(e,t){switch(e){case i.LW.FILL:return m.from(t);case i.LW.LINE:return x.from(t);case i.LW.MARKER:return g.from(t);case i.LW.TEXT:return _.from(t);case i.LW.LABEL:return b.from(t);default:throw new Error(`Unable to createMaterialKey for unknown geometryType ${e}`)}}function h(e){switch(f.load(e).geometryType){case i.LW.MARKER:return new g(e);case i.LW.FILL:return new m(e);case i.LW.LINE:return new x(e);case i.LW.TEXT:return new _(e);case i.LW.LABEL:return new b(e)}}class f{constructor(e){this._data=0,this._data=e}static load(e){const t=this.shared;return t.data=e,t}set data(e){this._data=e}get data(){return this._data}get geometryType(){return this.bits(8,11)}set geometryType(e){this.setBits(e,8,11)}get mapAligned(){return!!this.bit(20)}set mapAligned(e){this.setBit(20,e)}get sdf(){return!!this.bit(11)}set sdf(e){this.setBit(11,e)}get pattern(){return!!this.bit(12)}set pattern(e){this.setBit(12,e)}get textureBinding(){return this.bits(0,8)}set textureBinding(e){this.setBits(e,0,8)}get symbologyType(){return this.bits(21,26)}set symbologyType(e){this.setBits(e,21,26)}get geometryTypeString(){switch(this.geometryType){case i.LW.FILL:return"fill";case i.LW.MARKER:return"marker";case i.LW.LINE:return"line";case i.LW.TEXT:return"text";case i.LW.LABEL:return"label";default:throw new n.Z(`Unable to handle unknown geometryType: ${this.geometryType}`)}}setBit(e,t){const r=1<<e;t?this._data|=r:this._data&=~r}bit(e){return(this._data&1<<e)>>e}setBits(e,t,r){for(let n=t,s=0;n<r;n++,s++)this.setBit(n,0!=(e&1<<s))}bits(e,t){let r=0;for(let n=e,s=0;n<t;n++,s++)r|=this.bit(n)<<s;return r}hasVV(){return!1}setVV(e,t){}getVariation(){return{mapAligned:this.mapAligned,pattern:this.pattern,sdf:this.sdf,symbologyType:{value:i.mD[this.symbologyType],options:a,namespace:"SYMBOLOGY_TYPE"}}}getVariationHash(){return this._data&~(7&this.textureBinding)}}f.shared=new f(0);const y=e=>class extends e{get vvSizeMinMaxValue(){return 0!==this.bit(16)}set vvSizeMinMaxValue(e){this.setBit(16,e)}get vvSizeScaleStops(){return 0!==this.bit(17)}set vvSizeScaleStops(e){this.setBit(17,e)}get vvSizeFieldStops(){return 0!==this.bit(18)}set vvSizeFieldStops(e){this.setBit(18,e)}get vvSizeUnitValue(){return 0!==this.bit(19)}set vvSizeUnitValue(e){this.setBit(19,e)}hasVV(){return super.hasVV()||this.vvSizeMinMaxValue||this.vvSizeScaleStops||this.vvSizeFieldStops||this.vvSizeUnitValue}setVV(e,t){super.setVV(e,t);const r=function(e,t,r){const n=i.X.SIZE_FIELD_STOPS|i.X.SIZE_MINMAX_VALUE|i.X.SIZE_SCALE_STOPS|i.X.SIZE_UNIT_VALUE,s=(t&(i.mf.FIELD_TARGETS_OUTLINE|i.mf.MINMAX_TARGETS_OUTLINE|i.mf.SCALE_TARGETS_OUTLINE|i.mf.UNIT_TARGETS_OUTLINE))>>>4;return e===i.LW.LINE&&r.isOutline||e===i.LW.FILL&&o(r.symbologyType)?n&s:n&~s}(this.geometryType,e,t)&e;this.vvSizeMinMaxValue=!!(r&i.X.SIZE_MINMAX_VALUE),this.vvSizeFieldStops=!!(r&i.X.SIZE_FIELD_STOPS),this.vvSizeUnitValue=!!(r&i.X.SIZE_UNIT_VALUE),this.vvSizeScaleStops=!!(r&i.X.SIZE_SCALE_STOPS)}},d=e=>class extends e{get vvRotation(){return 0!==this.bit(15)}set vvRotation(e){this.setBit(15,e)}hasVV(){return super.hasVV()||this.vvRotation}setVV(e,t){super.setVV(e,t),this.vvRotation=!t.isOutline&&!!(e&i.X.ROTATION)}},p=e=>class extends e{get vvColor(){return 0!==this.bit(13)}set vvColor(e){this.setBit(13,e)}hasVV(){return super.hasVV()||this.vvColor}setVV(e,t){super.setVV(e,t),this.vvColor=!t.isOutline&&!!(e&i.X.COLOR)}},v=e=>class extends e{get vvOpacity(){return 0!==this.bit(14)}set vvOpacity(e){this.setBit(14,e)}hasVV(){return super.hasVV()||this.vvOpacity}setVV(e,t){super.setVV(e,t),this.vvOpacity=!t.isOutline&&!!(e&i.X.OPACITY)}};class m extends(p(v(y(f)))){static load(e){const t=this.shared;return t.data=e,t}static from(e){const{symbologyType:t,vvFlags:r}=e,n=this.load(0);return n.geometryType=i.LW.FILL,n.symbologyType=t,t!==i.mD.DOT_DENSITY&&n.setVV(r,e),n.data}getVariation(){return{...super.getVariation(),vvColor:this.vvColor,vvOpacity:this.vvOpacity,vvSizeFieldStops:this.vvSizeFieldStops,vvSizeMinMaxValue:this.vvSizeMinMaxValue,vvSizeScaleStops:this.vvSizeScaleStops,vvSizeUnitValue:this.vvSizeUnitValue}}}m.shared=new m(0);class g extends(p(v(d(y(f))))){static load(e){const t=this.shared;return t.data=e,t}static from(e){const{symbologyType:t,vvFlags:r}=e,n=this.load(0);return n.geometryType=i.LW.MARKER,n.symbologyType=t,t!==i.mD.HEATMAP&&n.setVV(r,e),n.data}getVariation(){return{...super.getVariation(),vvColor:this.vvColor,vvRotation:this.vvRotation,vvOpacity:this.vvOpacity,vvSizeFieldStops:this.vvSizeFieldStops,vvSizeMinMaxValue:this.vvSizeMinMaxValue,vvSizeScaleStops:this.vvSizeScaleStops,vvSizeUnitValue:this.vvSizeUnitValue}}}g.shared=new g(0);class x extends(p(v(y(f)))){static load(e){const t=this.shared;return t.data=e,t}static from(e){const t=this.load(0);return t.geometryType=i.LW.LINE,t.symbologyType=e.symbologyType,t.setVV(e.vvFlags,e),t.data}getVariation(){return{...super.getVariation(),vvColor:this.vvColor,vvOpacity:this.vvOpacity,vvSizeFieldStops:this.vvSizeFieldStops,vvSizeMinMaxValue:this.vvSizeMinMaxValue,vvSizeScaleStops:this.vvSizeScaleStops,vvSizeUnitValue:this.vvSizeUnitValue}}}x.shared=new x(0);class _ extends(p(v(d(y(f))))){static load(e){const t=this.shared;return t.data=e,t}static from(e){const t=this.load(0);return t.geometryType=i.LW.TEXT,t.symbologyType=e.symbologyType,t.setVV(e.vvFlags,e),t.data}getVariation(){return{...super.getVariation(),vvColor:this.vvColor,vvOpacity:this.vvOpacity,vvRotation:this.vvRotation,vvSizeFieldStops:this.vvSizeFieldStops,vvSizeMinMaxValue:this.vvSizeMinMaxValue,vvSizeScaleStops:this.vvSizeScaleStops,vvSizeUnitValue:this.vvSizeUnitValue}}}_.shared=new _(0);class b extends(y(f)){static load(e){const t=this.shared;return t.data=e,t}static from(e){const t=this.load(0);return t.geometryType=i.LW.LABEL,t.symbologyType=e.symbologyType,t.setVV(e.vvFlags,e),t.mapAligned=(0,s.NS)(e.placement),t.data}getVariation(){return{...super.getVariation(),vvSizeFieldStops:this.vvSizeFieldStops,vvSizeMinMaxValue:this.vvSizeMinMaxValue,vvSizeScaleStops:this.vvSizeScaleStops,vvSizeUnitValue:this.vvSizeUnitValue}}}b.shared=new b(0)},81735:(e,t,r)=>{r.d(t,{Z:()=>l});var n=r(27366),s=r(41691),i=r(49861),a=(r(63780),r(93169),r(25243),r(69912));let o=class extends s.r{initialize(){}destroy(){}get supportsTileUpdates(){return!1}get spatialReference(){const e=this.get("tileStore.tileScheme.spatialReference");return e&&e.toJSON()||null}};(0,n._)([(0,i.Cb)({readOnly:!0})],o.prototype,"supportsTileUpdates",null),(0,n._)([(0,i.Cb)({constructOnly:!0})],o.prototype,"remoteClient",void 0),(0,n._)([(0,i.Cb)({constructOnly:!0})],o.prototype,"service",void 0),(0,n._)([(0,i.Cb)()],o.prototype,"spatialReference",null),(0,n._)([(0,i.Cb)({constructOnly:!0})],o.prototype,"tileInfo",void 0),(0,n._)([(0,i.Cb)({constructOnly:!0})],o.prototype,"tileStore",void 0),o=(0,n._)([(0,a.j)("esri.views.2d.layers.features.processors.BaseProcessor")],o);const l=o},3561:(e,t,r)=>{r.r(t),r.d(t,{default:()=>S});var n=r(27366),s=r(75746),i=(r(10064),r(93169),r(32718)),a=r(92026),o=r(66978),l=(r(25243),r(63780),r(75366),r(69912)),c=r(48732),u=r(78952),h=r(84328),f=r(72774),y=r(74017),d=r(61909),p=r(69813),v=r(27301),m=r(81735);class g{constructor(e){this._remoteClient=e,this._resourceMap=new Map,this._inFlightResourceMap=new Map,this.geometryEngine=null}destroy(){}async fetchResource(e,t){const r=this._resourceMap,n=r.get(e);if(n)return n;let s=this._inFlightResourceMap.get(e);if(s)return s;try{s=this._remoteClient.invoke("tileRenderer.fetchResource",{url:e},{...t}),this._inFlightResourceMap.set(e,s),s.then((t=>(this._inFlightResourceMap.delete(e),r.set(e,t),t)))}catch(i){return(0,o.D_)(i)?null:{width:0,height:0}}return s}getResource(e){return this._resourceMap.get(e)??null}}function x(e,t){return(!e.minScale||e.minScale>=t)&&(!e.maxScale||e.maxScale<=t)}function _(e){const t=e.message,r={message:{data:{},tileKey:t.tileKey,tileKeyOrigin:t.tileKeyOrigin,version:t.version},transferList:new Array};for(const n in t.data){const e=t.data[n];if(r.message.data[n]=null,(0,a.pC)(e)){const t=e.stride,s=e.indices.slice(0),i=e.vertices.slice(0),o=e.records.slice(0),l={stride:t,indices:s,vertices:i,records:o,metrics:(0,a.yw)(e.metrics,(e=>e.slice(0)))};r.transferList.push(s,i,o),r.message.data[n]=l}}return r}i.Z.getLogger("esri.views.2d.layers.features.processors.SymbolProcessor");let b=class extends m.Z{constructor(){super(...arguments),this.type="symbol",this._matchers={feature:null,aggregate:null},this._bufferData=new Map,this._bufferIds=new Map}initialize(){this.handles.add([this.tileStore.on("update",this.onTileUpdate.bind(this))]),this._resourceManagerProxy=new g(this.remoteClient)}destroy(){this._resourceManagerProxy.destroy()}get supportsTileUpdates(){return!0}forEachBufferId(e){this._bufferIds.forEach((t=>{t.forEach(e)}))}async update(e,t){const r=t.schema.processors[0];if("symbol"!==r.type)return;const n=(0,c.Hg)(this._schema,r);(0,c.uD)(n,"mesh")&&(e.mesh=!0,e.why.mesh.push("Symbology changed"),this._schema=r,this._factory=this._createFactory(r),this._factory.update(r,this.tileStore.tileScheme.tileInfo))}onTileMessage(e,t,r,n){return(0,o.k_)(n),this._onTileData(e,t,r,n)}onTileClear(e){return this._bufferData.delete(e.key.id),this._bufferIds.delete(e.key.id),this.remoteClient.invoke("tileRenderer.onTileData",{tileKey:e.id,data:{clear:!0}})}onTileError(e,t,r){const n=r.signal,s={tileKey:e.id,error:t};return this.remoteClient.invoke("tileRenderer.onTileError",s,{signal:n})}onTileUpdate(e){for(const t of e.removed)this._bufferData.has(t.key.id)&&this._bufferData.delete(t.key.id),this._bufferIds.has(t.key.id)&&this._bufferIds.delete(t.key.id);for(const t of e.added)this._bufferData.forEach((e=>{for(const r of e)r.message.tileKey===t.id&&this._updateTileMesh("append",t,_(r),[],!1,!1,null)}))}_addBufferData(e,t){this._bufferData.has(e)||this._bufferData.set(e,[]),this._bufferData.get(e).push(_(t))}_createFactory(e){const{geometryType:t,objectIdField:r,fields:n}=this.service,s={geometryType:t,fields:n,spatialReference:u.Z.fromJSON(this.spatialReference)},i=new d.Wr(((e,t)=>this.remoteClient.invoke("tileRenderer.getMaterialItems",e,t)),this.tileStore.tileScheme.tileInfo),{matcher:o,aggregateMatcher:l}=e.mesh;return this._store=i,this._matchers.feature=(0,p.fL)(o,i,s,this._resourceManagerProxy),this._matchers.aggregate=(0,a.yw)(l,(e=>(0,p.fL)(e,i,s,this._resourceManagerProxy))),new y.j(t,r,i)}async _onTileData(e,t,r,n){(0,o.k_)(n);const{type:s,addOrUpdate:i,remove:l,clear:c,end:u}=t,h=!!this._schema.mesh.sortKey;if(!i){const t={type:s,addOrUpdate:null,remove:l,clear:c,end:u,sort:h};return this.remoteClient.invoke("tileRenderer.onTileData",{tileKey:e.id,data:t},n)}const f=this._processFeatures(e,i,r,n,t.status.version);try{const r=await f;if((0,a.Wi)(r)){const t={type:s,addOrUpdate:null,remove:l,clear:c,end:u,sort:h};return this.remoteClient.invoke("tileRenderer.onTileData",{tileKey:e.id,data:t},n)}const i=[];for(const t of r){let r=!1;const n=t.message.bufferIds,s=e.key.id,o=t.message.tileKey;if(s!==o&&(0,a.pC)(n)){if(!this.tileStore.get(o)){this._addBufferData(s,t),i.push(t);continue}let e=this._bufferIds.get(o);e||(e=new Set,this._bufferIds.set(o,e));const a=Array.from(n);for(const t of a){if(e.has(t)){r=!0;break}e.add(t)}}r||(this._addBufferData(s,t),i.push(t))}await Promise.all(i.map((r=>{const i=e.key.id===r.message.tileKey,a=i?t.remove:[],o=i&&t.end;return this._updateTileMesh(s,e,r,a,o,t.clear,n.signal)})))}catch(y){this._handleError(e,y,n)}}async _updateTileMesh(e,t,r,n,s,i,l){const c=e,u=r.message.tileKey,h=!!this._schema.mesh.sortKey;u!==t.key.id&&(s=!1);const f=(0,a.yw)(r,(e=>e.message)),y=(0,a.yw)(r,(e=>e.transferList))||[],d={type:c,addOrUpdate:f,remove:n,clear:i,end:s,sort:h},p={transferList:(0,a.Wg)(y)||[],signal:l};return(0,o.k_)(p),this.remoteClient.invoke("tileRenderer.onTileData",{tileKey:u,data:d},p)}async _processFeatures(e,t,r,n,s){if((0,a.Wi)(t)||!t.hasFeatures)return null;const i={transform:e.transform,hasZ:!1,hasM:!1},l=this._factory,c={viewingMode:"",scale:e.scale},u=await this._matchers.feature,h=await this._matchers.aggregate;(0,o.k_)(n);const f=this._getLabelInfos(e,t);return await l.analyze(t.getCursor(),this._resourceManagerProxy,u,h,i,c),(0,o.k_)(n),this._writeFeatureSet(e,t,i,f,l,r,s)}_writeFeatureSet(e,t,r,n,s,i,o){const l=t.getSize(),c=new f._(e.key.id,{features:l,records:l,metrics:0},this._schema.mesh.matcher.symbologyType,i,!0,o),u={viewingMode:"",scale:e.scale},h=t.getCursor();for(;h.next();)try{const t=h.getDisplayId(),i=(0,a.pC)(n)?n.get(t):null;s.writeCursor(c,h,r,u,e.level,i,this._resourceManagerProxy)}catch(d){}const y=e.tileInfoView.tileInfo.isWrappable;return c.serialize(y)}_handleError(e,t,r){if(!(0,o.D_)(t)){const n={tileKey:e.id,error:t.message};return this.remoteClient.invoke("tileRenderer.onTileError",n,{signal:r.signal})}}_getLabelingSchemaForScale(e){const t=this._schema.mesh.labels;if((0,a.Wi)(t))return null;if("subtype"===t.type){const r={type:"subtype",classes:{}};let n=!1;for(const s in t.classes){const i=t.classes[s].filter((t=>x(t,e.scale)));n=n||!!i.length,r.classes[s]=i}return n?r:null}const r=t.classes.filter((t=>x(t,e.scale)));return r.length?{type:"simple",classes:r}:null}_getLabels(e,t){if("subtype"===t.type){const r=this.service.subtypeField,n=(0,a.s3)(r,"Expected to find subtype Field"),s=e.readAttribute(n);return null==s?[]:t.classes[s]??[]}return t.classes}_getLabelInfos(e,t){const r=this._getLabelingSchemaForScale(e);if((0,a.Wi)(r))return null;const n=new Map,i=t.getCursor();for(;i.next();){const e=i.getDisplayId(),t=[],a=(0,h.nE)(e),o=a&&1!==i.readAttribute("cluster_count")?"aggregate":"feature",l=this._getLabels(i,r);for(const r of l){if(r.target!==o)continue;const n=i.getStorage(),l=a&&"feature"===o?n.getComputedStringAtIndex(i.readAttribute("referenceId"),r.fieldIndex):n.getComputedStringAtIndex(e,r.fieldIndex);if(!l)continue;const c=(0,s.E)(l.toString()),u=c[0],h=c[1];this._store.getMosaicItem(r.symbol,(0,v._)(u)).then((e=>{t[r.index]={glyphs:e.glyphMosaicItems,rtl:h,index:r.index}}))}n.set(e,t)}return n}};b=(0,n._)([(0,l.j)("esri.views.2d.layers.features.processors.SymbolProcessor")],b);const S=b},98125:(e,t,r)=>{r.d(t,{xS:()=>x,B3:()=>g});var n=r(79815),s=r(80613),i=r(54815);const a={marker:s.LW.MARKER,fill:s.LW.FILL,line:s.LW.LINE,text:s.LW.TEXT};class o{constructor(e,t,r,n){const o={minScale:t?.minScale,maxScale:t?.maxScale},l=function(e){return e.minScale||e.maxScale?e.minScale+"-"+e.maxScale:""}(o);this.layers=e,this.data=t,this.hash=this._createHash()+l,this.rendererKey=r;const c={isOutline:!1,placement:null,symbologyType:s.mD.DEFAULT,vvFlags:r};for(const s of e){const e=a[s.type];c.isOutline="line"===s.type&&s.isOutline,s.materialKey=(0,i.jj)(e,c),s.maxVVSize=n,s.scaleInfo=o,s.templateHash+=l}}get type(){return"expanded-cim"}_createHash(){let e="";for(const t of this.layers)e+=t.templateHash;return e}}var l=r(71277),c=r(10064),u=r(92026),h=r(66978),f=r(35995),y=r(70032),d=r(53283),p=r(86423);async function v(e,t,r){if(!e.name)throw new c.Z("style-symbol-reference-name-missing","Missing name in style symbol reference");if(e.styleName&&"Esri2DPointSymbolsStyle"===e.styleName)return async function(e,t){const n=p.wm.replace(/\{SymbolName\}/gi,e.name);try{const e=await(0,p.EJ)(n,t);return(0,p.KV)(e.data)}catch(r){return(0,h.k_)(r),null}}(e,r);try{return async function(e,t,r,n){const s=e.data,i={portal:r&&(0,u.pC)(r.portal)?r.portal:y.Z.getDefault(),url:(0,f.mN)(e.baseUrl),origin:"portal-item"},a=s.items.find((e=>e.name===t));if(!a)throw new c.Z("symbolstyleutils:symbol-name-not-found",`The symbol name '${t}' could not be found`,{symbolName:t});let o=(0,d.f)((0,p.v9)(a,"cimRef"),i);(0,l.XO)()&&(o=(0,l.pJ)(o));try{const e=await(0,p.EJ)(o,n);return(0,p.KV)(e.data)}catch(v){return(0,h.k_)(v),null}}(await(0,p.n2)(e,t,r),e.name,t,r)}catch(a){return(0,h.k_)(a),null}}const m=async(e,t,r)=>new o(await(0,n.c)(e.data,t,r),e.data,e.rendererKey,e.maxVVSize),g=async(e,t,r,n)=>{if(!e)return null;if("cim"===e.type)return m(e,t,r);if("web-style"===e.type){const s={type:"cim",data:await v(e,null,n),rendererKey:e.rendererKey,maxVVSize:e.maxVVSize};return m(s,t,r)}return e};function x(e){if(!e)return null;const{type:t,cim:r,url:n,materialHash:s}=e,i={cim:r,type:t,mosaicHash:s,url:n,size:null,dashTemplate:null,path:null,text:null,fontName:null,animatedSymbolProperties:null};switch(t){case"marker":i.size=e.size,i.path=e.path,i.animatedSymbolProperties=e.animatedSymbolProperties;break;case"line":i.dashTemplate=e.dashTemplate;break;case"text":i.text=e.text,i.fontName=e.fontName}return i}},5131:(e,t,r)=>{var n=r(27366),s=r(85015),i=r(49861),a=(r(63780),r(93169),r(25243),r(69912)),o=r(88396),l=r(38164);const c=new Set,u=[],h=new Map,f=[0,0];let y=class extends s.Z{constructor(e){super(e),this._keyToItem=new Map,this.concurrency=6,this.strategy="scale-first",this.tileInfoView=null}initialize(){const{concurrency:e,process:t}=this;this._queue=new l.e({concurrency:e,process:(e,r)=>{const n=this._keyToItem.get(e);return t(n,{signal:r})},peeker:e=>e.values().next().value})}destroy(){this.clear(),this._queue.destroy(),this._queue=null}get length(){return this._queue?this._queue.length:0}get onGoingCount(){return this._keyToItem.size}get updating(){return this.length>0||this.onGoingCount>0}abort(e){const t="string"==typeof e?e:e.id;this._queue.abort(t)}clear(){this._queue.clear(),this._keyToItem.clear(),this.notifyChange("updating")}has(e){return"string"==typeof e?this._keyToItem.has(e):this._keyToItem.has(e.id)}isOngoing(e){const t="string"==typeof e?e:e.id;return this.has(t)&&this._queue.isOngoing(t)}pause(){this._queue.pause()}push(e,t){const r=e.key.id+"-"+t;if(this.has(r))return this.get(r);const n=this._queue.push(r),s=()=>{this._keyToItem.delete(r),this.notifyChange("updating")};return this._keyToItem.set(r,e),n.then(s,s),this.notifyChange("updating"),n}reset(){this._queue.reset(),this.notifyChange("updating")}resume(){this._queue.resume()}_peekByScaleFirst(e){if(!this.state)return e.values().next().value;const t=this.tileInfoView;let r=Number.NEGATIVE_INFINITY,n=Number.POSITIVE_INFINITY;e.forEach((e=>{const t=this._keyToItem.get(e),s=this.tileInfoView.getTileScale(t.key);h.has(s)||(h.set(s,[]),r=Math.max(s,r),n=Math.min(s,n)),h.get(s).push(t.key),c.add(s)}));let s=this.state.scale;h.has(s)||(function(e,t){e.length=0,t.forEach((t=>e.push(t)))}(u,c),u.sort(((e,t)=>e-t)),s=u.reduce(((e,t)=>Math.abs(t-s)<Math.abs(e-s)?t:e),u[0])),s=Math.min(s,r),s=Math.max(s,n);const i=h.get(s),a=t.getClosestInfoForScale(s),o=a.getColumnForX(this.state.center[0]),l=a.getRowForY(this.state.center[1]);return i.sort(((e,t)=>{const r=a.denormalizeCol(e.col,e.world),n=a.denormalizeCol(t.col,t.world);return Math.sqrt((o-r)*(o-r)+(l-e.row)*(l-e.row))-Math.sqrt((o-n)*(o-n)+(l-t.row)*(l-t.row))})),c.clear(),h.clear(),i[0].id}_peekByCenterFirst(e){if(!this.state)return e.values().next().value;const t=this.tileInfoView,r=this.state.center;let n=Number.POSITIVE_INFINITY,s=null;return e.forEach((e=>{const i=this._keyToItem.get(e);t.getTileCoords(f,i.key);const a=(0,o.j)(f,r);a<n&&(n=a,s=i.key)})),s.id}};(0,n._)([(0,i.Cb)({constructOnly:!0})],y.prototype,"concurrency",void 0),(0,n._)([(0,i.Cb)({constructOnly:!0})],y.prototype,"process",void 0),(0,n._)([(0,i.Cb)()],y.prototype,"state",void 0),(0,n._)([(0,i.Cb)({constructOnly:!0})],y.prototype,"strategy",void 0),(0,n._)([(0,i.Cb)({constructOnly:!0})],y.prototype,"tileInfoView",void 0),(0,n._)([(0,i.Cb)({readOnly:!0})],y.prototype,"updating",null),y=(0,n._)([(0,a.j)("esri.views.2d.tiling.PagedTileQueue")],y)},32344:(e,t,r)=>{r.d(t,{Z:()=>d});var n=r(27366),s=r(85015),i=r(49861),a=(r(63780),r(93169),r(25243),r(69912)),o=r(88396),l=r(38164);const c=new Set,u=[],h=new Map,f=[0,0];let y=class extends s.Z{constructor(e){super(e),this._keyToItem=new Map,this.concurrency=6,this.strategy="scale-first",this.tileInfoView=null}initialize(){const{concurrency:e,process:t,strategy:r}=this;this._queue=new l.e({concurrency:e,process:(e,r)=>{const n=this._keyToItem.get(e);return t(n,{signal:r})},peeker:"scale-first"===r?e=>this._peekByScaleFirst(e):e=>this._peekByCenterFirst(e)})}destroy(){this.clear(),this._queue.destroy(),this._queue=null}get length(){return this._queue?this._queue.length:0}get onGoingCount(){return this._keyToItem.size}get updating(){return this.length>0||this.onGoingCount>0}abort(e){const t="string"==typeof e?e:e.id;this._queue.abort(t)}clear(){this._queue.clear(),this._keyToItem.clear(),this.notifyChange("updating")}has(e){return"string"==typeof e?this._keyToItem.has(e):this._keyToItem.has(e.id)}isOngoing(e){const t="string"==typeof e?e:e.id;return this.has(t)&&this._queue.isOngoing(t)}pause(){this._queue.pause()}push(e){const t=e.key.id;if(this._queue.has(t))return this._queue.get(t);const r=this._queue.push(t),n=()=>{this._keyToItem.delete(t),this.notifyChange("updating")};return this._keyToItem.set(t,e),r.then(n,n),this.notifyChange("updating"),r}reset(){this._queue.reset()}resume(){this._queue.resume()}_peekByScaleFirst(e){if(!this.state)return e.values().next().value;const t=this.tileInfoView;let r=Number.NEGATIVE_INFINITY,n=Number.POSITIVE_INFINITY;e.forEach((e=>{const t=this._keyToItem.get(e),s=this.tileInfoView.getTileScale(t.key);h.has(s)||(h.set(s,[]),r=Math.max(s,r),n=Math.min(s,n)),h.get(s).push(t.key),c.add(s)}));let s=this.state.scale;h.has(s)||(function(e,t){e.length=0,t.forEach((t=>e.push(t)))}(u,c),u.sort(((e,t)=>e-t)),s=u.reduce(((e,t)=>Math.abs(t-s)<Math.abs(e-s)?t:e),u[0])),s=Math.min(s,r),s=Math.max(s,n);const i=h.get(s),a=t.getClosestInfoForScale(s),o=a.getColumnForX(this.state.center[0]),l=a.getRowForY(this.state.center[1]);return i.sort(((e,t)=>{const r=a.denormalizeCol(e.col,e.world),n=a.denormalizeCol(t.col,t.world);return Math.sqrt((o-r)*(o-r)+(l-e.row)*(l-e.row))-Math.sqrt((o-n)*(o-n)+(l-t.row)*(l-t.row))})),c.clear(),h.clear(),i[0].id}_peekByCenterFirst(e){if(!this.state)return e.values().next().value;const t=this.tileInfoView,r=this.state.center;let n=Number.POSITIVE_INFINITY,s=null;return e.forEach((e=>{const i=this._keyToItem.get(e);t.getTileCoords(f,i.key);const a=(0,o.j)(f,r);a<n&&(n=a,s=i.key)})),s.id}};(0,n._)([(0,i.Cb)({constructOnly:!0})],y.prototype,"concurrency",void 0),(0,n._)([(0,i.Cb)({constructOnly:!0})],y.prototype,"process",void 0),(0,n._)([(0,i.Cb)()],y.prototype,"state",void 0),(0,n._)([(0,i.Cb)({constructOnly:!0})],y.prototype,"strategy",void 0),(0,n._)([(0,i.Cb)({constructOnly:!0})],y.prototype,"tileInfoView",void 0),(0,n._)([(0,i.Cb)({readOnly:!0})],y.prototype,"updating",null),y=(0,n._)([(0,a.j)("esri.views.2d.tiling.TileQueue")],y);const d=y},85269:(e,t,r)=>{r.d(t,{Z:()=>f});var n=r(65156),s=r(88396);class i{constructor(e,t,r){this.maxSize=e,this.tileInfoView=t,this.removedFunc=r,this._tilePerId=new Map,this._tileKeysPerLevel=[]}has(e){return this._tilePerId.has(e)}get(e){return this._tilePerId.get(e)}pop(e){const t=this._tilePerId.get(e);if(!t)return null;const r=t.key.level,n=this._tileKeysPerLevel[r];a(this._tilePerId,e);for(let s=0;s<n.length;s++)if(n[s].id===e){n.splice(s,1);break}return t.visible=!0,t}add(e){e.visible=!1;const t=e.key,r=t.id;if(this._tilePerId.has(r))return;this._tilePerId.set(r,e);const n=t.level;this._tileKeysPerLevel[n]||(this._tileKeysPerLevel[n]=[]),this._tileKeysPerLevel[n].push(t)}prune(e,t,r){let n=this._tilePerId.size;if(n<=this.maxSize)return;let s=this._tileKeysPerLevel.length-1;for(;n>this.maxSize&&s>=0;)s!==e&&(n=this._pruneAroundCenterTile(n,t,r,s)),s--;n>this.maxSize&&(n=this._pruneAroundCenterTile(n,t,r,e))}_pruneAroundCenterTile(e,t,r,n){const i=this._tileKeysPerLevel[n];if(!i||0===i.length)return e;const{size:a,origin:o}=this.tileInfoView.tileInfo,l=r*a[0],c=r*a[1],u=[0,0],h=[0,0];for(i.sort(((e,r)=>(u[0]=o.x+l*(e.col+.5),u[1]=o.y-c*(e.row+.5),h[0]=o.x+l*(r.col+.5),h[1]=o.y-c*(r.row+.5),(0,s.s)(u,t)-(0,s.s)(h,t))));i.length>0;){const t=i.pop();if(this._removeTile(t.id),--e===this.maxSize)break}return e}_removeTile(e){const t=this._tilePerId.get(e);this.removedFunc&&this.removedFunc(t),a(this._tilePerId,e)}}function a(e,t){e.delete(t)}var o=r(48790);const l=new(r(73828).Z)(0,0,0,0),c=new Map,u=[],h=[];class f{constructor(e){this._previousScale=Number.POSITIVE_INFINITY,this.cachePolicy="keep",this.coveragePolicy="closest",this.resampling=!0,this.tileIndex=new Map,this.tiles=[],this.buffer=192,this.acquireTile=e.acquireTile,this.releaseTile=e.releaseTile,this.tileInfoView=e.tileInfoView,this.resampling=null==e.resampling||!!e.resampling,e.cachePolicy&&(this.cachePolicy=e.cachePolicy),e.coveragePolicy&&(this.coveragePolicy=e.coveragePolicy),null!=e.buffer&&(this.buffer=e.buffer),e.cacheSize&&(this._tileCache=new i(e.cacheSize,this.tileInfoView,(e=>{this.releaseTile(e)})))}destroy(){this.tileIndex.clear()}update(e){const{resampling:t,tileIndex:r}=this,n=this.tileInfoView.getTileCoverage(e.state,this.buffer,this.coveragePolicy);if(h.length=0,u.length=0,c.clear(),!n)return;const{minScale:s,maxScale:i}=this.tileInfoView.tileInfo,{spans:a,lodInfo:f}=n,{level:y}=f,{scale:d,center:p,resolution:v}=e.state,m=!e.stationary&&d>this._previousScale;if(this._previousScale=d,this.tiles.length=0,!t&&(d>s||d<i))return this.tiles.length=0,c.clear(),r.forEach((e=>{this.releaseTile(e)})),r.clear(),h.length=0,u.length=0,c.clear(),o.Z.pool.release(n),!0;r.forEach((e=>e.visible=!0));let g=0,x=0;if(a.length>0)for(const{row:o,colFrom:u,colTo:h}of a)for(let e=u;e<=h;e++){g++;const t=l.set(y,o,f.normalizeCol(e),f.getWorldForColumn(e)).id;if(r.has(t)){const e=r.get(t);e.isReady?(c.set(t,e),x++):m||this._addParentTile(t,c)}else{let e;if(this._tileCache&&this._tileCache.has(t)){if(e=this._tileCache.pop(t),this.tileIndex.set(t,e),e.isReady){c.set(t,e),x++;continue}}else e=this.acquireTile(l),this.tileIndex.set(t,e);m||this._addParentTile(t,c)}}const _=x===g;r.forEach(((e,t)=>{if(l.set(t),c.has(t))return;const r=this.tileInfoView.intersects(n,l),s="purge"===this.cachePolicy?l.level!==y:l.level>y;!r||!m&&_?!s&&r||u.push(t):e.isReady?s&&"purge"===this.cachePolicy&&this._hasReadyAncestor(l,y)?u.push(t):h.push(t):s&&u.push(t)}));for(const o of h){const e=r.get(o);e&&e.isReady&&c.set(o,e)}for(const o of u){const e=r.get(o);this._tileCache?this._tileCache.add(e):this.releaseTile(e),r.delete(o)}return c.forEach((e=>this.tiles.push(e))),r.forEach((e=>{c.has(e.key.id)||(e.visible=!1)})),this._tileCache&&this._tileCache.prune(y,p,v),o.Z.pool.release(n),c.clear(),_}clear(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];const{tileIndex:t}=this;e&&t.forEach((e=>{this.releaseTile(e)})),t.clear()}updateCacheSize(e){this._tileCache&&(this._tileCache.maxSize=e)}_addParentTile(e,t){let r=e,n=null;for(;r=this.tileInfoView.getTileParentId(r),r;)if(this.tileIndex.has(r)){if(n=this.tileIndex.get(r),n&&n.isReady){t.has(n.key.id)||t.set(n.key.id,n);break}}else if(this._tileCache&&this._tileCache.has(r)&&(n=this._tileCache.pop(r),this.tileIndex.set(r,n),n&&n.isReady)){t.has(n.key.id)||t.set(n.key.id,n);break}}_hasReadyAncestor(e,t){const r=(0,n.Ue)();this.tileInfoView.getTileBounds(r,e,!0);for(const s of this.tileIndex.values())if(s.isReady&&s.key.level>=t&&s.key.level<e.level){const e=(0,n.Ue)();if(this.tileInfoView.getTileBounds(e,s.key,!0),(0,n.r3)(e,r))return!0}return!1}}}}]);
//# sourceMappingURL=2183.cc8b3a9d.chunk.js.map