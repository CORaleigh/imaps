(this.webpackJsonpimaps=this.webpackJsonpimaps||[]).push([[42,245,307],{1186:function(e,t,n){"use strict";n.d(t,"a",(function(){return C})),n.d(t,"b",(function(){return A}));var r=n(79),i=n(125),a=(n(82),n(138)),s=n(134),o=n(183),c=n(85),l=n(81),u=n(84),h=(n(83),n(80)),d=n(536),p=(n(99),n(89)),f=n(114),m=n(985),b=n(615),g=n(294),y=n(110),O=n(825),_=n(216),v=n(113),j=n(140),x=n(135);function T(e,t){const n=new v.a({x:e[0],y:e[1],spatialReference:t});return e.length>2&&(n.z=e[2]),n}function E(e,t,n){const r=new j.a({paths:e,spatialReference:t});return n&&Object(g.i)(r),r}function S(e,t,n,r=!0){const i=Object(p.a)(e);i.forEach((e=>{const t=e[0],n=e[e.length-1];Object(u.c)(t,n)&&1!==e.length||e.push(e[0])}));let a=new x.a({rings:i,spatialReference:t});return a.rings.forEach((e=>{Object(g.g)(e,!1,!1)||e.reverse()})),n&&Object(g.i)(a),r&&a.isSelfIntersecting&&Object(y.l)(t)&&(a=Object(b.simplify)(a)),a}function w(e,t,n){const r=t.mapToLocalMultiple(e),i=[],a={x:r[0].x,y:r[0].y},s=r[1].x,o=r[1].y,l=Math.round(s-a.x),u=Math.round(o-a.y),h=Math.max(Math.abs(l),Math.abs(u));if(n){const e={x:a.x+h,y:a.y+h},t={x:a.x-h,y:a.y-h};i.push(Object(O.b)(e.x,t.y),Object(O.b)(t.x,t.y),Object(O.b)(t.x,e.y),Object(O.b)(e.x,e.y))}else{const e={x:l>0?a.x+h:a.x-h,y:u>0?a.y+h:a.y-h};i.push(Object(O.b)(a.x,a.y),Object(O.b)(e.x,a.y),Object(O.b)(e.x,e.y),Object(O.b)(a.x,e.y))}return S([Object(c.g)(i.map((e=>t.localToMap(e))))],t.spatialReference,t.doUnnormalization,!0)}function M(e,t,n,r){const i=t.mapToLocalMultiple(e);let a=null,s=null;if(n)a=i[0],s=i[1];else{const e=i[0],t=i[1],n=Math.round(t.x-e.x),r=Math.round(t.y-e.y),o=Math.max(Math.abs(n),Math.abs(r));a=Object(O.b)(n>0?e.x+o/2:e.x-o/2,r>0?e.y+o/2:e.y-o/2),s=Object(O.b)(Math.abs(n)>Math.abs(r)?a.x-o/2:a.x,Math.abs(n)>Math.abs(r)?a.y:a.y-o/2)}const o=t.localToMap(a),l=t.localToMap(s);if(Object(c.j)(o)||Object(c.j)(l))return null;t.doUnnormalization&&Object(g.j)([[o,l]],t.spatialReference);const u=T(o,t.spatialReference),h=T(l,t.spatialReference),d=Object(f.e)(t.spatialReference);let p=0;if(Object(y.l)(t.spatialReference))p=d*Object(b.distance)(u,h,null);else{const e=a.x-s.x,t=a.y-s.y;p=d*Math.sqrt(e*e+t*t)*(r||1)}const _=new m.a({center:u,radius:p,radiusUnit:"meters",spatialReference:t.spatialReference});return S(_.rings,_.spatialReference,!1)}var R=n(675);let C=class extends(Object(s.b)(a.a.EventedMixin(R.a))){constructor(e){super(e),this._graphic=null,this.defaultZ=0,this.geometryType=null,this.hasZ=!0,this.mode=null,this.snappingManager=null,this.snapToScene=!1}initialize(){this.internalGraphicsLayer=new d.a({listMode:"hide",internal:!0}),this.view.map.layers.add(this.internalGraphicsLayer),this.drawOperation=this.makeDrawOperation(),this.handles.add([this.drawOperation.on("vertex-add",(e=>this.onVertexAdd(e))),this.drawOperation.on("vertex-remove",(e=>this.onVertexRemove(e))),this.drawOperation.on("vertex-update",(e=>this.onVertexUpdate(e))),this.drawOperation.on("cursor-update",(e=>this.onCursorUpdate(e))),this.drawOperation.on("complete",(e=>this.onComplete(e)))]),this.finishToolCreation()}destroy(){this.drawOperation=Object(c.d)(this.drawOperation),this._destroyAllVisualisations(),this.view.map.remove(this.internalGraphicsLayer),this.internalGraphicsLayer=Object(c.d)(this.internalGraphicsLayer),this._set("view",null)}get canRedo(){return this.drawOperation.canRedo}get canUndo(){return this.drawOperation.canUndo}set centered(e){this._set("centered",e),this._updateGraphic()}set enabled(e){this.drawOperation.interactive=e,this._set("enabled",e)}set forceUniformSize(e){this._set("forceUniformSize",e),this._updateGraphic()}get graphic(){return this._graphic}set graphicSymbol(e){this._set("graphicSymbol",e),Object(c.k)(this._graphic)&&(this._graphic.symbol=e)}get updating(){var e,t;return null!=(e=null==(t=this.drawOperation)?void 0:t.updating)&&e}completeCreateOperation(){this.drawOperation.complete()}onInputEvent(e){this.drawOperation.onInputEvent(e)}redo(){this.drawOperation.redo()}reset(){}undo(){this.drawOperation.undo()}_createGraphic(e){this._graphic=new i.a({...this.graphicProperties,geometry:e,symbol:this.graphicSymbol}),this.internalGraphicsLayer.add(this._graphic),this.handles.add(this.initializeGraphic(this._graphic)),this.notifyChange("graphic"),this.handles.add(Object(o.c)((()=>{Object(c.k)(this._graphic)&&(this.internalGraphicsLayer.remove(this._graphic),this._graphic=Object(c.d)(this._graphic))})),I)}_destroyAllVisualisations(){this.handles.remove(k.outline),this.handles.remove(k.regularVertices),this.handles.remove(k.activeVertex),this.handles.remove(I)}_getCreateOperationGeometry(e={operationComplete:!1}){if(null==this.drawOperation||0===this.drawOperation.numVertices)return null;const t=this.drawOperation.stagedVertex,n=this.drawOperation.committedVertices,r=n.slice();Object(c.k)(t)&&r.push(this.drawOperation.coordinateHelper.pointToArray(t));const i=Object(c.k)(t)?this.drawOperation.coordinateHelper.pointToArray(t):n.splice(-1)[0],a={regularVertices:null,activeVertex:null,full:null,outline:null},s=r.length,o=this.drawOperation.spatialReference,l="3d"===this.view.type&&"global"===this.view.viewingMode;switch(this.geometryType){case"point":a.regularVertices=n,a.activeVertex=i,a.full=this.drawOperation.coordinateHelper.arrayToPoint(r[0]);break;case"multipoint":a.regularVertices=n,a.activeVertex=i,s>0&&(a.full=function(e,t){return new _.a({points:e,spatialReference:t})}(r,o));break;case"polyline":a.regularVertices=n,a.activeVertex=i,s>0&&(a.full=E([r],o,l));break;case"polygon":a.regularVertices=n,a.activeVertex=i,s>0&&(a.full=S([r],o,l,!0));break;case"circle":if(s>0){const t=Object(O.a)(this.view,r[0]);if(1===s&&e.operationComplete){const e=r[0],n=t.makeMapPoint(e[0]+P*this.view.resolution,e[1]);a.full=M([e,n],t,!0)}else 2===s&&(a.full=this.forceUniformSize?M(r,t,this.centered):function(e,t,n){const r=t.mapToLocalMultiple(e),i=r[0],a=r[1],s=Math.round(a.x-i.x),o=Math.round(a.y-i.y),l=Object(O.b)(n?i.x:i.x+s/2,n?i.y:i.y+o/2),u=n?s:s/2,h=n?o:o/2,d=[],p=2*Math.PI/60;for(let c=0;c<60;c++){const e=Math.cos(c*p),t=Math.sin(c*p),n=Object(O.b)(u*e+l.x,h*t+l.y);d.push(n)}return d.push(d[0]),S([Object(c.g)(d.map((e=>t.localToMap(e))))],t.spatialReference,t.doUnnormalization,!1)}(r,t,this.centered))}break;case"rectangle":if(s>0){const t=Object(O.a)(this.view,r[0]);if(1===s&&e.operationComplete){const e=r[0],n=t.makeMapPoint(e[0]+P*this.view.resolution,e[1]);a.full=w([e,n],t,!0)}else 2===s&&(a.full=this.forceUniformSize?w(r,t,this.centered):function(e,t,n){let r=t.mapToLocalMultiple(e);if(1===r.length){const e=48,t=r[0];r=[Object(O.b)(t.x-e,t.y+e),Object(O.b)(t.x+e,t.y-e),Object(O.b)(t.x+e,t.y-e),Object(O.b)(t.x-e,t.y+e)]}const i=[],a={x:r[0].x,y:r[0].y},s={x:r[1].x,y:r[1].y};if(n){const e=Math.round(s.x-a.x),t=Math.round(s.y-a.y);i.push(Object(O.b)(a.x-e,a.y-t),Object(O.b)(s.x,a.y-t),Object(O.b)(s.x,s.y),Object(O.b)(a.x-e,s.y))}else i.push(Object(O.b)(a.x,a.y),Object(O.b)(s.x,a.y),Object(O.b)(s.x,s.y),Object(O.b)(a.x,s.y));return S([Object(c.g)(i.map((e=>t.localToMap(e))))],t.spatialReference,t.doUnnormalization,!0)}(r,t,this.centered))}break;default:return null}switch(this.geometryType){case"point":case"multipoint":break;case"polyline":case"polygon":s>1&&(a.outline=E([r],o,l));break;case"circle":case"rectangle":Object(c.k)(a.full)&&"polygon"===a.full.type&&(a.outline=S(a.full.rings,o,l))}return a}initializeGraphic(e){return null}onComplete(e){this._updateGraphic();let t=null;if(this.drawOperation.isCompleted){const e=this._getCreateOperationGeometry({operationComplete:!0});Object(c.k)(e)&&(Object(c.j)(this._graphic)?this._createGraphic(e.full):this._graphic.geometry=e.full,t=Object(c.s)(this._graphic).clone())}this.emit("complete",{graphic:t,...e})}onCursorUpdate(e){this._updateGraphic(),this.emit("cursor-update",e)}onDeactivate(){this.drawOperation.isCompleted||this.drawOperation.cancel()}onVertexAdd(e){this._updateGraphic(),this.emit("vertex-add",e)}onVertexRemove(e){this._updateGraphic(),this.emit("vertex-remove",e)}onVertexUpdate(e){this._updateGraphic(),this.emit("vertex-update",e)}_updateGraphic(){const e=this._getCreateOperationGeometry();Object(c.j)(e)?this._destroyAllVisualisations():(Object(c.k)(e.outline)?this.handles.add(this.onOutlineChanged(e.outline),k.outline):this.handles.remove(k.outline),Object(c.k)(e.regularVertices)?this.handles.add(this.onRegularVerticesChanged(e.regularVertices),k.regularVertices):this.handles.remove(k.regularVertices),Object(c.k)(e.activeVertex)?this.handles.add(this.onActiveVertexChanged(e.activeVertex),k.activeVertex):this.handles.remove(k.activeVertex),Object(c.k)(e.full)?Object(c.j)(this._graphic)?this._createGraphic(e.full):this._graphic.geometry=e.full:this.handles.remove(I))}};Object(r.a)([Object(l.b)({value:!0})],C.prototype,"centered",null),Object(r.a)([Object(l.b)({nonNullable:!0})],C.prototype,"defaultZ",void 0),Object(r.a)([Object(l.b)()],C.prototype,"drawOperation",void 0),Object(r.a)([Object(l.b)({value:!0})],C.prototype,"enabled",null),Object(r.a)([Object(l.b)({value:!0})],C.prototype,"forceUniformSize",null),Object(r.a)([Object(l.b)({constructOnly:!0})],C.prototype,"geometryType",void 0),Object(r.a)([Object(l.b)()],C.prototype,"graphic",null),Object(r.a)([Object(l.b)({constructOnly:!0})],C.prototype,"graphicProperties",void 0),Object(r.a)([Object(l.b)()],C.prototype,"graphicSymbol",null),Object(r.a)([Object(l.b)({constructOnly:!0})],C.prototype,"hasZ",void 0),Object(r.a)([Object(l.b)({constructOnly:!0})],C.prototype,"mode",void 0),Object(r.a)([Object(l.b)()],C.prototype,"snappingManager",void 0),Object(r.a)([Object(l.b)()],C.prototype,"snapToScene",void 0),Object(r.a)([Object(l.b)({readOnly:!0})],C.prototype,"type",void 0),Object(r.a)([Object(l.b)({readOnly:!0})],C.prototype,"updating",null),Object(r.a)([Object(l.b)({constructOnly:!0,nonNullable:!0})],C.prototype,"view",void 0),C=Object(r.a)([Object(h.a)("esri.views.draw.DrawGraphicTool")],C);const I="create-operation-graphic",k={outline:"outline-visual",regularVertices:"regular-vertices-visual",activeVertex:"active-vertex-visual"};function A(e){switch(e){case"point":case"polyline":case"polygon":case"multipoint":return e;case"circle":case"rectangle":return"segment";default:return null}}const P=48},119:function(e,t,n){"use strict";var r,i,a,s,o,c,l,u,h,d,p,f,m,b,g,y,O,_,v,j,x,T,E,S,w,M,R,C,I,k,A,P,L,G,V,F,N,D,U,z,H,B,W,Z,q,Y,Q,X,J,K,$,ee,te,ne,re,ie,ae,se,oe,ce;n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return y})),n.d(t,"c",(function(){return g})),n.d(t,"d",(function(){return r})),n.d(t,"e",(function(){return o})),n.d(t,"f",(function(){return l})),n.d(t,"g",(function(){return u})),n.d(t,"h",(function(){return h})),n.d(t,"i",(function(){return v})),n.d(t,"j",(function(){return j})),n.d(t,"k",(function(){return x})),n.d(t,"l",(function(){return S})),n.d(t,"m",(function(){return R})),n.d(t,"n",(function(){return C})),n.d(t,"o",(function(){return i})),n.d(t,"p",(function(){return V})),n.d(t,"q",(function(){return F})),n.d(t,"r",(function(){return U})),n.d(t,"s",(function(){return Z})),n.d(t,"t",(function(){return q})),n.d(t,"u",(function(){return Y})),n.d(t,"v",(function(){return Q})),n.d(t,"w",(function(){return re})),n.d(t,"x",(function(){return ie})),n.d(t,"y",(function(){return se})),function(e){e[e.BUTT=0]="BUTT",e[e.ROUND=1]="ROUND",e[e.SQUARE=2]="SQUARE",e[e.UNKNOWN=4]="UNKNOWN"}(r||(r={})),function(e){e[e.BEVEL=0]="BEVEL",e[e.ROUND=1]="ROUND",e[e.MITER=2]="MITER",e[e.UNKNOWN=4]="UNKNOWN"}(i||(i={})),function(e){e[e.SCREEN=0]="SCREEN",e[e.MAP=1]="MAP"}(a||(a={})),function(e){e[e.Tint=0]="Tint",e[e.Ignore=1]="Ignore",e[e.Multiply=99]="Multiply"}(s||(s={})),function(e){e.Both="Both",e.JustBegin="JustBegin",e.JustEnd="JustEnd",e.None="None"}(o||(o={})),function(e){e[e.Mosaic=0]="Mosaic",e[e.Centered=1]="Centered"}(c||(c={})),function(e){e[e.Normal=0]="Normal",e[e.Superscript=1]="Superscript",e[e.Subscript=2]="Subscript"}(l||(l={})),function(e){e[e.MSSymbol=0]="MSSymbol",e[e.Unicode=1]="Unicode"}(u||(u={})),function(e){e[e.Unspecified=0]="Unspecified",e[e.TrueType=1]="TrueType",e[e.PSOpenType=2]="PSOpenType",e[e.TTOpenType=3]="TTOpenType",e[e.Type1=4]="Type1"}(h||(h={})),function(e){e[e.Display=0]="Display",e[e.Map=1]="Map"}(d||(d={})),function(e){e[e.Z=0]="Z",e[e.X=1]="X",e[e.Y=2]="Y"}(p||(p={})),function(e){e[e.XYZ=0]="XYZ",e[e.ZXY=1]="ZXY",e[e.YXZ=2]="YXZ"}(f||(f={})),function(e){e[e.Rectangle=0]="Rectangle",e[e.RoundedRectangle=1]="RoundedRectangle",e[e.Oval=2]="Oval"}(m||(m={})),function(e){e[e.None=0]="None",e[e.Alpha=1]="Alpha",e[e.Screen=2]="Screen",e[e.Multiply=3]="Multiply",e[e.Add=4]="Add"}(b||(b={})),function(e){e[e.TTB=0]="TTB",e[e.RTL=1]="RTL",e[e.BTT=2]="BTT"}(g||(g={})),function(e){e[e.None=0]="None",e[e.SignPost=1]="SignPost",e[e.FaceNearPlane=2]="FaceNearPlane"}(y||(y={})),function(e){e[e.Float=0]="Float",e[e.String=1]="String",e[e.Boolean=2]="Boolean"}(O||(O={})),function(e){e[e.Intersect=0]="Intersect",e[e.Subtract=1]="Subtract"}(_||(_={})),function(e){e.OpenEnded="OpenEnded",e.Block="Block",e.Crossed="Crossed"}(v||(v={})),function(e){e.FullGeometry="FullGeometry",e.PerpendicularFromFirstSegment="PerpendicularFromFirstSegment",e.ReversedFirstSegment="ReversedFirstSegment",e.PerpendicularToSecondSegment="PerpendicularToSecondSegment",e.SecondSegmentWithTicks="SecondSegmentWithTicks",e.DoublePerpendicular="DoublePerpendicular",e.OppositeToFirstSegment="OppositeToFirstSegment",e.TriplePerpendicular="TriplePerpendicular",e.HalfCircleFirstSegment="HalfCircleFirstSegment",e.HalfCircleSecondSegment="HalfCircleSecondSegment",e.HalfCircleExtended="HalfCircleExtended",e.OpenCircle="OpenCircle",e.CoverageEdgesWithTicks="CoverageEdgesWithTicks",e.GapExtentWithDoubleTicks="GapExtentWithDoubleTicks",e.GapExtentMidline="GapExtentMidline",e.Chevron="Chevron",e.PerpendicularWithArc="PerpendicularWithArc",e.ClosedHalfCircle="ClosedHalfCircle",e.TripleParallelExtended="TripleParallelExtended",e.ParallelWithTicks="ParallelWithTicks",e.Parallel="Parallel",e.PerpendicularToFirstSegment="PerpendicularToFirstSegment",e.ParallelOffset="ParallelOffset",e.OffsetOpposite="OffsetOpposite",e.OffsetSame="OffsetSame",e.CircleWithArc="CircleWithArc",e.DoubleJog="DoubleJog",e.PerpendicularOffset="PerpendicularOffset",e.LineExcludingLastSegment="LineExcludingLastSegment",e.MultivertexArrow="MultivertexArrow",e.CrossedArrow="CrossedArrow",e.ChevronArrow="ChevronArrow",e.ChevronArrowOffset="ChevronArrowOffset",e.PartialFirstSegment="PartialFirstSegment",e.Arch="Arch",e.CurvedParallelTicks="CurvedParallelTicks",e.Arc90Degrees="Arc90Degrees"}(j||(j={})),function(e){e.Mitered="Mitered",e.Bevelled="Bevelled",e.Rounded="Rounded",e.Square="Square",e.TrueBuffer="TrueBuffer"}(x||(x={})),function(e){e.ClosePath="ClosePath",e.ConvexHull="ConvexHull",e.RectangularBox="RectangularBox"}(T||(T={})),function(e){e.BeginningOfLine="BeginningOfLine",e.EndOfLine="EndOfLine"}(E||(E={})),function(e){e.Mitered="Mitered",e.Bevelled="Bevelled",e.Rounded="Rounded",e.Square="Square"}(S||(S={})),function(e){e.Fast="Fast",e.Accurate="Accurate"}(w||(w={})),function(e){e.BeginningOfLine="BeginningOfLine",e.EndOfLine="EndOfLine"}(M||(M={})),function(e){e.Sinus="Sinus",e.Square="Square",e.Triangle="Triangle",e.Random="Random"}(R||(R={})),function(e){e[e.None=0]="None",e[e.Default=1]="Default",e[e.Force=2]="Force"}(C||(C={})),function(e){e[e.Buffered=0]="Buffered",e[e.Left=1]="Left",e[e.Right=2]="Right",e[e.AlongLine=3]="AlongLine"}(I||(I={})),function(e){e[e.Linear=0]="Linear",e[e.Rectangular=1]="Rectangular",e[e.Circular=2]="Circular",e[e.Buffered=3]="Buffered"}(k||(k={})),function(e){e[e.Discrete=0]="Discrete",e[e.Continuous=1]="Continuous"}(A||(A={})),function(e){e[e.AcrossLine=0]="AcrossLine",e[e.AloneLine=1]="AloneLine"}(P||(P={})),function(e){e[e.Left=0]="Left",e[e.Right=1]="Right",e[e.Center=2]="Center",e[e.Justify=3]="Justify"}(L||(L={})),function(e){e[e.Base=0]="Base",e[e.MidPoint=1]="MidPoint",e[e.ThreePoint=2]="ThreePoint",e[e.FourPoint=3]="FourPoint",e[e.Underline=4]="Underline",e[e.CircularCW=5]="CircularCW",e[e.CircularCCW=6]="CircularCCW"}(G||(G={})),function(e){e.Butt="Butt",e.Round="Round",e.Square="Square"}(V||(V={})),function(e){e.NoConstraint="NoConstraint",e.HalfPattern="HalfPattern",e.HalfGap="HalfGap",e.FullPattern="FullPattern",e.FullGap="FullGap",e.Custom="Custom"}(F||(F={})),function(e){e[e.None=-1]="None",e[e.Custom=0]="Custom",e[e.Circle=1]="Circle",e[e.OpenArrow=2]="OpenArrow",e[e.ClosedArrow=3]="ClosedArrow",e[e.Diamond=4]="Diamond"}(N||(N={})),function(e){e[e.ExtraLeading=0]="ExtraLeading",e[e.Multiple=1]="Multiple",e[e.Exact=2]="Exact"}(D||(D={})),function(e){e.Bevel="Bevel",e.Round="Round",e.Miter="Miter"}(U||(U={})),function(e){e[e.Default=0]="Default",e[e.String=1]="String",e[e.Numeric=2]="Numeric"}(z||(z={})),function(e){e[e.InsidePolygon=0]="InsidePolygon",e[e.PolygonCenter=1]="PolygonCenter",e[e.RandomlyInsidePolygon=2]="RandomlyInsidePolygon"}(H||(H={})),function(e){e[e.Tint=0]="Tint",e[e.Replace=1]="Replace",e[e.Multiply=2]="Multiply"}(B||(B={})),function(e){e[e.ClipAtBoundary=0]="ClipAtBoundary",e[e.RemoveIfCenterOutsideBoundary=1]="RemoveIfCenterOutsideBoundary",e[e.DoNotTouchBoundary=2]="DoNotTouchBoundary",e[e.DoNotClip=3]="DoNotClip"}(W||(W={})),function(e){e.NoConstraint="NoConstraint",e.WithMarkers="WithMarkers",e.WithFullGap="WithFullGap",e.WithHalfGap="WithHalfGap",e.Custom="Custom"}(Z||(Z={})),function(e){e.Fixed="Fixed",e.Random="Random",e.RandomFixedQuantity="RandomFixedQuantity"}(q||(q={})),function(e){e.LineMiddle="LineMiddle",e.LineBeginning="LineBeginning",e.LineEnd="LineEnd",e.SegmentMidpoint="SegmentMidpoint"}(Y||(Y={})),function(e){e.OnPolygon="OnPolygon",e.CenterOfMass="CenterOfMass",e.BoundingBoxCenter="BoundingBoxCenter"}(Q||(Q={})),function(e){e[e.Low=0]="Low",e[e.Medium=1]="Medium",e[e.High=2]="High"}(X||(X={})),function(e){e[e.MarkerCenter=0]="MarkerCenter",e[e.MarkerBounds=1]="MarkerBounds"}(J||(J={})),function(e){e[e.None=0]="None",e[e.PropUniform=1]="PropUniform",e[e.PropNonuniform=2]="PropNonuniform",e[e.DifUniform=3]="DifUniform",e[e.DifNonuniform=4]="DifNonuniform"}(K||(K={})),function(e){e.Tube="Tube",e.Strip="Strip",e.Wall="Wall"}($||($={})),function(e){e[e.Random=0]="Random",e[e.Increasing=1]="Increasing",e[e.Decreasing=2]="Decreasing",e[e.IncreasingThenDecreasing=3]="IncreasingThenDecreasing"}(ee||(ee={})),function(e){e[e.Relative=0]="Relative",e[e.Absolute=1]="Absolute"}(te||(te={})),function(e){e[e.Normal=0]="Normal",e[e.LowerCase=1]="LowerCase",e[e.Allcaps=2]="Allcaps"}(ne||(ne={})),function(e){e[e.LTR=0]="LTR",e[e.RTL=1]="RTL"}(re||(re={})),function(e){e.Draft="Draft",e.Picture="Picture",e.Text="Text"}(ie||(ie={})),function(e){e[e.Top=0]="Top",e[e.Center=1]="Center",e[e.Baseline=2]="Baseline",e[e.Bottom=3]="Bottom"}(ae||(ae={})),function(e){e[e.Right=0]="Right",e[e.Upright=1]="Upright"}(se||(se={})),function(e){e[e.Small=0]="Small",e[e.Medium=1]="Medium",e[e.Large=2]="Large"}(oe||(oe={})),function(e){e[e.Calm=0]="Calm",e[e.Rippled=1]="Rippled",e[e.Slight=2]="Slight",e[e.Moderate=3]="Moderate"}(ce||(ce={}))},1386:function(e,t,n){"use strict";n.r(t),n.d(t,"DrawGraphicTool2D",(function(){return _}));var r=n(79),i=(n(99),n(125)),a=n(183),s=n(85),o=n(81),c=(n(84),n(82),n(83),n(80)),l=n(889),u=(n(115),n(430)),h=n(255);const d=new u.a({data:{type:"CIMSymbolReference",symbol:{type:"CIMLineSymbol",symbolLayers:[{type:"CIMSolidStroke",effects:[{type:"CIMGeometricEffectDashes",dashTemplate:[3.75,3.75],lineDashEnding:"HalfPattern",controlPointEnding:"NoConstraint"}],enable:!0,capStyle:"Butt",joinStyle:"Round",miterLimit:10,width:1.6,color:[255,255,255,255]},{type:"CIMSolidStroke",enable:!0,capStyle:"Butt",joinStyle:"Round",miterLimit:10,width:2,color:[0,0,0,255]}]}}}),p=new h.a({style:"circle",size:6,color:[127,127,127,1],outline:{color:[50,50,50],width:1}}),f=new h.a({style:"circle",size:6,color:[255,127,0,1],outline:{color:[50,50,50],width:1}});var m=n(1186),b=n(909),g=n(892),y=n(113),O=n(216);let _=class extends m.a{constructor(e){super(e),this._visualElementGraphics={outline:null,regularVertices:null,activeVertex:null},this.activeFillSymbol=null,this.type="draw-2d",this._visualElementSymbols={outline:Object(s.t)(e.activeLineSymbol,d),regularVertices:Object(s.t)(e.regularVerticesSymbol,p),activeVertex:Object(s.t)(e.activeVertexSymbol,f),fill:Object(s.s)(e.activeFillSymbol)}}normalizeCtorArgs(e){const t={...e};return delete t.activeFillSymbol,delete t.activeVertexSymbol,delete t.regularVerticesSymbol,delete t.activeLineSymbol,t}initializeGraphic(e){return Object(s.k)(this._visualElementSymbols.fill)&&(e.symbol=this._visualElementSymbols.fill),null}makeDrawOperation(){const e=this.view;return new b.a({view:e,manipulators:this.manipulators,geometryType:Object(m.b)(this.geometryType),drawingMode:this.mode,hasZ:this.hasZ,defaultZ:this.defaultZ,snapToSceneEnabled:this.snapToScene,drawSurface:new g.b(e),hasM:!1,snappingManager:this.snappingManager,snappingVisualizer:new l.a(this.internalGraphicsLayer)})}onActiveVertexChanged(e){if("point"===this.geometryType)return null;const[t,n]=e,r=new y.a({x:t,y:n,spatialReference:this.drawOperation.spatialReference});return Object(s.k)(this._visualElementGraphics.activeVertex)?(this._visualElementGraphics.activeVertex.geometry=r,null):(this._visualElementGraphics.activeVertex=new i.a({geometry:r,symbol:this._visualElementSymbols.activeVertex,attributes:{displayOrder:2}}),this.internalGraphicsLayer.add(this._visualElementGraphics.activeVertex),this.internalGraphicsLayer.graphics.sort(v),Object(a.c)((()=>{Object(s.k)(this._visualElementGraphics.activeVertex)&&(this.internalGraphicsLayer.remove(this._visualElementGraphics.activeVertex),this._visualElementGraphics.activeVertex=Object(s.d)(this._visualElementGraphics.activeVertex))})))}onOutlineChanged(e){const t=e.clone();if("polyline"===t.type){const e=t.paths[t.paths.length-1];e.splice(0,e.length-2)}return Object(s.k)(this._visualElementGraphics.outline)?(this._visualElementGraphics.outline.geometry=t,null):(this._visualElementGraphics.outline=new i.a({geometry:t,symbol:this._visualElementSymbols.outline,attributes:{displayOrder:0}}),this.internalGraphicsLayer.add(this._visualElementGraphics.outline),this.internalGraphicsLayer.graphics.sort(v),Object(a.c)((()=>{Object(s.k)(this._visualElementGraphics.outline)&&(this.internalGraphicsLayer.remove(this._visualElementGraphics.outline),this._visualElementGraphics.outline=Object(s.d)(this._visualElementGraphics.outline))})))}onRegularVerticesChanged(e){const t=new O.a({points:e,spatialReference:this.drawOperation.spatialReference});return Object(s.k)(this._visualElementGraphics.regularVertices)?(this._visualElementGraphics.regularVertices.geometry=t,null):(this._visualElementGraphics.regularVertices=new i.a({geometry:t,symbol:this._visualElementSymbols.regularVertices,attributes:{displayOrder:1}}),this.internalGraphicsLayer.add(this._visualElementGraphics.regularVertices),this.internalGraphicsLayer.graphics.sort(v),Object(a.c)((()=>{Object(s.k)(this._visualElementGraphics.regularVertices)&&(this.internalGraphicsLayer.remove(this._visualElementGraphics.regularVertices),this._visualElementGraphics.regularVertices=Object(s.d)(this._visualElementGraphics.regularVertices))})))}};function v(e,t){var n,r,i,a;return(null!=(n=null==(r=e.attributes)?void 0:r.displayOrder)?n:-1/0)-(null!=(i=null==(a=t.attributes)?void 0:a.displayOrder)?i:-1/0)}Object(r.a)([Object(o.b)()],_.prototype,"activeFillSymbol",void 0),Object(r.a)([Object(o.b)({readOnly:!0})],_.prototype,"type",void 0),Object(r.a)([Object(o.b)({constructOnly:!0,nonNullable:!0})],_.prototype,"view",void 0),_=Object(r.a)([Object(c.a)("esri.views.2d.interactive.draw.DrawGraphicTool2D")],_)},358:function(e,t,n){"use strict";n.d(t,"a",(function(){return d})),n.d(t,"b",(function(){return u})),n.d(t,"c",(function(){return i})),n.d(t,"d",(function(){return h})),n.d(t,"e",(function(){return a})),n.d(t,"f",(function(){return s})),n.d(t,"g",(function(){return o})),n.d(t,"h",(function(){return c})),n.d(t,"i",(function(){return l}));var r=n(189);function i(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e[4]=0,e[5]=0,e}function a(e,t){const n=t[0],r=t[1],i=t[2],a=t[3],s=t[4],o=t[5];let c=n*a-r*i;return c?(c=1/c,e[0]=a*c,e[1]=-r*c,e[2]=-i*c,e[3]=n*c,e[4]=(i*o-a*s)*c,e[5]=(r*s-n*o)*c,e):null}function s(e,t,n){const r=t[0],i=t[1],a=t[2],s=t[3],o=t[4],c=t[5],l=n[0],u=n[1],h=n[2],d=n[3],p=n[4],f=n[5];return e[0]=r*l+a*u,e[1]=i*l+s*u,e[2]=r*h+a*d,e[3]=i*h+s*d,e[4]=r*p+a*f+o,e[5]=i*p+s*f+c,e}function o(e,t,n){const r=t[0],i=t[1],a=t[2],s=t[3],o=t[4],c=t[5],l=Math.sin(n),u=Math.cos(n);return e[0]=r*u+a*l,e[1]=i*u+s*l,e[2]=r*-l+a*u,e[3]=i*-l+s*u,e[4]=o,e[5]=c,e}function c(e,t,n){const r=t[0],i=t[1],a=t[2],s=t[3],o=t[4],c=t[5],l=n[0],u=n[1];return e[0]=r*l,e[1]=i*l,e[2]=a*u,e[3]=s*u,e[4]=o,e[5]=c,e}function l(e,t,n){const r=t[0],i=t[1],a=t[2],s=t[3],o=t[4],c=t[5],l=n[0],u=n[1];return e[0]=r,e[1]=i,e[2]=a,e[3]=s,e[4]=r*l+a*u+o,e[5]=i*l+s*u+c,e}function u(e,t){const n=Math.sin(t),r=Math.cos(t);return e[0]=r,e[1]=n,e[2]=-n,e[3]=r,e[4]=0,e[5]=0,e}function h(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=t[1],e[4]=0,e[5]=0,e}function d(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e[4]=t[0],e[5]=t[1],e}function p(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e[3]=t[3]-n[3],e[4]=t[4]-n[4],e[5]=t[5]-n[5],e}const f=s,m=p;Object.freeze({__proto__:null,copy:function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e},identity:i,set:function(e,t,n,r,i,a,s){return e[0]=t,e[1]=n,e[2]=r,e[3]=i,e[4]=a,e[5]=s,e},invert:a,determinant:function(e){return e[0]*e[3]-e[1]*e[2]},multiply:s,rotate:o,scale:c,translate:l,fromRotation:u,fromScaling:h,fromTranslation:d,str:function(e){return"mat2d("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+")"},frob:function(e){return Math.sqrt(e[0]**2+e[1]**2+e[2]**2+e[3]**2+e[4]**2+e[5]**2+1)},add:function(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e[3]=t[3]+n[3],e[4]=t[4]+n[4],e[5]=t[5]+n[5],e},subtract:p,multiplyScalar:function(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e[3]=t[3]*n,e[4]=t[4]*n,e[5]=t[5]*n,e},multiplyScalarAndAdd:function(e,t,n,r){return e[0]=t[0]+n[0]*r,e[1]=t[1]+n[1]*r,e[2]=t[2]+n[2]*r,e[3]=t[3]+n[3]*r,e[4]=t[4]+n[4]*r,e[5]=t[5]+n[5]*r,e},exactEquals:function(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]},equals:function(e,t){const n=e[0],i=e[1],a=e[2],s=e[3],o=e[4],c=e[5],l=t[0],u=t[1],h=t[2],d=t[3],p=t[4],f=t[5];return Math.abs(n-l)<=r.a*Math.max(1,Math.abs(n),Math.abs(l))&&Math.abs(i-u)<=r.a*Math.max(1,Math.abs(i),Math.abs(u))&&Math.abs(a-h)<=r.a*Math.max(1,Math.abs(a),Math.abs(h))&&Math.abs(s-d)<=r.a*Math.max(1,Math.abs(s),Math.abs(d))&&Math.abs(o-p)<=r.a*Math.max(1,Math.abs(o),Math.abs(p))&&Math.abs(c-f)<=r.a*Math.max(1,Math.abs(c),Math.abs(f))},mul:f,sub:m})},463:function(e,t,n){"use strict";n.d(t,"a",(function(){return s})),n.d(t,"b",(function(){return c})),n.d(t,"c",(function(){return h})),n.d(t,"d",(function(){return d})),n.d(t,"e",(function(){return p})),n.d(t,"f",(function(){return o})),n.d(t,"g",(function(){return l})),n.d(t,"h",(function(){return u}));n(409),n(82);var r=n(85),i=(n(549),n(244),n(96),n(223)),a=n(118);n(328),n(205),n(154),n(488);class s{constructor(e,t,n){this.uid=e,this.geometry=t,this.attributes=n,this.visible=!0,this.objectId=null,this.centroid=null}}function o(e){return Object(r.k)(e.geometry)}class c{constructor(){this.exceededTransferLimit=!1,this.features=[],this.fields=[],this.hasM=!1,this.hasZ=!1,this.geometryType=null,this.objectIdFieldName=null,this.globalIdFieldName=null,this.geometryProperties=null,this.geohashFieldName=null,this.spatialReference=null,this.transform=null}}function l(e,t,n,r){return{x:e,y:t,z:n,hasZ:null!=n,hasM:!1,spatialReference:r,type:"point"}}function u(e){if(Object(r.j)(e))return 0;switch(e.type){case"point":return 1;case"polyline":{let t=0;for(const n of e.paths)t+=n.length;return t}case"polygon":{let t=0;for(const n of e.rings)t+=n.length;return t}case"multipoint":return e.points.length;case"extent":return 2;case"mesh":{const t=e.vertexAttributes&&e.vertexAttributes.position;return t?t.length/3:0}default:return}}function h(e,t){switch(Object(i.h)(t),"mesh"===e.type&&(e=e.extent),e.type){case"point":t[0]=t[3]=e.x,t[1]=t[4]=e.y,e.hasZ&&(t[2]=t[5]=e.z);break;case"polyline":for(let n=0;n<e.paths.length;n++)Object(i.l)(t,e.paths[n],e.hasZ);break;case"polygon":for(let n=0;n<e.rings.length;n++)Object(i.l)(t,e.rings[n],e.hasZ);break;case"multipoint":Object(i.l)(t,e.points,e.hasZ);break;case"extent":t[0]=e.xmin,t[1]=e.ymin,t[3]=e.xmax,t[4]=e.ymax,null!=e.zmin&&(t[2]=e.zmin),null!=e.zmax&&(t[5]=e.zmax)}}function d(e,t){switch(Object(a.m)(t),"mesh"===e.type&&(e=e.extent),e.type){case"point":t[0]=t[2]=e.x,t[1]=t[3]=e.y;break;case"polyline":for(let n=0;n<e.paths.length;n++)Object(a.p)(t,e.paths[n]);break;case"polygon":for(let n=0;n<e.rings.length;n++)Object(a.p)(t,e.rings[n]);break;case"multipoint":Object(a.p)(t,e.points);break;case"extent":t[0]=e.xmin,t[1]=e.ymin,t[2]=e.xmax,t[3]=e.ymax}}function p(e,t){return null!=e.objectId?e.objectId:e.attributes&&t?e.attributes[t]:null}Object(i.f)(),Object(a.l)()},488:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));n(82),n(85);function r(e,t){return!!i(e.spatialReference,t.spatialReference)&&e.x===t.x&&e.y===t.y&&e.z===t.z&&e.m===t.m}function i(e,t){return e===t||e&&t&&e.equals(t)}},490:function(e,t,n){"use strict";n.d(t,"a",(function(){return T})),n.d(t,"b",(function(){return v})),n.d(t,"c",(function(){return j})),n.d(t,"d",(function(){return p})),n.d(t,"e",(function(){return d})),n.d(t,"f",(function(){return x})),n.d(t,"g",(function(){return f})),n.d(t,"h",(function(){return g})),n.d(t,"i",(function(){return O})),n.d(t,"j",(function(){return _})),n.d(t,"k",(function(){return y})),n.d(t,"l",(function(){return b}));n(99),n(183);var r=n(89),i=n(116),a=n(85),s=n(102),o=n(109),c=n(187),l=n(272),u=n(700),h=n(113);function d(e,t){return e.events.on("drag",function(e,t){let n=null,r=null;return i=>{if("cancel"===i.action)return void(Object(a.k)(r)&&(r.execute({action:"cancel"}),n=null,r=null));const s={action:i.action,screenStart:i.start,screenEnd:i.screenPoint};"start"===i.action&&Object(a.j)(n)&&(n=new T,r=new T,t(e,n,r,i.pointerType,s)),Object(a.k)(n)&&n.execute(s),"end"===i.action&&Object(a.k)(n)&&(n=null,r=null)}}(e,t))}function p(e,t){const n=[e.x,e.y,e.z],r=t,i=[Math.cos(r),Math.sin(r)],a=Math.sqrt(i[0]*i[0]+i[1]*i[1]);if(0===a)return null;i[0]/=a,i[1]/=a;const s=e=>{const t=(e.x-n[0])*i[0]+(e.y-n[1])*i[1];e.x=n[0]+t*i[0],e.y=n[1]+t*i[1]};return e=>(s(e.mapStart),s(e.mapEnd),e)}function f(e,t){let n=null;return r=>{if("start"===r.action&&(n=function(e,t,n){const r=e.geometry;if(Object(a.j)(r))return null;if("mesh"===r.type)return function(e,t,n,r){if(Object(a.k)(t.transform))return function(e,t,n,r){const i=m(n.getOriginPoint(t.spatialReference),r),s=t.spatialReference;return Object(a.j)(i)?null:{move:(t,r,l)=>{const h=Object(u.d)(i.clone(),t,r,l);if(h.spatialReference.equals(s))n.origin=Object(o.h)(h.x,h.y,h.z);else{const e=Object(c.j)(h,s);Object(a.k)(e)&&(n.origin=Object(o.h)(e.x,e.y,e.z))}e.notifyMeshTransformChanged(),e.notifyGeometryChanged()}}}(e,t,t.transform,n);if(!t.spatialReference.equals(n))return null;let i=0,s=0,d=0;return{move:(n,a,o)=>{const c=n-i,u=a-s,p=o-d;if(c||u||p){const f=new h.a(t.origin.x+c,t.origin.y+u,t.origin.z+p,t.origin.spatialReference);t.centerAt(f,{geographic:r===l.a.Global}),e.notifyGeometryChanged(),i=n,s=a,d=o}}}}(e,r,t,n);const i=m(r,t),s=r.spatialReference;return Object(a.j)(i)?null:{move:(t,n,r)=>{const a=Object(u.d)(i.clone(),t,n,r);a.spatialReference.equals(s)?e.geometry=a:e.geometry=Object(c.j)(a,s)}}}(e,r.mapStart.spatialReference,t)),Object(a.j)(n))return null;const i=r.mapEnd.x-r.mapStart.x,s=r.mapEnd.y-r.mapStart.y,d=r.mapEnd.z-r.mapStart.z;return n.move(i,s,d),{...r,translationX:i,translationY:s,translationZ:d}}}function m(e,t){return Object(a.j)(e)?null:e.spatialReference.equals(t)?e.clone():Object(c.j)(e,t)}function b(e,t=null,n){let r=null;const i=Object(a.k)(t)&&!e.spatialReference.equals(t)?e=>Object(a.k)(e)?Object(c.j)(e,t):e:e=>e,s={exclude:[],...n};return t=>{if("start"===t.action&&(r=i(e.toMap(t.screenStart,s))),Object(a.j)(r))return null;const n=i(e.toMap(t.screenEnd,s));return Object(a.k)(n)?{...t,mapStart:r,mapEnd:n}:null}}function g(e,t){const n=e.map((e=>Object(a.s)(f(e,t)))).filter((e=>Object(a.k)(e)));return e=>{const t=e.mapEnd.x-e.mapStart.x,r=e.mapEnd.y-e.mapStart.y,i=e.mapEnd.z-e.mapStart.z;return n.forEach((t=>t(e))),{...e,translationX:t,translationY:r,translationZ:i}}}function y(e,t){const n=new Map;for(const i of t)n.set(i,Object(r.a)(e[i]));return t=>(n.forEach(((t,n)=>{e[n]=t})),t)}function O(e){return Object(a.k)(e.geometry)&&"mesh"===e.geometry.type?function(e,t){const n=Object(a.k)(t.transform)?t.transform.clone():null,r=t.vertexAttributes.clonePositional();return i=>(t.transform=n,t.vertexAttributes=r,e.notifyGeometryChanged(),i)}(e,e.geometry):y(e,["geometry"])}function _(e){const t=e.map((e=>Object(a.s)(O(e)))).filter((e=>Object(a.k)(e)));return e=>(t.forEach((t=>t(e))),e)}function v(){let e=0,t=0,n=0;return r=>{"start"===r.action&&(e=r.mapStart.x,t=r.mapStart.y,n=r.mapStart.z);const i=r.mapEnd.x-e,a=r.mapEnd.y-t,s=r.mapEnd.z-n;return e=r.mapEnd.x,t=r.mapEnd.y,n=r.mapEnd.z,{...r,mapDeltaX:i,mapDeltaY:a,mapDeltaZ:s,mapDeltaSpatialReference:r.mapStart.spatialReference}}}function j(){let e=0,t=0;return n=>{"start"===n.action&&(e=n.screenStart.x,t=n.screenStart.y);const r=n.screenEnd.x-e,i=n.screenEnd.y-t;return e=n.screenEnd.x,t=n.screenEnd.y,{...n,screenDeltaX:r,screenDeltaY:i}}}function x(e,t){let n=null,r=0,a=0;return o=>{if("start"===o.action&&(n=e.toScreen(t),n.x<0||n.x>e.width||n.y<0||n.y>e.height?n=null:(r=o.screenStart.x-n.x,a=o.screenStart.y-n.y)),null==n)return null;const c=Object(i.e)(o.screenEnd.x-r,0,e.width),l=Object(i.e)(o.screenEnd.y-a,0,e.height),u=Object(s.e)(c,l);return o.screenStart=n,o.screenEnd=u,o}}class T{constructor(){this.execute=()=>{}}next(e,t=new T){return Object(a.k)(e)&&(this.execute=n=>{const r=e(n);Object(a.k)(r)&&t.execute(r)}),t}}},492:function(e,t,n){"use strict";n.r(t),n.d(t,"hydratedAdapter",(function(){return c}));var r=n(101),i=n(216),a=n(113),s=n(135),o=n(140);const c={convertToGEGeometry:function(e,t){if(null==t)return null;let n="cache"in t?t.cache._geVersion:void 0;return null==n&&(n=e.convertJSONToGeometry(t),"cache"in t&&(t.cache._geVersion=n)),n},exportPoint:function(e,t,n){const r=e.hasZ(t),i=e.hasM(t),s=new a.a({x:e.getPointX(t),y:e.getPointY(t),spatialReference:n});return r&&(s.z=e.getPointZ(t)),i&&(s.m=e.getPointM(t)),s.cache._geVersion=t,s},exportPolygon:function(e,t,n){const r=new s.a({rings:e.exportPaths(t),hasZ:e.hasZ(t),hasM:e.hasM(t),spatialReference:n});return r.cache._geVersion=t,r},exportPolyline:function(e,t,n){const r=new o.a({paths:e.exportPaths(t),hasZ:e.hasZ(t),hasM:e.hasM(t),spatialReference:n});return r.cache._geVersion=t,r},exportMultipoint:function(e,t,n){const r=new i.a({hasZ:e.hasZ(t),hasM:e.hasM(t),points:e.exportPoints(t),spatialReference:n});return r.cache._geVersion=t,r},exportExtent:function(e,t,n){const i=e.hasZ(t),a=e.hasM(t),s=new r.a({xmin:e.getXMin(t),ymin:e.getYMin(t),xmax:e.getXMax(t),ymax:e.getYMax(t),spatialReference:n});if(i){const n=e.getZExtent(t);s.zmin=n.vmin,s.zmax=n.vmax}if(a){const n=e.getMExtent(t);s.mmin=n.vmin,s.mmax=n.vmax}return s.cache._geVersion=t,s}}},514:function(e,t,n){"use strict";n.d(t,"a",(function(){return k})),n.d(t,"b",(function(){return O})),n.d(t,"c",(function(){return I}));var r=n(79),i=n(100),a=n(124),s=n(87),o=n(85),c=n(481),l=n(212),u=n(91),h=n(144),d=n(448),p=n(81),f=(n(84),n(82),n(83),n(80));let m=class extends i.a{constructor(){super(...arguments),this._tasks=new Array,this.running=!1}get length(){return this._tasks.length}destroy(){this.cancelAll()}runTask(e){for(;!e.done&&this._process(e);)e.madeProgress()}push(e,t,n){return this.running=!0,new Promise(((r,i)=>this._tasks.push(new b(r,i,e,t,n))))}unshift(e,t,n){return this.running=!0,new Promise(((r,i)=>this._tasks.unshift(new b(r,i,e,t,n))))}_process(e){if(0===this._tasks.length)return!1;const t=this._tasks.shift();try{const n=Object(u.m)(t.signal);if(n&&!t.abortCallback)t.reject(Object(u.d)());else{const r=n?t.abortCallback(Object(u.d)()):t.callback(e);Object(u.n)(r)?r.then(t.resolve,t.reject):t.resolve(r)}}catch(n){t.reject(n)}return this.running=this._tasks.length>0,!0}cancelAll(){const e=Object(u.d)();for(const t of this._tasks)if(t.abortCallback){const n=t.abortCallback(e);t.resolve(n)}else t.reject(e);this._tasks.length=0,this.running=!1}};Object(r.a)([Object(p.b)()],m.prototype,"running",void 0),m=Object(r.a)([Object(f.a)("esri.layers.support.PromiseQueue")],m);class b{constructor(e,t,n,r,i){this.resolve=e,this.reject=t,this.callback=n,this.signal=r,this.abortCallback=i}}var g=n(633);const y=s.a.getLogger("esri.views.support.Scheduler");var O,_;(_=O||(O={})).RESOURCE_CONTROLLER="schedule",_.SLIDE="slide",_.STREAM_DATA_LOADER="stream loader",_.ELEVATION_QUERY="elevation query",_.TERRAIN_SURFACE="terrain",_.SURFACE_GEOMETRY_UPDATES="surface geometry updates",_.GRAPHICS_CORE="Graphics3D",_.I3S_CONTROLLER="I3S",_.POINT_CLOUD_LAYER="point cloud",_.FEATURE_TILE_FETCHER="feature fetcher",_.OVERLAY="overlay",_.STAGE="stage",_.GRAPHICS_DECONFLICTOR="graphics deconflictor",_.FILTER_VISIBILITY="Graphics3D filter visibility",_.SCALE_VISIBILITY="Graphics3D scale visibility",_.FRUSTUM_VISIBILITY="Graphics3D frustum visibility",_.POINT_OF_INTEREST_FREQUENT="POI frequent",_.POINT_OF_INTEREST_INFREQUENT="POI infrequent",_.LABELER="labeler",_.FEATURE_QUERY_ENGINE="feature query",_.FEATURE_TILE_TREE="feature tile tree",_.FEATURE_TILE_TREE_ACTIVE="fast feature tile tree",_.ELEVATION_ALIGNMENT="elevation alignment",_.TEXT_TEXTURE_ATLAS="text texture atlas",_.TEXTURE_UNLOAD="texture unload",_.LINE_OF_SIGHT_TOOL="line of sight tool",_.LINE_OF_SIGHT_TOOL_INTERACTIVE="interactive line of sight tool",_.ELEVATION_PROFILE="elevation profile",_.SNAPPING="snapping",_.SHADOW_ACCUMULATOR="shadow accumulator",_.CLOUDS_GENERATOR="cloud generator",_[_.TEST_PRIO=1]="TEST_PRIO";const v=new Map([[O.RESOURCE_CONTROLLER,0],[O.SLIDE,0],[O.STREAM_DATA_LOADER,0],[O.ELEVATION_QUERY,0],[O.TERRAIN_SURFACE,1],[O.SURFACE_GEOMETRY_UPDATES,1],[O.GRAPHICS_CORE,2],[O.I3S_CONTROLLER,2],[O.POINT_CLOUD_LAYER,2],[O.FEATURE_TILE_FETCHER,2],[O.OVERLAY,4],[O.STAGE,4],[O.GRAPHICS_DECONFLICTOR,4],[O.FILTER_VISIBILITY,4],[O.SCALE_VISIBILITY,4],[O.FRUSTUM_VISIBILITY,4],[O.POINT_OF_INTEREST_FREQUENT,6],[O.POINT_OF_INTEREST_INFREQUENT,30],[O.LABELER,8],[O.FEATURE_QUERY_ENGINE,8],[O.FEATURE_TILE_TREE,16],[O.FEATURE_TILE_TREE_ACTIVE,0],[O.ELEVATION_ALIGNMENT,12],[O.TEXT_TEXTURE_ATLAS,12],[O.CLOUDS_GENERATOR,12],[O.TEXTURE_UNLOAD,12],[O.LINE_OF_SIGHT_TOOL,16],[O.LINE_OF_SIGHT_TOOL_INTERACTIVE,0],[O.SNAPPING,0],[O.SHADOW_ACCUMULATOR,30]]);function j(e){return v.has(e)?v.get(e):"number"==typeof e?e:1}var x;!function(e){e[e.ANIMATING=0]="ANIMATING",e[e.INTERACTING=1]="INTERACTING",e[e.IDLE=2]="IDLE"}(x||(x={}));const T=Object(d.a)(6.5),E=Object(d.a)(1),S=Object(d.a)(30),w=Object(d.a)(1e3/30),M=Object(d.a)(100);var R,C;!function(e){let t=class extends i.a{constructor(e){super(e),this.updating=!0,this._microTaskQueued=!1,this.performanceInfo={total:new c.a("total"),tasks:new Map},this._frameTaskTimes=new Map,this._budget=null,this._state=x.INTERACTING,this._tasks=new l.a,this._runQueue=new l.a,this._load=0,this._idleStateCallbacks=new l.a,this._idleUpdatesStartFired=!1,this._maxReschedule=A,this._forceTask=!1,this._debug=!1,this._debugHandle=Object(h.e)((()=>g.a.SCHEDULER_LOG_SLOW_TASKS),(e=>this._debug=e),h.a),this._budget=new s(e.nowFunc);for(const r of Object.keys(O))this.performanceInfo.tasks.set(O[r],new c.a(O[r]));let t;const n=this;this._test={get state(){return Object(o.t)(t,n._state)},set state(e){t=e},FRAME_SAFETY_BUDGET:T,INTERACTING_BUDGET:w,IDLE_BUDGET:M,get budget(){return n._budget.budget},usedBudget:0,setBudget:e=>n._budget=e,updateTask:e=>this._updateTask(e),getState:e=>this._getState(e),getRuntime:e=>this._getRuntime(e),frameTaskTimes:this._frameTaskTimes,resetRuntimes:()=>this._resetRuntimes(),getRunning:()=>this._getRunning()}}destroy(){this._tasks.toArray().forEach((e=>e.remove())),this._tasks.clear(),Object(o.r)(this._debugHandle),this._microTaskQueued=!1,this.updating=!1}activate(){this._budget.done||this._microTaskQueued||(this._microTaskQueued=!0,queueMicrotask((()=>{this._microTaskQueued&&(this._microTaskQueued=!1,this._budget.done||(this._maxReschedule=A,this._schedule(),this.frame()))})))}registerTask(e,t){const r=j(e),i=new n(this,e,t,r);return this._tasks.push(i),this.performanceInfo.tasks.has(e)||this.performanceInfo.tasks.set(e,new c.a(e)),i}registerIdleStateCallbacks(e,t){const n={idleBegin:e,idleEnd:t};this._idleStateCallbacks.push(n),this.state===x.IDLE&&this._idleUpdatesStartFired&&n.idleBegin();const r=this;return{remove:()=>this._removeIdleStateCallbacks(n),set idleBegin(e){r._idleUpdatesStartFired&&(n.idleEnd(),r._state===x.IDLE&&e()),n.idleBegin=e},set idleEnd(e){n.idleEnd=e}}}get now(){return this.nowFunc()}get load(){return this._load}set state(e){this._state!==e&&(this._state=e,this.state!==x.IDLE&&this._idleUpdatesStartFired&&(this._idleUpdatesStartFired=!1,this._idleStateCallbacks.forAll((e=>e.idleEnd()))))}get state(){return Object(o.j)(this._test.state)?this._state:this._test.state}updateBudget(e){this._test.usedBudget=0;let t=T,n=e.frameDuration,r=E;switch(this.state){case x.IDLE:t=Object(d.a)(0),n=Object(d.a)(Math.max(M,e.frameDuration)),r=S;break;case x.INTERACTING:n=Object(d.a)(Math.max(w,e.frameDuration));case x.ANIMATING:}return n=Object(d.a)(n-e.elapsedFrameTime-t),this.state!==x.IDLE&&n<E&&!this._forceTask?(this._forceTask=!0,!1):(n=Object(d.a)(Math.max(n,r)),this._budget.reset(n,this.state),this._maxReschedule=A,this._updateLoad(),this._schedule())}frame(){switch(this._forceTask=!1,this._microTaskQueued=!1,this.state){case x.IDLE:this._idleUpdatesStartFired||(this._idleUpdatesStartFired=!0,this._idleStateCallbacks.forAll((e=>e.idleBegin()))),this._runIdle();break;case x.INTERACTING:this._runInteracting();break;default:this._runAnimating()}this._test.usedBudget=this._budget.elapsed}stopFrame(){this._budget.reset(Object(d.a)(0),this._state),this._budget.madeProgress()}_removeIdleStateCallbacks(e){this._idleUpdatesStartFired&&e.idleEnd(),this._idleStateCallbacks.removeUnordered(e)}removeTask(e){this._tasks.removeUnordered(e),this._runQueue.removeUnordered(e)}_updateTask(e){this._tasks.forAll((t=>{t.name===e&&t.setPriority(e)}))}_getState(e){if(this._runQueue.some((t=>t.name===e)))return C.SCHEDULED;let t=C.IDLE;return this._tasks.forAll((n=>{n.name===e&&n.needsUpdate&&(n.schedulePriority<=1?t=C.READY:t!==C.READY&&(t=C.WAITING))})),t}_getRuntime(e){let t=0;return this._tasks.forAll((n=>{n.name===e&&(t+=n.runtime)})),t}_resetRuntimes(){this._tasks.forAll((e=>e.runtime=0))}_getRunning(){const e=new Map;if(this._tasks.forAll((t=>{t.needsUpdate&&e.set(t.name,(e.get(t.name)||0)+1)})),0===e.size)return null;let t="";return e.forEach(((e,n)=>{t+=e>1?` ${e}x ${n}`:` ${n}`})),t}_runIdle(){this._run()}_runInteracting(){this._run()}_runAnimating(){this._run()}_updateLoad(){const e=this._tasks.reduce(((e,t)=>t.needsUpdate?++e:e),0);this._load=.9*this._load+e*(1-.9)}_schedule(){if(this._maxReschedule<=0)return!1;for(this._runQueue.filterInPlace((e=>!!e.needsUpdate||(e.schedulePriority=e.basePriority,!1))),this._tasks.forAll((e=>{0===e.basePriority&&e.needsUpdate&&!this._runQueue.some((t=>t===e))&&this._runQueue.unshift(e)}));0===this._runQueue.length;){let e=!1,t=0;if(this._tasks.forAll((n=>{n.needsUpdate&&0!==n.schedulePriority&&0!==n.basePriority&&(e=!0,t=Math.max(t,n.basePriority),1===n.schedulePriority?(n.schedulePriority=0,this._runQueue.push(n)):--n.schedulePriority)})),!e)return this.updating=!1,!1;this._maxReschedule===A&&(this._maxReschedule=t),--this._maxReschedule}return this.updating=!0,!0}_run(){const e=this._budget.now();this._startFrameTaskTimes();do{for(;this._runQueue.length>0;){const n=this._budget.now(),r=this._runQueue.pop();this._budget.resetProgress();try{r.task.runTask(this._budget)}catch(t){y.error(`Exception in task "${r.name}"`,t)}r.schedulePriority=r.basePriority;const i=this._budget.now()-n;if(r.runtime+=i,this._frameTaskTimes.set(r.priority,this._frameTaskTimes.get(r.priority)+i),this._debug&&this._budget.elapsed>2*this._budget.budget&&console.log("Task",r.name,"used",this._budget.elapsed,"of max",this._budget.budget,"ms"),this._budget.remaining<=0)return this.updating=this._tasks.some((e=>e.needsUpdate)),void this._recordFrameTaskTimes(this._budget.now()-e)}}while(this._schedule());this.updating=this._tasks.some((e=>e.needsUpdate)),this._recordFrameTaskTimes(this._budget.now()-e)}_startFrameTaskTimes(){for(const e of Object.keys(O))this._frameTaskTimes.set(O[e],0)}_recordFrameTaskTimes(e){this._frameTaskTimes.forEach(((e,t)=>this.performanceInfo.tasks.get(t).record(e))),this.performanceInfo.total.record(e)}get test(){return this._test}};Object(r.a)([Object(p.b)()],t.prototype,"updating",void 0),Object(r.a)([Object(p.b)()],t.prototype,"nowFunc",void 0),t=Object(r.a)([Object(f.a)("esri.views.support.Scheduler")],t),e.Scheduler=t;let n=class extends i.a{constructor(e,t,n,r){super({}),this._scheduler=e,this.name=t,this._basePriority=r,this.runtime=0,this._queue=new m,this._handles=new a.a,this.schedulePriority=this._basePriority,this.task=Object(o.k)(n)?n:this._queue,this._handles.add(Object(h.f)((()=>this.task.running),(()=>e.activate())))}get updating(){return this._queue.running}normalizeCtorArgs(){return{}}remove(){this.processQueue(I),this._scheduler.removeTask(this),this.schedule=k.schedule,this.reschedule=k.reschedule,this._handles.destroy()}get basePriority(){return this._basePriority}setPriority(e){this.name=e;const t=j(e);0!==this._basePriority&&0===this.schedulePriority||(this.schedulePriority=t),this._basePriority=t}get priority(){return this.name}set priority(e){this.setPriority(e)}get needsUpdate(){return this.updating||this.task.running}schedule(e,t,n){return this._queue.push(e,t,n)}reschedule(e,t,n){return this._queue.unshift(e,t,n)}processQueue(e){this._queue.runTask(e)}};Object(r.a)([Object(p.b)({constructOnly:!0})],n.prototype,"task",void 0),Object(r.a)([Object(p.b)({readOnly:!0})],n.prototype,"updating",null),n=Object(r.a)([Object(f.a)("esri.views.support.SchedulerTask")],n);class s{constructor(e){this.now=e,this._begin=0,this._budget=0,this._state=x.IDLE,this._didWork=!1,this._enabled=!0}run(e){return!this.done&&(!0===e()&&(this._didWork=!0),!0)}get done(){return this._didWork&&this.elapsed>=this._budget&&this._enabled}get budget(){return this._budget}madeProgress(){this._didWork=!0}get state(){return this._state}get enabled(){return this._enabled}set enabled(e){this._enabled=e}reset(e,t){this._begin=this.now(),this._budget=e,this._state=t,this._didWork=!1}get remaining(){return Math.max(this._budget-this.elapsed,0)}get elapsed(){return this.now()-this._begin}resetProgress(){this._didWork=!1}get hasProgressed(){return this._didWork}}e.Budget=s}(R||(R={})),function(e){e.SCHEDULED="s",e.READY="r",e.WAITING="w",e.IDLE="i"}(C||(C={}));const I=(()=>{const e=new R.Budget((()=>performance.now()));return e.enabled=!1,e})();const k=new class{remove(){}processQueue(){}schedule(e,t,n){try{if(Object(u.m)(t)){const e=Object(u.d)();return n?Promise.resolve(n(e)):Promise.reject(e)}return Object(u.w)(e(I))}catch(r){return Promise.reject(r)}}reschedule(e,t,n){return this.schedule(e,t,n)}},A=Number.MAX_SAFE_INTEGER},543:function(e,t,n){"use strict";n.d(t,"a",(function(){return f})),n.d(t,"b",(function(){return u})),n.d(t,"c",(function(){return p})),n.d(t,"d",(function(){return R})),n.d(t,"e",(function(){return b})),n.d(t,"f",(function(){return h})),n.d(t,"g",(function(){return I})),n.d(t,"h",(function(){return l}));var r=n(367),i=n(462),a=n(109),s=n(189),o=n(117),c=n(271);function l(e,t,n){n*=.5;const r=Math.sin(n);return e[0]=r*t[0],e[1]=r*t[1],e[2]=r*t[2],e[3]=Math.cos(n),e}function u(e,t){const n=2*Math.acos(t[3]),r=Math.sin(n/2);return r>s.a?(e[0]=t[0]/r,e[1]=t[1]/r,e[2]=t[2]/r):(e[0]=1,e[1]=0,e[2]=0),n}function h(e,t,n){const r=t[0],i=t[1],a=t[2],s=t[3],o=n[0],c=n[1],l=n[2],u=n[3];return e[0]=r*u+s*o+i*l-a*c,e[1]=i*u+s*c+a*o-r*l,e[2]=a*u+s*l+r*c-i*o,e[3]=s*u-r*o-i*c-a*l,e}function d(e,t,n,r){const i=t[0],a=t[1],o=t[2],c=t[3];let l,u,h,d,p,f=n[0],m=n[1],b=n[2],g=n[3];return u=i*f+a*m+o*b+c*g,u<0&&(u=-u,f=-f,m=-m,b=-b,g=-g),1-u>s.a?(l=Math.acos(u),h=Math.sin(l),d=Math.sin((1-r)*l)/h,p=Math.sin(r*l)/h):(d=1-r,p=r),e[0]=d*i+p*f,e[1]=d*a+p*m,e[2]=d*o+p*b,e[3]=d*c+p*g,e}function p(e,t){const n=t[0],r=t[1],i=t[2],a=t[3],s=n*n+r*r+i*i+a*a,o=s?1/s:0;return e[0]=-n*o,e[1]=-r*o,e[2]=-i*o,e[3]=a*o,e}function f(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=t[3],e}function m(e,t){const n=t[0]+t[4]+t[8];let r;if(n>0)r=Math.sqrt(n+1),e[3]=.5*r,r=.5/r,e[0]=(t[5]-t[7])*r,e[1]=(t[6]-t[2])*r,e[2]=(t[1]-t[3])*r;else{let n=0;t[4]>t[0]&&(n=1),t[8]>t[3*n+n]&&(n=2);const i=(n+1)%3,a=(n+2)%3;r=Math.sqrt(t[3*n+n]-t[3*i+i]-t[3*a+a]+1),e[n]=.5*r,r=.5/r,e[3]=(t[3*i+a]-t[3*a+i])*r,e[i]=(t[3*i+n]+t[3*n+i])*r,e[a]=(t[3*a+n]+t[3*n+a])*r}return e}function b(e,t,n,r){const i=.5*Math.PI/180;t*=i,n*=i,r*=i;const a=Math.sin(t),s=Math.cos(t),o=Math.sin(n),c=Math.cos(n),l=Math.sin(r),u=Math.cos(r);return e[0]=a*c*u-s*o*l,e[1]=s*o*u+a*c*l,e[2]=s*c*l-a*o*u,e[3]=s*c*u+a*o*l,e}const g=c.c,y=c.l,O=c.a,_=h,v=c.b,j=c.d,x=c.j,T=c.e,E=T,S=c.f,w=S,M=c.k,R=c.g,C=c.h;function I(e,t,n){const r=Object(o.h)(t,n);return r<-.999999?(Object(o.g)(k,A,t),Object(o.y)(k)<1e-6&&Object(o.g)(k,P,t),Object(o.r)(k,k),l(e,k,Math.PI),e):r>.999999?(e[0]=0,e[1]=0,e[2]=0,e[3]=1,e):(Object(o.g)(k,t,n),e[0]=k[0],e[1]=k[1],e[2]=k[2],e[3]=1+r,M(e,e))}const k=Object(a.f)(),A=Object(a.h)(1,0,0),P=Object(a.h)(0,1,0);const L=Object(i.b)(),G=Object(i.b)();const V=Object(r.b)();Object.freeze({__proto__:null,identity:function(e){return e[0]=0,e[1]=0,e[2]=0,e[3]=1,e},setAxisAngle:l,getAxisAngle:u,multiply:h,rotateX:function(e,t,n){n*=.5;const r=t[0],i=t[1],a=t[2],s=t[3],o=Math.sin(n),c=Math.cos(n);return e[0]=r*c+s*o,e[1]=i*c+a*o,e[2]=a*c-i*o,e[3]=s*c-r*o,e},rotateY:function(e,t,n){n*=.5;const r=t[0],i=t[1],a=t[2],s=t[3],o=Math.sin(n),c=Math.cos(n);return e[0]=r*c-a*o,e[1]=i*c+s*o,e[2]=a*c+r*o,e[3]=s*c-i*o,e},rotateZ:function(e,t,n){n*=.5;const r=t[0],i=t[1],a=t[2],s=t[3],o=Math.sin(n),c=Math.cos(n);return e[0]=r*c+i*o,e[1]=i*c-r*o,e[2]=a*c+s*o,e[3]=s*c-a*o,e},calculateW:function(e,t){const n=t[0],r=t[1],i=t[2];return e[0]=n,e[1]=r,e[2]=i,e[3]=Math.sqrt(Math.abs(1-n*n-r*r-i*i)),e},slerp:d,random:function(e){const t=Object(s.b)(),n=Object(s.b)(),r=Object(s.b)(),i=Math.sqrt(1-t),a=Math.sqrt(t);return e[0]=i*Math.sin(2*Math.PI*n),e[1]=i*Math.cos(2*Math.PI*n),e[2]=a*Math.sin(2*Math.PI*r),e[3]=a*Math.cos(2*Math.PI*r),e},invert:p,conjugate:f,fromMat3:m,fromEuler:b,str:function(e){return"quat("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+")"},copy:g,set:y,add:O,mul:_,scale:v,dot:j,lerp:x,length:T,len:E,squaredLength:S,sqrLen:w,normalize:M,exactEquals:R,equals:C,rotationTo:I,sqlerp:function(e,t,n,r,i,a){return d(L,t,i,a),d(G,n,r,a),d(e,L,G,2*a*(1-a)),e},setAxes:function(e,t,n,r){const i=V;return i[0]=n[0],i[3]=n[1],i[6]=n[2],i[1]=r[0],i[4]=r[1],i[7]=r[2],i[2]=-t[0],i[5]=-t[1],i[8]=-t[2],M(e,m(e,i))}})},574:function(e,t,n){"use strict";var r,i,a;n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return a})),n.d(t,"c",(function(){return i})),function(e){e[e.USER=0]="USER",e[e.MANAGER=1]="MANAGER"}(r||(r={})),function(e){e[e.None=0]="None",e[e.Unfocused=1]="Unfocused",e[e.Focused=2]="Focused",e[e.Unselected=4]="Unselected",e[e.Selected=8]="Selected",e[e.All=15]="All"}(i||(i={})),function(e){e[e.None=0]="None",e[e.Custom1=16]="Custom1",e[e.Custom2=32]="Custom2",e[e.Custom3=64]="Custom3",e[e.Custom4=128]="Custom4",e[e.Custom5=256]="Custom5",e[e.Custom6=512]="Custom6",e[e.Custom7=1024]="Custom7",e[e.Custom8=2048]="Custom8",e[e.Custom9=4096]="Custom9",e[e.Custom10=8192]="Custom10",e[e.Custom11=16384]="Custom11",e[e.Custom12=32768]="Custom12",e[e.All=65520]="All"}(a||(a={}))},615:function(e,t,n){"use strict";n.r(t),n.d(t,"buffer",(function(){return w})),n.d(t,"clip",(function(){return o})),n.d(t,"contains",(function(){return l})),n.d(t,"convexHull",(function(){return v})),n.d(t,"crosses",(function(){return u})),n.d(t,"cut",(function(){return c})),n.d(t,"densify",(function(){return V})),n.d(t,"difference",(function(){return j})),n.d(t,"disjoint",(function(){return b})),n.d(t,"distance",(function(){return h})),n.d(t,"equals",(function(){return d})),n.d(t,"extendedSpatialReferenceInfo",(function(){return s})),n.d(t,"flipHorizontal",(function(){return P})),n.d(t,"flipVertical",(function(){return L})),n.d(t,"generalize",(function(){return G})),n.d(t,"geodesicArea",(function(){return U})),n.d(t,"geodesicBuffer",(function(){return M})),n.d(t,"geodesicDensify",(function(){return F})),n.d(t,"geodesicLength",(function(){return z})),n.d(t,"intersect",(function(){return T})),n.d(t,"intersects",(function(){return p})),n.d(t,"isSimple",(function(){return O})),n.d(t,"nearestCoordinate",(function(){return R})),n.d(t,"nearestVertex",(function(){return C})),n.d(t,"nearestVertices",(function(){return I})),n.d(t,"offset",(function(){return S})),n.d(t,"overlaps",(function(){return g})),n.d(t,"planarArea",(function(){return N})),n.d(t,"planarLength",(function(){return D})),n.d(t,"relate",(function(){return y})),n.d(t,"rotate",(function(){return A})),n.d(t,"simplify",(function(){return _})),n.d(t,"symmetricDifference",(function(){return x})),n.d(t,"touches",(function(){return f})),n.d(t,"union",(function(){return E})),n.d(t,"within",(function(){return m}));var r=n(518),i=n(492);function a(e){return Array.isArray(e)?e[0].spatialReference:e&&e.spatialReference}function s(e){return r.G.extendedSpatialReferenceInfo(e)}function o(e,t){return r.G.clip(i.hydratedAdapter,a(e),e,t)}function c(e,t){return r.G.cut(i.hydratedAdapter,a(e),e,t)}function l(e,t){return r.G.contains(i.hydratedAdapter,a(e),e,t)}function u(e,t){return r.G.crosses(i.hydratedAdapter,a(e),e,t)}function h(e,t,n){return r.G.distance(i.hydratedAdapter,a(e),e,t,n)}function d(e,t){return r.G.equals(i.hydratedAdapter,a(e),e,t)}function p(e,t){return r.G.intersects(i.hydratedAdapter,a(e),e,t)}function f(e,t){return r.G.touches(i.hydratedAdapter,a(e),e,t)}function m(e,t){return r.G.within(i.hydratedAdapter,a(e),e,t)}function b(e,t){return r.G.disjoint(i.hydratedAdapter,a(e),e,t)}function g(e,t){return r.G.overlaps(i.hydratedAdapter,a(e),e,t)}function y(e,t,n){return r.G.relate(i.hydratedAdapter,a(e),e,t,n)}function O(e){return r.G.isSimple(i.hydratedAdapter,a(e),e)}function _(e){return r.G.simplify(i.hydratedAdapter,a(e),e)}function v(e,t=!1){return r.G.convexHull(i.hydratedAdapter,a(e),e,t)}function j(e,t){return r.G.difference(i.hydratedAdapter,a(e),e,t)}function x(e,t){return r.G.symmetricDifference(i.hydratedAdapter,a(e),e,t)}function T(e,t){return r.G.intersect(i.hydratedAdapter,a(e),e,t)}function E(e,t=null){return r.G.union(i.hydratedAdapter,a(e),e,t)}function S(e,t,n,s,o,c){return r.G.offset(i.hydratedAdapter,a(e),e,t,n,s,o,c)}function w(e,t,n,s=!1){return r.G.buffer(i.hydratedAdapter,a(e),e,t,n,s)}function M(e,t,n,s,o,c){return r.G.geodesicBuffer(i.hydratedAdapter,a(e),e,t,n,s,o,c)}function R(e,t,n=!0){return r.G.nearestCoordinate(i.hydratedAdapter,a(e),e,t,n)}function C(e,t){return r.G.nearestVertex(i.hydratedAdapter,a(e),e,t)}function I(e,t,n,s){return r.G.nearestVertices(i.hydratedAdapter,a(e),e,t,n,s)}function k(e){return"xmin"in e?"center"in e?e.center:null:"x"in e?e:"extent"in e?e.extent.center:null}function A(e,t,n){var i;if(null==e)throw new Error("Illegal Argument Exception");const a=e.spatialReference;if(null==(n=null!=(i=n)?i:k(e)))throw new Error("Illegal Argument Exception");const s=e.constructor.fromJSON(r.G.rotate(e,t,n));return s.spatialReference=a,s}function P(e,t){var n;if(null==e)throw new Error("Illegal Argument Exception");const i=e.spatialReference;if(null==(t=null!=(n=t)?n:k(e)))throw new Error("Illegal Argument Exception");const a=e.constructor.fromJSON(r.G.flipHorizontal(e,t));return a.spatialReference=i,a}function L(e,t){var n;if(null==e)throw new Error("Illegal Argument Exception");const i=e.spatialReference;if(null==(t=null!=(n=t)?n:k(e)))throw new Error("Illegal Argument Exception");const a=e.constructor.fromJSON(r.G.flipVertical(e,t));return a.spatialReference=i,a}function G(e,t,n,s){return r.G.generalize(i.hydratedAdapter,a(e),e,t,n,s)}function V(e,t,n){return r.G.densify(i.hydratedAdapter,a(e),e,t,n)}function F(e,t,n,s=0){return r.G.geodesicDensify(i.hydratedAdapter,a(e),e,t,n,s)}function N(e,t){return r.G.planarArea(i.hydratedAdapter,a(e),e,t)}function D(e,t){return r.G.planarLength(i.hydratedAdapter,a(e),e,t)}function U(e,t,n){return r.G.geodesicArea(i.hydratedAdapter,a(e),e,t,n)}function z(e,t,n){return r.G.geodesicLength(i.hydratedAdapter,a(e),e,t,n)}},633:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(79),i=n(100),a=n(81),s=(n(84),n(82),n(83),n(80));let o=class extends i.a{constructor(){super(...arguments),this.SCHEDULER_LOG_SLOW_TASKS=!1,this.FEATURE_SERVICE_SNAPPING_SOURCE_TILE_TREE_SHOW_TILES=!1}};Object(r.a)([Object(a.b)()],o.prototype,"SCHEDULER_LOG_SLOW_TASKS",void 0),Object(r.a)([Object(a.b)()],o.prototype,"FEATURE_SERVICE_SNAPPING_SOURCE_TILE_TREE_SHOW_TILES",void 0),o=Object(r.a)([Object(s.a)("esri.views.support.DebugFlags")],o);const c=new o},675:function(e,t,n){"use strict";n.d(t,"a",(function(){return f}));var r=n(79),i=n(100),a=n(87),s=n(85),o=n(91),c=n(81),l=(n(84),n(82),n(83),n(80)),u=n(701),h=n(574),d=n(745);const p=a.a.getLogger("esri.views.interactive.InteractiveToolBase");let f=class extends i.a{constructor(e){super(e),this.manipulators=new d.a,this.updating=!1,this.automaticManipulatorSelection=!0,this._editableFlags=new Map([[h.a.MANAGER,!0],[h.a.USER,!0]]),this._creationStartedResolver=Object(o.f)(),this._creationFinishedResolver=Object(o.f)()}set toolState(e){this._set("toolState",e),this._syncVisible()}get active(){return null!=this.view&&this.view.activeTool===this}set visible(e){this._get("visible")!==e&&(this._set("visible",e),this._syncVisible())}get editable(){return this.getEditableFlag(h.a.USER)}set editable(e){this.setEditableFlag(h.a.USER,e)}get created(){return"created"===this.toolState}get cursor(){return null}initialize(){this._syncVisible()}destroy(){this.manipulators.destroy(),this._set("view",null)}activate(){Object(s.j)(this.view)?p.error("Can't activate tool if view is not defined."):(Object(u.b)(this.view)&&this.view.focus(),this.onActivate())}deactivate(){this.onDeactivate()}handleInputEvent(e){this.onInputEvent(e)}handleInputEventAfter(e){this.onInputEventAfter(e)}setEditableFlag(e,t){this._editableFlags.set(e,t),this.manipulators.isToolEditable=this.internallyEditable,this._updateManipulatorAttachment(),e===h.a.USER&&this.notifyChange("editable"),this.onEditableChange()}getEditableFlag(e){return this._editableFlags.get(e)}whenCreationStarted(){return this._creationStartedResolver.promise}whenCreated(){return this._creationFinishedResolver.promise}rejectCreation(e){"pending"!==this.toolState&&"creating"!==this.toolState||this._creationStartedResolver.resolve(this),this._creationFinishedResolver.reject(e)}onActivate(){}onDeactivate(){}onShow(){}onHide(){}onEditableChange(){}onInputEvent(e){}onInputEventAfter(e){}get internallyEditable(){return this.getEditableFlag(h.a.USER)&&this.getEditableFlag(h.a.MANAGER)}startToolCreation(){if("pending"===this.toolState)return this._creationStartedResolver.resolve(this),void(this.toolState="creating");throw new Error(`Unexpected tool state ${this.toolState}`)}finishToolCreation(){switch(this.toolState){case"pending":this.startToolCreation();case"creating":this.created||this._creationFinishedResolver.resolve(this),this.toolState="created";break;case"created":break;default:throw new Error(`Unexpected tool state ${this.toolState}`)}}_syncVisible(){if("pending"!==this.toolState)if(this.visible)this._show();else if(this._hide(),this.active)return void(this.view.activeTool=null)}_show(){this._updateManipulatorAttachment(),this.onShow()}_hide(){this._updateManipulatorAttachment(),this.onHide()}_updateManipulatorAttachment(){this.visible?this.manipulators.attach():this.manipulators.detach()}};Object(r.a)([Object(c.b)({value:"pending"})],f.prototype,"toolState",null),Object(r.a)([Object(c.b)({constructOnly:!0})],f.prototype,"view",void 0),Object(r.a)([Object(c.b)({readOnly:!0})],f.prototype,"active",null),Object(r.a)([Object(c.b)({value:!0})],f.prototype,"visible",null),Object(r.a)([Object(c.b)({value:!0})],f.prototype,"editable",null),Object(r.a)([Object(c.b)({readOnly:!0})],f.prototype,"created",null),Object(r.a)([Object(c.b)({readOnly:!0})],f.prototype,"manipulators",void 0),Object(r.a)([Object(c.b)({readOnly:!0})],f.prototype,"updating",void 0),Object(r.a)([Object(c.b)()],f.prototype,"cursor",null),Object(r.a)([Object(c.b)()],f.prototype,"automaticManipulatorSelection",void 0),f=Object(r.a)([Object(l.a)("esri.views.interactive.InteractiveToolBase")],f)},745:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r,i,a=n(111),s=n(85);(i=r||(r={}))[i.WhenToolEditable=0]="WhenToolEditable",i[i.WhenToolNotEditable=1]="WhenToolNotEditable",i[i.Always=2]="Always";class o{constructor(){this._isToolEditable=!0,this._manipulators=new a.a,this._nextManipulatorId=0,this._resourceContexts={manipulator3D:{}},this._attached=!1}set isToolEditable(e){this._isToolEditable=e}get length(){return this._manipulators.length}add(e,t=r.WhenToolEditable){return this.addMany([e],t)[0]}addMany(e,t=r.WhenToolEditable){return e.map((e=>{const n=this._nextManipulatorId++,r={id:n,manipulator:e,visibilityPredicate:t,attached:!1};return this._manipulators.add(r),this._attached&&this._updateManipulatorAttachment(r),n}))}remove(e){if("number"==typeof e){const t=e;for(let e=0;e<this._manipulators.length;e++)if(this._manipulators.getItemAt(e).id===t){const t=this._manipulators.splice(e,1)[0];return this._detachManipulator(t),t.id}return null}const t=e;for(let n=0;n<this._manipulators.length;n++)if(this._manipulators.getItemAt(n).manipulator===t){const e=this._manipulators.splice(n,1)[0];return this._detachManipulator(e),e.id}return null}removeAll(){this._manipulators.forEach((e=>{this._detachManipulator(e)})),this._manipulators.removeAll()}attach(){this._manipulators.forEach((e=>{this._updateManipulatorAttachment(e)})),this._attached=!0}detach(){this._manipulators.forEach((e=>{this._detachManipulator(e)})),this._attached=!1}destroy(){this._manipulators.forEach((({manipulator:e})=>{e.destroy&&e.destroy()})),this._manipulators.destroy(),this._resourceContexts=null}on(e,t){return this._manipulators.on(e,(e=>{t(e)}))}forEach(e){for(const t of this._manipulators.items)e(t)}some(e){return this._manipulators.items.some(e)}toArray(){const e=[];return this.forEach((t=>e.push(t.manipulator))),e}intersect(e,t){let n=null,r=Number.MAX_VALUE;return this._manipulators.forEach((({id:i,manipulator:a,attached:o})=>{if(!o||!a.interactive)return;const c=a.intersectionDistance(e,t);Object(s.k)(c)&&c<r&&(r=c,n={id:i,manipulator:a})})),n}findById(e){if(Object(s.j)(e))return null;for(const t of this._manipulators.items)if(e===t.id)return t.manipulator;return null}_updateManipulatorAttachment(e){this._isManipulatorItemVisible(e)?this._attachManipulator(e):this._detachManipulator(e)}_attachManipulator(e){e.attached||(e.manipulator.attach&&e.manipulator.attach(this._resourceContexts),e.attached=!0)}_detachManipulator(e){if(!e.attached)return;const t=e.manipulator;t.grabbing=!1,t.dragging=!1,t.hovering=!1,t.selected=!1,t.detach&&t.detach(this._resourceContexts),e.attached=!1}_isManipulatorItemVisible(e){return e.visibilityPredicate===r.Always||(this._isToolEditable?e.visibilityPredicate===r.WhenToolEditable:e.visibilityPredicate===r.WhenToolNotEditable)}}},758:function(e,t,n){"use strict";function r(){return[1,0,0,1,0,0]}function i(e){return[e[0],e[1],e[2],e[3],e[4],e[5]]}n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return r}));Object.freeze({__proto__:null,create:r,clone:i,fromValues:function(e,t,n,r,i,a){return[e,t,n,r,i,a]},createView:function(e,t){return new Float64Array(e,t,6)}})},766:function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return r}));const r=["freehand","hybrid","click"],i="click"},794:function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return h}));var r=n(105);const i={main:new r.a([255,127,0]),selected:new r.a([255,255,255]),outline:new r.a([0,0,0,.5]),selectedOutline:new r.a([255,255,255]),hoverOutline:new r.a([255,255,255]),secondary:new r.a([255,255,255]),secondaryOutline:new r.a([100,100,100]),transparent:new r.a([0,0,0,0])};function a(e,t){if(t)for(const n in t)e[n]=t[n]}class s{constructor(e){this.size=8,this.hoverSize=10,this.color=i.main,this.hoverColor=i.main,this.outlineColor=i.outline,this.hoverOutlineColor=i.hoverOutline,a(this,e)}}class o{constructor(e){this.color=i.secondary,this.hoverColor=i.main,a(this,e)}}class c{constructor(e){this.color=i.transparent,this.hoverColor=i.transparent,this.outlineColor=i.main,this.hoverOutlineColor=i.main,this.stagedColor=i.transparent,this.stagedOutlineColor=i.secondary,a(this,e)}}class l{constructor(e){this.vertex=new s,this.midpoint=new s({color:i.secondary,outlineColor:i.secondaryOutline,size:6}),this.selected=new s({color:i.selected,hoverColor:i.selected,hoverOutlineColor:i.hoverOutline}),a(this,e)}}class u{constructor(e){this.center=new s({color:i.secondaryOutline}),this.fill=new c,this.line=new o,this.vertex=new s({color:i.selected,outlineColor:i.main,hoverColor:i.selected,hoverOutlineColor:i.secondaryOutline}),a(this,e)}}const h=new class{constructor(e){this.reshapeGraphics=new l,this.transformGraphics=new u,a(this,e)}}},795:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var r=n(85),i=n(91),a=n(488),s=n(490),o=n(712),c=n(514);class l{constructor(){this.next=new s.a}createSnapDragEventPipelineStep({predicate:e=(()=>!0),cancel:t,snappingManager:n,snappingContext:l,updatingHandles:u}){if(Object(r.j)(n))return e=>e;let h=null,d=null;const p=()=>{h=Object(r.a)(h),n.doneSnapping(),Object(r.k)(d)&&d.frameTask.remove(),d=null};return t.next((e=>(p(),e))),this.next=new s.a,t=>{if(!e(t))return t;if(h=Object(r.a)(h),"start"===t.action){const e="3d"===n.view.type?n.view.resourceController.scheduler.registerTask(c.b.SNAPPING):c.a;d={context:new o.a({editGeometryOperations:l.editGeometryOperations,elevationInfo:l.elevationInfo,pointer:l.pointer,vertexHandle:Object(r.k)(t.info)?t.info.handle:null,excludeFeature:l.excludeFeature,visualizer:l.visualizer}),originalPos:Object(r.k)(t.snapOrigin)?l.coordinateHelper.vectorToDehydratedPoint(t.snapOrigin):t.mapStart,frameTask:e}}if(Object(r.k)(d)){const e=d.context.coordinateHelper.vectorToDehydratedPoint(d.context.coordinateHelper.arrayToVector([d.originalPos.x,d.originalPos.y,d.originalPos.z]));e.x+=t.mapEnd.x-t.mapStart.x,e.y+=t.mapEnd.y-t.mapStart.y;const r=t.mapStart.x-d.originalPos.x,s=t.mapStart.y-d.originalPos.y,o={...t,action:"udpate"},c=d.context,l=n.update(e,d.context);if(t.mapEnd.x=l.x+r,t.mapEnd.y=l.y+s,"end"!==t.action){const t=d.frameTask;h=Object(i.g)((async i=>{const u=await t.schedule((()=>n.snap(e,c,i)),i);if(u.valid){const e=await t.schedule((()=>u.apply()),i);Object(a.a)(e,l)||(o.mapEnd.x=e.x+r,o.mapEnd.y=e.y+s,this.next.execute(o))}})),u.addPromise(h.promise)}}return"end"===t.action&&p(),t}}}},825:function(e,t,n){"use strict";n.d(t,"a",(function(){return g})),n.d(t,"b",(function(){return p}));n(99);var r=n(85),i=n(358),a=n(758),s=n(543),o=n(462),c=n(117),l=n(109),u=n(584),h=n(113);function d(e,t,n=null){return Object(r.k)(n)?[e,t,n]:[e,t]}function p(e,t,n=null){return Object(r.k)(n)?{x:e,y:t,z:n}:{x:e,y:t}}class f{constructor(e){this.spatialReference=e}mapToLocalMultiple(e){return Object(r.g)(e.map((e=>this.mapToLocal(e))))}get doUnnormalization(){return!1}}class m extends f{constructor(e,t,n=null){super(t),this.defaultZ=n,this.transform=Object(a.b)(),this.transformInv=Object(a.b)(),this.transform=Object(a.a)(e),Object(i.e)(this.transformInv,this.transform)}makeMapPoint(e,t){return d(e,t,this.defaultZ)}mapToLocal(e){return p(this.transform[0]*e[0]+this.transform[2]*e[1]+this.transform[4],this.transform[1]*e[0]+this.transform[3]*e[1]+this.transform[5])}localToMap(e){return d(this.transformInv[0]*e.x+this.transformInv[2]*e.y+this.transformInv[4],this.transformInv[1]*e.x+this.transformInv[3]*e.y+this.transformInv[5],this.defaultZ)}}class b extends f{constructor(e,t){super(e.spatialReference),this.view=e,this.defaultZ=null,this.pWS=Object(l.f)(),this.tangentFrameUpWS=Object(l.f)(),this.tangentFrameRightWS=Object(l.f)(),this.tangentFrameForwardWS=Object(l.f)(),this.localFrameRightWS=Object(l.f)(),this.localFrameUpWS=Object(l.f)(),this.worldToLocalTransform=Object(o.b)(),this.localToWorldTransform=Object(o.b)(),this.scale=1,this.scale=e.resolution,this.referenceMapPoint=t,this.defaultZ=t.hasZ?t.z:null;const n=e.state.camera.viewRight;this.view.renderCoordsHelper.toRenderCoords(this.referenceMapPoint,this.pWS),this.view.renderCoordsHelper.worldBasisAtPosition(this.pWS,u.a.X,this.tangentFrameRightWS),this.view.renderCoordsHelper.worldBasisAtPosition(this.pWS,u.a.Y,this.tangentFrameUpWS),this.view.renderCoordsHelper.worldBasisAtPosition(this.pWS,u.a.Z,this.tangentFrameForwardWS);const r=Object(l.f)();Object(c.e)(r,this.tangentFrameForwardWS,Object(c.h)(n,this.tangentFrameForwardWS)),Object(c.j)(this.localFrameRightWS,n,r),Object(c.r)(this.localFrameRightWS,this.localFrameRightWS),Object(c.g)(this.localFrameUpWS,this.tangentFrameForwardWS,this.localFrameRightWS),Object(s.g)(this.worldToLocalTransform,this.localFrameRightWS,this.tangentFrameRightWS),Object(s.c)(this.localToWorldTransform,this.worldToLocalTransform)}get doUnnormalization(){return"global"===this.view.viewingMode}makeMapPoint(e,t){return d(e,t,this.defaultZ)}mapToLocal(e){const t=Object(l.f)();this.view.renderCoordsHelper.toRenderCoords(new h.a({x:e[0],y:e[1],spatialReference:this.spatialReference}),t),Object(c.u)(t,t,this.worldToLocalTransform);const n=this.view.renderCoordsHelper.fromRenderCoords(t,this.view.spatialReference);return Object(r.k)(n)?p(n.x/this.scale,n.y/this.scale):null}localToMap(e){const t=Object(l.f)();this.view.renderCoordsHelper.toRenderCoords(new h.a({x:e.x*this.scale,y:e.y*this.scale,spatialReference:this.spatialReference}),t),Object(c.u)(t,t,this.localToWorldTransform);const n=this.view.renderCoordsHelper.fromRenderCoords(t,this.view.spatialReference);return Object(r.k)(n)?d(n.x,n.y,this.defaultZ):null}}function g(e,t){if("2d"===e.type)return new m(e.state.transform,e.spatialReference,t.length>2?t[2]:null);if("3d"===e.type){const n=t.length>2?new h.a({x:t[0],y:t[1],z:t[2],spatialReference:e.spatialReference}):new h.a({x:t[0],y:t[1],spatialReference:e.spatialReference});return new b(e,n)}return null}},889:function(e,t,n){"use strict";n.d(t,"a",(function(){return y}));n(99);var r=n(125),i=(n(115),n(183)),a=n(102),s=n(151),o=n(219),c=n(109),l=n(119),u=n(794),h=n(684),d=n(999),p=n(255),f=n(199),m=n(430),b=n(113),g=n(140);class y extends d.a{constructor(e){super(),this.graphicsLayer=e}visualizeIntersectionPoint(e,t){return this._visualizeSnappingIndicator(new b.a({x:e.intersectionPoint[0],y:e.intersectionPoint[1],spatialReference:t.coordinateHelper.spatialReference}),v)}visualizePoint(e,t){return this._visualizeSnappingIndicator(new b.a({x:e.point[0],y:e.point[1],spatialReference:t.coordinateHelper.spatialReference}),j)}visualizeLine(e,t){return this._visualizeSnappingIndicator(new g.a({paths:[[e.lineStart,e.lineEnd]],spatialReference:t.coordinateHelper.spatialReference}),x)}visualizeParallelSign(e,t){return this._visualizeSnappingIndicator(new g.a({paths:[[e.lineStart,e.lineEnd]],spatialReference:t.coordinateHelper.spatialReference}),T)}visualizeRightAngleQuad(e,t){return this._visualizeSnappingIndicator(new g.a({paths:[[e.previousVertex,e.centerVertex,e.nextVertex]],spatialReference:t.coordinateHelper.spatialReference}),M(e))}_visualizeSnappingIndicator(e,t){const n=new r.a({geometry:e,symbol:t});return this.graphicsLayer.add(n),Object(i.c)((()=>{this.graphicsLayer.remove(n)}))}}const O=u.a.main.toArray(),_=[...u.a.main.toRgb(),100],v=new p.a({outline:new f.a({width:1.5,color:O}),size:15,color:[0,0,0,0]}),j=new p.a({outline:{width:.5,color:[0,0,0,1]},size:10,color:O}),x=new m.a({data:{type:"CIMSymbolReference",symbol:{type:"CIMLineSymbol",symbolLayers:[{type:"CIMSolidStroke",enable:!0,capStyle:l.p.Butt,joinStyle:l.r.Round,miterLimit:10,width:Object(a.h)(h.a.lineHintWidthTarget),color:O}]}}}),T=new m.a({data:{type:"CIMSymbolReference",symbol:{type:"CIMLineSymbol",symbolLayers:[{type:"CIMVectorMarker",enable:!0,anchorPoint:{x:0,y:-1,z:0},anchorPointUnits:"Relative",size:5,markerPlacement:{type:"CIMMarkerPlacementOnLine",placePerPart:!0,angleToLine:!0,relativeTo:"LineMiddle"},frame:{xmin:-5,ymin:-1.5,xmax:5,ymax:1.5},markerGraphics:[{type:"CIMMarkerGraphic",geometry:{rings:[[[7,0],[-7,0],[-7,1.5],[7,1.5]]]},symbol:{type:"CIMPolygonSymbol",symbolLayers:[{type:"CIMSolidFill",enable:!0,color:O}]}}],scaleSymbolsProportionally:!0,respectFrame:!0},{type:"CIMVectorMarker",enable:!0,anchorPoint:{x:0,y:1,z:0},anchorPointUnits:"Relative",size:5,markerPlacement:{type:"CIMMarkerPlacementOnLine",placePerPart:!0,angleToLine:!0,relativeTo:"LineMiddle"},frame:{xmin:-5,ymin:-1.5,xmax:5,ymax:1.5},markerGraphics:[{type:"CIMMarkerGraphic",geometry:{rings:[[[7,0],[-7,0],[-7,-1.5],[7,-1.5]]]},symbol:{type:"CIMPolygonSymbol",symbolLayers:[{type:"CIMSolidFill",enable:!0,color:O}]}}],scaleSymbolsProportionally:!0,respectFrame:!0}]}}}),E=e=>new m.a({data:{type:"CIMSymbolReference",symbol:{type:"CIMLineSymbol",symbolLayers:[{type:"CIMVectorMarker",enable:!0,anchorPoint:{x:.5,y:.5,z:0},anchorPointUnits:"Relative",size:Object(a.h)(h.a.rightAngleHintSize),rotation:e,markerPlacement:{type:"CIMMarkerPlacementOnVertices",placePerPart:!0,angleToLine:!0,placeOnEndPoints:!1},frame:{xmin:-5,ymin:-5,xmax:5,ymax:5},markerGraphics:[{type:"CIMMarkerGraphic",geometry:{paths:[[[5,-5],[-5,-5],[-5,5],[5,5],[5,-5]]]},symbol:{type:"CIMLineSymbol",symbolLayers:[{type:"CIMSolidStroke",enable:!0,capStyle:"Butt",joinStyle:"Round",miterLimit:10,width:Object(a.h)(h.a.rightAngleHintOutlineSize),color:O},{type:"CIMSolidFill",enable:!0,color:_}]}}],scaleSymbolsProportionally:!0,respectFrame:!0}]}}}),S=E(45),w=E(225),M=(()=>{const e=Object(o.a)(),t=Object(o.a)(),n=Object(c.f)();return r=>(Object(s.f)(e,r.centerVertex,r.previousVertex),Object(s.f)(t,r.nextVertex,r.previousVertex),Object(s.j)(n,e,t),n[2]<0?S:w)})()},892:function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return l})),n.d(t,"c",(function(){return c}));var r=n(85),i=n(102),a=n(463),s=n(416);class o{constructor(e,t,n,r=null){this.elevationInfo=e,this.defaultZ=t,this.view=n,this.excludeGraphics=r}screenToMap(e){if(Object(r.k)(this.defaultZ))return this.view.sceneIntersectionHelper.intersectElevationFromScreen(Object(i.f)(e.x,e.y),this.elevationInfo,this.defaultZ,this.excludeGraphics);const t=this.view.sceneIntersectionHelper.intersectElevationFromScreen(Object(i.f)(e.x,e.y),this.elevationInfo,0,this.excludeGraphics);return Object(r.k)(t)&&(t.z=void 0),t}mapToScreen(e){const t=Object(a.g)(e.x,e.y,Object(s.a)(this.view,e,this.elevationInfo),e.spatialReference);return this.view.toScreen(t)}}class c{constructor(e,t,n=[]){this.view=e,this.elevationInfo=t,this.exclude=n}screenToMap(e){const t=this.view.toMap(e,{exclude:this.exclude});return Object(r.k)(t)&&(t.z=Object(s.g)(t,this.view,this.elevationInfo)),t}mapToScreen(e){let t=e;return Object(r.k)(this.elevationInfo)&&(t=Object(a.g)(e.x,e.y,Object(s.a)(this.view,e,this.elevationInfo),e.spatialReference)),this.view.toScreen(t)}}class l{constructor(e){this.view=e,this.screenToMap=t=>e.toMap(t),this.mapToScreen=t=>e.toScreen(t)}}},909:function(e,t,n){"use strict";n.d(t,"a",(function(){return x}));var r=n(79),i=n(138),a=n(134),s=n(89),o=n(85),c=n(91),l=n(102),u=n(81),h=(n(83),n(80)),d=n(488),p=n(272);class f{constructor({grabbableForEvent:e}){this.events=new i.a,this.interactive=!0,this.selectable=!1,this.cursor=null,this.grabbable=!0,this.grabbableForEvent=e}intersectionDistance(e,t){return 0}attach(){}detach(){}}var m=n(766),b=n(891),g=n(490),y=n(736),O=n(735),_=n(712),v=n(795),j=n(514);let x=class extends(i.a.EventedMixin(a.a)){constructor(e){super(e),this._createOperationCompleted=!1,this._pointerDownStates=new Set,this._snappingPipeline=new v.a,this._snappingTask=null,this._stagedVertex=null,this.snapToSceneEnabled=null,Object(o.j)(e.elevationInfo)&&(this.elevationInfo={mode:e.hasZ?"absolute-height":"on-the-ground",offset:0})}initialize(){var e,t;this.coordinateHelper=Object(b.a)(this.hasZ,this.hasM,this.view.spatialReference);const n="3d"===this.view.type?null==(e=this.view)||null==(t=e.resourceController)?void 0:t.scheduler:null;this._frameTask=n?n.registerTask(j.b.SNAPPING):j.a;const r="viewingMode"in this.view.state?this.view.state.viewingMode:p.a.Local,i="segment"===this.geometryType||"multipoint"===this.geometryType?"polyline":this.geometryType;this._editGeometryOperations=new O.a(new y.c(i,this.coordinateHelper,r)),this._activeComponent=new y.a(this.spatialReference,r),this._editGeometryOperations.data.components.push(this._activeComponent),this.handles.add(this._editGeometryOperations.on(["vertex-add","vertex-update","vertex-remove"],(e=>{const t=e.vertices.map((e=>({componentIndex:0,vertexIndex:e.index,coordinates:this.coordinateHelper.vectorToArray(e.pos)}))),n=t.map((e=>e.coordinates));switch(e.type){case"vertex-add":this.emit(e.type,{...e,added:n,vertices:t});break;case"vertex-update":this.emit(e.type,{...e,updated:n,vertices:t});break;case"vertex-remove":this.emit(e.type,{...e,removed:n,vertices:t})}}))),this._manipulator=new f({grabbableForEvent:e=>"click"!==this.drawingMode||"touch"===e.pointerType&&this._snappingEnabled&&1===this._pointerDownStates.size}),this.manipulators.add(this._manipulator),this._manipulator.grabbable="point"!==this.geometryType,this.handles.add([this._createManipulatorDragPipeline(this._manipulator),this._manipulator.events.on("immediate-click",(e=>this._onImmediateClick(e))),this._manipulator.events.on("immediate-double-click",(e=>this._onImmediateDoubleClick(e)))])}destroy(){this._editGeometryOperations=Object(o.d)(this._editGeometryOperations),this._frameTask=Object(o.r)(this._frameTask)}get _snappingEnabled(){return Object(o.k)(this.snappingManager)&&this.snappingManager.options.effectiveEnabled}get canRedo(){return this._editGeometryOperations.canRedo}get canUndo(){return this._editGeometryOperations.canUndo}get committedVertices(){return this._activeComponent.vertices.map((e=>this.coordinateHelper.vectorToArray(e.pos)))}set drawingMode(e){this._set("drawingMode",null!=e?e:m.a)}get hasStagedVertex(){return Object(o.k)(this._stagedVertex)}get interactive(){return this._manipulator.interactive}set interactive(e){this._manipulator.interactive=e}get isCompleted(){return this._createOperationCompleted}get numCommittedVertices(){return this._activeComponent.vertices.length}get numVertices(){return Object(o.k)(this._stagedVertex)?this._activeComponent.vertices.length+1:this._activeComponent.vertices.length}get spatialReference(){return this.view.spatialReference}get stagedVertex(){return this._stagedVertex}set stagedVertex(e){if(Object(o.j)(e))this.discardStagedVertex();else if(!Object(o.k)(this._stagedVertex)||!Object(d.a)(this._stagedVertex,e)){if(Object(o.j)(this._stagedVertex))this._stagedVertex=Object(s.a)(e);else{if(Object(d.a)(this._stagedVertex,e))return;this._stagedVertex.x=e.x,this._stagedVertex.y=e.y,this._stagedVertex.z=e.z,this._stagedVertex.m=e.m,this._stagedVertex.hasZ=e.hasZ,this._stagedVertex.hasM=e.hasM,this._stagedVertex.spatialReference=e.spatialReference}this.emit("cursor-update",{updated:null,vertices:[{componentIndex:0,vertexIndex:this._activeComponent.vertices.length,coordinates:this.coordinateHelper.pointToArray(e)}],operation:"apply",type:"vertex-update"})}}get updating(){return this.updatingHandles.updating}get vertices(){const e=this.committedVertices;return Object(o.k)(this._stagedVertex)&&e.push(this.coordinateHelper.pointToArray(this._stagedVertex)),e}cancel(){this.complete({aborted:!0})}commitStagedVertex(){if(this._snappingTask=Object(o.a)(this._snappingTask),Object(o.k)(this._stagedVertex)){const e=this._stagedVertex;this._stagedVertex=null,this._editGeometryOperations.appendVertex(this.coordinateHelper.pointToVector(e))}}complete(e){const t=e&&e.aborted||!1;Object(o.a)(this._snappingTask),Object(o.k)(this.snappingManager)&&this.snappingManager.doneSnapping(),"segment"===this.geometryType||"point"===this.geometryType?this.commitStagedVertex():this.discardStagedVertex();const n="multipoint"===this.geometryType&&0===this.numVertices||"polyline"===this.geometryType&&this.numVertices<2||"polygon"===this.geometryType&&this.numVertices<3;this._createOperationCompleted=!n,(this.isCompleted||t)&&this.emit("complete",{vertices:this.vertices.map(((e,t)=>({componentIndex:0,vertexIndex:t,coordinates:e}))),aborted:t,type:"complete"})}discardStagedVertex(){this._stagedVertex=null}onInputEvent(e){switch(e.type){case"pointer-down":this._pointerDownStates.add(e.pointerId);break;case"pointer-up":this._pointerDownStates.delete(e.pointerId)}switch(e.type){case"pointer-move":return this._onPointerMove(e);case"hold":return this._onHold(e)}}redo(){this._editGeometryOperations.redo()}undo(){Object(o.k)(this.snappingManager)&&this.snappingManager.doneSnapping(),this._editGeometryOperations.undo()}_closeOnClickVertexIndex(e){const t=this._activeComponent;if("polygon"===this.geometryType&&t.vertices.length>2){if(this._vertexWithinPointerDistance(t.vertices[0].pos,e))return 0;if(this._vertexWithinPointerDistance(t.vertices[t.vertices.length-1].pos,e))return t.vertices.length-1}return null}_createManipulatorDragPipeline(e){switch(this.drawingMode){case"click":return this._createManipulatorDragPipelineClick(e);case"freehand":return this._createManipulatorDragPipelineFreehand(e);case"hybrid":return this._createManipulatorDragPipelineHybrid(e)}}_createManipulatorDragPipelineClick(e){return Object(g.e)(e,((e,t,n,r)=>{const i="touch"===r&&this._snappingEnabled;!this.isCompleted&&i&&(t.next(this._screenToMapDragEventStep()).next((e=>("start"===e.action&&(this.stagedVertex=e.mapStart,("segment"===this.geometryType||i&&0===this.numVertices)&&this.commitStagedVertex()),e))).next(this._snappingPipeline.createSnapDragEventPipelineStep({predicate:()=>i,cancel:n,snappingManager:this.snappingManager,snappingContext:new _.a({editGeometryOperations:this._editGeometryOperations,elevationInfo:this.elevationInfo,pointer:r,visualizer:this.snappingVisualizer}),updatingHandles:this.updatingHandles}),this._snappingPipeline.next).next((e=>(i&&(this.stagedVertex=e.mapEnd,"end"===e.action&&this.commitStagedVertex()),e))).next((e=>("end"===e.action&&("segment"!==this.geometryType&&"point"!==this.geometryType||this.complete()),e))),n.next((()=>{i&&Object(o.k)(this.snappingManager)&&this.snappingManager.doneSnapping()})))}))}_createManipulatorDragPipelineFreehand(e){return Object(g.e)(e,((e,t)=>{this.isCompleted||t.next(this._screenToMapDragEventStep()).next((e=>("start"===e.action&&(Object(o.j)(this.stagedVertex)&&(this.stagedVertex=e.mapStart),"segment"===this.geometryType&&this.commitStagedVertex()),e))).next((e=>{switch(e.action){case"start":case"update":this.stagedVertex=e.mapEnd,"polygon"!==this.geometryType&&"polyline"!==this.geometryType||this.commitStagedVertex();break;case"end":this.complete()}return e}))}))}_createManipulatorDragPipelineHybrid(e){return Object(g.e)(e,((e,t)=>{this.isCompleted||t.next(this._screenToMapDragEventStep()).next((e=>("start"===e.action&&(Object(o.j)(this.stagedVertex)&&(this.stagedVertex=e.mapStart),this.commitStagedVertex()),e))).next((e=>{switch(e.action){case"start":case"update":this.stagedVertex=e.mapEnd,"polygon"!==this.geometryType&&"polyline"!==this.geometryType||this.commitStagedVertex();break;case"end":"segment"!==this.geometryType&&"point"!==this.geometryType||this.complete()}return e}))}))}_getDrawSurface(){if(Object(o.j)(this.elevationDrawSurface))return this.drawSurface;if(!this.coordinateHelper.hasZ)return this.elevationDrawSurface.defaultZ=null,this.elevationDrawSurface;let e=this.defaultZ,t=!1;Object(o.k)(this.elevationInfo)&&"absolute-height"===this.elevationInfo.mode&&(t=!0),Object(o.k)(this.snapToSceneEnabled)&&(t=this.snapToSceneEnabled),Object(o.k)(this.elevationInfo)&&"on-the-ground"===this.elevationInfo.mode&&(t=!1);const n=this._activeComponent.vertices.length;return("segment"===this.geometryType||"polygon"===this.geometryType)&&n>0&&(e=this.coordinateHelper.getZ(this._activeComponent.vertices[0].pos),t=!1),t?this.drawSurface:(this.elevationDrawSurface.defaultZ=e,this.elevationDrawSurface)}_mapToScreen(e){return this._getDrawSurface().mapToScreen(e)}_onHold(e){Object(o.a)(this._snappingTask),"click"===this.drawingMode&&"touch"===e.pointerType&&this._snappingEnabled&&(this.stagedVertex=e.mapPoint),e.stopPropagation()}_onImmediateClick(e){if("mouse"===e.pointerType&&2===e.button||this._manipulator.dragging)return;const t=this._activeComponent,n=this._closeOnClickVertexIndex(e.screenPoint);if(Object(o.k)(n))return e.stopPropagation(),this.discardStagedVertex(),void this.complete();const r=this._screenToMap(e.screenPoint);if(Object(o.k)(r))switch(this.drawingMode){case"freehand":"point"===this.geometryType&&(this.hasStagedVertex?this.commitStagedVertex():this._editGeometryOperations.appendVertex(this.coordinateHelper.pointToVector(r)),this.complete());break;case"click":case"hybrid":this._snappingTask=Object(o.a)(this._snappingTask),this.hasStagedVertex?this.commitStagedVertex():this._editGeometryOperations.appendVertex(this.coordinateHelper.pointToVector(r)),("point"===this.geometryType||"segment"===this.geometryType&&2===t.vertices.length||"segment"===this.geometryType&&"hybrid"===this.drawingMode&&1===t.vertices.length)&&this.complete()}e.stopPropagation()}_onImmediateDoubleClick(e){this._manipulator.dragging||"point"===this.geometryType||(this.complete(),e.stopPropagation())}_onPointerMove(e){if(Object(o.a)(this._snappingTask),this._manipulator.dragging||this._pointerDownStates.has(e.pointerId)||this._manipulator.grabbing||!this._manipulator.interactive)return;const t=Object(l.e)(e.x,e.y),n=this._closeOnClickVertexIndex(t);if(Object(o.k)(n)){this.discardStagedVertex();const e={componentIndex:0,vertexIndex:n,coordinates:this.coordinateHelper.vectorToArray(this._activeComponent.vertices[n].pos)};this.emit("cursor-update",{updated:null,vertices:[e],operation:"apply",type:"vertex-update"})}else{const n=this._screenToMap(t);if(this._manipulator.cursor=Object(o.k)(n)?"crosshair":null,Object(o.k)(n))if(Object(o.k)(this.snappingManager)){const t=this.snappingManager,r=new _.a({editGeometryOperations:this._editGeometryOperations,elevationInfo:this.elevationInfo,pointer:e.pointerType,visualizer:this.snappingVisualizer});this.stagedVertex=t.update(n,r),this._snappingTask=Object(c.g)((async e=>{const i=await this._frameTask.schedule((()=>t.snap(n,r,e)),e);i.valid&&await this._frameTask.schedule((()=>{this.stagedVertex=i.apply()}),e)})),this.updatingHandles.addPromise(this._snappingTask.promise)}else this.stagedVertex=n}e.stopPropagation()}_screenToMap(e){return this._getDrawSurface().screenToMap(e)}_screenToMapDragEventStep(){let e=null;return t=>{if("start"===t.action&&(e=this._screenToMap(t.screenStart)),Object(o.j)(e))return null;const n=this._screenToMap(t.screenEnd);return Object(o.k)(n)?{...t,mapStart:e,mapEnd:n}:null}}_vertexWithinPointerDistance(e,t){const n=this._mapToScreen(this.coordinateHelper.vectorToDehydratedPoint(e));return!!Object(o.k)(n)&&function(e,t,n){const r=e.x-t.x,i=e.y-t.y;return r*r+i*i<=n}(n,t,25)}};Object(r.a)([Object(u.b)()],x.prototype,"defaultZ",void 0),Object(r.a)([Object(u.b)({value:m.a})],x.prototype,"drawingMode",null),Object(r.a)([Object(u.b)({constructOnly:!0})],x.prototype,"elevationDrawSurface",void 0),Object(r.a)([Object(u.b)({constructOnly:!0})],x.prototype,"elevationInfo",void 0),Object(r.a)([Object(u.b)({constructOnly:!0})],x.prototype,"geometryType",void 0),Object(r.a)([Object(u.b)({constructOnly:!0})],x.prototype,"hasM",void 0),Object(r.a)([Object(u.b)({constructOnly:!0})],x.prototype,"hasZ",void 0),Object(r.a)([Object(u.b)({constructOnly:!0})],x.prototype,"manipulators",void 0),Object(r.a)([Object(u.b)({constructOnly:!0})],x.prototype,"drawSurface",void 0),Object(r.a)([Object(u.b)({constructOnly:!0})],x.prototype,"snappingManager",void 0),Object(r.a)([Object(u.b)({constructOnly:!0})],x.prototype,"snappingVisualizer",void 0),Object(r.a)([Object(u.b)()],x.prototype,"snapToSceneEnabled",void 0),Object(r.a)([Object(u.b)({readOnly:!0})],x.prototype,"updating",null),Object(r.a)([Object(u.b)({constructOnly:!0})],x.prototype,"view",void 0),x=Object(r.a)([Object(h.a)("esri.views.draw.DrawOperation")],x)}}]);
//# sourceMappingURL=42.3271d21e.chunk.js.map