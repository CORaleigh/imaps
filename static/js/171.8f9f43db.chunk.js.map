{"version":3,"sources":["Components/Overview/utils/overview.ts","Components/Overview/Overview.tsx"],"names":["setGraphicSymbol","overview","scheme","type","basemap","map","geometryType","basemapTheme","SimpleFillSymbol","color","r","g","b","Panel","props","ref","useRef","useEffect","view","expand","ArcGISMap","console","log","document","querySelector","MapView","navigation","browserTouchPanEnabled","mouseWheelZoomEnabled","container","ui","remove","createOverview","current","content","when","then","mainView","extent","clone","graphicLayer","GraphicsLayer","listMode","opacity","add","Graphic","symbol","watch","graphics","getItemAt","geometry","goTo","target","rotation","configureOverview","className"],"mappings":"qPAOO,MAeDA,EAAoBC,IACxB,MAAMC,EAASC,IAAgB,CAAEC,QAASH,EAASI,IAAID,QAASE,aAAc,YAC9E,MAA4B,UAAxBJ,EAAOK,aACF,IAAIC,IAAiB,CAAEC,MAAO,CAAEC,EAAG,EAAGC,EAAG,EAAGC,EAAG,KAE5B,SAAxBV,EAAOK,aACF,IAAIC,IAAiB,CAAEC,MAAO,CAAEC,EAAG,IAAKC,EAAG,IAAKC,EAAG,YAD5D,G,YCrBK,MAAMC,EAASC,IACpB,MAAMC,EAAMC,iBAAuB,MAiBnC,OAfAC,qBAAU,KACR,GAAIH,EAAMI,MAAQJ,EAAMK,OAAQ,CAC9B,MAAMlB,EDJmBiB,KAC7B,MAAMb,EAAiB,IAAIe,IAAU,CAAEhB,QAASc,EAAKb,IAAID,UACzDiB,QAAQC,IAAIC,SAASC,cAAc,iBACnC,MAAMvB,EAAW,IAAIwB,IAAQ,CAC3BpB,IAAKA,EACLqB,WAAY,CACVC,wBAAwB,EACxBC,uBAAuB,GAEzBC,UAAW,gBAIb,OAFA5B,EAAS6B,GAAGC,OAAO,QACnB9B,EAAS6B,GAAGC,OAAO,eACZ9B,GCTc+B,CAAelB,EAAMI,MACtCjB,EAAS4B,UAAYd,EAAIkB,QACxBnB,EAAMK,OAAyBe,QAAUnB,EAAIkB,QAC9ChC,EAASkC,OAAOC,MAAK,KDiBM,EAACnC,EAA0BoC,KAC1DpC,EAASI,IAAID,QAAUiC,EAAShC,IAAID,QACpC,IAAIkC,EAASD,EAASC,OAAOC,QAC7BD,EAAOnB,OAAO,GACdlB,EAASqC,OAASA,EAClB,MAAME,EAAe,IAAIC,IAAc,CAAEC,SAAU,OAAQC,QAAS,KACpEH,EAAaI,IAAI,IAAIC,IAAQ,CAAEC,OAAQ9C,EAAiBC,MACxDA,EAASI,IAAIuC,IAAIJ,GACjBH,EAASU,MAAM,CAAC,eAAe,KAC7BP,EAAaQ,SAASC,UAAU,GAAGC,SAAWb,EAASC,OACvDA,EAASD,EAASC,OAAOC,QACzBD,EAAOnB,OAAO,GACdlB,EAASkD,KAAK,CAAEC,OAAQd,OAE1BD,EAAShC,IAAI0C,MAAM,WAAY3C,IAC7BH,EAASI,IAAID,QAAUA,EACvBoC,EAAaQ,SAASC,UAAU,GAAGH,OAAS9C,EAAiBC,MAE/DoC,EAASU,MAAM,YAAaM,IACzBpD,EAAiBoD,SAAWA,MCnCzBC,CAAkBrD,EAAUa,EAAMI,SAItC,MAAO,KACLG,QAAQC,IAAI,eAEb,IAEI,qBAAKiC,UAAU,eAAexC,IAAKA,KAE7BF","file":"static/js/171.8f9f43db.chunk.js","sourcesContent":["/* eslint-disable @typescript-eslint/no-explicit-any */\nimport ArcGISMap from '@arcgis/core/Map';\nimport MapView from '@arcgis/core/views/MapView';\nimport GraphicsLayer from '@arcgis/core/layers/GraphicsLayer';\nimport Graphic from '@arcgis/core/Graphic';\nimport SimpleFillSymbol from '@arcgis/core/symbols/SimpleFillSymbol';\nimport * as type from '@arcgis/core/smartMapping/symbology/type';\nexport const createOverview = (view: __esri.MapView): __esri.MapView => {\n  const map: ArcGISMap = new ArcGISMap({ basemap: view.map.basemap });\n  console.log(document.querySelector('#overviewMap'));\n  const overview = new MapView({\n    map: map,\n    navigation: {\n      browserTouchPanEnabled: false,\n      mouseWheelZoomEnabled: false,\n    },\n    container: 'overviewMap',\n  });\n  overview.ui.remove('zoom');\n  overview.ui.remove('attribution');\n  return overview;\n};\nconst setGraphicSymbol = (overview: __esri.MapView): SimpleFillSymbol | undefined => {\n  const scheme = type.getSchemes({ basemap: overview.map.basemap, geometryType: 'polygon' });\n  if (scheme.basemapTheme === 'light') {\n    return new SimpleFillSymbol({ color: { r: 0, g: 0, b: 0 } as __esri.Color });\n  }\n  if (scheme.basemapTheme === 'dark') {\n    return new SimpleFillSymbol({ color: { r: 255, g: 255, b: 255 } as __esri.Color });\n  }\n};\nexport const configureOverview = (overview: __esri.MapView, mainView: __esri.MapView): void => {\n  overview.map.basemap = mainView.map.basemap;\n  let extent = mainView.extent.clone();\n  extent.expand(4);\n  overview.extent = extent;\n  const graphicLayer = new GraphicsLayer({ listMode: 'hide', opacity: 0.5 });\n  graphicLayer.add(new Graphic({ symbol: setGraphicSymbol(overview) }));\n  overview.map.add(graphicLayer);\n  mainView.watch(['stationary'], () => {\n    graphicLayer.graphics.getItemAt(0).geometry = mainView.extent;\n    extent = mainView.extent.clone();\n    extent.expand(4);\n    overview.goTo({ target: extent });\n  });\n  mainView.map.watch('basemap', (basemap) => {\n    overview.map.basemap = basemap;\n    graphicLayer.graphics.getItemAt(0).symbol = setGraphicSymbol(overview) as __esri.SimpleFillSymbol;\n  });\n  mainView.watch('rotation', (rotation) => {\n    (overview as any).rotation = rotation;\n  });\n};\n","/* eslint-disable @typescript-eslint/explicit-module-boundary-types */\n/* eslint-disable @typescript-eslint/no-explicit-any */\nimport React, { useEffect, useRef } from 'react';\n\nimport './Overview.scss';\nimport { configureOverview, createOverview } from './utils/overview';\nexport const Panel = (props: any) => {\n  const ref = useRef<HTMLDivElement>(null);\n\n  useEffect(() => {\n    if (props.view && props.expand) {\n      const overview = createOverview(props.view);\n      overview.container = ref.current as HTMLDivElement;\n      (props.expand as __esri.Expand).content = ref.current as HTMLDivElement;\n      overview.when().then(() => {\n        configureOverview(overview, props.view);\n      });\n    }\n\n    return () => {\n      console.log('clean up');\n    };\n  }, []); // only after initial render\n\n  return <div className=\"overview-map\" ref={ref}></div>;\n};\nexport default Panel;\n"],"sourceRoot":""}