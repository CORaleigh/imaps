import{gc as R,at as W,aC as g,cG as $,cT as b,cc as k,dg as M,gd as q,ge as U,f as v,J as w}from"./index-53e0d3f6.js";import{k as A,o as l,r as G}from"./automaticLengthMeasurementUtils-bbfb1cc8.js";import{r as S}from"./earcut-61f7b102.js";import{j as x,E,Y as F,K as J}from"./plane-54a1816b.js";import{S as K}from"./triangle-cbb245f7.js";import{geodesicArea as T}from"./geometryEngine-f8f9b56c.js";function Y(r,t=m()){return y(r,t)}function Z(r,t=m()){return y(r,t,!1)}function y(r,t,s=r.hasZ){const u=A(r.spatialReference),a=R(u);if(W(a))return null;const j=(c,o)=>!(o.length<2)&&($(c,o[0],o[1],s&&o[2]||0),!0);let p=0;for(const c of r.rings){const o=c.length;if(o<3)continue;const{positionsWorldCoords:e}=t;for(;e.length<o;)e.push(g());const h=z,i=$(B,0,0,0),C=1/o;for(let n=0;n<o;n++){if(!j(h,c[n])||!b(h,r.spatialReference,e[n],u))return null;k(i,i,e[n],C)}const d=x(e[0],e[1],i,E());if(M(F(d))===0)continue;for(let n=0;n<o;n++)J(d,i,e[n],e[n]);const f=D(e);for(let n=0;n<f.length;n+=3)p+=K(e[f[n]],e[f[n+1]],e[f[n+2]])}return l(p,a)}const z=g(),B=g();function m(){return{positionsWorldCoords:[]}}function D(r){return S(H(r),[],2)}function H(r){const t=new Float64Array(2*r.length);for(let s=0;s<r.length;++s){const u=r[s],a=2*s;t[a+0]=u[0],t[a+1]=u[1]}return t}function I(r){const{spatialReference:t}=r;return G(t,L,N,O,r)}function L(r){return l(Math.abs(q([r],"square-meters")[0]),"square-meters")}function N(r){try{return l(Math.abs(T(r,"square-meters")),"square-meters")}catch{return null}}function O(r){const t=[];return U(r,t)?l(Math.abs(q([{type:"polygon",rings:t,spatialReference:v.WGS84}],"square-meters")[0]),"square-meters"):null}function P(r,t,s=m()){if(t==="on-the-ground"){const u=I(r);return w(u)?u:Z(r,s)}return Y(r,s)}function nr(r,t=m()){return P(r,"on-the-ground",t)}export{P as i,nr as u};
