import{ar as m,at as h,J as M,av as c}from"./index-056c54a4.js";function u(e,t){return t?"xoffset"in t&&t.xoffset?Math.max(e,Math.abs(t.xoffset)):"yoffset"in t&&t.yoffset?Math.max(e,Math.abs(t.yoffset||0)):e:e}function b(e){let t=0,n=0;for(let s=0;s<e.length;s++){const r=e[s].size;typeof r=="number"&&(t+=r,n++)}return t/n}function p(e,t){return typeof e=="number"?e:e&&e.stops&&e.stops.length?b(e.stops):t}function v(e,t){if(!t)return e;const n=t.filter(a=>a.type==="size").map(a=>{const{maxSize:i,minSize:f}=a;return(p(i,e)+p(f,e))/2});let s=0;const r=n.length;if(r===0)return e;for(let a=0;a<r;a++)s+=n[a];const o=Math.floor(s/r);return Math.max(o,e)}function d(e){var r;const t=e&&e.renderer,n=(e&&e.event&&e.event.pointerType)==="touch"?9:6;if(!t)return n;const s="visualVariables"in t?v(n,t.visualVariables):n;if(t.type==="simple")return u(s,t.symbol);if(t.type==="unique-value"){let o=s;return(r=t.uniqueValueInfos)==null||r.forEach(a=>{o=u(o,a.symbol)}),o}if(t.type==="class-breaks"){let o=s;return t.classBreakInfos.forEach(a=>{o=u(o,a.symbol)}),o}return t.type==="dot-density"||t.type,s}function z(e,t,n,s=new m){let r=0;if(n.type==="2d")r=t*(n.resolution??0);else if(n.type==="3d"){const x=n.overlayPixelSizeInMapUnits(e),l=n.basemapSpatialReference;r=M(l)&&!l.equals(n.spatialReference)?c(l)/c(n.spatialReference):t*x}const o=e.x-r,a=e.y-r,i=e.x+r,f=e.y+r,{spatialReference:y}=n;return s.xmin=Math.min(o,i),s.ymin=Math.min(a,f),s.xmax=Math.max(o,i),s.ymax=Math.max(a,f),s.spatialReference=y,s}function $(e,t,n){const s=n.toMap(e);return h(s)?!1:z(s,d(),n,R).intersects(t)}const R=new m;export{z as a,$ as o,d as s};
